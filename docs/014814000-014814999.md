# StackOverflow 问答 14814000-14814999

# java - Eclipse 没有选择 oracle.jdbc.OracleDriver

> ID：14814005
> 
> 赞同：0
> 
> 时间：2013-02-11T14:24:32.507
> 
> 标签：java, eclipse, oracle, driver

运行 java 应用程序时出现 oracle.jdbc.OracleDriver not found 错误。此驱动程序包含在类路径的 jar 中。我仍然遇到同样的错误。有人可以告诉我如何解决这个错误。

提前致谢。加内辛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:29:57.863

打开`.classpath`位于项目工作区目录中的文件，查看是否包含该库。你可能会发现这样的东西：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" path="src"/>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.6"/>
    <classpathentry kind="lib" path="lib/somelibrary.jar"/>
    <classpathentry kind="output" path="bin"/>
</classpath> 
```

# sharepoint - 使用共享点设计器超链接到单行文本字段

> ID：14814006
> 
> 赞同：2
> 
> 时间：2013-02-11T14:24:35.007
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-designer

我正在使用 Sharepoint 2010，并且在文档库中创建了单行文本字段列。我想将该列中的文本超链接到上传到文档库中的文件。如果我在共享点设计器中使用以下代码，它不起作用。有人可以帮我解决这个问题。

```
<a href="/{$thisNode/@FileLeafRef}"><xsl:value-of select="$thisNode/@*[name()=current()/@Name]" disable-output-escaping="yes" /></a> 
```

谢谢。

编辑：奇怪的是，如果我在视图中公开名称列，那么一切正常。我不知道为什么它会这样。有人可以解释一下吗。

# regex - 正则表达式 - 如何删除破折号和字符以获得数字

> ID：14814013
> 
> 赞同：-2
> 
> 时间：2013-02-11T14:25:03.710
> 
> 标签：regex

我需要一个可以删除破折号和字符的正则表达式，所以我只留下一个数字。

例如，如果我有这个：

```
1-Vehicle 
```

我在上面使用正则表达式我会得到这个：

```
1 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:36:42.420

您可以使用此正则表达式。删除所有其他字符后，它将为您提供所有数字。

```
s/[^\d]//gis; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:27:01.057

从字符串开头提取数字：/^(\d+).*$/

# wix - 带补丁的 MSI 多实例安装

> ID：14814014
> 
> 赞同：1
> 
> 时间：2013-02-11T14:25:03.320
> 
> 标签：wix, windows-installer

我目前很难尝试使用根据此处的说明构建的 MST 在多实例场景中使用 MSP（也使用 WiX 构建）修补 MSI（使用 WiX 构建）：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa367797(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367797(v=vs.85).aspx)

我构建的转换工具：

*   生成新的 UpgradeCode/ProductCode 属性
*   更新 Upgrade 表以使用新的 UpgradeCode
*   更新 ProductName 属性以包含实例名称
*   使用包含实例名称的新项目更新 ServiceControl 和 Shortcut 表
*   更新 Directory 表以更新包含 INSTALLDIR 行的实例名称的 DefaultDir 列
*   生成转换摘要信息并写入转换

安装应用了转换的 MSI 似乎可行。我这样调用 msiexec ：

```
msiexec /i <product.msi> TRANSFORMS=<instance.mst> MSINEWINSTANCE=1 
```

但是，修补似乎不起作用。我尝试按照此处所述应用补丁：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa369528(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369528(v=vs.85).aspx)

```
msiexec /p <mypatch.msp> /n {product-code} 
```

安装程序立即退出并显示“Windows Installer 服务无法安装升级补丁，因为要升级的程序可能丢失，或者升级补丁可能会更新程序的不同版本”。

基本 MSI 已安装，并且已在 WiX 中的 PatchCreation 元素上使用 AllowProductCodeMismatches="yes" 构建补丁。

如何获得要安装的补丁？

* * *

编辑：进一步阅读后，看起来我在做一些不好的事情。我现在已停止更改 UpgradeCode 属性，因为它似乎不需要，而且我自己工具的实例转换要轻得多。

我还查看了 @YanSklyarenko 的博客条目以进行修补 - 他修改了现有补丁以更改补丁适用的 ProductCode。我试过用类似的代码做同样的事情：

```
 // Copy original patch
    File.Copy(_patchPath, _newPatchPath, true);

    // Update patch target product code
    using (var patch = new PatchPackage(_patchPath))
    using (var patchForWrite = new Database(_newPatchPath, DatabaseOpenMode.Transact))
    {
        var originalProductCode = patch.GetTargetProductCodes().First();
        var productCode = _newProductCode;

        foreach (var transform in patch.GetTransforms())
        {
            // Extract/update transforms
            var tempFileName = Path.GetTempFileName();
            var transformFileName = transform + _instanceName;
            patch.ExtractTransform(transform, tempFileName);
            using (var summaryInfo = new SummaryInfo(tempFileName, true))
            {
                summaryInfo.RevisionNumber = summaryInfo.RevisionNumber.Replace(originalProductCode, productCodeString);
                summaryInfo.Persist();
            }

            // Write transform to new patch
            using (var insertView = patchForWrite.OpenView("INSERT INTO `_Storages` (`Name`,`Data`) VALUES ('{0}', ?)", transformFileName))
            {
                using (var record = new Record(1))
                {
                    record.SetStream(1, new FileStream(tempFileName, FileMode.Open));
                    insertView.Execute(record);
                    patchForWrite.Commit();
                }
            }

            // Add transform to patch properties
            patchForWrite.SummaryInfo.LastSavedBy += ";:" + transformFileName;
        }

        // Update patch properties
        patchForWrite.SummaryInfo.Template = patchForWrite.SummaryInfo.Template.Replace(originalProductCode, productCodeString);
        patchForWrite.SummaryInfo.Persist();
    } 
```

我安装补丁仍然没有任何运气，并且 msiexec 在写入任何日志之前仍然退出。

* * *

编辑2：我仍然没有运气。我试过使用 WiX 实例转换来安装，但补丁*仍然*不适用。我的 PatchCreation 元素定义了每个实例的 TargetProductCode 元素，并且 AllowProductCodeMismatches 仍然打开。

* * *

编辑 3：听起来 AllowProductCodeMismatches 是一个 MSIMSP 东西，允许在两个不同的产品代码之间跳转以创建补丁而不是验证。目标产品代码必须包含在补丁中。不幸的是，对我来说 TargetProductCode 元素似乎被忽略了。

[http://windows-installer-xml-wix-toolset.687559.n2.nabble.com/Re-Multiple-instance-patches-td1559146.html](http://windows-installer-xml-wix-toolset.687559.n2.nabble.com/Re-Multiple-instance-patches-td1559146.html)

> 我在这里不是一个 100% 肯定的人，但我认为一些验证与基于两个图像的补丁生成有关，而不是补丁应用程序本身（以老式的方式使用 PCP 的 MSIMSP 生成补丁）文件）。如果在补丁变换生成中使用的两个图像没有相同的产品代码并且 ProductID 验证设置为 no，那么您将不会收到错误。否则，在补丁生成过程中会返回一个错误，让您知道您的输入可能无效等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:26:18.353

我设法让这个工作。出于各种原因，我们的原始补丁是使用 PatchCreation 元素创建的。以这种方式创建的转换设置了检查 ProductCode 和 UpgradeCode 的验证。最后，我更新了我的转换以将其关闭，而不是更改每个转换的 ProductCode/UpgradeCode。因此，总而言之，将补丁应用于新产品代码：

*   更新 Template SummaryInfo 属性并将原始 ProductCode 替换为实例 ProductCode
*   提取转换并将其替换为禁用 ProductCode 和 UpgradeCode 验证的版本

然后安装补丁：

```
REM This works fine
msiexec /p <patch.msp> /n {<ProductCode>} 
```

这对我*不起作用*- 我从日志中收到一条错误消息，指出 Windows Installer 无法创建补丁的临时副本。：

```
REM DON'T USE THIS!
msiexec /i {<ProductCode>} PATCH=<patch.msp> 
```

* * *

编辑：要禁用的适当验证标志是：

```
PatchProduct =      0x00020000, // Disables product code matches
PatchUpgradeCode =  0x08000000, // Disables upgrade code matches
PatchMagic =        0x00040000, // Heck knows what this does - but Orca disables this 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T09:29:43.163

创建补丁涉及遵循多个规则，而不仅仅是匹配产品代码。以下 MSDN 文章更详细地解释了这些规则：http: [//msdn.microsoft.com/en-us/library/aa367850.aspx](http://msdn.microsoft.com/en-us/library/aa367850.aspx)

正如您在 Yan Sklyarenko 链接的文章中所看到的那样，同样的规则在开始时也给他带来了问题。

# jquery - Jquery mobile 1.2 横向问题在页面转换前跳跃/调整大小

> ID：14814017
> 
> 赞同：2
> 
> 时间：2013-02-11T14:25:16.457
> 
> 标签：jquery, mobile, landscape

有人可以帮我吗。

我正在使用 jquery mobile (1.2) 开发一个 webapp，并且在纵向模式 (iphone/ipad) 下一切看起来都很好，页面转换也是如此。

但是当我转向横向时，就在页面从一个转换到另一个之前，字体变大并且视图调整大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T04:41:27.657

尝试在视口元标记中添加“initial-scale=1”。

```
<meta name="viewport" content="width=device-width,initial-scale=1"> 
```

我有完全相同的问题，它解决了我的问题。

# c# - 是否有 FolderBrowserDialog 的更新版本？

> ID：14814022
> 
> 赞同：1
> 
> 时间：2013-02-11T14:25:21.517
> 
> 标签：c#, windows, user-interface, dialog, filesystems

Windows 似乎在一些地方使用了更现代的对话框来浏览和选择文件夹（我在网上找到了这个截图， http: [//media.wiley.com/Lux/97/145397.image1.jpg](http://media.wiley.com/Lux/97/145397.image1.jpg)），所以我想知道如果有任何方法可以访问该对话框并自己在程序中使用它。

我当然知道`System.Windows.Forms.FolderBrowserDialog`，但它仍在使用一种旧的 TreeView-esque 类型的 UI，它不再真正使用了（我担心这是有充分理由的）。

我见过一些这样的问题（例如，[可以选择文件夹的 OpenFileDialog？](http://bytes.com/topic/c-sharp/answers/453226-openfiledialog-can-select-folders)）但它们已经过时，指的是第三方对话框（如果可能的话，我宁愿避免），或者两者兼而有之。

我只是错过了什么吗？我可以想象这种东西隐藏在其他库或 API/SDK 或其他东西中。令我惊讶的是，微软似乎在整个 Windows 中如此彻底地使用它而没有完全发布它，特别是因为我至少从 Windows 7 开始就已经看到它了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:34:41.583

那是 OpenFileDialog 的 Vista 版本。底层本机接口是基于 COM 的，使用 FOS_PICKFOLDERS 选项调用[IFileDialog::SetOpions() 方法。](http://msdn.microsoft.com/en-us/library/bb761832%28VS.85%29.aspx)

这个特性没有直接暴露在 .NET 中，它仍然需要支持不支持 Vista 接口的旧操作系统。特别是 XP。如果您有能力不再支持 XP，或者愿意为旧操作系统编写仍使用 FolderBrowserDialog 的后备代码，那么您可以在[Windows API 代码包库](http://archive.msdn.microsoft.com/WindowsAPICodePack)中找到与 IFileOpenDialog 互操作的代码。

# unix - 使用脚本更改 solaris ip 地址

> ID：14814026
> 
> 赞同：0
> 
> 时间：2013-02-11T14:25:44.720
> 
> 标签：unix, scripting, solaris

我一直使用经典方法通过修改 /etc/inet/hosts 和 /etc/inet/inodes 来更改 Solaris 10 的 IP 地址。

有没有办法使用脚本更改IP地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:00:22.707

`/etc/inet/ipnodes`（不是 inode）应该是指向 的符号链接`/etc/inet/hosts`，至少在最近的 Solaris 10 更新中是这样。无论如何，您可能只是直接访问该`/etc/hosts`文件，但这不是我推荐的，除非您处于单用户模式。主机文件不同步的原因可能会触发各种问题并挂起，具体取决于您计算机上运行的服务。

[您可以使用ifconfig](http://docs.oracle.com/cd/E19253-01/816-5166/ifconfig-1m/index.html)命令动态更改 IP 地址，这实际上是唯一的方法（使用 CLI）。

更改将在重新启动时选择的地址的另一种方法是将其直接放入`/etc/hostname.<interface>`文件中。这是支持和记录的方式。

请注意，在 Solaris 11 中，[ipadm](https://blogs.oracle.com/observatory/entry/ipadm)取代了 ifconfig，与后者不同的是，它允许持久配置，即您可以在不涉及编辑配置文件的简单脚本中更改您的 IP 地址。

# maven - 未插入 Maven 属性

> ID：14814037
> 
> 赞同：2
> 
> 时间：2013-02-11T14:26:20.763
> 
> 标签：maven

Maven 属性有时用于插件配置中的插值，有时则不存在。为什么是这样？

例如，在以下片段中，antrun 插件可以访问 dependencies 属性并按预期返回 jar 的本地路径。exec 插件失败，因为`${...}`计算结果为 null。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.example</groupId>
<artifactId>eg</artifactId>
<version>0.0.1-SNAPSHOT</version>
<dependencies>
    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>2.0</version>
    </dependency>
</dependencies>
<build>
    <plugins>

        <plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>
                <execution>
                    <phase>process-resources</phase>
                    <configuration>
                        <tasks>
                            <echo>Path in antrun: </echo>
                            <echo>${maven.dependency.commons-io.commons-io.jar.path}</echo>
                        </tasks>
                    </configuration>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.2</version>
            <executions>
                <execution>
                    <goals>
                        <goal>exec</goal>
                    </goals>
                    <phase>process-resources</phase>
                    <configuration>
                        <executable>echo</executable>
                        <arguments>
                            <argument>Path in mvn exec</argument>
                            <argument>${maven.dependency.commons-io.commons-io.jar.path}</argument>
                        </arguments>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

输出：

```
$ mvn process-resources
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building eg 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ eg ---
[debug] execute contextualize
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 0 resource
[INFO]
[INFO] --- maven-antrun-plugin:1.3:run (default) @ eg ---
[INFO] Executing tasks
     [echo] Path in antrun:
     [echo] C:\Users\Jim\.m2\repository\commons-io\commons-io\2.0\commons-io-2.0.jar
[INFO] Executed tasks
[INFO]
[INFO] --- exec-maven-plugin:1.2:exec (default) @ eg ---
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.288s
[INFO] Finished at: Mon Feb 11 14:24:03 GMT 2013
[INFO] Final Memory: 4M/121M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.2:exec (default) on project eg: Misconfigured argument, value is null. Set the argument to an empty value if this is the required behaviour. -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T14:48:39.880

类似依赖的属性仅对`maven-antrun-plugin`. 我不知道你是否必须在实际的 Ant 脚本中使用 Maven 依赖项，但如果你玩过它，你会知道 Ant 有：

```
<artifact:dependencies ...>
    <pom file="mypom.xml"/>
</artifact:dependencies> 
```

这基本上就是让您使用 Maven 依赖项的路径的原因。

在您的情况下，我相信这会从您的视线中隐藏起来，并且您已经将依赖项的路径作为属性。我想说的是插件正在为您自己处理这个问题。因此，其他插件看不到这些属性，因为它们`maven-antrun-plugin`没有导出实际的 Maven 属性，而是在 Ant 本身范围内的属性。

我希望这更有意义。

# java - 枚举的 Java 通用绑定（约束）

> ID：14814040
> 
> 赞同：5
> 
> 时间：2013-02-11T14:26:39.747
> 
> 标签：java, generics, enums, constraints, bounds

我正在尝试将 Java 泛型类型变量绑定（约束）为枚举（任何枚举）并且失败。你能告诉我为什么吗？

```
import org.supercsv.cellprocessor.ift.CellProcessor;
import org.supercsv.cellprocessor.ift.StringCellProcessor;

public class ParseEnum<TEnum extends Enum> extends CellProcessorAdaptor implements StringCellProcessor {

    public Object execute(final Object value, final CsvContext context) {
        ...
        final TEnum result;
        if (value instanceof TEnum) {
            result = (TEnum) value;
        } else if( value instanceof String ) {
                result = TEnum.valueOf((String)value);
        } else {
            ...
        }
        ...
} 
```

（这些是我尝试扩展 SuperCSV CellProcessor 的实际代码。）

`value instanceof TEnum`给了我这个错误（在 Eclipse 中）：

> “无法对类型参数 TEnum 执行 instanceof 检查。改用它的擦除枚举，因为更多的泛型类型信息将在运行时被擦除”

`TEnum.valueOf((String)value)`给我这个错误：

> “枚举类型中的方法 valueOf(Class, String) 不适用于参数 (String)”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T14:35:39.863

您必须通过枚举类才能做到这一点（就像这样`EnumSet.allOf()`做一样）。

```
public class ParseEnum<TEnum extends Enum<TEnum>> extends CellProcessorAdaptor implements StringCellProcessor {

    private Class<TEnum> enumType;

    public ParseEnum(Class<TEnum> enumType) {
        this.enumType = enumType;
    }

    public Object execute(final Object value, final CsvContext context) {
        ...
        final TEnum result;
        if (value.getClass().equals(enumType)) {
            result = (TEnum) value;
        } 
        else if (value instanceof String) {
            result = Enum.valueOf(enumType, (String) value);
        } 
        else {
            ...
        } 
```

# android - Android 相机处于横向但在纵向模式下使用

> ID：14814046
> 
> 赞同：2
> 
> 时间：2013-02-11T14:26:59.160
> 
> 标签：android, camera

我将手机置于“纵向模式”，但`cameraPreview`处于横向模式（即我看到旋转了 90 度的东西）。当我转动手机以将其保持在“横向模式”时，预览很好并且处于“横向模式”，图像没有旋转。我无权访问`Camera.setDisplayOrientation(int)`，因此无法使用[此处](http://developer.android.com/reference/android/hardware/Camera.html#setDisplayOrientation%28int%29)说明的方法。

我试过了：

```
Camera.Parameters p = camera.getParameters();
    if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT)
    {   
        p.set("orientation", "portrait");
        p.set("rotation",90);
    }
    if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE)
    {                               
        p.set("orientation", "landscape");          
        p.set("rotation", 90);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:34:08.097

尝试使用以下方法设置相机的显示方向：

```
Camera camera;
...
camera.setDisplayOrientation(90); 
```

放在surfaceCreated(SurfaceHolder holder)方法中。当我遇到类似问题时，这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:20:20.430

好的，所以我已经解决了问题在“surfaceCreated”方法中做

```
 Method rotateMethod;
    rotateMethod = android.hardware.Camera.class.getMethod("setDisplayOrientation", int.class);
    rotateMethod.invoke(camera, 90); 
```

刚过

```
camera = Camera.open(); 
```

（cf：[除非键盘打开，否则相机是错误的](https://stackoverflow.com/questions/5504605/camera-is-wrong-unless-keyboard-is-open/5504651#5504651)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:37:05.617

在工作区项目的 AndroidManifest.xml Activity 中添加代码。

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

# php - WAMP 中的 LDAP TLS_REQCERT

> ID：14814054
> 
> 赞同：0
> 
> 时间：2013-02-11T14:27:45.667
> 
> 标签：php, windows, apache, ssl

我正在设置一个开发`WAMP`堆栈，需要将`TLS_REQCERT`选项设置为从不，`ldap.conf`但 WAMP 目录中没有这样的文件。我也很努力`'TLS_REQ_CERT'`，唯一的结果是`php_ldap.dll`. 有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T20:05:48.020

感谢 Satish 对解决方案的指导。

Windows 8 x64 企业 WAMP 服务器（32 位，PHP 5.4）- [http://www.wampserver.com/en/](http://www.wampserver.com/en/)

要启用 LDAPS，ldap.conf 文件必须位于 C:/OpenLDAP/sysconf/ 中，即使您没有安装 OpenLDAP。然后可以设置 TLS_REQCERT 选项。安装 WAMP 服务器后，我必须执行以下操作：

1.  启用 Apache ssl_module 和 ldap_module
2.  在 httpd.conf 中取消注释“包含 conf/extra/httpd-ssl.conf”
3.  复制 crt 和密钥文件
4.  配置 httpd-ssl.conf
5.  在 PHP 中启用 openssl 和 ldap_php 扩展
6.  将php目录下的libsasl.dll复制到apache bin目录下
7.  将 ldap.conf 复制到 C:/OpenLDAP/sysconf/ldap.conf

它有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-29T16:14:30.287

将行添加到 C:/OpenLDAP/sysconf/ldap.conf 在 WAMP 3.1.3 32bit 上为我工作

# javascript - 从 js 对象获取更多信息

> ID：14814055
> 
> 赞同：1
> 
> 时间：2013-02-11T14:27:47.810
> 
> 标签：javascript

我可以通过执行以下操作来获取属于特定 js 对象的所有函数和参数的列表：-

> x = IDBKeyRange.only(43); for ( var each in x ) { console.log(each, x[each]); }

有什么方法可以获得有关函数的更多信息，例如每个函数接受的参数数量等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:29:21.177

函数的`length`属性给出了声明中形式参数的数量，尽管这不一定与函数接受的参数数量相同。除非通过一些静态/动态分析，否则无法真正弄清楚。

函数的`.toString()`方法返回源代码。（这不是任何标准，而是我所知道的所有环境都以这种方式工作。当然，您无法获得“内置”功能的来源。）还试图使除实验/诊断/调试代码之外的任何东西都工作通过在运行时检查函数源代码可能表明一些严重的设计问题:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T14:29:53.113

> 我可以通过执行以下操作来获取属于特定 js 对象的所有函数和参数的列表：-

这将为您提供对象的*可枚举*属性，其中可能不包括很多东西。例如，如果您在数组上执行此操作，您将看不到`push`，因为它是一个不可枚举的属性（在这种情况下是数组的原型，但它同时适用于自己的属性和继承的属性）。

> 有什么方法可以获得有关函数的更多信息，例如每个函数接受的参数数量等？

您可以使用函数实例的[`length`属性](http://www.ecma-international.org/ecma-262/5.1/#sec-15.3.5.1)获取函数的数量（声明参数的数量） 。例如：

```
console.log("The arity of [].push is " + [].push.length); 
```

但是，重要的是要记住，JavaScript 函数可以通过[`arguments`object](http://www.ecma-international.org/ecma-262/5.1/#sec-10.6)接受可变数量的参数，因此 arity 可能无法为您提供完整的故事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:42:38.893

you can run debug mode in web browser. and use jquery qualifier to acces to your object.

# c# - 将字符串与斜杠进行比较

> ID：14814056
> 
> 赞同：-3
> 
> 时间：2013-02-11T14:27:49.833
> 
> 标签：c#, string, string-comparison

我有两个看起来像这样的字符串：

> 字符串 a = "C:\Temp\1.png"
> 
> 字符串 b = "C:\Temp\1.png"

当然，这些具有相同的含义。我正在寻找一种方法来知道他们是平等的。

意思是，类似于：

```
bool areEqual = false;    
if (a.CompareTo(b) == 0)
      areEqual = true; 
```

对于上面的示例，`areEqual`将是`true`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:29:42.233

`a == b`应该做你想做的。内容（斜线与否）不应对比较产生任何影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T14:31:33.713

使用此代码

```
string a = @"C:\xxx\1.png";
string b = @"C:\xxx\1.png";

bool blnEqule = a == b; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:29:33.057

尝试`a.Equals(b) == true`或简单`a == b`无所谓。

如果您想定制使用路径的代码，另一种方法是使用`FileInfo`对象为您解析该路径并检查它们是否指向同一个文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T16:03:04.747

实际上给出了上下文，OP想要的是以下内容

```
var a = "C:\\Temp\\1.png";
var b = "C:\\tEmP\\1.PNG";      
var isEquals = a.Equals(b, StringComparison.OrdinalIgnoreCase);
Console.WriteLine(isEquals); 
```

假设这将在 Windows 系统上运行，NTFS 系统是不区分大小写的。

PS。下载 Linqpad 进行 C# 原型设计，将为您节省很多时间。

# magento - Google Rich Snippet - 显示产品图片

> ID：14814058
> 
> 赞同：2
> 
> 时间：2013-02-11T14:28:02.227
> 
> 标签：magento, seo, microdata

我目前正在尝试在我的 Magento 网站中实现微数据（schema.org），但我仍然有一个问题没有找到答案。如何在 Google 搜索结果中显示产品图片？

我知道我可以实现产品微数据，但谷歌测试器似乎没有显示图像（例如，它与烹饪文章一样）。

是否可以 ？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:09:53.030

我认为 Google 尚不支持有机结果中的产品图片。

您可能正在考虑 Google 购物结果。它有时会在正常搜索结果旁边显示产品图像。要了解更多信息，请访问此处：

[http://www.google.com.au/merchants](http://www.google.com.au/merchants)

您需要提供所有产品的提要，并且您现在可能必须通过 AdWords 付费才能获得列表。

# git - Windows Azure 网站中的符号链接？

> ID：14814064
> 
> 赞同：3
> 
> 时间：2013-02-11T14:28:19.843
> 
> 标签：git, azure, symlink, azure-web-app-service

我们正在研究在 Azure 网站中运行 Drupal 站点，并通过 Git 进行部署。虚拟机可以支持它，但我们只是想知道网站是否也是一种选择。

目标是具有以下 Git 存储库结构：

*   `Drupal`（drupal.org 主项目的子模块，下面**有符号链接`Sites`**）
*   `Sites`（`all/modules/contrib`作为子模块）
*   其他元数据，如部署工具、依赖项等。

据我所知，Azure 网站似乎不支持符号链接。我不能说这很令人惊讶，但我想确定一下。

# ruby-on-rails - 如何使用脚手架或列创建注册和用户个人资料页面

> ID：14814065
> 
> 赞同：1
> 
> 时间：2013-02-11T14:28:24.527
> 
> 标签：ruby-on-rails, scaffolding

我是 Rails 新手，我想确保从正确的角度开始。所以我需要澄清一下。

我需要的注册字段将是用户名、电子邮件、密码、生日、邮政编码。

所以我将运行“rails 生成脚手架用户名：字符串电子邮件：字符串，生日：字符串邮政编码：字符串”。然后，我将在 user_spec 文件中添加一个 password_digest 列。

我将允许用户在从他们的用户 CP 注册后输入的个人资料字段是：姓名、性别、种族（可选择多个）、电子邮件、密码、生日、邮政编码（不在美国，然后列出城市、国家） ，教育，宗教，政治，儿童，身高，用户吸烟，用户饮酒，职业和用户关于我的部分。

我需要确认的是我应该为所有这些信息生成脚手架（用户获取所需信息，然后为其他配置文件信息创建另一个名为 UserProfile 的脚手架）还是应该只使用 user_spec.rb 中的列来获取所有这些信息?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:44:15.637

这个想法是将所有字段保留在一个表中。这可以使用迁移轻松完成。

添加所有字段后，包括用户名、电子邮件、密码、生日、邮政编码、姓名、性别、种族（可选择多个）、教育、宗教、政治、儿童、身高、用户是否吸烟、用户是否饮酒、职业和用户关于我部分。

然后，您可以在登录后和登录前暗示条件，以根据您的需要**显示/隐藏字段。**

这样做的一般方法是：

```
if current_user

//show the fields after login
else
//show the fields before login
end 
```

请注意，这是您如何做到这一点的一般想法。但是，您可以在任何视图的代码中的任何位置使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:35:44.553

实际的数据库列将在数据库迁移文件中定义。您不需要在模型定义中全部定义它们。如果您使用描述的生成器为模型构建脚手架，您将找到一个迁移文件，`db/migrations`其中创建了您描述的列。

听起来您将“脚手架”视为实际代码，这令人困惑。相反，将脚手架视为定义模型代码、控制器代码和视图代码的创建的蓝图。你不生成脚手架；您使用脚手架生成模型、视图和控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:36:36.800

我对 Rails 很陌生，但我不推荐 Scaffold 选项。您最好从命令行使用所需字段生成用户模型和用户控制器，然后根据需要创建视图。

脚手架可能会给你比你需要的更多，并导致未来的混乱/问题。

您应该查看 Michael Hartl 的“通过示例学习 Rails”（作为电子书免费提供！）。即使您不想阅读它，他也会指导读者构建 Twitter 应用程序，我认为阅读其中的一些章节会对您有所帮助。祝你好运！

# jquery - TinyMCE - jquery - 无法在编辑器 iframe 中捕获点击

> ID：14814070
> 
> 赞同：1
> 
> 时间：2013-02-11T14:28:48.603
> 
> 标签：jquery, plugins, tinymce, handler

我为 tinyMCE 编写了简单的插件，让我可以设置选项卡和选项卡的内容，从而生成如下所示的 html：

```
<div class="tabs">
<nav class="content_menu">
    <ul>
        <li><a href="#tab-Tab1-0">Tab 1</a></li>
        <li><a href="#tab-Tab2-1">Tab 2</a></li>
    </ul>
</nav>
<div class="switcher">
    <div id="tab-Tab1-0">
        <article class="wide switch">
            Content 1
            <div style="clear: both;"></div>
        </article>
    </div>
    <div id="tab-Tab2-1">
        <article class="wide switch">
            Content 2
            <div style="clear: both;"></div>
        </article>
    </div>
</div> 
```

我需要的是让管理员用户像前端一样点击标签。处理前端切换选项卡的代码：

```
$(document).ready(function() {
    $('.tabs').on('hover', 'a', function(e) {
        e.preventDefault();

        $('nav.content_menu li').removeClass('selected');
        $(this).parent().addClass('selected');

        $('.switcher div').hide();
        $($(this).attr('href')).show();
    });
}); 
```

我通过编辑微小的 mce 源手动添加了这个 js 和 jquery：

```
t.iframeHTML += '<script type="text/javascript" src="/assets/js/jquery-1.9.0.min.js"></script>'
t.iframeHTML += '<script type="text/javascript" src="/assets/js/tinymce-kb.js"></script>' 
```

但是点击事件不会被 jquery 捕获。但是，我可以在 $(document).ready 上使用 console.log 或警告某些内容，但是单击选项卡不会触发编写的 jquery 函数。

我认为 tinyMCE 在 jquery 之前处理点击，是否可以改变这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:45:38.790

您应该使用 tinymce 事件[onClick](http://www.tinymce.com/wiki.php/API3%3aevent.tinymce.Editor.onClick)。

# java - 多个 RollingFileAppenders 写入同一个文件

> ID：14814071
> 
> 赞同：2
> 
> 时间：2013-02-11T14:28:54.903
> 
> 标签：java, tomcat, logging, slf4j, logback

我有两个上下文在同一个 JVM 和 Tomcat 实例中运行，我想使用 logback RollingFileAppender 写入同一个日志文件。如果我使用相同的文件，logback RollingFileAppender 是否同步以防止出现任何问题？我担心文件的滚动无法正常工作，以及一些日志被覆盖。

logback 文档[提到了一种谨慎的模式](http://logback.qos.ch/manual/appenders.html#prudentWithRolling)，但这表明性能受到影响，并且仅指从不同的 JVM 记录到同一文件。我将在同一个 JVM 中运行。

这是我的 logback.xml 的示例。我想在每个上下文的两个单独的 WAR 文件中都有这个：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>

  <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>${catalina.base}/logs/portal.log</file>
      <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
    <fileNamePattern>portal.%d.log</fileNamePattern>
    <maxHistory>30</maxHistory>
  </rollingPolicy>
  <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
        <maxFileSize>100MB</maxFileSize>
      </triggeringPolicy>  
      <encoder>
        <pattern>%d [%t] %-5p %c - %m%n</pattern>
      </encoder>
  </appender>

  <root level="INFO">
    <appender-ref ref="FILE" />
  </root>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:58:45.003

查看源代码表明 doAppend() 方法是同步的。rollover() 方法中的注释说它不需要同步，因为 doAppend() 是。

[http://grepcode.com/file/repo1.maven.org/maven2/ch.qos.logback/logback-core/0.9.3/ch/qos/logback/core/AppenderBase.java#AppenderBase.doAppend%28java。 lang.Object%29](http://grepcode.com/file/repo1.maven.org/maven2/ch.qos.logback/logback-core/0.9.3/ch/qos/logback/core/AppenderBase.java#AppenderBase.doAppend%28java.lang.Object%29)

[http://grepcode.com/file/repo1.maven.org/maven2/ch.qos.logback/logback-core/0.9.3/ch/qos/logback/core/AppenderBase.java#AppenderBase.doAppend%28java。 lang.Object%29](http://grepcode.com/file/repo1.maven.org/maven2/ch.qos.logback/logback-core/0.9.3/ch/qos/logback/core/AppenderBase.java#AppenderBase.doAppend%28java.lang.Object%29)

不过，您仍然可能会遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T16:48:16.093

我以这种方式使用 RollingFileAppender 并面临与您相同的问题。`<file>`仅当您从配置中删除该元素时，它似乎才有效。但是，所有文件都被命名为 eg`portal.2013-12-03.log`等等。如果你能忍受，那就去吧。

尽管如此，我仍然需要一个像活动日志一样的常量文件名`portal.log`，因为这些日志文件上运行着一些监控。但我还没有发现这是怎么可能的。我猜Windows在这里也造成了一些麻烦......

# c# - 在 wp8 中获取位置的 2 种方法，哪个最好？

> ID：14814072
> 
> 赞同：0
> 
> 时间：2013-02-11T14:28:56.870
> 
> 标签：c#, geolocation, windows-phone-8

据我所知，在 wp8 中，有两种方法可以从 Geolocator 获取位置。

1.  监听 PositionChanged 事件
2.  使用 GetPositionAsync

在我的应用程序中，我希望每 5 秒显示一次位置。我使用上述哪个有关系吗？还是一种方法比另一种更适合频繁的位置捕获？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T01:04:43.383

这不是 GeoLocation 在 WP7/WP8 上的工作方式。

Windows Phone 从多个来源（GPS、GLONASS、WiFi、手机信号塔、信鸽等）获取位置信息并将其缓存以备将来使用。WP7/WP8 位置服务 API 的工作方式是它们始终获取新信息，并且取决于您的 DesiredAccuracy 和您的 MinimumThreshold 将决定将事件冒泡到托管/WinPRT API。同样，事件是基于时间的。位置服务 API 中触发的事件基于对您的特定标准有用的新数据的可用性。

如果您想基于 GeoLoc 每 5 秒执行一次操作，您最好订阅来自 GeoLocator/GeoCoordinateWatcher 的事件，在您的应用程序中缓存最新值，并且每 5 秒使用最新值。不要指望每 5 秒触发一次地理定位事件，也不要使用 GetPositionAsync() 轮询 WinPRT API。GetPositionAsync() 用于一次性地理位置获取场景，而不是跟踪场景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:02:18.540

如果您想每 5 分钟左右获取一次位置，我会使用 GetPositionAsync，因为这将允许您在需要时检索数据。使用该事件可能意味着您最终会在用户移动时检索数据，这可能会给您带来问题。

# c++ - 在 boost.python 中将 Python 二进制文件转换为 C++ 二进制文件时出错

> ID：14814073
> 
> 赞同：0
> 
> 时间：2013-02-11T14:28:59.993
> 
> 标签：c++, python, boost-python

我必须通过 boost::python 将一些二进制文件从 Python 转换为 C++。二进制文件可能来自图像或文本文件。但是将图像文件的二进制文件转换为 c++ 时会出现一些错误。以下是一个示例。

C++

```
#include <boost/python.hpp>
#include <boost/python/module.hpp>
#include <boost/python/def.hpp>
#include <fstream>
#include <iostream>

using namespace boost::python;
void greet(char *name,char *ss)
{
    std::ofstream fout(name,std::ios::binary);
    std::cout<< "This length is:" << strlen(ss) <<std::endl;
    fout.write(ss.strlen);
    fout.close();
    return;
}

BOOST_PYTHON_MODULE(ctopy)
{
    def("greet",greet);
} 
```

Python：

```
import ctopy
#It is right.
f=open("t1.txt","rb")
ctopy.greet("t2.txt",f.read())
f.close()

#Do a error.There isn't data in the file "p2.jpg".
f2=open("p1.jpg","rb")
ctopy.greet("p2.jpg",f2.read()) #error.the file "p2.jpg" will be a empty file.
f2.close() 
```

如何将图像的二进制文件转换为 C++？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:33:35.087

[二进制文件](http://en.wikipedia.org/wiki/Binary_file)的编码通常取决于编程语言以外的因素，例如文件类型、操作系统等。例如，在[POSIX](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap03.html#tag_03_395)上，文本文件包含组织成零行或多行的字符，它是在 C++ 和 Python 中以相同的方式表示。两种语言只需要对给定格式使用正确的编码。在这种情况下，将 Python 二进制流转换为 C++ 二进制流没有特殊的过程，因为它在两种语言中都是原始字节流。

原始代码中的方法存在两个问题：

*   `strlen()`应该用于确定以空字符结尾的字符串的长度。如果二进制文件包含值为 的字节`\0`，则`strlen()`不会返回数据的全部大小。
*   数据的大小会丢失，因为`char*`使用的是`std::string`. 考虑使用`std::string`它，因为它既提供大小，`size()`又允许字符串本身包含空字符。另一种解决方案是在数据旁边明确提供数据的大小。

* * *

这是一个完整的 Boost.Python 示例：

```
#include <boost/python.hpp>
#include <fstream>
#include <iostream>

void write_file(const std::string& name, const std::string& data)
{
  std::cout << "This length is: " << data.size() << std::endl;
  std::ofstream fout(name.c_str(), std::ios::binary);
  fout.write(data.data(), data.size());
  fout.close();
}

BOOST_PYTHON_MODULE(example)
{
  using namespace boost::python;
  def("write", &write_file);
} 
```

以及示例 Python 代码 ( `test.py`)：

```
import example

with open("t1.txt", "rb") as f:
    example.write("t2.txt", f.read())

with open("p1.png", "rb") as f:
    example.write("p2.png", f.read()) 
```

和用法，我下载[这个](http://www.boost.org/style-v2/css_0/get-boost.png)图像并创建一个简单的文本文件，然后使用上面的代码创建它们的副本：

```
[twsansbury]$ wget http://www.boost.org/style-v2/css_0/get-boost.png -O p1.png >> /dev/null 2>&1
[twsansbury]$ echo "这是一个测试" > t1.txt
[twsansbury]$ ./test.py
这个长度是：15
这个长度是：27054
[twsansbury]$ md5sum t1.txt t2.txt
e19c1283c925b3206685ff522acfe3e6 t1.txt
e19c1283c925b3206685ff522acfe3e6 t2.txt
[twsansbury]$ md5sum p1.png p2.png
fe6240bff9b29a90308ef0e2ba959173 p1.png
fe6240bff9b29a90308ef0e2ba959173 p2.png
```

md5 校验和匹配，表明文件内容相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:23:40.900

在您从中创建一个最小示例后，请提供真实代码。此外，您使用的是哪个 Python 版本？无论如何，您提供的代码中存在一些错误：

*   您应该使用`const`，因为任何 C++ 常见问题解答都会告诉您。
*   您正在使用 strlen() 甚至不能保证以零结尾但中间可以包含零的东西。
*   您应该使用 std::string，如果您有内部空字符，它不会出错。
*   关闭文件是没有用的，这是在 dtor 中自动完成的。刷新和检查流状态更有趣。失败时，抛出异常。
*   放弃尾随回报，它不会受到伤害，但它是不必要的噪音。
*   阅读 PEP 8。
*   使用 with 语句读取文件。

# jquery - JQuery 验证文件输入

> ID：14814075
> 
> 赞同：1
> 
> 时间：2013-02-11T14:29:03.157
> 
> 标签：jquery, file-upload, validation

您好我需要验证`file`输入类型：

```
<form onsubmit="return validate()">
<input type="file" name="File" class="multi" />
<input type="file" name="File" class="multi" />
<input type="file" name="File" class="multi" />
<input type="file" name="File" class="multi" />
<input type="submit" name="BtnSubmit" value="save" />
</form> 
```

我创建的 j 查询方法是

```
 function validate()
 {
    $(".multi").each(function(){
       var files = $(this).val(); 

       if(files=='')
       { 
          alert("No document file selected");
          return false; 
       }
    });
 } 
```

问题是它显示警报但表单正在提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:41:32.820

Kindly see code snippet below for validating if file submitted is a valid file type. As well as checking if a file was submitted to start with.

```
//Javascript

$("#btnUpload").click(function (e) {

        var file = $("#fileupload").val();  //Fetch the filename of the submitted file

        if (file == '') {    //Check if a file was selected
            //Place warning text below the upload control
            $(".errorDiv").html("Please select a file first.");
            e.preventDefault();
        }
        else {
            //Check file extension
            var ext = file.split('.').pop().toLowerCase();   //Check file extension if valid or expected
            if ($.inArray(ext, ['txt']) == -1) {
                $(".errorDiv").html("Select valid text file (txt).");
                e.preventDefault(); //Prevent submission of form
            }
            else {
        //Do your logic here, file upload, stream. etc.. if file was successfully validated
        }
    }
}); 
```

//For the HTML

```
<input id="fileupload"     type="file" name="files[]" /><br />
                    <p class="reminder"> Allowed file type: .txt</p>
                    <div class="errorDiv"></div>
                    <input type="button" id="btnUpload" value="Upload File"/><br /> 
```

Heads up: Perform file validation on the server side as well to prevent back-end error or data injections.

I hope this helps!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:33:04.323

```
function validate(){
  $(".multi").each(function(){
   var files = $(this).val(); 
   if(files==''){ 
     alert("No document file selected"); 
   }
   return false;       
 });
} 
```

您的 return 语句应该在不同的块中，而不是相同的 if 块，因此它将像 else 一样工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-24T04:18:26.307

问题是，您为每个循环返回 false 。如果在`$.each()`循环内返回 false，则意味着退出`$.each`循环。所以这里会出现警报，然后它会简单地退出每个。

您可以通过多种方式完成该任务。但最简单的方法是带一个标志变量。

```
function validate() {
    $check = true;
    $(".multi").each(function(){
       var files = $(this).val(); 

        if(files=='') { 
           alert("No document file selected");
           $check = false;
           return false; // You don't want to loop, so exit each loop
        }
    });

    return $check;
} 
```

# python - 使用 Python 在 C 文件中查找变量引用的正则表达式

> ID：14814083
> 
> 赞同：0
> 
> 时间：2013-02-11T14:29:21.483
> 
> 标签：python, regex

给定一个变量名，例如`myvariable`，什么正则表达式可以用来用另一个变量名替换（重构）对它的引用`myreplacementvariable`

例如

```
addr = &myvariable; 
```

应该变成

```
addr = &myreplacementvariable; 
```

但

```
int myvariable2 = 0; 
```

应该单独留下（因为它是一个不同的变量名，恰好包含 的名称`myvariable`）

我正在寻找一两行 Python 代码，可能是正则表达式。

注意：我知道解析 C 非常困难，并且我不寻找任何考虑范围的东西。我也预见到`char *mystr = "myvariable";`会引起问题，但我可以解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:42:17.067

使用这个正则表达式： `(\W)myvariable(\W)` 并替换为`\1myreplacementvariable\2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:53:36.463

也许这有帮助：

```
value = "addr = &myvariable;"
findVar = "myvariable"
m = re.findall("[&]{0};".format(findVar), value)
print m
# prints: ['&myvariable;'] 
```

请注意，我通过将 & 符号放在 [] 中来避开它。你也可以用两个反斜杠转义它：

```
m = re.findall("\\&{0};".format(findVar), value) 
```

**编辑：**

这是基于评论中讨论的 re.sub 版本：

```
value = "addr = &myvariable;\naddr = &myvariable;\nfuncCall( &myvariable )"
oldVarName = "myvariable"
newVarName = "mynewvariable"
m = re.sub("(\\&){0}(;?)".format(oldVarName), r"\1"+newVarName+r"\2", value)
print m
# this will print:
# addr = &mynewvariable;
# addr = &mynewvariable;
# funcCall( &mynewvariable ) 
```

此模式将具有与以下相同的结果：

```
value.replace("&"+oldVarName,"&"+newVarName) 
```

我使用括号来匹配开头的 & 和结尾的可能分号。然后我使用 \1 和 \2 将这些匹配项放回替换字符串中。请注意，此结果类似于使用： value.replace("&"+oldVarName, "&"+newVarName)

**编辑：** 这可能更接近你所需要的。

它替换了以 & 符号开头的每个实例，并且包含整个旧变量名称，并且不包含后面 [A-Za-z0-9_] 中的任何字符。

```
value = "addr = &myvariable;\naddr = &myvariable;\nfuncCall( &myvariable )\nfuncCall2( &myvariable, &myvariablelongername )"
oldVarName = "myvariable"
newVarName = "mynewvariable"
m = re.sub("(\\&){0}(?![A-Za-z0-9_])".format(oldVarName), r"\1"+newVarName, value)
print m
# prints:
# addr = &mynewvariable;
# addr = &mynewvariable;
# funcCall( &mynewvariable )
# funcCall2( &mynewvariable, &myvariablelongername ) 
```

（最后一部分是 C 中变量名中的任何有效字符，在需要以 [A-Za-z_] 开头的第一个字符之后。'nhahtdh' 的答案中也提到了这一点）

使用 nhahtdh 提供的内容作为示例，这将是上一个示例的较短版本：

```
re.sub("(\\&){0}(?!\b)".format(oldVarName), r"\1"+newVarName, value) 
```

由于在编写此答案时对我来说是新的，并且我自己在此答案中的评论中混淆了我将其添加为信息：*r*在像 r"\1" 这样的字符串前面将字符串变成原始细绳。

> r '保留\的原始字符串（文字化）：对于正则表达式和Windows路径很方便！' 来源：[http ://rgruet.free.fr/PQR26/PQR2.6.html#Strings](http://rgruet.free.fr/PQR26/PQR2.6.html#Strings)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:05:16.550

使用这个正则表达式：

```
\bvarname\b 
```

`varname`可以是任何有效的变量名（由这个 regex 描述`[A-Za-z_][A-Za-z0-9_]*`）。

C 中的变量由`a-z`, `A-Z`,`0-9`和组成`_`，这正是单词 character 的定义`\w`，单词边界`\b`的定义基于此。我们必须确保变量名不是其他变量名的一部分，也不是文字数字的后缀（例如`3.0f`，，`0x87654321UL`）。这就是我们`\b`在变量名的两端使用的原因。

# php - 将值发送到另一个页面

> ID：14814086
> 
> 赞同：0
> 
> 时间：2013-02-11T14:29:28.113
> 
> 标签：php

我创建了一个表格来显示搜索结果，表格的每一行都是一个链接，链接有一个隐藏的表单，带有一个 javascript 将 id 发送到另一个 php 页面，但问题是当我单击其中一个链接时，表单仅将第一个 id 发送到 sql 表。毕竟怎么了？

```
 while ($row = $stmt->fetch()) { 

        echo("<form id=id_form method=post action=lp_search_system_2.php>
        <input type=hidden name=id value=".$row['id_np_outdoor'].">
        </form>");

        echo '  <tr align="left" class="simple">
                    <td><a href="#" onclick="id_form.submit()">' . $row['nome'] . '</a></td>
                    <td><a href="#" onclick="id_form.submit()">' . $row['sobrenome'] . '</a></td>
                    <td><a href="#" onclick="id_form.submit()">' . $row['tipo'] . '</a></td>
                    <td><a href="#" onclick="id_form.submit()">' . $row['estado'] . '</a></td>
                    <td><a href="#" onclick="id_form.submit()">' . $row['país'] . '</a></td>
                </tr>

             ';

}
                echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:49:53.247

```
while ($row = $stmt->fetch()) {

    echo "<form id=id_form".$row['id or something'] method=post action=lp_search_system_2.php>";
    echo "<input type=hidden name=id value=".$row['id_np_outdoor'].">";
    echo "</form>";
    :
    :
    :
    as you have made it. 
```

请记住，您还必须为每一行提交**相应的表格。**因此，也更改 onclick 代码..

# image-processing - 没有 freeImage 的 NPP CUDA

> ID：14814088
> 
> 赞同：4
> 
> 时间：2013-02-11T14:29:31.953
> 
> 标签：image-processing, cuda, npp

CUDA 构建的 NPP 库是仅使用 freeImage 还是我可以使用其他结构或只是 unsigned char *image 作为 NPPs 函数中的输入。

我提出这个问题的原因是 NPP 的所有样本都有用于 freeImage 的大型包装器。

我已经彻底查看了 NVIDIA Performance Primitives ( NPP )，但只提到了一个图像，而不是具体使用哪种图像格式。

如果您有一个示例说明如何在没有 freeImage 或不从磁盘加载图像的情况下使用 NPP，那么我会非常高兴。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T16:09:22.510

NPP 既不依赖于 FreeImage，也不遵循任何图像处理库特定的约定。它只是遵循图像处理领域中使用的一般约定。它期望图像以行优先顺序存储。图像通常存储为跨步线性内存。因此，NPP 函数将指向存储在设备上的原始图像数据的指针、图像的大小和图像的[步](http://msdn.microsoft.com/en-us/library/windows/desktop/aa473780%28v=vs.85%29.aspx)长作为参数。

在 NPP 示例中，FreeImage 仅用作图像 I/O 库，以便在主机端进行图像处理。

我利用 NPP 开发图像处理功能。为了测试这些功能，我使用 OpenCV 从磁盘读取图像，将数据复制`IplImage`到原始设备指针并将指针传递给 NPP 函数。

这是一个使用 NPP 和 OpenCV 作为主机的示例。

```
#include <iostream>
#include <cuda_runtime.h>
#include <npp.h>
#include <opencv2/opencv.hpp>

using namespace std;

int main()
{    
    const int width = 640, height = 480;

    //Create an 8 bit single channel image
    IplImage* img = cvCreateImage(cvSize(width,height),IPL_DEPTH_8U,1);
    //Set All Image Pixels To 0
    cvZero(img);

    cvShowImage("Input",img);
    cvWaitKey();

    const int step = img->widthStep;
    const int bytes = img->widthStep * img->height;

    unsigned char *dSrc, *dDst;
    cudaMalloc<unsigned char>(&dSrc,bytes);
    cudaMalloc<unsigned char>(&dDst,bytes);

    //Copy Data From IplImage to Device Pointer
    cudaMemcpy(dSrc,img->imageData,bytes,cudaMemcpyHostToDevice);

    NppiSize size;
    size.width = width;
    size.height = height;

    const Npp8u value = 150;

    //Call NPP function to add a constant value to each pixel of the image
    nppiAddC_8u_C1RSfs(dSrc,step,value,dDst,step,size,1);

    //Copy back the result from device to IplImage
    cudaMemcpy(img->imageData,dDst,bytes,cudaMemcpyDeviceToHost);

    cudaFree(dSrc);
    cudaFree(dDst);

    cvShowImage("Output",img);
    cvWaitKey();

    cvReleaseImage(&img);

    return 0;
} 
```

# javascript - 如何在网站上实时加载服务器数据？

> ID：14814092
> 
> 赞同：0
> 
> 时间：2013-02-11T14:29:41.320
> 
> 标签：javascript, jquery

这是设置。移动设备将传感器数据发送到服务器。服务器托管一个将在图表中显示数据的网站（我使用 Flot 框架）。

表示是这样工作的。

```
function showX(){
        $("#dialog").dialog({
        width:400,
        modal:false,
        buttons: {
             "Close": function(){
                $(this).dialog("close");
            }
        }
    }).dialog("open");

    function getRandomData(){
        var randomData = [];
        for(var i = 4;i<100;i++){
            randomData.push([i,(1 + Math.floor(Math.random() * 20))]);
        }
        return randomData;
    }

    var plot = $.plot($("#chart"),[ getRandomData() ]);

    function update() {
        //FETCH SERVER DATA FOR plot.setData();

        plot.setData([ getRandomData() ]);
        plot.draw();

        setTimeout(update, 100);
    }
    update();
} 
```

按下按钮会出现一个包含图表的对话框。图表使用更新函数中的新值进行更新（在上面的示例中使用随机值）。在这个函数中，我想从服务器获取一大块测量数据（见评论）。我应该使用什么技术？以及数据应该如何存储在服务器端？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:34:55.050

在不知道如何实现服务器的情况下，很难就可能的实现向您提供建议。但是，假设您想要一个跨浏览器体验以及所有可能的回退，并且您的服务器逻辑与 websockets 等解决方案提供的双向客户端-服务器通信完全分离，我建议您使用 Pusher： http: [//pusher.com/](http://pusher.com/)

该解决方案为您提供了在客户端使用准polyfill 处理浏览器支持的好处，并且还抽象了您使用这种实时方法与客户端通信的方式。检查教程。

# android - 无法在android中创建动态类

> ID：14814097
> 
> 赞同：0
> 
> 时间：2013-02-11T14:29:45.767
> 
> 标签：android

我想根据单击的按钮调用一个类。

确切地说，我想要一个类类型的对象，我可以为其分配一个已经存在于包中的类名。我不知道如何创建一个。

例如。我有十个班级，名字从一到十。如果我单击第一个按钮，我应该按意图去上课

```
Intent i = new Intent(MainActivity.this,calledprog.class); 
```

其中 calledprog 可以将其名称从 1 更改为 10。

我希望你有我的问题，请原谅我的错误英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:33:51.403

创建所有类的数组，当您单击第 i 个按钮时 - 从数组中获取第 i 个元素：

```
private static final Class<?>[] NUMBERS = {One.class, Two.class, ...};

// Method that handles button clicks.
int num = // get number of button
Intent i = new Intent(MainActivity.this, NUMBERS[num]); 
```

# sql - 从电子表格更新现有数据库值

> ID：14814098
> 
> 赞同：10
> 
> 时间：2013-02-11T14:29:48.357
> 
> 标签：sql, sql-server

我有一个现有的 MSSQL 数据库，其中某些列中的值需要根据包含旧数据和新数据映射的电子表格进行更新。

电子表格是这样的：

```
 | OLD DATA      | NEW DATA      |
RECORD | A | B | C | D | A | B | C | D |
1      |OLD|OLD|OLD|OLD|NEW|NEW|NEW|NEW|
2      |OLD|OLD|OLD|OLD|NEW|NEW|NEW|NEW| 
```

其中 ABCD 是与数据库相关的列名，OLD / NEW 与数据相关。

因此对于每行（大约 2500 行）

每列匹配OLD的数据库值，需要更改为NEW

我目前的想法是以与此类似的方式进行操作： [SQL Statement that Updates an Oracle Database Table from an Excel Spreadsheet](https://stackoverflow.com/questions/9639491/sql-statement-that-updates-an-oracle-database-table-from-an-excel-spreadsheet)

本质上是让 Excel 制定一个替换语句列表，尽管这感觉是一种非常复杂的解决问题的方法！

有没有办法让 SQL 循环通过电子表格的每一行，检查 a=old、b=old2、c=old3、d=old4 的所有记录，然后用适当的 a=new、b=new2、 c=新3，d=新4？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-11T14:43:23.497

您不需要遍历电子表格中的每一行。您可以使用该`OPENROWSET`命令，就像您链接到的答案一样，将电子表格数据加载到一种临时表中。然后，您可以针对该表运行常规`UPDATE`语句。

它看起来像这样

```
UPDATE YourTable
SET YourTable.A = ExcelTable.NewDataA,
    YourTable.B = ExcelTable.NewDataB,
    YourTable.C = ExcelTable.NewDataC,
    YourTable.D = ExcelTable.NewDataD
FROM YourTable
INNER JOIN OPENROWSET('Microsoft.Jet.OLEDB.4.0',
         'Excel 8.0;Database=C:\foldername\spreadsheetname.xls;',
         'SELECT column1name, column2name, column3name, column4name
          FROM [worksheetname$]') AS ExcelTable
ON YourTable.ID = ExcelTable.ID
WHERE (YourTable.A = ExcelTable.OldDataA
  AND YourTable.B = ExcelTable.OldDataB
  AND YourTable.C = ExcelTable.OldDataC
  AND YourTable.D = ExcelTable.OldDataD) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-25T20:26:19.840

看起来 Jeff 为您提供了所需的答案，但对于任何希望从 Google 表格更新数据库的人来说，这里有一个替代方案，使用[SeekWell 桌面应用程序](https://www.seekwell.io/?ref=so)。有关此答案的屏幕截图版本，请参阅[本文](https://intercom.help/seekwell/articles/2994373-sync-sheets-with-your-database-desktop-app)。

1.  在电子表格中获取正确的行和列（看起来@sbozzie 已经有了这个）

编写一个 SQL 语句，它`SELECT`是您希望能够在工作表中更新的所有列。`WHERE` 您可以在子句中照常添加过滤器。

2.  选择应用程序顶部的“表格”并打开表格。然后单击代码单元格中的目标图标并选择“与数据库同步”

3.  添加表和主键 在目标输入中，添加表名和表的主键。运行代码单元格将添加一个新工作表，其中包含所选数据和您的表格名称作为工作表名称。请注意，您必须在单元格 A1 中开始您的表格。包含一个`ORDER BY`.

4.  添加操作列 在工作表中添加一个“seekwell_action”列，其中包含您希望对每一行执行的操作。可能的行动是：

更新 - 更新行中的所有列（需要唯一的主键）

插入 - 将行添加到您的数据库（您需要包括数据库所需的所有列）

同步 - 每次查询运行时都会按计划执行更新操作（请参阅下面的“5\. 设置计划”）

完成 - 计划运行（见下文）并采取措施后的状态。新数据现在应该在您的数据库中。请注意，“同步”操作永远不会显示完成，因为它们会在每次计划运行时运行。要停止“同步”操作，请手动更改它。

5.  设置计划 要执行这些操作，请选择应用程序顶部的时钟图标，指明频率和准确时间，然后单击“保存”。您可以从插入的“RunSheet”（不要删除此表，否则您将需要重置您的日程安排）或[seekwell.io/profile](https://www.seekwell.io/profile)管理您的日程安排。如果您需要立即运行这些操作，您可以从 /profile 执行此操作。

陷阱

您需要在单元格 A1 中开始您的表格。

雪花列名称区分大小写。在指定主键等时请务必遵守这一点。

如果您的服务器位于防火墙后面，则需要将 SeekWell 的静态 IP 地址列入白名单才能使用调度。[在此处](https://intercom.help/seekwell/articles/1605011-whitelisting-ip-address)查看有关白名单的更多信息。

# javascript - Backbone.Router 路由改变事件触发两次

> ID：14814099
> 
> 赞同：2
> 
> 时间：2013-02-11T14:29:51.887
> 
> 标签：javascript, backbone.js, coffeescript

这是我的咖啡脚本路由器类：

```
class App.Router extends Backbone.Router

  initialize: ->

    console.log 'Router.init'

    @on 'all', ->
      console.info 'route changed'

  routes:
    '': 'home'
    'test': 'test'

  home: ->
    console.log 'home routed'

  test: ->
    console.log 'test routed' 
```

当我重新加载本地主机页面时，“@on 'all'”回调似乎触发了两次（我的萤火虫上的双重 console.info ......）

这是我的萤火虫输出：

```
App.init
Session.init
Router.init
home routed
route changed
route changed 
```

如您所见，“路线已更改”输出位于我的主路线之后...

最后，这是我的引导代码（带有我的 App 命名空间...），我将 history.start

```
App =
  init: ->
    console.log 'App.init'
    @session = new App.Model.Session
    @router = new App.Router
    # @userPanel = new App.View.UserPanel
    Backbone.history.start pushState: true

  Model: {}
  View: {} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T14:34:27.567

事件是一种特殊的`all`事件侦听器语法，它捕获由源对象触发的任何类型的**所有**事件。我猜另一个事件实际上根本不是一个`route`事件，而是一个`route:name`事件。

要捕获所有路线，只需使用`route`事件：

```
@on 'route', ->
  console.info 'route changed' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T14:34:13.243

这可以通过查看[Backbone 源代码](http://backbonejs.org/backbone.js)来解释：

```
this.trigger.apply(this, ['route:' + name].concat(args));
this.trigger('route', name, args); 
```

尝试只监听 'route' 事件：

```
@on 'route' 
```

# haskell - 判断列表是否按顺序包含某些信息

> ID：14814103
> 
> 赞同：0
> 
> 时间：2013-02-11T14:29:55.820
> 
> 标签：haskell

给定一个类似的列表：

```
let list = [1,2,3,4,5,6,7,8,9,10] 
```

我试图想出一种方法来`7,8,9`按顺序检测列表中是否存在，如果存在则简单地打印“成功”，否则打印“失败”。

我正在尝试使用`zip`索引来完成此操作。有人可以建议我是否走在正确的轨道上，或者是否有更好的方法来实现这一目标？

```
zip [0..] list 
```

然后是这样的：

```
[if (snd x)== 
             7 && let index = (fst x) 
               && (snd x)==8 && (fst x)==(index+1) 
               && (snd x)==9 && (fst x)==(index+2) 
               then "success" 
               else "fail" | x <- list] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T14:56:10.310

当试图找出一个列表算法时，通常最好从考虑列表头中的特殊情况开始。在这种情况下，您将如何测试列表是否以 开头`[7,8,9]`？

```
beginsWith789 :: [Int] -> Bool
beginsWith789 (7:8:9:_) = True
beginsWith789 _         = False 
```

即我们可以只对前三个元素进行模式匹配。现在概括一下，如果我们在列表头中没有找到子序列，我们递归地检查列表的尾部

```
contains789 :: [Int] -> Bool
contains789 (7:8:9:_) = True
contains789 (_:xs)    = contains789 xs
contains789 _         = False 
```

现在，如果我们想进一步推广它以找到任何子序列，我们可以使用`isPrefixOf`函数 from `Data.List`：

```
import Data.List (isPrefixOf)

contains :: Eq a => [a] -> [a] -> Bool
contains sub lst | sub `isPrefixOf` lst = True
contains (_:xs)  = contains sub xs
contains _       = False 
```

`any`我们可以通过使用和`tails`检查列表的任何连续较短的尾部是否以给定的子序列开头来整理它：

```
import Data.List (isPrefixOf, tails)

contains :: Eq a => [a] -> [a] -> Bool
contains sub = any (sub `isPrefixOf`) . tails 
```

或者，我们可以简单地使用标准库函数[`isInfixOf`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html#v%3aisInfixOf)。;)

```
> import Data.List
> [7,8,9] `isInfixOf` [1,2,3,4,5,6,7,8,9]
True 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-11T14:45:04.647

我会推荐[`isInfixOf`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html#v:isInfixOf). `Data.List`查找序列很简单

```
let hasSequence = [7,8,9] `isInfixOf` list 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T14:41:10.450

这个怎么样？

```
elemIndex (7,8,9) $ zip3 list (tail list) (tail (tail list)) 
```

elemIndex 来自 Data.List。

如果你不关心它在什么索引，你可以使用这个

```
elem (7,8,9) $ zip3 list (tail list) (tail (tail list)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T15:17:47.467

我不确定您是否还想计算某些元素以给定顺序出现但它们之间有一些其他元素的情况。似乎其他答案只计算`[7, 8, 9]`原始子列表的情况。如果你想让我们说`[7,8,9]`被发现在`[7,0,8,0,9,0]`，你可以使用

```
appears :: (Eq a) => [a] -> [a] -> Bool
appears [] _ = True
appears _ [] = False
appears ns@(n : ns') (h : hs')
    | n == h    = appears ns' hs'
    | otherwise = appears ns hs' 
```

现在

```
appears [7,8,9] [7,0,8,0,9] --> True
appears [7,8,9] [1..10]     -->  True
appears [3,8,9] [1..10]     -->  True
appears [10,8,9] [1..10]    -->  False 
```

# javascript - 在javascript中循环执行函数

> ID：14814106
> 
> 赞同：0
> 
> 时间：2013-02-11T14:30:02.423
> 
> 标签：javascript

我显然在 Java Script 中遗漏了一些东西。我想在 for 循环中按顺序执行具有不同参数的相同函数（如代码的注释部分）。我改为使用回调，但我想这不是最好的方法，而且不灵活，例如，如果我有更多的路径要循环。连续执行功能最干净的方法是什么？

```
var data = '';
var filepath = ['path1', 'path2'];
somefunction(filepath, callback) {
    //dosth ();
    callback();
}

//filepath = ['path1', 'path2'];
//for ( var i = 0; i < filepath.length; i = i + 1 ) {
//   somefunction( filepath[i] );
//}
somefunction( filepath[0] , function() {
    console.log("Finished processing file 1");
    countFromFile( filepath[1], function() {
        console.log("Finished processing file 2");
        saveToFile( data );
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:37:09.670

使用[async](https://github.com/caolan/async)使 foreach 具有异步功能。

例子：

```
filepath = ['path1', 'path2'];
async.each(filepath, somefunction, function(err){
    // if any of the saves produced an error, err would equal that error
}); 
```

# c# - 在 Observable.FromAsyncPattern 上优雅地处理超时

> ID：14814113
> 
> 赞同：2
> 
> 时间：2013-02-11T14:30:21.143
> 
> 标签：c#, exception-handling, system.reactive

我正在从 AsyncPattern 中制作一个 observable，我想定期对其进行轮询。到目前为止，我必须到这里：

```
var observer = Observable.Defer(ObservableFunc)
    .Concat(Observable.Empty<int>().Delay(TimeSpan.FromSeconds(_pollInterval)))
    .Timeout(TimeSpan.FromSeconds(_Timeout_s))
    .Materialize()
    .Repeat()
    .Publish()
    .RefCount(); 
```

*   在有人订阅之前不要投票 ( `Defer`)
*   在最后一次响应后重新轮询给定时间（而不仅仅是[盲目轮询](http://social.msdn.microsoft.com/Forums/pl-PL/rx/thread/52e3744e-cb18-4745-951f-51596a0f3b2d)）（`Concat/Delay`）
*   检测轮询是否超时（无应答）（`Timeout`）
*   如果超时*则*`Repeat`重新开始 ( )
*   不要重新订阅[新订阅者](http://nascentcode.wordpress.com/2010/12/12/creating-a-shared-refcounted-observable/)，当没有更多订阅者时停止轮询（`Publish/RefCount`）。

我的问题是关于`Materialize`中间的。这（对我来说）似乎是让 TimeoutException “通过”的一种相当优雅的方式，以便订阅者可以了解它。我只是不确定我是否应该让它`Notification`作为`Maybe/Nullable T`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:20:13.203

这可能不“有资格”作为答案，但可能太长了，无法发表评论......*叹息*

我的直觉说：将超时宣传为`Maybe`/ `Nullable`。

推理：

*   可能没有人订阅它关心它未能产生值的原因是什么，他们只是关心下一个值由于某种原因不可用。（当然，我在这里做了很多假设）

顺便说一句，我会在`Timeout`调用之后加上一个`Catch`注入/返回一个“空值”（定义但是你想要的 - `Maybe`、`Nullable<T>`等），从而使任何订阅者更清楚生成的流的“形状” .

# php - getLoginUrl() 不工作 / getUser() 返回 0

> ID：14814116
> 
> 赞同：0
> 
> 时间：2013-02-11T14:30:27.953
> 
> 标签：php, facebook, tomcat, login, facebook-php-sdk

```
$url = 'http://xxxxxx.com:8052/php/myproject/';

$loginUrl = $facebook->getLoginUrl(array(
'scope' => 'publish_stream,email',
'redirect_uri' => $url,
)); 
```

`$facebook->getUser()`将有 0。那是因为我的服务器使用端口 8052 进行 http（与其他服务器共享 IP）

如果我在 redirect_uri 使用端口号，它**不起作用**。

我确定 Facebook.com 上的域设置是正确的

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:36:00.933

这不是编程问题，我正在为 tomcat 服务器使用端口转发。8052->tomcat **如果您使用端口转发，则无法获得正确的 8052 端口**，始终通过 php 代码获得 80。

在 Facebook SDK 中，base_facebook.php

```
public function getLoginUrl($params=array()) {
    $this->establishCSRFTokenState();
    $currentUrl = $this->getCurrentUrl(); 
```

你可以看到它会**从函数getCurrentUrl获取url，去编辑它**

```
// use port if non default
if(isset($_SESSION['server_port'])){
    $port = $_SESSION['server_port'];
}else{
    $port =
      isset($parts['port']) &&
      (($protocol === 'http://' && $parts['port'] !== 80) ||
       ($protocol === 'https://' && $parts['port'] !== 443))
      ? ':' . $parts['port'] : '';
}
// rebuild
return $protocol . $parts['host'] .':'. $port . $parts['path'] . $query; 
```

我使用javascript预设了会话server_port（可以获得正确的端口），现在通过上面的代码将其用作端口，尝试以下代码可以获得正确的url，登录后可以getUser（）。

```
$login_url = $facebook->getLoginUrl() 
```

PS：如果我自己输入网址似乎还可以

```
$login_url = $facebook->getLoginUrl(array(
      'scope'         => 'email,publish_stream',
      'redirect_uri'  => $url
)); 
```

# meteor - 如何将数据从服务器推送到不使用集合的所有客户端？

> ID：14814118
> 
> 赞同：5
> 
> 时间：2013-02-11T14:30:39.873
> 
> 标签：meteor

我需要通知客户有关服务器端的更改。在我的情况下，我在服务器和客户端上使用不同的集合（在这个问题中有更多关于它的信息：[你将如何使用 meteor.js 构建 pinterest 之类的页面](https://stackoverflow.com/questions/14706215)）。

在服务器上，我从外部 API 获取新产品。我想向所有客户发布新项目的数量，他们可以更新布局所需的局部变量以使其正常工作。怎么做？

如果我可以发布/订阅 Meteor.Collection 以外的其他类型的数据，那就太好了。我找到了 Meteor.deps，但据我所知，它只适用于客户端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:14:14.670

要完成您想要的，您需要另一个集合 - 在客户端。在服务器上，在发布功能中，从头开始构建一个文档，将产品的当前计数分配给一个属性。使用 observe() 并设置，修改`count`何时从产品中添加或删除文档。订阅`count`客户端上的“记录集”。

```
// Server
Meteor.publish('count', function () {
    // Build a document from scratch
    var self = this;
    var uuid = Meteor.uuid();
    var count = Products.find().count();
    // Assign initial Products count to document attribute
    self.set('count', uuid, {count: count});

    // Observe Products for additions and removals
    var handle = Products.find().observe({
        added: function (doc, idx) {
            count++;
            self.set('counts', uuid, {count: count});
            self.flush();
        },
        removed: function (doc, idx) {
            count--;
            self.set('counts', uuid, {count: count});
            self.flush();
        }
    });
    self.complete();
    self.flush();
    self.onStop(function () {
        handle.stop();
    });
});

// Client
Counts = new Meteor.Collection('count');
Meteor.subscribe('count');
console.log('Count: ' + Counts.findOne().count); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:26:54.650

我必须说上面的解决方案向我展示了一种方法，但是，如果我需要发布到未与 observe() 连接的客户端数据怎么办？或者有任何收藏？

就我而言，我有 1000 种产品。为了吸引访问者，我通过更新随机数产品的时间戳并显示按时间戳排序的集合来“刷新”集合。多亏了这个游客有一些事情正在发生的印象。

我的`refresh`方法返回产品数量（它是随机的）。我需要将该号码传递给所有客户。我做到了，但使用（我认为）丑陋的解决方法。

我的`refresh`方法设置`Session.set('lastRandomNo', random)`. 顺便说一句：我不知道 Session 在服务器端工作。`refresh`更新产品集合。

然后根据上面的答案：

```
Meteor.publish 'refreshedProducts', ->

self = this
uuid = Meteor.uuid()

# create a new collection to pass ProductsMeta data
self.set('products_meta', uuid, { refreshedNo: 0 })

handle = Products.find().observe
  changed: (newDocument, atIndex, oldDocument) ->
    self.set('products_meta', uuid, { refreshedNo: Session.get('lastRandomNo') })
    self.flush()

self.complete()
self.flush()
self.onStop ->
  handle.stop() 
```

在客户端：

```
ProductsMeta = new Meteor.Collection('products_meta')

# subscribe to server 'products_meta' collection that is generated by server
Meteor.subscribe('refreshedProducts')

ProductsMeta.find({}).observe
  changed: (newDocument, atIndex, oldDocument) ->

    # I have access to refreshedNo by
    console.log ProductsMeta.findOne().refreshedNo 
```

你怎么看？

# neo4j - 获取两个节点neo4j之间的所有路由

> ID：14814124
> 
> 赞同：10
> 
> 时间：2013-02-11T14:30:44.887
> 
> 标签：neo4j, cypher

我正在处理一个必须处理图表的项目......我正在使用图表来获取两个站点之间的公共汽车和自行车路线。

事实是，我所有的关系都包含从关系的起点到终点所需的时间。

为了获得到节点之间的最短路径，我使用了 cypher 的最短路径功能。但是有一点，最短的路径并不是最快的......

有没有办法让两个节点之间没有通过关系链接的所有路径？

谢谢

编辑：

事实上，我改变了我的图表，使它更容易。所以我仍然拥有所有节点。现在关系类型对应于从一个节点到另一个节点所需的时间。

cypher 的 shortestPath 函数给出了包含较少关系的路径。我希望它返回所有类型（时间）的加法最小的路径。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-11T17:12:47.063

在 cypher 中，要获取两个节点之间没有通过关系链接的所有路径，并按权重的总和排序，可以使用 1.9 中引入的 reduce 函数：

```
start a=node(...), b=node(...) // get your start nodes
match p=a-[r*2..5]->b // match paths (best to provide maximum lengths to prevent queries from running away)
where not(a-->b) // where a is not directly connected to b
with p, relationships(p) as rcoll // just for readability, alias rcoll
return p, reduce(totalTime=0, x in rcoll: totalTime + x.time) as totalTime
order by totalTime 
```

如果你只需要最短的，你可以在最后抛出一个限制 1。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T14:47:31.913

您可以使用 Dijkstra/Astar 算法，这似乎非常适合您。看看[http://api.neo4j.org/1.8.1/org/neo4j/graphalgo/GraphAlgoFactory.html](http://api.neo4j.org/1.8.1/org/neo4j/graphalgo/GraphAlgoFactory.html)

不幸的是，您不能使用 Cypher 中的那些。

# ruby-on-rails - Heroku 加入/包括不像 sqlite 开发环境那样工作

> ID：14814126
> 
> 赞同：0
> 
> 时间：2013-02-11T14:30:47.010
> 
> 标签：ruby-on-rails, postgresql, heroku

所以这就是我在我的开发（SQLite）环境中完美运行的东西：

```
key = "%#{keywords}%"
listings = Listing.order(:headline)
listings = listings.includes(:neighborhood).where("headline like ? or neighborhoods.name like ?", key, key) if keywords.present? 
```

但是，当我在 Heroku 上尝试类似的操作时，我得到了一些错误：

```
listings = listings.includes(:neighborhood).where("headline like ? or neighborhoods.name like ?", key, key)
ActiveRecord::ConfigurationError: Association named 'neighborhoods' was not found; perhaps you misspelled it? 
```

我也尝试了以下并得到了相应的错误：

```
> listings = Listing.includes(:neighborhood).where("headline like :keywords or neighborhood.name like :keywords", :keywords => "%#{keywords}%")
  SQL (3.1ms)  SELECT "listings"."id" AS t0_r0, "listings"."listing_category_id" AS t0_r1, "listings"."listing_type_id" AS t0_r2, "listings"."user_id" AS t0_r3, "listings"."boro_id" AS t0_r4, "listings"."neighborhood_id" AS t0_r5, "listings"."building_id" AS t0_r6, "listings"."term_id" AS t0_r7, "listings"."headline" AS t0_r8, "listings"."property_type_id" AS t0_r9, "listings"."unit_num" AS t0_r10, "listings"."common_charges" AS t0_r11, "listings"."taxes" AS t0_r12, "listings"."maintenance" AS t0_r13, "listings"."num_bedrooms" AS t0_r14, "listings"."num_bathrooms" AS t0_r15, "listings"."square_footage" AS t0_r16, "listings"."list_square_footage" AS t0_r17, "listings"."description" AS t0_r18, "listings"."condition_id" AS t0_r19, "listings"."pet_policy_id" AS t0_r20, "listings"."exposure_id" AS t0_r21, "listings"."floor_plan" AS t0_r22, "listings"."photo" AS t0_r23, "listings"."security" AS t0_r24, "listings"."coop_deductible" AS t0_r25, "listings"."flip_tax" AS t0_r26, "listings"."house_families" AS t0_r27, "listings"."house_extensions" AS t0_r28, "listings"."house_stories" AS t0_r29, "listings"."house_units" AS t0_r30, "listings"."created_at" AS t0_r31, "listings"."updated_at" AS t0_r32, "listings"."price" AS t0_r33, "neighborhoods"."id" AS t1_r0, "neighborhoods"."name" AS t1_r1, "neighborhoods"."created_at" AS t1_r2, "neighborhoods"."updated_at" AS t1_r3, "neighborhoods"."boro_id" AS t1_r4 FROM "listings" LEFT OUTER JOIN "neighborhoods" ON "neighborhoods"."id" = "listings"."neighborhood_id" WHERE (headline like '%prospect heights%' or neighborhood.name like '%prospect heights%')
ActiveRecord::StatementInvalid: PG::Error: ERROR:  missing FROM-clause entry for table "neighborhood"
LINE 1: ..._id" WHERE (headline like '%prospect heights%' or neighborho...
                                                             ^
: SELECT "listings"."id" AS t0_r0, "listings"."listing_category_id" AS t0_r1, "listings"."listing_type_id" AS t0_r2, "listings"."user_id" AS t0_r3, "listings"."boro_id" AS t0_r4, "listings"."neighborhood_id" AS t0_r5, "listings"."building_id" AS t0_r6, "listings"."term_id" AS t0_r7, "listings"."headline" AS t0_r8, "listings"."property_type_id" AS t0_r9, "listings"."unit_num" AS t0_r10, "listings"."common_charges" AS t0_r11, "listings"."taxes" AS t0_r12, "listings"."maintenance" AS t0_r13, "listings"."num_bedrooms" AS t0_r14, "listings"."num_bathrooms" AS t0_r15, "listings"."square_footage" AS t0_r16, "listings"."list_square_footage" AS t0_r17, "listings"."description" AS t0_r18, "listings"."condition_id" AS t0_r19, "listings"."pet_policy_id" AS t0_r20, "listings"."exposure_id" AS t0_r21, "listings"."floor_plan" AS t0_r22, "listings"."photo" AS t0_r23, "listings"."security" AS t0_r24, "listings"."coop_deductible" AS t0_r25, "listings"."flip_tax" AS t0_r26, "listings"."house_families" AS t0_r27, "listings"."house_extensions" AS t0_r28, "listings"."house_stories" AS t0_r29, "listings"."house_units" AS t0_r30, "listings"."created_at" AS t0_r31, "listings"."updated_at" AS t0_r32, "listings"."price" AS t0_r33, "neighborhoods"."id" AS t1_r0, "neighborhoods"."name" AS t1_r1, "neighborhoods"."created_at" AS t1_r2, "neighborhoods"."updated_at" AS t1_r3, "neighborhoods"."boro_id" AS t1_r4 FROM "listings" LEFT OUTER JOIN "neighborhoods" ON "neighborhoods"."id" = "listings"."neighborhood_id" WHERE (headline like '%prospect heights%' or neighborhood.name like '%prospect heights%') 
```

我也试过并得到以下错误：

```
0> listings = Listing.joins(:neighborhood).where("headline like :keywords or neighborhood.name like :keywords", :keywords => "%#{keywords}%")
  Listing Load (2.7ms)  SELECT "listings".* FROM "listings" INNER JOIN "neighborhoods" ON "neighborhoods"."id" = "listings"."neighborhood_id" WHERE (headline like '%prospect heights%' or neighborhood.name like '%prospect heights%')
ActiveRecord::StatementInvalid: PG::Error: ERROR:  missing FROM-clause entry for table "neighborhood"
LINE 1: ..._id" WHERE (headline like '%prospect heights%' or neighborho...
                                                             ^
: SELECT "listings".* FROM "listings" INNER JOIN "neighborhoods" ON "neighborhoods"."id" = "listings"."neighborhood_id" WHERE (headline like '%prospect heights%' or neighborhood.name like '%prospect heights%') 
```

想法？

谢谢。

**编辑1：**

一个上市`belongs_to neighborhood`，和邻里`has_many listings`。

**编辑2：**

提取其中一条 SQL 语句并通过 运行它`psql`，结果如下：

```
SELECT "listings".* FROM "listings" INNER JOIN "neighborhoods" ON "neighborhoods"."id" = "listings"."neighborhood_id" WHERE (headline like '%prospect heights%' or neighborhood.name like '%prospect heights%');                                                                                                                                                                 
ERROR:  missing FROM-clause entry for table "neighborhood"
LINE 1: ..._id" WHERE (headline like '%prospect heights%' or neighborho... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:49:49.693

试试下面的：

```
listings = Listing.includes(:neighborhood).where("listings.headline like :keywords or neighborhoods.name like :keywords", :keywords => "%#{keywords}%") 
```

我认为它应该调用`listings.headline`而不是`headline`

```
SELECT "listings".* FROM "listings" INNER JOIN "neighborhoods"   
ON "neighborhoods"."id" = "listings"."neighborhood_id"  
WHERE (
headline like '%prospect heights%'               #I mean here
or neighborhood.name like '%prospect heights%')  #also here, should be neighborhoods.name 
```

**编辑**- 你知道 SQLite 和 PostgreSQL 之间有一些区别吗？我遇到了类似的[问题](https://stackoverflow.com/questions/11249059/generic-ruby-solution-for-sqlite3-like-or-postgresql-ilike)。我认为你想要 ILIKE 而不是 LIKE：

```
listings = Listing.includes(:neighborhood).where("listings.headline ilike :keywords or neighborhoods.name ilike :keywords", :keywords => "%#{keywords}%") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:54:49.677

重新格式化查询：

```
SELECT "listings"."id" AS t0_r0,
       "listings"."listing_category_id" AS t0_r1,
       "listings"."listing_type_id" AS t0_r2,
       "listings"."user_id" AS t0_r3,
       "listings"."boro_id" AS t0_r4,
       "listings"."neighborhood_id" AS t0_r5,
       "listings"."building_id" AS t0_r6,
       "listings"."term_id" AS t0_r7,
       "listings"."headline" AS t0_r8,
       "listings"."property_type_id" AS t0_r9,
       "listings"."unit_num" AS t0_r10,
       "listings"."common_charges" AS t0_r11,
       "listings"."taxes" AS t0_r12,
       "listings"."maintenance" AS t0_r13,
       "listings"."num_bedrooms" AS t0_r14,
       "listings"."num_bathrooms" AS t0_r15,
       "listings"."square_footage" AS t0_r16,
       "listings"."list_square_footage" AS t0_r17,
       "listings"."description" AS t0_r18,
       "listings"."condition_id" AS t0_r19,
       "listings"."pet_policy_id" AS t0_r20,
       "listings"."exposure_id" AS t0_r21,
       "listings"."floor_plan" AS t0_r22,
       "listings"."photo" AS t0_r23,
       "listings"."security" AS t0_r24,
       "listings"."coop_deductible" AS t0_r25,
       "listings"."flip_tax" AS t0_r26,
       "listings"."house_families" AS t0_r27,
       "listings"."house_extensions" AS t0_r28,
       "listings"."house_stories" AS t0_r29,
       "listings"."house_units" AS t0_r30,
       "listings"."created_at" AS t0_r31,
       "listings"."updated_at" AS t0_r32,
       "listings"."price" AS t0_r33,
       "neighborhoods"."id" AS t1_r0,
       "neighborhoods"."name" AS t1_r1,
       "neighborhoods"."created_at" AS t1_r2,
       "neighborhoods"."updated_at" AS t1_r3,
       "neighborhoods"."boro_id" AS t1_r4
FROM "listings"
LEFT OUTER JOIN "neighborhoods" ON "neighborhoods"."id" = "listings"."neighborhood_id"
WHERE (headline LIKE '%prospect heights%'
       OR neighborhood.name LIKE '%prospect heights%'); 
```

问题似乎很明显。您包括表“neighborhoods”，但后来尝试使用“neighborhood”。如何在 RoR 中解决这个问题 - 不知道，但也许它足以为您指明正确的方向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T17:56:13.937

诊断此问题的最佳方法是确保您的开发和生产环境尽可能匹配，并实际在本地运行 PostgreSQL。不可避免地，你会遇到 SQLite 和 PostgreSQL 之间难以调试的不一致，或者当你推送你的代码时会让你大吃一惊。

如果你在 Mac 上，Heroku Postgres 有一个独立的应用程序，你可以下载和使用，无需配置： http: [//postgresapp.com/](http://postgresapp.com/)

# php - parseJson 遇到意外错误（意外标识符）

> ID：14814130
> 
> 赞同：0
> 
> 时间：2013-02-11T14:30:55.477
> 
> 标签：php, jquery

这都在同一个脚本中。我知道 ajax 和服务器端代码之间的区别。我在这个javascript脚本中交织了php，如下所示：

```
<script>
    <?php
        $json_string = json_encode(array("agent_table" => "<span style='float: left;'></span>"));
    ?>

    var response = $.parseJSON('<?php echo $json_string; ?>');
</script> 
```

但是`parseJson`抱怨错误。当我从`span`.

错误是“意外的标识符”。这是在 Chrome 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:51:53.670

您的数据中有`'`字符。这些将继续`'`在 JSON 中表示为文字字符。

您将 JSON 直接嵌入到 JavaScript 字符串中，并且该字符串由`'`字符分隔。*在 JSON 中作为数据*`'`出现的第一个将终止 JS 字符串。

 *这是在另一种数据格式中嵌入数据时的普遍问题。您在 HTML 中的 JavaScript 中嵌入 JSON。

您的选择：

*   `'`将JSON 中的每个实例替换为`\'`（因此它们的意思是“撇号”而不是“JS 字符串结尾”）
*   将 JSON 视为 JavaScript 对象文字，而不是尝试将其转换为通过 JSON 解析器运行的字符串。

后一种选择是理智的选择（只要您的目标不涉及证明 PHP 可以生成有效的 JSON）。

```
var response = <?php echo $json_string; ?>; 
```

您无需担心插入 HTML 时会进一步转义，因为您需要担心的唯一序列（在脚本元素内）是`</script>`PHP无论如何`json_encode`都会为此输出`<\/script>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:37:40.167

可能是吗？

```
<script>
<?php
$json_string = json_encode(array(
                               "agent_table"=> '<span style="float: left;"></span>'
                           ));
?>
var response = <?php echo $json_string;?>;
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:47:22.890

尝试一下！！！

```
<script>
<?php
$json_string = json_encode(array('agent_table' => addslashes('<span style="float: left;"></span>')));
?>

var response = $.parseJSON('<?php echo $json_string; ?>'); 
```*

# wordpress - 插件页面上的 WordPress 搜索

> ID：14814132
> 
> 赞同：0
> 
> 时间：2013-02-11T14:30:57.930
> 
> 标签：wordpress

我有一个插件可以在 WordPress 中显示优惠券代码列表。我想在优惠券页面中放置用于搜索优惠券代码的搜索框。

```
 <form method="get" id="searchform" action="">
                    <input type="text" value="Search" name="s" id="s" />
                    <input type="hidden" name="cat" value="5" />
                    <input type="submit" id="searchsubmit" value="Search" />
                </form> 
```

当我点击搜索按钮时，它会将我重定向到 wordpress 帖子页面而不是插件默认页面。

建议我在插件页面中实现搜索的工作解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:05:57.690

我们必须使用此表单手动重定向它：

```
<form  method="get" action="<?php echo "edit.php?";?>"  id="coupon">
                    <label class="screen-reader-text" for="tag-search-input">Search Coupon Code:</label>
                    <input type="hidden" name="post_type" value="wpsc-product" /> //required to redirect it coupon page
                     <input type="hidden" name="page" value="wpsc-edit-coupons" />//required to redirect it coupon page
                    <input type="search" id="search-input" name="s" value="">
                    <input type="submit" name="" id="submit" class="button" value="Search Coupon Code">
                    </form> 
```

在此之后，您将不得不从 $_GET['s'] 获取结果并对该文件应用手动搜索。

# joomla - 如何为我的 joomla 插件创建一个简单的管理面板

> ID：14814136
> 
> 赞同：1
> 
> 时间：2013-02-11T14:31:10.020
> 
> 标签：joomla

我认为问题出在我的 xml 中。

```
<?xml version="1.0" encoding="UTF-8"?>
<extension version="2.5" type="plugin" group="content">
   <install>
    <name>Content - eya</name>
    <author>eya</author>
    <creationDate>February 2013</creationDate>
    <copyright>(C) 2013 Open Source Matters. All rights reserved.</copyright>
    <license>GNU General Public License version 2 or later; see LICENSE.txt</license>
    <authorEmail>anigag@grzeit.com</authorEmail>
    <authorUrl>www.eya.com</authorUrl>
    <version>2.5.0</version>
    <description>Adds eya plugin ot your site</description>
    <files>
     <filename plugin="eya">eya.php</filename>
   </files>
   </install>

   <administration >
       <filename>admin.php</filename>
   </administration>
</extension> 
```

这是我执行内容的主要 php 文件：eya.php。

我有另一个文件（admin.php），它从 eya.php 获取 2 个会话变量并将它们放在 iframe 中。有两个问题。一个是我不知道 eya.php 是否每次都在 admin.php 之前运行（或者至少一次设置会话变量）。第二个问题是我不知道如何只显示 admin.php 而没有别的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:01:07.457

为您的插件构建一个管理界面只需将配置部分添加到您的 xml

```
<config>
   <fields name="params">
       <fieldset name="basic">
           <field name="testfield"    type="text" default="mytest" label="field_label" description="field_description" />
       </fieldset>
   </fields>
</config> 
```

但我没有得到你的 admin.php/eya.php 的部分

# sql - 如何计算sql中包含非零值的行

> ID：14814137
> 
> 赞同：0
> 
> 时间：2013-02-11T14:31:11.973
> 
> 标签：sql, oracle, oracle11g

```
SELECT round(COUNT(dmd_1wk),2) AS NBR_ITEMS_1WK
  FROM table; 
```

字段 dmd_1wk 中有很多零。如何计算非零值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T14:32:54.697

听起来您只需要添加一个`WHERE`子句：

```
SELECT 
      round(COUNT(dmd_1wk),2) AS NBR_ITEMS_1WK
FROM table
WHERE dmd_1wk <> 0; 
```

如果你想要非零和零值的计数，那么你可以使用类似的东西：

```
SELECT 
   round(COUNT(case when dmd_1wk <> 0 then dmd_1wk end),2) AS NBR_ITEMS_1WK_NonZero,
   round(COUNT(case when dmd_1wk = 0 then dmd_1wk end),2) AS NBR_ITEMS_1WK_Zero
FROM table; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:32:53.273

**方法一**：案例陈述。如果您需要继续处理所有行（where 子句会阻止），这可能很有用。

```
 SELECT count(case when dmd_1wk = 0 then 0 else 1 end) as NonZeroCount FROM MyTable 
```

**方法 2**：Where 子句。

```
 SELECT
   count(1) as NonZeroCount
 FROM
   MyTable
 WHERE
  dmd_1wk <> 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T14:45:19.960

我想提供另一种解决方案，`NULLIF`因为`COUNT`不会计算 NULL 值：

```
SELECT round(COUNT(NULLIF(dmd_1wk,0)),2) AS NBR_ITEMS_1WK
FROM table; 
```

这是[小提琴](http://sqlfiddle.com/#!4/580f6/3)。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T14:33:29.377

您可以过滤它们。

```
SELECT round(COUNT(dmd_1wk),2) AS NBR_ITEMS_1WK
FROM table
WHERE dmd_1wk <> 0; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T14:43:42.483

Methinks [bluefeet](https://stackoverflow.com/users/426671/bluefeet)的答案可能是您真正想要的，因为听起来您只想计算非零；但如果不是这种情况，这将使您获得零和非零项目的计数：

```
SELECT 
  ROUND(SUM(CASE NVL(dmd_1wk, 0) = 0 THEN 1 ELSE 0 END), 2) AS "Zeros",
  ROUND(SUM(CASE NVL(dmd_1wk, 0) != 0 THEN 1 ELSE 0 END), 2) AS "NonZeros"
FROM table 
```

虽然四舍五入没有意义，但我已经包含了您的原始 ROUND，因为我猜您正在使用它进行格式化，但您可能想要使用：

```
TO_CHAR(SUM(...), '999.00') 
```

因为这是格式化数字的预期功能。

# java - Android/Java 简单的 FiFO 缓冲区

> ID：14814140
> 
> 赞同：2
> 
> 时间：2013-02-11T14:31:18.987
> 
> 标签：java, android, buffer, fifo

我正在寻找简单的字节 FiFo 缓冲区。我必须放置并获取单个字节或数组。但是我可以每次都放一个字节并获取数组，反之亦然。
有什么想法或示例代码可以帮助我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T14:47:12.590

您可以使用 a`LinkedList`作为队列：

```
 Queue<String> qe=new LinkedList<String>();

    qe.add("b");
    qe.add("a");
    qe.add("c");
    qe.add("e");
    qe.add("d");

    Iterator it=qe.iterator();

    System.out.println("Initial Size of Queue :"+qe.size());

    while(it.hasNext())
    {
        String iteratorValue=(String)it.next();
        System.out.println("Queue Next Value :"+iteratorValue);
    }

    // get value and does not remove element from queue
    System.out.println("Queue peek :"+qe.peek());

    // get first value and remove that object from queue
    System.out.println("Queue poll :"+qe.poll());

    System.out.println("Final Size of Queue :"+qe.size()); 
```

如果您还想添加优先级，您可以使用`PriorityQueue`

如果您需要它是线程安全的，请使用`ConcurrentLinkedQueue`

此外，正如@Leonidos 所说，您可以使用 a`ByteBuffer`如果您需要低级 I/O，但要小心。

如果您需要有关如何使用它们的任何说明，请随时对帖子发表评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T14:53:26.520

如果您进行密集的 I/O，您最好根据需要调整[ByteBuffer](https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html)。它工作得非常快，允许写入和读取单字节数据或字节数组。ByteBuffer 有时很棘手，要小心）

# python - 使用基本 HTTP 服务器设置计数器

> ID：14814143
> 
> 赞同：0
> 
> 时间：2013-02-11T14:31:32.750
> 
> 标签：python, timer, webserver

目前我有一个基本的 HTTP 服务器设置使用`BaseHTTPRequestHandler`，我使用`do_GET`相同的方法。`check`如果请求在 5 秒内没有进来，我希望调用一个函数。

我正在考虑将多处理与 time 模块一起使用，但我担心它的可靠性。对于与此相关的最佳实践，是否有任何建议？

谢谢。

[编辑]

Marjin 的解决方案非常酷，但我最终得到以下回溯：-

```
Traceback (most recent call last):
  File "test.py", line 89, in <module>
    main()
  File "test.py", line 83, in main
    server.serve_forever()
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/SocketServer.py", line 224, in serve_forever
    r, w, e = select.select([self], [], [], poll_interval)
select.error: (4, 'Interrupted system call') 
```

[编辑 2] 我在 Python 2.7 上尝试过，但仍然出现错误。

[编辑 3]

```
Traceback (most recent call last):
  File "test.py", line 90, in <module>
    main()
  File "test.py", line 84, in main
    server.serve_forever()
  File "/usr/local/lib/python2.7/SocketServer.py", line 225, in serve_forever
    r, w, e = select.select([self], [], [], poll_interval)
select.error: (4, 'Interrupted system call') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:50:04.263

对于一个简单的服务器，例如基于您的服务器，`BaseHTTPRequestHandler`您可以使用信号处理程序：

```
import time
import signal
import sys

last_request = sys.maxint  # arbitrary high value to *not* trigger until there has been 1 requests at least

def itimer_handler(signum, frame):
    print 'itimer heartbeat'
    if time.time() - last_request > 300:  # 5 minutes have passed at least with no request
        # do stuff now to log, kill, restart, etc.
        print 'Timeout, no requests for 5 minutes!'

signal.signal(signal.SIGALRM, itimer_handler) 
signal.setitimer(signal.ITIMER_REAL, 30, 30)  # check for a timeout every 30 seconds

# ...
def do_GET(..):
    global last_request
    last_request = time.time()  # reset the timer again 
```

该`signal.setitimer()`调用导致操作系统向我们的进程发送周期性`SIGALRM`信号。这不是太精确。`setitimer)`呼叫设置为 30 秒间隔。任何传入的请求都会重置一个全局时间戳，并且`itimer_handler`每 30 秒调用一次比较检查自上次设置时间戳以来是否已经过去了 5 分钟。

该`SIGALRM`信号也会中断正在运行的请求，因此无论您在该处理程序中做什么，都需要快速完成。当函数返回正常的python代码流时，就像一个线程一样。

请注意，这至少需要 Python 2.7.4 才能工作；请参阅[issue 7978](http://bugs.python.org/issue7978)，并且 2.7.4 尚未发布。您可以下载[`SocketServer.py`将包含在 Python 2.7.4 中的文件，也](http://hg.python.org/cpython/raw-file/e44fa71d76fe/Lib/SocketServer.py)可以应用以下反向移植来添加该`errorno.EINTR`版本中引入的处理：

```
'''Backport of 2.7.4 EINTR handling'''

import errno
import select
import SocketServer

def _eintr_retry(func, *args):
    """restart a system call interrupted by EINTR"""
    while True:
        try:
            return func(*args)
        except (OSError, select.error) as e:
            if e.args[0] != errno.EINTR:
                raise

def serve_forever(self, poll_interval=0.5):
    """Handle one request at a time until shutdown.

    Polls for shutdown every poll_interval seconds. Ignores
    self.timeout. If you need to do periodic tasks, do them in
    another thread.
    """
    self._BaseServer__is_shut_down.clear()
    try:
        while not self._BaseServer__shutdown_request:
            # XXX: Consider using another file descriptor or
            # connecting to the socket to wake this up instead of
            # polling. Polling reduces our responsiveness to a
            # shutdown request and wastes cpu at all other times.
            r, w, e = _eintr_retry(select.select, [self], [], [],
                                   poll_interval)
            if self in r:
                self._handle_request_noblock()
    finally:
        self._BaseServer__shutdown_request = False
        self._BaseServer__is_shut_down.set()

def handle_request(self):
    """Handle one request, possibly blocking.

    Respects self.timeout.
    """
    # Support people who used socket.settimeout() to escape
    # handle_request before self.timeout was available.
    timeout = self.socket.gettimeout()
    if timeout is None:
        timeout = self.timeout
    elif self.timeout is not None:
        timeout = min(timeout, self.timeout)
    fd_sets = _eintr_retry(select.select, [self], [], [], timeout)
    if not fd_sets[0]:
        self.handle_timeout()
        return
    self._handle_request_noblock()

# patch in updated methods
SocketServer.BaseServer.serve_forever = serve_forever
SocketServer.BaseServer.handle_request = handle_request 
```

# c++ - 在同一个exe但不同的目标文件的多个函数中使用共享库的静态变量

> ID：14814145
> 
> 赞同：-2
> 
> 时间：2013-02-11T14:31:35.930
> 
> 标签：c++, shared-libraries, linker-errors, static-members, multiple-definition-error

（我已经编辑了我原来的问题，使其更容易理解）

这是问题的原型....

//Txn.h --- 这有一个静态变量，可由包含它的 pgms 使用。

```
class Txn
{
public:
static int i;
static void incr_int();
};
Txn::i=0; 
```

//TXN.cpp

```
void Txn::incr_int() {i++;} 
```

-> 产生 LibTxn.so
//class1.cpp -> 使用来自 Txn.h 的静态变量的 pgm 之一

```
#include Txn.h
Txn::incr_int() 
```

-> 使用 LibTxn.so 生成 class1.o。
// class2.cpp -> 另一个使用来自 Txn.h 的静态变量的 pgm

```
#include Txn.h
cout<<"Txn::i; 
```

-> 通过包含 LibTxn.so 生成 class2.o
-> 使用 class1.o、class2.o 生成 class3（一个 exe）。由于 class1 和 2 都有来自“Txn.h”的语句“Txn::i=0”，因此会发生多个声明问题。
-> 。如果我从 Txn.h 中删除语句“Txn::i=0”，则会出现“未定义引用”错误。
-> .在高等级，这个问题是一种具有会话变量的问题，应该可以从 exe 中的任何 func 进行评估。这些 func 可以在用于形成 exe 的任何 obj 文件中。我适合任何溶胶，即使没有静电。但我无法更改不同 .o 文件（正在使用此会话 var）的创建并结合 .o 来生成 exe。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:43:31.827

如果您无法提供真实代码，或者至少无法提供与真实代码存在相同问题的示例，则很难准确找出问题所在。

但是，问题的根本原因很可能是您不仅要声明，还要在包含类定义的头文件中*定义类的静态变量。*

这意味着`.cpp`包含该标头的所有翻译单元（即文件）都将包含静态变量的定义，并且在合并所有相应的目标文件时，链接器最终会抱怨该符号被多次定义。

如果是这种情况，您应该做的是将静态变量的初始化从包含类定义的头文件中取出，并将其放入一个（并且只有一个）`.cpp`文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:54:10.000

我试图按照您的描述重新创建问题，但它在我的计算机上编译得很好，而且如果没有看到您的代码就很难走得更远。

在下面的代码中，标头告诉（*声明*）包含它的每个 .cpp 文件`Foo::x`，但`Foo::x`位于（*定义在*）Foo.cpp（和 Foo.o）中

富.h：

```
class Foo {
public:
    static int x;
}; 
```

Foo.cpp：

```
#include "foo.h"

int Foo::x; 
```

主.cpp：

```
#include <iostream>
#include "foo.h"

int main(int argc, char *argv[]) {
    Foo::x = 42;
    std::cout << "Foo::x is " << Foo::x; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:53:41.417

是的。它通过在 .cpp 中定义静态变量来工作。特别感谢 Andy Prowl 和 iWerner。

# asp.net-mvc-3 - Ajax WebGrid JQuery 问题

> ID：14814149
> 
> 赞同：0
> 
> 时间：2013-02-11T14:31:46.980
> 
> 标签：asp.net-mvc-3

我正在使用 webgrid，所以我可以显示数据库中的数据。在页面加载时，网格在页面上正确显示，但是当我尝试过滤数据时，我有一个文本框和一个提交按钮，当我按下搜索按钮时出现错误：“jquery script reference is required in为了在 webgrid 助手中启用 ajax 支持”。我似乎找不到问题所在。

在我看来，这是我的网格，你好，我正在使用 webgrid，所以我可以显示数据库中的数据。在页面加载时，网格在页面上正确显示，但是当我尝试过滤数据时，我有一个文本框和一个提交按钮，当我按下搜索按钮时出现错误：“jquery script reference is required in为了在 webgrid 助手中启用 ajax 支持”。我似乎找不到问题所在。

在我看来，这是我的网格，

```
 <div id="myGrid">
            @Html.Partial("Grids/_gridPayments", Model)
        </div> 
```

这是我的部分 webgrid 视图

```
@model IEnumerable<DAS.DAL.CustomerPayment>

@{  
var grid = new WebGrid(source: Model, rowsPerPage: 15, ajaxUpdateContainerId: "myGrid");

@grid.GetHtml(rowStyle: "gridRow", alternatingRowStyle: "gridAltRow", footerStyle: "gridFooter", columns: grid.Columns(
                   grid.Column("FullName", "Πελάτης"),
                   grid.Column("Amount", "Ποσό", format: (item) => string.Format("{0:C}", item.Amount)),
                   grid.Column("Descr", "Περιγραφή"),
                   grid.Column("DTPaid", "Ημερομηνία πληρωμής", format: (item) => string.Format("{0:dd-MMM-yyyy}", item.DTPaid))
               ));
} 
```

最后我的控制器功能是 `var payments = BLPayments.getAllPayments();`

 ````
 if (!string.IsNullOrEmpty(txtSearchCustomer))
           payments = payments.Where(a => a.FullName.Contains(txtSearchCustomer)).ToList();
       if (!string.IsNullOrEmpty(txtSearchFromDate) && !string.IsNullOrEmpty(txtSearchToDate))
           payments = payments.Where(a => a.DTPaid >= DateTime.ParseExact(txtSearchFromDate, "MM/dd/yyyy", null) && a.DTPaid <= DateTime.ParseExact(txtSearchToDate, "MM/dd/yyyy", null)).ToList();
       if (!string.IsNullOrEmpty(txtSearchFromDate) && string.IsNullOrEmpty(txtSearchToDate))
           payments = payments.Where(a => a.DTPaid >= DateTime.ParseExact(txtSearchFromDate, "MM/dd/yyyy", null)).ToList();
       if (string.IsNullOrEmpty(txtSearchFromDate) && !string.IsNullOrEmpty(txtSearchToDate))
           payments = payments.Where(a => a.DTPaid <= DateTime.ParseExact(txtSearchToDate, "MM/dd/yyyy", null)).ToList();

       return PartialView("Grids/_gridPayments", payments); 
````  `提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:02:05.967

添加了此代码 `if (Request.IsAjaxRequest()) return PartialView("Grids/_gridPremadeMeals", premadeMeals); else return View("ViewPremadeMeals", premadeMeals);` 并工作。我认为它刷新了整个页面，但仍然找不到原因..`

# c# - C#中的多个构造函数

> ID：14814154
> 
> 赞同：1
> 
> 时间：2013-02-11T14:32:07.393
> 
> 标签：c#, constructor

我有需要数据的类，可以是字节或文件路径。

目前我将文件读入字节数组，然后设置类。在另一个分隔符中，它直接从作为参数传递的字节中设置类。

我希望第一个构造函数（文件路径）调用第二个（字节），例如：

```
 public DImage(byte[] filebytes) : this()
    {
        MemoryStream filestream = null;
        BinaryReader binReader = null;
        if (filebytes != null && filebytes.Length > 0)
        {
            using (filestream = new MemoryStream(filebytes))
            {
                if (filestream != null && filestream.Length > 0 && filestream.CanSeek == true)
                {
                    //do stuff
                }
                else
                    throw new Exception(@"Couldn't read file from disk.");
            }
        }
        else
            throw new Exception(@"Couldn't read file from disk.");
    }

    public DImage(string strFileName) : this()
    {
        // make sure the file exists
        if (System.IO.File.Exists(strFileName) == true)
        {
            this.strFileName = strFileName;
            byte[] filebytes = null;
            // load the file as an array of bytes
            filebytes = System.IO.File.ReadAllBytes(this.strFileName);
            //somehow call the other constructor like
            DImage(filebytes);                         
        }
        else
           throw new Exception(@"Couldn't find file '" + strFileName);

    } 
```

那么如何从第二个构造函数调用第一个构造函数（以保存复制和粘贴代码）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T14:38:42.630

我实际上建议公开两种*静态*方法：

```
public static DImage FromFile(string filename)
{
    // Load image, then call constructor
}

public static DImage FromData(byte[] data)
{
    // Do anything you need to, then call the constructor
} 
```

构造函数的确切形式取决于您，但我可能会将其设为私有。根据我的经验，使用静态工厂方法可以使代码更清晰，这意味着您可以推迟调用*实际*的构造函数，直到您真正准备好进行工作。这有助于使字段只读等。最大的缺点是缺乏对继承的支持。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T14:35:03.243

您可以创建一个`byte[]`以参数为参数的私有方法，例如`ProcessImage(byte[] myparam)`，两个构造函数都会调用该方法来处理您的字节。

旁注：您可能需要考虑使用 a`stream`而不是 a `byte[]`。

* * *

快速示例：

```
public DImage(byte[] filebytes) : this()    // Remove if no parameterless constructor
{
    MemoryStream filestream = null;
    BinaryReader binReader = null;
    if (filebytes != null && filebytes.Length > 0)
    {
        using (filestream = new MemoryStream(filebytes))
        {
            this.ProcessStream(filestream);
        }
    }
    else
        throw new Exception(@"Couldn't read file from disk.");
}

public DImage(Stream stream) : this()   // Remove if no parameterless constructor
{
    this.ProcessStream(stream);
}    

public DImage(string strFileName) : this()  // Remove if no parameterless constructor
{
    // make sure the file exists
    if (System.IO.File.Exists(strFileName) == true)
    {
        this.strFileName = strFileName;

        // process stream from file
        this.ProcessStream(System.IO.File.Open(strFileName));
    }
    else
       throw new Exception(@"Couldn't find file '" + strFileName);
}

...

private ProcessStream(Stream myStream)
{
    if (filestream != null && filestream.Length > 0 && filestream.CanSeek == true)
    {
        //do stuff
    }
    else
        throw new Exception(@"Couldn't read file from disk.");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:50:43.293

我可以想象实现 3 个构造函数：

1.  接受 a[`System.Stream`](http://msdn.microsoft.com/en-us/library/system.io.stream%28v=vs.110%29.aspx)可以访问的 a[`System.IO.StreamReader`](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)
2.  接受一个字节数组，将其包装成一个[`System.IO.MemoryStream`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx)并调用第一个构造函数。
3.  接受一个文件名，使用 a 加载它[`System.IO.FileStream`](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx)并调用第一个构造函数。

这是一个例子：

```
using System.IO;

// ...

public DImage(Stream Stream)
{
    using (var reader = new StreamReader(Stream))
    {
        // Read the image.
    }
}

public DImage(byte[] Bytes) 
    : this(new MemoryStream(Bytes))
{
}

public DImage(string FileName) 
    : this(new FileStream(FileName, FileMode.Open, FileAccess.Read))
{
} 
```

这也使得处理异常变得更容易。`System.IO.FileNotFoundException`如果文件不存在，FileStream 的构造函数将抛出一个，因此您可以从实例化`DImage`-class 的任何位置处理它：

```
try
{
    var image = new DImage(@"C:\Test.img");
}
catch (System.IO.FileNotFoundException e)
{
    // The image could not be found.
}
catch (Exception e)
{
    // Something else happened.
} 
```

此方法使用`this`构造函数后面的关键字将特殊构造情况委托给默认构造函数。它有两个优点：

1.  通过删除代码重复来减少所需的代码。
2.  通过定义默认构造函数、接受`System.Stream`. 客户端可以调用构造函数从内存块或文件系统条目加载图像，或者他们可以实现自己的流来提供自定义数据源（如 DB BLOB、NetworkStreams ......）。

# css - 我怎样才能让这个菜单像我需要的那样使用 CSS 样式？

> ID：14814155
> 
> 赞同：0
> 
> 时间：2013-02-11T14:32:12.373
> 
> 标签：css, wordpress, navigation

这是我的网站：[http ://solarsource.net/new/](http://solarsource.net/new/)

将鼠标悬停在主导航上以查看相关菜单。

About Us 菜单几乎是完美的。我唯一需要解决的就是将垂直线一直延伸到顶部和底部。

在新闻菜单上，我们需要将垂直线一直延伸到顶部和底部。此外，蓝色突出显示需要扩展框的整个高度/宽度。

在产品/服务菜单上，垂直线需要是菜单的整个高度。此外，蓝色悬停背景需要扩展内部的整个宽度，并且“标题”需要加粗（对于家庭、商业和政府、教育）。

这是 wordpress，所以如果需要，我可以在菜单中添加一个特殊的类，但修复需要足够通用，这样我们就可以添加新项目而不会造成破坏。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:41:06.740

使用负边距，然后增加填充以补偿带有虚线边框的 li 类。

```
padding: 10px 8px;
margin: -10px 0px -10px 0px!important; 
```

# php - 在 PHP 中将图像从一台服务器复制到另一台服务器

> ID：14814157
> 
> 赞同：0
> 
> 时间：2013-02-11T14:32:24.087
> 
> 标签：php, ubuntu, copy

我在一台服务器（ubuntu1）上有一个 PHP 网络应用程序，我有一个脚本可以将图像上传到同一服务器中的一个目录。

问题是现在我们将图像移动到另一台服务器（ubuntu2）。

将图像移动到新服务器的最佳方法是什么？

我在想，上传完成后使用 exec 和 scp 复制图像，为此我需要在每个服务器中定义一个用途（ssh-keygen、pub key 和 authorized_keys 文件）。

但

*   ubuntu1 上的用户是 www-data，我认为为 ssh 设置此用户不是一个好主意。

*   如果我使用“su user -c 'scp ....'”，当脚本要求输入密码时呢？

*   或另一个想法来做到这一点？

副本是通过互联网。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:46:39.230

如果您对服务器具有 root 访问权限，则可以使用[php_ssh2](http://pecl.php.net/package/ssh2) -Modul，它带有[scp-Method](http://php.net/manual/de/function.ssh2-scp-send.php)。这样，您就不必过多考虑起诉和其他与 shell 相关的安全问题。

但也许您可以稍后通过 cron 将文件复制到另一台服务器，这样用户就不必等待，直到这项工作完成。

# c++ - 指向成员函数的 C++ 调用指针

> ID：14814158
> 
> 赞同：34
> 
> 时间：2013-02-11T14:32:24.633
> 
> 标签：c++, function-pointers

我有一个指向成员函数的指针列表，但我很难尝试调用这些函数......正确的语法是什么？

```
typedef void (Box::*HitTest) (int x, int y, int w, int h);

for (std::list<HitTest>::const_iterator i = hitTestList.begin(); i != hitTestList.end(); ++i)
{
    HitTest h = *i;
    (*h)(xPos, yPos, width, height);
} 
```

我也试图在这里添加成员函数

```
std::list<HitTest> list;

for (std::list<Box*>::const_iterator i = boxList.begin(); i != boxList.end(); ++i)
{
    Box * box = *i;
    list.push_back(&box->HitTest);
} 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-11T14:33:49.753

指向*非静态成员函数*的指针是具有独特调用语法的独特野兽。

调用这些函数不仅需要提供命名参数，还需要提供一个`this`指针，因此您必须准备好`Box`用作`this`.

```
(box->*h)(xPos, yPos, width, height); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-11T14:59:56.593

通过指向成员函数的指针调用成员函数具有特定的语法：

```
(obj.*pmf)( params );   //  Through an object or reference.
(ptr->*pmf)( params );  //  Through a pointer. 
```

虽然`->*`可以被覆盖，但它不在标准库迭代器中（可能是因为它需要对每个可能的函数类型进行覆盖）。因此，如果您所拥有的只是一个迭代器，则必须取消引用它并使用第一种形式：

```
((*iter).*pmf)( params ); 
```

另一方面，迭代指向成员本身的指针没有这个问题：

```
(objBox.*(*i))( params );   //  If objBox is an object
(ptrBox->*(*i))( params );  //  If ptrBox is a pointer 
```

（我认为您不需要在 周围加上括号`*i`，但指向成员语法的指针已经足够特殊了。）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-11T15:00:13.440

从我的“获奖” ;-) 关于代表的回答（可在[https://stackoverflow.com/questions/9568150/what-is-ac-delegate/9568226#9568226](https://stackoverflow.com/questions/9568150/what-is-a-c-delegate/9568226#9568226 "https://stackoverflow.com/questions/9568150/what-is-ac-delegate/9568226#9568226")获得）：

typedef 指向成员函数的指针，如下所示：

```
typedef void (T::*fn)( int anArg ); 
```

像这样声明一个：

```
fn functionPtr = &MyClass::MyFunction 
```

像这样称呼它：

```
(MyObject.*functionPtr)( argument ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T15:20:04.790

您尝试通过对象获取成员函数指针暴露了误解。成员函数指针不包括指向您调用它们的对象的指针。您必须在调用时提供这样的指针。

正如许多人所指出的，成员函数调用的语法是：

```
 obj.*funcptr(args); 
```

或者

```
 objptr->*funcptr(args); 
```

在您给出的示例中，听起来您真正需要的是一个虚函数。您有一个标准操作（检测对象是否与框相交），需要在许多不同类型的对象上调用，这些对象的类型在编译时是未知的。这是一项针对虚拟功能的工作。

# css - CKEditor 缺少工具栏图标

> ID：14814159
> 
> 赞同：4
> 
> 时间：2013-02-11T14:32:30.530
> 
> 标签：css, ckeditor

这是在现场随机发生的。我将编辑器嵌入到 ASP.Net MVC 应用程序中。当用户清除缓存并重新启动浏览器时，它会再次运行。任何想法如何解决它？

![在此处输入图像描述](../Images/539ab25ab82d9e35cc90102b82e4cd18.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-20T19:23:31.887

您必须说服您的浏览器清除其对 icons.png 图像的缓存。

转到 htt://yoursite.com/path/to/ckeditor/skins/moono/icons.png

然后使用 Ctrl+F5 或 Cmd+Shift+R（mac 用户）告诉您的浏览器不要使用缓存并获取一个新的缓存，然后将其存储在缓存中。

由于某种原因，您不能从编辑器页面执行此操作，可能是通过加载 css 和图像的方式。对我来说，这个技巧只适用于 Firefox 而不是 Chrome。但是，如果您在 Chrome 中执行 Shift+Ctrl+N（新的隐身窗口）然后转到您的编辑器，您会看到它正在工作。这就是您的访问者将看到的方式，除非他们也将 icons.png 图像缓存在浏览器中。**解决此问题的唯一方法是更改​​图像的 URL**，这将需要替换 CSS 文件中的新 url（它是所有按钮的背景图像）。

# java - 是否可以从数据集中自动生成描述符以供 ANN 使用？

> ID：14814161
> 
> 赞同：0
> 
> 时间：2013-02-11T14:32:35.897
> 
> 标签：java, python, neural-network

我想将数据集自动分类为几个类。是否可以在不编码任何描述符的情况下训练神经网络？

我正在对一组固定大小的图片进行分类。不过，我真的不想为它们编写一组描述符。有没有一种方法可以让我毫不费力地对我的集合进行分类？

我有一个大数据集，只有 7-8 个类可以分类。

如果我能在此过程中找到一些示例代码，我会非常高兴:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:40:47.280

There is a very broad class of neural networks. For what you're doing, you will want to look for one based on [unsupervised learning](http://en.wikipedia.org/wiki/Unsupervised_learning). Typically, these are based on [Hebb's rule](http://urrg.eng.usm.my/index.php?option=com_content&view=article&id=194%3aunsupervised-neural-network-hebbian-learning-&catid=31%3aarticles&Itemid=70).

For your case, you might find [competitive learning](http://en.wikipedia.org/wiki/Competitive_learning) to be suitable. Essentially, you set an output neuron for each class (so the 7-8 you're expecting), and strengthen the weights to the most active for a given input pattern. This results in clustering; input patterns that are similar activate the same output neuron, strengthening those connections and causing the neurons to specialize for the different classes.

# ios - 在 AIR IOS actionscript 3 中处理视频

> ID：14814165
> 
> 赞同：0
> 
> 时间：2013-02-11T14:32:42.250
> 
> 标签：ios, actionscript-3

目前我正在做的是将我的视频导出为 .FLV 文件...将它们拖入 flash cs6 并使用嵌入选项（当我将其拖入 flash 时它会弹出）将它们作为影片剪辑存储在我的库中。现在，当我每次要求显示视频剪辑（addChild）时对其进行调试时，它会增加我的内存使用量（我正在使用任务管理器来监视它），这很好，但是当它从舞台上删除它时，包括它的所有事件处理它使用的内存不会下降，更多的时间它被添加到舞台上，更多的内存增加它创建。

所以问题是：

*   我有什么特定的方法可以处理 Flash 中的视频吗？它似乎没有正确删除实例......

*   在 AIR IOS 的 flash cs6 中导入和使用视频的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:40:57.477

I recommend, OSMF. OSMF is a great tool. For video playback. is supported H264, mp4 and flv.

In Air for iOS is many used for streaming service. More Information, search a Adobe forum.

> Open Source Media Framework (OSMF) simplifies the development of media players by allowing developers to assemble components to create high-quality, full-featured video playback experiences. This open framework enables development focused on web-based video monetization, with lower costs and faster turnaround.

OSMF Site: [OSMF](http://www.opensourcemediaframework.com/)

OSMF Adobe Forum: [OSMF Adobe Forum](http://forums.adobe.com/community/opensource/osmf)

OSMF Documentation: [OSMF Documentation](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/org/osmf/media/package-detail.html)

OSMF Sample Code: [OSMF Market Place](http://www.adobe.com/cfusion/marketplace/index.cfm?event=marketplace.home&marketplaceid=3)

# javascript - 像 JsonViewer 这样的 JavaScript 库

> ID：14814176
> 
> 赞同：2
> 
> 时间：2013-02-11T14:33:12.060
> 
> 标签：javascript, jquery, json, api, rest

我正在尝试编写自定义 HTTP API 的文档。我希望看到它像一个演示客户端，有真实的响应。在设计中将有 3 列，1 列用于请求方法，1 列用于 JsonViewer，1 列用于 html 输出。

我的问题是在 JsonViewer 中是否有一个库 (JS) 可以帮助我，例如[http://jsonviewer.stack.hu/](http://jsonviewer.stack.hu/)？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-15T08:56:50.363

我创建了一个简单的 JSON 查看器。它通过标准的 JSON.parse() 方法从字符串中解析 JSON，并绘制 json-tree。您只能在项目中使用编辑器中的 jsonTree 库，并在一个 html 页面上创建许多 json-trees。

[jsonTree](https://github.com/summerstyle/jsonTreeViewer)库（jsonTreeViewer 的一部分）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:06:48.870

最后我找到了这个 JQuery 库。 [https://github.com/quickredfox/jquery-jsonview](https://github.com/quickredfox/jquery-jsonview)。这正是我想要的。

# ios - iOS：使用 .xcconfig 文件指定代码签名身份

> ID：14814177
> 
> 赞同：4
> 
> 时间：2013-02-11T14:33:12.450
> 
> 标签：ios, xcode

我正在一个由几个开发人员组成的团队中开发一个 iOS 应用程序。我们都有属于同一个开发配置文件的开发人员证书。当我构建我们正在开发的应用程序以便在设备上对其进行测试时，我需要明确指定要使用的代码签名身份。否则，如果我选择自动配置文件选择器，则在将应用程序上传到 HockeyApp 等服务时会收到代码签名不匹配错误。实际上，当我选择自动配置文件选择器时，它似乎选择了 iOS 团队配置配置文件，而不是特定于我正在构建的应用程序的开发配置配置文件。

当我是此应用程序的唯一开发人员时，我通过硬编码正确的代码签名实体以在构建设置中使用来解决此问题。问题是我不再是这个项目的唯一开发者了。在我的项目设置中硬编码我的代码签名身份的问题是，每次我对项目设置进行更改时，我都必须删除它，或者如果我不这样做，我的队友在签署应用程序时会出错，说代码在他们的计算机上找不到签名身份。

所以我要做的是设置一个 .xcconfig 文件，每个团队成员都会在其中指定要使用的代码签名身份。该文件不会进行版本控制，因此每个人都可以明确设置他们的代码签名身份，而不会给同一团队中的其他开发人员造成任何问题。

我设法在我的项目中包含一个 .xcconfig 文件，并在构建阶段对其进行处理。但是，我无法编写解决代码签名实体问题的 .xcconfig 文件。我试图将以下行放入我的 .xcconfig 文件中：

```
CODE_SIGN_IDENTITY = iPhone Developer: Firstname Name (XXXXXXXXXX) 
```

其中 Firstname Name (XXXXXXXXXX) 是将要使用的代码签名身份从构建设置复制/粘贴到 .xcconfig 文件的结果。后来我意识到，当我将它们从构建设置复制/粘贴到 .xcconfig 文件时，我的所有开发配置文件（每个应用程序或包标识符一个）的所有代码签名身份都会给出相同的结果。

我一直在寻找一种方法来区分它们，但我没有找到一种有效的方法。你知道我该如何解决这个问题吗？

我也尝试使用 [sdk=iphoneos*] 修饰符，但没有成功。

我想避免使用不同的构建配置，因为我觉得我必须将对主配置所做的更改合并到一个新的构建配置，该配置只是为了使用正确的代码签名身份。但是，我不熟悉 XCode 中的构建配置是如何工作的，所以如果您认为这可能是一个很好的解决方案，请随时教育我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-09T15:45:00.813

与其选择最终无关紧要的 CODE_SIGN_IDENTITY，不如指定 PROVISIONING_PROFILE 并让 Xcode 使用任何匹配的身份对其进行签名。这就是我们为内部构建系统所做的

指定配置文件：

> PROVISIONING_PROFILE=cb65516b-ee34-4334-95d6-6fba5f2df574

其中长十六进制数是配置文件的 UUID。如果您查看配置文件，您会发现其中大部分是 ASCII，即使它是二进制文件，并且它有这样的部分

> UUID
> 395525c8-8407-4d30-abbd-b65907223eec

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T15:30:35.550

我们有这个工作（[其他人](http://www.sysrage.net/guides/mac-os-x/compiling-textual-irc-client-with-xcode)也是如此）。不要包括大括号之间的部分，只包括它前面的名称部分。如果您需要区分，我建议您以不同的方式命名您的身份（例如，通过包含对您使用该身份的客户或项目名称的引用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-08T10:09:26.743

只需将其添加到 xcconfig.*

CODE_SIGN_IDENTITY = iPhone 开发者：名字 (XXXXXXXXXX)

试试这个 CODE_SIGN

然后转到“构建设置”=>“代码签名”=>“配置文件”=>“鼠标左键单击”=>选择“其他...”=>输入“$（继承）”=>享受！

[![在此处输入图像描述](../Images/f034747cfe2d5dca38e5dd99caa6cb0d.png)](https://i.stack.imgur.com/xeHob.png)

请告诉我是否对您不起作用。希望能帮助到你。

# c# - 我可以在 HTML.PartialRender() 中有变量吗？

> ID：14814181
> 
> 赞同：2
> 
> 时间：2013-02-11T14:33:28.690
> 
> 标签：c#, javascript, asp.net, .net, html

我可以有类似的东西：

```
 @{HTML.PartialRender(variable);} // where variable will be a path of a file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:44:06.810

是的，当视图在服务器上呈现时，您可以使用变量作为路径参数。

```
@{
    string path = "foo/bar"; // a path which the view engine can locate
}

<div>
    @{ Html.RenderPartial( path ); }

    @* OR *@

    @Html.Partial( path )
</div> 
```

由于该问题也使用 JavaScript 标记，因此我将指出您不能将 Razor（服务器）渲染与客户端（JavaScript）执行混合使用。但是，您可以使用 AJAX 轻松调用控制器（并将所需的任何数据传递给它）并且该控制器可以返回呈现的视图。

参见：[Html.Partial vs Html.RenderPartial & Html.Action vs Html.RenderAction](https://stackoverflow.com/questions/5248183/html-partial-vs-html-renderpartial-html-action-vs-html-renderaction)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:38:26.347

[这些](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.renderpartialextensions.renderpartial%28v=vs.108%29.aspx)是 RenderPartial 的重载

```
 1.RenderPartial(HtmlHelper, String) 
```

> 使用指定的 HTML 帮助器呈现指定的局部视图。

```
 2\. RenderPartial(HtmlHelper, String, Object) 
```

> 呈现指定的局部视图，将当前 ViewDataDictionary 对象的副本传递给它，但将 Model 属性设置为指定的模型。

```
 3\. RenderPartial(HtmlHelper, String, ViewDataDictionary) 
```

> 呈现指定的局部视图，将其 ViewData 属性替换为指定的 ViewDataDictionary 对象。

```
 4\. RenderPartial(HtmlHelper, String, Object, 
```

> ```
>  ViewDataDictionary)  Renders the specified partial view, replacing
>             the partial view's ViewData property with the specified
>             ViewDataDictionary object and setting the Model property of the view
>             data to the specified model. 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:45:22.523

使用重载： `RenderPartial(HtmlHelper, String, Object)`

例如。

```
@{Html.RenderPartial("PartialViewName", new { filePath = model.FilePath});} 
```

# html - 在 Sublime Text 中查找结束 HTML 标记

> ID：14814182
> 
> 赞同：134
> 
> 时间：2013-02-11T14:33:34.673
> 
> 标签：html, sublimetext

我有一个非常长且非常嵌套的 HTML 文档，我需要在其中快速找到结束标记。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2013-02-11T14:35:59.000

试试 Emmet 插件命令*Go To Matching Pair*：

[http://docs.emmet.io/actions/go-to-pair/](http://docs.emmet.io/actions/go-to-pair/)

快捷方式 (Mac): `Shift`+ `Control`+`T`

快捷方式（PC）：`Control`+ `Alt`+`J`

[https://github.com/sergeche/emmet-sublime#available-actions](https://github.com/sergeche/emmet-sublime#available-actions)

* * *

## 回答 #2

> 赞同：134
> 
> 时间：2014-06-18T03:50:39.187

有一个快捷方式（对于 Windows 和 Linux 用户，++ `Ctrl`，对于 Mac 用户， `Shift`++ ）可以选择当前选定标签内的整个块。`A``Command``Shift``A`

例如，如果您在文本光标位于`div`下面代码中的外部标记内时按下此键，则将选择所有`div`带有类的 s `selected`。

```
<div class='current_tag_block'>
  <div class='selected'></div>
  <div class='selected'></div>
  <div class='selected'></div>
  <div class='selected'></div>
</div> 
```

正如@frazer-kirkman 在评论中提到的，您还可以根据光标的位置按下键盘上的`Left`或按钮，将光标移动到所选块的开头或结尾`Right`

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-06-03T12:40:39.270

它至少是从 Sublime Editor 2 内置的。只需按以下内容，它就会平衡 HTML 标记

快捷方式 (Mac): `Shift`+ `Command`+ `A`

快捷方式（Windows）： `Control`+ `Alt`+ `A`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-09-28T16:37:52.860

在“转到”菜单下，`Control`+`M`是跳转到匹配的括号。也适用于括号。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-09-06T04:27:13.787

以上方法均不适用于 Windows 10 上的 Sublime Text 3，使用 Emmet Sublime Text 3 插件的 Ctrl + Shift + ' 效果很好，是我唯一可行的解​​决方案。Ctrl + Shift + T 重新打开最后一个关闭的项目，据我所知，从 ST3 的早期版本或 ST2 的后期版本开始，它就已经这样做了。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-12-12T11:06:18.780

如前所述，`Control`/ `Command`++`Shift`为`A`您提供了对标签匹配的基本支持。再次按下它以将匹配扩展到父元素。按左/右箭头跳转到开始/结束标签。

无论如何，没有内置的匹配标签突出显示。Emmet 是一个流行的插件，但它为此目的有点过分了，如果您不想要类似 Emmet 的编辑，它可能会妨碍您。[支架荧光笔](https://github.com/facelessuser/BracketHighlighter)似乎是这个用例的更好选择。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-11-24T10:38:59.787

我认为，您可能想尝试另一种启用折叠的方法。

在 ST2 和 ST3 中，如果您在用户设置中启用折叠：

```
{
    ...(previous item)
    "fold_buttons": true,
    ...(next item, thus the comma)
} 
```

您可以在开始标签所在行的左侧看到三角形折叠按钮。单击它以展开/折叠。如果你想复制，折叠和复制，你会得到所有的块。

[![在此处输入图像描述](../Images/2d787c9ec9756b3458bacfaa102aded7.png)](https://i.stack.imgur.com/ztJFQ.gif)

# jquery - 旋转单词js - 如何改变颜色以及

> ID：14814183
> 
> 赞同：1
> 
> 时间：2013-02-11T14:33:34.213
> 
> 标签：jquery, rotation, words

我刚刚在另一个线程中找到了这个演示，但想问一下我是否有机会改变旋转文本的颜色，我正在玩，但无法弄清楚，任何帮助都是请欣赏

工作[演示](http://jsfiddle.net/zqEmT/4/)

```
var keywords = ["awesome", "cool", "fantastic", "incredible"];
var count = 1;
setInterval(function(){    
    $("span.keyword").fadeOut(400, function(){        
        $(this).html(keywords[count]);        
        count++;        
        if(count == keywords.length)            
            count = 0;        
        $(this).fadeIn(400);    
    });
}, 2000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:38:42.280

只需使用另一个数组来保存颜色，然后使用`.css()`

这是一个工作版本...

[http://jsfiddle.net/zqEmT/11/](http://jsfiddle.net/zqEmT/11/)

```
var keywords = ["awesome", "cool", "fantastic", "incredible"];
var colours = ["red", "green", "blue", "orange"];
var count = 1;
setInterval(function(){    
    $("span.keyword").fadeOut(400, function(){        
        $(this).html(keywords[count]).css("color", colours[count]);
        count++;        
        if(count == keywords.length)            
            count = 0;        
        $(this).fadeIn(400);    
    });
}, 2000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:38:24.053

试试这个，它应该让你开始：

[http://jsfiddle.net/zqEmT/9/](http://jsfiddle.net/zqEmT/9/)

```
var keywords = ["awesome", "cool", "fantastic", "incredible"];
var count = 1;
setInterval(function(){    
    $("span.keyword").fadeOut(400, function(){        
        $(this).html(keywords[count]);        
        count++;        
        if(count == keywords.length)            
            count = 0;        

        var hue = 'rgb('
            + (Math.floor(Math.random() * 256)) + ','
            + (Math.floor(Math.random() * 256)) + ','
            + (Math.floor(Math.random() * 256)) + ')';        

        $(this).fadeIn(400).css('color', hue);    
    });
}, 2000); 
```

# python - Python：按特定模式拆分

> ID：14814186
> 
> 赞同：2
> 
> 时间：2013-02-11T14:33:41.543
> 
> 标签：python, regex, split

我有以下

```
str = '[5.955894, 45.817792], [10.49238, 45.817792], [10.49238, 47.808381], [5.955894, 47.808381]' 
```

我想拆分它，以便我有一个字符串数组，例如

`['[5.955894, 45.817792]', '[10.49238, 45.817792]', ...]`

这样 [...] 对象是数组的元素。包含封闭的 [ 和 ] 很重要。我到目前为止：

```
re.split('\D,\s\D', str) 
```

但这给了我：

```
['[5.955894, 45.817792', '10.49238, 45.817792', '10.49238, 47.808381', '5.955894, 47.808381]'] 
```

不是我想要的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T14:36:58.937

我更喜欢使用`re.findall`和指定我*想要*的，而不是试图描述分隔符`re.split`

```
>>> s = '[5.955894, 45.817792], [10.49238, 45.817792], [10.49238, 47.808381], [5.955894, 47.808381]'
>>> re.findall(r"\[[^\]]*\]",s)
['[5.955894, 45.817792]', '[10.49238, 45.817792]', '[10.49238, 47.808381]', '[5.955894, 47.808381]'] 
```

1.  `\[`火柴 [
2.  `[^\]]*`匹配除 ] 以外的任何内容
3.  `\]`火柴 ]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T14:37:08.327

您需要`re.split`使用*前瞻*：

```
>>> s = '[5.955894, 45.817792], [10.49238, 45.817792], [10.49238, 47.808381], [5.955894, 47.808381]'

>>> re.split(",[ ]*(?=\[)", s)
['[5.955894, 45.817792]', '[10.49238, 45.817792]', '[10.49238, 47.808381]', '[5.955894, 47.808381]'] 
```

并且不要`str`用作变量。它是内置的阴影。

下面的图案：

```
,[ ]*(?=\[) 
```

将匹配`comma(,)`和 一些空格，然后是`[`

您甚至可以使用`look-behind`. 所以，`(?<=\]),[ ]*`也会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:03:12.447

这是我写的一个幼稚的程序，我认为它可以解决您的问题，但不是最好的。

```
>>>def split_string(strg, begin = '[', end = ']'):  
    myList = []  
    string = ''  
    for char in strg:  
        if char == begin:  
            string = ''  
        string += char  
        if char == end:  
            myList.append(string)  
    return myList  
>>>strg = '[5.955894, 45.817792], [10.49238, 45.817792], [10.49238, 47.808381], [5.955894, 47.808381]'  
>>>split_string(strg)  
['[5.955894, 45.817792]', '[10.49238, 45.817792]', '[10.49238, 47.808381]', '[5.955894, 47.808381]'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T15:31:18.477

继@nhahtdh 评论之后。

取决于你的信任问题。

```
In [510]: txt = '[5.955894, 45.817792], [10.49238, 45.817792], [10.49238, 47.808381], [5.955894, 47.808381]'

In [511]: lst = eval ("[%s]" % txt)

In [512]: [str(x) for x in lst]
Out[512]:
['[5.955894, 45.817792]',
 '[10.49238, 45.817792]',
 '[10.49238, 47.808381]',
 '[5.955894, 47.808381]'] 
```

# linq-to-xml - 使用 LINQ 从 XML 文件中选择不同的客户和订单总和

> ID：14814187
> 
> 赞同：0
> 
> 时间：2013-02-11T14:33:44.010
> 
> 标签：linq-to-xml, sum, distinct

到目前为止，我有一个简单的 LINQ 查询，它使用 XML 文件来构建字典或 customerid 和 order：

> var Limit = from c in xml.Descendants("Customer") select new { customerID = c.Descendants("customerid").First().Value, order = c.Descendants("order").First().Value ,
> 
> ```
>  }; 
> ```

我需要返回不同的客户 ID 以及每个客户 ID 的“订单”总数。例如我有：

客户 ID = 123 订单 = 200

客户 ID = 123 订单 = 100

客户 ID = 123 订单 = 50

客户 ID = 456 订单 = 100

客户 ID = 456 订单 = 100

我需要：

客户 ID = 123 OrderTotal = 350

客户 ID = 456 订单总计 = 200

我知道那里有很多类似的问题，但我对 LINQ 还是很陌生。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:37:34.107

如果没有看到确切的 XML 输入结构，很难编写代码，但请尝试以下几行：

```
var query = from cust in xml.Descendants("Customer")
            group cust by (int)cust.Element("customerid") into g
            select new {
              customerID = g.Key,
              total = g.Elements("order").Sum(el => (decimal)el)
            } 
```

[编辑] 使用您想要的评论中提到的示例

```
var query = from cust in xml.Descendants("Customer")
            group cust by (int)cust.Element("customerid") into g
            select new {
              customerID = g.Key,
              total = g.Elements("ordertotal").Sum(el => (decimal)el)
            } 
```

# vb.net - 事件只引发一次？

> ID：14814188
> 
> 赞同：2
> 
> 时间：2013-02-11T14:33:45.370
> 
> 标签：vb.net, event-handling

我想出了一个确实解决了我的问题的解决方案，但是我很好奇为什么我的初始方法失败了。我的情况如下所述：

我有一个引发事件的表格：

```
Public Class frmDgvLb

    Public Delegate Sub ProfileChanged()
    Public Event UpdateProfile As ProfileChanged

    Private Sub lbDgvEdit_SelectedIndexChanged(sender As System.Object, e As System.EventArgs) Handles lbDgvEdit.SelectedIndexChanged
        If UpdateHotlist(cmdStr) = True Then
            If DgvName = "dgvHotlist" Then
                Hotlist.LoadDGV()
            ElseIf DgvName = "dgvJobProfile" Then
                RaiseEvent UpdateProfile()
            End If
            Me.Close()
        End If
    End Sub

End Class 
```

我有另一种定义和处理事件的形式：

```
Public Class frmGraph

    Public Sub New()
        InitializeComponent()
        AddHandler frmDgvLb.UpdateProfile, AddressOf RefreshProfiles
    End Sub

    Public Sub RefreshProfiles()
        GetProfiles(lbMach.SelectedItem, dtpJobDate.Value)
        CreateGraph(dtpJobDate.Value, _machList)
        zgc.Refresh()
    End Sub

End Class 
```

我的问题是 RaiseEvent UpdateProfile() 只会执行一次。列表框的所有后续索引更改都不会引发事件？当调试器单步执行时，当条件评估为真时，调试器将单步执行 RaiseEvent 行，然后单步执行关闭条件语句的行，并且 RefreshProfile Sub 永远不会执行。同样，列表框的索引第一次更改时，一切正常。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:55:25.073

您必须将处理程序添加到实例，而不是类：

```
Public Sub New()
    InitializeComponent()
    AddHandler frmDgvLbInstance.UpdateProfile, AddressOf RefreshProfiles
End Sub 
```

# php - SQL 查询只返回 3 行

> ID：14814193
> 
> 赞同：0
> 
> 时间：2013-02-11T14:33:50.680
> 
> 标签：php, mysql

我有 3 个表，我希望它加入，这样我就可以在 HTML 表中显示其中的所有记录。

表格如下：

1.  拉波兰
2.  医生
3.  比萨基

我使用查询`SELECT * FROM laporan NATURAL JOIN doktor NATURAL JOIN pesakit;`来连接所有表。

我在`laporan`表中输入了 5 条记录，因为它只引用`doktor`和`pesakit`作为外键。我还使用 phpmyadmin 查询工具来显示此查询的记录。

问题是，当我使用该查询时，在这 5 条记录中，只能显示 3 条。有什么问题？`mysql_fetch_array()`php代码中的没有任何问题。

**编辑：**

表格代码如下所示：

```
<?php
        $result = mysql_query("SELECT * FROM laporan NATURAL JOIN doktor NATURAL JOIN pesakit;");

        $i = 1;

        while($row = mysql_fetch_array($result)){
            echo "<tr>";
            echo "<td>" . $i++ . "</td>";
            echo "<td>" . $row['doktor_nama'] . "</td>";
            echo "<td>" . $row['pesakit_nama'] . "</td>";
            echo "<td>" . $row['laporan_tarikh'] . "</td>";
            echo "</tr>";
        }

        echo "</tbody>
        </table>";

?> 
```

数据库结构如下：

**医生：**

*   身份证（PK）
*   医生名字

**比萨基特：**

*   身份证（PK）
*   pesakit_nama

**拉波兰：**

*   身份证（PK）
*   laporan_tarikh
*   laporan_doktor_id (FK to doktor's id)
*   laporan_pesakit_id (FK 到 pesakit 的 id)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T15:05:50.770

除了向查询中添加列之外，还要`INNER JOINS`消除行。如果您期望您的查询返回五行并且只得到三行，我怀疑您的**laporan**表中的两行在两个参考表中具有 NULL 或非 NULL 的键。

因此，请尝试`LEFT OUTER JOIN`改用，如下所示：

```
SELECT lap.*
     , d.doktor_nama
     , p.pesakit_nama
FROM laporan lap
LEFT OUTER JOIN doktor d
   on lap.aporan_doktor_id =d.ID  
LEFT OUTER JOIN pesakit p
   on lap.laporan_pesakit_id =p.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:03:22.720

您应该像这样使用 INNER JOIN 而不是 NATURAL JOIN：

```
SELECT * FROM laporan
    INNER JOIN doktor ON laporan.laporan_doktor_id = doktor.id
    INNER JOIN pesakit ON laporan.laporan_pesakit_id = pesakit.id 
```

# mod-rewrite - 重写规则在新服务器上表现不同

> ID：14814196
> 
> 赞同：0
> 
> 时间：2013-02-11T14:33:55.153
> 
> 标签：mod-rewrite

我在共享主机上，并且我的帐户最近已迁移到新服务器。不幸的是，这意味着我没有关于在根级别进行了哪些配置更改的详细信息。但是，处理我们的 mod_rewrite 规则的方式发生了重大变化。

```
Options +ExecCGI +FollowSymLinks -MultiViews

ModPagespeed off

RewriteEngine On
RewriteRule ^static - [L,E=no-gzip:1]
RewriteRule ^sixteencolors-app/script/dispatch\.fcgi/.*$ - [L,E=no-gzip:1]
RewriteRule ^v0/(.*)$ sixteencolors-app/script/dispatch.fcgi/$1 [PT,L] 
```

预期的结果是`/v0/year/`应该将请求重写为`/sixteencolors-app/script/dispatch.fcgi/year`，而不是`/sixteencolors-app/script/dispatch.fcgi/v0/year/`

它在迁移之前有效，从那时起我们就没有进行任何更改。

# python - 我可以单独使用 Flask app.run() 为多个客户端提供服务吗？

> ID：14814201
> 
> 赞同：238
> 
> 时间：2013-02-11T14:34:12.847
> 
> 标签：python, flask

我知道我可以将 Flask 与 Apache 或其他 Web 服务器链接起来。但是，我正在考虑将 Flask 作为同时为多个客户端提供服务的独立服务器运行。

这可能吗？我是否必须处理生成多个线程并管理它们？

* * *

## 回答 #1

> 赞同：341
> 
> 时间：2013-02-12T01:20:58.797

[`flask.Flask.run`](http://flask.pocoo.org/docs/api/#flask.Flask.run)`**options`接受它转发到的附加关键字参数 ( ) [`werkzeug.serving.run_simple`](http://werkzeug.pocoo.org/docs/serving/#werkzeug.serving.run_simple)- 其中两个参数是`threaded`(一个布尔值) 和`processes`(您可以将其设置为大于一的数字以使 werkzeug 生成多个进程来处理请求)。

`threaded`默认`True`为从 Flask 1.0 开始，因此对于最新版本的 Flask，默认开发服务器将能够默认同时为多个客户端提供服务。对于旧版本的 Flask，您可以显式传递`threaded=True`以启用此行为。

例如，你可以做

```
if __name__ == '__main__':
    app.run(threaded=True) 
```

以与旧 Flask 版本兼容的方式使用线程处理多个客户端，或

```
if __name__ == '__main__':
    app.run(threaded=False, processes=3) 
```

告诉 Werkzeug 产生三个进程来处理传入的请求，或者只是

```
if __name__ == '__main__':
    app.run() 
```

如果您知道您将使用 Flask 1.0 或更高版本，则使用线程处理多个客户端。

话虽如此，Werkzeug`serving.run_simple`包装了标准库的[`wsgiref`](https://docs.python.org/3/library/wsgiref.html#module-wsgiref)包——该包包含 WSGI 的参考实现，而不是生产就绪的 Web 服务器。如果你打算在生产环境中使用 Flask（假设“生产环境”不是一个不超过 10 个并发用户的低流量内部应用程序），请确保将它放在一个真正的 Web 服务器后面（参见 Flask 文档中标题为一些建议方法的[部署选项）。](http://flask.pocoo.org/docs/deploying/)

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2013-02-11T16:03:07.757

在 Flask 中使用 simple`app.run()`在单个线程上创建单个同步服务器，一次只能为一个客户端提供服务。正是出于这个原因，它旨在用于低需求的受控环境（即开发、调试）。

[由于Python GIL](http://wiki.python.org/moin/GlobalInterpreterLock)，产生线程并自己管理它们可能不会让你走得太远。

也就是说，您仍然有一些不错的选择。[Gunicorn](http://gunicorn.org/)是一个可靠的、易于使用的 WSGI 服务器，它可以让您生成多个工作程序（独立的进程，因此无需担心 GIL），甚至还带有[异步工作](http://docs.gunicorn.org/en/latest/configure.html#worker-processes)程序，可以加快您的应用程序（并使其更安全）对您没有任何工作（尤其是使用 Flask）。

尽管如此，即使是 Gunicorn 也不应该直接公开曝光。在生产中，应该在更健壮的 HTTP 服务器后面使用它；[nginx](http://nginx.org/en/)往往与 Gunicorn 和 Flask 配合得很好。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2020-09-16T00:21:13.770

2020 年的提示：

从 Flask 1.0 开始，它默认启用多线程（[source](https://github.com/pallets/flask/blob/master/src/flask/app.py#L873)），你不需要做任何事情，只需升级它：

```
$ pip install -U flask 
```

如果您使用的是旧版本`flask run`而不是`app.run()`旧版本，则可以使用命令选项 ( ) 控制线程行为`--with-threads/--without-threads`：

```
$ flask run --with-threads 
```

这和`app.run(threaded=True)`

# c# - 无法从事件中关闭表单

> ID：14814206
> 
> 赞同：0
> 
> 时间：2013-02-11T14:34:24.867
> 
> 标签：c#, invoke

我的主窗体名为 Form1 有一个类，其中包含一个指示 Form1 应该关闭的事件。

当我收到事件并尝试时，`Close`我得到了必须使用 control.invoke 的异常。好吧，我用这段代码打电话，我仍然得到同样的异常：

```
void Prox_OkEvent(object sender, EventArgs e)
{
    if (this.InvokeRequired)
    {
        callControlhandler c = new callControlhandler(CloseForm);
        c.Invoke();
    }
    else Close();
}

private void CloseForm()
{
    try { this.Close(); }
    catch (Exception e) { MessageBox.Show(e.Message); }
} 
```

哪里有问题？谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T14:38:46.090

`Invoke`应该针对`Form`自身调用。在这种情况下，它被称为反对`c`。

尝试...

```
 if (this.InvokeRequired)
        {
            this.Invoke(new Action(CerrarForm));
        } 
```

# doctrine-orm - FOSOAuthServerBundle：OAuth2 资源所有者密码凭证授予流程

> ID：14814208
> 
> 赞同：2
> 
> 时间：2013-02-11T14:34:28.843
> 
> 标签：doctrine-orm, oauth-2.0, symfony-2.1

我在 Symfony2.1 项目（使用 Doctrine）中使用**FOSOAuthServerBundle**，我想实施以使用**资源所有者密码凭据授予**流程。

我读了 Burak Seydioglu 写的好文章“[使用 FOSOAuthServerBundle 保护 Syfmony2 REST 服务](http://blog.logicexception.com/2012/04/securing-syfmony2-rest-service-wiith.html)”，但他只解释了“授权代码授予”和“隐式授予”流程。

我读了一条试图解释它的评论，但没有成功。

我尝试使用请求的参数创建一个 URI，但出现了一些错误。

谢谢你。

# r - 逻辑运算后保留的 integer64 的子类 (R)

> ID：14814209
> 
> 赞同：2
> 
> 时间：2013-02-11T14:34:31.150
> 
> 标签：r, subclass, r-s3

当我从 bit64 对 integer64 对象进行子类化然后执行相等测试时，结果包含逻辑数据，但仍归入我的类而不是逻辑。例如，整数不会发生这种情况。

示例代码：

```
library(bit64)
x = as.integer64(5)
class(x) = c("Foo", "integer64")
x == 5 
```

返回

```
[1] TRUE
attr(,"class")
[1] "Foo" 
```

请注意，它仍然有类“Foo”

而如果我们对整数做同样的事情：

```
y = as.integer(5)
class(y) = c("Foo", "integer")
y == 5 
```

它返回逻辑

```
[1] TRUE 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:46:44.643

查看 equals`integer64`变量的实现。

```
`==.integer64`
function (e1, e2) 
{
    a <- binattr(e1, e2)
    e1 <- as.integer64(e1)
    e2 <- as.integer64(e2)
    ret <- logical(max(length(e1), length(e2)))
    .Call("EQ_integer64", e1, e2, ret)
    a$class <- minusclass(a$class, "integer64")
    setattributes(ret, a)
    ret
} 
```

返回值被显式地赋予一个类属性，该类属性等于 的类`a`，减去类`"integer64"`。

`binattr`，创建变量`a`是一个相当奇怪的函数，它检查两个输入是否具有兼容的大小，然后返回一个或另一个的属性，具体取决于哪些具有`dim`属性。

# java - 优秀、平均和糟糕案例的复杂性

> ID：14814210
> 
> 赞同：2
> 
> 时间：2013-02-11T14:34:37.747
> 
> 标签：java, algorithm, complexity-theory

我在 java 中创建了这个方法，指示整数数组是否已排序。它的复杂性是什么？我认为如果在最坏的情况下是 O(1)，在平均情况下是 O(n)？

```
static boolean order(int[] a){
  for(int i=0;i<a.length-1;i++){
    if(a[i]>a[i+1]) return false;
  }
 return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:53:42.633

你没有告诉任何关于你的输入的事情。所以假设它是完全随机的。因此，对于任何 2 个邻居对，我们有 50% 的机会对它们进行排序。这意味着我们进行 1 步的概率为 1，2 步的概率为 0.5，3 步的概率为 0.25，通常 k 步的概率为 2^(-k)。让我们计算预期的步数：

![在此处输入图像描述](../Images/061ad030029bff262ce131c903a4f22d.png)

我不知道如何计算这个系列的总和，所以我使用了 wolfram alpha 并得到了[答案： 2](http://bit.ly/UYiEsT)，所以它是一个常数。

因此，据我了解，随机输入的平均情况是 O(1)。

我不确定这是计算平均复杂度的正确方法，但对我来说似乎很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:37:05.450

通常在最坏的情况下引用复杂性，在您的情况下是 O(n)。

# python - 解析复杂的文本文件

> ID：14814211
> 
> 赞同：0
> 
> 时间：2013-02-11T14:34:39.063
> 
> 标签：python, python-3.x

```
savetonotherfile.write(
        openfileagain.read().replace(
            "b'<HTML>\n<HEAD>\n<TITLE> Euro Millions Winning Numbers</TITLE>\n<BODY>\n<PRE> Euro Millions Winning Numbers\n\nNo., Day,DD,MMM,YYYY, N1,N2,N3,N4,N5,L1,L2,  Jackpot,   Wins\n",
            '').replace(
            "\n<HR><B>All lotteries below have exceeded the 180 days expiry date</B><HR>No., Day,DD,MMM,YYYY, N1,N2,N3,N4,N5,L1,L2,  Jackpot,   Wins\n",
            '').replace(
            "\n\nThis page shows all the draws that used any machine and any ball set in any year.\n\nData obtained from http://lottery.merseyworld.com/Euro/\n</PRE>\n</BODY></HTML>\n'",
            '')) 
```

我正在尝试使用上面的行从文本文件中删除文本，格式 `b'<HTML>\n<HEAD>\n<TITLE> Euro Millions Winning Numbers</TITLE>\n<BODY>\n<PRE> Euro Millions Winning Numbers\n\nNo., Day,DD,MMM,YYYY, N1,N2,N3,N4,N5,L1,L2, Jackpot, Wins\n562, Fri, 8,Feb,2013, 09,11,14,34,44,10,11, 27886637, 0\n561, Tue, 5,Feb,2013, 06,25,31,40,45,06,07, 19070109, 0\n560, Fri, 1,Feb,2013, ...`为一些要删除的文本、更多的数字、更多的要删除的文本。没有做任何事情，`.replace()`或者至少写入写入文件的内容与读取文件相同。我做错了什么？我还想删除日期之后的长整数和后续文本直到逗号，但还没有开始跨栏，因为我什至无法完成最简单的事情！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:51:27.650

Add `r` before the string literals in the first argument of `replace`. Or change `\n` to `\\n`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:36:03.560

对于文本的复杂操作，证据是必须使用正则表达式。
我敦促您学习该`re`模块。你会比修改**replace()获得更多的满足**

关于你给出的代码，执行是这样的：
- 获取处理程序文件中的文本`openfileagain`：创建一个字符串 #1
- 替换这个文本的一部分，这个字符串 #1 的 id est：创建一个新的字符串 #2
- 替换文本的第二部分，即替换字符串#2 中存在的所述部分：创建第三字符串#3
- 替换第三部分，即替换字符串#3 中存在的该部分：创建一个字符串 #4。

使用正则表达式时，您将提供由 3 个部分组成的信息来替换，并且**re**机器将直接从字符串 #1 创建相同的字符串 #4，而无需通过字符串 #2 和 #3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:53:46.100

尝试像这样使用 html 并不是一个好主意 - 通常最好使用 html 解析模块，例如[beautifulsoup](http://www.crummy.com/software/BeautifulSoup/)（假设是 html - 请参阅下面的编辑）。无论哪种方式，如果您将代码分解为更小的步骤，并排除长替换字符串，您将能够更轻松地找到错误。例如：

```
replace_map = (('first string', 'replace with this'),
               ('second string', 'replace the second with this'))

with open(inputfilename, 'rt') as infile:
    output = infile.read()
    for fromstr, tostr in replace_map:
        output = output.replace(fromstr, tostr)

with open(outputfilename, 'wt') as outfile:
    outfile.write(output) 
```

**编辑：** 发布我的答案后，我注意到您似乎正在解析表单的文本`"b'<html code/>'"` 这是正确的吗？看起来您有一个描述 python 字节对象的字符串。如果这确实是您正在做的事情，那么 html 解析将无济于事，但我建议您认真质疑为什么要这样做，并确定它是否是实现最终结果的最佳方式。

# macos - 你可以在 NSView 上设置根层的锚点吗？

> ID：14814212
> 
> 赞同：3
> 
> 时间：2013-02-11T14:34:40.297
> 
> 标签：macos, cocoa, core-animation, quartz-graphics

是否可以修改layer-backed`anchorPoint`的根上的属性？`CALayer``NSView`

我有一个名为的视图`myView`，似乎每次设置 时`anchorPoint`，它都会在下一个运行循环中被覆盖。我正在这样做：

```
NSView *myView = [[myView alloc] initWithFrame:CGRectMake(0, 0, 50, 50)];

//set the root layer
myView.layer = [CALayer layer];
myView.wantsLayer = YES;

//gets overridden on the next run loop
myView.layer.anchorPoint = CGPointMake(1,1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-17T08:58:58.517

> 在 10.8 上，AppKit 将控制 CALayer 上的以下属性（无论是“layer-hosted”还是“layer-backed”）：geometryFlipped、bounds、frame（隐含）、position、anchorPoint、transform、shadow*、hidden、filters、和合成过滤器。... 使用适当的 NSView 覆盖方法来更改这些属性。

基本上它将锚点从 [0.5,0.5] 设置为 [0,0]，为了解决这个问题，我使用了类似的东西：

```
+(void) accountForLowerLeftAnchor:(CALayer*)layer
{
    CGRect frame = layer.frame;
    CGPoint center = CGPointMake(CGRectGetMidX(frame), CGRectGetMidY(frame));
    layer.position = center;
    layer.anchorPoint = CGPointMake(0.5, 0.5);
} 
```

# ruby - 创建正则表达式以匹配 Ruby 中的 YAML 键

> ID：14814214
> 
> 赞同：2
> 
> 时间：2013-02-11T14:34:43.170
> 
> 标签：ruby, regex, yaml

根据 YAML 文件中的以下数据，是否可以在 Ruby 中创建一个正则表达式，以匹配列表中的相应 Group 和 Item 键

**源数据**

```
Groups:
    GroupA:
    - item 1
    - item 3
    Group B:
    - itemA
    - item 3
    C:
    - 1
    - item 3 
```

**测试字符串：**

```
GroupA item 1     
Group B itemA
c item 1
C 1
GroupA 1 
```

**预期匹配组**

```
Match 1:
   1\. GroupA
   2\. item 1
Match 2:
   1\. Group B
   2\. itemA
Match 3:
   1\. C
   2\. 1 
```

谢谢你的帮助！

伊恩

=================================== 更新：继锡芒评论 -

这里有一些进一步的背景......

插件内部存在一个包含许多方法的类。每个方法都接收一个字符串，该字符串被解析以确定执行什么操作。在某些方法中，字符串的内容用于后续操作 - 当需要时，使用正则表达式来提取（或匹配）字符串的相关部分。不幸的是，无法控制上游代码来改变这个过程。

在这种情况下，字符串采用“组项目状态”的形式。但是，组和项目名称不一定是单个单词，并且每个组不必包含所有项目。例如

```
"Group A Item 1"
"c item 1"
"GroupA 1" 
```

因此，需要一种解析输入字符串以获取相应 Group 和 Item 的方法，以便将正确的值传递给更进一步的方法。鉴于该类中的其他类似方法使用正则表达式，并且有一个 YAML 文件，其中包含组 - 项对的最终列表，所以我首先想到的是正则表达式。

但是，我愿意接受更好的方法

非常感谢

伊恩

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T14:52:52.247

Why would you want to match anything in a YAML file? Load it into Ruby using the [YAML](http://ruby-doc.org/stdlib-1.9.3/libdoc/yaml/rdoc/YAML.html) parser, and search it, or modify in memory.

If you want to save the modified file, the YAML parser can emit a Ruby object as YAML, which you then save.

```
require 'yaml'

yaml = '
---
Groups:
    GroupA:
    - item 1
    - item 3
    Group B:
    - itemA
    - item 3
    C:
    - 1
    - item 3
'

yaml = YAML.load(yaml)
# => {"Groups"=>{"GroupA"=>["item 1", "item 3"], "Group B"=>["itemA", "item 3"], "C"=>[1, "item 3"]}}

yaml['Groups']['GroupA'].first
# => "item 1"

yaml['Groups']['Group B'][1]
# => "item 3"

yaml['Groups']['C'].last
# => "item 3" 
```

Based on the above definitions, manipulating the data could be done like this:

```
yaml = YAML.load(yaml)
groups = yaml['Groups']

new_group = {
  'groupa_first' => groups['GroupA'].first,
  'groupb_second' => groups['Group B'][1],
  'groupc_last' => groups['C'].last
}
yaml['New Group'] = new_group

puts yaml.to_yaml 
```

Which outputs:

```
---
Groups:
  GroupA:
  - item 1
  - item 3
  Group B:
  - itemA
  - item 3
  C:
  - 1
  - item 3
New Group:
  groupa_first: item 1
  groupb_second: item 3
  groupc_last: item 3 
```

There's a reason we have YAML parsers for all the different languages; They make it easy to load and use the data. Take advantage of that tool, and use Ruby to modify the data, and, if needed, write it out again. It would be one huge YAML file before I'd even think of trying to modify it on disk considering it's so easy to do in memory.

Now, the question becomes, how do you search the keys of a hash using a regex?

```
yaml['Groups'].select{ |k,v| k[/^Group/] }
# => {"GroupA"=>["item 1", "item 3"], "Group B"=>["itemA", "item 3"]} 
```

Once you have the ones you want, you can easily modify their contents, substitute them back into the in-memory hash, and write it out.

# r - 使用 ggplot2 绘制时间序列的错误消息

> ID：14814216
> 
> 赞同：1
> 
> 时间：2013-02-11T14:34:51.210
> 
> 标签：r, ggplot2

我对 ggplot2 很陌生，想知道是否有人可以帮助我解决我的简单问题。我的示例数据框如下所示。我想根据计数的数量绘制时间（小时和分钟）。

```
Date <- c("07/12/2012 05:00:00", "07/12/2012 06:00:00", "07/12/2012 07:00:00",
      "07/12/2012 08:00:00")
Date <- strptime(Date, "%d/%m/%Y %H:%M")
Counts <- c("0","3","10","6")
Counts <- as.numeric(Counts)
df1 <- data.frame(Date,Counts,stringsAsFactors = FALSE)

#Adds time to dataframe.
df1 <- within(df1,{
  posb <- as.POSIXlt(Date,format="%d/%m/%Y %H:%M")
hours <- posb$hour
mins <- posb$min
dates <- format(posb, "%x")
time <- format(posb, "%H:%M")
posb <- NULL  # cleanup
})
#Draw graph (time versus Counts)
library(ggplot2)
g = ggplot(df1, aes(x=time, y=Counts))
g + geom_line() 
```

我总是收到错误消息“geom_path：每个组仅包含一个观察值。是否需要调整群体审美？

谁能帮我纠正我的代码以允许我的图表正确绘制？

**编辑** 我仍在尝试使时间变量的格式起作用，并绘制图表。但是目前，它仍然无法识别日期格式。我希望能够： 1\. 绘制一组数据（比如从 07:47:50 到 07:49:10）。2\. 让 R 每整分钟绘制一次 x 轴。...这些我现在都不能上班。我的真实数据的一个子集如下所示。任何建议将不胜感激。

```
day3 <- structure(list(Date = c("11/12/2012", "11/12/2012", "11/12/2012", 
                            "11/12/2012", "11/12/2012", "11/12/2012", "11/12/2012", "11/12/2012", 
                            "11/12/2012", "11/12/2012", "11/12/2012", "11/12/2012", "11/12/2012", 
                            "11/12/2012", "11/12/2012", "11/12/2012", "11/12/2012", "11/12/2012", 
                            "11/12/2012", "11/12/2012"), Time = c("07:46:10", "07:46:20", 
                                                                  "07:46:30", "07:46:40", "07:46:50", "07:47:00", "07:47:10", "07:47:20", 
                                                                  "07:47:30", "07:47:40", "07:47:50", "07:48:00", "07:48:10", "07:48:20", 
                                                                  "07:48:30", "07:48:40", "07:48:50", "07:49:00", "07:49:10", "07:49:20"
                            ), Axis1 = c(59L, 651L, 59L, 0L, 22L, 50L, 0L, 0L, 114L, 899L, 
                                         129L, 33L, 21L, 9L, 224L, 135L, 266L, 16L, 59L, 126L), Steps = c(1L, 
                                                                                                          2L, 1L, 0L, 2L, 1L, 0L, 0L, 5L, 15L, 6L, 2L, 2L, 0L, 8L, 5L, 
                                                                                                          16L, 1L, 3L, 8L)), .Names = c("Date", "Time", "Axis1", "Steps"
                                                                                                          ), row.names = 52838:52857, class = "data.frame")
#Creates a new dataframe with a time column.
day3 <- within(day3,{
  posb <- as.POSIXlt(Time,format="%H:%M:%S")
  posb <- NULL  # cleanup
})

library(ggplot2)
g = ggplot(day3, aes(x=strptime(Time, "%H:%M:%S"), y=Axis1)) + geom_line(aes(group = 1)) +
  theme_bw() +
  xlab("Time") + 
  ylab("Activity (Counts per 10 seconds)") + 
  scale_x_datetime(limits=c(as.POSIXct("07:47:50"),as.POSIXct("07:49:10")))

g 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:50:15.993

问题是由于您的`time`变量是字符向量：

```
R> class(df1$time)
[1] "character" 
```

您必须将其转换为 class 的对象`POSIXlt`，例如：

```
ggplot(df1, aes(x=strptime(time, "%H:%M"), y=Counts)) + geom_line() 
```

或者，更简单的是，您可以直接使用您的`Date`变量，无需转换：

```
ggplot(df1, aes(x=Date, y=Counts)) + geom_line() 
```

![在此处输入图像描述](../Images/9e2a788547fee412e0ade195c043a6d0.png)

更好的是，您会看到`ggplot2`根据您沿轴的时间跨度自动标记您的 x 轴。

**编辑：**如果要定义 x 轴限制，可以执行以下操作：

```
ggplot(df1, aes(x=Date, y=Counts)) + geom_line() + scale_x_datetime(limits=c(as.POSIXct("2012/12/07 04:00:00"),as.POSIXct("2012/12/07 10:00:00"))) 
```

# css - 用于谷歌浏览器的带有 css 的视网膜设计

> ID：14814223
> 
> 赞同：0
> 
> 时间：2013-02-11T14:35:23.190
> 
> 标签：css, google-chrome

我正在设计一个带有视网膜图像的网站。它适用于 macbook pro 和 iphone 上的 safari。但是使用带有 Mountain Lion 的 macbook pro 上的 Chrome 版本 24.0，我只能看到 1/4 的视网膜图像。

我有一个大小为 300 像素 x 83 像素的徽标，对于视网膜，我有一个大小为 600 像素 x 166 像素的视网膜徽标

我的代码（首先使用 doctype html）：

```
<html>
<head>
<title></title>
<style>
.headerlogo {width:300px;height:83px;background: url(logo300.png);
background-size: 300px 83px;padding:0px;margin:0px}

@media  (-webkit-min-device-pixel-ratio: 1.5),
(-o-min-device-pixel-ratio: 3/2),
(min--moz-device-pixel-ratio: 1.5),
(min-device-pixel-ratio: 1.5),
(min-resolution: 1.5dppx) {

.headerlogo     {;background: url(logo600.png);}
}

</style>
</head>
<body>
<div class="headerlogo"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:53:02.713

You have a rogue semicolon:

```
.headerlogo     {;background: url(logo600.png);} 
```

Should be:

```
.headerlogo     {background: url(logo600.png);} 
```

You may have to specify the background-size property again for the retina image too at the larger size.

Try adding "only screen" and see if that helps matters:

```
@media only screen and (-Webkit-min-device-pixel-ratio: 1.5),
    only screen and (-moz-min-device-pixel-ratio: 1.5),
    only screen and (-o-min-device-pixel-ratio: 3/2),
    only screen and (min-device-pixel-ratio: 1.5),
    only screen and (min-resolution: 1.5dppx) {

        .headerlogo {
            background: url(logo600.png);
        }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:18:04.313

尝试“背景大小：100%；” 我不确定，所以我把它作为评论，但我认为你没有看到它。

# java - 阿拉伯输入参数像垃圾输入一样传递 JasperReports

> ID：14814230
> 
> 赞同：0
> 
> 时间：2013-02-11T14:35:46.683
> 
> 标签：java, jasper-reports

我们使用*JasperReports 4.6.0*和*Java 1.6*来生成*PDF*报告。对于带有英文文本的参数，它运行良好。如果我传递阿拉伯语输入参数，则输入参数像垃圾字符一样传递，因此我无法获取记录集。当我使用*JasperReports 3.7.6*和*Java 1.5时也是如此*

我的代码：

```
JasperPrint print = null;
Runtime run = null;
String strJasperFile = "E:/DailyWork/FEB-2013/report2.jasper";
String strOutputFile = "E:/DailyWork/FEB-2013/report2.xls";
String printtime="";
Connection con = getSqlConnection();        
HashMap mpDetailSp = new HashMap(); 
mpDetailSp.put("parameter1", "B المهمات");
print = JasperFillManager.fillReport(strJasperFile, mpDetailSp, con);           
JRExporter exporter = new JRXlsExporter();
exporter.setParameter(JRExporterParameter.JASPER_PRINT, print);
exporter.setParameter(JRExporterParameter.OUTPUT_FILE_NAME, strOutputFile);
exporter.exportReport(); 
```

你能告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:59:43.567

不是 Jasper 的专家，我可以认为问题出在文本编码中。我进行了简短的搜索，发现了这个资源： http: [//www.adp-gmbh.ch/misc/tools/jasper/java.html](http://www.adp-gmbh.ch/misc/tools/jasper/java.html)

请查看模板示例并注意`<?xml version="1.0" encoding="UTF-8"?>`文件顶部的行。您的文件是否`report2.jasper`包含这样的行？检查它并在它丢失时包含它。

另外添加行

`exporter.setParameter(JRExporterParameter.CHARACTER_ENCODING, "UTF-8");`

我希望现在一切都会奏效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T05:19:58.750

最后，我找到了解决这个问题的方法。它是 Java 1.6 JVM 中的编码设置。我已经如下设置环境变量来解决问题

JAVA_TOOL_OPTIONS 到 -Dfile.encoding=UTF8

它解决了我的问题。输入是由 statck 溢出中的另一个论坛帖子给出的

[https://stackoverflow.com/a/623036/770927](https://stackoverflow.com/a/623036/770927)

我感谢 Edward Grech，他在上面的帖子中解释了明显的原因和解决方案。

# magento - Magento OPC：如何启用表单字段的自动完成？

> ID：14814233
> 
> 赞同：2
> 
> 时间：2013-02-11T14:35:48.223
> 
> 标签：magento, autocomplete

如何为单页结帐区域中的表单字段启用自动完成功能。它不能开箱即用，我猜那是因为 OPC 与 Ajax 一起工作。当我再次订购时，我想获得关于我在上次订单中插入的所有数据（姓名、公司等）的建议。

我尝试将 autocomplete="on" 和 method="post" 添加到帐单表单中，但这并没有改变任何事情。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:37:49.410

您将需要覆盖返回数据的 OPC 模型，或者更可能覆盖 OPC 模板本身（以查找以前的订单数据和预填充）。例如 /app/design/*包*/_theme_/template/persistent/checkout/onepage/billing.phtml

# uml - 实施活动可能是活动图中所有其他活动的后续活动

> ID：14814234
> 
> 赞同：1
> 
> 时间：2013-02-11T14:35:52.223
> 
> 标签：uml, activity-diagram

我目前正在为我的 ojt 项目做一个动态模型。但我被困在一个特定的问题上，我对解决方案的想法似乎过于复杂。

为了在不同的上下文中解释它，假设我有 2 个类：客户和销售人员。客户正在从客户那里购买东西。但在一切尘埃落定之前，他们还要经历一系列的活动。每次活动后，客户和销售人员都必须有机会退出交易。放在一个图表中，它看起来像这样：

![在此处输入图像描述](../Images/e9235245efea5e0ddbfcd4bd6f0b4c00.png)

这个对吗？当我有 50 种可能的活动时怎么样？那么该图将变得非常难以阅读。解决这个问题的好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T22:36:24.900

如果您查看 UML 规范（UML 2.4.1 上层结构的第 12.3.33 节）中的 InterruptibleActivityRegion，它给出了一个类似的示例，即在交易达成之前的任何时候取消订单。在可中断区域（标记为带有 Z 形箭头的虚线圆角矩形）内，所有活动都可能被与箭头关联的事件中断 - 在您的情况下退出 - 并最终进入中断处理活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T02:40:29.767

您应该使用可中断的活动区域。如需快速参考，请参阅此示例图：

![可中断活动区域](../Images/6ff788f607cf154de6aa6f8dd3aff2c2.png)

# rsa - 使用存储在应用程序二进制文件中的公钥解密软件许可证

> ID：14814235
> 
> 赞同：2
> 
> 时间：2013-02-11T14:35:59.033
> 
> 标签：rsa, encryption-asymmetric, license-key

参考[这个问题的答案，](https://stackoverflow.com/questions/12696581/software-licencing-scheme?answertab=votes#tab-top)我无法理解如果私钥保存在许可证服务器上并且公钥是在应用程序可执行文件中提供的，软件许可方案如何工作，反之亦然。

我正在尝试执行以下软件许可方案：

1.  用户在购买时获得一个产品 ID（基于[GUID](http://en.wikipedia.org/wiki/Globally_unique_identifier)）并在应用程序中使用它来激活它。
2.  应用程序连接到使用 RSA 公钥发回加密文本的许可证服务器。此文本（许可证）将存储在用户的硬盘上。
3.  每次应用程序启动时，它都需要使用 RSA 私钥解密此许可证，以便提取不同的参数，如产品版本、产品限制、注册到什么公司等。

如果应用程序没有私钥而是公钥，应用程序如何解密此许可证文本？

谢谢！

编辑：

1.  如果用于加密许可证的密钥仅在服务器端可用，而对公众不可用，我们可以称其为私钥吗？在这种情况下，如果一方拥有加密密钥，另一方（公众）拥有解密密钥，那么拥有解密密钥的一方能否获得加密密钥呢？担忧基于stackoverflow上的各种主题，即在给定私钥的情况下生成公钥并不难。如果您拥有私钥，那么您实际上可以同时拥有这两个密钥。
2.  这个想法是，一旦软件被激活，它就不再需要连接到许可证服务器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T14:39:22.277

应用程序应以纯文本形式存储其详细信息。

注册时，服务器应使用私钥签署这些详细信息（包括机器标识）。

每次应用程序启动时，它都应该使用公钥验证签名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T18:01:47.200

我真的不认为需要所有这些东西。

为什么不简单地在验证时建立与服务器的连接，让服务器生成一个包含您想要的所有参数的文件（甚至是纯文本），然后让服务器签署该文件并将其返回给软件？

客户端可以读取文件，然后使用现有的众多数字签名算法之一简单地验证签名。

# jquery - jQuery淡入（）不起作用

> ID：14814239
> 
> 赞同：4
> 
> 时间：2013-02-11T14:36:05.677
> 
> 标签：jquery

我有一个简单的脚本，但 fadein() 部分不起作用。虽然没有收到任何错误..

```
$('<ol/>', {
  'class': 'raw-list',
  html: items.join('')
 }).appendTo('.json').fadeIn(1000);
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T14:37:49.920

尝试先使用以下代码隐藏它：

```
$('<ol/>', {
  'class': 'raw-list',
  html: items.join('')
})
.hide()
.fadeIn(1000)
.appendTo('.json'); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-11T14:37:06.957

`fadeIn()`如果元素已经可见，则不会做任何事情。

你首先需要`hide()` 它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-01T00:44:47.870

诀窍=)

```
$('.hidden').fadeTo(300, 1); 
```

# php - $var::staticfunction() 可以，但是 $this->var::staticfunction() 不行。理由是什么？

> ID：14814244
> 
> 赞同：1
> 
> 时间：2013-02-11T14:36:21.160
> 
> 标签：php, static

在 PHP 中，只要类名是有效的对象或字符串，就可以访问静态成员或函数。这*大多是*真的。当类名字符串是对象的属性时，不能直接使用。它必须先复制到一个简单的变量中，然后才能用于访问静态成员。这是一个例子：

```
class Foo {
  protected $otherclass='Bar'; //string!

  function out(){
    $class=$this->otherclass;
    echo $class::ALIAS;  //Where everyone knows your name.
  }

  function noout_err(){
    echo $this->otherclass::ALIAS; //syntax error, unexpected '::' 
  }
}

class Bar {
  const ALIAS='Where everyone knows your name.'
} 
```

这个怪癖困扰了我一段时间。所以我一直在想：

*   这是 OOP 语言之间的常见限制吗？
*   熟悉 PHP 内部原理的人可以解释为什么`$this->classname::somefunction()`不合意的语法吗？

这并不是要引起“因为 php sux”评论的风暴。我很清楚这种语言的特点。我只是想知道除了“它只是那样成长”之外，是否还有其他原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:46:54.183

这确实是一个限制，这是有原因的：`::`范围运算符具有更高的优先级，`->`这意味着：

```
$this->otherclass::ALIAS; 
```

将被读作：

```
($this->(otherclass::ALIAS)); 
```

因此触发错误。

这实际上是 PHP[可能](http://it.cppreference.com/w/cpp/language/operator_precedence)由 C++ 继承的一个特性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:44:26.913

是的，你不能这样做，也没有明确的理由。根本没有语法，弄乱了语法，来提供这种极端的边缘情况，您已经证明了有一个简单的解决方法。

我几乎不会称其为“限制”，这当然不是“怪癖”。PHP 也不能烤面包。

真的，如果您看到代码`$this->classname::somefunction()`，您是否会立即感到直观？不。你不能这样做很好*。*

# constraints - 自动布局 - 定义应该改变哪个约束首先调整它的大小

> ID：14814251
> 
> 赞同：0
> 
> 时间：2013-02-11T14:36:40.850
> 
> 标签：constraints, autolayout

我用大于或等于和小于或等于定义了多个约束。当 superview 改变它的大小时，iOS 如何决定哪个视图将改变它的大小？

假设我有一个约束大于 10 和小于 20 的视图。我得到了约束大于 40 和小于 60 的第二个视图。

现在超级视图改变了它的大小，可用空间将增加 10 像素。我需要一种方法来定义允许首先调整哪个约束（并采用 10 像素）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:02:35.843

NSLayoutConstraint 的优先级告诉 iOS 和 OS X 首先要满足哪些约束。

如果您有一个`viewOne`想要首先扩展的视图，请使用视觉格式应用约束`@"H:[viewOne(==9999@499)]"`。这将告诉 iOS，在满足所需的约束 `10≤viewOne≤20`&后`40≤viewTwo≤60`，它应该尝试使`viewOne`9,999 像素宽，使其在`viewTwo`.

如果您不想存储幻数 9999，

```
NSNumber* maxWidthForViewOne = @(20) ;
NSLayoutConstraint* constraint = [NSLayoutConstraint constraintsWithVisualFormat:@"H:[viewOne(==asBigAsPossible@499)]"  options:0  metrics:@{@"asBigAsPossible":maxWidthForViewOne}  views:views] [0] ; 
```

我在 OS X 中测试了这些，我发现 499 (NSLayoutPriorityWindowSizeStayPut - 1) 是允许我`viewOne`通过调整窗口大小来缩小的最高优先级。由于您使用的是 iOS，因此您需要测试您喜欢的优先级行为。

# forms - 更改提交表单上的 URL

> ID：14814253
> 
> 赞同：0
> 
> 时间：2013-02-11T14:36:41.510
> 
> 标签：forms, wordpress, search, input

所以我正在尝试制作一个简单的外部弹出窗口，其中有 1 个用于类别的下拉菜单和 4 列复选框作为标签。（这是为了提供一个 wordpress 搜索引擎插件）

我为此使用常规表单提交，但最终将其作为最终 URL：

`Site.com/?category_name=VALUE&tag=TAG1&tag=TAG2&tag=TAG3`

但我希望我的网址是这样的：

`Site.com/?category_name=VALUE&tag=tag1+tag2+tag3`

谁能指出我实现这一目标的正确方向？

`CATEGORY_NAME`用于搜索特定的 WordPress 类别，并且`TAGS`是常规的帖子标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:40:48.753

你不能用复选框来做到这一点。这不是复选框的工作方式。这不是一个选择，真的。它是构建 HTML、PHP 和您的浏览器的方式。

此外，您所做的将不起作用。您已将相同的变量设置为几个不同的字段。每次设置时，都会覆盖以前的值。`?category_name=VALUE&tag=TAG1&tag=TAG2&tag=TAG3`虽然如果您要添加到脚本中，您的 URL 可能看起来像，但`var_dump($_GET);`您会看到 PHP 看到的唯一内容是最后一个 - `tag=TAG3`。

您可以通过`[]`在复选框名称中使用方括号 -- -- 来使代码正常工作。极简代码示例（仅用于演示目的）：

```
echo '<form>';
 echo '<input type="checkbox" name="tag[]" value="tag1">';
 echo '<input type="checkbox" name="tag[]" value="tag2">';
 echo '<input type="checkbox" name="tag[]" value="tag3">';
 echo '<input type="checkbox" name="tag[]" value="tag4">';
 echo '<input type="checkbox" name="tag[]" value="tag5">';
 echo '<input type="checkbox" name="tag[]" value="tag6">';
 echo '<input type="submit" value="Clickie">';
echo '</form>'; 
```

但是，您的 URL 的“标签”部分将如下所示：

```
&tag[]=tag1&tag[]=tag4&tag[]=tag6 
```

这就是复选框的工作方式。我能想到两种解决方法。

第一种是使用 Javascript 填充表单中的隐藏字段。

```
echo '<form>';
 echo '<input type="hidden" name="tag" value="">';
 echo '<input type="checkbox" value="tag1">';
 echo '<input type="checkbox" value="tag2">';
 echo '<input type="checkbox" value="tag3">';
 echo '<input type="checkbox" value="tag4">';
 echo '<input type="checkbox" value="tag5">';
 echo '<input type="checkbox" value="tag6">';
 echo '<input type="submit" value="Clickie">';
echo '</form>'; 
```

您将让您的 Javascript 监视对这些复选框的点击，并将值填充到隐藏标记字段中。为了获得您想要的 URL，您必须`name`从复选框中删除，这使得该表单完全依赖于 Javascript。如果没有 Javascript，它将无法工作。我认为这是糟糕的设计。

另一种选择是`mod_rewrite`尝试重写您的 URL，但老实说，我不知道是否`mod_rewrite`能够使用复杂的正则表达式来完成这项工作。

我不认为值得付出努力或付出代价的解决方法。我建议您使用方括号并在接收端处理数组。换句话说，如果你有，`&tag[]=tag1&tag[]=tag4&tag[]=tag6`那么这将得到一个字符串，就像你在你的 URL 中想要的那样：

```
if (isset($_GET['tag'])) {
  $tstr = implode('+',$_GET['tag']);
}
echo $tstr; 
```

您可以在搜索功能中使用它，无论您使用什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:16:50.037

这就是我所做的。我没有在我的 wordpress 中添加一个额外的功能（这在进行更深入的测试时会导致一些意外错误），我只是创建了一个 PHP 来在进一步提交之前捕获 URL。

这是它的样子：

```
 <?php

if (isset($_GET['tag'])) {
  $tstr = implode('+',$_GET['tag']);
}

$cat = ($_GET['category_name']);

header("Location: http://url.com/?category_name=$cat&tag=$tstr");

?> 

I don't know if this is correct or secure, but it works :D
Thanks for your help ! 
```

# .net - 使用 .NET 使用 JPEG 压缩创建多页 TIFF

> ID：14814254
> 
> 赞同：4
> 
> 时间：2013-02-11T14:36:42.247
> 
> 标签：.net, jpeg, gdi+, tiff

有没有办法使用 .NET 使用 JPEG 压缩创建多页 TIFF？我可以使用 LZW 压缩创建 TIFF，但文件非常大。看起来`EncoderValue`枚举（我用来设置压缩）甚至没有合适的成员。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T13:45:57.973

您可以查看**[>>这篇文章](https://stackoverflow.com/a/14877473/2060966)，**我在其中解释了如何将现有的 JPEG 包装在一个简单的多页 TIFF 容器中。

但是还有很多其他的可能性。**FreeImage.Net** *(freeimage.sourceforge.net)*是一个非常强大的库。您可以像这样创建一个简单的 JPEG 压缩 TIFF：

```
using FreeImageAPI;
// [...]
FIBITMAP image = FreeImage.Load(FREE_IMAGE_FORMAT.FIF_UNKNOWN, "filename", FREE_IMAGE_LOAD_FLAGS.DEFAULT);
FreeImage.Save(FREE_IMAGE_FORMAT.FIF_TIFF, image, "filename", FREE_IMAGE_SAVE_FLAGS.TIFF_JPEG) 
```

创建多页 TIFF 有点棘手。据我所知，多页编辑只能在硬盘上进行。（我听说在较新的版本中有另一种方法，所以也许可以尝试一下。）但是，你可以这样使用：

```
using System.IO;
using FreeImageAPI;

// [...]

public byte[] MergeTiffs(List<byte[]> tiffs)
{
    byte[] multiPageTiff = null;
    string tmpfile = "... chose any file name ...";
    MemoryStream singleStream = null;
    FIBITMAP fib = FIBITMAP.Zero;
    FIMULTIBITMAP fmb = FIMULTIBITMAP.Zero;

    using (singleStream = new MemoryStream(tiffs[0])
    {
        fib = FreeImage.LoadFromStream(singleStream);
        FreeImage.SaveEx(fib, dateiname, FREE_IMAGE_FORMAT.FIF_TIFF, FREE_IMAGE_SAVE_FLAGS.TIFF_JPEG);
        FreeImage.UnloadEx(ref fib);
    }

    fmb = FreeImage.OpenMultiBitmap(
        FREE_IMAGE_FORMAT.FIF_TIFF,
        tmpfile,
        false,
        false,
        false,
        FREE_IMAGE_LOAD_FLAGS.TIFF_JPEG);

    for (int i = 1; i < tiffs.Count; i++)
    {
        using (singleStream = new MemoryStream(tiffs[i])
        {
            fib = FreeImage.LoadFromStream(singleStream);
            FreeImage.AppendPage(fmb, fib);
        }
    }

    FreeImage.CloseMultiBitmapEx(ref fmb);
    multiPageTiff = File.ReadAllBytes(tmpfile);
    File.Delete(tmpfile);

    return file;
} 
```

除此之外，我最近发现了一种将现有 TIFF 与**LibTiff.Net** *(bitmiracle.com) 合并的简单方法，*无需更改其原始数据（因此您既不会降低质量也不会增加它们的大小）。可能有一种更简单的方法（也许你会找到一个），但我使用了以下代码（基于[此示例](http://bitmiracle.com/libtiff/help/convert-bytes-of-a-multi-strip-tiff-image-to-bytes-of-a-single-strip-one.aspx)）：

```
using System.IO
using BitMiracle.LibTiff.Classic;

// [...]

/// <summary>
/// Merges multiple TIFFs into one multi-page TIFF
/// </summary>
/// <param name="tiffs">The TIFFs' raw data (can also be multi-page)</param>
/// <returns></returns>
public static byte[] MergeTiffs(List<byte[]> tiffs)
{
    // the byteStream will contain the merged tiff's raw data
    MemoryStream byteStream = new MemoryStream();
    // create the output-TIFF (empty stream)
    using (Tiff output = Tiff.ClientOpen("InMemory", "w", byteStream, new TiffStream()))
    {
        for (short i = 0; i < tiffs.Count; i++)
        {
            // provide input-TIFF as custom TiffStream, with byteStream (output-TIFF) as output
            TiffStreamForBytes tiffStream = new TiffStreamForBytes(tiffs[i]);
            using (Tiff input = Tiff.ClientOpen("bytes", "r", null, tiffStream))
            {
                // *** now copy all the TIFF-data: ***

                // copy all directories (= all pages)
                int numberOfDirectories = input.NumberOfDirectories();
                for (short d = 0; d < numberOfDirectories; ++d)
                {
                    // set this as the current directory (to work in)
                    input.SetDirectory(d);

                    // copy all tags
                    for (ushort t = ushort.MinValue; t < ushort.MaxValue; ++t)
                    {
                        TiffTag tag = (TiffTag)t;
                        FieldValue[] tagValue = input.GetField(tag);
                        if (tagValue != null)
                            output.GetTagMethods().SetField(output, tag, tagValue);
                    }

                    // copy all strips
                    int numberOfStrips = input.NumberOfStrips();
                    int stripSize = input.StripSize();
                    for (int s = 0; s < numberOfStrips; ++s)
                    {
                        // buffer for the current strip
                        byte[] stripData = new byte[stripSize];
                        // read strip from input image (not decompressed)
                        int length = input.ReadRawStrip(s, stripData, 0, stripData.Length);
                        // write strip to output image (uncompressed)
                        output.WriteRawStrip(s, stripData, 0, length);
                    }

                    // add the new directory to output image
                    output.WriteDirectory();
                }
            }
        }
    }
    // return the new TIFF as byte array
    return byteStream.ToArray();
}

/// <summary>
/// Custom read-only stream for byte buffer that can be used
/// with Tiff.ClientOpen method.
/// </summary>
private class TiffStreamForBytes : TiffStream
{
    private byte[] m_bytes;
    private int m_position;

    public TiffStreamForBytes(byte[] bytes)
    {
        m_bytes = bytes;
        m_position = 0;
    }

    public override int Read(object clientData, byte[] buffer, int offset, int count)
    {
        if ((m_position + count) > m_bytes.Length)
            return -1;

        Buffer.BlockCopy(m_bytes, m_position, buffer, offset, count);
        m_position += count;
        return count;
    }

    public override void Write(object clientData, byte[] buffer, int offset, int count)
    {
        throw new InvalidOperationException("This stream is read-only");
    }

    public override long Seek(object clientData, long offset, SeekOrigin origin)
    {
        switch (origin)
        {
            case SeekOrigin.Begin:
                if (offset > m_bytes.Length)
                    return -1;

                m_position = (int)offset;
                return m_position;

            case SeekOrigin.Current:
                if ((offset + m_position) > m_bytes.Length)
                    return -1;

                m_position += (int)offset;
                return m_position;

            case SeekOrigin.End:
                if ((m_bytes.Length - offset) < 0)
                    return -1;

                m_position = (int)(m_bytes.Length - offset);
                return m_position;
        }

        return -1;
    }

    public override void Close(object clientData)
    {
        // nothing to do
    }

    public override long Size(object clientData)
    {
        return m_bytes.Length;
    }
} 
```

# javascript - Javascript 地理位置缓存

> ID：14814256
> 
> 赞同：1
> 
> 时间：2013-02-11T14:36:42.527
> 
> 标签：javascript, geolocation

我正在使用以下内容成功捕获用户的位置（移动浏览器）：

```
<script>
if ( navigator.geolocation ) {
navigator.geolocation.getCurrentPosition(handlePosition);
}
function handlePosition(pos) {
    //this passes lat/long to additional code
 }
</script> 
```

这可行，但通常浏览器似乎会缓存位置数据。调用此地理定位代码的页面显示了与用户位置相关的信息，因此用户可以移动（更改位置），重新加载页面，但使用之前的位置数据（显示不正确的数据）。有时页面必须刷新一次或什至两次才能使页面使用新的位置数据。

有谁知道每次执行脚本时**强制代码获取和使用“最新”位置数据的任何方法？**

FWIW，我在 iOS Safari (6.1) 中遇到问题。尚未能够在 Android 中进行测试。

感谢您的阅读和任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:46:57.513

编辑：正如 Oleksiy 在他的回答中所写，Geolocation API 现在支持这一点。您可以添加`{maximumAge: 0}`作为 的第三个选项参数`getCurrentPosition`。[如规范](https://w3c.github.io/geolocation-api/#dom-positionoptions)中所述，PositionOptions 中还有一个超时和高精度选项。

您的导航器调用将更改为以下内容：

```
navigator.geolocation.getCurrentPosition(
  handlePosition, 
  (error)=>{}, 
  {maximumAge:0}
); 
```

~~没有做不到。除了示例中的代码之外，您无法控制浏览器的地理位置。html5 地理位置 api 非常非常有限，这很痛苦。我还有一个[问题](https://stackoverflow.com/questions/10654352/test-if-html5-geolocation-permission-already-has-been-granted)，是否可以询问是否已经授予了域的许可，并且答案也是否定的。~~

问题是 api 是在浏览器本身中实现的，而这些功能没有端点。

~~您可以做的是在 js 中创建一个数组来存储以前的位置，然后再针对该数组更新视图测试以查看是否有过时的位置。~~

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-26T17:31:54.827

你现在确实有这个能力。getCurrentPosition 接受三个参数：**success**、**failure**和**options**

尝试这个：

```
<script>
if ( navigator.geolocation ) {
navigator.geolocation.getCurrentPosition(handlePosition, (error)=>{}, {maximumAge:0});
}
function handlePosition(pos) {
    //this passes lat/long to additional code
 }
</script> 
```

# ios - 动画视图之间切换的过渡

> ID：14814257
> 
> 赞同：1
> 
> 时间：2013-02-11T14:36:45.633
> 
> 标签：ios, animation, view

我目前正在阅读 ios6 编程初学者指南。直到刚才我尝试在两个视图之间来回切换动画时都很好。练习的最终目标是让每个视图看起来都在另一个视图的背面（就像一枚硬币/一张纸的侧面）。

然而，当我使用书中给出的代码时，只有一个动画被激活，但书中说代码应该适用于两者。

我已经多次检查我的代码，以确保我做对了，我无法区分我拥有的代码和书中的代码之间的区别。我知道我正在做的事情很简单（或者更有可能没有做），但我只是没有找到它的经验。

任何帮助将不胜感激。

代码：

```
- (IBAction)switchViews:(id)sender
{
[UIView beginAnimations:@"View Flip" context:nil];
[UIView setAnimationDuration:1.25];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

if (self.yellowViewController.view.superview == nil) {
    if (self.yellowViewController == nil) {
        self.yellowViewController = [[BIDYellowViewController alloc] initWithNibName:@"YellowView" bundle:nil];
    }

    // This one doesn't work
    [UIView setAnimationTransition:UIViewAnimationOptionTransitionFlipFromRight forView:self.view cache:YES];

    [self.blueViewController.view removeFromSuperview];
    [self.view insertSubview:self.yellowViewController.view atIndex:0];
}
else 
{
    if (self.blueViewController == nil) {
        self.blueViewController = [[BIDBlueViewController alloc] initWithNibName:@"BlueView" bundle:nil];
    }

    // This one works
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.view cache:YES];

    [self.yellowViewController.view removeFromSuperview];
    [self.view insertSubview:self.blueViewController.view atIndex:0];
}
[UIView commitAnimations];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:47:29.253

这是因为您使用`UIViewAnimationOptionTransitionFlipFromRight`而不是`UIViewAnimationTransitionFlipFromRight`

# javascript - 遍历正则表达式的结果并单独替换它

> ID：14814258
> 
> 赞同：2
> 
> 时间：2013-02-11T14:36:55.240
> 
> 标签：javascript

简短：我正在寻找类似 jQuery 的`.each()`正则表达式函数。

我有一个带有一些短字符串的长文本，格式为`<abcd1234>`. `abcd1234`应该包含为每个找到的字符串生成的包含`<span>`文本颜色。我发现这个函数可以这样做：[https ://stackoverflow.com/a/3426956/237312](https://stackoverflow.com/a/3426956/237312)

```
function nickFormat(text) {
            var exp = /\&lt\;(.*)\&gt\;/ig;
            name = exp.exec(text);
            return text.replace(exp, "&lt;<span style='color: #"+intToARGB(hashCode(RegExp.$1)).substr(0, 6)+"'>$1</span>&gt;");
        } 
```

这是我当前替换找到的字符串的代码，这意味着正则表达式正在工作。但并不像最初预期的那样。每个找到的字符串都用相同的颜色着色。

任何想法，如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:06:24.217

感谢 Felix Kling，我能够非常快速地解决问题。谢谢！

```
function nickFormat(text) {
    var exp = /\&lt\;(.*)\&gt\;/ig;

    function makeItSo(match) {
        return "<span style='color: #"+intToARGB(hashCode(match)).substr(0, 6)+"'>"+match+"</span>";
    }
    return text.replace(exp, makeItSo);
} 
```

# jquery - 获取选择器的根元素

> ID：14814259
> 
> 赞同：0
> 
> 时间：2013-02-11T14:36:56.810
> 
> 标签：jquery

有没有办法在选择器上获取根元素？

我注意到一个选择器，例如

```
document.getElementById("chk").checked 
```

获取复选框的属性 - 如果它发生变化，它会反映该值。

对于 jQuery 1.9.1

```
$("#chk").checked 
```

不再返回该属性，而

```
$("#chk").prop('checked'); 
```

确实返回了财产。

**我的问题是，有没有办法从选择器 jQuery 对象（例如 $('#chck') ）获取基本元素，以便 .checked 可以工作？**

请注意，我在复选框属性问题上提交了一个 jQuery 错误，因为它似乎应该可以工作，但这不是我的具体问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:39:40.057

```
$("#chk")[0].checked
$("#chk").get(0).checked 
```

ETC ...

这是预期的功能，`.checked`仅适用于本机 DOM 元素，同时`prop()`是一种 jQuery 方法。

# mysql - MySQL获取第一条和第n条记录的时间差

> ID：14814265
> 
> 赞同：1
> 
> 时间：2013-02-11T14:37:05.980
> 
> 标签：mysql

我在日志中插入了一系列记录。每个系列都由一个 id 标识。所以

```
SELECT * FROM log WHERE action_id = x ORDER by created; 
```

但我想插入第一条记录，最后一条。这些记录有一个创建的时间戳。所以我想找出第一条和最后一条记录之间的差异，以秒为单位。

**更新：**

我试过了

```
SELECT max(created) - min(created) FROM log WHERE action_id = 21 ORDER BY created; 
```

它返回 0.000000

这两者的时间差显然是几分钟。

```
max(created)    min(created)
"2013-02-11 14:30:34"   "2013-02-11 14:27:31" 
```

它存储为日期时间。引擎是 InnoDB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:45:03.163

我猜想这`created`是作为字符串存储的。

尝试这个：

```
select max(cast(created as datetime)) - min(cast(created as datetime)) 
```

如果您尝试以下操作：

```
select '2012-01-01 10:44' - '2012-01-01 10:41' 
```

您将得到一个值 0。MySQL 将字符串转换为数字，在 2012 年停止，然后取差值。

# c# - 使用datagridview更新数据库中的数据

> ID：14814271
> 
> 赞同：2
> 
> 时间：2013-02-11T14:37:17.647
> 
> 标签：c#, database-connection, oledb

我有这样的代码：

```
public int updateFriend(long id, string Firstname, string Lastname, string Nickname, DateTime Birthdate, int Age, string Gender)
    {
        OleDbConnection con = new OleDbConnection(conString());

        string query = "UPDATE FriendList SET Firstname  ='" + Firstname + "', Lastname ='" + Lastname + "',Nickname ='" + Nickname + "',Birthday ='" + Birthdate + "',Age ='" + Age + "', Gender  ='" + Gender + "' WHERE ID = " + id;

        OleDbCommand cmd = new OleDbCommand(query, con);

        con.Open();

        int rowsAffected = cmd.ExecuteNonQuery();
        con.Close();

        return (rowsAffected);
    } 
```

现在的问题是，当我单击更新按钮时，它会调用该方法`updateFriend`，然后行上会出现错误`"int rowsAffected = cmd.ExecuteNonQuery();`“说

> “没有为一个或多个必需参数提供值。”

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:45:15.677

```
string query = "UPDATE FriendList SET Firstname  ='" + Firstname + "', Lastname ='" + Lastname + "',Nickname ='" + Nickname + "',Birthday ='" + Birthdate + "',Age ='" + Age + "', Gender  ='" + Gender + "' WHERE ID = " + id; 
```

您将所有参数作为字符串传递，其中一些是 int ，一个是`DateTime`. 按照建议，您应该使用`Parameters.AddWithValue()`

```
string query = "UPDATE FriendList SET Firstname = @Firstname, Lastname = @Lastname , Nickname = @Nickname, Birthday = @Birthdate, Age = @Age, Gender = @Gender WHERE ID = @id";
SqlCommand cmd = new SqlCommand(query, con);
cmd.Parameters.AddWithValue("@Firstname", FirstName);
//add rest parameters the same way as above
cmd.Parameters.AddWithValue("@id", id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:41:55.727

Talking about on your *error message*;

> "No value given for one or more required parameters."

This message will appears probably one of your parameters is `null` or *zero-length* string. Or the reason can be misspelling of your parameters.

Check your query in your database first and look which column gives you an error.

And please, **never** add your parameters in your sql command. That may cause [SQL Injection](http://en.wikipedia.org/wiki/SQL_injection) attack. Always use [*`parameterized query`*](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html) on your queries.

Check out [`SqlParameterCollection.AddWithValue()`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue%28v=vs.85%29.aspx) method from *MSDN*.

# php - 选择随机限制并不总是有效

> ID：14814272
> 
> 赞同：0
> 
> 时间：2013-02-11T14:37:17.850
> 
> 标签：php, mysql, select, random, distinct

我从这个站点的一些帖子中得到了这个 mysql 选择，并且 99% 的时间它工作得很好，但有时它不会返回我要求的随机元素的数量，我不知道为什么。这是最近失败的示例：

```
SELECT DISTINCT movie_title
FROM movies AS r1 JOIN
     (SELECT (RAND() * (SELECT MAX(movie_id) FROM movies)) AS id2
    ) AS r2
WHERE r1.movie_id >= r2.id2 AND movie_title != "New Moon"
ORDER BY r1.movie_id ASC LIMIT 4 
```

答案是这个数组： Array([0] => After Sex,[1] => New Moon) 只有两个元素，而应该是四个。

我在我的电影网站 ( [http://www.crosstastemovies.com](http://www.crosstastemovies.com) ) 的测验部分使用它。数据库表有大约 1823 部电影。有人可以对此有所了解吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:41:55.183

It is not returning the right number because there are not enough rows. When `rand()` returns a value very close to 1, the value of `id2` is very close to the maximum value. There are not enough rows that satisfy the `where` clause, so all available are returned.

# php - MySQLi 数据库连接

> ID：14814276
> 
> 赞同：0
> 
> 时间：2013-02-11T14:37:33.897
> 
> 标签：php, class, mysqli

我有这个（来自我第一次尝试数据库类的其他人）：

```
 require_once( "declarations.php" ); 

    class Database{            
        private static $mysqli;   
        private static $dbName = '';
        private static $username = '';
        private static $password = '';   
        private static $host = 'localhost';
        private static $prefix = '';   

        public function __construct(){  
            if( self::$host & self::$username & self::$password & self::$dbName )
            {
                self::$mysqli = new mysqli( self::$host, self::$username, self::$password, self::$dbName );

                 if (self::$mysqli->connect_error) {
                die('Connect Error (' . self::$mysqli->connect_errno . ') '
                    . self::$mysqli->connect_error);
                }
            }
            else
            {
                echo "You forgot to fill in your database connection details";
            }
        }

        public function Query( $query ){
            $query = self::$mysqli->real_escape_string( $query );

            if ($query = self::$mysqli->prepare($query)) {
                $query->execute();
                $query->store_result();            

                $stmt = $query->result;        
                //$query->mysql_num_rows = $stmt->num_rows();                 
                $query->close();
                return $stmt;                   
            }
        }  

        public function Close()
        {
            self::$mysqli->close(); 
        }
    } 
```

这就是我所说的：

```
 include_once( "system/database.php" );

    $query = "SELECT * FROM app";     
    $dbr = new Database();  

    //Change this here since your method is query and not $mysqli
    while( $row = $dbr->Query( $query )->fetch_object() ){
       echo '<td>'. $row['id'] . '</td>' ;
       echo '<td>'. $row['title'] . '</td>' ;   
    }  

    Database::Close(); 
```

我`fetch_object()`在 while 循环中收到错误调用非对象上的成员函数。

有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-11T14:44:58.490

fetch_object 使用以下方法执行查询后返回的结果集：mysql_query 或使用 fetch_assoc 代替

```
$query->execute();
$result = $query->get_result();
while ($myrow = $result->fetch_assoc()) {
    //Your logic
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T16:09:19.667

好吧，您的第一次尝试导致完全无法使用的代码。
有 2 个严重故障和 1 个严重故障。

1.  正如我已经告诉过你的，做`$query = self::$mysqli->real_escape_string( $query );`是无用的，也是有害的。你必须摆脱这条线。完全和永远。
2.  准备一个没有绑定变量的查询是完全没用的。
3.  你必须检查mysql错误。

所以，至少你的 query() 函数必须是

```
public function query($query)
{
    $res = self::$mysqli->query($query);
    if (!$res)
    {
        throw new Exception(self::$mysqli->error);
    }
    return $res;
} 
```

但同样 - 这个函数**不安全**，因为它没有实现占位符来替换查询中的数据。

# html - 以负边距顶部消除相对 div 下的空间

> ID：14814277
> 
> 赞同：0
> 
> 时间：2013-02-11T14:37:34.847
> 
> 标签：html, css, margin

我有某种动画 javascript 滑块。我不希望某些项目从滑块的顶部伸出一点，而是在它们伸出包装器底部时隐藏起来，所以我制作了一个带有溢出的 div：hidden; 上面有一点额外的空间。我现在需要摆脱流程中的多余空间。

以前这不是问题，因为我只是将 div 设置为绝对，但现在我正在使我的布局流畅，我不能拥有绝对 div，因为滑块的高度是相对于文档的宽度的。有没有办法摆脱那些额外的像素？提前致谢。

[http://jsfiddle.net/ySg6f/](http://jsfiddle.net/ySg6f/) 如果有帮助，这里是实际的网站：http: [//pa3com.a3net.fr/](http://pa3com.a3net.fr/)

```
<header>
<div id="slider_wrapper">

    <div class="overflow">
        <div id="slider">

        </div>
    </div>

</div> 
```

```
header
{
    padding-top:20px;
    background-color:blue;
}
#slider_wrapper
{
    position:relative;
    background-color:green;
}
.overflow
{
    padding-top:12px;
    overflow:hidden;
}
#slider
{
    height:0;
    padding-bottom:25%;
    background-color:red;
    top:-12px;
    position:relative;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:57:45.063

```
.overflow {
 padding-top: 0;
}

#slider {
 top: -12px; /* remove this */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:58:56.407

最后通过使用负边距并在父级上添加 1px 填充来解决它。

# c - C 堆栈实现中的值变化

> ID：14814279
> 
> 赞同：1
> 
> 时间：2013-02-11T14:37:38.047
> 
> 标签：c, pointers, stack

我正在尝试在 C 中实现一个堆栈，但是每当添加新数据时，旧值都会被覆盖。这是我的代码：

```
#include <stdlib.h>

struct snode {
    int data;
    struct snode *prev;
    struct snode *next;
};

static struct snode stack;
static struct snode *stackpointer = NULL;

void push(int data) {
    if(stackpointer == NULL) {
        stack.data = data;
        stack.prev = NULL;
        stack.next = NULL;
        stackpointer = &stack;
        return;
    }

    struct snode newnode;
    newnode.data = data;
    newnode.prev = stackpointer;
    newnode.next = NULL;
    stackpointer = &newnode;
}

int pop() {
    int retdata = stackpointer->data;
    if(stackpointer->prev == NULL) {
        stackpointer = NULL; 
    }
    else {
        stackpointer = stackpointer->prev;
        stackpointer->next = NULL;
    }
    return retdata;
}

int peek() {
    return stackpointer->data;
} 
```

每当在 push 中声明一个新节点时，堆栈的所有先前值中的数据都会更改。有什么我不知道的指针会导致它们随机改变值吗？

编辑：这个新代码有效：

```
#include <stdlib.h>

struct snode {
    int data;
    struct snode *prev;
    struct snode *next;
};

static struct snode *stackpointer = NULL;

void push(int data) {
    struct snode *newnode = (struct snode*)malloc(sizeof(struct snode));
    newnode->data = data;
    newnode->prev = stackpointer;
    newnode->next = NULL;
    stackpointer = newnode;
}

int pop() {
    int retdata = stackpointer->data;
    if(stackpointer->prev != NULL) {
        stackpointer = stackpointer->prev;
        free(stackpointer->next);
    }
    else {
        free(stackpointer);
        stackpointer = NULL;
    }

    return retdata;
}

int peek() {
    return stackpointer->data;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T14:41:47.077

在`push()`函数`stackpointer`中被分配了一个局部变量的地址。函数返回`stackpointer`后将是一个悬空指针，`newnode`将不再有效。使用以下方法为堆栈动态分配新节点[`malloc()`](http://en.cppreference.com/w/c/memory/malloc)：

```
struct snode* newnode = malloc(sizeof(*newnode)); 
```

不要混合堆栈中元素的存储，因为第一次调用`push()`被`stackpointer`分配给`stack`. 要正确实现堆栈，您需要动态分配您还必须的节点[`free()`](http://en.cppreference.com/w/c/memory/free)。传递`stack`to的地址`free()`是无效的。保持堆栈的使用一致以避免复杂化：始终动态分配节点并始终释放节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:43:26.540

在 push 中，每次都需要创建一个新节点。

改变这个：

```
struct snode newnode; 
```

到：

```
struct snode *newnode = malloc(sizeof(struct snode)); 
```

然后更改`newnode.`为`newnode->`.

就目前而言，该变量`newnode`仅存在于函数内部`push`-碰巧，它永远不会被严重覆盖，或者您的问题是“为什么我的程序在我调用时会奇怪地崩溃`pop()`。只要`push`从同一函数中调用代码，它将使用堆栈上的相同位置，因此每次您将另一个项目添加到堆栈时，它都会覆盖您保存在堆栈上相同（即将“未使用”）位置的旧值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:43:16.003

您需要使用`malloc`来分配一个新节点。您只是在内部创建它`push`，下次`push`调用（或任何其他例程）时它将被破坏。

顺便说一句，您不需要`next`指针，只需`prev`.

# c++ - 分配给在 C++ 中创建的对象

> ID：14814283
> 
> 赞同：1
> 
> 时间：2013-02-11T14:37:47.967
> 
> 标签：c++, templates, operator-overloading

我正在编写一些函数来操作矢量数据。

我定义了不可复制的对象（私有复制构造函数和赋值运算符）。

然后我定义了模板化运算符 =

```
template <typename G>
inline const TMatrix &operator=(const G &gen) {
    ir_mat::Copy<G, Dimension>::start(m_data, gen);
    return *this;
} 
```

以及一些额外的运算符，如 '+'、'*'，如[本文所述](http://www.flipcode.com/archives/Faster_Vector_Math_Using_Templates.shtml)。

现在我可以将表达式的结果分配给一个对象：

```
Vector3f v1, v2, v3;
v1 = v2 + v3; 
```

为什么我不能声明一个变量并在单个语句中分配它？

```
Vector3f v1, v2;
Vector3f v3 = v1 + v2; 
```

是不是因为这个赋值试图在实例化变量之前创建一个临时对象，然后将它复制到新对象中？我可以使用我的运算符“=”来实例化新对象，而无需临时存储吗？我必须为此定义一个特殊的构造函数吗？

**更新**

我还定义了一个模板化的复制构造函数（可能是最简单的形式）：

```
template <typename G>
TMatrix(const G &data) {
    operator=(data);
} 
```

现在我也可以将 v3 实例化为：

```
Vector3f v3(v1 + v2); 
```

但是其他任务仍然没有运气：

```
Vector3f v3 = v1 + v2; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:49:29.710

这个初始化：

```
 Vector v3(v1 + v2); 
```

将调用您漂亮的模板化构造函数。

这个初始化：

```
 Vector v3 = v1 + v2; 
```

最终被翻译成这样：

```
 Vector v3(Vector(v1 + v2)); 
```

本质上，编译器尝试使用复制构造函数，并尝试找出如何将初始化程序转换为适当的类型。

选择创建一个可从随机类型中分配但不能复制分配或复制构造的类型是一个非常奇怪的选择。我看到我的假设是你这样做是为了避免临时工是正确的。除了你不这样做是因为临时变量确实很昂贵，而是因为你想构建一个稍后将被评估的表达式。大概是因为您想矢量化复杂的表达式评估。

是的，您将无法使用初始化的赋值形式。至少，我想不出办法让它发挥作用。

我的建议是以某种方式转变`Vector`为您正在构建的表达式的句柄。该句柄可以是作为输入的真实向量的句柄。或者它可能是 VectorExpression 的句柄，它是对向量进行操作的结果。

如果您不想共享拥有句柄的对象的所有权，您仍然无法实现复制分配或复制构造。但在 C++11 中，您仍然可以实现句柄的移动构造和移动分配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T14:39:54.140

使用初始化语法初始化类类型的对象`=`不使用`operator=`，它使用复制构造函数。也就是说，`Vector3f v3 = v1 + v2;`与 相同`Vector3f v3(v1 + v2);`。如果您的复制构造函数不可访问，您将无法执行此操作。

`operator=`只在已经构造的对象上调用（如`v1 = v2 + v3`），形式`T& operator=(const T&)`称为*复制赋值*。

# oracle10g - Oracle SQL 如何解决同义词和表之间的命名冲突？

> ID：14814291
> 
> 赞同：1
> 
> 时间：2013-02-11T14:38:22.983
> 
> 标签：oracle10g

我的服务器上有一个用于交易的公共同义词：但是我希望能够使用我自己的本地版本的表，以免打扰其他用户。

Oracle 的 SQL 是否以可预测的方式解决了这样的命名冲突？

换句话说，如果另一个用户创建了一个名为的公共同义词`TRANSACTION`，我这样做：

```
CREATE TABLE TRANSACTION (

ID NUMBER

); 
```

当我写

```
select * from TRANSACTION 
```

我是否可以保证 Oracle 将始终解析同义词或我的本地表？

（我知道我可以在技术上指定`schema.TRANSACTION`强制问题，但在我的情况下，这需要我修改/重建应用程序，我希望节省一些工作。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T14:50:24.513

您对名称解析的理解是正确的。Oracle 将首先在当前模式中查找具有该名称的对象。因此，如果发生冲突，它将选择当前模式中的一个对象，而不是公共同义词所引用的对象。

[http://docs.oracle.com/cd/B28359_01/server.111/b28310/general008.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28310/general008.htm)

> Oracle 数据库尝试限定 SQL 语句中引用的名称的第一部分。例如，在 scott.emp 中，scott 是第一部分。如果只有一件，那一件被认为是第一件。
> 
> 在当前模式中，数据库搜索名称与对象名称的第一部分匹配的对象。如果没有找到这样的对象，则继续执行步骤 b。
> 
> 数据库搜索与名称的第一部分匹配的公共同义词。如果没有找到，则继续执行步骤c。
> 
> 数据库搜索名称与对象名称的第一部分匹配的模式。如果它找到一个，它返回到步骤 b，现在使用名称的第二部分作为在限定模式中查找的对象。如果第二个片段与先前限定的模式中的对象不对应，或者没有第二个片段，则数据库返回错误。
> 
> 如果在步骤 c 中没有找到模式，则无法限定对象并且数据库返回错误。

**话虽如此，这是公共同义词的问题之一。拥有这样的对象会导致开发和支持的混乱。在这两种情况下，您最好通过所有者和名称引用对象**

# windows - Msbuild 通过 VS 和命令行工作，但通过 Jenkins 失败

> ID：14814294
> 
> 赞同：5
> 
> 时间：2013-02-11T14:38:25.167
> 
> 标签：windows, msbuild, jenkins

我正在尝试构建一个包含多个 C++ .vcproj 的 VS .sln。解决方案文件是使用 CMake 生成的，我已经让这部分在 Jenkins 中工作（使用 CMake builder 插件）。为了构建解决方案文件，我使用了 msbuild。我可以使用 Visual Studio 和从命令行使用以下命令构建解决方案：

```
C:\Jenkins\workspace\SonioTest>"C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe" /t:Rebuild bin/SonIO.sln 
```

这会成功构建（在 Jenkins 所在的同一台机器上）。

然而，我试图在 Jenkins 中自动化这部分构建，构建最终失败并出现几个`C1083`错误 ( `"Cannot open source file: '..\path\to\file.ext': No such file or directory`)。我已经尝试使用 Jenkins msbuild 插件和使用在终端中工作的完全相同的命令作为“执行 Windows 批处理命令”构建步骤，结果相同。

使用 Windows 批处理命令构建步骤时，我可以在日志中看到正在执行的命令：

```
C:\Jenkins\workspace\SonioTest>"C:\Windows\Microsoft.NET\Framework\v4.0.30319 msbuild.exe" /t:Rebuild bin/SonIO.sln 
```

...与从命令行工作的完全一样，*包括*工作目录。

我将 Jenkins 作为服务运行，并且我将服务登录作为我的帐户（具有管理员权限）。任何人都知道Jenkins将从哪个目录执行批处理命令？

任何想法为什么我会看到 Jenkins 和命令行之间的这种行为差异？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:52:54.670

这既是一种解决方案，也是一种解决方法，但我最终使用了，`devenv`而不是`msbuild`它工作正常。

我知道这强烈暗示这是一个环境问题，但由于在构建服务器上安装 VS 不是问题，我决定节省在 msbuild 兔子洞中花费的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:51:34.670

Without knowing much about VS build, it looks mostly like an environment setup.

My first advice would be to make sure, in Jenkins, you change directory to the same directory you ran the good command from and try it then.

Also, might want to try running Jenkins as a standalone app first.

And as a service, maybe allow service to "interact with desktop".

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T23:07:14.840

Jenkins 从代理的帐户所使用的环境与您在提示符下执行相同命令行时使用的环境不同。比较两个环境，注意区别，然后将它们添加到 Jenkins 作业中。

要在运行时获取从属设备的环境，请让它从 Windows 命令提示符执行“设置”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-05T19:33:20.860

我可能迟到了，但我仍然在 Server 2016 上的新 Jenkins 设置上遇到了这个问题。

我的解决方案是直接从 VS2017 安装中使用 MSBUILD `C:\Program Files (x86)\Microsoft Visual Studio\2017\BuildTools\MSBuild\15.0\Bin`。没有更多的错误。

# javascript - 根据另一个单选按钮的输出动态显示和隐藏单选按钮

> ID：14814298
> 
> 赞同：0
> 
> 时间：2013-02-11T14:38:29.950
> 
> 标签：javascript, jquery, ajax

我正在使用以下 HTML：

```
<div class="form">
    <input type="radio" name="type" value="100" checked="checked" />100
    <input type="radio" name="type" value="200" />200
    <input type="radio" name="type" value="300" />300
    <input type="radio" name="type" value="other" />other
</div>

<input type="radio" name="img" value="100"/> img1
<input type="radio" name="img" value="200"/> img2
<input type="radio" name="img" value="100"/> img3
<input type="radio" name="img" value="200"/> img4
<input type="radio" name="img" value="300"/> img5
<input type="radio" name="img" value="100"/> img6
<input type="radio" name="img" value="200"/> img7
<input type="radio" name="img" value="300"/> img8
<input type="radio" name="img" value="200"/> img9
<input type="radio" name="img" value="100"/> img10 
```

我想要实现的是 jQuery 显示或隐藏底部单选按钮匹配顶部单选按钮的值，即如果用户单击顶部单选按钮，则列表将根据用户检查的该按钮的值显示。我找到了许多类似的答案，但都是基于类或`div`s。没有人提到匹配值。所以我不得不发布这个。

我还用这段代码创建了一个[小提琴。](http://jsfiddle.net/fpLYV/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:49:51.770

您可以执行类似于下面的操作，但请注意，每个单选按钮的文本`img1, img2, etc`不会隐藏，因为它们不在可以与单选按钮一起选择的元素内。

```
var imageRadioButtons = $('[name="img"]');

$('[name="type"]').click(function(){
    var selectedValue = this.value;
    imageRadioButtons.show();

    imageRadioButtons.filter(function(){
        return this.value === selectedValue;
    }).hide();
}) 
```

* * *

[**演示 1**](http://jsfiddle.net/FranWahl/ZwLyf/) - 隐藏匹配的单选按钮

* * *

**编辑**

> 所以如果要隐藏它们，那么每个都应该在一个 div id 元素内？还是 div 类元素？

例如，您可以将它们包装成这样的跨度：

```
<div class="form">
    <input type="radio" name="type" value="100" checked="checked" />100
    <input type="radio" name="type" value="200" />200
    <input type="radio" name="type" value="300" />300
    <input type="radio" name="type" value="other" />other
</div>

<input type="radio" name="img" value="100"/> <span>img1</span>
<input type="radio" name="img" value="200"/> <span>img2</span>
<input type="radio" name="img" value="100"/> <span>img3</span>
<input type="radio" name="img" value="200"/> <span>img4</span>
<input type="radio" name="img" value="300"/> <span>img5</span>
<input type="radio" name="img" value="100"/> <span>img6</span>
<input type="radio" name="img" value="200"/> <span>img7</span>
<input type="radio" name="img" value="300"/> <span>img8</span>
<input type="radio" name="img" value="200"/> <span>img9</span>
<input type="radio" name="img" value="100"/> <span>img10</span> 
```

然后您可以调整脚本以始终隐藏当前输入之后的下一个 span 元素，类似于以下内容：

```
imageRadioButtons.filter(function(){
    return this.value === selectedValue;
}).hide().next('span').hide(); 
```

* * *

[**演示 2**](http://jsfiddle.net/FranWahl/4yGy3/) - 隐藏匹配的单选按钮和文本

* * *

此外，我更新了 DEMO 2 的脚本，以便在最初加载时也隐藏匹配的按钮。您可以从那里调整您需要的任何其他内容。

来自 DEMO 2 的完整脚本：

```
var typeRadioButtons = $('[name="type"]');
var imageRadioButtons = $('[name="img"]');

var hideSelected = function(selectedValue){
    imageRadioButtons.filter(function(){
        return this.value === selectedValue;
    }).hide().next('span').hide();
};

var initValue = typeRadioButtons.filter(function(){
    return this.checked;
})[0].value;

hideSelected(initValue);

typeRadioButtons.click(function(){
    var selectedValue = this.value;
    imageRadioButtons.show().next('span').show();

    hideSelected(selectedValue);
}); 
```

# c# - 在 ContainerControl C#.NET 中检测鼠标位置

> ID：14814299
> 
> 赞同：3
> 
> 时间：2013-02-11T14:38:38.917
> 
> 标签：c#, .net, mouseevent, gdi+, gdi

我正在测试以下代码：

```
protected override void OnMouseMove(MouseEventArgs e)
{
    base.OnMouseMove(e);
    Rectangle leftRect = new Rectangle(0, 0, 32, this.Height);
    if (leftRect.Contains(e.Location))
    {
        MessageBox.Show("Hello World");
    }
} 
```

这个想法是，当鼠标进入一个 32 像素宽的区域时，在容器控件的左侧，会出现一条消息（好的，在 R/L 中它会做其他事情，但现在这纯粹是测试）。

问题是当子控件填充矩形区域时，ContainerControl 不会收到 MouseMove 事件，因为它正在由子控件处理。

所以我的问题是，如何让我的 ContainerControl 接收 MouseMove 事件，即使它的子项填充相同的矩形区域？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:02:53.797

WPF 在这类事情上要好得多。我经常使用这样的功能：

```
public static List<Control> GetAllControlsRecurs(List<Control> list, 
                                                 Control parent)
{
    if (parent == null)
        return list;
    else
    {
        list.Add(parent);
    }
    foreach (Control child in parent.Controls)
    {
        GetAllControlsRecurs(list, child);
    }
    return list;
} 
```

这将返回给定父控件中所有子控件及其子控件等的列表。然后，您可以执行以下操作：

```
private void Form1_Load(object sender, EventArgs e)
{
    List<Control> ctlList = new List<Control>();
    GetAllControlsRecurs(ctlList, this);
    foreach (Control ctl in ctlList) ctl.MouseMove += Form1_MouseMove;
} 
```

您将不得不处理动态添加（和删除）的控件，`ControlAdded`但这至少应该给您一个开始。请注意，这不会在被覆盖的`OnMouseMove`方法中执行代码，而是在表单的`MouseMove`事件处理程序中执行。有许多其他解决方案可以将其构建到派生类中，但这里的重点是识别子控件并将其连接到单个事件的方法。

# c# - 在 C# 中转换日期字符串

> ID：14814306
> 
> 赞同：1
> 
> 时间：2013-02-11T14:38:58.727
> 
> 标签：c#, date, datetime, string-formatting

我有一个格式为“dd.MM.yyyy”的日期字符串（例如“01.02.2004”），并希望使用**String.Format(...)**或**DateTime.ParseExact将其转换为“yyyy-MM-dd” （...）**或其他。其实我只得到例外。所以以下代码的使用不起作用：

```
String dateString = "01.02.2004";
datestring = String.Format("{yyyy-MM-dd}", dateString); 
```

那有什么问题？有替代品 `DateTime.ParseExact(..)`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T14:40:54.130

您需要将其解析为`DateTime`，然后`ToString()`以不同的格式调用：

```
DateTime date = DateTime.ParseExact(dateString, "dd.MM.yyyy", CultureInfo.InvariantCulture);
date.ToString("yyyy-MM-dd") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T14:42:45.973

您需要先创建一个 Datetime 对象。

尝试类似：

```
DateTime t = DateTime.parse("01.02.2004");
String result = t.ToString("{yyyy-MM-dd}", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T14:42:05.723

您必须`DateTime`使用适当的将其转换为第一个`CultureInfo`：

```
String dateString = "01.02.2004";
var deCulture = System.Globalization.CultureInfo.CreateSpecificCulture("de-DE");
DateTime dt = DateTime.Parse(dateString, deCulture);
dateString = dt.ToString("yyyy-MM-dd"); 
```

[**演示**](http://ideone.com/ae5wGc)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T14:42:50.140

```
String dateString = "01.02.2004";
dateString = DateTime.ParseExact(dateString, "dd.MM.yyyy", CultureInfo.InvariantCulture)
                     .ToString("yyyy-MM-dd"); 
```

您的尝试有什么问题是：

*   使用格式字符串时，项目需要以`{0:yyyy-MM-dd}`. `0:`是必要的。
*   当您使用 string.Format() 时，变量是 a `string`，因此格式字符串`yyyy-MM-dd`在那里没有意义。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T14:43:11.383

您正在将字符串解析为 String.Format 的参数？你对它有什么期望？

你应该这样做：

```
try
{
 var date = DateTme.ParseExact("yyyy.MM.dd", dateString, CultureInfo.InvariantCulture);
 var result = date.ToString("yyyy-MM-dd");
}
catch(Exception e) { /* ... */} 
```

# html - Div 不会环绕 Firefox 中的内容

> ID：14814307
> 
> 赞同：1
> 
> 时间：2013-02-11T14:39:00.900
> 
> 标签：html, css

我无法让容器正确环绕 Firefox 中的视频。Chrome 和 IE 工作正常。这是网站：[http ://www3.carleton.ca/clubs/sissa/html5/video.html](http://www3.carleton.ca/clubs/sissa/html5/video.html)

![在此处输入图像描述](../Images/bb5ff74f30bcd039308b32db1983c443.png)

HTML：

```
<div id="video_container">
            <video id="trailers" poster="poster.jpg">
                <source src="vLast.mp4" type="video/mp4">
                <source src="vLast.webm" type="video/webm">
            </video>
            <nav>
               <div id="controls">
                    <button id="playButton">Play</button>
                    <div id="vol" onclick="showSlider()">Vol
                        <div id="containSlider"> 
                            <input type="range" id="vSlider" min="0" max="1" step="0.1" value="0.5"/>
                        </div>
                    </div>      
                    <div id="defaultBar">
                        <div id="progressBar"></div>
                    </div>

                    <button id="mute">Mute</button>
                    <button id="full" onclick="toggleFullScreen()">Full</button>
               </div> 
               <div id="playlist" class="animated fadeInRight">
                    <div class="thumb" id="tb1"><img src="TbGow.jpg" onClick="changeTrailer('vGow')"/></div>
                    <div class="thumb" id="tb2"><img src="TbLast.jpg" onClick="changeTrailer('vLast')"/></div>
                    <div class="thumb" id="tb3"><img src="TbTwo.jpg" onClick="changeTrailer('vTwo')"/></div>
               </div>
            </nav>
        </div> 
```

CSS：

```
#video_container{
    -webkit-box-flex: 1; 
    -moz-box-flex: 1;
    border:5px solid black;
    margin: 20px;
    padding: 0px;
    width:100%;
    height:100%;
    position: relative;
    background-color:white;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;   
}
#video_container video{
    width: 100%;
    height: auto;
    display: block;
    z-index: 9999;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:25:54.590

仅供参考 Mozilla Firefox 是唯一仍然不支持 flex-wrap 的浏览器。它仅支持单行 flexbox。（flex-wrap 需要多行 flexbox）。

功能 Firefox (Gecko) - 不支持 Chrome
- 21.0-webkit Internet Explorer - 10.0-moz Opera
- 完全支持 12.10 Maxthon - 完全支持 4.0

[https://developer.mozilla.org/en-US/docs/CSS/flex-wrap](https://developer.mozilla.org/en-US/docs/CSS/flex-wrap)

我目前正在寻找解决方案...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:42:32.973

好吧，那么蝙蝠侠:)

试试这个

```
<style>
    @-moz-document url-prefix() {
     #video_container{
        min-height:1px;
        max-height:1px;
      }
    }
</style> 
```

将此添加到您的 html 文档中！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-09T07:04:19.220

Try `@-moz-document url-prefix()`，这是 Gecko 布局引擎规则。文档可以在[这里](https://developer.mozilla.org/en/CSS_Reference/Mozilla_Extensions)找到。享受。

# mobile - 设置多个固定宽度

> ID：14814311
> 
> 赞同：1
> 
> 时间：2013-02-11T14:39:22.680
> 
> 标签：mobile, media-queries, viewport, fixed-width

我在使用移动设备上的媒体查询设置多个固定宽度的网站时遇到问题。

如果我的设计具有 400 像素的最小固定宽度，这比大多数智能手机都要宽。

使用元标记设置：meta name="viewport" content="width=device-width"

iOS 将以 400px 渲染页面，然后将其缩放以适应设备屏幕。*完美*。

Android 将以 400 像素（*很棒*）呈现页面，但不会缩放以适应（*该死*）。

**我如何告诉 Android 自动缩放页面以适应？**

尝试修复：

1.  我宁愿我的用户不必缩小或水平滚动。我知道您可以关闭用户缩放元数据并自动缩放页面，但重要的是用户仍然可以缩放页面，因此，我不能使用此解决方案。

2.  理想情况下，我的设计应该是流畅的，不幸的是很多元素只能在 400px 下工作，因此这（至少对于这个项目来说）是我的最小宽度。

# solr - Solr 索引器...SolrException: 错误请求

> ID：14814315
> 
> 赞同：0
> 
> 时间：2013-02-11T14:39:54.530
> 
> 标签：solr, nutch, solrj, websolr

当我启动 solrindex 时，我有一个例外， `org.apache.solr.common.SolrException: Bad Request` 这是 hadoop.log 文件内容

```
...
2013-02-11 17:01:22,079 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off
2013-02-11 17:01:22,079 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter
2013-02-11 17:01:22,222 INFO  solr.SolrMappingReader - source: content dest: content
2013-02-11 17:01:22,222 INFO  solr.SolrMappingReader - source: title dest: title
2013-02-11 17:01:22,222 INFO  solr.SolrMappingReader - source: host dest: host
2013-02-11 17:01:22,222 INFO  solr.SolrMappingReader - source: segment dest: segment
2013-02-11 17:01:22,222 INFO  solr.SolrMappingReader - source: boost dest: boost
2013-02-11 17:01:22,222 INFO  solr.SolrMappingReader - source: digest dest: digest
2013-02-11 17:01:22,222 INFO  solr.SolrMappingReader - source: tstamp dest: tstamp
2013-02-11 17:01:22,223 INFO  solr.SolrMappingReader - source: url dest: id
2013-02-11 17:01:22,223 INFO  solr.SolrMappingReader - source: url dest: url
2013-02-11 17:01:23,940 INFO  solr.SolrWriter - Indexing 250 documents
2013-02-11 17:01:23,952 INFO  solr.SolrWriter - Deleting 0 documents
2013-02-11 17:01:24,780 WARN  mapred.LocalJobRunner - job_local_0001
org.apache.solr.common.SolrException: Bad Request

Bad Request

 request: http://localhost:8080/solr/update?wt=javabin&version=2
at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:427)
at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:249)
at org.apache.solr.client.solrj.request.AbstractUpdateRequest.process(AbstractUpdateRequest.java:105)
at org.apache.nutch.indexer.solr.SolrWriter.write(SolrWriter.java:124)
at org.apache.nutch.indexer.IndexerOutputFormat$1.write(IndexerOutputFormat.java:55)
at org.apache.nutch.indexer.IndexerOutputFormat$1.write(IndexerOutputFormat.java:44)
at     org.apache.hadoop.mapred.ReduceTask$OldTrackingRecordWriter.write(ReduceTask.java:457)
at org.apache.hadoop.mapred.ReduceTask$3.collect(ReduceTask.java:497)
at org.apache.nutch.indexer.IndexerMapReduce.reduce(IndexerMapReduce.java:304)
at org.apache.nutch.indexer.IndexerMapReduce.reduce(IndexerMapReduce.java:53)
at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:519)
at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:420)
at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:260)
2013-02-11 17:01:25,330 ERROR solr.SolrIndexer - java.io.IOException: Job failed! 
```

我认为我的 schema.xml 有问题，就是这样

```
<?xml version="1.0" encoding="UTF-8" ?>
<!--
    Licensed to the Apache Software Foundation (ASF) under one or
    more contributor license agreements. See the NOTICE file
    distributed with this work for additional information regarding
    copyright ownership. The ASF licenses this file to You under the
    Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain
    a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0 Unless required by
    applicable law or agreed to in writing, software distributed
    under the License is distributed on an "AS IS" BASIS, WITHOUT
    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions
    and limitations under the License.
-->
<!--
    Description: This document contains Solr 3.1 schema definition to
    be used with Solr integration currently build into Nutch. See
    https://issues.apache.org/jira/browse/NUTCH-442
    https://issues.apache.org/jira/browse/NUTCH-699
    https://issues.apache.org/jira/browse/NUTCH-994
    https://issues.apache.org/jira/browse/NUTCH-997
    https://issues.apache.org/jira/browse/NUTCH-1058
    https://issues.apache.org/jira/browse/NUTCH-1232
    and
    http://svn.apache.org/viewvc/lucene/dev/branches/branch_3x/solr/
    example/solr/conf/schema.xml?view=markup
    for more info.
-->
<schema name="nutch" version="1.5">
<types>
    <fieldType name="string" class="solr.StrField" sortMissingLast="true"
        omitNorms="true"/> 
    <fieldType name="long" class="solr.TrieLongField" precisionStep="0"
        omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="float" class="solr.TrieFloatField" precisionStep="0"
        omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="date" class="solr.TrieDateField" precisionStep="0"
        omitNorms="true" positionIncrementGap="0"/>

    <fieldType name="text" class="solr.TextField"
        positionIncrementGap="100">
        <analyzer>
            <tokenizer class="solr.WhitespaceTokenizerFactory"/>
            <filter class="solr.StopFilterFactory"
                ignoreCase="true" words="stopwords.txt"/>
            <filter class="solr.WordDelimiterFilterFactory"
                generateWordParts="1" generateNumberParts="1"
                catenateWords="1" catenateNumbers="1" catenateAll="0"
                splitOnCaseChange="1"/>
            <filter class="solr.LowerCaseFilterFactory"/>
            <filter class="solr.EnglishPorterFilterFactory"
                protected="protwords.txt"/>
            <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
        </analyzer>
    </fieldType>
    <fieldType name="url" class="solr.TextField"
        positionIncrementGap="100">
        <analyzer>
            <tokenizer class="solr.StandardTokenizerFactory"/>
            <filter class="solr.LowerCaseFilterFactory"/>
            <filter class="solr.WordDelimiterFilterFactory"
                generateWordParts="1" generateNumberParts="1"/>
        </analyzer>
    </fieldType>
</types>
<fields>
    <field name="id" type="string" stored="true" indexed="true"/>
<!--    <field name="site" type="string" stored="false" indexed="true"/>  -->
    <!-- core fields -->
    <field name="segment" type="string" stored="true" indexed="false"/>
    <field name="digest" type="string" stored="true" indexed="false"/>
    <field name="boost" type="float" stored="true" indexed="false"/>

    <!-- fields for index-basic plugin -->
    <field name="host" type="string" stored="false" indexed="true"/>
    <field name="url" type="url" stored="true" indexed="true"
        required="true"/>
    <field name="content" type="text" stored="false" indexed="true"/>
    <field name="title" type="text" stored="true" indexed="true"/>
    <field name="cache" type="string" stored="true" indexed="false"/>
    <field name="tstamp" type="date" stored="true" indexed="false"/>

    <!-- fields for index-anchor plugin -->
    <field name="anchor" type="string" stored="true" indexed="true"
        multiValued="true"/>

    <!-- fields for index-more plugin -->
    <field name="type" type="string" stored="true" indexed="true"
        multiValued="true"/>
    <field name="contentLength" type="long" stored="true"
        indexed="false"/>
    <field name="lastModified" type="date" stored="true"
        indexed="false"/>
    <field name="date" type="date" stored="true" indexed="true"/>

    <!-- fields for languageidentifier plugin -->
    <field name="lang" type="string" stored="true" indexed="true"/>

    <!-- fields for subcollection plugin -->
    <field name="subcollection" type="string" stored="true"
        indexed="true" multiValued="true"/>

    <!-- fields for feed plugin (tag is also used by microformats-reltag)-->
    <field name="author" type="string" stored="true" indexed="true"/>
    <field name="tag" type="string" stored="true" indexed="true" multiValued="true"/>
    <field name="feed" type="string" stored="true" indexed="true"/>
    <field name="publishedDate" type="date" stored="true"
        indexed="true"/>
    <field name="updatedDate" type="date" stored="true"
        indexed="true"/>

    <!-- fields for creativecommons plugin -->
    <field name="cc" type="string" stored="true" indexed="true"
        multiValued="true"/>

<!--    <field name="Metatags" type="string" stored="true" indexed="true" multiValued="true"/> -->

</fields>
<uniqueKey>id</uniqueKey>
<defaultSearchField>content</defaultSearchField>
<solrQueryParser defaultOperator="OR"/> 
```

我将 schema.xml 从 nutch/conf 文件夹处理到 solr/conf，现在我使用 nutch 1.6 solr 3.6.2 和 apache tomcat 6.0.36 ......我想我会帮助理解这个问题。我在 apahce 日志文件中没有任何错误... olso 我使用 solr/dist/ 文件夹中的 solr-solrj-3.6.2.jar 更改 nutch/lib 文件夹中的 solr-solrj-3.4.jar 文件...

我可以显示我的 solrindex-mapping.xml

```
<mapping>
<!-- Simple mapping of fields created by Nutch IndexingFilters
     to fields defined (and expected) in Solr schema.xml.

         Any fields in NutchDocument that match a name defined
         in field/@source will be renamed to the corresponding
         field/@dest.
         Additionally, if a field name (before mapping) matches
         a copyField/@source then its values will be copied to 
         the corresponding copyField/@dest.

         uniqueKey has the same meaning as in Solr schema.xml
         and defaults to "id" if not defined.
     -->
<fields>
    <field dest="content" source="content"/>
    <field dest="title" source="title"/>
    <field dest="host" source="host"/>
    <field dest="segment" source="segment"/>
    <field dest="boost" source="boost"/>
    <field dest="digest" source="digest"/>
    <field dest="tstamp" source="tstamp"/>
    <field dest="id" source="url"/>
    <copyField source="url" dest="url"/>
</fields>
<uniqueKey>id</uniqueKey>
</mapping> 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-02T17:16:29.470

使用 Nutch config(nutch-default.xml) 设置临时目录的路径：

```
<property>
 <name>mapred.temp.dir</name>
 <value>/tmp</value>
 <description>A shared directory for temporary files.</description>
</property> 
```

**参考**

*   [Nutch 配置文件](http://wiki.apache.org/nutch/NutchConfigurationFiles)

*   [MapReduce 默认配置](http://hadoop.apache.org/docs/r1.0.4/mapred-default.html)

*   [配置 Tomcat 的文件和 Webapp 路径](http://wiki.apache.org/nutch/GettingNutchRunningWithDebian#Configure_Tomcat.27s_File_and_Webapp_Paths)

*   [为爬网指定临时/工作目录](https://issues.apache.org/jira/browse/NUTCH-159)

*   [控制 java.io.tmpdir 的环境变量？](https://stackoverflow.com/questions/1924136/1113772)

# html - 我不明白为什么这个 CSS 样式是错误的

> ID：14814319
> 
> 赞同：-3
> 
> 时间：2013-02-11T14:40:06.710
> 
> 标签：html, css

我尝试用红色打印一些文本，但它不起作用。我不明白为什么。

`<div style="error-style">This is an error message</div>`

Css 文件：

`.error-style { color: #ff0000; }`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T14:41:17.847

试试这个

```
<div class="error-style">This is an error message</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T14:41:03.323

`style="..."`必须是实际的 CSS 代码。你想要的是`class="error-style"`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T14:41:05.767

你把风格而不是阶级。别担心，它会发生；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T14:46:36.327

哎呀……你打错字了……

`<div class="error-style">...`

你需要的可能是一个好的快递。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T14:43:06.297

或者你可以这样做：

HTML：

```
<div id="error-style">This is an error message</div> 
```

CSS：

```
#error-style { color: #ff0000; } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-11T16:31:55.573

使用#ff0000 中的#f00

查看此链接以获取更多信息[http://www.w3.org/TR/css3-color/#rgb-color](http://www.w3.org/TR/css3-color/#rgb-color)

# java - java.lang.NoClassDefFoundError - org.apache.commons, tomcat 7

> ID：14814330
> 
> 赞同：-1
> 
> 时间：2013-02-11T14:40:39.107
> 
> 标签：java, class, jsp, servlets, file-upload

I am trying to run a servlet fileupload example in tomcat 7 which is based on org.apache.commons.fileupload

i complied servlet class file in CMD (Win 7 64bit) by using this command.

```
 C:\Users\Preet\Desktop>javac -cp .;E:/servlet-api.jar;"C:\Program Files\Apache S
oftware Foundation\Tomcat 7.0\webapps\sim\WEB-INF\lib\commons-fileupload-1.2.2.j
ar" "C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\sim\WEB-INF\
classes\SimpleServlets.java" 
```

Everything was fine.

After compiling i tried my example i got a error which is

```
exception

javax.servlet.ServletException: Servlet execution threw an exception
root cause

java.lang.NoClassDefFoundError: javax/servlet/http/HttpServletRequest
    org.apache.commons.fileupload.servlet.ServletFileUpload.isMultipartContent(ServletFileUpload.java:68)
    SimpleServlets.doPost(SimpleServlets.java:21)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 
```

then at last googling, found few solution and i followed them one by one.

1.Made a lib folder in WEB-INF and copied commons-fileupload-1.2.2 and commons-io-2.2. But no luck.

2.Copied commons-fileupload-1.2.2 and commons-io-2.2 in tomcat/lib. But no luck.

3.Add commons-fileupload-1.2.2 and commons-io-2.2 to classpaath but no luck.

Please tell me what is wrong.

My code

```
import org.apache.commons.fileupload.servlet.ServletFileUpload;
import org.apache.commons.fileupload.FileItemFactory;
import org.apache.commons.fileupload.FileUploadException;
import org.apache.commons.fileupload.FileItem;
import org.apache.commons.fileupload.disk.DiskFileItemFactory;

import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.ServletException;
import java.io.IOException;
import java.io.File;
import java.util.List;
import java.util.Iterator;

public class SimpleServlets extends HttpServlet {
    private static final long serialVersionUID = -3208409086358916855L;

    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        boolean isMultipart = ServletFileUpload.isMultipartContent(request);

        if (isMultipart) {
            FileItemFactory factory = new DiskFileItemFactory();
            ServletFileUpload upload = new ServletFileUpload(factory);

            try {
                List items = upload.parseRequest(request);
                Iterator iterator = items.iterator();
                while (iterator.hasNext()) {
                    FileItem item = (FileItem) iterator.next();

                    if (!item.isFormField()) {
                        String fileName = item.getName();

                        String root = getServletContext().getRealPath("/");
                        File path = new File(root + "/uploads");
                        if (!path.exists()) {
                            boolean status = path.mkdirs();
                        }

                        File uploadedFile = new File(path + "/" + fileName);
                        System.out.println(uploadedFile.getAbsolutePath());
                        item.write(uploadedFile);
                    }
                }
            } catch (FileUploadException e) {
                e.printStackTrace();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:43:27.613

您缺少`javax.servlet.http.HttpServletRequest`servlet-api.jar 中存在的 。这就是您需要包含在部署的解决方案中的那个。

查看[findjar.com](http://findjar.com/class/javax/servlet/http/HttpServletRequest.html)，它会告诉您哪些 jar 包含给定的类。它不能帮助您解决所需的版本号，但它会为您指明正确的方向。

# sql - MS SQL：将条目计数为多列中的一个

> ID：14814332
> 
> 赞同：1
> 
> 时间：2013-02-11T14:40:47.520
> 
> 标签：sql, count, multiple-columns

我尝试计算一个值在任一列中出现的次数。如果该值在同一行的两个列中，则应仅计为一个。

```
 |   a     |    b 
########################
1    | henrik  | hans
2    | anne    | henrik
3    | peter   | finn
4    | henrik  | henrik
5    | hans    | anne 
```

'henrik' 的计数应该是 3。我尝试计数和分组，但没有任何成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:42:36.117

```
select count(*)
from   table
where  a = 'henrik' or b = 'henrik' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T14:46:12.990

试试这个：

```
SELECT ab, COUNT(DISTINCT id) AS 'Count'
FROM
(
    SELECT id, a AS ab FROM table1
    UNION ALL
    SELECT id, b       FROM table1
) AS T
GROUP BY  ab; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/68a34/2)。

这会给你：

```
|     AB | COUNT |
------------------
|   anne |     2 |
|   finn |     1 |
|   hans |     2 |
| henrik |     3 |
|  peter |     1 | 
```

# java - Set DocumentFilter on JOptionPane

> ID：14814336
> 
> 赞同：2
> 
> 时间：2013-02-11T14:40:57.140
> 
> 标签：java, swing, jtextfield, joptionpane, documentfilter

I'm using:

```
String s = JOptionPane.showInputDialog(...); 
```

to get a response back from the user to a question; the dialog is set up to display a text field for the response. I'd like to limit the characters allowed in the response to alphanumeric and '_' only. Is it possible to install a DocumentFilter on the text field without implementing my own custom dialog from scratch?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T15:59:21.507

理论上可以访问 JOptionPane 的自动创建的文本字段，但恕我直言，这是错误的方式。

这是更好的解决方案：JOptionPane 有一个隐藏的特性：它也接受 Swing 组件作为消息。因此，您需要创建一个带有标签和文本字段的面板（使用 DocumentFilter）并将其传递给确认对话框。确认后，您可以从文本字段中读取文本。

这是示例：

```
JPanel p = new JPanel(new FlowLayout());
JTextField fld = new JTextField(10);
// set document filter for 'fld' here
p.add(new JLabel("Enter text: "));
p.add(fld);
int val = JOptionPane.showConfirmDialog(null, p, "Test", JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE, null);
if (JOptionPane.OK_OPTION == val) {
  System.out.println("Text: "  + fld.getText());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T15:55:55.747

不确定如何直接将 DocumentFilter 添加到文本字段文档。

有关不同的方法，请参阅[停止自动关闭对话框。](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#stayup)

# gwt - 更改 GWT 面板方向

> ID：14814340
> 
> 赞同：2
> 
> 时间：2013-02-11T14:41:01.443
> 
> 标签：gwt, orientation

我目前正在为我的 GWT 应用程序编写移动界面。我只是使用标准 GWT 库这样做。我想知道是否有办法告诉面板/小部件以横向模式对齐。我正在寻找的功能是让用户通过手机侧面与应用程序进行交互，这样我就可以使用比它高的屏幕了！

我实际上并不真正关心方向的变化。出于我的目的，我只希望我的应用程序仅用于横向模式。因此，如果用户将其加载并按住手机肖像，则该应用程序将出现在侧面。我真正需要的是一种让我的主要小部件容器处于横向的方式。纵向和横向之间的实际变化应该对我的界面没有影响。

有谁知道如何做到这一点？我不是 GWT/css 方面的专家，但它看起来很简单！

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T03:53:26.727

是的，这很简单，GWT 团队提供了一个示例。[您可以从这里](http://code.google.com/p/google-web-toolkit/downloads/detail?name=gwt-2.5.1-rc1.zip&can=2&q=)下载并提取他们的示例 mobilewebapp 。

可以浏览相关代码@ **[WindowBasedOrientationHelper.java](http://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/mobilewebapp/src/main/java/com/google/gwt/sample/ui/client/WindowBasedOrientationHelper.java)**

**WindowBasedOrientationHelper**实现了 OrientationHelper。

**注意：** GWT 提供了使用高度和宽度计算的方向概念，并将其应用于**平板电脑**和**移动设备**。

**编辑**- 在非浏览器模式下强制 GWT 应用程序的方向更改 - [mgwt - 以编程方式更改方向](https://stackoverflow.com/questions/13655279/mgwt-orientation-change-programatically)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:02:36.770

是的 。

我们可以更改设置面板天气的模式， `Portrait` 或者`Landscape` 使用

[定向助手](http://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/mobilewebapp/src/main/com/google/gwt/sample/mobilewebapp/client/ui/OrientationHelper.java?r=10163)

在那里您可以找到`isPortrait`() ..etc 之类的方法...

干杯:)

# android - Android translate animation

> ID：14814352
> 
> 赞同：2
> 
> 时间：2013-02-11T14:41:46.180
> 
> 标签：android, translate-animation

I have read many articles about android tranlsation animation. And I know that only one way to use `LayoutParams()` but I need to animate five buttons. I have create example that can aminate those buttons but my problem is that buttons don't have focus. How I can use `LayoutParams()` for those buttons? here sample code:

```
private AnimationSet animate(final Button button, long fromXValue,
        final long toXValue, long fromYDelta, final long toYValue,
        long startOffset){...}

float angle = 222.2f;
            int angle2 = 136;
            long x1 = Math.round((mRadius * Math.cos(angle)));
            long y1 = Math.round((mRadius * Math.sin(angle)));

            long x2 = (int) (mRadius * Math.cos(angle2));
            long y2 = (int) (mRadius * Math.sin(angle2));

            if (isShown && isFinished) {
                animationSet1 = animate(button2, 0, 0, mRadius, 0, 400);
                animationSet2 = animate(button3, x1, 0, y1, 0, 300);
                animationSet3 = animate(button4, -mRadius, 0, 0, 0, 200);
                animationSet4 = animate(button5, x2, 0, y2, 0, 100);
                animationSet5 = animate(button6, 0, 0, -mRadius, 0, 0);
                isShown = false;
            } else if (!isShown && isFinished) {
                animationSet1 = animate(button2, 0, 0, 0, mRadius, 0);
                animationSet2 = animate(button3, 0, x1, 0, y1, 100);
                animationSet3 = animate(button4, 0, -mRadius, 0, 0, 200);
                animationSet4 = animate(button5, 0, x2, 0, y2, 300);
                animationSet5 = animate(button6, 0, 0, 0, -mRadius, 400);
                isShown = true;
            } 
```

Image shows how it should looks like ![image](../Images/8b16ceb551f79747e26dd024255f2230.png)

EDITED I found solution using `LayoutParams()` that work almost ok. Here sample:

```
 private void animate(final Button button, long fromXValue,
        final long toXValue, long fromYDelta, final long toYValue,
        long startOffset) {
    AnimationSet animationSet = new AnimationSet(false);
    TranslateAnimation translateAnimation = new TranslateAnimation(
            fromXValue, toXValue, fromYDelta, toYValue);
    RotateAnimation rotateAnimation = null;
    int dp = getPixelsFromDp(20);
    if (!isShown) {
        rotateAnimation = new RotateAnimation(-180, 0, dp, dp);
    } else {
        rotateAnimation = new RotateAnimation(0, -180, dp, dp);
    }

    animationSet.addAnimation(rotateAnimation);
    animationSet.addAnimation(translateAnimation);
    animationSet.setDuration(100);
    // animationSet.setFillAfter(true);
    // animationSet.setFillEnabled(true);
    animationSet.setStartOffset(startOffset);
    animationSet.setAnimationListener(new AnimationListener() {

        @Override
        public void onAnimationStart(Animation animation) {
            isFinished = false;
        }

        @Override
        public void onAnimationRepeat(Animation animation) {

        }

        @Override
        public void onAnimationEnd(Animation animation) {
            isFinished = true;
            Log.i("animation", "animation");
            RelativeLayout.LayoutParams params = (LayoutParams) button
                    .getLayoutParams();
            params.rightMargin -= toXValue;
            params.topMargin += toYValue;

            button.setLayoutParams(params);

        }
    });
    button.startAnimation(animationSet);
} 
```

Buttons have focus. But remained one bad effect: during animation buttons are shown twice. The impression that buttons place on the right placed and after that shows animation again.

# linq - Having a little trouble converting this SQL script to LINQ

> ID：14814354
> 
> 赞同：0
> 
> 时间：2013-02-11T14:41:48.200
> 
> 标签：linq

Having a little trouble converting this SQL script to linq. The "fn_Split_t" function simply splits a comma separated value. The part that is confusing me is the group by there as that seems to throw off everything that follows it.

```
 declare @count int
    select @count = COUNT(*) from  dbo.fn_Split_t(@portfolios)
    select 
         cc.CustodianCommentId
        ,cc.[Message]
        ,Symbol = NULL
        ,cc.DateStamp
        ,cc.AppUser
        ,PositionDate = @date
        ,cc.[Status]
        ,cc.Category
        ,cc.[Group]
    from dbo.CustodianComment cc
    join dbo.CustodianCommentPortfolio ccp on ccp.CustodianCommentId = cc.CustodianCommentId
    join dbo.CustodianPortfolio cp on ccp.CustodianPorfolioId = cp.CustodianPortfolioId
    join dbo.fn_Split_t(@portfolios) s on s.items = cp.PortfolioCode
    where  cp.PositionDate = @date 
    group by cc.CustodianCommentId,  cc.[Message], cc.DateStamp, cc.AppUser, cc.[Status], cc.Category, cc.[Group]
    having count(cc.CustodianCommentId) = @count
    order by cc.DateStamp desc 
```

Attempt number one resulted in the following:

```
from c in Context.Comments
join pc in Context.PortfolioComments on c.CommentId equals pc.CommentId
join p in Context.Portfolios on pc.PortfolioId equals p.PortfolioId
where portfolios.Contains(p.PortfolioCode)
&& p.PositionDate == EntityFunctions.TruncateTime(date)
group c by c.CommentId into g
where g.Count() > portfolios.Count()
select new
{
   CommentId = c.CommentId,

   Message = c.Message,
   DateStamp = c.DateStamp,
   AppUser = c.AppUser,
   PositionDate = p.PositionDate,
   Status = c.Status,
   Category = c.Category,
   CategoryId = c.CategoryId,
   Group = c.Group
} 
```

However this doesn't work because it says c in the anonymous object is not in scope. portfolios by the way is the same csv string that would have been passed to the @portfolios in the SQL script. I'm am kinda stuck on this one right now so any help would be greatly appreciated! Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:29:53.947

```
 string[] portfoliosArray = portfolios.Split(',', StringSplitOptions.RemoveEmptyEntries);

 from ... in ...
    where portoliosArray.Contains(p.PortfolioCode)
    select ... 
```

当投资组合代码列表包含空格或其他空格时，您可能需要修剪条目：

```
 string[] portfoliosArray = portfolios.Split(',', StringSplitOptions.RemoveEmptyEntries)
       .Select(s => s.Trim()).Where(s => !string.IsNullOrEmpty(s)).ToArray(); 
```

从原始 SQL 中读取，您可能需要：

```
 where portfoliosArray.All(p => c.PortFolios.PortfolioCode) 
```

或者：

```
 where c.Portfolios.All(p => portfoliosArray.Contains(p.Portfolio.Code)) 
```

虽然我不完全确定你的要求。

# javascript - 重定向/隐藏某些 HTML 是用户在移动设备上吗？

> ID：14814359
> 
> 赞同：1
> 
> 时间：2013-02-11T14:42:01.803
> 
> 标签：javascript, jquery, html, css

我一直在我的网站上工作并对其进行最后润色，以便我可以在我即将毕业后开始找工作时向雇主展示它。我建立了一个使用视差滚动的“关于”部分......问题是，它在移动设备上的任何容量都不起作用。至少不好。这是我所指的：[http ://www.jordanmorgan.net/about.html](http://www.jordanmorgan.net/about.html)

我想做的是，如果它们在宽度小于 900 像素或任何数量的设备上，只需将它们全部废弃。我宁愿只显示一个传统的关于我的页面。那么我怎么能写一些 javascript 来确定他们正在使用什么设备，并显示不同的 HTML 或在需要时一起转到不同的页面（如果它们在所述设备上）。

任何关于如何最好地解决问题的建议都会很好，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:47:32.787

我今天实际上一直在研究这个，我想出了以下功能......

```
function isMobile() {
    return (typeof window.orientation !== 'undefined');
} 
```

这通过方向是否可以改变来确定设备是否是移动的（在桌面设备上不会发生）。

这对我来说更可取，因为这意味着我不必担心用户代理值在某些设备上被更改，并且我不必在新浏览器出现时返回并添加它们。

此外，现在许多手持设备的屏幕分辨率都非常高，因此您也不能依赖屏幕尺寸。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T14:45:11.050

您可以使用 JavaScript 将访问者引至另一个 URL。

```
 <script type="text/javascript">

            if( navigator.userAgent.match(/(android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile)/i) )
            {
            document.location.replace("/mobile/");
            }

    </script> 
```

您还可以进行[响应式网页设计](http://en.wikipedia.org/wiki/Responsive_web_design)

这将是您的用户和 SEO 的最佳解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:56:38.280

```
mobileDeviceCheck: function(system) {
    if(system) {
        if(navigator.userAgent.match(system)) {
            return true;
        } else {
            return false;
        };
    } else {
        if((navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i)) || (navigator.userAgent.match(/iPad/i)) || (navigator.userAgent.match(/Android/i))) {
            return true;
        } else {
            return false;
        };
    };
} 
```

通用功能

# javascript - How can I decrypt AES CBC Mode in Hex String?

> ID：14814361
> 
> 赞同：0
> 
> 时间：2013-02-11T14:42:14.133
> 
> 标签：javascript, aes, cryptojs

My task is to decrypt AES-128 in CBC Mode as I already have to encrypted hex string and the key (also in hex). I have tried a simple code like:

```
function doDecrypt(){
    var encryptedData = "1d4c76364618b6efce62258353f89810"
    var key = "11112222333344445555666677778888"; 

    encryptedData = CryptoJS.enc.Hex.parse(encryptedData);
    key = CryptoJS.enc.Hex.parse(key);

        var decrypted = CryptoJS.AES.decrypt(encryptedData, key);
    alert(CryptoJS.enc.Hex.stringify(decrypted));
} 
```

The result I get is just a blank word array (in "decrpyted"), can anyone point out that where did i do wrong please?

do I need an additional information such as iv, salt or not?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:49:17.497

“CBC 模式下的 AES-128”不是数据格式。没有通用的方法可以将加密数据连同所需的元数据一起写入。你需要知道你得到了什么以及它是如何产生的。然后你可以在大多数情况下弄清楚如何用 CryptoJS 实现相同的功能。特别是，您需要了解以下内容：

*   什么算法？“AES-128”是模棱两可的。它可能意味着“具有 128 位密钥大小的 AES”，也可能意味着“具有 128 块大小和其他密钥大小的 AES”。
*   什么密钥大小（见上文）
*   什么模式？（你已经回答了这个问题：它是 CBC。）
*   什么是填充？最常见的是 PKCS#7，但可能没有填充。（对于 CBC 模式，几乎可以肯定是 PKCS#7。）
*   什么是静脉注射？*CBC总是*有静脉注射。有时该 IV 被错误地设置为 NULL（这使得 CBC 不太安全）。IV 可能是从密码以某种方式生成的（这就是 OpenSSL 的工作原理）。
*   您是否有好的密钥、不安全的密钥或密码。一个好的密钥是一系列与密钥大小相同的随机字节。不安全的密钥是指将密码视为密钥（通过将人工键入的字母复制到密钥缓冲区中）。这是非常不安全的，但很常见。
*   如果您有正确的密码，那么使用什么 KDF 和参数将其转换为密钥？例如，他们是否使用了 OpenSSL KDF 或 PBKDF2 或 bcrypt 或 scrypt？
*   是否有任何其他元数据，例如 HMAC？（需要 HMAC 来保护 AES-CBC。没有它，攻击者有时可以修改密文以解密为所需的明文。）

当你有这些答案时，你就可以弄清楚如何用 CryptoJS 来实现它。

# ember.js - Ember 路由器：异步模型（承诺？）

> ID：14814365
> 
> 赞同：7
> 
> 时间：2013-02-11T14:42:19.327
> 
> 标签：ember.js, ember-router

[这是关于新的 1.0.0-pre.4+ 路由器。]

我想从 Ember Route 的`model`方法返回一条需要异步回调才能加载的记录，例如因为它需要我们加载多个（嵌套）模型。最好的方法是什么？

* * *

下面是一个假设的博客应用程序的示例代码，它说明了这个问题：

```
App.Router.map ->
  @resource 'filteredArticles', path: '/:filter'

App.FilteredArticlesRoute = Ember.Route.extend
  model: (params) ->
    blog = App.Blog.find(1) # get the user's Blog singleton
    property = switch params.filter
      when 'published' then 'publishedArticles'
      when 'draft' then 'drafts'
      when 'all' then 'articles'
    # Return the list of articles from the `blog` record.
    # But `blog` hasn't necessarily finished loading :(
    blog.get(property) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T14:54:44.170

我正在将[Travis CI](https://travis-ci.org)重写为最新的 ember 版本，我遇到了同样的问题 - 我们通过 slug（例如`emberjs/ember.js`）获取存储库，这不是主键。我的解决方案涉及使用`Ember.ProxyObject`.

当有人像 一样进入路径`/emberjs/ember.js`时，参数将如下所示：

```
{ owner: 'emberjs', name: 'ember.js` } 
```

因此 slug 将等于`emberjs/ember.js`。

有了这些信息，我创建了简单的 Ember 对象，它只保留`slug`和`isLoaded`属性：

```
content = Ember.Object.create slug: slug, isLoaded: false 
```

然后我用这个对象作为内容创建一个代理：

代理 = Ember.ObjectProxy.create（内容：内容）

现在我可以使用 slug 从服务器加载记录并将代理作为模型返回。当我从服务器获取记录时，我只需将代理内容设置为实际记录。

完整的解决方案在这里：

```
deserialize: (params) ->
  slug = "#{params.owner}/#{params.name}"
  content = Ember.Object.create slug: slug, isLoaded: false
  proxy = Ember.ObjectProxy.create(content: content)

  repos = Travis.Repo.bySlug(slug)

  observer = ->
    if repos.get 'isLoaded'
      repos.removeObserver 'isLoaded', observer
      proxy.set 'content', repos.objectAt(0)

  if repos.length
    proxy.set('content', repos[0])
  else
    repos.addObserver 'isLoaded', observer

  proxy 
```

你也可以看看[github上的其余代码](https://github.com/travis-ci/travis-web/blob/5245b7f/assets/scripts/app/routes.coffee#L472-L489)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:44:57.037

您如何在模型本身中添加一个观察者，在模型的 isLoaded 状态上然后调用`blog.get(property)`

```
blogReady: function() {
  if(this.get('isLoaded') {
     // switch logic
  }
}.observes('isLoaded') 
```

# javascript - What is a Finite State Machine and What is it Used For?

> ID：14814367
> 
> 赞同：18
> 
> 时间：2013-02-11T14:42:29.063
> 
> 标签：javascript, state-machine

Recently, I've begun doing some research into Finite State Machines in JavaScript and I even [found a library](http://codeincomplete.com/posts/2013/1/26/javascript_state_machine_v2_2_0/) that makes them easier to implement. While I think I've grasped the idea that a state machine is used for tracking and changing the "state" of an object (e.g., 'ready', 'complete', 'inactive', etc.,), I don't think I fully understand the practical implications of them. Could someone please help by clarifying the following:

*   What *exactly* is a finite state machine [or is it just called a state machine? I've heard it referred to both ways]?
*   What are some practical uses for finite state machines (in JavaScript)?
*   When would I *not* want to use an finite state machine?
*   What books, articles, tutorials, etc., offer a more in-depth look at finite state machines (in JavaScript)?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-11T14:54:59.327

有限状态机是一个抽象概念。因此，状态机的概念与任何特定语言都是正交的。如果您[查看维基百科](http://en.wikipedia.org/wiki/Finite-state_machine)，它会说“是用于设计计算机程序和时序逻辑电路的计算数学模型”。

这意味着 FSM 通常用作计算机科学家用来解决学科问题的数学概念，例如“可以计算 xyz 吗？”

根据您的问题和您的链接，我认为您的意思是询问不同的状态图（或状态图）。创建状态图时，您将程序划分为一系列状态，以及在这些状态中可能发生的事件。例如，您的程序可能处于“EditingForm”状态，收到“doSave”事件，然后进入“Saving”状态，收到“Save Complete”事件，然后返回“Viewing”状态。

这种抽象非常有用，因为它允许程序员在概念上组织什么时候应该发生的事情，如果正确实施，可以产生更清晰和更有条理的代码。这反过来会导致更少的错误。根据实现，状态图可以通过仅处理为状态定义的事件来防止意外影响——例如，“查看”可能没有定义“保存”事件，因此如果程序在“查看”状态任何保存都是没有意义的，因为这应该只发生在“编辑”状态。

如果您查看您链接到的框架的概述，您会注意到有一堆处理程序可用于挂钩进入状态、离开状态、发生的操作等。这允许您实际执行与状态/动作。例如，在进入“编辑”状态时，您可能会将表单呈现给用户并启用保存按钮。进入“保存”状态时，您可能会禁用该按钮并发出保存请求。收到“SaveComplete”事件后，您可能会转换到“正在查看”状态，删除表单并显示其他内容。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-11T15:05:18.243

> 什么是有限状态机？

这是一种声明事件和在它们之间转换的副作用的方式。

> 有限状态机有哪些实际用途？

而不是这样的代码：

```
function decide()
{
  if(mouseButtonIsDown && mouseIsMoving && mouseCoordinatesAreWithin(0, 0, 100, 100) && thePixelIsRed) {
    clearBuffers();
    startPlaying();
    cursorBecomeHand();
  }
  else if(!mouseButtonIsDown && !mouseIsMoving && mouseCoordinatesAreWithin(0, 0, 100, 100) && thePixelIsRed) {

  }
  // more ifs
} 
```

您只保留几个状态并将您的事件分解为函数，定义在哪种状态下会发生什么。

```
function drag_started() {
 switch(your_state) {
   case "within_box":
    clearBuffers();
    cursorBecomeHand();
    your_state= "playing";
    startPlaying();
    break;
 } 
```

}

这导致状态和事件的分离，这意味着更少的回归和更多的可维护性。

> 我什么时候不想使用有限状态机？

在这一点上回答自己。如果您只有一个状态，请不要使用状态机。

> 哪些书籍、文章、教程等可以更深入地了解有限状态机（在 JavaScript 中）？

针对学术界，我建议阅读 jquery 插件的源代码。例如在[jquery ui 源代码中查看 _mouseMove 和 _mouseUp](http://code.jquery.com/ui/1.10.0/jquery-ui.js)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T14:57:12.803

它通常用于语言解析器的扫描器和词法分析器。根据某些语法规则创建并分析源代码中的每个标记。

基本上，您在这里检查当前状态以查看下一个字符或标记是否有意义以及它们应该如何组织。

# regex - 用于查找 3 个或更多事件的正则表达式

> ID：14814374
> 
> 赞同：3
> 
> 时间：2013-02-11T14:42:47.630
> 
> 标签：regex

是否可以使用正则表达式在字符串中匹配超过 1 个字符的任何重复子字符串的 3 次或更多次出现？

例如：

该字符串`ABCD ABC AB ACD DE`具有`AB`3 次或更多次子字符串。

字母 D 也出现了 3 次，但它只有一个字符，所以这是不匹配的。

我认为这超出了正则表达式的限制，但如果那里有一些天才，我会提出同样的问题。

我正在尝试做的是通过用一个字符替换重复的字符序列来减小加密查询字符串的大小，但是字符串需要附加（或前置）一个“图例”以指示已减少的内容。

例如：

该字符串`ABCD ABC AB ACD DE`将更改为类似的`.CD .C . ACD DE`内容，并且需要添加一些内容以便知道 . 现在代表 AB。

就像是`.AB-`

其中`-`充当终结者。所以替换小于 3 实际上会增加整个字符串的大小。

我使用的是 Classic ASP，但我对 C# 解决方案非常满意。然后我可以将其粘贴在 dll 中并以这种方式使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T14:51:22.470

由于正则表达式在字符串中的贪婪和字符消耗，这里有很多限制。也就是说，您将只能匹配最能满足正则表达式贪婪的一个结果

```
(..+).*\1.*\1 
```

上面捕获至少两个字符，如果相同的子字符串稍后存在两次，则将匹配。这适用于

```
ABCD ABC AB ACD DE
ABCD ABCD AB ABCD DE 
```

但是在后一种情况下，只有“ABCD”得到匹配；AB没有。

除非这对您来说足够好，否则我建议使用正则表达式以外的解决方案，例如用空格分割单词并检查每个单词。它可能最终也会比正则表达式更有效。

# sql - How can I find the dependencies of a multiple objects in sql databases?

> ID：14814375
> 
> 赞同：0
> 
> 时间：2013-02-11T14:42:48.137
> 
> 标签：sql, sql-server, sql-server-2008, tsql

`sp_depends` will provide information for all dependent objects on a particular objects

But it is working for only single object , giving information about single object.

I want the information about multiple object,

> How can I achieve it using sp_depend or any other way is there?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:52:08.927

You want `sys.sql_expression_dependencies`. This how you get the list of all the dependencies.

Here is an example of how I use it:

```
 select sed.referenced_entity_name, sed.referenced_database_name,
        OBJECT_NAME(referencing_id) as ObjectName
 from sys.sql_expression_dependencies sed 
```

# wpf - WPF Datagrid Browse Button Issue

> ID：14814378
> 
> 赞同：0
> 
> 时间：2013-02-11T14:42:51.733
> 
> 标签：wpf, wpf-controls, wpfdatagrid, wpftoolkit

We have WPF application, In which we use DataGrid on one form. Our requirement is that In One column Of that Datagrid there will be onr Button, After clicking it will ask for browse file, & it will take path of that file. Afterward that path will set to textBlock which replaced that same button. So What need to be done? Currently we are able to get path, but how to show TextBlock after selecting path from Browsing.

```
 <toolkit:DataGridTemplateColumn Header="Attachment Copy Of Invoice" Width="180" >
                <toolkit:DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock x:Name="Attach" Uid="Ata" Text="{Binding   Path=Attachment, UpdateSourceTrigger=PropertyChanged}" />
                    </DataTemplate>
                </toolkit:DataGridTemplateColumn.CellTemplate>
                <toolkit:DataGridTemplateColumn.CellEditingTemplate>
                    <DataTemplate>
                        <Button Name="Click" Click="Click_Click"  ></Button>
                    </DataTemplate>
                </toolkit:DataGridTemplateColumn.CellEditingTemplate>
            </toolkit:DataGridTemplateColumn> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:48:50.847

首先，您不应该以这种方式处理 Button_Click。您应该`ICommand`在 ViewModel 中放置一个并将 Button 绑定到该命令。

其次，在文本块中显示新文本所需要做的就是更新`Attachment` 您将其绑定到的属性：

```
<toolkit:DataGridTemplateColumn.CellEditingTemplate>
    <DataTemplate>
        <Button Command="{Binding MyCommand}"/>
    </DataTemplate>
</toolkit:DataGridTemplateColumn.CellEditingTemplate> 
```

视图模型：

```
public class MyViewModel
{
    public DelegateCommand MyCommand {get;set;}

    public MyViewModel()
    {
        MyCommand = new DelegateCommand(ExecuteMyCommand);
    }

    private void ExecuteMyCommand(object parameter)
    {
        Attachment = WhateverYouWantToPlacethere;
    }
} 
```

# c# - WCF 错误“尝试序列化参数时出错...”

> ID：14814379
> 
> 赞同：7
> 
> 时间：2013-02-11T14:43:02.233
> 
> 标签：c#, wcf, web-services, serialization

我的服务适用于其他方法，但是当我尝试使用更复杂的集合调用方法时出现错误（来自 Service Trace Viewer）

'尝试序列化参数[http://tempuri.org/:GetDataEventSetResult](http://tempuri.org/:GetDataEventSetResult)时出错。InnerException 消息是 'Type 'MimosaServerLib.DAInt' 与数据合同名称 'DAInt: [http://schemas.datacontract.org/2004/07/MimosaServerLib](http://schemas.datacontract.org/2004/07/MimosaServerLib) ' 不是预期的......'

对我看到的具有相同错误的问题的答案涉及更改类定义以关闭“ProxyCreationEnabled”，但我正在使用的类（`DataEventSet`，`DAInt`）来自使用我一直使用的 xsd 工具自动生成的文件给定的。即我不应该改变它。

我创建了`DataEventSet`暴露的对象，如下所示：

```
 private DataEventSet CreateDataEventSet()
    {
        DataEventSet aDataEventSet = new DataEventSet();
        DataEvent[] dataEvents = new DataEvent[2];
        DAInt aDAInt = new DAInt();
            aDAInt.id = 100100100;
            aDAInt.value = 1;
            dataEvents[0] = aDAInt;
        DADataSeq aDADataSeq = new DADataSeq();
            aDADataSeq.id = 200100100;
            double[] vals = new double[2];
                vals[0] = 5;
                vals[1] = 44;
            aDADataSeq.values = vals;
            double[] vals2 = new double[2];
                vals2[0] = 1;
                vals2[1] = 1;
            aDADataSeq.xAxisDeltas = vals2;
            aDADataSeq.xAxisStart = 0;
            dataEvents[1] = aDADataSeq;
        aDataEventSet.id = 0;
        Site aSite = new Site();
            aSite.category = SITE_CATEGORY.SITE_SPECIFIC;
        aDataEventSet.site = aSite;
        OsacbmTime aTime = new OsacbmTime();
            aTime.tick_time = 12313246;
            aTime.time = "2007-09-20T14:46:04.123";
            aTime.time_type = OsacbmTimeType.OSACBM_TIME_MIMOSA;
        aDataEventSet.time = aTime;
        aDataEventSet.dataEvents = dataEvents;

        return aDataEventSet;
    } 
```

编辑：的类定义`DataEventSet`

```
//This source code was auto-generated by xsd

[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "2.0.50727.42")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(Namespace="http://www.mimosa.org/OSACBMV3-1l")]
[System.Xml.Serialization.XmlRootAttribute(Namespace="http://www.mimosa.org/OSACBMV3-1l", IsNullable=false)]
public partial class DataEventSet {

private bool alertStatusField;

private bool alertStatusFieldSpecified;

private DataEvent[] dataEventsField;

private ulong idField;

private Site siteField;

private OsacbmTime timeField;

/// <remarks/>
[System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
public bool alertStatus {
    get {
        return this.alertStatusField;
    }
    set {
        this.alertStatusField = value;
    }
}

/// <remarks/>
[System.Xml.Serialization.XmlIgnoreAttribute()]
public bool alertStatusSpecified {
    get {
        return this.alertStatusFieldSpecified;
    }
    set {
        this.alertStatusFieldSpecified = value;
    }
}

/// <remarks/>
[System.Xml.Serialization.XmlElementAttribute("dataEvents", Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
public DataEvent[] dataEvents {
    get {
        return this.dataEventsField;
    }
    set {
        this.dataEventsField = value;
    }
}

/// <remarks/>
[System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
public ulong id {
    get {
        return this.idField;
    }
    set {
        this.idField = value;
    }
}

/// <remarks/>
[System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
public Site site {
    get {
        return this.siteField;
    }
    set {
        this.siteField = value;
    }
}

/// <remarks/>
[System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
public OsacbmTime time {
    get {
        return this.timeField;
    }
    set {
        this.timeField = value;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T15:20:50.080

我认为您需要将`KnownType(typeof(DAInt))`属性添加到`DataEventSet`类中，因为您以多态方式使用它。我通常将我对生成代码的更改添加到一个名为 DataEventSet.xsd.nongenerated.cs 的新文件中。这就是生成的代码将类创建为部分类的原因。

在 DataEventSet.xsd.nongenerated.cs 中，您将拥有如下内容：

```
[KnownType(typeof(DAInt))]
public partial class DataEventSet {
} 
```

如果这不起作用，那么您可以随时尝试更改合同以使用.`XmlSerializer`而不是`DataContractSerializer`. 这应该很好用，因为它使用由 xsd.exe 创建的 Xml 属性。

[您可以通过将XmlSerializerFormatter](http://msdn.microsoft.com/en-us/library/system.servicemodel.xmlserializerformatattribute.aspx)属性添加到服务协定来指定运行时使用 XmlSerializer 。

# php - 将 PHP 数组输出到无序列表中

> ID：14814393
> 
> 赞同：7
> 
> 时间：2013-02-11T14:43:30.387
> 
> 标签：php

php新手：我有一个简单的数组：

```
$people = array('Joe','Jane','Mike'); 
```

如何将其输出到列表中？

```
<ul>
 <li>Joe</li>
 <li>Jane</li>
 <li>Mike</li>
</ul> 
```

任何帮助或方向将不胜感激？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-11T14:46:42.910

您可以使用[`implode()`](http://php.net/implode)和打印列表：

```
echo '<ul>';
echo '<li>' . implode( '</li><li>', $people) . '</li>';
echo '</ul>'; 
```

请注意，这将为空列表打印一个空`<li>`- 您可以添加一个签入以确保在生成任何输出之前数组不为空（任何循环都需要它，因此您不会打印空`<ul></ul>`）。

```
if( count( $people) > 0) {
    echo '<ul>';
    echo '<li>' . implode( '</li><li>', $people) . '</li>';
    echo '</ul>';
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-11T14:45:02.940

尝试：

```
echo '<ul>';
foreach($people as $p){
 echo '<li>'.$p.'</li>';
}
echo '</ul>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:45:18.303

尝试这个：

```
echo "<ul>";
foreach(people as $person){
  echo "<li>". $person ."</li>";
}
echo "</ul>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T14:45:44.100

您需要使用循环将数组数据输出为文本。

PHP中有多个循环：

### 为了

For 将迭代 $i （可以是不同的变量和与迭代不同的变化）并且将在条件不再为真时结束。

```
$people = array('Joe','Jane','Mike');
for($i=0; $i<count($people); $i++) {  //end when $i is larger than amount of people
    echo "  <li>{$people[$i]}</li>\n";
} 
```

### 前锋

对于无序数组非常有用 - 此循环将为您提供数组中的所有值作为您想要的变量：

```
$people = array('Joe','Jane','Mike');
foreach($people as $human) {  //end when $i is larger than amount of people
    echo "  <li>$human</li>\n";
} 
```

### 尽管

与 FOR 一样，在满足条件时循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T14:45:49.410

```
<?php

echo "<ul>";

foreach(array("test", "test2", "test3") as $string)) {
    echo "<li>".$string."</li>"
}

echo "<ul>";

?> 
```

# php - 使用终端，我如何让 OS X 使用 MAMPs 版本的 PHP

> ID：14814396
> 
> 赞同：0
> 
> 时间：2013-02-11T14:43:42.317
> 
> 标签：php, macos, yii, terminal, mamp

我目前正在学习 Yii 框架，我昨天运行的教程之一要求我测试项目的数据库连接。

细节在这里并不太重要，但基本上当我运行 shell 并输入命令时，它会抛出如下错误：

```
server:trackstar charlieryan$ protected/yiic shell 
```

Yii Interactive Tool v1.1 (基于 Yii v1.1.13) 请输入“help”寻求帮助。输入“exit”退出。

> > echo Yii::app()->db->connectionString; PHP 警告：PDO::__construct(): [2002] /Applications/MAMP/htdocs/trackstar/yii/framework/ 中没有这样的文件或目录（试图通过 unix:///var/mysql/mysql.sock 连接） db/CDbConnection.php 在 /Applications/MAMP/htdocs/trackstar/yii/framework/ 中的第 423 行出现异常 'CDbException' 和消息 'CDbConnection failed to open the DB connection: SQLSTATE[HY000] [2002] No such file or directory' db/CDbConnection.php:381 堆栈跟踪：

据我了解，这是因为正在使用 Mac OS X 自己的 PHP 版本，它不支持 MySQL PDO 驱动程序，但 MAMP 自己的版本支持。

当我执行“which php”命令时，它返回“/usr/bin/php”，这是不正确的版本。如何将此更改为默认为 MAMP 版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:13:02.963

> 当我执行“which php”命令时，它返回“/usr/bin/php”，这是不正确的版本。如何将此更改为默认为 MAMP 版本？

您需要将 MAMP 版本添加到您的路径或使用完整路径调用它。我不确定 MAMP 的 php 二进制文件在哪里，但可以说它在`/Applications/MAMP/bin`. 因此，在这种情况下，您需要将该路径添加到您的`.profile`：

```
vi ~/.profile
# if there is a PATH=... line add the mamp path in front of all the others
PATH=/Applications/MAMP/bin:/existing/paths/if/any:$PATH 
```

然后关闭终端或运行命令：

`source ~/.profile`

这将重新加载您的个人资料。现在，如果你这样做`which php`，它应该首先找到 MAMP 版本。同样，我不知道这是 MAMP bin 目录的正确路径，因此您需要验证并使用正确的路径。

# php - 保存推文而不是回显/列出项目

> ID：14814406
> 
> 赞同：0
> 
> 时间：2013-02-11T14:44:13.387
> 
> 标签：php, database, twitter, echo

我正在使用开源 twitter.class.php 在 Twitter 上查询/搜索特定术语。

我不想回应一切。我想将输出保存到数据库。

如何替换回声并将每条记录保存到数据库中？

我不知道如何破解 getTweets($termt, 100);

100 使其一次获得 100 条推文。

```
require('twitter.class.php');
$twitter = new twitter_class();
echo $twitter->getTweets($termt, 100); 
```

注意：我不知道如何使用数组。请帮帮我。

谢谢你。

这是我的 Twitter.class.php

```
function twitter_class()
{
    $this->realNamePattern = '/\((.*?)\)/';
    $this->searchURL = 'http://search.twitter.com/search.atom?rpp=500&lang=en&q=';

    $this->intervalNames   = array('second', 'minute', 'hour', 'day', 'week', 'month', 'year');
    $this->intervalSeconds = array( 1,        60,       3600,   86400, 604800, 2630880, 31570560);

    $this->badWords = array('somebadword', 'anotherbadword');
}

function getTweets($q, $limit=500)
{
    $output = '';

    // get the seach result
    $ch= curl_init($this->searchURL . urlencode($q));

    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
    $response = curl_exec($ch);

    if ($response !== FALSE)
    {
        $xml = simplexml_load_string($response);

        $output = '';
        $tweets = 0;

        for($i=0; $i<count($xml->entry); $i++)
        {
            $crtEntry = $xml->entry[$i];
            $account  = $crtEntry->author->uri;
            $image    = $crtEntry->link[1]->attributes()->href;
            $tweet    = $crtEntry->content;

            // skip tweets containing banned words
            $foundBadWord = false;
            foreach ($this->badWords as $badWord)
            {
                if(stristr($tweet, $badWord) !== FALSE)
                {
                    $foundBadWord = true;
                    break;
                }
            }

            $tweet = str_replace('<a href=', '<a target="_blank" href=', $tweet);

            // skip this tweet containing a banned word
            if ($foundBadWord)
                continue;

            // don't process any more tweets if at the limit
            if ($tweets==$limit)
                break;
            $tweets++;

            // name is in this format "acountname (Real Name)"
            preg_match($this->realNamePattern, $crtEntry->author->name, $matches);
            $name = $matches[1];

            // get the time passed between now and the time of tweet, don't allow for negative
            // (future) values that may have occured if server time is wrong
            $time = 'just now';
            $secondsPassed = time() - strtotime($crtEntry->published);

            if ($secondsPassed>0)
            {
                // see what interval are we in
                for($j = count($this->intervalSeconds)-1; ($j >= 0); $j--)
                {
                    $crtIntervalName = $this->intervalNames[$j];
                    $crtInterval = $this->intervalSeconds[$j];

                    if ($secondsPassed >= $crtInterval)
                    {
                        $value = floor($secondsPassed / $crtInterval);
                        if ($value > 1)
                            $crtIntervalName .= 's';

                        $time = $value . ' ' . $crtIntervalName . ' ago';

                        break;
                    }
                }
            }

            $output .= '
            <div class="tweet">
                <div class="avatar">
                    <a href="' . $account . '" target="_blank"><img src="' . $image .'"></a>
                </div>
                <div class="message">
                    <span class="author"><a href="' . $account . '"  target="_blank">' . $name . '</a></span>: ' . 
                    $tweet . 
                    '<span class="time"> - ' . $time . '</span>
                </div>
            </div>';
        }
    }
    else
        $output = '<div class="tweet"><span class="error">' . curl_error($ch) . '</span></div>';

    curl_close($ch);
    return $output;
} 
```

}

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:49:43.073

您需要使用循环和 DOM 库来解析该函数​​的输出，更具体地说是推文本身，它嵌套在几个 div/span 中。

然后，您可以为循环的每次迭代执行 INSERT INTO 语句。

# android - 在开发 Web 服务时我们可以使用哪种技术？

> ID：14814413
> 
> 赞同：0
> 
> 时间：2013-02-11T14:44:28.897
> 
> 标签：android, wcf, web-services

我想知道是否有一种技术可以代替另一种技术来为 Android 应用程序开发 Web 服务。

我将使用 Java Server Faces 技术开发一个 Android 应用程序和一个网站。

我和我的朋友想创建一个 Web 服务，Android 应用程序将使用它来访问我们 SQL Server 数据库中的数据。

我计划使用 Windows Communication Foundation 技术开发此 Web 服务，因为它对我来说是最简单的方法。但是关于表演，这是个好主意吗？我应该使用其他技术来创建我的 Web 服务吗？我们计划开发也将使用我们的 Web 服务的 IOS 和 Windows Phone 应用程序。

谢谢回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:53:28.160

当您正在研究开发多个应用程序的大范围时，采用开源方法更为明智。我对你的建议是，如果你的 web 服务是 PHP 的小规模服务，或者你也可以使用 Java。如果您以 RESTful 方式开发 Web 服务，那么与 Android、iOS、WP7/8 等不同平台集成会容易得多。

由于您对使用 WCF 进行开发感兴趣，因此可以使用 WCF 开发 RESTfull Web 服务，请参考[http://msdn.microsoft.com/en-us/magazine/dd315413.aspx](http://msdn.microsoft.com/en-us/magazine/dd315413.aspx)

# linux - 如何为openvt重定向stderr

> ID：14814414
> 
> 赞同：0
> 
> 时间：2013-02-11T14:44:32.957
> 
> 标签：linux, bash, tty

我必须在特定的 tty 上启动我的 TextUI 守护程序重生。为此，我从脚本启动它，如下所示`$set_tty $launch_app`：

*   `set_tty="openvt -c1 -s -w"`,
*   `launch_app="my_daemon 2>'$HOME'/logfile"`

通过这种方式，我启动了看起来像 的命令`openvt -c1 -s -w my_daemon 2>'$HOME'/logfile`，该命令仅从`openvt`自身重定向到指定的日志文件，而不是从我的守护进程重定向到指定的日志文件。

它应该如何重定向`openvt`'被调用者stderr？

我尝试使用功能：

```
go () { my_daemon 2>"$HOME"/logfile; }
openvt -c1 -s -w 
```

它不起作用，opentty 立即返回控制权，什么也没有。

我试过`exec 2>>"$HOME"/logfile`

我尝试使用该功能启动一个单独的脚本。该脚本无法通过 openvt 运行，但如果我使用相同的参数手动启动它，则运行正常。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:17:25.717

一个可能的答案可能是一个包装外壳脚本，其内容将负责生成您的守护程序，并重定向`stderr`到您选择的日志文件。

```
[anew@bucket ~]$ cat test.sh 
#!/bin/bash
echo "Testing openvt" > /tmp/openvt-example

[anew@bucket ~]$ sudo openvt -c7 -s -w /home/anew/test.sh
[anew@bucket ~]$ cat /tmp/openvt-example
Testing openvt
[anew@bucket ~]$ 
```

# jquery - 动画淡化链接的代码

> ID：14814416
> 
> 赞同：-1
> 
> 时间：2013-02-11T14:44:35.700
> 
> 标签：jquery, fade

**编辑**：在评论中回答 - 我如何在评论中投票给答案？谢谢！

我一直试图实现这一点无济于事 - 我不知道出了什么问题 - 它在 jsfiddle 中完美运行，但在我的实际 html 代码中却没有......我认为这与我如何实现它有关。如果这有点初级，我很抱歉，但我对 jQuery 很陌生。这是 HTML 代码（包括 jQuery 代码片段）：

```
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="s3Slider.js"></script>

</head>
<body>
<script>
$(document).ready(function(){

$('a').mouseenter(function(){
    $(this).animate({
        color: '#ff0000'
    }, 1000);
}).mouseout(function(){
    $(this).animate({
        color: '#000000'
    }, 1000);
});

});
</script>

<a href = "http://google.com" class = "homeLink">Google</a>

</body>
</html> 
```

非常感谢任何反馈、意见和建议！巴乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:02:00.083

**在您的代码中包含彩色动画 JQuery UI**并尝试相同...

它会起作用的

```
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script> 
```

小提琴：http: [//jsfiddle.net/RYh7U/63/](http://jsfiddle.net/RYh7U/63/)

参考：http: [//jqueryui.com/animate/](http://jqueryui.com/animate/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:54:25.083

您需要 jQuery Color 插件来为颜色设置动画 -[在此处](https://github.com/jquery/jquery-color/)获取副本。记得在主 jQuery 库之后包含它。

或者，如果您希望它完全出现和消失，也许只是动画不透明度而不是颜色：

```
$('a').mouseenter(function(){
    $(this).animate({
        opacity: '1'
    }, 1000);
}).mouseout(function(){
    $(this).animate({
        opacity: '0'
    }, 1000);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T14:56:04.333

如果你想让文字褪色......使用不透明度......

```
$(document).ready(function(){

   $('a').mouseenter(function() {
     $(this).animate({ opacity : '0.5' }, 1000);
   }).mouseout(function() {
     $(this).animate({ opacity: '1'}, 1000);
   });
}); 
```

# asp.net - 在 Git 上安装 Umbraco

> ID：14814418
> 
> 赞同：1
> 
> 时间：2013-02-11T14:44:41.453
> 
> 标签：asp.net, git, github, umbraco

我有一个关于 Umbraco 和 Git 的问题。我们必须和 2 人一起在 Umbraco 上工作，我们想使用 Git。我使用 GitHub for Windows 将我的文件推送到我们的 github 存储库。

我们只是将 umbraco 文件夹复制到我们的存储库？还是我们必须删除 DLL 或 .... ？有人有关于 Umbraco 和 Git 的教程吗？

提前致谢！尼尔斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:41:16.040

我通常不会将 CMS 文件和 bin 文件添加到 Git。我只添加代码文件 liek .aspx / .cs 。/.js/.cshtml 等

添加或不添加文件更多的是个人喜好。如果您不添加它们，您的同事需要自己进行 Umbraco 的安装（或文件复制）。但是，如果您添加大部分 CMS 文件，您的存储库会增长很多，但您的同事只能从 git 中提取，并且应该有一个几乎即时的工作环境。无论哪种方式，这取决于您的个人喜好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T09:27:54.943

这取决于您如何设置 CMS 以及您打算如何扩展它。如果您只是将 CMS 作为独立网站进行编辑，换句话说，您没有使用 Visual Studio 来通过其他项目来补充 CMS，那么将几乎整个 CMS 结构提交到存储库应该是完全安全的。

但是，您始终可以“忽略”文件和文件夹，例如“app_data/umbraco.config”、“app_data/preview/”和“app_data/temp/”。

我使用 Visual Studio 并将我的网站文件夹转换为带有 csproj 文件的 VS MVC 应用程序。我还将删除所有 DLL 并将它们放在存储库主干根目录中的单独“库”文件夹中。然后，我会将引用添加回 MVC 应用程序。这有几个好处：

*   应用程序变得可编译 - 允许在编译时检查/更新依赖项目和引用；

*   CI 集成更好，例如 TeamCity 可以编译站点并检查引用、单元测试等；

*   图书馆可以有一个中心位置，因此很容易被其他项目引用

*   您可以随时查看解决方案使用的所有库的快照；

*   如果您“忽略”网站的 bin 文件夹，则在多个用户独立构建网站时不会发生冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-29T08:30:22.187

如果您使用的是正确的`.gitignore`文件，则在提交代码时无需删除文件。

根据您的用例，您可以使用[GitHub gitignore 集合中的](https://github.com/github/gitignore)[VisualStudio](https://github.com/github/gitignore/blob/master/VisualStudio.gitignore)和[Umbraco](https://github.com/github/gitignore/blob/master/Umbraco.gitignore)文件。只需将两个文件（按相应顺序）组合为存储库根目录中的文件。`.gitignore`

另外，我会使用[NuGet 设置方法](https://our.umbraco.org/documentation/Getting-Started/Setup/Install/install-umbraco-with-nuget)，因此升级应该是一个简单的包更新（请参阅[说明](https://our.umbraco.org/documentation/Getting-Started/Setup/Upgrading/general#are-you-using-nuget)）。并且不要忘记[版本特定的升级说明](https://our.umbraco.org/documentation/Getting-Started/Setup/Upgrading/version-specific)。

# apache - 如何在 Linux 服务器中使 URL 不区分大小写

> ID：14814419
> 
> 赞同：19
> 
> 时间：2013-02-11T14:44:46.690
> 
> 标签：apache, .htaccess, mod-rewrite, mod-speling

我正在开发一个部署在 Linux 服务器上的网站。我对此有一些小的改动。我有文件夹`read`。要求是，如果我输入 URL ，或者`localhost:80/tom/Read`它需要导航到文件夹内部。`../READ``/read``read.php``read`

我在根目录下创建了一个文件 .htaccess 。[通过查看此处提到](https://forums.digitalpoint.com/threads/how-do-i-make-linux-server-urls-case-insensitive.1790511/)的页面，在文件中放置以下提到的代码

```
RewriteEngine On
RewriteBase /tom/

RewriteMap  lc int:tolower
RewriteCond %{REQUEST_URI} [A-Z]
RewriteRule (.*) ${lc:$1} [R=301,L]

RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L]

RewriteRule ![A-Z] - [S=26]
RewriteRule ^(.*)(A)(.*)$ $1a$3 [N,R=301]
RewriteRule ^(.*)(B)(.*)$ $1b$3 [N,R=301]
RewriteRule ^(.*)(C)(.*)$ $1c$3 [N,R=301]
RewriteRule ^(.*)(D)(.*)$ $1d$3 [N,R=301]
RewriteRule ^(.*)(E)(.*)$ $1e$3 [N,R=301]
RewriteRule ^(.*)(F)(.*)$ $1f$3 [N,R=301]
RewriteRule ^(.*)(G)(.*)$ $1g$3 [N,R=301]
RewriteRule ^(.*)(H)(.*)$ $1h$3 [N,R=301]
RewriteRule ^(.*)(I)(.*)$ $1i$3 [N,R=301]
RewriteRule ^(.*)(J)(.*)$ $1j$3 [N,R=301]
RewriteRule ^(.*)(K)(.*)$ $1k$3 [N,R=301]
RewriteRule ^(.*)(L)(.*)$ $1l$3 [N,R=301]
RewriteRule ^(.*)(M)(.*)$ $1m$3 [N,R=301]
RewriteRule ^(.*)(N)(.*)$ $1n$3 [N,R=301]
RewriteRule ^(.*)(O)(.*)$ $1o$3 [N,R=301]
RewriteRule ^(.*)(P)(.*)$ $1p$3 [N,R=301]
RewriteRule ^(.*)(Q)(.*)$ $1q$3 [N,R=301]
RewriteRule ^(.*)(R)(.*)$ $1r$3 [N,R=301]
RewriteRule ^(.*)(S)(.*)$ $1s$3 [N,R=301]
RewriteRule ^(.*)(T)(.*)$ $1t$3 [N,R=301]
RewriteRule ^(.*)(U)(.*)$ $1u$3 [N,R=301]
RewriteRule ^(.*)(V)(.*)$ $1v$3 [N,R=301]
RewriteRule ^(.*)(W)(.*)$ $1w$3 [N,R=301]
RewriteRule ^(.*)(X)(.*)$ $1x$3 [N,R=301]
RewriteRule ^(.*)(Y)(.*)$ $1y$3 [N,R=301]
RewriteRule ^(.*)(Z)(.*)$ $1z$3 [N,R=301] 
```

但它不起作用。

我是 Linux 环境的新手。我不知道 mod_speling。那是一个文件吗？它将位于 Linux 服务器的哪个位置？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-11T14:53:11.607

您可以使用[mod_speling](http://httpd.apache.org/docs/2.2/mod/mod_speling.html)模块轻松让 apache 网络服务器忽略大小写，该模块是标准 apache 发行版的一部分：

```
CheckSpelling On
CheckCaseOnly On 
```

`read`重新启动 httpd 后，您可以访问`Read`或`READ`或`read`。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-02-12T07:27:12.990

嗨，我终于得到了解决方案。将下面的代码放在`/etc/httpd/conf/httpd.conf`.

```
LoadModule speling_module modules/mod_speling.so

<IfModule mod_speling.c>
  CheckSpelling On
  CheckCaseOnly On
</IfModule> 
```

然后重启httpd：

```
sudo service httpd restart 
```

最后验证它是否已启用：

```
sudo httpd -M | grep speling 
```

那应该会产生`speling_module (shared)`

谢谢大家的帮助。。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-24T11:55:16.873

首先安装拼写模块。然后包含**`LoadModule speling_module modules/mod_speling.so`**在 httpd.conf 文件中，然后包含

```
**`<IfModule mod_speling.c>
     CheckSpelling On
     CheckCaseOnly On
</IfModule>`**
```

**在 httpd.conf 中，然后使用**service httpd restart**命令重新启动 httpd 服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-17T15:08:06.013

嗨，不确定这是否有帮助，但这是我使用过的简单工作，它使用一个非常基本的 php 页面，但它适用于我需要它的网站。

将此代码放在 htaccess 文件中

```
 AddType application/x-httpd-php .html .htm
 ErrorDocument 404 /404.php 
```

然后我创建了一个带有以下内容的php文件..

```
 <?php
 $aurl = $_SERVER['REQUEST_URI'];
 $lurl = strtolower($aurl);

 if($aurl != $lurl){
header('location:'.$lurl);
 } else {
header('location:/404.html');
 }
 ?> 
```

基本上它获取引用 url -> 存储为 $aurl

然后将其设为小写 -> 存储为 $lurl

如果它们不匹配，则尝试显示小写 url ($lurl)

如果失败，则页面不存在，引用 url 现在是相同的（ $lurl == $aurl ），因此它会重定向到正确的 404 页面或可以显示一些额外的代码。**

# c# - Windows 上基于 Gtk 的 Mono.WebBrowser

> ID：14814421
> 
> 赞同：11
> 
> 时间：2013-02-11T14:44:53.590
> 
> 标签：c#, mono, webkit, gtk

我正在尝试提出在 Windows 上使用 Gtk 使用 Mono.WebBrowser 的最简单示例。Windows.Forms 版本工作正常（如果您不指定 Platform.Gtk，则为默认版本），但我需要集成到现有的 Gtk 跨平台应用程序中。

这是一个简单的例子：

```
public static void Main (string[] args)
{
    Gtk.Application.Init ();
    Gtk.Window win = new Gtk.Window ("Title");
    Mono.WebBrowser.IWebBrowser browser =
        Mono.WebBrowser.Manager.GetNewInstance(Mono.WebBrowser.Platform.Gtk);
    browser.Load(win.Handle, 500, 250);
    win.ShowAll ();
    GLib.Timeout.Add( 500, delegate {
        browser.Navigation.Go ("http://google.com/");
        return false;
    });
    Gtk.Application.Run ();
} 
```

它编译、运行和浏览器。初始化为真。但它不会呈现到 Gtk.Window （或我尝试过的任何其他 Gtk.widget ）。是什么触发浏览器实际呈现自己？可能是我无法将它直接渲染到窗口中（我查看了 mono-docbrowser [1] 源代码，并且有一个更复杂的示例，但它也没有渲染）。

我看过 webkit-sharp，但不能让它在带有 Gtk 的 Windows 或 Mac 上工作。

[1] [https://github.com/mono/mono-tools/tree/master/docbrowser](https://github.com/mono/mono-tools/tree/master/docbrowser)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T01:50:49.450

我不记得确切的位置，但我在某处读到 Mono.WebBrowser 命名空间以某种方式被弃用，取而代之的是 WebkitSharp。

我之前尝试过类似的方法，但我使用了我的 linux 发行版中的 webkit-sharp.dll。试图编译它并在 Windows 上运行它，但它没有工作。所以事实证明我错过了 webkit-gtk dll，它是实际渲染整个东西的那个（webkit-sharp 只是胶水代码，如果你愿意的话，一个包装器）

我当时向其中一位维护者（Andreia Gaita）发送了一封电子邮件，并得到了可能对您有所帮助的回复（关于在 windows/osx 中使用 webkit-sharp）给我写信，我会转发给您该邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T01:57:57.397

[Gluezilla](https://github.com/mono/gluezilla)已死（不适用于新的 Firefox），[Webkit-sharp](https://github.com/mono/webkit-sharp)尚未成熟（技术上还没有死，但我听说结果基本相同）。我不知道其他选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T20:30:15.750

我只能确认古斯塔沃所说的：Mono.WebBrowser 从来没有为我工作过。webkit-sharp 的问题在于，即使它是跨平台的，它也讨厌 Windows。webkit-sharp 实际上是 webkit-gtk 的 .NET 绑定（例如，将 WebKit 嵌入到 Gtk 窗口中）。但是即使 Gtk#/Mono 和 WebKit 都可以在 Windows 上运行，webkit-gtk 也会在这里制造很多麻烦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T22:08:50.747

我无法告诉您为什么您的代码不起作用，但我可以建议您使用 Awesomium，这是一种被黑客入侵的 Chromium 源，您可以将其集成到 C++ 或 .Net 应用程序中。

他们的 wiki 非常不完整，但 SDK 下载包含几个有关如何使用它的示例。

Awesomium：[http](http://awesomium.com/) ://awesomium.com/ 维基：[http ://wiki.awesomium.net/](http://wiki.awesomium.net/)

# api - 如何获得 Intuit 数据服务 (IDS) 测试版功能？

> ID：14814426
> 
> 赞同：2
> 
> 时间：2013-02-11T14:45:06.450
> 
> 标签：api, intuit-partner-platform, quickbooks-online, devkit

我正在尝试使用[此处](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/0500_Supported_Entities_and_Operations "帮助")`Intuit.Ipp.Data.Qbo.VendorCredit`标记为受限 beta 功能的实体。当我尝试使用开发环境凭据添加其实例时，我从 IDS 服务器收到“内部服务器错误”。

所以，我的问题是：

1.  开发人员是否可以使用此功能？
2.  如果是，那么我怎样才能得到它？
3.  如果否，那么是否有任何替代解决方案？

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:51:32.057

该实体被标记为测试版，这意味着使用风险自负，因为 Quickbooks API 的第 2 版目前不支持该实体。它将在 v3 QuickBooks API 中提供并完全受支持，但尚未推出。您可以在我们的下一次网络研讨会上获得有关 v3 QuickBooks API 的更多信息。

[http://ippblog.intuit.com/blog/2013/02/registration-for-ipp-quickbooks-api-v3-webinar-.html](http://ippblog.intuit.com/blog/2013/02/registration-for-ipp-quickbooks-api-v3-webinar-.html)

没有其他选择，但如果需要，您可以尝试使用此 XML 请求添加 VendorCredit。

```
<Add RequestId="f262775d403d432e9b0173d3fd03036f" xmlns="http://www.intuit.com/sb/cdm/v2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.intuit.com/sb/cdm/v2 ./RestDataFilter.xsd">
    <ExternalRealmId>181967844</ExternalRealmId>
    <VendorCredit>
        <Header>
            <DocNumber>90001</DocNumber>
            <TxnDate>2011-01-20</TxnDate>
            <Note>New vendor</Note>
            <Status>Paid</Status>
            <VendorId idDomain="QB">263</VendorId>
            <VendorName>General Motors</VendorName>
            <BillEmail>jenW@foobar.com</BillEmail>
            <TotalAmt>200.0</TotalAmt>
            <PayerId idDomain="QB">263</PayerId>
            <PayerName>General Motors</PayerName>
            <APAccountId idDomain="QB">12</APAccountId>
            <APAccountName>Accounts Payable</APAccountName>
        </Header>
        <Line>
            <Desc>new line</Desc>
            <ClassId idDomain="QB">12</ClassId>
            <ClassName>Tub Design</ClassName>
            <ReimbursableInfo>
                <CustomerId idDomain="QB">281</CustomerId>
                <CustomerName>Disney</CustomerName>
                <JobId idDomain="QB">282</JobId>
                <JobName>StoryCreation</JobName>
            </ReimbursableInfo>
            <BillableStatus>Billable</BillableStatus>
            <ItemId idDomain="QB">118</ItemId>
            <ItemName>labor used in assembly</ItemName>
            <ItemType>Service</ItemType>
            <UnitPrice>50.0</UnitPrice>
            <Qty>4.0</Qty>
            <UOMId idDomain="QB">38</UOMId>
            <UOMAbbrv>Volume by the liter</UOMAbbrv>
        </Line>
    </VendorCredit>
</Add> 
```

# sqlite - 如何将 SQLITE DB 的时间戳更改为本地时间戳

> ID：14814433
> 
> 赞同：6
> 
> 时间：2013-02-11T14:45:26.140
> 
> 标签：sqlite, timestamp

我通过 current_timestamp 将一条记录插入到 sqlite 数据库中。想法是，不要手动设置时间。现在，问题是，我在数据库中的日期是插入后 5.30 小时。任何想法，如何四处走动或解决这个问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-11-04T17:54:56.520

利用 ：

```
CREATE TABLE table 
( ... 
, yourColumnName DATETIME DEFAULT (DATETIME(CURRENT_TIMESTAMP, 'LOCALTIME'))
, ...
); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-11T14:56:26.870

返回的时间戳`current_timestamp`是 UTC。

要将其转换为您当地的当前时区，请使用[datetime 函数](http://www.sqlite.org/lang_datefunc.html)：

```
INSERT INTO MyTable(MyColumn) VALUES(datetime(CURRENT_TIMESTAMP, 'localtime')) 
```

# php - 使用数据库中的内容回显多个 div，并并排填充容器 div 的宽度

> ID：14814436
> 
> 赞同：0
> 
> 时间：2013-02-11T14:45:31.750
> 
> 标签：php, mysql, css, ajax

我知道有类似的主题，但我认为我的主题有点不同。我正在做的是用数据库中的数据在 div 中回显内容。它们是有序列表元素的一部分。前 10 个项目被加载，用户点击 Load More 和 10 个更多的加载。现在它们作为有序列表在一列中......我希望回显的 div 并排成一行。我认为我需要将其保留为有序列表，因为有序列表通过 ajax 调用附加了 html 内容。我尝试使用 jQuery masonry 并成功地将前 10 个 div 并排制作，但接下来的 10 个没有，因为 DOM 没有刷新……这就是 masonry 的工作原理。所以我想知道我是否可以用 CSS 做到这一点。无论如何......这是我的代码：

```
<body> 
<div id='container'>
   <ol class="row" id="updates">
<?php
  //query DB for content
?>
   <li> <?php echo "<div style='font-size:12px; position:relative; left:300px;>
        //some other divs with content from DB
        </div><br>"; ?> </li>
        <?php } ?>
   </ol>
<div id="more" style="margin-top: 20px;"> <a  id="<?php echo $id; ?>" 
     class="load_more" href="javascript:void(0);">Show More</a> </div><br/>
</div>
</body> 
```

这是我最初的正文代码。在 ajax 调用的 add_more_content.php 中，格式相同，返回相同的 div 样式并附加到有序列表 id “updates”。这是我为此准备的一些 CSS：

```
ol.row {
  list-style:none
}
ol.row li {
  position:relative;
  padding:8px;
}
#container {
  width:600px
}
.load_more {
  position:relative;
  left:220px;
  display:block;
} 
```

那么是否可以让回显的 div 并排排列，直到它们填满容器 div 的宽度？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:23:03.580

如果您使用 display inline，它们应该自己排列（我在 li 和内部 div 元素上都尝试过），但是我看到您发布的代码中有一些拼写错误，所以我不知道它是否会导致您的问题.

例如，您没有关闭内部 div 的内联样式中的 '...在运行时使用 Firebug（或其他浏览器的等效项）编辑它们...

为“显示更多”按钮目的进行编辑：如果附加的 html 破坏了您的按钮行为，您可以将其移出容器以使其保持原位，您甚至可以添加一个父容器以包含自更新 div 和更新按钮......这样你应该能够保持你的内容正确的样式和定位。

# ajax - Cloudfront 拒绝来自一个域的 CORS，但拒绝来自另一个域

> ID：14814437
> 
> 赞同：2
> 
> 时间：2013-02-11T14:45:32.250
> 
> 标签：ajax, cors, amazon-cloudfront

我有一个 Heroku 应用程序通过 JQuery 向我的云端分发发出 AJAX 请求。当我从 myapp.herokuapp.com 加载我的网站时，一切正常。

当我从我的自定义域（类似于 myapp.subdomain.domain.com）访问应用程序时，我得到以下信息：

```
XMLHttpRequest cannot load [cloudfront dist here]/something.json. Origin http://myapp.subdomain.domain.com is not allowed by Access-Control-Allow-Origin. 
```

这很奇怪。在我的 S3 CORS 配置中，我允许所有域具有`*`：

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <CORSRule>
        <AllowedOrigin>*</AllowedOrigin>
        <AllowedMethod>GET</AllowedMethod>
        <MaxAgeSeconds>3000</MaxAgeSeconds>
        <AllowedHeader>Authorization</AllowedHeader>
    </CORSRule>
</CORSConfiguration> 
```

为什么会发生这种情况？有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T15:49:08.663

您可能被这个 S3/CloudFront 错误[https://forums.aws.amazon.com/thread.jspa?messageID=377513](https://forums.aws.amazon.com/thread.jspa?messageID=377513)

当 S3 看到来自 myapp.herokuapp.com 的请求时，它会重写`Access-Control-Allow-Origin: myapp.herokuapp.com`，而不是`*`您期望的那样。CF 会缓存它。因此，来自不同域的辅助请求将无法通过 CORS 验证，即使使用相同的 CF 分发也是如此。

# ruby - Ruby：匹配哈希中的键以返回相应的键+值

> ID：14814440
> 
> 赞同：2
> 
> 时间：2013-02-11T14:45:40.897
> 
> 标签：ruby, hash

我有哈希是

```
hash = {"stars"=>"in the galaxy", "fin"=>"is for fish", "fish"=>"has fins"} 
```

现在我有一个查找方法

```
def find(value)
    if hash.empty? == true
      return {}
    else
     return  hash
    end
  end 
```

现在我想做的是-在执行时`find("fi")`，我希望该方法返回键中包含`fi`的所有哈希键+值。所以这样的输出看起来像 -

```
{"fin"=>"is for fish", "fish"=>"has fins"} 
```

请注意“fi”不是固定的。它可以是任何东西。由于 Find 方法接受一个参数`value`。

任何帮助或建议表示赞赏。我试过哈希#select。但没有那么有帮助。我不确定在这里使用什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T14:49:14.527

`hash.select {|k, _| k.include? str}``str`您要查找的字符串在哪里。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-11T15:06:57.917

我会使用类似的东西：

```
hash = {"stars"=>"in the galaxy", "fin"=>"is for fish", "fish"=>"has fins"}
pattern = 'fi'
hash.select{ |k,v| k[pattern] }
# => {"fin"=>"is for fish", "fish"=>"has fins"} 
```

# java - 如何锁定 JFrame？

> ID：14814443
> 
> 赞同：2
> 
> 时间：2013-02-11T14:45:44.937
> 
> 标签：java, swing, jframe, modal-dialog

`JFrame`当另一个出现时，我可以锁定吗？当你想打开新文件时，主窗口被锁定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T14:49:22.983

这是不可能的`JFrame`，`JFrame`没有模态方法，必须使用`JDialog`，有以下参数

1.  [`setModal(true)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JDialog.html#JDialog%28java.awt.Frame,%20java.lang.String,%20boolean%29)或者

2.  [`setModalityTypes()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JDialog.html#JDialog%28java.awt.Window,%20java.lang.String,%20java.awt.Dialog.ModalityType%29)

3.  不要忘记设置`setParent`from `JFrame`to`JDialog`

或使用[`JOptionPane`，阻止代码执行，等待用户操作](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T14:48:01.210

使用[模态对话](http://docs.oracle.com/javase/tutorial/uiswing/misc/modality.html)，那些阻碍底层的对话`JFrame`

# python - 如何通过在模型条目列表上方添加值来扩展 Django Admin？

> ID：14814447
> 
> 赞同：0
> 
> 时间：2013-02-11T14:45:52.237
> 
> 标签：python, django, django-admin, admin, extend

我刚开始使用 Django Admin。我的代码告诉 Django Admin`/admin/`从我的模型中显示页面中的所有条目。

我想通过在列表上方添加值来扩展列表。我想显示符合条件#1 的条目总数和符合条件#2 的条目总数。我不想更改列表。该内容是独立的。

要获得该内容，我需要执行两个查询。这意味着我不应该在模板中这样做，也不应该只将模板的名称传递给属性`change_list_template`。

接下来我想扩展`chnagelist_view`，但捕获响应并将我的值添加到它。唯一的问题是我认为有更好的方法；一定有更好的方法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:58:04.047

经过研究，诀窍是：

1.  [覆盖管理模板](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#overriding-admin-templates)，
2.  [将变量传递给模板](https://stackoverflow.com/a/9220270/458610)，

# android - Android 如何从 facebook 粉丝页面获取 feed？

> ID：14814452
> 
> 赞同：0
> 
> 时间：2013-02-11T14:46:05.753
> 
> 标签：android, facebook, facebook-graph-api, feed, facebook-login

我需要向一家公司提出申请，并希望显示来自公司粉丝页面的提要，该页面的布局类似于 facebook 应用程序。用户可以在帖子中发表评论并给予喜欢（因为他需要签名）。但要接收饲料粉丝页面，他不需要登录。

我可以做这个？怎么做？

# windows - 是否可以在桌面应用程序中实现 windows 8 Charm Bar Menu？

> ID：14814459
> 
> 赞同：1
> 
> 时间：2013-02-11T14:46:29.160
> 
> 标签：windows, desktop-application

是否可以在桌面应用程序中实现 windows 8 Charm Bar Menu？

![](../Images/6a2b8da0336dfefaae68419a0b2e7b35.png)

该程序将始终运行但“隐藏”，直到鼠标移过它。这一刻就会出现。

我在考虑类似 WPF 的东西，但我不确定这是否可以用它来完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:05:31.440

为了实现这一点，我将编写一个[通知窗口](http://www.canofcode.co.uk/software/wpf-notification-popup/)并[监视鼠标位置](http://msdn.microsoft.com/en-us/library/system.windows.forms.cursor.position.aspx)。如果鼠标在桌面右侧，您可以显示通知窗口。

通过一些工作，您可以将通知窗口的外观和感觉更改为看起来像魅力栏并添加一些效果:-)

总之应该是可以的。

# c# - TFS Build 失败，因为它似乎在错误的地方寻找参考资料

> ID：14814460
> 
> 赞同：2
> 
> 时间：2013-02-11T14:46:29.637
> 
> 标签：c#, tfs, visual-studio-2012

TFS (2012) Build 正在检查 C:\Windows\Microsoft.NET... 以获取我的一些项目引用，即使这些 dll 作为项目引用（设置为复制本地）包含在我正在签入的文件夹中。

在 VS 和使用 MSBuild.exe 命令行的 TFS 之外构建成功。

我可以在错误和警告中看到它抱怨的引用没有找到“无法解决此引用。找不到...'都是因为它根本没有签入 proj 文件中定义的签入依赖文件夹。

关于如何纠正这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:01:13.773

我相信 DotNet 依赖解析有一个“首先检查 gac”规则。

所以我做我的参考是这样的。

```
\MySolution.sln
\BALLayer\Biz.csproj
\DALLayer\Data.csproj
\PresLayer\MyWebsite.csproj
\ThirdPartyReferences\
\ThirdPartyReferences\SuperCoolDll111.dll
\ThirdPartyReferences\SuperCoolDll222.dll
\ThirdPartyReferences\SuperCoolDll333.dll 
```

这样，所有 csprojects 都使用相对路径引用所需的 dll。所有 cs 项目都引用相同的 dll。

这帮助我避免了“无论你想让我做什么，我都会查看 GAC”的问题。

Nuget 以类似方式执行此操作。

```
\packages\
\packages\repositories.config
\packages\SomeLibrary\SomeDll.dll
\packages\SomeLibrary\MyNugetDll.dll 
```

和 cs 项目使用相对路径引用相同的 .dll。

…………

脚注：在记事本中打开您的 .csproj 文件，然后查找 HintPath。我的总是说类似

```
<Reference Include="MyNugetDll.dll>
  <SpecificVersion>False</SpecificVersion>
  <HintPath>..\packages\SomeLibrary\MyNugetDll.dll</HintPath>
</Reference> 
```

或者

```
<Reference Include="SuperCoolDll333.dll>
  <SpecificVersion>False</SpecificVersion>
  <HintPath>..\ThirdPartyReferences\SuperCoolDll333.dll</HintPath>
</Reference> 
```

…………

但我认为您问题的症结在于“复制本地”和“gac first”规则。

…………

附言

这是另一个讨论订单的问题......比我做得更好。

[搜索位置以加载引用的 DLL 的顺序是什么？](https://stackoverflow.com/questions/49972/in-what-order-are-locations-searched-to-load-referenced-dlls)

编辑：：：：

所以吸取了教训：

1.  如果您将第三方引用签入源代码管理，并且构建机器说“我找不到 xyz.dll”，那么请确保该 dll 实际上在源代码管理中。安装了 Visual Studio 的（本地开发）机器上有很多“巫毒”路径，随后将不在“构建机器”上。

2.  如果您使用 nuget 并签入您的 dll，请确保它们都已签入。您可能会在 packages.config 中添加一个新条目，然后忘记将实际的 dll 放入源代码管理中。

3.  有一些使用 nuget 的方法，您只将 packages.config 放在源代码管理中，而不是第三方 dll。检查这篇文章的评论以获取有关此的文章。

# ember.js - 使用 EmberData 在本地存储中缓存远程数据

> ID：14814472
> 
> 赞同：41
> 
> 时间：2013-02-11T14:47:03.343
> 
> 标签：ember.js, ember-data

我有一个关于使用 Ember 加载和缓存远程对象的问题。我正在开发一个通过 REST API 使用服务器端存储的 Ember 应用程序。某些获取的数据很少更改，因此每次应用程序加载时都从服务器获取数据是不必要的。但这对于需要离线工作并仍将数据保存到服务器的应用程序来说也是一个问题。

Ember Data 有一个内置的存储适配器，用于通过 REST API 持久化模型，还有[一个用于本地存储的适配器](https://github.com/rpflorence/ember-localstorage-adapter)（如下面的 Ken 指出的）。问题（如果有问题的话）是一个模型只有一个存储适配器，除了将它们保存在内存中之外，似乎没有任何缓存获取的模型的概念。

[我在此Ember 愿望清单和](https://www.google.se/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCwQFjAA&url=http%3A%2F%2Fbroadcastingadam.com%2F2012%2F07%2Fember_wish_list%2F&ei=Fs8YUezFH4SE4gSJ74DIDQ&usg=AFQjCNEJo5dW73kH3r2TTZT0Grrui-1E8g)[Tom Dale](http://www.youtube.com/watch?v=djhAsWGOImk)对本次演讲的评论中发现了类似的请求，但我没有发现任何迹象表明这将是 Ember 中的现有功能。

我有两个问题（第一个是重要的）：

1.  **今天，在本地存储中实现缓存模型并根据需要将它们与远程数据同步的最佳方式是什么？**
2.  这是计划包含在 Ember 中的功能，还是至少维护者认为最终应该添加的功能？

当谈到 1) 时，我可以想到几个策略：

a) 扩展现有适配器并添加自定义远程同步机制：

```
App.Store.registerAdapter('App.Post', DS.LSAdapter.extend({
  // do stuff when stuff happens
})); 
```

b) 维护单独的模型类——一组用于远程对象，一组用于本地对象——并根据需要在它们之间进行同步。使用标准 Todo 案例：

```
RemoteTodo –*sync*– Todo
                     |
                     UI 
```

我有点希望这是一个真正的菜鸟问题，并且有一个很好的既定模式。

*更新：*发现[这个类似的问题](https://stackoverflow.com/questions/13591899/architecture-for-data-layer-that-uses-both-localstorage-and-a-rest-remote-server?rq=1)。它有一个很好的答案，但它是一种理论上的。我认为我需要的是一些实用技巧或指向示例实现的指针。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-07T22:58:13.800

只是为了稍微“提高”这个线程，因为当我研究 ember local cache of restful api 等解决方案时，它是最好的结果之一：

Dan Gebhardt 似乎在 Orbit.js 及其与 Ember 的集成方面做得非常好： [https ://github.com/orbitjs/ember-orbit](https://github.com/orbitjs/ember-orbit)

> Orbit 是一个独立的库，用于协调对数据源的访问并**保持其内容同步**。
> 
> Orbit 为在客户端应用程序中构建高级功能奠定了基础，例如离线操作、本地缓存的维护和同步、撤消/重做堆栈和临时编辑上下文。
> 
> Orbit.js 功能：
> 
> *   在应用程序中支持任意数量的不同数据源，并通过通用接口提供对它们的访问。
>     
>     
> *   允许满足不同来源的请求，包括指定优先级和后备计划的能力。
>     
>     
> *   允许记录同时存在于不同来源的不同状态。
>     
>     
> *   协调跨源的转换。尽可能自动处理合并，但允许完全自定义控制。
>     
>     
> *   允许阻塞和非阻塞转换。
>     
>     
> *   允许同步和异步请求。
>     
>     
> *   通过跟踪操作的逆向来支持事务和撤消/重做。
>     
>     
> *   使用纯 JavaScript 对象。

不要错过他关于 Orbit 的精彩演讲和幻灯片：
[Orbit.js 简介](http://www.youtube.com/watch?v=IAwk_mF-dWo)

（**更新**：我从 Orbit 页面添加了一些更多描述性信息，因为我的帖子因“仅”引用外部资源而不包含实际解决方案而被否决。但在我看来，Orbit 似乎是解决方案，也是“包括“这是通过链接。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T17:39:53.060

有一个本地存储适配器的实现，您可能会发现它很有用。看看[https://github.com/rpflorence/ember-localstorage-adapter](https://github.com/rpflorence/ember-localstorage-adapter)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-12T05:46:20.293

这是一种方法。适配器的 mixin，具有`localStoreRecord`可用于缓存记录的方法，最后是用于预加载存储的初始化程序。

本地存储只是字符串化对象的键：值存储，因此我们可以将所有应用程序数据存储在一个键下。

注意：这是使用 es6 模块

```
// app/mixins/local-storage.js

import Ember from 'ember';

export default Ember.Mixin.create({
  appName: 'myApp',
  // how many records per model to store locally, can be improved.
  // needed to prevent going over localStorage's 5mb limit
  localStorageLimit: 5,
  localStoreRecord: function(record) {
    var data = JSON.parse(localStorage.getItem(this.appName));
    data = data || {};
    data[this.modelName] = data[this.modelName] || [];
    var isNew = data[this.modelName].every(function(rec) {
      rec.id !== record.id; 
    });
    if (isNew) {
      data[this.modelName].push(record);
      if (data[this.modelName].length > this.localStorageLimit) {
        data[this.modelName].shift();
      }
      localStorage.setItem(this.appName, JSON.stringify(data));
    }
  }
});
```

```
// app/adapters/skateboard.js

import DS from 'ember-data';
import Ember from 'ember';
import LocalStorageMixin from '../mixins/local-storage';

export default DS.RESTAdapter.extend(LocalStorageMixin, {
  modelName: 'skateboard',
  find: function(store, type, id) {
    var self = this;
    var url = [type,id].join('/');
    return new Ember.RSVP.Promise(function(resolve, reject) {
      Ember.$.ajax({
        url: 'api/' + url,
        type: 'GET'
      }).done(function (response) {
        // cache the response in localStorage
        self.localStoreRecord(response);
        resolve({ type: response });
      }).fail(function(jqHXR, responseStatus) {
        reject(new Error(type +
         ' request failed with status=' + reponseStatus);  
      });
    });
  },
  updateRecord: function(store, type, record) {
    var data = this.serialize(record, { includeId: true });
    var id = record.get('id');
    var url = [type, id].join('/');
    return new Ember.RSVP.Promise(function(resolve, reject) {
      Ember.$.ajax({
        type: 'PUT',
        url: 'api/' + url,
        dataType: 'json',
        data: data
      }).then(function(data) {
        // cache the response in localStorage
        self.localStoreRecord(response);
        resolve({ type: response });
      }).fail(function(jqXHR, responseData) {
        reject(new Error(type +
         ' request failed with status=' + reponseStatus);
      });
    });
  }
}); 
```

```
// app/initializers/local-storage.js

export var initialize = function(container/*, application*/) {
  var appName = 'myApp';
  var store = container.lookup('store:main');
  var data = JSON.parse(localStorage.getItem(appName));
  console.log('localStorage:',data);
  if (!data) {
    return;
  }
  var keys = Object.keys(data);
  if (keys.length) {
    keys.forEach(function(key) {
      console.log(key,data[key][0]);
      store.createRecord(key, data[key][0]);
    });
  }
};

export default {
  name: 'local-storage',
  after: 'store',
  initialize: initialize
};
```

# scala - 使用 play 2.0 改变表单动作

> ID：14814473
> 
> 赞同：0
> 
> 时间：2013-02-11T14:47:06.553
> 
> 标签：scala, playframework-2.0

我正在尝试使用 play 2.10 呈现带有动作 POST 的表单

```
@form(action = routes.Application.sentiment, args = 'id -> "helloform", 'method -> "POST") 
```

输出是（我在游戏控制台中验证了这一点）

```
<form action="/sentiment" method="GET" id="helloform" method="POST"> 
```

这在浏览器中的最终效果是它最终忽略了第二个方法属性。我究竟做错了什么？如何覆盖默认的表单方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:04:43.250

`@form`helper`method`在 action 上确定表单的参数`route`，因此要更改它，您应该更改路由

```
/GET    /sentiment  controllers.Application.sentiment 
```

到

```
/POST   /sentiment  controllers.Application.sentiment 
```

（反之亦然）并且不要在视图中声明该方法。

```
@form(action = routes.Application.sentiment, args = 'id -> "helloform") 
```

# javascript - 如何使打开一个下拉菜单关闭另一个下拉菜单？

> ID：14814474
> 
> 赞同：2
> 
> 时间：2013-02-11T14:47:08.087
> 
> 标签：javascript, onclick

我正在尝试学习纯原生`JavaScript`，所以请不要建议使用框架来解决任务。我知道这太棒了，当我用完纯 JS 后，学习它们将是我要做的第一件事 :)

现在，问题。[小提琴](http://jsfiddle.net/DU9Up/)

如您所见，我在那里有两个自定义下拉菜单。它们中的每一个都可以用鼠标和键盘打开和控制。解决此任务我需要做的最后一件事是实现以下功能：打开一个下拉菜单应关闭另一个下拉菜单，单击下拉菜单外部应关闭任何打开的下拉菜单（假设一次只能打开一个） .

我尝试向`onclick`文档添加一个侦听器，如果下拉列表中的任何一个打开但之前未使用过，它将关闭下拉列表，但是在我单击文档一次后，下拉列表不再显示。但这甚至不能解决一半的问题。由于我将标志 bIsOpen 分配给对象，因此我无法从另一个对象访问它们以查看它是否被触发。

请给我一个提示：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:55:48.190

将打开和关闭逻辑移动到它们自己的函数中：

```
DropDown.prototype.open = function (e) {
    ...
}

DropDown.prototype.close = function (e) {
    ...
} 
```

和

```
this.htmlDropDown.onclick = function (e) {
    if (this.bIsOpen) {
        this.open(e);
    } else {
        this.close(e);
    }
} 
```

（确保打开和关闭功能调整`bIsOpen`，而不是`onclick`处理程序。）

然后，添加所有当前存在的下拉列表：

```
function DropDown(htmlObject) {
    DropDown.dropdowns.push(this);
    ...
}

DropDown.dropdowns = []; // no 'prototype' 
```

最后，在打开器中，关闭所有其他下拉菜单：

```
DropDown.prototype.open = function (e) {
    var dropdown;
    for (var i = 0; i < DropDown.dropdowns.length; i++) {
        dropdown = DropDown.dropdowns[i];
        if (dropdown !== this) {
            dropdown.close();
        }
    }
    ...
} 
```

# c++ - 应用程序在 c++ 中的 python 扩展函数中随机给出分段错误

> ID：14814490
> 
> 赞同：4
> 
> 时间：2013-02-11T14:47:53.483
> 
> 标签：c++, python, segmentation-fault

我在 c++ 中的 python 扩展中遇到了一些奇怪的问题。我感谢任何帮助或建议。

**设置上下文。**

我在 C++ 中使用嵌入式 python 来执行 python 脚本。我还在 c++ 中使用 python 扩展来赋予 python 脚本调用 C++ 函数的能力。

**什么是问题？**

1.  当我从模块“方法表”中评论方法条目时，如下所示。应用程序永远不会崩溃，或者我根本没有遇到段错误。

    ```
    static PyMethodDef sa_methods[] = {

    //{"GetBlue",(PyCFunction)sa_GetBlue,METH_VARARGS,PyDoc_STR("fetches Blue color")},

    //{"GetRed",(PyCFunction)sa_GetRed,METH_VARARGS,PyDoc_STR("fetches Red color")},

    {"GetYellow",(PyCFunction)sa_GetYellow,METH_VARARGS,PyDoc_STR("fetches yellow color")},                        

    {"GetPink",(PyCFunction)sa_GetPink,METH_VARARGS,PyDoc_STR("fetches pink color")},

    {NULL, NULL, 0, NULL}

    }; 
    ```

2.  当我从模块“方法表”的方法条目中删除方法注释时，如下所示。应用程序总是在随机处理 20000 到 50000 个请求之间崩溃。

    ```
    static PyMethodDef sa_methods[] = {

    {"GetBlue",(PyCFunction)sa_GetBlue,METH_VARARGS,PyDoc_STR("fetches Blue color")},

    {"GetRed",(PyCFunction)sa_GetRed,METH_VARARGS,PyDoc_STR("fetches Red color")},

    {"GetYellow",(PyCFunction)sa_GetYellow,METH_VARARGS,PyDoc_STR("fetches yellow color")},                        

    {"GetPink",(PyCFunction)sa_GetPink,METH_VARARGS,PyDoc_STR("fetches pink color")},

    {NULL, NULL, 0, NULL}

    }; 
    ```

**我将以上两个方法保留为空，它们只是返回 Py_False。**

**请在我每次得到的堆栈跟踪下方找到。**

```
#0  0x00002b700146c4d7 in PyNumber_CoerceEx (pv=0x41801798, pw=0x41801790) at Objects/object.c:1599
#1  0x00002b700142d6e3 in binary_op1 (v=0x2aaaac079600, w=0x2b7001750550, op_slot=16) at Objects/abstract.c:929
#2  0x00002b7001431e08 in PyNumber_Multiply (v=0x41801798, w=0x41801790) at Objects/abstract.c:1188
#3  0x00002b70014c4326 in PyEval_EvalFrameEx (f=0x8127780, throwflag=<value optimized out>) at Python/ceval.c:1118
#4  0x00002b70014c8493 in call_function (f=0x996e660, throwflag=<value optimized out>) at Python/ceval.c:3792
#5  PyEval_EvalFrameEx (f=0x996e660, throwflag=<value optimized out>) at Python/ceval.c:2389
#6  0x00002b70014c8493 in call_function (f=0x2aaac30aeb50, throwflag=<value optimized out>) at Python/ceval.c:3792
#7  PyEval_EvalFrameEx (f=0x2aaac30aeb50, throwflag=<value optimized out>) at Python/ceval.c:2389
#8  0x00002b70014c8d9f in PyEval_EvalCodeEx (co=0x2aaaad7dc558, globals=<value optimized out>, locals=<value optimized out>, args=0x2aaac6ab59a0, argcount=2,
    kws=0x2aaac6ab59b0, kwcount=0, defs=0x7819128, defcount=1, closure=0x0) at Python/ceval.c:2968
#9  0x00002b70014c6df3 in call_function (f=0x2aaac6ab57d0, throwflag=<value optimized out>) at Python/ceval.c:3802
#10 PyEval_EvalFrameEx (f=0x2aaac6ab57d0, throwflag=<value optimized out>) at Python/ceval.c:2389
#11 0x00002b70014c8d9f in PyEval_EvalCodeEx (co=0x2aaabdf8e828, globals=<value optimized out>, locals=<value optimized out>, args=0x2aaac65bcbf0, argcount=2,
    kws=0x2aaac65bcc00, kwcount=0, defs=0x7819c28, defcount=1, closure=0x0) at Python/ceval.c:2968
#12 0x00002b70014c6df3 in call_function (f=0x2aaac65bca40, throwflag=<value optimized out>) at Python/ceval.c:3802
#13 PyEval_EvalFrameEx (f=0x2aaac65bca40, throwflag=<value optimized out>) at Python/ceval.c:2389
#14 0x00002b70014c8493 in call_function (f=0x2aaac6301630, throwflag=<value optimized out>) at Python/ceval.c:3792
#15 PyEval_EvalFrameEx (f=0x2aaac6301630, throwflag=<value optimized out>) at Python/ceval.c:2389
#16 0x00002b70014c8d9f in PyEval_EvalCodeEx (co=0x6c7f558, globals=<value optimized out>, locals=<value optimized out>, args=0x2aaac55963e8, argcount=2,
    kws=0x2aaac55963f8, kwcount=0, defs=0xd83fce8, defcount=1, closure=0x0) at Python/ceval.c:2968
#17 0x00002b70014c6df3 in call_function (f=0x2aaac5596240, throwflag=<value optimized out>) at Python/ceval.c:3802
#18 PyEval_EvalFrameEx (f=0x2aaac5596240, throwflag=<value optimized out>) at Python/ceval.c:2389
#19 0x00002b70014c8d9f in PyEval_EvalCodeEx (co=0x6c7fcd8, globals=<value optimized out>, locals=<value optimized out>, args=0x2aaac6fbc328, argcount=2,
    kws=0x2aaac6fbc338, kwcount=0, defs=0xd83fc68, defcount=1, closure=0x0) at Python/ceval.c:2968
#20 0x00002b70014c6df3 in call_function (f=0x2aaac6fbc1a0, throwflag=<value optimized out>) at Python/ceval.c:3802
#21 PyEval_EvalFrameEx (f=0x2aaac6fbc1a0, throwflag=<value optimized out>) at Python/ceval.c:2389
#22 0x00002b70014c8d9f in PyEval_EvalCodeEx (co=0x6c7f648, globals=<value optimized out>, locals=<value optimized out>, args=0x1, argcount=0, kws=0x2aaac3e32558,
    kwcount=0, defs=0xd83ffa8, defcount=1, closure=0x0) at Python/ceval.c:2968
#23 0x00002b70014c6df3 in call_function (f=0x2aaac3e323d0, throwflag=<value optimized out>) at Python/ceval.c:3802
#24 PyEval_EvalFrameEx (f=0x2aaac3e323d0, throwflag=<value optimized out>) at Python/ceval.c:2389
#25 0x00002b70014c8d9f in PyEval_EvalCodeEx (co=0x2aaaad7f70a8, globals=<value optimized out>, locals=<value optimized out>, args=0x0, argcount=0, kws=0x1325c6a8,
    kwcount=0, defs=0x0, defcount=0, closure=0x2aaaad18e990) at Python/ceval.c:2968
#26 0x00002b70014c6df3 in call_function (f=0x1325c480, throwflag=<value optimized out>) at Python/ceval.c:3802
#27 PyEval_EvalFrameEx (f=0x1325c480, throwflag=<value optimized out>) at Python/ceval.c:2389
#28 0x00002b70014c8d9f in PyEval_EvalCodeEx (co=0x2aaaad7f77b0, globals=<value optimized out>, locals=<value optimized out>, args=0x1, argcount=1, kws=0x2aaac5ec1d08,
    kwcount=0, defs=0x2aaaacfdf5e8, defcount=1, closure=0x0) at Python/ceval.c:2968
#29 0x00002b70014c6df3 in call_function (f=0x2aaac5ec1b00, throwflag=<value optimized out>) at Python/ceval.c:3802
#30 PyEval_EvalFrameEx (f=0x2aaac5ec1b00, throwflag=<value optimized out>) at Python/ceval.c:2389
#31 0x00002b70014c8493 in call_function (f=0xa926080, throwflag=<value optimized out>) at Python/ceval.c:3792
#32 PyEval_EvalFrameEx (f=0xa926080, throwflag=<value optimized out>) at Python/ceval.c:2389
#33 0x00002b70014c8493 in call_function (f=0x8e4bd40, throwflag=<value optimized out>) at Python/ceval.c:3792
#34 PyEval_EvalFrameEx (f=0x8e4bd40, throwflag=<value optimized out>) at Python/ceval.c:2389
#35 0x00002b70014c8d9f in PyEval_EvalCodeEx (co=0x2aaabc9f7648, globals=<value optimized out>, locals=<value optimized out>, args=0x9ff5f58, argcount=1,
---Type <return> to continue, or q <return> to quit---
    kws=0x9ff5f60, kwcount=0, defs=0x0, defcount=0, closure=0x2aaaacfdfc50) at Python/ceval.c:2968
#36 0x00002b70014c6df3 in call_function (f=0x9ff5dc0, throwflag=<value optimized out>) at Python/ceval.c:3802
#37 PyEval_EvalFrameEx (f=0x9ff5dc0, throwflag=<value optimized out>) at Python/ceval.c:2389
#38 0x00002b70014c8493 in call_function (f=0xdb993e0, throwflag=<value optimized out>) at Python/ceval.c:3792
#39 PyEval_EvalFrameEx (f=0xdb993e0, throwflag=<value optimized out>) at Python/ceval.c:2389
#40 0x00002b70014c8d9f in PyEval_EvalCodeEx (co=0x2aaabd820990, globals=<value optimized out>, locals=<value optimized out>, args=0x2aaaacfdf8a8, argcount=1, kws=0x0,
    kwcount=0, defs=0x0, defcount=0, closure=0x0) at Python/ceval.c:2968
#41 0x00002b700145815d in function_call (func=0x7d898c0, arg=0x2aaaacfdf890, kw=0x0) at Objects/funcobject.c:524
#42 0x00002b700142d318 in PyObject_Call (func=0x7d898c0, arg=0x2aaaacfdf890, kw=0x0) at Objects/abstract.c:2492
#43 0x00002b700143cd7f in instancemethod_call (func=<value optimized out>, arg=0x2aaaacfdf890, kw=0x0) at Objects/classobject.c:2579
#44 0x00002b700142d318 in PyObject_Call (func=0x7554690, arg=0x2aaaac04d050, kw=0x0) at Objects/abstract.c:2492
#45 0x00002b70014c0e16 in PyEval_CallObjectWithKeywords (func=0x7554690, arg=0x2aaaac04d050, kw=0x0) at Python/ceval.c:3575
#46 0x00002b70014f9dcd in t_bootstrap (boot_raw=0x2aaac76e67c0) at ./Modules/threadmodule.c:425
#47 0x00000033c720677d in start_thread () from /lib64/libpthread.so.0
#48 0x00000033c66d33ed in clone () from /lib64/libc.so.6 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T09:09:09.720

我得到了解决这个问题的方法，这最终让我和我的客户都松了一口气。

**这是原因和解决方案。**

函数“sa_GetBlue”和“sa_GetRed”返回“Py_False”。在返回“Py_False”或“Py_True”之前，您需要增加保存这些值的变量的引用计数，否则可能会破坏解释器的内存状态；它不会立即崩溃，但可能随时崩溃。就我而言，它在处理 20000 到 50000 个请求后崩溃了。

请查看下面的链接以了解更多关于我要解释的内容。

[为什么-does-python-keep-a-reference-count-on-false-and-true](https://stackoverflow.com/questions/1460454/why-does-python-keep-a-reference-count-on-false-and-true)

@doomster 和 @Omnifarious；感谢您提供的评论和指导。

# c# - ASP.NET 远程 Web 应用程序中的 Windows 身份验证 SSO

> ID：14814491
> 
> 赞同：0
> 
> 时间：2013-02-11T14:47:56.080
> 
> 标签：c#, asp.net, active-directory, single-sign-on

需要在我们的网站中实施*单点登录 (SSO)*，以便从 Intranet 访问它的用户不必输入他们的凭据。

这里的问题是该网站将托管在互联网上的远程服务器上。

有什么办法可以做到吗？

- 编辑 -

我查看了以下链接：

[http://en.wikipedia.org/wiki/Active_Directory_Federation_Services](http://en.wikipedia.org/wiki/Active_Directory_Federation_Services)

那里提到的示例场景正是我们所需要的。

### 以下是有关情况的详细说明：

有一个*Active Directory 域控制器*用于对 Intranet 中的用户进行身份验证。

一旦用户登录机器并打开远程网站，网站应该以某种方式验证用户是否已经使用 AD 凭据登录到 Intranet，并自动允许访问该网站。

此外，该网站应该获得可用于对用户进行身份验证的*安全令牌。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:55:04.427

当然，例如，Microsoft 将 Office365 连接到您的 Intranet 的方法称为[Active Directory Federation Services](http://en.wikipedia.org/wiki/Active_Directory_Federation_Services)。

它（作为大多数单点登录解决方案）并不完全直接，它假定您的 Intranet 上有一个域，但由于 Office365 使用它，它现在并且很可能在未来继续得到很好的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:44:00.487

只需将您的 Web 应用程序与您用于 SSO 的身份验证提供程序集成在一起即可。如果您使用 OAuth vs. Shibboleth vs. ADFS vs. 等，细节将会有很大的不同，因此您的问题中确实没有足够的信息来提供有用的答案。

# java - 如何在jtable中创建右键菜单

> ID：14814492
> 
> 赞同：1
> 
> 时间：2013-02-11T14:47:55.963
> 
> 标签：java, swing, drop-down-menu, menu, jtable

当用户右键单击 jtable 中的一行时，我想创建一个下拉菜单。有人可以建议我怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T15:13:35.990

这与其他`JPopupMenu`. 您在 中添加 a`MouseListener`并`JTable`在右键单击时显示`JPopupMenu`.

查看[Oracle 的菜单教程](http://docs.oracle.com/javase/tutorial/uiswing/components/menu.html#popup)

正如@kleopatra 所提到的，您还可以直接`JPopupMenu`在任何`JComponent`（或其后代，使用`setInheritsPopupMenu()`）上设置 a ，在适当的时候（即在大多数平台上右键单击），[`setComponentPopupMenu()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setComponentPopupMenu%28javax.swing.JPopupMenu%29)它会照顾您显示关联的`JPopupMenu`

# wpf - 我的画布垂直和水平拉伸，但里面的图像没有

> ID：14814494
> 
> 赞同：1
> 
> 时间：2013-02-11T14:48:01.583
> 
> 标签：wpf, xaml, vertical-alignment, stretch, alignment

我正在创建一个弹出菜单、一个 ToggleButton 和一个 Popup 控件。所有这些都包含在画布中。下图是我的应用程序的右下角。我将 Canvas 设置为位于 Index 1 列，延伸 2 列，位于倒数第二行。

![在此处输入图像描述](../Images/711e0488d61a8b4b49a68290d1243c26.png)

灰色图像只是一个占位符。从下面的 XAML 中，您可以看到我已将所有内容设置为拉伸。画布可以伸展，但没有其他作用。注释掉 StackPanel 和/或 Label 什么都不做。所以我相信两者都不是原因。ToggleButton 没有拉伸到 Canvas 的大小。

![在此处输入图像描述](../Images/9726b5f2cea17509c8cd6c2a4bd47047.png)

我做了一个截图，这样我就可以更好地突出这些相关部分。但是如果我需要粘贴代码，我可以。

*编辑*

更新的 XAML：

```
<Border BorderBrush="Green" BorderThickness="1" Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="2" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
            <Grid Name="ToggleButtonCanvas" Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" >
                <StackPanel Orientation="Vertical" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" >
                    <ToggleButton x:Name="btnPluginMenu" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                        <ToggleButton.Template>
                            <ControlTemplate TargetType="{x:Type ToggleButton}">
                                <Border x:Name="bdr" BorderThickness="0">
                                    <Border.Background>
                                        <ImageBrush ImageSource="< omitted >" Stretch="Fill" TileMode="None" />
                                    </Border.Background>
                                    <ContentPresenter VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="8,6,8,6" ContentSource="Content" />
                                </Border>
                            </ControlTemplate>
                        </ToggleButton.Template>
                    </ToggleButton>
                    <Label Canvas.Left="10" Canvas.Top="10" Content="Menu" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" />
                </StackPanel>
                <Popup Placement="Relative"  HorizontalOffset="-120" VerticalOffset="-130" PlacementTarget="{Binding ElementName=btnPluginMenu}" IsOpen="{Binding ElementName=btnPluginMenu, Path=IsChecked}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" PopupAnimation="Scroll">
                    <Grid Background="Gray">
                        <Grid.BitmapEffect>
                            <DropShadowBitmapEffect />
                        </Grid.BitmapEffect>
                    </Grid>
                </Popup>
            </Grid>
        </Border> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T15:05:36.600

Canvas 不会拉伸其子元素。请改用网格。

从MSDN中[Canvas](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas.aspx)文档中的备注：

> Canvas 是唯一没有固有布局特征的面板元素。Canvas 的默认高度和宽度属性为零，除非它是自动调整其子元素大小的元素的子元素。**Canvas 的子元素永远不会调整大小**，它们只是定位在指定的坐标处。这为不需要或不需要固有尺寸约束或对齐的情况提供了灵活性。对于您希望子内容自动调整大小和对齐的情况，通常最好使用 Grid 元素。

您可以在 XAML中简单地替换`Canvas`为。`Grid`无需定义行或列。

# mysql - 跨多个数据库共享用户表以实现单次登录

> ID：14814496
> 
> 赞同：1
> 
> 时间：2013-02-11T14:48:14.050
> 
> 标签：mysql, database, database-design, drupal-7

在我的 Drupal 7 安装中，我有：

1.  主站点：example.com
2.  子域：blog.example.com、forum.example.com（都在同一个域中）

我有这样的数据库设计：

*   主站点使用：main_db
*   子域使用：blog_db、forum_db（所有独立的数据库）

当用户在主站点注册时，他们也应该能够使用其他子域而无需一次又一次地注册。我可以将用户表从 main_db 复制/同步到其他数据库，但这不是合适的解决方案。因为它创建了 3 个相同数据的实例。

是否有任何解决方案可以将 users 表存储在 main_db 并通过其他 dbs 访问它？正确的术语是，如何将用户表从主数据库共享到其他数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:53:21.110

您可以从 MySQL 中的其他数据库进行查询。只需在表名前添加数据库前缀即可。

这是来自[SELECT 语句的文档](http://dev.mysql.com/doc/refman/5.0/en/select.html)：

> 您可以将默认数据库中的表称为 tbl_name 或 db_name.tbl_name 以显式指定数据库。

只需确保您编辑权限，以便您的用户可以访问所需的数据库。

# machine-learning - 在图像上使用 Weka

> ID：14814499
> 
> 赞同：5
> 
> 时间：2013-02-11T14:48:29.587
> 
> 标签：machine-learning, weka

我是 Weka 的新手，从如何使用它的示例中，我只看到了文本问题。我可以在 Weka 中使用带有机器学习分类器的图像吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-24T14:20:24.940

您可以使用**来自**.[`Trainable Weka Segmentation`](http://fiji.sc/Trainable_Weka_Segmentation)`Fiji/ImageJ`

该插件旨在**通过交互式学习进行细分**。这意味着用户需要选择一组特征（边缘检测器、纹理过滤器等），选择类的数量（默认有 2 个）并交互式地绘制（使用 ROI 工具）所有类的样本。基于这些样本训练分类器后，整个图像像素将被分类，分割结果将覆盖在原始图像上。这个想法是重复这个过程（绘图+训练），直到获得令人满意的分割。

该插件还提供了一组工具来保存/加载样本[`ARFF format`](http://www.cs.waikato.ac.nz/ml/weka/arff.html)并以.model格式保存/加载分类器，因此它与最新版本的WEKA完全兼容。

如果你想做的是**图像分类**，你也可以重用插件的一些方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T09:12:42.697

您可以使用开源图像处理应用程序，例如[`ImageJ`](http://rsb.info.nih.gov/ij/)和[`Fiji`](http://fiji.sc/)从图像中提取特征并将其用于`Weka`

斐济有一个名为[Advanced Weka Segmentation](http://fiji.sc/wiki/index.php/Advanced_Weka_Segmentation)的插件，在将 Weka 分类器应用于图像时应该非常有用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T15:38:16.250

Weka 机器学习分类器适用于数字和分类特征。在将 weka 用于图像之前，您需要从图像中[提取特征](http://en.wikipedia.org/wiki/Feature_extraction)。根据您的需要，平均、最大值、平均值等简单的特征可能就足够了。或者您可能需要为您的图像使用一些其他算法。

下面维基百科特征提取算法。

低级

*   边缘检测
*   拐角检测
*   斑点检测
*   脊检测
*   尺度不变特征变换

我建议阅读光学字符识别调查以了解它们的使用方式。OCR 是一个非常简单的示例供您使用。存在用于 OCR 的标准数据集和算法。因此，了解它是非常有指导意义的。

# javascript - 如果退出，HTML5 Like 按钮不显示

> ID：14814500
> 
> 赞同：2
> 
> 时间：2013-02-11T14:48:30.007
> 
> 标签：javascript, html, facebook-like, facebook-javascript-sdk, facebook-likebox

我搜索了互联网，甚至突然进入#facebook 无济于事。我已经尝试过 FBXML 代码，它的行为方式相同：如果您没有登录 Facebook，Like 按钮将不会呈现到页面。

奇怪的是代码被处理并且FB将它的魔力插入到我的类似fb的div中，但是所有可以看到的元素的宽度/高度都为0。就故障排除或发现任何有用的线索。

下面是我正在使用的代码。FB SDK 和类似 fb 的元素直接来自[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)。

在头部：

```
<meta property="fb:app_id" content="APP ID"/> 
```

就在body标签之前：

```
<div id="fb-root"></div>
<script>
    window.fbAsyncInit = function() {
        // Additional initialization code such as adding Event Listeners goes here
        FB.Event.subscribe('edge.create',
                function(response) {
                    $.trackEvent.apply(jQuery, ['Outbound Links', 'Click', 'Facebook']);
                }
        );
    };

    (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script> 
```

在页面正文中：

```
<div class="fb-like" data-href="http://www.facebook.com/mypage" data-send="false" data-layout="button_count" data-width="50" data-show-faces="false"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:01:58.157

我已经能够确认问题出在权限上！不是我的应用程序的权限，而是我打算让人们喜欢的我的 FB 页面的权限。

我的 FB 页面有 18 岁以上的年龄限制，这导致了这个问题。我删除了限制并将其设置为 13+，并且 jsFiddle 代码按预期工作。

如果没有 zeebonk 的帮助，我将无法做到这一点，他给了我一个直接的测试，让我可以开始推理过程。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T12:14:57.590

您需要确保的另一件事是您的 Facebook 页面实际上已发布，即对公众可见。当您第一次设置页面时，它默认为未发布。请务必取消选中 Facebook 页面设置的“管理权限”部分中标题为“页面可见性”的第一项。

有这个问题并尝试了一切来解决它。一旦我真正发布了页面，当我注销时，facebook 按钮就会开始出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T18:52:22.250

我刚刚遇到了完全相同的问题。如果我在同一个浏览器中登录 Facebook，它会显示类似框。如果我没有登录它就不会显示[在所有四种主要浏览器中都试过]。在高低搜索答案后，您只需在 Facebook 之类的页面设置中将年龄限制设置为“13 岁以上”即可解决问题。为 creativetim 提供解决方案的道具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-12T19:45:36.190

我遇到了同样的问题，将“页面可见性”从“未发布的页面”更改为“已发布的页面”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-30T15:02:12.940

As creativetim mentioned this is related to Facebook's display permissions. It is, however, not limited to the age restriction. You must remove Country restrictions as well.

# postgresql - 无法在 Windows 7 PC 上使用 pgAdmin 连接到 HP Cloud 中的 PPAS 实例

> ID：14814501
> 
> 赞同：0
> 
> 时间：2013-02-11T14:48:35.093
> 
> 标签：postgresql, cloud, remote-access, pgadmin, hp-cloud-services

使用 HP 云中的新 PPAS 映像，是否可以从在 Windows 7 PC 上运行的 pgAdmin 连接到该远程映像，*而无需先对云中的 PPAS 配置进行任何更改*？惠普云中的 PPAS 是否可以“开箱即用”地侦听远程连接？

我没有成功 - 收到服务器未在监听的错误。使用端口 5444，并将 pgAdmin 指向包含密钥对的文本文件，当我单击特定图像的“连接到服务器”链接时，HP 仪表板告诉我用于特定 PPAS 图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:23:33.257

服务器映像可能配置为侦听远程连接。您可以检查`netstat -tapn`并验证是否有一个进程正在侦听相应的端口。

可能您尚未将安全组配置为允许外部连接到端口 5554。将其添加到您的默认安全组，或创建一个新的安全组并在创建新服务器实例时使用它。

# ios - XCode：SQLite3：保持连接打开

> ID：14814515
> 
> 赞同：0
> 
> 时间：2013-02-11T14:49:14.670
> 
> 标签：ios, sqlite

我正在编写一个对 sqlite 数据库进行多次调用的 iPhone 应用程序。我的问题是，最好是打开并关闭每个查询的数据库连接，还是让它打开并在应用程序关闭时关闭它。

在我的应用程序中，有时我可能会循环多次迭代，并且每次都向数据库添加一行，但正如我现在所拥有的那样，对于每次迭代，我都会打开数据库，执行操作，然后关闭数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:16:40.647

我会让它在应用程序处于前台时一直保持打开状态，只有在它进入后台或收到内存警告时才关闭它。打开连接可能会很昂贵，所以我喜欢尽可能少地这样做，但是它可能会消耗可以在其他地方更好地使用的资源。

如果连接尚未打开，您需要编写所有数据库访问代码以打开连接；所以你可以随时关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:54:06.130

就个人而言，如果您要进行大量调用以更新数据库，那么我会尝试使其保持打开状态。如果有“块”逻辑可以让数据库保持打开状态，那就太好了，也许在应用程序运行时一直打开它可能不是最好的事情 - 但这真的取决于你的架构应用程序。

# laravel - 用户登录 laravel 4

> ID：14814526
> 
> 赞同：1
> 
> 时间：2013-02-11T14:49:50.350
> 
> 标签：laravel, laravel-4

无法登录任何人的想法？我仍然被重定向回登录页面

```
Route::post('login', function() {
   // get POST data
    $email = Input::get('username');
    $password = Input::get('password');
    if ( Auth::attempt(array('email' => $email,'password' => $password) ))
    {

        return Redirect::to('home');
    }
    else
    {
        // auth failure! lets go back to the login
        return Redirect::to('login')
            ->with('login_errors', true);

    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:00:50.233

改变

```
if ( Auth::attempt(array('email' => $email,'password' => $password) )) 
```

至

```
if ( Auth::attempt(array('username' => $email,'password' => $password) )) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T08:19:42.123

要将电子邮件用作用户名，请尝试将其添加到用户模型：

```
protected $primaryKey = 'email'; 
```

还要确保电子邮件是“用户”表上的主键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T13:33:45.303

Laravel 有一个设置可以让你将用户名指定为 'username' 或 'email' （或者任何你可以选择的），检查 config. 如上所示...

```
if ( Auth::attempt(array('username' => $email,'password' => $password) )) 
```

此外，Laravel 默认需要一个散列密码。

# internet-explorer-9 - 在 IE9 中使用 a4j:ajax 重新渲染问题

> ID：14814533
> 
> 赞同：1
> 
> 时间：2013-02-11T14:50:06.650
> 
> 标签：internet-explorer-9, richfaces

这可能是一个非常简单的。

我们正在尝试迁移到`JSF2`，到目前为止，我们正在使用**RF 4.2.0**和**Mojarra 2.1.1**

一切似乎都在 100% 工作，非常高兴。直到我们在`IE9`.

一切似乎都还可以，但在使用 a4j:ajax 时它不会重新渲染多个 id。这是一个例子：

```
<h:selectOneMenu id="idType" value="#{individualApplicationBean.customer.identificationType}" styleClass="default_select w250">
<f:selectItems value="#{selGeneral.defaultOption}" />
<f:selectItems value="#{selIdentificationTypes.identificationTypes}" />
<a4j:ajax event="blur" render="idTypeMsg" listener="#{individualAssetPersonal1.validateIDType}" />
<a4j:ajax event="change" render="idTypeMsg, passportPanel" listener="#{individualAssetPersonal1.validateIDType}" />
</h:selectOneMenu> 
```

此元素在`IE8`等中效果很好。`FireFox`但`IE9`只有模糊效果很好。更改有效，但它只呈现第一个元素，而不是 passportPanel。尝试重新呈现多个表单元素的所有类似元素都会发生这种情况。

当我们尝试 render=@form 时，它也在做一些非常奇怪的事情`IE9`。表单值被重置等。

我现在搜索了大多数论坛并尝试了一些不同的东西，但我就是无法让它工作。而且我也没有看到其他人在做我们现在的样子。

所以有人可以看看，让我知道我们做错了什么。也欢迎对这种方法有多么错误的任何评论。

提前致谢。

# wcf - 无法获得工作的 linq 子查询

> ID：14814537
> 
> 赞同：0
> 
> 时间：2013-02-11T14:50:17.303
> 
> 标签：wcf, linq, c#-4.0

我有以下 sql 查询，我正在尝试将其转换为 Linq，但无法使其完全正常工作。

```
 select l.nid,
         l.sName,
         l.language,
         coalesce(p.kLanguage, 0) kLanguage

   from vLanguage l
        left join
             (
                select pl.kLanguage, 
                       p.nid,
                       p.sName

                from vProductLanguage pl
                    left join vProduct p 
                           on pl.kProduct = p.nid
                where p.nid = 1
             ) p
  on l.nid = p.kLanguage
  where l.bClosed =0 
```

我已经在我的 WCF 服务中做到了这一点

```
 [WebInvoke(Method = "PUT", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, UriTemplate = "ProductLanguageList")]
    public List<LookUpProductLanguage> GetProductLanguageList()
    {
        var passedProductId = int.Parse("12");
        var query = from languageEntity in _languageEntityRepository.AsQueryable()
                    join subQueryResult in (from productLanguageEntity in _productLanguageEntityRepository.AsQueryable() join productEntity in _productRepository.AsQueryable() on productLanguageEntity.LanguageProductId equals productEntity.Id into joinedProductLanguage
                                            from productLanguageJoin in joinedProductLanguage.DefaultIfEmpty() where productLanguageJoin.Id.Equals(passedProductId)
                                            select new {LanguageId = productLanguageEntity.LanguageId}
                                           ) on languageEntity.Id equals  subQueryResult.LanguageId

        return null;
    } 
```

目前我已经返回 null 但希望返回 sql 查询中提到的列。我在 line join subQueryResult“无法从查询中推断出类型参数”附近收到错误。我在这是要干嘛？请纠正我，因为我确定我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:11:05.803

终于成功了。这是我的查询。

```
 [WebInvoke(Method = "PUT", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, UriTemplate = "ProductLanguageList")]
    public List<LookUpProductLanguage> GetProductLanguageList(GetParameters param)
    {
        var passedProductId = int.Parse(param.ProductId);
        var query = from languageEntity in _languageEntityRepository.AsQueryable()
                    join subQueryResult in
                        (from productLanguageEntity in _productLanguageEntityRepository.AsQueryable()
                         join productEntity in _productRepository.AsQueryable() on
                             productLanguageEntity.LanguageProductId equals productEntity.Id into
                             joinedProductLanguage
                         from productLanguageJoin in joinedProductLanguage.DefaultIfEmpty()
                         where productLanguageJoin.Id.Equals(passedProductId)
                         select new {productLanguageEntity.LanguageId}
                        ) on languageEntity.Id equals subQueryResult.LanguageId into a
                    from b in a.DefaultIfEmpty()
                    where languageEntity.Closed == 0 

                    select new LookUpProductLanguage {LanguageId = languageEntity.Id, LanguageName = languageEntity.Name,LanguageCode = languageEntity.Language,LanguageProductId = b.LanguageId  };

        return query.ToList();

    } 
```

非常感谢那些努力回答我的人。

# npapi - 如何从 NPVariant* 转换为 char*？

> ID：14814538
> 
> 赞同：0
> 
> 时间：2013-02-11T14:50:17.787
> 
> 标签：npapi

我有接收 NPVariant* 的 NPAPI 插件方法，我需要将其转换为 char*，我听说 NPVariant 不以 NULL 字符结尾，所以在处理参数之前我需要将其转换为 char* ，谁能告诉我如何转换它到char *？

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:59:54.363

NPVariant 有一个`type`and `value`，值有一个`stringValue`包含指针 UTF8Characters 和 UTF8Length 的值，所以它也告诉你长度。

例如：

```
NPVariant yourVariant; //Pretend this is initialized
if (yourVariant.type == NPVariantType_String) {
    const NPUTF8* characters = yourVariant.value.stringValue.UTF8Characters;
    int length = yourVariant.value.stringValue.UTF8Length;
} 
```

UTF8Characters 是一个 NPUTF8，它可能是一个 char 的 typedef。

知道长度后，您可以构建自己的以 null 结尾的 char*。

# wordpress - 在 Wordpress 主题中向 jquery-isotope 添加过滤

> ID：14814541
> 
> 赞同：0
> 
> 时间：2013-02-11T14:50:26.510
> 
> 标签：wordpress, filtering, jquery-isotope

我在 Wordpress 中使用[Vitrux](http://themeforest.net/item/vitrux-responsive-fullscreen-portfolio-wp-theme/2992618)主题，它使用[Isotope jQuery 插件](http://isotope.metafizzy.co/)来显示作品集。Isotope 允许使用类别对项目进行排序，但在主题内，一次只能按一个类别排序（例如“年份”*或*“类型”，而不是“年份”*和*“类型”。

你可以在这里看到一个模型：http: [//snaprockandpop.samcampsall.co.uk/shoots/](http://snaprockandpop.samcampsall.co.uk/shoots/)

附加到每个类别项目的 jQuery 用于对帖子进行排序，如下所示：

```
function (){
                  var selector = $(this).attr('data-filter');
                  $container_isotope.isotope({ filter: selector });
                  var $parent = $(this).parents(".filter_list");
                  $parent.find(".active").removeClass('active');
                  $(".filter_list").not($parent).find("li").removeClass('active').first().addClass("active");
                  $(this).parent().addClass("active");
                  return false;
                } 
```

我可以从 Isotope 网站看到可以使用多个过滤器，我在这里找到了作者的注释：http: [//jsfiddle.net/desandro/pJ6W8/31/](http://jsfiddle.net/desandro/pJ6W8/31/)

编辑：编辑主题文件允许我为过滤器列表分配适当的类和属性（您可以在页面源代码中看到这些），并且我通过 jsfiddle 的编辑版本来定位它们以反映类和 id 在主题造型：

```
$( function() {
var $container = $('#portfolio_container');

    $container.isotope({

      animationOptions: { duration: 300, easing: 'linear', queue: false },
      getSortData : {
      year : function ( $elem ) { return parseFloat( $elem.find('._year').text() ); },
      live-shows : function ( $elem ) { return parseFloat( $elem.find('._live-shows').text() ); }
      }
    });

var filters = {};
$('.ql_filter a').click(function(){

var $this = $(this);
 if ( $this.hasClass('selected') ) {
    return;
  }
  var $optionSet = $this.parents('.filter_list');
  $optionSet.find('.active').removeClass('active');
  $this.addClass('active');

  var group = $optionSet.attr('data-filter-group');
  filters[ group ] = $this.attr('data-filter');

  var isoFilters = [];
  for ( var prop in filters ) {
    isoFilters.push( filters[ prop ] )
  }

  var selector = isoFilters.join('');
  $container.isotope({ filter: selector });
  return false;
  });
}); 
```

两件（相当重要的）事情：

1) 我不是 100% 正确地编辑了这个。尽管 Rich 发表了出色的评论，但我仍然无法理解。我特别不清楚如何设置“getSortData”部分 - 我认为这是正确的，但任何输入都会很棒。

2) 我不确定这个 JavaScript 是否正在启动。目前我已经将它放在结束 head 标签之前，但页面上的检查表明上面概述的原始脚本是在过滤器项目上运行的脚本。

在这个阶段的任何指示都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:11:00.337

我明白你的意思了。您正在寻找两个过滤器的交集，而不是互斥的过滤器值。

简短回答：联系主题供应商，看看他们是否可以为您制作交叉路口过滤器。

更长的帮助（不是答案）：

您的最终目标是让 Vitrux 主题以您想要的方式工作。
您的第一个目标是了解 jsfiddle 代码在做什么。
我可以通过解释代码来处理您的第一个目标。

```
// hook into the JQuery Document Load event and run an anonymous function
$( function() {

    // Create a variable called container
    // make container refer to the element with ID Container
    var $container = $('#container');

        // initialize isotope
        // Call the isotope method on the container element

        $container.isotope({

          // options...
          //distracting options

          animationOptions: { duration: 300, easing: 'linear', queue: false },
          getSortData : {
          price : function ( $elem ) { return parseFloat( $elem.find('.price').text() ); },
          size : function ( $elem ) { return parseFloat( $elem.find('.size').text() ); }
          }
        });

    // sorting button

    //for the anchor tag that has a class of 'pricelow', wire up an anonymous function to the click event

    $('a.pricelow').click(function(){

     //Rerun the isotope method when it is clicked, pass an array of options as a parameter
      $('#container').isotope({ sortBy : 'price',sortAscending : true });
     //return false for the anonymous function.  Not 100% sure why this is necessary but it has bitten me before
      return false;
    });

  //removed the rest of the click methods, because it does the same thing with different params

  //Here is what you are interested in understanding
  //Create an empty filters object
  var filters = {};

    // filter buttons
    //When an anchor tag with class filters is clicked, run our anonymous function
    $('.filters a').click(function(){

      //Create a variable that is the action anchor element
      var $this = $(this);
      // don't proceed if already selected by checking if a class of "selected" has already been applied to the anchor
      if ( $this.hasClass('selected') ) {
        return;
      }

      //Create an optionSet Variable, point it to the anchor's parent's class of "option-set"
      var $optionSet = $this.parents('.option-set');
      // change selected class
      //Inside the optionSet, find elements that match the "selected" class and then remove the "selected class"
      $optionSet.find('.selected').removeClass('selected');
      // set this (the anchor element) class to "selected"
      $this.addClass('selected');

      // store filter value in object
      // create a variable called 'group' that points to the optionsSet variable and grab the data-filter-group expando attribute
      var group = $optionSet.attr('data-filter-group');
      //Append to the filters object at the top of this section and set the data-filter-group value to the anchor tag's data-filter value
      filters[ group ] = $this.attr('data-filter');

      //create an isoFilters array variable
      var isoFilters = [];

      //Loop through each one of the items in filters (give the item an alias variable called 'prop'
      for ( var prop in filters ) {
      //push the prop into the isoFilters array (the opposite is pop)
        isoFilters.push( filters[ prop ] )
      //keep looping until there are no more items in the object
      }
      //create a variable called selector and turn the array into a string by joining all of the arrays together
      var selector = isoFilters.join('');
      //Like always, call the 'isotope' method of the 'container' element and pass our newly concatenated 'selector' string as the 'filter' option.
      $container.isotope({ filter: selector });
      //return false for some reason (maybe someone can expand on that)
      return false;
    });

}); 
```

接下来是您的最终目标，即修改 Vitrux 主题以处理交叉过滤器。

这有点棘手，因为

1.  您已从 PHP 自动生成标签以创建类别链接和年份过滤器。因此，肯定会有一些 PHP 代码更改。
2.  您必须转换 jsfiddle 代码以处理您的 PHP 更改

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:26:33.497

尝试使用 jQuery noconflict。实际上，用“jQuery”替换任何“$”，看看它是否有效。

Wordpress 不能很好地处理美元符号。

# android - 带有触摸事件的移动图像视图

> ID：14814542
> 
> 赞同：8
> 
> 时间：2013-02-11T14:50:31.610
> 
> 标签：android, layout, touch, imageview

我只想要一个简单的东西。我有一个`imageview`，我可以用触摸移动它

这是我的代码，如果错了，我很抱歉，因为我自己试过了

```
img.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View arg0, MotionEvent arg1) {
        // TODO Auto-generated method stub
        if (arg1.getAction() == MotionEvent.ACTION_DOWN) {
            status = StartDrag;
        } else if (arg1.getAction() == MotionEvent.ACTION_UP) {
            status = StopDrag;
        }
        return false;
    }
});

@Override
public boolean onTouchEvent(MotionEvent event) {
    // TODO Auto-generated method stub

    if (status == StartDrag) {
        params.leftMargin = (int) event.getX();
        params.topMargin = (int) event.getY();
        img.setLayoutParams(params);
    }
    return super.onTouchEvent(event);
} 
```

你能告诉我正确的方法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2016-02-01T11:15:33.913

我已经这样做了：

```
private float xCoOrdinate, yCoOrdinate; 
```

**onCreate()**：

```
ImageView imageView = (ImageView)findViewById(R.id.imageView);
imageView.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View view, MotionEvent event) {
        switch (event.getActionMasked()) {
            case MotionEvent.ACTION_DOWN:
                xCoOrdinate = view.getX() - event.getRawX();
                yCoOrdinate = view.getY() - event.getRawY();
                break;
            case MotionEvent.ACTION_MOVE:
                view.animate().x(event.getRawX() + xCoOrdinate).y(event.getRawY() + yCoOrdinate).setDuration(0).start();
                break;
            default:
                return false;
            }
       return true;
    }
}); 
```

**完毕**

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-11T16:08:55.117

`onTouch`拖动视图的事件非常适合`RelativeLayout`和的子视图`FrameLayout`。

这是一个例子：

```
@Override
public boolean onTouch(View v, MotionEvent event){
        switch(event.getAction())
        {
            case MotionEvent.ACTION_DOWN :
            {
                x = event.getX();
                                    y = event.getY();
                dx = x-myView.getX();
                dy = y-myView.getY();
            }
            break;
            case MotionEvent.ACTION_MOVE :
            {
                myView.setX(event.getX()-dx);
                myView.setY(event.getY()-dy);
            }
            break;
            case MotionEvent.ACTION_UP :
            {
                //your stuff
            }
        return true;
} 
```

现在要做`dx`的`dy`是，在`ACTION_DOWN`它上记录您在视图上触摸的位置，并与视图的左侧 (x) 和顶部 (y) 取得差异，以在`ACTION_MOVE`.

`true`如果您参加，则必须返回触摸事件。

**更新：对于 API 8**

在 API 8 的情况下，`getX()`and`getY()`方法没有给出正确的结果，所以你可以使用的是`getRawX()`and`getRawY()`方法。

例子 ：

```
RelativeLayout.LayoutParams parms;
LinearLayout.LayoutParams par;
float dx=0,dy=0,x=0,y=0;

@Override
public boolean onTouch(View v, MotionEvent event) {
    switch(event.getAction())
    {
        case MotionEvent.ACTION_DOWN :
        {
            parms = (LayoutParams) myView.getLayoutParams();
            par = (LinearLayout.LayoutParams) getWindow().findViewById(Window.ID_ANDROID_CONTENT).getLayoutParams();
            dx = event.getRawX() - parms.leftMargin;
            dy = event.getRawY() - parms.topMargin;
        }
        break;
        case MotionEvent.ACTION_MOVE :
        {
            x = event.getRawX();
            y = event.getRawY();
            parms.leftMargin = (int) (x-dx);
            parms.topMargin = (int) (y - dy);
            myView.setLayoutParams(parms);
        }
        break;
        case MotionEvent.ACTION_UP :
        {

        }
        break;
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-30T08:19:28.887

[![在此处输入图像描述](../Images/a82c42d1edb8905ba4a5ba5ed8c07f0e.png)](https://i.stack.imgur.com/yT643.jpg)

我遇到了同样的问题并设法解决了这个问题。也就是说，在屏幕上拖动图像，除了放大和缩小并以编程方式在android中的framelayout上旋转图像。试试这个博客文章中的源代码

[**Android在imageview中旋转缩放拖动图像触摸示例**](http://whats-online.info/science-and-tutorials/98/Android-rotate-zoom-drag-image-in-imageview-on-touch-example/)...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-11T08:59:41.193

```
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            StickerRelativeLayout = (RelativeLayout) findViewById(R.id.shsticker_relativeLayout1);
            RelativeLayout.LayoutParams layoutParams;
            layoutParams = new RelativeLayout.LayoutParams(
                    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            final ImageView view = new ImageView(getApplicationContext());
            view.setPadding(10, 10, 10, 10);
            view.setImageResource(shstickerBaseAdaptor.shstickerImage[arg2]);
            view.setOnTouchListener(new OnTouchListener() {

                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    windowwidth = getWindowManager().getDefaultDisplay()
                            .getWidth();
                    windowheight = getWindowManager().getDefaultDisplay()
                            .getHeight();

                    android.widget.RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) view
                            .getLayoutParams();
                    switch (event.getActionMasked()) {
                    case MotionEvent.ACTION_DOWN:
                        Toast.makeText(ImageEditingClass.this,
                                "hii rma jee", Toast.LENGTH_SHORT).show();
                        break;
                    case MotionEvent.ACTION_MOVE:

                        RelativeLayout.LayoutParams mParams = (RelativeLayout.LayoutParams) view
                                .getLayoutParams();
                        int x_cord = (int) event.getRawX();
                        int y_cord = (int) event.getRawY();
                        if (x_cord > windowwidth) {
                            x_cord = windowwidth;
                        }
                        if (y_cord > windowheight) {
                            y_cord = windowheight;
                        }

                        layoutParams.leftMargin = x_cord - 15;

                        layoutParams.topMargin = y_cord -100;

                        layoutParams.rightMargin = x_cord - 50;
                        layoutParams.bottomMargin = x_cord - 50;
                        view.setLayoutParams(layoutParams);
                        break;
                    default:
                        break;
                    }
                    return true;
                }
            });
            // setText(++ViewGenerate + " hii this new");

            StickerRelativeLayout.addView(view, layoutParams);
            // }
            Toast.makeText(ImageEditingClass.this, "you click" + arg2,
                    Toast.LENGTH_SHORT).show();

        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-18T08:48:54.110

如果您想向任何方向移动图像，您需要确定方向，您应该按照以下步骤步骤 -1 float dx = 0, dy = 0, x = 0, y = 0, z = 0, w = 0 , dz = 0, dw = 0; {这你们四个坐标}

```
public void StickerPopulate(){
    LinerLayoutInfate.removeAllViews();

    shstickerBaseAdaptor = new ShstickerBaseAdaptor(getApplicationContext());
    View shstickerView = getLayoutInflater().inflate(R.layout.shareimage,
            null);
    Gallery shsticker_gallery = (Gallery) shstickerView
            .findViewById(R.id.shsticker_gallery);
    shsticker_gallery.setAdapter(new ShstickerBaseAdaptor(
            ImageEditingClass.this));

    shsticker_gallery.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            StickerRelativeLayout = (RelativeLayout) findViewById(R.id.shsticker_relativeLayout1);
            RelativeLayout.LayoutParams layoutParams;
            layoutParams = new RelativeLayout.LayoutParams(
                    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

            final ImageView crossBtn = new ImageView(
                    getApplicationContext());
            crossBtn.setBackgroundResource(R.drawable.cross);

            crossBtn.setMaxWidth(300);
            crossBtn.setMaxHeight(200);
            crossBtn.setPadding(10, 10, 10, 10);
            final ImageView view = new ImageView(getApplicationContext());

            view.setImageResource(shstickerBaseAdaptor.shstickerImage[arg2]);

            view.setOnTouchListener(new OnTouchListener() {

                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    windowwidth = getWindowManager().getDefaultDisplay()
                            .getWidth();

                    windowheight = getWindowManager().getDefaultDisplay()
                            .getHeight();

                    android.widget.RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) view
                            .getLayoutParams();
                    switch (event.getActionMasked()) {
                    case MotionEvent.ACTION_DOWN:
                        dx = event.getRawX() - layoutParams.leftMargin;
                        dy = event.getRawY() - layoutParams.topMargin;
                        dz = event.getRawX() - layoutParams.bottomMargin;
                        dw = event.getRawX() - layoutParams.rightMargin;

                        break;
                    case MotionEvent.ACTION_MOVE:

                        RelativeLayout.LayoutParams mParams = (RelativeLayout.LayoutParams) view
                                .getLayoutParams();

                        x = event.getRawX();
                        y = event.getRawY();
                        layoutParams.leftMargin = (int) (x - dx);

                        layoutParams.topMargin = (int) (y - dy);
                        layoutParams.bottomMargin = (int) (z - dz);
                        layoutParams.rightMargin = (int) (w - dw);

                        view.setLayoutParams(layoutParams);

                        break;

                    default:
                        break;
                    }
                    return true;
                }
            });
            StickerRelativeLayout.addView(crossBtn, layoutParams);

            StickerRelativeLayout.addView(view, layoutParams);
            // }
            Toast.makeText(ImageEditingClass.this, "you click" + arg2,
                    Toast.LENGTH_SHORT).show();

        }

    });
    LinerLayoutInfate.addView(shstickerView);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-12T22:23:56.287

以下代码允许拖动和移动视图。

```
import android.view.*;
import android.view.View.*;

public class DragMove<T extends View> implements OnTouchListener
{
    private final  T view;
    private int leftOffset;
    private int topOffset;

    public DragMove(T dragable)
    {
        this.view = dragable;
        this.view.setOnTouchListener(this);
    }

    @Override
    public boolean onTouch(View p1, MotionEvent event)
    {
        /*
        public static int pxFromDp(double dp, View v)
        {
            Activity context = (Activity)v.getContext();
            return pxFromDp(dp, context);
        }

        public static int pxFromDp(double dp, Activity context)
        {
            float logicalDensity = getDensity(context);
            int px = (int) Math.round(dp * logicalDensity);
            return px;
        }
        */

        int x = GuiUtils.pxFromDp(event.getRawX(), view);
        int y = GuiUtils.pxFromDp(event.getRawY(), view);

        switch (event.getAction())
        {
            case MotionEvent.ACTION_DOWN :
                {
                    // calculates offset to current coordinate,
                    // keeps position relative (from jumping) during move
                    ViewGroup.LayoutParams parms = view.getLayoutParams();
                    // e.g. = x - params.leftMargin
                    leftOffset = x - Layout.readLeftMargin(parms);
                    topOffset = y - Layout.readTopMargin(parms);
                }
                return true;
            case MotionEvent.ACTION_MOVE :
                {
                    // adjust by touch position retaining touch
                    // offset at start
                    ViewGroup.LayoutParams parms = view.getLayoutParams();
                    // e.g params.leftMargin = x - leftOffset
                    Layout.writeLeftMargin(parms, x - leftOffset);
                    Layout.writeTopMargin(parms, y - topOffset);
                    view.setLayoutParams(parms);
                }
                return true;
        }
        return false;
    }
} 
```

# c# - 如何获取操作方法返回的视图 Uri？

> ID：14814544
> 
> 赞同：0
> 
> 时间：2013-02-11T14:50:37.477
> 
> 标签：c#, .net, asp.net-mvc-3, uri, actionmethod

我需要将一些对象序列化为 xml，它具有字符串属性“Url” - 某些操作方法返回的页面 url（在 asp.net mvc 3 应用程序中，我想实现自定义 rss）。

我想调用action方法我只需要实例化这个方法所属的控制器:)

```
MyController c = new MyContrroller();
c.MyActionMethod(); 
```

但是我怎样才能得到这个action方法返回的页面的url呢？

**编辑 1：**正如@SLaks 回答的那样，我们可以`Url.Action()`用来获取操作方法 url，但我怎样才能将此 url 传递给 xml 文件？如果我只是将结果分配给`Url.Action()`它`link`，它将显示字符串：MyController/MyAction。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:54:49.860

操作方法返回的页面没有 URL。

相反，操作方法本身具有来自路由引擎的 URL。

您可以通过调用来获取操作的 URL `Url.Action(actionName, controllerName)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:36:29.210

我认为没有内置的方式来做你需要的。您必须手动完成。例如如下：

```
public static class UrlExtension
{
    public static string ToAbsoluteUrl(this string relativeUrl, HttpContext httpContext)
    {
        string http = "http" + (httpContext.Request.IsSecureConnection ? "s" : string.Empty);
        string host = httpContext.Request.Url.Host;
        string port = httpContext.Request.Url.Port == 80 ? string.Empty : string.Format(":{0}", httpContext.Request.Url.Port);            

        return string.Format("{0}://{1}{2}{3}", http, host, port, relativeUrl);
    }
} 
```

例子：

```
<a href="@Url.Action("Index", "Home").ToAbsoluteUrl(HttpContext.Current)">Index</a>
<a href="@Url.Action("TestAction", "Home").ToAbsoluteUrl(HttpContext.Current)">TestAction</a> 
```

渲染结果：

```
<a href="http://localhost/">Index</a>
<a href="http://localhost/Home/TestAction">TestAction</a> 
```

# php - 将 Unicode 字符转换为等效的 ASCII 字符

> ID：14814547
> 
> 赞同：4
> 
> 时间：2013-02-11T14:50:48.177
> 
> 标签：php, unicode, character-encoding, iconv, transliteration

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T15:26:47.247

你选择了一个难题。最好告诉输入 Unicode 字符的用户自己音译 ASCII。为他们这样做只会在他们不同意您的音译时让他们感到不安。

你所做的任何事情都可能对那些对变音符号赋予重要意义的人感到不安和冒犯：[http ://en.wikipedia.org/wiki/Diacritic](http://en.wikipedia.org/wiki/Diacritic)

无论您使用何种音译策略，您都不会取悦所有人，因为不同的人对不同的字符规定了不同的含义。让一个人高兴的音译会激怒另一个人。除非你让每个人在 Unicode 中使用他们想要的任何字符，否则你不会让每个人都开心。

但是生活是不和谐和令人反感的，所以我们走吧：

这个 PHP 代码：

```
function toASCII( $str )
{
    return strtr(utf8_decode($str),
        utf8_decode(
        'ŠŒŽšœžŸ¥µÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖØÙÚÛÜÝßàáâãäåæçèéêëìíîïðñòóôõöøùúûüýÿ'),
        'SOZsozYYuAAAAAAACEEEEIIIIDNOOOOOOUUUUYsaaaaaaaceeeeiiiionoooooouuuuyy');
} 
```

上述 PHP 函数所做的是将 utf8_decode 的第一个参数中的每个 Unicode 字符替换为 utf8_decode 的第二个参数中的相应字符。

例如，Unicode`À`被音译为 ASCII `A`，而`å`被转换为`a`. 您必须为您认为音译为 ASCII 字符的每个 Unicode 字符指定此项。对于其他人，删除它们或通过另一种音译算法运行它们。

还有 95,221 个其他字符需要您查看，它们可能会转译为 ASCII。它变成了“什么时候`A`不再是`A`？”的存在主义游戏。那些看起来像 A 的克林贡字符和路线图标志呢？鱼字符看起来像一个`a`。谁来说什么是什么？

这是很多工作，但是如果您正在清理数据库输入，则必须创建一个字符白名单并阻止其他野蛮人，将他们排除在护城河之外，这是唯一可靠的方法。

# hibernate - Inserting Encrypted data in postgres

> ID：14814549
> 
> 赞同：0
> 
> 时间：2013-02-11T14:51:12.953
> 
> 标签：hibernate, postgresql

In our database, credit card number is encrypted, to store encrypted data in postgresql database we are doing following way.

```
\set pubkey '''' `sed -e "s/'/''/g"  -e 's/\\n/\\r\\n/g'  -e  's/\\/\\\\/g' < /home/vinit/fnpub.key` '''' 

 \set pvtkey '''' `sed -e "s/'/''/g"  -e 's/\\n/\\r\\n/g'  -e  's/\\/\\\\/g' < /home/vinit/fnpvt.key` '''' 

select pgp_pub_decrypt(number, dearmor(:pvtkey),'testypassword' ) from payment_detail limit 2; 
```

Application is using hibernate, how to insert data with encryption and read decrypted data using hibernate?

Thanks!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:11:14.040

首先，我认为您的密钥管理还有很多不足之处。您将在密钥管理方面遇到很多问题。请先阅读 Craig 在这个问题上对我的出色回复：[https ://dba.stackexchange.com/questions/35296/database-encryption-and-key-management-with-pg-crypto](https://dba.stackexchange.com/questions/35296/database-encryption-and-key-management-with-pg-crypto)

在这种情况下，您可能应该将用户密钥存储在数据库中的某个位置，受密码保护，然后使用这些密钥来加密信用卡号的对称密钥。然后，您可以使用公钥加密这些密钥，以确保只有授权用户才能访问它们。事实是您将不得不将密钥存储在某个地方。

现在在我的应用程序中，我们希望只有两三个人可以访问，并且每个人都可以访问所有密码。因此，加密密码的查询如下所示：

```
SELECT pgp_sym_encrypt($1, -- new password
                  pgp_pub_decrypt(last_resort_key,
                                  pgp_sym_decrypt_bytea(priv_key, $2) -- current passphrase
                  ))
  FROM user_key
 WHERE login = session_user; 
```

（在这里使用 libpq 格式）。请注意，我们使用 pg 用户作为应用用户。

一旦您在数据库中拥有相关数据，您的 sql 查询就可以相对简单地编写。

请注意，错误日志可能会显示密钥或更糟。您可能希望保留尽可能少的日志并尽可能短地保留它们

# xml - GTFS in OpenTripPlanner

> ID：14814555
> 
> 赞同：3
> 
> 时间：2013-02-11T14:51:35.680
> 
> 标签：xml, gtfs, opentripplanner

Iam Working on a tripplanner, i got a problem, that my GTFS won't work. The OSM files is loaded in correctly, the tripplanner now makes the fastest route from point A to B, but it does not take busses into consideration. Only walking.

My GTFS file is here: [http://www.rkt.no/gt/google_transit.zip](http://www.rkt.no/gt/google_transit.zip).

Iam using OpenTripPlanner.

Any idea what i can do to make it work? Thank you for answers.

Here is what my graph-builder.xml looks like:

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd">

    <bean id="gtfsBuilder" class="org.opentripplanner.graph_builder.impl.GtfsGraphBuilderImpl">
        <property name="gtfsBundles">
            <bean id="gtfsBundles" class="org.opentripplanner.graph_builder.model.GtfsBundles">
                <property name="bundles">
                    <list>
                        <bean class="org.opentripplanner.graph_builder.model.GtfsBundle">
                            <property name="path" value="C:\Users\Mesel\Downloads\google_transit.stops.zip" />

                            <!-- By default, bikes may only be taken along on transit trips if the GTFS data allows them to be.
                                 If the GTFS data doesn't contain appropriate data, but the actual transit trips do allows bikes
                                 to be taken along, a defaultBikesAllowed property may be specified to allow bikes.
                             -->
                            <property name="defaultBikesAllowed" value="true" />
                        </bean>
                    </list>
                </property>
            </bean>
        </property>

        <!-- GTFS-rt ALERTS -->
        <property name="gtfsGraphBuilders">
            <list>
                <bean class="org.opentripplanner.graph_builder.impl.transit_index.TransitIndexBuilder" />
            </list>
        </property>
    </bean>

    <!-- Configure the GraphBuilderTask -->
    <bean id="graphBuilderTask" class="org.opentripplanner.graph_builder.GraphBuilderTask">
        <!-- The path where the graph bundle will be written -->
        <property name="path" value="C:/otp" />
        <property name="graphBuilders">
            <list>
                <!-- Include an OpenStreetMap graph builder plugin -->
                <bean class="org.opentripplanner.graph_builder.impl.osm.OpenStreetMapGraphBuilderImpl">
                    <property name="provider">
                        <!-- Use an OSM provider that will automatically download OSM data in a specified region -->
                        <bean class="org.opentripplanner.openstreetmap.impl.RegionBasedOpenStreetMapProviderImpl">
                            <property name="regionsSource">
                                <!-- The region to collect OSM data -->
                                <bean class="org.opentripplanner.openstreetmap.impl.FixedRegionSourceImpl">
                                    <property name="latFrom" value="58.896" />
                                    <property name="lonFrom" value="5.70873" />
                                    <property name="latTo" value="58.9122" />
                                    <property name="lonTo" value="5.75117" />
                                </bean>
                            </property>
                            <!-- Specify where downloaded OSM data will be cached -->
                            <property name="cacheDirectory" value="C:/otp/test" />
                        </bean>
                    </property>
                    <property name="defaultWayPropertySetSource">
                        <bean class="org.opentripplanner.graph_builder.impl.osm.DefaultWayPropertySetSource" />
                    </property>
                </bean>
            </list>
        </property>
    </bean>
</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-15T20:09:02.540

你验证过你的 GTFS 文件吗？

# c# - Converting string to unknown primitive type (best guess)

> ID：14814556
> 
> 赞同：0
> 
> 时间：2013-02-11T14:51:38.253
> 
> 标签：c#, .net, type-conversion, string-parsing

Obviously this isn't something you would want to do unless you're in a helpless situation, but does anyone have a good example of something like this (bonus points for thinking of a clearer method name):

```
public static object ConvertToBestGuessPrimitive(string toConvert)
{
    if(looksLikeAnInt)
    {
        return as an int;
    }
    else if(looksLikeABoolean)
    {
        return as a boolean;
    }
    else
    {
        return as a string;
    }
} 
```

The only idea I had was to chain together a bunch of TryParse methods together in a sensible order and fall back to string if nothing works. Can anyone think of something better? This question has probably already been answered somewhere, but I can't seem to find any useful results with the overly generic search terms being used.

Edit - Since there's been some criticism of how useful this would be without an example, here's one I came up with to satisfy a concrete need (however implausible)...Say I am parsing an error log file that I get from an uncontrolled source. The log file has method names and arguments that were provided for where the error occurred. I want to automate testing the error conditions by finding the best matched method and arguments and attempting to call them again. Maybe a stupid example (please don't try and come up with "but you could do this in this scenario" responses since this is just an example), but it illustrates a few points: 1) The input is out of my control. 2) The best-guess is based on some criteria for finding a suitable match. For example: a "10/2/2012" is more likely to mean a DateTime than a string.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:07:59.910

所以你想摆脱 if-else 吗？像这样的东西怎么样：

```
interface IConverter
{
  bool TryConvert(string obj, out object result);
}

class IntConvert : IConverter
{
  public bool TryConvert(string obj, out object result) { /* stuff here */ }
}

class BoolConverter : IConverter {...}

// etc.
List<IConverter> converters = new List<IConverter>();
converters.Add(new IntConvert());
converters.Add(new BoolConvert());

public static object ConvertToBestGuessPrimitive(string toConvert)
{
  object obj;
  foreach(var converter in converters) {
    if(converter.TryConvert(toConvert, out obj))
       return obj;
  }

  return null;
} 
```

更新：感谢 Servy 的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:05:09.873

实际上，尝试解析是最合理的方式，因为解析是特定于文化的。如果您只是要求 .NET Framework 进行解析，您将自动遵守当前的文化设置。这与手动解析方法（可能基于正则表达式）形成对比。

另外，我不知道任何字符串可以在 bool、int、float 和 DateTime 之间进行模棱两可的解释。（明显的例外是任何 int 也是浮点数，因此首先解析 int）。

一个更好的名字将是`ConvertToBestGuessPrimitiveType`。我添加了“类型”。

# spring - mybatis 3.1 + sprinng 3.2 properties

> ID：14814560
> 
> 赞同：0
> 
> 时间：2013-02-11T14:51:50.157
> 
> 标签：spring, properties, mybatis

We have 4 applications running on a Tomcat7 server. The existing applications work on Hibernate and Spring. The backend is connected to a second database and some old schemas are kept here live. Each schema is called xxx_live and xxx_test.

When the Tomcat server starts, a JNDI property is set for the right environment.

*   Test
*   Local
*   Live

The properties are parsed on an extention of the PropertySourcesPlaceholderConfigurer class:

```
public class GenericPropertySourcesPlaceholderConfigurer extends PropertySourcesPlaceholderConfigurer {

private String application;
private String environment;
private static final String ENVIRONMENT = "environment";

public GenericPropertySourcesPlaceholderConfigurer(String application) throws IOException {
    this.application = application;

    this.environment = System.getProperty(ENVIRONMENT);
    if (this.environment == null) {
        this.environment = System.getenv().get(ENVIRONMENT);
    }
    initPropertySources();
}

/**
 * setup default properties configuration
 * Default configuration properties look like :
 * app-global.properties
 * app-environment.properties
 * jndi properties
 */
private void initPropertySources() throws IOException {

    MutablePropertySources propertySources = new MutablePropertySources();

    propertySources.addLast(new ResourcePropertySource(new ClassPathResource(MessageFormat.format("properties/{0}-global.properties", application))));
    propertySources.addLast(new ResourcePropertySource(new ClassPathResource(MessageFormat.format("properties/{0}/{1}.properties", environment, application))));
    propertySources.addLast(new NotFailingJndiPropertySource("jndi"));

    setPropertySources(propertySources);
    setIgnoreResourceNotFound(false);
    setIgnoreUnresolvablePlaceholders(true);
}
} 
```

Now we're migrating everything to MyBatis. Is there a way to inject or parse these properties into my XML configuration? Something like:

```
<select id="findAllUsers" parameterType="list" resultType="user">
      SELECT * FROM ${mybatis.default_schema}.USER
    </select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:09:41.497

是的，你绝对可以通过这个属性。

DAO 层中的函数声明（spring 中 mybatis 的 JAVA Mapper）就像

```
List<User> findAllUsers(@Param("schemaName") String schemaName) 
```

当您调用此函数时，将模式名称作为参数传递。

一些建议（假设你是 MyBatis 新手）

1.  您应该在 context.xml 中使用 spring 的 util 标记来配置您的属性，
    即`<util:properties id="mailProps" location="classpath:mail.properties" />`

2.  使用 spring 扫描 Mappers 和 Autowire（再次在 context.xml 中）

    ```
    <bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
        <property name="basePackage" value="com.foo.bar" />
    </bean> 
    ```

    `com.foo.bar`代表 XML 的 Java 接口所在的包在哪里。
    这样，您实际上将使用弹簧的好处，即`DI / IOC`

3.  `parameterType`将`String`或`java.lang.String`不列出。

如果您需要进一步的帮助/有任何疑问，请随时询问。

谢谢。

# javascript - Appending Content To A Div, Then Trying To Slidedown

> ID：14814565
> 
> 赞同：1
> 
> 时间：2013-02-11T14:52:15.103
> 
> 标签：javascript, jquery, validation, append, slidedown

I have a validation script that once submitted, will append error "li" tags to an empty div below the form. It works great though I would like to slide down this div once the "li" tags are appended to the div.

I have used the .slideDown effect from jQuery to accomplished this but it seems to only slide down to the first "li" tag, after that it jumps through the rest of the "li" tags. I can't figure out why, and the slide down effect is on the div itself not the "li" tags.

Here is a working example in my [CodePen](http://codepen.io/jbatzel1Development/pen/twdlu).

Here is the code:

```
$("form").on("submit", function(e){
  $("li").remove();

  $("input").each(function(){
    var $this = $(this);

    if($($this).val() === ""){
      var formName      = $($this).attr("name");
      var errorMessage  = $(".errorMessage");
      var li            = $("<li></li>",{
        text: "There was an error with " + formName,
        class: "errorText",
      });

      $($this).addClass("errorInput");
      $(errorMessage).append(li);
      $(errorMessage).slideDown(1500);
      e.preventDefault();
    } if($($this).val() != ""){
      $($this).removeClass("errorInput"); 
    } else{
      return true; 
    }
  }); //Input
}); //Form .submit 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:57:47.907

从 each() 函数中删除滑动并将其放在循环之后，它被调用了两次。

[http://codepen.io/anon/pen/nxtFi](http://codepen.io/anon/pen/nxtFi)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:05:52.893

您在`.slideDown()`内部调用`.each()`，因此每个输入元素都会调用一次。但是，我怀疑`.slideDown()`只有当它被调用的元素当前不可见时才会动画。

所以，你添加一个`<li>`，调用`.slideDown()`，它就会动画。您添加 next `<li>`， call `.slideDown()`，没有任何反应，因为它已经可见；但是，由于您已将内容添加到容器元素，它的大小会增加（您提到的“跳跃”）。

只需调用此行：

```
$(errorMessage).slideDown(1500); 
```

在整个调用之后`.each()`。

# eclipse - Updating features which depend on the same library as other features - p2 error "Only one of the following can be installed at once"

> ID：14814566
> 
> 赞同：0
> 
> 时间：2013-02-11T14:52:19.507
> 
> 标签：eclipse, dependencies, rcp, p2

I have the following structure in my project:

Product "P" is based on Feature "FA" which is based on Plugin "PA" which depends on Libray-Plugin "PL". I can export the whole product and everything works fine.

Now I want to install different modules via my update site. For example: Modul "M" which is actually a feature called "FB" which is based on Plugin "PB" which depends on Library-Plugin "PL". I am able to install the module (feature) initially. At this point the Library-Plugin has a version of "1.0.0".

When I change the module (feature) and increment the version of FB, PB and PL to 1.0.1 and then try to install it, p2 shows me the following error:

```
Cannot complete the install because of a conflicting dependency.
 Software being installed: Modul Feature B - FB 1.0.1
 Software currently installed: Product P with Feature A - FA 1.0.0
 Only one of the following can be installed at once: 
  Library-Plugin - PL 1.0.0
  Library-Plugin - PL 1.0.1
Cannot satisfy dependency:
 From: Modul Feature B - FB 1.0.1
 To: Library-Plugin - PL 1.0.1
Cannot satisfy dependency:
 From: Product P with Feature A - FA 1.0.0
 To: Library-Plugin - PL 1.0.0 
```

What am I doing wrong? What can I do to deploy upgrades of feature modules which depend on the same library plugins as other installed features or the product?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:19:52.490

问题是您在功能 FA 和 FB 中包含插件的依赖项（即库插件 PL）。这样一来，每个功能都将 PL 的版本限制为一个确切的版本，因此如果您尝试独立更新 FA 或 FB，p2 将需要安装多个版本的 PL。对于大多数捆绑包来说这是不可能的（因为大多数捆绑包都是单例的）。

相反，您的功能应该只包含您自己的包 PA 和 PB。这样，产品 P 的安装仍然会包含 PL（因为使用 p2 创建的产品安装始终包含所有依赖项），但是您将不再收到 PL 插件的“一次只能安装以下一项”错误. 这是因为 PA 和 PB 通常依赖于具有版本范围的 PL（甚至可能根本没有版本限制），因此只要您的更新站点上有可用的新版本，PL 就可以由 p2 更新。

# sql - 如何计算列的累积数字？

> ID：14814567
> 
> 赞同：2
> 
> 时间：2013-02-11T14:52:35.230
> 
> 标签：sql, oracle, select, view, plsql

如果我已经在一个表中有 MYHOUR 和 STATUS 列，并且只有这两列，我如何创建一个视图来计算 OFF_HOURS 列？OFF_HOURS 列是连续的“关闭”状态编号。谢谢。

```
MYHOUR STATUS   OFF_HOURS
------ -------- --------
     1 OFF      1
     2 OFF      2
     3 ON       0
     4 ON       0
     5 ON       0
     6 ON       0
     7 ON       0
     8 OFF      1
     9 OFF      2
    10 OFF      3
    11 ON       0
    12 ON       0
    13 OFF      1
    14 OFF      2
    15 OFF      3
    16 OFF      4
    17 OFF      5
    18 OFF      6
    19 OFF      7
    20 OFF      8
    21 OFF      9
    22 OFF      10
    23 OFF      11
    24 OFF      12 
```

以下是创建示例表和数据的脚本。

```
CREATE TABLE Test_Table (
myHour  INTEGER,
status VARCHAR2(8));

BEGIN
  FOR i IN 1..2
  LOOP
    INSERT INTO Test_Table VALUES (i, 'OFF');
  END LOOP;

  FOR i IN 3..7
  LOOP
    INSERT INTO Test_Table VALUES (i, 'ON');
  END LOOP;

  FOR i IN 8..10
  LOOP
    INSERT INTO Test_Table VALUES (i, 'OFF');
  END LOOP;

  FOR i IN 11..12
  LOOP
    INSERT INTO Test_Table VALUES (i, 'ON');
  END LOOP;

  FOR i IN 13..24
  LOOP
    INSERT INTO Test_Table VALUES (i, 'OFF');
  END LOOP;

  COMMIT;
END;
/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:04:49.137

您可以使用分析：

```
SQL> SELECT myhour,
  2         status,
  3         CASE
  4            WHEN status = 'OFF' THEN
  5             COUNT(*)
  6                over(PARTITION BY grp ORDER BY myhour)
  7            ELSE
  8             0
  9         END off_hours
 10    FROM (SELECT myhour, status,
 11                 SUM(offwork) over(ORDER BY myhour) grp
 12            FROM (SELECT myhour,
 13                         status,
 14                         CASE
 15                            WHEN status
 16                                 != lag(status) over(ORDER BY myhour) THEN
 17                             1
 18                         END offwork
 19                    FROM Test_Table))
 20  ORDER BY myhour;

 MYHOUR STATUS    OFF_HOURS
------- -------- ----------
      1 OFF               1
      2 OFF               2
      3 ON                0
      4 ON                0
      5 ON                0
      6 ON                0
      7 ON                0
      8 OFF               1
      9 OFF               2
     10 OFF               3
     11 ON                0
     12 ON                0
     13 OFF               1
     14 OFF               2
     15 OFF               3
     16 OFF               4
     17 OFF               5
     18 OFF               6
     19 OFF               7
     20 OFF               8
     21 OFF               9
     22 OFF              10
     23 OFF              11
     24 OFF              12 
```

* * *

也更简单：

```
SELECT myhour,
       status,
       CASE
          WHEN status = 'OFF' THEN
           myhour - nvl(last_value(CASE WHEN status = 'ON' 
                                        THEN myhour
                                   END IGNORE NULLS) 
                                   over(ORDER BY myhour), 0) 
       END
  FROM Test_Table; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:04:40.590

假设 MyHour 值是连续的，您可以使用相关子查询最轻松地做到这一点：

```
select t.*,
       (select MAX(MyHour) from t t2 where t2.MyHour <= t.MyHour and t2.status = 'ON'
       ) - MyHour
from t 
```

有一个使用解析函数的解决方案，但它更复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:06:10.977

我认为 select count(*) from... where status = 'off' group by my hour 是你要找的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T15:07:12.987

一种选择是使用递归查询：

```
With CTE (myHour, status, Off_Hours) AS (
  SELECT myHour, status, CASE WHEN status = 'Off' THEN 1 ELSE 0 END as Off_Hours
  FROM Test_Table
  WHERE myHour = 1
  UNION ALL
  SELECT T.myHour, T.status,  CASE WHEN T.status = 'Off' THEN CTE.Off_Hours + 1 ELSE 0 END as Off_Hours
  FROM CTE 
     INNER JOIN Test_Table T on CTE.myHour + 1 = T.myHour
)
SELECT * FROM CTE 
```

这是[小提琴](http://sqlfiddle.com/#!4/aa0b7/1)。

# ios - 这是 UITableViewCellAccessoryDe tailDisclosureButton 的正常行为吗

> ID：14814568
> 
> 赞同：0
> 
> 时间：2013-02-11T14:52:40.913
> 
> 标签：ios, objective-c, xcode, ios6

我注意到，当我设置 MessageTableViewCell **accessoryType =UITableViewCellAccessoryDe​​tailDisclosureButton并在“箭头按钮”本身上进行选项卡时，在****didSelectRowAtIndexPath:** 上声明的弹出菜单不显示？？！！！如果我在单元格的其他区域（“箭头按钮”本身除外）上进行选项卡，它工作正常，

但是，如果我改用**UITableViewCellAccessoryDisclosureIndicator**单元格附件类型，它可以正常工作，即使我在箭头本身上加了标签。

我想知道这是正常行为，错误还是我做错了什么。

我更喜欢**UITableViewCellAccessoryDe​​tailDisclosureButton**，因为在我看来，当你想引起用户的注意时，它会更清楚。

```
 - (UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath
    {
        static NSString* CellIdentifier = @"MessageCellIdentifier";

        MessageTableViewCell* cell = (MessageTableViewCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil)
        {
            cell = /*[*/[[MessageTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] /*autorelease]*/;

        }
        CastNearAppDelegate *appDelegate = (CastNearAppDelegate *)[[UIApplication sharedApplication] delegate];

        Message* message = [appDelegate.dataModel messageWithID: indexPath.row];

        if (!message.isSentByUser)
        {
            cell.accessoryType =/*UITableViewCellAccessoryDetailDisclosureButton; */UITableViewCellAccessoryDisclosureIndicator;
        }else
        {
            cell.accessoryType = UITableViewCellAccessoryNone;
        }

        message.bubbleSize = [SpeechBubbleView sizeForText:message.text];

        [cell setMessage:message];

        return cell;
    }

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

       UIActionSheet  *popupQueryOptions = [[UIActionSheet alloc]
                                          initWithTitle:@"Options for Blocking and Spam Reporting"
                                          delegate:self
                                          cancelButtonTitle:@"Cancel"
                                          destructiveButtonTitle:@"Block Sender"
                                          otherButtonTitles:/*@"Block Sender",*/
                                          @"Inappropriate Content",
                                          /*@"Tell a Friend via Facebook",
                                           @"Tell a Friend via Twitter",*/
                                          nil];

        popupQueryOptions.actionSheetStyle = UIActionSheetStyleBlackOpaque;

        [popupQueryOptions showInView:[UIApplication sharedApplication].keyWindow];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:57:09.403

它们用于不同的事情。指示器只是一个指示器，而按钮允许您执行不同的操作，例如像按钮一样操作。

`UITableView`有两种可能的方法，当点击单元格时它将调用它的委托。

当行本身被点击时，将调用以下内容

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

当您点击附件时，tableView 会调用

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath 
```

您也可以在 Interface Builder 中独立连接它们。所以这种行为是相当刻意的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:58:24.297

当您使用公开按钮时，将`tableView:accessoryButtonTappedForRowWithIndexPath:`调用委托方法而不是`tableView:didSelectRowAtIndexPath:`.

公开按钮通常用于小区的某种辅助操作，例如在 Wifi 设置中，它显示网络选项，同时点击整个小区连接到它。

# mongodb - 如何在 mongodb 中的 WHERE 和 ORDER 查询中创建索引？

> ID：14814570
> 
> 赞同：0
> 
> 时间：2013-02-11T14:52:47.837
> 
> 标签：mongodb, indexing

在 mongo 中，创建索引时，我试图确定以下查询是否会在 a) category_ids 和 status 或 b) category_ids、status 和 name 上有一个索引？

```
Source.where(category_ids: [1,2,3], status: Status::ACTIVE).order_by(:name) # ((Ruby/Mongoid code)) 
```

本质上，我想弄清楚索引是否应该包含 ORDER_BY 列？还是只有 WHERE 子句？我在哪里可以阅读更多关于此的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T08:54:50.267

是的，关于这个特定查询的索引将有利于查询速度。但是这里有一个警告，索引字段的顺序。

我注意到您正在使用`$in`there on `category_ids`。`$in`此链接对于理解在排序上使用带有索引（或实际上是一般排序）存在的一点复杂性特别有用：http: [//blog.mongolab.com/2012/06/cardinal-ins/](http://blog.mongolab.com/2012/06/cardinal-ins/)

最后，它为您提供了适合您的查询类型的最佳索引顺序：

> 索引中字段的顺序应该是：
> 
> ```
> First, fields on which you will query for exact values.
> Second, fields on which you will sort.
> Finally, fields on which you will query for a range of values. 
> ```

作为参考，其他几个有用的链接如下：

*   [http://docs.mongodb.org/manual/applications/indexes/](http://docs.mongodb.org/manual/applications/indexes/)
*   [http://docs.mongodb.org/manual/faq/indexes/#how-do-you-determine-what-fields-to-index](http://docs.mongodb.org/manual/faq/indexes/#how-do-you-determine-what-fields-to-index)
*   [http://jasonwilder.com/blog/2012/02/08/optimizing-mongodb-indexes/](http://jasonwilder.com/blog/2012/02/08/optimizing-mongodb-indexes/)
*   [为什么索引的方向在 MongoDB 中很重要？](https://stackoverflow.com/questions/10329104/why-does-direction-of-index-matter-in-mongodb)
*   而且，[http://www.slideshare.net/kbanker/mongo-indexoptimizationprimer](http://www.slideshare.net/kbanker/mongo-indexoptimizationprimer)

这些将帮助您开始优化索引并使它们适用于您的查询。

# boost - 发布到 boost::asio::io_service::strand 的函数未执行

> ID：14814580
> 
> 赞同：1
> 
> 时间：2013-02-11T14:53:21.653
> 
> 标签：boost, boost-asio, deadlock

我`boost::asio`在一个非常复杂的场景中使用，我遇到了一个问题，即尽管有几个工作线程正在运行并且处于空闲状态，`boost::asio::io_service::strand`但未执行发布到对象的方法。`io_service`

正如我所说，场景非常复杂，我仍在尝试开发一个相当小的重现场景。但条件如下：

*   一个 io_service 正在运行并分配了一个工作对象
*   将 4 个工作线程分配给 io_service（`io_service::run`在每个工作线程上调用）
*   几个链对象用于发布许多不同的任务
*   在通过链执行的一些任务中，新任务被发布到链

整个系统运行良好且稳定，除了一种情况：当调用其中一个类的析构函数时，它将中止处理程序发布到链（以与其他任务同步启动中止），然后等待中止完成。现在每隔一段时间就会发生一次，永远不会执行中止处理程序（从另一个 strand 对象的调用中调用析构函数）。

我认为问题在于 strand 等待在已发布的同一线程上执行处理程序。并且由于该线程正在等待执行中止处理程序，因此程序死锁。

我现在的问题： - 我的假设是否正确？- 有什么办法可以避免这种情况？- 你将如何解决这个问题（有几个异步任务正在运行并且需要同步中止它们）

非常感谢您的帮助！

米。

# recaptcha - 用户报告 recaptcha 没有出现 MVC

> ID：14814587
> 
> 赞同：1
> 
> 时间：2013-02-11T14:53:47.290
> 
> 标签：recaptcha

我发布了一个网站：“ [https://www.mynotefy.com](https://www.mynotefy.com) ”。一些用户无法在 chrome 浏览器上的 createaccount 页面上看到 recaptcha 屏幕。

发生这种情况的任何原因。没有记录错误。

“如果我们在 chrome 中使用 https，recaptcha 不会显示。如果我们只使用 http，recaptcha 正在显示”。我们如何解决这个问题？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T15:04:15.753

以下是我在 Chrome 开发者工具控制台中收到的警告：

```
[blocked] The page at https://www.mynotefy.com/Account/CreateAccount ran insecure content from http://fonts.googleapis.com/css?family=Istok+Web:400,700,400italic,700italic|Rokkitt:400,700.
[blocked] The page at https://www.mynotefy.com/Account/CreateAccount ran insecure content from http://www.google.com/recaptcha/api/challenge?k=6Lci-doSAAAAAHuBYSQjNhr-qgvdqkXuVqn7OtS3. 
```

我的猜测是您的页面是一个`HTTPS`，而这些链接是`HTTP`，所以这就是它们被阻止的原因。

# php - 警告：PDOStatement::execute(): SQLSTATE[HY093]: 参数号无效：参数未在...文件文本中定义

> ID：14814592
> 
> 赞同：4
> 
> 时间：2013-02-11T14:54:01.003
> 
> 标签：php, mysql, pdo, prepare

$fields 是一个数组，在打印后得到如下值：

```
Array ( [first_name] => Nisse [last_name] => Example [ssn] => 198306205053 [address] =>           Stockholm, Sverige [phone_number] => 54654987321546 [latitude] => 55.717089999999999 [longitude] => 13.235379 ) 
```

我从我的数据类中调用更新函数，如下所示：

```
DataManager::update_user($fields, $user_data['id']; 
```

但我得到了错误：

> 警告：PDOStatement::execute(): SQLSTATE[HY093]: 参数号无效：参数未在...文件文本中定义

我已经检查了其他几个类似的线程，但我想我在这里遗漏了一些基本概念，因为我仍然找不到答案。据我所见，我的数组中有 7 个？和 7 个项目，如果我定义了所有值，我可以在 SQL 工作台中完美地运行它，即：

```
UPDATE users SET first_name = 'Kalle', last_name = 'Anka', ssn = 242345234, address = 'Stockholm', phone_number = 53423434, latitude = 17.189889231223423423424324234, longitude = 109.234234 WHERE id = 4 
```

我已经尝试了将 $user_id 设置为特定值并且没有纬度/经度参数的 PDO 准备语句。

如果我忘记了任何重要信息，只需指出它，我会得到它。地址是 varchar 和 lat/long 是 DB btw 中的浮点数。使用 MYSQL。

下面的函数：

```
public static function update_user($fields, $user_id)
{
    $db = self::_connect();

    $st = $db->prepare("UPDATE users SET first_name = ?, last_name = ?, ssn = ?, address = ?, phone_number = ?, latitude = ?, longitude = ? WHERE id = '{$user_id}'");
    $st->execute($fields);

    return ($st->rowCount()) ? true : false;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T18:58:45.593

如果使用位置参数，则传递给的参数数组`execute()`必须是序数数组。同样，如果使用命名参数，则数组必须是关联数组。

这是一个确认行为的测试：

```
$stmt = $db->prepare("SELECT ?, ? ,?");

$params = array( 'a', 'b', 'c' );
// OK
if ($stmt->execute($params)) {
  print_r($stmt->fetchAll());
}

$params = array( 'A'=>'abc', 'B'=>'def', 'C'=>'ghi' );
// ERROR!
if ($stmt->execute($params)) {
  print_r($stmt->fetchAll());
}

$stmt = $db->prepare("SELECT :A, :B, :C");

$params = array( 'a', 'b', 'c' );
// ERROR!
if ($stmt->execute($params)) {
  print_r($stmt->fetchAll());
}

$params = array( 'A'=>'abc', 'B'=>'def', 'C'=>'ghi' );
// OK
if ($stmt->execute($params)) {
  print_r($stmt->fetchAll());
} 
```

请注意，在当前版本的 PHP 中，关联数组键*不必*以`:`@prodigitalson 注释作为前缀。在旧版本的`:`PHP 中，数组键中需要前缀。

还值得一提的是，当我尝试在单个查询中混合位置参数和命名参数时，我遇到了错误和不可预知的行为。您可以在应用程序的*不同*查询中使用任一样式，但为给定查询选择一种或另一种样式。

# scala - 为什么使用 Collection.empty[T] 而不是 new Collection[T]()

> ID：14814593
> 
> 赞同：2
> 
> 时间：2013-02-11T14:54:02.057
> 
> 标签：scala

我想知道是否有充分的理由使用`Collection.empty[T]`而不是`new Collection[T]()`（或相反）？还是只是个人喜好？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T15:34:16.220

`new Collection[T]()`每次调用都会创建一个新实例。另一方面，`Collection.empty[T]`很可能总是返回相同的单例`object`，通常在某处定义为

```
object Empty extends Collection[Nothing] ... 
```

这会快得多。**编辑：**这仅适用于不可变集合，可变集合每次`empty`调用时都必须返回一个新实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:06:18.630

你应该总是喜欢`Collection.empty[Type]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T16:47:51.443

除了`Collection.empty[T]`更清楚意图之外，您应该支持它，原因与您在实例化集合时应该支持工厂方法的原因相同：因为那些工厂抽象出一些您可能不（或不应该）关心的实现细节。例如，当你这样做时，`Seq.empty[String]`你实际上得到了一个`List[String]`. 你可以直接实例化 a`List[String]`但如果你关心的只是有**一些** `Seq`你会引入一个不必要的依赖`List`（好吧，实际上你不能按现在的样子，因为`List`已经是抽象的，但是为了争论，我们假设我们可以）工厂的全部意义在于具有一定程度的关注点分离，而不是为不必要的实例化细节而烦恼。

作为另一个更详细的例子，我们来谈谈`collection.immutable.HashMap`. 这是一个非常**具体**的类，所以你可能认为这里不需要工厂。除了出于优化目的，伴随对象中的工厂`collection.immutable.HashMap`实际上会根据您初始化地图的元素数量创建不同的子类（请参阅此问题：[Scala：如何从地图制作哈希（特里）地图（通过播放中的异常）](https://stackoverflow.com/questions/14687042/scala-how-to-make-a-hashtriemap-from-a-map-via-anorm-in-play/14688161#14688161)）。显然，如果你直接实例化`collection.immutable.HashMap`你将失去这个优化。

另一个常见的优化`empty`是总是返回（当它是一个不可变集合时）相同的实例，这是另一个有用的优化，你会因为直接实例化集合而失去它。

因此，根据经验，您应该尽可能使用各种集合伴侣对象提供的工厂，以保护自己免受不必要的依赖，同时受益于集合框架提供的潜在优化。

`empty`只是工厂的一个特例，所以同样的逻辑也适用。

# python - 创建二维默认单选按钮时遇到问题

> ID：14814596
> 
> 赞同：0
> 
> 时间：2013-02-11T14:54:09.240
> 
> 标签：python, radio-button, tkinter

我正在尝试使用默认值创建一个 2D 单选按钮网格。网格可能有多达 256 行，但总是 3 列。我进行了很多研究并尝试了许多选项，这是我目前拥有的最好的代码。显然我是 Python 和 Tkinter 的新手，因此非常感谢任何其他解决我的困境（和代码编写）的建议。另外请记住，我需要回读每一行单选按钮以确定选中了哪一个。

```
import Tkinter as tk
from Tkinter import *

class GUI(Frame):
    def __init__(self, parent):
        Frame.__init__(self, parent)
        self.parent = parent
        self.pack()
        self.initUI()

    def initUI(self):
        # the 5Hz radio button should be selected as default
        self.freqs=['1Hz','5Hz','10Hz']
        self.numFreqs = len(self.freqs)
        #val and var are set up to try to establish the defaults
        #every 3 vals = 1 var therfore the middle val should = var
        # val 0,1,2 = var 1 , val 3,4,5 = var 4 , val 6,7,8 = var 7
        # this should allow the 5hx radiobuttonto be default selected
        self.val = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]
        self.var=[1,4,7,10,13]
        self.var[0] = IntVar()
        self.var[1] = IntVar()
        self.var[2] = IntVar()
        self.var[3] = IntVar()
        self.var[4] = IntVar()
        self.cButtons = []
        self.rButtons1 = []
        self.rButtons2 = []
        self.rButtons3 = []

        self.textLbls = ['Choice 1', 'Choice 2', 'Choice 3','Choice 4','Choice 5']

        #build enough values for 256 rows of 3 radiobuttons
        #For var = [1,4,7,10...  val = [0,1,2,  3,4,5,  6,7,8... so vars match vals on the 5hz radiobutton
        #Can't do this since it creates the'many already selected bug'
        #See http://stackoverflow.com/questions/5071559/tkinter-radio-button-initialization-bug
        #for i in range(len(self.var)):
            #self.var[i] = IntVar()

        for i in range(len(self.textLbls)):
            temp = self.val[(self.numFreqs*i)+1]
            temp1 = self.var[i]
            self.cButtons.append(Checkbutton(self, text=self.textLbls[i], onvalue=1, offvalue=0))
            self.cButtons[i].grid(row=i, column=2, sticky = W)
            Label(self, text='         Frequency:').grid(row=i, column=6)
            #variable connects group of radios for slection/clear of group
            #if value = variable this is default
            self.rButtons1.append(Radiobutton(self,  text=self.freqs[0], variable=self.var[i], value=self.val[(self.numFreqs*i)+0]))
            self.rButtons1[i].grid(row=i, column=7, padx=5)
            self.rButtons2.append(Radiobutton(self,  text=self.freqs[1], variable=self.var[i], value=self.val[(self.numFreqs*i)+1]))
            self.rButtons2[i].grid(row=i, column=8, padx=5)
            self.rButtons3.append(Radiobutton(self,  text=self.freqs[2], variable=self.var[i], value=self.val[(self.numFreqs*i)+2]))
            self.rButtons3[i].grid(row=i, column=9, padx=5)

def main():
    root = Tk()
    app = GUI(root)
    root.mainloop()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:14:37.567

不完全确定您在此代码上寻求帮助的问题是什么，但我做了一些快速更改，应该使其功能更强大：

```
import tkinter as tk
from tkinter import *

class GUI(Frame):
    def __init__(self, parent):
        Frame.__init__(self, parent)
        self.parent = parent
        self.pack()
        self.initUI()

    def initUI(self):
        # the 5Hz radio button should be selected as default
        self.freqs=['1Hz','5Hz','10Hz']
        self.numFreqs = len(self.freqs)
        #val and var are set up to try to establish the defaults
        #every 3 vals = 1 var therfore the middle val should = var
        # val 0,1,2 = var 1 , val 3,4,5 = var 4 , val 6,7,8 = var 7
        # this should allow the 5hz radiobutton to be default selected
        self.val = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]
        #You only really need to hold on to a reference to the IntVars, not the
        # entire widgets.  Declaring each "var" individually is also unneccesary
        self.checkButtonVars = []
        self.radioButtonsVars = []

        self.textLbls = ['Choice 1', 'Choice 2', 'Choice 3','Choice 4','Choice 5']
        #(your comment block)

        valueIter = iter(self.val)  #This will let us read the values 3 by 3
        for i,lbl in enumerate(self.textLbls):      #enumerate is a nice way to avoid range(len(x))
            tempVals = [next(valueIter) for x in range(3)]  #get the next 3 values
            #make a variable for the new CheckBox (and append it to our list)
            self.checkButtonVars.append(IntVar(value=0))
            #make a variable for the new RadioButton group (and append it to our list)
            self.radioButtonsVars.append(IntVar(value=tempVals[1]))

            #Make the checkboxes, radiobuttons and label for the line.
            Checkbutton(self, text=lbl, variable=self.checkButtonVars[i]).grid(row=i, column=2, sticky = W)
            Label(self, text='         Frequency:').grid(row=i, column=6)
            Radiobutton(self,  text=self.freqs[0], variable=self.radioButtonsVars[i], value=tempVals[0]).grid(row=i, column=7, padx=5)
            Radiobutton(self,  text=self.freqs[1], variable=self.radioButtonsVars[i], value=tempVals[1]).grid(row=i, column=8, padx=5)
            Radiobutton(self,  text=self.freqs[2], variable=self.radioButtonsVars[i], value=tempVals[2]).grid(row=i, column=9, padx=5)

        #I added a button to retrieve the values, this is just as a demo.
        self.printButton = Button(self,text='Return values',command=self.printVals)
        self.printButton.grid(row=i+1,column=8)

    def getRadioVals(self,*args):
        #returns the values in the radio buttons as a list
        return [x.get() for x in self.radioButtonsVars]

    def getCheckVals(self,*args):
        #returns the values in the checkboxes as a list
        return [x.get() for x in self.checkButtonVars]

    def printVals(self,*args):
        print('Radio Buttons: %s' %(self.getRadioVals()))
        print('Check Buttons: %s' %(self.getCheckVals()))

def main():
    root = Tk()
    app = GUI(root)
    root.mainloop()

if __name__ == '__main__':
    main() 
```

如果您可以更好地描述您遇到的具体问题，则可能会解决这些问题。

另外，请注意：尝试垂直显示 256 个单选按钮可能会给您带来一些问题。据我所知，没有办法在标准 tkinter 中创建滚动框架，因此您的窗口最终会比屏幕高得多。

# r - facet_grid 中同一轴上的离散和连续刻度

> ID：14814602
> 
> 赞同：1
> 
> 时间：2013-02-11T14:54:22.970
> 
> 标签：r, ggplot2, grid-layout, facet

我想用`facet_grid`in`ggplot2`生成两个在同一轴上具有连续和离散比例的图 - 基本上我的向量`fac`有一个数字部分和一个因子部分。

```
toy=data.frame(type=xc("f f f f i i i i"),fac=c(letters[1:4],1:3,40))
ggplot(toy,aes(x=ifelse(type=="f",fac,as.numeric((fac)))))+
   geom_bar()+facet_grid(.~type,scales="free") 
```

但它不起作用，因为`ggplot`迫使两个尺度都是离散的。 ![在此处输入图像描述](../Images/e79f99bb93889f892632f5daa9c698f3.png)

从右侧图中 1、2、3、40 的等间距可以看出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:31:48.350

一列中的两种类型的数据并不是表示数据的最佳方式。

更改了列的示例数据`fac`以获得更好的表示。

```
toy=data.frame(type=c("f", "f","f", "f", "i", "i", "i", "i"),fac=c(letters[1:4],1,5,7,40)) 
```

要为数值获取不相等的空格，您可以进行两次`geom_bar()`调用，每个调用用于单独的类型（使用`subset=`）。对于字母，按原样使用数据，但对于数字数据，将`fac`值转换为字符，然后转换为数字。`facet_grid()`将确保您有两个地块。`scale_x_discrete()`将适用于这两个方面 - 您只需要提供所需的`breaks=`值。

```
library(ggplot2)
library(plyr)    
ggplot(data=toy)+
  geom_bar(subset=.(type=="f"),aes(x=fac),width=0.2)+
  geom_bar(subset=.(type=="i"),aes(x=as.numeric(as.character(fac))))+
  facet_grid(.~type,scales="free") + 
  scale_x_discrete(breaks=c("a","b","c","d",1,5,7,40)) 
```

![在此处输入图像描述](../Images/cf31a8535d0e2192887d291df574c6dd.png)

# python - 保存用户时 Django 组不更新

> ID：14814603
> 
> 赞同：2
> 
> 时间：2013-02-11T14:54:21.860
> 
> 标签：python, django, django-1.5

我正在尝试将属于员工的用户添加到更改时的员工组中。我已经尝试过使用信号并在用户模型中重载保存，但它们似乎都不起作用。django 在保存时是否有任何我不知道的限制？

这是我尝试使用的两个代码片段。用户继承自 AbstractUser 并与新的 Django 1.5 功能 AUTH_USER_MODEL = 'app.User' 一起使用，组是标准的身份验证组。

```
class User(AbstractUser):
    def save(self, force_insert=False, force_update=False, **kwargs):
        if self.is_staff:
            if not self.groups.filter(name='staff').exists():
                g = Group.objects.get(name='staff')
                g.user_set.add(self)
        else:
            if self.groups.filter(name='staff').exists():
                g = Group.objects.get(name='staff')
                g.user_set.remove(self)

        super(User, self).save(force_insert, force_update)

@receiver(post_save, sender=User)
def my_handler(sender, **kwargs):
    user = kwargs['instance']
    if user.is_staff:
        if not user.groups.filter(name='staff').exists():
            g = Group.objects.get(name='staff')
            g.user_set.add(user)
    else:
        if user.groups.filter(name='staff').exists():
            g = Group.objects.get(name='staff')
            g.user_set.remove(user) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:37:05.510

如果您使用 a`form(ModelForm)`那么消失组的原因可能`form.save_m2m()`是在您的`user.save()`. 例如，如果您的表单中有一个空的“组”字段，则`save_m2m`只需从您的用户中删除所有组。

# xcode - XCode 4：修复项目导航器中的红色源文件

> ID：14814606
> 
> 赞同：1
> 
> 时间：2013-02-11T14:54:32.200
> 
> 标签：xcode, xcode4, xcode4.4

在 XCode 项目中，我的所有源文件在导航器中都显示为红色。双击它们不会在文本编辑器中打开它们。

但是，文件检查器中的文件路径都是正确的，并且项目编译得非常好。

就好像 xcode 的编译器部分可以找到文件，但文本编辑器部分不能。

谁能建议我如何修复项目以便我可以在编辑器中打开源文件？

奇怪的是，我尝试[删除并重新添加它们](https://stackoverflow.com/q/14289917/765287)，但这似乎不起作用。文件名仍然显示为红色。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:28:20.667

这是在 git 中发生在我身上的类似事情，可能会有所帮助。如果您最近更改了这些文件的目录路径，以便该路径中的一个文件夹的名称中有一个“/”，这可能会导致您的文件变红且无法访问。

希望就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:36:54.647

嗯。最初，所有麻烦的文件在其路径中都有一个变量，例如`$(MY_LIBRARY_LOCATION)/src/file.cpp`.

最初`MY_LIBRARY_LOCATION`是一个绝对路径（`/Users/me/my_libs'). I first tried changing it to a relative path (`../../../my_libs`）。这没有帮助。

最后，我在文本编辑器中打开了 XCode 项目文件 ( `myproj.xcodeproj/project.pbxproject`) 并删除了对变量的所有引用。相反，我硬编码了所有文件的绝对路径（例如`/Users/me/my_libs/src/...`）。这解决了问题。

它既不优雅也不便携，但是，嘿，它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T09:49:29.313

在将项目移动到新目录后，我也发现了这一点。但是我在文件检查器中将文件路径更改为绝对，它全部找到了。不确定它是最好的方法。但是它很快解决了我的问题

（又快又脏对不起！）

一种

# background - 如何为更改其内容的 textBlock 设置背景

> ID：14814609
> 
> 赞同：0
> 
> 时间：2013-02-11T14:54:44.753
> 
> 标签：background, windows-phone-8, textblock

## 背景

我正在尝试在屏幕底部放置一个 textBlock 控件（下方有一个小边距），并且我还希望为它设置一个背景，这样无论 textBlock 后面显示什么，它都会很容易读书。

在 Android 上，您可以简单地为其设置背景，并告诉它的宽度和高度为 WRAP_CONTENT，以便它只占用所需的空间，但我在 WP8 上找不到类似的东西。

## 当前状态

这是我创建的 xaml：

```
...
<Grid >

    <Image x:Name="fullScreenImage" Stretch="Fill"
        Visibility="Collapsed" />

    <TextBlock   HorizontalAlignment="Center" VerticalAlignment="Bottom"
            Margin="0,0,0,200" FontSize="40" x:Name="pictureLabel" TextWrapping="Wrap"
            Foreground="#ff000000" />
</Grid> 
```

## 问题

由于 textBlock 没有背景属性，我不得不使用包装它的东西。但是，由于它的内容是动态变化的，我不能简单地为它设置一个大小。

## 问题

现在，我想简单地设置它的背景颜色。

如果可以使用圆角矩形作为背景或 9-patch 图像，我也将不胜感激。

如何实现为 textBlock 设置背景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-30T09:41:59.167

解决方案非常简单。只需将 HirizontalAlignment 设置为 Left。希望这将适用于您的情况。

```
<StackPanel HorizontalAlignment="Left">
            <Border Background="#66FFFFFF">                    
                    <TextBlock/>                    
            </Border>
</StackPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:07:34.327

我想出了下一个解决方案，它工作得很好，但我真正想要的是一种设置最小字体和最大字体大小的方法，这样如果有一个单词，字体可能需要一定大小，如果文本太长，字体会变小，都是动态的。

代码：

```
label.Text = label;
label.Measure(new Size(RenderSize.Width, RenderSize.Height));
border.Width = label.DesiredSize.Width + border.Padding.Left + border.Padding.Right + border.BorderThickness.Left + border.BorderThickness.Right;
border.Height = label.DesiredSize.Height + border.Padding.Top + border.Padding.Bottom + border.BorderThickness.Bottom + border.BorderThickness.Top; 
```

和xml：

```
<Border BorderBrush="#ff000000" BorderThickness="2" CornerRadius="8" Visibility="Collapsed" Padding="5" Background="#bfff0000" Margin="10,0,10,200" VerticalAlignment="Bottom" x:Name="border">
    <StackPanel>
      <TextBlock FontSize="40" x:Name="pictureLabel" TextWrapping="Wrap" Foreground="#ff000000" />
    </StackPanel>
</Border> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:53:13.340

根据[这个问题](https://stackoverflow.com/questions/500863/how-to-change-the-background-color-of-a-textblock-in-silverlight)（这是针对 Silverlight - 但仍然是 xaml），没有办法为`TextBlock`. 你最好的选择是把你的包`TextBlock`在一个`Grid`或`Border`中。

如果 a`Grid`不起作用，[本文](http://social.msdn.microsoft.com/Forums/en-US/silverlightnet/thread/e3430563-0a8e-42d6-8256-a19a9a1c68c4/)建议 a`Border`可以解决问题：

> 一个简单的边框就可以了，并且通过不设置其宽度和高度属性，它将根据 TextBlock 的大小缩小/增长。

# css - 在LESS CSS中计算从百分比到像素的宽度，然后按像素减去

> ID：14814616
> 
> 赞同：106
> 
> 时间：2013-02-11T14:55:00.340
> 
> 标签：css, less, pixel

**我将计算从百分比到像素的某些元素的宽度，因此我将通过使用LESS**和**calc()**减去 -10px 。这是可能的？

```
div {
    span {
        width:calc(100% - 10px);
    }
} 
```

我使用 CSS3 `calc()`，所以它不起作用：`calc(100% - 10px)`

> **示例：**如果 100% = 500px 所以宽度 = 490px (500-10);

我做了一个测试演示：http: [//jsfiddle.net/4DujZ/55/](http://jsfiddle.net/4DujZ/55/)

所以当我调整大小时，填充会一直说：**5 (10px / 2)。**

我可以用**LESS**做吗？我知道如何在 jQuery 和简单的 CSS（如边距填充或其他）中做...但我会尝试在**LESS**中使用`calc()`

* * *

## 回答 #1

> 赞同：256
> 
> 时间：2013-06-01T05:54:24.173

您可以转义`calc`参数以防止它们在编译时被评估。

使用您的示例，您只需将参数括起来，如下所示：

```
calc(~'100% - 10px') 
```

演示：http: [//jsfiddle.net/c5aq20b6/](http://jsfiddle.net/c5aq20b6/)

* * *

我发现我以以下三种方式之一使用它：

## 基本转义

参数中的所有内容`calc`都定义为字符串，并且在客户端评估之前完全是静态的：

### 少输入

```
div {
    > span {
        width: calc(~'100% - 10px');
    }
} 
```

### CSS 输出

```
div > span {
  width: calc(100% - 10px);
} 
```

## 变量插值

您可以在字符串中插入 LESS 变量：

### 少输入

```
div {
    > span {
        @pad: 10px;
        width: calc(~'100% - @{pad}');
    }
} 
```

### CSS 输出

```
div > span {
  width: calc(100% - 10px);
} 
```

## 混合转义值和编译值

您可能想转义一个百分比值，但继续在编译时评估一些东西：

### 少输入

```
@btnWidth: 40px;
div {
    > span {
        @pad: 10px;
        width: calc(~'(100% - @{pad})' - (@btnWidth * 2));
    }
} 
```

### CSS 输出

```
div > span {
  width: calc((100% - 10px) - 80px);
} 
```

来源： http: [//lesscss.org/functions/#string-functions-escape](http://lesscss.org/functions/#string-functions-escape)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:57:56.290

我想`width: -moz-calc(25% - 1em);`这就是你要找的。您可能希望查看此[链接](http://hacks.mozilla.org/2010/06/css3-calc/)以寻求任何进一步的帮助

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-11T14:59:56.017

或者，您可以像这样使用边距属性：

```
 {
    background:#222;
    width:100%;
    height:100px;
    margin-left: 10px;
    margin-right: 10px;
    display:block;
    } 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2016-01-22T16:32:40.860

试试这个 ：

```
width:auto;
margin-right:50px; 
```

# function - 从 while 循环中调用的函数返回一个值

> ID：14814619
> 
> 赞同：2
> 
> 时间：2013-02-11T14:55:05.327
> 
> 标签：function, python-2.7, while-loop

关键是要猜测从整数区间中选择的随机数，并在固定的尝试次数内进行。

该`main`函数询问区间的上限和用户可以给出的猜测次数。然后核心函数应该返回猜测的值，所以当数字正确时，函数应该立即终止。

我在调试时放了一些打印语句，我明白该`y`值没有从函数返回到`while`语句。`core`

```
# -*- coding: utf-8 -*-
def main():
    from random import choice
    p = input("choose upper limit: ")
    t = input("how many attempts: ")
    pool = range(p+1)
    x = choice(pool)
    i = 1
    while ((x != y) and (i < t)):
        core(x,y)
        i += 1

def core(x,y):
    y = input("choose a number: ")
    if y == x:
        print("You gussed the right number!")
        return y
    elif y > x:
        print("The number is lower, try again")
        return y
    else:
        print("The number is higher, try again")
        return y 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:59:23.253

您想将*返回值`core`*分配回局部`y`变量，它不是通过引用传递的：

```
y = core(x) 
```

您还需要`y`在进入循环之前进行设置。函数中的局部变量在其他函数中不可用。

因此，您根本不需要传递`y`给`core(x)`：

```
def core(x):
    y = input("choose a number: ")
    if y == x:
        print("You gussed the right number!")
        return y
    elif y > x:
        print("The number is lower, try again")
        return y
    else:
        print("The number is higher, try again")
        return y 
```

循环变为：

```
y = None
while (x != y) and (i < t):
    y = core(x)
    i += 1 
```

你在函数中设置*什么*并不重要，只要在用户猜测之前它永远不会等于。`y``main()``x`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:00:10.640

```
y = -1
while ((x != y) and (i < t)):
    y = core(x,y)
    i += 1 
```

您在循环之前“初始化” y 。在循环内部，您将 y 设置为 core() 函数的结果。

# delphi - 检查文件是否正在使用以及由哪个应用程序使用？

> ID：14814624
> 
> 赞同：7
> 
> 时间：2013-02-11T14:55:21.330
> 
> 标签：delphi, delphi-2009, windows-api-code-pack

尝试使用下面提到的方法来获取有关锁定文件的更多详细信息。

[文件是否在使用中](http://blog.delphi-jedi.net/2010/11/14/is-file-in-use/)

```
function GetFileInUseInfo(const FileName : WideString) : IFileIsInUse;
var
  ROT : IRunningObjectTable;
  mFile, enumIndex, Prefix : IMoniker;
  enumMoniker : IEnumMoniker;
  MonikerType : LongInt;
  unkInt  : IInterface;
begin
  result := nil;

  OleCheck(GetRunningObjectTable(0, ROT));
  OleCheck(CreateFileMoniker(PWideChar(FileName), mFile));

  OleCheck(ROT.EnumRunning(enumMoniker));

  while (enumMoniker.Next(1, enumIndex, nil) = S_OK) do
  begin
    OleCheck(enumIndex.IsSystemMoniker(MonikerType));
    if MonikerType = MKSYS_FILEMONIKER then
    begin
      if Succeeded(mFile.CommonPrefixWith(enumIndex, Prefix)) and
         (mFile.IsEqual(Prefix) = S_OK) then
      begin
       if Succeeded(ROT.GetObject(enumIndex, unkInt)) then
        begin
          if Succeeded(unkInt.QueryInterface(IID_IFileIsInUse, result)) then
          begin
            result := unkInt as IFileIsInUse;
            exit;
          end;
        end;
      end;
    end;
  end;
end; 
```

但是调用

```
unkInt.QueryInterface(IID_IFileIsInUse, result) 
```

总是返回`E_NOINTERFACE`。

平台：Windows 7 32 位操作系统，打开 word 文件和 .msg 文件。

检查从资源管理器打开文件并尝试删除。它显示了有关打开文件的应用程序的正确详细信息。在我的应用程序中，我尝试显示有关打开文件的应用程序的信息。但是当尝试将指针转换为`IFileIsInUse`接口时，`QueryInterface`调用失败并返回代码`E_NOINTERFACE`，这意味着 ROT 中的对象没有实现`IFileIsInUse`。AFASIK，MS Office 文件实现`IFileIsInUse`

知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T18:02:17.637

事实上，您的代码工作正常。问题是您正在测试的程序实际上并没有实现`IFileIsInUse`。当系统返回时`E_NOINTERFACE`，它是准确的。接口未实现。

我[使用 SDK 中的 File Is In Use Sample](http://msdn.microsoft.com/en-gb/library/windows/desktop/ee330722.aspx)对此进行了测试。由该应用程序添加到 ROT 的文件（它确实实现`IFileIsInUse`了 ）被您的代码拾取。另一方面，由 Acrobat 8​​ 和 Word 2010 打开的文件却没有。

我从中得出的结论是，`IFileIsInUse`原则上这是一个好主意，但如果应用程序不支持它，它就没有多大用处。似乎有一些主要的应用程序没有。

很明显，当您发现`IFileIsInUse`未实施时，您将需要使用一种或多种其他机制来检测哪个应用程序锁定了文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-15T20:03:32.567

SysInternals Process Explorer 帮助我删除了一个锁定的 .msg 文件，该文件导致了系统问题，例如锁定桌面。

*   运行 Process Explorer，使用 Find 菜单，
*   输入完整路径文件名，
*   点击搜索。

为了删除锁定的文件，我打开了一个 cmd 窗口并尝试`del`锁定文件，但删除挂在锁上。

然后我使用 Process Explorer 重新启动持有锁的进程 - Explorer.exe。

然后`del`顺利完成。

# swift - NSInternalInconsistencyException'，原因：'在从通讯录数据库中获取 500 多条记录时无法加载 NIB

> ID：14814629
> 
> 赞同：3
> 
> 时间：2013-02-11T14:55:50.357
> 
> 标签：swift, sqlite, uitableview, cocoa-touch, nib

如果这个问题被重复，我很抱歉，但我无能为力，因为我已经尝试了所有可能的解决方案，但没有任何效果，因此我问这个问题。

我一次从通讯簿数据库中的表格视图中加载了近 500 条记录。如果记录很少，比如 50 或 100，我的表显示没有任何问题。但是当记录数超过 300 条时，我遇到了一个崩溃，上面写着：

> *** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法在包中加载 NIB：“NSBundle（已加载）”，名称为“GroupmemberCell”

我已经阅读了其他一些具有解决方案的表格，例如签入`Build Phase`文件或签入 iOS 应用程序的包内容。我已经尝试了一切，但没有任何效果该文件存在于构建阶段，并且还被添加到我的应用程序文件的包内容中。我也曾经删除过这些文件，即我完全删除了它们并创建了一个新的 UITableViewCell 类，但随后也出现了崩溃。

GroupmemberCell 是我在表格视图中添加的 xib。下面是来自行数据源方法的单元格的代码片段。

```
静态 NSString *CellIdentifier = @"Cell";
    GroupmemberCell *cell = (GroupmemberCell*) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];;
    如果（单元格 == 零）
    {

        NSArray *cellxibfilepath = [[NSBundle mainBundle]loadNibNamed:@"GroupmemberCell" owner:self options:nil];

        if (cellxibfilepath)
        {

        for(id cellObjects in cellxibfilepath)
        {
            if ([cellObjects isKindOfClass:[UITableViewCell 类]])
            {
                单元格 = (GroupmemberCell*)cellObjects;
            }

        }
        }
    }

```

这里可能有什么问题，就像相同的代码适用于 100 条记录集而没有任何崩溃，但如果我获取一组 500 多条记录并将它们显示在表中，则会导致崩溃。

为了获取我没有在后台拨打任何电话的记录，我尝试过一次，但崩溃也没有解决。

我的想法：我想我一次加载大量数据，这可能会给 UI 创建的主线程带来一些问题，因为我确实在我的数组中获取数据并检查它们，然后只有我发出命令重新加载表.

```
如果（tableReloadArray.count！=0）{
             [objtable reloadData];
        }

```

我在许多应用程序中看到他们以闪电般的速度加载 1000+ 数据 - 他们是如何做到的？他们的方法是什么，或者我缺少什么最佳实践，请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:27:08.010

经过大量的头脑风暴和喝了很多咖啡后，我使用“分析工具”清除了所有内存警告，然后使用“仪器工具”查看是否有任何泄漏也清除了它们。删除派生数据并清理应用程序，我就完成了。

“分析工具”提出的整个应用程序大约有 67 个问题，“仪器工具”显示的问题超过 3-4 个

我知道这听起来可能很愚蠢，但我通过这样做解决了我的崩溃问题。希望这可以帮助陷入同样问题的人。

# python - python代码慢皮肤检测

> ID：14814634
> 
> 赞同：0
> 
> 时间：2013-02-11T14:56:14.137
> 
> 标签：python

此代码将颜色空间更改为 LAB，并使用阈值查找图像的皮肤区域。但这太慢了。我不知道如何使它更快？

```
from colormath.color_objects import *

def skinDetection(img, treshold=80, color=[255,20,147]):

    print img.shape
    res=img.copy()
    for x in range(img.shape[0]):
        for y in range(img.shape[1]):
            RGBimg=RGBColor(img[x,y,0],img[x,y,1],img[x,y,2])
            LABimg=RGBimg.convert_to('lab', debug=False)
            if (LABimg.lab_l > treshold):
                res[x,y,:]=color
            else: 
                res[x,y,:]=img[x,y,:]

    return res 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T16:10:08.813

Python 中的嵌套循环总是很慢。您遍历每个像素，因此需要很多时间。

执行向量化操作总是更快，即对整个数组执行操作并让底层 C 例程执行循环。

我不是很`colormath`清楚，因此我无法为这个库提供相应的代码（也不知道它是否存在），但是对于`scikit-image`，我可以：

```
def mask2(rgb, threshold=80, color=[255,20,147]):
    res = rgb.copy()
    lab = skimage.color.rgb2lab(rgb)
    mask = lab[:,:,0] > threshold
    res[mask] = np.array(color).reshape(1,-1).repeat(mask.sum(),axis=0)
    return res 
```

我将整个图像转换为 LAB 空间，然后确定一个掩码（其中 L 高于阈值），然后将这些像素设置为新颜色。此方法产生的结果与您的方法略有不同（可能是由于不同的转换实现），但它可能满足您的需求。

下面是一个完整的脚本，包括您的方法 ( `mask1`) 和性能测量。

```
from binascii import unhexlify
import zlib
from cStringIO import StringIO
import skimage.io, skimage.color
from colormath.color_objects import RGBColor
import numpy as np

def mask1(img, treshold=80, color=[255,20,147]):
    res=img.copy()
    for x in range(img.shape[0]):
        for y in range(img.shape[1]):
            RGBimg=RGBColor(img[x,y,0],img[x,y,1],img[x,y,2])
            LABimg=RGBimg.convert_to('lab', debug=False)
            if (LABimg.lab_l > treshold):
                res[x,y,:]=color
            else: 
                res[x,y,:]=img[x,y,:]
    return res

def mask2(rgb, threshold=80, color=[255,20,147]):
    res = rgb.copy()
    lab = skimage.color.rgb2lab(rgb)
    mask = lab[:,:,0] > threshold
    res[mask] = np.array(color).reshape(1,-1).repeat(mask.sum(),axis=0)
    return res

sdata = "789C9D953D56C52010856363696D49E90AAC73ECDD4396C25228B210CE711B2CC2CAC622CECC9D0C0321313A27E411123EEEFCC07B7BFF7A9CC45EA9BD507BD6F620F769CAF4FEE3096DB76DDACEAEE9865D4CF79C6DAB34F46D441F7F23F88F6F728E6AD794724EDD5CBB9B790EF53FBF1595D9524C517E93CDEA3A433D984E83440327B318B633BF867A4C12734A5654CE26F24F29AB28704A067685363C665B0582D30ADF0F39A2717F3979C9412A6108A1D731C6992C04BD96252ECB9A2AC4A60F2B07904AA8166C84B51545D172C3C8D02B4CA3D51D841F7584B5CD2E17E2698A5DDE991302AD6240189666558242122D68F1C0F19F99475104D0F7C6216D5A6665AFAED62F8A27730A57E3BC4858669D25716B387BA04E39B41059BCC7E99CEAF4B05F971C75AAB0181AE938111CA9DB9A71C9B5443EA000D4231183A4F8ECEF79E7E5B40E2DEF647BDEA9AB6250EA59F70B6AC90E9FAABFB7D040E43C010107D4F1086A4ADA6D8DA66C8AEDD9C10E3514196A0F060220B59825C843883F5D71A67586809FEDF17FFCD75C4CFC012B43550B"
fh = StringIO(zlib.decompress(unhexlify(sdata)))
rgb = skimage.io.imread(fh)

res1 = mask1(rgb)
res2 = mask2(rgb)

import timeit
t1 = timeit.timeit("mask1(rgb)", setup="from __main__ import rgb, mask1", number=100)
t2 = timeit.timeit("mask2(rgb)", setup="from __main__ import rgb, mask2", number=100)

print t1, t2, t1/t2 
```

我在这段代码中嵌入了一张图片，部分代码只是为了解码。

这个脚本的输出是

```
4.43572092984 0.0531735152348 83.4197421453 
```

所以我的方法是你的**80**倍。对于更大的图像（这个只有 24 x 24 像素），差异甚至更大，快 120 倍。

## 看看矢量化的力量！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:58:53.987

我建议遵循一个简单的过程来优化您的代码：
1\. 添加一些性能指标。您必须了解大部分时间都在使用代码的哪一部分。
2\. 通过更多性能更新这些功能
3\. 衡量性能改进

# python - Python 类，如何以风格方式使用它们，以及单一职责原则

> ID：14814635
> 
> 赞同：6
> 
> 时间：2013-02-11T14:56:21.010
> 
> 标签：python, class, oop, single-responsibility-principle

我用 Python 编程已经有一段时间了，并且已经涵盖了一些 Python 风格的知识，但在如何正确使用类方面仍然存在问题。在阅读面向对象的讲座时，我经常发现像单一责任原则这样的规则

> “单一职责原则说，一个类应该有一个，而且只有一个，改变的理由”

读到这里，我可能会想到将一个班级分成两个班级，例如：

```
class ComplicatedOperations(object):
    def __init__(self, item):
        pass

    def do(self):
        ...

    ## lots of other functions

class CreateOption(object):
    def __init__(self, simple_list):
        self.simple_list = simple_list

    def to_options(self):
        operated_data = self.transform_data(self.simple_list)
        return self.default_option() + operated_data

    def default_option(self):
        return [('', '')]

    def transform_data(self, simple_list):
        return [self.make_complicated_operations_that_requires_losts_of_manipulation(item)
                        for item in simple_list]

    def make_complicated_operations_that_requires_losts_of_manipulation(self, item):
            return ComplicatedOperations(item).do() 
```

对我来说，这引发了许多不同的问题。喜欢：

*   什么时候应该在类函数中使用类变量或传递参数？
*   类应该`ComplicatedOperations`是一个类还是只是一堆函数？
*   是否应该使用该`__init__`方法来计算最终结果。这是否使该课程难以测试。
*   pythonists的规则是什么？

**回答后编辑：**

所以，阅读奥古斯托的理论，我最终会得到这样的结果：

```
class ComplicatedOperations(object):
    def __init__(self):
        pass

    def do(self, item):
        ...

    ## lots of other functions

def default_option():
    return [('', '')]

def complicate_data(item):
    return ComplicatedOperations().do(item)

def transform_data_to_options(simple_list):
    return default_option() + [self.complicate_data(item)
                    for item in simple_list] 
```

（还纠正了 default_option 的一个小错误。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:41:54.890

一个类通常代表一种对象。类实例是该类型的特定对象。一个经典的例子是一个`Animal`类。a`cat`将是`Animal`. 类变量（我假设您的意思是那些属于实例而不是类对象本身的变量），应该用于实例的属性。在这种情况下，例如，`colour`可以是一个类属性，它可以设置为`cat.colour = "white"`或`bear.colour = "brown"`。如果值可能来自类外的某个来源，则应使用参数。如果`Animal`该类有一个`sleep`方法，它可能需要知道动物睡眠的持续时间和姿势。 `duration`这将是该方法的一个参数，因为它与动物没有关系，但是 `posture`将是一个类变量，因为它是由动物决定的。

在 python 中，一个类通常用于将一组共享*状态*的函数和变量组合在一起。继续上面的例子，一个特定的动物有一个在它的方法之间共享的*状态*，并且由它的属性定义。如果您的类只是一组不依赖于类状态的函数，那么它们也可以很容易地成为单独的函数。

如果`__init__`用于计算最终结果（由于`__init__`无法返回结果，必须将其存储在类的属性中），那么您还不如使用函数。然而，一种常见的模式是`__init__`通过类的其他几个（有时是私有的）方法进行大量处理。这样做的原因是，如果将大型复杂功能分解为更小的、不同的任务，然后每个任务都可以单独测试，那么它们通常更容易测试。但是，这通常仅在无论如何都需要类时才进行。

处理整个业务的一种方法是首先确定您需要什么功能。当你有一组函数或变量都作用于或应用于同一个对象时，是时候将它们移动到一个类中了。请记住，面向对象编程 (OOP) 是一种适用于某些任务的设计方法，但在本质上并不优于函数式编程（事实上，一些程序员会认为相反！），因此没有必要使用类，除非实际上存在需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:45:29.370

类是一种组织结构。所以，如果你不使用它们来组织，那你就做错了。:)

您可以使用它们来组织几种不同的东西：

1.  将数据与使用所述数据的方法捆绑在一起，定义代码将与该数据交互的一个点
2.  将类似函数捆绑在一起，提供易于理解的 API，因为“每个人都知道”所有数学函数都在数学对象中
3.  提供方法之间的定义通信，设置具有定义接口的操作“传送带”。每一个操作都是一个黑盒子，可以任意改变，只要符合标准
4.  抽象一个概念。这可以包括围绕数据库访问等中心思想的子类、数据、方法等等。然后这个类成为一个组件，您可以在其他项目中使用，只需最少的重组

如果您不需要像上面那样做一些组织性的事情，那么您应该追求简单性并以程序/功能风格进行编程。Python 是关于拥有一个工具箱，而不是一把锤子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T15:26:09.360

> 什么时候应该使用类变量或在类函数中传递参数

在您的示例中，我将传递`item`给该`do`方法。此外，这与任何语言的编程有关，只给一个类它需要的信息（最小权限），并通过参数（依赖注入）传递不是算法内部的所有内容，所以，如果`ComplicatedOperations`不需要项目初始化自身，不要将其作为 init 参数提供，如果需要 item 来完成它的工作，请将其作为参数提供。

> 该类应该`ComplicatedOperations`是一个类还是只是一堆函数

我会说，取决于。如果您正在使用各种操作，并且它们绝对共享某种接口或合同。如果操作反映了一些概念，并且所有方法都与类相关，那么当然可以。但如果它们是松散且不相关的，您可能只使用函数或重新考虑单一责任并将方法拆分为其他类

> 是否应该使用 init 方法来计算最终结果。这是否使该课程难以测试。

不，init 方法用于初始化，您应该在单独的方法上完成它的工作。

作为旁注，由于缺乏上下文，我不明白`CreateOption`'s 的作用是什么。如果它只是如上所示使用，您还不如将其删除...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T15:30:57.630

我个人认为类是概念。我会定义一个 Operation 类，它的行为类似于操作，因此包含一个 do() 方法，以及可能使其唯一的所有其他方法/属性。

正如 mgilson 正确所说，如果您无法定义和隔离任何概念，那么简单的函数式方法可能会更好。

要回答您的问题：

*   当实例之间共享某个属性时，您应该使用类属性（在 Python 中，类属性在编译时初始化，因此不同的对象将看到相同的值。通常类属性应该是常量）。使用实例属性在其方法中使用特定于对象的属性，而无需传递它们。这并不意味着你应该把所有的东西都放在 self 中，而只是你认为你的对象的特征。使用传递的变量具有与您的对象无关的值，并且可能取决于外部对象的状态（或取决于程序的执行）。
*   如上所述，我会保留一个类 Operation 并使用一组 Operation 对象来进行计算。
*   init 方法只会实例化对象并进行对象正确行为所需的所有处理（换句话说，使其读取使用）。
*   想想你试图建模的想法。

# iphone - 自定义 UITabBarController -- 最佳方法

> ID：14814636
> 
> 赞同：0
> 
> 时间：2013-02-11T14:56:25.880
> 
> 标签：iphone, ios, objective-c, uitabbarcontroller

什么是创建完全自定义`UITabBarController`外观的最佳方式。

我需要完全自定义它的大小，为其设置动画等。

我的解决方案只是使用`UIView`tabbarcontroller ，然后`UIView`根据在上面选择的按钮替换上面的它`UIView`。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T20:27:10.500

这是一个很好的指南： [http ://www.felipecypriano.com/2012/02/27/how-to-customize-uitabbar-on-ios-5/](http://www.felipecypriano.com/2012/02/27/how-to-customize-uitabbar-on-ios-5/)

此示例取自该站点：

基本上创建一个backgroundImage，selectionIndicatorImage，适当调整字体。

```
// Probably put these in your AppDelegate, setup the background and selection image
[[[self tabBarController] tabBar] setBackgroundImage:[UIImage imageNamed:@"background"]];
[[[self tabBarController] tabBar] setSelectionIndicatorImage:[UIImage imageNamed:@"selected"]];

// In your VC which is inside the tab bar
- (id)init {
    self = [super initWithNibName:@"MyNibName" bundle:nil];
    if (self) {
        self.tabBarItem = [[UITabBarItem alloc] initWithTitle:@"The Title" image:nil tag:0];
        [[self tabBarItem] setFinishedSelectedImage:[UIImage imageNamed:@"tab_icon"] withFinishedUnselectedImage:[UIImage imageNamed:@"tab_icon"]];
        [[self tabBarItem] setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:[UIColor whiteColor], UITextAttributeTextColor, nil] forState:UIControlStateNormal];
    }
} 
```

# tfs - TFS2012 - 复制诊断活动日志时访问被拒绝

> ID：14814641
> 
> 赞同：3
> 
> 时间：2013-02-11T14:56:38.203
> 
> 标签：tfs, tfsbuild

我对 TFS2012 构建有一个问题，我似乎无法弄清楚也找不到任何解决方案。

**设置：**

独立的 SQL 服务器、独立的 TFS 应用程序服务器 (TFSAT01 / WinSvr08R2) 和独立的构建机器 (TFSBLD01 / Win7x64)。

删除在 TFSAT01 上创建的共享 - 授予我们域中的两台计算机的 R/W 访问权限：TFSAT01$ 和 TFSBLD01$（根据 #8 [http://msdn.microsoft.com/en-us/library/bb778394.aspx](http://msdn.microsoft.com/en-us/library/bb778394.aspx)）

构建控制器在 TFS 应用程序上配置。服务器 TFSAT01。

构建代理在构建机器 TFSBLD01 上运行。

**问题：**

我的 CI 构建完成并将所有二进制文件复制到 drop 共享。

**但是**我 在构建输出窗口的*其他错误和警告*下不断收到一个错误，上面写着：“将诊断活动日志复制到放置位置时发生错误。详细信息：访问路径 '\TFSAT01\Drops\PRODUCT-CI\PRODUCT -CI_20130211.16\Logs\ActivityLog.xml' 被拒绝。”。ActivityLog.xml 确实是写的，我可以访问它。

即使共享似乎配置了正确的访问权限，我为什么会收到此错误的任何想法？

**注意：** 我可以通过为构建代理指定要使用的用户帐户（也具有对 drop 共享的 R/W 访问权限）来解决此错误 - 但我宁愿坚持使用默认的 NetworkService 凭据构建控制器和代理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T11:12:03.920

根据评论中的讨论添加决议

构建控制器帐户需要对放置位置具有 R/W 权限。TFSAT01$ 帐户在此处配置，而构建控制器被配置为网络服务。由于这些不是真正相同的帐户，因此提供 NT AUTHORITY\NETWORK SERVICE 的 R/W 权限是必需的修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-27T11:47:58.743

构建控制器必须在对放置位置具有 R/W 权限的同一帐户下运行。我建议对构建代理和构建控制器使用相同的用户帐户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-02T15:06:51.107

在 TFS 构建控制器上，右键单击 XAML 构建配置 > [您的构建服务]

点击“停止服务”

单击“运行服务为：”部分下的“更改”按钮

使用有权访问 TFS 存储库和放置位置的用户。

ps 使用 TFS 2015

# java - Java Applet：逆向工程 HTTP 调用

> ID：14814642
> 
> 赞同：0
> 
> 时间：2013-02-11T14:56:40.387
> 
> 标签：java, http, ssl, applet, reverse-engineering

是否有任何工具或方法可以记录 Java 小程序的 HTTP 调用？甚至使用 SSL 的 Java 小程序？

我正在尝试确定 java 小程序是如何工作的。我只有 jar，没有源代码，到目前为止，我只有反编译。Java 小程序在运行时会进行许多 HTTP 调用，我想拦截这些调用以查看它们包含的内容并可能使用参数。是否有任何工具可以监视您计算机上运行的 java 小程序的 HTTP 调用？请注意，小程序使用 SSL，所以我不认为像 ethereal 这样的工具（在系统级别监视所有内容）会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:58:17.840

你看过[Fiddler2](http://www.fiddler2.com/fiddler2/)吗？您可以使用证书对其进行配置，以便它可以处理 SSL 流量。

# android - 将二值图像（单色）转换为采样图像

> ID：14814643
> 
> 赞同：1
> 
> 时间：2013-02-11T14:56:43.263
> 
> 标签：android, image-processing, binary, sampling

我在将图像转换为采样图像时遇到了一些问题，如下图所示。首先，我设法使用此代码将图像从实时相机转换为二进制图像/单色图像

```
 protected Bitmap processFrame(byte[] data) {
        //int frameSize = getFrameWidth() * getFrameHeight();
        int[] rgba = mRGBA;

              for (int i = 0; i < getFrameHeight(); i=i+1){
                for (int j = 0; j < getFrameWidth(); j=j+1) {
                    int index = i * getFrameWidth() + j;
                    int y = (0xff & ((int) data[index]));
                    if(y>128)y=0;
                    else y=0xff;
                    rgba[i * getFrameWidth() + j] = 0xff000000 + (y << 16) + (y << 8) + y;
                }
            }  

        mBitmap.setPixels(rgba, 0/* offset */, getFrameWidth() /* stride */, 0, 0, getFrameWidth(), getFrameHeight());
        return mBitmap;

    } 
```

1.  但下一步我想将这些二进制图像显示为如下图所示的采样图像

我可以在哪里添加显示采样图像的代码？喜欢这个网站：[http ://cse.ust.hk/learning_objects/imagerep.html](http://www.cse.ust.hk/learning_objects/imagerep.html)

# msbuild - 解决方案中多个网站项目的持续部署

> ID：14814644
> 
> 赞同：7
> 
> 时间：2013-02-11T14:56:48.607
> 
> 标签：msbuild, visual-studio-2012, continuous-integration, msdeploy, continuous-deployment

我们正在使用 VS2012 并有一个包含 4 个网站项目的解决方案。我们已将以下 MSBuild 参数添加到我们的持续集成 msbuild 参数中：

> /p:DeployOnBuild=True /P:Configuration=Testing /p:DeployTarget=MsDeployPublish /p:MSDeployPublishMethod=WMSvc /p:CreatePackageOnPublish=False /p:DeployIisAppPath="{test}" /p:SkipExtraFilesOnServer=true /p:MsDeployServiceUrl ={test}/MsDeploy.axd /P:AllowUntrustedCertificate=True /p:username={username}/p:password={password}

当我们检查并运行持续集成时，它将所有 4 个网站发布到同一个目录。我们如何指定哪个项目属于哪个 IIS 应用程序？

[我们已尝试按照如何告诉 TFS 部署包含在一个解决方案中的多个 webapps 中的](https://stackoverflow.com/questions/6457108/how-to-tell-tfs-to-deploy-multiple-webapps-containing-in-one-solution)建议将设置移动到 csproj ？进行更改后，签入有效，但未发布。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-12T20:47:47.077

它正在部署到同一个站点，因为您是`DeployIisAppPath`在命令行中传入的。

您可以在每个具有相同名称（例如 ）的 Web 应用程序中创建发布配置文件，每个`Stage.pubxml`都包含不同的`DeployIisAppPath`值。部署时，您可以指定`/p:PublishProfile=Stage`并将使用该配置文件中的设置*用于每个特定项目*。

如果您想从命令行指定属性，只需将它们从发布配置文件中删除即可`SkipExtraFilesOnServer`。`MsDeployServiceUrl`

# php - 如何将文本文件中的特定数据导入 mysql？

> ID：14814647
> 
> 赞同：0
> 
> 时间：2013-02-11T14:56:53.960
> 
> 标签：php, mysql

我从 dbpedia 下载了一个文件，其内容如下所示：

```
<http://dbpedia.org/resource/Selective_Draft_Law_Cases> <http://dbpedia.org/ontology/wikiPageExternalLink>        <http://supreme.justia.com/cases/federal/us/245/366/> .
<http://dbpedia.org/resource/List_of_songs_recorded_by_Shakira> <http://dbpedia.org/ontology/wikiPageExternalLink> <http://www.shakira.com/> .
<http://dbpedia.org/resource/Bucharest_Symphony_Orchestra>   <http://dbpedia.org/ontology/wikiPageExternalLink> <http://www.symphorchestra.ro/> .
<http://dbpedia.org/resource/Bucharest_Symphony_Orchestra> <http://dbpedia.org/ontology/wikiPageExternalLink> <http://symphorchestra.ro> .
<http://dbpedia.org/resource/Bucharest_Symphony_Orchestra> <http://dbpedia.org/ontology/wikiPageExternalLink> <http://www.youtube.com/symphorchestra> . 
```

我需要从每一行的第一部分提取标题（即`Selective_draft_Law_Cases`在第一行，List_of_songs_etc 在第二行等））并将其与同一行中的第三个元素的 URL 一起保存在 mysql 表中，即[第一行](http://supreme.justia.com/cases/federal/us/245/366/) 第二[行](http://www.shakira.com/) 等。

我还需要跳过文件中包含不同、不相关信息的第一行。

在 PHP 中完成这项工作的最快方法是什么？

注意：该文件相当大（超过 1 GB，超过 600 万行）。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:59:16.833

您应该使用正则表达式并使用 PHP 的[preg_match](http://php.net/manual/en/function.preg-match.php)函数，如果文件太大（这似乎是您的情况），您可能需要使用[fopen](http://php.net/manual/es/function.fopen.php) + [fgets](http://php.net/manual/es/function.fgets.php) + [fclose](http://php.net/manual/es/function.fclose.php)以避免将整个文件加载到内存和工作行中按行。

您可以尝试测试[file_get_contents](http://php.net/manual/es/function.file-get-contents.php)读取文件的性能，但由于需要大量内存，这似乎不是您的情况更快的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:20:20.443

我确信它可以被优化，但它是一个开始。尝试：

```
function insertFileToDb(){
    $myFile = "myFile.txt"; //your txt file containing the data
    $handle = fopen($myFile, 'r');

    //Read first line, but do nothing with it
    $contents = fgets($handle);

    //now read the rest of the file line by line
    while(!feof($handle)){
       $data = fgets($handle);

       //remove <> characters
       $vowels = array("<", ">");
       $data = str_replace($vowels, "", $data);

       //remove spaces to a single space for each line
       $data = preg_replace('!\s+!', ' ', $data);

       /*
        * Get values from array, 1st URL is $dataArr[0] and 2nd URL is $dataArr[2]
        * Explode on ' ' spaces
       */
       $dataArr = explode(" ", $data);

       //Get last part of uri from 1st element in array
       $title = $this->getLastPartOfUrl($dataArr[0]);   

       //Execute your sql query with $title and $dataArr[2] which is the url
       INSERT INTO `table` ...
    } 
    fclose($handle);
} 

function getLastPartOfUrl($url){
   $keys = parse_url($url); // parse the url
   $path = explode("/", $keys['path']); // splitting the path
   $last = end($path); // get the value of the last element
   return $last;
} 
```

# mysql - MySQL：为什么索引列标记为“BTREE”？

> ID：14814650
> 
> 赞同：2
> 
> 时间：2013-02-11T14:57:12.353
> 
> 标签：mysql

让我们看两个表：

```
 CREATE TABLE  `orders_products` (
  `ORDER_ID` int(10) unsigned NOT NULL,
  `PRODUCT_ID` int(10) unsigned NOT NULL,
  `QUANTITY` tinyint(3) unsigned NOT NULL,
  `USER_ID` int(10) unsigned NOT NULL,
  PRIMARY KEY (`ORDER_ID`,`PRODUCT_ID`,`USER_ID`) USING BTREE,
  KEY `FK_orders_products_3` (`USER_ID`),
  KEY `FK_orders_products_2` (`PRODUCT_ID`) **USING BTREE**,
  CONSTRAINT `FK_orders_products_1` FOREIGN KEY (`ORDER_ID`) REFERENCES `orders` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `FK_orders_products_2` FOREIGN KEY (`PRODUCT_ID`) REFERENCES `products` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `FK_orders_products_3` FOREIGN KEY (`USER_ID`) REFERENCES `users` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

其他：

```
CREATE TABLE  `products_pictures_comments` (
  `PICTURE_ID` int(10) unsigned NOT NULL,
  `USER_ID` int(10) unsigned NOT NULL,
  `COMMENT` text NOT NULL,
  `DATEAT` datetime NOT NULL,
  PRIMARY KEY (`PICTURE_ID`,`USER_ID`,`DATEAT`),
  KEY `FK_products_pictures_comments_2` (`USER_ID`),
  CONSTRAINT `FK_products_pictures_comments_1` FOREIGN KEY (`PICTURE_ID`) REFERENCES `products_pictures` (`ID`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `FK_products_pictures_comments_2` FOREIGN KEY (`USER_ID`) REFERENCES `users` (`ID`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

如您所见，由于未知原因出现了 USING BTREE。我用命令检查了表格`show index from`，所有表格都说 Index_type 的 BTREE。但它只出现在 FK_orders_products_2 外键中。为什么？

编辑：这些表定义是由 SHOW CREATE TABLE 生成的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-18T10:53:24.337

首先，我想提一下 BTREE 是 MYSQL 中大多数存储引擎的默认索引类型。我可以看到您正在使用 InnoDB 存储引擎和两个语句，并且 BTREE 是 innodb 存储引擎中索引的默认类型，尽管您没有指定关键字。

我很确定您可能在创建表 orders_products 表时保留了“USING BTREE”关键字，该表导致“使用 BTREE”包含在由 SHOW CREATE TABLE 生成的 DDL 脚本中。

- - - - - - - 实验 - - - - - - -

删除表 zzz_test1;

删除表 zzz_test2;

创建表 zzz_test1(id INT, NAME VARCHAR(50), PRIMARY KEY(id) USING BTREE);

创建表 zzz_test2(id INT, NAME VARCHAR(50), PRIMARY KEY(id));

显示创建表 zzz_test1;

* * *

- - - - - - 输出 - - - - - - -

创建表`zzz_test1`( `id`INT(11) NOT NULL DEFAULT '0', `name`VARCHAR(50) DEFAULT NULL, PRIMARY KEY ( `id`) USING BTREE) ENGINE=INNODB DEFAULT CHARSET=latin1

* * *

显示创建表 zzz_test2;

- - - - - - 输出 - - - - - - -

CREATE TABLE `zzz_test2`( `id`INT(11) NOT NULL DEFAULT '0', `NAME`VARCHAR(50) DEFAULT NULL, PRIMARY KEY ( `id`)) ENGINE=INNODB DEFAULT CHARSET=latin1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:05:17.910

因为btree（假设它意味着平衡而不仅仅是二进制）是维护索引的有效数据结构。

它具有合理的插入和删除特性和*非常*好的搜索特性。

如果您的问题更多的是为什么它没有在任何地方使用，那几乎可以肯定是因为它使用了*其他*方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:09:25.323

好吧，这很正常，索引存储在哈希和 btree 中。我认为 BTREE 是用于在旧 MySQL 中实现索引的数据结构。但是 InnoDB 引擎有一种新的自适应哈希技术，它使用哈希表进行索引，使其速度更快。那里没有错。

# jquery - 如何获取带有开始/结束时间的 jquery-week-calendar 上显示的事件列表？

> ID：14814655
> 
> 赞同：0
> 
> 时间：2013-02-11T14:57:24.363
> 
> 标签：jquery, calendar

我正在使用[jquery-week-calendar](https://github.com/themouette/jquery-week-calendar)并希望在用户在浏览器中完成添加/移动/删除它们*之后将所有日历事件发布到服务器。*这意味着我将需要日历上当前显示的所有事件的列表，其中包含开始/结束日期+时间（类似于[getTimeslotTimes](https://github.com/themouette/jquery-week-calendar/blob/master/jquery.weekcalendar.js#L441)）。任何帮助将不胜感激，请参阅下面我尝试获取数据的内容。

谢谢， 奇拉格

我试过`$("#calendar").find('.wc-cal-event')`了，但它不包括此处显示的日期和时间：

```
<div class="wc-cal-event ui-corner-all ui-resizable ui-draggable" style="line-height: 15px; font-size: 13px; top: 480px; height: 539px; display: block;"><div class="wc-time ui-corner-top">08:00 am to 04:59 pm<div class="wc-cal-event-delete ui-icon ui-icon-close"></div></div><div class="wc-title">Open hours</div><div class="ui-resizable-handle ui-resizable-s">=</div></div> 
```

也 `$("#calendar").data().events`只返回处理程序：

```
click [Object { type="click",  guid=2,  handler=function(),  more...}]
mouseout [Object { type="mouseout",  guid=4,  handler=function(),  more...}]
mouseover [Object { type="mouseover",  guid=3,  handler=function(),  more...}]
remove [Object { namespace="weekCalendar",  type="remove,  guid=1}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:03:08.290

看起来好像源包含一个`serializeEvents()`函数，定义如下：

```
serializeEvents: function() {
    var self = this;
    var calEvents = [];

    self.element.find('.wc-cal-event').each(function() {
       calEvents.push($(this).data('calEvent'));
    });
    return calEvents;
}, 
```

或者，看起来有关事件的信息存储在`calEvent`data 键中，所以我想您可以按照以下方式编写您的 won 函数：

```
$('.wc-cal-event').each(function() {  
    // Work here with $(this).data('calEvent');
}); 
```

# shell - 使用 Shell awk 搜索字符串

> ID：14814658
> 
> 赞同：0
> 
> 时间：2013-02-11T14:57:40.007
> 
> 标签：shell, scripting, awk

我有一个字符串：

`The disk 'virtual memory' also known as 'Virtual Memory' has exceeded the maximum utilization threshold of 95 Percent.`

我需要每次都在这个字符串单词中搜索`The disk`，如果找到，那么我只需要提取短语`'*' also known as '*'`并将其放入变量中`MONITOR`

换句话说，我想搜索并将值放入

```
MONITOR="'virtual memory' also known as Virtual Memory'" 
```

我该怎么做`awk`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:18:45.143

这是一个片段，可以满足您的描述。您应该将其放入`$(...)`以将其分配给 $MONITOR 变量：

```
$ awk '/The disk '\''.*'\'' also known as '\''.*'\'' has exceeded/ {gsub(/The disk /,"");gsub(/ has exceeded.*$/,"");print}' input.txt 
```

在这种情况下，awk 的两个问题是

*   它的正则表达式没有子匹配提取（这就是为什么我的解决方案`gsub()`在正文中使用以摆脱该行的第一部分和最后一部分。
*   要在 shell 脚本中使用 awk 正则表达式中的引号，您需要`'\''`序列来对其进行转义（更多信息[在这里](https://stackoverflow.com/questions/9899001/how-to-escape-single-quote-in-awk-inside-printf)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:23:14.473

`sed`使用than可能会更容易一些`awk`：

```
string="The disk 'virtual memory' also known as 'Virtual Memory' has exceeded the maximum utilization threshold of 95 Percent."

MONITOR=$(echo "$string" | sed -n "/The disk \('[^']*' also known as '[^']*'\) .*/s//\1/p") 
```

如果`awk`有必要，那么：

```
MONITOR=$(echo "$string" | awk "/The disk '[^']*' also known as '[^']*'/ {
                                print \$3, \$4, \$5, \$6, \$7, \$8, \$9; } {}') 
```

空大括号`{}`匹配任何行并且不打印任何内容，因此`awk`只处理匹配正则表达式的行。请注意，这假设每个磁盘都有一个名称，其中包含两个单词。您需要使用更强大的处理（`gsub`例如函数）来进行基于正则表达式的替换。这不是`awk`强项；`sed`更容易用于该任务。

这两个命令都设置为处理穿插不匹配行的多行数据（但也适用于包含匹配信息的单行）。仅在单独的行上打印引号之间的名称也不是很困难，因此您之后要做的剖析更少（以获得两个以空格分隔的名称）。

# iphone - 可变集合作为属性的最佳实践

> ID：14814662
> 
> 赞同：3
> 
> 时间：2013-02-11T14:57:48.610
> 
> 标签：iphone, ios, objective-c

我打算使用一个`NSMutableDictionary`属性来存储游戏数据（例如分数、设置等）。

```
@property (nonatomic, copy) NSMutableDictionary *gameData; 
```

在研究为什么没有属性的“可变复制”选项时，我发现[了这个讨论](https://stackoverflow.com/questions/816720/whats-the-best-way-to-use-obj-c-2-0-properties-with-mutable-objects-such-as-ns)，接受的答案指出：

> 正确的做法是不要让可变数组成为属性

那么在现代 Objective-C 中将可变集合作为属性处理的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T15:12:34.113

对于一个类来说，为一个集合对象公开一个可变属性是一种非常少见的模式，因为它似乎破坏了封装。

尽管如此，*在某些*情况下它可能是有意义的：例如，您可以为某些内部管理的集合返回一个 KVO 代理（使用[KVC's`mutableArrayValueForKey:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueCoding_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/mutableArrayValueForKey%3a)）。

在这些情况下，是否将 getter 声明为属性或普通方法并不重要。但是，如果是属性，它不应该是`copy`属性。

为了使这一点更清楚，这里有一个例子。我们有一个声明一个公共 getter 的类：

```
@interface Foo : NSObject

@property (strong, readonly) NSMutableArray *publicBars;

@end 
```

该实现管理一个封装的私有可变数组，名为`_bars`：

```
@implementation Foo
{
    NSMutableArray *_bars;
} 
```

这个数组的元素被[KVC 暴露给许多访问器](http://developer.apple.com/library/ios/documentation/cocoa/conceptual/KeyValueCoding/Articles/AccessorConventions.html#//apple_ref/doc/uid/20002174-SW4)：

```
- (NSUInteger)countOfBars
{
    return [_bars count];
}

- (id)objectInBarsAtIndex:(NSUInteger)idx
{
    return _bars[idx];
}

- (void)insertObject:(id)object inBarsAtIndex:(NSUInteger)idx
{
    if (_bars == nil)
        _bars = [NSMutableArray array];
    [_bars insertObject:object atIndex:idx];
}

- (void)removeObjectFromBarsAtIndex:(NSUInteger)idx
{
    [_bars removeObjectAtIndex:idx];
} 
```

这是花哨的部分：我们通过返回[一个 KVC 代理来实现公共属性，该代理反映和改变内部状态](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueCoding_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/mutableArrayValueForKey%3a)而不暴露内部 ivars。它仅使用上面定义的公共访问器来更改内部数组。

```
- (NSMutableArray *)publicBars
{
    return [self mutableArrayValueForKey:@"bars"];
}

@end 
```

我们可以使用代理来改变内部集合：

```
Foo *foo = [[Foo alloc] init];

NSMutableArray *bars = foo.publicBars;

[bars addObject:@1];
[bars addObject:@2];
[bars removeObjectAtIndex:0];

 // Now the internal _bars array is @[ @2 ]. 
```

在 Cocoa 中有这种模式和类似模式的实际例子。例如，`-[NSTextView textStorage]`它返回内部后备存储（从 派生的对象`NSMutableAttributedString`）。虽然不是一个集合对象，但这是一个可变对象，它将突变传递给它的宿主对象，即文本视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:04:49.887

恕我直言，您可以很好地使用可变属性 - 因为 Objective-C 中的属性不仅用于封装，还用于内存管理（通过 ARC）。

但是，您应该将此属性保留在您的实现文件中，将其作为不可变的只读部分公开给其他类。

```
//your_header_file.h

@interface YouClass : NSObject

@property (readonly) NSDictionary *gameState;
@end

//your_implementation_file.m

@interface YouClass ()
@property (nonatomic, strong) NSMutableDictionary *gameState;
@end

@implementation SomeClass

//deal with mutable state here

@end 
```

**编辑**：

此外，由于可变集合通常不是线程安全的，因此请确保始终从同一个线程更改它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T15:07:21.420

可变属性的问题是其他类可以**在所有者不注意的情况下**更改集合的内容。一个好的设计认为只有一个类负责一项特定的任务，在这种情况下存储游戏数据。

我要做的是使可变字典成为`strong`私有属性，并以以下形式向外界提供访问器方法：

```
- (void)storeObject:(id)object forSetting:(NSString *)settingName;
- (id)objectForSetting:(NSString *)settingName; 
```

如果您确实需要外部类才能将字典**设置**为一个整体，那么 - 在确保确实有必要之后 - 您仍然可以将其设置为非可变属性，该属性在设置时会创建来自非可变字典中项目的内部可变字典。但我认为你应该能够围绕这种必要性进行设计。

# javascript - 在表单上禁用 jqueryui/删除样式属性

> ID：14814663
> 
> 赞同：0
> 
> 时间：2013-02-11T14:57:49.970
> 
> 标签：javascript, jquery, jquery-ui

“规格”，我正在使用

*   jQuery 1.8.0
*   实时查询
*   jqueryUI 1.10.0 通过谷歌服务器并通过 jquery 服务器尝试过
*   推特引导

我正在使用 jqueryui 作为我的搜索建议，效果很好，我在那里使用黑色主题，黑色背景和灰色文本。我在网站上也有一个联系（电子邮件）表格。我注意到 jquery-ui.js 然后也使我的联系表单具有浅灰色。由于此联系表格具有白色背景色（twitter bootstrap），因此这不起作用，文本很难阅读！键入时和导航到下一个字段后。不受影响。

如何防止 jqueryui 影响表单（我认为这是可能的/应该是）。它添加：`style="color: rgb(204, 204, 204);"`到输入字段。

通过我自己的 javascript/jquery 覆盖这种风格感觉就像是一种黑客攻击！这是否真的有必要。我也试过这个，但失败了。我试过：

```
$('input').removeAttr('style'); 
```

感觉就像他们没有在任何好的实践中设计样式！为什么表单至少不受类之类的`<form class="jquery-ui-form">`或其他东西的控制，而不是搞定所有表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:42:11.693

`!important`仅当您想在您的网站中定义不可覆盖的 css 规则时使用，例如：

`#input { color: #000 !important; }`

这意味着：“无论如何，在我的网站中，输入永远不会有任何其他颜色而不是#000”。这种方式，`!important`可以成为一种选择。

在任何其他情况下，问问自己你的 css 规则的范围是什么。

*   只有一个输入吗？=> 使用 an`#id`来定位您的输入或在 js 中定义样式`.css(...)`
*   对于特定标签中的所有输入？=> 只需定义一个更具体的规则来定位您的输入，例如`.parent-div-class input { color: ... }`. 该规则将具有比属性更好的优先级`input { color: ... }`，并将覆盖属性。

`!important`可能是简单的方法，但不是最好的。

# java - 在 Android 中解析复杂的 JSON

> ID：14814684
> 
> 赞同：1
> 
> 时间：2013-02-11T14:59:04.290
> 
> 标签：java, android, json, android-listview, android-arrayadapter

伙计们，我正在尝试在下面解析这个 JSON

```
{"response": 
{"message": "Success", 
"code": 2002, 
"payload": 
    {"article": [
                    {"timestamp_epoch": 1359967680, 
                    "search_score": 10.0, 
                    "headline": "When Sachin felt like bunking cricket practice", 
                    "timestamp": "2013-02-04 08:48:00", 
                    "related_article_count": 0, 
                    "excerpt": "...their campaign 'Support my School' by NDTV in Mumbai on Sunday. Sachin Tendulkar and Aishwarya Rai Bacchan during an event 3/5 Sachin Tendulkar and Aishwarya Rai Bacchan during an event India's Sachin Tendulkar with actress Aishwarya Rai Bachchan during the...", 
                    "source": {"name": "OneIndia", 
                                "url": "http://www.oneindia.in/", 
                                "daylife_url": "http://www.daylife.com/source/OneIndia", 
                                "rank": 3, 
                                "favicon_url": "http://favicon.daylife.com/imageserve/0e0Jd1Xczb7oW/favicon.png", 
                                "source_id": "0e0Jd1Xczb7oW", 
                                "type": "MAINSTREAM"}, 
                    "url": "http://feedproxy.google.com/~r/oneindia-cricket/~3/z1pS6w289SU/when-sachintendulkar-felt-like-bunking-cricket-practice-066016.html", 
                    "daylife_url": "http://www.daylife.com/article/07nC5eTbBE0YA", 

                    "article_id": "07nC5eTbBE0YA"}, 

                    {"timestamp_epoch": 1360361400, 
                    "search_score": 8.69279902947, 
                    "headline": "Sachin equals Sunny",
                           .
                           .
                           .
                           .
                           . 
```

我只对**标题**和**网址**值感兴趣。我很容易用下面的这个java代码得到这些值。

```
JSONObject root = new JSONObject(result);
            JSONObject response = root.getJSONObject("response");

            String attributeId = response.getString("message");
            System.out.println(attributeId);

            JSONObject payload = response.getJSONObject("payload");
            JSONArray article = payload.getJSONArray("article");

            for (int i = 0; i < article.length(); i++) {
                JSONObject c = article.getJSONObject(i);
                String headline = c.getString("headline");
                String url = c.getString("url");
                System.out.println(url);
                System.out.println(headline);
                strings.add(c.getString("headline").toString());
            }
            arrayAdapter = new ArrayAdapter<String>(MainActivity.this,
                    android.R.layout.simple_list_item_1, strings);

            resultList.setAdapter(arrayAdapter);
            arrayAdapter.notifyDataSetChanged(); 
```

在这里，我在**ListView中设置****标题**（这部分工作正常）。我的**问题**是：当我单击任何列表时，它应该将相应的**url**传递给**WebView**活动（实际上我正在另一个类中实现它）。那么如何实现这一点，如何存储对应的url和标题？请有人帮助我..

 ******提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:22:00.387

您可以创建一个名为 Article 的类，该类具有两个属性（字符串标题和字符串 url）。然后为这两个属性生成 getter/setter。现在创建一个 Article 类型的 ArrayList，例如..

```
ArrayList<Article> articleList = new ArrayList<Article>(); 
```

然后在解析你的数据时做..

```
Article article = new article(); 
```

并将价值放入对象中，例如..

```
article.setHeading(c.getString("headline"));
article.setUrl(c.getString("url")); 
```

并将对象添加到arraylist，如..

```
articleList.add(article); 
```

毕竟，当单击任何列表项时，要在您的主要活动中添加 OnItemClickListener 。它会给你点击项目的位置。然后你可以从 arcleList 中获取相应对象的 url，比如..

```
articleList.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                long id) {
            String url = articleList.get(position).getUrl();
            Intent i = new Intent(MainActivity.this,   WebViewActivity.class);
            i.putExtra("url", url);
            startActivity(i);
        }
    }); 
```

现在将此 url 放入主要活动中的意图并将其接收到 webActivity 并最终在 webView 中使用它......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:12:12.493

创建一个自定义适配器，它将 URL、标题作为模型存储并在 onView 中显示标题文本，并在 listview 的 onitemclicklistener 中访问适配器内的模型 obj 并使用该 URL 打开 webview ......就像这个[http://www.ezzylearning。 com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

和 itemclick 监听器

```
listView.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {

  public void onItemClick(AdapterView<?> parent, View view,int position, long id) {
  Model item = (Model)contests_listView.getItemAtPosition(position);  
  Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(item.getUrl()));
  startActivity(browserIntent);  // show url in browser  or pass it to your webview activity

     }
 }); 
```******

# c# - windows phone 7.x 本地推送通知

> ID：14814688
> 
> 赞同：0
> 
> 时间：2013-02-11T14:59:26.497
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

我在 Windows Phone 7.x 中找不到有关本地推送通知的信息。我的意思是可以在本地发送推送，没有服务器和互联网连接，只是在不同的时间 - 例如，早上，午夜或午餐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:38:26.713

如果没有互联网连接，您无法在本地执行此操作。本质上，推送通知通常需要一个可以发出 Web 请求的源，无论是服务器还是手机本身（但手机需要有互联网访问权限才能发出 Web 请求）。

查看[http://msdn.microsoft.com/en-sg/library/hh221549.aspx](http://msdn.microsoft.com/en-sg/library/hh221549.aspx)了解更多信息。这将回答您可能对这项服务提出的其他问题。

# java - 部署 Apache Camel 项目

> ID：14814693
> 
> 赞同：3
> 
> 时间：2013-02-11T14:59:36.683
> 
> 标签：java, maven, deployment, apache-camel

我使用 spring 配置创建了一个 Camel 项目，现在，我需要在我的生产环境中部署和运行它。基本上，它是一个监听 RabbitMQ 代理的进程，并在发送消息时对其进行处理。我正在使用 eclipse，并为此目标创建了一个调试/运行配置：

```
camel:run 
```

使用Spring配置文件定义路由和bean，我没有写任何主类，如何部署和运行呢？我无法在生产环境中重新编译项目，因为我无法安装新软件，所以运行我的流程所需的一切都必须从我的开发环境中复制。

有什么提示吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T15:14:19.030

[http://camel.apache.org/running-camel-standalone.html](http://camel.apache.org/running-camel-standalone.html)

和

[http://camel.apache.org/running-camel-standalone-and-have-it-keep-running.html](http://camel.apache.org/running-camel-standalone-and-have-it-keep-running.html)

描述允许您部署/运行的机制。

camel:run 本质上与创建加载 Spring 应用程序上下文的 org.apache.camel.spring.Main 类相同。它可以很简单：

```
public static void main( final String[] args) {

    Main main = new Main();
    main.setApplicationContextUri("classpath:META-INF/applicationContext.xml");
    main.enableHangupSupport();

    try {
        main.run();
    } ...
} 
```

这与 camel:run 目标基本相同。

为了使其正确部署，您可能需要使用[maven 程序集插件](http://maven.apache.org/plugins/maven-assembly-plugin/)或[maven shade 插件](http://maven.apache.org/plugins/maven-shade-plugin/)。这将允许您创建可以部署的单个工件（zip、jar 等）。相同的代码，相同的路线定义。

# macros - 如何使用宏在 SPSS 中读取多个 excel 文件？

> ID：14814694
> 
> 赞同：2
> 
> 时间：2013-02-11T14:59:40.627
> 
> 标签：macros, spss

我正在尝试编写一个宏来导入 15 个文件，所有文件都采用相同的格式。名称格式为“monyy PSF Extract”。所以我可以使用下面的代码来读取 Nov11 的 1 文件。我试图找到一种使用宏来读取其他 14 个文件的方法。我似乎无法让它工作。我是 SPSS 新手 - 我知道如何在 SAS 中执行此操作。我还想将创建的数据集设置为 monyy。我还想将一些变量重命名为 original_name_monyy。

有人可以帮我解决这个问题吗？这让我发疯了！

```
define !XLSFILE() !quote(!con("S:\Credit Risk\Credit Risk\Elisabeth\",!unquote(!eval(!cq)), ".xlsx")) !enddefine.
define !cq(mon = !DEFAULT ("Nov11") !token(1) /name = !DEFAULT ("PSF Extract") !TOKENS(2)) !quo(!con(!unq(!mon),!unq(" "), !unq(!name))) !enddefine.

/* import xlsx file */.
GET DATA
  /TYPE=XLSX
  /FILE=!XLSFILE
  /SHEET=name 'Sheet1'
  /CELLRANGE=full
  /READNAMES=on
  /ASSUMEDSTRWIDTH=32767.

EXECUTE.

DATASET NAME  test WINDOW=FRONT. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:36:53.837

您可以在宏调用中传递文件名前缀列表并循环加载文件。下面是我将如何处理这个问题。它有点限制，因为您需要通过月份列表，但这是一项相当微不足道的任务。

```
*******************************************************.
DEFINE !XLSFILE(location = !TOKENS(1)
                /names = !CMDEND).

!DO !monthfile !IN (!names)

!LET !XLSFILE = !QUOTE(!CONCAT(!UNQUOTE(!location),!monthfile," PSF Extract.xlsx"))

/* import xlsx file */.
GET DATA
  /TYPE=XLSX
  /FILE=!XLSFILE
  /SHEET=name 'Sheet1'
  /CELLRANGE=full
  /READNAMES=on
  /ASSUMEDSTRWIDTH=32767.
*Name dataset.
dataset name !monthfile.

**PLACE RENAME COMMANDS HERE.
*Example changing [XVAR1] and [XVAR2] to [XVAR1_monyy] and [XVAR2_monyy].
rename variables (XVAR1 = !CONCAT("XVAR1","_",!monthfile))
(XVAR2 = !CONCAT("XVAR2","_",!monthfile)).

!DOEND.

*now do whatever you want with the datasets, eg add files them together.
!ENDDEFINE.
*******************************************************.

*call the macro.
set mprint on.
!XLSFILE location = "S:\Credit Risk\Credit Risk\Elisabeth\"
names = Jan11 Feb11 Mar11 Apr11 May11 Jun11 Jul11 Aug11 Sep11 Oct11 Nov11 Dec11\. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:57:49.130

另一种方法是使用带有通配符表达式的 Python 可编程性来获取具有指定名称模式的特定位置的所有文件。更灵活，避免使用宏。您可以从 SPSS 社区站点 www.ibm.com/developerworks/spssdevcentral 的 Books and Articles 部分下载 Programmaing and Data Management 一书以了解更多信息

# java - 将分钟添加到当前时间

> ID：14814703
> 
> 赞同：1
> 
> 时间：2013-02-11T15:00:06.467
> 
> 标签：java

如何将 x 分钟添加到当前时间？

正如我目前所拥有的

```
DateFormat dateFormat = new SimpleDateFormat("HH:mm");
        Calendar cal = Calendar.getInstance();
        System.out.println(dateFormat.format(cal.getTime()));
        return ((int) ((x) +      )); 
```

它以 HH:mm 格式获取我的时间，但我希望它返回的是 x 分钟 + 当前时间，我将如何返回这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T15:03:22.473

如果你有`Calendar`实例很容易：

```
cal.add(Calendar.MINUTES, x); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:03:23.667

在前面添加这一行`System.out.println`

```
cal.add(Calendar.MINUTE, x); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T15:02:22.137

只需在格式化之前添加时间量即可。

```
void    add(int field, int amount) 
```

根据日历的规则，在给定的日历字段中添加或减去指定的时间量。

例如，字段为 Calendar.MINUTE

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T15:10:19.703

Joda [DateTime 库](http://joda-time.sourceforge.net/)提供了许多常用和有用的日期/时间操作方法。值得一看。在您的情况下，您可以简单地编写：

```
DateTime addTwoMinutes = DateTime.now().plusMinutes(2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T15:02:51.957

```
long now = System.currentTimeMillis();
return now + (minutes * 60 * 1000); 
```

# sql - 不是 sql 查询中的异常分组

> ID：14814706
> 
> 赞同：0
> 
> 时间：2013-02-11T15:00:10.343
> 
> 标签：sql

[实际上这个问题是我的初学者 sql 连接查询](https://stackoverflow.com/questions/14812146/beginner-sql-join-query)的后续问题

为了减少混乱，我正在创建一个新问题，因为我不知道是否应该更新上一个问题。所以这里的问题在于`GROUP BY`功能。

我有一张桌子`Dept_Employee`

```
 DeptId    EmployeeId    Salary        JoinDate (DD-MM-YYYY)     DeptName
    --------------------------------------------------------------------------
    1            77         8787           11-09-2010                  ADMIN
    1            87         9877           12-08-2010                  ADMIN 
    1            76         9544           08-11-2010                  SUPPORT  
    2            33         9999           12-05-2010                  ADMIN 
```

我想用这个`DeptId`和一个新的布尔列创建一个新表，如果同一部门的所有员工在`joindate`2010 年 1 月 12 日（12 月 1 日）之前的工资应该大于 8000 并且`DeptName="Admin"`.

所以在这种情况下，结果应该是

```
 DeptId     NewEmployees
    ------------------------
    1            False
    2            True 
```

我尝试过这样的事情

```
 SELECT DeptId, 
     CASE WHEN MIN(Salary) > 8000 AND 
               MAX(JoinDate) <= DATE'2010-12-01' And
               DeptName ="Admin" THEN True
          ELSE FALSE
     END AS NewEmployees
   FROM Dept_Employee
   GROUP BY DeptId 
```

但我得到了例外

> *不是 GROUP BY 表达式*

请任何人都可以建议正确的方法是什么？我应该以某种方式创建子查询还是什么？？？

吉娜。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:08:05.623

```
SELECT  DeptID,
        CASE WHEN totals = totalCount THEN 'TRUE' ELSE 'FALSE' END NewEmployees
FROM
(
    SELECT  DeptID, 
            SUM(CASE WHEN Salary > 8000 AND JoinDate <= DATE'2010-12-01' AND DeptName = 'ADMIN' THEN 1 ELSE 0 END) totals,
            COUNT(*) totalCount
    FROM    tableName
    GROUP   BY DeptID
) s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:05:16.297

尝试这个：

```
SELECT Dept_Employee.DeptId, CASE WHEN OptionDept.DeptId IS NULL THEN 'False' ELSE 'True' END AS NewEmployees
FROM Dept_Employee
LEFT JOIN 
(
    SELECT DeptId
    FROM Dept_Employee
    GROUP BY DeptId
    HAVING MIN(Salary) > 8000 AND MAX(JoinDate) <= DATE'2010-12-01' AND DeptName ="Admin"
) AS OptionDept ON OptionDept.DeptId = Dept_Employee.DeptdId 
```

说明：您不能在选择列表中引用不参与 Group By 子句的字段 - 因为在 group by 之后您正在使用组而不是单独的记录，作为一种解决方法 - 您应该使用子查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:09:31.970

DeptName 必须出现在 GROUP BY 子句中或在聚合函数中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T15:22:27.973

这是您的 orig 查询的正确语法：

```
SELECT deptno 
 , (CASE WHEN MIN(Sal) > 3000 AND MAX(hiredate) <= DATE '2010-12-01' 
     AND deptno = 10 THEN 'True' ELSE 'FALSE'
    END) NewEmployees
 FROM scott.emp
GROUP BY deptno
/ 
```

这只是句法示例。不知道你想达到什么目的......

# excel - Excel 2013 可以使用大型数据集吗？

> ID：14814709
> 
> 赞同：9
> 
> 时间：2013-02-11T15:00:28.433
> 
> 标签：excel, bigdata, excel-2013

我一直在几个地方读到[Excel 2013（64 位）能够打开更大的数据集](http://office.microsoft.com/en-us/excel-help/whats-new-in-powerpivot-in-excel-2013-HA102893837.aspx#_Toc335818198)，比以前有更多的行。然而，我的极限似乎就在 2010 年的水平。

关于拥有超过一百万行左右的行，我遇到了同样的老错误。我只是好奇是否有人能够获得更大的数据集来导入/打开。如果是这样，您所经历的任何步骤都可能对所有人都有帮助。我在 4 台不同的 64 位 Office 2013 PC 上尝试过，但都没有运气。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-11T15:04:10.693

Excel 2013 中的行限制仍然是 100 万，除了 Pivot Tables 和 PowerPivot：64 位 Excel 给您的唯一好处是能够使用超过 2 GB 的内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T15:04:07.000

Excel 2013 中的行限制仍为 1,048,576（x 16,384 列）。您链接的文章是指数据大小，而不是行数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T15:09:05.997

正如其他答案已经显示的那样，工作表本身的限制没有改变，它仍然是 1M 行。

改变的是您可以在 Powerpivot 中处理的数据量。此数据可以读入 Powerpivot 缓存 - 并使用 DAX 公式修改/扩展 - 并与数据透视表聚合。但是，您不能像使用普通 Excel 数据那样“编辑”它们。

在您受到 2GB/4GB 障碍的限制之前 - 根据您的数据集，它已经允许数百万行。使用 Excel 2013，这个限制现在消失了 - 唯一的限制是您的机器内存。但是，您仍然不能编辑原始数据，只能处理（DAX）和聚合（数据透视表）它们！

# android - 每秒更新 TextView

> ID：14814714
> 
> 赞同：52
> 
> 时间：2013-02-11T15:00:45.970
> 
> 标签：android, date, time, textview, clock

我环顾四周，到目前为止我所尝试的似乎没有任何效果......

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.deskclock);

    TextView tvTime = (TextView) findViewById(R.id.tvTime);
    TextView tvDate = (TextView) findViewById(R.id.tvDate);

    java.util.Date noteTS = Calendar.getInstance().getTime();

    String time = "hh:mm"; // 12:00
    tvTime.setText(DateFormat.format(time, noteTS));

    String date = "dd MMMMM yyyy"; // 01 January 2013
    tvDate.setText(DateFormat.format(date, noteTS)); 
```

我基本上希望 setText 方法每秒左右更新或刷新一次，所以我的时钟实际上像它应该做的那样工作。我见过像处理程序和运行这样的方法，但没有任何效果，所以任何帮助都会非常感谢。:)

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-02-11T15:06:27.560

在 onCreate() 方法中添加以下代码：

```
Thread thread = new Thread() {

  @Override
  public void run() {
    try {
      while (!thread.isInterrupted()) {
        Thread.sleep(1000);
        runOnUiThread(new Runnable() {
          @Override
          public void run() {
            // update TextView here!
          }
        });
      }
    } catch (InterruptedException e) {
    }
  }
};

thread.start(); 
```

这段代码启动了一个每轮休眠 1000 毫秒的线程。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-03-10T13:39:09.053

It's a very old question and I'm sure there are a lot of resources out there. But it's never too much to spread the word to be at the safe side. Currently, if someone else ever want to achieve what the OP asked, you can use: `android.widget.TextClock`.

TextClock documentation [here](https://developer.android.com/reference/android/widget/TextClock.html).

Here's what I've used:

```
<android.widget.TextClock
    android:id="@+id/digitalClock"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:timeZone="GMT+0000" <!--Greenwich -->
    android:format24Hour="dd MMM yyyy   k:mm:ss"
    android:format12Hour="@null"
    android:textStyle="bold"
    android:layout_alignParentEnd="true" /> 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-12-06T07:11:53.563

If you want to show time on textview then better use [Chronometer](https://developer.android.com/reference/android/widget/Chronometer.html) or [TextClock](https://developer.android.com/reference/android/widget/TextClock.html)

**Using Chronometer**:This was added in API 1\. It has lot of option to customize it.

`Your xml`

```
<Chronometer
    android:id="@+id/chronometer"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="30sp" /> 
```

`Your activity`

```
Chronometer mChronometer=(Chronometer) findViewById(R.id.chronometer);
mChronometer.setBase(SystemClock.elapsedRealtime());
mChronometer.start(); 
```

**Using TextClock**: This widget is introduced in API level 17\. I personally like Chronometer.

`Your xml`

```
<TextClock
    android:id="@+id/textClock"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="30dp"
    android:format12Hour="hh:mm:ss a"
    android:gravity="center_horizontal"
    android:textColor="#d41709"
    android:textSize="44sp"
    android:textStyle="bold" /> 
```

Thats it, you are done.

You can use any of these two widgets. This will make your life easy.

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-02-11T15:15:19.170

扩展@endian 的答案，您可以使用线程并调用方法来更新TextView。下面是我现场编写的一些代码。

```
java.util.Date noteTS;
String time, date;
TextView tvTime, tvDate;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.deskclock);

    tvTime = (TextView) findViewById(R.id.tvTime);
    tvDate = (TextView) findViewById(R.id.tvDate);

    Thread t = new Thread() {

        @Override
        public void run() {
            try {
                while (!isInterrupted()) {
                    Thread.sleep(1000);
                    runOnUiThread(new Runnable() {
                        @Override
                        public void run() {
                            updateTextView();
                        }
                    });
                }
            } catch (InterruptedException e) {
            }
        }
    };

    t.start();
}

private void updateTextView() {
    noteTS = Calendar.getInstance().getTime();

    String time = "hh:mm"; // 12:00
    tvTime.setText(DateFormat.format(time, noteTS));

    String date = "dd MMMMM yyyy"; // 01 January 2013
    tvDate.setText(DateFormat.format(date, noteTS));
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-08-03T03:06:37.537

您可以使用计时器而不是线程。这是我的全部代码

```
package dk.tellwork.tellworklite.tabs;

import java.util.Timer;
import java.util.TimerTask;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import dk.tellwork.tellworklite.MainActivity;
import dk.tellwork.tellworklite.R;

@SuppressLint("HandlerLeak")
public class HomeActivity extends Activity {
    Button chooseYourAcitivity, startBtn, stopBtn;
    TextView labelTimer;
    int passedSenconds;
    Boolean isActivityRunning = false;
    Timer timer;
    TimerTask timerTask;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab_home);

        chooseYourAcitivity = (Button) findViewById(R.id.btnChooseYourActivity);
        chooseYourAcitivity.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                //move to Activities tab
                switchTabInActivity(1);
            }
        });

        labelTimer = (TextView)findViewById(R.id.labelTime);
        passedSenconds = 0;

        startBtn = (Button)findViewById(R.id.startBtn);
        startBtn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                if (isActivityRunning) {
                    //pause running activity
                    timer.cancel();
                    startBtn.setText(getString(R.string.homeStartBtn));
                    isActivityRunning = false;
                } else {
                    reScheduleTimer();
                    startBtn.setText(getString(R.string.homePauseBtn));
                    isActivityRunning = true;
                }
            }
        });

        stopBtn = (Button)findViewById(R.id.stopBtn);
        stopBtn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                timer.cancel();
                passedSenconds = 0;
                labelTimer.setText("00 : 00 : 00");
                startBtn.setText(getString(R.string.homeStartBtn));
                isActivityRunning = false;
            }
        });
    }

    public void reScheduleTimer(){
        timer = new Timer();
        timerTask = new myTimerTask();
        timer.schedule(timerTask, 0, 1000);
    }

    private class myTimerTask extends TimerTask{
        @Override
        public void run() {
            // TODO Auto-generated method stub
            passedSenconds++;
            updateLabel.sendEmptyMessage(0);
        }
    }

    private Handler updateLabel = new Handler(){
        @Override
        public void handleMessage(Message msg) {
            // TODO Auto-generated method stub
            //super.handleMessage(msg);

            int seconds = passedSenconds % 60;
            int minutes = (passedSenconds / 60) % 60;
            int hours = (passedSenconds / 3600);
            labelTimer.setText(String.format("%02d : %02d : %02d", hours, minutes, seconds));
        }
    };

    public void switchTabInActivity(int indexTabToSwitchTo){
        MainActivity parentActivity;
        parentActivity = (MainActivity) this.getParent();
        parentActivity.switchTab(indexTabToSwitchTo);
    }
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-10-30T06:28:43.010

This Code work for me..

```
//Get Time and Date
private String getTimeMethod(String formate)
{
    Date date = new Date();
    SimpleDateFormat dateFormat = new SimpleDateFormat(formate);
    String formattedDate= dateFormat.format(date);
    return formattedDate;
}

//this method is used to refresh Time every Second
private void refreshTime() //Call this method to refresh time
{
    new Timer().schedule(new TimerTask() {
        @Override
        public void run() {
            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    txtV_Time.setText(getTimeMethod("hh:mm:ss a")); //hours,Min and Second with am/pm
                    txtV_Date.setText(getTimeMethod("dd-MMM-yy")); //You have to pass your DateFormate in getTimeMethod()          
                };
            });
        }
    }, 0, 1000);//1000 is a Refreshing Time (1second)
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-11T15:34:21.937

改用`TextSwitcher`（用于漂亮的文本过渡动画）和计时器。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-11-28T20:00:11.233

You can also use `TimerTask` for that.

Here is an method

```
private void setTimerTask() {
    long delay = 3000;
    long periodToRepeat = 60 * 1000; /* 1 mint */
    Timer timer = new Timer();
    timer.schedule(new TimerTask() {
        @Override
        public void run() {
            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                 //   do your stuff here.
                }
            });
        }
    }, 3000, 3000);
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-01-22T00:32:23.600

It would be better if you just used an AsyncTask running using a Timer something like this

```
 Timer LAIATT = new Timer();
    TimerTask LAIATTT = new TimerTask()
    {
        @Override
        public void run()
        {
            LoadAccountInformationAsyncTask LAIAT = new LoadAccountInformationAsyncTask();
            LAIAT.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
        }
    };
    LAIATT.schedule(LAIATTT, 0, 1000); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2022-02-01T12:35:13.820

java 8 lamdas:

```
Timer timer = new Timer();
timer.schedule(new TimerTask() {
    @Override
    public void run() {
        runOnUiThread(() -> {
            //code here...
            String str = getDeltaTimeHumanString(instant,Instant.now()) 
            myTextView.setText(str);
        });
    }
}, 1000, 1000); 
```

easy

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-10-25T09:56:52.177

I you use **Kotlin** this way can help you:

```
val thread: Thread = object : Thread() {
            override fun run() {
                try {
                    while (!this.isInterrupted) {
                        sleep(1000)
                        runOnUiThread {
                            // update TextView And Random number here!
                            val rnds = (0..7).random()
                            tvBanner.text = textBanner[rnds]

                        }
                    }
                } catch (e: InterruptedException) {
                }
            }
        }

thread.start() 
```

# .net - 插件外部 .dll 引用，本地副本为 false，但 .dll 在用户机器上的不同位置

> ID：14814717
> 
> 赞同：1
> 
> 时间：2013-02-11T15:00:54.020
> 
> 标签：.net, dll, wix, shared-libraries

我为应用程序开发了一个插件。此应用程序的开发人员文档要求在我的插件中引用API 文件时`API.dll`，我们称之为. 否则，从文档中引用，“将产生问题”。`copy-local = false``MyPlugin.dll`

问题是我不能保证`API.dll`用户机器上的安装目录与我机器的安装目录匹配。因此引用将被破坏。预计也`API.dll`不会在 GAC 中注册。

我对可能的解决方案的想法是修改我的插件的安装程序（它是使用[WiX](http://wixtoolset.org/)构建的）以嗅出`API.dll`用户机器上的安装目录（或提示他们选择它）。然后安装程序需要修改外部引用`MyPlugin.dll`以指向`API.dll`目录。

我的查询有两个方面：

*   以上是解决这个问题的明智方法吗？

如果是这样

*   如何`MyPlugin.dll`使用安装程序修改已编译的 .Net 文件的外部引用？

# regex - 正则表达式 Lookbehind 断言 - 匹配链接锚文本

> ID：14814721
> 
> 赞同：0
> 
> 时间：2013-02-11T15:01:07.340
> 
> 标签：regex, boost-regex

我有像这样的链接

```
<a href="#" class="social google">Google</a>
<a href="#" class="social yahoo">Yahoo</a>
<a href="#" class="social facebook">Facebook</a> 
```

现在我想`match only anchor text`使用正则表达式。
我的意思是它应该只匹配第一个链接中的 Text Google。

我试过这段代码。

```
(?<=<a href="#" class="social .+?">).+?(?=</a>) 
```

但它没有按预期工作。

谁能给我正确的语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:09:20.710

我建议不要使用后视和前瞻来排除您不想要的部分，而是使用捕获组来仅获取您想要的部分：

```
<a href="#" class="social .+?">(.+?)</a> 
```

从概念上讲，环视用于重叠匹配。看来您在这里不需要它们的功能。

（当然，[通常的警告](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)适用）

**更新：**这不仅是最佳实践的问题。使用look-behind 的正则表达式实际上会产生不正确的结果，因为它允许look-behind 部分与其他匹配项重叠。考虑这个输入：

```
<a href="#" class="social google">Google</a>

...

<a class="bad">foo</a> 
```

您的正则表达式不仅匹配“Google”；它也将匹配“foo”，因为`.+?`应该只匹配部分类字符串可以一直扩展到文本中的另一个链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:05:05.140

试试这个

```
 "~<a(>| .*?>)(.*?)</a>~si" 
```

或者

```
 "/<a(>| .*?>)(.*?)</a>/" 
```

php示例

```
 $notecomments ='<a id="234" class="asf">fdgsd</a> <a>fdgsd</a>';

  $output=preg_replace_callback(array("~<a(>| .*?>)(.*?)</a>~si"),function($matches){
       print_r($matches[2]);
       return '';
   },' '.$notecomments.' '); 
```

这给了你所有的锚文本

而这个只返回 class="social"

```
 "#<a .*?class=\".*?social.*?\".*?>(.*?)</a>#" 
```

样本

```
 $notecomments ='<a id="234" class="fas social ads">fdgsd</a> <a>fdgsd</a>';

  $output=preg_replace_callback(array("#<a .*?class=\".*?social.*?\".*?>(.*?)</a>#"),function($matches){

     print_r($matches);
 return '';},' '.$notecomments.' '); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:08:30.187

您可能得到了正确的结果，但是因为您有其他匹配组 (?...)，您匹配的也包含您不想要的数据。

您可以尝试使用不匹配的组 (?:...) 并将您希望在匹配中显示的内容放在组本身 (.+?)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T15:09:50.907

试试这个正则表达式：

```
\<a .*?\>(.*?)\<\/a\> 
```

编辑 1 - 此正则表达式匹配具有 css 类“社交”的锚点：

```
\<a .*?class=".*?\bsocial\b.*?\>(.*?)\<\/a\> 
```

# java - JAVA- JaCoP 约束编程

> ID：14814723
> 
> 赞同：-2
> 
> 时间：2013-02-11T15:01:11.240
> 
> 标签：java, constraint-programming, jacop

请有人帮我解决这个错误谢谢，我使用 JaCoP 库，这是一个传输问题，我需要找到 OptimalSearch 它的约束编程

```
 Exception in thread "main" java.lang.NullPointerException
    at JaCoP.core.IntVar.singleton(IntVar.java:378)
    at JaCoP.core.IntVar.putModelConstraint(IntVar.java:301)
    at JaCoP.constraints.SumWeight.impose(SumWeight.java:301)
    at JaCoP.core.Store.impose(Store.java:851)
    at transporte.Transporte.model(Transporte.java:73)
    at transporte.Transporte.main(Transporte.java:86)
Java Result: 1 
```

[http://pastebin.com/ZV4j234S](http://pastebin.com/ZV4j234S)示例类

[http://pastebin.com/at7nfAwE](http://pastebin.com/at7nfAwE)传输类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:00:04.440

问题是用可变成本 Ex 的正确实例解决的：

我写的代码是：

IntVar 成本 = new IntVar(); <--- 坏实例 IntVar 成本 = new IntVar(store, "Costo", 0, 10000); <-- 正确的实例

0 和 10000 是变量，可以更改值。

# ios - iOS 6 - ChatKit 私有 API - 发送短信

> ID：14814729
> 
> 赞同：4
> 
> 时间：2013-02-11T15:01:28.587
> 
> 标签：ios, api, sms, private

在 iOS 6 中，是否有人设法在没有用户交互的情况下从代码发送 SMS？

我认为，必须使用 ChatKit 私有 API 来执行此操作。但是，Apple 似乎在 iOS 6 中对这个 API 进行了相当大的更改。因此，由于缺少/更改了类，像[https://stackoverflow.com/a/11028230/1884907](https://stackoverflow.com/a/11028230/1884907)这样的解决方案在 iOS 6 上不再适用。

（只是提前：是的，我们都知道Apple拒绝使用私有API的应用程序，它不是针对应用商店的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:55:43.720

来自另一个 StackOverflow 帖子：（来自 Kaushal Bisht 的代码[）](https://stackoverflow.com/questions/13662105/sms-sending-without-mfmessgeviewcontroller-on-ios-6)

```
// in .m file
-(void)textClicked

{

 controller = [[MFMessageComposeViewController alloc] init];

 if([MFMessageComposeViewController canSendText])

    {

       controller.body = @"Whatever you want";

   controller.recipients = [NSArray arrayWithObjects:@"", nil];

       controller.messageComposeDelegate = self;

       [self presentViewController:controller animated:YES completion:nil];
      }

   }

  - (void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result

  {

  UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"MyApp" message:@"Unknown Error"
                                               delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];

switch (result) {
    case MessageComposeResultCancelled:
        NSLog(@"Cancelled");
        [alert show];
        break;
    case MessageComposeResultFailed:
        [alert show];

        break;
    case MessageComposeResultSent:

        break;
    default:
        break;
  }

[self dismissViewControllerAnimated:YES completion:nil];
    }

// in .h file

 import MessageUI/MessageUI.h 
```

但是，您不能在后台发送 SMS 消息。我希望这有帮助。

# asp.net-mvc - MVC 网站图像路径在发布版本中无效

> ID：14814730
> 
> 赞同：4
> 
> 时间：2013-02-11T15:01:38.473
> 
> 标签：asp.net-mvc, asp.net-mvc-4

在本地运行我的 mvc 网站（VS IIS）时，图像正确显示：

CSS 片段：

```
.sprites {
    background: transparent url(../images/sprites.png) no-repeat 0 0;
} 
```

但是，当站点发布到服务器或本地 IIS（不是 VS IIS）时，图像无法加载（给出无效路径）

在服务器上正确显示图像的唯一方法是修改 css 文件，而`"../images/sprites.png"`不是`"/content/images/sprites.png"`

这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T15:38:17.893

我想到了：

MVC4 带有`\App_Start\BundleConfig.cs`用于最小化 css/js 脚本的文件。

每当我发布我的网站 (RELEASE) 时，它都会调用 \Content\css（最小化文件），其中包含我的图像的路径（“../images/etc..”），这是不正确的，因为 css 文件不再位于 /Content 中/Styles/style.css 但 /Content/css（最小化版本）。

我不得不修改它：

从：

```
bundles.Add(new StyleBundle("~/Content/css").Include(
                        "~/Content/styles/all.css",
    .. 
```

到：

```
 bundles.Add(new StyleBundle("~/Content/styles/css").Include(
                "~/Content/styles/all.css", 
```

..

在我的 layout.cshtml 中：

```
@Styles.Render("~/Content/styles/css") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:08:34.040

看起来您的 CSS 中的路径未指向正确的图像位置。`..`表示上一级，我假设该目录没有 images 文件夹，因此您必须明确指定 content/images 文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:13:41.383

css 路径必须与两个系统上的图像路径相同。是这样吗 ？

# c++ - qt 5.0.1 mingw 32bit 问题

> ID：14814734
> 
> 赞同：0
> 
> 时间：2013-02-11T15:02:00.713
> 
> 标签：c++, qt, qt-creator

我已经安装了 Qt 5.0.1 mingw SDK。但是c++项目的编译存在问题。

```
#include <iostream>

using namespace std;

int main()
{
    cout << "Hello World!" << endl;
    return 0;
} 
```

我有以下编译错误：`..testmain.cpp：没有这样的文件或目录`这是专业文件：

```
TEMPLATE = app
CONFIG += console
CONFIG -= app_bundle
CONFIG -= qt

SOURCES += main.cpp 
```

目前解决方案是修改 Makefile.Debug 并更改此行：

```
debug/main.o: ../test/main.cpp 
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o debug\main.o ..\test\main.cpp 
```

和：

```
debug/main.o: ../test/main.cpp 
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o debug/main.o ../test/main.cpp 
```

但这不是一个好方法，因为对于任何重建，我都必须更改 makefile，而对于大型项目，这是不可接受的。

有人知道我错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:16:48.240

听起来这可能是[qmake中的一个错误](https://bugreports.qt-project.org/browse/QTBUG-29561)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:20:17.780

解决了。问题出在我的 TortoiseGit 上。TortoiseGit 集成了 MSYS，这与 qt 创建者发生冲突。我会将错误报告给 qt-project

# classification - TFIDF：tf 实现

> ID：14814736
> 
> 赞同：3
> 
> 时间：2013-02-11T15:02:01.317
> 
> 标签：classification, document-classification, tf-idf

我正在实现一个分类工具，并正在试验各种 TF 版本：两个对数（对数调用内部/外部的校正）、标准化、增强和对数平均。显然，由这些调制的分类器准确度存在显着差异 - 高达 5%。然而，奇怪的是，我无法提前说出在给定数据集上哪个会表现得更好。我想知道我是否缺少一些工作，或者，也许有人可以分享与这些工作的经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:23:30.907

确实很难提前判断哪种加权方案最有效。总的来说，[没有免费的午餐](http://en.wikipedia.org/wiki/No_free_lunch_theorem)——对一个数据集最有效的算法可能对另一个数据集很糟糕。更重要的是，我们在这里谈论的不是完全不同的选择。TF-IDF 体现了一种关于分类/检索的特定直觉，其所有不同的变体都是相同的。唯一的判断方法是实验

PS 关于术语的说明：当您说显着时，您是否使用交叉验证或随机重采样进行了任何统计显着性测试？您看到的差异可能是偶然的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:38:59.587

基本上，通过向文档添加给定术语而增加的重要性应该随着术语的出现次数而降低。例如，“汽车”在文档中出现两次意味着该词比只出现一次更重要。但是，如果您将出现 20 次的术语与出现 19 次的相同术语进行比较，则该差异应该较小。

您通过指定不同的规范化所做的是定义 TF 值在某个点饱和的速度。

您可以尝试将您的发现与有关每个文档的平均 TF 或类似指标的一些信息相关联。

# android - 随意停用

> ID：14814741
> 
> 赞同：1
> 
> 时间：2013-02-11T15:02:10.280
> 
> 标签：android, google-cloud-messaging

在我们的应用程序中，我想向用户展示，以便他可以停用 GCM，以便不再收到消息。

我怎样才能做到这一点/？我尝试调用 GCMRegistrar.unregister() 但广播接收器仍然给我消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:33:45.510

你可以做两件事。第一个是当用户禁用 GCM 服务时，应用程序应该向您的服务器发送一条消息以更新数据库中的真/假字段，并且当您发送新的通知推送时，您只需将通知令牌发送到启用的设备.

或者，我不测试这个解决方案。当您在设备中生成通知时，您将检查用户是否禁用了通知。如果用户这样做，则不会创建通知（带有 if 语句）。您应该使用共享首选项来保存此功能。

# android - WifiManager.SUPPLICANT_CONNECTION_CHANGE_ACTION 从未被解雇

> ID：14814742
> 
> 赞同：6
> 
> 时间：2013-02-11T15:02:12.353
> 
> 标签：android, android-intent, android-broadcast

我正在注册接收器`onResume()`：

```
registerReceiver(wifiConnectivityReceiver, new
                IntentFilter(WifiManager.SUPPLICANT_CONNECTION_CHANGE_ACTION)); 
```

这是接收器本身：

```
class WiFiConnectivityReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getBooleanExtra(WifiManager.EXTRA_SUPPLICANT_CONNECTED,false)){
            Log.d(TAG,"Connected to network!");
        } else {
            Log.d(TAG,"Could not connect to network!");
        }
    }
} 
```

在我的应用程序中，我能够连接到选定的 WiFi 网络，但这`SUPPLICANT_CONNECTION_CHANGE_ACTION`从未被触发。如果我​​将其更改`SUPPLICANT_STATE_CHANGED_ACTION`为例如它正在工作。

我正在研究 ICS。
其他人是否遇到过这样的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-15T19:15:17.007

我认为以下代码将对您有所帮助：

```
public void installMyReceiver(){
    if (I) Log.i(TAG, "installMyReceiver() - Online");
    mFlag = true;

    myReceiver = new BroadcastReceiver(){
        public void onReceive (Context context, Intent intent){
            String action = intent.getAction();

            if (WifiManager.SUPPLICANT_STATE_CHANGED_ACTION.equals(action)){

                SupplicantState supplicantState = (SupplicantState)intent.getParcelableExtra(WifiManager.EXTRA_NEW_STATE);
                if (supplicantState == (SupplicantState.COMPLETED)){
                    if (I) Log.i(TAG, "SUPPLICANTSTATE ---> Connected");
                      //do something
                }

                if (supplicantState == (SupplicantState.DISCONNECTED)){
                    if (I) Log.i(TAG, "SUPPLICANTSTATE ---> Disconnected");
                       //do something
                }

            }
        }
    };

    IntentFilter mFilter = new IntentFilter (WifiManager.SUPPLICANT_STATE_CHANGED_ACTION);
    this.registerReceiver (myReceiver, mFilter);
} 
```

这是获取所需信息然后执行某些操作的简单方法。我希望它可以帮助你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-30T07:49:05.977

> 其他人是否遇到过这样的问题？

是我。似乎在某些设备上，操作系统从未声明过意图。（是的，我对设备进行了出厂重置。）最后我还添加了一个看门狗计数器来检查`WifiManager.isWifiEnabled()`以了解更改。当然，这总是会有点延迟。

如果您这样做，请不要忘记从您的再次删除*对同一实例*的回调，因为如果您的代码在*确实*声明了意图的设备上执行，则不会两次处理事件。`Runnable``Handler``BroadcastReceiver`

# html - 如何使用 CSS 将两列居中？

> ID：14814745
> 
> 赞同：8
> 
> 时间：2013-02-11T15:02:34.070
> 
> 标签：html, css

我试图在我的网站上将两列居中，但存在一些问题。每次更改的结果都是左位置（见图[）](http://i46.tinypic.com/5tov7.jpg)。我究竟做错了什么？这是我的CSS：

```
body {
    background - image: url("../img/gray.png");
}

#header {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 100px;
    background: #cc0000;
    text - align: center;
}

#wrapper {
    margin: 100px;
    width: 1280px;
}

#leftcolumn {
    float: left;
    background - image: url("../img/gray.png");
    margin: 10px 0px 10px 0px;
    padding: 10px;
    height: 682px;
    width: 460px;
}

#rightcolumn {
    float: left;
    color: #333;
    border: 1px solid # ccc;
    background: #F2F2E6;
    margin: 10px 0px 10px 0px;
    padding: 10px;
    height: 500px;
    width: 439px;
    display: inline;
    position: relative;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T15:16:05.877

由于两列的宽度小于包装器的宽度（即 959 像素与 1280 像素），因此您需要将两列放置在固定宽度的容器中：

```
<div id="wrapper">
    <div id="column_container">
        <div id="column1"></div>
        <div id="column2"></div>
    </div>
</div> 
```

然后执行以下操作：

```
#column_container {
    width: 959px;
    margin: 0 auto;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T15:12:43.050

在没有看到它的情况下，这样的事情应该可以工作：

```
#wrapper { 
   width: 1280px;
   margin:100px auto ;
} 
```

但正如已经提到的，这只会 center `#wrapper`。这些列没有填满整个 1280 宽度，因此它们仍然在`#wrapper`.

# php - 准备好的语句中的动态参数

> ID：14814746
> 
> 赞同：0
> 
> 时间：2013-02-11T15:02:36.637
> 
> 标签：php, mysql, mysqli, prepared-statement

人们！

我有这个查询，它`WHERE`从`$_POST`. 问题是我想动态获取两个比较值，而不为每个值创建查询。我现在拥有的是：

```
$what = $mysqli->real_escape_string($_POST['what']);
........
$query = "SELECT * FROM list WHERE ";
$query .= $what . " = ? LIMIT 0,10";
........
$stmt->bind_param('s', $what); 
```

我的第一个问题：**这在实践中有多安全？**由于我无法绑定两个参数，是否有另一种更好的方法可以管理同一件事？

我遇到的第二个问题是：我想将其更改`= ?`为`LIKE %?%`，但无法正常工作。我尝试使用`CONCAT('%', ?, '%')`(bad, I know) ，但它仍然无法正常工作。基本上我最终想要实现的是：`WHERE ? LIKE %?%`. 是否可以？你能帮我解决这个问题吗？

*干杯，亚历克斯*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:07:39.143

只需检查`$where`严格的参数集：

```
if (!in_array($where, array("table1", "table2"))) {
   //do smth with wrong parameter
} 
```

请注意，`in_array`它运行`O(N)`复杂，因此如果您的参数集很大，最好使用带有表名的关联数组作为键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:09:56.587

mysql_real_escape_string 或类似函数不会转义反引号 (`)，因此您的应用程序容易受到 SQL 注入的攻击。

只需为所有列定义一个白名单，然后检查该列是否在数组中。

对于搜索后，`LIKE %?%`只需`%`在搜索词的前面和后面附加一个。要正确转义这个东西，请参阅：[Escaping MySQL wildcards](https://stackoverflow.com/questions/3683746/escaping-mysql-wild-cards)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-11T15:07:47.083

您可以进行这样的动态查询，但您的网站将容易受到 SQL 注入的攻击。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-11T15:53:48.037

mysql_real_escape_string 转义反引号，但您可以手动转义它们。
将所有转义的东西移动到某种帮助库中也是一个好主意。因此，您将在 2 行中获取数据：

```
$sql  = "SELECT * FROM list WHERE ?n = ?s LIMIT 0,10";
$data = $db->getAll($sql, $_POST['what'], $_POST['where']); 
```

# java - 连接到 TOR Java

> ID：14814749
> 
> 赞同：3
> 
> 时间：2013-02-11T15:02:38.270
> 
> 标签：java, tor, silvertunnel

我正在查看[silvertunnel](https://silvertunnel.org/browser-for-all.html)库，但努力建立成功的连接。我遇到的问题是连接需要 10 多分钟才能提供输出。我正在查看他们的一项[测试](http://sourceforge.net/apps/trac/silvertunnel/browser/netlib/trunk/src/test/java/org/silvertunnel/netlib/layer/tor/TorHiddenServiceServerRemoteTest.java)，这是我的代码：

```
public boolean tryConnOLD() throws IOException {

    try {
        // define remote address
        String remoteHostname = "http://test.silvertunnel.com";
        int remotePort = 80;
        TcpipNetAddress remoteAddress = new TcpipNetAddress(remoteHostname, remotePort);
        // get TorNetLayer instance and wait until it is ready
        NetLayer netLayer = NetFactory.getInstance().getNetLayerById(NetLayerIDs.TOR);
        netLayer.waitUntilReady();
        // open connection to remote address - this connection is tunneled through the TOR anonymity network
        netSocket = netLayer.createNetSocket(null, null, remoteAddress);
        InputStream is = netSocket.getInputStream();

        String content = CharStreams.toString(new InputStreamReader(is, Charsets.UTF_8));
        Closeables.closeQuietly(is);

        is.close();
        System.out.println(is.read());
        java.util.Scanner s = new java.util.Scanner(is).useDelimiter("\\A");

        if(s.hasNext()) {
         System.out.println(s.next());   
         System.out.println();   
        }

        return true;

    } catch (IOException ex) {

    } finally {
        netSocket.close();
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:15:28.463

问题很简单，当您使用 silvertunnel API 时，您不需要在 url 中指定协议，因此只需删除即可`http://`修复您的错误。

尝试以下

```
 //remove http://   
String remoteHostname = "test.silvertunnel.com"; 
```

# performance - 具有衰减因子的自定义累积总和

> ID：14814752
> 
> 赞同：0
> 
> 时间：2013-02-11T15:02:47.870
> 
> 标签：performance, r, inline, cumsum

我正在尝试优化以下代码。

```
dim <- c(10000,100)

m <- matrix(sample(0:10, prod(dim), replace = TRUE), nrow = dim[1], ncol = dim[2])

system.time({

  output <- matrix(0, nrow = dim[1], ncol = dim[2])

  for (i in 1:dim[1]){        
    output[i,1] <- m[i,1]       
    for (j in 2:dim[2]){          
      output[i,j] <- output[i, j-1] * 0.5 + m[i,j]          
    }        
  }
}) 
```

从概念上讲，它与简单的累积和非常相似：

```
system.time({

  output <- matrix(0, nrow = dim[1], ncol = dim[2])

  for (i in 1:dim[1]){       
      output[i,] <- cumsum(m[i,])        
  }
}) 
```

问题是，代码的第一部分慢了大约 100 倍。有没有办法构建一个定制版本的 cumsum() 来解决问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:11:58.857

您的情况与生成系数为 0.5 的 AR(1) 模型完全相同。您可以使用该`filter`函数生成数据。`filter`还支持高阶递归、卷积或它们的混合（想想 ARMA 模型）。你可以看看`convolve`其他卷积。此外，您可以编译代码以加快循环速度。在我的代码中，编译循环和未编译循环代码分别比过滤器慢 111 倍和 162 倍。

```
library(compiler)
library(rbenchmark)

CustomCumsum<-function(x,alpha){
out<-x[1]
for(i in 2:length(x))
    out[i] <- out[i-1]*alpha+x[i]
out
}

compiledCustomCumsum<-cmpfun(CustomCumsum)

FilterCustomCumsum<-function(x,alpha) as.numeric(filter(x,alpha, method = "recursive"))

x<-rnorm(1000)
# Test whether they are the same
identical(compiledCustomCumsum(x,0.5) , FilterCustomCumsum(x,0.5) )

benchmark(
CustomCumsum=CustomCumsum(x,0.5),compiledCustomCumsum=compiledCustomCumsum(x,0.5),          FilterCustomCumsum=FilterCustomCumsum(x,0.5)
) 
```

输出：

```
 test replications elapsed relative user.self sys.self user.child sys.child
2 compiledCustomCumsum          100    8.89  111.125      8.78     0.01         NA        NA
1         CustomCumsum          100   13.02  162.750     11.84     0.50         NA        NA
3   FilterCustomCumsum          100    0.08    1.000      0.08     0.00         NA        NA 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T19:50:16.887

用 C 编写我的自定义累积函数确实比其他所有方法都快：

```
sign <- signature(x="numeric", n="integer", d="numeric")

code <- "
  for (int i=1; i < *n; i++) {
    x[i] = x[i-1]*d[0] + x[i];
  }"

c_fn <- cfunction(sign,
                  code,
                  convention=".C"
)

CCustomCumsum <- function(vector, decay){
  c_fn(x=vector, n=length(vector), d=decay)$x
} 
```

运行 Julian 的基准测试：

```
x<-rnorm(1000)
# Test whether they are the same
identical(compiledCustomCumsum(x,0.5) , FilterCustomCumsum(x,0.5) )

benchmark(
  CustomCumsum=CustomCumsum(x,0.5),
  compiledCustomCumsum=compiledCustomCumsum(x,0.5),
  FilterCustomCumsum=FilterCustomCumsum(x,0.5),
  CCustomCumsum = CCustomCumsum(x, 0.5)  
) 
```

，我得到：

```
 test replications elapsed relative user.self sys.self user.child sys.child
4        CCustomCumsum          100   0.002      1.0     0.002    0.000          0         0
2 compiledCustomCumsum          100   0.631    315.5     0.536    0.095          0         0
1         CustomCumsum          100   0.931    465.5     0.882    0.046          0         0
3   FilterCustomCumsum          100   0.036     18.0     0.033    0.003          0         0 
```

# c# - LINQ & XNode.DeepEquals 运行比较两次？

> ID：14814759
> 
> 赞同：1
> 
> 时间：2013-02-11T15:03:08.797
> 
> 标签：c#, xml, linq, deepequals

我正在使用 LINQ 来比较两个 XML 文档。如果在两个元素之间发现差异，我会将这些节点添加到一个列表中，用于生成差异报告。

“问题”是，如果发现差异，则会将其添加到列表中两次。

例如，给定两个简单的 XML 文档：

**预期的：**

```
<Parsed_Data>
  <IntentCount>0</IntentCount>
  .
  .
  .
</Parsed_Data> 
```

**实际的：**

```
<Parsed_Data>
  <IntentCount>1</IntentCount>
  .
  .
  .
</Parsed_Data> 
```

**并使用此代码比较节点并将它们添加到列表中（如果它们不同）：**

*Node 类包含两个 XNode，一个用于预期，一个用于实际。*

```
var expectedNodesRoot = from desc in expected.Descendants("root") 
                        select desc;

var actualNodesRoot = from desc in actual.Descendants("root")
                                select desc;

IEnumerable<XNode> expectedNodes =
               from node in expectedNodesRoot.Elements("Parsed_Data").DescendantNodes()
                select node;

IEnumerable<XNode> actualNodes =
                from node in actualNodesRoot.Elements("Parsed_Data").DescendantNodes()
                select node;

 List<Node> diffList = new List<Node>();
 IEnumerator e = expectedNodes.GetEnumerator();
 IEnumerator a = actualNodes.GetEnumerator();

 while (e.MoveNext() && a.MoveNext())
 {
   var xe = e.Current as XNode;
   var xa = a.Current as XNode;

   if (!XNode.DeepEquals(xe, xa))
   {
     diffList.Add(new Node(xe, xa));
   }
 } 
```

**对于一个区别，这给了我 diffList 中的两个元素：**

```
expectedNode: "<IntentCount>1</IntentCount>"
actualNode: "<IntentCount>0</IntentCount>"

expectedNode = "{1}"
actualNode = "{0}" 
```

似乎 DeepEquals 先比较元素，然后比较值。我的问题是，我的代码中是否有任何内容可能导致重复，或者这是 DeepEquals 的一个我无能为力的功能？

我已经进行了测试，看看这是否总是发生，而且似乎是这样。所以一个后续问题是：我可以指望 XNode.DeepEquals 总是给我列表中每个差异的两个元素吗？确认这一点将允许我通过排除每个差异的第二个元素来继续工作，但显然我不能这样做，除非它总是存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:15:51.320

XML 文档中的文本显示为`XText`（即`XNode`）。通过遍历后代节点，您正在遍历元素和文本。您可能应该通过没有子元素的元素。

```
var expectedElements = expected.Descendants("root")
    .Elements("Parsed_Data")
    .Descendants()
    .Where(d => !d.HasElements);
var actualElements = actual.Descendants("root")
    .Elements("Parsed_Data")
    .Descendants()
    .Where(d => !d.HasElements);
var diffList = expectedElements.Zip(actualElements, (e, a) => new Node(e, a))
    .Where(n => !XNode.DeepEquals(n.Expected, n.Actual))
    .ToList(); 
```

# sql - 数据库图（ERD）决赛桌

> ID：14814764
> 
> 赞同：0
> 
> 时间：2013-02-11T15:03:20.543
> 
> 标签：sql, structure, diagram, erd

![完整的 ERD](../Images/deba5d16ff6116b5d9e50255637757db.png)

这个陈列室桌子对吗？我希望能够看到这些数据： ![陈列室](../Images/17d4069c2d2ed3dfd63e08197d1c629b.png)

我只是不确定如何在陈列室表中引用 MakeName、ModelName 和 Price，它是正确的还是我需要改变一些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:12:05.030

这是对的。如果您将内部加入陈列室、汽车、品牌和型号，您将得到正确的查询

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:14:12.433

您不想在 ShowRoom 表中包含这些字段（除非那只是一个视图）。将该表保存在您的 ID 和 CarId 中。然后您可以使用`INNER JOINs`返回适当的数据：

```
SELECT S.ShowRoomId, S.CarId, M.MakeName, Mo.ModelName, Mo.Price
FROM ShowRoom S
   INNER JOIN Car C ON S.CarId = C.CarId
   INNER JOIN Model Mo ON C.ModelId = Mo.ModelId
   INNER JOIN Make M ON Mo.MakeId = M.MakeId 
```

祝你好运。

# java - 使用 saxon 执行 xquery 并获取字符串作为结果

> ID：14814770
> 
> 赞同：0
> 
> 时间：2013-02-11T15:03:24.543
> 
> 标签：java, string, expression, xquery

嗨，我正在使用 saxon 在 java 中运行 xquery。我想以 xml 格式获取字符串中的结果，以将此结果传递给字符串变量并将其转换为 Json 格式。问题是我无法将结果作为字符串。任何想法谢谢。

```
 StaticQueryContext sqc= c.newStaticQueryContext();
       DynamicQueryContext dqc =new DynamicQueryContext(c); 
//     Processor processor = new Processor(sqc);
       final XQueryExpression exp = sqc.compileQuery( queryFinal  ) ;

        InputStream is = new ByteArrayInputStream( xmlText.getBytes( Charset.defaultCharset() ) );
        InputSource XMLSource=new InputSource(is);
        SAXSource SAXs=new SAXSource(XMLSource); 
        DocumentInfo DI=sqc.buildDocument(SAXs);
        dqc.setContextNode(DI);

         Properties props=new Properties();
           props.setProperty(OutputKeys.METHOD,"xml");
           props.setProperty(OutputKeys.INDENT,"yes");

       exp.run(dqc,new StreamResult (destStream),props); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T02:21:28.370

/// 一切如上，只需将最后一行改为....

StringWriter stringWriter = new StringWriter();

exp.run(dqc,new StreamResult (stringWriter),props);

字符串结果 = stringWriter.toString();

System.out.println("结果：" + 结果);

# python - Python for 循环是否通过引用工作？

> ID：14814771
> 
> 赞同：39
> 
> 时间：2013-02-11T15:03:30.763
> 
> 标签：python

当`for`在 Python 中使用循环迭代列表中的项目时，更改`item`（如下）是否会更改 中的相应项目`items`？

```
for item in items:
    item += 1 
```

items 中的每个项目会增加还是保持与循环之前相同？

[注意：我会对 Python 2.7 和 3.x 感兴趣]

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-11T15:06:57.413

不，Python 中的变量*不是*指针。

它们改为引用堆上的对象，并且分配给变量不会更改引用的对象，而是*变量*。变量和对象就像绑在气球上的标签；assignment 将标签重新绑定到不同的气球。

请参阅[我以前的答案，](https://stackoverflow.com/questions/12080552/python-list-doesnt-reflect-variable-change-new-to-python/12080644#12080644)以进一步探索气球和标签的想法。

也就是说，一些对象*类型*实现了特定的就地添加行为。如果对象是*可变*的（气球本身可以改变），那么就地添加*可以*解释为突变而不是赋值。

因此，对于整数，`item += 1`实际上与`item = item + 1`因为整数是不可变的相同。您*必须*创建一个新的整数对象并将`item`标签绑定到该新对象。

另一方面，列表*是*可变的，并且`lst += [other, items]`被实现为 a`lst.__iadd__([other, items])`并且改变`lst`气球本身。分配仍然发生，但它是对同一对象的重新分配，因为该*方法*`.__iadd__()`只是返回`self`而不是新对象。我们最终将标签重新绑定到同一个气球上。

循环只是在每次迭代时为您提供对列表中下一项的引用。它不允许您更改原始列表本身（这只是另一组气球标签）；相反，它为您包含的每个项目提供了一个新标签。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-11T15:07:05.000

嗯，这真的取决于项目。

举个例子：

```
class test():
    pass

a = test()
a.value = 1

b = test()
b.value = 2

l = [a,b]

for item in l:
    item.value += 1

for item in l:
    print item.value

>>> 
2
3 
```

在这种情况下：

```
l2 = [1,2,3]

for item in l2:
    item += 1

for item in l2:
    print item

>>> 
1
2
3 
```

如您所见，您需要理解[Martijn](https://stackoverflow.com/a/14814847/1561176)所说的指针。

# javascript - Sencha Touch：如何在底部停靠的工具栏中居中对齐两个按钮？

> ID：14814772
> 
> 赞同：2
> 
> 时间：2013-02-11T15:03:34.443
> 
> 标签：javascript, mobile, extjs, sencha-touch, sencha-touch-2

我想知道如何将底部停靠工具栏中的两个按钮居中对齐。我看到的按钮上解决此问题的唯一属性是，`centered`但它们使它们与按钮完全重叠，有没有办法将它们分组在中心？

这是我一直在使用的一些代码： [http ://www.senchafiddle.com/#xTZZg#k24Ni](http://www.senchafiddle.com/#xTZZg#k24Ni)

```
Ext.Loader.setConfig({
    enabled: true
});

Ext.application({
    name: 'SenchaFiddle',

    launch: function () {

        var panelNewForm = Ext.create('Ext.Panel', {
            id: 'panelNewForm',
            title: 'TEST',
            html: 'TEST',
            pack: 'center',
            items: [{
                xtype: 'toolbar',
                docked: 'bottom',
                layout: {
                    type: 'hbox',
                    align: 'center'
                },
                items: [{
                    ui: 'decline',
                    text: 'Cancel',
                    handler: function () {

                    }
                }, {
                    ui: 'confirm',
                    text: 'Save',
                    handler: function () {

                    }
                }]
            }]
        });
        Ext.Viewport.add(panelNewForm);
    }
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T15:17:28.770

你可以给你`toolbar`一个[**布局**](http://docs.sencha.com/touch/2-0/#!/api/Ext.Toolbar-cfg-layout)配置：

```
layout: {
    pack: 'center',
    type: 'hbox'
} 
```

这将使您的项目水平呈现在此工具栏的中心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-17T05:21:31.543

您也可以使用**xtype:'spacer'**使这些居中。Ext.Spacer 组件通常用于在 Ext.Toolbar 组件中的项目之间放置空间。请参考[sencha 文档](http://docs.sencha.com/touch/2.3.1/#!/api/Ext.Spacer)

现在，这是您的代码示例：

```
 items: [{
                xtype: 'toolbar',
                docked: 'bottom',                
                items: [{
                    xtype:'spacer'
                },
                {
                    ui: 'decline',
                    text: 'Cancel',
                    handler: function () {

                    }
                }, {
                    ui: 'confirm',
                    text: 'Save',
                    handler: function () {

                    }
                },{
                    xtype:'spacer'
                }]
            }] 
```

注意：您还可以通过提供各种[flex来调整其居中度](http://docs.sencha.com/touch/2.3.1/#!/api/Ext.Spacer-cfg-flex)

# java - Java Jar 文件未执行

> ID：14814777
> 
> 赞同：1
> 
> 时间：2013-02-11T15:03:51.210
> 
> 标签：java, jar

不久前，我问了一个关于 java jar 文件分发的问题……得到了完美的回答，我的 jar 文件完全可以正常工作……但是在过去的几天里，他们通过双击直接停止了工作，我必须通过命令 java -jar .jar 运行它可能是这背后的原因...我的意思是我已经包含了清单文件并且主要类也已定义...我真的不知道发生了什么这里！！以前提出的问题 [分发 java 应用程序](https://stackoverflow.com/questions/13297603/distributing-java-application)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:10:17.283

由于它与 一起工作`java -jar ...`，因此可以安全地假设它`java`可以通过类路径访问。

检查 .jar 文件类型是否仍与 Java 关联。如何执行此操作取决于您的操作系统。

如果这不起作用，请尝试[Jarfix](http://johann.loefflmann.net/en/software/jarfix/index.html)。它曾经帮助我解决完全相同的问题。

PS：Jarfix 仅适用于 Windows。

# android - 访问 TabHost TabWidget 的内容

> ID：14814778
> 
> 赞同：0
> 
> 时间：2013-02-11T15:03:52.243
> 
> 标签：android, xamarin.android

我有一个 TabHost，我的标签小部件内容是活动（包含 EditTexts 等）和标签主机顶部的保存按钮。

**地点：**

-TabHost 在一个活动中（选项卡活动）

-保存按钮是 TabHost 活动的子项

- 活动中的每个 TabWidget

我希望当用户单击保存按钮时，在 tabwidgets 中获取所有编辑文本、微调器等值并将它们保存在数据库中

我正在搜索和测试大约 3 天！

## **编辑**

代码：

```
 #region tabs

        TabHost.TabSpec spec;     // Resusable TabSpec for each tab
        Intent intent;            // Reusable Intent for each tab

        //--------------------------------
        intent = new Intent(this, typeof(FrmMelkPersonalInfoTabActivity));
        intent.AddFlags(ActivityFlags.NewTask);
        spec = TabHost.NewTabSpec("FrmMelkPersonalInfoTabActivity");

        spec.SetIndicator("مشخصات شخص", Resources.GetDrawable(Resource.Drawable.tab1));
        View tab = LayoutInflater.From(TabHost.Context).Inflate(Resource.Id.ta, null);

        spec.SetContent(intent);
        TabHost.AddTab(spec);

        //--------------------------------
        intent = new Intent(this, typeof(FrmMelkAbaadZaminInfoTabActivity));
        intent.AddFlags(ActivityFlags.NewTask);

        spec = TabHost.NewTabSpec("FrmMelkAbaadZaminInfoTabActivity");
        spec.SetIndicator("ابعاد", Resources.GetDrawable(Resource.Drawable.tab2));
        spec.SetContent(intent);
        TabHost.AddTab(spec);

        TabHost.CurrentTab = 0;

        Button btnSave = FindViewById<Button>(Resource.Id.btnSave);
        btnSave.Click += new EventHandler(btnSave_Click);

    void btnSave_Click(object sender, EventArgs e)
    {
        LinearLayout llMain = (LinearLayout)TabHost.GetChildAt(0);
        FrameLayout flTabContents = (FrameLayout)llMain.GetChildAt(2);

        var tab1 = flTabContents.GetChildAt(0);
        string father = tab1.FindViewById<EditText>(Resource.Id.txtFather_Name).Text;

    } 
```

由@K。Oulebsir 帮助，我使用 GetChildAt 方法并且可以访问我的内容，但在测试中，我发现 GetChildAt(index) 的选项卡索引不可排序，这意味着当我在 tab1 中时，我可以访问 tab1 元素，但我可以访问仅当我在 tab1 之后导航到 tab2 时才使用 tab2 元素，其他方式，我的选项卡导航顺序，制作选项卡索引

也许我只能在之前显示标签元素时才能访问它们。

我如何在不需要加载的情况下访问选项卡内容，或者如何在不导航到它们的情况下加载它们以获得可访问性？

有人说我只能用碎片做到这一点，我不知道

* * *

每个人都可以帮助我吗？坦克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:28:53.043

您可以像以下示例一样访问活动中的视图：

```
public class Act1_Principale extends TabActivity implements OnTabChangeListener {
    private TabHost tabHost;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.lay_principale);
        tabHost = getTabHost();

        tabHost.addTab(createTab(Act1.class, title, drawable));
        tabHost.addTab(createTab(Act2.class, title, drawable));
        tabHost.addTab(createTab(Act3.class, title, drawable));
        tabHost.addTab(createTab(Act4.class, title, drawable));

        btn.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                tabHost.getTabContentView().getChildAt(0).
                findViewById(R.id.btnAdd);
            }
        });
    }

    private TabSpec createTab(final Class<?> intentClass, final String tag, final int drawable) {
        final Intent intent = new Intent().setClass(this, intentClass);
        final View tab = LayoutInflater.from(getTabHost().getContext()).inflate(R.layout.tab, null);

        ((ImageView) tab.findViewById(R.id.tab_icon)).setImageResource(drawable);
        return getTabHost().newTabSpec(tag).setIndicator(tab).setContent(intent);
    }
} 
```

# networking - 通过真实IP与VMware虚拟机对话

> ID：14814779
> 
> 赞同：2
> 
> 时间：2013-02-11T15:03:53.300
> 
> 标签：networking, vmware

* * *

亲爱的大家，我有一台运行windows server 2008 R2的物理机，和windows XP VMWare在同一台机器上，物理机有真实IP。我需要使用互联网（真实IP）将UDP数据包发送到VMWare的问题。有没有办法将数据包重定向到 VMWare 或其他东西。

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:24:29.137

将 Windows 服务器防火墙设置为 PORT-FORWARD 所有传入流量到端口 X（信息发送到的端口或选择随机未分配的端口）到该 IP 地址。

# javascript - 咖啡脚本中的 AMD 模块没有缩进整个文件？

> ID：14814780
> 
> 赞同：1
> 
> 时间：2013-02-11T15:03:55.640
> 
> 标签：javascript, coffeescript, amd

在 coffeescript 中编写 AMD 模块时，因为所有内容都包含在一个函数中，所以每个文件最终看起来像这样：

```
define 'myModule', ['dep1', 'dep2'], (dep1, dep2) ->
    funcA: ->
    funcB: ->
    # etc...
    funcZ: -> 
```

我喜欢尽量减少代码中的缩进以使其更易于理解，但我不喜欢 AMD 如何为几乎所有内容添加一定程度的缩进。有没有办法避免它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:43:42.293

不幸的是，暂时没有。[但是，CoffeeScript 问题中正在积极讨论](https://github.com/jashkenas/coffee-script/issues/2662)一个能够准确解决这种用例（以及其他，特别是关于异步回调代码和回调地狱）的功能提案。提议的功能称为“回调”，它基本上是一种语法转换，使这种回调嵌套代码看起来更具顺序性。您的模块定义如下所示：

```
(dep1, dep2) <- define 'myModule', ['dep1', 'dep2']

funcA: ->
funcB: ->
# etc...
funcZ: -> 
```

* * *

如果您想要*立即*工作，您可以做的一件事是在构建配置中添加预处理器步骤，以便`define ...`在进入 CoffeeScript 编译器之前添加行和缩进。

您可以在 .coffee 源代码上添加一些特殊注释来声明您的模块：

```
#!module=myModule
#!dependencies=dep1,dep2

funcA: ->
funcB: ->
# etc...
funcZ: -> 
```

然后有一个脚本可以读取这些注释并生成该`define 'myModule', ['dep1', 'dep2'], (dep1, dep2) ->`行并为输入文件中的每一行添加一级缩进。

所以你的构建步骤看起来像：

```
cat myModule.coffee | add-amd | coffee -sc > myModule.js 
```

# qt - qt中的数字到字符串转换

> ID：14814782
> 
> 赞同：3
> 
> 时间：2013-02-11T15:04:08.530
> 
> 标签：qt

我在数字（浮点数）到字符串的转换中发现了一些奇怪的东西..

这是示例代码。

```
#include <QtCore/QCoreApplication>
#include <QDebug>
#include <QString>

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    qDebug()<<QString::number(50.5, 'f', 0);
    qDebug()<<QString::number(49.5, 'f', 0);

    return a.exec();
} 
```

这里的输出是

```
Starting /home/asit/qt/qstring1-build-desktop/qstring1...
"50" 
"50" 
```

输出应该是 51 和 50。有人能说出这个输出背后的原因吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T15:19:24.567

浮点数的问题在于它们无法准确表示。所以 49.5 可能存储为比 49.5 稍大的数字。这同样适用于 50.5，但这个可能存储为略小于 50.5 的数字。

这让我在 Linux 上尝试过将 double 类型转换为 int。以例如

```
double value = 0.3;
int result = static_cast<int> (value * 1000); 
```

在例如 Solaris SPARC 上，您将得到 300，如您所愿。在 Linux 上使用 gcc，你得到 299。为什么？好吧，尽管两者都通过向下舍入将双精度数转换为整数，但在 Linux 上的 gcc 上，双精度数被分配给 FPU 80 位寄存器，它由略小于 0.3 的数字表示。在 Solaris（实际上是大多数其他系统，包括 VC++）上，double 被分配给一个 64 位寄存器，在该寄存器中它被表示为略大于 0.3。

如果您想确保将数字四舍五入为正确值，只需在投射前添加 0.5 或使用 qRound() 即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:27:43.757

输出正确。阅读手册，例如 [QString Class Reference](http://qt-project.org/doc/qt-4.8/qstring.html#number-2)和[Argument Formats](http://qt-project.org/doc/qt-4.8/qstring.html#argument-formats)。

你只是输出，而不是修改。如果您想获取`int`数字，请添加 0.5 add cast to `int`，例如：

```
...
int toInt(float x)
{
    return int(x+0.5);
}
...
qDebug()<<toInt(50.5);
qDebug()<<toInt(49.5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-06T21:30:27.950

数字 49.5 和 50.5 以 IEEE 浮点数精确表示。

但 IEEE 浮点标准支持各种舍入算法。除非您采取明确的步骤来控制使用哪种舍入算法，否则您将获得您的环境选择的默认算法。

具体来说，您的环境似乎正在使用银行家的四舍五入。当一个数字正好在两个可能结果的中间时，银行家的四舍五入将其四舍五入，以使最后一位为偶数。

所以 49.5 轮到 50。50.5 也轮到 50。

另请参阅此答案： [Qt: Roundoff of 12.625 by 2 返回 12.62](https://stackoverflow.com/questions/27436362/qt-roundoff-of-12-625-by-2-returns-12-62)

# multithreading - Erlang 会自动为多核多处理器分配线程吗？

> ID：14814786
> 
> 赞同：1
> 
> 时间：2013-02-11T15:04:12.757
> 
> 标签：multithreading, parallel-processing, erlang

由于 Erlang 线程不共享状态，因此 Erlang/OTP 自动利用机器可能拥有的任何额外内核和处理器是有意义的。这是真的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:43:59.363

是的，标准的 Erlang VM 将跨系统中的所有核心分发进程。一般来说，正在运行的进程数会比核心数多得多，因此效果很好。此外，VM 经过优化，可以在重负载下保持良好状态，因此您可以真正推动大量工作。

Xen VM 上的 Erlang 将仅使用单个 VM，但假设您将使用 Xen Hypervisor 跨内核分发（这是一个新的实验性 VM）

# ruby-on-rails - 在 RoR 应用程序上搜索类似的短语

> ID：14814789
> 
> 赞同：0
> 
> 时间：2013-02-11T15:04:22.977
> 
> 标签：ruby-on-rails, sunspot, sunspot-rails

我是 Rails 的初学者，我正在使用 Sunspot 来实现搜索功能。

我想搜索患者姓名。到目前为止，我使用全文方法进行搜索并且它正在工作。但是我想实现以下功能。

如果名称是 John Smith，我希望在使用字符串“Smi”搜索时显示此结果

我正在查阅 Sunspot 文档，但没有找到解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:27:01.387

如果要在全文搜索中返回子字符串，可以查看[全文搜索](https://github.com/sunspot/sunspot/wiki/Matching-substrings-in-fulltext-search)。

如果您想对来自搜索的结果进行分页，则可以添加一个文件`sunspot_solr.rb`以对结果进行分页`myapp/config/initializers/`：

```
Sunspot.config.pagination.default_per_page = 100 
```

为这种情况返回 100 个结果。

添加：

您的`schema.xml`文件创建于`yourappfolder/solr/conf`

您也可以添加`<filter class="solr.NGramFilterFactory"/>`以匹配任意子字符串。

这是我的特定配置`schema.xml`：

```
<fieldType name="text" class="solr.TextField" omitNorms="false">
      <analyzer>
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StandardFilterFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
    </fieldType>
    <fieldtype class="solr.TextField" name="text_pre" positionIncrementGap="100">
      <analyzer type="index">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.NGramFilterFactory" minGramSize="2" maxGramSize="10"/>
        <filter class="solr.ISOLatin1AccentFilterFactory"/>
        <filter class="solr.TrimFilterFactory" />
        <filter class="solr.EdgeNGramFilterFactory" minGramSize="2" maxGramSize="10"/>
      </analyzer>
      <analyzer type="query">
       <tokenizer class="solr.WhitespaceTokenizerFactory"/>
       <filter class="solr.LowerCaseFilterFactory"/>
       <filter class="solr.ISOLatin1AccentFilterFactory"/>
       <filter class="solr.TrimFilterFactory" />
      </analyzer>
    </fieldtype> 
```

不要忘记重新启动服务器并重新索引您的模型以使更改生效。

# scala - 斯卡拉继承；建设者麻烦；非泛型 IterableLike

> ID：14814791
> 
> 赞同：1
> 
> 时间：2013-02-11T15:04:25.653
> 
> 标签：scala, inheritance, iterator, builder

我试图实现一个简单的设计目标，但是 Scala 类型系统的复杂性让我有些头疼。在比较了 Traversable、Iterator、Iterable、Stream、View 等之后，我的决定是定义一个自定义特征（为了简洁起见，我们称之为`Stream`）

*   是非泛型的（我的流在语义上只有一些有意义`Stream[StreamEntry]`，我想避免像这样无意义的类型`Stream[Int]`）
*   有类似的用法`Iterable`
*   所有成员，如`take`，等都`drop`应该返回`Stream`，而不是基本的`Iterable`。

这是我到目前为止所尝试的：

## 方法一

为了勾勒用例，一个简单的例子（违反了第三个设计目标）是：

```
case class StreamEntry(data: Double) // just a dummy

trait Stream extends Iterable[StreamEntry] {
  val metaInfo: String
}

// example use case
val s = new Stream {
  val metaInfo = "something"
  val iterator = StreamEntry(1) :: StreamEntry(2) :: StreamEntry(3) :: Nil toIterator
}

val t = s.take(1) // unfortunately, this is no longer a Stream 
```

## 方法二

第三个要求要求使用*模板特征*而不是*基本特征*（我希望这是引用*SomeCollection*或*SomeCollectionLike*的标准术语）。这意味着我必须使用`IterableLike[StreamEntry, Stream]`which 重新定义表示集合的返回类型，就像`Iterable`extends`IterableLike[A, Iterable[A]]`到 return一样`Iterable`。我的想法是做几乎相同的事情`Iterable`。这将是：

```
// this is exactly the way `Iterable` is defined, but non-generic
trait Stream extends Traversable[StreamEntry]
             with GenIterable[StreamEntry]
             with GenericTraversableTemplate[StreamEntry, Stream]
             with IterableLike[StreamEntry, Stream] {
  ...
} 
```

不幸的是，这不能编译，因为`Stream`它作为模板参数出现，`GenericTraversableTemplate`并且编译器现在需要一个模板参数（正好是一个）`Stream`，这是有道理的。

## 方法 3、4、...

从这里开始，我迷失在类型系统中。由于from和. `with GenericTraversableTemplate`_ _`newBuilder``GenericTraversableTemplate``GenInterable``Traversable`

也许最接近的解决方案如下：

```
trait Stream extends TraversableLike[StreamEntry, Stream] 
             with IterableLike[StreamEntry, Stream] {
  val metaInfo: String
  def seq = this
  def newBuilder: scala.collection.mutable.Builder[StreamEntry, Stream] = ???
} 
```

这可以编译，但不幸的是我不知道如何实现 Builder。是否可以为我的非通用特征重用通用生成器？实际上，我虽然可以不使用 Builder，因为我从来没有真正想`Stream`从其他集合中构建一个新的。但是目前我在使用这种方法时遇到了一些奇怪的运行时行为，我无法完全理解。例如：

```
val s = new Stream {
  val metaInfo = "something"
  val iterator = StreamEntry(1) :: StreamEntry(2) :: StreamEntry(3) :: Nil toIterator
}

// executing the following independently (not in sequence) results in:

s.take(1)    // throws: scala.NotImplementedError: an implementation is missing
             // seems to require a Builder :(
s.toArray    // works
s.toIterator // works
s.toIterable // throws: java.lang.ClassCastException: cannot be cast to scala.collection.Iterable 
```

现在，我对 Scala 类型系统的深度感到有些迷失。我是否仍然在使用最后一种方法的正确轨道上，而 Builder 是否只是这个难题中缺失的部分？

对于非泛型非缓存类型，Builder 实现会是什么样子？一个简单的实现想法`+=`是使用一些可变缓冲区，但这首先会非常反对使用迭代器......`to`如果我不知道如何构造一个类，我应该如何实现该成员类型？我想所有相关的代码都必须在图书馆的某个地方，我就是无法挖掘出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:36:43.237

哇！你那里有很多事情要做...

以下是您在解决此设计问题时应该了解或考虑的一些事项...

**术语：**

*   我们不指“模板”，我们称它们为“通用”或“参数化”类型。原因是这些类型*不是模板*！也就是说，每次使用它们时，它们都没有填充它们的实际类型参数来创建新类（就像 C++ 中的情况一样，它正确地使用了术语“模板”）。相反，只创建一个类 (*)，它使用特定类型参数为该泛型类型的每个实例提供服务。

**设计和语言因素：**

你说：

> ... 是非泛型的（我的流在语义上只对某些 Stream[StreamEntry] 有意义，我想避免像 Stream[Int] 这样的无意义类型）

该要求*不*支持非泛型类。相反，它是“类型绑定”的本质。例如：

```
class Generic[T <: UpperBound](ctorArgs...) {
} 
```

在这种情况下，类`Generic`只能被实例化为 的子类型`UpperBound`。（请注意，每当我们说“子类型”时，我们指的是*自反*子类型关系。换句话说，在此定义下，每种类型都是其自身的子类型。

**结果：**

我想知道 Scala 标准库中的现有类型不满足您的“流”类是什么、做什么或有什么？正如您所发现的那样，扩展标准库集合类并不是一件容易的事，尽管它确实是可行的。我认为这样做不是 Scala 编程中的基本练习，并且可能不应该作为您首次涉足 Scala 的尝试之一。

(*) 这是一种过度简化，足以满足本说明的目的。

# c# - 替换类内部的类实例

> ID：14814792
> 
> 赞同：1
> 
> 时间：2013-02-11T15:04:30.393
> 
> 标签：c#, class, runtime, this

我有抽象类`A`，它可以将自身序列化到`byte[]`.

另一个类使用类型进行`C`参数化，`T`该类型应该是或继承自`A`并具有无参数构造函数。需要在和`C`之间进行双向转换。`T``byte[]`

```
Class C <T> where T : A, new() { ... } 
```

问题是：如何`T`获得`byte[]`？

我不能使用来自 的一些静态方法`A`，因为我不能覆盖它。我不能打电话`T(byte[])`，因为 C# 不允许。

我发现的唯一方法是创建实例`T`并调用从 覆盖的一些方法`A`，即：

```
byte[] bytes; // some byte table
T someT = new T();
T.LoadFromBytes(bytes); 
```

我会工作，但在很多情况下，我只能将字节转换为`T`. 有没有更好的解决方案或任何方法来做某事，比如：

```
public class SomeTClass : A
{
    public SomeTClass(){...}
    public void LoadFromBytes(byte[] bytes)
    {
        SomeTClass newT = Sth(bytes); /* new instance of SomeTClass
                                         is created from bytes */
        this = newT; /* can't do this, but I need to replace
                        current instance with the new one */
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:42:24.293

我设法解决了这个问题，但我不喜欢我创建的代码。

这个想法是用 T 参数化类 A 并创建抽象方法，如果它不是从模板类型中使用的，它将是静态的：

```
public abstract class A <T>
{
    public abstract byte[] Serialize();
    public abstract T Deserialize(byte[]); //should be static
} 
```

类`C`有新的要求：

```
public class C <T> where T : A <T>
{
    someMethod(...)
    {
        ...
        byte[] bytes; // some bytes
        T = new T().Deserialize(bytes); // should be T.Deserialize(bytes)
        ...
    }
} 
```

和一些`T`实现：

```
public class SomeTClass : A<SomeTClass>
{
    public SomeTClass Deserialize(byte[])
    {
        //deserialization code
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:20:22.660

看一下`UpdateReference`方法和反序列化实现。我认为您应该将反序列化方法设为`farbic method`. 它应该`byte[]`作为输入参数并返回您需要的类型的新实例。是你想要的吗？

```
class C <T> where T : IA, new()
{
  public T Data { get; set; }
  .....

  public UpdateReference()
  {
    byte[] data = GetBytesFromSomewhere();
    Data = AImpl.Deserialize(data);

    Data.UserfulMethod();
    Data.AnotherUserfulMethod();

    data = GetBytesFromSomewhere();
    Data = AImpl.Deserialize(data)

    Data.UserfulMethod();
    Data.AnotherUserfulMethod();
  }
}

public interface IA
{
  public byte[] Serialize();
  public A Deserialize(byte[] data);

  public string UsefuleMethod1();
  public int AnotherUsefulMethod();
}

public class AImpl : IA
{
  public byte[] Serialize()
  {
    //Concrete implementation serialization
  }

  public static IA Deserialize(byte[] data)
  {
    //Concrete implementation deserialization
  }
} 
```

# twitter-bootstrap - java脚本不加载角度ng-view部分页面下？

> ID：14814795
> 
> 赞同：1
> 
> 时间：2013-02-11T15:04:48.887
> 
> 标签：twitter-bootstrap, angularjs

目前我正在使用 angular js 和 bootstrap 做一个项目。我正在使用 ng-view 实现一些部分页面来显示这些页面，但是每次我尝试使用 java 脚本或 jquery 功能时，脚本似乎没有加载，我已经检查它不是 jquery 冲突问题。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:28:19.740

尝试在主页中的 AngularJS 之前放置指向 jQuery 的链接。

原因可能是 AngularJS 的 jQuery (JQLite) 实现还不支持`<script>`部分标签。但是如果你把 jQuery 放在 AngularJS 之前，Angular 将使用“真正的”jQuery，它`<script>`在加载的 HTML 中具有 Ajax 请求和特殊句柄标签的高级实现。

# sql-server-2008 - 如何将系统管理员登录添加到 SQL Server？

> ID：14814798
> 
> 赞同：31
> 
> 时间：2013-02-11T15:04:52.220
> 
> 标签：sql-server-2008, user-accounts

我在笔记本电脑中使用 Windows 身份验证安装了 SQL Server 2008，供我自己使用。我想使用 SQL Server 登录类型添加系统管理员帐户/角色。我检查了[这篇文章](https://stackoverflow.com/questions/9406247/sql-server-creating-a-new-login-account-with-sysadmin-role-from-an-account-w)，但它没有显示我需要的内容。如何添加系统管理员帐户？按理说它不应该是默认角色/登录名吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-11T15:55:01.670

`sysadmin`是服务器角色；它可以应用于任何登录。

安装 SQL Server 时`sa`，会使用此权限创建登录；您可以在安装 SQL Server 时指定密码。

或者您可以创建自己的登录名：

```
CREATE LOGIN adminuser WITH PASSWORD = 'ABCDegf123';
GO

EXEC master..sp_addsrvrolemember @loginame = N'adminuser', @rolename = N'sysadmin'
GO 
```

![在此处输入图像描述](../Images/aa22b5f8faf9ebb7de3e67efd94d4506.png)

这一切都假设混合模式身份验证设置为允许 SQL 登录。[更改服务器身份验证模式](http://msdn.microsoft.com/en-us/library/ms188670.aspx)。

**评论后：**

因此，从上面的链接更改为 Management Studio 中的混合模式，您将：

> 1.  在 SQL Server Management Studio 对象资源管理器中，右键单击服务器，然后单击“属性”。
>     
>     
> 2.  在“安全”页面的“服务器身份验证”下，选择新的服务器身份验证模式，然后单击“确定”。
>     
>     
> 3.  在 SQL Server Management Studio 对话框中，单击确定以确认重新启动 SQL Server 的要求。
>     
>     
> 4.  在对象资源管理器中，右键单击您的服务器，然后单击重新启动。如果 SQL Server 代理正在运行，它也必须重新启动。

它应该看起来像这样：

![在此处输入图像描述](../Images/4462573e60fbea136303af590ad40c77.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:53:41.213

'sysadmin' 是一个角色，'sa' 是'系统管理员' sql-login。

如果您仅使用 Windows 身份验证（默认模式）安装，“sa”帐户已经存在，但默认情况下将被禁用。*在 Management Studio 中的YourServerName* -> Security -> Logins下查看，您应该会在图标中看到带有向下箭头的“sa”（表示禁用的用户）

您必须使用具有足够权限的帐户登录（如果您的安装帐户具有可以工作的系统管理员权限），然后启用“sa”并设置密码。

# java - 为什么这段代码会使 JVM 崩溃？

> ID：14814799
> 
> 赞同：1
> 
> 时间：2013-02-11T15:04:53.613
> 
> 标签：java, jndi, java-6, jvm-crash

为什么这段代码会使 JVM 崩溃？

```
public Connection createConnectionFromDS() throws Exception {
    try {
        Connection con = null;
        Properties props = new Properties();
        props.put(Context.INITIAL_CONTEXT_FACTORY, "org.jnp.interfaces.NamingContextFactory");
        props.put(Context.PROVIDER_URL, "my_ip");
        Context ctx = new InitialContext(props);
        log.debug("Looking up datasource " + dataSourceName);
        DataSource dataSource = (javax.sql.DataSource) ctx.lookup(dataSourceName);
        con = dataSource.getConnection();
        return con;
    } catch (NameNotFoundException e) {
        throw new Exception("Datasource [" + dataSourceName + "] not bound!");
    }
} 
```

日志如下：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x00000001800060ba, pid=3816, tid=3076
#
# JRE version: 6.0_39-b04
# Java VM: Java HotSpot(TM) 64-Bit Server VM (20.14-b01 mixed mode windows-amd64 compressed oops)
# Problematic frame:
# C  [db2jcct2.dll+0x60ba] 
```

我已经从 6.0_29 升级到了 6.0_39，但是并没有解决问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T15:07:15.563

简而言之，它*不应该*。这看起来像是`db2jcct2.dll`（您的 DB2 驱动程序）中的一个错误。

```
# Problematic frame:
# C  [db2jcct2.dll+0x60ba] 
```

您可以尝试其他版本的 JDBC 驱动程序吗？和/或将此报告给 IBM ？

# ruby-on-rails - Errno::ENOENT (没有这样的文件或目录 - )

> ID：14814801
> 
> 赞同：1
> 
> 时间：2013-02-11T15:05:02.067
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在我的控制器中，我试图执行一个 ruby​​ 脚本：

```
def mymethod
  variable = `ruby /home/user/Test.rb`
  exec variable
  raise "Failed: #{variable}" unless variable.blank?
end 
```

Test.rb 脚本存在于上述路径中，即使这样我也会收到错误消息：

```
Errno::ENOENT (No such file or directory - ) 
```

Test.rb 内容：

```
require 'rubygems'
require 'net/smtp'
require 'pp'
require 'mysql'
require 'yaml'
message = "MESSAGE_END
G Name <MyEmailAddress>
To: G Name <MyEmailAddress>
Subject: SMTP e-mail test
This is a test mail"
Net::SMTP.start('webserver') do |smtp|
smtp.send_message message, 'EmailAddress', 'EmailAddress'
end 
```

当我手动运行此脚本时。它按预期发送邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:18:45.970

你必须

```
require 'open-uri' 
```

所以，

```
require '/home/user/Test.rb'  
require 'open-uri'  # sometimes without this line, we get the exact error message in ruby on rails.. 
```

（或者）

尝试重新启动您的服务器，有时它会修复它..

# excel - 评估包含命名范围的文本

> ID：14814806
> 
> 赞同：3
> 
> 时间：2013-02-11T15:05:15.453
> 
> 标签：excel, excel-formula

如何**评估包含命名范围的文本字符串**？我尝试了 EVAL、EVALUATE 和 INDIRECT，但没有成功。

多一点..

对于另一个系统，我有 50 多个公式和 200 多个变量，示例如下：

```
<ABC>+<DEF>/<TRE-1> 
```

为了能够在 Excel 中一次使用它们，而无需手动更改每个公式、变量和运算符，我使用了几个（或更多）SUBSTITUTE 公式来呈现 Excel 可能能够消化的字符串：

```
=ABC+DEF/TRE_1 
```

我将所有变量引用到命名范围。例如：

ABC 是单元格 B2，值 5.4

DEF 是单元格 B3，值 3.2

TRE_1 是单元格 B4，值 1

但随后我无法使用 INDIRECT 或 EVALUATE 评估结果字符串。它只是给我一个#NAME 或#REF 错误，因为它似乎没有将变量识别为命名范围（因此是一个值）。

有任何想法吗？

我不想在 VBA 中实现它。我知道使用 .RefersTo 方法是可能的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T15:30:16.260

尝试使用以下语法：

`=INDIRECT("ABC")+INDIRECT("DEF")/INDIRECT("TRE_1")`

注意报价。似乎是这样`INDIRECT`工作的：`=INDIRECT("ABC+DEF")`返回`#REF!`

另请参阅此示例：[https ://www.dropbox.com/s/jxj7cgjmnx8iv0t/INDIRECTwithNamedRegions.xlsx](https://www.dropbox.com/s/jxj7cgjmnx8iv0t/INDIRECTwithNamedRegions.xlsx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:12:56.863

INDIRECT dows 不评估公式，仅参考：您需要使用 Evaluate，但这只能通过 XLM 或 COM 接口使用。
您可以将 Evaluate 嵌入到定义的名称公式中，但这种方法通常不切实际。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:00:58.473

VBA 解决方案（如此处或[此处所见）是](http://www.pcmag.com/article2/0,2817,2212496,00.asp)[在](https://superuser.com/questions/253353/excel-function-that-evaluates-a-string-as-if-it-were-a-formula)当前工作簿的模块内设置 UDF（用户定义函数），例如：

```
Function Eval(ByVal S As String) As String

Eval = Evaluate(S)

End Function 
```

将变量设置为命名范围，在单元格中输入：

```
 =Eval("ABC+DEF/TRE_1") 
```

它会正确弹出结果。

现在..我不想使用 VBA ......

# linux - 如何找到两个文本文件之间的匹配模式并输出到另一个文件？

> ID：14814812
> 
> 赞同：0
> 
> 时间：2013-02-11T15:05:19.850
> 
> 标签：linux, bash, shell, unix, grep

我有两个文本组织不同的文本文件。这两个文件在文本中都包含几个相同的模式（数字）。我想找出两个文件中都存在哪些模式（数字）并将它们写入输出文件。

文件 1.txt：

```
blablabla_25947.bkwjcnwelkcnwelckme

blablabla_111.bkwjcnwelkcnwelckme

blablabla_65155.bkwjcnwelkcnwelckme

blablabla_56412.bkwjcnwelkcnwelckme 
```

文件2.txt：

```
blablabla_647728.bkwjcnwelkcnwelck
kjwdhcwkejcwmekcjwhemckwejhcmwekch

blablabla_6387.bkwjcnwelkcnwelckme
wexkwhenqlciwuehnqweiugfnwekfiugew
wedhwnejchwenckhwqecmwequhcnkwjehc
owichjwmelcwqhemclekcelmkjcelkwejc

blablabla_59148.bkwjcnwelkcnwelckme
ecmwequhcnkwjehcowichjwmelcwqhemcle
kcelmkjcelkwejcwecawecwacewwAWWAXEG

blablabla_111.bkwjcnwelkcnwelckm
WESETRBRVSSCQEsfdveradassefwaefawecc 
```

输出文件.txt：

```
111 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:14:47.110

怎么样：

```
$ egrep -o '_[0-9]+\.' file1 | grep -of - file2 | tr -d '_.'
111

# Redirect to new file
$ egrep -o '_[0-9]+\.' file1 | grep -of - file2 | tr -d '_.' > file3 
```

首先从`grep`中获取所有数字字符串*（前面`_`和前面`.`）*，此列表`file1`用于. 和被剥离使用.`grep``file2``_``.``tr`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:37:54.970

事实上，我确实试图解决我认为你提出的“难题”。以下代码查找在 file1 和 file2 中找到的最长字符串。如果有多个“最长”字符串，它只报告找到的第一个。在某些时候可能对某人有帮助（尽管可能不是您在此处寻找的解决方案）：

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>
#include <sys/stat.h>

/* This routine returns the size of the file it is called with. */

static unsigned
get_file_size (const char * file_name)
{
    struct stat sb;
    if (stat (file_name, & sb) != 0) {
        fprintf (stderr, "'stat' failed for '%s': %s.\n",
                 file_name, strerror (errno));
        exit (EXIT_FAILURE);
    }
    return sb.st_size;
}

/* This routine reads the entire file into memory. */

static unsigned char *
read_whole_file (const char * file_name)
{
    unsigned s;
    unsigned char * contents;
    FILE * f;
    size_t bytes_read;
    int status;

    s = get_file_size (file_name);
    contents = malloc (s + 1);
    if (! contents) {
        fprintf (stderr, "Not enough memory.\n");
        exit (EXIT_FAILURE);
    }

    f = fopen (file_name, "r");
    if (! f) {
        fprintf (stderr, "Could not open '%s': %s.\n", file_name,
                 strerror (errno));
        exit (EXIT_FAILURE);
    }
    bytes_read = fread (contents, sizeof (unsigned char), s, f);
    if (bytes_read != s) {
        fprintf (stderr, "Short read of '%s': expected %d bytes "
                 "but got %d: %s.\n", file_name, s, bytes_read,
                 strerror (errno));
        exit (EXIT_FAILURE);
    }
    status = fclose (f);
    if (status != 0) {
        fprintf (stderr, "Error closing '%s': %s.\n", file_name,
                 strerror (errno));
        exit (EXIT_FAILURE);
    }
    return contents;
}

int main(int argc, char* argv[]){
    int i1, i2, l1, l2, lm;
    unsigned char longestString[1000]; // lazy way to make big enough.
    unsigned char tempString[1000];
    int longestFound=0;
    unsigned char *f1, *f2; // buffers with entire file contents
    f1  = read_whole_file (argv[1]);
    f2  = read_whole_file (argv[2]);

    l1 = strlen(f1);
    l2 = strlen(f2);

    for(i1 = 0; i1 < l1; i1++) {
        lm = 0;// length of match
        for(i2 = i1; i2<l2; i2++) {
            lm = 0;

            while (f1[i1+lm] == f2[i2+lm] && (i1+lm<l1) && (i2+lm<l2) && lm < 1000-1) {
                tempString[lm] = f1[i1+lm];
                lm++;
            }

            if (lm > longestFound) {
                tempString[lm]=0; // terminate string
                strcpy(longestString, tempString);
                longestFound = lm;
            }
        }

    }

    printf("longest string found is %d characters:\n", longestFound);
    printf("%s\n", longestString);
    free(f1);
    free(f2);
    return 0;
} 
```

读取整个文件内容的代码位于[http://www.lemoda.net/c/read-whole-file/index.html](http://www.lemoda.net/c/read-whole-file/index.html)

# java - 将一组字符串从velocity发送到struts ActionForm

> ID：14814831
> 
> 赞同：0
> 
> 时间：2013-02-11T15:06:16.260
> 
> 标签：java, struts, velocity

我试图从 struts ActionForm 中的速度模板中检索字符串数组：

我的 HTML 代码：

```
 <input type="checkbox" id="checkboxAFF01" value="AFF01" name="expert[1]"> 
 <input type="checkbox" id="checkboxAFF02" value="AFF02" name="expert[2]"> 
<input type="checkbox" id="checkboxAFF03" value="AFF03" name="expert[3]"> 
```

我的行动表格：

```
private String[] expert;

 public String getExpert(int index) {
   return expertise[index];
 }

 public void setExpert(int index, String value) {
   expertise[index] = value;
 } 
```

但我收到此错误：

```
 2013-02-11 14:53:10,284 ERROR org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/].[MainServlet] - "Servlet.service()" pour la servlet MainServlet  exception
java.lang.NullPointerException
 at .....setExpert(TestForm.java:115)
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
 at java.lang.reflect.Method.invoke(Method.java:597)
 at org.apache.commons.beanutils.PropertyUtils.setIndexedProperty(PropertyUtils.java:1435)
 at org.apache.commons.beanutils.BeanUtils.setProperty(BeanUtils.java:1013)
 at org.apache.commons.beanutils.BeanUtils.populate(BeanUtils.java:808)
 at org.apache.struts.util.RequestUtils.populate(RequestUtils.java:495)
 at org.apache.struts.action.RequestProcessor.processPopulate(RequestProcessor.java:798)
 at com.oroad.stxx.plugin.StxxTilesRequestProcessor.processPopulate(StxxTilesRequestProcessor.java:201)
 at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:205)
 at com.liferay.portal.struts.PortalRequestProcessor.process(PortalRequestProcessor.java:149)
 at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1164)
 at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:415)
 at javax.servlet.http.HttpServlet.service(HttpServlet.java:637) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:22:15.847

删除索引的 getter/setter 并替换为只获取和设置数组的方法。

也就是说，我建议改用列表。

# php - 根据自定义字段数据显示特定图像

> ID：14814833
> 
> 赞同：0
> 
> 时间：2013-02-11T15:06:17.530
> 
> 标签：php, image

我想根据自定义字段中的数据将 5 张图像中的一张拉到帖子中。

例如：如果自定义字段为 1，则显示图像 A。如果自定义字段为 2，则显示图像 B。如果自定义字段为 3，则显示图像 C。如果自定义字段为 4，则显示图像 D。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:20:31.953

在 php 中，您可以执行此操作，将您喜欢的图像命名为输入，例如输入 1 将加载 1.jpg

顺便说一句，下面的代码只是一个例子。您需要验证它是否是图像文件。其他人将能够加载您可能不喜欢加载的其他内容。

```
<?php
echo '<img src="image_folder/'+ $customfieldvalue +'.jpg" />';
?> 
```

# cakephp - cakePHP 2.0 相关模型数据未检索到

> ID：14814835
> 
> 赞同：2
> 
> 时间：2013-02-11T15:06:18.310
> 
> 标签：cakephp, model

我有 2 张桌子，民兵和禁令。民兵可以有许多禁令，禁令只属于一个民兵。我在模型中设置了这些，但是当我为民兵组织寻找一切时，禁令并没有被取消。

**民兵模型**

```
class Militia extends AppModel {
    public $belongsTo = array(
        'User' => array(
            'className'    => 'User',
            'foreignKey'   => 'user_id'
        )
    );

    public $hasMany = array(
        'Injunction' => array(
            'className'     => 'Injunction',
            'foreignKey'    => 'militia_id'
            //'conditions'    => array("not" => array('Injunction.removed' => null))
        )
    );
} 
```

**禁令模型**

```
class Injunction extends AppModel {
    public $belongsTo = array(
        'Militia' => array(
            'className'    => 'Militia',
            'foreignKey'   => 'militia_id'
        )
    );
} 
```

**以及获取民兵成员的查询**

```
$user = $this->Session->read("User");

        $militias = $this->Militia->find('all',
            array(
                'conditions'=>array(
                    "Militia.user_id"   => $user['User']['id'],
                    "Militia.deleted"   => 0
                )
            )
        ); 
```

**输出**

```
 /app/Controller/UsersController.php (line 41)
array(
    (int) 0 => array(
        'Militia' => array(
            'id' => '26',
            'first_name' => 'Chris',
            'last_name' => 'Morris',
            'created' => '2013-02-11 13:45:24',
            'user_id' => '2',
            'status' => '1',
            'deleted' => '0'
        )
    ),
    (int) 1 => array(
        'Militia' => array(
            'id' => '31',
            'first_name' => 'John',
            'last_name' => 'Smith',
            'created' => '2013-02-11 14:03:50',
            'user_id' => '2',
            'status' => '0',
            'deleted' => '0'
        )
    ),
    (int) 2 => array(
        'Militia' => array(
            'id' => '32',
            'first_name' => 'test',
            'last_name' => 'user',
            'created' => '2013-02-11 14:21:38',
            'user_id' => '2',
            'status' => '0',
            'deleted' => '0'
        )
    ),
    (int) 3 => array(
        'Militia' => array(
            'id' => '33',
            'first_name' => 'test',
            'last_name' => 'user',
            'created' => '2013-02-11 14:24:02',
            'user_id' => '2',
            'status' => '1',
            'deleted' => '0'
        )
    )
) 
```

我以前在其他项目上做过同样的事情，但出于某种原因，这一次它没有提取相关数据。这可能是一些愚蠢的错字，但我一直在寻找和测试，找不到任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T11:55:45.980

1.  检查ORM（hasOne、hasMany、belongsTo、hasAndBelongsToMany）定义，
2.  检查外键ID是否设置正确
3.  检查表及其相关表中是否有数据。
4.  无条件检查 find 的结果
5.  检查递归级别是否大于0
6.  要排除旧的缓存查询问题，请将调试级别设置为 0
7.  在 sql dump 的底部查看正在触发的查询，如果感觉还可以，请尝试使用远离 Cake/Php 的 SQL 进行相同的查询。

# jquery - 一个寻呼机 - jQuery - mouseenter 和 mouseleave - 如果单击则跳过 mouseleave

> ID：14814836
> 
> 赞同：3
> 
> 时间：2013-02-11T15:06:18.257
> 
> 标签：jquery, click, mouseenter, mouseleave

我在一个寻呼机中有一个顶级固定列表导航，工作正常。

我用 jQuery 颜色插件添加了 mouseenter 和 mouseleave 颜色动画，效果也很好。

现在我想跳过mouseleave，如果点击了链接，但我不明白。我尝试了我在这里找到的所有东西，但仍然没有我喜欢的结果。我真的是新的 JavaScipt / jQuery，所以如果你能解释它对新手友好，那就太好了；）。

我的导航html代码：

```
<nav>
    <ul>
        <li class="xyz"><a href="#home" class="scroll">Home</a></li>
        <li class="xyz"><a href="#leistungen" class="scroll">Leistungen</a></li>
        <li class="xyz"><a href="#referenzen" class="scroll">Referenzen</a></li>
        <li class="xyz"><a href="#me" class="scroll">Über Mich</a></li>
        <li class="xyz"><a href="#kontakt" class="scroll">Kontakt</a></li>
    </ul>
</nav> 
```

我的 jQuery 代码在这里：

```
$(function() {

$('ul li a.scroll').on('mouseenter', function() { //Wenn Maus über .teaser
    $(this).stop().animate({
        'color': 'white',
        'background-color': '#468592',
    }, 400);
});

$('ul li a.scroll').on('mouseleave', function() {
        $(this).stop().animate({
            'color': '#666666',
            'background-color': 'white',
    }, 400);
});

$('ul li a.scroll').click(function(event) {
    $('.scroll').removeClass('active');
    $(this).addClass('active');
    event.preventDefault();
    $('html,body').stop().animate({
        scrollTop: $(this.hash).offset().top
    }, 1000);

}); 
```

});

你能帮我解决这个问题吗？我现在试了两天还是没有结果。

问候和感谢，mkr*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:17:32.683

在您的 mouseleave 中，您只需要检查元素上是否存在“活动”类并且什么都不做。

```
$('ul li a.scroll').on('mouseleave', function() {
    if($(this).hasClass("active"))
        return; // do nothing because it's active
    $(this).stop().animate({
            'color': '#666666',
            'background-color': 'white',
    }, 400);
}); 
```

**编辑**这是一个重新设计的 CSS + JS 解决方案。CSS :hover 和 CSS3 过渡用于鼠标[进入/离开]效果，而 JS 用于单击切换。

[http://jsfiddle.net/tdV2g/](http://jsfiddle.net/tdV2g/)

你不会在 IE9 中获得 0.4 秒的颜色过渡，但在所有现代浏览器中它都可以工作。

CSS

```
a.scroll {
    background-color: white;
    color: #666666;
transition: background-color 0.4s linear, color 0.4s linear;
-moz-transition: background-color 0.4s linear, color 0.4s linear;
-o-transition: background-color 0.4s linear, color 0.4s linear;
-webkit-transition: background-color 0.4s linear, color 0.4s linear;
-ms-transition: background-color 0.4s linear, color 0.4s linear;
}
.scrollactive, a.scroll:hover {
    background-color: #468592;
    color: white;
} 
```

JS (jQuery)

```
$("a.scroll").click(function(event) {
    $(".scrollactive")
        .removeClass("scrollactive")
        .addClass("scroll");
    $(this)
        .removeClass("scroll")
        .addClass("scrollactive");
    event.preventDefault();
    $('html,body').stop().animate({
        scrollTop: $(this.hash).offset().top
    }, 1000);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:19:41.397

只需添加

```
$(this).unbind('mouseleave'); 
```

在你的里面`$('ul li a.scroll').click({ .. });`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:30:00.110

尝试这个，

```
$('ul li a.scroll').on('mouseenter', function() { //Wenn Maus über .teaser
  $(this).stop().animate({
    'color': 'white',
    'background-color': '#468592'
  }, 400);

});

$('ul li a.scroll').on('mouseleave', function() {
    $(this).stop().animate({
        'color': '#666666',
        'background-color': 'white'
}, 400);

});

$('ul li a.scroll').one('click', function () {
  // If you want to stop mouseleave on every anchor tag
  $('ul li a.scroll').unbind('mouseleave');  
  // If you want to stop mouseleave for that specific anchor tag
  // $(this).unbind('mouseleave'); 
}); 
```

# unit-testing - Gradle 测试失败并出现错误

> ID：14814837
> 
> 赞同：36
> 
> 时间：2013-02-11T15:06:20.603
> 
> 标签：unit-testing, gradle

我在输出中看到下一个：

```
FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':test'.
> superClassName is empty! 
```

如果有人知道如何解决它，我将不胜感激。

我已经看过[http://issues.gradle.org/browse/GRADLE-1682](http://issues.gradle.org/browse/GRADLE-1682)了。但任何解决方案都没有帮助

使用更多信息创建 Gist： [https ://gist.github.com/emartynov/c88194c702b77f42a7c0](https://gist.github.com/emartynov/c88194c702b77f42a7c0)

这是堆栈跟踪：

```
* Exception is:
org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':test'.
    at   org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.
java:72)
        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:49
)
    at org.gradle.api.internal.tasks.execution.PostExecutionAnalysisTaskExecuter.execute(PostExecutionAnalysisTaskEx
ecuter.java:34)
    at org.gradle.api.internal.changedetection.CacheLockHandlingTaskExecuter$1.run(CacheLockHandlingTaskExecuter.jav
a:34)
    at org.gradle.internal.Factories$1.create(Factories.java:22)
    at org.gradle.cache.internal.DefaultCacheAccess.longRunningOperation(DefaultCacheAccess.java:179)
    at org.gradle.cache.internal.DefaultCacheAccess.longRunningOperation(DefaultCacheAccess.java:232)
    at org.gradle.cache.internal.DefaultPersistentDirectoryStore.longRunningOperation(DefaultPersistentDirectoryStor
e.java:142)
    at org.gradle.api.internal.changedetection.DefaultTaskArtifactStateCacheAccess.longRunningOperation(DefaultTaskA
rtifactStateCacheAccess.java:83)
    at org.gradle.api.internal.changedetection.CacheLockHandlingTaskExecuter.execute(CacheLockHandlingTaskExecuter.j
ava:32)
    at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:55)
    at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:57)
    at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExec
uter.java:41)
    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.j
ava:51)
    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:52)
    at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.j
ava:42)
    at org.gradle.api.internal.AbstractTask.executeWithoutThrowingTaskFailure(AbstractTask.java:275)
    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.executeTask(DefaultTaskPlanExecutor.java:52)
    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.processTask(DefaultTaskPlanExecutor.java:38)
    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.process(DefaultTaskPlanExecutor.java:30)
    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:84)
    at org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:29)
    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:61)
    at org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)
    at org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:67)
    at org.gradle.api.internal.changedetection.TaskCacheLockHandlingBuildExecuter$1.run(TaskCacheLockHandlingBuildEx
ecuter.java:31)
    at org.gradle.internal.Factories$1.create(Factories.java:22)
    at org.gradle.cache.internal.DefaultCacheAccess.useCache(DefaultCacheAccess.java:124)
    at org.gradle.cache.internal.DefaultCacheAccess.useCache(DefaultCacheAccess.java:112)
    at org.gradle.cache.internal.DefaultPersistentDirectoryStore.useCache(DefaultPersistentDirectoryStore.java:134)
    at org.gradle.api.internal.changedetection.DefaultTaskArtifactStateCacheAccess.useCache(DefaultTaskArtifactState
CacheAccess.java:79)
    at org.gradle.api.internal.changedetection.TaskCacheLockHandlingBuildExecuter.execute(TaskCacheLockHandlingBuild
Executer.java:29)
    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:61)
    at org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)
    at org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:67)
    at org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)
    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:61)
    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:54)
    at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:165)
    at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:113)
    at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:81)
    at org.gradle.launcher.cli.ExecuteBuildAction.run(ExecuteBuildAction.java:38)
    at org.gradle.launcher.exec.InProcessGradleLauncherActionExecuter.execute(InProcessGradleLauncherActionExecuter.
java:39)
    at org.gradle.launcher.exec.InProcessGradleLauncherActionExecuter.execute(InProcessGradleLauncherActionExecuter.
java:25)
    at org.gradle.launcher.cli.RunBuildAction.run(RunBuildAction.java:50)
    at org.gradle.api.internal.Actions$RunnableActionAdapter.execute(Actions.java:171)
    at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:20
1)
    at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:17
4)
    at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:170)
    at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:139)
    at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:33)
    at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:22)
    at org.gradle.launcher.Main.doAction(Main.java:48)
    at org.gradle.launcher.bootstrap.EntryPoint.run(EntryPoint.java:45)
    at org.gradle.launcher.Main.main(Main.java:39)
    at org.gradle.launcher.bootstrap.ProcessBootstrap.runNoExit(ProcessBootstrap.java:50)
    at org.gradle.launcher.bootstrap.ProcessBootstrap.run(ProcessBootstrap.java:32)
    at org.gradle.launcher.GradleMain.main(GradleMain.java:26)
Caused by: java.lang.IllegalArgumentException: superClassName is empty!
    at org.gradle.api.internal.tasks.testing.detection.AbstractTestFrameworkDetector.getSuperTestClassFile(AbstractT
estFrameworkDetector.java:63)
    at org.gradle.api.internal.tasks.testing.junit.JUnitDetector.processTestClass(JUnitDetector.java:51)
    at org.gradle.api.internal.tasks.testing.detection.AbstractTestFrameworkDetector.processSuperClass(AbstractTestF
rameworkDetector.java:142)
    at org.gradle.api.internal.tasks.testing.junit.JUnitDetector.processTestClass(JUnitDetector.java:54)
    at org.gradle.api.internal.tasks.testing.detection.AbstractTestFrameworkDetector.processSuperClass(AbstractTestF
rameworkDetector.java:142)
    at org.gradle.api.internal.tasks.testing.junit.JUnitDetector.processTestClass(JUnitDetector.java:54)
    at org.gradle.api.internal.tasks.testing.detection.AbstractTestFrameworkDetector.processTestClass(AbstractTestFr
ameworkDetector.java:131)
    at org.gradle.api.internal.tasks.testing.detection.DefaultTestClassScanner$1.visitClassFile(DefaultTestClassScan
ner.java:58)
    at org.gradle.api.internal.tasks.testing.detection.DefaultTestClassScanner$ClassFileVisitor.visitFile(DefaultTes
tClassScanner.java:78)
    at org.gradle.api.internal.file.collections.DirectoryFileTree.walkDir(DirectoryFileTree.java:156)
    at org.gradle.api.internal.file.collections.DirectoryFileTree.walkDir(DirectoryFileTree.java:171)
    at org.gradle.api.internal.file.collections.DirectoryFileTree.walkDir(DirectoryFileTree.java:171)
    at org.gradle.api.internal.file.collections.DirectoryFileTree.walkDir(DirectoryFileTree.java:171)
    at org.gradle.api.internal.file.collections.DirectoryFileTree.visitFrom(DirectoryFileTree.java:124)
    at org.gradle.api.internal.file.collections.DirectoryFileTree.visit(DirectoryFileTree.java:114)
    at org.gradle.api.internal.file.collections.FileTreeAdapter.visit(FileTreeAdapter.java:96)
    at org.gradle.api.internal.file.CompositeFileTree.visit(CompositeFileTree.java:54)
    at org.gradle.api.internal.tasks.testing.detection.DefaultTestClassScanner.detectionScan(DefaultTestClassScanner
.java:56)
    at org.gradle.api.internal.tasks.testing.detection.DefaultTestClassScanner.run(DefaultTestClassScanner.java:50)
    at org.gradle.api.internal.tasks.testing.processors.TestMainAction.run(TestMainAction.java:43)
    at org.gradle.api.internal.tasks.testing.detection.DefaultTestExecuter.execute(DefaultTestExecuter.java:77)
    at org.gradle.api.tasks.testing.Test.executeTests(Test.java:448)
    at org.gradle.api.internal.BeanDynamicObject$MetaClassAdapter.invokeMethod(BeanDynamicObject.java:216)
    at org.gradle.api.internal.BeanDynamicObject.invokeMethod(BeanDynamicObject.java:122)
    at org.gradle.api.internal.CompositeDynamicObject.invokeMethod(CompositeDynamicObject.java:147)
    at org.gradle.api.tasks.testing.Test_Decorated.invokeMethod(Unknown Source)
    at org.gradle.util.ReflectionUtil.invoke(ReflectionUtil.groovy:23)
    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$4.execute(AnnotationProcessingTas
kFactory.java:161)
    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$4.execute(AnnotationProcessingTas
kFactory.java:156)
    at org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:510)
    at org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:499)
    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.
java:64)
    ... 57 more 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-02-19T00:40:22.837

听起来像[GRADLE-1682](http://issues.gradle.org/browse/GRADLE-1682)。关闭类文件扫描应该可以解决问题：

```
tasks.withType(Test) {
    scanForTestClasses = false
    include "**/*Test.class" // whatever Ant pattern matches your test class files
} 
```

# javascript - Chrome 扩展程序：让扩展程序监听页面上的事件？

> ID：14814841
> 
> 赞同：18
> 
> 时间：2013-02-11T15:06:24.783
> 
> 标签：javascript, google-chrome-extension

我有一个我为我的网站制作的 chrome 扩展程序，目前我的扩展程序每分钟检查一次数据库以获取更新。

是否可以让扩展程序监听实际页面上的事件？

像这样的东西

```
this.trigger('sendUpdate', data) //this happened on the page

this.on(sendUpdate, function(){ //this is what the chrome extension listens for
    //do stuff with data
}) 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-11T15:44:27.713

您需要添加一个 content_script。content_script 具有对 DOM 的完全访问权限，您可以绑定到页面上的所有事件

只需将其添加到清单文件中

```
"content_scripts":[{
    "matches":["http://*/*","https://*/*"],
    "js":"your injected script.js"
}] 
```

您可以获得更多信息[https://developer.chrome.com/docs/extensions/mv2/content_scripts/](https://developer.chrome.com/docs/extensions/mv2/content_scripts/)

同样从您的问题来看，您似乎将使用自定义事件，因此您的 content_scrip js 将与此类似

```
document.addEventListener('yourEventName', function(e){
   //send message to ext
   var someInformation = {/*your msg here*/}
   chrome.extension.sendMessage(someInformation, function(response) {
      //callback
   });
}, false); 
```

背景页面应该收听消息。

```
chrome.extension.onMessage.addListener(function(myMessage, sender, sendResponse){
    //do something that only the extension has privileges here
    return true;
 }); 
```

然后您可以从页面上的所有脚本触发事件...

```
var evt = document.createEvent('Event');
evt.initEvent('yourEventName', true, true);
var some_element = document;
some_element.dispatchEvent(evt); 
```

# android - 页面加载时获取webview中的所有url

> ID：14814844
> 
> 赞同：0
> 
> 时间：2013-02-11T15:06:29.323
> 
> 标签：android, android-webview

我能够成功地在 webview 中加载 html 页面。我还可以通过设置 webviewclient 来获取在 webview 上点击的 url。但我想要的是不同的东西，我有一个加载网页的 webview 以及一个单击按钮，我希望该网页中存在所有 url。我该怎么做呢？

到目前为止，我尝试过的代码是

```
dialog = ProgressDialog.show(Activity.this, null, null);
    dialog.setContentView(R.layout.loader);

    w.setWebViewClient(new MyWebViewClient());

    w.loadDataWithBaseURL("same://ur/l/tat/does/not/work", string_html,
            "text/html", "utf-8", null);

private class MyWebViewClient extends WebViewClient {

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    }

    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        super.onPageStarted(view, url, favicon);

        if (url.startsWith("http://")) {
            System.out.println("INSIDE IF"); // NON-NLS
            view.stopLoading();

            urlToSend = url;

            System.out.println("in " + urlToSend);

            Intent intent = new Intent(DetailNews.this, Web.class);
            intent.putExtra("Web", url);
            startActivity(intent);

        }
    }

    @Override
    public void onPageFinished(WebView view, String url) {
        super.onPageFinished(view, url);

        dialog.dismiss();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:37:41.427

如果要获取页面上的所有 url，则需要 html 解析器。试试[jsoup](http://jsoup.org/) 如果你不想在你的项目中使用外部库，你可以创建自己的解析器。

1) 通过 HttpUrlConnection 或 HttpClient 加载源页面

2）使用一些阅读器逐行迭代页面内容

3) 创建正则表达式来提取链接。

[类似的帖子](https://stackoverflow.com/questions/5120171/extract-links-from-a-web-page)

# r - 增加 ggplot2 中的图例项

> ID：14814846
> 
> 赞同：2
> 
> 时间：2013-02-11T15:06:31.047
> 
> 标签：r, ggplot2

我有这个数据框：

头(x)

```
 Date Company   Region Units
1 1/1/2012 Gateway  America     0
2 1/1/2012 Gateway   Europe     0
3 1/1/2012 Gateway  America     0
4 1/1/2012 Gateway Americas     0
5 1/1/2012 Gateway   Europe     0
6 1/1/2012 Gateway  Pacific     0 
```

x 输入（x）

```
 structure(list(Date = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L), .Label = c("1/1/2012", 
"1/12/2012", "1/2/2012"), class = "factor"), Company = structure(c(1L, 
1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L), .Label = c("Gateway", "HP", "IBM"), class = "factor"), 
    Region = structure(c(1L, 3L, 1L, 2L, 3L, 4L, 2L, 1L, 3L, 
    1L, 2L, 3L, 4L, 2L, 1L, 3L, 1L, 2L, 3L, 4L, 2L, 1L, 3L, 1L, 
    2L, 3L, 4L, 2L, 1L, 3L, 1L, 2L, 3L, 4L, 2L, 1L, 3L, 1L, 2L, 
    3L, 4L, 2L, 1L, 3L, 1L, 2L, 3L, 4L, 2L, 1L, 3L, 1L, 2L, 3L, 
    4L, 2L, 1L, 3L, 1L, 2L, 3L, 4L, 2L, 1L, 3L, 1L, 2L, 3L, 4L, 
    2L, 1L, 3L, 1L, 2L, 3L, 4L, 2L, 1L, 3L, 1L, 2L, 3L, 4L, 2L
    ), .Label = c("America", "Americas", "Europe", "Pacific"), class = "factor"), 
    Units = c(1L, 3L, 1L, 6L, 20L, 2L, 2L, 10L, 2L, 1L, 2L, 4L, 
    6L, 30L, 2L, 15L, 10L, 3L, 4L, 7L, 9L, 12L, 34L, 50L, 3L, 
    2L, 4L, 3L, 1L, 3L, 3L, 1L, 4L, 0L, 1L, 0L, 0L, 1L, 0L, 4L, 
    0L, 0L, 0L, 0L, 5L, 0L, 8L, 0L, 0L, 0L, 0L, 0L, 9L, 0L, 56L, 
    10L, 0L, 0L, 5L, 7L, 0L, 0L, 8L, 0L, 2L, 0L, 4L, 0L, 5L, 
    7L, 0L, 0L, 8L, 10L, 0L, 6L, 0L, 4L, 4L, 0L, 2L, 0L, 5L, 
    0L)), .Names = c("Date", "Company", "Region", "Units"), class = "data.frame", row.names = c(NA, 
-84L)) 
```

我想创建一个热图：

```
ggplot(x, aes(Date, Company, fill=Units)) + geom_tile(aes(fill=Units)) + facet_grid(~Region) + scale_fill_gradient(low="white", high="red") 
```

此命令有效，但我需要能够使用不同的颜色而不是白色和红色，并增加图例上的比例。现在，默认是，有 5 个图例。我喜欢增加 10。O 将是白色的，而其他人应该与白色明显不同，以便用户会注意到它。

如何使用 ggplot 增加图例值的数量并为每个图例分配不同的颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:28:44.587

我发现使用[**此博客中所做**](http://mintgene.wordpress.com/category/r/)`quantiles`的绘图非常有用。这有助于生成倾斜的颜色集（如博客中所示）。假设数据与您的数据相似（大量的 0），然后通过计算适当的分位数，我们可以创建一个带有适当标签的倾斜颜色图，该颜色图在视觉上非常出色且信息丰富。我已经修改了已针对此问题链接的博客图中的代码，并添加了更多解释。博客文章的想法和实施必须得到所有赞誉。`heatmaps`[](http://mintgene.wordpress.com/category/r/)

 **在进入代码之前，我们必须对`quantiles`您的数据进行一些分析，以查看要使用哪些分位数。通过做：

```
quantile(x$Units, seq(0, 1, length.out = 25)

#      0% 4.166667% 8.333333%     12.5% 16.66667% 20.83333%       25% 29.16667% 33.33333% 
# 0.00000   0.00000   0.00000   0.00000   0.00000   0.00000   0.00000   0.00000   0.00000 
#   37.5% 41.66667% 45.83333%       50% 54.16667% 58.33333%     62.5% 66.66667% 70.83333% 
# 1.00000   1.00000   2.00000   2.00000   3.00000   3.00000   4.00000   4.00000   5.00000 
#     75% 79.16667% 83.33333%     87.5% 91.66667% 95.83333%      100% 
# 6.00000   7.00000   8.00000   9.62500  10.16667  25.41667  56.00000 
```

您会看到`0%`分位数对应于您的数据`Units=0`。直到`33%`（`33.33%`准确地说）。所以，也许我们选择`38%`作为下一个分位数。然后说 , ,`60%`最后以 . 结束。现在，我们有足够多的您想要的级别，并且它们的级别对您的数据有意义。`75%``90%``100%`

我们需要`zoo`包来完成这个。现在让我们构建数据：

```
require(zoo) # for rollapply
# the quantiles we just decided to categorise the data into classes.
qtiles    <- quantile(x$Units, probs = c(0, 38, 60, 75, 90, 100)/100)
# a color palette
c_pal     <- colorRampPalette(c("#3794bf", "#FFFFFF", 
                         "#df8640"))(length(qtiles)-1)
# since we are using quantile classes for fill levels, 
# we'll have to generate the appropriate labels
labels    <- rollapply(round(qtiles, 2), width = 2, by = 1, 
                      FUN = function(i) paste(i, collapse = " : "))
# added the quantile interval in which the data falls, 
# which will be used for fill
x$q.units <- findInterval(x$Units, qtiles, all.inside = TRUE)

# Now plot
library(ggplot2)
p <- ggplot(data = x, aes(x = Date, y = Company, fill = factor(q.units)))
p <- p + geom_tile(color = "black")
p <- p + scale_fill_manual(values = c_pal, name = "", labels = labels)
p <- p + facet_grid( ~ Region)
p <- p + theme(axis.text.x = element_text(angle = 90, hjust = 1))
p 
```

你得到这个： ![ggplot2_heatmap_skewed](../Images/44f94c0c09c8daf501a111f18a183763.png)

希望这可以帮助。

**编辑：**您还可以访问[**colorbrewer2.org**](http://colorbrewer2.org/)以获得漂亮的调色板并自己设置颜色。例如：

```
# try out these colors:
c_pal     <- c("#EDF8FB", "#B3CDE3", "#8C96C6", "#8856A7", "#810F7C")
c_pal     <- c("#FFFFB2", "#FECC5C", "#FD8D3C", "#F03B20", "#BD0026") 
```

另外，尝试`alpha`在代码中设置`geom_tile(color = "black", alpha = 0.5")`。**

# java - JTable 打印。我怎样才能使字体更大？

> ID：14814849
> 
> 赞同：2
> 
> 时间：2013-02-11T15:06:59.947
> 
> 标签：java, swing, printing, fonts, jtable

我正在尝试`JTable`使用标准`.print()`方法打印 a 。

我正在使用[该](https://stackoverflow.com/questions/6144775/messageformat-header-footerformat-how-to-change-font-for-jtable-printing)线程中的代码并且它有效。

然而，打印的表格以非常小的字母出现。我`JTable`的字体大小为 14。我尝试使用更大的字体，打印结果略有变化。然而，超过 16 号字体，屏幕上的表格看起来真的很难看。所以我需要修改打印字体大小。

虽然我正在使用`JTable.PrintMode.FIT_WIDTH`表格进行打印，但并未放大以适合打印区域（即在横向模式下打印的情况下）。

这是我的打印程序：

```
MessageFormat headerFormat = new MessageFormat(str1 +" FROM " + fromDateButton.getText() + " TO " + toDateButton.getText()+"");
MessageFormat footerFormat = new MessageFormat("- {0} -");                  
tbSchedule.print(javax.swing.JTable.PrintMode.FIT_WIDTH, headerFormat, footerFormat); 
```

所以，我的问题是：如何放大表格以适应打印区域，或者如何使用比屏幕上的表格更大的字体打印？

# r - 将聚合对象绑定到原始数 据框

> ID：14814851
> 
> 赞同：3
> 
> 时间：2013-02-11T15:07:01.177
> 
> 标签：r, aggregate

我有一个用于聚合的 data.frame，它只是由`ddply`plyr 完成的。现在的目标是编写一个将聚合对象自动绑定到原始数​​据的函数。问题是，可以有多个聚合变量。

下面是一个只有一个聚合变量的例子：

这是我拥有的数据框：

```
 M O
1 1 6 
2 2 7 
3 2 4 
4 1 6 
```

然后`ddply`我得到“O”的聚合：

```
TEST <- ddply(.data = DF,
              .variables = c("M"),
              .fun = summarise,
              NEW = sum(O)) 
```

结果如下所示：

```
 M NEW
1 1  12
2 2  11 
```

我现在想做的是编写一个函数，使我能够将变量“ `New`”绑定到原始 data.frame。

在一个循环中，它适用于：

```
for(i in 1:nrow(TEST)) {
  DF$New[DF$M == TEST$M[i]] <- TEST$NEW[i]
  } 

  M O New
1 1 6  12 
2 2 7  11 
3 2 4  11 
4 1 6  12 
```

现在我想把它转换成一个函数，即使有多个聚合变量，它也能提供等效的输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T15:12:10.337

您可以在基础 R 中使用`ave`and`within`并添加多个列，如下所示。假设您的 data.frame 被称为“mydf”：

```
within(mydf, {
  P <- ave(O, M, FUN = sum)
  Q <- ave(O, M, FUN = mean)
})
#   M O   Q  P
# 1 1 6 6.0 12
# 2 2 7 5.5 11
# 3 2 4 5.5 11
# 4 1 6 6.0 12 
```

当然，更好的是`data.table`包：

```
library(data.table)
DT <- data.table(mydf)
DT[, `:=`(SUM = sum(O), MEAN = mean(O)), by = "M"]
DT
   M O SUM MEAN
1: 1 6  12  6.0
2: 2 7  11  5.5
3: 2 4  11  5.5
4: 1 6  12  6.0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T15:12:13.710

就像我在评论中说的：

```
ddply(.data = DF,
      .variables = c("M"),
      .fun = transform,
       NEW = sum(O))
  M O NEW
1 1 6  12
2 1 6  12
3 2 7  11
4 2 4  11 
```

# objective-c - 我在 Objective C 中的调整中未声明的标识符“UIColor”

> ID：14814852
> 
> 赞同：2
> 
> 时间：2013-02-11T15:07:03.977
> 
> 标签：objective-c, xcode, cydia, tweak

我正在尝试使用 IOSOpenDev 在 Xcode 中进行调整，但我遇到了一个错误`Use of undeclared identifier "UIColor"`！
我在我的 iPhone 上使用了相同的代码，但它可以工作，为什么它不能在这里工作？（我想使用 IOSOpenDev，因为它看起来比使用 theos 好得多）

这是代码

```
%hook SBScreenFlash

-(void)flashColor:(id)color {

NSDictionary *prefs=[[NSDictionary alloc] initWithContentsOfFile:@"/var/mobile/Library/Preferences/com.junyi00.screenshotcolor.plist"];

if ([[prefs objectForKey:@"enable"] boolValue]){
    color = [UIColor blueColor];
    %orig(color); }
else {
    %orig; }
}

%end 
```

请在这里帮助我

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T13:11:13.890

你应该检查你是否有

```
PROJECTNAME_FRAMEWORKS = UIKit Foundation 
```

还

```
#import <UIKit/UIKit.h> 
```

在你的tweak.xm（在顶部）像这样

```
#import <UIKit/UIKit.h>

%hook SBScreenFlash

-(void)flashColor:(id)color {

NSDictionary *prefs=[[NSDictionary alloc] initWithContentsOfFile:@"/var/mobile/Library/Preferences/com.junyi00.screenshotcolor.plist"];

if ([[prefs objectForKey:@"enable"] boolValue]){
    color = [UIColor blueColor];
    %orig(color); }
else {
    %orig; }
}

%end 
```

# java - Actionevent最终变量？

> ID：14814854
> 
> 赞同：1
> 
> 时间：2013-02-11T15:07:08.130
> 
> 标签：java, swing, awt

我有以下代码，在第 19 行出现错误“无法为最终变量计数分配值”，但我必须将此变量分配为最终变量才能在“监听器”中使用它。错误在哪里？

```
import java.awt.event.*;
import javax.swing.*;

public class ButtonTester
{
    public static void main(String[] args)
    {
        JFrame frame = new JFrame();
        JButton button = new JButton();
        frame.add(button);

        final int count = 0;

        class ClickListener implements ActionListener
        {
            public void actionPerformed(ActionEvent event)
            {
                count++;
                System.out.println("I was clicked " + count + " times");
            }
        }

        ActionListener listener = new ClickListener();
        button.addActionListener(listener);

        frame.setSize(100,60);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T15:11:13.620

`final`变量一旦赋值就不能修改。 解决方案是使变量成为 ClickListener 类的成员：

```
import java.awt.event.*;
import javax.swing.*;

public class ButtonTester
{
    public static void main(String[] args)
    {
        JFrame frame = new JFrame();
        JButton button = new JButton();
        frame.add(button);

        class ClickListener implements ActionListener
        {
            int count = 0;
            public void actionPerformed(ActionEvent event)
            {
                count++;
                System.out.println("I was clicked " + count + " times");
            }
        }

        ActionListener listener = new ClickListener();
        button.addActionListener(listener);

        frame.setSize(100,60);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T15:10:42.963

您在`ClickListener`类内使用 count ，但它是在类外声明的。你只是在里面使用它`ClickListener`，所以把声明移到那里。还不如使类静态：

```
 static class ClickListener implements ActionListener
    {
        private int count = 0;
        public void actionPerformed(ActionEvent event)
        {
            count++;
            System.out.println("I was clicked " + count + " times");
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T15:10:56.243

在 ClickListener 中移动变量，这才是你真正想要的。如果您将变量移到类之外，它必须是最终的，因为它将被视为常量。

# maven - 带有认可的外部目录的 Maven Jetty 插件

> ID：14814863
> 
> 赞同：1
> 
> 时间：2013-02-11T15:07:21.707
> 
> 标签：maven, jetty, endorsed

我有一个项目有一百多个外部库依赖项，这里我们使用 tomcat 并在服务器的一个目录上配置了这个背书的 jar 库（现在在 $CATALINA_HOME/lib/endorsed 下），所以 webapp 可以在运行时访问这些资源开始。

我想改用jetty，因为tomcat占用了太多内存并且经常崩溃。现在我想知道是否有一个参数可以传递给 maven-jetty-plugin 来指定这个 jar 的文件夹，以便 webapp 类加载器在其类路径中找到它们。

我在配置标签中尝试过extraClasspath，但它似乎只加载类并忽略我设置到的目录中的所有jar（如果我传递jar的全名路径，它会被加载，但我不想设置我在那里需要的每个图书馆）。

在此先感谢您的帮助

**更新**：我知道这不是标准的 maven 操作，我正在寻找紧急解决方法，因为这个项目非常庞大，我无法按照我的意愿进行重构。但我也预计这个功能并不像乍一看那样棘手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:45:50.487

您需要将它们作为绝对路径传递，或者将它们作为插件本身的依赖项。

你想做的事情违背了 Maven 的可移植性原则，所以不要指望它支持它。

# junit - 目前托管的 JUnit 的源代码在哪里？

> ID：14814865
> 
> 赞同：5
> 
> 时间：2013-02-11T15:07:31.700
> 
> 标签：junit

主[站点](http://junit.org/)说它现在托管在[GitHub 上](https://github.com/KentBeck/junit)，但是该页面现在是 404s。[搜索“JUnit”](https://github.com/search?q=junit&type=Repositories&ref=simplesearch)不会返回任何看起来像是主项目的内容，并且它没有被列为[Kent Beck 的存储库](https://github.com/KentBeck?tab=repositories)之一。

[SourceForge 站点](http://junit.sourceforge.net/)还指向 GitHub 站点。它还显示“ `We are deprecating our SourceForge installation.`” 此外，SourceForge 上托管的最新版本是 4.10，而最后发布的是 4.11。

那么，JUnit 的当前源代码托管在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T15:11:53.707

JUnit 的源代码托管在 GitHub 上：

[http://github.com/junit-team/junit](http://github.com/junit-team/junit)

以前它由一个成员托管：[KentBeck](https://github.com/KentBeck)，但现在它由一个 GitHub 公司托管：[junit-team](https://github.com/junit-team)，这就是您收到 404 的原因（回购是从会员转移到公司的）。

正如您所注意到的，他们没有使用这些信息更新他们的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:09:50.533

一段时间以来，jUnit 一直托管在 github：[https ://github.com/junit-team/junit](https://github.com/junit-team/junit)

# sed - 如何使用 sed 重复模式并使用“选项卡”进行修改

> ID：14814870
> 
> 赞同：0
> 
> 时间：2013-02-11T15:07:40.810
> 
> 标签：sed

我的输入看起来像这样用制表符分隔）：

```
Yadda yaddabla            blubb_1234          extremlylongtext, with commata
awesomo sappa             dwarf_775           extremlylongbutdifferenttext, with commata 
```

输出应该是：

```
Yadda yaddabla S23            blubb_1234      1234      extremlylongtext, with commata
awesomo sappa y5            dwarf_775       775       extremlylongbutdifferenttext, with commata 
```

因此，我只想在“_”字符后重复数字，并用制表符分隔。有什么建议么？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:11:58.140

```
sed 's/_\([[:digit:]]\{1,\}\)/_\1\t\1/g' 
```

我已经`\t`在输出中显示了一个指示选项卡。如果您不使用 GNU sed，则可能需要将其替换为文字选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:48:05.007

用于制表符分隔文件的 awk 解决方案

```
awk -F"\t" 'BEGIN{OFS="\t";}{$2 = gensub(/_([0-9]+)/,"_\\1\t\\1","g",$2);}1' temp.txt 
```

# c++ - 数据文件的 ld 使数据大小成为 *ABS* 而不是整数

> ID：14814872
> 
> 赞同：5
> 
> 时间：2013-02-11T15:07:48.050
> 
> 标签：c++, c, variables, pointers, ld

我有一个 c++ 程序，其中包含对空 xlsx 文件的外部依赖。为了消除这种依赖关系，我将此文件转换为二进制对象，以便直接链接它，使用：

```
ld -r -b binary -o template.o template.xlsx 
```

其次是

```
objcopy --rename-section .data=.rodata,alloc,load,readonly,data,contents template.o template.o 
```

使用 objdump，我可以看到声明的三个变量：

```
$ objdump -x template.o

template.o:     file format elf64-x86-64
template.o
architecture: i386:x86-64, flags 0x00000010:
HAS_SYMS
start address 0x0000000000000000

Sections:
Idx Name          Size      VMA               LMA               File off  Algn
  0 .rodata       00000fd1  0000000000000000  0000000000000000  00000040  2**0
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
SYMBOL TABLE:
0000000000000000 l    d  .rodata        0000000000000000 .rodata
0000000000000fd1 g       *ABS*  0000000000000000 _binary_template_xlsx_size
0000000000000000 g       .rodata        0000000000000000 _binary_template_xlsx_start
0000000000000fd1 g       .rodata        0000000000000000 _binary_template_xlsx_end 
```

然后我告诉我的程序这个数据：

```
template.h:
#ifndef TEMPLATE_H
#define TEMPLATE_H

#include <cstddef>
extern "C" {
  extern const char _binary_template_xlsx_start[];
  extern const char _binary_template_xlsx_end[];
  extern const int  _binary_template_xlsx_size;
}
#endif 
```

这可以很好地编译和链接，（尽管我在使用 cmake 自动化它时遇到了一些麻烦，请参见此处：[compile and add object file from binary with cmake](https://stackoverflow.com/questions/14776463/compile-and-add-object-file-from-binary-with-cmake)）

但是，当我在代码中使用 _binary_template_xlsx_size 时，它​​被解释为指向不存在的地址的指针。所以要获得我的数据大小，我必须通过`(int)&_binary_template_xlsx_size`（或`(int)(_binary_template_xlsx_end - _binary_template_xlsx_start)`）

一些研究告诉我，`*ABS*`上面 objdump 中的 表示“绝对值”，但我不明白为什么。如何让我的 c++（或 c）程序将变量视为 int 而不是指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:21:43.170

符号是`*ABS*`绝对地址；它通常是通过传递`--defsym foo=0x1234`给 ld 创建的。

> ```
> --defsym symbol=expression 
> ```
> 
> 在输出文件中创建一个全局符号，包含表达式给出的绝对地址。[...]

因为绝对符号是常量，所以不可能将它作为变量链接到 C 源文件中；所有 C 对象变量都有地址，但常量没有。

为确保您不会意外取消引用地址（即读取变量），最好将其定义为`const char []`与其他符号一样：

```
 extern const char _binary_template_xlsx_size[]; 
```

如果要确保将其用作`int`，可以使用宏：

```
 extern const char _abs_binary_template_xlsx_size[] asm("_binary_template_xlsx_size");
  #define _binary_template_xlsx_size ((int) (intptr_t) _abs_binary_template_xlsx_size) 
```

# javascript - JQuery 设置 CSS 显示：无什么时候应该被阻止

> ID：14814873
> 
> 赞同：0
> 
> 时间：2013-02-11T15:07:48.670
> 
> 标签：javascript, jquery, html, css

当用户选择选项卡时，我希望将文本文件加载到内容 div 中，内容被插入到 HTML 文件中，但内容 div 被设置为`style="display: none;`.

如何将其设置为`block`在选择相关选项卡并将所有其他内容div设置为隐藏的情况下将显示设置为以便设置为隐藏？

查询：

```
$(document).ready(function() {
  function resetTabs() {
    $("#content > div").hide();
    $("#tabs a").attr("id", "");   
  }

  var myUrl = window.location.href;
  var myUrlTab = myUrl.substring(myUrl.indexOf("#"));
  var myUrlTabName = myUrlTab.substring(0, 4);

  (function () {
    $("#content > div").hide(); 
    $("#tabs li:first a").attr("id", "current");
    $("#content > div:first").fadeIn(); 

    $("#tabs a").on("click", function (e) {
      e.preventDefault();
      if ($(this).attr("id") == "current") {
        return
      }
      else {
        resetTabs();
        $(this).attr("id", "current"); 
        $($(this).attr('name')).fadeIn();
      }
    });

    for (i = 1; i <= $("#tabs li").length; i++) {
      if (myUrlTab == myUrlTabName + i) {
        resetTabs();
        $("a[name='" + myUrlTab + "']").attr("id", "current");
        $(myUrlTab).fadeIn();
      }
    }
  })()
});

$(document).ready(function() {
  $("#tabContent1").load("test.txt");
  $('a[name="#tab2"]').click(function() {
    $("#tabContent2").load("test.txt");
  });
}); 
```

HTML：

```
<!DOCTYPE html> 
<html lang="en"> 
  <head> 
    <meta charset="utf-8" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="CSS/common.css" />
    <script src="JS/common.js"></script>
    <title></title> 
  </head>
  <body>
    <nav>
      <ul id="tabs">
        <li><a href="#" id="tab1" name="#tab1">Home</a></li>
        <li><a href="#" id="tab2" name="#tab2">History</a></li>
        <li><a href="#" id="tab3" name="#tab3">Specifications</a></li>
        <li><a href="#" id="tab4" name="#tab4">Gallery</a></li>    
      </ul>
    </nav>
    <div id="content">
      <div id="tabContent1"></div>
      <div id="tabContent2"></div>
      <div id="tabContent3"></div>
      <div id="tabContent4"></div>
    </div>
  </body>
</html> 
```

我也收到以下错误：

```
Uncaught TypeError: Object #tabContent2 has no method 'fadeIn'
i
st.event.dispatch 
st.event.add.y.handle 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:27:51.017

tabContent 和 tab 是如何连接的？尝试将选项卡的名称设置为实际的内容 ID，如下所示：

```
<nav>
  <ul id="tabs">
    <li><a href="#" id="tab1" name="#tabContent1">Home</a></li>
    <li><a href="#" id="tab2" name="#tabContent2">History</a></li>
    <li><a href="#" id="tab3" name="#tabContent3">Specifications</a></li>
    <li><a href="#" id="tab4" name="#tabContent4">Gallery</a></li>    
  </ul>
</nav>
<div id="content">
  <div id="tabContent1"></div>
  <div id="tabContent2"></div>
  <div id="tabContent3"></div>
  <div id="tabContent4"></div>
</div> 
```

这样你的函数 $($(this).attr('name')).fadeIn(); 应该工作得更好一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:58:05.023

试试这个你的淡入淡出

```
var title = $('#current').attr('name');
$(title).fadeIn() 
```

代替

```
 $($(this).attr('name')).fadeIn(); 
```

（哎呀检查编辑）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T22:15:38.060

使用@Jaco Koster JSFiddle 和以下 JQuery 的组合让它工作。

```
$(document).ready(function () {
  $("#tabContent1").load("test.txt");

  $('a[name="#tabContent1"]').click(function () {
    $("#tab2").removeClass('activeTab');
    $("#tab3").removeClass('activeTab');
    $("#tab4").removeClass('activeTab');
    $(this).addClass('activeTab');
    $("#tabContent1").load("test.txt");
    $("#tabContent1").show();
    $("#tabContent2").hide();
    $("#tabContent3").hide();
    $("#tabContent4").hide();
  });

  $('a[name="#tabContent2"]').click(function () {
    $("#tab1").removeClass('activeTab');
    $("#tab3").removeClass('activeTab');
    $("#tab4").removeClass('activeTab');
    $(this).addClass('activeTab');
    $("#tabContent2").load("test2.txt");
    $("#tabContent2").show();
    $("#tabContent1").hide();
    $("#tabContent3").hide();
    $("#tabContent4").hide();
  });

  $('a[name="#tabContent3"]').click(function () {
    $("#tab1").removeClass('activeTab');
    $("#tab2").removeClass('activeTab');
    $("#tab4").removeClass('activeTab');
    $(this).addClass('activeTab');
    $("#tabContent3").load("test3.txt");
    $("#tabContent3").show();
    $("#tabContent1").hide();
    $("#tabContent2").hide();
    $("#tabContent4").hide();
  });

  $('a[name="#tabContent4"]').click(function () {
    $("#tab1").removeClass('activeTab');
    $("#tab2").removeClass('activeTab');
    $("#tab3").removeClass('activeTab');
    $(this).addClass('activeTab');
    $("#tabContent4").load("test4.txt");
    $("#tabContent4").show();
    $("#tabContent1").hide();
    $("#tabContent2").hide();
    $("#tabContent3").hide();
  });
}); 
```

# qooxdoo - qx.ui.mobile.list.List 的 createItem

> ID：14814875
> 
> 赞同：0
> 
> 时间：2013-02-11T15:07:53.150
> 
> 标签：qooxdoo

qx.ui.mobile.list.List 好像不支持 qx.data.controller.List。是否有另一种方法可以为 createItem 添加委托？我尝试在两个类上添加创建委托，但未调用 createItem。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:58:03.990

这是一个示例，如何将数据绑定与列表一起使用：

```
/**
 * Creates a list and returns it.
 */
__createListDataBindings : function() {
  var self = this;

  var list = new qx.ui.mobile.list.List({
  configureItem : function(item, data, row)
    {
      var stopCount = self.getListData().getLength()-row;
      item.setTitle("Stop #"+stopCount);
      item.setSubtitle(data);
    }
  });
  this.bind("listData", list, "model");

  return list;
}, 
```

ListData 是一个类属性：

```
 properties :
  {
    // overridden
    listData :
    {
      init : new qx.data.Array(),
      nullable : true,
      event : "updateListData"
    }
  }, 
```

# c++ - 从一个巨大的列表中删除大量的字符串

> ID：14814876
> 
> 赞同：3
> 
> 时间：2013-02-11T15:07:58.697
> 
> 标签：c++, performance, list

我有**一大串字符串**存储在一个巨大的内存块中（通常有 100k+ 甚至 1M+）​​。这些实际上是散列，因此字符串的字母表仅限于 A-F0-9，并且每个字符串的长度正好为 32 个字节（因此其存储的“压缩”）。从现在开始，我将把这个列表称为**主列表**。

我希望能够从主列表中**删除项目。**这通常是批量完成的，所以我得到一个大的哈希列表（通常大约 100 到 10k），我需要在这个列表中找到并删除它们。在这个操作结束时，大内存块中不能有任何空块，所以我需要考虑到这一点。不能保证所有项目都在主列表中，但没有一个项目会多次出现。不能重新分配，主块将始终保持相同的大小。

**遍历主列表并检查是否应删除给定哈希**的幼稚方法当然****可行，但有点慢**。此外，小内存块的移动有点过多，因为每次将哈希标记为删除时，我都会用主列表的最后一个元素重写它，从而满足没有空块的条件。这当然会创建**数以千计的小型 memcpy**，这反过来又会减慢速度，因为我有大量的缓存未命中。**

 ****有更好的方法吗？**

一些重要的注意事项：

*   主列表未排序，我不能浪费时间对其进行排序，这是整个项目施加的限制并重写它，因此列表始终排序不是一个选项（甚至可能不可能）
*   内存不是问题，但越少越好
*   我可以使用 STL，但不能提升

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:44:30.813

好的，如果我绝对必须优化这个地狱，这就是我会做的。我假设顺序无关紧要，这似乎是您（IIUC）通过将它们与最后一个项目交换来删除项目的情况。

*   存储 128 位整数（无论您如何表示它们，您的编译器都支持它们，或者您使用一个 32/64 位整数的小数组）而不是 32 字符字符串。请参阅我对这个问题的评论。
*   滚动我自己的 128 位整数哈希集。请注意，如果您愿意考虑一下，做出一些假设，然后变得肮脏，那么您可以在这里进行*很多优化。*一些注意事项：
    *   您只需要存储哈希本身（用于解决冲突），以及一两个元数据来识别已删除/未使用的插槽。如果您不确定如何保证正确性，请查看现有哈希表的功能。我认为如果您在构建哈希集后只删除（而不是添加）它会更简单。尽管我认为如果您的值不是表示空插槽的有效哈希值，您甚至可以不使用该元数据，但这种方式更容易删除（只需翻转一点，而不是覆盖 128 位）。
    *   您不需要哈希函数，因为您的输入已经是整数。无论如何，您只需要执行每个哈希表都会执行的操作：将哈希模 2^n 以派生一个不那么大的索引。选择 n 使得负载因子（使用的表条目的百分比）是合理的（< 2/3 似乎是标准的）。选择 的幂可以使模运算更便宜（通过二进制 AND 屏蔽位），并允许您仅在较低的 32 位或 64 位上执行此操作（忽略其余位）。
    *   选择冲突解决策略很困难。作为第一次尝试，我可能会使用线性探测的[开放寻址。](http://en.wikipedia.org/wiki/Hashtable#Open_addressing)它*可能*效果不佳，但如果您的输入哈希值很好，这似乎不太可能。还有一个探测方案，它考虑了你最初切断的越来越多的位，由[CPython 的`dict`](http://hg.python.org/cpython/file/d12785ecca72/Objects/dictobject.c#l113).

现在，这比使用现成的解决方案要多得多的工作和维护负担。除非这确实像您的描述中听起来那样对性能至关重要，否则我不会建议这样做。如果 C++11 是一个选项，并且您的编译器`unordered_set`很好，也许您应该使用它并省去大部分麻烦（但请注意，这可能会增加内存需求）。你仍然需要专门化`std::hash`and `std::equal_to`or `operator==`。替代提供您自己的`Hash`和`KeyEqual`for `unordered_set`，但这可能不会提供任何好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:31:22.773

有两件事可能会有所帮助。首先，至少对要移除的项目列表进行排序；这样，您可以`std::lower_bounds`对其使用二进制搜索 ( )。其次，保留两个指针：源和目标。如果源指向的内容不在要删除的列表中，请将其复制到目标，然后将两者都推进。如果源指向要删除的东西，只需推进源指针，不复制。永远不应该有理由多次复制条目。**

# javascript - 全局 Javascript 变量的值在获取时是错误的

> ID：14814881
> 
> 赞同：0
> 
> 时间：2013-02-11T15:08:05.777
> 
> 标签：javascript, asp.net-mvc, iis-6

我已经准备好从 php mvc 应用程序到 asp.net mvc 的端口（使用大量 javascript 和 google 地图）。该应用程序在我的开发机器（Win 7 + IIS 7）上运行良好。但是问题从生产服务器开始。出于某种原因，我有一个 javascript 文件，当我在生产服务器上使用它时，它无法正常工作。即我有我的观点，我从数据库加载所有数据，然后我把它放在一个名为 global_sites_am 的全局变量数组中。数组中的每一行都包含纬度、经度和名称等属性。之后，从名为 maps.js 的 js 文件中读取该数组。

```
var position = new google.maps.LatLng(global_sites_am[i].latitud,global_sites_am[i].longitud);
        addMarker(position,global_sites_am[i].name,i); 
```

出于某种原因，这段代码在我的开发机器上运行良好，但当我在生产服务器上安装应用程序时却不行。

开发机器上的 IE：`global_sites_am[0].latitud = 45,6789566 and global_sites_am[i].longitud=72,69452015`

但在生产机器上：`global_sites_am[0].latitud = 45 and global_sites_am[i].longitud=72`

我做错了什么？

更新：这是我将值从 db 加载到 javascript 文件的方式：

```
global_sites_am[count]=new Object();
global_sites_am[count].name='<%=site.Name%>';
global_sites_am[count].latitud=<%=site.Latitud%>;
global_sites_am[count].longitud=<%=site.Longitud%>; 
```

这是我的属性之一：

```
 [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.Double Latitud
    {
        get
        {
            return _Latitud;
        }
        set
        {
            OnLatitudChanging(value);
            ReportPropertyChanging("Latitud");
            _Latitud = StructuralObject.SetValidValue(value);
            ReportPropertyChanged("Latitud");
            OnLatitudChanged();
        }
    } 
```

来自 Chrome 的一些调试信息：http: [//oi49.tinypic.com/2j4q7p4.jpg](http://oi49.tinypic.com/2j4q7p4.jpg)。在图像中，您将看到当前加载到页面中的值是正确的，但此时读取它们是错误的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:49:36.180

最后，使用 web.config 上的下一行解决了问题：

全球化 uiCulture="en-US"culture="en-US"

# c# - WPF 窗口加载的等待屏幕

> ID：14814882
> 
> 赞同：4
> 
> 时间：2013-02-11T15:08:08.013
> 
> 标签：c#, .net, wpf, wpftoolkit

我正在从某个窗口 window1 导航到 Mainwindow

在我的 MainWindow_loaded 方法中，我有太多的计算，所以当我导航到主窗口时，窗口会变白，直到所有计算完成并加载窗口

我在 MainWindow 中尝试过

```
 private void MainWindow_Loaded_1(object sender, RoutedEventArgs e)

 BackgroundWorker worker = new BackgroundWorker();

       worker.DoWork += (o, ea) =>
        {
             do large computation
          };

          worker.RunWorkerCompleted += (o, ea) =>
           {

               _busy.IsBusy = false;
          };
         _busy.IsBusy = true;
         worker.RunWorkerAsync();

} 
```

但问题是它导航到主窗口而不计算加载的事件处理程序中的必要数据，甚至没有在 UI 中显示等待栏？? 是否可以在 MainWindow_Loaded 中显示等待栏和所有数据计算？

我已将 ExtendedWpfToolkit 用于 _busy ，它是忙碌指示符

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T16:10:20.133

你可以使用`BusyIndicator`控制。它是[扩展 WPF 工具包的一部分。](http://wpftoolkit.codeplex.com/)

我已经使用它创建了一个示例应用程序。下面是显示循环计数的应用程序的屏幕截图。

![等待画面](../Images/41e9b73767502d5063b3e419e99e95a8.png)

[这](http://wpftoolkit.codeplex.com/wikipage?title=BusyIndicator)是有关如何使用它的教程。

示例代码。

注意：您需要下载工具包并`Xceed.Wpf.Toolkit.dll`在您的项目中添加对的引用。

XAML 代码：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:WPFTool="clr-namespace:Xceed.Wpf.Toolkit;assembly=Xceed.Wpf.Toolkit"
        Title="MainWindow" Height="200" Width="300" Loaded="Window_Loaded">
    <WPFTool:BusyIndicator Name="BusyIndicator">
        <Grid>
        </Grid>
    </WPFTool:BusyIndicator>
</Window> 
```

代码隐藏：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.ComponentModel;
using System.Threading;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {
            BusyIndicator.IsBusy = true;
            BusyIndicator.BusyContent = "Initializing...";
            BackgroundWorker worker = new BackgroundWorker();
            worker.DoWork += (o, a) =>
                {
                    for (int index = 0; index < 5; index++)
                    {
                        Dispatcher.Invoke(new Action(() =>
                        {
                            BusyIndicator.BusyContent = "Loop : " + index;
                        }), null);
                        Thread.Sleep(new TimeSpan(0, 0, 1));
                    }
                };
            worker.RunWorkerCompleted += (o, a) =>
                {
                    BusyIndicator.IsBusy = false;
                };
            worker.RunWorkerAsync();
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T15:15:35.100

您可以订阅后台工作人员以报告进度。

```
worker.WorkerReportsProgress = true; 
```

现在，您可以通过订阅的事件触发此进度报告。

```
worker.ProgressChanged += new ProgressChangedEventHandler(worker_ProgressChanged); 
```

这样做时，您可以创建一个进度条，该进度条可以基于此`worker_ProgressChanged`事件自行更新，由您的计算触发。

看来你已经想通了`IsBusy`，所以只有当这是真的时，你才能让你的进度条显示出来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:12:03.017

一种选择是创建一个覆盖层，其可见性取决于 IsBusy，一旦我不在手机上就会出现示例

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-26T06:18:13.857

最简单的方法是使用带有 xaml 的 WPF 进度条，下面是代码：

`<ProgressBar IsIndeterminate="True" Visibility="True"/>`

其中 IsIndeterminate 'true' 的行为类似于等待进度，而 'false' 将显示确切的进度。当您想显示时，还设置可见性，如果您用作等待进度，则在隐藏时设置可见性。

# sql-server - SQL Server 视图何时更新？

> ID：14814884
> 
> 赞同：5
> 
> 时间：2013-02-11T15:08:13.580
> 
> 标签：sql-server, view

我有两个表，每个表大约有 500k 行（并且还在增长）。这些不断发生插入/更新，有时每分钟 100 次。系统在基本插入这些表时存在性能问题，即超时。我们已经调整了索引，并进行了通常的优化。但我想知道这两个表在 5 个视图中被大量连接引用的事实是否可能是有害的。我一直认为，也许是错误的，随着基础表的变化，引用它们的视图也会发生变化。因此，如果表格变化如此之大，那么我们的系统可能会因为不得不不断地追赶更新视图而不堪重负。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-11T15:28:37.987

*除非*它们是[索引视图](http://msdn.microsoft.com/en-us/library/ms191432.aspx)（您在问题中没有提到这一点），否则它们根本不会“更新”。

普通视图类似于 C 中的宏——它们只是隐藏较大表达式的一部分的便捷简写。它们被扩展为引用它们的任何语句的解析树，然后在使用点编译和优化整个树。

* * *

对于索引视图，您在很大程度上是正确的 - 视图作为在基表中执行更改的同一事务的一部分进行维护。但是，索引视图的规则已经过设计，因此此更新活动不应招致太大的损失（无需重新查询整个基表即可维护它们）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T16:10:21.847

这取决于：

1) 如果视图没有被索引，则视图被展开

```
-- View definition
CREATE VIEW Sales.v_SalesOrderDetail
AS
SELECT  h.SalesOrderID, h.SalesOrderNumber, h.OrderDate, 
        d.SalesOrderDetailID, d.OrderQty, d.UnitPrice, d.LineTotal, 
        p.ProductID, p.Name AS ProductName, p.Color AS ProductColor
FROM    Sales.SalesOrderHeader h
INNER JOIN Sales.SalesOrderDetail d ON h.SalesOrderID = d.SalesOrderID
INNER JOIN Production.Product p ON d.ProductID = p.ProductID
GO

-- View usage
SELECT  v.SalesOrderDetailID, v.OrderQty, v.UnitPrice, v.ProductName
FROM    Sales.v_SalesOrderDetail v
WHERE   v.ProductColor='Red';
GO 
```

如果我们查看执行计划（SSMS：Ctrl + M）， ![在此处输入图像描述](../Images/5d6ecdff9f6650e087a0dffbb6588817.png) 我们会看到视图（`FROM Sales.v_SalesOrderDetail v`）被展开，服务器只查询两个表：`Sales.SalesOrderDetail d`和`Production.Product p`。此外，我们可以看到和之间的连接是如何`Sales.SalesOrderHeader h`被`Sales.SalesOrderDetail d`删除的，因为：

*   `SELECT`子句 ( `SELECT v.SalesOrderDetailID, v.OrderQty, v.UnitPrice, v.ProductName`) 不包括表中的列`Sales.SalesOrderHeader`，

*   在这两个表之间有一个外键约束和

*   这个 FK 约束是可信的。

2）如果视图被索引（意味着视图上有`UNIQUE CLUSTERED INDEX`定义）并且SQL Server版本是企业版，那么视图可以扩展**或不**扩展。如果 edition <> enterprise 则展开索引视图。我们可以通过使用提示强制服务器*不展开*[indexed] 视图：`NOEXPAND`

```
-- View definition
CREATE VIEW Sales.v_SalesOrderDetail2
WITH SCHEMABINDING
AS
SELECT  h.SalesOrderID, h.SalesOrderNumber, h.OrderDate, 
        d.SalesOrderDetailID, d.OrderQty, d.UnitPrice, d.LineTotal, 
        p.ProductID, p.Name AS ProductName, p.Color AS ProductColor
FROM    Sales.SalesOrderHeader h
INNER JOIN Sales.SalesOrderDetail d ON h.SalesOrderID = d.SalesOrderID
INNER JOIN Production.Product p ON d.ProductID = p.ProductID
GO

-- Defining the UNIQUE CLUSTERED INDEX
CREATE UNIQUE CLUSTERED INDEX PK_v_SalesOrderDetail2
ON Sales.v_SalesOrderDetail2 (SalesOrderDetailID);
GO

-- View usage
SELECT  v.SalesOrderDetailID, v.OrderQty, v.UnitPrice, v.ProductName
FROM    Sales.v_SalesOrderDetail2 v WITH (NOEXPAND)
WHERE   v.ProductColor='Red';
GO 
```

在这种情况下，我们可以看到执行计划中 ![在此处输入图像描述](../Images/8758018e93cfcfd6bad1f2f0a4b76867.png) 包含了`Clustered Index Scan PK_v_SalesOrderDetail2`操作符。因此，它使用在第二个视图上定义的索引。

请注意：[SQL Server 错误索引视图 + MERGE](http://sqlblog.com/blogs/paul_white/archive/2013/02/06/incorrect-results-with-indexed-views.aspx)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-11T15:11:22.930

SQLServer 视图没有缓存，因此每次请求视图时都会执行查询

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-06-08T10:25:35.657

调整索引很好，但可能值得考虑更新这些索引的统计信息的频率和时间。此外，使用缓冲表来保存插入，然后可以每隔 5 或 10 分钟或任何适合您的系统的批量操作插入这些插入可能会有所帮助（将其放在单独的物理磁盘上是个好主意。）这样做会使在 90% 的时间里选择快得多，在其他 10% 的时间里不会比当前差多少。

# django - Django 和 Bootstrap 的格式化问题

> ID：14814885
> 
> 赞同：0
> 
> 时间：2013-02-11T15:08:14.020
> 
> 标签：django, twitter-bootstrap, django-templates

我刚刚在我的 Django 站点上安装了 Bootstrap。我已按照几个教程的说明进行操作。

但是，当我通过 Django 服务器查看页面时，它只是基于文本的，没有任何格式。离线查看同一页面（仅在网络浏览器中打开）并且该页面具有所有 Bootstrap 格式。

因此，在线查看格式似乎不起作用。我在这里遵循了教程：' [https://docs.djangoproject.com/en/dev/howto/static-files/](https://docs.djangoproject.com/en/dev/howto/static-files/) '

然而仍然没有运气。

我的模板：

```
{% load staticfiles %}
    <link href="{{ STATIC_URL }}bootstrap/css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
      }
    </style>
  </head> 
```

我的设置：

```
STATIC_ROOT = 'C:/Users/Dummy/Documents/Django/ParkManager/static/'
STATIC_URL = 'http://127.0.0.1:8000/static/' 
```

……

```
 INSTALLED_APPS = (
        'django.contrib.auth',
        'django.contrib.contenttypes',
        'django.contrib.sessions',
        'django.contrib.sites',
        'django.contrib.messages',
        'django.contrib.staticfiles',
        'Parks',
        'django_admin_bootstrapped',
        'django.contrib.staticfiles', 
```

我的观点

```
from django.template.response import TemplateResponse

def Search_Page(request):
    return TemplateResponse(request, 'Details_Main.html', {'request':'index'}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:52:24.790

好的，您的视图对真实的请求上下文一无所知。

请使用类似的东西

```
from django.template.response import TemplateResponse
...
return TemplateResponse(request, "Details_Main.html", {
    "object": some_object,   # only if you have something to add into the context. otherwise leave the dictionary empty.
}) 
```

# java - 试图将 VARCHAR () FOR BIT DATA '（未显示二进制数据值）' 缩小到长度 255

> ID：14814886
> 
> 赞同：0
> 
> 时间：2013-02-11T15:08:14.757
> 
> 标签：java, hibernate, jakarta-ee, jpa, derby

我有一个`Market`实体

```
@Entity
public class Market extends MutableEntity {

    @Column(nullable = false)
    private String name;
    @Column
    private String description;
    @Embedded
    private Version marketVersion; // snipped 
```

和`Version`实体为

```
@Embeddable
public class Version {
    private double versionNumber;
    private VersionType versionType;
    private DateTime publishedOn;
    private DateTime retiredOn;
    private double parentVersionNumber; //snipped 
```

当我尝试测试以下内容时，它失败了

```
 @Test
    public void testCloneMarket() {
        final String name = "testCloneMarket";
        final String description = "testCloneMarket";
        final Market existingMarket = new MarketManager(crudService).addMarket(name, description);

        // publish market
        existingMarket.getMarketVersion().setPublishedOn(new DateTime()); // fails here

        assertNotNull(existingMarket);
    } 
```

我看到错误为

```
testCloneMarket(com.myorg.project.versioning.business.MarketManagerTest)  Time elapsed: 4.11 sec  <<< ERROR!
javax.persistence.RollbackException: Error while committing the transaction
    at org.hibernate.ejb.TransactionImpl.commit(TransactionImpl.java:90)
    at com.myorg.toolkit.commons.persistence_testing.rules.JpaRule.commitOrRollbackTransaction(JpaRule.java:220)
    at com.myorg.toolkit.commons.persistence_testing.rules.JpaRule.changeTransaction(JpaRule.java:155)
    at com.myorg.project.versioning.business.MarketManagerTest.testCloneMarket(MarketManagerTest.java:63)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
    at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)
    at org.junit.rules.RunRules.evaluate(RunRules.java:20)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
    at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
    at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)
Caused by: javax.persistence.PersistenceException: org.hibernate.exception.DataException: A truncation error was encountered trying to shrink VARCHAR () FOR BIT DATA '(Binary data value not displayed)' to length 255. 
```

我正在使用`derby`内存测试。为什么会发生这种情况，解决方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:13:59.060

我找不到`setPublishedOn`.

只有一个尝试！

```
DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
Date date = new Date();
existingMarket.getMarketVersion().setPublishedOn(dateFormat.format(date)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:58:25.920

目前尚不清楚哪一列出现截断错误。

您可以尝试通过完全展开异常链从异常链中获取更多信息：[请参阅此建议](http://wiki.apache.org/db-derby/UnwindExceptionChain)。

或者，如果您可以找到您的 derby.log 文件，并且可以使用 -Dderby.language.logStatementText=true 运行您的应用程序，您应该能够看到更多详细信息。

Derby 数据类型[VARCHAR FOR BIT DATA](http://db.apache.org/derby/docs/10.9/ref/rrefsqlj32714.html#rrefsqlj32714)支持高达 32,672 字节的指定长度。没有默认长度，因此 256 字节长度必须是您在应用程序或用于实现持久层的框架之一中设置的值。

如果您可以确定持久层在哪里生成表模式，您应该能够覆盖它并为 VARCHAR FOR BIT DATA 列选择不同的长度。

# objective-c - NSMutableArray 在最后一个对象之前删除对象 1

> ID：14814887
> 
> 赞同：0
> 
> 时间：2013-02-11T15:08:15.597
> 
> 标签：objective-c, ios6, nsmutablearray

我有很多`UIImageView`，`NSMuatableArray`我需要从视图中删除某个`UIImageView`，但我认为如果我释放`UIImageView`它，它仍然会在数组中。

我不想这样，但有一个小问题。我需要删除的`UIImageView`正是数组中最后一个对象之前的 1 个对象，所以我不能使用`removeLastObject`. 我确实知道标签号，但我不能这样写，因为我会在使用它时更改数组。

```
for (UIImageView *k in array1) {
    if (k.tag==tagzahl-1) {
       if (x==1){
          [k removeFromSuperview];
          [array1 remove object:k];
       }
    }
} 
```

我正在使用：`[array1 addObject:myimage];`将`UIImageView`s 添加到数组中，所以我不知道索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:10:01.500

```
if ([array1 count] >= 2)
{
    NSUInteger index = [array1 count] - 2;
    UIImageView *view = [array1 objectAtIndex:index];
    [array1 removeObjectAtIndex:index];
    [view removeFromSuperview];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:14:19.023

如果您知道您所说的那个标签，那么

```
UIView *view = [viewContainingImageView viewWithTag:tagzahl-1];
[view removeFromSuperview];
[array1 removeObject:view]; 
```

# ruby - 无法在 ruby 中将字符串写入 attr_accessor

> ID：14814888
> 
> 赞同：0
> 
> 时间：2013-02-11T15:08:17.257
> 
> 标签：ruby

请告诉我我在这里做错了什么。我希望能够通过方法将稍后在代码中添加的任何字符串大写`titles`。

```
class Book
  attr_accessor :book_title

  def initialize
       @book_title = String.new
     end

  def titles
    book_title.capitalize
  end

end

@book = Book.new
puts @book.titles = "steve jobs" 
```

因为当我执行它时，我得到`undefined method `titles=' for #<Book:0x007fbd25813d98 @book_title=""> (NoMethodError)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:12:59.107

你想要完成什么有点不清楚。您正在添加`attr_accessor`for `book_title`，而不是 for `titles`（根本不是变量）。你需要打电话

```
puts @book.book_titles = "Steve Jobs" 
```

为了设置（和打印）标题。

如果您尝试将标题传递给`titles`并让该方法将标题大写并设置为该标题`@book_title`，则需要使用 将其声明为赋值方法`=`，传入参数`title`并实际设置`@book_title`为该方法。像这样的东西

```
def titles= title
  @book_title = title.capitalize
end 
```

目前您的`titles`方法只返回大写的局部变量`book_title`，它不存在（它需要`@`引用实例变量）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:36:45.783

它说“未定义的方法标题=”，因为您还没有定义一个名为`titles=`. 相反，`attr_accessor`（Ruby 的许多[误导性名称](http://codelikethis.com/lessons/ruby/bad_names)之一）定义了两种方法，在您的情况下名为`book_title`and `book_title=`。然后你添加`titles`. 这些都没有被命名`titles=`（等号很重要）。

您的`titles`方法（顺便说一句，您应该弄清楚它是单数还是复数）与 冗余`book_title`，这会导致混乱。作为第一次看到这段代码的人——或者在休息后再次看到这段代码——我怎么知道要调用哪个方法？

您需要决定是在输入时（在 setter 期间）还是在输出时（在 getter 期间）将字符串大写。无论您做什么，我都建议您暂时停止使用`attr_accessor`，并明确定义一个 getter 和一个 setter ( `def title`and `def title=`)，直到您清楚它们在做什么。`attr_accessor`宏只是一个简写；你应该先学习速记。

# sql-server - 动态 ISAPI 重写

> ID：14814891
> 
> 赞同：-1
> 
> 时间：2013-02-11T15:08:30.173
> 
> 标签：sql-server, asp-classic, isapi-rewrite

我有一些网站可以从一些 URL 重写中受益。我知道需要一个地图文件，但由于数据是动态的，有没有办法从 SQL 数据库而不是静态文件调用？

通过 IIS7 使用 ISAPI 重写

例如不友好 - www.domain.com/products.asp?prodID=1 友好 - www.domain.com/products/Apples

任何示例或指针都会受到赞赏。提前致谢。C ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:37:01.010

一种可能的解决方案是使用自定义 404 处理程序来执行此操作......当用户点击 /products/apples 时，404 处理程序将其拾取，进行数据库查找并将其匹配回 prodID=1 并显示正确的内容。

它不是特别优雅，但它可以工作（我过去曾使用过它，只要你记得诸如返回正确的内容的 HTTP 响应头与真正的 404 之类的东西，你应该没问题）

大多数人最终会使用 ISAPI_Rewrite 之类的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:21:01.063

创建一个新的 .asp 页面，该页面使用产品的 url 名称检索产品。新页面应该类似于您现有的 products.asp 页面，但不是使用 id 获取产品，而是使用唯一 url 名称获取产品。

```
RewriteRule ^products/(.*)$ /productfromurlname.asp?urlname=$1 [NC,L] 
```

这边走：

```
/products/apples --> /productfromurlname.asp?urlname=apples
/products/oranges --> /productfromurlname.asp?urlname=oranges 
```

# linux - 如何使用 awk 查找具有相似文件名的文件以及其中有多少

> ID：14814896
> 
> 赞同：0
> 
> 时间：2013-02-11T15:08:46.340
> 
> 标签：linux, shell, file-io, awk

我的任务是从我们的 Linux 数据库中删除旧的备份文件（除了最新的 3 个）。由于我们有多种备份，我必须为每种备份类型保留至少 3 个备份文件。

我的脚本应该将具有相似（匹配）名称的所有文件组合在一起，并删除除最后 3 个文件之外的所有文件（我假设操作系统将为我对这些文件进行排序，因此最新的备份也将是最后的备份）

这些文件的格式可以是任意数字，`project_name.000000-000000.svndmp.bz2`也可以是任意名称。前 6 位数字是名称的一部分，而后 6 位数字描述备份的版本。`0``project_name`

到目前为止，我的代码如下所示：

```
for i in *.svndmp.bz2 # only check backup files
do
    nOfOccurences = # Need to find out, how many files have the same name
    currentFile = 0
    for f in awk -F"[.-]" '{print $1,$2}' $i # This doesn't work
    do
        if [nOfOccurences - $currentFile -gt 3]
        then
            break
        else
            rm $f
            currentFile++
        fi
    done
done 
```

我知道，我的脚本可能会尝试删除旧版本的备份 4 次，然后再进行下一次备份。我不是在寻找性能或效率（我们没有那么多备份）。

我的代码是在网上搜索了 4 个小时的结果，而我的谷歌查询已经用完了（我的老板开始想知道为什么我仍然没有回到我的日常任务中）

任何人都可以给我意见，我可以如何解决我的问题？

*   寻找`nOfOccurences`
*   让 awk 找到适合模式的文件`"$1.$2-*"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:21:49.827

试试这个，看看它是否符合您的要求。

```
for project in `ls -1 | awk -F'-' '{ print $1}' | uniq`; do
    files=`ls -1 ${project}* | sort`
    n_occur=`echo "$files" | wc -l`
    for f in $files; do
        if ((n_occur < 3)); then
           break
        fi
        echo "rm" $f;
        ((--n_occur))
    done
done 
```

如果输出似乎没问题，只需更换 echo 行。啊，如果有什么属于自己的，请不要打我。使用风险自负。

# sql - 来自多部分 JOIN 的 SUM()

> ID：14814903
> 
> 赞同：3
> 
> 时间：2013-02-11T15:09:11.367
> 
> 标签：sql, join, sum

```
SELECT SUM(t.OptLevel) + SUM(o.ReqLevel1) + SUM(b.nOptValue) FROM _Inventory AS i 
        LEFT JOIN _Items AS t ON t.ID64 = i.ItemID
        LEFT JOIN _RefObjCommon AS o ON o.ID = t.RefItemID
        LEFT OUTER JOIN _BindingOptionWithItem AS b ON b.nItemDBID = i.ItemID 
        WHERE i.CharID = 7843 AND i.Slot BETWEEN 0 AND 12 AND i.ItemID != 0 
```

我在处理这个查询时遇到了问题，我对加入的经验并不如我所愿。

`t.OptLevel`总是 >= 0 从`_Items`并且该行总是在那里

`o.ReqLevel1`始终在 1 到 101 之间，`_RefObjCommon`并且该行始终存在

但是，`b.nOptValue`from`_BindingOptionWithItem`是来自并不总是存在的行的 NULL、1 或 2...当`b.nOptValue`= 1 或 2 出现在 12 行结果之一（ i.Slot BETWEEN 0 AND 12 ）中时，脚本运行完美：我得到一个总和，但如果`b.nOptValue`在所有 12 行结果中返回 NULL，则整个查询的总和返回 NULL。

我知道有一个简单的解决方案，但我找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:24:21.490

在不理解您的问题的情况下，有一个很酷的函数`COALESCE()`，它返回其第一个不为空的参数。

```
SELECT COALESCE(SUM(t.OptLevel), 0) + COALESCE(.... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:24:25.253

问题是`NULL + <anyvalue>`NULL。

你要：

```
SELECT coalesce(SUM(t.OptLevel), 0) + coalesce(SUM(o.ReqLevel1), 0) + coalesce(SUM(b.nOptValue) , 0)
. . . 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T15:25:14.030

我可能会从这样的事情开始：

```
SELECT SUM(t.OptLevel) + SUM(o.ReqLevel1) + COALESCE(SUM(b.nOptValue), 0)
FROM _Inventory AS i 
    JOIN _Items AS t ON t.ID64 = i.ItemID
    JOIN _RefObjCommon AS o ON o.ID = t.RefItemID
    LEFT JOIN _BindingOptionWithItem AS b ON b.nItemDBID = i.ItemID 
WHERE i.CharID = 7843
    AND i.Slot BETWEEN 0 AND 12
    AND i.ItemID != 0 
```

如果一个连接总是有一个匹配，那么就不需要外连接（包括左连接）。如果您可能找不到匹配项，则需要左连接，然后利用`COALESCE`，它返回它可以找到的第一个非空值，这可能是您提供的常量（在本例中为 0）。

# ajax - 一些 jQuery $.ajax 调用后网站性能下降

> ID：14814908
> 
> 赞同：0
> 
> 时间：2013-02-11T15:09:25.930
> 
> 标签：ajax, performance, jquery

我承认我对完整的 ajax 网站非常陌生，所以我肯定会犯一些错误。

问题是这样的：在[http://lamovida.arabianessence.com](http://lamovida.arabianessence.com)

每个页面都使用此函数加载了 $.ajax 调用

```
function getAjaxPage() {
  $('a.ajaxc').click(function() {
$("li.page_block").find(".wrapper").fadeOut(400).remove();
  hideSplash();
  var $thishref = $(this).attr('href'),
      $thisurl = $thishref.replace("#!/",""),
      $urlArr = $thisurl.split('-'),
      $urlOk = $urlArr[0],
      $dataOk = $urlArr[1];

      $.ajax({
        url : $urlOk + ".php",
    data :  'id='+$dataOk,
    success : function (data,stato) {
      $("#content").css({opacity:1}).fadeIn(400);
      $("li.page_block").html(data);
      $("li.page_block").css('visibility', 'visible');
      $("li.page_block").find(".wrapper").css({opacity:0}).show().animate({opacity:1},1000);

                var $whgt = $(".wrapper").height(),
                    $ctop = ( ( $(window).height() - $whgt ) /2 )-40;

                $("#content").stop().animate({height: $whgt+40, top: $ctop},1000);
                $("li.page_block").css('padding-top',20);

                $('.scrollable').jScrollPane();
                $('.slider>ul>li').jScrollPane();

                getAjaxPage();
            },
            error : function (richiesta,stato,errori) {                     
                alert(errori);
            }
        });
  });
} 
```

每次调用此函数时，内容的加载速度都会变慢，大约 20 次点击后，情况变得非常糟糕，加载时间越来越长。

我尝试使用谷歌浏览器的时间线来分析情况，我发现每次点击后浏览器都会使用更多的内存。如果我评论 getAjaxPage(); 排在“成功”部分的情况开始好转，但当然我失去了所有的内部导航。

我能做些什么来避免这个问题？

非常感谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:14:39.057

每次调用`$('a.ajaxc').click()`都会**添加新的事件处理程序**，因此每次单击都会导致更多请求。第一次点击后，每次点击都会引发两次请求。再点击一次？另外三个请求。等等。

将处理程序放在函数之外，每次点击只有一个 AJAX 调用：

```
$(document).ready(function() {
    $('a.ajaxc').click(getAjaxPage);
}); 
```

我也看不到从回调中再次调用的原因`getAjaxPage`，因此也将其删除以避免无限循环的请求。

# objective-c - UITextFieldDelegate 的警告

> ID：14814909
> 
> 赞同：0
> 
> 时间：2013-02-11T15:09:31.743
> 
> 标签：objective-c, uitextfielddelegate

我正在关注 IOS 6 Cookbook 第四版中的教程，介绍如何在用户单击完成时隐藏键盘。不幸的是，我收到一个警告，说我不理解 b/c 我是一个假装理解这个 Objective C 东西的 Java 人。我截取了我正在查看的内容的屏幕截图，以便每个人都可以确切地看到警告的位置。谢谢。

![在此处输入图像描述](../Images/c09509fd262b55957682b605a7f77202.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:10:52.107

您可能没有在 .h 文件中声明`it315ViewController`实现`UITextFieldDelegate`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:14:45.580

在 .h 文件中声明此类以使用

```
@interface IT315ViewController : UIViewController <UITextFieldDelegate> 
```

# asp.net - 按钮半径不起作用

> ID：14814912
> 
> 赞同：1
> 
> 时间：2013-02-11T15:09:32.377
> 
> 标签：asp.net, css, visual-studio-2010

我正在学习 CSS，而 Ajax 边框半径在 ASP.NET 中不起作用，它显示如下错误`border radius is not a known css property name.`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T15:13:39.323

这是因为您的 Visual Studio 2010 CSS 验证器设置为 2.1 或更低版本并`border-radius`添加到 CSS3 中。这只是一个警告，因此它将按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:53:31.187

墨菲斯是对的。而其他一些浏览器也不支持，
最好的方法是像这样复制每个属性。

```
-moz-border-radius: 8px;
-webkit-border-radius: 8px;
border-radius: 8px; 
-moz-box-shadow: 3px 3px 4px rgba(0,0,0,.5);
-webkit-box-shadow: 3px 3px 4px rgba(0,0,0,.5);
box-shadow: 3px 3px 4px rgba(0,0,0,.5); 
```

您可以在此处检查浏览器兼容性[边框属性、值和浏览器支持](http://www.standardista.com/css3/css3-border-properties)

**，或者****最好**

的方法就是**忽略它**，因为它仍然按原样工作。:)

# javascript - 向流图添加更新工具提示

> ID：14814913
> 
> 赞同：2
> 
> 时间：2013-02-11T15:09:33.890
> 
> 标签：javascript, d3.js, tooltip, stream-graph

我有一个流图，我想添加当鼠标悬停在每个流上时出现的工具提示，就像这个例子：

[http://archive.stamen.com/mtvmovies-streamgraph/index.html](http://archive.stamen.com/mtvmovies-streamgraph/index.html)

![在此处输入图像描述](../Images/353c74c5be7063579c12e82e0b28876c.png)

我现在有一些类似的工具提示，但它们只显示每个流中的第一个值，所以无论我将光标悬停在流中的哪个位置，我都只会收到起始值。此外，工具提示不是连续的，所以当我移动光标时，工具提示消失了

这是我现在使用的代码。

```
 var toolTip = vis.selectAll("path")
       .data(data)
       .append("svg:title")
       .text(function(d) {
           return ('Date: ') + formatTime(d.d_date) +
                  (' Money: ') + (d.money) +
                  (' Movie: ') + (d.name)
       }); 
```

有人有什么建议或建议吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:05:58.473

我认为您只是错过了对`enter().append()`. 除非另有说明，否则元素共享其父级的数据。

```
/* Join */
var stream = viz.selectAll("path").data(data);

/* Enter */
stream.enter().append("path").append("title");

/* Exit */
stream.exit().remove();

/* Update */
stream
  .attr("d", function(d) { return d.path; })
.select("title")
  .text(function(d) { 
      return ('Date: ') + formatTime(d.d_date) 
        + (' Money: ') + (d.money) 
        + (' Movie: ') + (d.name);
  }); 
```

# java - 将动态字符串传递给活动

> ID：14814916
> 
> 赞同：0
> 
> 时间：2013-02-11T15:09:38.343
> 
> 标签：java, android, android-activity

我在循环中创建了一个带有动态按钮的活动。我得到一个列表并为列表中的每个元素创建一个按钮。之后按钮进入相同的活动，但每个按钮我想传递不同的字符串。

我在循环中这样做了：

```
 tour_button.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            Intent intent = new Intent(TourListActivity.this,
                    TourMenuActivity.class);
            String info = tour.toString();
            intent.putExtra(TOUR_INFO, info);
            startActivity(intent);
        }
    }); 
```

但最后，所有按钮都得到相同的字符串（最后一个按钮的字符串）。

========================================= 完整代码：

```
 try {
        JsonObject respObject = jsonParser.parse(response).getAsJsonObject();
        JsonArray tourListArray = respObject.getAsJsonArray("tours");
        System.out.println("tourListArray: " + tourListArray.toString());

        for(int i = 0; i < tourListArray.size(); i++){
            LinearLayout ll = new LinearLayout(this);
            ll.setOrientation(LinearLayout.VERTICAL);
            tour = tourListArray.get(i).getAsJsonObject();
            String tourCode = tour.get("tourcode").getAsString();
            Button tour_button = new Button(this);  
            tour_button.setText("Tour Code: " + tourCode);
            tour_button.setGravity(Gravity.LEFT);
            tour_button.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    Intent intent = new Intent(TourListActivity.this,
                            TourMenuActivity.class);
                    String info = tour.toString();
                    intent.putExtra(TOUR_INFO, info);
                    startActivity(intent);
                }
            }); 

            ll.addView(tour_button);

            LinearLayout yourLL = (LinearLayout) findViewById(R.id.Tours_List);
            yourLL.setOrientation(LinearLayout.VERTICAL);
            yourLL.addView(ll);  

        }
    } catch (JsonIOException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:17:20.963

创建按钮时，您可以：

```
 button.setTag(someString); 
```

然后在 onClick 你可以：

```
public void onClick(View v) {
        Intent intent = new Intent(TourListActivity.this,
                TourMenuActivity.class);
        String info = tour.toString();
        intent.putExtra(TOUR_INFO, ((Button)v).getTag());
        startActivity(intent);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:57:39.040

该变量`tour`在循环外定义，因此每个按钮共享同一个*变量*。在每次迭代中，您只需更改此变量存储的*引用。*

您可以在循环中创建**最终**变量，并在以下内容中使用它`OnClickListener`：

```
for (int i = 0; i < tourListArray.size(); i++) {
    ...
    final String tourInfo = tour.info;
    tour_button.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            Intent intent = new Intent(
                TourListActivity.this, 
                TourMenuActivity.class
            );
            intent.putExtra(TOUR_INFO, tourInfo);
            startActivity(intent);
        }
    });
    ...
} 
```

# django - 如何在模板标签中获取当前用户？

> ID：14814924
> 
> 赞同：21
> 
> 时间：2013-02-11T15:09:54.857
> 
> 标签：django, django-templates

如何在 django 模板标签中获取当前用户？（请求对象不可访问）或者我如何访问请求对象？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-11T15:35:18.957

如果要在模板标签中访问当前用户，则必须将其作为模板中的参数传递，如下所示：

```
{% my_template_tag user %} 
```

然后确保你的模板标签接受这个额外的参数。查看有关此主题的[文档。](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#passing-template-variables-to-the-tag)您还应该检查[简单的标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#simple-tags)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-11T15:15:02.023

用户始终附加到请求，在您的模板中，您可以执行以下操作：

```
{% if user.is_authenticated %}
{% endif %} 
```

您不必指定“请求”来访问其内容

**更新：**

请注意：`is_authenticated()`始终`True`为登录用户（`User`对象）返回，但`False`为`AnonymousUser`（访客用户）返回。在这里阅读：[https ://docs.djangoproject.com/en/1.7/ref/contrib/auth/](https://docs.djangoproject.com/en/1.7/ref/contrib/auth/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-11-30T23:01:29.840

这个问题已经[在这里回答了](https://stackoverflow.com/a/13713164/2142093)：

```
{% if user.is_authenticated %}
    <p> Welcome '{{ user.username }}'</p>
{% else %}
    <a href="{% url django.contrib.auth.login %}">Login</a>
{% endif %} 
```

并确保在 settings.py 中安装了请求模板上下文处理器：

```
TEMPLATE_CONTEXT_PROCESSORS = (
...
'django.core.context_processors.request',
...
) 
```

笔记：

*   `request.user.get_username()`在视图和`user.get_username`模板中使用。优先于直接引用用户名属性。 [来源](https://docs.djangoproject.com/en/dev/ref/contrib/auth/#django.contrib.auth.models.User.get_username)
*   如果使用 RequestContext，则此模板上下文变量可用。
*   django.contrib.auth.context_processors.auth 默认启用并包含变量 user
*   您不需要启用 django.core.context_processors.request 模板上下文处理器。

来源：[https ://docs.djangoproject.com/en/dev/topics/auth/default/#authentication-data-in-templates](https://docs.djangoproject.com/en/dev/topics/auth/default/#authentication-data-in-templates)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-05-04T20:25:22.660

假设您有每个注册用户的个人资料页面，并且您只想向个人资料页面的所有者显示编辑链接（即，如果当前用户正在访问他/她的个人资料页面，则用户可以看到编辑按钮，但用户在其他用户的个人资料页面上看不到编辑按钮。在您的**html**文件中：

```
<h2>Profile of {{ object.username }}</h2>
{% if object.username == user.username %}
    <a href="{% url 'profile_update' object.pk %}">Edit</a>
{% endif %} 
```

那么你的**urls.py** 文件应该包含：

```
from django.urls import path
from .views import ProfileUpdateView
urlpatterns = [
    ...
    path('<int:pk>/profile/update', ProfileUpdateView.as_view(), name = 'profile_update'),
    ...
] 
```

考虑到你有合适`ProfileUpdateView`和合适的模型

# javascript - iPhone Safari：如何拦截时钟上的滚动到页面顶部功能

> ID：14814932
> 
> 赞同：0
> 
> 时间：2013-02-11T15:10:30.283
> 
> 标签：javascript, ios, mobile-safari, dom-events

在 iPhone Safari 上，当您点击黑色标题栏中的时钟时，网页通常会滚动到顶部。

有谁知道这是否会生成一个可以被拦截以提供自定义功能的 Javascript 事件 - 如果是，是哪一个？（询问的原因是我想滚动内部 div 的内容，同时保持一对页眉和页脚 div 不变。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:13:15.910

这当然不是 js 事件，但我看到一些网站以某种方式停用了该功能（但这肯定不是苹果想要使用此功能的目的）

# sql - 第二个 sql 调用依赖于另一个

> ID：14814940
> 
> 赞同：4
> 
> 时间：2013-02-11T15:10:56.067
> 
> 标签：sql, sql-server

我正在制作一个存储过程，其中几个表插入和更新依赖于它们之前的插入。我是否需要做任何事情来确保这些操作完成（比如提交），或者存储过程调用中的插入总是按顺序完成和完成，我什么都不担心？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:22:16.423

您什么都不担心，唯一需要担心的情​​况是，如果说您正在创建一个永久表（非临时/非变量表）并且之后要对其进行插入。要克服指示表不存在的运行时错误，您必须在表创建之后但在记录插入之前放置一个“GO”。在继续执行任何代码之前，您始终可以使用“GO”命令来确保到该点的所有程序命令都已完成，但在大多数情况下这不是必需的。如果您执行插入，然后在插入完成后立即执行更新，则不应该评估更新逻辑，但如果您想更加确定，只需在它们之间插入“GO”，然后可以毫无疑问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:21:51.193

如果您有多个语句并希望确保它们全部完成或都不完整，那么您应该使用事务。插入或更新语句失败的原因有很多，因此最好检查一下。

`BEGIN TRANSACTION`在您的陈述之前和`COMMIT TRANSACTION`之后使用。如果您想取消到目前为止在批处理中完成的任何工作，您也可以调用`ROLLBACK TRANSACTION`.

将这些语句包装在`TRY/CATCH`块中以尝试优雅地处理任何错误。

```
BEGIN TRY
    BEGIN TRANSACTION
        --insert/update statements go here
    COMMIT TRANSACTION
END TRY

BEGIN CATCH
    SELECT 
        ERROR_NUMBER() AS ErrorNumber
        ,ERROR_SEVERITY() AS ErrorSeverity
        ,ERROR_STATE() AS ErrorState
        ,ERROR_PROCEDURE() AS ErrorProcedure
        ,ERROR_LINE() AS ErrorLine
        ,ERROR_MESSAGE() AS ErrorMessage;

    IF @@TRANCOUNT > 0
        ROLLBACK TRANSACTION;    
END CATCH 
```

# dart - 如何找到一个月的最后一天？

> ID：14814941
> 
> 赞同：27
> 
> 时间：2013-02-11T15:10:58.397
> 
> 标签：dart

我正在尝试新的 Google Dart 语言，但我不知道如何获取当月的最后一天？

这给了我当前日期：

```
var now = new DateTime.now(); 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-02-11T15:25:51.510

为下个月提供零天值会为您提供上个月的最后一天

```
var date = new DateTime(2013,3,0);
print(date.day);  // 28 for February 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2019-11-06T13:53:55.693

以一种简单的方式试试这个：

```
DateTime now = DateTime.now();
int lastday = DateTime(now.year, now.month + 1, 0).day; 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-02-11T15:17:34.573

这是找到它的一种方法：

```
var now = new DateTime.now();

// Find the last day of the month.
var beginningNextMonth = (now.month < 12) ? new DateTime(now.year, now.month + 1, 1) : new DateTime(now.year + 1, 1, 1);
var lastDay = beginningNextMonth.subtract(new Duration(days: 1)).day;

print(lastDay); // 28 for February 
```

我有当前日期，所以我构造下个月的第一天，然后从中减去一天。我也考虑到了年份的变化。

**更新：**对于同一件事，这里有一些更短的代码，但受到 Chris 的零技巧的启发：

```
var now = new DateTime.now();

// Find the last day of the month.
var lastDayDateTime = (now.month < 12) ? new DateTime(now.year, now.month + 1, 0) : new DateTime(now.year + 1, 1, 0);

print(lastDayDateTime.day); // 28 for February 
```

它有额外的检查/代码，以防您想以编程方式执行此操作（例如，您有一个特定的月份作为整数）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-10-27T17:11:41.983

另一种方法是使用[Jiffy](https://pub.dev/packages/jiffy#-readme-tab-)。它有[endOf](https://github.com/jama5262/jiffy/tree/v3.0.1/doc#end-of-time)方法，可以轻松获取几个单位的最后时刻，在本例中为月份：

```
Jiffy().endOf(Units.MONTH); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-10-20T12:20:24.723

这是一个可能有帮助的扩展。（参考 Kai 和 Chris 的回答。）

```
extension DateTimeExtension on DateTime {

  DateTime get firstDayOfWeek => subtract(Duration(days: weekday - 1));

  DateTime get lastDayOfWeek =>
      add(Duration(days: DateTime.daysPerWeek - weekday));

  DateTime get lastDayOfMonth =>
      month < 12 ? DateTime(year, month + 1, 0) : DateTime(year + 1, 1, 0);
} 
```

# ruby-on-rails - 如何将数组从表单传递到控制器？

> ID：14814942
> 
> 赞同：0
> 
> 时间：2013-02-11T15:10:59.913
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我一直按照[Brandon Tilley 关于创建私人消息系统的说明进行操作，](https://github.com/BinaryMuse/so_association_expirement/compare/53f2263...master)并希望修改传递私人消息收件人的方式（从复选框到文本框）。

在我看来，我有这个：

```
<%= f.label :to %><br />
<%= f.text_field :to, placeholder: "Recip...(separated by commas)" %> 
```

如何接受输入作为将整数数组传递给控制器​​的文本输入？

额外细节：

全视图：

```
<h1>New Conversation</h1>

<%= form_for(@conversation) do |f| %>
  <div>
  <%= f.label :to %><br />
  <%= f.text_field :to, placeholder: "Recip...(separated by commas)" %>
  </div>
  <br />
  <%= f.fields_for :conversation do |c| %>
    <div>
      <%= c.label :subject %>
      <%= c.text_field :subject %>
    </div>
    <%= c.fields_for :messages do |m| %>
    <div>
    <%= m.label :body %><br />
    <%= m.text_area :body %>
    </div>
    <% end %>
  <% end %>

  <%= f.submit %>
<% end %> 
```

在控制器内我有这个：

```
def create
redirect_to users_path unless current_user
@conversation = UserConversation.new(params[:user_conversation])
@conversation.user = current_user
@conversation.conversation.messages.first.user = current_user
... 
```

在模型中我有这个：

```
 accepts_nested_attributes_for :conversation

  delegate :subject, :to => :conversation
  delegate :users, :to => :conversation

  attr_accessor :to
  *before_create :create_user_conversations*

private

def create_user_conversations
return if to.blank?

to.each do |recip|
  UserConversation.create :user_id => recip, :conversation => conversation
end
end
end 
```

编辑：新模型：

```
def to
 to.map(&:user_id).join(", ") *stack too deep error*
end

def to=(user_ids)
  @to = user_ids.split(",").map do |recip|
  UserConversation.create :user_id => recip.strip, :conversation => conversation
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:54:36.180

rails 助手没有设置为自动处理任意数组输入。

您可以使用多个复选框或解析您的文本输入，这是一个逗号分隔的用户名列表。在你的模型中

```
def to=(string)
  @to = User.where(:name => string.split(',')).select(:id).map(&:id)
end 
```

为了更好的用户体验，您可以使用[tagsinput jquery 插件](http://xoxco.com/projects/code/tagsinput/)和/或自动完成。

另请注意，如果您使用表单来修改同一对象，则需要将逗号分隔的字符串重新生成为 text_field 输入的 :value 选项，以正确预填充您的编辑表单。

```
<%= text_field_tag "user_conversation[to]", (@conversation.to || []).join(',') %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:09:09.983

在视图中：

```
<%= f.label :to %><br />
<%= f.text_field :to, placeholder: "Recip...(separated by commas)" %> 
```

在模型中：

```
attr_accessible :to
attr_accessor :to

before_create :create_user_conversations

private

to.split(",").each do |recip|
  UserConversation.create :user_id => recip, :conversation => conversation
end 
```

# javascript - 无法获得一个简单的把手样本工作

> ID：14814943
> 
> 赞同：0
> 
> 时间：2013-02-11T15:11:02.403
> 
> 标签：javascript, json, handlebars.js

我有一个带有把手的简单示例，但我无法让它工作！请帮忙。我正在尝试让谷歌应用引擎留言簿与车把而不是 jinja2 一起使用

HTML/模板代码如下：

```
 Hello {{user.nickname}}
  <h2>Top 10 Most Recent Guestbook Entries</h2>
      {{#each greetings}}
          <br>
           <small>[<i>{{date.ctime}}</i>]</small>
           <b>
             {{#if author}}
               <code>{{author.nickname}}</code>
             {{else}}
               <i>anonymous</i>
             {{/if}}
          </b>
          wrote:
        {{comment}}
      {{/each}}
 </script>
 <div id="comment_content"> </div>
 <form id="comments" action="">
    <div><textarea id="comment" name="content" rows="3" cols="60"></textarea></div>
    <div><input id="comment_button" type="button"  value="submit"></div>
 </form>
 <a href="{{ url }}">{{ url_linktext }}</a> 
```

这是JS代码：

```
<script>
   $(document).ready(function() {
      var source   = $("#entry-template");
      var srcHTML =source.html();    
      var template = Handlebars.compile(srcHTML);
   // put all your jQuery goodness in here.
      $("#comment_button").click(function(event) {

          var data = JSON.stringify({
            "login": "/_ah/login?continue=http%3A//localhost%3A8080/show",
            "logout": "/_ah/login?continue=http%3A//localhost%3A8080/show&action=Logout",
            "user": {
              "nickname": "dummy",
              "email": "dummy@me.com"
            },
          "greetings": [
          {
            "comment": "COMMENT1",
            "date": {
                "ctime": "Sun Feb 10 23:20:21 2013"
            },
            "author": {
                "nickname": "dummy",
                "email": "dummy@me.com"
            }
          }
        ]
      })
      var html = template(data);
      console.log(html);
      $("#comment_content").html(html);
      });
   });
 </script> 
```

这是我引用 Handlebar 源的方式

```
Can someone please help? 
```

谢谢一米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:18:30.810

您的大问题是您正在使用[`JSON.stringify`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)为编译的模板函数准备数据：

```
var data = JSON.stringify({ ... });
var html = template(data); 
```

当它只需要对象时，这最终会向`template`函数传递一个字符串（这是您想要的数据的 JSON 表示形式）。放下`JSON.stringify`，事情会开始表现得更好：

```
var data = { ... };
var html = template(data); 
```

演示：http: [//jsfiddle.net/ambiguous/Axmbd/](http://jsfiddle.net/ambiguous/Axmbd/)

此外，您的 HTML 的这一部分：

```
<a href="{{ url }}">{{ url_linktext }}</a> 
```

似乎不在模板内，`<script>`因此不会填写 and。您可以通过将其移动`{{url}}`到正确的位置来解决此问题。`{{url_linktext}}``<a>`

# c++ - 如何编译（一个源代码中来自不同包的两个混合 C++ 源代码）

> ID：14814950
> 
> 赞同：1
> 
> 时间：2013-02-11T15:11:33.223
> 
> 标签：c++, compilation, mixed-code

假设我`.cpp`在两个不同的目录中有两个独立的代码：（请注意，这只是我的问题的示意图）。

这是第一个......可以在它自己的目录中成功编译，它有自己的Makefile

```
// special libraries to include
#include "acado.h"  
#include "auxiliary_functions.c" 
/* -------------------------- */
// Create objects for special classes 
   ACADOvariables acadoVariables; 
   ACADOworkspace acadoWorkspace;

int main(){
    // perform task A_1
    // perform task A_2 
    // Tasks A_1 and A_2 depend on the specially included headers
    return 0;
} 
```

而且，这是第二个......同样，这段代码可以在它自己的目录中成功编译，它有自己的 Makefile

```
#include <stdio.h>
#include <stdlib.h>
#include "Aria.h"
/* -------------------------- */
// Create objects for special classes 
  ArPose pose;
  ArRobot robot;

int main(){
    // perform task B_1
    // perform task B_2 
    // Tasks B_1 and B_2 depend on the specially included headers
    return 0;
} 
```

现在，出于我的目的，我需要一个源代码，例如...

```
// special libraries to include from both packages
#include <stdio.h>
#include <stdlib.h>
#include "Aria.h"
#include "acado.h"  
#include "auxiliary_functions.c" 
/* -------------------------- */
// Create objects for special classes from Part1
   ACADOvariables acadoVariables; 
   ACADOworkspace acadoWorkspace;
/* -------------------------- */
// Create objects for special classes from part2
  ArPose pose;
  ArRobot robot;
int main(){
    // perform task B_1
    // perform task A_1 (this task depends on values returned by B_1)
    // perform task B_2 (this task depends on values returned by A_1)
    // perform task A_2 (this task depends on values returned by B_1)
    return 0;
} 
```

那么，**我怎样才能使用这两个包，以及我已经必须编译最后一段代码的两个 makefile 呢？**...我尝试将两个包的内容（文件和文件夹）放入一个目录中，并使用一个包含各个 makefile 的两个内容的 makefile，但是编译第三个脚本并不成功...

非常感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:16:49.433

在您当前的情况下，首先要检查的是您的 makefile 是否正在创建可执行文件而不是简单的目标文件。如果您说每个 makefile 的输出都可以自己运行，则似乎是后者。如果输出确实是可执行文件而不是目标文件，那么您将无法将这些可执行文件“链接”在一起成为新的可执行文件。所以你要确保的是每个`.cpp`文件的编译过程的输出是一个带有`.o`扩展名的目标文件，并且只有一个*文件* `.cpp`有一个`main()`函数。创建目标文件而不是可执行文件的过程可以使用`-c`选项 with来完成`g++`。

一旦您从每个文件创建了对象和/或库文件`.cpp`，以及具有入口点函数的单个`.cpp`文件`main()`，您就可以将对象/库文件链接在一起以创建最终的可执行文件`g++`，然后使用该文件将包含所描述的功能在每个单独的`.cpp`文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:18:00.427

您将每个包编译成一个库。~~这可能是makefiles已经做的。~~

**编辑：**我不知何故错过了这两个文件都包含一个`main()`函数，清楚地表明它们都被编译成单独的可执行文件。好吧，您必须从其中考虑要重用的代码，并将其包含在您的项目中，或者从中创建库并将它们链接进去。

* * *

关于如何链接库的旧响应；这里需要更多：

比在您自己的包中传递编译器标志：

*   `-I`*path_to_the_headers*用于编译阶段，因此 #include 指令会找到标头。
*   `-L`*链接阶段的path_to_the_files`.a`告诉*编译器在哪里寻找库
*   `-l`*链接阶段的libname*告诉编译器使用哪些库

最后一个选项有点奇怪，如果库被称为`lib`*什么*`.a`，你只写`-l`*什么*；在具有大多数编译器但不是 gcc 的 Windows 上，该库将被称为*某个东西*`.lib`。

# java - java中如何遍历队列

> ID：14814951
> 
> 赞同：1
> 
> 时间：2013-02-11T15:11:43.893
> 
> 标签：java, android, concurrency

我有一个`ThreadPoolExecutor`可以完成我的任务的`DownloadTask implements Runnable{private String taskId...`任务，并且我需要随时有可能从`ThreadPoolExecutor`队列中获取定义的任务，例如，使用任务 ID：

```
mDownloadTasksPool.getQueue(); 
```

遍历队列并获得定义元素的最佳方法是什么？

可以有一个包含所有重复任务的列表，但它看起来不是很优雅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:18:20.113

子类化您的 Runnables 以提供 taskID 的 getter（如果那是您的关键）。创建一个并发映射，将您的 taskID 映射到您放入队列中的 Runnable。子类化您的 ThreadPoolExecutor。在 beforeExecute 中，您从该映射中删除当前任务，因为它不再在队列中。您可能希望将 Runnable 强制转换为您的自定义类以使用该 taskID getter。

# android - Android - 当有多个项目时不调用片段视图 OnKey 方法

> ID：14814954
> 
> 赞同：2
> 
> 时间：2013-02-11T15:11:53.457
> 
> 标签：android, android-activity, android-fragments

我不明白这一点：我有一个 ListFragment 必须显示产品和类别的列表，当我输入一个类别时，列表上的 TextView 应该显示实际类别。我还需要返回按钮来返回根目录。OnKey 在布局中工作时我只有 ListView

```
 <ListView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </ListView> 
```

当我添加 TextView 以显示类别 OnKey 未被调用。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

    <ListView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </ListView>

</LinearLayout> 
```

片段代码：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.frag_cats, container, false);
        //actual_category_name = (TextView) view.findViewById(R.id.actual_category_name);
        view.setOnKeyListener(new OnKeyListener(){

            @Override
            public boolean onKey(View v, int keyCode, KeyEvent event) {
                if ((keyCode == KeyEvent.KEYCODE_BACK) && event.getAction() == KeyEvent.ACTION_UP) {
                    goBack();
                    return true;
                }
                return false;
            }

        });
        return view;
    } 
```

将 ListFragment 更改为 fragment 不会改变任何内容。请帮我。提前致谢。

# java - 在 java 泛型中使用通配符类型

> ID：14814955
> 
> 赞同：0
> 
> 时间：2013-02-11T15:11:53.207
> 
> 标签：java

我想传递`GameObject`也将实现`Collidable`接口的类对象。它应该是什么样子？

```
private boolean isCollision(GameObject<? extends Collidable> collid) {
} 
```

它应该是什么样子？`collid`必须是`GameObject`和的实例`Collidable`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T15:14:14.130

如果要确保它`collid`是 a`GameObject` **和**a `Collidable`，可以使用以下语法：

```
private <T extends GameObject & Collidable> boolean isCollision(T collid) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:15:35.227

`GameObject`定义一个扩展和的接口可能更容易`Collidable`。然后将您的参数声明为该类型。

```
public interface CollidableGameObject extends GameObject, Collidable {
} 
```

那么你的方法可能是：

```
private boolean isCollision(CollidableGameObject collid) {
} 
```

除非我遗漏了什么，否则似乎不需要泛型。如果`GameObject`还不是一个接口，考虑做一个吗？

# dns - 使用 DirectAdmin 创建的子域无法解析

> ID：14814960
> 
> 赞同：0
> 
> 时间：2013-02-11T15:12:06.737
> 
> 标签：dns, subdomain

我正在尝试使用 DirectAdmin 创建一个子域。子域将是 finance.nickputman.com

我似乎已经成功创建了子域，因为在“DNS 管理”下显示了金融和 www.finance 的 A 记录，当我对 A 记录进行在线 DNS 传播检查时，所有报告都返回成功。

然而，当我尝试访问[http://finance.nickputman.com](http://finance.nickputman.com)时，我得到一个未找到服务器的错误。 [http://nickputman.com/finance](http://nickputman.com/finance)工作正常。

我需要采取其他步骤才能使其正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:24:14.303

本地 dns 缓存获取新的/更改的 dns 记录需要一些时间（取决于旧记录的 TTL 值）。手动清除 dns 缓存以强制更新。

# ruby - 是否可以根据单个对象对方法的响应对对象列表进行排序？

> ID：14814966
> 
> 赞同：11
> 
> 时间：2013-02-11T15:12:15.600
> 
> 标签：ruby, ruby-on-rails-3, sorting, activerecord, ruby-on-rails-3.2

我想展示一个画廊，`products`其中包含可供出售和不出售的产品。只有我希望`products`待售的物品出现在列表的前面，而非出售的物品将出现在列表的末尾。

对我来说，一个简单的方法是制作两个列表，然后合并它们（一个 on_sale? 对象列表和一个 not on_sale? 对象列表）：

```
available_products = []
sold_products = []
@products.each do |product|
  if product.on_sale?
    available_products << product
  else
    sold_products << product
  end
end 
```

. . . 但是对于我现有应用程序的结构，由于我的代码很奇怪（我失去了分页，我宁愿不重构），这将需要大量的重构。如果有一种方法可以通过我`product`的模型的`on_sale?`返回布尔值的方法对现有的对象列表进行排序，那会更容易。

**是否可以更优雅地遍历现有列表并按 Rails 中的这个真值或假值对其进行排序？** 我只是问，因为在这个框架/语言（ruby）中隐藏了很多我不知道的东西，我想知道他们的工作是否在我之前完成。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-11T15:17:08.053

当然。理想情况下，我们会使用[`sort_by!`](http://ruby-doc.org/core-1.9.3/Array.html#method-i-sort_by-21)：

```
@products.sort_by! {|product| product.on_sale?} 
```

或者更时髦的人

```
@products.sort_by!(&:on_sale?) 
```

但遗憾的是，`<=>`它不适用于布尔值（请参阅[Why does not sort or the spaceship (flying sauce) operator (<=>) work on booleans in Ruby?](https://stackoverflow.com/questions/14816131/why-doesnt-sort-or-the-flying-saucer-operator-work-on-booleans-in-ruby)）并且`sort_by`不适用于布尔值，所以我们需要使用这个技巧（感谢 rohit89！）

```
@products.sort_by! {|product| product.on_sale? ? 0 : 1} 
```

* * *

如果你想变得更漂亮，该`sort`方法需要一个块，在该块内你可以使用任何你喜欢的逻辑，包括类型转换和多个键。尝试这样的事情：

```
@products.sort! do |a,b|
  a_value = a.on_sale? ? 0 : 1
  b_value = b.on_sale? ? 0 : 1
  a_value <=> b_value
end 
```

或这个：

```
@products.sort! do |a,b|
  b.on_sale?.to_s <=> a.on_sale?.to_s
end 
```

（将 b 放在 a 之前，因为您希望`"true"`值在之前`"false"`）

或者如果您有二级排序：

```
@products.sort! do |a,b|
  if a.on_sale? != b.on_sale?
    b.on_sale?.to_s <=> a.on_sale?.to_s
  else
    a.name <=> b.name
  end
end 
```

请注意，这会`sort`返回一个新集合，这通常是一种更简洁、不易出错的解决方案，但[`sort!`](http://ruby-doc.org/core-1.9.3/Array.html#method-i-sort-21)会修改原始集合的内容，您说这是一个要求。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T15:30:00.997

`@products.sort_by {|product| product.on_sale? ? 0 : 1}`

当我必须根据布尔值进行排序时，这就是我所做的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-11T15:31:38.540

无需排序：

```
products_grouped = @products.partition(&:on_sale?).flatten(1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-27T07:20:38.663

可以通过交换“false”和“true”来完成升序和降序

```
Products.sort_by {|product| product.on_sale? ==  true ? "false" : "true" } 
```

# javascript - 请使用 POST 请求

> ID：14814970
> 
> 赞同：-1
> 
> 时间：2013-02-11T15:12:28.323
> 
> 标签：javascript, html

运行以下脚本时出现错误“请使用 POST 请求”。我只是 html 和 javascript 的初学者。任何人都可以帮助这里出了什么问题。

javascript

```
 function submitform(){
        if (!document.getElementById('reschedule').onclick) {
            alert("reschedule")
        }
        if (!document.getElementById('home').onclick) {
            alert("home")
        }
        if (!document.getElementById('cancel').onclick) {
            alert("cancel")
        }
    } 
```

和 html 是

```
 <html>
  <form name="myform" method="post,get" onsubmit="return submitform();">
<input type="submit" id="reschedule" value="reschedule" />
<input type="submit" id="home"  value="home" />
<input type="submit" id="cancel"  value="cancel" />
 </form> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T15:14:09.887

```
<form name="myform" method="post" onsubmit="return submitform();"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T15:14:22.043

改变这个：

```
method="post,get" 
```

对此：

```
method="post" 
```

在`<form>`标签属性中

# c# - 小巧玲珑。映射到列名中带有空格的 SQL 列

> ID：14814972
> 
> 赞同：20
> 
> 时间：2013-02-11T15:12:29.547
> 
> 标签：c#, dapper, dapper-rainbow

我今天已经设法将一些东西作为小型沙盒/POC项目启动并运行，但似乎在一个问题上碰到了我的头......

**问题：**

> 有没有办法让 dapper 映射到带有空格的 SQL 列名。

作为我的结果集，我有这样的效果。

**例如：**

```
SELECT 001 AS [Col 1], 
       901 AS [Col 2],
       00454345345345435349 AS [Col 3],
       03453453453454353458 AS [Col 4] 
FROM [Some Schema].[Some Table] 
```

我的课看起来像这样

```
 public class ClassA
    {          
        public string Col1 { get; set; }    

        public string Col2 { get; set; }

        ///... etc
     } 
```

我的实现目前看起来像这样

```
 public Tuple<IList<TClass>, IList<TClass2>> QueryMultiple<TClass, TClass2>(object parameters)
 {
      List<TClass> output1;
      List<TClass2> output2;

      using (var data = this.Connection.QueryMultiple(this.GlobalParameter.RpcProcedureName, parameters, CommandType.StoredProcedure))
      {
           output1 = data.Read<TClass>().ToList();
           output2 = data.Read<TClass2>().ToList();
      }

      var result = new Tuple<IList<TClass>, IList<TClass2>>(output1, output2);
      return result;
  } 
```

**注意：不能以任何方式修改 SQL。**

目前我正在浏览简洁的代码，我唯一可预见的解决方案是添加一些代码来“说服”列比较，但到目前为止还没有太多运气。

我在 StackOverflow 上看到有类似 dapper 扩展的东西，但我希望我可以在不添加扩展的情况下完成这项工作，如果没有的话。我会采取最快的实施方式。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-06-29T05:39:37.950

有一个 nuget 包**Dapper.FluentMap**允许您添加列名映射（包括空格）。它类似于 EntityFramework。

```
// Entity class.
public class Customer
{
    public string Name { get; set; }
}

// Mapper class.
public class CustomerMapper : EntityMap<Customer>
{
    public CustomerMapper()
    {
        Map(p => p.Name).ToColumn("Customer Name");
    }
}

// Initialise like so - 
FluentMapper.Initialize(a => a.AddMap(new CustomerMapper())); 
```

有关更多信息，请参见[https://github.com/henkmollema/Dapper-FluentMap](https://github.com/henkmollema/Dapper-FluentMap)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-12T09:27:31.973

这里的一种选择是通过动态/非通用 API，然后通过`IDictionary<string,object>`每行的 API 获取值，但这可能有点乏味。

作为替代方案，您可以创建一个自定义映射器，并将其告诉 dapper；例如：

```
SqlMapper.SetTypeMap(typeof(ClassA), new RemoveSpacesMap()); 
```

和：

```
class RemoveSpacesMap : Dapper.SqlMapper.ITypeMap
{

    System.Reflection.ConstructorInfo SqlMapper.ITypeMap.FindConstructor(string[] names, Type[] types)
    {
        return null;
    }

    SqlMapper.IMemberMap SqlMapper.ITypeMap.GetConstructorParameter(System.Reflection.ConstructorInfo constructor, string columnName)
    {
        return null;
    }

    SqlMapper.IMemberMap SqlMapper.ITypeMap.GetMember(string columnName)
    {
        var prop = typeof(ClassA).GetProperty(columnName.Replace(" ", ""));
        return prop == null ? null : new PropertyMemberMap(columnName, prop);
    }
    class PropertyMemberMap : Dapper.SqlMapper.IMemberMap
    {
        private string columnName;
        private PropertyInfo property;
        public PropertyMemberMap(string columnName, PropertyInfo property)
        {
            this.columnName = columnName;
            this.property = property;
        }
        string SqlMapper.IMemberMap.ColumnName
        {
            get { throw new NotImplementedException(); }
        }

        System.Reflection.FieldInfo SqlMapper.IMemberMap.Field
        {
            get { return null; }
        }

        Type SqlMapper.IMemberMap.MemberType
        {
            get { return property.PropertyType; }
        }

        System.Reflection.ParameterInfo SqlMapper.IMemberMap.Parameter
        {
            get { return null; }
        }

        System.Reflection.PropertyInfo SqlMapper.IMemberMap.Property
        {
            get { return property; }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-16T13:16:56.177

在尝试从调用系统 sp_spaceused 过程中获取映射结果时，我遇到了类似的问题。Marc 的代码不太适合我，因为它抱怨无法找到默认构造函数。我还使我的版本通用，因此理论上可以重复使用。这可能不是执行速度最快的代码，但它对我有用，在我们的情况下，这些调用很少进行。

```
class TitleCaseMap<T> : SqlMapper.ITypeMap where T: new()
{
    ConstructorInfo SqlMapper.ITypeMap.FindConstructor(string[] names, Type[] types)
    {
        return typeof(T).GetConstructor(Type.EmptyTypes);
    }

    SqlMapper.IMemberMap SqlMapper.ITypeMap.GetConstructorParameter(ConstructorInfo constructor, string columnName)
    {
        return null;
    }

    SqlMapper.IMemberMap SqlMapper.ITypeMap.GetMember(string columnName)
    {
        string reformattedColumnName = string.Empty;

        foreach (string word in columnName.Replace("_", " ").Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries))
        {
            reformattedColumnName += char.ToUpper(word[0]) + word.Substring(1).ToLower();
        }

        var prop = typeof(T).GetProperty(reformattedColumnName);

        return prop == null ? null : new PropertyMemberMap(prop);
    }

    class PropertyMemberMap : SqlMapper.IMemberMap
    {
        private readonly PropertyInfo _property;

        public PropertyMemberMap(PropertyInfo property)
        {
            _property = property;
        }
        string SqlMapper.IMemberMap.ColumnName
        {
            get { throw new NotImplementedException(); }
        }

        FieldInfo SqlMapper.IMemberMap.Field
        {
            get { return null; }
        }

        Type SqlMapper.IMemberMap.MemberType
        {
            get { return _property.PropertyType; }
        }

        ParameterInfo SqlMapper.IMemberMap.Parameter
        {
            get { return null; }
        }

        PropertyInfo SqlMapper.IMemberMap.Property
        {
            get { return _property; }
        }
    }
} 
```

# twitter-bootstrap - 选择菜单后，twitter bootstrap 响应式菜单随机不会折叠

> ID：14814974
> 
> 赞同：0
> 
> 时间：2013-02-11T15:12:34.357
> 
> 标签：twitter-bootstrap, responsive-design

我正在使用 Twitter Bootstrap 响应于使用 Brightcove App Cloud 构建的移动应用程序。当菜单在狭窄的设备上折叠时，它最终会在选择菜单后折叠失败。菜单下方的内容会发生变化，但菜单不会折叠。我试图将其隔离到一个 HTML 页面或菜单项位置，但看不到模式。

这是我文件中的相关代码（除了一些特定的 CSS 之外，六个页面基本相同）：

```
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="bc-manifest" content="manifest.json" />
    <title>Zencoder</title>
    <link rel="stylesheet" type="text/css" href="http://files.brightcove.com/proxima-nova/font-faces.css">
    <link href="stylesheets/brightcove-app-cloud-1.12.min.css" rel="stylesheet"/>
    <link href="stylesheets/bootstrap.css" rel="stylesheet">
    <link href="stylesheets/bootstrap-responsive.css" rel="stylesheet">
    <link href="stylesheets/allPagesStyles.css" rel="stylesheet">
    <link href="stylesheets/zencoder.css" rel="stylesheet">
  </head>
<body>

<section id="pageone" class="page">
  <header class="header">
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <div class="nav-collapse">
            <ul class="nav maintop app-navigation">
              <li id="mainNavTargetS"><a class="ss-nav">System Status</a></li>
              <li id="mainNavTargetBC"><a class="bc-nav">Brightcove</a></li>
              <li id="mainNavTargetVC"><a class="vc-nav">Video Cloud</a></li>
              <li id="mainNavTargetAC"><a class="ac-nav">App Cloud</a></li>
              <li class="active" id="mainNavTargetZC"><a class="zc-nav">Zencoder</a></li>
            </ul>
          </div><!-- /.nav-collapse -->
        </div><!-- /.container -->
      </div><!-- /.navbar-inner -->
    </div><!-- /.navbar -->
  </header> 
```

感谢您帮助解决这个（至少对我而言）令人困惑的问题。

-马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:46:44.150

我最初使用列出的教程中的代码。这是我的问题。请注意，在本教程中，折叠菜单的菜单显示按钮如下所示。

```
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
</a> 
```

如果您检查实际的 Twitter Bootstrap 代码，它会如下所示（带有按钮，而不是锚点）

```
 <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </button> 
```

当我第一次开始编写代码时，这并没有什么区别，但是当我开始更改样式时，问题开始出现。一旦我匹配了原始的 Bootstrap 代码，这些问题就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T16:22:39.837

检查以确保您没有任何其他 javascript 正在寻找 .collapse 或任何其他调用折叠函数的 javascript。

我之前的代码使用了自定义折叠函数，我猜它与 Bootstrap 冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T11:48:40.223

尝试这个。它会让你知道你错在哪里。你还需要 jQuery 和 bootbootstrap js。

[http://webdesigntutsplus.s3.amazonaws.com/tuts/319_bootstrap_pills_tabs/Tabs-Pills-BEGIN/navbar-examples.html](http://webdesigntutsplus.s3.amazonaws.com/tuts/319_bootstrap_pills_tabs/Tabs-Pills-BEGIN/navbar-examples.html)

# perl - 在 Perl 中，在属性中保留对 Catalyst 的 $c 的引用会导致内存泄漏吗？

> ID：14814976
> 
> 赞同：5
> 
> 时间：2013-02-11T15:12:37.513
> 
> 标签：perl, oop, scope, webserver, catalyst

我开始使用 Catalyst 编写一些 Perl 代码，如下所示：

```
package My::Controller;
extends 'Catalyst::Controller';

sub handler :Path :Args(0) :Location( some/url )
    my ($self, $c) = @_;

    $self->do_something_with_arguments($c);
    $self->make_a_decision($c);
    $self->another_method($c);
} 
```

然后我想。o O（为什么总是传递 $c ？），我改为：

```
package My::Controller;
extends 'Catalyst::Controller';

has c => (is => "rw", isa => "Catalyst");

sub handler :Path :Args(0) :Location( some/url )
    my ($self, $c) = @_;
    $self->c($c);

    $self->do_something_with_arguments;
    $self->make_a_decision;
    $self->another_method;
} 
```

处理程序只有一个入口点，因此 $self->c 将始终正确设置。

我的同事说，如果这就是 Catalyst 的用途，那么，每个人都会这样使用它。他们担心这样做会导致内存泄漏，因为对 $c 的引用会在请求结束后持续存在。真的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T16:04:20.570

这并不是大多数人所认为的确切意义上的“内存泄漏”，因为它不会导致无限的内存增长，但是是的，您将请求上下文保持在比其正常生命周期更长的时间。下次您发出设置`$self->c`为其他内容的请求时，它将被释放，但不会很快。更重要的是，这几乎只是错误的设计。继续将上下文作为参数传递；或将您的控制器方法转换为私有操作并调用它们`->forward`（自动传递上下文）；或在适当的情况下将事物移入模型中，并拥有模型`ACCEPT_CONTEXT`。

# java - Java中从URL下载文件的方法

> ID：14814977
> 
> 赞同：0
> 
> 时间：2013-02-11T15:12:40.837
> 
> 标签：java, url, file-io, apache-commons

我想从嵌入式设备上运行的网络服务器下载二进制文件。该文件可以通过使用该 URL 在基本的 http 身份验证后手动下载：`http://10.10.10.10/config.bin`... 现在我想使用一个简单的 Java 应用程序自动执行此过程。通过使用基本的 java 工具，我设法下载了文件：

```
URL mlrrl = new URL(url);
            HttpURLConnection  con = (HttpURLConnection) mlrUrl.openConnection();

            con.setRequestMethod("GET");
            con.setAllowUserInteraction(false);
            con.setDoInput(true);
            con.setDoOutput(true);
            con.setConnectTimeout(10000);
            con.setRequestProperty("Authorization", "Basic " + authStringEnc);

            InputStream stream = con.getInputStream();
            BufferedInputStream in = new BufferedInputStream(stream);
            FileOutputStream file = new FileOutputStream("configDown.bin");
            BufferedOutputStream out = new BufferedOutputStream(file);
            int i;
            while ((i = in.read()) != -1) {
                out.write(i);
            }
            out.flush(); 
```

这似乎工作正常！与手动（通过浏览器 Web 界面）下载的文件相比，生成的文件具有相同的长度，但在使用十六进制编辑器打开两个二进制文件后，它们是不同的。

我的问题：

1.  任何想法为什么十六进制代码不同？（也许缺少连接属性？）
2.  apache.commons 包中有一个 copyUrlToFile-Method。是否可以将它与基本的 http 身份验证一起使用，作为替代方案？
3.  是否有其他 Java 库或工具可用于从 url 下载文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:52:53.363

恕我直言，使用（已弃用）Apache Commons HttpClient（[http://hc.apache.org/httpclient-3.x/](http://hc.apache.org/httpclient-3.x/)）是最简单的方法。或者，您可以使用新的和（据说）改进的 HttpComponents ( [http://hc.apache.org/](http://hc.apache.org/) )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:42:37.540

我无法解释原因，但错误的属性“setDoOutput”=“true”可能会影响下载文件的内容。将值设置为“false”为我解决了这个问题！

# c# - 将 SQL 数据放入 Label 而不是 DataGrid

> ID：14814980
> 
> 赞同：-1
> 
> 时间：2013-02-11T15:12:55.267
> 
> 标签：c#, asp.net, sql, label

我有以下查询

```
select * from DATABASE.dbo.Rooms r
where not exists
    (select * from DATABASE.dbo.Reservation
        where RoomNo = r.RoomNo
        and DateStart <= 'Textbox2.text'
        and DateEnd >= 'Textbox1.text') 
```

标签应显示所有可用房间及其详细信息。我如何在标签控件上显示表字段数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:29:39.973

很难知道从哪里开始，这里......

首先，了解C#和SQL的区别。您的 SQL 语句没有意义。使用参数化查询。*使用参数化查询*！**使用参数化查询！**

```
string query = "select * from DATABASE.dbo.Rooms r "+
               "where not exists "+
               "(select * from DATABASE.dbo.Reservation "+
               "          where RoomNo = r.RoomNo "+
               "          and DateStart <= @endDate "+
               "          and DateEnd >= @startDate)" 
```

这是您的 SQL 查询。现在从 C# 调用它：

```
using (SqlCommand cmd = new SqlCommand(query, connection);
{
    // Assign parameters. I assume that you have DateTimePickers instead
    // of text boxes.
    cmd.Parameters.AddWithValue("@startDate", datePicker1.Date);           
    cmd.Parameters.AddWithValue("@endDate", datePicker2.Date);

    using (SqlDataReader reader = cmd.ExecuteReader())
    {
        // Read all data into string builder (field name must be changed)
        StringBuilder sb = new StringBuilder();
        while (reader.Read())
          sb.Append(reader["FieldName"].ToString());

        // Assign this to label
        label1.Text = sb.ToString();
    }
} 
```

# ios - 避免集合视图“拉伸”单元格

> ID：14814985
> 
> 赞同：0
> 
> 时间：2013-02-11T15:13:10.007
> 
> 标签：ios, objective-c

我正在设置一个集合视图并自定义其单元格的宽度、插图和项目间距。以当前的大小，这意味着纵向有两列，横向有三列。我让流布局进行旋转调整和计算，但结果是中间列被拉伸。我认为正在发生的事情是流布局正在为单元格填充/间距进行数学运算，而不是得到干净的整数。然后它将实际单元格的大小调整半个点。结果是一个混叠且看起来模糊的单元格。

我多次和每次都遇到过这个问题 - 我手动计算每个方向的值，以得出一个干净的整数。虽然这可行，但它似乎不是很有效。我想知道是否有更好的方法来做到这一点，如果 FlowLayout 有能力说，将半个点作为边距或单元格之间的空白空间？

# wpf - WPF - Windows 窗体互操作

> ID：14814988
> 
> 赞同：0
> 
> 时间：2013-02-11T15:13:17.360
> 
> 标签：wpf, winforms, 3d, windowsformshost

我对表单之间的互操作有点困惑。我有一个使用 DevExforms 开发的 c#.Net 应用程序。另一方面，我有一个 XNA 应用程序，我想将它用作 3d GUI。但是他们之间很难互动。当然它没有用，它也很丑陋。

所以我看到了一种使用 WPF 开发 3d 模型查看器应用程序的方法，但是 WPF 控件和 Windows 窗体控件需要 .Net Framework 4.5 才能在两者之间进行交互。但我必须使用VS2010。

所以我很困惑。我必须做什么。如何使用 Windows 窗体轻松开发 3d 应用程序，或者如何与我的应用程序交互任何平台。其实如果你是我你会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:03:50.660

WPF 控件和 WinForms 控件不需要 .Net framework 4.5 一起工作。互操作性存在于（4.5）之前。看看[MSDN](http://msdn.microsoft.com/en-us/library/ms742474%28v=vs.100%29.aspx)

# django - Django外键排序/位置

> ID：14814999
> 
> 赞同：1
> 
> 时间：2013-02-11T15:13:56.173
> 
> 标签：django, model

我有一个 Django 模型中的项目列表，我希望能够设置它们的顺序。基本上是一个链表。

```
class List(models.Model):
      name = models.CharField(max_length=255)

class Item(models.Model):
      list     = models.ForeignKey(List)
      position = models.PositiveIntegerField()
      data     = models.AnyField() 

      class Meta:
            unique_together = ('list', 'position')
            ordering = ['position'] 
```

这是我心目中的模型。对于 List 中的每个 ListItem，列表位置必须是唯一的，但也必须没有间隙（例如，删除第 4 项不会导致位置序列 [1, 2, 3, 5, 6]。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:13:56.173

在写这个问题时，我偶然发现了一个[可能的解决方案](https://docs.djangoproject.com/en/dev/ref/models/options/#ordering)。

```
class Item(models.Model):
    list = models.ForeignKey(List)
     # ...

    class Meta:
        order_with_respect_to = 'list' 
```

然后可以像这样操作这个模型：

```
list = List.objects.get(id=1)
list.get_item_order() == [1, 2, 3] 
```

List 对象的相关 Item 对象的顺序可以通过传入 Item 主键列表来设置：

```
list.set_item_order([3, 1, 2]) 
```

* * *

尚未尝试过此代码，因此请随时纠正我（评论或编辑）。