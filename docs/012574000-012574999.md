# StackOverflow 问答 12574000-12574999

# python - 二元运算符到多运算符装饰器

> ID：12574001
> 
> 赞同：2
> 
> 时间：2012-09-24T22:49:12.890
> 
> 标签：python, decorator

假设我有一个已编写为二进制运算符 (binop) 的函数，如何将其扩展为采用任意数量参数的多运算符 (multiop)？库中是否有这样的装饰器（例如在[functools](http://docs.python.org/library/functools.html)中）？

例如（我想要一个装饰器来提供这种行为）：

```
@binop_to_multiop
def mult(a,b):
    return a*b

mult(2,3,4) # 2*3*4 = 24
mult(7) # 7
mult(2,3) # 6 
```

*显然，我不能不提这个[答案](https://stackoverflow.com/a/1594484/1240268)就问一个关于装饰器的问题。*

.

我试过自己写，但不能*完全*正常工作，也欢迎对我哪里出错的任何解释：

```
def binop_to_multiop(f):
    @functools.wraps(f)
    def wrapper(*args, **kwds):
        if len(args) == 1: return args[0] # fails
        return f(args[0],(f(*args[1:], **kwds)), **kwds) #recursion attempt fails
    return wrapper 
```

*给出一个* `TypeError: mult() takes exactly 2 arguments (N given)` *（对于各种`N!=2`）。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T22:57:50.580

`reduce()`想到：

```
from functools import wraps

def binop_to_multiop(binop):
    @wraps(binop)
    def multiop(x, *xs):
        return reduce(binop, xs, x)
    return multiop

# ...

@binop_to_multiop
def mult(a, b):
    return a * b

print mult(2, 3, 4)
print mult(7)
print mult(2, 3) 
```

结果：

```
$ python multiop.py
24
7
6 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T23:02:15.853

您自己编写代码的尝试非常接近工作。您只需要更改递归步骤以进行递归，`wrapper`而不是将除一个参数之外的所有参数传递给`f`：

```
def binop_to_multiop(f):
    @functools.wraps(f)
    def wrapper(*args, **kwds):
        if len(args) == 1: return args[0]
        return f(args[0], wrapper(*args[1:], **kwds), **kwds)
    return wrapper 
```

我对基本案例没有任何问题，所以我不确定你的评论`#fails`是关于什么的。

您可能还需要考虑从列表的哪一端开始求解（即，您的运算符具有[左关联性还是右关联性](http://en.wikipedia.org/wiki/Operator_associativity)）。对于像乘法和加法这样的运算符，因为没有关系`(a+b)+c = a+(b+c)`，但对于其他运算符，您可能会得到奇怪的结果。例如，减法可能不会像您预期的那样工作：

```
@binop_to_multiop
def sub(a, b):
    return a - b 
```

使用上面定义的装饰器，`sub(a, b, c)`将给出不同的结果`a-b-c`（它会`a-(b-c)`代替`(a-b)-c`）。如果您希望它们以相同的方式运行，您可以重新定义装饰器以保持关联（就像大多数计算机语言中的大多数数学运算符一样），如下所示：

```
def left_associative_binop_to_multiop(f):
    @functools.wraps(f)
    def wrapper(*args, **kwds):
        if len(args) == 1: return args[0]
        return f(wrapper(*args[:-1], **kwds), args[-1], **kwds)
    return wrapper 
```

一种更复杂的方法是将关联性作为装饰器的参数，但如果您不希望该参数是必需的，这将变得棘手。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T23:03:12.267

```
def binop_to_multiop(f):
    def wrapper(*args):
        return reduce(f, args) if args else None
    return wrapper

@binop_to_multiop
def mult(a, b):
    return a*b

print mult(2,3,4)
print mult(7)
print mult(2,3)
print mult(4,5,6,7) 
```

给 24 7 6 840

# c - 掷骰子程序有问题

> ID：12574004
> 
> 赞同：1
> 
> 时间：2012-09-24T22:49:26.677
> 
> 标签：c, loops, dice

我编写了这个程序，该程序将一对骰子掷了 20000 次。规则是：

*   如果掷出 7 或 11，则玩家获胜
*   如果掷出 2、3 或 12，则玩家输。
*   如果以上都没有滚动，则存储总和并再次滚动骰子

二轮规则：

*   如果掷出 7，则玩家获胜
*   如果掷出与之前相同的总和，则玩家输
*   如果不是，则玩家再次滚动，直到满足这两个条件中的任何一个。

最后，它会计算赢得比赛的百分比。我的问题是，根据同事的说法，我应该获得 39%-60% 左右的游戏获胜率，但每次运行程序时，我都会获得 20% 左右，我不明白为什么。难道我做错了什么？有人能帮助我吗？

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

main()
{   
int dieOne, dieTwo, keyValue, value, wins = 0, firstWins = 0, subWins = 0, loss = 0, count=0;
double percentWin, percentFirstWins, percentSubWins;
srand(time(NULL));

do{
dieOne = rand() % 6 + 1;
dieTwo = rand() % 6 + 1;
value = dieOne + dieTwo;
count++;

if (value==7||value==11) {
    firstWins++;
    wins++;
}

else if (value== 2||value==3||value==12) {
    loss++;
}

else {
    do{ 
    keyValue = value;

    dieOne = rand() % 6 + 1;
    dieTwo = rand() % 6 + 1;
    value = dieOne + dieTwo;
    count++;

    if (value==7) {
    subWins++;
    wins++;
    }

    else if (value = keyValue) { 
        loss++;
    }

    } while ( value != 7 && value != keyValue );
}
} while (count <= 20000);

    percentWin = (double) wins/count * 100;
    percentFirstWins = (double) firstWins/count * 100;
    percentSubWins = (double) subWins/count * 100;
    printf("You won %.1lf percent of your games! \nYou won %.1lf percent of games on the first roll.\nYou won %.1lf percent of games on the second roll.\n", percentWin, percentFirstWins, percentSubWins );

    system("pause");
} 
```

掷出 7 有 6 种可能的方式，掷出 11 有两种可能的方式
。在第一次掷骰时共有 8 种可能的获胜方式。
掷骰子有 36 (6^2) 种可能的方式。这意味着您有 36 分之 8 的机会在第一次掷骰时获胜，或大约 22% 的时间获胜。

此外，我们有 2 种可能的方式来掷 2，2 种可能的方式来掷 3，以及 2 种可能的方式来掷 12。所以这意味着在第一次失败时有六分之一的机会 (6/36)滚动，或大约 17% 的时间。

所以剩下的61%的胜负都要来自第二卷。无论如何，我的程序产生了非常高的连败，而我同事的程序似乎产生了 40-60% 的总胜率。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T23:11:56.017

This may be what's causing your problem:

```
else if (value = keyValue) { 
```

You're assigning, rather than comparing. This will always evaluate to true, thus artificially inflating your losses. You should be using `==` here instead of `=`.

Also, for rolls that are neither a win nor a loss, you're not incrementing either the `wins` or the `loss` counter for either of those, but you are adding to `count`. So you're going to end up with a situation where `wins + loss != count`. When you calculate the win percentage, try calculating it as `wins / (loss + wins)`.

# android - 从 ListView 获取复选框值

> ID：12574012
> 
> 赞同：0
> 
> 时间：2012-09-24T22:50:12.830
> 
> 标签：android

我有一个与数组适配器相关联的列表视图。对于我的生活，我无法弄清楚如何在列表视图中获取选中框的列表。

```
CheckViewArrayAdapter adapter;
    int[] intarray;

    paramListView = (ListView) findViewById(R.id.datalog_paramselectlist);

    // get all supported params
    intarray = ConMan.Ecu.getSupportedParamArrayVals();

    LinkedHashMap<Integer,String> hm = new LinkedHashMap<Integer,String>();

    for( x=0;x<intarray.length;x++){
         hm.put(intarray[x] , ConMan.Ecu.paramToText(intarray[x]));
    }

    adapter = new CheckViewArrayAdapter(this,android.R.layout.simple_list_item_multiple_choice , android.R.id.text1, hm);
    adapter.setBoolArray(ConMan.Ecu.getSelectedParamFlagArray());

    // Assign adapter to ListView
    paramListView.setAdapter(adapter); 
```

我有一个适用于 paramListView 的 setOnItemClickListener，但我只想在屏幕退出时获得最后一组选中的复选框。我根本不知道去哪里找。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T23:01:34.563

> 我有一个适用于 paramListView 的 setOnItemClickListener，但我只想在屏幕退出时获得最后一组复选框。

我假设您没有为 ListView 设置选择模式。如果你确实使用：

```
listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE); 
```

然后在您的`onPause()`方法中，您可以请求检查行的索引，[`ListView#getCheckedItemPosition()`](http://developer.android.com/reference/android/widget/AbsListView.html#getCheckedItemPositions%28%29)而无需在 OnItemClickListener 中手动更改检查状态。

# php - Zend DB 与 Postgres 的 nextval() 问题

> ID：12574013
> 
> 赞同：1
> 
> 时间：2012-09-24T22:50:16.617
> 
> 标签：php, zend-framework, postgresql, zend-db, nextval

好的，这是一个两部分的问题，首先主要关注的是`nextval()`位。我有一个表，其中一列是自动递增列。作为 postgres 和 Zend DB 的新手，我遇到了麻烦。在表格中插入新行。

这就是我迄今为止所拥有的（并且在 CLI 中有效）。但不是在 Zend DB 的东西中..

```
class Comments extends Zend_Db_Table_Abstract
{

    protected $_name = 'comments';

    public function setComment($comment_id = null, $id = null, $comment = null)
    {
        if(($comment_id == null)||(empty($comment_id))||(trim($comment_id) == '')){return false;}
        if(($id == null)||(empty($id))||(trim($id) == '')){return false;}
        if(($comment == null)||(empty($comment))||(trim($comment) == '')){return false;}

        echo 'check one';

        $db = Zend_Db_Table::getDefaultAdapter();
        if($comment_id == "none")
        {
            $created = time()*1000;
            $data = array(
                        "comment_id" => nextval('comments_comment_id_seq'),
                        "comment" => $comment,
                        "comment_level" => 1,
                        "is_active" => true,
                        "status" => 0,
                        "id" => $id,
                        "user_id" => $_SESSION['role']['user_id'],
                        "ts_create" => $created,
                        "ts_mod" => $created
                    );
            $table->insert($data);
            return true;
        }

    }
} 
```

我得到的错误是：

> **致命错误：在第****45** 行的**/home/src/branches/portal/application/model/Comments.php**中调用未定义函数 nextval()

 **所以不太确定如何调整。我对 mySQL 更熟悉，我可以直接删除`NULL`它，它会自动递增。所以总而言之，最大的问题是 nextval，Zend DB 在框架中有什么东西可以解决这个问题吗？

下一部分，因为这是一个两部分的问题。通过使用`$table->insert($data);`会自动使用`$_name`变量吗？我通读了有关该主题的 Zend 文档，但目前它让我有点困惑，因为如何在插入的情况下定义正确的表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T22:54:33.213

用这个：

```
"comment_id" => new Zend_Db_Expr("nextval('comments_comment_id_seq')"), 
```**

# heroku - 工具带安装：找不到 gem Heroku

> ID：12574014
> 
> 赞同：6
> 
> 时间：2012-09-24T22:50:18.133
> 
> 标签：heroku

当我尝试从应用程序目录中的终端执行任何 Heroku 命令时，我收到“找不到 RubyGem heroku (Gem::LoadError)”。已尝试擦除并重新安装 Toolbelt，以及任何以前安装的 Heroku gem。

使用完整路径和--app 名称有效（/usr/bin/heroku config--app myapp-stage）。使用 OS X 10.8.1。

```
echo $PATH
/Users/johndoe/.rvm/gems/ruby-1.9.3-p194@llctlc/bin:/Users/johndoe/.rvm/gems/ruby-1.9.3 p194@global/bin:/Users/johndoe/.rvm/rubies/ruby-1.9.3-p194/bin:/Users/johndoe/.rvm/bin:/Users/johndoe/.gem/ruby/1.8/bin:/usr/local/bin:/usr/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/X11/bin:/usr/bin/heroku:/opt/local/sbin:/opt/local/bin:/usr/local/mysql/bin:/Users/johndoe/.ec2/bin:/usr/local/git/bin

$ heroku
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:777:in `report_activate_error': Could not find RubyGem heroku (>= 0) (Gem::LoadError)
from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:211:in `activate'
from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:1056:in `gem'
from /Users/johndoe/.gem/ruby/1.8/bin/heroku:18 
```

提前感谢您的任何帮助或建议。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-20T01:14:25.633

我有同样的问题。

*   卸载 Gem `gem uninstall heroku`（选择“所有版本”）。
*   通过运行找到你的 Ruby 'bin' 路径`gem env`（它在' `EXECUTABLE DIRECTORY:`'下）
*   `cd`到`bin`文件夹。
*   删除 Heroku 可执行文件`rm heroku`
*   重新启动您的外壳（关闭终端选项卡并重新打开）
*   点击`heroku version`，您现在应该会看到如下内容：

`heroku-toolbelt/2.33.1 (x86_64-darwin10.8.0) ruby/1.9.3`

现在你可以`heroku login`按照[他们的指示](https://toolbelt.heroku.com)重新开始黑客攻击 :)

# sql-server-2008 - 当两者之间没有间隙时，tsql 将记录与开始日期和结束日期合并的最佳方法

> ID：12574016
> 
> 赞同：1
> 
> 时间：2012-09-24T22:50:24.387
> 
> 标签：sql-server-2008, tsql

我有一个映射表如下：

```
FirstEntityID int
MappedTo int
BeginDate Date
EndDate Date 
```

假设我在表中有以下记录：

```
FirstEntityID  MappedTo  BeginDate     EndDate 
     1             2     2012-09-01   2012-10-01
     2             3     2012-09-01   2012-10-01
     1             2     2012-10-02   2012-11-24
     2             3     2012-11-01   2012-11-24 
```

我需要一个脚本来获取此表并根据开始和结束日期合并记录以返回如下结果：

```
 FirstEntityID  MappedTo  BeginDate     EndDate 
     1             2     2012-09-01   2012-11-24
     2             3     2012-09-01   2012-10-01
     2             3     2012-11-01   2012-11-24 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:07:44.887

使用 CTE，我们首先找到开始日期：

```
; WITH StartD AS
  ( SELECT 
        FirstEntityID
      , MappedTo
      , BeginDate
      , ROW_NUMBER() OVER( PARTITION BY FirstEntityID, MappedTo
                           ORDER BY BeginDate )
          AS Rn 
    FROM
        tableX AS t
    WHERE
        NOT EXISTS
        ( SELECT *
          FROM tableX AS p
          WHERE p.FirstEntityID = t.FirstEntityID
            AND p.MappedTo = t.MappedTo
            AND p.BeginDate < t.BeginDate 
            AND t.BeginDate <= DATEADD(day, 1, p.EndDate)
        )
  ) 
```

然后是结束日期：

```
, EndD AS
  ( SELECT 
        FirstEntityID
      , MappedTo
      , EndDate
      , ROW_NUMBER() OVER( PARTITION BY FirstEntityID, MappedTo
                           ORDER BY EndDate )
          AS Rn 
    FROM
        tableX AS t
    WHERE
        NOT EXISTS
        ( SELECT *
          FROM tableX AS p
          WHERE p.FirstEntityID = t.FirstEntityID
            AND p.MappedTo = t.MappedTo
            AND DATEADD(day, -1, p.BeginDate) <= t.EndDate
            AND t.EndDate < p.EndDate
        )
  ) 
```

和最终结果：

```
SELECT
    s.FirstEntityID
  , s.MappedTo
  , s.BeginDate
  , e.EndDate
FROM
    StartD AS s
  JOIN
    EndD AS e
      ON  e.FirstEntityID = s.FirstEntityID
      AND e.MappedTo = s.MappedTo
      AND e.Rn = s.Rn ; 
```

在**[SQL-Fiddle中测试](http://sqlfiddle.com/#!3/76878/10)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T23:05:57.347

测试了这个，它似乎工作

它将在具有重复行的边缘情况下失败。
为此，需要使用像 Ypercube 这样的 RowNumber 方法。
或者在表上添加一个约束来强制该行是唯一的。

```
-- first the overlaps
SELECT T1.FirstEntityId, T1.MappedTo, T1.BeginDate, Max(T2.EndDate) as [EndDate]
FROM tablex as T1
join tablex as T2  
  on  T1.FirstEntityId = T2.FirstEntityId
  and T1.MappedTo = T2.MappedTo
  and T1.EndDate >= T2.BeginDate 
  and T1.EndDate <  T2.EndDate
  and T1.BeginDate <= T2.BeginDate
GROUP BY T1.FirstEntityId, T1.MappedTo, T1.BeginDate  

union

-- add the non overlaps
SELECT T1.FirstEntityId, T1.MappedTo, T1.BeginDate, T1.EndDate
FROM tablex as T1
join tablex as T2  
  on  T1.FirstEntityId = T2.FirstEntityId
  and T1.MappedTo = T2.MappedTo
  and (  T1.EndDate  < T2.BeginDate or T1.BeginDate > T2.EndDate 
   or   (T1.BeginDate  < T2.BeginDate and T1.EndDate > T2.EndDate) )

order by FirstEntityId, MappedTo, BeginDate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T22:52:55.263

这可能有效：

```
SELECT FirstEntityId, MappedTo, Min(BeginDate), Max(EndDate)
FROM
    T1
GROUP BY
    FirstEntityId, MappedTo 
```

# asp.net - 在 ASPxGridView 中更改列顺序时保持列状态

> ID：12574017
> 
> 赞同：0
> 
> 时间：2012-09-24T22:50:29.403
> 
> 标签：asp.net, .net, vb.net, devexpress, aspxgridview

我有一个带有一些数据的 DevExpress 的 ASPxGridView。

该网格提供了一种功能，允许我更改其列的顺序。例如，我得到了这些列：

![在此处输入图像描述](../Images/4dd8561b61d31887582e314124a3f7c6.png)

我可以和他们一起做：

![](../Images/2183042646dcbd1589fcd8eabda0b34d.png)

（请注意，我更改了 PC-PEC 和 DES-CAP 列的顺序）

如您所见，数据和列名已更改，但单元格的颜色仍然相同。我不知道该怎么做。当我切换可以帮助我的列时，我没有发现网格触发的任何事件。

这是我设置单元格颜色的方法：

```
Protected Sub grdxOperacao_HtmlRowPrepared(ByVal sender As Object, ByVal e As DevExpress.Web.ASPxGridView.ASPxGridViewTableRowEventArgs)
    'I delete some code here for the sake of brevity
    e.Row.Cells(4).Attributes.Add("style", "font-weight:bold;color:red;")
End Sub 
```

也许如果我能找到一种方法来画它们而不是`index`它会起作用？或者也许是通过javascript，我不知道。

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:38:17.933

您应该使用[ASPxGridView.HtmlDataCellPrepared Event](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_HtmlDataCellPreparedtopic)。

```
protected void ASPxGridView1_HtmlDataCellPrepared(object sender, ASPxGridViewTableDataCellEventArgs e) {
    if (e.DataColumn.FieldName == "<your column field name>") 
    {
        e.Cell.ForeColor = System.Drawing.Color.Red;
    }
} 
```

# java - 前瞻断言（正则表达式）在 JFlex 中不起作用

> ID：12574018
> 
> 赞同：1
> 
> 时间：2012-09-24T22:50:42.430
> 
> 标签：java, regex, jflex

我正在尝试使用 JFlex 生成扫描仪。

我试图实现的语法的标识符规则之一如下（在正则表达式语法中）：

```
[a-zA-Z]((_(?!_)|[a-zA-Z0-9])*[a-zA-Z0-9])? 
```

我已经验证了上面的表达式实际上是有效的并且有效。然而，jFlex 1.4.3 似乎不喜欢我使用前瞻断言`(?!_)`，因为它一直在抱怨“*问号*”。是我做错了什么还是在 JFlex 中使用前瞻有什么不同？

我正在使用“*前瞻*”来满足标识符名称中不能有两个连续下划线的规则。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T23:02:57.970

代替

```
[a-zA-Z]((_(?!_)|[a-zA-Z0-9])*[a-zA-Z0-9])? 
```

使用**优化**模式

```
[a-zA-Z]+(_[a-zA-Z0-9]+|[a-zA-Z0-9]+)* 
```

# reflection - QTP 检索已经执行的代码

> ID：12574023
> 
> 赞同：1
> 
> 时间：2012-09-24T22:51:05.257
> 
> 标签：reflection, qtp

我试图找出一种方法来反思地查看我在 QTP 脚本中执行的代码。这里的想法是，当我遇到崩溃时，有一个恢复方案来捕获错误消息并将其作为缺陷发送给 QC。如果我能看到我已经执行的代码，那么理论上我也可以包括重现缺陷的步骤。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T08:55:57.643

**选项 1：电影录制和播放**

QTP11（终于）有一个功能来满足这样的需求：看看`Tools`, `Options`, `Run`, `Screen capture`. ” `Save movie to results`“那里可以让你准确记录发生的事情。生成的影片是运行结果的一部分，即，如果您提交带有此运行结果的错误，该影片将被包括在内。

我不会使用这样的功能，因为您必须始终录制电影，以防万一出现错误。您最终会得到包含没人想看的电影的大型运行结果，只是为了在发生错误并创建缺陷的极少数情况下使用它们。*但：*

在这方面，惠普做得很对：您可以在对话框中选择仅在发生错误时将电影保存到结果中。并且，为了避免保存不包含错误的测试执行的钻孔部分，但看到导致错误的关键步骤，您可以指定仅保留影片的最后 N kB，这样您将始终看到导致错误的原因到错误。

**选项2：“宏”录制和播放**

理论上，您可以为所有测试对象创建自己的播放方法（通过 RegisterUserFunc 注册函数），并让它们在执行播放步骤之前将调用信息保存到某个数据结构中（通过调用原始播放函数）。

然后，仍然在理论上，您可以创建一个不错的小回放引擎，它迭代该数据结构并准确执行之前记录的回放步骤。

在更改 AUT 配置以在各种配置上迭代给定播放而不更改执行原始播放的代码后，我已经做了类似的事情来重复播放步骤包。

但是，嘿，这是一项相当多的工作，很多事情都可能出错：AUT 在播放时必须处于与“播放记录”期间相同的初始状态。这包括测试环境的所有相关数据库和子系统。通常，这在大型项目中不是一件容易的事，而且不值得麻烦（我们正在谈论重新创建原始初始配置只是为了重现一个错误）。

**所以我建议你检查一下电影功能，即选项 1。它不会播放 AUT 中的步骤，但它会显示原始播放过程中发生的事情 - 完全正确。**

# facebook - Facebook 授权重定向到移动设备上的“未找到您请求的页面”

> ID：12574026
> 
> 赞同：0
> 
> 时间：2012-09-24T22:51:24.680
> 
> 标签：facebook

我一直在构建一个社交送礼平台，并且已经在以下位置运行了几个月的应用程序：`http://egift.me/promos/venue/facebookconnect`

该应用程序有一个简单的用户流程。单击登录/连接 facebook 按钮，登录和/或授权应用程序，您将被重定向到“谢谢/确认”样式页面。

如果我在标准浏览器上逐步完成，我没有问题。如果我在移动设备上逐步执行此操作，我最终会得到可爱的“找不到您请求的页面”页面。

我没有配置移动 Web url，我只是使用带有 Facebook 登录的网站。即使我尝试添加移动 Web url（它是相同的基本 URL，我正在使用 View Switching 来提供桌面与移动优化的视图），我也遇到了同样的问题。

有人知道发生了什么吗？我可以提供任何其他信息吗？

[更新]

这有效（一定要改变你的范围）：

```
//instead of onClick could just as easily use something like jQuery event binding
<button onClick="loginUser();">Login</button>
<script type="text/javascript">
function loginUser() {
    FB.login(function (response) { }, { scope: 'YOUR_SCOPE_HERE' });
}

FB.getLoginStatus(function (response) {
    FB.Event.subscribe('auth.authResponseChange', handleResponse);
});
handleResponse = function (response) {
    document.body.className = response.authResponse ? 'connected' : 'not_connected';
    if (response.status === 'connected') {
        // the user is logged in and has authenticated your
        // app, and response.authResponse supplies
        // the user's ID, a valid access token, a signed
        // request, and the time the access token 
        // and signed request each expire
    } else if (response.status === 'not_authorized') {
        // the user is logged in to FB, but has not yet authenticated your app
    } else {
        // the user is not logged in to FB
    }
};
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:20:09.893

对于移动网络应用程序，我建议通过 SDK 本身使用 FB.login，而不是通过使用登录按钮。如果不出意外，它可以让您更好地以编程方式控制用户流程和体验。

规范的“有史以来最简单的社交应用”片段是：

```
FB.login(function(response) {
  if (response.authResponse) {
    console.log('Fetching user info');
    FB.api('/me', function(response) {
      console.log('Hello ' + response.name + '!');
     });
  } else {
     console.log('User cancelled login or did not fully authorize');
  }
}); 
```

无论如何，您还包括插件的 JS SDK，因此没有有效负载开销。此处有关 FB.login 的更多详细信息：[https ://developers.facebook.com/docs/reference/javascript/FB.login/](https://developers.facebook.com/docs/reference/javascript/FB.login/)

# playorm - PlayORM 入门

> ID：12574027
> 
> 赞同：0
> 
> 时间：2012-09-24T22:51:25.693
> 
> 标签：playorm

playORM 有什么“方法”吗？我刚刚开始使用它，除了将 Ant 构建文件导入 Eclipse 之外，还没有其他任何方法。我在解压后的 tarball 中没有看到类似自述文件的内容，除了`examples/`目录中的“这是示例目录”的文件和主目录中的功能列表。有什么我可以开始使用 playORM 的东西，还是只是为了反复试验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:44:46.890

非常抱歉，我们正在处理文档。在那之前，这里是步骤

1.  看看 playOrm
2.  运行 build 或 build.bat 生成解析器代码
3.  导入eclipse
4.  右键单击 com.alvazan.test 文件夹并选择 run As -> Junit test (所有测试都应该通过)
5.  修改 FactorySingleton.java（将 IN_MEMORY 更改为 CASSANDRA 并根据需要更改种子）
6.  如果你愿意，可以再次运行测试套件，这样你就可以玩了
7.  现在所有测试都通过了，你知道这一切都很好，每个测试都是完美的例子，引导程序是 FactorySingleton，所以你可以查看它的代码来开始

最后注意：您的 jar 需要一个文件 nosql.Persistence 或 PlayOrm（就像 hibernate 一样）不会扫描您的 jar 中的类。

后来，迪恩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T09:06:46.873

文档现在可在[https://github.com/deanhiller/playorm/wiki获得](https://github.com/deanhiller/playorm/wiki)

# html - 强制使用数字键盘但允许标点符号：HTML5、移动 Safari

> ID：12574028
> 
> 赞同：0
> 
> 时间：2012-09-24T22:51:35.813
> 
> 标签：html, mobile-safari

我正在构建一个 HTML 页面，以便在移动 Safari [和其他平台] 中查看。该页面允许用户指定几个开始和结束时间。他们必须至少输入两次，并且可能更多，这取决于他们的情况。

我希望用户能够使用数字 SHIFT 模式键盘将他们的时间作为数字和标点符号输入，即用户将看到如下字段：

![表单域](../Images/23da55cd512ce6df5b1ca2326c75586a.png)

当他们专注于该字段时，他们将获得数字 SHIFT 键盘：

![在此处输入图像描述](../Images/ec7e74a2d40f64a197bded70fc32bd35.png)

**不会工作：**

`<input type="time">`（和相关的日期时间类型）不是一个选项。从 HCI 的角度来看，滚轮是不可接受的，特别是对于重复输入。

`<input type="number">`一开始做正确的事。它在数字移位模式下触发键盘，即数字和标点部分默认可见。但是当您退出该字段时，移动 Safari 会删除标点符号（即冒号）。我尝试使用表单关闭验证，`novalidate`但没有奏效。

`<input type="text" pattern="[0-9]*">`触发电话键盘，无法输入冒号字符。

我可能只需要在 PATTERN 属性中使用不同的 RegExp，但我尝试过的每一个都会触发普通的 alpha 键盘，并且用户必须按一个键才能进入数字 SHIFT 键盘。

谁能告诉我如何在不触发用户输入的严格验证规则的情况下强制键盘进入数字 SHIFT 显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T01:09:46.233

看看 jQuery Mobile 日期框。[在这里](http://dev.jtsage.com/jQM-DateBox/)。您可能想在这里重新考虑文本输入。也许你想和一个选择器一起去。Sencha Touch 还有一个 DatePicker。我编写了一个实现时间选择器对象的扩展。如果你需要我，我会把它扔到 GitHub 上。

# java - Android 数据库最佳实践

> ID：12574034
> 
> 赞同：1
> 
> 时间：2012-09-24T22:52:22.167
> 
> 标签：java, android, database, sqlite, oop

来自 perl 背景并在其中完成了一些简单的 OO，我正在努力掌握与数据库交互的 android/Java 方式。

根据我的经验，我会为每个对象创建一个文件或类，并且一个对象将匹配/表示数据库中的一个表。

在该对象中将是一个构造函数、数据变量、返回单个变量的方法/函数，还有从 DB 读取和写入的 DB 查询，执行所有必要的 CRUD 功能。

根据我在网上阅读的内容，在 Android 中，我将创建类似的对象，但没有数据库交互。这将发生在一个包含我所有数据库功能的单个类中，或者多个数据库类中，每个表一个。

我的问题都与最佳实践有关。

我可以像在 Perl 中那样做我的应用程序吗？如果不是，为什么不，如果是，有什么优点、缺点和限制？

术语 DAO、适配器和 POJO 是什么意思？

我应该创建一个应用程序类并在那里全局声明数据库吗？

我应该在每个活动中创建一个处理程序还是只在应用程序类中创建一个处理程序？

我已经阅读了很多教程，现在我的头都在旋转，所有这些教程都有不同的做事方式，而且大多只有一个表格，很少显示直接代表表格的实际对象。

我很高兴听到意见，链接到教程或解释奇怪的术语。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T23:00:42.520

如果我没看错，[ORMLite](http://ormlite.com/)可能是你最好的选择。它使用反射来创建和维护数据库，这似乎是 Perl 的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T23:01:23.787

POJO 是`Plain old java object`这意味着它只是一个普通的类。

适配器将是包含 CRUD 内容并管理数据库本身的类。Android 世界中有很多模式，谈论可以填满一本书。我更喜欢这种模式，我在我的 Application 类中打开数据库一次，我从不关闭它（Android 在杀死应用程序时会这样做）。我拥有的一个非常古老的项目的[样本可能会向您展示基本思想。](http://shuffle-city.org/projects/sc/repository/entry/trunk/android/src/org/shufflecity/android/database/DatabaseAdapter.java)

DAO`Data Access Object`可以写几十本书。如果只是开始编程，看看你要去哪里......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T23:21:50.690

另一张海报是正确的，将 ORMLite 作为一种管理镜像数据库的代码关系的好方法是正确的。但是，如果您想自己做，有很多方法可以做事，我不会说社区真的倾向于其中一种。就个人而言，我倾向于让我的实体由普通旧 Java 对象表示（`POJO`- 表示与其他事物没有特殊连接，如数据库），其中表的各种属性对应于字段值。然后，我通过数据访问对象 ( `DAO`) 持久化并检索这些对象。DAO 都可以访问共享的、开放的数据库对象——他们根据需要执行查询。

例如：如果我有一个 table `foo`，我会有一个对应的 entity `class Foo`，其属性对应于列。 `class FooDAO`将有机制获得`Foo`：

```
public Foo getFooById(Integer id) {
   String[] selection = {id.toString()};
   String limit = "1"
   Cursor c = mDatabase.query(FOO_TABLE, null, "id=?", selection, null, null, null, 1);
   // Create a new Foo from returned cursor and close it
} 
```

第二个实体`bar`可能有很多`foo`. 为此，我们将在 Bar 中引用`FooDAO`以获取 bar 的所有成员 foo：

```
public class Bar {
  public List<Foo> getFoo() {
    return mFooDAO.getFooByBar(this);
  }
} 
```

等等......像这样滚动你自己的 ORM 可以做的范围非常广泛，所以你需要做多少就做多少。或者只是使用[ORMLite](http://ormlite.com/)并跳过整个事情:)

此外，android 工程师不赞成将 Application 子类化为支持单例的全局可访问对象[（](https://stackoverflow.com/questions/3826905/singletons-vs-application-context-in-android)参见 hackbod 的回答），但意见不一

# apache - 绝对引用资源的 Apache URL 重写

> ID：12574036
> 
> 赞同：1
> 
> 时间：2012-09-24T22:52:25.523
> 
> 标签：apache, url-rewriting

我有一个 Apache Web 服务器作为多个内部站点的代理。到目前为止，一切都运行良好，因为所有站点的工作方式如下：

> www.proxy.com/app01 -> www.some_other_server.com/app01

需要通过代理访问新站点，这不是问题，但所有资源（图像等）都是绝对定位的，而不是相对的。例如

> www.proxy.com/new_site -> www.some_new_server.com/new_site（工作）www.proxy.com/new_site/index.html -> www.some_new_server.com/new_site/index.html（工作）www.proxy。 com/new_site/image.png -> www.some_new_server.com/new_site/image.png（不起作用，因为图像位于 www.some_new_server.com/image.png）

内部站点 (new_site) 不能修改，只能修改 Apache 代理。

可以将 Apache 代理配置为重写页面以使资源不再是相对的吗？还有哪些其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T23:26:11.990

您可以在为其他所有内容使用反向代理指令**之前专门为图像（或其他任何内容）添加反向代理：**

```
ProxyPassMatch ^/new_site/(.*)\.(gif|jpe?g|png|ico)$ http://www.some_new_server.com/$1.$2 
```

# mongodb - mongoid where 和关联值为 nil

> ID：12574038
> 
> 赞同：1
> 
> 时间：2012-09-24T22:52:34.553
> 
> 标签：mongodb, mongoid

我对 mongoid 查询有点迷茫。我有一个拥有一家公司的用户。这是模型

```
class Company
    include Mongoid::Document
    include Mongoid::Timestamps

    field :name,                        :type => String
    field :description,         :type => String
    field :order_minimun,       :type => Float

    belongs_to :user

  def candidate_users
    User.where(:company_id => nil)
  end

end

class User
  include Mongoid::Document
    include Mongoid::Timestamps

    ROLES = %w[admin company_owner customer]

  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable, :omniauthable

  ## Database authenticatable
  field :email,              :type => String, :default => ""
  field :encrypted_password, :type => String, :default => ""

  validates_presence_of :email
  validates_presence_of :encrypted_password

  ## Recoverable
  field :reset_password_token,   :type => String
  field :reset_password_sent_at, :type => Time

  ## Rememberable
  field :remember_created_at, :type => Time

  ## Trackable
  field :sign_in_count,      :type => Integer, :default => 0
  field :current_sign_in_at, :type => Time
  field :last_sign_in_at,    :type => Time
  field :current_sign_in_ip, :type => String
  field :last_sign_in_ip,    :type => String

    field :name,               :type => String
    field :last_name,          :type => String
    validates_presence_of :name
    #validates_uniqueness_of :name, :email, :case_sensitive => false

    field :roles_list,                  :type => Array , :default => ['customer']
    validates_uniqueness_of :email, :case_sensitive => false

    has_one :company
end 
```

我想列出没有公司的用户以及拥有公司实例的用户。

我的第一次尝试（只是没有公司的用户）：

```
 def candidate_users
    User.where(:company_id => nil)
  end 
```

像这样的东西

```
def candidate_users
    User.any_of(:company_id => self.id, :company_id => nil)
  end 
```

但我没有运气，这会返回所有用户。

有人可以帮我解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:16:44.330

对于 mongoid，the`foreign field`总是在`belongs_to`关联的一边。所以`Company`对象会有一个`user_id`字段，但`User`对象不会有一个`company_id`字段。因此，您的查询返回所有用户是“正常的”

由于 mongodb 中没有 join 的概念，您可以通过反转关联（用户属于公司，公司 has_one 用户）来实现这一点，或者您可以执行两个查询：

```
# First, finding ids of users that have a company
ids = Company.excludes(user_id: nil).only(:_id).map(&:id)

# Then, find users whose ids are not in that array
users = User.not_in(_id: ids) 
```

仍然保留关于`any_of`：

`any_of`正在`$or`查询所有哈希参数。通过这样做`User.any_of(:company_id => self.id, :company_id => nil)`，您只提供数组，这与`User.where(:company_id => self.id, :company_id => nil)`. 我想你想做的是`User.any_of({:company_id => self.id}, {:company_id => nil})`

# java - 错误 500 - Wrapper 找不到 servlet 类 Tomcat6

> ID：12574041
> 
> 赞同：0
> 
> 时间：2012-09-24T22:52:48.990
> 
> 标签：java, servlets, tomcat6

这些天我真的要疯了，我正在尝试开发一个servlet，但我真的不明白为什么这个不起作用。

这是代码：

```
import java.io.IOException;
import javax.servlet.ServletException;

import java.io.BufferedReader;
import java.io.PrintWriter;

import javax.servlet.ServletResponse;
import javax.servlet.ServletRequest;
import javax.servlet.GenericServlet;

public class WipdServlet extends GenericServlet 
{
    public void service(ServletRequest request, ServletResponse response)
    throws IOException {
        PrintWriter out = response.getWriter();

        out.println("<html>");
        out.println("<body>");
        out.println("<h1>ssup WIPD Servlet</h1>");
        out.println("Content Type: " + request.getContentType());
        out.println("Content Length: " + request.getContentLength());
        out.println("</body>");
        out.println("</html>"); 

    }
} 
```

和 web.xml：

```
<web-app>
    <servlet>
        <servlet-name>Wipd</servlet-name>
        <servlet-class>WipdServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>Wipd</servlet-name>
            <url-pattern>/wipd</url-pattern>    
    </servlet-mapping>
</web-app> 
```

servlet 位于：

```
/var/lib/tomcat6/webapps/wipd/ 
```

对于这项工作，我需要在 VM 上运行的 Debian 上安装的 Tomcat6 下运行 servlet，我目前正在使用 servlet-api 在我的 Gentoo 上工作，在 Gentoo 上运行 javac 后，我将文件 .class 放在 Debian 上。但如果我冲浪到：

```
http://192.168.0.177:8080/wipd/wipd. 
```

我得到：

> javax.servlet.ServletException: Wrapper 找不到 servlet 类 WipdServlet 或它依赖的类 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter. java:293) org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859) org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602) org.apache.tomcat.util。 net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) java.lang.Thread.run(Thread.java:636)

我什至尝试将类放在一个包中，并编辑 web.xml 指定包，但没有。我真的无法理解。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T23:03:30.310

从异常中我可以看到您的课程不在一个包中。检查此[链接](https://stackoverflow.com/questions/6953956/javax-servlet-servletexception-wrapper-cannot-find-servlet-class)，它描述了与您类似的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T09:05:08.683

我也面临同样的问题。实际上，我的一个程序在经过几次更改后就已经开始工作了，这向我显示了这个错误。我什至做了撤消来恢复更改，但它仍然发生在我身上。最后，我为我的场景找到了一个可行的解决方案。

简单的：

1.只需尝试清理您的项目并再次运行。如果它显示相同的错误并且您确定您的代码没有任何问题，那么，

2.启用“项目”菜单下的“自动构建”菜单项并尝试清理您的项目。这次它对我有用。

听说这是因为当我们进行一些更改并运行时，eclipse 也会对其背景进行一些更改。因此，即使我们恢复更改，eclipse 也可能不会恢复它在后台所做的更改。因此，执行这两个步骤将确保它与用户更改及其背景更改相匹配。

希望它也能帮助并解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T23:24:42.863

您需要将您的 servlet 放在某个包中。进行以下更改 -

```
package a.b.c; // added

public class WipdServlet extends GenericServlet {

    // .. other code
} 
```

web.xml :-

```
<web-app>
    <servlet>
        <servlet-name>Wipd</servlet-name>
        <servlet-class>a.b.c.WipdServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>Wipd</servlet-name>
        <url-pattern>/wipd</url-pattern>    
    </servlet-mapping>
</web-app> 
```

部署后，您应该在以下位置找到您的班级 -

`/var/lib/tomcat6/webapps/wipd/WEB-INF/classes/a/b/c/WipdServlet.class`

# javascript - Chrome 扩展程序 - 与外部程序通信

> ID：12574047
> 
> 赞同：4
> 
> 时间：2012-09-24T22:53:47.553
> 
> 标签：javascript, python, html, google-chrome

我有一个外部应用程序可以自动执行网站上的某些任务。我的目标是实现一个允许程序和 Chrome 同步 cookie 的系统。虽然可以查询 Chrome 的 cookie DB 以读取 cookie，但由于 Chrome 对文件保持 I/O 锁定，因此无法更新 DB，因此无法轻松同步。

对我来说，下一个合乎逻辑的步骤是尝试创建一个扩展，它将根据需要更新 cookie（通过 Chrome 的 cookie API）。然而，经过大约两天的研究，我无法找到一种在浏览器和我的应用程序（用 Python 编写）之间传递 cookie 数据的有效方法。

套接字已被淘汰，因为它仅适用于基于桌面的应用程序。Websockets 已经出局，因为据我所知，使用 HTML5 API 设置 Websocket 服务器是不可能的（这是我需要的，因为浏览器需要成为服务器，而程序将是连接客户端）。我真的不确定我现在还剩下什么。我在这里遗漏了一些非常明显的东西吗？任何帮助表示赞赏，欢呼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T23:12:14.123

这感觉像是一种非常奇怪的方式来做任何你想做的事情。你为什么又这样做了？

无论如何，最明显的解决方案是：

![在此处输入图像描述](../Images/5601db7646be946f0d6fc5666111d653.png)

您显然必须保护应用程序/插件和服务器之间的通信。同样，这感觉像是一种非常奇怪的做事方式。但解决方案会奏效。在这种情况下，应用程序和插件*都是*WS 客户端，而您的服务器是仲裁者。

# android - 如何使用 Phonegap 将文件下载到 Android 的下载文件夹？

> ID：12574051
> 
> 赞同：7
> 
> 时间：2012-09-24T22:54:32.737
> 
> 标签：android, cordova, download, cordova-2.0.0

我已使用 Phonegap 的 File API 成功将文件下载到我的 Android 手机。我想将文件下载到手机上的“下载”文件夹中。例如，如果您从电子邮件中下载附件，该附件将转到您的“下载”文件夹。这是我的 JS 代码，它将文件下载到“file://mnt/sdcard/”：

```
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSystem) {
  fileSystem.root.getFile('myfile.jpg', {
    create: true, 
    exclusive: false
  }, function(fileEntry) {
    var localPath = fileEntry.fullPath,
        fileTransfer = new FileTransfer();        
    fileTransfer.download(uri, localPath, function(entry) {
      console.log("download complete: " + entry.fullPath);
    }, function (error) {
    console.log('download error: ' + error.code);
    console.log("download error source " + error.source);
    console.log("download error target " + error.target);
  });
  }, downloadError);
}, downloadError); 
```

必须有一种方法可以访问“下载”文件夹，因为我一直在其他应用程序中看到此功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T00:57:21.207

您可以通过在 getFile 方法中指定文件来将文件发送到下载文件夹...

```
getfile('download/myfile.jpg' ...) 
```

这不会触发下载管理器，它会在文件下载时通知您。我仍在尝试找到通过 phonegap 访问 DownloadManager 类的解决方案。我在这里问过这个问题[如何使用 Phonegap 将文件下载到 Android 的下载文件夹？](https://stackoverflow.com/questions/12574051/how-do-you-download-a-file-to-androids-downloads-using-phonegap)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-29T15:27:21.017

我创建了一个插件，它使用下载管理器下载文件并一路显示进度条

[https://github.com/vasani-arpit/cordova-plugin-downloadmanager](https://github.com/vasani-arpit/cordova-plugin-downloadmanager)

```
//after device is ready
var fail = function (message) {    
   alert(message)
}
var success = function (data) {
   console.log("succes");
}
cordova.plugins.DownloadManager.download("Your URL to download", success, fail); 
```

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-30T04:52:17.880

我有同样的问题，但我是这样解决的：

```
//if IOS cordova.file.documentsDirectory
window.resolveLocalFileSystemURL(cordova.file.externalDataDirectory, function (fileEntry) {
  var filepath = fileEntry.toURL() + filename;
  var fileTransfer = new FileTransfer();
  console.log('FilePath ' + filepath);
  fileTransfer.download(uri, filepath,
    function (fileEntry) {
      console.log("download complete: " + fileEntry.toURL());
    },
    function (error) {
      console.log("ErrorDownload: " + JSON.stringify(error));
    },
    true,
    {}
  );
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-02-11T23:53:19.027

使用这个插件：[https](https://github.com/sgrebnov/cordova-plugin-background-download) ://github.com/sgrebnov/cordova-plugin-background-download 。我在我的 Cordova 应用程序中使用它，它工作正常。

# html - HTML 嵌套有序列表

> ID：12574052
> 
> 赞同：13
> 
> 时间：2012-09-24T22:54:37.273
> 
> 标签：html

> **可能重复：**
> [制作 HTML 嵌套列表的正确方法？](https://stackoverflow.com/questions/5899337/proper-way-to-make-html-nested-list)

我想在 HTML 中生成以下内容：

```
1\. One
2\. Two
  1\. Inner One
  2\. Inner Two
3\. Three 
```

一种方法是

```
<ol>
  <li>One</li>
  <li>Two</li>
  <ol>
    <li>Inner One</li>
    <li>inner Two</li>
  </ol>
  <li>Three</li>
</ol> 
```

但是根据[制作HTML嵌套列表的正确方法？](https://stackoverflow.com/questions/5899337/proper-way-to-make-html-nested-list)这不是正确的方法。“正确”的方式产生了这个：

```
1\. One
2\. Two
3.
  1\. Inner One
  2\. Inner Two
4\. Three 
```

那么，有没有一种合适的方法来嵌套有序列表而不会出现嵌套列表的额外数字？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-24T22:57:13.957

```
<ol> 
  <li>One</li> 
  <li>Two
    <ol> 
      <li>Inner One</li> 
      <li>inner Two</li> 
    </ol>
  </li>
  <li>Three</li> 
</ol> 
```

给

1.  一
2.  二
    1.  内一
    2.  内二
3.  三

`<ul>`适用于 *u* 无序列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T22:57:08.753

我想，你正在寻找这个：

```
<ol>
  <li>One</li>
  <li>Two
  <ol>
    <li>Inner One</li>
    <li>inner Two</li>
  </ol>
  </li>
  <li>Three</li>
</ol> 
```

输出到：

```
1\. One
2\. Two
   1\. Inner One
   2\. Inner Two
3\. Three 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-24T23:03:07.547

如上所述，您只需要一个有序列表

```
<ol>
  <li>one</li>
  <li>two</li>
  <ol>
      <li>inner 1</li> 
      <li>inner 2</li>
  </ol>
  <li>three</li>
</ol> 
```

# c++ - Add variables to an array that was already declared in c++?

> ID：12574061
> 
> 赞同：0
> 
> 时间：2012-09-24T22:55:51.153
> 
> 标签：c++, vector

I want to be able to have an empty array when the program starts, fill it up during runtime, and also remove things inside of it. This would probably have to be a multidimentional array. So, how would I do this?

Ex.

```
int randomNumber;
int RandomString;
int array[] = {};
for(int i;int i < 10; int i ++){

array + random variable;
array + random string;

} 
```

So, after it would look like:

> array[] = {{randomint,randomstring},{randomint, rrandomstring}}

Is this possible?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T22:56:58.227

You'd do it using a `std::vector` and `push_back()` instead. Nuff' said.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T23:25:23.880

您只需要考虑您希望使用的容器是列表、地图还是矢量，它们都有优点和缺点。在做出决定之前做更多的功课，我的直觉是一个向量或一个列表列表，因为你想要一个空的，然后添加到它。考虑是否要订购此 Container 以及是否要枚举它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T23:02:42.123

如果要将预定义变量添加到数组中，可能需要保存两件事，一是变量的值，二是变量本身

如果你想拥有非常简单的变量值，如果你想把它放在数组上而不是在某些动态数据类型上，那么你必须声明一个大小有限的数组来动态扩展数组，你必须使用某种类型像向量或链表这样的数据结构，并在那里添加变量的值，但是如果你想保存它自己的变量，那么你必须声明指针数组并存储变量的地址，这样你就可以能够通过使用该数组访问这些变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T08:28:17.373

您需要做的是构建一个矢量地图，其中包含一对。
然后，当您遍历数据时，您会创建一个新对并分配您需要的值。
然后将其推入向量中。

```
int randomNumber = 0;
string randomString = "test";

map< int, vector <pair< int, string >>> myArray;

for ( int i = 0; i < 10; i++ )
{
    pair<int, string> p;
    p.first = randomNumber;
    p.second = randomString;

    myArray[i].push_back(p);
} 
```

# jquery - Jquery getJSON 自动按 id 对我的数据进行排序

> ID：12574068
> 
> 赞同：15
> 
> 时间：2012-09-24T22:56:43.303
> 
> 标签：jquery, ajax, json, sorting, getjson

我有一个组合框，它在更改时触发 jquery 函数，它调用一个 php 脚本，该脚本从数据库中获取按名称而不是按 id 排序的结果（表城市），并创建一个带有 id 和城市名称的 json 文件。问题来自 $.getJSON(url, data) 函数，它可以很好地检索所有 json 编码的数据，但它似乎是按 id 自动对数据进行排序

例如，如果 php 页面生成

```
id  name
3   Dania Beach
1   Miami
2   Weston 
```

在 jquery getJSON 之后，它按 id 对其进行排序

```
id  name
1   Miami
2   Weston
3   Dania Beach 
```

有没有办法禁用排序？或者如何按名称保存顺序？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-24T23:16:18.863

这是一个关联数组：顺序无关紧要。以下 JSON 对象是等效的：

```
{
    "3" : "Danie Beach",
    "1" : "Miami",
    "2" : "Weston"
}

{
    "1" : "Miami",
    "2" : "Weston",
    "3" : "Danie Beach"
} 
```

如果您需要排序，则应改为在 JSON 中嵌入一个数组：

```
{
    "beaches" : [
        {"key" : "3", "value" : "Danie Beach"},
        {"key" : "1", "value" : "Miami"},
        {"key" : "2", "value" : "Weston"}
    ]
} 
```

示例用法：

```
jQuery.ajax({
    ...
    dataType: 'json',
    success: function(data) {
        jQuery.each(data.beaches, function(i, beach) {
            alert(i+': beach['+beach.key+'] = '+beach.value);
        });
    }
}); 
```

# ios - 为多个 UIButtons 设置自定义 titleLabel 属性

> ID：12574069
> 
> 赞同：0
> 
> 时间：2012-09-24T22:56:55.200
> 
> 标签：ios

我有一个自定义按钮，例如：

```
UIButton *catBtn1 = [UIButton buttonWithType:UIButtonTypeCustom];
catBtn1.frame = CGRectMake(0, 344, 427, 67);
catBtn1.titleLabel.font = categoryFont;
catBtn1.titleLabel.textColor = [UIColor whiteColor];
catBtn1.titleLabel.frame = CGRectMake(52, 21, 150, 15);
catBtn1.titleLabel.textAlignment = UITextAlignmentLeft; 
```

有没有一种快速的方法来`titleLabel`为我的所有按钮设置所有这些属性，而不为每个按钮都这样做？我尝试分配一个实例，`UILabel`但`catBtn1.titleLabel`没有奏效......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:10:27.717

您可以像这样为按钮创建方法...

```
-(UIButton *) customBtn:(NSString *)btntxt:(CGFloat)btnx:(CGFloat)btny:(CGFloat)btnwidth
{
    UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
    //[btn setTitle:btntxt forState:UIControlStateNormal];
    btn.titleLabel.text = btntxt;
    btn.titleLabel.font = categoryFont;
    btn.titleLabel.textColor = [UIColor whiteColor];
    btn.titleLabel.frame = CGRectMake(52, 21, 150, 15);
    btn.titleLabel.textAlignment = UITextAlignmentLeft;
    [btn setFrame:CGRectMake(btnx, btny, btnwidth, 40)];
    return btn;
} 
```

你可以在需要的时候任意调用它

```
[YOURVIEW_OBJECT addSubview:[self customBtn:@"Samanmalliset" : 165:20 :115]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T22:59:34.370

您可以创建设置这些属性的方法并为每个按钮调用它。

# javascript - 你能帮我选择框架吗？

> ID：12574073
> 
> 赞同：0
> 
> 时间：2012-09-24T22:57:06.750
> 
> 标签：javascript, ruby-on-rails, node.js, frameworks

我正在考虑开发一个应用程序，该应用程序将充分利用地理位置（我会选择 mongodb）和强大的照片上传（以及查看）。

我只是想知道您是否可以帮助我进行框架选举。用了node.js好几个月了，用起来很舒服，但是由于它的单进程特性，上传大图的时候加锁会不会不好？

我正在研究的另一个解决方案是rails。

你会选择哪一个？任何其他 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T23:09:29.460

> ...但是由于其单进程性质，上传大照片时锁定会不好？

看一下[`cluster`模块](http://nodejs.org/api/cluster.html)，这应该有助于利用更多内核。事实上，首页上的 node.js 客户端之一就是这些家伙：专注于处理图像的[Transloadit 。](https://transloadit.com/)

> 我正在考虑开发一个应用程序，它将充分利用地理定位（mongodb 将是我的选择）......

我在 MongoDB 上做了很多工作，我建议阅读 MongoDB 地理位置工具的局限性。该产品确实提供了一些功能，但与 Postgres 的功能不匹配。在开始之前，您需要确保 MongoDB 涵盖了您需要的所有功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T23:29:04.317

使用 Streaming，您可以在上传期间支持多个客户端，因为上传将被分成不同的部分。我确信 expressjs 有一些很好的流媒体示例。

# javascript - How to replace “ &ldquo with double quotes?

> ID：12574075
> 
> 赞同：2
> 
> 时间：2012-09-24T22:57:08.783
> 
> 标签：javascript, regex

I would like to do something like this:

```
 s = s.replace(/(&rdquo;)/g, '"'); // need to replace with double quotes
 s = s.replace(/(&ldquo;)/g, '"'); // need to replace with double quotes
 s = s.replace(/(&rsquo;)/g, "'"); // need to replace with single quotes 
```

But for me this does not work. I tried all the ways.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T23:29:00.010

您可以在替换中使用 Unicode 值：

```
s = s.replace(/\u201C|\u201D/g, '"');  // for “ or ”
s = s.replace(/\u2019/g, "'");         // for ’ 
```

**演示：http:** [//jsfiddle.net/uM2fY/](http://jsfiddle.net/uM2fY/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T23:29:39.887

所以我们打开控制台，看看：

```
>>> 'test&rqduo;foo'.replace(/&rqduo;/g, '\"' );
test"foo 
```

并带大括号：

```
>>> 'test&rqduo;foo'.replace(/(&rqduo;)/g, '\"' );
test"foo 
```

一切都如你所想。请检查您的输入字符串。

# asp.net-mvc-3 - 为什么当我设置了 SelectedItem 时，我的 MVC3 应用程序中的下拉列表被禁用？

> ID：12574076
> 
> 赞同：0
> 
> 时间：2012-09-24T22:57:10.060
> 
> 标签：asp.net-mvc-3

我有一个 MVC3 应用程序，我定义了一个可以传递值和设置 SelectedItem 值的视图。

```
List<SelectListItem> items = new SelectList(db.BILLING_COUNTRY, "ISO_Code_BillingCountry", "CountryName", Country).AsParallel().ToList();
        items.Insert(0, (new SelectListItem { Text = "Select Your Country", Value = "0" }));
        ViewBag.Countries = items; 
```

如果 ViewBag.EnableDropDowns 为 false 或未设置，我将在下拉列表中设置 disabled = "disabled" 属性。

```
@{ object displayMode = (ViewBag.EnableDropDowns) ? null : new { disabled = "disabled"     };
           @Html.DropDownList("Countries", null, new { disabled = displayMode, onchange     = "LoadItems()" } )
        } 
```

我将 ViewBag.EnableDropDowns 设置为 true，它正确设置了下拉列表中的所有值，但它们被禁用而不是启用。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T23:15:59.883

我认为你需要设置`enabled="enabled"`

尝试：

```
 @{
        bool displayMode = (ViewBag.EnableDropDowns) ? "enabled": "disabled";                     
     };

   @if(displayMode)
   {
     Html.DropDownList("Countries", null, 
      new { enabled= displayMode, onchange="LoadItems()" } );
   }
   else
   {
      Html.DropDownList("Countries", null, 
      new { disabled= displayMode, onchange="LoadItems()" } );
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T23:19:00.947

如果该属性完全存在（无论其值如何），则该`select`元素将被禁用。`disabled`所以你需要这样的东西（指定`htmlAttributes`为字典而不是匿名对象，因为在这种情况下看起来更方便）：

```
@{ 
    var displayMode = new Dictionary<string,object>();
    displayMode.Add("onchange", "LoadItems()");
    if (ViewBag.EnableDropDowns) displayMode.Add("disabled", "disabled");
}

@Html.DropDownList("Countries", null, displayMode) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T19:39:14.607

小心字典声明。必须是这样，`Dictionary<string, object>()`否则您将面临运行时问题。

我必须根据条件禁用列表框。

```
@{
var sourceListOptions = new Dictionary<string, object>();
sourceListOptions.Add("style", "Height: 250px; width: 225px;");
if (Model.SourceColumns.Count() == Model.ImportMappings.Count())
{
    sourceListOptions.Add("disabled", "disabled");
} 
```

}

```
@Html.ListBox("SourceColumns", Model.SourceColumns, sourceListOptions) 
```

或者

```
@Html.DropDownList("SourceColumns", Model.SourceColumns, sourceListOptions) 
```

# html - Make text sit below lightbox image

> ID：12574079
> 
> 赞同：0
> 
> 时间：2012-09-24T22:57:21.667
> 
> 标签：html, css

I have a gallery which has a number of images. They have a set width and no height to the image and the height is obviously just what the image is, so one could be 500px in height and the next one could be 620px in height.

Here is the css for this:

```
.mygallery { width: 650px; padding:0; margin:0; } 
```

I have a caption which needs to go directly below the image and the css for this is:

```
#category span{color:#FFFFFF;} 
```

Can anyone help me how I can put the category span below my gallery. I just cannot get it to go underneath. Obviously it would be fine if all the images were the same height, but as they are all different its proving difficult.

Thanks for your help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:22:14.730

HTML 中图像的自然结构是这样的：

```
<figure>
  <img>
  <figcaption></figcaption>
</figure> 
```

可以将`figure`元素设为一个`inline-block`（如果您想在一行中列出多个元素），其余元素通常显示为`blocks`. 这种结构应该可以做你想做的事。`span`必须去——或者被告知作为一个`block`元素显示——这是问题的一部分。

# php - How do I access the property of a widget

> ID：12574084
> 
> 赞同：3
> 
> 时间：2012-09-24T22:57:44.333
> 
> 标签：php, yii, properties, widget

I'm new to the Yii framework and I'm trying to access a property of the of a widget let's say CMenu where I want to change the values of some public properties like activeCssClass, firstItemCssClass, lastItemCssClass, htmlOptions etc. so how do you change the property of a widget in Yii.

Details: I'm using Yii version 1.1.12 (Aug 19, 2012) and I'm trying to generate a multilevel menu but I need to change the values of some public class parameters and I don't know how?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T01:06:13.190

好吧，通常您在调用小部件时应用所需的值。您将它们设置在小部件类名称之后的小部件调用内的适当数组中。

```
$this->widget('zii.widgets.CMenu',
    array(
        'items' => $items,
        'id' => 'main_menu',
        'htmlOptions' => array('class' => 'nav'),
        'activeCssClass' => 'active',
        'firstItemCssClass' => 'first_item'
    )
); 
```

但！如果您想在创建一些小部件后应用这些值，但还没有渲染它（非常罕见的情况），您可以这样做：

```
$widget = $this->beginWidget('application.components.MyOwnWidget');
$widget->public_property = 'aaa';
$widget->renderSomething();
$this->endWidget(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:48:50.550

添加上一个答案，如果您错过了，请不要忘记查看简短的[官方文档](http://www.yiiframework.com/doc/guide/1.1/en/basics.view#widget)。

# javascript - 多点触控捏合、平移、放大 HTML 5 画布

> ID：12574088
> 
> 赞同：1
> 
> 时间：2012-09-24T22:58:10.590
> 
> 标签：javascript, dom-events, mobile-safari

我编写了大部分模块来处理 HTML 5 画布元素上的多点触控捏合、平移和缩放。我将在下面分享。我已经用 JavaScript 开发了一段时间了，而这个仍然让我感到困惑。如果有人有任何见解，一旦确认在我的 iPad 上工作，我会将最终版本发布到堆栈上供大家分享。

这是我正在做的事情：

`touchmove`事件触发变量的变化。我使用这些变量来改变我的图像在画布上的绘制方式。我有八个变量，每个变量对应于可以放入`drawImage()`函数的选项。这八个变量通过递增/递减它们的值并将它们保持在一定范围内的函数进行更新。这些变量是闭包变量，因此它们在我的模块中是全局的。为了防止过度处理，我`drawImage()`每 40 毫秒调用一次此函数，同时用户使用`setInterval()`. 这是问题所在：

`touchmove`事件似乎导致了竞争条件，其中我的变量被同一事件的许多不同实例更新。我可以通过我的控制台输出在一定程度上确认这一点，它跟踪一个变量，该变量永远不会低于 20。当我快速向一个方向滑动时，该变量会下降到远低于 20。然后当我松开手指时，慢慢滑动，它返回到 20。另一件事将我指向这个方向，当我在逐步执行我的程序时查看这些变量时，它们与我的`console.log()`泵输出不同。

注意：代码第一次成功绘制了图像，但之后的任何时候都没有。下面是我的代码的基本版本......完整版本在[GitHub 上](https://github.com/ssweriduk/PinchPanZoom)的 Scripts 文件夹中。它本质上是一个 Sencha Touch v1.1 应用程序

```
function PinchPanZoomFile(config)
{
    /*
     * Closure variable declaration here...
     * Canvas Declaration here...
    */

    function handleTouchStart(e) {
        whatDown.oneDown = (e.originalEvent.targetTouches.length == 1) ? true : false;
        whatDown.twoDown = (e.originalEvent.targetTouches.length >= 2) ? true : false;

        drawInterval = setInterval(draw, 100);
    }

    function handleTouchEnd(e) {
        whatDown.oneDown = (e.originalEvent.targetTouches.length == 1) ? true : false;
        whatDown.twoDown = (e.originalEvent.targetTouches.length >= 2) ? true : false;
        clearInterval(drawInterval);
    }

    function handleTouchMove(e) {
        if(whatDown.twoDown) {
            /*
             * Do Panning & Zooming
            */  
            changeWindowXBy(deltaDistance); //deltaDistance
            changeWindowYBy(deltaDistance); //deltaDistance
            changeCanvasXBy(deltaX); //Pan
            changeCanvasYBy(deltaY); //Pan
            changeWindowDimsBy(deltaDistance*-1,deltaDistance*-1); //(deltaDistance)*-1 -- get smaller when zooming in.
            changeCanvasWindowDimsBy(deltaDistance,deltaDistance); //deltaDistance -- get bigger when zooming in

        } else if(whatDown.oneDown) {
            /*
             * Do Panning
            */
            changeWindowXBy(0);
            changeWindowYBy(0);
            changeCanvasXBy(deltaX);
            changeCanvasYBy(deltaY);
            changeWindowDimsBy(0,0);
            changeCanvasWindowDimsBy(0,0);
        }
    }

    function draw() {
        //Draw Image Off Screen
        var offScreenCtx = offScreenCanvas[0].getContext('2d');
        offScreenCtx.save();
        offScreenCtx.clearRect(0, 0, canvasWidth, canvasHeight);
        offScreenCtx.restore();
        offScreenCtx.drawImage(base64Image, 
            parseInt(windowX), 
            parseInt(windowY), 
            parseInt(windowWidth), 
            parseInt(windowHeight), 
            parseInt(canvasX), 
            parseInt(canvasY), 
            parseInt(canvasWindowWidth), 
            parseInt(canvasWindowHeight)
        );

        //Draw Image On Screen
        var offScreenImageData = offScreenCtx.getImageData(0, 0, canvasWidth, canvasHeight);
        var onScreenCtx = canvas[0].getContext('2d');
        onScreenCtx.putImageData(offScreenImageData, 0, 0);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:09:13.417

我强烈推荐使用 Sencha Touch 2.0.1，因为它支持很多你需要的触摸事件。有关示例，请参见[http://dev.sencha.com/deploy/touch/examples/production/kitchensink/#demo/touchevents](http://dev.sencha.com/deploy/touch/examples/production/kitchensink/#demo/touchevents)。

# c++ - 带变量的宏字符串

> ID：12574093
> 
> 赞同：0
> 
> 时间：2012-09-24T22:58:40.890
> 
> 标签：c++, c

我不知道如何使用变量定义宏字符串，例如：
`#define str(x) "file x.txt"`，这意味着我希望 str(1) 引用“文件 1.txt”。但是，在这种情况下，str(1) 或任何数字指的是“文件 x.txt”，因为 x 是一个字符。
有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T23:00:09.480

连接字符串：

```
#define STR(x) "file " #x ".txt" 
```

这利用了两种语言的词汇特性：相邻的字符串文字被连接；参见 C++11 2.2/6 和 C11 5.1.1.2/6：

> 相邻的字符串文字标记被连接起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T23:00:13.103

```
#define str(x) ("file " #x ".txt") 
```

使用字符串化运算符`#`

# sql - 针对高基数列的即席查询

> ID：12574094
> 
> 赞同：4
> 
> 时间：2012-09-24T22:59:14.557
> 
> 标签：sql, oracle

如何提高针对具有数百个高基数列和数百万条记录的表的即席查询的性能？

在我的例子中，我有一个表，其中包含一个索引`DATE`列`SDATE`、一`VARCHAR2`列`NE`和 750 个数字列，其中大部分是高基数列，其值在`0 to 100`. 该表几乎`20000`每小时都会更新一次新记录。针对此表的查询如下所示：

```
SELECT * FROM TAB WHERE SDATE BETWEEN :SDATE AND :EDATE AND V1 > :V1 AND V3 < :V3 
```

或者

```
SELECT * FROM TAB WHERE SDATE BETWEEN :SDATE AND :EDATE AND NE = :NE AND V4 > :V4 
```

等等

到目前为止，我一直建议用户不要输入大间隔日期，以限制日期索引访问路径产生的记录数；但是，有时需要指定更大的间隔。

如果`V1, V2, ..., V750`都是低基数列，我将能够利用位图索引。不幸的是，他们不是。

对此有何建议？我应该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T01:56:06.677

我假设您对设计感到困惑，所以我可能会考虑一些想法-

1）使用分区 - 如果你有分区选项

2) 使用一些触发器对查询表进行非规范化（或在这种情况下进行规范化），该查询表更适合查询使用

3）制作一些快照

4）查看有一个当前表或一组表，其中包含天记录（或一些合适的子集），并将它们滚动到一个大表以存储历史。

这取决于使用模式和系统具有的所有其他约束 - 这可能会让您入门，如果您有更多详细信息，可能会有更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T05:56:32.540

我认为最大的问题是插入。您在 sdate 上有一个索引，它可以减慢插入速度并加快选择速度。但是，回到你的问题：

如果用户指定的时间间隔很大（比如说 >5%），最好让表按 sdate 以每天、每周或每月的方式进行分区。 [Oracle 分区文档](http://docs.oracle.com/cd/B28359_01/server.111/b32024/partition.htm)

（如果您对表进行分区，请不要忘记对索引也进行分区。如果您想实时进行，请使用`exchange partition`）。

此外，作为解决方法，如果您有一台功能强大的机器，您可以使用并行查询。 [Oracle 并行文档](http://docs.oracle.com/cd/E11882_01/server.112/e16638/hintsref.htm#autoId9)

# php - 将 rawtext 更改为变量名？

> ID：12574097
> 
> 赞同：0
> 
> 时间：2012-09-24T22:59:54.603
> 
> 标签：php

有没有办法可以将原始文本更改为回显中的变量名。例如将变量设置`$number`为`number1`，然后当它回显时使用`$number1?`

为了澄清，假设我们有一个名为的变量`$number = "number1";`，当我们回显时`$number`，它回显了一个名为的变量`number1`，我将如何更改`number1`为一个变量？像 "echo "$"."$number"; 之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T23:14:02.757

您可以尝试以下方法

```
$number = 2012 ;
$name = 'number' ;
echo $$name ; //2012
echo ${$name};  //2012
echo ${"number"} ;  //2012
echo "${$name}";  //2012 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T23:11:56.400

You can do this with two dollars instead of one. Note that this is really bad practice, and there's probably a better way to achieve your goal here.

```
$number = 42
$usenumber = 'number'
echo $$usenumber //echos 42 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T23:07:30.713

很容易：

```
$number = 'number1';
$$number = '';
var_dump(get_defined_vars()); 
```

或者

```
echo $number1; 
```

# javascript - document.write 真的被弃用了吗？

> ID：12574098
> 
> 赞同：7
> 
> 时间：2012-09-24T22:59:56.377
> 
> 标签：javascript

我看到一些关于`document.write`被弃用的喋喋不休，但我不确定这些信息的确切来源。[我确实在 MDN 中查找过它](https://developer.mozilla.org/en-US/docs/DOM/document.write)，但没有任何关于它被弃用的符号......所以现在我有点怀疑。不幸的是，谷歌也没有太多帮助（也许我只是没有使用正确的搜索词）。

如果确实已弃用，有人可以将我链接到表明它确实已弃用的相应文件吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T23:06:32.407

不，它只是最常被认为是不好的做法，几乎和`eval`.

阅读：[为什么 document.write 被认为是“不好的做法”？](https://stackoverflow.com/q/802854/1331430)

引用上面链接问题的一些要点：

> *   `document.write`（以下简称 DW）在 XHTML 中不起作用
>     
>     
> *   页面加载完成后执行的DW会覆盖页面，或者写一个新页面，或者不起作用
>     
>     
> *   DW在遇到的地方执行：它不能在给定的节点点注入

同样正如@JaredFarrish 所说，`deprecated`主要是一种心态。这是一个很可能永远不会消失的遗物，否则它会破坏许多网站——即使是[传统的谷歌分析代码](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingOverview)也使用 DW。

显然，在功能方面，它早已被适当的 DOM 操作方法所取代，并再次引用上面的链接问题：`DW is effectively writing serialised text which is not the way the DOM works conceptually`.

* * *

为了平衡，这里列出了 DW 可能被认为合适的地方：

*   DW 本身并没有什么问题——如果你使用得当，它不会破坏你的页面；
*   它允许轻松地将外部脚本回退到本地副本，例如从 CDN 加载 jQuery 失败时：

    ```
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/libs/jquery-1.8.2.min.js">\x3C/script>');</script> 
    ```

*   这是在页面中插入外部片段同时保持代码简短（例如分析）的最简单方法之一。请注意，Google Analytics 等系统现在更喜欢异步方法——`script`通过 API 创建元素`document.createElement`、设置其属性并将其附加到 DOM——而不是使用其传统`document.write`方法。

**tl;dr：**
DW 很容易被误用，因此对于现实世界的使用，只要可行，就更喜欢适当的 DOM 操作方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T01:31:25.373

### 什么时候`document.write`可以？

鼓励程序员避免很多地方`document.write`（甚至[HTML5 规范](http://dev.w3.org/html5/spec-author-view/dynamic-markup-insertion.html#dom-document-write)都给了它一个沉重的耳光），这是一件好事，因为它是在 Web 脚本一开始就引入的那些相当笨重的东西之一，它从未被标准化或甚至指定，它已被其他方法取代。

但是，至少在一种情况下它可能被认为是有帮助的。

### 不支持脚本的用户代理

许多网页都有数百 kb 的脚本，主要是因为开发人员只是放入库和插件而不考虑页面大小，因为它节省了几个小时的开发时间，而且开发人员认为他们的时间比他们的客户或雇主的访问者的时间更重要。

如果脚本被禁用或不可用，浏览器通常不会下载脚本，但有些可能。使用脚本插入脚本意味着如果脚本不可用，则永远不会将脚本元素放入文档中，并且永远不会下载相关资源。

`document.write`是实现脚本加载器的一种非常简单的方法。当然，有更复杂的脚本加载器来做同样的事情，但是老旧`document.write`的已经死了，可以在任何地方工作，为此，它可以像 innerHTML 一样轻松地完成这项工作。

鉴于 innerHTML 的广泛使用（甚至标记片段作为一种使用 DOM 方法创建元素的方法），使用类似的工具插入脚本似乎是合理的。

### 使用 innerHTML 插入不起作用的地方

这与上面的几乎相同，但略有不同。

使用innerHTML 插入的脚本元素不会被执行，因此如果文档流是打开的，那么使用它来`document.write`代替innerHTML 非常简单。但是，通常需要注意的是，`document.write`在加载文档后使用将首先删除当前文档，这并不总是（错误，几乎从不）可取的。

### 弹出窗口

好吧，每个人都讨厌弹出窗口，并且将它们与最糟糕的最糟糕的情况相结合`document.write`似乎是最糟糕的。`document.write`但有时，与更复杂的对话相比，内容编写的简单弹出窗口更简单、更快（开发和呈现）。

### XHTML 的借口

`document.write`不适用于非 HTML 文档（例如 XML）。但是，虽然 Web 上的许多页面都有 XHTML DOCTYPE（可能是因为 CMS 更喜欢 XML 而不是 HTML），但页面几乎总是以文本/HTML 的形式提供，所以浏览器就是这样处理它们的。Web 不太可能很快迁移到 XML（即，文档实际上是作为 XML 服务的）。对于网页，DOCTYPE 本质上是浏览器用来判断它是否应该处于标准模式的标志，所以 XML 的东西有点像 Phurphy。

然而，底线是`document.write`几乎永远不应该在“现实世界”中使用它，因为 DOM 方法提供了一种标准化的替代方案，具有明确指定的行为并且几乎得到普遍支持。`document.write`或多或少等同于`eval`在一些罕见的情况下它是有用的，但几乎总是有更好的方法来做事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-21T02:19:09.070

在 W3C HTML5 规范 [W3C Recommendation 28 October 2014 section 6.3.3] document.write() 仍然存在，[https://www.w3.org/TR/html5/webappapis.html#document.write()](https://www.w3.org/TR/html5/webappapis.html#document.write())虽然有规范中的一个相当明确的警告，以...结尾... **“出于所有这些原因，强烈建议不要使用此方法。”**

# c++ - lcov，报告未测试标头的覆盖率为 0%

> ID：12574102
> 
> 赞同：2
> 
> 时间：2012-09-24T23:00:56.153
> 
> 标签：c++, code-coverage, gcov, lcov

我会用一个例子来问。让我们假设以下文件：

```
root
    - yes.h
    - not.h
    - test.cpp 
```

“test.cpp”包括“yes.h”

当我运行 lcov 时会显示 yes.h 和 test.cpp 中覆盖的百分比，但是（这是我的问题）我想要“not.h”的零覆盖率条目，这样我就可以真正拥有一个有价值的覆盖率指标。有什么办法可以做到这一点？

这是我的lcov用法：

```
g++ --coverage test.cpp
lcov --directory . --zerocounters
lcov -c -i -d . -o app_base.info
./a.out
lcov -c -d . -o app_test.info
lcov -a app_base.info -a app_test.info -o app_total.info
geninfo app_total.info 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:02:10.683

您可能想查看 lcov 的 --remove 和 --extract 选项（参见手册页）。在您的情况下，您可能想要更改

```
lcov -a app_base.info -a app_test.info -o app_total.info
geninfo app_total.info 
```

和

```
lcov -a app_base.info -a app_test.info -o app_tmp.info
lcov --remove app_tmp.info */not.h --output app_total.info
geninfo app_total.info 
```

# c++ - Win32下如何将double值转为字符串输出到窗口标题栏

> ID：12574104
> 
> 赞同：0
> 
> 时间：2012-09-24T23:01:09.847
> 
> 标签：c++, winapi, titlebar, string-conversion, string-building

> **可能重复：**
> [如何在 C++ 中将双精度转换为字符串？](https://stackoverflow.com/questions/332111/how-do-i-convert-a-double-into-a-string-in-c)
> [将double转换为字符串C++？](https://stackoverflow.com/questions/1123201/convert-double-to-string-c)

总的 C++ 和 Win32 新手在 Visual Studio 2012 的土地上玩耍，所以请耐心等待，因为我有时咬得比我能咀嚼的还多：)

我有一个 Win32 应用程序，它只是使用 peekmessage 循环设置一个窗口以进行实时更新。该应用程序运行正常，窗口显示正常。我想将文本打印到窗口标题栏，显示我提供的时钟/计时器类的每秒帧数。

我还没有学习 GDI / GDI+ 或 Direct2D 和 DirectWrite 来将文本和变量值输出到客户区，所以现在我需要一个简单的方法来输出一些基本的统计信息到窗口，我认为最简单的方法是更新此阶段的窗口标题。我的窗口类有一个采用 std::wstring 的 SetTitle 方法，所以我想知道如何最好地从文字文本和变量值（如 double）构建字符串？您可能会猜到，除了基于控制台的应用程序的基本 std:cout 之外，我也不熟悉字符串。

亚马逊告诉我，我的神圣***的“Petzold 书，第 5 版”***还有 3 天，所以任何提示都将不胜感激，今年你将把它列入我的圣诞贺卡清单。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:17:51.137

在埋头苦干并深入研究流输入和输出之后，我终于找到了一个似乎运作良好的解决方案。

包含`<sstream>`在我的项目中后，我创建了一个`std::wstringstream myString;`对象。

在我的应用程序的实时循环中，我使用以下代码来格式化来自 Clock 类的字符串和值，然后我将其传递给 GDI 以打印到窗口客户区：

```
 myString.clear(); // clear status bits
  myString.str(L""); // Clear the string for reuse
  myString << "FPS " << pGameClock->GetFrameRate();

  TextOutW(GdiDeviceContext, x_pos, y_pos,
           myString.str().c_str(),
           myString.str().length()); 
```

在我的学习过程中，我快速绕过了简单的 GDI 文本输出，因为我最初在使用 winapi`SetWindowTextW`函数更新我的应用程序窗口标题属性时遇到了问题。它似乎不喜欢在主循环中被高频调用，导致我的系统在运行程序时变得无响应，因此需要学习基本的 GDI 来输出到我的窗口客户区而不是窗口标题栏。

顺便说一下，这个`pGameClock->GetFrameRate();`调用是由天才***Noel Llopis***设计的高分辨率时钟和计时器类的实现提供的，并在***Game Programming Gems 4***中介绍。（感谢诺埃尔）。

我还发现，对于更高性能的字符串格式化和构建技术，还有很多需要学习的技术，尤其是在应用于游戏中的实时要求时，但我怀疑我会更好地前往[http://gamedev。 stackexchange.com](https://gamedev.stackexchange.com/)（我最近才发现）有更多问题和帮助？

帮助这个 C++ 菜鸟更好地理解输入和输出流的书籍：

*   ***使用 C++ 的编程原理和实践***， *Bjarne Stroustrup*
*   ***面向所有人的 C++，第 2 版***，作者*Cay Horstmann*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T23:19:11.747

为了效率和方便`StringWriter`，最好使用专门的课程。

例如，即开即用，

```
template< class Type >
static wstring stringFrom( Type const& o )
{
    wostringstream stream;

    stream << o;
    return stream.str();
}

class StringWriter
{
    wstring s_;

    static wstring const& fastStringFrom( wstring const& s )
    { return s; }

    static wchar_t const* fastStringFrom( wchar_t const* s )
    { return s; }

    template< class Type >
    static wstring fastStringFrom( Type const& o )
    {
        return stringFrom( o );
    }

public:
    template< class Type >
    StringWriter& operator<<( Type const& o )
    {
        s_ += fastStringFrom( o );
        return *this;
    }

    operator wstring const& () const { return s_; }
    operator wchar_t const* () const { return s_.c_str(); }
}; 
```

然后像这样使用

```
typedef StringWriter S;
foo( S() << L"pi = " << 3.14 ); 
```

免责声明：编译器未触及代码。

# c# - C#音乐/声音同步

> ID：12574107
> 
> 赞同：0
> 
> 时间：2012-09-24T23:01:28.677
> 
> 标签：c#, audio, xna, synchronization

我正在 XNA 中创建一个游戏，它将与许多音乐循环一起工作，但我似乎无法同步这些声音。

我总是错过几毫秒你能帮我吗？

这是我第一次尝试同步声音。请注意，我需要处理数十种声音......

这个同步问题可能与缓存声音有关吗？
是否有外部库使其更容易？

```
 public SoundEffectInstance loop1, loop2;
    public int auxControl = 0;
    public bool auxB = false, auxA = false;

    public void LoadContent()
    {
        SoundEffect temp1 = Game.Content.Load<SoundEffect>("sounds/Synctest_1");

        loop1 = temp1.CreateInstance();
        loop1.IsLooped = true; 

        loop2 = temp1.CreateInstance();
        loop2.IsLooped = true;
    }

    public override void Update(GameTime gameTime)
    {
        // start first sound
        if (auxA == false)
            loop1.Play(); auxA = true;

        // start counting until 2 seconds
        if (auxA)
            auxControl += gameTime.ElapsedGameTime.Milliseconds;

        // if 2 seconds have passed after first sound start second sound
        if (auxControl >= 2000 && auxB == false)
        {
            loop2.Play();
            auxB = true;
        }

        base.Update(gameTime);
    } 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:32:32.337

对 C# 一无所知，但如果 API 不支持，通常很难以毫秒精度同步这些东西。解决方案是自己混合它们并仅将 API 用于播放，这样您就可以准确控制它们何时播放以及它们如何组合。

在 C# 中可能有一个更简单的解决方案，但您可以使用[http://www.PortAudio.com](http://www.PortAudio.com)或许多其他接口构建类似的东西。您可能想在 google 上搜索类似 Game audio API 的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:58:28.190

现在我已经决定实现这一点的最佳方法是在更新中使用条件，最好是主更新，因此验证以更快的方式完成。

这仍然带来了一个问题，因为您可能会在声音之间听到一个小的“Tuk”，但几乎没有注意到。

伪代码是这样的

```
Update(GameTime gameTime)
{

    if (last sound ended)
    {
        play next;
        decide on the next sound; // implement cache here if needed
    }

} 
```

# mysql - 使用连接时，MYSQL 排序正在复制到临时表？

> ID：12574108
> 
> 赞同：0
> 
> 时间：2012-09-24T23:01:30.267
> 
> 标签：mysql, temp-tables

**我有一个查询，它在一个名为“历史**”的表上返回 17,000 行。它有大约 15 个左连接到其他表，主要基于`history.id = othertable.primary_id`.

当我删除`order by history.primary_id DESC`查询时非常快。什么时候`order by history.primary_id DESC`有 MySQL 需要大约 26 秒才能写入临时表..非常慢。

但是，当存在*“order by* ”但省略连接时，它很快。

我不明白为什么写入临时表的数据依赖于连接？在查询执行之后，MySQL 不是已经知道 17,000 行包含什么吗？

根据“ **EXPLAIN** ”，我的索引设置得很好，但对于我来说，我无法对这个查询进行排序。我想使用 1000 的限制，但是当我无法排序时它是无用的。我似乎无法让它不使用临时表。

![这是查询的屏幕截图。](../Images/787b8c433aef7fe7f7fe23b64503644b.png)

# xml - 如何在 XSD 架构中使用正则表达式来限制在字符串中重复的某些字符？

> ID：12574112
> 
> 赞同：1
> 
> 时间：2012-09-24T23:01:48.307
> 
> 标签：xml, regex, xsd

例如，我想验证一个包含电话号码的字符串，以首先强制执行“+”后跟 2 位数字，然后是数字序列或连字符或空格*的单个实例。*字符串必须以数字结尾。

我目前有：

```
<xs:pattern value="\+\d{2}[- ]?[\d -]+[\d]"/> 
```

但这并不限制字符串中空格或连字符的重复。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T23:39:03.223

You say "... then a sequence of either digits or a single instance of either a hyphen or a space" -- take literally, that suggests that the following are all acceptable (I quote the strings when they end with a space):

```
"+01 "
+01-
+4312345678912345678900 
```

Looking at your code, I guess that you were speaking informally, and what you want could better be described as a plus, two digits, and then a sequence of digits interrupted by at most one hyphen or space, which must not be final. If that's an accurate paraphrase, you might try

```
\+\d{2}\d*[- ]?\d+ 
```

If you want to allow up to one hyphen *and* up to one space, it gets a lot more complicated, but it's still expressible. Assuming you don't want an empty sequence of digits to be acceptable:

```
\+\d{2}(\d+|(\d*(-\d+| \d+)?)) 
```

[Not tested.]

# c++ - 永久删除文件 C++

> ID：12574113
> 
> 赞同：-1
> 
> 时间：2012-09-24T23:01:51.413
> 
> 标签：c++, winapi

我有一个简单的问题，我找不到简单的解决方案。我正在尝试永久删除文件。我不是在寻找使数据不可恢复的最佳方法，我只是不希望它位于回收站中。我有两个问题。

1.  是一种获取回收站路径的方法吗？这个想法是，一旦我有了路径，我就可以使用`remove()`它从那里永久删除它。以下对我来说失败了，返回了一个完全不同的路径，它不是回收站的路径。也许我错过了一个论点。

    ```
    char RecycleBin[_MAX_PATH];   
    SHGetSpecialFolderPath(NULL, RecycleBin, CSIDL_BITBUCKET, FALSE); 
    ```

2.  是否有用于永久删除文件的 win32api 调用？

谢谢阅读。

编辑1：

根据下面的答案，我一直在使用该`_unlink ()`功能，但它的行为并不完全符合我的要求。我需要一些东西来获取桌面，然后将一个文件添加到该字符串并将该字符串传递给一个函数，该函数将删除该文件作为参数。这是我尝试取消链接的方法。如果我这样做取消链接 - 它可以工作：

```
 char path [] = "C:\\Users\\testuser\\Desktop\\test.dat";

     _unlink( path ); 
```

但是，如果我以以下两种方式尝试它会失败。

```
 char DesktopPath[_MAX_PATH];

    SHGetSpecialFolderPath(NULL, DesktopPath, CSIDL_DESKTOPDIRECTORY, FALSE);

    strcat ( DesktopPath, "\\test.dat" );

    _unlink ( DesktopPath ); 
```

这种方式（添加引号）也失败了。

```
 char DesktopPath[_MAX_PATH];

    char final_path [] = "\"";

    char quotes [] = "\"";

    SHGetSpecialFolderPath(NULL, DesktopPath, CSIDL_DESKTOPDIRECTORY, FALSE);

    strcat ( DesktopPath, "\\test.dat" );

    strcat ( DesktopPath, quotes );

    strcat ( final_path, DesktopPath );

    _unlink ( final_path ); 
```

以上两种方式都编译运行良好，但实际上并没有摆脱文件。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T23:19:27.200

使用 POSIX 函数[unlink (_unlink for MSVC2005+)](http://msdn.microsoft.com/en-us/library/1c3tczd6%28v=vs.100%29.aspx)。

```
_unlink("file.ext"); //delete file without sending to Recycle Bin 
```

# go - 在 Notepad++ 中添加用户定义的语言

> ID：12574121
> 
> 赞同：53
> 
> 时间：2012-09-24T23:02:27.207
> 
> 标签：go, notepad++, user-defined

我正在尝试在 Notepad++ 中添加 Go 编程语言的语法插件。

此类*用户定义*语言有[一个存储库。](http://docs.notepad-plus-plus.org/index.php/User_Defined_Language_Files#How_to_install_user_defined_language_files)我下载并解压缩了 Go 文件，其中包含 README、*userDefinedLang_Go.xml*和*go.xml*。

 ***我尝试按照页面底部的说明进行操作，如下所示。由于我使用的是 Windows 7 (x64)，因此我的 Notepad++ 目录是“C:\Program Files (x86)\Notepad++”。

之前没有安装用户定义语言，我还没有*userDefinedLang.xml*文件，所以我将*userDefinedLang_Go.xml*复制到根目录，并将其重命名以删除“_Go”，使其成为*userDefinedLang.xml*。

*然后我将go.xml*复制到 C:\Program Files (x86)\Notepad++\plugins\APIs\

这似乎是所有必要的步骤。*但是，当我打开 Notepad++ 时，“ Lang => User Defined* ”附近没有“Go” ，并且*.go*文件上没有语法着色。尝试通过“ *View => User-Defined Dialogue => import* ”导入会出现“导入失败”错误。

我究竟做错了什么？我正在使用全新安装的 Notepad++，它是 6.1.8 版。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-27T16:15:22.650

我不得不把我的`userDefineLang.xml`文件放在我的文件`AppData\Roaming`夹中：

```
C:\Users\[user]\AppData\Roaming\Notepad++ 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-08-16T23:09:28.837

在 Windows 7 64 位上新安装 Notepad++ 6.4.5

从 Notepad++ 网站下载：

[http://docs.notepad-plus-plus.org/index.php?title=User_Defined_Language_Files#G](http://docs.notepad-plus-plus.org/index.php?title=User_Defined_Language_Files#G)

将“go.xml”复制到`C:\Program Files (x86)\Notepad++\plugins\APIs`.

默认安装没有任何用户定义的语言，因此您可以这样做：

*   将“userDefineLang_Go.xml”复制到 C:\Users\\AppData\Roaming\Notepad++
*   从文件名中删除“_Go”，所以它是“userDefineLang.xml”
*   取消注释打开和关闭“NotepadPlus”标签。

（如果您已经有一个 userDefineLang.xml 则添加 _Go 文件中的内容。）

重新启动记事本++。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-24T23:18:57.417

经过一些修补后，我才让它在我的系统上运行。把它放在**userDefinedLang.xml**文件和**go.xml**文件的顶部：

```
<?xml version="1.0" encoding="Windows-1252" ?> 
```

这应该可以解决问题（在重新打开 Notepad++ 之后）。

go.xml 应该在**plugins/APIs**文件夹中，而 userDefinedLang.xml 如你所说进入 Notepad++ 的根目录。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-19T20:05:50.627

其他答案未讨论：某些旧版本的 Notepad++似乎**不适用于这些答案中的任何一个。**

在将 Notepad++ 升级到 6.4.2 版之前，我尝试了几乎所有的解决方案。

[xkcd 979](https://www.explainxkcd.com/wiki/index.php/979:_Wisdom_of_the_Ancients)

测试记事本++版本：

*   5.9 - 不工作 - 测试`namey`
*   6.4.2 - 工作 - 测试者`Elysian Fields`
*   6.6.9 - 工作 - 测试者`namey`

对于其他版本，您的里程可能会有所不同。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-11-29T05:16:30.153

我分享了我为 Notepad++ 6.5 找到的解决方案，因为我遇到的问题与之前的消息相同。

1.  如果未完成，请执行 go\misc\notepadplus\README (userDefineLang.xml,functionList.xml,APIs) 中说明的安装步骤。当您在 Notepad++ 中没有 useDefineLang.xml 时，请使用 go\misc\notepadplus\useDefineLang.xml 中的文件创建一个，但不要忘记添加第一行`<?xml version="1.0" encoding="Windows-1252" ?>` 并取消注释 NotepadPlus 部分`<NotepadPlus>`的开头和`</NotepadPlus>`开头结尾。

2.  functionList.xml 中的更改：`<association ext=".go" id="go"/>`BY`<association userDefinedLangName="go" id="go"/>`

3.  由于我在 Notepad++ 中默认没有任何 userDefineLang.xml 文件，因此我使用菜单*语言*→*定义您的语言*→ *导入来导入此文件。然后停止/启动 Notepad++。检查 Go 是否在列表末尾的*语言菜单中。*打开一个 .go 文件。如果颜色没有自动改变，点击进入 /Language 菜单

之后对我来说一切都很好（缩进，颜色，自动完成等）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-24T05:49:41.487

我在 Notepad++ 中添加了 pl/sql 语言语法。语法 /language 在网络上。这是我如何让它工作的......

1.  `<?xml version="1.0" encoding="Windows-1252" ?>`正如大卫建议的那样，使用记事本打开 XML 文件并添加到开头。然后保存到`userDefinedLang_plsql.xml`
2.  将文件粘贴到 Notepad++ 根目录中。
3.  我还将它复制到`C:\Program Files (x86)\Notepad++\plugins\APIs\`，并导航到菜单*Languages* → *Userdefined*，但它什么也没做。
4.  因此，我然后转到菜单*语言*→*定义您的语言*并`pl/sql`从下拉菜单中选择，重命名，并将其保存在该对话框窗口中。

然后新语言出现在最后的语言对话框中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-23T04:52:42.517

userDefineLang 位于 C:\Users\username\AppData\Roaming\Notepad++\userDefineLang.xml 中。

确保您的 Notepad++ 安装在“C:\Program Files(86)”下，而不是“C:\npp.#.#.#.bin”文件夹下。

并从[https://notepad-plus-plus.org/download](https://notepad-plus-plus.org/download)下载。或者干脆谷歌“下载记事本++”。

在此处查看示例 Scala 语言 userDefineLang.xml 文件：[https ://github.com/nfang/scala-syntax-highlighter](https://github.com/nfang/scala-syntax-highlighter)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-07-08T18:30:27.960

如果您之前没有定义任何用户语言，那么在重命名`userDefinedLang_Go.xml`为之后，还可以通过在原始内容周围`userDefinedLang.xml`添加标签来编辑文件的文本。`<NotepadPlus></NotepadPlus>`***

# android - android - 网格或单元格？

> ID：12574123
> 
> 赞同：0
> 
> 时间：2012-09-24T23:02:56.613
> 
> 标签：android, layout, grid, cell

我只是想制作一个 20x20 网格。网格很大，例如一个网格是 100dp（宽度和高度）。当您启动应用程序时，您只会看到几个网格。您看不到其余的网格。他们走出了屏幕。当您用手指触摸其中一个网格时，您可以向左或向右或向上或向下滚动。当您双击一个网格时，您可以输入文本。

例如 9x6 网格（整个 X 是智能手机屏幕）您首先看到的内容。

```
_______________________________________________________
|     |     |     |     |     |     |     |     |     |
|     |     |     |     |     |     |     |     |     |
-------------------------------------------------------
|     |     |     |     |     |     |     |     |     |
|     |     |     |     |     |     |     |     |     |
------------XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX------------
|     |     X     |     |     |     |     X     |     |
|     |     X     |     |     |     |     X     |     |
------------X-----------------------------X-------------
|     |     X     |     |     |     |     X     |     |
|     |     X     |     |     |     |     X     |     |
------------XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX------------
|     |     |     |     |     |     |     |     |     |
|     |     |     |     |     |     |     |     |     |
-------------------------------------------------------
|     |     |     |     |     |     |     |     |     |
|     |     |     |     |     |     |     |     |     |
------------------------------------------------------- 
```

我开始使用 Grid View 和 Adapter 进行编程。但没有成功。什么是最好的方法？我的意思是，网格可以是 100x100。在网格视图没有成功之后，我开始看一些绘图教程，但我想，我走错路了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T23:52:03.260

尝试将 android:numColumns 属性设置为您想要的列数。GridView 应该将行数设置为显示所有单元格所需的任何值。

然后，将 GridView 包装在 Horizo​​ntalScrollView 中，以便用户可以左右滚动。GridView 将处理垂直滚动。

# java - 杰克逊和文件编码的奇怪错误

> ID：12574131
> 
> 赞同：2
> 
> 时间：2012-09-24T23:03:49.773
> 
> 标签：java, json, amazon-s3, jackson

我从 S3 拉下一个文件，当我使用内容流作为裸 InputStream 调用对象映射器时，解码失败并出现 UTF-8 异常，但是当我使用包装 InputStream 的 BufferedReader 时，它工作正常。

如果我将文件读入本地文件，然后将其作为 FileInputStream 打开，也可以正常工作。我很困惑。我希望有人在我之前遇到过这个问题，或者在杰克逊的编码方面对裸 InputStream 与 BufferedReader 的工作原理有一些了解。

这失败了

```
S3Object s3o = s3Client.getObject("my-bucket","my-key");
Object t = om.readValue(s3o.getObjectContent(), Object.class); 
```

这有效

```
S3Object s3o = s3Client.getObject("my-bucket","my-key");
Object t = om.readValue(new BufferedReader(new InputStreamReader(s3o.getObjectContent())), Object.class); 
```

出现错误：

```
org.codehaus.jackson.JsonParseException: Invalid UTF-8 middle byte 0x5c
at [Source: org.apache.http.conn.EofSensorInputStream@6460029d; line: 1, column: 31611]
    at org.codehaus.jackson.JsonParser._constructError(JsonParser.java:1433)
    at org.codehaus.jackson.impl.JsonParserMinimalBase._reportError(JsonParserMinimalBase.java:521)
    at org.codehaus.jackson.impl.Utf8StreamParser._reportInvalidOther(Utf8StreamParser.java:2830)
    at org.codehaus.jackson.impl.Utf8StreamParser._reportInvalidOther(Utf8StreamParser.java:2837)
    at org.codehaus.jackson.impl.Utf8StreamParser._decodeUtf8_2(Utf8StreamParser.java:2625)
    at org.codehaus.jackson.impl.Utf8StreamParser._finishString2(Utf8StreamParser.java:1952)
    at org.codehaus.jackson.impl.Utf8StreamParser._finishString(Utf8StreamParser.java:1905)
    at org.codehaus.jackson.impl.Utf8StreamParser.getText(Utf8StreamParser.java:276)
    at org.codehaus.jackson.map.deser.std.UntypedObjectDeserializer.deserialize(UntypedObjectDeserializer.java:59)
    at org.codehaus.jackson.map.deser.std.UntypedObjectDeserializer.mapObject(UntypedObjectDeserializer.java:218)
    at org.codehaus.jackson.map.deser.std.UntypedObjectDeserializer.deserialize(UntypedObjectDeserializer.java:47)
    at org.codehaus.jackson.map.deser.std.UntypedObjectDeserializer.mapArray(UntypedObjectDeserializer.java:165)
    at org.codehaus.jackson.map.deser.std.UntypedObjectDeserializer.deserialize(UntypedObjectDeserializer.java:51)
    at org.codehaus.jackson.map.deser.std.UntypedObjectDeserializer.mapObject(UntypedObjectDeserializer.java:218)
    at org.codehaus.jackson.map.deser.std.UntypedObjectDeserializer.deserialize(UntypedObjectDeserializer.java:47)
    at org.codehaus.jackson.map.deser.std.UntypedObjectDeserializer.mapObject(UntypedObjectDeserializer.java:196)
    at org.codehaus.jackson.map.deser.std.UntypedObjectDeserializer.deserialize(UntypedObjectDeserializer.java:47)
    at org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:2732)
    at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1909) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T02:50:40.187

您的内容不是 UTF-8，而是对 JSON 无效的内容，例如 ISO-8859-1 (Latin-1)。您的使用`BufferedReader`也有点错误-您应该指定编码，否则使用平台默认编码（可以是任何东西）-但它可能会从该编码转换以避免错误。尽管如此，听起来内容不是有效的 JSON，任何生成它的人都应该修复它以使用一种受支持的编码（UTF-8 或 UTF-16）。

# c++ - C++ 命令行调试参数

> ID：12574132
> 
> 赞同：1
> 
> 时间：2012-09-24T23:03:59.027
> 
> 标签：c++, c, debugging, command-line

通过命令行运行程序时，如何更改布尔宏的值？例如，假设我的 cpp 文件中有以下宏，将其命名为 MyCpp.cpp

```
#define DEBUG 1 
```

运行程序时如何更改此设置？通过命令行：

```
g++ -Wall -Wextra -o MyCpp MyCpp.cpp 
```

我很确定您指定了某种命令行选项，这会响铃吗？另外，我不想使用`argv[]`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T23:06:49.277

首先，更改您的源代码：

```
#ifndef DEBUG
#  define DEBUG 1
#endif 
```

现在你可以在命令行上说：

```
g++ -Wall -Wextra -o MyCpp MyCpp.cpp -DDEBUG=5
#                                    ^^^^^^^^^ 
```

命令行参数与放入源代码`-DFOO=bar`的效果相同；`#define FOO bar`你需要`#ifndef`守卫来避免对宏的非法重新定义。

* * *

有时人们使用辅助宏来*阻止*定义另一个宏：

```
#ifndef SUPPRESS_FOO
#  define FOO
#endif

// ... later

#ifdef FOO
// ...
#endif 
```

现在说`-DSUPPRESS_FOO`不要在代码中*定义*......`FOO`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T23:18:38.713

> 通过命令行运行程序时，如何更改布尔宏的值？

就目前而言，你不能。您正在使用预处理器符号，因此是否应打印调试信息的决定是编译时决定。您将不得不将该编译时调试符号更改为您通过解析命令行设置的运行时变量，通过在运行时读取的一些配置文件，或两者兼而有之。

解析命令行并不难。有很多低级 C 风格的工具可以帮助您做到这一点。Boost 有一个更强大的基于 C++ 的方案。诀窍是将那些编译时调试决策更改为运行时决策。在最简单的情况下，这并不难：只需将那个 DEBUG 预处理器符号替换为一个全局变量。当然，你可以得到比这更复杂的东西。最终，您将拥有一个可配置的日志记录系统。Boost也有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T23:42:44.343

请注意以下事项。如果您的 c/cpp 文件或包含的头文件之一中有：

```
#define DEBUG 1 
```

那么你不能使用编译器的命令行（makefile）修改这个定义。根本没有机会。cpp 文件将简单地覆盖命令行设置。

# php - lastInsertId() 如何为没有自动递增字段的表工作？

> ID：12574133
> 
> 赞同：9
> 
> 时间：2012-09-24T23:03:58.330
> 
> 标签：php, mysql

`lastInsertId()`没有自动递增字段的表如何工作？主键由 2 个字段组成的表呢？

（我正在使用 MySQL）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T23:09:29.473

In both cases above it will return `0`.

When using an auto_increment column, it will return the last INSERT ID even if it was specified (i.e. the auto increment was not used).

That is to say you should only use `lastInsertId` when using auto increment. It doesn't really make sense to use it otherwise since you would have to know the keys ahead of time anyway..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T23:08:12.243

I don't think it does as it is a function specifically designed to be used to retrieve the value of an `AUTO_INCREMENT` field.

[http://php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php)

**mysql_insert_id**

`Retrieves the ID generated for an AUTO_INCREMENT column by the previous query (usually INSERT).`

This type of thing is easy enough to test - have you tried it to see what happens?

# c# - 简单的输入输出方法

> ID：12574135
> 
> 赞同：0
> 
> 时间：2012-09-24T23:04:09.967
> 
> 标签：c#, console-application

我正在编写应该从文本文件中读取数据的简单方法。我不明白为什么这种方法只能读取第 2、4、6 行？方法如下。我的代码有什么问题？

```
public static List<Employee> ReadFromFile(string path = "1.txt") 
    {
        List<Employee> employees = new List<Employee>();
        Stream stream = null;
        StreamReader sr = null;
        try
        {
            stream = new FileStream(path, FileMode.Open, FileAccess.Read);
            stream.Seek(0, SeekOrigin.Begin);
            sr = new StreamReader(stream);
            string line;
            while ((line = sr.ReadLine()) != null)
            {
                Employee employee = new DynamicEmployee();
                string str = sr.ReadLine();
                employee.FirstName = str.Substring(1, 20).Trim();
                employee.LasttName = str.Substring(20, 20).Trim();
                employee.Paynment = Convert.ToDouble(str.Substring(40, 20).Trim());
                Console.WriteLine("{0} {1} {2}", employee.FirstName, employee.LasttName, employee.Paynment);
                employees.Add(employee);
                //Console.WriteLine(str);
            }
        }
        catch//(System.FormatException)
        {
            Console.WriteLine("File format is incorect");
        }
        finally
        {
            sr.Close();
            stream.Close();
        }
        return employees;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T23:05:33.943

你打`line = sr.ReadLine()`了两次电话。

删除这一行，`string str = sr.ReadLine();`并使用变量`line`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T23:16:10.250

它应该如下所示：

```
public static List<Employee> ReadFromFile(string path = "1.txt") 
{
    List<Employee> employees = new List<Employee>();
    Stream stream = null;
    StreamReader sr = null;
    try
    {
        stream = new FileStream(path, FileMode.Open, FileAccess.Read);
        stream.Seek(0, SeekOrigin.Begin);
        sr = new StreamReader(stream);
        string line;
        while ((line = sr.ReadLine()) != null)
        {
            Employee employee = new DynamicEmployee();
            // string str = sr.ReadLine(); // WRONG, reading 2x
            employee.FirstName = line.Substring(1, 20).Trim();
            employee.LasttName = line.Substring(20, 20).Trim();
            employee.Paynment = Convert.ToDouble(line.Substring(40, 20).Trim());
            Console.WriteLine("{0} {1} {2}", employee.FirstName, employee.LasttName, employee.Paynment);
            employees.Add(employee);
            //Console.WriteLine(str);
        }
    }
    catch//(System.FormatException)
    {
        Console.WriteLine("File format is incorect");
    }
    finally
    {
        sr.Close();
        stream.Close();
    }
    return employees;
} 
```

# c# - 请求失败的 .net 程序集

> ID：12574136
> 
> 赞同：2
> 
> 时间：2012-09-24T23:04:11.170
> 
> 标签：c#, .net

我有一个使用插件的应用程序。装配链如下所示：

应用程序 -> A -> B -> A -> B

这些程序集是“App”（正在运行的应用程序）、“A”- 程序集中的链接和“B”- 加载了 Assembly.LoadFile 或 Assembly.LoadFrom 的程序集（两种方法都会出现相同的错误）。

它试图 LinkDemand 不受限制的权限会引发安全异常。异常发生在 A 第二次调用 B 时。B**不是**一个签名的程序集（因此我从我读过的不是一个强命名的程序集中收集的）。我还尝试将 [assembly: AllowPartiallyTrustedCallers] 属性放在 B 的 attribute.cs 文件中（并尝试将其放在所有程序集上）。我什至尝试为不受限制的权限设置权限断言，尽管从我所读到的内容来看，这应该对 LinkDemand 没有影响。

我知道程序集减少了权限（猜测这与通过程序集加载它有关）。但是，我读过的所有内容似乎都表明 LinkDemand 只检查调用权限，所以我不确定为什么它会第二次而不是第一次失败。

我很困惑，因为：为什么它第一次没有失败，b。为什么会发生这种情况（不使用强命名程序集 afaik），以及 c. 为什么添加 APTC 属性不能解决问题。

为了清楚起见，我在任何程序集中的任何方法上都没有安全需求属性（不包括 LinkDemands）。我在程序集 A 中确实有一些权限声明，但我看不出这会如何影响任何事情。

```
[System.Security.SecurityException] {"Request failed."} System.Security.SecurityException
Action                              LinkDemand  System.Security.Permissions.SecurityAction
Demanded                            {<PermissionSet class="System.Security.PermissionSet" version="1" Unrestricted="true"/> }   object {System.Security.PermissionSet}
DenySetInstance                     null    object
FailedAssemblyInfo                  {B, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null}  System.Reflection.AssemblyName
FirstPermissionThatFailed           null    System.Security.IPermission
GrantedSet                          "<PermissionSet class=\"System.Security.PermissionSet\"\r\nversion=\"1\">\r\n<IPermission class=\"System.Security.Permissions.FileDialogPermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\"\r\nversion=\"1\"\r\nAccess=\"Open\"/>\r\n<IPermission class=\"System.Security.Permissions.IsolatedStorageFilePermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\"\r\nversion=\"1\"\r\nAllowed=\"ApplicationIsolationByUser\"\r\nUserQuota=\"512000\"/>\r\n<IPermission class=\"System.Security.Permissions.SecurityPermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\"\r\nversion=\"1\"\r\nFlags=\"Execution\"/>\r\n<IPermission class=\"System.Security.Permissions.UIPermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\"\r\nversion=\"1\"\r\nWindow=\"SafeTopLevelWindows\"\r\nClipboard=\"OwnClipboard\"/>\r\n<IPermission class=\"System.Security.Permissions.UrlIdentityPermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\"\r\nversion=\"1\"\r\nUrl=\"file:///Z:/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx/B.dll\"/>\r\n<IPermission class=\"System.Security.Permissions.ZoneIdentityPermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\"\r\nversion=\"1\"\r\nZone=\"Internet\"/>\r\n<IPermission class=\"System.Drawing.Printing.PrintingPermission, System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\"\r\nversion=\"1\"\r\nLevel=\"SafePrinting\"/>\r\n</PermissionSet>\r\n" string
Method                              null    System.Reflection.MethodInfo
PermissionState                     "<PermissionSet class=\"System.Security.PermissionSet\"\r\nversion=\"1\"\r\nUnrestricted=\"true\"/>\r\n"    string
PermissionType                      {Name = "PermissionSet" FullName = "System.Security.PermissionSet"} System.Type {System.RuntimeType}
PermitOnlySetInstance               null    object
RefusedSet                          ""  string
Url                                 "file:///Z:/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx/B.dll"   string
Zone                                Internet    System.Security.SecurityZone 
```

正如 Hans Passant 所建议的，这似乎与互联网的安全区域有关。从那以后，我尝试了以下 caspol 命令无济于事：

```
caspol -m -ag 1.2 -url file://z:/* FullTrust
caspol -m -ag 1.2 -url file://\\sam-crazycasta.dyndns.org/crazycasta/* FullTrust
caspol -m -ag 1.3 -url file://z:/* FullTrust
caspol -m -ag 1.3 -url file://\\sam-crazycasta.dyndns.org/crazycasta/* FullTrust 
```

但是，在本地复制文件确实有效。我想要一个允许我从网络驱动器等运行的通用解决方案。最好是我可以在程序中做的事情，这样用户就不需要知道有什么问题。

编辑 1：我从 MSDN 获取了一些代码来打印出策略，这就是我得到的，在我看来，应该授予 FullTrust（最后一行是问题异常）：

```
Policy Level Enterprise:
    FullTrust
    LocalIntranet
    Internet
    SkipVerification
    Execution
    Nothing
    Everything
Policy Level Machine:
    Nothing
    FullTrust
    LocalIntranet
    Internet
    SkipVerification
    Execution
    Everything
Policy Level User:
    FullTrust
    LocalIntranet
    Internet
    SkipVerification
    Execution
    Nothing
    Everything
A first chance exception of type 'System.Security.SecurityException' occurred in mscorlib.dll 
```

无论是从失败的网络运行，还是从它工作的硬盘驱动器运行，此打印输出都是完全相同的。

我还尝试添加以下函数并在调用失败之前调用它：

```
[System.Security.Permissions.PermissionSet(System.Security.Permissions.SecurityAction.LinkDemand, Unrestricted = true)]
public void dummy() {} 
```

由于它的链接要求不受限制的权限，我不明白为什么这个功能有效而另一个无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:08:22.630

I was trying to kill a process in assembly B. This is only a partial answer. I am still confused because the debugger pointed at the line in assembly A that called assembly B instead of the line in assembly B where I tried to kill the process. Here is some code that demonstrates the problem, if someone can tell me how I'm supposed to know the exception is coming from assembly B I'd accept that as an answer.

Assembly A:

```
using System;
using System.Text;

namespace A
{
    public interface IA
    {
        void A();
        void B();
    }

    public class A
    {
        public IA a;

        public A(IA _a)
        {
            a = _a;
        }

        public void callA()
        {
            Console.WriteLine("callA called, calling A.");
            a.A();
        }

        public void callB()
        {
            Console.WriteLine("callB called, calling B.");
            a.B();
        }
    }
} 
```

Assembly B:

```
using System;
using System.Text;

using System.Diagnostics;

namespace B
{
    public class _B : A.IA
    {
        public A.A a;

        public _B(A.A _a)
        {
            a = _a;
        }

        #region IA Members

        public void A()
        {
            Console.WriteLine("A called, calling callB.");
            a.callB();
        }

        public void B()
        {
            Console.WriteLine("B called.");
            Process.GetCurrentProcess().Kill();
        }

        #endregion
    }
} 
```

App:

```
using System;
using System.Text;

using System.Reflection;

namespace App
{
    class Program
    {
        static void Main(string[] args)
        {
            A.IA ia;
            Assembly b;
            Type tb;
            A.A a;

            a = new A.A(null);
            b = Assembly.LoadFrom("../../../B/bin/Debug/B.dll");
            tb = b.GetType("B._B");
            ia = (A.IA)tb.GetConstructor(new Type[] { typeof(A.A) }).Invoke(new object[]{a});
            a.a = ia;
            a.callA();
        }
    }
} 
```

# function - 什么是 PowerShell ScriptBlock

> ID：12574146
> 
> 赞同：12
> 
> 时间：2012-09-24T23:06:09.747
> 
> 标签：function, powershell, lambda, scope, closures

PowerShell ScriptBlock 不是[词法闭包](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)，因为它不会关闭在其声明环境中引用的变量。相反，它似乎利用了在运行时绑定在 lambda 表达式中的动态范围和自由变量。

```
function Get-Block {
  $b = "PowerShell"
  $value = {"Hello $b"}
  return $value
}
$block = Get-Block
& $block
# Hello
# PowerShell is not written as it is not defined in the scope
# in which the block was executed.

function foo {
  $value = 5
  function bar {
    return $value
  }
  return bar
}
foo
# 5
# 5 is written $value existed during the evaluation of the bar function
# it is my understanding that a function is a named scriptblock
#  which is also registered to function: 
```

在 ScriptBlock 上调用 GetNewClosure() 会返回一个新的 ScriptBlock，它会关闭引用的变量。但这在范围和能力上非常有限。

ScriptBlock 的分类是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T17:44:13.277

根据[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms583275.aspx)，脚本块是“脚本文本的预编译块”。因此，默认情况下，您只是一个预解析的脚本块，不多也不少。执行它会创建一个子范围，但除此之外，就好像您粘贴了内联代码。所以最合适的术语就是“只读源代码”。

在动态生成的 Module 上调用`GetNewClosure`bolts，该 Module 基本上带有调用者范围内所有变量的快照`GetNewClosure`。它不是真正的闭包，只是变量的快照副本。脚本块本身仍然只是源代码，在调用它之前不会发生变量绑定。您可以根据需要在附加的模块中添加/删除/编辑变量。

```
function GetSB
{
   $funcVar = 'initial copy'

   {"FuncVar is $funcVar"}.GetNewClosure()

   $funcVar = 'updated value'  # no effect, snapshot is taken when GetNewClosure is called
}

$sb = GetSB

& $sb  # FuncVar is initial copy

$funcVar = 'outside'
& $sb  # FuncVar is initial copy

$sb.Module.SessionState.PSVariable.Remove('funcVar')
& $sb  # FuncVar is outside 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-07T10:41:02.770

PowerShell ScriptBlock 等效于[一流](https://en.wikipedia.org/wiki/First-class_function)的[匿名函数](https://en.wikipedia.org/wiki/Anonymous_function)。我看到的大多数混淆不是与 ScriptBlocks 相关，而是与[function](https://technet.microsoft.com/en-us/library/hh847829%28v=wps.620%29.aspx)关键字相关。

*   **PowerShell 确实支持函数[闭包](https://en.wikipedia.org/wiki/Closure_%28computer_programming%29)，但*function*关键字不支持。**

例子

功能：

```
PS> function Hello {
>>      param ([string] $thing)
>>      
>>      return ("Hello " + $thing)
>>  }

PS> Hello "World"
"Hello World" 
```

脚本块：

```
PS> $HelloSB = {
>>      param ([string] $thing)
>>      
>>      return ("Hello " + $thing)
>>  }

PS> & $HelloSB "World"
"Hello World"

PS> $HelloRef = $HelloSB
PS> & $HelloRef "Universe"
"Hello Universe" 
```

关闭：

```
PS> $Greeter = {
>>      param ([string] $Greeting)
>>      
>>      return ( {
>>          param ([string] $thing)
>>          
>>          return ($Greeting + " " + $thing)
>>      }.GetNewClosure() )
>>  }

PS> $Ahoy = (& $Greeter "Ahoy")
PS> & $Ahoy "World"
"Ahoy World"

PS> $Hola = (& $Greeter "Hola")
PS> & $Hola "Mundo"
"Hola Mundo" 
```

尽管您可以使用“Set-Item”cmdlet绕过*function关键字的限制：*

```
PS> function Greeter = { ... }  # ✕ Error
PS> function Greeter { ... }.GetNewClosure()  # ✕ Error

PS> Set-Item -Path "Function:Greeter" -Value $Greeter  # (defined above)  ✓ OK
PS> $Hola = Greeter "Hola"
PS> & $Hola "Mundo"
"Hola Mundo" 
```

“Set-Item” cmdlet的*Value*参数可以是任何 ScriptBlock，甚至是另一个函数返回的。（例如，“Greeter”函数返回一个闭包，如上所示。）

```
PS> Set-Item -Path "Function:Aloha" -Value (Greeter "Aloha")
PS> Aloha "World"
"Aloha World" 
```

另外两个重要的点：

*   PowerShell 使用[动态作用域](https://en.wikipedia.org/wiki/Scope_%28computer_science%29#Dynamic_scoping)，而不是词法作用域。

    *词法*闭包在其源代码环境中关闭，而动态*闭*包基于调用 GetNewClosure() 时存在的活动/动态环境而关闭。（这更适合[脚本语言](https://en.wikipedia.org/wiki/Scripting_language)。）

*   PowerShell 可能有“函数”和“返回”语句，但实际上它的输入/输出是基于流和管道的。将返回使用“Write-Output”或“write”cmdlet 从 ScriptBlock 中写入的任何内容。

# java - Java中HashMap对象的优先级队列

> ID：12574147
> 
> 赞同：6
> 
> 时间：2012-09-24T23:06:10.537
> 
> 标签：java, priority-queue

我创建了一个 HashMap 对象，该对象将字符串存储为键，并将相应的值存储为 int。现在我想要一个优先级队列，其中包含 HashMap 对象中存在的所有字符串，其值作为分配优先级的参考。我写了以下代码

```
public class URIQueue {

      private HashMap<String,Integer> CopyQURI;
      private PriorityQueue<String> QURI;

      public class TComparator<String> {
         public int compareTo(String s1, String s2) {
            if (CopyQURI.get(s2) - CopyQURI.get(s1) >= 0) {
               return 1;
            } else {
               return 0;
            }
         }
      }

      public URIQueue() {
         CopyQURI=new HashMap<>(100);
         TComparator<String> tc=new TComparator<>();
         QURI=new PriorityQueue<>(100, tc); //Line x
      }
 } 
```

第 x 行显示错误无法推断优先级队列的类型参数。请指导我犯了什么错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T23:22:10.927

您所指的错误指出，它无法猜测您省略的泛型类型参数。原因是您使用的构造函数是未知的。不知道，因为您的第二个参数不是比较器。您的比较器必须实现[java.util.Comparator 接口](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)，以便构造函数接受类型安全。

```
public class TComparator<String> implements Comparator<String> {

   @Override
   public int compare(String arg0, String arg1) {
      // ...
   }
} 
```

另外请注意，在`Comparator`接口中调用了适当的方法`compare`而不是`compareTo`.

我必须同意*Louis Wasserman*的一般建议，对于两个给定的参数，比较器应该始终返回相同的结果，而不是依赖于应用程序的状态。不去想一些案例太容易了，应用程序最终还是有缺陷的。

# jquery - jqPlot 条形图未正确呈现

> ID：12574153
> 
> 赞同：0
> 
> 时间：2012-09-24T23:06:49.177
> 
> 标签：jquery, jquery-plugins, jqplot

我正在尝试在我的 jQuery Mobile 应用程序中开始使用 jqPlot，但我似乎无法让 jqPlot 网站上的示例之一正常工作。我的代码：

```
var s1 = [2, 6, 7, 10];
var s2 = [7, 5, 3, 2];
var ticks = ['a', 'b', 'c', 'd'];

$.jqplot('chartdiv', [s1, s2], {
    seriesDefaults: {
        renderer:$.jqplot.BarRenderer,
        pointLabels: { show: true }
    },
    axes: {
        xaxis: {
            renderer: $.jqplot.CategoryAxisRenderer,
            ticks: ticks
        }
    }
}); 
```

应该产生这个图：

![正确的 grpah](../Images/0394a2feb53b314a461ec6837c571951.png)

相反，我得到了这个：

![我所看到的](../Images/6a4150242817c1b9a16b8ff4a4ee7f0c.png)

请注意，x 轴标签在左下角全部呈现在彼此之上。什么可能导致图表呈现错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T18:07:16.340

我在同样的问题上苦苦挣扎。经过一些测试，我发现我实际上没有包含类别轴渲染器插件。

因此，如果您仍然遇到同样的问题，请尝试包含它。（插件/jqplot.categoryAxisRenderer.min.js）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T20:22:26.000

发生这种情况的另一个原因是如果您以错误的顺序将脚本添加到 HTML 文件中。请注意，必须首先包含 jquery，然后是 jqplot，最后是任何插件。

```
<script type="text/javascript" src="jqplot/jquery.min.js"></script>
<script type="text/javascript" src="jqplot/jquery.jqplot.min.js"></script>

<script type="text/javascript" src="jqplot/plugins/jqplot.barRenderer.min.js"></script>
<script type="text/javascript" src="jqplot/plugins/jqplot.categoryAxisRenderer.min.js></script>
<script type="text/javascript" src="jqplot/plugins/jqplot.pointLabels.min.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-06T16:14:43.573

我的问题是对 jqPlot 脚本的引用被放置在 head-block 内。将它们更换到车身块后，问题就解决了。

# ios - 创建的 TableView 从初始化到创建表都忘记了一个变量

> ID：12574154
> 
> 赞同：0
> 
> 时间：2012-09-24T23:06:49.443
> 
> 标签：ios, xcode

我想在 TableViewController 中创建一个 TableView 并用 dic 对其进行初始化。dic中的项目数应该决定我的TableView的行数。在 Initializer 中，我显示它的计数并得到：“创建了 8 个条目的资源表”。但是当建立表并调用方法“numberOfRowsInSection”时，它返回“现在：0 个条目”。

我尝试将字典设为静态但没有成功，还尝试了“@property(strong,nonatomic,retain)”。我怎样才能让实例不要忘记它的内容？

编辑：移至此处：[调用 numberOfRowsInSection 时忘记了 TableView 初始化程序中设置的变量](https://stackoverflow.com/questions/12675288) 编辑 2：在已链接的线程中解决了问题，这个也是。

相关代码片段：

```
//  somewhere in ViewController.m:
...
resourceTableViewController = [[ResourcesTableViewController alloc] initWithDictionary:dictionary];

//  ResourcesTableViewController.h:

@interface ResourcesTableViewController : UITableViewController
@property(nonatomic,retain)NSDictionary *resourcesAsDictionary;
- (id)initWithDictionary:(NSDictionary*)dic;

//  ResourcesTableViewController.m:

- (id)initWithDictionary:(NSDictionary*)dic {
    if (self = [super init])
        [self setResourcesAsDictionary:dic];
    NSLog(@"resource table created with %i entries.",[_resourcesAsDictionary count]);
    return self;
}

...

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.
    NSLog(@"Now: %i entries.",[_resourcesAsDictionary count]);
    return [_resourcesAsDictionary count];
} 
```

# c# - 如何将绑定源设置为 ResourceDictionary 的代码隐藏

> ID：12574156
> 
> 赞同：0
> 
> 时间：2012-09-24T23:06:58.563
> 
> 标签：c#, .net, wpf, xml

我有一个[添加了代码隐藏](https://stackoverflow.com/a/98422/16241)的 ResourceDictionary 。

在 ResourceDictionary 我有一个组合框。我想将该组合框的 ItemsSource 绑定到代码隐藏中的列表。

如何设置绑定源以使其在代码隐藏中查找？

```
This one uses the code behind --------+
                                      |
                                      V
<ComboBox  PreviewKeyDown="CustomItem_PreviewKeyDown"
           ItemsSource="{Binding AllItems, Source={CodeBehind} />
                     ^                                   ^
                     |                                   |
But this one doesn't | because the source is not correct | 
```

万一这很重要，这就是我的 ResourceDictionary 开头的样子：

```
<ResourceDictionary 
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                x:Class="MyProject.MyCodeBehindClass"
                x:Name="ANameThatSeemsUselessHere"> 
```

关于如何将 ItemSource 绑定到**ResourceDictionary 代码隐藏**的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T23:13:56.610

我认为它类似于 DataContext ="{Static Resource ANameTheSeemsUsl

# jsp - 从 jsp1 中的表单导航到 jsp2

> ID：12574159
> 
> 赞同：0
> 
> 时间：2012-09-24T23:07:25.980
> 
> 标签：jsp, forms

这是我在 JSP1 中的代码：

```
 <form action="./JSP2.jsp" name="DisplayDetails" method="GET">            
     <input type="submit" value="submit" name="submit" />
 </form> 
```

两个 jsps 都驻留在名为 (/WEB-INF) 的同一目录中。

这是从`form`另一个 JSP 中调用一个 JSP 的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:23:48.823

是的，这是一个合适的，但我想 JSP2.jsp 就足够了，而不是 ./JSP2.jsp

# javascript - 我的 CryptoJS 加密/解密不起作用

> ID：12574160
> 
> 赞同：14
> 
> 时间：2012-09-24T23:07:28.137
> 
> 标签：javascript, encryption, cryptojs

我有一个 JSON 数组的数组，我试图用 CryptoJS 加密其值，然后打印以在另一个文件中使用，这些值应该使用用户给定的密码进行解密。

但是我做错了，在解密 URL 时出现“未捕获的错误：格式错误的 UTF-8 数据”。

加密.js：

```
var encrypted = CryptoJS.AES.encrypt(item[key], pass);
json[j] += encrypted.ciphertext.toString(CryptoJS.enc.Base64); 
```

解密.js：

```
var decrypted = CryptoJS.AES.decrypt(item[key], pass);
html += '<a href="' + decrypted.toString(CryptoJS.enc.Utf8) + '" target="_blank" class="socialico ' + key + '">' + icons[key] + '</a>'; 
```

我按照[这个](http://cryptojs.altervista.org/secretkey/doc/doc_aes_cryptojs-v3.html)例子......帮助，漂亮吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-25T21:45:36.160

该错误消息通常意味着数据未正确解密，并且生成的纯文本字节不会形成有效的 UTF-8 字符。

有几件事要检查：

*   首先，确保您使用相同的密码进行加密和解密。您可能希望保留正确密码的哈希值，以便在使用它进行解密之前验证用户是否提供了正确的密码。
*   其次，在加密之前确保该值`item[key]`是一个字符串。CryptoJS 无法加密 JSON 对象。您必须先对其进行序列化。

# c# - 分组多系列柱形图 WPF

> ID：12574162
> 
> 赞同：3
> 
> 时间：2012-09-24T23:07:33.563
> 
> 标签：c#, wpf, mschart

我想创建一个图表，如下图所示。唯一的问题是所有柱的数据总是相同的。我怎样才能解决这个问题？？

![在此处输入图像描述](../Images/4d571bc3b8dfd02397c8a51d62f861f5.png)

C#代码：

```
 List<List<KeyValuePair<string, int>>> list = new List<List<KeyValuePair<string, int>>>();
    list = ncBUS.DonneesChartNCparMois(year);
    DataPointSeries series0 = (DataPointSeries)lineChart.Series[0];
    DataPointSeries series1 = (DataPointSeries)lineChart.Series[1];
    DataPointSeries series2 = (DataPointSeries)lineChart.Series[2];
    series0.ItemsSource = list[0];
    series1.ItemsSource = list[1];
    series2.ItemsSource = list[2]; 
```

XAML：

```
 <chartingToolkit:Chart Name="lineChart"
                                   Title="Graphe Remblais et Pose" 
                                   VerticalAlignment="Top"
                                   Margin="0,59,6,0" 
                                   Height="335">
                    <chartingToolkit:ColumnSeries Name="TNC"
                                            Title="Total NC"  
                                            DependentValuePath="Value" 
                                            IndependentValuePath="Key">
                    </chartingToolkit:ColumnSeries>
                    <chartingToolkit:ColumnSeries Name="NCR" 
                                            Title="NC Remblais"  
                                            DependentValuePath="Value" 
                                            IndependentValuePath="Key">
                    </chartingToolkit:ColumnSeries>
                    <chartingToolkit:ColumnSeries Name="NCP" 
                                            Title="NC Pose"  
                                            DependentValuePath="Value" 
                                            IndependentValuePath="Key">
                    </chartingToolkit:ColumnSeries>
                </chartingToolkit:Chart> 
```

**解决方案 ：**

实际上这段代码工作得很好。我只是没有撤出导致它积累数据的临时源列表，因此图表上的显示看起来很奇怪！所以制作一个临时列表的新实例解决了这个问题！

# javascript - 使用 javascript 将子级附加到内联 SVG

> ID：12574163
> 
> 赞同：2
> 
> 时间：2012-09-24T23:07:46.317
> 
> 标签：javascript, html, svg

我有以下文档，我计划在其中添加一些水平线，一个用于文本框的每一行，其中行应该具有“名称：编号”结构。

```
<!DOCTYPE html>
<html lang="pt-br" xmlns="http://www.w3.org/1999/xhtml" xmlns:svg="http://www.w3.org/2000/svg">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="pragma" content="no-cache"/>    
    <title>Diagrama Audax</title>

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js"></script>

    <style type="text/css">
        #sidebar {float: left; display: inline-block;}
        #drawing {left: 330px; position: relative;  display: inline-block}
        #Locais {width: 300px; height: 500px;}
        svg {background: #ddd; width: 500px; height: 500px;}
        td, textarea {margin: 0; padding: 0;}
    </style>
</head>

<body>
    <table>
        <tr id="tabela" cols="2">
            <td>
                <textarea id="Locais"></textarea>
            </td>
            <td>
                <svg id="svg">
                    <circle stroke="black" fill="red" cx="200" cy="200" r="100" opacity="0.1"/>
                    <line id="path" x1="0" y1="0" x2="200" y2="200" stroke="black"/>
                </svg>
            </td>
        </tr>
    </table>
</body>

<script>

    // A função abaixo pega a caixa de texto e associa o evento "draw" a ela
    $(function () {
        $("#Locais").keyup(function() {
            valueString = $("#Locais").val();
            if (valueString != "") {
                lines = valueString.replace("\r","").split("\n");
                CPs = [];

                for (i in lines) {
                    eachLine = lines[i];
                    tmpDict = {};
                    values = eachLine.split(":");
                    for (j in values) {
                        eachVal = values[j];
                        tmpDict[j] = eachVal;
                    }
                    CPs.push(tmpDict);
                }
                DrawUsing(CPs);
            }
        })
    });

    function DrawUsing (lista) {
        var svg = document.getElementById("svg");
        for (element in lista) {
            refname = lista[element][0];
            refdist = lista[element][1];
            var line = document.createElement ("line");
            line.setAttribute('stroke', "black");
            line.setAttribute('stroke-width', 1);
            line.setAttribute('x1', 0);
            line.setAttribute('x2', 100);
            line.setAttribute('y1', refdist);
            line.setAttribute('y2', refdist);
            svg.appendChild(line);
            console.log(document.getElementsByTagName("line").length);
        }
    }
</script>
</html> 
```

作为“热身”，我尝试在每次按下键时操纵 SVG 向其添加线条。粘贴了以下文本（只需使用 control+V 粘贴就足以触发 keyup 事件），但是虽然 svg 子列表增加了，但没有看到额外的行。

我究竟做错了什么？（很多，我想，因为我对 javascript 非常熟悉，并且直接操作内联`<svg>`元素（而不是`<object>`）的文档记录非常差，似乎......

欢迎任何帮助，感谢阅读！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T23:19:30.617

SVG 元素进入`http://www.w3.org/2000/svg`命名空间所以而不是

```
var line = document.createElement ("line"); 
```

利用

```
var line = document.createElementNS ("http://www.w3.org/2000/svg","line"); 
```

# ios - 记录本机 iOS 仅打开图形操作以提交到 Facebook

> ID：12574164
> 
> 赞同：4
> 
> 时间：2012-09-24T23:07:51.513
> 
> 标签：ios, facebook, facebook-opengraph, submission

我的 FB 应用程序目前只有 iOS。我尝试了此处描述的方法 [，为 iOS 应用程序提交开放图形操作？](https://stackoverflow.com/questions/11644259/submitting-open-graph-actions-for-an-ios-app) 并创建了一个带有屏幕截图的网页来记录用户体验。

Facebook 回应说我需要展示该应用程序如何为 Auth Dialog Preview 用户工作。我不知道如何使用该用户登录我的 iOS 应用程序。我知道它适用于画布应用程序，它是否适用于本机移动应用程序？

我已经提交了这个错误，希望获得更多信息： [https ://developers.facebook.com/bugs/413755695354708](https://developers.facebook.com/bugs/413755695354708)

我希望我不必按照此处所述构建画布应用程序 [为未发布的 iOS 应用程序提交操作？](https://stackoverflow.com/questions/9930044/submitting-actions-for-unreleased-ios-app) 为了让我的行动获得批准。

# c# - Sitecore 分组下拉列表

> ID：12574165
> 
> 赞同：1
> 
> 时间：2012-09-24T23:07:55.810
> 
> 标签：c#, asp.net, content-management-system, sitecore, sitecore6

我有两个用于模板的下拉列表字段。在内容编辑器中，我希望第二个下拉列表的值取决于第一个下拉列表。即类似于国家/州控制的东西。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T07:55:44.230

两者中没有任何东西可以为您提供此功能。您需要创建一个自定义字段并实现它。

编辑：这是我在站点核心安装中的类别/子类别字段的实现

```
public class CategoryPicker : Control, IContentField
    {
        #region IContentField Implementation

        public string GetValue()
        {
            return string.Format("{0}|{1}",
                                 GetInputControl<Listbox>(ControlNames.MainCategoryDropList).SelectedItem.Value,
                                 GetInputControl<Listbox>(ControlNames.SubCategoryDropList).SelectedItem.Value);

        }

        public void SetValue(string value)
        {
            Value = value;
        }

        #endregion

        #region Properties

        public string ItemId
        {
            get { return GetViewStateString("ItemID"); }
            set { SetViewStateString("ItemID", value); }
        }

        private CategoryIdPair CategoryIdPair
        {
            get
            {
                Item contextItem = GetItem(ItemId);
                if (contextItem.Fields["CategoryId"] != null)
                {
                    return CategoryFieldParser.Parse(contextItem.Fields["CategoryId"].Value);
                }
                return CategoryIdPair.Empty;
            }
        }

        public bool TrackModified
        {
            get { return GetViewStateBool("TrackModified", false); }
            set { SetViewStateBool("TrackModified", value, false); }
        }

        #endregion

        public CategoryPicker()
        {
            TrackModified = true;
        }

        protected override void OnLoad(EventArgs e)
        {
            if (!Sitecore.Context.ClientPage.IsEvent)
            {
                Controls.Clear();
                Controls.Add(CreateMainCategorySelectorControl());
                Controls.Add(CreateSubCategorySelectorControl());

                SetSelectorOnChangeEvents();
            }
            else
            {
                var mainCategorySelectorControl = GetInputControl<Listbox>(ControlNames.MainCategoryDropList);
                var subCategorySelectorControl = GetInputControl<Listbox>(ControlNames.SubCategoryDropList);
                // if value changed - set modified=true
                if (mainCategorySelectorControl.SelectedItem.Value != CategoryIdPair.CategoryId.ToString() || subCategorySelectorControl.SelectedItem.Value != CategoryIdPair.SubCategoryId.ToString())
                {
                    SetModified();
                }
            }

            base.OnLoad(e);
        }

        private void SetSelectorOnChangeEvents()
        {
            var mainCategorySelectorControl = GetInputControl<Listbox>(ControlNames.MainCategoryDropList);
            mainCategorySelectorControl.Attributes.Add("onchange",
                                                       Sitecore.Context.ClientPage.GetClientEvent(
                                                        ID + ".ReInitialiseSubCategorySelector"));
            var subCategorySelectorControl = GetInputControl<Listbox>(ControlNames.SubCategoryDropList);
            subCategorySelectorControl.Attributes.Add("onchange",
                                                      Sitecore.Context.ClientPage.GetClientEvent(
                                                        ID + ".SetSubCategoryFieldValue"));
        }

        public void ReInitialiseSubCategorySelector()
        {
            var subCategorySelectorControl = GetInputControl<Listbox>(ControlNames.SubCategoryDropList);
            InitialiseSubCategorySelectorControl(subCategorySelectorControl);
            Sitecore.Context.ClientPage.ClientResponse.Refresh(subCategorySelectorControl);
        }

        public void SetSubCategoryFieldValue()
        {
            Item contextItem = GetItem(ItemId);
            using (new SecurityDisabler())
            {
                contextItem.Editing.BeginEdit();
                contextItem.Fields["CategoryId"].Value = GetValue();
                contextItem.Editing.EndEdit();
            }   
        }

        #region Main Category Dropdown Population

        private Listbox CreateMainCategorySelectorControl()
        {
            var mainCategorySelectorControl = new Listbox
                                                {
                                                    ID = GetID(ControlNames.MainCategoryDropList),
                                                    Disabled = Disabled,
                                                    TrackModified = false
                                                };

            InitialiseMainCategorySelectorControl(mainCategorySelectorControl);

            return mainCategorySelectorControl;
        }

        private void InitialiseMainCategorySelectorControl(System.Web.UI.Control mainCategorySelectorControl)
        {
            List<Category> mainCategories = //Get main categories;

            foreach (Category category in mainCategories)
                CreateCategoryListItem(category.Description, category.CategoryId, mainCategorySelectorControl, category.CategoryId == CategoryIdPair.CategoryId);
        }

        #endregion

        #region Sub-Category Dropdown Population

        public Listbox CreateSubCategorySelectorControl()
        {
            var subCategorySelectorControl = new Listbox
                                                {
                                                    ID = GetID(ControlNames.SubCategoryDropList),
                                                    Disabled = Disabled,
                                                    TrackModified = false
                                                };

            InitialiseSubCategorySelectorControl(subCategorySelectorControl);
            subCategorySelectorControl.Value = CategoryIdPair.SubCategoryId.ToString();
            Sitecore.Context.ClientPage.ClientResponse.Refresh(subCategorySelectorControl);
            return subCategorySelectorControl;
        }

        public void InitialiseSubCategorySelectorControl(System.Web.UI.Control subCategorySelectorControl)
        {
            var mainCategorySelectorControl = GetInputControl<Listbox>(ControlNames.MainCategoryDropList);
            int mainCategorySelectedValue = Convert.ToInt32(mainCategorySelectorControl.SelectedItem.Value);

            subCategorySelectorControl.Controls.Clear();

            CreateCategoryListItem("Please select", 0, subCategorySelectorControl, false);

            List<SubCategory> subCategories = //Get all subcategories
            foreach (SubCategory subCategory in subCategories)
            {
                CreateCategoryListItem(subCategory.Description, subCategory.SubCategoryId, subCategorySelectorControl, subCategory.SubCategoryId == CategoryIdPair.SubCategoryId);
            }
        }

        #endregion

        private static void CreateCategoryListItem(string title, int value, System.Web.UI.Control control, bool selected)
        {
            var listItem = new ListItem
                            {
                                ID = GetUniqueID(ControlNames.CategoryListItem),
                                Header = title,
                                Value = value.ToString(),
                                Selected = selected
                            };

            Sitecore.Context.ClientPage.AddControl(control, listItem);
        }

        #region Helper Methods

        private T GetInputControl<T>(string controlName) where T : Control
        {
            return FindControl(GetID(controlName)) as T;
        }

        private void SetModified()
        {
            if (TrackModified)
            {
                Sitecore.Context.ClientPage.Modified = true;
            }
        }

        private static Item GetItem(string itemId)
        {
            return Sitecore.Context.ContentDatabase.GetItem(new ID(itemId));
        }

        #endregion

        #region ControlNames Nested Class

        private static class ControlNames
        {
            public const string MainCategoryDropList = "MainCategoryDropList";
            public const string SubCategoryDropList = "SubCategoryDropList";
            public const string CategoryListItem = "CategoryListItem";
        }

        #endregion
    }

    public class CategoryField : CustomField
    {
        public int CategoryId { get; set; }
        public int SubCategoryId { get; set; }

        public CategoryField(Field innerField) : base(innerField)
        {
            Assert.ArgumentNotNull(innerField, "innerField");
            var pair = CategoryFieldParser.Parse(innerField.Value);
            CategoryId = pair.CategoryId;
            SubCategoryId = pair.SubCategoryId;
        }

        public static implicit operator CategoryField(Field field)
        {
            if (field != null)
            {
                return new CategoryField(field);
            }
            return null;
        }
    }

    public class CategoryFieldParser
    {
        public static CategoryIdPair Parse(string input)
        {
            var pair = input.Split(new[] { '|' });
            return new CategoryIdPair
                    {
                        CategoryId = pair.Length > 0 ? GetIntValue(pair[0]) : CategoryIdPair.Empty.CategoryId,
                        SubCategoryId = pair.Length == 2 ? GetIntValue(pair[1]) : CategoryIdPair.Empty.SubCategoryId
                    };
        }

        private static int GetIntValue(string input)
        {
            int result;
            if (int.TryParse(input, out result))
                return result;
            return 0;
        }
    }

    public class CategoryIdPair
    {
        public int CategoryId { get; set; }
        public int SubCategoryId { get; set; }
        public static CategoryIdPair Empty
        {
            get { return new CategoryIdPair {CategoryId = 0, SubCategoryId = 0}; }
        }
    } 
```

# xcode - Orientation issues for iOS6

> ID：12574168
> 
> 赞同：3
> 
> 时间：2012-09-24T23:08:33.170
> 
> 标签：xcode, cocos2d-iphone, uiinterfaceorientation

I'm having issues with my app's orientation for iOS 6\. Even though, it is set to "Landscape (right home button)" and "Landscape (left home button)", it shows as a "Portrait" distorting the app.

I've been trying to work with **RootViewController.m**, but no luck!

Here's the code, can someone help me out?

```
 @implementation RootViewController

    /*
    // The designated initializer.  Override if you create the controller programmatically and want to perform customization that is not appropriate for viewDidLoad.
    - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
if ((self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil])) {
// Custom initialization
}
return self;
    }
    */

    /*
    // Implement loadView to create a view hierarchy programmatically, without using a nib.
    - (void)loadView {
    }
    */

    // Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
    - (void)viewDidLoad {
[super viewDidLoad];
    }

    // Override to allow orientations other than the default portrait orientation.
    - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

//
// There are 2 ways to support auto-rotation:
//  - The OpenGL / cocos2d way
//     - Faster, but doesn't rotate the UIKit objects
//  - The ViewController way
//    - A bit slower, but the UiKit objects are placed in the right place
//

    #if GAME_AUTOROTATION==kGameAutorotationNone
//
// EAGLView won't be autorotated.
// Since this method should return YES in at least 1 orientation, 
// we return YES only in the Portrait orientation
//
return ( interfaceOrientation == UIInterfaceOrientationPortrait );

    #elif GAME_AUTOROTATION==kGameAutorotationCCDirector
//
// EAGLView will be rotated by cocos2d
//
// Sample: Autorotate only in landscape mode
//
if( interfaceOrientation == UIInterfaceOrientationLandscapeLeft ) {
    [[CCDirector sharedDirector] setDeviceOrientation: kCCDeviceOrientationLandscapeRight];
} else if( interfaceOrientation == UIInterfaceOrientationLandscapeRight) {
    [[CCDirector sharedDirector] setDeviceOrientation: kCCDeviceOrientationLandscapeLeft];
}

// Since this method should return YES in at least 1 orientation, 
// we return YES only in the Portrait orientation
return ( interfaceOrientation == UIInterfaceOrientationPortrait );

    #elif GAME_AUTOROTATION == kGameAutorotationUIViewController
//
// EAGLView will be rotated by the UIViewController
//
// Sample: Autorotate only in landscpe mode
//
// return YES for the supported orientations

return ( UIInterfaceOrientationIsLandscape( interfaceOrientation ) );

    #else
    #error Unknown value in GAME_AUTOROTATION

    #endif // GAME_AUTOROTATION

// Shold not happen
return NO;
    }

    //
    // This callback only will be called when GAME_AUTOROTATION == kGameAutorotationUIViewController
    //
    #if GAME_AUTOROTATION == kGameAutorotationUIViewController
    -(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
    {
//
// Assuming that the main window has the size of the screen
// BUG: This won't work if the EAGLView is not fullscreen
///
CGRect screenRect = [[UIScreen mainScreen] bounds];
CGRect rect = CGRectZero;

if(toInterfaceOrientation == UIInterfaceOrientationPortrait || toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)      
    rect = screenRect;

else if(toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft || toInterfaceOrientation == UIInterfaceOrientationLandscapeRight)
    rect.size = CGSizeMake( screenRect.size.height, screenRect.size.width );

CCDirector *director = [CCDirector sharedDirector];
EAGLView *glView = [director openGLView];
float contentScaleFactor = [director contentScaleFactor];

if( contentScaleFactor != 1 ) {
    rect.size.width *= contentScaleFactor;
    rect.size.height *= contentScaleFactor;
}
glView.frame = rect;
    }
    #endif // GAME_AUTOROTATION == kGameAutorotationUIViewController

    - (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
[super didReceiveMemoryWarning];

   // Release any cached data, images, etc that aren't in use.
   }

   - (void)viewDidUnload {
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
   }

 - (void)dealloc {
[super dealloc];
 }

 @end 
```

Please help me! Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T23:16:14.177

`shouldAutorotateToInterfaceOrientation`在 iOS 6 中不使用；[`UIViewController`请参阅文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)顶部的“处理视图旋转” 。如果没有进一步的工作，您将只获得您在项目设置中指定的任何内容。

在 iOS 5 及更早版本下，您拥有：

```
return ( interfaceOrientation == UIInterfaceOrientationPortrait ); 
```

因此，在那些系统上，您明确将此视图控制器限制为纵向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:31:41.620

您需要在 AppDelegate.mm 文件中检查这一点。检查以下代码行是否存在

```
// Supported orientations: Landscape. Customize it for your own needs
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

# .htaccess - htaccess redirect with parameters

> ID：12574169
> 
> 赞同：0
> 
> 时间：2012-09-24T23:08:35.380
> 
> 标签：.htaccess, mod-rewrite, redirect, url-rewriting

Looking to redirect a page with 2 parameters what i have is

```
RewriteEngine On

RewriteCond %{QUERY_STRING} ^([^&]&)*id=8(&|$)

RewriteCond %{QUERY_STRING} ^([^&]&)*date=1349996400(&|$)

RewriteRule ^/calendar/event\.php$ /news/nrsc-chloramines-open-house/ [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T23:53:43.433

您需要去掉正则表达式中的前导斜杠。通过 htaccess 文件中的重写规则发送的 URI 已去除前导斜杠。此外，您可以使查询字符串的开始边界匹配更好一点：

```
#                             v--- make it match beginning or &
RewriteCond %{QUERY_STRING} (^|&)id=8(&|$)
RewriteCond %{QUERY_STRING} (^|&)date=1349996400(&|$)
#             v---- make optional
RewriteRule ^/?calendar/event\.php$ /news/nrsc-chloramines-open-house/ [R=301,L] 
```

# .htaccess - htaccess not working for subfolders

> ID：12574171
> 
> 赞同：0
> 
> 时间：2012-09-24T23:08:47.297
> 
> 标签：.htaccess, mod-rewrite, hyperlink, rewrite, subdirectory

i want to ask why my .htaccess in root folder does not work well.

.htaccess

```
RewriteEngine On 
RewriteRule ^([a-zA-Z0-9]+)(/[a-zA-Z0-9/]+)?$ /$1\.php$2 [L]

RewriteCond %{THE_REQUEST} ^GET\s/*pages/.*\.php [NC] 
RewriteRule ^([a-zA-Z0-9]+)(/[a-zA-Z0-9/]+)?$ /$1\.php$2 [L]

RewriteCond %{THE_REQUEST} ^GET\s/*debates/.*\.php [NC]
RewriteRule ^([a-zA-Z0-9]+)(/[a-zA-Z0-9/]+)?$ /$1\.php$2 [L] 
```

Links in the / (main folder) are with working .php hidding, but in the subfolders like /pages/ and /debates/ the system does not recognize rewrite rule. I want to hide .php in both directories like they are hidden in the main folder.

I FIND THE SOLUTION!

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.+)$ $1.php [L,QSA] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T23:58:31.110

看起来这些规则都是错误的，他们不会做任何事情：

```
RewriteCond %{THE_REQUEST} ^GET\s/*pages/.*\.php [NC] 
RewriteRule ^([a-zA-Z0-9]+)(/[a-zA-Z0-9/]+)?$ /$1\.php$2 [L]

RewriteCond %{THE_REQUEST} ^GET\s/*debates/.*\.php [NC]
RewriteRule ^([a-zA-Z0-9]+)(/[a-zA-Z0-9/]+)?$ /$1\.php$2 [L] 
```

您可以将您的 htaccess 更改为：

```
RewriteEngine On 
RewriteRule ^pages/([a-zA-Z0-9]+)(/[a-zA-Z0-9/]+)?$ /pages/$1\.php$2 [L]
RewriteRule ^debates/([a-zA-Z0-9]+)(/[a-zA-Z0-9/]+)?$ /debates/$1\.php$2 [L]
RewriteRule ^([a-zA-Z0-9]+)(/[a-zA-Z0-9/]+)?$ /$1\.php$2 [L] 
```

# youtube-api - Display youtube video embed from ios 5 to iOS 6

> ID：12574172
> 
> 赞同：1
> 
> 时间：2012-09-24T23:08:49.973
> 
> 标签：youtube-api

i want ask how i can display a youtube video like the way i do in ios 5 in a embed uiwebview, in ios 5 i do this:

```
[self.myWebView loadHTMLString:[NSString stringWithFormat:@"<embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" width=\"260\" height=\"136\"></embed>", newUrlFormat] baseURL:nil]; 
```

and the video start direct in landscape mode, but now in ios 6 this don't work, so how i can do to display a video direct in landscape?

i want also ask if this project is legal under youtube API and if i can use in a ios app:

[https://github.com/hellozimi/HCYoutubeParser](https://github.com/hellozimi/HCYoutubeParser)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:32:16.823

YouTube API 服务条款解释了使用 YouTube API 时不允许的内容：[https ://developers.google.com/youtube/terms](https://developers.google.com/youtube/terms)

您需要自己阅读该文件的解释，或者如果您觉得没有资格这样做，请保留您自己的律师的服务。互联网上的问答网站中没有人可以为您解答法律问题。

在 iOS 6 中，Apple 改变了 YouTube 视频标签在移动 WebKit 中的解释方式。以前，它会自动翻译成一个可点击的链接，该链接会在内置（旧版）YouTube 应用程序中启动播放，但在 iOS 6 中，我相信他们会自动重写标签以使其成为等效的嵌入标签。这可以解释您报告的行为变化。

# audio - jTransforms DoubleFFT_1D 前两个值

> ID：12574174
> 
> 赞同：1
> 
> 时间：2012-09-24T23:09:21.767
> 
> 标签：audio, fft, spectrum

文件说

> 公共无效realForward（双[]一）：
> 
> 计算真实数据的一维前向 DFT，将结果保存在 . 输出数据的物理布局如下：
> 
> 如果 n 是偶数
> 
> `a[2*k] = Re[k], 0<=k<n/2`
> 
> `a[2*k+1] = Im[k], 0<k<n/2`
> 
> `a[1] = Re[n/2]`

来自这个线程：[来自 jTransforms DoubleFFT_1D 的功率谱密度](https://stackoverflow.com/questions/5010261/power-spectral-density-from-jtransforms-doublefft-1d)

我发现第一个元素是直流元素，第二个对应于最后一个。丢弃前两个而不是给他们特殊待遇会更方便。丢弃直流元件可以吗？最后一个？

如果不行，我应该计算 DC 元件的幅度吗？最后一个没有对应虚值的元素呢？

像那样？幅度 = Math.sqrt(Re[n/2]*Re[n/2]);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:57:07.473

DC (0 Hz) 和 Nyquist (Fs / 2) 分量是纯实数，这就是为什么您可以将它们作为复数值放入同一个空间，因此无需计算它们的幅度。你绝对可以忽略奈奎斯特 - 大多数实际应用都不需要它。您*可能会*忽略 DC 组件，但这取决于您在特定应用程序中尝试执行的操作。

# php - PHP：检查页面是否显示在 iframe 中？

> ID：12574178
> 
> 赞同：4
> 
> 时间：2012-09-24T23:09:58.733
> 
> 标签：php, iframe

我想使用 PHP 来检查页面是否在 iframe 中加载。最好但不是必需的，我希望在适用时拥有父母的网址。谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-24T23:11:12.303

Php 无法告知发出请求的上下文。除了传递给它并作为服务器变量可用的内容之外，它什么都不知道。您可以将自己的 get 参数添加到要在将页面放入 iframe 时使用的 url，否则您就不走运了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T23:15:33.350

`JavaScript`为此需要；PHP绝对没有办法可靠地知道。在 JavaScript 中你可以使用

```
window.top === window.self; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-28T10:04:36.320

我认为有可能通过 PHP 全局变量 $_SEVER["HTTP_REFERER"] 检测 iframe。在这个变量中是父窗口的 url。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-11T09:18:25.620

**是**的，在 2021 年，可以`URL`使用 PHP 的函数检查是否在 iframe 上嵌入[`get_header`](https://www.php.net/manual/en/function.get-headers.php)，我在下面的函数中做了这个：

```
public function allowEmbed($url = 'https://stackoverflow.com/') {

        try {
            $headers = get_headers($url);
        } catch (\Exception $e) {
            $headers = [];
        }

        $blackList = [
            'x-frame-options: sameorigin',
            'x-frame-options: allow-from',
            'x-frame-options: deny',
        ];

        $headers = array_map('strtolower', $headers);

        $check = array_intersect($blackList, $headers);

        if(!$check) {
            return ['status' => 1, 'message' => 'Passed'];
        } else {
            return ['status' => 0, 'message' => 'Fail'];
        }   
} 
```

# windows-8 - Managed custom action not working in Windows 8 without .NET 3.5 installed

> ID：12574181
> 
> 赞同：1
> 
> 时间：2012-09-24T23:10:41.680
> 
> 标签：windows-8, windows-installer, custom-action

in my Visual Studio 2010 setup project, I have a managed Custom Action. It used to work great but will not on Windows 8 unless .NET 3.5 is installed. I can't force my users to have .NET 3.5 installed - well I could, but I'd lose customers.

I have a vague understanding that maybe it's not working with .NET 4 because the shim DLL (installutillib.dll) has a dependency on .NET 2?

Is there anything I can do to get it to work? I know managed CAs are frowned on by some, but need it to write a registry entry that depends on a bit of logic.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:52:37.010

使用 installutillib.dll 的托管 CA 不受欢迎。这是非常糟糕的事情，例如在静默/非交互式安装期间抛出模式 1001 错误消息，不支持访问 MSI 会话，使用 CLR 版本（粘性）和许多其他可怕的设计缺陷来纹身 MSIEXEC 进程。

请改用 Windows Installer XML (WiX) 部署工具基础 (DTF) 托管的自定义操作。它看起来像是安装程序的本机自定义操作，并且支持表示 SupportedRuntimes 元素的 CustomAction.Config XML。

[部署工具基础 (DTF) 托管的自定义操作](http://blog.iswix.com/2008/05/deployment-tools-foundation-dtf-managed.html)

当然，您可能不需要自定义操作来执行您想要执行的操作。Registry 表支持 [PROPERTY] 表达式，它所属的组件可以使用条件来控制安装与否。

# c++ - Eclipse CDT: no rule to make target all

> ID：12574187
> 
> 赞同：44
> 
> 时间：2012-09-24T23:11:13.490
> 
> 标签：c++, eclipse, eclipse-cdt

My Eclipse CDT keeps complaining "make: *** no rule to make target all" when I am trying to compile the piece of code below:

```
#include <iostream>
using namespace std;

int main() {
  cout << "Hello World!!!" << endl; // prints Hello World!!!
  return 0;
} 
```

Anyone knows how to solve this? I have read the post with the similar title: [make: *** No rule to make target `all'. Stop. Eclipse error](https://stackoverflow.com/questions/3714852/make-no-rule-to-make-target-all-stop-eclipse-error) But none of those answers help...

Thanks a lot!

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-08T13:33:16.190

您需要更改项目设置，以便 Eclipse-CDT 为您管理 Makefile。

1.  从菜单栏中选择项目-> 属性。
2.  在出现的对话框中单击左侧的 C/C++ Build。
3.  在右侧的 Builder Settings 选项卡下，选择 Makefile generation 部分下的“Generate Makefiles automatically”。
4.  点击确定并再次构建。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-12-09T20:12:13.623

“all”是默认设置，即使 Behaviour->Build (Incremental build) 选项卡没有变量。我解决了

1.  转到项目属性 > C/C++ 构建 > 行为选项卡。
2.  选中构建（增量构建）。
3.  在 Build (Incremental Build) 旁边的文本框中输入“test”。
4.  构建项目。您将看到错误消息。
5.  回到构建（增量构建）并删除“测试”。
6.  构建项目。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-05-22T07:01:12.263

1.  从菜单栏中选择项目-> 属性。

2.  在出现的对话框中单击左侧的 C/C++ Build。

3.  在右侧的 Builder Settings 选项卡下，检查并确保“Build location”正确。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-04-18T15:02:28.390

在 C/C++ Build -> Builder Settings 中，选择 Internal builder（而不是 External builder）。

这个对我有用。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-06-17T02:51:19.233

我刚刚为自己解决了这个确切的问题；甚至引用了这个问题。

我假设您没有编写 Eclipse 抱怨的“全部”规则。如果是这种情况，请执行以下步骤：

1.  转到项目属性 > C/C++ 构建 > 行为选项卡。
2.  选中构建（增量构建）。
3.  从 Build (Incremental Build) 旁边的文本框中删除“all”。
4.  编译走！

这让 Eclipse 知道您没有尝试使用名为“all”的 make 目标。出于某种原因，这是默认设置。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-10-13T03:47:03.133

你有2个案例

*   如果您自己创建 Makefile，请转到

> 1.  从菜单栏中选择项目-> 属性。
> 2.  在出现的对话框中单击左侧的 C/C++ Build。
> 3.  禁用自动生成 makefile -> 在右侧的 Builder Settings 选项卡下，检查并确保“Build location”正确（该位置是您的 Makefile 的位置）

*   如果你没有 Makefile -> 你需要 Eclipse DS-5 来帮助你创建 Makefile

> 1.  从菜单栏中选择项目-> 属性。
> 2.  在出现的对话框中单击左侧的 C/C++ Build。
> 3.  启用自动生成 makefile

我建议你自己创建 Makefile

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-08-21T16:13:09.280

Project -> Clean -> Clean all Projects 然后 Project -> Build Project 为我工作（我做了取消检查自动生成生成文件，然后在执行此操作之前重新检查它）。这是通过 eclipse Juno 中的 AVR CDT 插件进行的 AVR（微处理器编程）项目。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-07-24T14:10:44.883

有时，如果您通过 make 文件创建目标，请仔细检查所有 c 文件是否以正确的文件结构正确命名。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-06-21T18:45:05.717

重命名和移动源文件后，我得到了同样的错误。建议的解决方案都不适合我，我跟踪错误是 Debug 目录下的元文件未更新。删除整个 Debug 目录并重新构建项目为我解决了这个问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-09-06T11:40:49.177

如果上述解决方案对您不起作用 -

可能是你没有正确安装 C++ 编译器包，流程如下：（Win7 的说明，32 位/64 位）

1.  确保正确安装**了一个或多个**支持的 C++ 编译器包：

    *   Eclipse CDT 插件（[安装程序页面](https://eclipse.org/cdt/downloads.php)）（[安装程序指南](http://eclipsebook.in/advanced-eclipse/extending-eclipse/installing-cdt/)）
    *   MinGW 包（[安装页面](http://www.mingw.org/wiki/howto_install_the_mingw_gcc_compiler_suite)）
    *   Cygwin 软件包（[安装页面](https://cygwin.com/install.html)）

    （我安装了 MinGW（如何安装视频可以在 YouTube 上找到））

    **如果您选择安装 MinGW 软件包：**

    *   从上面的安装页面下载 MinGW 安装程序
    *   运行 MinGW 安装程序并确保选择以下包：

        - mingw-developer-toolkit
        - mingw32-base
        - mingw32-gcc-g++
        - msys-base

    *   将 MinGW 和 MSYS bin 路径添加到 PATH 环境变量，如果您没有更改默认安装文件夹，则应添加：

    ```
    C:\MinGW\msys\1.0\bin;C:\MinGW\bin;
    ```

    *   注销并重新登录以确保启动环境变量

2.  在eclipse中新建一个C++项目：

    *   新建 -> C++ 项目
    *   选择项目类型：可执行文件 -> Hello World C++ 项目
        （现在在右侧，在工具链下，您将看到 MinGW GCC）
    *   从工具链列表中选择 MinGW GCC
    *   点击完成
3.  在您的 Hello World 项目中，您将看到**+ src**文件夹和**+ Includes**（如果是这样，您可能很高兴）。

4.  构建项目
5.  运行！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-11-27T18:08:35.663

另一个解决方案：

我进入了 objects.mk 文件

```
################################################################################
# Automatically-generated file. Do not edit!
################################################################################

USER_OBJS := /home/../mylib.so

LIBS := -lstdc++fs -lGL -lGLU -lGLEW -lglut -lm -lmylib 
```

然后没有阅读第一行。然后更改下一行。这是另一个项目的文件夹，因为我使用“复制/克隆项目”功能复制了它，这导致了我的错误。我将 myLib.so 更改为 /proper_address/reallyMyLib.so 并且它起作用了。

警告：它可能会伤害一些未知的地方！在执行此操作之前备份整个项目。因为它说“不要编辑”。

# visual-studio-2008 - no output tracing appears in Visual studio output window

> ID：12574188
> 
> 赞同：0
> 
> 时间：2012-09-24T23:11:24.110
> 
> 标签：visual-studio-2008, mfc

i have been using several ways to Trace output inside Visual Studio 2008 output window but with no mean, i tried:

```
 `cout<<"AAAAAAABBBBBBBBBB";

LPCWSTR str=_T("jdhakjsdk");
OutputDebugString(str);

printf("jdhakjshkajshdkjashdk");` 
```

but nothing appears!! is it true that the output window might be locked??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:10:29.503

不知道为什么你没有得到调试输出（请记住，它`OutputDebugString`只能在调试模式下工作，并附有调试器）。但是，在 MFC 中，您通常使用[TRACE](http://msdn.microsoft.com/en-us/library/4wyz8787%28v=vs.80%29.aspx)宏：

```
TRACE(_T("Data: %s\n"), pszData); 
```

# c# - pinvoke: structure filled on the C side, but data gone when back home

> ID：12574189
> 
> 赞同：0
> 
> 时间：2012-09-24T23:11:29.777
> 
> 标签：c#, c, dll, data-structures, pinvoke

I have a C DLL being called by a C# app, exchanging data using pinvoke. In the following, I have a simple class consisting of an int and 2 arrays of chars. Everything works dandy up to a point: the C# calls the DLL correctly (using "getStreamGroup"), and the DLL fills the passed streamGroup structure with the correct data.

But, once the C function is done, and we are back on the C# side, the streamGroup that got passed and filled with the correct data is now barren: 3 null values. No errors/warnings from VS2010\. This is a 64bit app. Any ideas?

```
#define STREAM_COUNT 9000

typedef struct s_streamGroup
{
    int systemDefinedGroup;

    char name[BUFFER_SIZE_128];
    char streamList[STREAM_COUNT];

} streamGroup;

public class streamGroup
{
    public int systemDefinedGroup;

    [MarshalAs(UnmanagedType.ByValArray, SizeConst = constants.BUFFER_SIZE_128)]
    public byte[] name;

    [MarshalAs(UnmanagedType.ByValArray, SizeConst = constants.STREAM_COUNT)]
    public byte[] streamList;
}

DLL int getStreamGroup( int groupIndex, streamGroup *RequestedStreamGroup)
{   
    *RequestedStreamGroup = Environment.StreamGroup[groupIndex];
    return(DLL_NO_ERROR);
}

[DllImport(constants.DLL_PATH, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
public static extern int getStreamGroup([In] int groupIndex, [In, Out] streamGroup group); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T23:36:42.627

在 streamGroup 之前需要 [StructLayout(LayoutKind.Sequential)]。

如果这还不够，请让你的代码更清晰一点。我不确定哪个项目中有什么代码（如果我理解正确，你有一个本地 C++ 项目和一个 C# 项目）。请给出两个单独的清单，显示哪个是哪个，或者如果我的理解不正确，请解释你在做什么。

# php - PHP mPDF save file as PDF

> ID：12574193
> 
> 赞同：43
> 
> 时间：2012-09-24T23:12:05.010
> 
> 标签：php, pdf, save, mpdf

I have a page which uses mPDF which when you run displays a PDF in the browser, it can also be saved from here as a PDF no problem. What I would like to happen is when the page is run and generates a PDF that the page is saved as a PDF on the server.

Here is the current code:

```
<?php
include $_SERVER['DOCUMENT_ROOT'].'/include/seo-check/lib/WSAclient.php';
include $_SERVER['DOCUMENT_ROOT'].'/include/seo-check/lib/WSAParser.php';

$reportID= $_GET['reportid'];

$WSAclient = new WSAclient(WSA_USER_ID,WSA_API_KEY);

$result=$WSAclient->viewReport($reportID,WSA_SUBSCRIPTION_ID,'xml','EN');

unset($WSAclient);

ob_start();
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>PDF Report</title>
<!--Add your CSS here-->
</head>
<body>    
<?php  
echo WSAParser::viewReportResponse($result);
?>
</body>
</html>
<?php
$HTMLoutput = ob_get_contents();
ob_end_clean();

//Convert HTML 2 PDF by using MPDF PHP library
include $_SERVER['DOCUMENT_ROOT'].'/include/seo-check/lib/MPDF/mpdf.php';
$mpdf=new mPDF(); 

$mpdf->WriteHTML($HTMLoutput);
$mpdf->Output();
?> 
```

Like I said this outputs the PDF fine but could someone tell me how to save as a PDF?

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-09-24T23:24:07.407

mPDF[文档](https://mpdf.github.io/reference/mpdf-functions/output.html)指出 的第一个参数`Output()`是文件路径，第二个是保存模式 - 您需要将其设置为`'F'`.

```
$mpdf->Output('filename.pdf','F'); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-11-29T14:03:06.983

尝试这个：

```
$mpdf->Output('my_filename.pdf','D'); 
```

因为：

`D`- 表示下载
`F`- 表示仅文件保存

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2015-06-02T09:18:04.487

这可以像这样完成。它对我来说很好。如果未设置，还将目录权限设置为 777 或 775。

```
ob_clean();
$mpdf->Output('directory_name/pdf_file_name.pdf', 'F'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-14T12:20:03.947

[Go trough this link](https://mpdf.github.io/reference/mpdf-functions/output.html) 状态的第一个参数是`Output()`文件路径，第二个是保存模式 - 您需要将其设置为`'F'`.

```
 $upload_dir = public_path(); 
             $filename = $upload_dir.'/testing7.pdf'; 
              $mpdf = new \Mpdf\Mpdf();
              //$test = $mpdf->Image($pro_image, 0, 0, 50, 50);

              $html ='<h1> Project Heading </h1>';
              $mail = ' <p> Project Heading </p> ';

              $mpdf->autoScriptToLang = true;
              $mpdf->autoLangToFont = true;
              $mpdf->WriteHTML($mail);

              $mpdf->Output($filename,'F'); 
              $mpdf->debug = true; 
```

例子 ：

```
 $mpdf->Output($filename,'F'); 
```

示例 #2

```
$mpdf = new \Mpdf\Mpdf();
$mpdf->WriteHTML('Hello World');

// Saves file on the server as 'filename.pdf'
$mpdf->Output('filename.pdf', \Mpdf\Output\Destination::FILE); 
```

# c# - Paramaterize File Name in SQL LOAD DATA FILE Statement

> ID：12574194
> 
> 赞同：0
> 
> 时间：2012-09-24T23:12:08.410
> 
> 标签：c#, mysql

I am trying to get a CSV file into a MySQL table, see this thread:

[Loading CSV into MySQL Is This a Bug? - File Not Found Exception](https://stackoverflow.com/questions/12557916/loading-csv-into-mysql-is-this-a-bug-file-not-found-exception)

I have figured out that executing the command is throwing the exception because of the double backlash in the filename. If I move the CSV file to where the executable is and only supply the filename, it runs just fine. The problem is the LOAD DATA statement only accepts a string for the filename, as per the MySQL docs. I can't pass a parameter and I don't know how in C# to specify '\' in a string without escaping it first. I am using String.Format() to build the command string. I have tried both String.Format(@"") and without the @, neither is working. Does anyone have suggestions? I searched the forum and found an example for PHP, wondering if there is something for C#.

Here's the code I have now, where InputFileListView is a list of files a user has chosen to load into the database. the problem is any of the ToString() methods to access the file path information put the \ in the string. This causes issues with executing the command

```
IEnumerable<FileInfo> files = this.InputFileListView.Items.Cast<FileInfo>();

 // just using the first entry in InputFileListView for now
string working = String.Format("LOAD DATA LOCAL INFILE '{0}' IGNORE", files.FirstOrDefault().ToString()) +
                         String.Format("INTO TABLE {0} COLUMNS TERMINATED BY ',' LINES TERMINATED BY '\n'", "by_switch")+
                         String.Format("IGNORE 1 LINES (`Switch`,`Port`,`WWPN`,@the_slot,`Port Index`,@the_time,`Interval`,`Port Send Packet Rate`,")+
                         String.Format("`Port Receive Packet Rate`,`Total Port Packet Rate`,`Port Send Data Rate`,")+        
                         String.Format("`Port Receive Data Rate`,`Total Port Data Rate`,`Port Peak Send Data Rate`,`Port Peak Receive Data Rate`,")+ 
                         String.Format("`Port Send Packet Size`,`Port Receive Packet Size`,`Overall Port Packet Size`,`Error Frame Rate`,")+
                         String.Format("`Dumped Frame Rate`,`Link Failure Rate`,`Loss of Sync Rate`,`Loss of Signal Rate`,`CRC Error Rate`,")+
                         String.Format(" `Short Frame Rate`,`Long Frame Rate`,`Encoding Disparity Error Rate`,")+         
                         String.Format("`Discarded Class3 Frame Rate`,`F-BSY Frame Rate`,`F-RJT Frame Rate`, `Port Send Bandwidth Percentage`,")+
                         String.Format("`Port Receive Bandwidth Percentage`, Overall Port Bandwidth Percentage`,`Primitive Sequence Protocol Error Rate`,")+
                         String.Format("`Invalid Transmission Word Rate`,`Link Reset Transmitted Rate`,`Link Reset Received Rate`)")+ 
                          String.Format("SET Slot = nullif(@the_slot,''),")+ 
                          String.Format(@"Time= str_to_date(@the_time,'%m/%d/%y %h:%i %p')"); 
```

I have tried this, it did not work.

```
 string tester = files.FirstOrDefault().Directory.ToString();
        tester = tester.Replace(@"\\", @"\"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T02:09:05.067

好吧，我没有找到问题的答案，但我找到了解决方法。我想使用 BulkLoader 做的工作：

```
var bl = new MySqlBulkLoader(sqlconnect);
      bl.TableName = "by_switch";
      bl.FieldTerminator = ",";
     bl.LineTerminator = "\n";
      bl.FileName = files.FirstOrDefault().ToString();
       bl.NumberOfLinesToSkip = 1;
    int inserted = bl.Load(); 
```

# java - Spring MVC @RequestBody for JAXB Domain object AFTER XSLT transform of received XML

> ID：12574200
> 
> 赞同：2
> 
> 时间：2012-09-24T23:13:05.197
> 
> 标签：java, xml, xslt, spring-mvc, jaxb

The situation is that a vendor supplied an XML schema for their XML documents that they can submit to my service. I didn't like their schema and so I wrote my own schema along with an XSLT to transform the received XML. My schema was used with JAXB's xjc tool to generate .java files that bind some pojos into a suitable object model. If it were not for the fact that a transformation step were needed, this would be trivial to implement in Spring MVC.

The received XML must first be transformed before being mapped onto the JAXB classes. Roughly analogous to the following snippet:

```
@RequestMapping(value="/receiveXml", method=RequestMethod.POST )
public ResponseEntity<String> receiveXml( @RequestBody String vendorXmlPayload )         {      
  // 1\.  Make sure vendorXmlPayload adheres to vendor's schema
  vendorSchema.newValidator().validate(new StreamSource(new StringReader(vendorXmlPayload)));

  // 2\.  Transform xml payload to my schema
  StringWriter sw = new StringWriter();
  transformer.transform(new StreamSource(new StringReader(vendorXmlPayload)), new StreamResult(sw))

  // 3\.  Validate transformed XML against my schema
  mySchema.newValidator().validate(new StreamSource(new StringReader(sw.toString())));

  // 4\.  Unmarshall to JAXB-annotated classes
  DomainObject obj = (DomainObject) unmarshaller.unmarshal(new StreamSource(new StringReader(sw.toString())));

  (errors != null) ? return ... HttpStatus.BAD_REQUEST : return ..... HttpStatus.OK
} 
```

Are there some elegant Spring annotations to condense all of that on the MVC Controller? Namely is there a way to perform the transform & unmarshal with the @RequestBody annotation or something? Perhaps like this fictitious snippet:

```
@RequestMapping(value="/receiveXml", method=RequestMethod.POST )
@Transform(transformer="myTransform.xslt")
public ResponseEntity<String> receiveXml( @RequestBody DomainObj domainObj)         
{
  // Process my DomainObj as I normally would
  (errors != null) ? return ... HttpStatus.BAD_REQUEST : return ..... HttpStatus.OK
} 
```

@InitBinder doesn't quite look like it fits this scenario. Most "Spring MVC XSLT" searches deal with transforming output rather than input.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T02:32:10.797

我怀疑是否有这样的开箱即用的东西，但你应该能够按照这些思路构建可重用的东西：

为自己定义一个新的注释，比如@XmlWithTransform，它接受一个参数，比如 xslt 位置，你可以通过这种方式在控制器上指定它：

```
@RequestMapping(value="/receiveXml", method=RequestMethod.POST )
    public ResponseEntity<String> receiveXml( @XmlWithTransform(usingxslt="anxsl.xsl")     CustomType customType ) 
```

现在编写一个`HandlerMethodArgumentResolver`可以接受请求正文 xml 的自定义，使用注释的 xslt 参数对其进行转换，并将其绑定到指定为参数的类型，如下所示：

```
import java.io.StringReader;

import javax.servlet.http.HttpServletRequest;
import javax.xml.bind.Unmarshaller;
import javax.xml.transform.stream.StreamSource;

import org.springframework.core.MethodParameter;
import org.springframework.http.converter.xml.Jaxb2RootElementHttpMessageConverter;
import org.springframework.http.server.ServletServerHttpRequest;
import org.springframework.web.bind.support.WebDataBinderFactory;
import org.springframework.web.context.request.NativeWebRequest;
import org.springframework.web.method.support.HandlerMethodArgumentResolver;
import org.springframework.web.method.support.ModelAndViewContainer;

public class XsltTransformingHandlerMethodArgumentResolver implements HandlerMethodArgumentResolver{

    Unmarshaller unmarshaller;
    @Override
    public boolean supportsParameter(MethodParameter parameter){
        return (parameter.getMethodAnnotation(XmlWithTransform.class)!=null);
    }

    @Override
    public Object resolveArgument(MethodParameter parameter, ModelAndViewContainer mavContainer, NativeWebRequest webRequest, WebDataBinderFactory binderFactory) throws Exception {
        XmlWithTransform xmlWithTransform = parameter.getMethodAnnotation(XmlWithTransform.class);
        Class<?> parameterType = parameter.getParameterType();
        String xsltLocation = xmlWithTransform.usingxstl();
        ServletServerHttpRequest servletRequest = new ServletServerHttpRequest(webRequest.getNativeRequest(HttpServletRequest.class));
        String xmlFromVendor = IOUtils.toString(servletRequest.getBody(), "UTF-8");

        String xmlInternal = transform(xmlFromVendor, xsltLocation);
        return unmarshaller.unmarshal(new StreamSource(new StringReader(xmlInternal)));
    }
} 
```

并使用 Spring MVC 注册此参数解析器：

```
<mvc:annotation-driven> 
   <mvc:argument-resolvers>
        <bean class="XsltTransformingHandlerMethodArgumentResolver"></bean>
   </mvc:argument-resolvers>
</mvc:annotation-driven> 
```

# javascript - jslint 配置 | 传递全局变量

> ID：12574203
> 
> 赞同：4
> 
> 时间：2012-09-24T23:13:16.823
> 
> 标签：javascript, jslint

我如何提醒 jshint 我有全局变量，即命名它们。我知道你可以做到这一点，但我不记得语法。

我在这里定义了一个这样的全局

```
(function(){window.glob1 = local_var;})() 
```

然后像这样使用：（不同的 IIFE）

```
(function(){glob1 // does something})() 
```

jshint 是在定义之前使用它。

它不是标志，实际上有一种按名称列出全局变量的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T23:15:30.850

你是说语法吗

```
 /* global window, console, jQuery */ 
```

...在每个JS文件的开头？

# jquery - Multiple ajax calls for the same client with reverse ajax

> ID：12574206
> 
> 赞同：2
> 
> 时间：2012-09-24T23:13:31.307
> 
> 标签：jquery, ajax, spring-mvc, weblogic, atmosphere

I'm developing a very large application in JAVA / Sping MVC / Jquery over Oracle Weblogic that has a couple of screens called overviews that make multiple ajax calls to the server. All this calls should be made in parallel as they provide the summary of the different types of information to the end client. From this screens the user can then drill down to the detail of the information.

Since I have a lot of calls I'm constantly observing a behavior of the server that suggest en-queuing of the requests at the server (In the logs everything happens sequentially and when a specific type of information takes more time to process the other are only resolved when that ends).

I think I understand why this is happening, however I would like to process the requests in parallel in the server also. I'm considering two possible alternatives:

*   Change some configurations on weblogic (I don't know which one...)
*   Implement reverse ajax

I prefer the second however my server is bound to servlet 2.5 (weblogic 10.3.6) so I cannot take advantage of the new assynchronous API in servlet 3.0

I'm looking closely at atmosphere which has a very clean design IMHO. Also I'm open to other technologies suggestions. The problem is how can I do something like this in atmosphere. What I want is to shoot the requests to the server and have them processed in parallel. As soon as they are ready I want to receive the answer and close underlying connection.

How can I achieve this ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:23:53.250

查看 DWR：[http ://directwebremoting.org/dwr/index.html](http://directwebremoting.org/dwr/index.html)

这似乎是我见过的最好的 AJAX/java 解决方案。它可以以一种很好的方式对请求进行批处理，这对 AJAX 很重要。

但是，AJAX 应该默认异步处理，因此您的实现可能会发生其他事情。

也许这会有所帮助：[Parallel asynchronous Ajax requests using jQuery](https://stackoverflow.com/questions/1060539/parallel-asynchronous-ajax-requests-using-jquery)

另外，请注意对服务器的最大并发请求数有限制：[在流行的浏览器中允许多少并发 AJAX (XmlHttpRequest) 请求？](https://stackoverflow.com/questions/561046/how-many-concurrent-ajax-xmlhttprequest-requests-are-allowed-in-popular-browse)

# node.js - Node.js 中的大量数据能否超过堆栈大小？

> ID：12574208
> 
> 赞同：4
> 
> 时间：2012-09-24T23:13:38.353
> 
> 标签：node.js, callstack

我对 Node.js 的内部工作原理不是很熟悉，但据我所知，当您进行太多函数调用时，会出现“超出最大调用堆栈大小”错误。

我正在制作一个会跟踪链接的蜘蛛，并且在随机数量的爬网 URL 之后我开始收到这些错误。发生这种情况时，Node 不会为您提供堆栈跟踪，但我很确定我没有任何递归错误。

我正在使用[请求](http://github.com/mikeal/request)来获取 URL，我*正在*使用[cheerio](https://github.com/MatthewMueller/cheerio)来解析获取的 HTML 并检测新链接。堆栈溢出总是发生在cheerio 内部。当我将cheerio 换成htmlparser2 时[，](https://github.com/fb55/node-htmlparser)错误消失了。Htmlparser2 要轻得多，因为它只是在每个打开的标签上发出事件，而不是解析整个文档并构造一棵树。

我的理论是，cheerio 吃掉了堆栈中的所有内存，但我不确定这是否可能？

这是我的代码的简化版本（仅供阅读，不会运行）：

```
var _       = require('underscore');
var fs      = require('fs');
var urllib  = require('url');
var request = require('request');
var cheerio = require('cheerio');

var mongo   = "This is a global connection to mongodb.";
var maxConc = 7;

var crawler = {
  concurrent: 0,
  queue:      [],
  fetched:    {},

  fetch: function(url) {
    var self = this;

    self.concurrent += 1;
    self.fetched[url] = 0;

    request.get(url, { timeout: 10000, pool: { maxSockets: maxConc } }, function(err, response, body){
      self.concurrent  -= 1;
      self.fetched[url] = 1;
      self.extract(url, body);
    });
  },

  extract: function(referrer, data) {
    var self = this;
    var urls = [];

    mongo.pages.insert({ _id: referrer, html: data, time: +(new Date) });

    /**
     * THE ERROR HAPPENS HERE, AFTER A RANDOM NUMBER OF FETCHED PAGES
    **/
    cheerio.load(data)('a').each(function(){
      var href = resolve(this.attribs.href, referer); // resolves relative urls, not important

      // Save the href only if it hasn't been fetched, it's not already in the queue and it's not already on this page
      if(href && !_.has(self.fetched, href) && !_.contains(self.queue, href) && !_.contains(urls, href))
        urls.push(href);
    });

    // Check the database to see if we already visited some urls.
    mongo.pages.find({ _id: { $in: urls } }, { _id: 1 }).toArray(function(err, results){
      if(err) results = [];
      else    results = _.pluck(results, '_id');

      urls = urls.filter(function(url){ return !_.contains(results, url); });
      self.push(urls);
    });
  },

  push: function(urls) {
    Array.prototype.push.apply( this.queue, urls );
    var url, self = this;

    while((url = self.queue.shift()) && this.concurrent < maxConc) {
      self.fetch( url );
    }
  }

};

crawler.fetch( 'http://some.test.url.com/' ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T01:32:38.937

看起来你在那里进行了一些递归。递归函数调用最终会超出堆栈，因为这是存储函数指针的地方。

所以这是如何发生的：

1.  在 request.get 回调中提取调用
2.  在 mongo.pages.find 回调中提取调用推送
3.  在 while 循环内推送调用 fetch

这个循环似乎会重复，直到你用完堆栈。

在您的情况下，堆栈在您调用时运行得非常低，`cheerio.load`这就是为什么它会立即用完。

尽管您很可能想检查这是否是错误或您想要的东西，但为了在不使用直接递归的情况下在 nodejs 中获得相同的效果，请使用：

`process.nextTick(functionToCall)`.

它将离开封闭的函数，该函数将其指针从堆栈中弹出，但`functionToCall`在下一个滴答时调用。

你可以在noderepl中试试：

`process.nextTick(function () { console.log('hello'); })`

将立即打印“你好”。

它类似于`setTimeout(functionToCall, 0)`，但比它更受欢迎。

与您的代码相关，您可以替换`self.fetch(url)`为`process.nextTick(function () { self.fetch(url); })`并且不应再用完堆栈。

话虽如此，如上所述，您的代码中更有可能存在错误，因此请先查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-01T15:44:46.423

你减`self.concurrent -= 1;`得太早了，你应该`extract`在所有异步内容完成后在函数内减量。这是一个突出的问题。不知道它是否会解决它。

# html - IMG 与自动换行问题对齐？

> ID：12574212
> 
> 赞同：1
> 
> 时间：2012-09-24T23:14:47.437
> 
> 标签：html, css, alignment, word-wrap

请在这个 jsfiddle 上查看我的代码。为什么文字没有环绕图像？我那里有分词代码。是我放错地方了还是怎么了？

[提琴手](http://jsfiddle.net/DwUXk/)

据我所知，在我的代码中使用这两个自动换行...

```
style="word-wrap: break-all;"

style="word-wrap: break-word;" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T23:49:53.043

如果我理解您希望将文本完全包裹在图像周围，我不明白这是怎么可能的。您可以向左或向右浮动图像。不幸的是，没有 float: center 让您的布局看起来更像“杂志”。您需要将文本分成两部分并重新编码，如下所示：[http ://www.alistapart.com/d/crosscolumn/example4.html](http://www.alistapart.com/d/crosscolumn/example4.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T01:18:27.843

刚刚为你做了一个例子：http: [//jsfiddle.net/HBsxK/1/](http://jsfiddle.net/HBsxK/1/)

有带有图像的绿色和红色段落。两者相同，但段落内的文本不同。

上面的一个（绿色）是你的意思吗？

较低的问题与您的小提琴相同：文本没有分词（空格）并且没有有意义的单词（浏览器如何知道，如何以有意义的方式连字符或中断，例如“dgkl;fgdkl;fdgkl; fgdk;fdgk;dfgskljfdgjkldfgk;dfgsk;dfgskfdgkfgdkl;fgjd;flkgjdfgdfgsdfgjkdfgjdfgdfgdfgjfdgsjf”因为人类无法知道）。

# javascript - jquery-jtable 如果满足条件，则执行操作

> ID：12574215
> 
> 赞同：0
> 
> 时间：2012-09-24T23:15:15.650
> 
> 标签：javascript, jquery, jquery-ui, jquery-jtable

我正在使用 jtable (jtable.org) 并创建了一个我想要的表。我不知道该怎么做是围绕动作做一个if语句`'createAction'`

jtable api中有一个对象叫做：

> TotalRecordCount：记录总数（不仅是本页）。

我想要的是这样的：

> if(TotalRecordCount < 5){ createAction: 'PersonActionsPagedSorted.php?orderId=&action=create', }

这是整个代码：

```
<script type="text/javascript">
    jQuery(document).ready(function () {
//Prepare jTable
jQuery('#ext_table').jtable({
//title: 'Create Extensions',
paging: true,
pageSize: 10,
sorting: true,
defaultSorting: 'Extension ASC',
actions: {
listAction: 'PersonActionsPagedSorted.php?orderId=&action=list',
createAction: 'PersonActionsPagedSorted.php?orderId=&action=create',
updateAction: 'PersonActionsPagedSorted.php?action=update',
deleteAction: 'PersonActionsPagedSorted.php?action=delete'
},
fields: {
PersonId: {
key: true,
create: false,
edit: false,
list: false
},
Name: {
title: 'Name',
width: '30%',
sorting:false,
//inputClass: 'validate[required]'
},
emailAddress: {
title: 'Email Address',
width: '20%',
sorting:false
}
});
//Load person list from server
$('#ext_table').jtable('load');
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T20:50:31.287

首先，$recordCount 由 SQL 查询设置，类似于：

```
 $sql_select = "SELECT COUNT(*) AS RecordCount FROM myTable";
    $stmt = $conn->query($sql_select);
    $result = $stmt->fetch(PDO::FETCH_ASSOC);
    $recordCount = $result['RecordCount']; 
```

然后将该设置变量插入到 $jTableResult 数组中，其中 ['TotalRecordCount'] 索引排序如下：

```
 $jTableResult['TotalRecordCount'] = $recordCount; 
```

我这样说是为了澄清 $recordcount 变量已经可供 php 使用，而无需尝试从 jtable 本身中提取它（也就是说，它不是来自 jtable 的 GET 或 POST 数据）。

现在，在您指定字段和操作的 jtable 配置文件中，您可以执行以下操作：

```
 actions: {
                listAction: 'actions.php?action=list',
    <?php if($recordCount <5) { ?>
               createAction: 'actions.php?orderId=&action=create',
    <?php }else{ ?>
               createAction: 'actions.php?action=create',
    <?php } ?>
                updateAction: 'actions.php?action=update',
                deleteAction: 'actions.php?action=delete'
            }, 
```

我很肯定这可行，因为我使用相同的方法来检查 $_SESSION 变量以确定某些操作是否可供用户使用。

# java - JPA - 使用带有复合键的条件内部连接表的问题

> ID：12574218
> 
> 赞同：1
> 
> 时间：2012-09-24T23:15:26.237
> 
> 标签：java, hibernate, jpa, composite-key, hibernate-criteria

嗨，我尝试使用 Criteria 进行此查询：

```
 select p.idpregled,p.idkarton,p.datum_pregleda,k.status from pregled p 
 inner join karton k 
 on p.idkarton = k.idkarton 
 where k.status ='Otvoren'; 
```

这两个表之间的关系是这样的：

```
table karton
idkarton (pk)
..
..
table pregled
idpregled (pk)
idkarton (pk,fk)
.
. 
```

这两个表中的两个的代码：

```
@Entity
@Table(name ="karton")
public class Karton implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    @Id
    private KartonPrimaryKey pk = new KartonPrimaryKey();

    @Column(name ="status", nullable = false)
    private String status;
    @Column(name="datum_otvaranja" , nullable = false)
    private Date datumOtvaranja;
    @Column(name = "napomena")
    private String napomena;
    @ManyToOne(targetEntity = Pacijent.class)
    @JoinColumn(name ="idpacijent",nullable = false,unique = true)
    private Pacijent pacijent;

    @OneToMany(mappedBy = "pk.kartonForeignKey")
    @GwtTransient
    private List<Pregled> pregledi = new LinkedList<Pregled>();

    public KartonPrimaryKey getPk() {
        return pk;
    }
    public void setPk(KartonPrimaryKey pk) {
        this.pk = pk;
    }

    public String getStatus() {
        return status;
    }
    public void setStatus(String status) {
        this.status = status;
    }
    public Date getDatumOtvaranja() {
        return datumOtvaranja;
    }
    public void setDatumOtvaranja(Date datumOtvaranja) {
        this.datumOtvaranja = datumOtvaranja;
    }
    public String getNapomena() {
        return napomena;
    }
    public void setNapomena(String napomena) {
        this.napomena = napomena;
    }
    public Pacijent getPacijent() {
        return pacijent;
    }
    public void setPacijent(Pacijent pacijent) {
        this.pacijent = pacijent;
    }
    public List<Pregled> getPregledi() {
        return pregledi;
    }
    public void setPregledi(List<Pregled> pregledi) {
        this.pregledi = pregledi;
    }

      public int hashCode(){
          final int prime = 31;
          int result = 1;
          result = prime * result
                  +((pregledi == null) ? 0 : pregledi.hashCode());
          result = prime * result
                  +((pk == null) ? 0 : pk.hashCode());
          return result;
      }

      public boolean equals(Object obj){
          if (this == obj) 
            return true;
          if (obj == null) 
            return false;
          if(getClass() != obj.getClass())
              return false;
          final Karton other = (Karton) obj;
          if (pregledi == null) {
            if(other.pregledi != null)
                return false;
          }else if(!pregledi.equals(other.pregledi))
              return false;
          if (pk == null) {
            if(other.pk != null)
                return false;
        }else if(!pk.equals(other.pk))
            return false;
          return true;
      }

}

@Embeddable
public class KartonPrimaryKey implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    @Column(name ="idkarton")
     Integer idKarton;

    public Integer getIdKarton() {
        return idKarton;
    }

    public void setIdKarton(Integer idKarton) {
        this.idKarton = idKarton;
    }

    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((idKarton == null) ? 0 : idKarton.hashCode());
//        result = prime * result + ((version == null) ? 0 : version.hashCode());
        return result;
    }

    public boolean equals(Object obj) {
        if(this == obj)
            return true;
        if(obj == null)
            return false;
        if(getClass() != obj.getClass())
            return false;
        final KartonPrimaryKey other = (KartonPrimaryKey) obj;
        if (idKarton == null) {
            if(other.idKarton != null)
                return false;
        }else if(!idKarton.equals(other.idKarton))
            return false;
        return true;
    }

}
@Entity
@Table(name = "pregled")

@AssociationOverrides({
    @AssociationOverride(name = "pk.idPregled", 
        joinColumns = @JoinColumn(name = "idpregled")),
    @AssociationOverride(name = "pk.kartonForeignKey", 
        joinColumns = @JoinColumn(name = "idkarton")) })
public class Pregled implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    @EmbeddedId
     PregledKartonId pk = new PregledKartonId();

    @Column(name ="datum_pregleda")
    private Date datumPregleda;

    @ManyToOne(targetEntity = Dijagnoza.class)
    @JoinColumn(name ="iddijagnoza",nullable = false)
    private Dijagnoza dijagnoza;

    @OneToMany(mappedBy = "primaryKey.pregledForeignKey")
    @GwtTransient
    private List<PregledStavke> pregledStavke = new LinkedList<PregledStavke>();

    public Dijagnoza getDijagnoza() {
        return dijagnoza;
    }
    public void setDijagnoza(Dijagnoza dijagnoza) {
        this.dijagnoza = dijagnoza;
    }

    public PregledKartonId getPregledKarton() {
        return pk;
    }

    public void setPregledKarton(PregledKartonId pregledKarton) {
        this.pk = pregledKarton;
    }

    @Transient
    public Integer getIdPregled() {
        return pk.getIdPregled();
    }

    public void setIdPregled(Integer id) {
        pk.setIdPregled(id);
    }

    public PregledKartonId getPk() {
        return pk;
    }
    public void setPk(PregledKartonId pk) {
        this.pk = pk;
    }
    public List<PregledStavke> getPregledStavke() {
        return pregledStavke;
    }
    public void setPregledStavke(List<PregledStavke> pregledStavke) {
        this.pregledStavke = pregledStavke;
    }

    @Transient
    public Karton getKarton() {
        return getPregledKarton().getKartonForeignKey();
    }
    public void setKarton(Karton karton) {
        getPregledKarton().setKartonForeignKey(karton);
    }
    public Date getDatumPregleda() {
        return datumPregleda;
    }
    public void setDatumPregleda(Date datumPregleda) {
        this.datumPregleda = datumPregleda;
    }

    public boolean equals(Object o) {
        if (this == o)
            return true;
        if (o == null || getClass() != o.getClass())
            return false;

        Pregled that = (Pregled) o;
        if (pregledStavke == null) {
            if (that.pregledStavke != null) {
                return false;
            }
        }else if(!pregledStavke.equals(that.pregledStavke))
            return false;
        if (pk == null) {
            if (that.pk != null)
                return false;

        }else if (!pk.equals(that.pk))
            return false;

        return true;
    }
// 
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result +((pregledStavke == null) ? 0 : pregledStavke.hashCode());
        result = prime * result +
                ((pk == null) ? 0 : pk.hashCode());
        return result;
    }

}

@Embeddable
public class PregledKartonId implements Serializable {

    @GeneratedValue
    @Column(name = "idpregled")
     Integer idPregled;

    @ManyToOne
    private Karton kartonForeignKey;

    public Integer getIdPregled() {
        return idPregled;
    }

    public Karton getKartonForeignKey() {
        return kartonForeignKey;
    }

    public void setKartonForeignKey(Karton kartonForeignKey) {
        this.kartonForeignKey = kartonForeignKey;
    }

    public void setIdPregled(Integer idPregled) {
        this.idPregled = idPregled;
    }

    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((idPregled == null)? 0 : idPregled.hashCode());
        result = prime + result
                + ((kartonForeignKey == null) ? 0 : kartonForeignKey.hashCode());
        return result;
    }

    public boolean equals(Object o){
        if (this == o) return true;
        if(o == null)
            return false;
        if(getClass() != o.getClass())
            return false;

        final PregledKartonId  that = (PregledKartonId) o;
        if(idPregled == null){
            if(that.idPregled != null)
                return false;
        }else if(!idPregled.equals(that.idPregled))
            return false;
        if(kartonForeignKey == null){
            if(that.kartonForeignKey != null)
                return false;
        }else if(!kartonForeignKey.equals(that.kartonForeignKey))
            return false;

        return true;
    }

} 
```

我尝试了这个标准代码，但这并不成功：

```
Criteria criteria = session.createCriteria(Pregled.class);
        criteria.setFetchMode("kartonForeignKey", FetchMode.JOIN).add(Restrictions.eq("status", "Otvoren"));
List<Pregled> pregledi = criteria.list(); 
```

这段代码在堆栈跟踪中给我带来了这个错误：

```
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract java.util.List com.fit.klinika.client.pregled.PregledService.queryPregledOtvoren()' threw an unexpected exception: org.hibernate.QueryException: could not resolve property: status of: com.fit.klinika.client.pregled.Pregled
    at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:385)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:588)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:362)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216) 
```

提前致谢 ：）

当我尝试这样做时：

```
 Criteria criteria = session.createCriteria(Pregled.class,"pregled");
            criteria.createAlias("pregled.pk.kartonForeignKey","karton"); 
```

这很好用，如果我使用 where coditions 添加这行代码：

```
criteria.add(Restrictions.eq("karton", "Otvoren")); 
```

给我同样的错误？？？

然后我在谷歌上做了一些关于这个的搜索，发现这个问题没有被休眠解决

[https://hibernate.onjira.com/browse/HB-417](https://hibernate.onjira.com/browse/HB-417)，

[https://hibernate.onjira.com/browse/HHH-1742](https://hibernate.onjira.com/browse/HHH-1742)，

[https://hibernate.onjira.com/browse/HHH-1570](https://hibernate.onjira.com/browse/HHH-1570)

这个错误来自 2003 年，并且没有被休眠修复，这可能吗？？wtf？！？！？！？

如我错了请纠正我 ：）...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T01:33:49.783

错误消息是说它在您的`Pregled`类中找不到名为“status”的属性。在您的代码示例中，您可以看到`Pregled`该类实际上没有名为“status”的映射字段。

# asp.net-mvc - 当我尝试在本地调试 Azure 应用程序时，为什么会出现此错误？

> ID：12574229
> 
> 赞同：1
> 
> 时间：2012-09-24T23:16:27.843
> 
> 标签：asp.net-mvc, azure, windows-8, visual-studio-2012

当我尝试使用 Visual Studio 2012 和 Windows 8 启动 Azure MVC webapp 的本地实例时，我收到以下错误：

```
Invalid class string (Exception from HRESULT: 0x800401F3 (CO_E_CLASSSTRING)) 
```

任何想法为什么，或者我能做些什么来克服它？当 Windows Azure 模拟器显示以下消息“Windows Azure 计算模拟器中的应用程序的启动角色”时，它会发生

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T23:54:48.640

这个问题在[这里](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/ad362016-16f6-459a-8022-9307aa5f910e)讨论了各种类似的症状和可能的修复，您可以通过检查可能是您的问题。

在大多数情况下，安装 IIS（从 Windows Azure 功能开/关）确实可以解决此问题，因此您可以尝试一下。

# php - 在抽奖代码中使用 PHP 生成真正的随机数

> ID：12574231
> 
> 赞同：1
> 
> 时间：2012-09-24T23:17:07.470
> 
> 标签：php

我有一个类似抽奖的程序：用户在一个项目上放置了 x 个令牌。这将作为 user_id、item_id、number_of_tokens 记录到数据库中

到了画画的时候，我会做以下事情：

```
$ballots = array();
$users = all users that placed at least one token on Item A.

foreach( $users as $user )
{
  $number_of_ballots = Get number of ballots this User placed on Item A
  for($i = 1; $i leq $number_of_ballots; $i++)
  {
    $ballots[] = $user->id;
  }
}
shuffle( $ballots );
$winner_user_id = mt_rand(0, count($ballots) -1 ); 
```

现在我的问题是：

*   这能保证随机选择吗？
*   将 10 个代币放在物品 A 上的人获胜的机会是否比将 1 个代币放在物品 A 上的人高 10 倍？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T23:23:09.023

是的，在伪随机数生成器的范围内。`mt_rand`优于`rand`，但仍然不是真正随机的。答案真的是“足够接近”。请注意，由于您是从组中随机挑选获胜者，因此您实际上并不需要`shuffle`.

是的，拥有 10 个代币的人比拥有 1 个代币的人的机会高 10 倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T23:25:00.057

对我来说看起来不错，但是`mt_rand`，虽然比 rand 好，但并不完美。最好使用真正的随机数生成器，例如[http://www.random.org/](http://www.random.org/)。[这是他们的一个小比较](http://boallen.com/random-numbers.html)。

此外，如果您处理的是真钱，random.org 会提供真实性证书来验证您选择的随机性。

# delphi - 如何在我的应用程序中手动包含 VCL 样式？

> ID：12574234
> 
> 赞同：9
> 
> 时间：2012-09-24T23:17:27.407
> 
> 标签：delphi, delphi-xe2, vcl-styles

我有一个应用程序，它使用条件能够将其编译为 VCL 表单应用程序或 Delphi XE2 中的 Windows 服务应用程序。但是，由于我手动更改了项目的主源文件，IDE 将不再允许我使用标准项目选项窗口进行某些修改。具体来说，我无法选择要包含或实现的 VCL 样式。

因此，我必须手动实现 VCL 样式。所以，我添加了两个必要的单元`Vcl.Themes`和`Vcl.Styles`我项目的初始化单元（在这种情况下，它与项目的主单元不同），并且基本上将代码从工作应用程序复制到这个新应用程序中。

这是项目的主要单元：

```
program MyServiceApplication;

uses
  uMyService in 'uMyService.pas' {MyService: TService},
  uMyServiceMain in 'uMyServiceMain.pas',
  uMyServiceInit in 'uMyServiceInit.pas',
  uMyServiceTest in 'uMyServiceTest.pas' {frmMyServiceTest};

{$R *.RES}

begin
  RunMyService;
end. 
```

然后在项目的初始化单元中：

```
unit uMyServiceInit;

interface

uses
{$IFDEF TESTAPP}
  Vcl.Forms,
  Vcl.Themes,
  Vcl.Styles,
  uMyServiceTest,
{$ELSE}
  Vcl.SvcMgr,
  uMyService,
{$ENDIF TESTAPP}
  uMyServiceMain
  ;

procedure RunMyService;

implementation

procedure RunMyService;
begin
{$IFDEF TESTAPP}
  Application.Initialize;
  Application.MainFormOnTaskbar := True;
  TStyleManager.TrySetStyle('Carbon'); //<--- WILL NOT RUN - STYLE DOES NOT EXIST
  Application.Title := 'My Windows Service Application';
  Application.CreateForm(TfrmMyServiceTest, frmMyServiceTest);
{$ELSE}
  if not Application.DelayInitialize or Application.Installing then
    Application.Initialize;
  Application.CreateForm(TMyService, MyService);
{$ENDIF TESTAPP}
  Application.Run;
end;

end. 
```

问题是，当应用程序运行时，我得到一个错误`Style 'Carbon' could not be found.`只是因为这个样式没有被包含并编译到应用程序中。

如何手动将此样式编译到此应用程序中，以便 VCL 样式可以实现它？

PS：之所以在单独的单元中进行初始化，是因为如果条件是在应用程序的主单元中实现的，IDE 会*破坏*代码。

**编辑**

我尝试过的一件事：我打开了一个工作项目的`.dproj`文件并搜索了这种风格`carbon`，希望在那里找到一些配置，因为工作项目使用了这种风格，但没有运气。该文件中的任何位置都不存在该单词。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-25T01:36:11.537

`TStyleManager` is loading available styles from a 'VCLSTYLE' resource section of the executable (unless you set `TStyleManager.AutoDiscoverStyleResources` to false). The resource is what's missing in your scenario. Basically, there are three ways to add your style as a resource in the exe.

*   Through the 'Project' -> 'Resources and Images..' menu. Add the style clicking the 'Add' button in the dialog, set its type to 'VCLSTYLE' and identifier to 'CARBON'.

*   As [Ken](https://stackoverflow.com/users/62576/ken-white) mentioned in the comment to the question, through an .rc file. This is a text file which can contain a line per style (and/or other resources). Like

    ```
    `CARBON VCLSTYLE `"C:\..\RAD Studio\9.0\Redist\Styles\Vcl\Carbon.vsf"``
    ```

    `(you can use relative paths if it is feasible). Let's name the file 'styles.rc', add the file to the project through project manager (or use brcc32.exe in the bin folder to compile it to a .res file) and then add a `{$R styles.res}` line to your unit.`
`*   As [RRUZ](https://stackoverflow.com/users/91299/rruz) told in [his answer](https://stackoverflow.com/a/9704000/243614) that he linked in a comment to the question, by editing the .dproj file. Under the `<PropertyGroup Condition="'$(Base)'!=''">` key, add a `VCL_Custom_Styles` entry (his example includes several styles):

    ```
    ``<VCL_Custom_Styles>&quot;Amakrits|VCLSTYLE|$(PUBLIC)\Documents\RAD Studio\9.0\Styles\Amakrits.vsf&quot;;&quot;Amethyst Kamri|VCLSTYLE|$(PUBLIC)\Documents\RAD Studio\9.0\Styles\AmethystKamri.vsf&quot;;&quot;Aqua Graphite|VCLSTYLE|$(PUBLIC)\Documents\RAD Studio\9.0\Styles\AquaGraphite.vsf&quot;</VCL_Custom_Styles>``
    ````

# cakephp - cakephp在表单后传递参数

> ID：12574238
> 
> 赞同：0
> 
> 时间：2012-09-24T23:18:30.727
> 
> 标签：cakephp

我正在创建一个页面，当用户将消息添加到数据库时，它们会被带回查看消息页面（在页面上显示相关消息的列表）。但是，当我单击提交以添加消息时，它不会将参数也传递给 url。

```
 public function add_admin($id=null){
    //allows user to add a new message to a dispute
    $this->set('title_for_layout', 'Dispute Information');
    $this->set('stylesheet_used', 'homestyle');
    $this->set('image_used', 'eBOXLogoHome.png');
    $this->layout='home_layout';
    //gets messages where Message.dispute_id=$id
    $dispute=$this->Message->field('dispute_id', array('dispute_id'=>$id));
    //sets the variables

    $this->set('dispute', $dispute);
    //$sets the variable $user to User.id
    $user=$this->Auth->User('id');
    //sets the variable
    $this->set('user',$user);
    //if the request posts to the database
    if($this->request->is('post')){
    //create an instance of message in the database
        $this->Message->create();
    //if the message saves
    if ($this->Message->save($this->request->data)) {
    //redirect the user to Messages/viewMessage_admin
        $this->redirect( array('controller' => 'Messages','action' => 'viewMessage_admin',$id));

    }
    }

    $this->set('id',$id);

    } 
```

* * *

```
public function viewMessage_admin($id=null){
//allows users to view all messages related to a dispute
$this->set('title_for_layout', 'Dispute Information');
$this->set('stylesheet_used', 'homestyle');
$this->set('image_used', 'eBOXLogoHome.png');
$this->layout='home_layout';
$this->set('dispute_id',$id);
debug($id);
//find all messages where Message.dispute_id=$id
$Messages=$this->Message->find('all',array(
'conditions'=>array('dispute_id'=>$id)));
//find User details where user.id=message.user_id
$Username=$this->User->find('all', array(
'conditions'=>array(
'User.id'=>'Message.user_id')));
//get messages where message.dispute_id=$id
$dispute=$this->Message->field('dispute_id', array('dispute_id'=>$id));
//sets the variables
$this->set('dispute', $dispute);
$this->set('username', $Username);
$this->set('dispute_id',$id);
$this->set('message',$Messages);

} 
```

这是我的表格的代码

```
<table id="data">
<tr>
<th>Please add your message below.</th></tr>
<tr><td>
<?php echo  $this->Form->create('Message', array('action'=>'add_admin')); ?>
<?php echo $this->Form->inpute('user_id', array('type'=>'hidden', 'value'=>$user)); ?>
<?php echo $this->Form->input('message',array('label'=>false)); ?>
</td></tr><tr><td>
<?php echo $this->Form->hidden( 'dispute_id', array( 'value' => $dispute ) ); ?>
<?php echo $this->Form->end('Submit'); ?></td></tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:34:59.590

你不应该这样做吗？

```
if ($this->Message->save($this->request->data)) {
    $this->redirect( array('controller' => 'Messages','action' => 'viewMessage_admin', $this->Message->id ));

} 
```

似乎您想将它们重定向到已保存的消息，因此请尝试`$this->Message->id`改用。

**更新**

```
<?php echo  $this->Form->create('Message', array('url'=>'/messages/add_admin/' . $id )); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:26:51.943

```
public function add_admin($id=null){
    //allows user to add a new message to a dispute
    $this->set('title_for_layout', 'Dispute Information');
    $this->set('stylesheet_used', 'homestyle');
    $this->set('image_used', 'eBOXLogoHome.png');
    $this->layout='home_layout';
    //gets messages where Message.dispute_id=$id
    $dispute=$this->Message->field('dispute_id', array('dispute_id'=>$id));
    //sets the variables

    $this->set('dispute', $dispute);
    //$sets the variable $user to User.id
    $user=$this->Auth->User('id');
    //sets the variable
    $this->set('user',$user);
    //if the request posts to the database
    if($this->request->is('post')){
    //create an instance of message in the database
        $this->Message->create();
    //if the message saves
    if ($this->Message->save($this->request->data)) {

    //redirect the user to Message.viewMessage_admin
    $id = $this->data['Message']['dispute_id'];
    $this->set('id',$id);
    $this->redirect(array('controller'=>'Messages','action'=>'viewMessage_admin',$id));

    }
    }

    $this->set('id',$id);

    } 
```

# java - java.sql.SQLException: ORA-00933: SQL 命令未正确结束

> ID：12574249
> 
> 赞同：5
> 
> 时间：2012-09-24T23:20:48.433
> 
> 标签：java, oracle, jdbc

我想要完成的是能够编写 SQL 语句并验证结果。SQL 语句中将包含变量，例如：

```
String sql = "Select  zoneid from zone where zonename = myZoneName"; 
```

myZoneName 是从 count + 生成的

注意：我使用 Apache POI 来解析 Excel 电子表格。

这是代码：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Properties;

import org.apache.log4j.Logger;
import org.junit.Test;

public class VerifyDBSingleDomain {

    static Logger log = Logger.getLogger(VerifyDBSingleDomain.class.getName());

    String url = "jdbc:oracle:thin:@a.b.c.d:1521:mname";

    @Test
    public void VerifyDBSingleDomainTest() throws SQLException {

        Properties props = new Properties();
        props.setProperty("user", "user");
        props.setProperty("password", "password");

        String sql = "Select  zoneid from zone where zonename = 99224356787.tv";
        //String sql = "Select * from zone";

        Connection conn;
        //try {
            conn = DriverManager.getConnection(url, props);
            PreparedStatement preStatement = conn.prepareStatement(sql);
            ResultSet result = preStatement.executeQuery();
            System.out.println(result);

            /*while (result.next()) {
                System.out.println(result.toString());
            }
        } catch (SQLException e) {

            e.printStackTrace();
        }*/

    //  }
    //}

    }
} 
```

我得到错误：

```
java.sql.SQLException: ORA-00933: SQL command not properly ended 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T23:23:37.850

`WHERE`假设`myZoneName`是文本类型，您应该在子句中使用单引号：

```
String sql = "Select zoneid from zone where zonename = '99224356787.tv'"; 
```

`zoneid`假设它是 INTEGER 类型，使用以下命令显示：

```
while (result.next()) { 
   System.out.println(result.getInt("zoneid");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T23:43:10.693

如果 myZoneName 是 Varchar 类型，则必须将其包裹在这样的引号中

```
 String sql = "Select  zoneid from zone where zonename = '99224356787.tv'"; 
```

获取表格内容：

```
ResultSet result = preStatement.executeQuery();
        System.out.println(result);

        while (result.next()) {
            System.out.println(result.getInt("zoneid")); // if zoneid is int in the db table
        } 
```

有关更多信息，请参阅[Java resultSet API](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html) :)

# c++ - C++ GDB Python 漂亮的打印教程？

> ID：12574253
> 
> 赞同：37
> 
> 时间：2012-09-24T23:21:15.853
> 
> 标签：c++, python, gdb

我正在寻找有关创建自定义打印机的可靠教程。

GDB 页面上有一些稀疏的页面，但它们远未完成，还有很多想象空间！

例如，我希望能够为我们的自定义共享指针类创建一个 PrettyPrinter。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-08T03:58:57.063

查看 Tom Tromey 的漂亮打印教程[第 1](http://tromey.com/blog/?p=524)部分和[第 2 部分](http://tromey.com/blog/?p=546)。还有[libstdc++-v6 漂亮的打印机实现](http://gcc.gnu.org/git/?p=gcc.git;a=blob_plain;f=libstdc%2b%2b-v3/python/libstdcxx/v6/printers.py;hb=HEAD)可供查看，这是我刚开始时自己用作模板的。一个更简单的例子（在撰写本文时）是 Rüdiger Sonderfeld 的Boost[漂亮](https://github.com/ruediger)[打印机](https://github.com/ruediger/Boost-Pretty-Printer/blob/master/boost/printers.py)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-01-07T08:40:15.850

对于初学者来说，这个看起来很有趣： [来自 redhat 的 Python Pretty-Printers](https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Developer_Guide/debuggingprettyprinters.html)

从这个简单的教程中，您可以继续学习更高级的教程。这是一个很好的例子：[Pretty-printers for libstc++](http://gcc.gnu.org/git/?p=gcc.git;a=blob_plain;f=libstdc%2b%2b-v3/python/libstdcxx/v6/printers.py;hb=HEAD)

# javascript - Require.js 忽略 baseUrl

> ID：12574255
> 
> 赞同：7
> 
> 时间：2012-09-24T23:21:39.053
> 
> 标签：javascript, requirejs

好的，这让我发疯，所以也许有人可以指出我正确的方向......

我使用最新的 require.js 和 jquery 作为我的模块加载器。我正在使用该`data-main`属性指向一个带有`baseUrl`. 当我尝试加载一个模块时，`baseUrl`它会被忽略，并且 require 正在尝试从与`main.js`.

**/js/main.js**

```
require.config({
    baseUrl: '/js/vendor/'
}); 
```

**/path/to/page.html**

```
<script data-main="/js/main" src="/js/vendor/require-jquery.js"></script>
<script>
require(['jquery', 'bootstrap'], function($) {
    $(function() {
        console.log('hello world!');
    });
});
</script> 
```

**预期的：**

负载`http://localhost:3000/js/vendor/bootstrap.js`和日志`hello world!`

**实际的：**

尝试加载`http://localhost:3000/js/bootstrap.js`——失败:'(

我已经尝试在 require 脚本标记中使用相对路径而不是绝对路径`data-main`。`src`我所做的一切似乎都不会触发`baseUrl`. 我完全错过了文档中的某些内容吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T03:42:00.847

问题是 require.js 异步加载脚本（这就是 requirejs 背后的要点），因此当您`require()`在加载 require 后立即将其添加到脚本标记中时，此脚本`js/main.js`会在加载之前执行。

简单的方法是将所有这些都包含在 中`main.js`，或者创建一个新文件来保存这部分并从 js/main 加载它

**/js/main.js**

```
require.config({
    baseUrl: '/js/vendor/'
});

require(['jquery', 'bootstrap'], function($) {
    $(function() {
        console.log('hello world!');
    });
}); 
```

**- 或者 -**

**/js/main.js**

```
require.config({
    baseUrl: '/js/vendor/',
    deps: ['../boostrap']
}); 
```

**/js/boostrap.js**

```
define(['jquery', 'bootstrap'], function($) {
    $(function() {
        console.log('hello world!');
    });
}); 
```

*note`require()`成为`define()`引导文件中的一个*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-02T12:57:16.667

您的配置正在异步模式下执行。当第一次`require`调用建立时，您的配置尚未应用。根据文档：

> 加载时`require.js`它将注入另一个脚本标签（具有异步属性）`scripts/main.js`

因此，只需在同步模式下执行您的配置：

```
<script src="/js/vendor/require-jquery.js"></script>
<script src="/js/main.js"></script>
<script>
require(['jquery', 'bootstrap'], function($) {
  $(function() {
    console.log('hello world!');
  });
});
</script> 
```

更多信息：[将配置与主模块分离的模式](https://github.com/jrburke/requirejs/wiki/Patterns-for-separating-config-from-the-main-module)

# apache - htaccess 文件错误 500

> ID：12574257
> 
> 赞同：0
> 
> 时间：2012-09-24T23:21:48.833
> 
> 标签：apache, .htaccess, mod-rewrite

嘿，我的客户端主机有问题，在我的主机中进行测试和开发 .htaccess 和 mod_rewrite 工作正常，但是当我将站点文件放入客户端主机时给我 500 错误。我的文件.htaccess：

```
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule ^(.*)$ index.php?rwr=$1
AddDefaultCharset UTF-8 
```

mod_rewrite 在客户端主机上被激活，因为它有效：

```
RewriteEngine on
RewriteRule teste\.html http://www.amen.pt [R] 
```

就像您在[http://www.maiormaquina.com/offers](http://www.maiormaquina.com/offers)中看到的那样给出 500 错误，但在我的服务器中 [http://www.amiguinhodesign.com/mm_new/offers](http://www.amiguinhodesign.com/mm_new/offers)可以正常使用相同的 .htaccess 文件。

有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:31:37.217

我已经解决了这个 .htaccess 文件内容的问题：

```
 RewriteEngine On
   RewriteBase /
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteRule ^(.*)$ index.php?rwr=$1 [QSA,PT,L] 
```

用它 ：）

# ios - 使用 Apple Dev 代码时出错？

> ID：12574259
> 
> 赞同：0
> 
> 时间：2012-09-24T23:22:00.960
> 
> 标签：ios

我只是将这段代码从苹果开发库复制/粘贴到 xcode 中，xcode 给了我很多基本的语法错误..

```
- (void) authenticateLocalPlayer
{
    GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];
    localPlayer.authenticateHandler = ^(UIViewController *viewController, NSError *error){
         if (viewController != nil)
         {
             [self showAuthenticationDialogWhenReasonable: viewController
         }
         else if (localPlayer.isAuthenticated)
         {
             [self authenticatedPlayer: localPlayer];
         }
         else
         {
             [self disableGameCenter];
         }
     }];
} 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T00:04:08.640

我怀疑您需要针对 iOS6 而不是。如果我以 iOS 5.x 为目标，我的编译器也会生成错误。文档指出 @property authenticateHandler 的可用性仅适用于 iOS6。

此外，块的第一个 if 子句中 viewController 后缺少右括号和分号的语法错误。

# apache-flex - AIR 2.5 到 3.2 升级失败，错误 16824 和 16815

> ID：12574260
> 
> 赞同：0
> 
> 时间：2012-09-24T23:22:09.030
> 
> 标签：apache-flex, air

我们刚刚将更新推送到生产中的应用程序。初始版本使用 Air SDK 2.5，而我们推送了 SDK 3.2。检测到新版本并下载应用程序后，出现错误#16824。

如果用户卸载 2.5 应用程序并手动安装 3.2 应用程序，则该应用程序运行正常。

有任何想法吗？

- - - 编辑

我们有带有 2.5（错误）命名空间的 update.xml

`<update xmlns="http://ns.adobe.com/air/framework/update/description/2.5">...`

但是当用 3.2 ns 替换它时：

`<update xmlns="http://ns.adobe.com/air/framework/update/description/3.2">...`

该应用程序无法下载，我收到错误 16815。

那里有一个答案[，](http://forums.adobe.com/message/4510437)但我们已经仔细检查了更新程序 swc 是否正确，即来自 SDK3.2。

错误 16815 是“无效的更新描述符（未知的描述符版本）”。请参阅[此处的参考](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/air/update/ApplicationUpdaterUI.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:56:25.170

愤怒！！！！！！！！！！！！

对于错误 16815，请检查 sdk 文件夹中的以下文件： `<sdk>\frameworks\projects\air\ApplicationUpdater\src\ApplicationUpdater\air\update\descriptors\UpdateDescriptor.as`function`isKnownVersion`

唯一授权的名称空间是 1.0 和 2.5。

我检查了 SDK 3.2 和 3.4，它们都有相同的限制。修复步骤：

1.  在您的 src 文件夹中创建一个包 air.update.descriptors
2.  将 UpdateDescriptor.as 复制到此包中
3.  将以下块添加到 UpdateDescriptor.as

`public static const NAMESPACE_UPDATE_3_2:Namespace = new Namespace("http://ns.adobe.com/air/framework/update/description/3.2");`

和
`case NAMESPACE_UPDATE_3_2.uri:`

你现在已经允许了你最喜欢的 sdk！

# android - 分离列表适配器仅显示标题

> ID：12574263
> 
> 赞同：0
> 
> 时间：2012-09-24T23:22:16.687
> 
> 标签：android, listadapter

出于某种原因，当我查看我的列表时，我只得到标题。我确定我正在使用的数组中有数据，因为调试表明它确实如此。

这是我的分离列表适配器文件

```
public class SeparatedListAdapter extends BaseAdapter {

public final Map<String,Adapter> sections = new LinkedHashMap<String,Adapter>();
public final ArrayAdapter<String> headers;
public final static int TYPE_SECTION_HEADER = 0;

public SeparatedListAdapter(Context context) {
    headers = new ArrayAdapter<String>(context, R.layout.list_header);
}

public void addSection(String section, Adapter adapter) {
    this.headers.add(section);
    this.sections.put(section, adapter);
}

public Object getItem(int position) {
    for(Object section : this.sections.keySet()) {
        Adapter adapter = sections.get(section);
        int size = adapter.getCount() + 1;

        // check if position inside this section 
        if(position == 0) return section;
        if(position < size) return adapter.getItem(position - 1);

        // otherwise jump into next section
        position -= size;
    }
    return null;
}

public int getCount() {
    // total together all sections, plus one for each section header
    int total = 0;
    for(Adapter adapter : this.sections.values())
        total += adapter.getCount() + 1;
    return total;
}

public int getViewTypeCount() {
    // assume that headers count as one, then total all sections
    int total = 1;
    for(Adapter adapter : this.sections.values())
        total += adapter.getViewTypeCount();
    return total;
}

public int getItemViewType(int position) {
    int type = 1;
    for(Object section : this.sections.keySet()) {
        Adapter adapter = sections.get(section);
        int size = adapter.getCount() + 1;

        // check if position inside this section 
        if(position == 0) return TYPE_SECTION_HEADER;
        if(position < size) return type + adapter.getItemViewType(position - 1);

        // otherwise jump into next section
        position -= size;
        type += adapter.getViewTypeCount();
    }
    return -1;
}

public boolean areAllItemsSelectable() {
    return false;
}

public boolean isEnabled(int position) {
    return (getItemViewType(position) != TYPE_SECTION_HEADER);
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    int sectionnum = 0;
    for(Object section : this.sections.keySet()) {
        Adapter adapter = sections.get(section);
        int size = adapter.getCount() + 1;

        // check if position inside this section 
        if(position == 0) 
            return headers.getView(sectionnum, convertView, parent);
        if(position < size)
            return adapter.getView(position - 1, convertView, parent);

        // otherwise jump into next section
        position -= size;
        sectionnum++;
    }
    return null;
}

@Override
public long getItemId(int position) {
    return position;
} 
```

}

当我查看列表时，它只显示标题，没有其他内容。

**编辑：好的，所以我想通了，直到我可以自己回答我现在只需要发布这样的答案**

我弄清楚我在做什么。在我的片段中，我在添加部分后清除了 ArrayList，认为这无关紧要。显然这很重要。

旧代码

```
adapter.addSection(date, new ArrayAdapter<String>(getActivity(), R.layout.list_item, taskArray));
    taskArray.clear(); 
```

新代码

```
adapter.addSection(date, new ArrayAdapter<String>(getActivity(), R.layout.list_item, new ArrayList<String>(taskArray)));
    taskArray.clear(); 
```

添加`new ArrayList<String>(taskArray)`到`addSection`通话中解决了我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T04:23:20.750

我弄清楚我在做什么。在我的片段中，我在添加部分后清除了 ArrayList，认为这无关紧要。显然这很重要。

旧代码

`adapter.addSection(date, new ArrayAdapter<String>(getActivity(), R.layout.list_item, taskArray)); taskArray.clear();`

新代码

`adapter.addSection(date, new ArrayAdapter<String>(getActivity(), R.layout.list_item, new ArrayList<String>(taskArray))); taskArray.clear();`

将 new ArrayList(taskArray) 添加到 addSection 调用解决了我的问题。

# regex - 使用 powershell 脚本过滤文件的内容

> ID：12574265
> 
> 赞同：0
> 
> 时间：2012-09-24T23:22:25.067
> 
> 标签：regex, powershell, scripting, filter, pid

我在文本文件中有以下内容：

```
Image Name                     PID Session Name        Session#    Mem Usage
========================= ======== ================ =========== ============

abc.exe                       9152 Console                    1     14,988 K
abc.exe                       7964 Console                    1     89,188 K 
```

需要注意的重要一点是两个进程具有相同的名称（abc.exe）。现在我只需要过滤其中一个进程的 PID。我正在考虑将任务列表的内容输出到文本文件中，然后从我想要的行中过滤 PID。我如何最好使用 powershell 脚本来执行此操作？我正在考虑正则表达式，但无法得到我想要的确切结果。这是两个进程之间的关系：

```
Parent.exe 
 ->abc.exe
   ->abc.exe 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:26:26.963

什么工具生成文本文件？可以修改生成流程信息表的工具吗？

不使用`Get-Process`cmdlet 收集进程父/子层次结构。考虑`Get-WMIObject win32_process`改用，因为它的输出包含父进程的字段，恰当地命名为`ParentProcessId`. 请注意，Windows 会回收进程 ID，因此该字段可能指向不存在的进程或另一个与手头进程无关的进程。[请参阅MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394372%28v=vs.85%29.aspx "MSDN")上的 MS 文档。

# c# - 禁止使用给定的 .net 框架库

> ID：12574267
> 
> 赞同：1
> 
> 时间：2012-09-24T23:22:34.310
> 
> 标签：c#, .net, visual-studio, namespaces

我有一个程序，我想为其提供文件系统的抽象，以便始终针对通过给定工厂获得的给定实现执行用于读取文件、创建目录等的 IO 操作。

例如，您需要访问 MyLib.IO.File 而不是访问 System.IO.File，其中包含系统支持的文件的一组给定操作，并且实际实现将由 IOC 或单例工厂提供.

但是，不熟悉系统的人可能只是引用 System.IO 并开始直接处理文件系统中的文件。如果他的实际配置实例化了标准 System.IO 包装器，那么所有这些都将在他的机器上正常工作，但最终会在底层文件系统更改时中断。

有什么方法可以警告甚至更好地禁止在 VS 应用程序中使用某些命名空间，以便用户知道他不应该使用 .NET 框架的那部分，而是提供另一个库来获得该特定功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T23:31:12.870

是的。有一种方法，它被称为清晰而简短的 API 文档。足够清晰以鼓励阅读，并且足够短以使开发人员对完成前放弃不感兴趣。

我的意思是强制使用你自己的库听起来不错，你有你的论点，但是模糊 BCL 库听起来很糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T23:42:39.993

CASPOL 会很烦人，而且没有多少开发人员会阅读 API 文档，直到他们陷入困境。

发布一个构建脚本，使用程序集绑定日志查看器 (Fuslogvw.exe) 询问解决方案，以获取 System.IO 和其他不需要的引用。您也可以更进一步，使用反射甚至自省来查看 System.IO 的使用是否正常。恕我直言，此选项的侵入性最小，并提供了一些保证正确的 DLL/命名空间将用于发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T23:25:36.977

不，那里没有。

编辑：

也许。可以使用`System.IO.*`代码访问安全性（或 .NET 4.x 中的任何替代品）来限制使用，但这意味着您需要完全控制应用程序（例如，您加载插件代码，而不是仅使用您的部件）。

# haskell - Haskell中用户定义的特定值类型？

> ID：12574268
> 
> 赞同：-3
> 
> 时间：2012-09-24T23:22:35.287
> 
> 标签：haskell, types

我已经用谷歌搜索了这件事，但找不到任何相关的东西（让我感到惊讶，因为这似乎是许多人想要尝试的显而易见的事情）。

我想做这样的事情：

```
data Car = "ford" | "chevy" 
```

换句话说，我希望右侧的值是特定的值，即特定的字符串、特定的数字等，而不是一般的值。

这可能吗？我该怎么做？

谢谢。

编辑：我不是在寻找：数据 Car = Ford | 雪佛兰

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T23:32:02.710

`data Car = Ford | Chevy`

数据构造函数不是字符串。请注意，第一个字母的大写不是可选的。在 haskell 中，数据构造函数的第一个字母必须大写，值的标识符必须有非大写的首字母。

编辑：

以下是如何将类型值限制`Car`为`Ford`并`Chevy`仍然将它们用作字符串：

```
data Car = Ford | Chevy

carToString Ford = "Ford"
carToString Chevy = "Chevy" 
```

然后，您将使用类似的东西创建一个值，`mycar = Ford`并且只要您想将这些值用作字符串，您只需使用`carToString mycar`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T00:39:17.660

您尝试做的事情在 Haskell 中无法直接实现。`data Car = "ford" | "chevy"`看起来它正在尝试创建`String`;的子类型 所有`Car`值都是`String`s，但并非所有`String`s 都是`Car`s。您尝试的语法的更一般用法会创建奇怪的类型，这些类型是子类型的无差别联合（例如`data Strange = 1 | "one" | '1'`.

Haskell 的类型系统没有子类型，所以这永远不会直接工作。

如果您实际上并不关心类型的值`Car`是`String`s，那么您可以使用`data Car = Ford | Chevy`（如 Matt S 所建议的那样）。

如果您确实关心 type 的值`Car`是`String`s，大概是因为您希望能够将函数`String`应用于`Car`值，但您不希望能够将任何 old`String`作为 a传递`Car`。

与创建仅是您想要的 s 的类型不同的方法是创建一个`Car`类型加上**一个**函数，该函数为您提供与任何给定的 s 对应的函数。例如：`String``Car``String``Car`

```
data Car = Ford | Chevy

carStr :: Car -> String
carStr Ford = "ford"
carStr Chevy = "chevy" 
```

然后您可以传递`Car`值并对`Car`它们进行操作，并且当您实际需要该值时`String`（例如用于打印），您只需调用`carStr`它即可。

但是，有`Show`可以转换为 a 的类型的类`String`，您可以自动获取如下实例`Show`：

```
data Car = Ford | Chevy
    deriving Show 
```

然后该函数会将构造`show`函数呈现为, 和. 这不完全是您最初拥有的，因为第一个字母是大写的（数据构造函数名称必须以大写字母开头，并且派生实例将匹配构造函数名称）。您可以手动编写自己的实例而不是派生它，如下所示：`Ford``String` `"Ford"``Chevy``"Chevy"``Show``Show`

```
data Car = Ford | Chevy

instance Show Car where
    show Ford = "ford"
    show Chevy = "chevy" 
```

但是由于这么多`Show`实例为它们呈现的值生成了完全的 Haskell 语法，我倾向于认为最好不要在可能的情况下偏离这一点。但是您可以两全其美，并拥有一个自动派生的`Show`实例，因此您不必手动设置数据构造函数和它们生成的字符串之间的对应关系，*以及*生成您想要的特定字符串的不同函数：

```
import Data.Char

data Car = Ford | Chevy
    deriving Show

carStr :: Car -> String
carStr = map toLower . show 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-25T06:36:05.203

拥有字符串对您来说似乎非常重要，但您希望拥有类型安全性。字符串本质上*不是*类型安全的。抽象数据类型*是*类型安全的，一旦你习惯了它，你就会发现你喜欢它。

一个好处是您可以允许用户使用任何大小写（16 或 32 种可能性），但在内部只有一种表示形式，因此一旦您一次读取数据，使用数据就会快速高效。如果您在内部使用字符串，那么每次您的程序依赖于所使用的 Car 时，您将永远进行更复杂的大小写字符串检查。

如果只在``Car`内部使用数据类型，则根本不需要字符串，因此拥有字符串的唯一原因是处理输入和输出。这是一种具有类型安全性*并*使用字符串处理输入/输出的方法。编译后，抽象数据类型的数据表示非常小，因此运行速度比字符串快。

```
data Car = Ford | Chevy
  deriving (Read,Show,Eq) 
```

所以现在我们可以读取、显示和检查是否相等。这使您有能力做

```
read "Ford" -- gives Ford
show Chevy  -- gives "Chevy"
Ford == Chevy -- gives False
read "GM" -- gives an exception. oops. 
```

但也许对你来说比阅读和展示更有用的是

```
getCar :: String -> Maybe Car
getCar xs = case toLower xs of
   "ford"   -> Just Ford
    "chevy" -> Just Chevy
    _       -> Nothing 
```

这很棒，因为您可以轻松地使用它进行错误检查，而不会引发异常并使整个程序崩溃，并且您的用户可以使用他们想要的任何大小写。对于一个简单的例子，你可以写

```
feedback :: Maybe Car -> String
feedback Nothing = "Please enter a valid car. Why not use one of America's favourite brands? Ford or Chevy"
feedback (Just Ford) = "Thanks for choosing Ford."
feedback (Just Chevy) = "Thanks for choosing Chevy" 
```

你还需要

```
ungetCar :: Car -> String
ungetCar Ford  = "ford"     -- or you could use "Ford"
ungetCar Chevy = "chevy"    -- or you could use "Chevy" 
```

无论您使用`"ford"`还是`"Ford"`由您决定，但由于我没有在内部使用这个字符串来检查输出，所以我不妨使用普通文本中的大写`"Ford"`，所以我可以写

```
ungetCar = show 
```

现在在您的代码中，您可以编写

```
... if car == Ford then .... else ..... 
```

代替

```
... if (map toLower carString) == "ford" then ... else 
```

类型安全的好处是，如果你的函数使用`Car`数据类型，它可以毫无问题地假设用户输入了一辆有效的汽车，福特或雪佛兰，并且不会由于不是“福特”的字符串而崩溃或出错或“雪佛兰”。这会将您*所有*的错误检查代码移至您第一次使用`getCar`. 如果你使用字符串，并且你希望你的代码是健壮的，那么*每个*使用汽车的函数都应该检查它给出的汽车是否有效，如果不是就抛出异常，然后你就浪费了很多处理器周期，你在错误处理面条汤。`data Car = Ford | Chevy`安全、快捷、方便。

使用抽象数据类型允许您进行防御性编程，同时还可以只检查一次是否有无效数据。仅凭这一点，您应该更喜欢它。它也清晰、干净和容易。

如果您稍后添加另一辆车

数据汽车 = 福特 | 雪佛兰 | 通用汽车

您只需更新几位代码（例如`getCar`）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T04:58:21.727

目前还不清楚您希望实现什么。听起来您想要一种可以在任何地方使用的类型 a`String`可以，但同时，它只能是 String 可以是的可能值的子集。但是..这到底是什么意思？

例如，是否应该允许这两种功能？

```
reverseCar :: Car -> Car
reverseCar = reverse

idCar :: Car -> Car
idCar = map id 
```

通过检查，您可以看到`reverseCar`将产生一个不再是真正 a 的输出值`Car`。但`idChar`实际上根本不会改变任何东西，所以输出仍然是真正的`Car`. 但是构建一个可以自动检查的编译器是不可能的。

因此，不可能有一个可以在任何地方使用的类型，`String`同时阻止您应用可以工作`String`但会导致非`Car`值的函数。

除了：

```
data Char = Ford | Chevy 
```

您的选择是使用类型别名和一些辅助函数：

```
type Car = String

ford :: Car
ford = "ford"

chevy :: Car
chevy = "chevy" 
```

这将防止您出现拼写错误`frod`，并允许您在任何可以使用的`Car`地方使用 a。`String`但这意味着您也可以应用`reverse`创建无效`Car`类型的函数。

您可以更进一步并使用新类型包装器：

```
newtype Car = Car { carToString :: String }

ford :: Car
ford = Car "ford"

chevy :: Char
chevy = Car "chevy" 
```

然后，您可以定义一堆可以安全使用 a 的受信任函数，`Car`并且只导出这些函数，而不是`Car`数据构造函数。这将阻止人们`reverse`直接将函数应用于`Car`. 相反，他们将不得不使用`carToString`来告诉编译器他们不再想将自己限制在`Car`安全功能上。

这也可能不是您想要的。但我认为你越是试图解释你到底想要什么……你就越会意识到你想要的东西是不一致的和/或不可能的。

不可能，我的意思不是“在 Haskell 中不可能”，而是“你需要解决不可能的停机问题”。

您给出的一个示例是`Integer`不允许使用文字 3.567。那是混淆了不同的问题。`Integer`数据类型本身无法表达 3.567 。它看起来像：

```
data Integer = I Int32 | J [Digit] 
```

也就是说..它要么是一个可以用机器int表示的小整数，要么是一个数字列表。因此，类型本身明确禁止使用小数点。很像

```
data Car = Ford | Chevy 
```

阻止你表达“苹果”。

还有将源代码中的数字文字转换为`Integer`值的问题。当您编写 (3.567 :: Integer) 时，它本质上是简写，它会扩展为：

```
(fromRational (3567 % 100)) :: Integer 
```

你会得到一个错误，比如：

```
No instance for (Fractional Integer)
      arising from the literal `3.567' 
```

但是..这是将文字值转换为类似`Integer`or的类型的过程`Double`。没有通用数字类型`Integer`并且`Double`是其子类型。

我们可以`Car`通过使用 quasi-quoter 来做类似的事情，这样你就可以写：

```
myCar :: Car
myCar = [car| ford |] 
```

这将被接受，但这将被拒绝：

```
notMyCar :: Car
notMyCar = [car| apple |] 
```

但是现在我们已经真正脱离了深层次，并没有更接近你想要的......虽然你想要的仍然很不清楚。

# excel - 识别 Excel 模式

> ID：12574269
> 
> 赞同：1
> 
> 时间：2012-09-24T23:22:42.663
> 
> 标签：excel, excel-formula

我有以下模式引用单独的工作表。

D3 有`=SUM(TUESDAY!H3:H15)`
D4 有`=SUM(TUESDAY!H18:H30)`
D5 有`=SUM(TUESDAY!H33:H45)`

这种模式将通过 D 列继续

如何在不手动输入每个单元格的情况下重复此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T23:30:51.133

在单元格 D3 中尝试此操作，然后向下复制

`=SUM(OFFSET(Tuesday!$H$1,(ROW()-3)*15+2,0,13,))`

# android - Android服务随机/自动启动

> ID：12574273
> 
> 赞同：4
> 
> 时间：2012-09-24T23:22:59.243
> 
> 标签：android, multithreading, android-service

我有一个 android 服务，我将它绑定到一个活动，并且在销毁时未绑定。问题是，当应用程序关闭时，它会从无到有，有时当我打开设备时，有时会随机启动，我知道它是由于 toast 消息而启动的。让我们进入代码...

创建活动

```
Intent intent = new Intent(this, Sincronizacao.class);
this.bindService(intent, mConnection, Context.BIND_AUTO_CREATE);
this.startService(intent); 
```

mConnection 的代码

```
private ServiceConnection mConnection = new ServiceConnection() {
    public void onServiceConnected(ComponentName className, IBinder service) {
        serviceBound = true;
        localBinder = (LocalBinder<Sincronizacao>) service;
    }
    public void onServiceDisconnected(ComponentName className) {
        serviceBound = false;
        localBinder = null;
    }
}; 
```

并在销毁

```
@Override
protected void onDestroy() {
    super.onDestroy();
    if (serviceBound && mConnection != null) {
        unbindService(mConnection);
    }
    Intent intent = new Intent(this, Sincronizacao.class);
    stopService(intent);
    localBinder = null;
} 
```

在我的服务中，实现了 onStartCommand，在那里我启动了一个查询 Web 服务并将数据插入数据库的线程，该线程有一段时间（真），我只是中断它服务的 onDestroy 方法......

**编辑**：

这是清单行

```
android:name="com.company.package.service.Sincronizacao" /> 
```

我已经在这个错误中挣扎了一段时间，希望你能帮助我。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T01:39:21.780

我能够解决问题...在服务中，我将代码`onStartCommand`从`onBind`. 从那以后我没有任何问题，我只是在投标状态下使用该服务。

另外，以前我用 停止服务内的线程`thread.interrupt()`，现在我在 while 中使用一个标志，并将它设置为 false on`onUnbind`和`onDestroy`。

# python - 与 python 的 feedparser 速度混淆，它在命令行上非常快，但在部署时很慢

> ID：12574275
> 
> 赞同：0
> 
> 时间：2012-09-24T23:23:07.023
> 
> 标签：python, django, feedparser

```
feed = feedparser.parse("http://someyoutubeurl")
video_data = feed.entries[0]
# Adding the data to a dict, etc... 
```

这行代码在我的 python 命令行上输入时会立即运行并完成。但是当我在我的 django web 服务器上部署 feedparser 时，这个过程实际上需要 10 秒才能完成。一定有什么地方很不对劲。

我什至使用完全相同的 youtube 视频进行了测试，速度差异仍然存在！

你们有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T01:38:17.443

我不确定这是否算作答案，但通常我看到有多种原因：

*   你的网络服务器的硬件可能没有你的桌面那么强大，所以下载和解析只需要更长的时间。如果可能的话，您可以在您的网络服务器 python shell 中尝试相同的代码行并测量性能。下载主要取决于您的连接速度，主要在您的 CPU 和部分 RAM 上进行解析（取决于提要的大小）。

*   如果您在 Django 中运行这行代码，则延迟会比从普通 python shell 中运行时稍大一些，这很简单，因为每个操作都必须通过 Django 框架。

# jquery - 抓取 jQuery 插件生成的 HTML

> ID：12574279
> 
> 赞同：0
> 
> 时间：2012-09-24T23:23:35.830
> 
> 标签：jquery, html, plugins, widget

我有一个来自供应商的插件，我只能在我的网站中包含这样的插件：

```
<p>my content</p>

<script type="text/javascript" src="http://widgeturl"></script>
<script type='text/javascript'>
    showWidget();
</script>
<!--widget inserts lots of HTML here -->

<p>more of my content</p> 
```

现在，这个脚本生成的 HTML 非常难看，我想将一个事件处理程序附加到某个事件，当小部件脚本完成它的工作时通知我，我可以开始抓取/修改它生成的 HTML。

谁能解释我会怎么做？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T23:26:45.007

如果`showWidget()`是阻塞的（这似乎是因为它直接在自己的脚本之后插入 HTML），你可以`<script>`在它下面放另一个标签，然后用它前面的 HTML 做一些事情。

# ruby-on-rails - Rails：使用发送数据在浏览器中强制“另存为”对话框

> ID：12574284
> 
> 赞同：2
> 
> 时间：2012-09-24T23:23:58.263
> 
> 标签：ruby-on-rails, http

我需要向我的 Web 应用程序的用户提供一个文件以供下载。具体来说，我想要一个在浏览器中打开另存为对话框的链接。我正在使用发送数据执行此操作。

```
def get_config_file    
      file = "some stuff"
      send_data file, filename: "user.config", disposition: "attachment"      
end 
```

在我看来，它：

```
= link_to "Config file", file_get_config_url, id: "setup_manual_link" 
```

我实际得到的行为是链接单击会自动将文件下载（不另存为）到用户的下载文件夹中。我还需要做些什么来强制在浏览器中打开另存为对话框吗？用户必须找到文件并将其移动到正确的位置，这是一种糟糕的用户体验。

# html - 浮动在绝对定位框 IE8 及以下的元素

> ID：12574286
> 
> 赞同：0
> 
> 时间：2012-09-24T23:24:04.927
> 
> 标签：html, css, internet-explorer-8, positioning

示例页面查看此操作：[http](http://sturents.com/student-accommodation/Durham/house/34-young%20street/865) ://sturents.com/student-accommodation/Durham/house/34-young%20street/865 - 问题在于照片下方的框，在大多数情况下显示为 9x9 网格浏览器，但在 IE8 中作为一个稍微偏移的垂直列表。

使用以下 (SASS) 代码：

```
 div.facilities {
    clear: both; overflow: hidden;
    ul {
        margin: 15px 0 0;
    }
    @include facilitiesForm;
    label {
        title { text-indent: -99999em;}
        &:hover, &:active, &:focus {
            span {
                background-position: $facilitiesFormBgPos;
            }
        }
        &.sel span {
            background-position:  top left;
        }
    }
} 
```

使用@facilitiesForm mixin 如下：

```
ul {
    list-style: none;
}
li {
    float: left; margin: 0 11px 11px 11px;
    &:nth-child(3n+1) {
        clear: left;
    }
}
label {
    display: block; width: 90px;
    text-align: center;
    span {
        height: 60px; width: 60px; display: inline-block;
        background-repeat: no-repeat; background-position: $facilitiesFormBgPos;
                   /* one bg-image rule for each icon */
    }
    &:hover, &:active, &:focus, &.sel {
        span {
            background-position: left top;
        }
    }
} 
```

最后它在 a 内，应用了以下内容：

```
div.centre-hack {
overflow: hidden;
> div {
    float: left; position: relative; left: 50%;
    > * {
        float: left; position: relative; left: -50%;
    }
}
} 
```

我认为这是 CSS 的最后一点，即“中心黑客”，它使一个 3x3 浮动图标框居中，而不是在导致问题的灵活父项的一侧。但是，如果没有方便的控制台在 IE 中进行测试，我只能对哪个元素需要更多布局设置才能正确呈现进行反复试验，所以我想我可能会看看以前使用过这种技术的人是否知道如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T23:29:31.627

实际上-我相信问题出在您正在使用的 nth-child 上。IE8 不支持它。

[http://reference.sitepoint.com/css/pseudoclass-nthchild](http://reference.sitepoint.com/css/pseudoclass-nthchild)

但是 - 它似乎在 IE8 和 9 的 jsfiddle 中工作正常...... [http://jsfiddle.net/NDxT7/](http://jsfiddle.net/NDxT7/)

经过进一步讨论，我们发现有些元素会导致布局出现问题。IE 没有其他浏览器那么宽容，因此会出现一些问题。在此处的验证中可以看到错误：http: [//validator.w3.org/check ?uri=http%3A%2F%2Fsturents.com%2Fstudent-accommodation%2FDurham%2Fhouse%2F34-young%2520street%2F865&charset=% 28检测+自动%29&doctype=内联&group=0](http://validator.w3.org/check?uri=http%3A%2F%2Fsturents.com%2Fstudent-accommodation%2FDurham%2Fhouse%2F34-young%2520street%2F865&charset=%28detect+automatically%29&doctype=Inline&group=0)

# ms-access - 从 32 位到 64 位的 VBA 代码 - Ms Access

> ID：12574302
> 
> 赞同：1
> 
> 时间：2012-09-24T23:25:29.847
> 
> 标签：ms-access, vba, ms-access-2010, 32bit-64bit

我在运行 32 位 Microsoft Office 的 64 位机器（Windows 7）上构建了一个应用程序。客户端机器是64位windows和64位office。

我最初遇到了 comdlg32.dll 的问题，但包含了 PtrSafe 关键字。下一个问题是我安装到客户端机器中的 IPCONFIG.dll 丢失。

我现在可以编译它，但我正在尝试使用文件保存对话框（Ken Getz 的代码）。它似乎跳过了打开实际对话框并直接运行到运行时错误 2522（需要文件名）。任何帮助表示赞赏。这是我正在使用的代码（指回 Ken Getz 的函数）：

```
Function exportData_Click()

Dim strFilter As String
Dim strSaveFileName As String
Dim The_Year As Variant

Dim ctlCurrentControl As Control
Dim queryName As String

'Get the name of the control button clicked (corresponds to query name to be run)
Set ctlCurrentControl = Screen.ActiveControl
queryName = ctlCurrentControl.Name

'Get combobox value and assign relavent values to The_Year
The_Year = Forms![Extract Data]!Extract_Year.value

'Change the year from a variant to what we need in the SQL

If The_Year Like "20*" Then
    The_Year = CInt(The_Year)
    'MsgBox The_Year & "Data Type = " & VarType(The_Year)
Else: The_Year = "*"
'MsgBox The_Year & "Data Type = " & VarType(The_Year)
End If

'Set queryYear variable
setYear (The_Year)

'Check the variable is correct
'MsgBox getYear()

'Open the Save as Dialog to choose location of query save

strFilter = ahtAddFilterItem("Excel Files (*.xlsx)", "*.xlsx")

strSaveFileName = ahtCommonFileOpenSave( _
                                openFile:=False, _
                                Filter:=strFilter, _
                Flags:=ahtOFN_OVERWRITEPROMPT Or ahtOFN_READONLY)

DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel12Xml, queryName, strSaveFileName

End Function 
```

调试指向这一行：

```
DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel12Xml, queryName, strSaveFileName 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T23:35:06.717

我发现此代码适用于 MS Access 64：

```
Function GetFile(strStartIn As String, strFilter As String) As String
Dim f As Object

   Set f = Application.FileDialog(3)
   f.AllowMultiSelect = False
   f.InitialFileName = strStartIn & strFilter
   f.Show

   GetFile = f.SelectedItems(1)
End Function 
```

它不像 Ken Getz 的代码那样简洁，但应该适合选择要保存或打开的文件。您可以参考 Microsoft Office 库来使用内置常量，例如：

```
msoFileDialogOpen (1) 
msoFileDialogSaveAs (2)
msoFileDialogFilePicker (3) 
msoFileDialogFolderPicker (4) 
```

（[http://msdn.microsoft.com/en-us/library/office/aa190813(v=office.10).aspx#ofobjFileDialogFilters](http://msdn.microsoft.com/en-us/library/office/aa190813(v=office.10).aspx#ofobjFileDialogFilters)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-20T05:13:21.490

另一种适用于我的应用程序的替代方法是检查 VBA 的版本：

```
#if Vba7 then 
'  Code is running in the new VBA7 editor 
     #if Win64 then 
     '  Code is running in 64-bit version of Microsoft Office 
     #else 
     '  Code is running in 32-bit version of Microsoft Office 
     #end if 
#else 
' Code is running in VBA version 6 or earlier 
#end if 

#If Vba7 Then 
Declare PtrSafe Sub... 
#Else 
Declare Sub... 
#EndIf 
```

[http://msdn.microsoft.com/en-us/library/office/gg264421.aspx](http://msdn.microsoft.com/en-us/library/office/gg264421.aspx)

# php - 将 Json 转换为数组变量（对象）

> ID：12574304
> 
> 赞同：0
> 
> 时间：2012-09-24T23:25:39.037
> 
> 标签：php, arrays, json

我正在尝试将 json 转换为变量而不使用`json_decode`.

例如：

```
$json = '{
    "username": "username",
    "password": "pass",
    "movies": [
        {
            "a": "xx",
            "b": "xx",
            "c": "xx",
            "d": 1,
            "e": 2
        }
    ]
}'; 
```

我试图将其转换为数组：

```
 $post = array(
           'username' => 'username',
           'passsword' => 'pass',
           'movies' => (object) array(
             'a' => 'xx',
             'b' => 'xx',
             "c" => 1,
             "d" => 2
           )
    );
echo json_encode($post); 
```

如您所见，它与`movies`块不匹配。电影是一个对象。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T23:29:26.187

'movies' 是一个对象数组：

```
$post = array(
    'username' => 'username',
    'passsword' => 'pass',
    'movies' => array(
        (object) array(
            'a' => 'xx',
            'b' => 'xx',
            'c' => 1,
            'd' => 2.
        )
    )
); 
```

但是你为什么不想使用 json_decode() 呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T23:37:00.860

据我了解，您正在接收一个对象。因此，让我们将其转换为 json，然后将该 json 对象转换为关联数组。

```
$var = json_encode($post['movies'],true);
print_r(json_decode($var,true)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T23:28:47.380

撇开你到底为什么不使用你应该使用的功能不谈......

`movies`是一个对象数组，而对象实际上只是关联数组。所以它应该更像：

```
'movies' => Array(
    Array(
        "a" => "xx",
        "b" => "xx",
       ...
    )
), 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T23:28:47.817

应该`'movies' => array((object) array(` 不是 `'movies' => (object) array(`

例子

```
echo "<pre>";
 $post = array(
           'username' => 'username',
           'passsword' => 'pass',
           'movies' => array((object) array(
             'a' => 'xx',
             'b' => 'xx',
             "c" => 1,
             "d" => 2
           ))
    );
echo json_encode($post) 
```

# google-chrome - Chrome 插件 - 权限 chrome-devtools://*/* 未知或 URL 模式格式错误

> ID：12574305
> 
> 赞同：6
> 
> 时间：2012-09-24T23:25:39.830
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-devtools

我正在为 google chrome 维护一个扩展程序，我收到来自随机用户的投诉，说它刚刚停止工作。

“扩展”部分中的错误消息是这样的：

```
Chrome plugin - Permission chrome-devtools://*/* is unknown or URL pattern is malformed 
```

似乎这不是一个非常受欢迎的问题 - 我无法找到任何痕迹。我的清单文件的权限部分如下所示：

```
 "permissions": [
       "tabs", "http://*/*", "https://*/*", "chrome-devtools://*/*"
    ] 
```

它适用于大多数人

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:28:45.197

如果您查看[文档](http://developer.chrome.com/extensions/match_patterns.html)，您会发现只有有效的方案是：`'*' | 'http' | 'https' | 'file' | 'ftp' | 'chrome-extension'`. 我猜你最近的问题是由于[这个问题](http://code.google.com/p/chromium/issues/detail?id=87815)得到修复。

# python - Google Drive SDK 快速入门示例上的“ImportError: cannot import name util”错误

> ID：12574307
> 
> 赞同：6
> 
> 时间：2012-09-24T23:26:35.380
> 
> 标签：python, google-drive-api, google-api-python-client

[尝试 Google Drive SDK 快速入门示例 ( https://developers.google.com/drive/quickstart](https://developers.google.com/drive/quickstart) )时，我收到以下错误消息。

```
Traceback (most recent call last):
  File "quickstart.py", line 6, in <module>
    from apiclient.discovery import build
  File "build/bdist.macosx-10.6-intel/egg/apiclient/discovery.py", line 45, in <module>
  File "build/bdist.macosx-10.6-intel/egg/apiclient/errors.py", line 26, in <module>
ImportError: cannot import name util 
```

如教程中所述，首先在我的 Mac 终端上：

```
easy_install --upgrade google-api-python-client 
```

我正在使用 Mac OS 10.7.4 python 2.7.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-09T05:33:34.340

我建议使用`pip`而不是`easy_install`. 根据[this answer](https://stackoverflow.com/a/40955055/305689) to a similar question，客户端库和`oauth2client`库可能不兼容。最好同时升级`pip install -U google-api-python-client`（或`pip3`Python 3）。

在您开始使用快速入门后，如果您想查看稍长一点、更多使用 Drive API 的“真实世界”示例，以下是我为您制作的一些视频和博客文章：

*   [在 Google 云端硬盘中列出您的文件](http://youtu.be/Z5G0luBohCg?list=PLOU2XLYxmsILOIxBRPPhgYbuSslr50KVq&index=4)并编写代码深入研究[帖子](http://wescpy.blogspot.com/2014/11/authorized-google-api-access-from-python.html)
*   [Google 云端硬盘：上传和下载文件](http://googledevelopers.blogspot.com/2016/01/google-drive-uploading-downloading.html)以及“穷人的纯文本到 PDF 转换器”代码深入研究[帖子](http://wescpy.blogspot.com/2015/12/google-drive-uploading-downloading.html)(*)
*   仅将 Google 表格导出为 CSV 博客[文章](http://wescpy.blogspot.com/2016/07/exporting-google-sheet--as-csv.html)

(*) - TL;DR：将纯文本文件上传到云端硬盘，导入/转换为 Google Docs 格式，然后将该 Doc 导出为 PDF。上面的帖子使用 Drive API v2；[这篇后续帖子](http://wescpy.blogspot.com/2015/12/migrating-to-new-google-drive-api-v3.html)描述了将其迁移到 Drive API v3，这是一个结合了“穷人转换器”帖子的[开发者视频。](http://googledevelopers.blogspot.com/2016/01/google-drive-uploading-downloading.html)

# objective-c - ASIHTTPRequest 跟踪下载进度不起作用

> ID：12574312
> 
> 赞同：0
> 
> 时间：2012-09-24T23:27:30.267
> 
> 标签：objective-c, ios, xcode, asihttprequest

我正在使用 ASIHTTPRequest 来跟踪下载，但它似乎不起作用。

我正在使用中显示的代码：[如何使用 ASIHTTPRequest 跟踪上传/下载进度](https://stackoverflow.com/questions/4602812/how-to-using-asihttprequest-to-tracking-upload-download-progress)，但 Xcode 错误提示`maxValue cannot be found`。

然后我尝试了：

```
UIProgressView * myProgressIndicator;
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request setDownloadProgressDelegate:myProgressIndicator];
[request startSynchronous];
NSLog(@"Value: %f", [myProgressIndicator progress]; 
```

这也失败了。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T05:44:01.537

您所指的 ASIHttpRequest 网站上的示例代码适用于 Mac 应用程序，而不是 iOS 应用程序。在示例代码中，委托对象是 的实例`NSProgressIndicator`，但该类在 iOS 中不可用。相反，在 iOS 中使用 ASIHttpRequest 时，委托对象应该是一个`UIProgressView`实例。

UIProgressView 没有 maxValue 或 doubleValue 属性。UIProgressView 有一个`progress`属性，它是一个浮点数，可以取 0.0（0% 完成）和 1.0（100% 完成）之间的值。

[您可以在此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIProgressView_Class/Reference/Reference.html)了解有关该`UIProgressView`课程的更多信息。

# forms - JSF/Primefaces：如何以编程方式触发此表单提交（需要绕过提交，直到事情验证）

> ID：12574314
> 
> 赞同：1
> 
> 时间：2012-09-24T23:27:46.827
> 
> 标签：forms, validation, jsf, primefaces

我要做的是**在表单提交之前**验证特定字段。

这些字段已经获得模糊验证，如果您在所有字段中进行**选项卡**，这将非常有用，因为当您退出时，您会触发该字段的模糊事件。当您没有跳出最后一个字段时，问题就出现了，例如，您将鼠标移至“保存”按钮。当您单击“保存”按钮时，您正在模糊/验证该字段，但您也在提交表单。 **我需要在提交之前进行验证**。

该表单与常规表单略有不同，因为它涉及内联编辑。它位于向导类型流程的确认页面上，用户可以在其中提交之前输入的信息或在提交之前对其进行编辑（无需返回之前的步骤）。这是一个屏幕截图，希望能说明这一点， http: [//i.imgur.com/7SCEg.jpg](http://i.imgur.com/7SCEg.jpg)

这是一个示例输入：

```
<h:outputLabel for="registrationReEnterNewPassword2" value="Confirm new password" />
<p:password
    forceId="true" autocomplete="off" id="registrationReEnterNewPassword2" 
    value="#{backingBean.user.newPasswordAgain}" maxlength="15" size="26"
    valueChangeListener="#{backingBean.passwordValueChangeListener}" 
    tabindex="5" styleClass="inputText"
    binding="#{backingBean.passwordUI}">    
    <f:attribute name="currentPassword" value="#{registrationExistingPassword2.value}" />                           
    <f:attribute name="newPassword" value="#{registrationNewPassword2.value}" />
    <f:validator validatorId="ConfirmPasswordValidator"/>
    <f:ajax event="blur"
        execute="registrationNewPassword2 registrationReEnterNewPassword2"
        render="message_passwordB1 message_passwordB2" />
</p:password>
<p:message id="message_passwordB2" styleClass="errorMessage" for="registrationReEnterNewPassword2"/> 
```

这是表单这一部分的“保存”按钮：

```
<p:commandButton
    value="Save" 
    type="submit"
    styleClass="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only a4jhover"
    onclick="waitingModal();"
    oncomplete="closeWaitingModal(); closeEditPane();"
    onerror="closeWaitingModal();"
    rendered="#{Context.User.registered}"
    action="#{backingBean.submit}"
    update=":messagesForm:messageContent:messages">
</p:commandButton> 
```

有谁知道单击该部分的“保存”按钮时如何触发每个表单“部分”的验证？

# c++ - 指向常量指针常量数组的常量指针

> ID：12574315
> 
> 赞同：2
> 
> 时间：2012-09-24T23:28:08.000
> 
> 标签：c++, constants

我们正在学习`const`面向对象的 c++ 类中的关键字。我们的教授说他故意过分帮助我们学习使用`const`关键字的所有可能方法。

在我们的任务中，他说：

> 您的构造函数参数应该是指向常量指针常量数组的常量指针

有人可以向我展示这个参数列表的示例，并解释每个 const 的作用吗？我相信原型应该是这样的：

```
Square(const char* const []); 
```

*   其中第一个是指针（在本例中为 char*）
*   第二个 const 用于数组
*   但后来我不知道我会把第三个 const 放在哪里

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T23:41:01.163

让我们来看看：

1.  指针数组：`void * array[10];`

2.  常量指针数组，与“常量数组”相同：`void * const array[10]`。

3.  指向上述内容的指针：`void * const (*pa)[10] = &array;`

4.  指向 (2)的*常量指针：*`void * const (* const pa)[10] = &array;`

5.  上面的一个版本，其中原始数组由指向 const 的指针组成：

    ```
    void const * array2[15];

    void const * const (* const pa)[15] = &array2; 
    ```

因此，对于任何基础类型和数组大小，这是您的构造函数签名：

```
struct Foo
{
    template <typename T, unsigned int N>
    Foo(T const * const (* const pa)[N]);

    // ...
}; 
```

至于它有什么用处：几乎没有。但理解这一点并没有什么坏处。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-24T23:47:18.770

用 C++ 而不是 C 编写时，它更容易阅读。

```
const std::array<const T, N>* const 
```

# uiwebview - iOS 6 UIWebView 委托方法

> ID：12574325
> 
> 赞同：2
> 
> 时间：2012-09-24T23:29:00.033
> 
> 标签：uiwebview, ios6, uiwebviewdelegate

我有一个 UIWebView 加载托管在远程服务器上的页面。在文档准备就绪时，它会向服务器触发异步 jQuery.ajax 请求，以使用从服务器返回的值列表填充下拉列表。

在加载页面并执行此请求时，我有一个半透明的 UIView 和一个覆盖 UIWebView 的 UIActivityIndi​​cator。我已经实现了移除加载视图的 webViewDidFinishLoad 委托方法。

*   在 iOS 4/5 中，此委托方法在异步请求完成后执行。这是我想要的行为。
*   在 iOS 6 中，此委托方法在异步请求完成之前执行，并且加载视图过早消失。

有谁知道这是不是故意的。任何想法如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:40:36.830

我得出的结论是，这是一个有意的改变。从本质上讲，从 iOS 6 开始，webkit 异步绘制其内容：

[http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html#//apple_ref/doc/uid/TP40012166-CH1-SW13](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html#//apple_ref/doc/uid/TP40012166-CH1-SW13)

因此，文档加载的异步请求将是真正异步的。UIWebView 的委托将在执行此请求时收到文档已完全加载的通知。在 iOS 6 之前，此通知将在异步请求完成后执行。所以请求并不是真正的异步。

弗格尔。

# php - EXT JS - 使用 PHP 将目录树结构转换为 JSON 对象

> ID：12574333
> 
> 赞同：0
> 
> 时间：2012-09-24T23:29:48.747
> 
> 标签：php, javascript, extjs, nodes

我将 EXT JS 用于一个简单的树，它将显示一个目录及其内容。无论出于何种原因，我已经浏览了他们的所有示例，但无法复制我想要的内容。我想根据目录结构创建一个 JSON 对象，以便可以将其输入到 EXT JS 树中。

这是我打开目录、创建父节点然后尝试创建子节点的脚本。这个目录里面只有 .xml 文件。我已经让它可以打开目录并为文件创建节点，但它不显示父级或根级别并且失去了漂亮的折叠效果。

这是我的代码：

```
if($handler = opendir($dir."/$market_desc"))
          {

          while (($sub = readdir($handler)) !== FALSE)
          {
              if ($sub !== "." && $sub !== ".." && $sub !== ".svn")
              {
                  if(is_file($dir."/$market_desc/".$sub))
                  {
                      $subDir[] = array(
                       'text' => $sub,
                       'id'   => $sub,
                       'checked' => false,
                       'leaf' => true,
                       'cls'  => 'file'
                           );
                  }
              }

          }

           $listDir[] = array(
           'text' => $market_desc,
           'id'   => $market_desc,
           'checked' => false,
           'cls'  => 'folder',
           'children' => array($subDir)
        );

          closedir($handler);
          unset($handler); 
```

目录结构只有 1 级深，一些文件位于根级别，然后是许多目录，这些目录也包含文件，但不会超过 1 级。

我是一名 php 后端开发人员，所以对于 javascript 和 EXT 所需的 JSON 的正确格式，我为我的菜鸟道歉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:49:13.027

经过反复试验，我得到了正确格式的 EXT JS 的 PHP 脚本。它将打开目录并构建嵌套数组，该数组可以进行 json_encoded 并发送到 EXT JS Tree 进行渲染

```
 // Get market specific features and make nodes
      if($handler = opendir($dir."/$market_desc"))
      {
          while (($sub = readdir($handler)) !== FALSE)
          {
              if ($sub !== "." && $sub !== ".." && $sub !== ".svn")
              {
                  if(is_file($dir."/$market_desc/".$sub))
                  {
                                $subDir[] = array(
                                'text' => $sub,
                                'id'   => $sub,
                                'checked' => false,
                                'leaf' => true,
                                'parent' => $market_desc,
                                'children' => NULL,
                                'cls'  => 'file'
                                );
                  }

              }

          }
                          $listDir[] = array(
                          'text' => $market_desc,
                          'id'   => $market_desc,
                          'checked' => false,
                          'cls'  => 'folder',
                          'parent' => NULL,
                          'expanded' => true,
                          'children' => $subDir
                              );

          closedir($handler);
          unset($handler);
      } 
```

# c++ - C++ 指针对象函子

> ID：12574336
> 
> 赞同：1
> 
> 时间：2012-09-24T23:30:05.043
> 
> 标签：c++, operators, functor

我对为什么 C++ 不允许您在指针上使用仿函数感到困惑。例如，如果我的班级是这样的：

```
class Character{

    public:
        Character();
        ~Character();
        void operator()() {cout << "HELLO WORLD" << endl;}//this is the functor operator

}; 
```

当我做这样的事情时，我收到一个错误，说我不能将字符调用为函数......

```
Character * character = new Character();

    character();

    delete character; 
```

但这很好用：

```
Character character;
character(); 
```

在第一种情况下，我将如何访问该运算符？甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T23:31:38.393

是的，取消引用指针：

```
(*character)(); 
```

或者更详细地说：

```
character->operator()(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T23:31:21.343

您需要通过指针执行间接以使用指向的对象：

```
(*character)() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T23:32:50.927

这是一个指针，这就是为什么：

~~`character->();`或者~~ `(*character)()`是你的朋友。

# erlang - 分布式 Erlang 和 riak-core：大型集群的网格如何扩展？

> ID：12574338
> 
> 赞同：4
> 
> 时间：2012-09-24T23:30:16.350
> 
> 标签：erlang, distributed, riak

使用分布式 Erlang 在所有节点之间创建了一个网状网络，并且不能很好地扩展到数百个节点。riak-core 如何处理这个问题？

它不使用分布式 Erlang（设置 -connect_all=false 并使用自定义协议在 riak 节点之间进行通信）吗？粗略地看一下代码，他们似乎并没有这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T00:51:31.207

我相信他们建议将集群限制为 100 个节点，但我现在找不到参考。

在超过 100 个节点的集群中，ping 噪声将是网络流量的重要组成部分。更大的部署需要对 Erlang 虚拟机和操作系统进行深度更改。

以下是他们 wiki 中集群容量规划的链接：[http ://wiki.basho.com/Cluster-Capacity-Planning.html](http://wiki.basho.com/Cluster-Capacity-Planning.html)

# c# - 集合调试可视化工具

> ID：12574339
> 
> 赞同：0
> 
> 时间：2012-09-24T23:30:17.450
> 
> 标签：c#, .net, visual-studio-2010, windows-phone-7, silverlight-4.0

在调试 WP7 应用程序时，如何查看通用字典集合的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:36:29.533

Press **F9** on the line where you access the dictionary, and then hover it with a mouse after your app stops on the breakpoint.

[Here](http://www.dotnetperls.com/debugging) you can find some pics.

Hope I understood your question.

# c++ - 标记“=”在预处理器表达式中无效

> ID：12574340
> 
> 赞同：5
> 
> 时间：2012-09-24T23:30:22.130
> 
> 标签：c++, g++, c-preprocessor

我有一个程序：

```
#include <iostream>

#define _DEBUG = 1

using namespace std;
int main() {
        #if (_DEBUG == 1)
                cout << "hello : " <<endl;
        #endif

        return 0;
} 
```

编译它会给出错误：

```
$ g++ a.cpp
a.cpp:7:7: error: token "=" is not valid in preprocessor expressions
$ g++ --version
g++ (MacPorts gcc46 4.6.3_8) 4.6.3 
```

我以为`==`是相等条件运算符？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T23:33:07.460

只是一个错字，我认为：

```
#define _DEBUG = 1 
```

应该

```
#define _DEBUG 1 
```

我一直这样做！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-24T23:33:29.390

```
#define _DEBUG = 1 
```

这声明`_DEBUG`为扩展为的宏`= 1`，因此当它在条件表达式中扩展时，您会得到

```
#if (= 1 == 1) 
```

这显然不是一个有效的条件表达式。您需要`=`从宏定义中删除：

```
#define _DEBUG 1 
```

此外，对于像这样的“标记”宏，通常最好测试宏是否被定义，而不是宏的值是什么。例如，

```
#ifdef _DEBUG 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T23:38:21.817

它应该是

```
#define textToBeReplaced ReplacementText 
```

编译器将遍历您的所有代码并将 textToBeReplaced 的所有实例替换为 replacementText。

在你的情况下，它会是

```
#define _debug 1 
```

另请注意，您的

```
 #if(_debug==1) 
```

~~应该~~ 可以

```
 #ifdef _debug 
```

请注意 1 在这里是如何发挥作用的？这意味着你实际上可以做

```
 #define _debug 
```

并且不将其设置为任何内容

# c# - 为什么在这个 CLOB 字段的 GetOrdinal 函数中出现 OutOfRange 异常？

> ID：12574341
> 
> 赞同：2
> 
> 时间：2012-09-24T23:30:33.863
> 
> 标签：c#, oracle, select, clob

这是我的代码示例。FUNCTION_SCRIPT 字段是我的表 IS_FUNCTION 中的一个 CLOB 字段（唯一的 CLOB 字段）

```
public void ReadFunction(string FName, out string fContent) {
    OracleCommand command = _connection.CreateCommand();
    OracleTransaction transaction = _connection.BeginTransaction();
    command.Transaction = transaction;
    command.CommandText = "SELECT TO_CLOB(TO_NCLOB(FUNCTION_SCRIPT)) FROM IS_FUNCTION where FNAME=:fName ";
    command.Parameters.Add("FName", OracleType.NVarChar).Value = FName;
    OracleDataReader odr = command.ExecuteReader();
    int temp = odr.GetOrdinal("FUNCTION_SCRIPT");
    OracleLob myLob = odr.GetOracleLob(temp);
    fContent = (String)myLob.Value;
    odr.close();
} 
```

`temp = odr.GetOrdinal("FUNCTION_SCRIPT")`执行语句时出现超出范围的异常。不知道为什么？我已经尝试阅读这个 CLOB 字段几个小时了。这是我最近的一次。您的帮助将不胜感激。

ps 会不会是我的 SELECT 语句有问题？我一直在从不同的参考资料中获取代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:25:44.980

感谢所有的建议和帮助。我发现我的问题通过添加一个

```
 if(odr.Read())
            {
                int temp = odr.GetOrdinal("FUNCTION_SCRIPT");
                OracleLob myLob = odr.GetOracleLob(temp);
                fContent = (String)myLob.Value;
            } 
```

换句话说，我在 ExecuteReader() 语句之后缺少语句 odr.Read 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T23:48:12.933

尝试这个

```
command.CommandText = "SELECT TO_CLOB(TO_NCLOB(FUNCTION_SCRIPT)) AS FUNCTION_SCRIPT FROM IS_FUNCTION where FNAME=:fName "; 
```

现在您的查询没有名称，因为您已将函数应用于名称，因此您需要为其命名，例如`AS FUNCTION_SCRIPT`

## 更新

```
OracleDataReader odr = command.ExecuteReader();
if(odr.HasRows)
{
  int temp = odr.GetOrdinal("FUNCTION_SCRIPT");
  OracleLob myLob = odr.GetOracleLob(temp);
  fContent = (String)myLob.Value;
}
else
   throw new Exception("No rows returned from database"); 
```

# android - 在android中使用带有渐变背景的listview时，某些项目具有黑色背景

> ID：12574344
> 
> 赞同：0
> 
> 时间：2012-09-24T23:30:48.237
> 
> 标签：android, android-layout, android-listview, android-theme, android-styles

我正在为列表视图中的选定项目设置背景颜色，如下所示；

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

        if (position == containerFragment.vList.getCheckedItemPosition()) {
        convertView.setBackgroundResource(R.color.listview_selected_background);
        } 
        else {
            convertView.setBackgroundResource(R.color.listview_default_background);
        }
        return convertView;
} 
```

颜色定义是这样的；

```
<color name="listview_default_background">#00000000</color>
<color name="listview_selected_background">#333333</color> 
```

如果我不使用渐变，一切正常，但是当我使用“android:windowBackground”渐变时；一些项目得到黑色背景。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-30T14:39:44.863

如果你想解决这个问题，那么使用*cacheColorHint*属性和*@android:color/transparent*值和 ListView 标签。

**完整代码**

```
<ListView
android:layout_width="match_parent"
android:layout_height="match_parent"
android:cacheColorHint="@android:color/transparent" /> 
```

# ruby-on-rails - 将用户（设计）连接到他们的个人资料

> ID：12574346
> 
> 赞同：0
> 
> 时间：2012-09-24T23:30:59.697
> 
> 标签：ruby-on-rails, ruby, devise, profile

我正在使用设计并试图允许每个用户创建 1 个配置文件。我可以将新注册的用户发送到他们可以创建个人资料的页面，但是一旦用户注销并重新登录，它将不会进入个人资料显示页面。

换句话说-

我可以注册一个新用户并将用户发送到创建配置文件页面，然后我可以使用新用户创建一个配置文件（我不确定配置文件是否正确保存）......在我注销并登录后，我收到了错误：

```
ActiveRecord::RecordNotFound in ProfilesController#show

Couldn't find Profile without an ID 
```

我希望将用户发送到他们的个人资料显示页面...

对这个问题有什么想法吗？

代码（按文件排序）如下……</p>

**用户.rb**

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me

 has_one :profile
end 
```

* * *

**配置文件.rb**

```
class Profile < ActiveRecord::Base
 attr_accessible :first_name, :last_name

 belongs_to :user

end 
```

* * *

**profile_controller.rb**

```
class ProfilesController < ApplicationController
 # GET /profiles
 # GET /profiles.json
def index
 @profiles = Profile.all

respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @profiles }
 end
end

# GET /profiles/1
# GET /profiles/1.json
def show
 @profile = Profile.find(params[:id])

 respond_to do |format|
  format.html # show.html.erb
  format.json { render json: @profile }
 end
end

# GET /profiles/new
# GET /profiles/new.json
def new
 @profile = Profile.new

 respond_to do |format|
  format.html # new.html.erb
  format.json { render json: @profile }
 end
end

# GET /profiles/1/edit
def edit
 @profile = Profile.find(params[:id])
end

# POST /profiles
# POST /profiles.json
def create
  @profile = Profile.new(params[:profile])

respond_to do |format|
  if @profile.save
    format.html { redirect_to @profile, notice: 'Profile was successfully created.' }
    format.json { render json: @profile, status: :created, location: @profile }
  else
    format.html { render action: "new" }
    format.json { render json: @profile.errors, status: :unprocessable_entity }
  end
 end
end

# PUT /profiles/1
# PUT /profiles/1.json
def update
 @profile = Profile.find(params[:id])

 respond_to do |format|
   if @profile.update_attributes(params[:profile])
     format.html { redirect_to @profile, notice: 'Profile was successfully updated.' }
     format.json { head :no_content }
   else
     format.html { render action: "edit" }
     format.json { render json: @profile.errors, status: :unprocessable_entity }
   end
 end
end

# DELETE /profiles/1
# DELETE /profiles/1.json
def destroy
  @profile = Profile.find(params[:id])
  @profile.destroy

  respond_to do |format|
    format.html { redirect_to profiles_url }
    format.json { head :no_content }
  end
 end
end 
```

* * *

**注册控制器.rb**

```
class RegistrationsController < Devise::RegistrationsController
  protected

  def after_sign_up_path_for(resource)
    request.env['omniauth.origin'] || stored_location_for(resource) || new_profile_path
  end
end 
```

* * *

**application_controller.rb**

```
class ApplicationController < ActionController::Base
  def after_sign_in_path_for(resource)
    request.env['omniauth.origin'] || stored_location_for(resource) || show_path(resource.profile)
  end
end 
```

* * *

**路线.rb**

```
BaseApp::Application.routes.draw do
  resources :profiles

  get "users/show"

  devise_for :users, :controllers => { :registrations => "registrations" }
  resources :users

  match '/show', to: 'profiles#show'

  match '/signup',  to: 'users#new'

  root to: 'static_pages#home'

  match '/', to: 'static_pages#home'

  …
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:14:18.483

在您的控制器中，您使用以下代码`@profile = Profile.find(params[:id])`。登录时`params[:id]`必须为零。

创建后重定向时它不是 nil ，因为您在这里发送了一个 id `redirect_to @profile`。这转化为`redirect_to profile_path(@profile)`. 当您使用 /match 路径时，没有 id。

因此，一种解决方案是`current_user`在 ProfileController 的显示操作中使用帮助程序。替换`@profile = Profile.find(params[:id])`为`@profile = current_user.profile`。这可能会改变您想要的功能，因为它需要用户登录。这将保留数学路径（/show url）。它之所以有效，是因为它不再依赖于 id。

您也可以将 更改`show_path(resource.profile)`为`profile_path(resource.profile)`。这将使用带有 URL /profiles/:id 的资源配置文件路径，而不是您可能正在寻找的 show/。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T14:18:49.840

通过@Phil 提供的答案，我解决了项目中的另一个问题。谢谢\o/

*   ruby 2.0.0p247（2013-06-27 修订版 41674）[x86_64-linux]
*   导轨 4.0.0

而你的情况，我是这样解决的：

在用户和配置文件模型中添加 inverse_of:

**用户.rb**

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :confirmable, :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
       :recoverable, :rememberable, :trackable, :validatable

  has_one :profile, inverse_of: :user
end 
```

**配置文件.rb**

```
class Profile < ActiveRecord::Base
  belongs_to :user, inverse_of: :profile
  validates :first_name, :user_id, :presence => true
  validates :gender, :inclusion => {:in => %w(M F)}

end 
```

在你的**application_controller.rb**

```
class ApplicationController < ActionController::Base
  # Prevent CSRF attacks by raising an exception.
  # For APIs, you may want to use :null_session instead.
  protect_from_forgery with: :exception

  # redirect user after login
  def after_sign_in_path_for(resource)
    unless current_user.profile.nil?
      profiles_path 
    else
      flash[:alert] = "Please complete your profile"
      new_profile_path
    end
  end

  # redirect after logout
  def after_sign_out_path_for(resource_or_scope)
    new_user_session_path
  end

end 
```

这对我有用，我希望这有帮助

# .htaccess - 在 htaccess:/a/*/id/uniqueid 中是否可以使用此模式的规范 URL？

> ID：12574347
> 
> 赞同：4
> 
> 时间：2012-09-24T23:31:01.593
> 
> 标签：.htaccess, url, seo, duplicates, canonical-link

一个大问题是我不是程序员……！所以我需要用我自己能力范围内的方法来解决这个问题……我很乐意得到帮助！

我在 Google 索引中有很多重复的 URL 有问题，并且有强烈的迹象表明它会导致 SEO 问题。

我在网站本身上没有重复的链接，但是因为它曾经设置过，对于某些页面，系统允许 URL 中的各种变化。只要有特定的article-id，相同的内容就会在无数个URL下呈现。

我猜谷歌索引中的重复项长期以来一直在增长，这是由于链接到我的其他站点的链接出错。问题是系统已经接受了这些变化。

以下是 Google 索引中存在的变体示例：

*   site.com/a/Cow_Cat/id/5272
*   site.com/a/cow_cat/id/5272
*   site.com/a/cow…cat/id/5272
*   site.com/a/cowcat/id/5272
*   site.com/a/bird/id/5272

第一个混合大小写的 URL 是全站点使用的 URL，现在我必须忍受它，更改所有小写字母需要很长时间。我无法通过 htaccess 进行手动操作，因为它总共有 300.000 篇文章。我相信有 10 的数千个有一个或多个重复项。

我的问题是这样的：

是否可以在 htaccess 中为规范 URL 创建规则，以便将上述 URL 作为一个以及 300.000 的其余部分处理？

我即，有没有办法说所有的网址都有

/a/*/id/唯一标识

应该被视为 one = 仅基于唯一 ID，而不考虑用“*”表示的文本？

我希望可以说像上面这样的某种模式应该只通过最后一个独特的部分来区分。

如果在htaccess中不可能，如何在每个页面上使用链接rel =“canonical”来完成，代码可以包含通配符吗？

我应该补充一点，大多数重复是由于站点本身使用混合的传入链接是小写的。尽管网站本身基本上总是混合使用小写/大写，但仅使用小写分配规范 URL 是否可以？

如果这是可能的，我会很高兴得到如何做的帮助！！！！

乔纳斯

* * *

嗨迈克尔！我不是专家，但我认为可以这样做：

1) 我的问题是 URL 大小写不一，我现在无法更改。

2) 如果搜索引擎没问题，我可以让规范 URL 与实际 URL 相同，不同之处在于它都是小写的，这样可以解决大约 90% 的重复。这将是使用的 URL：site.com/a/Cow_Cat/id/5272，这将是规范的：site.com/a/cow_cat/id/5272。据我了解，这将是一个很好的搜索引擎优化......或......？

我的想法不是更改地址浏览器地址栏（即使用 301 重定向），而只是告诉搜索引擎哪些 URL 是重复的，据我所知，这可以通过在 htaccess 中定义规范 URL 来完成（作为一种模式- 我希望）或作为每个页面上的标签。

3）如果，可以找到通配符解决方案...我不确定这是否可能，但这意味着可以不分配特定的规范 URL，而是分配“组模式”，即“请搜索引擎，查看所有具有此模式的 URL - 最后具有唯一标识符 - 就好像它们是同一个 URL，你 SE，决定你喜欢哪个”：/a/*/id/uniqueid

那行得通吗？如果可以将规范 URL 定义为一个组，其中该组被定义为具有定义部分作为唯一 id 的模式，则它只会在 htaccess 中工作。

是否可以在为每个页面添加标签时说“所有包含此唯一 ID 的 URL 都应被同等对待”？如果那行得通，它看起来会类似于这个

链接 rel="canonical" /a/*/id/5272

我不知道这种带有通配符的语法是否存在，但它会很好:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:18:31.457

我的建议是[使用 301 重定向](http://www.mattcutts.com/blog/rel-canonical-html-head/)和 URL 重写。请您的网站管理员将其放置在您的 apache 配置或虚拟主机配置中：

```
RewriteMap  lc int:tolower 
```

然后在您的 .htaccess 文件中，您可以使用映射`${lc:$1}`将匹配项转换为小写。在这里，该`$1`部分是一个匹配项（来自 RewriteRule 中正则表达式中括号的反向引用），该`${lc: }`部分就是您如何应用之前设置的 lc（小写）函数。以下是您可能希望在 .htaccess 文件中包含的内容的示例：

```
RewriteCond %{REQUEST_URI} [A-Z]      #this matches a url with any uppercase characters
RewriteRule (.*) /${lc:$1} [L,R=301]  #this makes it lowercase 
```

至于匹配 ID，假设您的示例意味着“始终以 ID 结尾”，您可以使用如下正则表达式：

```
^(.+/)(\d+))$ 
```

第一个匹配项（括号）获取所有内容，包括 ID 之前的正斜杠，第二部分获取 ID。然后我们可以使用它来指向一个单一的、特定的 URL（如规范，但带有 301）。

如果您只是想使用规范标签，那么您将不得不说出您在代码方面使用的内容，但我在 PHP 中使用的一个示例（例如，为了不向数百个单独的页面添加标签）将是：

```
 if ($_SERVER["REDIRECT_URL"] != "") {
    $canonicalUrl = $_SERVER["SERVER_NAME"] . $_SERVER["REDIRECT_URL"];
  } else if ($_SERVER["REQUEST_URI"] != "") {
    $canonicalUrl = $_SERVER["SERVER_NAME"] . preg_replace('/^([^?]+)\?.*$/', "$1", $_SERVER['REQUEST_URI']);
  } 
```

在这里，如果可用，则使用重定向 URL，如果不可用，则使用请求 uri。此代码剥离查询字符串（[http://www.mysite.com/a/blah/12345/?something=true中](http://www.mysite.com/a/blah/12345/)**的**粗体位）。当然，您可以通过使用正则表达式来添加到此代码以指定自定义路径，而不仅仅是取消查询字符串。

# c++ - 在 C/C++ 中，如何在虚拟内存空间中获取数据？

> ID：12574351
> 
> 赞同：0
> 
> 时间：2012-09-24T23:31:11.607
> 
> 标签：c++, c, pointers, memory

我正在处理调试信息。我正在尝试编写类似于“调试信息解析器”的方式，我正在使用 DWARF 和 ELF 库来执行此操作，但是除了内存空间的信息之外，它们不提供任何东西，我正在尝试获取该内存空间中的数据. 我迷上了这个程序。我正在使用一个名为 Pin 的工具，所以我实际上是在另一个程序中运行代码。这就是为什么我可以访问它的变量。

假设我有一个指向地址的指针，我想获取存储在该地址中的所有数据以及接下来的 4 个字节（例如）。

例如，假设我有一个地址 0xDEADBEEF，我想从该地址开始遍历接下来的 4 个字节并读取数据（取消引用每个字节上的指针）

我对 C 比较陌生，我想做的是：

```
char * address = "0xDEADBEEF";
unsigned int bytesize = 4;

ptr = (void *) address;
ptr_limit = ptr + bytesize;

for(ptr; ptr < ptr_limit; ptr++)
     cout << ptr; 
```

我知道这可能是完全错误的，并且我遇到了很多编译错误，但这只是为了展示我正在尝试使用的一些逻辑......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T23:38:20.170

OK, C and C++ are low level, but they aren't the *wild west*. You aren't allowed to just make up an address and access it. You aren't allowed to do that in *assembly* on most OSs; this is where SegFaults come from.

The way you get memory is to *allocate* it. This process involves telling the OS that you want a piece of memory of some size. At which point, the OS does its stuff so that you can access a certain range of virtual memory. Attempts to access memory outside of this range (or any range that the OS has allowed you to access) will cause the OS to terminate your program.

In C, you generally use `malloc`/`calloc`/`realloc` to allocate memory and `free` to tell the OS that you're done with it. C++ uses `new` to allocate objects and `delete` to deallocate them.

> I am trying to write kind of like a "debug information parser", I am using DWARF and ELF libraries to do this, but they do not offer anything besides information of the memory space, I am trying to get the data in that memory space

It'd be great if you put things like that in your question.

In any case, you're talking about accessing *someone else's* memory, which is not done. Well, it's not permitted by the rules of standard C and C++. The various OSs have calls that can allow you to map some address space of another processes onto yours. But that's much more complex and OS-specific.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T23:41:05.080

内存地址是整数类型（读取**数字**）。
在您的示例中，您有一个`char *`（读取**字符串**）。

以下代码：

```
char * address = "0xDEADBEEF";
void * ptr     = ( void * )address; 
```

只会将该`char *`变量的地址作为 a`void *`放入`p`.
它不会将指针设置为内存地址`0xDEADBEEF`。

如果你想访问那个特定的内存位置（**假设你知道你在做什么**），你需要类似的东西：

```
void * ptr = ( void * )0xDEADBEEF; 
```

我说“假设你知道你在做什么”，因为访问这样一个特定地址最终会导致段错误，因为你基本上不知道这样一个地址在你的地址空间中，除非你在环 0 中做事（读取内核），例如，使用 DMA。
但是我会假设你知道指针是一个数字，而不是一个字符串......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T23:43:58.447

代码可以很简单：

```
char *address, *limit;

for(address = (char *)0xdeadbeef, limit = address+4; address < limit; address++)
     cout << *address; 
```

但是请注意，虽然*允许*将任意整数转换为地址，但使用结果指针的结果不是（甚至接近于）可移植的。根据您的评论（您通过调试信息获取地址），因此您获得的地址应该是有效的，结果*应该*正常工作（只是不能保证它是可移植的）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T23:46:45.993

将您的地址存储为 DWORD =>`DWORD address = 0xDEADBEEF` 然后将此地址转换为指针 =>`void *ptr = (void *)address`

这是一个例子：

```
char *pointer = "FOO";
DWORD address = (DWORD)pointer;
printf("0x%u\n", address);
printf("%s\n", (char *)address); // prints FOO

address++; //move 1 byte
printf("%s\n", (char *)address); // prints OO 
```

# jquery - 使用 Knockout.js 绑定引导日期范围选择器并解析跨度内容

> ID：12574353
> 
> 赞同：6
> 
> 时间：2012-09-24T23:31:22.270
> 
> 标签：jquery, twitter-bootstrap, knockout.js, datepicker

我是淘汰赛的新手，并试图让一个简单的任务启动并运行。我正在开发一个 MVC4 .NET 应用程序，目的是绑定日期范围选择器以发出更新 Highchart 图形数据的 ajax 请求。我正在使用 Dan Grossman 的以引导程序为主题的日期选择器，到目前为止它非常棒（[https://github.com/dangrossman/bootstrap-daterangepicker](https://github.com/dangrossman/bootstrap-daterangepicker)）。

基本目标是观察这个 jQuery 日期范围选择器更新的跨度，然后使用敲除将此值传递给应用程序的另一部分以进行 ajax 请求。

我已经尝试了所有我可以在网上找到的东西.. valueUpdate：更改跨度以在淘汰赛中使用一些 jQuery 来完成相同的目标，使用订阅函数在使用日期选择器之前和之后查看跨度的值. 显然，这使用了 jQuery .change() 事件处理程序，它只适用于输入、选择和 textareas.. 而不是跨度。

这是我到目前为止所拥有的小提琴：http: [//jsfiddle.net/eyygK/9/](http://jsfiddle.net/eyygK/9/)

感谢任何帮助和输入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T03:09:16.217

当更新新的日期范围时，您只需要`currDateRange`在视图模型中更新您的属性。

```
$('#reportrange').daterangepicker({
    ...,
    function (start, end) {
        var dateRangeText = start.toString('MM/d/yy') + ' - ' + end.toString('MM/d/yy');
        vm.currDateRange(dateRangeText);
    }
}); 
```

所以当你更新你的日期范围时，它会报告给knockout，并且knockout会更新所有使用它的地方，`span`.

现在您可以订阅`currDateRange`, 并从那里进行 Ajax 调用。

```
self.currDateRange = ko.observable("09/24/12 - 09/24/12");
self.currDateRange.subscribe(function(newValue) {
   $.ajax({...});
}); 
```

That way it doesn't matter where the update comes from, knockout will notify everybody.

# android - 为什么不能在不丢失 onClickListener 的情况下将页脚视图删除/添加回 ListView？

> ID：12574354
> 
> 赞同：0
> 
> 时间：2012-09-24T23:31:37.470
> 
> 标签：android, android-layout

为了清楚起见，我重写了这个问题：

我有一个 ListView 和一个 FooterView，页脚内有一个刷新按钮。

我在活动级别保留对所有这些的引用

```
 ListView myListView;
  View     footerView;
  Button   refreshBtn; 
```

在

```
 onCreate(Bundle)
 {
          footerView = inflate footer view etc;
          refreshBtn = footerView.findViewById(R.id.refresh_btn);
          refreshBtn.setOnClickListener(this);
          myListView.addFooter(footerView);
 }

  onClick()
 {
     // refresh clicked.  Don't show FooterView anymore unless its needed again
      myListView.removeView(footerView)  //

 }

 onRefresthResult()
 {
    // looks like we need to try refresh again.  So lets add the refresh footer back in.
    // THIS DOES NOT WORK. CLICKING refreshBtn does NOTHING.
     myListView.addFooter(footerView);
     resetListAdapter();

     // Now refresh button does NOTHING. unless we do THIS below instead.

     // THIS DOES WORK, BUT WHY?
     footerView = inflate footer view.   (Why does this need to be done again. footerView was not null both it and the refreshBtn seemed to have valid values).
     refreshBtn = footerView.findViewById(R.id.refresh_btn);
     refreshBtn.setOnClickListener(this);

     // Note footerView reference was always valid and resetting onClick 
        without reinflating did not work.

 } 
```

我唯一的理论是，当您删除视图时，它会以某种方式被标记，因此必须重新添加页脚视图的新实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-25T17:05:38.240

**嘿，你可以让你的页脚在 onclick 函数中不可见，比如**

```
footerView.setVisibility(View.INVISIBLE); 
```

# php - 斜线的字符串替换功能

> ID：12574360
> 
> 赞同：0
> 
> 时间：2012-09-24T23:32:20.523
> 
> 标签：php

我想替换字符串。我已经使用以下代码来做到这一点。

```
str_replace("\","/",$abc); 
```

但它显示错误。请让我知道该怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T23:37:30.817

我不知道这是否适用于 PHP，但对于大多数语言来说，`\"`它是一个转义字符 - 引号不会结束字符串，它将被视为字符串的一部分。

如果您尝试将所有内容替换`\`为`/`，则代码将如下所示：

```
str_replace("\\", "/", $abc); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T23:33:30.887

您需要[转义反斜杠](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.single)：

```
str_replace("\\","/",$abc); 
```

从文档中：

> 要指定文字反斜杠，请将其加倍 ( `\\`)。

# c# - How to consume/parse an error returned by ASP.NET WebApi?

> ID：12574361
> 
> 赞同：0
> 
> 时间：2012-09-24T23:32:41.233
> 
> 标签：c#, json, asp.net-web-api

According to [this blog post](http://blogs.msdn.com/b/youssefm/archive/2012/06/28/error-handling-in-asp-net-webapi.aspx), I can create an error response in my ApiController, that provides useful information to the client, like this:

```
 throw new HttpResponseException(Request.CreateErrorResponse(HttpStatusCode.NotFound, String.Format("Contact {0} not found.", id))); 
```

... and the client will receive an "object" containing the error details along with the (in this example) 404 status:

```
{
     "Message": "Contact 22 not found.",
     "MessageDetail": "<other info - not always present>"
} 
```

(I don't think that `MessageDetail` is appropriate in this example, and so would probably not be included, but under other circumstances it might be - see the blog post).

Sounds great, but how should my C# client-side application *consume* this on the client side? I made a request, I was expecting a JSON-encoded `Contact` object in response, but instead I got a different type of object.

Because the response code indicated a failure, then I guess I know not to expect the `Contact` object, and to look instead for this error object. But given that not every error will return one of these, and also given that the `MessageDetail` member may or may not be present, how do I go about parsing the response? (Note: in my scenario, it'll be JSON-encoded, and I'm using JSON.NET on the client side).

If the object was of a well-known type, then I could just use `JsonConvert.DeserializeObject<T>()`, but I don't think there's a pre-defined type, and if I create my own class what do I do about the optional `MessageDetail` member?

I'm not very familiar with processing JSON, so this may be obvious to those who are - in which case all advice gratefully received.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:06:00.943

HttpError is deserializable from client side. You can use it to read the data from error response.

# ruby - 在 Ruby 中创建多个对象，然后比较它们

> ID：12574365
> 
> 赞同：1
> 
> 时间：2012-09-24T23:33:05.883
> 
> 标签：ruby, class, object

我的目标是能够为每种茶分配自己的 ID，比较茶之间的价格和重量，并在命令行中完成所有操作。这样做的聪明方法是什么？到目前为止，这是我的代码：

```
class Tea

    def initialize(name, price, shipping, weight)
       @name = name
       @price = price
       @shipping = shipping
       @weight = weight
       get_tea_details
       @total_price = total_price
    end

   def get_tea_details
       puts "Enter name: "
       @name = gets.chomp
       puts "Enter price: "
       @price = gets.chomp.to_f
       puts "Enter shipping cost: "
       @shipping = gets.chomp.to_f
       puts "Enter weight: "
       @weight = gets.chomp.to_i
   end

   def total_price
       @total_price = @price + @shipping
   end

   def price_difference
      price_difference = t1.total_price - t2.total_price
      print "#{price_difference}"
   end

end

puts "Do you want to compare teas?: "
answer = gets.chomp
if answer == "yes"
t1 = Tea.new(@name, @price, @shipping, @weight)
t1 = Tea.new(@name, @price, @shipping, @weight)
end

price_difference 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T23:45:46.403

我不确定你在问什么，但我猜你想知道如何编写一个函数来比较你的 Tea 对象。你可以这样做：

```
class Tea
    attr_accessor :name, :price

    def price_difference(other)
            print (@price - other.price).abs
    end

    def compare(other)
        same = true

        if(@name != other.name)
            puts "They have different names."
            same = false
        end

        if(@price != other.price)
            puts "They have different prices."
            same = false
        end

        if same
            puts "They are exactly the same!"
        end
    end
end

t1 = Tea.new
t2 = Tea.new

t1.compare t2 
"They are exactly the same!" 
```

我还建议从变量中删除“tea_”前缀。这是不必要的，并增加了一点可读性。

# ios - CCSpriteBatchNode 没有被保留？

> ID：12574367
> 
> 赞同：0
> 
> 时间：2012-09-24T23:33:07.937
> 
> 标签：ios, cocos2d-iphone, sprite, exc-bad-access

我有一个使用精灵表的应用程序，它是一个 Cocos2D/UIKit 应用程序。在我的场景的 init 方法中，我这样做：

```
spriteSheet = [CCSpriteBatchNode batchNodeWithFile:@"TheSpriteSheet.pvr.ccz"];
[self addChild:spriteSheet z:1]; 
```

现在当游戏结束时，我这样做：

```
[[[CCDirector sharedDirector] actionManager] removeAllActions];
[self unscheduleAllSelectors]; 
```

这会导致当前仍作为孩子的 CCSprite 保留在那里，所以一旦我完成 UIKit 视图转换到我的另一个`UIViewController`我尝试在我`CCLayer`的类（场景所在的类）中调用一个方法来删除所有的孩子在我`CCSpriteBatchNode`的 中，应用程序与`EXC_BAD_ACCESS`.

现在我必须在此时调用该方法，因为我想在我进行自定义视图转换时实现敌人仍在屏幕上的效果，这样它们就不会在我完成切换视图之前神奇地消失。此外，我不会在任何地方进行 replaceScene 或明确释放我的批处理节点，所以我不知道为什么会发生这种情况。

无论如何，我将如何解决这个问题？

谢谢！

# java - Java JEditorPane 简单的语法高亮？

> ID：12574368
> 
> 赞同：4
> 
> 时间：2012-09-24T23:33:15.033
> 
> 标签：java, jframe, syntax-highlighting

我正在开发一个基本的文本编辑器，我想在 JEditorPane（或任何其他类型的文本区域）中实现一些基本的语法突出显示。我对Java相当陌生，我已经搜索过，但找不到太多关于它的信息。非常非常非常感谢任何帮助！

# objective-c - 更新到 Xcode 4.5，横向无法正常工作，并且没有一个提议的解决方案解决了这个问题

> ID：12574369
> 
> 赞同：0
> 
> 时间：2012-09-24T23:33:22.900
> 
> 标签：objective-c, xcode, ios6

我有一个仅限横向的应用程序，当我运行模拟器时，设备旋转到横向模式，但屏幕正试图以纵向模式显示。

这是我已经尝试过的步骤

我的根视图控制器是一个导航控制器，所以我将它子类化并添加了

```
- (NSUInteger)supportedInterfaceOrientations {

return UIInterfaceOrientationMaskLandscape;

}

- (BOOL)shouldAutorotate {

return YES;
} 
```

我也尝试对单个视图控制器这样做，但没有结果。

这就是我在应用程序委托中所拥有的

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

home = [[Home alloc] initWithNibName:@"Home" bundle:nil];
navController = [[NavControllerSubClass alloc] initWithRootViewController:home];
[self.window setRootViewController:navController];
 //  used to be [self.window addSubview:navController.view];
[self.window makeKeyAndVisible];
return YES;

} 
```

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:03:29.533

我改成`return UIInterfaceOrientationMaskLandscape`，`return UIInterfaceOrientationMaskLandscapeLeft`它工作正常。不知道为什么。

# string - 在 MIPS 中反转 int 字符串

> ID：12574370
> 
> 赞同：0
> 
> 时间：2012-09-24T23:33:26.603
> 
> 标签：string, mips

我试图在给定大小和字符串时反转一串整数。这是我到目前为止所拥有的。我知道我的问题出在循环部分，主要是弄清楚如何让指针指向字符串的后面并将包含的内容移动到它应该去的地方

任何帮助，将不胜感激：

```
 .data

Size: .word 9 # Size is 9

Vals: .word 1, 2, 3, 4, 5, 6, 7, 8, 9 # Vals[9]={1,2,..}

        .text
main:

la $t1, Size # get the address of variable Size
la $t2, Vals # get the address of variable Vals
lw $t3, 0($t1) # fetch the value of Size to register $t3
sra $t4, $t3, 1 # right shift arithematic, now $t4 contains Size/2
sll $t3, $t3, 2 # left shift logic, now $t3 contains Size*4

loop:
lb $t5, 0($t2)
sb $t0, 36($t2)
sb  $t0, ($t5)
addi $t0, $t0, 4
addi $t5, $t5, -4
bne $t5, $t4, end
j loop

end:

la $t0, Vals # get the address of Vals to $t0
la $t1, Size # get the address of Size to $t1
lw $t3, 0($t1) # get Size to $t3
sll $t3, $t3, 2 # left shift logic, now $t3 contains Size*4
add $t1, $t0, $t3 # $t1=Vals+Size*4 => array bound
li $v0, 1       # service 1 is print integer

lab4:
lw $a0, 0($t0)  # load desired value into argument register $a0
syscall         # print the value in $a0
addi $t0, $t0, 4 # increase array index
bne $t0, $t1, lab4 # check if reach array bound 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:07:56.553

该循环中有一些问题：

*   您正在读取字节而不是单词（使用`lw`/`sw`而不是`lb`/`sb`
*   您正在将内容与地址混合（使用寄存器 $t5）
*   您正在向读取的内容添加/减去 4，而不是指向数组的指针
*   您尝试反转数组的方式似乎是错误的，因为添加 36 (=9x4) 将指向数组末尾之后的位置

你应该做的是使用 2 个指针：一个开始指向数组的开头，另一个开始指向数组的结尾，然后读取这两个项目并交换其内容。现在移动每个指针中的下一个元素（一个指针向前移动，另一个指针向后移动），并重复该过程直到处理完所有项目（即，当两个指针交叉时）。

例如（剪断）：

```
addu $t7, $t2, $t3 # $t5 contains address of end of string

loop:
  addi $t7, $t7, -4 # moves pointer backwards
  lw $t5, 0($t2)
  lw $t0, 0($t7)
  sw $t5, ($t7)    # interchange
  sw  $t0, ($t2)   # contents
  addi $t2, $t2, 4 # moves pointer forward
  ble $t2, $t7, loop 
```

# objective-c - 如何将视图控制器的背景颜色从灰色更改为设置颜色？

> ID：12574373
> 
> 赞同：0
> 
> 时间：2012-09-24T23:33:53.477
> 
> 标签：objective-c, xcode

我正在尝试更改视图控制器的颜色。

有人让我知道，如下所示。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.view.backgroundColor = [UIColor groupTableViewBackgroundColor];

} 
```

这是 AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[[ViewController alloc] init] autorelease];
    } else {
        self.viewController = [[[ViewController alloc] init] autorelease];
    }
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

这是 ViewController.m

```
#import "ViewController.h"
@interface ViewController ()

@end

@implementation ViewController
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    self.view.backgroundColor = [UIColor groupTableViewBackgroundColor];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

但是，结果是视图控制器是黑屏。

如何更改设置背景颜色？

![在此处输入图像描述](../Images/46aab6bd1e0866881ab0cb3cc1d89f8b.png) ![在此处输入图像描述](../Images/837f31c3865709ed30511071984a066d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T00:55:49.677

尝试这个

self.view.backgroundColor=[UIColor clearColor];

# ruby-on-rails - 测试rails路线，我错过了什么捷径？

> ID：12574375
> 
> 赞同：0
> 
> 时间：2012-09-24T23:34:07.713
> 
> 标签：ruby-on-rails, rspec

我正在为我们的 api 控制器编写一组路由测试。我很好奇是否有更快的方法。我们有一堆这样的网址：

路线.rb

```
post '/api/unfollow' => 'api#unfollow', :as => :unfollow 
```

/spec/routing/unfollow_routes_spec.rb

```
require "spec_helper"

describe "route to api unfollow" do
  it "should route correctly" do
    {:post => unfollow_path }.should route_to(:controller => "api", :action => "unfollow")
  end
end 
```

这看起来像一个合理的策略吗？是否建议每个文件只放置一条路线？我宁愿将单个控制器的所有路由放在一个文件中。在具有命名路由的路由定义中，有没有办法将其留空，并且 rails 可以推断它是 unfollow_path ？

提前谢谢

# algorithm - 算法 - 查找覆盖给定矩形区域的矩形数量

> ID：12574376
> 
> 赞同：-1
> 
> 时间：2012-09-24T23:34:18.013
> 
> 标签：algorithm

这不是作业问题。它是一个面试问题。我无法为这个问题想出好的解决方案。

问题 ：

给定一个 n*n (bottom left(0,0) , top right(n,n)) 网格和 n 个边平行于坐标轴的矩形。n 个矩形的左下角和右上角坐标以 (x1,y1)(x1',y1') .... (xn,yn)(xn',yn') 的形式提供。有 M 个查询询问覆盖坐标为 (a,b)(c,d) 的矩形的矩形数量。如何以有效的方式解决它？有没有办法预先计算所有坐标位置，以便我可以在 O(1) 中返回答案。

约束：1<= n <= 1000

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:09:43.813

在 O(n^4) 空间和 O(n^5) 时间内创建一个提供 O(1) 查找的数据结构很简单。如果 M 超过 O(n^2) 可能值得这样做。在 O(n^2) 空间和 O(n^3) 时间内创建一个在 O(n) 时间内提供查找的数据结构也很简单。如果 M 是 O(n^2)，那可能是一个更好的权衡；即，O(n^3) 预计算时间和 O(n^3) 时间用于 O(n^2) 查找，每个 O(n)。

对于预计算，创建一个 n × n 列表数组。令 L_pq 表示 n × n 网格的单元 p,q 的列表。每个列表最多包含 n 个矩形，所有列表都按相同的关系排序（即，如果`Ri < Rj`在一个列表中，`Ri < Rj`则在该对所在的每个列表中）。列表集需要花费时间 O(n^3) 来计算，可以作为“对于 n^2 单元格中的每个 C，对于 n 个矩形中的每个 R，如果 R 中的 C 将 R 添加到 L_C”或“对于每个 R在 n 个矩形中，对于 R 中的每个单元格 C，将 R 添加到 L_C"。

给定一个查询 (a,b,c,d)，在 O(n) 时间内计算列表 L_ab 和 L_cd 的交集的大小。对于 O(1) 的查找，首先进行上面提到的预计算，然后对于每个 a,b，对于每个`c>a`and `d<b`，做上面提到的 O(n) 查询并将结果保存在 P[a,b,c,d]其中 P 是一个适当大的整数数组。

很可能存在 O(n^3) 或 O(n^2 · log n) 预计算方法，使用可以在 O(log n) 时间内进行查询的[分段树](http://en.wikipedia.org/wiki/Segment_tree)、[范围树](http://en.wikipedia.org/wiki/Range_tree)或[区间树。](http://en.wikipedia.org/wiki/Interval_tree#Higher_Dimensions)

# php - TCPDF 以及如何通过循环从数据库中输出文件

> ID：12574378
> 
> 赞同：2
> 
> 时间：2012-09-24T23:34:47.087
> 
> 标签：php, mysql, tcpdf

我有一个关于 TCPDF 的问题，我试图从我的数据库中输出数据并循环它们我尝试按照此处给出的答案[TCPDF - 从 mysql 打印表，](https://stackoverflow.com/questions/5261684/tcpdf-printing-table-from-mysql) 但它没有正确显示我的数据库的内容，例如假设的输出是：1 2 3 4 5

但发生的是 1 q a w 4

这是我的代码

```
 <?php
include('connect.php');
    require_once('libraries/tcpdf/config/lang/eng.php');
    require_once('libraries/tcpdf/tcpdf.php');
// create new PDF document
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);

// set default font subsetting mode
$pdf->setFontSubsetting(true);

// Set font
// dejavusans is a UTF-8 Unicode font, if you only need to
// print standard ASCII chars, you can use core fonts like
// helvetica or times to reduce file size.
$pdf->SetFont('dejavusans', '', 14, '', true);

// Add a page
// This method has several options, check the source code documentation for more information.
$pdf->AddPage();

// set text shadow effect
$pdf->setTextShadow(array('enabled'=>true, 'depth_w'=>0.2, 'depth_h'=>0.2, 'color'=>array(196,196,196), 'opacity'=>1, 'blend_mode'=>'Normal'));

$query=mysql_query("select * from ci");
$query=mysql_fetch_assoc($query);

$tbl_header = '<table style="width: 638px;" cellspacing="0">';
$tbl_footer = '</table>';
$tbl = '';

foreach($query as $query2){
$ciid = $query2['ci_id'];
$cinature = $query2['ci_nature'];
$ciposition = $query2['ci_postion'];
$tbl .= '
    <tr>
        <td style="border: 1px solid #000000; width: 150px;">'.$ciid.'</td>
        <td style="border: 1px solid #000000; width: 378px;">'.$cinature.'</td>
        <td style="border: 1px solid #000000; width: 110px; text-align:center">'.$ciposition.'</td>
    </tr>
';}

$pdf->writeHTML($tbl_header . $tbl . $tbl_footer, true, false, false, false, '');

$pdf->Output('test.pdf');

?> 
```

提前致谢

# php - 从 sha1 加盐密码验证用户登录

> ID：12574380
> 
> 赞同：4
> 
> 时间：2012-09-24T23:34:53.150
> 
> 标签：php, hash, passwords, sha1, salt

我有一个非常简单的登录/用户注册脚本，它使用 sha1 和 salt 存储密码。我的密码和用户创建工作正常，并且将所有内容都存储在数据库中，但是当我尝试使用凭据登录时，它不起作用。搜索此主题时，我似乎找不到任何东西。

这是我的添加用户表单：

```
session_start();
include("includes/resume.config.php");

// make sure form fields have a value and strip them
function check_input($data, $problem='')
{
$data = trim($data);
$data = stripslashes($data);
$data = htmlspecialchars($data);
if ($problem && strlen($data) == 0)
{
    die($problem);
}
    return $data;
}

// get form values, escape them and apply the check_input function
$name = $link->real_escape_string(check_input($_POST['name'], "Please enter a name!"));
$email = $link->real_escape_string(check_input($_POST['email'], "Please enter an email!"));
$password = $link->real_escape_string(check_input($_POST['password'], "Please enter a password!"));

// generate a random salt for converting passwords into MD5
$salt = bin2hex(mcrypt_create_iv(32, MCRYPT_DEV_URANDOM));
$saltedPW =  $password . $salt;
$hashedPW = sha1($saltedPW);

mysqli_connect($db_host, $db_user, $db_pass) OR DIE (mysqli_error());
// select the db
mysqli_select_db ($link, $db_name) OR DIE ("Unable to select db".mysqli_error($db_name));

 // our sql query
$sql = "INSERT INTO admins (name, email, password, salt) VALUES ('$name', '$email', '$hashedPW', '$salt');";

//save the updated information to the database          
mysqli_query($link, $sql) or die("Error in Query: " . mysqli_error($link));

if (!mysqli_error($link)) 
{
    header("Location: file_insert.php");
} 
```

这是我的登录脚本：**这是行不通的**

```
function check_input($data, $problem='')
{
$data = trim($data);
$data = stripslashes($data);
$data = htmlspecialchars($data);
if ($problem && strlen($data) == 0)
{
    die($problem);
}
    return $data;
}

if(isset($_POST['submitLogin'])) { //form submitted?

// get form values, escape them and apply the check_input function
$name = $link->real_escape_string(check_input($_POST['name'], "Please enter a name!"));
$password = $link->real_escape_string(check_input($_POST['password'], "Please enter a password!"));

$saltQuery = $link->query('SELECT salt FROM admins WHERE name = "'.$name.'"');

$salt = mysqli_fetch_assoc($saltQuery);
$saltedPW =  $password . $salt;
$hashedPW = sha1($saltedPW);

mysqli_connect($db_host, $db_user, $db_pass) OR DIE (mysqli_error());
// select the db
mysqli_select_db ($link, $db_name) OR DIE ("Unable to select db".mysqli_error($db_name));

$validate_user = $link->query('SELECT id, name, password FROM admins WHERE name = "'.$name.'" AND password = "'.$hashedPW.'"');

if ($validate_user->num_rows == 1) {
    $row = $validate_user->fetch_assoc();
    $_SESSION['id'] = $row['id'];
    $_SESSION['loggedin'] = TRUE;
    Header('Location: file_insert.php');
} else {
    print "<center><p style='margin-top: 200px; font-weight: bold;'>Invalid Login Information</p>";
    print "<a href='admin-login.php'>Click here</a> to return to the login page.</center>";
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T23:41:40.087

可能还会发生更多事情，但肯定它不起作用的一个原因是因为[`mysqli_fetch_assoc`](http://php.net/mysqli_fetch_assoc)返回一个数组，并且您像字符串一样使用它。

当您调用时，PHP 会抱怨数组到字符串的转换，`$password . $salt`因为此时`$salt`是一个数组。结果是您将单词`Array`附加到密码中，从而导致哈希不正确。如果您已`display_errors`关闭和/或`error_reporting`设置隐藏通知，`php.ini`那么您将不会看到此消息。

如果你改变：

```
$saltedPW =  $password . $salt; 
```

至：

```
$saltedPW =  $password . $salt['salt']; 
```

那么它应该可以工作。

此外，您应该`$salt`在将其插入数据库之前转义，因为它可能包含空、不可打印或单/双引号，因为它是随机生成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T23:47:15.167

您没有说是否收到任何错误消息，但从您发布的内容来看，我认为这是一个连接问题：

```
if(isset($_POST['submitLogin'])) { //form submitted?

// Here, you didn't connect to database, but you are expecting to fetch salt!
$saltQuery = $link->query('SELECT salt FROM admins WHERE name = "'.$name.'"');

$salt = mysqli_fetch_assoc($saltQuery); 
```

因此，您可能必须先连接到数据库：

```
if(isset($_POST['submitLogin'])) { //form submitted?

mysqli_connect($db_host, $db_user, $db_pass) OR DIE (mysqli_error());
// select the db
mysqli_select_db ($link, $db_name) OR DIE ("Unable to select db".mysqli_error($db_name));

// Here, you didn't connect to database, but you are expecting to fetch salt!
$saltQuery = $link->query('SELECT salt FROM admins WHERE name = "'.$name.'"'); 
```

其次，mysqli_fetch_assoc 返回一个数组，其键名作为您在 SELECT 查询中嵌入的字段，最终代码应如下所示：

```
if(isset($_POST['submitLogin'])) { //form submitted?

mysqli_connect($db_host, $db_user, $db_pass) OR DIE (mysqli_error());
// select the db
mysqli_select_db ($link, $db_name) OR DIE ("Unable to select db".mysqli_error($db_name));

// Here, you didn't connect to database, but you are expecting to fetch salt!
$saltQuery = $link->query('SELECT salt FROM admins WHERE name = "'.$name.'"');
$salt = mysqli_fetch_assoc($saltQuery);
$saltedPW =  $password . $salt["salt"];
$hashedPW = sha1($saltedPW); 
```

# iphone - 在导航栏中显示多个按钮

> ID：12574385
> 
> 赞同：-3
> 
> 时间：2012-09-24T23:35:27.783
> 
> 标签：iphone, ios

在我的应用程序中，我想显示 2 个按钮（每个按钮都有不同的操作）来代替导航栏的 rightbarbutton。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T09:09:41.847

这是您希望其工作并提供帮助的代码

把下面的代码放进去

```
 -(void)viewWillAppear:(BOOL)animated 
  {
     UIToolbar* tools = [[UIToolbar alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 103.0f, 44.01f)];
     tools.tintColor = [UIColor clearColor];

     [tools setBarStyle:UIBarStyleBlackTranslucent];
     tools.barStyle = -1; // clear background
     NSMutableArray *buttons = [[NSMutableArray alloc] initWithCapacity:3];

    // Create a standard refresh button.

     UIButton *button =  [UIButton buttonWithType:UIButtonTypeCustom];
     [button setImage:[UIImage imageNamed:@"Settings.png"] forState:UIControlStateNormal];
     [button addTarget:self action:@selector(resetpass) forControlEvents:UIControlEventTouchUpInside];
[button setFrame:CGRectMake(0, 0, 30,30 )];
bi = [[UIBarButtonItem alloc] initWithCustomView:button];

[buttons addObject:bi];
[bi release];

bi = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace target:nil action:nil];
bi.width = 2.0f;
[buttons addObject:bi];
[bi release];

// Add profile button.
bi = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(createnewFolders)];
bi.style = UIBarButtonItemStyleBordered;
[buttons addObject:bi];
[bi release];

// Add buttons to toolbar and toolbar to nav bar.
[tools setItems:buttons animated:NO];
[buttons release];
twoButtons = [[UIBarButtonItem alloc] initWithCustomView:tools];
[tools release];

self.navigationItem.leftBarButtonItem = twoButtons;

[twoButtons release];
 } 
```

谢谢你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T23:38:52.410

I believe [this post](https://stackoverflow.com/questions/1414510/how-do-you-add-more-than-one-uibarbutton-on-uinavigationitem-rightbarbuttonitem) answers your question.

However, more information is required to answer your question properly. iOS version and so forth. That answer seems to have what you are requesting though.

# android - 自定义通知布局不适用于 Android 2.3 或更低版本

> ID：12574386
> 
> 赞同：18
> 
> 时间：2012-09-24T23:35:30.807
> 
> 标签：android, layout, notifications

我使用`NotificationCompat.Builder`android 版本来显示我的通知，并为通知使用自定义布局。
自定义布局在 Android 3 及更高版本（API 级别 11）上运行良好，但在 API 级别 10 或更低版本上不显示。我在模拟器中对 2.3 和 2.2 进行了测试。

这是我的代码：

```
 Builder builder = new NotificationCompat.Builder(getApplicationContext());

    RemoteViews contentView = new RemoteViews(getPackageName(), R.layout.notification_layout);
    contentView.setImageViewResource(R.id.notImage, R.drawable.stat_icon);
    contentView.setTextViewText(R.id.notTitle, getResources().getString(R.string.streamPlaying));
    contentView.setTextViewText(R.id.notText, StartActivity.streamName + " " + getResources().getString(R.string.playing));

    builder
            .setContentTitle(getResources().getString(R.string.streamPlaying))
            .setContentText(StartActivity.streamName + " " + getResources().getString(R.string.playing))
            .setSmallIcon(R.drawable.stat_icon)
            .setContentIntent(pendingIntent)
            .setOngoing(true)
            .setWhen(0)
            .setTicker(StartActivity.streamName + " " + getResources().getString(R.string.playing))
            .setContent(contentView);

    not = builder.build(); 
```

真的很基本。布局文件是正确的，它与 android.com 上的通知教程中的相同，以确保我没有在那里犯错。;)
记住：在 3.0 及更高版本上工作正常，但在 2.3 及更低版本上不行。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-24T23:55:45.073

这可能是支持库中的错误 - 请参阅[此问题](http://code.google.com/p/android/issues/detail?id=30495)。

您可能必须通过直接应用 contentView 来解决它：

```
not.contentView = contentView; 
```

# json - 敲除映射 JSON 读取时出错

> ID：12574387
> 
> 赞同：0
> 
> 时间：2012-09-24T23:35:38.803
> 
> 标签：json, knockout.js, mapping

我在使用 foreach 显示数据的 Web 应用程序上使用敲除（包括所有需要的库）

我收到以下错误：

```
Error: Unable to parse bindings. Message: ReferenceError: d is not defined; Bindings value: foreach: d
[Break On This Error]   

...+c+" } ";return new Function("sc",c)},kb:function(a,b){if(b.compareDocumentPosit... 
```

我的 JSON：

```
{"d":[{"__type":"listingItem:#applicationModel","award_text":"","channel_id":5,"constructed_short_descriptionen":"","constructed_short_descriptiongr":"","constructed_titleen":"","constructed_titlegr":"","country_id"... 
```

我的代码：

```
var Listing_ViewModel = {};

    var data = $.getJSON("listings.svc/Listing_Get_Items?",
                {
                    startdate: "2012-09-21 00:00:00",
                    stopdate: "2012-09-22 00:00:00",
                    channel_id: "5"
                }, function (data) {
                    // Now use this data to update your view models, 
                    // and Knockout will update your UI automatically 
                    //var parsed = JSON.parse(data);
                    alert(data.d[0].duration);
                    Listing_ViewModel = ko.mapping.fromJSON(data);
                    //alert(ko.mapping.toJS(Listing_ViewModel));
                    ko.applyBindings(Listing_ViewModel);
                    //        ko.applyBindings({
                    //          
                    //        });
                }) 
```

HTML 代码：

```
<!-- ko foreach: d -->
    <li class="item item-even" id="id_1" title="1">
    </li>
<!-- /ko --> 
```

任何想法我做错了什么？对不起，我完全是绿色的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T01:24:47.880

问题很可能是`fromJSON`您真正的意思是在使用`fromJS`. 在读取 JSON 字符串`$.getJSON`时已经为您创建了一个对象。读取 Javascript 对象。`ko.mapping.fromJSON``ko.mapping.fromJS`

有关更多信息，请参见此 JSFiddle：http: [//jsfiddle.net/hB3Rm/](http://jsfiddle.net/hB3Rm/)

本质上，改变这一行：

```
Listing_ViewModel = ko.mapping.fromJSON(data); 
```

到这一行：

```
Listing_ViewModel = ko.mapping.fromJS(data); 
```

# android - 使用 ActionBarSherlock 跨片段使用一个通用按钮

> ID：12574388
> 
> 赞同：1
> 
> 时间：2012-09-24T23:35:59.887
> 
> 标签：android, android-fragments, android-actionbar, actionbarsherlock, android-tabs

我使用 ActionBarSherlock 在我的应用程序上获取了一些 Holo 主题选项卡和一个 ActionBar，并创建了一个片段来处理每个选项卡上的行为。我希望底部的选项卡和按钮将片段“夹在中间”，在屏幕底部会有一个按钮，该按钮将在两个片段中都有一个单击侦听器。

在我的活动中，我创建了这样的选项卡。

```
public class InviteFriendsActivity extends SherlockFragmentActivity implements ActionBar.TabListener
{
  protected void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);

    ActionBar bar = getSupportActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    ActionBar.Tab tab1 = bar.newTab();
    tab1.setText("Tab 1");
    tab1.setTabListener(this);  

    ActionBar.Tab tab2 = bar.newTab();
    tab2.setText("Tab 2");
    tab2.setTabListener(this);  

    bar.addTab(tab1);
    bar.addTab(tab2);
  }
} 
```

然后我创建了 onTabSelected

```
 public void onTabSelected(Tab tab, FragmentTransaction ft)
{
    if (tab.getPosition() == 0)
    {
        Fragment1 frag = new Fragment1();
        ft.replace(android.R.id.content, frag);
    }
    else if (tab.getPosition() == 1)
    {
        Fragment2 frag = new Fragment2();
        ft.replace(android.R.id.content, frag);
    }
} 
```

让选项卡显示或更改我没有问题，但我似乎无法弄清楚如何获得一个按钮，该按钮将在屏幕底部排列并在此活动中保持静止，但仍然允许我在两者之间切换碎片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T23:43:51.270

您想要一个通过每个片段和每个选项卡显示的按钮吗？
这可以通过使用显示片段的片段容器轻松完成。例如使用这样的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <fragment
        android:name="com.example.yourfragmentcontainer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/button1"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:text="Button" />

</RelativeLayout> 
```

有关如何使用片段容器设置 ActonBar 的帮助，请查看本教程：[http ://arvid-g.de/12/android-4-actionbar-with-tabs-example](http://arvid-g.de/12/android-4-actionbar-with-tabs-example)

# ruby - ruby 排序哈希，得到排名

> ID：12574389
> 
> 赞同：0
> 
> 时间：2012-09-24T23:36:01.210
> 
> 标签：ruby, sorting, hash

有一个城市名称的哈希作为键，对应的索引作为值，

```
"Los Angeles" => 2.5
"San Francisco" => 3.6
"San Diego" => 2.4
.
.
. 
```

现在我想按值对哈希进行排序，所以它会变成

```
"San Diego" => 2.4    
"Los Angeles" => 2.5
"San Francisco" => 3.6
.
.
. 
```

而且我需要得到整个散列的每个散列条目的排名。在示例中假设洛杉矶，它将返回 2。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T23:41:46.567

尝试`sort_by{|k,v| v}`

```
cities = {"Los Angeles" => 2.5, "San Francisco" => 3.6, "San Diego" => 2.4 }
cities.sort_by {|key, value| value} 
```

然后索引变成排名（我想）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T03:13:31.353

这将为您提供给定城市的排名：

```
cities.keys.sort.index("Los Angeles") + 1
  #=> 1 
```

索引从 0 开始，所以我在答案中添加了 1，以便为您提供从 1 开始的排名。

# php - 从 Magento 销售中删除已删除的订单 > 订单

> ID：12574390
> 
> 赞同：0
> 
> 时间：2012-09-24T23:36:12.343
> 
> 标签：php, mysql, magento

我尝试了几种不同的方法来从 Magento 中删除测试订单。

1.  使用插件（http://www.magentocommerce.com/magento-connect/asperience-deleteorders.html）
2.  在论坛帖子中找到的 SQL 命令 (http://www.magentocommerce.com/boards/viewthread/1680/P420/)
3.  企业支持给我的 SQL 命令
4.  在堆栈溢出处找到的 PHP 脚本 (http://stackoverflow.com/questions/4526914/how-can-i-delete-test-order-from-magento)

这些方法中的一些（如果不是全部）似乎会从数据库中删除条目，但是这些解决方案都没有从 Magento 的后端删除订单。这些订单仍显示在销售 > 订单以及仪表板下。我们有一个开发环境、一个测试环境和一个生产环境，但是我们仍然希望在生产环境中下达测试订单，以确保我们的更改被正确推送。

我错过了什么吗？其他人似乎对上面列出的 Plugin/SQL/PHP 删除方法感到满意。我试过刷新缓存和缓存存储。似乎没有任何效果。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:46:14.460

Magento 的现代版本将订单信息传播到`sales_flat_order_grid`表中，管理控制台在显示网格订单时从该表中读取。我没有查看您链接到的方法，但我的猜测是他们没有清除这张表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-20T06:02:50.240

在全新安装中，[http://www.magentocommerce.com/magento-connect/asperience-deleteorders.html](http://www.magentocommerce.com/magento-connect/asperience-deleteorders.html)完美运行，因为 sales 表和 sales_grid 表之间存在约束。新版本的[http://www.magentocommerce.com/magento-connect/asperience-deleteorders.html](http://www.magentocommerce.com/magento-connect/asperience-deleteorders.html)检测是否必须对 sales_grid 进行特定删除

# c++ - 从只读模式执行读/写卷中的 C++ 二进制文件

> ID：12574391
> 
> 赞同：0
> 
> 时间：2012-09-24T23:36:19.583
> 
> 标签：c++, macos

我有一个在只读卷中执行的 C++ OS X 二进制文件。二进制文件将另一个二进制文件复制到读/写卷中，然后执行该二进制文件，该二进制文件从 URL 卷曲文件。我的问题似乎是因为只读卷中的二进制文件正在执行读写卷中的二进制文件，所以 R/W 的 curl 没有正确执行，并且由于文件系统为只读的错误而失败。我不知道描述这个的技术术语，所以这是我冗长的解释。

我想知道是否可以从只读卷执行二进制文件并让它以某种方式正确执行该 R/W 二进制文件，以便 curl 识别出它是从读写卷中调用并正确下载的。有这种可能吗？虽然我可以手动遍历 R/W 卷并直接执行文件，但我确实在寻找尽可能多的自动化。

提前感谢您的任何见解！

# objective-c - UITableView iPad 中的 UITextView

> ID：12574395
> 
> 赞同：0
> 
> 时间：2012-09-24T23:36:54.837
> 
> 标签：objective-c, ios, uitableview, uitextview

我正在尝试在 iPad 的 UITableViewCell 中添加 UITextView，由于某种原因，我的 UITextView 没有占用 UITableViewCell 的整个高度/宽度。这是我声明单元格的方式

```
UITextView *textView = [[UITextView alloc]initWithFrame:cell.frame];
[textView setBackgroundColor:[UIColor redColor]];
[cell.contentView addSubview:textView]; 
```

虽然看起来像这样 ![在此处输入图像描述](../Images/f4d2bdee47abde561b5bbb5cda69bdd2.png)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:47:25.923

自动调整大小的面具工作... flexwidth 和 flexheight

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T23:48:40.657

试试这个：`textView.contentSize = [cell.contentView.frame.size]`;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T23:50:58.500

您希望大小为 (cell.contentView.frame.size.width, cell.contentView.frame.size.height)，原点为 (0,0)。然后将其添加到 cell.contentView。框架原点是相对于 textView 的超级视图，在本例中是 cell.contentView。

# android - 如何在android中制作一个ListView？

> ID：12574398
> 
> 赞同：0
> 
> 时间：2012-09-24T23:37:27.197
> 
> 标签：android

我需要一种有条理的方式来组织我的应用程序，我认为按钮开始看起来很草率。下面是我的代码。我将 XML 设置为列表视图。不确定它是否正确。

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/species" 
        android:layout_width="match_parent" 
        android:layout_height="wrap_content" >
    <ListView 
        android:id="@+id/species" 
        android:layout_width="match_parent" 
        android:layout_height="wrap_content" > 
    </ListView>

</LinearLayout> 
```

这是我的java代码。我还没有改变它，除了以前尝试这样做的导入。

```
package com.apw.listview.test;

import android.app.*;
import android.os.*;
import android.view.*;
import android.widget.*;
import android.content.*;

public class Species extends Activity
{

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.species);

    }

    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T04:32:56.510

Android 中有两种类型的列表视图： 1.基本列表视图。2.自定义列表视图。

**基本列表视图** 这些是不需要任何额外布局来生成列表视图的列表视图。您可以使用链接实现它： [http ://windrealm.org/tutorials/android/android-listview.php](http://windrealm.org/tutorials/android/android-listview.php)

**自定义列表视图** 这种类型的列表视图需要额外的布局和自定义列表适配器来设置实现。您可以使用链接实现它： [https ://abhiandroid.com/ui/listview](https://abhiandroid.com/ui/listview)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T23:42:59.490

您需要获取对 ListView 的引用，然后使用适配器将其绑定到数据。在方法的末尾添加`onCreate()`：

```
String[] array = new String[] {"cat", "dog", "mouse"};
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, array);

listView = (ListView) findViewById(R.id.species);
listView.setAdapter(adapter); 
```

考虑完成 Android[开发者网站](http://developer.android.com/guide/topics/ui/layout/listview.html)上的一些教程来引导您完成此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T23:48:17.943

好吧，您本可以在列表视图中提供有关您想要的更多信息...无论如何，您可以点击此链接[http://www.mkyong.com/android/android-listview-example/](http://www.mkyong.com/android/android-listview-example/) 它会为您提供有关列表视图的几个示例.

为了简单起见，您需要一个列表、一个数组或一个数据库，以及您想要的数据结构。

您需要在数据和列表（ArrayAdapter、CursorAdapter 或您自己的基于 Base Adapter 的适配器）之间使用一个接口，您将向其提供数据

然后，每当您修改数据集时，您都会通过

```
myadapter.notifyDataSetChanged(); 
```

# c# - How to wait until a process finishes in EntityFramework?

> ID：12574401
> 
> 赞同：1
> 
> 时间：2012-09-24T23:37:48.523
> 
> 标签：c#, silverlight, callback, silverlight-5.0, iasyncresult

I'm working with `EntityFramework` and Silverlight, and I'm dealing with this situation. When I try to load the data from a `EntitySet`, I have to get the data from a callback.

Now, I need to get the data inmediately, I mean wait until the process finished.

In the next code, the part which I'd like to wait the process is `Objectives` property. Or I don't know if I can convert the callback method into a `IAsyncResult`, or something like that.

```
public class EntityService : IEntityService
{
    public EntityService()
    {
        _entities = new DatabaseDomainContext();
    }

    private DatabaseDomainContext _entities;
    public DatabaseDomainContext Entities
    {
        get { return _entities; }
        set { _entities = value; }
    }

    private EntityList<Objective> _objectives;
    public ObservableCollection<Objective> Objectives
    {
        get
        {
            if (_objectives == null)
            {
                var loadOp = _entities.Load(_entities.GetObjectivesQuery()/*, Callback, true*/);
                _objectives = new EntityList<Objective>(_entities.Objectives, loadOp.Entities);
            }

            return _objectives;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:32:02.820

实施 INotifyPropertyChanged。当结果返回时，引发 NotifyPropertyChanged。

# authorize.net - In Authorize.Net, What is the difference between sandbox.authorize.net and test.authorize.net?

> ID：12574404
> 
> 赞同：0
> 
> 时间：2012-09-24T23:38:09.033
> 
> 标签：authorize.net

I have crawled thru the site, and i cant see any difference between the two. I don't know when should i use the sandbox and test.

thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T01:34:54.277

它们完全一样。

# visual-studio-2012 - 在 Visual Studio 2012 中折叠 html

> ID：12574405
> 
> 赞同：46
> 
> 时间：2012-09-24T23:38:11.493
> 
> 标签：visual-studio-2012, visual-web-developer-2010

在以前版本的 Visual Studio 中，您可以折叠 html 块，但在 VS2012 中似乎缺少。关于如何再次启用该功能的任何想法？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-09-28T17:39:39.143

我也遇到了这个问题，这让我发疯了。事实证明，不知何故，我关闭了“自动大纲”，这意味着我确实看到了加号/减号，快捷键 Ctrl + M + M 也不起作用。

在“编辑”>“大纲”>“开始自动大纲”中打开“自动大纲”后，一切都恢复正常。

*注意：在某些情况下，要使此解决方案起作用，您还需要在单击开始自动大纲之前关闭并重新打开文档。事实上，如果您不这样做，有时该选项不会出现在菜单中。*

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-24T23:47:31.640

它还在那里。问题是有时解析器需要一段时间才能在视觉上启用折叠。

![伊姆古尔](../Images/06630ce7d10b3a5219fe56e337756462.png)

试试 Ctrl + M + M 你会看到效果

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-16T18:25:50.980

无论任何树层次结构如何，我都喜欢`Ctrl + M + H`在想要隐藏不需要的代码时使用。即使我想隐藏我的注释代码，这也很有效。

你只需要选择你想要折叠和点击的代码，`Ctrl + M + H`现在就隐藏它:)

![在此处输入图像描述](../Images/32a104e998c8cdae74e846564f79a8e9.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-06T13:57:43.953

当您打开字体 .cshtml 时，您将必须转到 EDIT->Outlining->Start Automatic Outlining

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-13T08:52:39.620

只需将鼠标悬停在代码编辑器上并稍等片刻，不要移动鼠标 :)

大纲树将显示出来。

之前和之后

![](../Images/4b3cdc9d3dd7b6a8fbec9d30217215b8.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-27T05:44:14.820

****在解决方案资源管理器中****右键单击**html *、* cshtml*或*aspx*文件*并选择**打开**选项： 在对话框中选择**html 编辑器**并单击**设置为默认**按钮。 打开 html 或 cshtml 或 aspx 文件并享受带有大纲 html 标记的 html 文件。:)**

# java - IO Error: The Network Adapter could not establish the connection

> ID：12574414
> 
> 赞同：39
> 
> 时间：2012-09-24T23:38:41.410
> 
> 标签：java, windows-7, jdbc, oracle11g, bootcamp

I am new to Oracle, and am trying to run a simple example code with Java, but am getting this error when executing the code.. I am able to start up the listener via CMD and am also able to run SQL Plus. Can anyone give me a hand and tell me what I might be doing wrong?

Update: I am using JDBC.

Database is local, and I actually had it working but it stopped working just today. I'm not really sure why though. Would you mind giving me some procedures to follow by since I don't know much.

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-25T01:03:18.017

任何一个：

1.  数据库未运行
2.  你的网址有误
3.  途中有防火墙。

（这个奇怪的错误消息是由 Oracle 的 JDBC 驱动程序在无法连接到数据库服务器时产生的。“网络适配器”似乎是指他们代码的某些组件，这不是很有用。真正的网络适配器（NIC）不'根本不建立连接：TCP协议栈会这样做。如果他们只是让原始的`ConnectException`被抛出，或者至少使用它的错误消息并让它出现在堆栈跟踪中，那将会更加有用。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-06T06:05:59.297

我有同样的问题，这就是我解决它的方法。我使用了错误的端口进行连接。

```
private final String DB_URL  = "jdbc:oracle:thin:@localhost:1521:orcll"; // 1521 my wrong port 
```

*   去你的本地主机
*   （我的本地主机地址）： `https://localhost:1158/em`

*   登录

    *   用户名
    *   密码
    *   连接为 --> 正常
*   在“常规”下方单击 LISTENER_localhost

*   看看你的端口号
    *   网络地址 (ADDRESS=(PROTOCOL=TCP)(HOST=localhost)(PORT=1522)) 连接到端口 1522
*   编辑您的连接，将端口 1521 更改为 1522。

    *   完毕

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T17:52:45.267

您可能想要检查 listener.ora 文件是否与您尝试连接到数据库的方式匹配的另一件事。如果您通过 localhost 引用进行连接，并且您的 listener.ora 文件从以下位置更改：

```
HOST = localhost 
```

至

```
HOST = 192.168.XX.XX 
```

那么这可能会导致您遇到的错误，除非您更新主机文件以适应这种情况。可能有人进行了此更改以允许从其他机器远程连接到数据库。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-04T22:39:56.500

当我在 windows-properties 中重命名 pc 时出现此错误。pc-name 必须在`listener.ora`-file中更新

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-11T17:00:12.730

我发现在我的情况下，我的数据库与我试图访问数据库的子网位于不同的子网中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-26T14:17:52.907

很可能您的侦听器配置错误，您在连接字符串中指定的主机名必须与侦听器中的相同。

首先检查防火墙和网络相关问题。

检查 Oracle 侦听器服务是否可用并正在运行。如果没有，您可以使用 Oracle Net Configuration Assistant 工具添加和注册新的侦听器。

如果上述步骤都可以，那么您需要适当地配置 Oracle Listener。您可以使用 Oracle Net Manager 工具或手动编辑“%ORACLE_HOME%\network\admin\listener.ora”文件。

有 2 个选项需要仔细考虑： 与侦听器关联的侦听位置 – 侦听位置中的主机名 (IP) 和端口必须与连接字符串中使用的完全匹配。

例如，如果您使用 192.168.74.139 作为目标主机名，则必须有使用相同 IP 地址注册的侦听位置。

还要确保您使用与侦听器关联的数据库服务中指示的相同 SID。

[https://adhoctuts.com/fix-oracle-io-error-the-network-adapter-could-not-establish-the-connection-error/](https://adhoctuts.com/fix-oracle-io-error-the-network-adapter-could-not-establish-the-connection-error/)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-06-24T11:45:35.503

要解决网络适配器错误，我必须删除`-`计算机名称中的 。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-05-12T08:25:18.660

就我而言，我需要指定 a`viahost`和`viauser`。如果你在一个复杂的系统中，值得一试。:)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-02-28T07:31:19.467

对我来说，没有安装基本的 oracle。请确保您已安装 oracle，然后尝试检查主机和端口。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-06-04T22:42:31.280

我也有这个问题。我正在使用 jdbc 连接字符串连接到数据库。主机名在字符串中配置不正确。我正在使用 Mac，并且在 Windows 机器上使用相同的字符串没有问题。在我的连接字符串上，我必须确保在主机名末尾附加了“organizationname.com”的完整网址。

希望这可以帮助。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2020-03-13T05:29:49.223

只需尝试重新创建连接。在我的情况下，jdbc 连接之一无缘无故停止工作。从控制台 sqlplus 工作正常。我花了 2 个小时才意识到如果我创建相同的连接 - 它可以工作。

# python - 无法删除 Django 中特定条目的缓存

> ID：12574422
> 
> 赞同：14
> 
> 时间：2012-09-24T23:39:27.183
> 
> 标签：python, django, caching

当使用信号保存一个特定条目时，我正在尝试清除它的缓存。

我正在使用来自的装饰器（`signals`和`render_to`）[`django-annoying`](https://bitbucket.org/offline/django-annoying)

```
@signals.post_save(sender=Artigo)
def artigo_post_save(instance, **kwargs):

    from django.http import HttpRequest
    from django.utils.cache import get_cache_key
    from django.core.cache import cache

    # cache.delete(instance.get_absolute_url()) # not work

    request = HttpRequest()
    request.method = "GET"
    request.path = '/' + instance.get_absolute_url()

    print 'request path: ', request.path

    key = get_cache_key(request=request, 
                        key_prefix=settings.CACHE_MIDDLEWARE_KEY_PREFIX)

    print "found key" if cache.has_key(key) else "notfound key"

    if cache.has_key(key):
        cache.delete(key)
        cache.set(key, None, 0) 
```

*   问题是当我保存模型时，我得到了 output `"notfound key"`，所以缓存继续没有清除
*   `request.path`正确指向我的进入路径。

一些设置：

```
SESSION_ENGINE = "django.contrib.sessions.backends.cache"
CACHE_MIDDLEWARE_ANONYMOUS_ONLY = True
CACHE_MIDDLEWARE_KEY_PREFIX = 'cache'
CACHE_MIDDLEWARE_SECONDS = 600

CACHES = {
    'default': {
            'LOCATION': '',
            'BACKEND': 'django.core.cache.backends.locmem.LocMemCache'
     },
} 
```

和观点：

```
@cache_page(60 * 60)
@render_to('artigo.html')
def artigo(request, categoria_slug, extra_slug="", artigo_slug=""):
    ... 
```

谢谢你。

**编辑：**
我做了[Ilvar](https://stackoverflow.com/a/10484328/1499847)更改，现在我得到`"found key"`了回报，但我仍然无法删除缓存：

```
 key = _generate_cache_header_key(key_prefix=settings.CACHE_MIDDLEWARE_KEY_PREFIX, request=request)
    key = key.replace(settings.LANGUAGE_CODE, settings.LANGUAGES[0][0]) 
```

会议：

```
LANGUAGE_CODE = 'pt-BR'

LANGUAGES = (
        ('pt-BR','Portugues'),
) 
```

*   我只有在重新启动 Gevent 服务器时才更新内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T22:40:56.603

cache.set(key, None, 0) 应该足够了，我之前一直在清除缓存键。

如果可以，您可以尝试使用 cache.clear() 将其全部清除吗？只是看看它是否有效。

您的缓存键不是可删除的吗？这是预期的输出吗？

```
cache.set('testkey', 'testvalue', 600)
cache.get('testkey')
cache.delete('testkey')
cache.get('testkey')
cache.set('testkey', 'testvalue2', 600)
cache.set('testkey', 'another value', 600)
cache.get('testkey') 
```

您是否尝试过使用另一个缓存后端？看起来你所做的一切都是正确的。

也许错误在后端，某些配置不会让它覆盖键或一些奇怪的东西..

# ruby - Ruby Mechanize Parse Meta标签

> ID：12574428
> 
> 赞同：3
> 
> 时间：2012-09-24T23:41:27.757
> 
> 标签：ruby, html-parsing, web-crawler, nokogiri, mechanize

我正在使用 Mechanize 抓取一堆网页，但在获取元标记时遇到了麻烦。

```
<meta property="og:longitude" content="-74.0100365">
<meta property="og:latitude" content="40.7199929"> 
```

我想得到`og:longitude`和`og:latitude`参数。我试过的东西不起作用，可能是因为页面是动态加载的。这是我目前正在使用的代码：

```
a = Mechanize.new { |agent|
  agent.user_agent_alias = 'Mac Safari'
}

a.get(some_web_page) do |page|
  puts page.search("latitude").first.text
  puts page.search("longitude").first.text
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T00:24:38.830

这将是：

```
page.at('meta[property="og:longitude"]')[:content]
page.at('meta[property="og:latitude"]')[:content] 
```

请注意`:content`，因为它是您想要的内容属性，而不是文本。

# java - 编码 ipv4 地址以便在 Java 中使用

> ID：12574429
> 
> 赞同：0
> 
> 时间：2012-09-24T23:41:35.077
> 
> 标签：java, encryption, pmd

我正在使用 PMD 来检查 java 代码，我遇到了这样的问题：“不要硬编码 IPv4 或 IPv6 地址，即使是 127.0.0.1！” 我使用的 IPv4 地址实际上只是 127.0.0.1，仅用于测试目的，但我必须将硬编码版本转换为某种加密版本。我不确定什么是最简单的方法。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T00:28:55.113

您没有尝试加密任何内容。

您要做的是传入主机名并进行正确的主机查找以获取 Internet 地址。查看标准 JDK 的 InetAddress 以及 getAllByName(String host) 和 getByName(String host)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T15:28:51.940

我以这种方式解决了这个 PMD 的警告：

```
 // Old code
`if (!"127.0.0.1".equals(serverIP)) { ... }` 
```

```
 // New code
`if (!InetAddress.getLoopbackAddress().getHostAddress().equals(serverIP)) { ... }` 
```

# javascript - div内的跨浏览器文本换行

> ID：12574435
> 
> 赞同：2
> 
> 时间：2012-09-24T23:42:02.987
> 
> 标签：javascript, jquery, html, css

有没有办法让一个文本块适合一个 div 并用一个在中断之前插入的“-”来包装中间词。

基本上让文本像这样环绕元素。然后我可以创建一个文本块，当 div id 调整大小时
，它会自动环绕到开头

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T01:23:54.517

评论者是对的。但就其价值而言，这可能是您将获得的最好的：http: [//jsfiddle.net/zB47k/](http://jsfiddle.net/zB47k/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T03:06:41.223

在等待跨浏览器本机支持连字符时，一种方法可能是： [http ://code.google.com/p/hyphenator/](http://code.google.com/p/hyphenator/)

或添加软连字符服务器端 (php)： http: [//phphyphenator.yellowgreen.de/](http://phphyphenator.yellowgreen.de/)

我有自己使用的在 php 中添加软连字符的方法（使用上面的库），因为站点是多语言的，所有与语言相关的东西都发生在服务器端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T01:31:39.350

如果你不是绝对需要'-'，你可以使用自动换行

```
.wrap {word-wrap:break-word;}

<div class="wrap">dfkajdlkfjkadjfjadjfladjfkajdkjfkajdfad</div> 
```

您也可以使用新的连字符规范，但它对浏览器的支持有限： [http ://caniuse.com/#feat=css-hyphens](http://caniuse.com/#feat=css-hyphens)

```
-ms-hyphens: auto;
-webkit-hyphens: auto;
-moz-hyphens:auto; 
```

# awk - 用 awk 重新排列许多列

> ID：12574439
> 
> 赞同：1
> 
> 时间：2012-09-24T23:42:34.907
> 
> 标签：awk, data-processing

我有一个包含超过 800 列的文件，我想执行一些温和的列重排。特别是，我需要删除几列，并将最后一列作为第一列。

我以编程方式生成一个简单的 awk 脚本来执行重新排列。它如下所示：

```
{ 
  print $820,$2,$3,$4, [lots more here, but skipping a few], $819
} 
```

在一台计算机上，这工作得很好。在另一台计算机上，它仅在我选择了几百列时才有效，但对于更多列，我会得到核心转储。有什么办法可以让这个更便携吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T23:44:57.730

安装 gawk 解决了这个问题......不确定以前使用的是什么版本的 awk。

# c# - 不符合键值编码（Monotouch 和 iOS 6）

> ID：12574444
> 
> 赞同：17
> 
> 时间：2012-09-24T23:42:46.360
> 
> 标签：c#, ios, xamarin.ios, interface-builder, ios6

我刚刚将我的 Monotouch 升级到 6，现在我的应用程序无法启动。它以前可以正常工作，没有任何问题。现在它在 Main.cs 文件中引发异常（如下所列）。我查看了 Xamarin 上的故障排除提示，但没有解决问题。我重新布置了笔尖文件，删除并重新配置了我的插座，并创建了一个全新的笔尖，看看这是否能解决问题。其他人有什么想法吗？

```
MonoTouch.Foundation.MonoTouchException: Objective-C exception thrown.  Name: NSUnknownKeyException Reason: [<UIApplication 0xc84bb10> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key btnNewAccount.
   at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication:UIApplicationMain (int,string[],intptr,intptr)
   at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38
   at Pokr.Application.Main (System.String[] args) [0x00000] in /Users/James/Projects/App/Main.cs:17 
```

LoginView.designer.cs 中的代码：

```
[Register ("LoginView")]
partial class LoginView
{
    [Outlet]
    MonoTouch.UIKit.UIImageView imgLogo { get; set; }

    [Outlet]
    MonoTouch.UIKit.UITextField txtEmail { get; set; }

    [Outlet]
    MonoTouch.UIKit.UITextField txtPassword { get; set; }

    [Outlet]
    MonoTouch.UIKit.UIButton btnLogin { get; set; }

    [Outlet]
    MonoTouch.UIKit.UIButton btnNewAccount { get; set; }

    [Outlet]
    MonoTouch.UIKit.UILabel lblSecurityNotice { get; set; }

    [Outlet]
    MonoTouch.UIKit.UIImageView imgKeyboardBorder { get; set; }

    void ReleaseDesignerOutlets ()
    {
        if (imgLogo != null) {
            imgLogo.Dispose ();
            imgLogo = null;
        }

        if (txtEmail != null) {
            txtEmail.Dispose ();
            txtEmail = null;
        }

        if (txtPassword != null) {
            txtPassword.Dispose ();
            txtPassword = null;
        }

        if (btnLogin != null) {
            btnLogin.Dispose ();
            btnLogin = null;
        }

        if (btnNewAccount != null) {
            btnNewAccount.Dispose ();
            btnNewAccount = null;
        }

        if (lblSecurityNotice != null) {
            lblSecurityNotice.Dispose ();
            lblSecurityNotice = null;
        }

        if (imgKeyboardBorder != null) {
            imgKeyboardBorder.Dispose ();
            imgKeyboardBorder = null;
        }
    } 
```

Main.cs 中的代码（代码中断的地方）：

```
 static void Main (string[] args)
    {
        UIApplication.Main (args, null, "AppDelegate");
    } 
```

这是我调用 ViewController 的 AppDelegate 的片段：

```
 var rootNavigationController = new UINavigationController();

        LoginView loginScreen = new LoginView();
        rootNavigationController.PushViewController(loginScreen, false);

        this.window.RootViewController = rootNavigationController;

        //blank function fires so the getter will init the singleton.
        Singleton.Instance.Initialize();

        // make the window visible
        window.MakeKeyAndVisible ();

        return true; 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-25T04:44:20.897

当您`ViewController`在代码中初始化了一个但也`ViewController`从 XIB 文件初始化时，会发生此错误。

如果您将“主界面”值设置为`ViewController`您在代码中创建的值，则可能会发生这种情况。要解决此问题，请将此值设为空，然后`ViewController`将自动初始化 no。

还要检查您的 pInfo 文件以查看是否设置了主界面。

感谢**@Bart**为**Xamarin**用户提供此提示：

右键单击 Xamarin Studio (v.4) 中的项目`'Options'`，然后选择`'iOS Project'`(section `'iPad Deployment info'`)。清除下拉菜单`'Main Interface'`，这应该可以解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T02:02:38.030

它告诉你原因：`[<UIApplication 0xc84bb10> setValue:forUndefinedKey:]`。请注意，它不是说：`[<LoginView 0xc84bb10> setValue:forUndefinedKey:]`. 现在您需要弄清楚是什么试图将消息发送`-setBtnNewAccount:`到 UIApplication 的实例。

看起来委托在某处设置错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-30T08:28:40.787

我在从按钮创建插座时遇到了类似的问题，因此删除了这些按钮并从中创建了插座。XCode 和 Xamarin 之间的同步在某个地方没有完全以正确的方式完成......

对我来说，修复是删除按钮，然后手动搜索和删除设计器文件中的所有引用。

希望这可以帮助...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-18T16:21:54.173

即使在最近构建的 Xamarin Studio (5.9.5) 中，我也遇到了这个问题。“与 Xcode 同步”选项显示为灰色，但显然我在 Tamarin 中的 ViewController xib 文件与 Xcode 不同步。

该修复与 Hutjepower 提到的相同。我在 Xamarin Studio 中搜索了损坏的引用，在 Xamarin 中打开了 xib 文件（右键单击该文件并使用源代码编辑器），然后删除了我通过 Xcode 删除的控件。这解决了这个问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-01T15:45:22.537

我在 Xamarin Studio 5.10.1 上也遇到过这个问题；我最终发现，如果我使用文本编辑器来编辑我的故事板文件并删除

```
<connections></connections> 
```

它为我解决了这个问题。

# android - Android - 通过意图添加日历事件 - 可用性值未更新

> ID：12574453
> 
> 赞同：1
> 
> 时间：2012-09-24T23:44:41.153
> 
> 标签：android, android-intent, calendar

我正在通过传递意图使用 startActivity 创建日历事件。日历事件已成功创建，并且还能够查看我传递的所有信息，但可用性信息除外。无论我发送什么，可用性都保持忙碌状态。难道我做错了什么。我的代码如下。

```
 Intent intent = new Intent(Intent.ACTION_EDIT);
  intent.setType("vnd.android.cursor.item/event");
  intent.putExtra("beginTime", dtstart);
  intent.putExtra("allDay", false);
  intent.putExtra("endTime", dtend);
  intent.putExtra("title", "blah blah");
  intent.putExtra("description", "blah blah and more blah");
  intent.putExtra("availability", 1);
  ctx.startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-18T02:38:15.990

在 Android 4.0 或更高版本中，CalendarContract 可以如下使用，它也可以正确更新可用性......

```
 Intent intent = new Intent(Intent.ACTION_INSERT)
    .setData(Events.CONTENT_URI)
    .putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, beginTime.getTimeInMillis())
    .putExtra(CalendarContract.EXTRA_EVENT_END_TIME, endTime.getTimeInMillis())
    .putExtra(Events.TITLE, "Test Title")
    .putExtra(Events.DESCRIPTION, "Description")
    .putExtra(Events.EVENT_LOCATION, "Location")
    **.putExtra(Events.AVAILABILITY, Events.AVAILABILITY_BUSY)**
    .putExtra(Intent.EXTRA_EMAIL, "test1@example.com,test2@example.com");
     startActivity(intent); 
```

# xcode4 - Iconutil给出错误

> ID：12574454
> 
> 赞同：0
> 
> 时间：2012-09-24T23:44:48.403
> 
> 标签：xcode4

为了响应 iconutil -c icns iconset.iconset，我已经收到此错误 2 天：ImageIO：_CGImagePluginWriteICNS 不支持的图像大小（128 x 128）-缩放因子：2 ImageIO：_CGImagePluginWriteICNS 不支持的图像大小（16 x 16）-缩放因子: 2 iconset.iconset 文件夹有 10 个 .png 文件 icon_512x512@2x.png、icon_512x512.png...以及 256、128、32、16 的版本。生成的 iconset.icns 文件只有 8 个图像。我在 Lion 上运行 xcode 4.5。我已经搜索并搜索了答案。如果我只是删除有问题的 128x128@2x 和 16x16@2x，则消息是这些文件丢失。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:48:45.157

我意识到我的问题的答案：@2x 文件的图像大小应为 2x，例如 icon_128x128.png 的图像大小为 128x128 像素，但 icon_128x128@2x.png 实际上必须具有 256x256 像素的图像大小。当我问这个问题时，我没有意识到这一点，而且我的图像尺寸对于每一对都是相同的。希望这可以帮助某人

# php - PHP重命名数组的键

> ID：12574457
> 
> 赞同：6
> 
> 时间：2012-09-24T23:45:13.190
> 
> 标签：php, arrays, key, key-value

如何重命名数组中的键？

从这个名为 $start_array 的数组开始，

```
[0] => 
      [date] => 2012-05-01
      [revenue] => 100
[1] =>
      [date] => 2012-05-02
      [revenue] => 200 
```

并更改“日期”和“收入”的键，这样你就得到了这个 $final_array：

```
[0] => 
      [x] => 2012-05-01
      [y] => 100
[1] =>
      [x] => 2012-05-02
      [y] => 200 
```

这是我的可怕尝试，它有效但很混乱。

```
$final_array = array();
$max = count($start_array);
for ($j = 0; $j < $max; $j++) {
  $final_array[] = array('x' => $start_array[$j]['dateid'], 'y' => $start_array[$j]['ctrl_version_revenue'] );
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T23:50:42.903

```
foreach( $start_array as &$arr ) {
  $arr["x"] = $arr['date'];
  unset( $arr['date'] );
  $arr['y'] = $arr['revenue'];
  unset( $arr['revenue'] );
}
unset($arr); 
```

试试上面的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T02:50:35.227

你可以使用`array_combine`.

```
$new_arr = array_map(function ($val) {
  return array_combine(array('x', 'y'), $val);
}, $arr); 
```

***[工作演示。](http://codepad.viper-7.com/RhNXS8)***

或者只是使用一个循环：

```
foreach ($arr as &$el) {
  $el = array_combine(array('x', 'y'), $el);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-02T05:26:16.967

**数组键的旧名称是'name'，新名称是'new_name'**

```
$myrow=array('name'=>'Sabuj'); 
$myrow['new_name']=$myrow['name'];
unset($myrow['name']);
print_r($myrow);

Result: Array ( [new_name] => 'Sabuj' ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T02:55:53.693

```
$new_keys = array( 'old1'=>'new1', 'old2'=>'new2', ... );
foreach( $array as $key=>$value ) $newarray[$new_keys[$key]]=$value; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-03-03T05:51:10.013

**你可以在没有任何循环的情况下做到这一点**

像下面

```
$arr= str_replace("date", "x", json_encode($arr));  
$arr= json_decode($arr, true);

$arr= str_replace("revenue", "y", json_encode($arr));  
$arr= json_decode($arr, true); 
```

# android - android opengl es 2 仿真的巨大错误

> ID：12574458
> 
> 赞同：0
> 
> 时间：2012-09-24T23:45:15.540
> 
> 标签：android, opengl-es, emulation, opengl-es-2.0

我已经在这几天了，我一直得到这个......

```
`[2012-09-24 18:31:32 - Emulator] Failed to create Context 0x3005
[2012-09-24 18:31:32 - Emulator] emulator: WARNING: Could not initialize OpenglES 
emulation, using software renderer.
[2012-09-24 18:31:32 - Emulator] could not get wglGetExtensionsStringARB
[2012-09-24 18:31:32 - Emulator] could not get wglGetExtensionsStringARB
[2012-09-24 18:31:32 - Emulator] could not get wglGetExtensionsStringARB
[2012-09-24 18:31:32 - Emulator] could not get wglGetExtensionsStringARB
[2012-09-24 18:31:32 - Emulator] could not get wglGetExtensionsStringARB
[2012-09-24 18:31:32 - Emulator] could not get wglGetExtensionsStringARB
[2012-09-24 18:31:32 - Emulator] could not get wglGetExtensionsStringARB
[2012-09-24 18:31:32 - Emulator] could not get wglGetExtensionsStringARB` 
```

我已经更新到所有最新的工具、图像等。我还将 gpu 仿真检查为是，并尝试查看强制 gpu 强制渲染是否可以修复它。到目前为止什么都没有。其他一切正常。有任何想法吗？哦，我正在使用 Windows 8。这可能是问题所在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T19:16:33.727

针对 API 级别 15 以下的 Android 模拟器[不支持图形模拟](http://developer.android.com/tools/devices/emulator.html#accel-graphics)，其中包括 OpenGL ES 2.0。

尝试以更高版本的 API 为目标，或使用支持图形加速的[Genymotion模拟器之类的东西。](http://www.genymotion.com/)

# python - django 身份验证注销功能是否删除 django_session 表中的会话行？

> ID：12574459
> 
> 赞同：2
> 
> 时间：2012-09-24T23:45:19.150
> 
> 标签：python, django

我正在使用 django 实现一个基本的登录和注销页面。我的登录函数在 db 的 django_session 表中添加了一行。但是，当我注销时，它不会删除会话行。由于会话不再有效并且所有与会话相关的数据都从请求中删除，注销功能不应该也从 django_session 表中删除会话行吗？

这是我的注销功能：

```
@login_required
def logout_student(request):
    logout(request)
    # Redirect to a success page.
    return HttpResponseRedirect('/index/') 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T00:55:14.000

如果您`django_session`在登录时手动添加一行，则在[`django.contrib.auth.logout()`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.logout), [`request.session.flush()`](https://docs.djangoproject.com/en/dev/topics/http/sessions/#django.contrib.sessions.backends.base.SessionBase.flush)) 函数**只会**`session_key`从表中删除与当前会话键具有相同主键的行`django_session`。

`request.session.flush()`用于确保不能从用户的浏览器再次访问之前的会话数据。它基本上做了两件事：

1.  从数据库中删除当前会话数据（或缓存，取决于您为[会话后端](https://docs.djangoproject.com/en/dev/topics/http/sessions/)选择哪一个）。
2.  重新生成在 cookie 中发送回用户的会话密钥值。

Django 源代码`django.contrib.auth.logout()`：

```
def logout(request):
    """
    Removes the authenticated user's ID from the request and flushes their
    session data.
    """
    # Dispatch the signal before the user is logged out so the receivers have a
    # chance to find out *who* logged out.
    user = getattr(request, 'user', None)
    if hasattr(user, 'is_authenticated') and not user.is_authenticated():
        user = None
    user_logged_out.send(sender=user.__class__, request=request, user=user)

    request.session.flush()
    if hasattr(request, 'user'):
        from django.contrib.auth.models import AnonymousUser
        request.user = AnonymousUser() 
```

基于数据库的会话的删除方法：

```
def delete(self, session_key=None):
    if session_key is None:
        if self.session_key is None:
            return
        session_key = self.session_key
    try:
        Session.objects.get(session_key=session_key).delete()
    except Session.DoesNotExist:
        pass 
```

要删除手动添加的行，您可以利用 Django 信号[`django.contrib.auth.signals.user_logged_out`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.django.contrib.auth.signals.user_logged_out)在用户注销时删除行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T23:47:52.903

它不会删除会话行，因此可以在以后审核会话。您必须使用（例如）自定义管理命令和 cron 手动清理行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T00:48:39.917

*   用户注销时会话既不会被删除也不会失效。会话数据（例如用户设置的语言）仍可根据要求提供
*   会话仅在过期或删除（自动或手动）时才变为无效
*   要清理过期的会话，请运行**./manage.py cleanup**

在数据库级别操作会话真的很奇怪。注销时删除或使会话无效对我来说没有意义。我还建议使用 Django 通用[注销视图](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.logout)或[django-registration](https://bitbucket.org/ubernostrum/django-registration)并处理信号中的自定义逻辑（如果有）

# fortran - BLAS 库与 Fortran 77 编译器设置不兼容

> ID：12574464
> 
> 赞同：9
> 
> 时间：2012-09-24T23:45:53.813
> 
> 标签：fortran, octave, gfortran, blas

我正在尝试使用 KDE 桌面在 Ubuntu 12.04 上从源代码安装 Octave-3.6.2 但是当我运行 Octave 配置脚本时出现此错误

```
BLAS library was detected but found incompatible with your Fortran 77 
compiler settings 
```

我按照许多网络搜索的建议使用了，并且我已确保替代系统 F77 文件按照[此](https://stackoverflow.com/questions/8073199/octave-make-command-fails-with-cannot-open-file-debug-h)SO 帖子`./configure F77=gfortran`中的评论移出危害方式。已安装的 BLAS 库是由包管理器安装的库。

错误是什么意思，我该如何补救？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-25T03:23:16.587

尝试安装软件包 liblapack-dev、libblas-dev，如果存在，则安装 libblas-64。虽然不是 Ubuntu，但我遇到了同样的问题，需要安装 fedora fc20 等效包，它们是 blas-devel、blas64-devel、lapack-devel 和 lapack64-devel。获取构建依赖项的标准例程是

```
sudo yum-builddep octave 
```

虽然它安装了大部分依赖项，但在完全配置之前我需要遵循以下内容。这是从 2014 年 10 月 23 日开始更新的几乎从零开始的 Fedora fc20 安装。

```
sudo yum install lapack64-devel lapack64 
sudo yum install gl2ps-devel qrupdate-devel qt-devel qscintilla-devel java-devel 
```

虽然我没有明确列出 blas-devel 和 blas64-devel 包，但它们是作为 libpack 包的依赖项安装的，就像 libpack-devel 和普通 libpack 一样。

我想对于 Ubuntu，它可能是 apt-get。无论哪种方式，这是另一篇讨论早期版本 Ubuntu 的帖子。

[编译所需的 BLAS 和 LAPACK 库](https://stackoverflow.com/questions/8961340/blas-and-lapack-libraries-required-for-compiling?rq=1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-06T19:13:32.513

我通过将 BLAS 移动到 /usr/lib64 解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-14T15:06:47.257

对于 slackware 使用 -libdir=/usr/lib64 重新编译 blas

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-09T16:40:09.353

跑`sudo apt-get build-dep octave`

这将安装 octave 的所有依赖项

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-02T10:35:47.830

我在 openSUSE-12.3_x86-64 上编译 octave-4.0.1 并遇到了这个问题。在此之前，已经安装了 blas lib (libblas3)。然后我安装了 32 位库（libblas3-32bit），没有任何改变。然后我安装了名为“blas-devel”的包，它已经解决了。

该软件包包括以下文件：

```
/usr/lib64/libblas.a
/usr/lib64/libblas.so
/usr/lib64/libblas_pic.a 
```

# objective-c - 状态栏旋转但 UIViewController 不旋转

> ID：12574467
> 
> 赞同：0
> 
> 时间：2012-09-24T23:46:37.583
> 
> 标签：objective-c, ios, uiviewcontroller

我有一个 UIViewController 在第一次推送时会正常旋转（它是应用程序 UINavigationController 的根视图控制器），但在导航控制器弹回它后不会旋转。状态栏旋转，调用 shouldAutoRotateToInterfaceOrientation:（并返回 YES），但视图不旋转，并且不调用 didRotateToInterfaceOrientation:。

有没有人见过这个或知道可能导致它的原因？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:41:09.333

Gah，愚蠢的错误：我用以下行推动了登录控制器：

```
[self.navigationController setViewControllers:[NSArray arrayWithObjects:[[LoginViewController alloc] autorelease],nil] animated:YES]; 
```

其中省略了 init 方法。我纠正了错误和旋转工作。傻我。

# android - 通过 hci_read_rssi() 轮询 RSSI 的正确方法

> ID：12574469
> 
> 赞同：2
> 
> 时间：2012-09-24T23:46:59.943
> 
> 标签：android, bluetooth, rssi

我正在尝试定期轮询 2 个设备（Android 手机和芯片）之间蓝牙连接的 RSSI 值。

我使用NDK访问BlueZ库使用

```
hci_read_rssi(int dd, uint16_t handle, int8_t *rssi, int to) 
```

问题我不知道如何在传递正确的参数方面使用它。使用该功能的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T20:00:34.170

对您来说可能有所不同，但是在 Bluetopia 堆栈中，在我的`GAP_LE_Event_Callback`函数中，当我收到 Connection_Complete （即 GAP 连接）时，我会这样做

```
 case etLE_Connection_Complete:
        ... 
        Word_t Connection_Handle;
        if ( GAP_LE_Query_Connection_Handle(BluetoothStackID, x->Peer_Address,
              &Connection_Handle) == 0) {

            Word_t Connection_HandleResult;
            SByte_t RSSIResult;
            Byte_t StatusResult;

            if (HCI_Read_RSSI(BluetoothStackID,Connection_Handle, &StatusResult,
                &Connection_HandleResult, &RSSIResult) == 0) {
                Display(("RSSI: %x %x %d\r\n",StatusResult,
                       Connection_HandleResult,RSSIResult)); 
```

如果这不起作用，那么您需要手动创建一个 ConnectionHandle，并通过调用一个新连接`HCI_LE_Create_Connection`

# android - Mono for Android - 服务调用时活动崩溃

> ID：12574478
> 
> 赞同：1
> 
> 时间：2012-09-24T23:47:57.147
> 
> 标签：android, android-activity, xamarin.android, streamwriter

我的应用程序有一个 UI（用*Activity*实现）和一个服务（用*IntentService*实现）。该服务用于将数据（同步，使用*NetworkStream.Write*）发送到远程服务器以及将传输状态更新到 UI（使用*广播接收器*方法实现）。

这是我的问题：

*   如果用于 NetworkStream.Write 的缓冲区大小为 11 KB 或更小，则应用程序可以正常工作。

*   但是，如果缓冲区的大小大于 11 KB，例如 20 KB（发送 jpg 图像需要此大小），则服务会继续正常工作（通过日志文件验证），但 UI 消失了（类似于如果按下设备的后退按钮）并且我找不到将其恢复的方法。重要的是要指出，在这种情况下，Activity 不会进入*OnStop()*或*OnDestroy()*状态。

*   起初我认为这是由于服务器延迟导致的一些与*ApplicationNotResponding相关的问题，但 UI 在大约 5 秒后崩溃。*

*   此外，这只发生在硬件版本上。模拟器版本运行良好。

    ```
    // SEND STREAM:

    Byte[] outStream = new Byte[20000];
    // -- Set up TCP connection: --
    TcpClient ClientSock = new TcpClient();
    ClientSock.Connect("myserver.com", 5555);
    NetworkStream serverStream = ClientSock.GetStream();
    serverStream.Write(outStream, 0, outStream.Length);
    serverStream.Flush();
    // . . .

    // RECEIVE STREAM:            
    inStream.Initialize();           // Clears any previous value.
    int nBytesRead = 0;
    nBytesRead = serverStream.Read(inStream, 0, 1024);

    // -- Closing communications socket: --
    ClientSock.Close(); 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T00:25:29.003

首先是一件事：在我给出答案之前，我会评论这个问题以澄清一件事，但不幸的是我还没有足够的声誉。

我要问的是：为什么需要有大于 11k 的缓冲区来发送 JPG 图像？

我在一个（异步）任务中几乎做了同样的事情，图像为 260k，但缓冲区为 10240 字节。工作没有困难。

```
byte[] buffer = new byte[10240];
for (int length = 0; (length = in.read(buffer)) > 0;) {
  outputStream.write(buffer, 0, length);
  outputStream.flush();
  bytesWritten += length;
  progress = (int) ((double) bytesWritten * 100 / totalBytes);
  publishProgress();
}
outputStream.flush(); 
```

我使用这部分从资源或 SD 中读取 JPG 图像并发布到我的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T23:54:43.300

那么您可能想要更改您的应用程序以使用 asynctask 并查看指南：http: [//developer.android.com/training/basics/network-ops/connecting.html](http://developer.android.com/training/basics/network-ops/connecting.html)

> 网络操作可能涉及不可预知的延迟。为防止这导致糟糕的用户体验，请始终在与 UI 不同的线程上执行网络操作。

从 android 4.0 开始，不可能在与 UI 线程相同的线程中执行网络相关任务。也只是为了清楚[http://developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)

> 注意：服务在其宿主进程的主线程中运行——服务不会创建自己的线程，也不会在单独的进程中运行

# php - php curl函数问题

> ID：12574486
> 
> 赞同：0
> 
> 时间：2012-09-24T23:48:42.543
> 
> 标签：php, ispeech

我的代码中的 curl 函数有问题。我的 CURLINFO_HTTP_CODE 总是返回 0，当我使用 curl_error($ch) 它返回“无法到达主机”。我的主机是ispeech，它应该没有问题。这里有人可以帮我吗？非常感谢！

iSpeech.php

```
 class iSpeechBase{
        var $server;
        var $parameters = array("device-type"=>"php-SDK-0.3");

       function setParameter($parameter, $value){
            if ($parameter == "server")
                $this->server = $value;
            else
                $this->parameters["$parameter"] = $value;
        }

        function makeRequest(){
            $ch = curl_init();
            $url=$this->server . "/?" . http_build_query($this->parameters);

            curl_setopt($ch, CURLOPT_URL, $url);
            curl_setopt($ch, CURLOPT_HEADER, 0);
            curl_setopt($ch, CURLOPT_TIMEOUT, 5);

            ob_start();

            echocurl_exec($ch);
            $http_body = ob_get_contents();
            ob_end_clean();

            echo curl_getinfo($ch, CURLINFO_HTTP_CODE); //return 0
            echo curl_error($ch); //return Could not reach host.

            if (curl_getinfo($ch, CURLINFO_HTTP_CODE) != 200)

                if ($this->parameters["action"] == "convert")

                    return array("error" => $http_body);

            return $http_body;
        }
   } 
```

综合-demo.php

```
require_once('ispeech.php');

  $SpeechSynthesizer = new SpeechSynthesizer();
  $SpeechSynthesizer->setParameter("server", "http://api.ispeech.org/api/rest");
  $SpeechSynthesizer->setParameter("apikey", "myapikey");
  $SpeechSynthesizer->setParameter("text", "yes");
  $SpeechSynthesizer->setParameter("format", "wav");
  $SpeechSynthesizer->setParameter("voice", "usenglishfemale");
  $SpeechSynthesizer->setParameter("output", "rest");
  $result = $SpeechSynthesizer->makeRequest(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T23:57:12.483

因此，请不要使用 ob 缓冲区，您可以替换

```
ob_start(); 

echocurl_exec($ch); 
$http_body = ob_get_contents(); 
ob_end_clean(); 
```

和

```
$http_body = curl_exec($ch); 
```

还添加了示例中缺少的 echo 和 curl_exec 之间的空格（尽管这应该会引发致命并停止执行 - 你有自己的错误处理程序吗？）

# c++ - C 库设施标头的命名空间注入不一致

> ID：12574492
> 
> 赞同：1
> 
> 时间：2012-09-24T23:49:49.330
> 
> 标签：c++, c++11, standards, header-files, c++-standard-library

`ptrdiff_t`当我遇到这个“问题”时，我正在使用和阅读 C++11 标准。首先，事实：

类型`ptrdiff_t`（只是一个示例）从标准 C 库头文件中提取`<stddef.h>`到`<cstddef>`（第 18.2/2 节）中。第 17.6.1.2 节告诉我们，从 C 标准库中提取的声明将位于`std`命名空间内：

> 但是，在 C++ 标准库中，声明（在 C 中定义为宏的名称除外）在 namespace 的命名空间范围 (3.3.6) 内`std`。`std`未指定这些名称是否首先在全局命名空间范围内声明，然后通过显式*使用声明*(7.3.3)注入命名空间。

正如它还说的那样，声明可能首先在全局命名空间中声明，然后注入到`std`. 因此，对于我的实现来说，以下编译得很好是有道理的：

```
#include <cstddef>

int main(int argc, const char* argv[])
{
  std::ptrdiff_t x;
  ptrdiff_t y;
  return 0;
} 
```

我的实现（gcc 4.6.3）必须`ptrdiff_t`在全局命名空间中声明，然后将其注入`std`. 但是，如果我编译以下代码，我会收到一个错误（注意`<iostream>`包含）：

```
#include <iostream>

int main(int argc, const char* argv[])
{
  std::ptrdiff_t x;
  ptrdiff_t y;
  return 0;
} 
```

> main.cpp：在函数'int main（int，const char**）'中：
> main.cpp：6：3：错误：'ptrdiff_t'未在此范围内声明
> main.cpp：6：3：注意：建议的替代方案:
> /usr/include/c++/4.6/i686-linux-gnu/./bits/c++config.h:156:28: 注意：'std::ptrdiff_t'</p>

因此，既然`std::ptrdiff_t`是可用的，`<iostream>`就必须`<cstddef>`以某种方式包含（尽管不是必需的）。但是为什么全球版本不像以前那样可用呢？即使它实际上是相同的标头，我是否不能期望这种注入是一致的？这似乎是奇怪的行为。是否发生注入可能未指定，但至少应该是一种方式或另一种方式，而不是两者，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T04:51:11.960

不要依赖一个包含另一个标题的标题，如果您想要在特定标题中声明/定义某些内容，则必须包含它。

对于您给出的示例，使用 g++ 实际上有两个定义`ptrdiff_t`（`size_t`就此而言）。第一个，在`namespace std`，来自`<bits/c++config.h>`。`<stddef.h>`以及来自（等）的全局命名空间中的一个`<cstddef>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-16T21:35:26.883

问题是您没有使用正确的标题。你应该做

```
 #include <cstddef> 
```

反而。但是你使用

```
 #include<iostream> 
```

这间接地定义了“std::ptrdiff_t”。但是，全局“::ptrdiff_t”没有在“iostream”中定义，并且“iostream”没有像你想象的那样包含“cstddef”。相反，“iostream”确实包含“bits/c++config.h”。实际的“std::ptrdiff_t”在该文件中定义。

如果您查看文件“cstddef”的内容，您会发现那里只有两个“有用”的行

顺便说一句，以上讨论适用于 GCC 4.6 和 GCC 4.7。对于 GCC 4.4，“iostream”间接包含“cstddef”，因此 ptrdiff_t 在两个命名空间（std 和全局）中都可用。#包括 #包括

后一行引入了全局“::ptrdiff_t”，前一行定义了 std 命名空间之一。

# wordpress - Wordpress：首页返回 500，所有其他内容都正常

> ID：12574494
> 
> 赞同：0
> 
> 时间：2012-09-24T23:50:01.550
> 
> 标签：wordpress

我似乎找不到导致这个由 wordpress 提供支持的客户网站突然出现问题的原因。除首页外，所有链接都工作并快速加载，首页似乎加载了 1 分钟，然后最终被重定向到[http://www.domain.com/500.phtml](http://www.domain.com/500.phtml)

我试过了：

*   禁用所有插件，问题仍然存在。
*   将 .htaccess 权限更改为 644，然后是 666，不行。

对于其他步骤是否有意义，我有点困惑。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T23:59:11.557

不查看站点文件就很难诊断错误 500。我会检查 wp-config.php 以确保它没有损坏或丢失它应该具有的元素（密钥等）。如果您最近升级到 WP 3.4 + 您的主机需要运行 PHP 5.2.4 或更高版本。以前的 3.3 版本（我认为或者可能是 3.2）需要一个较小的 PHP 版本。如果您的主机不是 PHP 5.2.4，您可能会收到该错误。

[http://wordpress.org/support/topic/internal-error-500-501](http://wordpress.org/support/topic/internal-error-500-501)

# javascript - 从 SVG 调用 javascript 函数

> ID：12574496
> 
> 赞同：0
> 
> 时间：2012-09-24T23:50:12.000
> 
> 标签：javascript, svg, raphael

我在获取 svg 文件和 javascript 文件时遇到问题。他们都在这个 html 文档中提到 - [http://www.trjps.co.uk/image_store_old/button_tests/button_tester_A.html](http://www.trjps.co.uk/image_store_old/button_tests/button_tester_A.html)。我想要一个按钮单击 svg 元素（小圆圈）来触发 js 函数（使用 rapael 的动画）。

我得到了这样的东西来做一个小演示

```
 <path onclick="setAttribute('style','fill:gold'), top.popup()"... /> 
```

但它不适用于这个更复杂的。

我知道很多答案都涵盖了这个主题，但是，我仍然没有成功。欢迎和需要帮助和指点。我可能会在我如何做到这一点时说错了。感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:22:06.310

我让它工作了。这是阻止它

```
window.onload = function() {..(all my raphael javescript)..} 
```

正如 raphael 示例所建议的那样，我的整个 javascript 都包含在这个函数中。我把它拿出来并得到了结果。

我没有做过太多的js，也不知道为什么这很重要，但确实如此。也许我会在适当的时候知道它的重要性，但就目前而言，“做得比完美更好”，因为一家规模庞大的社交媒体公司可能会或可能不会在它的墙上打印出来。感谢您的帮助。

# scala - 将代码片段从命令式转换为函数式

> ID：12574499
> 
> 赞同：2
> 
> 时间：2012-09-24T23:50:43.910
> 
> 标签：scala, functional-programming

我有以下 Scala 片段。为了解决我给定的问题，我“作弊”了一点，并使用了`var`——本质上是一种非最终的、可变的数据类型。它的值在循环的每次迭代中更新。我花了很多时间试图弄清楚如何仅使用递归和不可变数据类型和列表来做到这一点。

原始片段：

```
 def countChange_sort(money: Int, coins: List[Int]): Int =
    if (coins.isEmpty || money < 0)
      0
    else if (coins.tail.isEmpty && money % coins.head != 0) {
      0
    } else if (coins.tail.isEmpty && money % coins.head == 0 || money == 0) {
      1
    } else {
      -- redacted --
    }
} 
```

本质上，有什么基本的技术可以用来消除`i`，尤其是累积`cnt`变量？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T00:24:50.850

有很多不同的方法可以解决函数式的问题。通常，您以与设计命令式算法时不同的方式开始分析问题，因此编写命令式算法然后将其“转换”为函数式算法不会产生非常自然的函数式算法（而且您经常会错过功能风格的许多潜在好处）。但是，如果您是一位经验丰富的命令式程序员，刚开始使用函数式编程，那么您已经掌握了一切，这是开始了解新概念的好方法。因此，这里是您如何以一种相当没有创意的方式（即不提出不同的算法）将您编写的函数“转换”为函数样式的方法。

让我们只考虑`else`表达式，因为其余的都很好。

函数式风格没有循环，所以如果你需要多次运行一段代码（命令式循环的主体），那段代码必须是一个函数。通常该函数是一个简单的非递归函数，并且您调用诸如 map 或 fold 之类的高阶函数来执行实际递归，但我假设您需要练习递归思考并希望明确地看到它。循环条件是根据您在循环主体中手头的数量计算得出的，因此我们只需让循环替换函数根据完全相同的条件递归调用自身：

```
} else {
  var cnt = 0
  var i = 0

  def loop(????) : ??? = {
    if (money - (i * coins.head) > 0) {
      cnt += countChange_sort(money - (i * coins.head), coins.tail)
      i = i + 1
      loop(????)
    }
  }

  loop(????)
  cnt
} 
```

信息仅通过其输入参数或通过其定义传递给函数，并*通过*函数的返回值*从函数传递。*

在创建函数时（在编译时，或在创建闭包时的运行时），通过其定义进入函数的信息是恒定的。`cnt`对于and中包含的信息听起来不是很有用，`i`每次调用都需要不同。所以它们显然需要作为参数传入：

```
} else {
  var cnt = 0
  var i = 0

  def loop(cnt : Int, i : Int) : ??? = {
    if (money - (i * coins.head) > 0) {
      cnt += countChange_sort(money - (i * coins.head), coins.tail)
      i = i + 1
      loop(cnt, i)
    }
  }

  loop(cnt, i)

  cnt
} 
```

但是我们要使用`cnt`函数调用后的最终值。如果信息只**通过** `loop`它的返回值传递，那么我们只能`cnt`通过`loop`返回它来获得最后一个值。这很容易：

```
} else {
  var cnt = 0
  var i = 0

  def loop(cnt : Int, i : Int) : Int = {
    if (money - (i * coins.head) > 0) {
      cnt += countChange_sort(money - (i * coins.head), coins.tail)
      i = i + 1
      loop(cnt, i)
    } else {
      cnt
    }
  }

  cnt = loop(cnt, i)

  cnt
} 
```

`coins`, `money`, 和`countChange_sort`是“通过定义进入函数”的信息示例。`coins`甚至`money`是“变量”，但在定义时它们是恒定的`loop`。如果你想`loop`从 of 的主体中移出`countChange_sort`成为一个独立的函数，你将不得不 make`coins`和`money`额外的参数；它们将从顶级调用 in`countChange_sort`传入，然后在内部的每个递归调用中未经修改地传递`loop`。尽管如此，这仍然会`loop`依赖于`countChange_sort`自身（以及算术运算符`*`和`-`！），因此您永远不会真正摆脱让函数了解不会通过其参数进入它的外部事物。

看起来还不错。但是我们仍然在内部使用赋值语句`loop`，这是不对的。然而，我们所做的只是分配新值`cnt`，`i`然后将它们传递给 的递归调用`loop`，因此可以轻松删除这些分配：

```
} else {
  var cnt = 0
  var i = 0

  def loop(cnt : Int, i : Int) : Int = {
    if (money - (i * coins.head) > 0) {
      loop(cnt + countChange_sort(money - (i * coins.head), coins.tail), i + 1)
    } else {
      cnt
    }
  }

  cnt = loop(cnt, i)

  cnt
} 
```

现在有一些明显的简化，因为除了初始化它们，然后传递它们的初始值，分配给一次然后立即返回它之外，我们`cnt`并没有真正对可变对象做任何事情。所以我们可以（最终）完全摆脱可变的：`i``cnt``cnt``i`

```
} else {
  def loop(cnt : Int, i : Int) : Int = {
    if (money - (i * coins.head) > 0) {
      loop(cnt + countChange_sort(money - (i * coins.head), coins.tail), i + 1)
    } else {
      cnt
    }
  }

  loop(0, 0)
} 
```

我们完成了！看不到副作用！

请注意，我根本没有考虑过您的算法实际上做了什么（我什至没有尝试弄清楚它是否真的正确，尽管我认为它是正确的）。我所做的只是直接应用了信息仅通过其参数进入函数并通过其返回值离开的一般原则。表达式可访问的所有可变状态实际上是表达式的额外隐藏输入和隐藏输出。使它们成为不可变的*显式*输入和输出，然后允许您修剪掉不需要的输入和输出。例如，`i`不需要包含在返回值中，`loop`因为它实际上并不是任何东西都需要的，因此转换为函数式样式已经清楚地表明它纯粹是内部的`loop`，而您必须实际阅读命令式版本的代码才能推断出这一点。

`cnt`并且`i`是所谓的*累加器*。累加器没有什么特别的，它们只是普通的参数；该术语仅指它们的使用方式。基本上，如果您的算法需要随时跟踪某些数据，您可以引入一个累加器参数，以便每个递归调用都可以“转发”到目前为止已经完成的数据。它们通常扮演局部临时可变变量在命令式算法中的角色。

一旦确定没有更多工作要做，递归函数的返回值就是累加器参数的值是很常见的模式，就像`cnt`在这种情况下发生的那样。

Note that these sort of techniques don't necessarily produce *good* functional code, but it's very easy to convert functions implemented using "local" mutable state to functional style using this technique. Pervasive non-local use of mutability, such as is typical of most traditional OO programs, is harder to convert like this; you can do it, but you tend to have to modify the entire program at once, and the resulting functions have large numbers of extra arguments (explicitly exposing all the hidden data-flow that was present in original program).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T06:38:33.537

我没有任何基本技术可以专门更改您拥有的代码。但是，这里有一个解决递归算法的一般技巧：

你能把问题分解成子问题吗？例如，在金钱的例子中，如果你试图用 5 美元达到 10 美元，这类似于用 5 美元达到 5 美元的问题（已经选择了 5 美元一次）。试着画出来并制定规则。您会惊讶于您的解决方案明显正确得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T14:09:21.873

由于没有人回答您的问题，我将尝试给您一些提示：什么是循环？遍历集合的每个元素。停止满足条件

你可以用递归做什么：遍历集合的每个元素。停止满足条件。

开始简单地编写一个没有 vars 的方法来打印集合的每个元素。然后剩下的就变得简单了，看看你的循环和你在做什么。无需直接操作变量（如 i=i + 1），只需将 i + 1 传递给您的方法的递归调用。

高温高压

# ssis - ssis 多列分隔符

> ID：12574504
> 
> 赞同：0
> 
> 时间：2012-09-24T23:51:44.420
> 
> 标签：ssis

大家好，我正在寻找有关数据流任务或批量邮件任务中的平面文件源的帮助。假设我有传入的平面文件，我可以有

a;b;c 或 a|b|c

是否可以为同一个平面文件源分配多个列分隔符？

我一直在寻找如何做到这一点非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:47:18.927

我遇到了一个类似的问题，最终使用了[Swiss File Knife](http://stahlworks.com/dev/swiss-file-knife.html)。只需预处理文件并让它用管道替换逗号，反之亦然。这样你只需要一个导入。

您还可以在平面文件阅读器中使用脚本转换来使用 string.split 方法。不过，我可能会选择 SFK 选项。它更透明一些，但便携性稍差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:52:34.373

平面文件任务不支持这一点。请参阅此类似[问题](https://stackoverflow.com/questions/7969038/set-multiple-row-delimiters-in-flat-file-connection)作为参考。

相反，您可以使用 a`script task`来确定使用哪个分隔符，然后将其转发到具有合适分隔符的平面文件任务。

# facebook-graph-api - 通过实时更新订阅墙贴对象

> ID：12574505
> 
> 赞同：0
> 
> 时间：2012-09-24T23:51:54.090
> 
> 标签：facebook-graph-api, real-time, subscription, updates, posts

在实时更新页面上，他们说我们还不允许**订阅**帖子对象并在未来查看是否有进一步的扩展。实际上，那些文本行已经消失了，我似乎在任何地方都找不到它们，也没有关于这些行被删除的注释。

有人知道这个主题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T04:33:38.867

不，这不受支持。实时更新 API 将订阅类型限制为仅 5 种类型，而帖子不是其中之一。

（也就是说，Facebook 总是很想知道开发人员可能对哪些其他服务感兴趣）

# c - C中的二叉树

> ID：12574506
> 
> 赞同：0
> 
> 时间：2012-09-24T23:51:54.720
> 
> 标签：c, binary-tree

我在用 C 语言构建二叉树时遇到了麻烦。我想能够将书籍添加到树中，将较晚出版年份的书籍添加到左侧，将较早出版年份的书籍添加到右侧。我不断收到运行错误，我不确定为什么。

```
#include <stdio.h>
#include <stdlib.h>

struct book { 
    char* name; 
    int year;
};

typedef struct tnode { 
    struct book *aBook; 
    struct tnode *left; 
    struct tnode *right;
} BTree;

BTree* addBook(BTree* nodeP, char* name, int year){
    if( nodeP == NULL )
    {
        nodeP = (struct tnode*) malloc( sizeof( struct tnode ) );
        (nodeP->aBook)->year = year;
        (nodeP->aBook)->name = name;
        /* initialize the children to null */
        (nodeP)->left = NULL;    
        (nodeP)->right = NULL;  
    }
    else if(year > (nodeP->aBook)->year)
    {
        addBook(&(nodeP)->left,name,year );
    }
    else if(year < (nodeP->aBook)->year)
    {
        addBook(&(nodeP)->right,name,year );
    }
    return nodeP;
}

void freeBTree(BTree* books)
{
    if( books != NULL )
    {
        freeBTree(books->left);
        freeBTree(books->right);
        //free( books );
    }
}

void printBooks(BTree* books){
    if(books != NULL){

    }
}

int main(int argc, char** argv) {
    BTree *head;
    head = addBook(head,"The C Programming Language", 1990);
    /*addBook(head,"JavaScript, The Good Parts",2008);
    addBook(head,"Accelerated C++: Practical Programming by Example", 2000);
    addBook(head,"Scala for the impatient",2012);*/
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T23:56:48.763

您正在尝试访问未初始化的指针`nodeP->aBook`：

```
nodeP = (struct tnode*) malloc( sizeof( struct tnode ) );
(nodeP->aBook)->year = year; 
```

*   您必须使用`malloc`.
*   或者，将数据直接存储在节点中（使用结构，而不是指向结构的指针）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T23:57:12.097

一个问题是您没有初始化为 NULL：

```
BTree *head; 
```

应该

```
BTree *head = NULL; 
```

我建议将编译器警告设置得更高。您的两个递归调用不正确，编译器应该警告它们：

```
addBook(&(nodeP)->left,name,year ); 
```

应该：

```
addBook( nodeP->left,name,year ); 
```

从参数传递的角度来看。但是，这个函数不会像现在这样工作，因为您在节点指针为 NULL 时添加，这意味着您不能将父节点附加到子节点，因为父指针节点已经消失。我认为逻辑应该查看适用的右/左节点，如果为 NULL，则在例程中添加右，否则递归调用，直到找到具有 NULL 右/左指针的节点。

像这样的东西：

```
BTree *makeNode(char *name, int year)
{
   // NOTE: 3 frees required for every node
   BTree *nodeP = malloc( sizeof( struct tnode ) );  // 1
   nodeP->aBook = malloc( sizeof(struct book) );     // 2
   (nodeP->aBook)->year = year;
   (nodeP->aBook)->name = malloc(strlen(name) + 1);  // 3
   strcpy((nodeP->aBook)->name,name);
   /* initialize the children to null */
   nodeP->left = NULL;    
   nodeP->right = NULL;  
   return nodeP;
}

BTree* addBook(BTree* nodeP, char* name, int year)
{
    if ( nodeP == NULL )
    {
        nodeP = makeNode(name,year);
    }
    else if (year > (nodeP->aBook)->year)
    {
       if ( nodeP->left == NULL )
          nodeP->left = makeNode(name,year);
       else
          addBook( nodeP->left,name,year );
    }
    else if(year < (nodeP->aBook)->year)
    {
       if ( nodeP->right == NULL )
          nodeP->right = makeNode(name,year);
       else
          addBook( nodeP->right,name,year );
    }
    return nodeP;
}

void printBooks(BTree* books) 
{
    if (books != NULL) {
       printf("book: %s %d\n",books->aBook->name,books->aBook->year);
       printBooks(books->right);
       printBooks(books->left);
    }
} 
```

# c# - 如何将 CLOB 字段读入 C# 变量？

> ID：12574508
> 
> 赞同：2
> 
> 时间：2012-09-24T23:52:03.383
> 
> 标签：c#, sql, oracle, select

> **可能重复：**
> [为什么在这个 CLOB 字段的 GetOrdinal 函数中出现 OutOfRange 异常？](https://stackoverflow.com/questions/12574341/why-do-i-get-outofrange-exception-in-getordinal-function-of-this-clob-field)

```
I need to read a CLOB field from an ORACLE table int a C# variable of type String. Does anyone know how to accomplish this task? 
```

这就是我所做的，但是在计算字段的 GetOrdinal 时我得到了 IndexOutofRange。提前致谢。

```
 public void ReadFunction(string FName, out string fContent) 
{ 
    OracleCommand command = _connection.CreateCommand(); 
    OracleTransaction transaction = _connection.BeginTransaction(); 
    command.Transaction = transaction; 
    command.CommandText = "SELECT TO_CLOB(TO_NCLOB(FUNCTION_SCRIPT)) FROM IS_FUNCTION where   FNAME=:fName "; 
    command.Parameters.Add("FName", OracleType.NVarChar).Value = FName; 
    OracleDataReader odr = command.ExecuteReader(); 
    int temp = odr.GetOrdinal("FUNCTION_SCRIPT"); 
    OracleLob myLob = odr.GetOracleLob(temp); 
    fContent = (String)myLob.Value; 
    odr.close(); 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T12:58:35.653

这是获取 Blob 的代码，然后您应该按照您需要的方式将其转换为字符串。我不知道你需要的格式。

```
 // create and open connection
  // change for your environment
  string connStr = "User Id=pm; Password=pm; Data Source=orcllx; Pooling=false";
  OracleConnection con = new OracleConnection(connStr);
  try
  {
    con.Open();
  }
  catch (OracleException ex)
  {
    MessageBox.Show(ex.Message);
  }

  // statement to get a blob
  string sql = "select ad_composite from print_media where product_id=3106 and
               ad_id=13001";

  // create command object
  // InitialLOBFetchSize
  //  defaults to 0
  OracleCommand cmd = new OracleCommand(sql, con);

  cmd.InitialLOBFetchSize = 8192;

  // create a datareader
  OracleDataReader dr = cmd.ExecuteReader();

  // read the single row result
  try
  {
    dr.Read();
  }
  catch (OracleException ex)
  {
    MessageBox.Show(ex.Message);
  }

  // use typed accessor to retrieve the blob
  OracleBlob blob = dr.GetOracleBlob(0);

  // create a memory stream from the blob
  MemoryStream ms = new MemoryStream(blob.Value);

  // set the image property equal to a bitmap
  // created from the memory stream
  pictureBox1.Image = new Bitmap(ms); 
```

# r - 在R中按名称属性获取列表的值

> ID：12574509
> 
> 赞同：0
> 
> 时间：2012-09-24T23:52:14.210
> 
> 标签：r

```
contrast=list("1"="profit")
input=readline("please input")
please input1
input
[1] "1"
class(input)
[1] "character"
contrast[[input]]
[1] "profit"
contrast$"1"
[1] "profit"
contrast$input
NULL 
```

为什么 `contrast$input` 不等于 `contrast$"1"`？
输入的值为“1”，类也是字符。

```
eval(input)
[1] "1"
contrast$(eval(input))
Error: unexpected '(' in "contrast$("
contrast$eval(input)
Error: attempt to apply non-function
eval(paste(input))
[1] "1"
class(eval(paste(input)))
[1] "character"
contrast$eval(paste(input))
Error: attempt to apply non-function
contrast$(eval(paste(input)))
Error: unexpected '(' in "contrast$(" 
```

有没有办法通过 contrast$input 获取值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T00:41:08.440

这是不可能的。从文档（`?Extract`）：

> “[[ 和 $ 都选择列表的单个元素。主要区别在于 $ 不允许计算索引，而 [[ 允许。x$name 等效于 x[[“name”，exact = FALSE]]”

通常，`$`它旨在用于交互式使用，但对于编程（脚本、函数等），您应该使用`[[`.

# c++ - 我可以在 C++ 中使用哪些正则表达式，使用正则表达式来解析分隔符、运算符、标识符和实数？

> ID：12574514
> 
> 赞同：1
> 
> 时间：2012-09-24T23:53:17.413
> 
> 标签：c++, regex, expression, lexical

```
 for(int k = 0 ; k < 5.25;k++)
     {
      cout<<"hello"<<endl;
      }
    return 0; 
```

我正在编写一个用于对包含 c++ 代码的简单文本文件进行词法分析的 c++ 程序。例如

然后，程序从文件中提取代码后，将输出到控制台：

```
 for: keyword
     (: separator
     int: keyword
     k: identifier
     =: operator
     0: integer
     ;: separator
     k: identifier
     <: operator
     5.25: real
     and so forth.
    I already have "(\\w+)" for words, "(\\d+)" for integers, however I don't
    know how to write any of the rest. 
```

为了让您了解我的正则表达式的实际代码是什么样的，这里是。

```
 void lexical_integer(string seq)
     {

regex digits("(\\d+)");
regex_iterator<string::iterator> itd(seq.begin(), seq.end(), digits);
regex_iterator<string::iterator> end;

for (; itd != end; ++itd)
{
    cout << itd->str() <<" " <<" integer"<< endl;
}
     } 
```

我正在寻找可以在 c++ 中与正则表达式一起使用的正则表达式，所以单词："(\w+)" integers:"(\d+)" separators: ? 运营商：？实数：?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T04:00:37.820

正则表达式将很难正确处理，因为在标记化时需要维护一些状态/上下文。最好是逐个字符地读取输入并手动构建标记。

以下是适用于 C 的内容（稍后将详细介绍 C++）：

如果你看到`/`了，那么你需要向前看，如果有另一个`/`，你会跳过所有内容，直到行尾。

如果`/`紧随其后`*`，则跳过所有内容，直到另一个`*`，如果下一个`*`char 不是`/`，则返回跳过直到`*`，当您将开头`/*`与结尾匹配时结束`*/`。

有了类似的东西，你会跳过所有的评论。

如果`/`后面没有`/`or `*`，则需要另外检查是否跟上`=`来区分`/`and `/=`。

如果您看到其中任何一个，它就是一个标记：`,;?:()[]{}`。

如果你看到`!`你需要向前看，因为它可以是`!`或`!=`。
如果你看到`*`你需要向前看，因为它可以是`*`或`*=`。
如果你看到`%`你需要向前看，因为它可以是`%`或`%=`。
如果你看到`^`你需要向前看，因为它可以是`^`或`^=`。
如果你看到`~`你需要向前看，因为它可以是`~`或`~=`。

如果你看到`+`你需要向前看，因为它可以是`+`or`++`或`+=`。

如果你看到`-`你需要向前看，因为它可以是`-`or`--`或`-=`or `->`。

如果你看到`<`你需要向前看，因为它可以是`<`or`<=`或`<<`or `<<=`。
如果你看到`>`你需要向前看，因为它可以是`>`or`>=`或`>>`or `>>=`。

如果你看到`&`你需要向前看，因为它可以是`&`or`&&`或`&=`。
如果你看到`|`你需要向前看，因为它可以是`|`or`||`或`|=`。

如果您看到`L`（或小写`l`），则需要向前看，因为它可以以文字字符或字符串常量`L'c'`或`L"string"`. 否则，它是某个标识符的开始。

如果您看到`_`ASCII 字母 from `a`to`z`或 from `A`to `Z`，它是某个标识符的开始。在此之后可以跟随任意数量的下划线、字母或十进制数字。以这种方式解析的标识符必须额外检查一组保留关键字，例如`int`, `const`, `if`,`switch`等。

如果从`0`to看到十进制数字`9`，则有多种选择：八进制整数常量、十进制整数常量、十六进制整数常量、浮点常量。您应该能够弄清楚如何与上述类似地解析它们。请记住，常量可以以`U`、`UL`、`ULL`、`L`和为`LL`后缀`F`。

如果你看到`.`你需要向前看，因为它可以是`.`or`...`或类似的东西`.5`。

我不打算描述文字字符或字符串常量的解析和标记化，内部还有一些更多的逻辑，包括转义序列等等。

现在，在 C++ 中，您必须额外解析以下内容：（解析`::`扩展`:`）、`.*`（`.`解析扩展）、`->*`（解析扩展`-`）和更多保留字（例如`new`,`virtual`等以及奇怪的`and`,`bitor`和`not_eq`）。

C++ 中有一个惊喜。现在允许模板尖括号放在一起，中间没有任何空格：

```
X<Y<Z> > 
```

现在可以合法地写成：

```
X<Y<Z>> 
```

并且解析器必须对这个模板业务有足够的了解才能弄清楚最后一个`>>`是两个独立`>`的。

还有一些与预处理器相关的标记（例如`#`and `##`, `include`, `ifdef`, `if`, `undef`, 等）和丑陋的三元组序列。而且，当然，还有与`\`.

这是一个有趣的小（或不是那么小）项目，您可以轻松完成，特别是如果您限制可接受的输入种类。

无论如何，您确实需要在此过程中实现一些状态机，无论它们多么简单（而且大多数都会很简单）。

# d3.js - IE9 检测到不同于 Chrome/Firefox 的 z-index 事件 - 如何修复？

> ID：12574516
> 
> 赞同：4
> 
> 时间：2012-09-24T23:53:38.673
> 
> 标签：d3.js, svg, canvas, z-index, dom-events

我正在构建一个几乎所有客户端 Javascript 的交互式可视化应用程序，请参见此处：

[http://korhal.andrewmao.net:9294/#/classify/APH10154043](http://korhal.andrewmao.net:9294/#/classify/APH10154043)

尝试以下控件：

*   鼠标滚轮：缩放
*   拖动空白区域：平移
*   拖动底部区域或手柄：平移/缩放
*   单击一次，然后再次单击：绘制一个框
*   拖动框：移动框
*   拖动框的边缘：调整大小

底层机制是一个覆盖在画布上的 SVG。画布有`z-index`0 和 SVG `z-index`1 - 随意检查 DOM。在 Chrome/Firefox 上一切正常。

问题是，在 IE9 中，画布似乎通过 SVG 接收点击事件，即使 z-index 较低。您可以判断，因为鼠标滚轮/单击/拖动操作在主图表区域不起作用，但它们在边缘区域起作用，因为 SVG 比画布稍大，它会在那里接收事件。例如，尝试在轴区域或底部滚动鼠标。

玩了一会儿之后，我想我看到了病态。我制作了一个页面版本，允许在画布（图形）区域之外绘制框，但仍在 SVG 内部。然后我可以执行以下操作（在 IE 中）：

1.  在轴区域（画布外）绘制一个框
2.  将其拖到主要区域（在画布上）
3.  将鼠标悬停在框上并使用鼠标滚轮 - 现在缩放事件被 SVG 拾取。没有框的鼠标滚轮导致事件进入画布（消失。）

所以看起来正在发生的事情是，当鼠标下有一个明确的 SVG 对象时，SVG 只会拾取鼠标事件，否则它会被传递到画布，并且只在 Internet Explorer 中。

解决这个问题的一个明显方法是在整个 SVG 区域上制作一个透明的矩形，但这似乎很愚蠢。另外，也许我做错了什么，在使用 Chrome 时已修补但在 IE 中已损坏。有没有人有什么建议？

注意：一个（已删除）答案建议将整个 SVG 区域包装在一个`<g>`元素中并应用于`pointer-events: all`它。然而，这并没有奏效。我什至不认为这是必要的，因为在整个 SVG 区域中都可以很好地检测到指针事件，除了有画布的地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T05:06:36.137

如果您想防止对 SVG 中透明区域的点击进入底层 Canvas，那么我将使用（稍作修改）“愚蠢”解决方案：在 SVG 内容*下方放置一个透明矩形。*就像是：

```
<svg>
  <rect width="100%" height="100%" pointer-events="all" fill="none"/>
  <!-- … everything else … -->
</svg> 
```

With fill=none and pointer-events=all, the rect won't be visible, but it will still receive mouse events and prevent those from going through to the underlying Canvas. So, if you put a click listener on the SVG, the SVG would still receive the clicks rather than the Canvas. (You can apply this technique to a G element as well, though you'll probably want to position the rect explicitly rather than using 100% width and height.)

# ruby-on-rails - 我应该在哪里将用户名/密码放在 Rails 应用程序中的 http 基本身份验证

> ID：12574519
> 
> 赞同：1
> 
> 时间：2012-09-24T23:53:45.957
> 
> 标签：ruby-on-rails, authentication, basic-authentication

我将在 Rails 应用程序中使用 http-basic-authentication。我观看了这个 railscast 来弄清楚如何做到这一点：

[http://railscasts.com/episodes/82-http-basic-authentication](http://railscasts.com/episodes/82-http-basic-authentication)

在视频中，他说不要将用户名和密码直接放在代码中。那我应该把它们放在哪里？

我正在使用导轨 3.1.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T00:43:38.447

您想将它们移动到配置文件中。[查看](http://railscasts.com/episodes/85-yaml-configuration-file)有关“应用程序配置”的RailsCast 。

# javascript - Onchange 事件在选择框中不起作用

> ID：12574520
> 
> 赞同：1
> 
> 时间：2012-09-24T23:53:46.353
> 
> 标签：javascript, onchange

我`dropdownlist`在 joomla 中添加了一个 using seblod 扩展。但是javascript不适用于此。

```
<html>
    <head>
        <script type="text/javascript">
            alert('onload');
            document.getElementById('countrynames').addEventListener('change',function(){
                alert('Hello');
            });
        </script>
    </head>

    <body>
        <select size="1" class="inputbox select " name="countrynames" id="countrynames">
            <option selected="selected" value="">- Select an option -</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T23:57:23.403

将您的脚本移动到页面底部 - 在您将侦听器绑定到的 DOM 元素之后。

[**演示**](http://jsfiddle.net/mA8NZ/)

```
<select size="1" class="inputbox select " name="countrynames" id="countrynames">
<option selected="selected" value="">- Select an option -</option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>
</select> 
```

JS：

```
<script type="text/javascript">
    alert('onload');
    document.getElementById('countrynames').addEventListener('change',function(){
         alert('Hello');
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T00:24:46.113

您的脚本在创建选择元素之前执行。这是修复：

```
<html>
    <head>
        <script type="text/javascript">
            window.onload = function(){
                alert('onload');
                document.getElementById('countrynames').addEventListener('change',function(){
                    alert('Hello');
                });
            }
        </script>
    </head>

    <body>
        <select size="1" class="inputbox select " name="countrynames" id="countrynames">
            <option selected="selected" value="">- Select an option -</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T00:25:08.083

您可以尝试将代码放入将由`<body>`标签的`onload`方法调用的函数中：

**你的 JS 脚本：**

```
<head>
    <script type="text/javascript">

        function mload() {
            alert('onload');
            document.getElementById('countrynames').addEventListener('change',function()      {alert('Hello');

            });
        }
    </script>
</head> 
```

**在您的`<body>`添加中：**

```
<body onload="javascript: mload()"> 
```

希望这可以帮助。让我知道这是否适合您。

# php - Url 验证我的脚本

> ID：12574524
> 
> 赞同：2
> 
> 时间：2012-09-24T23:53:49.893
> 
> 标签：php, forms, validation, url

我对正确验证我的 URL 感到非常困惑。我已经尝试了几个选项，但我无法做到正确。有人可以查看我的代码并告诉我我做错了什么吗？

```
$url=filter_input(INPUT_GET, 'url', FILTER_VALIDATE_URL); 
if (!$url) {
    echo The url address is not valid
}

if(strpos($url,'http://')===false)
    $url='http://'.$url;
$query="INSERT INTO `aa_aa`.`article` VALUES ('', '".$url."', '".$_POST['description']."', '".$_POST['type']."',NOW());";
$result=mysql_query($query);
if(!$result)
    // echo 'Error While Inserting Article!';
    echo $query;
else
    header('Location: http://aa.aa'); 
```

**编辑** 对不起埃里克在这里。@Brad 我的朋友帮助我编写了所有脚本，所以我不太了解我使用它的风险。

```
 SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
 SET time_zone = "+00:00";

 /*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
 /*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
 /*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
 /*!40101 SET NAMES utf8 */;

 --
 -- Database: 
 --

 -- --------------------------------------------------------

 -- Table structure for table `article`
 --

 CREATE TABLE IF NOT EXISTS `article` (
   `id` int(11) NOT NULL AUTO_INCREMENT,
   `url` varchar(100) NOT NULL,
   `description` text NOT NULL,
   `type` varchar(40) NOT NULL,
   `title` varchar(80) NOT NULL,
   `time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
   PRIMARY KEY (`id`),
   UNIQUE KEY `id` (`id`)
 ) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=137 ;

 /*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
 /*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
 /*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:18:17.607

几件事：

```
$url=filter_input(INPUT_GET, 'url', FILTER_VALIDATE_URL); 
```

这是**极好**的。使用`filter_input()`是最佳实践。

```
if (!$url) {
    echo The url address is not valid
} 
```

这个位有几个问题：

1.  养成使用`$foo === FALSE`而不是`!$foo`专门检查 value的习惯`FALSE`，除非要检查的值保证是布尔值。在这种特殊情况下，我不相信有任何有效的 URL 可以被强制转换为 boolean `FALSE`，所以你*可能是*安全的，但养成这个习惯仍然是件好事。
2.  您要回显的字符串缺少引号和终止分号，因此这些会产生语法错误。
3.  没有什么能阻止脚本继续。这意味着无效的 URL 仍在进入您的数据库。您应该在`exit;`之后使用`echo`，或者重组您的逻辑，以便您的错误条件实际上可以防止添加无效 URL 并继续执行脚本。

    if(strpos($url,'http://')===false) $url='http://'.$url;

这里还有几件事：

1.  `{}`始终在代码块周围使用花括号。
2.  `FILTER_VALIDATE_URL`不会验证没有方案的 URL。这意味着这段代码是多余的，应该被删除，因为任何通过`filter_input()`调用的 URL 都保证有一个方案（例如`http://`）。
3.  通过仅检查`http://`，您没有考虑使用其他方案的 URL，例如`https://`. 不过，这没什么大不了的，因为正如我在上面指出的那样，无论如何都应该删除这个代码块，这要感谢`FILTER_VALIDATE_URL`您为您处理这一切。

    $query="INSERT INTO `aa_aa`. `article`VALUES ('', '".$url."', '".$_POST['description']."', '".$_POST['type']."',NOW ());";

这对 SQL 注入很开放。永远不要将用户输入直接嵌入到您的查询字符串中。尽可能使用参数绑定和准备好的语句。由于您使用的是`Mysql`扩展程序，因此这是不可能的，您最好的选择是使用[`mysql_real_escape_string()`](http://php.net/manual/en/function.mysql-real-escape-string.php).

```
$result=mysql_query($query); 
```

该`Mysql`扩展已弃用。您应该使用[`PDO`](http://php.net/manual/en/book.pdo.php)or[`Mysqli`](http://php.net/manual/en/book.mysqli.php)代替。

```
if(!$result)
    // echo 'Error While Inserting Article!';
    echo $query;
else
    header('Location: http://aa.aa'); 
```

`{}`同样，始终在代码块周围使用花括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T00:32:04.223

我不知道这是否完全是您的错误，但根据您的表格布局，您需要更改 sql 查询

```
"INSERT INTO `aa_aa`.`article` VALUES ('', '".$url."', '".$_POST['description']."', '".$_POST['type']."',NOW());" 
```

至

```
"INSERT INTO aa_aa.article 
  (url,description,type,title,time) 
VALUES 
  ('". mysql_real_escape_string($url). "', 
   '". mysql_real_escape_string($_POST['description']). "', 
   '". mysql_real_escape_string($_POST['type']). "', 
   '". mysql_real_escape_string($_POST['title']). "',
   NOW())" 
```

请注意，我弥补了它，`$_POST['title']`因为它在原始查询中丢失但出现在表创建脚本中。此外，您确实必须使用`mysql_real_escape_string`才能获得一定程度的安全性。理想情况下，您会想要使用 PDO。

# ruby-on-rails - 没有要加载的文件：小马（宝石路径）

> ID：12574526
> 
> 赞同：1
> 
> 时间：2012-09-24T23:54:14.237
> 
> 标签：ruby-on-rails, email, pony

在 Windows 7、Rail 3.2.8 中工作。好像我在某处缺少配置步骤。

试图通过我的 environment.rb 文件加载 Pony.options。

environment.rb 包含：

```
require "rubygems"
require "pony" 
```

但是在启动 Rails 服务器后出现此错误：

```
no such file to load -- pony (LoadError) 
```

我尝试根据从“宝石环境”中学到的知识给出相对路径...

```
require "./gems/pony-1.4" 
```

并且

```
require "./gems/pony-1.4/lib/pony.rb" 
```

无济于事。在花了几个小时试图让 ActionMailer 工作之后，我找到了 Pony 作为替代方案，但到目前为止我什至无法加载它。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:22:36.480

也许你应该检查你是否有多个 ruby​​ 安装。我在在 CHEF 中声明为客户端的机器上安装 Ruby 时遇到了同样的问题：chef 安装了自己的 ruby​​ 和库，即使我的脚本能够加载小马，它在由 CHEF 执行时也没有。

检查您是否没有在某处安装任何其他“gem”命令，并使用它来“gem install pony”。

# javascript - 移动 XUL 窗口

> ID：12574532
> 
> 赞同：0
> 
> 时间：2012-09-24T23:55:18.110
> 
> 标签：javascript, firefox, xul

我正在开发一个基于 Firefox 的应用程序，我需要构建一个应用程序内密码管理器。我打算填充一次并将其隐藏在窗框外的视图中，并在需要时将其放入框架中。现在，我已经阅读了应用于 moveTo 的规则，即

“您不能移动不是由 window.open 创建的窗口或选项卡。

当窗口或选项卡位于具有多个选项卡的窗口中时，您无法移动它。”

我想知道该规则是否有任何例外？我可以完全访问 chrome，所以我想知道是否有一些更底层的方法可以在那里实现 moveTo 表单？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:12:40.930

的限制`window.moveTo()`不适用于以系统权限运行的代码。我只是尝试`top.moveTo(-1000, 0)`在错误控制台中输入 - 它将窗口移出屏幕，这是不允许非特权代码执行的操作。尽管如此，据我所知，在屏幕外打开窗口是不可能的（但是`load`当窗口仍然不可见时，您可以在事件处理程序中移动它）。此外，任务管理器仍然显示该窗口 - 可以 Alt-Tab 到它，然后按 Alt-Space 并从该系统菜单中选择“移动”（在 Windows 上）。

# javascript - getCurrentPosition 在 iOS 6 上的 PhoneGap 1.3 中几乎总是失败

> ID：12574533
> 
> 赞同：4
> 
> 时间：2012-09-24T23:55:39.177
> 
> 标签：javascript, html, cordova, geolocation

我有一个现有的 PhoneGap 1.3 应用程序，它执行一些在 iOS 4 和 5 中运行良好的地理定位。在 iOS 6 中，getCurrentPosition 几乎总是触发失败回调。失败后，额外的 getCurrentPosition 调用不会触发成功或失败回调。我已将应用程序简化为以下代码，它的行为与我的完整应用程序相同。

```
document.addEventListener("deviceready", function() {
  console.log('deviceready!!!');
  successCallback = function() {
    console.log('success!!!');
  };
  failureCallback = function() {
    console.log('failure!!!');
    navigator.geolocation.getCurrentPosition(function() { console.log('success 2'); }, function() { console.log('failure 2'); });
  };
  navigator.geolocation.getCurrentPosition(successCallback, failureCallback);
}, false); 
```

当它失败时，这就是我在日志中得到的：

```
2012-09-24 16:26:46.576 MyAppName[7250:16703] [INFO] deviceready!!!
2012-09-24 16:26:56.582 MyAppName[7250:16703] [INFO] failure!!! 
```

而已。

关于去哪里的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:20:36.243

答案：将PhoneGap.plist 中的EnableLocation 设置为NO。显然，将其设置为 YES 会导致在 iOS 6 中运行的 PhoneGap 应用程序出现内存问题。已实施修复，但截至目前，我认为它不在 PhoneGap 官方版本中。FWIW，我找不到真正知道 EnableLocation 做什么的人。

# html - 为什么不使用逗号在长字符串上分词？

> ID：12574538
> 
> 赞同：12
> 
> 时间：2012-09-24T23:56:55.240
> 
> 标签：html, css

我有一个很长的逗号分隔字符串，我正在尝试使用 css 样式 word-wrap:break word，但它似乎不适用于没有空格的字符串。这是预期的吗？

我的表如下所示：

```
<table class="table table-striped" style="margin-top:20px;background-color:#f2f2f2;">
  <tbody>
    <tr>
      <td width="150px" valign="top" style="white-space:nowrap;"><b>Favorite Activities:</b></td>
      <td width="50px" style="word-wrap:break-word;">some,really,really,long,long,string,with,out,any,spaces,just,a,comma,delimited,list</td>
    </tr>
  </tbody>
</table> 
```

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-25T00:06:55.123

`word-wrap:break-word;`仍处于试验阶段，因此不同的浏览器可能支持或不支持。

如果可以，请在逗号后插入一个零宽度空格。它是 Unicode 或`&#8203;`HTML 中的 U+200B。浏览器将根据需要在零宽度空间处分解字符串。您可以在生成 HTML 的任何代码中执行此操作，或者编写一些 javascript 来自动插入字符。

另见[维基百科](http://en.wikipedia.org/wiki/Zero-width_space)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T00:19:04.370

我为他的解决方法加上了一个迈克尔的答案。

但是，我已经在一些浏览器（最近版本的 safari、ff、chrome）上测试了 word-wrap 属性，它似乎已经很稳定（我刚刚读到它也适用于最新的 IE 版本）。在您的示例 Paul 中，似乎令人不安的是在表格单元格中使用它（以及任何带有显示的东西：表格单元格）。例如，在一个 div（带有 display: 块）中，它工作得非常好。

看看这个小提琴。搞砸它，你会意识到同样的事情：http: [//jsfiddle.net/joplomacedo/DQmJB/](http://jsfiddle.net/joplomacedo/DQmJB/)

**编辑：我刚刚发现这个网站上一个相当流行的**[问题](https://stackoverflow.com/questions/1258416/word-wrap-in-a-html-table)
已经回答了这个问题。问题确实来自它在表格内使用。建议的解决方法是将表格布局设置为固定并为表格元素提供特定宽度：http: [//jsfiddle.net/joplomacedo/DQmJB/3/](http://jsfiddle.net/joplomacedo/DQmJB/3/)

如果您可以为表格添加宽度，那么这可能是一个不错的方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-05T08:11:01.110

这是一个关于如何做到这一点的快速 jQuery 版本。

```
$('.table-striped td').html($('.table-striped td').html().replace(/,/g , ',&#8203;')); 
```

# php - 如何查看 POSTDATA 的写入位置？

> ID：12574539
> 
> 赞同：1
> 
> 时间：2012-09-24T23:56:58.323
> 
> 标签：php, security, post

我正在对网站进行安全测试。我的问题是您是否可以查看 POSTDATA 的写入位置，如果可以，如何查看？

例如，一个站点可能将其作为 post.php：

```
 $handle = fopen("filename.txt", "a");
   foreach($_POST as $variable => $value) {
   fwrite($handle, $variable);
   fwrite($handle, "=");
   fwrite($handle, $value);
   fwrite($handle, "\r\n"); 
```

我试图查看的是 txt 文件的名称。在这种情况下，当然是文件名。但是，我需要先查看 php，才能找到 txt 文件名。在我正在测试的网站上，我不知道 txt 文件的名称。因为 txt 文件的名称是我想要找到的。

我尝试在终端中执行 Curl -O sitename.com/postscript.php ，但是它返回 302。

怎么能找到tx​​t文件的名字？（使用任何方法）

非常感谢所有帮助。

更新：我确定 postdata 被保存到根目录上的 php 文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:04:19.250

我相当肯定你找不到文本文件。但是，您可以跟踪 POST 请求并查看哪些数据被发送到哪里。在 Chrome 开发者工具的网络标签中查看。

您会注意到，您可以看到页面在哪里发布要处理的数据，但它无法知道处理文件对数据做了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T00:01:46.637

你不能。

你怎么知道 POST 数据甚至被写入文件（而不是插入到数据库、通过电子邮件发送或丢弃），除非你有 PHP 源代码，否则无法知道它是在哪里写入的，甚至不知道它正在被写入文件。

# powershell - Powershell：使用多个文件的 sqlcmd 错误处理

> ID：12574546
> 
> 赞同：0
> 
> 时间：2012-09-24T23:58:18.380
> 
> 标签：powershell, sqlcmd

我们有多个 sql 文件的文件夹。如何捕获特定文件的错误并记录该文件名。

我们正在使用以下脚本来执行 sqlcmd。

```
$ServerName=$args[0]
$DatabaseName=$args[1]
$UserName=$args[2]
$Passcode=$args[3]
$FolderPath=$args[4]
$errorpath=$args[5]

foreach ($f in Get-ChildItem -path  $FolderPath -Filter *.sql | sort-object) {
    $fileCurrent = $f.fullname
     try { 
         invoke-sqlcmd -ServerInstance $ServerName -Database $DatabaseName -U  $UserName  -P $Passcode -InputFile $f.fullname 
}
catch {
   $_ | Out-File $errorpath -Append
} 
```

}

我们在那个文件夹中有 100 个文件，两个文件出错了，我们要记录错误和文件名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T00:08:36.347

```
try {
  ...
} catch {
  "{0}: {1}" -f ($fileCurrent, $_) | Out-File $errorpath -Append
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:37:40.340

如果您没有点击 catch 块，那是因为您遇到了“非终止”错误。非终止错误不会触发 catch 块。

要强制您的错误终止，您可以传递`-ErrorAction 1`到`Invoke-SQLCmd`循环之前或之前， set `$errorActionPreference = 'Stop'`。

通过此更改，您的 catch 块现在应该在`Invoke-SQLCmd`失败时触发。

# c# - 在 C# 中解决无限递归

> ID：12574548
> 
> 赞同：1
> 
> 时间：2012-09-24T23:58:40.563
> 
> 标签：c#, recursion, stack-overflow, callstack

我知道我的代码中存在无限递归问题，堆栈溢出。我只是不知道如何修复它，将不胜感激。

```
public Point WorldToMapCell(Point worldPoint)
{
    return WorldToMapCell(new Point((int)worldPoint.X, (int)worldPoint.Y));
}

public MapCell GetCellAtWorldPoint(Point worldPoint)
{
    Point mapPoint = WorldToMapCell(worldPoint);
    return Rows[mapPoint.Y].Columns[mapPoint.X];
}

public MapCell GetCellAtWorldPoint(Vector2 worldPoint)
{
    return GetCellAtWorldPoint(new Point((int)worldPoint.X, (int)worldPoint.Y));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T00:01:12.600

当您有一个函数直接或间接地重复调用自身而没有任何机会停止这样做时，就会发生无限递归（以及由此产生的堆栈溢出）。你的第一个函数，`WorldToMapCell`无条件地调用自己，导致这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T00:05:29.060

为了使递归起作用，您的方法必须有一个基本案例。否则会陷入无限循环调用自身。

考虑计算一个数的阶乘的情况：

```
public int factorial(int x) {
    if (x == 0)
        return 1;
    else 
        return x * factorial(x - 1); 
```

为了使递归起作用，阶乘方法接近基本情况，其中 x = 0。在您的方法中，您没有对基本情况采取任何步骤，因此，您的方法将继续永远调用自己。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T00:41:45.003

```
public Point WorldToMapCell(Point worldPoint)
{
    return WorldToMapCell(new Point((int)worldPoint.X, (int)worldPoint.Y));
} 
```

此方法本身将无限递归。（它一遍又一遍地调用自己）。

据我所知，这个方法应该返回一个带有 worldpoint 参数坐标的新点，如果是这样的话，它应该如下所示：

```
public Point WorldToMapCell(Point worldPoint)
{
    return new Point((int)worldPoint.X, (int)worldPoint.Y);
} 
```

您不需要调用该方法，而是直接返回新点。

# javascript - 如何在没有jquery的情况下检查跨浏览器的脚本元素加载事件

> ID：12574549
> 
> 赞同：2
> 
> 时间：2012-09-24T23:58:46.497
> 
> 标签：javascript, jsonp

我必须做跨域ajax，所以我尝试了jsonp。

然后我将不得不`script`动态地将元素添加到页面中，但是我无法检查它的状态。

在 firefox/chrome/ie8+ 我可以使用

```
script.onLoad=function(){}
script.onError=function(){} 
```

我也试过

```
script.onreadystatechange=function(){} 
```

在即<8。

但它不适用于ie<8。

如何让它发挥作用？

顺便说一句，我想使用本机 javascript 来制作它，所以不要告诉我使用 jQuery 或其他任何东西。

* * *

更新：

事实上，我从服务器请求的脚本不是一个库，它只是一行 javascript 代码（jsonp）。所以我不能用定时器来检查。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T00:36:26.137

查看[yepnope.js](http://yepnopejs.com/)，它同时使用两者`onload`，`onreadystatechange`但它*也*使用超时循环来检查`readystate`脚本元素的属性，[请参见此处](https://github.com/SlexAxton/yepnope.js/blob/master/yepnope.js#L76-119)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T00:37:51.800

对于 IE，考虑检查负载是否发生的替代方法，例如在您的脚本文件中添加该行

```
script_myScriptUniqueName_loaded = true; 
```

然后在动态添加中，如果`script.onload`不存在`null`（在设置回调之前）用于`window.setInterval`检查是否存在`script_myScriptUniqueName_loaded`，超时抛出错误，如果存在则调用回调。
完成后记得`window.clearInterval`做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T00:38:31.777

脚本元素的`load`事件是在 HTML5 中引入的，在此之前它仅适用于框架集和正文元素（尽管大多数浏览器也为 img 元素实现了它）。所以如果你想支持早期的浏览器，你需要有创意。

一种解决方案是在脚本顶部放置一个函数调用来表示脚本已加载，因为浏览器在脚本完全加载之前不应执行脚本中的任何代码。

另一种是在第一个脚本之后立即插入带有“我已加载”功能或标志的第二个脚本，假设第二个脚本在第一个被加载和执行之前不会被执行。

# xaml - Metro c++ 异步编程和 UI 更新。我的技术？

> ID：12574551
> 
> 赞同：1
> 
> 时间：2012-09-24T23:58:54.547
> 
> 标签：xaml, visual-c++, windows-8, microsoft-metro, windows-store

问题：当我想渲染异步检索的传入数据时，我崩溃了。

该应用程序启动并使用 XAML 显示一些对话框。一旦用户填写了他们的数据并单击了登录按钮，XAML 类就有了一个工作类的实例，它为我执行 HTTP 工作（异步使用 IXMLHTTPRequest2）。当应用程序成功登录到 Web 服务器时，我的 .then() 块触发，我对我的主要 xaml 类进行回调以对资产进行一些渲染。

我总是在委托中遇到崩溃（主要的 XAML 类），这让我相信我不能使用这种方法（纯虚拟类和回调）来更新我的 UI。我想我无意中试图从一个不正确的线程做一些非法的事情，这是异步调用的副产品。

是否有更好或不同的方式让我通知主 XAML 类它是时候更新它的 UI 了？我来自一个可以使用 NotificationCenter 的 iOS 世界。

现在，我看到微软在这里有自己的委托类型：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh755798.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh755798.aspx)

你认为如果我使用这种方法而不是我自己的回调它就不会崩溃了吗？

让我知道您是否需要更多说明。

这是代码的要点： public interface class ISmileServiceEvents { public: // 所需方法 virtual void UpdateUI(bool isValid) abstract; };

```
// In main XAML.cpp which inherits from an ISmileServiceEvents
void buttonClick(...){
    _myUser->LoginAndGetAssets(txtEmail->Text, txtPass->Password);
}
void UpdateUI(String^ data) // implements ISmileServiceEvents
{
    // This is where I would render my assets if I could.
    // Cannot legally do much here. Always crashes. 
    // Follow the rest of the code to get here. 
}

// In MyUser.cpp
void LoginAndGetAssets(String^ email, String^ password){
   Uri^ uri = ref new URI(MY_SERVER + "login.json");
   String^ inJSON = "some json input data here"; // serialized email and password with other data

   // make the HTTP request to login, then notify XAML that it has data to render.
   _myService->HTTPPostAsync(uri, json).then([](String^ outputJson){
      String^ assets = MyParser::Parse(outputJSON);
      // The Login has returned and we have our json output data 
      if(_delegate)
      {
         _delegate->UpdateUI(assets);
      }
   });
}

// In MyService.cpp
task<String^> MyService::HTTPPostAsync(Uri^ uri, String^ json)
{
    return _httpRequest.PostAsync(uri, 
        json->Data(),
        _cancellationTokenSource.get_token()).then([this](task<std::wstring> response)
    {
        try
        {
           if(_httpRequest.GetStatusCode() != 200) SM_LOG_WARNING("Status code=", _httpRequest.GetStatusCode());
               String^ j = ref new String(response.get().c_str());
               return j;
        }
        catch (Exception^ ex) .......;
    return ref new String(L"");
    }, task_continuation_context::use_current());
} 
```

编辑：顺便说一句，我去更新 UI 时得到的错误是：“一个无效参数被传递给一个认为无效参数致命的函数。” 在这种情况下，我只是想在我的回调中执行

```
txtBox->Text = data; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T04:36:45.367

看来您正在从错误的上下文中更新 UI 线程。您可以使用`task_continuation_context::use_arbitrary()`来允许您更新 UI。[请参阅本文档](http://msdn.microsoft.com/en-us/library/hh750082.aspx)中的“控制执行线程”示例（封送处理的讨论在底部）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:50:54.530

所以，事实证明，当你有一个延续时，如果你没有在 lambda 函数之后指定上下文，它默认为 use_arbitrary()。这与我在 MS 视频中学到的内容相矛盾。

但是，通过将 use_currrent() 添加到与 GUI 有任何关系的所有 .then 块中，我的错误消失了，一切都能够正确呈现。

我的 GUI 调用一个服务，该服务生成一些任务，然后调用一个 HTTP 类，该类也执行异步操作。回到 HTTP 类中，我使用 use_arbitrary() 以便它可以在辅助线程上运行。这工作正常。只要确保在与 GUI 相关的任何事情上使用 use_current() 即可。

现在你已经有了我的答案，如果你看一下原始代码，你会发现它已经包含了 use_current()。这是真的，但为了简单起见，我省略了一个包装函数。这就是我需要添加 use_current() 的地方。

# facebook - fb:fan 的设置高度有问题

> ID：12574555
> 
> 赞同：0
> 
> 时间：2012-09-24T23:59:17.987
> 
> 标签：facebook

我想设置 page_stream_short 的高度，但 css 默认为 250px；是否可以设置高度：这就是我正在做的事情：

> .fan_box .page_stream_short { 位置：相对；高度：525px！重要；
> 
> }

指导我，我做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T00:05:09.197

如果您使用IE8查看，您可能会遇到这个问题：[http ://boardreader.com/thread/IE8_ignores_some_css_styles_in_fan_box_6cvuuX24v6.html](http://boardreader.com/thread/IE8_ignores_some_css_styles_in_fan_box_6cvuuX24v6.html)

# android - 在 android 上锁定和解锁时运行应用程序

> ID：12574556
> 
> 赞同：2
> 
> 时间：2012-09-24T23:59:18.137
> 
> 标签：android, android-intent, screen-lock

我在 Android 上安装了一个应用程序。我想在每次屏幕锁定或解锁时启动该应用程序。

*   有没有可以完成这项工作的应用程序？
*   如果没有，并且如果我应该对其进行编码，我是否需要担心已安装应用程序的意图和清单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:16:15.417

不是每个人都会锁定手机。我家的 5 部手机都没有锁定或解锁。您可以监控 ACTION_SCREEN_ON 和 ACTION_SCREEN_OFF。也许这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T01:12:52.943

Google Play 商店中有一个名为“After Unlock”的应用程序。免费且描述（我从未使用过）听起来就像您正在寻找的东西，至少在“解锁”部门。可能还有其他人。我使用了一个名为“Tasker”的非免费应用程序，它更加精细，可以完成整个工作以及您可以梦想的任何其他工作，但正如我所说，它不是免费的。

# java - JMenuBar 未从 RSyntaxTextArea 接收键组合

> ID：12574557
> 
> 赞同：1
> 
> 时间：2012-09-24T23:59:20.563
> 
> 标签：java, swing, events, jmenu, rsyntaxtextarea

我无法让来自文本区域的按键事件到达 JMenBar。我有在运行时从 XML 文件生成的菜单栏，并且文本区域的创建方式如下：

```
@Override
public void createUI() {
    this.textArea = new RSyntaxTextArea(25, 70);
    this.scrollPane = new RTextScrollPane(this.textArea);
    this.setLayout(new BorderLayout());
    this.add(this.scrollPane, BorderLayout.CENTER);
    this.textArea.setSyntaxEditingStyle("text/dm");
}

RSyntaxTextArea textArea;
RTextScrollPane scrollPane; 
```

在菜单中的项目中，我使用`setAccelerator()`设置组合键来使用它们。当我在文本区域中使用所述组合时，它们永远不会到达菜单项。我不记得以前有这个问题，有什么想法为什么现在会发生？

**问题已解决（不想等待 6 小时来回答我自己的问题。）：**

我通过保留用于菜单的键映射列表然后使用`JComponent`类的输入映射使文本区域忽略它们来解决我的问题。

代码：

```
for(KeyStroke ks : this.mappedKeyStrokes) {
    component.getInputMap().put(ks, "none");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:09:57.837

> 当我在文本区域中使用所述组合时，它们永远不会到达菜单项 [...] 为什么会发生这种情况？

这是设计使然（keyBindings 的）：菜单绑定基本上是通过 componentInputMap（== WHEN_IN_FOCUSED_WINDOW 类型的 inputMap）来处理的。InputMaps 按顺序提供

*   WHEN_FOCUSED
*   WHEN_ANCESTOR_OF_FOCUSED_COMPONENT
*   WHEN_IN_FOCUSED_WINDOW

*仅在之前未处理*时才传递给下一个。

# ruby - Ruby 正则表达式太大/多个字符串匹配

> ID：12574559
> 
> 赞同：2
> 
> 时间：2012-09-24T23:59:44.243
> 
> 标签：ruby, regex

我有 1,000,000 个要分类的字符串。如果它包含一组单词或短语，我这样做的方法是存储它。单词集约为 10,000。理想情况下，我将能够支持正则表达式，但我现在专注于使其快速运行。例句：

福特、保时捷、马自达……

我真的不想将每个单词与字符串一一匹配，所以我决定使用正则表达式。不幸的是，我遇到了一个正则表达式问题：

> > Regexp.new("(a)"*253) => /(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a )(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)( a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a) (a)(a)(a)(a)(a)(a)(a)(a)(a)...
> > 
> > Regexp.new("(a)"*254) RegexpError: 正则表达式太大: /(a)(a)(a)(a)(a)(a)(a)(a)(a)(a) (a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a) )(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)...

其中 a 将是我的单词或短语之一。现在，我计划运行 10,000 / 253 场比赛。我读到正则表达式的长度会严重影响性能，但是我的正则表达式匹配非常简单，并且正则表达式的创建速度非常快。我想以某种方式绕过限制，或者如果有人有任何想法，请使用更好的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:02:29.133

您可以考虑其他识别 10k 单词的机制。

*   Trie：有时称为前缀树，拼写检查器经常使用它来进行单词查找。参见[维基百科上的 Trie](http://en.wikipedia.org/wiki/Trie)
*   DFA（确定性有限自动机）：DFA 通常由编译器中的词法分析器创建，用于识别语言的标记。DFA 运行速度非常快。简单的正则表达式通常被编译成 DFA。参见[维基百科上的 DFA](http://en.wikipedia.org/wiki/Deterministic_finite_automaton)

# c - 创建目录时出现分段错误（核心转储）

> ID：12574560
> 
> 赞同：0
> 
> 时间：2012-09-24T23:59:55.190
> 
> 标签：c, directory, segmentation-fault

我有这个简单的代码：

```
int read_data(int GrNr) {
    //many lines of code
    fprintf(fdatagroup, "%i", Ngroups);
    return 0;
}

int main(int argc, char **argv) {
    for(NUM=NUM_MIN;NUM<=NUM_MAX;NUM++) {
        sprintf(groupfile,"../output/profiles/properties_%03d.txt", NUM);
        fdatagroup = fopen(groupfile,"w");

        GROUP=0;
        accept=0;

        do {
            check=read_data(GROUP);
            printf("check = %d \n", check);

            accept++;
            FOF_GROUP++;
        }
        while (accept<=n_of_halos);

        fclose(fdatagroup);
    }
    printf("Everything done.\n");
    return 0;
} 
```

如果我没有在输出目录中手动创建名为“profiles”的文件夹，我会收到错误消息：`Segmentation fault (core dumped)`

如果文件夹在那里，一切正常。我该怎么做才能从代码内部创建目录？我在linux中使用gcc。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:21:03.153

就像某些背景一样，当 fopen 尝试打开一个不存在的文件时，它不会失败，而是简单地返回 NULL。当您尝试将数据读/写到空指针时，就会发生段错误。

目录的创建和销毁在 sys/dir.h 的范围内

```
#include <sys/dir.h>
...
mkdir(path_str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T00:22:27.507

在 Linux 上：

```
#include <sys/stat.h>
#include <sys/types.h>

mkdir("/path/to/dir", 0777); // second argument is new file mode for directory (as in chmod) 
```

您还应该*始终*检查您的功能是否失败。如果无法打开文件，则`fopen`返回 NULL 并设置；（以及大多数其他系统调用返回）返回和设置。您可以使用打印出包含错误字符串的消息：`errno``mkdir``int``-1``errno``perror`

```
#include <errno.h>

if(mkdir("/path", 0777) < 0 && errno != EEXIST) { // we check for EEXIST since maybe the directory is already there
    perror("mkdir failed");
    exit(-1); // or some other error handling code
} 
```

# c++ - 模板中显式参数的转换

> ID：12574561
> 
> 赞同：2
> 
> 时间：2012-09-25T00:00:22.113
> 
> 标签：c++, templates

从 C++ Primer 中，我知道对于模板的参数参数，只进行两种转换：一种是**const 转换**，另一种是**数组/函数到指针的转换**。

然而，当谈到明确的论点时，似乎一切都发生了变化。假设我们有一个模板函数：

```
template <typename T>
int compare(const T &a, const T &b)
{
    // do comparison
} 
```

如果不涉及显式参数，则这样的函数调用是非法的：

```
compare("foo", "foobar"); 
```

当我们明确地这样做时，会发生奇怪的事情（实际上，这可能并不奇怪，但我不明白）：

```
compare<std::string>("foo", "foobar"); 
```

似乎在第二次调用中，**“foo”**和**“foobar”**被转换为`std::string`，这是有争议的。

模板显式参数有什么特殊规则吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T00:30:09.247

在第一种情况下，编译器试图`T`从给定的参数中推断出类型。编译器从第一个参数推导出类型`const char (&)[4]`（又名。引用 4 个字符的数组），从第二个参数得到`const char (&)[7]`. 这两种类型不匹配，编译器无法弄清楚`T`应该是什么。

在第二个示例中，您明确指定`T`模板参数应该是 `std::string`. `T` *也会*如此`std::string`。_ 编译器接受您提供的类型并检查给定的函数参数是否与该类型匹配。在这种情况下，参数适合，因为`"foo"`和`"foobar"`可以隐式转换为`std::string`。（`const char[]`降级为，然后有一个可以从 a`const char*`构造 a 的构造函数）`std::string``const char*`

# sql - 查询以显示每月总休假小时数

> ID：12574563
> 
> 赞同：1
> 
> 时间：2012-09-25T00:00:24.897
> 
> 标签：sql

我有一张`Leave`如下表：

```
MONTH | NAME | DAY1 | DAY2 | DAY3 | ... | DAY31
------------------------------------------------      
      |      |      |      |      | ... | 
```

`DAY1`用于`DAY31`保存指定人员未在办公室的小时数的列。

我需要一个查询来生成这个输出：

```
MONTH | NAME | TOTAL_MONTH_HOURS
---------------------------------      
      |      | 
```

其中`TOTAL_MONTH_HOURS`是该月所有小时的总和；IE`DAY1 + DAY2 + ... + DAY30+DAY31`

我应该如何编写这个查询？有什么办法可以避免像我上面那样对所有列求和吗？我不时遇到类似的问题，表格变得更大！

注意：某些列可能是`NULL`由于月份长度不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T00:04:02.253

考虑到当前的表结构，最简单的方法就是这样做 -

```
Select Month, Name, Day1+Day2+Day3....+Day31 Total_Month_Hours
  From Tbl 
```

现在，如果可能有 NULL 并且这是问题的原因，请用 COALESCE 包装它们。COALESCE 是 ANSI SQL99 标准的一部分，支持所有主要的 RDBMS（[MySQL](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce) [Oracle](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions023.htm) [SQLite](http://www.sqlite.org/lang_corefunc.html) [PostgreSQL](http://www.postgresql.org/docs/8.1/static/functions-conditional.html) [SQL Server](http://msdn.microsoft.com/en-us/library/ms190349.aspx)）。

```
Select Month,
       Name,
       COALESCE(Day1,0)+COALESCE(Day2,0)+...+COALESCE(Day31,0) Total_Month_Hours
  From Tbl 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T00:05:18.103

由于你不能改变你的表，在这里：

```
SELECT `month`, `name`, (DAY1+DAY2+DAY3+DAY4+DAY5+DAY6+DAY7+DAY8+DAY9+DAY10+DAY11+DAY12+DAY13+DAY14+DAY15+DAY16+DAY17+DAY18+DAY19+DAY20+DAY21+DAY22+DAY23+DAY24+DAY25+DAY26+DAY27+DAY28+DAY29+DAY30+DAY31) AS `total_month_hours`
FROM `table_name` 
```

# android - 如何在 webview 中播放 Youtube 视频？

> ID：12574564
> 
> 赞同：1
> 
> 时间：2012-09-25T00:00:37.237
> 
> 标签：android, flash, video, webview, youtube

我是 android 的菜鸟，尽管我阅读了许多教程，但我仍然无法弄清楚如何在我的 webview 中播放 youtube 视频。我可以毫无问题地浏览该网站，但是当我点击视频时，什么也没有发生。我尝试将 android:hardwareAccelerated="true" 添加到我的清单中，但没有成功。任何帮助是极大的赞赏。这是我到目前为止所拥有的：

```
 huffingtonpost = (WebView)findViewById(R.id.webView1);
    huffingtonpost.setWebViewClient(new WebViewClient());
    huffingtonpost.getSettings().setJavaScriptEnabled(true);
    huffingtonpost.getSettings().setPluginState(PluginState.ON);
    huffingtonpost.getSettings().setUseWideViewPort(true);
    huffingtonpost.getSettings().setLoadWithOverviewMode(true);

    try{
    huffingtonpost.loadUrl("http://www.youtube.com/KitcoNews");
    }catch (Exception e){
        e.printStackTrace();
    } 
```

我的清单

```
 <application
    android:hardwareAccelerated="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T08:53:38.587

**如何在 android webview 中播放 Youtube 频道？**

公共类 MainActivity 扩展 Activity {

```
 @Override
     public void onCreate(Bundle savedInstanceState) {

          super.onCreate(savedInstanceState);

          //setContentView(R.layout.main);

        String html="http://www.youtube.com/KitcoNews";
          // Let's display the progress in the activity title bar, like the
          // browser app does.
          getWindow().requestFeature(Window.FEATURE_PROGRESS);

          WebView webview = new WebView(this);
          setContentView(webview);

          webview.getSettings().setJavaScriptEnabled(true);

          final Activity activity = this;
          webview.setWebChromeClient(new WebChromeClient() {
          public void onProgressChanged(WebView view, int progress) {

             activity.setTitle("Loading...");
                activity.setProgress(progress * 100);

                if(progress == 100)
                    activity.setTitle(""Done);

          }
        });

webview.setWebViewClient(new WebViewClient() {

public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
          //Users will be notified in case there's an error (i.e. no internet connection)
          Toast.makeText(activity, "Oh no! " + description, Toast.LENGTH_SHORT).show();
}
 });
       //This will load the webpage that we want to see
        webview.loadUrl(html);

     }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:53:19.760

这是一个代码示例：

```
myWebView = (WebView) findViewById( R.id.webview_compontent );

String playVideo= "<html><body>Youtube video .. <br> <iframe class=\"youtube-player\" type=\"text/html\" width=\"640\" height=\"385\" src=\"http://www.youtube.com/embed/bIPcobKMB94\" frameborder=\"0\"></body></html>"

myWebView.loadData(playVideo, "text/html", "utf-8"); 
```

如果 URL 是从 EditText 或其他东西中获取的，您可以只操作字符串`playVideo`

希望这可以帮助。

# c++ - 使用 delta 时间统一速度的移动对象口吃

> ID：12574565
> 
> 赞同：1
> 
> 时间：2012-09-25T00:00:46.600
> 
> 标签：c++, opengl

我尝试过不同的机器，打开和关闭 VSync。

我提供了我的主要方法和显示方法。在主要外观中，我使用 GLFWs GetTime 方法计算增量。

如果我明确设置 deltaTime = 0.016 来锁定目标速度，三角形会平稳移动。

```
int main(int argc, char** argv)
{
    /*
        INIT AND OTHER STUFF SNIPPED OUT
    */

    double currentFrame = glfwGetTime();
    double lastFrame = currentFrame;
    double deltaTime;

    double a=0;
    double speed = 0.6;
    //Main loop
    while(true)
    {
        a++;

        currentFrame = glfwGetTime();
        deltaTime = currentFrame - lastFrame;
        lastFrame = currentFrame;

        /** I know that delta time is around 0.016 at my framerate **/
        //deltaTime = 0.016;

        x = sin( a * deltaTime * speed ) * 0.8f;
        y = cos( a * deltaTime * speed ) * 0.8f;

        display();

        if(glfwGetKey(GLFW_KEY_ESC) || !glfwGetWindowParam(GLFW_OPENED))
            break;
    }

    glfwTerminate();

    return 0;
}

void display()
{
    glClearColor(0.5f, 0.5f, 0.5f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT);

    glUseProgram(playerProgram);

        glUniform3f(playerLocationUniform,x,y,z);

        glBindBuffer(GL_ARRAY_BUFFER, playerVertexBufferObject);

        glEnableVertexAttribArray(0);
            glVertexAttribPointer(0, 4, GL_FLOAT, GL_FALSE, 0, 0);
            glDrawArrays(GL_TRIANGLES, 0, 3);
        glDisableVertexAttribArray(0);

    glUseProgram(0);
    glfwSwapBuffers();

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T00:45:01.887

您使用`deltaTime`的好像它是一个全局帧速率，并根据帧号 ( `a`) 乘以该速率来计算正弦和余弦。这意味着帧之间的微小波动会随着位置的变大`deltaTime`而导致更大的位置变化。`a`

在另一种情况下，您设置了一个常量`deltaTime`，当帧在错误的时间渲染时，您仍然会遇到小故障。

你真正需要做的是：

```
#define TAU (M_PI * 2.0)

    currentFrame = glfwGetTime();
    deltaTime = currentFrame - lastFrame;
    lastFrame = currentFrame;

    a += deltaTime * speed;

    // Optional, keep the cycle bounded to reduce precision errors
    // if you plan to leave this running for a long time...
    if( a > TAU ) a -= TAU;

    x = sin( a ) * 0.8f;
    y = cos( a ) * 0.8f; 
```

# css - 容器中并排的 div 填充高度

> ID：12574568
> 
> 赞同：4
> 
> 时间：2012-09-25T00:01:13.670
> 
> 标签：css, html, height

我有一组并排的 div（实际上使用 HTML5 部分，但我假设解决方案和行为是相同的）。他们坐在一个容器中，右侧是表单字段，左侧是摘要标题和信息。结构看起来像这样：

```
<div id="container">
    <div id="left" >Summary here</div>
    <div id="right">Form fields here</div>
</div> 
```

问题是我必须根据使用 javascript 采取的操作隐藏或显示各种字段，因此右侧和容器的实际高度不是静态的。我需要的是让左侧填充容器的高度，使其与右侧匹配。我已经尝试了互联网上的众多解决方案，但似乎都没有奏效。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T00:03:45.280

这是一个很常见的问题。看看这篇文章......它有所有的答案：

[http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)

现在，这里有一个快速使用它的方法。尝试单击任何“列#”文本元素以将它们从文档中删除...列将很好地调整大小:)

[http://jsfiddle.net/UnsungHero97/qUT3d/9/](http://jsfiddle.net/UnsungHero97/qUT3d/9/)

## HTML

```
<div id="container3">
    <div id="container2">
        <div id="container1">
            <div id="col1">Column 1</div>
            <div id="col2">Column 2</div>
            <div id="col3">Column 3</div>
        </div>
    </div>
</div> 
```

## CSS

```
#container3 {
    float:left;
    width:100%;
    background:green;
    overflow:hidden;
    position:relative;
}
#container2 {
    float:left;
    width:100%;
    background:yellow;
    position:relative;
    right:30%;
}
#container1 {
    float:left;
    width:100%;
    background:red;
    position:relative;
    right:40%;
}
#col1 {
    float:left;
    width:26%;
    position:relative;
    left:72%;
    overflow:hidden;
}
#col2 {
    float:left;
    width:36%;
    position:relative;
    left:76%;
    overflow:hidden;
}
#col3 {
    float:left;
    width:26%;
    position:relative;
    left:80%;
    overflow:hidden;
}​ 
```

# sql-server-2008 - 将表从 sql server 复制到 db2

> ID：12574570
> 
> 赞同：0
> 
> 时间：2012-09-25T00:01:35.607
> 
> 标签：sql-server-2008, db2, migration

我在一个sql server数据库下有几张表，大部分内容都是INT或VARCHAR，两个表都有image列。现在我想将这些表复制到 DB2 10.1 LUW 和 zseries，以及 iSeries 上的 v7r1，执行此数据迁移的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T00:06:56.400

SQL Server 导入和导出向导可能会有所帮助

[sql server i&e 向导](http://msdn.microsoft.com/en-us/library/ms141209.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:38:38.493

使用 Sql Server 集成服务 (SSIS) 更有效地处理它。 [http://www.packtpub.com/article/mysql-data-transfer-using-sql-server-integration-services-ssis](http://www.packtpub.com/article/mysql-data-transfer-using-sql-server-integration-services-ssis)

或者

您还可以使用 BCP 命令

# sql - 这可以更容易吗？

> ID：12574579
> 
> 赞同：2
> 
> 时间：2012-09-25T00:02:57.370
> 
> 标签：sql

有没有更简单的方法来做到这一点？我只想要在 6 年中至少有 2 年具有收费代码的家庭 - （cy = 本年度 ly = 去年等）？？

```
Exists (SELECT * FROM ac_ViewMultiHouseholdChargeCodeYearCode AS VMH 
WHERE 
aa_Households.HouseholdID = VMH.HouseholdiD and 
VMH.ChargeCode = 'Dinner' and 
(VMH.ChargeCount_CY > 0 and
 (VMH.ChargeCount_LY > 0 or
  VMH.ChargeCount_2Y > 0 or 
  VMH.ChargeCount_3Y > 0 or 
  VMH.ChargeCount_4Y > 0 or 
  VMH.ChargeCount_5Y > 0)) or 
(VMH.ChargeCount_LY > 0 and 
 (VMH.ChargeCount_CY > 0 or
  VMH.ChargeCount_2Y > 0 or
  VMH.ChargeCount_3Y > 0 or 
  VMH.ChargeCount_4Y > 0 or
  VMH.ChargeCount_5Y > 0)) or
(VMH.ChargeCount_2Y > 0 and 
 (VMH.ChargeCount_LY > 0 or
  VMH.ChargeCount_CY > 0 or 
  VMH.ChargeCount_3Y > 0 or
  VMH.ChargeCount_4Y > 0 or
  VMH.ChargeCount_5Y > 0)) or
(VMH.ChargeCount_3Y > 0 and
 (VMH.ChargeCount_LY > 0 or 
  VMH.ChargeCount_2Y > 0 or
  VMH.ChargeCount_CY > 0 or
  VMH.ChargeCount_4Y > 0 or
  VMH.ChargeCount_5Y > 0)) or
(VMH.ChargeCount_4Y > 0 and
 (VMH.ChargeCount_LY > 0 or
  ChargeCount_2Y > 0 or
  VMH.ChargeCount_3Y > 0 or
  VMH.ChargeCount_CY > 0))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T00:10:07.527

您可以将其简化为：

```
where (
  (case when VMH.ChargeCount_CY > 0 then 1 else 0 end) +
  (case when VMH.ChargeCount_LY > 0 then 1 else 0 end) +
  (case when VMH.ChargeCount_2Y > 0 then 1 else 0 end) +
  (case when VMH.ChargeCount_3Y > 0 then 1 else 0 end) +
  (case when VMH.ChargeCount_4Y > 0 then 1 else 0 end) +
  (case when VMH.ChargeCount_5Y > 0 then 1 else 0 end)
) >= 2 
```

# android - 来自联系人提供者的查询会阻塞 ui 线程吗？

> ID：12574581
> 
> 赞同：2
> 
> 时间：2012-09-25T00:03:32.993
> 
> 标签：android

我正在编写一个通话记录应用程序。但是当我异步加载图像到列表视图时，列表视图的滚动出现退出滞后。我已经将所有耗时的工作都放到了工作线程中，并使用`ConcurrentHashMap`它来确保工作线程不会阻塞 ui 线程。
但是当我从数据库加载图像时，ui 线程出现了一点延迟。为了获得图像，我查询数据库几次，几乎需要 1 秒。但是因为它是在工作线程中完成的，所以我想它不会导致延迟。

但是在我调试使用`ddms`并改进查询语句之后，滞后消失了。但我仍然无法弄清楚为什么。来自 contentprovider 的查询会阻塞主线程吗？

**编辑** 这里是使滚动滞后的查询代码。并且数据库保存了70000个联系人，所以查询需要很长时间。

```
public static long loadRawContactId(Context context, long callId) {
    ContentResolver cr = context.getContentResolver(); 
    Cursor cursor = cr.query(Calls.CONTENT_URI, 
            new String[] {Calls.NUMBER, Calls.GS_ACCOUNT},
            Calls._ID + " = ?",
            new String[] {String.valueOf(callId)},
            null);
    String number = "";
    int account = 0;
    if (cursor != null) {
        if (cursor.moveToFirst()) {
            number = cursor.getString(cursor.getColumnIndex(Calls.NUMBER));
            account = cursor.getInt(cursor.getColumnIndex(Calls.GS_ACCOUNT));
        }
        cursor.close();
    }

    Cursor c = cr.query(Phone.CONTENT_URI, 
            new String[]{Data.RAW_CONTACT_ID},
            Phone.NUMBER + " = ? AND " + Phone.GS_ACCOUNT + " = ?",
            new String[] {number, String.valueOf(account)},
            null);

    long contactId = 0;
    if (c != null) {
        if (c.moveToFirst()) {
            contactId = c.getLong(0);
        }
        c.close();
    }
    return contactId;
} 
```

# ruby - 尝试从数组中删除字符串时未定义的方法“delete_at”

> ID：12574583
> 
> 赞同：1
> 
> 时间：2012-09-25T00:03:45.510
> 
> 标签：ruby, multidimensional-array, nomethoderror

所以我试图创建一个简单的 Ruby 脚本，从 csv 文件中删除指定数量的字段。首先，我将 csv 文件写入一个数组，然后将该数组传递给 delete_fields 方法。在删除字段方法中，我遍历每一行的每一列，并检查该列是否落在删除所需的字段范围之间。目前它似乎在前三个领域工作，然后在第四个领域挂起。

这是我的代码：

```
 require 'csv'
    def read_csv( csv_file )

      arr_of_records = CSV.read( csv_file )

      return arr_of_records
    end

    def remove_fields ( csv_array, new_csv_file, start_field, end_field )
      #file = File.new(new_csv_file, "w")

      csv_array.each_with_index do |row, row_i | 
       row.each_with_index do |column, column_i| 

         column.delete_at(column_i) if ((column_i >= start_field) && (column_i <=     end_field))
         puts column

        end
       end
    end

    remove_fields( read_csv( ARGV[0] ), ARGV[1], ARGV[2].to_i, ARGV[3].to_i ) 
```

我得到的错误如下：

```
 ryan@Alfred:~$ ruby csv_read.rb test_data.csv altered_test_data.csv 3 8
    8
    ?
    ?
    csv_read.rb:16:in `remove_fields': undefined method `delete_at' for   "Lakewoodcity":CSV::Cell (NoMethodError)
from csv_read.rb:1:in `each_with_index'
from csv_read.rb:14:in `each'
from csv_read.rb:14:in `each_with_index'
from csv_read.rb:14:in `remove_fields'
from csv_read.rb:1:in `each_with_index'
from csv_read.rb:13:in `each'
from csv_read.rb:13:in `each_with_index'
from csv_read.rb:13:in `remove_fields'
from csv_read.rb:24 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:38:10.307

您收到此错误是因为您调用`delete_at`的是类型的对象`String`而不是`Array`. 您真正想要做的是调用`delete_at`您`row`当前正在迭代的，而不是`column`. 这应该可以解决您的问题：

```
 csv_array.each_with_index do |row, row_i | 
   row.each_with_index do |column, column_i| 

     row.delete_at(column_i) if ((column_i >= start_field) && (column_i <=     end_field))
     puts column

    end
   end 
```

有助于理解这一点的方法是将第一个块参数视为 a`value`而不是 a `row`。

# listview - jQuery mobile listview('refresh') 未完成增强

> ID：12574585
> 
> 赞同：1
> 
> 时间：2012-09-25T00:04:04.160
> 
> 标签：listview, jquery-mobile, refresh

我有一个列表视图，所有显示都很好。我向其中添加了一个项目，使用与将原始项目放入其中的完全相同的功能。如果我不刷新列表视图，新项目不会得到增强（这并不奇怪）。但是当我调用刷新时，增强是不完整的。

这是输入的项目：

```
<li data-role="fieldcontain" id="flip-li-38">
  <div class="containing-element">
    <label for="flip-38">A B:</label>
    <select name="flip-38" id="flip-38" data-role="slider" data-mini="true">
      <option value="off">Absent</option>
      <option value="on">Present</option>
    </select>
  </div>
</li> 
```

这是增强后的项目：

```
<li data-role="fieldcontain" id="flip-li-38" class="ui-li ui-li-static ui-body-c">
  <div class="containing-element">
    <label for="flip-38">A B:</label>
    <select name="flip-38" id="flip-38" data-role="slider" data-mini="true">
      <option value="off">Absent</option>
      <option value="on">Present</option>
    </select>
  </div>
</li> 
```

但这是列表中最初的项目之一：

```
<li data-role="fieldcontain" id="flip-li-37" class="ui-li ui-li-static ui-body-c ui-field-contain ui-body ui-br">
<div class="containing-element">
  <label for="flip-37" id="flip-37-label" class="ui-slider">X Y:</label>
  <select name="flip-37" id="flip-37" data-role="slider" data-mini="true" class="ui-slider-switch">
    <option value="off">Absent</option>
    <option value="on">Present</option>
  </select>
  <div role="application" class="ui-slider ui-slider-switch ui-btn-down-c ui-btn-corner-all ui-slider-mini" style>
    <span class="ui-slider-label ui-slider-label-a ui-btn-active ui-btn-corner-all" role="img" style="width: 0%; ">Present</span>
    <span class="ui-slider-label ui-slider-label-b ui-btn-down-c ui-btn-corner-all" role="img" style="width: 100%; ">Absent</span>
    <div class="ui-slider-inneroffset">
      <a href="#" class="ui-slider-handle ui-btn ui-btn-up-c ui-shadow ui-btn-corner-all ui-slider-handle-snapping" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="c" role="slider" aria-valuemin="0" aria-valuemax="1" aria-valuenow="off" aria-valuetext="Absent" title="Absent" aria-labelledby="flip-37-label" style="left: 0%; ">
        <span class="ui-btn-inner ui-btn-corner-all">…&lt;/span>
      </a>
    </div>
  </div>
</div>
</li> 
```

这是周围的上下文：

```
 <div id="memberPage" data-role="page">
        <div data-role="content">
         <form>
                <ul data-role="listview" data-filter="true" id="memberList"></ul>
            </form>
        </div><!-- /content -->
  </div> 
```

可能存在某种时间问题；我通过将部分增强的项目写入控制台来捕获它，但在调用刷新之前将其写入（如果我离开刷新调用，则会记录原始未增强的项目）。

如果重要，项目会通过按钮的 onclick 属性从对话框中添加，该按钮链接回带有列表的页面（从而关闭对话框）。

提前感谢您的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:14:07.830

尝试使用listview 的`$('#memberList').trigger('create');`代替`refresh`方法。我认为它可能会起作用，因为您不仅要增强新列表项，还要增强其中的滑块。

# python - 使用 python 处理和处理二进制数据 HEX

> ID：12574587
> 
> 赞同：0
> 
> 时间：2012-09-25T00:04:17.797
> 
> 标签：python, file, byte

我正在尝试比较一些字节值 - 源 A 来自正在“读取”的文件：

```
f = open(fname, "rb")
f_data = f.read()
f.close() 
```

这些文件的大小可以从几 Kb 到几 Mb 不等

源 B 是已知模式的字典：

```
eof_markers = {
    'jpg':b'\xff\xd9',
    'pdf':b'\x25\x25\x45\x4f\x46',
    } 
```

（一旦基本流程有效，此列表将被扩展）

本质上，我正在尝试“读取”文件（源 A），然后逐步检查最后一个字节是否与模式列表`testString = f_data[-counter:]`匹配.

我已经尝试了多种不同的方法来使其正常工作，我可以让 testString 正确递增，但我一直遇到编码问题，各种方法都希望对字节进行 ASCII 化以进行比较。

我有点迷茫，并不是第一次在代码中徘徊，更改`int`为`u`，`b`也没有遇到像`d9`保留值这样的问题，因此无法使用 ASCII 类型比较工具，例如`if format_type in testString:`（导致`UnicodeDecodeError: 'ascii' codec can't decode byte a9`

我试图将所有内容都转换为整数，但这引发了这个错误：`ValueError: invalid literal for int() with base 2: '.'`或者`ValueError: invalid literal for int() with base 10: '.'`我试图将其转换`testString`为十六进制字节，但不断得到`TypeError: hex() argument can't be converted to hex`（这比我确定的其他任何事情都更缺乏理解！....）

我发现有很多资源可以讨论编码/十六进制比较，例如 stackoverflow.com/questions/10561923/unicodedecodeerror-ascii-codec-cant-decode-byte-0xef-in-position-1)，我已经只是没有找到我可以完全理解的东西，或者指出我走上正确道路的东西。

我一直坚持这一点已经有一段时间了，所以任何指点都非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:24:16.027

我不确定你到底想要做什么，但我在 Python 3.2.3 中运行了这段代码。

```
#f = open(fname, "rb")
#f_data = f.read()
#f.close()
f_data = b'\x12\x43\xff\xd9\x00\x23'
eof_markers = {
    'jpg':b'\xff\xd9',
    'pdf':b'\x25\x25\x45\x4f\x46',
    }

for counter in range(-4, 0):
  for name, marker in eof_markers.items():
    print(counter, ('' if marker in f_data[counter:] else '!') + name) 
```

我使用的是硬编码的 f_data，但您可以通过取消注释第 1-3 行和注释第 4 行来撤消它。

这是输出：

```
-4 !pdf
-4 jpg
-3 !pdf
-3 !jpg
-2 !pdf
-2 !jpg
-1 !pdf
-1 !jpg 
```

有没有你需要做的没有做的事情？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T00:55:05.247

我不知道如何评论您的主要帖子而不是制作子帖子。无论如何，我有你的一些问题的答案..

*   int(v) 将格式化的数字（例如'599'）转换为整数，而不是将字符（例如“！”）转换为其整数值。你会想要 ord() 。但是，我认为没有理由在这种情况下需要使用任何一种。

*   十六进制！=二进制。十六进制只是一个数字基数。二进制是原始字节值，可能无法打印，具体取决于它们的值。这就是为什么它们显示为“\xfd”之类的转义码。这就是 Python 向您表示不可打印字符的方式——作为十六进制代码。但是它们仍然是没有特殊状态的单个字符——它们不需要转换。将 'A' 与 '\xfd' 进行比较是完全有效的。因此，您应该能够在*没有*任何转换的情况下进行比较。

*   只有在运行 Python 3.x 时，将 'u' 更改为 'b' 才会产生任何实际影响

至于直接解决问题，我觉得虽然很清楚你想做什么，但不清楚你为什么选择这样做。为了得到更好的答案，你需要问一个更清楚的问题。

这是另一种方法的示例：

```
# convert eof markers to a list of characters
eof_markers = {k: list(v) for k,v in eof_markers.items()}

# assuming that the bytes you have read in are being added to a list,
# we can then do a check for the entire EOF string by:

# outer loop reading the next byte, etc, omitted.
for mname, marker in eof_markers.items():
    nmarkerbytes = len(marker) 
    enoughbytes = len(bytes_buffer) >= nmarkerbytes
    if enoughbytes and bytes_buffer[-nmarkerbytes:] == marker:
        location = f.tell()
        print ('%s marker found at %d' % (mname, location)) 
```

还有其他更快的方法使用字节或字节数组（例如，使用 'rfind' 方法），但这是最简单的解释方法。

# sql - 如何在 fluent api 和 EF 中使用复合键构建自引用表

> ID：12574589
> 
> 赞同：4
> 
> 时间：2012-09-25T00:04:19.490
> 
> 标签：sql, ef-code-first, composite-key, self-reference, transitive-closure-table

我正在构建一个带有“闭包表”的分层数据库来构建树它是一个自引用表，两个键应该成为主键。

问题是，当我期望只有 3 列时，我最终得到 5 列。

这是我尝试过的：

```
 public class Tree
    {
        public int TaskId { get; set; }
        public Task Task { get; set; }  //navigation Property to TaskTable

        public int? ChildId { get; set; }
        public Tree Child { get; set; } //navigation Property

        public int Length { get; set; } //Length

    }

    public class Task
    {
        public int TaskId { get; set; }
        public virtual ICollection<Tree> Trees { get; set; }
    }

    modelBuilder
        .Entity<Task>()
        .HasKey(t => t.TaskId);

    modelBuilder
        .Entity<Tree>()
        .HasKey(a => new { a.TaskId, a.ChildId }); 
```

结果是一个包含 5 列的表：

1.  任务 ID
2.  ChildId
3.  长度
4.  Child_TaskId
5.  Child_ChildId

我期望：

1.  任务 ID
2.  ChildId
3.  长度

我猜想缺少一些流利的 api，但否则我无法开始工作？

# php - 使用 jQuery、AJAX 和 PHP 的组合，我如何捕获来自 PHP 的错误？

> ID：12574591
> 
> 赞同：0
> 
> 时间：2012-09-25T00:04:24.787
> 
> 标签：php, jquery, html, css

如果 PHP 成功返回，我会处理它，但就错误而言，我对我应该做什么有点困惑。

`error:`由于以下代码不起作用，我正在考虑做的事情是在我的 PHP 中将邮件函数设置为等于变量以保存函数的结果。然后在我的 jQuery 中，测试变量的结果以确定它是否为真。

然而，这一切都会发生在`success:`似乎显然应该处理这个错误的情况下。

我如何让它`success:`正确处理成功并显示一条消息，同时`error:`通过返回错误来处理错误，然后我将能够将它们显示给用户。

如果你能告诉我我的`.html()`功能是否做得好，还有加分？它的格式看起来很混乱，但我似乎想不出更好的方法来做到这一点。

# jQuery：

```
// Following section submits form without refreshing page
var dataString = "name=" + nameVal + "&email=" + emailVal + "&message=" + messageVal;  
$.ajax({  
    type: "POST",  
    url: "mail.php",  
    data: dataString,  
    success: function() { 
        $(".contact-form").hide();
        $(".alt-contact").hide();
    // Inserts divs making up the success message for the form submission
        $(".contact-form").html("<div class='success-message'><div class='success-image'></div><div class='success-title'>Success! The message has been sent!</div><div class='success-body'>I'll get back to you right away.</div></div>");
        $(".contact-form").fadeIn(500);
    }
    error: function() {
        $(".contact-form").hide();
        $(".alt-contact").hide();
        // Inserts divs making up the success message for the form submission
        $(".contact-form").html("<div class='error-message'><div class='error-image'></div><div class='error-title'>Success! The message has been sent!</div><div class='error-body'>I'll get back to you right away.</div></div>");
        $(".contact-form").fadeIn(500);
    }
});
return false; 
```

# PHP：

```
<?php

    $name = $_POST['name'];
    $email = $_POST['email'];
    $message = $_POST['message'];

    $recipient = 'me@christianselig.com';
    $subject = 'Message From Website';
    $body = '<b>From:</b> ' . $name . '\n\n' . $message;
    $headers = 'From: ' . $email . '\r\n';
    $headers .= 'Content-type: text/html; charset=UTF-8' . '\r\n';

    mail($recipient, $subject, $body, $headers);

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T00:18:45.427

任何错误消息仍将在 ajax 调用中返回“成功”。（错误功能是“呼叫不起作用”或“来自服务器的意外响应”）

您应该检查脚本以向脚本报告成功和错误状态。这在 JSON 中最容易处理，但为此您需要编写一个自定义错误处理程序来输出 JSON。

现在，通过以下方式使其变得简单：

```
if (@mail($recipient, $subject, $body, $headers)) {
     return json_encode(array('success' => 1));
} else {
     return json_encode(array('success' => 0));
} 
```

然后将您的 JS 更改为

```
// Following section submits form without refreshing page
var dataString = "name=" + nameVal + "&email=" + emailVal + "&message=" + messageVal;  
$.ajax({  
    type: "POST",  
    url: "mail.php",  
    data: json,    // CHANGED TYPE HERE
    success: function(data) { 
          if (data.success) {
                // WORKED
           } else {
                // FAILED TO SEND
           }
        $(".contact-form").fadeIn(500);
    }
    error: function() {
           // was not JSON, you got some other error
    }
});
return false; 
```

* * *

编辑以回应评论问题

默认情况下`error`，如果有无效响应（例如 404 页面未找到，500 服务器错误）将被调用。当我添加“数据类型：json”`error`时，如果无法将响应解析为 JSON，那么也会返回。如果您将数据类型保留为“dataString”，那么您可能无法命中`error`，因此添加 JSON 类型使其更可靠。无论如何，JSON 在 Javascript 中更容易处理，并且已知结构是最好的 - 所以总是尝试返回 JSON（除非您需要 HTML、XML 或其他已知结构）。字符串最不可靠。

一开始会稍微复杂一些，因为常规的 PHP 错误也会作为“字符串”而不是有效的 JSON 发送回；所以这些去`error`你必须处理的地方。我在上面的示例中通过在代码中隐藏邮件调用中的错误来避免这种情况`@`，并专门处理它。对于我的项目，我有自定义错误处理程序，它可以捕获错误并以已知结构返回 JSON 中的响应 - 然后返回`success`，我所有的 AJAX 调用都检查“data.error”，这意味着它通过了错误处理程序，并且可以进行相应处理。但现在，只需通过`error`AJAX 处理并使用 Charles (Mac OS) 或 Fiddler (Windows) 或浏览器中的网络嗅探器进行调试。

# jekyll - 站点未生成新文件

> ID：12574592
> 
> 赞同：0
> 
> 时间：2012-09-25T00:04:41.390
> 
> 标签：jekyll

我的 jekyll 站点在我的计算机上生成文件正常，但在服务器上根本不工作；我可以编辑 _site 文件夹以进行更改，但它不会在服务器上生成。我运行`jekyll --server`没有错误。有什么建议么？

我的 _config.yml 文件是：

```
server: false
permalink: /:year/:title/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:57:56.847

你在运行任何插件吗？除非您有一个可以运行 Ruby 的服务器，否则插件不会在本地以外的任何地方运行。出于安全原因，GitHub 不允许运行 Ruby。

我很惊讶它在本地生成得很好，因为你可能应该有`server:true`. 如果这不能解决您的问题，有关您的服务器设置的更多信息会很有帮助。

# c++ - 为什么 std::ifstream 构造函数不采用 std::string？

> ID：12574594
> 
> 赞同：1
> 
> 时间：2012-09-25T00:04:58.513
> 
> 标签：c++, string, constructor, std, ifstream

> **可能重复：**
> [std::ifstream 类的设计](https://stackoverflow.com/questions/4640281/design-of-stdifstream-class)
> [为什么 (i|o)fstream 采用 const char* 参数作为文件名？](https://stackoverflow.com/questions/5972151/why-does-iofstream-take-a-const-char-parameter-for-a-file-name)

查看 std::ifstream 的构造函数，我发现了两个：

```
ifstream ( );
explicit ifstream ( const char * filename, ios_base::openmode mode = ios_base::in ); 
```

为什么第二个需要 a`const char *`而不是 a `const std::string &`？

这是某种避免循环或前向引用吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T00:06:25.663

这是一个简单的遗漏。没有人及时考虑。这已在 C++11 中得到纠正，其中`std::string`也被接受。从 27.9.1.7/3 开始：

> `explicit basic_ifstream(const string& s, ios_base::openmode mode = ios_base::in);`
> 
> *效果：*同`basic_ifstream(s.c_str(), mode)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T00:06:40.110

您的编译器已过时。升级它，你应该找到一个`std::string`构造函数。

# c# - 如何创建密码重置链接？

> ID：12574595
> 
> 赞同：10
> 
> 时间：2012-09-25T00:05:02.200
> 
> 标签：c#, asp.net-mvc, security, forgot-password, password-recovery

您建议以哪种方式在和中创建**安全**的密码重置链接？我的意思是，我会创建一个**随机令牌**，对吧？在发送给用户之前如何对其进行编码？**MD5**够用吗？你知道任何其他安全的方式吗？`MVC``C#`

 ***** * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-25T00:08:32.107

> 我的意思是，我会创建一个随机令牌，对吧？

有两种方法：

*   使用加密安全的随机字节序列，这些字节被保存到数据库（也可以选择散列）并通过电子邮件发送给用户。
    *   这种方法的缺点是您需要扩展您的数据库设计（模式）以拥有一列来存储这些数据。您还应该存储生成字节的 UTC 日期+时间，以使密码重置代码过期。
    *   另一个缺点（或优点）是用户最多只能有 1 个待处理的密码重置。
*   使用私钥对包含重置用户密码所需的最少详细信息 [的 HMAC消息进行签名，并且该消息还可以包括到期日期+时间。](https://en.wikipedia.org/wiki/HMAC)
    *   这种方法避免了需要在数据库中存储任何内容，但这也意味着您无法撤销任何有效生成的密码重置代码，这就是为什么使用较短的到期时间（我认为大约 5 分钟）很重要的原因。
    *   您*可以*将吊销信息存储在数据库中（以及防止多次挂起的密码重置），但这消除了已签名 HMAC 用于身份验证的*无状态特性的所有优点。*

## 方法 1：加密安全的随机密码重置代码

*   使用[`System.Security.Cryptography.RandomNumberGenerator`](https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.randomnumbergenerator?view=netcore-3.1)加密安全的 RNG。
    *   不要使用`System.Random`，它不是加密安全的。
    *   使用它来生成随机字节，然后将这些字节转换为人类可读的字符，这些字符将在电子邮件中存在并被复制和粘贴（即通过使用 Base16 或 Base64 编码）。
*   然后存储那些相同的随机字节（或它们的散列，尽管这对安全性没有太大帮助）。
    *   只需在电子邮件中包含那个 Base16 或 Base64 字符串。
    *   您*可以*在电子邮件中包含一个可单击的链接，其中包含查询字符串中的密码重置代码，但是这样做违反了 HTTP 关于`GET`请求应该能够做什么的准则（因为单击链接始终是`GET`请求，但`GET`请求不应导致状态- 持久数据的更改，只有`POST`,`PUT`和`PATCH`requests 应该这样做 - 这需要用户手动复制代码并提交`POST`Web 表单 - 这不是最好的用户体验。
        *   实际上，更好的方法是让该链接在查询字符串中打开一个带有密码重置代码的页面，然后该页面仍然有一个`<form method="POST">`但它是提交用户的新密码，而不是为他们预先生成一个新密码 - 因此不违反HTTP 的指导方针是在最终`POST`使用新密码之前不会更改状态。

像这样：

1.  扩展您的数据库`Users`表以包含密码重置代码的列：

    ```
    ALTER TABLE dbo.Users ADD
        PasswordResetCode  binary(12)   NULL,
        PasswordResetStart datetime2(7) NULL; 
    ```

2.  在您的 Web 应用程序代码中执行以下操作：

    ```
    [HttpGet]
    [HttpHead]
    public IActionResult GetPasswordResetForm()
    {
        // Return a <form> allowing the user to confirm they want to reset their password, which POSTs to the action below.
    }

    static readonly TimeSpan _passwordResetExpiry = TimeSpan.FromMinutes( 5 );

    [HttpPost]
    public IActionResult SendPasswordResetCode()
    {
        // 1\. Get a cryptographically secure random number:
        // using System.Security.Cryptography;

        Byte[] bytes;
        String bytesBase64Url; // NOTE: This is Base64Url-encoded, not Base64-encoded, so it is safe to use this in a URL, but be sure to convert it to Base64 first when decoding it.
        using( RandomNumberGenerator rng = new RandomNumberGenerator() ) {

            bytes = new Byte[12]; // Use a multiple of 3 (e.g. 3, 6, 12) to prevent output with trailing padding '=' characters in Base64).
            rng.GetBytes( bytes );

            // The `.Replace()` methods convert the Base64 string returned from `ToBase64String` to Base64Url.
            bytesBase64Url = Convert.ToBase64String( bytes ).Replace( '+', '-' ).Replace( '/', '_' );
        }

        // 2\. Update the user's database row:
        using( SqlConnection c = new SqlConnection( CONNECTION_STRING ) )
        using( SqlCommand cmd = c.CreateCommand() )
        {
            cmd.CommandText = "UPDATE dbo.Users SET PasswordResetCode = @code, PasswordResetStart = SYSUTCDATETIME() WHERE UserId = @userId";

            SqlParameter pCode = cmd.Parameters.Add( cmd.CreateParameter() );
            pCode.ParameterName = "@code";
            pCode.SqlDbType     = SqlDbType.Binary;
            pCode.Value         = bytes;

            SqlParameter pUserId = cmd.Parameters.Add( cmd.CreateParameter() );
            pCode.ParameterName = "@userId";
            pCode.SqlDbType     = SqlDbType.Int;
            pCode.Value         = userId;

            cmd.ExecuteNonQuery();
        }

        // 3\. Send the email:
        {
            const String fmt = @"Greetings {0},
    I am Ziltoid... the omniscient.
    I have come from far across the omniverse.
    You shall fetch me your universe's ultimate cup of coffee... uh... I mean, you can reset your password at {1}
    You have {2:N0} Earth minutes,
    Make it perfect!";

            // e.g. "https://example.com/ResetPassword/123/ABCDEF"
            String link = "https://example.com/" + this.Url.Action(
                controller: nameof(PasswordResetController),
                action: nameof(this.ResetPassword),
                params: new { userId = userId, codeBase64 = bytesBase64Url }
            );

            String body = String.Format( CultureInfo.InvariantCulture, fmt, userName, link, _passwordResetExpiry.TotalMinutes );

            this.emailService.SendEmail( user.Email, subject: "Password reset link", body );
        }

    }

    [HttpGet( "/PasswordReset/ResetPassword/{userId}/{codeBase64Url}" )]
    public IActionResult ResetPassword( Int32 userId, String codeBase64Url )
    {
        // Lookup the user and see if they have a password reset pending that also matches the code:

        String codeBase64 = codeBase64Url.Replace( '-', '+' ).Replace( '_', '/' );
        Byte[] providedCode = Convert.FromBase64String( codeBase64 );
        if( providedCode.Length != 12 ) return this.BadRequest( "Invalid code." );

        using( SqlConnection c = new SqlConnection( CONNECTION_STRING ) )
        using( SqlCommand cmd = c.CreateCommand() )
        {
            cmd.CommandText = "SELECT UserId, PasswordResetCode, PasswordResetStart FROM dbo.Users SET WHERE UserId = @userId";

            SqlParameter pUserId = cmd.Parameters.Add( cmd.CreateParameter() );
            pCode.ParameterName = "@userId";
            pCode.SqlDbType     = SqlDbType.Int;
            pCode.Value         = userId;

            using( SqlDataReader rdr = cmd.ExecuteReader() )
            {
                if( !rdr.Read() )
                {
                    // UserId doesn't exist in the database.
                    return this.NotFound( "The UserId is invalid." );
                }

                if( rdr.IsDBNull( 1 ) || rdr.IsDBNull( 2 ) )
                {
                    return this.Conflict( "There is no pending password reset." );
                } 

                Byte[]    expectedCode = rdr.GetBytes( 1 );
                DateTime? start        = rdr.GetDateTime( 2 );

                if( !Enumerable.SequenceEqual( providedCode, expectedCode ) )
                {
                    return this.BadRequest( "Incorrect code." );
                }

                // Now return a new form (with the same password reset code) which allows the user to POST their new desired password to the `SetNewPassword` action` below.
            }
        }

        [HttpPost( "/PasswordReset/ResetPassword/{userId}/{codeBase64}" )]
        public IActionResult SetNewPassword( Int32 userId, String codeBase64, [FromForm] String newPassword, [FromForm] String confirmNewPassword )
        {
            // 1\. Use the same code as above to verify `userId` and `codeBase64`, and that `PasswordResetStart` was less than 5 minutes (or `_passwordResetExpiry`) ago.
            // 2\. Validate that `newPassword` and `confirmNewPassword` are the same.
            // 3\. Reset `dbo.Users.Password` by hashing `newPassword`, and clear `PasswordResetCode` and `PasswordResetStart`
            // 4\. Send the user a confirmatory e-mail informing them that their password was reset, consider including the current request's IP address and user-agent info in that e-mail message as well.
            // 5\. And then perform a HTTP 303 redirect to the login page - or issue a new session token cookie and redirect them to the home-page.
        }
    } 
    ```

## 方法二：HMAC 码

这种方法不需要更改您的数据库，也不需要保留新状态，但它确实需要您了解 HMAC 的工作原理。

基本上它是一个简短的结构化消息（而不是随机不可预测的字节），其中包含足够的信息以允许系统识别应重置其密码的用户，包括到期时间戳 - 为防止伪造，此消息是加密签名的私人 -只有您的应用程序代码知道的密钥：这可以防止攻击者生成自己的密码重置代码（这显然不好！）。

以下是如何生成用于密码重置的 HMAC 代码以及如何验证它：

```
private static readonly Byte[] _privateKey = new Byte[] { 0xDE, 0xAD, 0xBE, 0xEF }; // NOTE: You should use a private-key that's a LOT longer than just 4 bytes.
private static readonly TimeSpan _passwordResetExpiry = TimeSpan.FromMinutes( 5 );
private const Byte _version = 1; // Increment this whenever the structure of the message changes.

public static String CreatePasswordResetHmacCode( Int32 userId )
{
    Byte[] message = Enumerable.Empty<Byte>()
        .Append( _version )
        .Concat( BitConverter.GetBytes( userId ) )
        .Concat( BitConverter.GetBytes( DateTime.UtcNow.ToBinary() ) )
        .ToArray();

    using( HMACSHA256 hmacSha256 = new HMACSHA256( key: _privateKey ) )
    {
        Byte[] hash = hmacSha256.ComputeHash( buffer: message, offset: 0, count: message.Length );

        Byte[] outputMessage = message.Concat( hash ).ToArray();
        String outputCodeB64 = Convert.ToBase64( outputMessage );
        String outputCode    = outputCodeB64.Replace( '+', '-' ).Replace( '/', '_' );
        return outputCode;
    }
}

public static Boolean VerifyPasswordResetHmacCode( String codeBase64Url, out Int32 userId )
{
    String base64 = codeBase64Url.Replace( '-', '+' ).Replace( '_', '/' );
    Byte[] message = Convert.FromBase64String( base64 );

    Byte version = message[0];
    if( version < _version ) return false;

    userId = BitConverter.ToInt32( message, startIndex: 1 ); // Reads bytes message[1,2,3,4]
    Int64 createdUtcBinary = BitConverter.ToInt64( message, startIndex: 1 + sizeof(Int32) ); // Reads bytes message[5,6,7,8,9,10,11,12]

    DateTime createdUtc = DateTime.FromBinary( createdUtcBinary );
    if( createdUtc.Add( _passwordResetExpiry ) < DateTime.UtcNow ) return false;

    const Int32 _messageLength = 1 + sizeof(Int32) + sizeof(Int64); // 1 + 4 + 8 == 13

    using( HMACSHA256 hmacSha256 = new HMACSHA256( key: _privateKey ) )
    {
        Byte[] hash = hmacSha256.ComputeHash( message, offset: 0, count: _messageLength );

        Byte[] messageHash = message.Skip( _messageLength ).ToArray();
        return Enumerable.SequenceEquals( hash, messageHash );
    }
} 
```

像这样使用：

```
 // Note there is no `UserId` URL parameter anymore because it's embedded in `code`:

[HttpGet( "/PasswordReset/ResetPassword/{codeBase64Url}" )]
public IActionResult ConfirmResetPassword( String codeBase64Url )
{
    if( !VerifyPasswordResetHmacCode( codeBase64Url, out Int32 userId ) )
    {
        // Message is invalid, such as the HMAC hash being incorrect, or the code has expired.
        return this.BadRequest( "Invalid, tampered, or expired code used." );
    }
    else
    {
        // Return a web-page with a <form> to POST the code.
        // Render the `codeBase64Url` to an <input type="hidden" /> to avoid the user inadvertently altering it.
        // Do not reset the user's password in a GET request because GET requests must be "safe". If you send a password-reset link by SMS text message or even by email, then software bot (like link-preview generators) may follow the link and inadvertently reset the user's password!
    }
}

[HttpPost( "/PasswordReset/ResetPassword" )]
public IActionResult ConfirmResetPassword( [FromForm] ConfirmResetPasswordForm model )
{
    if( !VerifyPasswordResetHmacCode( model.CodeBase64Url, out Int32 userId ) )
    {
        return this.BadRequest( "Invalid, tampered, or expired code used." );
    }
    else
    {
        // Reset the user's password here.
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-11T15:20:36.570

事实上，我不会做这些。

我遇到了同样的问题，我决定发送一个重置令牌，为此我使用了 JWT 令牌。

在该令牌（已加密）上，您可以设置到期时间。只需创建一个包含客户电子邮件地址的重置令牌作为声明，然后设置您的到期时间，将其存储在您的数据库中（以加密形式）并将其编码并作为 URL 参数放置在链接上。

然后，当您收到请求时，您可以验证令牌是否有效。然后，您可以打开它查看电子邮件地址，然后继续将他们引导到他们帐户的安全密码重置区域。（您可以包括其他声明，例如用户名等）。

要获得 JWT 实现，您可以键入`Install-Package JWT`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T00:07:27.557

我认为您不需要为此目的使用加密字符串。我认为用**Guid**创建一个字符串就足够了。

```
string thatString=Guid.NewGuid("n").ToString(); 
```

针对该特定用户帐户将其保存在您的数据库表中。为具有此字符串的用户创建一个链接并将其发送给他们。当他们点击它时，它会将他们带到一个操作方法，他们会获得与我们存储的这个临时字符串相关联的相应用户记录，并显示用户更新密码的表单。

如果您怀疑 Guid 是否独一无二，请查看[此](https://stackoverflow.com/questions/1705008/simple-proof-that-guid-is-not-unique)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T00:16:04.610

比使用随机数更好的是先加盐然后散列。这是来自安全专家的片段：

```
@using System.Security.Cryptography;
static byte[] GenerateSaltedHash(byte[] plainText, byte[] salt)
{
 HashAlgorithm algorithm = new SHA256Managed();

 byte[] plainTextWithSaltBytes = 
  new byte[plainText.Length + salt.Length];

 for (int i = 0; i < plainText.Length; i++)
 {
  plainTextWithSaltBytes[i] = plainText[i];
 }
 for (int i = 0; i < salt.Length; i++)
 { 
  plainTextWithSaltBytes[plainText.Length + i] = salt[i];
 }

 return algorithm.ComputeHash(plainTextWithSaltBytes);            
} 
```

你可以在这里看到更多关于他的回答：[https ://stackoverflow.com/a/2138588/1026459](https://stackoverflow.com/a/2138588/1026459)

基本上只需创建一个密码。在这里加盐和哈希，然后在用户返回时进行比较。链接的答案还包含比较方法和更深入的盐/散列解释。****

# maven - 使用 shell 命令设置 maven 属性

> ID：12574597
> 
> 赞同：3
> 
> 时间：2012-09-25T00:05:13.547
> 
> 标签：maven

我想从 bash shell 命令中获取一个值并使用该值设置一个属性。我不确定设置属性是要走的路——我想做的是从 Maven 执行的 shell 命令中获取一个值，并使用这个值来命名创建的 jar。

更具体地说，我想使用 git describe 命令获取项目的标签并将此标签附加到 jar 的名称中。

我想在 pom 中做这样的事情：

标签 = git 描述。. . mv '$jarname'.jar '$jarname$tag'.jar

如果我从命令行执行

mvn jar:jar

我不确定即使我有 git 标签，我什至可以影响生成的 jar 的名称，所以这是另一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-11T21:00:06.480

我敢肯定还有很多其他类似的插件，但是您可以使用我的[exec-set-property](http://archiecobbs.github.io/dellroad-stuff/site/dellroad-stuff-maven-plugin/)插件目标来使用 shell 命令的输出来设置 Maven 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:26:39.360

什么最终起作用：

目标是能够将 SHA1 和 git 标签存储在 jar 的清单中。

使用这里找到的 Maven 插件：

[http://code54.com/blog/2012/04/30/buildversion-plugin.html](http://code54.com/blog/2012/04/30/buildversion-plugin.html)

以及 Maven buildnumber 插件。

这两个插件分别设置了 Maven 属性 build-tag 和 buildNumber，然后可以在 Maven Jar 插件的 manifestEntries 部分中指定它们。

# javascript - 有没有办法在 three.js 中捕获 ParticleSystem 或 Sprite 上的鼠标事件？

> ID：12574600
> 
> 赞同：2
> 
> 时间：2012-09-25T00:05:31.033
> 
> 标签：javascript, three.js

尝试了 ThreeX.domEvent（它使用 Projector 和 Ray），但我认为它没有相交的几何形状。有什么方法可以做一个粗略的近似吗？例如。设置一个虚构的粒子大小，甚至更好，使用 Sprite 大小？谢谢。（或者我只是错过了什么？）

# json - JQgrid：使用cellattr和动态数字列设置动态格式单元格

> ID：12574602
> 
> 赞同：2
> 
> 时间：2012-09-25T00:05:46.157
> 
> 标签：json, dynamic, jqgrid, format, cell

我首先需要动态构建网格列，所以我这样做：

```
success: function(data){
                  var colnames = data.colnames;
                  var colmodel = data.colmodel;
                  $("#list").jqGrid({       
                        ...
                        colNames: colnames,
                        colModel: colmodel,  
                        ...}) 
```

在我的 PHP 文件中，我有：

```
$colnames[0] = 'ID';
$colnames[1] = 'Name';
$colnames[2] = 'Total';

$colmodel[0] = array("name"=>'ID', "index"=>'libelle', "width"=>50);
$colmodel[1] = array("name"=>'Name',"index"=>'Name', "width"=>50);
$colmodel[2] = array("name"=>'Total', "index"=>'Total', "width"=>50);

$arraydata = array("page"=>"1", 
              "records"=>"1", 
              "total"=>"1", 
              "colnames"=> $colnames,     
              "colmodel"=> $colmodel,         
              "rows"=>$row,
              ...
              );

$jsondata=json_encode($arraydata);  

return $jsondata; 
```

（我不喜欢直接使用 json 格式，因为它对我来说不太清楚，而且很难将 php 变量转换为 json 格式。）

其次，我需要动态设置单元格格式，如字体颜色或背景颜色等......例如，我想在 colModel 中使用“cellattr”：

```
$colmodel[2] = array("name"=>'Total', "index"=>'Total', "width"=>50, 
"cellattr"=>"function( rowId, val, rowObject, cm, rdata){ if (val>100) return 'style=\"color: orange\"';}"); 
```

但是，我的网格中没有效果“cellattr”。

在 Firebug 下，我有：

```
"colmodel":[{"name":"libelle","cellattr":"function( rowId, val, rowObject, cm, rdata){ return 'style=\"background-color: orange\"';}" 
```

我想也许我们不能在 json 中发送一个函数 js，我不知道......有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T10:31:10.913

我在 Github 中找到了修复，但我没有测试这个修复。

修改`grid.base.j`s中的代码

`acp = celp.split("style");`

至

`acp = celp.split(/[^-]style/);`

# macos - 山狮上的 scipy 安装失败

> ID：12574604
> 
> 赞同：11
> 
> 时间：2012-09-25T00:05:57.757
> 
> 标签：macos, scipy, pip

当我尝试使用 pip install scipy 安装 scipy 时，它失败并出现以下回溯

```
Downloading/unpacking scipy
  Downloading scipy-0.10.1.tar.gz (6.2MB): 6.2MB downloaded
  Running setup.py egg_info for package scipy
    Running from scipy source directory.
    blas_opt_info:
      FOUND:
        extra_link_args = ['-Wl,-framework', '-Wl,Accelerate']
        define_macros = [('NO_ATLAS_INFO', 3)]
        extra_compile_args = ['-msse3', '-I/System/Library/Frameworks/vecLib.framework/Headers']

    non-existing path in '/private/var/folders/rd/fplkflh93ls54kbl5ylphl4h0000gn/T/pip-build/scipy/scipy/io': 'docs'
    lapack_opt_info:
      FOUND:
        extra_link_args = ['-Wl,-framework', '-Wl,Accelerate']
        define_macros = [('NO_ATLAS_INFO', 3)]
        extra_compile_args = ['-msse3']

    umfpack_info:
      libraries umfpack not found in /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib
      libraries umfpack not found in /usr/local/lib
      libraries umfpack not found in /usr/lib
    /usr/local/lib/python2.7/site-packages/numpy/distutils/system_info.py:470: UserWarning:
        UMFPACK sparse solver (http://www.cise.ufl.edu/research/sparse/umfpack/)
        not found. Directories to search for the libraries can be specified in the
        numpy/distutils/site.cfg file (section [umfpack]) or by setting
        the UMFPACK environment variable.
      warnings.warn(self.notfounderror.__doc__)
      NOT AVAILABLE

    Traceback (most recent call last):
      File "<string>", line 16, in <module>
      File "/var/folders/rd/fplkflh93ls54kbl5ylphl4h0000gn/T/pip-build/scipy/setup.py", line 196, in <module>
        setup_package()
      File "/var/folders/rd/fplkflh93ls54kbl5ylphl4h0000gn/T/pip-build/scipy/setup.py", line 187, in setup_package
        configuration=configuration )
      File "/usr/local/lib/python2.7/site-packages/numpy/distutils/core.py", line 152, in setup
        config = configuration()
      File "/var/folders/rd/fplkflh93ls54kbl5ylphl4h0000gn/T/pip-build/scipy/setup.py", line 138, in configuration
        config.add_subpackage('scipy')
      File "/usr/local/lib/python2.7/site-packages/numpy/distutils/misc_util.py", line 1002, in add_subpackage
        caller_level = 2)
      File "/usr/local/lib/python2.7/site-packages/numpy/distutils/misc_util.py", line 971, in get_subpackage
        caller_level = caller_level + 1)
      File "/usr/local/lib/python2.7/site-packages/numpy/distutils/misc_util.py", line 908, in _get_configuration_from_setup_py
        config = setup_module.configuration(*args)
      File "scipy/setup.py", line 20, in configuration
        config.add_subpackage('special')
      File "/usr/local/lib/python2.7/site-packages/numpy/distutils/misc_util.py", line 1002, in add_subpackage
        caller_level = 2)
      File "/usr/local/lib/python2.7/site-packages/numpy/distutils/misc_util.py", line 971, in get_subpackage
        caller_level = caller_level + 1)
      File "/usr/local/lib/python2.7/site-packages/numpy/distutils/misc_util.py", line 908, in _get_configuration_from_setup_py
        config = setup_module.configuration(*args)
      File "/private/var/folders/rd/fplkflh93ls54kbl5ylphl4h0000gn/T/pip-build/scipy/scipy/special/setup.py", line 54, in configuration
        extra_info=get_info("npymath")
      File "/usr/local/lib/python2.7/site-packages/numpy/distutils/misc_util.py", line 2220, in get_info
        pkg_info = get_pkg_info(pkgname, dirs)
      File "/usr/local/lib/python2.7/site-packages/numpy/distutils/misc_util.py", line 2172, in get_pkg_info
        return read_config(pkgname, dirs)
      File "/usr/local/lib/python2.7/site-packages/numpy/distutils/npy_pkg_config.py", line 390, in read_config
        v = _read_config_imp(pkg_to_filename(pkgname), dirs)
      File "/usr/local/lib/python2.7/site-packages/numpy/distutils/npy_pkg_config.py", line 326, in _read_config_imp
        meta, vars, sections, reqs = _read_config(filenames)
      File "/usr/local/lib/python2.7/site-packages/numpy/distutils/npy_pkg_config.py", line 309, in _read_config
        meta, vars, sections, reqs = parse_config(f, dirs)
      File "/usr/local/lib/python2.7/site-packages/numpy/distutils/npy_pkg_config.py", line 281, in parse_config
        raise PkgNotFound("Could not find file(s) %s" % str(filenames))
    numpy.distutils.npy_pkg_config.PkgNotFound: Could not find file(s) ['/usr/local/lib/python2.7/site-packages/numpy/core/lib/npy-pkg-config/npymath.ini'] 
```

我使用的是 Mountain Lion，以及使用自制软件安装的 python 2.7.3，而 numpy 是使用 pip install numpy 安装的。

为什么 scipy 安装失败？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-29T11:27:30.270

这似乎是 pip 和 numpy 的问题，它不会将编译后的库复制到 site-packages 目录中。

您可以使用 pip 安装到 virtualenv（对我有用）或使用

```
python setup.py install 
```

方法。

这里有一些关于问题的评论：

[http://www.thisisthegreenroom.com/2011/installing-python-numpy-scipy-matplotlib-and-ipython-on-lion/](http://www.thisisthegreenroom.com/2011/installing-python-numpy-scipy-matplotlib-and-ipython-on-lion/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-05T09:35:04.233

如果您使用自制软件，您可以尝试以下方法（感谢[https://github.com/pypa/pip/issues/707](https://github.com/pypa/pip/issues/707)）：

```
brew tap samueljohn/homebrew-python
brew install numpy
brew install scipy 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-23T21:06:07.017

如果您不使用`virtualenv`，则可以手动编辑最少的侵入性修复`/usr/local/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg/pip/locations.py`（您的 pip 版本可能会有所不同）。只需将第 35 行替换为：

```
build_prefix = os.path.join(tempfile.gettempdir(), 'pip-build') 
```

到：

```
build_prefix = os.path.realpath(os.path.join(tempfile.gettempdir(), 'pip-build')) 
```

此更改后，您需要重新安装`numpy`( `pip uninstall numpy; pip install numpy`)。然后`scipy`可以通过 pip 正确安装。

该问题是由 pip 错误引起的。上面的解决方案是根据github用户qwcode[的pip补丁](https://github.com/pypa/pip/pull/768/files)（在Lokkju提到[的问题讨论中建议的）。](https://github.com/pypa/pip/issues/707)此补丁似乎已合并到主 pip 存储库。但是，我看不到 brew update pip 的简单方法，因为它与 Python 捆绑在一起。所以只需手动进行这个简单的修复对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-20T12:40:47.657

我在 2015 年使用 MacOSX Yosemite 时遇到了同样的问题。我认为这是由 pip 的旧版本错误引起的。卸载 pip 并获取它的最新版本会有所帮助。[从https://pip.pypa.io/en/latest/installing.html](https://pip.pypa.io/en/latest/installing.html)获取 pip 然后

```
$ sudo pip uninstall scipy
$ sudo pip install scipy 
```

# c# - 实体框架多对多更新

> ID：12574605
> 
> 赞同：0
> 
> 时间：2012-09-25T00:06:18.733
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework

一个图像有很多画廊，一个画廊有很多图像。我正在尝试更新画廊拥有的图像。下面的代码有效，但感觉有些笨拙。

```
 var g=db.Galleries.Find(gal.Id);

   var ims = gal.Images.Select(i => db.Images.Where(im => im.Id == i.Id && im.User.Id == user.Id)).SelectMany(im => im).ToList();

   g.Name = gal.Name;

   g.Images.Clear();

   foreach (var im in ims)
   {
        g.Images.Add(im);
   }

   db.SaveChanges(); 
```

当我这样做时：

```
g.Images=ims; 
```

代替：

```
 g.Images.Clear();

   foreach (var im in ims)
   {
        g.Images.Add(im);
   } 
```

抛出异常：

```
Violation of PRIMARY KEY constraint 'PK_GalleryImages'. Cannot insert duplicate key in object 'dbo.GalleryImages'. 
```

你能解释一下为什么吗？有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:05:59.577

当您这样做时，如果表中尚不存在实体框架，则实体框架将在表中`g.Images.Add(im)`添加一个带有`galleryId`and的新行。`imageId``dbo.GalleryImages`

另一方面，当你这样做时`g.Images=ims`，你实际上是在告诉实体框架添加一个新关系（GalleryImages 表中的新行）。如果您要将新图像添加到图库中，效果`g.Images=ims`会很好。

# assembly - 字符串不会在汇编程序中打印出来

> ID：12574608
> 
> 赞同：1
> 
> 时间：2012-09-25T00:06:41.723
> 
> 标签：assembly, x86, keyboardinterrupt

我正在尝试通过 DOS 中的汇编程序 x86 学习一些深度编程，因为它启用了真实地址模式。但是在我尝试这样做时，我试图制作一个程序来打印用户是否按下了其中一个控制键；CTRL、CAPS LOCK 或 SCROLL LOCK，但问题是程序不打印出来。感觉好像缺乏某种基础知识，所以我问这里是否有人知道我的程序有什么问题。如果我按 q （如退出），它不会写出任何内容但能够关闭？..谢谢

```
;reads the key and prints out whether a control key has been entered 
; (CTRL, CAPS LOCK or SCROLL LOCK)

[BITS 16]

SEGMENT data
ctrlmsg           db    'ctrl has been pressed', '$'
capslockmsg       db    'caps lock has been pressed', '$'
scrollmsg         db    'scroll lock has been pressed', '$'

SEGMENT code
..start:
mov ax, pile
mov ss, ax
mov ax, topofstack
mov sp, ax
mov ax, data
mov ds, ax
mov ax, ctrlmsg

WAITER:
    mov ah, 00h
    int 16h
    cmp al, 71h          ; user pressed q, and wants to end program
    je END
    mov ah, 02h          ; wait until user press keyboard and return keyboard flag in AL
    int 16h
    add al, 71h          ; add 71h back to al, so it goes unchanged in other comparisons
    cmp al, 02h          ; if key board flag is 02h then I expect user to have pressed CTRL
    je CTRL              ; then jump to CTRL label, in the same way it goes...
    add al, 02h
    cmp al, 04h
    je SCROLLOCK
    add al, 04h
    cmp al, 06h
    je CAPSLOCK
    jmp WAITER

END:
    mov ax, 04c00h        ; ends program
    int 21h

WRITESTRING:
    mov ah, 13h           ; 13h of int 10 is print string
    mov al, 00h           ; write mode 0 (no attributes)
    mov bh, 0h            ; video page number
    mov bl, 07h           ; foreground color
    mov cx, 05h           ; string length
    mov dh, 25            ; row
    mov dl, 80            ; col
    int 10h
    ret

CTRL:                     ; the other labels CAPS LOCK and SCROLL LOCK are quite similar why I haven't included them in the codesnippet
    push ds               ; save ds for subroutine 
    pop es                ; pop it in es
    push bp
    move bp, ctrlmsg      ; base pointer point to string
    call WRITESTRING
    pop bs
    jmp waiter            ; loop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:12:13.500

我对 BIOS 调用的确切行为的记忆`int 16h`是模糊的，但我认为自己按下的切换（capslock/numlock/scrolllock）或修饰符（shift/ctrl/alt）键根本不会从`int 16h`. 一旦用户按下非修改键，这些键用于修改实际返回的*内容*。

要获得实际的击键，您可能需要为 IRQ 9 编写 ISR（我很确定这是键盘硬件中断的编号）。那时，您可以获得键盘上*每个*键的原始“make”和“break”扫描码，并采取任何您想要的操作。（当然，在 ISR 中，该操作可能应该仅限于将按键信息存储在缓冲区中，以便以后在 ISR 之外进行处理。）

另外，我注意到您在程序开始时进行设置`ss`，`sp`但 DOS 会自动为您设置堆栈。通常，您根本不必这样做。但是，如果您这样做，则应始终在修改寄存器期间使用`cli`和禁用中断。如果在您已更改但尚未`sti`更改时发生中断，则 ISR 将覆盖您可能不打算的内容。`ss``sp`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:31:42.887

格雷格是对的。您不必加载 ss:sp。我知道它在手册中的示例中显示了这一点，但是如果您的堆栈声明正确，dos 会为您执行此操作。你没有表现出来。应该是这样的：

 `````
segment pile stack ; the "stack" is important!
    resw 100h ; should be enough for anybody 
````  `你必须像你一样加载 ds 。我也会在这个时候做 es，而不是把它留到“CTRL：”。您的“Writestring”取决于它。（奇怪的中断，10h/13h！）

int 16h, ah=0 对于旧的 83 键键盘是正确的。它会“几乎”获得所有击键，但会漏掉一些。我已经把自己搞糊涂了！（很久以前，但我还记得！） ah=10h 用于现代键盘。无论哪种方式，您检查“q”并退出。到目前为止，一切都很好！

然后你会得到带有 int 16h/2 的标志。之后你的逻辑让我无法理解！您要在键盘标志中添加 71h 吗？然后将其与2进行比较？我不认为你的任何条件跳转都被采取了。这可以解释为什么什么都没有打印出来！:)（您还打印到第 25 行第 80 列，这看起来很奇怪）

我认为您想使用...（等待它）“测试”指令来测试标志。由于这些条件中的一个以上可能是真的，也许像......

 `````
 test al, 4 ; bit 2 - control key
    jnz notctrl
    call print_control
notctrl:
    test al, 16 ; bit 4 - scrollock active
    jnz not_scrl
    call print_scroll
notscrl:
    test al, 64 ; bit 6 - capslock active
; etc... 
````  `显然，您必须在子例程中保留 al 。Greg 也是对的，如果您正在为键盘编写自己的 int 9 (irq 1) 处理程序，您应该将此信息保存在缓冲区中。现有的处理程序正是这样做的。在 Bios 数据区的 40h 段...我忘记了偏移量...您会找到这些标志。这就是 int 16h/2 找到它们的地方，我很确定。您可以自己在那里访问它们，但 BIOS 中断可能更容易（也许可以作为练习尝试？）。

最后但同样重要的是，wtf 是“pop bs”？BS 不是段寄存器。Nasm不会接受任何BS！CPU不会接受任何BS！:)

最好的，弗兰克````

# css - 为什么 CSS3 中没有一种单一的垂直居中方式？

> ID：12574613
> 
> 赞同：2
> 
> 时间：2012-09-25T00:07:13.093
> 
> 标签：css, vertical-alignment

读完这篇[*“在树林里”的博文后*](http://blog.themeforest.net/tutorials/vertical-centering-with-css/)，我想知道：

**为什么 CSS3 中没有一种单一的垂直居中方式？**

为什么我不能只`<div>`使用 CSS 属性`vertical-align: center`来让我的内容垂直居中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T00:10:46.043

`vertical-align: center`如果您制作容器，则可以使用`display: table-cell`

[**浏览器支持**](http://caniuse.com/#search=table-cell)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T00:13:45.890

这个名字可能有点混乱。css 声明`vertical-align`不适用于将某些内容垂直居中于其父级中（除非我们谈论的是表格单元格）。相反，它用于设置声明规则的元素的垂直对齐方式。

如果您正在使用`inline-block`让一些元素彼此相邻并表现出来，这将非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T00:24:39.047

您可能希望支持[灵活框布局模块](http://www.w3.org/TR/css3-flexbox/)：

> **抽象的**
> 
> 该规范描述了针对用户界面设计优化的 CSS 框模型。在 flex 布局模型中，flex 容器的子级可以在任何方向上布局，并且可以“伸缩”它们的大小，要么增长以填充未使用的空间，要么缩小以避免溢出父级。孩子的水平和垂直对齐都可以很容易地操作。这些框的嵌套（水平内垂直，或垂直内水平）可用于构建二维布局。

[并从提议的规范中](http://www.w3.org/TR/css3-flexbox/#flex-containers)注意这一点：

> 弹性容器为其内容建立一个新的弹性格式化上下文。这与建立块格式化上下文相同，只是使用 flex 布局而不是块布局：浮动不会侵入 flex 容器，并且 flex 容器的边距不会与其内容的边距一起折叠。Flex 容器为它们的内容形成一个包含块，就像块容器一样。
> 
> *弹性容器不是块容器*，因此一些在块布局假设下设计的属性不适用于弹性布局的上下文。尤其：
> 
> *   Multicol 模块中的所有**'column-*'**属性都对 flex 容器没有影响。
> *   **'float'**和**'clear'**对弹性项目没有影响。
> *   ***'vertical-align'**对弹性项目没有影响。*

请记住，这个规范还很早，并且已经替换了以前的版本（被这个）。因此，它试图解决一些似乎应该“解决”的常见布局问题，现在开始称它为可行的显然还为时过早。

但我们可以希望，不是吗？

*   [MDN CSS 软盒](https://developer.mozilla.org/en-US/docs/CSS/Flexbox)
*   [使用 CSS 灵活框](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_flexible_boxes)

# php - Jquery ajax 选择下拉适用于 FF 和 chrome 但不适用于 IE 7-9

> ID：12574616
> 
> 赞同：0
> 
> 时间：2012-09-25T00:07:33.970
> 
> 标签：php, jquery, mysql, ajax

我知道这个问题已经被问过很多次了，你们可能都已经厌倦了。我只是被困住了，已经在这上面花了大约 4 个小时。我已经阅读了很多关于

```
 cache:false, 
```

选项并添加某些“内容类型”，但是当我这样做时，它不再适用于任何浏览器。

我按照此处找到的教程进行操作：[http ://www.x-developer.com/php-scripts/loading-drop-downs-with-ajax-php-and-fetching-values-from-database-without-refreshing-这页纸](http://www.x-developer.com/php-scripts/loading-drop-downs-with-ajax-php-and-fetching-values-from-database-without-refreshing-the-page)

我当然根据自己的需要对其进行了修改，主要是 mysql 和标识符。

这就是我的头部部分：

```
 <script type="text/javascript">
    function get_cities(country)
    {

    $.ajax({
    type: "POST",
    url: "/cities.php", 
    cache: false,
    beforeSend: function () {
    $("#state").html("<option>Loading ...</option>");
    },
    data: "country="+country,
    success: function(msg){
    $("#state").html(msg);

    }
    });
    } 
    </script> 
```

在 IE 中，它进入 Loading.... 部分，并且什么也不做，它不会像在 Chrome 和 FF 中那样填充选项字段。

您是否在教程中看到他可能遗漏的对 IE 中的操作至关重要的内容？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:26:55.850

尝试将数据对象设置为键值对..

代替

```
data: "country="+country, 
```

尝试

```
data: { "country" : country }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T04:35:20.100

假设您`$("#state")`已经是一个下拉列表。

在 中`cities.php`，您需要删除`<select>`标签。

```
<?php
// Code for cities.php
$country_id = $_REQUEST['country_id'];

$sql_city = "SELECT * FROM CITY WHERE country_id = '".$country_id."'";
$result_city = mysql_query($sql_city);

// REMOVE THIS LINE
//echo "<select name='city'>";

while($row_city = mysql_fetch_array($result_city))
{
echo "<option value='".$row_city['id']."'>".$row_city['city']."</option>";
}

// AND REMOVE THIS LINE  
// echo "</select>";

?> 
```

# excel - excel将单元格值加在一起并放入一个新的

> ID：12574619
> 
> 赞同：0
> 
> 时间：2012-09-25T00:07:54.057
> 
> 标签：excel, vba

这是我尝试的代码：

```
Set found = Worksheets("Result").Range("A:A").Find(Prefix, , xlValues, xlWhole)
found.Offset(0, 1).Value = CInt(found.Offset(0, 1).Value) + CInt(C.Offset(0, 1).Value) 
```

前缀是在列中找到的 3 位数字，然后我想要做的是在“C”右侧的一个单元格中找到它的右侧的单元格。我收到类型不匹配错误。

这是 c 的来源：

```
For Each C In Worksheets("AMZ").Range("C2:C" & endRow).Cells 
```

有任何想法吗？

编辑：完整代码

```
Sub processData()

Dim endRow As Variant
endRow = Worksheets("AMZ").Range("A65536").End(xlUp).Row

For Each C In Worksheets("AMZ").Range("C2:C" & endRow).Cells
    Dim found As Range
    Prefix = C.Value
    C.Select

    'remove prefix
    If Not Left(Prefix, 3) = "FBA" Then
        'nothing
        If Mid(Prefix, 3, 1) = "-" Then
            Prefix = Left(Prefix, 2)
        ElseIf Mid(Prefix, 4, 1) = "-" Then
            Prefix = Left(Prefix, 3)
        Else
            Prefix = "-1"
        End If

        If Not Prefix = "-1" Then
            Set found = Worksheets("Result").Range("A:A").Find(Prefix, , xlValues, xlWhole)
            found.Offset(0, 1).Value = CInt(Val(found.Offset(0, 1).Value)) + CInt(Val(C.Offset(0, 1).Value))
        End If
    End If
Next

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:48:52.740

如果`found.Offset(0, 1).Value)`or`CInt(C.Offset(0, 1).Value)`是字符串值，例如`""`or`"1234hello"`或任何不直接转换为整数的值，则会收到您列出的错误。

更正此问题的最简单方法是用[Val(string)](http://msdn.microsoft.com/en-us/library/office/gg264296.aspx)函数包围该值。在您的情况下，您将使用以下内容

`found.Offset(0, 1).Value = CInt(Val(found.Offset(0, 1).Value)) + CInt(Val(C.Offset(0, 1).Value))`

关于 Val 的说明，如果您提供的值不可能是数字，它将默认为 0。否则它将在提供的字符串的开头采用任何数字。有关[Val 的更多信息，请阅读链接。（同上）](http://msdn.microsoft.com/en-us/library/office/gg264296.aspx)

# sql-server - 在 2 个不同的服务器上将对称密钥与 SQL Server 一起使用

> ID：12574620
> 
> 赞同：0
> 
> 时间：2012-09-25T00:08:01.490
> 
> 标签：sql-server, encryption-symmetric

有谁知道在给定相同的证书主密钥和密钥凭据的情况下，使用对称密钥加密的字段在不同服务器上的输出是否完全相同？
我想从开发人员批量复制到测试服务器，并想知道加密是否会继续。 [在 MSDN 上创建对称密钥](http://technet.microsoft.com/en-us/library/ms188357%28v=sql.105%29.aspx)

谢谢！

对于那些看不到的人，我忘记了一个逗号，为了清除它，一个主密钥、一个证书和一个密钥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:20:06.210

> 给定相同的证书主密钥和密钥凭据

没有“证书主密钥”这样的概念。不要发明你自己的术语，坚持现有的命名法，这样每个人都明白你在说什么。有万能钥匙，有证书。

*如果*您遵循良好实践并部署了正确的[加密层次结构](http://msdn.microsoft.com/en-us/library/ms189586.aspx)，那么您的数据应该使用一个或多个对称密钥加密，而这些对称密钥又将使用使用数据库主密钥或密码加密的证书进行加密。

可以在数据库之间复制使用对称密钥加密的数据。为了成功，您需要完全按照[在两台服务器上创建相同的对称密钥中](http://technet.microsoft.com/en-us/library/ms366281.aspx)描述的步骤操作，这将产生一对具有相同身份和相同密钥材料的密钥。使用两台服务器之一加密的数据可以在另一台服务器上解密。

话虽如此，任何对数据足够认真以在生产中对其进行加密并同时愿意在开发机器上创建加密密钥的副本，更不用说将实际敏感数据复制到开发盒的组织，都是一个笑话恕我直言。[技术从来都不是薄弱环节](http://www.codinghorror.com/blog/2012/09/computer-crime-then-and-now.html)。

# custom-post-type - 不会为所有自定义帖子类型保存或显示帖子修订

> ID：12574628
> 
> 赞同：5
> 
> 时间：2012-09-25T00:09:51.160
> 
> 标签：custom-post-type, revisions

我的网站使用了许多自定义帖子类型以及传统的“帖子”和“页面”类型。对于所有“帖子”和“页面”的修订，它们应该显示，编辑历史可见，比较帖子的选项，等等。对于所有自定义帖子类型，我根本没有修订历史。在functions.php中定义这些帖子类型时，我已经启用了修订，因此在这些帖子类型中的每一个上，我都会看到一个空白选项卡，上面写着“修订”，但不显示或收集任何修订数据。

我不知道如何解决这个问题，任何帮助将不胜感激！

提前感谢您的任何帮助。

如果它有助于解决这个问题，我可以发布我的functions.php 文件......请问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-28T06:53:35.703

我知道这是一个旧的 Q，但只是遇到了同样的问题并修复了它......

在您的自定义帖子类型 args 数组（在 functions.php 中）中，将 'revisions' 添加到 'supports' 数组中：

```
$args = array(....., 'supports' => array(..., 'revisions'),......); 
```

**但是请注意，这不会对该帖子类型的旧页面生效**，只会对从现在开始创建的新页面生效

如果您正在对自定义帖子类型做任何事情，那么[这篇文章](http://wp.smashingmagazine.com/2012/11/08/complete-guide-custom-post-types/ "这个")很棒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T06:15:40.837

As far as I know, Wordpress by default does not store revisions for custom post meta. However, there is a great article on how to add revisions to post meta [http://lud.icro.us/post-meta-revisions-wordpress/](http://lud.icro.us/post-meta-revisions-wordpress/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T16:50:02.930

我遇到了同样的问题，没有一个明显的答案有效。我在 WPSE 上添加了相同问题的答案：[https ://wordpress.stackexchange.com/a/109782/11966](https://wordpress.stackexchange.com/a/109782/11966)

这是令人沮丧的简单...

# javascript - 如何“关联”元素

> ID：12574631
> 
> 赞同：2
> 
> 时间：2012-09-25T00:10:23.707
> 
> 标签：javascript, jquery

我想知道如何“关联”两个 HTML 元素。例如，假设用户单击一个选择项，我希望与该元素“相关”的元素消失。

```
<div id="game1Selection">I pick team1</div>
<div id="game2Selection">I pick team2</div>

<div id="game1">This is game 1</div>
<div id="game2">This is game 2</div> 
```

我想要发生的是，当用户选择“game1Selection”时，div“game1”将消失，而对于 game2、game3 等也是如此。我知道如何做到这一点：

```
$('#game1Selection').click( function() {
  $('#game1').toggleClass('selected');
});  //selected has the attribute display:none 
```

我怎样才能使它们中的两个相关，所以我不必写很长的路而只需使用`this`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T00:13:14.763

### *[jsBin 演示](http://jsbin.com/ezejac/1/edit)*

```
$('div[id$=Selection]').click(function(){
   var myID = this.id.split('Selection')[0];
   $('#'+myID).toggleClass('selected');
}); 
```

使用带选择器的*结尾*并通过拆分原始 ID 并获取名称的第一 ( ) 部分来`$`检索**ID名称的第一部分****(gameN)**`[0]`

 *** * *

## *[一个更好的想法演示](http://jsbin.com/ezejac/5/edit)*

**但一个更好的例子是使用这个 HTML**：

```
<div>
    <div class="selection">I pick team1</div>
    <div class="selection">I pick team2</div>
</div>

<div class="game">This is game 1</div>
<div class="game">This is game 2</div> 
```

并检索单击的元素`index()`并使用以下方法找到匹配的元素`.eq()`：

```
$('.selection').click(function(){
   var i = $(this).index();
   $('.game').removeClass('selected').eq(i).addClass('selected');
}); 
```

这将允许您删除已经存在的`selected`类并将其分配给*索引匹配*元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T00:15:55.373

将类用于类似行为，并从 id 中获取数字。

```
<div id="game1Selection" class="selection">I pick team1</div>
<div id="game2Selection" class="selection">I pick team2</div>

<div id="game1" class="game">This is game 1</div>
<div id="game2" class="game">This is game 2</div> 
```

* * *

```
$('.selection').click( function() {
    $("#" + this.id.replace("Selection", "")).toggleClass('selected');
    $('.game').not(this).removeClass('selected');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T00:37:52.557

我更喜欢使用 HTML5 的`data-*`属性来使关联更加明确：

```
<div class="selector" data-fadetarget="game1">I pick team1</div>
<div class="selector" data-fadetarget="game2">I pick team2</div>

<div id="game1">This is game 1</div>
<div id="game2">This is game 2</div> 
```

JavaScript：

```
$('.selector').click( function() {
    var target = '#' + $(this).data('fadetarget');
    $(target).toggleClass('selected');
}); 
```

使用这种方法，关联在标记中是明确的，并且在重新排列时不会失败。**

# ios - 声明块内联方法调用时发生错误访问崩溃

> ID：12574632
> 
> 赞同：0
> 
> 时间：2012-09-25T00:10:24.383
> 
> 标签：ios, automatic-ref-counting, objective-c-blocks, xcode4.5

我们正在处理一些调用枚举方法的代码：

```
- (void)enumerateRangesOfString:(NSString*)string usingBlock:(void (^)(const NSRange range, volatile BOOL * const stop))block; 
```

在我们切换到 ARC 之前，这一切都很好。

当我们查看调用它的代码时，如果我们唯一声明了该块，应用程序就会停止崩溃：

```
id block = ^(const NSRange range, volatile BOOL * const stop) {
                [solutions_ addObject:object];
            };

[[puzzle_ stringForSolution:solution enumerateRangesOfString:word usingBlock:block]; 
```

当块在方法调用中被声明时，应用程序崩溃了。我们（我）真的不知道为什么这会解决问题，但我同意了，因为我不想一直把头撞到墙上。

问题是，在调用方法时，每个块的内联声明似乎都是如此。在我将 AFNetworking 库添加到应用程序后，我的应用程序不断崩溃。问题是我真的不想修改这个库的所有代码，我假设我的代码有问题。当我将块声明为内联时，此问题继续导致崩溃，而不是当我将块拉出并单独声明时。

我在其他几个应用程序中使用 AFNetworking。显然我们都知道块应该可以声明为内联。这使我得出结论，错误不在方法的调用中，而是在这个项目中的某个地方崩溃了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T00:36:30.920

我很确定您的问题的根本原因是当该方法返回时您的块参数确实超出了范围。我的理解是，采用块参数的 Apple 类会立即将 block_copy() 转换为 ivar（即 block foo = block_copy(parameter)）。

# jquery - 如何根据用户角色隐藏 jQuery 数据表中的列

> ID：12574635
> 
> 赞同：0
> 
> 时间：2012-09-25T00:11:03.890
> 
> 标签：jquery, ruby-on-rails-3.2, datatables

我实现了一个 jQuery 数据表，它工作得很好。但是，基于用户角色，我想隐藏一列。为了解决这个问题，在 Rails 中，我可以在视图/模板中设置条件。但这不起作用，因为在每次请求时，我都会收到一条警报，告诉我缺少多少行数据需要拉入。关于如何解决这个问题的任何想法？非常感激。
阿列克

# c# - SQLite 和 Windows Metro，正确查询不返回数据

> ID：12574636
> 
> 赞同：2
> 
> 时间：2012-09-25T00:11:08.040
> 
> 标签：c#, sqlite, microsoft-metro, windows-store

我有一个奇怪的问题，

我在 Windows 8 应用程序上使用 SQLite，一切正常……除了一个查询。

我对 4 个不同的查询使用相同的方法（它们都返回相同的列），映射是正确的，因为其中至少有一个正在工作。

问题是......查询没有返回任何结果，如果我复制我的 sql 语句并手动将其运行到 sqlite 中，它可以工作并返回 14 行......

我的 sql 语句是：“从 word_sense 中选择 w1.word_sense，w2.word 作为 w1，word_sense 作为 w2，其中 w1.equiv_word = 'A' and w1.ID = w2.ID and w1.word_sense != w2.word_sense and w2\. usage & 66294!= 0 and w2.usage &3072= 0 order by w1.word_sense, w2.word"

执行查询的代码行是：

列出同义词 = 等待 DBHelper.Instance.QueryAsync(sql);

映射是：

```
public class WordSynonymMapping
{
    [SQLite.Column("word_sense")]
    public int WordSense { get; set; }

    [SQLite.Column("word")]
    public string Word { get; set; }
} 
```

我找不到解决办法...

这是一个实际有效的声明的副本......

“选择 w1.word_sense, e.example 作为 word_sense w1 中的单词, 示例 e 其中 w1.equiv_word = 'A' and w1.usage & 0 = 0 and e.word_sense = w1.word_sense order by w1.word_sense, e.example "

有人可以帮我吗？我被卡住了，不知道如何继续。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T01:35:45.887

只是对于其他有同样问题的人......我的数据库缺少一些索引，显然没有这些索引，查询最多需要 2 秒......并且 SQLite 在需要这么多时间时返回空。

# ruby-on-rails - 如何在 rails 3 中将此 link_to_function 转换为 link_to

> ID：12574638
> 
> 赞同：1
> 
> 时间：2012-09-25T00:11:32.663
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有这个link_to_function

```
 = link_to_remote 'Populate Info From ID', :url => {:controller => 'something', 
  :action => 'populate_from_id'}, 
  :with => "'id=' + $('account_id').value + '&field_prefix=purchaser'", 
  :update => {:failure => 'account_id_error'} 
```

我已经在 Rails 升级中转换了其中许多`, :remote => true, :method => :post`

但我不知道如何添加条件来获取价值......任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T01:43:20.543

在 Rails 3 link_to 帮助器中，所有代表回调的 AJAX 特定选项都消失了。您必须编写自己的 javascript 来处理更复杂的远程操作，例如您的示例。

这是一个快速重写：

```
# Your template

= link_to 'Populate Info From ID', :url => {:controller => 'something', 
  :action => 'populate_from_id'}, :id => "#populate_info"

# In javascript, assuming jquery and 
# an element #account_id with a data-id attribute
$("#populate_info").on("click", function() {
  $.ajax({
    method: "POST",
    data: { id: $('#account_id').data("id"), field_prefix: "purchaser" }
    error: account_id_error
  });
  return false;
}); 
```

有用的博文：[http](http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/) ://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/ 这里有很多很棒的文档：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T01:50:42.487

你打败了我我想出了这个

```
$('.populate_id').click(function(e){
  e.preventDefault();
  var url = $(this).attr('href'); 
  var failure = $('#' + $(this).attr('failure'));
  failure.html('');
  var element = $('#' + $(this).attr('element'));
  var id = element.val();
  var url_extra = 'account_id=' + id + '&field_prefix=purchaser';
  $.ajax({
      url: url,
      data: url_extra,
      type: 'post',
      error: function (data) {
        failure.html(data.responseText);
      }
    });
  return false;   
}); 
```

# javascript - 使用 Autobahn Python 和 Google Chrome 延迟 websocket 通信

> ID：12574643
> 
> 赞同：0
> 
> 时间：2012-09-25T00:12:34.970
> 
> 标签：javascript, python, html, websocket, autobahn

这是我正在使用的内容：

网络服务器.py：

```
import sys

from twisted.internet import reactor
from twisted.python import log

from autobahn.websocket import WebSocketServerFactory, \
                               WebSocketServerProtocol, \
                               listenWS

class EchoServerProtocol(WebSocketServerProtocol):

   def onMessage(self, msg, binary):
      print "sending echo:", msg
      self.sendMessage(msg, binary)

if __name__ == '__main__':

   log.startLogging(sys.stdout)

   factory = WebSocketServerFactory("ws://localhost:9000", debug = False)
   factory.protocol = EchoServerProtocol
   listenWS(factory)

   reactor.run() 
```

背景.js：

```
function updateCookies(info) {
    send();
    console.log(info.cookie.domain);
}

function send() {
    msg = "TEST";
    sock.send(msg);
};

var sock = null;
sock = new WebSocket("ws://localhost:9000");
console.log("Websocket created...");

sock.onopen = function() {
    console.log("connected to server");
    sock.send("CONNECTED TO YOU");
}

sock.onclose = function(e) {
    console.log("connection closed (" + e.code + ")");
}

sock.onmessage = function(e) {
    console.log("message received: " + e.data);
}

chrome.cookies.onChanged.addListener(updateCookies); 
```

现在，在运行 webserver.py 和运行 background.js 后，什么也没有发生。客户端看到没有回声，服务器没有报告任何连接或消息。但是，如果我重新加载 background.js，服务器会突然显示之前的“CONNECTED TO YOU”消息。再次重新加载会产生相同的效果，显示延迟的“CONNECTED TO YOU”消息。我在发送消息后尝试运行 sock.close() ，但这仍然没有产生任何结果。我真的很困惑是什么导致了这种随机延迟。让服务器运行 10 到 15 分钟也不会产生任何结果，我必须在看到任何消息之前手动刷新页面。知道可能是什么原因造成的吗？

# android - Android ImageView 自动处理图像方向

> ID：12574649
> 
> 赞同：1
> 
> 时间：2012-09-25T00:13:32.790
> 
> 标签：android, imageview, orientation

我正在尝试在 Android 应用程序的 ImageView 对象中显示图像。看起来 ImageView 不会自动处理图像方向。（例如，以纵向模式拍摄的照片以横向模式显示）。是否有任何属性可以设置为自动处理图像方向。

我可以通过读取 Exif 方向数据然后显式调用旋转方法以编程方式解决此问题，该方法仅在 Os 11 及更高版本中可用，因此不能将其用于 2.x Android 系统。来自 iPhone 编程背景，我发现这个解决方案相当复杂（而且昂贵？？）。

有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T02:19:45.903

您需要做的是覆盖 onConfigurationChanged(...,Config config) 方法并重新获取可绘制对象。您必须将您的可绘制对象放在相关文件夹中（drawable-hdpi、drawable-ldpi 等。名称相同但大小不同）。Android 会自动获得正确的drawable。

我刚刚给了你概述，让我知道是否需要解释:)

# python - 为什么数据库更改只显示在当前游标中？

> ID：12574650
> 
> 赞同：1
> 
> 时间：2012-09-25T00:13:41.120
> 
> 标签：python, mysql, mysql-python

我在表中插入一行，当我使用相同的光标从中选择数据时，它工作正常。但是当我尝试通过其他方式查看它或创建一个新光标时，它似乎神奇地消失了。这就是我的意思：

```
>>> cur = MySQLdb.connect(user='alex', db='testing').cursor()
>>> target = 'Alex'
>>> cur.execute("""INSERT INTO user_data (nick, points) VALUES (%s, 100);""", (target.lower()))
1L
>>> cur.execute("""SELECT points FROM user_data WHERE nick = %s;""", (target.lower()))
1L
>>> total = str(cur.fetchone()[0])
>>> print total
100
>>> cur = MySQLdb.connect(user='alex', db='testing').cursor()
>>> cur.execute("""SELECT points FROM user_data WHERE nick = %s;""", (target.lower()))
0L
>>> total = str(cur.fetchone()[0])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'NoneType' object has no attribute '__getitem__'
>>> 
```

谁能告诉我为什么 MySQLdb 会这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T00:16:50.653

请参阅有关自动提交的信息：http: [//mysql-python.sourceforge.net/FAQ.html#my-data-disappeared-or-won-t-go-away](http://mysql-python.sourceforge.net/FAQ.html#my-data-disappeared-or-won-t-go-away)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T00:17:07.713

我相信你的问题是你没有提交你的交易。尝试`commit()`在插入后调用。

也就是说，你必须做

```
conn = MySQLdb.connect(user='alex', db='testing')
cur = conn.cursor()
cur.execute("""INSERT INTO user_data (nick, points) VALUES (%s, 100);""", (target.lower()))
conn.commit() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T00:17:25.173

您应该阅读有关[ACID](http://en.wikipedia.org/wiki/ACID)的信息，例如在使用 InnoDB 时 MySQL 支持它。

您遇到的是[Isolation](http://en.wikipedia.org/wiki/Isolation_%28database_systems%29)属性：您的两个连接打开了两个不同的事务（通过这样做`MySQLdb.connect(user='alex', db='testing').cursor()`两次，您所做的不仅仅是创建两个游标，您还创建了两个连接）。如果您希望更改在后续事务中可见，则需要在打开新事务之前提交事务。

通常也值得阅读[有关 InnoDB 事务模型的章节](http://dev.mysql.com/doc/refman/5.5/en/innodb-transaction-model.html)（或您正在使用的引擎的章节）。

# c# - 如何将十六进制字符串中的地址转换为字节版本？

> ID：12574652
> 
> 赞同：0
> 
> 时间：2012-09-25T00:13:58.510
> 
> 标签：c#, winforms, bytearray, byte

我想取一个地址让我们说。0x8402e42d，但它目前是字符串形式，即 8402e42d。我想要它，所以我按下一个按钮，它将字符串从文本框中取出，在本例中为 8402e42d，并将其转换为 0x8402e42d。我曾经知道如何做到这一点，但我忘记了。在此先感谢您的帮助。

我也希望知道这样做的最简单方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T00:26:28.983

要将其转换为具有十六进制前缀的字符串，您只需添加前缀：

```
address = "0x" + address; 
```

要将字符串转换为数字，请使用以下`Parse`方法：

```
uint n = UInt32.Parse(address, NumberStyles.HexNumber); 
```

（注意：您应该解析没有十六进制前缀的字符串`0x`。）

如果您想要一个字节数组而不是单个数值，请使用以下`BitConverter.GetBytes`方法：

```
byte[] data = BitConverter.GetBytes(n); 
```

请注意，数组中的字节将按本机顺序放置，即在 little endian 系统（例如 Intel）上，最低有效字节在前。

您可以检查该`BitConverter.IsLittleEndian`属性以找出系统的字节序，并反转数组以获得特定的字节序：

```
if (BitConverter.IsLittleEndian) {
  Array.Reverse(data);
} 
```

# r - R保留行顺序ggplot2 geom_tile

> ID：12574653
> 
> 赞同：0
> 
> 时间：2012-09-25T00:14:05.510
> 
> 标签：r, ggplot2

我正在尝试绘制一些分类数据，这个[答案](https://stackoverflow.com/a/10400762/163809)非常接近我想要做的事情，但是在我的情况下，我在这个例子中看到的国家有日期。如何使用 data.frame 中的原始行顺序创建绘图？看起来即使这些因素在图中的顺序相同，`dat`并且`melt.data`它们在图中的 y 轴上没有按顺序排列。

这是一个可重现的示例：

```
library(reshape)
library(ggplot2)

dat <- data.frame(dates=c("01/01/2002", "09/15/2003", "05/31/2012"), Germany = c(0,1,0), Italy = c(1,0,0))
melt.data<-melt(dat, id.vars="dates", variable_name="country")

qplot(data=melt.data,
      x=country,
      y=dates,
      fill=factor(value),
      geom="tile") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:53:04.537

您的问题是日期存储为字符串。参见`str(dat)`数据结构。

通过增加

```
dat$dates <- as.Date(dat$dates,"%m/%d/%Y") 
```

加载 dat 后，您可以按原始顺序获取日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T00:54:53.020

您的问题是这`dat$dates`是一个因素，默认情况下`R`已按字典顺序对级别进行排序。`R`不知道他们是日期。

所以

```
levels(dat$dates)
## [1] "01/01/2002" "05/31/2012" "09/15/2003" 
```

因此

```
order(dat$dates)
## [1] 1 3 2 
```

如果要将`R`这些视为日期，则可以将它们转换为`Date`列

```
 dat$dates <- as.Date(as.character(dat$dates), format = '%m/%d/%Y')

  # now 
 order(dat$dates)
 ## 1 2 3 
```

这就是你想要的

# asp.net - 如何为用户分配与 Active Directory 关联的安全角色

> ID：12574654
> 
> 赞同：1
> 
> 时间：2012-09-25T00:14:13.937
> 
> 标签：asp.net, active-directory, roles, asp.net-roles, sqlroleprovider

我的应用程序（使用 Windows 身份验证）中的每个页面都有不同的访问角色，以使用 SqlRoleProvider 限制用户访问。因此，要将用户添加到角色，我会去，

```
Roles.AddUserToRole(userName, roleName); 
```

现在，我需要将公司的 AD 组集成到我的应用程序中，这样每个 AD 组也将被分配这些访问角色，并且某个 AD 组的用户将自动“继承”这些角色。

**我的问题是：**

我可以继续使用我的 SQL 表，如 aspnet_Users、aspnet_Roles 等吗？

如何整合 AD 组？以及如何将角色分配给 AD 组？（到目前为止，我可以使用**Directory Entry**检查用户所属的所有 AD 组）。

当用户使用 Windows 身份验证登录应用程序时，在我检查他们是否属于特定 AD 组之后，我如何根据 AD 组“授予”或“分配”他们角色？

非常感谢您对这些问题的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T01:42:38.920

AD ASP.NET 成员资格和角色系统直接与 AD 相关联，您的数据库表将被忽略。AD 组成为 ASP.NET 成员角色。

我的其余帖子涉及直接修改 AD 组的应用程序：

您可以，但难度很大，但在这种情况下，不建议这样做。

Active Directory 组成员资格由属于 Domain Admins 组的其他用户分配，或者被委派了将用户分配到其他组的权限。

为了从代码中执行此操作（使用 ADSI），您的程序将需要在属于 Domain Admins 组成员或被委派该用户权限的用户身份下运行（或使用其模拟令牌）。

...这意味着您的程序突然被信任，如果被黑客入侵或滥用，可能会破坏您的安全域。我不建议这样做。

MSDN 上提供了文档：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa706022%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa706022%28v=vs.85%29.aspx)

# ruby-on-rails - Heroku、Rails 和远程 Microsoft SQL Server

> ID：12574655
> 
> 赞同：3
> 
> 时间：2012-09-25T00:14:22.230
> 
> 标签：ruby-on-rails, sql-server, ruby-on-rails-3, sql-server-2008, heroku

首先，我想说我已经进行了研究，并且知道以下是“可能的”——我希望找到具有这种设置的实际经验的人，看看我是否“应该”这样做。

因此，我开发了一个 Ruby/Rails Web 应用程序，它直接链接到专用网络上的 Microsoft SQL Server 2008R2。我正在尝试决定是部署到 Heroku 还是简单地构建本地 Ubuntu Web 服务器。我更喜欢使用 Heroku，但是我担心连接到远程 Microsoft SQL Server 可能会太麻烦。我可以完全访问网络设备、防火墙、IP 地址、路由等。

目前，我的应用程序使用 TinyTDS 和 activerecord-sqlserver-adapter 从我的本地开发机器连接，并且工作起来就像一个魅力。我很想使用 Heroku（可以付费使用）——但是这个功能有多稳定和/或受支持？我可以使用免费的 SSL 证书来加密通过 Internet 传输的数据吗？而且，我是否需要为 Heroku 购买附加组件才能为我的站点获取静态 IP 以正确保护进入我的防火墙的流量？

我完全愿意投入工作让它在 Heroku 上运行......但我不想使用不可靠或不受支持（或不安全）的黑客......在这种情况下，我只是在本地部署到 Ubuntu。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T06:38:27.893

在这个很棒的链接上找到了答案！***Heroku 运行 Cedar，连接到远程访问的 MS SQL Server！***请在点击链接后阅读我的评论和作者的评论以获取更多信息。总的来说，我选择不在 Heroku 上托管这个特定的应用程序，但仍然很高兴知道这是可能的。

Michiel Sikkes 的这篇文章使用 Heroku 的新 buildpack 功能来使用 TinyTDS 并远程连接到 SQL Server 2008 R2。我仍在研究如何加密流量。希望这对其他人有帮助！

[http://blog.firmhouse.com/connecting-to-sql-server-from-heroku-with-freetds-here-is-how-on-cedar#](http://blog.firmhouse.com/connecting-to-sql-server-from-heroku-with-freetds-here-is-how-on-cedar#)

# infragistics - 在编辑模式下将下拉菜单添加到基础设施 WebDataGrid

> ID：12574656
> 
> 赞同：0
> 
> 时间：2012-09-25T00:15:08.933
> 
> 标签：infragistics, webdatagrid

我有两个问题：

1.  我有一个复杂的对象，下面有 Id 和 Text。为了显示，我使用带有 eval 函数的 TemplateDataField。我可以将复杂对象绑定到 BoundDataField 吗？

2.  将复杂对象绑定到 BoundDataField 背后的原因是，我需要使其可编辑网格。我找不到任何使用模板字段并使该列可编辑的文档或示例。（我同意这可能是不可能的。）现在我需要放置一个下拉列表，用户可以在其中选择一个值，然后我可以将它分配给我的复杂对象的 id 字段。我可以将下拉列表（使用 EditorProviders）放到 bounddatafield 中，但是如何为上述模板数据字段执行此操作？

这是编辑 WebDatagrid 示例的链接：[控件和应用程序示例](http://www.infragistics.com/products/aspnet/sample/data-grid/editing-editor-providers)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T21:59:20.150

使用 TemplateDataField 时，您指定要用作模板的内容，并且可以在该字段中放置一个编辑器。请注意，如果您确实在该字段中放置了编辑器，则需要处理对网格值或网格绑定到的列表的更新。

请注意，如果下拉列表中的值具有与它们关联的 id 并且可以是网格单元格的值，则最好将 DropDownEditorProvider 与具有绑定字段的网格一起使用，其中该字段是该项目的 id您正在选择。

# c# - SQL Server 触发 Web 请求

> ID：12574658
> 
> 赞同：1
> 
> 时间：2012-09-25T00:15:12.530
> 
> 标签：c#, asp.net, .net, sql-server, sql-server-2005

对客户端的系统和设置做一些限制，我想知道 SQL Server 是否可以触发 Web 请求？

在更新 sql server 列后，我需要能够发送电子邮件。我有一个带有数据库邮件的触发器，但客户端上的数据库服务器不允许这样做。另一种方法是让该数字在准备好时触发网络请求。我会通过网络服务器上的网络服务来完成它，让它只轮询表格，但这似乎是很多浪费的周期。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T00:18:39.343

您可以从 SQL Server 执行托管代码。创建一个 Windows 服务，让它在 C# 中做任何你想做的事情，以满足你的需要，SQL 服务器调用它。

查看[此](http://www.codeproject.com/Articles/19954/Execute-NET-Code-under-SQL-Server-2005)链接以获取示例程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:07:49.590

不要从 SQLCLR 调用 Web 服务，尤其不要通过 SQLCRL 从触发器调用 Web 服务（或发送电子邮件）**。**使用 SQLCLR 进行外部 http 或 smtp 访问是一个坏主意的原因有很多，但是从触发器中执行它是可怕的。试想一下，当 Web 服务以 10 秒的延迟响应时，您的应用程序将如何表现......

您必须从外部应用程序进行邮件交互。您应该通过队列解耦应用程序和电子邮件应用程序之间的交互。有关如何将 SQL Server 表用作队列的信息，请参阅[将表用作队列。](http://rusanu.com/2010/03/26/using-tables-as-queues/)您可以直接从您的应用程序中将邮件请求排入队列，或者使用既插入数据又将请求排入队列的存储过程，或者作为最后的手段，使用表上的触发器将邮件请求排入队列。您的电子邮件应用程序（一个单独的服务）应该监控这个队列，并通过发送实际的电子邮件（或 http web 请求）来服务它。

# asp.net-mvc-3 - 从 CKEditor 4 asp net 保存已编辑的内联文本

> ID：12574664
> 
> 赞同：2
> 
> 时间：2012-09-25T00:16:29.073
> 
> 标签：asp.net-mvc-3, ckeditor

我正在尝试将[CKEditor 4](http://ckeditor.com/ckeditor-4-beta)实现到我正在处理的 ASP NET 网站中，但我无法弄清楚如何从[内联编辑器](http://nightly-v4.ckeditor.com/3528/samples/inlineall.html)中保存编辑过的材料我知道如何使用旧版本来完成它，但我只是不'不明白这个过程。

我看过论坛...没有v4论坛。

我查看~~了~~文档....找不到。

我有一种感觉，这是一个简单的任务，但我只是不知道如何。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T08:02:35.563

您可以使用`CKEDITOR.instances.editor1.getData()`. 然后您可以通过 AJAX 发送它或将其存储为某个输入字段的值。要定期执行此操作，请遵循以下方法：

```
CKEDITOR.disableAutoInline = true;

var editor = CKEDITOR.inline( 'editable' );

var savedData, newData;
function saveEditorData() {
    setTimeout( function() {
        newData = editor.getData();

        if ( newData !== savedData ) {
            savedData = newData;

            // Send it with jQuery Ajax
            $.ajax({
                url: 'yourUrl',
                data: savedData
            });

            // Or store it anywhere...
            // ...
            // ...
        }

        saveEditorData();
    }, 500 );
};

// Start observing the data.
saveEditorData(); 
```

您还可以观察[提交事件](http://api.jquery.com/submit/)并使用您的数据更新一些（隐藏的）表单字段。

玩得开心！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:57:22.283

您是想通过 AJAX 获取它还是通过表单发送？*例如，带有Lorem Ipsum*的右上角内联编辑器区域的值可以像在旧版本中一样简单地获得

```
CKEDITOR.instances.editor1.getData(). 
```

在[XHTML 输出示例](http://nightly-v4.ckeditor.com/latest/ckeditor/samples/outputxhtml.html)中，它们有一个似乎可以工作的简单表单，我相信使用（静态）内联编辑器是一样的。

如果您将元素动态转换为内联编辑器，我会尝试绑定到提交事件，并在通过 all 提交循环之前`CKEDITOR.instances`，将它们的数据隐藏在字段中。至于隐藏字段命名或识别哪个隐藏字段对应哪个动态编辑器，您必须自己弄清楚:)

# symfony - FOSUserBundle：获取 EntityManager 实例覆盖表单处理程序

> ID：12574665
> 
> 赞同：1
> 
> 时间：2012-09-25T00:16:31.397
> 
> 标签：symfony, doctrine, fosuserbundle

我从 Symfony2 开始，我试图覆盖 FOSUserBundle 的 FOS\UserBundle\Form\Handler\RegistrationFormHandler。

我的代码是：

```
<?php

namespace Testing\CoreBundle\Form\Handler;

use FOS\UserBundle\Model\UserInterface;
use FOS\UserBundle\Form\Handler\RegistrationFormHandler as BaseHandler;
use Testing\CoreBundle\Entity\User as UserDetails;

class RegistrationFormHandler extends BaseHandler
{

    protected function onSuccess(UserInterface $user, $confirmation)
    {
        // I need an instance of Entity Manager but I don't know where get it!
        $em = $this->container->get('doctrine')->getEntityManager();
        // or something like: $em = $this->getDoctrine()->getEntityManager

        $userDetails = new UserDetails;
        $em->persist($userDetails);

        $user->setId($userDetails->getId());

        parent::onSuccess($user, $confirmation);
    }
} 
```

所以，关键是我需要一个 Doctrine 实体管理器的实例，但在这种情况下我不知道在哪里/如何获得它！

任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T02:26:23.950

1.  `EntityManager`在大多数情况下，您不应该直接使用。请改用适当的管理器/提供者服务。

    在 FOSUserBundle 服务实现的情况下[`UserManagerInterface`](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Model/UserManagerInterface.php)就是这样一个管理器。它可以通过`fos_user.user_manager`服务容器中的键访问（它是 的别名[`fos_user.user_manager.default`](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/config/orm.xml#L8)）。当然，注册表单处理程序[使用该服务](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/config/registration.xml#L26)，它可以通过[`userManager`](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Form/Handler/RegistrationFormHandler.php#L33)属性访问。

2.  您不应将域模型（即 Doctrine 的实体）视为数据库模型的精确表示。这意味着，您应该将对象分配给其他对象（而不是它们的 id）。

    Doctrine 能够处理实体中的嵌套对象（`UserDetails`并且`User`对象具有直接关系）。最终，您将不得不为实体[配置级联选项。](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/working-with-associations.html#transitive-persistence-cascade-operations)`User`

3.  最后，`UserDetails`似乎是每个`User`. 因此，您不应该覆盖`UserManagerInterface::createUser()`表单处理程序 - 无论如何您都不会在那里处理用户的详细信息。

    1.  创建自己的`UserManagerInterface`实现：

        ```
        class MyUserManager extends \FOS\UserBundle\Entity\UserManager {
            /**
             * {@inheritdoc}
             */
            public function createUser() {
                $user = parent::createUser();

                $user->setUserDetails(new UserDetails());
                // some optional code required for a proper
                // initialization of User/UserDetails object
                // that might require access to other objects
                // not available inside the entity

                return $user;
            }
        } 
        ```

    2.  在 DIC 中注册自己的经理作为服务：

        ```
        <service id="my_project.user_manager" class="\MyProject\UserManager" parent="fos_user.user_manager.default" /> 
        ```

    3.  配置 FOSUserBundle 以使用您自己的实现：

        ```
         # /app/config/config.yml
         fos_user:
             ...
             service:
                 user_manager: my_project.user_manager 
        ```

# html - 使用 CSS 更改悬停时兄弟元素的颜色

> ID：12574668
> 
> 赞同：67
> 
> 时间：2012-09-25T00:16:52.073
> 
> 标签：html, css

在下面的 HTML 中，当我将鼠标悬停在`<a>`元素上时，我想`<h1>`仅使用 CSS 更改元素的颜色。有没有办法做到这一点？

```
<h1>Heading</h1>
<a class="button" href="#"></a> 
```

如果我用一个 id 在它周围包裹一个 div 怎么办？

```
<div id="banner">
    <h1>Heading</h1>
    <a class="button" href="#"></a>
</div> 
```

这会有帮助吗？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-09-25T00:48:29.010

您可以在元素悬停时创建*跟随*元素更改的兄弟，例如，您可以在悬停时更改`a`链接的颜色`h1`，但不能以相同的方式影响*先前*的兄弟。

```
h1 {
    color: #4fa04f;
}
h1 + a {
    color: #a04f4f;
}
h1:hover + a {
    color: #4f4fd0;
}
a:hover + h1 {
    background-color: #444;
}
```

```
<h1>Heading</h1>
<a class="button" href="#">The &quot;Button&quot;</a>
<h1>Another Heading</h1>
```

我们将 H1 的颜色设置为绿色，将作为 H1 的兄弟的 A 的颜色设置为红色（前 2 条规则）。第三条规则符合我的描述——当 H1 悬停时改变 A 颜色。

*但是请*注意第四条规则`a:hover h1`只改变了锚点之后的 H1 的背景颜色，而不改变它之前的 H1 的背景颜色。

 *这是基于 DOM 顺序的，并且可以更改元素的*显示*顺序，因此即使您无法更改前一个元素，您也可以使该元素*看起来*在另一个元素之后以获得所需的效果。
请注意，这样做可能会影响可访问性，因为屏幕阅读器通常会以*DOM 顺序*遍历项目，这可能与*视觉*顺序不同。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-09-25T00:24:54.273

没有[CSS 选择器](http://www.w3.org/TR/CSS2/selector.html)可以做到这一点（[在 CSS3 中，甚至](http://www.w3.org/TR/css3-selectors/)）。CSS 中的元素永远不会知道它们的父级，所以你不能这样做`a:parent h1`（例如）。他们也不知道他们的兄弟姐妹（在大多数情况下），所以你不能这样做`#container a:hover { /* do something with sibling h1 */ }`。*基本上，CSS 属性只能修改元素及其子元素（它们不能访问父元素或兄弟元素）。*

您可以`h1` *在 中*包含`a`，但这也会使您的`h1`悬停。

您只能使用 JavaScript（[jsFiddle 概念证明](http://jsfiddle.net/P3Ew6/)）来实现这一点。这看起来像：

```
$("a.button").hover(function() {
    $(this).siblings("h1").addClass("your_color_class");
}, function() {
    $(this).siblings("h1").removeClass("your_color_class");
}); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-25T00:52:38.597

```
#banner:hover h1 {
  color: red;
}

#banner h1:hover {
  color: black;
}

a {
  position: absolute;
}
```

```
<div id="banner">
  <h1>Heading</h1>
  <a class="button" href="#">link</a>
</div>
```

小提琴：http: [//jsfiddle.net/joplomacedo/77mqZ/](http://jsfiddle.net/joplomacedo/77mqZ/)

`a`元素是绝对定位的。可能不适合您现有的结构。让我知道，我可能会找到解决方法。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-01-21T06:24:40.080

[http://plnkr.co/edit/j5kGIav1E1VMf87t9zjK?p=preview](http://plnkr.co/edit/j5kGIav1E1VMf87t9zjK?p=preview)

```
<!DOCTYPE html>
<html>

  <head>
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
    <style>
      ul:hover > li
      {
        opacity: 0.5;
      }
      ul:hover li:hover 
      {
        opacity: 1;
      }
    </style>
  </head>

  <body>
    <h1>Hello Plunker!</h1>
    <ul>
      <li>Hello</li>
      <li>Hello</li>
      <li>Hello</li>
      <li>Hello</li>
      <li>Hello</li>
    </ul>
  </body>

</html> 
```

这是一个如何在纯 css 中完成的示例，希望对某人有所帮助

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-11-23T02:37:24.847

确实可以通过几行 CSS 和一些基本的[Flexbox](https://developer.mozilla.org/en-US/docs/Glossary/Flex)理解来实现。

正如[斯蒂芬 P 在他的回答中所说](https://stackoverflow.com/a/12574836/9623625)，[*相邻的兄弟组合*](https://developer.mozilla.org/en-US/docs/Web/CSS/Adjacent_sibling_combinator)器确实选择紧随其后的兄弟姐妹。为了实现 OP 的要求，您可以使用两种弹性方法：

**方法 1（[使用“flex-flow”速记属性](https://developer.mozilla.org/en-US/docs/Web/CSS/flex-flow)）**

```
.flex-parent {
  display: flex;
  flex-flow: column-reverse wrap
}

.flex-child-1:hover + .flex-child-2 {
  color: #FF3333;
}
```

```
<div class="flex-parent">
    <a class="flex-child-1">Hover me</a>  
    <h1 class="flex-child-2">I am changing color</h1>
</div>
```

**方法2（[使用“订单”属性](https://developer.mozilla.org/en-US/docs/Web/CSS/order)和多个孩子）**

```
.flex-parent {
  display: flex;
  flex-direction: column;
}

.flex-child-1 {
  order: 2;
}

.flex-child-2 {
  order: 1;
}

.flex-child-3 {
  order: 3;
}

.flex-child-1:hover+.flex-child-2 {
  color: #FF3333;
}
```

```
<div class="flex-parent">
  <h1 class="flex-child-3">I am not changing color</h1>
  <a class="flex-child-1">Hover me</a>
  <h1 class="flex-child-2">I am changing color</h1>
</div>
```

**奖金：**

[CodePen 奖金](https://codepen.io/why_am_i_here/pen/JjKgdzx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-25T00:22:32.577

将 H1 标签更改为链接，样式可能与普通文本相同？然后用这个，

```
a:link {color:#FF0000;}      
a:hover {color:#FF00FF;} 
```

当您悬停时它应该可以工作:)您还可以通过将其包含在 div 中然后像这样定位它来使其具体化：

```
.exampledivname a:link {color:#FF0000;}      
.exampledivname a:hover {color:#FF00FF;} 
```

这应该会有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-27T11:36:10.877

对于兄弟元素中的设置样式，您可以在第一种情况下使用 ~ 字符，当 h1 悬停时为标签设置颜色，在第二种情况下，当 a 悬停时，更改 h1 部分的背景颜色

```
h1:hover ~ a {
    color: #e34423;
}
a:hover ~ h1 {
    background-color: #eee;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-23T19:09:51.377

这可能有效，我最近使用这个想法来停止动画中的兄弟元素。

```
h1 { color: inherit; }

#banner:hover { color: your choice; } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-16T22:15:40.887

有人帮我解决了这个问题，所以我想我也会在这里分享。

在您的第一个示例中，纯 CSS 确实是不可能的。然而，当你用一个父容器包装它时，你就可以用悬停的孩子做很多事情。

```
#banner:hover>h1{
  color:red;
}
h1:hover{
  color:black !important;
}
#banner{
  display:inline-block;
}
.button{
  display:inline-block;
  font-size:24px;
  width:100%;
  border:1px solid black;
  text-align:center;
}
h1{
  padding:0;
  margin:0;
}
```

```
<div id="banner">
    <h1>Heading</h1>
    <a class="button" href="#">Button!</a>
</div>
```

父级仅控制当前未悬停的子级。然后，您可以为单个元素和类设置悬停状态，以便在没有 JS 的情况下进行兄弟选择。

这是一个更高级的例子

[https://codepen.io/levyA/pen/gOrdaLJ](https://codepen.io/levyA/pen/gOrdaLJ)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-16T08:23:58.767

试试这个单行纯 CSS 解决方案：

```
.parent:hover .child:not(:hover) {
  /* this style affects all the children *except* the one you're hovering over */
  color: red;
} 
```

更多信息：[https ://codyhouse.co/nuggets/styling-siblings-on-hover](https://codyhouse.co/nuggets/styling-siblings-on-hover)*

# sorting - 带有比较器语法的常规排序

> ID：12574669
> 
> 赞同：32
> 
> 时间：2012-09-25T00:17:03.033
> 
> 标签：sorting, groovy

我只是被小精灵弄湿了。我知道 gremlin 是基于 groovy 的。[我在这里](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#sort%28groovy.lang.Closure%29)找到了文档，但我仍然不确定语法的含义。

我对带有比较器的排序语法如何工作感到有些困惑：

```
m.sort{a,b -> a.value <=> b.value} 
```

有人可以解释`{`和之间的所有不同位`}`是什么意思吗？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-25T00:29:23.370

当`Closure`used by`sort`有两个参数时，它就像传统的[`Comparator`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Comparator.html). 也就是说，对于排序期间在两个元素`a`和之间进行的每次比较`b`，它*返回一个负整数、零或正整数，因为第一个参数小于、等于或大于第二个*。

在您的特定场景中，比较是使用[spaceship operator](http://en.wikipedia.org/wiki/Spaceship_operator) `<=>`的结果。换句话说，您正在有效地**按升序**对元素进行排序。

例如，如果您有 list `[ 3, 2, 1 ]`，则使用该排序的结果[将是](http://ideone.com/491mY) `[ 1, 2, 3 ]`。

因此，`m.sort{a,b -> a.value <=> b.value}`大致*相当于*使用以下`compare`函数：

```
int compare(a, b) {
  if (a < b) {
    return -1;
  } else if (a > b) {
    return 1;
  } else {
    return 0;
  }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-02-08T14:19:14.820

spaceship 运算符`<=>`是一个重载运算符，表示`compareTo()`. 基本上`a<=>b`是一样的`a.compareTo(b)`

您给出的示例是使用`sort()`带有闭包的函数（如 Java8 中的 lambda）。它的语法如下：

> .method{ `closureParameters`-> `statements`}

所以你的例子是使用`sort()`带有[闭包](http://www.groovy-lang.org/closures.html)的函数，在那个闭包内你使用太空船（比较器）运算符

更多关于运算符重载[的信息](http://groovy.jmiguel.eu/groovy.codehaus.org/Operator+Overloading.html)

# php - 在 smarty 中修改数组内容？

> ID：12574671
> 
> 赞同：0
> 
> 时间：2012-09-25T00:17:07.233
> 
> 标签：php, smarty, smarty3

我们正在使用 smarty，

在我们的一种观点中，我们有：

`{if $header.showNav}...{/if}`

如果我们想设置我们使用：

```
$header = $smarty->getTemplateVars('header');
$header['showNav'] = true;
$smarty->assign('header', $header); 
```

哪个有效，但它似乎相当冗长。

smarty 是否提供了一种更容易管理的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T00:38:44.583

为什么不直接推出自己的功能：

```
function updateSmarty($smarty, $templateVar, $key, $value) {
    $templateVars = $smarty->getTemplateVars($templateVar);
    $templateVars[$key] = $value;
    $smarty->assign($templateVar, $templateVars);
} 
```

然后你可以在你需要的地方写上一行：

```
updateSmarty($smarty, 'header', 'showNav', true); 
```

甚至：

```
function showNav($smarty) {
    updateSmarty($smarty, 'header', 'showNav', true);
} 
```

然后：

```
showNav($smarty); 
```

# c# - 几秒钟后消失的 sql 中的“未指定错误”

> ID：12574672
> 
> 赞同：1
> 
> 时间：2012-09-25T00:17:08.150
> 
> 标签：c#, linq-to-sql

我构建了一个解析器，它获取存储在 xml 文件中的数据并使用 linq-to-sql 将其发送到 Microsoft Access 数据库。我有 sql insert 命令并且它们可以工作......直到它们没有。

奇怪的是，我运行了每个 SQL 命令（我将它们保存在一个列表中并一次执行每个命令）并且前 40 个左右运行良好，直到它们开始遇到“未指定的错误”。问题是，如果我吞下异常，而是让异常捕获器继续重试，几秒钟后，它们又开始工作了。这意味着它不是 SQL 查询本身的错误（或至少它是如何编写的）。

这种模式重复（有数千个插入）多次。如果我进行正常的异常处理，程序将在错误发生时跳过一些记录，并在导致错误暂时消失的任何原因时继续插入。如果我让它运行它，它会插入一些记录，跳过一些，插入，跳过，重复并最终插入少于 2/3 的记录。

有什么理由让我的计算机只运行 40 个左右的插入，然后拒绝在随机但短的时间间隔内运行更多？

我不知道是什么原因造成的。

该应用程序是本机运行的；它不使用任何服务器/Web 通信，我在查找“未指定错误”时发现的所有内容都指向 ADO.NET 应用程序中的事件。

这是发生错误的代码：

```
public static string insertQuery(string sql)
    {
        string connetionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Documents and Settings\Owner\Desktop\Arbeit\TrademarkParserproject1\TrademarkParserproject\bin\x86\Debug\Database.accdb";
        OleDbConnection connection;
        OleDbDataAdapter oledbAdapter = new OleDbDataAdapter();
        connection = new OleDbConnection(connetionString);

        string success = "false";

        try
        {
            connection.Open();
            oledbAdapter.InsertCommand = new OleDbCommand(sql, connection);
            oledbAdapter.InsertCommand.ExecuteNonQuery();

        }

        catch (Exception ex)
        {
            success = ex.ToString();
            return success;
        }

        success = "true";
        return success;
    } 
```

请注意，我让应用程序在 X86 模式下运行以避免 ACE.OLEDB.12.0 适配器出现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:31:10.217

突出的一件事是您永远不会关闭/处置您的 SqlConnection。OleDbDataAdapter 也是一次性的，应该被丢弃。'using' 语句在这里是一个方便的构造：

```
public static string insertQuery(string sql)
{
    string connetionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Documents and Settings\Owner\Desktop\Arbeit\TrademarkParserproject1\TrademarkParserproject\bin\x86\Debug\Database.accdb";
    using(var oledbAdapter = new OleDbDataAdapter())
    using(var connection = new OleDbConnection(connetionString))
    {
        string success = "false";

        try
        {
            connection.Open();
            oledbAdapter.InsertCommand = new OleDbCommand(sql, connection);
            oledbAdapter.InsertCommand.ExecuteNonQuery();
        }

        catch (Exception ex)
        {
            success = ex.ToString();
            return success;
        }

        success = "true";
        return success;
    }
} 
```

# ios - 在 application:didFinishLaunchingWithOptions 之后执行选择器？

> ID：12574673
> 
> 赞同：1
> 
> 时间：2012-09-25T00:17:11.303
> 
> 标签：ios, cocoa-touch, grand-central-dispatch

我需要将一些剩余的数据上传到服务器`application:didFinishLaunchingWithOptions`，但这需要一些时间，最终应用程序可能会因为无法及时完成启动而被杀死，所以我使用了：

```
[myObject performSelector:withObject:afterDelay:] 
```

有 0.2f 延迟，让`application:didFinishLaunchingWithOptions`完成，但这看起来不是一个好主意，所以我想知道有没有办法可以在之后执行选择器`application:didFinishLaunchingWithOptions`？

我知道有，`applicationDidBecomeActive`但我需要在`application:didFinishLaunchingWithOptions`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T00:19:47.197

如果你使用 0 的延迟，它将在控制返回到 runloop 时立即执行。

但是，如果这在 appDidFinishLaunching 中阻塞太久，那么无论何时运行它都会阻塞。您确实应该将此代码移至后台线程。主线程上的同步网络访问绝不是一个好主意。

# php - PHP5 MySql 和 PDO 异常

> ID：12574676
> 
> 赞同：6
> 
> 时间：2012-09-25T00:17:52.487
> 
> 标签：php, mysql, pdo

我在将 PDO 与 PHP5.4 和 MySql 一起使用时遇到了异常。

我已经阅读了几乎所有其他帖子、博客、手册、片段，以及与此错误相关的所有内容，并且尝试了我所看到的所有内容，但都没有运气。

所以我希望它是特定于我在特定代码中做错的事情，你可以向我指出。

这是错误：

> SQLSTATE[HY000]：一般错误：2014 在其他无缓冲查询处于活动状态时无法执行查询。考虑使用 PDOStatement::fetchAll()。或者，如果您的代码只针对 mysql 运行，您可以通过设置 PDO::MYSQL_ATTR_USE_BUFFERED_QUERY 属性来启用查询缓冲。

以下是导致此错误的代码部分：

**第一部分：**

```
 $stmt = $this->dbConn->prepare("CALL getPopularProducts()");
        $stmt->execute();
        $rows = $stmt->fetchAll(\PDO::FETCH_ASSOC);

        //$stmt->closeCursor();

        foreach ($rows as $row) {
            $p = new entity\LightingPole();
             /* doing basic set stuff here so code omitted */

            // apply category to product
            $categroyTranslator = new ProductCategoryTranslator();
            $categroyTranslator->applyProductCategory($p); 
```

**第二部分：**

```
 public function applyProductCategory(entity\Product $product) {
            $productId = $product->getProductId();
            try {
               /** exception thrown on this line **/
               $stmt = $this->dbConn->prepare("CALL getCategoryByProductId(?)"); 

               $stmt->bindParam(1, $productId, \PDO::PARAM_INT);
               $stmt->execute();

               while ($row = $stmt->fetch(\PDO::FETCH_ASSOC)){
                   $category = new entity\ProductCategory();

                   $product->setCategory($category);
               }  
             }
             catch (\PDOException $e) {
                 echo $e->getMessage();
                 print($e->getTraceAsString());
             }
         } 
```

**这是我的数据库类：**

```
namespace lib\database;

class Database
{
    protected static $instance;

    public static function getInstance()
    {
        if(self::$instance == null)
        {
            $dsn = "mydsn";
            $user = "myuser";
            $password = "mypassword";
            self::$instance->setAttribute(\PDO::ATTR_EMULATE_PREPARES, false);
            self::$instance->setAttribute(\PDO::MYSQL_ATTR_USE_BUFFERED_QUERY, true);
            self::$instance->setAttribute(\PDO::ATTR_ERRMODE, \PDO::ERRMODE_EXCEPTION);
        }
        return self::$instance;
    }

    private function __construct() {}

    private function __clone() {}
} 
```

你可能会注意到我有一个`$stmt->closeCursor()`我已经注释掉的电话。当我包含这行代码时，我收到以下错误：

> SQLSTATE[HY000]：一般错误：2006 MySQL 服务器已消失

现在用简单的功能术语来解释它，我在这里所做的基本上是获取流行产品的列表，遍历它们并获取所有相关的产品数据，例如 ProductCategory 等......

所以这个错误，只发生在循环中的第一个产品上，即我第二次调用`applyProductCategory()`它时工作正常，没问题。另一件事是，下面`applyProductCategory`还有大约 4 次调用来检索其他类型的关联数据，并且在执行此操作时也不会抛出任何错误。

所以最后，我所有受欢迎的产品都很好，除了第一个产品从来没有与之关联的 ProductCategory。

期待找出我在此过程中错过的原因。希望你能指出我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T00:36:39.760

在抛出错误之前尝试使用 unset($stmt)

```
 unset($stmt);
    $stmt = $this->dbConn->prepare("CALL getCategoryByProductId(?)"); 
```

我之前遇到过同样的错误，并且由于某种原因修复了它。我之前在这里找到了答案[PDO Unbuffered queries](https://stackoverflow.com/questions/841463/pdo-unbuffered-queries)

# c++ - 指向动态分配的 boost multi_array 中的类的指针，而不是编译

> ID：12574682
> 
> 赞同：7
> 
> 时间：2012-09-25T00:18:56.177
> 
> 标签：c++, pointers, boost, multidimensional-array, boost-multi-array

我对使用 Boost 的 C++ 很陌生。

我想要一个“world”类的对象有一个名为“chunk”的“octreenode”类型的数组。以前我有一个普通的一维数组，这很好用。现在我正在尝试使用具有 Boost 的 multi_array 功能的 3D 数组，但我真的不确定自己做错了什么。

简化代码：

```
class world {
public:

  typedef boost::multi_array<octreenode, 3> planetchunkarray;  // a boost_multi for chunks
  typedef planetchunkarray::index index;
  planetchunkarray *chunk;

  world(double x,double y,double z,
        int widtheast, int widthnorth, int height) :
        originx(x), originy(y), originz(z),
        chunkseast(widtheast), chunksnorth(widthnorth), chunksup(height) {

    chunk = new planetchunkarray(boost::extents[chunksnorth][chunkseast][chunksup]);
    planetchunkarray::extent_gen extents;

    for (int cz = 0; cz < chunksnorth; ++cz) {
      for (int cx = 0; cx < chunkseast; ++cx) {
        for (int cy = 0; cy < chunksup; ++cy) {
          (*chunk)[cz][cx][cy] = new octreenode(1,72);
        }
      }
    }
  }
}; 
```

之后，如果我尝试分配

> 根->行星[0]->块[0][0][0]->材料= 4；

我得到错误：

```
error: base operand of '->' has non-pointer type 'boost::detail::multi_array::sub_array<octreenode, 1u>'| 
```

“octreenode”具有相关的构造函数，并且这一行的语法与之前相同：

> 根->行星[0]->块[0]->材料=4；

（使用一维数组）。同样，虽然它使用一维数组编译得很好，但试图将块传递给期望指向“octreenode”对象的指针的函数，例如：

> compactoctree(root->planet[p]->chunk[cz][cx][cy], 0, 14);

产生错误

```
error: cannot convert 'boost::detail::multi_array::sub_array<octreenode, 1u>' to 'octreenode*' for argument '1' to 'short int compactoctree(octreenode*, int, int)'| 
```

非常感谢您的任何建议，我确定我遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-09T20:14:48.790

您的数组是值类型 ( `octreenode`)，而不是指针类型 ( `octreenode*`)

因此，您不应该尝试将指针分配给动态分配的八叉树节点（`new`默认情况下用于堆分配）。

相反，只需分配一个值：

```
 (*chunk)[cz][cx][cy] = octreenode(1,72); 
```

事实上，一开始也没有理由`new`在多数组上使用：

# 更新

在评论中，有人提出可以优化更多的东西，并且您认为对有关编译错误的答案进行了有用的补充。

所以这里是：如果你确实想用完全相同的值初始化所有数组元素，

1.  您可以暂时忘记数组形状，从而提高循环效率：

    ```
    std::fill_n(chunk.data(), chunk.num_elements(), octreenode {1, 72}); 
    ```

    如果你知道`octreenode`是 POD 类型，你*可以*写

    ```
    std::uninitialzed_fill_n(chunk.data(), chunk.num_elements(), octreenode {1, 72}); 
    ```

    但是一个智能库实现最终还是会调用`fill_n`（因为没有收益）。您可以使用`uninitialized_fill_n`if`octreenode`不是POD 类型，但它**很容易****被**破坏。

2.  事实上，一开始也没有理由在 multi 数组上使用 new 。您可以只使用构造函数初始化列表来构造 multi_array 成员

* * *

**`[Live On Coliru](http://coliru.stacked-crooked.com/a/d102db6f3604dcbb)`**

```
#include <boost/multi_array.hpp>
#include <type_traits>

struct octreenode { int a; int b; };

class world {
public:
    world(double x, double y, double z, int widtheast, int widthnorth, int height)
            : 
                originx(x), originy(y), originz(z), 
                chunkseast(widtheast), chunksnorth(widthnorth), chunksup(height),
                chunk(boost::extents[chunksnorth][chunkseast][chunksup])
    {
        octreenode v = { 1, 72 };
        std::fill_n(chunk.data(), chunk.num_elements(), v);
    }

private:
    double originx, originy, originz;
    int chunkseast, chunksnorth, chunksup;

    typedef boost::multi_array<octreenode, 3> planetchunkarray; // a boost_multi for chunks
    typedef planetchunkarray::index index;
    planetchunkarray chunk;
};

int main() {
    world w(1,2,3,4,5,6);
} 
```

# javascript - 更改 img 标签上的 src，无法使其工作

> ID：12574683
> 
> 赞同：1
> 
> 时间：2012-09-25T00:18:59.647
> 
> 标签：javascript, jquery, html, json

我一直在尝试使用 jquery 和 httprequest 更改网页中的图像，但没有任何运气......经过大量研究后，我决定寻求帮助。代码粘贴在下面，我首先尝试询问 json（什么工作正常），然后更新图像上的 scr ......没用。对于最终测试，我使用了鼠标悬停和鼠标移出功能，但效果不佳，有趣的是其他属性（如显示和隐藏）工作正常，唯一的问题是`attr('scr','')`.

谢谢

```
<!DOCTYPE html>
<html>
<head>
<script src="..\js\jQuery.js"></script>
<script>
  $.getJSON("http://www.containernurseries.co.nz/json/jsonPlantDetails.php", 
  {plantSelected:"ARGYRANTHEMUM-POLLY"},
  function(data){
    $('#a1').attr('scr','data:image/jpg;base64,'+data.plantDetail.Image);
  });
  $(document).ready(function() {
    $('#a1').mouseover(function(e) {
      $('#a1'.attr('scr','http://www.containernurseries.co.nz/images/services.gif');
    }).mouseout(function(e) {
      $('#a1').attr('scr','http://www.containernurseries.co.nz/images/services.gif');
    });
  });
</script>
</head>

<body>
<img id="a1" src="http://www.containernurseries.co.nz/images/contacticon.gif" width="18" height="37"/>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T00:21:46.007

看起来像一个错字，`scr`应该是`src`在分配属性时`a1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T00:16:54.003

我发现并解决了几个问题，但最终得到了一些工作代码：

```
<!DOCTYPE html>
<html>
<head>
</head>

<body>
<img id="a1" src="http://www.containernurseries.co.nz/images/contacticon.gif" width="18" height="37"/>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>
    $.getJSON("http://ip.jsontest.com", null,
            function (data) {
                console.log(data)
            });
    $(document).ready(function () {
        ($('#a1')).mouseover(function (e) {
            ($('#a1').attr('src', 'http://www.containernurseries.co.nz/images/services.gif'));
        }).mouseout(function (e) {
                    ($('#a1')).attr('src', 'http://www.containernurseries.co.nz/images/contacticon.gif');
                });
    });
</script>
</body>
</html> 
```

你可以在这里看到它的工作：

[http://www.sanbarcomputing.com/flat/forumPosts/imgSrcType/imgSrcTypeNoComments.html](http://www.sanbarcomputing.com/flat/forumPosts/imgSrcType/imgSrcTypeNoComments.html)

此代码使用名为“JSONTest”的服务来获取格式正确的 JSON 代码。这将返回一个键/值 {ip: "xxx.xxx.xxx.xxx"} 的对象（数据），它显示您的 IP 地址。这是我用来获取 JSON 响应的服务网站：

[http://teamaqua.github.com/JSONTest/](http://teamaqua.github.com/JSONTest/)

要查看控制台日志输出，只需在浏览器中打开一个控制台（例如，按 F12 键，或打开 FireFox 的 FireBug 插件。深入对象以查看在控制台中正确格式化的键/值对。

我用 scr->src 错字修复和其他一些需要修复的东西修复了你的代码：

```
<!DOCTYPE html>
<html>
<head>
</head>

<body>
<img id="a1" src="http://www.containernurseries.co.nz/images/contacticon.gif" width="18" height="37"/>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>
    $.getJSON("http://www.containernurseries.co.nz/json/jsonPlantDetails.php",
            {plantSelected:"ARGYRANTHEMUM-POLLY"},
            function (data) {
                ($('#a1')).attr('src', 'data:image/jpg;base64,' + data.plantDetail.Image);
            });
    $(document).ready(function () {
        ($('#a1')).mouseover(function (e) {
            ($('#a1').attr('src', 'http://www.containernurseries.co.nz/images/services.gif'));
        }).mouseout(function (e) {
                    ($('#a1')).attr('src', 'http://www.containernurseries.co.nz/images/contacticon.gif');
                });
    });
</script>
</body>
</html> 
```

你可以在这里看到它（可能）失败：

[http://www.sanbarcomputing.com/flat/forumPosts/imgSrcType/imgSrcType.html](http://www.sanbarcomputing.com/flat/forumPosts/imgSrcType/imgSrcType.html)

我在 Chrome 中收到一个跨域错误，它似乎在 IE 和 FireFox 中静默失败：

> XMLHttpRequest 无法加载 [http://www.containernurseries.co.nz/json/jsonPlantDetails.php?plantSelected=ARGYRANTHEMUM-POLLY](http://www.containernurseries.co.nz/json/jsonPlantDetails.php?plantSelected=ARGYRANTHEMUM-POLLY)。Access-Control-Allow-Origin 不允许来源[http://www.sanbarcomputing.com 。](http://www.sanbarcomputing.com)

这是一篇很好的帖子，讨论了解决此问题的一种方法（将其更改为 JSONP），但由于您的服务器返回 JSON，而不是 JSONP，因此它也不起作用（我尝试过）：

[stackoverflow：访问控制允许来源不允许由](https://stackoverflow.com/questions/9327218/access-control-allow-origin-not-allowed-byi)

我相信，您需要从服务器以 JSONP JavaScript 可执行函数的形式返回结果。要发送 JSONP 请求，您将更改此行：

```
$.getJSON("http://www.containernurseries.co.nz/json/jsonPlantDetails.php", 
```

对此：

```
$.getJSON("http://www.containernurseries.co.nz/json/jsonPlantDetails.php?callback=?", 
```

然后，jQuery 会自动为您生成 JSONP 请求。它可以工作，但由于结果不是可执行的 JavaScript，因此在 Chrome 中会出现以下错误：

> Uncaught SyntaxError: Unexpected token :

Since I think Chrome is trying to execute the JSON as a function, which it is not.

Changes need to be made to the server, I believe, to get this working cross-domain, if you need that.

Here is a good article on cross-domain issues:

[https://developer.mozilla.org/en-US/docs/HTTP_access_control](https://developer.mozilla.org/en-US/docs/HTTP_access_control)

# ruby-on-rails - 如何在 Ruby on Rails 的 ActionMailer 电子邮件中包含图像？

> ID：12574688
> 
> 赞同：2
> 
> 时间：2012-09-25T00:20:13.283
> 
> 标签：ruby-on-rails

我目前正在使用 Ruby on Rails 3.2.8 并尝试使用 ActionMailer 发送一封电子邮件，其中包含电子邮件正文中的图像。我在网上搜索过，没有任何说明有帮助。这是我在 Railscasts 剧集中使用的示例：

user_mailer.rb

```
def registration_confirmation(user)
  @user = user
  attachments["rails.png"] = File.read("#{Rails.root}/public/images/corporate_logo.png")
  mail(:to => "#{user.name} <#{user.email}>", :subject => "Registered")
end 
```

registration_confirmation.html.erb

```
<%= image_tag("corporate_logo.png", :alt => "CorporateLogo") %>
<p><%= @user.name %>,</p>
<p>Thank you for registering!</p>
<p><%= link_to "Edit profile", edit_user_url(@user) %></p> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T01:10:21.007

尝试按照[此处](http://guides.rubyonrails.org/action_mailer_basics.html#sending-emails-with-attachments)的示例进行操作。我还没有尝试过，但它应该可以工作。它针对最近的 rails 进行了格式化，railscasts 集中的示例适用于添加资产管道之前的 rails 版本。

尝试：

```
attachments['rails.png'] = File.read('/assets/corporate_logo.png') 
```

或者

```
attachments['rails.png'] = File.read('corporate_logo.png') 
```

或者也许参考[这个答案](https://stackoverflow.com/questions/7854243/asset-url-in-mailer-on-rails-3-1)，可以帮助你。他们是这样设置的：

```
attachments["rails.png"] = File.read("#{Rails.root}/app/assets/images/corporate_logo.png") 
```

# git - 您如何将此 bash 别名转换为（Windows）doskey 别名？

> ID：12574689
> 
> 赞同：0
> 
> 时间：2012-09-25T00:20:25.620
> 
> 标签：git, bash, batch-file, npm

我正在将一些 bash 别名移植到`doskey`批处理命令中，特别是其中一个我遇到了难以置信的困难。有人认为他们可以提供帮助吗？

bash 别名是：

```
alias gitrel='if [ -n "$(npm version patch)" ]; then git push && git push --tags; fi' 
```

**问题**：

*   如何运行并从`npm`版本补丁中获取返回值？，
*   或者如何在`doskey`命令中执行控制流逻辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:18:25.090

您可以使用 FOR/F 循环来执行此操作，但前提是 npn 仅打印一行或不打印行，如果它可以打印两行，则此代码将推送多次。

```
doskey alias=for /F "delims=" %a in ('npm version patch') do @( git push && git push --tags ) 
```

# mysql - PDO - lastInsertId() 用于插入多行查询

> ID：12574691
> 
> 赞同：10
> 
> 时间：2012-09-25T00:21:23.133
> 
> 标签：mysql, pdo, last-insert-id

我可以将 2 个宠物插入一个表中，并获取它们的 lastInsertId() 以一次进一步处理一个（2 个查询）。
我想知道如果我在 1 个查询中插入 2 行，是否有办法获取两个 lastInsertIds() 并将它们分配给变量：

```
$query = "INSERT INTO pets (pet_name) VALUES (':coco'),(':jojo')";
$pet_insert = $dbh->prepare($query);
$pet_insert->execute(array(':coco' => $coco,':jojo' => $jojo));
$New_PetID = $dbh->lastInsertId(); 
```

是否可以获得 coco 和 jojo 的 lastInsertId() ？所以像：

```
$New_PetID1 = $dbh->lastInsertId();//coco
$New_PetID2 = $dbh->lastInsertId();//jojo 
```

这将给出相同的 ID，有什么方法可以获得 2 个 ID？仅供参考，这是在 try 块中。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-25T00:31:08.903

这是不可能的。如果您需要为两行生成 id - 您需要执行 2 个分隔`INSERT`

> 重要如果您使用单个 INSERT 语句插入多行，LAST_INSERT_ID()**仅返回为第一个插入行**生成的值。这样做的原因是可以轻松地针对其他服务器重现相同的 INSERT 语句。

[http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_last-insert-id](http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_last-insert-id)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-06-26T03:35:05.910

您可以将 1 添加到最后插入 id 以实现真正的最后一条记录 id。如果您插入超过 2 条记录，只需将 rowCount - 1 添加到 last_insert_id。

> 将 innodb_autoinc_lock_mode 设置为 0（“traditional”）或 1（“consecutive”），任何给定语句生成的自动增量值将是连续的，没有间隙，因为表级 AUTO-INC 锁一直保持到结束语句，并且一次只能执行一个这样的语句。

和

> 生成的 ID 在每个连接的基础上维护在服务器中。这意味着函数返回给给定客户端的值是为影响该客户端的 AUTO_INCREMENT 列的最新语句生成的第一个 AUTO_INCREMENT 值。此值不受其他客户端的影响，即使它们生成自己的 AUTO_INCREMENT 值。这种行为确保每个客户端都可以检索自己的 ID，而不用担心其他客户端的活动，也不需要锁或事务。

有关更多信息，请阅读此文档[http://dev.mysql.com/doc/refman/5.1/en/innodb-auto-increment-handling.html](http://dev.mysql.com/doc/refman/5.1/en/innodb-auto-increment-handling.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-17T11:33:55.517

拜托，请避免布鲁斯给出的解决方案类型。自动增量值*可以*设置为不同于 1。例如在主到主复制的情况下。不久前，运行我们的一个应用程序的主机更改了它们的数据库设置。我碰巧注意到 - 纯粹是巧合 - 突然间，id 增加了 2 而不是 1。我们会有这样的代码吗？它可能会给我们带来严重的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T00:32:15.957

该[文档](http://php.net/manual/en/pdo.lastinsertid.php)指出：`Returns the ID of the last inserted row or sequence value`

您将需要执行两个查询来获取每个插入行的 id。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-30T00:01:25.830

我试图假设这是不可能的，直到我自己尝试并认为这**是可能**的。

> 每次执行后，添加 lastInsertId() 并分配一个键。

*对于我的例子：*

```
// First query
$sql = "INSERT INTO users
(username, email)
values
(:username, :email)";
$sth = $this->db->prepare($sql);
$sth->bindParam(':username', $data['username'], PDO::PARAM_STR);
$sth->bindParam(':email', $data['email'], PDO::PARAM_STR);

// Second Query
$sql2 = "INSERT INTO users
(username, email)
values
(:username, :email)";
$sth2 = $this->db->prepare($sql2);
$sth2->bindParam(':username', $data['username'], PDO::PARAM_STR);
$sth2->bindParam(':email', $data['email'], PDO::PARAM_STR);

// Start trans
$this->db->beginTransaction();

// Execute the two queries
$sth->execute();
$last['ux1'] = $this->db->lastInsertId(); // <---- FIRST KEY

$sth2->execute();
$last['ux2'] = $this->db->lastInsertId(); // <---- SECOND KEY

// Commit
$this->db->commit(); 
```

我能够检索最后插入的两个 ID

> 数组（[创建] => 数组（[ux1] => 117 [ux2] => 118）
> 
> )

我希望这将帮助其他正在寻求正确答案的人。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-04T10:32:03.833

好吧，由于 1000 次插入比 1 次插入有点长，所以话题的问题仍然很有趣。可能的解决方法是进行 2 次查询。第一个是插入 1000 行，第二个是如果在这些插入的行中有独特的东西，则选择它们。以宠物为例：

```
INSERT INTO pets ( name ) VALUES ( 'coco', 'jojo' );
SELECT id FROM pets WHERE name IN ( 'coco', 'jojo' ); 
```

这只能为大数据集带来好处。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-22T07:58:33.010

我在第一个语句和第二个 add 中使用了数组`if condition`。所以如果插入记录得到它的最后一个 id 然后做第二个语句。如果插入第二个数组得到它的最后一个 id 然后重复第二个语句

```
 for ($count=0; $count < count($_POST["laptop_ram_capacity"]); $count++) { 
        $stmt = $con->prepare('INSERT INTO `ram` 
                (ram_capacity_id, ram_type_id, ram_bus_id, ram_brand_id, ram_module_id)
                VALUES (?,?,?,?,?)');

            //excute query//
            $stmt->execute(array(
                            $_POST['laptop_ram_capacity'][$count],
                            $_POST["laptop_ram_type"][$count],
                            $_POST["laptop_ram_bus"][$count],
                            $_POST["laptop_ram_brand"][$count],
                            $_POST["laptop_ram_module"][$count]
                            ));
            //fetsh the data//
            $rows = $stmt->rowCount();
            // i add the below statment in if condition to repeat the insert and pass the repeated of the last statement//
            if ($rows > 0) {
            $LASTRAM_ID = $con->lastInsertId();

            $stmt = $con->prepare('INSERT INTO `ram_devicedesc_rel` 
                (ram_id, Parent_device_description_id)
                VALUES (?,?)');

            //excute query//
            $stmt->execute(array(
                            $LASTRAM_ID,
                            $LASTdevicedesc_ID
                            ));
            //fetsh the data//
            } else {
                echo "Error: " . $sql . "<br>" . $conn->error;
            }                                    
        } 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-06-05T14:05:19.273

您可以使用 'multi_query()' 将所有查询添加到一个变量中，例如：'$sql1 = "first insert";' '$sql2 = "第二次插入";' '$sql3 = "第三次插入";' 依此类推...计算您要制作的插入数量。现在使用 'multi_query()' 执行所有的 '$sql' 查询。获取最后一个插入 id。现在你所要做的就是'$rowno = $lastinsertid - $countofinserts'。所以基本上你会得到一个数字。向它添加 1，从结果数字到 lastinsertid 是您运行的插入查询的插入 ID

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-03-15T19:49:43.090

有可能的！您需要做的就是调用 PDO lastInsertId() 方法。这将在执行多个或批量 INSERT 时返回第一个插入的 id。接下来，我们需要对受最后一个 INSERT 语句影响的行数执行简单的加减运算。

```
$firstInsertedId = $this->lastInsertId();
$InsertedIds = range($firstInsertedId, ($firstInsertedId + ($stmt->rowCount() - 1)) );
print_r($InsertedIds); 
```

# android - 如何在android中自动清除内存

> ID：12574696
> 
> 赞同：0
> 
> 时间：2012-09-25T00:22:06.560
> 
> 标签：android, memory

我有三星galaxy s2，我想创建一个小应用程序来自动清除内存，而无需进入任务管理器并按下“清除内存”按钮。

我知道市场上有一些免费的应用程序，但我想创建自己的。任何人都可以向我指出任何教程，或者只是给我一些关于如何开始的背景知识？

我对android编程还很陌生，但我想学习。我已经在互联网上搜索过，但找不到。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T00:33:34.477

首先，如果您指定记忆的含义，您的谷歌搜索可能会产生更多结果。这是一个模棱两可的术语，因为它可以指硬盘空间、内存、ROM 或其他东西。我假设你的意思是系统内存

其次，您应该弄清楚该按钮的实际作用。这样的事情可能会有所启发：[http ://android.nextapp.com/site/systempanel/doc/taskmanagement](http://android.nextapp.com/site/systempanel/doc/taskmanagement)

第三，由于操作系统和其他应用程序使用的内存不能直接从您的应用程序控制，任何内存清除调用都必须是对操作系统的系统调用。所以应该有某种 API 可以用来与系统交互并要求它控制其他应用程序。

[Android-Close Other Apps](https://stackoverflow.com/questions/4503277/android-close-other-apps)此链接显示如何关闭其他应用程序（也许是一个很好的起点）

该类与系统上的其他活动交互：http: [//developer.android.com/reference/android/app/ActivityManager.html](http://developer.android.com/reference/android/app/ActivityManager.html)

无论哪种方式，作为您的第一个应用程序都是一件棘手的事情。祝你好运！

# python - 如何将 readlines 变成一个字符串......也许？

> ID：12574700
> 
> 赞同：1
> 
> 时间：2012-09-25T00:22:35.133
> 
> 标签：python

我认为我最大的问题是我不知道如何问我到底在寻找什么。

我从[http://www.tuxradar.com/content/code-project-build-flash-card-app](http://www.tuxradar.com/content/code-project-build-flash-card-app)的抽认卡程序中窃取了大部分代码，并对其进行了一些修改以满足我自己的需要。但是，当我得到正确的答案时，它仍然说我弄错了。
这是我的代码：

```
#!/usr/bin/env python
import os
import random
import time

file1 = open('/root/first.txt', 'w')
file2 = open('/root/second.txt', 'w')

file1.writelines('1\n2\n3\n4\n5')
file2.writelines('0,2\n1,3\n2,4\n3,5\n4,6')

time.sleep(1)

file1.close
file2.close

time.sleep(1)

file1 = open('/root/first.txt', 'r')
file2 = open('/root/second.txt', 'r')

count = 0
score = 0
tries = int(raw_input('How many tries?'))
start_time = time.time()

f1content = file1.readlines()
f2content = file2.readlines()

try:
    while count < tries:
        os.system('clear')

        wordnum = random.randint(0, len(f1content)-1)
        correct = str(f2content[wordnum])

        print 'Number:', f1content[wordnum], ''

        answer = input('\nSurrounding numbers?')

        if answer == correct:
            raw_input('\nCorrect! Hit enter...')
            score = score + 1
        else:
            print '\nNope, It\'s', correct
            raw_input('Hit enter to try a new one...')

        count = count + 1

except SyntaxError:
    print 'you must enter a value, starting over'
    os.system('./flash.py')

finally:
    file1.close
    file2.close
    os.system('rm /root/first.txt')
    os.system('rm /root/second.txt')

stop_time = time.time() - start_time
print '\nIt took you', stop_time / 60, 'minutes to get', score, 'out of', count, 'correct' 
```

我假设我的问题出在第 35 行，我将正确定义为

```
correct = str(f2content[wordnum]) 
```

我认为这是因为如果它给了我`1`并且我知道正确的答案是`0,2`并且我输入它，它说不，它是`0,2`。这表明在纯文本中它与人眼完全相同，但计算机将其读取为不同的东西。因此，我试图将其设为字符串并将其设为整数会导致错误。我真的被困住了，我确信它是如此简单，但我只是没有看到它。任何帮助，将不胜感激。即使这只是我可以找到答案的正确方向的一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T00:43:15.517

首先，我修复了上面评论中给出的所有问题。

而不是`writeline`，使用`write`：

```
file1.write('1\n2\n3\n4\n5')
file2.write('0,2\n1,3\n2,4\n3,5\n4,6') 
```

将括号添加到`close`：

```
file1.close()
file2.close() 
```

缩进 .`while`和 . 结尾之间的所有内容`try`。

通过在比较之前添加以下内容进行调试：

```
print repr(answer), repr(correct) 
```

另外，我将所有的`/root/first.txt`, etc. 更改为 just `first.txt`，因此它可以在没有名为可写目录的系统上工作`/root`（大多数系统不会）。

所以，当我运行它时，我看到了这个：

```
Number: 4

Surrounding numbers?3,5
(3, 5) '3,5\n'

Nope, It's 3,5

Hit enter to try a new one... 
```

很明显，`answer`是元组`(3, 5)`而不是字符串`3,5`，`correct`是字符串`3,5\n`而不是字符串`3,5`。

如果您阅读[input 的文档](http://docs.python.org/library/functions.html#input)，应该清楚为什么`answer`是错误的。它试图将 my 解释`3,5`为 Python 表达式，这是编写 tuple 的一种完全有效的方式`(3, 5)`，所以这就是我得到的原因。要解决此问题，您需要使用`raw_input`.

如果您阅读[readlines 的文档](http://docs.python.org/library/stdtypes.html#file.readlines)，应该清楚为什么每行末尾都有一个换行符。有很多方法可以解决这个问题。

修复了这个问题，它最终仍然失败，因为它永远不会创建文件`table.txt`并且`pocket.txt`它会尝试删除。无论你在那里试图做什么，你似乎都错过了一些东西。我只是注释掉了这些行。

当您使用它时，我会将`open`/ `readlines`/更改`close`为更现代的 Python 模式，`with`将文件用作字符串迭代器并将其视为字符串迭代器。硬编码路径之类`/root/first.txt`的并不是一个好主意。

无论如何，我不想给出所需的确切更改，因为这感觉像是家庭作业，但我认为以上信息足以让您自己修复它，并希望了解一些有关如何自己调试下一个问题的知识. 如果您仍然有问题，请离开。

# php - 黑客安全认证信息数据库存储

> ID：12574701
> 
> 赞同：0
> 
> 时间：2012-09-25T00:23:35.243
> 
> 标签：php, security, passwords

鉴于有多少主要网站被黑客入侵并且他们的密码数据库被解密，什么是保护身份验证的最佳方法？

基本上，我感兴趣的是一种保护成员访问网站的一部分的方法，如果被黑客入侵，在任何情况下都不会让黑客获得用户的密码。

没有什么是无懈可击的，但至少让它很难破解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T00:28:14.823

[http://codahale.com/how-to-safely-store-a-password/](http://codahale.com/how-to-safely-store-a-password/)

## 利用`bcrypt`

使用[bcrypt](http://www.usenix.org/events/usenix99/provos.html)。使用[bcrypt](https://github.com/codahale/bcrypt-ruby)。使用[bcrypt](http://pypi.python.org/pypi/py-bcrypt/)。使用[bcrypt](http://derekslager.com/blog/posts/2007/10/bcrypt-dotnet-strong-password-hashing-for-dotnet-and-mono.ashx)。使用[bcrypt](http://www.mindrot.org/projects/jBCrypt/)。使用[bcrypt](http://p3rl.org/Authen::Passphrase::BlowfishCrypt)。使用[bcrypt](http://www.openwall.com/crypt/)。使用[bcrypt](http://www.openwall.com/phpass/)。使用[bcrypt](https://github.com/smarkets/erlang-bcrypt)。

## 为什么不 { `MD5`, `SHA1`, `SHA256`, , `SHA512`, `SHA-3`, 等}？

这些都是*通用*哈希函数，旨在在尽可能短的时间内计算出大量数据的摘要。这意味着它们非常适合确保数据的完整性，而存储密码则完全是垃圾。

[现代服务器每秒](http://www.cryptopp.com/benchmarks-amd64.html)可以计算大约 330MB 的 MD5 哈希值 。如果您的用户的密码是小写字母数字和 6 个字符长，您可以在大约 **40 秒内尝试***该大小的每个可能的密码*。

 **这是没有任何投资的。

如果你愿意花大约 2,000 美元和一两个星期来购买 [CUDA](http://www.nvidia.com/object/cuda_home.html)，你可以组建你自己的小型超级计算机集群，它可以让你 [每秒尝试大约 700,000,000 个密码](http://www.win.tue.nl/cccc/sha-1-challenge.html)。**并且，您将以每秒**超过 1 个的速度破解这些密码。

 **## 盐不会帮助你

重要的是要注意**盐对于防止字典攻击或暴力攻击是无用的。**您可以使用大量盐或多种盐或手工收获的、阴凉种植的有机[喜马拉雅粉红盐](http://en.wikipedia.org/wiki/Himalayan_salt)。考虑到数据库中的哈希和盐，它不会影响攻击者尝试候选密码的速度。

盐与否，如果您使用的是为速度而设计的通用哈希函数，那么您会得到很好的效果。

## `bcrypt`解决这些问题

如何？基本上，它慢得要命。它使用 Blowfish 加密算法的密钥调度的变体，并引入了一个*工作因子*，它允许您确定散列函数的成本。正因为如此，`bcrypt`才能跟上摩尔定律。随着计算机变得越来越快，您可以增加工作因子并且散列会变慢。

`bcrypt`比，说，慢多少`MD5`？取决于工作因素。使用 12 的工作系数，在我的笔记本电脑上大约 0.3 秒内`bcrypt`散列密码`yaaa`。`MD5`，另一方面，花费不到一微秒。

所以我们说的是**5个数量级左右**。我不是每 40 秒破解一次密码，而是每**12 年**左右破解一次密码。您的密码可能不需要那种安全性，您可能需要更快的比较算法，但`bcrypt`允许您选择速度和安全性之间的平衡。用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:23:04.657

除了正确的密码处理（如bcrypt，如前所述），您需要在专用设备/机器上进行密码散列。

这个用于密码散列的“设备”是一个单独的系统，其中包含所谓的“本地参数”，它是散列函数的额外输入（例如，128 位强随机数）。主机系统（您的应用程序，它执行用户身份验证）必须无法读取此本地参数。

如果您的密码数据库/应用程序受到威胁，使用这样的专用机器进行密码散列可以为您购买额外的安全层。****

# java - 如何使用 Java 从 USB 麦克风录制声音

> ID：12574703
> 
> 赞同：1
> 
> 时间：2012-09-25T00:23:49.437
> 
> 标签：java, audio, usb, recording

现在，我可以通过普通线路从麦克风中获取声音 - 通过麦克风端口。但是，我不知道如何通过 Java 直接访问一个硬件来获得声音。有人可以帮忙吗？

基本上，我需要它录制一段时间，然后将输入的声音录制到 .mp3 或任何文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T00:45:31.763

你可以看看[Java Sound API](http://www.java2s.com/Tutorial/Java/0120__Development/CapturingAudiowithJavaSoundAPI.htm)

# c# - 将小数格式化为次要货币

> ID：12574709
> 
> 赞同：0
> 
> 时间：2012-09-25T00:24:17.663
> 
> 标签：c#

我需要将小数格式化为次要货币，例如 10.00 应该是 1000。

```
decimal currency = 10.00m;
System.Console.WriteLine(currency.ToString("######")); 
```

产生10，我如何获得要添加的小数点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:53:11.047

解决方案很简单

```
* 100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:40:42.903

我会创建一个这样的扩展方法，它总是会产生预期的结果，并具有所需的小数位数：

```
public static class DecimalExtension
{
    public static string FormatAsMinorCurrency(this decimal value) {
        var numberFormat = (NumberFormatInfo)CultureInfo.CurrentCulture.NumberFormat.Clone();
        numberFormat.CurrencyDecimalDigits = 2;
        numberFormat.CurrencyDecimalSeparator = ".";
        numberFormat.CurrencySymbol = "";
        numberFormat.CurrencyGroupSeparator = "";
        return value.ToString("c", numberFormat).Replace(".", "");
    }
} 
```

结果：

```
1.FormatAsMinorCurrency() 
100

10.FormatAsMinorCurrency()
1000

1000000.34102350915091M.FormatAsMinorCurrency()
100000034 
```

# android - 如何在 Android 中正确使用 Space 类？

> ID：12574710
> 
> 赞同：0
> 
> 时间：2012-09-25T00:24:23.373
> 
> 标签：android, android-view, space

我需要使用一些视图作为占位符，但不显示任何内容。其目的是使`TextView`显示内容的 's 可以水平调整大小并共享可用空间。没有必要详细介绍，但我想知道是否可以使用`Space`该类来完成此操作？我在一篇 GridLayout[博客](http://android-developers.blogspot.com/2011/11/new-layout-widgets-space-and-gridlayout.html)文章中看到过它，但除此之外，它的许多可能用途实际上并不多。该文档说它是一个视图的轻量级实现，无论如何，这将是完成我需要的最佳方式，因为它不会太占用内存。它仅适用于 GridLayout 吗？网上真的没有太多关于它的信息，所以我希望有人能对此事有所了解。

只是为了详细说明为什么我需要使用这个`Space`类，我有一个`LinearLayout`. 在那个 LinearLayout 可以是水平的任意数量的 TextView。假设我想用布局重力水平调整它的大小，但实际上并没有实际显示另一个 View，只是用来模拟实际 TextView 的大小以及内容正确调整大小。

我很感激任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T00:50:58.827

该类`Space`旨在包含通用布局中的空白空间，并且非常轻量级，可确保它不会增加任何开销。只需将其放入您的布局中即可`View`。它不是专门为任何特定容器设计的。您可以将它与 a `LinearLayout`、 a`GridLayout`或其他任何东西一起使用。只是不要指望它会显示任何东西（甚至不是背景）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-29T10:52:56.143

如果你想在布局之间留出空间。这是使用空间的方式。如果您删除边距，它将不会出现。希望有帮助。

```
<Space
        android:layout_width="match_content"
        android:layout_height="wrap_content"
        android:layout_margin="2sp" /> 
```

# python - 在 Google App Engine 上注册 Facebook

> ID：12574711
> 
> 赞同：4
> 
> 时间：2012-09-25T00:24:24.170
> 
> 标签：python, facebook, google-app-engine

我已经研究过在我的网站上使用 Facebook 注册进行用户身份验证，但我很难找到好的示例。我在 Google App Engine 上使用 python 并想看看是否有人有不在 facebook 或 facebook canvas 上的示例。 [这个](http://developers.facebook.com/docs/samples/canvas/)很有帮助，但没有我想要的几点。

我只是想使用 Facebook 作为一种允许用户登录并能够验证他们在我网站的任何页面上的身份的方式。任何这样的例子将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T09:10:43.007

如果您想进行更多实验，可以使用与 Google App Engine 完美集成的[Flask](http://flask.pocoo.org/)，然后在其之上使用[Flask-OAuth](http://packages.python.org/Flask-OAuth/)身份验证部分，这非常简单（[完整示例](https://github.com/mitsuhiko/flask-oauth/blob/master/example/facebook.py)）：

```
facebook = oauth.remote_app('facebook',
    base_url='https://graph.facebook.com/',
    request_token_url=None,
    access_token_url='/oauth/access_token',
    authorize_url='https://www.facebook.com/dialog/oauth',
    consumer_key=FACEBOOK_APP_ID,
    consumer_secret=FACEBOOK_APP_SECRET,
    request_token_params={'scope': 'email'}
) 
```

[gae-init](http://gae-init.appspot.com/)是我在 Google App Engine 上使用 Flask 的示例之一，除了 Google 登录之外，您还可以使用 Facebook 或 Twitter 登录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T05:39:51.447

这个（非官方的）Facebook SDK for Python fork 有一套示例，包括一个用于 App Engine 的示例。

[https://github.com/pythonforfacebook/facebook-sdk/tree/master/examples/appengine](https://github.com/pythonforfacebook/facebook-sdk/tree/master/examples/appengine)

（注意：最近没有测试过，也没有得到我或 Facebook 的保证。但可以提供帮助。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:35:00.933

它不是简洁的示例格式，但这里是支持通过 facebook 注册和登录的工作代码：

[https://github.com/mjibson/journalr/blob/master/main.py](https://github.com/mjibson/journalr/blob/master/main.py)（搜索“facebook”） [https://github.com/mjibson/journalr/blob/master/facebook.py](https://github.com/mjibson/journalr/blob/master/facebook.py)（只是一个简单的模块实现了 facebook API 并且不是完整的 SDK）

# objective-c - 如何在 iOS 上将分组的表格视图垂直和水平居中？

> ID：12574720
> 
> 赞同：1
> 
> 时间：2012-09-25T00:25:30.267
> 
> 标签：objective-c, ios, uitableview

我一直在寻找一种将表格视图垂直和水平居中的方法，但我似乎无法弄清楚这是否更好/可能单独使用界面构建器。如果不是我应该覆盖什么方法来在objective-c本身中设置它？

这也将使用设备的垂直屏幕大小，因此它实际上将分组表视图集中在旧 iPhone 设备和新 iPhone 5 上？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T00:44:03.480

这就是我用来获得正确的居中框架的方法。请注意，视图需要具有适当的弹簧和支柱，以便在有电话来电时调整大小等：

```
+ (CGRect)centeredFrameForSize:(CGSize)size inRect:(CGRect)rect
{
    CGRect frame;
    frame.origin.x = rintf((rect.size.width - size.width)/2) + rect.origin.x;
    frame.origin.y = rintf((rect.size.height - size.height)/2) + rect.origin.y;

//  if(frame.origin.x < 0) frame.origin.x = 0;
//  if(frame.origin.y < 0) frame.origin.y = 0;
    frame.size = size;

    return frame;
} 
```

# python - re.search() & group 不在文件中工作，其格式与工作文件格式相同。Python

> ID：12574722
> 
> 赞同：0
> 
> 时间：2012-09-25T00:25:45.970
> 
> 标签：python, function, error-handling, module, indexing

# 寻找编码序列

```
cds_position = ''
cds_start = 0
cds_end = 0
cds_sequence = ''

for line in data:
    cds_temp = ''
    if re.findall(r' CDS ',line):
        cds_temp = cds_temp + line.replace('\n','')
        position = re.search(r'(\d+)\.\.(\d+)',cds_temp)
        cds_start = cds_start + int(position.group(1))
        cds_end = cds_end + int(position.group(2))
        cds_position = str(cds_start)+':'+str(cds_end)

cds_sequence = cds_sequence + sequence[(cds_start-1):(cds_end-1)] 
```

我收到这个错误

```
Traceback (most recent call last):
  File "Upstream_ORF.py", line 357, in <module>
    GenBank_Reader(test_file)
  File "Upstream_ORF.py", line 317, in GenBank_Reader
    cds_start = cds_start + int(position.group(1))
AttributeError: 'NoneType' object has no attribute 'group' 
```

好的，我真的不明白为什么会收到此错误。

我编写了一个脚本，它逐行遍历特定格式的文件，每当遇到特定字符串后跟 10 个空格时，它都会采用它后面的数字值

```
 exon            1..1333
                 /gene="BRD2"
                 /gene_synonym="D6S113E; FSH; FSRG1; NAT; RING3; RNF3"
                 /inference="alignment:Splign:1.39.8"
                 /number=3
 STS             350..463
                 /gene="BRD2"
                 /gene_synonym="D6S113E; FSH; FSRG1; NAT; RING3; RNF3"
                 /standard_name="CGCb278"
                 /db_xref="UniSTS:240930" 
```

因此，每当它找到单词 exon 后跟 10 个空格时，它会在 '..' 两侧使用数字，它适用于 5 个不同的文件，但对于其中一个文件，它只是不起作用，而且格式完全相同。我不确定为什么它现在可以工作，因为它仍然可以与其他人一起工作。我在文件中发现了所有出现的“外显子”，并且没有一个像我正在寻找的那样被 10 个空格隔开。

当它适用于具有相同格式的其他文件时，为什么会出现此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:35:22.877

如果`re.search`返回`None`，则意味着它未能找到匹配项。有问题的文件必须有*一些*不同的东西，这会导致表达式失败。

关于您的代码的一些小评论：

*   `if re.findall(r' CDS ',line):`是不必要的。只要做`if ' CDS ' in line:`，它会进行子字符串搜索。
*   而不是`line.replace('\n','')`你应该使用`line.rstrip('\n')`，因为那更典型。

# javascript - 如何在 iframe 中显示用户输入

> ID：12574727
> 
> 赞同：1
> 
> 时间：2012-09-25T00:26:45.130
> 
> 标签：javascript, jquery

我有一个输入框供用户输入任何网址。然后我想在他们点击提交后在 iframe 中显示网站。

```
<html>
    <head>
        <title></title>
        <style>
            #netframe {
                float:right; 
                height: 100%; 
                width: 80%;
            }

            #sidebar {
                float:left; 
                height: 100%; 
                width: 20%;
            }
        </style>
    </head>
    <body>
        <div id="container">
            <div id="sidebar">
                Enter A URL:
                <input type="text" name="url" id="url">
                <input type="button" value="load" id="load">
                <br><br>    
            </div>
            <div id="netframe">
                <iframe height="100%" width="100%" class="netframe" src="pullsite.php" id="main_frame"></iframe>
            </div>
        </div>
    </body>
</html> 
```

这是我在网上找到的最接近的，但它没有做任何事情： [How To Reload A iframe Using jQuery](https://stackoverflow.com/questions/3656866/how-to-reload-a-iframe-using-jquery)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T00:44:48.197

## *[jsBin 演示](http://jsbin.com/isunew/2/edit)*

HTML：

```
<input type="text" id="url" name="url" value="http://" /> 
<iframe height="90%" width="100%" src="" id="frame"></iframe> 
```

jQuery

```
$('input#url').on('input', function() {
  $('#frame').attr('src', this.value);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T01:34:22.530

尝试将以下 JS / jQuery 脚本添加到您的代码中：

```
<script>
    $(function() {
        $("#load").click(function() {
            var new_url = $("#url").val();

            // Checks that the user typed "http://" or not
            if(new_url.substr(0,7)!="http://")
                new_url = "http://"+new_url;

            $("#main_frame").attr("src", new_url);
        });
     });
</script> 
```

因此，您的代码将如下所示：

```
<html>
    <head>
        <title></title>
        <script type="text/javascript"  src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <style>
            #netframe {
                float:right; 
                height: 100%; 
                width: 80%;
            }

            #sidebar {
                float:left; 
                height: 100%; 
                width: 20%;
            }
        </style>
        <script>
            $(function() {
                $("#load").click(function() {
                    var new_url = $("#url").val();

                    // Checks that the user typed "http://" or not
                    if(new_url.substr(0,7)!="http://")
                        new_url = "http://"+new_url;

                    $("#main_frame").attr("src", new_url);
                });
             });
        </script>
    </head>
    <body>
        <div id="container">
            <div id="sidebar">
                Enter A URL:
                <input type="text" name="url" id="url">
                <input type="button" value="load" id="load">
                <br><br>    
            </div>
            <div id="netframe">
                <iframe height="100%" width="100%" class="netframe" src="pullsite.php" id="main_frame"></iframe>
            </div>
        </div>
    </body>
</html> 
```

**PS：**不要忘记加载 jQuery 库。例如，您可以通过在标题中添加以下内容从 Web 加载它：

```
<script type="text/javascript"  src="http://code.jquery.com/jquery-1.7.1.min.js"></script> 
```

希望这可以帮助。让我知道这是否对你有用。

# c++ - 用于 std::sort 排序 C 字符串的比较函数

> ID：12574729
> 
> 赞同：0
> 
> 时间：2012-09-25T00:27:07.693
> 
> 标签：c++, sorting, stl, cstring

这就是我正在做的，基本上是对动态生成的C-Strings数组进行排序，它将是“abc”的组合，为简洁起见长度小于5。令人困惑/有趣的是如何配置比较函数，这样它就不会按内存地址比较 C 字符串

```
srand ( time(NULL) );
char alpha[] = "abc";
char** CString = new char*[either 5 or 1000];
unsigned int j=0;
for (unsigned int i=0; i<either 5 or 1000;i++) {
    int ran = rand() % 5 + 2;
    CString[i] = new char[ran];
    for(j=0;j<ran-1;j++){
        CString[i][j] = alpha[rand() % (sizeof(alpha) - 1)];
    }
    CString[i][ran-1] = '\0';
}

std::sort(CString,CString+either 5 or 1000,SortCompare);

for(int i=0;i<5;i++){
    std::cout << *(CString+i) << " at " << CString+i << std::endl;
} 
```

现在我有比较功能的三种配置

```
int SortCompare(char* a,  char* b){
    //return a<b;
    //return *a<*b;
    //return strcmp(a,b);
} 
```

打印输出是

```
return strcmp(a,b):
CRASHED! //bummed because I had high hope for this

return a<b:
(when 5 C-strings):                        (when 1000 C-strings):
abba at 001F3248                           cbccb at 00544388 
bcb at 001F324C                            caac at 0054438C
cbb at 001F3250                            bcbc at 00544390
c at 001F3254                              ac at 00544394
ca at 001F3258                             a at 00544398
//conclusion: it's sorted by addresses. so turning head to the other one

return *a<*b:
(when 5 C-strings):                        (when 1000 C-strings):
abba at 001F3248                           cbccb at 00544388
bcb at 001F324C                            caac at 0054438C
cbb at 001F3250                            bcbc at 00544390
c at 001F3254                              ac at 00544394
ca at 001F3258                             a at 00544398
//I assumed it's value-sorted              //seriously hurt, belief has been destroyed seeing the memory addresses line up so neatly 
```

因此，哪一个是按值排序的正确版本？或者我完全走错了路。需要救生员！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T00:35:47.217

如果您从来没有任何 NULL 指针：

```
bool SortCompare(char const* const a, char const* const b)
{
    return std::strcmp(a, b) < 0;
} 
```

如果你*确实*有 NULL 指针，它只是稍微冗长一些：

```
bool SortCompare(char const* const a, char const* const b)
{
    return a && (!b || std::strcmp(a, b) < 0);
} 
```

# android - 通过命令行启动 DalvikVM 的 DDMS

> ID：12574731
> 
> 赞同：3
> 
> 时间：2012-09-25T00:27:41.107
> 
> 标签：android, dalvik, ddms

在将字节码转换为 dex 码后，我在 DalvikVM 上运行了一个普通的 Java 应用程序。我从 adb shell 手动调用 DalvikVM 来执行它。为了启用调试，我明确地将参数传递给 DalvikVM：“-agentlib:jdwp=transport=dt_android_adb,suspend=n,server=y”

使用 DDMS 我可以附加放置断点和跟踪代码，但 DDMS 的内存分配跟踪器不起作用。我试过谷歌搜索，我能找到的唯一相关的事情是：

> 由于命令行应用程序不包括客户端 DDM 设置，因此线程监控和分配跟踪等功能在 DDMS 中将不可用。

[来源：基本 Dalvik VM 调用](http://www.milk.com/kodebase/dalvik-docs-mirror/docs/hello-world.html)

那么如何包含客户端 DDM 设置呢？为了让应用程序 DDM 感知或将额外参数传递给 Dalvik，我需要添加任何特殊代码吗？

# c# - 如何读取 HTTP 标头值

> ID：12574734
> 
> 赞同：2
> 
> 时间：2012-09-25T00:28:17.627
> 
> 标签：c#, json, wcf

我有一个从 Iphone 应用程序调用的 WebService（我也在构建）

在我的网络服务中，它是在服务中自我托管的，并且一切正常，除了我想将安全令牌移动到请求的标头中，以便类对象保持整洁。（如果我不能在标题中得到它，我会求助于把它放在课堂上，但这有点难看）。

我查看了此[http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontext.incomingmessageheaders.aspx#Y342](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontext.incomingmessageheaders.aspx#Y342)中的代码，我似乎无法枚举标头值。

在 Fiddler 中查看，我可以看到标题正在通过

```
POST http://192.168.1.221:11001/StockControl/json/SubmitResults HTTP/1.1
Device-Token: bwI2YiAHR4q3Ba5JVj99Cw==
Content-Type: application/json
Content-Length: 1663
User-Agent: StockManage/1.0 CFNetwork/609 Darwin/12.1.0 
```

我不确定我是否没有正确设置我的 SelfHosted 配置，或者我是否没有实现必要的接口。

[WCF IClientMessageInspector 和传入的 SOAP 标头](https://stackoverflow.com/questions/8750219/wcf-iclientmessageinspector-and-the-incoming-soap-headers)，但这是使用 SOAP 而我使用的是 JSON。

我的端点是使用以下设置的

```
WebHttpBinding jsonBind = new WebHttpBinding();
ServiceEndpoint jsonServer = host.AddServiceEndpoint(typeof(POSServer.StockControl.IStockService), jsonBind, "json");

jsonServer.Behaviors.Add(new WebHttpBehavior
{
    DefaultBodyStyle = System.ServiceModel.Web.WebMessageBodyStyle.Bare,
    HelpEnabled = true,
    DefaultOutgoingResponseFormat = WebMessageFormat.Json
}); 
```

最后在我的 Service 实现中的 SubmitResults 函数中

```
public bool SubmitResults(Business.StockResultData theData)
{
    DateTime uploadTime = DateTime.Now;
    int index = OperationContext.Current.IncomingMessageHeaders.FindHeader("Device-Token", "");
    this.WriteHeaders(OperationContext.Current.IncomingMessageHeaders);
    this.WriteHeaders(OperationContext.Current.RequestContext.RequestMessage.Headers); 
```

但索引始终为 -1（未找到），并且 WriteHeaders 看不到标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T01:24:08.740

经过大量搜索，我相信我在这里找到了答案。（http://social.msdn.microsoft.com/Forums/pl-PL/wcf/thread/72ee44cc-58bb-45b2-aff7-49d9bbc8176e）

```
HttpRequestMessageProperty reqMsg = 
          OperationContext.Current.IncomingMessageProperties["httpRequest"] as 
          HttpRequestMessageProperty; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-10T23:30:57.930

这对我有用......其中 apiKey 是标题名称

```
>  var headers =OperationContext.Current.IncomingMessageProperties["httpRequest"];
            var apiToken = ((HttpRequestMessageProperty)headers).Headers["apiKey"]; 
```

# php - 为什么这个正则表达式不能被codeigniter的路由器识别

> ID：12574735
> 
> 赞同：0
> 
> 时间：2012-09-25T00:28:21.670
> 
> 标签：php, regex, codeigniter, url-routing

我有这条路线：

```
$route["((parameter|type|something)-([0-9]+)\/)+"] = 'somecontroller'; 
```

所以当我用这个测试网址时：

```
www.somewebsite.com/parameter-1/ 
```

codeigniter 返回页面未找到错误。但我在这里测试了正则表达式：

[http://rubular.com/](http://rubular.com/)

它似乎工作得很好。

编辑：我也试过把前导/尾随/的：

```
$route["/((parameter|type|something)-([0-9]+)\/)+/"] = 'somecontroller'; 
```

编辑：好的，感谢 Omega(user)，这是因为斜杠字符 (/) 在 codeigniter 的路由解析引擎中具有特殊的优先级或效果。因此，如果它是正则表达式的一部分，你已经表达了它可以出现多少次，不知道为什么，所以你可以用这些运算符 {} 或 ? 或 * 或 +，或任何其他处理前面表达式出现次数的运算符。所以上面的路线，与？操作员工作：

```
$route["/((parameter|type|something)-([0-9]+)\/)+/?"] = 'somecontroller'; 
```

这显然是一个代码点火器特定的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:54:22.787

尝试添加`?`到模式>>`((parameter|type|something)-([0-9]+)\/?)+`

# ruby-on-rails - 用于 ajax 调用的 Ruby on Rails 网络 http 响应

> ID：12574736
> 
> 赞同：0
> 
> 时间：2012-09-25T00:28:34.773
> 
> 标签：ruby-on-rails, ruby

我正在尝试从远程调用的链接返回一个网络 http 响应；但是，我不确定如何访问正文中返回的信息。

这是我到目前为止所拥有的：

```
def get_info
uri = URI.parse("somesite")
response = Net::HTTP.get_response(uri)
render :json => {:name => response.body}
end

$(document).ready(function(){
$('#get_info').bind("ajax:success", function(event, data, status, xhr) {
    alert(data.name);
});
}); 
```

这只是转储返回到弹出窗口的 xml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:37:28.103

如果你想对我推荐的响应做任何花哨的事情，我建议使用[nokogiri](http://nokogiri.org/)：

```
require 'nokogiri'
doc = Nokogiri::HTML(response.body) 
```

然后你可以得到例如标题：

```
title = doc.at_css('title').text
#=> "Title of the page" 
```

# r - 如何在 emacs 中指定 ESS 会话打开的 R 版本？

> ID：12574738
> 
> 赞同：3
> 
> 时间：2012-09-25T00:28:48.890
> 
> 标签：r, emacs, environment-variables, ess

当我想在 emacs 中打开 R 会话时，我使用`M-x R`.

但是，我们的服务器在 /usr/bin/R 中有 R 2.12，在 /usr/local/bin/R 中有 R 2.15。实际上，如果我问`whereis R`，我会得到以下信息：

```
$ whereis R
R: /usr/bin/R /usr/local/bin/R /usr/local/bin/R2.15 /usr/local/bin/R2.12 
/usr/local/bin/R2.7 /usr/include/R /usr/share/R /usr/share/man/man1/R.1.gz 
```

当我尝试从 .bashrc 导出“R_HOME=/usr/local/bin/R2.15”时，emacs 显示“警告：忽略 R_HOME 的环境值”

有没有办法选择启动哪个 R 实例？目前，当我在命令行中键入 R 时会启动 2.15，即使`M-x R`启动 2.12。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T00:38:13.900

非 ESS 的答案是确保您的 PATH 是相同的，并且您想要的版本是第一位的。您启动的 shell 与涉及 Emacs 的启动之间似乎存在差异。你可以使用它的 PATH 从你的 shell 启动 Emacs。

ESS 的答案可能涉及设置一些魔法变量……在 Windows 上，我们经常直接设置二进制文件。这里的lisp代码说：

```
;; If you wish to call other versions of R on a Unix system, ESS
;; should auto-detect other versions of R, according to matches to the
;; variable `ess-r-versions' as described in its docstring.  Consider
;; changing that variable rather than changing inferior-R-program-name
;; if your version of R is not already auto-detected.
;;(setq-default inferior-R-program-name "R")        ; unix systems 
```

所以它应该可以工作。我在我的 PATH 中只保留了 R，并且在其中保留了另一个，所以我不能在这里为你测试这个。但是尝试摆弄`ess-r-version`and/or `inferior-R-program-name`。

# python - Google App Engine 上的 Cron 作业以加快页面速度

> ID：12574741
> 
> 赞同：0
> 
> 时间：2012-09-25T00:29:14.583
> 
> 标签：python, google-app-engine, cron, crontab

我想在 Google App Engine 上安排一个 cron 作业，每 10 分钟左右查看一次我的 5 个主页，以保持当前实例正常运行并提高用户的页面速度。我了解创建 cron 作业的所有基本语法，但我很好奇 python 会是什么样子。我是否只需要制作 5 个不同的 cron 作业并让每个作业获取一个 URL？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T15:23:23.027

要回答您的具体问题，这样的 cron.yaml 可能如下所示：

```
cron:
- description: five minute run
  url: /refresh
  schedule: every 5 minutes 
```

其中 /refresh 是您在应用程序中编写的处理程序，然后会自动调用 N 分钟。

例如 myapplication.appspot.com/refresh

无需刷新特定页面或多个页面。只需调用处理程序即可使您的应用程序保持活动状态。

但正如其他人所指出的，这对于让应用程序永久保持温暖来说有点过分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T01:38:13.557

你不必诉诸于此。您可以付费让 App Engine 保持一定数量的前端持续运行。它们被称为“驻留”实例。

[https://developers.google.com/appengine/docs/adminconsole/instances](https://developers.google.com/appengine/docs/adminconsole/instances)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T01:01:58.583

我不了解 AppEngine，但在通用 Python 中，您只需要[urllib.urlopen()](http://docs.python.org/library/urllib.html)。我可能只有一个脚本可以按顺序拉出所有 5 页 - 我真的想不出将它们分开的理由。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-06T19:52:54.937

[https://cloud.google.com/appengine/docs/standard/python/config/appref#automatic_scaling_min_instances](https://cloud.google.com/appengine/docs/standard/python/config/appref#automatic_scaling_min_instances)

这似乎是现在解决单个低流量自动缩放实例问题的正确方法。基本上只需将其添加到您的 app.yaml 中：

```
automatic_scaling:
  min_instances: 1 
```

...然后将预热处理程序添加到您的应用程序（这样您就不会在每次 GAE 尝试预热您的应用程序时抛出 400 错误）： [https ://cloud.google.com/appengine/docs/standard/python3 /配置-热身请求](https://cloud.google.com/appengine/docs/standard/python3/configuring-warmup-requests)

不要在 ping 上浪费时间，这具有完全相同的效果和成本。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-09-25T01:13:03.193

Cron 作业只能获取一个 url。

我看到了 2 种方式： 1\. 您可以为每个页面添加 cron。2.您可以添加一个cron作业并从cron添加[任务](https://developers.google.com/appengine/docs/python/taskqueue/)到每个页面。

# ios5 - UIAppearance 的 setTitleTextAttributes 导致情节提要中设置的 UINavigationBar 标题在 iOS 6 中显示为椭圆形标题，但在 iOS 5 中没有

> ID：12574749
> 
> 赞同：0
> 
> 时间：2012-09-25T00:31:04.817
> 
> 标签：ios5, uinavigationbar, ios6, uifont, uiappearance

我一直在使用我认为是一些相当标准的 iOS 5 代码（这是stackoverflow 上[接受的 7 倍答案](https://stackoverflow.com/a/10440333/774691)），以便让我的 UINavigationBar 的标题以自定义字体显示。]

但我发现当我为 iOS5 构建的应用程序（以便它可以在 iOS5 和 iOS6 设备上运行）在 iOS6 模拟器上运行时，它省略了我的标题。

![运行 iOS 6.0 的 iOS 4 英寸 Retina 显示器模拟器](../Images/c64d1039a62607513a224bb7b38f37b8.png)

以下是在 iOS 5.1 模拟器上运行的相同代码。

![运行 iOS 5.1 的 iOS 3.5 英寸 Retinda 显示器模拟器](../Images/a2d032c68978b90f360faa1703d26ad0.png)

为清楚起见，以下是在我尝试在 iOS 6 上运行之前一直有效的相关代码。

```
#define COURIER_FONT_BOLD @"CourierNewPS-BoldMT"

- (UIFont*)navigationBarTitleFontPortrait
{
    if (!_navigationBarTitleFontPortrait)
        _navigationBarTitleFontPortrait = [UIFont fontWithName:COURIER_FONT_BOLD size:24.0];
    return _navigationBarTitleFontPortrait;
}

// …

    if ([[UINavigationBar class] respondsToSelector:@selector(appearance)])
    {
        NSDictionary* attrs = [NSDictionary dictionaryWithObjectsAndKeys:
                                            [UIColor lightGrayColor],
                                                                UITextAttributeTextShadowColor,
                                            [NSValue valueWithUIOffset:UIOffsetMake(1, 0)],
                                                                UITextAttributeTextShadowOffset,
                                            navigationBarTitleFontPortrait,
                                                                UITextAttributeFont,
                                            nil];
        [[UINavigationBar appearance] setTitleTextAttributes:attrs];
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T00:31:04.817

我发现了上述问题的两种解决方案：

1.  在 .storyboard 中将标题文本设置为不同大小的内容（在我的情况下，我输入了“...”，然后在 中`viewDidLoad`，调用`self.navigationItem.title = @"the GRID"`;

2.  在 viewDidLoad 中，执行`[self.navigationController.navigationBar setNeedsLayout]`.

我更喜欢后者，因为它感觉不像是一个杂物。无论如何，我猜第一个解决方案会迫使第二个解决方案发生。

不知道为什么这种行为在 iOS 5 和 iOS 6 之间有所不同，但这允许它在两者中工作。

# sublimetext2 - Sublime text 2 - zen 编码更改键绑定

> ID：12574751
> 
> 赞同：0
> 
> 时间：2012-09-25T00:31:07.140
> 
> 标签：sublimetext2, emmet

我需要 TAB 在我的 css 片段中的亮点之间切换。

我正在使用 css 片段和#FFF+tab =>

我想将 zen-coding key biding 从 tab 更改为 CTRL+，（逗号）我已将（default.sublime-keymap 中的最后一行）从“tab”更改为“ctrl+”，新命令有效（ctrl+，）但是我仍然有将#FFF 转换为 div 的选项卡。

如何在不影响 Sublime 的 TAB 的情况下从 zen-coding 中完全删除选项卡？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T00:37:09.260

（我不知道我第一次做错了什么，但现在可以了）

所以**在 sublime text 2 中将 key biding 更改为 zen-coding**只需更改 Preference > ZenCoding > Bidings > **default.sublime-keymap中的最后一行**

从 **"keys": ["tab"]** 到 **"keys": ["ctrl+,"]**

（或您想要的任何新密钥）

# ruby-on-rails - 如何通过请求规范传递获取变量

> ID：12574754
> 
> 赞同：0
> 
> 时间：2012-09-25T00:31:28.920
> 
> 标签：ruby-on-rails, rspec

我想在我的 rspec 调用中传递一个命名变量来匹配

这是路线：

```
match '/api/get-pairings/:global_id' => 'api#get_pairings', :as => :get_pairings 
```

这就是我拥有但不起作用的东西：

```
it "should get pairings for a specific id" do
   {:get => get_pairings_path, :global_id => 1000  }.should route_to(:controller => "api", :action => "get_pairings")
   {:get => get_pairings_path, :params => { :global_id => 1000 } }.should route_to(:controller => "api", :action => "get_pairings")
end 
```

有任何想法吗？

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T01:28:18.847

您需要将变量传递给`_path`方法才能使规范起作用：

```
it "should get pairings for a specific id" do
  {:get => get_pairings_path(:global_id => 1000) }.
    should route_to(:controller => "api",
                    :action => "get_pairings",
                    :global_id => "1000")
end 
```

# xml - xslt 根据递归位置重命名节点

> ID：12574761
> 
> 赞同：-1
> 
> 时间：2012-09-25T00:32:44.050
> 
> 标签：xml, xslt

我正在尝试遍历我的 XHTML 文档中的节点，找到与一组标准匹配的所有节点子节点，并根据它们相对于它们在文档层次结构中的深度来重命名它们。

例如：

我想遍历元素中的节点，并将所有 h1、h2、h3、h4、h5 或 h6 转换为 h1。

然后我想遍历元素的所有其他子节点，并找到它们的子节点，名称为 hN，并将它们命名为 h2。

等等，通过子节点进行无限深度的递归，但命名元素最多为h6 ...

这清楚吗？请原谅，我是 xsl 的新手。

这是我到目前为止所拥有的：

```
<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="*[contains(@class,'_col')]">
    <xsl:apply-templates select="*" mode="iterate"/>

</xsl:template>

<xsl:template match="*" mode="iterate">

    <xsl:if test="name()='h1' or name()='h2'or name()='h3'or name()='h4'or name()='h5'or name()='h6'">
        <h6>
            <xsl:apply-templates select="@*|node()"/>
        </h6>

    </xsl:if>
    <xsl:if test="name()!='h1' and name()!='h2' and name()!='h3' and name()!='h4' and name()!='h5' and name()!='h6'">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:if>
</xsl:template> 
```

显然，这根本行不通——不考虑 h# 标签的增量，如果我可以简单地让工作表输出完整的文档，并将所有 h# 标签转换为 h1 标签，我会感觉很好。任何人都可以帮忙吗？

谢谢。

编辑：

第一个答案是一个很大的帮助，但要清楚问题不仅仅是将所有 h# 标签增加一个，最多六个，它是找到所有 h# 标签，然后将它们设置为一个递增的数字，最多六个，取决于它们在文档层次结构中的深度。

这是xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<body>
<h2>Theme</h2>
<div class="col _incidental">
    <h2>theme 2</h2>
    <div>
        <h3>theme 3</h3>
        <p>some thext</p>
    </div>
</div>
<div class="col _vital">
    <h2>theme 2</h2>
    <div>
        <h1>theme 3</h1>
        <p>some thext</p>
    </div>
    <h2>theme 2</h2>
    <div>
        <h4>theme 3</h4>
        <p>some thext</p>
        <h3>theme 3</h3>
        <p>some thext</p>
    </div>
</div>
<div class="col _related">
      <h2>theme 2</h2>
      </div>   
          <div>
                <h5>theme 3</h5>
                <p>some thext</p>
          </div>
      </div>
</div>
</body> 
```

输出应该是：

```
<?xml version="1.0" encoding="UTF-8"?>
<body>
<h1>Theme</h1>
<div class="col _incidental">
    <h2>theme 2</h2>
    <div>
        <h3>theme 3</h3>
        <p>some thext</p>
    </div>
</div>
<div class="col _vital">
    <h2>theme 2</h2>
    <div>
        <h3>theme 3</h3>
        <p>some thext</p>
    </div>
    <h2>theme 2</h2>
    <div>
        <h3>theme 3</h3>
        <p>some thext</p>
        <h3>theme 3</h3>
        <p>some thext</p>
    </div>
</div>
<div class="col _related">
    <h2>theme 2</h2>
    <div>
        <div>
            <h3>theme 3</h3>
            <p>some thext</p>
        </div>
    </div>
</div>
</body> 
```

转换包含 hN 元素，这些元素根据它们在 doc 层次结构中的位置相对于找到的最后一个 hN 进行编号。因此，如果我找到一个 h2，然后将搜索任何兄弟姐妹，并且任何 hN 成为 h3，如果没有找到，则搜索他们的兄弟姐妹，并且他们成为 h3，然后任何兄弟姐妹的 hN 后代成为 h4.. . 有什么意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:13:44.830

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" method="xml" indent="yes"/>
  <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
    <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
 "*[starts-with(name(), 'H')
  and
    substring(name(),2) > 1
  and
    not(substring(name(),2) > 5)
   ]">

   <xsl:element name="h{substring(name(),2)+1}">
      <xsl:copy-of select="namespace::*"/>
     <xsl:apply-templates select="node()|@*"/>
   </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于以下 XML 文档时**（未提供源 XML 文档！）：

```
<html>
 <head/>
 <H2> Some H2</H2>

 <div>
   <H3>Some H3</H3>
   <div>
     <H4>Some H4</H4>

     <div>
       <H5>Some H5</H5>
     </div>
   </div>
 </div>
</html> 
```

**产生想要的正确结果：**

```
<html>
   <head/>
   <h3> Some H2</h3>
   <div>
      <h4>Some H3</h4>
      <div>
         <h5>Some H4</h5>
         <div>
            <h6>Some H5</h6>
         </div>
      </div>
   </div>
</html> 
```

**说明**：

1.  正确使用和覆盖**[身份规则](http://dpawson.co.uk/xsl/sect2/identity.html)**。

2.  正确使用模板和匹配模式。

3.  正确使用标准 XPath 函数**[`starts-with()`](http://www.w3.org/TR/1999/REC-xpath-19991116/#function-starts-with)**和**[`substring()`](http://www.w3.org/TR/1999/REC-xpath-19991116/#function-substring)**.

4.  正确使用**[`xsl:element`](http://www.w3.org/TR/1999/REC-xslt-19991116#section-Creating-Elements-with-xsl%3aelement)**和**[AVT](http://www.w3.org/TR/1999/REC-xslt-19991116#attribute-value-templates)**（属性值模板）。

# angularjs - 更好的设计将数据传递给其他 ng-view 并跨控制器持久化

> ID：12574765
> 
> 赞同：29
> 
> 时间：2012-09-25T00:33:33.457
> 
> 标签：angularjs

我开始使用 AngularJS 进行开发。我很困惑这是否是在我的部分视图之间传递数据的正确设计。

现在我有一个加载器页面，我在其中做一些请求。

```
function PeopleController($scope,$http,$location){
    $http.get('/location/-79.18925/43.77596').
    success(function(data){
      $scope.savePeopleResponse(data);
      $location.url('/test');
    });
} 
```

然后在为 /test 加载的视图中

我只是打电话

```
<div ng-controller="resultController">
    <div class="blueitem">{{getResultForPeople()|json}}</div>
</div> 
```

[结果控制器]

```
 function resultController($scope){
      $scope.getResultForPeople = function(){
     return $scope.getPeopleResponse();
    }
} 
```

并且 savePeopleResponse 和 getResultForPeople 被“缓存”在 rootScope 中

```
app.run(function($rootScope) {
  var peopleResponse = {};
  $rootScope.savePeopleResponse = function(data) {
   peopleResponse = data;
   console.log(data);
  }

  $rootScope.getPeopleResponse = function(){
    return peopleResponse;
  }
}); 
```

现在您可以看到，如果这个应用程序变得越来越大，这将变得非常混乱。处理数据以使其在控制器之间持久存在的最佳方法是什么？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-09-25T00:44:21.477

[您可以通过创建自己的服务](https://docs.angularjs.org/guide/services#creating-services)来跨控制器保存数据，如[本博客](http://onehungrymind.com/angularjs-sticky-notes-pt-1-architecture/)中所述。你也可以参考[这个问题](https://stackoverflow.com/questions/12008908/pass-variables-between-controllers)。

在您的情况下，您可以将您的`savePeopleResponse`and移动`getPeopleResponse`到服务中，然后将该服务注入您想要访问它的任何控制器中。

```
angular.module('myApp', [])
    .factory('peopleService', function () {
        var peopleResponse = {};

        return {
            savePeopleResponse:function (data) {
                peopleResponse = data;
                console.log(data);
            },
            getPeopleResponse:function () {
                return peopleResponse;
            }
        };
    }); 
```

使用您的控制器是这样的：

```
function resultController ($scope, peopleService) {
    $scope.getResultForPeople = peopleService.getPeopleResponse;
} 
```

使用此代码示例，请确保您包括`ng-app="myApp"`

# qt4 - 存储和检索 QFlags

> ID：12574768
> 
> 赞同：0
> 
> 时间：2012-09-25T00:33:49.703
> 
> 标签：qt4, bit-manipulation

我打算`QFlags`用于位操作，我有很多位要设置（大约 400），我现在面临的问题是如果我转换`QFlags`为 int 我得到 2 ^ 400 ，我无法将它存储在数据库中，所以我的问题是是否有一种方法可以存储`QFlags`在数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T01:15:38.397

我假设你的意思是一个 SQL 数据库。您可以创建一个包含每个位值的查找表：

```
CREATE TABLE flags (
    id INT NOT NULL,
    name VARCHAR(100) NOT NULL,
    PRIMARY KEY (id)
); 
```

然后这是一个简单的多对多参考：

```
CREATE TABLE my_objects (
    id INT NOT NULL,
    ...
    PRIMARY KEY (id)
);

CREATE TABLE object_flags (
    object_id INT NOT NULL,
    flag_id INT NOT NULL,
    value BOOLEAN NOT NULL,
    FOREIGN KEY (object_id) REFERENCES my_object(id),
    FOREIGN KEY (flag_id) REFERENCES flags(id)
); 
```

当您将值保存到数据库时，它看起来像：

```
QSqlQuery query;
query.prepare("INSERT INTO object_flags (object_id, flag_id, value) VALUES(:oid, :fid, :flag_value)")
query.bind(":oid", my_object->id);
query.bind(":fid", id_of_flag_1);
query.bind(":flag_value", my_object->flags.testFlag(MyFlagsEnum::my_flag_1));
query.exec();
// etc for my_flag_2 and so on 
```

并加载：

```
QSqlQuery query;
query.prepare("SELECT oflags.value, fl.name FROM object_flags AS oflags INNER JOIN flags AS fl WHERE oflags.id = :oid");
query.bind(":oid", my_object->id);

while(query.next()) {
    bool flag = query.values(0).toBool();
    QString flag_name = query.values(1).toString();
    if(flag_name == "my_flag_1" && flag)
        my_object->flags |= MyFlagsEnum::my_flag_1;
    // etc for my_flag_2 and so on
} 
```

这将为每个标志重复。我对 Qt 的元数据系统不够熟悉，不知道是否有更有效的方法来获取标志数据。也许你可以利用[X-Macros](http://www.drdobbs.com/the-new-c-x-macros/184401387)来节省一些打字。

# image - Amazon S3：我们可以下载 base64 编码字符串中的图像吗

> ID：12574769
> 
> 赞同：1
> 
> 时间：2012-09-25T00:33:59.120
> 
> 标签：image, amazon-s3, base64, amazon

我知道在 Amazon S3 中我们可以上传 base64 字符串格式的图像。有没有一种功能可以让我们从亚马逊下载 base64 格式的图像，而不是亚马逊的 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:43:49.760

您在寻找[GetObject](http://docs.amazonwebservices.com/AmazonS3/latest/API/SOAPGetObject.html)吗？

# c# - 如何调整数据网格的大小

> ID：12574770
> 
> 赞同：1
> 
> 时间：2012-09-25T00:34:07.217
> 
> 标签：c#, winforms, datagrid

我在winform中有一个datagridview，想做两件事。调整数据网格的大小，以便根据数据网格大小显示所有列（无滚动） 调整 winform 的宽度。

*   尝试了下面的代码，但它不起作用*

    ```
     int width = 0; 
        foreach (DataGridViewColumn col in information.Columns)
        {
            width += col.Width;
        }

        width += information.RowHeadersWidth;

        information.ClientSize = new Size(width + 100,height); 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:46:55.367

您好，我发现了如何使用下面的代码来完成这项工作。信息是数据网格，这是表格。

```
 int width = 0;

        this.information.RowHeadersVisible = false;
        for (int i = 0; i < information.Columns.Count; i++)
            width += information.Columns[i].GetPreferredWidth(DataGridViewAutoSizeColumnMode.AllCells, true);

        int rows = 0;

        this.information.RowHeadersVisible = false;
        for (int i = 0; i < information.Rows.Count; i++)
            rows += information.Rows[i].GetPreferredHeight(i, DataGridViewAutoSizeRowMode.AllCells, true);

        information.Size = new Size(width +20, rows+50);
        this.Width = width + 50; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T00:50:59.090

简单的操作顺序：

1.  将 DataGridView 的 AutoSizeColumnMode 属性设置为 AllCells。
2.  添加所有列的 Width 属性以及控件边框的额外宽度等的一些松弛（可能加 2）
3.  将 DataGridView 的 Width 属性设置为您计算的宽度。
4.  将窗体的宽度设置为 DataGridView 的宽度。

由你来实际编码。

**编辑：我现在在编译器面前，所以我把它放在一起：**

进入 Visual Studio。开始一个新项目。不要在设计器的表单上放任何东西。只需在初始化程序中使用此代码。

```
public Form1()
{
    InitializeComponent();

    // Create a DataGridView with 5 Columns
    // Each column is going to sized at 100 pixels wide which is default
    // Once filled, we will resize the form to fit the control
    DataGridView dataGridView1 = new DataGridView();
    for (int i = 0; i < 5; i++)
    {
        DataGridViewTextBoxColumn col = new DataGridViewTextBoxColumn();
        dataGridView1.Columns.Add(col);
    }
    dataGridView1.Location = new Point(0, 0);

    // Add the DataGridView to the form
    this.Controls.Add(dataGridView1);

    // Step 2:
    // Figure out the width of the DataGridView columns
    int width = 0;
    foreach (DataGridViewColumn col in dataGridView1.Columns)
        width += col.Width;
    width += dataGridView1.RowHeadersWidth;

    // Step 3:
    // Change the width of the DataGridView to match the column widths
    // I add 2 pixels to account for the control's borders
    dataGridView1.Width = width + 2;

    // Step 4:
    // Now make the form's width equal to the conbtrol's width
    // I add 16 to account for the form's boarders
    this.Width = dataGridView1.Width + 16;
} 
```

此代码创建一个`DataGridView`包含五列的，然后完全按照您的要求调整控件和表单的大小。我遵循了上面概述的确切步骤（第 1 步除外，因为我的列中没有任何数据）。

此代码有效。因此，如果您的工作不起作用，那么您肯定还有其他愚蠢的事情要做，我无法帮助您。

# binary-data - 二进制浮点减法

> ID：12574774
> 
> 赞同：2
> 
> 时间：2012-09-25T00:35:27.687
> 
> 标签：binary-data, subtraction

我正在解决二进制减法并卡在一个点上。我无法理解如何从较小的数字中减去较大的数字。

我的操作数是 0.111000*2^-3 和 1.0000*2^-3。

我很容易减去小数部分，但是当来到 MSB 时，我不知道该怎么做。我应该从哪里借来执行操作。我知道从 0 中减去 1 需要借位，它会将符号位变为负数。但在这里，存储并不受到关注。我的问题在于操作本身。谁能解释一下结果以及如何执行它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-28T09:53:33.017

很晚了，但是有同样的问题，所以把这个放在这里给别人，有同样的问题。

如果你的问题只出在分数部分，你可以试试这个方法：

```
 1.000
- 0.111
------- 
```

第1步：添加两个二进制数的符号位，以便您可以添加。

```
 0 1.000
 1 0.111
 -------  +
 1 1.111 
```

现在反转并加一以将 2 的补码转换为符号大小：

```
1 1.111 -> 0.001 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T00:45:42.343

这是一个很好的例子，可以帮助你：

[http://sandbox.mc.edu/~bennet/cs110/pm/sub.html](http://sandbox.mc.edu/~bennet/cs110/pm/sub.html)

如果以编程方式执行此操作，您可以在执行减法之前作弊并查看哪个更大（这就是我所做的）。

# css - 带有两种颜色的 SVG/CSS 笔划虚线 - 有可能吗？

> ID：12574787
> 
> 赞同：19
> 
> 时间：2012-09-25T00:37:31.030
> 
> 标签：css, colors, svg, line

是否可以使用 CSS 来定义一条带有两种交替的虚线颜色的线（或形状边缘）？也就是说，如果 1 和 2 是不同颜色的像素，那么

1212121212121212 或 112211221122

我基本上想要一些方法来使用具有两种颜色的stroke-dasharray。线本身是完全着色的。

如果这是不可能的，有什么好方法来近似它？例如，我可以使用两种颜色交替创建一个重复的线性渐变，但这很难从 javascript 中设置两种颜色。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-25T03:48:29.033

这在只有一个元素的 SVG 中是不可能的，但是您可以使用两个不同的矩形，然后应用一个`stroke-dashoffset: x`...

```
rect.stroke-red {
  stroke: red;
  fill: none;
  stroke-width: 5;
}

rect.stroke-green {
  stroke: green;
  fill: none;
  stroke-dasharray: 5,5; 
  stroke-width: 5;
}
```

```
<svg xmlns="http://www.w3.org/2000/svg">
    <rect class="stroke-red" x="10" y="10" width="101" height="101" />
    <rect class="stroke-green" x="10" y="10" width="101" height="101" />
</svg>
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-22T19:29:38.957

基于@duopixel 的答案，您可以使用该`stroke-dasharray`属性构建具有多种颜色的相当复杂的图案：

```
.L4 {
    stroke: #000;
    stroke-dasharray: 20,10,5,5,5,10;
}
.L5 {
    stroke: #AAA;
    stroke-dasharray: 0,20,10,15,10,0
}
.L6 {
    stroke: #DDD;
    stroke-dasharray: 0,35,5,15
} 
```

请参阅[http://jsfiddle.net/colin_young/Y38u9/](http://jsfiddle.net/colin_young/Y38u9/)演示线条和带有复合破折号图案的圆圈。

用 SO 片段更新：

```
svg {
    width: 100%;
    height: 160px;
}
path, circle {
    stroke-width: 4;
}
text {
    alignment-baseline: central;
    font-family: sans-serif;
    font-size: 10px;
    stroke-width: 0;
    fill: #000;
    text-anchor: middle;
}
.dim {
    stroke: #AAA;
    stroke-width: 1;
    stroke-dasharray: 1, 1;
}
circle.dim {
    fill: #FFF;
}
.L4 {
    stroke: #000;
    stroke-dasharray: 20, 10, 5, 5, 5, 10;
}
.L5 {
    stroke: #AAA;
    stroke-dasharray: 0, 20, 10, 15, 10, 0
}
.L6 {
    stroke: #DDD;
    stroke-dasharray: 0, 35, 5, 15
}
```

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
    <g fill="none" stroke="black">
        <path class="dim" d="M5 20 l0 80" />
        <path class="dim" d="M25 20 l0 80 l-10 20" />
        <path class="dim" d="M35 20 l0 80 l-10 30" />
        <path class="dim" d="M40 20 l0 120" />
        <path class="dim" d="M45 20 l0 80 l10 30" />
        <path class="dim" d="M50 20 l0 80 l10 20" />
        <path class="dim" d="M60 20 l0 80 l15 10" />

        <text x="5" y="110">0</text>
        <text x="5" y="125">20</text>
        <text x="25" y="135">30</text>
        <text x="40" y="150">35</text>
        <text x="55" y="140">40</text>
        <text x="65" y="125">45</text>
        <text x="82" y="115">55</text>

        <path class="L4" d="M5 20 l215 0" />
        <path class="L5" d="M5 20 l215 0" />
        <path class="L6" d="M5 20 l215 0" />

        <!-- separated to show composition -->
        <text x="5" y="70" style="text-anchor:start">Separated to show composition:</text>
        <path class="L4" d="M5 80 l215 0" />
        <path class="L5" d="M5 90 l215 0" />
        <path class="L6" d="M5 100 l215 0" />

        <circle class="L4" cx="400" cy="80" r="60" />
        <circle class="L5" cx="400" cy="80" r="60" />
        <circle class="L6" cx="400" cy="80" r="60" />
    </g>
</svg>
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-17T21:03:46.243

单程：

```
<!doctype html>
<html>
	<头部>
		<标题></标题>
		<风格>
分区 {
	宽度：100px；
	高度：100px；
}
.dashbox {
	边框：4px 蓝色虚线；
	背景：橙色；
}
.dashbox > div {
	背景：白色；
}
		</style>
	</head>
	<正文>
		<div class="dashbox">
			<div></div>
		</div>
	</正文>
</html>
```

也就是说，将一个元素与另一种颜色叠加在另一种颜色之后[以虚线的形式]。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-12-17T19:30:25.967

这是一个仅限 CSS 的解决方案。

```
<div style="
    margin:1rem;
    width:4rem;
    height:4rem;
    border:5px solid red;
    outline:5px dashed green;
    outline-offset: -5px;"
></div>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-07T00:27:58.217

一种可能对您有用的方法是在笔划上使用重复的线性渐变。这是一种适用于`line`s 的解决方法，因为您可以旋转渐变以匹配线条。

对于其他形状 - 它可能有效，但不如破折号阵列。从好的方面来说，它是纯 CSS 的，不需要额外的形状。

代码笔示例：

[https://codepen.io/michbarsinai/pen/YzwXYwg](https://codepen.io/michbarsinai/pen/YzwXYwg)

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-09-30T00:28:57.843

对于底部有 50 个破折号的边框，使用递增创建 50 个 div，使用 . 创建`margin-left`一个整体容器`overflow:hidden`。

# zend-framework - Zend_Route 即时

> ID：12574800
> 
> 赞同：0
> 
> 时间：2012-09-25T00:39:52.457
> 
> 标签：zend-framework, zend-route, zend-router

我们正在开发一个CMS。这将有一个模板系统，例如，如果管理员想要添加一个新闻部分，那么他将必须为该部分创建一个模板，并为每个新闻创建另一个模板，例如，/news/： int:/:title:/，但是该路线将存储在数据库中……我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:42:01.000

您可以使用通用控制器作为后备路由，以便它捕获管理员可能创建的所有路由。然后该控制器继续读取适当的模板并显示数据。

# cakephp - cakephp 分页和发现

> ID：12574803
> 
> 赞同：0
> 
> 时间：2012-09-25T00:40:15.897
> 
> 标签：cakephp, paginator

大家好，我试图在我的一个视图中对表格进行分页，我的 find 语句返回了正确的结果集，但是我不确定如何让我的表格能够对我找到的信息进行排序。

这是控制器，当我尝试分页时发现我得到的只是错误

```
public function index_admin(){
    //displays all disputes related to account.id
    //in a dashboard for an administrator user

    $this->set('title_for_layout', 'Dispute');
    $this->set('stylesheet_used', 'homestyle');
    $this->set('image_used', 'eBOXLogoHome.png');
    $this->layout='home_layout';

    //gets the User.account_id
    $id = $this->Auth->User('account_id');
    $conditions=array("OR"=> array(
        'Invoice.sender_id' => $id,
        'Invoice.receiver_id' => $id));

    $receiver=$this->Dispute->find('all',array(
    'conditions'=>$conditions));

    $this->set('receiver',$receiver);
    $this->paginate('Dispute'); 
    $this->set('id',$id);

} 
```

这是视图的代码

```
 <tr>
                <th><?php echo $this->Paginator->sort('id', 'Invoice ID'); ?></th>
                <th><?php echo $this->Paginator->sort('dispute_date', 'Dispute Created'); ?></th>
                <th><?php echo $this->Paginator->sort('status', 'Status'); ?></th>
                <th>Actions</th>
            </tr>

    <?php foreach($receiver as $receivers):?>

    <tr>
        </tr><tr>
        <td><?php echo $receivers['Invoice']['id'] ;?></td>
        <td><?php echo $receivers['Dispute']['dispute_date'] ;?></td>

    <?php

    if($receivers['Dispute']['active']==1)
    {
        $status = 'Active';
        $bgcol = '#B9FAEA';
    }
    else 
    {
        $status = 'Resolved';
        $bgcol = '#FAB9B9';
    } 
    ?><td align='center' bgcolor='<?php echo $bgcol ?>'><?php echo $status ?></td>
    <td><?php echo $this->Form->Html->link('View',
                                array('controller' => 'Messages','action'=>'viewMessage_admin',$receivers['Dispute']['id'])); ?>
                <?php echo $this->Form->Html->link('Resolve',
                                array('controller' => 'Disputes','action'=>'resolve',$receivers['Dispute']['id'])); ?></td>
    </tr>

<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:55:01.363

您应该调用`paginate`而不是`find`，而不是在它之后：

```
$id = $this->Auth->User('account_id');
$conditions=array("OR"=> array(
    'Invoice.sender_id' => $id,
    'Invoice.receiver_id' => $id));

$receiver=$this->paginate('Dispute', $conditions);
$this->set('receiver',$receiver);
$this->set('id',$id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:57:46.657

控制器端分页的 CakePHP 参考与视图端一样，因此它将让您深入了解 cakePHP 的分页器

[http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html](http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html) http://book.cakephp.org/1.3/view/1233/Pagination-in-Views

例如 [http://bakery.cakephp.org/articles/rtconner/2007/06/13/basic-pagination-overview-1-2](http://bakery.cakephp.org/articles/rtconner/2007/06/13/basic-pagination-overview-1-2)

# git - BitBucket 彩色差异电子邮件服务

> ID：12574804
> 
> 赞同：3
> 
> 时间：2012-09-25T00:41:05.773
> 
> 标签：git, svn, mercurial, diff, bitbucket

有谁知道无论如何要在 bitbucket 中发送提交的彩色差异？我认为您可以通过将 HTTP 调用推送到您自己的服务器来做到这一点，但如果您没有自己的服务器可以依赖，我需要一个解决方案。

我是 SVN::Notify 的忠实粉丝，所以我想在 Bitbucket 中找到一些类似的 git/mercurial 提交。

欢迎任何想法！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:16:12.667

最终需要这样做，所以我在 Google App Engine 上构建了一个 HTTP 包装器，使用 pygments 向我发送彩色电子邮件：

[https://bitbucket.org/brunobraga/bitbucket-color-diff](https://bitbucket.org/brunobraga/bitbucket-color-diff)

![在此处输入图像描述](../Images/ba73dd3f6bc3271ff20502f8307276c7.png)

欢迎提出建议、意见！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:35:42.740

关于 SVN::Notify 部分，必须通过[BitBucket 服务](https://confluence.atlassian.com/display/BITBUCKET/Managing+bitbucket+Services)之一来实现，例如（例如）[Bitbucket Email Diff Service](https://confluence.atlassian.com/display/BITBUCKET/Setting+Up+the+Bitbucket+Email+Diff+Service)。

然后，您可以通过电子邮件发送彩色差异的结果：

```
# For Mercurial/Git
hg  diff -p --color=always $@ | less -R 
```

更高级的选项：“[与 HTML 的彩色差异](https://stackoverflow.com/questions/2013091/coloured-diff-to-html)”，或“[让 Git 将接收后的电子邮件显示为 HTML 颜色格式的差异](http://blog.chomperstomp.com/making-git-show-post-receive-e-mails-as-an-html-color-formatted-diff/)”。

[OP bruno.braga](https://stackoverflow.com/users/1015901/bruno-braga)问道：

> 如果你不能依赖自己的服务器，你怎么称呼它？
> 你的意思是执行提交的本地机器负责发送电子邮件？

我回答：

> 这可能是一个解决方案，或者**至少有一个您可以控制的中间远程存储库，它将负责**：如果强制执行某些策略，则推送到远程存储库，并发送适当的电子邮件。

# macos - 资源未捆绑到应用程序中

> ID：12574808
> 
> 赞同：1
> 
> 时间：2012-09-25T00:42:41.617
> 
> 标签：macos, cocoa, resources, bundle, shader

我有名为 basic_shader.vsh 和 basic_shader.fsh 的着色器。我将这两个文件都添加到了 Copy Bundle Resources 构建阶段。但它们不会被复制到捆绑应用程序中。而且它们不会出现在日志导航器中。Xcode builder 有效地忽略了它们。

它们位于源目录之外的目录中。我不知道这是否相关。有趣的是，同样位于源目录之外的 png 图像被复制到包中。我的应用程序是使用 Cocoa 的 Mac OS X 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:15:37.187

我通过添加到**Copy Files**构建阶段（将目标设置为 Resources）而不是**Copy Bundle Resources**构建阶段来解决...我不知道为什么它解决了这个问题，因为我实际上并不真正理解这个问题。 ..

不管怎么说，还是要谢谢你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T01:22:10.927

确保将着色器复制到资源中

[![](../Images/9532dbc5cbab788b7698b4dcbba3036b.png)](https://i.stack.imgur.com/N5Gaa.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-20T21:23:56.380

由于某种原因，.metal 文件不被视为资源。如果您只是将扩展名更改为其他任何内容，它们将被复制到捆绑包中。

# php - 如何使用 PHP 在注册表单的选择菜单中自动选择用户的国家？

> ID：12574810
> 
> 赞同：0
> 
> 时间：2012-09-25T00:43:13.957
> 
> 标签：php, javascript, location

当他从他的位置使用我的应用程序时，如何在我的选择框中默认选择用户国家？

在javascript或php中？

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:58:14.517

1) 下载此数据库并提取 csv 文件 [https://sourceforge.net/projects/bowlfish/files/Others/ip2country/ip-to-country.csv.zip/download](https://sourceforge.net/projects/bowlfish/files/Others/ip2country/ip-to-country.csv.zip/download)
在“DBname”处创建一个 mysql 表“country_codes”具有 5 列“ip_from”（bigint 20）、“ip_to”（bigint 20）、country_code2（char 3）、country_code3（char 3）、country_name（varchar 50）的数据库并导入 csv 文件。

2）创建一个文件country.php

```
$ip = $_SERVER['REMOTE_ADDR'];

// Establishing a database connection
$dbh=mysql_connect("localhost","DBuser","DBpsw");
mysql_select_db("DBname");

// Query for getting visitor countrycode
$country_query  = "SELECT country_code2,country_name FROM country_codes ".
     "WHERE ip_from <= inet_aton('$ip') ".
      "AND ip_to >= inet_aton('$ip') ";

// Executing above query
$country_exec = mysql_query($country_query);

// Fetching the record set into an array
$ccode_array=mysql_fetch_array($country_exec);

// getting the country code from the array
$country_code=$ccode_array['country_code2'];

// getting the country name from the array
$country_name=$ccode_array['country_name'];

  // Display the Visitor coountry information
   //  echo "$country_code - $country_name";

// Closing the database connection
 mysql_close($dbh);

?> 
```

3) include_once 'country.php'; 在您的表单文件中并使用 $country_name

# c# - 获取使用登录表单保护的 Drupal 网站的内容

> ID：12574819
> 
> 赞同：0
> 
> 时间：2012-09-25T00:44:29.573
> 
> 标签：c#, drupal, httpwebrequest, screen-scraping

我想从一个用 Drupal 制作的网站上获取一些内容。这里的挑战是我需要先登录这个网站，然后才能访问我想要抓取的页面。有没有办法在我的 C# 代码中自动执行此登录过程，以便我可以获取安全内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:07:24.170

您必须使用[服务](http://drupal.org/project/services)模块来执行此操作。另请查看[此](http://drupal.org/node/394364)链接以获得一些解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:52:16.593

要访问受保护的内容，您需要存储*cookie*并将每个请求发送到您的服务器，从发送您的登录信息的请求开始，然后保存服务器为您提供的会话 cookie（这是您证明您你说你是谁）。

您可以使用`System.Windows.Forms.WebBrowser`控制较少但开箱即用的解决方案来处理 cookie。

我首选的方法是使用`System.Net.HttpWebRequest`发送和接收所有 Web 数据，然后使用**HtmlAgilityPack**将返回的数据解析为可以轻松读取的*文档对象模型(DOM)。*

开始工作的诀窍`System.Net.HttpWebRequest`是，您必须创建一个长期`System.Net.CookieContainer`保存的日志来跟踪您的登录信息（以及服务器希望您跟踪的其他内容）。好消息是，`HttpWebRequest`如果您提供容器，它将为您处理所有这些。

每次调用都需要一个新`HttpWebRequest`的，因此每次都必须将它们`.CookieContainer`设置为相同的对象。这是一个例子：

## 未经测试

```
using System.Net;

public void TestConnect()
{
    CookieContainer cookieJar = new CookieContainer();

    HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://www.mysite.com/login.htm");
    request.CookieContainer = cookieJar;
    HttpWebResponse response = (HttpWebResponse) request.GetResponse();

    // do page parsing and request setting here
    request = (HttpWebRequest)WebRequest.Create("http://www.mysite.com/submit_login.htm");
    // add specific page parameters here
    request.CookeContainer = cookieJar;
    response = (HttpWebResponse) request.GetResponse();

    request = (HttpWebRequest)WebRequest.Create("http://www.mysite.com/secured_page.htm");
    request.CookeContainer = cookieJar;
    // this will now work since you have saved your authentication cookies in 'cookieJar'
    response = (HttpWebResponse) request.GetResponse();
} 
```

[http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)

[HttpWebRequest 类](http://msdn.microsoft.com/en-us/library/8y7x3zz2.aspx)

[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.cookiecontainer.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.cookiecontainer.aspx)

# c# - .NET 线程，如 Node.js/V8？

> ID：12574825
> 
> 赞同：5
> 
> 时间：2012-09-25T00:45:39.190
> 
> 标签：c#, .net, multithreading, thread-safety, threadpool

我已经离开 .NET 桌面编程有一段时间了，一边喝着 Node.js koolaid。我发现 Node.js 的某些部分很容易使用。特别是，我喜欢线程模型的简单性，并且我可以在只编写代码来跟踪单个线程的同时获得多线程应用程序的一些好处。

现在，我需要在 .NET 中编写一个多线程应用程序，我突然想到，我没有理由不能使用[用于构建 Node.js 应用程序的类似线程模型](http://www.aaronstannard.com/image.axd?picture=nodejs%20for%20dotnet_thumb.png)。特别是，我想：

*   使用回调参数调用长时间运行的函数。（该函数将在池中的线​​程上执行。也许一个简单的包装函数来调用新线程上的函数就足够了？）
*   让这些回调函数调用在“主”线程上运行以进行处理
*   维护此“主”线程访问的所有对象的自动同步，因此锁定不是问题

这种线程模型的这种框架是否已经存在于 .NET 应用程序中或用于 .NET 应用程序？如果没有，.NET 的某些部分是否已经支持或处理我正在寻找的某些功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:58:42.460

正如其他人所提到的，`async`/`await`是 .NET 的绝佳选择。尤其：

*   `Task`//[类似于](http://nitoprograms.blogspot.com/2012/02/thinking-about-async-tasks.html)JavaScript的// 。`Task<T>`_`TaskCompletionSource<T>` `Deferred``Promise``Future`
*   使用 .NET 风格的延续创建 JavaScript 风格的延续[非常容易](http://blogs.msdn.com/b/pfxteam/archive/2012/08/15/implementing-then-with-await.aspx)，但在大多数情况下，您不需要它们。
*   没有与`async`/等效的 JavaScript `await`。`async`允许您编写方法，就好像它们是同步的一样，并且在引擎盖下，只要有`await`. 所以你不必使用延续传递风格。
*   对于后台线程上的操作，最好的选择是`Task.Run`. 但是，.NET 的标准模式是让后台操作计算并返回*单个*值，而不是与主线程进行连续的双向消息传递。
*   如果您确实需要异步数据的“流”，则应使用[TPL Dataflow](http://msdn.microsoft.com/en-us/devlabs/gg585582.aspx)或[Rx](http://msdn.microsoft.com/en-us/data/gg577609)。这就是事情与 JS 有很大不同的地方。

我建议您从我的[`async`/`await`介绍文章](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T05:56:58.220

我会推荐 TPL。这是它如何工作的示例

```
Void Work()
{
    Task<string> ts = Get();
    ts.ContinueWith(t =>
        {
        string result = t.Result;
        Console.WriteLine(result);
        });
} 
```

取消、使用不同调度程序的错误处理等有多种可能性。使用 .Net 4.5，您可以使用 await

```
async void Work()
{ 
    Task<string> ts = Get(); 
    string result = await ts; 
    Console.WriteLine(result); 
} 
```

在这里，编译器查看标记为 async 的方法，并添加一大堆线程安全、健壮的任务同步代码，同时保持代码可读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T01:03:00.337

我推荐看一下在 .Net 4.0 中可用的 TPL（任务并行库）。它可以做到第 1 点和第 2 点，但不能做到第 3 点。

请参阅[http://msdn.microsoft.com/en-us/library/dd460717.aspx](http://msdn.microsoft.com/en-us/library/dd460717.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T12:55:04.717

它可以通过利用 Window 的本机事件循环以及其他选项来实现。

以下代码是相同的 POC，它解决了您提到的所有 3 点。但请注意，它只是一个 POC。它不是类型安全的，它使用 Delegate.DynamicInvoke 可能很慢，但它仍然证明了这个概念。

```
public static class EventLoop
{
    private class EventTask
    {
        public EventTask(Delegate taskHandler) : this(taskHandler, null) {}

        public EventTask(Delegate taskHandler, Delegate callback)
        {
            TaskHandler = taskHandler;
            Callback = callback;
        }

        private Delegate Callback {get; set;}

        private Delegate TaskHandler {get; set;}

        public void Invoke(object param)
        {
            object[] paramArr = null;
            if (param.GetType().Equals(typeof(object[])))
            {
                paramArr = (object[]) param; //So that DynamicInvoke does not complain
            }

            object res = null;

            if (TaskHandler != null)
            {
                if (paramArr != null)
                {
                    res = TaskHandler.DynamicInvoke(paramArr);
                }
                else
                {
                    res = TaskHandler.DynamicInvoke(param);
                }
            }

            if (Callback != null)
            {
                EnqueueSyncTask(Callback, res);
            }
        }
    }

    private static WindowsFormsSynchronizationContext _syncContext;
    public static void Run(Action<string[]> mainProc, string[] args)
    {
        //You need to reference System.Windows.Forms
        _syncContext = new WindowsFormsSynchronizationContext();
        EnqueueSyncTask(mainProc, args);
        Application.Run();
    }

    public static void EnqueueSyncTask(Delegate taskHandler, object param)
    {
        //All these tasks will run one-by-one in order on Main thread
        //either on call of Application.DoEvenets or when Main thread becomes idle
        _syncContext.Post(new EventTask(taskHandler).Invoke, param);
    }

    public static void EnqueueAsyncTask(Delegate taskHandler, object param, Delegate callback)
    {
       //En-queue on .Net Thread Pool
       ThreadPool.QueueUserWorkItem(new EventTask(taskHandler, callback).Invoke, param);
    }
} 
```

客户代码：

```
 [STAThread]
    static void Main(string[] args)
    {
        Thread.CurrentThread.Name = "MAIN THREAD";
        Console.WriteLine("Method Main: " + Thread.CurrentThread.Name);
        EventLoop.Run(MainProc, args);
    }

    static void MainProc(string[] args)
    {
        Console.WriteLine("Method MainProc: " + Thread.CurrentThread.Name);
        Console.WriteLine("Queuing Long Running Task...");
        EventLoop.EnqueueAsyncTask(new Func<int,int,int>(LongCalculation), new object[]{5,6}, new Action<int>(PrintResult));
        Console.WriteLine("Queued Long Running Task");

        Thread.Sleep(400); //Do more work
        EventLoop.EnqueueAsyncTask(new Func<int, int, int>(LongCalculation), new object[] { 15, 16 }, new Action<int>(PrintResult));
        Thread.Sleep(150); //Do some more work but within this time 2nd task is not able to complete, meanwhile 1st task completes

        //Long running Tasks will run in background but callback will be executed only when Main thread becomes idle
        //To execute the callbacks before that, call Application.DoEvents
        Application.DoEvents(); //PrintResult for 1st task as 2nd is not yet complete
        Console.WriteLine("Method MainProc: Working over-time!!!!");
        Thread.Sleep(500); //After this sleep, 2nd Task's print will also be called as Main thread will become idle
    }

    static int LongCalculation(int a, int b)
    {
        Console.WriteLine("Method LongCalculation, Is Thread Pool Thread: " + Thread.CurrentThread.IsThreadPoolThread);
        Console.WriteLine("Running Long Calculation");
        Thread.Sleep(500); //long calc
        Console.WriteLine("completed Long Calculation");
        return a + b;
    }

    static void PrintResult(int a)
    {
        Console.WriteLine("Method PrintResult: " + Thread.CurrentThread.Name);
        Console.WriteLine("Result: " + a);
        //Continue processing potentially queuing more long running tasks
    } 
```

输出：

![在此处输入图像描述](../Images/1b5781d5ffa317d9420018ee2188a10e.png)

# php - 如何将主键是外键的不同表中的动态文本添加到正在显示的动态表中？

> ID：12574831
> 
> 赞同：0
> 
> 时间：2012-09-25T00:46:35.877
> 
> 标签：php, mysql

我在这里有一个名为 tb_user 的动态表，其列 region_id 和 Institute_id 并且两个 id 都是另一个表 tb_region（具有列 region_name 和 region_id）和 tb_institute（列 institut_id 和 Institute_name）的主键。我想查看 region_name 和 Institute_name 而不是 ID。

我用过这个 php 脚本

```
<?php echo $row_institute['institution_name']; ?> 
```

并查询以收集 tb_institute 的数据

```
mysql_select_db($database_connection_ched, $connection_ched);
$query_institution = "SELECT institute_id, institute_name FROM   tb_institute";
$institution = mysql_query($query_institution, $connection_ched) or die(mysql_error());
$row_institution = mysql_fetch_assoc($institution);
$totalRows_institution = mysql_num_rows($institution); 
```

但似乎没有显示正确的id名称。

我用来收集数据的查询：

```
mysql_select_db($database_connection_ched, $connection_ched);
$query_notification = sprintf("SELECT * FROM tb_user WHERE status = 'inactive' ORDER BY     date_register ASC", GetSQLValueString($colname_notification, "text"));
$query_limit_notification = sprintf("%s LIMIT %d, %d", $query_notification,     $startRow_notification, $maxRows_notification);
$notification = mysql_query($query_limit_notification, $connection_ched) or die(mysql_error());
$row_notification = mysql_fetch_assoc($notification);

if (isset($_GET['totalRows_notification'])) {
  $totalRows_notification = $_GET['totalRows_notification'];
} else {
  $all_notification = mysql_query($query_notification);
  $totalRows_notification = mysql_num_rows($all_notification);
}
$totalPages_notification = ceil($totalRows_notification/$maxRows_notification)-1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T03:28:19.513

```
$row_institution['institute_name'] 
```

代替

```
$row_institute['institution_name'] 
```

# bash - 如何在 Bash 中分割一行并分配变量

> ID：12574832
> 
> 赞同：1
> 
> 时间：2012-09-25T00:46:41.187
> 
> 标签：bash, wget

你怎么：

*   从文本文件中读取
*   用逗号分隔每一行
*   并将其分配给bash中的变量？

**文件列表**

重命名file.xml,url-01.php 重命名
FileDifferent.xml,url-02.php
specificFileRename.xml,"url-03"
newFilename.xml,"url-04"

我正在寻找完成这样的事情：

```
 #!/usr/bin/env bash 
    while read line 
      do   
          wget -c -O newfile remoteFile >/dev/null 2>&1  
    done < filelist 
```

另外，为 cron 作业放置 shell 文件的典型位置是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:58:24.810

通过设置特殊的 IFS 变量（内部字段分隔符），您可以使 bash 以逗号而不是默认的制表符、换行符和空格分隔。

```
while IFS=',' read -r newfile remotefile; do
    wget -q -c -O "$newfile" "http://somesite/$remotefile"
done < filelist 
```

您的示例文件中的引号将对此有问题。您可以使用参数扩展来去除引号。

```
while IFS=',' read -r newfile remotefile; do
    wget -q -c -O "$newfile" "http://somesite/${remotefile//\"/}"
done < filelist 
```

如果引号实际上是文件名的一部分，则需要对其进行 url 编码。您也可以为此使用参数扩展。

```
while IFS=',' read -r newfile remotefile; do
    wget -q -c -O "$newfile" "http://somesite/${remotefile//\"/%22}"
done < filelist 
```

# asp.net - 在 asmx Web 方法中从 .NET 序列化字符串向 JSON 对象的根属性添加额外属性

> ID：12574834
> 
> 赞同：2
> 
> 时间：2012-09-25T00:47:05.667
> 
> 标签：asp.net, ajax, json, web-services, asmx

假设我们正在序列化“Thing”类的 .NET 对象。当代理接收到 JSON 响应时，我们的 JSON 对象的根属性是“d”。有没有办法在 asmx Web 方法中将属性添加到根属性，或者将兄弟属性添加到来自 ASP.NET 的 JSON 对象？现在，我有一个技巧。我将值作为额外参数放在我的 JSON 对象中的每个“事物”对象中。

**事物类和 Web 服务 ASP.NET 代码：**

```
namespace Web.Controls.ThingList
{
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    [System.Web.Script.Services.ScriptService]
    public class ThingListService : System.Web.Services.WebService
    {
        [Serializable]
        public class Thing
        {
            public string id;
            public string name;
        }

        [WebMethod]
        [ScriptMethod(ResponseFormat = ResponseFormat.Json, UseHttpGet = false, XmlSerializeString = false)]
        public List<Thing> GetThingList(string start, string limit)  //
        {
            return GetList("Thing", start, limit);
        }

    }
} 
```

**JSON对象：**

```
{
    "d": [{
        "__type": "Web.Controls.ThingList.ThingListService+Thing",
        "id": "1",
        "name": "ONE"
    }, {
        "__type": "Web.Controls.ThingList.ThingListService+Thing",
        "id": "2",
        "name": "TWO"
    }]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T01:11:49.760

**这是我解决它的方法：**

```
 reader: {
        type: 'json',
        model: 'Thing',
        totalProperty: 'd.recordCount',
        idProperty: 'id',
        root: 'd.resultSet'
    },

[Serializable]
public class ProxyResponse
{
    public string recordCount;
    public List<Thing> resultSet;
}

[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json, UseHttpGet = false, XmlSerializeString = false)]
public ProxyResponse GetThingList(string start, string limit)  //
{
    ProxyResponse response = new ProxyResponse();

    List<Thing> list = GetList("Thing", start, limit);

    response.recordCount = list.Count.ToString();
    response.resultSet = list;

    return response;
} 
```

# ruby-on-rails - Ruby 获取深度嵌套的 JSON API 数据

> ID：12574838
> 
> 赞同：7
> 
> 时间：2012-09-25T00:48:34.907
> 
> 标签：ruby-on-rails, ruby, json, api, hash

我有一个从 World Weather Online API 获得响应的 rails 应用程序。我正在使用 rest-client gem，响应是 JSON 格式。

我使用以下方法解析响应：

```
parsed_response = JSON.parse(response) 
```

哪里`parsed_response`明显是一个哈希。

我需要的数据是在另一个散列中的另一个散列中的另一个散列中的另一个散列中的一个散列中的一个数组中的字符串。

最里面的嵌套哈希是 inside `["hourly"]`，一个由 8 个哈希组成的数组，每个哈希有 20 个键，拥有各种天气参数的字符串值。数组中的每个哈希值都是一天中的不同时间（预测是每三个小时一次，3*8 = 24 小时）。

因此，例如，如果我想要晚上 9 点的膨胀高度（以米为单位），我可以通过以下调用找到它：

```
@swell_height = parsed_data["data"]["weather"][0]["hourly"][7]["swellHeight_m"] 
```

数组中的第 7 个元素对应于`"time" => "2100"`

虽然我绝对可以使用这个，但我很好奇是否有更直接的方法来访问我的数据，比如如果它是一个数据库表，我可以使用活动记录，比如：

```
@swell_height = parsed_data.swellHeight_m.where(:time => "2100") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T11:07:01.330

您可能想查看[JSONPath](http://goessner.net/articles/JsonPath/)。它完全符合您的需要。它的语法与 XPath 非常相似，但 JSONPath 适用于 JSON 数据（很明显）。

有一个 Ruby 实现：[https ://github.com/joshbuddy/jsonpath](https://github.com/joshbuddy/jsonpath)

我个人在需要测试 JSON 响应的每个项目中都使用它。

# ios - iOS6 if/then 语句的问题

> ID：12574839
> 
> 赞同：-1
> 
> 时间：2012-09-25T00:48:37.617
> 
> 标签：ios, if-statement, ios6

我在 iTunes 中有一个在 iOS 4.3 和 5 上运行良好的应用程序。在 iOS 6 中，它在实际设备和模拟器中都无法正常运行。我查看了代码，没有发现任何问题。尽管如此，我在 iOS6 中的 if/then 语句似乎存在问题。应用程序的功能高度依赖于 if/then 语句，例如以下...

```
if (pageTitle.text == @"Alpha")
{
    fieldName.text = @"A";  
    anotherFieldName.text = @"AlphaText";
}

else {} 
```

以上根据 pageTitle.text 的值是否为“Alpha”来更改文本。这一直运作良好。然而，在 iOS6 中，即使 pageTitle.text 等于“Alpha”，它也永远不会评估为真。同样，这只发生在 iOS6 中。我已插入 NSLog 语句以确认 pageTitle.text 实际上等于“Alpha” - 确实如此。尽管有这个事实，它永远不会评估上面的内容为真（换句话说，NSLog 说 pageTitle.text 等于“Alpha”，但上面的代码永远不会将 pageTitle.text 评估为“Alpha”）。这只发生在 iOS6 中。

有没有人有任何想法？在我看来，像这样基本的东西在 iOS6 中会发生变化，这似乎是“不可能的”……但也许我错过了什么？还是您认为这可能是 iOS6 中的错误？任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T01:01:38.193

您的代码的问题不在于 if-else 逻辑，而在于 if 条件。比较两个字符串是否相等的正确方法是：

```
if ([pageTitle.text isEqualToString:@"Alpha"])
{
    fieldName.text = @"A";  
    anotherFieldName.text = @"AlphaText";
}
else 
{
...
} 
```

有关平等与身份的进一步讨论，请阅读[此内容。](http://www.karlkraft.com/index.php/2008/01/07/equality-vs-identity/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T00:51:56.953

```
if( pageTitle.text == @"Alpha" ) 
```

在这里，您正在比较两个**指向**对象的指针。其中一个是`NSString`乱七八糟的。
显然，当您比较内存地址时，比较将失败。

如果要测试两个`NSString`对象是否相等，请使用：

```
if( [ pageTitle.text isEqualToString: @"Alpha" ] == YES ) 
```

然后你会有一个真正的字符串比较。

# delphi - 如何以编程方式设置我的 IP 地址？

> ID：12574843
> 
> 赞同：6
> 
> 时间：2012-09-25T00:49:54.800
> 
> 标签：delphi

如何以编程方式设置我的 IP 地址？

我的应用程序正在检查它，使用来自[DelphiTricks](http://www.delphitricks.com/source-code/internet/get_your_own_ip_address.html)的代码（虽然我不确定来自[About.com](http://delphi.about.com/od/networking/l/aa103100a.htm)的代码是否更好）

我希望能够以编程方式设置地址以进行测试。而且（我不知道这是否重要），即使我没有连接到任何网络（在笔记本电脑上，在火车上），我也希望能够这样做。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T01:30:31.210

要更改网络适配器的 IP 地址，您可以使用[Win32_NetworkAdapterConfiguration](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394217%28v=vs.85%29.aspx) WMI 类的方法或[`EnableStatic`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390383%28v=vs.85%29.aspx)WinApi方法。[`AddIPAddress`](http://msdn.microsoft.com/en-us/library/aa365801%28v=vs.85%29.aspx)

试试这个使用 WMI 的示例。

```
{$APPTYPE CONSOLE}

{$R *.res}

uses
  SysUtils,
  ActiveX,
  Variants,
  ComObj;

procedure  SetStaticIpAddress(const NetworkCard, IPAddress, Mask :string);
const
  WbemUser    ='';
  WbemPassword='';
  WbemComputer='localhost';
  wbemFlagForwardOnly = $00000020;
var
  FSWbemLocator   : OLEVariant;
  FWMIService     : OLEVariant;
  FWbemObjectSet  : OLEVariant;
  FWbemObject     : OLEVariant;
  FOutParams      : OLEVariant;
  vIpAddress      : OLEVariant;
  vMask           : OLEVariant;
  oEnum           : IEnumvariant;
  iValue          : LongWord;
begin
  FSWbemLocator := CreateOleObject('WbemScripting.SWbemLocator');
  FWMIService   := FSWbemLocator.ConnectServer(WbemComputer, 'root\CIMV2', WbemUser, WbemPassword);

  FWbemObjectSet:= FWMIService.ExecQuery(Format('SELECT * FROM Win32_NetworkAdapterConfiguration Where Description="%s"',[NetworkCard]),'WQL',wbemFlagForwardOnly);
  oEnum         := IUnknown(FWbemObjectSet._NewEnum) as IEnumVariant;
  if oEnum.Next(1, FWbemObject, iValue) = 0 then
  begin
    vIpAddress   := VarArrayCreate([0, 0], varVariant);
    vIpAddress[0]:= IPAddress;
    vMask   := VarArrayCreate([0, 0], varVariant);
    vMask[0]:=  Mask;
    FOutParams:=FWbemObject.EnableStatic(vIpAddress, vMask);
    // 0 - Successful completion, no reboot required
    // 1 - Successful completion, reboot required
    Writeln(Format('ReturnValue  %s',[FOutParams]));
  end
  else
  Writeln('Network card not found');
end;

begin
 try
    CoInitialize(nil);
    try
      SetStaticIpAddress('Network card name','192.168.1.1','255.255.255.0');
    finally
      CoUninitialize;
    end;
 except
    on E:EOleException do
        Writeln(Format('EOleException %s %x', [E.Message,E.ErrorCode]));
    on E:Exception do
        Writeln(E.Classname, ':', E.Message);
 end;
 Writeln('Press Enter to exit');
 Readln;
end. 
```

# d3.js - cubism.js 的色带

> ID：12574844
> 
> 赞同：3
> 
> 时间：2012-09-25T00:50:12.750
> 
> 标签：d3.js, cubism.js

有人可以指出我应该调整以获得确定性色带的方向吗？例如，如果他们的颜色数组包含 6 种颜色，我希望值 10-30 总是转到第 5 个色带，50-80 到第 6 个，等等。

（如果有人想知道为什么我需要这么奇怪的东西，现在值 30 以几种不同的颜色显示，具体取决于集合中的其他值——随着时间的推移，用户可能会感到非常困惑）。我想限制集合中的最小值和最大值以实现稳定的颜色，但这会扭曲标签。另外，理想情况下，我想指定输入数据值的映射以自己着色

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T20:36:01.677

这不会让您对颜色进行任意值分配，但您可以使用以下`extent`选项设置 cubism 用于分配颜色的最小值和最大值：

```
var context = cubism.context();
var horizon = context.horizon();
horizon.extent([-80,80]); 
```

然后，范围将在您设置的色带之间平均分配。

# magento - Magento - 将会话变量传递给通过 _redirect() 调用的页面

> ID：12574846
> 
> 赞同：0
> 
> 时间：2012-09-25T00:50:33.857
> 
> 标签：magento, redirect, session-variables, logout

我需要将一个 URL 传递给 Magento，它应该在完成注销后重定向用户。为了存储它，我执行以下操作：

```
$BackTo = Mage::app()->getRequest()->getParam('backto');

if(!empty($BackTo)) {
    Mage::getSingleton('core/session')->setBackTo($BackTo);
} 
```

需要时，我使用`Mage::getSingleton('core/session')->getBackTo()`. 问题是，虽然这在登录时效果很好，但在注销时不起作用（最需要它的地方）。我可以存储会话变量，也可以立即检索它，但是，当我在`logout.phtml`重定向 JavaScript 所在的位置时，此类变量设置为`null`.

我怀疑 Magento 在注销时执行的重定向与这个“消失”的会话变量有关，但我不能肯定地说。

为了完整起见，这里是相关代码（代码比这更多，但它们主要是辅助功能，不会在注销时调用）。

**帐户控制器**

```
class MyPackage_Redirectplugin_AccountController extends Mage_Customer_AccountController {
    /**
     * @see AccountController:logoutAction()
     */
    public function logoutAction() {
        $this->_getSession()
            ->logout()
            ->setBeforeAuthUrl(Mage::getUrl());

        // Store the "back to" URL in a session variable
        $this->StoreBackToURL();

        $this->_redirect('*/*/logoutSuccess');
    }

protected function StoreBackToURL() {
    // Store the value of the "backto" argument, if it was passed
    $BackTo = Mage::app()->getRequest()->getParam('backto');

    if(!empty($BackTo)) {
        Mage::getSingleton('core/session')->setBackTo($BackTo);
        // At this point I can see the correct value stored in the session variable
    }
}

} 
```

**注销.phtml**

```
// The following command returns null
$redirectURL = Mage::getSingleton('core/session')->getBackTo(); 
```

在此先感谢您的帮助。

**25 年 12 月 9 日更新 - 找到了解决方法**

由于我找不到将会话变量传递给重定向打开的注销页面的方法，因此我选择了另一种方法：我通过 URL 传递它。具体来说，我实现了一个`logoutAction()`which calls `$this->_redirect('*/*/logoutSuccess', array('myvar' => $MyValue));`。

在模板中，我必须进行重定向，我只是使用`Mage::helper('core')->urlDecode(Mage::app()->getRequest()->getParam('myvar'));`.

我知道可能有更好的方法来实现整个事情，但我需要一个错误修复解决方案，这可以完成工作。感谢所有回答的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T01:40:24.523

我看到的最干净的选项（无需重写控制器！）是观察动态调度的`controller_action_postdispatch_customer_account_logout`事件 - 请[参阅`Mage_Core_Controller_Varien_Action::postDispatch()`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Controller/Varien/Action.php#L545). 在控制器操作完成后调用该`postDispatch()`方法。

示例观察者方法：

```
public function logoutRedirect($obs)
{
    $redirectUrl = Mage::getUrl(/* url args */);
    $obs->getControllerAction()->getResponse()->setRedirect($redirectUrl);
} 
```

这样做会在用户注销时直接将用户重定向到所需的 URL，这意味着将*无法*访问带有 JS 重定向的 logoutSuccess 页面。

如果希望 logoutSuccess 页面正常呈现，但重定向到不同的 URL，可以通过以下几种方式实现： 1\. 通过创建自定义模板 2\. 通过创建自定义模板块类，覆盖`getUrl()`方法检索您选择的 URL，并将其指定为要[`customer_logout`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/design/frontend/base/default/layout/customer.xml#L112)在自定义布局 XML 更新文件中的内容区域中呈现的块（通过删除或替换块）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T01:06:18.360

只需观察此事件 customer_logout，当事件调用方法时，您将会话密钥保存在数据库中。了解更多： http: [//www.magentocommerce.com/wiki/5__-_modules_and_development/reference/events](http://www.magentocommerce.com/wiki/5_-_modules_and_development/reference/events)

[http://www.magentocommerce.com/wiki/5__-_modules_and_development/0__-_module_development_in_magento/customizing_magento_using_event-observer_method](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)

总帐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T18:02:58.047

**25 年 9 月 12 日更新 - 找到解决方法**
*此解决方法也已发布在问题本身中。*

由于我找不到将会话变量传递给重定向打开的注销页面的方法，因此我选择了另一种方法：我通过 URL 传递它。具体来说，我实现了一个`logoutAction()`调用`$this->_redirect('*/*/logoutSuccess', array('myvar' => $MyValue));.`

在模板中，我必须进行重定向，我只是使用`Mage::helper('core')->urlDecode(Mage::app()->getRequest()->getParam('myvar'));`.

我知道可能有更好的方法来实现整个事情，但我需要一个错误修复解决方案，这可以完成工作。感谢所有回答的人。

# java - Floyd Warshall 算法的 Java 实现

> ID：12574847
> 
> 赞同：0
> 
> 时间：2012-09-25T00:50:37.500
> 
> 标签：java, path-finding, floyd-warshall

我已经尝试了一周来为我正在开发的游戏寻找路径。我正在使用Floyd Warshall 算法的[这个实现](http://algowiki.net/wiki/index.php?title=Floyd-Warshall%27s_algorithm#Yet_another_Java_implementation)。我相信我已经设法将问题缩小到这个循环中：

```
for(int k = 0; k < nodes.length; k++)
    for(int i = 0; i < nodes.length; i++)
        for(int j = 0; j < nodes.length; j++)
            if(D[i][k] != Integer.MAX_VALUE
            && D[k][j] != Integer.MAX_VALUE
            && D[i][k] + D[k][j] < D[i][j]){
                D[i][j] = D[i][k]+D[k][j];
                P[i][j] = nodes[k];
            } 
```

我一直在用 4 个节点进行测试，每个节点都连接到所有其他节点，并且所有连接的权重为 1。这是循环之前所有相关变量的值。

```
for(Node n:nodes)System.out.println(n.pos.toString() + " " + n.index); 
```

输出：

```
[x: 4, y: 4] 0
[x: 4, y: 5] 1
[x: 5, y: 4] 2
[x: 5, y: 5] 3 
```

这和预期的一样

```
for(Edge e:edgeList)
    System.out.println(e.from.pos.toString() + " " + e.to.pos.toString()); 
```

输出：

```
[x: 4, y: 4] [x: 5, y: 4]
[x: 4, y: 4] [x: 4, y: 5]
[x: 4, y: 4] [x: 5, y: 5]
[x: 4, y: 5] [x: 4, y: 4]
[x: 4, y: 5] [x: 5, y: 4]
[x: 4, y: 5] [x: 5, y: 5]
[x: 5, y: 4] [x: 4, y: 4]
[x: 5, y: 4] [x: 4, y: 5]
[x: 5, y: 4] [x: 5, y: 5]
[x: 5, y: 5] [x: 4, y: 4]
[x: 5, y: 5] [x: 5, y: 4]
[x: 5, y: 5] [x: 4, y: 5] 
```

这也符合预期。

```
for(int[] ia:D){
    for(int a:ia)System.out.print(a + " ");
    System.out.print("\n");
} 
```

输出：

```
2147483647 1 1 1 
1 2147483647 1 1 
1 1 2147483647 1 
1 1 1 2147483647 
```

这也符合预期。

```
P = new Node[nodes.length][nodes.length];
for(int k = 0; k < nodes.length; k++)
    for(i = 0; i < nodes.length; i++)
        for(int j = 0; j < nodes.length; j++)
            if(D[i][k] != Integer.MAX_VALUE
            && D[k][j] != Integer.MAX_VALUE
            && D[i][k]+D[k][j] < D[i][j]){
                D[i][j] = D[i][k]+D[k][j];
                P[i][j] = nodes[k];
                System.out.println(nodes[k].pos.toString() + " " + k);
            } 
```

输出：

```
[x: 4, y: 4] 0
[x: 4, y: 4] 0
[x: 4, y: 4] 0
[x: 4, y: 5] 1 
```

这就是我认为问题所在，我希望输出包含所有不同的节点，只有在这里找到的两个节点在 getShortestPath 函数中工作。我相信这将是循环的正确输出，据我所知，顺序应该是无关紧要的。

```
[x: 4, y: 4] 0
[x: 4, y: 5] 1
[x: 5, y: 4] 2
[x: 5, y: 5] 3 
```

我不知道究竟是什么导致了循环中的问题，或者我是否对算法有误解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:15:54.907

从结果来看：

```
[x: 4, y: 4] 0
[x: 4, y: 4] 0
[x: 4, y: 4] 0
[x: 4, y: 5] 1 
```

我几乎可以猜到发生了什么。您可能已将所有内容初始化`D[i][j]`为. 所以前 3 个更新是, 。但只能更新。`1``D[i][i]``Integer.MAX_VALUE``D[i][i] = D[i][0] + D[i][0]``k = 0``i = 1..3``D[0][0]``d[0][1] + d[1][0]`

您对 floyd-warshall 的实现看起来完全没问题。也许您应该在其他地方检查您的错误，例如恢复最短路径路径，这更容易出错。

# ios - 在 App Store 应用中同时支持 armv6 和 iOS 6？

> ID：12574851
> 
> 赞同：7
> 
> 时间：2012-09-25T00:51:40.240
> 
> 标签：ios, xcode, app-store

从 Xcode 4.5 开始，我们无法为 armv6 构建，因此无法再支持 iPhone 3G 等设备。

是否可以使用 Xcode 4.3 生成正确签名的 armv6 二进制文件，然后使用 lipo 将该二进制文件和 Xcode-4.5 生成的 armv7 二进制文件组合成一个胖子？

我该怎么办？有谁知道好的教程吗？

是否允许将生成的胖二进制文件提交到 App Store？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T02:49:31.507

使用 lipo 修改二进制文件后，代码签名将不再匹配。因此，捆绑包之后需要重新设计。

使用 Xcode 4.4 甚至更早版本构建的应用程序仍然可以在 iOS 6 设备上正常运行；并且有报道称 Apple 仍在接受使用 iOS 5.1 SDK 构建的应用程序。

Objective C 将允许您使用一些不在旧链接框架中的较新 API，方法是通过名称通过 Objective C 运行时调用它们。（当然，应用程序应该首先检查它们在当前设备上的可用性！）

您甚至可以从早期的 Xcode 和 pre-iOS-6 SDK 支持新的 iPhone 5 显示，只需在应用程序包中包含一个 568@2x 高的默认图像，并正确设置应用程序的所有窗口和视图大小以及调整属性大小。更新：当提交到 iTunes App Store 时，Apple 不再接受以这种方式构建的应用程序。

补充：另一个潜在的解决方案是将您的开发分成两个类似的应用程序。一个适用于 iOS 4.3 及更高版本。一款适用于不支持 iOS 6 和 iPhone 5 的 iOS 4.2.x 及更低版本。应用商店中有两个不同的应用。然而，苹果是否会允许这样做还不得而知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T21:51:38.927

似乎其他人想出了如何做到这一点，请参阅[此 SO question](https://stackoverflow.com/q/12619124/762322)。

不过，我自己还没有测试过。

# java - 正则表达式查找整个单词

> ID：12574853
> 
> 赞同：5
> 
> 时间：2012-09-25T00:52:08.450
> 
> 标签：java, regex

我将如何找到整个单词，即`"EU"`，是否存在于 String`"I am in the EU."`中，而不匹配大小写，例如`"I am in Europe."`？

基本上，我想要某个词的正则表达式，即`"EU"`两边都有非字母字符。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T00:55:46.527

`.*\bEU\b.*`

```
 public static void main(String[] args) {
       String regex = ".*\\bEU\\b.*";
       String text = "EU is an acronym for  EUROPE";
       //String text = "EULA should not match";

       if(text.matches(regex)) {
           System.out.println("It matches");
       } else {
           System.out.println("Doesn't match");
       }

    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T00:57:50.643

你可以做类似的事情

```
String str = "I am in the EU.";
Matcher matcher = Pattern.compile("\\bEU\\b").matcher(str);
if (matcher.find()) {
   System.out.println("Found word EU");
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T00:58:02.000

使用带有*单词边界*的模式：

```
String str = "I am in the EU.";

if (str.matches(".*\\bEU\\b.*"))
    doSomething(); 
```

查看. [_`Pattern`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)

# image - flex 4.6 背景图像蒙皮

> ID：12574854
> 
> 赞同：1
> 
> 时间：2012-09-25T00:52:08.697
> 
> 标签：image, apache-flex, background, flash-builder, skin

大家好，我是使用 flex 4.6 的 flash builder 的新手...

我创建了一个带有导航器视图主题的移动应用程序，但我想要我自己的个性化主题，这是一个简单的图像 jpg 附加在我的皮肤中：backGround.mxml

```
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" 
xmlns:fb="http://ns.adobe.com/flashbuilder/2009" alpha.disabled="0.5">

<fx:Metadata>[HostComponent("spark.components.View")]</fx:Metadata>

<s:states>
    <s:State name="normal" />
    <s:State name="disabled" />
</s:states>

<s:BitmapImage includeIn="normal" height="100%" source="assets/fondito.jpg" width="100%"/> 
```

我在 HomeView 中将皮肤作为 skinClass 导入，但它涵盖了所有其他组件……标签、列表、按钮等……

如何在皮肤上方显示所有组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T01:02:09.737

[在此处](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/View.html#SkinPartSummary)查看 View 类所需的 skinParts 。

您会注意到您将需要一个 contentGroup 可选皮肤部件。这允许您相对于它来布局您的位图图像。作为快速修复，这里是一些示例代码（未经测试）：

```
...
<s:BitmapImage includeIn="normal" height="100%" source="assets/fondito.jpg" width="100%"/>
<s:Group id="contentGroup"/>
... 
```

# c - While 循环未按预期运行

> ID：12574856
> 
> 赞同：0
> 
> 时间：2012-09-25T00:52:09.850
> 
> 标签：c, linux, ubuntu, netbeans

我正在执行一项任务，并且遇到了一些奇怪的事情。我的程序中有这个 while 循环，它似乎没有分支到 for 循环中。我放置了两个打印语句，只有“1”一遍又一遍地打印。请注意，这只发生在我从 linux 终端编译和运行时。现在看起来很奇怪的是，如果我在 Netbeans 中运行完全相同的代码（while 循环加上其他所有代码），它似乎可以编译并按预期运行。任何人都知道可能出了什么问题。这是代码。我感谢您的帮助。

```
while(strstr(p,string_a)!= NULL)
{
    p = trailerp + pholderp; 
    long int index =  strstr(p,string_a) - (p+1); // -1 where it hits 
    printf("1");
    for(  i = 0; i <= index; i++)
    {
        printf("2");
        p2[trailerp2] = pholderp[trailerp];
        trailerp++;
        trailerp2++;
        if(i == index)
        {  
            int j;
            for(j=0; j <= lenb-1; j++)            // insert the new string
            {
                p2[trailerp2] = string_b[j];
                trailerp2++;
            }
            trailerp++;
        }       
    }  
} 
```

编辑：我发现了问题。Netbeans 似乎在这个操作系统中被破坏了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T01:08:05.427

这是因为在此部分中`strstr(p,string_a)`返回`p`或返回：`0`

```
long int index =  strstr(p,string_a) - (p+1); // -1 where it hits 
```

这导致`index < 0`并防止进入循环。

您必须在此声明之前立即打印两者`p`，`string_a`以查看那里出了什么问题。

# php - PHP Foreach 循环添加空白 MySQL 条目

> ID：12574863
> 
> 赞同：1
> 
> 时间：2012-09-25T00:53:16.947
> 
> 标签：php, mysql, mysqli

我有一个带有复选框的表单，我将其传递给数组中的 PHP。然后，我使用 Foreach 循环将表单中的数据插入 MySQL 数据库。正在输入数据，但它也在添加一个空白条目。我试图验证该值不是空白，但仍然无法让它不放入空白数据。

形式：

```
<form action="work.php" method="post">
<input type="checkbox" name="work[]" value="MOC" /> MOC<br />
<input type="checkbox" name="work[]" value="Spectrum" /> Spectrum<br />
<input type="checkbox" name="work[]" value="Calls" /> Calls<br />
<input type="checkbox" name="work[]" value="IPMon" /> IPMon<br />
<input type="checkbox" name="work[]" value="SEV 1/2" /> SEV 1/2<br />
<input type="checkbox" name="work[]" value="LBC" /> LBC<br />
<input type="checkbox" name="work[]" value="Email Queue" /> Email Queue<br />
<input type="checkbox" name="work[]" value="NOC Inbox" /> NOC Inbox<br />
<label>Special Projects:</label><input type="text" name="special" />
<input type="submit" name="submit" value="Submit" />
</form> 
```

PHP：

```
if(ISSET($_POST['work'])){
    foreach($_POST['work'] as $work){
        $mysqli->query("INSERT INTO Working (wuid, task) VALUES ('".$username."', '".$work."')");
    }
} 
```

MySQL 数据：

```
wuid    task    id
tduran          37
tduran  IPMon   36
tduran  Calls   35 
```

$username 变量是从 LDAP 身份验证中提取的，因此不会更改。问题在于$work。我已经多次打印出数组和变量，但无法让它显示空白内容。一直在拉我的头发。希望

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T02:47:39.217

查看上述问题的描述，您已经为复选框元素定义了 HTML 数组。在服务器端，我们仅获取那些使用 $_POST['work '] 检查的复选框的值，这将是一个数组。

因此，要获取所有复选框的值，您需要检查所有复选框

您将通过 $_POST['work'] 获得选中复选框的结果数组。

# sockets - 使用 pcap 读取套接字

> ID：12574865
> 
> 赞同：0
> 
> 时间：2012-09-25T00:53:43.343
> 
> 标签：sockets, freebsd, pcap

我有一个绑定到 NIC 的套接字，我用它来捕获 pcap_loop 中的数据包。

我有一个单独的进程正在运行，最终在同一设备上执行“读取”，但只有在准备好读取 unix 本地管道之后。是否正确地说第二个进程的设备上的 read() 将读取准备好的所有内容，而不仅仅是一个数据包，即使我的另一个进程设置为使用 pcap_loop 一次读取一个数据包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T01:22:01.403

> 我有一个绑定到 NIC 的套接字，我用它来捕获 pcap_loop 中的数据包。

你说“socket”，所以我猜这是 Linux（它也可能是 IRIX，但这不太可能，而且在任何一种情况下答案都是一样的；其他操作系统不使用 libpcap 中的套接字，这些操作系统上的本机捕获机制使用套接字以外的机制）。

> 我有一个单独的进程正在运行，最终在同一设备上执行“读取”，但只有在准备好读取 unix 本地管道之后。是否正确地说第二个进程的设备上的 read() 将读取准备好的所有内容，而不仅仅是一次一个数据包，

不，PF_PACKET 套接字一次从`read()`.

顺便说一句，不能保证从套接字读取并同时在 libpcap 中处理同一个套接字会起作用。Libpcap 可能正在使用内存映射机制来获取数据包；除非您在`read()`其他地方看到过有关内存映射机制如何与 s 一起工作的文档，或者已经阅读了足够多的 Linux 内核代码来弄清楚它是如何工作的，否则您可能不想假设它会按照您想要的方式工作。

但是，如果这是 FreeBSD，正如标签所建议（但未说明），那么 libpcap 使用的是 BPF 设备，****不是****套接字。A`read()`会给你一个完整的数据包缓冲，*并且`read()`libpcap 完成的 s 会给 libpcap 一个完整的数据包缓冲*，即使它碰巧每个数据包调用一次你的回调。可能会出现与内存映射访问相同的问题`read()`，但在 FreeBSD 的更高版本中，内存映射 BPF 默认情况下不被 libpcap 使用。

# javascript - JS：添加了实时新元素的默认文本交换

> ID：12574870
> 
> 赞同：0
> 
> 时间：2012-09-25T00:54:22.327
> 
> 标签：javascript, jquery, live

因此，对于输入（或其他类型的 el）上的默认文本交换，我有这个片段

```
    <input class="js_text_swap" type="text" value="输入你的邮箱" />

```

```
    if($('.js_text_swap').length > 0) {
        $('.js_text_swap').each(function() {
            var that = $(this),
                值 = that.val(); // 记住默认值

            那.focusin（函数（）{
                如果（that.val() === 值）{
                    that.val('');
                }
            });
            那.focusout（函数（）{
                if(that.val() === '') {
                    那.val（值）；
                }
            });
        });
    }

```

* * *

所以我的问题是：
1）**有人对此有更好的解决方案吗？**
2)**有谁知道如何使用实时添加的元素**（在页面加载后添加 js）使这项工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:57:12.423

日本鬼子！

**HTML**

```
<input placeholder="Click..." class="text" type="text"> 
```

**CSS**

```
.text{color:#aaa}
.text.focus{color:#444} 
```

**JS**

```
$("input[placeholder]").each(function() {
    var placeholder = $(this).attr("placeholder");

    $(this).val(placeholder).focus(function() {
        if ($(this).val() == placeholder) {
            $(this).val("").addClass('focus');
        }
    }).blur(function() {
        if ($(this).val() === "") {
            $(this).val(placeholder).removeClass('focus');
        }
    });
}); 
```

[http://yckart.com/jquery-simple-placeholder/](http://yckart.com/jquery-simple-placeholder/)

**更新**

要使其与 ajax 或类似的工作一起使用，您需要将其转换为“插件”并在您成功的 ajax 请求之后（或在动态创建废话之后）调用它。

像这样的东西（非常简单的例子）：

```
jQuery.fn.placeholder = function() {
    return this.each(function() {
        var placeholder = $(this).attr("placeholder");

        $(this).val(placeholder).focus(function() {
            if ($(this).val() == placeholder) {
                $(this).val("").addClass('focus');
            }
        }).blur(function() {
            if ($(this).val() === "") {
                $(this).val(placeholder).removeClass('focus');
            }
        });
    });
};

$("input:text, textarea").placeholder();

$("button").on("click", function() {
    $(this).before('<input type="text" placeholder="default value" />');
    $("input:text, textarea").placeholder();
}); 
```

[演示](http://fiddle.jshell.net/n5pUr/)

# java - Spring Mvc java.io.FileNotFoundException - ApplicationContext.xml

> ID：12574877
> 
> 赞同：2
> 
> 时间：2012-09-25T00:55:38.747
> 
> 标签：java, xml, spring-mvc, java-io, applicationcontext

applicationContext.xml 位于 WEB-INF 文件夹中，为什么会出现此错误：

```
org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from class path resource [applicationContext.xml]; nested exception is java.io.FileNotFoundException: class path resource [applicationContext.xml] cannot be opened because it does not exist 
```

**Web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="crimeTrack" version="3.0">

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <context-param>
         <param-name>log4jConfigLocation</param-name> 
         <param-value>/WEB-INF/classes/log4j.properties</param-value>
     </context-param>

     <listener>
          <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class> 
     </listener>

     <listener>
          <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
     </listener> 

    <servlet>
        <servlet-name>crimetrack</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>crimetrack</servlet-name>
        <url-pattern>*.htm</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
    <welcome-file>
      index.jsp
    </welcome-file>
    </welcome-file-list>

    <jsp-config>
        <taglib>
            <taglib-uri>/spring</taglib-uri>
            <taglib-location>/WEB-INF/tld/spring-form.tld</taglib-location>
        </taglib>
    </jsp-config>

</web-app> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-20T00:17:54.583

就我而言，我需要做的就是**从** `applicationContext.xml`

`src\main\webapp\WEB-INF\`

到

`src\main\resources\`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T04:11:40.040

我必须坚持使用**WEB-INF文件中的****/resources**目录，或者你可以随意命名它。类**路径**查看**WEB-INF**目录，但它会扫描该目录中的文件夹。我将**applicationContext.xml**和**servlet.xml**文件移动到**WEB-INF/resources**目录中，所以可以从**WEB-INF**的根目录中删除它，并且不需要维护**applicationContext.xml**的两个副本或**servlet.xml**文件。

 ******* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-29T00:38:25.987

您需要做的就是将**ApplicationContext.xml**文件添加到您的源目录中。然后加载没有任何路径的spring配置文件。

```
 ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("ApplicationContext.xml"); 
```

它会工作的！******

# jquery - jQuery DIV click() 接管 DIV.IMG click()

> ID：12574881
> 
> 赞同：3
> 
> 时间：2012-09-25T00:56:29.620
> 
> 标签：jquery, click

我尝试使用 stopPropagation() 没有运气。
我有这个结构：

```
<div class="logos">  
</div> 
```

我有一个绑定到徽标的单击，它在其中附加了 img 元素，结果如下：

```
<div class="logos">
  <img width="100" height="80" src="/js/fileupload/uploads/Penguins.jpg">  
  <img width="100" height="80" src="/js/fileupload/uploads/Hydrangeas.jpg">
</div> 
```

我想将单击事件绑定到这些图像，因此当它们被单击时，它们可以从“徽标”div 中删除，我使用 .live() 来跟踪这些单击。
结果是，当我单击图像时，“logos”单击事件和 img 单击事件都会被触发。

```
 $('.logos img').live('click', function(e){
        var answer = confirm ("Delete image?")
        if (answer){
            $(this).remove();
        }
    });
    $('.logos').click(function(e){
            e.stopPropagation();
            $('.qq-upload-button input').trigger('click'); //File uploader that uploads images and creates the img elements.
    }); 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T01:10:01.647

> 从 jQuery 1.7 开始，.on() 方法提供了附加事件处理程序所需的所有功能。

那来自[DOCS](http://api.jquery.com/on/)，但`e.stopPropagation()`在点击传播到父级之前，也可以将您的图像放在您的图像上！:)

**[jsBin 演示](http://jsbin.com/esazok/3/edit)**

```
$('.logos img').on('click', function(e){
        e.stopPropagation();
        var answer = confirm("Delete image?");
        if (answer){
            $(this).remove();
        }
});

$('.logos').click(function(){
     $('.qq-upload-button input').click();
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T01:10:35.533

你可以做这样的事情。如果您使用 > jQuery 1.4，您应该使用`on`而不是`live`. 检查目标，如果它是图像，则将其删除。否则就这样吧。

[http://jsfiddle.net/AprTx/](http://jsfiddle.net/AprTx/)

```
$('.logos').on('click', function(e) {
    e.stopPropagation();

    if ($(e.target).is('img')) {
        $(e.target).remove();
    }
    else {
        $(this).append($('<img src="http://placehold.it/300x300" />'));
    }
});​ 
```

# java - 发送文件到安卓设备

> ID：12574883
> 
> 赞同：0
> 
> 时间：2012-09-25T00:57:08.777
> 
> 标签：java, android

我需要通过 WiFi 方式将一些字符串从 java 项目（Windows 或 Ubuntu）发送到 Android 设备。我找到了一些关于如何将文件从 Android 设备发送到 Android 设备的资源，但我没有找到任何跨平台的东西。有人可以建议我一种方法吗，或者是关于在哪里寻找的线索？

我对替代方法持开放态度，但一如既往地越简单越好。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:19:04.130

我会编写一个简单的 REST Web 服务供 android 客户端检查。这样，如果您出于任何原因想要将其移动到云端并远程执行。这可能也是我能想到的最简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T02:14:46.750

我建议通过 TCP 连接发送它。

因为Java和Android都有ServerSocket类和Socket类。

您可以使用 ServerSocket 将您的计算机设置为主机，使用 Socket 将您的 Android 设备设置为客户端。

然后在连接后，就可以使用Socket的getInputStream()和getOutputStream()方法来传输数据，包括Strings、Objects甚至是FileInputStream、ObjectOutputStream等适当组合的Files。

# matlab - 我的matlab结果上面的数字是多少

> ID：12574887
> 
> 赞同：0
> 
> 时间：2012-09-25T00:57:27.400
> 
> 标签：matlab

1.0e+07 *

```
0.0000    0.0000    0.0000    0.0000
0.0000    0.0003    0.0268    6.5660 
```

1.0e+07 * 是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T01:17:29.457

1e07 = 1 x 10^7

为了获得更好的视觉效果，您可以尝试

```
 format short e
   format long e 
```

可能会给你更多的小数位来理解。

正如 Colin 所说，乘数 1e07 适用于整个矩阵/数组。

# ios - iOS - selectedBackgroundView 中的自定义 UITableViewCell 子视图

> ID：12574888
> 
> 赞同：1
> 
> 时间：2012-09-25T00:57:28.357
> 
> 标签：ios, uitableview

我已经建立了一个`UITableViewCell`带有多个标签和图像的自定义，并且我（最终）让它看起来像我想要的样子。

但是，我似乎无法弄清楚如何让选择看起来像我想要的样子。我已经实现了该`setSelected`方法，它允许我很好地更改背景颜色，但我*真正*想要的是将背景颜色设置为黑色并在所选单元格的左侧显示一个彩色矩形（10 像素宽和单元格的高度）。

彩色框将以编程方式设置颜色，因此尽管我可以轻松地将 设置`selectedBackgroundView`为 a `UIImageView`，但在这种情况下这不起作用。

选择单元格时，以下代码将根本不显示`selectedViewColor UIView`：

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    UIView *selectedView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.selectedBackgroundView.bounds.size.width, self.selectedBackgroundView.bounds.size.height)];
    [selectedView setBackgroundColor:[UIColor blackColor]];

    UIView *selectedView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 10, self.selectedBackgroundView.bounds.size.height)];
    [selectedViewColor setBackgroundColor:[UIColor redColor]];
    [selectedView addSubview:selectedViewColor];

    self.selectedBackgroundView = selectedView;

    [super setSelected:selected animated:animated];
} 
```

这段代码看起来很基础，所以我认为在`selectedBackgroundView`.

任何替代方案或建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T01:56:58.150

There's a few things that could be done better with this code. Reinitialising two views in the setSelected method is pretty inefficient. You're actually blanking out everything in the cell when you select it with this code (which I'm guessing is not what you want). And finally, you're treating selectedBackgroundView as if it's the only view that gets displayed when you select the cell (according to Apple's documentation, it is displayed *over* the backgroundView).

Try the following **(Edited)** - Put this code where you create the cell (presumably, cellForRowAtIndexPath:)

```
UIView* container = [[UIView alloc] initWithFrame:CGRectMake(0, 0, cell.backgroundView.bounds.size.width, cell.backgroundView.bounds.size.height)]; // we need this because in cells, the background views always take up the maximum width, regardless of their frames.
container.backgroundColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:0]; // make it transparent - we only want the square subview to be seen.
UIView *selectedViewColor = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 10, self.selectedBackgroundView.bounds.size.height)];
[selectedViewColor setBackgroundColor:[UIColor redColor]];
[container addSubview:selectedViewColor]
cell.selectedBackgroundView = container; 
```

This will make your red square appear when (and only when) the cell is selected, over the other views in the cell. From Apple's docs:

> UITableViewCell adds the value of this property as a subview only when the cell is selected. It adds the selected background view as a subview directly above the background view (backgroundView) if it is not nil, or behind all other views.

Second, use the following code in your cell:

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
   [super setSelected:selected animated:animated];
   if(selected == YES)
   {
      self.backgroundView.backgroundColor = [UIColor blackColor];
   }
   else
   {
      self.backgroundView.backgroundColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:0] // replace this with whatever's appropriate - a return to the unselected state.
   }
} 
```

This will ensure that your background turns black when the cell is selected (without otherwise interfering with what's displayed. Hopefully these changes should also resolve the issue you're having.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T01:30:30.560

除了上面 Xono 的回答之外，跟进他对上面答案的评论：

> 在研究这个主题时我遇到过几次的一件事是 UITableViewCell 背后的代码实际上可能会在选择单元格时将所有子视图的背景颜色设置为透明。

如果您的单元格的 SelectionStyle 不是“无”，它确实会这样做。它在`setHighlighted`和的`setSelected`调用中都做到了`UITableViewCell`。

我的第一个解决方案是继承 UITableViewCell 并覆盖这两个方法，而不是调用基类方法并做我自己的动画。这并不理想，因为您现在重新实现（可能很糟糕）标准 iOS 动画。

不过，进一步研究它，标准方法为整个视图的不透明度设置动画，而不是子视图（它们只设置子视图的颜色）。所以最好的方法是仍然调用基类方法，然后将你的子视图颜色重新设置回它们应该的颜色。即使您立即设置它们，因为它们的超级视图仍在为其不透明度设置动画，它仍然会正确淡入和淡出：

```
 public override void SetHighlighted(bool highlighted, bool animated)
    {
        base.SetHighlighted(highlighted, animated);
        SelectedBackgroundView.Subviews[0].BackgroundColor = SelectionColor;
    }

    public override void SetSelected(bool selected, bool animated)
    {
        base.SetSelected(selected, animated);
        SelectedBackgroundView.Subviews[0].BackgroundColor = SelectionColor;
    } 
```

这是 c# MonoTouch 代码，但它同样适用于 obj-c。
请注意，在我的情况下，我总是有 1 个子视图，因此硬编码 0 索引器。这可能因您的视图结构而异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-21T21:18:12.273

根据@Xono 的回答，我提出了这个问题的解决方案：

在`initWithStyle:reuseIdentifier:`方法内部，我添加了一个分隔视图：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        CGRect selectionViewFrame = self.contentView.bounds;
        UIView *selectionView = [[UIView alloc] initWithFrame:selectionViewFrame];
        [selectionView setBackgroundColor:[UIColor colorWithWhite:1\. alpha:0.65]];
        self.selectedBackgroundView = selectionView;        
        self.vwSelectedSeparator = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.contentView.frame.size.width, 1.)];
        [self.vwSelectedSeparator setBackgroundColor:[UIColor colorWithHexString:@"aaa"]];
        [self.vwSelectedSeparator setAutoresizingMask:UIViewAutoresizingFlexibleWidth];
        [selectionView addSubview:self.vwSelectedSeparator];

        [self setAutoresizingMask:UIViewAutoresizingFlexibleWidth];
    }
    return self;
} 
```

然后在`setSelected:animated:`方法中我添加了这些行：

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated {
    [super setSelected:selected animated:animated];

    if (selected) {
        [self.vwSelectedSeparator setBackgroundColor:[UIColor colorWithHexString:@"aaa"]];
    }
} 
```

对我来说，对 ios6 和 ios7 来说都是一种魅力。我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-19T15:44:00.053

您可以为您的子视图覆盖方法“setBackgroundColor”并添加另一个具有相同功能的方法。在这种情况下，UITableCell 将无法在选择后更改 backgroundColor。

```
- (void)setBackgroundColor:(UIColor *)backgroundColor {
}

- (void)setColor:(UIColor *)color {
    [super setBackgroundColor:color];
} 
```

# firebreath - 访问浏览器窗口

> ID：12574889
> 
> 赞同：0
> 
> 时间：2012-09-25T00:57:28.610
> 
> 标签：firebreath

如何获取托管插件窗口的浏览器窗口的句柄？我想询问它的大小，以便我可以正确调整我的插件窗口的大小。

希望这是有道理的，克里斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:56:12.173

您永远不应该调整插件 HWND 的大小；浏览器会这样做。如果您在没有浏览器干预的情况下调整它的大小，那么您将违反合同，并且可能最终与浏览器的未来更改发生冲突，这是假设您允许它根据 DOM 而不是根据根文档窗口。

仅供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T01:15:51.333

对于 Windows 用户，解决方案是调用 GetAncestor：

```
FB::PluginWindowWin* w = (FB::PluginWindowWin*)(fb_win);
HWND hWndBrowser = GetAncestor( w->getHWND(), GA_ROOTOWNER ); 
```

google groups 上的一个帖子解释了更多：

[https://groups.google.com/forum/?fromgroups=#!topic/firebreath-dev/4aMXWI94RzY](https://groups.google.com/forum/?fromgroups=#!topic/firebreath-dev/4aMXWI94RzY)

基督教

# iphone - 我可以访问 IOS 5.1 中的蓝牙名称列表吗？

> ID：12574892
> 
> 赞同：0
> 
> 时间：2012-09-25T00:57:55.777
> 
> 标签：iphone, ios

我确实研究了如何访问蓝牙（BLE）名称以显示在 UITableView 中。不幸的是，从 IOS 5.1 开始无法访问内置设置应用程序。有谁知道在不访问设置或不使用私有 API 的情况下获取蓝牙设备名称的方法？..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:57:02.920

CoreBluetooth 框架用于与 BLE 设备进行通信。这应该可以帮助您入门： [WWDC Core Bluetooth 101 视频](https://developer.apple.com/videos/wwdc/2012/#703)

# ipad - 在 iPad/iOS6.0 中使用“App Lock”配置文件设置（又名“kiosk 模式”）时出错

> ID：12574895
> 
> 赞同：6
> 
> 时间：2012-09-25T00:58:22.530
> 
> 标签：ipad, mdm

背景：

Apple 为他们的 iPad 提供了一种“kiosk 模式”，作为 iOS6 的一部分，它将设备锁定在一个应用程序中（甚至直接启动到应用程序中）。非常适合在零售/餐厅/等场所使用 iPad。

为了使用它，首先必须使用 Apple Configurator 将设备设置为“受监督”设备。然后，您将一个特殊条目添加到名为“App Lock”的配置文件中。我遵循了[最近更新的配置文件文档](https://developer.apple.com/library/ios/#featuredarticles/iPhoneConfigurationProfileRef/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010206)。本质上，您只需将 PayloadType 设置为“com.apple.app.lock”并添加一个名为“Identifier”的属性，该属性设置为应用程序包 ID 的值。

当我尝试将配置文件添加到 iPad 时（无论是通过 Safari 链接、MDM 还是 Apple Configurator），它都会拒绝它。

Xcode 中的控制台输出显示如下：

```
Sep 24 17:51:56 Test-iPad mc_mobile_tunnel[487] <Notice>: (Note ) MDM: Attempting to perform Supervised request: ProfileList
Sep 24 17:51:56 Test-iPad installd[30] <Error>: 0x2ff9f000 filter_attributes: Info.plist keys requested via MobileInstallationLookup/Browse in client Apple Configurator (via mobile_installation_proxy) were not found in MobileInstallation's cache. Please file a bug requesting that these keys be added: <CFBasicHash 0x1e58b0b0 [0x3d8f2100]>{type = mutable set, count = 1,
   entries =>
       2 : <CFString 0x3d8de564 [0x3d8f2100]>{contents = "CFBundleSignature"}
   }
Sep 24 17:51:57 Test-iPad mc_mobile_tunnel[492] <Notice>: (Error) MC: MCAppWhitelistPayload Can't parse payload: NSError:
   Desc   : The payload “Test Profile” is invalid.
   Sugg   : The field “App” is invalid.
   US Desc: The payload “Test Profile” is invalid.
   US Sugg: The field “App” is invalid.
   Domain : MCPayloadErrorDomain
   Code   : 2000
   Type   : MCFatalError
   Params : (
       "Test Profile"
   )
   ...Underlying error:
   NSError:
   Desc   : The field “App” is invalid.
   US Desc: The field “App” is invalid.
   Domain : MCPayloadErrorDomain
   Code   : 2003
   Type   : MCFatalError
   Params : (
       App
   )
Sep 24 17:51:57 Test-iPad mc_mobile_tunnel[492] <Notice>: (Error) MC: Payload “(null)” contains ignored fields. They are: <CFBasicHash 0x20819140 [0x3d8f2100]>{type = mutable dict, count = 1,
   entries =>
       1 : <CFString 0x1f527bd0 [0x3d8f2100]>{contents = "Identifier"} = <CFString 0x1f527c10 [0x3d8f2100]>{contents = "com.hubworks.myapp"}
   }
Sep 24 17:51:57 Test-iPad mc_mobile_tunnel[492] <Notice>: (Error) MC: Cannot create profile of type “com.apple.app.lock”. Error: NSError:
   Desc   : The payload “Test Profile” is invalid.
   Sugg   : The field “App” is invalid.
   US Desc: The payload “Test Profile” is invalid.
   US Sugg: The field “App” is invalid.
   Domain : MCPayloadErrorDomain
   Code   : 2000
   Type   : MCFatalError
   Params : (
       "Test Profile"
   )
   ...Underlying error:
   NSError:
   Desc   : The field “App” is invalid.
   US Desc: The field “App” is invalid.
   Domain : MCPayloadErrorDomain
   Code   : 2003
   Type   : MCFatalError
   Params : (
       App
   )
Sep 24 17:51:57 Test-iPad mc_mobile_tunnel[492] <Notice>: (Error) MC: Profile MCConfigurationProfile 0x1f526100, version 1:
   Display Name: “Test Profile”
   Identifier  : home-macbook-air.local.2A8DC5A2-937E-4246-B2AF-7C756C30C447
   UUID        : E06A5B33-9CD3-40CB-8611-0479E642B427
   Is Stub     : No
   Locked      : No
   Encrypted   : No
   Trusted     : 2
   Signed      : Yes
   Signed by   : Apple Configurator (58:55:CA:F7:24:B9)
    Can't parse profile: NSError:
   Desc   : The profile “Test Profile” is invalid.
   Sugg   : The payload “Test Profile” is invalid.
   US Desc: The profile “Test Profile” is invalid.
   US Sugg: The payload “Test Profile” is invalid.
   Domain : MCProfileErrorDomain
   Code   : 1000
   Type   : MCFatalError
   Params : (
       "Test Profile"
   )
   ...Underlying error:
   NSError:
   Desc   : The payload “Test Profile” is invalid.
   Sugg   : The field “App” is invalid.
   US Desc: The payload “Test Profile” is invalid.
   US Sugg: The field “App” is invalid.
   Domain : MCPayloadErrorDomain
   Code   : 2000
   Type   : MCFatalError
   Params : (
       "Test Profile"
   )
   ...Underlying error:
   NSError:
   Desc   : The field “App” is invalid.
   US Desc: The field “App” is invalid.
   Domain : MCPayloadErrorDomain
   Code   : 2003
   Type   : MCFatalError
   Params : (
       App
   )
   Extra info:
   {
       isPrimary = 1;
   }
Sep 24 17:51:57 Test-iPad mc_mobile_tunnel[492] <Notice>: (Error) MC: Failed to parse profile data. Error: NSError:
   Desc   : The profile “Test Profile” is invalid.
   Sugg   : The payload “Test Profile” is invalid.
   US Desc: The profile “Test Profile” is invalid.
   US Sugg: The payload “Test Profile” is invalid.
   Domain : MCProfileErrorDomain
   Code   : 1000
   Type   : MCFatalError
   Params : (
       "Test Profile"
   )
   ...Underlying error:
   NSError:
   Desc   : The payload “Test Profile” is invalid.
   Sugg   : The field “App” is invalid.
   US Desc: The payload “Test Profile” is invalid.
   US Sugg: The field “App” is invalid.
   Domain : MCPayloadErrorDomain
   Code   : 2000
   Type   : MCFatalError
   Params : (
       "Test Profile"
   )
   ...Underlying error:
   NSError:
   Desc   : The field “App” is invalid.
   US Desc: The field “App” is invalid.
   Domain : MCPayloadErrorDomain
   Code   : 2003
   Type   : MCFatalError
   Params : (
       App
   )
   Extra info:
   {
       isPrimary = 1;
   } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T06:04:16.853

**我想到了！**我要么误读，要么 Apple 在他们的[配置文件参考](http://developer.apple.com/library/ios/#featuredarticles/iPhoneConfigurationProfileRef/Introduction/Introduction.html)中遗漏了一些细节。为了避免错误，“标识符”/bundleId 键/值对必须包装在字典中，字典本身就是名为“App”的键的值。见下文：

```
<?xml version="1.0"?>
<plist version="1.0">
  <dict>
    <key>PayloadContent</key>
    <array>
      <dict>
        <key>App</key>
        <dict>
          <key>Identifier</key>
          <string>bundle_identifier_of_the_app</string>
        </dict>
        <key>PayloadType</key>
        <string>com.apple.app.lock</string>
        <key>PayloadIdentifier</key>
        <string>#######-#######-#######-######</string>
        <key>PayloadUUID</key>
        <string>#######-#######-#######-######</string>
        <key>PayloadVersion</key>
        <integer>#</integer>
      </dict>
    </array>
    <key>PayloadType</key>
    <string>Configuration</string>
    <key>PayloadDisplayName</key>
    <string>##########</string>
    <key>PayloadIdentifier</key>
    <string>######-#####-######-#####</string>
    <key>PayloadUUID</key>
    <string>######-######-#####-#####</string>
    <key>PayloadVersion</key>
    <integer>#</integer>
  </dict>
</plist> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-06T21:36:26.340

是的，仍在 iOS 9.1 中工作

您可以添加如下选项：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN""http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
  <dict>
<key>PayloadContent</key>
<array>
      <dict>
        <key>App</key>
        <dict>
          <key>Identifier</key>
          <string>bundle_identifier_of_the_app</string>
          <key>Options</key>
          <dict>
            <key>DisableAutoLock</key>
            <true/>
            <key>DisableVolumeButtons</key>
            <true/>
          </dict>
        </dict>
        <key>PayloadType</key>
        <string>###.#####.#####</string>
        <key>PayloadIdentifier</key>
        <string>com.klangerfinder.lockdown</string>
        <key>PayloadUUID</key>
        <string>######-######-#####-#####</string>
        <key>PayloadVersion</key>
        <integer>1</integer>
      </dict>
    </array>
    <key>PayloadType</key>
    <string>Configuration</string>
    <key>PayloadDisplayName</key>
    <string>AppLockDown</string>
    <key>PayloadIdentifier</key>
    <string>###.#####.#####</string>
    <key>PayloadUUID</key>
    <string>######-######-#####-#####</string>
    <key>PayloadVersion</key>
    <integer>1</integer>
 </dict>
</plist> 
```

那里有很多旧帖子。这个和上面是实际工作的！！！

# javascript - Ext JS 4 散点图 - 数据存储的半径

> ID：12574897
> 
> 赞同：0
> 
> 时间：2012-09-25T00:58:36.947
> 
> 标签：javascript, extjs4, scatter-plot

在 Ext JS 中，我正在尝试制作散点图。我希望我的一个散点的半径来自我的商店

```
Ext.onReady(function() {
Ext.create('Ext.window.Window', {
    width : 800,
    height : 600,
    layout: 'fit',
    items: [chart]
}).show();
});

var store = Ext.create('Ext.data.JsonStore', {
fields: ['name', 'data1', 'data2', 'data3', 'data4', 'data5'],
data: [
    { 'name': 'metric one',   'data1': 10, 'data2': 12, 'data3': 14, 'data4': 8,  'data5': 13 },
    { 'name': 'metric two',   'data1': 7,  'data2': 8,  'data3': 16, 'data4': 10, 'data5': 3  },
    { 'name': 'metric three', 'data1': 5,  'data2': 2,  'data3': 14, 'data4': 12, 'data5': 7  },
    { 'name': 'metric four',  'data1': 2,  'data2': 14, 'data3': 6,  'data4': 1,  'data5': 23 },
    { 'name': 'metric five',  'data1': 27, 'data2': 38, 'data3': 36, 'data4': 13, 'data5': 33 }
]
});

var chart = Ext.create('Ext.chart.Chart', {
renderTo: Ext.getBody(),
width: 500,
height: 300,
animate: true,
theme:'Category2',
store: store,
axes: [{
    type: 'Numeric',
    position: 'left',
    fields: ['data2', 'data3', 'data4'],
    title: 'Sample Values',
    grid: true,
    minimum: 0
}, {
    type: 'Category',
    position: 'bottom',
    fields: ['name'],
    title: 'Sample Metrics'
}],
series: [{
    type: 'scatter',
    markerConfig: {
        type: 'circle',
        radius: 'data4' //This doesn't work!
    },
    axis: 'left',
    xField: 'name',
    yField: 'data2'
}, {
    type: 'scatter',
    markerConfig: {
        radius: 5,
        size: 5
    },
    axis: 'left',
    xField: 'name',
    yField: 'data3'
}]
}); 
```

好的，所以问题行被注释为“//这不起作用！”。我明白为什么它不起作用 - Ext JS 不明白我试图告诉它使用字段 data4 中的值。

所以我的问题是，我如何让它理解我希望半径来自 data4？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:25:40.953

您可以为如下定义一个`renderer`函数。`series`它还显示了如何设置各个点的颜色；

```
series: [{
    type: 'scatter',
    //....
    renderer: function (sprite, record, attributes, index, store) {
                    var r = record.get('data4');
                    //var color = record.get('data5');
                    return Ext.apply(attributes, {
                        radius: r,
                        size: r
                      //  fill: color,
                    });
                }
}] 
```

# aviarc - 在工作流数据代理中使用数据集代理时出现“XMLCommand.initialize failed: java.lang.NullPointerException”

> ID：12574899
> 
> 赞同：1
> 
> 时间：2012-09-25T00:59:01.980
> 
> 标签：aviarc

我正在创建一个工作流数据代理，并且在预工作流中我使用 a`dataset-proxy`来迭代填充数据集。但是，我在编译时收到以下错误：

```
XMLCommand.initialize failed: java.lang.NullPointerException
at nz.co.aviarc.xml.command.dataset.DatasetProxy.initialize(DatasetProxy.java:35)
at com.aviarc.framework.xml.command.XMLCommandElementImpl.finalize(XMLCommandElementImpl.java:90)
at com.aviarc.framework.xml.compilation.XMLSAXHandler.endElement(XMLSAXHandler.java:336)
at net.sf.saxon.event.ContentHandlerProxy.endElement(ContentHandlerProxy.java:391)
at net.sf.saxon.event.NamespaceReducer.endElement(NamespaceReducer.java:213)
at net.sf.saxon.event.ReceivingContentHandler.endElement(ReceivingContentHandler.java:443)
at org.apache.xerces.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:598)
at org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanEndElement(XMLNSDocumentScannerImpl.java:673)
at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(XMLDocumentFragmentScannerImpl.java:1645)
at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:324)
at org.apache.xerces.parsers.XML11Configuration.parse(XML11Configuration.java:875)
at org.apache.xerces.parsers.XML11Configuration.parse(XML11Configuration.java:798)
at org.apache.xerces.parsers.XMLParser.parse(XMLParser.java:108)
at org.apache.xerces.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1198)
at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:564)
at net.sf.saxon.event.Sender.sendSAXSource(Sender.java:404)
at net.sf.saxon.event.Sender.send(Sender.java:193)
at net.sf.saxon.IdentityTransformer.transform(IdentityTransformer.java:30)
at com.aviarc.framework.xml.compilation.AviarcXMLResourceCompiler.compile(AviarcXMLResourceCompiler.java:137)
... 
```

即使我直接使用文档中的代码示例（com.aviarc.dataset:1.1.0），我也会得到完全相同的错误：

```
<workflow xmlns:ds="urn:aviarc:xmlcommand:com.aviarc.dataset">
    <ds:dataset-proxy dataset="ds" proxyname="dsproxy">
        <set-current-row dataset="dsproxy" position="2" />
        <set-field field="dsproxy.email" value="test@test.com" />
    </ds:dataset-proxy>
</workflow> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:59:01.980

结果证明文档是错误的，因为`proxyname`它不是`dataset-proxy`. 起初我没有看到它（因为巨大的堆栈跟踪），但我也收到了这个警告：

```
Unknown attribute 'proxyname' 
```

**正确的属性是`name`，不是`proxyname`。**改变这个解决了错误。

# actionscript-3 - 自定义flash组件ApplicationDomain

> ID：12574902
> 
> 赞同：0
> 
> 时间：2012-09-25T00:59:13.310
> 
> 标签：actionscript-3, flash, fonts, components, applicationdomain

s由于某些原因，组件未附加到其父剪辑的 ApplicationDomain。我在 Flash 中向舞台添加了一个自定义组件，并且在运行时组件父 ApplicationDomain 为空。带有组件的 swf 的 ApplicationDomain 也不等于组件的 ApplicationDomain。我需要链接它的原因是嵌入字体。我可以做些什么来链接应用程序域？

更新：

SWF 框架 1 中的代码：

```
import flash.system.ApplicationDomain;

if( myTextField.appDomain == ApplicationDomain.currentDomain )
{
    trace( "The domains are the same" );
}
else
{
    trace( "The domains are different" );
} 
```

舞台上有一个我的组件实例，实例名称为“myTextField”。

组件中的代码：

```
public function get appDomain( ) : ApplicationDomain
{
    return ApplicationDomain.currentDomain;
} 
```

当我编译并运行它时，舞台上的代码返回“域不同”。

组件中的“ApplicationDomain.currentDomain.parentDomain”也为空。

组件中还有其他代码，但不会干扰 appDomain getter。

# mysql - mySQL 替换所有字符串，无论字段名称如何？

> ID：12574903
> 
> 赞同：1
> 
> 时间：2012-09-25T00:59:21.733
> 
> 标签：mysql

我有这个查询，但我想更改找到的每个 field_name 中的字符串，而不是手动更改它。我怎么能做到这一点？

```
update TABLE_NAME 
set FIELD_NAME = replace(FIELD_NAME, ‘find this string’, ‘replace found string with this string’); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T01:03:33.263

然后你必须指定所有的字段名。例子

```
UPDATE tableName
   SET field1 = REPLACE(field1, 'oldstring', 'newstring'),
       field2 = REPLACE(field2, 'oldstring', 'newstring'),
       field3 = REPLACE(field3, 'oldstring', 'newstring'),
       fieldN = REPLACE(fieldN, 'oldstring', 'newstring') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T01:32:09.717

您可以使用`information_schema.columns`为每一列构建查询

```
SELECT CONCAT( 'Update table ', table_name, 
               ' set ', column_name, ' = replace(',column_name,', \‘find this string\’, \‘replace found string with this string\’); ')
FROM information_schema.columns
WHERE table_name = '<TableName>'` 
```

这将为表中的所有列生成更新语句（将节省您手动编写列名的时间和精力）。

# php - 如果输入数据存在于 Table2 中，PHP & SQL 将数据插入 Table1

> ID：12574904
> 
> 赞同：1
> 
> 时间：2012-09-25T00:59:32.483
> 
> 标签：php, mysql

我一直在试图弄清楚只有当接收到的数据存在于另一个表中时，如何将从表单接收到的数据插入到一个表中。如果数据不存在，它会移动到另一个查询并检查另一个表以获取接收到的数据。

这就是我想要做的：

```
function addNewUser($username, $password, $email, $actcode){
    $time = time();

    $q = "UPDATE ".TBL_RELEASE_CODES." SET code = '$actcode' WHERE code = '$actcode'";
    $result = mysql_query($q, $this->connection);
    if (!$result || (mysql_numrows($result)) == 0){
        $q = "INSERT INTO ".TBL_RELEASE_USERS." VALUES ('$username', '$password', '0', $ulevel, '$email', '$actcode', $time)";
        return mysql_query($q, $this->connection);
    } 
```

这样做的目的是，当用户提交特殊代码时，系统将运行检查以查看该代码是否属于某个表。

如果它在表中找到提交的代码，它将运行与检查关联的插入查询，如果没有，则它会中断并返回一个错误，指出未找到匹配项。

我可能错误地使用了代码，因为我一直在从 Google 搜索中搜索信息并对其进行测试。还没有运气。

此代码正在使用 PHP 5 和 MySQL 的网站上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T01:50:36.227

第一个查询没有做任何事情——它只在代码已经是 $actcode 的行中将代码设置为 $actcode。您应该使用 SELECT，而不是 UPDATE：

```
$q = "SELECT COUNT(*) FROM ".TBL_RELEASE_CODES." WHERE code = ?";
$stmt = mysqli_prepare($this->connection, $q);
mysqli_stmt_bind_param($stmt, 's', $actcode);
mysqli_stmt_bind_result($stmt, $count);
mysqli_execute($stmt) or die "Query failed: ".mysqli_stmt_error($stmt);
mysqli_stmt_fetch($stmt);
if ($count == 1) {
  // Insert into TBL_RELEASE_USERS
} else {
  // Return error saying no match found
} 
```

您也不应该使用 mysql_XXX 函数。它们已被弃用，并且难以避免 SQL 注入攻击。我上面的代码使用 mysqli_XXX，它支持准备好的语句来防止这种情况。如果您愿意，它也有一个面向对象风格的 API，但我没有在上面使用它。

# web-sql - 谁说 Web SQL [感觉不像 Javascript]？

> ID：12574906
> 
> 赞同：0
> 
> 时间：2012-09-25T00:59:42.373
> 
> 标签：web-sql, indexeddb

我正在写一份报告，但不记得我在哪里读到的。他们切换到 indexedDB 的原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:45:57.937

WebSQL 的问题在于使用哪种 SQL 方言。每个浏览器都会在后台使用自己的 SQL 方言实现自己的数据库，这意味着没有标准化。有关它的更多信息，请阅读[此处](http://dev.w3.org/html5/webdatabase/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T03:23:51.870

WebSQL 已弃用。IndexedDB 是新标准，当然，在精神上更好的 Javascript 风格和可扩展性。

# c++ - 当 std::getline 到达字符串流的末尾时，如何让我通知我？

> ID：12574908
> 
> 赞同：4
> 
> 时间：2012-09-25T00:59:55.417
> 
> 标签：c++, io, stringstream

假设 stringstream contains `James is 4`，我可以写一些类似`getline (stream, stringjames, ' ')`的东西来获取单个单词，但是有没有办法知道我已经到了行尾？

奖金问题！案例一：`James is 4` 案例二：`James is four`

如果我正在遍历字符串流中的单词，并且我希望收到一个 4 的 int val，但我收到了一个字符串，那么最好的检查方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T01:01:43.697

您检查返回值以查看它的计算结果是 true 还是 false：

```
if (getline(stream, stringjames, ' '))
    // do stuff
else
    // fail 
```

至于“奖金问题”，您也可以在`int`从流中提取 s 和事物时做同样的事情。的返回值`operator>>`将评估`true`读取是否成功，以及`false`是否有错误（例如有字母而不是数字）：

```
int intval;

if (stream >> intval)
    // int read, process
else if (stream.eof())
    // end-of-stream reached
else
    // int failed to read but there is still stuff left in the stream 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T01:21:38.837

> 假设 stringstream 包含 James is 4 ，我可以写一些类似 getline (stream, stringjames, ' ') 的东西来获取单个单词，但是有没有办法知道我已经到了行尾？

通常最容易读入`std::string`变量 - 默认情况下无论如何都认为它由空格分隔：

```
std::string word;
while (some_stream >> word)
{
    // first iteration "James", then "is", then "4", then breaks from while...
} 
```

> 奖金问题！案例 1：詹姆斯 4 岁 案例 2：詹姆斯 4 岁
> 
> 如果我正在遍历字符串流中的单词，并且我希望收到一个 4 的 int val，但我收到了一个字符串，那么最好的检查方法是什么？

您最好`string`先将其读入，然后检查是否可以将其`string`转换为数字。您可以尝试`strtoi` `strtol`等等 - 它们有助于指示整个值是否是合法数字，因此您可以检测和拒绝诸如“4q”之类的值。

另一种方法是先尝试流式传输到整数类型，并且只有在它失败时才重置流上的错误标志并改为获取字符串。我不记得您是否需要重新定位流以便读取字符串变量，但您可以编写几个测试用例并将其弄清楚。

或者，您可以使用正则表达式和子表达式匹配来解析您的输入：当表达式变得更复杂时更有用。

# python - Go 真的能比 Python 快那么多吗？

> ID：12574909
> 
> 赞同：54
> 
> 时间：2012-09-25T01:00:20.027
> 
> 标签：python, performance, go

我想我可能错误地实现了这一点，因为结果没有意义。我有一个计数为 1000000000 的 Go 程序：

```
package main

import (
    "fmt"
)

func main() {
    for i := 0; i < 1000000000; i++ {}
    fmt.Println("Done") 
} 
```

它在不到一秒钟的时间内完成。另一方面，我有一个 Python 脚本：

```
x = 0
while x < 1000000000:
    x+=1
print 'Done' 
```

它在几分钟内完成。

为什么 Go 版本这么快？他们都数到 1000000000 还是我错过了什么？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-09-25T01:35:26.690

10亿并不是一个很大的数字。任何合理的现代机器最多*应该*能够在几秒钟内*完成这项工作，如果它能够使用本机类型完成工作的话*。我通过编写一个等效的 C 程序来验证这一点，阅读程序集以确保它确实在进行加法，并对其进行计时（它在我的机器上大约 1.8 秒内完成）。

然而，Python 没有原生类型变量的概念（或根本没有有意义的类型注释），因此在这种情况下它必须做数百倍的工作。简而言之，您的标题问题的答案是“是”。Go 确实*可以*比 Python 快得多，即使没有任何类型的编译器技巧，例如优化无副作用的循环。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2012-09-25T05:43:46.280

pypy 实际上在加速这个循环方面做得很出色

```
def main():
    x = 0
    while x < 1000000000:
        x+=1

if __name__ == "__main__":
    s=time.time()
    main()
    print time.time() - s 
```

* * *

```
$ python count.py 
44.221405983
$ pypy count.py 
1.03511095047 
```

约 97% 的加速！

澄清 3 个没有“明白”的人。Python 语言本身并不慢。CPython 实现是运行代码的一种相对直接的方式。Pypy 是该语言的另一种实现，它做了许多棘手的事情（尤其是 JIT），这些事情可以产生巨大的差异。直接回答标题中的问题——Go 并不比*Python*快“那么多” ，Go 比*CPython*快那么多。

话虽如此，代码示例并没有真正做同样的事情。Python 需要实例化它的 1000000000 个`int`对象。Go 只是增加一个内存位置。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-09-25T01:17:13.093

**这种情况将*非常有利于*体面的本机编译的静态类型语言**。本地编译的静态类型语言能够发出一个非常简单的循环，比如 4-6 个 CPU 操作码，它利用简单的检查条件来终止。这个循环实际上*有零*分支预测未命中，并且可以有效地被认为是在每个 CPU 周期执行一次增量（这并不完全正确，但是..）

**Python 实现必须做更多*的*工作，主要是由于动态类型。**Python 必须进行多次不同的调用（内部和外部）才能将两个`int`s 相加。在 Python 中它*必须*调用`__add__`（它是有效`i = i.__add__(1)`的，但这种语法只在 Python 3.x 中有效），它又必须检查传递的值的类型（以确保它是一个`int`），然后它添加整数值（从两个*对象*中提取它们），然后将新的整数值再次包装在一个*新的对象*中。最后，它将新对象重新分配给局部变量。这*要多得多的工作*而不是增加单个操作码，甚至不解决循环本身 - 相比之下，Go/native 版本可能只是通过副作用增加一个寄存器。

Java 在像这样的微不足道的基准测试中会*更好*，并且可能与 Go 相当接近；计数器变量的 JIT 和*静态类型*可以确保这一点（它使用特殊的整数添加 JVM 指令）。再一次，Python 没有这样的优势。现在，有一些像[PyPy/RPython](http://en.wikipedia.org/wiki/PyPy)这样的实现，它们运行静态类型化阶段，并且在这里应该比 CPython 好得多。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-09-25T01:34:44.860

你有两件事在这里工作。第一个是 Go 被编译成机器代码并直接在 CPU 上运行，而 Python 被编译成字节码，在（特别慢的）VM 上运行。

第二个也是更重要的影响性能的因素是这两个程序的语义实际上是显着不同的。Go 版本创建了一个名为“x”的“盒子”，其中包含一个数字，并在每次通过程序时将其递增 1。Python 版本实际上必须在每个循环中创建一个新的“盒子”（int 对象）（并且最终必须将它们丢弃）。我们可以通过稍微修改您的程序来证明这一点：

```
package main

import (
    "fmt"
)

func main() {
    for i := 0; i < 10; i++ {
        fmt.Printf("%d %p\n", i, &i)
    }
} 
```

...和：

```
x = 0;
while x < 10:
    x += 1
    print x, id(x) 
```

这是因为 Go，由于它的 C 根，使用变量名来引用**place**，而 Python 使用变量名来引用**things**。由于整数在 python 中被认为是唯一的、不可变的实体，我们必须不断地创建新的实体。Python 应该比 Go 慢，但您选择了最坏的情况 -[在 Benchmarks Game 中](http://benchmarksgame.alioth.debian.org/u64q/which-programs-are-fastest.html)，我们看到 Go 平均快 25 倍（最坏情况下为 100 倍）。

你可能已经读过，如果你的 Python 程序太慢，你可以通过将东西移到 C 中来加速它们。幸运的是，在这种情况下，有人已经为你做了这件事。如果你重写你的空循环来使用[xrange()](http://docs.python.org/library/functions.html#xrange)像这样：

```
for x in xrange(1000000000):
    pass
print "Done." 
```

...您会看到它的运行速度大约是原来的两倍。如果您发现循环计数器实际上是程序中的主要瓶颈，那么可能是时候研究一种解决问题的新方法了。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-10-20T02:52:45.900

@troq

我参加聚会有点晚了，但我会说答案是肯定的和否定的。正如@gnibbler 指出的那样，CPython 在简单实现中速度较慢，但​​ pypy 是 jit 编译的，可在您需要时获得更快的代码。

如果您使用 CPython 进行数值处理，大多数人将使用 numpy 进行处理，从而对数组和矩阵进行快速操作。最近我对 numba 做了很多工作，它允许您在代码中添加一个简单的包装器。对于这个，我刚刚将@njit 添加到一个函数 incALot() 中，该函数在上面运行你的代码。

在我的机器上，CPython 需要 61 秒，但使用 numba 包装器需要 7.2 微秒，这将类似于 C，并且可能比 Go 更快。那是 800 万倍的加速。

所以，在 Python 中，如果数字看起来有点慢，有工具可以解决它——你仍然可以获得 Python 的程序员生产力和 REPL。

```
def incALot(y):
    x = 0
    while x < y:
        x += 1

@njit('i8(i8)')
def nbIncALot(y):
    x = 0
    while x < y:
        x += 1
    return x

size = 1000000000
start = time.time()
incALot(size)
t1 = time.time() - start
start = time.time()
x = nbIncALot(size)
t2 = time.time() - start
print('CPython3 takes %.3fs, Numba takes %.9fs' %(t1, t2))
print('Speedup is: %.1f' % (t1/t2))
print('Just Checking:', x)

CPython3 takes 58.958s, Numba takes 0.000007153s
Speedup is: 8242982.2
Just Checking: 1000000000 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-24T00:42:37.387

问题是 Python 被解释了，GO 没有，所以没有真正的方法来测试速度。解释语言通常（并不总是有一个 vm 组件）是问题所在，您运行的任何测试都是在解释边界而不是实际运行时边界中运行的。Go 在速度方面比 C 稍慢，这主要是因为它使用垃圾收集而不是手动内存管理。也就是说，与 Python 相比，GO 速度很快，因为它是一种编译语言，GO 中唯一缺少的就是错误测试，如果我错了，我会纠正。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-25T01:22:04.647

编译器可能意识到您在循环之后没有使用“i”变量，因此它通过删除循环来优化最终代码。

即使您之后使用它，编译器也可能足够聪明，可以将循环替换为

```
i = 1000000000; 
```

希望这会有所帮助=)

* * *

## 回答 #8

> 赞同：-6
> 
> 时间：2012-09-25T01:03:30.733

我对 go 不熟悉，但我猜 go 版本会忽略循环，因为循环的主体什么都不做。另一方面，在 python 版本中，您`x`在循环体中递增，因此它可能实际上是在执行循环。

# c++ - 'double' 之前的预期不合格 ID/

> ID：12574910
> 
> 赞同：0
> 
> 时间：2012-09-25T01:00:24.537
> 
> 标签：c++, g++

我正在为一个名为 Robot 的实验室编写程序。当我编译它时，我得到了这组错误：

> Robot.cpp:43:13: 错误: 'double' 之前的预期 unqualified-id
> 
> Robot.cpp:43:13：错误：在“双”之前预期“）”

该类在 Robot.h 标头中定义，导致问题的 .cpp 中的代码如下所示：

```
/*
 * Name: Robot (constructor)
 *
 * Creates the robot with the given maximum speed.
 */

 Robot( double maxSpd ) 

 {

      MAX_SPEED = maxSpd;
      traveled = 0 ;
      elapsed = 0 ;
      x = 0 ;
      y = 0 ;

 } 
```

我无法弄清楚为什么会出现错误......而且我也不知道那个错误甚至意味着什么。我将如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T01:09:27.653

我已经设法重现您的错误。

~~首先，签名后的分号必须去掉。当您尝试定义一个函数时，它正在声明一个函数。~~

```
~~Robot(double maxSpd) {...} //没有分号~~
```

~~~~其次~~首先，由于这是在您的课程之外，您需要对其进行限定：~~

 ~~```
Robot::Robot(double maxSpd) {...} 
```

接下来，因为`MAX_SPEED`是一个常数，你需要把它放在一个成员初始化器中：

```
Robot::Robot(double maxSpd)
    : MAX_SPEED(maxSpd) {...} 
```

最后，您应该将其余的分配也移动到初始化列表（不是必需的，但很好），记住它们应该按照它们在类定义中声明**的顺序列出：**

```
Robot::Robot(double maxSpd)
    : MAX_SPEED(maxSpd), traveled(0), elapsed(0), x(0), y(0) {
//body, which, from your example, would now be empty
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T01:17:13.537

可能的问题是左括号前有一个分号。但是如果没有看到整个班级，就很难这么说。

如果此代码不在类声明中，您可能会在“Robot()”构造函数名称之前缺少“Robot::”命名空间规范。

例子：

```
Robot::Robot(double maxSpd)
{
   MAX_SPEED = maxSpd;
   traveled = 0;
   elapsed = 0;
   x = 0;
   y = 0;
} 
```~~

# bash - 从 csv 保留行中删除换行符

> ID：12574911
> 
> 赞同：1
> 
> 时间：2012-09-25T01:00:41.363
> 
> 标签：bash, csv, awk

我有一个导出的 CSV，有些行在记录中间有一个换行符（ASCII 012）。我需要用空格替换它，但保留每条记录的新行以加载它。

大多数行都很好，但也有一些行：

输入：

```
10 , ,"2007-07-30 13.26.21.598000" ,1922 ,0 , , , ,"Special Needs List Rows updated :
Row 1 : Instruction: other :Comment: pump runs all of the water for the insd's home" ,10003 ,524 ,"cc:2023" , , ,2023 , , ,"CCR" ,"INSERT" ,"2011-12-03 01.25.39.759555" ,"2011-12-03 01.25.39.759555" 
```

输出：

```
10 , ,"2007-07-30 13.26.21.598000" ,1922 ,0 , , , ,"Special Needs List Rows updated :Row 1 : Instruction: other :Comment: pump runs all of the water for the insd's home" ,10003 ,524 ,"cc:2023" , , ,2023 , , ,"CCR" ,"INSERT" ,"2011-12-03 01.25.39.759555" ,"2011-12-03 01.25.39.759555" 
```

我一直在研究 Awk，但无法真正理解如何保留实际行。

另一个例子：

输入：

```
9~~"2007-08-01 16.14.45.099000"~2215~0~~~~"Exposure closed (Unnecessary) : Garage door working
Claim Withdrawn"~~701~"cc:6007"~~564~6007~~~"CCR"~"INSERT"~"2011-12-03 01.25.39.759555"~"2011-12-03 01.25.39.759555"
4~~"2007-08-01 16.14.49.333000"~1923~0~~~~"Assigned to user Leanne Hamshere in group GIO Home Processing (Team 3)"~~912~"cc:6008"~~~6008~~~"CCR"~"INSERT"~"2011-12-03 01.25.39.759555"~"2011-12-03 01.25.39.759555" 
```

输出：

```
9~~"2007-08-01 16.14.45.099000"~2215~0~~~~"Exposure closed (Unnecessary) : Garage door working Claim Withdrawn"~~701~"cc:6007"~~564~6007~~~"CCR"~"INSERT"~"2011-12-03 01.25.39.759555"~"2011-12-03 01.25.39.759555"
4~~"2007-08-01 16.14.49.333000"~1923~0~~~~"Assigned to user Leanne Hamshere in group GIO Home Processing (Team 3)"~~912~"cc:6008"~~~6008~~~"CCR"~"INSERT"~"2011-12-03 01.25.39.759555"~"2011-12-03 01.25.39.759555" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T07:49:54.487

一种使用方式`GNU awk`：

```
awk -f script.awk file.txt 
```

内容`script.awk`：

```
BEGIN {
    FS = "[,~]"
}

NF < 21 {
    line = (line ? line OFS : line) $0
    fields = fields + NF
}

fields >= 21 {
    print line
    line=""
    fields=0
}

NF == 21 {
    print
} 
```

或者，您可以使用此单线：

```
awk -F "[,~]" 'NF < 21 { line = (line ? line OFS : line) $0; fields = fields + NF } fields >= 21 { print line; line=""; fields=0 } NF == 21 { print }' file.txt 
```

* * *

解释：

我对您的预期输出进行了观察：似乎每一行都应该包含 21 个字段。因此，如果您的行包含少于 21 个字段，请存储该行并存储字段数。当我们循环到下一行时，该行将使用空格连接到存储的行，以及总计的字段数。如果此字段数大于或等于 21（虚线字段的总和将增加到 22），则打印存储的行。否则，如果该行包含 21 个字段（NF == 21），则打印它。HTH。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T13:28:20.627

试试这个单行：

```
awk '{if(t){print;t=0;next;}x=$0;n=gsub(/"/,"",x);if(n%2){printf $0" ";t=1;}else print $0}' file 
```

想法：计算`"`一行的数量。如果计数是奇数，则加入下一行，否则当前行将被视为完整行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T01:11:24.940

我认为`sed`是你的选择。我假设所有记录都以非冒号字符结尾，因此如果一行以冒号结尾，则将其识别为异常并应连接到前一行。

这是代码：

```
cat data | sed -e '/[^"]$/N' -e 's/\n//g' 
```

第一次执行`-e '/[^"]$/N'`匹配异常情况，并在不清空缓冲区的情况下读取下一条记录。然后`-e 's/\n//g'`删除换行符。

# sql-server-2005 - 安装 SQL CLR 用户定义函数

> ID：12574912
> 
> 赞同：1
> 
> 时间：2012-09-25T01:00:58.733
> 
> 标签：sql-server-2005, clr, sqlclr

我正在 VS 2008 和 SQL Server 2005 中测试一些 SQL CLR 的东西，如何在数据库上安装用户定义的函数？我构建了它并拥有了 DLL，但现在呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T01:07:58.090

你会使用[`CREATE ASSEMBLY`](http://msdn.microsoft.com/en-us/library/ms254956%28v=vs.90%29.aspx). 例如：

```
CREATE ASSEMBLY MyAssembly FROM 'C:\path\fille.dll' WITH PERMISSION_SET = SAFE;
GO 
```

然后可选的语法`CREATE FUNCTION`引用程序集中的函数（外部名称将取决于您如何构建代码）：

```
CREATE FUNCTION dbo.MyFunction(@param <data_type>)
RETURNS <data_type>
AS EXTERNAL NAME MyAssembly.SqlServerFunctions.FunctionName; 
```

# php - 在 smarty 中调整图像大小？

> ID：12574914
> 
> 赞同：0
> 
> 时间：2012-09-25T01:01:36.763
> 
> 标签：php, smarty, image-scaling, image-size

在 smarty 中有 imagesize 函数，您可以将其传递给它一个高度和一个宽度，它会按比例缩小直到满足第一个维度属性。

例如，如果你有一个图像是`5000x3000`

然后你传递函数`width=500 height=150`

你最终会得到一个图像`500x300`

您也可以传递该函数`crop=true`，它将在不适合的尺寸处裁剪图像以使其适合尺寸，但会切断图像的一部分。

我想知道是否有办法让它缩小图像直到满足两个尺寸，然后用透明背景填充剩余区域以图像为中心。

所以你最终会得到你的实际图像缩小到`350x150`它然后用 75 像素的透明度填充左右两边，所以你的整个文件是`500x150`

如果传递的图像小于给定尺寸，则将发生相同的过程，透明像素填充剩余空间。

smarty有这个能力吗？或者有没有办法让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:48:38.027

不，没有这样的功能。

唯一的功能是[html_image](http://www.smarty.net/docs/en/language.function.html.image.tpl)，它将根据实际图像大小自动将宽度和高度插入到 img-tag 中。

但反过来也无济于事。

但是，您可以编写自己的[插件](http://www.smarty.net/docs/en/plugins.tpl)，这可以让 smarty 能够缩放图像。

# php - 如何从依赖注入容器中仅加载此页面所需的工厂

> ID：12574921
> 
> 赞同：1
> 
> 时间：2012-09-25T01:02:57.060
> 
> 标签：php, dependency-injection, factory-pattern

我正在升级我的 Web 应用程序的框架以使用依赖注入容器，并且我正在努力确保我做对了。该容器被设置为构建其他类用于获取站点资源的许多工厂，这些工厂可能是客户或付款历史或任何数量的东西，因此将有相当多的工厂。

现在我可以在顶部放置一个资源管理器类，它具有每种工厂的实例，但不是每个页面都会使用每个工厂。每个页面可能只需要一个或两个工厂，因此为每个页面加载每个工厂将导致不必要的减速。所以我需要一种方法让每个页面只获取它需要的资源。

我是不是该：

1.  有一个工厂工厂，可以在每个页面上加载，根据请求延迟加载特定工厂。
2.  在容器中注册每个页面，以便在请求页面时由应用程序的根管理它的依赖项。（似乎容器会变得很大，因为每个页面都需要一个新条目，这种解决方案看起来很优雅，但会增加创建新页面的开发成本）
3.  将容器传递到每个页面，以便它可以在运行时加载所需的依赖项。（真的不确定，这似乎是最简单的解决方案，但必须确保容器不会进一步进入应用程序，如果有 100 个页面，那么您现在有 100 个使用容器的地方而不是 1 在根）
4.  一个我没有想到的明显更好的解决方案，因为我是菜鸟......

# python - 如何在 OpenCV2 python 中查看视频流

> ID：12574923
> 
> 赞同：2
> 
> 时间：2012-09-25T01:03:04.780
> 
> 标签：python, opencv

我开始玩 Opencv。我在 Linux 上为 opencv2 使用 python 绑定。我写了一个快速测试程序，但它似乎无限期地挂起。

```
import cv2

weblink = "http://continuous-video-stream-here"
cv2.namedWindow("video")

vid = cv2.VideoCapture(weblink)
key = -1

while (key < 0):
    success, img = vid.read()
    cv2.imshow("video", img) 
```

但它挂在这个输出上：

```
(video:14388): GStreamer-CRITICAL **: gst_caps_unref: assertion `caps != NULL' failed 
```

我也尝试过从 urllib2 读取：

```
vid = cv2.VideoCapture(urllib2.urlopen(weblink).read()) 
```

但这也没有用。

我正在使用 Opencv 2.4.2，ffmpeg-0.11.2

*编辑*：视频提要使用 realplayer 在浏览器中通过 http 显示视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:57:04.193

安全编码并测试方法的返回：

```
vid = cv2.VideoCapture(weblink)
if not vid:
    print("!!! Failed VideoCapture: invalid parameter!") 
```

OpenCV 可能不支持您使用的地址。

每当方法可能失败时，都应使用相同的做法：

```
while (key < 0):
    success, img = vid.read()
    if not img:
        print("!!! Failed vid.read()")
        break

    cv2.imshow("video", img) 
```

# windows - Hello World 在 Windows 程序集中使用 nasm

> ID：12574924
> 
> 赞同：14
> 
> 时间：2012-09-25T01:03:15.760
> 
> 标签：windows, assembly, mingw, nasm

我正在使用[nasm](http://sourceforge.net/projects/nasm/)编译以下程序集。但是，代码在 Windows 下的控制台中崩溃。

> C:\>nasm -f win32 test.asm -o test.o
> 
> C:\>ld test.o -o test.exe

```
section .data
  msg   db    'Hello world!', 0AH
  len   equ   $-msg

section .text
  global _WinMain@16

_WinMain@16:
  mov   edx, len
  mov   ecx, msg
  mov   ebx, 1
  mov   eax, 4
  int   80h

  mov   ebx, 0
  mov   eax, 1
  int   80h 
```

根据这个[帖子](http://en.kioskea.net/faq/1559-compiling-an-assembly-program-with-nasm)。该`main`功能在 Windows 下不可用，必须替换为`WinMain`.

因此，如果您的入口点是`_start`或`main`，则应将其更改为并将过程末尾的`_WinMain@16`更改为：`ret``ret 16`

我的工作示例：

```
section .text       
 global _WinMain@16       

_WinMain@16:       
 mov eax, 0       
 ret 16 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-25T01:24:40.817

最大的问题是你试图在 Windows 上使用 Linux 中断！int 80 在 Windows 上不起作用。

我们正在使用 Assembly，因此您的入口点可以是您想要的任何标签。ld 寻找的标准入口点是 _start，如果你想使用另一个标签，你需要用 -e 选项告诉 ld 所以如果你想让你的开始标签是 main，那么你需要

```
global main
ld -e main test.o -o test.exe 
```

如果你打算在 Windows 上使用 NASM，我会推荐使用 GoLink 作为你的链接器。这是一个简单的 Windows 控制台应用程序：

```
STD_OUTPUT_HANDLE   equ -11
NULL                equ 0

global GobleyGook
extern ExitProcess, GetStdHandle, WriteConsoleA

section .data
msg                 db "Hello World!", 13, 10, 0
msg.len             equ $ - msg

section .bss
dummy               resd 1

section .text
GobleyGook:
    push    STD_OUTPUT_HANDLE
    call    GetStdHandle

    push    NULL
    push    dummy
    push    msg.len
    push    msg
    push    eax
    call    WriteConsoleA 

    push    NULL
    call    ExitProcess 
```

生成文件：

```
hello: hello.obj
    GoLink.exe  /console /entry GobleyGook hello.obj kernel32.dll  

hello.obj: hello.asm
    nasm -f win32 hello.asm -o hello.obj 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-05T21:19:19.337

虽然，同样的程序可能会像魅力一样在 Linux 上的 WINE 中运行。:)

WINE 不会阻止在 Windows PE 二进制文件中使用 Linux 系统调用；机器指令本机运行，WINE 仅提供 DLL 函数。

# scala - Scala - 隐式返回值语法

> ID：12574925
> 
> 赞同：-3
> 
> 时间：2012-09-25T01:03:17.030
> 
> 标签：scala, syntax

> **可能重复：**
> [在 Scala 中返回](https://stackoverflow.com/questions/12560463/return-in-scala)

我刚刚开始使用 Scala，并且遇到了一些我不太了解的行为，我希望 stackoverflow 社区可以提供一些启示。

使用此测试：

```
example(1,List(1)) 
```

此代码按我的预期工作 - 在第二次迭代中返回 0：

```
def example(value: Int, list: List[Int]): Int = {
  if (list.isEmpty)
    return 0
  else
    return 1
  example(value - list.head, list.tail) + example(value, list.tail);
} 
```

但是，此代码不会 - 它在第二次迭代时抛出 NoSuchElementException("head of empty list")：

```
def example(value: Int, list: List[Int]): Int = {
  if (list.isEmpty)
    0
  else
    1
  example(value - list.head, list.tail) + example(value, list.tail);
} 
```

不同之处似乎在于，在第二个示例中，Scala 假设“0”和“1”不是返回值，而是要计算的表达式，因为函数末尾还有另一个表达式。由于显式的“return”关键字，第一个示例将按预期返回是有道理的。

但是，考虑到第二个示例中 if 语句的语法，我认为编译器会意识到“0”不是要评估的表达式，而是返回值。为什么不是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T01:13:51.897

[您应该在此处](https://stackoverflow.com/questions/12560463/return-in-scala)阅读答案以获取有关隐式返回的信息，因为您的问题的那部分是完全重复的。

但是我将具体回答您关于“我认为编译器会意识到“0”不是要评估的表达式，而是返回值”的观点，因为这是一个有趣的观察。

简单的答案是它`0` *是*一个表达式……它的评估很简单。Scala 在决定如何处理您的代码时，并没有区分“需要努力的表达式”和“简单的表达式”。它只是按照它被告知的方式处理它。

更重要的是，如果 Scala 编译器*确实*涉及到猜测您的意图，那将变得非常疯狂，并且会使编码更具挑战性！

要了解我们为什么*不想要这个*，让我们看看您发布的代码：

```
def example(value: Int, list: List[Int]): Int = {
  if (list.isEmpty)
    0
  else
    1
  example(value - list.head, list.tail) + example(value, list.tail);
} 
```

正如你所提到的，`0`和`1`位并没有真正做任何事情。所以也许这个假设的编译器会说“嘿！我能用这些做的唯一有趣的事情就是返回它们！” 从而使他们返回。我们现在有一个双方都返回的 if/else。换句话说，如果`list`为空，则返回，如果*不*为空，则返回。所以我们*总是*返回，函数结束。

可是等等！！if/else 表达式后面还有一行！所以我们假设的编译器会说“嘿！如果我回到这里，那我永远不会执行那行！那行看起来很重要。也许我*不应该*返回，这样我就可以执行它。” 但随后它意识到“哦，不！如果我不返回`0`or `1`，那么它们毫无意义！我必须返回它们！”。“但最后一行仍然存在！”。“啊啊啊啊！！！！1！！”。

所以也许编译器最好不要试图猜测我们想要什么，而是按照我们告诉它的去做。

# c# - 带有 IN 运算符的 LINQ 中的 Where 子句

> ID：12574927
> 
> 赞同：-1
> 
> 时间：2012-09-25T01:03:18.150
> 
> 标签：c#, linq

我有一个返回汇总表的 LINQ 函数。

```
 private DataTable CreateSummaryFocusOfEffortData()
    {
        var result = ReportData.AsEnumerable()
            .GroupBy(row => new
                                {
                                    Value = row.Field<string>("Value"),
                                    Description = row.Field<string>("Description")

                                })
            .Select(g =>
                        {
                            var row = g.First();
                            row.SetField("Hours", g.Sum(r => r.Field<double>("Hours")));

                            return row;
                        });

      return result.CopyToDataTable();
    } 
```

现在我想向这个函数添加一个 WHERE 子句，以便它只总结列表中存在的字段的行。类似于 sql 中的 IN 运算符。例如：假设我有一个包含值 (1,2,3) 的列表，我想以 where 子句为基础，其中包含列表中的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T01:06:07.887

只是一个如何尝试的例子：

```
private DataTable CreateSummaryFocusOfEffortData(List<int> yourList)
{
    var result = ReportData.AsEnumerable()
        .GroupBy(row => new
                            {
                                Value = row.Field<string>("Value"),
                                Description = row.Field<string>("Description")

                            })
        .Select(g =>
                    {
                        var row = g.First();
                        row.SetField("Hours", 
                                     g.Where(r=>yourList.Contains(r.Field<int>("Id")))
                                      .Sum(r => r.Field<double>("Hours")));

                        return row;
                    });

  return result.CopyToDataTable();
} 
```

# php - 行验证的正则表达式模式

> ID：12574930
> 
> 赞同：0
> 
> 时间：2012-09-25T01:03:41.047
> 
> 标签：php, regex, file, parsing, ip

我的代理解析器以这种方式从 txt 文件中读取代理：

```
 TYPE |     IP    | PORT
SOCKS5|192.168.0.1|3128 
```

我想验证一下这条线是否有效。

类型是 SOCKS4、SOCKS5、HTTP 和 HTTPS。

IP 是任何有效的 IP。

端口是从 1 到 65535 的任何无符号整数。

任何正则表达式专家可以提供帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T01:07:28.950

```
(SOCKS4|SOCKS5|HTTP|HTTPS)\|[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\|[0-9]{1,5} 
```

虽然不验证范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T01:19:52.007

对于范围检查，我认为正则表达式效率不高……`([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5])`不过会检查 0-255。

正如MK所说，

```
(SOCKS4|SOCKS5|HTTP|HTTPS)\|(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})\|(\d{1,5}) 
```

如果您得到完全匹配，请验证标签 \2、\3、\4、\5 是否在 [0-255] 之间作为整数，以及 \6 在 [0-65535] 之间。然后用 \1 检索协议

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T01:29:07.613

这是一个简单的正则表达式：

```
/^(:?SOCKS[45]|HTTPS?)\|(:?\d{1,3}\.){3}\d{1,3}\|\d{1,5}$/ 
```

但是，就像 MK 的回答一样，它不会检查 IP 的组件是 0-255，还是端口是 1-65535。

正则表达式似乎并不是最合适的方法。只需解析条目并检查所有部分是否符合规则应该非常简单。例如

```
list($type, $ip, $port, $other) = explode('|', $line, 4);
if ($other != '') // report error
if (!preg_match('/^(SOCKS[45]|HTTPS?)$/', $type) // report error
$ip_array = explode('.', $ip);
if (count($ip_array) != 4) // report error
foreach ($ip_array as $octet) {
  if (!preg_match('/^\d+$/', $octet) || $octet > 255) // report error
}
if (!preg_match('/^\d+$/, $port) || $port > 65535) // report error 
```

# java - TypeAdapterFactory 的使用更简单

> ID：12574931
> 
> 赞同：12
> 
> 时间：2012-09-25T01:03:46.047
> 
> 标签：java, adapter, gson

AFAIK 可以通过 AFAIK 进行最灵活的 gson 定制`TypeAdapterFactory`，但它可能会变得不必要地复杂。它迫使我为每个处理的类都编写`read`和`write`，而有时只需要一种方法。此外，有时 a`JsonSerializer`和/或`JsonDeserializer`更容易编写，例如[这里](https://stackoverflow.com/a/7773201/581205)。这让我想到了这些问题：

*   是否有可能编写一个`TypeAdapter`简单地委托其方法之一的a（例如，`ImmutableList`从写到写`List`）？
*   是否可以以某种方式使用`JsonSerializer`和/或`JsonDeserializer`与`TypeAdapterFactory`? 或者，有适合他们的工厂吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-25T15:41:08.800

可以创建一个`TypeAdapter`委托其方法之一的 a。这个用例是 API 的重要组成部分，有一个[getDelegateAdapter()](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/Gson.html#getDelegateAdapter%28com.google.gson.TypeAdapterFactory,%20com.google.gson.reflect.TypeToken%29)方法就是为了这个目的。`this`作为第一个参数传递，`getDelegateAdapter`它将返回在当前工厂之后优先的适配器。

```
TypeAdapterFactory immutableListFactory = new TypeAdapterFactory() {
  @Override public <T> TypeAdapter<T> create(Gson gson, TypeToken<T> type) {
    if (!(type.getType() instanceof ParameterizedType)
        || !type.getRawType().equals(ImmutableList.class)) {
      return null;
    }

    ParameterizedType parameterizedType = (ParameterizedType) type.getType();
    TypeAdapter<T> delegate = gson.getDelegateAdapter(this, type);
    TypeAdapter<?> elementAdapter = gson.getAdapter(
        TypeToken.get(parameterizedType.getActualTypeArguments()[0]));
    return new ImmutableListAdapter(delegate, elementAdapter);
  }

  class ImmutableListAdapter<E> extends TypeAdapter<ImmutableList<E>> {
    private TypeAdapter<List<E>> delegate;
    private TypeAdapter<E> element;

    ImmutableListAdapter(TypeAdapter<List<E>> delegate, TypeAdapter<E> element) {
      this.delegate = delegate;
      this.element = element;
    }

    @Override public void write(JsonWriter out, ImmutableList<E> value) throws IOException {
      delegate.write(out, value);
    }

    @Override public ImmutableList<E> read(JsonReader in) throws IOException {
      if (in.peek() == JsonToken.NULL) {
        in.nextNull();
        return null;
      }
      ImmutableList.Builder<E> builder = ImmutableList.builder();
      in.beginArray();
      while (in.hasNext()) {
        builder.add(element.read(in));
      }
      in.endArray();
      return builder.build();
    }
  }
}; 
```

您可以混合和匹配`JsonSerializer`/`JsonDeserializer`与`TypeAdapterFactory`，但不能直接。最简单的方法是回调 Gson 以序列化类中的子值。在此示例中，我们将内部循环更改为：

```
 while (in.hasNext()) {
        builder.add(gson.<E>fromJson(in, elementType));
      } 
```

`JsonSerializer`/`JsonDeserializer`和之间的主要区别在于`TypeAdapter`从 JSON 到您的对象模型需要多少个阶段。用`JsonSerializer`/`JsonDeserializer`对象首先转换为 Gson 的 DOM 模型（`JsonElement`等），然后再转换为你的对象模型。使用`TypeAdapter`，跳过中间步骤。

这使得类型适配器代码的读写变得有点棘手，因此您应该只将它用于优化代码。

# ruby-on-rails - 仅在创建时验证方法调用，而不是在更新时调用

> ID：12574933
> 
> 赞同：2
> 
> 时间：2012-09-25T01:04:43.037
> 
> 标签：ruby-on-rails, ruby, jruby, ruby-on-rails-2, jrubyonrails

我的模型中有验证方法

```
def validate
  super    
  if some condition
    errors.add('', 'some text')
  end
end 
```

此方法调用创建和更新。我不想调用更新。我怎样才能做到这一点？

我正在使用 rails2.3.11 和 jruby。

更新：我可以使用这个`validate :custom_validation, :on => :create`，但是他们如何调用创建和更新？

我也检查了`validate_on_create`，但我还是不知道什么时候`validate`打电话？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T02:27:04.123

利用

```
validate :custom_validation, :on => :create 
```

并将您的方法名称从更改`validate`为`custom_validation`ie

```
def custom_validation
  super    
  if some condition
    errors.add('', 'some text')
  end
end 
```

并且上述方法只会在创建时调用，而不是在更新时调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-30T18:09:01.393

在运行 Rails 4.2.5.1 的旧应用程序中，使用`:on => :create`, 对我来说有意想不到的结果

我不希望在我调用时调用我的以下验证，`.valid?`但它正在被调用。

```
a) My Test Model contained `validate :exec_on_create, :on => :create`.
b) In console
001 > t = Test.new(msg: '7 ...')
002 > t.valid?
******* "exec_on_create" was called.
=> true 
```

更改`:on => :create` 为 `before_create :exec_on_create`，执行得更符合我的预期......不再称为应该仅在创建时调用的验证。

```
a) My test Model contained `before_create :exec_on_create`.
b) In console
001 > t = Cals2Db::Test.new(msg: '7 ...')
002 > t.valid?
=> true 
```

# image-processing - OpenCV - 填充到新垫子上

> ID：12574937
> 
> 赞同：14
> 
> 时间：2012-09-25T01:06:37.427
> 
> 标签：image-processing, opencv, flood-fill

给定图像上的一个点，我想填充连接到该点的所有点 - 但到一个新图像上。一种天真的方法是将原始图像填充为特殊的魔法颜色值。然后，访问每个像素，并将所有具有此神奇颜色值的像素复制到新图像中。一定会有更好的办法！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-25T03:38:29.163

为什么不使用[cv::floodFill](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html?highlight=floodfill#floodfill)的第二个变体来创建蒙版？

> int floodFill(InputOutputArray image, InputOutputArray mask, Point seedPoint, Scalar newVal, Rect* rect=0, Scalar loDiff=Scalar(), Scalar upDiff=Scalar(), int flags=4)

*   原始图像

```
cv::Mat img = cv::imread("squares.png"); 
```

![正方形](../Images/ef9b4438d87d6cd056cca1584c0ad397.png)

*   第一个变体

```
cv::floodFill(img, cv::Point(150,150), cv::Scalar(255.0, 255.0, 255.0)); 
```

![图像](../Images/98d576e31e09d86cf5eca59c2e675c92.png)

这是`img`

*   第二种变体

```
cv::Mat mask = cv::Mat::zeros(img.rows + 2, img.cols + 2, CV_8U);
cv::floodFill(img, mask, cv::Point(150,150), 255, 0, cv::Scalar(), cv::Scalar(),
  4 + (255 << 8) + cv::FLOODFILL_MASK_ONLY); 
```

![面具](../Images/51e4bdc8d20b3c180673e5f23bb80f19.png)

这是`mask`. `img`不变

如果你这样做，请注意：

> **由于掩码大于填充后的图像，因此图像中的一个像素 (x,y) 对应于掩码中的像素 (x+1, y+1)。**

# ruby - 如何在 Windows 7 中安装 filemagic

> ID：12574946
> 
> 赞同：0
> 
> 时间：2012-09-25T01:08:13.490
> 
> 标签：ruby, gem

我正在尝试安装

```
gem install ruby-filemagic

checking for magic_open() in -lmagic... no                                         
*** ERROR: missing required library to compile this module                         
*** extconf.rb failed ***                                                          
Could not create Makefile due to some reason, probably lack of                     
necessary libraries and/or headers.  Check the mkmf.log file for more              
details.  You may need configuration options. 
```

如何在 Windows 7 上修复此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:42:09.323

```
checking for magic_open() in -lmagic... no                 
*** ERROR: missing required library to compile this module 
```

首先它检查库中是否`magic_open`存在`magic`函数，但它没有找到它，这表明你缺少魔法库。

`libmagic`不是 Windows 的一部分，因此您需要自己获取或编译它。

您可以使用使用 RubyInstaller 的互补 DevKit 来编译 C 项目，但您需要熟悉 libmagic 和 GCC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-14T17:27:39.277

对于 Ruby 1.9.3

从[ftp://ftp.astron.com/pub/file/](ftp://ftp.astron.com/pub/file/)下载[file-5.21.tar.gz](ftp://ftp.astron.com/pub/file/file-5.21.tar.gz)并解压到一个目录。

从[sourceforge](http://sourceforge.net/projects/mingw/files/Other/UserContributed/regex/mingw-regex-2.5.1/)下载 libgnurx 2.5.1 [bin](http://sourceforge.net/projects/mingw/files/Other/UserContributed/regex/mingw-regex-2.5.1/mingw-libgnurx-2.5.1-bin.tar.gz/download) + [dev](http://sourceforge.net/projects/mingw/files/Other/UserContributed/regex/mingw-regex-2.5.1/mingw-libgnurx-2.5.1-dev.tar.gz/download)并将两者解压缩到另一个目录。

运行 DevKit msys shell

```
 c:\path\to\devkit-4.5.2\msys.bat -mintty 
```

`file`从您将其解压缩到的目录构建。

```
 cd /the/path/to/extracted/file-5.21
 LDFLAGS=-L/the/path/to/libgnurx-2.5.1/lib
 CFLAGS=-I/the/path/to/libgnurx-2.5.1/include
 ./configure --prefix=/a/path/for/file-2.21
 make install 
```

从 DevKit msys shell 内部

```
 gem install ruby-filemagic -- --with-magic-dir=/a/path/for/file-2.21 
```

# c# - 如何将地址添加到地址？

> ID：12574952
> 
> 赞同：-3
> 
> 时间：2012-09-25T01:09:51.663
> 
> 标签：c#, winforms, bytearray, byte

我想说 0x82000000 并添加说 1dcf 到它，所以它会变成 0x82001dcf 或任何地址。我将如何以最简单的方式做到这一点？在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T01:14:49.473

使用不安全的代码：

```
public unsafe void Foo() {

    byte* start = (byte*)0x82000000;
    start += 0x1DCF;

} 
```

使用 IntPtr：

```
public void Foo() {

    IntPtr start = new IntPtr( 0x82000000 );
    Int64 value = start.ToInt64();
    value += 0x1DCF;

    IntPtr result = new IntPtr( value );

} 
```

# javascript - 使用两个单独的选择下拉菜单将两个值传递给函数

> ID：12574957
> 
> 赞同：0
> 
> 时间：2012-09-25T01:10:30.790
> 
> 标签：javascript, forms, select

我在网上寻找这个并接近解决方案，但没有直接处理它。

我有两个表单选择下拉菜单：

我想要这么多治疗师-

```
<select name="calcXmultiple" onChange="javascript:calcTherapist(1, this.value)">
    <option selected="selected" value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
</select> 
```

工作这么多小时——

```
<select name="calcXmultiple" onChange="javascript:calcTherapist(1, this.value)">
    <option selected="selected" value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
</select> 
```

我迷路了。

我想将这两个值都发送到一个函数。我知道如何向函数发送单个值并且它工作正常。如何发送两个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T01:22:54.100

给两个下拉列表不同的名称和不同的 ID

```
<select name="calcXmultiple1" id="calcXmultiple1" onChange="calcTherapist()">
 ...
</select>

<select name="calcXmultiple2" id="calcXmultiple2" onChange="calcTherapist()">
...
</select> 
```

它们有一个共同的功能

```
function calcTherapist()
{
   var calcXmultiple1 = document.getElementById('calcXmultiple1');
   var calcXmultiple2 = document.getElementById('calcXmultiple2');

   var therapist = calcXmultiple1.value; 
   var hours = calcXmultiple2.value;

   //doSomethingWith(therapist, hours);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T01:22:32.363

一种方法是从函数本身中获取这两个值，而不是将值传递给函数的参数。

如果你给你的`<select>`元素独特的`id`属性，你可以做这样的事情：

```
var selectTherapists = document.getElementById("selectTherapists");
var selectHours = document.getElementById("selectHours");
var totalHours = selectTherapists.options[selectTherapists.selectedIndex].value * selectHours.options[selectHours.selectedIndex].value; 
```

# php - 我应该使用 HTML 或 PHP 中的提交表单功能在服务器上创建新的 *.txt 文件吗？

> ID：12574961
> 
> 赞同：1
> 
> 时间：2012-09-25T01:10:48.307
> 
> 标签：php, forms, html, submit

我需要使用表单从在线用户那里检索文本，并在我的服务器上创建一个带有提交的 *.txt 文件。我现在有 ftp 工作，但如果必须，我可以使用其他东西。

这是我为表格写的：

```
<form name="input" action="upload.php" method="post" 
enctype="multipart/form-data">

<textarea input type="text" name="form" cols="100" rows="20" 
name="body"></textarea><p>

<input type="submit" name="form" value="Submit"></center>
</form> 
```

这是我的upload.php：

```
<?php

$filep=$_POST['form']['form']; 
$ftp_server=['http://ftp.***.***'];
$ftp_user_name=['***'];
$ftp_user_pass=['***'];
$paths=['***'];
$name=['test.txt'];

$conn_id=ftp_connect($ftp_server);

$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);

if ((!$conn_id) || (!$login_result)) {
   echo "FTP connection has failed!";
   echo "Attempted to connect to $ftp_server for user $ftp_user_name....";
   exit;
} else {
   echo "Connected to $ftp_server, for user $ftp_user_name".".....";
}

$upload = ftp_put($conn_id, $paths.'/public_ftp'.$name, $filep, FTP_BINARY);

if (!$upload) {
   echo "FTP upload has failed!";
} else {
   echo "Uploaded $name to $ftp_server ";
}

?> 
```

我将登录信息星标了，因为它没有必要。

该脚本变为空白。甚至没有错误消息。

我什至不确定我是否走在正确的道路上。我发现了一些可能有用的代码，但没有什么能满足我的一切需求。帮助！

# c# - 快速可查询的对象集合

> ID：12574962
> 
> 赞同：3
> 
> 时间：2012-09-25T01:11:17.013
> 
> 标签：c#, .net

我正在寻找一个可以接受对象集合并返回索引数据结构的库，该结构将针对快速查询进行优化。

这可能通过一个例子更好地说明：

```
public class MyClass
{
    public sting Name {get;set;}
    public double Number {get;set;}
    public ... (Many more fields)
}     

var dataStore = Indexer.Parse(myClassCollection).Index(x => x.Name).Index(x => x.Number).Index( x => x.SomeOtherProperty);
var queryResult = dataStore.Where( x => x.Name == "ABC").Where(x => x.Number == 23).Where( x => x.SomeOtherProperty == dateTimeValue); 
```

这个想法是查询`dataStore`将非常快，大约为`O(log n)`.

当您有超过 2 或 3 个要索引的字段时，使用字典的字典开始变得复杂。

是否有一个已经存在的库可以做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T01:18:38.707

[面向对象的数据库](http://en.wikipedia.org/wiki/Object_database)怎么样。

[英镑](http://sterling.codeplex.com/)是推荐的选择。它支持 LINQ to Object，所以不用担心查询，我们已经在几个中等项目中使用了它，结果很好（它非常快）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T17:25:42.160

你也应该看看 RaptorDB。可以在[此处](http://www.codeproject.com/search.aspx?q=raptordb&x=0&y=0&sbo=kw)的 CodeProject 上找到多个版本，包括完全嵌入式版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T01:24:40.267

您可以使用 Lucene.NET，它也可以完全在内存中运行（尽管我不确定这是否是您想要的）。它支持基于字段标准的快速文档检索。

因此，这实际上为您提供了一个文档数据库。如果你更进一步，你最终会得到像 RavenDB（商业）这样的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T00:54:48.837

我想知道我们是否可以通过为每个索引属性创建一个 SortedDictionary 来实现这一点。

```
SortedDictionary<property, List<MyClass>> 
```

然后解析 Linq 表达式树，找出正在查询的属性。我们可以检索 sortedDictionaries 的有效键，然后遍历这些键以获取每个已排序字典的 List，然后根据表达式树是否具有 OR 或 AND 指令使用诸如 Union() 和 Intersect() 之类的 Set 操作。然后返回匹配搜索条件的列表。

如果查询包含未索引的属性，请先使用索引属性执行查询，然后使用普通 Linq 完成它。

然后有趣的部分变成了解析表达式树。

对这种方法有什么想法吗？

# asp.net-mvc - 通过 jquery 调用控制器中的操作

> ID：12574975
> 
> 赞同：0
> 
> 时间：2012-09-25T01:13:40.320
> 
> 标签：asp.net-mvc, model-view-controller

我是 MVC 的新手，我每天都在继续学习更多。我正在将 webform 应用程序转换为 MVC 以进行练习，并想知道有没有办法在操作上调用 GET 并在 document.ready 函数上返回 json、数组或我想要的任何内容？我可以使用 webapi 执行此操作，但我更愿意使用控制器中的操作来执行此操作。我喜欢 Microsoft 提供的帮助程序，但它们用于表单和操作链接等。感谢您的帮助。

```
$(document).ready(function(){
$.ajax(Somehow call controller action here with data), success(function that returns json data)
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T01:17:09.087

我认为这篇文章有很好的例子解释

[http://www.codeproject.com/Articles/41828/JQuery-AJAX-with-ASP-NET-MVC](http://www.codeproject.com/Articles/41828/JQuery-AJAX-with-ASP-NET-MVC)

# ruby-on-rails - "rake assets:precompile" 给出 punc 错误

> ID：12574977
> 
> 赞同：48
> 
> 时间：2012-09-25T01:13:58.290
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, assets

我正在尝试为生产预编译我的资产，但 rails 似乎没有合作。

```
$ bundle exec rake assets:precompile
/home/drderp/.rvm/rubies/ruby-1.9.3-p194/bin/ruby /home/drderp/.rvm/gems/ruby-1.9.3-p194@global/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets
rake aborted!
Unexpected token punc, expected punc (line: 213, col: 13, pos: 5986)

Error
    at new JS_Parse_Error (<eval>:1720:22)
    at js_error (<eval>:1728:15)
    at croak (<eval>:2189:17)
    at token_error (<eval>:2196:17)
    at expect_token (<eval>:2209:17)
    at Object.expect (<eval>:2212:40)
    at Object.1 (<eval>:2763:38)
    at prog1 (<eval>:2770:28)
    at <eval>:2560:51
    at maybe_unary (<eval>:2665:27)
  (in /home/drderp/projects/p/app/assets/javascripts/application.js)

Tasks: TOP => assets:precompile:primary
(See full trace by running task with --trace)
rake aborted!
Command failed with status (1): [/home/drderp/.rvm/rubies/ruby-1.9.3-p194/b...]

Tasks: TOP => assets:precompile
(See full trace by running task with --trace) 
```

这是 application.js 的全部内容：

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// Since javascript, no matter what order you load it in, executes in different order, it doesn't
// matter
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery 
```

Rails 版本 3.2.8，在 Ruby 1.9.3 上运行。

**编辑**：

这是`bundle exec rake assets:precompile --trace`，根据要求：

```
$ bundle exec rake assets:precompile --trace
** Invoke assets:precompile (first_time)
** Execute assets:precompile
/home/drderp/.rvm/rubies/ruby-1.9.3-p194/bin/ruby /home/drderp/.rvm/gems/ruby-1.9.3-p194@global/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
rake aborted!
Unexpected token punc, expected punc (line: 213, col: 13, pos: 5986)

Error
    at new JS_Parse_Error (<eval>:1720:22)
    at js_error (<eval>:1728:15)
    at croak (<eval>:2189:17)
    at token_error (<eval>:2196:17)
    at expect_token (<eval>:2209:17)
    at Object.expect (<eval>:2212:40)
    at Object.1 (<eval>:2763:38)
    at prog1 (<eval>:2770:28)
    at <eval>:2560:51
    at maybe_unary (<eval>:2665:27)
  (in /home/drderp/projects/p/app/assets/javascripts/application.js)
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/execjs-1.4.0/lib/execjs/ruby_racer_runtime.rb:34:in `rescue in block in eval'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/execjs-1.4.0/lib/execjs/ruby_racer_runtime.rb:28:in `block in eval'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/execjs-1.4.0/lib/execjs/ruby_racer_runtime.rb:80:in `block in lock'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/therubyracer-0.10.2/lib/v8/c/locker.rb:13:in `Locker'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/execjs-1.4.0/lib/execjs/ruby_racer_runtime.rb:78:in `lock'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/execjs-1.4.0/lib/execjs/ruby_racer_runtime.rb:27:in `eval'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/execjs-1.4.0/lib/execjs/ruby_racer_runtime.rb:19:in `exec'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/uglifier-1.3.0/lib/uglifier.rb:100:in `compile'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/sprockets/compressors.rb:74:in `compress'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/sprockets-2.1.3/lib/sprockets/processing.rb:265:in `block in js_compressor='
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/sprockets-2.1.3/lib/sprockets/processor.rb:29:in `call'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/sprockets-2.1.3/lib/sprockets/processor.rb:29:in `evaluate'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/tilt-1.3.3/lib/tilt/template.rb:76:in `render'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/sprockets-2.1.3/lib/sprockets/context.rb:177:in `block in evaluate'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/sprockets-2.1.3/lib/sprockets/context.rb:174:in `each'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/sprockets-2.1.3/lib/sprockets/context.rb:174:in `evaluate'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/sprockets-2.1.3/lib/sprockets/bundled_asset.rb:26:in `initialize'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/sprockets-2.1.3/lib/sprockets/base.rb:244:in `new'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/sprockets-2.1.3/lib/sprockets/base.rb:244:in `build_asset'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/sprockets-2.1.3/lib/sprockets/index.rb:89:in `block in build_asset'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/sprockets-2.1.3/lib/sprockets/caching.rb:19:in `cache_asset'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/sprockets-2.1.3/lib/sprockets/index.rb:88:in `build_asset'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/sprockets-2.1.3/lib/sprockets/base.rb:163:in `find_asset'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/sprockets-2.1.3/lib/sprockets/index.rb:56:in `find_asset'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/sprockets/static_compiler.rb:23:in `block in compile'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/sprockets-2.1.3/lib/sprockets/base.rb:212:in `block in each_logical_path'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/sprockets-2.1.3/lib/sprockets/base.rb:200:in `block (2 levels) in each_file'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/sprockets-2.1.3/lib/sprockets/base.rb:190:in `each'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/sprockets-2.1.3/lib/sprockets/base.rb:190:in `each_entry'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/sprockets-2.1.3/lib/sprockets/base.rb:198:in `block in each_file'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/sprockets-2.1.3/lib/sprockets/base.rb:197:in `each'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/sprockets-2.1.3/lib/sprockets/base.rb:197:in `each_file'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/sprockets-2.1.3/lib/sprockets/base.rb:210:in `each_logical_path'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/sprockets/static_compiler.rb:18:in `compile'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/sprockets/assets.rake:56:in `internal_precompile'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/sprockets/assets.rake:70:in `block (3 levels) in <top (required)>'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/home/drderp/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/sprockets/assets.rake:60:in `block (3 levels) in <top (required)>'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/home/drderp/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `load'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `<main>'
Tasks: TOP => assets:precompile:primary
rake aborted!
Command failed with status (1): [/home/drderp/.rvm/rubies/ruby-1.9.3-p194/b...]
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:53:in `block in create_shell_runner'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `call'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `sh'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `sh'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:80:in `ruby'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `ruby'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/sprockets/assets.rake:12:in `ruby_rake_task'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/sprockets/assets.rake:21:in `invoke_or_reboot_rake_task'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/home/drderp/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `load'
/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `<main>'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
/home/drderp/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => assets:precompile 
```

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2016-07-06T16:14:39.067

在 js-assets 中查找问题的更通用方法：运行`rails console`并：

```
JS_PATH = "app/assets/javascripts/**/*.js"; 
Dir[JS_PATH].each do |file_name|
  puts "\n#{file_name}"
  puts Uglifier.compile(File.read(file_name))
end 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-11-08T00:13:59.170

我有同样的问题。在浏览器中打开你的 Javascript 控制台，看看哪里有错误。我怀疑（因为它是我的问题的解决方案），您的一个 JS 文件有错误，很可能是您编写的任何 JS 都使用了“>”符号。

祝你好运寻找错误。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-01-27T04:44:16.600

就我而言，我`()=>{...}`在 js 文件中使用 es6 语法。将其替换为已`function(){...}`解决的问题。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-08-28T21:50:13.630

这太可怕了。我的本地计算机上没有 javascript 错误意味着资产编译存在问题。

这是我解决它的方法。

正如对类似问题的评论中所建议的[ExecJS::ProgramError: Unexpected token punc «(», expected punc «:» when running rake assets:precompile on production](https://stackoverflow.com/q/30422437/226255)时，我删除了 uglifier（在 中`production.rb`，注释掉压缩器行）和压缩.（我曾尝试使用其他压缩器；yui 没有提供太多信息。关闭似乎给了我一个提示，但没有多大帮助）

然后我在本地压缩资产，然后我推送到生产环境。（要在本地压缩，请使用`RAILS_ENV=production rake assets:precompile`）

我在服务器上运行，这时出现了 javascript 错误。这基本上是文件的错误合并（主要是由于注释掉了一些东西）。我摆脱了这些生产线并重新投入生产。一切都成功了。

我带回了 uglifier，删除了下面的预编译资产`public/assets/`并推回了生产环境。

我希望这可以帮助别人！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-11T09:58:10.127

只是提醒一下，我遇到了同样的问题，并且发生了什么事，在生产环境中预编译资产（并推送到 Heroku）时，我的几个 JS 文件被插入了外来字符，沿着......

```
<<<<<<<<HEAD

===========

>>>>>>(random alphanumeric key) 
```

我刚刚在我的站点目录中对“<<”进行了全局搜索，并迅速找到了受影响的文件并删除了这些术语 - 一切正常。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-04-05T19:24:02.757

出于某种原因，在 Heroku 上以及当我在 rails 控制台中运行上述代码以“丑化”javascript 时，它不会报告错误的行号！。它只是 UglifyJS 的一个 ruby​​ 包装器，您可以在此处在线使用它[https://skalman.github.io/UglifyJS-online/](https://skalman.github.io/UglifyJS-online/)。

所以我只是在这里复制并粘贴了有问题的 js 文件，它报告了行号。很容易。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-01-23T12:56:23.930

### 必要的细节：

对我们来说，这是一件奇怪的小事，它导致我们出现实际的潜在错误，因此得到了解决方案。

**我们有 uglifier gem v `4.1.x`，在撰写本文时，`4.2.x`我们更新了 uglifier 版本，以防万一。**

发生的事情是，**这个新版本实际上开始吐出发生编译错误的实际文件位置**。当我们知道错误来自哪里时，我们会修复它。

### 额外细节：

实际的问题是我们有一些`js.erb`文件，这些文件正在运行一些 rails 代码来填充一些环境数据，例如：

```
const config = {
  abc: <%= Figaro.env.abc %>,
  xyz: <%= Figaro.env.xyz %>
} 
```

我们得到的错误是：`Uglifier::Error: Unexpected token: punc (,)`.

所以很明显，出于某种原因，费加罗没有给我们我们想要的值。我们继续修复这个问题，并通过硬编码随机值来检查我们的假设，从而成功编译了 JS。

把它放在这里，以便它可以帮助某人。

PS：[最佳答案](https://stackoverflow.com/a/38228770/4738391)很棒，但由于某种原因，它给了我们一些随机的 jsx 相关错误，而不是给我们一个实际的错误。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-04-14T23:37:32.923

验证您在应用程序中添加的新 JS 文件包括由 Bower 添加的插件和其他文件或类似文件。

尝试一一添加，找出哪个文件有问题。就我而言，在`anchor-scroll.js`. 当我改为使用`anchor-scroll.min`rake 时运行正常。

改变这个：

```
//= require anchor-scroll/scroll 
```

为了：

```
//= require anchor-scroll/scroll.min 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-07-27T06:38:46.877

我的问题是两个成功的电话。

首先是 mqtt `onSuccess`：

```
onSuccess() {
  console.log("mqtt connected")
}; 
```

我解决了：

```
onSuccess: function() {
  console.log("mqtt connected")
}; 
```

第二个是阿贾克斯的成功。Linter 会告诉你

> 错误：预期的方法简写

但一切都会正常工作。

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2013-10-09T20:17:22.723

> "/home/drderp/.rvm/rubies/ruby-1.9.3-p194/bin/ruby **/home/drderp/.rvm/gems/ruby-1.9.3-p194@global/bin/rake** assets:precompile:all RAILS_ENV=生产 RAILS_GROUPS=资产”

粗体部分（在 ruby​​、反斜杠和 home 之间）之间有一个空格。

我不知道这是否是一个错字，但这可能是你的问题，因为 Rails 不喜欢目录名称中的空格。重命名该文件夹，然后尝试再次运行您的代码。

# php - 如何在所有表中搜索特定节点值的 parent_id？

> ID：12574980
> 
> 赞同：0
> 
> 时间：2012-09-25T01:14:02.720
> 
> 标签：php, mysql, database

还有其他几个类似的帖子，但没有一个符合我的特定参数/需求。

我如何找到`parent_id`与用户可以单击的 50 个不同输出查询结果之一相关联的内容？

比如，如果用户点击“ `Transportation`”，我需要可以找到`parent_id`与运输节点对应的代码。

问题是，我的数据是多个表的结构，所以如果他们点击链接，我不一定知道要搜索哪个表。

基本上我想要的是`SELECT parent_id FROM * WHERE * = communication`

但我不能`*`为表名等参数。

那么如何创建代码以`parent_id`在用户选择特定查询后自动找到它？

一定有比`20 tables`在查询参数中列出所有 my 更好的选择吗？

我应该将数据重组为 1 个表吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-25T02:31:18.630

您必须在每个表中搜索 parent_id。如果你想要更短的代码，你可以试试这个：

```
<?php
$tables = mysql_query('SHOW TABLES');
while($table = mysql_fetch_row($tables)){
    $queries[] = 'SELECT parent_id FROM `' . $table[0] . '` WHERE method=\'Transportation\'';
}   
$result = mysql_query(implode(' UNION ', $queries));
?> 
```

# html - 使用 RoyalSlider 全屏时如何显示标题

> ID：12574982
> 
> 赞同：1
> 
> 时间：2012-09-25T01:14:08.277
> 
> 标签：html, css

我正在使用[royalslider](http://dimsemenov.com/plugins/royal-slider/)来获取一组图像。它工作正常，除了当它全屏时你看不到标题。我相信它被推到了页面的底部。

**我需要做什么才能在全屏模式下正确显示我的图片说明？**

生成的 html 如下所示

```
<div id="gallery-43" class="royalSlider rsDefault fwImage">
    <a class="rsImg"  data-rsDelay="1000" href="/media/cache/2a/4b/2a4b9079557d28eb235a8f505e9fdcf6.jpg">
        <!-- The caption -->
        <small class="attribution">
            <p>Author</p>
        </small>
        <figcaption>image caption </figcaption>
        <!-- The image -->
        <img width="60" height="40" class="rsTmb" src="/media/cache/2f/18/2f180c644eb92eccb8c0040a37e52b4a.jpg" />
    </a>
    <a class="rsImg"  data-rsDelay="1000" href="/media/cache/05/1b/051bf8a02ae1d2ad2420b6418f5dca05.jpg">
        <!-- The caption -->
        <small class="attribution">
            <p>author</p>
        </small>
        <figcaption>image caption.</figcaption>
        <!-- The image -->
        <img width="60" height="40" class="rsTmb" src="/media/cache/9b/82/9b823a0b97d242b9d14133ffe00ca620.jpg" />
    </a>
</div>

<style>
  #gallery-43 {
    margin: 24px 0 66px;
    background-color: rgba(255,255,255,0.2);
  }
  .rsGCaption {
    background: black;
    color: #b2b2b2;
    display:block;
    font-size: 16px;
    line-height: 18px;
    padding-bottom: 16px;
    padding-top: 12px;
  }
  .rsGCaption span {
    display: block;
    clear: both;
    color: #bbb;
    font-size: 14px;
    line-height: 22px;
  }
  .rsGCaption small.attribution {
    color: #535353;
    font-weight: bold;
  }
</style>
<script>
    $(document).ready(function() {
      $('#gallery-43').royalSlider({
        fullscreen: {
          enabled: true,
          nativeFS: true
        },
        arrowsNavAutohide: false,
        arrowsNavHideOnTouch: false,
        autoScaleSlider: true, 
        autoScaleSliderWidth: 960,     
        autoScaleSliderHeight: 850,
        controlNavigation: 'thumbnails',
        globalCaption: true,
        imageAlignCenter: true,
        imageScaleMode: 'fit',
        keyboardNavEnabled: true,
        loop: false,
        numImagesToPreload:4
      });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T04:58:57.493

当用户进入全屏滑块获取`rsFullscreen`类。

```
#gallery-43.rsFullscreen .rsGCaption {
    // styles for global caption in fullscreen
} 
```

# ios - 需要iOS/IB视图布局模板/继承指导

> ID：12574983
> 
> 赞同：2
> 
> 时间：2012-09-25T01:14:18.263
> 
> 标签：ios, templates, uiviewcontroller, interface-builder

这是一个“有点”的问题，我只是希望一些精明的人能给我一些指导。

我有一个 iOS 项目，它有许多屏幕（ViewControllers），它们都共享一个顶部和底部栏（一个 UIImageView，每个都有一个按钮）。我使用故事板是因为我希望能够轻松地可视化整个屏幕图。

Xcode 4.5 中是否有任何方法可以制作一种 UI 模板，或者以某种方式将 IB 中的“视图”子类化，以便每当我制作一个新屏幕 (VC) 时，它都会继承顶部和底部栏以及相关的功能？

我希望如果我创建了一个 UIViewController 子类，将每个 ImageView 和 Button 的 IBOutlet 放入其中，并将两个按钮的关联 IBAction 放入其中，然后在制作我的 VC 时将其子类化，我将能够将它们全部链接起来，允许我只需复制每个屏幕上的视觉元素。但是，唉，当我这样做时，我在子类上得到“不符合 KVC”的错误（当将它链接到现有的出口和操作时）。

我的另一个想法是以编程方式添加超类中的视觉元素，但对我来说，问题出在 IB 中，我必须记住要考虑到顶部和底部缺少的空间，我将不得不忍受如果事实证明这是唯一的选择...

是否有某种我没有看到的方法来做到这一点，或者我真的必须为每个屏幕一遍又一遍地编写代码？

非常感谢任何见解/输入/想法。

# sql - 使用本机客户端驱动程序从 Delphi 代码创建触发器

> ID：12574986
> 
> 赞同：2
> 
> 时间：2012-09-25T01:14:52.970
> 
> 标签：sql, sql-server, delphi, delphi-xe2, dbexpress

我有一个插入触发器，其中包含存储为 XE2 项目资源的动态 sql。它还包含数据库名称和表名称的占位符，当 Delph 代码运行以执行 SQL 时，这些占位符将被替换。

最初我对 SqlExpress 数据库使用 DevArt SQL Server 驱动程序，但现在我想对 LocalDB 数据库使用 ODBC 和 SQL Native Client 驱动程序。

我发现我原来的创建触发器脚本不再起作用。

我正在使用 TSQLQuery.ExecSQL 来执行我的 SQL 命令。

```
CREATE TRIGGER [dbo].[#TableName#_INSERT_TRIGGER] ON [#DatabaseName#].[dbo].[#TableName#] FOR INSERT 
```

导致

**'[Microsoft][SQL Server Native Client 11.0][SQL Server]无法在 'EvaluationCompany_COPYDB.dbo.COPY_PRODUCTS' 上创建触发器，因为目标不在当前数据库中。**

我使用的解析器类确实将 GO 关键字处的 SQL 脚本拆分为单独的语句，所以我修改了我的创建触发器脚本说

```
USE [#DatabaseName#]
GO
CREATE TRIGGER [dbo].[#TableName#_INSERT_TRIGGER] ON [dbo].[#TableName#] FOR INSERT 
```

这就是你在 SSMS 中要做的，但那说

**'[Microsoft][SQL Server Native Client 11.0][SQL Server]对象 'dbo.COPY_PRODUCTS' 不存在或对此操作无效。'**

可能是因为 CREATE 的“当前数据库”不是 USE 设置的，因为它似乎被遗忘了。

我尝试了将sql语句串成单个执行的常用方法

```
USE [#DatabaseName#];
CREATE TRIGGER [dbo].[#TableName#_INSERT_TRIGGER] ON [dbo].[#TableName#] FOR INSERT 
```

但这引发了预期

**'[Microsoft][SQL Server Native Client 11.0][SQL Server]'CREATE TRIGGER' 必须是查询批处理中的第一条语句。'**

所以我将整个 CREATE...END 包装在 EXEC [#DatabaseName#].[sys].[sp_ExecuteSQL] N' ' 中并尝试执行它。如果我将字符串变量的内容粘贴到 SSMS 中，它执行得很好，但是当传递给 ExecSQL 时，它会说

**'[Microsoft][SQL Server Native Client 11.0][SQL Server]对过程'sp_executesql'的请求失败，因为'sp_executesql'是一个过程对象。'**

这有点荒谬。所以现在我不知道如何使用 dbExpress 和 SQL Server 本机客户端在表上创建触发器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:38:54.360

我不确定到底是什么问题，但我能够成功运行以下代码。也许它会给你一个线索。

```
uses
  Data.Win.AdoDB;

procedure TForm1.Button1Click(Sender: TObject);
var
  aConnection : tAdoConnection;

  procedure InitializeAdoConnection;
  begin
    aConnection := tAdoConnection . Create ( self );

    with aConnection do
      begin
        ConnectionString :=   'Provider=MSDASQL.1;'
                            + 'Password=' + gPassword + ';'
                            + 'Persist Security Info=True;'
                            + 'User ID=' + gUserName + ';'
                            + 'Data Source=' + gOdbcAlias + ';'
                            + 'Extended Properties="DSN=' + gOdbcAlias + ';'
                            + 'UID=' + gUserName + ';'
                            + 'PWD=' + gPassword + ';'
                            + 'APP=Enterprise;'
                            + 'WSID=' + gMachineName + ';'
                            + 'DATABASE=master";'
                            + 'Initial Catalog=master';
        LoginPrompt := false;
        Connected := true;
      end;
  end;

  procedure ExecuteCommand ( const nSqlCommand : string );
  begin
    with tAdoCommand . Create ( nil ) do
      try
        Connection := aConnection;
        CommandText := nSqlCommand;
        Execute;
      finally
        Free;
      end;
  end;

  procedure QueryResults;
  begin
    with tAdoQuery . Create ( nil ) do
      try
        Connection := aConnection;
        SQL . Text := 'select * from COPY_PRODUCTS';
        Open;

        while not EOF do
          begin
            Memo1 . Lines . Add ( 'ID='
                  + inttostr ( FieldByName ( 'PRODUCT_ID' ) . AsInteger )
                  + ' Name='
                  + FieldByName ( 'PRODUCT_NAME' ) . AsString );

            Next;
          end;

      finally
        Free;
      end;
  end;

begin
  InitializeAdoConnection;

//  ExecuteCommand ( 'drop database EvaluationCompany_COPYDB' );

  ExecuteCommand ( 'create database EvaluationCompany_COPYDB' );

  ExecuteCommand ( 'use EvaluationCompany_COPYDB' );

  ExecuteCommand ( 'create table dbo.COPY_PRODUCTS '
                   + '( PRODUCT_ID int identity(1,1),'
                   + '  PRODUCT_NAME varchar(50) )' );

  ExecuteCommand ( 'create trigger dbo.COPY_PRODUCTS_INSERT_TRIGGER '
                   + 'on dbo.COPY_PRODUCTS '
                   + 'for insert '
                   + 'as '
                   + 'begin '
                   + '  update COPY_PRODUCTS '
                   + '    set PRODUCT_NAME = PRODUCT_NAME + ''!'' '
                   + '    where PRODUCT_ID in '
                   + '    ( select PRODUCT_ID from INSERTED )'
                   + 'end ' );

  ExecuteCommand ( 'insert into COPY_PRODUCTS ( product_name ) '
                   + 'values ( ''Stacky Goodness'' ) ' );

  QueryResults;
end; 
```

# android - Android - 删除应用程序标题栏和彩色对话框文本框

> ID：12574989
> 
> 赞同：0
> 
> 时间：2012-09-25T01:15:21.883
> 
> 标签：android, android-alertdialog

我有两个问题，所以我在这里发布了两个问题，而不是分开打开两个问题。

1.  我想知道，如何删除我的应用程序标题栏？当我在手机上启动我的应用程序时，我不想被看到

2.  我可以在示例中像这样为我的对话框着色 - > 使我的对话框标题栏为绿色，对话框背景为灰色？

![在此处输入图像描述](../Images/cff51efcda5018c0ca2c517862a91175.png)

我用油漆制作了这张照片，但这就是我希望我的警报对话框看起来的样子:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:12:08.623

对于问题 1：使用 requestWindowFeature(Window.FEATURE_NO_TITLE);

对于问题 2： [如何以编程方式更改对话框背景颜色？](https://stackoverflow.com/questions/7269706/how-to-change-dialog-background-color-programatically)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:01:43.573

要删除通知栏下方的标题栏，您可以将这一行代码添加到您的`Activity`声明中`Mainfest.xml`：

```
android:theme="@android:style/Theme.Black.NoTitleBar" 
```

这就是我使用它的方式：

```
<activity
    android:name=".Splash"
    android:theme="@android:style/Theme.Black.NoTitleBar">
    <intent-filter>
      <action android:name="android.intent.action.MAIN" />
      <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

# android - 在 Java 中将视图添加到 XML 布局

> ID：12574990
> 
> 赞同：2
> 
> 时间：2012-09-25T01:15:33.613
> 
> 标签：android

我已经有一个带有一些按钮的 XML 布局，现在我想在相同的布局中添加一个 textview，但是在我的 Java 类中。在“addView”行之前我没有收到任何错误。如果有人能告诉我一种更好的方法来添加到 Java 中预先存在的 XML 布局中，我也将不胜感激。

```
public class MyActivity extends Activity{
TextView textview;
RelativeLayout layout;

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
layout=(RelativeLayout)findViewById(R.id.mylayout); 
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParam(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
params.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM, RelativeLayout.TRUE);
textview=new TextView(this);
textview.setId(16);
textview.setText("Help");
layout.addView(textview, params);
setContentView(layout);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T01:44:00.233

你的代码应该是这样的，因为你已经有了xml布局，你应该先将内容设置为xml布局，然后将新视图添加到Relativelayout。

```
public class MyActivity extends Activity{

TextView textview;
RelativeLayout layout;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.file_name);
    layout=(RelativeLayout)findViewById(R.id.mylayout); 
    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParam(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
    params.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM, RelativeLayout.TRUE);
    textview=new TextView(this);
    textview.setId(16);
    textview.setText("Help");
    layout.addView(textview, params);
} 
```

# python - 如何将列添加到 python (matix) 多维数组？

> ID：12574996
> 
> 赞同：1
> 
> 时间：2012-09-25T01:16:32.750
> 
> 标签：python, multidimensional-array, numpy, matplotlib

> **可能重复：**
> [在二维中扩展 numpy 数组的最简单方法是什么？](https://stackoverflow.com/questions/877479/whats-the-simplest-way-to-extend-a-numpy-array-in-2-dimensions)

作为一个 Matlab 用户切换到 python 时，我感到很沮丧，因为我不知道所有的技巧，并且在代码工作之前被困在一起。下面是一个示例，其中我有一个要添加虚拟列的矩阵。当然，还有比下面的 zip vstack zip 方法更简单的方法。它有效，但这完全是一个菜鸟尝试。请赐教。提前感谢您抽出宝贵时间阅读本教程。

```
# BEGIN CODE

from pylab import *

# Find that unlike most things in python i must build a dummy matrix to 
# add stuff in a for loop. 
H = ones((4,10-1))
print "shape(H):"
print shape(H)
print H
### enter for loop to populate dummy matrix with interesting data...
# stuff happens in the for loop, which is awesome and off topic.
### exit for loop
# more awesome stuff happens...
# Now I need a new column on H
H = zip(*vstack((zip(*H),ones(4)))) # THIS SEEMS LIKE THE DUMB WAY TO DO THIS...
print "shape(H):"
print shape(H)
print H

# in conclusion. I found a hack job solution to adding a column
# to a numpy matrix, but I'm not happy with it.
# Could someone educate me on the better way to do this?

# END CODE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T02:02:59.753

使用[np.column_stack](http://docs.scipy.org/doc/numpy/reference/generated/numpy.column_stack.html#numpy-column-stack)：

```
In [12]: import numpy as np

In [13]: H = np.ones((4,10-1))

In [14]: x = np.ones(4)

In [15]: np.column_stack((H,x))
Out[15]: 
array([[ 1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.],
       [ 1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.],
       [ 1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.],
       [ 1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.]])

In [16]: np.column_stack((H,x)).shape
Out[16]: (4, 10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:19:10.313

有几个函数可以让您[连接](http://docs.scipy.org/doc/numpy/reference/generated/numpy.concatenate.html)不同维度的数组：

*   [`np.vstack`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.vstack.html)沿着`axis=0`
*   [`np.hstack`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.hstack.html)沿着`axis=1`
*   [`np.dstack`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.dstack.html)沿着`axis=2`

在你的情况下，`np.hstack`看起来你想要什么。[`np.column_stack`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.column_stack.html)将一组 1D 数组堆叠为 2D 数组，但您已经有一个 2D 数组开始。

当然，没有什么能阻止你以艰难的方式做到这一点：

```
>>> new = np.empty((a.shape[0], a.shape[1]+1), dtype=a.dtype)
>>> new.T[:a.shape[1]] = a.T 
```

在这里，我们创建了一个带有额外列的空数组，然后使用一些技巧将第一列设置为`a`（使用转置运算符`T`，因此与...`new.T`相比有额外的行`a.T`）

# powershell - Azure 通过自动部署启用 Web 部署

> ID：12574999
> 
> 赞同：1
> 
> 时间：2012-09-25T01:17:06.187
> 
> 标签：powershell, deployment, azure, automation

有谁知道在启用“启用 Web 部署”选项的情况下将 Web 角色部署到 Azure 的自动化方法？我们有一个自动化验收测试流程，该流程使用 Web Deploy 部署到 Azure 以节省时间。但我们还希望自动化 Web 角色的完整部署，以便它可以在不那么频繁的基础上运行非工作时间。

我们目前正在使用 WAPPSCmdlets 模块来自动化完整的 Azure 部署。但是，无论是这个还是较新的官方 Azure Powershell cmdlet 似乎都没有公开一种在新部署中启用 Web 部署的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:25:56.047

您需要做的是创建一个[启动任务](http://msdn.microsoft.com/en-us/library/gg456327.aspx)，该任务执行以下操作：

1.  下载并安装[Web 部署](http://download.microsoft.com/download/1/B/3/1B3F8377-CFE1-4B40-8402-AE1FC6A0A8C3/WebDeploy_amd64_en-US.msi)
    *   [Windows Azure Bootstrapper](http://bootstrap.codeplex.com/)可以帮助您从启动任务下载和运行安装程序。
2.  使用 PowerShell 配置 Web 部署。您可能想从这篇文章开始：[用于自动化 Web 部署设置的 PowerShell 脚本](http://www.iis.net/learn/publish/using-web-deploy/powershell-scripts-for-automating-web-deploy-setup)
    *   从启动任务运行 PowerShell 一开始可能看起来很棘手。如果遇到问题，请查看这篇文章：[Azure 启动任务和 Powershell：经验教训](http://blogs.msdn.com/b/jimoneil/archive/2011/02/07/azure-startup-tasks-and-powershell-lessons-learned.aspx)

请记住，此启动任务应仅针对 CI 部署运行，而不应针对您的生产部署运行，因此这可能是您在构建过程中需要注意的事情（例如，您可以在 Visual Studio 中使用不同的云项目）。