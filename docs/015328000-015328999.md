# StackOverflow 问答 15328000-15328999

# ruby-on-rails - RoR POST 请求导致路由错误

> ID：15328001
> 
> 赞同：0
> 
> 时间：2013-03-10T21:40:24.367
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试一个基本的 API，但我处于一个十字路口，我不太确定如何进行。一般要点是，我向 /authenticate.json 提供了用户名和密码，并作为回报接收访问令牌。

如果我发出 GET 请求，我会得到我需要的信息。如果我尝试通过 POST 执行此操作，则会引发错误：

```
No route matches {:action=>"show", :controller=>"users", :id=>#<User access_token: "8922a3718bbe2a441a5ddddece3053a647941863b5ff2cad007...">} 
```

**路线.rb**

```
match '/authenticate' => 'user_functions#authenticate', :via => [:post, :get] 
```

控制器中的身份验证定义如下所示（我知道它很笨拙，我对 RoR / Ruby 不太熟悉）

```
def authenticate
if params['email'] and params['password']
  userSearch = User.find(:all, :conditions => ['email = ?', params[:email]], :limit => 1)
  if userSearch.count == 1 
    hash = Digest::SHA2.new << "#{userSearch.first.password_salt}#{params['password']}"
    if hash.hexdigest == userSearch.first.password_hash
      access_array = {"access_token" => userSearch.first.access_token}
      userAccessDetails = User.find(userSearch.first.id, :select => "access_token")
      respond_with userAccessDetails
    else
      respond_with 'Invalid credentials'
    end
  else
    respond_with 'Failed'
  end
else
  respond_with 'No credentials provided'
end 
```

结尾

如果有人能够帮助或指出我正确的方向，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:45:06.113

问题是您传递的用户对象没有 id 。在您的查询中，您只需选择访问令牌。

尝试也选择 id ：

userAccessDetails = User.find(userSearch.first.id, :select => "access_token, id")

# c++ - c++ 从类外部调用方法

> ID：15328006
> 
> 赞同：1
> 
> 时间：2013-03-10T21:40:54.463
> 
> 标签：c++, oop, class, methods

好的，我将我的问题简化为看起来非常愚蠢的问题，但我根本无法理解为什么会这样：

```
#include <iostream>
class ABC{
public:
    void Print() { std::cout<<"ABC_TEST!\n"; }
};

int main(){
    Print();
    return 0;
} 
```

给我：错误：标识符“打印”未定义提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T21:42:51.247

它应该是这样的：

```
#include <iostream>
class ABC{
public:
    void Print() { std::cout<<"ABC_TEST!\n"; }
};

int main(){
    ABC abc;
    abc.Print();
    return 0;
} 
```

您需要先创建一个类型的对象，`ABC`然后才能调用实例方法（或非静态的成员函数）

或者，`Print()`可以是静态函数，您将能够使用`::`操作员调用它。

```
class ABC {
   public:
     static void Print() { std::cout << "ABC_TEST\n"; }
};

int main()
{
   ABC::Print();
   return 0;
} 
```

最重要的是，`Print()`也可以是一个全局函数：

```
void Print()
{
   std::cout << "ABC_TEST\n" ;
}

int main()
{
   Print();
   return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T21:42:10.937

`Print()`是 的成员函数`ABC`，因此您只能在 的实例上调用它`ABC`：

```
ABC abc;
abc.Print(); 
```

作为一个完全不相关的注释，在 C++`0`中隐含了一个带值的返回，所以没有必要写`return 0`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T21:42:18.803

`Print()`是您的 ABC 类的*成员函数*，您需要一个对象来调用它：

```
int main()
{
    ABC abc; // This creates an instance of ABC

    abc.Print();
//  ^^^^
//  This invokes member function `Print()` on the object abc.

    return 0;
} 
```

的地址`abc`将作为隐式第一个参数传递给 function `Print()`：该参数将在内部`Print()`（更一般地，在调用的成员函数内部）作为`this`指针访问。

如果您尝试将`Print()`其作为非成员自由函数调用，则不会`this`传递任何隐式指针，编译器抱怨它是有道理的。

如果您希望能够以`Print()`您的方式调用，您应该将其设为非成员函数：

```
void Print() { std::cout<<"ABC_TEST!\n"; }

int main()
{
    Print(); // This is fine now!
} 
```

# java - nextLine 如何与扫描仪配合使用？

> ID：15328007
> 
> 赞同：0
> 
> 时间：2013-03-10T21:41:02.837
> 
> 标签：java, split

我试图通过使用空格作为分隔符将“sisestus”拆分为不同的单词，但是仅使用 sc.next() 不允许我输入带空格的字符串，所以我读到我应该使用 .nextLine()，但它根本不起作用。我该如何解决？

```
public class Sisestamine {
int read;
int veerud;
double Maatriks[][];
java.util.Scanner sc = new java.util.Scanner(System.in);

Sisestamine() {
    System.out.println("Enter matrix dimensions (format NxM)");

    String[] abi = sc.next().split("x");
    this.read = Integer.parseInt(abi[0]);
    this.veerud = Integer.parseInt(abi[1]);
    this.Maatriks = new double[read][veerud];

    System.out.println("Enter the matrix: (x x x x etc..)");
    for (int i = 0; i < read; i++) {
        String sisestus = sc.next();
                  //String sisestus = sc.nextLine(); 
        abi = sisestus.split(" "); 
        System.out.print(abi);
        for (int j = 0; j < abi.length; j++) {
            this.Maatriks[i][j] = Double.parseDouble(abi[j]);
        }
     }
   }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:47:24.007

您的问题可能是因为您在`sc.next()`程序的某个部分使用，然后在`sc.nextLine()`稍后使用，第二次调用吞下了从先前调用`next()`. 一种解决方案是`sc.nextLine()`用于所有调用。换句话说，将*所有* `sc.next()`更改为`sc.nextLine()`.

# ios - ios - 归档新应用时出错。代码符号错误：没有未过期

> ID：15328021
> 
> 赞同：0
> 
> 时间：2013-03-10T21:42:27.497
> 
> 标签：ios, ios6

存档时出现此错误：

```
Code Sign error: No unexpired provisioning profiles found that contain any of the keychain's signing certificates 
```

我确实有一个我以前用过的证书。我正在尝试重用它，但不知道如何。我不确定这是否是问题所在。我确保 xCode 和 ios 开发人员门户中的 AppId 相同。

但是我没有为新应用程序创建配置或分发证书，因为我想使用以前应用程序中的现有证书。我混淆了一些概念吗？可能我混淆了钥匙串访问密钥和配置+分发文件的角色。

如果有人能指出解决方法，那就太好了。

谢谢你。

# python-3.x - 运行多个类时的 PyQt4 错误

> ID：15328026
> 
> 赞同：1
> 
> 时间：2013-03-10T21:42:51.620
> 
> 标签：python-3.x, pyqt4

好吧，也许这不是一个错误，但我无法让它工作。假设你必须使用 PyQt4 的类。一个叫做 Audio.py 并使用 Phonon 播放声音文件。另一个叫做 GUI.py 并使用 QtGui 来显示一个屏幕。GUI 需要能够随时调用和使用 Audio.py（导入音频）。它将导入并将调用发送到我的音频类，但因为音频没有启动（双击运行）它没有代码（app=QApplication（sys.argv）；sys.exit（app.exec_（）））。所以当Audio类在运行时运行，当你导入它时，它不会播放声音，因为它自己的QApplication循环还没有启动。

有什么帮助吗？

编辑：添加类引擎这些是2个单独的python文件（.py）

导入库、播放器、系统

从 PyQt4.QtGui 导入 QApplication

类引擎（对象）：

```
def __init__(self,path,song=None):
    self.counter=0
    self.path=path
    self.lib=Library.Library(self.path)
    if song is None:
        self.player=Player.Player(self.lib.getSong(self.counter))
    else:
        self.player=Player.Player(path+song)

def updatePlayer(self,songStatus):
    self.player.findStatus(songStatus)

def getCurrentSong(self):
    return self.lib.getSong(self.counter) 
```

如果**__*名称*__** ==' **__*主要*__** '：

```
app=QApplication(sys.argv)
e=Engine('D:/Music/','Yeah!.mp3')
e.updatePlayer('Play')
sys.exit(app.exec_()) 
```

导入系统

从 PyQt4.QtGui 导入 QApplication

从 PyQt4.QtCore 导入 QObject

从 PyQt4.phonon 导入 Phonon

类播放器（QObject）：

```
def __init__(self,song):
    super(QObject,self).__init__()
    self.song=song
    self.media=None

    #self.metaInfo=Phonon.MediaObject(self)
    #self.metaInfo.currentSourceChanged.connect(self.disMetaData)

    self.initMedia()
    self.findStatus()

def initMedia(self):
    if not self.media:
        self.media=Phonon.MediaObject()
        audioOutput=Phonon.AudioOutput(Phonon.MusicCategory,self)
        Phonon.createPath(self.media,audioOutput)
    self.media.setCurrentSource(Phonon.MediaSource(self.song))

def findStatus(self,status=None):
    if status is not None:
        if status=='Play':
            self.playSong()
            return

        if status=='Stop':
            self.stopSong()
            return

        if status=='Pause':
            self.pauseSong()
            return

        if status=='Next':
            nextSong()
            return

        if status=='Previous':
            self.previousSong()
            return

def playSong(self):
    self.media.play()

def stopSong(self):
    self.media.stop()

def pauseSong(self):
    self.media.pause()

def nextSong(self):
    '''nextSong code'''

def previousSong(self):
    '''previousSong code''' 
```

如果**__*名称*__** ==' **__*主要*__** '：

```
app=QApplication(sys.argv)
p=Player('D:/Music/Yeah!.mp3')
p.findStatus('Play')
sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:08:51.190

为了确保在事件循环已经运行时执行操作，请使用[`QTimer::singleShot`](http://qt-project.org/doc/qt-4.8/qtimer.html#singleShot)：

```
QtCore.QTimer.singleShot(0, some_function) 
```

# sql - 在 SQL 查询 (DB2) 中，如何在另一个字段中找到字段值？

> ID：15328029
> 
> 赞同：1
> 
> 时间：2013-03-10T21:43:03.273
> 
> 标签：sql, db2

在 SQL 查询 (DB2) 中，如何在另一个字段中找到字段值？例如，Field01 包含部件号“1234”。Field02 包含“这是我要保留的 1234”

如何在 Field02 中查找或搜索 Field01 的值？

我已经尝试过 LOCATE 和 LIKE 以及 % % 和 Position 但似乎无法得到它。

只要Field02在Field02的开头，我就可以在Field02中找到Field01，但如果它是由其他字符进行的，则不能。这是我为此使用的命令：

```
CASE 
    WHEN LEFT ( TRIM ( FIELD02), CHARACTER_LENGTH ( TRIM ( FIELD01 ) ) ) =  
     TRIM ( WMCPIL ) THEN TRIM ( FIELD02) 
 ELSE '^' 
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:36:39.043

该`LOCATE`功能应该工作：

```
SELECT *
FROM table_name
WHERE LOCATE(field01,field02) <> 0 
```

您的问题表明您已经尝试过`LOCATE`；如果它不起作用，请解释。

[这](http://pic.dhe.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2.doc.sqlref/flocate.htm)是一个文档参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T22:23:14.893

您可以通过`LIKE`以下方式使用：

```
SELECT *
FROM mytable
WHERE field2 LIKE '%' || field1 || '%' 
```

[SQLFiddle 演示](http://www.sqlfiddle.com/#!1/c14d2/1)（使用 PostgreSQL 作为 SQLFiddle 尚不支持 DB2，但此示例也应该适用于 DB2）。

DB2 更喜欢使用`CONCAT`来连接字符串，但它也支持标准`||`作为同义词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T06:05:19.417

效果不错，试试

SELECT * FROM TAB1 WHERE POSITION(field1,field2,CODEUNITS16)<>0

# android - Android ListView 上的跨度图像

> ID：15328030
> 
> 赞同：0
> 
> 时间：2013-03-10T21:43:13.790
> 
> 标签：android, html, image, listview, android-asynctask

我正在尝试使用图像转换 HTML 文本`Html.fromHtml`并将其设置在 ListView 中，但图像显示为正方形！我已经实现了一个 imageGetter 并且我设置了

> StrictMode.ThreadPolicy 策略 = new StrictMode.ThreadPolicy.Builder().permitAll().build(); StrictMode.setThreadPolicy(policy);

避免`android.os.NetworkOnMainThreadException`

这是我的代码：

```
private class MyTask extends AsyncTask<Void, Void, Void>{

@Override
protected Void doInBackground(Void... arg0) {
try {
URL rssUrl = new URL(link);
SAXParserFactory mySAXParserFactory = SAXParserFactory.newInstance();
                SAXParser mySAXParser = mySAXParserFactory.newSAXParser();
                XMLReader myXMLReader = mySAXParser.getXMLReader();
                RSSHandler myRSSHandler = new RSSHandler();
                myXMLReader.setContentHandler(myRSSHandler);
                InputSource myInputSource = new InputSource(rssUrl.openStream());
myXMLReader.parse(myInputSource);

myRssFeed = myRSSHandler.getFeed(); 
            } catch (MalformedURLException e) {
                e.printStackTrace();    
            } catch (ParserConfigurationException e) {
                e.printStackTrace();    
            } catch (SAXException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();    
            }

            return null;
        }

@Override
protected void onPostExecute(Void result) {
            if (myRssFeed!=null)
            {

                List<Map<String, String>> data = new ArrayList<Map<String, String>>();
                for (RSSItem item : myRssFeed.getList()) {
                    Spanned span = Html.fromHtml(item.getDescription().toString(), getImageHTML(), null);           
                    Map<String, String> datum = new HashMap<String, String>(0);
                    datum.put("title", item.getTitle());
                    datum.put("desc", span.toString());
                    data.add(datum);

                }
                SimpleAdapter adapter2 = new SimpleAdapter(getApplicationContext(), data, R.layout.listview, new String[] {"title", "desc"}, new int[] {R.id.text1,
                    R.id.text2});

                setListAdapter(adapter2); 
```

这是 ImageGetter：

```
public ImageGetter getImageHTML(){
        ImageGetter ig = new ImageGetter(){
            public Drawable getDrawable(String source) {
                StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build(); StrictMode.setThreadPolicy(policy);
             try{
              Drawable d = Drawable.createFromStream(new URL(source).openStream(), "src name");
              d.setBounds(0, 0, d.getIntrinsicWidth(),d.getIntrinsicHeight());
              return d;
             }catch(IOException e){
              Log.v("IOException",e.getMessage());
              return null;
             }
            }
           };
       return ig;
   } 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T03:53:27.497

我不确定 myRssFeed.getList() 或 item.getDescription() 是否执行任何网络操作（只是猜测），只需尝试在 doInBackground 方法中添加您的 for 循环逻辑。

```
 List<Map<String, String>> data = new ArrayList<Map<String, String>>();
            for (RSSItem item : myRssFeed.getList()) {
                Spanned span = Html.fromHtml(item.getDescription().toString(), getImageHTML(), null);           
                Map<String, String> datum = new HashMap<String, String>(0);
                datum.put("title", item.getTitle());
                datum.put("desc", span.toString());
                data.add(datum);

            }
            adapter2 = new SimpleAdapter(getApplicationContext(), data, R.layout.listview, new String[] {"title", "desc"}, new int[] {R.id.text1,
                R.id.text2}); 
```

在 MyTask 中将 SimpleAdapter 适配器 2 声明为全局变量并将上面的代码片段移动到 doInBackground 方法

# arrays - 返回数组中给定窗口大小内的重复项？

> ID：15328032
> 
> 赞同：1
> 
> 时间：2013-03-10T21:43:15.637
> 
> 标签：arrays, algorithm, data-structures

我看到了这个问题，但由于时间和空间的限制，我不知道如何做第二部分：

给定一个值数组，设计并编写一个算法，该算法返回在彼此的 k 个索引内是否有两个重复项？k个索引并且在彼此的正负l（值）之内？在 O(n) 运行时间和 O(k) 空间内完成所有工作，即使是后者。

如果不查看 k 和 a[i] 之间索引差异的所有值，我似乎不可能知道在值的窗口大小内是否存在给定值的副本，但由于 a[i] 可能很大，我认为这将需要 O(n^2)。可以在 O(n) 中完成吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-10T23:16:54.947

这听起来有点像家庭作业。是的，它可以在 O(n) 时间和 O(k) 空间内完成。提示：您需要两个数据结构，其中一个是哈希映射。

# java - Using jOrtho spell checker

> ID：15328033
> 
> 赞同：2
> 
> 时间：2013-03-10T21:43:20.640
> 
> 标签：java, spell-checking

How to use jOrtho spell checker? I have downloaded the latest dictionary (XML file) from wiktionary. Now how to compile it and implement it in my program?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:28:27.063

I found the solution and these are the steps to add spell checking functionality. First download the jar and pre-compiled dictionary form here: [http://sourceforge.net/projects/jortho/files/](http://sourceforge.net/projects/jortho/files/)

Following is the code snippet:

```
 SpellChecker.setUserDictionaryProvider(new FileUserDictionary());      
    SpellChecker.registerDictionaries(this.getClass().getResource("/dictionary"), "en");
    SpellChecker.register(messageWriter); 
```

Here, messageWriter is JEditor pane. Refer to documentation explanation. Put the dictionaries.cnf and dictionary_en.ortho files inside src/dictionary folder.

You can also manipulate the pop-up menu options. Here is an example what I have done:

```
 SpellCheckerOptions sco=new SpellCheckerOptions();
    sco.setCaseSensitive(true);
    sco.setSuggestionsLimitMenu(10);
    JPopupMenu popup = SpellChecker.createCheckerPopup(sco);
    messageWriter.addMouseListener(new PopupListener(popup)); 
```

Restricting the options to 10\. See docs.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T21:57:27.667

First, you have to download the library. [http://sourceforge.net/projects/jortho/files/JOrtho%20Library/0.5/](http://sourceforge.net/projects/jortho/files/JOrtho%20Library/0.5/) Their zip file should include one or more .jar files. You will need to add these into your classpath. The way you do this depends on how you do your development. If you're using Netbeans, it's different than the way you would do it in Eclipse.

If their zip file includes documentation for their API, you should be able to use that to add it to you Java program. If it does not, you might need to look for an alternative. It looks like the links on their site are dead. Which is usually a bad sign.

There are alternatives. It didn't take me long to find this one [http://jazzy.sourceforge.net/](http://jazzy.sourceforge.net/) for example. It looks like it's the one used by Lucene internally. It also has a better license than jortho does.

Good luck.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-19T16:10:17.377

for use in app whiout gui:

```
public class Checker {

private static Map<String, Method> methods;

public static void main(String[] args) throws NoSuchMethodException, ClassNotFoundException, InvocationTargetException, IllegalAccessException {
    SpellChecker.registerDictionaries(Checker.class.getResource("/dictionary/"), "en");

    methods = new HashMap<>();

    setAccessibleMethod(LanguageBundle.class, "get", Locale.class);
    setAccessibleMethod(LanguageBundle.class,
            "existInDictionary",
            String.class,
            Checker.class.getClassLoader().loadClass("com.inet.jortho.Dictionary"),
            com.inet.jortho.SpellCheckerOptions.class,
            boolean.class
    );
    setAccessibleMethod(SpellChecker.class, "getCurrentDictionary");

    while (SpellChecker.getCurrentLocale() == null) {
        try {
            Thread.sleep(10);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
    Object dictionary = invokeMethod(SpellChecker.class, "getCurrentDictionary", null);

    LanguageBundle bundle = (LanguageBundle) invokeMethod(LanguageBundle.class, "get", null, SpellChecker.getCurrentLocale());

    Set<String> errors = new HashSet<>();
    StringTokenizer st = new StringTokenizer("A sentence with a error in the Hitchhiker's Guide tot he Galaxy");
    boolean newSentence = true;
    while (st.hasMoreTokens()) {
        String word = st.nextToken();
        boolean b = true;
        boolean nextNewSentence = false;
        if (word.length() > 1) {
            if ('.' == word.charAt(word.length() - 1)) {
                nextNewSentence = true;
                word = word.substring(0, word.length() - 1);
            }
            b = (Boolean) invokeMethod(LanguageBundle.class, "existInDictionary", bundle,
                    word,
                    dictionary,
                    SpellChecker.getOptions(),
                    newSentence);
        }
        if (!b)
            errors.add(word);
        newSentence = nextNewSentence;
    }
    System.out.println(StringUtils.join(errors, " , "));
}

private static void setAccessibleMethod(Class<?> cls, String name, Class<?>... parameterTypes) throws NoSuchMethodException {
    Method method = cls.getDeclaredMethod(name, parameterTypes);
    method.setAccessible(true);
    methods.put(cls.getName() + "." + name, method);
}

private static Object invokeMethod(Class<?> cls, String name, Object obj, Object... args) throws InvocationTargetException, IllegalAccessException {
    return methods.get(cls.getName() + "." + name).invoke(obj, args);
}

} 
```

# ruby-on-rails - 独角兽和 nginx 错误

> ID：15328036
> 
> 赞同：2
> 
> 时间：2013-03-10T21:43:26.380
> 
> 标签：ruby-on-rails, nginx, unicorn, vagrant

```
vagrant@lucid32:/vagrant$ bundle exec unicorn_rails -c config/unicorn.rb -D -d
{:unicorn_options=>{:listeners=>[], :config_file=>"config/unicorn.rb"},
 :app=>
  #<Proc:0xa1a6ef4@/home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/bin/unicorn_rails:135 (lambda)>,
 :daemonize=>true}
Exception `Errno::EEXIST' at /home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/1.9.1/fileutils.rb:247 - File exists - tmp/cache
Exception `Errno::EEXIST' at /home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/1.9.1/fileutils.rb:247 - File exists - tmp/pids
Exception `Errno::EEXIST' at /home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/1.9.1/fileutils.rb:247 - File exists - tmp/sessions
Exception `Errno::EEXIST' at /home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/1.9.1/fileutils.rb:247 - File exists - tmp/sockets
Exception `EOFError' at /home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/lib/unicorn/launcher.rb:46 - end of file reached
master failed to start, check stderr log for details 
```

不幸的是，我不知道如何检查 stderr 日志并且找不到任何相关信息。

这是配置文件：

```
working_directory "/vagrant"
pid "/vagrant/tmp/pids/unicorn.pid"
stderr_path "/vagrant/log/unicorn.log"
stdout_path "/vagrant/log/unicorn.log"

listen "/tmp/unicorn.todo.sock"
worker_processes 2
timeout 30 
```

这是 nginx.conf 文件

```
upstream unicorn {
  server unix:/tmp/unicorn.todo.sock fail_timeout=0;
}

server {
  listen 80 default;
  # server_name example.com;
  root /vagrant/public;
  try_files $uri/index.html $uri @unicorn;
  location @unicorn {
      proxy_pass  http://unicorn;
  }

  error_page 500 502 503 504 /500.html;
} 
```

现在的问题是没有创建 /tmp 目录。所以我创建了它，我得到了同样的错误，然后我删除了它，我得到了同样的错误。现在我陷入了无限循环。

我将不胜感激有关 ho 的任何帮助以使这项工作或至少如何阅读错误日志。

编辑：我能够找到标准错误文件：

```
/home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:207:in `rename': Text file busy - (/vagrant/tmp/pids/0.2278780536507904.2128, /vagrant/tmp/pids/unicorn.pid) (Errno::ETXTBSY)
        from /home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:207:in `pid='
        from /home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:137:in `start'
        from /home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/bin/unicorn:126:in `<top (required)>'
        from /home/vagrant/.rbenv/versions/1.9.3-p392/bin/unicorn:23:in `load'
        from /home/vagrant/.rbenv/versions/1.9.3-p392/bin/unicorn:23:in `<main>'
/home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:207:in `rename': Text file busy - (/vagrant/tmp/pids/0.8313958669768073.2187, /vagrant/tmp/pids/unicorn.pid) (Errno::ETXTBSY)
        from /home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:207:in `pid='
        from /home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:137:in `start'
        from /home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/bin/unicorn:126:in `<top (required)>'
        from /home/vagrant/.rbenv/versions/1.9.3-p392/bin/unicorn:23:in `load'
        from /home/vagrant/.rbenv/versions/1.9.3-p392/bin/unicorn:23:in `<main>'
/home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:207:in `rename': Text file busy - (/vagrant/tmp/pids/0.9130633695817217.2190, /vagrant/tmp/pids/unicorn.pid) (Errno::ETXTBSY)
        from /home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:207:in `pid='
        from /home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:137:in `start'
        from /home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/bin/unicorn:126:in `<top (required)>'
        from /home/vagrant/.rbenv/versions/1.9.3-p392/bin/unicorn:23:in `load'
        from /home/vagrant/.rbenv/versions/1.9.3-p392/bin/unicorn:23:in `<main>'
Exception `Errno::ENOENT' at /home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:683 - No such file or directory - /vagrant/tmp/pids/unicorn.pid
Exception `Errno::ETXTBSY' at /home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:207 - Text file busy - (/vagrant/tmp/pids/0.59100125503182.2237, /vagrant/tmp/pids/unicorn.pid)
/home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:207:in `rename': Text file busy - (/vagrant/tmp/pids/0.59100125503182.2237, /vagrant/tmp/pids/unicorn.pid) (Errno::ETXTBSY)
        from /home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:207:in `pid='
        from /home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:137:in `start'
        from /home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/bin/unicorn:126:in `<top (required)>'
        from /home/vagrant/.rbenv/versions/1.9.3-p392/bin/unicorn:23:in `load'
        from /home/vagrant/.rbenv/versions/1.9.3-p392/bin/unicorn:23:in `<main>'
/home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:207:in `rename': Text file busy - (/vagrant/tmp/pids/0.4331021743697998.2271, /vagrant/tmp/pids/unicorn.pid) (Errno::ETXTBSY)
        from /home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:207:in `pid='
        from /home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:137:in `start'
        from /home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/bin/unicorn:126:in `<top (required)>'
        from /home/vagrant/.rbenv/versions/1.9.3-p392/bin/unicorn:23:in `load'
        from /home/vagrant/.rbenv/versions/1.9.3-p392/bin/unicorn:23:in `<main>'
Exception `Errno::ENOENT' at /home/vagrant/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:683 - No such file or directory - /vagrant/tmp/pids/unicorn.pid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T19:35:21.120

Unicorn process is running in background(-d), type below command on teminal

```
ps aux | grep unicorn 
```

and kill running unicorn process then start unicorn again.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-18T18:35:12.270

我遇到了同样的问题（`Text file busy`错误），也是从 Vagrant VM 运行的。@destiel 的评论帮助我解决了这个问题：显然这是由运行`rails`和`unicorn`来自 Vagrant 共享文件夹引起的。复制到虚拟驱动器后，它工作正常。我在 Windows 8 主机上运行，​​以防万一。

# export - 将 VCF 图像导出为 JPEG

> ID：15328037
> 
> 赞同：14
> 
> 时间：2013-03-10T21:43:33.857
> 
> 标签：export, jpeg, vcf-vcard

我用 iPhone 创建了一个 .vcf 联系人，并通过电子邮件将文件发送给我自己。在那个.vcf中，我拍了一张照片，它直接保存在vCard中，而不是手机内存中。

在 .vcf 的源代码中，有一段这样开头的代码：

```
PHOTO;ENCODING=b;TYPE=JPEG:/9j/4AAQSkZJRgABAQAAAQABAAD/4QBYRXhpZgAATU0AKgAA 
```

它还在继续……现在，我想获取这张照片并将其保存为 .JPEG。任何想法如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-08-20T22:30:46.873

在 macOS 中，很容易从带有“vi”和“base64.

例如，

导出“Apple Inc.” 每个用户帐户附带的联系人。

1.  使用 vi 手动删除其他行。
2.  删除该行的标题和元数据

> 照片；编码=b；类型=JPEG：

3.  base64解码剩余文件

> # base64 -D -i Apple\ Inc..vcf -o Apple_Logo.jpeg

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-08T16:35:03.010

编码是[Base64](http://en.wikipedia.org/wiki/Base64)。你可以在网上找到一个解码工具。

我可以推荐[Freeformatter.com](http://www.freeformatter.com/base64-encoder.html)的解码器，它可以让你保存为二进制文件。然后，您需要将该文件重命名为`photo.jpg`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-11T09:36:12.777

您应该使用 vCard 解析器（如[vpim](https://github.com/xing/vpim)），它提供了[从 vCard 中提取照片数据](https://github.com/xing/vpim/blob/master/samples/ex_get_vcard_photo.rb)的能力。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T13:03:44.877

另一个 vCard 解析器是[ez-vcard](https://github.com/mangstadt/ez-vcard)，它是用 Java 编写的（免责声明：我是作者）。

```
File file = new File("vcard.vcf");
VCard vcard = Ezvcard.parse(file).first();
for (PhotoType photo : vcard.getPhotos()){
  byte data[] = photo.getData();
  //save byte array to file
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-07T09:47:05.793

因为这不是[https://apple.stackexchange.com/](https://apple.stackexchange.com/)我会建议一个快速的 bash 脚本，我用它来在命令行上从 .vcf 文件中提取图像：

```
#!/bin/bash
#vcf_photo_extractor ver 20180207094631 Copyright 2018 alexx, MIT Licence
if [ ! -f "$1" ]; then
  echo "Usage: $(basename $0) [path/]any/contact.vcf"
  exit 1
fi

DATA=$(cat "$1" |tr -d "\r\n"|sed -e 's/.*TYPE=//' -e 's/END:VCARD.*//')
NAME=$(grep -a '^N;' $1|sed -e 's/.*://')
#if [ $(wc -c <<< $DATA) -lt 5 ];then #bashism
if [ $(echo $DATA|wc -c) -lt 5 ];then
  echo "No images found in $1"
  exit 2
fi
EXT=${DATA%%:*}
if [ "$EXT" == 'BEGIN' ]; then echo "FAILED to extract $EXT"; exit 3; fi
IMG=${DATA#*:}
FILE=${1%.*}
Fn=${FILE##*/}
if [ -f "${FILE}.${EXT}" ]; then
  echo "Overwrite ${FILE}.${EXT} ? "
  read -r YN
  if [ "$YN" != 'y' ]; then exit; fi
fi
echo $IMG | base64 -id > ${FILE}.${EXT} || \
  echo "Failed to output $NAME to ${FILE}.${EXT}" 
```

此脚本尝试提取 base64 数据，使用 base64 对其进行解码并创建图像文件。我发现在 linux 上可以正常`base64 -id`工作但`base64 -d`抛出错误。

如果您是单行代码或代码高尔夫的粉丝，那么这可能会起作用：

```
cat 1.vcf|tr -d "\n"|sed -e 's/.*TYPE=[^:]*://' -e 's/END:V.*//'|base64 -id >1.jpg 
```

如果您想要更清洁的东西，那么 Matt Brock 的 [vCard_photo_extractor.sh](https://raw.githubusercontent.com/mattbrock/mattbrock/master/vCard_photo_extractor/vCard_photo_extractor.sh)可能就是您要找的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-03T21:52:30.150

[将http://www.sobolsoft.com/convertvcfjpg/](http://www.sobolsoft.com/convertvcfjpg/)与 OSX 的 vCard 一起使用，成功。

# asp.net - Application_Start 发生后如何动态添加捆绑包？

> ID：15328040
> 
> 赞同：7
> 
> 时间：2013-03-10T21:44:04.350
> 
> 标签：asp.net, asp.net-mvc-4, bundling-and-minification, asp.net-optimization

我有一个使用样式捆绑主题的 asp.net MVC4 Web 应用程序。我有一个像这样的物理主题文件夹结构......

```
 Themes\
     _Base\
     Theme1\
     Theme2\
     ...\ 
```

每个主题文件夹中都有任意数量的 LESS 文件。在我的`BundleConfig.RegisterBundles`方法中，我有一些逻辑循环遍历每个主题文件夹并为每个主题文件夹创建一个包。System.Web.Optimization 的捆绑机制将监视*现有*捆绑包中的文件和文件夹中的更改并刷新捆绑包缓存，这可以正常工作。

但是，我需要一种将新主题文件夹（即`Theme3\`）复制到我的`Themes`根文件夹中的方法，并且应用程序可以识别这些文件夹而无需先重新启动它。我尝试创建一个“虚拟”包，它引用每个文件夹中的所有文件......

```
var changeTracking = new StyleBundle(BUNDLE_ROOT);
changeTracking.Transforms.Clear();
changeTracking.IncludeDirectory(THEME_ROOT, "*.less", true);
changeTracking.Transforms.Add(new LessTransform());
changeTracking.Transforms.Add(new CssMinify());
bundles.Add(changeTracking); 
```

...但这似乎没有帮助。当我 make`Theme3\`时，它​​不会触发另一个调用`BundleConfig.RegisterBundles`. 我还是要做一个IISRESET，回收应用程序池等等，才能让新的主题被识别。

有什么方法可以在 Application_Start 发生后动态添加捆绑包？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T04:02:16.487

这不是我们明确试图支持的东西，期望是所有捆绑包都在应用程序启动之前注册。否则，这将在 webfarm 场景中导致问题，其中某些捆绑包不存在于所有服务器上，这将导致 404。

捆绑缓存依赖项将负责从 ASP.NET 缓存中刷新旧响应，但它不会触发对 RegisterBundles 的另一个调用，该调用是从您的 global.asax 调用的，并且只会在您提到的应用程序回收期间调用.

# javascript - 使用 JavaScript Image 对象更改图像

> ID：15328044
> 
> 赞同：9
> 
> 时间：2013-03-10T21:44:37.623
> 
> 标签：javascript, jquery

我有一个使用 jQuery 动态加载的 JavaScript [Image 对象。](http://www.w3schools.com/jsref/dom_obj_image.asp)

我想要做的是`<img />`用存储在我的`Image`对象上的图像来更改图像。我该怎么做？

注意：我想避免更改`<img />`标签的来源，因为它会从服务器再次下载它，并且我已经将图像存储在我的图像对象中

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T21:48:51.237

你的意思是

```
$('#imageToChange').replaceWith(imageObject) 
```

?

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T21:55:15.267

新图像对象：

```
var Image_off = new Image();
Image_off.src = 'first.jpg'; 
```

图像 src 用 jQuery 改变：

```
$("#my_image").attr("src",Image_off.src); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T21:57:04.490

使用 jQuery... 将两个图像都放在您的页面上，并根据逻辑条件显示或隐藏其中一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T21:48:01.683

在javascript内存中制作新图像，然后将其附加到原始图像之后，然后删除原始图像。您可能还希望在删除之前缓存原件，以防您想重新使用它。

html

```
<img id="replace" /> 
```

js

```
var img = new Image();
img.src = "someUri.png";
$("#replace").after(img);
$("#replace").remove(); 
```

# java - 在类中添加成员后，JPA 崩溃并出现 SQLSyntaxErrorException。如何删除旧班级的痕迹？

> ID：15328045
> 
> 赞同：0
> 
> 时间：2013-03-10T21:44:38.723
> 
> 标签：java, jpa, netbeans, persistence, eclipselink

我在 Netbeans 中创建了这个项目，这是我知道访问其中任何一个的唯一方法。我似乎无法找到存储我的对象的数据库，以便我可以删除它们。事实上，我最好在每次重新启动 glassfish 时简单地删除所有内容。我了解更改课程会导致此类问题，但我不知道如何删除有关旧版本课程的信息。到目前为止，我一直试图通过在每次更改类名时重构类名来解决这个问题，但我已经用完了有创意的名称。

例外：

```
javax.servlet.ServletException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLSyntaxErrorException: Column 'CURRENTDAY' is either not in any table in the FROM list or appears within a join specification and is outside the scope of the join specification or appears in a HAVING clause and is not in the GROUP BY list. If this is a CREATE or ALTER TABLE  statement then 'CURRENTDAY' is not a column in the target table.
Error Code: -1
Call: SELECT ID, CURRENTDAY, INTERNAL_TIME_M, LASTTIME_M FROM FASTINTERNALCLOCK WHERE (ID = ?)
    bind => [1 parameter bound]
Query: ReadObjectQuery(name="readObject" referenceClass=FastInternalClock sql="SELECT ID, CURRENTDAY, INTERNAL_TIME_M, LASTTIME_M FROM FASTINTERNALCLOCK WHERE (ID = ?)") 
```

我所做的是 FASTINTERNALCLOCK 类的新 CURRENTDAY 成员不在它正在寻找的表中，可能是因为它正在基于该成员尚未存在的旧版本的类的表中查找。我怎样才能删除这个表，以便可以在考虑新成员的情况下重新创建它？

持久性.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="webThermosPU" transaction-type="JTA">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <jta-data-source>jdbc/__default</jta-data-source>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
      <property name="eclipselink.ddl-generation" value="create-tables"/>
    </properties>
  </persistence-unit>
</persistence> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:46:28.013

您的 SQL 安装应该附带一个 WorkBench 程序，您可以使用它来访问您的数据库，并在需要时从中删除表和/或行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:41:06.630

尝试使用值“drop-and-create-tables”来删除 DDL 并在部署时创建表。Glashfish 在嵌入式 derby 数据库上设置默认 __datasource，如下所述[http://docs.oracle.com/cd/E18930_01/html/821-2424/gksmw.html](http://docs.oracle.com/cd/E18930_01/html/821-2424/gksmw.html)

# android - 带有按钮强制关闭的 Android 表格布局 - eclipse 中没有错误 - 为什么？

> ID：15328047
> 
> 赞同：0
> 
> 时间：2013-03-10T21:44:44.990
> 
> 标签：android

我创建了一个新项目，唯一更改的是 activity_main.xml 文件。我将 RelativeLayout 更改为 LinearLayout 并设置 android:orientation="vertical"，然后在此布局中添加以下组件：

```
<LinearLayout android:orientation="horizontal"
    android:layout_height="wrap_content" 
    android:layout_width="fill_parent">
    <Button android:id="@+id/b00"
        android:text="X"></Button>
    <Button android:id="@+id/b01"
        android:text="X"></Button>
    <Button android:id="@+id/b02"
        android:text="X"></Button>
</LinearLayout>
<LinearLayout android:orientation="horizontal"
    android:layout_height="wrap_content" 
    android:layout_width="fill_parent">
    <Button android:id="@+id/b10"
        android:text="X"></Button>
    <Button android:id="@+id/b11"
        android:text="X"></Button>
    <Button android:id="@+id/b12"
        android:text="X"></Button>
</LinearLayout>
<LinearLayout android:orientation="horizontal"
    android:layout_height="wrap_content" 
    android:layout_width="fill_parent">
    <Button android:id="@+id/b20"
        android:text="X"></Button>
    <Button android:id="@+id/b21"
        android:text="X"></Button>
    <Button android:id="@+id/b22"
        android:text="X"></Button>
</LinearLayout> 
```

在测试这个应用程序时，什么都没有显示（没有按钮或任何东西）。它像这样运行几秒钟，然后强制关闭。请帮忙！

编辑：这就是 logcat 所说的......

```
03-10 18:10:02.190: I/dalvikvm(25796): threadid=4: reacting to signal 3
03-10 18:10:02.200: I/dalvikvm(25796): Wrote stack traces to '/data/anr/traces.txt'
03-10 18:10:06.720: I/Process(25796): Sending signal. PID: 25796 SIG: 9 
```

我找不到 /data/anr/traces.txt。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T23:10:47.507

您需要将`android:layout_width`和`android:layout_height`属性添加到您的布局 XML 实体中。例如：

改变：

```
<Button
    android:id="@+id/b00"
    android:text="X">
</Button> 
```

到：

```
<Button
    android:id="@+id/b00"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="X">
</Button> 
```

# iphone - 在没有 Apple Dev Account 或越狱的情况下测试 iPhone 应用程序

> ID：15328049
> 
> 赞同：0
> 
> 时间：2013-03-10T21:44:47.050
> 
> 标签：iphone, xcode

我做了一个小应用程序，我想在我的 iPhone 5 上进行测试。问题是我不能为苹果支付 100 美元，或者因为它是 iPhone 5，所以我无法越狱。我真的需要测试一下，有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T21:53:04.193

iPhone 只会执行由 Apple 授权的私钥加密签名的二进制代码。

获得加密密钥授权的唯一方法是每年支付 100 美元并同意他们的开发者合同。

您可以在任何现代 Mac 上的 iOS 模拟器中运行该应用程序，无需签名也无需支付任何费用。只需安装 Xcode，选择“iPhone Simulator”作为目标，然后单击“运行”按钮。

如果您能找到拥有开发者帐户的朋友，他们可能愿意使用他们的私钥签署您的应用程序。在不签名的情况下构建/存档应用程序，将其连同您的设备 UDID 和其他一些详细信息通过电子邮件发送给他们，他们将必须创建一个配置文件，然后对应用程序签名并将其通过电子邮件发送给您。然后，您可以将其拖到 iTunes 上以安装该应用程序。

此部署方法仅适用于 beta 测试代码，因此几个月后将过期，必须重复这些步骤。

# ruby - 使用 RVM 的用户特定 gem

> ID：15328051
> 
> 赞同：1
> 
> 时间：2013-03-10T21:45:06.273
> 
> 标签：ruby, rvm

我在我的服务器上使用 RVM 来管理 ruby​​。我有一个 gem，它是一个守护进程，我想以非特权用户身份运行，但是，当我尝试这样做时，出现权限错误：

```
statusbot@host config]$ statusbot run
fatal: Not a git repository (or any of the parent directories): .git
/usr/local/rvm/gems/ruby-1.9.3-p374/gems/bundler-1.3.2/lib/bundler/definition.rb:235:in `rescue in lock': There was an error while trying to write to Gemfile.lock. It is likely that  (Bundler::InstallError)
you need to allow write permissions for the file at path: 
/usr/local/rvm/gems/ruby-1.9.3-p374/gems/StatusBot-0.0.4/Gemfile.lock
    from /usr/local/rvm/gems/ruby-1.9.3-p374/gems/bundler-1.3.2/lib/bundler/definition.rb:220:in `lock'
    from /usr/local/rvm/gems/ruby-1.9.3-p374/gems/bundler-1.3.2/lib/bundler/environment.rb:34:in `lock'
    from /usr/local/rvm/gems/ruby-1.9.3-p374/gems/bundler-1.3.2/lib/bundler/runtime.rb:43:in `setup'
    from /usr/local/rvm/gems/ruby-1.9.3-p374/gems/bundler-1.3.2/lib/bundler.rb:120:in `setup'
    from /usr/local/rvm/gems/ruby-1.9.3-p374/gems/rubygems-bundler-1.1.1/lib/rubygems-bundler/noexec.rb:79:in `setup'
    from /usr/local/rvm/gems/ruby-1.9.3-p374/gems/rubygems-bundler-1.1.1/lib/rubygems-bundler/noexec.rb:91:in `<top (required)>'
    from /usr/local/rvm/rubies/ruby-1.9.3-p374/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
    from /usr/local/rvm/rubies/ruby-1.9.3-p374/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
    from /usr/local/rvm/rubies/ruby-1.9.3-p374/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
    from /usr/local/rvm/gems/ruby-1.9.3-p374/bin/ruby_noexec_wrapper:9:in `<main>' 
```

同样，我无法为每个用户安装 gems：

```
[statusbot@host ~]$ gem install ~/StatusBot-0.0.5.gem 
ERROR:  While executing gem ... (Errno::EACCES)
    Permission denied - /usr/local/rvm/gems/ruby-1.9.3-p374/gems/StatusBot-0.0.5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T02:49:51.543

在多用户模式下使用 RVM 需要：

1.  RVM 是使用`sudo`非`root`用户安装的。
2.  所有想要安装 rubies / gems 的用户都必须在组中`rvm`（一个额外的用例是 OSX，即使您在`rvm`检查时也在组中`id1`- 它可能仍然对 shell 无效并且需要重新启动）

额外的用例是**混合模式**，其中只有部分 RVM 在系统中，用户可以在 中创建 gemset `$HOME`，在 RVM 站点上阅读更多信息：[https ://rvm.io/rvm/install](https://rvm.io/rvm/install)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-10T22:09:20.487

根据[https://stackoverflow.com/a/4151540/497756](https://stackoverflow.com/a/4151540/497756)和后续文章[http://yehudakatz.com/2010/12/16/clarifying-the-roles-of-](http://yehudakatz.com/2010/12/16/clarifying-the-roles-of-the-gemspec-and-gemfile/) ，这看起来像是 gem 的问题来自 bundler 作者之一的[the-gemspec-and-gemfile/](http://yehudakatz.com/2010/12/16/clarifying-the-roles-of-the-gemspec-and-gemfile/)`Gemfile.lock`不应该是 gem 的一部分。

尝试：

```
 sudo rm -f /usr/local/rvm/gems/ruby-1.9.3-p374/gems/StatusBot-0.0.4/Gemfile.lock 
```

# android - iOS 6 iPhone 5 App 在Phonegap Build 中没有全屏显示？

> ID：15328054
> 
> 赞同：3
> 
> 时间：2013-03-10T21:45:20.917
> 
> 标签：android, ios, cordova, fullscreen, phonegap-build

嘿，我正在运行我的应用程序，它似乎在我的 android 设备上是全屏的，但它在 iPhone 5 的顶部/底部有黑条......我需要设置哪些设置才能使它们工作？

我的应用在我的 android 上的外观是这样的：

![在此处输入图像描述](../Images/a85fada10fd910aa14853fec70743937.png)

它在我的 iPhone 5 上的外观是这样的：

![在此处输入图像描述](../Images/b8e81193a420517c0f56edf1bd6b42d8.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T22:16:14.233

为您的应用添加 iphone 5 的默认图像，`Default-568h@2x.png`. 这会自动摆脱酒吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-30T18:55:53.463

要提供更多详细信息，请将此行和相应的图像添加到您的 config.xml 文件中：

```
<gap:splash src="images/Default-568h@2x.png" gap:platform="ios" width="640" height="1136" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-13T04:16:43.920

未指定**启动屏幕文件**时也会发生这种情况。去

Target Setting --> General --> App Icons and Launch Images --> Launch Screen File --> (select) Main.Storyboard.

完毕！

# android - requestLocationUpdate 耗时过长

> ID：15328056
> 
> 赞同：5
> 
> 时间：2013-03-10T21:45:41.797
> 
> 标签：android, gps, locationlistener

我只有一台设备 (HTC HD Deside) 用于测试我的应用程序以及何时获取 GPS 数据

```
locationManager.requestLocationUpdate(criteria,0,0,this); //critera = "gps" 
```

我的 GPS 图标出现在通知栏中，但它“闪烁”，好像这意味着我的设备正在寻找并获取 GPS 数据。因此，我的应用程序在成功从 GPS 获取数据之前花费了太多的“思考”时间（~100 万到 300 万！）（在图标停止闪烁之前）

所以，我有义务像这样创建一个 while 指令：

```
do{
    lastLocation = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
}while(System.currentTimeMillis() - lastLocation.getTime() > 5000); 
```

谢谢，我肯定会得到一个最近的位置，但我浪费了太多时间。

有什么问题？是硬件吗？我能找到更好的方法来解决这个问题吗？我可以“快速”获得 GPS 数据吗？:/ (1~5 秒)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T23:35:46.153

我认为您应该在开发位置感知应用程序之前阅读此[http://developer.android.com/guide/topics/location/strategies.html指南。](http://developer.android.com/guide/topics/location/strategies.html)

GPS 传感器需要 1 到 3 分钟才能得到修复，您无法快速修复（您想要 1-5 秒）。

您应该使用最后一个已知位置值并开始请求位置修复。当您拥有一个时，您会相应地刷新您的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T03:43:00.960

当您在建筑物或覆盖区域内时，GPS 传感器可能需要更多时间。有时，如果您在建筑物内并且没有可用的 GPS 信号，它总是会闪烁并消耗大量电池电量。尝试使用其他一些提供商。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T07:52:25.497

您是否连接到数据网络？

我不了解 HTC，但通常当数据连接可用时，该设备使用称为辅助 GPS 的东西。卫星星历是从服务器下载的，而不是扫描地平线上的所有可见卫星，修复所需的时间为 10-20 秒。

您也可能在室内或信号低的区域，或者您的天线不好。

使用市场上的 GPS 测试应用程序检查天线是否有问题（通过比较两个设备）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-11T16:11:23.683

GPS 供应商有时需要电池电量，还需要检索 GPS 信号、预热硬件然后获取位置，如果是第一次使用它可能需要一些时间。

我建议使用新的 LocationRequest ，如果需要，它将在 GPS 或 NETWORK 之间进行选择以获取位置。

在 onCreate 中，我设置了我的 locationRequest

```
private fun setupLocationRequest(){
        locationCallback = LocationCallback()
        locationRequest = LocationRequest.create()
        locationRequest.interval = 10000
        locationRequest.fastestInterval = 2000
        locationRequest.priority = LocationRequest.PRIORITY_BALANCED_POWER_ACCURACY
        fusedLocationClient = LocationServices.getFusedLocationProviderClient(this)
    } 
```

正如您在此处看到的，`PRIORITY_BALANCED_POWER_ACCURACY`将为我提供一个最大纬度和经度的距离块，并且不仅会使用 GPS，而且会在需要时使用 NETWORK。

然后，我先请求`lastKnowLocation`，如果没有检索到这个位置，你可以请求位置更新

```
fusedLocationClient.lastLocation.addOnSuccessListener { lastLocation ->
                if(lastLocation != null){
                    calculateDistanceAndNavigate(lat,lng,lastLocation.latitude,lastLocation.longitude,radio)
                }else{
                    startLocationUpdates()
                    locationCallback = object : LocationCallback() {
                        override fun onLocationResult(locationResult: LocationResult?) {
                            locationResult ?: return
                            for (location in locationResult.locations) {
                                calculateDistanceAndNavigate(lat,lng,location.latitude,location.longitude,radio)
                            }
                        }
                    }
                }
            }

  private fun startLocationUpdates() {
        fusedLocationClient.requestLocationUpdates(
            locationRequest,
            locationCallback,
            Looper.getMainLooper()
        )
    } 
```

对我来说，这是获取位置的最有效方法，首先我不只使用 GPS，而是节省电池并在需要时使用 NETWORK 或 WIFI，然后我请求 lastKnownLocation 如果它被保存（可能通过另一个应用程序，例如：谷歌地图），然后如果失败，我就开始请求位置更新（这可能需要一点时间）

# tomcat - 多个 Tomcat 实例对 EC2 实例有意义吗？

> ID：15328063
> 
> 赞同：0
> 
> 时间：2013-03-10T21:46:27.447
> 
> 标签：tomcat, amazon-web-services, amazon-ec2, railo, cfml

我正在 AWS EC2 (Ubuntu) 实例上安装 Railo。我遇到了这个[在 Ubuntu 上安装 Railo 和多个 Tomcat7 实例的指南](https://github.com/getrailo/railo/wiki/Ubuntu-12.04-Railo-4-with-Tomcat7-multi-instance)，它提示了以下问题：

鉴于能够“启动”多个 EC2 实例并使用弹性 IP/Route 53 进行负载平衡，**将每个单独的 EC2 实例配置为运行多个 Tomcat 实例是否会带来额外的好处？**这是值得的，还是只是多余的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-05T12:12:22.340

您必须确定您的瓶颈：如果您的*服务器*在使用单个 tomcat 时内存不足，则启动第二个 tomcat 是没有用的。此外，如果您的 CPU 已用尽，则启动第二个 tomcat 通常没有任何优势。

但是，如果您无论如何要在不同服务器之间进行平衡，在一台机器上有足够的 CPU 和内存可用，您可能会从在一台机器上运行两个 tomcat 获得一些好处：例如，您可以一次从负载平衡器中删除其中一个，更新它并将其再次添加到平衡器中 - 然后对第二个执行相同的操作。

但是...无论如何，您都可以使用每个 VM 一个 tomcat 来执行此操作。

恐怕：您必须自己回答这个问题，通过测量：如果您获得的负载可以由 4 个 EC2 实例上的 4 个 tomcat 处理，那么它是否也可以由 2 个 EC2 实例上的 4 个 tomcat 处理？您运行的每个 EC2 实例通常有多少可用资源（CPU、内存、I/O）？这一切都在很大程度上取决于您的用例以及机器实际在做什么。

更多示例：如果您的网络带宽饱和，而您还有 CPU 和内存，则第二个 tomcat 将不会利用机器上的更多带宽 - 它只会降低另一个 tomcat 的吞吐量，因为它们必须共享连接带宽。

如果您的网络带宽没有饱和，并且您的 tomcat 正在等待外部资源（例如 web 服务、数据库），那么将多余的 CPU 和内存用于第二个实例可能是有意义的。

但是还有一点弹性：如果一个 EC2 实例出现故障，它会占用你的两个 tomcat。你能容忍这一点吗？或者这就是你最初选择云端的原因吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-06T01:45:32.540

添加到奥拉夫的回答中，这取决于您对容错和成本的要求，原因有几个。我记得读过一篇文章，说一个较大的实例比几个具有相同容量的较小实例便宜，我不记得 URL，但计算起来很容易。

不应将 Amazon 实例视为永久实例，并且主机可能随时关闭，并带走所有虚拟机，包括您的虚拟机。因此，您将丢失该 EC2 实例中的所有 Tomcat 实例。当然，您可以提供足够的资源，因此丢失不是问题，但您可以在这里了解您的应用程序。

但是还有一些别的东西：在同一台机器上有多个 Tomcat 实例，你必须管理它们正在监听的端口，这样就不会发生冲突。并配置弹性负载均衡器，以便使用所有这些。可行，但比在同一个端口上侦听多个 EC2 实例有点混乱。

# c# - Unity 配置向后工作

> ID：15328066
> 
> 赞同：0
> 
> 时间：2013-03-10T21:46:58.163
> 
> 标签：c#, unity-container

我有以下配置：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="unity1" type="Microsoft.Practices.Unity.Configuration.UnityConfigurationSection, Microsoft.Practices.Unity.Configuration"/>
    <section name="unity2" type="Microsoft.Practices.Unity.Configuration.UnityConfigurationSection, Microsoft.Practices.Unity.Configuration"/>
  </configSections>
  <unity1 configSource="unity1.config" />
  <unity2 configSource="unity2.config" />
</configuration> 
```

以及 unity1 文件中的以下内容（unity2 相同，但在明显的地方用 2 而不是 1。

```
<?xml version="1.0" encoding="utf-8" ?>
<unity1 xmlns="http://schemas.microsoft.com/practices/2010/unity">
  <alias alias="IInjectMe1" type="CommonLib.IInjectMe1, CommonLib"/>
  <container name="unity1">
    <register type="IInjectMe1" name="Injected1" mapTo="CommonLib.InjectMe1, CommonLib" />
  </container>
</unity1> 
```

我在一个名为 CommonLib 的程序集中的单个类文件中有此代码：

```
 public void StartUp()
    {
        var config1 = (UnityConfigurationSection)ConfigurationManager.GetSection("unity1");
        IUnityContainer container = new UnityContainer();
        config1.Configure(container, "unity1");

        var config2 = (UnityConfigurationSection)ConfigurationManager.GetSection("unity2");
        config2.Configure(container, "unity2");

        var test1 = container.Resolve<InjectMe1>(); // WHY NOT THE INTERFACE??

        var test2 = container.Resolve<InjectMe2>(); // WHY NOT THE INTERFACE??

        Console.WriteLine(test1 != null && test2 != null);
    }
}

public class InjectMe1 : IInjectMe1 {}

public interface IInjectMe1 {}

public class InjectMe2 : IInjectMe2 {}

public interface IInjectMe2 {} 
```

我的问题是，在上面我放了“为什么不是接口”的地方，为什么我必须指定具体的类而不是接口？我确定现在已经很晚了，我看不到树木的木材，但我必须指定混凝土类型，它会创建正确的混凝土类型。我想指定接口并让它解决。

我想`container.Resolve<IInjectMe1>()`工作。注意接口的 I。

编辑：如果我执行上述操作，我会收到错误：

> 测试方法 CommonLib.Tests.UnitTest1.TestMethod1 抛出异常：Microsoft.Practices.Unity.ResolutionFailedException：依赖项解析失败，类型 =“CommonLib.IInjectMe1”，名称 =“（无）”。异常发生时：解决时。异常是： InvalidOperationException - 当前类型 CommonLib.IInjectMe1 是一个接口，无法构造。您是否缺少类型映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:09:20.417

手头没有编译器，但我怀疑您必须从 XML 中删除 name="Injected1" 。

通过创建命名注册，您将自己限制为命名解析。但显然，您解决了默认注册。

# php - php在for循环中从数据库中检索多行

> ID：15328074
> 
> 赞同：1
> 
> 时间：2013-03-10T21:47:37.160
> 
> 标签：php, database, shopping-cart, shopping

如何在 for 循环中从数据库中检索多行？`for($i=0;$i<=$max;$i++)`我的购物车页面中有循环创建问题，即使我在数据库中的行中`size query because of for loop repeating only one row ?`有两个不同的行？`size Small Or Medium``size column`

```
i repeated same question because of my problem is still not solved

http://stackoverflow.com/questions/15333897/
what-can-i-do-if-for-loop-repeat-single-row-from-mysql-database 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:54:17.467

没有关于你在做什么的细节，所以这里是一般结构：

```
$query = "select * from some_table where something='some_value'";
if(!$result = mysql_query($query)) die("\n$query\n".mysql_error()."\n");
while($row = mysql_fetch_object($result))
{
    echo $row->some_field."\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T23:08:20.333

你有`$size=get_size($id);`，但函数没有输入参数。

所以改变：

```
function get_size($id){
    $result=mysql_query("SELECT size FROM mywishlist WHERE id=".intval($id)) 
    or die("My Wish Size Problem"."<br/><br/>".mysql_error());
    $row=mysql_fetch_array($result);
    return $row['size'];
} 
```

# javascript - 使用 php javascript 创建动态订单篮

> ID：15328076
> 
> 赞同：0
> 
> 时间：2013-03-10T21:47:58.357
> 
> 标签：javascript, php, ajax, shopping-cart

我正在创建一个 ePos 系统，该系统将用户点击的任何项目添加到购物篮并计算最终的总数，**所有这些都在没有总页面刷新**的情况下完成。

我尝试使用 $_SESSION 并将其存储为订单（ [item] => [price] ）但失败了，因为我需要刷新。

我需要的是：

*   显示添加的项目 [id 名称 数量 价格]
*   计算添加项目的总价。

请告诉我最好的方法来做到这一点。谢谢

这就是我在 javascript 中的尝试

```
function addItem(name, price, id)
                {

                var table=document.getElementById("basket");
                var row=table.insertRow(-1);
                var cell1=row.insertCell(0);
                var cell2=row.insertCell(1);
                var cell3=row.insertCell(2);
                cell1.innerHTML=name;
                cell2.innerHTML=1;
                cell3.innerHTML=price;
                } 
```

但我的问题是，我找不到添加小数的方法，parseFloat 给我带来了很多错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:54:19.183

您无需刷新页面即可将信息保存到 PHP Session 对象中。PHP Session 信息存储在服务器上，因此您可以向后端进行异步 HTTP 请求，并将信息存储在 PHP Session 中。我建议使用 jQuery.ajax 函数 ( [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/) ) 来执行异步 HTTP 请求。如果您不熟悉 jQuery，我强烈建议您熟悉它。我还建议您研究 AJAX 的工作原理。

此外，如果您使用的是 PHP 会话，如果您没有使用某种执行会话管理的框架，则必须确保在使用 $_SESSION 变量之前调用 session_start()。

# css - 需要表格单元格中的背景图像和链接文本颜色才能在鼠标悬停在单元格上时更改（使用 CSS）

> ID：15328080
> 
> 赞同：0
> 
> 时间：2013-03-10T21:48:17.890
> 
> 标签：css, hover

对不起，新手的问题，但我要放弃在这个问题上花了一整天的时间......我已经在这个论坛上搜索了几个小时，但仍然无法让事情正常工作。

有人可以帮我解决以下问题的 CSS 解决方案吗？

基本上，我有一个带有图像背景和文本链接的表格单元格。我需要将鼠标悬停在此表格单元格上同时更改图像和链接颜色。我繁琐的代码看起来像这样：

```
<table>
  <tr>
    <td width="160" height="36" align="center" valign="middle" class="menuitem1">
       <a href="http://www.samplesite.com">About us</a>
    </td>
  </tr>
</table>` 
```

然后我在一个 CSS 文件中尝试了所有这些：

```
.menuitem1 {
   border-right-width: 1px;
   border-right-style: solid;   
   border-right-color: #000;
   background-image: url("images/sample.png");
   background-repeat: no-repeat;
   background-position: left;
   padding-left: 17px;
}
.menuitem1 a:link{
   display: block;
   text-decoration: none;
   color: #fff;
}
.menuitem1 a:visited {
   text-decoration: none;
   color: #fff;
}
.menuitem1:hover {
   text-decoration: none;
   background-image: url("images/sample2.png");
   background-repeat: no-repeat;
   background-position: left;
   color: #000;
}
.menuitem1 a:hover {
   text-decoration: none;
   color: #000;
}
.menuitem1 a:active{
   color: #000;
} 
```

问题是文本链接不遵循`block`属性。因此，文本颜色仅在鼠标悬停在其上时才会更改，而不是在单元格的其余部分上。添加`width: 100%`到`.menuitem1 a`仍然留`17px`在左侧 ( `padding-left`) 上，而不是在块中。更糟糕的是，`height: 100%`它没有任何效果，并且以 px 为单位的固定高度将文本垂直对齐在顶部，而无法更改它。

有趣的是，如果我在单元格中没有超链接并且只有文本，那么这段简单的代码就足以让一切都像梦一样工作：

```
.menuitem1:hover {
   text-decoration: none;
   background-image: url("images/sample2.png");
   background-repeat: no-repeat;
   background-position: left;
   color: #000;
} 
```

对于添加链接后出现的问题，难道没有这样简单的解决方案吗？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:52:23.970

许多初学 javascript 程序员最初没有意识到的是，*任何*选择器列表都可以串在一起形成新的选择器。因此，要更改背景图像，您可以正确放置：

```
.menuitem1:hover {
    background-image: url("images/sample2.png");
    background-repeat: no-repeat;
    background-position: left; 
```

但是要选择`a`元素，您应该使用以下格式：

```
.menuitem1:hover a {
    color: #000;
    text-decoration: none;
    ...
} 
```

希望这可以帮助！

# java - 在超类方法中使用子类成员变量？

> ID：15328081
> 
> 赞同：2
> 
> 时间：2013-03-10T21:48:20.447
> 
> 标签：java

我有一个基类和子类。基类具有我想在子类中使用的通用方法及其实现，但我想使用子类成员变量而不是超类。我不想在子类中重写相同的方法。Java中有没有办法实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:03:14.993

您可以在成员变量上创建一个`protected`setter，然后在子类的构造函数中覆盖超级变量的值：

```
class Animal {
   private String voice = "Oooo";

   protected void setVoice(String voice) {
       this.voice = voice;
   }

   public void speak() {
       System.out.println(this.voice);
   }

}

class Dog extends Animal {

    public Dog() {
        setVoice("woof"); 
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:58:53.360

您可以使用方法来访问成员并在子类中覆盖它。

```
Class A{
  public void DoStuff(){
     int aux = getResource; 
     /*cool things with aux*/
  }
  protected int getResource(){
    return internal_member;
  }
  private int internal_member;
}

Class B extends A{
  private int another_member;
  @Override
  public int getResource(){
     return another_member;
  }

} 
```

但是考虑到这不会阻止人们直接使用 A 类成员，最好为成员和 getter 创建一个基类。

正如某些人之前概述的那样，另一个选项是将基类中的数据成员作为受保护的并在子类中对其进行初始化：

```
Class A{
  public void DoStuff(){
     /*cool things with internal_member*/
  }
  protected List internal_member;
  A(){internal_member = /*Set here a value*/}
}

Class B extends A{
  B(){internal_member = /*Set a different value here! you can even declare a member and assign it here*/}

} 
```

如果需要，可以使用带参数的构造函数。

# c# - 将 IRandomAccessStreamWithContentType 转换为 Byte[]

> ID：15328084
> 
> 赞同：4
> 
> 时间：2013-03-10T21:48:34.020
> 
> 标签：c#, windows-runtime

在我的应用程序中，我允许用户使用 ContactPicker 从联系人中添加人员。

我尝试将 IRandomAccessStreamWithContentType 转换为 Byte[]

```
IRandomAccessStreamWithContentType stream = await contactInformation.GetThumbnailAsync();
if (stream != null && stream.Size > 0)
{
    Byte[] bytes = new Byte[stream.Size];
    await stream.ReadAsync(bytes.AsBuffer(), (uint)stream.Size, Windows.Storage.Streams.InputStreamOptions.None); 
```

我的 Byte[] 不为空（大约 10000 字节）

但是当我使用我的 Converter Byte[] to ImageSource 时，BitmapImage 的宽度和高度为 0。

我将此转换器用于另一个应用程序，它工作得很好......

```
public object Convert(object value, Type targetType, object parameter, string language)
{
    try
    {
        Byte[] bytes = (Byte[])value;
        if (bytes == null)
           return (new BitmapImage(new Uri((String)parameter)));
        BitmapImage bitmapImage = new BitmapImage();
        IRandomAccessStream stream = this.ConvertToRandomAccessStream(new MemoryStream(bytes));
        bitmapImage.SetSource(stream);
        return (bitmapImage);
    }
    catch
    {
       return (new BitmapImage(new Uri((String)parameter)));
    }

}
private IRandomAccessStream ConvertToRandomAccessStream(MemoryStream memoryStream)
{
    var randomAccessStream = new InMemoryRandomAccessStream();
    var outputStream = randomAccessStream.GetOutputStreamAt(0);
    outputStream.AsStreamForWrite().Write(memoryStream.ToArray(), 0, (Int32)memoryStream.Length);

    return randomAccessStream;
} 
```

如果有人知道是什么问题...

提前致谢。新克里普特

编辑：我已经在另一个项目中使用了我的转换器，效果很好。主要区别在于流的来源不同：

```
var reader = await file.OpenReadAsync();
using (DataReader dataReader = new DataReader(reader))
{
    var bytes = new byte[reader.Size];
    await dataReader.LoadAsync((uint)reader.Size);
    dataReader.ReadBytes(bytes);
    // Use of bytes
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T06:13:41.647

我很确定`bytes`在你的情况下只包含零。你应该修改你的阅读代码：

```
var buffer = await stream.ReadAsync(bytes.AsBuffer(), (uint)stream.Size, InputStreamOptions.None);
bytes = buffer.ToArray(); 
```

或者更好的是，完全避免`IBuffer`：

```
await stream.AsStream().ReadAsync(bytes, 0, bytes.Length); 
```

在这两种情况下，字节数组现在都将包含实际值。我仍然无法让您的转换器工作，而且我现在没有时间进一步排除故障。也许其他人会帮助你。

编辑：

我不确定您是否在另一个项目中使用转换器，但如果不使用异步方法，我无法让它工作，这使得它无法在内部使用`IValueConverter`。在我更改后`ConvertToRandomAccessStream`，位图按预期创建，没有任何其他修改（除了 required `await`）：

```
private async Task<IRandomAccessStream> ConvertToRandomAccessStream(byte[] bytes)
{
    var randomAccessStream = new InMemoryRandomAccessStream();
    using (var writer = new DataWriter(randomAccessStream))
    {
        writer.WriteBytes(bytes);
        await writer.StoreAsync();
        await writer.FlushAsync();
        writer.DetachStream();
    }
    randomAccessStream.Seek(0);

    return randomAccessStream;
} 
```

我没有使用转换器，而是在返回位图的视图模型中放置了一个附加属性。在 bytes 属性中，我调用了 async 方法来创建位图：

```
public Byte[] ImageBytes
{
    get { return _imageBytes; }
    set
    {
        if (Equals(value, _imageBytes)) return;
        _imageBytes = value;
        OnPropertyChanged();
        CreateBitmap();
    }
}

public BitmapSource Image
{
    get { return _image; }
    set
    {
        if (Equals(value, _image)) return;
        _image = value;
        OnPropertyChanged();
    }
}

private async Task CreateBitmap()
{
    try
    {
        BitmapImage bitmapImage = new BitmapImage();
        IRandomAccessStream stream = await this.ConvertToRandomAccessStream(ImageBytes);
        bitmapImage.SetSource(stream);
        Image = bitmapImage;
    }
    catch
    {
        Image = null;
    }
} 
```

# scheme - 在初学者方案中，如何将变量表示为字符串？

> ID：15328085
> 
> 赞同：3
> 
> 时间：2013-03-10T21:48:41.007
> 
> 标签：scheme, racket

我的问题是我如何编码

```
(triangle 5) produces (list "*****" "****" "***" "**" "*") 
```

注意：（5 个星号 4，然后是 3，然后是 2，然后是 1）。到目前为止，我有：

```
(define (triangle n)
  (cond
    [(zero? n) empty]
    [else (cons n (triangle (sub1 n)))])) 
```

但这只会给我`(list 5 4 3 2 1)`。请注意，这仅使用基本的方案初学者列表和缩写。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T21:57:13.773

将复杂问题拆分为更简单、更短的子部分总是一个好主意。在这种情况下，我们可以通过首先编写子问题的解决方案来简化通用解决方案，如下所示：

1.  首先，构建一个创建字符串列表的过程，其中字符串是`"*****"`or`"****"`或 ... or`"*"`
2.  其次，编写一个`repeat`帮助程序，给定一个字符串和一个数字，重复该字符串多次 - 例如：`(repeat "*" 3)`将返回`"***"`

很容易看出如何用第二个子问题来表达第一个子问题。因为这看起来像一个家庭作业，所以你不应该在这里要求完整的解决方案。自己来回答对你来说会更有用，这里是大意，填空：

```
(define (triangle n)
  (cond [<???> <???>]                 ; if n is zero return the empty list: '()
        [else                         ; otherwise
         (cons <???>                  ; cons n repetitions of * (using `repeat`)
               (triangle <???>))]))   ; and advance the recursion

(define (repeat str n)
  (cond [<???> <???>]                 ; if n is zero return the empty string: ""
        [else                         ; otherwise
         (string-append <???>         ; append the given string
             (repeat <???> <???>))])) ; and advance the recursion 
```

如果你仔细看，这两个过程共享完全相同的结构。改变的是在基本情况下返回的值（一个空列表和一个空字符串）以及用于将部分答案（`cons`和`string-append`）粘在一起的过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T21:52:54.737

如果您只是在寻找如何将数字转换为字符串，您可以使用`(number->string x)`.

但是，由于您希望将数字表示为星号，因此最好将它们保留为数字，直到您构建了一串星号。在这种情况下，您可能需要这样的方法：

```
(define (num-to-asterisks x)
        (make-string x #\*)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T00:48:26.187

试试这个：

```
(define (triangle n)
  (let building ((i 0) (r '()))
    (if (= i n)
        r
        (building (+ i 1)
                  (cons (string-append "*" (if (null? r) "" (car r)))
                         r))))) 
```

这是很好的尾递归；通过将“*”添加到结果列表的第一个元素来构建结果列表。

# ios - 同时为两个约束设置动画 - 顺序很重要？

> ID：15328092
> 
> 赞同：3
> 
> 时间：2013-03-10T21:49:17.867
> 
> 标签：ios, autolayout

我有一个嵌套视图，我在某个动作上完全动画出框架。为此，我更新了动画块中约束的常量。

```
[UIView animateWithDuration:.5 animations:^{
    self.categoriesTableViewConstraintToBottom.constant = [UIScreen mainScreen].bounds.size.height;
    self.categoriesTableViewConstraintToTop.constant = [UIScreen mainScreen].bounds.size.height;
    [self.view layoutSubviews];
}, completion: nil]; 
```

基本上，这两个约束只是将它绑定到父视图（全屏）的顶部和底部。显然，我不能在不更改另一个约束的情况下更改其中一个约束，否则布局不能令人满意。

这里奇怪的部分是我必须按照上面显示的顺序更改这些。如果我以其他顺序更新常量，则会引发“满足”错误。

所以：

1.  为什么顺序很重要？
2.  如果在我们更新所有约束之前它们会发生冲突，我们是否应该在更改约束时从技术上删除它们？（他们是否因为某种原因立即评估，而不是等待`layoutSubviews`or `layoutIfNeeded`？

# java - Java 中的静态和 OOP 帮助

> ID：15328094
> 
> 赞同：-1
> 
> 时间：2013-03-10T21:49:26.250
> 
> 标签：java, oop, class, static

每次我调用 private static`sClass x = new sClass()`时`aClass`，我都想在`sClass`from中存储信息（数组），`aClass`例如`aClass`实例化的时间。这甚至可能吗？什么是最正确的面向对象解决方案？（如果有多个，请问您是否可以列出它们）

我有这样的事情：

```
private static sClass x = new sClass(); 
```

基本上我想使用sClass中构造aClass的时间，将其保存到一个数组中，这样我就可以比较每个aClass的开始时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:58:30.887

静态属性是在 1 个单个实例中绑定到其父类的属性。

可以将类的新实例存储到静态属性 x 中（这就是您现在正在做的事情，但 x 将只保存 1 个实例（您创建并加载到 x 中的最新 sClass() 实例）。

根据您的需要，您可能有一个私有的 sClass[] sClassArray（一个 sClass 对象数组），而不是静态 sClass x，并且每次创建新的 sClass 对象时，将其作为元素加载到数组中。

例如，您可以在拥有私有静态 x 属性的类中执行以下操作：

```
private static sClass[] sClassArray = new sClass[10]; // Will hold up to 10 sClass objects.

// When you instantiate new instances of sClass objects:

for (int i = 0; i < sClassArray.length; i++) {
    if (sClassArray[i] == null) {
        // Basically load the new sClass object into a slot in the array that hasn't yet been taken.
        sClassArray[i] = new sClass();
        break;
    }
} 
```

然后下次需要查看实例化的 sClass 对象时，可以遍历 sClassArray[] 数组。

当然有几个问题：

1.  为什么需要静态跟踪动态对象？
2.  放置一个对象数组可能会占用不需要的内存（您可以选择回收数组元素，只需查找对象池模式）。

# c# - 没有输入（参数）的 C# Lambda？

> ID：15328096
> 
> 赞同：3
> 
> 时间：2013-03-10T21:49:32.443
> 
> 标签：c#, lambda

我只是想知道这个案子

```
void exc(Func<int> fn) {
    fn();
} 
```

我可以做到以下

```
public void test() {
    exc(delegate{return 1;});
} 
```

但是我喜欢 => 语法，所以我尝试了

```
public void test() {
    exc(void=>1);
} 
```

它没有编译。有没有办法可以使用 => 语法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T21:50:25.270

你几乎是从头顶做的:)。有关更多详细信息，请查看[MSDN](http://msdn.microsoft.com/en-us/library/bb397687.aspx)，但这就是您要查找的内容：

```
public void test()
{
    exc(()=>1);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T21:50:29.133

`Func<int>`表示不带参数并返回整数的函数。所以你可以将它指定为这样的匿名函数

```
public void test()
{
    exc(() => 1);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T21:50:22.113

简单到

```
() => 1 
```

[http://msdn.microsoft.com/en-us/library/bb397687.aspx](http://msdn.microsoft.com/en-us/library/bb397687.aspx)

并且 ctrl+f 用于“使用空括号指定零输入参数：”

# c++ - WinAPI 在按钮单击时没有任何反应

> ID：15328099
> 
> 赞同：2
> 
> 时间：2013-03-10T21:50:02.937
> 
> 标签：c++, winapi, visual-c++, button

我的问题是：在下面的 C++ 代码中，为什么单击按钮应该调用`MessageBox`from时什么都不做`WndProc1`？

PS：编译后出现如下错误：

```
"C:\Windows\SysWOW64\ntdll.dll", Can't find or open PDB file. 
```

代码：

```
#include <Windows.h>

LRESULT CALLBACK WndProc(
  _In_  HWND hwnd,
  _In_  UINT uMsg,
  _In_  WPARAM wParam,
  _In_  LPARAM lParam
);

LONG WINAPI WndProc1(
  _In_  HWND hwnd_button,
  _In_  UINT uMsg,
  _In_  WPARAM wParam,
  _In_  LPARAM lParam
);

//Точка входа в программу
int WINAPI WinMain
    (
HINSTANCE hInstance,
HINSTANCE hPrevInstance,
LPSTR lpCmdLine,
int nCmdShow
)
{
//Создаем класс окна
WNDCLASS WindowClass;

//Заполняем структуру 
WindowClass.style       = 0;
WindowClass.lpfnWndProc     = (WNDPROC)WndProc;
WindowClass.cbClsExtra      = 0;
WindowClass.cbWndExtra      = 0;
WindowClass.hInstance       = hInstance;
WindowClass.hIcon       = LoadIcon(hInstance,
                  (LPCTSTR)IDI_APPLICATION);
WindowClass.hCursor     = LoadCursor(NULL, IDC_ARROW);
WindowClass.hbrBackground   = (HBRUSH)(COLOR_WINDOW+1);
WindowClass.lpszMenuName    = 0;
WindowClass.lpszClassName   = TEXT("Class");

//Зарегистируем класс окна
RegisterClass(&WindowClass);

//Создаем переменную, в которой поместим идентификатор окна
HWND hWnd;

hWnd = CreateWindow(TEXT("Class"), TEXT("ClickTest"),
       WS_OVERLAPPEDWINDOW, 0, 0, 500, 300, NULL, NULL, hInstance, NULL); 

//Создаем кнопку
HWND hWnd_button;

hWnd_button = CreateWindow(TEXT("button"), TEXT("Click me"), WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON,
10, 10, 80, 30, hWnd, (HMENU)10000, hInstance, NULL);

//показать окно
ShowWindow(hWnd, nCmdShow);

//обновить содержимое окна
UpdateWindow(hWnd);

//Создадим переменную для храненния сообщений
MSG msg;

//Создадим цикл обработки сообщений
while(GetMessage(&msg, NULL,0 ,0))
{
    TranslateMessage(&msg);
    DispatchMessage(&msg);
}
return 0;
}

LONG WINAPI WndProc1(HWND hwnd, UINT Message, WPARAM wparam, LPARAM lparam)
{
switch (Message){
case WM_COMMAND:
    if(LOWORD(wparam)==10000)
    {
        MessageBox(hwnd, TEXT("Button Pressed"), TEXT(""), 0);
    }
    return 0;}}

LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
PAINTSTRUCT PS;
switch(message)
{
case WM_CREATE:
    break;
case WM_DESTROY:
    PostQuitMessage(0);
    break;
case WM_PAINT:
    BeginPaint(hWnd, &PS);
    EndPaint(hWnd, &PS);
    break;
default:
    return DefWindowProc(hWnd, message, wParam, lParam);
}
return 0;
} 
```

现在工作，只是将按钮功能作为案例之一添加到`WndProc`（`WndProc1`已删除）

```
 LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wparam, LPARAM lParam)
 {
 PAINTSTRUCT PS;
 switch(message)
 {
 case WM_CREATE:
    break;
 case WM_DESTROY:
    PostQuitMessage(0);
    break;
case WM_PAINT:
    BeginPaint(hWnd, &PS);
    EndPaint(hWnd, &PS);
    break;
case WM_COMMAND:
    if(LOWORD(wparam)==10000)
    {
        MessageBox(hWnd, TEXT("Button Pressed"), TEXT(""), 0);
    }
default:
    return DefWindowProc(hWnd, message, wparam, lParam);
}
return 0; 
  } 
```

`LRESULT CALLBACK`最后一个新手问题：和then 有什么区别`LONG WINAPI`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T22:03:13.593

做这个修改`WndProc`：

```
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
PAINTSTRUCT PS;
switch(message)
{
case WM_COMMAND:
    if(LOWORD(wParam)==10000)
    {
        MessageBox(hWnd, TEXT("Button Pressed"), TEXT(""), 0);
    }
    break;
case WM_CREATE:
    break;
// ... 
```

我`WM_COMMAND`在`switch`/`case`中添加了`WndProc`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T21:53:39.830

你希望`WndProc1`如何被召唤？它不与任何窗口类相关联...您必须处理内部的 WM_COMMAND `WndProc`（​​按钮以及其他常见控件，通过 通知*其父*级事件`WM_COMMAND`）。

# objective-c - 如何使用带有 URL 列表的assetForURL 加载多张照片

> ID：15328101
> 
> 赞同：0
> 
> 时间：2013-03-10T21:50:17.630
> 
> 标签：objective-c, callback, alassetslibrary

对于 URL 列表，我需要使用 ALAssetsLibrary:assetForURL 加载照片，这在一个方法中。众所周知，由于此方法异步工作，但它不会遍历传递的 URL 列表。我发现了这个片段（应该可以）：

```
- (void)loadImages:(NSArray *)imageUrls loadedImages:(NSArray *)loadedImages callback:  (void(^)(NSArray *))callback
{
if (imageUrls == nil || [imageUrls count] == 0) {
    callback(loadedImages);
}
else {
    NSURL *head = [imageUrls head];
    __unsafe_unretained id unretained_self = self;        
    ALAssetsLibrary* library = [[ALAssetsLibrary alloc] init];
    [library assetForURL:head resultBlock:^(ALAsset *asset) {
        ALAssetRepresentation *assetRepresentation = asset.defaultRepresentation;

        UIImage *image = [UIImage imageWithCGImage:assetRepresentation.fullResolutionImage scale:assetRepresentation.scale orientation:(UIImageOrientation)assetRepresentation.orientation];

        [unretained_self loadImages:[imageUrls tail] loadedImages:[loadedImages arrayByAddingObject:image] callback:callback];
    } failureBlock:^(NSError *error) {
        [unretained_self loadImages:[imageUrls tail] loadedImages:loadedImages callback:callback];
    }];
}
} 
```

如何在表单中编写方法定义（首先是回调）

```
void loadImages(NSArray *imageUrls, NSArray *loadedImages, ...)  ? 
```

如何从另一种方法（再次主要是回调部分）调用此方法？回调可以在调用方法中还是在此所需的第三种方法中？这个方法需要怎么写？我在这里找到了片段：http: [//www.calebmadrigal.com/functional-programming-deal-asynchronicity-objective-c/](http://www.calebmadrigal.com/functional-programming-deal-asynchronicity-objective-c/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:58:04.057

Use [**NSThread**](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html) to call the **loadImages** method.

```
NSMutableArray *imageCollection = [NSThread detachNewThreadSelector:@selector (loadImages:)
                         toTarget:self 
                       withObject:imageUrlsCollection];

- (NSMutableArray *)loadImages:(NSArray *)imageUrls 
{
  ALAssetsLibrary* library = [[ALAssetsLibrary alloc] init];
  NSMutableArray *loadedImages = [[NSMutableArray alloc] init];

  @try
  {
    for(int index = 0; index < [imageUrls count]; index++)
    {
      NSURL *url = [imageUrls objectAtIndex:index];

      [library assetForURL:url resultBlock:^(ALAsset *asset) {

         ALAssetRepresentation *assetRepresentation = asset.defaultRepresentation;

         dispatch_async(dispatch_get_main_queue(), ^{

             UIImage *image = [UIImage imageWithCGImage:assetRepresentation.fullResolutionImage scale:assetRepresentation.scale orientation:(UIImageOrientation)assetRepresentation.orientation];

             [loadedImages addObject:image];

          });

     } failureBlock:^(NSError *error) {

          NSLog(@"Failed to get Image");
     }];

    }
 }
 @catch (NSException *exception)
 {
     NSLog(@"%s\n exception: Name- %@ Reason->%@", __PRETTY_FUNCTION__,[exception name],[exception reason]);
 }
 @finally
 {
   return loadedImages;
 }

} 
```

**Note**: With **ARC**,take care about **invalid attempt to access ALAssetPrivate past the lifetime of its owning ALAssetsLibrary** issue

[Here is the fix](http://www.daveoncode.com/2011/10/15/solve-xcode-error-invalid-attempt-to-access-alassetprivate-past-the-lifetime-of-its-owning-alassetslibrary/) :)

# c++ - C++11 模板错误信息：“不能调用没有对象的成员函数”

> ID：15328109
> 
> 赞同：4
> 
> 时间：2013-03-10T21:50:43.640
> 
> 标签：c++, templates, c++11

以下是生成用于添加 N 个向量的表达式模板的代码，但目前我只关注添加两个向量。

```
template < typename Operation, typename Va>
struct VectorExpression < Operation, Va >
{
    friend Va;
    typedef VectorExpression< Operation, Va> This;
    const Operation& op;
    const Va& vector;

    inline VectorExpression ( Operation oper, const Va& first) : op(oper), vector(first) {};

    inline auto size() const ->decltype( vector.size() ) {
        return vector.size();
    };

    inline auto operator[]( size_t i ) const 
        ->decltype( vector[i] ) {
        return vector[i];
        };
};

template < typename Operation, typename Va, typename ... Vs >
struct VectorExpression <Operation, Va, Vs...> : protected VectorExpression< Operation, Vs...>
{
    friend Va;
    typedef VectorExpression< Operation, Va, Vs...> This;
    typedef VectorExpression< Operation, Vs... > Base;
    const Operation op;
    const Va& vector;

    inline VectorExpression ( Operation oper, const Va& first, const Vs&... vs ) : VectorExpression< Operation, Vs...>(oper, vs...), op(oper), vector(first) {};

    inline auto size() const ->decltype( vector.size() ) {
        return vector.size();
    };

    inline auto operator[]( size_t i ) const //This line is where the error says it is happening
        ->decltype( op( vector[i], Base::operator[](i) ) ) {
        return op( vector[i], Base::operator[](i) );
        };
}; 
```

不幸的是，当我尝试编译前面的内容时，我收到以下错误消息：

```
error: cannot call member function 'decltype (((const VectorExpression<Operation, Va>*)this)->VectorExpression<Operation, Va>::vector[i]) 
    VectorExpression<Operation, Va>::operator[](size_t) const 
    [with 
        Operation = adder<std::complex<double>, double>; 
        Va = Vector<double, false>; 
        decltype (((const VectorExpression<Operation, Va>*)this)->VectorExpression<Operation, Va>::vector[i]) = const double&; size_t = long unsigned int]'  without object 
```

我不确定问题出在哪里。这似乎是一个相当简单的递归定义`operator[]`，将当前对象中的向量与所有基类向量相加。

有任何想法吗？我不相信其余的代码是相关的[编辑：但是可以在此处找到标头，并且可以在[此处](http://pastebin.com/JNYFihBb)[找到](http://pastebin.com/38X9zC8p)测试“main” ，但是如果您想查看它，请告诉我。此外，C++11 中是否有任何方法可以在位置打印出类型以调试此类问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T22:04:27.773

你不能这样做`Base::operator[](i)`，`decltype`因为它不在成员函数的主体中；你必须做`this->Base::operator[](i)`。

# iphone - iPhone图形：具有透明度的照片格式？

> ID：15328114
> 
> 赞同：1
> 
> 时间：2013-03-10T21:51:36.980
> 
> 标签：iphone, ios, cocoa-touch

我有一些图形要导入 iPhone 应用程序。它们是我裁剪出来的照片中的人/动物，因此它们具有透明背景。显然，由于透明度的原因，我不能像传统上推荐的那样使用 JPEG，那么第二好的选择是什么？我目前正在使用 png-24，但我认为它太大了。gif可以吗？或者是其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T21:55:04.947

Apple 建议尽可能使用 PNG。PNG 仍然是一种压缩格式，所以我认为您在大小方面会很好。

# javascript - 如何检测引用 url 并在带有 javascript 的页面上链接回它？

> ID：15328116
> 
> 赞同：0
> 
> 时间：2013-03-10T21:52:11.127
> 
> 标签：javascript

我想为所有访问者提供一个自定义登录页面，该页面将显示他们来自的 url，然后使用 javascript 链接回它。我已经尝试过该`document.refer`脚本，但无法与它相处。

请问您可以提供任何帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T21:54:32.903

您可以使用该[`document.referrer`](https://developer.mozilla.org/en-US/docs/DOM/document.referrer)物业。如果用户直接导航到页面，它将返回一个空字符串。

例如，您可以将以下链接放在您的页面中，该链接将返回给推荐人：

```
<a href="#" onclick="window.location.href = document.referrer;">Go back to referrer</a> 
```

# ruby-on-rails - 如何处理常量数据流（来自 twitter）

> ID：15328117
> 
> 赞同：1
> 
> 时间：2013-03-10T21:52:12.563
> 
> 标签：ruby-on-rails, ruby, twitter

我试图将这些来自流的推文显示到带有导轨的浏览器

我将在哪里处理控制器中的恒定流？

```
 TweetStream.track('happy') do |status|

     temp = status.text

     if(temp.include? "http")
         puts "#{status.text}"
     end
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:35:24.687

看看 pusherapp ( [https://github.com/pusher/pusher-gem](https://github.com/pusher/pusher-gem) )。

这使您能够打开 websocket 并将数据从您的 rails 应用程序中的后台任务传输到您的 javascript 客户端应用程序。

# html - html表单提交后关闭浏览器会话的php或其他脚本

> ID：15328120
> 
> 赞同：0
> 
> 时间：2013-03-10T21:52:28.663
> 
> 标签：html, forms, .htpasswd

我最近实现了一个基于 .htpasswd 的登录页面，并试图找出一种关闭浏览器窗口的方法（因为我可以通过这种方式重置身份验证，以便用户无法再次登录）。

我的想法是，一旦用户登录并提交他们必须填写的表单信息，提交表单将触发脚本在 5 秒内关闭浏览器窗口。将事先警告用户这将发生。

在编写脚本时，我不是专业编码人员，有什么想法吗？我没有找到关于这个特定主题的太多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T01:36:50.940

使用 jquery/javascript，您可以使用`window.close()`

使用按钮的示例...

html

```
<button id="close">Close</button> 
```

jQuery

```
$(document).ready(function() {
    $('#close').click(function(){
        window.close();
    });
}); 
```

[如需更多信息...](https://www.google.com.au/search?q=javascript%20close%20browser&aq=f&oq=javascript%20close%20browser&aqs=chrome.0.57j62l3.4409&sourceid=chrome&ie=UTF-8)

# javascript - Processingjs Firefox 错误：“TypeError：$it2.hasNext 不是函数”

> ID：15328121
> 
> 赞同：0
> 
> 时间：2013-03-10T21:52:33.160
> 
> 标签：javascript, css

[加载此网页](http://geotheory.co.uk/)时，我在 Firefox 中收到上述错误消息。该页面运行一个 processingjs 脚本，该脚本在 Chrome 和 Safari 中运行良好。我没有使用Processing的`smooth()`功能，这给了[其他人](https://processing-js.lighthouseapp.com/projects/41284/tickets/1608-error-in-parsing-value-for-image-rendering-declaration-dropped)这个错误。

知道这是什么意思吗？！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:29:36.773

最近 FF 版本中的某些内容导致[了 Processing 中的错误](https://processing-js.lighthouseapp.com/projects/41284/tickets/1935-the-for-each-loop-over-arrays-doesnt-work-on-firefox-17)。如果你遇到这个问题，[GitHub 上 davidleibovik 的这个补丁](https://github.com/processing-js/processing-js/pull/43/files)应该可以解决这个问题。

# sql - 棘手的 where 子句

> ID：15328124
> 
> 赞同：3
> 
> 时间：2013-03-10T21:52:57.370
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我不知道是因为我在漫长的一天中处于落后状态，还是我的编码器相当于作家的障碍，但我想不出一种干净的方法来做到这一点。

我有一个存储网页菜单结构的表，我想要一个简单的存储过程，它将根据 Web 应用程序中的会话参数返回相关的菜单项。

以以下（简化）示例为例：

```
--#### Create example table
CREATE TABLE [dbo].[tbl_Page](
    [PageID] [int] IDENTITY(1,1) NOT NULL,
    [RequireLogin] [bit] NOT NULL,
    [RequireAdmin] [bit] NOT NULL,
    [HideIfLoggedIn] [bit] NOT NULL
)
GO

--#### Insert Dummy Data
SET IDENTITY_INSERT [dbo].[tbl_Page] ON
INSERT [dbo].[tbl_Page] ([PageID], [RequireLogin], [RequireAdmin], [HideIfLoggedIn]) VALUES (2, 1, 0, 0)
INSERT [dbo].[tbl_Page] ([PageID], [RequireLogin], [RequireAdmin], [HideIfLoggedIn]) VALUES (3, 1, 1, 0)
INSERT [dbo].[tbl_Page] ([PageID], [RequireLogin], [RequireAdmin], [HideIfLoggedIn]) VALUES (4, 0, 0, 1)
INSERT [dbo].[tbl_Page] ([PageID], [RequireLogin], [RequireAdmin], [HideIfLoggedIn]) VALUES (5, 0, 0, 0)
SET IDENTITY_INSERT [dbo].[tbl_Page] OFF

--#### Create menu procedure
CREATE PROCEDURE usp_GetSubMenu
    @ParentID INT ,
    @IsLoggedIn BIT ,
    @IsAdmin BIT
AS 
    BEGIN
        SET NOCOUNT ON;

        SELECT  PageID ,
                RequireLogin ,
                RequireAdmin ,
                HideIfLoggedIn
        FROM    tbl_Page
        WHERE ????????????
    END
GO 
```

对于给定的示例数据，需要满足以下条件：

1.  只有在以下情况下才应列出页面 ID 2`@IsLoggedIn = 1`
2.  页面 ID 3 仅应在`@IsLoggedIn = 1` **AND时列出** `@IsAdmin = 1`
3.  页面 ID 4 应该一直列出，**除非** `@IsLoggedIn = 1`（很可能有些页面需要登录用户（甚至是管理员用户）但仍然需要隐藏 - 这是我的大脑爆炸的地方......）
4.  页面 ID 5 应该始终可见，无论用户是否登录以及他们是否是管理员，因为它不需要登录并且对于已登录的用户不会隐藏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:10:47.360

```
select PageID,
  RequireLogin,
  RequireAdmin,
  HideIfLoggedIn
from tbl_Page
where (HideIfLoggedIn <> @IsLoggedIn)
  and (RequireLogin = 0 or @IsLoggedIn = 1)
  and (RequireAdmin = 0 or @IsAdmin = 1) 
```

为我工作。

评论后编辑：

```
select PageID,
  RequireLogin,
  RequireAdmin,
  HideIfLoggedIn
from tbl_Page
where ((HideIfLoggedIn <> @IsLoggedIn)
  and (RequireLogin = 0 or @IsLoggedIn = 1)
  and (RequireAdmin = 0 or @IsAdmin = 1))
  or (RequireLogin = 0 and RequireAdmin = 0 and HideIfLoggedIn = 0) 
```

我更新了查询来满足您的最后一个要求，并更新了以下 SQL Fiddles：

[SQL Fiddle](http://sqlfiddle.com/#!3/642ad/17) for `@IsLoggedIn = 1, IsAdmin = 0`- `PageID` *2,5*显示。

[SQL Fiddle](http://sqlfiddle.com/#!3/642ad/16) for `@IsLoggedIn = 1, IsAdmin = 1`- `PageID` *2,3,5*显示。

[SQL Fiddle](http://sqlfiddle.com/#!3/642ad/15) for `@IsLoggedIn = 0, IsAdmin = 1`- `PageID` *4,5*显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T22:11:05.673

```
SELECT  PageID ,
            RequireLogin ,
            RequireAdmin ,
            HideIfLoggedIn
    FROM    tbl_Page
    WHERE 
   (@IsLoggedIn = 1 AND [HideIfLoggedIn] = 0) 
   AND [RequireLogin] = @IsLoggedIn
   AND [RequireAdmin] = @IsAdmin 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T00:05:19.820

我认为当 where 子句围绕否定句构建时，这具有更好的可读性......

```
SELECT 
    PageID,
    RequireLogin,
    RequireAdmin,
    HideIfLoggedIn
FROM 
    tbl_Page
WHERE 
    NOT
    (
       (HideIfLoggedIn = 1 AND @IsLoggedIn = 1)
       OR (RequireLogin = 1 AND @IsLoggedIn = 0)
       OR (RequireAdmin = 1 AND @IsAdmin = 0)
    ) 
```

# css - 响应式对齐、浮动和居中图像

> ID：15328130
> 
> 赞同：5
> 
> 时间：2013-03-10T21:53:20.953
> 
> 标签：css, responsive-design, css-float, alignment

我试图弄清楚如何编写我的 HTML 和 CSS 以使 3 个屏幕截图图像对齐，如下面的屏幕截图所示。

这个想法是当用户调整窗口的大小时，左侧和右侧的图像应该向中心移动，或者在主图像后面更紧，并且主图像始终保持居中。

**我的开发者链接： http:** [//leongaban.com/portfolio/athenasweb/](http://leongaban.com/portfolio/athenasweb/)

**我的 CodePen** [http://codepen.io/leongaban/pen/AwJFt](http://codepen.io/leongaban/pen/AwJFt)

![在此处输入图像描述](../Images/266a381128d5af68a8bc2741ca57e719.png)

提示或方向将非常感激！:D

*HTML*

```
<div class="pattern">

    <div class="athena_thumbs">

        <div class="first">
            <img src="../../images/athena1.jpg"/>
        </div>

        <div class="second">
            <img src="../../images/athena2.jpg"/>
        </div>

        <div class="third">
            <img src="../../images/athena3.jpg"/>
        </div>

    </div>

</div> 
```

*CSS*

```
div.inner .pattern {
    position: absolute;
    width: 100%;
    height: 100%;
    background-image:url('http://leongaban.com/images/pattern_diagonal_lines.png');
    background-repeat: repeat;
    z-index:2;
 }    

.athena_thumbs {
    position: absolute;
    max-width: 1000px;
    margin: 250px auto 0;
}

.athena_thumbs .first {
    position: relative;
    margin: 0 auto;
    float: left;
    left: 25%;
    right: 25%;
    z-index: 3;
}

.athena_thumbs .second {
    position: relative;
    float: left;
    left: 10%;
    right: 5%;
    z-index: 2;
}

.athena_thumbs .third {
    position: relative;
    float: left;
    right: 10%;
    left: 5%;
    z-index: 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T22:15:45.433

开会迟到了。但是，如果你看看

代码笔：[http ://codepen.io/anon/pen/bazEr](http://codepen.io/anon/pen/bazEr)

```
.athena_thumbs {
    position: absolute;
    width: 90%;
    margin-left: 5%;  
    text-align: center;
    overflow: hidden;
}

.athena_thumbs .first {
    position: relative;
    margin: 0 auto;
    z-index: 3;
}

.athena_thumbs .second {
    position: absolute;
    left: 0px;
    top: 0px;
    z-index: 2;
}

.athena_thumbs .third {
    position: absolute;
    right: 0px;
    top: 0px;
    z-index: 1;
} 
```

我认为这会让你朝着正确的方向前进。没有跨浏览器检查的方式。只是基本的根据效果或多或少的到位。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T22:17:28.087

我希望这能够帮到你。我已经整理了一个小演示，说明我将如何获得您所追求的效果，您可以在[此处](http://jsfiddle.net/fPJEB/)找到。

我会将外部缩略图设置为`position: absolute;`，将它们粘贴到父容器的任一侧，并确保您给它们一个顶部位置以使其保持一致。将居中的缩略图设置为`position: relative`，并像往常一样使用自动边距将其居中。z-indexing 将外侧拇指保持在居中拇指的后面。

# javascript - Guiders.js - 显示元素的 Guider

> ID：15328134
> 
> 赞同：-1
> 
> 时间：2013-03-10T21:53:44.880
> 
> 标签：javascript, guiders.js

我有一个引导器显示它所连接的元素，如下所示：

![与元素相关的指南](../Images/aaa44f00be4fd1fa22e32799275742ff.png)

我的向导代码是：

```
guiders.createGuider({
    title:"Flosses",
    description:"Strawberry Floss Is All About Flosses, We Have Made One For You, Why Not View It Now?",
    id:"2",
    buttons:[],
    attachTo:"#firstFloss",
    position:6
}); 
```

我希望引导器向下移动 100 像素左右，让我看到它所连接的元素。

谢谢，
阿里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:55:05.387

根据[https://github.com/jeff-optimizely/Guiders-JS](https://github.com/jeff-optimizely/Guiders-JS)您可以使用该参数`offset: { left:0, top: -10 }`来调整确切的位置。但看起来您的指南位于项目的顶部。这是故意的吗？检查您是否针对正确的元素`attachTo`

# jquery - 如何将其变成“点击”错误消息？

> ID：15328143
> 
> 赞同：0
> 
> 时间：2013-03-10T21:54:27.687
> 
> 标签：jquery, forms, validation, error-handling

我有一个带有电子邮件和密码输入的用户注册表单。

我有用于验证排序的电子邮件的 jQuery，但在客户端，如果密码输入为空，则密码将在单击提交时显示错误。

页面加载时我已经开始工作了

```
$(document).ready(function() {
    $(":input").each(function() {
       if($(this).val() === "")
            $('#password_default_value').show();
    });
}); 
```

但需要得到它，所以它只检查用户何时单击#login-submit 按钮

我试过了

```
$(document).ready(function() {
    $('#login-submit').click(function() {
    $(":input").each(function() {
       if($(this).val() === "")
            $('#password_default_value').show();
    });
    }
}); 
```

但它不起作用。我猜我的代码在某处严重错误，但我看不到在哪里。

任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:58:59.513

你有一些乱七八糟的括号，试试这样：

```
$(document).ready(function() {
    $('#login-submit').click(function() {
        $(":input").each(function() {
            if($(this).val() === "") {
                $('#password_default_value').show();
            }
        });
    });
}); 
```

此外，如果`#login-submit`是表单的提交按钮，您应该从单击处理程序返回 false，否则当用户单击此提交按钮时页面将导航离开，并且您的 javascript 可能永远没有时间执行。

# javascript - 在 JS 中克隆对象时的“New”关键字

> ID：15328148
> 
> 赞同：0
> 
> 时间：2013-03-10T21:54:46.283
> 
> 标签：javascript

我有点期待下面的代码能够工作——我想要一个非递归的克隆。

它没有...

为什么，我能做些什么来绕过它？

```
person=new Object();
person.firstname="John";
person2 = new person; //Expected a new person object with firstname john    

"TypeError: object is not a function" 
```

和同样的

```
person2 = new person() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T21:56:29.647

Javascript 中的`new`运算符应用于**函数**以创建新对象，并将该函数**原型链**应用于新对象。您不能将其直接应用于对象。

如果你想在 javascript 中克隆一个对象，这不是一个简单的过程。您可以查看此答案以获取可能性列表：[如何正确克隆 JavaScript 对象？](https://stackoverflow.com/questions/728360/copying-an-object-in-javascript). 最简单的方法是使用 jQuery 和 $.extend。但是您也可以编写一个通用的 Javascript 解决方案。如果您只想将它​​用于特定类型的对象，它可能相当简单。

如果你想正确使用 new ，你可以像这样创建一个构造函数

```
var Person = function() {
 this.firstname = "John";
};
var person1 = new Person();
var person2 = new Person(); 
```

这将创建 2`Person`个彼此独立的新对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T21:56:38.063

```
var Person = function() {
 this.firstname = 'John';
};

person2 = new Person(); 
```

抛出的错误为您提供了有价值的信息（这在 JavaScript 中肯定很少见）——您只能在将 new 运算符应用于函数时使用它，而不是任何其他对象。

# java - 在 txt 文件中读取所需的行

> ID：15328149
> 
> 赞同：-1
> 
> 时间：2013-03-10T21:55:02.090
> 
> 标签：java, file-io

如何在我附加到的文本文件中搜索特定条目？

我制作了一个 GUI 来输入数据，但是我可以读取整个文件，但这对我没有用，因为我从用户的角度思考，如果想要调用更早的预订，我对了解如何做到这一点。当我读回数据时，我正在尝试实例化一个对象。

这是我的一些代码：

```
search.addActionListener(new ActionListener()
    {
        public void actionPerformed(ActionEvent e)
        {
            String booking;
            String where;
            booking = JOptionPane.showInputDialog(" Booking Reference: ");    
            System.out.println("Booking Reference " + e.getActionCommand());
            if (booking.equals("Wales"))
            try{

            FileInputStream fstream = new FileInputStream("Wales.txt");
            // Use DataInputStream to read binary NOT text.
            BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
            String strLine;

            while ((strLine = br.readLine()) != null)   {

            System.out.println (strLine);
           }

            in.close();
            }
            catch (Exception ex)
            {
            System.err.println("Error: " + ex.getMessage());
            }
            else if (booking.equals("Scotland"))
            try{

            FileInputStream fstream = new FileInputStream("Scotland.txt");

            DataInputStream in = new DataInputStream(fstream);
            BufferedReader br = new BufferedReader(new InputStreamReader(in));
            String strLine; 
            while ((strLine = br.readLine()) != null)   {

            System.out.println (strLine);
           }
            where = JOptionPane.showInputDialog("Which booking reference do you wish to search?: ");

            }
            catch (Exception ex)
            {
            System.err.println("Error: " + ex.getMessage());
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:10:28.980

我认为您最好探索一种文件格式，例如 XML、JSON 或 INI 来处理这种事情。正如您开始意识到的那样，没有支持格式的文本文件就是：文本文件。

如果您只想读回一些键/值对，请尝试使用 INI 文件之类的东西，使用[这个 Java INI 库](http://ini4j.sourceforge.net/)。

如果要从保存的文件中实例化对象，XML 是更好的选择。将对象保存到文本文件，并从保存的文件中重构该对象称为[序列化](https://stackoverflow.com/questions/1973829/best-approach-to-object-xml-serialization-in-java)。

# java - Java - 从服务器再次向客户端请求密码

> ID：15328152
> 
> 赞同：0
> 
> 时间：2013-03-10T21:55:14.523
> 
> 标签：java, passwords, client-server

我正在尝试创建一个更高级的服务器到客户端程序，但我偶然发现了一个问题。我设法要求客户输入密码，如果为假，它会拒绝客户。

但是，我尝试向服务器添加一段时间条件：如果客户端输入错误的密码，则要求他/她重新输入密码。但是我尝试使用扫描仪，但我收到错误时认为这不是解决方案。

服务器端：

```
 while(pw.equals("PASS")){
        toClient.writeBytes("This pw " + pw + " is correct. Access granted! " + "\n");
        }
        toClient.writeBytes("Your password... " + pw + " is wrong. Please retry.");
        pw = fromClient.readLine();
        toClient.writeBytes(pw+ "\n");
   } 
```

客户端：

```
 System.out.print("Enter your password: ");
        myPass = fromUser.readLine();

        toServer.writeBytes(myPass + "\n");

        myPass = fromServer.readLine();
        System.out.println(myPass); 
```

代码很长。但一切正常。连接建立，端口号相同。唯一的问题是我无法让客户继续重新输入密码，直到正确为止。

我也必须为客户端做一个while循环吗？我不太确定...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:19:09.263

1st：为什么服务器端会有while循环？

第二：@j0chn 建议的在客户端使用标志的循环是正确的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:02:36.737

我建议一个循环，您可以在其中使用布尔值来保持循环处于活动状态。
像这样的东西：

```
boolean isCorrect = false;
System.out.print("Enter your password: "); 
while(!isCorrect){
    myPass = fromUser.readLine();

    toServer.writeBytes(myPass + "\n");

    if(myPass == fromServer.readLine()){
        isCorrect = true;
    }
    myPass = fromServer.readLine();

    System.out.println(myPass);
} 
```

也许你必须改变这部分：

```
if(myPass == fromServer.readLine()){ 
```

至：

```
if(myPass.equals(fromServer.readLine()){ 
```

但请记住，有很多可能性。

我希望它对你有帮助。

# python - 服务器启动后如何执行后台线程？

> ID：15328156
> 
> 赞同：0
> 
> 时间：2013-03-10T21:55:48.077
> 
> 标签：python, django

我想在 Django 服务器启动后执行一些 python 代码。此代码有一个无限循环，将在后台运行，直到服务器关闭。它访问数据库和各种互联网服务。同时，用户应该能够使用前端网页并拥有数据库访问权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T23:11:34.993

如果您需要在启动时启动子进程，则需要清除一些位：

1.  通过“启动”，您*必须*表示单个 Django 线程何时启动。
2.  如果您在多线程代理设置下安装了 Django，并且您只想拥有一个子进程，无论您的机器上运行了多少 Django 线程，您都需要找出某种方法来检查您的子进程已经启动，或者将你的“子进程”变成一个完整的进程/服务，并使用某种类型的守护进程管理器来启动 Django 和你的子进程。

也就是说，最容易修补的地方可能是`settings.py`. 当 Django 线程启动时，此文件/模块被导入一次。

`wsgi.py`如果您使用 WSGI 代理设置，您也可以在.

对于“如何开始一个线程”的答案，[请看这个](https://stackoverflow.com/questions/6602761/django-background-task)。

# linux - linux：获取父级和分叉子级之间共享的页面

> ID：15328163
> 
> 赞同：0
> 
> 时间：2013-03-10T21:56:39.233
> 
> 标签：linux, memory-management

据我了解，Linux 不会将所有父进程内存复制到子进程的单独页面，它会进行写时复制。直到任一进程修改（写入）映射（共享）页面中的某个内存位置，我们才会将子虚拟地址空间和父虚拟地址空间映射到相同的物理内存位置（相同的物理页面）。

我想知道是否有可用的工具向我显示进程共享的物理内存页面#。或任何提供虚拟地址 -> 物理地址映射的工具。这样我就可以实际查看物理地址并检查进程是否映射到相同的物理内存。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:19:43.760

我不知道是否有可用的专用工具，但所需的所有信息都应该已经通过`/proc`文件系统导出。

您问题中给出的特殊用例甚至在相关文档中明确提到。（`linux-src-directory/Documentation/vm/pagemap.txt`或在线[https://www.kernel.org/doc/Documentation/vm/pagemap.txt](https://www.kernel.org/doc/Documentation/vm/pagemap.txt)）：

> 使用 pagemap 来了解进程的内存使用情况的一般过程如下：
> 
> 1.  读取 /proc/pid/maps 以确定内存空间的哪些部分映射到什么。
> 2.  选择您感兴趣的地图——所有地图，或特定库，或堆栈或堆等。
> 3.  打开 /proc/pid/pagemap 并查找您要检查的页面。
> 4.  从 pagemap 中为每个页面读取一个 u64。
> 5.  打开 /proc/kpagecount 和/或 /proc/kpageflags。对于您刚刚读取的每个 PFN，在文件中查找该条目，然后读取您想要的数据。
> 
> 例如，要查找“唯一集大小”（USS），即一个进程正在使用的不与任何其他进程共享的内存量，您可以遍历进程中的每个映射，找到 PFN，查看那些在 kpagecount 中增加的，并计算只被引用一次的页数。

# ospf - 如何使用 quagga ospfd 重新分配连接的 /32？

> ID：15328171
> 
> 赞同：1
> 
> 时间：2013-03-10T21:57:18.913
> 
> 标签：ospf, quagga

我有一个充当 quagga 路由器的 VM 主机。它宣布到其托管虚拟机的路由（我不使用网桥，只使用路由虚拟机）

当 tun 接口配置了 /30 时，它运行良好；例如 ：

```
$ ip a
4: gentoo: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UNKNOWN qlen 500
    link/ether 2a:c8:0a:ae:cc:c1 brd ff:ff:ff:ff:ff:ff
    inet 10.42.1.5/30 brd 10.42.1.7 scope global gentoo
    inet6 fe80::5c23:52ff:fec1:f2b7/128 scope link 
       valid_lft forever preferred_lft forever
    inet6 fe80::28c8:aff:feae:ccc1/64 scope link 
       valid_lft forever preferred_lft forever 
```

但是我想在一些虚拟机上放置一些公共路由的 IP，而不会浪费 3 个 IP 用于网络、广播和主机 IP；例如 ：

```
$ ip ro
94.23.110.211 dev gentoo  scope link 
```

路由显示在“show ip route”quagga 命令中

```
arrakeen# show ip route 
```

代码：K - 内核路由，C - 已连接，S - 静态，R - RIP，O - OSPF，I - ISIS，B - BGP，> - 选定路由，* - FIB 路由

```
O   0.0.0.0/0 [110/110] via 10.42.42.1, eth0, 00:01:24
K>* 0.0.0.0/0 via 10.42.42.1, eth0
O>* 10.0.0.0/24 [110/20] via 10.42.42.1, eth0, 00:01:25
C>* 10.0.42.21/32 is directly connected, eth0
O>* 10.42.0.0/24 [110/20] via 10.42.42.1, eth0, 00:01:25
O   10.42.1.4/30 [110/10] is directly connected, gentoo, 00:01:35
C>* 10.42.1.4/30 is directly connected, gentoo
K>* 10.42.1.6/32 via 10.42.1.5, gentoo
O   10.42.42.0/24 [110/10] is directly connected, eth0, 00:01:35
C>* 10.42.42.0/24 is directly connected, eth0
O>* 10.242.0.1/32 [110/30] via 10.42.42.1, eth0, 00:01:25
O>* 10.255.0.1/32 [110/30] via 10.42.42.1, eth0, 00:01:25
O>* 10.255.0.2/32 [110/20] via 10.42.42.1, eth0, 00:01:25
O   94.23.110.210/32 [110/10] is directly connected, eth0, 00:01:35
C>* 94.23.110.210/32 is directly connected, eth0
K>* 94.23.110.211/32 is directly connected, gentoo
C>* 127.0.0.0/8 is directly connected, lo 
```

但正如你所见，它不在 OSPF 的 fib 中

```
arrakeen# show ip ospf route  
============ OSPF network routing table ============
N    10.0.0.0/24           [20] area: 0.0.0.0
                           via 10.42.42.1, eth0
N    10.42.0.0/24          [20] area: 0.0.0.0
                           via 10.42.42.1, eth0
N    10.42.1.4/30          [10] area: 0.0.0.0
                           directly attached to gentoo
N    10.42.1.36/30         [10] area: 0.0.0.0
N    10.42.42.0/24         [10] area: 0.0.0.0
                           directly attached to eth0
                           via 10.42.42.1, eth0
N    10.242.0.1/32         [30] area: 0.0.0.0
                           via 10.42.42.1, eth0
N    10.255.0.1/32         [30] area: 0.0.0.0
                           via 10.42.42.1, eth0
N    10.255.0.2/32         [20] area: 0.0.0.0
                           via 10.42.42.1, eth0
N    94.23.110.210/32      [10] area: 0.0.0.0
                           directly attached to eth0
N    94.23.110.218/32      [30] area: 0.0.0.0
                           via 10.42.42.1, eth0

============ OSPF router routing table =============
R    10.42.42.1            [10] area: 0.0.0.0, ASBR
                           via 10.42.42.1, eth0

============ OSPF external routing table ===========
N E1 0.0.0.0/0             [110] tag: 0
                           via 10.42.42.1, eth0 
```

有没有办法强迫他们进入 ospf ？

这是 ospfd.conf ：

```
! -*- ospf -*-
!
hostname arrakeen
!
interface eth0
!
router ospf
 ospf router-id 10.42.42.21
 redistribute static
 redistribute connected
 network 10.42.1.0/24 area 0
 network 10.42.42.0/24 area 0
 network 94.23.110.210/28 area 0
!
log file /var/log/quagga/ospfd.log 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-06T12:39:41.943

`redistribute kernel`失踪

# android - 带路线的离线地图

> ID：15328172
> 
> 赞同：0
> 
> 时间：2013-03-10T21:57:22.243
> 
> 标签：android, map, osmdroid

我正在开发一个使用 osmdroid 地图 (Mapnik).PNG 离线工作的应用程序，如果 osmdroid 将与我一起工作并进行路由，我将添加到它的路由。如果不是使用哪个地图而不是 osmdroid。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:38:15.837

[Graphhopper](http://graphhopper.com/)是一个在线/离线工作的路由引擎，它基于[mapsforge](https://code.google.com/p/mapsforge/)，但我几乎可以肯定 Graphhopper 也可以在 osm 下工作。

# java - 如何将字段值存储在扫描仪中

> ID：15328175
> 
> 赞同：0
> 
> 时间：2013-03-10T21:57:40.013
> 
> 标签：java, string, field, java.util.scanner, assign

我正在尝试分配我的值`String`，我`Scanner`应该使用`nextLine()`它可能包含多个单词还是应该使用`next()`？
原来的代码太长了，反正我也贴不上来。该方法有一个参数`Scanner scanner`，该方法被另一个类调用，它传递了另一个类的实例，我想知道的是如何使用`Scanner`

```
private String name;

private String id;

 public void readData()
    {
       Scanner scanner = new Scanner();

       name = scanner.nextLine();

       id = scanner.nextLine();
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:15:00.740

使用该`nextLine`方法读取当前行上的所有内容。当前行可能只有一个换行符，它会返回一个空字符串。

我认为 Id 使用`scanner.next()`or`scanner.nextLine()`是相同的，因为 id 是一个值，但`next()`在我看来更好，但是对于名称，您可能会使用`nextLine()`method 。

# java - 日食球衣

> ID：15328180
> 
> 赞同：0
> 
> 时间：2013-03-10T21:58:24.887
> 
> 标签：java, jersey

我正在使用 jersey 开发服务器端应用程序。框架很好，我喜欢它，但我有一个问题：

- 我第一次请求页面（例如 http://:/testAPI）我得到这个错误

（请注意，我只有在第一次在浏览器中编写 url 时才会收到此错误。如果我重新发送请求，一切都会顺利进行。）

```
 n thread "pool-1-thread-1" java.lang.NoClassDefFoundError:   org/codehaus/jackson/xc/JaxbAnnotationIntrospector
at org.codehaus.jackson.jaxrs.MapperConfigurator._resolveIntrospector(MapperConfigurator.java:171)
at org.codehaus.jackson.jaxrs.MapperConfigurator._resolveIntrospectors(MapperConfigurator.java:146)
at org.codehaus.jackson.jaxrs.MapperConfigurator._setAnnotations(MapperConfigurator.java:133)
at org.codehaus.jackson.jaxrs.MapperConfigurator.getDefaultMapper(MapperConfigurator.java:70)
at org.codehaus.jackson.jaxrs.JacksonJsonProvider.locateMapper(JacksonJsonProvider.java:648)
at org.codehaus.jackson.jaxrs.JacksonJsonProvider.writeTo(JacksonJsonProvider.java:500)
at com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:306)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1437)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
at  com.sun.jersey.server.impl.container.httpserver.HttpHandlerContainer.handle(HttpHandlerContainer.java:191)
at com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:65)
at sun.net.httpserver.AuthFilter.doFilter(AuthFilter.java:65)
at com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:68)
at sun.net.httpserver.ServerImpl$Exchange$LinkHandler.handle(ServerImpl.java:557)
at com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:65)
at sun.net.httpserver.ServerImpl$Exchange.run(ServerImpl.java:529)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.ClassNotFoundException:                         rg.codehaus.jackson.xc.JaxbAnnotationIntrospector
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
... 20 more 
```

你能帮助我吗？

多谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:08:46.550

您需要添加[可选的 Jackson XML Compatibility (XC) library](http://wiki.fasterxml.com/JacksonDownload)。

# eclipse - Java Eclipse 在保存时关闭自动构建工作区

> ID：15328183
> 
> 赞同：48
> 
> 时间：2013-03-10T21:58:31.440
> 
> 标签：eclipse, build, save, workspace

突然间，每当我保存时，我的 Eclipse 就开始自动构建工作区，而且每次保存都需要很长时间（我倾向于经常保存）。它以前从未这样做过，所以我想知道：我该如何关闭它？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-03-11T07:36:05.897

如果要关闭自动构建项目，请单击**项目**菜单并取消选中**自动构建**菜单。
![在此处输入图像描述](../Images/f322ba7aa89e56890ef42b3173109c4b.png)

# java - 使 JSpinner 聚焦时选择文本

> ID：15328185
> 
> 赞同：9
> 
> 时间：2013-03-10T21:58:40.387
> 
> 标签：java, swing, jspinner, focuslistener

我想更改 JSpinner 的行为，以便当您单击文本时，它会选择它。这使得用您想要的值替换字段变得更容易。不幸的是，我无法让该行为起作用，相反，它只是将光标插入文本中，而不选择已经存在的内容。

我已经尝试通过 向 JSpinner 本身和文本区域本身添加一个焦点监听器`((DefaultEditor) this.getEditor()).getTextField()`，但这些似乎都没有预期的效果。我的代码（对于 JSpinner 本身）如下：

```
spinner.addFocusListener(new FocusAdapter(){
            @Override
            public void focusGained(FocusEvent e) {
                ((DefaultEditor) ((JSpinner) e.getSource()).getEditor()).getTextField().selectAll();
            }
        }); 
```

我不确定问题是什么。如果重要的话，我正在运行 Mac OS 10.7.5 和 Java 6u43。

编辑：我`System.out.println`在 focusGained 方法的开头放了一个权利，发现它从未被调用过。所以看起来专注于 JSpinner 并没有注册。同样，我尝试将 focusAdpater 放在微调器和文本字段上（虽然不是同时）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T01:15:07.870

不了解 Mac，但我在 Windows 上使用过以下代码：

```
JSpinner.DefaultEditor editor = (JSpinner.DefaultEditor)spinner.getEditor();
JTextField textField = editor.getTextField();
textField.addFocusListener( new FocusAdapter()
{
    public void focusGained(final FocusEvent e)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                JTextField tf = (JTextField)e.getSource();
                tf.selectAll();
            }
        });

    }

}); 
```

我还使用此代码在 JFormattedTextField 上选择文本。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-10T22:21:44.700

您面临的大部分问题与微调器如何在焦点事件（和其他几个状态事件）之后验证微调器中的任何值有关，这将绕过高亮。

MacOS 更糟糕。

我最终做的是开始`Thread`等待很短的时间（大约 25 毫秒），然后用来`SwingUtilities.invokeLater`实际执行选择......

**更新了一个例子**

```
import java.awt.Component;
import java.awt.EventQueue;
import java.awt.GridBagLayout;
import java.awt.event.FocusAdapter;
import java.awt.event.FocusEvent;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JSpinner;
import javax.swing.SpinnerNumberModel;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.text.JTextComponent;

public class AutoFocusSpinner {

    public static void main(String[] args) {
        new AutoFocusSpinner();
    }

    public static final SelectOnFocusGainedHandler SHARED_INSTANCE = new SelectOnFocusGainedHandler();

    public AutoFocusSpinner() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JSpinner spinner = new JSpinner(new SpinnerNumberModel(1, 0, 100, 1));
                installFocusListener(spinner);

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new GridBagLayout());
                frame.add(spinner);
                frame.add(new JButton("Here for testing"));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public void installFocusListener(JSpinner spinner) {

        JComponent spinnerEditor = spinner.getEditor();

        if (spinnerEditor != null) {

            // This is me spending a few days trying to make this work and 
            // eventually throwing a hissy fit and just grabbing all the 
            // JTextComponent components contained within the editor....
            List<JTextComponent> lstChildren = findAllChildren(spinner, JTextComponent.class);
            if (lstChildren != null && lstChildren.size() > 0) {

                JTextComponent editor = lstChildren.get(0);
                editor.addFocusListener(SHARED_INSTANCE);

            }

        }

    }

    public static <T extends Component> List<T> findAllChildren(JComponent component, Class<T> clazz) {

        List<T> lstChildren = new ArrayList<T>(5);
        for (Component comp : component.getComponents()) {

            if (clazz.isInstance(comp)) {

                lstChildren.add((T) comp);

            } else if (comp instanceof JComponent) {

                lstChildren.addAll(findAllChildren((JComponent) comp, clazz));

            }

        }

        return Collections.unmodifiableList(lstChildren);

    }

    public static class SelectOnFocusGainedHandler extends FocusAdapter {

        @Override
        public void focusGained(FocusEvent e) {

            Component comp = e.getComponent();
            if (comp instanceof JTextComponent) {
                final JTextComponent textComponent = (JTextComponent) comp;
                new Thread(new Runnable() {
                    @Override
                    public void run() {
                        try {
                            Thread.sleep(25);
                        } catch (InterruptedException ex) {
                        }
                        SwingUtilities.invokeLater(new Runnable() {
                            @Override
                            public void run() {
                                textComponent.selectAll();
                            }
                        });
                    }
                }).start();
            }            
        }        
    }
} 
```

现在，现在，我正在祈祷我们可以设置一些非常好的、简单的、未记录的属性，这意味着我们不需要做所有这些：P

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-03T13:12:45.060

对我来说，@MadProgrammer 和@camickr 的上述解决方案都能够将焦点放在微调器上，但不能放在选定的文本上。我可以增加或减少我的微调器的值。tab 键也对我有用，所以我可以在按 tab 键后选择我的微调器的 JTextField。

为了模拟 Tab 键按下，以下解决方案对我有用。这是我在@MadProgrammer 和@camickr 提供的解决方案之后立即调用的。 [使 JSpinner 聚焦时选择文本](https://stackoverflow.com/questions/15328185/make-jspinner-select-text-when-focused)

# java - LWJGL 平滑动画

> ID：15328187
> 
> 赞同：2
> 
> 时间：2013-03-10T21:58:53.740
> 
> 标签：java, opengl, lwjgl

我已经编写了一些从高度图渲染 3D 世界的代码，现在我也编写了允许步行的代码。问题是，当高度增加时，动画几乎“跳跃”，因为每个单位都相当大。有没有一种简单的方法可以使动画更流畅一些？（总的来说，我对 OpenGL 和 3D 渲染非常陌生，所以我不想涉足插值和更复杂的事情。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:09:46.233

您是否正在寻求有关如何顺利移动的帮助？和加速一样？

如果是这样，您可以执行以下操作：

你的玩家类应该有一个位置、速度和方向向量。不断地把你的速度加到你的位置上，像这样

```
//mainloop...
{
position.add(velocity);
} 
```

静止时你的速度是 <0,0,0> 所以没有位置变化，移动播放只需像这样将你的方向的百分比添加到你的速度。

```
if(Key.W)
velocity.add(direction); 
```

这基本上是加速。现在停止，您应该将一定百分比的方向矢量添加到您的速度，但方向相反。

```
public class Camera
{
    public final static Camera VIEW = new Camera();
    //
    public Vector3 position; 
    public Vector3 directionalVelocity, angularVelocity;
    public Vector3 rotation;
    public Vector3 cameraDirectionVector; // vector pointing in direction of camera

    public Camera()
    {
        this.position = new Vector3(0,0,0);
        this.rotation = new Vector3(0,0,0);
        this.directionalVelocity = new Vector3(0, 0, 0);
        this.angularVelocity = new Vector3(0, 0, 0);
        this.cameraDirectionVector = new Vector3(0, 0, 0);
        Mouse.setGrabbed(true);
    }
    public void setPosition(float x, float y, float z)
    {
        this.position.set(x, y, z);
    }
    public void setRotation(float x, float y, float z)
    {
        this.rotation.set(x, y, z);
    }

    private float walkAcc = 0.2f;
    private float mouseAcc = 0.2f;

    public void update()
    {
        GL11.glLoadIdentity(); // reset matrix
        GL11.glRotatef(rotation.x, 1, 0, 0);
        GL11.glRotatef(rotation.y, 0, 1, 0);
        GL11.glRotatef(rotation.z, 0, 0, 1);
        GL11.glTranslatef(position.x, position.y, position.z);
        //
            // mouse Input , increment angularVelocity
        if(Mouse.isGrabbed())
        {
            float mouseX = Mouse.getDX() * mouseAcc;
            float mouseY = Mouse.getDY() * mouseAcc;
            if(mouseY > 0 && this.rotation.x > -90)
                this.angularVelocity.x -= mouseY;
            if(mouseY < 0 && this.rotation.x < 90)
                this.angularVelocity.x += -mouseY;
            if(mouseX > 0)
                this.angularVelocity.y += mouseX;
            if(mouseX < 0)
                this.angularVelocity.y -= -mouseX;
                    // slow down mouse velocity
            this.applyFriction(this.angularVelocity, 0.4f);  
        }
        //
            // Keyboard input , add direction to velocity
        if(Keyboard.isKeyDown(Keyboard.KEY_W))
            this.walkForward(this.walkAcc);
        if(Keyboard.isKeyDown(Keyboard.KEY_S))
            this.walkBackwards(this.walkAcc);
        if(Keyboard.isKeyDown(Keyboard.KEY_D))
            this.strafeRight(this.walkAcc);
        if(Keyboard.isKeyDown(Keyboard.KEY_A))
            this.strafeLeft(this.walkAcc);
        if(Keyboard.isKeyDown(Keyboard.KEY_SPACE))
            this.directionalVelocity.y -= walkAcc;
        if(Keyboard.isKeyDown(Keyboard.KEY_LSHIFT))
            this.directionalVelocity.y += walkAcc;
            //
        //slow down walk speed
        this.applyFriction(this.directionalVelocity, 0.09f);
        //
            // add velocity to position
        this.position.add(this.directionalVelocity);
        this.rotation.add(this.angularVelocity);
        //
        this.updateCameraDirectionVector();
    }

   // Calculates a vector pointing in the direction of your cross hair
    public Vector3 updateCameraDirectionVector() 
    {

        //x = rsin(angle1)cos(angle2)
        //y = rsin(angle1)sin(angle2)
        //z = rcos(angle1)

        this.cameraDirectionVector.x = (float) (Math.sin(Math.toRadians(rotation.y)) * Math.cos(Math.toRadians(rotation.x)));
        this.cameraDirectionVector.z = (float) (-Math.cos(Math.toRadians(rotation.y)) * Math.cos(Math.toRadians(rotation.x)));
        this.cameraDirectionVector.y = (float) -Math.sin(Math.toRadians(rotation.x)); // good
        return this.cameraDirectionVector;
    }
    public void applyFriction(Vector3 vector, float speed)
    {
        //add a percentage of opposite direction to current direction
        vector.x += -vector.x * speed;
        vector.y += -vector.y * speed;
        vector.z += -vector.z * speed;
    }
    public void walkForward(float distance)
    {
        this.directionalVelocity.x -= this.cameraDirectionVector.x * distance;
        this.directionalVelocity.y -= this.cameraDirectionVector.y * distance;
        this.directionalVelocity.z -= this.cameraDirectionVector.z * distance;

    }
    public void walkBackwards(float distance)
    {
        this.directionalVelocity.x += this.cameraDirectionVector.x * distance;
        this.directionalVelocity.y += this.cameraDirectionVector.y * distance;
        this.directionalVelocity.z += this.cameraDirectionVector.z * distance;

    }
    public void strafeLeft(float distance)
    {
        // cross product with (0,1,0) ... y unit vector..
        this.directionalVelocity.x += -this.cameraDirectionVector.z * distance;
        this.directionalVelocity.z += this.cameraDirectionVector.x * distance;

    }
    public void strafeRight(float distance)
    {
        // cross product with -(0,1,0) ... y unit vector..
        this.directionalVelocity.x -= -this.cameraDirectionVector.z * distance;
        this.directionalVelocity.z -= this.cameraDirectionVector.x * distance;

    }
    @Override
    public String toString()
    {
        return this.position.x + " " + this.position.y + " " + this.position.z;
    }
} 
```

// 这是一个基本的矢量类，我对其进行了简化以便于阅读。

```
public class Vector3
{
   public float x,y,z;
   public Vector3(float x,float y, float z)
   {
   this.x = x;
   this.y = y;
   this.z = z;
   }
   public void add(Vector3 v)
   {
    this.x += v.x;
    this.y += v.y;
    this.z += v.z;
   }
 public void set(float x, float y ,float z)
   {
    this.x = x;
    this.y = y;
    this.z = z;
   }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T02:19:32.250

尝试做一些三角函数——在整数数组中映射点：

```
int [x][y][z] 
```

你甚至可以让游戏为你做这件事。发挥创意。然后制作一个循环，将每个点映射出来，让“玩家”站在上面。如果它仍然不起作用，请尝试以 0.5 为增量使用浮点数的相同方法。希望我有所帮助。:)

# javascript - 在使用 javascript 上传之前缩小图像

> ID：15328191
> 
> 赞同：10
> 
> 时间：2013-03-10T21:59:29.697
> 
> 标签：javascript, image, shrink

我正在使用 phonegap 编写一个跨平台的移动应用程序，并且我有一个文件上传输入，用于上传单个图像的图像。

问题是大多数上传的图片都是用手机拍摄的，大小约为4MB。

我想大幅缩小这些图像，因为我根本不需要它们的高质量。

另外，我需要将它们转换为 base64 而不是真实图像文件。（我已经在使用 FileReader）

任何想法如何实现这一目标？也许使用画布或其他东西？

**更新：** 这是我到目前为止所拥有的：

```
function shrink() {
    var self = this;

    var reader = new FileReader(); // init a file reader
    var file = $('#file-input').prop('files')[0]; // get file from input

    reader.onloadend = function() {

        // shrink image
        var image = document.createElement('img');
        image.src = reader.result;

        var canvas = document.createElement('canvas');
        var ctx = canvas.getContext('2d');
        ctx.drawImage(image, 0, 0, 300, 300);
        var shrinked = canvas.toDataURL('image/jpeg');
        console.log(shrinked);
    };

    reader.readAsDataURL(file); // convert file to base64*/
} 
```

但我得到的只是黑色图像谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T23:00:39.473

Found the answer.

The problem was that i wasn't waiting for the image to fully load before drawing it.

once i added

```
image.onload = function() {

} 
```

and ran everything inside it works.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-17T23:20:45.057

我知道这是一个旧线程，但我有同样的问题关于在哪里放置“负载”，这对我有用......

```
 navigator.camera.getPicture(function (imageURI) {
           console.log("*** capture success. uri length...", imageURI.length);            
           var image = document.createElement('img');
           image.onload = function() {
                var canvas = document.createElement('canvas');
                var ctx = canvas.getContext('2d');
                ctx.drawImage(image, 0, 0, 300, 300);
                var shrunk = canvas.toDataURL('image/jpeg');
                console.log(shrunk);
                // used shrunk here
            }
            image.src = imageURI; // triggers the onload
       } 
```

拍

# ios - 鉴于其他ViewController如何处理ViewController？

> ID：15328192
> 
> 赞同：0
> 
> 时间：2013-03-10T21:59:42.273
> 
> 标签：ios, cocoa-touch, uiviewcontroller, exc-bad-access, popover

我会尝试制作自己的弹出框（在 iPhone、iOS6 上），我需要`ViewController`在其他`ViewController`. 没关系 - 我创建了`ViewController`带有`XIB`接口的类，并添加了一个按钮和连接的操作，它们返回了一些`NSLog`. 我加载`ViewController`如下：

```
PopoverViewController *popover = [[PopoverViewController alloc] initWithNibName:@"PopoverViewController" bundle:nil];

[self.view addSubview:popover.view]; 
```

它正在工作 - `view`from`PopoverViewController`在 上可见`ViewController`，但是当我单击作为子视图的按钮时，`PopoverViewController`我遇到了`EXC_BAD_ACCESS`错误：

```
0x3968a5b0:  ldr    r3, [r4, #8] 
```

如何处理它，以及如何正确显示第二个视图控制器？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:06:20.190

如果您使用 ARC 并且没有对 进行强引用`PopoverViewController`，那么即使您将其视图添加到另一个视图，视图控制器也会被释放。然后，当您点击弹出窗口视图中的按钮时，按钮的目标消失了，应用程序崩溃了。

要么添加一个实例变量以保持对 的引用，`PopoverViewController`要么更好地更新视图控制器的代码以正确地成为容器视图控制器。您真的不应该只将一个视图控制器的视图添加到另一个视图控制器的视图中。`UIViewController`有关创建容器视图控制器的正确方法，请参阅文档。

# sql - 一次字段搜索以匹配数据库中的多个列

> ID：15328194
> 
> 赞同：0
> 
> 时间：2013-03-10T21:59:52.710
> 
> 标签：sql, ruby-on-rails, search-engine

环境：Ruby on Rails、Postgres

我面临挑战，要进行与服务名称及其位置相匹配的搜索......

例如：“巴黎的披萨”

我相信这在形成 SQL 查询之前需要一个语法分析器......

我只是想知道是否有一种我不知道的技术，......是的，比如我的数据库的搜索引擎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:05:05.277

使用 PostgreSQL，您可以在表中创建引用多个列的 tsv_vector 列，为该表添加更新触发器以使其保持最新，并使用全文搜索来构建查询

```
create table food(
    table_id serial primary key,
    food_type text not null,
    location text not null,
    food_tsv tsvector
); 
```

创建表触发器

```
CREATE TRIGGER tsvector_food_update BEFORE INSERT OR UPDATE ON food
FOR EACH ROW EXECUTE PROCEDURE 
tsvector_update_trigger(food_tsv, 'pg_catalog.english', food, location);
CREATE INDEX food_index_tsv ON food USING gin(food_tsv); 
```

示例 SQL 查询将为您提供按相关性排序的结果

```
SELECT * FROM (
    SELECT DISTINCT ON (f.table_id) f.*, ts_rank_cd(f.food_tsv, query) AS rank FROM to_tsquery(searchTerm) AS query, food as f
    WHERE (f.food_tsv @@ query)
    ORDER BY f.table_id DESC LIMIT :limit OFFSET :offset
) AS sub ORDER BY rank DESC 
```

# html - 获取组 KineticJS 的大小

> ID：15328195
> 
> 赞同：3
> 
> 时间：2013-03-10T22:00:17.447
> 
> 标签：html, html5-canvas, kineticjs

我的动力学有问题。

如何从包含两个矩形的组中获取`getHeight()`和获取？`getWidht()`

这是我的代码：

```
var mygrup=new Kinetic.Group({
name:"mygrup",

draggable:true  
})

layer.draw()

var tool= new Kinetic.Rect({
       width: 50,
      height: 20,
      x:0,
      y:20,
      fill: '#'+(0x1000000+(Math.random())*0xffffff).toString(16).substr(1,6),

      name:"image",

    });
var tool1= new Kinetic.Rect({
       width: 50,
      height: 20,
      x:0,
      y:0,
      fill: '#'+(0x1000000+(Math.random())*0xffffff).toString(16).substr(1,6),

      name:"image",

    });
mygrup.add(tool1).add(tool) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:34:17.547

```
 var children = mygrup.getChildren();
  var width = 0;
  for( var i=0; i< children.length; i++){
      if(children[i].getWidth() > width)
          width = children[i].getWidth(); 
  } 
```

这将获得任何元素的最大宽度，但重要的部分是获取组的所有子元素，然后遍历它们。您可以对宽度求和，也可以获取所有 x 值并取最左边的值和最右边的值，然后将其设为您的宽度。或者是其他东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:49:13.637

也许更好的方法是遍历所有的孩子并通过考虑形状宽度来找到 minX、minY、maxX 和 maxY。该组的宽度和高度将是：

变量宽度 = maxX - minX; 变量高度 = maxY - minY;

group.getWidth() 和 group.getHeight()，如果将来实施，将采用类似的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-20T14:31:44.113

SoluableNonagon 实现的嵌套（递归）解决方案

```
function getMaxWidth(root_node){

   var min_x = Number.MAX_VALUE //window.innerWidth(),
       max_x = 0;

   var maxWidth = function recur(node){
       var children = node.getChildren();

       if (children.length === 0) 
           return node.getAbsoluteX();

       for(var i=0; i< children.length; i++){
           var pos = recur(children[i]);

           if (pos > max_x) max_x = pos;
           else if (pos < min_x) min_x = pos;
       }
   }

   return maxWidth(root_node);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-29T14:11:08.660

我的解决方案考虑了重叠的元素以及它们之间有间隙的元素（当它们不接触时）。它还返回 x/y 位置（因为我需要它）。

```
getGroupSize = function (pGroup) {
    var minX = Number.MAX_VALUE,
        maxX = 0,
        minY = Number.MAX_VALUE,
        maxY = 0;
    var children = pGroup.getChildren();
    if (children.length === 0) {
        minX = pGroup.getX();
        maxX = minX + pGroup.width();
        minY = pGroup.getY();
        maxY = minY + pGroup.height();
    }
    else {
        var groupX = pGroup.getX();
        var groupY = pGroup.getY();
        for (var i = 0; i < children.length; i++) {
            var size = this.getGroupSize(children[i]);
            size.minX += groupX;
            size.maxX += groupX;
            size.minY += groupY;
            size.maxY += groupY;
            if (size.minX < minX) {
                minX = size.minX;
            }
            if (size.maxX > maxX) {
                maxX = size.maxX;
            }
            if (size.minY < minY) {
                minY = size.minY;
            }
            if (size.maxY > maxY) {
                maxY = size.maxY;
            }
        }
    }
    return { minX: minX, maxX: maxX, minY: minY, maxY: maxY, width: maxX - minX, height: maxY - minY };
};
```

# html - 在我的网站中包含特定的 div 类

> ID：15328199
> 
> 赞同：1
> 
> 时间：2013-03-10T22:00:59.383
> 
> 标签：html

请注意，我的编码经验几乎只是 CSS/HTML。我最近也被介绍给 jQuery。但我非常愿意尝试您的解决方案（如果我的技能允许的话）。

所以我想做的是在此处包含来自该站点 的**评论：** [Airbnb - Mailodging](https://www.airbnb.ca/users/show/9187 "民宿")。使用 Firefox 的 Inspect 工具，我发现你可以找到这个类的评论的 div：

> div.panel.reviews.space2

我尝试使用 iframe 从外部页面中搜索包含特定类（*不是 ID# ）的方法，但似乎不可能。*您可以建议解决方法或任何其他解决方案吗？

目前，我发现包含评论的唯一方法是通过一个可怕的 iframe。它显示了我不想要的整个页面。[你可以在这里看到它](http://m-lodging.atwebpages.com/reviews.php "在这里你可以看到它。")。呸！似乎我最好通过新标签打开Airbnb页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:06:11.230

使用[jquery.load()](http://api.jquery.com/load/)或[jquery.ajax](http://api.jquery.com/jQuery.ajax/)将外部 html 页面加载到当前页面中。在每个方法的回调函数中，您可以以任何您想要的方式设置、引用或修改外部页面上的 CSS 选择器。您只需阅读 API 以了解如何正确使用它。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:13:40.913

我同意 Nicholas 的观点，查看您的网站和[.load()](http://api.jquery.com/load/)文档，代码可能有点像这样：

```
$('body.en').load('https://www.airbnb.ca/users/show/9187 div.reviews_section as_host'); 
```

未经测试，因此不确定这是否会 100% 工作，因为它是您从中检索的远程站点，并且不确定此功能是否是为此目的而设计的，但请试一试。

# function - 合金功能有很多要求

> ID：15328207
> 
> 赞同：0
> 
> 时间：2013-03-10T22:02:39.923
> 
> 标签：function, alloy

```
sig Student, Tutor, Mark {} 
sig Course { 
    reg : set Student, 
    alloc : Student -> Tutor, 
    result : Student -> Mark 
   } 
```

我希望能够将课程 c 作为输入；输出一组导师，他们负责一个或多个在 c 注册但还没有分数的学生。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T01:36:24.343

这一次，您似乎在询问如何在 Alloy 中编写集合推导。然后，您可以使用集合推导编写一个函数，该函数针对给定课程返回所有注册该课程的学生，这样他们就没有分配分数。之后，很容易直接从`alloc`关系中选择分配给这些学生的导师。

Alloy 中集合推导的语法如下

```
{x: expr | condition(x)} 
```

它的意思是“*选择所有`x`属于集合`expr`的`condition(x)`东西*”。

这是针对您的问题编写此代码的方法：

```
sig Student, Tutor, Mark {}

sig Course {
  reg: set Student, 
  alloc: Student -> Tutor,
  result: Student -> Mark
}

fun studentsWithNoMarks[c: Course]: set Student {
  {s: c.reg | no c.result[s]}
}

fun tutorsForStudentsWithNoMarks[c: Course]: set Tutor {
  c.alloc[studentsWithNoMarks[c]]
} 
```

# html - 表格中的子标题：可访问性和模板

> ID：15328208
> 
> 赞同：6
> 
> 时间：2013-03-10T22:02:45.503
> 
> 标签：html, ruby-on-rails, haml, accessibility

这很难解释，所以这里有一支[笔](http://codepen.io/bookcasey/pen/hfIzm)，所有的例子都可以看到。

## 哪个更便于访问？

### 选项1

```
<table>
  <thead>
    <tr>
      <th>Thing 1</th>
      <th>Thing 2</th>
      <th colspan=2>Thing 3</th>
      <th>Thing 4</th>
      <th colspan=2>Thing 5</th>
      <th>Thing 6</th>
      <th>Thing 7</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td rowspan=2>40</td>
      <td rowspan=2>30</td>
      <th>Right</th>
      <th>Left</th>
      <td rowspan=2>50</td>
      <th>Right</th>
      <th>Left</th>
      <td rowspan=2>25</td>
      <td rowspan=2>30</td>
    </tr>
    <tr>
      <td>10</td>
      <td>20</td>
      <td>15</td>
      <td>40</td>
    </tr>
  </tbody>
</table> 
```

### 选项 2

```
<table>
  <thead>
    <tr>
      <th>Thing 1</th>
      <th>Thing 2</th>
      <th colspan=2>Thing 3</th>
      <th>Thing 4</th>
      <th colspan=2>Thing 5</th>
      <th>Thing 6</th>
      <th>Thing 7</th>
    </tr>
    <tr>
      <th colspan=2></th>
      <th>Right</th>
      <th>Left</th>
      <th></th>
      <th>Right</th>
      <th>Left</th>
      <th colspan=2></th>   
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>40</td>
      <td>30</td>
      <td>10</td>
      <td>20</td>
      <td>50</td>
      <td>15</td>
      <td>40</td>
      <td>25</td>
      <td>30</td>
    </tr>
  </tbody>
</table> 
```

## 如果子值（右和左）相等，它应该显示如下：

```
<table>
  <thead>
    <tr>
      <th>Thing 1</th>
      <th>Thing 2</th>
      <th>Thing 3s</th>
      <th>Thing 4</th>
      <th>Thing 5s</th>
      <th>Thing 6</th>
      <th>Thing 7</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>40</td>
      <td>30</td>
      <td>10</td>
      <td>50</td>
      <td>15</td>
      <td>25</td>
      <td>30</td>
    </tr>
  </tbody>
</table> 
```

或这个：

```
<table>
  <thead>
    <tr>
      <th>Thing 1</th>
      <th>Thing 2</th>
      <th colspan=2>Thing 3</th>
      <th>Thing 4</th>
      <th>Thing 5s</th>
      <th>Thing 6</th>
      <th>Thing 7</th>
    </tr>
    <tr>
      <th colspan=2></th>
      <th>Right</th>
      <th>Left</th>
      <th colspan=5></th>  
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>40</td>
      <td>30</td>
      <td>10</td>
      <td>20</td>
      <td>50</td>
      <td>15</td>
      <td>25</td>
      <td>30</td>
    </tr>
  </tbody>
</table> 
```

或这个：

```
<table>
  <thead>
    <tr>
      <th>Thing 1</th>
      <th>Thing 2</th>
      <th>Thing 3s</th>
      <th>Thing 4</th>
      <th colspan=2>Thing 5</th>
      <th>Thing 6</th>
      <th>Thing 7</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td rowspan=2>40</td>
      <td rowspan=2>30</td>
      <td rowspan=2>10</td>
      <td rowspan=2>50</td>
      <th>Right</th>
      <th>Left</th>
      <td rowspan=2>25</td>
      <td rowspan=2>30</td>
    </tr>
    <tr>
      <td>15</td>
      <td>40</td>
    </tr>
  </tbody>
</table> 
```

等等。

## 如何有效地进行模板化？

由于表是由标记中的水平行定义的，因此需要在所有`tr`s 中散布更改列的逻辑：

### 伪代码ERB

`thing3()`如果`thing5()`返回 true`thing3right != thing3left`

```
％桌子
  %thead
    %tr
      第 % 件事 1
      %th 东西 2
      - 如果事物 3()
        %th 东西 3
      - 别的
        %th{:colspan => "2"} 东西 3s
      %th 东西 4
      - 如果事物 5()
        %th 东西 5
      - 别的
        %th{:colspan => "2"} 东西 5s
      %th 东西 6
      %th 东西 7
    - 如果 !thing3() 或 !thing5()
      %tr.subcategory
        - 如果 !thing3() && !thing5()
          %th{:colspan => "2"}
          %th 对
          左 %th
          %th
          %th 对
          左 %th
          %th{:colspan => "2"}
        - elsif thing3() && !thing5()
          %th{:colspan => "4"}
          %th 对
          左 %th
          %th{:colspan => "2"}
        - elsif !thing3() && thing5()
          %th{:colspan => "2"}
          %th 对
          左 %th
          %th{:colspan => "4"}
  %t 正文
    %tr
      %td=@whatever.thing1
      %td=@whatever.thing2
      %td= @whatever.thing3right
      - 如果 !thing3()
        %td= @whatever.thing3left
      %td=@whatever.thing4
      %td= @whatever.thing5right
      - 如果 !thing5()
        %td= @whatever.thing5left
      %td= @whatever.thing6
      %td=@whatever.thing7

```

这可行，但很难使用和更新。每列都有子类别，它变得指数级地复杂。

如何以可访问的方式显示这些数据，并且可以以可扩展且易于更新的方式进行模板化？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T04:45:23.907

If I understand correctly, you are going to want to use `colspan` and `rowspan` on the table headers; this will make them accessible and should take some of the pains you having generating them dynamically. As far as templating goes, you have an idea of what data is going to be coming back, so see if you can storyboard a few of the more common ones, then construct your template(s) from that. I modified your codepen with an example, it's all the way at the bottom.

[http://codepen.io/jalbertbowden/pen/epgxs](http://codepen.io/jalbertbowden/pen/epgxs)

# php - JSON编码输出结果

> ID：15328213
> 
> 赞同：0
> 
> 时间：2013-03-10T22:03:28.930
> 
> 标签：php

这是我的php代码

```
 $query=mysql_query("SELECT * FROM product");
    $bla = array();
    $numOfRows= mysql_num_rows($query);

    if ($numOfRows >0)
    { while ($rows=mysql_fetch_array($query,MYSQL_ASSOC))
        {
            //$productID=$rows["id"];
            $bla[]=$rows;

    //echo '<p class="image"><img style="border: " src="images/'.$productID.'.jpg" width="154" height="137"/></p>';
    echo json_encode($bla);
        }

        } 
```

输出结果如下

[{"id":"2","title":"iPhone 5","price":"500","category":"Mobile","description":"APPLE","date_added":"0000- 00-00 00:00:00","date_update":"0000-00-00"}]

[{"id":"2","title":"iPhone 5","price":"500","category":"Mobile","description":"APPLE","date_added":"0000- 00-00 00:00:00","date_update":"0000-00-00"}, {"id":"41","title":"samsung S3","price":"100","类别":"手机","描述":"asda","date_added":"2013-03-10 21:43:12","date_update":"2013-03-10"}]

如您所见，产品 id 2 重复。我怎样才能删除这个？我只想显示第二个数组！！在我的数据库系统中，我没有重复的数据，我不知道这是从哪里来的，请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:04:52.123

您在循环中有 echo json_encode( $bla )。把它移出去。

```
if ($numOfRows >0)
{ while ($rows=mysql_fetch_array($query,MYSQL_ASSOC))
    {
        $bla[]=$rows;
    }
    echo json_encode($bla);
} 
```

# sql - 部署时的 ASP.NET MVC 4 数据库连接错误

> ID：15328214
> 
> 赞同：0
> 
> 时间：2013-03-10T22:03:43.200
> 
> 标签：sql, asp.net-mvc, asp.net-mvc-4

我正在尝试将我的 ASP 应用程序部署到虚拟主机，但收到以下错误

```
System.ArgumentException: Invalid value for key 'attachdbfilename'.

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

[ArgumentException: Invalid value for key 'attachdbfilename'.]
   System.Data.SqlClient.SqlConnectionString.VerifyLocalHostAndFixup(String& host, Boolean enforceLocalHost, Boolean fixup) +907214
   System.Data.SqlClient.SqlConnectionString..ctor(String connectionString) +4116
   System.Data.SqlClient.SqlConnectionFactory.CreateConnectionOptions(String connectionString, DbConnectionOptions previous) +24
   System.Data.ProviderBase.DbConnectionFactory.GetConnectionPoolGroup(String connectionString, DbConnectionPoolGroupOptions poolOptions, DbConnectionOptions& userConnectionOptions) +150
   System.Data.SqlClient.SqlConnection.ConnectionString_Set(String value) +59
   System.Data.SqlClient.SqlConnection.set_ConnectionString(String value) +4
   System.Data.SqlClient.SqlConnection..ctor(String connectionString) +26
   System.Data.Entity.Infrastructure.SqlConnectionFactory.CreateConnection(String nameOrConnectionString) +236
   System.Data.Entity.Infrastructure.LocalDbConnectionFactory.CreateConnection(String nameOrConnectionString) +281
   System.Data.Entity.Internal.LazyInternalConnection.Initialize() +327
   System.Data.Entity.Internal.LazyInternalConnection.get_ProviderName() +13
   System.Data.Entity.Internal.LazyInternalContext.InitializeContext() +332
   System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType) +18
   System.Data.Entity.Internal.Linq.InternalSet`1.Initialize() +56
   System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext() +15
   System.Data.Entity.Infrastructure.DbQuery`1.System.Linq.IQueryable.get_Provider() +37
   System.Linq.Queryable.OrderByDescending(IQueryable`1 source, Expression`1 keySelector) +66
   georgi_it2.Models.ApplicationController..ctor() +302
   georgi_it2.Controllers.HomeController..ctor() +5

[TargetInvocationException: Exception has been thrown by the target of an invocation.]
   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) +98
   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) +241
   System.Activator.CreateInstance(Type type, Boolean nonPublic) +69
   System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +67

[InvalidOperationException: An error occurred when trying to create a controller of type 'georgi_it2.Controllers.HomeController'. Make sure that the controller has a parameterless public constructor.]
   System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +182
   System.Web.Mvc.DefaultControllerFactory.GetControllerInstance(RequestContext requestContext, Type controllerType) +80
   System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext requestContext, String controllerName) +74
   System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& controller, IControllerFactory& factory) +218
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +49
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +50
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +16
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970436
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

公司提供给我的连接字符串是这样的：

```
<add name="SiteSqlServer" connectionString="Server=(127.0.0.1);Database=DATABASENAME;uid=DBUSERNAME;pwd=DBPASSWORD;" providerName="System.Data.SqlClient" /> 
```

我的 web.config 文件中的那个是一样的。我已经创建了一个数据库，它与我机器上的默认连接字符串配合得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:19:27.810

一种可能的原因：

我在使用 WebSecurity 类进行身份验证时遇到了这个错误。检查用于帐户控制器的过滤器文件夹中的属性类。此类用于初始化 WebSecurity 类，但具有引用“DefaultConnection”的默认构造函数调用。将其更改为 web.config 的连接字符串部分中的连接字符串的名称（在您的情况下为“SiteSqlServer”），它可能会解决问题。

# sql - 流畅的 NHibernate：SchemaExport 和 SchemaUpdate

> ID：15328216
> 
> 赞同：5
> 
> 时间：2013-03-10T22:03:56.633
> 
> 标签：sql, visual-studio, nhibernate, fluent-nhibernate

我需要帮助解决我的应用程序中的问题。

我在 Visual Studio 中创建了一个项目，并安装并配置了 Fluent NHibernate。我能够正确配置所有内容，并且能够连接到我的数据库。

我尝试在表中插入几行，一切正常，但每当我重新启动应用程序时，我注意到表被删除并重新创建，所有数据都消失了。

我通过使用解决了这个问题：

```
.ExposeConfiguration(cfg => new SchemaUpdate(cfg).Execute(true, true)) 
```

代替：

```
.ExposeConfiguration(cfg => new SchemaExport(cfg).Create(true, true)) 
```

到目前为止一切都很好，但现在问题来了。假设我有一个 Person.cs 类，它有两个字段：**Id、Name。**假设我想添加一个名为**Address**的新属性。我将该属性添加到我的班级并运行我的应用程序。我尝试添加几行并检查数据库以查看确实创建了一个名为 Address 的新列，并为旧条目插入了*空值。*

现在假设我改变主意并决定删除新的属性地址。我从我的 Person.cs 类中删除该属性并运行应用程序。我插入了一些条目并检查数据库以查看地址列没有被删除并且仍然存在于表中。

为什么会发生这种情况？映射配置不应该为我做所有事情吗？我希望将不再需要的列删除到数据库中，就像我向类中添加新属性时创建它们的方式一样，并且不会丢失我的数据。我应该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T02:05:31.073

SchemaExport/SchemaUpdate 不是迁移框架。

他们只确保您的域可以与数据库一起使用，并且在开发过程中有用（而不是在生产中）

# javascript - Titanium Appcelerator Mapview 需要很长时间才能打开

> ID：15328219
> 
> 赞同：0
> 
> 时间：2013-03-10T22:04:23.113
> 
> 标签：javascript, ios, titanium, appcelerator

我正在 Titanium Appcelerator 中创建一个 iOS 应用程序，其中包含一个仪表板窗口和 2 个附加窗口。其中一个包含一个地图视图，加载时间约为 3 秒，这对于查看空白屏幕来说是很长的时间。

在 Appcelerator 论坛中，有人发布了[这篇文章，询问如何刷新到用户的位置，只有当它改变了一定量时，我已经实现了。](http://developer.appcelerator.com/question/97671/geolocation-refreshing-to-current-location)我目前的实现如下：

1.  设置距离过滤器，使其仅在重大移动时刷新

    ```
    Titanium.Geolocation.distanceFilter = 10; 
    ```

2.  在一个无关紧要的起始位置 (0,0) 创建一个地图视图并将其添加到窗口中

    ```
    var mapview = Titanium.Map.createView({
        mapType: Titanium.Map.STANDARD_TYPE,
        region: {latitude: 0, longitude: 0, latitudeDelta:0.05, longitudeDelta:0.05},
        animate:false,
        regionFit:true,
        userLocation:false
    });

    win.add(mapview); 
    ```

3.  获取用户位置并将地图视图的位置设置为它

    ```
    //Should only go once
    Titanium.Geolocation.getCurrentPosition(function(e)
    {
        if (e.error)
        {
            alert('Cannot get your current location');
            return;
        }

        var longitude = e.coords.longitude;
        var latitude = e.coords.latitude;
        var altitude = e.coords.altitude;
        var heading = e.coords.heading;
        var accuracy = e.coords.accuracy;
        var speed = e.coords.speed;
        var timestamp = e.coords.timestamp;
        var altitudeAccuracy = e.coords.altitudeAccuracy;

        var current = {
                latitude : latitude,
                longitude : longitude,
                latitudeDelta : .05,
                longitudeDelta : .05
            };
        mapview.setLocation(current);
        mapview.userLocation = true;
    }); 
    ```

我只想快速加载地图。如果需要几秒钟来确定用户的位置，那很好。但是让用户看一个空白屏幕 3 秒钟是可怕的。有没有解决的办法？

我还设置了：

```
Titanium.Geolocation.accuracy = Titanium.Geolocation.ACCURACY_BEST; 
```

如果它有所作为。

**编辑：**我注释掉了我获取用户位置的部分，并且地图仍然需要相同的时间来加载。我认为问题与我在创建 map.js 文件之前打开它的事实有关。

在我的 app.js 文件中，我调用了 map.open()。然后在我的 map.js 文件的顶部，我这样做：

```
var win = Ti.UI.currentWindow; 
```

然后我构建地图并添加它。我不知道如何保留我的架构但预加载地图。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T03:47:50.557

无需使用任何 Titanium.Geolocation 方法或事件监听器。仅在地图视图上尝试使用用户位置为真，它反映了地图上的用户位置。

**首先打开地图窗口。**

距离过滤器适用于 Titanium.Geolocation 的事件监听器。你能分享你的代码吗？然后我会建议你一个适当的解决方案。

如果你想使用 Titanium.Geolocation 方法或事件监听器来改变地图的位置。

**Titanium.Geolocation.getCurrentPosstion()**将其放入 setInterval 函数中，该函数在特定时间间隔后调用 function(Titanium.Geolocation)。打开地图窗口后使用此功能。

**Titanium.Geolocation.addEventListener('location',function(** ){ ... }); 使用距离过滤器，它会在特定距离后触发。

# xml - DNN：通过使用 XSL 的 DNN XML 模块在 4 列中提供 RSS 提要

> ID：15328222
> 
> 赞同：0
> 
> 时间：2013-03-10T22:04:23.723
> 
> 标签：xml, xslt, rss, dotnetnuke, dotnetnuke-6

我尝试格式化来自我的 DNN 站点的 RSS 提要并使其看起来不错。我想在 4 列中显示内容：

[https://dl.dropbox.com/u/38410375/liste.png](https://dl.dropbox.com/u/38410375/liste.png)

我需要一个 XSL 文件以在 DNN XML 模块中使用，但无法使其工作。我不确定我已经拥有的代码是否有意义，但这就是我迄今为止在网上找到的。我希望这里有人可以将我推向正确的方向，因为我收到的错误消息对我来说非常神秘。

提前感谢您的关注！

这是我所拥有的：

```
 <?xml-stylesheet type="text/xsl" ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" indent="yes"/>
<xsl:param name="ItemsToShow"/>
<xsl:param name="ShowItemDetails"/>
<xsl:param name="ShowItemDate"/>
<xsl:param name="Locale"/>
<xsl:template match="rss">
    <table>
        <xsl:for-each select="channel/item[position()=$ItemsToShow or $ItemsToShow]"/>
        <div class="DNN_News_Item">
            <div class="DNN_News_ItemDate">
                <xsl:if test="$ShowItemDate='true'">
                    <xsl:value-of select="pubDate"/>
                </xsl:if>
                <xsl:if test="$ShowItemDate='true'">
<xsl:text>
- 
</xsl:text>
                </xsl:if>
            </div>
            <div class="DNN_News_ItemLink">
                <a href="{link}" target="_blank">
                    <xsl:value-of select="title"/>
                </a>
            </div>
            <xsl:if test="$ShowItemDetails='true'">
                <div class="DNN_News_ItemDetails">
                    <a href="{link}" target="_blank">
                        <xsl:value-of select="description" disable-output-escaping="yes"/>
                    </a>
                </div>
            </xsl:if>
        </div>
    </table>
</xsl:template>
<xsl:template match="rss" mode="tr">
    <tr>
        <xsl:apply-templates select="." mode="td"/>
        <xsl:apply-templates select="following-sibling::*[position() &lt; 4]" mode="td"/>
    </tr>
    <xsl:apply-templates select="following-sibling::*[4]" mode="tr"/>
</xsl:template>
<xsl:template match="rss" mode="td">
    <td>
        <xsl:apply-templates select="text()"/>
    </td>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:33:59.907

这是你想要的吗？

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" indent="yes"/>
  <xsl:param name="ItemsToShow" select="5"/>
  <xsl:param name="ShowItemDetails" select="'true'"/>
  <xsl:param name="ShowItemDate"/>
  <xsl:param name="Locale"/>
  <xsl:template match="rss">
    <table>
      <xsl:apply-templates select="channel/item[position() &lt;= $ItemsToShow or 
                                                not($ItemsToShow)]
                                               [position() mod 4 = 1]"
                           mode="row"/>
    </table>
  </xsl:template>

  <xsl:template match="item" mode="row">
    <tr>
      <xsl:apply-templates select=". | following-sibling::item[position() &lt; 4]" 
                           mode="cell"/>
    </tr>
  </xsl:template>

  <xsl:template match="item" mode="cell">
    <td>
      <div class="DNN_News_Item">
        <div class="DNN_News_ItemDate">
          <xsl:apply-templates select="pubDate[$ShowItemDate='true']" />
          <xsl:apply-templates select="pubDate[not($ShowItemDate='true')]"
                               mode="noDate" />
        </div>
        <div class="DNN_News_ItemLink">
          <a href="{link}" target="_blank">
            <xsl:value-of select="title"/>
          </a>
        </div>
        <xsl:apply-templates select="self::node()[$ShowItemDetails = 'true']" 
                             mode="details" />
      </div>
    </td>
  </xsl:template>

  <xsl:template match="item" mode="details">
    <div class="DNN_News_ItemDetails">
      <a href="{link}" target="_blank">
        <xsl:value-of select="description" disable-output-escaping="yes" />
      </a>
    </div>
  </xsl:template>

  <xsl:template match="pubDate" mode="noDate">
    <xsl:text>-</xsl:text>
  </xsl:template>
</xsl:stylesheet> 
```

在该 RSS 提要的 XML 上运行时，结果是：

```
<table>
  <tr>
    <td>
      <div class="DNN_News_Item">
        <div class="DNN_News_ItemDate">-</div>
        <div class="DNN_News_ItemLink"><a href="http://literatura24.com/Default.aspx?tabid=436&amp;fileshareact=viewfile&amp;Fileid=2" target="_blank">Historias Sem Data</a></div>
        <div class="DNN_News_ItemDetails"><a href="http://literatura24.com/Default.aspx?tabid=436&amp;fileshareact=viewfile&amp;Fileid=2" target="_blank">
        <img alt="" src="http://literatura24.com/Portals/4/ebooks-pictures/machado_de_assis-historias_sem_data.jpg" style="margin-right: 5px;" align="left" width="100" height="166" />Autor: Assis, Machado de, 1839-1908<br />
        T&iacute;tulo: Historias Sem Data<br />
        Idioma: Portugu&ecirc;s<br />
        Assunto:<br />
        Dispon&iacute;vel como: EPUB e KINDLE
      </a></div>
      </div>
    </td>
    <td>
      <div class="DNN_News_Item">
        <div class="DNN_News_ItemDate">-</div>
        <div class="DNN_News_ItemLink"><a href="http://literatura24.com/Default.aspx?tabid=436&amp;fileshareact=viewfile&amp;Fileid=1" target="_blank">Os Lusíadas</a></div>
        <div class="DNN_News_ItemDetails"><a href="http://literatura24.com/Default.aspx?tabid=436&amp;fileshareact=viewfile&amp;Fileid=1" target="_blank">
        <p><img alt="" src="http://literatura24.com/Portals/4/ebooks-pictures/220px-Os_Lus%C3%ADadas.jpg" style="margin-right: 5px;" align="left" width="100" height="156" />Autor: Cam&otilde;es, Lu&iacute;s Vaz de, 1524-1580<br />
        T&iacute;tulo: Os Lus&iacute;adas<br />
        Idioma: Portugu&ecirc;s<br />
        Assunto: poesia Portugu&ecirc;s<br />
        Dispon&iacute;vel como: EPUB e KINDLE<br />
        <br />
        </p>
      </a></div>
      </div>
    </td>
    <td>
      <div class="DNN_News_Item">
        <div class="DNN_News_ItemDate">-</div>
        <div class="DNN_News_ItemLink"><a href="http://literatura24.com/Default.aspx?tabid=436&amp;fileshareact=viewfile&amp;Fileid=4" target="_blank">The Adventures of Sherlock Holmes</a></div>
        <div class="DNN_News_ItemDetails"><a href="http://literatura24.com/Default.aspx?tabid=436&amp;fileshareact=viewfile&amp;Fileid=4" target="_blank">
        <img alt="" src="http://literatura24.com/Portals/4/ebooks-pictures/399365_Memoirs-of-Sherlock-Holmes-book-jacket.jpg" height="150" align="left" width="100" />Autor: Doyle, Arthur Conan, Sir, 1859-1930<br />
        T&iacute;tulo: The Adventures of Sherlock Holmes<br />
        Idioma: Ingl&ecirc;s<br />
        Assunto: detetive e mist&eacute;rio<br />
        Dispon&iacute;vel como: EPUB e KINDLE
      </a></div>
      </div>
    </td>
    <td>
      <div class="DNN_News_Item">
        <div class="DNN_News_ItemDate">-</div>
        <div class="DNN_News_ItemLink"><a href="http://literatura24.com/Default.aspx?tabid=436&amp;fileshareact=viewfile&amp;Fileid=3" target="_blank">Viagens na Minha Terra</a></div>
        <div class="DNN_News_ItemDetails"><a href="http://literatura24.com/Default.aspx?tabid=436&amp;fileshareact=viewfile&amp;Fileid=3" target="_blank">
        <img alt="" src="http://literatura24.com/Portals/4/ebooks-pictures/41606_500.jpg" style="margin-right: 5px;" align="left" width="100" height="139" />Autor: Almeida Garrett, Jo&atilde;o Batista da Silva Leit&atilde;o de, Visconde de, 1799-1854<br />
        T&iacute;tulo: Viagens na Minha Terra (Completo)<br />
        Idioma: Portugu&ecirc;s<br />
        Assunto: fic&ccedil;&atilde;o Portugu&ecirc;s<br />
        Dispon&iacute;vel como: EPUB e KINDLE
      </a></div>
      </div>
    </td>
  </tr>
</table> 
```

# c++ - 初始化列表的使用

> ID：15328224
> 
> 赞同：0
> 
> 时间：2013-03-10T22:04:40.487
> 
> 标签：c++, constructor, initializer-list

我已经了解了什么是[初始化列表](http://www.cprogramming.com/tutorial/initialization-lists-c++.html)以及如何[使用它，](https://stackoverflow.com/questions/1272680/what-does-a-colon-following-a-c-constructor-name-do)但我仍然想知道一件事。

如果有的话，使用初始化列表初始化类的变量或在构造函数中自己进行初始化有什么区别？

例如

```
class MyClass {
public:

    MyClass() : m_classID(-1), m_userdata(0) { 
    }

    int m_classID;
    void *m_userdata;
}; 
```

VS

```
class MyClass {
public:

    MyClass(){
        m_classID = -1;
        m_userdata = 0;
    }

    int m_classID;
    void *m_userdata;
}; 
```

它只是一种使代码更易于阅读和编写的设计习惯，还是有其他特定原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T22:08:09.047

如果这些变量是基本类型，并且它们`const`不是引用，那么就没有区别。

如果您的成员是引用或它是`const`，那么您将*不得不*初始化它们，并且只能通过 in 初始化列表来完成，原因与禁止您创建`const`基本类型的未初始化引用或变量的原因相同：

```
int& x; // ERROR!
const int y; // ERROR! 
```

这些对象在初始化后不能重新分配：因此，它们必须进行值初始化是有道理的，并且不允许您在此类未初始化的成员变量的情况下执行类的构造函数的*主体。*

因此，当您确实有选择时，对于基本类型，两种形式之间没有区别 - 请记住，有些情况您**没有**选择。

另一方面，如果您的成员变量是**类类型**，那么不同之处在于，如果没有初始化列表，它们将被默认构造（如果可能的话），*然后*在构造函数的主体中分配；使用初始化列表，它们将直接使用您指定的参数构造。

请注意，C++11 为您提供了另一种可能性：

```
class MyClass {
public:
    int m_classID = -1;
    void *m_userdata = nullptr;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T22:08:49.717

初始化列表允许您调用成员变量的构造函数。

如果在构造函数的主体中进行初始化，则调用的是`operator=`（赋值），而不是构造函数。

区别类似于这两种形式之间的区别：

```
int three(3);            // Constructor argument
int three; three = 3;    // Assignment after construction 
```

这对于没有默认构造函数的成员（即没有参数的构造函数）和在创建时必须设置值的成员（如引用和常量）来说是不同的。

因此，只能在构造函数主体中初始化某些种类的成员；但是所有种类的成员都可以在初始化列表中初始化。这一点，以及没有为初始化列表初始化的成员调用默认构造函数的事实（这对复杂对象产生了影响，但对于整数来说并不重要），这意味着通常最好使用初始化器列表，给出选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T22:10:51.693

对于您给出的情况，没有直接区别 - 初始化列表实际初始化的顺序略有不同（声明成员的顺序），在第二个示例中，如果您要交换行`m_classID=-1`说，`m_userdata = 0`他们确实会以相反的顺序初始化。

您不能在初始化列表之外初始化引用或 const 值，因此：

```
class bleh
{
   int& m_x;
   bleh(int x)
   {
      m_x = x;
   }
}; 
```

会给你一些错误。

```
class bleh
{
   int& m_x;
   bleh(int x): m_x(x)
   {
   }
}; 
```

是正确的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-14T14:47:49.687

只是指出c ++ 11中的一个区别：

```
class MyClass {
public:
    MyClass(std::string str) : m_str(str) { }
private:
    std::string m_str;
}; 
```

相当于做

```
class MyClass {
public:
    MyClass(std::string str) { m_str = std::move(str); }
private:
    std::string m_str;
}; 
```

然而：

```
class MyClass {
public:
    MyClass(std::string str) { m_str = str; }
private:
    std::string m_str;
}; 
```

只是调用赋值运算符。

我遇到了这个问题，因为我在 Lua 中初始化对象，当它们被破坏时，字符串被清理了两次，导致了一个信号陷阱，因为 Lua 认为它控制了传入字符串的所有权，但是一旦它被移动，就不再是案子。

我知道这并不能完全回答这个问题，但其他答案并没有直接解决这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T22:08:27.363

有些东西没有 MIL 就无法初始化，例如引用成员。

```
class MyClass {
public:

    MyClass(MyOtherClass& otherClass)
         : m_classID(-1)
         , m_userdata(otherClass)
    { 
    }

    int m_classID;
    MyOtherClass& m_userdata;
}; 
```

此外，它是 intizlize const 成员的唯一方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-10T22:12:19.490

初始化列表更可取，因为

1.  您可以将它们与参考一起使用
2.  您避免运行默认构造函数 + operator=，只是一个更快的 neccecary 构造函数。如果默认构造函数是私有的，则必须使用初始化列表

# c - 如何存储多线程编程的输入列表

> ID：15328233
> 
> 赞同：-1
> 
> 时间：2013-03-10T22:05:51.437
> 
> 标签：c, multithreading

目前我的程序应该获取用户在命令行输入的数字列表，然后找到这些数字的总和并将其打印出来。我的代码如下，我知道要存储用户输入的单个数字，但是如果我想要一个数字列表，用空格分隔怎么办？

```
#include <pthread.h>
#include <stdio.h>
int sum; /* this data is shared by the thread(s) */
void *runner(char **); /* threads call this function */
int main(int argc, char *argv[])
{
pthread_t tid; /* the thread identifier */
pthread_t tid2;

pthread_attr_t attr; /* set of thread attributes */

if (argc != 2) {
fprintf(stderr,"usage: a.out <integer values>\n");
return -1;
}

pthread_attr_init(&attr);

pthread_create(&tid,&attr,(void(*)(void *))(runner),(void *)(argv+1));

pthread_join(tid,NULL);

printf("sum = %d\n",sum);
}
/* The thread will begin control in this function */
void *runner(char **param)
{
int i;
sum = 0;
for (i = 1; i <= 5; i++)
   sum = sum + atoi(param[i]);

pthread_exit(0);
} 
```

我希望能够在命令行中输入一个数字列表，并将这些数字存储到一个列表中，然后找到所有这些数字的总和。

，有人能告诉我这样做的正确方法是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:26:59.947

让我感到困惑的是，您可以编写一个线程程序但不知道：

您不能~~将~~解析字符串数组转换为 int 数组。在求和循环期间，您必须~~一一~~解析转换。

```
/* The thread will begin control in this function */
void *runner(char **param)
{
int i;

sum = 0;
for (i = 1; i <= upper; i++)
    sum = sum + atoi(param[i]);
pthread_exit(0);
} 
```

您还需要通过而`argv+1`不是`argv[1]`in ：`pthread_create``main`

```
// the runner function declaration
void *runner(char **);

// the thread creation
pthread_create(&tid,&attr,(void *(*)(void *))(runner),(void *)(argv+1)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T00:50:43.957

这里有一些问题：

```
if (argc != 2) 
```

这意味着您期望引用整数值，即`a.out "1 2 3 4 5"`. 如果您以这种方式执行操作，则数字将表示为单个字符串，即`argv[1] := "1 2 3 4 5"`.

更容易检查`argc < 2`参数并将其作为`a.out 1 2 3 4 5`. 这样每个参数都有自己的字符串，即`argv[1] := "1", argv[2] := "2"`等。

您当然可以改用带引号的列表，但是您已经添加了一些逻辑来从字符串中提取整数（例如 with `strtok`），而参数处理可以代替您。

其次，您的程序在这里至少需要六个整数，并且还会跳过第一个（您想`i`从`0`：

```
for (i = 1; i <= 5; i++)
   sum = sum + atoi(param[i]); 
```

至于上限，将整数的数量与其字符串一起传送的一种方法是使用结构：

```
struct arg_struct {
    int argc;
    char **argv;
}; 
```

然后在调用时使用这样的结构`pthread_create`，即

```
struct arg_struct args = { argc-1, argv+1 };
pthread_create(&tid,&attr,(void(*)(void *))(runner),(void *)(&args)); 
```

并`runner`相应地改变：

```
void *runner(struct arg_struct *param)
{
int i;
sum = 0;
for (i = 0; i < param->argc; i++)
   sum = sum + atoi(param->argv[i]);

pthread_exit(0);
} 
```

这是所有更改的代码：

```
#include <pthread.h>
#include <stdio.h>

struct arg_struct {
    int argc;
    char **argv;
};

int sum; /* this data is shared by the thread(s) */
void *runner(struct arg_struct *); /* threads call this function */
int main(int argc, char *argv[])
{
pthread_t tid; /* the thread identifier */
pthread_t tid2;

pthread_attr_t attr; /* set of thread attributes */

struct arg_struct args = { argc-1, argv+1 };

if (argc < 2) {
fprintf(stderr,"usage: a.out <integer values>\n");
return -1;
}

pthread_attr_init(&attr);

pthread_create(&tid,&attr,(void *(*)(void *))(runner),(void *)(&args));

pthread_join(tid,NULL);

printf("sum = %d\n",sum);
}
/* The thread will begin control in this function */
void *runner(struct arg_struct *param)
{
int i;
sum = 0;
for (i = 0; i < param->argc; i++)
   sum = sum + atoi(param->argv[i]);

pthread_exit(0);
} 
```

# php - 将数据从 as3 发送到 PHP 错误？

> ID：15328235
> 
> 赞同：-1
> 
> 时间：2013-03-10T22:06:08.123
> 
> 标签：php, mysql

我一直在研究这种将 AS3 和 mySQL 连接起来的 PHP 编码......

我遇到了这个错误，我无法弄清楚这是怎么回事......如果有人可以帮助第二双眼睛，我会非常感激......

这是 PHP 的更新编码

```
 <?php 
if(isset($_POST['userFirstName']) && isset($_POST['userLastName']) && isset($_POST['userEmail']) && isset($_POST['userNumber']) && isset($_POST['userMsg']))
{
    $userFirstName=strip_tags($_POST['userFirstName']);
    $userLastName=strip_tags($_POST['userLastName']);
    $userEmail=strip_tags($_POST['userEmail']);
    $userNumber=strip_tags($_POST['userNumber']);
    $userMsg=strip_tags($_POST['userMsg']);

    // connect with database. 

    $username="root";
    $password="dp10aap";
    $database="b-elite-fitness";

    mysql_connect("localhost","$username","$password") or die (mysql_error());
    mysql_select_db("$database") or die (mysql_error());

    //query for inserting data in database.
    $query="INSERT INTO 'formdp' VALUES('NULL','".mysql_real_escape_string($userFirstName)."','".mysql_real_escape_string($userLastName)."','".mysql_real_escape_string($userEmail)."','".mysql_real_escape_string($userNumber)."','".mysql_real_escape_string($userMsg)."')";

    if($query_run=mysql_query($query))
    {
        echo'Data inserted.';
    } else {
        die(mysql_error());
        }
}
?> 
```

这是我的 AS3 编码....

```
processing_mc.visible = false;

function checkComplete(evt:MouseEvent):void {

    // Create A new URLVariables instance to store the variable
    var phpVars:URLVariables = new URLVariables();

    // Create a variable (e.g. candidate) to send
    phpVars.userFirstName = firstname_txt.text;
    phpVars.userLastName = lastname_txt.text;
    phpVars.userNumber = number_txt.text;
    phpVars.userEmail = email_txt.text; 
    phpVars.userMsg = msg_txt.text;

    // Create a new URLRequest instance sending data to "ascom01.php"
    var myRequest:URLRequest = new URLRequest("form.php");
    // Send data using the POST method
    myRequest.method = URLRequestMethod.POST;

    var loader:URLLoader = new URLLoader();
    loader.load(myRequest);

loader.addEventListener(Event.COMPLETE, response);
function response(e:Event):void
{
    trace(loader.data);
}

if(!firstname_txt.length) {
status_txt.text = "Please enter your first name";
} else if(!lastname_txt.length) {
status_txt.text = "Please enter your last name";
} else if (!email_txt.length) {
status_txt.text = "Please enter your email";
} else if (!number_txt.length) {
status_txt.text = "Please enter your phone number";
} else {

}

}
// handler for the PHP script completion and return of status
function completeHandler(event:Event):void {

processing_mc.visible = false;
firstname_txt.text = "";
lastname_txt.text = "";
email_txt.text = "";
number_txt.text = "";
msg_txt.text = "";

status_txt.text = event.target.data.return_msg;
}

// Add event listener for submit button click
submit_btn.addEventListener(MouseEvent.CLICK, checkComplete); 
```

我遇到的问题是，一旦我点击发送按钮，数据将不会发送......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:09:49.860

给你试试这个。

```
 mysql_query("INSERT INTO formdp 
      (firstname, lastname, email, number, message)  VALUES('".$userFirstName['firstname']."','".$userLastName['lastname']."','".$userEmail['email']."','".$userNumber['number']."','".$userMsg['message']."')") 
     or die (mysql_error());
     mysql_close(); 
```

*** 如果**id 是 auto_increment 你不必在 id 中插入值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:09:02.370

在双引号字符串中使用数组时，需要将它们放入`{}`

```
mysql_query("INSERT INTO formdp 
  (id ,firstname, lastname, email, number, message)     
  VALUES(NULL,'{$userFirstName['firstname']}','{$userLastName['lastname']}','{$userEmail['email']}','{$userNumber['number']}','{$userMsg['message']}')") 
```

但是，在我看来，这些数组无论如何都不存在，而且您也对其他事情感到困惑。可能您只想：

```
mysql_query("INSERT INTO formdp 
  (id ,firstname, lastname, email, number, message)     
  VALUES(NULL,'$userFirstName','$userLastName','$userEmail','$userNumber','$userMsg')") 
```

然而，这仍然具有 SQL 注入的潜力。正确的代码是：

```
<?php

$username="root";
$password="dp10aap";
$database="b-elite-fitness";

mysql_connect("localhost","$username","$password") or die (mysql_error());
mysql_select_db("$database") or die (mysql_error());

if(isset($_POST['userFirstName'])){ $userFirstName = mysql_real_escape_string($_POST['userFirstName']); }
if(isset($_POST['userLastName'])){ $userLastName = mysql_real_escape_string($_POST['userLastName']); }
if(isset($_POST['userEmail'])){ $userEmail = mysql_real_escape_string($_POST['userEmail']); }
if(isset($_POST['userNumber'])){ $userNumber = mysql_real_escape_string($_POST['userNumber']); }
if(isset($_POST['userMsg'])){ $userMsg = mysql_real_escape_string($_POST['userMsg']); }

mysql_query("INSERT INTO formdp 
    (id ,firstname, lastname, email, number, message) 
    VALUES(NULL,'$userFirstName','$userLastName','$userEmail','$userNumber','$userMsg')") 
or die (mysql_error()); 
```

请注意，当未提供一个或多个变量时，它仍然无法处理这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T22:42:51.003

```
<?php 
if(isset($_POST['userFirstName'])) && isset($_POST['userLastName']) && isset($_POST['userEmail']) && isset($_POST['userNumber']) && isset($_POST['userMsg']))
{
    $userFirstName=strip_tags($_POST['userFirstName']);
    $userLastName=strip_tags($_POST['userLastName']);
    $userEmail=strip_tags($_POST['userEmail']);
    $userNumber=strip_tags($_POST['userNumber']);
    $userMsg=strip_tags($_POST['userMsg']);

    // connect with database. 

    $username="root";
    $password="dp10aap";
    $database="b-elite-fitness";

    mysql_connect("localhost","$username","$password") or die (mysql_error());
    mysql_select_db("$database") or die (mysql_error());

    //query for inserting data in database.
    $query="INSERT INTO `formdp` VALUES('NULL','".mysql_real_escape_string($userFirstName)."','".mysql_real_escape_string($userLastName)."','".mysql_real_escape_string($userEmail)."','".mysql_real_escape_string($userNumber)."','".mysql_real_escape_string($userMsg)."')";

    if($query_run=mysql_query($query))
    {
        echo'Data inserted.';
    } else {
        die(mysql_error());
        }

}
?> 
```

看看上面的代码。
建议：
尽量避免在代码中使用 mysql_* 函数，因为它已被贬值。因此，尝试使用 mysqli_* 或面向对象的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T22:22:36.847

您的查询中有冲突的引号，请尝试：

```
mysql_query("INSERT INTO formdp
    (id ,firstname, lastname, email, number, message)
    VALUES(
            NULL,
        '".$userFirstName['firstname']."',
        '".$userLastName['lastname']."',
        '".$userEmail['email']."',
        '".$userNumber['number']."',
        '".$userMsg['message']."'
    )
")
or die (mysql_error()); 
```

# jfreechart - 显示“无数据”消息并防止组合图表的范围轴标签重叠

> ID：15328237
> 
> 赞同：0
> 
> 时间：2013-03-10T22:06:09.923
> 
> 标签：jfreechart

早些时候，我曾经使用`ChartFactory` `createTimeseries`和`createPieChart`静态方法创建默认图表。跟进[这个问题](https://stackoverflow.com/questions/15306471/how-to-deal-with-2-timeserieses-with-the-exact-values)，我编写了以下代码，不再使用这些静态方法。`ChartFactory`但是在编写以下代码来创建组合绘图图表后，当没有可用数据时，我无法达到类似的结果（即类似于由 创建的图表）。

此图像显示了由以下人员创建的**显示良好的**空时间序列图表`ChartFactory`： ![在此处输入图像描述](../Images/27f79bd58509eb1076f4d5ba153c8962.png)

此图像是一个**显示不佳的**空组合绘图图（空数据没有消息并且域轴的第一个值被截断！）： ![在此处输入图像描述](../Images/f6d5ad173ff6f85c76c2d3d189976785.png)

包含数据的组合图表的重叠和截断标签： ![在此处输入图像描述](../Images/a2132ce69410949e5f62b6288203c8fe.png)

这是组合的绘图图表代码：

```
protected CombinedDomainXYPlot createDataset() {
    CombinedDomainXYPlot combinedPlot = new CombinedDomainXYPlot(new DateAxis("Execution Date"));
    TimeSeries tSeries = null;
    XYPlot xyPlot = null;
    XYLineAndShapeRenderer localXYLineAndShapeRenderer = null;
    NumberAxis numberAxis = null;
    for (ChartMetric metric : values.getChartMetrics()) {
        tSeries = new TimeSeries(metric.getFinalDisplayName());
        numberAxis = new NumberAxis(metric.getFinalDisplayName());
        numberAxis.setAutoRangeIncludesZero(false);
        for (Object[] row : values.getChartMetricValue(metric)) {
            Second sec = new Second((Date) row[0]);
            tSeries.add(sec, (Double) row[1]);
        }
        localXYLineAndShapeRenderer = new XYLineAndShapeRenderer(true, false);
        xyPlot = new XYPlot(new TimeSeriesCollection(tSeries), null, numberAxis, localXYLineAndShapeRenderer);
        xyPlot.setNoDataMessage("xy no data message");
        combinedPlot.add(xyPlot);
    }
    combinedPlot.setGap(40.0D);
    return combinedPlot;
}

protected JFreeChart createChart(CombinedDomainXYPlot combinedXYPlot) {
    super.localJFreeChart = new JFreeChart(chartDetails.getTitle(), JFreeChart.DEFAULT_TITLE_FONT, combinedXYPlot, true);
    ChartFactory.getChartTheme().apply(localJFreeChart);
    return chart;
} 
```

到夏天：

. 我需要以良好显示的方式显示一个空的组合域图表，例如显示的单图时间序列图表（即第一张图像）。成功加载组合图表的数据时，我需要范围轴标签不要重叠。不幸的是，范围轴的标签有时可能很长。因此，如果我只能根据子图高度包装标签，我想会这样做。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:45:06.583

1.  您可以设置一个显示良好的占位符数据集，该数据集最初是不可见的，然后在真实数据可用时替换它。

2.  如果`rangeAxis.setVerticalTickLabels(false)`没有帮助，那么我不明白这个问题。

# c# - 引用 C# 中的引用？

> ID：15328238
> 
> 赞同：12
> 
> 时间：2013-03-10T22:06:09.790
> 
> 标签：c#, reference, reference-type

众所周知，C# 类对象被视为引用，那么当您将引用对象作为对方法的引用传递时会发生什么？假设我们有：

```
public class A { ... } 
```

接着：

```
public void F(ref A a) { ... } 
```

编译器是否发现它`a`已经是一个引用类型并保持这种状态，或者他创建了一个对该对象的新引用？

如果我们有这样的东西怎么办：

```
public void F(ref A a)
{
    F(ref a);
} 
```

在这段代码中，除了显而易见`StackOverflowException`的，编译器是否创建了对引用的引用……来引用`a`哪个是引用对象？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-10T22:23:07.793

最好用一个例子来说明这一点：

```
public class C { public int P { get; set; } }
public class X
{
    static void M(C c1, C c2, ref C c3, ref C c4)
    {
      c1.P = 11;
      c2 = new C() { P = 12 };
      c3.P = 13;
      c4 = new C() { P = 14 };
    }
    static void Main()
    {
      C q1 = new C() { P = 1 };
      C q2 = new C() { P = 2 };
      C q3 = new C() { P = 3 };
      C q4 = new C() { P = 4 };
      M(q1, q2, ref q3, ref q4);
      Console.WriteLine(q1.P);
      Console.WriteLine(q2.P);
      Console.WriteLine(q3.P);
      Console.WriteLine(q4.P);
    }
} 
```

怎么了？

q1 和 c1 指的是同一个对象，但是是不同的变量。变异 c1.P 变异 q1.P 因为两个变量都引用同一个对象，所以 q1 现在是 11。

q2 和 c2 指的是同一个对象，但是是不同的变量。变异 c2 不会变异 q2 因为 c2 和 q2 是不同的变量；改变一个不会改变另一个。q2 保持 2，新对象丢失。

q3 和 c3 是同一个变量的两个名称，因此指的是同一个对象。当您更改 c3.P 时，它会自动更改 q3.P，因为它们是同一事物的两个名称。

q4 和 c4 是同一个变量的两个名称，因此变异 q4 也会变异 c4。

那有意义吗？

不幸的是，“为此变量创建别名”的关键字是“ref”。如果它是“别名”，它会更清楚。

回答你的第二个问题：不，这不会产生引用链。让我们做一个更清楚的例子：

```
...
int c1 = 123;
M(ref c1);
...
void M1(ref int q1) { M2(ref q1); }
void M2(ref int q2) { M2(ref q2); } 
```

这表示 c1 和 q1 是同一个变量的不同名称，而 q1 和 q2 是同一个变量的不同名称，因此 c1、q1 和 q2 都是彼此的别名。C# 中从来没有像 C++ 中那样的“对变量的引用”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T22:43:13.333

在像这样的电话中

```
F(ref a);   // ByRef parameter 
```

该变量`a`由方法体“直接使用” `F`。只有一个存储位置。如果该方法`F`分配给它的参数，那么所有可以看到的人都可以`a`立即看到该分配。相反，如果有人（外部`F`）分配给`a`while 方法`F`正在运行，那么参数 of`F`将“突然”更改为新对象。

另一方面，在像

```
F(a);  // normal value parameter 
```

首先将变量`a`复制到一个新变量中，然后在内部使用新变量`F`。现在，如果参数的类型`F`是*值类型*（如 a`struct`或`enum`），则***复制****由 value*完成。所以整个数据都被复制了。但是如果参数的类型是*引用类型*（`class`（包括数组类型）, `interface`, `delegate`），则拷贝只`a`涉及*引用*的***拷贝***。

 *要检查您对类型参数的值参数情况的理解，请`class`弄清楚这些方法的作用：

```
static void F1(List<int> list>)  // no ref modifier
{
    list.Clear();
}

static void F2(List<int> list>)  // no ref modifier
{
    list = new List<int>();
} 
```

这是一些可能有趣的例子`ref`：

```
static void G(ref string a, ref string b)
{
    if (string.Equals(a, b))
        b += "_unique";

    // Is it now safe to say that a and b are distinct?
    // No. Anyone could have changed either a or b by now.
    // For example, a and b could "alias" public fields visisble to other threads.
} 
```

作为上述使用的示例`G`，考虑`var x = "initial"; G(ref x, ref x);`在这种情况下将与方法内部`a`一起更改的代码。`b``G`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-10T22:26:05.887

`ref`只是创建对原始值的引用。对于*引用*类型，“值”是变量内存的位置。当您使用`ref`该方法时，现在可以更改原始变量引用的内容。如果您随后对已经`ref`是第二种方法的参数执行相同操作，则只需与第一种方法具有相同的引用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-10T22:18:02.133

这两个概念并不相同。方法参数无论是值类型还是引用类型，都可以通过 ref 进行修改。

通过引用传递类型可以使被调用的方法修改参数所引用的对象或更改参数的存储位置。

```
static void Main()
{
    Foo item = new Foo("aaa");
    GetByReference(ref item);
    Console.WriteLine(item.Name)
}
static void ChangeByReference(ref Foo itemRef)
{
    itemRef = new Foo("bbb");
} 
```

这实际上会打印“bbb”，因为在这种情况下，您没有更改对象值，而是更改了对象本身

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-10T22:20:58.420

当您将对象作为方法的参数传递时，您会传递一个引用原始对象的新指针。如果将对象作为 ref 参数传递，则传递使用调用者方法的相同指针。一个例子，

```
public void F(ref A a, A b){
    a = new A(1);
    b.Property = 12;
    b = new B(2);
}

public void G(){
    A a = new A(0);
    A b = new A(0);
    F(a,b);
    System.Console.WriteLine(a + " - " + b);
} 
```

输出是 1 - 12 因为对象 b 的指针没有改变，但原始对象改变了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-10T22:10:02.193

简单地说，将变量作为 ref 参数传递就像为原始变量创建别名一样。

引用类型和引用参数是不同的实体。在 C# 中，变量总是按值传递。该值可能是对另一个对象或存储值的引用。

换句话说，引用类型是“通过引用传递”的，因为当您将对象实例传递给方法时，该方法会获得对该对象实例的引用。
在引用参数的情况下，引用是对变量的引用（因此认为这是一个别名是有意义的）。这是“通过引用传递”的另一种形式。

以你的例子为例：

```
public void F(ref A a)
{
    F(ref a);
} 
```

这里就像我们有一个`a`被无限次引用的对象（原始参数）。（请注意，这不是*实际*发生的情况）。此图旨在提供处理参考参数时在幕后发生的事情的惯用表示。

![在此处输入图像描述](../Images/67906517ca4690ecaaea376b25c85aa8.png)

有关详细信息，请参阅 4.0 C# 规范的第 1.6.6.1 节。*

# java - 验证逻辑应该在哪里？

> ID：15328239
> 
> 赞同：13
> 
> 时间：2013-03-10T22:06:10.897
> 
> 标签：java, oop, validation, constructor

**问题**

在需要复杂验证逻辑的情况下，我如何才能最好地管理对象图的构造？出于可测试性的原因，我想保留依赖注入的、无操作的构造函数。

*可测试性对我来说非常重要，您对维护代码的这个属性有何建议？*

**背景**

我有一个普通的旧 java 对象，它为我管理一些业务数据的结构：

```
class Pojo
{
    protected final String p;

    public Pojo(String p) {
        this.p = p;
    }
} 
```

我想确保 p 的格式有效，因为如果没有这种保证，这个业务对象真的毫无意义；如果 p 是无意义的，甚至不应该创建它。但是，验证 p 并非易事。

**抓住**

真的，它需要足够复杂的验证逻辑，该逻辑本身应该是完全可测试的，所以我在一个单独的类中拥有该逻辑：

```
final class BusinessLogic() implements Validator<String>
{
    public String validate(String p) throws InvalidFoo, InvalidBar {
        ...
    }
} 
```

**可能的重复问题**

*   [验证逻辑应该在哪里实现？](https://stackoverflow.com/questions/684468/where-should-validation-logic-be-implemented)- 接受的答案对我来说是不可理解的。我将“在班级的本地环境中运行”读为重言式，验证规则如何在“班级的本地环境”之外的任何地方运行？第 2 点我无法理解，所以我无法发表评论。
*   [在哪里提供验证的逻辑规则？](https://stackoverflow.com/questions/12129452/where-to-provide-logic-rules-for-validation)- 两个答案都表明责任在于客户/数据提供者，我原则上喜欢这一点。但是，在我的情况下，客户端可能不是数据的发起者并且无法验证它。
*   [在哪里保留验证逻辑？](https://stackoverflow.com/questions/3647886/where-to-keep-validation-logic)- 建议模型可以拥有验证，但是我发现这种方法不太适合测试。具体来说，对于每个单元测试，即使我正在测试模型的其他部分，我也需要关心所有的验证逻辑——按照建议的方法，我永远无法完全隔离我想要测试的内容。

**到目前为止我的想法**

尽管下面的构造函数公开声明了 Pojo 的依赖关系并保留了其简单的可测试性，但它是完全不安全的。这里没有什么可以阻止客户端提供一个声称每个输入都是可以接受的验证器！

```
public Pojo(Validator businessLogic, String p) throws InvalidFoo, InvalidBar {
    this.p = businessLogic.validate(p);
} 
```

所以，我在一定程度上限制了构造函数的可见性，并且我提供了一个工厂方法来确保验证然后构造：

```
@VisibleForTesting
Pojo(String p) {
    this.p = p;
}

public static Pojo createPojo(String p) throws InvalidFoo, InvalidBar {
    Validator businessLogic = new BusinessLogic();
    businessLogic.validate(p);
    return new Pojo(p);
} 
```

现在我可以将 createPojo 重构为一个工厂类，这将恢复 Pojo 的“单一职责”并简化工厂逻辑的测试，更不用说不再浪费在每个新 Pojo 上创建一个新的（无状态的）BusinessLogic 的性能优势。

我的直觉是我应该停下来，征求外界的意见。我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-11T12:01:32.363

下面的一些回应元素......让我知道它是否有意义/回答你的问题。

* * *

**简介**：我认为您的系统可以是简单的库、多层应用程序或复杂的分布式系统，在验证方面实际上并没有太大区别：

*   客户端：远程客户端（例如 HTTP 客户端）或只是另一个调用您的库的类。
*   服务：远程服务（例如 REST 服务）或您公开的 API。

* * *

**在哪里验证？**

您通常希望验证您的输入参数：

*   在**客户**端，在将参数传递给服务之前，确保尽早确保对象将有效。如果它是一个远程服务或者在参数的生成和对象创建之间存在复杂的流程，这尤其可取。

*   在**服务**方面：

    *   在类级别，在您的构造函数中，以确保您创建有效的对象；
    *   在子系统级别，即管理这些对象的层（例如 DAL 持久化您`Pojo`的 s）；
    *   在服务的边界，例如库或控制器的*[外观](http://c2.com/cgi/wiki?FacadePattern)*或外部 API（如在 MVC 中，例如 REST 端点、Spring 控制器等）。

* * *

**如何验证？**

假设上述情况，由于您可能必须在多个地方重用验证逻辑，因此将其提取到*[实用程序类](http://c2.com/cgi/wiki?UtilityClasses)*中可能是个好主意。这边走：

*   你不要复制它（干！）；
*   您确信系统的每一层都会以相同的方式进行验证；
*   您可以轻松地单独对该逻辑进行单元测试（因为它是无状态的）。

更具体地说，您至少会在构造函数中调用此逻辑，以强制对象的有效性（考虑将有效的依赖关系作为算法的*先决条件*存在于`Pojo`'s 的方法中）：

*实用程序类*：

```
public final class PojoValidator() {
    private PojoValidator() {
        // Pure utility class, do NOT instantiate.
    }

    public static String validateFoo(final String foo) {
        // Validate the provided foo here.
        // Validation logic can throw:
        // - checked exceptions if you can/want to recover from an invalid foo, 
        // - unchecked exceptions if you consider these as runtime exceptions and can't really recover (less clutering of your API).
        return foo;
    }

    public static Bar validateBar(final Bar bar) {
        // Same as above...
        // Can itself call other validators.
        return bar;
    }
} 
```

*Pojo 类*：注意静态导入语句以获得更好的可读性。

```
import static PojoValidator.validateFoo;
import static PojoValidator.validateBar;

class Pojo {
    private final String foo;
    private final Bar bar;

    public Pojo(final String foo, final Bar bar) {
        validateFoo(foo);
        validateBar(bar);
        this.foo = foo;
        this.bar = bar;
    }
} 
```

* * *

**如何测试我的 Pojo？**

1.  您应该添加创建单元测试以确保在构造时调用您的验证逻辑（以避免回归，因为人们稍后通过删除此验证逻辑来​​“简化”您的构造函数，原因是 X、Y、Z）。

2.  如果依赖项很简单，则内联创建依赖项，因为它使您的测试更具可读性，因为您使用的所有内容都是本地的（更少的滚动，更小的心理足迹等）

3.  但是，如果您的 Pojo 依赖项的设置足够复杂/冗长以至于测试不再可读，您可以将此设置分解为`@Before`/`setUp`方法，以便单元测试测试`Pojo`的逻辑真正专注于验证您的行为波乔。

无论如何，我同意 Jeff Storey：

1.  使用有效参数编写测试，
2.  没有没有验证的构造函数*只是为了你的测试*。*当您混合生产*和*测试*代码时，这确实是一种代码味道，并且肯定会在某些时候被某人无意中使用，包括您的服务的稳定性。

最后，将您的测试视为代码示例、示例或可执行规范：您不想通过以下方式给出一个令人困惑的示例：

*   注入无效参数；
*   注入验证器，这会使您的 API 混乱/读取“奇怪”。

* * *

**如果`Pojo`需要非常复杂的依赖项怎么办？**

[*如果是这种情况，请告诉我们*]

*生产代码*：您可以尝试在工厂中隐藏这种复杂性。

*测试代码*：要么：

*   如上所述，以不同的方法将其排除在外；或者
*   使用你的工厂；或者
*   使用模拟参数，并对其进行配置，以便它们验证测试通过的要求。

* * *

编辑：一些关于**安全**上下文中输入验证的链接，这也很有用：

*   [OWASP 的输入验证备忘单](https://www.owasp.org/index.php/Input_Validation_Cheat_Sheet)
*   [OWASP 关于数据验证的维基页面](https://www.owasp.org/index.php/Data_Validation)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T22:25:37.357

首先，我想说验证逻辑不应该只存在于客户端中。这有助于确保您最终不会将无效数据放入数据存储中。如果您添加其他客户端（例如，您可能有一个胖客户端并添加了一个 Web 服务客户端，您需要在这两个地方维护验证）。

我认为您不应该有一个构造函数来构造一个不验证的对象（使用该`@VisibleForTesting`注释）。您通常应该使用有效对象进行测试（除非您正在测试错误案例）。此外，在生产代码中添加*仅*用于测试的附加代码是一种代码味道，因为它不是真正的生产代码。

我认为放置验证逻辑的适当位置是域对象本身。这将确保您不会创建无效的域对象。

我不太喜欢将验证器传递给域对象的想法。这给需要了解验证器的域对象客户带来了很多工作。如果您想创建一个单独的验证器，这可能会增加重用和模块化的好处，但我不会注入它。在测试中，您始终可以使用完全绕过验证的模拟对象。

向域模型添加验证是 Web 框架（grails/rails）常见的事情。我认为这是一个很好的方法，它不应该损害可测试性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-25T13:04:10.480

> 我想确保它`p`的格式有效，因为如果没有这种保证，这个业务对象真的毫无意义；`p`如果是胡说八道，甚至不应该创建它。但是，验证`p`并非易事。

1.  “`p`有效格式”意味着类型`p`不仅仅是`String`，而是一些更具体的类型。

例如`EmailString`：

```
class Pojo
{
    protected final EmailString p;

    public Pojo(EmailString p) {
        this.p = p;
    }
} 
```

2.  `String`和之间必须有一个转换器`EmailString`。*这个转换器，作为业务逻辑的一部分，确保`p`不会无效。*每当消费者拥有`String`并想要创建`Pojo`时，他都会使用此转换器。

有几种变体如何实现此转换器以方便地捕获不可转换的情况，例如，`.net`样式：

```
class Converter
{
    public static bool TryParse(String s, out EmailString p) {

    }
} 
```

> 可测试性对我来说非常重要，您对维护代码的这个属性有何建议？

这样您就可以将逻辑与解析/转换逻辑`Pojo`分开测试。`String`

# php - http://productionsite.com 可以在某种 wamp 设置中直接链接到 http://localhost/productionsite

> ID：15328241
> 
> 赞同：0
> 
> 时间：2013-03-10T22:06:19.930
> 
> 标签：php, wamp

我喜欢在我的大多数应用程序中使用绝对路径。

我第一次使用 wamp 服务器进行开发，想知道是否有办法将生产路径欺骗到 localhost 路径

所以即使代码读取

```
 include('mysite.com/file.php') 
```

我希望 wamp 服务器提供

```
localhost/mysite/file.php 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:14:50.657

我假设这是因为如果您尝试访问`mysite.com`，由于您设置路由器的方式或其他原因，它永远不会加载。

我还将假设您使用的是 Windows，因为您说的是 WAMP。

* * *

您需要做的是修改您的`hosts`文件（如果您不确定如何，请参阅[本教程](http://www.howtogeek.com/howto/27350)）。

将以下代码添加到它的末尾：

```
127.0.0.1   mysite.com 
```

并保存它，显然。（这四个空格应该是一个制表符，但 StackOverflow 不允许我在这里发布它们。）

要么这样，要么设置 DNS 递归，这更具挑战性且特定于路由器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T22:35:02.417

您可以使用`$_SERVER['DOCUMENT_ROOT']`，或定义自己的位置`$root_path`。

这样你就可以`include "$root_path/path/to/file.php"`了，它可以在任何地方工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T22:48:16.300

不要使用绝对路径是唯一的解决方案。

如果你这样做，你将你的网站和脚本具体化。

# c++ - 为什么在按值返回列表初始化对象时不调用复制构造函数？

> ID：15328244
> 
> 赞同：7
> 
> 时间：2013-03-10T22:06:50.937
> 
> 标签：c++, c++11

我知道当对象从函数按值返回时，它们的复制构造函数被调用。如果一个类有一个已删除的复制构造函数，则按值返回将失败。

```
struct X {
    X(const X &) = delete;
};

X f() {
   return X{};
} 
```

> `error: call to deleted constructor of 'X'`

C++11 为我们提供了扩展初始化器。我在 SO 帖子的某个地方读到这个

```
X f() {
    return {};
} 
```

是相同的

```
X f() {
    return X{};
} 
```

那么为什么下面的代码没有给我一个错误？它通过了，我什至可以在 main 中调用该函数：

```
struct D {
   D(const D &) = delete;
};

D f() { return {}; }

int main()
{
   f();
} 
```

[这是一个演示。](http://liveworkspace.org/code/4yc7Hy$2171)没有错误报告。我觉得这很奇怪，因为我认为应该调用复制构造函数。谁能解释为什么没有给出错误？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-10T22:20:14.010

> 我在 SO 帖子的某处读到这个 ​​[...] 与 [...]

他们错了。它们*相似*，但不一样。

通过使用支撑初始化列表，您可以*就地*初始化返回值。如果您创建一个临时文件，那么您所做的是创建临时文件，然后将其复制到返回值中。任何有价值的编译器都会忽略它，但复制构造函数仍然必须是可访问的。

但是由于花括号初始化列表就地初始化了返回值，因此您不需要访问复制构造函数。

根据标准，第 6.6.3 节，p2：

> 带有花括号初始化列表的 return 语句通过指定初始化列表中的复制列表初始化 (8.5.4) 初始化要从函数返回的对象或引用。

请注意，“复制列表初始化”与“复制初始化”不同；它不进行任何复制，因此不需要可访问的复制构造函数。“复制列表初始化”和“直接列表初始化”之间的唯一区别是前者会阻塞`explicit`构造函数。

# java - 如何在Android中获取进程内存消耗

> ID：15328247
> 
> 赞同：0
> 
> 时间：2013-03-10T22:07:21.437
> 
> 标签：java, android, memory, memory-management, android-emulator

我想知道应用程序 A 到应用程序 B 的内存消耗。我了解本网站上讨论的所有[技术。](https://stackoverflow.com/questions/2298208/how-to-discover-memory-usage-of-my-application-in-android)但是，它们都不适合我。我的场景是，我已经实现了一个代码，可以通过 top 命令监控任何特定应用程序的 CPU 消耗。但是，top 命令只提供 VSS 和 RSS，而我对 PSS 和 USS 感兴趣。获得这些值的一种方法是通过 procrank。但是，我不确定 procrank 命令是否可以像我尝试过的那样在智能手机上执行，`process p2 = Runtime.getRuntime().exec("procrank");`但它不起作用。（编辑：适用于 Android 模拟器（不是智能手机）。有人可以指导我如何通过应用程序 ID 或名称获取 PSS 和 USS，我已经通过 top 命令获取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-20T12:44:10.423

我知道这个问题很老了，我会提出一些建议..

*   首先在控制台中获得root权限

    ```
    Process process = Runtime.getRuntime().exec("su"); 
    ```

*   然后用root权限编写你的命令

    ```
    su <--command--> 
    ```

*   读取流输出

    ```
    try {
      Process process = Runtime.getRuntime().exec("su");         
      DataOutputStream dataOutputStream = 
                               new DataOutputStream(process.getOutputStream());
      if (dataOutputStream != null) {
          dataOutputStream.writeBytes("procrank\n");             
          dataOutputStream.flush();
          BufferedInputStream bufferedInputStream = 
                               new BufferedInputStream(process.getInputStream());
          byte[] bff = new byte[bufferedInputStream.available()];
          bufferedInputStream.read(bff);
      }
    } catch (Exception e) {
    } 
    ```

请通过[我的答案进行解释](https://stackoverflow.com/a/48885488/2553431)

# macos - mac osx ln 命令：使用别名或符号链接链接目录 mac osx？

> ID：15328248
> 
> 赞同：0
> 
> 时间：2013-03-10T22:07:31.363
> 
> 标签：macos, unix, terminal, ln

我在我的 bootcamp windows xp 上安装了一个工具 (EVEHQ)。我正在并行运行以使用该应用程序。效果很好。问题是应用程序有一个硬连线（二进制）目录路径，用于存储一些数据。我需要mac端的数据。我可以简单地手动或自动复制文件来同步文件。但我的想法是在 bootcamp 文件系统上创建一个链接，以便应用程序认为它将它存储在原始位置，但实际上文件存储在我使用它们的位置。

我在哪里使用文件（XML 文件）：

```
/Volumes/Macintosh HD/Users/fred/Library/Application Support/EVE Online/p_drive/My Documents/EVE/fittings 
```

EVEHQ Windows 应用程序将它们存储在训练营分区中：

```
/Volumes/c/Documents and Settings/fred/My Documents/Eve/fittings 
```

所以我用：

```
iMac:Eve fred$ pwd
/Volumes/c/Documents and Settings/fred/My Documents/Eve
iMac:Eve fred$ sudo ln -s "/Volumes/Macintosh HD/Users/fred/Library/Application Support/EVE Online/p_drive/My Documents/EVE/fittings" fittings
Password:
ln: fittings: Function not implemented 
```

那里出了什么问题？google 告诉我可以创建指向目录的符号链接。是因为它的交叉分区吗？我认为在 unix 文件系统上没有物理分区，只有目录挂载点。我对unix不是很有经验。

感谢您的反馈意见。亲切的问候弗雷德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:16:58.890

这是因为您想从不支持符号链接的 Windows 分区创建链接。但是，您可以做相反的事情：从 Mac 分区到 Windows 分区的链接，以便 EvE 将您的配件存储在 Windows 分区上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:17:31.260

直接的问题是文件系统驱动程序不支持在该卷上创建符号链接。

但是，无论如何，你的计划是行不通的。首先，Windows 不会理解和尊重符号链接。因此，文件访问不会被重定向。其次，即使它确实识别了符号链接，它也不会理解它指向的路径。路径字符串“/Volumes/Macintosh HD/Users/fred/Library/Application Support/EVE Online/p_drive/My Documents/EVE/fittings”对 Windows 没有意义。（符号链接基本上作为字符串处理。）

# java - Spring生命周期启动方法不起作用

> ID：15328249
> 
> 赞同：1
> 
> 时间：2013-03-10T22:07:33.037
> 
> 标签：java, spring

我以为我设置了一个 spring bean，以便当我的 web 应用程序上下文被初始化时 start 方法运行，但它没有运行。当我在调试模式下启动我的应用程序时，我从未在 start 方法中遇到断点。这是我设置课程的方式：

```
@Transactional
@Service
public class ServerStartup implements Lifecycle {

    @Autowired
    private EmpireService es;

    /**
     * sets up the server the first time. Should only be called once
     */
    private boolean setup() {
            [... sets stuff up, saves the empire]
    }

    /**
     * initializes the Empire with its necessary value
     */
    @Override
    public void start() {
        Empire empire = es.getEmpire();
        if (empire == null) {
            //initialize all data as there is no "empire"
            this.setup();
            empire = es.getEmpire();
        }
        Empire.setEmpireGold(empire.getInstanceEmpireGold());

    }

    /**
     * does nothing
     */
    @Override
    public void stop() {
    }

    /**
     * does nothing
     */
    @Override
    public boolean isRunning() {
        return false;
    }       
} 
```

我需要这样做的原因是，当我的程序启动时，它需要检查是否已经构建了地图。如果没有，则需要构建一个。此外，它本质上是在设置一个缓存值，即帝国的 EmpireGold。

如果有比实施 Lifecycle 更好、更有效的方法来做到这一点，我愿意接受建议。否则我只是想让这个工作！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:40:40.297

有不止一种方法可以指示 Spring 在创建 bean 后运行一些初始化逻辑。我个人的偏好是使用`@PostConstruct`注解，因为它是一个`javax.annotation`独立于 Spring 或任何其他容器的标准（在包中定义）。

如果您选择此解决方案并使用 注释您的`start()`方法`@PostConstruct`，请不要忘记包含`<context:annotation-config/>`在您的配置中，否则它将被忽略。

[请在此处](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-postconstruct-and-predestroy-annotations)查看有关此注释的 Spring 文档。
有关同一问题的替代解决方案，请查看[“自定义 bean 的性质”](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-nature)部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T22:41:10.357

用注释你的 start 方法`@PostConstruct`

# php - 使用学说更新嵌入式文档

> ID：15328251
> 
> 赞同：1
> 
> 时间：2013-03-10T22:07:40.700
> 
> 标签：php, mongodb, doctrine-orm, doctrine

我正在尝试使用 Doctrine 更新嵌入式文档，结构如下所示。

```
{ "_id" : ObjectId( "513a3e4a0380543b40000000" ),
  "active" : true,
  "created" : 1362771530,
  "difficulty" : "Titan",
  "map" : { "$ref" : "Map",
    "$id" : ObjectId( "513631e4504a10f516b82ca7" ),
    "$db" : "fantasytd" },
  "mode" : "Coop",
  "password" : "adasdasda",
  "playerLimit" : 4,
  "players" : [ 
    { "$ref" : "Guest",
      "$id" : ObjectId( "5135c5300380549b03000001" ),
      "$db" : "fantasytd" }, 
    { "$ref" : "Guest",
      "$id" : ObjectId( "511fdc5f0380546d02000000" ),
      "$db" : "fantasytd" } ],
  "playerStates" : [ 
    { "id" : "5135c5300380549b03000001",
      "ready" : false }, 
    { "id" : "511fdc5f0380546d02000000",
      "ready" : false } ],
  "title" : "adskmaskldmasdmklas" } 
```

现在我想使用这段代码将播放器的就绪状态设置为 true。

```
$q = $this->get('doctrine_mongodb')
  ->getRepository('FantasytdGameBundle:Game')
  ->createQueryBuilder()
  ->hydrate(false)
  ->update()
  ->field('id')->equals($id);

$update = $paramFetcher->get('update');
if($update == 'ready') {
  $session = new Session();
  $session->start();
  // Load player using accesstoken.
  $player = $session->get($paramFetcher->get('accesstoken'));
  // Set player to be ready, if exist.
  $q->field('playerStates.id')->equals($player->getId());
  $q->field('playerStates.ready')->set('true');
}

$q->getQuery()->execute(); 
```

这不会产生任何错误，也不会改变就绪状态。一直在调试这段代码的每一点，所有的值都是有效的。

# razor - .net Razor 渲染没有空格的连接文本

> ID：15328252
> 
> 赞同：3
> 
> 时间：2013-03-10T22:07:42.743
> 
> 标签：razor

我有：

```
 @:<img src="@Url.Content("~/content/images/lesson_icon/")@mi.LessonId .png" /> 
```

但它呈现为`...lesson_icon/d40d2ff2-d06b-4fd8-80a0-0ed31bbc04eb%20.png`

我怎样才能摆脱`%20`前面的`.png`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T22:11:43.083

您应该在文件扩展名之前删除一个空格：

```
<img src="@Url.Content(string.Format("~/content/images/lesson_icon/{0}.png", mi.LessonId))" /> 
```

或者如果您使用的是 Razor v2，您可以尝试：

```
<img src="~/content/images/lesson_icon/@(mi.LessonId).png" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:14:45.893

您可以发送带有完整链接的字符串，例如：

```
string path = "../content/images/lesson_icon/"
string link = path + mi.LessonId + ".png"; 
```

并将其发送到模型中，或者您可以尝试：

```
@{string png = ".png"}
@:<img src="@Url.Content("~/content/images/lesson_icon/")@mi.LessonId + @png /> 
```

# sql - 如何在 SQL Server 中的所有表和列中找到某个值

> ID：15328256
> 
> 赞同：0
> 
> 时间：2013-03-10T22:08:18.207
> 
> 标签：sql, sql-server

我有一个飞利浦的医院数据库，但我工作的医院没有资金让他们帮助我找到应用程序中的数据在后端 SQL Server 数据库中的位置。架构文档做得不好。我需要构建一个查询来查找数据，但我还不知道数据的位置。

我正在寻找一个高度独特的值，它将告诉我我需要的大部分数据是我找到的列。

我真的不想将所有超过 100 个表都拉入 Access 或 Filemaker 中以试图找出数据所在的位置。

有没有一种更简单的方法可以查询整个数据库，它会在所有表中的所有列中搜索某个值，以告诉您该位数据存在于哪个表和列中？

我也可以使用像 Business Objects 这样的软件解决方案，它可能能够做这样的事情（不是说我知道 Business Objects 是否具有这种能力......我只知道它可以帮助您在数据库中查找数据到目前为止稍早）。

那么有人知道实现这一目标的最佳方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T08:48:13.123

尝试使用[ApexSQL 搜索](http://www.apexsql.com/sql_tools_search.aspx)。这是一个免费的 SSMS 插件，可以帮助您找到所需的内容，而无需编写过多的查询。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T22:18:14.247

如果您有一种在前端应用程序中查找/报告数据的方法，您可以在检索应用程序中的数据时尝试使用 SQL Profiler。同样，您可以在保存数据时运行分析器以查看其写入方式。

# javascript - 是否可以通过悬停而不是单击来激活 DIV？

> ID：15328258
> 
> 赞同：1
> 
> 时间：2013-03-10T22:08:29.483
> 
> 标签：javascript, html, css, hover

所以，这里有一个例子：我们有 50x50 px 大小的 DIV，它有黑色边框和白色背景。当您将鼠标悬停在 div 上时，它会将其背景颜色更改为红色。

现在的问题是：当您在 DIV 上悬停一次时，即使您将鼠标移开，如何使其背景颜色保持红色？

换句话说，如何通过悬停而不是单击来激活 DIV？

编辑：Javascript也很好，如果可能的话，跨平台解决方案将是首选。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:15:39.850

你应该像下面这样：

```
 <div id="content" onmouseover="this.style.backgroundColor='red';"  > Testing div ... </div> 
```

这是测试它的[jsfiddle 。](http://jsfiddle.net/mqZ8U/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T22:20:00.103

对于纯 CSS 解决方案，您需要使用过渡。

```
div
{
     background:white;
     -webkit-transition:background 0s;
     -webkit-transition-delay:999999s;
     -moz-transition:background 0s;
     -moz-transition-delay:999999s;
     transition:background 0s;
     transition-delay:999999s;
}
div:hover
{
     background:red;
     -webkit-transition-delay:0s;
     -moz-transition-delay:0s;
     transition-delay:0s;
} 
```

它会立即变成红色`0s`，但会`999999s`变成白色，这太多了（你可以增加它），我敢肯定有人不会让页面保持打开数小时或数天......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T22:23:21.213

CSS 解决方案不适用于所有浏览器，因此您应该使用 JavaScript。正如另一个答案所暗示的那样，最好不要使用 DOM Level 0 事件来执行此操作，最佳做法是向您的 div 添加一个您的 CSS 可以设置样式的类。您可以使用 jQuery 并执行以下操作：

```
$(function(){    
    $('#myDiv').on('mouseenter', function(){
        $(this).addClass('active');
    });
}); 
```

然后样式它：

```
#myDiv.active {
    background: red;
} 
```

这将页面的结构、样式和功能分开，使其更易于维护。它还可以轻松地将相同的功能添加到页面上的其他元素。

# java - 添加要导出的资源文件夹

> ID：15328272
> 
> 赞同：0
> 
> 时间：2013-03-10T22:09:56.990
> 
> 标签：java, eclipse, jar, export

我正在使用 Eclipse 对我的 java 项目进行编码，并有一个名为 res 的文件夹，其中包含项目正常工作所需的任何图像或文本文件。在 ide 中运行时，源文件夹可以毫无问题地引用 res 文件夹，但是当我将其导出到我的桌面时，res 文件夹不会与源文件夹一起导出。我必须在我的桌面上创建一个文件夹来保存导出的 jar，然后在该文件夹中重新创建 res 文件夹才能使其正常工作。我环顾四周，但无法获得有关如何让 res 文件夹与 jar 文件一起导出的有效答案。我尝试将 res 文件夹设为源文件夹，但没有成功。谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:20:58.487

可能是 res 文件夹被导出但您没有以正确的方式访问文件的问题。当您访问 res 文件夹中的文件时，您必须以不同的方式进行操作，以使其在创建 jar 文件后继续工作。

```
this.getClass().getResource("/res/fileNameToAccess"); 
```

第一个“/”指的是 jar 文件的基本文件夹。

如果文件根本没有放入 jar 文件中，我不确定。将其添加为源文件夹后，它应该会被导出。

# php - PHP - 需要后未声明的变量

> ID：15328274
> 
> 赞同：1
> 
> 时间：2013-03-10T22:09:58.873
> 
> 标签：php

我正在尝试创建一个 php 站点，但是我遇到了一个问题，即我无法在包含的文件中使用包含的变量！

索引.php

```
<?php
require 'core/init.php';
?> 
```

初始化文件

```
<?php
require 'config.php';

require 'db/connect.php';
?> 
```

配置文件

```
<?php
// Config
// The Title of the site
$site_title = 'php-site';
$site_desc = 'A awesome PHP site!';
$site_keywords = 'php, html5, css3, awesome';
$site_author = 'erty5000';

// Database - MySQL
// MySQL host
$db_host = 'localhost';

// MySQL username
$db_username = 'myuser';

// MySQL password
$db_password = 'mypassword';

// MySQL database
$db_database = 'mydb';

// Error to display at the top of the page if a connection problem occured
$db_connect_error = 'Sorry, we\'re experiencing connection problems.';
?> 
```

连接.php

```
<?php
mysql_connect($db_host, $db_username, $db_password) or die($db_connection_error);
mysql_select_db($db_database) or die($db_connection_error);
?> 
```

我得到的错误是

```
Notice: Undefined variable: db_host in C:\xampp\htdocs\w\php-site\core\db\connect.php on line 2

Notice: Undefined variable: db_username in C:\xampp\htdocs\w\php-site\core\db\connect.php on line 2

Notice: Undefined variable: db_password in C:\xampp\htdocs\w\php-site\core\db\connect.php on line 2

Warning: mysql_connect(): Access denied for user ''@'localhost' (using password: NO) in C:\xampp\htdocs\w\php-site\core\db\connect.php on line 2

Notice: Undefined variable: db_connection_error in C:\xampp\htdocs\w\php-site\core\db\connect.php on line 2 
```

很抱歉这么长的帖子，但我真的希望有人能帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:19:44.603

您似乎`config.php`在包含路径或`index.php`. A[在文档中](http://www.php.net/manual/en/function.include.php)解释：

> 根据给定的文件路径包含文件，如果没有给出，则根据指定的 include_path 包含文件。如果在 include_path 中找不到该文件，则 include 最终会在失败之前检查调用脚本自己的目录和当前工作目录。

这个问题可以通过指定文件的绝对路径轻松解决，即：

```
require(__DIR__ .'/config.php'); 
```

# php - 在单页网站中使用 jquery ajax 加载页面时显示进度条

> ID：15328275
> 
> 赞同：33
> 
> 时间：2013-03-10T22:10:01.993
> 
> 标签：php, javascript, jquery, ajax, progress-bar

我有一个基本页面，顶部有一个导航栏，还有一个包装体。

每当用户单击导航链接时，它都会将`.load`页面内容加载到包装器 div 中。

```
$(this).ajaxStart(function(){$('.progressbar .bar').css('width','5%');$('.progressbar').fadeIn();});
$(this).ajaxEnd(function(){$('progressbar').hide();});

$('.ajaxspl').on('click',function(e){
    e.preventDefault();

    var url=$(this).data('url'),
        wrap=$('body #wrap');

    //clean the wrapper
    wrap.slideUp().html('');

    //load page into wrapper
    wrap.load(url,function(){wrap.slideDown();});
}); 
```

来自的返回值示例`.load`：

```
<div>
...content
</div>
<script>$('.progressbar .bar').css('width','30%');</script>
<link href="/assets/css/datepicker.css" rel="stylesheet" />
<script>$('.progressbar .bar').css('width','60%');</script>
<link href="/assets/css/main.css" rel="stylesheet" />
<script>$('.progressbar .bar').css('width','90%');</script>
<script>//blah blah</script> 
```

如您所见，我有一个显示在的 Bootstrap 进度条，`ajaxstart()`在我调用的页面上，我会在加载每个项目后修改进度条的值。

这在 Firefox 上运行良好，我可以在等待页面加载时看到进度条，但它不适用于 Chrome 或 IE。

有一个更好的方法吗？我这样做是正确的还是有另一种方法可以做到这一点？

例如，`$.ajax`以 kb 为单位获取页面大小并在收到数据时即时更新进度条？

我正在尝试在加载 Gmail 时生成类似于加载页面的内容。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-03-14T09:27:20.537

请允许我向您介绍[此页面](http://www.dave-bond.com/blog/2010/01/JQuery-ajax-progress-HMTL5/)，它描述了如何在 jquery`progress event`中向 xhr 对象添加侦听器（仅适用于[这些浏览器](http://caniuse.com/#feat=xhr2)，在较旧的浏览器中，您只需依赖当前使用的相同基础）。

作为参考，我复制了下面的相关代码（您可能只对“下载进度”部分感兴趣）：

```
$.ajax({
  xhr: function()
  {
    var xhr = new window.XMLHttpRequest();
    //Upload progress
    xhr.upload.addEventListener("progress", function(evt){
      if (evt.lengthComputable) {
        var percentComplete = evt.loaded / evt.total;
        //Do something with upload progress
        console.log(percentComplete);
      }
    }, false);
    //Download progress
    xhr.addEventListener("progress", function(evt){
      if (evt.lengthComputable) {
        var percentComplete = evt.loaded / evt.total;
        //Do something with download progress
        console.log(percentComplete);
      }
    }, false);
    return xhr;
  },
  type: 'POST',
  url: "/",
  data: {},
  success: function(data){
    //Do something success-ish
  }
}); 
```

请允许我说，这对于单页网站来说太过分了，而且只有对大文件才真正有用。此外，图像和类似媒体不是以这种方式处理的，您需要监控图像的加载（或通过 ajax 自己完成）以使这样的系统完美。

这是一个 JSFiddle 展示了这一点：http: [//jsfiddle.net/vg389mnv/1/](http://jsfiddle.net/vg389mnv/1/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-19T11:47:48.197

上面的答案是正确的（赞成）。自定义 xhr 请求效果很好，我用您的代码（以及更大的文件以查看实际进度）对其进行了测试，不妨将其复制到此处：

```
$('.ajaxspl').on('click',function(e){
    e.preventDefault();

    var url=$(this).data('url'), wrap=$('body #wrap');

    //clean the wrapper
    wrap.slideUp().html('');

    //load page into wrapper
    console.log('starting ajax request');
    $.ajax({
        xhr: function() {
            var xhr = new window.XMLHttpRequest();
            xhr.addEventListener('progress', function(e) {
                if (e.lengthComputable) {
                    $('.progressbar .bar').css('width', '' + (100 * e.loaded / e.total) + '%');
                }
            });
            return xhr;
        }, 
        type: 'POST', 
        url: url, 
        data: {}, 
        complete: function(response, status, xhr) {
            console.log(response)
            wrap.html(response.responseText);
            wrap.slideDown();
        }
    });

}); 
```

# windows-phone-8 - WP8 模拟器在声音上“跳跃”

> ID：15328279
> 
> 赞同：1
> 
> 时间：2013-03-10T22:10:50.530
> 
> 标签：windows-phone-8, playback, mediaelement, audio, windows-phone-8-emulator

## 背景

我有一个简单的应用程序，应该一个接一个地播放 2 种声音。

## 问题

在 windows phone8 模拟器上，我一直在中间切掉第一个声音，有时我让第二个声音播放两次。

## 我试过的

我在 XAML 中使用该事件：

```
MediaEnded="mediaElement_MediaEnded" 
```

我在那里为 MediaElement 对象设置了一个新源：

```
mediaElement.Source = new Uri(_soundFileToOpen, UriKind.Relative);
mediaElement.Play(); 
```

我也尝试注册该活动：

```
MediaOpened="mediaElement_MediaOpened" 
```

并且只有在那里开始音频（当然是 AutoPlay="False"），但它没有帮助。

## 问题

为什么会发生这种情况，我可以解决它吗？

也许这是模拟器的一个错误，在真实设备上它可以正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-10T18:11:53.017

我有同样的问题。即使将位置强制为 0。它播放文件的一部分，然后以正确的声音重新开始。不时播放的声音是应有的。

模拟器肯定有问题...

# actionscript-3 - 来自 swf 内部的 AS3“TypeError：错误 #1009”

> ID：15328284
> 
> 赞同：-1
> 
> 时间：2013-03-10T22:11:25.050
> 
> 标签：actionscript-3

我有一个导入了多个 swf 的主文件。

其中一张幻灯片在输出中显示：

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
at Loud2_fla::MainTimeline/moveThatMouse() 
```

代码：

```
function moveThatMouse(evt: MouseEvent):void
{
    circle.x = stage.mouseX;
    lightning.x = stage.mouseX;
    circle.y = stage.mouseY;
    lightning.y = stage.mouseY;
    evt.updateAfterEvent();
} 
```

另一个是：

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
    at Master_fla::MainTimeline/playout() 
```

代码：

```
playbutton.addEventListener(MouseEvent.MOUSE_OVER, playover)
function playover (event:MouseEvent):void{
    playbutton.inside.gotoAndPlay(2);
}
playbutton.addEventListener(MouseEvent.MOUSE_OUT, playout)
function playout (event:MouseEvent):void{
    playbutton.inside.gotoAndPlay(8);
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:20:57.867

这些错误告诉`moveThatMouse()`您 FLA中的方法和其中的`Loud2_fla`方法正在尝试访问值为. 如果没有在您的问题中看到这些功能，我只能建议您：`playout()``Master_fla``null`

1.  发布这些功能的内容。
2.  查看这些函数并检查其中使用的所有变量。查看其中哪些持有空值。

为了澄清起见，以下是该错误的发生方式：

```
function example(shape:Shape):void
{
    shape.x = 10;
}

// Not assigning an instance of Shape to myShape.
// This makes its value null.
var myShape:Shape;

// Error.
example(myShape); 
```

# c - 如何 fork() 确切数量的孩子

> ID：15328285
> 
> 赞同：4
> 
> 时间：2013-03-10T22:11:28.483
> 
> 标签：c, fork, children

所以我正在开发一个可以多次执行某项任务的程序。我曾经使用线程编写过程序，但现在我需要使用带有 fork() 的进程来完成它。

对于线程，我只需创建指定数量的线程，让它们执行一个函数（更改共享内存中的变量），然后最后执行一些使用共享内存中最终值的东西。

但是现在我想做同样的事情，但我不知道该怎么做，因为每次我调用 fork() 时它基本上都会翻倍。所以很明显，如果我在 forloop 中调用 fork()，那么每个父进程和子进程都会自己通过调用 fork() 的循环。

简而言之，我的问题是：如何使用 fork 创建确切数量的子进程（假设我需要 5 个子进程），并让我的父进程等到这 5 个子进程执行完毕后再继续执行？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T22:19:15.853

我认为这会起作用：

```
int processes = 5;
int i;
for (i = 0; i < processes; ++i) {
    if (fork() == 0) {
        // do the job specific to the child process
        ...
        // don't forget to exit from the child
        exit(0);
    }
}
// wait all child processes
int status;
for (i = 0; i < processes; ++i)
    wait(&status); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T22:50:06.380

您可以构建您的流程，以便每个流程分叉相关数量的子节点（例如，父节点将分叉 n 次，子节点 n-1，他们的子节点 n-2 等），或者您可以限制分叉只有父级保持循环（这将是最简单的情况）。所以让孩子们退出循环。

# c - 如何在 c 中解决这个 fork() 示例，

> ID：15328286
> 
> 赞同：0
> 
> 时间：2013-03-10T22:11:37.110
> 
> 标签：c, fork

我应该计算出这段代码来告诉我作业的输出。有人可以帮帮我吗？我不是在寻找答案，而是逐步说明如何理解这一点。

```
 int main() 
 { 
     int pid; 
     int val = 5; 

     pid = fork(); 

     if (pid == 0) val += 3; 

     if (val == 5) val++; 

     printf(“val=%d\n”, val); 
     exit(0); 
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:17:09.460

该代码将打印以下三个选项之一：

```
值=6

```

```
值=8
值=6

```

```
值=6
值=8

```

这取决于哪个`write()`系统调用首先完成：子进程或父进程，以及子进程是否成功创建（它可能会失败）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-10T22:27:20.353

```
pid = fork(); 
if (pid == 0) val += 3; 
if (val == 5) val++; 
printf(“val=%d\n”, val); 
```

案例1：之后`fork()`，parent在child之前被调度，并且完成的`printf()`调用成功

```
 val = 6;         //printed by parent
    val = 8;         //printed by child 
```

案例 2： 之后`fork()`， parent 在 child 之前被安排，并且完成的 printf() 调用成功

```
 val = 8;         //printed by child
    val = 6;         //printed by parent 
```

-- 问题`printf()`和`fork()`--

```
#include<stdio.h>
#include <sys/types.h>

int main()
{
    printf("Before forking");
    pid_t pid = fork();

    if (pid == 0)
        printf("child printing");
    else
        printf("parent printing");
} 
```

输出是

```
term# ./a.out 
Before forkingparent printingBefore forkingchild printing 
```

上面的问题很明显，“分叉前”语句被打印了两次，而它应该只打印一次。

解决方案是

1.  使用, 在每次调用`'\n'`后缓冲每一行。`printf()`

2.  正如[这里](https://stackoverflow.com/questions/2530663/printf-anomaly-after-fork)正确建议的那样，在分叉`fflush(0)`之前清空所有 I/O 缓冲区。

# vim - 带有重音字符的 Vim 缩写不完全替换文本

> ID：15328288
> 
> 赞同：1
> 
> 时间：2013-03-10T22:11:44.347
> 
> 标签：vim, non-ascii-characters

当我使用西班牙口音或字符时，我的 Vim 缩写不起作用。我有`.vimrc`以下内容：

```
iab maniana mañana
iab habia había 
```

但是当我`Space`在输入例如“habia”后点击时，我只会得到“habí”。

我`iskeywords`的设置为：

```
set iskeyword=@,48-57,_,192-255,:,# 
```

**编辑：**命令`:verbose iab habia`返回`i habia hab<ed>a`，命令`:verbose iab maniana`返回`i maniana ma<f1>ana`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-12T20:30:43.970

我认为这是一个简单的编码问题。（底部的解决方案。）

似乎 when`:iab maniana mañana`被执行，`ñ`以拉丁 1 编码解释，其中它的大小为一个字节并且具有值`0x00f1`：

```
ñ (Latin 1):    11110001 
```

但是，当您*使用*缩写时，您不知何故切换到了 UTF-8 编码。

Vim 只是将您存储在右侧的字节插入：`11110001`. 但在 UTF-8`ñ`中有不同的表示形式——事实上，`11110001`是一个无效的 UTF-8 字节（显示为`<f1>`），这就是扩展停止的原因。只是为了说明这一点，这些是 UTF-8 字节`ñ`：

```
ñ (UTF-8):      11000011 10110001
                      ^^   ^^^^^^ 
```

顺便说一句，*ñ*具有 Unicode*代码点* `0x00f1`，您实际上可以看到它以上面显示的两个字节编码。

好吧，你问，但这意味着什么？！

这意味着你应该检查你的 vimrc 并确保`:set encoding=utf-8`在缩写之前。

# c - C 语言 — 费马理论验证器无法正常工作

> ID：15328289
> 
> 赞同：0
> 
> 时间：2013-03-10T22:11:58.823
> 
> 标签：c, memory, cygwin, nested-loops

我的一切工作正常。代码-

```
#include <stdio.h>
#include <math.h>

int quadtest(unsigned long long int a, unsigned long long int b, unsigned long long int c,     unsigned int n)
{
    if ((pow(a,n)+pow(b,n))==pow(c,n))
        return 1;
    else
        return 0;
}

main()
{
unsigned long long int a;
unsigned long long int b;
unsigned long long int c;
unsigned int n;

n=3;
for(n; n<50; n++)
{

//printf("\nn=%u",n);
    for(c=2; c<500; c++)
    {

        printf("\ntrying now c=%llu and n=%u",c,n);     
        for(b=2; b<500; b++)
        {
            for(a=2; a<500; a++)
            {
                quadtest(a,b,c,n);
                if (quadtest(a,b,c,n)==1)
                {   
                    printf("\n|||||||||||||||||||||||WORKS|||||||||||||||||||||||||||||||||");
                    break;
                }
                //printf("\na=%llu, n=%u b=%llu c=%llu",a,n,b,c);   

            }
        if (quadtest(a,b,c,n)==1)
        break;}

        if (quadtest(a,b,c,n)==1)
        break;
    }
    if (quadtest(a,b,c,n)==1)
    break;
}       
if (quadtest(a,b,c,n)==1)
printf("\nthe correct values are a=%llu,b=%llu,c=%llu,n=%u",a,b,c,n);
else
printf("\nfermats theory is correct");
} 
```

从我的立场来看，我正确地编写了所有代码（我只使用了 50 和 500 的范围，因此我可以在我的计算机上实际运行它而无需花费一天的时间）。

所以我在 Cygwin 中编译了程序（我需要使用它），大约花了 15 分钟左右，然后停在“正确的值是 a=381,b=2,c=381,n=7”，这很明显不正确。我不确定问题是什么或如何解决这个问题。我认为它与记忆有关，但我仍然不确定它的修复方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:39:11.863

由于您正在处理双精度数（`pow()`返回双精度数），因此最好使用`EPSILON`如下方式比较它们。您创建一个“小”双精度数（例如`double EPSILON = 0.001`）并通过计算两个变量之间的差异与双精度数进行比较。

```
double a,b;
if(abs(a - b)) < EPSILON){
     /* your code here..
} 
```

使用该`abs()`功能很重要，因此您不必担心`(a > b) || (b < a)`

为了获得更好的效果可以选择较小的`EPSILON`。

写这个：

```
if ((pow(a, n) + pow(b, n) - pow(c, n)) < EPSILON) {
    return 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T22:17:09.310

pow() 接受双参数并返回一个双精度值。double 的精度有限（通常使用 64 位）。存在一个双 x 使得 (x + 1.0) == x。这基本上就是您遇到的问题，因为 381**7 是一个非常大的整数。

要正确地进行这种计算，您需要一种对大整数进行精确数学运算的方法。您需要的通常称为“bignum”库。GMP就是这样一种，您可能想检查一下。

# javascript - 在 javascript 中没有值仍然为真

> ID：15328291
> 
> 赞同：0
> 
> 时间：2013-03-10T22:12:03.100
> 
> 标签：javascript, jquery

我需要检查数据集属性给出的一些数据，可能会发生数据集为空的情况，如果是这样我仍然需要使用 if 语句跳过，但空数据集仍然是正确的，我尝试过...null，未定义他们不工作。

因此，如果不存在任何值，则它应该是错误的。

```
// false
<div data-value=""></div>

if($('div').data('value') !== ""){
   alert('hello ...world?')
}

//true
<div data-value="  "></div>

if($('div').data('value') !== ""){
   alert('hello ...world?')
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:21:31.317

当然，`''`在 javascript 中计算结果为 false（空字符串）。然而`' '`是一个值，它是空格。

您可以先尝试修剪字符串：

```
// false
<div data-value="  "></div>

if($('div').data('value').trim() !== ""){
   alert('hello ...world?')
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:42:21.327

你应该测试你想要的。如果要测试字符串是否包含空格以外的内容，请考虑：

```
if (/\S/.test($('div').data('value'))) {
  // value contains something other than white space
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T22:22:15.637

尝试修剪然后检查真实性

```
$('div').each(function () {
    var data = $.trim($(this).data('value'));
    if (data) {
        alert('hello ...world?');
    }
}); 
```

[http://jsfiddle.net/ethagnawl/qJXHr/2/](http://jsfiddle.net/ethagnawl/qJXHr/2/)

# xcode - UITableView 单元格中没有内容

> ID：15328295
> 
> 赞同：1
> 
> 时间：2013-03-10T22:12:14.050
> 
> 标签：xcode, uitableview, cells

我知道这个问题之前似乎已经回答了很多次，或者似乎是一个非常基本的问题，但我就是不知道我的代码有什么问题。请多多包涵，我是 Objective C 新手。

我在 Viewcontroller 中有一个 tableview，连接到数据源和委托。但是，在我运行时的 ViewController.m 文件中

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [List count];
} 
```

它似乎没有通过。当我运行它时，得到一个空白的表格视图这与我尝试配置其他单元格时相同

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
  return 60;
} 
```

而对于 cellForRowAtIndexPath

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = (UITableViewCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

}
// Configure the cell

UIImageView *imageView = [[UIImageView alloc] initWithFrame:cell.frame];
UIImage *image = [UIImage imageNamed:@"grey.png"];
imageView.image = image;
cell.backgroundView = imageView;
[[cell textLabel] setBackgroundColor:[UIColor clearColor]];
[[cell detailTextLabel] setBackgroundColor:[UIColor clearColor]];

cell.textLabel.text = [datasource objectAtIndex:indexPath.row];
cell.detailTextLabel.text = [datasourceauthors objectAtIndex:indexPath.row]; 
```

在这两段代码中，tableView 是什么？如何将其连接到情节提要中的实际 tableView？

再次抱歉，提前谢谢。

# c++ - 当 Derived 仅添加方法时，将 Base 指针转换为 Derived 指针的有效性

> ID：15328297
> 
> 赞同：2
> 
> 时间：2013-03-10T22:12:37.627
> 
> 标签：c++, inheritance, extend, downcast

[首先，这个问题与将共享指针向下转换为具有附加功能的派生类](https://stackoverflow.com/questions/6284940/downcasting-shared-pointer-to-derived-class-with-additional-functionality-is-t)非常相似 ，那里有很好的答案。但是我想解释一下为什么这是有效的（或无效的）以及何时不使用共享指针。所以 ：

```
class Base { /* ... */ };

class Derived : public Base
{
public:
    void additionnalFunc(int i){ /* access Base members */ }
};

int main(){
Base b;
Derived* d = (Derived*) &b; // or static_cast ?
d->additionnalFunc(3); // works ok.
} 
```

这与 gcc 的预期一样。所以我的问题是它安全/有效吗？使用任何编译器或架构？如果不是，为什么？

为了解释为什么这个问题，这里是上下文。

*   我有“基础”对象。
*   我无法修改基类
*   我有一组模板化的函数，它们需要与 Base 相同的接口，除了一些额外的函数。
*   我希望能够将此模板库与我的 Base 对象一起使用
*   由于附加功能，以上是不可能的。但是从 Base 实现这些功能是微不足道的。
*   我也想尽可能高效（避免转换和间接）

因此，如果上述技巧有效，它可能是一个很好的解决方案......但也许有更好的设计来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:15:54.780

这是未定义的行为。它在任何给定的编译器上是否“有效”可能都不是重点；一般来说，你不能依赖这个工作。^*

在您描述的场景中，听起来最好的解决方案就是创建一些以 a`Base`作为参数的自由函数。当然，如果所需的功能依赖于`protected`成员，那么你就有问题了！（而且我不确定是否有一个好的解决方案，除了找到一种方法来避免需要这种访问。）

* * *

[* 即使您从不更改编译器也是如此。编译器可以自由地假设所有代码都是“正确的”，因此对代码的轻微更改可能会触发优化，从而使上述技巧变得无用。

（当然，我不会暗示这**肯定会**发生，只是它**可能**会发生。）]

# excel - 如何在下面的给定代码中重新调整数组的维度

> ID：15328298
> 
> 赞同：1
> 
> 时间：2013-03-10T22:12:40.463
> 
> 标签：excel, vba

我需要按照下面的方式扩展数组。搜索答案，但似乎没有任何帮助，如下代码所示。

```
Sub MakeOneColumn()

Dim vaCells As Variant
Dim vOutput() As Variant
Dim i As Long, j As Long
Dim lRow As Long

If TypeName(Selection) = "Range" Then
    If Selection.Count > 1 Then
        If Selection.Count <= Selection.Parent.Rows.Count Then
            vaCells = Selection.Value

            ReDim vOutput(1 To UBound(vaCells, 1) * UBound(vaCells, 2), 1 To 1)

            For j = LBound(vaCells, 2) To UBound(vaCells, 2)
                For i = LBound(vaCells, 1) To UBound(vaCells, 1)
                    If Len(vaCells(i, j)) > 0 Then
                        lRow = lRow + 1
                        vOutput(lRow, 1) = vaCells(i, j)
                    End If
                Next i
                lRow = lRow + 1
            Next j

            Selection.ClearContents
            Selection.Cells(1).Resize(lRow).Value = vOutput
        End If
    End If
End If

End Sub 
```

上面的代码在没有添加行“lRow = lRow + 1”的情况下工作。但是，我需要为数组中的每一列留一个空白行。随着添加的行，我得到一个运行时错误 9，下标超出范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T01:40:43.937

请将您的 redim 声明更改为以下

```
 ReDim vOutput(1 To (UBound(vaCells, 1) * UBound(vaCells, 2)) + UBound(vaCells, 2), 1 To 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T01:25:19.090

您收到错误是因为您迭代 lrow 两次，一次在`i`循环中，一次在`j`循环中。如果您检查，您应该会发现该错误仅在选择的所有单元格中都有值时发生。

`lrow`修复方法是设置j 和 i 循环外部的初始值，然后*在*将当前单元格的值分配给`vOutput`. 它看起来像这样：

```
 lRow = 1
  For j = LBound(vaCells, 2) To UBound(vaCells, 2)
      For i = LBound(vaCells, 1) To UBound(vaCells, 1)
          If Len(vaCells(i, j)) > 0 Then
              vOutput(lRow, 1) = vaCells(i, j)
              lRow = lRow + 1
          End If
      Next i
  Next j 
```

顺便说一句，我会注意到您不需要`TypeName`测试，因为选择始终是 Range 类型。

# css - 如何创建评论视图？实现 Facebook 点赞评论（ruby on rails）

> ID：15328300
> 
> 赞同：2
> 
> 时间：2013-03-10T22:12:48.637
> 
> 标签：css, ruby, ruby-on-rails-3, partial-views

我在我的页面上实现了一个类似 facebook 的评论，但我试图弄清楚如何让视图正常工作。

这是评论如何工作的代码：

评论控制器

```
class CommentsController < ApplicationController
     def create
    @micropost = Micropost.find(params[:micropost_id])
    @comment = Comment.new(params[:comment])
    @comment.micropost = @micropost
    @comment.user = current_user
    if @comment.save
       redirect_to(:back)
    else
      render 'shared/_comment_form'
    end
  end
end 
```

评论表单视图

```
<%= form_for([micropost, @comment]) do |f| %>
<%= render 'shared/error_messages', object: f.object %>
  <div class="field">
    <%= f.text_field :comment_content %>
  </div>
  <button class="btn" type="submit">
    Comment
  </button>
<% end %> 
```

我试图弄清楚如何在提交后最好地显示这些评论。我可以用它来构建视图吗？

评论.html.erb

```
 <%= simple_format(comment.content) %>
  <% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:50:49.633

你可以做这样的事情

```
class CommentsController < ApplicationController
     def create
    @micropost = Micropost.find(params[:micropost_id])
    @comment = Comment.new(params[:comment])
    @comment.micropost = @micropost
    @comment.user = current_user
    if @comment.save
       flag = true
    else
      flag = false
    end

respond_to do |format|
 format.html {flag ? redirect_to(:back) : render 'shared/_comment_form'}
format.js
end

  end
end 
```

将您的表单更改为 ajaxified

```
<%= form_for([micropost, @comment], remote: true) do |f| %>
<%= render 'shared/error_messages', object: f.object %>
  <div class="field">
    <%= f.text_field :comment_content %>
  </div>
  <button class="btn" type="submit">
    Comment
  </button>
<% end %> 
```

然后稍微编辑您的视图

评论/comment.html.erb

```
<%= render partial: 'comments/comment', locals: {comment: @comment} %> 
```

部分将是

_comment.html.erb

```
<div id="comment-<%= comment.id%>">
<%= simple_format(comment.content) %>
  <% end %>
</div> 
```

然后在 comments/create.js.erb 做

```
$("#comments_container").prepend(' <%=j render partial: "comments/comment", locals: {comment: @comment} %>'); 
```

而不是 prepend，你可以做任何你想要的动画。您也可以附加，具体取决于您希望如何对评论进行排序

请注意，我为此使用 jQuery。#comments_container 是您要放置评论的 div

请注意，create.js.erb 基本上是评论控制器中创建操作的 js 视图，因此它可以访问创建操作具有的任何变量

note2：我使用的是 ruby​​ 1.9 哈希格式

注意3：我为评论命名，`#comment-<%= comment.id %>`以便您以后可以在以后访问它，如果您想删除它或以其他方式处理它，例如

```
def destroy

@comment = Comment.find(params[:id])

respond_to do |format|
format.js
end
end 
```

然后在 destroy.js.erb 做

```
$("#comment-<%= @comment.id %>").remove(); 
```

这将删除该 div

确保拥有 jquery_ujs 和 jquery gem/files ，仅此而已..

# php - PDO 提交重复记录？

> ID：15328301
> 
> 赞同：1
> 
> 时间：2013-03-10T22:12:51.960
> 
> 标签：php, mysql, database, pdo

我的注册码有效，但每次都提交一个副本。例如，如果我尝试提交

`Steve Smith stevesmith@gmail.com 123456789`

它会在数据库中出现两次，像这样

`Steve Smith stevesmith@gmail.com 123456789`

`Steve Smith stevesmith@gmail.com 123456789`

这是我的代码

```
$failed         = "<p class='errormsg'>Registration failed!</p>";
$register       = "<p class='errormsg'>Thank you for registering $firstname $lastname</p>";
$adduser = $con->prepare("INSERT INTO basicuserinfo(email, password, firstname, lastname) VALUES(:email, :password, :firstname, :lastname)");
$adduser->bindValue(':email', $email);
$adduser->bindValue(':password', $hash);
$adduser->bindValue(':firstname', $firstname);
$adduser->bindValue(':lastname', $lastname);
$adduser->execute();
    if(!$adduser->execute())
    {
    echo "$failed";
    }
    else
    {
    echo "$register";
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T22:14:11.030

因为您要调用`execute`两次，请删除第一个`exeute`，

```
$failed         = "<p class='errormsg'>Registration failed!</p>";
$register       = "<p class='errormsg'>Thank you for registering $firstname $lastname</p>";
$adduser = $con->prepare("INSERT INTO basicuserinfo(email, password, firstname, lastname) VALUES(:email, :password, :firstname, :lastname)");
$adduser->bindValue(':email', $email);
$adduser->bindValue(':password', $hash);
$adduser->bindValue(':firstname', $firstname);
$adduser->bindValue(':lastname', $lastname);
// $adduser->execute();    // <<== this should be removed,
                           //  the reason for duplicate records
    if(!$adduser->execute())
    {
       echo "$failed";
    }
    else
    {
       echo "$register";
    } 
```

# svn - 已存在同名的 SVN 未版本化目录

> ID：15328303
> 
> 赞同：8
> 
> 时间：2013-03-10T22:13:09.493
> 
> 标签：svn, revert, svn-update

我也看到了类似标题的问题，但这个问题有一个例外，即在服务器上更新时出错，因此无法删除以前的未版本控制目录。

我正在使用 SVN 上传代码文件，您我们在服务器上手动创建了上传的图像目录，并且不要通过 svn 提交上传图像，因为它是在服务器和本地机器上可能不同的用户内容，取决于数据库中的数据。

不小心有人提交了 uploads/images 目录，所以我遇到了以下问题：

```
svn: Failed to add directory 'assets/uploads/images': an unversioned directory of the same name already exists 
```

我知道为什么会这样，因为在同一位置有未版本化的文件，所以我的问题是我该如何解决？

我不想删除远程目录，因为它包含与服务器数据库记录相关的图像。那么我怎样才能恢复那个提交的目录呢？我尝试了 svn->revert modify->revert previous commits 在该目录中，但这给出了以下错误：

```
org.apache.subversion.javahl.ClientException: E195020: Cannot merge into mixed-revision working copy [341:448]; try updating first 
```

所以有什么想法，我该如何解决？如果在理解问题上有任何问题，请给我发表评论，我会说清楚。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-10T22:31:44.217

我倾向于做的只是重命名有问题的目录，然后从 svn 重新获取。之后，我只是将文件夹重新合并在一起。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-20T10:06:27.907

I found same problem..and the solution is.. remove assets/uploads/images directory and then get svn up...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-28T18:18:05.170

我通常只使用 svn up --force 来解决没有目录复制和重新合并的问题......

# php - 通过 PHP 的条件 CSS

> ID：15328304
> 
> 赞同：-2
> 
> 时间：2013-03-10T22:13:10.947
> 
> 标签：php, css, conditional

这段代码应该工作吗？事实上，它没有。我不知道为什么。

```
<?php
    if(isset($_SERVER['HTTP_USER_AGENT']))
    {
         $mobile_agents = '!(tablet|pad|mobile|phone|symbian|android|ipod|ios|blackberry|webos)!i';
    if(preg_match($mobile_agents, $_SERVER['HTTP_USER_AGENT']))
    {
        echo "<link rel='stylesheet' href='<?php echo $this->baseurl ?>/templates/css/firefox.css' type='text/css' />";
    }
}
?> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T22:15:58.830

您的回显不正确：

```
echo "<link rel='stylesheet' href='<?php echo $this->baseurl ?>/templates/css/firefox.css' type='text/css' />"; 
```

没有将一个回声包裹在另一个回声中这样的事情。改为连接：

```
echo "<link rel='stylesheet' href='" . $this->baseurl ."'/templates/css/firefox.css' type='text/css' />"; 
```

# java - ZK Java BandBox Image 点击 autoDrop + new ListItem into ListBox

> ID：15328305
> 
> 赞同：1
> 
> 时间：2013-03-10T22:13:12.930
> 
> 标签：java, listbox, zk

大家好，我对 ZK 框架非常陌生，我有 2 个问题希望有人能帮助我。

1）。我有一个在 Java 代码中创建的 Bandbox 组件我的问题是如何在不折叠 BandBox 的情况下对 Bandbox 图像中的点击做出反应我想要做的就是在点击事件时调用另一个组件这可能吗？

2）。伙计们，我有一个带有多个 listItems [14 listCells per listItem] 的 listBox。我需要使用 java 代码创建一个新的 ListItem，并且在新的 ListItem 中我需要访问 2 个单元格，我目前使用的代码在哪里。

```
Student student = new Student();    
student.setAge(13); 
BindingListModelList modelList = (BindingListModelList) results.getModel();
if(modelList==null){
   modelList = new BindingListModelList(new ArrayList<Student>),false); 
   results.setModel(modelList);
}
modelList.add(student); 
```

后来我尝试迭代刚刚创建的 listItem 但我一直收到 listItem.getChildren().size() == 1 我希望所有 14 个孩子都能处理其中的两个，这是为什么？我怎样才能添加一个新的 listItem 以及接收所有的孩子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:13:47.693

1）正如您[在此处](http://www.zkoss.org/zkdemo/combobox/customizable_combobox)看到的那样，导航中未调用的`Bandbox`关闭。`bd.close()`希望这有助于理解。

2）请从您尝试过的程序中发布更多**格式化的**代码。

# java - Java Maven 应用程序下载在本地工作，但不在服务器上

> ID：15328315
> 
> 赞同：0
> 
> 时间：2013-03-10T22:14:24.783
> 
> 标签：java, maven, download, classpath

我有一个 Maven/Spring/Java 应用程序，允许用户在其中下载文件。这是我的应用程序的目录结构。

```
src
  main
    java
      com
        mycompany
          controller
            MyDownloadController
    resources
      downloads
        MyDocument.docx 
```

这是下载文件的控制器代码。

```
File file = new File("src/main/resources/downloads/MyDocument.docx");

response.setContentType("application/docx");
response.setContentLength((int) file.length());
response.setHeader("Content-Disposition", "attachment; filename=\"MyDocument.docx\"");

DataInputStream inputStream = new DataInputStream(new FileInputStream(file));
ServletOutputStream outputStream = response.getOutputStream();

int length   = 0;
byte[] byteBuffer = new byte[4096];
while ((inputStream != null) && ((length = inputStream.read(byteBuffer)) != -1)) {
    outputStream.write(byteBuffer, 0, length);
}

inputStream.close();
outputStream.close(); 
```

在本地 Tomcat 服务器上一切正常。但是当我尝试上传到服务器（Jelastic）时，我得到一个 500 错误`java.io.FileNotFoundException: src/main/resources/downloads/MyDocument.docx (No such file or directory)`。

我查看了服务器上的 Tomcat 目录，文件就在那里（没有为公司隐私截取实际文件）。

![结构体](../Images/032f691e9ead69c77a99fcd1583351a4.png)

我猜这与类路径或其他东西有关。但我不知道我到底需要更新什么或如何更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:54:44.717

由于您的文件位于资源目​​录中，因此您需要将其称为类路径资源。类路径上的资源可以存在于目录结构中，也可以存在于诸如 jar 或 war 之类的档案中。在您的情况下，您的本地环境在文件系统上有这些文件，但是在部署时，它们最终会发生战争。

FileInputStream 在访问类路径资源时不是一个好的选择。

访问这些文件的正确方法是使用类加载器。您可以调用 getResourceAsStream 并将位置提供给资源。在您的情况下，它将如下所示：

```
InputStream is = getClass().getClassLoader()
    .getResourceAsStream("/downloads/MyDocument.docx") 
```

这将使用用于加载当前类的类加载器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:22:45.553

这应该有效：

```
InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("MyDocument.docx"); 
```

# c++ - 通过 C++ 解析 csv

> ID：15328316
> 
> 赞同：1
> 
> 时间：2013-03-10T22:14:29.137
> 
> 标签：c++, parsing, csv

晚上好，我遇到了以下问题。我正在解析这样的csv文件：

```
entry1;entry2;entry3
entry4;entry5;entry6
;; 
```

我以这种方式获取条目：

```
stringstream iss;
while(getline(file, string) {
iss << line;
     while(getline(iss, entry, ';') {
     /do something
     }
} 
```

但是我在最后一行 (;;) 中遇到了问题，我只阅读了 2 个条目，我**需要阅读第三个空白条目**。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:30:30.970

首先，我要指出代码中的一个问题，您`iss`在读取第一行然后调用后处于失败状态`while(getline(iss, entry, ';'))`，因此在读取每一行后您需要重置`stringstream`. 它处于失败状态的原因是调用`std:getline(iss, entry, ';'))`.

对于您的问题，一个简单的选择是简单地检查是否有任何内容被读入`entry`，例如：

```
stringstream iss;
while(getline(file, line)) {
iss << line; // This line will fail if iss is in fail state
entry = ""; // Clear contents of entry
     while(getline(iss, entry, ';')) {
         // Do something
     }
     if(entry == "") // If this is true, nothing was read into entry
     { 
         // Nothing was read into entry so do something
         // This doesn't handle other cases though, so you need to think
         // about the logic for that
     }
     iss.clear(); // <-- Need to reset stream after each line
} 
```

# php - 我的部分 PHP 代码无法在客户端的服务器上运行

> ID：15328319
> 
> 赞同：0
> 
> 时间：2013-03-10T22:14:50.357
> 
> 标签：php

我正在使用此代码将地址发布到 iframe 中的表单。一切都在本地和我自己的 Web 服务器上完美运行，但是当我在客户端的服务器上尝试它时，它只是将此代码显示为 iframe 的表单字段中的文本知道为什么它在这里不起作用吗？客户端运行的 PHP 版本也比我稍新。

```
<iframe name="iFrameName" id="iFrameName" frameborder="0" height="600px" width="700px"></iframe>

<?php 
   if ($_POST["FormtoCRM"] == "Login")
    {
?>
        <form action="http://www.mywebsite.com/iframe.cfm" method="post" target="iFrameName" id="FormtoCRMForm" style="display:none">
            <input type="text" input name="address" value="<?= $_POST['address'] ?>">

                    </form>

        <script type="text/javascript">
document.getElementById("FormtoCRMForm").submit();
</script>

<?php
    }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T22:19:28.287

试试这个代码

```
<?php echo $_POST['address']; ?> 
```

我的猜测是您的`PHP`配置中未启用短打开标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:20:36.820

很可能在其托管环境中关闭了[short_open_tag配置选项。](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)而不是`<?= $_POST['address'] ?>`使用`<?php echo $_POST['address'] ?>`.

# java - java.lang.RuntimeException：无法调用没有参数的公共 com.example.syncapp.MessageBase()

> ID：15328324
> 
> 赞同：23
> 
> 时间：2013-03-10T22:15:06.607
> 
> 标签：java, android, json, gson, runtimeexception

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) 
    throws ServletException, IOException {

  System.out.println(request.getParameter("msg").toString());
  String data = request.getParameter("msg").toString();
  Gson gson = new Gson();
  MessageBase msggg = gson.fromJson(data, MessageBase.class);
  //System.out.println(msggg.Id + msggg.MessageText);
} 
```

* * *

```
public abstract class MessageBase implements Serializable {
  public int Id;
  public String MessageText;
  public Date ReceiveDate;
}

public class SyncSmsMessage extends MessageBase {
  public String SenderNum;  
} 
```

该代码有效，直到`MessageBase msggg=gson.fromJson(data, MessageBase.class);`. 我得到这个例外：

```
java.lang.RuntimeException: Failed to invoke public com.example.syncapp.MessageBase() with no args
  at com.google.gson.internal.ConstructorConstructor$2.construct(ConstructorConstructor.java:94)
  at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:162)
  at com.google.gson.Gson.fromJson(Gson.java:795)
  at com.google.gson.Gson.fromJson(Gson.java:761)
  at com.google.gson.Gson.fromJson(Gson.java:710)
  at com.google.gson.Gson.fromJson(Gson.java:682)
  at AndroidServlet.doPost(AndroidServlet.java:75)
  at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
  at javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 
```

我需要做什么？我将 .jar 放在 lib 文件夹中，我认为 tomcat 可以很好地加载 .jar。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-20T20:05:46.543

From [**GSON User Guide**](https://sites.google.com/site/gson/gson-user-guide):

> *While deserializing an `Object`, Gson needs to create a **default instance** of the class [...] Well-behaved classes that are meant for serialization and deserialization should have a no-argument constructor*

Your problem is that GSON's **Instance Creator** needs a no-argument constructor in the class in which you want to deserialize the JSON response, namely `MessageBase`.

Otherwise, you need to write your own Instance Creator, like [**this**](https://sites.google.com/site/gson/gson-user-guide#TOC-Writing-an-Instance-Creator).

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-11-21T08:14:56.483

**我在使用改造时遇到了同样的问题，并发现在使用抽象**类时会发生这种情况，所以我创建了一个**扩展** 抽象类（`MessageBase`）的空类，如下所示：

```
public class BaseResponse extends MessageBase {

} 
```

现在使用`BaseResponse`具有所有领域的`MessageBase`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-07-08T07:15:28.883

抽象类不能被实例化，只能被子类化。抽象方法主体必须为空（无花括号）。从公共 MessageBase 中删除“抽象”，你就可以开始了。

请参阅链接[Java 抽象类](https://idratherbewriting.com/java-abstract-methods/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-27T07:14:39.517

确保！

1-类`implements Serializable`

2-即使是子类也不抽象

3-应该是公开的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-03-04T17:42:02.397

有时，如果您不小心将同一类的对象放在同一类中，就会发生这种情况，如下所示：

```
class Student{
val data:Student = Student() //this is the mistake  , remove it
} 
```

检查错别字，也许你有一个名为 StudentData 的类，而你只是在自动完成过程中按了 Enter。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-26T16:23:22.683

### 问题示例：

您有一个由抽象类成员组成的抽象类，然后您也扩展了这个主类及其成员。

```
public abstract class Receipt implements Serializable {

    @Expose
    protected ReceiptMainDetails mainDetails;

    @Expose
    protected ReceiptDetails payerReceiptDetails;

    @Expose
    protected ReceiptDetails payeeReceiptDetails; 
```

（细节也很抽象）

```
public class TransferReceipt extends Receipt {

    public TransferReceipt() {}

    public TransferReceipt(TransferDetails body, Payer payer, Payee payee) {
        super(body, payer, payee);
    }

    public  static class TransferDetails extends ReceiptMainDetails {

        public TransferDetails() {}

    } 
```

（并且其他细节也被扩展）

GSON 将无法将 json 转换为对象。

### 解决方案

Receipt 可以是抽象的，但它的成员必须是具体的类，即使您可以再次扩展它们。

### 测试您的解决方案

```
@Test
public void testGson() {

    String jsonString = "{youChooseWhatIsHere}";

    Gson gson = new Gson();

    TransferReceipt receipt = gson.fromJson(jsonString, TransferReceipt.class);

    String actualReceiptJson = gson.toJson(receipt);

    System.out.println(jsonString);
    System.out.println(actualReceiptJson);
    System.out.println(receipt);
} 
```

# java - 带有子字符串的 if else 语句

> ID：15328325
> 
> 赞同：0
> 
> 时间：2013-03-10T22:15:07.353
> 
> 标签：java, if-statement, substring

我正在尝试制作一个 if else 语句，其中中间值查看子字符串中的第 4 位是否是整数. 我得到的错误在 else if 行上，它需要一个布尔值并找到一个 int 我该如何解决这个问题，所以 else if 行检查子字符串 4 是否是一个 int？

```
 if (strAlt.equals("03"))
   {
       return  "N/A";
   }
   else if (Integer.parseInt(strPos.substring(4)))
   {
       return "-" +strPos.substring(4,7) + "C";        
   }      
   else
    {
       return strPos.substring(4,7) + "C";
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T22:17:36.220

检查单个字符是否为数字的方式不是使用`Integer.parseInt`（返回， an `int`，而不是 a `boolean`）。你`Character.isDigit`改用：

```
else if (strPos.length() > 4 && Character.isDigit(strPos.charAt(4))) 
```

请注意，它正在检查索引 4 处的字符，这是第五个字符（初始字符位于索引 0，而不是 1）。

# ruby - 乘客：内部服务器错误

> ID：15328326
> 
> 赞同：16
> 
> 时间：2013-03-10T22:15:21.147
> 
> 标签：ruby, sinatra, passenger

我安装了 Apache、Passenger 和 Sinatra 并部署了一个应用程序。尝试访问时出错：

```
An error occurred while starting up the preloader: it did not write a startup response in time.

Application root
    /var/www/html/test
Environment (value of RAILS_ENV, RACK_ENV, WSGI_ENV and PASSENGER_ENV)
    production
Ruby interpreter command

    /usr/local/bin/ruby

User and groups

    Unknown

Environment variables

    Unknown

Ulimits

    Unknown 
```

我该如何解决？

* * *

**编辑**

在应用程序日志中，我发现了这一行错误：

```
!> Ready
!> socket: unix:/tmp/passenger.1.0.14019/generation-0/backends/preloader.14049
!> 
```

宝石清单：

```
bigdecimal (1.2.0)
builder (3.2.0)
bundler (1.3.1)
daemon_controller (1.1.1)
fastthread (1.0.7)
io-console (0.4.2)
json (1.7.7)
minitest (4.3.2)
passenger (4.0.0.rc4)
psych (2.0.0)
rack (1.5.2)
rack-protection (1.4.0)
rake (0.9.6)
rdoc (4.0.0)
sequel (3.45.0)
sinatra (1.3.5)
test-unit (2.0.0.0)
tilt (1.3.4) 
```

系统版本：

```
Ruby 2.0
Apache 2.2
Amazon EC2 Instance 
```

该应用程序在 Ruby 1.9 和 Passenger 3.0 上运行良好。我刚刚升级到 2.0，Passenger 3.0 甚至没有正确编译。他们建议我使用Passenger Pre 4.0，它编译得很好，但没有运行应用程序......

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-11T23:05:16.563

我找到了答案是什么导致了我的情况。在我的`config.ru`我是这样重定向`STDOUT`的：

```
log = File.new("logs/std.log", "a+")
STDOUT.reopen(log) 
```

将重定向删除到日志中，它会再次启动。

看起来乘客需要`STDOUT`检测一个工作的“预加载器”。

* * *

编辑：我目前正在使用以下解决方案将日志重定向到文件并让乘客满意（基本上只是将标准输出复制到日志文件中而不是重定向）：

```
log = File.new("logs/std.log", "a+")
def STDOUT.write string
    log.write string
    super
end
STDOUT.sync = true 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T15:35:04.103

如果上述方法不能为您解决问题，我会收到完全相同的错误消息，但原因不同。

就我而言，我们使用的是外部数据库服务器，但该服务器已关闭。

备份外部数据库服务器解决了这个问题。

但在我们解决这个问题之前，我们花了很多时间考虑重新编译乘客等。

希望这篇笔记可以节省一些时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-14T06:03:01.927

供将来参考：我的配置中有错误的数据库凭据，这导致了同样的错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-25T14:48:53.923

要解决此问题，请按照 phusion phassenger [https://github.com/phusion/passenger/wiki/Debugging-application-startup-problems的本指南进行操作](https://github.com/phusion/passenger/wiki/Debugging-application-startup-problems)

# java - Eclipse/Java：无需单独复制/粘贴即可整合类源代码的简便方法？

> ID：15328329
> 
> 赞同：2
> 
> 时间：2013-03-10T22:15:44.957
> 
> 标签：java, eclipse, presentation

对于我的 Java 作业，我通常必须将我的源代码复制/粘贴到我的报告中。照常营业。但是，对于较大的项目，复制和粘贴一堆类有点烦人。

有谁知道 Eclipse 是否具有允许您在一个文件中查看所有类的功能，或者类似的东西？

如果这令人困惑：*我希望能够在单个文档/查看器/某物中查看给定项目的所有类，而无需复制和粘贴。*它可以相对容易地完成吗？

* * *

**编辑：**正如评论者指出的那样，保留语法突出显示会很棒。可以保留该功能的解决方案会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:43:41.453

我想说最快的方法不是使用 Eclipse，而是使用 bash 脚本等外部工具。例如，在 Linux 的 shell 或 Windows [Cygwin 终端](http://www.cygwin.com/)中，您可以使用：

```
find src_folder -type f  | egrep "\.java$" | 
  while read -r file_name  
do 
   cat "$file_name" >> myoutputfile.txt 
done 
```

所以它实际上做的是找到所有具有`.java`扩展名的文件，打印它们并重定向并附`stdout`加到 `myoutputfile.txt`.

# ios - 创建一个向量以大炮的角度发射射弹

> ID：15328333
> 
> 赞同：0
> 
> 时间：2013-03-10T22:15:56.027
> 
> 标签：ios, vector, cocos2d-iphone, box2d

我需要设置一个运动中的弹丸（Box2d）：

projectileBody->SetLinearVelocity(b2Vec2(shootVector.x, shootVector.y));

我知道角度（它是大炮的旋转角度），并且我确信在给定角度的情况下创建 shootVector 很简单，但我无法弄清楚。我知道`tan(angle) = y/x.`

```
CGPoint shootVector = (???, ???); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:36:28.740

假设大炮的角度来自 x 轴：

```
CGPoint shootVector;
shootVector.x = velocity * cos(angle);
shootVector.y = velocity * sin(angle); 
```

# c++ - 在 C++ 中使用内联程序集更改数值

> ID：15328334
> 
> 赞同：5
> 
> 时间：2013-03-10T22:15:58.150
> 
> 标签：c++, inline-assembly

我正在尝试通过在 C++ 中使用内联程序集来增加数值。我这样做的原因是为了练习我的“内联汇编”技能。

好吧，这就是我到目前为止所做的：

```
void main()
{
    int x;
    cout << "Please enter a number ";
    cin >> x;
    cout << "The number you entered is: " << x << "\n";
    foo(&x);
    cout << "The new number is: " << x;
    cin >> x;
}

void foo(int *x) 
{
    __asm
    {
        inc [x]
    };
} 
```

并且价值从未改变。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T22:31:40.680

`x`实际上，您正在增加 的值。`X`就汇编语言而言，是一个包含`x`变量（函数`foo`）地址的常量。其中又包含`main`'s的地址`x`。因此，`inc [x]`导致指针的增量。您需要增加存储在地址中的值`[x]`，例如`inc [[x]]`. 当然，你不能用汇编语言的一条指令来完成，因为你需要*两次*内存访问：知道*值*的存储位置和实际*增加*值。所以我建议这样的代码：

```
push eax
mov eax, [x]
inc dword ptr [eax]
pop eax 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:34:39.873

也许了解 Visual C++ 如何增加 int 指针的值很有用：

```
void foo(*x)
{
  (*x)++;
} 
```

在调试模式下，它被翻译成

```
(*x)++;
mov         eax,dword ptr [x] 
mov         ecx,dword ptr [eax] 
add         ecx,1 
mov         edx,dword ptr [x] 
mov         dword ptr [edx],ecx 
```

在发布模式下与 Aneri 的回答相同。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-10T22:29:17.963

x86 只能增加一个寄存器，而不是一个内存，所以你需要将一个指针移动到一个寄存器。我以这个结束：

```
__asm
{
    mov eax, x
    mov ebx, [eax]
    inc ebx
    mov [eax], ebx
}; 
```

# java - 如何在java中更有效地管理网络协议

> ID：15328336
> 
> 赞同：0
> 
> 时间：2013-03-10T22:15:59.057
> 
> 标签：java, networking

我正在用java开发一个基于网络的程序，我设计了自己的网络协议。这是我通常用来处理传入消息的方法：

```
socket = ss.accept();
in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
String msg = null;
while(true)
if((msg=in.readLine())!=null){
//handle msg with designed protocol here
    } 
```

当协议足够简单时这样做是可以的，但是当它变得复杂时，把所有东西都放在这里会让人不知所措，这也让我的代码更难理解。我的问题是，有没有办法将协议代码存储在另一个地方？先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T22:28:26.217

当然，为什么不呢？只需创建另一个类并创建一个进行处理的方法。发送`msg`给它并在那里进行处理。或者在同一个类中创建另一个方法：

`public (static) void handle(String msg) { //Handle message }`

# javascript - 如何使用 Google 折线图小工具访问 Google App Engine 数据存储区中的数据

> ID：15328338
> 
> 赞同：0
> 
> 时间：2013-03-10T22:16:07.573
> 
> 标签：javascript, google-app-engine, google-gadget

*   我在 Google App Engine (GAE) 数据存储中有一些数据。
*   我有一个谷歌网站并插入了一个谷歌折线图 (GLC) 小工具。
*   我想用 GLC 小工具绘制这些数据。

我可以使用标准 GLC 来执行此操作吗？如果可以，如何操作？

还是我必须自定义我自己的 GLC（复制和修改）？如果是这样，我想我必须修改javascript，是吗？

有人可以发布一个关于如何使用 Java 脚本访问 GAE 数据存储的示例。

# google-drive-api - 我可以在没有中间服务器的情况下用 js 编写谷歌驱动器文本编辑器吗？

> ID：15328341
> 
> 赞同：0
> 
> 时间：2013-03-10T22:16:33.350
> 
> 标签：google-drive-api

找不到任何例子，但需要中间人似乎是一个迂回（和安全成本）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:36:11.000

绝对有可能编写与 Google Drive 交互的仅客户端 JavaScript 应用程序。查看 Google Drive SDK 文档，了解如何构建您的第一个 JavaScript Drive 应用程序的快速入门指南：

[https://developers.google.com/drive/quickstart-js](https://developers.google.com/drive/quickstart-js)

# javascript - 使用链接作为变量

> ID：15328344
> 
> 赞同：0
> 
> 时间：2013-03-10T22:16:47.250
> 
> 标签：javascript, html

我正在为我的游戏和东西制作一个简单的小 html 页面，并且我有一个随机游戏选择器（当我单击一个按钮时，它会显示一个随机变量）：

```
function rndGame(){

var game = new Array;
game[0]='Half-life\n(Casual)';<br>
game[1]="Minecraft\n(Casual)";<br>
game[2]="TF2\n(Casual)"<br>
game[3]="Rusty Hearts\n(MMORPG)"<br>
game[4]="A Farewell To Dragons\n(RPG)"<br>
game[5]="Dark Souls : Prepare To Die\n(RPG)"<br>
game[6]="Disciples III\n(RPG)"<br>
game[7]="Dungeon Siege II\n(RPG)"<br>
game[8]="Fallout III\n(RPG)"<br>
game[9]="Farcry III\n(RPG)"<br>
game[10]="Elder Scrolls III - Morrowind\n(RPG)"<br>
game[11]="Elder Scrolls IV - Oblivion\n(RPG)"<br>
game[12]="Elder Scrolls V - Skyrim\n(RPG)"<br>
game[13]="Counter-Strike : Source\n(Shooter)"<br>
game[14]="Tribes : Ascend\n(Shooter)"<br>
game[15]="Assassin's Creed : Brotherhood\n(Stealth)"<br>

rdmGame = Math.floor(Math.random()*game.length);
document.getElementById("gameBox").value=game[rdmGame];
} 
```

但我想要它，所以当一个随机游戏弹出时，我可以点击它，它会带我到一个链接。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:19:52.167

目前，您正在更改 ID 为 gameBox 的元素的值。如果那是一个`<a>`，那么您只需要在其上设置 href 属性`<a>`。因此，请保留第二个数组，其中包含每个游戏的 URL，以便您可以使链接按预期工作。

所以一开始：

```
var url = new Array();
// ... 
```

然后在最后：

```
var gameBox = document.getElementById("gameBox");  // assuming this is an <a> tag
gameBox.innerHTML=game[rdmGame];
gameBox.href=url[rdmGame]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:22:27.077

您需要添加一个链接，我假设您添加了一个名为 gamelink 的链接。

```
var game = new Array;
game[0]={value: 'Half-life\n(Casual)',linktext:"http://something.com/other"};
...

var gamebox = document.getElementById("gameBox");
gamebox.innerHTML=game[rdmGame].value;
var gamelink = document.getElementById("gameLink);
gamelink.setAttribute("href",game[rdmGame].linktext); 
```

您还需要摆脱`<br>`javascript 中的随机 s。那会给你带来麻烦。

# javascript - webgl 虚线

> ID：15328350
> 
> 赞同：5
> 
> 时间：2013-03-10T22:17:18.443
> 
> 标签：javascript, webgl

有人可以告诉我如何在不使用 Three.js 或任何其他工具包的情况下在 WebGL 中绘制虚线吗？只是普通的 WebGL。我对 WebGL 很陌生，我似乎找不到这个问题的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T00:12:01.557

WebGL（或 OpenGL ES）中没有原生的点画线，但如果您在 VBO 中包含“到目前为止的长度”顶点属性，则使用片段着色器很容易实现效果。

```
precision highp float;
varying float LengthSoFar; // <-- passed in from the vertex shader
const vec3 Color = vec3(1, 1, 1);
const float NumDashes = 10.0; // 10 dashes for every 1 unit in LengthSoFar

void main()
{
    float alpha = floor(2.0 * fract(LengthSoFar * NumDashes));
    gl_FragColor = vec4(Color, alpha);
} 
```

另一种方法是查找一维纹理。length-so-far 属性实际上只是一个 1D 纹理坐标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T17:49:01.323

我过去做过的事情，虽然它可能不符合您的用例，是创建一个包含路径点的顶点缓冲区，然后使用

```
gl.drawArrays(gl.LINES, 0, vertexCount); 
```

使用`gl.LINES`自然“跳过”路径的每个其他部分，如果路径点足够频繁，则会产生虚线效果。它简单而hacky，但在适当的情况下有效。

# json - Spring JSON POST 图像

> ID：15328355
> 
> 赞同：1
> 
> 时间：2013-03-10T22:17:51.050
> 
> 标签：json, spring

我试图找到如何将 JSON 响应中的图像发布到服务器（保存到服务器端）。我的理解是，我可以使用**@RequestBody**，但我不知道我该怎么做。感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T23:43:15.863

您是否在问如何将 JSON 请求正文中的图像发布到服务器？我最近这样做了，请参阅[此处](http://thoughtfulsoftware.blogspot.com/2012/12/uploading-binary-files-fun-way.html)的详细信息。我在[类似的问题](https://stackoverflow.com/questions/14615692/how-do-i-upload-stream-large-images-using-spring-3-2-spring-mvc-in-a-restful-way/14617556#14617556)中提供了这个答案，但将在此处复制答案。

在浏览器上，我们可以使用文件 API 来加载文件，然后使用 Base64 编码对其内容进行编码，最后在发布之前将编码的内容分配给 javascript 对象。

在服务器上，我们有一个 Spring 控制器来处理请求。作为将请求正文转换为 java 对象的 json 解组的一部分，图像字节的 base64 编码值将转换为标准 Java byte[]，并作为 LOB 存储在数据库中或作为字节流式传输阵列直接到磁盘（取决于您希望如何在服务器上保存文件）

要检索图像，另一个 Spring Controller 方法可以通过直接将字节流回来提供图像。

我在上面链接到的博客文章假设您想将图像用作另一个对象的一部分，但如果您只想直接使用图像，原理应该是相同的。由于您希望图像成为 JSON 请求正文的一部分，因此听起来这种技术就是您想要的。让我知道是否有任何需要澄清的地方。

# php - codeigniter 更新函数得到 404

> ID：15328356
> 
> 赞同：1
> 
> 时间：2013-03-10T22:17:52.227
> 
> 标签：php, codeigniter

我已经创建了一个更新功能，但我不断收到 404 错误，我无法弄清楚似乎是什么问题。感谢您的帮助。

控制器news.php

```
 public function update($id)

    {
    $id = $this->uri->segment(3);
    $data = array(
   'title' => $this->input->post('title'),
   'text' => $this->input->post('text'),
   'slug' => $this->input->post('slug'),
    );
   if($this->news_model->exists($id)) {
   $this->news_model->update($id, $data);
   } else {
   $this->news_model->insert($data);
  }

  } 
```

news_model.php

```
public function update_news($id, $data)
{
$this->db->where('id', $id);
$this->db->update('news', $data); 
} 
```

路线

```
$route['news/update/(:num)'] = 'news/update/$1'; 
```

意见

更新.php

```
 <h2>Update an item</h2>

 <?php echo validation_errors(); ?>

 <?php echo form_open('/news/update'.$news_item['id']) ?>

<label for="title">Title</label> 
<input type="input" name="title" /><br />

 <label for="slug">Slug</label> 
 <input type="input" name="slug" /><br />

<label for="text">Text</label>
 <textarea name="text"></textarea><br />

 <input type="submit" name="submit" value="Update an item" /> 

 </form> 
```

索引.php

```
 <p><a href="news/update/<?php echo $news_item['id'] ?>">update article</a></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T02:02:51.143

尝试加载 URL 帮助程序，并从 config 文件夹中的配置文件设置`base_url`为 yourpath 或 yourpath/index.php 如果您使用 index.php 作为 ex。`http://localhost/codeigniter/index.php`，并将视图更新为 `<?php echo form_open(base_url() . 'news/update/'.$news_item['id']) ?>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:27:57.647

我认为您在打开的表单中缺少正斜杠。你有

```
<?php echo form_open('/news/update'.$news_item['id']) ?> 
```

但应该是

```
<?php echo form_open('/news/update/'.$news_item['id']) ?> 
```

我也同意@Mohamed Nagy，您应该加载 url 帮助程序并使用 base_url()

我注意到的其他几件事是，在您的模型中，您的更新函数称为 update_news()，但在您的控制器中，您调用的是 update()。这可能会导致错误

另外，当您将 id 传递给函数时，为什么还要使用`$this->uri->segment(3);`它来获取它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T22:32:28.240

提交表单时收到 404 吗？

尝试将表单打开更改为：

```
<?php echo form_open($news_item['id']) ?> 
```

或者如果您激活了 uri 助手：

```
<?php echo form_open(base_url() . 'news/update/'.$news_item['id']) ?> 
```

# jquery - 告诉选择器返回数组内的数组

> ID：15328361
> 
> 赞同：1
> 
> 时间：2013-03-10T22:18:14.380
> 
> 标签：jquery

```
$('.data').has(':checkbox:checked').find('.name, .street1, .street2, .county, .city, .postal, .country'); 
```

返回对象内的 7 个元素，格式为`[name, street, street2, county, city, postal, country]`

但是，如果我的页面上有超过 1 组这 7 个元素，它将返回 14、21、28 等，在没有任何分隔符的情况下**仍然是**一个连续的对象。

有什么方法可以遍历每 7 个元素？告诉选择器返回包含 7 个元素的对象内的对象？即`[[name, street, street2, county, city, postal, country], [name, street, street2, county, city, postal, country]]`等等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:22:36.337

制作多个数据类元素

html

```
<div class="data">1-7</div>
<div class="data">1-7</div>
<div class="data">1-7</div> 
```

js

```
var dataArrays = [];
$('.data').has(':checkbox:checked').each(function(){
 dataArrays.push($(this).find('.name, .street1, .street2, .county, .city, .postal, .country'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T22:22:17.187

使用`each`on 方法`.data`，您可以遍历这些项目：

```
$('.data').has(':checkbox:checked').each(function() {
    var vals = $(this).find('.name, .street1, .street2, .county, .city, .postal, .country');
    some_function(vals);
}); 
```

您可能需要重新构造结果的使用方式，但这是更标准的 jQuery 格式。

# prolog - 无法理解 Prolog 运算符优先级错误

> ID：15328362
> 
> 赞同：0
> 
> 时间：2013-03-10T22:18:35.323
> 
> 标签：prolog

我正在尝试创建一个知识库。我的问题有`gate/1`并且`terminal/1`我已经定义了以下规则：

```
gate(G) /\ terminal(T) :- (G \== T \== 1 \== 0). 
```

我想说的是：“如果存在门 G 和终端 T，那么这意味着 G 不等于 T 不等于 1 不等于 0。

我收到以下错误：`ERROR: c:/noob.pl:140:0: Syntax error: Operator priority clash`

我什至不知道我是否使用了正确的运算符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:32:45.303

问题出在

```
G \== T \== 1 \== 0 
```

应该写成

```
G \== T, G \== 1, G \== 0, T \== 1, T \== 0 
```

# spring - SpringServletContainerInitializer 不能强制转换为 javax.servlet.ServletContainerInitializer

> ID：15328363
> 
> 赞同：17
> 
> 时间：2013-03-10T22:18:40.447
> 
> 标签：spring, spring-mvc, servlet-3.0

我正在尝试将基于 xml 的 Spring MVC 应用程序移动到基于 Java 配置的应用程序。似乎与 maven 中可用的各种 java.servlet 类不匹配。例如，有些提供 addServlet() 方法，有些不提供。

这是我的配置类：

```
public class MyWebAppInitializer implements WebApplicationInitializer {
    @Override
    public void onStartup(ServletContext container) throws ServletException {

        AnnotationConfigWebApplicationContext rootContext =
                new AnnotationConfigWebApplicationContext();
        rootContext.register(JpaSandboxConf.class);

        ServletRegistration.Dynamic registration = container.addServlet("dispatcher", new DispatcherServlet());
        registration.setLoadOnStartup(1);
        registration.addMapping("/myapp/*");
    }
} 
```

这似乎没有争议。为了得到

```
container.addServlet() 
```

方法，我在我的pom中包含了这个：

```
<dependency>
    <groupId>org.apache.tomcat</groupId>
    <artifactId>tomcat-servlet-api</artifactId>
    <version>7.0.30</version>
</dependency> 
```

我试过这个，但是下面条目中的 ServletContext 类不起作用（因为它没有提供 addServlet() 方法）：

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>com.springsource.javax.servlet</artifactId>
    <version>2.5.0</version>
    <scope>provided</scope>
</dependency> 
```

当我尝试使用

```
mvn clean tomcat7:run 
```

我不高兴地得到

```
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Tomcat].StandardHost[localhost].StandardContext[/]]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1130)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1568)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1558)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Tomcat].StandardHost[localhost].StandardContext[/]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
Caused by: java.lang.ClassCastException: org.springframework.web.SpringServletContainerInitializer cannot be cast to javax.servlet.ServletContainerInitializer
    at org.apache.catalina.startup.ContextConfig.getServletContainerInitializer(ContextConfig.java:1543)
    at org.apache.catalina.startup.ContextConfig.processServletContainerInitializers(ContextConfig.java:1464)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1190)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:825)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:300)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5161)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more 
```

我看到一个类来自 Spring 框架，另一个来自 javax.servlet，但是再一次，Spring 提供的类中不存在该方法（这令人沮丧，因为这个示例存在于 Spring 3.2 文档本身中。

我正在使用 Spring 3.2。我没有使用 Eclipse（所有示例都是基于 Eclipse，我在 IntelliJ 中）。这是一个Maven项目

我非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-11T01:48:42.633

此处提供了 pom 中更好的 servlet 3.0 api 依赖项 - [https://github.com/SpringSource/greenhouse/tree/servlet3](https://github.com/SpringSource/greenhouse/tree/servlet3)，您还应该将范围标记为`provided`，否则该 jar 将包含在您的最终战争中，这将干扰使用容器提供的罐子，这在您的情况下似乎正在发生。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-03-13T19:38:07.587

我在没有 Spring 的情况下也遇到了类似的问题`mvn tomcat7:run`，尽管 servlet 可以很好地部署到 OpenShift，但仍然无法正常工作。根据 Biju Kunjummen 的回答，对我来说问题是我正在编译哪个 servlet-api。

破碎的：

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>javax.servlet-api</artifactId>
    <version>3.0.1</version>
    <scope>provided</scope>
</dependency> 
```

固定的：

```
<dependency>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>servlet-api</artifactId>
    <version>3.0.20100224</version>
    <scope>provided</scope>
</dependency> 
```

不太确定为什么，但它现在有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-10T17:35:41.833

我在使用 gradle tomcat 插件时遇到了同样的问题。我将 tomcat 版本更新为 8 并且它工作正常。

```
plugins {
    id "com.bmuschko.tomcat" version "2.2.2"
    id "java"
    id "eclipse"
    id "idea"
    id "war"
}

dependencies {
    providedCompile ('javax.servlet:javax.servlet-api:3.1.0')
    providedCompile ('javax.servlet.jsp:jsp-api:2.2')
    compile ('org.springframework:spring-webmvc:4.2.1.RELEASE')

    def tomcatVersion = '8.0.27'
    tomcat "org.apache.tomcat.embed:tomcat-embed-core:${tomcatVersion}",
            "org.apache.tomcat.embed:tomcat-embed-logging-juli:${tomcatVersion}",
            "org.apache.tomcat.embed:tomcat-embed-jasper:${tomcatVersion}"

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-26T10:46:14.900

我用来 `providedCompile 'javax.servlet:javax.servlet-api:3.1.0'` 解决问题

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-23T06:59:34.457

在 Eclipse 中使用 Tomcat 时，我遇到了同样的错误。

我通过转到服务器选项卡 > 双击 Tomcat 并取消选中“服务模块而不发布”来解决这个问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-26T06:17:19.273

我也遇到了这个问题，我用他们的方法处理过，但是失败了。我使用的tomcat版本是7和8.0，我也遇到了这个问题。当我使用tomcat 8.5时，没有问题。我的项目成功运行。

# jquery-ui - 脉冲按钮 HTML、jQuery、jQueryUI

> ID：15328366
> 
> 赞同：0
> 
> 时间：2013-03-10T22:19:08.623
> 
> 标签：jquery-ui, uianimation

我已经成功地让它工作了，但是我在网站上有很多我想要脉冲的按钮，目前我正在使用 id 执行此操作，但我想转向更灵活的东西并使用一个类来选择哪些按钮应该脉冲. 这是一个[JSFiddle](http://jsfiddle.net/SnareChops/AC6Vb/1/)

我看到的问题，至少在我的浏览器中（MAC 上的 Google Chrome 25.0）是按钮按预期脉冲，但脉冲输出很慢，然后下一个脉冲需要几秒钟才能触发，然后它需要下一次更改甚至更长，它似乎被某些东西所困扰。以下是动画脚本：

```
function pulseIn() {
    $(".pulse").animate({
        backgroundColor: "rgba(144,238,144,0.5)"
    }, 1000, 'swing', function () {
        pulseOut();
    });
}

function pulseOut() {
    $(".pulse").animate({
        backgroundColor: "rgba(0,0,0,0.5)"
    }, 1000, 'swing', function () {
        pulseIn();
    });
}

pulseIn(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T01:06:53.757

我已经为你[更新了你的代码](http://jsfiddle.net/AC6Vb/2/)。这应该通过一个特定的控制来进行脉冲输入和脉冲输出。在您的代码中，一旦第一个控件完成脉冲输入，您就执行`pulseOut`了选择`.pulse`包括第二个在内的所有控件，即使它还没有完成运行`pulseIn`（解释起来有点混乱，但希望您能明白要点）。

```
$('.pulse').each(function(){
    pulseIn($(this));
});

function pulseIn(control) {
    control.animate({
        backgroundColor: "rgba(144,238,144,0.5)"
    }, 1000, 'swing', function () {
        pulseOut(control);
    });
}

function pulseOut(control) {
    control.animate({
        backgroundColor: "rgba(0,0,0,0.5)"
    }, 1000, 'swing', function () {
        pulseIn(control);
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-08T15:17:14.490

我写了一个小片段，可以在不使用 jQuery UI 的情况下使用 - 只有 jQuery。

```
function fadeBtn(el, fadeOutSpeed, fadeInSpeed){
    el.fadeOut(fadeOutSpeed, function(){
        jQuery(this).fadeIn(fadeInSpeed, function(){
            fadeBtn(el, fadeOutSpeed, fadeInSpeed);
        });
    });
}

fadeBtn(jQuery('.pulseBtn'), 750, 2500); 
```

jsFiddle：http: [//jsfiddle.net/f5q6kuse/](http://jsfiddle.net/f5q6kuse/)

# rubygems - 在资源“chef_gem[mysql]”上执行操作“安装”时出错——通过 Chef Solo 安装 ruby gem

> ID：15328369
> 
> 赞同：3
> 
> 时间：2013-03-10T22:19:21.407
> 
> 标签：rubygems, gem, chef-infra, chef-solo

使用 Chef 10.24.0，当包含`database` [食谱](http://community.opscode.com/cookbooks/database)时，

```
include_recipe "mysql::server"
include_recipe "database::mysql" 
```

`mysql`gem 安装失败，输出如下：

```
[2013-03-10T19:54:29+00:00] INFO: Processing chef_gem[mysql] action install (mysql::ruby line 36)

================================================================================
Error executing action `install` on resource 'chef_gem[mysql]'
================================================================================

NoMethodError
-------------
undefined method `last' for #<Gem::AvailableSet:0x00000002b25be0>

Cookbook Trace:
---------------
/tmp/vagrant-chef-1/chef-solo-1/cookbooks/mysql/recipes/ruby.rb:36:in `from_file'
/tmp/vagrant-chef-1/chef-solo-1/cookbooks/database/recipes/mysql.rb:20:in `from_file'
/tmp/vagrant-chef-1/chef-solo-1/cookbooks/scafandru/recipes/database.rb:11:in `from_file'

Resource Declaration:
---------------------
# In /tmp/vagrant-chef-1/chef-solo-1/cookbooks/mysql/recipes/ruby.rb

 36: chef_gem "mysql"

Compiled Resource:
------------------
# Declared in /tmp/vagrant-chef-1/chef-solo-1/cookbooks/mysql/recipes/ruby.rb:36:in `from_file'

chef_gem("mysql") do
  provider Chef::Provider::Package::Rubygems
  action :install
  retries 0
  retry_delay 2
  package_name "mysql"
  cookbook_name :mysql
  recipe_name "ruby"
end

================================================================================
Recipe Compile Error in /tmp/vagrant-chef-1/chef-solo-1/cookbooks/scafandru/recipes/database.rb
================================================================================

NoMethodError
-------------
chef_gem[mysql] (mysql::ruby line 36) had an error: NoMethodError: undefined method `last' for #<Gem::AvailableSet:0x00000002b25be0>

Cookbook Trace:
---------------
  /tmp/vagrant-chef-1/chef-solo-1/cookbooks/mysql/recipes/ruby.rb:36:in `from_file'
  /tmp/vagrant-chef-1/chef-solo-1/cookbooks/database/recipes/mysql.rb:20:in `from_file'
  /tmp/vagrant-chef-1/chef-solo-1/cookbooks/scafandru/recipes/database.rb:11:in `from_file'

Relevant File Content:
----------------------
/tmp/vagrant-chef-1/chef-solo-1/cookbooks/mysql/recipes/ruby.rb:

 29:  include_recipe "build-essential"
 30:  include_recipe "mysql::client"
 31:  
 32:  node['mysql']['client']['packages'].each do |mysql_pack|
 33:    resources("package[#{mysql_pack}]").run_action(:install)
 34:  end
 35:  
 36>> chef_gem "mysql"
 37:  

[2013-03-10T19:54:31+00:00] ERROR: Running exception handlers
[2013-03-10T19:54:31+00:00] ERROR: Exception handlers complete
[2013-03-10T19:54:31+00:00] FATAL: Stacktrace dumped to /tmp/vagrant-chef-1/chef-stacktrace.out
[2013-03-10T19:54:31+00:00] FATAL: NoMethodError: chef_gem[mysql] (mysql::ruby line 36) had an error: NoMethodError: undefined method `last' for #<Gem::AvailableSet:0x00000002b25be0>
Chef never successfully completed! Any errors should be visible in the
output above. Please fix your recipes so that they properly complete. 
```

试图减少可能导致安装失败的所有变量，我放弃了`database`食谱，并限制在`mysql::ruby` [配方中的 RubyGem 安装](http://community.opscode.com/cookbooks/mysql#readme)

```
include_recipe "mysql::server"
include_recipe "mysql::ruby" 
```

但错误是等价的。

同样适用于最简单的`gem_package` [安装](http://docs.opscode.com/resource_package.html)：

```
gem_package 'mysql' do
  options "--no-ri --no-rdoc"
end 
```

我没有想法，有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T23:31:45.090

降级到 RubyGems 的[最新 pre-2.0 版本 (1.8.5)](https://rubygems.org/gems/rubygems-update/versions)后，一切正常。

这个问题很可能会[在 RubyGems 2.0.3 中得到解决](https://twitter.com/evanphx/status/310893209360424960)。

# html - 为什么 YouTube 使用表格来布局其搜索框？

> ID：15328376
> 
> 赞同：4
> 
> 时间：2013-03-10T22:19:45.570
> 
> 标签：html, html-table

我想知道虚拟键盘链接是如何显示在 youtube 搜索栏上的，输入元素的元素检查给了我这个：

（我删除了所有类和 id 以使代码更短，因为问题是关于表格的）

此外，此代码是顶部搜索输入。不是搜索结果布局

```
 <table cellspacing="0" cellpadding="0" style="height: 30px; padding: 0px;">
     <tbody>
        <tr>
           <td>
              <input name="search_query" value="" type="text" tabindex="1" title="Search" style="border: none; padding: 0px; margin: 0px; height: auto; width: 100%; outline: none;" dir="ltr" autocomplete="off" spellcheck="false">
           </td>
           <td>
              <div style="line-height: 30px;" dir="ltr">
                <a class="gsst_a" href="javascript:void(0)">
                  <span>
                   <img src="//www.gstatic.com/inputtools/images/tia.png">
                  </span>
                 </a>
                </div>
           </td>
        </tr>
     </tbody>
  </table> 
```

他们使用表格进行如此简单的布局让我感到非常奇怪，但我猜想“嘿，他们必须有这样做的理由”所以可以给我一个很好的理由来创建酒吧的布局方法？可以达到什么目的？有没有选择简单的css定位/布局的原因？酒吧是新手创建的吗？为什么？

# sharepoint - TFS 2012 集成 SharePoint 2013 问题

> ID：15328386
> 
> 赞同：1
> 
> 时间：2013-03-10T22:20:33.247
> 
> 标签：sharepoint, tfs, sharepoint-2013

尝试在 TFS 和 SharePoint 之间进行集成，但遇到了一些问题。

遵循以下说明，略有不同，TFS 2012 位于一台服务器上，SharePoint 2013 位于另一台服务器上：http: [//blog.hinshelwood.com/integrate-sharepoint-2013-with-team-foundation-server- 2012/](http://blog.hinshelwood.com/integrate-sharepoint-2013-with-team-foundation-server-2012/)

但尝试在 TFS 中添加 SharePoint Web 应用程序时，弹出 TF255329 错误，如下所示：

TF255329: 无法访问以下站点: `http://servername`。您指定的服务器未返回预期的响应。您尚未在此服务器上安装适用于 SharePoint 产品的 Team Foundation Server Extensions，或者防火墙阻止了对指定站点或 SharePoint 管理中心站点的访问。有关详细信息，请参阅 Microsoft 网站 ( [http://go.microsoft.com/fwlink/?LinkId=161206](http://go.microsoft.com/fwlink/?LinkId=161206) )

是否需要在 SharePoint 中进行任何设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:02:52.483

您将需要在 SharePoint 服务器上运行 TFS 2012 安装程序。将出现配置向导，并且有一个选项可以在安装后安装 SharePoint Extensions for TFS。

注意：如果有多个 Web 前端，则需要在每个前端安装 SharePoint Extensions。

# php - 如何知道多维关联数组中的键

> ID：15328389
> 
> 赞同：-1
> 
> 时间：2013-03-10T22:20:47.690
> 
> 标签：php, associative-array

我有一个数组：

```
(
    [0] => 
    [1] => Array
        (
            [item_id] => 1418
            [item_qty] => 2
        )

    [2] => Array
        (
            [item_syskey] => 2013010103330149001
            [item_qty] => 1
        )

) 
```

我正在运行一个 foreach 循环

```
foreach($array as $val){

} 
```

我怎么知道下一个**键**是 item_syskey 或 item_id ？

实际上，我正在根据 item_id 和 item_syskey 更改数组。这意味着在循环中，如果 key 等于 item_id 则将执行某些操作，如果 item_syskey 则执行某些操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:28:38.840

您可以使用[array_key_exists](http://php.net/manual/en/function.array-key-exists.php)或 isset 来检查密钥：

```
foreach($array as $key => $val){
  if (isset($array[$key + 1]) && isset($array[$key + 1]['item_id'])) {
    // next item has item id
  }
} 
```

但是你应该尽量避免在你的数组中有不同的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T22:24:43.633

```
foreach($array as $key => $val){
    // Check value of $key here
} 
```

# android - 从资产文件夹更新问题创建的 SQLite DB

> ID：15328390
> 
> 赞同：2
> 
> 时间：2013-03-10T22:20:52.170
> 
> 标签：android, sqlite, android-sqlite

我有一个从资产文件夹中的文件生成的 SQLite DB... 现在我知道无法修改应用程序的资源，但是如果我发布更新的应用程序，我希望清除并重新创建已创建的数据库-从新版本应用程序中包含的新资产文件 DB 创建

这是我的数据库助手类

```
public class DataBaseHelper extends SQLiteOpenHelper {
    private static String TAG = "DataBaseHelper"; // Tag just for the LogCat
                                                    // window
    // destination path (location) of our database on device
    private static String DB_PATH = "";
    private static String DB_NAME = "";// Database name
    private SQLiteDatabase mDataBase;
    private final Context mContext;

    public DataBaseHelper(Context context, String nomeDB) {
        super(context, nomeDB, null, 2);// 2 is the Database Version
        DB_NAME = nomeDB;
        DB_PATH = "/data/data/" + context.getPackageName() + "/databases/";
        this.mContext = context;
    }

    public void createDataBase() throws IOException {
        // If database not exists copy it from the assets

        boolean mDataBaseExist = checkDataBase();
        if (!mDataBaseExist) {
            this.getReadableDatabase();
            this.close();
            try {
                // Copy the db from assests
                copyDataBase();
                Log.e(TAG, "createDatabase database created");
            } catch (IOException mIOException) {
                Log.e(TAG, mIOException.toString());
                throw mIOException;
            }
        }
    }

    private boolean checkDataBase() {
        File dbFile = new File(DB_PATH + DB_NAME);
        // Log.v("dbFile", dbFile + "   "+ dbFile.exists());
        return dbFile.exists();
    }

    // Copy DB from assests
    private void copyDataBase() throws IOException {
        InputStream mInput = mContext.getAssets().open(DB_NAME);
        String outFileName = DB_PATH + DB_NAME;
        OutputStream mOutput = new FileOutputStream(outFileName);
        byte[] mBuffer = new byte[1024];
        int mLength;
        while ((mLength = mInput.read(mBuffer)) > 0) {
            mOutput.write(mBuffer, 0, mLength);
        }
        mOutput.flush();
        mOutput.close();
        mInput.close();
    }

    public boolean openDataBase() throws SQLException {
        String mPath = DB_PATH + DB_NAME;
        mDataBase = SQLiteDatabase.openDatabase(mPath, null,
                SQLiteDatabase.CREATE_IF_NECESSARY);
        return mDataBase != null;
    }

    @Override
    public synchronized void close() {
        if (mDataBase != null)
            mDataBase.close();
        super.close();
    }

    @Override
    public void onCreate(SQLiteDatabase arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }

} 
```

线

```
super(context, nomeDB, null, 2);// 2 is the Database Version 
```

如果已经存在的数据库具有必须更新的版本号，则应标识版本广告，

所以如果我要发布一个带有 DB 版本 3 的新应用程序

```
super(context, nomeDB, null, 3); 
```

应用程序必须从应用程序的新编译版本中包含的资产重新创建数据库。

但我不知道这样做的正确方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T01:59:19.317

您需要使用 onCreate() 和 onUpdate() 的内置生命周期方法。

像这样的东西：

```
public class DataBaseHelper extends SQLiteOpenHelper {
    private static String TAG = "DataBaseHelper"; // Tag just for the LogCat
                                                    // window
    // destination path (location) of our database on device
    private static final int    DATABASE_VERSION = 3;
    private static String DB_PATH = "";
    private static String DB_NAME = "";// Database name
    private SQLiteDatabase mDataBase;
    private final Context mContext;

    public DataBaseHelper(Context context, String nomeDB) {
        super(context, nomeDB, null, DATABASE_VERSION);
        DB_NAME = nomeDB;
        DB_PATH = "/data/data/" + context.getPackageName() + "/databases/";
        this.mContext = context;
    }

    // Copy DB from assests
    private void copyDataBase() throws IOException {
        InputStream mInput = mContext.getAssets().open(DB_NAME);
        String outFileName = DB_PATH + DB_NAME;
        OutputStream mOutput = new FileOutputStream(outFileName);
        byte[] mBuffer = new byte[1024];
        int mLength;
        while ((mLength = mInput.read(mBuffer)) > 0) {
            mOutput.write(mBuffer, 0, mLength);
        }
        mOutput.flush();
        mOutput.close();
        mInput.close();
    }

    public boolean openDataBase() throws SQLException {
        String mPath = DB_PATH + DB_NAME;
        mDataBase = SQLiteDatabase.openDatabase(mPath, null,
                SQLiteDatabase.CREATE_IF_NECESSARY);
        return mDataBase != null;
    }

    @Override
    public synchronized void close() {
        if (mDataBase != null)
            mDataBase.close();
        super.close();
    }

    /**
     * This method is called when the app doesn't have a database and a new one needs to be created
     */
    @Override
    public void onCreate(SQLiteDatabase arg0) {
        try {
            // Copy the db from assests
            copyDataBase();
            Log.e(TAG, "database created");
        } catch (IOException mIOException) {
            Log.e(TAG, mIOException.toString());
            throw mIOException;
        }
   }

    /**
     * This method is called when the app's database version is < the value passed into the constructor
     */
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        try {
            // delete existing?

            // Copy the db from assests
            copyDataBase();
            Log.e(TAG, "database updated");
        } catch (IOException mIOException) {
            Log.e(TAG, mIOException.toString());
            throw mIOException;
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T14:42:25.870

您可以使用 android-sqlite-asset-helper 更新数据库或指向最新版本

[https://github.com/jgilfelt/android-sqlite-asset-helper](https://github.com/jgilfelt/android-sqlite-asset-helper)

# .net - 未找到“布尔”类型的公共成员“值”vb.net 数据表

> ID：15328397
> 
> 赞同：0
> 
> 时间：2013-03-10T22:21:22.950
> 
> 标签：.net, vb.net, datatable, boolean

我遇到了一个让我发疯的问题，我不确定是不是我愚蠢

我有一个数据表，我在其中添加了一个布尔列

```
 ds.Tables(0).Columns.Add(New DataColumn("Select", System.Type.GetType("System.Boolean")))
  ds.Tables(0).Columns("Select").ReadOnly = False
  ds.Tables(0).Columns("Select").DefaultValue = False
  ds.Tables(0).Columns("Select").SetOrdinal(0) 
```

然后我遍历它并检查该列是否具有真值位我在表达式的 Convert.ToBoolean 部分收到错误“未找到类型'Boolean'的公共成员'值'”

```
For Each dr As DataRow In Categories.Tables(0).Rows
  If dr("Select").value IsNot Nothing AndAlso (Not IsDBNull(dr("Select").value)) AndAlso Convert.ToBoolean(dr("Select")) = True Then
      'Do Something
  End If
Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:24:34.313

那不是你的问题所在。您的问题出现在声明的开头`If`。索引器返回的类型是`Object`，它没有`value`属性或字段。你真的只想这么说：

```
If dr("Select") IsNot Nothing ... 
```

但是这个条件永远不会是假的，因为 NULL 是由`DBNull`实例表示的。相反，请使用以下`If`语句：

```
If Not dr.IsNull("Select") AndAlso Convert.ToBoolean(dr("Select")) Then 
```

要更VB，你也可以这样做

```
If Not dr.IsNull("Select") AndAlso CBool(dr("Select")) Then 
```

而且，对于 Tim 的回答借款人，您可以使用`Field()`扩展方法（请参阅：http: [//msdn.microsoft.com/en-us/library/system.data.datarow.field](http://msdn.microsoft.com/en-us/library/system.data.datarow.field(v=vs.90).aspx) (v=vs.90).aspx ）像这样：

```
If If(dr.Field(Of Boolean?)("Select"), False) Then 
```

也许这太聪明了，但它完成了工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T22:27:20.477

A `DataRow`or`Object`没有`value`财产。

请改用强类型[`Field`](http://msdn.microsoft.com/en-us/library/bb360891.aspx)扩展方法：

```
For Each dr As DataRow In Categories.Tables(0).Rows
    Dim isSelected As Boolean? = dr.Field(Of Boolean?)("Select")
    If isSelected.HasValue AndAlso isSelected Then
        'Do Something
    End If
Next 
```

它还支持`Nullable(Of Boolean)`上述可为空的类型。

如果您低于 .NET 3.5，则必须手动转换：

```
For Each dr As DataRow In Categories.Tables(0).Rows
    If Not dr.IsNull("Select") AndAlso DirectCast(dr("Select"), Boolean) Then
        'Do Something
    End If
Next 
```

# javascript - 以编程方式单击Android WebView中的按钮

> ID：15328400
> 
> 赞同：2
> 
> 时间：2013-03-10T22:22:02.037
> 
> 标签：javascript, android, forms, button, submit

我正在尝试填写一些字段（工作）然后单击登录按钮（不工作）我尝试过：

```
document.getElementById('loginButton').click();" 
```

和

```
document.forms['form'].submit(); 
```

按钮名称和表单名称是正确的，我做错了什么？

```
webview.setWebViewClient(new WebViewClient() {  
             @Override  
             public void onPageFinished(WebView view, String url)  
             {  
                 webview.loadUrl("javascript:(function() { " +  
                      "document.getElementById('coCode').value = 'CompanyCode';" +
                      "document.getElementById('loginName').value = 'LoginName';" +
                      "document.getElementById('password').value = 'Password';" +
                      //"document.forms['form'].submit();" + //Doesn't Work
                      //"document.getElementById('loginButton').click();" + //Doesn't Work
                    "})()");
             }  
         }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T04:28:41.180

我想通了，以下对我有用：

```
webview.loadUrl("javascript:WebForm_DoPostBackWithOptions(
  new WebForm_PostBackOptions('loginButton', '', true, '', '', false, true))"); 
```

# android - 将屏幕录制到视频 libgdx android

> ID：15328409
> 
> 赞同：4
> 
> 时间：2013-03-10T22:22:38.437
> 
> 标签：android, screen, record, libgdx

我必须在 libgdx 应用程序中录制屏幕并将视频分享到同一应用程序中的 youtube。我编译了 ffmpeg 项目以获得二进制文件 FFMPEG。我在应用程序中获取了一个截图列表，我需要将它们转换为视频。FFMPEG 是将图片+声音转换为电影的最简单方法吗？我在断言文件夹中添加了 FFMPEG 文件。现在我尝试执行它：

```
 Runtime rt = Runtime.getRuntime();
rt.exec("chmod 700 ffmpeg");
    rt.exec("ffmpeg"); 
```

由于路径的原因，它无法完成，它似乎是错误的。（目前无法在 libgdx 中使用标准的 assertmanager）我试图将文件从 assert 文件夹复制到其他位置，如下所示：

```
FileHandle handle = Gdx.files.internal("ffmpeg");
FileHandle destHandle = Gdx.files.external("/data/data/com.me.putingame.VideoProcessor/ffmpeg");
handle.copyTo(destHandle); 
```

但因为是外部文件，我不知道执行 ffmpeg 进行编码的路径。我使用什么路径？

如何使用 libgdx 在无根设备中执行 ffmped？一些代码行会很有用

这是在android中录制视频的最佳方式吗？

问候， 马吕斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:09:32.100

如果你只想要`destHandle`我认为这应该工作的完整路径：

```
 String fullpath = Gdx.files.getExternalStoragePath() + "/" + destHandle.path(); 
```

请参阅[http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/Files.html#getExternalStoragePath()](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/Files.html#getExternalStoragePath())

# android - 无法将位图上传到 php 服务器？

> ID：15328411
> 
> 赞同：0
> 
> 时间：2013-03-10T22:22:51.837
> 
> 标签：android, image, upload

我试图让我的应用程序将用相机拍摄的图像上传到服务器。我知道这不是服务器，因为我可以毫无问题地访问 url。我得到`Error in http connection android.os.NetworkOnMainThreadException`了错误。这是我尝试使用的代码。

```
public void uploadFile(Bitmap file) {
        Bitmap bitmapOrg = file;
        ByteArrayOutputStream bao = new ByteArrayOutputStream();
        bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 90, bao);
        byte[] ba = bao.toByteArray();
        String ba1=Base64.encodeBytes(ba);

        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("image",ba1));

        try {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://example.info/appserver/upload.php");
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
        } catch(Exception e){
            Log.e("log_tag", "Error in http connection "+e.toString());
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T22:26:37.807

网络活动不能在主线程（UI 线程）上完成，因为它极大地影响了您的应用程序对用户的感觉。查看[有关使用 AsyncTasks 进行网络访问的培训文档以获取](http://developer.android.com/training/basics/network-ops/connecting.html#AsyncTask)解决方案。

# javascript - $.when 和回调

> ID：15328412
> 
> 赞同：1
> 
> 时间：2013-03-10T22:23:00.353
> 
> 标签：javascript, jquery

我正在寻找一种更简洁的方法来做到这一点：

```
 var f1 = function(){};
    var f2 = function(){};
    doSomething('ArbritraryString',f1); //does xhr, and then runs f1 on callback
    doSomething('ArbritraryString',f2); //does xhr, and then runs f2 on callback

    $.when($.get('myJson',f1,f2)).then(function(ret1, ret2, ret3){

        //doStuff
    }); 
```

有任何想法吗？

该`doSomething`函数实际上只是调用空的 f1/f2 函数，所以我有一个`$.when`atm 的回调处理程序......

理想情况下我想要

```
$.when($.get('myJson',doSomething('ArbritraryString',function(){}); ,doSomething('ArbritraryString',function(){}))).then(function(ret1, ret2, ret3){

    //doStuff
}); 
```

并让 jquery 神奇地知道 doSomething 中的第二个参数是它必须注意的回调。

`doSomething`看起来像这样：

```
doSomething:function(name,callbackFunction){
    /*snip logic 

    */
    $.get(name, function(data){
            /*some more logic 

            */

            if(typeof(callbackFunction)==='function'){
                callbackFunction();
            }
        });
    }
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:51:15.160

更改`doSomething`为不接受回调，只返回 jqXHR 对象（以 结尾`return $.get`），然后您可以`$.when`正确使用来跟踪所有 jqXHR 对象的进度：

```
$.when(
        doSomething('ArbritraryString'),
        doSomething('ArbritraryString'),
        $.get('myJson')
    ).done(function(ret1, ret2, ret3){
        // all three succeeded
    }); 
```

如果需要在被视为已*解决*`doSomething`之前进行某种额外的处理，则此函数应创建自己的 Deferred 对象并返回该对象的值，而不是直接返回。有关此方法的更多信息，请参阅[deferred.promise()](http://api.jquery.com/deferred.promise/)中的示例。*`.promise()``$.get`*

# map - 如何引用 Io 中映射的列表？

> ID：15328413
> 
> 赞同：1
> 
> 时间：2013-03-10T22:23:03.143
> 
> 标签：map, iolanguage

Io 允许一个可选参数引用列表项的索引。我如何使用它来引用被映射的列表，例如，我可以写：

```
testList := list(1,2,3,4)
testList map(i,v, if(testList(i+v), v, v-1)) 
```

结果是`list(1,2,3,3)`

但是，如果我想在不创建变量 testList 的情况下编写它怎么办？如何引用我正在映射的列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:29:47.100

如果不使用中间名，您将无法访问地图内的接收器。地图是在调用者的上下文中评估的，即您的调用`list(1,2,3,4)`将在哪里进行。

# vba - 如何在 Access 2003 中创建用于 VBA 代码编辑的自定义工具栏和控件

> ID：15328415
> 
> 赞同：0
> 
> 时间：2013-03-10T22:23:10.930
> 
> 标签：vba, toolbars

我想在 Ms Access 2003 中创建一个自定义菜单来自动处理 VBA 代码。创建自定义工具栏和控件以用于表单、报告等很容易；我可以创建一个在 VBA 端可见和可用的工具栏。但是，无论是通过交互还是通过 vba，我都没有成功地使用自定义（宏）控件填充工具栏，这是我需要做的。搜索帮助总是会导致有关如何为数据库自定义工具栏的说明，但不是针对代码的说明。建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T19:17:15.860

从 MS 网站： http: [//msdn.microsoft.com/en-us/library/office/aa210698 (v=office.11​​).aspx](http://msdn.microsoft.com/en-us/library/office/aa210698(v=office.11).aspx)

```
'Create a commandbar
Dim cmb As CommandBar
Set cmb = Application.CommandBars.Add("MyCommandBar")
cmb.Visible = True

'Add a command button
Dim cbc As CommandBarControl
Set cbc = cmb.Controls.Add(msoControlButton)
cbc.Caption = "Button1"
cbc.Style = msoButtonCaption

'Add code to execute when button is pressed
CommandBars("MyCommandBar").Controls("Button1").OnAction = "=MsgBox(""Wow!"")" 
```

您可以指定一个宏来代替“MsgBox”。

# html - 按中心点定位，而不是左上角

> ID：15328416
> 
> 赞同：59
> 
> 时间：2013-03-10T22:23:10.987
> 
> 标签：html, css, position, positioning, css-position

是否可以告诉代码通过元素的中心点而不是左上角来定位？如果我的**父**元素有

```
width: 500px; 
```

我的**子**元素有

```
/*some width, for this example let's say it's 200px*/
position: absolute;
left: 50%; 
```

有人会假设基于`50%`定位，子元素将位于父元素的中间，`150px`在每一侧留下可用空间。然而，事实并非如此，因为它是孩子的​​左上角，它是`50%`父母的宽度，因此整个孩子的宽度`200px`从那里向右走`250px`，在左边留下自由空间，只`50px`在右边.

所以，我的问题是，如何实现**中心定位**？

我找到了这个解决方案：

```
position: absolute;
width: 200px;
left: 50%;
margin-left: -100px; 
```

但我不喜欢它，因为您需要为每个元素的宽度手动编辑它——我想要一些可以全局使用的东西。

（例如，当我在 Adob​​e After Effects 中工作时，我可以为一个对象设置一个位置，然后设置该对象的特定锚点，该锚点将被放置到该位置。如果画布很`1280px`宽，您可以将一个对象定位`640px`到选择对象的中心作为您的锚点，然后整个对象将在`1280px`宽画布内居中。）

我会在 CSS 中想象这样的事情：

```
position: absolute;
left: 50%;
horizontal-anchor: center; 
```

同样，`horizontal-anchor: right`将元素定位在其右侧，因此整个内容将位于其父级`50%`宽度点的左侧。

而且，同样适用`vertical-anchor`，你明白了。

那么，这样的事情是否可能**仅使用 CSS**（无脚本）？

谢谢！

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-03-10T23:05:05.270

如果元素必须绝对定位（因此，`margin: 0 auto;`对于居中没有用处），并且脚本是不可能的，您可以使用 CSS3 转换来实现这一点。

```
.centered-block {
    width: 100px; 
    left: 50%; 
    transform: translate(-50%, 0); 
    position: absolute;
} 
```

有关一些示例，请参见this [fiddle](http://jsfiddle.net/BxN7F/)。重要部分：`left: 50%;`将块推过其父级的一半（如您所述，它的左侧位于 50% 标记上）。将块沿 x 轴（即向左）拉回其*自身*`transform: translate(-50%, 0);`宽度的一半，这会将其放置在父级的中心。

 ** * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-07-24T14:40:33.367

这是将文本元素置于容器中间的一种方法（以标题为例

CSS：

```
.header {
     text-align: center;
     top: 50%;
     left: 50%;
     transform: translate(-50%, -50%);
     position: absolute;
} 
```

它以中间锚点为中心。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-21T13:24:37.990

如果可以选择添加另一个元素，请考虑以下事项：

```
/* CSS for all objects */

div.object {
  width: 100%;
  height: 100%;
  position: absolute;
  left: -50%;
  top: -50%; /* to anchor at the top center point (as opposed to true center) set this to 0 or remove it all together */
}

div.anchor {
  position: absolute; /* (or relative, never static) */
}

/* CSS for specific objects */

div#el1 {
  /* any positioning and dimensioning properties for element 1 should go here */
  left: 100px;
  top: 300px;
  width: 200px;
  height: 200px;
}

div#el2 {
  /* any positioning and dimensioning properties for element 2 should go here */
  left: 400px;
  top: 500px;
  width: 100px;
  height: 100px;
}

div#el1>div.object {
  /* all other properties for element 1 should go here */
  background-color: purple;
}

div#el2>div.object {
  /* all other properties for element 2 should go here */
  background-color: orange;
}
```

```
<div class="anchor" id="el1">
  <div class="object">
  </div>
</div>
<div class="anchor" id="el2">
  <div class="object">
  </div>
</div>
```

本质上，我们所做的是设置一个对象来定义元素的位置、宽度和高度，然后在其中放置另一个对象，偏移 50%，并获取其父尺寸（即`width: 100%`）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-26T07:52:27.147

偶然发现了这个问题，我想添加另一种在 div 中居中内容的方法。

通过使用 CSS3 显示模式“灵活框”，如将以下 CSS 属性设置为父 div

```
display: flex;
position: relative;
align-items: center;
justify-content:center; 
```

并且“至少”将以下属性设置为子 div

```
position:relative; 
```

浏览器将自动将父 div 中的内容居中，不受其宽度或高度的影响，这在您开发图像网格之类的东西或只是想消除计算 div 位置的麻烦时尤其有用，然后不得不当您改变对上述 div 的设置的想法时，重新计算它。

在我自己的工作中，我倾向于设置一个名为

```
.center-center 
```

使用我为父 div 描述的属性，然后只需将其添加到我需要其内容居中的任何元素中。

我创建了一个 JSFiddle 来支持这个解释，请随意点击红色方块以查看实际定位。

[https://jsfiddle.net/f1Lfqrfs/](https://jsfiddle.net/f1Lfqrfs/)

对于多行支持，您可以在父 DIV 中添加（或在 JSF 中取消注释）以下 CSS 属性

```
flex-wrap: wrap; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T22:45:45.863

left:50% 并不是把这个 div 50% 的重心向左居中，它是左边框到父元素左边框的距离，所以基本上你需要做一些计算。

```
left = Width(parent div) - [ Width(child div) + Width(left border) + Width(right border) ]

left = left / 2 
```

所以你可以做一个Javascript函数......

```
function Position(var parentWidth, var childWith, var borderWidth)
{
      //Example parentWidth = 400, childWidth = 200, borderWidth = 1
      var left = (parentWidth - ( childWidth + borderWidth));
      left = left/2;
      document.getElementById("myDiv").style.left= left+"px";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-24T09:54:32.120

我通过使用`transform: translateX`with`calc`来按元素中心而不是左上角进行水平定位来使其工作。垂直使用也可以使用相同的技巧`transform: transformY`。这适用于任何类型的宽度*（尝试调整大小）*

片段：`transform: translateX(calc(-50% + 223px));`

浏览器支持：[https://caniuse.com/#feat=transforms2d](https://caniuse.com/#feat=transforms2d) , [https://caniuse.com/#feat=calc](https://caniuse.com/#feat=calc)

Codepen 更多示例：[https ://codepen.io/manikantag/pen/KJpxmN](https://codepen.io/manikantag/pen/KJpxmN)

关于 offsetLeft/offsetTop 等的注意事项：`el.offsetLeft`不会为 CSS 转换的元素提供适当的值。您需要类似的东西`el.getBoundingClientRect().left - el.offsetLeft - el.parentNode.offsetLeft` *（[如此处所述](https://stackoverflow.com/questions/28295670/get-divs-position-after-translate3d/28305099?noredirect=1#comment47697241_28305099)）*

**关于流动效果的注意事项：**正如[CSS Things That Don't Occupy Space](https://www.impressivewebs.com/css-things-that-dont-occupy-space/)中详述的那样，transform 不会影响后面的元素，而不考虑由 transform 引起的偏移量。有时这可能不是预期的行为。如果宽度/高度是固定的，这可以使用负边距来修复（如果宽度/高度正在使用则不起作用`%`）

```
.left-positioned {
  margin-left: 223px;
  background-color: lightcoral;
}

.center-positioned {
  transform: translateX(calc(-50% + 223px)); /*=====> actual solution */
  background-color: cyan;
}

.with-width {
  width: 343px;
  background-color: lightgreen;
}

/* styles not related to actual solution */

div {
  resize: both;
  overflow: auto;
}

.container {
  background-color: lightgray;
}

.ele {
  display: inline-block;
  height: 70px;
  text-align: center;
}
```

```
<div class="container">
  <div class="ele left-positioned">Reference element (left at 223px)</div> <br/>
  <div class="ele center-positioned">^<br/>Center positioned element (center at 223px)</div> <br/>
  <div class="ele center-positioned with-width">^<br/>Center positioned element with width (center at 223px)</div>
</div>
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-24T13:57:32.550

[`transform`您可以使用属性](https://developer.mozilla.org/en-US/docs/Web/CSS/transform)和[`translate`函数](https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/translate())移动元素，使其中心与指针处于相同位置，如下所示：

```
transform: translate(-50%, -50%); 
```

这相当于：

```
transform: translateX(-50%) translateY(-50%); 
```

这会将元素在 X 和 Y 轴上向后移动一半长度，因此它的中心将位于放置它的指针上方。

## 中心示例

例如，如果您想将一个元素放在其父元素的中心，您首先将指针放在中心，如下所示：

```
left: 50%
top: 50% 
```

然后添加转换以将元素的中心移动到指针上，如下所示：

```
left: 50%
top: 50%
transform: translate(-50%, -50%); 
```

> 感谢[Joe Rhoney，2019 年](https://stackoverflow.com/users/1383937/joe-rhoney)建议`transform`在先前答案的评论中使用。*

# html - Anchor 将值发送到 Mapped Servlet - 传递参数

> ID：15328419
> 
> 赞同：0
> 
> 时间：2013-03-10T22:23:17.617
> 
> 标签：html, forms, servlets, parameter-passing

我有一个包含几类书籍的菜单。

当我单击一个菜单项时，我想让一个 servlet 查询数据库并返回结果。

我不想重复代码，所以最好只使用一个 servlet，但不知何故让 servlet 识别菜单中的哪个链接被单击并执行适当的操作。

是通过提交表单来做到这一点的唯一方法吗？

另外，我应该提一下，尽管这种做法很糟糕，但我将针对结果设定不同的框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:42:14.543

不，您不需要提交表单。参数通过使用查询字符串的链接传递：

```
<a href="/books?category=novels">Novels</a>
<a href="/books?category=sf">Science Fiction</a>
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-22T10:28:06.343

这篇文章可能是旧的。但这是我的答案。
您可以在 jsp 页面中创建这样的链接。

```
 <a href="${pageContext.request.contextPath}/new">Add New Book</a>

 <a href="${pageContext.request.contextPath}/list">List All Books</a> 
```

并像这样调用您的控制器。

```
 protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        String action = request.getServletContext().getContextPath()+request.getServletPath();

        try {
            switch (action) {
            case "/new":
                showNewForm(request, response);
                break;
            case "/insert":
                insertBook(request, response);
                break;
            case "/delete":
                deleteBook(request, response);
                break;
            case "/edit":
                showEditForm(request, response);
                break;
            case "/update":
                updateBook(request, response);
                break;
            default:
                listBook(request, response);
                break;
            }
        } catch (SQLException ex) {
            throw new ServletException(ex);
        }
    } 
```

这适用于保留为启动页面的 servlet。
您可以`href`根据`url pattern`servlet 更新属性。

# ios - 自定义文件类型的 UIDocumentInteractionController - 发送或接收应用程序是否有错误的 UTI？

> ID：15328421
> 
> 赞同：2
> 
> 时间：2013-03-10T22:23:23.980
> 
> 标签：ios, nsfilemanager, uti

我正在开发一个关卡编辑器，它将把关卡文件发送到游戏应用程序。我在游戏中注册了一个自定义 UTI，以便它显示在`UIDocumentInteractionController`选项菜单中。

但是，当我选择“在 MyApp 中打开”时，我收到控制台错误**“Invalid LSOpenOperation request - No applications found to open document”**。

我已经尝试过[这里](https://stackoverflow.com/questions/14487469/ios-error-when-sending-application-specific-file-to-dropbox-using-uidocumentint)建议的解决方案，即为`UTTypeConformsTo`. 然而，这并没有帮助。

[我还在这里](https://discussions.apple.com/thread/4489540?start=0&tstart=0)阅读了以下讨论，其中包括：

> 导出的 UTI 中设置的 mime 类型必须与电子邮件附件的 mime 类型匹配。我们的 plist 文件将 mime 类型设置为 application/octet-stream，但电子邮件被附加为 application/json mime 类型。如果这些不匹配，您的应用程序似乎将出现在“打开方式...”菜单中，但当您尝试打开电子邮件附件时它不会启动您的应用程序。我们将两者都切换到 application/json 并解决了问题。

我了解如何在电子邮件附件中设置 mime 类型。但我正在打开一个使用 NSFileManager 在本地创建的文件。有什么方法我必须为本地文件设置 mime-type 吗？或者这更有可能是其他一些问题？

不确定其中哪一个是重要的，但这是我的文档类型设置（在游戏中，而不是编辑器——我假设由于上述错误，游戏的 Info.plist 是问题）：

```
<key>CFBundleDocumentTypes</key>
    <array>
        <dict>
            <key>CFBundleDocumentTypes</key>
            <array>
                <dict>
                    <key>CFBundleTypeName</key>
                    <string>MyApp Level Pack</string>
                    <key>CFBundleTypeOSTypes</key>
                    <array>
                        <string>com.myapp.sslp</string>
                    </array>
                    <key>CFBundleTypeRole</key>
                    <string>Viewer</string>
                    <key>LSHandlerRank</key>
                    <string>Owner</string>
                    <key>LSItemContentTypes</key>
                    <array>
                        <string>public.json</string>
                        <string>com.myapp.sslp</string>
                    </array>
                </dict>
            </array>
            <key>CFBundleTypeName</key>
            <string>MyApp Level Pack</string>
            <key>LSItemContentTypes</key>
            <array>
                <string>com.myapp.sslp</string>
                <string>public.json</string>
            </array>
        </dict>
    </array> 
```

对于导出的类型声明：

```
<key>UTExportedTypeDeclarations</key>
    <array>
        <dict>
            <key>UTExportedTypeDeclarations</key>
            <array>
                <dict>
                    <key>UTTypeConformsTo</key>
                    <array>
                        <string>public.data</string>
                        <string>public.json</string>
                    </array>
                    <key>UTTypeDescription</key>
                    <string>MyApp Level Pack</string>
                    <key>UTTypeIdentifier</key>
                    <string>com.myapp.sslp</string>
                    <key>UTTypeTagSpecification</key>
                    <dict>
                        <key>public.filename-extension</key>
                        <string>sslp</string>
                        <key>public.mime-type</key>
                        <string>application/json</string>
                    </dict>
                </dict>
            </array>
            <key>UTTypeConformsTo</key>
            <array>
                <string>public.data</string>
                <string>public.json</string>
            </array>
            <key>UTTypeDescription</key>
            <string>MyApp Level Pack</string>
            <key>UTTypeIdentifier</key>
            <string>com.myapp.sslp</string>
        </dict>
    </array> 
```

# css - 下拉菜单中元素的宽度适合父级 （HTML 列表）

> ID：15328423
> 
> 赞同：2
> 
> 时间：2013-03-10T22:23:26.597
> 
> 标签：css

 我有一个用 HTML 和 CSS 制作的下拉菜单。我一直在与菜单中的项目作斗争，因为几乎没有一个项目的宽度是 [li] 的 100%，就像在图像上一样：

![下拉菜单中的元素](../Images/edf5dfc89273eb1ae5f43869ef1947be.png)

**只想制作第二个**（和第三个元素）**以适合 li** - 与第一个元素的宽度相同（[li] 和 [ul] 宽度自动与列表中最宽的元素相同） 

这是我的 CSS 代码： http: [//pastebin.com/tNfYmSpJ](http://pastebin.com/tNfYmSpJ)

HTML： http: [//pastebin.com/mvBRietS](http://pastebin.com/mvBRietS)

我正在使用本教程：[http](http://www.handy-html.com/create-a-simple-css-dropdown-menu/) ://www.handy-html.com/create-a-simple-css-dropdown-menu/ 但稍微修改了一下。我试图在列表中（在 [li] 标签中）获得相同宽度的 [a] 元素，但从未成功：P 有没有简单的方法可以强制链接 a 适合 100% 的父 [li] 宽度？我知道可以设置 [a] 的固定宽度，但这不是我正在寻找的解决方案：/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T22:28:14.970

默认情况下，该`a`元素是[内联级](http://www.w3.org/TR/CSS2/visuren.html#inline-boxes)元素。要使其成为[块级](http://www.w3.org/TR/CSS2/visuren.html#block-boxes)元素，请相应更改其`display`属性。

例如：

```
a {display:block;} 
```

根据您链接到的示例，您最有可能希望这样做：

```
#mainmenu li a {
    ...
    display:block
} 
```

# sqliteopenhelper - 在 Activity 上下文或应用程序上下文之间决定实例化 SQLiteOpenHelper

> ID：15328424
> 
> 赞同：5
> 
> 时间：2013-03-10T22:23:31.123
> 
> 标签：sqliteopenhelper, android-context

我是 Android 开发的新手（坦率地说，是整体开发），因此我一直在阅读 Commonsware Busy Coder 的指南。在阅读 SQLite 部分时，有几件事对我来说不是 %100 清楚的。以下是我认为正在发生的事情以及一些问题。如果我的思维过程有误，请纠正我。

作者建议，如果您要在应用程序中使用多个 Activity 的数据库，则不应使用每个 Activity 的 Context 引用来实例化**SQLiteOpenHelper**。相反，您应该使用`getApplicationContext()`Activity 提供的。

通过这样做，他使用了`getApplicationContext()`检索在应用程序进程开始后不久创建的 Context 的单例实例这一事实。这就是我的问题出现的地方。我认为如果我在实例化**SQLiteOpenHelper**时使用 Activity（this 关键字）提供的 Context ，每个 Activity 都会创建自己的**SQLiteOpenHelper**实例。在我看来，仅使用 Activity 的上下文并不会通知应用程序上下文已经创建了 SQLiteHelper 的实例，因此，它创建了一个新实例，而不是重新使用现有实例。我的想法正确吗？

我认为 Context（如果我错了，请纠正我）作为开发人员获取 Android 操作系统提供的信息和资源的“网关”（即通过 获取系统服务`getSystemService()`）。但是使用 this（来自 Activity）或 using 这样做`getApplicationContext()`有不同的含义。使用它，将获得一个 Context 的实例，它是您当前活动的“本地”，但使用`getApplicationContext()`引用整个应用程序。如果这是正确的，是否意味着当我传递`getApplicationContext()`对**SQLiteOpenHelper**构造函数的引用时，它会让我的整个应用程序知道我的**SQLiteOpenHelper**的实例已经创建。**SQLiteOpenHelper**如何**让应用程序知道这一点？它是否使用一些静态方法，如 public/private static dbCreated(Context context){//让上下文知道有一个正在运行的实例}让应用程序知道？**

 **如果这令人困惑，我很抱歉。

提前谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-30T16:01:03.233

我想现在我对上下文的概念有了更好的理解。我想分享一个我发现的链接来阐明这个话题。[http://t.co/9R0bPWiKc5](http://t.co/9R0bPWiKc5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-24T13:55:52.760

对于你的第二个问题，如果我理解正确的话， Context 是某种类型的[Singletons 注册表](http://en.wikipedia.org/wiki/Multiton_pattern)。所以**SQLiteOpenHelper**只是被创建并绑定到给它的上下文。使用此上下文获取**SQLiteOpenHelper**的所有内容都将获得该绑定实例。**

# python - opencv 中有哪些常量（代码）

> ID：15328426
> 
> 赞同：3
> 
> 时间：2013-03-10T22:23:37.233
> 
> 标签：python, opencv

在调用 Opencv 函数时，通常会提供一个常量来调用函数，例如：

```
im_hsv = cv2.cvtColor(im, cv2.COLOR_BGR2HSV) 
```

虽然我找不到对所有可用常量的引用。Opencv 分发下载 (~250MB) 不包含`constants.h`文件。

谷歌显示此指针：[https](https://code.ros.org/trac/opencv/browser/trunk/opencv/interfaces/swig/filtered/constants.h?rev=277) ://code.ros.org/trac/opencv/browser/trunk/opencv/interfaces/swig/filtered/constants.h?rev= 277 已弃用 8 年。

在 Github 的 Opencv 项目中，似乎也没有这样的文件，所以有人有指向包含所有可用 Opencv 常量的文件的链接吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T23:15:05.347

这是[你](https://github.com/opencv/opencv/blob/e3ae36dcb3c1d523802f8642e5c3984db43637c4/modules/python/src2/defs)要找的吗？

# jquery - Gridster 通过拖入 div 来移除小部件

> ID：15328427
> 
> 赞同：6
> 
> 时间：2013-03-10T22:23:40.103
> 
> 标签：jquery, jquery-ui, gridster

我正在使用 gridster.js 并试图找出一种设置它的好方法，我可以将其中一个小部件拖到像 div 这样的“垃圾桶”中，并让它从网格中删除该小部件。如果有人对此有任何想法，那就太好了。这是我发现的，但试图找出使其与 gridster 一起工作的最佳方法。

```
$(".widget").draggable();
    $('#trash-can').droppable({
        drop: function(event, ui) {
            $(ui.draggable).remove();
        }
    }); 
```

有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-28T05:03:21.537

我意识到这个问题有点老了，我不确定你是否还在寻找解决方案，但我能够通过在 gridster 网格中创建一个 div 并对其进行不同的样式来实现这一点。

我在初始化 gridster 时定义了一个停止函数，即坐标在这个 div 内，删除小部件。

```
var gridster = $(".gridster ul").gridster({
      widget_base_dimensions: [100, 55],
      widget_margins: [5, 5],
      draggable: {
         stop: function(e, ui, $widget) {
         console.log(ui);
            if (ui.position.left >435 ) gridster.remove_widget(ui.$helper[0]);
        }
      }
    }).data('gridster'); 
```

这是一个工作（虽然非常基本）的小提琴：http: [//jsfiddle.net/nrC4J/](http://jsfiddle.net/nrC4J/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-27T21:23:41.173

我也意识到这个问题很老了。但是它仍然出现在搜索的顶部。我认为你在 drop 方法中删除元素是正确的。

我修改了 kayladnls fiddle 以使用您的方法，但不仅仅是删除它，而是使用 gridter 的删除。

这是演示拖动到垃圾箱到删除功能的小提琴。 [http://jsfiddle.net/nrC4J/46/](http://jsfiddle.net/nrC4J/46/)

**编辑：**要让它与当前版本的 JQuery 一起使用，您需要使用当前版本的 jquery-ui：这里是 jquery 2.1.0 和 jquery-ui 1.11.4 [http://jsfiddle.net/nrC4J/ 52/](http://jsfiddle.net/nrC4J/52/)

```
$(function () {

    // initiate Gridster
    var gridster = $(".gridster ul").gridster({
        widget_margins: [5, 5],
        widget_base_dimensions: [100, 100],
    }).data("gridster")

    // set lis to Jquery draggable elements
    $(".gridster li").draggable();

    // set up drop space
    $('#log').droppable({
        drop: function (e, ui) {
            gridster.remove_widget(ui.helper.css('display', 'none'))
        }
    });

}); 
```

# c# - rtfbox和文本文件中的排序/排序字符串数组

> ID：15328429
> 
> 赞同：2
> 
> 时间：2013-03-10T22:23:50.493
> 
> 标签：c#, arrays, string

我在另一个类中定义了一个字符串数组，它从我附加到 rtfbox 的 textBoxes 中获取它的值，我可以将此 rtfBox 保存到这种格式的文本文件中：

1.  名字, 姓氏, 02/03/4567, 89

2.  约翰·史密斯，1995 年 1 月 2 日，100

3.  aa, bb, 01/02/1995, 88

4.  cc, dd, 08/09/7777, 22

我使用以下方法将此字符串数组附加到 rtfbox：

```
return (Convert.ToString(studentID) + ", " + firstName + ", " + lastName + ", " +
        dob + ", " + Convert.ToString(averageMark));

bc[0] = new Student(studentID, firstName, lastName, dob, averageMark);

for (int i = 0; i < 1; i++)
{
    string bcString = bc[i].bankCustomerToString() + "\r\n";
    richTextBox1.AppendText(bcString);
} 
```

有没有办法可以通过`rtfbox`按钮订购文本文件或激活？`averageMark``dateofbirth`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T22:34:37.170

您可以使用 LINQ：

```
var ordered = students.OrderBy(s => s.averageMark).ThenBy(s => s.dob);
foreach(var student in ordered)
    // richTextBox1.Append(.....); 
```

如果您想按降序排列，请使用`OrderByDescending`和/或`ThenByDescending`.

# ruby-on-rails - 旧版连接不可用时无法运行测试

> ID：15328430
> 
> 赞同：1
> 
> 时间：2013-03-10T22:23:54.267
> 
> 标签：ruby-on-rails, testing, activerecord

我在一个抽象的 ActiveRecord 模型中有一个到遗留系统的辅助连接，我只用它来查询外部 SQL 服务器数据库。

由于我一直无法访问此连接，因此我希望在涉及该连接不可用时可以跳过或使用模拟测试。但是，当我尝试运行任何测试时，夹具加载机制会尝试建立辅助连接，如果它不可用，则会引发“无法打开套接字”或“无法连接”异常，这意味着我无法运行我的测试套件离线。

欢迎任何不涉及禁用固定装置的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-27T21:20:23.217

你试过 Webmock [https://github.com/bblimke/webmock](https://github.com/bblimke/webmock)和 VCR [https://github.com/vcr/vcr](https://github.com/vcr/vcr)吗？

;)

# java - 可以将转换后的数组与另一个转换后的数组进行比较吗？

> ID：15328431
> 
> 赞同：0
> 
> 时间：2013-03-10T22:24:07.170
> 
> 标签：java, arrays

好的，我试图正确地提出问题，以便获得所需的帮助。我得到的是一个简单的钱包/硬币程序，它将字符串数组与另一个字符串数组进行比较。原谅冗长的循环/嵌套循环/逻辑，因为在这个分配中我不能使用来自 java 数组和集合类的方法。这是一个课堂作业，所以请解释这个过程，而不仅仅是回答。

（理论）：我在想我对 2 个转换后的数组的比较是问题的原因，但我想不出一种方法来将数组列表中的每个元素与另一个数组列表中的每个元素进行比较。

钱包类：

```
import java.util.ArrayList;

/**
 * A purse holds a collection of coins.
 */
public class Purse
{
    private ArrayList<String> coins;

    /**
     * Constructs an empty purse.
     */
    public Purse()
    {
        coins = new ArrayList<String>();
    }

    /**
     * Add a coin to the purse.
     * 
     * @param coinName
     *            the coin to add
     */
    public void addCoin(String coinName)
    {
        coins.add(coinName);
    }

    /**
     * Returns a string describing the object.
     * 
     * @return a string in the format "Purse[coinName1,coinName2,...]"
     */
    public String toString()
    {
        String coinName1 = "Quarter";
        String coinName2 = "Dime";
        String coinName3 = "Nickel";
        String coinName4 = "Penny";

        String str = "Actual:"
                + "Purse["
                + (coinName1 + "," + coinName2 + "," + coinName3 + "," + coinName2)
                + "]";

        return str;
    }

    /**
     * Determines if a purse has the same coins in the same or different order
     * as another purse.
     * 
     * @param other
     *            the other purse
     * @return true if the two purses have the same coins in the same or
     *         different order, false otherwise
     */
    public boolean sameCoins(Purse other)
    {
        if (this.coins.size() != other.coins.size())
        {
            System.out.println("1");
            return false;
        }

        int matched = 0;
        for (int i = 0; i < this.coins.size(); i++)
        {
            for (int j = 0; j < other.coins.size(); j++)
            {
                if (this.coins.toArray() == other.coins.toArray())
                {
                    matched++;
                    System.out.println("2");
                    System.out.println(this.coins.toArray());
                    System.out.println(other.coins.toArray());
                    break;
                }
            }
        }
        return matched == this.coins.size();

    }

} 
```

PurseTester.class:

```
/**
 * This class tests the Purse class.
 */
public class PurseTester
{
    public static void main(String[] args)
    {
        Purse p = new Purse();
        p.addCoin("Quarter");
        p.addCoin("Dime");
        p.addCoin("Nickel");
        p.addCoin("Dime");

        System.out.println(p.toString());
        System.out.println("Expected: Purse[Quarter,Dime,Nickel,Dime]");

        Purse a = new Purse();
        a.addCoin("Quarter");
        a.addCoin("Dime");
        a.addCoin("Nickel");
        a.addCoin("Dime");

        Purse b = new Purse();
        b.addCoin("Nickel");
        b.addCoin("Dime");
        b.addCoin("Dime");
        b.addCoin("Quarter");

        System.out.println(a.sameCoins(b));
        System.out.println("Expected: true");

        Purse c = new Purse();
        c.addCoin("Quarter");
        c.addCoin("Penny");
        c.addCoin("Nickel");
        c.addCoin("Dime");

        Purse d = new Purse();
        d.addCoin("Nickel");
        d.addCoin("Dime");
        d.addCoin("Dime");
        d.addCoin("Quarter");

        System.out.println(c.sameCoins(d));
        System.out.println("Expected: false");

    }
} 
```

输出是：

```
Actual:Purse[Quarter,Dime,Nickel,Dime]
Expected: Purse[Quarter,Dime,Nickel,Dime]
false
Expected: true
false
Expected: false 
```

预期输出：

```
Actual:Purse[Quarter,Dime,Nickel,Dime]
Expected: Purse[Quarter,Dime,Nickel,Dime]
true
Expected: true
false
Expected: false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:36:48.553

您的循环从不查看`List`s，您只是反复检查`==`两个数组。您需要比较元素，例如：

```
 for (int i = 0; i < this.coins.size(); i++)
    {
        if (!this.coins.get(i).equals(other.coins.get(i)))
        {
           return false;
        }
    } 
```

但是，这与假设您想要相同的顺序进行比较。如果您需要比较忽略顺序，则需要遍历另一个数组并在找到该元素时将其删除，否则`return false`.

```
 final List<String> copy = new ArrayList<String>(other.coins);
    outerLoop:
    for (final String mine : coins)
    {
        final Iterator<String> otherIter = copy.iterator();
        while (otherIter.hasNext())
        {
            if (mine.equals(otherIter.next()))
            {
                otherIter.remove();
                continue outerLoop;
            }
        }
        return false;
    } 
```

这种方法显然是非常低效的，如果您`List`先对 s 进行排序，然后使用最佳的第一种方法。但是鉴于您不能使用`Array`方法，我假设您不能使用 a `TreeSet`or `Collections.sort()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T22:38:59.923

```
this.coins.toArray() == other.coins.toArray() 
```

这段代码总是返回`false`，因为它不比较两个数组的内容，它测试两个表达式是否引用同一个数组（即修改一个将修改另一个）。

基本上，您需要计算每个列表中每种硬币的数量，然后比较结果。如果事先知道可能的硬币种类，这很容易：只需为每种硬币设置两个变量（一个用于这个钱包，一个用于另一个钱包）。如果不知道可能的硬币扭结，您将不得不使用`Map`.

# css - Wordpress 中的默认段落类 the_content

> ID：15328432
> 
> 赞同：5
> 
> 时间：2013-03-10T22:24:27.887
> 
> 标签：css, wordpress, paragraph

我确信这很简单，但我已经在 Google 上搜索了大约 30 分钟，但没有运气。我想知道是否可以调整 Wordpress 中 the_content 输出的默认段落类。

我读到您可以将过滤器添加到主题的 functions.php 文件中，但是 WordPress 的这种特殊用途并没有使用主题。考虑一个静态 HTML 站点（5 页），每个页面上都有一个主要内容区域。Wordpress 仅用于通过客户编辑任何必要的 5 个帖子来更改这 5 个内容区域的内容。

问题是 WordPress 吐出的 p 标签没有应用任何类。我可以在我的查询或任何东西中更改它吗？理想情况下，我能够单独更改每个页面上输出的段落类。

想法？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T22:28:10.747

用 div 包装你的内容，并为其应用一个类：

```
<div class="content">
    <? the_content(); ?>
</div> 
```

并像这样设计它：

```
.content p { ... }
/* Page-specific */
.page-id-1 .content p { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-12T18:40:48.263

```
function wph_add_class_for_p_tag($content) {
    $content = str_replace('<p>', '<p class="SomeClass">', $content);
    return $content;
}

add_filter('the_content', 'wph_add_class_for_p_tag', 9999);
add_filter('the_excerpt', 'wph_add_class_for_p_tag', 9999); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-27T18:55:28.630

接受的答案并没有真正为我回答这个问题，但我发现[这篇文章](https://bavotasan.com/2012/add-class-to-all-excerpts-in-wordpress/)给了我我需要的东西 - 所以我的解决方案最终是这样的：

```
<?php
$content = get_content();
$content = str_replace('<p', '<p class="default-class"', $content); ?>

<div class="wrapper"><?php echo $content ?></div> 
```

那成功了！

# c# - PInvoke 将来自 ANSI C 的结构指针编组为 C# 中的 IntPtr

> ID：15328435
> 
> 赞同：1
> 
> 时间：2013-03-10T22:24:45.127
> 
> 标签：c#, .net, c, pinvoke

所以我试图从[iniParser](http://ndevilla.free.fr/iniparser/)库中 PInvoke C# 中的非托管 DLL。我目前在编组非托管库中的函数返回和获取的结构指针的正确方法上遇到了挫折。

在 C 中：

```
__declspec(dllexport) dictionary * iniparser_load(const char * ininame); 
```

在 C# 中：

```
[DllImport("iniParser.dll")]
private static extern IntPtr iniparser_load(string filename); 
```

C中的字典结构：

```
typedef struct _dictionary_ {
    int             n ;     /** Number of entries in dictionary */
    int             size ;  /** Storage size */
    char        **  val ;   /** List of string values */
    char        **  key ;   /** List of string keys */
    unsigned     *  hash ;  /** List of hash values for keys */
} dictionary ; 
```

我知道要实际访问 C# 中的结构，我需要为 C 结构创建一个对应项，但我不需要访问 C# 中的结构。

在 C# 中调用该函数时，出现以下错误：

```
A call to PInvoke function 'CacheExplorer!CacheExplorer.iniParser::iniparser_load'
has unbalanced the stack. This is likely because the managed PInvoke signature 
does not match the unmanaged target signature. Check that the calling convention 
and parameters of the PInvoke signature match the target unmanaged signature. 
```

但是托管签名如何与非托管签名不匹配？PInvoke 是否要求我为 C 结构制作 C# 对应项？我需要的只是 C# 中字典的句柄，完全没有必要访问成员，我宁愿不将结构转换为 C#

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T22:30:01.040

iniParser 库的调用约定可能是 cdecl，这意味着您需要更新`[DllImport]`属性用法：

```
[DllImport("iniParser.dll", CallingConvention = CallingConvention.Cdecl)] 
```

# asp.net-mvc - 编译 MVC 并预编译视图并部署到 Azure WebRole

> ID：15328439
> 
> 赞同：6
> 
> 时间：2013-03-10T22:25:20.827
> 
> 标签：asp.net-mvc, azure, asp.net-mvc-4, msdeploy, azure-web-roles

所以我有以下要求： 1\. 编译一个大型的MVC 应用程序并预​​编译它的所有视图。2\. 为 web.config 运行转换 3\. 打包并发布以部署到 Azure Web 角色

我可以用修改过的 proj 文件做 1，如果我使用 msdeploy 可以做 2，当我使用 VS 2012 Azure 工具时，3 可以正常工作。现在我想把这些都放在一个脚本化的过程中。

有没有人已经完成了腿部工作来让它运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T13:12:56.943

1)

```
/p:PrecompileBeforePublish=true 
```

2 + 3)

您需要在 .ccproj 中添加以下 MSBuild 目标以复制到转换后的 Web.config 文件中（使用 Web.Release.config 作为转换目标）：

```
<Target Name="CopySpecialFilesIntoPackage" AfterTargets="CopyWorkerRoleFiles">
  <ProjectName>WebProjectName</ProjectName>
  <TransformXml Source="$(ProjectDir)..\$(ProjectName)\Web.config" Transform="$(ProjectDir)..\$(ProjectName)\Web.Release.config" Destination="$(ProjectDir)obj\$(Configuration)\$(ProjectName)\$(ProjectOutput).config" />
</Target> 
```

如果您想将 Web 部署到 Web 角色的多个实例，您可以在需要 Web 角色（例如自定义域上的 SSL）时使用 Azure 网站或开源项目[Azure Web Farm](https://github.com/robdmoore/azurewebfarm)。

# php - 从 php 中的文本文件中查找字符串

> ID：15328442
> 
> 赞同：0
> 
> 时间：2013-03-10T22:25:41.617
> 
> 标签：php, text-files, php-gettext

我有一个文本文件，我在其中写了不同的行。每行包含不同的字符串值，用分号分隔；. 我正在尝试从行中获取第一个和第二个字符串，但是我不知道如何。有什么解决办法吗？

PHP - 现在，我正在打印整行。

```
<?php
            $readin = file('filmer.txt');
            $ul = '<ul id="films">';
            foreach($readin as $fName){
                echo $ul.'<li>'.$fName.'</li>';
            }
        ?> 
```

文本文件

```
Gudfadern;*****;http://www.imdb.com/title/tt0068646;http://ia.media-imdb.com/images/M/MV5BMjEyMjcyNDI4MF5BMl5BanBnXkFtZTcwMDA5Mzg3OA@@._V1_SX214_.jpg;Coppolas klassiska filmatisering av Mario Puzos roman om en maffiafamilj i New York. I centrum står Don Corleone, Gudfadern, men också hans söner bistår honom vid det intrikata maktspel som pågår mellan Corleone och de andra familjerna i området.

Rambo;****;http://www.imdb.com/title/tt0462499;http://ia.media-    imdb.com/images/M/MV5BMTI5Mjg1MzM4NF5BMl5BanBnXkFtZTcwNTAyNzUzMw@@._V1_SX214_.jpg;John Rambo har i lugn och ro slagit sig ned i Thailand, nära gränsen till Burma - ett land som sedan många år tillbaka lidit av förtryck från den styrande militärjuntan. Rambo ställs plötsligt inför sitt kanske farligaste uppdrag hittills när en grupp kristna missionärer tas som gisslan av den burmesiska militären

Sagan om konungens återkomst;*****;http://www.imdb.com/title/tt0167260;http://ia.media-imdb.com/images/M/MV5BMjE4MjA1NTAyMV5BMl5BanBnXkFtZTcwNzM1NDQyMQ@@._V1_SX214_.jpg;Gondor förbereder sig för krig mot mörkrets makter och ringen färdas långsamt med Frodo mot Mordor för att om möjligt förstöras. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:28:22.383

用于[`explode()`](http://www.php.net/explode)在分隔符 ( `;`) 处爆炸：

```
<?php
    $line = "Gudfadern;*****;http://www.imdb.com/title/tt0068646;http://ia.media-imdb.com/images/M/MV5BMjEyMjcyNDI4MF5BMl5BanBnXkFtZTcwMDA5Mzg3OA@@._V1_SX214_.jpg;Coppolas klassiska filmatisering av Mario Puzos roman om en maffiafamilj i New York. I centrum står Don Corleone, Gudfadern, men också hans söner bistår honom vid det intrikata maktspel som pågår mellan Corleone och de andra familjerna i området.";
    $lineSplit = explode(";", $line);
    $firstAndLast = $lineSplit[0] . " - " . $lineSplit[1];
    var_dump($firstAndLast);
?> 
```

# wordpress - 简单功能只显示首页

> ID：15328443
> 
> 赞同：1
> 
> 时间：2013-03-10T22:25:50.147
> 
> 标签：wordpress, filter, action

我有一个简单的函数需要分配给一个钩子，然后让它只出现在主页上。

我似乎无法做到正确。

```
add_action( 'woo_content_before', 'woo_add_home_slider' );

function woo_add_home_slider () {
    if ( function_exists( 'soliloquy_slider' ) ) soliloquy_slider( '169' ); 
} 
```

我需要这个只显示在我的主页上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:49:03.383

要使您的函数仅显示在主页上，您可以使用 WordPress 函数[is_home()](http://codex.wordpress.org/Function_Reference/is_home)和/或[is_front_page](http://codex.wordpress.org/Function_Reference/is_front_page)，具体取决于您的主页设置。

如果您的主页设置为列出您的博客文章，那么这将是您的解决方案：

```
function woo_add_home_slider() {
    if (is_home()) {
        if ( function_exists( 'soliloquy_slider' ) ) soliloquy_slider( '169' ); 
    }
} 
```

如果您的主页设置为显示特定页面：

```
function woo_add_home_slider() {
    if (is_front_page()) {
        if ( function_exists( 'soliloquy_slider' ) ) soliloquy_slider( '169' ); 
    }
} 
```

或者，根据您的设置，您可以通过将两者与 or 组合来获得所需的效果：

如果您的主页设置为列出您的博客文章，那么这将是您的解决方案：

```
function woo_add_home_slider() {
    if (is_home() || is_front_page()) {
        if ( function_exists( 'soliloquy_slider' ) ) soliloquy_slider( '169' ); 
    }
} 
```

当然，您可以将 if 组合成一个条件，如下所示：

```
function woo_add_home_slider() {
    if ((is_home() || is_front_page()) && function_exists( 'soliloquy_slider' )) {
        soliloquy_slider( '169' ); 
    }
} 
```

# c++ - 错误 C2679：二进制“==”：未找到采用右侧操作数类型的运算符

> ID：15328450
> 
> 赞同：0
> 
> 时间：2013-03-10T22:26:24.750
> 
> 标签：c++, inheritance, operator-overloading

我无法让我的家庭作业正常工作。我已经重载了我的 '==' 运算符，但我仍然收到此错误。不太确定为什么会抛出它或如何修复它。任何帮助，将不胜感激。

这是我的算法：

```
/* Performs a recursive binary search on the given array. It returns
 * the index of the found value, -1 otherwise. 
 */
template <typename T, typename V>
int binarySearch(T* list[], const V& searchValue,
                 const int firstIndex, const int lastIndex) 
{ 
    if (firstIndex <= lastIndex) 
    {
        int mid = (firstIndex + lastIndex) / 2;  //mid point of list.
        if (searchValue == *list[mid]) 
            return mid;   // found value.
        else if (searchValue < *list[mid]) 
            return binarySearch(list, firstIndex, mid - 1, searchValue);
        else
            return binarySearch(list, mid + 1, lastIndex, searchValue);
    }
    return -1;    //failed to find value
} 
```

调试器说 main 中的这一行是错误的来源：

```
// Search the person array.
cout << "Searching people array for person with name = 'Mickey Mouse': "
     << (binarySearch(person, "Mickey Mouse", 0, 7) != -1? "found it." : "did not find it.")
     << endl; 
```

这是我的人员类头文件，显示了重载的运算符：

```
#ifndef PERSON_H
#define PERSON_H

#include <string>
#include <iostream>

using namespace std;

namespace P03 {
class Person {...}; // end Person

/* Displays a Person to the screen.
 * Calls the toString() method.
 */
ostream& operator <<(ostream& out, const Person& person)
{
    return out << person.toString();
}

/* The following relational operators compare two instances of the
 * Person class. The comparison is made on the compound value of:
 * <lastName><space><firstName>
 */
bool operator ==(const Person& lhs, const Person& rhs)
{
    return lhs.getName() == rhs.getName();
}

    /*other operators*/
    ...

} // end namespace P03

#endif 
```

不确定是否需要更多我的代码。如果需要，我会更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T22:30:31.283

你打电话时

```
binarySearch(person, "Mickey Mouse", 0, 7) 
```

在`binarySearch`中，`T`它的类型`person`是一个指针数组，并且`V`是`const char*`。然后在你的身体里

```
searchValue == *list[mid] 
```

这是`const char*& == *person[x]`，这就是为什么你得到错误，因为没有什么`operator==(const char*, X)`是`X`什么`*person[x]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:32:31.707

您的模板类适用于类型`T`和`V`. 在您的`binarySearch`函数中，您获取 type 列表和 type`T`的搜索值`V`。然后你比较它们：`if (searchValue == *list[mid])`。这就是错误所在，因为您可能还没有`==`为 class实现一个`T`接受 type 参数的运算符`V`。

问题可以追溯到您的，您在其中作为 type和 a作为 type`cout`传入。您的类的运算符仅接受类型为 的右手操作数。换句话说，在表达式中，必须是类型。`Person``T``const char*``V``Person``==``Person``a == b``b``Person`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T22:41:06.007

该行将`if (searchValue == *list[mid])`类型 const V& 与 T 进行比较。V 是 C 字符串 ( `char*`)，假设 person 是`Person*`T 的数组是 a `Person`。您提供了一个`const Person&, const Person&`比较运算符，但代码需要一个 `const char*&, const Person`比较运算符。要么提供这样的运算符，要么从`binarySearch(person, "Mickey Mouse", 0, 7)`表达式中的字符串创建一个 Person。

# html - 如何设置单选按钮状态以使用 css 检查？

> ID：15328454
> 
> 赞同：4
> 
> 时间：2013-03-10T22:26:46.217
> 
> 标签：html, css, radio-button

我有一组单选按钮，默认选中一个。像这样：

```
 <input type="radio" name="radioButton" id="rd1" checked="">
    <input type="radio" name="radioButton" id="rd2">
    <input type="radio" name="radioButton" id="rd3">
    <input type="radio" name="radioButton" id="rd4">
    <input type="radio" name="radioButton" id="rd5"> 
```

我知道有办法用 javascript 添加选中的属性。我的问题是如何使用 css 将选中的属性添加到选定的单选按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:32:58.790

如果要更改**最初选中的框**，只需将“checked”属性移动到**HTML**中所需的元素，如果要设置**当前选中框的样式，**可以使用以下**CSS**选择器：`input[type=checkbox]:checked`如果要**更改除了单击复选框之外的任何其他操作的选中状态**，您必须使用**JS**。

“checked”`.checked`属性与 JS 中的实际属性不同：while`elem.getAttribute('checked')`只会返回，`null`除非该属性已在 HTML 中设置（也可以通过 JS 更改），但`elem.checked`始终返回一个布尔值（true/false），指示是否框当前已选中。

# javascript - 无法使用 jquery 调用 javascript 附加类

> ID：15328455
> 
> 赞同：1
> 
> 时间：2013-03-10T22:26:55.053
> 
> 标签：javascript, jquery

我无法调用在 jquery 中附加了 javascript 的类。它根本不响应它。

我在 html 后面加上这个：

```
$(function () {
var $scntDiv = $('#parts');
var i = $('#parts input').size();

$('#addField').on('click', function () {
    var part = '<div id="parts' + i + '"><hr /><input type="text" id="auto_part' + i + '" class="auto_part" name="auto_part' + i + '" placeholder="Dio" /><br/>' +
        '<textarea type="text" id="auto_description' + i + '" class="auto_description" name="auto_description' + i + '" placeholder="Vise informacija"></textarea> <br />' +
        '<a href="#" class="addPhoto' + i + '" style="display:block;">Add Photo</a><input type="file" name="auto_image" class="auto_image' + i + '" style="display:none;" /><a href="#" class="removefield">Izbrisi dio</a></div>';
    $scntDiv.after(part);
    $("#row_count").val(i);
    i++;
    return false;
});

$(document).on("click", ".removefield", function () {
    if (i > 2) {
        $("#row_count").val(i);
        $(this).parent('div').remove();
        i--;
    }
    return false;
}); 
```

});

因此它会创建 addPhoto2、addPhoto3 等。但是当我使用这个时：

```
$(function () {
    $(".addPhoto2").click(function(){
       console.log("Hello");
    });
}); 
```

它只是对 addPhoto2 没有任何作用。虽然我可以调用默认加载的 addPhoto 本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:35:35.810

您需要在创建元素时将事件附加到元素，因为如果在尝试连接该事件时元素不存在于 DOM 中，则简单事件将不起作用。您可以为此使用事件委托。但是，您已经有了一个很好的钩子。

您要做的是在将元素放置在此处后附加此事件：

```
$scntDiv.after(part);
$('.addPhoto' + i).click(function(){
    alert("!"); 
 }); 
```

这是一个工作演示：http: [//jsfiddle.net/eQbEt/](http://jsfiddle.net/eQbEt/)

# php - 如何通过文本区域

> ID：15328457
> 
> 赞同：0
> 
> 时间：2013-03-10T22:27:11.800
> 
> 标签：php, textarea

我试图通过

```
echo '<tr><td>Address:</td><td><textarea>'.$get_row['address'].'</textarea></td></tr>'; 
```

从这个while循环

```
 echo '<table border=0>';
    while ($get_row=mysql_fetch_assoc($getedit))
        {
            echo '<form method="POST" action="">';

            echo '<tr><td>Sr.No:</td><td><input type="text" value='.$get_row['SRNO'].' name="SRNO" readonly="readonly"></td></tr>';
            echo '<tr><td>First Name:</td><td><input type="text" value='.$get_row['fname'].' name="fname"></td></tr>';
            echo '<tr><td>Last Name:</td><td><input type="text" value='.$get_row['lname'].' name="lname"></td></tr>';
            echo '<tr><td>Phone No:</td><td><input type="text" value='.$get_row['phone'].' name="phone"></td></tr>';
            echo '<tr><td>E-mail address:</td><td><input type="text" value='.$get_row['email'].' name="email"</td></tr>';
            echo '<tr><td>Address:</td><td><textarea>'.$get_row['address'].'</textarea></td></tr>';
            echo '<tr><td><input type="submit" name="submit" value="save"></td><td></td></tr>';
            echo '</form>';                                 
        }
    echo '</table>'; 
```

但我得到一个错误。其他表格行顺利通过...

完整的代码是：

```
<!DOCTYPE html>
<html>
    <head>
        <title>List of users</title>
    </head>
<body>
    <?php
        $page='index.php';  

        mysql_connect("localhost","root","") or die (mysql_error());
        mysql_select_db("list") or die (mysql_error());

        if (empty($_POST) === false)
        {

            $fname= $_POST['fname'];
            $srno=  $_POST['SRNO'];

            mysql_query('update names set fname="'.$fname.'" where SRNO="'.$srno.'"');  

            header('Location:'.$page);
        }

        if(isset($_GET['edit']))
        {
            $getedit=mysql_query('SELECT SRNO, fname, lname, phone, email from names where SRNO='.mysql_real_escape_string((int)$_GET['edit']));

            echo '<table border=0>';
            while ($get_row=mysql_fetch_assoc($getedit))
                {
                    echo '<form method="POST" action="">';

                    echo '<tr><td>Sr.No:</td><td><input type="text" value='.$get_row['SRNO'].' name="SRNO" readonly="readonly"></td></tr>';
                    echo '<tr><td>First Name:</td><td><input type="text" value='.$get_row['fname'].' name="fname"></td></tr>';
                    echo '<tr><td>Last Name:</td><td><input type="text" value='.$get_row['lname'].' name="lname"></td></tr>';
                    echo '<tr><td>Phone No:</td><td><input type="text" value='.$get_row['phone'].' name="phone"></td></tr>';
                    echo '<tr><td>E-mail address:</td><td><input type="text" value='.$get_row['email'].' name="email"</td></tr>';
                    echo '<tr><td>Address:</td><td><textarea>'.$get_row['address'].'</textarea></td></tr>';
                    echo '<tr><td><input type="submit" name="submit" value="save"></td><td></td></tr>';
                    echo '</form>';                                 
                }
            echo '</table>';

        }

        $get=mysql_query('SELECT  SRNO, fname, lname, email, phone, address, comments from names ORDER BY SRNO ASC');

        if (mysql_num_rows($get)==0)
        {
            echo 'There are no entries';
        }
            else
        {
            echo '<table border=0 cellspacing=25 cellpadding=1>';
            echo'<tr><th>Sr. No</th><th>First Name</th><th>Last Name</th><th>Phone No</th><th>E-mail</th><th>Address</th><th>Comments!!</th><th>Modify</th></tr>';      
            while($get_row=mysql_fetch_assoc($get))
                {
                    echo '<tr><td>'.$get_row['SRNO'].'</td><td>'.$get_row['fname'].'</td><td>'.$get_row['lname'].'</td><td>'.$get_row['phone'].'</td><td>'.$get_row['email'].'</td><td>'.$get_row['address'].'</td><td>'.$get_row['comments'].'</td><td><a href="index.php?edit='.$get_row['SRNO'].'">Edit</a></td></tr>';

                }
            echo '</table>';
        }       
    ?>

</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:34:35.057

您需要将要在 while 语句中使用的所有名称放入 SELECT 子句中。

将地址添加到您的 SELECT：

```
SELECT address, SRNO, fname, lname, phone, email from names where SRNO='.mysql_real_escape_string((int)$_GET['edit']) 
```

# r - R - 将 AirPassenger 数据集转换为数字矩阵格式

> ID：15328458
> 
> 赞同：3
> 
> 时间：2013-03-10T22:27:16.403
> 
> 标签：r, matrix, numeric

我想使用 AirPassenger 集进行探索，例如制作热图。不幸的是，我没有把它变成数字矩阵格式。它甚至没有列

```
>ncol(AirPassengers)
NULL 
```

有人可以帮我把这个数据集转换成数字矩阵格式吗？通常，会使用 as.matrix 函数，但在这种情况下它不起作用。

这是数据集

```
>data(AirPassengers)
>AirPassengers
     Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
1949 112 118 132 129 121 135 148 148 136 119 104 118
1950 115 126 141 135 125 149 170 170 158 133 114 140
1951 145 150 178 163 172 178 199 199 184 162 146 166
1952 171 180 193 181 183 218 230 242 209 191 172 194
1953 196 196 236 235 229 243 264 272 237 211 180 201
1954 204 188 235 227 234 264 302 293 259 229 203 229
1955 242 233 267 269 270 315 364 347 312 274 237 278
1956 284 277 317 313 318 374 413 405 355 306 271 306
1957 315 301 356 348 355 422 465 467 404 347 305 336
1958 340 318 362 348 363 435 491 505 404 359 310 337
1959 360 342 406 396 420 472 548 559 463 407 362 405
1960 417 391 419 461 472 535 622 606 508 461 390 432 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T22:40:37.550

`AirPassengers`是一个时间序列（参见`?AirPassengers`或`str(AirPassengers)`

您可以通过以下方式转换为矩阵

```
apm <- matrix(AirPassengers, ncol = 12, byrow =TRUE,  dimnames = list( as.character(1949:1960),month.abb))) 
```

请注意，您已经告诉`matrix`它需要 12 列，并按行填充，因此这些列的组织方式与您在时间序列显示中看到的一样。将`dimnames`确保它有类似的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T23:29:33.113

值得注意的是，其中一些混淆源于`print`与数据关联的方法`AirPassengers`，这是一个时间序列，因此调用`print.ts`

比较`print.default`使用`ts`（时间序列）对象的结果：

```
> test <- ts(1:24,start=2008,frequency=12)

> test #this invokes print.ts
     Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
2008   1   2   3   4   5   6   7   8   9  10  11  12
2009  13  14  15  16  17  18  19  20  21  22  23  24

> print.ts(test)
     Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
2008   1   2   3   4   5   6   7   8   9  10  11  12
2009  13  14  15  16  17  18  19  20  21  22  23  24

> print.default(test)
 [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24
attr(,"tsp")
[1] 2008.000 2009.917   12.000
attr(,"class")
[1] "ts" 
```

# css - 冲洗权内的内容 div

> ID：15328461
> 
> 赞同：0
> 
> 时间：2013-03-10T22:27:24.680
> 
> 标签：css, html

我使用容器设计了我朋友的网站，`div`以将内容与 multi `div`s 居中。一切看起来都很好，并且所有`div`s 在 Dreamweaver“视图”中看起来都垂直对齐。但是，一旦我上传了所有内容，“内容”`div`就会以某种方式刷新到其余内容中。

我真的很沮丧，不知道代码哪里出错了。

这是 css：[http](http://tmaniatv.com/home.css) ://tmaniatv.com/home.css 这是网站：[tmaniatv.com](http://tmaniatv.com)

编辑：到目前为止，我已经能够将其冲洗干净，但仅作为临时解决方法（`margin-right:-200px;`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:44:04.243

我看到了你的问题。删除边距：-200px；从您的内容 div 中，然后将该内容 div 及其容器**移出**导航容器。您的内容 div 只是漂浮在您的导航中 :)

您的代码结构应如下所示：

```
<body>
    <div id="container">
        <div id="header">...header content..</div>
        <div id="nav">...nav content..</div>
        <div id="content">...move me!..</div>
        <div id="footer">...move me too!..</div>
    </div>
</body> 
```

我测试了它，这修复了它。

# r - 在 R 中使用 sub 或 gsub

> ID：15328462
> 
> 赞同：0
> 
> 时间：2013-03-10T22:27:29.147
> 
> 标签：r, gsub

我有一个文件，其中包含按年级和科目划分的问题和答案。我需要将路径插入问题中。路径由固定的 URL、主题、等级和图像名称（在问题中）组成。我已经能够构建路径，但无法弄清楚如何使用 sub 将旧值替换为新值。这是我到目前为止所拥有的：

```
 x<-read.csv( 'E:/My Documents/RED-985_second_try_2013022802.csv' , header =
 TRUE, sep = ",", fill = TRUE , quote="\"", na.strings="NA")

 ## Here we determine which rows contain a line that begins with 'img src',
 since those are the ones we want.
 target.rows <- grep(x[,3], pattern = "img src=.*\\.gif")
 new.string <- ""
 grade.string<-""
 subject.string<-""

 #Will need to look through each column by changing the value in the
 target.row command so that I bet all images

 for (i in 1: length(target.rows))
 {
    subject<-x[target.rows[i],12]
    grade<-x[target.rows[i],2]
    string.to.check <- x[target.rows[i],3]
    first.quote.pos <- gregexpr(pattern='"', string.to.check)[[1]][1] + 1
    second.quote.pos <- gregexpr(pattern='"', string.to.check)[[1]][2] - 1
    new.string[i] <- substring(string.to.check,first.quote.pos,second.quote.pos)                                                        

    if (nchar(grade) == 1)
    {
            grade<-paste(0,grade,sep="")
    }

    if (subject == 1)
    {
            subject<-"MA"
    }
    else
    {
        subject<-"RE"
    }

    grade.string[i] <-grade

    subject.string[i]<-subject

    url.string2<-sub(, paste("http://ABC.com/_practice/",
    subject,"-",grade,"/",new.string[i], sep = ""), x[[i],3])
    gsub("img src=.*\\.gif", "url.string2", x)

     }
     warnings(url.strings <- paste("http://ABC.com/_practice/",
     subject.string,"-",grade.string,"/",new.string, sep = "")) 
```

* * *

我收到这些错误消息：

```
Running E:\My Documents\Revolution\Project_One\Project_One\GSUB_Try.R ...
E:\My Documents\Revolution\Project_One\Project_One\GSUB_Try.R(38): Error:
unexpected ',' 
```

我做错了什么或者我应该如何看待它？非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:35:45.603

接近尾声，你有这个：

```
x[[i],3] 
```

那个逗号是出乎意料的。查看 的早期用法`x`，您可能想要这样：

```
x[target.rows[i],3] 
```

# php - 用 php 创建的 csv 还包含页面代码

> ID：15328466
> 
> 赞同：0
> 
> 时间：2013-03-10T22:27:42.150
> 
> 标签：php, csv

我在从读取文件中获取的数组创建 csv 文件时遇到了一些问题。

```
if(isset($_POST['expcsvmail'])){
        $filemail= '../config/mail.txt';
        $mail=file($filemail, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);
        $fp = fopen('exported_mails.csv', 'w+');
        foreach($mail as $df)
            fputcsv($fp, array($df));
        fclose($fp);
        header("Content-Type: text/csv");
        header("Cache-Control: no-store, no-cache");
        header("Content-Description: List of Emails");
        header("Content-Disposition: attachment;filename=exported_mails.csv");
        header("Content-Transfer-Encoding: binary");
        readfile('exported_mails.csv');
        unlink('exported_mails.csv');
    } 
```

这就是我所说的：

```
<form action="function.php" target="hidden_upload" class='formcor' method='post'>
    <input type="submit" id='expcsvmail' name='expcsvmail' value="Export Emails to CSV" class='sendval'/> 
```

现在我有两个行为：如果我在刷新页面后调用它（基本上代码在调用页面内），csv已经进入，在数组之后，页面的所有代码
否则如果我用它调用它一个外部文件我在文件末尾有一个换行符（不应该在那里）
有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:30:09.427

您需要在语句`exit()`末尾调用`if()`以停止处理页面的其余部分，或者在您的情况下，将 PHP 脚本作为纯文本打印到页面。

# php - var_dump() 是如何工作的？

> ID：15328467
> 
> 赞同：0
> 
> 时间：2013-03-10T22:28:00.400
> 
> 标签：php

我正在为绝对初学者使用 PHP 学习 PHP。按照第 5 章的教程，我遇到了一些奇怪的错误。我正在尝试在数据库中输出条目。当我加载页面时，我得到`"Notice: Undefined index: title in /home/craig/public_html/PHP tutorials/simple blog/index.php on line 42"`

并且：

`Notice: Undefined index: entry in /home/craig/public_html/PHP tutorials/simple blog/index.php on line 43`

现在，当我 var_dump($e) 我得到输出：

`array(1) { [0]=> array(4) { ["title"]=> string(13) "I like Cheese" [0]=> string(13) "I like Cheese" ["entry"]=> string(17) "this is some text" [1]=> string(17) "this is some text" } }`

据我所见，有索引“标题”和“条目”，并且正在提取数据库中的信息。那么，为什么我会得到这些未定义的索引错误？

这是 index.php 中的代码，如果需要，我也可以粘贴 functions.php，但据我所知，它可以正常工作。

```
<!DOCTYPE html
PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<?php 
include_once 'inc/functions.inc.php';
include_once 'inc/db.inc.php';

        //open a database connection 
        $db = new PDO(DB_INFO, DB_USER, DB_PASS);

        //Determine if an entry ID was passed in the URL
        $id = (isset($_GET['id'])) ? (int) $_GET['id'] : NULL;

        // load the entries

    $e = retrieveEntries($db, $id);

    //get the fulldisp flag and remove it from the array
    $fulldisp = array_pop($e);

    //saniteze the entry data
    $e = sanitizeData($e);

    ?>
<head>
<meta http-equiv="Content-Type"
content="text/html;charset=utf-8" />
<link rel="stylesheet" href="css/default.css" type="text/css" />
<title> Simple Blog </title>
</head>
<body>
<h1> Simple Blog Application </h1>
<div id="entries">
    <?php 

    // if the full display flag is set, show the entry
    if($fulldisp==1){
    var_dump($e);
    ?>

    <h2> <?php echo $e['title'] ?></h2>
    <p> <?php echo $e['entry']?></p>
    <p class="backlink">
        <a href="./">Back to Latest Entries</a>
        </p>    

        <?php  
    }//end if statement

    //if the full display flag is 0, format linked entry titles 
    else{
        //loop through each entry
        foreach($e as $entry){
        ?>

        <p> <a href="?id=<?php echo $entry['id']?>">
                <?php echo $entry['title'] ?>
        </a>
        </p>
    <?php   
        } //end the foreach loop
    } // end the else
    ?>  

    <p class="backlink">
        <a href="admin.php">Post a new Entry</a>
        </p>
        </div>
    </body>
</html> 
```

无论是要显示一项还是需要运行循环以输出许多项，我都会收到这些错误。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:32:30.850

这是因为 $e 是一个多维数组——它是一个数组数组。在您的 foreach 循环中，$entry 引用多维数组 $e 的每个子数组。在条件语句的第一个分支中，当您确实想要引用 $e 中的第一个数组时，您正在引用多维数组 $e。

试试这个：

```
if($fulldisp==1){

   $entry=$e[0]; //$entry is now referencing the first entry in $e rather than $e itself
    ?>

    <h2> <?php echo $entry['title'] ?></h2>
    <p> <?php echo $entry['entry']?></p>
    <p class="backlink">
        <a href="./">Back to Latest Entries</a>
        </p>    

        <?php  
} 
```

# ruby-on-rails-3 - zsh heroku 和环境变量

> ID：15328468
> 
> 赞同：1
> 
> 时间：2013-03-10T22:28:06.730
> 
> 标签：ruby-on-rails-3, heroku, mailer

我不知道为什么我无法在我的 heroku 服务器上设置我的 gmail env 变量。[我运行并根据他们的文档](https://devcenter.heroku.com/articles/config-vars#setting-up-config-vars-for-a-deployed-application)轻松设置用户名，通过运行

```
heroku config:add GMAIL_USERNAME=usersname@gmail.com 
```

但是，现在当我尝试设置密码以配合我在邮件中使用时

```
heroku config:add GMAIL_PASSWORD=mypassword 
```

我收到错误

```
zsh: no matches found: GMAIL_PASSWORD=mypassword 
```

我不知道为什么我不能以这种方式设置这个变量，更不用说为什么我从我的 shell 中得到这个输出了。

关于我设置的这一部分的一些事情。

-`loca_env.yml`用于邮件用户名和密码，已签入`.gitignore`（因此在 heroku 服务器上设置。）

邮件初始化器-

```
ActionMailer::Base.smtp_settings = {
    :enable_starttls_auto => true,
    :address => "smtp.gmail.com",
    :port => "587",
    :domain => "gmail.com",
    :authentication => :plain,
    :user_name => ENV["GMAIL_USERNAME"],
    :password => ENV["GMAIL_PASSWORD"]
}

ActionMailer::Base.default_url_options[:host] = "myapp.herokuapp.com" 
```

它在本地可以正常邮寄，现在我正在尝试在生产环境中进行测试，而无需签`local_env.yml`入版本控制。一些简单的我不明白？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T11:46:45.797

您几乎总是可以诱使您的 shell 以不同的方式处理特殊字符。对于 zsh，试试这个：`heroku config:add X='erwrewr#'` 单引号将确保大多数特殊字符被抑制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:52:49.617

直到又搞砸了 30 分钟，我才考虑到的东西。

我的实际密码以“#”结尾，这导致了我的 shell 错误。对于在这种极端情况下发现自己的任何人..不确定哪些特殊字符不允许您在不同的 shell 中设置，但要检查您是否遇到类似错误。

# python - 在 Windows 上关闭或“重启”以太网卡的系统调用？

> ID：15328474
> 
> 赞同：-1
> 
> 时间：2013-03-10T22:28:18.847
> 
> 标签：python, windows

我正在尝试编写一个 python 脚本来进行一系列系统调用以快速更改 IP 地址。必须发生的一系列事件的一部分是进入 ctrl 面板中的网络连接，然后单击关闭本地连接，然后再单击它。似乎必须有一个系统调用来完成这项任务。它是什么？或者可能有一个python特定的命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T23:14:11.050

```
import subprocess

subprocess.call(['ipconfig', '/renew']) 
```

使用[`subprocess`](http://docs.python.org/2/library/subprocess.html)(Python) 和[`ipconfig`](http://compnetworking.about.com/od/workingwithipaddresses/a/ipconfig.htm)(Windows)。尽管如果您的 DHCP 服务器选择为您提供一个 IP 地址，您只会获得不同的 IP 地址，但请联系您的系统管理员。

# ios - 在两个 iDevice 之间直接发送数据

> ID：15328475
> 
> 赞同：2
> 
> 时间：2013-03-10T22:28:18.930
> 
> 标签：ios, networking

我目前正在尝试直接在两个 iDevice 之间发送数据，因为我没有资源将服务器放在中间。我读过一些关于 GameKit 的文章，它提供了实现这一目标的机会，但由于我的应用程序不会成为游戏，这仍然是一个选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T09:49:20.123

是的，您可以使用 GameKit 发送任何数据，但请确保数据不要太大。您可以使用蓝牙拆分数据并在多条消息中发送。

你必须实现[GKPeerPickerControllerDelegate](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKPeerPickerControllerDelegate_Protocol/Reference/Reference.html)和[GKSessionDelegate](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKSessionDelegate_Protocol/Reference/Reference.html)。

gamekit 的好[教程](http://mobile.tutsplus.com/tutorials/iphone/bluetooth-connectivity-with-gamekit/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-15T10:25:08.880

尝试 iOS 7 引入的 Multipeer 连接框架。它适用于 Wifi 和蓝牙

检查此链接如何锻炼它。

[http://www.appcoda.com/intro-multipeer-connectivity-framework-ios-programming/](http://www.appcoda.com/intro-multipeer-connectivity-framework-ios-programming/)

# javascript - 单击时显示/隐藏元素

> ID：15328476
> 
> 赞同：0
> 
> 时间：2013-03-10T22:28:19.633
> 
> 标签：javascript

我只是在制作一个简单的练习脚本，当您单击 h1 标题时应该显示一个段落。出于某种原因，它在本地无法正常工作，但我在 jsfiddle 中可以正常工作。

[http://jsfiddle.net/q5PF3/](http://jsfiddle.net/q5PF3/)

HTML：

```
 <h1 id="clicker">Click me</h1>
 <p id="hidden">Ta daaaa!</p> 
```

CSS：

```
#hidden {
    display: none;
} 
```

Javascript：

```
var click = document.getElementById("clicker");
var xtra = document.getElementById("hidden");
click.onclick = function() {
if(xtra.style.display == "none") {
    xtra.style.display = "inline";
}
else{
    xtra.style.display = 'none';
}
}; 
```

# c# - 将 Windows 窗体颜色从一种更改为另一种

> ID：15328479
> 
> 赞同：0
> 
> 时间：2013-03-10T22:28:29.597
> 
> 标签：c#, .net, winforms

我目前正在关注 Head First C#，但我经常自己玩。我遇到了我无法解决的情况。我想`this.BackColor`从 MediumBlue 更改为通过绿色 0 - 255 并通过按钮 I/O 返回控制台。问题是我无法让颜色停止步进并返回到 MediumBlue。

```
private void btnClr_Click(object sender, EventArgs e)
    {
        int fClr = 0;
        while (Visible)
        {
            if (fClr == 0)
            {
                fClr++;
                for (int nBackClr = 0; nBackClr < 255 && Visible; nBackClr++)
                {
                    this.BackColor = Color.FromArgb(nBackClr, 255 - nBackClr, nBackClr);
                    Application.DoEvents();
                    Thread.Sleep(2);
                }
                for (int z = 255; z >= 0 && Visible; z--)
                {
                    this.BackColor = Color.FromArgb(z, 255 - z, z);
                    Application.DoEvents();
                    Thread.Sleep(2);
                }
            }
            else
            {
                fClr--;
                this.BackColor = Color.MediumBlue;
                Application.DoEvents();
                Thread.Sleep(1);
            }
        }
    } 
```

我想知道的另一件事是如何`BackColor`通过整个调色板。

编辑：S/n*应用 JABFreeware 的解决方案后。*我添加了一个断点来查看发生了什么，并`fClr`在我第一次单击时获取 1 的值`btnClr_Click`。但是，当我再次单击它时，它`fClr`会变为 0，但随后又会立即变为 1。不确定这是否与`while (Visible)`. ..挠头..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:42:30.660

您的问题之一`int fClr = 0;`是在按钮单击事件处理程序内部，因此每次单击按钮时，它都会重置为 0。将变量移到单击事件之外。

像这样：

```
 int fClr = 0;
private void btnClr_Click(object sender, EventArgs e)
    {
        while (Visible)
        {
            if (fClr == 0)
            {
                fClr++;
                for (int nBackClr = 0; nBackClr < 255 && Visible; nBackClr++)
                {
                    this.BackColor = Color.FromArgb(nBackClr, 255 - nBackClr, nBackClr);
                    Application.DoEvents();
                    Thread.Sleep(2);
                }
                for (int z = 255; z >= 0 && Visible; z--)
                {
                    this.BackColor = Color.FromArgb(z, 255 - z, z);
                    Application.DoEvents();
                    Thread.Sleep(2);
                }
            }
            else
            {
                fClr--;
                this.BackColor = Color.MediumBlue;
                Application.DoEvents();
                Thread.Sleep(1);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T23:38:59.293

使用计时器更容易。这样，您的 UI 将保持响应，而无需使用`DoEvents`.

```
const int ColorStep = 16;

private Timer _timer;
private int _r, _g, _b;

public frmRotateColors()
{
    InitializeComponent();
}

private void btnStart_Click(object sender, EventArgs e)
{
    _r = 0;
    _g = 0;
    _b = 0;

    // Start the timer
    _timer = new Timer { Interval = 10 };
    _timer.Tick += Timer_Tick;
    _timer.Start();
}

private void Timer_Tick(object sender, EventArgs e)
{
    if (_b >= 256) { 
        _timer.Dispose(); // Stop the timer.
        this.BackColor = SystemColors.Control; // Reset the background color.
    } else {
        this.BackColor = Color.FromArgb(_r, _g, _b);

        // Get next color
        _r += ColorStep;
        if (_r >= 256) {
            _r = 0;
            _g += ColorStep;
            if (_g >= 256) {
                _g = 0;
                _b += ColorStep;
            }
        }
    }
} 
```

在这里，我通过增加红色来旋转所有颜色。如果我超出红色范围（0 - 255），我会重置红色并增加绿色。如果超出绿色范围，我会重置绿色并增加蓝色。最后，如果超出蓝色范围，我将终止该过程。

# iphone - 获取相对于当前方向的视图框架大小

> ID：15328482
> 
> 赞同：1
> 
> 时间：2013-03-10T22:28:54.063
> 
> 标签：iphone, ios, uiviewcontroller

如果我的应用同时支持纵向和横向模式并且我以横向模式启动我的应用，我会看到 UIViewController 的视图框架大小仍然是 viewDidAppear 中纵向的尺寸。（例如：768x1024 而不是 748x1024）

当我创建和显示 viewController 时，我看到事件按此顺序出现：

```
shouldAutorotateToInterfaceOrientation // viewcontroller hasn't received rotate event yet
viewWillLayoutSubviews
viewDidLoad
shouldAutorotateToInterfaceOrientation // viewController now asked to change orientation
viewDidAppear
viewWillLayoutSubviews 
```

通过这些事件序列，视图的帧大小仍然是 Portrait 的（尽管 bounds 是正确的）。

我什么时候可以期望正确设置视图的框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:37:04.817

您必须使用[**Cocoa 自动布局系统**](https://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html)来定义用户界面元素的布局约束。约束表示用户界面元素之间的关系，例如“这些视图从头到尾排列”或“此按钮应与此拆分视图子视图一起移动”。在布局用户界面时，约束满足系统以最接近约束的方式排列元素。

观看[此视频](https://developer.apple.com/videos/wwdc/2012/?id=202)了解更多详情

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-10T22:32:46.697

框架不旋转，只有在您旋转设备时框架内的边界才会旋转。检查使用：

```
self.view.bounds 
```

当您旋转设备时，您会看到它发生了变化。

您需要阅读 View Programming 指南：

[http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/WindowsandViews/WindowsandViews.html#//apple_ref/doc/uid/TP40009503-CH2-SW6](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/WindowsandViews/WindowsandViews.html#//apple_ref/doc/uid/TP40009503-CH2-SW6)

这是根本。

# xcode - 在 Vmware 工作站上的 Mac 中为 appstore 开发 iOS 应用程序

> ID：15328484
> 
> 赞同：18
> 
> 时间：2013-03-10T22:28:58.400
> 
> 标签：xcode, macos, ios-simulator, vmware-workstation

如果我在 Windows 计算机上的虚拟环境 (VMware) 中安装 Mac OS，我能否在虚拟环境中安装 Xcode 并使用它来开发 iOS 应用程序？

更具体地说，是否可以在 VMware 中运行模拟器？它会像在普通 MAC 计算机上一样好用吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T22:35:04.777

是的，它会。但可能存在一些许可证问题（如果您拥有许可证，则只能在虚拟环境中安装 MAC OS 的副本）。在 VMWare 上安装 MAC OS 可能还会遇到一些困难。但是一旦你通过了它们，Xcode 和 iPhone 模拟器应该可以正常工作。

您可以查看这篇文章以获取有关如何在 VMWare 中安装 Mountain Lion 的说明：

[使用 VMware Image 在 PC 上轻松运行 Mac OS X 10.8 Mountain Lion Retail – 简单步骤](http://www.sysprobs.com/easily-run-mac-os-x-10-8-mountain-lion-retail-on-pc-with-vmware-image)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-10T22:37:56.030

可以在 VMWare 上运行 Mac OS 的 Windows 机器上使用 XCODE 开发 iOS 应用程序，但我建议至少有 8-16GB（或更多）的 RAM。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-12T09:00:56.957

是的，您可以为 xcode 使用虚拟环境，但我建议您至少应该有 8GB RAM，如果您不这样做，那么不要进行虚拟化，因为它会降低速度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-07T22:38:00.873

是的，有可能！使用 VMWare 12.5 在 Windows 10 Pro（64 位）上测试 - 模拟 OS-X 10.11.6（El Captain）和 X-code 8.0

# .htaccess - .htaccess 重定向，如果 url 中的文件夹名称

> ID：15328487
> 
> 赞同：4
> 
> 时间：2013-03-10T22:29:45.653
> 
> 标签：.htaccess, url, rewrite

使用 .htaccess，我希望将 URL 从一个文件夹重定向到另一个文件夹。

例如，如果用户请求“forbiddenFolder”`http://www.mysite.com/forbiddenFolder/subfolder`

或者

`http://www.mysite.com/forbiddenFolder/somefile.php`或者

`http://www.mysite.com/forbiddenFolder/somefile.swf`或者

`http://www.mysite.com/forbiddenFolder/somefile.f4v`.

他们应该被重定向到`http://www.mysite.com/forbidden.php`

我不想锁定目录本身，因为那里有需要的资源。重定向应该仅基于 URL 字符串或者如果用户从 www.anothersite.com 创建脚本并从[http://www.mysite.com/forbiddenFolder 获取文件](http://www.mysite.com/forbiddenFolder)

我相信应该实施重写条件......？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T00:50:21.903

你可以试试这个：

```
Options +FollowSymLinks -MultiViews                                        
RewriteEngine On                                                           
RewriteBase /                                                              
RewriteCond %{REQUEST_URI}  ^/forbiddenFolder     [NC]                     
RewriteCond %{REQUEST_URI}  /[\w]+\.(php|swf|f4v) [NC,OR]                  
RewriteCond %{REQUEST_URI}  /[^.]+/?$             [NC]                     
RewriteCond %{REQUEST_URI}  !forbidden\.php       [NC]                     
RewriteRule .*              /forbidden.php        [L,NC] 
```

内部映射

`http://www.mysite.com/forbiddenFolder/subfolder` 或者

`http://www.mysite.com/forbiddenFolder/somefile.php` 或者

`http://www.mysite.com/forbiddenFolder/somefile.swf` 或者

`http://www.mysite.com/forbiddenFolder/somefile.f4v`

到：

`http://www.mysite.com/forbidden.php`

对于永久和可见的重定向，替换`[L,NC]`为`[R=301,L,NC]`

* * *

### 选项

使用经过修改的传入 URL 结构。

例如：

`http://localhost/trafficticket.tv/Sites/public_html/forbiddenFolder/somefile.swf`

用这个替换前一个规则块：

```
Options +FollowSymLinks -MultiViews                                        
RewriteEngine On                                                           
RewriteBase /                                                              
RewriteCond %{REQUEST_URI}  /forbiddenFolder      [NC]                     
RewriteCond %{REQUEST_URI}  /[\w]+\.(php|swf|f4v) [NC,OR]                  
RewriteCond %{REQUEST_URI}  /[^.]+/?$             [NC]                     
RewriteCond %{REQUEST_URI}  !forbidden\.php       [NC]                     
RewriteRule .* /trafficticket.tv/Sites/public_html/forbidden.php [L,NC] 
```

要使用任何其他 URL，唯一的要求是`/forbidden.php`在重写规则中添加正确的段路径。在这种情况下，该段是

`/trafficticket.tv/Sites/public_html`

但它可能是任何东西，也可能什么都不是，就像原来的问题一样。

# javascript - javascript原型逻辑

> ID：15328488
> 
> 赞同：1
> 
> 时间：2013-03-10T22:29:48.760
> 
> 标签：javascript

我正在[为 web 开发人员阅读专业的 javascript](https://rads.stackoverflow.com/amzn/click/com/0764579088)，他们提供以下内容：

此代码有效：

```
var friend = new Person();

Person.prototype.sayHi = function(){
    alert("hi");
};

friend.sayHi(); 
```

但这段代码没有：

```
function Person(){
}

var friend = new Person();

Person.prototype= {
   constructor: Person,
   name: "Nicholas",
   age: 29,
   job: "Software Engineer",
   sayName: function () {
       alert(this.name);
   }
};

friend.sayName(); 
```

我知道，在第二个示例中，原型是在`friend`实例化变量之后定义的，但在这种情况下，为什么第一个示例有效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T22:33:55.447

在第一个片段中，您将添加到已经提供给实例的现有原型。在第二个中，您正在为 的创建一个新原型`Person`，该原型与已经提供给 的原型对象不同`friend`。

如果要向原型添加新函数，则可以在调用该函数之前的任何时间进行。需要在实例化新实例之前将新对象分配给构造函数的原型。

# python - python - 程序结束后文件内容消失

> ID：15328499
> 
> 赞同：0
> 
> 时间：2013-03-10T22:31:14.920
> 
> 标签：python, file

我有一个绑定到键的函数此函数将某些内容写入文件，因为它应该：

```
def saveGame():
from modules.logic import game
from modules.logic.player import Player
from modules.logic.light import Light
filename = str(time.time())
data = open("myData", "a")
lis1 = []
if (len(game.active_entities)>0):
        for key in game.active_entities:
            if (not isinstance(game.active_entities, Light)):
                if(not isinstance ( game.active_entities, Light)):
                        ent = game.active_entities[key]
                        ent2 = ent.networknew()
                        lis1.append(ent2) 
        lis1.insert(0, game.get_player().networknew())
        lis1.insert(0,game.seed)
        saved = open(filename, "w")          
        pickle.dump( lis1,saved, 2)
        try:
            data.write(filename+"\n")
        except Exception as e:
            print e 
```

按下某个键时会调用 savegame。它创建一个新文件，在其中保存一些内容（保存的内容在这里并不重要），然后将新文件的名称保存在另一个文件中。

但是，当我结束并重新启动程序时，第二个文件是空的，即使如此，只要程序仍在运行，它的内容就正确。我想在程序关闭后仍然拥有内容。那可能吗？如何？

对于你的问题：

我通过打开一个窗口开始我的游戏：

```
class StartWindow:

def __init__(self):

    data = open("myData", "w")
    data.close()
    data = open ("myData", "rb")
    self.master = Tk()       
    if (not data.readline()== ""):
        optsdumped = data.readlines()[0]
        print optsdumped
        opts = cPickle.loads(optsdumped)
        print opts
        variable = StringVar(self.master)
        variable.set("one") # default value
        self.w = OptionMenu(self.master, variable, "one", "two", "three").grid(row = 8, sticky = W)
        #self.w.grid(row = 7, sticky = W)
        print "optionmenu"
    self.l0 =Label (self.master,fg = "blue", text = "W=jump", bg = "magenta", font = ("comic sans ms", 20, "bold")).grid(row=0, sticky = W)
    self.l1=Label (self.master,fg = "blue", text = "A=left",bg = "magenta",font = ("comic sans ms", 20, "bold")).grid(row = 1, sticky = W)
    self.l2=Label(self.master,fg = "blue", text = "D=Duck", bg = "magenta",font = ("comic sans ms", 20, "bold")).grid(row=2, sticky = W )
    self.l3=Label(self.master,fg = "blue", text = "Mouse = Shoot", bg = "magenta",font = ("comic sans ms", 20, "bold")).grid(row=3, sticky = W)
    self.l4=Label(self.master,fg = "blue", text = "S=Duck", bg = "magenta",font = ("comic sans ms", 20, "bold")).grid(row=4, sticky = W)
    self.l5=Label(self.master,fg = "blue", text="Seed:", bg = "magenta",font = ("comic sans ms", 20, "bold")).grid(row=5, sticky = W)
    self.master.minsize(50, 50)
    self.master.weight = 2
    self.master.title("Fluffocalypse")
    print self.master.configure(bg = "magenta")
    self.e1 = Entry(self.master)
    self.e1.grid(row=5, column=1, sticky = W)
    self.b1 =Button(self.master, text = "Start", command = self.startGameNormally).grid(row = 6, sticky = W)
    self.b2 = Button(self.master, text = "alten Spielstand laden", command =self.loadOldGame).grid(row = 7, sticky = W)
    mainloop() 
```

好吧，窗口就在那里，但不知何故，ifclause 永远不会满足，myData 显然是空的，即使我手动打开它也是如此。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T23:29:46.213

`w`每次运行程序时，您都会打开带有标志的文件。这会破坏上一次运行保存的数据。使用附加模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T22:35:31.273

您永远不会显式关闭文件，因此它的内容可能从未真正写入。您需要显式`saved.close()`或最好使用上下文管理器，例如：

```
with open(filename, "w") as saved: 
    pickle.dump( lis1,saved, 2)
    try:
        data.write(filename+"\n")
    except Exception as e:
        print e 
```

`data`即使它只是为了阅读而打开，也这样做是个好主意。

# ruby-on-rails - 使用 Devise + 可确认注册后将用户重定向到特定页面

> ID：15328502
> 
> 赞同：0
> 
> 时间：2013-03-10T22:31:38.970
> 
> 标签：ruby-on-rails, devise, devise-confirmable

我使用 Devise 进行用户注册，并使用 Confirmable 执行电子邮件验证。

用户注册后，我想将他们重定向到一个 URL，说明他们需要检查他们的电子邮件并单击发送的链接。我正在使用 Devise 的`:authenticate_user!`方法来确保用户在查看网站内容之前登录。

根据[这个文件](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/registrations_controller.rb#L2)，看起来我可以定义 a`after_inactive_sign_up_path_for(resource)`和 a`after_sign_up_path_for(resource)`来控制这个重定向。

这是我的应用程序控制器：

```
class ApplicationController < ActionController::Base
protect_from_forgery
before_filter :authenticate_user!, :except => [:after_inactive_sign_up_path_for,     :after_sign_up_path_for]

def after_sign_up_path_for(user)
  confirm_path
end

def after_inactive_sign_up_path_for(user)
  confirm_path
end

end 
```

但它不起作用。`confirm_path`在我的`static_pages`控制器中，无需登录即可访问，因为我已 `skip_before_filter :authenticate_user!`包含

当用户注册时，`:authenticate_user!`助手会启动并重定向到登录页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T22:38:53.707

您是否尝试过像这样覆盖注册控制器：

```
class RegistrationsController < Devise::RegistrationsController
  protected

  def after_inactive_sign_up_path_for(resource)
    '/an/example/path'
  end
end 
```

[https://github.com/plataformatec/devise/wiki/How-To:-Redirect-to-a-specific-page-on-successful-sign-up-(注册)](https://github.com/plataformatec/devise/wiki/How-To:-Redirect-to-a-specific-page-on-successful-sign-up-(registration))

# ubuntu - 如何从 GNOME 下的 HUD DBus 服务中获取结果？

> ID：15328506
> 
> 赞同：3
> 
> 时间：2013-03-10T22:31:44.753
> 
> 标签：ubuntu, dbus, hud, gnome-3

我想（以编程方式）访问 GNOME 3.6 下 Ubuntu 平视显示器（HUD）菜单服务的结果。我一直在尝试使用 HUD 的 DBus 界面并取得了一些成功，但无法让它在 Unity 之外工作。例如，以下 Python 脚本在 Unity 下登录时从终端运行时会显示一些结果：

```
#!/usr/bin/env python
import dbus

session_bus = dbus.SessionBus()
proxy_obj = session_bus.get_object('com.canonical.hud', '/com/canonical/hud')
hud_iface = dbus.Interface(proxy_obj, dbus_interface='com.canonical.hud')
query_result = hud_iface.StartQuery("ope", 5)

for res in query_result[1]:
    print res[0].encode('utf8')

hud_iface.CloseQuery(query_result[2]) 
```

在 Unity 下运行它（在 12.10 中）我得到：

```
$ ./hud.py
File &gt; <b>Open</b> Tab
File &gt; <b>Open</b> Terminal
dropbox &gt; <b>Open</b> Dropbox Folder
View &gt; Zoom <b>Out</b>
Terminal &gt; Set Character Encoding &gt; Add <b>or</b> Remove… 
```

...但是在 GNOME 3.6 下我没有得到任何结果（没有错误，什么都没有）。

看起来涉及到这些服务，因为它们在 Unity 而不是 GNOME 下不断运行：

```
/usr/lib/indicator-appmenu/hud-service
/usr/lib/x86_64-linux-gnu/indicator-application-service
/usr/lib/indicator-(whatever)/indicator-(whatever)-service 
```

但是如果我在 GNOME 下启动它们，它们很快就会退出

```
$ /usr/lib/indicator-session/indicator-session-service

(process:4921): libindicator-WARNING **: No watchers, service timing out. 
```

如果我设法在那个狭窄的时间窗口内运行我的脚本，那么我就会得到结果！但是如何让这些服务保持运行呢？首先是什么开始了他们？它们是否包含应用程序菜单内容，还是由其他服务提供？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-29T10:57:08.247

我认为该项目中没有任何活动。然而，很多人真的很喜欢 gnome 的 hud 的想法！您在此处发布的脚本是否包含了所有相关工作，或者您是否还有一些更好的文件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:25:38.417

看起来您使用了错误的服务名称。我现在没有可用的 GNOME 3.6，但你可以列出 dbus 服务

```
dbus-send --session --dest=org.freedesktop.DBus --type=method_call --print-reply /org/freedesktop/DBus org.freedesktop.DBus.ListNames 
```

此外，您应该`export UBUNTU_MENUPROXY=libappmenu.so`在启动 Gnome 之前，或在[/etc/environment中定义它](https://help.ubuntu.com/community/EnvironmentVariables)

还要检查您是否安装了[indicator-appmenu](http://pkgs.org/ubuntu-12.04/ubuntu-proposed-main-i386/indicator-appmenu_0.3.97-0ubuntu1.2_i386.deb.html)。

但是在[这里](https://wiki.ubuntu.com/Unity/HUD)阅读之后，我猜 GNOME 桌面不使用这样的服务：

![在此处输入图像描述](../Images/e2910524a7dbdc223f4df7552c6b76dc.png)

因此，我确认您应该寻找另一个针对 Gnome 的 DBus 服务（使用不同的 API）。

# c - 在 C 中通过引用调用

> ID：15328507
> 
> 赞同：2
> 
> 时间：2013-03-10T22:32:01.850
> 
> 标签：c

在经典的交换函数中，当我们传入两个指针时，指针指向的值将交换。但是在这个简单的功能中

```
int leng (char *a)
{
    int n;
    for (n=0; *a!='\0'; a++)
        n++;
    return n;
} 
```

调用函数后，指针仍然指向数组的第一个元素，而不是最后一个元素。这是为什么？它与交换功能有何不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T22:33:21.037

指针本身就是一个对象。在这种情况下，您通过值而不是通过引用传递指针，因此对指针本身的任何更改都不会反映在函数之外。如果您要更改函数中指针指向的对象，这些更改将在函数外部持续存在。

尝试：

```
int leng (char** a)
{
    int n;
    for (n=0; **a!='\0'; (*a)++)
        n++;
    return n;
}

leng(&pointer); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T22:34:52.020

You are passing in a pointer by value. The pointer value is copied on to the stack during the function call. You are incrementing that stack variable, which then goes away when the function returns.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T22:33:35.360

它实际上与`swap`函数相同：`swap`函数允许您更改指向的值，但不允许您更改指针本身。同样，`leng`可以更改字符串中`a`指向的字符，但更改为`a`自身（将其更改为指向不同的数组元素）将不会被调用者看到。

如果你想改变它，你可以这样写：

```
int leng (char **a)
{
    int n;
    for (n=0; **a!='\0'; *a++)
        n++;
    return n;
} 
```

并传入一个*指向* `a`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T22:33:49.290

您可能需要一个指向指针的指针，而不仅仅是一个常规指针。（指针本身是按值传递的，您正在更改传入的指针副本的值）。

# c# - 在类声明中使用#ifdef 使实现仅在调试期间可用以进行单元测试

> ID：15328510
> 
> 赞同：2
> 
> 时间：2013-03-10T22:32:08.317
> 
> 标签：c#, unit-testing, nunit, moq

我从单元测试开始，我想为一些已经实现的类编写测试。

我们正在为这个项目中的接口开发，我想它在编写单元测试时会有所帮助。但是接口实现被标记为**内部**的，到目前为止我发现测试实现的最佳解决方案是：

```
#if DEBUG
public class CreateRequestService : DomainServiceBase, ICreateRequestService
#else
internal class CreateRequestService : DomainServiceBase, ICreateRequestService
#endif
{ 
```

你对那个怎么想的？我试图弄清楚如何在单元测试中使用 autofac，但对我来说闻起来很香。这是一个好习惯吗？

# 更新

我忘了指定我正在使用的工具。我正在使用 C# 4.5、NUnit 和 Moq！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T22:41:11.533

几年前，我曾经隐藏过类似的类和接口。停止这样做，只有在我开发库时才会使用它。

如果您使用.NET，您可以制作“朋友程序集”。这样单元测试程序集可以看到生产程序集的内部成员。但是为此，您需要访问生产程序集中的代码（您需要添加程序集属性）。

```
[assembly: InternalsVisibleTo("AssemblyB")] 
```

[http://msdn.microsoft.com/en-us/library/0tke9fxk.aspx](http://msdn.microsoft.com/en-us/library/0tke9fxk.aspx)

另一种选择是简单地将类和接口公开并将它们移动到

```
 MyProduct.xxx.yyy.Internal 
```

命名空间。这样您就可以进行测试，并且团队的每个成员都知道它不应该使用这些成员。

# emacs - emacs org-mode 中的 ISO 嵌入

> ID：15328515
> 
> 赞同：8
> 
> 时间：2013-03-10T22:32:40.723
> 
> 标签：emacs, include, org-mode, transclusion

问：有什么办法可以在 emacs org-mode 中进行嵌入？

通过“嵌入”，我的意思是，在 fileA.org 和 fileB.org 中的某个位置，“包括”fileInc.org - 并且来自 fileInc.org 的树出现在这两个地方。其实出现，不只是挂。（可能有条件包含、转换，例如嵌套深度（***数））。

我知道#setupfile，但这似乎只适用于模式，而不是真正的文本。

我知道[http://orgmode.org/manual/Include-files.html](http://orgmode.org/manual/Include-files.html)，但 AFAIK 他们只在出口时工作。

我正在寻找在普通 emacs org-mode 缓冲区中工作的东西。（实际上，在非组织模式缓冲区中工作的东西可能很好。）

我有要包含在多个文件中的样板。

这样的事情存在吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-12T02:22:58.787

嗯...我认为不存在这样的东西，但是编写一个动态块来做到这一点很容易。以下 elisp 对我有用：

```
(defun org-dblock-write:transclusion (params)
  (progn
    (with-temp-buffer
      (insert-file-contents (plist-get params :filename))
      (let ((range-start (or (plist-get params :min) (line-number-at-pos (point-min))))
            (range-end (or (plist-get params :max) (line-number-at-pos (point-max)))))
        (copy-region-as-kill (line-beginning-position range-start)
                             (line-end-position range-end))))
    (yank))) 
```

然后要包含给定文件中的行范围，您可以创建一个动态块，如下所示：

```
 #+BEGIN: transclusion :filename "~/testfile.org" :min 2 :max 4
 #+END: 
```

并自动填充`C-c C-x C-u`. 跳过最小和最大参数以包含整个文件。请注意，您可以绑定`org-update-all-dblocks`到挂钩，以便在您访问文件或保存时更新此范围。

有关动态块的更多信息，请访问[http://orgmode.org/org.html#Dynamic-blocks](http://orgmode.org/org.html#Dynamic-blocks)。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-13T06:25:10.710

您可能对包感兴趣`org-transclusion`。[您可以在此处](https://github.com/nobiot/org-transclusion)找到 Github 存储库。

# ruby-on-rails - 使用 simple_form 更改默认错误消息

> ID：15328516
> 
> 赞同：6
> 
> 时间：2013-03-10T22:32:44.610
> 
> 标签：ruby-on-rails, simple-form

我没有设法从简单表单更改默认错误消息，我尝试编辑简单表单语言环境文件，但它似乎被忽略了

这是我的语言环境文件：

```
#config/locales/simple_form.en.yml
en:
  simple_form:
    error_notification:
      default_message: "A custom message:" 
```

但我仍然收到“请查看以下问题：”

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-09T23:43:55.303

改变你`:default_message`的`:your_model_name`

正如您[在源代码](https://github.com/plataformatec/simple_form/blob/87323fd625802f3aea7fd7d8a2fd64016b18cdaa/lib/simple_form/error_notification.rb)中看到的，`error_notification`方法用于`translate_error_notification`从 YAML 文件中获取翻译。

```
def translate_error_notification
  lookups = []
  lookups << :"#{object_name}"
  lookups << :default_message
  lookups << "Please review the problems below:"
  I18n.t(lookups.shift, scope: :"simple_form.error_notification", default: lookups)
end 
```

对于`user`模型`lookups`包含：

```
lookups == [:user, :default_messge, "Please review the problems below:] 
```

每个对象的翻译可能不同，因此调用此事务：

```
#config/locales/simple_form.en.yml
en:
  simple_form:
    error_notification:
      user: "A custom message:" 
```

投票是否有帮助；）

# facebook - 哪些权限使 Notification 对象字段不为空？

> ID：15328526
> 
> 赞同：2
> 
> 时间：2013-03-10T22:33:35.557
> 
> 标签：facebook, facebook-graph-api

我一直在做很多实验来阅读用户的 Facebook 通知。

Graph 返回的通知的 JSON 包含一个`object`字段。我的问题是：**我的应用需要什么权限才能使该字段不为空？**

# 一些背景

我要解决的问题是为用户提供类似电子邮件的 Facebook 通知视图。我想显示评论本身，而不是只显示“用户对您的帖子发表评论”。发送请求`/notifications`将返回具有`object`字段的 JSON：

```
{
  "id": "notif_XXXXXXXX_373403974", 
  "from": {
    "name": "Michael XXXXX", 
    "id": "XXXXXXXX"
  }, 
  "to": {
    "name": "Josaphat Valdivia", 
    "id": "XXXXXXXX"
  }, 
  "created_time": "2013-03-10T19:46:38+0000", 
  "updated_time": "2013-03-10T19:46:38+0000", 
  "title": "Michael XXXXXXX posted in Pie on Pi!: \"I'm assuming cheesecake counts as pie.\"", 
  "link": "http://www.facebook.com/events/119151878267920/123715204478254/", 
  "application": {
    "name": "Events", 
    "id": "141157392619610"
  }, 
  "unread": 0, 
  "object": null
}, 
```

不幸的是，这个领域似乎主要是`null`. 但是，如果我授予我的应用程序几乎所有权限，则该字段将由我称之为“源对象”的内容填充：

```
{
  "id": "notif_XXXXXXX_373368858", 
  "from": {
    "name": "Carly XXXXXX", 
    "id": "XXXXXXX"
  }, 
  "to": {
    "name": "Josaphat Valdivia", 
    "id": "XXXXXXXX"
  }, 
  "created_time": "2013-03-10T15:48:44+0000", 
  "updated_time": "2013-03-10T15:48:44+0000", 
  "title": "Carly XXXXXXX updated her status: \"yes yes concert yesssssssss\"", 
  "link": "http://www.facebook.com/XXXXXX/posts/10151810126992926", 
  "unread": 0, 
  "object": {
    "id": "XXXXXXX_10151810126992926", 
    "from": {
      "name": "Carly XXXXX", 
      "id": "XXXXXXXX"
    }, 
    "message": "yes yes concert yesssssssss", 
    "actions": [
      {
        "name": "Comment", 
        "link": "https://www.facebook.com/XXXXXXX/posts/10151810126992926"
      }, 
      {
        "name": "Like", 
        "link": "https://www.facebook.com/XXXXXXX/posts/10151810126992926"
      }
    ], 
    "privacy": {
      "value": ""
    }, 
    "type": "status", 
    "status_type": "mobile_status_update", 
    "created_time": "2013-03-10T15:48:43+0000", 
    "updated_time": "2013-03-10T15:48:43+0000", 
    "likes": {
      "data": [
        {
          "name": "Jenna XXXXXXX", 
          "id": "XXXXXXXXX"
        }, 
        {
          "name": "Kymberlee XXXXXXXX", 
          "id": "XXXXXXX"
        }, 
        {
          "name": "Lori XXXXXX", 
          "id": "XXXXXXX"
        }, 
        {
          "name": "Andreas XXXXXXXX", 
          "id": "XXXXXXX"
        }
      ], 
      "count": 6
    }, 
    "comments": {
      "count": 0
    }
  }
}, 
```

请注意，在此代码段中，该`object`字段包含有关帖子的所有信息，包括操作、喜欢和评论。

这个问题让我大吃一惊：尝试使用 Graph Explorer 只能让我走这么远，因为有太多可能的权限组合，尝试每种组合可能需要好几个生命周期。

感谢您的输入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:32:00.863

这似乎是一个奇怪的组合，但这是`manage_notifications`我发现的两个权限（显然除外），可以使它工作。你必须同时拥有它们。

`user_groups`

`read_stream`

我不知道这些特定权限是什么，但反复试验使我得到了这种组合。

# mysql - 不太严格的 MySQL 查询？

> ID：15328529
> 
> 赞同：0
> 
> 时间：2013-03-10T22:34:04.183
> 
> 标签：mysql

我知道 MySQL 查询非常准确。但我不想这么精确。

如果我对芝士汉堡有疑问。我要汉堡回来。或者奶酪。甚至芝士汉堡。

谢谢！

编辑：芝士汉堡不是唯一的问题。它适用于任何词。因为我正在尝试建立一个搜索系统。我也希望考虑/返回类似的单词/结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T22:35:19.553

使用`LIKE`和`%`：

```
SELECT id, name FROM mytable WHERE name LIKE '%cheese%' OR name LIKE '%burger%' 
```

**编辑**：

您可能还在搜索[如何找到相似的结果并按相似度排序？](https://stackoverflow.com/questions/3338889/how-to-find-similar-results-and-sort-by-similarity)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:37:28.333

使用[声音](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_soundex)：

```
select * from table where SOUNDEX(name)=SOUNDEX("burger") or  SOUNDEX(name)=SOUNDEX("cheese") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T22:37:43.123

采用

%奶酪%或%汉堡%

这将返回奶酪、汉堡和芝士汉堡以及任何有奶酪和任何有汉堡的东西

# web-services - 为所有州提供邮政编码信息的 Web 服务

> ID：15328532
> 
> 赞同：0
> 
> 时间：2013-03-10T22:34:36.153
> 
> 标签：web-services, rest, soap, webservice-client

我正在尝试编写一个 Web 应用程序，该应用程序使用 Web 服务来检索有关所有州邮政编码的数据。我发现的 Web 服务倾向于按状态过滤，导致我创建了一个包含 50 个请求和响应解析的循环，以获取我想要的数据。我意识到这是一种糟糕的方法。

是否有任何人都知道的 Web 服务可以提供我所追求的数据？

我试图使用：[http ://api.geonames.org/postalCodeSearch?placename=country=US&username=demo&maxRows=500](http://api.geonames.org/postalCodeSearch?placename=country=US&username=demo&maxRows=500)

这里的问题是最大行数不能超过 500。使用他们的付费帐户，它会增加到 1000。甚至没有在一个请求中获得我需要的所有数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:39:16.710

[这](http://federalgovernmentzipcodes.us/)有一个看起来是所有邮政编码的 CSV，并附有状态信息。

# php - MySQL 行排序：如何设置和使用“位置”列进行行排序？

> ID：15328539
> 
> 赞同：1
> 
> 时间：2013-03-10T22:35:07.340
> 
> 标签：php, mysql, sql, sql-insert

*大家好！我认为这不应该是一个非常困难的问题——但我对 MySQL 缺乏经验，并且一直在寻找正确的方法来做这件事。我不想最终做一些愚蠢的事情。*

所以，**我有一个杂货清单，**我想改变它们的顺序。
  *我希望它看起来像这样：*

```
id    label    position
--    -----    --------
81    Bread    1
82    Soup     2
83    Ham      3
84    Eggs     4 
```

## 如何*`position`*以这种方式初始化列？

**`position`插入新行时如何处理该字段？**
*我自己仍然是一个**phpMyAdmin**人，所以我需要把它写得很简单。*

最初，我想我可以像现在一样自动增加列**-**希望它可以作为我的初始排序位置 - 但我显然不允许，因为只有。`position``id``id`

我认为一旦我初始化了位置列并为新插入的行工作，移动它们应该不会太难吗？我想我会做一个“交换”操作，将`position`任意两行的字段交换为`id`.
  我想一个“上移”或“下移”交换操作会抓住上面或下面的行's `position`，然后做两个连续`UPDATE..`的 's 来交换`position`'s。我还不够酷，无法在一个查询中简单地弄清楚如何做到这一点（如果可能的话？），所以我将从 PHP 中执行多个查询来以蛮力完成此任务。

**我正在显示这样的购物清单：**
`SELECT * FROM groceries WHERE 1 ORDER BY position ASC;`

**我希望插入这样的新行：**

```
INSERT INTO groceries (id,    label,              position) 
VALUES                (NULL,  "Instant Noodles",  NULL); 
```

如果我不能`position`像“自动增量”那样自动化该字段`id`，那么我应该/可以将`position`字段设置为什么而不是“NULL”？如何插入与`position`最后添加/最大位置+1 相同的新行？
  *我是否应该运行另一个查询来获取最大`position`（或零）并加 1？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T22:49:59.757

由于您只能在一个表中设置一个 auto_increment 列，您可以使用`INSERT INTO...SELECT`语句来增加该位置的最大值。

```
INSERT INTO groceries (label, position) 
SELECT "Instant Noodles", COALESCE(MAX(position),0) +1
FROM groceries; 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/31cd6/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:54:08.213

JW 向您展示了如何为新行赋予最高值。另一种方法是将默认值设置为 0。这为字段提供了一个工作量较少的值。

# c++ - open() 阻止尝试打开串行端口

> ID：15328540
> 
> 赞同：2
> 
> 时间：2013-03-10T22:35:13.857
> 
> 标签：c++, serial-port, raspberry-pi

我有一个简单的 C++ 工具，它作为守护进程运行，并会在 Debian 下不断地从串行端口读取数据（在本例中为 Raspbian，因为它在 RaspberryPi 上运行）。问题在于，当涉及到代码的 open() 语句时，该工具显然会阻止该过程。“顶部”中没有可见的处理时间，它只是挂起。无论哪个用户（甚至是 root）执行它，并且串行端口的访问权限也已检查过，都会发生这种情况。它发生在任何（内部或 USB）串行端口上。一旦我开始，配置并退出该端口上的 minicom 或屏幕，它就会工作。有谁知道我在这里做错了什么或错过了什么？这是阻塞语句的代码，包括和排除的注释：

```
int main(void)
{
pid_t pid, sid;
pid = fork();
if (pid < 0) {
    exit(EXIT_FAILURE);
}
if (pid > 0) {
    std::cout << "\n" << pid;
    exit(EXIT_SUCCESS);
}
umask(0);
sid = setsid();
if (sid < 0) {
    /* Log the failure */
    exit(EXIT_FAILURE);
}

if ((chdir("/")) < 0) {
    /* Log the failure */
    exit(EXIT_FAILURE);
}

    close(STDIN_FILENO);
close(STDOUT_FILENO);
close(STDERR_FILENO);

int tty_fd;
struct termios tio;

unsigned char c = 0;

//const char *device = "/dev/ttyUSB0";
const char *device = "/dev/ttyAMA0";

tty_fd = open(device, O_RDONLY | O_NOCTTY);  //<-- Seems to hang here!
if(tty_fd < 0){
    perror("Error opening Serial Port: ");
}
etc.... 
```

感谢我能得到的所有帮助。

# node.js - Sockets io - 管理多个房间？

> ID：15328542
> 
> 赞同：0
> 
> 时间：2013-03-10T22:35:24.083
> 
> 标签：node.js, sockets, websocket, socket.io

使用 node.js 和 socket.io 管理多个房间时遇到问题

```
socket.on('join_room', function (data) {
   socket.join(data);
});

 socket.on('send_msg', function (data) {
   io.sockets.in(theroom).emit('message', data);
}); 
```

如果我将房间设置在一个变量中（即`theroom`），那么自然会被最新的房间覆盖，我怎么能有多个房间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T16:38:32.740

我通过编写一个发送到房间的函数来解决这个问题：

```
listen: (server, callback) =>
  @server = server
  @logger.debug 'SDL: starting up socket'
  # @socketTool is object returned by socket io require 
  @listener = @socketTool.listen(server, log: true, 'log level': @logLevel )

emitToRoom: (room, type, data, callback) =>
  @logger.debug "all rooms: #{@utilLib.inspect @listener.sockets.manager.rooms}"
  @listener.sockets.in(room).emit(type, data)
  callback() if callback? 
```

我认为您缺少的是单个套接字不了解其他房间，您需要在侦听器级别处理它。

# java - Android achartengine 如何在 Y 轴上获得 0 在底部有填充

> ID：15328549
> 
> 赞同：0
> 
> 时间：2013-03-10T22:36:03.397
> 
> 标签：java, android, achartengine

我有一个问题，我的 Y 轴最小值为 0，这很好，但我需要它从底部偏移一点，因为当有一系列零值时，我的 X 标签会被点稍微覆盖。此外，X 轴线贯穿所有点，看起来很糟糕。

这可以用achartengine吗？我怎样才能实现它？谢谢

# windows-8 - 在 MonoGame Windows 8 XAML 应用程序中支持多种分辨率

> ID：15328550
> 
> 赞同：2
> 
> 时间：2013-03-10T22:36:09.193
> 
> 标签：windows-8, xna, winrt-xaml, monogame

我正在编写一个使用 MonoGame 3.01 和 SwapChainBackgroundPanel 与 XAML 集成的 Windows 8 游戏。我的资产针对 16:9 纵横比进行了优化，但由于 Win8 设备分辨率的变化，我也需要支持 4:3。

目前我面临以下问题：

1.  将游戏拖到第二台显示器不会调整屏幕大小

    ```
     _graphics.PreferredBackBufferWidth = (int)width;
        _graphics.PreferredBackBufferHeight = (int)height;
        _graphics.ApplyChanges(); 
    ```

在 SwapChainBackgroundPanel (GamePage) 我对大小变化做出反应

```
 void GamePage_SizeChanged(object sender, SizeChangedEventArgs e)
    {
        Game.SetBackBuffer(e.NewSize.Width, e.NewSize.Height);
    } 
```

但是什么也没发生，似乎只应用了初始（在游戏初始化之后）后台缓冲区更改。

1.  有没有办法保持纵横比而不是拉伸填充，例如。通过信箱？

在 Windows 8（包括快照视图）上支持多种分辨率的最佳做法是什么？

编辑：只是为了澄清 - GamePage_SizeChanged 正在执行，它只是 _graphics.ApplyChanges() 似乎没有效果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:16:06.347

为什么不尝试将 Client Size Changed Event 添加到 Game 构造函数中。

例子：

```
public Game1()
{
    _graphics = new GraphicsDeviceManager(this);
    this.Windows.ClientSizeChanged += Window_ClientSizeChanged;
}

void Window_ClientSizeChanged(object sender, EventArgs e)
{
    int currentWidth = this.Window.ClientBounds.Width;
    int currentHeight = this.Windows.ClientBounds.Height;
} 
```

您还可以为 ApplicationViewChanged 添加一个事件处理程序，通过将 ViewChangeArgs 与 Windows8 中的 ApplicationViewState 枚举进行比较来检测 Snapped、Filled 和 Full ViewStates。您可以从 _graphics.SwapChainPanel 属性访问游戏的 SwapChainBackgroundPanel。最后，您还有 _graphics.GraphicsDevice.DisplayMode 具有 AspectRatio、Height、Width。

# wpf - EF Code First - 用于填充模型时的上下文持续时间

> ID：15328551
> 
> 赞同：0
> 
> 时间：2013-03-10T22:36:13.210
> 
> 标签：wpf, entity-framework, model

我正在迁移基于类型化数据集的 WPF 应用程序以使用 Entity Framework 5 Code First (.Net 4.5)。

我目前使用 DataSet 中的数据加载模型。然后将模型字段绑定到 XAML DataGrids。使用模型中的 ObservableCollections 和从 INotifyPropertyChanged 派生的域对象的组合，我可以获得在集合和域对象级别正在进行的 CRUD 操作并采取相应的行动：

```
public class DomainObject : INotifyPropertyChanged
{
  public DataRowState State;
 ...
} 

public class Model
{
  private ObservableCollection<DomainObject> _family = new ObservableCollection<DomainObject>();

  public Model()
  {
    List<DomainObject> objs = DS.GetObjects();
    foreach ( var obj on objs )
    {
     obj.PropertyChanged += OnObjectChanged;       
     _family.Add(obj);
    }

    _family.CollectionChanged += OnCollectionChanged;
  }

 void OnCollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
 {
  // do stuff against DataSet based on e.Action
  ...
 }

 private void OnObjectChanged(object sender, PropertyChangedEventArgs e)
 {
   // do stuff against DataSet based on sender's (DomainObject) State property.
   ...
 }
} 
```

在我当前的实现中，当用户按下按钮时，我可以在将数据集中的 CRUD 操作写入数据库之前对它们进行伪批处理`Save`，或者如果按下取消，则丢弃 DataSet。

EF DbContext 的使用模式是否类似于我在使用 DataSet 填充模型时的使用方式？如果您希望能够保存对象更新，那么 Context 似乎必须在模型的整个生命周期内一直存在。

感谢您的任何指导！科里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:57:05.423

我认为您所要求的是使用 DbContext 的一些 Undo/Redo 实现，为此请查看[本文](http://www.codeproject.com/Articles/474279/Implementing-Undo-Redo-feature-for-DbContext-of-En)，并且我看到您正在使用 WPF，因此您应该尝试使用[IEditableObject 接口](http://msdn.microsoft.com/en-us/library/system.componentmodel.ieditableobject.aspx)来实现此机制。另一方面，DbContext 必须一直存在，直到您在对该上下文进行任何修改后调用 save changes。

# ios - iOS - 存档错误：没有包含任何钥匙串签名证书的未过期配置文件

> ID：15328552
> 
> 赞同：0
> 
> 时间：2013-03-10T22:36:16.597
> 
> 标签：ios, xcode, ios5, ios6

我为开发和分发创建了一个新的 AppId 和一个新的配置文件。然后我将 2 个新的配置文件下载到我的 xCode 中。

我还有一组可与我的其他应用程序一起使用的钥匙串访问文件。

但是当我尝试归档我的新代码库时，我得到了错误：

```
no unexpired provisioning profiles that contain any of the keychains signing certificates 
```

有人知道我如何配置这个应用程序的其余部分吗？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:50:31.133

检查您为项目设置的应用 ID 是否与新配置文件中的应用 ID 完全匹配。此外，从 Xcode 中选择应用程序目标，转到 Build Settings、Code Signing 并检查您的新配置文件是否已在下拉框中选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T23:38:45.627

当我升级我的 xcode 时，这件事发生在我身上。我不知道它是否适合您，但我所做的是暂时从 xcode 中删除了配置文件，然后我使用了选项刷新。Xcode 为我下载了工作和有效的配置文件。只有这样我才能在目标和项目级别选择正确的配置文件并能够存档。因此，请尝试从 xcode 中删除配置文件并刷新，看看这是否适合您。

# pdf - 带有自定义字符表的 PDF

> ID：15328553
> 
> 赞同：0
> 
> 时间：2013-03-10T22:36:20.883
> 
> 标签：pdf, character-encoding

我在阅读国际冰球联合会 IIHF 的统计 PDF 时遇到问题。当我用普通的 PDF 阅读器打开它们时，它们显示得很好，但是当我尝试从它们复制粘贴或将它们转换为纯文本时，它就不起作用了。

一个例子可以在这里找到：http: [//stats.iihf.com/siha/30/IHM030901_74_3_0.pdf](http://stats.iihf.com/siha/30/IHM030901_74_3_0.pdf)

有谁知道如何转换它们以便我可以将它们作为纯文本处理。最好可以使用命令行实用程序完成，以便可以自动化。

先感谢您。

# c++ - ChangeDisplaySettings(NULL, 0) 移动/调整我的窗口大小

> ID：15328557
> 
> 赞同：0
> 
> 时间：2013-03-10T22:36:38.490
> 
> 标签：c++, winapi, resize, window, fullscreen

我有一个 800x600 的窗口，这是我用于切换全屏模式的代码：

```
void Window::SetFullscreen(bool value)
{
    if(_fullscreen == value)
    {
        return;
    }

    _fullscreen = value;

    if(_fullscreen)
    {
        SetWindowLongPtr(_window, GWL_STYLE, WS_POPUP);
        SetWindowPos(_window, HWND_TOP, 0, 0, _width, _height, SWP_SHOWWINDOW);

        EnumDisplaySettings(null, 0, &_devmode);

        _devmode.dmSize = sizeof(_devmode);
        _devmode.dmPelsWidth = _width;
        _devmode.dmPelsHeight = _height;
        _devmode.dmBitsPerPel = 32;         
        _devmode.dmFields = DM_BITSPERPEL | DM_PELSWIDTH | DM_PELSHEIGHT;

        ChangeDisplaySettings(&_devmode, CDS_FULLSCREEN);
    }
    else
    {
        cout<<"---"<<endl;
        ChangeDisplaySettings(null, 0);
        cout<<"---"<<endl;

        SetWindowLongPtr(_window, GWL_STYLE, WS_OVERLAPPEDWINDOW);
        SetWindowPos(_window, HWND_TOP, 0, 0, 0, 0, SWP_NOSIZE | SWP_NOMOVE | SWP_SHOWWINDOW);
    }
} 
```

每次我从全屏模式转到窗口模式时，ChangeDisplaySettings(null, 0); 将我的窗口大小调整为 1366x768 (wtf ??!?!)，这是我的默认屏幕分辨率。我怎样才能防止这种情况？（之后将窗口大小调整回 800x600 是不可接受的选择）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:46:20.833

你没有回应`WM_GETMINMAXINFO`。如果您在那里返回 800x600，Windows 会知道您的窗口无法调整为 1366x768。

# ios - applicationDidBecomeActive: 是否阻塞主线程？

> ID：15328560
> 
> 赞同：2
> 
> 时间：2013-03-10T22:36:39.520
> 
> 标签：ios, multithreading, cocoa-touch, uiapplicationdelegate

在我的应用程序委托中`applicationDidBecomeActive:`，我检查用户登录状态的有效性，如果失败则抛出一个登录页面。此检查涉及网络调用，我担心在网络不佳的情况下它可能会阻塞主 UI，从而有效地使应用程序挂起。

当应用程序变得活跃时，从时间的角度会发生什么？阻塞/运行的内容是否`applicationDidBecomeActive:`在主线程上？我应该异步进行这个网络调用（例如使用 GCD）吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T22:38:41.007

该`applicationDidBecomeActive`方法像所有 UIKit 方法一样在主线程上调用。您必须始终确保在后台线程中执行任何长时间运行的进程或网络访问。

使用异步形式`NSURLConnection`或使用 GCD 对后台队列执行操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T23:00:07.650

您不应该在任何应用程序委托`applicationDid...`方法中执行同步网络操作（好吧，您不应该在程序中的任何地方执行同步网络操作）。事实上，如果响应启动/后台/恢复事件需要很长时间，iOS 将终止您的应用程序。崩溃日志将说明`<Your app> failed to launch in time`.

# php - 如何管理子域和主域之间的 URL

> ID：15328563
> 
> 赞同：2
> 
> 时间：2013-03-10T22:36:55.970
> 
> 标签：php, url

我无法保持所有链接正常工作。

```
/home
    includes/    
    public/  
       secure/
       index.php  
       src/  
          style.css 
```

目前我所有的 URL 都以 开头，`/`然后向外工作`ie: /public/src/style.css`。问题是我添加了一个子域`secure`，它指向不同的文件夹。现在，我所有的 URL 都不起作用，因为`/public/src/style.ss`子域的目录中不存在。

我不想硬编码我所有的 URL，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:47:05.777

/public/src/style.css 根本不应该工作，因为根据您的示意图，公共不在根目录中。并添加 / 就是说它是。

根据您的示意图，主目录位于根目录中，因此我的第一个示例应该可以按照您的需要进行链接，但还有两个其他示例的工作方式相同。

为了使用该链接访问，您需要执行以下选项之一：

```
/home/public/src/style.css

../src/style.css

http://example.com/src/style.css 
```

# php - PHP / ASCII 不可打印字符的严重令人难以置信的情况

> ID：15328564
> 
> 赞同：0
> 
> 时间：2013-03-10T22:37:04.200
> 
> 标签：php, html, tags, hex, ascii

有人能告诉我为什么这两个标签做不同的事情吗？（上传到服务器时第一个字符串不起作用，第二个很好）

```
<a href="﻿http://www.example.com">a</a>
<a href="http://www.example.com">a</a> 
```

我运行转换为十六进制值，似乎第一个字符串中至少还有一个字符：

```
3c6120687265663d223f687474703a2f2f7777772e6578616d706c652e636f6d223e613c2f613e0d0a
3c6120687265663d22  687474703a2f2f7777772e6578616d706c652e636f6d223e613c2f613e 
```

第二个字符串是手写的，第一个是由 PHP 函数生成的：

```
<?php
$handle = @fopen("./data/test.txt", "r");
$homepage = trim(fgets($handle, 4096));
?>

<a href="<?php echo $homepage;?>">a</a> 
```

在 test.txt 中，有：

```
http://www.example.com 
```

在第一行，然后是几行文本。

而且，不可见字符的代码似乎是3f，这是问号，应该是可见的，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T22:40:24.280

文件中有一个[BOM](http://en.wikipedia.org/wiki/Byte_order_mark)`EF BB BF`：.

*正确*的解决方案是修复将数据放入文件的算法（不放入 BOM），或者如果文件是静态的 - 只需使用任何足够高级的文本编辑器（如 Notepad++ 左右）将其删除一次，但作为快速和肮脏的解决方案，您可以在运行时将其删除：

```
if (substr($homepage, 0, 3) == pack('CCC', 0xef, 0xbb, 0xbf)) {
    $homepage = substr($homepage, 3);
} 
```

# python - 是否可以在 Python 中检测冲突的方法名称？

> ID：15328566
> 
> 赞同：8
> 
> 时间：2013-03-10T22:37:09.443
> 
> 标签：python, inheritance, multiple-inheritance, python-2.x

我创建了一个名为 的 Python 类`Liger`，它扩展了一个名为 的类`Lion`和一个名为`Tiger`. 该类从and`Liger`继承了方法，但语法仍然有效 - 没有打印错误消息，而是方法的实现由继承。是否可以在 Python 中检测到像这样的方法名称冲突，以便在方法名称以这种方式冲突时打印错误消息？`speak()``Lion``Tiger``Tiger``speak()``Liger`

```
'''
Conflicting method names in python
'''

class Tiger():
    @staticmethod
    def speak():
        print "Rawr!";

class Lion():
    @staticmethod
    def speak():
        print "Roar!";

class Liger(Tiger, Lion):
    pass
'''both superclasses define a speak() method, and I need a way to detect this type of conflict.'''    

Liger.speak(); ''' this prints "Rawr" instead of printing an error message. '''
'''Is there any way to detect method name collisions like this one?''' 
```

代码可以在这里在线测试和调试：http: [//ideone.com/xXOoVq](http://ideone.com/xXOoVq)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T23:20:43.427

我不确定继承是否是您用来解决问题的正确机制。继承通常被称为定义两个类之间的“IS-A”关系。也就是说，如果`A`继承自`B`，则 的每个实例都是`B`也的实例`A`。

如果您使用多重继承，则该类最终会同时成为多种对象。在您的示例中，一个`Liger`实例同时是 a`Tiger`和 a `Lion`。

您可能不想使用类继承来模拟物种继承。尽管有名字，但它们的含义并不相同。例如，家猫可能是老虎的后代，但说家猫是老虎是不正确的。

您在类上使用静态方法的事实使我认为您可能根本不想使用类，而是更通用`Animal`类的实例：

```
class Animal(object):
    def __init__(self, sound):
        self.sound = sound

    def speak(self):
        print self.sound

lion = Animal("Roar!") 
```

那里没有继承机制，但可以添加一种方法，以某种方式将一种动物变异为另一种动物。

现在，如果你真的开始使用类和多重继承，有两种不错的方法（使用常规实例方法，而不是静态方法）：

首先是进行“协作多重继承”，让您的每个方法在 MRO 中的下一个类上调用相同的方法。通常你需要从一个通用的基类继承才能使这个工作（否则最后一次调用`super`将 get `object`，它不会定义方法）：

```
class Animal(object):
    def speak(self):
        pass

class Lion(Animal):
    def speak(self):
        print("Roar!")
        super(Lion, self).speak()

class Tiger(Animal):
    def speak(self):
        print("Rawr!")
        super(Tiger, self).speak()

class Liger(Lion, Tiger):
    pass 
```

在这种情况下，`Liger`实例的`speak`方法将同时打印`Roar`then `Rawr`，这是有道理的，因为它同时是狮子和老虎。不过要小心这种编码风格，因为要让协作正常工作可能会很棘手。例如，您不能更改方法签名并期望它在协作多重继承情况下正常工作（除非您仅使用关键字参数，并传递任何无法识别的参数`**kwargs`）。

第二种解决方案是提供`Liger`它自己的`speak`实现，明确选择要做什么（可能是调用它的基类之一）。这在其他一些语言中是必需的，例如 C++。如果您请求的继承没有做您想要的，这可能是修复它的最直接方法：

```
class Liger(Lion, Tiger):
    def speak(self):
        Tiger.speak(self) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T22:53:19.490

您可以使用元类检测这种冲突：

```
class ConflictCheck(type):
    def __new__(meta, name, bases, dct):
        # determine attributes per base class, except for magic ones
        attrs_per_base = [set(a for a in dir(b) if not a.startswith("__"))
                          for b in bases]
        if len(set.union(*attrs_per_base)) < sum(map(len, attrs_per_base)):
            raise ValueError("attribute conflict")
        return super(ConflictCheck, meta).__new__(meta, name, bases, dct)

class Liger(Lion, Tiger):
    __metaclass__ = ConflictCheck  # will raise an error at definition time 
```

这是一个非常粗糙的第一个版本，错误消息很差，只要在继承树中覆盖上面的方法时，它实际上会引发错误`Liger`，但它应该足以让你开始。

# java - 除了 Wikipedia 页面上列出的那个之外，还有其他 Java quines 吗？

> ID：15328568
> 
> 赞同：1
> 
> 时间：2013-03-10T22:37:14.177
> 
> 标签：java, algorithm, puzzle, quine

我知道有一个程序代码可以打印自己，`Quine code`
如下所示

```
public class Quine
{
  public static void main( String[] args )
  {
    char q = 34;      // Quotation mark character
    String[] l = {    // Array of source code
    "public class Quine",
    "{",
    "  public static void main( String[] args )",
    "  {",
    "    char q = 34;      // Quotation mark character",
    "    String[] l = {    // Array of source code",
    "    ",
    "    };",
    "    for( int i = 0; i < 6; i++ )           // Print opening code",
    "        System.out.println( l[i] );",
    "    for( int i = 0; i < l.length; i++ )    // Print string array",
    "        System.out.println( l[6] + q + l[i] + q + ',' );",
    "    for( int i = 7; i < l.length; i++ )    // Print this code",
    "        System.out.println( l[i] );",
    "  }",
    "}",
    };
    for( int i = 0; i < 6; i++ )           // Print opening code
        System.out.println( l[i] );
    for( int i = 0; i < l.length; i++ )    // Print string array
        System.out.println( l[6] + q + l[i] + q + ',' );
    for( int i = 7; i < l.length; i++ )    // Print this code
        System.out.println( l[i] );
  }
} 
```

是否有另一个打印自身的 Java 程序代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T22:42:38.387

根据定义，Quine 是一个程序，其输出就是它自己。

因此，虽然有许多可能的程序可以打印除您提供的源之外的自己的源，但没有一个*不是*quine。

由于 Java 是一种图灵完备的语言，因此可以用它编写无限数量的 quines（[源代码](http://www.madore.org/~david/computers/quine.html#sec_intro)）。

# ruby-on-rails - Rails 资产管道不包括 application.js 清单中的必需文件

> ID：15328569
> 
> 赞同：24
> 
> 时间：2013-03-10T22:37:25.090
> 
> 标签：ruby-on-rails, ruby, asset-pipeline

rails 资产管道不包括 application.js 中所需的文件。

呈现给浏览器的唯一 javascript 文件是 application.js，并且 require 行没有编译为包含标签，因为它们应该是：

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require twitter/bootstrap
//= require bootstrap
//= require_tree .

; 
```

在 config/application.rb 我有`config.assets.enable = true`

我正在使用 rails 3.2.8，并且尝试使用 rvm 安装 ruby​​ 1.9.3-p398 和 2.0.0-p0。

如何让 application.js 包含所需的文件？

编辑：看起来这个问题的锁最近被解锁了，并且活动增加了。自从我从事此工作以来已经有一段时间了，并且代码不再存在。如果我没记错的话，我重新安装了 ruby​​ 和 rails 并解决了问题。

我应该关闭这个问题吗？在这种情况下，正确的程序是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-12-20T20:01:38.307

我在这里回答了这个问题：

[Rails 3.2.8 Application.js 和 Application.css 没有按预期工作](https://stackoverflow.com/questions/18733991/rails-3-2-8-application-js-and-application-css-are-not-working-as-expcted/20711074#20711074)

正文如下：

> 我也遇到了这个问题，但使用的是较新版本的 Rails 和 Ruby。
> 
> 检查日志，我从 Rails 缓存中获得了 javascript.js，因为服务器没有看到文件中的更改。我去移动了 require 行（只有一个），告诉 Rails 文件发生了变化并重新编译/使用。Wellm 为我做到了！
> 
> 希望它可以帮助某人。

另一个重要发现是升级 Gemfile 中的 sprockets gem。

我有版本 2.2.1 并且有问题，升级到 2.2.2 后，它工作

```
gem 'sprockets', '2.2.2' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-11T18:35:02.780

如果您从 3.0.x - 3.1.x 升级并遇到此问题，请升级到 3.2.x，它可能会解决此问题。

我最近将应用程序从 3.0 升级到 3.1.12，发现资产清单在使用 Ruby 1.9.3、Ruby 2.0 或 Ruby 2.1.1 时不起作用。然后我继续升级到 3.2.17，使用 Ruby 2.1.1 似乎一切正常。

希望这可以帮助可能遇到此问题升级的其他任何人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-01T14:40:02.353

一个常见的原因是资产被编译并在 public/assets 中找到，在这种情况下 Rails 不会重新编译它们。如果您在此处有资产，并且没有将 config.serve_static_assets 设置为 false，那么 Rails 将不会重新编译您的资产：

```
config.serve_static_assets = false 
```

因此，如果您在 public/assets 中有预编译的东西，要么删除它们，要么将上面的行添加到 development.rb

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-24T05:26:46.297

您是否将引导文件复制/粘贴到 vendor/assets 文件夹或 app/assets 中？默认情况下，资产管道仅包含 app/assets 文件夹，而不包括 lib/assets 或 vendor/assets。要在管道中包含供应商/资产，请在您的 app/assets/javascript/application.js 文件中输入以下命令：

```
//= require_tree ../../../vendor/assets/javascripts/ 
```

对你的 CSS 文件做同样的事情：

```
*= require_tree ../../../vendor/assets/stylesheets/ 
```

我知道它在文件顶部的注释中说应用程序、lib 或供应商文件夹中的任何文件都将包含在内，但我发现情况并非如此。我无法解释原因，但请参阅[此处](https://stackoverflow.com/questions/9006823/rails-asset-pipeline-standard-way-for-including-all-vendor-assets-javascripts)了解我的来源。试试上面的命令，或者在你的 app/assets 文件夹中包含引导文件。希望有帮助。

# c# - 定时器滴答事件，不会被其他功能打断？

> ID：15328572
> 
> 赞同：0
> 
> 时间：2013-03-10T22:37:30.270
> 
> 标签：c#, events, timer

所以这是我一直在研究的书中的一个游戏。

```
private void timer1_Tick(object sender, EventArgs e)
{
    listBox1.Items.Add((Keys)random.Next(65, 90));

    if (listBox1.Items.Count > 7)
    {
        listBox1.Items.Clear();
        listBox1.Items.Add("Game over");
        timer1.Stop();
    }
}

private void Form1_KeyDown(object sender, KeyEventArgs e)
{

    if (listBox1.Items.Contains(e.KeyCode))
    {
        listBox1.Items.Remove(e.KeyCode);
        listBox1.Refresh();
        if (timer1.Interval > 400)
            timer1.Interval -= 10;
        if (timer1.Interval > 250)
            timer1.Interval -= 7;
        if (timer1.Interval > 100)
            timer1.Interval -= 2;
        difficultyProgressBar.Value = 800 - timer1.Interval;
        stats.Update(true);
    }

    else
    {
        stats.Update(false);
    }
    correctLabel.Text = "Correct: " + stats.Correct;
    missedLabel.Text = "Missed: " + stats.Missed;
    totalLabel.Text = "Total: " + stats.Total;
    accuracyLabel.Text = "Accuracy: " + stats.Accuracy + "%";
} 
```

它会生成随机字母，如果您按下正确的字母，它必须从列表框中删除按下的字母。

问题是Form的keydown属性不起作用，它只突出显示按下的键，但不会将其从列表框中删除，循环继续直到列表框已满，然后它给出游戏结束消息......

我想知道这次我做错了什么，因为整个代码都取自书本本身？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T23:33:40.860

我已经检查了我的代码和书籍，问题是他们的 Forms KeyPreview 设置为 True，而我的不是，所以不幸的是，这就是他们忘记在书中提及的答案。

# ruby-on-rails - 检查当前用户是否使用 thumbs_up gem 投票

> ID：15328576
> 
> 赞同：0
> 
> 时间：2013-03-10T22:37:50.347
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想检查登录用户是否为特定帖子投票。我想向 Post 的 JSON 属性添加一个属性来执行此操作。这是 Post 模型的相关代码：

```
 def user_has_voted
    if current_user?
      self.voted_by(current_user)
    end
  end

  def self.public_models(posts)
    posts.to_json({:include => {:user => { :only => [:uid, :email] }, :company => { :only => :name} }, :methods => [:image_url, :total_votes, :user_has_voted]}).html_safe
  end 
```

方法 user_has_voted 存在问题，因为我收到以下错误：

```
undefined local variable or method `current_user' for #<Post:0x00000004d8eab0> 
```

我认为问题在于当前用户没有被单个帖子的范围所看到。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T00:50:04.053

我避免尝试在模型中定义 to_json 或 as_json。我认为最好使用 jbuilder 之类的东西，它允许您描述的用例。我强烈建议查看有关[jbuilder](http://railscasts.com/episodes/320-jbuilder)的 railscasts 。

但是，如果您想继续使用当前结构，可以按照[此处](https://stackoverflow.com/questions/11811757/rails-overriding-as-json-for-dynamic-value-is-there-a-smarter-way)设置的示例进行操作。简而言之，您可以将选项传递给包含当前用户的 as_json 方法。他们建议使用 RABL，它是 jbuilder 的替代品。祝你好运。

# php - 如何处理返回给 jQuery/JSON 对象的 MySQL 结果的分页

> ID：15328585
> 
> 赞同：0
> 
> 时间：2013-03-10T22:38:55.220
> 
> 标签：php, mysql, jquery-pagination

我有一个查询，目前看起来像这样：

```
$queryMovies = "SELECT
    m.movieID,
    n.title,
    m.directorID, d.directorFirstName, d.directorLastName,
    m.runTime,
    m.yearReleased,
    m.synopsis,
    m.formatID, f.format,
FROM movies m
LEFT JOIN directors d ON d.directorID = m.directorID
LEFT JOIN format f ON f.formatID = m.formatID
ORDER BY title"; 
```

结果被发送回 jQuery $.ajax 调用，如下所示：

```
$arr = array();

while($row = mysqli_fetch_array($resultMovies, MYSQLI_ASSOC)) {
    $arr[] = $row;
}
header('Content-Type: application/json');
echo json_encode($arr); 
```

$.ajax 调用的成功函数处理数据如下：

```
...
'<div class="synopsisCell">' +
    'Synopsis<br />' +
    '<label class="lblSynopsis">' + element['synopsis'] + '</label>' +
'</div>' +
'<div class="formatCell">' +
    '<label class="lblFormat">' + element['format'] + '</label>' +
'</div>' +
'<div class="yearCell">' +
    '<label class="lblYear">' + element['yearReleased'] + '</label>' +
'</div>' +
... 
```

（如您所见，这是完整输出的不完整片段）

我需要将分页添加到要放入数据的表中，但我不确定处理此问题的最佳方法。（我以前从未使用过分页编程）

我开始添加一个单独的查询，它只获取记录数（以确定将有多少页），然后我意识到我仍然需要使用分页的开始和记录数等执行一个 LIMIT 子句，等等。

在这一点上，我想知道两件事：

A）我能否以某种方式将记录数添加到现有的查询/返回代码中，然后我可以在 jQuery 端使用它来构建分页导航（页码和下一页/上一页/第一页/最后一页链接）。

或者：

B）我是否可以通过从 JSON 对象以某种方式获取记录数并仅显示要在表中显示的结果集（例如，哪组 20 条记录）来完全在 JS 端处理分页？

此外，当用户单击分页导航链接时，我是否每次都必须重新运行查询，或者是否有某种方法可以在 JS 中“存储”该信息以避免过多的服务器/数据库查询？

我不是在寻找特定的编码，只是可能一些伪代码让我朝着正确的方向开始。

感谢任何人的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T23:29:59.647

A) 可以使用一个查询返回计数和有限的结果`SQL_CALC_FOUND_ROWS`。出于性能原因，使用两个单独的语句[可能会更快。](http://www.mysqlperformanceblog.com/2007/08/28/to-sql_calc_found_rows-or-not-to-sql_calc_found_rows/)

B) 这也是可能的。您可以获得所有结果并根据页面隐藏/取消隐藏结果，甚至在选择新页面时不会重新加载浏览器。如果您期望一个大的结果集，这可能是一种昂贵的方法。

如果你想在数据库端限制你的结果：

```
// query, get result count
$count = ... COUNT(*)

// for pagination
$results_per_page = 20;  // arbitrary number
$total_pages = ceil($count / $results_per_page);
if(isset($_GET['page_num']) && $_GET['page_num'] > 0) {
  $page_num = $_GET['page_num']; // for example 2
}
else {
  $page_num = 1;
}
$upper_limit = $results_per_page * $page_num;
$lower_limit = $upper_limit - $results_per_page;

// query limited results
... LIMIT ".$lower_limit.", ".$results_per_page." 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:49:29.730

```
// on php
// $page, default is 1
$page = isset($_GET['page']) : $_GET['page'] : 1;
// $rows in page, default is 20
$limit = isset($_GET['limit']) : $_GET['limit'] : 20;
$offset = ($page - 1) * $limit;
$queryMovies = "SELECT
    m.movieID,
    n.title,
    m.directorID, d.directorFirstName, d.directorLastName,
    m.runTime,
    m.yearReleased,
    m.synopsis,
    m.formatID, f.format,
FROM movies m
LEFT JOIN directors d ON d.directorID = m.directorID
LEFT JOIN format f ON f.formatID = m.formatID
ORDER BY title
LIMIT $offset, $limit";

// can't remember if this going to work but this should
// give you an idea
$arr['config'] = array('current_page' => $page, 'limit' => $limit, 'total_number_of_rows' => 10000);

// do the json encoding

// in javascript you should use the info of
// the current_page to tell the user in what page he is
// using total_number_of_rows and limit, calculate the pages and show them to the
// user so he knows how many pages there are 
```

# python - Django 和 Ajax

> ID：15328593
> 
> 赞同：1
> 
> 时间：2013-03-10T22:40:03.450
> 
> 标签：python, ajax, django

我试图让一个基本的应用程序在包含 AJAX 的 Django 中工作。该应用程序将获取一个域名，然后将其发送到服务器，服务器将对其进行 dns 查找，然后通过 AJAX 将响应发送回客户端。

**意见**

```
from django.http import *
from django.shortcuts import render_to_response
from django.template import RequestContext

import sys
import os
import socket

def main(request):
    if request.method == 'POST':
       dig_input = request.POST['digInput']
       digoutput = socket.gethostbyname(dig_input)
       return render_to_response('digajax.html', {'response': digoutput}, context_instance=RequestContext(request))
    else:
       return render_to_response('digajax.html', context_instance=RequestContext(request)) 
```

**网址**

```
url(r'^digajax$', 'digajax.views.main'), 
```

**模板**

```
<!DOCTYPE html>
<html lang="en">
 <head>
    <meta charset="utf-8">
    <script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.js'></script>

<script type="text/javascript">
function send_request(){
  $.get(location.href, function(data){
    $("#output").html(data.output);
  });
}

 </head>
  <body>
        <form method="post" name="diginput form" action="/digajax">
          {% csrf_token %}
                                <input name="digInput" id="digInput" type="text">
                                <input type="button" onclick="send_request();" value="Request this page with AJAX">lookup</input>
                </form>
{% if response %}
  <div id="output">
    <p>{{ response|linebreaksbr }}</p>
  </div>
{% else %}
  <p>no</p>
{% endif %}

  </body}
</html> 
```

没有 AJAX 一切正常。现在我想使用 AJAX 我不应该在每个部分添加什么代码。

任何帮助将非常感激...............

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T23:20:04.803

1.  Django 为`request`您的视图传递的对象提供了一个方法，该方法将告诉您请求是否是通过`XmlHttp`,发出的`request.is_ajax()`。
2.  如果该方法返回 true，您可能只想返回要更新*的*页面片段，而不是整个页面。
3.  如果该方法返回 false，您可能希望返回整个页面，因为用户要么关闭了 JavaScript，要么存在某种类型的错误导致视图被正常请求。

因此，您的视图应如下所示：

```
def main(request):
    if request.method == 'POST':
       dig_input = request.POST['digInput']
       digoutput = socket.gethostbyname(dig_input)
       if request.is_ajax():
            return HttpResponse("<p>%s</p>" % digoutput)
       else:
            return render(request, 'digajax.html', {
                'response': digoutput
            })
    else:
       return render(request, 'digajax.html') 
```

您的 JavaScript 代码应如下所示：

```
<script type="text/javascript">
function send_request(){
  $.get(location.href, function(data){
    $("#output").html(data);
  });
}
</script> 
```

# wordpress - 在 wordpress 多站点中，我如何允许用户安装自己的插件？

> ID：15328594
> 
> 赞同：6
> 
> 时间：2013-03-10T22:40:05.960
> 
> 标签：wordpress

我的目标是让用户可以上传他们自己的插件和主题，我还想添加普通非多站点 WordPress 管理员中的大部分内容。哪些文件控制 WordPress 中的多站点用户仪表板？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:36:19.010

简短的回答是：**你不能**。

只有主站点有一个`/wp-content/`文件夹，所有子站点都被虚拟化并与主站点共享`/themes/`文件`/plugins/`夹。

从 Codex，[Create_A_Network](http://codex.wordpress.org/Create_A_Network) ^(*我强调*) ：

> 多站点网络是所有**共享相同 WordPress 安装**的站点的集合。他们还可以**共享插件和主题**。网络中的各个站点是虚拟站点，因为它们在您的服务器上没有自己的目录，尽管它们在共享安装中确实具有用于媒体上传的单独目录，并且它们在数据库中确实具有单独的表。

[...]

> 安装主题和插件是不同的：例如，网络的每个单独站点都可以激活两者，但**都不能安装**.

要实现您想要的，您必须向您的用户授予[***超级管理员***](http://codex.wordpress.org/Roles_and_Capabilities#Super_Admin)权限。这意味着他们可以***完全访问***整个网络。

控制多站点的文件包含在该文件夹`/wp-admin/network/`中，但[*“有些只是上一级常规管理文件的包装器”*](https://wordpress.stackexchange.com/q/90069/12615)。

例如，在文件`/wp-admin/plugins.php`中我们有以下内容，大致意思是“如果它是多站点，则不能安装插件”：

```
if ( ( ! is_multisite() || is_network_admin() ) && current_user_can('install_plugins') ) { 
?>
    <a href="<?php echo self_admin_url( 'plugin-install.php' ); ?>" class="add-new-h2"><?php echo esc_html_x('Add New', 'plugin'); ?></a>
<?php } 
```

话虽如此，有一些插件可以帮助管理多站点插件，但不是为了您想要的目的：[http ://wordpress.org/extend/plugins/search.php?q=multisite+plugins](http://wordpress.org/extend/plugins/search.php?q=multisite+plugins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-24T18:48:04.380

你可以试试

[https://wordpress.org/plugins/jamjar-plugin-installer/](https://wordpress.org/plugins/jamjar-plugin-installer/)

它支持多面并允许用户在他们的个人站点中安装插件。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2014-03-12T13:11:47.760

你不能。但是您可以将选定的插件安装到您的站点。将插件菜单和部分重命名为插件市场的东西.....然后您可以使所有插件以网格形式出现，并带有每个插件的屏幕截图，这样如果您的用户想要任何插件，他可以点击 -看看细节，然后安装它……那会很性感。而且它也更容易......您只需调整所有主题的functions.php，这样即使用户更改为另一个主题，他也不会失去市场......

# java - 如何使用 javac 编译的类文件在 tomcat 7 中构造 java servlet？

> ID：15328601
> 
> 赞同：1
> 
> 时间：2013-03-10T22:40:28.970
> 
> 标签：java, tomcat, servlets

我知道这与`WEB-INF\classes`. 但这是我将适当的`.jar`文件放入我的类路径后编译的代码。

```
import java.io.* ;
import javax.servlet.http.* ;

public class BeeServlet extends HttpServlet
{

    public void doGet( HttpServletRequest request , HttpServletResponse response )
    {
        response.setContentType("text/html");
        try
        {
            PrintWriter out = response.getWriter();
            out.println( "a-buzz-buzz ..." );
            out.close();
        }
        catch( Exception e )
        {
            System.out.println( "cannot get writer: " + e );
        }
    }
} 
```

它编译得很好，但我还没有找到任何类型的类似示例，例如放置它的位置以及如何使用`localhost:8080`URL 调用它。我在没有 IDE 的情况下这样做是为了尽可能地学习，但这一点让我很困惑......

编辑-我已经编译了这段代码。我像所有教程所说的那样将它放入 tomcat 7.0/webapps/BeeServlet/WEB-INF/classes 目录中。我输入 localhost:8080/BeeServlet，没有任何反应。这没有任何意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:47:22.420

您需要一个 Web 应用程序部署描述符 (web.xml)，它提供 URL 到 Servlet 的映射以及 Web 服务器上项目的特定目录结构。如果您在 IDE 中使用 Web 应用程序项目模板，通常会为您创建此结构。

理论阅读：http: [//tomcat.apache.org/tomcat-7.0-doc/appdev/deployment.html](http://tomcat.apache.org/tomcat-7.0-doc/appdev/deployment.html)

教程：[http ://www.nogoodatcoding.com/howto/deploy-a-servlet-on-tomcat](http://www.nogoodatcoding.com/howto/deploy-a-servlet-on-tomcat)

web.xml 文件示例：[使用 eclipse 和 tomcat 7 运行和部署 servlet](https://stackoverflow.com/questions/11491398/running-and-deploying-servlet-with-eclipse-and-tomcat-7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T22:48:24.210

webapp的结构如下：

```
root
  - WEB-INF
      - classes
          - .class files, respecting the package hierarchy
      - lib
          - .jar files used by your application, other than the servlet and JSP jar files
      - web.xml
  - whatever you want 
```

在webapps下部署根目录，或者制作一个包含根目录内容的war文件并部署这个war文件，你会得到一个webapp。

如果您使用注释声明 servlet 及其映射，则从 servlet 3.0 (Tomcat 7) 起就不需要 web.xml。否则，你需要一个。

# wordpress - WooCommerce 插件模板覆盖

> ID：15328602
> 
> 赞同：0
> 
> 时间：2013-03-10T22:40:35.227
> 
> 标签：wordpress, plugins, themes, woocommerce

我正在开发一个 WooCommerce 插件（实际上是常用的 WP 插件，但仅在启用 WooCommerce 时才有效），它应该更改标准的 WooCommerce 输出逻辑。特别是我需要自己覆盖标准的 archive-product.php 模板。我发现在主题中更改模板没有问题，但在插件中无法做到这一点。*在不*改变 WP 和 WooCommerce 核心的情况下如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:24:06.017

我认为您需要通过 WooCommerce 可用的钩子（过滤器和操作）来完成。

这是一个列表： [http ://docs.woothemes.com/document/hooks/#templatehooks](http://docs.woothemes.com/document/hooks/#templatehooks)

这是开始使用钩子的地方： [http ://wp.tutsplus.com/tutorials/the-beginners-guide-to-wordpress-actions-and-filters/](http://wp.tutsplus.com/tutorials/the-beginners-guide-to-wordpress-actions-and-filters/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-07T10:50:31.660

这是我尝试这样的事情。希望它会有所帮助。

将此过滤器添加到您的插件中：

```
add_filter( 'template_include', 'my_include_template_function' ); 
```

然后回调函数将是

```
function my_include_template_function( $template_path ) {

            if ( is_single() && get_post_type() == 'product' ) {

                // checks if the file exists in the theme first,
                // otherwise serve the file from the plugin
                if ( $theme_file = locate_template( array ( 'single-product.php' ) ) ) {
                    $template_path = $theme_file;
                } else {
                    $template_path = PLUGIN_TEMPLATE_PATH . 'single-product.php';
                }

            } elseif ( is_product_taxonomy() ) {

                if ( is_tax( 'product_cat' ) ) {

                    // checks if the file exists in the theme first,
                    // otherwise serve the file from the plugin
                    if ( $theme_file = locate_template( array ( 'taxonomy-product_cat.php' ) ) ) {
                        $template_path = $theme_file;
                    } else {
                        $template_path = PLUGIN_TEMPLATE_PATH . 'taxonomy-product_cat.php';
                    }

                } else {

                    // checks if the file exists in the theme first,
                    // otherwise serve the file from the plugin
                    if ( $theme_file = locate_template( array ( 'archive-product.php' ) ) ) {
                        $template_path = $theme_file;
                    } else {
                        $template_path = PLUGIN_TEMPLATE_PATH . 'archive-product.php';
                    }
                }

            } elseif ( is_archive() && get_post_type() == 'product' ) {

                // checks if the file exists in the theme first,
                // otherwise serve the file from the plugin
                if ( $theme_file = locate_template( array ( 'archive-product.php' ) ) ) {
                    $template_path = $theme_file;
                } else {
                    $template_path = PLUGIN_TEMPLATE_PATH . 'archive-product.php';
                }

            }

        return $template_path;
    } 
```

我检查这个主题的第一次加载。如果在主题中找不到该文件，那么它将从插件加载。

您可以在此处更改逻辑。

希望它会做你的工作。

谢谢

# ios - 如何让 datePicker 在 textField 上显示日期？

> ID：15328606
> 
> 赞同：1
> 
> 时间：2013-03-10T22:40:42.643
> 
> 标签：ios, date, datepicker, datefield

我的视图中有一个 textField，在它下面有一个选择器。

当用户从 datePicker 中选择一个日期时，我需要 textField 来显示日期的确切值。

如何从 dateField 中获取日期？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T22:44:48.760

将 DatePicker 的 value_changed 事件设置为 IBAction ：

例子 ：

```
- (IBAction) dateChanged:(id)sender {
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateStyle:NSDateFormatterMediumStyle];
    self.currentTextField.text = [dateFormatter stringFromDate:[self.datePicker date]];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T22:46:34.560

您可以通过在连接检查器中将操作设置`UIDatePicker`为`Value Changed`事件来更新从更改的日期，实施操作以将值设置为 textField 类似这样

```
- (IBAction)datePickerValueChanged:(id) sender{

    NSDateFormatter *df = [[NSDateFormatter alloc] init];
    df.dateStyle = NSDateFormatterMediumStyle;

    self.textfield.text = [NSString stringWithFormat:@"%@",[df stringFromDate:datePicker.date]];

} 
```

或者您可以将选择器添加到`UIDatePicker`

```
[datePicker addTarget:self action:@selector(updateMyDate:) forControlEvents:UIControlEventEditingChanged]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T22:43:19.643

`UIDatePicker`有财产`date`。您可以`NSDate`通过此属性访问 。

然后您可能需要使用`NSDateFormatter`从`NSString`您`NSDate`的`UITextField`.

以最直接的方式，您的代码应如下所示：

```
myTextField.text = [myDateFormatter stringFromDate:myDatePicker.date]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-07T07:09:37.897

```
 NSDateFormatter *df = [[NSDateFormatter alloc] init];
    df.dateFormat = "dd-MMMM-yyyy hh:mm a"

    //To show date in textfield     

    myTextField.text = [df stringFromDate:datePicker.date];

    //To show selected date on datepicker from textfield 

   datePicker.date = df.dateFromString(myTextField.text) 
```

# javascript - 鼠标事件限制架构

> ID：15328608
> 
> 赞同：0
> 
> 时间：2013-03-10T22:40:51.623
> 
> 标签：javascript, events, throttling

我有一组带有鼠标事件处理程序（mouseover、mouseout）的嵌套 DOM 元素。事件的副作用会更新其他视图；这些更新可能在计算上很昂贵，并且会产生烦人的视觉闪烁，所以我想尽量减少它们。我的第一个想法是建立一个节流机制，将鼠标悬停事件的处理延迟一段时间，让鼠标有机会退出相关元素。如果在指定的时间间隔内没有退出，则触发该事件；如果发生退出，则取消事件而不传播。

我的问题是现有的 UI 框架是否已经支持这种机制，如果支持，哪些支持？虽然我当然可以构建它，但这似乎是其他人可能已经解决的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:46:25.380

您可以在鼠标事件处理程序上使用[下划线 js 的油门。](http://underscorejs.org/#throttle)这是最近在 toggl 博客上发布的：http: [//blog.toggl.com/2013/02/increasing-perceived-performance-with-_throttle/](http://blog.toggl.com/2013/02/increasing-perceived-performance-with-_throttle/)。但是，涉及到一些 jQuery 的猴子补丁，所以它不是最干净的方法。

# r - R (2.15.3; Vista x64) 矩阵基础包：错误 5 参数传递给 .Internal(matrix) 需要 7

> ID：15328610
> 
> 赞同：0
> 
> 时间：2013-03-10T22:41:00.150
> 
> 标签：r, function, matrix, base

虽然有几个人表示这个​​问题是重复的（它是，但尽管有 hemmo 的帮助，我们还是无法解决这个问题......）。在这篇文章中，我 1) 提供了一些关于我遇到的问题的额外信息，并且 2) 询问我如何将矩阵函数的基本代码编辑为帖子底部显示的代码。

谁能告诉我如何更新基础包中的矩阵函数？我正在运行全新安装 2.15.3（并且我删除了我可以找到的所有 R 相关文件（从以前的安装中）并且还尝试在重新安装 2.15.3 之前清理注册表），但是每当我尝试时都会收到以下错误使用`matrix`：

```
cells <- c(1,26,24,68)
rnames <- c("R1", "R2")
cnames <- c("C1", "C2") 
mymatrix <- matrix(cells, nrow=2, ncol=2, byrow=TRUE,
dimnames=list(rnames, cnames)) 
```

`Error in matrix(cells, nrow = 2, ncol = 2, byrow = TRUE, dimnames = list(rnames, : 5 arguments passed to .Internal(matrix) which requires 7`

有趣的是，如果我输入`mymatrix <- as.matrix(cells, nrow=2, ncol=2, byrow=TRUE, dimnames=list(rnames, cnames))`没有错误，但输出不正确：

```
 [,1]
[1,]    1
[2,]   26
[3,]   24
[4,]   68 
```

当我`matrix`单独输入时，我得到以下信息：

```
function (data = NA, nrow = 1, ncol = 1, byrow = FALSE, dimnames = NULL) 
{
data <- as.vector(data)
if (missing(nrow)) 
    nrow <- ceiling(length(data)/ncol)
else if (missing(ncol)) 
    ncol <- ceiling(length(data)/nrow)
.Internal(matrix(data, nrow, ncol, byrow, dimnames))
}
<environment: namespace:base> 
```

从我之前的几篇文章中，我可以找到类似的错误消息，似乎打字`matrix`应该导致以下结果：

```
function (data = NA, nrow = 1, ncol = 1, byrow = FALSE, dimnames = NULL) 
{ 
if (is.object(data) || !is.atomic(data)) 
    data <- as.vector(data) 
.Internal(matrix(data, nrow, ncol, byrow, dimnames, missing(nrow), 
    missing(ncol))) 
} 
<environment: namespace:base> 
```

有谁知道我如何编辑`matrix`基础包中的函数，使其看起来像上面的代码（带有 7 个参数）？谢谢！

# android - Android：如何用不同的信息组织几个屏幕？

> ID：15328611
> 
> 赞同：1
> 
> 时间：2013-03-10T22:41:02.270
> 
> 标签：android, user-interface

我的应用程序中有几个用户角色。除了一些小的变化外，它们的一些屏幕应该几乎相似。有没有办法为所有用户创建一个布局，然后在运行时（用户登录后）更改一些 UI 元素，或者我应该为每个用户角色创建新布局？什么是最好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T23:07:15.497

如果更改确实很小，只需对所有人使用相同的布局，然后根据用户角色隐藏或删除调用中不需要的 UI 元素`onCreate()`，例如：

```
public enum Roles { USER, ADMIN, SUPER };

private Roles myRole = Roles.USER;

@Override
protected void onCreate( Bundle data ) {
    super.onCreate( data );
    setContentView( R.layout.this_activity );
    myRole = getUserRole(); // This could inspect the Bundle or a singleton
    switch( myRole ) {
    case Roles.USER:
        findViewById( R.id.control1 ).setVisibility( View.GONE ); // This hides a control and the hidden control won't take up any space.
        findViewById( R.id.control2 ).setVisibility( View.INVISIBLE ); // This hides a control but leaves an empty space on the screen.
        findViewById( R.id.control3 ).setVisibility( View.VISIBILE );
        break;
    case Roles.ADMIN:
        findViewById( R.id.control4 ).setVisibility( View.GONE );
        findViewById( R.id.control5 ).setVisibility( View.INVISIBLE );
        findViewById( R.id.control6 ).setVisibility( View.VISIBILE );
        break;
    }
} 
```

请注意，您可以使用上述技术使整个布局消失，因此，如果您有一些超级管理员按钮，请将它们放在 a 中`LinearLayout`，给布局一个 id，然后使用上述技术简单地隐藏整个位。

如果更改更显着，您可能需要考虑使用 Fragments 将关联的小部件捆绑在一起，然后只需将 Fragments 添加到适用于用户角色的布局中。

一般来说，我建议不要使用内容几乎相同的多个活动。

# java - Hibernate with Spring 中的水平分区

> ID：15328616
> 
> 赞同：4
> 
> 时间：2013-03-10T22:41:24.493
> 
> 标签：java, spring, hibernate

我正在对我的数据库进行水平分区，并使用自定义逻辑来选择分区。我想用 Hibernate+Spring 来配置它。我正在查看一些现有的方法，并找到了 HibernateShards。但是，这个似乎或即将弃用。是否有任何类似的现成可用的框架，我可以在其中插入我的逻辑和数据库配置并使其工作。

——谢谢，B. Teja。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-05T09:08:56.717

Spring 有**AbstractRoutingDataSource**允许基于一些查找键动态选择数据源。这可能适合您的需求。

这是关于此的[非常好的文章](http://spring.io/blog/2007/01/23/dynamic-datasource-routing/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:14:55.813

我假设分区是指多个数据库，而不是跨多个表对表进行分区。我能想到的一种方法是定义多个数据源，这些数据源指向不同分区中的不同数据库。如果数据库也是动态创建的，则需要以编程方式创建数据源，否则可以在配置文件中静态定义它们。

# apache - 如何禁用 Owncloud https 重定向？

> ID：15328619
> 
> 赞同：2
> 
> 时间：2013-03-10T22:41:52.710
> 
> 标签：apache, ssl, https, owncloud

我在带有 apache 服务器的 Ubuntu 12.04 上安装了 Owncloud。我使用 ssl 进行身份验证，但是在共享链接和数据时，用户接受自签名证书很麻烦。有没有办法禁用自动重定向到 https？我在 .htaccess 文件中没有看到任何相关命令。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T23:16:07.983

SSL 由 Web 服务器中的 OwnCloud 安装例程作为重写规则强制执行。取消选中 OC FrontEnd 中的复选框将无济于事。这可以看作是bug。

要更改这一点，您必须编辑您的 Web 服务器配置。例如，如果您选择**nginx**作为 Web 服务器，请取消注释 nginx 配置文件中的 https 重写规则。

在编辑器中打开您的配置文件：

```
sudo emacs /etc/nginx/sites-enabled/default 
```

对于**Apache**，它应该位于 /etc/httpd/conf.d/ssl.conf 中的某个位置

注释掉或更改包含的行（这是用于 nginx）：

*   包含重定向的服务器块
*   将听 443 ssl 更改为听 80
*   ssl_certificate 和 ssl_certificate_key
*   fastcgi_params HTTPS 开启

重新读取 nginx 配置文件：

```
sudo kill -HUP `cat /var/run/nginx.pid` 
```

对于**其他服务器**，请参阅：

[http://doc.owncloud.org/server/5.0/admin_manual/installation/installation_others.html](http://doc.owncloud.org/server/5.0/admin_manual/installation/installation_others.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-05T08:02:03.910

以管理用户身份登录（“强制 SSL”）时，“管理员”部分中应该有一个设置。

# python - 为当前目录提供服务的简单文件服务器

> ID：15328623
> 
> 赞同：48
> 
> 时间：2013-03-10T22:42:22.293
> 
> 标签：python, ruby, perl, node.js, shell

我正在寻找一个可以在 shell 中启动并让它服务于当前目录（最好不是 ..）的死简单 bin，可能带有`-p`用于指定端口的。因为它应该是一个开发服务器，所以默认情况下它应该只允许来自本地主机的连接，也许可以选择另外指定。越简单越好。

不确定在此处使用哪些标签。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-03-10T22:55:44.060

```
python3 -m http.server 
```

或者如果您不想使用默认端口 8000

```
python3 -m http.server 3333 
```

或者如果您只想允许来自本地主机的连接

```
python3 -m http.server --bind 127.0.0.1 
```

请参阅[文档](https://docs.python.org/3/library/http.server.html#module-http.server)。

* * *

等效的 Python 2 命令是

```
python -m SimpleHTTPServer

python -m SimpleHTTPServer 3333 
```

没有`--bind`选择。

请参阅[Python 2 文档](https://docs.python.org/3/library/http.server.html#module-http.server)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-10T22:46:16.207

对于节点，有`http-server`：

```
$ npm install -g http-server
$ http-server Downloads -a localhost -p 8080
Starting up http-server, serving Downloads on port: 8080
Hit CTRL-C to stop the server 
```

Python有：

*   **蟒蛇 3**：`python -m http.server --bind 127.0.0.1 8080`
*   **蟒蛇2**：`python -m SimpleHTTPServer 8080`

请注意，Python 2 没有`--bind`选项，因此它将允许所有连接（不仅仅是 from `localhost`）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-10T22:44:41.903

有 Perl 应用程序[App::HTTPThis](https://metacpan.org/module/http_this)或者我经常使用小型[Mojolicious](http://mojolicio.us)服务器来执行此操作。看我[不久前的博文](http://blogs.perl.org/users/joel_berger/2013/01/a-quick-static-file-webserver.html)。

制作一个名为 say 的文件`server.pl`。把这个放进去。

```
#!/usr/bin/env perl

use Mojolicious::Lite;

use Cwd;
app->static->paths->[0] = getcwd;

any '/' => sub {
  shift->render_static('index.html');
};

app->start; 
```

安装 Mojolicious:`curl get.mojolicio.us | sh`然后运行`morbo server.pl`​​.

应该可以工作，如果需要，您可以调整脚本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-07T17:58:43.493

使用[扭曲的网络](http://twistedmatrix.com/trac/wiki/TwistedWeb)：

```
twistd --pidfile= -n web --path .  --port 8080 
```

`--pidfile=`禁用 PID 文件。没有它，`twistd.pid`将在当前目录中创建一个文件。您也可以使用`--pidfile ''`.

# pdf - Safari 中未显示嵌入的 GDocs

> ID：15328626
> 
> 赞同：1
> 
> 时间：2013-03-10T22:42:32.277
> 
> 标签：pdf, mobile-safari, google-docs

我正在使用 gDocs 查看器来嵌入 pdf 文档：[example](http://www.clasesdeapoyo.com/archivo?file=http://clasesdeapoyonuevo.s3.amazonaws.com/selectividad/enunciados/m2em9.pdf&name=Examen%20de%20selectividad%3a%202013%20-%20Modelo)。我使用以下代码来实现这一点：

```
<iframe src="http://docs.google.com/gview?url=http://clasesdeapoyonuevo.s3.amazonaws.com/selectividad/enunciados/m2em9.pdf&amp;embedded=true" style="width:100%; height:600px" frameborder="0"></iframe> 
```

它在普通浏览器中显示良好，但是当我尝试通过 Safari for iOS 访问时，iframe 显示一个空白区域并且不加载。

这是怎么回事？我能做些什么来解决这个问题？是否有另一种简单的解决方案来嵌入 pdf 文档？我阅读了有关 pdf.js 的信息，但我想要一个更简单的解决方案。

谢谢

# java - 如何让按钮识别正在使用的 MediaPlayer？

> ID：15328629
> 
> 赞同：0
> 
> 时间：2013-03-10T22:42:50.263
> 
> 标签：java, android, android-mediaplayer

所以我有一门课，可以通过 MediaPlayer 播放一些歌曲。我知道您可以使用以下代码：

```
mMediaPlayer.stop();
mMediaPlayer.pause(); 
```

等让一首歌来做这些动作，但是我想知道有没有办法让我按下按钮，例如停止按钮或暂停按钮来识别当前正在使用的媒体播放器？因为我在应用程序中有 10 首歌曲，我只想为所有这些歌曲使用 3 个按钮。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T23:16:44.010

我认为你应该考虑只有一个`MediaPlayer`对象，并使用单例模式来达到它。单身人士也可以管理您的资源。检查[此链接](https://stackoverflow.com/questions/10595470/how-to-maintain-single-instance-of-mediaplayer-android)

因此，如果您的按钮停止媒体播放器，它将停止当前加载的歌曲，但您可以更改设置为`MediaPlayer`对象的歌曲

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T23:03:19.773

如果我明白你想要什么。

您可以使用 ImageView 按钮作为媒体播放器的控件。

这是如何制作开始和暂停按钮的示例

按钮布局

```
<!-- Play Button -->

        <ImageButton
            android:id="@+id/btnPlay"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@null"
            android:layout_margin="5dip"
            android:src="@drawable/btn_play" /> 
```

这个java代码

```
Button btnPlay = (ImageButton) findViewById(R.id.btnPlay);

btnPlay.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {

                // check for already playing
                if(mp.isPlaying()){

                        mp.pause();
                        // Changing button image to play button
                        btnPlay.setImageResource(R.drawable.btn_play);

                }else{
                    // Resume song
                        mp.start();
                        // Changing button image to pause button
                        btnPlay.setImageResource(R.drawable.btn_pause);
                }   
              }
        }); 
```

希望这对您有所帮助。

# python - 动态限制相关字段的查询集

> ID：15328632
> 
> 赞同：45
> 
> 时间：2013-03-10T22:43:00.553
> 
> 标签：python, django, django-rest-framework

使用 Django REST Framework，我想限制哪些值可以在创建中的相关字段中使用。

例如考虑这个示例（基于[http://django-rest-framework.org/api-guide/filtering.html](http://django-rest-framework.org/api-guide/filtering.html)上的过滤示例，但更改为 ListCreateAPIView）：

```
class PurchaseList(generics.ListCreateAPIView)
    model = Purchase
    serializer_class = PurchaseSerializer

    def get_queryset(self):
        user = self.request.user
        return Purchase.objects.filter(purchaser=user) 
```

在此示例中，如何确保在创建时购买者可能仅等于 self.request.user，并且这是可浏览 API 渲染器中表单下拉列表中填充的唯一值？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-12T18:03:04.150

I ended up doing something similar to what [Khamaileon suggested here](https://groups.google.com/forum/?fromgroups=#!searchin/django-rest-framework/filter/django-rest-framework/m3pYCyTbQ3o/Sj-TmD6p62QJ). Basically I modified my serializer to peek into the request, which kind of smells wrong, but it gets the job done... Here's how it looks (examplified with the purchase-example):

```
class PurchaseSerializer(serializers.HyperlinkedModelSerializer):
    def get_fields(self, *args, **kwargs):
        fields = super(PurchaseSerializer, self).get_fields(*args, **kwargs)
        fields['purchaser'].queryset = permitted_objects(self.context['view'].request.user, fields['purchaser'].queryset)
        return fields

    class Meta:
        model = Purchase 
```

permitted_objects is a function which takes a user and a query, and returns a filtered query which only contains objects that the user has permission to link to. This seems to work both for validation and for the browsable API dropdown fields.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-12-19T10:54:40.260

Here's how I do it:

```
class PurchaseList(viewsets.ModelViewSet):
    ...
    def get_serializer(self, *args, **kwargs):
        serializer_class = self.get_serializer_class()
        context = self.get_serializer_context()
        return serializer_class(*args, request_user=self.request.user, context=context, **kwargs)

class PurchaseSerializer(serializers.ModelSerializer):
    ...
    def __init__(self, *args, request_user=None, **kwargs):
        super(PurchaseSerializer, self).__init__(*args, **kwargs)
        self.fields['user'].queryset = User._default_manager.filter(pk=request_user.pk) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-07-24T13:28:12.303

The example link does not seem to be available anymore, but by reading other comments, I assume that you are trying to filter the user relationship to purchases.

If i am correct, then i can say that there is now an official way to do this. Tested with django rest framework 3.10.1.

```
class UserPKField(serializers.PrimaryKeyRelatedField):
    def get_queryset(self):
        user = self.context['request'].user
        queryset = User.objects.filter(...)
        return queryset

class PurchaseSeriaizer(serializers.ModelSerializer):
    users = UserPKField(many=True)

    class Meta:
        model = Purchase
        fields = ('id', 'users') 
```

This works as well with the browsable API.

Sources:

[https://github.com/encode/django-rest-framework/issues/1985#issuecomment-328366412](https://github.com/encode/django-rest-framework/issues/1985#issuecomment-328366412)

[https://medium.com/django-rest-framework/limit-related-data-choices-with-django-rest-framework-c54e96f5815e](https://medium.com/django-rest-framework/limit-related-data-choices-with-django-rest-framework-c54e96f5815e)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-11-03T02:27:15.027

I disliked the style of having to override the init method for every place where I need to have access to user data or the instance at runtime to limit the queryset. So I opted for [this solution](https://gist.github.com/ar45/18d654d1aacbb9497241).

Here is the code inline.

```
from rest_framework import serializers

class LimitQuerySetSerializerFieldMixin:
    """
    Serializer mixin with a special `get_queryset()` method that lets you pass
    a callable for the queryset kwarg. This enables you to limit the queryset
    based on data or context available on the serializer at runtime.
    """

    def get_queryset(self):
        """
        Return the queryset for a related field. If the queryset is a callable,
        it will be called with one argument which is the field instance, and
        should return a queryset or model manager.
        """
        # noinspection PyUnresolvedReferences
        queryset = self.queryset
        if hasattr(queryset, '__call__'):
            queryset = queryset(self)
        if isinstance(queryset, (QuerySet, Manager)):
            # Ensure queryset is re-evaluated whenever used.
            # Note that actually a `Manager` class may also be used as the
            # queryset argument. This occurs on ModelSerializer fields,
            # as it allows us to generate a more expressive 'repr' output
            # for the field.
            # Eg: 'MyRelationship(queryset=ExampleModel.objects.all())'
            queryset = queryset.all()
        return queryset

class DynamicQuersetPrimaryKeyRelatedField(LimitQuerySetSerializerFieldMixin, serializers.PrimaryKeyRelatedField):
    """Evaluates callable queryset at runtime."""
    pass

class MyModelSerializer(serializers.ModelSerializer):
    """
    MyModel serializer with a primary key related field to 'MyRelatedModel'.
    """
    def get_my_limited_queryset(self):
        root = self.root
        if root.instance is None:
            return MyRelatedModel.objects.none()
        return root.instance.related_set.all()

    my_related_model = DynamicQuersetPrimaryKeyRelatedField(queryset=get_my_limited_queryset)

    class Meta:
        model = MyModel 
```

The only drawback with this is that you would need to explicitly set the related serializer field instead of using the automatic field discovery provided by `ModelSerializer`. i would however expect something like this to be in rest_framework by default.

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-10-16T13:18:58.260

In django rest framework 3.0 the get_fields method was removed. But in a similar way you can do this in the init function of the serializer:

```
class PurchaseSerializer(serializers.HyperlinkedModelSerializer):
    class Meta:
        model = Purchase

    def __init__(self, *args, **kwargs):
        super(PurchaseSerializer, self).__init__(*args, **kwargs)
        if 'request' in self.context:
            self.fields['purchaser'].queryset = permitted_objects(self.context['view'].request.user, fields['purchaser'].queryset) 
```

I added the if check since if you use PurchaseSerializer as field in another serializer on get methods, the request will not be passed to the context.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-11T20:42:51.910

首先确保当你有一个传入的 http POST/PUT 时你只允许“self.request.user”（这假设你的序列化器和模型上的属性字面上命名为“user”）

```
def validate_user(self, attrs, source):
    posted_user = attrs.get(source, None)
    if posted_user:
        raise serializers.ValidationError("invalid post data")
    else:
        user = self.context['request']._request.user
        if not user:
            raise serializers.ValidationError("invalid post data")
        attrs[source] = user
    return attrs 
```

通过将上述内容添加到您的模型序列化程序中，您可以确保只有 request.user 被插入到您的数据库中。

2）-关于上面的过滤器（过滤器购买者=用户）我实际上建议使用自定义全局过滤器（以确保全局过滤）。我为自己的软件即服务应用程序做了一些事情，它有助于确保过滤掉每个 http 请求（包括当有人试图查找他们首先无权查看的“对象”时的 http 404 )

我最近在 master 分支中对此进行了修补，因此列表和单一视图都会过滤它

[https://github.com/tomchristie/django-rest-framework/commit/1a8f07def8094a1e34a656d83fc7bdba0efff184](https://github.com/tomchristie/django-rest-framework/commit/1a8f07def8094a1e34a656d83fc7bdba0efff184)

3) - about the api renderer - are you having your customers use this directly? if not I would say avoid it. If you need this it might be possible to add a custom serlializer that would help to limit the input on the front-end

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-14T19:41:40.757

Upon request @ gabn88, as you may know by now, with DRF 3.0 and above, there is no easy solution. Even IF you do manage to figure out a solution, it won't be pretty and will most likely fail on subsequent versions of DRF as it will override a bunch of DRF source which will have changed by then.

I forget the exact implementation I used, but the idea is to create 2 fields on the serializer, one your normal serializer field (lets say PrimaryKeyRelatedField etc...), and another field a serializer method field, which the results will be swapped under certain cases (such as based on the request, the request user, or whatever). This would be done on the serializers constructor (ie: **init**)

Your serializer method field will return a custom query that you want. You will pop and/or swap these fields results, so that the results of your serializer method field will be assigned to the normal/default serializer field (PrimaryKeyRelatedField etc...) accordingly. That way you always deal with that one key (your default field) while the other key remains transparent within your application.

Along with this info, all you really need is to modify this: [http://www.django-rest-framework.org/api-guide/serializers/#dynamically-modifying-fields](http://www.django-rest-framework.org/api-guide/serializers/#dynamically-modifying-fields)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-24T00:39:00.027

I wrote a custom CustomQueryHyperlinkedRelatedField class to generalize this behavior:

```
class CustomQueryHyperlinkedRelatedField(serializers.HyperlinkedRelatedField):
    def __init__(self, view_name=None, **kwargs):
        self.custom_query = kwargs.pop('custom_query', None)
        super(CustomQueryHyperlinkedRelatedField, self).__init__(view_name, **kwargs)

    def get_queryset(self):
        if self.custom_query and callable(self.custom_query):
            qry = self.custom_query()(self)
        else:
            qry = super(CustomQueryHyperlinkedRelatedField, self).get_queryset()

        return qry

    @property
    def choices(self):
        qry = self.get_queryset()
        return OrderedDict([
            (
                six.text_type(self.to_representation(item)),
                six.text_type(item)
            )
            for item in qry
        ]) 
```

Usage:

```
class MySerializer(serializers.HyperlinkedModelSerializer):
    ....
    somefield = CustomQueryHyperlinkedRelatedField(view_name='someview-detail',
                        queryset=SomeModel.objects.none(),
                        custom_query=lambda: MySerializer.some_custom_query)

    @staticmethod
    def some_custom_query(field):
        return SomeModel.objects.filter(somefield=field.context['request'].user.email)
    ... 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-06-25T15:37:37.303

I did the following:

```
class MyModelSerializer(serializers.ModelSerializer):
    myForeignKeyFieldName = MyForeignModel.objects.all()

    def get_fields(self, *args, **kwargs):
        fields = super(MyModelSerializer, self).get_fields()
        qs = MyModel.objects.filter(room=self.instance.id)
        fields['myForeignKeyFieldName'].queryset = qs
        return fields 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-09-29T12:30:44.603

I looked for a solution where I can set the queryset upon creation of the field and don't have to add a separate field class. This is what I came up with:

```
class PurchaseSerializer(serializers.HyperlinkedModelSerializer):
    class Meta:
        model = Purchase
        fields = ["purchaser"]

    def get_purchaser_queryset(self):
        user = self.context["request"].user
        return Purchase.objects.filter(purchaser=user)

    def get_extra_kwargs(self):
        kwargs = super().get_extra_kwargs()
        kwargs["purchaser"] = {"queryset": self.get_purchaser_queryset()}
        return kwargs 
```

The main issue for tracking suggestions regarding this seems to be [drf#1985](https://github.com/encode/django-rest-framework/issues/1985).

# java - 如何在JAVA中拆分字符串

> ID：15328633
> 
> 赞同：-2
> 
> 时间：2013-03-10T22:43:10.720
> 
> 标签：java

我有一个很长的字符串，我想根据规则进行拆分。我的字符串是：

```
 [1] (dokuma) deve, öküz, at tüyü, keçi kılı veya koyun yününün sıkıştırılarak sertleştirilmesiyle imal edilen ve giyecek yapımında kullanılan kalın ve kaba kumaş [2] (giyim) kumaştan yapılan yakasız bol ve uzun üstlük [3] (halk ağzı) abla, anne [4] (halk ağzı) dar pantolon üzerine giyilen ceket 
```

我想展示如下：

```
[1] (dokuma) deve, öküz, at tüyü, keçi kılı veya koyun yününün sıkıştırılarak sertleştirilmesiyle imal edilen ve giyecek yapımında kullanılan kalın ve kaba kumaş 
[2] (giyim) kumaştan yapılan yakasız bol ve uzun üstlük 
[3] (halk ağzı) abla, anne 
[4] (halk ağzı) dar pantolon üzerine giyilen ceket 
```

我的代码是：

```
String[] strMeaning = meanings.text().split("[");
        for(String key : strMeaning)
        {
            System.out.println(key);
        } 
```

我看到的错误是：

```
Exception in thread "main" java.util.regex.PatternSyntaxException: Unclosed character class near index 0
[
^
    at java.util.regex.Pattern.error(Unknown Source)
    at java.util.regex.Pattern.clazz(Unknown Source)
    at java.util.regex.Pattern.sequence(Unknown Source)
    at java.util.regex.Pattern.expr(Unknown Source)
    at java.util.regex.Pattern.compile(Unknown Source)
    at java.util.regex.Pattern.<init>(Unknown Source)
    at java.util.regex.Pattern.compile(Unknown Source)
    at java.lang.String.split(Unknown Source)
    at java.lang.String.split(Unknown Source)
    at wikipedia.CreateXML.wordMeaning(CreateXML.java:39)
    at wikipedia.CreateXML.prepareData(CreateXML.java:33)
    at wikipedia.Main.main(Main.java:32) 
```

我想不通。我怎样才能按照我想要的方式拆分？提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T22:45:15.497

方括号`[`是一个特殊字符，用来表示一个[字符类](http://docs.oracle.com/javase/tutorial/essential/regex/char_classes.html)的开始，你需要转义它：

```
meanings.text().split("\\["); 
```

*   [更多关于特殊字符](http://www.regular-expressions.info/characters.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T22:47:01.003

[ 是 Java 正则表达式中的特殊字符。

尝试这样的事情：

```
String[] temp = text.split("\\["); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T22:53:15.580

我会使用以下内容`String[] strMeaning = meanings.text().split("\s(?=\[)");`：您不想拆分 ON`[`而是拆分 next 之前的空间`[`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T22:46:57.350

您需要转义方括号，因为这是正则表达式中的特殊字符，用于执行匹配。但是，您还需要转义转义，因为 java 中的反斜杠具有特殊含义。你最终得到

```
 String[] strMeaning = meanings.text().split("\\[");
    for(String key : strMeaning)
    {
        System.out.println("[" + key);
    } 
```

我在“[”中添加了额外的位，`println`因为“[”中的匹配将删除括号。

# ios - 显示您所在位置附近的其他用户？

> ID：15328638
> 
> 赞同：1
> 
> 时间：2013-03-10T22:43:22.943
> 
> 标签：ios, parse-platform

我正在为我的俱乐部开发 iPhone 应用程序。因此，在应用程序的一部分中，我需要显示其他用户离我有多远，我的位置（以米或公里为单位）。我正在寻找如何做到这一点，最好的选择似乎是 Parse.com ......任何人都可以帮助我，给出一些提示或有用的评论？会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T23:08:26.397

Parse.com 有很好的[文档](https://parse.com/docs/ios_guide#top/iOS)和[示例应用程序](https://parse.com/samples)。我相信[Anywall](https://www.parse.com/tutorials/anywall)和[Geolocations](https://www.parse.com/tutorials/geolocations)教程会有所帮助。

**编辑**
基本思想是定期将当前用户位置保存到 Parse.com 并查询其他用户位置（可能在某些范围内）。您可以使用或使用（如果您设置）的属性
来跟踪用户位置。 您可以将位置附加到并保存到.`CLLocationManager``userLocation``MKMapView``showsUserLocation`
`PFUser``Parse.com`

# c - 复制链表 C 中的节点

> ID：15328644
> 
> 赞同：2
> 
> 时间：2013-03-10T22:44:09.127
> 
> 标签：c, linked-list

我正在尝试复制链表中的节点。我不确定我是否做得正确。我尝试制作测试用例，但没有成功。如果有人能告诉我我哪里出了问题以及我做对了什么，那么测试我的代码的最佳方法是什么。

```
struct node 
{
        int id;
        char side;
        int quantity;
        double price;
};

struct onode 
{
        struct node* data;
        struct onode* next;
        struct onode* prev;
};

struct onode* newNode (struct node* data)

{
    struct node* dataValue  = (struct node*) malloc(sizeof(struct node));
    struct onode* linkedlist = (struct onode*) malloc(sizeof(struct onode));

    linkedlist ->data = (struct node*)malloc(sizeof(data)+1);

    if(dataValue && data)
    {
        *dataValue = *data;
    }
} 
```

我已经对我的代码进行了更改，并添加了更多关于这个函数想要什么的描述。一个变化：结构节点是结构顺序。

```
struct order 
{
        int id;
        char side;
        int quantity;
        double price;
};

struct onode 
{
        struct order* data;
        struct onode* next;
        struct onode* prev;
};

/**
 * Returns a new linked list node filled in with the given order, The function
 * allocates a new order and copy the values stored in data then allocate a 
 * linked list node. If you are implementing this function make sure that you
 * duplicate, as the original data may be modified by the calling function.
 */

struct onode* newNode (struct order* data)
{
    struct order* dataValue  = (struct order*) malloc(sizeof(struct order));
    struct onode* linkedlist = (struct onode*) malloc(sizeof(struct onode));

    *dataValue = *data;

    linkedlist ->data = dataValue;

    linkedlist->data->id = dataValue->id;
    linkedlist->data->price = dataValue->price;
    linkedlist->data->quantity = dataValue->quantity;
    linkedlist->data->side = dataValue->side;
    linkedlist->next->prev = NULL;

    return linkedlist;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T23:06:08.990

您的问题的症结在于您正在创建两个新`node`对象 - 一个是`dataValue`，一个是`linkedlist->data`。然后，您将传入的数据复制到`dataValue`您真正希望将其存储在`linkedlist->data`.

如果你更换

```
linkedlist ->data = (struct node*)malloc(sizeof(data)+1); 
```

和

```
linkedList->data = dataValue; 
```

这应该会让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T23:56:08.440

因为 struct order 是 POD 类型，所以事情很简单。

```
struct onode* newNode (struct order* data)
{
    struct order* dataValue;
    struct onode* linkedlist;

    If (!data)
    {
        /* Feel free to use any other strategy to
         * handle data == NULL case depending
         * on the needs of your application. */
        return NULL;
    }

    dataValue = malloc(sizeof(struct order));
    linkedlist = malloc(sizeof(struct onode));

    memcpy(dataValue, data, sizeof(*dataValue))

    linkedlist->data = dataValue;

    linkedlist->next = NULL;
    linkedlist->prev = NULL;

    return linkedlist;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T22:54:59.903

这不是一个正确的答案，因为您的代码根本不包含回答您的问题所需的代码/解释。

```
struct onode* newNode (struct node* data)
{
    struct order* dataValue  = (struct node*) malloc(sizeof(struct node));
} 
```

什么是`struct order*`？？你的意思是`struct node *`？

```
 struct onode* linkedlist = (struct onode*) malloc(sizeof(struct onode));

    linkedlist ->data = (struct node*)malloc(sizeof(data)+1); 
```

上面的行似乎是错误的 - `sizeof(data) + 1`？不是字符串，所以加一个没有意义，大小就是指针的大小，可能不是你想要的。我猜你想要`linkedList->data = dataValue;`。

并且您需要将`next`和`prev`指针设置在`linkedList`.

```
 if(dataValue && data)
    {
        *dataValue = *data;
    } 
```

您可能应该返回节点。

正如卡尔指出的那样，您不应该将返回值转换为`malloc()`- 如果您的编译器`complains`关于它，这可能是因为您将代码编译为 C++ 而不是 C。

编辑：在更新的代码中：

```
*dataValue = *data; 
```

一个

```
linkedlist ->data = dataValue;

linkedlist->data->id = dataValue->id;
linkedlist->data->price = dataValue->price;
linkedlist->data->quantity = dataValue->quantity;
linkedlist->data->side = dataValue->side; 
```

乙

```
linkedlist->next->prev = NULL; 
```

C

A 和 B 做同样的事情，所以其中一个是多余的。

C 几乎肯定会使您的代码崩溃，因为`next`尚未设置任何内容。您可能想使用`linkedlist->next = NULL`和`linkedlist->prev = NULL`

# html - 使用表格编码时间表的替代方法

> ID：15328645
> 
> 赞同：0
> 
> 时间：2013-03-10T22:44:13.687
> 
> 标签：html, css

我目前正在使用表格来设计我的时间表——但我听说在 Web 开发中最好远离表格，因为很少有人建议这样做。因此，我想知道是否有人可以开出更好的方法来实施我的时间表？到目前为止，我尝试过使用 div，但收效甚微。

这是我正在使用的代码，可以在这里找到一个 jsfiddle [http://jsfiddle.net/s2ZgT/](http://jsfiddle.net/s2ZgT/)：

```
<div id="grid">
    <table width="100%" cellspacing="0" cellpadding="0">
        <tbody>
            <tr class="gridHeader">
                <td>&nbsp;</td>
                <td class="underline">09:00</td>
                <td class="underline">10:00</td>
                <td class="underline">11:00</td>
                <td class="underline">12:00</td>
                <td class="underline">13:00</td>
                <td class="underline">14:00</td>
                <td class="underline">15:00</td>
                <td class="underline">16:00</td>
                <td class="underline">17:00</td>
            </tr>
            <tr id="mon">
                <td class="gridSide">Mon</td>
                <td class="box" id="mon1">&nbsp;</td>
                <td class="box" id="mon2">&nbsp;</td>
                <td class="box" id="mon3">&nbsp;</td>
                <td class="box" id="mon4">&nbsp;</td>
                <td class="box" id="mon5">&nbsp;</td>
                <td class="box" id="mon6">&nbsp;</td>
                <td class="box" id="mon7">&nbsp;</td>
                <td class="box" id="mon8">&nbsp;</td>
                <td class="box" id="mon9">&nbsp;</td>
            </tr>
            <tr id="tue">
                <td class="gridSide">Tue</td>
                <td class="box" id="tue1">&nbsp;</td>
                <td class="box" id="tue2">&nbsp;</td>
                <td class="box" id="tue3">&nbsp;</td>
                <td class="box" id="tue4">&nbsp;</td>
                <td class="box" id="tue5">&nbsp;</td>
                <td class="box" id="tue6">&nbsp;</td>
                <td class="box" id="tue7">&nbsp;</td>
                <td class="box" id="tue8">&nbsp;</td>
                <td class="box" id="tue9">&nbsp;</td>
            </tr>
            <tr id="wed">
                <td class="gridSide">Wed</td>
                <td class="box" id="wed1">&nbsp;</td>
                <td class="box" id="wed2">&nbsp;</td>
                <td class="box" id="wed3">&nbsp;</td>
                <td class="box" id="wed4">&nbsp;</td>
                <td class="box" id="wed5">&nbsp;</td>
                <td class="box" id="wed6">&nbsp;</td>
                <td class="box" id="wed7">&nbsp;</td>
                <td class="box" id="wed8">&nbsp;</td>
                <td class="box" id="wed9">&nbsp;</td>
            </tr>
            <tr id="thu">
                <td class="gridSide">Thu</td>
                <td class="box" id="thu1">&nbsp;</td>
                <td class="box" id="thu2">&nbsp;</td>
                <td class="box" id="thu3">&nbsp;</td>
                <td class="box" id="thu4">&nbsp;</td>
                <td class="box" id="thu5">&nbsp;</td>
                <td class="box" id="thu6">&nbsp;</td>
                <td class="box" id="thu7">&nbsp;</td>
                <td class="box" id="thu8">&nbsp;</td>
                <td class="box" id="thu9">&nbsp;</td>
            </tr>
            <tr id="fri">
                <td class="gridSide">Fri</td>
                <td class="box" id="fri1">&nbsp;</td>
                <td class="box" id="fri2">&nbsp;</td>
                <td class="box" id="fri3">&nbsp;</td>
                <td class="box" id="fri4">&nbsp;</td>
                <td class="box" id="fri5">&nbsp;</td>
                <td class="box" id="fri6">&nbsp;</td>
                <td class="box" id="fri7">&nbsp;</td>
                <td class="box" id="fri8">&nbsp;</td>
                <td class="box" id="fri9">&nbsp;</td>
            </tr>
        </tbody>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-10T22:45:18.960

桌子本身就有害的说法是一个神话。*误用于布局目的时，*表格是有害的。在显示表格数据时，它们仍然是您的首选武器，您显然就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T22:53:21.550

对我来说就像一张桌子。为什么要做别的？在某些情况下，您希望实现一个系统`div`并`span`显示复杂的 ui 或报告，但这不是其中之一。表格自然会响应内容的变化，并以用户习惯的布局呈现。表格非常常见且易于阅读。即使有一些虚假数据，这仍然看起来不错。这是您的代码示例，其中包含一些简单的数据。

[http://jsfiddle.net/J8khb/](http://jsfiddle.net/J8khb/)

底线：使用表格进行表格显示。为复杂的显示器使用替代品。

# java - 在不修改小数的情况下将逗号（分组分隔符）添加到数字？

> ID：15328647
> 
> 赞同：13
> 
> 时间：2013-03-10T22:44:28.767
> 
> 标签：java, decimalformat

我正在尝试格式化字符串以在 3 位组之间添加逗号

例如：

```
1200.20 >> 1,200.20
15000   >> 15,000 
```

我正在尝试弄清楚如何使用 DecimalFormat 来完成它，到目前为止，我一直在使用我自己的一个似乎过于复杂的脚本。我不知道该怎么做，使用 # 只是隐藏尾随零并使用 0 将它们添加到数字中。

这就是我现在正在尝试的：

```
DecimalFormat df = new DecimalFormat("###,###.####", new DecimalFormatSymbols(Locale.US));
resultStr = df.format(Double.valueOf(resultStr)); 
```

我敢肯定这一定很容易，但我不知道该怎么做。我不必用 DecimalFormat 来做，我只是认为这会是更简单的方法。我怎样才能简单地添加逗号而不以任何方式修改小数？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-10T22:46:00.337

您应该使用 NumberFormat 对象并将其设置为使用分组。就像是

```
import java.text.DecimalFormat;
import java.text.NumberFormat;
import java.util.Locale;

public class NumberFormatEg {
   public static void main(String[] args) {
      NumberFormat myFormat = NumberFormat.getInstance();
      myFormat.setGroupingUsed(true);

      double[] numbers = { 11220.00, 232323232.24, 121211.55, 102.121212 };

      for (double d : numbers) {
         System.out.println(myFormat.format(d));
      }
      System.out.println();

      DecimalFormat decimalFormat = new DecimalFormat("#.00");
      decimalFormat.setGroupingUsed(true);
      decimalFormat.setGroupingSize(3);

      for (double d : numbers) {
         System.out.println(decimalFormat.format(d));
      }

      System.out.println("\nFor Germany");

      NumberFormat anotherFormat = NumberFormat
            .getNumberInstance(Locale.GERMAN);
      if (anotherFormat instanceof DecimalFormat) {
         DecimalFormat anotherDFormat = (DecimalFormat) anotherFormat;
         anotherDFormat.applyPattern("#.00");
         anotherDFormat.setGroupingUsed(true);
         anotherDFormat.setGroupingSize(3);

         for (double d : numbers) {
            System.out.println(anotherDFormat.format(d));
         }

      }

      System.out.println("\nFor US:");

      anotherFormat = NumberFormat.getNumberInstance(Locale.US);
      if (anotherFormat instanceof DecimalFormat) {
         DecimalFormat anotherDFormat = (DecimalFormat) anotherFormat;
         anotherDFormat.applyPattern("#.00");
         anotherDFormat.setGroupingUsed(true);
         anotherDFormat.setGroupingSize(3);

         for (double d : numbers) {
            System.out.println(anotherDFormat.format(d));
         }

      }
   }
} 
```

返回：

```
11,220
232,323,232.24
121,211.55
102.121

11,220.00
232,323,232.24
121,211.55
102.12

For Germany
11.220,00
232.323.232,24
121.211,55
102,12

For US:
11,220.00
232,323,232.24
121,211.55
102.12 
```

这样做的一个优点是解决方案可以是特定于语言环境的。

**Edited**
Now 显示了一个带有 DecimalFormat 对象的示例。请注意，如果您使用它，您应该设置分组大小。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-10T22:55:02.583

您也可以尝试类似

```
DecimalFormat df = new DecimalFormat("#,###.00");

System.out.println(df.format(1200.20));
System.out.println(df.format(15000));
System.out.println(df.format(123456789.99)); 
```

```
1,200.20
15,000.00
123,456,789.99

```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T22:49:43.050

你应该能够做你想做的事：

[http://docs.oracle.com/javase/tutorial/i18n/format/decimalFormat.html](http://docs.oracle.com/javase/tutorial/i18n/format/decimalFormat.html)

```
DecimalFormat myFormatter = new DecimalFormat("$###,###.###");
String output = myFormatter.format(12345.67);
System.out.println(value + " " + pattern + " " + output); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-08T17:47:29.543

> 最简单的解决方案

为什么不将[逗号`,`标志](http://www.java2s.com/Tutorial/Java/0120__Development/Usingthecommaflagtodisplaynumberswiththousandsseparator.htm)与`printf`.

```
System.out.printf( "%,d\n", 58625 );// the d to accept decimal integer
System.out.printf( "%,.2f", 12345678.9 );// the f to accept folouting point and 2 to take only 2 digits 
```

输出将是

```
58,625
12,345,678.90 
```

好消息：使用的实际生成的分隔符`is specific to the user’s locale`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T00:02:06.873

我无法使任何其他解决方案起作用，一些四舍五入，一些添加尾随零或一些删除尾随零。

我不打算接受我自己的答案，但我会发布我的脚本以防有人发现它有用。

```
public void(String str) {
    int floatPos = str.indexOf(".") > -1 ? str.length() - str.indexOf(".") : 0;
    int nGroups= (str.length()-floatPos-1-(str.indexOf("-")>-1?1:0))/3;
    for(int i=0; i<nGroups; i++){
        int commaPos = str.length() - i * 4 - 3 - floatPos;
    str = str.substring(0,commaPos) + "," + str.substring(commaPos,str.length());
    }
    return str;
}

1             => 1
1.0           => 1.0
1234.01       => 1,234.01
1100100.12345 => 1,100,100.12345 
```

# jquery - jQuery在wrapInner中更改多个属性

> ID：15328662
> 
> 赞同：0
> 
> 时间：2013-03-10T22:46:11.910
> 
> 标签：jquery

如何获取多个属性值？我可以`href`正确得到，我也想得到`alt`，但我无法正确计算并得到正确的结果。`.attr('href').attr('alt')` `.attr('href' + 'alt')`我也试过了`.attr({href, alt})`，

这是在线示例：http: [//jsfiddle.net/Lm4TM/](http://jsfiddle.net/Lm4TM/)

**JS：**

```
$(document).ready(function(){
    $(".link").each(function (i) {
        var links = $(this).find("a");
        $(this).wrapInner("<a href='"+ $(links).attr('href') + "'></a>");
    });
}); 
```

**CSS：**

```
.link {
  width:20%;
  height: 100%;
  background: red;
  float: left;
  margin: 0 20px;
}

a {
  text-decoration: none;
  color: white;
} 
```

**HTML：**

```
<div class="link">
<a href="http://www.google.com" alt="google">Google.com</a>
<p> Google Inc. is an American multinational corporation that provides Internet-related products and services, including internet search, cloud computing, software and advertising technologies.Advertising revenues from AdWords generate almost all of the company's profits</p>
</div>

<div class="link">
<a href="http://www.microsoft.com" alt="microsoft">Microsoft.com</a>
<p>Microsoft Corporation is an American multinational software corporation headquartered in Redmond, Washington that develops, manufactures, licenses, and supports a wide range of products and services related to computing.</p>
</div>

<div class="link">
<a href="http://www.Apple.com" alt="Apple">Microsoft.com</a>
<p>The apple is the pomaceous fruit of the apple tree, species Malus domestica in the rose family (Rosaceae). It is one of the most widely cultivated tree fruits, and the most widely known of the many members of genus Malus that are used by humans.</p>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:59:26.070

你试过简单地做吗？

```
$(this).wrapInner("<a href='"+ $(links).attr('href') + "' alt='"+$(links).attr('alt')+"'></a>"); 
```

我更新了你的小提琴。[http://jsfiddle.net/Lm4TM/1/](http://jsfiddle.net/Lm4TM/1/)

出于好奇，你想完成什么？

# javascript - Google Chrome 上的“Uncaught ReferenceError: $ is not defined”错误（但适用于 Firefox 和 Safari）

> ID：15328663
> 
> 赞同：2
> 
> 时间：2013-03-10T22:46:12.973
> 
> 标签：javascript, jquery, google-chrome, firefox, safari

我试图让这个 SO 问题中的示例代码在我的系统上运行

[使用 jQuery 获取鼠标单击图像的 X/Y 坐标](https://stackoverflow.com/questions/2159044/getting-the-x-y-coordinates-of-a-mouse-click-on-an-image-with-jquery)

它显示在 a 内单击时鼠标的位置`div`。它工作正常`Firefox`，`Safari`但没有更新`Chrome`，我想知道我是否做错了什么。我正在使用 Google Chrome 版本 23.0.1271.101

这是我正在使用的代码。

```
<html>

<head>
<script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
</head>

<body>
<p>Click to see the position!</p>
<div class="box" style="width: 200px; height: 200px; background: #F00">&nbsp;</div>
<p id="position">Position will go here</p>
<script>
$(document).ready(function() {
    $('.box').click(function(e) {
        var offset = $(this).offset();
        $('#position').html(Math.round(e.clientX - offset.left) + ", " + Math.round(e.clientY - offset.top));
    });
});
</script>

</body>
</html> 
```

**更新：** 这是我在 Chrome 的 JavaScript 控制台上看到的错误，`Uncaught ReferenceError: $ is not defined`但我不知道该怎么做。

![在此处输入图像描述](../Images/83fc1a4f7db8d291082b22731124a226.png)

**更新2：**

我在打开 JavaScript 控制台的同时清除了浏览器缓存并重新加载了页面，并发现了一个我以前从未见过的错误

```
[blocked] The page at https://<mywebsite>/index.html ran insecure content from http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js.
Uncaught ReferenceError: $ is not defined 
```

因此，我下载`jquery.min.js`并将其放在与脚本相同的目录中`index.html`，并将脚本的加载更改为

```
<script src="./jquery.min.js" type="text/javascript"></script> 
```

它现在适用于所有三种浏览器......所以出于某种原因，Chrome 是唯一一个抱怨 jquery.min.js 的 url 不安全的浏览器。使问题更加复杂的是，当我进入 JavaScript 控制台时，它并没有给我那个错误，直到我清除缓存*并*打开 JavaScript 控制台后我才看到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T23:15:33.540

您得到的错误是执行脚本时未加载 jQuery。因此，当您尝试使用 $ 时，没有定义它。

*此外，您的屏幕截图显示的标记与您的示例不同。*

# graph - 对两个图运行 sparql 查询？

> ID：15328666
> 
> 赞同：11
> 
> 时间：2013-03-10T22:46:34.050
> 
> 标签：graph, union, sparql

指定图形的典型 SPARQL 查询可能如下所示：

```
SELECT ?b ?c WHERE { GRAPH <http://AliceIRI> {
<http://local.virt/foo> ?b ?c}} 
```

这将告诉我 AliceIRI 中“foo”是主题的所有三元组。如果我想查看两个不同的图表，我唯一的选择是执行 UNION：

```
SELECT ?b ?c WHERE {{ GRAPH <http://AliceIRI> {
<http://local.virt/foo> ?b ?c}}
UNION
{ GRAPH <http://BobIRI> {
<http://local.virt/foo> ?b ?c}}} 
```

或者是否有一些速记可以让我更方便地写这个，像这样：

```
SELECT ?b ?c WHERE { GRAPH <http://AliceIRI> + <http://BobIRI> {
<http://local.virt/foo> ?b ?c} 
```

顺便说一句，我在 Virtuoso 6.01.3127 上。

**更新 1**

为了澄清，我真的很想能够运行：

```
SELECT ?b ?c WHERE { GRAPH <http://AliceIRI> + <http://BobIRI> {
<http://local.virt/foo> ?b ?c .
<http://local.virt/bar> ?b ?c}} 
```

并且有这场比赛`?b`和`?c`这样`<http://local.virt/foo> ?b ?c`的比赛。简单地在（单独）和（单独）中合并匹配项并不能实现这一点。`<http://AliceIRI>``<http://local.virt/bar> ?b ?c``<http://BobIRI>``<http://AliceIRI>``<http://BobIRI>`

并进一步澄清：我已经意识到，如果 foos 都属于 Alice，而 bar 都属于 Bob，那么我可以写

```
SELECT ?b ?c WHERE { 
GRAPH <http://AliceIRI> {
<http://local.virt/foo> ?b ?c } .
GRAPH <http://BobIRI> {
<http://local.virt/bar> ?b ?c}} 
```

（这实际上是我的应用程序所需要的）——但至少对于“学术兴趣”而言，是否有一种语法上不错的方法来对图形联合运行查询（而不是针对多个图形然后联合运行）结果）仍然有效。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T16:10:00.060

是的

```
SELECT ?b ?c
FROM NAMED <http://AliceIRI>
FROM NAMED <http://BobIri>
WHERE
{
  GRAPH ?g { <http://local.virt/foo> ?b ?c }
} 
```

`FROM NAMED`子句可用于设置使用`GRAPH ?var`子句时查询的命名图。

请务必注意，从语义上讲，此查询与您在上面编写的内容相同，因此该`GRAPH`子句表示的模式分别与每个命名图匹配并联合在一起

**编辑**

要回答您评论中的额外问题，是的，您可以，如果您使用`FROM`而不是`FROM NAMED`这个，则将查询的默认图设置为`FROM`子句中所有图的合并，并且不需要您使用`GRAPH`例如

```
SELECT ?b ?c
FROM <http://AliceIRI>
FROM <http://BobIri>
WHERE
{
  <http://local.virt/foo> ?b ?c
} 
```

这涵盖了您希望允许匹配三元组模式不同部分的三元组来自您命名的任何图形的情况。

请注意，某些三元存储可能允许您对其进行设置，以便将默认图自动视为所有命名图的合并。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-28T13:21:47.380

如果您必须在您正在使用的图表的子集中运行查询，您还可以在图表的 iri 上设置过滤器。

例如：

```
SELECT ?b ?c
FROM NAMED <http://AliceIRI>
FROM NAMED <http://BobIri>
FROM NAMED <http://CarlIri>
WHERE {
GRAPH ?g {
    <http://local.virt/foo> ?b ?c 
    FILTER( ?g=<http://AliceIRI> || ?g=<http://BobIri> )
}
} 
```

# ruby-on-rails - 从另一个控制器渲染视图

> ID：15328668
> 
> 赞同：0
> 
> 时间：2013-03-10T22:46:35.717
> 
> 标签：ruby-on-rails, partial-views, renderpartial

我正在尝试将一个视图（索引）从一个控制器渲染到另一个控制器的视图。index 需要在控制器中计算一些值并渲染视图。

我该怎么做呢？

例如：在产品/列表中我有

```
<%= render :partial=>"admin/index" %> 
```

在 admin_controller 中：

```
def index
   @member = something
end 
```

看起来 admin/controller 中的代码永远不会被执行。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T23:01:37.733

渲染只会渲染视图，它不会运行与其关联的操作。

你必须复制这个：

```
 @member = something 
```

到您的产品/列表操作。

# css - 如何在 Bootstrap 中使用边框

> ID：15328679
> 
> 赞同：69
> 
> 时间：2013-03-10T22:47:44.050
> 
> 标签：css, twitter-bootstrap, border

我怎么解决这个问题？给 div 添加边框时，div 不居中，`span12`类也不居中。

我想将 div 与边框居中

```
<div class="row" >
   <div class="span12" style="border: 2px solid black">
      <div class="row">
         <div class="span4">
            1
         </div>
         <div class="span4">
            2
         </div>
         <div class="span4">
            3
         </div>
      </div>
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-03-10T23:29:47.593

不幸的是，这就是边框的作用，它们被视为元素占用空间的一部分。请允许我介绍一下 Border 鲜为人知的表亲： `outline`. 它实际上与边界相同。唯一的区别是它的行为更像 box-shadow，因为它不占用布局中的空间，并且它必须位于元素的所有 4 个侧面。

[http://codepen.io/cimmanon/pen/wyktr](http://codepen.io/cimmanon/pen/wyktr)

```
.foo {
    outline: 1px solid orange;
} 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2016-08-15T21:40:34.243

从 Bootstrap 3 开始，您可以使用 Panel 类：

`<div class="panel panel-default">Surrounded by border</div>`

在 Bootstrap 4 中，您可以使用 Border 类：

`<div class="border border-secondary">Surrounded by border</div>`

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-03-10T23:10:47.917

CSS 中有一个属性叫做`box-sizing.`它决定页面上元素的总宽度。默认值为`content-box`，不包括元素的内边距、边距或边框。

因此，如果您将 a 设置`div`为拥有`width: 500px`和`20px`填充，它将占据`540px`您的网站 (500 + 20 + 20)。

这就是导致您的问题的原因。Bootstrap 会像上面的例子一样计算设置的宽度，这些东西没有边框。由于 Bootstrap 像拼图一样组合在一起，在其中一侧添加边框将产生 501px 的总宽度（继续上面的示例）并破坏您的布局。

解决此问题的最简单方法是调整您的`box-sizing`. 您将使用的值为`box-sizing: border-box`. 这包括框元素中的填充*和*边框。[您可以在此处阅读有关 box-sizing 的更多信息。](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)

这个解决方案的一个问题是它只适用于 IE8+。因此，如果您需要更深入的 IE 支持，您将需要覆盖 Bootstrap 宽度以考虑您的边框。

举一个如何计算新宽度的例子，首先检查 Bootstrap 在你的元素上设置的宽度。假设它是 a`span6`并且宽度为`320px`（这纯粹是假设，span6 的实际宽度将取决于您对 Bootstrap 的具体配置）。如果您想在右侧添加一个带有 20px 填充的单个边框，您可以在样式表中编写此 CSS

```
.span6 {
  padding-right: 20px;
  border-right: 1px solid #ddd;
  width: 299px;
 } 
```

其中新宽度通过以下方式计算：

`old width - padding - border`

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-09-13T07:21:58.083

根据您想要的尺寸`div`，您可以使用 Bootstrap 的内置组件`thumbnail`类以及（或不使用）网格系统在每个`div`项目周围创建边框。

**[Bootstrap 网站上的这些示例](https://getbootstrap.com/docs/3.3/components/#thumbnails)展示了易用性和无需任何特殊附加功能`CSS`：**

```
<div class="row">
    <div class="col-xs-6 col-md-3">
        <a href="#" class="thumbnail">
            <img src="..." alt="...">
        </a>
    </div>
    ...
</div> 
```

**它产生以下`div`网格项：**

[![简单的网格对象](../Images/80d74d12373e4d307bc454e02c5851a1.png)](https://i.stack.imgur.com/XzMv9.png)

**或者添加一些额外的内容：**

```
<div class="row">
  <div class="col-sm-6 col-md-4">
    <div class="thumbnail">
      <img src="..." alt="...">
      <div class="caption">
        <h3>Thumbnail label</h3>
        <p>...</p>
        <p>
            <a href="#" class="btn btn-primary" role="button">Button</a>
            <a href="#" class="btn btn-default" role="button">Button</a>
       </p>
      </div>
    </div>
  </div>
</div> 
```

**它产生以下`div`网格项：**

[![自定义网格对象](../Images/ec5b75053e49c068cd23a64520a83cd9.png)](https://i.stack.imgur.com/SB1wP.png)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-03-11T00:19:24.647

其他人提到的边框与边框框绝对是正确的。你仍然可以让它工作，而不必创建任何自定义类：http: [//jsfiddle.net/panchroma/yfzdD/](http://jsfiddle.net/panchroma/yfzdD/)

**HTML**

```
<div class="container">
<div class="row" >
    <div class="span12">
       <div class="row">
        <div class="span4"> 1 </div>
        <div class="span4"> 2 </div>
        <div class="span4"> 3 </div>
        </div><!-- end nested row -->
    </div><!-- end span 12 -->

</div> <!-- end row -->
</div><!-- end container --> 
```

**CSS**

```
.span12{
border:solid 2px black;
background-color:grey;  
} 
```

祝你好运！

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-03-10T23:15:28.330

虽然这可能不是*正确*的方法，但我发现一个简单的解决方法是简单地使用框阴影而不是边框​​......这不会破坏网格系统。例如，在您的情况下：

**HTML**

```
<div class="container">
    <div class="row" >
        <div class="span12">
            <div class="row">
                <div class="span4">
                    1
                </div>
                <div class="span4">
                    2
                </div>
                <div class="span4">
                    3
                </div>
            </div>
        </div>
    </div>
</div> 
```

**CSS**

```
.span12{
    -moz-box-shadow: 0 0 2px black;
    -webkit-box-shadow: 0 0 2px black;
    box-shadow: 0 0 2px black;
} 
```

[小提琴](http://jsfiddle.net/77Udx/1/)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-03-10T22:52:52.517

您不能只为跨度添加边框，因为它会破坏布局，因为宽度的计算方式：宽度 = 边框 + 填充 + 宽度。由于容器是 940 像素，跨度是 940 像素，添加 2 像素边框（所以总共 4 像素）会使它看起来偏离中心。解决方法是更改​​宽度以包括 4px 边框（原始 - 4px）或在内部创建另一个 div 以创建 2px 边框。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-03-19T05:59:23.690

如果你需要一个基本的边界，你只需要使用引导井。

例如下面的代码：

```
<div class="well">Basic Well</div> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-23T01:03:23.763

如果您使用的是 Bootstrap 4 及更高版本，请尝试在空 div 周围设置边框，`border border-primary`这是我的代码示例：

```
<div class="row border border-primary">
        <div class="col border border-primary">logo</div>
        <div class="col border border-primary">navbar</div>
    </div> 
```

这是 Bootstrap 4 中边框实用程序的链接： [https ://getbootstrap.com/docs/4.2/utilities/borders/](https://getbootstrap.com/docs/4.2/utilities/borders/)

# c# - 导航注册表文件

> ID：15328680
> 
> 赞同：3
> 
> 时间：2013-03-10T22:47:44.470
> 
> 标签：c#, .net, registry

我正在尝试从其他机器的注册表文件中读取数据。基本上我有其他系统的硬盘驱动器，我可以从中复制或直接读取，例如，系统文件（Windows/system32/config/SYSTEM），所以我可以从 USBStor 密钥（和其他东西）读取数据）。

请注意，我没有尝试读取从注册表导出的 .REG 文件，也没有尝试从本地计算机读取配置单元。;-)

我一直在尝试找到任何类型的库或本地 .Net 方式来做到这一点，最好是免费的！有很多关于读取 .REG 文件的参考，但不是从其他系统获取的“平面”文件。

有人遇到过这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T01:02:01.560

查看（[此处](http://msdn.microsoft.com/en-us/library/ms724889%28v=VS.85%29.aspx)`RegLoadKey()`为MSDN ），您应该能够执行以下操作：

```
using System.Runtime.InteropServices;
using Microsoft.Win32; 

namespace ConsoleApplication1
{
    class Program
    {

    [DllImport("advapi32.dll")]
    public static extern int RegLoadKey(uint hKey, string lpSubKey, string lpFile);
    [DllImport("advapi32.dll")]
    public static extern int RegUnLoadKey(uint hKey, string lpSubKey);
    [DllImport("advapi32.dll")]
    public static extern int OpenProcessToken(int ProcessHandle, int DesiredAccess, ref int tokenhandle);
    [DllImport("kernel32.dll")]
    public static extern int GetCurrentProcess();
    [DllImport("advapi32.dll")]
    public static extern int AdjustTokenPrivileges(int tokenhandle, int disableprivs, [MarshalAs(UnmanagedType.Struct)]ref TOKEN_PRIVILEGES Newstate, int bufferlength, int PreivousState, int Returnlength);
    [DllImport("advapi32.dll")]
    public static extern int LookupPrivilegeValue(string lpsystemname, string lpname, [MarshalAs(UnmanagedType.Struct)] ref LUID lpLuid);

    [StructLayout(LayoutKind.Sequential)]
    public struct LUID
    {
        public int LowPart;
        public int HighPart;
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct TOKEN_PRIVILEGES
    {
        public LUID Luid;
        public int Attributes;
        public int PrivilegeCount;
    }

    static void Main(string[] args)
    {
        int TOKEN_ADJUST_PRIVILEGES = 0x00000020;
        int SE_PRIVILEGE_ENABLED = 0x00000002;
        int TOKEN_QUERY = 0x00000008;
        int token = 0;
        int retval = 0;
        uint HKU = 0x80000003;
        string SE_BACKUP_NAME = "SeBackupPrivilege";
        string SE_RESTORE_NAME = "SeRestorePrivilege";

        string tmpHive = "offlineSystemHive";
        string offlineHive = "E:\\Windows\\system32\\config\\SYSTEM";

        LUID RestoreLuid = new LUID();
        LUID BackupLuid = new LUID();

        TOKEN_PRIVILEGES TP = new TOKEN_PRIVILEGES();
        TOKEN_PRIVILEGES TP2 = new TOKEN_PRIVILEGES();

        retval = OpenProcessToken(GetCurrentProcess(), TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, ref token);
        retval = LookupPrivilegeValue(null, SE_RESTORE_NAME, ref RestoreLuid);
        retval = LookupPrivilegeValue(null, SE_BACKUP_NAME, ref BackupLuid);

        TP.PrivilegeCount = 1;
        TP.Attributes = SE_PRIVILEGE_ENABLED;
        TP.Luid = RestoreLuid;
        TP2.PrivilegeCount = 1;
        TP2.Attributes = SE_PRIVILEGE_ENABLED;
        TP2.Luid = BackupLuid;

        retval = AdjustTokenPrivileges(token, 0, ref TP, 1024, 0, 0);
        retval = AdjustTokenPrivileges(token, 0, ref TP2, 1024, 0, 0);

        int rtnVal = RegLoadKey(HKU, tmpHive, offlineHive);
        Console.WriteLine(rtnVal); //should be 0

        RegistryKey baseKey = Registry.Users.OpenSubKey("offlineSystemHive\\ControlSet001\\Control\\ComputerName\\ComputerName");
        Console.WriteLine(baseKey.GetValue("ComputerName"));
        baseKey.Close();

        rtnVal = RegUnLoadKey(HKU, tmpHive);
        Console.WriteLine(rtnVal); //should be 0
    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:55:24.860

您需要使用[此处](http://msdn.microsoft.com/en-us/library/8zha3xws.aspx)`RegistryKey.OpenRemoteBaseKey`说明的方法。请注意，根据链接的 msdn 文档：

> 为了远程打开密钥，服务器和客户端计算机都必须运行远程注册表服务，并启用远程管理。

要启用远程注册表服务，请使用评论中提到的链接 Blorgbeard：[http ://technet.microsoft.com/en-us/library/cc754820.aspx](http://technet.microsoft.com/en-us/library/cc754820.aspx)

这是一个示例：

```
 RegistryKey FetchedRemoteMachineKey;

 FetchedRemoteMachineKey = RegistryKey.OpenRemoteBaseKey(
                           RegistryHive.CurrentUser, RemoteMachineName).OpenSubKey(
                           "Machine"); 
```

# javascript - 通过虚拟帧缓冲设备绘制到 HTML5 Canvas

> ID：15328681
> 
> 赞同：2
> 
> 时间：2013-03-10T22:47:58.910
> 
> 标签：javascript, html, html5-canvas, framebuffer

如何将在浏览器之外运行的程​​序的输出绘制到画布上？我正在考虑使用虚拟帧缓冲区，但不确定如何进行该过程。我认为必须使用 JavaScript 作为中介对像素数据进行一些中间处理或映射。

有没有人可以提供任何建议或见解？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-11T17:18:42.147

我知道这个线程有点老了......

作为[Guacamole](https://github.com/glyptodon/guacamole-client) (Linux/Apache/Java) 的替代品，您可以看看[Myrtille](https://github.com/cedrozor/myrtille) (Windows/IIS/C#)。它适用于 HTML4（使用 div 和 xhr）和 HTML5（使用 canvas 和 websockets）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:41:10.000

HTML5 画布不是为此而设计的。它旨在从 Web 读取图像（或视频）数据并将其显示为正常的 http 下载或 xmlHttpRequest。当您需要将外部应用程序生成的图像数据获取到 Web 浏览器的 javascript 引擎中时，您需要将该图像数据公开为 Web 服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T08:30:24.920

感谢 MarkE 和 Philipp 的推动，我发现似乎是合适解决方案的开端。

虽然它不直接涉及帧缓冲区，但我发现 Guacamole 是一个 HTML5 远程桌面网关，[http](http://guac-dev.org/) ://guac-dev.org/它只使用 Ajax 和 HTML5 在使用 vnc 或 RDP 协议的远程系统的桌面上呈现浏览器。它是开源的，在我看来是一个合适的起点。

# c - matlab生成的thunk文件的目的是什么？

> ID：15328687
> 
> 赞同：5
> 
> 时间：2013-03-10T22:48:28.993
> 
> 标签：c, matlab, dll, loadlibrary, thunk

当从 matlab 调用外部 C 库 (DLL) 时，matlab 似乎首先会尝试`filename_thunk_pcwinXX.dll`在临时目录中生成一个名为（其中 XX 是 32 或 64 取决于操作系统）的 thunk 文件。

在 matlab 文档中，它提到该文件是外部 DLL 和 Matlab 之间的接口，因此它不包含原始外部 DLL 的任何其他数据。

问题是，我写了一个库，在运行时可能会调用其他库，当库调用某些库（不是全部，我的库和这里的其他库是 64 位的）时，matlab 总是会给我一些奇怪的结果甚至崩溃DLL）。

当从其他 C/C++ 程序而不是 matlab 调用时，我所有的库函数都可以完美地工作。

我只是想知道，为了让 matlab 正常工作，我的库在运行时调用的这些其他库是否也需要获取某种 thunk 文件？我简直不敢相信，但我也不知道 matlab 如何处理外部库的确切方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-15T17:01:25.183

我最近不得不[深入研究同样的问题](https://ofekshilon.com/2016/07/15/on-matlabs-loadlibrary-proto-file-and-pcwin64-thunk/)。完整的技术细节在链接中，但简短的回答是：

> **thunk DLL 是关于调整调用约定**
> 
> thunk 函数 boolint32int32doubleThunk 在 Matlab 调用约定中接收其参数：所有参数在堆栈上连续传递，无类型并在 sizeof(size_t)（x64 中为 64 字节）边界上对齐。它还接收一个指向实际 DLL 导出的函数指针，并在将参数复制到本地类型变量后 - 使用其本机调用约定调用此函数。

# objective-c - 字符串中的字符数（不是字节数）

> ID：15328688
> 
> 赞同：5
> 
> 时间：2013-03-10T22:48:47.983
> 
> 标签：objective-c, string, string-length, glyph, charactercount

在objective-c的字符串中，如果我说类似的话，`[myStr length];`它会返回一个字节数，但是我可以用什么来返回字符串中的字符数。

例如：
带有字母“a”的
字符串返回长度为 1 带有单个表情符号的字符串返回长度为 2（有时甚至为 4）

这是因为那是字符串中的字节数……我只需要字符数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T23:21:11.423

我只是掀起了这种方法。将其添加到`NSString`类别中。

```
- (NSUInteger)characterCount {
    NSUInteger cnt = 0;
    NSUInteger index = 0;
    while (index < self.length) {
        NSRange range = [self rangeOfComposedCharacterSequenceAtIndex:index];
        cnt++;
        index += range.length;
    }

    return cnt;
}

NSString *a = @"Hello";
NSLog(@"%@ length = %u, chars = %u", a, a.length, a.characterCount);
NSString *b = @" Emoji ";
NSLog(@"%@ length = %u, chars = %u", b, b.length, b.characterCount); 
```

这产生：

> 你好长度 = 5，字符 = 5
> 表情符号长度 = 11，字符 = 9

# hosting - 在不支持它的主机上运行 ASP.NET 4.5 站点？

> ID：15328691
> 
> 赞同：1
> 
> 时间：2013-03-10T22:49:08.043
> 
> 标签：hosting, asp.net-4.5

我在我的网站上使用水晶技术。然而他们还没有安装 asp.net 4.5，据我所知，在不久的将来没有计划这样做。是否可以通过上传所有需要的 DLL 在尚未安装的主机上运行 ASP.NET 4.5 站点？如果没有被视为建设性的和封闭的，请提前道歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T03:50:59.787

这是不可能的。.NET Framework 本身提供了许多新的 4.5 功能，并且需要在计算机上安装这些二进制文件（mscorlib.dll、System.dll、System.Web.dll 等）。它们不能放在 bin/ 文件夹中。

# c++ - 多态数组找出其中有哪些孩子

> ID：15328698
> 
> 赞同：1
> 
> 时间：2013-03-10T22:49:41.163
> 
> 标签：c++, polymorphism

这只是为了学习目的，因为我似乎在其他任何地方都找不到这样的答案..所以我有多个问题..我不会做这样的事情，但我只想知道，因为我的大脑需要我知道或者我剩下的一天会很不舒服。

假设我有以下课程：

```
class Control
{
    //virtual stuff..
};

class Button : public Control
{
    //More virtual stuff..
};

class CheckBox : public Control
{
    //More virtual stuff..
}; 
```

因此 Button 和 CheckBox 是同一个母控件的姐妹。

现在假设像 moi 这样好奇的人看到这样的东西：

```
std::vector<Control> ListOfControls;    //Polymorphic Array.
ListOfControls.push_back(Button());     //Add Button to the Array.
ListOfControls.push_back(CheckBox());   //Add CheckBox to the Array. 
```

如何判断 Array 包含哪些数据类型？我怎么知道 ListOfControls[0] 拥有一个 Button 而 ListOfControls[1] 拥有一个 CheckBox？我读到您很可能必须进行动态转换，如果它不返回 null，那就是特定的数据类型：

```
if (dynamic_cast<Button*>(ListOfControls[0]) == ???) //I got lost.. :( 
```

另一件事让我忘记：

假设上面的类相同，你如何判断：

```
std::vector<void*> ListOfControls;          //Polymorphic Array through Pointer.
ListOfControls.push_back(new Button());     //Add Button to the Array.
ListOfControls.push_back(new CheckBox());   //Add CheckBox to the Array. 
```

有没有办法在没有动态转换的情况下完成上述两个示例，或者是否有某种技巧可以绕过它？我读到动态演员通常是不需要的。

最后，你可以从父母向下投到孩子吗？

```
Button Btn;
Control Cn;

Btn = (Button) Cn; //??? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T22:50:34.097

[**由于切片**](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)，您不能拥有多态对象的容器；你需要有一个指向多态对象的指针的容器。不过，您是对的；您必须使用`dynamic_cast`或`typeid`获取数组包含指针的对象的运行时类型。

但是，您应该尝试编写不依赖于多态对象的真实类型的代码；您应该概括基类中的接口，只需在指针上调用这些成员函数。这使您的代码*更*简洁，更可扩展，只需对现有代码进行最少的修改。

# ios - 如何在 iOS 6 中为文本添加下划线？

> ID：15328704
> 
> 赞同：9
> 
> 时间：2013-03-10T22:50:05.537
> 
> 标签：ios, objective-c, string

我试图在标签中强调一些文本。但是，我不知道如何获取标签中整个文本的范围。这是我到目前为止所拥有的：

```
NSMutableAttributedString *mat = [self.tableLabel.attributedText mutableCopy];
[mat addAttributes:@{NSUnderlineStyleAttributeName: @(NSUnderlineStyleSingle)} range://??];
self.tableLabel.attributedText = mat; 
```

我应该为范围添加什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-10T22:51:59.947

对于您可能想要使用的范围：

```
NSMakeRange (0, mat.length); 
```

像这样：

```
NSMutableAttributedString *mat = [self.tableLabel.attributedText mutableCopy];
[mat addAttributes:@{NSUnderlineStyleAttributeName: @(NSUnderlineStyleSingle)} range:NSMakeRange (0, mat.length)];
self.tableLabel.attributedText = mat; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-20T10:16:53.077

```
NSMutableAttributedString *attributedString =[[NSMutableAttributedString alloc] initWithString:strComplete];

[attributedString addAttribute:NSUnderlineStyleAttributeName
                         value:@(NSUnderlineStyleSingle)
                         range:[strComplete rangeOfString:strFirst]];

[attributedString addAttribute:NSForegroundColorAttributeName
                         value:[UIColor redColor]
                         range:[strComplete rangeOfString:strSecond]];

cell.textLabel.attributedText = attributedString; 
```

# ruby-on-rails - 如何将格式参数发送到 Rails 中的显示操作

> ID：15328711
> 
> 赞同：0
> 
> 时间：2013-03-10T22:50:35.907
> 
> 标签：ruby-on-rails

我似乎无法弄清楚如何在不破坏路线的情况下将参数传递给 show 动作。我正在尝试这个：

```
<%= link_to image_tag('excell.jpg'), affiliate_path(id: @affiliate.id, format: 'xls') %> 
```

但我得到这个错误：

```
No route matches {:action=>"show", :controller=>"affiliates", :id=>nil, :format=>"xls"} 
```

为什么id没有通过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:55:01.583

不要传递`id:`选项，而是将整个对象作为第一个参数传递给帮助程序：

```
affiliate_path(@affiliate, format: 'xls') 
```

# c# - 在 C# 中缩短 DllImport 的数量？

> ID：15328712
> 
> 赞同：0
> 
> 时间：2013-03-10T22:50:42.773
> 
> 标签：c#, .net, dllimport, interopservices

这是我的 C# 代码示例。有没有办法减少 DllImport 属性的数量？

```
namespace CSLib
{
    class Program
    {
        static void Main(string[] args)
        {
            CLib.test();
            CLib.test2(3);
            A a = new A() { a = 9, b = 5 };
            CLib.test3(ref a);
        }
    }
    class CLib
    {
        [DllImport("path/to/CDLL", CallingConvention = CallingConvention.Cdecl)]
        public static extern void test();

        [DllImport("path/to/CDLL", CallingConvention = CallingConvention.Cdecl)]
        public static extern void test2(int a);

        [DllImport("path/to/CDLL", CallingConvention = CallingConvention.Cdecl)]
        public static extern void test3(ref A a);
    }

    [StructLayout(LayoutKind.Sequential)]
    struct A
    {
        [MarshalAs(UnmanagedType.I4)]
        public int a, b;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:53:17.883

要么将方法公开为 COM 方法，要么围绕它们创建 C++/CLI 包装器。

# c# - 确定文件是否是有效的图像格式

> ID：15328713
> 
> 赞同：1
> 
> 时间：2013-03-10T22:50:44.893
> 
> 标签：c#, image

我正在使用 C# 在 Windows 中为一个小项目工作，我需要确定一个文件（没有任何扩展名）是否是有效的图像文件。是否有任何内置的库函数，以便我可以简化执行它的任务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T23:03:03.953

采用

```
Image.FromFile(path); 
```

如果文件`path`不是有效的图像，它会抛出。

# batch-file - 批处理 - 提取多个 zip，重命名在同一目录中提取的文件

> ID：15328718
> 
> 赞同：4
> 
> 时间：2013-03-10T22:51:15.560
> 
> 标签：batch-file, zip, extract

嗨，我有很多 zip 文件位于`g:\toto`. 这些 zip 包含一些文件。我想在同一个目录（`g:\toto\extracted`）中提取所有 zip，然后重命名 zip 的各种文件。

示例 1：

```
www_12567.vp.zip : 3 files : alpha.doc, beta.xls, teta.doc 
```

我想在提取后，用 zip 的名称重命名文件

```
www_12567.vp.alpha.doc, www_12567.vp.beta.xls, www_12567.vp.teta.doc 
```

示例 2：

```
www_12.vp.zip : 3 files : al.doc, bea.xls, tta.doc
www_12.vp.al.doc, www_12.vp.bea.xls, www_12.vp.tta.doc 
```

我找到[了这个问题](https://stackoverflow.com/questions/11634784/rename-extracted-file-based-on-zip-file-in-batch')，但它谈到 .txt 并且 zip 包含一个文件，所以它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T00:35:44.123

在不知道存档内容的情况下，您无法知道要重命名哪些文件，因为您将它们放入可能已经包含其他文件的目录中。

但是，如果有一个专门的目录来临时放置文件，这会容易得多。以下是您可以使用它的方法：

```
@ECHO OFF
SET "srcdir=G:\toto"
SET "tgtdir=G:\toto\extracted"
SET "tmpdir=G:\toto\extracted-tmp"
FOR %%Z IN ("%srcdir%\*.zip") DO (
  *unpack "%%Z" with your favourite tool into "%tmpdir%"*
  FOR %%I IN ("%tmpdir%\*") DO MOVE "%%I" "%tgtdir%\%%~nZ.%%~nxI"
) 
```

当然，在运行批处理文件之前临时目录需要是空的。您可以在循环之前添加`DEL "%tmpdir%\*"`某处以确保它是。

另一个注意事项是，以上假设档案不包含子目录，或者至少，文件是在没有子目录的情况下提取的。

**更新**

如果您使用 7-Zip 归档器来处理`.zip`文件，那么您的提取命令可能如下所示：

```
7z e "%%Z" -o"%tmpdir%" 
```

免责声明：我不是 7-Zip 的活跃用户。这是我用来作为参考来提出上述命令的：

*   [7-Zip 命令行示例](http://www.dotnetperls.com/7-zip-examples)

# parsing - 消除野牛中的歧义

> ID：15328720
> 
> 赞同：2
> 
> 时间：2013-03-10T22:51:39.383
> 
> 标签：parsing, bison, context-free-grammar, flex-lexer, ambiguity

我正在用野牛编写一个简单的解析器。解析器检查程序是否有关于我的以下语法的任何语法错误：

```
%{
#include <stdio.h>
void yyerror (const char *s) /* Called by yyparse on error */
{
    printf ("%s\n", s);
}
%}
%token tNUM tINT tREAL tIDENT tINTTYPE tREALTYPE tINTMATRIXTYPE 
%token tREALMATRIXTYPE tINTVECTORTYPE tREALVECTORTYPE tTRANSPOSE
%token tIF tENDIF tDOTPROD tEQ tNE tGTE tLTE tGT tLT tOR tAND
%left "(" ")" "[" "]"
%left "<" "<=" ">" ">="
%right "="
%left "+" "-"
%left "*" "/"
%left "||"
%left "&&"
%left "==" "!="

%% /* Grammar rules and actions follow */
prog: stmtlst ;
stmtlst: stmt | stmt stmtlst ;
stmt: decl | asgn | if;
decl: type vars "=" expr ";" ;
type: tINTTYPE | tINTVECTORTYPE  | tINTMATRIXTYPE | tREALTYPE | tREALVECTORTYPE 
      | tREALMATRIXTYPE ;
vars: tIDENT | tIDENT "," vars ;
asgn: tIDENT "=" expr ";" ;
if: tIF "(" bool ")" stmtlst tENDIF ;
expr: tIDENT | tINT | tREAL | vectorLit | matrixLit | expr "+" expr| expr "-" expr
  | expr "*" expr | expr "/" expr| expr tDOTPROD expr | transpose ;
transpose: tTRANSPOSE "(" expr ")" ;
vectorLit: "[" row "]" ;
matrixLit: "[" row ";" rows "]" ;
row: value | value "," row ;
rows: row  | row ";" rows ; 
value: tINT | tREAL | tIDENT ;
bool: comp | bool tAND bool | bool tOR bool ;
comp: expr relation expr ;
relation: tGT | tLT | tGTE | tLTE | tNE | tEQ ;
%%
int main ()
{    
    if (yyparse()) {
        // parse error
        printf("ERROR\n");
        return 1;
    }
    else {
        // successful parsing
        printf("OK\n");
        return 0;
    }
} 
```

代码可能看起来又长又复杂，但我认为我要问的不需要完整的代码，但无论如何我更喜欢编写代码。我确信我的语法是正确的，但模棱两可。当我尝试通过编写“bison -d filename.y”来创建程序的可执行文件时，我收到一条错误消息，指出**冲突：13 shift/reduce**。我在这个文件的开头定义了运算符的优先级，我尝试了很多这些优先级的组合，但我仍然得到这个错误。我怎样才能消除这种歧义？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T23:05:32.693

`tOR`, `tAND`, 并且`tDOTPROD`还需要指定它们的优先级。

# magento - Magmi进口价格变动后，特价显示？

> ID：15328721
> 
> 赞同：2
> 
> 时间：2013-03-10T22:51:42.273
> 
> 标签：magento, magmi

通过 Magmi 导入更改了定价的产品后，我会看到带有新价格显示和旧价格的“仅限现在”。我只更新价格，所以我不知道为什么“仅限现在”会突然开始显示。如果我通过 Magento 管理员对任何受影响的产品进行硬性保存，价格将不再显示。有任何想法吗？

谢谢！

# java - java中的xml文件

> ID：15328724
> 
> 赞同：0
> 
> 时间：2013-03-10T22:51:54.300
> 
> 标签：java, xml, api

我下载了适用于 java 的 Google Calendar API，并且对 xml 文件的内容感到非常困惑。我对java很陌生。我应该寻找哪些资源来了解如何操作这些 xml 文件的内容？以下是内容示例：

```
<!-- samples build Properties -->
  <property name="sample.calendar.basedir"
value="${build}/sample/calendar"/>
  <property name="sample.calendar.src.home"
value="${sample.calendar.basedir}"/> 
```

具体来说，我试图弄清楚“$”的作用以及花括号之间的内容是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:59:29.483

**Edit: If you're really desperate, use grep.**

```
$ cd /path/to/base/dir/
$ find . -type f | xargs grep "ant.file.calendar" 
```

Then you can see all the places where it's used, and find where it's defined.

* * *

The ${} syntax refers to variables that are defined **(a)** in `.properties` files **(b)** between `<properties>` or `<property>` XML tags or **(c)** by other means, such as environment variables or runtime behavior.

To give you an example,

```
<?xml>
<project>
  <properties>
    <jetty.port>8080</jetty.port>
  </properties>
  <build>
    ... 
    <port>${jetty.port}</port>
  </build>
</project> 
```

You might encounter the above in the pom.xml file for a Jetty webapp. You see how the `${jetty.port}` property is defined between the `<properties>` tags. This is one way to define it.

In your case, the `${build}` variable is defined somewhere, but it's impossible to say without looking at your directory. It may even be defined in the same XML file where you see it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:36:01.353

有问题的 XML 文件似乎是一个 Ant 构建文件。

如果您需要了解它，则需要阅读 Ant。它是一种构建软件的工具，您可以通过谷歌搜索“apache ant”来查找信息。

但也许你不需要了解它；也许你只需要运行它。也许你甚至不需要这样做。你没有说你想要达到的目标，所以很难说。

# css - css - 即使在缩放时也可以填充整个页面

> ID：15328726
> 
> 赞同：0
> 
> 时间：2013-03-10T22:52:05.407
> 
> 标签：css, zooming

是否可以使用 css 来制作`<html>`和/或`<body>`元素来填充浏览器视口的 100% 宽度，无论它放大多少？

目前，我将 html 和 body 设置为 100% - 但经过一定程度的放大后，它停止了，并且我的标题等被丑陋的切断了。

如果我将它设置为 5000px 它可以工作，但显然这也会影响非缩放。

因此缩放似乎会覆盖 100% 宽度，因为它会在某个点停止，我想克服这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T01:29:52.380

没有代码示例很难说，但请确保您没有任何具有固定宽度、填充、边距、边框的元素 - 例如 div`width: 500px;`肯定会向您的浏览器添加滚动并将祖先标签推出浏览器视口边界。

# php - Facebook 顶部共享 url，按用户更新间隔和 mysql 选择更新

> ID：15328727
> 
> 赞同：1
> 
> 时间：2013-03-10T22:52:05.800
> 
> 标签：php, mysql, facebook, concurrency, share

我知道标题很复杂，但我一直在寻找一些建议，但一无所获。

只是想问一下我的想法是否正确。

我需要为我的网站项目（图像、文章等）制作一个包含大约 10 个项目的顶级 Facebook 共享页面

这很简单，我将只从 facebook graph api 获取共享计数并在数据库中更新，我不想在基于 fb 共享的一些 ajax 调用中进行它，它可能会被滥用。

每个项目都有上次更新的日期时间，创建日期和喜欢数据库中的字段。

我还需要在 24 小时、7 天和一个月内制作顶级共享网址，所以这个想法很简单：

1.  用户查看一个项目，每 10 分钟从 fb graph api 获取此 url 的共享计数并在数据库中更新，数据库还存储上次更新时间。
2.  每次用户查看该项目时，网站都会检查上次更新日期时间，如果超过 10 分钟，它会调用 fb api 并进行更新。每 10 分钟降低一次 fb api 调用。

这基本上是可行的，但是有一个问题——并发性。

当项目被选择然后在 php 我检查最后一次更新是否是 10 分钟前或更长时间，然后我才调用 fb api 然后更新共享计数（如果大于当前）和其余数据，因为远程通话成本高昂，并且会降低 fb api 的使用率。

因此，在用户查看项目之前，它们会被更新，但更新取决于选择，由于时间检查和远程调用，我无法在一个 SQL 语句中完成，所以一个用户可以输入，然后另一个用户可以在 10 之后输入分钟，然后有可能它会多次调用 fb api，并更新很多次，用户越多，调用和更新越多，这不是很好。

任何建议如何解决这个问题？我做得对吗？也许有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:40:05.320

您可以将 api 检查与用户交互完全分离，并有一个单独的预定进程每 10 分钟收集一次 facebook 数据，无论用户如何

或者，如果您更愿意采用这种事件驱动模型，那么您需要考虑使用“互斥锁”。基本上，在某处（在文件或数据库等中）设置一个标志，表示当前正在运行一个检查进程，而不是运行另一个。

# python - 获取：'TypeError：只能将元组（不是“int”）连接到元组'，即使它是一个 int

> ID：15328728
> 
> 赞同：2
> 
> 时间：2013-03-10T22:51:35.077
> 
> 标签：python, python-3.x

```
num_1 = 3
num_2 = 5
num_3 = 15
div_1 = 1000/3
div_2 = 1000/5
div_3 = 1000/15
sum_1 = 0
sum_2 = 0
sum_3 = 0
i = 0
while (i<300):
    sum_1 = sum_1 + i*3,
    i = i + 1
    print (sum_1)
i = 0
while (i<div_2):
    sum_2 = sum_2 + i*5,
    i += 1
i = 0
while (i<div_1):
    sum_3 = sum_3 + i*5,
    i += 1
print (sum_1) 
```

输出：

```
(0,)
Traceback (most recent call last):
  File "C:/Users/xxxxx/Documents/Python/1-p.py", line 12, in <module
    sum_1 = sum_1 + i*3,
TypeError: can only concatenate tuple (not "int") to tuple 
```

我是 Python 的初学者，我正在尝试编写一个简单的代码。

我不确定出了什么问题。谁能帮帮我。对此，我真的非常感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T22:55:32.483

您在不应该使用逗号的地方使用逗号，意外地创建了元组：

```
sum_1 = sum_1 + i*3,  # < no comma needed there 
```

去掉那些逗号，你的代码就可以工作了。

逗号在 Python 中创建一个元组：

```
>>> 2,
(2,) 
```

# c++ - C++ 和 MySQL - 如何在我的查询中包含变量？

> ID：15328745
> 
> 赞同：3
> 
> 时间：2013-03-10T22:53:48.823
> 
> 标签：c++, mysql, sql

我想我可能在这里遗漏了一些非常明显的东西，但是我已经为此苦苦挣扎了太久，而且我的 C++ 已经生锈了（10 岁以上）

下面的代码工作正常，但我需要能够将变量传递到 lname 的查询中。如果我在字符串或字符数组中构建查询，我会收到一个错误，即它与 SQLWCHAR* 的参数类型不兼容

我知道下面的代码很容易受到 sql 注入的影响，但这是对孤立系统的一次性攻击，所以我真的比其他任何事情都更追求简单......

```
SQLHENV env;
SQLHDBC dbc;
SQLHSTMT  sql_hStmt;
SQLRETURN ret;
SQLWCHAR outstr[1024];
SQLSMALLINT outstrlen;

SQLAllocHandle(SQL_HANDLE_ENV, SQL_NULL_HANDLE, &env);
SQLSetEnvAttr(env, SQL_ATTR_ODBC_VERSION, (void *) SQL_OV_ODBC3, 0);
SQLAllocHandle(SQL_HANDLE_DBC, env, &dbc);

ret = SQLDriverConnect(dbc, NULL, L"DSN=myDSN", SQL_NTS, NULL, 0, NULL, SQL_DRIVER_COMPLETE);

ret = SQLAllocHandle(SQL_HANDLE_STMT, dbc, &sql_hStmt);
SQLWCHAR* SQL = L"select * from DB.employees where lname='Smith'";
ret = SQLExecDirect(sql_hStmt, SQL, SQL_NTS);

SQLFetch(sql_hStmt); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T00:20:44.803

这里有两个问题，一个是构造一个包含您想要的查询的字符串，另一个是将该字符串作为参数传递给函数。

我的建议是尽可能保持“C++”，直到达到这些 C 边界。所以我们应该使用`std::wstring`字符串处理，直到它需要成为 C 风格的字符串：

```
std::wstring statementText = L"select * from DB.employees where lname='Smith'";
ret = SQLExecDirect(sql_hStmt, const_cast<SQLWCHAR*>(statementText.c_str()), SQL_NTS); 
```

成员函数返回一个指向以 null 结尾的`c_str()`数组（即 C 风格的字符串）的指针，但该指针的类型为`const wchar_t*`; 也就是说，这个 C 风格的字符串的内容不能被修改。

`SQLWCHAR*`这是一个问题，因为`wchar_t*`; 它不承诺不处理数据。这就是为什么我包含`const_cast`, 以`const`从`c_str()`值中删除 。

**这不是您通常想要做的事情。** `const_cast`可以说是最可怕的演员阵容，因为您直接打开了未定义行为的大门，因为修改 const 对象是 UB：

```
const int x = 0;
const int* p = &x; // anyone using this pointer can't modify x

int* bad = const_cast<int*>(p); // but this one is not so good
*bad = 5; // undefined behavior 
```

不过，这里没问题的原因是它*实际上*`SQLExecDirect`并没有修改它传递的字符串。这只是一个没有使用 const 的实现错误，所以我们把它拿走是可以的。（这种缺少 const 的错误在 C 语言中很常见。）

 *如果您确实需要一个*可以*修改的缓冲区，那么从当前版本的 C++ (C++11) 开始，您可以安全地执行此操作：

```
std::wstring statementText = L"select * from DB.employees where lname='Smith'";
ret = SQLExecDirect(sql_hStmt, &statementText[0], SQL_NTS); 
```

我们正在获取第一个元素的地址，它本身位于一个以 null 结尾的数组中；另一个 C 风格的字符串。不过，这一次，我们有一个可修改的数组；类型已经匹配。

（我注意到这在 C++11 中是可以的的原因是，*从技术上讲*，在以前的版本 C++03 中，这种行为并没有得到保证。它实际上是有意的，但是在标准中的措辞有错误不是这样。实际上，无论哪种方式都可以。）

无论您想使用哪一个，都取决于您。有些人会争辩说一直使用`&str[0]`，所以我们绝对没有 UB，我会争辩记录你的意图和信念，即该函数不会修改字符串并抛弃 const 但最终以 const 心态运行。如果发生了不好的事情，从 const 中放松下来比希望你穿上它更容易。

需要注意的重要一点是，所有这些返回的指针（或者`str.c_str()`或`&str[0]`）只有在`str`对象本身还活着并且没有被修改的情况下才有效。这是不好的：

```
const wchar_t* get_query()
{
    std::wstring result = /* build query */;

    // oops, this pointer stops being meaningful when result stops existing!
    return result.c_str();
} 
```

* * *

有了这些，构建这些字符串就很容易了。我们有`std::wstringstream`：

```
std::wstringstream ss; 

ss << "this is basically an expanding buffer that accepts anything std::wcout will";
ss << std::endl;
ss << "this includes integers " << 5 << " and other stream-insertable types"; 
```

所以你可能想要这样的东西：

```
std::wstring build_query(const std::wstring& name)
{
    // you can provide a starting string
    std::wstringstream result(L"select * from DB.employees where lname=");

    result << "\'" << name << "\'";

    return result.str(); // this captures the buffer as a C++ string
}

// Remember, this would be bad!
//
// SQLWCHAR* SQL = const_cast<SQLWCHAR*>(build_query(L"Smith").c_str());
//
// Because the C++ string returned by build_query is temporary;
// it stops existing at the end of this full expression,
// so SQL would be a bad pointer. This is right:

std::wstring SQL = build_query(L"Smith");
ret = SQLExecDirect(sql_hStmt, const_cast<SQLWCHAR*>(SQL.c_str()), SQL_NTS); 
```

希望有帮助。

* * *

另外，我会避免使用除宏之外的全大标识符，因为阅读 C++ 代码的人绝大多数都期望这些名称是宏。此外，我在示例代码中使用了 C++ 风格的强制转换；你也应该这样做。C 风格的强制转换 ( `(type)value`) 太强大了，不安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T02:19:27.490

我建议你准备一个参数化的查询字符串。看[这里](http://dev.mysql.com/tech-resources/articles/mysql-connector-cpp.html#prepstmts)

如果您每次都只是简单地连接字符串来构建一个新查询，那么您的网站可能会受到 SQL 注入攻击

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-18T15:44:50.770

您可以通过以下方式简单地做到这一点：

你可以这样做

```
 int var = 10;
   string str = to_string(var);
   string requete="INSERT INTO stat(temps) VALUES (\"";
   requete += str;
   requete += "\")";
   mysql_query(&mysql,requete.c_str()); 
```

只需在 mySql 中指定该字段的类型为 int 、 double 、 float 等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-25T22:06:05.330

谢谢[野兽](https://stackoverflow.com/users/3530803/the-beast)。如果您正在记录两个或更多数据，则可以如下使用。

```
int state;    
string mesafe = to_string(getdata1);
string aci = to_string(getdata2);
string query = "INSERT INTO tarama (mesafe,aci) VALUES (\"";
            query += mesafe;
            query += "\",\"";
            query += aci;
            query += "\")";
qstate = mysql_query(conn, query.c_str()); 
```

我好几天都解决不了这个问题。现在问题解决了。*

# ruby - 一次插入多条记录

> ID：15328746
> 
> 赞同：0
> 
> 时间：2013-03-10T22:53:50.537
> 
> 标签：ruby, ruby-on-rails-3

我有一组单选按钮返回以下哈希：

```
{"1"=>"1", "3"=>"2"} 
```

键代表 event_id，值代表 regoption_id。我需要一次将这些插入到订阅表中。我尝试了以下方法：

```
params[:children].each do |child|    
  Subscription.create({:event_id => child[0], :regoption_id => child[1]}).save
end 
```

这最终只保存了**一个**无线电组，而不是全部保存在哈希中。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T00:25:13.237

有一个名为[activerecord-import](https://github.com/zdennis/activerecord-import)的 gem ，可以有效地插入多条记录。它适用于许多流行的数据库后端，并且可以对大多数后端做正确的事情。这正是您想要的：它接受一个对象实例数组或一个哈希值数组，并在单个语句中将它们插入到表中。

这是 gem 文档中的一个使用示例：

```
books = []
10.times do |i| 
  books << Book.new(:name => "book #{i}")
end
Book.import books 
```

# css - 像facebook一样的悬停效果

> ID：15328749
> 
> 赞同：0
> 
> 时间：2013-03-10T22:54:06.963
> 
> 标签：css, hover

我确实创建了一个`<li>`这样的。

```
<li>
<input type="checkbox" value="<?php echo $value; ?>" id="form_friend_<?php echo $value; ?>" name="form[friend][]" />
<img id="img_friend_<?php echo $value; ?>" src="">
<label for="form_friend_<?php echo $value;?>" ><?php echo $label;?></label>
</li> 
```

我怎样才能像facebook那样为每个朋友做悬停效果呢？

在牢房的任何地方，例如 Allen Yee，我都可以激活他向他发送请求。我怎样才能用我的`<li>`?

![在此处输入图像描述](../Images/6da1620997b236fc204614eb310144de.png)

**更新**

在头部：

```
<script type="text/javascript">
var lis = document.getElementsByTagName('li');

for( var i = 0, l = lis.length; i < l; i++ ) {
lis[i].onclick = function() {

    var c = this.getElementsByTagName('input')[0];

    if ( c.checked )
        c.checked = false;
    else
        c.checked = true;
};
}
<script> 
```

在体内：

```
<li >
  <input type="checkbox" value="1" id="form_friend_1" name="form[friend][]" />
  <img id="img_friend_1" src="">    <label for="form_friend_1" >My name</label>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T23:03:52.737

如果你想让里面的所有内容`li`触发`checkbox`被选中，你应该把所有的内容都放在`label`元素里面。

```
<li>
    <label for="form_friend_<?php echo $value;?>" >
        <input type="checkbox" value="<?php echo $value; ?>" id="form_friend_<?php echo $value; ?>" name="form[friend][]" />
        <img id="img_friend_<?php echo $value; ?>" src="">
        <?php echo $label;?>
    </label>
</li> 
```

在这种情况下，您甚至不需要 上的`for`属性`label`，因为`label`将应用于其中的任何表单控件（`input`、`select`等）。

如果你想在`li`鼠标悬停时改变元素的样式，你可以使用一个名为的[伪类](http://www.w3.org/TR/CSS2/selector.html#dynamic-pseudo-classes)`:hover`

例如：

```
li:hover {
    background: #000;
} 
```

当它悬停时，它会改变`li`元素的背景。

## **更新**

由于您使用的框架不允许您将所有`li`的内容包装在`label`元素中，我建议您使用 javascript 解决方案。

这是一个简单的例子：

```
window.onload = function() {

    var lis = document.getElementsByTagName('li');

    for( var i = 0, l = lis.length; i < l; i++ ) {
        lis[i].onclick = function(e) {

            e = e || window.event;
            var el = e.target || e.srcElement;

            if ( el.nodeName == 'INPUT' ) return;

            var c = this.getElementsByTagName('input')[0];

            if ( c.checked ) {
                c.checked = false;
                this.style.background = 'white';
            } else {
                c.checked = true;
                this.style.background = 'blue';
            }

            return false;
        };
    }
} 
```

上面的代码将获取所有`li`元素的列表，当单击这些元素时，将获取其中的第一个`input`标签并验证它是否被选中，如果是，它将被取消选中，否则将被选中。此外，它为每种情况设置背景颜色。

这个脚本模拟了一个`input`类型`checkbox`如果被包裹在一个`label`元素中会如何表现。

## 更新 2

正如您在下面的评论中指出的那样，`checkbox`它无法正常工作。这是因为发生了[Event Bubbling](http://www.quirksmode.org/js/events_order.html)。Stackoverflow中也有几个[主题](https://stackoverflow.com/search?q=%5Bjavascript%5D+event+bubbling)对它是什么进行了深入的解释。

我更新了上面的代码片段以更正`checkbox`功能。

请参阅[jsFiddle](http://jsfiddle.net/Wce45/5/)。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T23:02:46.843

您可以在 css 和 JQuery 中执行悬停效果。在 CSS 中，你可以使用 '#idname:hover' 或 '.classname:hover'。在 JQuery 中，您可以使用：

```
$('selector that you select').hover(function(){ 
```

});

# android - __ANDROID__ 宏突然没有定义

> ID：15328751
> 
> 赞同：7
> 
> 时间：2013-03-10T22:54:08.750
> 
> 标签：android, macros, android-ndk

我正在开发一个使用 NDK 的应用程序（我写的所有内容都发生在 r6b 和 r8d 上）

一切正常，我想开始尝试调试我的 C 代码。

我遵循了这个[http://tools.android.com/recent/usingthendkplugin](http://tools.android.com/recent/usingthendkplugin)教程，但是`NDK_DEBUG = 1`标记到我的构建命令，突然我开始在代码中遇到错误，即使删除该标记后也没有消失，从 Android 4.2 更改。 2 回到 2.2，改变我正在使用的 NDK，或者我能想到的任何其他东西。

问题现在发生在这样的语句中

```
#ifdef __ANDROID__
some cool android code
#else
some pretty awesome iOS code
#endif 
```

`__ANDROID__`由于某种原因没有定义，导致 Eclipse 并`ndk-build`尝试编译 iOS 代码而不是 Android 的代码会发生什么

恢复我所做的一切似乎没有任何效果。重新启动eclipse也没有。清理项目，完全删除`libs`和`obj`目录也不起作用..

有什么建议么？

谢谢！

编辑：

也许值得补充的是，使用 ndk-build 成功完成构建本身。我认为这可能是一个日食问题，但即使是这样，它仍然是一个错误，我无法启动该应用程序

另外，以防万一，重新启动计算机也不起作用。

编辑2：问题存在于通过网络运行相同工作区的另一台计算机上，我的猜测与工作区有关，所以我尝试删除`.metadata`文件夹并再次添加项目。

删除`.metedata`文件夹第一次修复了它，但几分钟后（我设法在我的平板电脑上构建和运行应用程序）同样的问题又回来了，删除`.metadata`没有用

**编辑 3：**

还是不行。

但是，我可以确认这不是项目特定的问题，因为所有在 Eclipse 中具有 Native 支持的项目现在都这样做了。

其他不起作用的事情：

*   创建一个空项目，添加原生支持。
*   完全切换到另一个不相关的工作空间并执行上述测试
*   下载新版本的 eclipse (juno), `CDT`& `ADT`(正在使用 eclipse ADT 包)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-11T09:54:02.080

只是让你知道：

*   当您使用`Android.mk`文件和`ndk-build`时，`ANDROID`宏是预定义的（`-DANDROID`使用详细输出构建时请参阅额外的 C 标志），
*   但如果您使用 Android Standalone Toolchain，则`__ANDROID__`改为预定义。

所以我建议你使用：

```
#if defined(ANDROID) || defined(__ANDROID__)
  /* ... */
#endif 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-30T16:19:59.867

显然，只要提供正确的选项，它就应该在内部定义`__ANDROID__`一个特定的[GCC 宏。](https://gcc.gnu.org/onlinedocs/gcc-4.7.4/gcc/GNU_002fLinux-Options.html)但是，由于对选项的控制主要委托给 NDK，因此不应依赖`__ANDROID__`宏的定义。就我们所知（或关心）而言，NDK 背后的编译器可能不是 GCC。使用 NDK 时，请检查`ANDROID`.

编辑：clang 现在也定义了`__ANDROID__`宏

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T00:58:21.807

如果其他人遇到此问题：

我在另一台计算机上打开了工作区（工作区位于 Dropbox 文件夹中），但问题仍然存在于另一台计算机上，这可能只是工作区问题，所以我从工作区中删除了 .metadata 文件夹。

我不得不重新添加项目，但这样做之后，现在一切似乎都正常了。

# java - toString() 方法错误

> ID：15328752
> 
> 赞同：-1
> 
> 时间：2013-03-10T22:54:09.600
> 
> 标签：java, arrays, nullpointerexception, tostring

```
public class X {
// some fields
private Route[] tabT = new Route[50]; // [1]

public String toString() {
    int i;
    String descT = "";
    for (i = 0; i < tabT.length; i++)
        descT += tabT[i].toString();
    String description;
    description = "MESSAGE " + lastName
            + "\nMESSAGE " + firstName
            + "\nMESSAGE " + year
            + "\nMESSAGE " + address
            + "\nMESSAGE " + number
            + "\nMESSAGE " + descT
            + "\n";
    return description;
} 
```

我的类包含一些字段，包括来自另一个类的对象列表`tabT`。在`toString()`方法中，我想显示这些字段和另一个对象的字段，但我不知道为什么它会显示错误。当我在元素上创建标签时，它不会显示错误。

```
Exception in thread "main" java.lang.NullPointerException
    at Chauffeur.toString(Chauffeur.java:38)
    at java.lang.String.valueOf(String.java:2854)
    at java.io.PrintStream.println(PrintStream.java:821)
    at AutoSuperieur.main(AutoSuperieur.java:6) 
```

正好在这条线上`descT += tabT[i].toString();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:56:18.623

```
if (tabT != null) 
  descT += (tabT[i] == null?"":tabT[i].toString()); 
```

To make sure you understand it how it works. You've got `NullPointerException` in the `toString()`. Then you should check what variable could be `null` value. After editing your question I see that `tabT` is initialized, so the `if (tabT != null)` check is not nessesary but it protect the code above from the `NullPointerException` because in the second line I use reference `tabT` that might not been initialized. Next the operator [] dereferncing the elements of the array that could be `null` value. The ternary operator `?` checks that value and if it's `null` then returns `""` otherwise `toString()` the value of the element. To make this call possible the value should not be `null`. Then I use grouping `()` to return the result string to the concatenate operator `+=` that incrementally concatenates old and new values.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T23:05:00.760

您可以使用`String.valueOf()`来处理空值。

```
descT += String.valueOf(tabT[i]); 
```

此外，操作员`+=`执行复制（至少在一般情况下）。您应该更好地使用`StringBuilder`来处理大连接。

# java - Millis 中的时间计算没有产生预期的结果。有人可以帮忙说明原因吗？

> ID：15328754
> 
> 赞同：-4
> 
> 时间：2013-03-10T22:54:23.313
> 
> 标签：java, date, time, business-logic

我有以下代码，通常需要一些时间实例，将它们转换为毫秒以进行一些相当精确的计算，并根据具体情况在这些时间或小时之间产生等效的天数。我认为代码最能解释我想要实现的目标。以下是一些片段...

```
private int hours = 0;

/* This is intended to get the days between 'startDate' and 'endDate'
 * and ensure it is between zero & the specified 'range' of days, inclusive*/
public int getPeriodBtw(Date startDate, Date endDate, int range)
{
    int daysBtw = 0;
    Calendar constantDate = Calendar.getInstance();
    constantDate.setTime(startDate);
    Calendar currentDate = Calendar.getInstance();
    currentDate.setTime(endDate);
    long rangePeriod = Period.ConvertDaysToMillis(range);
    long duration = (constantDate.getTimeInMillis() + rangePeriod) - currentDate.getTimeInMillis();
    daysBtw = (int)Period.ConvertMillisToDays(duration);
    if(duration >= 0 && duration <= rangePeriod)
    {
        if(daysBtw == 0){
            hours = (int)Period.ConvertMillisToHours(duration);
        }
    }
    return daysBtw;
} 
```

现在，上面的逻辑对我来说似乎都很紧密而且很好，但令人惊讶的是，随着`currentDate`变化，我得到了奇怪的结果。我的意思是，通常我会期待这样的事情......见下图；

如果`constantDate = 10:00am`
如果`range = 1 day`从`constantDate`
and 开始，让我们说`currentDate = 2:00pm`在同一天（即在 内`range`），
那么应该在and is之间`daysBtw`返回 `= 0`
几个小时 现在这意味着是Less ， 因此应该是`constantDate``currentDate` `4hrs`
`currentDate` `4hrs``range`
`duration``1day(24hrs) - 4hrs = 20hrs`

当然，我认为在从纪元开始的毫秒偏移中处理这个问题是这样的；

`10:00am(millis) + 1day(millis) - 2:00pm(millis)`=`20hrs`

```
long duration = (constantDate.getTimeInMillis() + rangePeriod) - currentDate.getTimeInMillis();
hours = (int)Period.ConvertMillisToHours(duration); 
```

所以`hours`应该返回 `= 20`

现在，如果`currentDate`更改为`3:00pm`，按照前面描述的相同逻辑，不应该`hours = 19`???... 问题是，我的程序`hours = 21`改为。

我真的很困惑我可能做错了什么。是我的逻辑有问题吗？？？...或者它在我的代码中的某个地方？？？...承认我已经花了几个小时断断续续地做这件事，我知道这很简单，我感到非常糟糕，但是时间不像往常一样是我的朋友，我必须继续做一些不那么琐碎的事情。任何形式的帮助将不胜感激。谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:03:07.410

好的...我早些时候确实找到了解决此问题的方法...原来是由于；
1\. 我这边的一些逻辑不好，还有
2\. 使用`java.util.concurrent.TimeUnit`将毫秒转换为天时会丢失一些精度

```
TimeUnit.DAYS.convert(args, TimeUnit.MILLISECONDS); 
```

它仍然让我感到震惊，为什么他们必须让该`convert`方法接收其毫秒参数`long`并返回天数`long`，而不创建设置首选的选项`RoundingMode`....无论如何，它已添加到我的 (STAY-AWAY-FROM) 短列表中-IT ) API。大声笑！

# c++ - 使用 QXmlStreamReader 读取 XML 文件

> ID：15328756
> 
> 赞同：7
> 
> 时间：2013-03-10T22:54:36.200
> 
> 标签：c++, xml, qt

我想使用 读取 XML 文件`QXmlStreamReader`，但我真的不知道问题出在哪里。我的函数读取第一个标签的内容，但随后停止。

XML文件的格式：

```
 <?xml version="1.0" encoding="utf-8"?>
    <student>
        <firstName>mina</firstName> 
        <lastName>jina</lastName>
        <grade>13</grade>
    </student>
    <student>
        <firstName>Cina</firstName> 
        <lastName>fina</lastName>
        <grade>13</grade>
    </student> 
```

功能：

```
void MainWindow::open() {
    QFile file(QFileDialog::getOpenFileName(this,"Open"));
    if(file.open(QIODevice::ReadOnly)) {
        QXmlStreamReader xmlReader;
        xmlReader.setDevice(&file);
        QList<Student> students;
        xmlReader.readNext();
        //Reading from the file
        while (!xmlReader.isEndDocument())
        {
            if (xmlReader.isStartElement())
            {
                QString name = xmlReader.name().toString();
                if (name == "firstName" || name == "lastName" ||
                        name == "grade")
                {
                    QMessageBox::information(this,name,xmlReader.readElementText());
                }
            }else if (xmlReader.isEndElement())
            {
                xmlReader.readNext();
            }
        }
        if (xmlReader.hasError())
        {
            std::cout << "XML error: " << xmlReader.errorString().data() << std::endl;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T12:10:14.470

问题在于 XML 文档的形式。我需要创建一个根标签。

文件的新形式是：

```
<?xml version="1.0" encoding="utf-8"?>
    <students>
        <student>
            <firstName>mina</firstName> 
            <lastName>jina</lastName>
            <grade>13</grade>
        </student>
        <student>
            <firstName>Cina</firstName> 
            <lastName>fina</lastName>
            <grade>13</grade>
        </student>
    </students> 
```

# jquery - html2canvas 错误：未捕获错误：IndexSizeError：DOM 异常 1

> ID：15328764
> 
> 赞同：9
> 
> 时间：2013-03-10T22:55:15.870
> 
> 标签：jquery, canvas, html2canvas

我正在使用 html2canvas 在画布上转换 div。像这样：

```
<script src="js/libs/jquery-1.7.1.min.js"></script>
<script src="js/libs/jquery-ui-1.8.17.custom.min.js"></script>
<script src="js/html2canvas/html2canvas.js"></script>
...
<body id="body">
  <div id="demo">
    ...
  </div>
</body>
<script>
$('#demo').html2canvas({
onrendered: function( canvas ) {
  var img = canvas.toDataURL()
  window.open(img);
}
});
</script> 
```

我收到此错误：html2canvas.js 中的**“未捕获错误：IndexSizeError：DOM 异常 1”**：

```
ctx.drawImage( canvas, bounds.left, bounds.top, bounds.width, bounds.height, 0, 0, bounds.width, bounds.height ); 
```

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-11T01:05:59.577

每当您`drawImage`在画布上调用并想要裁剪图像时，您必须传入 9 个值。

```
ctx.drawImage(
imageObject,
sourceX,
sourceY,
sourceWidth,
sourceHeight,
destX,
destY,
destWidth,
destHeight); 
```

现在有很多东西！很容易出错：为了避免它们，让我解释一下在裁剪图像时 drawImage 是如何工作的。

想象在一张纸上画一个正方形。您正在绘制的正方形的左上角位于`sourceX`像素和`sourceY`像素处，其中 0 是您的纸的左上角。您正在绘制的正方形的像素尺寸由`sourceWidth`和定义`sourceHeight`。

您定义的正方形内的所有内容现在都将被剪切并粘贴到画布内的位置（以像素为单位）`destX`和`destY`（其中 0 是画布的左上角）。

因为我们不在现实生活中，所以您切割的正方形可能会被拉伸并具有不同的尺寸。这就是为什么您还必须定义`destWidth`和`destHeight`

这是所有这些的图形表示。

![没有任何](../Images/06fb11773aa4e3d6fc546687a8f068ea.png)

回到您的问题，`Uncaught Error: IndexSizeError: DOM Exception 1`通常在您尝试切割的正方形大于实际的纸片时出现，或者您试图将纸片切割到不存在的位置（例如`sourceX = -1`，由于显而易见的原因，这是不可能的）。

我不知道是什么`bounds.left`，`bounds.top`其他的是什么，但我 99.9% 确定它们是错误的值。尝试`console.log`将它们与您提供的图像对象（在本例中为画布）进行比较。

```
console.log(canvas.width);
console.log(canvas.height);
console.log(bounds.left);
console.log(bounds.top);
ecc.... 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-10T15:12:55.267

[这](https://github.com/niklasvh/html2canvas/issues/183)是`html2canvas`错误报告。

通过修补 html2canvas.js 文件，我能够修复未捕获的**错误：IndexSizeError: DOM Exception 1 。**

替换这个：

```
ctx.drawImage(canvas, bounds.left, bounds.top, bounds.width, bounds.height, 0, 0, bounds.width, bounds.height); 
```

这样：

```
var imgData = canvas.getContext("2d").getImageData(bounds.left, bounds.top, bounds.width, bounds.height);
ctx.putImageData(imgData, 0, 0); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-29T10:46:15.210

我会说您可能在 div 上有一些`float`属性或`fixed`位置，导致容器的高度为 0，而内容具有较高的高度。我之前遇到过这个问题，因为*html2canvas*无法处理大于其容器的内容。例如，如果你有这样的事情：

```
<div>
  <img url="..." style="float: right;">
</div> 
```

*html2canvas*将引发此错误，因为`div`它的高度为 0 而`img`更大。可能的更正将是强制 div 的高度优于图像高度。

感谢 Saturnix 的详细回答，您帮助我找出了它的来源。

我希望这可以帮助你，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-14T15:40:26.803

我有同样的问题。当我尝试在隐藏元素中使用画布时发生了问题。就我而言，我使用的是 Bootstrap 模态和其中的画布。

解决方案是：**“在元素完全可见后实现画布代码”**。

在我的情况下，我必须使用`$('.modal').on('shown.bs.modal', function(){})`而不是`$('.modal').on('show.bs.modal', function(){})`，因为模态元素完全出现在`shown.bs.modal`事件上；)

# php - Should I declare global variables at the top of a PHP file?

> ID：15328776
> 
> 赞同：0
> 
> 时间：2013-03-10T22:56:39.130
> 
> 标签：php, global

I'm using Netbeans IDE, it shows a warning next to undeclared variables - very useful.

If I have this at the top of a file

```
global $CFG; 
```

then the warnings go away because the variable has been declared.

But is this good practice? Are they any advantages? The code still works without the declaration.

Note: This is for files that have code outside of functions.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T23:00:22.300

it is good practice to declare variables before using them. Declaring them as global within the global scope is superfluous though. You could just do

Instead of doing

`global $CFG;`

you can just do

`$CFG;`

The only time declaring them with the `global` prefix is "useful" is when you do it inside a function to access a globally scoped variable from within the function - but this is usually bad practice, very few cases where this is absolutely necessary.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:59:32.213

No, if you wish to use a variable outside of its scope (for example inside a function) you may pass it or globalize it inside the function

```
function xoxo(){
   global $var;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T23:27:42.660

有两件事让我对以这种方式“声明”变量保持警惕。

首先，任何函数之外的大量代码可能意味着您的代码需要重构。在您的代码的顶层，您可能有几行调用脚本或页面的主要操作，但是说您的声明将放在“文件的顶部”表明还有更多。

其次，在 PHP 中“声明”一个变量通常与赋予它某种初始值同义。例如，`$params = array()`在构建模板参数列表之前进行设置，例如`$params['foo'] = get_foo()`. 这种初始化应始终与使用它的代码保持接近，这样如果您稍后重新分解它，代码就会随之而来。

为什么总是*初始化*一个变量是一个好主意的一个例子是，如果你最终将整个代码块放在某种循环中。在上面的例子中，如果我渲染了多个模板并且忘记了初始化`$params`，`$params['foo']`最终可能会被传递给每个模板。

# java - 最小和最大的输入

> ID：15328779
> 
> 赞同：0
> 
> 时间：2013-03-10T22:57:10.507
> 
> 标签：java, max, minimum

我被分配编写一个程序，该程序读取一系列整数输入并打印 - 最小和最大输入 - 以及偶数和奇数输入的数量

我想出了第一部分，但对如何让我的程序显示最大和最小感到困惑。到目前为止，这是我的代码。我怎样才能让它也显示最小的输入？

```
public static void main(String args[])
{
      Scanner a = new Scanner (System.in);
      System.out.println("Enter inputs (This program calculates the largest input):");

      double largest = a.nextDouble();
      while (a.hasNextDouble())
      { 
          double input = a.nextDouble();
          if (input > largest)
          {
              largest = input;
          }
      }

      System.out.println(largest);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T23:06:32.053

最简单的解决方案是使用类似`Math.min`和`Math.max`

```
double largest = a.nextDouble();
double smallest = largest;
while (a.hasNextDouble()) {
    double input = a.nextDouble();
    largest = Math.max(largest, input);
    smallest = Math.min(smallest, input);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T23:01:53.173

```
double largest = a.nextDouble();
double smallest = largest;
while (a.hasNextDouble()) {
    double input = a.nextDouble();
    if (input > largest) {
        largest = input;
    }
    if (input < smallest) {
        smallest = input;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T23:03:13.007

以相同的方式跟踪最小值。

```
public static void main(String args[])
{
    Scanner a = new Scanner (System.in);
    System.out.println("Enter inputs (This program calculates the largest and smallest input):");

    double firstInput = a.nextDouble();
    double largest = firstInput;
    double smallest = firstInput;
    while (a.hasNextDouble())
    { 
        double input = a.nextDouble();
        if (input > largest)
        {
            largest = input;
        }
        if (input < smallest)
        {
            smallest = input;
        }
    }

    System.out.println("Largest: " + largest);
    System.out.println("Smallest: " + smallest);
    }
} 
```

# ruby - 使用 am/pm 将 24 整数转换为 12 小时

> ID：15328780
> 
> 赞同：6
> 
> 时间：2013-03-10T22:57:10.850
> 
> 标签：ruby, date, datetime, time

我正在使用红宝石。

我试图弄清楚如何转换以下内容..

`14`变成`2 pm`

`0`变成`12 am`

`23`变成`11 pm`

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-10T23:10:55.563

```
[14, 0, 23].map { |hour| Time.parse("#{hour}:00").strftime("%l %P") }
=> [" 2 pm", "12 am", "11 pm"] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T05:27:34.357

我喜欢@Mori 的回答，因为它让 Time 完成了繁重的工作，但使用 Benchmark 我们可以看到哪个 CPU 最密集：

这就是我写的：

```
def am_pm(hour)
  meridian = (hour >= 12) ? 'pm' : 'am'
  hour = case hour
        when 0, 12
          12
        when 13 .. 23
          hour - 12
        else
          hour
        end

  "#{ hour } #{ meridian }"
end 
```

基准：

```
require 'benchmark'
require 'time'

def mori(hour)
  Time.parse("#{hour}:00").strftime("%l %P")
end

def convert h
  p, l = h.divmod(12)
  "#{l.zero? ? 12 : l} #{p.zero? ? "a" : "p"}m"
end

def am_pm(hour)
  meridian = (hour >= 12) ? 'pm' : 'am'
  hour = case hour
        when 0, 12
          12
        when 13 .. 23
          hour - 12
        else
          hour
        end

  "#{ hour } #{ meridian }"
end

def hour_24_to_12(hour_24)
  hour_12 = hour_24 - 12

  if hour_12 == 0
    return "12 pm"
  elsif hour_12 == -12
    return "12 am"
  elsif hour_12 > 0
    return "#{hour_12} pm"
  elsif hour_12 < 0
    return "#{hour_24} am"
  else
    # The passed-in time is outside the range o 0-23,
    # so you may need to deal with this however you
    # feel is appropriate
  end
end

HRS = [0, 14, 23]
N = 100_000

puts RUBY_VERSION

HRS.each { |hr| puts "am_pm:         #{ am_pm(hr)         }" }
HRS.each { |hr| puts "convert:       #{ convert(hr)       }" }
HRS.each { |hr| puts "hour_24_to_12: #{ hour_24_to_12(hr) }" }
HRS.each { |hr| puts "mori:          #{ mori(hr)          }" }

Benchmark.bm(13) do |b|
  b.report('am_pm')         { N.times { HRS.each { |h| am_pm(h)         } } }
  b.report('convert')       { N.times { HRS.each { |h| convert(h)       } } }
  b.report('hour_24_to_12') { N.times { HRS.each { |h| hour_24_to_12(h) } } }
  b.report('mori')          { N.times { HRS.each { |h| mori(h)          } } }
end 
```

哪个输出：

```
1.9.3
am_pm:         12 am
am_pm:         2 pm
am_pm:         11 pm
convert:       12 am
convert:       2 pm
convert:       11 pm
hour_24_to_12: 12 am
hour_24_to_12: 2 pm
hour_24_to_12: 11 pm
mori:          12 am
mori:           2 pm
mori:          11 pm
                    user     system      total        real
am_pm           1.230000   0.000000   1.230000 (  1.228159)
convert         1.280000   0.000000   1.280000 (  1.286672)
hour_24_to_12   0.640000   0.000000   0.640000 (  0.642993)
mori           20.940000   0.020000  20.960000 ( 21.003620) 
```

同样的测试只在 Ruby 2.0-p0 下运行：

```
2.0.0
am_pm:         12 am
am_pm:         2 pm
am_pm:         11 pm
convert:       12 am
convert:       2 pm
convert:       11 pm
hour_24_to_12: 12 am
hour_24_to_12: 2 pm
hour_24_to_12: 11 pm
mori:          12 am
mori:           2 pm
mori:          11 pm
                    user     system      total        real
am_pm           0.440000   0.000000   0.440000 (  0.433303)
convert         0.410000   0.000000   0.410000 (  0.412183)
hour_24_to_12   0.200000   0.000000   0.200000 (  0.201894)
mori            9.910000   0.010000   9.920000 (  9.921940) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T23:19:09.617

```
def convert h
  p, l = h.divmod(12)
  "#{l.zero? ? 12 : l} #{p.zero? ? "a" : "p"}m"
end
convert(14) # => "2 pm"
convert(0)  # => "12 am"
convert(23) # => "11 pm" 
```

# php - imagercreatefromjpeg not working after change of server

> ID：15328782
> 
> 赞同：0
> 
> 时间：2013-03-10T22:57:21.150
> 
> 标签：php, permissions, imagecreatefrompng

After I changed server the imagecreatefromjpeg doesn't work. I'm thinking it might be because of permissions of some sort because I had to change the way of creating directories after the change.

Any clues on how to fix this?

Code:

```
 ...
    $imageFile = $_FILES['image']['tmp_name'];
    list($width, $height) = getimagesize($imageFile);
    echo "This gets written";
    $src = imagecreatefromjpeg($imageFile);
    echo "But not this:";
    ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T23:03:56.433

您必须通过在构建过程中添加以下标志来确保使用 GD 编译 PHP `--with-gd[=DIR]`：. 您的托管公司应该能够为您提供帮助。

有关更多信息，请参阅以下链接：[http ://www.php.net/manual/en/image.installation.php](http://www.php.net/manual/en/image.installation.php)

# css - css file on googlecode charset issue with TortoiseSVN

> ID：15328786
> 
> 赞同：1
> 
> 时间：2013-03-10T22:58:17.533
> 
> 标签：css, character-encoding, tortoisesvn, hebrew, google-code

I have a css file containing hebrew characters:

```
.className:after {
     content: "x סגור";
} 
```

The file is stored on googlecode SVN; When viewing this file in the browser I see `????` instead of what is expected.

I tried adding `@charset` at the top of the file as well as setting TortoiseSVN `mime-type` properties `svn:charset` to `utf-8` etc

When the same CSS is inside the html files, it renders great.

I assume this is the way the TortoiseSVN stores the file or how google is serving the file.

I've tried a few solutions as suggested here before, e.g. [Specifying a charset for stylesheets](https://stackoverflow.com/questions/9661399/specifying-a-charset-for-stylesheets), but none seems to solve my issue.

# bash - 无法让 sed 用我的 CSV 中的单词替换逗号

> ID：15328787
> 
> 赞同：0
> 
> 时间：2013-03-10T22:58:23.263
> 
> 标签：bash, csv, sed

您好，我正在使用 bash 通过使用 grep 从 html 文件中提取数据来创建 CSV 文件。问题是在获取数据然后使用 sed 取出后，在其中输入一个像 My_com 这样的词，这让我发疯了。这是我的代码。

```
time=$(grep -oP 'data-context-item-time=.*.data-context-item-views' index.html \
| cut -d'"' -f2)

title=$(grep -oP 'data-context-item-title=.*.data-context-item-id' index.html |\
cut -d'"' -f2)

sed "s/,/\My_commoms/g" $title
echo "$user,$views,$time,$title" >> test 
```

我不断收到此错误 sed：无法读取翻转：没有这样的文件或目录 sed：无法读取：没有这样的文件或目录等等

关于我的代码有什么问题的任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T23:09:58.847

您不能像这样直接在命令行上对文本使用 sed ；sed 需要一个文件，因此它将您的文本作为文件名读取。试试这个倒数第二行：

```
echo $title | sed 's/,/My_com/g' 
```

这样 sed 会看到文件上的文本（在这种情况下是标准输入）。另请注意，我在 sed 的参数中使用了单引号；在这种情况下，我认为这不会有任何区别，但一般来说，确保 bash 不会与命令混淆是一种很好的做法。

如果你不想使用`echo | sed`链，你也可以像这样重写它：

```
sed 's/,/My_com/g' <<< "$title" 
```

我认为这只适用于 bash，而不适用于 dash 等。这被称为“here-string”，bash 将右侧的内容传递`<<<`给其标准输入上的命令，因此您可以获得相同的效果。

# python - Removing set identifier when printing sets in Python

> ID：15328788
> 
> 赞同：23
> 
> 时间：2013-03-10T22:58:35.367
> 
> 标签：python, python-2.7, set

I am trying to print out the contents of a set and when I do, I get the set identifier in the print output. For example, this is my output `set(['a', 'c', 'b', 'e', 'd', 'f', 'gg', 'ff', 'jk'])`" for the code below. I want to get rid of the word `set`. My code is very simple and is below.

```
infile = open("P3TestData.txt", "r")
words = set(infile.read().split())
print words 
```

Here is my output again for easy reference: `set(['a', 'c', 'b', 'e', 'd', 'f', 'gg', 'ff', 'jk'])`

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-10T22:59:26.940

You could convert the set to a list, just for printing:

```
print list(words) 
```

or you could use `str.join()` to join the contents of the set with a comma:

```
print ', '.join(words) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T23:01:57.557

The `print` statement uses `set`'s implementation of `__str__()`. You can:

1.  Roll out your own printing function, instead of using `print`. A simple way to get a nicer formatting may be to use `list`'s implementation of `__str__()` instead:

    `print list(my_set)`

2.  Override the `__str__()` implementation in your own `set` subclass.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-01T00:45:52.207

这个子类适用于数字和字符：

```
class sset(set):
    def __str__(self):
        return ', '.join([str(i) for i in self])

print set([1,2,3])
print sset([1,2,3]) 
```

输出

```
set([1, 2, 3])
1, 2, 3 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T00:56:21.390

如果你想要花括号，你可以这样做：

```
>>> s={1,2,3}
>>> s
set([1, 2, 3])
>>> print list(s).__str__().replace('[','{').replace(']','}')
{1, 2, 3} 
```

或者，使用格式：

```
>>> print '{{{}}}'.format(', '.join(str(e) for e in set([1,'2',3.0])))
{3.0, 1, 2} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-18T14:08:10.987

如果在 Python 3 中打印一组数字，您也可以使用切片。

```
Python 3.3.5
>>> s = {1, 2, 3, 4}
>>> s
{1, 2, 3, 4}
>>> str(s)[1:-1]
'1, 2, 3, 4' 
```

这在移植回 Python2 时翻译得不好......

```
Python 2.7.6
>>> s = {1, 2, 3, 4}
>>> str(s)[1:-1]
'et([1, 2, 3, 4]'
>>> str(s)[5:-2]
'1, 2, 3, 4' 
```

另一方面，对于`join()`整数值，您必须先转换为字符串：

```
Python 2.7.6
>>> strings = {'a', 'b', 'c'}
>>> ', '.join(strings)
'a, c, b'
>>> numbers = {1, 2, 3, 4}
>>> ', '.join(numbers)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: sequence item 0: expected string, int found
>>> ', '.join(str(number) for number in numbers)
'1, 2, 3, 4' 
```

然而，这仍然比切片更正确。

# angularjs - Angularjs + yeoman login sample application

> ID：15328790
> 
> 赞同：1
> 
> 时间：2013-03-10T22:58:41.123
> 
> 标签：angularjs, yeoman

I am making a application with yeoman plus angular and I am having a few issues. I make the app with simple service call and authentication. The things which I need to know are as follow:

1.  How do i redirect after login?
2.  How to maintain session after login?
3.  Do I need to be on same page or do I need to add new route for it?

Please keep that in mind I am using for all this the route generator and controller.

My app structure is: call is going to controller and controller is giving call to service and service is doing the HTTP request and when the result comes it will print on the page.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:32:14.470

我更喜欢带有令牌身份验证的完整 REST API。

也许您可以阅读[http://pages.apigee.com/web-api-design-ebook.html](http://pages.apigee.com/web-api-design-ebook.html)或[http://shop.oreilly.com/product/9780596529260.do](http://shop.oreilly.com/product/9780596529260.do)

# c# - .NET 4.0 substitutes for .NET 4.5 namespaces

> ID：15328791
> 
> 赞同：4
> 
> 时间：2013-03-10T22:58:48.923
> 
> 标签：c#, asp.net, asp.net-mvc, .net-4.0, .net-4.5

There is some code for an MVC application which was built using .NET 4.5 as a framework in VS 2012\. My current system forces me to work on VS 2010\. I managed to open the VS2012 solution in my VS2010, but the thing is that VS2010 supports only up to .NET 4.

There are a few functions in the code which use dll files which are available only for .NET 4.5, for example `System.ComponentModel.DataAnnotations.Schema`.

So, are there any substitute functions/attributes which are available in .NET 4, which I could use to do the same that is being done on .NET 4.5 right now?

This is my current code using .NET 4.5:

```
 [Table("UserProfile")]
    public class UserProfile
    {
        [Key]
        [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
        public int UserId { get; set; }
        public string UserName { get; set; }
    } 
```

As you can see `DatabaseGeneratedAttribute` is available under the `System.ComponentModel.DataAnnotations.Schema` namespace, which is a part of .NET 4.5.

Any suggestions on what the corresponding functions/attributes that could be used in .NET 4 to represent the same logic?

**Note:** In the code snippet given above, I get errors on `Table` and `DatabaseGeneratedAttribute` as

> The type or namespace name 'Table' could not be found (are you missing a using directive or an assembly reference?)

and

> The type or namespace name 'DatabaseGeneratedAttributeAttribute' could not be found (are you missing a using directive or an assembly reference?)

respectively. So, I am guessing that I just need to find the corresponding classes in NET 4.0 and things would fall into place. Your help is deeply appreciated.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-08-26T10:38:03.360

从 .NET 4.5 更改为 4.0 后，我看到了同样的问题。根据[这篇文章](http://thedatafarm.com/data-access/ef5-where-are-my-dataannotations/)“有一个特殊版本的实体框架程序集”，用于 .NET 4.0 `DataAnnotations`，其中包含 .NET 4.5。

重新安装实体框架`System.ComponentModel.DataAnnotations.Schema`再次工作。通过在包管理器控制台中键入以下内容重新安装：

```
Uninstall-Package EntityFramework
Install-Package EntityFramework 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T09:43:59.353

在[这篇文章中](http://www.codeproject.com/Articles/468777/Code-First-with-Entity-Framework-5-using-MVC4-and)，作者声称能够使用`System.ComponentModel.DataAnnotations.Schema`在使用 VS2010 SP1 的 MVC4 应用程序中使用。

让我们知道这是否适合您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-30T12:43:54.027

Henrik 的解决方案也适用于相反的情况。我在从 .net 4.0 到 .net 4.5.1 以支持 MVC 5.2.3 时遇到问题。我得到了同样的错误。卸载并重新安装实体框架也解决了这种情况下的问题：

```
Uninstall-Package EntityFramework
Install-Package EntityFramework 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-04T19:17:54.257

包管理器控制台对我不起作用。我不得不去管理 Nuget 包来为我解决这个问题。我正在使用 VS.net 2013

# css - 浮动 div 一个并排时出现不希望的偏移

> ID：15328799
> 
> 赞同：1
> 
> 时间：2013-03-10T22:59:50.640
> 
> 标签：css, html

我有以下代码：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Home page</title>
    <style type="text/css">
      .mydiv {
        width:300px;float:left;background-color:#ff0000;height:250px;margin-right:10px
      }
    </style>
  </head>
  <body>
    <div style="margin-left:auto;margin-right:auto;width:1000px;clear:both">
      <div style="margin-right:auto;margin-left:auto;text-align:center;margin-top:5px;">This is the title</div>
    </div>
    <div style="margin-right:auto;margin-left:auto;clear:both;width:1000px;margin-top:10px">    
      <div class="mydiv">Div</div>
      <div class="mydiv">Div</div>
      <div class="mydiv">Div</div>
    </div>
  </body>
</html> 
```

问题是第二个和第三个 div 没有与第一个正确（水平）对齐。由于某些原因，垂直偏移使第二个和第三个 div 看起来比第一个低一点。为什么是这样？

谢谢

### 附言

我在 MacOS X 上使用 Chrome 25。希望它有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T23:07:17.990

这是因为您在三个红色框`clear: both;`的*父容器*上，如果您删除该属性，所有三个将按预期对齐。

您需要在最后一次浮动关闭*之后*`</div>`包含 clear 属性，或者您可以使用 clearfix 使用容器*上*`::after`的伪元素来清除其中的浮动元素。

 *您可以看到容器现在尊重浮动的红色框..

[**jsBIN**](http://jsbin.com/ojayis/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T23:13:18.557

随意戳戳告诉我修复偏移的方法是从三个ed的`clear: both;`父级中删除声明：`<div>``float``<div>`

```
<div style="width: 1000px">    
  <div style="…">Div</div>
  <div style="…">Div</div>
  <div style="…">Div</div>
</div> 
```

要使父级`<div>`“环绕” `float`ed `<div>`，您需要在 ed 之后添加`clear`一个`<div>`ed `float`：

```
<div style="width: 1000px">    
  <div style="…">Div</div>
  <div style="…">Div</div>
  <div style="…">Div</div>
  <div style="clear: both;" />
</div> 
```

您还可以使用“clearfix”（例如[HTML 5 Boilerplate](https://github.com/h5bp/html5-boilerplate/blob/master/css/main.css)中包含的那个`<div>`：

```
<div class="clearfix" style="width: 1000px">    
  <div style="…">Div</div>
  <div style="…">Div</div>
  <div style="…">Div</div>
</div> 
```*

# r - 连接内存 (R)

> ID：15328800
> 
> 赞同：5
> 
> 时间：2013-03-10T22:59:59.850
> 
> 标签：r, connection

我必须反复序列化（大）R 对象。为了避免对生成的原始向量进行重复的垃圾收集（在分析之后，事实证明我的脚本运行时间的一半都花在了`gc`！）我想要求 R 直接写入内存缓冲区——总是一样的，因为每次序列化后，我都会调用一个 C 函数，`.C`它可以直接在这个内存缓冲区上工作；我感兴趣的是这个 C 函数的结果。

那可能吗？有多不合理？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T17:07:53.850

我可能不明白你的问题，但你为什么不直接在 C++ 代码中使用 Rcpp 使用你的 R 对象。不会有副本，您也不需要任何序列化。

# php - Continuing a WordPress PHP Loop

> ID：15328806
> 
> 赞同：0
> 
> 时间：2013-03-10T23:00:39.640
> 
> 标签：php, wordpress, loops

I'm currently trying to develop a custom Wordpress theme, and on my homepage I need to add a second content block. I am using a plugin to do this, which simply requires me to add the following where I want the content block to be.

```
<?php the_block('Latest Products')?> 
```

However when I add this it seems to have no effect which I believe is due to the formatting of my php. I'm fairly new to php, so any help is greatly appreciated.

My code is as follows - I've cut out the best part of the HTML. I think it's something to do with that 'endforeach' tag?

```
<?php get_header(); ?>

<?php if(have_posts()) :?>
<?php while (have_posts()) : the_post(); ?>

<?php the_content(); ?>

<?php
 global $post;
 $myposts = get_posts('numberposts=4&category=1');
 foreach($myposts as $post) :
 ?>                     
<div class="blogsnippet">
<div class="postdate">
    <span class="top"><?php the_time ('j')?></span><br/><span class="bottom"><?php the_time('M');?></span>
</div>
<div class="postexcerpt">
<h3><a href="<?php the_permalink();?>"><?php the_title(); ?></a></h3>
<p><?php echo(get_the_excerpt());?></p>
</div>
</div>

<?php endforeach;?>             

<?php the_block('Latest Products')?>

<?php endwhile; endif; ?>

<?php get_footer(); ?> 
```

EDIT

Okay, so apparently it needs to be put outside the loop, however it still won't work. Any ideas?

```
<?php get_header(); ?>

<?php if(have_posts()) :?>
<?php while (have_posts()) : the_post(); ?>

<?php the_content(); ?>

<?php
 global $post;
 $myposts = get_posts('numberposts=4&category=1');
 foreach($myposts as $post) :
 ?>                     
<div class="blogsnippet">
<div class="postdate">
<span class="top"><?php the_time ('j')?></span><br/><span class="bottom"><?php     the_time('M');?></span>
</div>
<div class="postexcerpt">
<h3><a href="<?php the_permalink();?>"><?php the_title(); ?></a></h3>
<p><?php echo(get_the_excerpt());?></p>
</div>
</div>

<?php endforeach;?>             
<?php endwhile; endif; ?>

<?php the_block('Latest Products')?>

<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T23:46:43.293

这主要取决于插件实际在做什么，因为您的代码语法是正确的。

如果您使用的是[多个内容块](http://wordpress.org/extend/plugins/multiple-content-blocks/)插件并且使用的是最新的 Wordpress 版本 3.5.1，那么我相信该插件可能不兼容。我会检查插件与您的 Wordpress 安装的版本兼容性，因为这可能是您的问题。

**编辑：**

该插件通过对函数 the_content() 应用过滤器来工作，因此它只能通过在调用 the_content() 函数之前声明 the_block() 来工作。

一个解决方案可能是捕获输出 the_block() 并稍后使用 print 输出，例如：

```
<?php 
    ob_start();  
    the_block('Latest Products'); 
    $latest_products_contents = ob_get_contents(); 
    ob_end_clean();
?>
<!-- Further down.. -->
<?php echo $latest_products_contents; ?> 
```

# macros - Clojure Korma：无法运行聚合计数

> ID：15328814
> 
> 赞同：2
> 
> 时间：2013-03-10T23:01:55.493
> 
> 标签：macros, clojure, korma

我正在尝试使用 Clojure+Korma 运行一个简单的查询来提取记录数。这就是我想要做的：

```
(defmacro number-of [ref & filter]
  `(let [basetmp# (-> (kc/select* ~ref)
                      (kc/aggregate (count :*) :cnt))]
     (if ~filter
       (-> basetmp#
           (kc/where ~filter))
       basetmp#))) 
```

但是，如果我尝试使用此宏，我会收到一条错误消息：错误的 args (2) 数量传递给：**core$count**

如果在函数中执行该查询将完美地工作，但我无法发现的宏中有错误/缺失:(

谢谢，尼科

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T00:50:46.597

正如 ponzao 所指出的，您的计数错误。

看宏观膨胀

```
(number-of 'foo)  ;; expands to....

(clojure.core/let [basetmp__9167__auto__ (clojure.core/->
                                          (korma.core/select* 'foo)
                                          (korma.core/aggregate
                                            (clojure.core/count :*)
                                            :cnt))]
  (if nil
    (clojure.core/-> basetmp__9167__auto__ (korma.core/where nil))
    basetmp__9167__auto__)) 
```

因此，您需要防止宏中的计数被扩展为`clojure.core/count`，您可以使用 unquote/quote 来执行此操作：

```
(defmacro number-of [ref & filter]
  `(let [basetmp# (-> (kc/select* ~ref)
                      (kc/aggregate (~'count :*) :cnt))]
     (if ~filter
       (-> basetmp#
           (kc/where ~filter))
       basetmp#))) 
```

然后按预期扩展......

```
(clojure.core/let [basetmp__9137__auto__ (clojure.core/->
                                          (korma.core/select* 'foo)
                                          (korma.core/aggregate
                                            (count :*)
                                            :cnt))]
  (if nil
    (clojure.core/-> basetmp__9137__auto__ (korma.core/where nil))
    basetmp__9137__auto__)) 
```

生成的 SQL 看起来很合理：

```
(kc/as-sql (number-of 'foo))
"SELECT COUNT(*) \"cnt\" FROM \"foo\"" 
```

**更新：**
来自评论“计数实际上代表什么？” - 如果您意识到这`kc/aggregate`也是一个宏并且参数是某种“SQL 聚合”DSL，那么您也可以扩展`kc/aggregate`调用。您会发现`parse-aggregate`在 [engine.clj](https://github.com/korma/Korma/blob/master/src/korma/sql/engine.clj#L231)中有一个函数，它最终映射到`korma.sql.fn/agg-count`：

```
(clojure.core/let [q__2640__auto__ (kc/select* 'foo)]
  (korma.sql.engine/bind-query
    q__2640__auto__
    (clojure.core/let [res__2641__auto__ (korma.core/fields
                                           q__2640__auto__
                                           [(clojure.core/->
                                             q__2640__auto__
                                             (korma.sql.fns/agg-count
                                               :*))
                                            :cnt])]
      (if nil
        (korma.core/group res__2641__auto__ nil)
        res__2641__auto__)))) 
```

# perl - PSGI, LWP::UserAgent & PayPal IPN

> ID：15328816
> 
> 赞同：0
> 
> 时间：2013-03-10T23:01:59.237
> 
> 标签：perl, paypal, paypal-ipn, lwp, psgi

I have been trying for some time to get a simple PayPal IPN module working but keep getting a 400 Bad Request error from LWP::UserAgent. I am not sure why this is happening. PayPal pings me fine (I'm using the IPN simulator) and I can see the process in my app logs. I can call the PayPal validation URL via LWP::UserAgent without form content and that works fine, but once I include the request content for validation I get error 400\. If anyone knows about this please let me know.

-$self->{'_req'} is of type [Plack::Request](https://metacpan.org/module/Plack%3a%3aRequest)

```
my $url     = $test ? $VERIFY_URL_DEV : $VERIFY_URL;
my $ua      = new LWP::UserAgent();
my $req     = new HTTP::Request('POST', $url);
my $query   = 'cmd=_notify-validate&' . $self->{'_req'}->raw_body;

$req->content_type('application/x-www-form-urlencoded');
$req->content( $query );

my $res = $ua->request($req);

if ($res->is_error)
{
    # HTTP error, indicate an invalid notification.
    warn "There was an error validating this IPN.";
    warn $res->message;
    warn $res->error_as_HTML;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:29:33.087

问题出在 PayPal 方面。当我在沙盒而不是 IPN 模拟器中进行测试时，它运行良好。那非常令人沮丧。

# c# - 从 jquery 调用异步 .NET 4.5 Web 服务

> ID：15328817
> 
> 赞同：2
> 
> 时间：2013-03-10T23:02:01.383
> 
> 标签：c#, asp.net, jquery, async-await

我试图了解如何从 jquery 1.9.1 调用使用 async/await 的 .net 4.5 Web 服务（asmx）。js代码很经典：

```
$.ajax({
    type: "POST",
    url: "ws/UpdCategory",
    data: strData,
    async: true,
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    complete: saveCategory_onComplete
}); 
```

ws.cs 中的 web 服务，ws.asmx 后面的代码：

```
[WebMethod]
public async Task<int> UpdCategory(string jsonData)
{
    JsonGenericResponse objWmJson = new JsonGenericResponse();
    objWmJson.IsInError = "true";
    try
    {
        JavaScriptSerializer objJss = new JavaScriptSerializer();
        Dictionary<string, string> objDict = objJss.Deserialize<Dictionary<string, string>>(jsonData);
        DataIfCloudEspresso objData = new DataIfCloudEspresso();
        //
        StringBuilder objBuilder = new StringBuilder();
        objBuilder.Append("<?xml version=" + (char)39 + "1.0" + (char)39 + " encoding=" + (char)39 + ConfigurationService.XMLEncoding + (char)39 + "?>");
        objBuilder.Append("<Category>");
        .....various fields
        objBuilder.Append("</Category>");
        // the row below call the method on Data Access Layer
        int updatedCount = await objData.UpdCategory(objBuilder.ToString());
        return updatedCount;
    }
} 
```

最后是 DAL 方法：

```
public async Task<int> UpdCategorieArticoli(string xmlData)
{
    try
    {
        using (SqlConnection objConn = new SqlConnection(base.ConnectionString))
        {
            using (SqlCommand cmdADO = new SqlCommand("spUpd_Category", objConn))
            {
                cmdADO.Parameters.Add(new System.Data.SqlClient.SqlParameter("@XMLDoc", SqlDbType.Text));
                cmdADO.Parameters["@XMLDoc"].Value = xmlData;
                cmdADO.Parameters.Add(new System.Data.SqlClient.SqlParameter("@RETURN_VALUE", SqlDbType.Int));
                cmdADO.Parameters["@RETURN_VALUE"].Direction = ParameterDirection.ReturnValue;
                //
                cmdADO.CommandType = CommandType.StoredProcedure;
                //
                await objConn.OpenAsync().ConfigureAwait(false);
                return await cmdADO.ExecuteNonQueryAsync().ConfigureAwait(false);
            }
        }
    }
    catch (Exception)
    {
        throw;
    }
    finally
    {
    }
} 
```

问题是这样的：例如，如果从 Page_Load 调用 DAL 方法，则可以正常工作；相反，当从 Web 服务（从 javascript 调用）调用时，代码挂在等待 cmdADO.ExecuteNonQueryAsync() 的行上。

我想问题是来自客户端的上下文切换（来自浏览器的 js 代码）和背后的代码在服务器上运行，我不明白如何解决这个问题。我尝试了各种在谷歌上搜索的代码，但没有解决方案。

显而易见的范围是最大限度地使用异步代码以获得最大性能。

我尝试编写带有回调的旧样式 BeginExecuteNonQuery，但我还没有找到解决方案，说明如何将结果从 EndExecuteNonQuery 传递给调用 Web 服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T01:16:42.660

根据*[Is it possible to use async/await in webmethod asmx service 的](https://stackoverflow.com/q/11211701/41071)*评论，ASMX 根本不支持`async`。这就是你的代码不起作用的原因。它也与 jQuery 异步无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T00:51:26.917

jQuery 异步本身就是一个异步。这就是正在发生的事情。当您调用 Web 服务时，它会异步执行数据访问逻辑并向 Web 服务返回 http 响应 OK，这意味着该方法已成功执行，但没有返回任何结果。

当您从 Page_Load 调用它时，这意味着页面的渲染将为所有异步方法完成以执行渲染。

所以底线是不要在 Web 服务上使用异步，因为你在 jQuery 端有异步。

# python - 替换列表列表中的空元素

> ID：15328826
> 
> 赞同：2
> 
> 时间：2013-03-10T23:02:56.210
> 
> 标签：python

我是 python 的新手，我有一个奇怪的列表列表（用于科学实验），如下所示：

```
aaa=[['2.2', '2.05', '', '2.2', '2', '', '2.2', '2', '2.1', '2.05', '2', '2', '', '', '2.15', '2', '2.05', '2.1', '', '', '', '', ''], ['2.2', '2.05', '', '2.2', '2', '', '2.2', '2', '2.1', '2.05', '2', '2', '', '', '2.15', '2', '2.05', '2.1', '', '', '', '', ''], ['2.2', '2.05', '', '2.2', '2', '', '2.2', '2', '2.1', '2.05', '2', '2', '', '', '2.15', '2', '2.05', '2.1', '', '', '', '', ''], ['3.3', '3.4', '', '3.25', '3.25', '', '3.5', '3.5', '3.4', '3.6', '3.5', '3.3', '', '', '3.2', '3.3', '3.4', '3.3', '', '', '', '', '']] 
```

如您所见，其中一些列表包含空元素 ''。我想将上述列表（可能大小> 1000）中的空元素替换为“0.00”，我想知道实现这一目标的最pythonic（一个衬里会很棒）是什么。

显然，我可以使用 say i,j 遍历列表——但我确信 python 有一些 itertools 等方法，这些方法可能非常快。

钍

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T23:06:04.843

使用列表推导：

```
new_list = [[element or '0.00' for element in sublist] for sublist in big_list] 
```

# xaml - 应用程序级资源 XAML

> ID：15328831
> 
> 赞同：1
> 
> 时间：2013-03-10T23:03:43.033
> 
> 标签：xaml, windows-phone-8

如何在 XAML 中创建应用程序级资源？顺便说一句，我正在开发一个 Windows Phone 8 应用程序。

下面我有一个矩形，我想创建一个资源，可用于在点击时更改矩形的颜色：

```
<Rectangle Fill="#FFF4F4F5" 
           HorizontalAlignment="Left" 
           Height="100" 
           Stroke="Black"
           VerticalAlignment="Top"
           Width="100"
           x:Name="pad1"
           Tap="pad1_tap"           
 /> 
```

我读过一些类似的帖子说要使用：

```
<Application.Resources>
    <!-- Resources Here !-->
</Application.Resources> 
```

...但我的应用程序中没有名为“应用程序”的对象。尝试使用“Application.Resources”时，我收到一条错误消息：无法识别或无法访问成员资源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T23:15:33.943

Application 对象在您的`app.xaml`文件中。但仅当您希望整个应用程序共享您的资源时它才有用。如果您只需要在一页中，您可以在`PhoneApplicationPage`元素中声明您的资源：

```
<phone:PhoneApplicationPage.Resources>
    <!-- your resource -->
</phone:PhoneApplicationPage.Resources> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T23:11:24.480

您需要导入一个`mscorlib`库，然后使用`StaticResource`关键字引用您的资源，如下所示：

```
<Application
    x:Class="AppClass"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone">

    <Application.Resources>
        <sys:Int32 x:Key="Test">80</sys:Int32>
    </Application.Resources>
</Application> 
```

用法：

```
<Rectangle Fill="#FFF4F4F5" 
           HorizontalAlignment="Left" 
           Height="100" 
           Stroke="Black"
           VerticalAlignment="Top"
           Width="{StaticResource Test}"
           x:Name="pad1"
           Tap="pad1_tap"           
 /> 
```

# r - 剧情乱了

> ID：15328832
> 
> 赞同：1
> 
> 时间：2013-03-10T23:03:44.587
> 
> 标签：r, graph, plot

当我绘制它们时，我无法弄清楚为什么我的值是乱序的。前任。x 轴 0 显示 0.2 的值，x 轴 0.2 显示 0.6 的值，x 轴 0.6 显示 1.2 的值，x 轴 1.2 显示 0 的值。

R 版本 2.15.2 (2012-10-26) -- 在 Mac OS X 10.6.8 上运行“不给糖就捣蛋”

方法 穗 ELISA 试剂盒 鱼 光谱 conc conc2

```
1   Mekebri CNTRL   AbraxisRBT abraxis rbt 450 0.0900000        0.09
2   Mekebri CNTRL   AbraxisRBT abraxis rbt 450 0.0700000        0.09
3   Mekebri CNTRL   AbraxisRBT abraxis rbt 450 0.0700000        0.08
4   Mekebri CNTRL    EnviroRBT enviro  rbt 450 0.0900000        0.09
5   Mekebri CNTRL    EnviroRBT enviro  rbt 450 0.0700000        0.09
6   Mekebri CNTRL    EnviroRBT enviro  rbt 450 0.0700000        0.08
7   Mekebri   0.2   AbraxisRBT abraxis rbt 450 0.1100000        0.12
8   Mekebri   0.2   AbraxisRBT abraxis rbt 450 0.3000000        0.32
9   Mekebri   0.2   AbraxisRBT abraxis rbt 450 0.1000000        0.10    
10  Mekebri   0.2    EnviroRBT enviro  rbt 450 0.1100000        0.12
11  Mekebri   0.2    EnviroRBT enviro  rbt 450 0.3000000        0.32
12  Mekebri   0.2    EnviroRBT enviro  rbt 450 0.1000000        0.10    
13  Mekebri   0.6   AbraxisRBT abraxis rbt 450 0.1600000        0.16
14  Mekebri   0.6   AbraxisRBT abraxis rbt 450 0.1800000        0.18
15  Mekebri   0.6   AbraxisRBT abraxis rbt 450 0.1700000        0.17
16  Mekebri   0.6    EnviroRBT enviro  rbt 450 0.1600000        0.16
17  Mekebri   0.6    EnviroRBT enviro  rbt 450 0.1800000        0.18
18  Mekebri   0.6    EnviroRBT enviro  rbt 450 0.1700000        0.17
19  Mekebri   1.2   AbraxisRBT abraxis rbt 450 0.9680557 0.963486175
20  Mekebri   1.2   AbraxisRBT abraxis rbt 450 0.6040148 0.622156567
21  Mekebri   1.2   AbraxisRBT abraxis rbt 450 0.5665602   0.5849501
22  Mekebri   1.2    EnviroRBT enviro  rbt 450 0.9680557 0.963486175
23  Mekebri   1.2    EnviroRBT enviro  rbt 450 0.6040148 0.622156567
24  Mekebri   1.2    EnviroRBT enviro  rbt 450 0.5665602   0.5849501

plot(c(0,0.2,0.6,1.2),
with(mc, tapply(conc2, list(kit,spike), mean,na.rm=T))[1,],
type="b",lwd=2,
ylim=c(0,1),
xlab=expression(paste("Spike, ",mu,"g / L")),
ylab=expression(paste(mu,"g / L")),
col="blue")
points(c(0,0.2,0.6,1.2),
with(mc, tapply(conc2, list(kit,spike), mean,na.rm=T))[2,],
type="b",lwd=2,
ylim=c(0,1),
col="red")
legend(0.2,0.8,lty=1,lwd=2,
col=c("blue","red"),legend=c("Abraxis","EnviroLogix"))

dput(head(mc))
structure(list(method = structure(c(3L, 3L, 3L, 3L, 3L, 3L), .Label = c("Geis", 
"Mag", "Mekebri"), class = "factor"), spike = structure(c(4L, 
4L, 4L, 4L, 4L, 4L), .Label = c("0.2", "0.6", "1.2", "CNTRL"), class = "factor"), 
elisa = structure(c(2L, 2L, 2L, 2L, 2L, 1L), .Label = c("AbraxisBlank", 
"AbraxisRBT", "EnviroBlank", "EnviroRBT"), class = "factor"), 
kit = structure(c(1L, 1L, 1L, 1L, 1L, 1L), .Label = c("Abraxis", 
"Enviro"), class = "factor"), fish = structure(c(2L, 2L, 
2L, 2L, 2L, 1L), .Label = c("blank", "rbt"), class = "factor"), 
spectral = structure(c(1L, 1L, 1L, 1L, 1L, 1L), .Label = c("450", 
"600", "scan"), class = "factor"), conc = structure(c(1L, 
1L, 1L, 8L, 1L, 2L), .Label = c("> DL", ">DL", "0", "0.01", 
"0.02", "0.03", "0.04", "0.05", "0.06", "0.07", "0.08", "0.09", 
"0.1", "0.11", "0.12", "0.13", "0.14", "0.15", "0.16", "0.17", 
"0.18", "0.19", "0.2", "0.21", "0.22", "0.23", "0.24", "0.25", 
"0.26", "0.27", "0.28", "0.29", "0.294871066", "0.3", "0.308253804", 
"0.31", "0.32", "0.33", "0.34", "0.344304772", "0.35", "0.350277282", 
"0.353189188", "0.359024076", "0.36", "0.360435916", "0.37", 
"0.370993533", "0.37858631", "0.378888547", "0.38", "0.384568909", 
"0.39", "0.4", "0.401289641", "0.41", "0.42", "0.43", "0.44", 
"0.45", "0.46", "0.47", "0.473548535", "0.48", "0.489942496", 
"0.49", "0.5", "0.51", "0.52", "0.53", "0.54", "0.55", "0.56", 
"0.566560247", "0.57", "0.58", "0.5849501", "0.6", "0.604014755", 
"0.61", "0.62", "0.622156567", "0.64", "0.65", "0.66", "0.67", 
"0.69", "0.7", "0.71", "0.73", "0.75", "0.77", "0.78", "0.79", 
"0.8", "0.81", "0.82", "0.83", "0.84", "0.85", "0.87", "0.88", 
"0.9", "0.91", "0.92", "0.963486175", "0.968055663", "0.97", 
"0.98", "1", "1.01", "1.02", "1.03", "1.04", "1.1", "1.11", 
"1.2"), class = "factor"), conc2 = c(0, 0, 0, 0.05, 0, 0)), .Names = c("method", 
"spike", "elisa", "kit", "fish", "spectral", "conc", "conc2"), row.names = c(NA, 
6L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T00:31:44.957

看起来您希望变量的`CNTRL`水平`spike`对应于零，但这不是因子水平的顺序。尝试

```
mc <- transform(mc,spike=factor(spike,levels=c("CNTRL","0.2","0.6","1.2"))) 
```

# c# - ASP MVC 4 打开 partialView() 和 HttpPost（控制器问题）

> ID：15328836
> 
> 赞同：0
> 
> 时间：2013-03-10T23:04:05.380
> 
> 标签：c#, post, asp.net-mvc-4, controller

在我的共享 _layout.cshtml 中，当用户未通过身份验证时，我会调用 @Html.Partial("~/Views/Account/Register.cshtml") 。这个页面是一个注册表格。我的问题是带有数据的 httpPost 没有被“捕获”，因为（我认为）包含的部分视图使用了另一个控制器。我刚开始使用 MVC 4，这真的很令人困惑。对我有什么建议吗？

_Layout.cshtml

```
 <div id="content">
    @RenderBody()
    @if (!Request.IsAuthenticated) {
             @Html.Partial("~/Views/Account/Register.cshtml") 
    }
 </div> 
```

帐户控制器

```
// GET: /Account/Register
 [AllowAnonymous]
    public ActionResult Register()
    {
        return View();
    }

//
 // POST: /Account/Register
    [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            // Attempt to register the user
            try
            {
                WebSecurity.CreateUserAndAccount(model.UserName, model.Password);
                WebSecurity.Login(model.UserName, model.Password);
                return RedirectToAction("Index", "Home");
            }
            catch (MembershipCreateUserException e)
            {
                ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

我认为问题在于，由于我将 register.cshtml 作为部分视图加载，因此 httpPost 不是从 /Account/Register 发送的，而是从 Home/Index 发送的。会是这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T23:11:03.477

你的猜测听起来是正确的。在您的 register.cshtml 中，您可以使用表单声明执行此操作：

```
@Html.BeginForm("Register","Register") 
```

导致正确的控制器/视图被调用。

# node.js - Jetty 的 NodeJS 反向代理

> ID：15328838
> 
> 赞同：-1
> 
> 时间：2013-03-10T23:04:20.990
> 
> 标签：node.js, proxy, jetty, reverse-proxy

我有一个运行码头作为网络服务器的服务器。我在端口上运行一个代理服务器`80`来决定是使用 nodejs 对码头还是静态文件服务器发出请求。我的码头在端口上运行，`9000`而另一个静态文件服务器在`9001`. 这是我的节点代理代码；

```
var httpProxy = require('http-proxy');

var options = {
  hostnameOnly : true,
  router : {
    'domain.com' : '127.0.0.1:9000',
    'static.domain.com' : '127.0.0.1:9001'
  }
}

var proxyServer = httpProxy.createServer(options).listen(80); 
```

`domain.com`当我向它请求页面时，会出现此错误；

`{ code: 'ECONNREFUSED', errno: 'ECONNREFUSED', syscall: 'connect' }`

它应该将请求重定向到码头，但它没有，无法弄清楚为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:33:15.180

在 jetty config allowed ip for connections 是服务器的外部 IP 地址，我将其更改为 127.0.0.1 并且它工作。

# extjs - extjs 复选框数据渲染问题

> ID：15328846
> 
> 赞同：0
> 
> 时间：2013-03-10T23:05:39.397
> 
> 标签：extjs, checkbox

php从服务器端返回数据但不是extjs不呈现字段的值

我正在使用 xtype: '复选框'

{"total":1,"success":true,"locks":[{"id":"1","re​​cord_id":"11","is_unreachable":"1","is_directory_Lock":"1" ,"is_Internet_Lock":"0","is_partner_Lock":"1","is_home_business":"1","is_top_listing":"1","is_mole":"1","is_pre_call":"1"," is_new_business":"1","is_free_adv":"1","is_verified":"1","is_reviewed":"1","is_idr":"1"}]}

json 数组从服务器返回

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:42:40.927

Ext.define('UserApp.view.uiTypes.LockFeature',{ extend: 'Ext.form.Panel', 可折叠: true, flex: 1, height: 200, width: 600, store: null, itemId: 'lockfeature' ，布局：{类型：'表'，列：3}，

```
items:[{

        xtype: 'checkbox',
        boxLabel: 'Is Unreachable',
        name: 'is_unreachable',
        id: 'is_unreachable',
        dataIndex: 'is_unreachable',
        inputValue: 'true', 
        uncheckedValue: 'false',
        value: true, 

},{

    xtype: 'textfield',
    name: 'is_unreachable_update',
    fieldLabel: 'Last Update',

},{
    xtype: 'textfield',
    name: 'update_by_user',
    fieldLabel: 'By'
}],

initComponent: function(){
    console.log(this.table);
    console.log(this.record_id);
    var table = this.table;
    var parentTable = table.split('_');
    console.log(parentTable[0]);
    var store = Ext.create('UserApp.store.LockFeature');
    store.getProxy().setExtraParam('table',parentTable[1]);
    store.getProxy().setExtraParam('tab',parentTable[1]);
    store.getProxy().setExtraParam('saving_table', table);
    store.getProxy().setExtraParam('record_id',this.record_id);
    this.store = store;
    this.callParent(arguments);
    store.load();

} 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T00:43:38.207

你必须粘贴你的代码。

但是为什么不去例子： [http ://docs.sencha.com/ext-js/4-0/#!/example/grid/array-grid.html](http://docs.sencha.com/ext-js/4-0/#!/example/grid/array-grid.html)

# c# - 根据需要，用于依赖对象创建接口的 MVC 模式/库

> ID：15328849
> 
> 赞同：1
> 
> 时间：2013-03-10T23:05:58.197
> 
> 标签：c#, .net, asp.net-mvc, user-interface, nuget

是否有使用 ASP.NET MVC 的模式或推荐方法，我可以在其中编辑一个对象，并且需要动态创建相关对象（可能需要动态创建另一个对象）？也许一个库/ jQuery 组合包可以让这变得简单？

假设我在一个名为的页面中`JournalEntries/Edit/1234`，我意识到我需要为该对象创建不同`Account`的`JournalEntry`对象......也许该`Acount`对象需要一个`Vendor`尚不存在的对象。我不想离开页面并丢失已经完成的所有内容，但可能会在成功创建对象时嵌套创建表单并将状态传递给父窗口，以便工作流基本上不会中断。

这样的事情是否存在，或者业务需求是否过于模糊和多变而无法使其成为现实的创造？在构建这种模型时，我需要担心哪些陷阱或问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T00:02:32.777

您可以考虑将对象（及其依赖项）的创建委托给业务服务，该业务服务将使用工作单元和存储库在数据存储中创建对象。如果业务服务可以成功创建一个对象，它将返回新创建对象的 ID。

现在您可以创建一个控制器操作来调用业务服务。当您需要创建依赖对象时，您的前端代码可以通过 ajax 调用控制器操作。

由于上述方法不显眼，因此您的工作流程不会被中断，并且您不需要除 jquery 之外的任何特殊库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T17:45:13.300

显然，这里的简短回答是“不”......此时不存在这样的库或模式。

# java - 在当前包中执行 *.exe 并运行它

> ID：15328850
> 
> 赞同：-2
> 
> 时间：2013-03-10T23:05:58.943
> 
> 标签：java

我似乎无法弄清楚这一点？我想用参数执行 dec.exe

这是我的文件结构：

![结构体](../Images/07dec8de686b70b9ddfa55fca2dec236.png)

这是我在鼠标点击时使用的代码。

```
Process process = null; 

try { 

    process = new ProcessBuilder("dec.exe",idir,odir).start(); 

} catch (IOException e2) { e2.printStackTrace(); } 

InputStream is = process.getInputStream(); 
InputStreamReader isr = new InputStreamReader(is);
BufferedReader br = new  BufferedReader(isr); 

String line; 
String total = "";

try { 
    while ((line = br.readLine()) != null) { 
        total += line;
        txtrAsdasda.setText(total);
    }
} 

} catch (IOException e1) { e1.printStackTrace(); } 
```

* * *

**我收到以下错误：**

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at java.lang.ProcessBuilder.start(Unknown Source)
    at pw.ConverterUIApp$3.actionPerformed(ConverterUIApp.java:128)

... 
```

和

```
java.io.IOException: Cannot run program "dec.exe": CreateProcess error=2, The system cannot find the file specified
    at java.lang.ProcessBuilder.start(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T23:22:58.493

我设法自己修复了它，这完全是关于选择具有正确链接的正确文件：

```
process = new ProcessBuilder("dec.exe",idir,odir).start(); 
```

我将 dec.exe 放在导出的 .jar 旁边。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T23:34:16.843

打包应用程序后，当它嵌入到应用程序 Jar 中时，您将无法启动可执行文件。

这种类型的嵌入式资源只是 zip 文件中的 Zip 条目，操作系统将无法识别或找到该资源来执行它。

你有两个选择。

1.  不要将这些资源打包在应用程序 Jar 中，而是将它们与应用程序一起安装。这将允许您简单地调用`ProcessBuilder("dec.exe")`（假设您的应用程序在同一目录中启动）
2.  将可执行文件（和其他资源）放入`resources`文件夹并在运行时提取它们。必须提取可执行文件所需的所有相关文件！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-10T23:11:56.873

可能的原因是`idir`or`odir`为空。

# vb.net - Streamwriter 不会保存到用户输入的文件名，默认 var.FileName 已启动 - VB.NET

> ID：15328860
> 
> 赞同：0
> 
> 时间：2013-03-10T23:06:44.467
> 
> 标签：vb.net, io, filenames, streamwriter

我是新来的，对 VB.NET 也比较陌生。让我的 StreamWriter 正常工作有一个特定的问题。我的项目的要求之一是在用户单击“保存”按钮时为文件提供默认名称，我通过设置 mysave.Filename = "MyLog.log" 来完成此操作。我调用我的 streamwriter 的一个新实例，尝试保存到用户指定的文件名（再次为 mySave.Filename），但每次都保存到默认的 MyLog.log 文件。我在下面粘贴了我的代码。

如果有人能告诉我如何确保将数据保存为用户为文件名输入的值，那将非常有益。另外，我为代码格式道歉，它不是完全可读的，但我正在尝试学习如何使用 4 个空格缩进来发挥我的优势！！

谢谢！

```
Imports System.IO
Public Class Form1
Dim Initial As String = "C:\Users\Brian Frick\Documents\Visual Studio 2010\Projects\HW5_Frick_Creator\HW5_Frick_Creator\bin\Debug" 'give variable for full path without log file
Dim Fullpath As String = "C:\Users\Brian Frick\Documents\Visual Studio 2010\Projects\HW5_Frick_Creator\HW5_Frick_Creator\bin\Debug\MyLog.log" 'give one path for full path
Dim filewriter As New StreamWriter(Fullpath, True)

Private Sub ExitToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ExitToolStripMenuItem.Click
    Application.Exit() ' quit application
    filewriter.Close()
End Sub

Private Sub SaveToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles SaveToolStripMenuItem.Click
    Dim mySave As New SaveFileDialog
    mySave.Filter = "LOG File (*.log)|*.log" 'set filter to .log
    mySave.DefaultExt = "log" 'set default extension
    mySave.InitialDirectory = Initial 'set default directory
    mySave.FileName = "MyLog.log"
    mySave.OverwritePrompt = True ' make sure to ask user if they want to over write
    If mySave.ShowDialog() = DialogResult.OK Then
        Dim filewriter As New StreamWriter(mySave.FileName, True)

        filewriter.Close()

        'filewriter = New StreamWriter(mySave.FileName, True)
        'filewriter.Close() 'close filewriter to allow access to write directory
        'Dim Stream As New StreamWriter(mySave.FileName, True) 'save file to path chosen by user in SaveDialog
        'Stream.Close() ' Close stream to allow access to directory
        ' filewriter.Close()
    Else
        'dialog cancelled - no action
    End If
    filewriter.Close()
    filewriter = New StreamWriter(Fullpath, True) 're initiate filewriter to be used in successive iterations through the program without error
End Sub

Private Sub SavingsDepositBtn_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles SavingsDepositBtn.Click
    'write to file for SavDep
    filewriter.WriteLine("SavDep")
    filewriter.WriteLine(AccountBox.Text)
    filewriter.WriteLine(AmountBox.Text)
End Sub

Private Sub SavingsWithdrawBtn_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles SavingsWithdrawBtn.Click
    'write to file for SavWith
    filewriter.WriteLine("SavWith")
    filewriter.WriteLine(AccountBox.Text)
    filewriter.WriteLine(AmountBox.Text)
End Sub

Private Sub CheckDepsotBtn_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckDepsotBtn.Click
    'write to file for CheckDep
    filewriter.WriteLine("CheckDep")
    filewriter.WriteLine(AccountBox.Text)
    filewriter.WriteLine(AmountBox.Text)
End Sub

Private Sub CheckWithdrawBtn_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckWithdrawBtn.Click
    'write to file for CheckWith
    filewriter.WriteLine("CheckWith")
    filewriter.WriteLine(AccountBox.Text)
    filewriter.WriteLine(AmountBox.Text)
End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T23:21:56.113

您使用文件编写器的一般方式将不起作用，并且还有一些其他严重的问题，例如有两个具有重叠范围的“FileWriter”变量。

对于您的保存例程，您不能只是重新实例化您的文件编写器以将其指向不同的路径。这将破坏底层流中的所有数据，因此您什么也没有保存。

尝试在程序运行时将数据缓存在内存中，并且在您准备好将所有数据写入其中之前不要创建流，并将其写入文件，一次完成。您当前的方法很难防止泄漏日志文件的句柄，因此如果应用程序崩溃，用户将不得不重新启动以释放写锁，然后才能再次运行它。查看“使用”构造和“尝试......最后”

# matlab - 负 NCC 系数对图像模板匹配有什么意义？

> ID：15328866
> 
> 赞同：1
> 
> 时间：2013-03-10T23:07:31.127
> 
> 标签：matlab, image-processing, correlation, template-matching, cross-correlation

我一直在使用 Matlab 的 normxcorr2 函数通过执行标准化互相关来与图像进行模板匹配。要找到模板和图像之间的最大对应关系，可以简单地运行 normxcorr2，然后找到normxcorr2 返回的所有值的最大*绝对值（该函数返回的值介于 -1.0 和 1.0 之间）。*

通过快速的 Google 搜索，我发现负相关系数意味着两个变量之间的反比关系（例如，随着 x 增加，y 减少），而正相关系数意味着相反（例如，随着 x 增加，y 增加）。**这如何应用于图像模板匹配？**也就是说，对于模板匹配，normxcorr2 的负值在*概念上意味着什么？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T00:02:53.637

将归一化互相关视为归一化矢量点积。如果两个向量之间的夹角为零，则它们的点积为 1；如果它们面向相反的方向，则它们的点积为负 1。如果您采用数组并将列首尾相连，那么这个想法实际上是直接的。结果本质上是两个向量之间的点积。

同样作为个人轶事：起初让我对模板匹配感到困惑的是，直觉上我认为两个图像的元素明智减法将是图像相似度的一个很好的度量。当我第一次看到互相关时，我想知道为什么它使用元素智能乘法。然后我意识到后面的操作和向量点积是一样的。正如我之前提到的，向量点积表示两个向量何时指向同一方向。在您的情况下，首先对两个向量进行归一化；因此为什么范围是从 -1 到 1。如果您想了解更多关于实现的信息，JP Lewis 的“Fast Normalized Cross Correlation”是关于该主题的经典论文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T00:16:50.160

[检查维基百科上](http://en.wikipedia.org/wiki/Cross-correlation#Normalized_cross-correlation)的公式 。

当`f(x, y) - mean(f)`和`t(x,y) - mean(t)`具有不同符号时，附录的结果将为负（std 始终为正）。如果有很多这样的 (x,y)，那么总和也将是负数。您可能认为 if`1.0`意味着一个图像等于另一个图像。`-1.0`表示一个图像是另一个图像的负片（尝试查找`normxcorr2(x, -x)`）

# html - W3C HTML5 验证问题

> ID：15328867
> 
> 赞同：-2
> 
> 时间：2013-03-10T23:07:42.720
> 
> 标签：html, w3c, w3c-validation

有错误的 HTML

```
<meta description="keywords" content="Quekett, restaurant, Pub, Isle of Wight, Fresh, Lobster, Crab, Seafood, Bembridge, Food, Dining, Breakfast, Lunch, Dinner, Bed and Breakfast, B&amp;B">

<link href="CSS/basic.css" rel="stylesheet" media="screen and (-webkit-device-pixel-ratio: 1.5)"> 
```

![W3C 验证问题](../Images/1a1992b5209b7871c37e3e0c901eba2b.png)

刚刚尝试验证我正在构建的 HTML5 网站，并已清除了大部分问题，但在解决这些问题的任何可能解决方法下，仍然存在这 4 个挥之不去的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T23:11:40.530

**警告1：**

> “此时元素元上不允许属性描述”

意味着，您不允许拥有名为`description`. 可以在此处找到有效元标记的示例：http: [//www.w3schools.com/tags/tag_meta.asp](http://www.w3schools.com/tags/tag_meta.asp)

您的标签将如下所示：

```
<meta name="keywords" content="Quekett, restaurant, Pub, Isle of Wight, Fresh, Lobster, Crab, Seafood, Bembridge, Food, Dining, Breakfast, Lunch, Dinner, Bed and Breakfast, B&B"> 
```

**第二个警告**是警告 1 的结果，如果您有固定数字 1，则可以忽略它。

**警告 3：**我不明白你到底想要什么，所以我给你关于媒体查询的 w3c 建议：http: [//www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

**警告 4：** 您的文本/链接中有一个保留的 HTML 实体。你必须逃避它。在 HTML 中转义意味着您使用 charactes 转义 ith `&`，后跟一个代码，并以 . 结尾`;`。由于与符号的代码是amp ，因此`&`被转义为*amp*。`&amp;`

 *来源：[http ://www.w3schools.com/html/html_entities.asp](http://www.w3schools.com/html/html_entities.asp)

有一个关于 100% 有效 HTML 的有用性的有趣博客 [http://www.codinghorror.com/blog/2009/03/html-validation-does-it-matter.html](http://www.codinghorror.com/blog/2009/03/html-validation-does-it-matter.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T23:12:42.547

要验证您的 HTML5 站点，请使用[Validator.nu](http://html5.validator.nu/)。具有 HTML5 支持的良好 IDE 是 NetBeans 和 Aptana。*

# sql-server - 更新匹配条件的第一行

> ID：15328875
> 
> 赞同：1
> 
> 时间：2013-03-10T23:08:23.513
> 
> 标签：sql-server, ms-access

```
Update table1
set column1 = 'abc', column2 = 25
where column3 IN ('John','Kate','Tim') 
```

Column3 包含 John 两次（两个关联的行/记录），类似地 - 它有 Kate 第三次和 Tim 两次。如何调整查询，以便更新只影响 John 的第一行、Kate 的第一行和 Tim 的第一行？

作为参考，这里是表1：

```
column1 column2 column3
aa       2       John (!)
affd     24      John 
dfd      5       Tim (!)
ss       77      Kate (!)
s        4       Tim
s        1       Kate
sds      34      Kate 
```

我只想更新标有 (!)

我对Ms Access特别感兴趣！- 但也很好奇这是如何在 Sql Server 中完成的，以防万一。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-23T18:33:38.160

Sql Server 解决方案 - 注意，你必须有一个唯一的标识列才能工作（或一些唯一的列）。

```
UPDATE table1 
SET    column1 = 'abc', 
       column2 = 25 
WHERE  id IN (SELECT id 
              FROM   (SELECT id, 
                             Row_number() 
                               OVER ( 
                                 ORDER BY rowyouwanttoorderby ) AS ROWNUM 
                      FROM   table1 
                      WHERE  column3 IN ( 'John', 'Kate', 'Tim' )) AS temp 
              WHERE  rownum = 1) 
```

# d3.js - 将更新的数据应用于线路/路径？

> ID：15328879
> 
> 赞同：0
> 
> 时间：2013-03-10T23:08:49.813
> 
> 标签：d3.js

我有一个折线图，它根据从两个下拉列表中选择的值进行更新。数据根据以下要点更新。一切正常，所有数据都正确返回，但是当尝试将此更新的数据应用到现有的线/路径并更新图形时 - 线/路径消失了，我收到了解析错误。知道这与我如何将这些新数据应用到线路/路径有关 - 任何人都可以帮忙吗？

[https://gist.github.com/Majella/202df0a4a5a3ad20fb92](https://gist.github.com/Majella/202df0a4a5a3ad20fb92)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:37:59.960

我不太确定您是否想 (a) 使用新数据更新现有行，或者 (b) 保留现有行并使用新数据添加第二行。

对于 (a)，您需要重新加入`newdata`原始行，然后重新绘制它。这可以通过一个简单的重绘函数来实现，其中函数参数是数据集。[您可以在 Mike Bostock 的General Update Pattern](http://bl.ocks.org/mbostock/3808234)帖子中看到它的实现，或者在我为演示这一点而制作的[更简单的示例中看到。](http://tributary.io/inlet/5127223)

如果 (b)，您将像对第一个数据集所做的那样对新数据执行数据连接，例如：

```
var data2 = svg.selectAll('.newData')
   .data(newdata)
.enter().append('path')
   .attr('class', 'newData)
   .attr( "d", line(newdata)); 
```

它会在图表中添加第二条线。

# php - 在foreach php中使用逻辑与运算符&&

> ID：15328880
> 
> 赞同：-1
> 
> 时间：2013-03-10T23:09:09.363
> 
> 标签：php, foreach, logical-operators

我有以下图片库代码：

```
$directory = 'some path';
$thumbs_directory = 'some path';
foreach (glob($directory.'/*.{jpg,jpeg,png,gif}', GLOB_BRACE) as $file) 
foreach (glob($thumbs_directory.'/*.{jpg,jpeg,png,gif}', GLOB_BRACE) as $file2)
{

    if($file=='.' || $file == '..') continue;
    $file_parts = explode('.',$file);
    $ext = strtolower(array_pop($file_parts));
    $title = basename($file);
    $title = htmlspecialchars($title);
    $title = str_replace("_"," ",$title);
    $nomargin='';
    if(($i+1)%4==0) $nomargin='nomargin';
    echo '
    <div class="pic '.$nomargin.'" style="background:url('.$file2.') no-repeat 50% 50%;">
    <a href="'.$file.'" title="'.$title.'" target="_blank">'.$title.'</a>
    </div>';
    $i++;
} 
```

我需要通过逻辑与运算符 && 组合这些 foreach 语句，以便同时满足两个条件。可能吗 ？我尝试了很多次，但总是以语法错误告终。

请注意，我需要完美定义 $file 和 $file2 变量。这只是缩略图与图像正确关联的唯一方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T23:16:03.427

根据您的描述，如果您想遍历两个目录中存在的图像文件，您应该考虑使用 php 的[array_intersect()](http://php.net/manual/en/function.array-intersect.php)。

```
$directory = 'some path';
$thumbs_directory = 'some path';

$files_in_dir1 = glob($directory.'/*.{jpg,jpeg,png,gif}', GLOB_BRACE);
$files_in_dir2 = glob($thumbs_directory.'/*.{jpg,jpeg,png,gif}', GLOB_BRACE);

$files_in_both_dirs = array_intersect($files_in_dir1, $files_in_dir2);

foreach ($files_in_both_dirs as $filename) {
  // Code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T23:10:45.773

能不能简单的把肉肉的逻辑重构成一个通用的函数，然后调用两次？

例如：

```
function doSomething($directory) {
    foreach (glob($directory.'/*.{jpg,jpeg,png,gif}', GLOB_BRACE) as $file) {
        /* Whatever */
    }
}

...

doSomething($directory);
doSomething($thumbs_directory); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T23:11:33.570

要将图像映射到各自的缩略图，我宁愿选择不同的方法：

```
$directory = 'some path';
$thumbs_directory = 'some path';

// Get all images
$images = glob($directory.'/*.{jpg,jpeg,png,gif}', GLOB_BRACE);

// Iterate over all images
foreach ($images as $image) {
    // Construct path to thumbnail
    $thumbnail = $thumbs_directory .'/'. basename($image);

    // Check if thumbnail exists
    if (!file_exists($thumbnail)) {
        continue; // skip this image
    }

    // .. continue as before

    echo '
        <div class="pic '.$nomargin.'" style="background:url('.$thumbnail.') no-repeat 50% 50%;">
        <a href="'.$image.'" title="'.$title.'" target="_blank">'.$title.'</a>
        </div>
    ';
} 
```

}

# ios - [_PFArray MR_deleteInContext:]：发送到实例的无法识别的选择器

> ID：15328882
> 
> 赞同：0
> 
> 时间：2013-03-10T23:09:35.180
> 
> 标签：ios, objective-c, magicalrecord

我正在使用 MagicalRecord (MR) 删除属于选定客户的所有记录（我成功删除了客户记录，然后继续查找该客户的约会记录）。这样做，我得到了错误。

```
 [_PFArray MR_deleteInContext:]: unrecognized selector sent to instance 
```

这是代码以及相关定义：

```
 //  set up predicate using selectedClientKey
                NSManagedObjectContext *localContext = [NSManagedObjectContext MR_contextForCurrentThread];
                NSPredicate *predicate = [NSPredicate predicateWithFormat:@"aClientKey == %@", selectedClientKey];
                ClientInfo *clientSelected = [ClientInfo MR_findFirstWithPredicate:predicate inContext:localContext];

                if(clientSelected)  {
                    [clientSelected MR_deleteInContext:localContext];
                    [localContext MR_saveToPersistentStoreAndWait];
                }

                //  delete clients appointments...
                predicate = [NSPredicate predicateWithFormat:@"aApptKey == %@", selectedClientKey];  //  use client key
                AppointmentInfo *apptSelected = [AppointmentInfo MR_findAllWithPredicate:predicate inContext:localContext];

                if(apptSelected)  {
                    [apptSelected MR_deleteInContext:localContext];
                    [localContext MR_saveToPersistentStoreAndWait];
                } 
```

这是 AppointmentInfo 的定义：

```
@interface AppointmentInfo : NSManagedObject

@property (nonatomic, retain) NSString * aApptKey;
@property (nonatomic, retain) NSDate * aEndTime;
@property (nonatomic, retain) NSString * aServiceTech;
@property (nonatomic, retain) NSDate * aStartTime; 
```

在**findAllWithPredicate**语句中，我收到以下编译器警告：

> CalendarViewController.m:80:43：从 'NSArray *__strong' 分配给 'NSMutableArray *' 的不兼容指针类型

我知道**findAllWithPredicate**语句将返回一个 NSArray；但是我已经看到了使用 NSManagedObject 的示例，这就是 AppointmentInfo 的含义。 **第 3 行中的ClientInfo**也是一个 NSManagedObject 并且它没有编译器警告。我认为这可能是因为从**find** 语句返回的只有一 (1) 条记录，但没有区别，一条记录或多条记录。

由于编译器警告，我收到运行错误，还是有其他问题？（我查看了 Google 和 SO，并没有发现任何可以解决此特定问题的内容）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:58:25.827

你是正确的**findAllWithPredicate:**将返回一个数组。您看到的示例很可能使用**findFirstWithPredicate:**或类似样式的方法。Find First，顾名思义，会在请求返回的结果中返回第一个对象。这很可能也是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:58:03.567

我想通了......对于那些可能有同样问题的人， MR_findAll 返回一个 NSArray ，你必须“遍历”并单独删除每个。这是上面的更正代码：

```
 //  delete clients appointments...
predicate = [NSPredicate predicateWithFormat:@"aApptKey == %@", selectedClientKey];  //  use client key
NSArray *apptDataArray = [AppointmentInfo MR_findAllWithPredicate:predicate inContext:localContext];

for(int i = 0; i < apptDataArray.count; i++)  {
    AppointmentInfo *ai = [apptDataArray objectAtIndex: i];
    [ai MR_deleteEntity];
}
[localContext MR_saveToPersistentStoreAndWait]; 
```

# codeigniter - 使用 codeigniter 的多个环境

> ID：15328884
> 
> 赞同：6
> 
> 时间：2013-03-10T23:09:42.570
> 
> 标签：codeigniter

我试图了解使用多种环境的最佳行动方案，例如使用 codeigniter 为我的应用程序开发、测试、生产。

截至目前，我的应用程序只有一个文件夹。我看到在配置文件中讨论的地方为每个环境创建一个文件夹，并在每个环境文件夹中放置例如数据库文件的副本。

这是处理多个环境的最佳方法吗？我问的原因是因为如果我在我的开发子域上工作，我仍然必须将所有相同的文件重新上传到主根文件夹。这是最好的工作流程吗？

所以基本上我有两个网站。

dev.siteurl.com

我试图找出处理这个问题的最佳选择。因为我想知道是否只需将所有文件重新上传到主级别，以便它可以处理生产服务器，或者有更简单的方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T23:15:47.220

是的，它的工作方式是在您的 /application/config 文件夹下创建一个名为 development 的额外嵌套文件夹，以便您拥有

/应用程序/配置/开发/

在开发内部，您将放置一个 database.php 文件的副本并更改您的开发数据库设置

/application/config/development/database.php

那么你必须告诉codeigniter你在哪个版本，所以在你的基础根文件夹中编辑index.php：

/index.php

```
define('ENVIRONMENT', 'development'); 
```

当您想使用 /config/development/database.php 时，您将环境更改为开发，当您想使用生产数据库时，您将环境更改为生产

编辑：CI TOC 也有一个简短的部分解释这一点：[https ://www.codeigniter.com/user_guide/general/environments.html](https://www.codeigniter.com/user_guide/general/environments.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-11T12:13:47.383

我在 index.php 中定义环境
做类似的事情

```
if ($_SERVER['SERVER_NAME']=='siteurl.com')
   define('ENVIRONMENT', 'production');
else if ($_SERVER['SERVER_NAME']=='test.siteurl.com')
   define('ENVIRONMENT', 'testing');
else
   define('ENVIRONMENT', 'development'); 
```

并根据 ENVIRONMENT 变量使用配置部分

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-12T17:08:27.067

我知道这是一个旧线程，但我现在正在开发一个 Codeigniter 项目，并且正在寻找一种维护两个环境的好方法，而不必在两个不同的 url 上维护两个代码库。如果其他人正在寻找类似的答案，这里有一个可能的解决方案，允许您维护一个代码库。

对于我当前的项目，我有 siteurl.com 和 siteurl.com/sandbox。

**siteurl.com/index.php**

```
define('ENVIRONMENT', 'production');
$system_path = '../system';
$application_folder = '../application'; 
```

**siteurl.com/sandbox/index.php**

```
define('ENVIRONMENT', 'development');
$system_path = '../../system';
$application_folder = '../../application'; 
```

# sql - 如何在 SQL Server 2008 中使用相似条件从两个表中返回所有记录？

> ID：15328886
> 
> 赞同：-1
> 
> 时间：2013-03-10T23:10:28.197
> 
> 标签：sql, sql-server, sql-server-2008

我是一名试图做一些 SQL Server 2008 的开发人员，但我被卡住了。

我有以下两张表

表格1

```
Local Area   | ManagerID  
 ABC-SDF-LKJ | 1234  
 ABC-KJH-GHJ | 4321  
 XZY-TRS-YEU | 4321  
 XZY-BFG-GFH | 6789  
 INT-HSL-DSL | 6789 
```

表 2

```
Region | ManagerID  
 ABC   | 4321  
 INT   | 5764  
 XZY   | 8647 
```

我需要创建一个查询，该查询将返回 a 的所有行`ManagerId`。如果 a`ManagerId`存在于表 2 中，则它应该返回表 1 中它们是管理器的所有行，以及表 1 中以它们管理器的区域开头的所有行。

鉴于上面的数据`ManagerId = 4321`应该返回

```
ABC-SDF-LKJ  
ABC-KJH-GHJ  
XZY-TRS-YEU 
```

虽然`ManagerId = 8647`应该返回

```
XZY-BFG-GFH  
XZY-TRS-YEU 
```

并且`ManagerId = 1234`应该返回

```
ABC-SDF-LKJ 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T23:18:08.377

`JOIN`可以在任意表达式上，而不是 a ，`LIKE`我会使用`LEFT([Local Area], 3)`. 将返回, while 中`LEFT JOIN`列出的那些区域。`Table2`for 的条件`t1.ManagerId = xxxx`将返回`Table1`与 in 不匹配的值`Table2`，例如 for `ManagerID = 1234`。

```
SELECT
  [Local Area]
FROM
  Table1 t1
  -- Matches the Region back to the Local Area
  LEFT JOIN Table2 T2 ON LEFT(t1.[Local Area], 3) = t2.Region
WHERE
  -- For those which have no Region match in Table2
  t1.ManagerId = 1234
  -- And to get the Table1 records which start with the Region from Table2
  OR t2.ManagerId = 1234 
```

这是一个演示：[http ://sqlfiddle.com/#!3/ca497/4](http://sqlfiddle.com/#!3/ca497/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T23:23:26.177

这个怎么样：

```
SELECT *
FROM Table1 T1, Table2 T2
WHERE T1.ManagerID = T2.ManagerID 
OR T1.[Local Area] LIKE T2.Region + '%' 
```

第一个条件照顾同一个经理，第二个条件照顾地区/地区。

Sql 小提琴[在这里](http://sqlfiddle.com/#!3/a0e0b/4)。

# isabelle - 如何使用机器学习中的语言环境假设和变量抽象地处理定理和术语？

> ID：15328887
> 
> 赞同：2
> 
> 时间：2013-03-10T23:10:40.957
> 
> 标签：isabelle

考虑以下语言环境定义：

```
locale my_locale =
  fixes a :: nat
  assumes "a > 0"
begin

definition "f n ≡ a + n"
lemma f_pos: "f x > 0"
  sorry

end 
```

在 Isar 中，如果我尝试使用`f`或 lemma的定义`f_pos`，则语言环境假设和固定变量对我来说是隐藏的。例如，`thm f_def f_pos`返回：

```
f ?n ≡ a + ?n
0 < f ?x 
```

正如预期的那样。

然而，如果我试图在 ML 中推理这些术语，“隐藏的”固定变量就会突然暴露出来。`ML {* @{thm f_def} |> prop_of *}`，例如，返回：

```
Const ("==", "nat ⇒ nat ⇒ prop") $
 (Const ("TestSimple.my_locale.f", "nat ⇒ nat ⇒ nat") $
   Free ("a", "nat") $ Var (("n", 0), "nat")) $
 (Const ("Groups.plus_class.plus", "nat ⇒ nat ⇒ nat") $
   Free ("a", "nat") $ Var (("n", 0), "nat")) 
```

其中固定变量`a`成为函数的参数`f`。

有没有办法能够在 ML 的语言环境中工作，这样我就不会接触到这样的语言环境变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:21:39.873

看起来`f`没有参数的版本`a`只是命令生成的缩写`locale`。特别是，打字`print_abbrevs`显示：

```
local.f ≡ My_Theory.my_locale.f a 
```

这意味着从用户的角度来看，`f`似乎没有任何语言环境参数，因为它们隐藏在缩写后面。然而，在幕后，`f`总是会附加语言环境参数，因此必须对 ML 代码进行编码以显式处理它。

# jquery - jquery 1.9.1 .trigger() 没有将参数传递给点击处理程序

> ID：15328894
> 
> 赞同：10
> 
> 时间：2013-03-10T23:11:07.473
> 
> 标签：jquery, triggers, parameter-passing

在 jQuery 1.9.1 中，参数不会从触发器传递到单击处理程序，而在 jquery 1.7.2 中它们被很好地传递。

一个例子来证明：

```
<!doctype html>
<head>
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <!--script src="http://code.jquery.com/jquery-1.7.2.min.js"></script-->
</head>
<body>
    <input id="test" type="checkbox">
    <button id='trigger'>trigger</button>

</body>
    <script>
        $('#test').bind('click',
            function (e, data){
                if (typeof data == 'undefined') {
                    alert('no data passed');
                    return;
                }
                alert('first passed=' + data.passed1 + ' second passed='+data.passed2);
            });

        $('#trigger').click(
            function (e){
                $('#test').trigger('click',{passed1:'first',passed2:'second'});

        });
    </script>
</html> 
```

当我使用 jquery-1.7.2.js 时，它仍然可以正常工作。

我错过了什么？请帮我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T00:43:08.133

这是一个已知问题：[http ://bugs.jquery.com/ticket/13353](http://bugs.jquery.com/ticket/13353)

解决方法是使用 .triggerHandler() 代替，例如：

```
$('#trigger').click(function (e) {
    var $test = $('#test');       
    $test
        .prop('checked', !$test.prop('checked'))
        .triggerHandler('click',{passed1:'first',passed2:'second'});        
}); 
```

JSFiddle：http: [//jsfiddle.net/antishok/xHVDx/2](http://jsfiddle.net/antishok/xHVDx/2)

在任何情况下触发点击都是邪恶的（如果意图只是运行回调）

# ruby - 什么是“异步异常处理”

> ID：15328895
> 
> 赞同：2
> 
> 时间：2013-03-10T23:11:08.357
> 
> 标签：ruby, ruby-2.0

这个新的“异步异常处理”API 是什么，我一直看到它是 ruby​​ 2.0 的一部分。

有人可以大致解释一下ruby中的“异步异常处理”是什么意思吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:08:00.673

[“异步异常处理API](http://ruby-doc.org/core-2.0/Thread.html#method-c-pending_interrupt-3F) ”本质上就是这种新[方法](http://ruby-doc.org/core-2.0/Thread.html#method-i-pending_interrupt-3F)：[`Thread::handle_interrupt`](http://ruby-doc.org/core-2.0/Thread.html#method-c-handle_interrupt)加上. 这是一种尝试，对使用或时可能发生的事情进行更好的控制。`pending_interrupt?``Thread#raise``Thread#kill`

# spring - 在 Spring 中在运行时动态声明 bean

> ID：15328904
> 
> 赞同：18
> 
> 时间：2013-03-10T23:12:13.360
> 
> 标签：spring

我想知道以下是否可能。出于测试目的，我希望在应用程序上下文中为不同的测试声明不同的模拟类。这些是验收测试，使用 Jersey REST 客户端。有没有办法在运行时动态声明一个bean？Spring 是否有 API 允许在加载上下文后更改应用程序上下文？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-11T01:14:01.653

在应用程序上下文中拥有不同 bean 的常用方法是使用配置文件。您可以在以下 spring 源帖子中阅读有关配置文件的信息：

*   [http://blog.springsource.org/2011/02/14/spring-3-1-m1-introducing-profile](http://blog.springsource.org/2011/02/14/spring-3-1-m1-introducing-profile)
*   [http://blog.springsource.org/2011/06/21/spring-3-1-m2-testing-with-configuration-classes-and-profiles/](http://blog.springsource.org/2011/06/21/spring-3-1-m2-testing-with-configuration-classes-and-profiles/)

关于您的第一个问题，您可以在运行时通过方法声明 bean `BeanDefinitionRegistry.registerBeanDefinition()`，例如：

```
 BeanDefinitionBuilder builder = BeanDefinitionBuilder.rootBeanDefinition(SomeClass.class);
  builder.addPropertyReference("propertyName", "someBean");  // add dependency to other bean
  builder.addPropertyValue("propertyName", someValue);      // set property value
  DefaultListableBeanFactory factory = (DefaultListableBeanFactory) context.getBeanFactory();
  factory.registerBeanDefinition("beanName", builder.getBeanDefinition()); 
```

也可以注册一个单例bean实例（已经配置）

```
context.getBeanFactory().registerSingleton(beanName, singletonObject) 
```

最后，Spring 没有提供在刷新上下文后更改 bean 的明确方法，但最常见的方法是：

*   关闭并再次刷新（显然）
*   使用代理并在运行时交换 targetSource：请参阅[Replace spring bean in one context with mock version from another context](https://stackoverflow.com/questions/12800769/replace-spring-bean-in-one-context-with-mock-version-from-another-context) （例如）。

# python - Python：限制数组中的元素数量

> ID：15328908
> 
> 赞同：0
> 
> 时间：2013-03-10T23:12:44.493
> 
> 标签：python, arrays, scripting, jython

我正在使用 The Grinder，并且我有一个 Python 脚本，它执行一些 Java API 以收集最小、最大、执行次数和总执行次数（后 2 次获取平均执行时间）。这是为每个 API（它是一个多维数组）和每个线程完成的。

```
#Contents of apiTimingsList array: [min, max, number of executions, total execution time]
apiTimingsList = [[9999,0,0,0] for j in range(len(apiList))] 
```

我正在调查一些内存问题，我认为这个数组的不断增长的大小可能是一个问题。随着测试的进行，它将不断增长。例如，如果我有 10 个 API 并且我正在运行 900 个线程，那么只要测试运行，就会有 9000 个数组不断增长。

有没有办法限制这些数组的大小，说只保留最后 x 次执行，所以我的计算仍然有效，但数组没有失控？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T23:18:41.723

您可以使用`collections.deque`：

```
>>> from collections import deque
>>> d = deque(maxlen=2)
>>> d.append(3)
>>> d.append(4)
>>> d.append(5)
>>> d
    deque([4, 5], maxlen=2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T23:18:11.987

`deque`模块中的A`collections`可能会完成您想要的。

# javascript - 如果 div 已经打开，则关闭之前打开的 div

> ID：15328919
> 
> 赞同：1
> 
> 时间：2013-03-10T23:14:10.600
> 
> 标签：javascript, jquery, html, css

将尝试解释我的意思:)

我有两个用jquery打开的隐藏div，它们都很好用......当我分开使用它们时......但是如果我在另一个打开时打开div，第一个在后台继续打开...我想关闭那个。

我可以使用 if else 功能吗？

这就是我到目前为止所拥有的。

```
$(document).ready(function(){

        $(".contactDiv").hide();
        $(".show_hide_contact").show();

    $('.show_hide_contact').click(function(){
    $(".contactDiv").slideToggle();
    });

});
        $(document).ready(function(){
         $(".loginDiv").hide();
        $(".show_hide_login").show();

    $('.show_hide_login').click(function(){
    $(".loginDiv").slideToggle();
    });

}); 
```

我创建了一个 jsfiddle 来展示更多内容。

[http://jsfiddle.net/h2Hfg/](http://jsfiddle.net/h2Hfg/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T23:18:05.950

也只需滑动另一个 div：

```
$('.show_hide_contact').click(function() {
    $(".contactDiv").slideToggle();
    $(".loginDiv").slideUp();
});

$('.show_hide_login').click(function(){
    $(".loginDiv").slideToggle();
    $(".contactDiv").slideUp();
}); 
```

非常高兴你能包括`jsFiddle`:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T23:25:38.147

我不确定是否有一个功能可以做到这一点，但你可以手动完成。 [看看这个](http://jsfiddle.net/XRmf3/)

```
$(document).ready(function(){

    $(".contactDiv").hide();
    $(".loginDiv").hide();
    $(".show_hide_contact").show();
     $(".show_hide_login").show();

    $('.show_hide_contact').click(function(){
        $(".loginDiv").hide();
        $(".contactDiv").slideToggle();
    });

    $('.show_hide_login').click(function(){
        $(".contactDiv").hide();
        $(".loginDiv").slideToggle();

    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T23:27:06.943

发现如何。

我刚刚将隐藏功能添加到 div 中。

```
$('.show_hide_contact').click(function(){
$(".contactDiv").slideToggle();
    $(".loginDiv").hide(); /* there is hiding prev opened tag*/
}); 
```

# r - 数列识别

> ID：15328925
> 
> 赞同：5
> 
> 时间：2013-03-10T23:15:11.913
> 
> 标签：r

从另一个问题发展：

[识别R中重复数字的序列](https://stackoverflow.com/questions/7509381/identifying-sequences-of-repeated-numbers-in-r/15328802#15328802)

我已经使用该问题的答案来识别我的数据中的序列，这不是问题，但是在识别不同数字的序列时我被卡住了，例如：序列可能：126,126,25 而不是重复数字，

我当前使用的代码与上述问题（rle）中的代码相同

样本数据：

```
 d<-read.table(text='Date.Time Aerial
794  "2012-10-01 08:18:00"      1
795  "2012-10-01 08:34:00"      1
796  "2012-10-01 08:39:00"      1
797  "2012-10-01 08:42:00"      1
798  "2012-10-01 08:48:00"      1
799  "2012-10-01 08:54:00"      1
800  "2012-10-01 08:58:00"      1
801  "2012-10-01 09:04:00"      1
802  "2012-10-01 09:05:00"      1
803  "2012-10-01 09:11:00"      1
1576 "2012-10-01 09:17:00"      2
1577 "2012-10-01 09:18:00"      2
804  "2012-10-01 09:19:00"      1
805  "2012-10-01 09:20:00"      1
1580 "2012-10-01 09:21:00"      2
1581 "2012-10-01 09:23:00"      2
806  "2012-10-01 09:25:00"      1
807  "2012-10-01 09:32:00"      1
808  "2012-10-01 09:37:00"      1
809  "2012-10-01 09:43:00"      1', header=TRUE, stringsAsFactors=FALSE, row.names=1) 
```

将识别重复的数字序列的代码（相同的数字重复 4 次）：

```
tmp <- rle(d$Aerial)
d$newCol <- rep(tmp$lengths>=4, times = tmp$lengths) 
```

但是我不知道如何识别包含不同数字的序列，例如序列可能是：1,2,2,1（如 d$Aerial）在“2012-10-01 09:11:00”

有各种图案。数据是在给定天线上给定时间对信号的检测，但为了保持问题的开放性，我已将其简化为如上。所以模式是 1,2,2,1，即在 Aerial 1 处检测，然后是 2，然后是 2，然后是 1（在 Aerial 列中）。在我的数据中，当这种模式出现时，它表明动物的行为运动。如果我能够识别它，我就可以对其进行更多的计算。

上面的代码表示一个数字何时重复 4 次，但是它无法识别 4 个彼此不同的数字的重复：1,2,2,1

这个序列（1,2,2,1）可能在数据中出现多次，我想每次都识别它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T23:42:08.427

蛮力解决方案：

```
pat <- c(1,2,2,1)
x <- sapply(1:(nrow(d)-length(pat)), function(x) all(d$Aerial[x:(x+length(pat)-1)] == pat))

d[which(x),]  # "which" prevents recycling of the shorter vector "x"
##               Date.Time Aerial
## 803 2012-10-01 09:11:00      1
## 805 2012-10-01 09:20:00      1 
```

`zoo`可用`rollapply`于此：

```
require(zoo)
x <- rollapply(d$Aerial, length(pat), FUN=function(x) all(x == pat))

d[which(x),]
##               Date.Time Aerial
## 803 2012-10-01 09:11:00      1
## 805 2012-10-01 09:20:00      1 
```

对于（现已删除的）注释，查找与模式的最后一个字符匹配的行：

```
d[which(x)+length(pat)-1,]
##               Date.Time Aerial
## 804 2012-10-01 09:19:00      1
## 806 2012-10-01 09:25:00      1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T23:55:30.093

如果您事先不知道模式将是什么（这是我最初从您的问题中得到的），那么这是一个蛮力解决方案，它将找到给定长度的重复模式：

```
pattern_length = 4
patterns = list()
for (i in 1:(nrow(d) - pattern_length)) {
  patterns[[i]] = d$Aerial[i:(i + pattern_length - 1)]
}
unique(patterns[duplicated(patterns)])

[[1]]
[1] 1 1 1 1

[[2]]
[1] 1 1 2 2

[[3]]
[1] 1 2 2 1

[[4]]
[1] 2 2 1 1 
```

然后，您可以将这些输入到 Matthew Lundberg 的答案中。

# javascript - animationStart 事件不是跨浏览器？

> ID：15328927
> 
> 赞同：2
> 
> 时间：2013-03-10T23:15:23.100
> 
> 标签：javascript, dom-events, css-animations, dom-manipulation

我正在使用[最近的技巧来发现添加到](http://davidwalsh.name/detect-node-insertion)库中 DOM 的新节点，使其使用起来很舒服。

`animationStart`这是一种在声明简单（不可见）动画后使用事件的技术。每次您添加一个应该动画的新节点时 - 事件都会触发。

我刚刚发现，当通过设置**显示**`display:inline`与 CSS 动画的选择器匹配的元素时（但在动画被声明之前就存在） - webkit 中**的`animationStart`火，但不是在 FireFox 中。**

老实说，我不知道哪个是正确的行为，如果这只是关于我的一个浏览器的某个版本。

在第 3 章动画的末尾，W3C 文档说动画应该在元素显示后运行。[http://www.w3.org/TR/css3-animations/#animations](http://www.w3.org/TR/css3-animations/#animations)

[这里](http://naugtur.github.com/insertionQuery/)的第五个测试用例是受问题影响的。

浏览器之间出现这种差异的原因是什么？或者我如何使它保持一致？

# javascript - Facebook 应用程序错误显示为一个用户但不是其他用户

> ID：15328932
> 
> 赞同：0
> 
> 时间：2013-03-10T23:15:36.193
> 
> 标签：javascript, facebook, actionscript-3, externalinterface, flash-cs6

我在 Facebook 画布中设置了一个 Flash 应用程序，它使用 ExternalInterface 调用 JavaScript 函数，然后在第一个函数完成时从 JavaScript 调用 Flash 函数：

Flash 对象和变量：

```
this.dBug.text += "\ngetting user albums...\n"
var usrAlbums:Array = new Array();
var pageLimit:Number = 48;
var pageOffset:Number = 0;
this.dBug.text += "\ttotal albums before call: " + usrAlbums.length + "\n"; 
```

回调函数：

```
this.dBug.text += "\tadding getAlbumResponse callback to ExternalInterface\n";
ExternalInterface.addCallback('getAlbumResponse', getAlbumResponse);
this.dBug.text += "\tcreating getAlbumResponse callback\n";
function getAlbumResponse(rtrn):void{
    dBug.text += "\nresponding to album get...\n";
    this.dBug.text += "\t\t\tresult: " + rtrn['data'] + "\n";
    var album:Array = rtrn['data'];
    this.dBug.text += "\t\tadding objects to usrAlbums array...\n";
    for(prop in rtrn['data']){
        usrAlbums.push(new Array(album[prop], new Array()));
        this.dBug.text += "\t\t\tadded " + album[prop] + ", new Array() to usrAlbums array\n";
        ++pageOffset;
        this.dBug.text += "\t\t\t\talbumCount:  " + pageOffset + "\n";
    }
    this.dBug.text += "\tcheck for more albums\n";
    if(pageOffset == pageLimit){
        getAlbum(++pageOffset, pageLimit);
    }else{
        this.dBug.text += "\t\ttotal albums after call: " + usrAlbums.length + "\n";
    }
} 
```

对 JavaScript 的 ExternalInterface 调用函数：

```
function getAlbum(offset:Number, limit:Number){
    this.dBug.text += "\t\tcalling swfGetAlbum(/me/albums?offset=" + offset + "&limit=" + limit + ")...\n";
    ExternalInterface.call('swfGetAlbum', '/me/albums?offset=' + offset + '&limit=' + limit);
} 
```

调用 EI 函数：

```
getAlbum(pageOffset, pageLimit); 
```

托管页面上的 Javascript：

```
function swfGetAlbum(graph){
    console.log('swfGetAlbum(' + graph + ')');
    FB.api(graph, function(response){ console.log(response); swfGetAlbumCallback(response); });
}
var swfGetAlbumCallback = function(response){
        console.log(response);
    console.log(document.getElementById('app-root'));
            document.getElementById('app-root').getAlbumResponse(response);
} 
```

在我的 Mac 上，我在 Chrome、Safari、Opera 和 Firefox 上的 Facebook 帐户下一切正常。它也可以在我的测试 PC 上的相同浏览器下运行，此外还可以在 Internet Explorer 上运行。

由于某种原因，当我的朋友使用他的 Facebook 帐户测试应用程序时，当 Javascript 代码启动回调并尝试运行**document.getElementById('app-root').getAlbumResponse(response);时，他收到错误消息。**. 他正在使用相同的浏览器在自己的 PC 上进行测试，所有这些都产生了相同的结果。在 Chrome 下，错误读取为**Uncaught Error: Error calling method on NPObject**。

让事情变得更有趣；当他使用他的 Facebook 帐户在我的机器上测试应用程序时会出现此错误，而当我使用我的 Facebook 帐户在他的机器上测试应用程序时不会发生此错误。

我还能够使用另外两个 Facebook 帐户测试该应用程序。其中一个在我的 Mac 上的 Safari 下，另一个在我朋友妻子的 PC 上使用 Chrome。这些测试都没有错误。

此应用程序的 Flash 目标版本至少为 v11（所有测试的机器/浏览器都有最新的 Flash 播放器），并使用 swfobject 2 插入到页面中。

我对这种行为完全感到困惑。有人遇到过这样的事情吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T22:35:34.537

我们甚至尝试过在黑暗中完全拍摄......

为了符合 Facebook 的 https，我们在一个安全的服务器上。我们检查了我朋友的设置，发现https浏览设置没有被选中。再次检查后，一切正常。

# prolog - 尝试在 Prolog 中实现交换性

> ID：15328936
> 
> 赞同：0
> 
> 时间：2013-03-10T23:16:02.647
> 
> 标签：prolog, commutativity

我正在尝试创建一个知识库。我的问题有`terminal/1`并且`connected/2`我已经定义了以下规则：

```
connected(X,Y) :- connected(Y,X). 
```

由于我现在理解的原因（我认为），这进入了无限递归。

然后，我尝试搜索 SO 并发现了这个问题：[Alternative to express "Commutativity" in Prolog?](https://stackoverflow.com/questions/10257947/alternative-to-express-commutativity-in-prolog) . 根据提供的答案，我尝试将上述事实更改为以下内容：

```
connected(X, Y) :- is_connected(Y, X) /\ is_connected(X, Y).
is_connected(X, Y) :- terminal(X) /\ terminal(Y) /\ connected(X , Y). 
```

然而，这并没有给我我希望的结果。如果我定义一个规则`connected(t1,t7)`，我希望`yes`如果我问这个问题`connected(t7,t1)`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T23:51:29.947

我设法弄清楚了这一点。

我改变了这个：

```
connected(X, Y) :- is_connected(Y, X) /\ is_connected(X, Y).
is_connected(X, Y) :- terminal(X) /\ terminal(Y) /\ connected(X , Y). 
```

到：

```
is_connected(X, Y) :- connected(Y, X); connected(X, Y). 
```

事实证明，我还需要提出更正的问题。而不是问`connected(X,Y)`，我现在会问`is_connected(X,Y)`。

# c++ - 我的 function.cpp 文件中的标题有问题

> ID：15328939
> 
> 赞同：-3
> 
> 时间：2013-03-10T23:16:09.597
> 
> 标签：c++, class, header

我有一个包含类的.h 和两个.cpp，一个是主要的，另一个是功能。

我的编译器给了我这些错误

> *   Functions.cpp：在成员函数“void Flandre::add()”中：
> *   Functions.cpp:10:3：错误：âcinâ 未在此范围内声明
> *   Functions.cpp:12:33：错误：âstrlenâ 未在此范围内声明
> *   Functions.cpp:16:6：错误：âcoutâ 未在此范围内声明
> *   Functions.cpp:16:57：错误：未在此范围内声明“endl”
> *   Functions.cpp:21:7：错误：âcoutâ 未在此范围内声明
> *   Functions.cpp:21:53: 错误: âendlâ 未在此范围内声明
> *   Functions.cpp:27:9：错误：âiâ 的名称查找已更改为 ISO âforâ 范围 [-f
> *   Functions.cpp:27:9：注意：（如果您使用“-fpermissive”G++ 将接受您的代码）
> *   Functions.cpp:27:16：错误：“KYUU”未在此范围内声明
> *   Functions.cpp:32:6：错误：âcoutâ 未在此范围内声明
> *   Functions.cpp:32:57：错误：未在此范围内声明“endl”
> *   Functions.cpp:35:17：错误：â[â 标记之前的预期主表达式
> *   Functions.cpp:37:14：错误：â[â 标记之前的预期 unqualified-id
> *   Functions.cpp:38:14: 错误: â[â 标记之前的预期 unqualified-id
> *   Functions.cpp:39:14：错误：â[â 标记之前的预期 unqualified-id

我认为这与函数中的#include 标头有关

新程序2.cpp

```
>#include <iostream>
#include <string>
#include "newprogram2.h" 
```

Functions.cpp 缺少某些部分，但我只是希望它能够得到遵守，这样我就可以让 add() 首先工作。

```
#include "newprogram2.h" 
```

新程序2.h

```
#ifndef NEWPROGRAM2_H
#define NEWPROGRAM2_H
#include<string>
using namespace std;
    #endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T23:58:12.677

您必须为要使用的功能包含正确的标题。

因为`cin`，`cout`而且`endl`您需要`#include <iostream>`，您忘记在您的第二个 .cpp 文件中执行此操作

编译器无法识别`strlen`为函数，因为它不在`<string>`（参见[http://www.cplusplus.com/reference/string/](http://www.cplusplus.com/reference/string/)）但在`<string.h>`（参见[http://www.cplusplus.com/reference/cstring/strlen /](http://www.cplusplus.com/reference/cstring/strlen/)）。

我建议您使用`size()`or `length()`，这些都在 中`<string>`，这两个都可以在`std::string`对象上调用。

* * *

```
Functions.cpp:27:16: error: âKYUUâ was not declared in this scope 
```

显示此错误是因为您尝试访问在另一个 .cpp 文件中声明的变量。您尝试访问它的 .cpp 文件不知道此变量。您可以通过将变量移动到头文件中来解决此问题。

* * *

`Functions.cpp:27:9: error: name lookup of âiâ changed for ISO âforâ scoping`

这可以通过改变这个来解决

```
for(i=0;i<=KYUU;i++) 
```

对此

```
for(int i=0;i<=KYUU;i++) 
```

* * *

```
Functions.cpp:35:17: error: expected primary-expression before â[â token
Functions.cpp:37:14: error: expected unqualified-id before â[â token
Functions.cpp:38:14: error: expected unqualified-id before â[â token
Functions.cpp:39:14: error: expected unqualified-id before â[â token 
```

显示这些错误是因为您尝试直接在类上调用函数，而不是从该类实例化的对象，例如 this `Flandre[i].getid()`。你不能这样做，而是创建一个对象并调用对象上的函数。

# lithium - 锂框架架构 - 从另一个控制器调用一个控制器

> ID：15328940
> 
> 赞同：0
> 
> 时间：2013-03-10T23:16:15.027
> 
> 标签：lithium

我正在开发一个使用 Lithium Framework 和 MongoDB 数据库的 Web 应用程序。

在应用程序的一页上 - 我想显示来自多种对象类型的数据。我了解模型之间的关系概念（即，belongsTo、hasMany 等）。但是，我的问题与控制器关系有关。

例如，假设我有两个名为“People”和“Companies”的对象。我想在“人”视图上显示有关公司的特定信息。我做了以下事情：

1）在“人”模型中，我添加了以下行：

```
public $belongsTo = array('Companies'); 
```

2）在“PeopleController”文件中，我还包含了对公司模型的引用，例如：

```
use app\models\Companies; 
```

现在，在 PeopleController 中，我想调用 CompaniesController 文件中的方法。

我是否可以通过直接调用 CompaniesController 文件来访问它？或者，我是否必须通过公司模式。

无论哪种情况，我都需要语法方面的帮助。我正在用卢布找出应该调用的最佳方式。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:06:11.677

您应该重新考虑您的结构 - 您的控制器方法应该真正获取该视图所需的所有资源，不管它们是什么。

因此，如果您有一个 url '/people/bob' 并且想要获取 Bob 的公司数据，只需将其添加到 People 控制器的 view 方法中。就像是

```
People::first(array('conditions' => array('name' => 'Bob'), 'with' => 'Companies')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:43:59.620

您*可以*实例化 a `CompaniesController`（可能传入过程中`$this->request`的`'request'`选项），然后调用其中的方法。但是，组织它的更好方法是将通用功能从两个位置移动`CompaniesController`到`Companies`并从两个位置调用它。

`use app\models\Companies`并没有真正做出“参考”。它只是表示`Companies`真正的意思`app\models\Companies`。我认为“别名”是一种更好的思考方式。请参阅[http://php.net/manual/en/language.namespaces.importing.php](http://php.net/manual/en/language.namespaces.importing.php)。

例子：

```
// in app/models/Companies.php
namespace app\models;

class Companies extends \lithium\data\Model {
    public static function doSomething() {
      // do something related to companies.
    }
}

// in app/controllers/CompaniesController.php
namespace app\controllers;

use app\models\Companies;

class CompaniesController extends \lithium\action\Controller {
    public function index() {
        $result = Companies::doSomething();
        return array('some' => 'data', 'for' => 'the view');
    }
}

// in app/controllers/PeopleController.php
namespace app\controllers;

use app\models\Companies;

class PeopleController extends \lithium\action\Controller {
    public function index() {
        $result = Companies::doSomething();
        return array('some' => 'data', 'for' => 'the view');
    }
} 
```

# mysql - 通过 id 获取准确值的 SQL 内连接问题

> ID：15328941
> 
> 赞同：0
> 
> 时间：2013-03-10T23:16:30.063
> 
> 标签：mysql, sql, inner-join

我有这样的疑问：

```
SELECT `type` FROM `data_user` table1 INNER JOIN
`user_type` table2 ON table1.username = 'sber' 
```

我从 中获取所有行`user_type`，但我只需要表`user_type`中 id 等于 id的类型值`data_user`。

如何解决我想要的这个查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T23:19:41.760

```
SELECT `type` 
FROM `data_user` table1 
INNER JOIN `user_type` table2 ON (table1.username = 'sber' AND 
    table1.id = table2.id) 
```

# javascript - 文本区域中更改的值的百分比

> ID：15328945
> 
> 赞同：0
> 
> 时间：2013-03-10T23:17:10.343
> 
> 标签：javascript, jquery, percentage

A）`.originalData`是一个文本区域

B）`.changedData`也是一个文本区域，但这是我将进行更改

**如何计算 B 中从 0% 开始变化的值的百分比？**

**jQuery：**

`var changed, original = $(".originalData").val() $(".changedData").change(function(){ changed = $(this).val(); });`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T00:07:53.540

如果你想计算变化的百分比我想你必须做这样的事情

```
var changedData = $('.changedData').val().length;
var originalData = $('.changedData').val().length;

var precentageOfChange = changedData/originalData * 100 - 100
$('.mydiv').append(precentageOfChange); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T23:50:31.933

```
$('.changedData').change(function(){
   var original = $('.originalData').val();
   var changed = $(this).val();
   var changed = changed / original * 100 - 100;
}); 
```

# apache-flex - 在 Flashbuilder 4.5/6 中使用本机扩展 (ANE) 时，我可以“导出发布版本”还是必须使用命令行进行编译？

> ID：15328948
> 
> 赞同：0
> 
> 时间：2013-03-10T23:17:46.990
> 
> 标签：apache-flex, flash-builder4.5

我是否忽略了某些东西，还是真的为我在 fb 4.5 / 4.6 中构建的 android 应用程序创建最终的 .APK 文件我必须真正使用命令行，或者如果我只是像我一样导出发布版本，它会起作用吗平时怎么办？

我已经尝试过尝试增加振动，但这个过程似乎过于复杂和令人沮丧，最终它从未奏效。

# c - 返回一个用给定顺序填充的新链表节点？

> ID：15328950
> 
> 赞同：0
> 
> 时间：2013-03-10T23:18:02.050
> 
> 标签：c, algorithm

我正在做一个项目，该项目需要我制作一个 newNode 并按顺序分配该节点。我不确定我是否做得正确。另外，我怎样才能为这个函数做一个测试用例来测试我写的代码？

```
/*
Returns a new linked list node filled in with the given order, The function
 * allocates a new order and copy the values stored in data then allocate a 
 * linked list node. If you are implementing this function make sure that you
 * duplicate, as the original data may be modified by the calling function.
*/

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "list.h"

struct order 
{
        int id;
        char side;
        int quantity;
        double price;
};

struct onode 
{
        struct order* data;
        struct onode* next;
        struct onode* prev;
};

struct onode* newNode (struct order* data)
{
    struct order* dataValue  = (struct order*) malloc(sizeof(struct order));
    struct onode* linkedlist = (struct onode*) malloc(sizeof(struct onode));

    *dataValue = *data;

    linkedlist ->data = dataValue;

    linkedlist->data->id = dataValue->id;
    linkedlist->data->price = dataValue->price;
    linkedlist->data->quantity = dataValue->quantity;
    linkedlist->data->side = dataValue->side;
    linkedlist->next->prev = NULL;

    return linkedlist;

} 
```

另外，这样有效吗？我还能改变什么来使这个程序更好？

# python - 在下一行打印csv中的每个数据节点？

> ID：15328954
> 
> 赞同：-1
> 
> 时间：2013-03-10T23:18:19.973
> 
> 标签：python, csv

我一直在尝试打印一个 .csv 文件的所有列，该文件有四列，列上没有标题。基本上让python为每一列写一个新行。

到目前为止，这是我的代码，我认为 split(',') 函数会在分隔符处拆分每个节点并在下一行写入下一个数据点。我错了... import os import csv

```
os.chdir('/users/brettzajac/Documents/CSV_Parser')

try:
    data = open('file.csv', 'r', encoding = 'utf-8')
    for each_line in data:
        try:
            row = each_line.split(',', -1)
            print(row)
        except:
            pass
    data.close()
except:
    print('The file is missing!') 
```

这是我拥有的数据样本。

```
.22 MAG,SIMMONS - .22 MAG RIFLESCOPE,SIMMONS,Magnification,3-9X32
.22 MAG,SIMMONS - .22 MAG RIFLESCOPE,SIMMONS,Magnification,4X32
.22 MAG,SIMMONS - .22 MAG RIFLESCOPE,SIMMONS,Finish,MATTE
.22 MAG,SIMMONS - .22 MAG RIFLESCOPE,SIMMONS,Finish,SILVER 
```

我的结果是：

```
[.22 MAG,SIMMONS - .22 MAG RIFLESCOPE,SIMMONS,Magnification,3-9X32]
[.22 MAG,SIMMONS - .22 MAG RIFLESCOPE,SIMMONS,Magnification,4X32]
[.22 MAG,SIMMONS - .22 MAG RIFLESCOPE,SIMMONS,Finish,MATTE]
[.22 MAG,SIMMONS - .22 MAG RIFLESCOPE,SIMMONS,Finish,SILVER] 
```

无论如何，我都很难过，也许我只是不知道在 google/stackOverFlow 上搜索什么，所以如果我重复了别人的问题，我深表歉意。感谢您提供任何帮助或指向正确方向。

问候，扎亚克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T23:21:56.903

代替

```
print(row) 
```

尝试

```
for cell in row:
    print cell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T23:22:27.557

`split`只是返回一个列表，它与打印、换行符等无关。如果要在新行上打印每个元素的列表，则需要手动打印，例如使用`for`循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T23:41:23.280

试试这个：

```
import csv

with open('file.csv', 'rb', encoding = 'utf-8') as f:
    r = csv.reader(f)
    li = list(r)

fields = '...'.join( '{:.<%ds}' % max(map(len,cat))
                     for cat in zip(*li) )

print 'fields :\n%r\n\n' % fields

print '\n'.join(fields.format(*el) for el in li) 
```

# javascript - 使用 SSL 的 Google Maps API 自定义图标

> ID：15328955
> 
> 赞同：0
> 
> 时间：2013-03-10T23:18:21.277
> 
> 标签：javascript, google-maps, google-maps-api-3

我有一个谷歌地图应用程序，我想放置自定义图标而不是通常显示的通用红色图标。但无论我做什么，我都无法设置不同的图标，它总是显示为红色。我读到您不能在图标的 url 中包含 https，所以我将其上传到图像主机，但我仍然无法更改图标。如何在地图上获得自定义图标，还是必须使用 bing？

```
function initialize() {
    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng(-34.397, 150.644);
    var mapOptions = {
      zoom: 10,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
  }

  function codeAddress() {
  initialize();
    var address = document.getElementById("address").value;
    range = document.getElementById("distance").value;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: map,
            icon: "http://labs.google.com/ridefinder/images/mm_20_red.png"
            position: results[0].geometry.location

        });

        lat1 = results[0].geometry.location.lat();
        lng1 = results[0].geometry.location.lng();

      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
    load();
  } 
```

注意它在哪里说：

```
icon: "http://labs.google.com/ridefinder/images/mm_20_red.png" 
```

不管我改变了什么，它总是显示红色的通用图标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T03:03:41.040

`HTTP`您可以在页面上和页面上加载标记图像`HTTPS`。`HTTPS`但是，您需要确保该方案与包含页面的方案匹配（或者至少，如果该页面也匹配，请确保您使用该方案）。

您的`MarkerOptions`对象中似乎有错字：图标字符串后缺少逗号。

```
 var marker = new google.maps.Marker({
        map: map,
        icon: "http://labs.google.com/ridefinder/images/mm_20_red.png",
        position: results[0].geometry.location

    }); 
```

# sql-server - 如何配置 Windows Server 2008 R2 以允许从 SQL Server 中的集成服务包发送电子邮件

> ID：15328958
> 
> 赞同：0
> 
> 时间：2013-03-10T23:18:45.717
> 
> 标签：sql-server, ssis, smtp, windows-server-2008

如何配置 Windows Server 2008 R2 以允许从 SQL Server 中的集成服务包发送电子邮件？

我正在尝试从已导入到 MSDB 存储包中的 SSIS 包发送电子邮件。

当我运行包时，出现以下错误：

> [发送邮件任务] 错误：发生错误并显示以下错误消息：“发送邮件失败。System.Net.WebException：无法连接到远程服务器 System.Net.Sockets.SocketException：尝试访问套接字以某种方式被其访问权限所禁止

我使用脚本任务和.NET 尝试过同样的事情`MailMessage()`，`SmtpClient()`任务没有失败，但它也没有发送电子邮件。

作为旁注：我知道服务器上通过 IIS 设置了一个网站，可以通过端口 25 发送电子邮件。

我已经为包提供了相同的主机 IP 地址和端口号，但仍然出现错误。

有谁知道我可以解决什么问题以找到一种方法来完成这项工作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T01:20:59.050

在您的开发工作站上以调试模式运行时，软件包是否成功发送电子邮件？如果是这样，那么我猜测 SMTP 服务器正在拒绝 SQL Server Integration Services 服务器的连接权限。也许 SSIS 服务器的 IP 地址需要在 SMTP 产品中获得连接和/或中继权限？

要测试此问题以及其他连接问题，请从 SSIS 服务器远程登录到端口 25 ( [http://support.microsoft.com/kb/153119](http://support.microsoft.com/kb/153119) ) 上的 SMTP 服务器。

此外，在 SQL Server 数据库服务中设置数据库邮件并从那里测试电子邮件。这也测试了 SMTP 服务器是否允许 SSIS/MSSSQL 服务器连接和发送邮件。

始终使用内部电子邮件地址和外部电子邮件地址进行测试 - 这样您也可以测试中继权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:23:53.090

问题是服务器已更改为使用默认 TCP 端口以外的其他端口。

SSIS发送邮件任务只支持25端口，所以我更新了脚本任务并使用了。

# javascript - 不受信任的 SSL 禁用 javascript？

> ID：15328959
> 
> 赞同：0
> 
> 时间：2013-03-10T23:18:52.110
> 
> 标签：javascript, ssl

我正在开发一个 Facebook 应用程序，并且我的网站上有一个自签名 SSL crt，这使得它不受信任（至少我认为，对整个 SSL 来说有点新）。

当我在 localhost 或非 https 连接上测试应用程序时，javascript 工作正常，但在 https 上，它不起作用。

有什么解决办法吗？

（对不起nooby问题）

# javascript - Coffeescript - 为什么我的班级属性未定义 onclick？

> ID：15328963
> 
> 赞同：1
> 
> 时间：2013-03-10T23:19:39.060
> 
> 标签：javascript, coffeescript

我有一个简单的类，框：

```
class Box
    constructor: (@idx, grid) ->
        console.log("constructing", @idx)
        @elem = document.createElement("div")
        @elem.id = "box" + idx
        @elem.className = "box"
        @elem.onclick = @toggle
        grid.appendChild(@elem)

    toggle: () ->
        alert("click")
        console.log("My idx is: ", @idx) 
```

当构造函数运行时，它会报告“constructing 0”、“constructing 1”等，所以我知道正在定义类属性。如果我调用 b.toggle() （其中 b 是一个盒子实例），那么它会正确报告 idx。但是一旦我点击页面上的元素，它就会说@idx 是未定义的。

所以看起来盒子的属性似乎在 onclick 方面丢失了。为什么是这样？

这是编译后的 Javascript：

```
Box = (function() {

  function Box(idx, grid) {
    this.idx = idx;
    console.log("constructing", this.idx);
    this.elem = document.createElement("div");
    this.elem.id = "box" + idx;
    this.elem.className = "box";
    this.elem.onclick = this.toggle;
    grid.appendChild(this.elem);
  }

  Box.prototype.toggle = function() {
    alert("click");
    return console.log("My idx is: ", this.idx);
  };

  return Box;

})(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T23:27:12.483

使用方法定义的[胖箭头](http://coffeescript.org/#fat-arrow)将`toggle`其绑定到正确的上下文（在这种情况下是您的类实例）：

```
toggle: =>
  alert("click")
  console.log("My idx is: ", @idx) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T23:40:33.007

nl_0 对解决方案有很好的答案。但是在 javascript 方面，这就是为什么效果不佳的原因。

`Box`构造对象的函数使用以下代码`Box`将原型函数附加`toggle`到元素：

```
this.elem.onclick = this.toggle; 
```

结果，当在函数内部时`toggle`，所有可访问的都是事件附加到的元素。因此，`this`inside of `toggle`is `elem`，这就是为什么你看不到`.idx`它的原因。

# java - 编写一个程序，从文件中读取时间表并打印到屏幕上？

> ID：15328966
> 
> 赞同：-1
> 
> 时间：2013-03-10T23:19:47.283
> 
> 标签：java, arraylist

**保存为文本文档的初始格式：** 表 1：

```
04
05 10 25 40 55 
06 05 15 25 35 45 55 
07 00 05 10 15 20 25 30 35 40 45 50 55
08 00 05 10 15 20 25 30 35 40 45 50 55
09 00 05 10 15 20 25 30 35 40 45 50 55 
10 00 05 10 15 20 25 30 35 40 45 50 55 
11 00 05 10 15 20 25 30 35 40 45 50 55 
12 00 05 10 15 20 25 30 35 40 45 50 55 
13 00 05 10 15 20 25 30 35 40 45 50 55 
14 00 05 10 15 20 25 30 35 40 45 50 55 
15 00 05 10 15 20 25 30 35 40 45 50 55 
16 00 05 10 15 20 25 30 35 40 45 50 55
17 00 05 10 15 20 25 30 35 40 45 50 55
18 00 05 10 15 20 25 30 35 40 45 50 55 
19 00 05 10 15 20 25 30 35 40 45 50 55 
20 00 05 10 15 20 25 30 35 40 45 50 55 
21 05 15 25 40 55 
22 10 25 40 55 
23 10 25 40 55 55 
00 10 25 40 55 
01 17 47 
02 17 47 
03 17 47 
```

**所需格式应如下所示：** 表 2：

```
05:10 05:25 05:40 05:55 
06:05 06:15 06:25 06:35 06:45 06:55 
07:00 07:05 07:10 07:15 07:20 07:25 07:30 07:35 07:40 07:45 07:50 07:55 
08:00 08:05 08:10 08:15 08:20 08:25 08:30 08:35 08:40 08:45 08:50 08:55 
09:00 09:05 09:10 09:15 09:20 09:25 09:30 09:35 09:40 09:45 09:50 09:55 
10:00 10:05 10:10 10:15 10:20 10:25 10:30 10:35 10:40 10:45 10:50 10:55 
11:00 11:05 11:10 11:15 11:20 11:25 11:30 11:35 11:40 11:45 11:50 11:55 
12:00 12:05 12:10 12:15 12:20 12:25 12:30 12:35 12:40 12:45 12:50 12:55 
13:00 13:05 13:10 13:15 13:20 13:25 13:30 13:35 13:40 13:45 13:50 13:55 
14:00 14:05 14:10 14:15 14:20 14:25 14:30 14:35 14:40 14:45 14:50 14:55 
15:00 15:05 15:10 15:15 15:20 15:25 15:30 15:35 15:40 15:45 15:50 15:55 
16:00 16:05 16:10 16:15 16:20 16:25 16:30 16:35 16:40 16:45 16:50 16:55 
17:00 17:05 17:10 17:15 17:20 17:25 17:30 17:35 17:40 17:45 17:50 17:55 
18:00 18:05 18:10 18:15 18:20 18:25 18:30 18:35 18:40 18:45 18:50 18:55 
19:00 19:05 19:10 19:15 19:20 19:25 19:30 19:35 19:40 19:45 19:50 19:55 
20:00 20:05 20:10 20:15 20:20 20:25 20:30 20:35 20:40 20:45 20:50 20:55 
21:05 21:15 21:25 21:40 21:55 
22:10 22:25 22:40 22:55 
23:10 23:25 23:40 23:55 23:55 
00:10 00:25 00:40 00:55 
01:17 01:47 
02:17 02:47 
```

为什么输出没有打印出如图 2 所示的时间？这就是我到目前为止所写的。我有一个从 table1 读取并将文本存储到 arrayList 的主类。上课时间以所需格式发送时间和小时数。

```
public static void main(String[] args) {

        Scanner scanner = null;

        try {

        File file = new File("C:/Users/Tommy/workspace/Prov/SLtid.txt");
        scanner = new Scanner(file);
        while(scanner.hasNextLine()){
            String[] tokens = scanner.nextLine().split("\\s+");

                for (int i= 0; i< tokens.length; i++)
                {

                    Time t = new Time(tokens[i], tokens[i].substring(01));

                // new time ( hour, minute )

            System.out.println(t);  
                }

        }} catch (Exception e) { 
            e.printStackTrace();
        }}} 
```

我有另一个名为 time 类的类，它基本上将小时和分钟发送到主类：

```
public class Time {

        int hr;
        int minute;

        Time(String t, String m){

        hr = Integer.parseInt(t);
        minute = Integer.parseInt(m);

    }

    public String toString(){

        return String.format("%02d:%02d", hr, minute);

}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T23:34:53.483

这一行：

```
Time t = new Time(tokens[i], tokens[i].substring(01)); 
```

没有向 Time 构造函数提交正确的参数。从您的输入来看，小时似乎始终是第一个令牌，但您并没有以这种方式提交它，因此您最终将提交分钟而不是小时。尝试：

```
for (int i= 1; i < tokens.length; i++) {
    Time t = new Time(tokens[0], tokens[i]);
} 
```

或类似的东西。

# alt - alt属性故障

> ID：15328968
> 
> 赞同：1
> 
> 时间：2013-03-10T23:19:53.110
> 
> 标签：alt

我有一个关于 alt 文本功能的问题。alt="" 在我的 Wordpress 主题中变得可见，但显示的值来自标题字段。这正常吗？LE：这个[链接](https://github.com/wpshower/expositio/blob/master/tmpl_single.php)包含这个免费的 expositio 主题的代码源。看起来它在 alt/title 部分做了很大的不同。请看这个部分：`$strResultGallery .= '<td>'.'<img alt="'.$row_img->post_title.'" src="'.$strThumb.'" />'; $strResultGallery .= '<h5>'.$row_img->post_title.'</h5>'; $strResultGallery .= '</td>';`“魔法”在这里发生了。如果您填写 alt 字段（来自图像编辑选项卡），则在源代码中 alt="" 将为空。而不是这样，如果我们填写标题字段（也在图像编辑选项卡中），这将出现在源代码中作为 alt 属性（因为`img alt="'.$row_img->post_title.'"`）。更重要的是，`<h5>'.$row_img->post_title.'</h5>'`将使 alt="" 属性显示为标题，在页面上可见。这些东西在演示中也是相同的[链接](http://expositio.wpshower.com/?p=6).话虽如此，必须重写代码才能以常规方式具有alt / title功能。如果有人可以帮忙，...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:29:15.880

ok, a really good man gave me the solution.Nice, clean, simple.And for those who want to use this theme and to have alt="" function working properly as well , just replace the img alt="" content found on the tmpl_single.php with this line :

```
<img alt="'.get_post_meta($row_img->ID, '_wp_attachment_image_alt', true).'" src="'.$strThumb.'" /> 
```

. Many thanks to [Vlad](http://www.yup.ro/) and also many thanks to [Mamaduka](https://github.com/wpshower/expositio) the author of this wonderful Wordpress theme

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T08:49:32.260

Alt 在现代 html5 和语义网站世界中已被弃用。使用 attr `<title>`。它的推荐

# java - 如何使用 sun jvm 禁用内联优化？

> ID：15328971
> 
> 赞同：6
> 
> 时间：2013-03-10T23:20:13.763
> 
> 标签：java, jvm, jvm-hotspot

我需要做一些实验来展示内联对我的代码的影响。有人知道如何使用 sun jvm 禁用内联吗？我搜索了[http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)并了解到 -XX:InlineSmallCode=n 可以控制内联候选人的阈值。那么 -xx:InlineSmallCode=0 会起作用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T23:39:38.810

我会尝试`-XX:MaxInlineSize=0`。`InlineSmallCode`关于它是否适用于所有内联的描述似乎有点不清楚。您可能还会发现这篇博文很有帮助，因为它解释了如何告诉 JIT 编译器打印有关哪些方法被内联的信息：

[Java 7：如何编写真正快速的 Java 代码](http://niklasschlimm.blogspot.com/2012/01/java-7-how-to-write-really-fast-java.html)

我认为可能仍然有一个例外，您不能禁用内联，那是针对完全空的方法（因为内联方法的大小仍然为 0）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-04-17T16:24:15.277

在 Java 8 中，您可以通过将选项传递`-XX:-Inline`给 JVM 来实现。

# hadoop - Hadoop较小的输入文件

> ID：15328972
> 
> 赞同：2
> 
> 时间：2013-03-10T23:20:13.827
> 
> 标签：hadoop, mapreduce

我正在以一种不同的方式使用 hadoop。就我而言，输入大小非常小。但是，计算时间更长。我有一些复杂的算法，我将在每一行输入上运行。因此，即使输入大小小于 5mb，总计算时间也超过 10 小时。所以我在这里使用hadoop。我正在使用 NLineInputFormat 按行数而不是块大小来拆分文件。在我最初的测试中，我有大约 1500 行（拆分为 200 行），与在一台机器上串行运行相比，我看到在四节点集群中只提高了 1.5 倍。我正在使用虚拟机。这可能是问题还是对于较小尺寸的输入，hadoop 不会有太多好处？任何见解都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T02:59:11.340

对我来说，你的工作量类似于 SETI@Home 的工作量——负载量小，但需要数小时的工作时间。

Hadoop（或更具体地说是 HDFS）不是为大量小文件设计的。但我怀疑这是 MapReduce 的问题 - 您正在使用的处理框架。

如果您想将您的工作负载保持在一起：1）如果文件小于块大小，则将它们拆分为单独的文件（一个工作负载，一个文件），那么它将转到一个映射器。典型的块大小为 64MB 或 128MB

2) 为 FileInputFormat 创建一个包装器，并将 'isSplitable()' 方法重写为 false。这将确保将整个文件内容馈送到一个映射器，而不是 hadoop 试图逐行拆分它

参考：[http ://hadoopilluminated.com/hadoop_book/HDFS_Intro.html](http://hadoopilluminated.com/hadoop_book/HDFS_Intro.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T19:22:26.623

Hadoop 并不擅长处理大量的小文件，因此，通常希望将大量较小的输入文件组合成较少数量的较大文件，以减少映射器的数量。

由于 Hadoop MapReduce 过程的输入由`InputFormat`. `FileInputFormat`是处理 HDFS 中文件的默认实现。使用`FileInputFormat`，每个文件都被拆分为一个或多个`InputSplits`通常以 为上限的文件`block size`。这意味着输入拆分的数量低于输入文件的数量。当 MapReduce 进程处理大量小文件时，这不是一个理想的环境，因为协调分布式进程的开销远大于小文件数量相对较多时的开销。

驱动吐出尺寸的基本参数是`mapred.max.split.size`。

使用`CombineFileInputFormat`和这个参数我们可以控制映射器的数量。

[在这里查看](https://stackoverflow.com/questions/14270317/implementation-for-combinefileinputformat-hadoop-0-20-205/14284330#14284330)我的另一个答案的实现。

# mysql - MySql 在同一个查询中随机选择和删除

> ID：15328974
> 
> 赞同：0
> 
> 时间：2013-03-10T23:20:39.783
> 
> 标签：mysql, sql, database

我有以下mysql查询：

```
SELECT u.name AS nume, p.premiu AS premiu
FROM fbusers AS u, premii AS p
ORDER BY RAND( ) 
LIMIT 1 
```

我想要的是选择一个随机用户来提供奖品，然后我想从奖品表中删除该奖品。
可以在同一个查询中完成吗？我应该如何进行？

编辑：逻辑是显示获胜者和奖品，如果可能，将结果插入其他表格，然后从表格中删除奖品，因为其他人不可能赢得相同的奖品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T23:46:52.803

不：您不能在一个查询中执行 SELECT、INSERT 和 DELETE。如果您希望以原子方式处理所有这三个操作（即它们都将被执行，或者如果任何一个失败，其他的将被回滚），请使用事务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T23:31:33.310

当然可以，但我在这里看不到逻辑，因为没有关于谁赢了的信息：

```
DELETE price FROM price 
    JOIN (SELECT u.name AS nume, p.premiu AS premiu
    FROM fbusers AS u, premii AS p
    ORDER BY RAND( ) 
    LIMIT 1) a
ON price.premiu = a.premiu 
```

# c++ - 从字符串中提取数字，例如整数或双精度

> ID：15328976
> 
> 赞同：0
> 
> 时间：2013-03-10T23:20:53.930
> 
> 标签：c++, string, getline, file-read, data-manipulation

我很难想出一种方法来从 getline() 函数中提取的字符串中提取诸如 int 或 double 之类的数字。

//例子：

```
string data = "";
fstream inFile; 
```

//文件包含：

```
"Hello today is 83.3 degrees Fahrenheit." 
```

// 使用getline函数

```
getline(inFile, data); 
```

// 从字符串数据中提取数字

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T23:41:53.337

您可以执行以下操作

```
getline(inFile, data);

std::istringstream iss;
iss.exceptions(std::istream::failbit | std::istream::badbit );

iss.str(data);
double dTemp = 0;

while( iss.good() ){

  try{
   iss >> dTemp;
   }      
  catch(std::istream::failure &e ){
   /* Do your error check over here */
  }

} 
```

您还想了解更多关于 C++ 的信息。检查此[链接](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T00:36:48.450

如果您准备包含 cstdio，则可以使用 sscanf。

以下手册页链接将为您提供帮助：-

[http://linux.die.net/man/3/sscanf](http://linux.die.net/man/3/sscanf)

**例子**

```
char foo[] = "foo bar 12 baz";
int qux;
sscanf(foo, "foo bar %d baz", &qux); 
// qux will be assigned 12 
```

或者

```
char foo[] = "foo bar 12.5 baz";
double qux;
sscanf(foo, "foo bar %lf baz", &qux); 
// qux will be assigned 12.5 
```

您显然需要根据您的情况对其进行调整，并考虑各种安全问题。

# c++ - 访问冲突 DirectWrite

> ID：15328979
> 
> 赞同：0
> 
> 时间：2013-03-10T23:21:41.627
> 
> 标签：c++, access-violation, directwrite

我正在使用 DirectWrite API，并且正在实现自己的布局和文本渲染引擎。我已经`IDWriteTextLayout`成功创建了我的对象。当我拨打以下电话时，我收到一个访问冲突错误，我不知道为什么：

```
DWRITE_LINE_METRICS m_lineMetrics;
UINT32 m_lineCount;

DX::ThrowIfFailed(
   m_textLayout->GetLineMetrics(&m_lineMetrics,31,&m_lineCount)
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:50:59.570

我想到了。我想我错误地解释了该函数的文档。您可以将指针传递给单个 DWRITE_LINE_METRICS 结构或 DWRITE_LINE_METRICS 结构数组。

# angularjs - AngularJS $add() 函数未触发

> ID：15328986
> 
> 赞同：-1
> 
> 时间：2013-03-10T23:22:39.110
> 
> 标签：angularjs

我有一个表格，其中填充了表格中的信息。当我的记录有一个或多个角色时，它会按预期显示，但是我无法添加其他角色，如果没有角色，我也无法向记录添加任何角色。我的 $add() 函数有问题。

另一个问题是密码和确认密码显示相同的数据。我现在也在努力解决这个问题。

```
<form ng-model="current">
            <fieldset>
                <legend>
                    <a href="" alt="Register" class="btn btn-mini btn-success" ng-click="newItem()"><i
                            class="icon-plus-sign icon-white"></i> New </a>
                    Detail
                </legend>
                <label>First Name</label>
                <input type="text" placeholder="First Name" ng-model="current.firstName" value="current.firstName"
                       ng-disabled="isKey('lastName')">

                <label>Last Name</label>
                <input type="text" placeholder="First Name" ng-model="current.lastName" value="current.lastName"
                       ng-disabled="isKey('firstName')">

                <label>Email</label>
                <input type="text" placeholder="user@example.com" ng-model="current.email" value="current.email"
                       ng-disabled="isKey('email')">

                <label>Password</label>
                <input type="password" placeholder="Password" ng-model="current.password" value="current.Pass"
                       ng-disabled="isKey('Pass')">

                <label>Confirm Password</label>
                <input type="password" placeholder="Confirm Password" ng-model="current.password" value="current.Pass"
                       ng-disabled="isKey('Pass')">

                <label>Enabled</label>
                <select ng-model="current.enabled" ng-disabled="isKey('enabled')">
                    <option value=true>Enabled</option>
                    <option value=false>Disabled</option>
                </select>

                <div class="role" ng-repeat="role in current.roles">
                    <label>User Roles</label>
                    <select ng-model="role.roleName" ng-disabled="isKey('role')">
                        <option value="ROLE_USER">User</option>
                        <option value="ROLE_ADMIN">Administrator</option>
                    </select>
                </div>
                <label></label>
                <a class="btn btn-primary" ng:click="current.role.$add()">Add Role</a>
                <label></label>
                <a href="#askCreateUser" alt="Register" role="button" class="btn btn-success" data-toggle="modal"
                   ng-click="setDataOperation('Update')"><i class="icon-edit icon-white"></i> Update </a>
                <a href="#askCreateUser" alt="Register" role="button" class="btn btn-warning" data-toggle="modal"
                   ng-click="setDataOperation('Delete')"><i class="icon-trash icon-white"></i> Delete </a>
            </fieldset>

        </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:41:35.840

我发现这是由于试图推送到一个空数组。添加以下功能后，我可以毫无问题地添加元素。

```
 $scope.addRole = function () {
        if ($scope.current.roles != undefined) {
            $scope.current.roles.push({});
        }
        else {
            $scope.current.roles = new Array();
            $scope.current.roles.push({});
        }
    }; 
```

# c++ - 链接时 Visual C++ 2008 应用程序中名称修饰 declspec 不匹配的链接错误

> ID：15328987
> 
> 赞同：0
> 
> 时间：2013-03-10T23:22:43.277
> 
> 标签：c++, visual-c++, visual-studio-2008-sp1

我有一个 DLL 和一个主可执行文件，主可执行文件不再从 DLL 的导入库中链接符号，并且 DLL .map 文件中的 declspec 不匹配，损坏的 C++ 名称也不匹配。我不明白为什么，尽管我已经完成了您在无法链接 C++ 内容时所做的通常事情。

我的标题定义如下：

```
#ifdef MY_MODULE
#undef CLASS_EXPORT
#define CLASS_EXPORT __declspec(dllexport)
#else
#undef CLASS_EXPORT
#define CLASS_EXPORT __declspec(dllimport)
#endif 
```

我的课程似乎可以正确导出，但 .map 文件表明我认为有一些奇怪的事情是错误的：

```
 6    ?CreateDataArea@@YAKPAGPBD111PAVCObject@@K@Z (unsigned long __cdecl 
    CreateDataArea(unsigned short *,char const *,char const *,char const *,
    char const *,class CObject *,unsigned long)) 
```

上面的损坏名称有`@@YAK...`

链接错误是：

```
1>Device.obj : error LNK2019: unresolved external symbol 
"__declspec(dllimport) public: unsigned long __thiscall 
CCommonMemory::CreateDataArea(unsigned short *,char const *,char const *,
char const *,char const *,class CObject *,unsigned long)" 
(__imp_?CreateDataArea@CCommonMemory@@QAEKPAGPBD111PAVCObject@@K@Z) referenced 
in function "public: __thiscall CDevice::CDevice(void)" (??0CDevice@@QAE@XZ) 
```

那么，`@@QAEK`当我配置了 declspec 宏时，为什么损坏的名称会有所不同，为什么 .map 文件 `__thiscall`在宏定义时显示调用约定`__declspec(dllexport)`？

就像我忘了做 __declspec(dllimport/dllexport) 宏一样，但我做到了。

我尝试将 CLASS_EXPORT 放在导出的每个方法上，并在类声明的第一行尝试了它，没有任何变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T23:33:42.577

看起来 for 的定义`CreateDataArea()`没有限定在类中（即，您`CCommonMemory::`在定义函数时省略了 a ）。

如果您查看地图文件中的内容，您会发现它是一个`__cdecl`没有“附加”类名的函数。

# javascript - 使用 Javascript 和 HTML5 输出，但没有得到输出

> ID：15328988
> 
> 赞同：0
> 
> 时间：2013-03-10T23:22:46.783
> 
> 标签：javascript, html

我正在构建一个计算器，它可以为房地产交易提供州特定的销售税。我知道我的“normalrtfCalc”函数有效，但我的问题是将表单中的“金额”输入函数并将结果输入输出。任何帮助将不胜感激。谢谢！

这是我的 HTML：

```
<form id="rtfCalc" oninput="updateOutput( )">
    <input name="sale amount" type="number" value="0" />
    <output name="transfer fee" for="sale amount"></output>
</form> 
```

这是我的 JS：

```
function updateOutput() {
    var form = document.getElementById("rtfCalc");
    var out = form.elements["transfer fee"];
    var amount = parseInt(form.elements["sale amount"].value);

    function normalrtfCalc(amount) {
        if (amount <= 150000) {
            out.value = Math.ceil(amount / 500) * 2;
        } else if (amount <= 350000) {
            if ((amount - 150000) <= 50000) {
                out.value = 600 + (Math.ceil((amount - 150000) / 500) * 3.35);
            } else {
                out.value = 935 + (Math.ceil((amount - 200000) / 500) * 3.9);
            }
        } else {
            if ((amount - 200000) <= 350000) {
                out.value = 2735 + (Math.ceil((amount - 200000) / 500) * 4.8);
            } else if ((amount - 550000) <= 300000) {
                out.value = 4655 + (Math.ceil((amount - 555000) / 500) * 5.3);
            } else if ((amount - 850000) <= 150000) {
                out.value = 7835 + (Math.ceil((amount - 850000) / 500) * 5.8);
            } else {
                out.value = 9575 + (Math.ceil((amount - 1000000) / 500) * 6.05);
            }
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T23:36:23.137

您的代码有几处问题。我将在下面发布并在评论中解释：

```
function updateOutput() {
    var form = document.getElementById("rtfCalc");
    var out = form.elements["transfer_fee"];
    var amount = parseInt(form.elements["sale_amount"].value);

    function normalrtfCalc(amount) { // an equal sign(=) before the opening curly bracket is invalid syntax; remove it, and execute the function as stated below, and your code works.

        if (amount <= 150000) {
            out.value = Math.ceil(amount / 500) * 2;

        } else if (amount <= 350000) {
            if ((amount - 150000) <= 50000) {
                out.value = 600 + (Math.ceil((amount - 150000) / 500) * 3.35);
            } else {
                out.value = 935 + (Math.ceil((amount - 200000) / 500) * 3.9);
            }
        } else {
            if ((amount - 200000) <= 350000) {
                out.value = 2735 + (Math.ceil((amount - 200000) / 500) * 4.8);
            } else if ((amount - 550000) <= 300000) {
                out.value = 4655 + (Math.ceil((amount - 555000) / 500) * 5.3);
            } else if ((amount - 850000) <= 150000) {
                out.value = 7835 + (Math.ceil((amount - 850000) / 500) * 5.8);
            } else {
                out.value = 9575 + (Math.ceil((amount - 1000000) / 500) * 6.05);
            }
        }
    }
    normalrtfCalc(amount); //you have to call the function in order for it to execute.
}; 
```

[**演示**](http://jsfiddle.net/Daedalus/Xs8C9/)

# ruby - 在 Heroku 上增加测功机数后的错误

> ID：15328989
> 
> 赞同：2
> 
> 时间：2013-03-10T23:22:47.413
> 
> 标签：ruby, facebook, heroku

我在 Heroku 服务器上使用 Ruby 为 Facebook 编写了一个应用程序，一切都很顺利，直到我将 dynos 的数量增加到 2。此时，大约有一半的时间我去一个新页面，我会得到一个错误消息，或者我会返回到主页，这取决于我去了哪个页面。我通过返回一个测功机解决了这个问题，但我仍然不知道出了什么问题。有任何想法吗？代码可以在这里找到：

[https://github.com/runninggraeb/toolshed](https://github.com/runninggraeb/toolshed)

该程序可以在这里找到（如果您有兴趣）：

[https://apps.facebook.com/toolshed](https://apps.facebook.com/toolshed)

任何帮助，将不胜感激。

所有日志都粘贴在下面。请注意，错误消息是在我使用 dyno=web.1，然后是 dyno=web.2 之后开始的。

```
2013-03-10T22:34:54+00:00 heroku[router]: at=info method=GET path=/auth/facebook host=toolshed.herokuapp.com fwd="24.20.19.205" dyno=web.2 queue=0 wait=7ms connect=5ms service=10ms status=302 bytes=0
2013-03-10T22:34:57+00:00 app[web.1]: 24.20.19.205 - - [10/Mar/2013 22:34:57] "GET /auth/facebook/callback?code=AQC7B6vjC0ksefFLly76DMeqL-hHrR6M49lYgMqiAk01xmF-nbXC9pOAcd_e5x8KTycXcjfXG_ABRUmsfeQlusGECbL7d4PqF-nTIVMA1GBn8hAemVCBKXy8sUspQ1eIZAxICtYeSUk9DzM8-It9-AAbi0FudCRS8PkcTaZ-8SXnNYRk2-iYKMin_fYUG2kT8LbApmaeb1RjtxXQUF8HbvAu HTTP/1.1" 302 - 0.0724
2013-03-10T22:34:57+00:00 app[web.1]: 24.20.19.205 - - [10/Mar/2013 22:34:57] "GET / HTTP/1.1" 200 6836 0.2166
2013-03-10T22:34:57+00:00 heroku[router]: at=info method=GET path=/ host=toolshed.herokuapp.com fwd="24.20.19.205" dyno=web.1 queue=0 wait=9ms connect=15ms service=235ms status=200 bytes=6836
2013-03-10T22:35:01+00:00 app[web.2]: NoMethodError - undefined method `length' for nil:NilClass:
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.2.6/lib/sinatra/base.rb:708:in `block (2 levels) in route!'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.2.6/lib/sinatra/base.rb:755:in `catch'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.2.6/lib/sinatra/base.rb:755:in `process_route'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.2.6/lib/sinatra/base.rb:758:in `block in process_route'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/newrelic_rpm-3.5.4.33/lib/new_relic/agent/method_tracer.rb:242:in `trace_execution_scoped'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.2.6/lib/sinatra/base.rb:808:in `block in invoke'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/newrelic_rpm-3.5.4.33/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:268:in `block in perform_action_with_newrelic_trace'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.2.6/lib/sinatra/base.rb:808:in `catch'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.2.6/lib/sinatra/base.rb:644:in `block in call!'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.2.6/lib/sinatra/base.rb:808:in `invoke'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.2.6/lib/sinatra/base.rb:808:in `instance_eval'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/app.rb:86:in `block in <top (required)>'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.2.6/lib/sinatra/base.rb:1152:in `call'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.2.6/lib/sinatra/base.rb:1152:in `block in compile!'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.2.6/lib/sinatra/base.rb:724:in `instance_eval'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.2.6/lib/sinatra/base.rb:706:in `each'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.2.6/lib/sinatra/base.rb:706:in `route!'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.2.6/lib/sinatra/base.rb:724:in `route_eval'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.2.6/lib/sinatra/base.rb:843:in `dispatch!'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.2/lib/rack/head.rb:9:in `call'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/newrelic_rpm-3.5.4.33/lib/new_relic/agent/instrumentation/sinatra.rb:48:in `block in dispatch_with_newrelic'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/newrelic_rpm-3.5.4.33/lib/new_relic/agent/instrumentation/sinatra.rb:47:in `dispatch_with_newrelic'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.2.6/lib/sinatra/base.rb:1303:in `synchronize'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/newrelic_rpm-3.5.4.33/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:263:in `perform_action_with_newrelic_trace'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.2.6/lib/sinatra/base.rb:707:in `block in route!'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/thin-1.2.11/lib/thin/connection.rb:84:in `block in pre_process'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.2.6/lib/sinatra/base.rb:1272:in `block in call'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/thin-1.2.11/lib/thin/connection.rb:82:in `catch'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.2/lib/rack/commonlogger.rb:20:in `call'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.2.6/lib/sinatra/base.rb:644:in `call!'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.2.6/lib/sinatra/base.rb:629:in `call'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.2/lib/rack/session/abstract/id.rb:190:in `call'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/thin-1.2.11/lib/thin/connection.rb:57:in `process'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.2/lib/rack/methodoverride.rb:24:in `call'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run_machine'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.2.6/lib/sinatra/base.rb:1272:in `call'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/thin-1.2.11/lib/thin/connection.rb:82:in `pre_process'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/thin-1.2.11/lib/thin/controllers/controller.rb:86:in `start'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/thin-1.2.11/lib/thin/backends/base.rb:61:in `start'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/thin-1.2.11/lib/thin/runner.rb:185:in `run_command'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `load'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/thin-1.2.11/lib/thin/server.rb:159:in `start'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.2/lib/rack/session/abstract/id.rb:195:in `context'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/thin-1.2.11/lib/thin/runner.rb:151:in `run!'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/thin-1.2.11/lib/thin/connection.rb:42:in `receive_data'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `<main>'
2013-03-10T22:35:01+00:00 app[web.2]:  /app/vendor/bundle/ruby/1.9.1/gems/thin-1.2.11/bin/thin:6:in `<top (required)>'
2013-03-10T22:35:01+00:00 app[web.2]: 24.20.19.205 - - [10/Mar/2013 22:35:01] "GET /friends_tools.html HTTP/1.1" 500 30 0.1515
2013-03-10T22:35:01+00:00 heroku[router]: at=info method=GET path=/friends_tools.html host=toolshed.herokuapp.com fwd="24.20.19.205" dyno=web.2 queue=0 wait=0ms connect=4ms service=156ms status=500 bytes=30 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:12:44.660

该问题仅在超过一个测功机时才会出现这一事实表明它可能是一个共享状态问题。即用户在 dyno-1 上进行身份验证，并且会话 ID 存储在 dyno-1 上的内存中。同一用户的下一个请求是 dyno-2 的服务器，它不知道会话并炸毁了。这是纯粹的猜想，我还没有检查过你的代码。

或者，[这个 Sinatra 问题](https://github.com/sinatra/sinatra/issues/583)有一个与 New Relic 类似的错误，并建议升级到 New Relic 问题的预发布版本可以解决该问题。

# java - 全局变量和构造函数（Java）

> ID：15328992
> 
> 赞同：1
> 
> 时间：2013-03-10T23:22:58.627
> 
> 标签：java, oop, class, variables

与构造函数相比，类顶部的变量何时初始化？

对不起，这就是我的意思：

```
public class aClass {

    private int num;

    public aClass {...} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T23:35:15.853

就发出的字节码而言，从技术上讲，默认值（`null`用于对象字段等）从未显式分配。`0`（这是在对象实例化期间“内部”完成的，在*任何*初始化程序/构造函数代码运行之前。）

实例字段的显式初始化代码在每个构造函数的开头“复制”，*在*编译器对类中的超类构造函数调用（如果有的话）之后。代码示例：

```
class Foo {
    int bar = 123;

    public Foo() {
        // ...
    }

    public Foo(int bar) {
        this.bar = bar;
        // ...
    }
} 
```

被编译成字节码等价于：

```
class Foo {
    int bar;

    public Foo() {
        this.bar = 123;
        // ...
    }

    public Foo(int bar) {
        this.bar = 123;

        this.bar = bar;
        // ...
    }
} 
```

初始化程序块也是如此。这意味着这些变量在任何正常的构造函数代码执行*之前*被初始化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T23:33:19.357

用值定义的成员在构造函数中初始化，就像任何其他成员一样。但这不完全是您编写的构造函数；Java 通过在其开头插入成员初始化程序和初始化程序块来更改幕后的每个构造函数。如果您想暂时查看它，您可以将其视为在构造函数之前初始化的成员。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-10T23:36:28.860

实际上，您可以在调用构造函数之前将它们视为已初始化。因此，如果您有：

```
class Dog {
   private String voice = "woof";

   public Dog() {
      System.out.println(voice); 
   }

} 
```

您将成功地将“woof”打印到控制台，而不是`null`.

# android - BroadcastReceiver - 监听“即将发生”的事件

> ID：15328993
> 
> 赞同：0
> 
> 时间：2013-03-10T23:23:00.657
> 
> 标签：android, calendar, broadcastreceiver

我正在为 sdk 14 及更高版本构建 Android 应用程序，因此有一个本机日历应用程序。我正在尝试构建一个 BroadCastReceiver 来侦听“此事件将很快开始”（提醒？）类型的事件。我经过[这里](http://developer.android.com/guide/topics/providers/calendar-provider.html)但找不到任何信息。

谁能告诉我在哪里可以阅读日历中可以收听的不同类型的事件。谢谢 ：）

# java - For循环不工作？

> ID：15328994
> 
> 赞同：0
> 
> 时间：2013-03-10T23:23:05.903
> 
> 标签：java, loops, for-loop

```
public class twoTimes 

{

     public static void main(String[] args) 
     {

        for ( int i=1; i<11; i++);
        {
            System.out.println("count is" + i); 
        }

      }
} 
```

当我尝试显示 i 时，java 无法初始化变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T23:24:45.673

尝试摆脱最后的 ( ; )..

```
for ( int i=1; i<11; i++);
//-----------------------^^
// Remove that ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T23:56:40.713

公共课两次

{

```
 public static void main(String[] args) 
 {

    for ( int i=1; i<11; i++)//; <----- Due to this it is not working
    {
        System.out.println("count is" + i); 
    }

  } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T23:25:40.430

它没有 ; 在你的陈述结束时。它应该是这样的：

```
public class twoTimes 
{    
    public static void main(String[] args) 
    {       
        for ( int i=1; i<11; i++)
        {
            System.out.println("count is" + i);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T23:26:09.247

去除 ; 在 for 循环结束时：

```
 for ( int i=1; i<11; i++);  <---------
{
    System.out.println("count is" + i); 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T23:31:54.610

如果添加 ; 在 for 的末尾，看起来函数/命令结束了。如前面的答案中所述，删除它将确保您的功能。

```
public class twoTimes 
    {    
        public static void main(String[] args) 
        {       
            for ( int i=1; i<11; i++)
                System.out.println("count is" + i);
            }
        }
    } 
```

分号 (;)**始终**表示命令将停止的点。如果您创建任何方法并放置一个 ; 也会发生同样的事情。之后，将无法正常工作。

# c++ - 为什么scons找不到我项目的源文件？

> ID：15328995
> 
> 赞同：3
> 
> 时间：2013-03-10T23:23:16.470
> 
> 标签：c++, scons

这是[我](https://github.com/seanochoa/IeiuniumTela/tree/develop)在 github 上的项目。

这是我的 SConstruct 文件：

```
SConscript('main.scons', variant_dir = 'build', duplicate = 0) 
```

这是我的 main.scons 文件：

```
import sys
import os
import fnmatch

def find_source_files(directory, ext = "cpp"):
    matches = []
    for root, dirnames, filenames in os.walk(directory):
      for filename in fnmatch.filter(filenames, '*.' + ext):
          matches.append(os.path.join(root, filename))
    return matches

if __name__ == '__main__':
    for f in find_source_files('src'):
        print f
else: 
    Program(target = 'main.bin', source = find_source_files('src')) 
```

这是我运行它时得到的结果：

```
bitcycle @ cypher ~/git/IeiuniumTela $ find $(pwd) -name "*.bin" -or -name "*.o" -exec rm {} \;;  scons; find $(pwd) -name "*.bin" -or -name "*.o"

scons: Reading SConscript files ...
scons: done reading SConscript files.
scons: Building targets ...
scons: building associated VariantDir targets: build
gcc -o build/main.bin
gcc: fatal error: no input files
compilation terminated.
scons: *** [build/main.bin] Error 4
scons: building terminated because of errors. 
```

以下是我运行“python main.scons”来测试它时发生的情况：

```
bitcycle @ cypher ~/git/IeiuniumTela $ python main.scons
src/main.cpp 
```

我很难理解为什么它找不到我的源文件。这里有什么建议或想法吗？

**[更新]**从邮件列表中获得一些好的指导后，我发现这对我来说“足够好”。

**/S构造**： `SConscript('src/main.scons', variant_dir = 'build', duplicate = 0)`

**/src/main.scons**： `Program(target = 'main.bin', source = Glob('*.cpp'))`

请参阅 github 存储库以获取完整的源代码树。为了完整起见，我还在 repo 中添加了一个空的构建目录。我觉得有趣的是：

一个。在这个用于发现源的构建工具的上下文中，SCons 的 Glob 版本不是递归的。我希望递归发现选项是首选。:(

湾。我*需要*将 scons 文件放在与源文件相同的目录中（这很烦人）。

C。打印语句显然有效，但 sys.stdout.write 没有（来自 python 模块）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T00:24:33.830

可能是因为您的`main.scons`文件已经在`src`目录中，而您`find_source_file`实际上正在搜索`src/src`？当我将 scons 文件移动到顶层目录时，它为我找到了源代码。

**更新：** 经调查，`variant_dir`将工作目录设置为`build`，因此您`find_source_files`在其中查找文件`build/src`但一无所获。`find_source_files`从 SConstruct 文件调用或`VariantDir()`在 main.scons中使用可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:06:14.007

SCons 对相对目录路径的处理与 Python 不同，因此看到测试执行和 SCons 执行之间的差异我不会感到惊讶。通常在 SCons 中，所有内容都与根 SConstruct 脚本或 SConscript 脚本相关。

你的代码看起来是正确的，但是如何添加一些调试打印语句`find_source_files()`来找出到底发生了什么？

也许您打算`find_source_files()`稍后更广泛地使用该功能，但是对于一个源文件的简单情况，您似乎过于复杂了，您可以在 中使用以下内容`main.scons`：

```
Program(target = 'main.bin', source = 'src/main.cpp') 
```

# ruby-on-rails - 调用设计时错误的参数类型符号（预期的字符串）sign_out

> ID：15328997
> 
> 赞同：0
> 
> 时间：2013-03-10T23:23:27.743
> 
> 标签：ruby-on-rails, devise

我在 ruby​​ 1.8.7 上使用 rails 3.2，我正在升级到 1.9.3 我的第一个问题是我从 devise sign_in 函数和 sign_out 中得到错误

当我调用注销（销毁）时，我收到以下消息：

> Accounts::SessionsController#destroy 中的类型错误

并且：

> 错误的参数类型符号（预期字符串）

我的会话控制器当然是空的：

```
class Accounts::SessionsController < Devise::SessionsController
  def new
    redirect_to root_url
  end

  protected

  def after_sign_in_path_for(resource)
    root_url
  end
end 
```

它会是什么？..请指教，谢谢。

编辑：设计和omniauth宝石即时使用：

```
# authentication
gem 'devise', '2.2.3'
gem 'devise-encryptable', '0.1.1'

# oauth authentication
gem 'omniauth', '1.1.3'
gem 'omniauth-facebook', '1.4.1'
gem 'omniauth-twitter', '0.0.14'
gem 'omniauth-openid', '1.0.1' 
```

# image - 图像托管网站脚本停用 FancyBox 功能

> ID：15328998
> 
> 赞同：0
> 
> 时间：2013-03-10T23:23:33.527
> 
> 标签：image, fancybox

我正在运行一个带有 FileUpload 插件的 Vanilla 论坛，允许用户上传图像并将相应的代码直接插入到他们的帖子正文中。这些图像在单击时与 FancyBox 一起使用，在页面内很好地链接在一起。但是，如果用户使用第三方图像托管站点（即 Imagevenue、Imageshack、Postimage.org）并复制并粘贴生成的图像代码，它会停用与页面上先前所有图像关联的 FancyBox 功能，因此当您单击在通过 FileUpload 上传的图像上，它现在会在新窗口中打开，而不是在 FancyBox 中。

我的问题是两件事之一：

a) 是否可以解决此格式问题，以便如果用户确实选择使用第三方图像托管服务，那么它不会影响我以前图像的幻想框。

或者

b) 是否可以阻止在帖子正文中输入此类图像代码以防止这种情况发生。

谢谢，如果您想了解更多信息，请回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T00:38:00.950

从这些第三方托管站点生成的代码很可能没有`image`扩展名（JPG、PNG、GIF），因此fancybox 不知道`type`需要处理哪些内容。

如果你正在绑定fancybox，比如

```
$(".fancybox").fancybox(); 
```

...您可以强制`type`内容的`image`喜欢

```
$(".fancybox").fancybox({
   type : "image"
}); 
```

如果您想详细说明，我真的不明白粘贴新图像的代码将如何禁用现有图像的代码。