# StackOverflow 问答 14252000-14252999

# android - 如何在不同的活动中保持操作栏按钮点击的一致性。（安卓）

> ID：14252005
> 
> 赞同：1
> 
> 时间：2013-01-10T06:25:44.107
> 
> 标签：android, android-actionbar

这是我的问题，我敢肯定这是一个基本问题。请耐心等待，因为我已经编程了 2 年多了。

我在`MainActivity`课堂上创建了一个操作栏。在我的`onOptionsItemsSelected`（主菜单）方法中，我有一个 switch 语句，它根据可用操作项的用户输入告诉 MainActivity 要启动哪个活动。当用户选择一个选项时，我有兴趣在`Action Bar`所有活动中保持一致的行为。菜单项保持不变，我希望`onOptionsItemsSelected`所有活动都相同。我可以从 MainActivity 复制并粘贴代码，但我知道这不是“正确”的做法。

例如：在 MainActivity 操作栏中给出选项 A、B、C。活动 A、B 或 C 在用户选择时启动。

如果用户选择 A，则 A 启动。我希望用户能够使用操作栏启动 B、C 或主屏幕。

我知道这有一个基本的解决方案，但是自从我编码以来已经有一段时间了。所有的帮助都是值得的。由于我的问题很简单，请随意恶作剧:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:28:29.693

我找到了答案，它归结为基本编程。请让我知道这是否足够清楚。

所以有一些关于Android编程格式的知识。从 MainActivity() 开始，它启动时按顺序调用两个函数：

OnCreateOptionsMenu(Item item) 调用要放入菜单/操作栏中的值。OnOptionsItemsSelected(Item item) 告诉应用程序如何处理选择。

如果您想在每个不同的视图中保持操作栏一致，则在每个活动中，当您调用 OnOptionsItemsSelected() 时，您可以使用从选项中获取 id 的方法，然后使用 super.OnOptionsItemsSelected(item) 将其返回。为了让它工作，用户应该让调用类扩展 MainActivity 而不是 Activity。以下是代码示例：

这是第二个活动的代码，它希望保持与 MainActivity 相同的行为操作栏（具有相同的选择）。注意：如果您不扩展 MainActivity，它将无法工作，因为它将调用 Activity 类的方法，而不是您的 MainActivity。

```
public class secondActivity extends MainActivity{

@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.secondActivity);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
        item.getItemId();
    return super.onOptionsItemSelected(item);   
    }

} 
```

# c# - 从 MySQL 查询返回结构化（强类型）数据的 .Net 库/ORM？

> ID：14252010
> 
> 赞同：0
> 
> 时间：2013-01-10T06:26:31.550
> 
> 标签：c#, mysql, sql, orm

我尝试使用 MySQLCommand 命令对象从 MySQL 查询中提取数据并调用该`ExecuteReader()`方法。我得到的东西有时解析起来非常耗时。例如，我喜欢将名称作为数据库保存的所有表的字符串。

使用以下内容我不确定如何解析为字符串集合：

```
 MySqlCommand command = new MySqlCommand("SHOW TABLES", connection);
        var result = command.ExecuteReader(); 
```

是否有以更多.Net 方式返回结果的库或 ORM？例如，将数据作为 .Net 集合返回...

# android - Whats the best way to update UI from aysnc task in android?

> ID：14252013
> 
> 赞同：0
> 
> 时间：2013-01-10T06:26:35.767
> 
> 标签：android, android-asynctask

I don't know the very details of async task,
I recently used async task in my project to get some data from server side and update my UI according to the result,I implimented a progress dialog in the usual way and dismissid it in my onPostExicute method like this

```
@Override
    protected void onPostExecute(ArrayList<StationSlots> result) {
    try {

    publishProgress(100);
    WizardStep4.retStationSlots =  result;      

        if (WizardStep4.this.dialog != null) {
                WizardStep4.this.dialog.dismiss();
          }
    } catch (Exception e) {
    }
     } 
```

But I found some codes done the same thing but perfoming the action on a ui thread like this

```
@Override
        protected void onPostExecute(ArrayList<StationSlots> result) {
           runOnUiThread(new Runnable() {

       @Override
       public void run() {
        try {
        publishProgress(100);
        WizardStep4.retStationSlots =  result;              
                if (WizardStep4.this.dialog != null) {
                    WizardStep4.this.dialog.dismiss();
                 }
        } catch (Exception e) {
        }

                }
            });
} 
```

I like to know which one is the best method and what are the differences ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T06:27:42.450

wrong implementation approach of `AsyncTask` .

`protected void onPostExecute(ArrayList<StationSlots> result)`

is Already running on **MainUiThread** so you don't have to write `runOnUiThread(new Runnable()` in `OnPostExecute()`.

Also `publishProgress();` is used to update UI from `doInBackground()` of AsyncTask as its running on a worker thread. And when you call `publishProgress();` form `doInBackground()` then execution comes on `onProgressUpdate(Integer... progress)` which will also run on **MainUIThread** so you don't need any where `runOnUiThread(new Runnable()` in AsyncTask. (except if you want to update UI from `doInBackground()` without calling `publishProgress();`)

# android - 在Android中使用WHERE子句进行日期排序

> ID：14252023
> 
> 赞同：0
> 
> 时间：2013-01-10T06:27:22.107
> 
> 标签：android, sqlite

我想使用 WHERE 子句按升序检索所有记录。但是在我的查询中在哪里包含 WHERE 条件？它适用于升序。

这是我的代码。首先我正在处理这个查询，但在这里我无法实现 ORDER BY 子句。

```
Cursor tripdaycursor = sdb.rawQuery(
  "select TripDay_Id, Tripday_Date, Tripday_ParsingDate,
  Trip_Complete, TripDay_Endkm, TripDay_Count, Tripday_EndPlace
  FROM TripDay WHERE Trip_Id="+record, null); 
```

所以我尝试了下面的代码升序：

```
String recordid=Integer.toString(record), Trip_Id="Trip_Id", TripDay_Id="TripDay_Id",
  Tripday_Date="Tripday_Date", Tripday_ParsingDate="Tripday_ParsingDate",
  Trip_Complete="Trip_Complete", TripDay_Endkm="TripDay_Endkm",
  TripDay_Count="TripDay_Count", Tripday_EndPlace="Tripday_EndPlace",
  TripDay = "TripDay";
Cursor tripdaycursor = sdb.query(TripDay, new String[] {
  TripDay_Id, Tripday_Date, Tripday_ParsingDate, Trip_Complete, TripDay_Endkm,
  TripDay_Count, Tripday_EndPlace}, null, null, null, null,
  Tripday_ParsingDate + " ASC"); 
```

但我希望在单个查询中同时使用 WHERE 子句并按升序排列这两个条件。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T06:38:59.470

您可以在 where 子句之后的查询中添加“order by Column_Name”。像这样，您要按升序排列的列

```
Cursor tripdaycursor = sdb.rawQuery("select TripDay_Id,Tripday_Date,Tripday_ParsingDate,Trip_Complete,TripDay_Endkm,TripDay_Count,Tripday_EndPlace from TripDay where Trip_Id="+record + " order by " + columnName,null); 
```

# ios - 拆分 NSString 并限制响应

> ID：14252029
> 
> 赞同：3
> 
> 时间：2013-01-10T06:27:49.270
> 
> 标签：ios, nsstring

我有一个字符串 Hello-World-Test，我只想用第一个破折号分割这个字符串。

字符串 1：Hello 字符串 2：World-Test

做这个的最好方式是什么？我现在正在做的是使用 componentsSeparatedByString，获取数组中的第一个对象并将其设置为字符串 1，然后使用字符串 1 的长度作为起始索引执行子字符串。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T07:01:49.940

我添加了一个类别，`NSString`以便在给定字符串的第一次出现时进行拆分。以数组形式返回结果可能并不理想，但除此之外似乎还不错。它只使用`NSString`方法`rangeOfString:`，该方法接受`NSString`(B) 并返回`NSRange`显示该字符串 (B) 所在的位置。

```
@interface NSString (Split)

- (NSArray *)stringsBySplittingOnString:(NSString *)splitString;

@end

@implementation NSString (Split)

- (NSArray *)stringsBySplittingOnString:(NSString *)splitString
{
    NSRange range = [self rangeOfString:splitString];
    if (range.location == NSNotFound) {
        return nil;
    } else {
        NSLog(@"%li",range.location);
        NSLog(@"%li",range.length);
        NSString *string1 = [self substringToIndex:range.location];
        NSString *string2 = [self substringFromIndex:range.location+range.length];
        NSLog(@"String1 = %@",string1);
        NSLog(@"String2 = %@",string2);
        return @[string1, string2];
    }
}

@end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T06:59:53.130

用于`rangeOfString`查找 if `split string exits`，然后在 的基础上使用`substringWithRange`to 。`create new string``NSRange`

例如 ：

```
 NSString *strMain = @"Hello-World-Test";
 NSRange match = [strMain rangeOfString:@"-"];
if(match.location != NSNotFound)
{

    NSString *str1 = [strMain substringWithRange: NSMakeRange (0, match.location)];
    NSLog(@"%@",str1);
    NSString *str2 = [strMain substringWithRange: NSMakeRange (match.location+match.length,(strMain.length-match.location)-match.length)];
    NSLog(@"%@",str2);
} 
```

# android - 应用程序与少数设备不兼容

> ID：14252032
> 
> 赞同：0
> 
> 时间：2013-01-10T06:28:27.210
> 
> 标签：android, google-play

我在 Google Play 商店上传了我的应用程序。我可以搜索它并安装在几乎所有设备上。[三星 Galaxy Y Duos s6102](http://www.flipkart.com/samsung-galaxy-y-duos-s6102/p/itmd6vvtrjwbgwgm#specifications)除外

在寻找解决方案后，我发现了几件事：

**清单中使用功能的问题：**

我在清单中只有 2 个功能

```
<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus" /> 
```

但是该设备有一个摄像头，所以情况可能并非如此。

**清单中的支持屏幕问题：**

我没有在我的清单中添加任何此类标签，假设默认情况下支持所有屏幕。并从开发者控制台确认

![在此处输入图像描述](../Images/e7953e7c234a89d6f979adcbdf9006e5.png)

我发现默认情况下不支持**QVGA**屏幕，您必须明确声明它们。

但是**QVGA**屏幕属于小屏幕，如下所述：

![在此处输入图像描述](../Images/d1263bf99d8d46ad0730564323b398b9.png)

然后思想密度可能是原因，但来自文档：

```
For applications that support Android 1.6 (API level 4) and higher, this is "true" by default and you should not set it "false" 
```

那么，这个问题还有其他原因吗？或者我应该尝试将它们全部添加到我的清单文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T06:47:01.000

在提供给设备规格的链接中，它指出相机是“固定焦点”。

当您`uses-feature`在清单中添加条目时，该功能是**必需**的，并且会阻止 Google Play 上没有该功能的设备。只要它在“自动对焦”的情况下不会破坏任何东西或使功能像条形码扫描仪那样不起作用，添加`required=false`应该没问题。

# google-maps - 如何在谷歌地图上隐藏“谷歌”链接

> ID：14252034
> 
> 赞同：0
> 
> 时间：2013-01-10T06:28:35.500
> 
> 标签：google-maps, google-maps-api-3

我正在使用 google maps api v3..如何隐藏我的 Google 地图底角的“Google”链接（在下方圈出）？

![在此处输入图像描述](../Images/c2b5208aa6c3191478da5f07d8a88d2c.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T06:44:44.533

阅读使用[条款](https://developers.google.com/maps/terms)。这是不允许的（至少对于任何免费服务）。我认为这是相关部分，但如果您使用该服务，您有责任阅读、理解和遵守条款。

**9.4 归属。**

(a) 通过服务提供给您的内容可能包含 Google、其合作伙伴或 Google 索引内容的其他第三方权利持有人的商号、商标、服务标记、徽标、域名和其他独特的品牌特征。当 Google 提供此属性时，您必须按照通过服务提供的或 Maps API 文档中的说明显示它，并且不得删除或以任何方式更改这些商号、商标、服务标记、徽标、域名和其他独特品牌特征。

# c# - 无法访问已被其他进程使用的文件

> ID：14252040
> 
> 赞同：1
> 
> 时间：2013-01-10T06:28:44.883
> 
> 标签：c#, wpf, file, mvvm, zip

嗨，我的 WPF 应用程序中有一个按钮，可以从 zip 中提取一组文件。我需要处理提取文件夹中的文件。但是在提取后，如果我访问该文件，我会不断收到一个异常，指出“文件已被其他进程使用，无法访问”。我使用了 Stream.flush()、Stream.Close()、Stream.Dispose()。它们都没有用。

```
var zipFilePath = @"C:\Output.zip";
var tempFolderPath = @"C:\Unzipped";

    using (Package package = ZipPackage.Open(zipFilePath, FileMode.Open, FileAccess.Read))
    {
        foreach (PackagePart part in package.GetParts())
        {

            var target = Path.GetFullPath(Path.Combine(tempFolderPath, part.Uri.OriginalString.TrimStart('/')));
            var targetDir = target.Remove(target.LastIndexOf('\\'));

            if (!Directory.Exists(targetDir))
                Directory.CreateDirectory(targetDir);
            MemoryStream memoryStream = new MemoryStream(); 
           using (Stream source = part.GetStream(FileMode.Open, FileAccess.Read))
           // using (Stream source = new FileStream(, FileMode.Open)) 
            {

              source.CopyTo(File.OpenWrite(target));
            //   CopyStreamTo(source, memoryStream); 
             }
        }

    }

    MessageBox.Show("Extracted in a folder");

          myclass obj=new myclass(@"C:\Unzipped\Something.xml");
        // Something.xml has been used by some other process 
```

提取工作正常。但是在我访问 C:\Unzipped\something.xml 中的文件时提取后，我不断收到此错误。“该进程无法访问文件 'C:\Unzipped\Something.xml'，因为它正在被另一个进程使用。” 我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T06:33:00.470

您应该通过将 IDisposable 资源包装在 using 语句中来处理它们：

```
using (Package package = ZipPackage.Open(zipFilePath, FileMode.Open, FileAccess.Read))
{
    foreach (PackagePart part in package.GetParts())
    {
        var target = Path.GetFullPath(Path.Combine(tempFolderPath, part.Uri.OriginalString.TrimStart('/')));
        var targetDir = target.Remove(target.LastIndexOf('\\'));

        if (!Directory.Exists(targetDir))
        {
            Directory.CreateDirectory(targetDir);
        }

        using (Stream source = part.GetStream(FileMode.Open, FileAccess.Read))
        using (Stream targetFileStream = File.OpenWrite(target))
        {
            source.CopyTo(targetFileStream);
        }
    }
} 
```

# java - 更改 Eclipse 连接到 svn 时的当前用户名和密码

> ID：14252042
> 
> 赞同：0
> 
> 时间：2013-01-10T06:28:51.000
> 
> 标签：java, eclipse, tortoisesvn

我想更改连接到 SVN 的当前用户名和密码。因为当我提交它时，它会显示我当前连接到 SVN 的另一个用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T06:46:12.483

您应该首先清除您的 svn 身份验证数据。下次连接 SVN 时，系统会要求您根据需要输入用户信息。

你会在 TortoiseSVN 的设置 >> 保存的数据中找到清除按钮。

# vbscript - 尝试在 VBScript 中使用 Shell 对象和 FileSystemObject 进行文件操作

> ID：14252057
> 
> 赞同：1
> 
> 时间：2013-01-10T06:30:12.810
> 
> 标签：vbscript, windows-shell, filesystemobject

我正在尝试递归循环数百个目录和数千个 JPG 文件，以收集按日期对新文件夹中的文件进行排序。到目前为止，我能够使用 Shell NameSpace 对象单独 GetDetailsOf 文件，并且我还能够使用 FileSystemObject 递归循环遍历目录。但是，当我尝试将它们放在函数等中时，当我尝试从照片中获取 DateTaken 属性时，我什么也得不到。

到目前为止，这是我的代码：

```
sFolderPathspec = "C:\LocationOfFiles"

Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objDir = objFSO.GetFolder(sFolderPathspec)

Dim arrFiles()

getInfo(objDir)

Sub getInfo(pCurrentDir)
    fileCount = 0
    For Each strFileName In pCurrentDir.Files
        fileCount = fileCount + 1
    Next

    ReDim arrFiles(fileCount,2) 

    i=0
    For Each aItem In pCurrentDir.Files

        wscript.Echo aItem.Name
        arrFiles(i,0) = aItem.Name
        strFileName = aItem.Name
        strDir = pCurrentDir.Path
        wscript.echo strDir
        dateVar = GetDatePictureTaken(strFileName, strDir)  
        'dateVar = Temp2 & "_" & Temp3 & "_" & Temp1
        arrFiles(i,1) = dateVar
        WScript.echo i & "." & "M:" & monthVar & " Y:" & yearVar
        WScript.echo i & "." & strFileName & " : " & arrFiles(i,1) & " : " & dateVar
        i=i+1
    Next

    For Each aItem In pCurrentDir.SubFolders
       'wscript.Echo aItem.Name & " passing recursively"
       getInfo(aItem)
    Next

End Sub

Function GetDatePictureTaken(strFileName, strDir)

    Set objShell = CreateObject ("Shell.Application")
    Set objCurrFolder = objShell.Namespace(strDir)

    'wscript.Echo cstr(objCurrFolder.GetDetailsOf(strFileName, 12))

    strFileNameDate = cstr(objCurrFolder.GetDetailsOf(strFileName, 12))
    strFileNameDate = CleanNonDisplayableCharacters(strFileNameDate)
    arrDate = split(strFileNameDate, "/")
    '''FAILS HERE WITH A SUBSCRIPT OUT OF RANGE ERROR SINCE IT GETS NULL VALUES BACK FROM THE GET DETAILS OF FUNCTION'''
    monthVar = arrDate(0)
    yearVar = arrDate(1)
    dayVar = arrDate(2)

    GetDatePictureTaken = monthVar & "\" & dayVar & "\" & yearVar

End Function

Function CleanNonDisplayableCharacters(strInput)

      strTemp = ""
      For i = 1 to len(strInput)
          strChar = Mid(strInput,i,1)
          If Asc(strChar) < 126 and not Asc(strChar) = 63 Then
              strTemp = strTemp & strChar
          End If
      Next
      CleanNonDisplayableCharacters = strTemp

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:05:37.830

访问 arrDate(0) 时出现“下标超出范围”错误是由 arrDate 为空 (UBound(arrDate) == -1) 引起的。由于对非空字符串的拆分将返回一个数组，即使未找到分隔符，并且尝试拆分 Null 将引发“无效使用 Null”错误，我们可以确定 strFileNameDate 为“”。

可能的原因：

1.  “拍摄日期”的索引是 25 (XP) 而不是 12 (Win 7) - 或者盖茨先生想到的 Win 8。
2.  DPT 属性未填写。
3.  你的清洁功能搞砸了。

您必须测试包含有效日期的 strFileNameDate 并决定在没有有效 DPT 的情况下将文件放在哪里。

PS而不是做递归循环，你应该考虑使用

```
dir /s/b path\*.jpg > pictures.txt 
```

并处理该文件。

# sql-server-2008 - 获取重复记录的多列

> ID：14252059
> 
> 赞同：0
> 
> 时间：2013-01-10T06:30:18.130
> 
> 标签：sql-server-2008

我正在尝试获取多个列并从表中显示重复的 ItemCodes。IE。如果 ItemCode 重复多次。

使用查询：

```
SELECT ItemCode    
    ,DuplicateCount = COUNT(*)
FROM IQR1
WHERE WhsCode = 01
GROUP BY
    ItemCode   
HAVING COUNT(*) > 1  
ORDER BY COUNT(*) DESC 
```

我得到 38 条记录，每条重复计数为 2。

当我尝试获取另一列 ItemName 时，我只返回了 37 条记录：

```
SELECT ItemCode
    ,ItemName    
    ,DuplicateCount = COUNT(*)
FROM IQR1
WHERE WhsCode = 01
GROUP BY
    ItemCode
   ,ItemName       
HAVING COUNT(*) > 1  
ORDER BY COUNT(*) DESC 
```

如何正确修改第一个查询以获取多列并仍返回 38 条记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:30:52.053

将您的第一个查询（通过将其放在派生表中）内部连接回主表，加入 ItemCode。

```
SELECT
   I.*,
   D.DuplicateCount
FROM
   IQR1 I
   INNER JOIN (
      SELECT
         ItemCode,
         DuplicateCount = COUNT(*)
      FROM IQR1
      WHERE WhsCode = 01
      GROUP BY ItemCode   
      HAVING COUNT(*) > 1
   ) D ON I.ItemCode = D.ItemCode
ORDER BY DuplicateCount DESC 
```

# r - 搜索 R 对象的属性

> ID：14252060
> 
> 赞同：1
> 
> 时间：2013-01-10T06:30:22.330
> 
> 标签：r, search, attributes

我想构建一个 R 对象 .rda 或只是一个列表对象来包含多个数据框。然后在每个数据框中，我将在属性中添加文件的小描述。现在我的问题是是否可以搜索特定对象以找到包含特定字符串的数据框？

例如，我想搜索字符串“inflation”以查看对象中哪个数据框具有“inflation”属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T09:44:00.913

@sebastian-c 的答案是正确的，但这可能不是您想要做的。下面是一个例子：

```
set.seed(123)
data1 <- data.frame(x=rnorm(5), y=rnorm(5))
data2 <- data.frame(x=rnorm(5), y=rnorm(5))
data3 <- data.frame(x=rnorm(5), wowie=rnorm(5))

data1
#             x          y
# 1 -0.56047565  1.7150650
# 2 -0.23017749  0.4609162
# 3  1.55870831 -1.2650612
# 4  0.07050839 -0.6868529
# 5  0.12928774 -0.4456620
A <- attributes(data1) # Let's store these attributes
attributes(data1) <- list(description="The first datum on inflation")
data1
# [[1]]
# [1] -0.56047565 -0.23017749  1.55870831  0.07050839  0.12928774
# 
# [[2]]
# [1]  1.7150650  0.4609162 -1.2650612 -0.6868529 -0.4456620
# 
# attr(,"description")
# [1] "The first datum on inflation" 
```

哎呀！我们失去了所有原始属性！值得庆幸的是，我们可以恢复它们，因为我们已经保存了它们，然后尝试以不同的方式分配它们，使用`attr()`.

```
attributes(data1) <- A # Good thing we stored those attributes!
attr(data1, "description") <- "The first datum on inflation"
data1
#             x          y
# 1 -0.56047565  1.7150650
# 2 -0.23017749  0.4609162
# 3  1.55870831 -1.2650612
# 4  0.07050839 -0.6868529
# 5  0.12928774 -0.4456620
attributes(data1)
# $names
# [1] "x" "y"
# 
# $row.names
# [1] 1 2 3 4 5
# 
# $class
# [1] "data.frame"
# 
# $description
# [1] "The first datum on inflation" 
```

* * *

> > 如果您想采用这种`attributes(data1)`方法，请记住属性是一个命名列表，因此您也可以像添加新项目到列表中一样添加属性。换句话说，这也有效：`attributes(data1)$description <- "The first datum on inflation"`

* * *

这行得通，所以对其他`data.frame`s 做同样的事情：

```
attr(data2, "description") <- "The second datum on inflation"
attr(data3, "description") <- "The first datum on deflation" 
```

现在，拼凑一个小功能来搜索*所有*属性。如果您只想搜索特定属性，则可以修改该函数。

```
findmyattr <- function(term, datasets) {
    temp <- setNames(lapply(datasets, function(x) unlist(attributes(get(x)))),
                     datasets)
    datasets[as.logical(colSums(sapply(temp, grepl, pattern = term)))]
} 
```

以下是一些正在使用的函数的示例：

```
findmyattr("inflation", c("data1", "data2", "data3"))
# [1] "data1" "data2"
findmyattr("first", c("data1", "data2", "data3"))
# [1] "data1" "data3"
findmyattr("wowie", c("data1", "data2", "data3"))
# [1] "data3" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T11:01:32.057

Sebastian，您编辑的代码可能存在以下问题

```
descriptions <- sapply(lis, function(x) unlist(attributes(get(x)))) 
```

这里的描述包括所有属性。结果，以下步骤

```
which_descriptions <- grep("inflation", descriptions) 
```

产生比确切文件号更大的数字。结果如下

```
lis[which_descriptions] 
```

也不起作用。

# c++ - 错误打开端口

> ID：14252062
> 
> 赞同：0
> 
> 时间：2013-01-10T06:30:27.870
> 
> 标签：c++, visual-studio-2005, stub

我的问题是我尝试检查不同的值，`port_name`如 7、14 或 25。它没有打开或处理与`if`条件匹配的句柄的串行数据，而是关闭了句柄。代码有问题吗？

```
void command_handler::start()
{
    char port_name[] = "COM7:";     /* Name of the serial port */

    serial_port = CreateFile(port_name, GENERIC_READ | GENERIC_WRITE, 0, 0, OPEN_EXISTING, 0, 0);
    /* Make sure port was opened */

    if (serial_port == INVALID_HANDLE_VALUE)
    {
        fprintf(stderr, "Error opening port\n");
        printf("I'm here");
        CloseHandle(serial_port);
        exit(0);
    }
    set_up_serial_port(serial_port, baud_rate);
    process_serial_data = false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T06:47:19.253

您是否尝试过以下命名：

```
char port_name[] = "\\\\.\\COM7"; 
```

第二个问题可能是`CHAR`和的区别`WCHAR`。我认为您应该向`WCHAR`API 发送一个字符串。

# iphone - iOS ping 和 ttl 超时

> ID：14252064
> 
> 赞同：5
> 
> 时间：2013-01-10T06:30:39.977
> 
> 标签：iphone, ios, networking, timeout, ping

我想用超时和 TTL 进行 ping。我使用 Apple 的代码（[“Simple Ping”](http://developer.apple.com/library/mac/#samplecode/SimplePing/Introduction/Intro.html)）。我读了它 [“iOS ping with timeout”](https://stackoverflow.com/questions/7437643/ios-ping-with-timeout)。我更改代码：

```
CFSocketNativeHandle sock = CFSocketGetNative(self->_socket);
struct timeval tv;
tv.tv_sec  = 0;
tv.tv_usec = 100000; // 0.1 sec
setsockopt(sock, SOL_SOCKET, SO_SNDTIMEO, (void *)&tv, sizeof(tv));

bytesSent = sendto(
    sock,
    [packet bytes],
    [packet length], 
    0, 
    (struct sockaddr *) [self.hostAddress bytes], 
    (socklen_t) [self.hostAddress length]
); 
```

但我不明白我应该把代码放在哪里会显示接收数据包的超时。我还需要使用 TTL（生存时间）信息进行 ping。我想根据这种模式获取信息：`icmp_seq=count from=ip_address ttl=value_of_ttl time=value_of_replytime_ms`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-22T03:30:31.450

要修改 IP 标头中的默认 TTL，请使用 IP_TTL 作为参数调用 setsockopt（使用 IPv4 测试）：

```
- (BOOL)setTTL:(int)ttl{
    CFSocketNativeHandle sock = CFSocketGetNative(self->_socket);
    int status  = setsockopt(sock, IPPROTO_IP, IP_TTL, &ttl, sizeof(ttl));
    if(status < 0)
    {
        return NO;
    }
    return YES;
}
```

“ [iOS ping with timeout”](https://stackoverflow.com/questions/7437643/ios-ping-with-timeout)示例将输出超时添加到套接字。据我了解，如果在这段时间内套接字没有发送数据包，它将超时。我可能是错的，但我无法从 ICMP 标头和 IPv4 标头（[ICMP 数据包格式](https://en.wikipedia.org/wiki/Internet_Control_Message_Protocol)）中找到这个“超时”值。以下是使用苹果的简单 ping 捕获的控制台日志和请求、响应数据包：

[![在此处输入图像描述](../Images/be51aa9b5fbe243c147283f330c416af.png)](https://i.stack.imgur.com/jFao2.png)

[![在此处输入图像描述](../Images/f5bccfda6e8ee0ca70fdf3ffd68e4120.png)](https://i.stack.imgur.com/eqIko.png)

[![在此处输入图像描述](../Images/98b4974657a9a4706c3b0cb906a5d4e2.png)](https://i.stack.imgur.com/Guuck.png)

如果你只想知道 ping 的响应时间，我想你可以在委托方法中自己跟踪它。获取调用“didSendPacket”和“didReceivePingResponsePacket”函数时的时间戳，然后比较差异。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-13T14:50:00.147

您总是可以对接收者设置一些限制时间：

```
 tv.tv_sec = 0;
        tv.tv_usec = 10000;
        setsockopt(recv_sock, SOL_SOCKET, SO_RCVTIMEO, (char *)&tv,sizeof(struct   timeval)); 
```

# tridion - 如何在 tridion 2011 中编写部署程序扩展的组件取消部署和二进制取消部署功能

> ID：14252066
> 
> 赞同：0
> 
> 时间：2013-01-10T06:30:57.170
> 
> 标签：tridion, tridion-2011, tridion-content-delivery, tridion-deploy-extension

我只是想编写小型部署程序扩展，如果用户从 tridion 发布/取消发布**页面/组件/二进制文件**，它的记录将使用存储扩展进入特定表。

存储扩展部分已经完成！！

好吧，我可以轻松编写**PageDeploy/ComponentDeploy 和 BinaryDeploy**，因为我在 com.tridion.deployer.modules 中有这些类。

我也可以轻松编写自定义页面取消部署程序类，但是很难编写组件，二进制取消部署，因为我们没有任何类。

请建议是否可能，如果是的话，请指出我编写类或方法来获取它。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T07:09:14.883

是的，没有您自己发现的组件取消部署或二进制取消部署。

Frank 有一个很好的例子，说明如何在[这里](http://www.sdltridionworld.com/community/2011_extensions/binaryeventtracker.aspx)扩展二进制存储以跟踪取消部署事件，对于组件，您必须改用 ComponentPresentationUndeploy。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T07:49:32.933

下面是在 DAO 中跟踪组件和二进制文件的示例代码。

**组件：要添加的示例代码，更新和删除也是如此**

```
@Component("JPAComponentDAOExtension")
@Scope("prototype")

public class JPAComponentDAOExtension extends JPAComponentPresentationDAO implements ComponentPresentationDAO 
{

    public JPAComponentDAOExtension(String storageId, EntityManagerFactory entityManagerFactory, String storageName) 
    {
        super(storageId, entityManagerFactory, storageName);
    }

    public JPAComponentDAOExtension(String storageId, EntityManagerFactory entityManagerFactory, EntityManager entityManager, String storageName) 
    {
        super(storageId, entityManagerFactory, entityManager, storageName);
    }

    public void create(ComponentPresentation itemToCreate, ComponentPresentationTypeEnum componentPresentationType) throws StorageException 
    {
        super.create(itemToCreate,componentPresentationType);   
        String tcmURI = Integer.toString(itemToCreate.getComponentId());
        ItemDAO item = (ItemDAO) StorageManagerFactory.getDAO(itemToCreate.getPublicationId(),StorageTypeMapping.COMPONENT_META);
        ComponentMeta meta = (ComponentMeta) item.findByPrimaryKey(itemToCreate.getPublicationId(),itemToCreate.getComponentId());
        String schemaID = Integer.toString(meta.getSchemaId()) ;

        PublishActionDAO publishActionDAO = (PublishActionDAO) StorageManagerFactory.getDefaultDAO("PublishAction");
        PublishAction publishAction = new PublishAction();
        publishAction.setAction("ADD"); 
        publishAction.setTcmUri(tcmURI);
        publishAction.setSchemaID(schemaID);
        publishActionDAO.store(publishAction);

    }
} 
```

**二进制：示例代码添加和更新和删除同样适用**

```
@Component("JPABinaryDAOExtension")
@Scope("prototype")

public class JPABinaryDAOExtension extends JPABinaryContentDAO implements BinaryContentDAO 
{

    public JPABinaryDAOExtension(String storageId, EntityManagerFactory entityManagerFactory, String storageName) 
    {
        super(storageId, entityManagerFactory, storageName);
    }

    public JPABinaryDAOExtension(String storageId, EntityManagerFactory entityManagerFactory, EntityManager entityManager, String storageName) 
    {
        super(storageId, entityManagerFactory, entityManager, storageName);
    }

    public void create(final BinaryContent binaryContent, final String relativePath) throws StorageException 
    {
        super.create(binaryContent, relativePath);  
        String url = relativePath;
        String tcmURI = Integer.toString(binaryContent.getBinaryId());

        ItemDAO item = (ItemDAO) StorageManagerFactory.getDAO(binaryContent.getPublicationId(),StorageTypeMapping.BINARY_META);
        BinaryMeta binarymeta = (BinaryMeta) item.findBinaryByPrimaryKey(binaryContent.getPublicationId(),binaryContent.getBinaryId());
        binarymeta.getBinaryType();//to get the binary type

        //You can also check the Relative path as below for specific binary type entries as suggested by Mihai
        if (relativePath.toLowerCase().endsWith(".pdf")) //Looking for PDFs only
        { 
            PublishActionDAO publishActionDAO = (PublishActionDAO) StorageManagerFactory.getDefaultDAO("PublishAction");
            PublishAction publishAction = new PublishAction();
            publishAction.setAction("ADD");
            publishAction.setUrl(url);
            publishAction.setTcmUri(tcmURI);
            publishActionDAO.store(publishAction);
        }
    }
} 
```

# java - 列表方法在 java 中的工作原理

> ID：14252068
> 
> 赞同：-2
> 
> 时间：2013-01-10T06:31:29.933
> 
> 标签：java, jakarta-ee

List是java中的一个接口。它有一些方法。通常，接口是方法原型的规范。即接口仅由方法签名组成，接口中的该方法没有实现。

我怀疑如果 List 接口的方法在接口内没有任何实现，它们是如何工作的。

假设我有一个类 Book，它具有 name 属性、setter、getter 方法。我还有另一堂像这样的getBooks。

```
public class GetBooks{
    List<Book> list;
    public List<Book> getBooks(){
    return list;
    }
    //setter method..
} 
```

我在运行时通过其他一些类将书籍发送到 set 方法。

我有另一堂这样的UseBooks。

```
public class UseBooks{
    .....
    ....
    List<Book> list = new GetBooks().getBooks();
    list.add(new Book("aaa"));
} 
```

我的问题是 add 方法如何添加书籍，即使它在接口 List 中，因为我的 getBooks() 返回 List 接口而不是 Arraylist 或其他一些实现类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T06:43:06.020

![在此处输入图像描述](../Images/0c23b9563f909a8b04cc0b477f36a990.png)

```
Java provides 3 concrete classes which implement the list interface
Vector
ArrayList
LinkedList 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T06:32:41.383

`java.util.ArrayList`, `java.util.LinkedList`,`java.util.Vector`是`List`接口的具体实现类。此类包含所有方法实现。你可以使用像 -

```
List<String> list = new ArrayList<String>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T06:33:30.043

`List`您将使用的唯一类型对象将是实际实现的类型，`List`例如等。它们将提供实现。`ArrayList``LinkedList`

您不能实例化具有来自超类或接口的未实现抽象方法的类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T06:44:02.753

“我怀疑如果 List 接口的方法在接口内部没有任何实现，它们是如何工作的”-（！！！！！！）它将使用实现此接口的任何类实例的实现。所以取决于不同类实例中的实现。

您是否期待任何类型的详细示例？

# loops - Lua 表检查是否有任何变量匹配任何值

> ID：14252070
> 
> 赞同：1
> 
> 时间：2013-01-10T06:31:38.303
> 
> 标签：loops, if-statement, lua, coordinates, lua-table

在 Lua（ipad 上的 Codea）中，我制作了一个程序，其中有四对 XY 坐标，它们放在相同 id 下的表中（计数 = 计数 + 1）当我第一次使用一对来测试代码时，检测 XY 坐标何时触及表中的坐标之一（坐标已经位于该坐标的位置）。我使用这段代码做到了这一点：

```
if (math.abs(xposplayer - posx) < 10) and (math.abs(yposplayer - posy) < 10) and id < (count - 10) then 
```

这段代码正在这个循环中播放：

```
for id,posx in pairs(tableposx) do
posy = tableposy[id] 
```

这就像我想要的那样工作！

但现在我有 8 个表（tableposx1 tableposy1，...）我想检查当前坐标是否触及任何表中的任何坐标（曾经）所以我尝试了：

```
for id,posx1 in pairs(tableposx1) do
posy1 = tableposy1[id]
posy2 = tableposy2[id]
posx2 = tableposx2[id]
posy3 = tableposy3[id]
posx3 = tableposx3[id]
posy4 = tableposy4[id]
posx4 = tableposx4[id] 
```

而这个位四次（对于四个当前坐标）

```
if ((math.abs(xposplayer1 - posx1) < 10) and (math.abs(yposplayer1 - posy1) < 10))
or ((math.abs(xposplayer1 - posx2) < 10) and (math.abs(yposplayer1 - posy2) < 10))
or ((math.abs(xposplayer1 - posx3) < 10) and (math.abs(yposplayer1 - posy3) < 10))
or ((math.abs(xposplayer1 - posx4) < 10) and (math.abs(yposplayer1 - posy4) < 10))
and (id < (count - 10)) 
```

但这总是（几乎）成立。并且因为有时表中的值是 NIL，它会给我一个错误，说它不能将某些东西与 nil 值进行比较。

在此先感谢，劳伦特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T06:39:23.853

首先删除复制粘贴代码。使用类似的东西`posy[n]`代替`posy1`, `posy2`... 另一个相同的东西：`tableposy[n][id]`代替`tableposy1[id]`..

之后，您可以使用循环在一行中进行比较。您可以将比较重构为一个在`nil`比较之前进行检查的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:42:52.423

您可能应该使用表格来组织这些值。使用包含一系列“坐标”表的位置表。这样，您可以使用 for 循环遍历所有坐标，并确保表中的每个项目都代表坐标对，您可以编写一些通用函数来测试其有效性。

```
function GetNewCoords(x_, y_)
    x_ = x_ or 0
    y_ = y_ or 0
    return { x = x_, y = y_}
end

function CoordsAreValid(coords)
    if (coords == nil) return false
    return coords.x ~= 0 or coords.y ~= 0
end

local positions = {}
table.insert(positions, GetNewCoords(5, 10))
table.insert(positions, GetNewCoords(-1, 26))
table.insert(positions, GetNewCoords())
table.insert(positions, GetNewCoords(19, -10))

for _, coords in pairs(positions) do
    if (CoordsAreValid(coords)) then
        print(coords.x, coords.y)
    end
end 
```

# javascript - 如何在网络应用程序中截取网页电子邮件该页面的屏幕截图

> ID：14252073
> 
> 赞同：0
> 
> 时间：2013-01-10T06:31:45.163
> 
> 标签：javascript, css, html

我正在制作一个我想要的 html5 网络应用程序，我必须在按钮上单击它捕获屏幕的屏幕截图并将该屏幕截图通过电子邮件发送到给定的电子邮件地址。有没有可能

我研究过这个，但它不适合我

[http://learningthreejs.com/blog/2011/09/03/screenshot-in-javascript/](http://learningthreejs.com/blog/2011/09/03/screenshot-in-javascript/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T06:38:50.693

也许你可以看看这个[html2canvas](http://html2canvas.hertzen.com/)。但它有其局限性。

# postgresql - PostgreSQL 串行模式

> ID：14252076
> 
> 赞同：1
> 
> 时间：2013-01-10T06:32:04.533
> 
> 标签：postgresql, pattern-matching, auto-increment, plpgsql, dynamic-sql

是否可以`serial`在 Postgres (9.0) 中声明一个将根据模式递增的字段？

例如：

```
 Pattern: YYYY-XXXXX
 where YYYY is a year, and XXXXX increments from 00000 - 99999. 
```

还是我应该只使用触发器？

**编辑：**我更喜欢根据服务器日期自动确定年份。该`XXXXX`部分确实从每年的 00000 开始，并“重置”为 00000，然后在修改年份部分时再次增加到 99999。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T03:30:12.120

我会`SEQUENCE`为每一年创建一个单独的序列，这样每个序列都会跟踪一年——即使在那一年结束之后，如果你以后需要更多唯一的 ID。

这个功能可以做到这*一切*：通过评论中[[@Igor](https://stackoverflow.com/users/1818688/igor-romanchenko)][和][[@Clodoaldo](https://stackoverflow.com/users/131874/clodoaldo)]
[的输入进行了改进。]

```
CREATE OR REPLACE FUNCTION f_year_id(y text = to_char(now(), 'YYYY'))
  RETURNS text AS
$func$
BEGIN

LOOP
   BEGIN
      RETURN y ||'-'|| to_char(nextval('year_'|| y ||'_seq'), 'FM00000');

   EXCEPTION WHEN undefined_table THEN   -- error code 42P01
      EXECUTE 'CREATE SEQUENCE year_' || y || '_seq MINVALUE 0 START 0';
   END;
END LOOP;

END
$func$ LANGUAGE plpgsql VOLATILE; 
```

称呼：

```
SELECT f_year_id(); 
```

回报：

```
2013-00000 
```

基本上这会返回`text`您请求的模式。自动为当年量身定做。如果名称序列`year_<year>_seq`尚不存在，则会自动创建`nextval()`并重试。

请注意，您不能同时拥有没有参数的[重载函数](http://www.postgresql.org/docs/current/interactive/xfunc-overload.html)（就像我之前的示例一样），否则 Postgres 将不知道该选择哪个并在绝望中抛出异常。

将此函数用作`DEFAULT`表定义中的值：

```
CREATE TABLE tbl (id text DEFAULT f_year_id(), ...) 
```

或者，您可以获得您选择的一年的下一个值：

```
SELECT f_year_id('2012'); 
```

在 Postgres 9.1 中测试。也应该在 v9.0 或 v9.2 中工作。

要了解这里发生了什么，请阅读手册中的这些章节：

[创建函数](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html)
[创建序列](http://www.postgresql.org/docs/current/interactive/sql-createsequence.html)
[39.6.3。简单循环](http://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#PLPGSQL-CONTROL-STRUCTURES-LOOPS)
[39.5.4。执行动态命令](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)
[39.6.6。捕获错误](http://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#PLPGSQL-ERROR-TRAPPING)
[附录 A. PostgreSQL 错误代码](http://www.postgresql.org/docs/current/interactive/errcodes-appendix.html)
[表 9-22。日期/时间格式的模板模式修饰符](http://www.postgresql.org/docs/current/interactive/functions-formatting.html#FUNCTIONS-FORMATTING-DATETIMEMOD-TABLE)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T12:31:40.860

您可以创建一个将形成此值 (YYYY-XXXXX) 的函数并将此函数设置为列的默认值。

详情[在这里](http://www.postgresql.org/docs/current/static/ddl-default.html)。

# php - 当返回格式错误/意外的回复时，如何重试获取 xml？

> ID：14252078
> 
> 赞同：1
> 
> 时间：2013-01-10T06:32:06.000
> 
> 标签：php, curl, xml-parsing

你能给我一些想法如何改进这个功能，以便它在服务器返回不在 xml 中的输出时处理意外回复，例如 html 中的简单服务器错误消息，然后重试获取 xml？

```
function fetch_xml($url, $timeout=15)
{
    $ch = curl_init();

    curl_setopt_array($ch, array(
        CURLOPT_HEADER => 0,
        CURLOPT_RETURNTRANSFER => 1,
        CURLOPT_CONNECTTIMEOUT => (int)$timeout,
        CURLOPT_FOLLOWLOCATION => 1,
        CURLOPT_URL => $url)
    );

    $xml_data = curl_exec($ch);
    curl_close($ch);

    if (!empty($xml_data)) {
        return new SimpleXmlElement($xml_data);

    }
    else {
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:30:51.793

你可以试试这个。我还没有测试出来。

```
function fetch_xml($url, $timeout = 15, $max_attempts = 5, $attempts = 0)
{
    $ch = curl_init();

    curl_setopt_array($ch, array(
        CURLOPT_HEADER => 0,
        CURLOPT_RETURNTRANSFER => 1,
        CURLOPT_CONNECTTIMEOUT => (int)$timeout,
        CURLOPT_FOLLOWLOCATION => 1,
        CURLOPT_URL => $url)
    );

    $xml_data = curl_exec($ch);
    curl_close($ch);

    if ($attempts <= $max_attempts && !empty($xml_data)) // don't infinite loop
    {
        try
        {
            return new SimpleXmlElement($xml_data);
        } 
        catch (Exception $e)
        {
            return fetch_xml($url, (int)$timeout, $max_attempts, $attempts++);
        } 
    }
    return NULL;
} 
```

# android - Android：流式传输实时音频并播放

> ID：14252079
> 
> 赞同：0
> 
> 时间：2013-01-10T06:32:12.063
> 
> 标签：android, stream, media, playback

我正在制作一个应用程序，我想在其中**流式传输实时音频并**在我的应用程序中播放，但我无法**再次播放**意味着我只能播放一次歌曲，而在播放歌曲时，我**无法再次暂停或停止**歌曲是当歌曲正在播放并且我按下返回按钮时歌曲继续在后台播放，但是当我**重新启动应用程序时，播放、暂停或停止按钮根本不起作用**，并且**显示几秒钟的空白屏幕然后播放，暂停和停止按钮来**了。我的代码如下：

```
play=(Button)findViewById(R.id.button1);
      pause=(Button)findViewById(R.id.button2);
      stop=(Button)findViewById(R.id.button3);
      mp3=new MediaPlayer();
      try {

          mp3.setAudioStreamType(AudioManager.FLAG_PLAY_SOUND);
          mp3.setDataSource(url);
          mp3.prepareAsync();

      } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
      }

      play.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                  mp3.start();
            }
      });
      stop.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                  try {

                        mp3.stop();
                        mp3.reset();
                        mp3.setDataSource(url);
                        mp3.prepareAsync();
                  } catch (Exception e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                  }
            }
      });
      pause.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                  try {

                        mp3.pause();
                  } catch (Exception e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                  }
            }
      });
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:53:02.530

你可以试试这个停止后台播放

```
@Override 
protected void onDestroy() { 
mp3.stop();     
super.onDestroy();  
} 
```

# android - 连续发送消息

> ID：14252080
> 
> 赞同：0
> 
> 时间：2013-01-10T06:32:13.813
> 
> 标签：android, client-server

我正在开发一个应用程序，其中客户端向服务器发送消息，服务器接收消息。但是在我的应用程序中，当我发送消息时，服务器只接收一次。如果我必须再次向服务器发送消息，我必须强制关闭应用程序然后再次发送消息。意味着我必须以连续的方式将数据发送到服务器。下面是我的代码。请帮我解决这个问题。

```
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.net.Socket;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.app.Activity;

import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.TextView.OnEditorActionListener;

public class MainActivity extends Activity {
TextView serverMessage;
Thread m_objThreadClient;
Socket clientSocket;
private boolean connected = false;

EditText et;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        serverMessage=(TextView)findViewById(R.id.textView1);
        et=(EditText)findViewById(R.id.editText1);

    }

  public void Start(View view)
{
     // m_objThreadClient.start();
    m_objThreadClient=new Thread(new Runnable() {
        public void run()
           {

              try
               {

                 clientSocket= new Socket("192.168.0.103",2000);
                 ObjectOutputStream oos = new ObjectOutputStream(clientSocket.getOutputStream());
                 oos.writeObject(et.getText().toString());
                 Message serverMessage= Message.obtain();
                 ObjectInputStream ois =new ObjectInputStream(clientSocket.getInputStream());
                 String strMessage = (String)ois.readObject();
                 serverMessage.obj=strMessage;
                 mHandler.sendMessage(serverMessage);

                 oos.close();
                 ois.close();

              }

              catch(Exception e)
                     {
                         e.printStackTrace();
                     }

          }
            });

    m_objThreadClient.start();
    //m_objThreadClient.resume();

}
Handler mHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        messageDisplay(msg.obj.toString());
    }
};
public void messageDisplay(String servermessage)
{
    serverMessage.setText(""+servermessage);
    m_objThreadClient.start();
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T06:41:21.640

再次调用启动函数时可以绑定套接字。验证这个案例。

```
 if(clientSocket != null && clientSocket.isConnected)clientSocket.close();
  clientSocket= new Socket("192.168.0.103",2000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T06:41:32.087

首先使`clientSocket`对象本地化。

然后解决循环问题试试这个：

调用该函数`starteMessageThreadRunner`，它将启动将消息发送到服务器的线程，一旦可运行对象完成发送数据，它将再次调用处理程序，该处理程序又将再次调用该线程。

```
 /**
         * start the thread and handler which will send the message
         */
        public void starteMessageThreadRunner() {

            Message message = handler.obtainMessage(1, "");
            handler.sendMessage(message);
        }

        /**
         * handler for calling the thread.
         */
        Handler handler = new Handler() {

            public void handleMessage(Message msg) {
                // do something with the response received (if you want to)
                 serverMessage.setText(msg.obj.toString());
                //this line will call runnable again and will send the message to the server.
                handler.post(runnable);

            };
        };

        /**
         * A runnable object for calling the handler.
         */
        private Runnable runnable = new Runnable() {

            @Override
            public void run() {

                // send the message to the server.

try
               {

                 Socket clientSocket= new Socket("192.168.0.103",2000);
                 ObjectOutputStream oos = new ObjectOutputStream(clientSocket.getOutputStream());
                 oos.writeObject(et.getText().toString());
                 Message serverMessage= Message.obtain();
                 ObjectInputStream ois =new ObjectInputStream(clientSocket.getInputStream());

                 String strMessage = (String)ois.readObject();
Message message = handler.obtainMessage(1, strMessage );

                 oos.close();
                 ois.close();
handler.sendMessage(message);
              }

              catch(Exception e)
                     {
                         e.printStackTrace();
                     }

            }
        }; 
```

当你想退出这个进程调用时：

```
handler.removeCallbacks(runnable); 
```

它将删除消息队列中的 Runnable r 的所有待处理帖子。

希望这可以帮助！

# oop - 如果我是项目中唯一的开发人员，我还需要使用封装吗？

> ID：14252084
> 
> 赞同：0
> 
> 时间：2013-01-10T06:32:34.067
> 
> 标签：oop, encapsulation

我总是听说，每当我们编写面向对象的代码时，我们都需要进行封装。如果我是项目中唯一的开发人员，我还需要使用封装吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T06:47:12.877

给出答案的一种方法：从概念上讲，封装的存在是为了编写更好、更安全、更不容易出错的代码。它不存在，主要是为了促进团队一起处理代码（这可能是一个副作用，但这不是目的）。

因此，封装旨在促进从一个编码人员到多个编码人员的规模的商品，它们是与编码人员数量无关的商品，尽管这些商品可能会在项目和团队越大的情况下得到更强的表达。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T06:39:03.543

封装是有原因的。

完成后必须有人维护和管理您的代码，对吗？如果项目变得更大并且您有团队成员怎么办？

所以，答案是“是”，最好尽可能使用封装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T07:13:39.503

您问这个问题的事实让我想知道您实际上没有将封装的实际价值作为一种减少并因此处理复杂性的手段。我的理论计算机科学教授曾经告诉我，最后，如果你考虑一个程序的整个二进制表示，任何程序都只是一个数字。确实很大，但只有一个数字。确实如此，我们使用除 0 和 1 之外的任何其他构造（即 C++、Java、Python、函数式编程、面向对象编程、面向方面编程等）只是因为我们需要更抽象的方法来获得我们需要的一个号码。

# real-time - Firebase 数据结构

> ID：14252085
> 
> 赞同：2
> 
> 时间：2013-01-10T06:32:39.163
> 
> 标签：real-time, firebase

我正在尝试创建一个“用户”列表。但我无法复制文档[https://www.firebase.com/images/data_structure.png](https://www.firebase.com/images/data_structure.png)中的结构方式。

相反，我的结构有一个用户，其子节点具有一些原始文本。[https://www.evernote.com/shard/s52/sh/21c878d6-4978-440c-a089-10da4fb6d792/2d0d7a90861ef6f94e425fdb904b8ab2](https://www.evernote.com/shard/s52/sh/21c878d6-4978-440c-a089-10da4fb6d792/2d0d7a90861ef6f94e425fdb904b8ab2)相反，我希望将子节点命名为“john”、“terry”等，如您的文档中所示。

希望这是有道理的。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T14:59:21.853

看起来你在谈论钥匙。在 Firebase 示例中，键类似于`fred`，但在您的数据中它们显示为`-iKvpJ...`

如果您使用 插入记录`push`，则 Firebase 会自动分配密钥：

```
firebase.child('users').push({ name: 'Fred' });

// /users/-KvpJ.../name/Fred 
```

使用`child`and`set`指定您自己的密钥：

```
firebase.child('users/fred').set({ name: 'Fred' });

// /users/fred/name/Fred 
```

# jquery - 如何让这段代码在暂停/播放上做鼠标

> ID：14252094
> 
> 赞同：1
> 
> 时间：2013-01-10T06:33:34.630
> 
> 标签：jquery, slider, onmouseover

我创建了这个滑块代码，我想让它做一个`onmouseenter`并`onmouseout`暂停并继续。我将在其中一张幻灯片中播放视频，我希望视频在滑块移动之前在滑块中完整播放。

```
 // settings
var $slider = $('.slider'); 
var $slide = 'li'; 
var $transition_time = 1000; 
var $time_between_slides = 4000; 

function slides(){
  return $slider.find($slide);
}

slides().fadeOut();

// set active classes
slides().first().addClass('active');
slides().first().fadeIn($transition_time);

// auto scroll 
$interval = setInterval(
    function(){
      var $i = $slider.find($slide + '.active').index();

      slides().eq($i).removeClass('active');
      slides().eq($i).fadeOut($transition_time);

      if (slides().length == $i + 1) $i = -1; 

      slides().eq($i + 1).fadeIn($transition_time);
      slides().eq($i + 1).addClass('active');
    }
    , $transition_time +  $time_between_slides 
); 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:34:45.403

```
var timeInterval = null, transition_time = 1000, time_between_slides = 4000;
$(document).ready(function () {
    var $slider = $('.slider');
    var $sliderLi = $slider.find('li');

    $sliderLi.hide();
    //$slider.find('li:first').addClass('active').fadeIn(transition_time);
    slideShow();
    timeInterval = setInterval(slideShow, transition_time + time_between_slides);

    function slideShow() {
        var i = $slider.find('li.active').index();

        $sliderLi.eq(i).removeClass('active').fadeOut(transition_time);

        if (i == -1 || $sliderLi.length == i + 1) {
            $slider.find('li:first').addClass('active').fadeIn(transition_time);
        } else {
            $sliderLi.eq(i + 1).addClass('active').fadeIn(transition_time);
        }
    };

    $slider.mouseenter(function () {
        clearInterval(timeInterval); //Or clearTimeout(timeInterval);
    }).mouseleave(function () {
        timeInterval = setInterval(slideShow, transition_time + time_between_slides);
    });
}); 
```

从[演示](http://jsfiddle.net/nanoquantumtech/642Eg/27/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:34:32.003

我在[这里](http://jsfiddle.net/642Eg/26/)更新了你的代码。

我已在`//auto scroll`评论下方更改了您的代码：

```
// auto scroll 
$intVar = start();
function start(){
  return setInterval(
      function(){
      var $i = $slider.find($slide + '.active').index();

      slides().eq($i).removeClass('active');
      slides().eq($i).fadeOut($transition_time);

      if (slides().length == $i + 1) $i = -1; // loop to start

      slides().eq($i + 1).fadeIn($transition_time);
      slides().eq($i + 1).addClass('active');
    }
    , $transition_time +  $time_between_slides);
}

//mouse over
$($slide).hover(function(){
  clearInterval($intVar);
}, function(){
  $intVar = start();
}); 
```

*我希望这是你需要的。*

# internet-explorer - IE中的跨域jquery ajax请求与xDomain请求不起作用

> ID：14252095
> 
> 赞同：3
> 
> 时间：2013-01-10T06:33:34.350
> 
> 标签：internet-explorer, jquery

我使用以下代码在 IE 中使用 xDomain Request 发出跨域 jquery ajax 请求。

```
var xdr;  
 var URL=parentDomain+"/chat/getmessagesservlet";

 if (jQuery.browser.msie && window.XDomainRequest) {  

   // Use Microsoft XDR
   var xdr = new XDomainRequest();
    xdr.open("POST", URL + '?to='+chatboxtitle+'&yourName='+myName+'&chatBoxIndex='+tabIncr);
    xdr.onload = function () {
   var dom  = new ActiveXObject("Microsoft.XMLDOM");
   dom.async = false;
  JSON = $.parseJSON(xdr.responseText); 
   if (JSON == null || typeof (JSON) == 'undefined') {
    JSON = $.parseJSON(data.firstChild.textContent);   
   }

    processData(JSON); // internal function
   }; 

   xdr.onerror = function() {
     _result = false;    
    };
   xdr.send();

    } else {
    $.ajax({ 
      type: 'POST', 
       url: URL,   
          processData: true,
          data: {'to':chatboxtitle,'yourName':myName,'chatBoxIndex':tabIncr}, 
           dataType: "json",
          async: false,
          success: function (data) {
            processData(data);   
           }
});

}' 
```

我也在服务器端设置标题如下：

```
response.setHeader("Access-Control-Allow-Origin","*");   
response.setHeader("Content-Type","text/plain");
response.setHeader("Access-Control-Allow-Methods"," GET, POST");
response.setHeader("Access-Control-Allow-Headers", "Content-Type"); 
```

但在 IE8 和 IE9 中它不起作用。ResponseText 返回 null 或为空。我已经看到使用 jQuery

```
.ajaxTransport( dataType, handler(options, originalOptions, jqXHR) 
```

或者

```
.ajaxPrefilter( [dataTypes ], handler(options, originalOptions, jqXHR) ) 
```

可以进行跨域请求。但我不知道如何在我的代码中使用它。选项和 originalOptions 参数中要传递的值是什么？请给我指导来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:09:27.783

这可能会有所帮助：

```
xdr.onprogress = function () { }; //Needed to save IE9 from melting. 
```

# ios - 万无一失的越狱检测？

> ID：14252101
> 
> 赞同：3
> 
> 时间：2013-01-10T06:33:58.163
> 
> 标签：ios, detection, jailbreak

我浏览了各种有关越狱检测机制的帖子。无论我遇到什么，要么是苹果在审查过程中会拒绝的东西，要么是可以绕过的东西。我也知道苹果删除了越狱API ..

那么，是否有任何万无一失的机制可以让我检查设备是否越狱？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-10T06:55:37.980

不，没有万无一失的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T07:20:32.667

我不能说这是万无一失的，但我知道它有效，至少在某些情况下（如果不是全部的话）。我已经在我的 App Store 应用程序中使用了此代码 6 个月和 4 次更新，因此 Apple 似乎对此表示满意。

```
if ([[NSFileManager defaultManager] fileExistsAtPath:@"/bin/bash"] ||
    [[NSFileManager defaultManager] fileExistsAtPath:@"/Applications/Cydia.app"] ||
    [[NSFileManager defaultManager] fileExistsAtPath:@"/private/var/lib/apt"]) {
    // Device is jailbroken
} 
```

任何优秀的黑客都可能找到不操作此代码的方法。让这个更多的黑客证明是留给读者的练习。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T05:45:17.700

使用此应用程序检测越狱设备。

[AntiPiracyDemo.ipa](http://code.securitytube.net.s3.amazonaws.com/AntiPiracyDemo.ipa)

绕过越狱检测的两种方法

1.  使用 GDB 进行运行时修改
2.  使用 Cycript 的方法调配

看看这个[博客](http://hackoftheday.securitytube.net/2013/04/bypassing-jailbroken-checks-in-ios.html)有趣的东西在那里绕过越狱检查。

# python - 如何添加获取我使用 from x import * 导入的模块数组？

> ID：14252102
> 
> 赞同：2
> 
> 时间：2013-01-10T06:34:07.397
> 
> 标签：python, module

我有一个`plugins`包含我的应用程序插件的目录，每个插件都是一个 python 文件，其中定义了一个方法`handle`。结构如下：

```
- main.py
- plugins
      - hello.py
      - foo.py
      - bar.py
      - ... 
```

`plugins`现在我想导入所有模块`main.py`：

`from plugins import *`

但是，我想获取模块列表，因此可以循环遍历它，例如：

```
for plugin in plugin_modules:
    plugin.handle(data) 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T06:39:41.290

尝试`pkgutil`：

```
import os.path, pkgutil
import mypackage

package = mypackage
mods = [n for _,n,_ in pkgutil.iter_modules([os.path.dirname(package.__file__)])]

for mod in mods:
    package.__dict__.get(mod).handle(data) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T06:45:35.397

简单但不会得到一切：

```
import plugins

for i in range(len(plugins.__all__)):
    getattr(plugins, plugins.__all__[i]).handle(data) 
```

# asp.net-mvc-3 - System.Web.Mvc.MvcWebRazorHostFactory 类型的表达式不能用于返回类型 System.Web.WebPages.Razor.WebRazorHostFactory

> ID：14252103
> 
> 赞同：4
> 
> 时间：2013-01-10T06:34:15.543
> 
> 标签：asp.net-mvc-3

我正在研究 MVC3 剃须刀项目。我的解决方案运行正确，但现在它编译正确，但在运行时显示错误。显示以下错误，请帮我解决它。

```
Expression of type 'System.Web.Mvc.MvcWebRazorHostFactory' cannot be used for return type 'System.Web.WebPages.Razor.WebRazorHostFactory' 
```

源错误：

```
An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below 
```

# php - 严格标准：在functions.php中只能通过引用传递变量

> ID：14252106
> 
> 赞同：1
> 
> 时间：2013-01-10T06:34:30.557
> 
> 标签：php, standards, strict

我对我得到的错误有点困惑。

错误是：

> 严格标准：在functions.php中只能通过引用传递变量

参考线是：

```
$action = array_pop($a = explode('?', $action)); // strip parameters 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T07:03:27.560

试试这个：

```
$a= explode('?',$action);
$action = array_pop($a); 
```

顺便说一句，什么是`$action`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T07:31:03.307

`array_pop`唯一的参数是通过引用传递的数组。的返回值`explode("?", $action)`没有任何引用。

您应该首先将返回值存储到变量中：

```
$arr = explode('?',$action);
$action = array_pop($arr); 
```

可以通过引用传递以下内容：

*   **变量**，即 foo($a)
*   **新语句**，即 foo(new foobar())
*   **从函数返回的引用**

[PHP手册中的引用传递](http://www.php.net/manual/en/language.references.pass.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-10T10:24:27.547

> $action = array_pop($a = explode('?', $action)); ///错误的
> 
> $action = array_pop($a = (explode('?', $action))); ///对
> 
> 确保将explode放在括号中，例如（explode（）），就是这样..

# java - 在 DOM 中搜索特定文本

> ID：14252107
> 
> 赞同：1
> 
> 时间：2013-01-10T06:34:32.557
> 
> 标签：java, dom, jsoup

我有一个 HTML/JSP 的 DOM，我想在 DOM 中搜索特定的文本，并且需要为包含该文本的元素构建 XPath。使用 Jsoup API.Building a xpath 工作正常

如果它是元素的值或元素属性的值，我可以搜索文本。假设 DOM 中是否存在没有任何标签的文本，并且如果文本包含在 span 节点中，我该如何搜索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T06:47:16.290

# 解决方案

有几种不同的解决方案。

## jsoup 选择器

[jsoup API](http://jsoup.org/apidocs/)有一个实现[伪选择器](http://www.w3.org/TR/css3-selectors/)的[Selector 类](http://jsoup.org/apidocs/org/jsoup/select/Selector.html)。具体来说：

*   `:contains(text)`
*   `:matches(regex)`

这些将返回包含搜索文本的元素列表。您必须尝试查看它们是否返回父容器或确切的子容器，或某种组合。

## jsoup 元素

[Element 类](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html)有一些可能有用的方法：

*   [Element.getElementsContainingOwnText](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#getElementsContainingOwnText%28java.lang.String%29)
*   [Element.getElementsContainingText](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#getElementsContainingText%28java.lang.String%29)
*   [Element.getElementsMatchingOwnText](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#getElementsMatchingOwnText%28java.lang.String%29)

这些方法允许检索包含给定文本或正则表达式模式的元素或父元素。

## 字符串转换

1.  将 HTML 转换为字符串。
2.  正常搜索文本元素（例如，正则表达式）。

这样做的缺点是，如果要匹配的字符串与属性的值或节点名称的值相同，则会返回误报。

# 资源

请参阅[字符串 API](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)；有用的函数可能是`indexOf`和`split`。

请参阅[Pattern API](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)以构建正则表达式。

# deployment - 未能在云服务 testingservicecall 中下载实例 abc_webrole_IN_0 的 RDP 文件

> ID：14252110
> 
> 赞同：7
> 
> 时间：2013-01-10T06:35:01.177
> 
> 标签：deployment, azure, cloud

未能在云服务 testingservicecall 中下载实例 servicecall_webrole_IN_0 的 RDP 文件。

细节：

```
The supplied cscfg file can not be parsed. 
Got exception Microsoft.WindowsAzure.Plugins.RemoteAccess.AccountEncryptedPassword. 
```

更多信息： *使用 windows azure for php mssql 和 zend。*

**服务配置.cscfg**

```
<Setting name="Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString" value="UseDevelopmentStorage=true"/>     
      <Setting name="Microsoft.WindowsAzure.Plugins.RemoteAccess.Enabled" value="true" />     
      <Setting name="Microsoft.WindowsAzure.Plugins.RemoteAccess.AccountUsername" value="somename" />     
      <Setting name="Microsoft.WindowsAzure.Plugins.RemoteAccess.AccountEncryptedPassword" value="MIIBnQYJKoSomeStringPassucansee" />

      <Setting name="Microsoft.WindowsAzure.Plugins.RemoteAccess.AccountExpiration" value="2013-12-31T23:59:59.0000000-07:00" />
      <Setting name="Microsoft.WindowsAzure.Plugins.RemoteForwarder.Enabled" value="true" /> 
```

在 AccountEncryptedPassword 中放什么？

```
<Setting name="Microsoft.WindowsAzure.Plugins.RemoteAccess.AccountEncryptedPassword" value="MIIBnQYJKoZIhv... " /> 
```

我正在使用 Eclipse 编辑器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T07:06:51.300

您需要使用启用远程访问选项和正确的证书重建/重新部署配置文件。如果您手动粘贴了加密密码，则用户名或密码字段中可能缺少字符或多余字符。

错误很清楚——无法解析配置文件，因为密码无法解密。

使用 Visual Studio“包”向导。右键单击云项目>>包：

![包裹](../Images/027191baa090137792a2539931003fbf.png)

然后点击“设置”：

![设置](../Images/bbf55ad9366027f2b0c100fa96e91e44.png)

选择证书，输入用户名、密码和到期日期。这将在您的 ServiceConfiguration 文件中设置适当的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-13T14:15:45.647

我的经验，如果它发生在其他人身上：

1）帐户已过期，所以我去了 Azure 并修改了过期日期（CloudSvc/远程桌面）

2) 停止处理此线程中发布的错误。

3) 在我的情况下，问题是远程桌面的 Azure 证书已过期，因此您获得了具有相同名称 CN 的新证书。

4）所以当我更改帐户到期时，继续使用旧证书。

5）我花了一些时间才发现的原因是选择证书的组合具有两次相同的名称：

[![更改 RDP 用户的屏幕截图](../Images/252e416d57436179b824f67174457b27.png)](https://i.stack.imgur.com/0C1uk.png)

6）当我更改为具有相同名称的第二个项目时，它开始工作。

# c# - Streamwriter 抛出 system.argumentexception

> ID：14252112
> 
> 赞同：2
> 
> 时间：2013-01-10T06:35:10.917
> 
> 标签：c#, streamwriter

我知道这个问题看起来很奇怪。

我使用 .NET Micro Framework 在 C# 中编写了一个小程序，该程序使用默认模拟器来模拟闪光灯，使用模拟器上的 5 个按钮，使用中断端口引发事件。

我进行了编码，以便当我按下底部按钮时，存储在 arraylist 使用日志中的所有记录都将打印到 txt 文件中。非常简单直接，我做了一个Streamwriter实例

```
StreamWriter sw = new StreamWriter(@"c:\temp.txt"); 
```

但随后它在这一行抛出“System.IO.dll 中发生类型为 'System.ArgumentException' 的未处理异常”。

我无法解决这个问题，我不明白为什么这里有一个参数异常。该代码适用于 Visual C# 中的控制台项目，但不适用于 Micro Framework。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:03:49.393

您遇到的问题是因为 Windows 和 MicroFramework 之间的文件系统不同。通过使用一些目录函数来确定可用目录，我能够让它在模拟器上运行。

```
public static void Main()
{
    string  d = Directory.GetCurrentDirectory();
    string[] directorys = Directory.GetDirectories(d);
    foreach (var item in directorys )
    {
        Debug.Print(item);
    }

    try
    {
        using (StreamWriter sw = new StreamWriter("\\WINFS\\temp.txt"))
        {
            sw.WriteLine("Good Evening");
            sw.Close();
        }
    }
    catch (Exception ex)
    {
        throw ex;
    }

} 
```

在模拟器中我想出了

```
 [0]: "\\ROOT"
 [1]: "\\WINFS" 
```

`ROOT`没有工作，但`WINFS`做了。

# ios - 如何在 iOS 中使用平移手势识别器在视图之间切换？

> ID：14252115
> 
> 赞同：0
> 
> 时间：2013-01-10T06:35:32.973
> 
> 标签：ios, uipangesturerecognizer

我有两个视图，我想使用向右平移手势（如 Facebook ios 应用程序中使用的手势）切换到第二个视图。一旦我们开始使用平移手势，视图应该开始改变。我该如何执行这个？有没有人有执行此操作的示例代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T06:43:15.847

有一个带有示例项目的 git，您可以通过该项目参考 Facebook iOS 应用程序中的侧面菜单效果。

[https://github.com/BenHall/ios_facebook_style_navigation](https://github.com/BenHall/ios_facebook_style_navigation)

**编辑：**

好的，然后尝试这样的事情：

```
 UISwipeGestureRecognizer *swipeLeft = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(scrollViewSwipedLeft:)];
   [swipeLeft setDirection:UISwipeGestureRecognizerDirectionLeft];
   [self.navigationController.navigationBar addGestureRecognizer:swipeLeft]; 
```

然后用这样的方式处理滑动：

```
-(void) didSwipedLeft: (UISwipeGestureRecognizer *) gesture {

  if (gesture.state != UIGestureRecognizerStateEnded) {
      return;
  }

  //do something    
} 
```

# svn - 某些提交不会调用提交后挂钩

> ID：14252117
> 
> 赞同：0
> 
> 时间：2013-01-10T06:35:42.513
> 
> 标签：svn

我们正在使用 post-commit 挂钩将文件从源复制到目标（源和目标是存储库的根文件夹）。文件夹 。如果属性（属性名称：版本）应用于源下的任何文件夹，我们从 post-commit.bat 调用 python 脚本进行复制。

我们在进行复制时面临一个问题，一些文件夹没有从源复制到目标。我们通过执行以下步骤发现了问题，在 python 脚本的开头，我们记录了修订号并更改了每次提交的日志文件的路径。但是对于某些两个文件夹，日志文件中没有属性集条目（修订号和更改的路径）。（请注意，在 post-commit.bat 中，我们只是调用了 python 脚本，没有别的）。当我们第二次尝试时，这两个文件夹的属性条目在日志文件中可用，并且文件已成功复制到目标文件夹。

是否有任何情况下没有调用 Post-Commit 挂钩？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:03:34.410

应该始终调用 post-commit 钩子，但它可能由于某种原因而失败，如果执行提交的用户没有告诉您，您可能永远不会知道它。毕竟，就用户而言，提交完成后，他们只是收到了一些意义不大的错误消息。

现在，你到底在做什么？您是否将文件从一个 Subversion 目录复制到另一个目录，然后提交这些更改？如果是这样，您如何防止您的提交后挂钩第二次触发。如果是这种情况，则可能是您防止提交后挂钩在无限循环中触发的天才系统导致了问题。

即使您不这样做，创建一个提交后挂钩来执行可能需要超过几秒钟的时间也不是一个好主意。在提交后挂钩完成之前，提交无法完成。如果 post-commit 钩子需要 10 秒才能运行，那是 10 秒用户必须坐在那里想知道发生了什么。

您最好使用诸如[Jenkins](http://jenkins-ci.org)之类的 CI 系统来为您创建发行版。Jenkins 易于设置，并且会为您处理提交后，而不会在提交后地狱中捆绑用户的提交过程。如果由于某种原因，提交后过程*失败*，Jenkins 可以通过电子邮件提醒您该问题。Jenkins 用户界面完全基于 Web，开发人员可以轻松检查提交后流程的历史记录。

# android - 如何在滚动视图中显示半个项目，以指示滚动视图中的更多产品

> ID：14252118
> 
> 赞同：2
> 
> 时间：2013-01-10T06:35:42.473
> 
> 标签：android, scrollview

我使用了水平滚动视图，在其中添加了“子视图”。但是在 HZ 滚动视图上，我想安排孩子一些想法，整个屏幕一次显示 3.5 个孩子或 4.5 ， 5.5 取决于屏幕大小。child 的一半表示 Scroller 上有更多的 child。

为此，我为子视图使用了不同的尺寸，这取决于密度。但他们仍然是一些在屏幕末尾显示整个孩子的设备。

那么我如何在滚动视图上管理它。请指导我正确的方向。

![在此处输入图像描述](../Images/ff0d2d26762b38139df522ea4ad47694.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T09:33:09.727

> 为此，我为子视图使用了不同的尺寸，这取决于密度。但他们仍然是一些在屏幕末尾显示整个孩子的设备。

这在很多设备中都无法正常工作。`HorizontallScrollView`假设这些橙色子视图的宽度都相同（尽管不是那么重要），并且您只想在第一次布局时才显示一半，您可以简单地在视图上发布`Runnable`（在`onCreate`方法中）以设置它们宽度到适当的尺寸，以便您做出适当的外观：

```
public void onCreate(Bundle saved) {
    // ... work   
    horizontalScrollView.post(new Runnable() {

            @Override
            public void run() {
                DisplayMetrics dm = getResources().getDisplayMetrics();
                int screenWidth = dm.widthPixels;
                // based on this width, the space between the children and their
                // widths calculate new widths so you get a half clipped
                // children on the right side.
            }
        });
} 
```

但是，如果你真的想确保用户看到额外的内容，我会避免这种情况并简单地设置一个更强大的指示器`HorizontalScrollView`（覆盖它的`dispatchDraw`方法并在那里绘制一些东西（也许稍后用 a 隐藏它）） `Runnable`.

# javascript - html2canvas 插入多个元素进行渲染

> ID：14252120
> 
> 赞同：2
> 
> 时间：2013-01-10T06:35:46.573
> 
> 标签：javascript, jquery, html2canvas

html2canvas 可以发送多个元素（document.body 除外）吗？说如果我不想只基于页面中的几个元素生成图像，并且有几个元素我不想渲染.. 我该如何编辑这段代码？

```
html2canvas( [ document.body] , {
    onrendered: function( canvas ) {
            img = canvas.toDataURL();
            window.open(img);
        } 
```

顺便说一句，window.open 意味着我不想在不同的页面上显示图像，同时不干扰原始 html 数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:10:59.127

您可以`display: none`在调用 html2canvas 之前在要隐藏的元素上添加样式，然后立即将其删除，这样它们就不会显示在 img 中。

# eclipse - 如何有效地终止 ILaunch 对象？

> ID：14252123
> 
> 赞同：0
> 
> 时间：2013-01-10T06:36:05.433
> 
> 标签：eclipse, eclipse-plugin

我创建了一个包装器`JavaLaunchDelegate`并创建了一个新的`ZLaunchConfigurationDelegate`扩展 this 。在这个包装器中，我尝试`Launch`使用`Launch.terminate`有时它无法终止先前的运行来终止。

Java 代码：

```
public static ILaunch getLaunchObject(String launchName) {
    ILaunch launchObj = null;
    ILaunchManager launchManager = DebugPlugin.getDefault().getLaunchManager();
    ILaunch[] launches = launchManager.getLaunches();
    for(int i=0 ; i<launches.length ; i++) {
        ILaunch launch = launches[i];
        ILaunchConfiguration config = launch.getLaunchConfiguration();
        if(config != null) {
            String configName = config.getName();
            if(configName.equals(serviceName)) {
                launchObj = launch;
                break;
            }
        }

    }
    return launchObj;
}

public static void terminateLaunch(String launchName){
    ILaunch launch = getLaunchObject(launchName);
    if(launch != null){
        launch.terminate();
    }
}

terminateLaunch("mylaunch"); 
```

`launch.terminate`如果不起作用，我想强制终止该进程。

**目标**

如果我从 Eclipse 启动对象中获得了进程 ID。我将使用 os 命令终止该进程。

有什么方法可以从启动对象中获取进程 ID？

谢谢你 ，

坎南

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:35:46.543

首先尝试终止所有进程和调试目标（如果此 Launch 处于调试模式）并终止 Launch。

```
private void terminate(ILaunch launch){
    try{
        IProcess [] processList = launch.getProcesses();
        for(IProcess process : processList) {
            if( ! process.isTerminated() ) {
                process.terminate();                    
            }               
            launch.removeProcess(process);
        }

        IDebugTarget [] debugTargetList = 
            launch.getDebugTargets();
        for(IDebugTarget debugTarget : debugTargetList) {
            launch.removeDebugTarget(debugTarget);
        } 

        launch.terminate();

    }catch(Exception ex) {
       // Exception
    }
 } 
```

# php - htaccess 与 python 和 php

> ID：14252125
> 
> 赞同：-1
> 
> 时间：2013-01-10T06:36:29.863
> 
> 标签：php, python, .htaccess

我的网络上有 python 和 php 脚本。

问题是，python 脚本运行正确，但下载的是 PHP，而不是显示。有趣的是不是所有的PHP都被下载了，你可以通过插入/来阻止下载？在 php 脚本名称的末尾。

这是我的 .htaccess 的内容：

```
Options Indexes Includes ExecCGI
Options +ExecCGI

AddHandler cgi-script .py

DirectoryIndex code.py/ 
```

而且...设置是，这个.htaccess 放在根目录/www 上。PHP 脚本位于另一个目录中，比如说 /php。

请帮忙。如何让 PHP 正确运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:16:32.707

你需要一个 php 的处理程序。类似于以下内容：

```
AddHandler php-cgi .php 
```

取决于应该执行 php 脚本的处理程序（也可以是`php5-fastcgi`）

# iphone - 在 iphone 5 中调整表格视图大小

> ID：14252126
> 
> 赞同：2
> 
> 时间：2013-01-10T06:36:36.447
> 
> 标签：iphone, ios, xcode, iphone-5

我创建了一个通用应用程序，并在 iphone 5 模拟器（即 iphone Retina 4）中运行它。一切正常，但表格视图大小不合适。实际上，我的表格视图完全位于图像视图之上。当我在 iphone 视网膜 4 中运行时，图像会根据视网膜 4 显示自行设置，但表格视图高度超出了该图像视图。我在检查器窗口中将表格视图大小设置为 160，当我在日志中打印时，它显示为 248.0000。我无法弄清楚问题出在哪里。请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T07:05:34.463

![检查自动调整大小](../Images/9f95e6921c22c38539081e4cf9bb2d61.png)

您可以通过此调整视图大小。

请取消选中“使用自动布局”选项。bcoz 它会以特定的边距限制您。

希望它有效。

# python - django 模型字段如何与多个模型相关联？

> ID：14252128
> 
> 赞同：2
> 
> 时间：2013-01-10T06:36:47.373
> 
> 标签：python, django, model, meta

假设我有三个这样的模型：

```
 class video(models.Model):
       name=models.CharField(max_length = 100)

 class image(models.Model):
       name=models.CharField(max_length = 100)

 class comments(models.Model):
       content=models.CharField(max_length = 100) 
```

现在我想通知用户他们的视频或图像是否得到评论

这就是我要的

消息模型：

```
class message(models.Model):
       type=models.CharField(max_length = 100) # 'video' or 'image'
       video_or_image=models.ForeignKey(video or image)

       #the type is just a string to tell if the comment is about the video or image
       #video_or_image need to be video foreignkey or image foreignkey depends on type 
```

可能吗。

我目前通过两种方法解决这个问题

**第一**：</p>

```
 class message(models.Model):
       type = models.CharField(max_length = 100) # 'video' or 'image'
       video_or_image_id = models.IntegerField(default = 1)
       # 
```

**第二**

```
 class message(models.Model):
       type=models.CharField(max_length = 100) # 'video' or 'image'
       video=models.ForeignKey(video)
       image=models.ForeignKey(image)
       # if the comment is about video just leave the image empty 
```

如果一个字段到多个模型无法完成，那么我的解决方法哪个更好，或者帮助我更好的一个！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T06:53:14.027

您正在寻找一个[`GenericForeignKey`](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#django.contrib.contenttypes.fields.GenericForeignKey).

这也是[contrib.comments](https://docs.djangoproject.com/en/2.0/topics/external-packages/#comments)将[评论与评论](https://github.com/django/django-contrib-comments)项目相关联的方式。

# android - 在 Android 中更改已禁用复选框的颜色

> ID：14252136
> 
> 赞同：2
> 
> 时间：2013-01-10T06:37:18.897
> 
> 标签：android, android-layout, android-checkbox

我在 android 的列表视图中有一个复选框。复选框用于指示选中的项目。我已将复选框设置为禁用，以便单击复选框时不会发生任何事件。现在禁用的复选框刻度线是一个非常暗淡的灰色刻度线。有没有办法改变android中禁用复选框的刻度线颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T06:51:27.640

您的复选框需要单独的图像，并且对于不同的状态也需要单独的图像...选中，未选中，禁用，单击（选中和未选中状态之间的转换）。

之后，您需要在您的 drawble 文件夹中创建一个 drawable.xml 并将其设置为您复选框的背景。

然后只有您可以更改差异状态复选框的颜色。

否则，您需要使用默认主题。

如果您需要我上面所说的样本，请告诉我。这看起来很复杂，但很容易。

[这个页面](http://android-support-akkilis.blogspot.in/2013/01/how-to-make-custom-drawable-background.html "这一页")试图解释我在说什么。

# android - 快捷方式图标在 Galaxy Nexus 上的图像尺寸错误

> ID：14252143
> 
> 赞同：0
> 
> 时间：2013-01-10T06:38:08.463
> 
> 标签：android, android-launcher, galaxy-nexus

我尝试创建一个在设备主屏幕上放置快捷方式图标的应用程序。

它在其他设备上运行良好，但在我的 Galaxy Nexus（带有 4.2.1）上，图标裁剪图标图像并仅占据它的左上角。

它看起来像这样：

![在此处输入图像描述](../Images/c9a29cd86722cf65fc925244f65c0cbf.png)

知道为什么会发生这种情况，或者它是一个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:44:51.577

尝试删除所有图标，除了银河系的图标（如果我记得很好，它是 96X96）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T06:54:41.280

这是自定义ROM的问题。

处理这种情况并将另一个快捷方式图标放到 Galaxy Nexus（带有 4.2.1）

# mysql - 如何获得不同日期的各个最大值之间的差异？

> ID：14252146
> 
> 赞同：2
> 
> 时间：2013-01-10T06:38:16.240
> 
> 标签：mysql, sql

我是 MySQL 新手，我试图找到：

> 给定一天的最大值与前一天的最大值之间的差值。

我能够通过以下方式获得日期的最大值：

```
select max(`bundle_count`), `Production_date` 
from `table` 
group by `Production_date` 
```

但我不知道如何使用 SQL 计算两个给定日期的最大值之间的差异。

![请找到可用的输入](../Images/138e0747e49bd14ae82070ce99116e68.png)

我期待这样的输出![期望输出](../Images/271168dbea2dcaa13408fc3e20815986.png)

请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T07:14:47.717

更新 1：这是我用于测试的小提琴[http://sqlfiddle.com/#!2/818ad/2 。](http://sqlfiddle.com/#!2/818ad/2)
更新 2：这是一个小提琴，[http](http://sqlfiddle.com/#!2/3f78d/10) ://sqlfiddle.com/#!2 /3f78d/10，我根据桑迪的评论用于进一步完善/修复。
更新 3：由于某种原因，没有正确处理没有前一天的情况。我以为是。但是，我已经更新以确保它有效（有点麻烦 - 但它似乎是正确的。最后小提琴：[http ://sqlfiddle.com/#!2/3f78d/45](http://sqlfiddle.com/#!2/3f78d/45)

* * *

我认为@Grijesh 在概念上通过输入数据的自联接为您提供了所需的主要内容（因此请确保您投票赞成他的答案！）。我已经在语法上对他的查询进行了一些清理（基于他的查询！）：

```
SELECT
DATE(t1.`Production_date`) as theDate,
MAX( t1.`bundle_count` ) AS  'max(bundle_count)',
MAX( t1.`bundle_count` ) - 
    IF(
       EXISTS
           (
            SELECT date(t2.production_date)
            FROM input_example t2
            WHERE t2.machine_no = 1 AND 
                  date_sub(date(t1.production_date), interval 1 day) = date(t2.production_date)
        ),
        (
            SELECT MAX(t3.bundle_count)
            FROM input_example t3
            WHERE t3.machine_no = 1 AND 
                  date_sub(date(t1.production_date), interval 1 day) = date(t3.production_date)
            GROUP BY DATE(t3.production_date)
        ),          0
    )
    AS Total_Bundles_Used
FROM  `input_example` t1
WHERE t1.machine_no = 1
GROUP BY DATE( t1.`production_date` ) 
```

* * *

注 1：我认为 @Grijesh 和我正在同时清理查询语法问题。令人鼓舞的是，在我们都进行清理之后，我们最终得到了非常相似的版本。`IFNULL()`当没有前面的数据时，我的版本使用不同。我也得到了一个`DATE_SUB`，我确保将各种日期减少到没有时间成分的单纯日期，通过`DATE()`

注2：我本来没有完全理解你的源表，所以我想我需要在查询中实现一个运行计数。但是经过更好的检查，很明显你的源数据已经有一个运行计数，所以我把那些东西拿回来了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T06:48:51.310

我不确定，但您需要这样的东西，希望它在某种程度上对您有所帮助：

试试这个：

```
SELECT  t1.`Production_date` , 
         MAX(t1.`bundle_count`) - MAX(t2.`bundle_count`) ,  
         COUNT(t1.`bundle_count`)  
FROM `table_name` AS t1
    INNER  JOIN `table_name`  AS t2
   ON ABS(DATEDIFF(t1.`Production_date` , t2.`Production_date`)) = 1
GROUP BY t1.`Production_date` 
```

**编辑**

我创建了一个表名 = 'table_name'，如下所示，

```
mysql> SELECT * FROM `table_name`;
+---------------------+--------------+
| Production_date     | bundle_count |
+---------------------+--------------+
| 2004-12-01 20:37:22 |            1 |
| 2004-12-01 20:37:22 |            2 |
| 2004-12-01 20:37:22 |            3 |
| 2004-12-02 20:37:22 |            2 |
| 2004-12-02 20:37:22 |            5 |
| 2004-12-02 20:37:22 |            7 |
| 2004-12-03 20:37:22 |            6 |
| 2004-12-03 20:37:22 |            7 |
| 2004-12-03 20:37:22 |            2 |
| 2004-12-04 20:37:22 |            1 |
| 2004-12-04 20:37:22 |            9 |
+---------------------+--------------+
11 rows in set (0.00 sec) 
```

我的查询：查找 `bundle_count`两个连续日期之间的差异：

```
 SELECT  t1.`Production_date` ,   
           MAX(t2.`bundle_count`) - MAX(t1.`bundle_count`) ,
           COUNT(t1.`bundle_count`)  
   FROM `table_name` AS t1     
     INNER  JOIN `table_name`  AS t2   
     ON ABS(DATEDIFF(t1.`Production_date` , t2.`Production_date`)) = 1
  GROUP BY t1.Production_date; 
```

它的输出：

```
+---------------------+-------------------------------------------------+--------------------------+
| Production_date     | MAX(t2.`bundle_count`) - MAX(t1.`bundle_count`) | COUNT(t1.`bundle_count`) |
+---------------------+-------------------------------------------------+--------------------------+
| 2004-12-01 20:37:22 |                                               4 |                        9 |
| 2004-12-02 20:37:22 |                                               0 |                       18 |
| 2004-12-03 20:37:22 |                                               2 |                       15 |
| 2004-12-04 20:37:22 |                                              -2 |                        6 |
+---------------------+-------------------------------------------------+--------------------------+
4 rows in set (0.00 sec) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T07:19:39.630

这是 PostgreSQL 语法（抱歉；这是我所熟悉的），但基本上应该适用于任一数据库。请注意，这也不完全在 PostgreSQL 中运行，因为`group`它不是有效的表名（它是保留关键字）。正如其他人所提到的，该方法是一种自联接，但我使用了一个视图来处理每天的最大值和差异作为单独的步骤。

```
create view max_by_day as
select
  date_trunc('day', production_date) as production_date,
  max(bundle_count) as bundle_count
from
  group
group by
  date_trunc('day', production_date);

select
  today.production_date as production_date,
  today.bundle_count,
  today.bundle_count - coalesce(yesterday.bundle_count, 0)
from
  max_by_day as today
  left join max_by_day yesterday on (yesterday.production_date = today.production_date - '1 day'::interval)
order by
  production_date; 
```

PostgreSQL 也有一个称为[窗口函数](http://www.postgresql.org/docs/9.2/static/tutorial-window.html)的结构，它对此很有用并且更容易理解。只需要坚持一点主张就可以建立一个卓越的数据库。:-P

```
select
  date_trunc('day', production_date),
  max(bundle_count),
  max(bundle_count) - lag(max(bundle_count), 1, 0)
over
  (order by date_trunc('day', production_date))
from
  group
group by
  date_trunc('day', production_date); 
```

这两种方法在处理数据中缺失天数的方式上有所不同——第一种将其视为 0，第二种将使用前一天存在的日期。你的样本中没有这样的案例，所以我不知道这是否是你关心的事情。

# javascript - jQuery .each() 没有按预期迭代字符串数组

> ID：14252151
> 
> 赞同：7
> 
> 时间：2013-01-10T06:38:44.273
> 
> 标签：javascript, jquery

正在做：

```
var tags = ["foobar", "hello", "world"];

$.each(tags, function(tag) {  
  console.log(tag);
}); 
```

给我一个输出

```
0    
1   
2 
```

为什么我的输出不是

```
foobar   
hello    
world 
```

[JSFiddle](http://jsfiddle.net/JLzfS/1/)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-10T06:39:44.580

这样做，第一个参数是索引：

```
$.each(tags, function(index, tag) {  
  console.log(tag);
}); 
```

# java - 将新文件替换为jar文件时保留原来修改的时间戳

> ID：14252153
> 
> 赞同：2
> 
> 时间：2013-01-10T06:38:47.377
> 
> 标签：java, jar

我正在使用 java.jar 将文件替换到现有的 jar 文件中。当我替换新文件时，剩余文件修改时间也更改为当前时间戳。请告知需要做些什么来保留其他文件的原始修改日期时间。我正在使用代码，

```
 while (entry != null) {
        String name = entry.getName();
        boolean notInFiles = true;
        for (File f : files) {
            if (f.getName().equals(name)) {
                notInFiles = false;
                break;
            }
        }
                    if (notInFiles) {
            // Add ZIP entry to output stream.
            out.putNextEntry(new ZipEntry(name));
            // Transfer bytes from the ZIP file to the output file
            int len;
            while ((len = zin.read(buf)) > 0) {
                out.write(buf, 0, len);
            }
        }
        entry = zin.getNextEntry();
    }
    // Close the streams        
    zin.close();
    // Compress the files
    for (int i = 0; i < files.length; i++) {
        InputStream in = new FileInputStream(files[i]);
        // Add ZIP entry to output stream.
        out.putNextEntry(new ZipEntry(files[i].getName()));
        // Transfer bytes from the file to the ZIP file
        int len;
        while ((len = in.read(buf)) > 0) {
            out.write(buf, 0, len);
        }
        // Complete the entry
        out.closeEntry();
        in.close();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:11:45.320

由于 Jar 文件基本上是具有不同文件类型扩展名的 zip 文件，因此您可以使用[ZipFileSystemProvider将 jar 文件挂载为](http://docs.oracle.com/javase/7/docs/technotes/guides/io/fsp/zipfilesystemprovider.html)[java.nio.file.FileSystem](http://docs.oracle.com/javase/7/docs/api/java/nio/file/FileSystem.html)

然后使用[Files.copy(fromPath,toPath,replace)](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#copy%28java.nio.file.Path,%20java.nio.file.Path,%20java.nio.file.CopyOption...%29)复制文件。这将使 jar 中的其他文件保持不变，并且可能会快很多。

```
public class Zipper {

    public static void main(String [] args) throws Throwable {
        Path zipPath = Paths.get("c:/test.jar");

        //Mount the zipFile as a FileSysten
        try (FileSystem zipfs = FileSystems.newFileSystem(zipPath,null)) {

            //Setup external and internal paths
            Path externalTxtFile = Paths.get("c:/test1.txt");
            Path pathInZipfile = zipfs.getPath("/test1.txt");          

            //Copy the external file into the zipfile, Copy option to force overwrite if already exists
            Files.copy(externalTxtFile, pathInZipfile,StandardCopyOption.REPLACE_EXISTING);

            //Close the ZipFileSystem
            zipfs.close();
        } 
    }
} 
```

# css - iPad Zoom Out 中断居中

> ID：14252157
> 
> 赞同：0
> 
> 时间：2013-01-10T06:39:03.080
> 
> 标签：css, ipad

我整天都在为这个最随机的问题而苦苦挣扎。在我的 WordPress 主题中的单个帖子/文章中，该网站在 iPad 上加载良好，然后如果您“展开”以缩小，您会遇到屏幕截图中显示的这个奇怪的边距/居中问题。基本上，自动边距被忽略，整个站点向左移动。

我被告知这不会发生在任何其他页面（例如主页或类别存档页面）上，但由于我自己实际上并不拥有设备，所以我无法测试。

根据我的测试人员的说法，修复中存在一个不正确关闭的 div，但似乎并没有解决问题。我也已经重新编写了标记以更接近地模仿其他非问题页面的标记，并删除了任何棘手的绝对定位，所以我几乎不知道还有什么会导致这种情况。

[演示链接](http://client.kathyisawesome.com/eli-and-edythe-broad-art-museum4/)

![ipad 缩小了](../Images/66311c3ba7c1ecf6e5d940750aadba78.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:04:06.617

我刚刚在我的 iPad 3 上检查过，页面似乎完全居中。即使在缩放之后。

# spring - 如何使用注释从spring控制器中的messages.properties文件中访问属性

> ID：14252159
> 
> 赞同：9
> 
> 时间：2013-01-10T06:39:04.420
> 
> 标签：spring, spring-mvc

如何使用注释从 spring 控制器中的 messages.properties 文件中访问属性。

请举个例子。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-08-17T18:37:14.290

我使用了 MessageSource ：

```
@Autowired
private MessageSource messageSource;

...

private EventByDate createDefaultEventByDate(String date, Long barId, String locale) {
    Event defaultEvent = new Event();
    Locale localeValue = new Locale(locale);
    defaultEvent.setTitle(messageSource.getMessage("default.event.title", null, "DefaultTitle", localeValue));
    defaultEvent.setText(messageSource.getMessage("default.event.text", null, "DefaultText", localeValue));
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:52:52.477

首先，您需要在 dispatcher-servlet.xml 文件中定义属性占位符，如下所示。

```
<util:properties id="messageProperties" location="/messages.properties"/> 
```

您需要更改 messages.properties 文件的路径。

然后您可以在`@Value`注释的帮助下访问属性文件值。

```
private @Value("#{messageProperties['your.message.code']}") String message; 
```

希望这对您有所帮助。干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T06:14:01.940

![message.properties 文件位置](../Images/48e98b3e856f1201d2150e12a7ef6880.png)

以下是 dispatcher-servlet.xml

```
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd http://www.springframework.org/schema/context  http://www.springframework.org/schema/context/spring-上下文.xsd ">

`<context:annotation-config/>
<util:properties id="messageProperties" location="/messages.properties"/></beans></pre>` 

正如你提到的控制器，我对我的属性使用相同的代码。并且它无法解析@Value 注释。

```

# android - 直接调用是否真的调用实例化对象中定义的方法？

> ID：14252163
> 
> 赞同：2
> 
> 时间：2013-01-10T06:39:23.547
> 
> 标签：android, dalvik, smali

我有一些测试代码，这是一个`ConcreteClass`继承`AbstractClassForInterface1`. 在为构造函数生成的 smali 代码中`ConcreteClass`：

```
# direct methods
.method public constructor <init>()V
    .locals 0

    .prologue
    .line 4
    invoke-direct {p0}, Lorg/ucomb/AbstractClassForInterface1;-><init>()V 

    return-void
.end method 
```

`p0`实际上是 type 的实例化对象`ConcreteClass`，因为它来自实例化：

```
new-instance v0, Lorg/ucomb/ConcreteClass1;

invoke-direct {v0}, Lorg/ucomb/ConcreteClass1;-><init>()V 
```

并且很容易理解，对象`v0`有方法`Lorg/ucomb/ConcreteClass1;-><init>()V`，

然后在正文中，为什么要像这样使用`invoke-direct`on`p0`来调用超类的构造函数：

`invoke-direct {p0}, Lorg/ucomb/AbstractClassForInterface1;-><init>()V` ?

不`invoke-direct`应该在没有虚拟方法解析的情况下调用方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:40:22.493

调用直接方法时，会指定被调用的确切方法。在这种情况下，`Lorg/ucomb/AbstractClassForInterface1;-><init>()V`。这不是虚拟表查找 - 它保证是`AbstractClassForInterface1`构造函数。如果它是一个虚拟表查找，它将解析为该`<init>()V`方法的最专门的覆盖，这将是`<init>()V`您的 ConcreteClass1 类中的方法。

# youtube - Youtube 视频上传到用户墙

> ID：14252164
> 
> 赞同：0
> 
> 时间：2013-01-10T06:39:23.650
> 
> 标签：youtube, facebook-wall

我使用 Facebook PHP SDK 在 FB 用户墙中上传了一个 YouTube 视频。我在 Graph API 的“/USER_ID/feed/”中使用了“source”选项。USER_ID 是登录用户的 Facebook ID。

我的代码运行良好。但是 Facebook 对其 API 进行了一些更改，并且代码不再有效。仅显示 Youtube 视频图像，但 Youtube 视频未在 facebook 中播放。

我的代码如下所示：-

```
$params =   array(
                    'access_token'  =>  $fbToken,
                    'message'       =>  $name.' has shared a Vhybe',
                    'link'          =>  $link,
                    'name'          =>  'Vhybe Social',
                    'caption'       =>  $title,
                    'description'   =>  $content
                    );

$sourceUrl  =   "https://www.youtube.com/v/".$videoId;
$imageUrl   =   "http://i4.ytimg.com/vi/".$videoId."/default.jpg";
$params['source']   =   $sourceUrl;
$params['picture']  =   $imageUrl;

$result = $facebook->api(
    '/'.$userId.'/feed/',
    'POST',
    $params
); 
```

我尝试了 Facebook 开发人员工具部分 URL => [https://developers.facebook.com/tools/中的“Graph API explorer”工具](https://developers.facebook.com/tools/)

但我得到了相同的结果。

如果上述将 Youtube 视频上传到用户墙的过程已被弃用，您能否建议我一个替代过程。

提前致谢。

真挚地，

苏拉夫·慕克吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:05:02.997

那么上面的代码又可以正常工作了。我没有对我的代码进行任何更改。

看起来 Facebook 纠正了他们自己的问题。

真挚地，

苏拉夫·慕克吉

# wix - 在创建 ApplicationPool 后执行 SQLStrings WIX

> ID：14252171
> 
> 赞同：0
> 
> 时间：2013-01-10T06:39:55.293
> 
> 标签：wix, wix3.6

我需要为我的数据库添加一个用户`IIS AppPool\MyAppPool`。我需要执行简单的查询

```
CREATE LOGIN [IIS AppPool\MyAppPool] FROM WINDOWS 
```

我`<sql:SQLString>`在 WiX 中使用元素。我使用`<iis:WebAppPool>`扩展来创建 ApplicationPool。

但是应用程序池是在执行 SQL 字符串**后**创建的，所以我`"User or group doesn't exist"`从 SQL Server 收到错误。

创建 ApplicationPool 后是否可以执行 SQL 字符串？或者也许可以`ExecuteSqlStrings`手动排序？

这很奇怪，但是如果我在之后添加自己的自定义操作（调用`sqlcmd.exe`并执行查询）`ConfigureIIs`，一切正常。但我不喜欢这样的解决方案，我想使用等是更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:58:49.177

我和你有同样的问题，并试图在 ConfigureIIs 之后安排 ExecuteSqlStrings 无济于事。我在我们制作的一些旧安装程序中进行了搜索，并设法找到了一个需要完成相同任务的安装程序。它没有调度 ExecuteSqlStrings，而是在 ConfigureIIs 之后调度 InstallSqlData。改为尝试（1），现在安装正常。我不知道 InstallSQLData 和 ExecuteSqlStrings 之间有什么不同的细节（从逻辑上讲，你会认为你需要使用后者），但这对我有用，希望对你也有用。

# java - Java 的 Mac 文件/目录创建问题

> ID：14252174
> 
> 赞同：0
> 
> 时间：2013-01-10T06:40:04.303
> 
> 标签：java, macos, io

我一直在为一群 Minecrafters 和他们的 Modpack 编写程序，该程序是一个自定义启动器。问题是当 Mac-OSX 用户尝试使用该程序时，它的文件夹存在问题`/Users/<username>/Library/Application Support/.melbvicminecraft/`，我知道这是一个权限问题，但我想找到一种方法让他们使用该应用程序而不需要他们拥有 root权限。

主.java：

```
public static File getMinecraftDir()
{
    String os = getOS();
    String userHome = System.getProperty("user.home", ".");

    if(os == "win")
    {
        String appdata = System.getenv("APPDATA");
        String location = appdata != null ? appdata : userHome;

        return new File(location);
    }
    else if(os == "mac")
    {
        return new File(userHome, "Library/Application Support/");
    }
    else
        return new File(userHome);
} 
```

MinecraftLoginThread.java：

```
/**
 * Make a new Minecraft login handler with the selected dir
 * 
 * @param settings Settings file located on the <strong>server</strong>
 * @param server The content server
 * @param minecraftDir minecraftDir The selected Minecraft dir
 */
public MinecraftLoginThread(SettingsFile settings, String server, File minecraftDir)
{
    try 
    {           
        UIManager.setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel");
    } 
    catch (Exception e) 
    {
        try 
        {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        }
        catch(Exception e1)
        {
            e1.printStackTrace();
        }
    }

    try
    {
        Main.logger.debug("Minecraft dir: " + minecraftDir.getAbsolutePath());
        Main.logger.debug("Minecraft exists: " + minecraftDir.exists());

        if(!minecraftDir.exists())
        {
            try 
            {
                minecraftDir.setWritable(true);
                minecraftDir.setReadable(true);

                if(minecraftDir.mkdirs())
                    Main.logger.debug("Made new Minecraft dir: " + minecraftDir.getAbsolutePath());
                else
                    Main.killError("Failed to make new Minecraft dir!");
            } 
            catch (Exception e) { Main.killError(e.toString()); }
        }

        if(!(new File(minecraftDir, "lastLogin").exists()))
            (new File(minecraftDir, "lastLogin")).createNewFile();

        this.lastLogin = new SettingsFile((new File(minecraftDir, "lastLogin")));
        this.lastLogin.load();
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }

    this.settings = settings;
    this.server = server;
    this.backgroundManager = new BackgroundManager(server + settings.getSetting("net.melbvicmc.launcher.mlbl"));
    this.mcDir = minecraftDir;
    this.optionsDialog = new MinecraftOptionsDialog(this);
    loadJFrameLayout();
} 
```

这是来自 Mac 的日志：[The log](http://pastebin.com/BviSi9Ss "粘贴箱")

该应用程序可以在这里找到：[启动器下载](http://hachisoftware.com/data/melbvicminecraft/Melb-Vic%20Minecraft.jar "启动器下载")

# applet - 加载具有指定旧 JRE 版本而不是最新安装的小程序

> ID：14252176
> 
> 赞同：0
> 
> 时间：2013-01-10T06:40:15.223
> 
> 标签：applet, java, classnotfoundexception

我希望使用 JRE 版本 1.6.0_14 加载我的小程序。我已经安装了更新 14、17、24 和 35。我正在使用`<object>`标签`classid`来加载更新 14 的版本。

在这种情况下，小程序加载更新 35，然后再次加载更新 14。在更新 35 的 Java 控制台上没有发现错误，在更新 1.6.0_14 的 Java 控制台上，我们看到以下错误。

```
java.lang.ClassNotFoundException: sun/net/www/protocol/http/NTLMAuthenticationCallback 
```

如何避免使用更高版本的 JRE？以及如何避免类未找到错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:06:01.190

使用较低版本的 JRE 运行存在严重的安全风险。当您运行自己的小程序时，不是因为您信任自己的代码。但其他人应该拒绝运行它。在使用未安装最新版本 JRE 的浏览器浏览网络时，您自己应该小心。

JRE 安装程序将 Java 插件安装到您的浏览器中，并且始终会启动一个插件版本，与您请求的 Java 版本无关。然后，插件将在您的对象标记的 classid 中​​指定的 JRE 中运行小程序。插件可用的版本可在 Java 控制面板中配置。

这就留下了为什么您的应用程序不能使用最新版本的 java 1.6 运行的问题。该插件在 1.6.0_something 中进行了大修，成为所谓的下一代插件。也许这就是给你带来麻烦的原因。您可以在 Java 控制面板的高级选项卡中表明您希望在您的机器上使用旧插件。（“启用下一代 Java 插件（需要重新启动浏览器”）。我认为知道禁用下一代插件是否能解决您的问题很有趣。

# c# - 如何正确地将 Popup 绑定到 ToggleButton？

> ID：14252180
> 
> 赞同：24
> 
> 时间：2013-01-10T06:40:27.283
> 
> 标签：c#, wpf, xaml, popup, togglebutton

我正在尝试做一些从用户界面级别看起来相对简单和逻辑的事情，但我有一个非常烦人的错误。我有一个`ToggleButton`，我试图在`Popup`切换按钮时显示一个，并在切换按钮时隐藏`Popup`。当`Popup`用户点击离开它时，它也会隐藏。

以下 XAML 的一切都按预期工作，除非我在显示后单击切换按钮`Popup`，`Popup`然后消失一瞬间然后重新出现。

我怀疑这里发生的事情是点击离开`Popup`按钮会导致它关闭按钮，然后在鼠标点击按钮重新打开按钮后立即关闭它。我只是不知道如何修复它。

任何帮助表示赞赏。谢谢。

```
 <ToggleButton x:Name="TogglePopupButton" Content="My Popup Toggle Button" Width="100" />

    <Popup StaysOpen="False" IsOpen="{Binding IsChecked, ElementName=TogglePopupButton, Mode=TwoWay}">
        <Border Width="100" Height="200" Background="White" BorderThickness="1" BorderBrush="Black">
            <TextBlock>This is a test</TextBlock>
        </Border>                
    </Popup> 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-10T11:55:20.027

Stephans 的回答有一个缺点，即当它失去焦点时关闭弹出窗口的期望行为也会消失。

我通过在弹出窗口打开时禁用切换按钮来解决它。另一种方法是使用 IsHitTestVisible 属性而不是启用：

```
 <ToggleButton x:Name="TogglePopupButton" Content="My Popup Toggle Button" Width="100"  IsEnabled="{Binding ElementName=ToggledPopup, Path=IsOpen, Converter={StaticResource BoolToInvertedBoolConverter}}"/>
    <Popup x:Name="ToggledPopup" StaysOpen="False" IsOpen="{Binding IsChecked, ElementName=TogglePopupButton, Mode=TwoWay}">
        <Border Width="100" Height="200" Background="White" BorderThickness="1" BorderBrush="Black">
            <TextBlock>This is a test</TextBlock>
        </Border>                
    </Popup> 
```

转换器如下所示：

```
public class BoolToInvertedBoolConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value is bool)
        {
            bool boolValue = (bool)value;
            return !boolValue;
        }
        else
            return false;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException("ConvertBack() of BoolToInvertedBoolConverter is not implemented");
    }
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-12-24T12:48:09.957

没有 IValueConverter 的解决方案：

```
<Grid>
    <ToggleButton x:Name="TogglePopupButton" Content="My Popup Toggle Button" Width="100" >
        <ToggleButton.Style>
            <Style TargetType="{x:Type ToggleButton}">
                <Setter Property="IsHitTestVisible" Value="True"/>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding ElementName=Popup, Path=IsOpen}" Value="True">
                        <Setter Property="IsHitTestVisible" Value="False"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </ToggleButton.Style>
    </ToggleButton>

    <Popup StaysOpen="false" IsOpen="{Binding IsChecked, ElementName=TogglePopupButton, Mode=TwoWay}"
               PlacementTarget="{Binding ElementName=TogglePopupButton}" PopupAnimation="Slide" 
           x:Name="Popup">
        <Border Width="100" Height="200" Background="White" BorderThickness="1" BorderBrush="Black">
            <TextBlock>This is a test</TextBlock>
        </Border>
    </Popup>
</Grid> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-27T21:06:44.670

在 ToggleButton 上设置属性`ClickMode="Press"`[apixeltoofar](https://apixeltoofar.wordpress.com/2012/11/16/the-great-wpf-togglebutton-and-popup-conundrum/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-10T06:45:39.753

`StaysOpen="True"`为您设置`Popup`

来自[MSDN](http://msdn.microsoft.com/library/system.windows.controls.primitives.popup.staysopen.aspx)：

> 获取或设置一个值，该值指示当控件不再处于焦点时是否关闭 Popup 控件。
> 
> [...]
> 
> `true`如果控件在属性设置`Popup`为时关闭；`IsOpen``false`
> 
> `false`如果在`Popup`控件外部发生鼠标或键盘事件时控件关闭`Popup`。

# java - Google Plugin for Eclipse 安装错误

> ID：14252181
> 
> 赞同：0
> 
> 时间：2013-01-10T06:40:31.917
> 
> 标签：java, eclipse, gwt, eclipse-plugin, google-plugin-eclipse

我刚刚下载了 Eclipse 和 Google 插件，开始从源代码编译 Google Web Toolkit 并使用它构建示例应用程序。但是，在安装插件后，我收到此错误：http: [//i.imgur.com/9vJx3.png](http://i.imgur.com/9vJx3.png)

从错误的外观来看，我想说这实际上可能与谷歌有关，除非我遗漏了一些非常明显的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T06:54:09.423

试试这个帮助 - >安装新软件 - > paht：http: [//dl.google.com/eclipse/plugin/4.2](http://dl.google.com/eclipse/plugin/4.2)

你试过同样的链接吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T06:47:20.047

您是否以管理员身份运行 Eclipse？如果您不这样做，某些软件源会很挑剔。我知道我在安装 Android 工具 SDK 时遇到了类似的问题。

如果有帮助，我还从[这个问题中找到了](https://stackoverflow.com/questions/10152818/error-installing-google-appengine-plugin-in-eclipse-juno-4-2)[这些说明。](https://developers.google.com/eclipse/docs/install-eclipse-4.2)

# c# - 如何在多线程 C# 中使用 TCP 客户端/侦听器？

> ID：14252182
> 
> 赞同：5
> 
> 时间：2013-01-10T06:40:30.467
> 
> 标签：c#, tcp, network-programming, tcpclient, tcplistener

我为我的服务器编写了这段代码：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;
    using System.Net;
    using System.Threading;
    using System.Net.Sockets;
    using System.IO;

namespace ConsoleApplication1
{
    class Program
    {
        private static bool terminate;

        public static bool Terminate
        {
            get { return terminate; }
        }

        private static int clientNumber = 0;
        private static TcpListener tcpListener;

        static void Main(string[] args)
        {
            StartServer();
            Console.Read();
        }

        private static void StartServer()
        {
            try
            {
                Console.WriteLine("Server starting...");
                tcpListener = new TcpListener(IPAddress.Parse("127.0.0.1"), 8000);
                terminate = false;
                tcpListener.Start();
                tcpListener.BeginAcceptTcpClient(ConnectionHandler, null);
                Console.ReadLine();

            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
            finally 
            {
                Console.WriteLine("Server stopping...");
                terminate = true;
                if (tcpListener != null)
                {
                    tcpListener.Stop();
                }
            }
        }

        private static void ConnectionHandler(IAsyncResult result)
        {
            TcpClient client = null;

            try
            {
                client = tcpListener.EndAcceptTcpClient(result);
            }
            catch (Exception)
            {
                return;
            }

            tcpListener.BeginAcceptTcpClient(ConnectionHandler, null);

            if (client!=null)
            {
                Interlocked.Increment(ref clientNumber);
                string clientName = clientNumber.ToString();
                new ClientHandler(client, clientName);
            }
        }
    }
}

   class ClientHandler
    {
        private TcpClient client;
        private string ID;

        internal ClientHandler(TcpClient client, string ID)
        {
            this.client = client;
            this.ID = ID;
            Thread thread = new Thread(ProcessConnection);
            thread.IsBackground = true;
            thread.Start();
        }

        private void ProcessConnection()
        {
            using (client)
            {
                 using (BinaryReader reader=new BinaryReader(client.GetStream()))
                 {
                     if (reader.ReadString()==Responses.RequestConnect)
                     {
                          using (BinaryWriter writer=new BinaryWriter(client.GetStream()))
                          {
                              writer.Write(Responses.AcknowledgeOK);
                              Console.WriteLine("Client: "+ID);
                              string message = string.Empty;
                              while (message!=Responses.Disconnect)
                              {
                                  try
                                  {
                                      message = reader.ReadString();
                                  }
                                  catch
                                  {
                                      continue;
                                  }
                                  if (message==Responses.RequestData)
                                  {
                                      writer.Write("Data Command Received");
                                  }
                                  else if (message==Responses.Disconnect)
                                  {
                                      Console.WriteLine("Client disconnected: "+ID);
                                  }
                                  else
                                  {
                                      Console.WriteLine("Unknown Command");
                                  }
                              }
                          }
                     }
                     else
                     {
                         Console.WriteLine("Unable to connect client: "+ID);
                     }
                 }
            }
        }
    }

   class Responses
    {
        public const string AcknowledgeOK = "OK";
        public const string AcknowledgeCancel = "Cancel";
        public const string Disconnect = "Bye";
        public const string RequestConnect = "Hello";
        public const string RequestData = "Data";
    } 
```

此代码以多线程方式侦听客户端请求。我无法理解如何区分连接到我的此服务器的不同客户端以及哪个客户端正在断开连接并请求不同的命令。

我的客户代码是：

```
private static void clietnRequest(string message,ref string response)
{
    using (TcpClient client = new TcpClient())
    {
        if (!client.Connected)
        {
            client.Connect(IPAddress.Parse("127.0.0.1"), 8000);
            using (NetworkStream networkStream = client.GetStream())
            {
                using (BinaryWriter writer = new BinaryWriter(networkStream))
                {
                    writer.Write(Responses.RequestConnect);
                    using (BinaryReader reader = new BinaryReader(networkStream))
                    {
                        if (reader.ReadString() == Responses.AcknowledgeOK)
                        {
                            response = Responses.AcknowledgeOK;

                        }
                    }
                }
            }
        }
    }
} 
```

这段代码将客户端连接到服务器，但我无法再发送消息。如果客户端已连接，我想在我的应用程序中然后他可以向服务器发送命令。而不是每次都这样做，而是充当服务器的新客户端。我在这里遗漏了一些东西，请引导我朝着正确的方向前进。我对 c# 网络编程完全陌生。请帮助我改进我的代码。Tcp Listener 和 Tcp Client 对这种情况有效还是我需要使用 Sockets？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T06:58:32.843

每次发送消息后，您都会在客户端关闭连接，如果您想这样做没有任何问题，但您需要向服务器发送某种形式的标识，以便它可以判断这不是新的连接，但旧连接第二次连接。这正是`HTTP`协议正在做的事情，“识别”是互联网 cookie。

如果您不经常传输数据，则第一个选项很好，但如果您更频繁地传输数据，则需要保持连接打开。

基本上，您需要从客户端请求函数中执行连接和断开连接的操作，并将打开的连接作为参数传入。

```
private void MainCode()
{
    using (TcpClient client = new TcpClient())
    {
        client.Connect(IPAddress.Parse("127.0.0.1"), 8000);

        while(variableThatRepresentsRunning)
        {
            //(Snip logic that gererates the message)

            clietnRequest(message, ref response, client);

            //(Snip more logic)
        }
    }
}

private static void clietnRequest(string message,ref string response, TcpClient client)
{
    if (client.Connected)
    {
        using (NetworkStream networkStream = client.GetStream())
        {
            using (BinaryWriter writer = new BinaryWriter(networkStream))
            {
                writer.Write(Responses.RequestConnect);
                using (BinaryReader reader = new BinaryReader(networkStream))
                {
                    if (reader.ReadString() == Responses.AcknowledgeOK)
                    {
                        response = Responses.AcknowledgeOK;

                    }
                }
            }
        }
    }
    else
    {
        //Show some error because the client was not connected
    }
} 
```

通过这样做，`client`对象服务器端代表客户端，每个连接的客户端都有一个实例，并且将保持与该客户端的关联，直到他断开连接。如果要跟踪所有连接的客户端，则需要将它们全部插入到某个集合中，例如`List<TcpClient>`（使用[并发集合](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx)或使用锁定，因为您是多线程的），然后您将拥有所有客户端的列表（您需要让客户端自行清理，以便在断开连接后将自己从列表中删除）。

# android - 如何让我的自定义键盘始终以全屏模式显示？

> ID：14252184
> 
> 赞同：0
> 
> 时间：2013-01-10T06:40:33.950
> 
> 标签：android, android-keypad

我试过这个[如何为平板电脑开发自定义“非全屏”软键盘？](https://stackoverflow.com/questions/8048064/how-can-i-develop-a-custom-non-fullscreen-softkeyboard-for-tablets)使其成为全屏模式但仍然不是全屏:(

而且我还在我的代码中尝试了以下内容

```
 @Override
    public boolean onEvaluateFullscreenMode() {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean isFullscreenMode() {
        // TODO Auto-generated method stub
        return true;
    }

    @Override
    public void setExtractViewShown(boolean shown) {
        // TODO Auto-generated method stub

        super.setExtractViewShown(true);
    } 
```

没有按预期工作，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:09:27.347

覆盖 InputmethodService 中的以下两个方法，如下所示

```
 @Override
    public void onUpdateExtractingVisibility(EditorInfo ei) {
        // TODO Auto-generated method stub
        setExtractViewShown(true);
    }

 @Override
    public boolean onEvaluateFullscreenMode() {

        return true;
    } 
```

这对我有用:)

# google-apps-script - 将 GDoc 上的文本、图像、表格、所有格式、边距复制到另一个

> ID：14252185
> 
> 赞同：3
> 
> 时间：2013-01-10T06:40:34.070
> 
> 标签：google-apps-script, google-docs

在尝试了一些邮件合并脚本之后，我决定不自己编写。我的合并脚本作为单独的文件运行，它从 GDoc 中读取模板，从 GSpreadsheet 中读取数据，并将其合并到 Gmail 或新的 GDoc 中 - 每 SS 行一个页面/电子邮件。

问题是它不会将文本格式、边距或图像复制到 Gmail 或新 GDoc 中……只有纯文本。

我正在使用**DocumentApp.openById > getActiveSection > getText()**来捕获文本。

这是 GDoc [http://goo.gl/fO5vP](http://goo.gl/fO5vP)中的代码 我似乎无法共享脚本，因此我不得不将其放入文档中。将其复制到新脚本中，它将进行颜色编码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T07:16:05.893

您应该首先使用复制模板，`DocsList`以便从“完整”的初始文档开始。

```
 var template = DocsList.getFileById(docIDs[0]);// get the template model, in this sample I had an array of possible templates, I took the first one
  var newmodelName=template.substr(0,11)+'multipage'+template.substring(18);// define a new name, do what you need here...
  var baseDocId = DocsList.copy(template,newmodelName).getId();// make a copy of firstelement and give it new basedocname build from the serie(to keep margins etc...)
  var baseDoc = DocumentApp.openById(baseDocId);// this is the new doc to modify 
```

然后使用具有直接[replaceText 方法的](https://developers.google.com/apps-script/class_document#replaceText)[文档类](https://developers.google.com/apps-script/class_document)

* * *

编辑：关于你的次要问题，这里有一个关于你如何做的建议。它工作得很好，除了`inlineImage`，我会继续看这个。您还可以通过添加其他元素类型来使脚本更加通用......

```
function myFunction() {
  var template = DocsList.getFileById(key);// get the template model
  var newmodelName='testcopy';// define a new name, do what you need here...
  var baseDocId = DocsList.copy(template,newmodelName).getId();// make a copy of firstelement and give it new basedocname build from the serie(to keep margins etc...)
  var baseDoc = DocumentApp.openById(baseDocId);// this is the new doc to modify
  var body = baseDoc.getActiveSection();
  body.appendPageBreak();
  var totalElements = body.getNumChildren();
  for( var j = 0; j < totalElements; ++j ) {
    var element = body.getChild(j).copy();
    var type = element.getType();
    if( type == DocumentApp.ElementType.PARAGRAPH )
      body.appendParagraph(element);
    else if( type == DocumentApp.ElementType.TABLE )
      body.appendTable(element);
    else if( type == DocumentApp.ElementType.LIST_ITEM )
      body.appendListItem(element);
    else if( type == DocumentApp.ElementType.INLINE_IMAGE )
      { var blob = body.getChild(j).asInlineImage().getBlob();
       body.appendImage(blob); }
  }
} 
```

* * *

**编辑 2**感谢[@Fausto](https://stackoverflow.com/users/1634207/fausto-r)，这是一个完整的工作版本。内联图像包含在一个段落中，因此我们必须再挖一层才能获得 blob...

```
function myFunction() {
  var template = DocsList.getFileById(key);// get the template model
  var newmodelName='testcopy';// define a new name, do what you need here...
  var baseDocId = DocsList.copy(template,newmodelName).getId();// make a copy of firstelement and give it new basedocname build from the serie(to keep margins etc...)
  var baseDoc = DocumentApp.openById(baseDocId);// this is the new doc to modify
  var body = baseDoc.getActiveSection();
  body.appendPageBreak();
  var totalElements = body.getNumChildren();
  for( var j = 0; j < totalElements; ++j ) {
    var element = body.getChild(j).copy();
    var type = element.getType();
    if (type == DocumentApp.ElementType.PARAGRAPH) {
      if (element.asParagraph().getNumChildren() != 0 && element.asParagraph().getChild(0).getType() == DocumentApp.ElementType.INLINE_IMAGE) {
        var blob = element.asParagraph().getChild(0).asInlineImage().getBlob();
        body.appendImage(blob);
      }
      else body.appendParagraph(element.asParagraph());
    }
    else if( type == DocumentApp.ElementType.TABLE )
      body.appendTable(element);
    else if( type == DocumentApp.ElementType.LIST_ITEM )
      body.appendListItem(element);
  }
} 
```

# javascript - 查找与文档相关的下一个类 - jQuery

> ID：14252186
> 
> 赞同：0
> 
> 时间：2013-01-10T06:40:36.767
> 
> 标签：javascript, jquery, dom, find

嘿，我需要一些帮助，我已经制作了这个画廊插件，现在我需要一种方法来找到下一个类，该类相对于文档调用插件，以防图像位于不同的父 div 中？检查下面的代码

```
<!-- HTML -->
<div id="a">
    <img class="image" src="/gallery/a.png" style="max-width:200px;max-height:200px;"/>
</div>
<div id="b">
    <img class="image" src="/gallery/b.jpg" style="max-width:200px;max-height:200px;"/>
</div>
<div id="c">
    <img class="image" src="/gallery/c.jpg" style="max-width:200px;max-height:200px;"/>
</div>

// jQuery
$('.image').imageGallery();

var next = $(self).next().attr("src"); // "Self" being the current image its on 
```

仅当所有图像都位于同一个父 div 中时，上述方法才可行，但我希望能够获得相对于身体具有相同类的所有图像。

非工作示例：

```
$("body").find(self).next() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:18:13.407

存储您应用`.imageGallery();`一次的所有图像，然后重复使用该列表：

```
var images = $('.image');
images.imageGallery();

var next = images.eq( images.index(self) + 1 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T06:44:31.937

你可以试试这个：

```
var images = $("body").find("img");
var next = images[images.index(self) + 1];
source = $(next).attr('src'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T06:54:16.370

您可以使用以下代码：

`$(self).parent().next().child().attr("src");`

我知道这似乎还有很长的路要走，但这可能会有所帮助。

# c# - 在搜索菜单中输入项目时展开 xamgrid 项目

> ID：14252192
> 
> 赞同：0
> 
> 时间：2013-01-10T06:41:18.967
> 
> 标签：c#, silverlight-4.0, infragistics, xamgrid

我创建了一个 XamGrid，其中我有一个三层层次结构。我在silverlight 4 中创建了它。我在xamgrid 上方有一个搜索文本框，它是一个自动完成框。当我从 AutocompleteBox 中选择一个项目并按下回车键时，我希望 Grid 中的该项目得到扩展。我怎样才能做到这一点？？请建议..我的自动完成 bos 是：

```
<local:ExtendedAutoCompleteBox
                            x:Name="InvNamesSearch"
                            WaterMark="TypeName"
                            HorizontalAlignment="Left" VerticalAlignment="Center" 
                            Width="300" Margin="5,0,0,0"
                            MinimumPrefixLength="3"   
                            IsTextCompletionEnabled="False"
                            Text="{Binding InvestmentText, Mode=TwoWay}"
                            ItemsSource="{Binding A,Mode=OneWay}"
                            SelectedItem="{Binding Path=B, Mode=TwoWay}"                                                
                            ValueMemberBinding="{Binding A}"                            
                            FilterMode="Contains" Canvas.Left="683" Canvas.Top="9"
                            Command="{Binding AutoSuggestEnterCommand}">
                    <local:ExtendedAutoCompleteBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock x:Name="txtAutoSelectedItem" Text="{Binding A}"  />
                        </DataTemplate>
                    </local:ExtendedAutoCompleteBox.ItemTemplate>
                </local:ExtendedAutoCompleteBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:26:51.933

XamGrid 有一个 Rows 属性，它是所有根级别行的集合。您可以遍历这些行及其子行，以查找在自动完成框中搜索的数据。找到数据后，您可以将相应行的 IsExpanded 属性设置为 true。代码可能如下所示：

```
// This function returns a row that contains the supplied search criteria
public Row FindRowFromAutoCompleteBox(RowCollection rootRows, string searchCriteria)
{
    foreach (Row row in rootRows)
    {
        if (row.Data is LevelOneDataType)
        {
            if ((row.Data as LevelOneDataType).LevelOneProperty == searchCriteria)
                return row;
        }
        if (row.Data is LevelTwoDataType)
        {
            if ((row.Data as LevelTwoDataType).LevelTwoProperty == searchCriteria)
                return row;
        }
        if (row.Data is LevelThreeDataType)
        {
            if ((row.Data as LevelThreeDataType).LevelThreeProperty == searchCriteria)
                return row;
        }
        // Search child rows.
        if (row.ChildBands.Count != 0)
        {
            Row result = FindRowFromAutoCompleteBox(row.ChildBands[0].Rows, searchCriteria);
            if (result != null)
                return result;
        }
    }

    return null;
}

// Walks up the hierarchy starting at the supplied row and expands parent rows as it goes.
public void ExpandHierarchy(Row row)
{
    Row parentRow = null;

    // The row is a child of another row.
    if (row.ParentRow is ChildBand)
        parentRow = (row.ParentRow as ChildBand).ParentRow;

    while (parentRow != null)
    {
        // Expand the row.
        parentRow.IsExpanded = true;

        if (parentRow.ParentRow is ChildBand)
            parentRow = (parentRow.ParentRow as ChildBand).ParentRow;
        else
            parentRow = null;
    }
} 
```

使用这些功能，您现在可以搜索并扩展至您想要的行。

```
Row result = FindRowFromAutoCompleteBox(xamGrid1.Rows, "Value");
if (result != null)
{
    ExpandHierarchy(result);
    result.IsSelected = true;
} 
```

# php - bpopup 插件在循环的 PHP 脚本中关联一个 div 元素

> ID：14252196
> 
> 赞同：2
> 
> 时间：2013-01-10T06:41:36.923
> 
> 标签：php, joomla, bpopup

我在页面上使用带有多个弹出链接的 bpopup 以及每个链接的多个内容。要将 JQuery 与每个链接相关联，我使用 [id^="div_name"]。JS如下： -

```
$(document).ready(function()
{
    console.log( 'ready!' );
    $('[id^="click"]').bind('click', function(){
    $('[id^="profile"]').css('display','inline');
    $('[id^="profile"]').bPopup({
       modalClose: true
      , opacity: .8
      , positionStyle: 'fixed' 
      , fadeSpeed: 'slow'
      , followSpeed: 'slow'
      });
   });
}); 
```

相应的 PHP 脚本有：-

```
<?php
foreach($listings as $listing)
{   
        <a id="click" href="some url"><?php echo $listing->profile_link;?></a>
        <div id="profile" style="background-color:#fff; width:400px; height:400px; display:none; "><?php echo $listing->company_name; ?></div>
     } 
```

列表都与弹出操作相关联。但是，它们的内容与上一个相同`$listings->company_name`。但是，我希望内容具有单独的公司名称。我意识到我正在使用相同的 div-id 并且在浏览器上呈现内容后，它将最后一个与所有弹出窗口相关联。我该如何解决这个问题？

# ruby-on-rails - 如何处理删除多选复选框中的条目使用

> ID：14252200
> 
> 赞同：3
> 
> 时间：2013-01-10T06:42:14.230
> 
> 标签：ruby-on-rails

这是此处提出的问题的延续

[如何使用 ActiveRecord 将一对多对象添加到父对象](https://stackoverflow.com/questions/14210364/how-to-add-one-to-many-objects-to-the-parent-object-using-activerecord)

```
class Foo < ActiveRecord::Base
  has_many :foo_bars
end

class Bar < ActiveRecord::Base
end  

class FooBar < ActiveRecord::Base
  belongs_to :foo
  belongs_to :bar
end 
```

如何处理删除多选复选框中的条目用于表示一对多实体。我可以添加或更新条目，但删除似乎失败，因为**foo_id**似乎是空的，并且查询似乎正在更新而不是删除。

**编辑**：

我使用以下代码尝试了@charlysisto 建议

我的控制器代码如下：

```
 class Foo < ActiveRecord::Base
    has_many :foo_bars
    has_many :bars, :through => :foo_bars
  end

   def edit
    @foo = Foo.find(params[:id])
    @sites = Site.where(company_id: @current_user.company_id).all
   end

  def update
    @foo = Foo.find(params[:id])

    if @foo.update_attributes(params[:foo])
      flash[:notice] = "Foo was successfully updated"
      redirect_to foos_path
    else
      render :action => 'edit'
    end
   end 
```

查看代码如下：

```
<% @bars.each do |bar| %>
    <%= check_box_tag 'bar_ids[]', bar.id %>
    <%= bar.name %>
<% end %> 
```

所以我尝试了这些更改，但如果我删除了一条记录， foo_bars 似乎仍然没有反映这些更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T12:04:26.153

您的关联中缺少的是：

```
class Foo < ActiveRecord::Base
  has_many :bars, :through => :foo_bars
end 
```

... has_many（或 has_many :through）宏为您提供了大量方法，包括`bar_ids`和`bar_ids= [...]`

所以你需要在你的视图/控制器中做的就是：

```
# edit.html.haml which will send an array of bar_ids
=f.select :bar_ids, Bar.all.map {|b| [b.name, b.id]}, {}, :multiple => true

# foo_controller
@foo.update_attributes(params[:foo]) 
```

就是这样！无需手动设置或删除 FooController#update 中的关联...

# jquery - 使用 localhost 和服务器名称时的不同行为

> ID：14252202
> 
> 赞同：0
> 
> 时间：2013-01-10T06:42:20.033
> 
> 标签：jquery, asp.net, jquery-ui, iis, jquery-ui-draggable

![在此处输入图像描述](../Images/a8ccc23d2748453e2030f048d6a70074.png)我想在 div 内拖动图像，我使用 jQuery UI 可拖动功能做到了这一点。

HTML：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<script src="jQuery/jquery-1.8.3.min.js" type="text/javascript"></script>
<script src="jQuery/jquery-ui-1.9.2.custom.min.js" type="text/javascript"></script>
<script>
    $(document).ready(function () {
        $('#dragme').draggable();
    });
</script>
</head>
<body>
<div id="container" style="width:300px;height:300px;overflow:hidden;margin:auto;border:solid 1px black">
    <img src="http://img.thesun.co.uk/multimedia/archive/01650/greats_1650266a.jpg" id="dragme" />    
</div>
</body>
</html> 
```

[你可以在这里](http://jsfiddle.net/y6XVD/)看到演示。工作正常，但是，当我在 IIS 上托管相同的内容时，问题就开始了。当我使用 http://localhost/mysite 时，该页面在 Chrome 和 IE 上运行良好，但是当我在 IE 上使用 http://servername/mysite 时，该页面会被折腾。整个图像显示在 div 上。[（快照）](https://i.stack.imgur.com/r2IRv.png)。 ![错误页面的快照](../Images/a0b5e7f6753d1a1e779bc5afd6c95c82.png) 不过，我仍然可以拖动图像。

我不明白为什么会这样。我过去也遇到过问题，http://localhost/mysite 和 http://servername/mysite 的行为不同。

谁能解释为什么会这样？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T06:59:31.193

IE 在*兼容性视图 (IE9+)*中加载本地 Web 应用程序，而在 IE9+ 标准视图中加载外部网站。**这就是您在本地以IE7 文档模式**查看您的网站的原因。您可以通过按 F12 并更改为 IE9 文档模式来更改此设置。如果您想让您的 IE 在常规视图中加载本地站点，请`tools -> compatibility view settings`从那里删除 localhost。

# java - 将参数传递给从另一个方法获得的方法？

> ID：14252205
> 
> 赞同：0
> 
> 时间：2013-01-10T06:42:31.633
> 
> 标签：java, parameters, long-integer

我是 Java 新手，但我知道这些东西我只是有一个严重的大脑放屁。你可以帮帮我吗。我已经工作了 24 多个小时来编写代码，现在我很困惑。这是有问题的代码：

```
 public long getTheLong() {
    Scanner scano = new Scanner(System.in);
    System.out.println ("enter account number");
    acctNum = scano.nextLong();
    return acctNum;
}

public void searchById(long acctNum) {
// do something with acctNum
{ 
```

第一种方法返回`acctNum`用户输入获得的信息。我想在调用方法`acctNum`之后获取现在的任何内容`getTheLong()`并将其传递给以下方法`searchById(long acctNum)`。我怎么能做这样的事情？非常感谢，我知道这很愚蠢，但我现在很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:25:54.877

在你的java文件中试试这个

```
import java.util.Scanner;

public class TestProgram 
{

    public static void main(String[] args) 
    {
        long acctNum = getTheLong();
        searchById(acctNum);
    }

    public static long getTheLong() 
    {
        long acctNum = 0;
        Scanner scano = new Scanner(System.in);
        System.out.println ("enter account number");
        acctNum = scano.nextLong();
        return acctNum;
    }

    public static void searchById(long acctNum) 
    {
        // do something with acctNum
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T06:47:00.590

试试这个

```
public void searchById() {
    long acctNum = getTheLong();
    // do something with acctNum
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T06:43:57.317

```
long acctNum = getTheLong();
searchById(acctNum ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T06:43:58.970

您可以将一个函数的返回值作为参数传递给第二个函数，如下所示。

```
searchById(getTheLong()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T06:46:48.383

嗨把它放在返回语句之前
searchById(scano.nextLong()); 谢谢

# cakephp - 在 cakephp 中使用计数器缓存进行 HABTM 关联

> ID：14252207
> 
> 赞同：1
> 
> 时间：2013-01-10T06:42:44.453
> 
> 标签：cakephp, cakephp-2.1, cakephp-model

我有两个表：它的定义如下：

```
CREATE TABLE IF NOT EXISTS `users_correlations` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `correlated_id` int(11) NOT NULL,
  `type` char(1) NOT NULL,
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=11 ;

CREATE TABLE IF NOT EXISTS `users` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `username` varchar(100) NOT NULL,
  `first_name` varchar(50) NOT NULL,
  `last_name` varchar(50) NOT NULL,
  `password` varchar(100) NOT NULL,
  `role` varchar(2) NOT NULL,
  `gender` char(1) NOT NULL,
  `dob` date DEFAULT NULL,
  `location` varchar(100) NOT NULL,
  `photo` varchar(255) NOT NULL,
  `photo_dir` varchar(255) NOT NULL,
  `about_me` tinytext,
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `modified` datetime NOT NULL,
  `follower_count`  INT DEFAULT 0,
  `following_count` INT DEFAULT 0,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=42 ; 
```

现在我将HABTM关联定义如下：

```
 public $hasAndBelongsToMany=array(

      'Following'=>array(
               'className'=>'User',
               'joinTable'=>'users_correlations',
               'ForeignKey'=>'correlated_id',
               'associationForeignKey' => 'user_id'
       ),
       'Followers'=>array(
                'className'=>'User',
                'joinTable'=>'users_correlations',
                'ForeignKey'=>'user_id',
                'associationForeignKey' => 'correlated_id'
        )
    ); 
```

现在我想实施 Countercache 来跟踪追随者数量和追随者的记录..

我对我的模型使用 ConterCacheHabtm 行为

[http://bakery.cakephp.org/articles/danaki/2009/05/29/counter-cache-behavior-for-habtm-relations](http://bakery.cakephp.org/articles/danaki/2009/05/29/counter-cache-behavior-for-habtm-relations)

但对于我的协会来说，它不会更新我的 follower_count 和 following_count。请在这种情况下提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T09:48:04.217

```
 'Followers'=>array(
            'className'=>'User',
            'joinTable'=>'users_correlations',
            'ForeignKey'=>'user_id',
            'associationForeignKey' => 'correlated_id',
            'counterCache' => true
        ) 
```

您需要将其添加`'counterCache' => true`到数组中。其余的看起来应该可以正常工作。

# apple-push-notifications - APNS 免费通知限制

> ID：14252212
> 
> 赞同：0
> 
> 时间：2013-01-10T06:43:08.983
> 
> 标签：apple-push-notifications

在付费之前可以发送的免费 APNS 通知的数量是否有限制，还是无限制的免费通知？在这方面对 Apple 文档的一些参考会有所帮助。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T06:52:21.603

不是来自苹果。

苹果曾经在他们的网站上这样说，但随后改变了措辞：

![推送是免费的](../Images/0e02091969f226ee216bd72e794b909e.png)

如果您使用第 3 方发送这些消息，那么可能会有。例如， [Urban Airship](https://go.urbanairship.com/accounts/register)目前提供：

推送通知 100 万条免费推送消息/月。每条额外的推送消息 0.001 美元。每条 Rich Push 消息 0.0025 美元。

# json - 解析包含复杂数据的 Json 对象

> ID：14252215
> 
> 赞同：-2
> 
> 时间：2013-01-10T06:43:24.183
> 
> 标签：json, spring, jakarta-ee, jackson

无法解析包含两个简单字段和一个对象的 json 字符串。我使用杰克逊库。我总是得到 400 错误

JSON：

```
{
    "id": "",
    "categories": "{"name":"Sport","id":1}",
    "name": "sdsd"
} 
```

控制器：

```
@RequestMapping(method = RequestMethod.POST)
    public ResponseEntity<String> createCategory(HttpServletRequest request, @RequestBody Polls polls) {

        pollsService.add(polls);

        URI uri = new UriTemplate("{requestUrl}/{username}").expand(request.getRequestURL().toString(), polls.getId());
        final HttpHeaders headers = new HttpHeaders();
        headers.put("Location", Collections.singletonList(uri.toASCIIString()));
        return new ResponseEntity<String>(headers, HttpStatus.CREATED);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:04:30.470

> 包含两个简单的字段和一个对象。

这不是您在示例代码中发布的内容。可能旨在表示 JSON 的示例代码实际上不是有效的 JSON。它包含两个字符串元素，以及不是 JSON 的东西。

以下是与最初发布的内容类似的有效 JSON 示例。

```
{
    "id": "",
    "categories": {"name":"Sport","id":1},
    "name": "sdsd"
} 
```

# jquery - 附加了动态创建的标签的点击事件未触发

> ID：14252222
> 
> 赞同：0
> 
> 时间：2013-01-10T06:43:47.087
> 
> 标签：jquery, jquery-click-event

我正在动态创建一些标签。然后我试图将点击事件与他们联系起来。但这些事件并没有触发。

这是我的代码：

```
$(function() {
    onUploadReady();
});

var onUploadReady = function() {
    $('a[name=add]').on('click', function(event){
        event.stopPropagation();
        $('table#multiUpload').append('<tr><td style=\"text-align: center;\"><input type=\"file\" name=\"file\"/></td><td><a href="#" name="remove">Remove</a></td></tr>');
        return false;
    });

    $('a[name=remove]').on('click', function(event){
       event.stopPropagation();
       $(this).parents('tr').eq(0).remove(); 
       return false;
    });
} 
```

如果我这样做`$('a[name=remove]').live('click', function(event)`而不是`$('a[name=remove]').on('click', function(event)`，则事件正在触发。我在某处读到`live`不鼓励使用 of，我们应该使用`on`. 如果我们使用`live`. 那么我该如何解决这个问题呢？

[js小提琴](http://jsfiddle.net/tapas_23571113/uUZ9r/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T06:44:55.727

这样做：

```
$("parent_selector").on('click', 'a[name=remove]', function(e){
   //do something
}) 
```

如果`parent_selector`不知道，请`document`改用。

在您的示例中，您可以编写：

```
$("table#multiUpload").on('click', 'a[name=remove]', function(e){
   //do something
}) 
```

您使用的语法就像`bind`. 对于动态添加的元素，您应该使用上述语法。在此我们将处理程序附加到已经存在的父级，而不是新添加的元素。因此它将适用于将来添加的所有元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T06:47:17.320

采用：

```
$(document).on('click', 'a[name=remove]', function(e){
...
}); 
```

# oracle-adf - Oracle ADF 中 DataControl.cpx 和 Datacontrol.dcx 的区别

> ID：14252223
> 
> 赞同：0
> 
> 时间：2013-01-10T06:43:53.340
> 
> 标签：oracle-adf

`DataControl.dcx`在 Oracle ADF 中和有什么区别`DataControl.cpx`？什么去哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:24:25.923

查看[A.7 DataBindings.cpx上的文档](http://docs.oracle.com/cd/E15586_01/web.1111/b31974/appendixa.htm#CDJBBHIH)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T12:21:05.890

**Databindings.cpx- 数据绑定注册表**
Jdeveloper 第一次在数据绑定 UI 组件时创建
它，它有
**pageMap**映射所有用户界面 URL 和相应的页面定义使用名称。此映射在运行时用于将 URL 映射到其页面定义。
**pageDefinitionUsages**将页面定义用法（BindingContainer 实例）名称映射到相应的页面定义。id 属性表示使用 ID。path 属性表示页面定义的完整路径。
**dataControlUsages**声明数据控制用法列表（短名称）数据控制定义条目的对应路径在 datacontrols.dcx 文件中可用

**Datacontrols.dcx -Data Controls Registry**
列出项目中可用的 ADF 数据控件
它包含初始化要使用的数据控件所需的信息。特定服务（Java bean Web 服务，EJB） J 开发人员 在创建数据控件时创建此文件。此文件不是为 Oracle ADF 业务组件生成的

# http - Sitecore 使用“302 found”将用户重定向到我的自定义 404 页面 - 这合法吗？

> ID：14252235
> 
> 赞同：7
> 
> 时间：2013-01-10T06:44:40.823
> 
> 标签：http, http-status-code-404, sitecore, sitecore6, http-status-code-302

这更像是一个 HTTP 规范问题，而不是 Sitecore 问题。

我在 Sitecore 中设置了 404 错误页面：

```
<setting name="ItemNotFoundUrl" value="/404.aspx" /> 
```

因此，当用户访问一个不存在的页面（例如 www.example.com/xyz）时，他们会被重定向到我的自定义 404 页面（例如 www.example.com/404.aspx）。

Sitecore 使用 302 执行重定向，如下面的 Firebug 屏幕截图所示：

![302 找到重定向到 404 文件未找到](../Images/70a41bd154c2d263b7958eb817007819.png)

这是一个问题吗？即，Google 和其他搜索引擎会将我的 404 页面索引到 URL www.example.com/xyz 吗？有问题的站点最初设置为从 404 页面返回“200 OK”响应（糟糕！），因此每当搜索引擎发现站点的断开链接时，它们就会索引站点 404 页面。

我假设由于 302 只是一个重定向，因此最终（自定义 404）URL 的状态代码将是任何客户端都应该假设适用于初始（重定向）URL 的内容。

如果这*不是*问题，那么说明这一点的规范规范/文档是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T14:30:12.383

正如 Ruud 所建议的那样，[Kern Herskind 的一篇博客文章](http://herskind.co.uk/blog/2012/03/sitecore-404-without-302)使用了 Sitecore/IIS 方法，而无需编写任何额外的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T19:46:12.837

如前所述，正确的 http 响应标头至关重要，不仅对于 SEO，而且对于许多其他用例。

有一个名为“Sitecore 错误管理器”的 Sitecore 共享源模块，它可以让您的 Sitecore 安装响应正确的 404 标头，并附带一些其他功能，例如配置任何其他错误响应，即使是 Sitecore 媒体库（即 pdf 文件），多语言支持等

Sitecore 市场：[http ://marketplace.sitecore.net/en/Modules/Sitecore_Error_Manager.aspx](http://marketplace.sitecore.net/en/Modules/Sitecore_Error_Manager.aspx)

Github：[https ://github.com/unic/SitecoreErrorManager](https://github.com/unic/SitecoreErrorManager)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T08:02:53.863

这确实是个问题。因为 google 现在会认为该`404.aspx`页面不存在，并且会认为不存在的项目被临时重定向。

我为此想出了一个解决方案，并[在此处发布了有关它的博客](http://www.partechit.nl/nl/blog/2012/november/return-404-status-code-when-itemnotfound-page-is-loaded)。

它所做的基本上是确定该项目不存在（通过管道处理器），然后通过使用 WebRequest 请求它来检索 404 页面的内容，并将该内容与 404 状态代码一起返回给浏览器。

# php - 在magento中获取产品属性值

> ID：14252236
> 
> 赞同：0
> 
> 时间：2013-01-10T06:44:42.793
> 
> 标签：php, zend-framework, magento

嗨，我使用以下代码获得了产品的最大元素，但它没有显示`size attribute`我的**产品**，尺寸属性**在前端可见，**但我不明白为什么它不使用此代码打印

```
<?php
ob_start();
session_start();
ini_set('display_errors', 1);
//for order update
include '../../../../app/Mage.php';
Mage::app('default');
echo '<pre>';
if(isset($_REQUEST['productid'])){
$productId = $_REQUEST['productid'];
}else{

$productId = '12402'; // product ID 10 is an actual product, and used here for a test
}
$product = Mage::getModel('catalog/product')->load($productId);  //load the product     
//$product_id = $product->getId();
//$created_at = $product->getcreated_at();
//$description = $product->getdescription();
//$short_description = $product->getshort_description();
//$sku = $product->getsku();
//$size_fit = $product->getsize_fit();
//$style_ideas = $product->getstyle_ideas();
//$name = $product->getname();
//$price = $product->getprice();
//$stocklevel = (int)Mage::getModel('cataloginventory/stock_item')->loadByProduct($product)->getQty(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T13:04:01.247

如果它的 size_fit 属性（我猜是因为它是您代码中唯一的大小尝试..），请使用`$product->getSizeFit()`. 仅供大小使用`$product->getSize()`。如果这没有返回任何内容，请发布属性安装程序（如果有的话）。Mufadall 他的回答也是正确的，但判断你的代码你只是使用了错误的语法。

基本上根据魔术get方法，第一个字母在下划线之后变成大写字母和所有其他字母。

例如：获取`my_sample_attribute`使用`getMySampleAttribute()`.

`getData('my_sample_attribute')`也是一种选择，但你不应该养成这样做的习惯，因为在某些情况下，对于某些属性`getData('attribute')`返回不同的值然后`getAttribute()`......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T07:12:32.167

```
$product->getData($attribute_code); 
```

将返回您的实际属性值。对于具有下拉类型的属性，它将返回选项 id

```
$product->getResource()->getAttribute($attribute_code)->getFrontend()->getValue($product); 
```

将返回实际值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T07:04:15.710

你可以使用这个：

```
$product->getData('Your Attribute ID'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T07:07:06.820

转到尺寸属性并检查产品列表中使用的下拉菜单是否设置为否，然后将其设置为是，之后您可以使用其他产品属性获取您的尺寸属性

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T12:08:36.287

您可以使用 getter 或 getData(); getter 在 magento 中使用魔术 __get() 方法设置，您可以通过以下方式使用它：

```
$product->getDescription() // ( to get description attribute)
$product->getShortDescription() // (to get short_description attribute) 
```

所以基本上你用下划线爆炸属性，并将单词大写，你会得到你需要放在“get”之后的东西。

这是我一直在使用的非常有用的东西

```
Zend_Debug::dump($product->getData()); 
```

这将为您提供您必须使用的所有数据。如果您缺少数据，则意味着它没有加载。

祝你好运！

# mongodb - MongoDB - 基于非唯一字段的分页

> ID：14252238
> 
> 赞同：9
> 
> 时间：2013-01-10T06:44:54.330
> 
> 标签：mongodb

我熟悉大型 MongoDB 集合上[基于范围的分页](https://stackoverflow.com/questions/9703319/mongodb-ranged-pagination)的最佳实践，但是我正在努力弄清楚如何对排序值位于非唯一字段上的集合进行分页。

例如，我有大量用户，并且有一个字段表示他们做某事的次数。该字段肯定是非唯一的，并且可能有大量具有相同值的文档。

我想返回按“numTimesDoneSomething”字段排序的结果。

这是一个示例数据集：

```
{_id: ObjectId("50c480d81ff137e805000003"), numTimesDoneSomething: 12}
{_id: ObjectId("50c480d81ff137e805000005"), numTimesDoneSomething: 9}
{_id: ObjectId("50c480d81ff137e805000006"), numTimesDoneSomething: 7}
{_id: ObjectId("50c480d81ff137e805000007"), numTimesDoneSomething: 1}
{_id: ObjectId("50c480d81ff137e805000002"), numTimesDoneSomething: 15}
{_id: ObjectId("50c480d81ff137e805000008"), numTimesDoneSomething: 1}
{_id: ObjectId("50c480d81ff137e805000009"), numTimesDoneSomething: 1}
{_id: ObjectId("50c480d81ff137e805000004"), numTimesDoneSomething: 12}
{_id: ObjectId("50c480d81ff137e805000010"), numTimesDoneSomething: 1}
{_id: ObjectId("50c480d81ff137e805000011"), numTimesDoneSomething: 1} 
```

我将如何返回按“numTimesDoneSomething”排序的这个数据集，每页有 2 条记录？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T08:30:21.817

@cubbuk 使用`offset`( `skip`) 展示了一个很好的示例，但您也可以塑造他为范围分页显示的查询：

```
db.collection.find().sort({numTimesDoneSomething:-1, _id:1}) 
```

由于`_id`此处将是唯一的，并且您正在对其进行附议，因此您实际上可以按范围划分，结果，即使在具有的`_id`两条记录之间，它们是否应该在一页或下一页上也应该是一致的。`numTimesDoneSomething``12`

所以做一些简单的事情

```
var q = db.collection.find({_id: {$gt: last_id}}).sort({numTimesDoneSomething:-1, _id:1}).limit(2) 
```

应该非常适合远程分页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T07:45:51.400

在这种情况下，您可以对多个字段进行排序，`numTimesDoneSomething`然后对字段进行排序`id`。由于 id_ 字段本身已经根据插入时间戳升序，因此您将能够对集合进行分页而无需迭代重复数据，除非在迭代期间插入新数据。

```
db.collection.find().sort({numTimesDoneSomething:-1, _id:1}).offset(index).limit(2) 
```

# sql - 创建新表时在插入之前创建触发器生成 ID 列值

> ID：14252244
> 
> 赞同：2
> 
> 时间：2013-01-10T06:45:19.970
> 
> 标签：sql, oracle, triggers, oracle10g

当在模式（MYSCHEMA）中创建表时，我需要创建一个触发器，在插入每个创建的表之前生成一个 ID 列（来自序列）。我怎样才能实现这一点？

我知道，如何通过触发器和序列实现 ID 列的生成，如下所示：

```
CREATE OR REPLACE TRIGGER TR1
  BEFORE INSERT ON TB1
  FOR EACH ROW
BEGIN
  SELECT SQ1.nextval
    INTO :new.primary_key_column
    FROM dual;
END; 
```

但我不知道，如何在我的模式中使用`AFTER CREATE ON SCHEMA`触发器创建触发器......`CREATE TABLE``BEFORE INSERT`

我写了这段代码：

```
CREATE OR REPLACE TRIGGER /*APPROOT*/after_create_table_trigger
AFTER CREATE ON APPROOT.SCHEMA
DECLARE 
TABLE_NAME VARCHAR2(100);
BEGIN
IF ORA_DICT_OBJ_TYPE = 'TABLE' THEN
SELECT ORA_DICT_OBJ_NAME INTO TABLE_NAME FROM DUAL;
EXECUTE IMMEDIATE 
('CREATE OR REPLACE TRIGGER id_table_gen
  BEFORE INSERT ON ' || TABLE_NAME ||
  ' FOR EACH ROW
   BEGIN
    SELECT APPROOT.AE_IDSEQ.NEXTVAL
     INTO :new.ID
     FROM dual;
   END;');
END IF;
END;
/ 
```

然后我用一个字段创建了测试表 - ID，但我的触发器不起作用......我认为原因是使用事件属性函数 ora_dict_obj_name 错误。

有人可以给我建议吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:19:58.700

如果我将架构名称放在 DDL 中，则可以正常工作。

```
SQL> connect sys/test as sysdba
Connected.
SQL> CREATE OR REPLACE TRIGGER after_create_table_trigger
  2  AFTER CREATE ON TEST.SCHEMA
  3  DECLARE
  4  TABLE_NAME VARCHAR2(100);
  5  BEGIN
  6  IF ORA_DICT_OBJ_TYPE = 'TABLE' THEN
  7  SELECT ORA_DICT_OBJ_NAME INTO TABLE_NAME FROM DUAL;
  8  EXECUTE IMMEDIATE
  9  ('CREATE OR REPLACE TRIGGER ID_TABLE_GEN
 10    BEFORE INSERT ON TEST.' || TABLE_NAME ||
 11    ' FOR EACH ROW
 12     BEGIN
 13      SELECT TEST.AE_IDSEQ.NEXTVAL
 14       INTO :new.ID
 15       FROM dual;
 16     END;');
 17  END IF;
 18  END;
 19  /

Trigger created.

SQL> connect test/test
Connected.
SQL> create table mytab(id number primary key, a varchar2(1));

Table created.

SQL> insert into mytab (a) values ('a');

1 row created.

SQL> select * From mytab;

        ID A
---------- -
         1 a

SQL> select * from v$version;

BANNER
----------------------------------------------------------------
Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 - 64bi
PL/SQL Release 10.2.0.4.0 - Production
CORE    10.2.0.4.0      Production
TNS for Linux: Version 10.2.0.4.0 - Production
NLSRTL Version 10.2.0.4.0 - Production 
```

ps不用做

```
SELECT ORA_DICT_OBJ_NAME INTO TABLE_NAME FROM DUAL; 
```

只需将其粘贴到命令中。

```
CREATE OR REPLACE TRIGGER ID_TABLE_GEN
  BEFORE INSERT ON APPROOT.' || ORA_DICT_OBJ_NAME || 
```

# jax-ws - cxf-jaxws-wsdl2java-BottomUp 方法

> ID：14252249
> 
> 赞同：2
> 
> 时间：2013-01-10T06:45:42.593
> 
> 标签：jax-ws, cxf, wsdl2java

我现在有一个 wsdl 文件。使用 cxf 的 'wsdl2java' 命令，我将 wsdl 转换为 java 类。

wsdl 到 java 转换后生成的接口如何拥有自己的实现类？基本上我需要执行以下操作： 1.将 wsdl 转换为 java 类。2.为生成的类编写实现类。3.Inject cxf into this.(cxf.xml and web.xml for apache CXF) 4.Package it to a war。

我几乎看不到这种自下而上方法的教程/帮助（ir，wsdl 到 java 转换机制）

有人可以为此提供一些指示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T21:25:22.263

为了创建您自己的 Web 服务实现，您必须创建一个类并实现从`WSDL`您拥有的文件生成的接口。

[这是使用 Apache CXF 和 Maven 使用 WSDL 优先方法创建的 Web 服务的完整示例](http://svn.apache.org/viewvc/cxf/trunk/distribution/src/main/release/samples/wsdl_first/)。只需下载源代码，构建它，部署它，看看它是如何工作的。它还包含与客户端的所有测试。

如果您只想发出 SOAP 请求并查看没有 java 代码的响应，您可以使用[SOAP UI](http://sourceforge.net/projects/soapui/files/soapui/4.5.1/)工具。

**也可以看看：**

1.  [http://camel.apache.org/tutorial-example-reportincident-part1.html](http://camel.apache.org/tutorial-example-reportincident-part1.html)

# nhibernate - ServiceStack 和 NHibernate 工作单元模式

> ID：14252251
> 
> 赞同：2
> 
> 时间：2013-01-10T06:45:52.530
> 
> 标签：nhibernate, servicestack, unit-of-work

故事尽量简短...

我有一个现有的应用程序，我正试图让 ServiceStack 进入以创建我们的新 API。此应用程序当前是 MVC3 应用程序，并使用 UnitOfWork 模式在 MVC 路由上使用属性注入来创建/完成应用属性的事务。

尝试使用 ServiceStack 完成类似的事情

**[这个要点](https://gist.github.com/4499951)** 显示了相关的 ServiceStack 配置设置。我很好奇的是全局请求/响应过滤器——它们将为每个请求创建一个新的工作单元，并在将响应发送给客户端之前关闭它（那里有一个检查，所以如果发生错误写入db，我们向客户端返回适当的响应，而不是错误的“成功”消息）

我的问题是：

1.  这是否是一个好主意，或者是否有更好的方法来使用 ServiceStack 做到这一点。
2.  在 MVC 站点中，我们只在将添加/更新/删除数据的操作上创建一个新的工作单元——我们应该在这里做类似的事情，还是只创建一个事务来检索数据就可以了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T05:05:35.540

正如[ServiceStack 的 IOC wiki](https://github.com/ServiceStack/ServiceStack/wiki/The-IoC-container)中提到的，Funq IOC 默认将依赖项注册为单例。因此，要将其注册到 RequestScope，您需要在此处指定它：

```
container.RegisterAutoWiredAs<NHibernateUnitOfWork, IUnitOfWork()
    .ReusedWithin(ReuseScope.Request); 
```

尽管这可能不是您想要的，因为它注册为单例，即为每个请求返回相同的实例：

```
container.Register<ISession>((c) => {
    var uow = (INHibernateUnitOfWork) c.Resolve<IUnitOfWork>();
    return uow.Session;
}); 
```

你可能想这样做：

```
 .ReusedWithin(ReuseScope.Request); //per request

    .ReusedWithin(ReuseScope.None); //Executed each time its injected 
```

使用 a`RequestScope`也适用于全局请求/响应过滤器，它将获得与服务中使用的相同的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T23:17:37.083

**1)**无论您使用的是 ServiceStack、MVC、WCF、Nancy 还是任何其他 Web 框架，最常用的方法是 session-per-request 模式。在 Web 术语中，这意味着在请求开始时创建一个新的工作单元，并在请求结束时处理该工作单元。几乎所有的 web 框架都有这些事件的钩子。

资源：

*   [https://stackoverflow.com/a/13206256/670028](https://stackoverflow.com/a/13206256/670028)
*   [https://stackoverflow.com/search?q=servicestack+session+per+request](https://stackoverflow.com/search?q=servicestack%20session%20per%20request)

**2）**您应该始终在事务中与 NHibernate 交互。

请参阅以下任何内容以了解原因：

*   [http://ayende.com/blog/3775/nh-prof-alerts-use-of-implicit-transactions-is-discouraged](http://ayende.com/blog/3775/nh-prof-alerts-use-of-implicit-transactions-is-discouraged)
*   [http://www.hibernatingrhinos.com/products/nhprof/learn/alert/DoNotUseImplicitTransactions](http://www.hibernatingrhinos.com/products/nhprof/learn/alert/DoNotUseImplicitTransactions)

请注意，当切换到使用读取事务时，一定要让自己意识到 NULL 行为：[http ://www.zvolkov.com/clog/2009/07/09/why-nhibernate-updates-db-on-commit- of-read-only-transaction/#comments](http://www.zvolkov.com/clog/2009/07/09/why-nhibernate-updates-db-on-commit-of-read-only-transaction/#comments)

# iphone - 如何用颜色填充drawRect

> ID：14252252
> 
> 赞同：7
> 
> 时间：2013-01-10T06:46:10.880
> 
> 标签：iphone, ios, objective-c, ipad

我有一个drawRect，我想用某种颜色填充指定的矩形。我该怎么做？到目前为止，我已经尝试了以下方法：

```
- (void)drawRect:(CGRect)rect
{
        CGContextRef context = UIGraphicsGetCurrentContext();
         CGContextSetFillColorWithColor(context, [UIColor colorWithWhite:29/255.f alpha:1.0].CGColor);
CGContextFillRect(context, rect);
} 
```

这似乎不起作用

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-10T07:04:41.693

```
[[UIColor colorWithWhite:29/255.f alpha:1.0] setFill];
UIRectFill(rect); 
```

这是最简单的方法

# asp.net - 将带有 MySQL 服务器数据库的 VB.net 网站部署到便携式设备 (pendrive)

> ID：14252254
> 
> 赞同：0
> 
> 时间：2013-01-10T06:46:19.867
> 
> 标签：asp.net, mysql, deployment, mono, portable-applications

我已经使用带有 MySQL 数据库的 VB.net 开发了一个 Web 应用程序，现在我需要将此应用程序部署到便携式设备，例如 pendrive/硬盘，以便用户可以通过便携式设备在不同的计算机上使用此应用程序。

有没有办法做到这一点？

我在 apache 上找到了这个[asp.net，](http://weblogs.asp.net/israelio/archive/2005/09/11/424852.aspx)但我不确定这是否适合我。

编辑

Mod_MONO 能做我想做的事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:27:37.700

网站/web 应用程序只能部署在 web 服务器上。对于 asp.net，它是 IIS。

要使其便携，您需要 Microsoft Virtual PC。创建一个虚拟机并在其上安装您的应用程序，然后将其保存在便携式设备中

# embedded - 飞思卡尔 P2041RDB-PB 无法启动

> ID：14252256
> 
> 赞同：0
> 
> 时间：2013-01-10T06:46:22.860
> 
> 标签：embedded, boot, powerpc

我无法在 P2041RDB-PB 上启动。按下开机按钮后，所有以太网端口（5 个端口）都在快速闪烁。

我正在尝试使用 minicom 检查串行，它没有任何输出。

我正在尝试从 SD 卡启动，它在 minicom 上没有输出任何内容，而且我仍然让所有以太网端口快速闪烁。

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:31:23.307

如果我尝试从 MMC/SPI 引导而不放置有效的引导加载程序代码，我的 P1021 的行为相同。也无法通过 JTAG 调试器进行连接，因为处理器处于复位状态。我配置为从 (NAND/NOR) 启动，然后连接 JTAG 调试器以将 uboot 闪存到 SPI，然后重新配置板以再次从 SPI 启动。

这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:03:33.700

What the kind of bootloader did you used? please make it specific your question. Firstly, you can try to boot your P2041RDB PB using U-BOOT it's free don't forget to compile u-boot sourcecode for P2041 processor. You can use JTag Debugger to deploy uboot binary to your p2041rdb. You can read the help section in uboot homepage on how to make uboot call Linux OS or other Realtime OS like u/coss-ii.

Permios Amigossss

# struts2 - 在struts2中打开新标签时应该显示已经记录的页面

> ID：14252263
> 
> 赞同：0
> 
> 时间：2013-01-10T06:47:08.303
> 
> 标签：struts2

我正在开发 Struts2 项目。在该项目中，用户可以登录并执行其正常工作。如果该用户打开新选项卡并输入我的项目 url，它将显示相同的页面（登录页面后）。如何实现上述场景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:08:07.487

一种方法是像[这里描述](https://stackoverflow.com/questions/557733/how-to-prevent-a-user-from-having-multiple-instances-of-the-same-web-application)的那样，在一个与您几乎相同的问题中（概念相同，只有.NET上的实现不同）。

> 每次传入 Action 时计算一个唯一值，然后将其放入会话变量（即服务器端）并使用它来提供网页上的隐藏字段（即客户端）。
> 
> 当页面将回传（提交）包含隐藏字段的表单时，您将查看页面字段和会话字段是否相同。
> 
> 如果是：它是（唯一的或）打开的最后一页/选项卡。
> 
> 如果否：您尝试从不是最后打开的页面的页面提交表单。

这样，您将始终只有一个 Web 应用程序实例，如果您在新页面/选项卡中打开 Web 应用程序的另一个实例，它将使前一个实例无效：只有最后一个打开的实例有效（因为多个隐藏字段，每个页面一个，但只有一个会话变量）。

如果您真的需要（是吗？）阻止用户打开新选项卡而不是确保 Web 应用程序的单个实例，请从这个原则开始工作并最终回到这里（使用一些代码更好）

# python-sphinx - 如何在 Sphinx 中插入元数据？

> ID：14252264
> 
> 赞同：11
> 
> 时间：2013-01-10T06:47:09.023
> 
> 标签：python-sphinx, restructuredtext

我想在 Sphinx 创建的网页中插入一些元数据（即关键字、描述、作者）。

我发现

```
:fieldname: Field content 
```

在 Sphinx 的文档中，但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T20:38:10.140

我已经想通了。有一个指令叫做“meta”，完全符合我的愿望。

你可以在这里找到它：http: [//docutils.sourceforge.net/docs/ref/rst/directives.html#meta](http://docutils.sourceforge.net/docs/ref/rst/directives.html#meta)

# jdbc - 法语重音字符引起的jdbc sqlexception

> ID：14252275
> 
> 赞同：0
> 
> 时间：2013-01-10T06:47:40.377
> 
> 标签：jdbc, db2, locale, sqlexception

我有一个为法语重音字符配置的 DB2 数据库，并且通过 DB2 命令行工具，以下两个 SQL 语句都成功返回了包含法语重音字符的结果。

```
select * from ca_cpo_inventory where dealer_id = 46170 and locale = 'fr' 
```

和

```
select * from ca_cpo_inventory where dealer_id = 46170 and locale = 'en' 
```

但是在 JEE 代码中，locale = 'fr' SQL 通过 Hibernate 和 PreparedStatement 可以正常工作，但 locale = 'en' 会导致以下异常。（注意：仅当英语行中有法语字符时才会出现异常。如果结果集中没有法语字符，则 SQL 工作正常）。

相同的代码用于运行这两个 SQL，不同之处在于语言环境。

**通过 Hibernate 调用时：**

```
org.springframework.orm.hibernate3.HibernateJdbcException: JDBC exception on Hibernate data access: SQLException for SQL [...]; SQL state [null]; error code [-99999]; could not execute query; nested exception is org.hibernate.exception.GenericJDBCException: could not execute query
at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:625)
at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:95)
at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:306)
at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:62)
at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:212)
at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:146)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
at $Proxy35.executeFinder(Unknown Source)
at com.mazdausa.persistence.dao.finder.impl.FinderIntroductionInterceptor.invoke(Unknown Source)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
....
Caused by: 
org.hibernate.exception.GenericJDBCException: could not execute query
at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:103)
at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:91)
at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
at org.hibernate.loader.Loader.doList(Loader.java:2216)
at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2104)
at org.hibernate.loader.Loader.list(Loader.java:2099)
at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:378)
at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:338)
at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:172)
at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1121)
at org.hibernate.impl.QueryImpl.list(QueryImpl.java:79)
at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:66)
at com.mazdausa.persistence.dao.impl.GenericDaoHibernateImpl.executeFinder(Unknown Source)
at sun.reflect.GeneratedMethodAccessor90.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:618)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:301)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)
at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
... 90 more
Caused by: 
com.ibm.db2.jcc.c.SqlException
at com.ibm.db2.jcc.c.s.a(s.java:1517)
at com.ibm.db2.jcc.c.s.m(s.java:465)
at com.ibm.db2.jcc.c.s.M(s.java:1102)
at com.ibm.db2.jcc.c.lf.getString(lf.java:959)
at com.ibm.db2.jcc.c.lf.getString(lf.java:1290)
at com.ibm.ws.rsadapter.jdbc.WSJdbcResultSet.getString(WSJdbcResultSet.java:1869)
at org.hibernate.type.StringType.get(StringType.java:18)
at org.hibernate.type.NullableType.nullSafeGet(NullableType.java:163)
at org.hibernate.type.NullableType.nullSafeGet(NullableType.java:154)
at org.hibernate.type.AbstractType.hydrate(AbstractType.java:81)
at org.hibernate.persister.entity.AbstractEntityPersister.hydrate(AbstractEntityPersister.java:2101)
at org.hibernate.loader.Loader.loadFromResultSet(Loader.java:1380)
at org.hibernate.loader.Loader.instanceNotYetLoaded(Loader.java:1308)
at org.hibernate.loader.Loader.getRow(Loader.java:1206)
at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:580)
at org.hibernate.loader.Loader.doQuery(Loader.java:701)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236)
at org.hibernate.loader.Loader.doList(Loader.java:2213)
... 
```

**通过 PreparedStatement 调用时：** com.ibm.db2.jcc.c.SqlException

有谁知道有什么想法？由于 SQL 语句在 DB2 控制台中工作，我假设没有数据损坏。

# c - fork () 和 execlp () ， execlp() 之前的 printf 不会被执行

> ID：14252280
> 
> 赞同：3
> 
> 时间：2013-01-10T06:48:07.693
> 
> 标签：c, linux, exec, fork, interprocess

我正在学习进程间通信...这是困扰我的代码

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
int main(void)
{
   int pfds[2];
   pipe(pfds);
    if (!fork()) 
    {
       printf("I m the child process\n");
       close(1);  /* close normal stdout */
       dup(pfds[1]);  /* make stdout same as pfds[1] */

       close(pfds[0]); /* we don't need this */
       execlp("ls", "ls", NULL);
 } 
 else 
 {
    printf("I m the parent process\n");
    close(0);       /* close normal stdin */
    dup(pfds[0]);   /* make stdin same as pfds[0] */
    close(pfds[1]); /* we don't need this */
    execlp("wc", "wc", "-l", NULL);
 }
  return 0; 
```

}

这些是一些问题：- 1）我同意在 execlp() 之后，什么都没有被执行，但是我的 printf() 语句在 execlp() 之前，那么为什么它们没有被执行？

2）该程序在linux中充当管道命令，因此它像“ls | wc -l”一样执行，但是系统如何知道执行像“ls | wc -l”而不是“wc -l | ls”这样的程序.. ??

3) 我认为 2) 的问题是因为我已经关闭了标准输出并将其用作我的 pfds[1] 并关闭了标准输入并用作我的 pads[0] ..但是如果一个线程在另一个线程之前退出怎么办。 . ??

4）（我使用Xcode以及gcc），当在gcc中运行上述程序时，它运行良好，但是在Xcode中运行时它显示“SIGTRAP”并在控制台中返回“1”

LZ 帮助...

PS：如果有人告诉我如何在任何一般问题中查看单独线程的执行会更好！谢谢你 ！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T07:17:37.520

1.  你`printf`的正在被处决。但是，它仅在您重定向标准输出后才会被刷新，因此其输出不会显示在终端上。`fprintf(stderr, ...)`如果您想在 stderr 上看到它，或者`fflush(stdout)`在开始弄乱文件描述符之前尝试一下。

2.  您将管道的写入端附加到`ls`进程的标准输出，并将读取端附加到 stdin on `wc`，因此不会造成混淆。

3.  我不确定你关心的是什么。该`ls`进程在完成列出目录后`wc`退出，并在输入用完并打印行数时退出。一旦拥有端点的两个进程都关闭了它（通过退出），管道就会自动清理。

4.  很难说。调试器显示什么？不过，Xcode 调试环境主要用于开发和调试桌面/移动应用程序，因此它可能只是某种侥幸。

# apache-flex - mouseSensitivity 不适用于 flex 中的 ColumnChart

> ID：14252283
> 
> 赞同：0
> 
> 时间：2013-01-10T06:48:30.507
> 
> 标签：apache-flex

我正在尝试在 flex 中使用 ColumnChart 的“mouseSensitivity”属性。从[示例](http://livedocs.adobe.com/flex/3/html/help.html?content=charts_eventsandeffects_04.html)教程中，我了解了此属性的工作原理。但是在我的程序中它似乎不起作用。我的意思是，即使我给出的值非常少，说 mouseSensitivity=1 并且如果我将鼠标指针放在远离数据点的地方，即使它被吸引到最近的数据点。这在我的程序中是不可取的。

```
<mx:ColumnChart id="energyChart" mouseSensitivity="1" dataProvider="{energyXml.scenario}" selectionMode="single" chartClick="energyChart_chartClickHandler(event)" >    

 <mx:series>
   <mx:ColumnSeries id="energySeries" />
   <mx:LineSeries id="lineSeries" />
 </mx:series>

</mx:ColumnChart> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:03:22.353

对不起大家...

我知道为什么会出错，最初我将线系列宽度设为“100”，因此即使鼠标指针不在“mouseSensitivity”范围内，也可以将鼠标指针视为在其范围内......

谢谢...

# java - java中的PatternSyntaxException

> ID：14252285
> 
> 赞同：0
> 
> 时间：2013-01-10T06:48:39.067
> 
> 标签：java, android, patternsyntaxexception

我正在尝试用“”（Null）替换以下内容

```
java.util.regex.PatternSyntaxException: Syntax error U_REGEX_BAD_INTERVAL near index 50:

01-05 14:11:14.660: E/AndroidRuntime(1546): FATAL EXCEPTION: main
01-05 14:11:14.660: E/AndroidRuntime(1546): java.util.regex.PatternSyntaxException: Syntax error U_REGEX_BAD_INTERVAL near index 50:
01-05 14:11:14.660: E/AndroidRuntime(1546): <html><head>  <style type="text/css">@font-face { font-family: MyCustomFont;  src: url("file:///android_asset/fonts/MyriadPro-Regular.otf") }body { font-family: MyCustomFont; font-size:14.0pt; text-align: center;vertical-align:middle;line-height: normal;} </style> </head><body> 
```

我收到此错误这里有什么问题？

**编辑**

这是我的代码

`"a"`包含带有标签的值

```
<html><head>  <style type="text/css">@font-face { font-family: MyCustomFont;  src: 
url("file:///android_asset/fonts/MyriadPro-Regular.otf") }body { font-family:MyCustomFont;
 font-size:14.0pt; text-align: center;vertical-align:middle;line-height: normal;}    </style>
</head><body>365<i>xy</i></body></html>

val =<html><head>  <style type=\"text/css\">"
        + "@font-face { font-family: MyCustomFont;  src: url(\"file:///android_asset/fonts/MyriadPro-Regular.otf\") }"
        + "body { font-family: MyCustomFont; font-size:"14.0pt"; text-align: center;vertical-align:middle;line-height: normal;}</style></head><body>
a.getText().replaceAll(val, "") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:03:23.597

尝试

```
a.getText().replaceAll(java.util.regex.Pattern.quote(val), "") 
```

这将在您的模式中引用特殊字符。

顺便提一句。这是删除标题的一种非常脆弱的方法。如果标题稍作更改，它将不再被删除。

# java - 我们什么时候可以将类和方法设为静态？

> ID：14252286
> 
> 赞同：0
> 
> 时间：2013-01-10T06:48:45.070
> 
> 标签：java, .net, oop, static, static-methods

我们什么时候可以将类和方法设为静态？
任何人请帮我举个例子...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T06:52:33.957

如果方法不使用类的任何非静态成员，则可以将其设为静态。

如果类只包含静态成员，则可以将其设为静态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T06:53:45.147

如果一个方法不改变它的行为基于它的封闭类的不同对象。它可以被标记`static`。

检查[`Math`](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html)类。它的所有方法都是`static`原因，它们的行为仅取决于方法中的参数，并且这些方法不会对类状态进行任何更改。

所有实用程序/辅助方法都可以（应该）标记为`static`. 即，如果所有对象的行为都相同，为什么要为每个对象提供不同的副本，只需一个副本并让所有对象共享相同的副本。

你也应该检查一下：[为什么你不能在 Java 中将一个类声明为静态的？](https://stackoverflow.com/questions/3584113/java-static-class)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T07:00:18.040

当您不需要类实例来调用该方法时。这意味着该方法不依赖于类的任何非静态成员

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T07:04:18.370

静态方法属于类，因此不属于特定实例。如果您从消息调度的角度考虑编程语言，我们可以说过程编程仅提供 1 级消息调度，因为函数的名称与其实际行为相对应。在面向对象编程中，我们有两个级别的消息调度，因为您还必须指定一个对象以及一个函数（方法）的签名。相同的函数可能在不同的对象上表现不同，具体取决于它们的状态（子类覆盖方法等）。相反，静态方法就像一个全局函数，您可以在哪里以您想要的方式执行，并且始终具有相同的行为。

因此，您可以限制静态方法的使用，尽管在某些情况下它们会有所帮助。在单例模式 (http://it.wikipedia.org/wiki/Singleton) 中，需要一个静态方法来检索单例的实例（还需要一个私有静态属性来跟踪它）。

对于那些声称 Singleton 是邪恶的并且您应该始终通过 Google Guice 使用依赖注入的人，Guice 也依赖静态方法来创建注入器 (http://lowcoupling.wordpress.com/2012/12/05/dependency-injection /)。

所以我想最好的答案是你应该总是考虑你所面临的问题是否可以通过注入对象来解决，但在某些情况下使用静态方法是非常合理的。

# iphone - 在触摸移动时拖动图像变慢

> ID：14252290
> 
> 赞同：2
> 
> 时间：2013-01-10T06:48:51.183
> 
> 标签：iphone, objective-c, xcode, ios6, draggable

我正在一个需要拖动图像的应用程序中工作（我有超过 100 个图像）。现在它在 ios 5 中运行良好，但是当我对 ios6 使用相同的代码时，它在模拟器中运行良好，但在设备，它移动得很生涩。我该怎么做才能顺利移动图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T06:56:29.703

对于 100 的图像，您必须使用`SDWebImage`如下方式实现延迟加载或异步任务：-

根据我的建议，我正在使用 SDWebImages [A Link of GitHubproject进行异步操作](https://github.com/rs/SDWebImage)

我按照以下步骤进行配置：-

*   您需要首先右键单击您的项目名称：-> 将文件添加到您的项目-> 选择 SDWebImageproject 并添加它们

注意：- 请不要检查复制选项

*   现在单击您的 xcode 中的项目名称，以构建阶段：-> 目标依赖项：-> 单击 + 按钮并添加 SDWebimage ARC

*   现在选择链接二进制库单击 + 按钮添加 libSDWebimageARC.a 并再次单击 + 并添加 imageIO.framework 并添加 libxml2.dylib 就是这样

    去构建设置：->其他链接标志：->添加-ObjC

    和标题搜索路径添加这三项

    1 /usr/include/libxml2

    2 "$(OBJROOT)/UninstalledProducts/include"

    3 "$(TARGET_BUILD_DIR)/usr/local/lib/include"

`now build and run its working like smoothly cheers.... :)`

加载图像及其存储捕获更简单且非常有用的任务，因此您可以更快地工作。

你可以只用两行代码来异步图像，比如

在`.m`：-

`#import <SDWebImage/UIImageView+WebCache.h>`

```
 NSString *strUrlSting =[d valueForKey:@"Current_RequestUser_Image"];
        strUrlSting =[strUrlSting stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];
        NSURL* url = [NSURL URLWithString:strUrlSting];

        [imgView_user1 setImageWithURL:url
                      placeholderImage:[UIImage imageNamed:@"placeholder.png"]]; 
```

对于移动图像相关的演示和链接，请下载此演示并检查它：-

[https://github.com/elc/iCodeBlogDemoPhotoBoard](https://github.com/elc/iCodeBlogDemoPhotoBoard)

希望对你有帮助

这是一些相同的问题，请访问链接：-

[使用 UIPanGestureRecognizer 拖动 + 旋转触摸下车](https://stackoverflow.com/questions/10181255/drag-rotation-using-uipangesturerecognizer-touch-getting-off-track)

[使用平移手势交换图像](https://stackoverflow.com/questions/11794731/swapping-images-using-pan-gesture)

[如何使用 UIPanGestureRecognizer 移动对象？iPhone/iPad](https://stackoverflow.com/questions/6672677/how-to-use-uipangesturerecognizer-to-move-object-iphone-ipad)

# c# - 在 Switch 中为 Case 语句添加附加条件

> ID：14252293
> 
> 赞同：10
> 
> 时间：2013-01-10T06:49:26.397
> 
> 标签：c#, switch-statement

是否可以在 C# 中向如下所示的 Switch 语句添加附加条件

```
switch(MyEnum)
{ 
  case 1:
  case 2:
  case 3 && Year > 2012://Additional Condtion Here
       //Do Something here..........
      break; 
  case 4:
  case 5:
       //Do Something here..........
      break;  
 } 
```

在上面提到的示例中，如果**MyEnum = 3**则必须在**Year > 2012**时执行... 可能吗？

[编辑]

**年份 > 2012 不适用于案例 1 和案例 2。**

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2017-04-05T16:49:29.760

C#7 新特性：

案例...当

[https://docs.microsoft.com/hu-hu/dotnet/articles/csharp/whats-new/csharp-7](https://docs.microsoft.com/hu-hu/dotnet/articles/csharp/whats-new/csharp-7)

```
public static int DiceSum4(IEnumerable<object> values)
{
    var sum = 0;
    foreach (var item in values)
    {
        switch (item)
        {
            case 0:
                break;
            case int val:
                sum += val;
                break;
            case IEnumerable<object> subList when subList.Any():
                sum += DiceSum4(subList);
                break;
            case IEnumerable<object> subList:
                break;
            case null:
                break;
            default:
                throw new InvalidOperationException("unknown item type");
        }
    }
    return sum;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-10T06:56:33.120

为了让它按照您使用 1 和 2 的失败逻辑指示的方式工作，我建议将`//do something here`部分移到方法或函数中，然后执行以下操作：

```
 case 1:
  case 2:
      DoSomething();
      break;
  case 3:
      if(Year > 2012) { DoSomething(); }
      break; 
```

另一种选择是：

```
 case 1:
  case 2:
  case 3:
      if (MyEnum != 3 || Year > 2012) {
         // Do something here
      }
      break; 
```

但我认为第一个选项更加直观和可读。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-10T06:58:47.823

答案是不。

您将需要以下内容：

```
switch (MyEnum)
{
   case 1:
   case 2:
       DoSomething();
       break;
   case 3:
       if (Year > 2012) DoSomething();
       break;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T06:50:33.877

您不能为案例添加条件。Case 子句必须是**编译时常**量。相反，您可以在 case 语句中使用 if 语句。

```
case 3:
      if( > 2012)
       {
       //Do Something here..........
       }
break; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T06:53:04.353

您必须在 case 中使用 if 条件，不能在 case 语句中使用 &&，如下所示：

```
switch(MyEnum)
{ 
  case 1:
  case 2:
  case 3: //Additional Condtion Here
  if (Year > 2012)
  {     
      //Do Something here..........
  }
  break; 
  case 4:
  case 5:
       //Do Something here..........
      break;  
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-10T07:12:06.990

或者，或者，您可以将条件添加到开关：

```
switch (MyEnum!=3 || Year>2012 ? MyEnum : -1)
{ 
  case 1:
  case 2:
  case 3:
       //Do Something here..........
      break; 
  case 4:
  case 5:
       //Do Something here..........
      break;  
 } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-06T11:50:08.173

大多数时候，我会做类似的事情......

（对不起命名，用例没有启发我）

考虑到那些私人课程：

```
private class NumberState
{
    public static NumberState GetState(int number, int year)
    {
        if (number == 1) 
            return new FirstNumberState();
        if (number == 2) 
            return new FirstNumberState();
        if (number == 3 && year > 2012) 
            return new FirstNumberState();

        if (number == 4) 
            return new SecondNumberState();
        if (number == 5) 
            return new SecondNumberState();

        return new DefaultNumberState();
    }
}

private class FirstNumberState : NumberState { }
private class SecondNumberState : NumberState { }
private class DefaultNumberState : NumberState { } 
```

然后你可以这样做：

```
switch (NumberState.GetState(MyEnum, Year))
{
    case FirstNumberState _:
        // do something
        break;

    case SecondNumberState _:
        // do something
        break;

    case DefaultNumberState _:
    default:
        throw new Exception("Unhandled number state");
} 
```

即使您的条件变得更加复杂，它也很容易阅读。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-20T06:49:26.603

您可以使用 C# 8 功能

```
 public static bool SomeHelper(int value)
            => value switch
            {
                100 => true,
                var x when x >= 200 && x <= 300 => true,
                _ => false, // All other values
            }; 
```

您将拥有`true`值 100、200...300 和`false`其他值

您也可以使用参数：

```
 public static bool SomeHelper(int value, bool param)
            => value switch
            {
                100 => true,
                var x when x >= 200 && x <= 300 && param => true,
                _ => false, // All other values
            }; 
```

在这种情况下，`true`只有 if`value`为 100 且`param`为 false

# python - 我可以使用 SIP 为我的 Qt C++ 库生成 Python 绑定，然后在 PySide 中调用它吗？

> ID：14252294
> 
> 赞同：6
> 
> 时间：2013-01-10T06:49:40.807
> 
> 标签：python, c++, qt, pyside, python-sip

由于许可证，我必须选择 PySide。但是它的 Shiboken 工具是如此缺乏文档。我无法为我的 Qt C++ 库成功生成绑定。

看起来 SIP 至少在文档部分更成熟。我是否可以使用 SIP 生成绑定，然后在 PySide 上运行我的 python 代码来调用绑定？我的用户环境是 Windows XP + Python 2.7 + PySide 1.1.2（基于 Window 安装程序，安装到 C:\Python27\Lib\site-packages\PySide）。

# parsing - 使用 awk 解析

> ID：14252303
> 
> 赞同：3
> 
> 时间：2013-01-10T06:50:30.313
> 
> 标签：parsing, awk

如何使用 awk 根据来自另一个文件的数据解析文件。

我做了一个脚本：

```
BEGIN{ FS="\t" ; OFS="\t"

while((getline<"headfpkm")>0) {
        ++a
        id[a]=$1
        fpkm[a]=$2
        print id[a],fpkm[a]
        }
lastid=id[a]
print lastid
close("headfpkm")
}

/$lastid/{
        print $2,$3,$5,$7,$8,$14,fpkm[a]
        a--
        lastid=id[a]
}
END{ print "total lines=",FNR,"\n\nfile 1 index: ",a} 
```

当我运行它时：

```
/$ awk -f testawk.awk file2 
```

它正确运行 BEGIN 部​​分，但不提供任何输出。

```
NM_000014       5.04503
NM_000015       0.586677
NM_000016       1.138332278
NM_000017       0.64386
NM_000018       3.61746
NM_000019       2.8793
NM_000020       10.846
NM_000021       0.685098
NM_000022       46388.6
NM_000026       0.257471
NM_000026
total lines=    10

file 1 index:   10 
```

搜索部分有什么问题吗？

文件 2 如下所示：

```
34      ACADM   NM_000016       9606    hsa-miR-3148    3       80      87      0.003   -0.016  -0.094  0.082   0.112   -0.160  97
34      ACADM   NM_000016       9606    hsa-miR-3163    1       623     629     0.001   -0.022  -0.020  0.065   0.125   -0.01   57
35      ACADS   NM_000017       9606    hsa-miR-3921    3       68      75      0.013   0.192   -0.097  0.031   -0.039  -0.147  82
35      ACADS   NM_000017       9606    hsa-miR-4303    2       67      73      0.012   0.150   -0.052  0.013   -0.039  -0.036  31
35      ACADS   NM_000017       9606    hsa-miR-4653-5p 3       68      75      0.003   0.192   -0.097  0.031   -0.039  -0.157  84
37      ACADVL  NM_000018       9606    hsa-miR-124     2       31      37      0.003   0.023   -0.057  0.012   -0.032  -0.171  76
37      ACADVL  NM_000018       9606    hsa-miR-1827    2       135     141     -0.007  -0.043  -0.058  0.039   -0.069  -0.258  91
37      ACADVL  NM_000018       9606    hsa-miR-2682    2       134     140     0.003   -0.014  -0.058  0.004   -0.047  -0.232  87
37      ACADVL  NM_000018       9606    hsa-miR-449c    2       134     140     -0.035  -0.014  -0.058  0.004   -0.047  -0.270  92
37      ACADVL  NM_000018       9606    hsa-miR-506     2       31      37      -0.016  0.023   -0.057  0.012   -0.032  -0.190  80 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T07:58:09.760

这将是一个猜测，因为我不能 100% 确定你想要完成什么。解决问题的更好方法是执行以下操作：

```
BEGIN {
    FS=OFS="\t"
}

FNR==NR {
    c++

    a[$1]=$2
    next
}

$3 in a {
    print $2,$3,$5,$7,$8,$14,a[$3]
}

END {
    printf "total lines=%s\n\nfile 1 index: %s\n", FNR, c
} 
```

像这样运行：

```
awk -f script.awk headfpkm file2 
```

结果：

```
ACADM   NM_000016  hsa-miR-3148     80   87   -0.160  1.138332278
ACADM   NM_000016  hsa-miR-3163     623  629  -0.01   1.138332278
ACADS   NM_000017  hsa-miR-3921     68   75   -0.147  0.64386
ACADS   NM_000017  hsa-miR-4303     67   73   -0.036  0.64386
ACADS   NM_000017  hsa-miR-4653-5p  68   75   -0.157  0.64386
ACADVL  NM_000018  hsa-miR-124      31   37   -0.171  3.61746
ACADVL  NM_000018  hsa-miR-1827     135  141  -0.258  3.61746
ACADVL  NM_000018  hsa-miR-2682     134  140  -0.232  3.61746
ACADVL  NM_000018  hsa-miR-449c     134  140  -0.270  3.61746
ACADVL  NM_000018  hsa-miR-506      31   37   -0.190  3.61746
total lines=10

file 1 index: 10 
```

# android - 更新android应用程序中所有活动的变量

> ID：14252310
> 
> 赞同：0
> 
> 时间：2013-01-10T06:50:56.793
> 
> 标签：android

我正在开发一个 android 应用程序，我需要随时更新来自不同活动的变量。我尝试过使用服务，但对于 100 个屏幕和 5000 个变量一直在更新，它不能满足我的目的。

# iphone - iphone 中的 facebook 与 ios5 和 6 的 Facebook sdk 集成

> ID：14252311
> 
> 赞同：0
> 
> 时间：2013-01-10T06:51:01.803
> 
> 标签：iphone, facebook, ios5, ios6

我已经使用 FAcebook sdk 3.0 来集成 facebook。我已经使用示例代码“HelloFacebookSample”来发布状态。我的 AppId 更改了 Info.plist 文件。我有显示 armv7s、armv7 架构问题的问题。我什至通过“仅构建活动架构”解决了这个问题。

我有显示 facebook 登录/注销按钮的代码

```
#import "HFViewController.h"

#import "AppDelegate.h"
 #import <CoreLocation/CoreLocation.h>

 @interface HFViewController () <FBLoginViewDelegate>

 @property (strong, nonatomic) IBOutlet UIButton *buttonPostStatus;

 @property (strong, nonatomic) id<FBGraphUser> loggedInUser;

 - (IBAction)postStatusUpdateClick:(UIButton *)sender;

 - (void)showAlert:(NSString *)message
       result:(id)result
        error:(NSError *)error;

 @end

 @implementation HFViewController
 @synthesize shareStringFb;
 @synthesize buttonPostStatus = _buttonPostStatus;

 @synthesize loggedInUser = _loggedInUser;

 - (void)viewDidLoad {    
[super viewDidLoad];

// Create Login View so that the app will be granted "status_update" permission.
self.buttonPostStatus.enabled = YES;

FBLoginView *loginview = [[FBLoginView alloc] init];

loginview.frame = CGRectOffset(loginview.frame, 5, 5);
loginview.delegate = self;

[self.view addSubview:loginview];

[loginview sizeToFit];
statusText.text=self.shareStringFb;
{
    // if the session is closed, then we open it here, and establish a handler for state changes
} 
```

}

```
 -(IBAction)backClick:(id)sender
 {
[self.view removeFromSuperview];

 }

 - (void)viewDidUnload {

self.buttonPostStatus = nil;

self.loggedInUser = nil;

[super viewDidUnload];
 }

 - (void)loginViewShowingLoggedInUser:(FBLoginView *)loginView {
// first get the buttons set for login mode

  self.buttonPostStatus.enabled = YES;

 }

 - (void)loginViewFetchedUserInfo:(FBLoginView *)loginView
                        user:(id<FBGraphUser>)user {
// here we use helper properties of FBGraphUser to dot-through to first_name and
// id properties of the json response from the server; alternatively we could use
// NSDictionary methods such as objectForKey to get values from the my json object

 self.loggedInUser = user;
 }

 - (void)loginViewShowingLoggedOutUser:(FBLoginView *)loginView {

   self.buttonPostStatus.enabled = NO;

  } 
```

// 发布状态更新按钮处理程序 - (IBAction)postStatusUpdateClick:(UIButton *)sender {

```
// Post a status update to the user's feed via the Graph API, and display an alert view 
// with the results or an error.

 NSString *message = [NSString stringWithFormat:@"Updating %@'s status at %@", 
                     self.loggedInUser.first_name, [NSDate date]];

 [FBRequestConnection startForPostStatusUpdate:self.shareStringFb
                            completionHandler:^(FBRequestConnection *connection, id          result, NSError *error) {

                                [self showAlert:message result:result error:error];
                                self.buttonPostStatus.enabled = YES;
                            }];

self.buttonPostStatus.enabled = NO; 
```

}

// 发布照片按钮处理程序

它在模拟器中显示一个带有登录/注销的按钮，但是当我在设备中进行测试时，它没有显示该按钮。

请任何人都可以告诉我是什么问题？为什么不显示？有没有其他方法可以将 Fb 集成到 ios 5 和 6 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T12:21:12.653

```
 ViewController.h

    #import <FacebookSDK/FacebookSDK.h>

    {
     NSDictionary *dictionary;
        NSString *user_email;
        NSString *accessTokan;

        NSMutableDictionary *fb_dict;
    }

- (IBAction)btn_loginwithfacebook:(id)sender;
{

    if (!FBSession.activeSession.isOpen)
    {
        // if the session is closed, then we open it here, and establish a handler for state changes

        [FBSession openActiveSessionWithReadPermissions:nil allowLoginUI:YES completionHandler:^(FBSession *session,FBSessionState state, NSError *error)
         {
             if (error)
             {
                 UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Error" message:error.localizedDescription delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
                 [alertView show];
             }
             else if(session.isOpen)
             {
                 [self btn_loginwithfacebook:sender];
             }

         }];

        return;
    }

    [FBRequestConnection startWithGraphPath:@"me" parameters:[NSDictionary dictionaryWithObject:@"picture,id,birthday,email,name,gender,username" forKey:@"fields"] HTTPMethod:@"GET" completionHandler:^(FBRequestConnection *connection, id result, NSError *error)
     {
         if (!error)
         {
             if ([result isKindOfClass:[NSDictionary class]])
             {
                 //NSDictionary *dictionary;
                 if([result objectForKey:@"data"])
                     dictionary = (NSDictionary *)[(NSArray *)[result objectForKey:@"data"] objectAtIndex:0];
                 else
                     dictionary = (NSDictionary *)result;
                 //NSLog(@"dictionary : %@",dictionary);

                 user_email = [dictionary objectForKey:@"email"];
                 [dictionary retain];
                 //NSLog(@"%@",user_email);//
             }
         }
     }];
    accessTokan = [[[FBSession activeSession] accessTokenData] accessToken];
    //NSLog(@"%@",accessTokan);

    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL URLWithString:[NSString stringWithFormat:@"https://graph.facebook.com/me?access_token=%@",accessTokan]]];
    [request setHTTPMethod:@"GET"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    NSError *error;
    NSURLResponse *response;
    NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
    NSString *str=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];

    //NSLog(@"%@",str);
    fb_dict = [str JSONValue];
    [str release];} 
```

FacebookAppID ::370546396320150 URL 类型项目 0 URL 方案项目 0 ::fb370546396320150

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:12:54.047

用于 iOS6的[这个 facebook sdk (3.1)](http://developers.facebook.com/ios/)

# c# - 如何在C#中将带有'T'的日期转换为字符串/从字符串转换

> ID：14252312
> 
> 赞同：12
> 
> 时间：2013-01-10T06:51:03.780
> 
> 标签：c#, datetime

我使用以下函数`DateTime`从/转换为`string`：

```
DATE_OBJ.ToString(DATE_FORMAT);

DateTime.ParseExact(Date_string, DATE_FORMAT, null); 
```

现在我必须使用以下格式`2012-03-20T14:18:25.000+04:00`

我应该使用哪种格式将其正确转换为对象`string`并生成`string`类似的格式`DateTime`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-10T07:06:02.043

您可以从 DateTime 转到该格式

```
DateTime dt = new DateTime();
dt.ToString("o"); 
```

并从该格式到 DateTime

```
DateTimeOffset.Parse(dateString); 
```

以下是有关 DateTime 格式的更多信息：http: [//www.dotnetperls.com/datetime-format](http://www.dotnetperls.com/datetime-format)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-10T07:16:38.257

您最好使用[DateTimeOffSet](http://msdn.microsoft.com/en-us/library/system.datetimeoffset.aspx)，例如：

```
string str = " 2012-03-20T14:18:25.000+04:00";
DateTimeOffset dto = DateTimeOffset.Parse(str);
//Get the date object from the string. 
DateTime dtObject = dto.DateTime; 

//Convert the DateTimeOffSet to string. 
string newVal = dto.ToString("o"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-10T07:04:33.887

您不能从 执行此操作`DateTime`，因为`DateTime`没有`TimeZone`信息。

这很接近：`string.Format("{0:s}", dt)`会给`2012-03-20T14:18:25`. 见：[http ://www.csharp-examples.net/string-format-datetime/](http://www.csharp-examples.net/string-format-datetime/)

您可以将其扩展到: `string.Format("{0:s}.{0:fff}", dt)`，这将给出`2012-03-20T14:18:25.000`

但你最好看看`DateTimeOffset`：[DateTime vs DateTimeOffset](https://stackoverflow.com/questions/4331189/datetime-vs-datetimeoffset)

（不可取，但要伪造它并仍然使用`DateTime`：）`string.Format("{0:s}.{0:fff}+04:00", dt)`

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-10T06:56:02.353

如果那是您收到的字符串，那么您可以将字符串按 T 拆分并仅使用作为整个字符串的 Date 组件的第一部分并对其进行解析。

前任：

```
string dateTimeAsString = "2012-03-20T14:18:25.000+04:00";
string dateComponent = dateTimeAsString.Splic('T')[0];
DateTime date = DateTime.ParseExact(dateComponent, "yyyy-MM-dd",null); 
```

# python - Django：会话等价于@user_passes_test

> ID：14252313
> 
> 赞同：0
> 
> 时间：2013-01-10T06:51:08.863
> 
> 标签：python, django, django-views

我熟悉`@user_passes_test`auth 装饰器，我想知道是否有会话的等价物？基本上我有一个帐户设置页面，在前往该页面之前，用户确认他们的密码，如果他们成功，则添加一个时间戳作为他们会话的密钥。我想将所有其他“配置文件设置”视图包装在“会话通过测试”样式的装饰器中，它确认时间戳存在并且小于一定的时间。是否有捷径可寻？我有几个需要相同逻辑的视图。因此，在每个代码中重复大量代码有点令人讨厌。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:27:12.340

也许您只想编写自己的装饰器来封装您想要的所有会话逻辑，并将其应用于所有“配置文件设置”视图

例如 [，如何制作一系列功能装饰器？](https://stackoverflow.com/questions/739654/understanding-python-decorators) （它们基本上是一个返回函数等的函数）

# vb6 - 在 FTP vb6 中等待下载完成

> ID：14252315
> 
> 赞同：0
> 
> 时间：2013-01-10T06:51:17.453
> 
> 标签：vb6, ftp, download

我在名为“inetFTP”的表单上有一个 Internet 传输控制。我打电话后

```
inetFTP.Execute , "Get " & "test.zip" & " " & "C:/test.zip" 
```

我想暂停代码执行，直到下载完成，所以之后不会有任何其他代码在文件上运行，可能会遇到问题。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T13:08:21.903

通常，您会使用控件的`StateChanged`事件并至少监视`icError`和`icResponseCompleted`状态。

但在实际程序中，通常需要将它与 Timer 控件、经过时间计数器和取消标志一起使用。您需要确保不会错过任何状态更改（如果它们快速连续发生，有些似乎不会触发事件）、处理超时、取消长时间运行的操作等。

我怀疑控件中有一些长期存在的错误从未被解决，这就是为什么`StateChanged`不像人们希望的那样可靠。其中一些可能与面向会话的 FTP 协议中的固有怪癖或竞争条件有关。HTTP 操作似乎更具确定性。

从那里您需要更改您的程序流程以正确适合 Windows 程序的模型。

可以启动长时间运行的异步操作，但在大多数情况下，只有更多“值得做的事情”，直到您收到完成信号（或中止等）。

因此，您这样做，`Execute`然后退出您正在运行的事件处理程序。一旦发出完成信号，您就可以在该完成事件处理程序中恢复处理。

VB6 不是 QBasic，Windows 也不是 DOS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T13:15:29.307

您可以使用计时器（VBA.DateTime.Timer），见下文：

```
Dim PauseTime As Single, start As Single

PauseTime = 2  ' pause the execution of code for two (2) seconds:
start = Timer

Do While Timer < start + PauseTime
    DoEvents
Loop 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T13:18:51.307

我找到了答案。我应该插入

```
Do While inetFTP.StillExecuting
    DoEvents
Loop 
```

这个循环直到 Internet 传输控制完成它的工作。

# java-me - 签名的 J2me 应用程序在第一次启动时挂起

> ID：14252328
> 
> 赞同：2
> 
> 时间：2013-01-10T06:52:11.410
> 
> 标签：java-me, permissions, midp-2.0, jsr75

在我的由 veriSign 签名的 j2me 应用程序中，在它必须执行`PIM.getInstance().openPIMList(..)`操作的时间接受 always 或 yes 权限时出现问题。

当我的应用程序在第一次安装时执行下面的代码行时，它会挂起并且不显示主屏幕，而是显示黑色背景挂起的屏幕。当我退出并重新启动应用程序时，即使我将其删除并重新放回并运行良好，它也可以正常运行，但我删除并重新启动手机并尝试再次运行它会显示我上面描述的相同问题。

我的导致请求权限的行代码在这里实际上也导致了问题。还有一件事，此错误仅发生在实际允许`ALWAYS`启动权限的特定手机上。

我在诺基亚 X2-05 上检查它并显示问题，但在诺基亚 C3-02 上却没有，因为它不允许`ALWAYS`在应用程序启动时自动获得许可。

```
private void permissionSettings() throws PIMException {
       PIM.getInstance().openPIMList(PIM.CONTACT_LIST, PIM.READ_WRITE);
} 
```

上面是第一次启动时挂起的代码片段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-04T08:26:10.090

对我来说这听起来像是手机上的一个错误，用于验证 j2me 库的 TCK 测试非常薄弱，所以很多这样的错误都可以通过。

似乎关键在于权限，所以我会尝试在这个领域玩耍。确保您在 .jad 中设置了正确的权限（在签名之前），如果您可以尝试使用不同安全域或证书中的证书进行签名，请尝试在运行小程序之前更改权限级别。

我希望你只能解决这个问题，所以我不会提出一些具体的建议，而是在这些领域内改变一些事情。

# html - 设置 textarea 以消耗 div 中的所有可用空间（在顶部减去 N 像素）

> ID：14252329
> 
> 赞同：4
> 
> 时间：2013-01-10T06:52:11.190
> 
> 标签：html, css

我正在尝试为 textarea 设置自定义工具栏，我有以下内容

**html**：

```
<div id="main">
  <div id="toolbar"></div>
  <textarea></textarea>
</div> 
```

**CSS**：

```
#main {
  background-color: #ddd;
  height: 400px;
  width: 400px;
  position: relative;
}

#toolbar {
  background-color: #444;
  height: 40px;
  color: white;
}

textarea {
  outline: none; 
  border: none;
  border-left: 1px solid #777;
  border-right: 1px solid #777;
  border-bottom: 1px solid #777;
  margin: 0;
  position: absolute;
  top: 40px;
  bottom: 0;
  left: 0;
  right: 0;
} 
```

它在 Chrome 中完全符合我的预期，但在 firefox / ie 中，文本区域并没有消耗 div 中的所有可用空间。

如何设置它以使工具栏在 div 的顶部占据 40px，而 textarea 占用所有其余的高度。

我正在动态调整这些东西的大小，因此**不能为 textarea 使用“px”高度或宽度**。

Codepen在这里：[http ://codepen.io/anon/pen/pDgvq](http://codepen.io/anon/pen/pDgvq)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T07:05:36.317

### 更好的建议

将文本区域的宽度和高度设置为 100%。然后，给它一个透明的 40px 上边框（实际上颜色并不重要）。请务必将 box-sizing 设置为border-box。现在将相对工具栏放置在更高的 z-index 上 - 瞧。

笔：[http ://codepen.io/anon/pen/nFfam](http://codepen.io/anon/pen/nFfam)

### 老歌

不要向下移动文本区域，而是向上移动工具栏：

```
#main {
  background-color: #ddd;
  height: 200px; width: 400px;
  position: relative;
  top: 40px;
}

#toolbar {
  background-color: #444;
  height: 40px; width: 100%;
  position: absolute;
  top: -40px;
}

textarea {
  width: 100%; height: 100%;
  box-sizing: border-box;
} 
```

笔：[http ://codepen.io/anon/pen/mEGyp](http://codepen.io/anon/pen/mEGyp)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T12:46:53.697

Firefox 和 IE9+ 都[支持](http://caniuse.com/calc)CSS 功能（不过，您对[`calc()`](https://developer.mozilla.org/en-US/docs/CSS/calc)IE8 不走运；不确定您支持什么）。

我已将这些行添加到`textarea`您笔中的 CSS 中（[更新版本](http://codepen.io/anon/pen/bDzEx)）：

```
width: calc(100% - 2px);
height: calc(100% - 41px);
padding: 0; 
```

填充仅用于规范化；您可以选择适合您需要的任何内容，但请务必`calc()`相应地调整像素值。for宽度是`2px`补偿左右边框；工具栏的`41px`高度为 40，底部边框的高度为 1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T06:57:45.473

添加`width:-moz-available; height:100%;resize: none;`到`textarea`

```
 textarea {
  outline: none; 
  border: none;
  border-left: 1px solid #777;
  border-right: 1px solid #777;
  border-bottom: 1px solid #777;
  margin: 0;
  position: absolute;
  top: 40px;
  bottom: 0;
  left: 0;
  right: 0;  width:-moz-available; height:100%; 
  resize: none;  
} 
```

**[更新的演示](http://jsfiddle.net/TFQxX/3/)**

* * *

**另一种方法**

您可以在 textarea 周围添加一个 div 并将 position:absolute 赋予该 div

**HTML**

```
<div id="main">
  <div id="toolbar"></div>

  <div id="container">
  <textarea></textarea>
  </div>

</div> 
```

**CSS**

```
#container{ 
  position:absolute;
  bottom:0px;
  top:40px; 
  width:100%
}
textarea {
  outline: none; 
  border: none;
  border-left: 1px solid #777;
  border-right: 1px solid #777;
  border-bottom: 1px solid #777;
  resize: none;  height:100%; width:99.5%
} 
```

**[演示 2](http://jsfiddle.net/TFQxX/6/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T07:07:05.880

您可以在 % 中为 textarea 使用高度和宽度，也可以在 % 中将顶部应用于工具栏 div 例如，如果顶部为 10%，则为 textarea 提供 90% 的高度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T07:29:35.550

我希望这是您想要的结果：[Demo](http://codepen.io/anon/pen/dJelL)

```
#main {
  background-color: #ddd;
  width: 400px; height: 200px; 
  padding: 0;
}

div #toolbar {
  background: #444;
  width: 100%; height: 40px;
}

textarea {
  margin: 0; 
  width: 100%; height: 100%;
} 
```

# android - Android 手势无法识别

> ID：14252333
> 
> 赞同：2
> 
> 时间：2013-01-10T06:52:27.930
> 
> 标签：android, gesture, gesture-recognition, gestures

我正在尝试使用手势生成器在我的应用程序上接收上/下和左/右手势。我按照这里的指南（[http://www.vogella.com/articles/AndroidGestures/article.html](http://www.vogella.com/articles/AndroidGestures/article.html)），它似乎工作，但并没有完全响应正确的手势。它在覆盖层上以亮黄色显示左右（找到手势），但是当`Toast`创建弹出窗口以显示识别的手势名称时，它显示右/上/下都被识别或左/上/下被识别。此外，它不会将实际的上下滑动识别为有效手势（在 Overlay 上淡出黄色）。

我曾多次尝试使用 Gesture Builder 重新构建 Gesture 库，以防出现错误但似乎没有。

正在使用的代码是按照上面的链接。

```
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    gTap  = new GestureDetector(this,(android.view.GestureDetector.OnGestureListener) this);

    //Remove title bar
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);

    //Define textView
    textView1 = (TextView) findViewById(R.id.textView1);
    textView2 = (TextView) findViewById(R.id.textView2);
    textView3 = (TextView) findViewById(R.id.textView3);
    textView4 = (TextView) findViewById(R.id.textView4);

    GestureOverlayView gestureOverlayView = new GestureOverlayView(this);
    View inflate = getLayoutInflater().inflate(R.layout.main, null);
    gestureOverlayView.addView(inflate);
    gestureOverlayView.addOnGesturePerformedListener(this);

    gestureLib = GestureLibraries.fromRawResource(this, R.raw.gestures);
    if (!gestureLib.load()) {
      finish();
    }
    setContentView(gestureOverlayView);

    //Load font file
    Typeface type = Typeface.createFromAsset(getAssets(),"fonts/optima.ttf"); 

    //Set various textViews to font
    textView1.setTypeface(type);
    textView2.setTypeface(type);
    textView3.setTypeface(type);
    textView4.setTypeface(type);

    prevPass = "Memorable";

}

public void onGesturePerformed(GestureOverlayView overlay, Gesture gesture) {
  ArrayList<Prediction> predictions = gestureLib.recognize(gesture);
  for (Prediction prediction : predictions) {
    if (prediction.score > 1.0) {
      Toast.makeText(this, prediction.name, Toast.LENGTH_SHORT)
          .show();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-13T11:32:23.427

[如此处](https://stackoverflow.com/questions/22804313/vertical-top-to-bottom-line-gesture-detector/22807326#22807326)所述，将其添加到您的代码中。

```
GestureOverlayView gestures = (GestureOverlayView) findViewById(R.id.gestures);
    gestures.setGestureStrokeAngleThreshold( 90.0f); 
```

[这](https://github.com/manangandhi7/Gesture-Builder)是 Gesture Builder 应用程序的完整代码。你也可以试试。

# ruby-on-rails - MalformedCSVError with rails CSV (FasterCSV)

> ID：14252340
> 
> 赞同：1
> 
> 时间：2013-01-10T06:53:20.527
> 
> 标签：ruby-on-rails, ruby, parsing, csv, fastercsv

我现在在尝试解析 Rails 中的一些 CSV 时遇到了严重的问题。基本上，我的应用程序让用户上传 CSV 文件。然后应用程序转换文件以确保它是 UTF-8 格式，然后尝试解析并处理它。但是，每当应用程序尝试解析它时，我都会收到 MalformedCSVError 说明“第 1 行非法引用”

现在我不明白的是，如果我将原始文件复制到一个新文档中并保存它，那么我可以在 Rails 控制台上毫无问题地解析它。

如果我尝试解析原始文件，它会抱怨 UTF-8 编码的字符无效（该文件不是 UTF-8，因此应用程序会对其进行转换）

如果我尝试解析应用程序已转换为 UTF-8 的文件并将行结尾更改为 LF，则无法解析。

如果我在应用程序生成的版本和我制作的复制/粘贴版本（有效）之间进行文件差异，则存在 0 个差异，所以我真的无法弄清楚为什么一个是可解析的，而一个不是。

有什么建议么？我的应用程序正在按如下方式处理文件：

```
def create
@survey = Survey.new(params[:survey])

# Now we need to try and convert this to UTF-8 if it isn't already
 encoded = File.read(@survey.survey_data.current_path)
encoding = CharlockHolmes::EncodingDetector.detect(encoded)

# We've got a guess at the encoding, 
# so we can try and convert it but it 
# may still fail so we need to handle 
# that
begin
  re_encoded = CharlockHolmes::Converter.convert(encoded, encoding[:encoding], 'UTF-8')
  re_encoded = re_encoded.gsub(/\r\n?/, "\n")

  # Now replace the uploaded file
  File.open(@survey.survey_data.current_path, 'w') { |f|
    f.write(re_encoded)
  }
rescue ArgumentError
  puts "UH OH!!!!!"
end

puts "#{@survey.survey_data.current_path}"
@parsed = CSV.read(@survey.survey_data.current_path) 
```

结尾

如果这有什么不同的话，文件上传 gem 是 CarrierWave。

请有人可以帮助我，因为这让我发疯！

**编辑**

错误说它在第 1 行。第 1 行（假设它不从 0 开始索引）是

```
"Survey","RD","GarrysMDs","NigelsMDs","PaulsMDs","StephensMDs","BrinleyJ","CarolineP","DaveL","GrantR","GregS","Kent","NeilC","NicolaP","AndyC","DarrenS","DeanB","KarenF","PaulR","RichardF","SteveG","BrianG","GordonA","NickD","NickR","NickT","RayL","SimonH","EdmondH","JasonF","MikeS","SamanthaN","TimB","TravisF","AlanS","Q1","Q2","Q3","Q4","Q5","Q6","Q7","Q8PM","Q8N","Q9","Q10","Q11","Q12","Q13","Q14","Q15","Q16PM","Q16N","Q17PM","Q17N","Q18PM","Q18N","Q19","Q20","Q21","Q22","comment","Q23.1","Q23.2","Q23.3","TQ23.1","TQ23.2","VPM","VN","VQ1","VQ2","VQ3","VQ4","VQ5","VQ6","VQ7","VQ8N","VQ8PM","VQ9","VQ10","VQ11","VQ12","VQ13","VQ14","VQ15","VQ16","VQ16N","VQ16PM","VQ17","VQ17N","VQ17PM","VQ18","VQ18N","VQ18PM","VQ19","VQ20","VQ21","VQ22","VQ23.1","VQ23.2","VQ23.3","VRD","XQ16","XQ17","XQ18" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T02:05:31.097

嗯，这很烦人！

原来该文件有一个 BOM 导致 CSV 解析器中断。加载文件

```
CSV.open("path/to/file.csv", "rb:bom|encoding") 
```

让它完美地解析它！很恼火花了多长时间来追踪，但它现在正在工作，现在也不需要转换为 UTF-8！

# c# - 禁用组合框上的鼠标滚轮并冒泡到父级

> ID：14252341
> 
> 赞同：0
> 
> 时间：2013-01-10T06:53:22.173
> 
> 标签：c#, winforms

我有一个这样的嵌套控件布局：

表单（用户表单）> TabControl > UserControl（自动滚动，停靠填充）> GroupBox（停靠顶部）> ComboBox

一个用户体验问题是焦点大部分时间都在一个输入框中。当输入框是组合框时，组合框会改变选择，这是不希望的。我希望滚动使组合框在滚动用户控件时**保持焦点。**

我试过了

```
combobox.MouseWheel += (s, e) => combobox.Parent.Focus(); 
```

但这似乎发生在选择更改后。另一方面，TextBox 工作得很好。有没有办法让组合框表现得像鼠标滚轮上的文本框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:14:07.393

几个月前我有一个这样的场景：我在每个选项卡中都有功能区选项卡、按钮、文本框、组合框。我想用我的鼠标滚轮（对于组合框）向下和向上滚动，但是我的鼠标滚轮改变了选项卡。它不影响组合框。

然后，我创建了自己的类，该类继承自该 Ribbon 控件。

```
public class MyRibbon : Ribbon {

  public bool DisableMouseWheel { get; set; }

  protected override void OnMouseWheel(MouseEventArgs e) {
    if (!this.DisableMouseWheel) {
      base.OnMouseWheel(e);
    }
  }
} 
```

然后我重建我的解决方案。单击解决方案资源管理器中的“显示所有文件”按钮并打开表单的设计器文件。文件中有两行引用了 Ribbon 类型，我用新的 MyRibbon 类替换了该类型。

然后我订阅了 ComboBox 的 Enter 和 Left 事件，在这些事件中我更改了 DisableMouseWheel 属性。

# php - Mysql Join，需要帮助格式化查询

> ID：14252342
> 
> 赞同：0
> 
> 时间：2013-01-10T06:53:24.203
> 
> 标签：php, mysql, join, forum

如果这是重复，我很抱歉，但我找不到任何能真正回答我的问题的东西，因为它相当具体。

我正在使用 php 和 mysql 创建一个论坛，到目前为止一切都很好，但我想根据他们最近发布的日期对每个类别中的主题进行排序。

我的数据库结构是这样的：

```
Table: threads
Fields: name, f_id, t_id

Table: posts
Fields: author, date, post, t_id, p_id 
```

线程具有线程的名称、它所在论坛的 f_id 以及它自己的自动递增线程 id。帖子有作者、日期、帖子、它所在线程的 t_id 以及自动递增的帖子 ID。为此，第二个帖子的 ID 将始终高于第一个帖子，即使帖子是在其间的另一个线程中发布的。

当我想显示特定论坛中的所有主题时，我的问题就出现了。我目前使用此代码：

```
$t_query = mysqli_query($link, "SELECT name, t_id FROM threads WHERE f_id = ".$f_id."");

echo "<table><tr><td>Name</td><td>Author</td><td>Date</td></tr>";
while($rowt = mysqli_fetch_array($t_query)) {
    $p_query = mysqli_query($link, "SELECT author, DATE_FORMAT(date, '%r on %c/%e/%Y') as date_f, p_id FROM posts WHERE t_id = ".$rowt['t_id']." LIMIT 1");
    echo "<tr><td><a href=\"../pages/post.php?t_id=",htmlentities($rowt['t_id']),"\">",htmlentities($rowt['name']),"</a></td>";
        while($rowp = mysqli_fetch_array($p_query)){
            echo "<td>",htmlentities($rowp['author']),"</td><td>",htmlentities($rowp['date_f']),"</td></tr>";
}
echo "</table>"; 
```

这一切都很好，除了我不能按日期排序，因为日期在帖子中，而我的第一个循环是从线程中抓取的。我需要完成的是一个连接，它将从帖子中获取最高 p_id 的日期，其中 t_id 等于线程中的 t_id。

重新阅读后似乎有点混乱，但我希望有人可以帮助我进行连接查询并调整我的 php.ini 文件。

谢谢，夏尔夫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:08:52.560

您只需要加入分组并按最大值排序：

```
SELECT t.name, t.t_id FROM threads t
INNER JOIN posts p ON p.t_id = t.t_id
WHERE t.f_id = ID
GROUP BY t.name, t.t_id
ORDER BY MAX(p.date) 
```

假设您在每个线程中至少有一个帖子，因为此查询不会找到空线程 - 为此，您需要使用外连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T07:08:01.263

我假设您想按其中最新帖子的日期对线程列表进行排序，对吗？加入帖子两次，一次是最近的日期，第二次是为了确保其中不存在更新的帖子。例如...

```
SELECT t.name, t.t_id
FROM threads t
JOIN posts p1 ON (p1.t_id = t.t_id)
LEFT JOIN posts p2 ON (p2.t_id = t.t_id AND p2.p_id > p1.p_id)
WHERE p2.p_id IS NULL
ORDER BY p1.date; 
```

# java - 如何从 Java 中的 Object[] 中获取元素？

> ID：14252347
> 
> 赞同：3
> 
> 时间：2013-01-10T06:53:50.600
> 
> 标签：java, arrays, parsing

我有以下几行 Java 代码：

```
Object[] results = api.getProjects();
   for(int i=0; i<results.length; i++){
       System.out.println(results[i].toString());
   } 
```

这里是输出：

```
TestProject [id=1, name=Test Plan, prefix=MA, notes=, enableRequirements=true, enableTestPriority=true, enableAutomation=true, enableInventory=true, isActive=true, isPublic=true] 
```

我关心的是如何只获得想要的元素？（即：“姓名”和“身份证”）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T06:58:53.407

您应该对每个对象进行类型转换并打印必要的内容。

假设数组结果的每个元素都可以类型转换为 TestProject 类。你可以按照这个方法：

```
Object[] results = api.getProjects();
for(TestProject tp : results){    
   System.out.println(tp.getName + " " + tp.getId());
 } 
```

或者

```
 Object[] results = api.getProjects();
    for(Object tp : results){    
       String name = ((TestProject)tp).getName() ;
       String id = ((TestProject)tp).getId() ;
       System.out.println(name);
       System.out.println(id);
     } 
```

您现有的实现也可以工作。如果您将 toString() 覆盖为

```
@Override
public String toString(){
   return "TestProject [id=" + id + ", name=" + name +"]"; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-08T11:26:17.380

因为你只想要 id 和 name。因此，id 位于 index[0] 处，name 位于 index[1] 处。因此代码将是这样的。

```
 Object[] results = api.getProjects();
   System.out.println(results[0]);
   System.out.println(results[1]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T06:57:01.550

`Object[] results`是一个糟糕的选择。

单个元素看起来要么是类要么是 HashMap

假设前者，你可以做这样的事情

```
Result[] results = api.getProjects()

result[i].name
result[i].id 
```

# oracle-adf - 在 ADF 页面中嵌入图像编辑器

> ID：14252355
> 
> 赞同：0
> 
> 时间：2013-01-10T06:54:16.570
> 
> 标签：oracle-adf

我的要求是我应该能够在 ADF 页面中渲染图像，并且可以缩放渲染的图像，对其进行编辑，并根据需要进行旋转。

ORACLE ADF 是否为我提供了开箱即用的支持。

注意：我想用这样的东西来编辑图像

[http://jdevadf.oracle.com/adf-richclient-demo/faces/components/hierarchyViewer.jspx#%2Fcomponents%2FrichTextEditor.jspx](http://jdevadf.oracle.com/adf-richclient-demo/faces/components/hierarchyViewer.jspx#%2Fcomponents%2FrichTextEditor.jspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:40:19.270

ADF 中没有类似的东西。

您必须使用大量 Javascript 编写自己的组件来处理所有这些功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:39:51.597

ADF 中没有类似的东西。

但是您可以使用[众多 jQuery 插件](http://shinylittlething.com/2009/02/20/image-manipulation-jquery-plugins/)之一来满足您的需求。

# c++ - Opencv blob 检测和矢量化

> ID：14252361
> 
> 赞同：1
> 
> 时间：2013-01-10T06:54:52.950
> 
> 标签：c++, opencv, vector, blob

我有一块扁平材料，它已经看到碎片（凸块），我希望将它剩下的部分矢量化。

例如这张图片 [http://www.laser-cutting.com/images/Coreplast_med.jpg](http://www.laser-cutting.com/images/Coreplast_med.jpg)

在此图像的情况下，我希望圆圈和星星的斑点不再被识别为材料的一部分，它们的轮廓和图像的轮廓矢量化为仅留下材料的剩余部分（忘记手写） . 使用 cvCanny 获取轮廓没有问题，但是我如何对轮廓进行矢量化？有没有办法识别斑点？

关于如何进行的任何想法？我已经阅读了许多与 blob 相关的问题，但没有一个对我有帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T09:26:26.083

如果你知道你的形状会是什么样子，你可以试试这个： [如何使用 OpenCV 检测简单的几何形状](https://stackoverflow.com/questions/11424002/how-to-detect-simple-geometric-shapes-using-opencv)

Samuel Audet 所说的 cvFindContours 也应该有利于矢量化： [http ://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#findcontours](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#findcontours)

> **轮廓**- 检测到的轮廓。每个轮廓都存储为**点向量**。

从那里你可以玩弄你的观点并进行任何你想要的 2D 表示/处理。

# php - 在数据库中保存电子邮件响应

> ID：14252362
> 
> 赞同：0
> 
> 时间：2013-01-10T06:54:56.050
> 
> 标签：php, mysql, codeigniter, email, cakephp

我有一个以这种方式工作的应用程序。我在 mysql 中有一个用户表，其中包含用户 ID 和所有数据

这就是发生的事情：

a) 注册到我的网站 (A) 的用户转到另一个网站 (B) 并回答了一些问题。

b）网站（B）向我发送电子邮件，其中包含我数据库中的用户数据。

现在我想做的是每当我的收件箱中收到有关特定邮件的电子邮件时自动执行。php 中的代码检测用户 ID 并将邮件保存在我的数据库的 emailrep 字段中。

请告诉我如何在 PHP 中实现这一点？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T06:59:24.123

我认为这是一个 [用 PHP 阅读电子邮件的好开始](http://garrettstjohn.com/entry/reading-emails-with-php/)

# android - Trivial Haxe (HaxePunk) 游戏在 HTC Desire (Icecream Sandwich) 上运行太慢

> ID：14252371
> 
> 赞同：2
> 
> 时间：2013-01-10T06:55:40.173
> 
> 标签：android, android-4.0-ice-cream-sandwich, haxe, haxepunk

我使用 Haxe+ Haxepunk 制作了一个简单的 3 帧动画角色走到您在屏幕上单击的任何位置......好吧，我从在线教程中复制/粘贴代码只是为了测试 Haxe。

这在 Flash、iOS 模拟器和三星 Galaxy 3 上运行得很好……但在我的 HTC 上，它的运行速度低于每秒 1 帧。虽然我知道欲望不是春鸡，但这是一个**巨大的**性能差距，比我在任何应用程序上看到的都要多：银河与欲望……

这是 Haxe 问题还是我做错了什么（错误的 NDK、错误的编译标志、操作系统太旧等）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T07:00:57.547

进入 Engine.hx，render() 函数，并注释掉 HXP.screen.refresh()。这条线绝对会扼杀 OUYA（一款安卓游戏机）的性能，所以它也可能会扼杀你。由于您不再每帧都清除屏幕，因此您需要通过向您的世界添加一个背景实例来在每次更新时绘制背景。我的游戏从 7 fps 变为 52 fps，仅在 1080p 分辨率和约 80 个实体下进行了这些更改。

还可以尝试从 github 获取最新的 HaxePunk 并运行 ant 来安装它，开发人员最近一直在研究 android 性能，并且有一些很好的未发布修复程序，这些修复程序将在上述修复程序之上。

# macos - 如何在 fireMonkey Rad studio XE2 中为 Mac Osx 创建/编辑文本文件 (.rtf)？

> ID：14252376
> 
> 赞同：2
> 
> 时间：2013-01-10T06:56:07.227
> 
> 标签：macos, delphi, delphi-xe2, firemonkey

我在 Rad Studio xe2 中创建了 Fire Monkey HD 应用程序。我使用方法在我的应用程序中创建了 windows 的文本文件。`AssignFile()`现在我想为 MAC OSx 创建文本文件。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T13:41:26.950

Delphi 包含的[`System.IOUtils.TFile`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.IOUtils.TFile)this 是一个记录，其中包含用于对文件执行各种操作的方法，因此要创建文本文件，您可以使用[TFile.WriteAllText](http://docwiki.embarcadero.com/Libraries/XE2/en/System.IOUtils.TFile.WriteAllText) 直接传递文件内容或使用[`TFile.Create`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.IOUtils.TFile.Create)创建文件并返回`TFileStream`. 您也可以[`TFileStream`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Classes.TFileStream)直接使用该类。

以上所有方法都适用于 Windows 和 OSX。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T19:53:39.283

AssignFile 是一个严重过时的函数。

在现代（和跨平台）应用程序中，您应该使用流。

# linux-kernel - linux调度器

> ID：14252377
> 
> 赞同：3
> 
> 时间：2013-01-10T06:56:19.080
> 
> 标签：linux-kernel, kernel

在我的内核配置中未设置 CONFIG_PREEMPT。由于中断处理程序中不允许 schedule() ，如何在 linux 内核中实现循环类型的调度。即谁如此频繁地调用调度程序。在 entry_32.S 中，它仅在设置了 CONFIG_PREEMPT 时才调用 preempt_schedule_irq。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:04:52.037

发生的事情是 CPU 上的计时器被设置为每隔一段时间中断内核。但是我们不能只从中断上下文中调用调度，对吗？所以内核所做的是一个巧妙的技巧。它在执行处理程序时更改当前正在执行的任务，然后返回。这有效地做的是从处理程序下面切换上下文，以便处理程序完成，但同时下一个要运行的上下文现在是下一个将执行的任务。继续阅读`do_context_switch`（IIRC，我认为这就是它的名称），您会看到它从当前执行下方切换它的堆栈和上下文，并在另一个上下文中恢复相同的功能。

并且`CONFIG_PREEMPT`仅适用于内核上下文中的内核代码抢占。用户空间任务将始终抢占。这意味着任何开始执行的内核代码都会运行到完成（除非您自己调用 schedule() 或阻塞等待 I/O 等....）。通常，只要内核不持有任何锁，内核就可以抢占，除非在某些情况下获取锁可以使线程进入睡眠状态。

# jena - 合并领域本体

> ID：14252384
> 
> 赞同：0
> 
> 时间：2013-01-10T06:56:45.510
> 
> 标签：jena, ontology, owl

我工作并开发了两种不同的领域本体。但是现在我喜欢合并这两个本体，因为我的应用程序需求已经改变并且需要两个本体的知识。什么是合并技术以及我如何使用本体框架（即耶拿、OWL-API 等）来做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:15:43.647

如果您的本体遵循[OWL 2 EL](http://www.w3.org/TR/owl2-profiles/#OWL_2_EL)配置文件，您可以使用[Brain](http://loopasam.github.com/Brain/)来完成：

```
Brain brain = new Brain();
brain.learn("path/to/first_ontology.owl");
brain.learn("path/to/second_ontology.owl");
//Do your logic here, like queries, etc...
brain.save("path/to/merged_ontologies.owl"); 
```

具有相同 IRI 的实体将自动合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-08T09:29:23.747

假设您有两个本体：modelA 和 modelB，如果您使用 Jena，您可以执行以下操作来合并它们：

```
modelA.add(modelB); 
```

或者

```
modelB.add(modelA); 
```

# c# - 来自网站的每日电子邮件提醒

> ID：14252389
> 
> 赞同：2
> 
> 时间：2013-01-10T06:57:15.273
> 
> 标签：c#, email, reminders

我在 C#、Sql Server 2008 中有一个发票应用程序。

在此应用程序中，在为特定客户创建发票后，管理员可以为该发票的付款设置每日、每周或每月的电子邮件余额，直到他/她为该发票付款。

那么最好的逻辑是什么......？

1.  服务器上的 Windows 服务（可能需要访问服务器）
2.  SQL 作业 CRON 或
3.  在服务器上安排的 AT 作业

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:08:04.180

不同的方法来做到这一点。在这些情况下，我主要使用 Windows 服务，但计划作业会很好。您还可以创建一个消息队列并添加规则以触发电子邮件。电子邮件代码可以在 DLL 中。

# php - 在php中设置间隔

> ID：14252390
> 
> 赞同：0
> 
> 时间：2013-01-10T06:57:35.163
> 
> 标签：php

> 我们是否有任何函数或代码段可以在特定时间间隔后调用特定函数，如 Javascript 中的 setInterval。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T06:58:37.943

PHP 在请求完成时终止，所以这是不可能的。

您可以在 linux 级别使用 cron。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T06:58:29.567

[`sleep`](http://php.net/sleep)在循环内可能是最接近的事情。PHP 并不是为此而设计的，真的。

# asp.net - 使用 NHibernate 基于外键在子表中插入行

> ID：14252391
> 
> 赞同：2
> 
> 时间：2013-01-10T06:57:44.157
> 
> 标签：asp.net, nhibernate, nhibernate-mapping

我希望有人以前遇到过这个问题并且可以帮助我。在我的数据库中，我正在使用表之间的关系

```
Ex:Authors,Author Books,Booksstore(salesDetails)
**Authors table**
=================
Aid int (Identity and Primarykey),AuthorName varchar(50)
=================

***********
**Author Books table**
=================
BookID int(primary key),BookName nvarchar(50),Aid int (foreign key Authorstable(Aid))
=================

**************
**Booksstore table**
================
StoreID int(primary key),Totalsales int,BookID int (foreign key Author Bookstable(BookID))
================ 

I'm using Nhibernate and mapping above tables in the following
*********************
**Authorsdao.hdm.xml**
*********************
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="Dal" namespace="Dal">
  <class name="AurthosDao,Dal" table="Aurthors Table" lazy="true">
    <id name="AId" column="AuthorID" type="int">
      <generator class="native" />
    </id>
    <property type="string" not-null="true" length="250" name="Authorname" column="AuthorName" />
    </class>
</hibernate-mapping>

*********************
**Authorbooksdao.hdm.xml**
*********************
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="Dal" namespace="Dal">
  <class name="AurthorBooksDao,Dal" table="AuthorBookstable" lazy="true">
    <id name="AId" column="AuthorID">
      <generator class="foreign">
        <param name="property">AId</param>
      </generator>
    </id>
    <property type="int" not-null="true" name="BookId" column="BookID" />
    <property type="string" not-null="true" name="Bookname" column="BookName" />
    </class>
</hibernate-mapping>

*********************
**Booksstoredao.hdm.xml**
*********************
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="Dal" namespace="Dal">
  <class name="BookStoreDao,Dal" table="Bookstoretable" lazy="true">
    <id name="BookId" column="BookID">
      <generator class="foreign">
        <param name="property">BookId</param>
      </generator>
    </id>
    <property type="int" not-null="true" name="StoreId" column="StoreID" />
    <property type="int" not-null="true" name="Totalsales" column="TotalSales" />
   </class>
</hibernate-mapping>

***************************
Now I have to insert the data from Asp.Net Nhibernate in to 3 tables in one transaction.

1)I'm inserting first in Authors table after that I'm trying to get that last inserting key from Authors table and pushing into Authorsbook table 
```

2）插入到 AuthorsBooks 表后，尝试从 AuthorsBook 表中获取最后插入的 BookID 并推入 BookStore 表。

如果有任何帮助将不胜感激..

Radmin 我在以下公共 IAuthors Aurthorsdata(PlanningManagerProxy proxy, String authorName,IBook books ,Ilist , IList attributes) { AuthorDao dao = new AuthorDao();

```
 using (ITransaction tx = proxy.MarcomManager.GetTransaction())
        {

            // Business logic of AuthorObjective

            dao.Name = authorName;

            tx.PersistenceManager.PlanningRepository.Save<AuthorDao>(dao);
            tx.Commit();

            AuthorDao  objList;
            using (ITransaction txGet = proxy.GetTransaction())
            {

                objList = txGet.PersistenceManager.PlanningRepository.Get<AuthorDao>(id);
                txGet.Commit();

            }
            var objId = from a in objList where a.AuthorID == authorId select a;

            using (ITransaction tx2 = proxy.MarcomManager.GetTransaction())
            {
                AuthorbooksDao objdao = new AuthorbooksDao();
                objdao.BookId = books.BookID;
                objdao.BookName=books.BookName;
                objdao.AuthorId= objId.AuthorId;
                tx2.PersistenceManager.PlanningRepository.Save<AuthorbooksDao>(objdao);
                tx2.Commit();

            }
            }
    } 
```

@Radim首先我提交Authors的事务，然后从AuthorDao（AuthorsTable）获取最后插入的记录，然后推入Bookstore表。但是在映射时间时外键不允许插入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:01:51.060

让我们试试这个映射（将你的表声明作为一个常量）。

C# 类：

```
 public class Author 
  {
     public virtual int ID { get; set; }
     public virtual string Authorname { get; set; }
  }

  public class Book
  {
     public virtual int ID { get; set; }
     public virtual Author Author { get; set; }
     public virtual string Bookname { get; set; }
  }

  public class BookStore
  {
     public virtual int ID { get; set; }
     public virtual Book Book { get; set; }
  } 
```

xml映射：

```
<class name="Author" table="Authors" lazy="true">
    <id name="ID" column="Aid" type="int">
      <generator class="native" />
    </id>

    <property type="string" not-null="true" length="250" name="Authorname" column="AuthorName" />
  </class>

  <class name="Book" table="AuthorBooks" lazy="true">
    <id name="ID" column="BookID">
      <generator class="native" />
    </id>

    <!-- reference Author -->
    <many-to-one name="Author" column="AID" cascade="all" />

    <property type="string" not-null="true" name="Bookname" column="BookName" />
    </class>

  <class name="BookStore" table="Bookstore" lazy="true">
    <id name="ID" column="StoreID">
      <generator class="native" />
    </id>

    <!-- reference Book -->
    <many-to-one name="Book" column="BookID" cascade="all" />

    <property type="int" not-null="true" name="Totalsales" column="TotalSales" />
  </class> 
```

以及如何创建作者、书籍和存储项目的代码 - 并将它们全部持久化：

```
 // instances creation
  var author = new Author { Authorname = "my author" };
  var book = new Book { Bookname = "my book "};
  var store = new BookStore { TotalSales = 1 };

  // references
  book.Author = author;
  store.Book = book;

  // cascade all will store them all with correct ID
  session.Save(author); 
```

*注意：在您的代码段中很少有错误，因此唯一的方法是在绿色字段上显示一个示例。例如，该文件应命名为 ...hbm.xml（而不是 ...hdm.xml，AurthosDao 而不是 AuthorsDao 等。*

# jquery - jquery是否被点击

> ID：14252393
> 
> 赞同：0
> 
> 时间：2013-01-10T06:57:46.417
> 
> 标签：jquery, jquery-mobile

这我肯定有一个非常简单的答案：

我有一个搜索表单，当您专注于表单时，表单下方会弹出其他按钮以允许您过滤选择，我试图使其在搜索表单上模糊，这些选项消失。目前，当您单击其中一个选项时，它会关闭选项菜单，因此我正在寻找一种方法来测试是否单击了这些选项。这是我到目前为止提出的代码：

```
 $("#search").blur(function(){
       $("#selector").click(function(){
           return false;
       });
       $("#selector").toggle();
    }); 
```

还尝试执行以下操作会产生失败的结果：

```
 var is_clicked = true;
    $("#selector").click(function(){
        is_clicked = false;
    });
    console.log ( is_clicked ); // always returns true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:10:16.970

看到这个：http: [//jsfiddle.net/gP8Jg/1/](http://jsfiddle.net/gP8Jg/1/)

```
 $("#search").blur(function(){
   $("#selector").mousedown(function(){
       return false;
   });
   $("#selector").toggle();
});
 $("#search").focus(function(){
   $("#selector").fadeIn();
}); 
```

尝试使用`mousedown()`而不是`click()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:12:39.047

如果您需要在单击选项后关闭选项菜单，请延迟切换它，例如。使用 js`setTimeout()`并点击选项元素本身

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T07:09:32.450

这总是返回 true，因为 console.log 是同步执行的：

```
var is_clicked = true;
$("#selector").click(function(){
    is_clicked = false;
    // console.log( is_clicked ); // will yeild false
});
console.log ( is_clicked ); // always returns true 
```

我不太明白你在这里做了什么：

```
$("#search").blur(function(){
   $("#selector").click(function(){
       return false; // Cancels the click
   });
   $("#selector").toggle(); // Slides vissible/hidden $('selector')
   // There is no code here that checks state of buttons or any other element
   // on the page.
}); 
```

单击时切换元素是在它自己的单击处理程序中完成的：

```
$('#selector').click(function (event) {
    $('#selector').toggle();
}); 
```

# eclipse-rcp - 在 Java RCP 应用程序的 Config.ini 文件中添加什么来获取 JRE 1.6？

> ID：14252396
> 
> 赞同：2
> 
> 时间：2013-01-10T06:58:08.877
> 
> 标签：eclipse-rcp, config, java

我的机器上安装了多个 JRE（Jre 1.6 和 Jre 1.7）。我使用 Jre 1.6 构建我的应用程序。但是当我启动我的 java RCP 应用程序时，它总是需要 Jre 1.7。

我可以在我的 config.ini 文件中添加一些内容以始终使用 Jre 1.6 启动它吗？我可以使用 Jre 1.6 作为 Jre 1.6 来构建代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:07:56.000

您必须在 eclipse.ini 中使用 -vm 选项，如下所示。

```
-vm
jre6/bin/javaw.exe 
```

用户还可以使用本地系统下安装的其他 JDK/JRE 的绝对位置更改路径信息。例如，在 Windows 中，我们可以拥有

```
-vm
C:/Java/JDK16/bin/javaw.exe 
```

如需更多帮助，请参阅[链接](http://wiki.eclipse.org/%C2%A0eclipse.ini)。

# oracle-adf - ADF 应用程序中的绑定容器和绑定上下文

> ID：14252397
> 
> 赞同：2
> 
> 时间：2013-01-10T06:58:12.403
> 
> 标签：oracle-adf

有人可以解释ADF中的 a`binding container`和概念吗？`binding context`在 ADF 页面生命周期中如何实例化上述对象？a`binding container`包含一个实例`binding context`还是相反？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-07T10:33:31.853

**绑定上下文**基本上是数据控件和应用程序中页面的页面定义（包含绑定信息）之间的映射。每当 adf 客户端或控制器启动与业务服务的交互时，它（交互）由应用程序通过单个对象进行管理。这个对象就是绑定上下文。

**Binding Container**用于实例化页面绑定。它包含绑定、可执行文件和数据控制映射。

**绑定上下文包含绑定容器**

**简单的例子进一步澄清它**..：

BindingContext bindingctx=BindingContext.getCurrent(); //获取绑定上下文

BindingContainer binding=bindingctx.getCurrentBindingsEntry();//获取容器

DCBindingContainer bindingsImpl = (DCBindingContainer) 绑定；// 使用 Container 中的引用获取应用程序模块（数据控件）。

DCIteratorBinding dciter = bindingsImpl.findIteratorBinding(“<b>iterName”); // 使用数据控件查找迭代器

ViewObject vo=dciter.getViewObject();// 获取迭代器为“dciter”的VO的View Object实例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T14:52:50.933

看看这些记录的培训，它们可能会有所帮助。 [http://download.oracle.com/otn_hosted_doc/jdeveloper/11gdemos/insiderBinding1/BindingsPart1.html](http://download.oracle.com/otn_hosted_doc/jdeveloper/11gdemos/insiderBinding1/BindingsPart1.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T05:20:39.327

简而言之，Data Bindings 文件包含页面映射、页面定义引用、数据控件引用。

数据控制文件包含数据控制定义

# android - 如何在android中停止录制？

> ID：14252400
> 
> 赞同：0
> 
> 时间：2013-01-10T06:58:28.073
> 
> 标签：android, recording

我有这个方法，

```
 if(null != recorder){
      recorder.stop();
      recorder.reset();
      recorder.release();
      recorder = null;
    } 
```

为什么它强制关闭我的应用程序？

提前致谢！

这是我的 VoiceRecording2.java .. 它有按钮，开始按钮和停止按钮并选择格式..

```
 package com.example.voicexml;

 import java.io.File;
 import java.io.IOException;

 import android.app.Activity;
 import android.app.AlertDialog;
  import android.content.DialogInterface;
 import android.media.MediaRecorder;
  import android.os.Bundle;
 import android.os.Environment;
 import android.view.View;
import android.widget.Button;

 public class VoiceRecording2 extends Activity {
    private static final String AUDIO_RECORDER_FILE_EXT_3GP = ".3gp";
    private static final String AUDIO_RECORDER_FILE_EXT_MP4 = ".mp4";
    private static final String AUDIO_RECORDER_FOLDER = "AudioRecorder";

    private MediaRecorder recorder = null;
    private int currentFormat = 0;
    private int output_formats[] = { MediaRecorder.OutputFormat.MPEG_4, MediaRecorder.OutputFormat.THREE_GPP };
    private String file_exts[] = { AUDIO_RECORDER_FILE_EXT_MP4, AUDIO_RECORDER_FILE_EXT_3GP }; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.voice);

    setButtonHandlers();
    enableButtons(false);
    setFormatButtonCaption();
}

    private void setButtonHandlers() {
            ((Button)findViewById(R.id.btnStart)).setOnClickListener(btnClick);
    ((Button)findViewById(R.id.btnStop)).setOnClickListener(btnClick);
    ((Button)findViewById(R.id.btnFormat)).setOnClickListener(btnClick);
    }

    private void enableButton(int id,boolean isEnable){
            ((Button)findViewById(id)).setEnabled(isEnable);
    }

    private void enableButtons(boolean isRecording) {
            enableButton(R.id.btnStart,!isRecording);
            enableButton(R.id.btnFormat,!isRecording);
            enableButton(R.id.btnStop,isRecording);
    }

    private void setFormatButtonCaption(){
            ((Button)findViewById(R.id.btnFormat)).setText(getString(R.string.audio_format) + " (" + file_exts[currentFormat] + ")");
    }

    private String getFilename(){
            String filepath = Environment.getExternalStorageDirectory().getPath();
            File file = new File(filepath,AUDIO_RECORDER_FOLDER);

            if(!file.exists()){
                    file.mkdirs();
            }

            return (file.getAbsolutePath() + "/" + System.currentTimeMillis() + file_exts[currentFormat]);
    }

    private void startRecording(){
            recorder = new MediaRecorder();

            recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
            recorder.setOutputFormat(output_formats[currentFormat]);
            recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
            recorder.setOutputFile(getFilename());

            recorder.setOnErrorListener(errorListener);
            recorder.setOnInfoListener(infoListener);

            try {
                    recorder.prepare();
                    recorder.start();
            } catch (IllegalStateException e) {
                    e.printStackTrace();
            } catch (IOException e) {
                    e.printStackTrace();
            }
    }

    private void stopRecording(){

    }

    private void displayFormatDialog(){
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            String formats[] = {"MPEG 4", "3GPP"};

            builder.setTitle(getString(R.string.choose_format_title))
                       .setSingleChoiceItems(formats, currentFormat, new DialogInterface.OnClickListener() {

                            public void onClick(DialogInterface dialog, int which) {
                                    currentFormat = which;
                                    setFormatButtonCaption();

                                    dialog.dismiss();
                            }
                       })
                       .show();
    }

    private MediaRecorder.OnErrorListener errorListener = new MediaRecorder.OnErrorListener() {
            public void onError(MediaRecorder mr, int what, int extra) {
                    AppLog.logString("Error: " + what + ", " + extra);
            }
    };

    private MediaRecorder.OnInfoListener infoListener = new MediaRecorder.OnInfoListener() {
            public void onInfo(MediaRecorder mr, int what, int extra) {
                    AppLog.logString("Warning: " + what + ", " + extra);
            }
    };

private View.OnClickListener btnClick = new View.OnClickListener() {
            public void onClick(View v) {
                    switch(v.getId()){
                            case R.id.btnStart:{
                                    AppLog.logString("Start Recording");

                                    enableButtons(true);
                                    startRecording();

                                    break;
                            }
                            case R.id.btnStop:{
                                if(null != recorder){
                                    //recorder.stop();
                                    //recorder.reset();
                                    //recorder.release();
                                    System.out.println("Churva");
                                    //recorder = null;
                            }
                                AppLog.logString("Start Recording");

                                    enableButtons(false);

                                    //stopRecording();

                                    break;
                            }
                            case R.id.btnFormat:{
                                    displayFormatDialog();

                                    break;
                            }
                    }
            }
    }; 
```

}

它是一个简单的 porgram，可以在您的 android 设备中录制声音。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:10:34.897

检查记录器方法的 Java 文本，`stop()`其中显示：

> {`public void stop ()` 自：API 级别 1 停止记录。之后调用这个`start()`。停止录制后，您必须重新配置它，就像它刚刚构建一样。
> 
> 请注意 `RuntimeException`，如果在调用时没有接收到有效的音频/视频数据，则故意将 a 扔给应用程序`stop()`。如果`stop()`在 之后立即调用，就会发生这种情况`start()`。失败让应用程序采取相应的行动来清理输出文件（例如，删除输出文件），因为发生这种情况时输出文件的构造不正确。
> 
> 如果在}`IllegalStateException` 之前调用，则抛出`start()`

`stop()`因此，由于调用方法时没有收到有效的音频/视频数据，可能会出现异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:42:17.360

首先，创建一个MediaRecorder类的新实例（android.media.MediaRecorder）

```
MediaRecorder mr = new MediaRecorder(); 
```

接下来，设置音频源或录音设备。通常，您需要将其设置为 MIC

```
mr.setAudioSource(MediaRecorder.AudioSource.MIC); 
```

现在指定输出格式。这是录制文件将存储的音频格式。

```
mr.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP); 
```

还要指定 AudioEncoder 类型

```
mr.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB); 
```

最后，指定将存储记录数据的文件名。路径名称是音频文件的完整路径。

```
mr.setOutputFile(PATH_NAME); 
```

现在，整个设置完成。`prepare()`您只需要通过调用和调用`start()`和`stop()`函数来开始/停止录制来准备实例。

```
mr.prepare();mr.start();.......mr.stop(); 
```

录制完成后，您可以通过调用释放与该特定实例关联的资源

```
mr.release(); 
```

您还可以通过调用将 MediaRecorder 实例重置为初始状态

```
mr.reset(); 
```

（可选）您还可以使用`mr.setMaxDuration()`设置录制的最大持续时间和`mr.setMaxFileSize()`设置用于录制的最大文件大小。

添加`<uses-permission android:name="android.permission.RECORD_AUDIO">`您的清单

# java - 将字符串从数组替换为文件中的行

> ID：14252403
> 
> 赞同：-1
> 
> 时间：2013-01-10T06:58:36.153
> 
> 标签：java, arrays, string, file

我的文件有：

```
 public class MyC{
    public void MyMethod()
    {
        System.out.println("My method has been accessed");
        System.out.println("hi");
    }
} 
```

下面的代码执行以下操作。1.如果行数相等`num[index]`，则检查该行是否包含来自的字符串 `VALUES1[index]`。如果为真，它将从第一个索引中替换该字符串`VALUES[index]`并写入一个新文件。

2.如果num index不相等`num[index]`，它只是将行写入新文件。

**我遇到的问题是，在写入新文件后，原来的第 1 行和第 2 行仍然出现在新文件中。如何删除它。**

这是我的代码：

```
public class MainTest {

    static int i ;

    public static void main(String[] arg)
    {
        try {

             int num[] = {1,2,4}; //Line Numbers

             String[] VALUES = new String[] {"AB","BC","CD"}; //Correct Solutions

             String[] VALUES1 = new String[] {"class","void","System"}; //To Replace

             FileInputStream fs= new FileInputStream("C:\\Users\\Antish\\Desktop\\Test_File.txt");
             BufferedReader br = new BufferedReader(new InputStreamReader(fs));

             FileWriter writer1 = new FileWriter("C:\\Users\\Antish\\Desktop\\Test_File1.txt");

             String line;
             String line1 = null;

             Integer count =0;

             line = br.readLine();
             count++;

             while(line!=null){

                 for(int index =0;index<num.length;index++){
                     if(count == num[index]){

                         if(line.contains(VALUES1[index])){

                             line1= line.replace(VALUES1[index], VALUES[index]);
                              writer1.write(line1+System.getProperty("line.separator"));
                         }

                     }
                 }

                 writer1.write(line+System.getProperty("line.separator"));

                 line = br.readLine();

                 count++;

                 }

        writer1.close();
        }
        catch (Exception e) {
            e.printStackTrace();
        } finally {
        }

     }
} 
```

这是我的结果：

```
 public AB MyC{
    **public class MyC{ //This still appears.**
    public BC MyMethod()
    **public void MyMethod()//This still appears.**
    {
        CD.out.println("My method has been accessed");
        System.out.println("My method has been accessed");
        System.out.println("hi");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:22:26.357

你应该添加一个指示器来显示这条线是否被替换

而（线！=空）{

```
 boolean exists = false;
             for(int index =0;index<num.length;index++){
                 if(count == num[index]){

                     if(line.contains(VALUES1[index])){
                         exists = true;
                         line1= line.replace(VALUES1[index], VALUES[index]);
                          writer1.write(line1+System.getProperty("line.separator"));
                     }

                 }
             }

             if (!exists)
                 writer1.write(line+System.getProperty("line.separator")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:29:22.890

在代码中注释这一行

```
writer1.write(line+System.getProperty("line.separator")); 
```

然后尝试

# tiles - 在 JSP 中的 Tiles 内通信

> ID：14252405
> 
> 赞同：0
> 
> 时间：2013-01-10T06:58:38.150
> 
> 标签：tiles, tile, apache-tiles

我有一个标题、菜单和正文来加载 jsps。当我每次单击菜单元素时，整个图块都会重新加载。但我想向用户显示选定的菜单项。由于瓷砖重新加载，我无法获取用户单击的元素。请让我解决这个问题。谢谢

```
 <definition name="main-tiles" template="/WEB-INF/jsp/menu/home.jsp">
    <put-attribute name="header" value="/WEB-INF/jsp/menu/header.jsp" />
    <put-attribute name="menu" value="/WEB-INF/jsp/menu/menu.jsp" />
    <put-attribute name="body" value="" />    
  </definition>

  <definition name="home" extends="main-tiles">
    <put-attribute name="body" value="" />
  </definition>

  <!--  User Tiles -->  
  <definition name="newUser" extends="main-tiles">
    <put-attribute name="body" value="/WEB-INF/jsp/userandorg/user/newUser.jsp" />
  </definition> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:32:40.607

瓷砖并没有真正相互“交流”。

当瓦片组成的页面在您的浏览器中完全呈现时，查看 html（查看源代码），您应该很难看到任何显示的瓦片框架。这意味着当你的用户点击一个菜单时，它是一个返回到你的服务器的往返通信，它通过你的 servlet 代码运行，然后使用瓦片框架来组成生成的 html。

`frameset`您描述为所需行为的行为更像是`iframe`浏览器窗格的不同部分实际上是不同的请求/响应的行为。您可以使用可以调用 servlet 的框架实现相同的效果，`AJAX`然后动态更新 html 的特定块（通常定义为`div`或`span`元素），而无需刷新整个页面。

但是，如果您只想使用您的 tile 组合突出显示单击的菜单，请让您的 servlet 识别单击了哪个菜单，然后`JSTL`在 menu.jsp 页面上使用一些来识别菜单项链接并为菜单链接提供一些`CSS`样式。它仍然是往返（非`AJAX`）通信，但它应该会给您所描述的效果。

# wpfdatagrid - 以编程方式滚动 WPF 4 DataGrid 到结束

> ID：14252408
> 
> 赞同：3
> 
> 时间：2013-01-10T06:58:48.743
> 
> 标签：wpfdatagrid

有谁知道以编程方式将 WPF DataGrid (.NET 4) 滚动到最后一行的**可靠**方法？

我知道`ScrollIntoView(Items[Items.Count-1])`，但这仅在项目是唯一的情况下才有效。

例如，考虑以下 DataGrid，它显示所有已安装的文化，然后是所有已安装的文化：

```
var cultures = System.Globalization.CultureInfo.GetCultures (System.Globalization.CultureTypes.AllCultures);
var timesTwo = cultures.Concat (cultures).ToArray();

var grid = new DataGrid { ItemsSource = timesTwo }; 
```

这个网格如何以编程方式滚动到最后一行？

PS 使用 ScrollIntoView 的另一个问题是，如果网格本身位于可滚动容器中（例如，在另一个网格内），则 ScrollIntoView 不仅会滚动它自己的网格，还会滚动外部网格，以便请求的元素在屏幕上可见。这在某些情况下可能是有益的，但在其他情况下肯定不是。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T05:42:16.787

对于有此问题的任何人，以下似乎都可以解决问题：

```
var scrollerViewer = GetScrollViewer();
if (scrollerViewer != null) scrollerViewer.ScrollToEnd();

...

ScrollViewer GetScrollViewer()
{
   if (VisualTreeHelper.GetChildrenCount (this) == 0) return null;
   var x = VisualTreeHelper.GetChild (this, 0);
   if (x == null) return null;
   if (VisualTreeHelper.GetChildrenCount (x) == 0) return null;
   return VisualTreeHelper.GetChild (x, 0) as ScrollViewer;
} 
```

# jquery - MVC popup\modal 表单最佳实践

> ID：14252421
> 
> 赞同：0
> 
> 时间：2013-01-10T06:59:57.617
> 
> 标签：jquery, asp.net-mvc, design-patterns, crud

我正在使用 MVC 3，我正在尝试找到一个很好的来源，它将列出在我的应用程序中使用模态对话框表单（jQuery 或任何其他类型）和/或弹出窗口的最佳实践。

例如：我有我的 CRUD 操作视图及其相应的控制器操作，但我希望在新窗口\模式对话框中打开并在关闭时刷新父开启器。

我可以编写很多丑陋的 java 脚本来实现它，但我正在寻找将其合并到 MVC 应用程序中的最佳实践。

**编辑问题认证**

对于模态对话框，主要是我无法理解当字段动态加载到表单容器中时所有客户端验证如何工作我将如何重新映射验证触发器......

对于常规弹出窗口，我不想刷新父页面并传递参数来选择新创建的对象..

所以我可以双向使用，但我都陷入了不同的阶段..

验证任何建议或链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:12:13.090

我在我的一个 Asp.net MVC 4 项目中使用 Twitter [Bootstrap](http://twitter.github.com/bootstrap/)。Twitter Bootstrap 模态表单比普通的 javascript 更容易使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T09:31:21.833

我找到了一个使用 jQuery 的不错的教程：

**ASP MVC3 – 使用 jQueryUI 对话框和 AjaxForms 编辑记录 – Razor 版本**

[http://ricardocovo.com/2012/04/06/asp-mvc3-editing-records-with-jqueryui-dialogs-and-ajaxforms-razor-version/](http://ricardocovo.com/2012/04/06/asp-mvc3-editing-records-with-jqueryui-dialogs-and-ajaxforms-razor-version/)

**ASP MVC3 – 使用 jQueryUI 对话框和 AjaxForms 编辑记录 – ASPX 版本**

[http://ricardocovo.com/2011/04/03/asp-mvc3-editing-records-with-jqueryui-dialogs-and-ajaxforms/](http://ricardocovo.com/2011/04/03/asp-mvc3-editing-records-with-jqueryui-dialogs-and-ajaxforms/)

# graphviz - 为什么 Graphviz/Dot 对这个特定代码的行为如此奇怪？

> ID：14252422
> 
> 赞同：1
> 
> 时间：2013-01-10T07:00:08.783
> 
> 标签：graphviz, dot, graph-visualization

我在 Windows 7 上使用 GraphViz 2.28 [（当前稳定版本）](http://www.graphviz.org/Download_windows.php)，并且 Graphviz/Dot 因以下代码而崩溃。

```
digraph G {
ranksep = 1.0; size = "10,10";
{
    node [shape = plaintext, fontsize = 20];
    GAWM1 -> GAWM2 -> 0;
}

node [shape = box];
{rank = same;0;wx1;wx2;rx1;}

wx1 -> wx2;
wx2 -> rx1;
wx1 -> rx1[color = blue];

subgraph struct
{
    node [shape = record];
    rx11 [shape = record, label = "rx1 | [x=[wx2]]"];
}
{rank = same; GAWM1; "rx11";}

// W'WR Order:
wx2 -> wx1[style = dashed, color = red, label = "1"]; } 
```

当我对这个例子进行一些实验时，事情变得很奇怪：

1.  *只有*最后一条语句“wx2 -> wx1[style = dashed, color = red, label = “1”];”时效果很好 已移除;
2.  *仅*删除第八行“{rank = same;0;wx1;wx2;rx1;}”时效果很好；
3.  *当仅*删除最后一条语句中的标签（即“，标签=“1””）时，它也能很好地工作。

我已将问题报告给[Graphviz 问题跟踪器](http://www.graphviz.org/mantisbt/view.php?id=2243)，但尚未回复。你能帮忙找出原因吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:30:56.237

您的脚本的以下变体**不会**崩溃：

```
digraph G {
ranksep = 1.0; size = "10,10";
{
    node [shape = plaintext, fontsize = 20];
    GAWM1 -> GAWM2 -> 0;
}
node [shape = box];
{rank = same;0;wx1;wx2;rx1;}
wx1 -> wx2;
wx2 -> rx1;
wx1 -> rx1[color = blue];
subgraph struct
{
    node [shape = record];
    rx11 [shape = record, label = "rx1 | [x=[wx2]]"];
}
{rank = same; GAWM1; "rx11";}
// W'WR Order:
//wx2 -> wx1[style = dashed, color = red, label = "1"]; 
wx2 -> wx1 [style=dashed, color=red];
} 
```

看起来像 和之间`label`的短边的错误。`wx1``wx2`

# java - 如何以更具体的方式处理 NumberFormatException？

> ID：14252427
> 
> 赞同：1
> 
> 时间：2013-01-10T07:00:29.847
> 
> 标签：java, exception-handling, validation, numberformatexception

我想以更具体的方式处理 NumberFormatException 。当它尝试分配除整数以外的任何内容时，当输入以下内容时，会发生此异常：

1.  细绳
2.  特点
3.  空输入
4.  双数

根据输入的内容，我想显示正确的消息，例如

> 您已输入字符串，请输入整数

或者

> 值不能为空，请输入整数值

下面的代码`NumberFormatException`以一般方式捕获。

我想知道有没有办法包含更多的 catch 子句。

```
 import java.util.Scanner;

    public class TestException {

        static int input;
        static Scanner scan = new Scanner(System.in);

        public static void main(String[] args) {
            System.out.println("Enter an integer number: ");

            try {
                input = Integer.parseInt(scan.next());
                System.out.println("You've entered number: " + input);
            } catch (NumberFormatException e) {
                System.out.println("You've entered non-integer number");
                System.out.println("This caused " + e);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T07:07:10.020

首先从用户那里获取输入，然后尝试将其转换为整数。

```
 static int input;
    static Scanner scan = new Scanner(System.in);

    public static void main(String[] args) {
        System.out.println("Enter an integer number: ");

        String inputString = scan.next();

        try {
            input = Integer.parseInt();
            System.out.println("You've entered number: " + input);
        } catch (NumberFormatException e) {
            if(inputString.equals("") || inputString == null) {
                System.out.println("empty input"); 
            } else if(inputString.length == 1) {
                System.out.println("char input");
            } else {
                System.out.println("string input");
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T07:06:58.023

您必须使用`if-else`构造在`catch`块内指定您的场景。

请看下面的代码：

```
String inString = null;
try 
{
    iString = scan.next().trim();
    input = Integer.parseInt(inString);
    System.out.println("You've entered number: " + input);
} 
catch (NumberFormatException e) 
{
    if(inString.equals("")
    {
        System.out.println("You've entered empty string.");
    }
    else if(inString.length() == 1)
    {
        System.out.println("You've entered a single char");
    }
    else
    {
        System.out.println("You've entered non-intereger number");
    }
    System.out.println("This caused " + e);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T07:08:10.360

如果将输入解析为整数值导致异常，您可以对输入进行更多测试，如下所示：

```
String scanned = null
try {
   scanned = scan.next();
   input = Integer.parseInt(scanned);
   System.out.println("You've entered number: " + input);
} catch (NumberFormatException e) {
   if (scanned == null || scanned.isEmpty()) {
      System.out.println("You didn't enter any value");
   } else if (scanned.length() == 1)
      System.out.println("You entered a single char which is not a number");
   }
   // and more tests, you can even try to parse as Double
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T07:18:29.547

```
String aString = null;
    aString = scan.next().trim();   
    System.out.println("You've entered number: " + aString);
    if("".equals(aString.trim())){
       System.out.println("You have entered an Empty String");
     }else if(!isNumber(aString) && aString.length()==1){
       System.out.println("You have entered a Character");
     }else if(!isNumber(aString) && aString.length()>1){
       System.out.println("You have entered a String");
     }else if(isNumber(aString)){
       int input = Integer.parseInt(aString.replaceAll(",",""));
       System.out.println("You have entered a correct Number"+input); 
     }

   private boolean isNumber(String s){
        return s.matches("[0-9]+(,[0-9]+)*,?");
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-17T08:27:53.393

```
public static int isInt(){
        boolean ok=false;
        int b=1;
        do{
            String next = sc.next();
            int a=b;
            try{
             a = Integer.parseInt(next);        
            }catch(Exception e){

                System.out.println("Invalid Option...");
                continue;
            }

            if(a==1){b=a;ok=true;}
            else if(a==2){b=a;ok=true;}
            else if(a==3){b=a;ok=true;}

        }while(!ok);
    return b;
} 
```

# ruby-on-rails - 当我 cd 进入我的 rails 项目目录时，为什么 rvm 会切换 gemset？

> ID：14252430
> 
> 赞同：2
> 
> 时间：2013-01-10T07:00:51.180
> 
> 标签：ruby-on-rails, rvm

当我 cd 进入我的 rails 项目目录时，rvm 会切换 gemsets 的可能原因是什么？

我没有 .rvmrc 文件。我设置了一个默认 gemset（它“粘”在其他目录中）。这就是我的意思：

```
[20130109_234306] will@localhost:~
$ rvm gemset list

gemsets for ruby-1.9.3-p362 (found in /Users/will/.rvm/gems/ruby-1.9.3-p362)
   (default)
   global
=> ruby-1.9.3

[20130109_234313] will@localhost:~
$ cd Projects/rails_project

[20130109_234320] will@localhost:~/Projects/rails_project
$ rvm gemset list

gemsets for ruby-1.9.3-p362 (found in /Users/will/.rvm/gems/ruby-1.9.3-p362)
=> (default)
   global
   ruby-1.9.3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T09:12:30.967

如果 Gemfile 指定了 ruby​​ 版本（例如 ruby​​="1.9.3" 或 #ruby=1.9.3@gemset），rails 项目目录中的 Gemfile 将告诉 RVM 切换 rubies。

这是因为 RVM 支持的不仅仅是`.rvmrc`=> [https://rvm.io/workflow/projects/#ruby-versions](https://rvm.io/workflow/projects/#ruby-versions)可以在此处找到完整列表：[https ://github.com/wayneeseguin/rvm/blob/master/脚本/函数/rvmrc#L743-L744](https://github.com/wayneeseguin/rvm/blob/master/scripts/functions/rvmrc#L743-L744)

请注意，RVM 将在 Gemfile*之前*`.rvmrc` `.versions.conf` `.ruby-version` `.rbfu-version` `.rbenv-version`检查以下文件： . 因此，创建`.rvmrc`带有“”行的文件`rvm use ruby-1.9.3-p362@ruby-1.9.3`会使 RVM 忽略 Gemfile。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:07:31.637

RVM 有一个名为[Project .rvmrc](https://rvm.io/workflow/rvmrc/)的功能。其中`~/Projects/rails_project`有一个名为 的文件`.rvmrc`，其中包含有关 RVM 的说明，以便您进入该项目。

**编辑**：我错过了有关您没有该文件的信息。对不起。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-13T20:20:52.973

您可以禁用项目 .rvmrc，它也会禁用项目 Gemfile 检查。为此，将以下行添加到`/etc/rvmrc`or `~/.rvmrc`。然后您不必将 .rvmrc 文件添加到任何项目，因为 Gemfile 将忽略它们。这是在 rvm 上测试的`1.19.6 (Stable)`。

```
rvm_project_rvmrc=0 
```

来源：[https ://rvm.io/workflow/rvmrc](https://rvm.io/workflow/rvmrc)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-10T05:51:20.127

至少有两种方法可以实现这一点，例如：</p>

1.  `echo 2.1.1 > .ruby-version`和`echo rails4 > .ruby-gemset`

2.  将第一行添加 `#ruby=2.1.1@rails4`到 Gemfile

> 为什么`.ruby-gemset`？
> 
> `.ruby-version`也支持 gemsets 的形式，`ruby@gemset`但这与其他 Ruby 版本管理器不兼容。另一个文件可用于指定 gemset 而不会破坏兼容性 - `.ruby-gemset`.

我认为以上是最佳实践。

# java - 如何从 Java 中获取 Acoustid (Chromaprint) 以识别 mp3/m4a/etc

> ID：14252432
> 
> 赞同：4
> 
> 时间：2013-01-10T07:00:59.463
> 
> 标签：java, ffmpeg, transcoding, xuggler, audio-fingerprinting

有没有人设法在 Java 应用程序中使用 acoustid (http://acoustid.org/chromaprint)？访问 chromaprint clib 应该很容易，但我不能只传入音频文件。我需要原始未压缩的音频数据。

我尝试使用 xuggler 来获取未压缩的音频，但没有得到任何结果。基本上我不知道如何从 mp3/m4a/etc 等编码文件中获取原始音频

有没有人设法完成这项工作？有人介意分享他们的代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T12:47:35.220

我建议您使用`fpcalc`命令行工具（包含在 Chromaprint 中，网站上包含 Windows/Mac/Linux 的二进制文件），在 Java 应用程序的子进程中运行它。你会得到这样的输出，应该很容易解析：

```
FILE=/path/to/file.mp3
DURATION=398
FINGERPRINT=AQADtEqkRIkkrQ... 
```

这就是大多数程序集成 AcoustID 的方式，我相信这是最简单的方式。

# php - 如果检查了两个变体，我如何组合数组？

> ID：14252439
> 
> 赞同：0
> 
> 时间：2013-01-10T07:01:32.903
> 
> 标签：php, jquery, arrays

我的复选框示例[http://jsfiddle.net/8PVZ5/1/](http://jsfiddle.net/8PVZ5/1/)

当我检查`sizes`输出将是这样的

![在此处输入图像描述](../Images/700494b760ace6db3665b692f982a318.png)

如果我检查了两个或多个变体，我可以将它们组合成这样。

![在此处输入图像描述](../Images/e66140c832e52bb313b062d9b9f08a66.png)

我的数组输出

```
Array
(
    [0] => Array
        (
            [id] => 1
            [name] => Sizes
            [parent] => 0
            [children] => Array
                (
                    [0] => Array
                        (
                            [id] => 2
                            [name] => S
                            [parent] => 1
                        )

                    [1] => Array
                        (
                            [id] => 3
                            [name] => L
                            [parent] => 1
                        )

                    [2] => Array
                        (
                            [id] => 4
                            [name] => M
                            [parent] => 1
                        )

                )

        )

    [1] => Array
        (
            [id] => 5
            [name] => Colors
            [parent] => 0
            [children] => Array
                (
                    [0] => Array
                        (
                            [id] => 6
                            [name] => Blue
                            [parent] => 5
                        )

                    [1] => Array
                        (
                            [id] => 7
                            [name] => Yellow
                            [parent] => 5
                        )

                )

        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:45:17.373

这是一种方法：

*   首先创建一个包含所有颜色的数组
*   循环遍历所有尺寸并为每个尺寸添加颜色（参见下面的代码）

    ```
    $colors = array();
    $colorsChildren = $yourColorArray['children'];
    foreach($colorsChildren as $color): // loop through all the individual color options
        $colors[] = $color; //add the color and it's data to the array;
    endforeach;

    $combinedArray = array();
    $sizeChildren = $yourSizeArray['children'];
    foreach($sizeChildren as $size):
        $size['colors'] = $colors; // add all the colors to each size
        $combinedArray[] = $size; // add the size (with the colors) to the new array
    endforeach; 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:10:28.120

我整理了一个 jQuery 逻辑，它 greps 您的颜色表的字段并将它们替换/附加到原始表的大小：

```
$("#v1").on("click", function () {
    if (this.checked) {
        $(".v1").show()
    } else {
        $(".v1").hide()
    }
});
$("#v2").on("click", function () {
    if (this.checked) {
        if(!$('.v1').hasClass('colorfields')) {
            $('.v1').addClass('colorfields');
            var $add = $('.v2').find('tr:gt(0)');
            $('.v1').find('tr:gt(0)').each(function() {
                var $row = $(this),
                    size = $row.find('td:eq(0)').text();
                $add.clone().each(function() {
                    var $newRow = $(this);
                    $newRow.insertAfter($row).addClass('with-col');
                    $newRow.prepend('<td>'+size+'</td>');
                    $newRow.find('input').each(function() {
                        var fieldname = $(this).attr('name').toString(),
                        newName = fieldname.replace(/field/g,'field['+size.toLowerCase()+']');
                        $(this).attr('name',newName);
                    });
                });
                $('.v1').find('tr:eq(0) td:eq(0)').attr('colspan',7);
                $row.addClass('no-col').hide();
            }); 
        } else { 
            $('.no-col').hide();
            $('.with-col').show();
        }
    } else {
        $('.no-col').show();
        $('.with-col').hide();
    }
}); 
```

我还重命名了您的字段，以便在后端获得一个关联数组，这更容易处理。字段名称如下所示：field[SIZECODE][FIELDID]，或者，如果颜色表可见：field[SIZECODE][COLORCODE][FIELDID]。这是更新的[小提琴](http://jsfiddle.net/RxPjw/)。此示例不处理停用尺寸并仅显示颜色的情况，但是（因为 org 颜色表仍然存在）实施起来应该没有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T08:25:36.197

尝试这个..

```
<?php
//Suppose your array is like 
$tempArray = array(
    "0" => Array
        (
        "id" => 1,
        "name" => "Sizes",
        "parent" => 0,
        "children" => Array(
            "0" => Array("id" => 2, "name" => "S", "parent" => 1),
            "1" => Array("id" => 3, "name" => "L", "parent" => 1),
            "2" => Array("id" => 4, "name" => "M", "parent" => 1)
        )
    ),
    "1" => Array
        (
        "id" => 5,
        "name" => "Colors",
        "parent" => 0,
        "children" => Array(
            "0" => Array("id" => 6, "name" => "Blue", "parent" => 5),
            "1" => Array("id" => 7, "name" => "Yellow", "parent" => 5)
        )
    )
);
?>
<!-- CSS -->
<style>
    table {border:1px solid #ddd; margin:5px; width:400px;}
td {border:1px solid #ddd; padding:5px;}
td.label { width:50px;}
.sizes,.colors,.colors_sizes{display: none;}
</style>

    <!-- Script required -->
    <script type="text/javascript" src="jquery.js"></script>

    <script>
        $(document).ready(function(){
    $("#v1").click(function () {   
        if (this.checked) {
                $(".table").show();
                if($("#v2").attr("checked")==true){
                      $(".colors_sizes").show();
                      $(".colors").hide();
                        $(".sizes").hide(); 
                }else{
                    $(".sizes").show();
                    $(".colors").hide();
                    $(".colors_sizes").hide();            
                }

        }else{
                if($("#v2").attr("checked")==true){
                    $(".table").show();
                    $(".colors_sizes").hide();
                    $(".sizes").hide();
                    $(".colors").show();                
                }else{
                $(".table").hide();
                }
            }
    });

    $("#v2").click(function () {     
        if (this.checked) {
                $(".table").show();
                if($("#v1").attr("checked")==true){
                      $(".colors_sizes").show();
                       $(".colors").hide();
                        $(".sizes").hide(); 
                }else{
                    $(".colors").show();
                    $(".sizes").hide(); 
                    $(".colors_sizes").hide();               
                }

        }else{
                if($("#v1").attr("checked")==true){
                    $(".table").show();
                    $(".colors_sizes").hide();
                    $(".colors").hide();
                    $(".sizes").show();                
                }else{
                $(".table").hide();
                }
            }
    });
    });
    </script>

    <!-- HTML and PHP code -->
    Variations : 
    <input id="v1" value="v1" type="checkbox" name="v1"> Sizes
    <input id="v2" value="v2" type="checkbox" name="v2"> Colors
    <table cellspacing="0" class="table" style="display:none;">
        <?php 
        foreach($tempArray['0']['children'] as $sizes){?>

            <tr class="sizes">
                <td><?php echo $sizes['name']; ?></td>             
                <td><input type="checkbox"/>Execute</td>
            </tr>
          <?php foreach($tempArray['1']['children'] as $colors){ ?>
            <tr class="colors">
                <td><?php echo $colors['name']; ?></td>    
                <td><input type="checkbox"/>Execute</td>
            </tr>
            <tr class="colors_sizes">
                <td><?php echo $sizes['name']; ?></td>
                <td><?php echo $colors['name']; ?></td>    
                <td><input type="checkbox"/>Execute</td>
            </tr>
            <?php } ?>
        <?php } ?>
    </table> 
```

希望这会帮助你。

# java - 列表方法如何工作？

> ID：14252444
> 
> 赞同：-11
> 
> 时间：2013-01-10T07:01:45.343
> 
> 标签：java, jakarta-ee

> **可能重复：**
> [列表方法在 java 中的工作原理](https://stackoverflow.com/questions/14252068/how-list-methods-works-in-java)

List是java中的一个接口。它有一些方法。通常，接口是方法原型的规范。即接口仅由方法签名组成，接口中的该方法没有实现。

我怀疑如果 List 接口的方法在接口内没有任何实现，它们是如何工作的。

假设我有一个类 Book，它具有 name 属性、setter、getter 方法。我还有另一堂像这样的getBooks。

```
public class GetBooks{
List<Book> list;
public List<Book> getBooks(){
return list;
}
//setter method..
} 
```

我在运行时通过其他一些类将书籍发送到 set 方法。

我有另一堂这样的UseBooks。

```
public class UseBooks{
.....
....
List<Book> list = new GetBooks().getBooks();
list.add(new Book("aaa"));
} 
```

我的问题是 add 方法如何添加书籍，即使它在接口 List 中，因为我的 getBooks() 返回 List 接口而不是 Arraylist 或其他一些实现类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:05:33.840

```
List<Book> list 
```

这里的 list 是对对象的引用，而不是对象本身。当你在这个引用上调用接口方法时，你实际上是在调用这个引用指向的某个具体类的重写方法。

为了显示

```
List<Book> list = new List<Book>(); //Illegal
List<Book> list = new ArrayList<Book>(); //legal ArrayList is a concrete implementation of list. 
```

这就是接口的力量，我可以用这个参考做一些事情，而不用担心它是如何工作的或它是如何实现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:47:38.743

是的，您需要创建一个图书列表对象，如下所示

```
//list as object
List<Book> list = new ArrayList<Book>();

//get your data

List<Book> temp = getBooks();

//now add another List of records to list

list.addAll(temp); 
```

注意：= 正如您所说，您将通过 getBooks() 方法获取图书列表，所以我在示例中进行了解释

# android - 重启手机后Android从剪贴板粘贴文本

> ID：14252447
> 
> 赞同：8
> 
> 时间：2013-01-10T07:01:54.680
> 
> 标签：android, restart, clipboardmanager

我正在使用 android 剪贴板管理器并尝试将字符串粘贴到我的 android 应用程序中，如[developer.android.com 教程](http://developer.android.com/guide/topics/text/copy-paste.html)中所述。我可以在正常情况下粘贴字符串，但在以下情况下会出现问题。

设想：

我从文本文件中复制一个字符串。然后重启手机/安卓设备。然后我运行我的应用程序。现在在我的应用程序中，clipBoard.hasPrimaryClip() 函数返回 false。所以剪贴板中不应该有数据复制。但是，如果我打开一个文本文件或打开 Skype，我可以粘贴在重新启动手机/Android 设备之前复制的字符串。

那么如何在重新启动之前获取复制到剪贴板的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:37:08.067

我想他们正在使用其他一些持久性存储来存储剪辑数据。也许尝试将剪辑数据写入数据库或在重新启动时不会被擦除的东西。

# javascript - 如何在 android 的 Webview 中使用 Javascript 加载 HTML 代码

> ID：14252451
> 
> 赞同：0
> 
> 时间：2013-01-10T07:02:31.217
> 
> 标签：javascript, android, html, for-loop

我有一个带有下面给出的 java 脚本的 HTML 代码。

```
<!DOCTYPE html>
<html>
<body style = "text-align:center">
<script>

var out = '';
for (var counter = 1; counter <= 10; counter++) 
    { 
        out += '<img src="http://shiaislamicbooks.com/books_snaps/UR335/'+counter+'.jpg"alt="Page No:'+counter+'" height="100%" width="100%" />';
    } 
document.write(out);
</script>
</body>
</html> 
```

我只想使用该`loadDataWithBaseURL(null, htmlString ,"text/html", "UTF-8", null);`方法将其加载到我的android的webview中

*   简而言之，我需要的是如何在 htmlString 中转换上面的 HTML 代码（有一个 java 脚本循环），以便我可以 `loadDataWithBaseURL(null, htmlString ,"text/html", "UTF-8", null);`灵活地将其插入方法中

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:05:31.197

下面的片段可以帮助你...

```
 webView = (WebView) findViewById(R.id.webView1);
   webView.getSettings().setJavaScriptEnabled(true);
   //webView.loadUrl("http://www.google.com");

   String customHtml = "<html><body><h1>Hello, WebView</h1></body></html>";
   webView.loadData(customHtml, "text/html", "UTF-8"); 
```

# php - PHPExcel 文件无法打开文件，因为文件格式或文件扩展名无效

> ID：14252465
> 
> 赞同：12
> 
> 时间：2013-01-10T07:03:42.923
> 
> 标签：php, phpexcel

我被这个问题困住了，它没有显示实际的excel文件。请在下面检查我的代码：

```
/** Error reporting */
error_reporting(E_ALL);

/** PHPExcel */
require_once 'PHPExcel.php';
include 'PHPExcel/Writer/Excel2007.php';

// Create new PHPExcel object
#echo date('H:i:s') . " Create new PHPExcel object\n";
$objPHPExcel = new PHPExcel();
$excel = new PHPExcel();

$objPHPExcel->getProperties()->setTitle("Payroll");

if(!$result){
die("Error");
}
$col = 0; 
$row = 2; 
while($mrow = mysql_fetch_assoc($result)) { 
$col = 0; 
foreach($mrow as $key=>$value) { 
    $objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow($col, $row, $value); 
    $col++; 
} 
$row++;  
} 

 // Set active sheet index to the first sheet, so Excel opens this as the first sheet
 $objPHPExcel->setActiveSheetIndex(0)
        ->setCellValue('A1', 'Scholar Id')
        ->setCellValue('B1', 'Lastname')
        ->setCellValue('C1', 'Middlename')
        ->setCellValue('D1', 'Firstname')
        ->setCellValue('E1', 'Barangay')
        ->setCellValue('F1', 'Level')
        ->setCellValue('G1', 'Allowance')
        ->setCellValue('H1', 'Has claimed?');
        $objPHPExcel->getActiveSheet()->getStyle('A1:H1')->getFont()->setBold(true);
        $objPHPExcel->getActiveSheet()->getColumnDimension('A')->setWidth(12);
        $objPHPExcel->getActiveSheet()->getColumnDimension('B')->setWidth(18);
        $objPHPExcel->getActiveSheet()->getColumnDimension('C')->setWidth(18);
        $objPHPExcel->getActiveSheet()->getColumnDimension('D')->setWidth(18);
        $objPHPExcel->getActiveSheet()->getColumnDimension('E')->setWidth(18);
        $objPHPExcel->getActiveSheet()->getColumnDimension('F')->setWidth(12);
$objPHPExcel->getActiveSheet()->getColumnDimension('G')->setWidth(12);
$objPHPExcel->getActiveSheet()->getColumnDimension('H')->setWidth(14);
$objPHPExcel->getActiveSheet()->getStyle('A1:H1')->getAlignment()- >setHorizontal(PHPExcel_Style_Alignment::HORIZONTAL_CENTER);
$objPHPExcel->getActiveSheet()->setShowGridlines(true);

$objPHPExcel->getActiveSheet()->getStyle('A1:H1')->applyFromArray(
array(
    'fill' => array(
        'type' => PHPExcel_Style_Fill::FILL_SOLID,
        'color' => array('rgb' => 'FFFF00')
    )
)
); 

// Save Excel 2007 file
echo date('H:i:s') . " Write to Excel2007 format\n";
#$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
$objWriter = new PHPExcel_Writer_Excel2007($objPHPExcel);
header('Content-Type: application/vnd.ms-excel');
header('Content-Disposition: attachment;filename="payroll.xlsx"');
header('Cache-Control: max-age=0'); 
$writer->save('php://output'); 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-01-10T11:10:56.453

我现在开始工作了！感谢这个[phpexcel下载](https://stackoverflow.com/questions/8566196/phpexcel-to-download)

我将代码更改为：

```
// Save Excel 2007 file
#echo date('H:i:s') . " Write to Excel2007 format\n";
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
ob_end_clean();
// We'll be outputting an excel file
header('Content-type: application/vnd.ms-excel');
header('Content-Disposition: attachment; filename="payroll.xlsx"');
$objWriter->save('php://output'); 
```

我认为这一行：

```
ob_end_clean(); 
```

解决了我的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-15T08:39:08.960

我不知道我是否可以帮助我遇到同样的问题，我解决了

```
ob_end_clean(); 
```

我把它放在后面

```
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007'); 
```

所以无论如何不要更改标题并将其保存为xslx，问题是缓冲区！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T07:28:43.867

如果这是脚本的剪切和粘贴，最可能的罪魁祸首是

```
echo date('H:i:s') . " Write to Excel2007 format\n"; 
```

如果您要发送到浏览器进行下载，那么除了 PHPExcel 本身生成到 php://output 的输出之外，必须没有其他输出（回显、打印语句、放入和退出 PHP）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-29T08:59:01.973

请确保所有文件（例如包含的文件）均为 UTF-8 格式，**没有 BOM**编码。
您可以通过不同的方式识别它，例如查看此[链接](https://stackoverflow.com/questions/204765/elegant-way-to-search-for-utf-8-files-with-bom)。

仅当您需要**带有 BOM**的 UTF-8 - 请在将`ob_end_clean();`数据输出到浏览器之前使用，如此处其他答案中所指出的那样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-26T10:22:42.197

我也有同样的问题，问题很简单。只需将代码放在下面：

```
ob_end_clean(); 
```

后 ：

```
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-15T13:11:50.373

我认为这个问题的解决方法和这里一样： [Google Chrome errors while exporting XLS file using PHP](https://stackoverflow.com/questions/10782050/google-chrome-errors-while-exporting-xls-file-using-php)

只需在附件之间添加一个空格**；**和**文件名**，这样：

```
header("Content-Disposition: attachment; filename=\"Past_Due_Report.xls\""); 
```

正如我在您自己的回答中看到的那样，这就是您所做的，并且可能是解决您的问题的原因。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-29T13:04:25.817

我有同样的问题，但打电话`ob_end_clean()`没有用。我的 CMS（drupal 7）弄乱了我的标题，所以`0A`即使我`ob_end_clean()`在文件输出之前调用，我在内容的开头也有一个新行（十六进制）。

使用下面的代码，我终于摆脱了领先的新行：

```
 for ($i = 0; $i < ob_get_level(); $i++) { ob_end_flush(); }
      ob_implicit_flush(1);

 ob_clean(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-12T09:45:50.940

这个答案救了我的命。谢谢@ARN

```
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, "Excel2007");
header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
header('Content-Disposition: attachment; filename="export_result.xlsx"');
for ($i = 0; $i < ob_get_level(); $i++) {
   ob_end_flush();
}
ob_implicit_flush(1);
ob_clean();
$objWriter->save("php://output"); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-04T03:48:44.140

我有同样的问题，但我使用库[phpspreadsheet](https://phpspreadsheet.readthedocs.io/)

只要把这个功能：

```
ob_end_clean(); 
```

在这段代码之后：

```
$writer = new Xlsx($spreadsheet); 
```

# contextmenu - 将上下文 QMenu 添加到左键单击 PySide 中的按钮

> ID：14252468
> 
> 赞同：2
> 
> 时间：2013-01-10T07:03:52.727
> 
> 标签：contextmenu, pyside, qmenu

我想在按下鼠标左键**时添加上下文菜单**`emailbtn`

```
from PySide import QtCore,QtGui
import sys
class ToolBarUI(QtGui.QWidget):
    def __init__(self,*args,**kwargs):
        super(ToolBarUI,self).__init__(*args,**kwargs)
        self.createActions()

        self.floatingToolBar()
        pass

    def sizeHint(self):
        return QtCore.QSize(65,45)

    def buttons(self):
        x,y=15,35
        self.btnVLay=QtGui.QVBoxLayout(self)
        self.setLayout(self.btnVLay)
        self.btnVLay.setContentsMargins(0,0,0,0)

        self.incSavbtn=QtGui.QPushButton("Save")
        self.incSavbtn.setMinimumSize(QtCore.QSize(x,y))
        self.emailbtn=QtGui.QPushButton("Email")
        self.emailbtn.setMinimumSize(QtCore.QSize(x,y))
        self.upldbtn=QtGui.QPushButton("Upload")
        self.upldbtn.setMinimumSize(QtCore.QSize(x,y))
        self.setPrjbtn=QtGui.QPushButton("Set Project")
        self.setPrjbtn.setMinimumSize(QtCore.QSize(x,y))
        self.setThumb=QtGui.QPushButton("Set thumb")
        self.setThumb.setMinimumSize(QtCore.QSize(x,y))
        self.shwMatbtn=QtGui.QPushButton("Show Material")
        self.shwMatbtn.setMinimumSize(QtCore.QSize(x,y))
        self.fixtexbtn=QtGui.QPushButton("Fix Texture Paths")
        self.fixtexbtn.setMinimumSize(QtCore.QSize(x,y))

        btns = [self.incSavbtn,self.emailbtn,self.upldbtn,self.setPrjbtn,self.setPrjbtn,self.setThumb,self.shwMatbtn,self.fixtexbtn]

        [self.btnVLay.addWidget(each) for each in btns]

    def contextMenuEvent(self, event):
        menu = QtGui.QMenu(self)
        menu.addAction(self.emlSel)
        menu.addAction(self.emlScn)
        menu.addAction(self.emlBufr)
        #menu.exec_(self.emailbtn.mapToGlobal(QtCore.QPoint(0,0)))
        #menu.exec_(event.globalPos())

    def createActions(self):

        self.emlSel = QtGui.QAction("Email Selected", self)

        self.emlScn = QtGui.QAction("Email this Scene", self)

        self.emlBufr = QtGui.QAction("Email Current Frame Buffer", self)

    def floatingToolBar(self):
        self.buttons()
        self.setLayout(self.btnVLay)
        self.show()
        pass

if __name__ =='__main__':

    app = QtGui.QApplication(sys.argv)

    win = ToolBarUI()
    win.show()
    sys.exit(app.exec_()) 
```

我已经尝试过`contextMenuEvent`方法，但这给了我右键单击：/我错过了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T09:48:04.493

它适用于Linux，但不适用于Windows。

下面是我用于在 Windows 中支持左键单击的 systemtrayicon 的代码。这也可能对您有用。

```
QtCore.QObject.connect(self, QtCore.SIGNAL("activated(QSystemTrayIcon::ActivationReason)"), self.iconActivated)   

def iconActivated(self, reason):

    if reason == QtGui.QSystemTrayIcon.Trigger: // left click, right click is Context
        self.contextMenu().activateWindow() // menu will disappear on clicking any where other than menu
        self.contextMenu().popup(QtGui.QCursor.pos()) // display menu at cursor location 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:40:43.097

看起来您可以使用以下[`setMenu`](http://doc.qt.digia.com/4.7-snapshot/qpushbutton.html#setMenu)方法：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtCore, QtGui

class myWindow(QtGui.QWidget):  
    def __init__(self, parent=None):
        super(myWindow, self).__init__(parent)

        self.actionHello = QtGui.QAction(self)
        self.actionHello.setText("Hello")

        self.menu = QtGui.QMenu(self)
        self.menu.addAction(self.actionHello)

        self.buttonShow = QtGui.QPushButton(self)
        self.buttonShow.setText("Button with menu")
        self.buttonShow.setMenu(self.menu)

        self.layout = QtGui.QVBoxLayout(self)
        self.layout.addWidget(self.buttonShow)

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('myWindow')

    main = myWindow()
    main.show()

    sys.exit(app.exec_()) 
```

# javascript - 如何减少这个脚本？

> ID：14252469
> 
> 赞同：0
> 
> 时间：2013-01-10T07:03:53.917
> 
> 标签：javascript, jquery

我想在这个脚本中使用循环，但我不知道该怎么做。

这是我尝试过的：

```
$('#choice').change(function(){

        if ($('#choice').val()=='')

        {
             $('#topic1').hide();
             $('#topic2').hide();
             $('#topic3').hide();
             $('#topic4').hide();
             $('#topic5').hide();
             $('#topic6').hide();
             $('#topic7').hide();
        }if ($('#choice').val()=='1')
        {
             $('#topic1').show();
             $('#topic2').hide();
             $('#topic3').hide();
             $('#topic4').hide();
             $('#topic5').hide();
             $('#topic6').hide();
             $('#topic7').hide();
        }
        if ($('#choice').val()=='2')
        {
             $('#topic1').show();
             $('#topic2').show();
             $('#topic3').hide();
             $('#topic4').hide();
             $('#topic5').hide();
             $('#topic6').hide();
             $('#topic7').hide();
        }
        if ($('#choice').val()=='3')
        {
             $('#topic1').show();
             $('#topic2').show();
             $('#topic3').show();
             $('#topic4').hide();
             $('#topic5').hide();
             $('#topic6').hide();
             $('#topic7').hide();
        }
        if ($('#choice').val()=='4')
        {
             $('#topic1').show();
             $('#topic2').show();
             $('#topic3').show();
             $('#topic4').show();
             $('#topic5').hide();
             $('#topic6').hide();
             $('#topic7').hide();
        }
        if ($('#choice').val()=='5')
        {
             $('#topic1').show();

             $('#topic2').show();

             $('#topic3').show();

             $('#topic4').show();

             $('#topic5').show();

             $('#topic6').hide();

             $('#topic7').hide();
        }
        if ($('#choice').val()=='6')

        {
             $('#topic1').show();

             $('#topic2').show();

             $('#topic3').show();

             $('#topic4').show();

             $('#topic5').show();

             $('#topic6').show();

             $('#topic7').hide();
        }
          if ($('#choice').val()=='7')
        {
             $('#topic1').show();

             $('#topic2').show();

             $('#topic3').show();

             $('#topic4').show();

             $('#topic5').show();

             $('#topic6').show();

             $('#topic7').show();
        }                        
    });
    $('#choice').change();
    }); 
```

请在这里帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T07:11:17.253

```
$('#choice').change(function(){
        $('[id^="topic"]').hide();
        var topic = $('#choice').val();
        if (topic!='') {
            $('#topic'+topic).show();
        };
});        
$('#choice').change(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T07:09:00.143

尝试这个

```
$('#choice').change(function(){
var i;
for(i=1;i<8;i++)
{
  if(i==$(this).val())
  {
       $('#topic'+i).show();
  }
  else
  {
       $('#topic'+i).hide();
  }
}

});

$('#choice').change(); 
```

编辑：改进了 MrCode 的建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T07:09:44.310

jquery 可以使用这样的选择器：

```
$('#choice' + i) 
```

然后，您可以在循环中使用“i”变量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T07:20:28.357

看起来可以这样做：

```
$('#choice').on('change', function(){
  for(var i=1;i<8;i+=1)  {
    var showhide = i <= +$(this).val() ? 'show' : 'hide';
    //                  ^convert value to numeric
    $('#topic'+i)[showhide]();
  }
 }); 
```

处理程序根据`#choice`（显示或隐藏）的值确定要使用的方法。对于所有`#topic[i]`where `i`（在循环内）小于方法的值`#choice`，`show`对于其他`#topic[i]`方法是`hide`。接下来，使用[括号表示法](http://www.typo3-media.com/blog/javascript-object-prototype-notation.html)执行确定的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T07:34:21.047

尝试这个：

```
$('#choice').change(function(){
        for( var i = 0; i<8; i++) {
            if($('#choice').val() <= i) { 
                $('#topic' + i).show();
            } else {
                $('#topic' + i).hide();
            }
        }
    } 
```

# iphone - 如何在第二次选择第一个文本字段时关闭键盘？

> ID：14252470
> 
> 赞同：1
> 
> 时间：2013-01-10T07:03:58.587
> 
> 标签：iphone, keyboard-events

我试图关闭文本字段上的键盘确实开始编辑。第一次选择该文本字段工作正常，但在第二次退出第二个文本字段后，第一个文本字段不会退出键盘。我努力了但没有得到结果

谁能帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:11:47.083

您可以通过自己的方法隐藏键盘。

例如。

```
-(IBAction)hideKeyboard:(id)sender {

     if (sender == txt1) {

       [txt2 becomeFirstResponder];
     }

     else if (sender == txt2) {

       [txt2 resignFirstResponder];
     }
} 
```

使用 xib 中的“退出时结束”方法绑定两个文本字段。

第一次辞职后，将专注于第二次。然后在第二次辞职后，键盘将被解雇。您可以以这种方式继续处理许多文本字段。

它肯定会起作用。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:12:49.743

将 textField 的委托实现给您的类的所有 textField。

并使用这个：

```
- (BOOL) textFieldDidBeginEditing:(UITextField *)textField{
    [textField resignFirstResponder];
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T07:13:25.017

尝试这个...

```
-(void)textFieldDidBeginEditing:(UITextField *)textField{
        if (textField == yourTextfield1) {
            [textField resignFirstResponder];
        }
    } 
```

# android - 何我使用谷歌地方在 android 中找到一个地方

> ID：14252476
> 
> 赞同：1
> 
> 时间：2013-01-10T07:04:26.037
> 
> 标签：android, google-maps, google-places-api, reverse-geocoding

刚才我已经购买了 Google API Key。我通过使用 google Places 找到了确切的位置。最重要的是我必须以编程方式找到该位置，这意味着当我打开我的应用程序时，它将在文本视图中显示该位置。我也想找到最近的地方。

任何人都可以用完整的示例代码解释（在java中，不是java脚本代码）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:14:23.510

您可以将以下代码用于 Google places Api

在这里我有搜索机场，但你可以搜索你自己的地方，当你在这里找到**getJsonResponse id 你的 httpclient**

```
String url = "https://maps.googleapis.com/maps/api/place/textsearch/json?query="**Place To Search**"&sensor=true&key=**Your Api Key**";
                String res = getJsonRespose(url);

                if (res != null && !res.equalsIgnoreCase("")) {
                    JSONObject jObject = new JSONObject(res);
                    // if (jObject.getString("status").equalsIgnoreCase("ok")) {
                    JSONArray jArray = jObject.getJSONArray("results");

                    if (jArray.length() > 0) {
                        for (int i = 0; i < jArray.length(); i++) {
                            AirportListData adata = new AirportListData();
                            JSONObject geo = jArray.getJSONObject(i);

                            JSONObject jLocation = geo.getJSONObject("geometry");
                            JSONObject jgetLocation = jLocation
                                    .getJSONObject("location");

                            Address = geo.getString("formatted_address");
                            name = geo.getString("name");
                            adata.setAirportName(name);
                            lat = jgetLocation.getDouble("lat");
                            lng = jgetLocation.getDouble("lng");
                            adata.setLat(lat);
                            adata.setLng(lng);
                            double dis = getDistance(lat, lng);
                            adata.setAddress(Address);
                            adata.setDistnace(dis / 1000);

                            ardata.add(adata);

                            Log.e("address", "Distance" + (dis / 1000) + "Address"
                                    + Address + "name" + name + "lat" + lat + "lng"
                                    + lng);
                        }

                    }

                } 
```

当你得到所有地方时，你可以调用 getDistance 方法并找到你当前的地方和你得到的地方之间的距离，然后计算你得到最近的地方

```
public static double getDistance(double lat, double lng) {

        try {
            float[] result = new float[3];
            // Log.e("lat long : ", c.getDouble(1) + " : " + c.getDouble(2) +
            // " : " + latitude + " : " + longitude);
            Location.distanceBetween(Constantdata.lat, Constantdata.lon, lat,
                    lng, result);
            double distance = ((double) result[0]);
            return distance;
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return 0.0;

    } 
```

这里 Constantdata.lat 和 constant.lon 是您当前的纬度和经度，而 lat long 是您获得的纬度和对数

# java - 二维数组的递归方法（java）

> ID：14252486
> 
> 赞同：2
> 
> 时间：2013-01-10T07:04:52.957
> 
> 标签：java, recursion

我必须写一个方法，该方法接收一个二维整数数组的参数。该方法返回整数和最大的行号。**我只能使用递归！不允许循环！**- 当然，我需要创建一个私有方法，将一行作为单个数组求和，然后我必须执行另一个比较行的私有方法，但它并没有真正起作用，因为我编写的方法仅适用于 1d数组，我需要比较二维数组中的一行..

感谢各种帮助..

我的一些代码：

```
private  int rowSum(int[] array, int index) {//the sum of an array(1d array)
        if (index == array.length)
            return 0;
        else
            return array[index] + rowSum(array, index + 1);
    }

**public int maxRow(int[][] a){------!!!---the problem...

    }** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:36:40.020

我会尝试使用参数从 main 调用递归方法：

*   大批[][]
*   当前列索引
*   当前行索引
*   当前行总和
*   最高行索引
*   最高行总和

我让它在这里工作，所以这绝对是可能的。大约有 15 行代码。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:41:08.997

作为入门练习，尝试将`rowSum`函数的签名更改为：

```
int rowSum(int[] array, int index, int sumSoFar) 
```

您应该能够编写函数，使递归部分的返回表达式只是一个递归调用：

```
if (...) // exit case
  return sumSoFar;
else
  return rowSum(...); 
```

（现在这是一个尾递归实现。）

带着这种心态，想想你会怎么写：

```
int indexOfMaxValue(int[] array, int index, int maxValueSoFar, int maxIndexSoFar) 
```

一旦你得到了这些，你应该能够将这两个概念结合在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T07:43:48.407

以下代码已准备好运行和测试：

```
public class RecursionSum {
    /* Sum a row until <code>index</code>. */
    private static int rowSum(int[] a, int index) {
        if (index == 0) { return a[0]; }
        // add the current element to the recursive sum
        return a[index] + rowSum(a, index - 1);
    }

    /* Sum a whole row. */
    private static int rowSum(int[] a) {
        return (a.length == 0) ? 0 : rowSum(a, a.length - 1);
    }

    /* Find the index of the array having the max sum until <code>index</code>. */
    private static int maxRow(int[][] a, int index){
        if (index == 0) { return 0; }
        // compare the current row's sum with the recursive max row's sum,
        // update index when it's a new winner
        int maxIndex = maxRow(a, index - 1);
        return (rowSum(a[maxIndex]) < rowSum(a[index])) ? index : maxIndex;
    }

    /* Find the index of the array having the max sum. */
    public static int maxRow(int[][] a){
        return a.length == 0 ? 0 : maxRow(a, a.length - 1);
    }

    /* very simple test */
    public static void main(String[] args) {
        int a1[][] = {};
        int a2[][] = {{1, 2, 3, 4}};
        int a3[][] = {{ 1, 2, 3, 4}, {8, 90}, {5, 6, 7}, {300, 4, 9}, {4, 6, 12}};
        System.out.println(maxRow(a1));
        System.out.println(maxRow(a2));
        System.out.println(maxRow(a3));
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T08:20:45.490

代码：

```
public class MainClass {
    static  int contents[][] = { {1, 2 , 3, 4} , { 4, 5, 8, 7}, { 4, 2, 8, 7}, { 4, 5, 0, 7} };
    public static void main(String[] args) 
    {
        System.out.println(getIndexOfRowWithHighestSum(contents, 0, 0));
    }
    public static int getIndexOfRowWithHighestSum(int[][] twoDAray, int currentIndex,int indexWithHighestSum){
        if(currentIndex>=twoDAray.length){
            return indexWithHighestSum;
        }
        int sum1 = getSumOfArray(twoDAray[currentIndex], 0) ;
        int sum2 = getSumOfArray(twoDAray[indexWithHighestSum], 0);

        indexWithHighestSum = (sum1 > sum2)?currentIndex:indexWithHighestSum;

        return getIndexOfRowWithHighestSum(twoDAray, currentIndex+1,indexWithHighestSum);
    }
    public static int getSumOfArray(int[] array, int currentIndex){
        if(currentIndex>=array.length){
            return 0;
        }
        return array[currentIndex]+getSumOfArray(array,currentIndex+1);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-01T21:42:59.343

这是我想出的...

```
public static void main(String[] args)
{
    int[][] mat = { { 2, 6, 5, 4 }, { 3, 17, 2, 6 }, { 1, 3, 21, 0 } };

    System.out.println(maxRow(mat)); // 1

    int[][] mat1 = { { 2, 6, 5, 4 }, { 1, 3, 21, 0 }, { 3, 17, 2, 6 } };

    System.out.println(maxRow(mat1)); // 2
}

public static int maxRow(int[][] mat)
{
    return maxRow(mat, 0, 0, -1);
}

private static int maxRow(int[][] mat, int row, int maxSumInRow, int maxRowNo)
{
    if (row == mat.length)
        return maxRowNo;

    int sumRow = sumRow(mat, row, 0);

    if (sumRow > maxSumInRow)
    {
        maxSumInRow = sumRow;
        maxRowNo = row;
    }

    return maxRow(mat, row + 1, maxSumInRow, maxRowNo);
}

private static int sumRow(int[][] mat, int row, int col)
{
    if (col == mat[row].length)
        return 0;

    return mat[row][col] + sumRow(mat, row, col + 1);
} 
```

# php - 将typo3编码指南添加到php sniffer

> ID：14252488
> 
> 赞同：2
> 
> 时间：2013-01-10T07:05:05.383
> 
> 标签：php, typo3, typoscript, phpsniff

我正在尝试为我的一个项目添加typo3编码指南。我所做的是[http://forge.typo3.org/projects/team-php_codesniffer/wiki/Using_the_TYPO3_Coding_Standard](http://forge.typo3.org/projects/team-php_codesniffer/wiki/Using_the_TYPO3_Coding_Standard)。将 GIT 存储库克隆到我的本地存储库中，并将文件夹 TYPO3 和 TYPO3v4 复制/粘贴到 /opt/lampp/htdocs/PHP_CodeSniffer/CodeSniffer/Standards 。当我在控制台“”/opt/lampp/bin/phpcs -i”中尝试这个命令时，'TYPO3 & TYPO3v4'没有显示为已安装的标准？

"/opt/lampp/bin/phpcs --standard=TYPO3 index.php 错误：没有安装"TYPO3"编码标准。安装的编码标准有PSR2、PHPCS、PSR1、Zend、PEAR、Squiz和MySource"

# jquery - 不要使用 home/end 键滚动 jScrollPane

> ID：14252501
> 
> 赞同：1
> 
> 时间：2013-01-10T07:05:46.207
> 
> 标签：jquery, jscrollpane

我有一个监听 Home 和 End 键的页面，然后当我将 jScrollPane 放在我的窗口上时，它现在也会滚动，我不希望这样。点击 Home 或 End 时如何停止窗口滚动？`return false;`不起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:11:26.897

确保在 jScrollPane 之前附加侦听器：

```
$(elem).on( "keydown", function(e){
    if( e.which === 35 || e.which === 36 ) {
        e.stopImmediatePropagation();
    }
}).jScrollPane( ... ) 
```

# java - 结合 2 个 Java Web 应用程序

> ID：14252504
> 
> 赞同：-1
> 
> 时间：2013-01-10T07:05:56.473
> 
> 标签：java, maven, web-applications

假设您有 2 个（或更多）Java Web 项目（Java 6、maven）需要作为 1 个 Web 应用程序（目前是 Servlet 2.5 和 Tomcat 6）发布？

如何开发这两个项目，然后它们可以更容易地结合起来？哪些框架和工具可以很好地协同工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:54:14.180

如果您在部署之前被迫捆绑不同的 Web 项目，我个人会考虑仅创建一个由 Git 或 SVN 管理的存储库。这个单一存储库将您的所有项目存储为一个存档，而不是单个项目。

这样，每个开发人员都可以使用他的项目，在这种情况下，这只是一个包。开发完成后，您可以简单地从此存储库中发布 WAR 文件，而无需担心如何集成不同的项目。

但我确信所描述的解决方案也有缺点，但这将是我对你的问题的第一个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T07:56:55.970

一种方法是将两个 Web 应用程序打包为一个 EAR，可以部署到一个完整的 EE 服务器。为此，您可以创建一个单独的 Maven 项目来进行组装。

话虽如此，tomcat 并不是一个完整的 EE 服务器。您只能部署 WAR。因此，您可能需要查看一些战争覆盖技术，但我发现这些技术难以使用和维护。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T08:59:14.497

基本上你可以使用[maven-assembly-plugin](http://maven.apache.org/plugins/maven-assembly-plugin/)，它支持组装战争发行版：目前它可以创建以下格式的发行版：

*   压缩
*   柏油
*   压缩包
*   tar.bz2
*   罐
*   目录
*   战争
*   以及已为 ArchiveManager 配置的任何其他格式

另一种方法是[maven-war-plugin](http://maven.apache.org/plugins/maven-war-plugin/)，这将打包和组装 webapp，但这需要添加两个 webapps 的依赖项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T10:44:11.447

Maven 战争插件可以做[覆盖](http://maven.apache.org/plugins/maven-war-plugin/overlays.html)。[例子。](http://maven.apache.org/plugins/maven-war-plugin/examples/war-overlay.html)这有利于包含 Web 资源，但不适用于 web.xml

还有[cargo-maven2-plugin](http://cargo.codehaus.org/Merging+WAR+files)，它还可以合并 web.xml 内容。

# sql - 需要在经理下找到完整的团队

> ID：14252507
> 
> 赞同：3
> 
> 时间：2013-01-10T07:06:14.507
> 
> 标签：sql, sql-server-2005

我需要编写一个 SP 来找到经理 X 下的完整团队。完整团队在某种意义上，我想找到经理 X 下的所有直接和间接报告者。我使用的是 SQL Server 2005。

Employee 表结构是：

```
EmployeeNumber  FirstName  LastName  ManagerEmployeeNumber 
```

例如，如果 SP 的输入为 Employee Number = 10211，那么输出应该是这样的：

```
EmployeeNumber  FirstName  LastName  ManagerEmployeeNumber
13903           Anil       S         10211
1260            David      D         13903
8079            Donald     K         1260 
```

我已经编写了在以下功能中找到经理 X 下的整个团队所需的内容：

```
ALTER FUNCTION [dbo].[FullTeamUnderManager1](@ManagerId int)  
RETURNS   
@EmployeeList TABLE   
( 
 EmployeeName Varchar(200) 
)  
AS  
BEGIN  

 With hierarchy(EmployeeName, Employee_Id, SupEmp_Id, Depth) as  
 (  
  Select (first_name + ', ' + last_name) EmployeeName, employee_number, employee_number as supemp_id, 0 as depth  
     From dbo.employee  
     Where employee_number = @ManagerId  
  union all   
  Select (child.first_name + ', ' + child.last_name), child.employee_number, child.manager_employee_number, parent.depth + 1   
  From dbo.employee As child  
  Inner Join hierarchy As parent  
      On child.manager_employee_number = parent.Employee_Id  
     Where child.employee_number != parent.Employee_Id  

 )  
 insert into @EmployeeList(EmployeeName)  
  select EmployeeName from hierarchy where depth > 0  
  order by EmployeeName
 RETURN   
END 
```

我需要将它与下面的 SP 结合起来。输出应该是单列，如“EmployeeName”

```
ALTER PROCEDURE [dbo].[spGetCorpDirDistributionTableUsers]            
@activeOnly bit = 1,            
@employeesOnly bit = 1,            
@isAllowedNonEmployees bit = 0,      
@isAllowedNonEmployeesInOrgChart bit = 0, 
@login_employee_number INT = NULL,      
@IsGetLocations bit = 0,
@Location_IDLIST VARCHAR(MAX) = NULL,
@IsGetDepartments bit = 0,
@Department_IDLIST VARCHAR(MAX) = NULL,
@IsGetDirectReports bit = 0,
@IsGetDirectReportsManagers bit = 0,
@IsGetAllManagers bit=0,
@manager_employee_number INT

   AS    
   DECLARE @employeeTypeId int       

   SET @employeeTypeId = 1           
   SET @isAllowedNonEmployees = ISNULL(@isAllowedNonEmployees, 0) 
   SET @isAllowedNonEmployeesInOrgChart  = ISNULL(@isAllowedNonEmployeesInOrgChart, 0)               
   SET @IsGetDirectReports = ISNULL(@IsGetDirectReports, 0) 
   SET @IsGetDirectReportsManagers  = ISNULL(@IsGetDirectReportsManagers, 0)

   SELECT         
    (e1.first_name + ', ' + e1.last_name) EmployeeName,
   FROM EMPLOYEE e1           
   LEFT OUTER JOIN EMPLOYEE e2 on e1.manager_employee_number = e2.employee_number             
   INNER JOIN LOCATION loc ON e1.location_id = loc.location_id   
   INNER JOIN DEPARTMENT dep ON e1.department_id = dep.department_id                  
   LEFT OUTER JOIN EMPLOYEE_TYPE emptype ON e1.employee_type_id = emptype.employee_type_id            
   WHERE          
     e1.visible = 1 and             
     (@activeOnly = 0 OR @activeOnly IS NULL OR e1.active_flag = 1) and            
     (@isAllowedNonEmployees = 1 or e1.employee_type_id = @employeeTypeId) and             
     (@employeesOnly = 0 or e1.employee_type_id = @employeeTypeId) and  

  --Location
  (@IsGetLocations=0 OR
  (COALESCE(@Location_IDLIST,'%') = '%' OR e1.location_id IN (SELECT Segment FROM dbo.fn_GetParsedValues(@Location_IDLIST,',')))) and

  --Department
  (@IsGetDepartments=0 OR
  (COALESCE(@Department_IDLIST,'%') = '%' OR e1.Department_ID IN (SELECT Segment FROM dbo.fn_GetParsedValues(@Department_IDLIST,',')))) and      

  --IsGetDirectReports
  (@IsGetDirectReports=0 OR
    ((e1.manager_employee_number = @manager_employee_number and e1.active_flag = 1 and e1.visible = 1)    
      and ((@isAllowedNonEmployees = 1 and  @isAllowedNonEmployeesInOrgChart = 1) or e1.employee_type_id = @employeeTypeId))) and

  --IsGetDirectReportsManagers
  (@IsGetDirectReportsManagers=0 OR
  ((e1.manager_employee_number = @manager_employee_number and e1.active_flag = 1 and e1.visible = 1)    
      and ((@isAllowedNonEmployees = 1 and  @isAllowedNonEmployeesInOrgChart = 1) or e1.employee_type_id = @employeeTypeId)
      and (select count(*) from employee e3 where manager_employee_number = e1.employee_number and active_flag = 1 and ((@isAllowedNonEmployees = 1 and  @isAllowedNonEmployeesInOrgChart = 1) or e3.employee_type_id = @employeeTypeId))>0
    )) and

  --IsGetAllManagers
  (@IsGetAllManagers=0 OR
  ((SELECT count(*) FROM dbo.employee e2 WHERE e2.manager_employee_number = e1.employee_number ) > 0) AND
    @IsGetDirectReports=0 AND @IsGetDirectReportsManagers=0)

order by EmployeeName 
```

任何人请帮忙...提前谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T07:10:05.560

试试这个：

```
WITH CTE
AS
(
    SELECT 
      EmployeeNumber, FirstNAme, LastName, ManagerEmployeeNumber 
    FROM Emps
    WHERE EmployeeNumber = @EmpNumberToFind
    UNION ALL
    SELECT t.*
    FROM CTE c
    INNER JOIN Emps t ON c.EmployeeNumber = t.ManagerEmployeeNumber
) 
SELECT * 
FROM CTE; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/cc943/1)

例如，对于`EmployeeNumber = 13903`，这将为您提供：

```
| EMPLOYEENUMBER | FIRSTNAME | LASTNAME | MANAGEREMPLOYEENUMBER |
-----------------------------------------------------------------
|          13903 |      Anil |        S |                 10211 |
|           1260 |     David |        D |                 13903 |
|           8079 |    Donald |        K |                  1260 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:09:28.950

您可以使用[公用表表达式](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx)来完成此操作

# c++ - C++ 在一个巨大的数组上执行计算

> ID：14252508
> 
> 赞同：3
> 
> 时间：2013-01-10T07:06:15.163
> 
> 标签：c++, arrays

我被问到一个工作面试的问题，我不知道正确答案....

问题是：

如果您有一个介于 1 到 100 之间的 10 000 000 个整数的数组，请（有效地）确定有多少对这些整数的总和为 150 或更少。

如果没有循环中的循环，我不知道如何做到这一点，但这不是很有效。

有人请给我一些指示吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T07:16:35.537

一种方法是创建一个包含 100 个元素的较小数组。循环遍历 10,000,000 个元素并计算每个元素的数量。将计数器存储在 100 个元素的数组中。

```
 // create an array counter of 101 elements and set every element to 0
    for (int i = 0; i < 10000000; i++) {
          counter[input[i]]++;
    } 
```

然后从 1 到 100 执行第二个循环 j。在其中，有一个从 1 到 min(150-j,j) 的循环 k。如果 k!=j，则添加 counter[j]*counter[k]。如果 k=j，则添加 (counter[j]-1)*counter[j]。

总和就是你的结果。

您的总运行时间以 10,000,000 + 100*100 = 10,010,000 为界（实际上比这更小）。

这比 (10,000,000)^2 快很多，即 100,000,000,000,000。

当然，你必须在内存中放弃 101 个 int 空间。

完成后删除计数器。

还要注意（正如在下面的讨论中所指出的）这是假设顺序很重要。如果顺序无关紧要，只需将结果除以 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T09:30:00.050

first, I would sort the array. Then you start a single pass through the sorted array. You get the single value n in that cell and find the correspondent lowest value that is still allowed (e.g. for 15 it is 135). Now you find the index of this value in the array and that's the amount of pairs for n. Sum up all these and you have (if my mind is working correctly) counted each pair twice, so if you divide the sum by 2, you have the correct number.

The solution should be O(n log n) compared to the trivial one, which is O(n^2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:34:09.563

这类问题总是需要数学洞察力和高效编程的结合。他们不想要蛮力。

## 第一洞察力

数字可以根据它们与其他组的配对方式进行分组。

将它们放入：

```
1 - 50 | 51 - 75 | 76 - 100
  A    |    B    |    C 
```

*   组`A`可以与任何东西配对。
*   组可以与和`B`配对`A``B``possibly` `C`
*   组可以与and`C`配对，但不能`A``possibly` `B``C`

这`possibly`是我们需要更多洞察力的地方。

## 第二洞察

对于 B 中的每个数字，我们需要检查有多少数字直到其补码 150。例如，对于`62`from group ，`B`我们想从 group 中知道`C`有多少数字小于或等于`88`。

对于其中的每个数字，`C`我们将计数相加，例如 76、77、78、...、88 的计数。这在数学上称为部分和。

在标准库中有一个函数可以生成[`partial_sum`](http://www.cplusplus.com/reference/numeric/partial_sum/)

```
vector<int> tallies(25); // this is room for the tallies from C
vector<int> partial_sums(25);

partial_sum(tallies.begin(), tallies.end(), partial_sums.begin()); 
```

对称性意味着这个总和只需要对一组进行。

## 第三（很久以后）洞察力

计算组的总数，`A`也`B`可以使用 来完成`partial_sum`。因此，与其只计算 group`C`并且必须以其他方式跟踪总数，不如存储从 1 到 100 的每个数字的总数，然后在整个事物上创建 partial_sum。`partial_sums[50]`会给你小于或等于 50 的数字数量，partial_sums[75] 小于或等于 75 的数字，partial_sums[100] 应该是 1000 万，即所有小于或等于 100 的数字。

最后我们可以计算 和 的`B`组合`C`。我们想将 50 和 100、51 和 99、52 和 98 等的总数的所有倍数相加。我们可以通过迭代从 50 到 75 的计数以及从 100 到 75 的部分总和来做到这一点。有一个标准[`inner_product`](http://www.cplusplus.com/reference/numeric/inner_product/)可以处理这个的库函数。

这对我来说似乎很线性。

```
random_device rd;
mt19937 gen(rd());
uniform_int_distribution<> dis(1, 100);

vector<int> tallies(100);
for(int i=0; i < 10000000; ++i) {
    tallies[dis(gen)]++;
}

vector<int> partial_sums(100);
partial_sum(tallies.begin(), tallies.end(), partial_sums.begin());

int A = partial_sums[50];
int AB = partial_sums[75];
int ABC = partial_sums[100]; 
int B = AB - A;
int C = ABC - AB;

int A_match = A * ABC;
int B_match = B * B;
int C_match = inner_product(&tallies[50], &tallies[75],
                            partial_sums.rend(), 0); 
```

# javascript - 获取CKEditor的图像对话窗口的textfield的值

> ID：14252509
> 
> 赞同：1
> 
> 时间：2013-01-10T07:06:25.390
> 
> 标签：javascript, dialog, ckeditor

我的要求是，我需要在CKEditor的对话框的图像属性中显示用户输入的值。如何显示它？例如：- 如果有一个字段描述并且如果用户在该字段中输入了任何内容，那么连同图像，该描述也应该显示在 CKEditor 中。怎么做？

```
 dialogDefinition.onOk = function(e) {
                  var imageSrcUrl = e.sender.originalElement.$.src;
                  //var description = $("#imageDescription").getValue();

                  var description="this is the description"; 
                  var imgHtml = CKEDITOR.dom.element.createFromHtml("<table><tr><td><img src=" + imageSrcUrl + " alt='' /><td></tr><tr><td>"+description+"</td></tr></table>"); 
                   editor.insertElement(imgHtml);
       } 
```

请告诉我如何获取文本字段的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T14:28:53.973

你在寻找[`getValue`](http://docs.ckeditor.com/#!/api/CKEDITOR.dom.element-method-getValue)方法。另请参阅对话开发的官方[指南](http://docs.ckeditor.com/#!/guide/plugin_sdk_sample_1)（+[第 2 部分）。](http://docs.ckeditor.com/#!/guide/plugin_sdk_sample_2)

# signalr - 信号传输通道以获得更好的性能

> ID：14252513
> 
> 赞同：2
> 
> 时间：2013-01-10T07:06:56.997
> 
> 标签：signalr

我正在使用 SignalR silverlight 客户端，并且我的集线器托管在 Windows 服务中。集线器与紧凑型数据库对话以返回数据。我注意到的是，即使返回的数据量并不大，返回数据所花费的时间也非常高，而且由于集线器服务器是本地的，因此也没有看到任何网络延迟问题。我想知道，为了提高性能，可以在 SignalR 集线器级别进行哪些性能改进/配置？例如：

1.  根据客户端类型，我应该使用任何标准传输通道吗？

2.  我应该设置任何配置参数吗？

谢谢， 阿尔皮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:11:04.830

据我了解，SignalR 使用回退协议，因此它取决于您的服务器和客户端的功能。

你可能想看看这个以获得[进一步的摘要](https://stackoverflow.com/questions/7807066/how-signalr-works-internally/7874352#7874352)

[此外，在主项目wiki](https://github.com/SignalR/SignalR/wiki/Performance)中有一些性能建议（仅与IIS和SignalR一起相关）

我建议您使用性能计数器（检查“使用曲柄生成客户端负载”部分）来更好地诊断您的性能问题在哪里。

希望有帮助，

干杯

# java - 是否有任何可用的 API 来表示各种项目单位，如 KG、Litre、Metre、KM 等

> ID：14252520
> 
> 赞同：14
> 
> 时间：2013-01-10T07:07:12.227
> 
> 标签：java, jpa, units-of-measurement, jscience

在我的项目中，我必须在某个地方`unitOfIssue`使用`Items`. 现在，各种项目当然可以有不同的表示单位。因此，我正在寻找一些 API 或某种方式来优雅地处理这种情况。

是否有任何可用的 API 提供某种方式来表示这些单位？我听说过[JScience](http://jscience.org/)，这似乎令人印象深刻，但我再次面临将其映射到`JPA`. 经过一些谷歌工作，我发现在这种情况下正在进行一些工作 - [JScience-JPA](http://java.net/projects/jscience-jpa)，但在生产中使用它似乎还不稳定。

我还发现了一些关于[JSR-275 的](http://www.javaworld.com/javaworld/jw-10-2007/jw-10-jsr275.html)信息，但是从[这个 JCP 页面](http://www.jcp.org/en/jsr/detail?id=275)看来它已经被拒绝了。

然后我遇到了[unitofmeasure](http://code.google.com/p/unitsofmeasure/)，我还没有深入研究它。但是，同样的问题又来了。这可以用 JPA 映射吗？

**编辑： -**从[这个 SO question](https://stackoverflow.com/questions/4005512/java-class-to-represent-weight-and-measures)我遇到了[带有 Unit 的 Java Numbers，](http://sourceforge.net/projects/jnumwu/)但我不知道它是否已准备好生产。

我真的很困惑，特别是在看到上面的那些选项之后。JPA 是一个额外的问题，即我是否可以使用它们中的任何一个。有没有人遇到过这样的情况，并找到了解决办法？我真的需要一些帮助。我应该使用什么？如果没有其他出路，那么代表这些单位的适当方式是什么。我看到的一种方法是使用`enums`. 但是，当然，这将是最后的选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T08:17:13.783

我在一个项目中广泛使用了 JSR-275（在它被 JCP 拒绝之前）。最初我们没有使用 JPA，但后来决定我们应该使用 JPA 2.0 来持久化我们的模型，我不得不处理测量对象的持久性。

这可能不是您问题的答案，但可能会为讨论带来一些有趣的想法。

我们考虑了几种选择：

1.  度量是可序列化的，JPA 可以映射任何可序列化的对象。这里的问题是度量值将作为二进制对象保存在数据库中，并且它们会受到序列化（即版本控制等）的所有问题的影响。
2.  如果我们同意对每个单位使用国际计量单位，我们可以通过将数据保留为原始类型（即整数、双精度等）来调整我们的模型。因此，字段将基于 JPA 支持的类型，但 getter 和 setter 将使用度量对象。将 JPA 映射配置为基于字段，而不是属性。这里的问题是必须在不影响域对象的公共接口的情况下更改模型以更改封装数据。
3.  由于我们使用 hibernate 作为我们的持久性提供者，我们可以接受偏离 JPA 标准并使用[hibernate 自定义值类型](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch05.html#mapping-types-custom)将度量对象映射到相应的原始类型。然后我们可以为此目的使用休眠注释映射我们的类型。（[请参见此处的示例](http://java.dzone.com/articles/annotating-custom-types)）。这个警告是失去持久性供应商独立性。

我们最终使用了替代方案#3，它对我们来说效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T07:46:56.027

我建议你自己写。可能您也可能需要`Unit Of Measure Conversion`。

[从ARTS 零售数据模型逻辑视图](http://www.nrf-arts.org/content/arts-data-model-home-page)定义 UOM

![在此处输入图像描述](../Images/5a7c8e7dce5aae9e245aeaf03a3cf83b.png)

和转换

![在此处输入图像描述](../Images/0e381f982ec7e37601653479d350ec9b.png)

# jquery - 删除下拉菜单中的 (o)th/(n) th 选项？

> ID：14252524
> 
> 赞同：2
> 
> 时间：2013-01-10T07:07:36.473
> 
> 标签：jquery, removechild, html-select

谁能解释我如何在下拉菜单中删除 (0) th/ (n) th 元素？

```
<select name="selectBox" id="selectBox">
   <option value="option1">option1</option>
   <option value="option2">option2</option>
   <option value="option3">option3</option>
   <option value="option4">option4</option> 
</select> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T07:10:24.993

您可以使用`.eq()`：

```
$('#selectBox option').eq(2).remove();  // Removes the third item 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T07:09:32.327

这样，您可以根据其值删除选项

```
$("#selectBox option[value='X']").remove(); 
```

您还可以通过文本删除选项：

```
$("#selectBox option:contains(Text)").remove(); 
```

[演示](http://jsfiddle.net/sB6p2/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T07:10:00.157

试试这个

[**JsFiddle 演示**](http://jsfiddle.net/DetuN/13/)

```
$("#selectBox option:nth-child(2)").remove(); 
```

您可以将 2 替换为任何其他数字，即选项元素的数量。

检查它是如何工作[**的：:nth-child() 选择器**](http://api.jquery.com/nth-child-selector/)

**注意：**选项编号从 0 到 n 开始......所以如果你写 3 比它从 0 开始删除列表中的 2 项要小心。

# mod-rewrite - lighttpd 身份验证和重写相同的 url 不起作用

> ID：14252525
> 
> 赞同：0
> 
> 时间：2013-01-10T07:07:46.277
> 
> 标签：mod-rewrite, lighttpd, mod-auth

我似乎无法在同一个 url 上同时获得身份验证和重写。如果我禁用一个，另一个工作。这在lighttpd中可行吗？

```
$HTTP["host"] =~ "www\.example\.com$" {
   auth.require = (
     "/prettyurl" =>
     (
      "method" => "basic",
      "realm" => "Password reqired",
      "require" => "valid-user"
     )
   )
   url.rewrite = (
         "/prettyurl" => "/index.php?foo=bar&goo=car"
   )
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:22:53.083

我通常封装`auth.require`在一个`$HTTP["url"]`. 像这样的东西：

```
$HTTP["host"] =~ "www\.example\.com$" {
  url.rewrite = (
    "/prettyurl" => "/index.php?foo=bar&goo=car"
  )

  $HTTP["url"] == "/index.php" {
    $HTTP["querystring"] == "foo=bar&goo=car" {
      auth.require = ( "" =>
        (
          "method"  => "basic",
          "realm"   => "Password reqired",
          "require" => "valid-user"
        )
      )
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:53:34.290

我找到了解决方案。似乎在 url 的查询字符串部分既不匹配`auth.require`也不匹配。`$HTTP["url"]`

首先做一个符号链接

```
ln -s index.php index_auth.php 
```

然后在 lighttpd conf 中：

```
$HTTP["host"] =~ "www\.example\.com" {
    url.rewrite = (
       "/prettyurl-auth" => "/index_auth.php?foo=bar",
       "/prettyurl-noauth" => "/index.php?goo=car"
    )
    auth.require = ( "/index_auth.php" =>
      (
        "method"  => "basic",
        "realm"   => "Password reqired",
        "require" => "valid-user"
      )
    )
} 
```

如果有更好的方法，请告诉我！

# iphone - 在 Xcode 4.5.1 中将 Three20 添加到现有项目

> ID：14252531
> 
> 赞同：1
> 
> 时间：2013-01-10T07:08:31.437
> 
> 标签：iphone, xcode4.5, three20

我正在尝试在我的项目中添加 Three20。我参考了他们的[文章](http://three20.info/article/2010-10-06-Adding-Three20-To-Your-Project)并尝试了两种方法来添加它，但都没有成功。我有什么技巧/步骤吗？有没有其他人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T02:21:58.080

我成功地将 three20 添加到 Xcode 4.5.2 中的现有项目中。

[该文档](https://github.com/facebook/three20)应该可以工作

另一种方法是使用three20提供的ttmodule.py，文档在[这里](http://three20.info/article/2011-03-10-Xcode4-Support)。

# javascript - ExtJS 4.1.1a：使用 set 方法修改记录后取消选择网格中的项目

> ID：14252536
> 
> 赞同：1
> 
> 时间：2013-01-10T07:08:50.613
> 
> 标签：javascript, gridview, extjs, extjs4.1

嘿那里，

我有一个非常基本的示例，其中只有一个项目的网格和一个使用基础记录的设置方法更新此条目的按钮。

问题是，如果在通过按下按钮更新记录时选择了该项目，则选择将被删除，之后就无法再选择它。

工作示例：http: [//jsfiddle.net/fu2Xq/2/](http://jsfiddle.net/fu2Xq/2/)

> ```
> Ext.onReady(function() {
>     var personsGrid = Ext.create('Ext.grid.Panel', {
>         width: 150,
>         height: 100,
>         renderTo: Ext.getBody(),
> 
>         store: Ext.create('Ext.data.Store', {
>             fields: [ 'name' ],
>             data: [{ name: 'Stephen' }]
>         }),
> 
>         columns: [{ text: 'Name', dataIndex: 'name', flex: 1 }],
>     });
> 
>     var txtField = Ext.create('Ext.form.field.Text', {
>         fieldLabel: 'New name',
>         labelWidth: 70,
>         width: 150,
>         value: 'Alex',
>         renderTo: Ext.getBody()
>     });
> 
>     Ext.create('Ext.button.Button', {
>         text: 'Rename person',
>         width: 150,
>         renderTo: Ext.getBody(),
>         handler: function() {
>             var rec = personsGrid.getStore().getAt(0);
> 
>             rec.set('name', txtField.getValue());
>         }
>     });
> }); 
> ```

对我来说似乎是一个错误，因为在重新排序名称列后，选择会重新出现......

我真的很感激对此发表评论！

谢谢

* * *

编辑：重新编写了一些代码...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:55:49.927

这是 ExtJS 4.1.1 中的一个错误，似乎在 4.1.3 中已解决，可以通过在更新记录后调用网格视图的刷新方法来解决：

[http://jsfiddle.net/fu2Xq/7/](http://jsfiddle.net/fu2Xq/7/)

> ```
> handler: function() {
>     var rec = personsGrid.getStore().getAt(0);
> 
>     rec.set('name', txtField.getValue());  
>     personsGrid.getView().refresh();
> } 
> ```

我从 Sencha 论坛得到了这个答案： [http ://www.sencha.com/forum/showthread.php?253287-Item-in-grid-is-deselected-after-record-has-been-modified-with-set -方法&p=928197&viewfull=1#post928197](http://www.sencha.com/forum/showthread.php?253287-Item-in-grid-is-deselected-after-record-has-been-modified-with-set-method&p=928197&viewfull=1#post928197)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:37:59.647

在`headerclick`列标题事件中，网格视图中的旧选择已被记住，并且在呈现排序视图后，这些记录将再次被选中。

而在 `rec.set()`, 而不是 的情况下`datachanged`, 'update' 事件`Ext.data.store`被触发。`headerclick`但是没有与“更新”事件相同的选择旧记录相关的实现。

所以你必须在 after 上实现记录选择`rec.set()`。

[这](http://www.sencha.com/forum/showthread.php?194440-Ext.data.Store-datachanged-event&p=778611&viewfull=1#post778611)是关于类似问题的讨论。

# breeze - 按扩展属性过滤的客户端查询

> ID：14252537
> 
> 赞同：2
> 
> 时间：2013-01-10T07:08:52.313
> 
> 标签：breeze

我需要获取已删除项目的计数并获取未删除项目的更改集/集合。

我怎样才能做到这一点？

我可以使用 LINQJS 来做到这一点，但想知道是否有更合适的方法来做到这一点。

```
var countryType = manager.metadataStore.getEntityType("Country");
            var countries = manager.getEntities(countryType);

            var deletedCount = Enumerable.From(countries)
                             .Where(function (x) {
                                 return x.entityAspect.entityState == "Deleted"
                             }).Count();

            self.totalRows(self.totalServerRows() - deletedCount);

            var queryResult = Enumerable.From(countries)
                               .OrderBy(function(x){ x.Country_Code })
                               .Where(function (x) {
                                   return x.entityAspect.entityState != "Deleted"
                               })
                                .Skip(self.pageIndex() * self.pageSize())
                                .Take(self.pageSize())
                                .ToArray();
            self.list(queryResult); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:40:01.153

EntityManager.getEntities 调用被重载（参见： [http](http://www.breezejs.com/sites/all/apidocs/classes/EntityManager.html#method_getEntities) ://www.breezejs.com/sites/all/apidocs/classes/EntityManager.html#method_getEntities ），因此您可以简单地询问 entityManager 中特定的那些实体类型或**处于指定状态**。所以对于“已删除”，试试这个：

```
var deletedEntities = em.getEntities(null, [EntityState.Deleted]); 
```

或者如果您只想要添加或修改的实体

```
var deletedEntities = em.getEntities(null, [EntityState.Added, EntityState.Modified]); 
```

我希望这有帮助。

# asp.net-mvc-4 - 为 ApiController 使用会话状态

> ID：14252544
> 
> 赞同：3
> 
> 时间：2013-01-10T07:09:22.720
> 
> 标签：asp.net-mvc-4, controller, session-state

我想在我的 ApiController (MVC4) 中拥有自己的 AppContext。

应该是这样的

```
public class TestController : BaseApiController
{
    [HttpGet]
    public IEnumerable<TestVM> GetAll()
    {
        // the test service is injected with SimpleInjector
        return _testService.GetAll(**base.AppContext**);
    }
} 
```

但 ApiController 无法访问 Session。是否有任何解决方案可以“激活”特定键的会话（因为我不想要整个会话）？或者您还有其他想法（缓存或 cookie）吗？

这是 BaseApiController

```
public abstract class BaseApiController: ApiController
{
    public IAppContext AppContext
    {
        get { return SessionState.AppContext; }
    }
} 
```

这是我的 IAppContext（将来会有更多属性）

```
public interface IAppContext
{
    IIdentity User { get; }

    /// <summary> Gets the user id. </summary>
    /// <value>The user id.</value>
    int IdUser { get; }
} 
```

这里是在 web.config 中注册的应用程序模块

```
public class ApplicationModule : IHttpModule
{
    // ...
    SessionState.AppContext = _appContext.InitializeNew(
        HttpRuntime.AppDomainAppPath, languages);
    // ...
} 
```

SessionState 类获取 AppContext

```
public class SessionState : BaseSessionVariables
{
    public static IAppContext AppContext
    {
        get { return SessionState.Get<IAppContext>("AppContext"); }
        set { SessionState.Set("AppContext", value); }
    }
} 
```

这里是 BaseSessionVariables 类

```
public static HttpSessionState GetSession()
{
    return HttpContext.Current.Session;
}

protected static T Get<T>(string key) where T : class
{
    var session = BaseSessionVariables.GetSession();

    if (session == null)
    {
        throw new Exception("No session");
    }
    return (session[key] as T);
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:20:09.740

看看下面的实现。它应该让你朝着正确的方向前进。

更新了 IAppContext - 添加了 Setter

```
public interface IAppContext
{
    IIdentity User { get; set; }

    /// <summary> Gets the user id. </summary>
    /// <value>The user id.</value>
    int IdUser { get; set; }
} 
```

更新的基本控制器 - 在 OnActionExecuting 方法中实例化一个新的 AppContextImplementation

```
public abstract class BaseApiController: ApiController
{
    public IAppContext AppContext {get; set;}

    protected override void OnActionExecuting(
        ActionExecutingContext filterContext)
    {
        AppContext = new AppContextImplementation();
    }
} 
```

新类 - 实现 IAppContext 并包装 HttpContext Session。对于测试，您可以创建一个不依赖 Session 而是依赖于其他内存存储机制的 TestAppContextImplementation。

```
public class AppContextImplementation : IAppContext
{
    public IIdentity User
    { 
        get { return HttpContext.Current.Session["User"] as IIdentity; }
        set { HttpContext.Current.Session["User"] = value; }
    }

    int IdUser
    { 
        get { return Convert.ToInt32(Session["IdUser"]); }
        set { Session["IdUser"] = value; }
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-21T17:03:26.130

因为`ApiControllers`，建立自己一个`DelegatingHandler`并将你所有的好东西推到`request.Properties`。然后，无论您是在测试还是实时运行，您都可以从您的请求中检索它们。好处是您对控制器中的 Session 的依赖性为零。

## 消息处理程序

```
public class ContextHandler : DelegatingHandler
{
    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, System.Threading.CancellationToken cancellationToken)
    {
        // get the goodies to add onto the request
        var goodies = /* call to goodieGoodieYumYum */

        // add our goodies onto the request
        request.Properties.Add(Constants.RequestKey_Goodies, goodies);

        // pass along to the next handler
        return base.SendAsync(request, cancellationToken);
    }
} 
```

## 控制器动作

```
var goodies = (List<Goodie>)Request.Properties[Constants.RequestKey_Goodies]; 
```

# asp.net - 为什么 servicestack 返回 404 Handler for Request not found 错误？

> ID：14252549
> 
> 赞同：2
> 
> 时间：2013-01-10T07:09:36.547
> 
> 标签：asp.net, web-services, c#-4.0, servicestack

我在 .net 4.5 中创建了一个基于 Rest 的服务，并在 IIS7 中托管了相同的服务。

我能够使用 HTTP WebRequest (GET,POST) 访问服务并获得响应，但是当通过 ServiceStack 访问时，我收到以下错误消息，

![在此处输入图像描述](../Images/b96bd9efac9df0f783b1b9fc06249ba2.png)

在服务堆栈中命中 API 的代码是，

```
 IServiceClient serviceClient = new XmlServiceClient("http://localhost/ServerAccessManagerAPI/events");
    var response = serviceClient.Send(request); 
```

我在我的服务配置文件中包含了以下几行，

```
 <location>
    <system.web>
      <httpHandlers>
        <add path="*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" />
      </httpHandlers>
    </system.web>

    <system.webServer>
      <modules runAllManagedModulesForAllRequests="true" />
      <validation validateIntegratedModeConfiguration="false" />
      <handlers>
        <add path="*" name="ServiceStack.Factory" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" preCondition="integratedMode" resourceType="Unspecified" allowPathInfo="true" />
        <remove name="WebDAVModule" />
      </handlers>
    </system.webServer>

  </location> 
```

有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:02:37.427

[ServiceStack ServiceClients](https://github.com/ServiceStack/ServiceStack/wiki/Clients-overview)接受一个**BaseUri**，它应该是所有 ServiceStack 服务的Base **Uri**，而不是特定服务的 url。请尝试：

```
var serviceClient = new XmlServiceClient("http://localhost/ServerAccessManagerAPI/");
var response = serviceClient.Send(request); 
```

# automation - 谷歌电子表格自动突出显示

> ID：14252555
> 
> 赞同：1
> 
> 时间：2013-01-10T07:10:11.400
> 
> 标签：automation, google-sheets, highlight

在 Google Drive 中，我有一个巨大的电子表格文件。6 个人将在多行上工作。

会有一列，每个人都会在其中写下他们的姓名缩写，例如 HJ、MZ 等。当他们写的时候，我希望它自动以特定颜色突出显示整行

例子：

*   MZ-红色
*   HJ-蓝色
*   FJ - 绿色

等等。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:28:33.463

我对我的脚本做了类似的事情。我对着色内容有一些限制，但我认为您可以轻松了解如何根据您的目的进行修改（为整行着色等）

只需将我的“比较字符串”从“Ready”等更改为“MZ”，你就应该是金色的

代码：

```
function colorRow(r){
  var sheet = SpreadsheetApp.getActiveSheet();

  //I only want to color the row starting from 2nd column, up to 6th
  var dataRange = sheet.getRange(r, 2, 1, 6);
  var data = dataRange.getValues();
  var row = data[0];

  //If empty, set white
  if(row[0] === ""){ 
    dataRange.setBackgroundRGB(255, 255, 255);

  //Rows needing checking, blue
  } else if(row[0] === "Check"){
    dataRange.setBackgroundRGB(153, 186, 247);

  //Completed green
  } else if(row[0] === "Ready"){
    dataRange.setBackgroundRGB(192, 255, 192);

  //Others red
  } else{
    dataRange.setBackgroundRGB(255, 192, 192);
  }
  SpreadsheetApp.flush();
}

//Called by system after every edit
function onEdit(event)
{ 
    colorRow(event.source.getActiveRange().getRowIndex());
} 
```

希望能帮助到你！

编辑：更正了 onEdit() 函数中的一个错误。

# bandwidth - 如何计算pjsip中的带宽消耗

> ID：14252559
> 
> 赞同：3
> 
> 时间：2013-01-10T07:10:25.840
> 
> 标签：bandwidth, pjsip

我看到[Jitsi](https://jitsi.org/)（使用 jain-sip）可以在通话进行时显示**带宽**信息。

如何在 pjsip中获取**带宽信息？**是否有任何回调或如何计算？

**P/S：**带宽I是指媒体层实际使用的带宽

**更新** 打电话时`pjsua_call_dump`，我收到此信息。这足以计算吗？如果是，如何？

```
Call time: 00h:00m:06s, 1st res in 1592 ms, conn in 6512ms
    #0 audio PCMU @8kHz, sendrecv, peer=130.148.79.127:33380
       SRTP status: Not active Crypto-suite: (null)
       RX pt=0, last update:00h:00m:01.891s ago
          total 337pkt 53.9KB (67.4KB +IP hdr) @avg=62.5Kbps/78.1Kbps
          pkt loss=2 (0.6%), discrd=0 (0.0%), dup=0 (0.0%), reord=0 (0.0%)
                (msec)    min     avg     max     last    dev
          loss period:  20.000  20.000  20.000  20.000   0.000
          jitter     :   1.125  19.350  27.000  18.875   3.951
       TX pt=0, ptime=20, last update:00h:00m:02.260s ago
          total 344pkt 55.0KB (68.8KB +IP hdr) @avg=63.8Kbps/79.7Kbps
          pkt loss=2 (0.6%), dup=0 (0.0%), reorder=0 (0.0%)
                (msec)    min     avg     max     last    dev 
          loss period:  40.000  40.000  40.000  40.000   0.000
          jitter     :   0.000   7.375  14.750  14.750   7.375
       RTT msec      : 203.000 203.000 203.000 203.000   0.000 
```

![在此处输入图像描述](../Images/0262ab92d9e246903cd74bdd5a4282da.png)

# mysql - mysql transaction (commit and rollback)

> ID：14252560
> 
> 赞同：3
> 
> 时间：2013-01-10T07:10:31.220
> 
> 标签：mysql, vb.net

below is the code i am using for MySqlTransaction and it is running perfectly.... but problem is as i am using single instance of mysqlcommand i have to use unique PARAMETER in it. which is ruining my query. is there any other way around to do....

i tried to dispose cmd after each query but of no use.. :(

* * *

```
 con.Open()
            Dim sqlTran As MySqlTransaction = con.BeginTransaction()
            Dim cmd As MySqlCommand = con.CreateCommand()
            cmd.Transaction = sqlTran
            Dim str As String = Nothing
            Try
                cmd.CommandText = "SELECT myid FROM memaster where    Adate=@adate and ANo=@ano and ASource=@asrc"
                cmd.Parameters.AddWithValue("@adate", txt_bpass_adate.Text)
                cmd.Parameters.AddWithValue("@ano", txt_bpass_af.Text)
                cmd.Parameters.AddWithValue("@asrc", txt_bpass_asource.Text)
                str = cmd.ExecuteScalar()
                'cmd.Dispose()'
                If str Is Nothing Then

                    cmd.CommandText = "Insert into memaster (ADate,ANo,ASource) values (@aDate,@aNo,@aSRC)"
                    cmd.Parameters.AddWithValue("@aDate", txt_bpass_adate.Text)
                    cmd.Parameters.AddWithValue("@aNo", txt_bpass_af.Text)
                    cmd.Parameters.AddWithValue("@aSRC", txt_bpass_asource.Text)

     cmd.ExecuteNonQuery()
    End If
     sqlTran.Commit()

            Catch ex As Exception
                Try
                    sqlTran.Rollback()
                Catch ex1 As Exception

                End Try
            End Try 
```

* * *

i actually want to fire more then 4 queries in single transaction so that if anything go wrong i can rollback it...

if any onebody have any other method of it kindly share the concept wid me...

* * *

```
 For index As Integer = 1 To 5
                    cmd.CommandText = "Insert into detail (ID,BNos,SNo) values (@FID1,@BNo,@SeqN1)"
                    cmd.Parameters.AddWithValue("@FID1", str)
                    cmd.Parameters.AddWithValue("@BNo", str1)
                    cmd.Parameters.AddWithValue("@SeqN1", txt_bpass_sqn1.Text)
                    cmd.ExecuteNonQuery()

                Next 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T10:42:38.893

To execute multiple commands within the same transaction, ensure that you assign the transaction object to each command individually:

```
Dim selectCmd As MySqlCommand = con.CreateCommand()
Dim insertCmd As MySqlCommand = con.CreateCommand()

selectCmd.CommandText = "SELECT ..."
insertCmd.CommandText = "INSERT ..."

Dim sqlTran As MySqlTransaction = con.BeginTransaction()
Try
  selectCmd.Transaction = sqlTran
  insertCmd.Transaction = sqlTran

  ...selectCmd.ExecuteScalar()...
  ...insertCmd.ExecuteNonQuery()...

  sqlTran.Commit()
Catch
  sqlTran.Rollback()
End Try 
```

As others have mentioned, it is generally a good idea to `Dispose()` objects (that are `IDisposable`) as soon as you're done working with them. After disposing objects, they can no longer be used.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-29T10:01:58.227

You can use Using keyword for auto dispose objects. i don't know VB but I know C#. Please convert the code into VB.

```
using(MySqlConnection con= new MySqlConnection("connectionString"))
{
    con.Open();
    using(MysqlTransaction trans=con.BeginTransaction())
    {
        try
        {
            //command to executive query
            using(MysqlCommand cmd= new MySqlCommand("query", con, trans))
            {
                cmd.Parameters.AddWithValue("@parameter1", parametervalue1);
                cmd.Parameters.AddWithValue("@parameter2", parametervalue2);
                cmd.ExecutenonQuery();
                cmd.Parameters.Clear();
            }
            //command to execute query
            using(MysqlCommand cmd= new MySqlCommand("query", con, trans))
            {
                cmd.Parameters.AddWithValue("@parameter1", parametervalue1);
                cmd.Parameters.AddWithValue("@parameter2", parametervalue2);
                cmd.ExecutenonQuery();
                cmd.Parameters.Clear();
            }
            //command to execute query
            using(MysqlCommand cmd= new MySqlCommand("query", con, trans))
            {
                cmd.Parameters.AddWithValue("@parameter1", parametervalue1);
                cmd.Parameters.AddWithValue("@parameter2", parametervalue2);
                cmd.ExecutenonQuery();
                cmd.Parameters.Clear();
            }
            trans.Commit();
        }
        catch(Exception ex)
        {
            trans.Rollback();
        }
    }
} 
```

# android - 如何在应用程序在Android后台运行时捕获当前运行的屏幕截图

> ID：14252561
> 
> 赞同：1
> 
> 时间：2013-01-10T07:10:33.077
> 
> 标签：android, cordova

大家好，我想创建一个用于捕获屏幕截图的应用程序，在我的应用程序中，我想创建一个在后台运行的应用程序，它作为服务工作，在此我想捕获当前正在运行的应用程序的屏幕

目前我正在使用此代码

```
View content = findViewById(R.id.mapview);
Bitmap bitmap = content.getDrawingCache();
FileOutputStream ostream = new FileOutputStream(file);
bitmap.compress(CompressFormat.PNG, 100, ostream);
ostream.close(); 
```

这是有效的，但它正在捕获我的后台运行应用程序屏幕而不是当前正在运行的屏幕

# java - 我们如何在没有任何编码的情况下渲染重音字符

> ID：14252562
> 
> 赞同：5
> 
> 时间：2013-01-10T07:10:32.980
> 
> 标签：java, xslt, xslt-1.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:38:27.727

Rupesh, you are treating UTF-8 encoded data as signle-byte coded data or encoding UTF-8 twice. (the

```
out.toString("UTF-8") 
```

???)

First step is to figure out, what encoding is your data in and what encoding are you supposed to produce. For instance if you use [Notepad++](http://notepad-plus-plus.org/), it has a menu "Encoding" where it shows you the current encoding of the file and allows you to change it, see the effect. Tell us what's the story.

You might be after the western european windows ecoding: windows-1252

Check this as well: [the encoding attribute of the XSL output element](http://www.w3schools.com/xsl/el_output.asp)

I could give you some sample in C# if you like, but you run Java...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:22:42.760

Thanks for adding the code. In your Java code, could you try changing the two places where you have `"UTF-8"` to instead be `"UTF8"` (no hyphen)? I think I have seen this issue before.

# php - 视频在完全加载之前不会播放

> ID：14252564
> 
> 赞同：3
> 
> 时间：2013-01-10T07:10:42.780
> 
> 标签：php, mediaelement.js

问题是，当视频超过一两分钟时，我必须先缓冲整个视频，然后才能真正播放。当播放非常小的视频时，情况并非如此，我可以在缓冲部分中向前跳过。

我在 chrome 中播放视频，视频是 .mp4 类型的。

我将如何解决这个问题？

**编辑：**

事实证明，H.264 文件的子集在末尾有索引，这意味着在下载完整文件之前不能向前跳过。我将不得不根据以下交换索引：

[MediaElement.js - Flash 视频在完全加载之前不会播放](https://stackoverflow.com/questions/5058917/mediaelement-js-flash-video-wont-play-until-fully-loaded)

但是，我允许我的用户自己上传电影，所以我不能要求他们使用这个程序。我将如何使用 php 代码自己转换它？

**编辑2：**

我找到了一个库，可以让我改变 moov 原子的位置。对于遇到同样问题的任何人，请使用以下库：

[http://code.google.com/p/moovrelocator/](http://code.google.com/p/moovrelocator/)

**编辑3：**

我可以确认图书馆运作良好。绝对推荐它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:44:25.557

就像 Carsten 说的，你可以使用 exec() 函数。但是，我使用了[moovrelocator 库](http://code.google.com/p/moovrelocator/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T17:31:12.733

我使用[http://renaun.com/blog/code/qtindexswapper/](http://renaun.com/blog/code/qtindexswapper/)为 flash 和 ie 重新编码 mp4 视频，它运行良好。只要您按下播放按钮，它就会开始播放。

# java - 如何显示在 uml 中返回字符串数组的方法？

> ID：14252567
> 
> 赞同：4
> 
> 时间：2013-01-10T07:11:02.323
> 
> 标签：java, uml

如何显示在 uml 方法中返回字符串数组的方法如下所示

```
public String[] delete(int col, int row){} 
```

这种表示是否正确？

```
+delete(col: int; row: int): String[] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T09:04:44.830

您的符号在括号内缺少数字 [2]、范围 [0..45] 或星号 [*]。数组（或任何其他集合）可以在 UML2 中表示为基数。请参阅 OMG UML 2 上层结构中 Property 的基数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T07:41:55.193

是的，你的符号是正确的。

```
+delete(col: int; row: int): String[] 
```

要获取更多信息，您可以访问[http://en.wikipedia.org/wiki/Class_diagram](http://en.wikipedia.org/wiki/Class_diagram)并进行验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T07:48:04.437

是的，这应该是可以理解的——即使是代码生成器。

我发现[这个站点](http://www.uml-diagrams.org/class-diagrams.html)对类图很有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-13T20:44:38.580

好吧，你应该使用多重性和逗号来分隔参数

```
+delete(col: int, row: int): String[0..*] 
```

在这种情况下，将返回一个包含零个或多个元素的字符串数组

# jquery-mobile - jQuery Mobile 黑莓科尔多瓦默认页面

> ID：14252568
> 
> 赞同：1
> 
> 时间：2013-01-10T07:11:06.257
> 
> 标签：jquery-mobile, blackberry-jde

我有一个带有 jQ​​uery 移动页面的 index.html 页面。eclipse 中的 android 应用程序正确启动了第一个默认页面。当我在黑莓 www 文件夹中添加 index.html 页面时，没有加载任何页面。我必须为黑莓做一些特别的事情吗？

# testing - 如何分析 JMeter 结果？

> ID：14252570
> 
> 赞同：51
> 
> 时间：2013-01-10T07:11:10.927
> 
> 标签：testing, jmeter, load-testing

我是 JMeter 工具的新手。任何人都可以帮助我分析 JMeter 报告的最佳方法吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-10T11:17:18.867

您可能会发现有用的相关链接的简单列表：

原生图：

*   [JMeter 报告仪表板](http://jmeter.apache.org/usermanual/generating-dashboard.html)
*   [使用 influxdb 等 3rd 方实时序列数据库进行实时绘图](http://jmeter.apache.org/usermanual/realtime-results.html)

自动化图表的免费开源解决方案：

*   [JMeter Plugins](http://jmeter-plugins.org/) - 查看这个包中的自定义图表；其中一些提供了比 jmeter 的原始报告更好的开箱即用结果；
*   [JMeter 结果分析插件](https://github.com/afranken/jmeter-analysis-maven-plugin)
*   [用于日志分析和可视化的 JWeter 工具](https://bitbucket.org/pjtr/jweter/overview)

定制开发的食谱：

*   [JMeter Wiki：日志分析的建议和秘诀](http://wiki.apache.org/jmeter/LogAnalysis)
*   [更好的 JMeter 图表](http://rubenlaguna.com/wp/better-jmeter-graphs/)
*   [使用 JMeter 绘制负载测试](http://www.metaltoad.com/blog/plotting-your-load-test-jmeter)

第三方解决方案：

*   [火焰计感应](https://sense.blazemeter.com/)
*   [Tricentis flood.io](https://flood.io/)
*   [红线13](https://www.redline13.com/blog/)
*   [JAnalyser：基于浏览器的结果分析工具](http://epireum.com/page-section/janalyser/)

* * *

**UPD。**
请查找、使用并随意扩展这个[Awesome JMeter](https://aliesbelik.github.io/awesome-jmeter/)集合，作为[github repo](https://github.com/aliesbelik/awesome-jmeter)继续。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-08-29T20:26:58.710

进行性能测试时必须进行 3 项测试，应始终有基线、峰值测试和压力测试。由于小定律，这些测试相互关联。[稳定系统中的长期平均客户数 L 等于长期平均有效到达率 λ 乘以客户在系统中花费的时间 W；或用代数表示：L = λW。](https://en.wikipedia.org/wiki/Little%27s_law).

[![在此处输入图像描述](../Images/980ccedc315dc4e7561ec2f1bac9aaac.png)](https://i.stack.imgur.com/rk9Ov.gif)

Jmeter 已经提供了检查这些值[的方法，标准插件](https://jmeter-plugins.org/wiki/StandardSet/)提供了响应时间、命中和吞吐量的图。无法直接判断系统上有多少用户处于活动状态，并发用户与活动用户不同。这些插件足以生成报告，但它们不允许控制大部分演示文稿，我将使用一些使用 python 生成的图（它们添加标签，并有 2 个 y 轴）。

**基线测试：** 本例为特例，本例中活跃用户为常数且为1，则：

*   L = λW
*   1 = λW
*   1/W = λ

[![在此处输入图像描述](../Images/ab6e4a93cc45ba87018164b196003bfe.png)](https://i.stack.imgur.com/TYydh.png)

如果应用程序运行相同的代码，响应时间会随着时间的推移而稳定，那么到达率也会随着时间的推移而保持不变。

有一项服务除了等待一段时间之外什么都不做：

[![在此处输入图像描述](../Images/5eb16e0c1909c9597db44d7053705522.png)](https://i.stack.imgur.com/LP5mE.png)

***2秒服务：***到达率为1/2TPS。

[![在此处输入图像描述](../Images/f85ee701a23a1ce3eed7b9dcbb832650.png)](https://i.stack.imgur.com/RjJlQ.png)

***3秒服务：***到达率为1/3TPS。

[![在此处输入图像描述](../Images/6cc77ce8ab5d006aefd3d835e8269402.png)](https://i.stack.imgur.com/arbFH.png)

**峰值测试：** 这是另一种特殊情况，在这种情况下，负载会增加，直到超过系统吞吐量，因为负载大于吞吐量，响应时间确实会增加。在测试期间，线程数应该足够快地增加以从较长的响应时间中恢复。

[![在此处输入图像描述](../Images/ab57c4bcc5b8262b5407c2c3ebfa447a.png)](https://i.stack.imgur.com/UH7Uy.png)

这次不是运行峰值，而是在整个测试期间给系统施加比它能够处理的更多的负载。控制服务吞吐量：

[![在此处输入图像描述](../Images/0b8813335b91290dbafa3ba5fe91a493.png)](https://i.stack.imgur.com/w9IgR.png)

活动事务是那些已经离开注入器但没有得到响应的事务，这些事务是在系统的某个地方排队的事务。

*   λ(t) = c，T(t) = k；随着时间的推移，负载和吞吐量都是恒定的。
*   L = Σλ - ΣT = ct - kt；活动事务是累积负载和累积吞吐量之间的差异。
*   L = (c - k)t
*   λW= (c - k)t
*   ​cW(t) = (c - k)t
*   W(t) = t(c - k)/c

因为响应时间确实会随着活动用户的增长而增长，所以我们需要注入器在需要新连接时尽快创建新线程，大多数池线程都会很忙。

***2TPS到达率，1 TPS吞吐量：***

*   响应时间函数为1/2t
*   注射器在 300 秒内对系统施加压力。
*   测试持续 600 秒。

[![在此处输入图像描述](../Images/be1122452d54a3628121147687ca6603.png)](https://i.stack.imgur.com/IybQx.png)

***4TPS到达率，1 TPS吞吐量：***

*   响应时间函数为3/4t
*   注射器在 300 秒内对系统施加压力。
*   测试持续 1200 秒。

[![在此处输入图像描述](../Images/5949bd15a475b03a87fe207ccf655103.png)](https://i.stack.imgur.com/Oz1I1.png)

***6TPS到达率，5 TPS吞吐量：***

*   响应时间函数为1/6t
*   注射器在 300 秒内对系统施加压力。
*   测试持续 360 秒。

[![在此处输入图像描述](../Images/33a7c4b1daea124e29355d711666340f.png)](https://i.stack.imgur.com/TKMZV.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-11-30T06:46:51.287

简而言之，如果您想分析您的 JMeter 报告...

1.  从服务器 CPU 和 RAM 利用率开始。在服务器上运行性能测试时，查看当前测试使用了多少 CPU 和 RAM。
    在托管站点服务器上发出以下命令；它将创建一个 CPU 使用率的日志文件。

    ```
    while true; do 
      ( echo "%CPU %MEM ARGS $(date)" &&
        ps -e -o pcpu,pmem,args --sort=pcpu | cut -d" " -f1-5 |
        tail ) >> ps.log
      sleep 1
    done 
    ```

2.  查看总体响应时间，它不应超过您的预期响应时间标准。见下图。我的期望是响应时间不应超过 525 微秒，但有些请求超过了它。找到这些需要时间的请求。

    总体响应时间：

    [![总响应时间](../Images/0080b305cb97569ca1bbcac1bc87767a.png)](https://i.stack.imgur.com/f5w7B.png)

3.  请参阅每秒事务，每秒进行多少事务，测试时间框架是否有任何下降？

4.  检查摘要报告、平均时间和最长时间以查看哪些请求花费的时间最多。目前，JMeter 中的许多侦听器都可以作为附加组件或内置使用，但这些是要查看的主要内容，以便能够正确猜测正在发生的事情。您可以使用其他类似的报告。

关注我的博客了解更多详情[https://softwaretesterfriend.blogspot.in/](https://softwaretesterfriend.blogspot.in/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-16T10:58:12.760

为了分析您的 JMeter 结果，您可以使用

1.  [JMeter 中的监听器](https://www.blazemeter.com/blog/jmeter-listeners-part-1-basic-display-formats)
2.  [火焰计感应](https://www.blazemeter.com/blog/how-analyze-results-load-test-using-blazemeter-0)
3.  [报告仪表板](https://performanceengineeringsite.wordpress.com/2017/12/12/generating-html-dashboard-report-in-apache-jmeter/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-02T14:48:22.393

Starting with version 3.0, JMeter includes a dynamic HTML report that can be generated either at the end of a load test or from a result file.

See [generating-dashboard](http://jmeter.apache.org/usermanual/generating-dashboard.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-29T06:27:56.800

除了所有其他答案：还有一个不错的 BlazeMeter 站点，您可以在其中上传您的测试结果文件 (.jtl)，它会为其生成各种（交互式）报告。它甚至会为您分析并指出第一个错误发生的时间、饱和点是什么等。[https://sense.blazemeter.com/gui/](https://sense.blazemeter.com/gui/)

如果您有石墨/grafana 基础设施，我可以建议将后端侦听器添加到项目中。它将实时指标发送到石墨服务器，您可以在石墨（或 grafana）中监控测试。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-03T14:49:32.863

如果您是 JMeter 新手，了解 JMeter 侦听器和其他组件将对您有所帮助。检查教程 - [https://www.youtube.com/watch?v=FfDVIklNjgw](https://www.youtube.com/watch?v=FfDVIklNjgw)

# linq - 子实体上的 Linq 表达式

> ID：14252573
> 
> 赞同：4
> 
> 时间：2013-01-10T07:11:25.807
> 
> 标签：linq, entity-framework

我正在构建适用于单个实体的动态 linq 表达式。例如：我有一个名为 Employee 和 empeduinfo 的类

```
public class Employee
{
    public int Id { get; set; }
    public string Name { get; set; }
}

public class EmpEduInfo
{
    public int Id { get; set; }
    public string Name  { get; set; }
    public int EmpId { get; set; }
} 
```

我需要让所有员工和 empeduinfo 类以“x”开头

我为startswith("x")准备了表达式

```
var temp= entities.employees.Include("EmpEduInfo").Where(mydynamicexpression); 
```

在这种情况下，它只过滤父表而不是子表。

我需要准备通用表达式，而不是需要动态过滤父对象和子对象。

不使用表达式我知道一个解决方案：

```
var temp= (from ee in entities.Employee.Include("EmpEduInfo").Where(x => x.name.StartsWith("t"))                           
           where ee.EmpEduInfo.Where(x => x.name.StartsWith("t")).Count()>0                                
           select ee).ToList(); 
```

使用表达式我正在构建通用表达式以提供动态高级搜索，而不是在每个实体中编写。

这是我的表情细节

```
 // Get the method information for the String.StartsWith() method                
            MethodInfo mi = typeof(string).GetMethod("StartsWith", new Type[] { typeof(string) });
            // Build the parameter for the expression
            ParameterExpression  empparam= Expression.Parameter(typeof(employee), "ename");;
            // Build the member that was specified for the expression
            MemberExpression field = Expression.PropertyOrField(empparam, "name");
            // Call the String.StartsWith() method on the member
            MethodCallExpression startsWith = Expression.Call(field, mi, Expression.Constant("t"));                  
            var namelamda = Expression.Lambda<Func<employee, bool>>(startsWith, new ParameterExpression[] { empparam });
            var temp = entities.employees.Include("empedudetails").Where(namelamda).ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T09:14:29.660

您可以查看`Expression`编译器生成的使用`IQueryable:`

```
IQueryable<Employee> query = 
  from ee in entities.Employee ...

var expression = query.Expression; 
```

在`expression`调试器中查看您需要生成的内容 - [LINQPad](http://www.linqpad.net)对此很有用。

* * *

您可能想先简化一下查询：

```
IQueryable<Employee> query = 
  from ee in entities.Employee.Include("EmpEduInfo")                           
  where
    ee.name.StartsWith("t") &&
    ee.EmpEduInfo.Any(x => x.name.StartsWith("t"))                             
  select ee; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:11:20.020

我在 EF 4.0 中尝试，或者我们已经为相同的数据库扩展。

EF 4.1 中提供了选项

[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/reading-related-data-with-the-entity-framework-in-an-asp-net-mvc-应用](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/reading-related-data-with-the-entity-framework-in-an-asp-net-mvc-application)

谢谢。

# ruby-on-rails - 模型的 datetime 字段在 heroku 上与 localhost 的存储方式不同

> ID：14252579
> 
> 赞同：5
> 
> 时间：2013-01-10T07:11:34.730
> 
> 标签：ruby-on-rails, postgresql, heroku, timezone, ruby-on-rails-3.2

**脚步：**

在我的本地主机服务器上，我在位于太平洋时区的浏览器中选择时间 2013 年 1 月 18 日上午 10 点 - 上午 11 点。然后我在 heroku 上的生产服务器上选择完全相同的时间。

如您所见，保存到数据库的输出是不同的。我希望生产表现为本地主机，并在将时间存储为 UTC 时考虑时区。这是什么原因造成的？heroku 服务器在 EST 中，但这并不能解释这种行为。

**控制器：**

```
 def create
    puts params[:event][:starts_at]
    @event = Event.create!(params[:event])
    puts @event.starts_at
  end 
```

**输出本地主机：**

> 2013 年 1 月 18 日星期五 10:00:00 GMT-0800 (PST)
> 
> 2013-01-18 18:00:00 UTC

**输出 Heroku（生产）：**

> 2013 年 1 月 18 日星期五 10:00:00 GMT-0800 (PST)
> 
> 2013-01-18 10:00:00 UTC

**架构：**

```
 t.datetime "starts_at" 
```

**环境：**

Ruby on Rails 3.2.11

红宝石 1.9.3

Postgres

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T22:46:55.003

### PostgreSQL 如何处理日期/时间的背景

我认为您的问题已包含在另一个 SO 问题的答案中：

*   [在 Rails 和 PostgreSQL 中完全忽略时区](https://stackoverflow.com/questions/9571392/ignoring-timezones-altogether-in-rails-and-postgresql/9576170#9576170)

具体来说这个答案：

*   [https://stackoverflow.com/a/9576170/33204](https://stackoverflow.com/a/9576170/33204)

`UTC`使用以下格式查询时间：

```
SELECT * FROM tbl WHERE time_col > (now() AT TIME ZONE 'UTC')::time 
```

使用此查询获取本地时区的时间：

```
SELECT * FROM tbl WHERE time_col > now()::time 
```

### Rails & ActiveRecords & 日期/时间

这个[rails/rails github](https://github.com/rails/rails) issue 也讨论了它：

*   [ActiveRecord 在写入时将时间转换为默认区域；读取时假定 UTC](https://github.com/rails/rails/issues/6816)

[pixeltrix](https://github.com/rails/rails/issues/6816#issuecomment-10545222)有一条评论，内容如下：

> @deathbob 抱歉回复晚了 - config.active_record.default_timezone 的接受值是 :utc 或 :local。如果您将其设置为 :utc 以外的其他值，它将假定 :local 所以您看到的是预期的行为。

要修复时间`ActiveRecords`以便始终处理它，`UTC`您可以设置以下变量：

```
config.active_record.default_timezone = :utc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T00:15:20.117

@slm 的解决方案`config.active_record.default_timezone = :utc`对我不起作用。Rails 仍在 Heroku 上使用本地编写和使用 UTC 阅读。

所以我然后尝试：

```
config.time_zone = 'Sydney'
config.active_record.default_timezone = :local 
```

它在开发中仍然可以正常工作，但导致日期时间值现在以 UTC 格式从 Heroku 上的 postgres 读取。

我的临时解决方案是在 Heroku 上设置默认时区：

```
heroku config:add TZ="Australia/Sydney" 
```

这只是一个临时解决方案，因为我希望我的应用程序使用 UTC。我已发布到@slm 提到的 rails/github 问题以进行澄清。当我找到更具体的解决方案时，我会更新我的答案。

# android - 数据库插入问题

> ID：14252580
> 
> 赞同：1
> 
> 时间：2013-01-10T07:11:36.243
> 
> 标签：android, database, sqlite, android-sqlite

在我的应用程序中，我从 textview 获取用户名和密码并将其保存在数据库中，当我正在处理检索这些值时，它显示出一定的麻烦..

插入代码

```
int id=1;
String id1 = Integer.toString(id);
              passwordTxtValue = passwordTxt.getText().toString();
              passwordTxtValue2 = passwordTxt2.getText().toString();

              if(passwordTxtValue.equals(passwordTxtValue2))
              {

                    try 
                    {
                        db_obj.password_varification(id1, passwordTxtValue);
                        Log.e("Insert Values"," " );
                        PASSWORD_DATA = db_obj.password_records();
                    System.out.println("The value is"+PASSWORD_DATA.size());

                    } 
                    catch (Exception e) 
                    {
                    }
              } 

              else
              {
                  Toast.makeText(getApplicationContext(), "Enter values correctly!!!", Toast.LENGTH_SHORT).show();
                    passwordTxt.setText("");
                    passwordTxt2.setText("");
              } 
```

OpenHelper 类是..

```
static final String password_table = "password_db";
static final String table_id = "table_id";
static final String password = "password";
 @Override
public void onCreate(SQLiteDatabase db) 
{

    db.execSQL("CREATE TABLE "+password_table+"("+table_id+" INTEGER PRIMARY KEY, "+password+" TEXT)");

}
public void password_varification(String id,String paswrd ) 
    {
         Log.d("DB", "Inset_User OK" );
        SQLiteDatabase db=this.getWritableDatabase();
        ContentValues cv=new ContentValues();

        cv.put(table_id, id);
         cv.put(password, paswrd);

         db.insert(password_table, null, cv);

         db.close();
         Log.v("DB", "Inset_User OK" + ""+ id + paswrd); 
    }
 // password Data retrive here
public ArrayList<HashMap<String, String>> password_records() 
{
     SQLiteDatabase db=getReadableDatabase();
     ArrayList<HashMap<String, String>> list = new ArrayList<HashMap<String, String>>();

     Cursor cursor=db.rawQuery("SELECT "+table_id+" as _id,  "+password+" from "+password_table,new String [] {});
    //Cursor cursor=db.rawQuery("SELECT "+row+" as _id, "+twitter+" from "+winery_info_2,new String [] {});

         if(cursor!=null)             
         {
             if(cursor.moveToFirst())  // movies first column 
             {
                 do
                 {
                     HashMap<String, String> map = new HashMap<String, String>();

                     String  fnam        = cursor.getString(cursor.getColumnIndex("table_id"));
                     String  lnam        = cursor.getString(cursor.getColumnIndex("password"));

                     map.put (table_id      ,fnam);
                     map.put (password      ,lnam);

                     list.add(map);
                 }
                 while(cursor.moveToNext()); // move to next row

             }
         }

         if (cursor != null && !cursor.isClosed()) 

         {
            cursor.close();
         }

         return list;
   } 
```

它显示了一些非法状态异常

# heap - 如何在 Dijkstra 算法中使用二进制堆？

> ID：14252582
> 
> 赞同：35
> 
> 时间：2013-01-10T07:11:50.210
> 
> 标签：heap, dijkstra

我正在编写 dijkstra 算法的代码，对于我们应该找到与当前正在使用的节点的距离最小的节点的部分，我在那里使用一个数组并完全遍历它以找出节点。

这部分可以用二叉堆代替，我们可以在 O(1) 时间内计算出节点，但我们还会在进一步的迭代中更新节点的距离，我将如何合并该堆？

在数组的情况下，我所要做的就是转到（ith -1）索引并更新该节点的值，但是在二进制堆中无法完成同样的事情，我将不得不进行完整搜索才能确定出节点的位置，然后更新它。

这个问题的解决方法是什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-14T16:45:51.153

这只是我在课堂上发现的一些信息，我与同学分享。我想我会让人们更容易找到它，所以我留下了这篇文章，以便在找到解决方案时可以回答它。

**注意：**对于这个例子，我假设你的图的顶点有一个 ID 来跟踪哪个是哪个。这可以是名称、数字等，只要确保更改`struct`下面的类型即可。如果您没有这样的区分方法，那么您可以使用指向顶点的指针并比较它们指向的地址。

您在这里面临的问题是，在 Dijkstra 算法中，我们被要求将图顶点及其键存储在此优先级队列中，然后*更新队列中剩余的键*。但是......**堆数据结构无法到达任何不是最小或最后一个节点的特定节点！**
我们能做的最好的事情是在 O(n) 时间内遍历堆以找到它，然后在 O(Logn) 处更新它的键并冒泡。这使得为​​每条边更新所有顶点**O(n)**，使我们的 Dijkstra O(mn) 实现比最优 O(mLogn) 差得多。

呸！一定有更好的方法！

所以，我们需要实现的并不是一个标准的基于最小堆的优先级队列。我们需要比标准的 4 个 pq 操作多一个操作：

1.  是空的
2.  添加
3.  流行音乐
4.  窥视敏
5.  和**减少键**

为了**DecreaseKey**，我们需要：

*   在堆中找到一个特定的顶点
*   降低其键值
*   “堆积”或“冒泡”顶点

本质上，由于您（我假设它已在过去 4 个月的某个时间实现）可能会使用“基于数组”的堆实现，这意味着我们**需要堆来跟踪每个顶点及其索引在数组**中，以使此操作成为可能。

**设计一个`struct`类似的东西：**（c ++）

```
struct VertLocInHeap
{
    int vertex_id;
    int index_in_heap;
}; 
```

将允许您跟踪它，但是将它们存储在数组中仍然会给您 O(n) 时间来查找堆中的顶点。没有复杂性改进，而且比以前更复杂。>.<
**我的建议**（如果优化是这里的目标）**：**

1.  将此信息存储在二叉搜索树中，其键值为“vertex_id”
2.  进行二分搜索以在 O(Logn) 中找到顶点在堆中的位置
3.  使用索引访问顶点并在 O(1) 中更新其键
4.  在 O(Logn) 中将顶点冒泡

我实际上使用了一个[`std::map`](http://www.cplusplus.com/reference/map/map/map/)声明为：std::map m_locations; 在堆中而不是使用结构。第一个参数（Key）是vertex_id，第二个参数（Value）是堆数组中的索引。由于`std::map`保证了 O(Logn) 搜索，因此可以很好地开箱即用。然后，每当您插入或冒泡时，您就可以`m_locations[vertexID] = newLocationInHeap;`
轻松赚钱。

***分析：***
**好处：**我们现在有 O(Logn) 可以在 pq 中找到任何给定的顶点。对于冒泡，我们进行 O(Log(n)) 次移动，对于每个交换，在数组索引的映射中进行 O(Log(n)) 搜索，从而导致冒泡的 O(Log^2(n) 操作-up。
所以，我们有一个 Log(n) + Log^2(n) = **O(Log^2(n))**操作来更新堆中单个边的键值。这使得我们的 Dijkstra 算法取 O (mLog^2(n))。这非常接近于理论上的最优值，至少与我能得到的一样接近。真棒负鼠！
**缺点：**我们在内存中为堆存储了两倍的信息。这是一个“现代”问题吗？并不真地; 我的办公桌可以存储超过 80 亿个整数，而且许多现代计算机都配备了至少 8GB 的​​ RAM；但是，它仍然是一个因素。如果您使用包含 40 亿个顶点的图执行此实现，这可能比您想象的更频繁地发生，那么它会导致问题。此外，所有这些额外的读/写可能不会影响分析的复杂性，在某些机器上可能仍然需要时间，尤其是在信息存储在外部的情况下。

我希望这对将来的某个人有所帮助，因为我花了很长时间才找到所有这些信息，然后将我从这里、那里和任何地方得到的信息拼凑在一起，形成了这个。我指责互联网和睡眠不足。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T17:29:30.617

我在使用任何形式的堆时遇到的问题是，您需要重新排序堆中的节点。为此，您必须不断从堆中弹出所有内容，直到找到所需的节点，然后更改权重，并将其推回（连同您弹出的所有其他内容）。老实说，仅使用数组可能会比这更有效且更容易编码。

我解决这个问题的方法是使用红黑树（在 C++ 中，它只是`set<>`STL 的数据类型）。数据结构包含一个`pair<>`具有`double`（成本）和`string`（节点）的元素。由于树结构，访问最小元素非常有效（我相信 C++ 通过维护指向最小元素的指针使其更加高效）。

除了树，我还保留了一个包含给定节点距离的双精度数组。因此，当我需要对树中的节点重新排序时，我只需使用与 dist 数组的旧距离以及节点名称即可在集合中找到它。然后，我将从树中删除该元素，并将其重新插入到具有新距离的树中。搜索节点`O(log n)`并插入节点 O(log n)，因此重新排序节点的成本为`O(2 * log n)`= `O(log n)`。对于二叉堆，它也有一个`O(log n)`用于插入和删除的（并且不支持搜索）。因此，在找到所需节点之前删除所有节点的成本，更改其权重，然后将所有节点重新插入。一旦节点重新排序，我将更改数组中的距离以反映新距离.

老实说，我想不出一种方法来修改堆以允许它动态更改节点的权重，因为堆的整个结构是基于节点维护的权重。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-19T17:11:33.020

除了 Min-Heap 数组之外，我还会使用哈希表来执行此操作。

哈希表具有被哈希编码为节点对象的键和作为这些节点在最小堆数组中位置的索引的值。

然后，每当您在最小堆中移动某些东西时，您只需要相应地更新哈希表。由于在最小堆中每次操作最多移动 2 个元素（即它们被交换），并且每次移动的成本是 O(1) 来更新哈希表，因此我们不会破坏最小堆操作。例如，minHeapify 是 O(lgn)。我们刚刚为每个 minHeapify 操作添加了 2 O(1) 哈希表操作。因此总体复杂度仍然是 O(lgn)。

请记住，您需要修改在最小堆中移动节点的任何方法来执行此跟踪！例如，minHeapify() 需要使用 Java 进行如下修改：

```
Nodes[] nodes;
Map<Node, int> indexMap = new HashMap<>();

private minHeapify(Node[] nodes,int i) {
    int smallest;
    l = 2*i; // left child index
    r = 2*i + 1; // right child index
    if(l <= heapSize && nodes[l].getTime() < nodes[i].getTime()) {
        smallest = l;
    }
    else {
        smallest = i;
    }
    if(r <= heapSize && nodes[r].getTime() < nodes[smallest].getTime()) {
        smallest = r;
    }
    if(smallest != i) {
        temp = nodes[smallest];
        nodes[smallest] = nodes[i];
        nodes[i] = temp;
        indexMap.put(nodes[smallest],i); // Added index tracking in O(1)
        indexMap.put(nodes[i], smallest); // Added index tracking in O(1)
        minHeapify(nodes,smallest);
    }
} 
```

buildMinHeap, heapExtract 应该依赖于 minHeapify，所以大部分是固定的，但是您确实需要从哈希表中删除提取的键。您还需要修改 reductionKey 以跟踪这些更改。一旦修复了，那么 insert 也应该被修复，因为它应该使用 reductionKey 方法。这应该涵盖您的所有基础，并且您不会更改算法的渐近边界，并且您仍然可以继续使用堆作为优先级队列。

请注意，在此实现中，Fibonacci Min Heap 实际上优于标准 Min Heap，但这是完全不同的蠕虫罐。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-23T15:40:18.410

此算法：[http](http://algs4.cs.princeton.edu/44sp/DijkstraSP.java.html) ://algs4.cs.princeton.edu/44sp/DijkstraSP.java.html 通过使用“索引堆”解决此问题：http: [//algs4.cs.princeton.edu/24pq/IndexMinPQ.java .html](http://algs4.cs.princeton.edu/24pq/IndexMinPQ.java.html)本质上维护从键到数组索引的映射列表。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-11-23T20:02:33.177

另一种解决方案是“延迟删除”。您只需将节点再次插入到具有新优先级的堆中，而不是减少键操作。因此，在堆中将有另一个节点副本。但是，该节点在堆中将高于任何先前的副本。然后在获得下一个最小节点时，您可以简单地检查节点是否已被接受。如果是，则只需省略循环并继续（延迟删除）。

由于堆内的副本，这具有稍差的性能/更高的内存使用率。但是，它仍然受到限制（连接数）并且对于某些问题大小可能比其他实现更快。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-03T06:49:15.587

我正在使用以下方法。每当我在堆中插入一些东西时，我都会将一个指针传递给一个整数（这个内存位置是我拥有的，而不是堆），它应该包含堆管理的数组中元素的位置。因此，如果堆中的元素序列被重新排列，则应该更新这些指针指向的值。

所以对于 Dijkstra 算法，我正在创建一个`posInHeap`sizeN 的数组。

希望代码能让它更清晰。

```
template <typename T, class Comparison = std::less<T>> class cTrackingHeap
{
public:
    cTrackingHeap(Comparison c) : m_c(c), m_v() {}
    cTrackingHeap(const cTrackingHeap&) = delete;
    cTrackingHeap& operator=(const cTrackingHeap&) = delete;

    void DecreaseVal(size_t pos, const T& newValue)
    {
        m_v[pos].first = newValue;
        while (pos > 0)
        {
            size_t iPar = (pos - 1) / 2;
            if (newValue < m_v[iPar].first)
            {
                swap(m_v[pos], m_v[iPar]);
                *m_v[pos].second = pos;
                *m_v[iPar].second = iPar;
                pos = iPar;
            }
            else
                break;
        }
    }

    void Delete(size_t pos)
    {
        *(m_v[pos].second) = numeric_limits<size_t>::max();// indicate that the element is no longer in the heap

        m_v[pos] = m_v.back();
        m_v.resize(m_v.size() - 1);

        if (pos == m_v.size())
            return;

        *(m_v[pos].second) = pos;

        bool makingProgress = true;
        while (makingProgress)
        {
            makingProgress = false;
            size_t exchangeWith = pos;
            if (2 * pos + 1 < m_v.size() && m_c(m_v[2 * pos + 1].first, m_v[pos].first))
                exchangeWith = 2 * pos + 1;
            if (2 * pos + 2 < m_v.size() && m_c(m_v[2 * pos + 2].first, m_v[exchangeWith].first))
                exchangeWith = 2 * pos + 2;
            if (pos > 0 && m_c(m_v[pos].first, m_v[(pos - 1) / 2].first))
                exchangeWith = (pos - 1) / 2;

            if (exchangeWith != pos)
            {
                makingProgress = true;
                swap(m_v[pos], m_v[exchangeWith]);
                *m_v[pos].second = pos;
                *m_v[exchangeWith].second = exchangeWith;
                pos = exchangeWith;
            }
        }
    }

    void Insert(const T& value, size_t* posTracker)
    {
        m_v.push_back(make_pair(value, posTracker));
        *posTracker = m_v.size() - 1;

        size_t pos = m_v.size() - 1;

        bool makingProgress = true;
        while (makingProgress)
        {
            makingProgress = false;

            if (pos > 0 && m_c(m_v[pos].first, m_v[(pos - 1) / 2].first))
            {
                makingProgress = true;
                swap(m_v[pos], m_v[(pos - 1) / 2]);
                *m_v[pos].second = pos;
                *m_v[(pos - 1) / 2].second = (pos - 1) / 2;
                pos = (pos - 1) / 2;
            }
        }
    }

    const T& GetMin() const
    {
        return m_v[0].first;
    }

    const T& Get(size_t i) const
    {
        return m_v[i].first;
    }

    size_t GetSize() const
    {
        return m_v.size();
    }

private:
    Comparison m_c;
    vector< pair<T, size_t*> > m_v;
}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-26T15:34:15.560

我相信主要困难是当我们必须更新顶点距离时能够实现 O(log n) 时间复杂度。以下是有关如何执行此操作的步骤：

1.  对于堆实现，您可以使用数组。
2.  对于索引，使用 Hash Map，以顶点编号为键，其在堆中的索引为值。
3.  当我们想要更新一个顶点时，在 O(1) 时间内在 Hash Map 中搜索它的索引。
4.  减少堆中的顶点距离，然后继续向上遍历（检查其与根的新距离，如果根的值更大，则交换根和当前顶点）。这一步也需要 O(log n)。
5.  当您在遍历堆时进行更改时，更新 Hash Map 中的顶点索引。

我认为这应该可行，并且正如理论所暗示的那样，整体时间复杂度将为 O((E+V)*log V)。

# html - 如何在页脚中锚定预订面板

> ID：14252583
> 
> 赞同：1
> 
> 时间：2013-01-10T07:11:50.453
> 
> 标签：html, css

我有这个网站[www.mydubaitrip.com](http://www.mydubaitrip.com)，您可以看到预订面板浮动在左侧。我想要的是在预订面板的边缘修复它。我怎样才能做到这一点？

我已经放在了绝对位置，但它不起作用。

更新：

请注意，我有一个 javascript 函数，它会自动重新调整横幅图像宽度和高度的大小，然后根据新的横幅图像高度自动放置页脚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T08:38:19.060

删除边距和 jist 类型

```
margin: 100px 0 0 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T07:24:49.873

摆脱`margin: 100px 0 0 56px;`上`.bookPanel`。

然后，位置仍设置为“相对”，执行`top: 110px;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T07:24:22.050

从 中删除左边距`.bookPanel`，使它像这样`margin: 100px 0 0 0;`

```
.bookPanel {
display: inline;
float: left;
margin: 0;
margin: 100px 0 0 0; 
position: relative;
width: 264px;
z-index: 1;
} 
```

如果你想调整顶部位置，你可以减少现在的顶部边距值`100px`

# python - 如何在 Mac/Python 中检查屏幕是否关闭？

> ID：14252588
> 
> 赞同：7
> 
> 时间：2013-01-10T07:12:24.443
> 
> 标签：python, macos

如何检查屏幕是否由于 Mac/Python 下系统偏好设置中的节能设置而关闭？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T02:55:47.883

**快速而肮脏的解决方案**：调用`ioreg`并解析输出。

```
import subprocess
import re

POWER_MGMT_RE = re.compile(r'IOPowerManagement.*{(.*)}')

def display_status():
    output = subprocess.check_output(
        'ioreg -w 0 -c IODisplayWrangler -r IODisplayWrangler'.split())
    status = POWER_MGMT_RE.search(output).group(1)
    return dict((k[1:-1], v) for (k, v) in (x.split('=') for x in
                                            status.split(','))) 
```

在我的电脑中， 的值`CurrentPowerState`是`4`屏幕打开和`1`屏幕关闭的时间。

**更好的解决方案**：用于`ctypes`直接从`IOKit`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T01:39:16.690

我能想到的唯一方法是使用**[OSX pmset 电源管理 CML 工具](https://www.dssw.co.uk/reference/pmset.html)**

> **描述**
> 
> ```
>  pmset changes and reads power management settings such as idle sleep timing, wake on administrative
>  access, automatic restart on power loss, etc. 
> ```

请参阅以下链接，它将提供大量信息，可以帮助您准确完成您正在寻找的内容。

[http://managingamac.blogspot.com/2012/12/power-assertions-in-python.html](http://managingamac.blogspot.com/2012/12/power-assertions-in-python.html)

我将包含链接提供的代码以用于“保存和记录”目的：

```
#!/usr/bin/python

import ctypes
import CoreFoundation
import objc
import subprocess
import time

def SetUpIOFramework():
  # load the IOKit library
  framework = ctypes.cdll.LoadLibrary(
      '/System/Library/Frameworks/IOKit.framework/IOKit')

  # declare parameters as described in IOPMLib.h
  framework.IOPMAssertionCreateWithName.argtypes = [
      ctypes.c_void_p,  # CFStringRef
      ctypes.c_uint32,  # IOPMAssertionLevel
      ctypes.c_void_p,  # CFStringRef
      ctypes.POINTER(ctypes.c_uint32)]  # IOPMAssertionID
  framework.IOPMAssertionRelease.argtypes = [
      ctypes.c_uint32]  # IOPMAssertionID
  return framework

def StringToCFString(string):
  # we'll need to convert our strings before use
  return objc.pyobjc_id(
      CoreFoundation.CFStringCreateWithCString(
          None, string,
          CoreFoundation.kCFStringEncodingASCII).nsstring())

def AssertionCreateWithName(framework, a_type,
                            a_level, a_reason):
  # this method will create an assertion using the IOKit library
  # several parameters
  a_id = ctypes.c_uint32(0)
  a_type = StringToCFString(a_type)
  a_reason = StringToCFString(a_reason)
  a_error = framework.IOPMAssertionCreateWithName(
      a_type, a_level, a_reason, ctypes.byref(a_id))

  # we get back a 0 or stderr, along with a unique c_uint
  # representing the assertion ID so we can release it later
  return a_error, a_id

def AssertionRelease(framework, assertion_id):
  # releasing the assertion is easy, and also returns a 0 on
  # success, or stderr otherwise
  return framework.IOPMAssertionRelease(assertion_id)

def main():
  # let's create a no idle assertion for 30 seconds
  no_idle = 'NoIdleSleepAssertion'
  reason = 'Test of Pythonic power assertions'

  # first, we'll need the IOKit framework
  framework = SetUpIOFramework()

  # next, create the assertion and save the ID!
  ret, a_id = AssertionCreateWithName(framework, no_idle, 255, reason)
  print '\n\nCreating power assertion: status %s, id %s\n\n' % (ret, a_id)

  # subprocess a call to pmset to verify the assertion worked
  subprocess.call(['pmset', '-g', 'assertions'])
  time.sleep(5)

  # finally, release the assertion of the ID we saved earlier
  AssertionRelease(framework, a_id)
  print '\n\nReleasing power assertion: id %s\n\n' % a_id

  # verify the assertion has been removed
  subprocess.call(['pmset', '-g', 'assertions'])

if __name__ == '__main__':
  main() 
```

[http://opensource.apple.com/source/PowerManagement/PowerManagement-211/pmset/pmset.c](http://opensource.apple.com/source/PowerManagement/PowerManagement-211/pmset/pmset.c)

该代码依赖于 IOPMLib，它的功能是做出断言、安排电源事件、测量热量等等。

[https://developer.apple.com/library/mac/#documentation/IOKit/Reference/IOPMLib_header_reference/](https://developer.apple.com/library/mac/#documentation/IOKit/Reference/IOPMLib_header_reference/)

要通过 Python 调用这些函数，我们必须通过 IOKit 框架。

[http://developer.apple.com/library/mac/#documentation/devicedrivers/conceptual/IOKitFundamentals/](http://developer.apple.com/library/mac/#documentation/devicedrivers/conceptual/IOKitFundamentals/)

为了让我们在 Python 中操作 C 数据类型，我们将使用一个名为 ctypes 的外部函数接口。

[http://python.net/crew/teller/ctypes/](http://python.net/crew/theller/ctypes/)

这是作者在页面上描述的包装器；由[迈克尔林恩撰](https://github.com/pudquick)写。我从上面的作者链接中发布的代码是对该代码的重写，以使其更易于理解。

[https://github.com/pudquick/pypmset/blob/master/pypmset.py](https://github.com/pudquick/pypmset/blob/master/pypmset.py)

# neo4j - 删除 neo4j 1.8 中的所有节点和关系

> ID：14252591
> 
> 赞同：97
> 
> 时间：2013-01-10T07:12:41.427
> 
> 标签：neo4j, nosql, relationship

我知道很多人已经
为我的研究提出了这个问题，这是之前提出的一些问题

1.  [如何删除neo4j图中的所有关系？](https://stackoverflow.com/questions/12899538/how-to-delete-all-relationships-in-neo4j-graph)
2.  [https://groups.google.com/forum/#!topic/neo4j/lgIaESPgUgE](https://groups.google.com/forum/#!topic/neo4j/lgIaESPgUgE)

但毕竟还是解决不了我们的问题，
我们只想删除“ALL”节点和“ALL”关系

![在此处输入图像描述](../Images/e41f3b769786f3b9eab24c3b1181a550.png)

假设 delete "ALL" 可以看到剩下**0 个节点 0 个属性和 0 个关系**

这是我执行论坛建议的删除“ALL”后的截图

我的问题还是一样，如何删除neo4j中的所有节点和所有关系

* * *

## 回答 #1

> 赞同：267
> 
> 时间：2014-01-25T23:13:17.987

**从 2.3.0 到 3.3.0**

```
MATCH (n)
DETACH DELETE n 
```

[文档](http://neo4j.com/docs/2.3.0/query-delete.html#delete-delete-all-nodes-and-relationships)

**2.3.0 之前**

```
MATCH (n)
OPTIONAL MATCH (n)-[r]-()
DELETE n,r 
```

[文档](http://neo4j.com/docs/2.2.8/query-delete.html#delete-delete-all-nodes-and-relationships)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-10T08:44:48.270

你可能做对了，只有仪表板只显示更高的 ID，因此“活动”节点的数量，关系，虽然没有。它只是提供信息。

为确保您有一个空图，请运行以下命令：

```
START n=node(*) return count(n);
START r=rel(*) return count(r); 
```

如果两者都给你0，你的删除是成功的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-25T19:34:51.553

对于大型数据库，您应该从磁盘中删除数据库（我猜在您首先停止引擎之后）或在 Cypher 中使用类似的东西：

```
MATCH (n)
OPTIONAL MATCH (n)-[r]-()
WITH n,r LIMIT 50000
DELETE n,r
RETURN count(n) as deletedNodesCount 
```

有关我从各种答案中收集到的更多信息，请参阅[https://zoomicon.wordpress.com/2015/04/18/howto-delete-all-nodes-and-relationships-from-neo4j-graph-database/](https://zoomicon.wordpress.com/2015/04/18/howto-delete-all-nodes-and-relationships-from-neo4j-graph-database/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-04T16:03:01.447

Neo4j 不能删除有关系的节点。您必须先删除关系，然后才能删除节点。

但是，使用简单的 chyper 删除“ALL”节点和“ALL”关系是一种简单的方法。这是代码：

匹配 (n) 分离删除 n

--> DETACH DELETE 将通过 Match 删除所有节点和关系

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-29T07:59:06.967

如果节点的名称是例如：abcd 那么下面的查询将起作用：

```
MATCH (n:abcd)
DETACH DELETE n 
```

这只会删除标签为“abcd”的节点及其所有关系。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-02T19:23:47.693

可能您会想要删除约束和索引

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-10-13T11:18:29.297

它会做的伎俩..

```
Match (n)-[r]-()
Delete n,r; 
```

# java - 当我调用取消时 timer.scheduleAtFixedRate 不会停止

> ID：14252592
> 
> 赞同：9
> 
> 时间：2013-01-10T07:12:42.217
> 
> 标签：java, android, timertask

在 onCreate，我运行一个每分钟重复的任务。我是怎么做的：

```
myTimer = new Timer();
    int delay = 30000;   // delay for 30 sec.
    int period = 600000;  // repeat every 60 sec.
    doThis = new TimerTask() {
      public void run() {

                     Log.v("TImer","repeated");
                     wv.reload();

      }
    };

    myTimer.scheduleAtFixedRate(doThis, delay, period); 
```

所有这些代码都在 onCreate 中。因此，当应用程序从屏幕上消失时，我可以在 logcat 中看到计时器钢运行，并且不会停止，除非应用程序被销毁。所以，`onPause`我打电话给活动，`myTimer.cancel();`但没有帮助。即使应用程序不在屏幕上，我仍然可以在 logcat 中看到更新。那么，如何停止`timerTask`呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T07:48:17.760

这是您放入我文件中的代码，并调整了值延迟和周期，因此我不必等待这么长时间。我运行应用程序。我在 LogCat 中看到了这些消息。我按下 Galaxy S3 上的主页按钮。然后消息在 LogCat 中停止。

```
public class MainActivity extends Activity {
    Timer myTimer;
    TimerTask doThis;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        myTimer = new Timer();
        int delay = 0;   // delay for 30 sec.
        int period = 1000;  // repeat every 60 sec.
        doThis = new TimerTask() {
          public void run() {

                         Log.v("TImer","repeated");

          }
        };

        myTimer.scheduleAtFixedRate(doThis, delay, period);
    }

    @Override
    protected void onPause() {
        myTimer.cancel();
        super.onPause();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:23:55.140

可能是因为线程已经发出，所以最后一次运行。在 onLoad 中将一个变量设置为 true，然后在 onPause 中将其设置为 false。然后在您的计时器任务中，仅当变量为真时才运行您的代码。

不过，写入新 if 语句之外的日志。如果它确实只是最后一次运行它，那么这可能是您的解决方案。但是，如果它在 onPause 之后仍然一遍又一遍地运行它，那么不要采用我的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-01T12:53:10.103

**实际答案是**：`onPause`需要正确定义方法。

**整个故事：**
提问者定义`onPause`错误的方法。这就是问这个问题的原因。

我写这篇文章是因为我花了太多时间阅读问题、答案、代码和评论。真正的答案隐藏在最后一条评论中。

# uibutton - iOS ipad splitview 主按钮带图标

> ID：14252593
> 
> 赞同：3
> 
> 时间：2013-01-10T07:12:46.070
> 
> 标签：uibutton, icons, master-detail, uisplitview

从我在 SDK 中找到的 spliview master/detail 示例开始，我最终得到了一个 iPad 应用程序，它的左侧有一个横向主控，而纵向一个名为“主控”的按钮允许显示主控。

![景观大师](../Images/a407c8601125fcffb1fc9155dd54e8ca.png)

![肖像大师](../Images/beeb90b2a9e5fc746d99e17c5c458a01.png)

要显示此按钮，请使用以下代码

```
- (void)splitViewController:(UISplitViewController *)splitController willHideViewController:(UIViewController *)viewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)popoverController
{
    barButtonItem.title = @"Master";
    [self.navigationItem setLeftBarButtonItem:barButtonItem animated:YES];
    self.masterPopoverController = popoverController;
} 
```

在我的应用程序中，主视图将是某种搜索视图，因此我希望名为 master 的按钮显示系统提供的搜索图标。

首先，我根本不知道如何以编程方式（在运行时）将系统图标添加到按钮？我知道如何在开发时而不是在运行时在 Xcode 的情节提要中选择它。

由于我不知道该怎么做，为了测试目的，我在栏的顶部添加了一个右栏按钮，我只是将其图像分配给主按钮，如下所示：

```
- (void)splitViewController:(UISplitViewController *)splitController willHideViewController:(UIViewController *)viewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)popoverController
{
    //barButtonItem.title = @"Master";
    barButtonItem.image = searchBarButton.image;
    [self.navigationItem setLeftBarButtonItem:barButtonItem animated:YES];
    self.masterPopoverController = popoverController;
} 
```

结果是主按钮根本不显示。

![在此处输入图像描述](../Images/f1d9310e5225c24df66aca1fa0cf798f.png)

我再说一遍，这只是为了测试目的，最后我想简单地分配系统提供的搜索图标。

所以我的两个问题是：

1.  为什么主按钮不显示？我是否有义务为此按钮使用“文本”
2.  如何将系统提供的图标（在运行时）分配给这样的按钮？

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-08T23:50:34.830

您需要初始化条形按钮项。您可以使用以下代码执行此操作，将目标和操作参数替换为您的目标和函数。

```
self.barButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Master" style:UIBarButtonItemStylePlain target:self action:@selector(action)];
[self.navigationItem setLeftBarButtonItem:_barButtonItem animated:YES]; 
```

如果要使用系统项，请使用以下代码，将 initWithTitle 替换为 initWithBarButtonSystemItem。再次替换目标和操作参数。

```
self.barButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemSearch target:self action:@selector(action)];
[self.navigationItem setLeftBarButtonItem:_barButtonItem animated:YES]; 
```

您还必须确保在@interface 下包含 barButtonItem。

```
@interface ViewController ()
@property UIBarButtonItem *barButtonItem;
@end 
```

# asp.net - 我调用一个 javascript 函数进行打印但不起作用

> ID：14252597
> 
> 赞同：3
> 
> 时间：2013-01-10T07:13:13.223
> 
> 标签：asp.net, javascript

我使用下面的代码从页面打印但不起作用（意味着当我单击打印按钮时没有任何反应）。该函数不调用

```
 <script type="text/javascript">
        function printing() {
            window.print();
        }
    </script>

protected void print_Click(object sender, EventArgs e)
{
    btnPrint.Attributes.Add("onclick", "return printing()");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T07:20:25.803

试试这个方法：

```
<asp:Button ID="print" runat="server" Text="Print" OnClientClick="javascript:window.print();" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T07:19:40.190

在javascript中添加`attribute`page_load 事件，以便在单击打印按钮打印页面之前绑定 javascript。`bind``event`

```
private void Page_Load(object sender, System.EventArgs e)
{
    btnPrint.Attributes.Add("onclick", "return printing()");
    //Your code here.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T07:17:45.787

当用户单击按钮时，您正在添加一个属性，而不是调用该`printing()`函数。

您应该将`OnClientClick`属性添加到按钮 html 中的按钮，如下所示：

`<asp:button OnClientClick="return printing" ....`

# android - 在 Android 中的 Item Click 上停止滑动菜单中的幻灯片向后滑动

> ID：14252602
> 
> 赞同：1
> 
> 时间：2013-01-10T07:13:42.447
> 
> 标签：android, android-layout, android-widget

我已经使用 coboltforge.slidemenu 库为 android 平板电脑构建了一个幻灯片菜单。我不希望幻灯片在项目单击时返回并在全屏上执行相应的任务。我希望幻灯片保持打开，并且项目单击任务将在剩余空间中打开（右侧）。空间不是问题，因为它是平板电脑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:26:07.627

对于滑动菜单，我推荐[https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)。它被流行的应用程序广泛使用，如适用于 Android 的 VLC 和 Wunderlist2。

然后你应该检查它的[ResponsiveUIActivity](https://github.com/jfeinstein10/SlidingMenu/blob/master/example/src/com/slidingmenu/example/fragments/ResponsiveUIActivity.java)示例及其相关实现。这正是你想要的。

# android - 集成我的 android 应用程序的问题

> ID：14252603
> 
> 赞同：0
> 
> 时间：2013-01-10T07:13:53.600
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我正在开发启动画面、`GridView`和`ListView`其他 4 个代码。

由于单击`GridView`图像、视频、文档和上传的每个项目都显示相同的项目`ListView`（我的代码就是这样），我对如何在**onItemClick(AdapterView parent, View view, int position, long id ) 中应用循环感到困惑)**方法，以便我可以根据和中的项目显示图像代码、视频代码、文档代码和上传`GridView`代码`ListView`

**准确地说，只需通过以下流程**

1.Image(Grid View)--Onclick---->Item1(listview)--Onclick()-->Image Code

```
 ---->Item2(listview)--Onclick()-->Image Code
                          ---->Item3(listview)--Onclick()-->Image Code
                          ---->Item4(listview)--Onclick()-->Image Code 
```

2.Video(Grid View)--Onclick---->Item1(listview)--Onclick()-->Video Code

```
 ---->Item2(listview)--Onclick()-->Video Code
                          ---->Item3(listview)--Onclick()-->Video Code
                          ---->Item4(listview)--Onclick()-->Video Code 
```

3.Document(Grid View)--Onclick---->Item1(listview)--Onclick()-->Document Code

```
 ---->Item2(listview)--Onclick()-->Document Code
                          ---->Item3(listview)--Onclick()-->Document Code
                          ---->Item4(listview)--Onclick()-->DocumentCode 
```

4.Upload(Grid View)--Onclick---->Item1(listview)--Onclick()-->上传代码

```
 ---->Item2(listview)--Onclick()-->Upload Code
                          ---->Item3(listview)--Onclick()-->Upload Code
                          ---->Item4(listview)--Onclick()-->UploadCode 
```

如果有人可以提供帮助，那就太好了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:12:57.473

如果您的网格屏幕和列表屏幕是单独的活动，那么您可以传递用户选择的网格选项的“类型”作为您用于启动列表活动的意图中的额外内容。然后根据这个值，您可以决定要在 onItemClick 中执行的操作。希望有帮助。

1.  定义操作的类型。像，

    公共静态最终 int OPTION_IMAGECODE = 1 ；

    公共静态最终 int OPTION_VIDEOCODE = 2 ；...ETC

    和一个保存类型的变量，例如 private int selectedGridOption ；

2.  当用户单击网格选项时，填充变量。像，

    selectedGridOption = OPTION_IMAGECODE ; 如果用户选择图像类型。

3.  在您用于启动列表活动的意图中，将此值作为额外值。比如， listActivityIntent.putExtra("Selected Option", selectedGridOption) ;

4.  在您列出的活动中，您可以将该值检索为，

    getIntent().getIntExtra("选择的选项", *default_value_you_want*) ;

# android - 运行 Android 测试用例时显示警报对话框

> ID：14252604
> 
> 赞同：0
> 
> 时间：2013-01-10T07:13:54.767
> 
> 标签：android, android-alertdialog, robotium

我正在使用 Robotium 自动测试应用程序。有没有一种方法可以在执行特定测试用例时显示警告框。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:22:07.903

有可能做到，几乎一切皆有可能，但在我给你答案之前，你有充分的理由这样做吗？我不能轻易找到为什么测试应该打开警报框的充分理由，但您可能最清楚。

Robotium有方法。

```
solo.getCurrentActivity(); 
```

使用它，您可以获得一个活动上下文，并且通过这样的事情，您几乎可以做任何您可以在 android 活动中做的事情。页面[http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)告诉我们如何制作对话框，您会注意到第一行调用了一个方法来获取 currentActivity，而不是我将其替换为上面的robotium方法。

```
// 1\. Instantiate an AlertDialog.Builder with its constructor
  AlertDialog.Builder builder = new AlertDialog.Builder(solo.getCurrentActivity());

// 2\. Chain together various setter methods to set the dialog characteristics
builder.setMessage(R.string.dialog_message)
       .setTitle(R.string.dialog_title);

// 3\. Get the AlertDialog from create()
AlertDialog dialog = builder.create(); 
```

这将创建一个对话框，然后只需调用 dialogs .show() 方法将其显示在屏幕上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:16:13.297

Robotium 测试不在 UI 线程上运行，因此测试方法中的任何代码在最好的情况下都将不起作用，在最坏的情况下会抛出错误并导致测试失败。

要从测试方法内部与 UI 交互，您需要在 UI 线程上运行代码。这可以通过在 Runnable 中编写该代码并将该 Runnable 发送到`runOnUiThread()`当前 Activity 的方法来完成。Robotium 的独奏类具有`getCurrentActivity()`允许执行此操作的方法。这是一个如何使用此技术展示 Toast 的示例。

```
public void testDisplayToastInActivity() throws Exception
{
    Runnable runnable = new Runnable
    {
        @Override
        public void run()
        {
            Toast.makeText(solo.getCurrentActivity(), "Hello World", Toast.LENGTH_LONG).show();
        }
    }

    solo.getCurrentActivity().runOnUiThread(runnable);
 } 
```

`runOnUiThread()`如果您想要的不仅仅是 Toast，您可以使用它来执行与 Activity 交互的许多其他操作，例如创建警报对话框。但是，我建议不要这样做，即使你可以。Robotium 和其他测试框架旨在判断您的应用程序代码执行的正确性，并且不应注入任何逻辑或 UI 修改行为，而不是像用户那样与您的应用程序交互。如果您从测试中获取任何输出并将它们记录到 Logcat 或文件中，您的测试将会更干净。

# msp430 - 需要旧版 MSP430 DLL V3 包

> ID：14252608
> 
> 赞同：1
> 
> 时间：2013-01-10T07:14:09.743
> 
> 标签：msp430

最新版本不支持 python-msp-tool，它需要从最新版本的 DLL V3 中删除的 MSP430_Identify() 函数。

所以任何人都可以与我分享你的旧版本 DLL V3 吗？原始 zip 文件的名称应为 slac460c.zip，而不是 slac460.zip。而且版本号是3.2.4.5或者更低，不是3.2.5.4。

非常感谢！

**编辑**：我只是发现TI已经发布了一些旧版本的MSP430 DLL V3包，但它似乎是用于在所有功能都打包好的windows下开发的。我需要的是可以在Linux下用Makefile制作的纯源代码。

**编辑**：我已经为 Raspberry Pi 编译了最新版本的 libMSP430.so (3.2.5.4)。为了节省其他人的时间，我在[这里](https://docs.google.com/file/d/0B01J7KEhxzPCeWI4UUVReUEzeDg/edit)发布了文件。

**编辑**：MSP430_Identify() 可以由以下两个函数代替：MSP430_OpenDevice 和 MSP430_GetFoundDevice。您可以参考 MspDebug 工具，它们使用的是最新的 DLL 驱动程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-13T13:59:02.730

MSP430 V3 现已开源。[您可以在TI 网站上](http://processors.wiki.ti.com/index.php/MSP_Debug_Stack)轻松找到它们，包括所有版本。

# python - 在python中迭代HTML中的“类”属性？

> ID：14252609
> 
> 赞同：1
> 
> 时间：2013-01-10T07:14:10.640
> 
> 标签：python, html, beautifulsoup

我有一个来自网站的 HTML 字符串。以下是其中存在的部分内容。

```
<p class="news-body">
<a href="/ci/content/player/45568.html" target="new">Paul Harris,</a> the South African spinner, is to retire at the end of the season, bringing to an end a 14-year first-class career.
</p>
<p class="news-body">
 Harris played 37 Tests for South Africa with his slow-left arm but nearly turned his back on international cricket after a stint as a Kolpak with Warwickshire in 2006\. The retirement of Nicky Boje prompted Harris' eventual call-up and he went on to take 103 wickets at 37.87.
</p>
<p class="news-body">
His last Test was in Cape Town against India in January 2011 after which he was dropped for legspinner Imran Tahir. As recently as the start of this season he indicated his intention to compete for a Test place once again.
</p>  </div>
   <!-- body area ends here  --> 
```

我想提取所有存在于`<p class="news-body">`.

我用过美丽的汤。

```
from BeautifulSoup import BeautifulSoup
html = #the HTML code you've written above
parsed_html = BeautifulSoup(html)
print parsed_html.body.find('p', attrs={'class':'news-body'}).text 
```

不幸的是，上面只返回第一行，即：

```
Paul Harris,the South African spinner, is to retire at the end of the season, bringing to an end a 14-year first-class career. 
```

我希望它返回所有文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:19:19.263

`find`只找到第一个元素。你想要`findAll`，它将返回一个元素列表。

您可以像这样将他们的文本连接在一起：

```
text = '\n'.join(element.text for element in soup.findAll('p', ...)) 
```

另外，我建议您升级到最新版本的 BeautifulSoup。

# hadoop - Hive 中的堆栈函数：如何指定多个别名？

> ID：14252615
> 
> 赞同：0
> 
> 时间：2013-01-10T07:14:56.063
> 
> 标签：hadoop, hive

我想使用这里描述的堆栈函数：[https ://cwiki.apache.org/Hive/languagemanual-udf.html#LanguageManualUDF-BuiltinTableGeneratingFunctions%2528UDTF%2529](https://cwiki.apache.org/Hive/languagemanual-udf.html#LanguageManualUDF-BuiltinTableGeneratingFunctions%2528UDTF%2529)

Hive 要求我为结果列提供多个别名（“AS 子句中的别名数与 UDTF 输出的列数不匹配，预期 3 个别名但得到 1 个”）。

提供多个别名的语法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:07:31.137

语法如下：

```
SELECT stack(n, col1, col2, ..., colk) AS (alias1, alias2, ...) FROM myTable; 
```

使用 LATERAL VIEW，语法如下：

```
SELECT a, b, alias1, alias2... FROM myTable
    LATERAL VIEW stack(n, col1, col2, ..., colk) tableAlias AS alias1, alias2, ... ; 
```

# jquery - 彩盒头痛

> ID：14252620
> 
> 赞同：0
> 
> 时间：2013-01-10T07:15:23.370
> 
> 标签：jquery, jquery-plugins, colorbox

我制作了一个从 xml 文件中提取信息的播放列表。通过单击超链接调用视频。我正在尝试添加颜色框，我已经得到了这个框，但我一生都无法弄清楚如何让视频打开到颜色框中。这是我使用的代码：

```
$(function() {
   /* be sure data is defined here */
$( data ).find("chapter").each(function() {

    var $chapter = $('<li class="chaptertitle"/>')
    .append('<img class="img-swap" src="http://sandbox.kalliance.com/demo/images/plus.png" class="img-swap" />')
    .append('<p align="left" class="pc-left">' + $(this).attr("label") + '<p align="right" class="pc-right">Duration</p>')
    .append('<ul/>')
    .appendTo( '#screens' );
    $(this).find('screen').each(function() {
        time=$(this).find('screen').attr('duration')
        $("#screens").append(time)
         $('#screens ul:last')
         .append('<li class="screentitle"/>')
         .find('li:last')
         .append('<p align="left" class="p-left"><a href="'+streamer+''+filenum+'/streams/_definst_/' + $(this).attr('path') + '" id="colorbox-load">' + $(this).attr('label') + ' </a></p>  <p align="right" class="p-right">'+ $(this).attr("duration")+'</p>');

         //tgonzalez - create the modal window for the video

       $("#colorbox-load").click(function() {
        $.colorbox({inline:true, width:960, height:540, opacity:0.8 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:43:49.383

jquery 的 colorbox API 引用了您尝试在颜色框中打开的容器。尝试这个

```
$.colorbox({href: "#divIdHere", inline:true, width:960, height:540, opacity:0.8 }); 
```

# python - 艰难地学习 Python：Ex16 'w+'

> ID：14252621
> 
> 赞同：-1
> 
> 时间：2013-01-10T07:15:28.627
> 
> 标签：python

我对本练习中的额外学分有疑问。我希望这个脚本不仅可以打开并写入文件，还可以将我刚刚写入文件的内容读回给我。在 print target.read() 部分，控制台打印一堆空白空间，但不是我输入的文字。文件的写入部分有效，因为当我打开实际的 .txt 文件时，文本就在那里。所有额外的空白空间来自哪里？为什么它不给我读回文本？谢谢！

```
print "Now I'm going to ask you for three lines."
line1 = raw_input("line 1: ")
line2 = raw_input("line 2: ")
line3 = raw_input("line 3: ")

print "I'm going to write these to the file."

target.write("%s\n%s\n%s\n" %(line1, line2, line3))

print target.read() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T07:21:55.750

在使用之前，您需要将文件光标移回文件开头`read()`。

```
In [14]: target=open("data.txt","w+")

In [15]: target.write("foo bar")

In [21]: target.tell()    #current position of  the cursor
Out[21]: 7L

In [16]: target.seek(0)   #change it to 0

In [17]: target.read()
Out[17]: 'foo bar' 
```

帮助`seek()`：

```
In [18]: print target.seek.__doc__
seek(offset[, whence]) -> None.  Move to new file position.

Argument offset is a byte count.  Optional argument whence defaults to
0 (offset from start of file, offset should be >= 0); other values are 1
(move relative to current position, positive or negative), and 2 (move
relative to end of file, usually negative, although many platforms allow
seeking beyond the end of a file).  If the file is opened in text mode,
only offsets returned by tell() are legal.  Use of other offsets causes
undefined behavior.
Note that not all file objects are seekable. 
```

帮助`tell()`：

```
In [22]: print target.tell.__doc__
tell() -> current file position, an integer (may be a long integer). 
```

# c# - Dundas 仪表板图像悬停交互

> ID：14252622
> 
> 赞同：2
> 
> 时间：2013-01-10T07:15:31.603
> 
> 标签：c#, dundas

在 Dundas 仪表板中，我有一个小图像，如果您将鼠标悬停在它上面，则该图像必须出现。任何人都可以帮助我进行悬停交互编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:48:06.963

在 Image 控件的 Hover 或 MouseEnter 交互中放置如下内容：

```
sender.Url = new DashboardImageUrl("http://www.example.com/myimage.png"); 
```

**编辑：**如果要在另一个仪表板中显示仪表板，可以使用 Dashblock Viewer 控件。但是，该控件只能显示 Dashblocks，而不是完整的 Dashboards。

如果您想在某种弹出窗口或悬停中显示仪表板，您可以使用`services.ShowDashboardDialog`或`services.ShowDashboardPopup`重载。

# jsp - JSP 中的会话交换问题

> ID：14252624
> 
> 赞同：3
> 
> 时间：2013-01-10T07:15:46.597
> 
> 标签：jsp, session, servlets

在我的应用程序**中，如果两个人同时尝试登录**，他们的会话就会互换。或者一个会得到**其他会话**。我正在**使用 JSP 和 servlet**。用于创建会话的**代码**如下（**在 servlets 中**）

```
session.setAttribute("userid", new Long(userid));
response.setHeader("Cache-Control", "no-cache"); 
```

如果有人遇到同样的情况并解决了这个问题，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:51:59.983

'userid' 变量必须是唯一的，所以记录它的值来验证这一点。此外，会话管理不仅仅是此设置！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:03:18.527

您是否使用相同的浏览器以不同的用户身份登录？如果它是真的，那么可能是您没有在登录屏幕中使先前的会话无效。因此，假设您使用用户 A 登录并创建了会话对象。然后您使用用户 B 登录，但会话未失效，并且您正在将参数添加到与用户 A 相同的会话对象中。

# jquery - JAX-RS webservice从ajax调用提供excel文件，如何显示保存对话框

> ID：14252626
> 
> 赞同：0
> 
> 时间：2013-01-10T07:15:58.847
> 
> 标签：jquery, ajax, jax-rs

我有一个 JAX-RS 网络服务，它创建一个作为字节数组的 excel 文件并将其返回到我的 javascript 应用程序，该服务可以工作，因为我可以使用 firebug 检查响应，它包含我设置的标头和包含 excel 文件的字节。

但是我认为通过设置 content-disposition 标头会有一个保存对话框，似乎没有。
下面我粘贴了我在回复中收到的标题，有什么我忘记了吗？

```
Content-Disposition attachment; filename=file.xls
Content-Length  17920
Content-Type    application/vnd.ms-excel
Date    Thu, 10 Jan 2013 07:07:49 GMT
Server  Apache-Coyote/1.1
X-Powered-By    Servlet 2.5; JBoss-5.0/JBossWeb-2.1 
```

ajax 调用当前没有成功函数，我是否需要编写某种函数来显示保存对话框，或者设置额​​外的标题是否足够，如果需要，是哪些？

谢谢
J。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:33:29.097

这就是我修复它的方法：

我保留了 ajax 调用，因为我正在以指定的 json 格式向服务器端发送大量参数和数据数组，但是我返回了一个 base64 编码的字符串，我将它添加到一个隐藏的表单中，该表单指向服务器端的一个链接它将标头设置为带有解码字符串的响应，这不是最优雅的解决方案，但它可以解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T15:19:09.040

正如上面 Musa 所建议的那样，摆脱 AJAX 并将您的用户转发到返回 Excel 数据的 URL，该 URL 与您现在使用的标题完全相同（它们是正确的）。

# android - 如果不存在，Android 会显示添加 google 帐户屏幕

> ID：14252630
> 
> 赞同：0
> 
> 时间：2013-01-10T07:16:26.113
> 
> 标签：android, google-play

我正在开发一个 android 应用程序，如果不存在 google 帐户，则允许用户使用他们的 google 帐户登录。我已经知道如何开始添加帐户活动代码：

```
startActivity(new Intent(android.provider.Settings.ACTION_ADD_ACCOUNT)); 
```

此屏幕让用户选择类型帐户。我想跳过该屏幕。我想显示添加谷歌帐户屏幕（就像 Google Play 一样）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:25:43.417

```
 AccountManager acm = AccountManager.get(getApplicationContext());
      acm.addAccount("com.google", null, null, null, this, 
      null, null); 
```

添加清单：

```
 <uses-permission android:name="android.permission.MANAGE_ACCOUNTS"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T11:09:31.700

使用它来检索谷歌帐户（如果存在）

```
 Pattern emailPattern = Patterns.EMAIL_ADDRESS; // API level 8+
    Account[] accounts = AccountManager.get(this).getAccounts();
    for (Account account : accounts) {
        if (emailPattern.matcher(account.name).matches()) {
            possibleEmail = account.name;
        }
    } 
```

# c# - 如何在单击窗口关闭按钮时杀死 wpf 应用程序中的所有线程

> ID：14252632
> 
> 赞同：2
> 
> 时间：2013-01-10T07:16:32.370
> 
> 标签：c#, wpf

我创建了一个 WPF 应用程序。我的应用程序中有两个线程正在运行：

1.  第一个线程异步监听端口 40010 上的 TCP 数据包并将数据推送到 MSMQ
2.  来自 MSMQ 的第二个线程弹出数据

当我通过单击窗口关闭按钮关闭应用程序时，它没有显示错误。但是当我再次启动应用程序时，它会抛出异常：

```
Unable to start Listrner : Only one usage of each socket address 
    (protocol/network address/port) is normally permitted 
```

当我重新启动我的电脑时，它第一次成功运行，但在关闭应用程序时它不再工作

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T07:25:54.293

你不应该杀死你的线程。

你应该做的是为他们提供一个很好的完成方式。在您的应用程序关闭时，您应该设置一些变量：

```
volatile bool shouldClose; 
```

并在您的线程中使用该变量，然后再弹出下一个包并在那里制动您的无限循环。

至于主应用程序，它应该等待您的线程完成。

对于 volatile 关键字，请参阅[文档](http://msdn.microsoft.com/en-us/library/x13ttww7%28v=vs.110%29.aspx)。

# java - 使用 ClasspathXmlApplicationContext 自定义 Spring ResourceLoader

> ID：14252638
> 
> 赞同：3
> 
> 时间：2013-01-10T07:16:53.370
> 
> 标签：java, spring

我正在寻找一种创建自定义 ResourceLoader 的方法，它将使用从 hbase 表中读取的属性。我发现我可以创建自己的 ApplicationContext，覆盖 getResource 并使用自己的 ResourceLoader。

```
@Override
public Resource getResource(String location) {
    if (location.startsWith(HbaseResource.HBASE_PREFIX) ) {
        ResourceLoader loader = (ResourceLoader)getBean(HbaseResourceLoader.class);
        return loader.getResource(location);
    } else{
        return super.getResource(location);
    }
} 
```

我正在寻找一种方法来获得相同的结果，只使用 ClasspathXmlApplicationContext 而不是创建我自己的 contxt 类。阅读[ResourceLoaderAware](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/ResourceLoaderAware.html)我看到这一行：

> 作为 ResourcePatternResolver 依赖项的替代方案，请考虑公开类型为 Resource 数组的 bean 属性，这些属性通过模式字符串填充，并由 bean 工厂自动进行类型转换。

这对我有什么帮助吗？我是否错过了注册自定义 ResourceLoader 的另一种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T09:29:26.223

ResourceLoader 是一种特殊的构建块，不能像其他一些容器服务那样直接注入，但我相信您对类型转换的观察会有所帮助。您可以安装具有一些适合您的功能的 ConversionService（bean 名称为“conversionService”），如果您可以确保在需要进行任何转换之前它已注册，那么我认为它会起作用。你如何做到这一点取决于你是使用 XML 还是 @Configuration。一个简单的玩具示例：

```
@Test
public void testResource() {
    System.setProperty("value", "123");
    System.setProperty("resource", "location:not.found");
    AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext();
    context.register(TestConfig.class);
    context.refresh();
    Resource resource = context.getBean("resource", Resource.class);
    assertTrue(resource.exists());
}

@Configuration
@Import(ConversionConfig.class)
public static class TestConfig {

    @Value("${resource}")
    private Resource resource;

    @Bean
    public Resource resource() {
        return resource;
    }

    @Bean
    public static PropertySourcesPlaceholderConfigurer placeholders() {
        return new PropertySourcesPlaceholderConfigurer();
    }

}

@Configuration
public static class ConversionConfig {

    @Bean
    protected ConversionService conversionService(final ResourceLoader loader) {
        GenericConversionService service = new GenericConversionService();
        service.addConverter(new Converter<String, Resource>() {
            public Resource convert(String location) {
                Resource resource = loader.getResource(location);
                if (resource.exists()) {
                    return resource;
                }
                return new ByteArrayResource("foo".getBytes());
            }
        });
        return service;
    }

} 
```

# mysql - MySQL 检查 MAX 值是否重复

> ID：14252640
> 
> 赞同：2
> 
> 时间：2013-01-10T07:17:16.783
> 
> 标签：mysql, sql, select

我正在我的网站上举办比赛。每场比赛都可以有多个参赛作品。如果只有投票的 MAX 值有重复，我想检索。

表格如下：

```
contest_id    entry_id    votes
1             1           50
1             2           34
1             3           50
2             4           20
2             5           55
3             6           53 
```

我只需要查询来告诉我比赛 1 有一个重复的 MAX 值而没有额外的信息。

我试过这个但没有奏效：

```
SELECT MAX(votes) from contest group by contest_id having count(votes) > 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T07:22:57.143

这会找到每场比赛的最大投票值，并计算具有该投票数的条目。然后它会显示多于一击的比赛。

```
SELECT contest_id
FROM contests
WHERE votes=(
  SELECT MAX(votes) FROM contests c WHERE c.contest_id=contests.contest_id
)
GROUP BY contest_id
HAVING COUNT(*) > 1; 
```

[用于测试的 SQLfiddle](http://sqlfiddle.com/#!2/dcf97/1)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T07:24:27.347

```
SELECT  a.contest_ID
FROM    contest a
        INNER JOIN
        (
          SELECT contest_id, MAX(votes) totalVotes
          FROM contest
          GROUP BY contest_id
        ) b ON a.contest_ID = b.contest_ID AND
               a.votes = b.totalvotes
GROUP BY a.contest_ID
HAVING COUNT(*) >= 2 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/6e4d1/8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T07:33:24.450

您可以通过首先在子查询中为每个竞赛 ID 选择最大票数，然后加入结果（[SQLFiddle 上](http://sqlfiddle.com/#!2/dd5f2/1)的演示）来做到这一点：

```
SELECT contest_id, votes
FROM contest
  JOIN (
    SELECT contest_id, MAX(votes) AS votes
    FROM contest GROUP BY contest_id
  ) AS foo USING (contest_id, votes)
GROUP BY contest_id
HAVING COUNT(*) > 1 
```

这样做的好处是它是一个独立的子查询，所以 MySQL 只需要摩擦一次。

附言。是的，这与 JW 的答案基本相同，但我想我还是会保留它以显示我用于连接的略有不同的语法。

# windows - 使用 'svn merge' 合并时复制 SVN 日志消息

> ID：14252641
> 
> 赞同：1
> 
> 时间：2013-01-10T07:17:19.390
> 
> 标签：windows, svn, merge, continuous-integration, messages

将更改从一个分支合并到另一个分支时，在日志中查找相关范围的更改并手动复制消息是很乏味的。TortoiseSVN 确实通过“最近的消息”按钮很好地解决了这个问题，但我必须通过 'svn merge' 来解决这个问题以进行持续集成设置。

我认为这是一个常见问题，但找不到任何解决方案，所以这是我自己的。请随时发布更好的解决方案作为对此的答案。

## 我的情景

我会定期将 1:HEAD 从 /trunk 合并到 /branches/AutoDeploy。除了合并之外，AutoDeploy 永远不会被提交，所以这应该可以简化事情。我想使用 'svn merge' 或类似的命令行工具进行合并，并且我希望提交消息包含来自合并修订版的所有消息。

该解决方案必须适用于 SVN 和 Windows，但要与其他操作系统兼容才能获得加分。

编辑：拆分问题和答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:31:30.437

## 我的解决方案

为了通过持续集成触发部署，我运行了一个批处理脚本，该脚本合并来自主干的最新更改，检索相关日志消息并提交这些消息。

脚本是这样的：

*   使用 svnversion 和 sed.exe + regex 获取分支的修订版本。
*   从分支修订获取主干的日志消息到 HEAD，保存到 messages.txt。
*   将主干合并到分支中。
*   使用 --file messages.txt 提交。

* * *

**文件夹结构**

```
/trunk
/branches/AutoDeploy
/branches/AutoDeploy/AutoDeployTools
/branches/AutoDeploy/AutoDeployTools/Merge_from_trunk.bat
/branches/AutoDeploy/AutoDeployTools/sed.exe
/branches/AutoDeploy/AutoDeployTools/current_rev.txt*
/branches/AutoDeploy/AutoDeployTools/messages.txt* 
```

* 为每次合并生成的临时文件。

**Merge_from_trunk.bat**

```
@echo off

del *.txt
SET MessagesFile=messages.txt
SET CurrentRevFile=current_rev.txt
SET RepoUrl=svn://<host>
SET LocalBranchPath=../

REM CD %LocalBranchPath%

REM Get current revision for branch. Typically formatted as "683:684".
echo|set /p=Getting current revision for branch...
svnversion -c -n %LocalBranchPath% /branches/AutoDeployWeb > %CurrentRevFile%

REM Strip away number before colon (683:684 => 684)
sed -i s/.*\:// %CurrentRevFile%

REM Strip away any characters that indicate Modified (M), Switched (S) etc.
sed -i s/[a-zA-Z]// %CurrentRevFile%

SET /p BranchRev=<%CurrentRevFile%
echo DONE! 
echo Current revision in AutoDeployWeb is %BranchRev%.

REM Retrieve relevant log messages for this merge.
echo|set /p=Getting log messages for revisions %BranchRev%:HEAD...
svn log %RepoUrl%/trunk -r %BranchRev%:HEAD > %MessagesFile%
echo DONE!

REM Merge
echo Merging...
svn up %LocalBranchPath%
svn merge svn://dev.swingcatalyst.com/SC_Online/trunk %LocalBranchPath%
echo Merging DONE!

REM Commit
echo|set /p=Committing...
echo Commit message:
type %MessagesFile%
svn commit --file %MessagesFile% %LocalBranchPath%
echo DONE!
pause 
```

**已知限制**

*   当前的实现不允许您向提交消息添加文本，但这应该很容易添加。
*   如果分支被提交到，除了合并之外，它会导致 svnversion 不包括在最后一个分支提交之前来自修订的日志消息。对此有解决方案，例如解析 svn merge 文本输出而不是使用 svnversion。

编辑：添加了另一个已知限制。编辑：将 sed.exe 添加到文件夹结构中。

# django - httpresponseredirect 不起作用

> ID：14252645
> 
> 赞同：1
> 
> 时间：2013-01-10T07:17:37.103
> 
> 标签：django, redirect

对于注册页面，

我有如下视图设置

```
def signup(request):
  if request.method == 'GET':
      return render_to_response(..)
  elif request.method == 'POST':
      ...
      return HttpResponseRedirect(reverse('user_home', args=[user_id])

[10/Jan/2013 16:11:53] "GET /site/signup/ HTTP/1.1" 200 62097
[10/Jan/2013 16:12:20] "POST /site/signup/ HTTP/1.1" 302 0                                                                                                                                                                                                                      
[10/Jan/2013 16:12:20] "GET /gallery/user/19 HTTP/1.1" 200 31575 
```

即使服务器日志显示`GET /gallery/user/19`，我仍然在浏览器上看到提交表单页面。
为什么重定向对我不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:37:10.910

不知道这是做什么的，但注释掉做了
什么工作？

```
<script type="text/javascript">                                                                                                                                                                                                                                                 
// {% include 'include/jquery.ajaxupload.js'%}                                                                                                                                                                                                                                  

// $('document').ready(function(){                                                                                                                                                                                                                                              
//      var $form = $('#form-signupForm form');                                                                                                                                                                                                                                 

//      $form.submit(function(){                                                                                                                                                                                                                                                
//              $(this).ajaxSubmit({                                                                                                                                                                                                                                            
//                      success:function(response){                                                                                                                                                                                                                             
//                              console.log(response);                                                                                                                                                                                                                          
//                      }                                                                                                                                                                                                                                                       
//              });                                                                                                                                                                                                                                                             
//              return false;                                                                                                                                                                                                                                                   
//      });                                                                                                                                                                                                                                                                     

});                                                                                                                                                                                                                                                                             
</script> 
```

# blackberry - 将 BlackBerry Map 添加到应用程序

> ID：14252646
> 
> 赞同：0
> 
> 时间：2013-01-10T07:17:41.187
> 
> 标签：blackberry, blackberry-maps

我正在尝试调用地图应用程序。我得到一个例外，上面写着：

> MapException（检索字典时出错）。

我的设备是否需要有效的 BlackBerry 帐户才能使用 BlackBerry 地图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:42:27.140

```
int mh1 = CodeModuleManager.getModuleHandle("net_rim_bb_lbs"); // For OS 4.5 - 5.0
int mh2 = CodeModuleManager.getModuleHandle("net_rim_bb_maps"); // For OS 6.0

if (mh1 == 0 && mh2 == 0) {
       Dialog.alert("BlackBerry Maps not installed");
 } 
```

# tizen - kernel-adaptation-pc : 构建这个包时出错

> ID：14252647
> 
> 赞同：1
> 
> 时间：2013-01-10T07:17:42.917
> 
> 标签：tizen

我在构建 TIZEN 的特定包 kernel-adaptation-pc 时出错。

请帮帮我。

拱门 = i586

日志附在下面：

$:~/tizbuild/kernel/kernel-adaptation-pc$ gbs build -A i586 --include-all

信息：生成存储库...

信息：构建 conf 已下载在：/var/tmp/vivek-gbs/tizen2.0.conf

信息：从以下位置开始构建包：/home/vivek/tizbuild/kernel/kernel-adaptation-pc (git)

信息：准备资源...

信息：从以下位置开始导出源：/home/vivek/tizbuild/kernel/kernel-adaptation-pc ...

信息：将包括以下未跟踪的文件：.gitattributes

致命的：ref HEAD 不是符号 ref

致命的：ref HEAD 不是符号 ref

错误：多次找到 Patch0，由于 gbp 规范/补丁自动更新可能失败而中止

错误：解析规范时出现 RPM 错误，发现重复的补丁

错误：无法从 git tree 导出打包文件

错误：没有要构建的规范文件。

错误：rpmbuild 失败

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T11:49:09.583

您是否在 gbs 配置文件中正确设置了依赖项 url。请分享 ~/.gbsconf 文件。默认情况下 gbs 将此文件作为配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:29:21.353

i586 在查找某些依赖项时存在一些问题，请尝试使用 i686 架构。

```
$:~/tizbuild/kernel/kernel-adaptation-pc$ gbs build -A i686 --include-all 
```

# c# - 除了探查器之外的 SQL 存储过程跟踪

> ID：14252649
> 
> 赞同：0
> 
> 时间：2013-01-10T07:17:45.507
> 
> 标签：c#, .net, sql

为了捕获在生产环境中被击中的存储过程是什么，将使用探查器。是否会减速环境？是否会影响性能？如果是这样，在不影响性能的情况下跟踪 SP 命中的替代方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:32:25.167

您可以通过存储过程直接在服务器上创建跟踪，而不是使用分析器工具

[介绍 SQL 跟踪](http://msdn.microsoft.com/en-us/library/ms191006%28v=sql.105%29.aspx)

从历史上看，这种跟踪比使用分析器消耗的资源更少——当然，所有跟踪都必须消耗*一些*资源。

# c# - SQL Compact Edition 4.0 是否解决不同操作系统版本上的“Permission Denied”错误

> ID：14252651
> 
> 赞同：1
> 
> 时间：2013-01-10T07:17:57.490
> 
> 标签：c#, sql-server-ce, connection-string

我之前问过一个问题，[当连接字符串设置为只读时，不同操作系统版本上的 SQL Server CE 权限被拒绝，](https://stackoverflow.com/questions/13064441/permission-denied-for-sql-server-ce-on-win-xp)但我的问题似乎没有答案，我认为这是微软的一种错误。

所以根据这个：

> 正如SOL Compact 团队[在此](http://blogs.msdn.com/b/sqlservercompact/archive/2009/04/01/after-moving-the-database-from-one-platform-to-other-the-first-sqlceconnection-open-takes-more-time.aspx)报告的（遗憾的是，不是在 2009 年 4 月 1 日（！）之前），如果 SDF 文件已从 Vista/Server 2008 移动到 XP/Server 2003，则运行时需要重新创建索引。 -only media，这不可能发生，你会得到一个模糊的[Permission denied 错误消息](http://social.msdn.microsoft.com/Forums/en-US/sqlce/thread/72fcc4f2-6c2e-402c-8785-926ed7d50ca5/)。

所以我想问微软在较新版本的 SQL Compact Edition 4.0 中解决了这个问题吗？

# hibernate - 没有休眠的Grails多个数据库

> ID：14252654
> 
> 赞同：0
> 
> 时间：2013-01-10T07:18:12.790
> 
> 标签：hibernate, grails, datasource

我想问，如何在没有hibernate的情况下在grails中运行2个数据库？

例如，我在数据源中调用了 2 db：

db1 和 db2

我的应用程序中有 2 个域，

```
class domain1 {
   ...
   static mapping = {
      datasource 'db1'
   }
}

class domain2 {
   ...
   static mapping = {
      datasource 'db2'
   }
} 
```

当我还在休眠时，一切都很好，但是当我卸载休眠时我得到错误，我的 domain2 没有得到 db2，我想念什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:21:39.213

您需要 hibernate（或类似 mongodb gorm 的对应物）来支持默认的 Gorm 函数。

# java - 用于创建spring jsp的工具

> ID：14252659
> 
> 赞同：2
> 
> 时间：2013-01-10T07:18:33.553
> 
> 标签：java, spring, spring-mvc, sts-springsourcetoolsuite

是否有任何“工具”或“STS 插件”可以直接创建弹簧形式的 jsp？是否有任何用于创建弹簧表单的拖放工具，以便我可以快速开发应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:58:18.470

您可以在此处下载适用于 Java EE 的 NetBeans IDE：http: [//netbeans.org/downloads/](http://netbeans.org/downloads/)

# android - Android Facebook SSO 登录中的错误

> ID：14252660
> 
> 赞同：1
> 
> 时间：2013-01-10T07:18:53.947
> 
> 标签：android, facebook, single-sign-on

通过遵循适用于 android 的 Facebook SDK 3.0 文档和开发的示例应用程序，但仍然出现错误，“'app_name' 未配置为 Facebook 登录。”

我也在fb上注册了我的应用程序，![在此处输入图像描述](../Images/8f5f42791016ec8774060f60c4c7974f.png)

fb 哈希键是在 openssl 命令的帮助下生成的。

我在这里错过了什么吗。请指导我。我无法使用默认的 fb 应用程序登录。

我确实遵循此链接[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

并创建这个项目，即使得到这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:00:30.800

错误：'app_name' 未配置。这个错误表明`you are not signing the app with the key, whose hashKey is on facebook`. 再次尝试创建 hashKey，还将您的 debug.keystore 的密钥哈希添加到 facebook。您可以在 facebook 上添加多个密钥哈希。（新添加的密钥哈希可能需要几分钟才能生效）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:01:01.263

[请检查一下，我在 facebook developer 上找到了解决方案并解决了我的问题。](http://rahulupadhyay.wordpress.com/2013/03/25/facebook-sso/)

# c - 寻找自动 C 代码生成工具

> ID：14252664
> 
> 赞同：0
> 
> 时间：2013-01-10T07:19:05.943
> 
> 标签：c

我正在研究每个新实现都需要几乎相同类型的代码模板的嵌入式项目。我没有做手动代码，而是考虑自动化代码生成过程。这样我只需要以某种格式（可以是任何输入格式）向工具提供输入数据，它就会根据它生成 C 代码。开源将是首选，但专有工具也可以接受。

我已经搜索了 Eclipse 建模插件 Acceleo 和 Actifsource，但没有发现它们适合嵌入式 C 代码生成。而且我不想只使用 MATLAB 和 LabVIEW 之类的重型解决方案来生成代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:08:51.710

使用以下工具可以从 UML 模型生成 C 代码：

*   [IBM Rational Rhapsody](http://www-142.ibm.com/software/products/us/en/ratirhapfami)

*   开源 Eclipse 插件[Topcased](http://www.topcased.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:01:36.053

C 代码生成有很多变体：

*   函数指针（父函数执行相同的代码，但有一点变体）
*   内联函数 + 宏（宏的参数可以定义一个新函数）
*   make、cmake、autotools 等系统（您编写一个在预编译时修改的输入文件）

如果您想获得更详细的答案，请告诉更多。

# gmail - 使用 Google IMAP 服务器时跳过验证码解析步骤

> ID：14252665
> 
> 赞同：0
> 
> 时间：2013-01-10T07:19:08.533
> 
> 标签：gmail, imap, captcha, gmail-imap

我正在开发一种分析 Gmail 帐户数据的产品，为此我需要允许用户从我的产品登录到他们的 Gmail 帐户。现在一切都很完美，执行中没有问题。但是，当新用户每次来时，他/她必须解析 Google Captch 页面 (https://accounts.google.com/DisplayUnlockCaptcha)。现在这是对用户的犹豫，我想跳过这一步。那么有什么方法可以消除这一步吗？

请帮助，提前谢谢。

谢谢， 安维什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:23:53.757

经过长时间的研究，我开始知道我可以将我的域转到 Google 帐户，这将允许我注册我的 Web 应用程序。任何人都可以通过此链接注册`https://accounts.google.com/ManageDomains`

这只是简单的许多文档可供指导。

谢谢， 安维什

# c++ - cmake如何避免系统库

> ID：14252666
> 
> 赞同：2
> 
> 时间：2013-01-10T07:19:16.757
> 
> 标签：c++, cmake

我想在我的项目中使用某个版本的 Qt4。我正在使用 debian，并且已经安装了旧版本的 Qt4。当我在我的 CMakeLists 文件中使用 find_package 命令时，当然找到了系统库，因为文件 /usr/share/cmake-2.8/Modules/FindQt4.cmake 是 cmake 使用的。

到目前为止，我为链接较新的 Qt4 所做的是手动使用 ccmake 编辑路径。问题是我不允许在系统目录中安装较新的 Qt4 版本。有没有更简单的解决方案来告诉 cmake 不要使用系统库，只使用另一个版本。当然，我可以创建自己的模块并为 find_package 命令提供我自己模块的路径，但我认为这很烦人，必须有一个更简单的解决方案。

我还寻找的是 FindQt4.cmake 模块使用的一些环境变量，但没有。- 那么，是否有一个通用的解决方案来避免系统库并使用安装在非系统目录中的库而不做一些肮脏的技巧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:52:58.013

一般不了解系统库。对于 Qt，您将搜索路径设置为 qmake，然后 qt 将完成其余的工作。Qmake 路径是通过 QT_QMAKE_EXECUTABLE 设置的，我使用 Qt 商业版，这就是我在 Cmake 中设置路径的方式。

设置（QT_QMAKE_EXECUTABLE $ENV{HOME}/QtCommercialSDK/Desktop/483/gcc-64/bin/qmake）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:24:10.893

在 Linux 上使用不同版本的库的唯一真正方法是使用静态链接。如果您需要同时使用同一库的不同版本的能力，则需要使用支持该范例的操作系统。Solaris（及其衍生产品）在这方面特别擅长（编译`-L`以指向要编译的`-R`库并在运行时指示该库的路径）。我相信BSD是一样的。

除此之外，您需要创建一个`chroot`（穷人的 BSD 监狱）来部署您的应用程序。您需要将所有依赖项的副本安装到 chroot（用于`ldd`查找它们）和 Qt4 的副本想用。

# php - 从选定的城市获取 Google 新闻 RSS 源

> ID：14252667
> 
> 赞同：0
> 
> 时间：2013-01-10T07:19:18.253
> 
> 标签：php, mysql, rss-reader, google-news

我正在从 Google 新闻 RSS 提要中获取 Google 新闻。网址是

`http://news.google.com/news?pz=1&cf=all&ned=us&hl=en&topic=n&output=rss`

这将返回所有美国标题。

```
[0] => Array
    (
        [title] => Transportation Safety Board Team Probes N.Y. Ferry Crash - Bloomberg
        [link] => http://news.google.com/news/url?sa=t&fd=R&usg=AFQjCNGDVYrS8J_SXHtPWyYXxxXyKkNaRw&url=http://www.bloomberg.com/news/2013-01-10/transportation-safety-board-team-probes-n-y-ferry-crash.html
        [image] => //nt3.ggpht.com/news/tbn/t9HUK7dtkbtFrM/6.jpg
        [site_title] => Bloomberg
        [story] => The National Transportation Safety Board began an investigation of the rush-hour commuter ferry crash near Manhattan's financial district that sent passengers flying and injured dozens. The NTSB sent an 11-member â€œgo teamâ€ to New York yesterday to ...
    )

[1] => Array
    (
        [title] => Obama Cabinet may not meet his own diversity standards - Los Angeles Times
        [link] => http://news.google.com/news/url?sa=t&fd=R&usg=AFQjCNGSgKCy6djWVzzCkvphxbK-anvjlw&url=http://www.latimes.com/news/nationworld/nation/la-na-obama-administration-20130110,0,4200106.story
        [image] => //nt2.ggpht.com/news/tbn/CtM74UExtG_E7M/6.jpg
        [site_title] => Los Angeles Times
        [story] => WASHINGTON â€” Wednesday's "photo of the day" on the White House website showed an unusual sight in Oval Office history â€” the president surrounded by top advisors, only half of whom are white men. The picture seemed calculated to counter criticism ...
    )

[2] => Array
    (
        [title] => Chris Christie: Master of Disaster - TIME
        [link] => http://news.google.com/news/url?sa=t&fd=R&usg=AFQjCNErxzRlmXjDZOAvqU0hMIwYspcnpg&url=http://swampland.time.com/2013/01/09/chris-christie-master-of-disaster/
        [image] => //nt3.ggpht.com/news/tbn/XyB4G4Cfox0EOM/6.jpg
        [site_title] => TIME
        [story] => This morning on NBC's Today Show, Chris Christie reacted to being on the brand new cover of TIME. The full cover story will be available on time.com later today and on newsstands Friday. Gov. Christie was featured as one of 13 members in TIME's Class of ...
    ) 
```

但我只想要来自加利福尼亚或 XYZ 的消息。有没有办法在参数或任何其他解决方案中添加城市名称？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:27:42.203

您只需更改 Url 中的值`ned`和`hl`参数，如以下 url 即可看到不同的新闻。

```
http://news.google.com/news?pz=1&cf=all&ned=us&hl=en&topic=n&output=rss 
```

西班牙新闻

```
https://news.google.com/news/feeds?cf=all&ned=es_cu&hl=es&output=rss 
```

# c# - 是否有任何 .net 语言公开“methodof”或“fieldof”

> ID：14252670
> 
> 赞同：5
> 
> 时间：2013-01-10T07:19:33.463
> 
> 标签：c#, .net, reflection, typeof

所以 c# 公开了一个`typeof`关键字，它使我们能够对 Type 进行强类型访问

```
var type = typeof(MyClass); 
```

但是，它不允许我们访问`methodof`or `fieldof`。这实际上看起来像这样。

```
var method = methodof(MyClass.MyMethod);
var getProperty = methodof(MyClass.get_MyProperty)
var setProperty = methodof(MyClass.set_MyProperty)
var field = fieldof(MyClass.myField); 
```

是否有任何**其他语言**公开此功能？

**注意：发布 c# 反射代码不是此问题的有效答案**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-10T07:29:45.507

如果您自己生成 IL，那么这是可能的。typeof(T) 的作用是使用 ldtoken 指令对运行时类型句柄进行硬编码，然后调用 Type.GetTypeFromHandle。当我生成 IL 时，我一直在生成等效项。这是我编写的一些代码中的一些实用方法

```
/// <summary>
/// Pushes the specified member onto the evaluation stack.
/// </summary>
/// <param name="generator">The generator.</param>
/// <param name="member">The member.</param>
public static void EmitLoadMemberInfo(this ILGenerator generator, MemberInfo member)
{
    switch (member.MemberType)
    {
        case MemberTypes.Method:
            generator.Emit(OpCodes.Ldtoken, member as MethodInfo);
            generator.Emit(OpCodes.Call, typeof(MethodBase).GetMethod("GetMethodFromHandle", BindingFlags.Public | BindingFlags.Static, null, new[] { typeof(RuntimeMethodHandle) }, null));
            break;
        case MemberTypes.TypeInfo:
            generator.Emit(OpCodes.Ldtoken, member as Type);
            generator.Emit(OpCodes.Call, typeof(Type).GetMethod("GetTypeFromHandle", BindingFlags.Public | BindingFlags.Static));
            break;
        case MemberTypes.Field:
            generator.Emit(OpCodes.Ldtoken, member as FieldInfo);
            generator.Emit(OpCodes.Call, typeof(FieldInfo).GetMethod("GetFieldFromHandle", BindingFlags.Public | BindingFlags.Static));
            break;
        case MemberTypes.Constructor:
            generator.Emit(OpCodes.Ldtoken, member as ConstructorInfo);
            generator.Emit(OpCodes.Call, typeof(MethodBase).GetMethod("GetMethodFromHandle", BindingFlags.Public | BindingFlags.Static, null, new[] { typeof(RuntimeMethodHandle) }, null));
            break;

        default:
            throw new NotSupportedException("Unsupported token type.");
    }
} 
```

我还应该提到有一些模拟框架支持这一点。由于大小，我在另一个帖子中举了一个例子

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-10T08:45:29.417

抱歉，由于尺寸原因，发布了另一个回复。在使用这种方法之前，我使用过很多模拟框架。基本上，一个方法被传入，他们寻找对他们正在模拟的内容的调用。这是我编写的一个草率示例。应该能够处理过载。与 typeof 并不完全相同，因为就像我在其他帖子中提到的那样，typeof 被转换为 ldtoken 并调用 GetTypeFromRuntimeHandle

```
class Program
{

    static void Main()
    {
        Program program = new Program();
        ConstructorInfo programConstructor = OfUtil.ConstructorOf(() => new Program());
        FieldInfo instanceField = OfUtil.FieldOf(() => program.Field);
        MethodInfo method = OfUtil.MethodOf(() => program.MethodTest(10));

        Console.ReadLine();
    }

    public Program()
    {
    }

    public static int StaticField;
    public int Field;
    public int PropertyTest { get; set; }
    public static int PropertyStatic { get; set; }

    public void MethodTest()
    {
    }

    public void MethodTest(int x)
    {
    }

    public static void StaticMethodTest()
    {
    }
}

public static class OfUtil
{
    private static Dictionary<RuntimeMethodHandle, MemberInfo> cache = new Dictionary<RuntimeMethodHandle, MemberInfo>();

    public static MethodInfo MethodOf(Action action)
    {
        MethodInfo method = MemberOf(action, OpCodes.Call, OpCodes.Callvirt) as MethodInfo;
        return method;
    }

    public static MethodInfo MethodOf<T>(Func<T> func)
    {
        MethodInfo method = MemberOf(func, OpCodes.Call, OpCodes.Callvirt) as MethodInfo;
        return method;
    }

    public static ConstructorInfo ConstructorOf<T>(Func<T> func)
    {
        ConstructorInfo constructor = MemberOf(func, OpCodes.Newobj, OpCodes.Initobj) as ConstructorInfo;
        return constructor;
    }

    public static FieldInfo FieldOf<T>(Func<T> func)
    {
        FieldInfo field = MemberOf(func, OpCodes.Ldfld, OpCodes.Ldflda) as FieldInfo;
        return field;
    }

    private static MemberInfo MemberOf(Delegate action, params OpCode[] ops)
    {
        MemberInfo info = null;
        if (cache.TryGetValue(action.Method.MethodHandle, out info))
        {
            return info;
        }

        ILReader reader = new ILReader(action.Method);
        foreach (ILInstruction instruction in reader.Instructions)
        {
            if (ops.Any(x => x == instruction.Op))
            {
                info = instruction.Data as MemberInfo;
                cache[action.Method.MethodHandle] = info;
                return info;
            }
        }

        throw new InvalidOperationException("Did not find a member.");
    }
}

public interface IILReaderProvider
{
    byte[] GetMethodBody();

    FieldInfo ResolveField(int metadataToken);
    MemberInfo ResolveMember(int metadataToken);

    MethodBase ResolveMethod(int metadataToken);
    byte[] ResolveSignature(int metadataToken);

    string ResolveString(int metadataToken);
    Type ResolveType(int metadataToken);
}

[StructLayout(LayoutKind.Sequential)]
public struct ILInstruction
{
    private readonly OpCode operationCode; // 40\.  56-64\.  The entire structure is very big.  maybe do array lookup for opcode instead.

    private readonly byte[] instructionRawData;

    private readonly object instructionData;

    private readonly int instructionAddress;

    private readonly int index;

    internal ILInstruction(OpCode code, byte[] instructionRawData, int instructionAddress, object instructionData, int index)
    {
        this.operationCode = code;
        this.instructionRawData = instructionRawData;
        this.instructionAddress = instructionAddress;
        this.instructionData = instructionData;
        this.index = index;
    }

    public OpCode Op
    {
        get
        {
            return this.operationCode;
        }
    }

    /// <summary>
    /// Gets the raw data.
    /// </summary>
    public byte[] RawData
    {
        get
        {
            return this.instructionRawData;
        }
    }

    /// <summary>
    /// Gets the data.
    /// </summary>
    public object Data
    {
        get
        {
            return this.instructionData;
        }
    }

    /// <summary>
    /// Gets the address of the instruction.
    /// </summary>
    public int Address
    {
        get
        {
            return this.instructionAddress;
        }
    }

    /// <summary>
    /// Gets the index of the instruction.
    /// </summary>
    /// <value>
    /// The index of the instruction.
    /// </value>
    public int InstructionIndex
    {
        get
        {
            return this.index;
        }
    }

    /// <summary>
    /// Gets the value as integer
    /// </summary>
    /// <value>The data value.</value>
    public int DataValue
    {
        get
        {
            int value = 0;
            if (this.Data != null)
            {
                if (this.Data is byte)
                {
                    value = (byte)this.Data;
                }
                else if (this.Data is short)
                {
                    value = (short)this.Data;
                }
                else if (this.Data is int)
                {
                    value = (int)this.Data;
                }
            }

            return value;
        }
    }

    /// <summary>
    /// Gets the length of the instructions and operands.
    /// </summary>
    /// <value>The length.</value>
    public int Length
    {
        get
        {
            return this.Op.Size + (this.RawData == null ? 0 : this.RawData.Length);
        }
    }

    /// <summary>
    /// Returns a <see cref="System.String"/> that represents this instance.
    /// </summary>
    /// <returns>
    /// A <see cref="System.String"/> that represents this instance.
    /// </returns>
    public override string ToString()
    {
        StringBuilder builder = new StringBuilder();
        builder.AppendFormat("0x{0:x4} {1,-10}", this.Address, this.Op.Name);

        if (this.Data != null)
        {
            builder.Append(this.Data.ToString());
        }

        if (this.RawData != null && this.RawData.Length > 0)
        {
            builder.Append(" [0x");
            for (int i = this.RawData.Length - 1; i >= 0; i--)
            {
                builder.Append(this.RawData[i].ToString("x2", CultureInfo.InvariantCulture));
            }

            builder.Append(']');
        }

        return builder.ToString();
    }
}

/// <summary>
/// Reads IL instructions from a byte stream.
/// </summary>
/// <remarks>Allows generated code to be viewed without debugger or enabled debug assemblies.</remarks>
public sealed class ILReader
{
    /// <summary>
    /// The _instruction lookup.
    /// </summary>
    private static readonly Lazy<Dictionary<short, OpCode>> instructionLookup = new Lazy<Dictionary<short, OpCode>>(ILReader.GetLookupTable, System.Threading.LazyThreadSafetyMode.ExecutionAndPublication);

    /// <summary>
    /// The IL reader provider.
    /// </summary>
    private IILReaderProvider intermediateLanguageProvider;

    /// <summary>
    /// Initializes a new instance of the <see cref="ILReader"/> class.
    /// </summary>
    /// <param name="method">
    /// The method.
    /// </param>
    public ILReader(MethodInfo method)
    {
        if (method == null)
        {
            throw new ArgumentNullException("method");
        }

        this.intermediateLanguageProvider = ILReader.CreateILReaderProvider(method);
    }

    /// <summary>
    /// Gets the instructions.
    /// </summary>
    /// <value>The instructions.</value>
    public IEnumerable<ILInstruction> Instructions
    {
        get
        {
            byte[] instructionBytes = this.intermediateLanguageProvider.GetMethodBody();
            int instructionIndex = 0, startAddress;
            for (int position = 0; position < instructionBytes.Length; )
            {
                startAddress = position;
                short operationData = instructionBytes[position];
                if (IsInstructionPrefix(operationData))
                {
                    operationData = (short)((operationData << 8) | instructionBytes[++position]);
                }

                position++;

                OpCode code;
                if (!instructionLookup.Value.TryGetValue(operationData, out code))
                {
                    throw new InvalidProgramException(string.Format("0x{0:X2} is not a valid op code.", operationData));
                }

                int dataSize = GetSize(code.OperandType);
                byte[] data = new byte[dataSize];
                Buffer.BlockCopy(instructionBytes, position, data, 0, dataSize);
                object objData = this.GetData(code, data);
                position += dataSize;

                if (code.OperandType == OperandType.InlineSwitch)
                {
                    dataSize = (int)objData;
                    int[] labels = new int[dataSize];
                    for (int index = 0; index < labels.Length; index++)
                    {
                        labels[index] = BitConverter.ToInt32(instructionBytes, position);
                        position += 4;
                    }

                    objData = labels;
                }

                yield return new ILInstruction(code, data, startAddress, objData, instructionIndex);
                instructionIndex++;
            }
        }
    }

    /// <summary>
    /// Creates the IL reader provider.
    /// </summary>
    /// <param name="methodInfo">The MethodInfo object that represents the method to read..</param>
    /// <returns>
    /// The ILReader provider.
    /// </returns>
    private static IILReaderProvider CreateILReaderProvider(MethodInfo methodInfo)
    {
        IILReaderProvider reader = DynamicILReaderProvider.Create(methodInfo);
        if (reader != null)
        {
            return reader;
        }

        return new ILReaderProvider(methodInfo);
    }

    /// <summary>
    /// Checks to see if the IL instruction is a prefix indicating the length of the instruction is two bytes long.
    /// </summary>
    /// <param name="value">The IL instruction as a byte.</param>
    /// <remarks>IL instructions can either be 1 or 2 bytes.</remarks>
    /// <returns>True if this IL instruction is a prefix indicating the instruction is two bytes long.</returns>
    private static bool IsInstructionPrefix(short value)
    {
        return ((value & OpCodes.Prefix1.Value) == OpCodes.Prefix1.Value) || ((value & OpCodes.Prefix2.Value) == OpCodes.Prefix2.Value)
                    || ((value & OpCodes.Prefix3.Value) == OpCodes.Prefix3.Value) || ((value & OpCodes.Prefix4.Value) == OpCodes.Prefix4.Value)
                    || ((value & OpCodes.Prefix5.Value) == OpCodes.Prefix5.Value) || ((value & OpCodes.Prefix6.Value) == OpCodes.Prefix6.Value)
                    || ((value & OpCodes.Prefix7.Value) == OpCodes.Prefix7.Value) || ((value & OpCodes.Prefixref.Value) == OpCodes.Prefixref.Value);
    }

    /// <summary>
    /// The get lookup table.
    /// </summary>
    /// <returns>
    /// A dictionary of IL instructions.
    /// </returns>
    private static Dictionary<short, OpCode> GetLookupTable()
    {
        // Might be better to do an array lookup.  Use a seperate arrary for instructions without a prefix and array for each prefix.
        Dictionary<short, OpCode> lookupTable = new Dictionary<short, OpCode>();
        FieldInfo[] fields = typeof(OpCodes).GetFields(BindingFlags.Static | BindingFlags.Public);
        foreach (FieldInfo field in fields)
        {
            OpCode code = (OpCode)field.GetValue(null);
            lookupTable.Add(code.Value, code);
        }

        return lookupTable;
    }

    /// <summary>
    /// Gets the size of a operand.
    /// </summary>
    /// <param name="operandType">Defines the type of operand.</param>
    /// <returns>The size in bytes of the operand type.</returns>
    private static int GetSize(OperandType operandType)
    {
        switch (operandType)
        {
            case OperandType.InlineNone:
                return 0;
            case OperandType.ShortInlineBrTarget:
            case OperandType.ShortInlineI:
            case OperandType.ShortInlineVar:
                return 1;
            case OperandType.InlineVar:
                return 2;
            case OperandType.InlineBrTarget:
            case OperandType.InlineField:
            case OperandType.InlineI:
            case OperandType.InlineMethod:
            case OperandType.InlineSig:
            case OperandType.InlineString:
            case OperandType.InlineSwitch:
            case OperandType.InlineTok:
            case OperandType.InlineType:
            case OperandType.ShortInlineR:
                return 4;
            case OperandType.InlineI8:
            case OperandType.InlineR:
                return 8;
            default:
                return 0;
        }
    }

    private object GetData(OpCode code, byte[] rawData)
    {
        object data = null;
        switch (code.OperandType)
        {
            case OperandType.InlineField:
                data = this.intermediateLanguageProvider.ResolveField(BitConverter.ToInt32(rawData, 0));
                break;
            case OperandType.InlineSwitch:
                data = BitConverter.ToInt32(rawData, 0);

                break;
            case OperandType.InlineBrTarget:
            case OperandType.InlineI:
                data = BitConverter.ToInt32(rawData, 0);
                break;
            case OperandType.InlineI8:
                data = BitConverter.ToInt64(rawData, 0);
                break;
            case OperandType.InlineMethod:
                data = this.intermediateLanguageProvider.ResolveMethod(BitConverter.ToInt32(rawData, 0));
                break;
            case OperandType.InlineR:
                data = BitConverter.ToDouble(rawData, 0);
                break;
            case OperandType.InlineSig:
                data = this.intermediateLanguageProvider.ResolveSignature(BitConverter.ToInt32(rawData, 0));
                break;
            case OperandType.InlineString:
                data = this.intermediateLanguageProvider.ResolveString(BitConverter.ToInt32(rawData, 0));
                break;
            case OperandType.InlineTok:
            case OperandType.InlineType:
                data = this.intermediateLanguageProvider.ResolveType(BitConverter.ToInt32(rawData, 0));
                break;
            case OperandType.InlineVar:
                data = BitConverter.ToInt16(rawData, 0);
                break;
            case OperandType.ShortInlineVar:
            case OperandType.ShortInlineI:
            case OperandType.ShortInlineBrTarget:
                data = rawData[0];
                break;
            case OperandType.ShortInlineR:
                data = BitConverter.ToSingle(rawData, 0);
                break;
        }

        return data;
    }
}

internal class DynamicILReaderProvider : IILReaderProvider
{
    public const int TypeRidPrefix = 0x02000000;

    public const int MethodRidPrefix = 0x06000000;

    public const int FieldRidPrefix = 0x04000000;

    public static readonly Type RuntimeDynamicMethodType;

    private static readonly FieldInfo fileLengthField = typeof(ILGenerator).GetField("m_length", BindingFlags.NonPublic | BindingFlags.Instance);

    private static readonly FieldInfo IntermediateLanguageBytesField = typeof(ILGenerator).GetField("m_ILStream", BindingFlags.NonPublic | BindingFlags.Instance);

    private static readonly MethodInfo bakeByteArrayMethod = typeof(ILGenerator).GetMethod("BakeByteArray", BindingFlags.NonPublic | BindingFlags.Instance);

    private static readonly PropertyInfo dynamicScopeIndexor;

    private static readonly FieldInfo dynamicScopeField;

    private static readonly Type genericMethodInfoType;

    private static readonly FieldInfo genericMethodHandleField;

    private static readonly FieldInfo genericMethodContextField;

    private static readonly Type varArgMethodType;

    private static readonly FieldInfo varArgMethodMethod;

    private static readonly Type genericFieldInfoType;

    private static readonly FieldInfo genericFieldInfoHandle;        

    private static readonly FieldInfo genericFieldInfoContext;

    private static readonly FieldInfo ownerField;

    private object dynamicScope;

    private ILGenerator generator;

    static DynamicILReaderProvider()
    {
        BindingFlags bindingFlags = BindingFlags.NonPublic | BindingFlags.Instance;
        dynamicScopeIndexor = Type.GetType("System.Reflection.Emit.DynamicScope").GetProperty("Item", bindingFlags);
        dynamicScopeField = Type.GetType("System.Reflection.Emit.DynamicILGenerator").GetField("m_scope", bindingFlags);

        varArgMethodType = Type.GetType("System.Reflection.Emit.VarArgMethod");
        varArgMethodMethod = varArgMethodType.GetField("m_method", bindingFlags);

        genericMethodInfoType = Type.GetType("System.Reflection.Emit.GenericMethodInfo");
        genericMethodHandleField = genericMethodInfoType.GetField("m_methodHandle", bindingFlags);
        genericMethodContextField = genericMethodInfoType.GetField("m_context", bindingFlags);

        genericFieldInfoType = Type.GetType("System.Reflection.Emit.GenericFieldInfo", false);
        if (genericFieldInfoType != null)
        {
            genericFieldInfoHandle = genericFieldInfoType.GetField("m_fieldHandle", bindingFlags);
            genericFieldInfoContext = genericFieldInfoType.GetField("m_context", bindingFlags);
        }
        else
        {
            genericFieldInfoHandle = genericFieldInfoContext = null;
        }

        RuntimeDynamicMethodType = typeof(DynamicMethod).GetNestedType("RTDynamicMethod", BindingFlags.NonPublic);
        ownerField = RuntimeDynamicMethodType.GetField("m_owner", bindingFlags);
    }

    private DynamicILReaderProvider(DynamicMethod method)
    {
        this.Method = method;
        this.generator = method.GetILGenerator();
        this.dynamicScope = dynamicScopeField.GetValue(this.generator);
    }

    public DynamicMethod Method { get; private set; }

    internal object this[int token]
    {
        get
        {
            return dynamicScopeIndexor.GetValue(this.dynamicScope, new object[] { token });
        }
    }

    public static DynamicILReaderProvider Create(MethodInfo method)
    {
        if (method == null)
        {
            throw new ArgumentNullException("method");
        }

        DynamicMethod dynamicMethod = method as DynamicMethod;
        if (dynamicMethod != null)
        {
            return new DynamicILReaderProvider(dynamicMethod);
        }

        Type methodType = method.GetType();
        if (RuntimeDynamicMethodType.IsAssignableFrom(methodType))
        {
            return new DynamicILReaderProvider(ownerField.GetValue(method) as DynamicMethod);
        }

        return null;
    }

    public byte[] GetMethodBody()
    {
        byte[] data = null;
        ILGenerator ilgen = this.Method.GetILGenerator();

        try
        {
            data = (byte[])bakeByteArrayMethod.Invoke(ilgen, null) ?? new byte[0];
        }
        catch (TargetInvocationException)
        {
            int length = (int)fileLengthField.GetValue(ilgen);
            data = new byte[length];
            Array.Copy((byte[])IntermediateLanguageBytesField.GetValue(ilgen), data, length);
        }

        return data;
    }

    public FieldInfo ResolveField(int metadataToken)
    {
        object tokenValue = this[metadataToken];
        if (tokenValue is RuntimeFieldHandle)
        {
            return FieldInfo.GetFieldFromHandle((RuntimeFieldHandle)tokenValue);
        }

        if (tokenValue.GetType() == DynamicILReaderProvider.genericFieldInfoType)
        {
            return FieldInfo.GetFieldFromHandle(
                (RuntimeFieldHandle)genericFieldInfoHandle.GetValue(tokenValue),
                (RuntimeTypeHandle)genericFieldInfoContext.GetValue(tokenValue));
        }

        return null;
    }

    public MemberInfo ResolveMember(int metadataToken)
    {
        if ((metadataToken & TypeRidPrefix) != 0)
        {
            return this.ResolveType(metadataToken);
        }

        if ((metadataToken & MethodRidPrefix) != 0)
        {
            return this.ResolveMethod(metadataToken);
        }

        if ((metadataToken & FieldRidPrefix) != 0)
        {
            return this.ResolveField(metadataToken);
        }

        return null;
    }

    public MethodBase ResolveMethod(int metadataToken)
    {
        object tokenValue = this[metadataToken];
        DynamicMethod dynamicMethod = tokenValue as DynamicMethod;
        if (dynamicMethod != null)
        {
            return dynamicMethod;
        }

        if (tokenValue is RuntimeMethodHandle)
        {
            return MethodBase.GetMethodFromHandle((RuntimeMethodHandle)this[metadataToken]);
        }

        if (tokenValue.GetType() == DynamicILReaderProvider.genericFieldInfoType)
        {
            return MethodBase.GetMethodFromHandle(
                (RuntimeMethodHandle)genericMethodHandleField.GetValue(tokenValue),
                (RuntimeTypeHandle)genericMethodContextField.GetValue(tokenValue));
        }

        if (tokenValue.GetType() == DynamicILReaderProvider.varArgMethodType)
        {
            return DynamicILReaderProvider.varArgMethodMethod.GetValue(tokenValue) as MethodInfo;
        }

        return null;
    }

    public byte[] ResolveSignature(int metadataToken)
    {
        return this[metadataToken] as byte[];
    }
    public string ResolveString(int metadataToken)
    {
        return this[metadataToken] as string;
    }

    public Type ResolveType(int metadataToken)
    {
        return Type.GetTypeFromHandle((RuntimeTypeHandle)this[metadataToken]);
    }
}

internal class ILReaderProvider : IILReaderProvider
{
    public ILReaderProvider(MethodInfo method)
    {
        this.Method = method;
        this.MethodBody = method.GetMethodBody();
        this.MethodModule = method.Module;
    }

    public MethodInfo Method { get; private set; }

    public MethodBody MethodBody { get; private set; }

    public Module MethodModule { get; private set; }

    public byte[] GetMethodBody()
    {
        return this.MethodBody.GetILAsByteArray();
    }

    public FieldInfo ResolveField(int metadataToken)
    {
        return this.MethodModule.ResolveField(metadataToken);
    }

    public MemberInfo ResolveMember(int metadataToken)
    {
        return this.MethodModule.ResolveMember(metadataToken);
    }

    public MethodBase ResolveMethod(int metadataToken)
    {
        return this.MethodModule.ResolveMethod(metadataToken);
    }

    public byte[] ResolveSignature(int metadataToken)
    {
        return this.MethodModule.ResolveSignature(metadataToken);
    }

    public string ResolveString(int metadataToken)
    {
        return this.MethodModule.ResolveString(metadataToken);
    }

    public Type ResolveType(int metadataToken)
    {

        return this.MethodModule.ResolveType(metadataToken);
    }
} 
```

# windows-phone - 将文件保存到 WP8 设备上的特定位置

> ID：14252673
> 
> 赞同：0
> 
> 时间：2013-01-10T07:20:02.340
> 
> 标签：windows-phone, windows-phone-8

我是 Windows Phone 8 开发的新手。想知道是否有办法将接收到的文件存储到设备上的特定位置。它可以通过 ActiveSync 或 MDM 使用 API。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T07:31:25.800

Windows Phone 8 不允许免费直接访问用户的硬盘驱动器来读取或写入文件。您必须使用特定于用例的 API，具体取决于您尝试存储的媒体类型。我过去回答过一个类似的问题，关于 WP8 对已知文件类型的读写访问@Windows [Phone 8：媒体文件访问](https://stackoverflow.com/questions/13467701/windows-phone-8-media-file-access/13473349#13473349)

几个亮点：

1.  您的应用可以使用 IsoStore 读取和写入只有您的应用可以访问的文件。请参阅[IsolatedStorageFile](http://www.windowsphonegeek.com/tips/All-about-WP7-Isolated-Storage---File-manipulations) API 或 ApplicationData.Current。[LocalFolder](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681698%28v=vs.105%29.aspx) API。

2.  [您可以使用MediaLibrary.SavePicture](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.media.medialibrary.savepicture.aspx)或 MediaLibrary.SavePictureToCameraRoll 方法存储图片。

3.  [您可以使用MediaLibraty.SaveSong](https://stackoverflow.com/questions/4385834/api-to-add-playlists-in-zune)方法存储歌曲。

4.  除了那些我不熟悉的 API 之外，我不熟悉任何其他文件将 API 从我的头顶写入操作系统。您可能可以使用远程服务器，但仅此而已。

# android - 如何在listview的自定义适配器之外调用clickListner上的按钮。

> ID：14252674
> 
> 赞同：0
> 
> 时间：2013-01-10T07:20:02.823
> 
> 标签：android, listview, button, adapter, onclicklistener

我有一个`Button`on`Listview`和一个自定义适配器，可以加载`ListView`. 我想调用`Button` `onClickListner`不在适配器类中的主类。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:32:37.390

您可以创建一个**全局接口**

像这样

```
package com.radiofrance.interfaces;

public abstract class GlobalInterface implements eventInterface {

    public void onClick(int values) {

    }

    public void onCancel() {
    }

} 
```

然后在您调用适配器**的 Activity中实现此接口**

```
public class SampleClickListener extends GlobalInterface {

        @Override
        public void onClick(final int values, final boolean state) {

}
} 
```

现在在你的适配器中**传递这个接口对象**

```
Adapter adt = new Adpater(this, R.layout.row, arrRow,
                    new SampleClickListener()); 
```

并**从您的适配器**调用

```
listner.onClick(position, false); 
```

谢谢

# windows-phone-7 - 从 Visual Studio 2012 构建应用程序并将其部署到 Windows Phone 7.5 设备

> ID：14252676
> 
> 赞同：0
> 
> 时间：2013-01-10T07:20:15.860
> 
> 标签：windows-phone-7, visual-studio-2012

我无法为 Windows phone 7.5 [Nokia Lumia 900] 创建应用程序或从 Visual Studio 2012 将应用程序部署到手机。我已安装 Windows Phone 8.0 SDK。谁能给我这样做的步骤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T08:52:35.727

您需要下载并安装[**Zune 桌面应用程序**](http://www.xbox.com/zune)才能将应用程序部署到 WP7 设备。

安装后，启动它，它将连接到您的设备，然后您应该能够从 Visual Studio 部署和调试应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T09:58:09.913

SDK 包含一个名为“Windows Phone 开发人员注册”的工具。在市场上注册后，您可以使用此工具解锁设备并直接从 Visual Studio 部署到该设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T17:34:17.557

[http://www.microsoft.com/en-us/download/details.aspx?id=36474](http://www.microsoft.com/en-us/download/details.aspx?id=36474)确实对我有用。WP 8 SDK 早期不支持 7.8 手机。在 7.8 设备上测试之前需要更新 7.8 SDK。

# javascript - 禁用单击多边形

> ID：14252677
> 
> 赞同：3
> 
> 时间：2013-01-10T07:20:19.687
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

我有以下代码使用 javascript v3 api 在谷歌地图上突出显示一个区域。

```
// Maps
$(document).ready(function(){
    if($(document).find("map_canvas"))
        Maps.init();
});
var Maps = {};
//The map to display
Maps.map;
//List of markers
Maps.markers = new Array();
Maps.markers.previous;
Maps.lines = new Array();
Maps.lines.toStart;
Maps.area;
//init the map
Maps.init = function() {
    var mapOptions = {
      center: new google.maps.LatLng(-39.483715,176.8942277),
      zoom: 15,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    Maps.map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

    google.maps.event.addListener(Maps.map, 'click', function(event){Maps.addMarker(event.latLng);});
}
//Add a marker to the maps
Maps.addMarker = function(latLng){
    var marker = new google.maps.Marker({
        position: latLng,
        map: Maps.map
    });
    Maps.markers.push(latLng);
    console.log(Maps.markers.length);
    if(Maps.markers.length > 1){
        Maps.drawLine([Maps.markers.previous, latLng]); 
    }
    Maps.markers.previous = latLng;
}

Maps.drawLine = function(path){
    var Line = new google.maps.Polyline({
        path: path,
        strokeColor: "#FF0000",
        strokeOpacity: 1.0,
        strokeWeight: 2
    });
    Line.setMap(Maps.map);
    if(Maps.markers.length > 2){
        if(Maps.lines.toStart != null)
            Maps.lines.toStart.setMap(null);
        Maps.lines.toStart = new google.maps.Polyline({
            path: [path[path.length - 1], Maps.markers[0]],
            strokeColor: "#0000FF",
            strokeOpacity: 1.0,
            strokeWeight: 2
        });
        Maps.lines.toStart.setMap(Maps.map);
        if(Maps.area != null)
            Maps.area.setMap(null);
        Maps.area = new google.maps.Polygon({
            paths: Maps.markers,
            strokeColor: "#000000",
            strokeOpacity: 0,
            strokeWeight: 0,
            fillColor: "#FF0000",
            fillOpacity: 0.35
        });
        Maps.area.setMap(Maps.map);
    }
} 
```

它按预期完美运行，并产生这样的结果......

![在此处输入图像描述](../Images/3f29b858739f0acdb56f18fa397ac39b.png)

但问题是，出于显而易见的原因，我需要在多边形内添加标记。当我单击期望添加标记的多边形时，多边形似乎得到了点击而不是地图。有没有办法解决这个问题？或者让它只有地图接收点击？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-10T07:38:13.087

多边形选项中有一个`clickable`属性。将其设置为 false ，多边形将忽略点击，事件将落入地图。

[多边形选项](https://developers.google.com/maps/documentation/javascript/reference#PolygonOptions)

# backbone.js - Backbone.js 每个属性渲染（多个小视图与每个视图多个模板）

> ID：14252678
> 
> 赞同：2
> 
> 时间：2013-01-10T07:20:20.667
> 
> 标签：backbone.js, render, backbone-views

我有一个模型和一个视图。视图显示模型的属性并允许用户操作这些属性。问题是当一个属性被修改时，它会重新渲染整个视图，这给我带来了很多问题。

*文本输入上的示例模糊事件将新输入保存到属性并因此触发渲染。这意味着如果用户从该文本输入直接单击同一视图上的按钮，则该事件将永远不会触发，因为触发的第一个事件将是模糊的，导致整个视图重新渲染，从而丢失按钮单击事件。*

我有两个想法：

1.  有一个单一的视图，其中每个属性都在一个单独的模板中。然后我绑定到一个特定的属性更改事件，并在渲染中只更新更改属性的 html。这似乎是一种 hack，因为要强制视图仅更新已更改的属性需要做很多工作。它会给已经很复杂的视图增加很多不必要的复杂性。
2.  创建一个由视图组成的主视图，其中每个视图代表一个模型的属性。这将创建很多视图，几乎没有任何功能。

我似乎更喜欢 2\. 选项。你怎么看？最佳实践是什么？有没有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:16:51.963

我认为你可以很容易地做到这一点。

退后一步，想想你在哪里绑定你的事件。似乎您将它们直接绑定在每个单独的元素之上，而不是使用父委托。

这是一个例子

```
Backbone.View.extend({
  el: $("div.parent"),
  events: function() {
    this.$el.on("click", "input[type=button]", function(){});
    // jquery cross browser on this
    this.$el.on("blur", "input[type=text]", function(){});
  },
  initialize: function() {
    this.model.bind("change", this.render, this);
  },
  render: function() {
    this.$el.html('<input type="text" /><input type="button" />');
  }
}); 
```

这是 el 及其结构的样子

```
<div class="parent">
  <input type="text" />
  <input type="button" />
</div> 
```

所以 this.$el 指向 div.parent。我可以不断地重新渲染 this.$el 的内容，只要 html 结构不改变，我就不必担心事件会被解除绑定。另一个解决方案是，如果我真的不能进行委托，我只会在再次渲染时调用 events 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T09:22:27.843

就像您自己说的那样，您的两种选择似乎都非常复杂。但有时额外的复杂性是一种必要的邪恶。但是，如果更新的字段相对简单（例如将值绑定到元素或输入字段），我会简单地更新 DOM 元素，而无需在它们之上创建额外的 View/Template 抽象。

假设您有一个模型：

```
var person = new Person({ firstName: 'John', lastName: 'Lennon', instrument:'Guitar' }); 
```

以及呈现以下模板的视图：

```
<div>First Name: <span class="firstName">{{firstName}}</span></div>
<div>Last Name: <span class="lastName">{{lastName}}</span></div>
<div>Instrument: <input class="instrument" value="{{instrument}}"></input></div> 
```

您可以在视图中声明哪个属性更改应该更新哪个元素，并将模型`change`事件绑定到更新它们的函数：

```
var PersonView = Backbone.View.extend({

  //convention: propertyName+"Changed"
  //specify handler as map of selector->method or a function.
  firstNameChanged:  { '.firstName': 'text' },
  lastNameChanged:   { '.lastName': 'text' },
  instrumentChanged: { '.instrument': 'val' },
  otherFieldChanged: function(val) { //do something else },

  initialize: function (opts) {
    this.model.on('change', this.update, this);
  },

  //called when change event is fired
  update: function(state) {
    _.each(state.changed, function(val, key) {
      var handler = this[key + "Changed"];
      //handler specified for property?
      if(handler) {
        //if its a function execute it
        if(_.isFunction(handler)) {
          handler(val);
        //if its an object assume it's a selector->method map
        } else if(_.isObject(handler)) {
          _.each(handler, function(prop, selector) {
            this.$(selector)[prop](val);
          }, this);              
        }
      }
    }, this);
  } 
```

像这样的解决方案不能扩展到非常复杂的视图，因为您必须将分类元素添加到 DOM 并在视图代码中维护它们。但对于更简单的情况，这可能会很好。

此外，如果它们自然地分成多个部分，那么尝试组合多个较小视图的视图总是好的。这样您就可以避免单独更新单个字段的需要。

# android - android：我可以为单个 Android 应用创建多个 AdMob 广告吗？

> ID：14252689
> 
> 赞同：0
> 
> 时间：2013-01-10T07:20:59.280
> 
> 标签：android, admob

*   我想用不同的网站 (AD) 发布我的应用程序，并希望跟踪每个网站的收入。
*   我可以为一个应用程序使用多个 ID 吗？
*   我在帮助页面中找不到任何相关内容。
*   我是android开发的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:38:12.073

[您可以通过参考此处](https://developers.google.com/mobile-ads-sdk/docs/admob/mediation)`AdMobs`的链接查看开发人员指南

它将指导您为广告生成多个 id 以及如何将广告集成到您的应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T06:50:50.617

是的，您可以为单个应用创建和使用多个中介 ID。

[在https://mediation.admob.com/#manage:mediation/create](https://mediation.admob.com/#manage:mediation/create)创建它们，然后给它们不同的名称。您将需要有 2 个版本的应用程序，每个部署站点都有一个版本，每个部署站点都有自己的中介 id，或者需要使用某种形式的配置来选择适当的中介 id 的应用程序的单个版本。

# c# - WPF 组合框 - 数据绑定空白空间问题

> ID：14252690
> 
> 赞同：0
> 
> 时间：2013-01-10T07:21:08.157
> 
> 标签：c#, wpf, xaml

我有一个简单的组合框绑定到一个列表，其中 A 有一个属性键和一个属性值。

组合框绑定很好，除了一个缺陷外可以正常工作。它在底部有一个很大的空白区域，没有项目（即它们不会在悬停或任何类似的事情上突出显示，没有额外的项目，只是有一个空白空间）。我怎样才能摆脱它？

[http://i.stack.imgur.com/2yN9r.jpg](https://i.stack.imgur.com/2yN9r.jpg)

![组合框图像](../Images/4232893a3d33d5d811f077433f0041fd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:06:16.477

这很可能是因为`ComboBox`您当前主题下的模板。尝试将 Windows 主题更改为 Aero 或 Luna（好像现在您已将其设置为 Classic）。

如果这是问题所在，那么有一种方法可以通过使用自定义模板来“修复”它，但是从用户的角度来看，您会破坏一致性。你需要考虑到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T12:48:49.027

您需要更改组合框的模板并相应地重置弹出高度。检查下面。

[http://msdn.microsoft.com/en-in/library/ms752094%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-in/library/ms752094%28v=vs.85%29.aspx)

在模板下搜索弹出窗口并将 minheight=0 添加到其中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-07T19:53:34.933

在我的 ComboBox ItemsSource="{Binding MyItems... 中，如果 MyItems 是 List，它将留下额外的空间。如果 MyItems 是 ObservableCollection，则多余的空间会消失。这可能是由于 Microsoft 错误导致 ItemsSource 未正确通知当它是 List 对象时，由 MyItems 更改。

# javascript - 图像向右滑动以覆盖文本，然后在向后滑动时显示新文本

> ID：14252691
> 
> 赞同：2
> 
> 时间：2013-01-10T07:21:15.127
> 
> 标签：javascript, jquery

我有一个我想要达到的效果，但我无法准确地思考如何实现它。以下是一些显示我想要实现的效果进展的图像：http: [//imgur.com/a/In6IK](http://imgur.com/a/In6IK)

所以本质上，我有多张幻灯片，其中包含我想一张一张地自动显示的文本。为了隐藏当前幻灯片并显示下一张，我希望图像（位于文本左侧）向右滑动，在文本移动时覆盖/隐藏文本，然后当它滑回其原始位置，显示下一张幻灯片的文本。

那么我将如何实现这种效果呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:13:30.737

这是一个原始的想法。也许您可以使用`:after`并`:before`定位它们，以便它们隐藏文本，使其消失。

HTML 将类似于：

```
<div class="main">
  <div class="over"></div>
  <div class="text">This is some text</div>
</div> 
```

而对于 CSS 看看这个小提琴[http://jsfiddle.net/Zs2MU/](http://jsfiddle.net/Zs2MU/)

也许它会在你的情况下帮助你。

**UPD**这是支持多行文本的更新解决方案[http://jsfiddle.net/Zs2MU/2/](http://jsfiddle.net/Zs2MU/2/)

# ios - 我需要在异步函数中释放参数吗？

> ID：14252692
> 
> 赞同：0
> 
> 时间：2013-01-10T07:21:18.313
> 
> 标签：ios, objective-c, memory-management, function-parameter

我为此搜索了很多，但对此一无所知。

首先，我没有使用ARC。

假设我正在调用一个异步函数，并将指针 A 传递给它，最初我想，好吧，让我们将一个自动释放的指针 A 传递给它，异步函数将在完成操作后释放 A。但似乎它不会工作。

```
NSURLRequest *request = [[[NSURLRequest requestWithURL:[NSURL URLWithString:@"someurl"]] autorelease];
[webView loadRequest:request]; 
```

然后有一个 EXC_BAD_ACCESS 错误进来，如果我删除自动释放，那么它就很好。

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:29:59.327

请再次阅读[基本的内存管理规则](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)。

您没有`NSURLRequest`使用包含“alloc”、“new”、“copy”或“mutableCopy”等词的方法创建它，因此您不拥有它，因此您不应该释放它。

此外，您不是“调用异步函数”。当您调用`[webView loadRequest:]`时，方法调用会立即同步发生。该方法在幕后开始一些异步工作，稍后完成——但这不会影响您首先调用该方法的方式，或者它的参数的内存管理。

# ios - 防止用户手动更改滑块值：钛

> ID：14252704
> 
> 赞同：0
> 
> 时间：2013-01-10T07:22:10.303
> 
> 标签：ios, slider, titanium, appcelerator, titanium-mobile

我正在创建一个**ios 应用程序**，其中窗口包含一个滑块。我使用滑块来显示已经设置的特定值，即用户不应手动更改该值。我创建的滑块如下

```
var slider = Ti.UI.createSlider({
    min : 0,
    max : 60,
    width : '60%',
    height: 40,
    value : 25,
    enabled : false,
    disabledLeftTrackImage : 'slider.png'
}); 
```

在这里，用户无法更改滑块值，因为我已经设置了`enabled : false`. 但是当我这样做时，图像会变得模糊（图像中的滑块 2）。**我希望它像第一个一样，用户不应该手动更改滑块值。**有可能吗？有没有其他方法可以防止用户更改滑块值？谁能帮我？

![滑块图像](../Images/409d6c095820dd096202d79299f9c992.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:34:52.200

由于您设置`enabled`为`false`，因此滑块会淡化以向用户显示它无法与之交互。正如 MaxGabriel 所说，在 Objective-C中设置`userInteractionEnabled`为等效的，没有褪色的滑块。`NO`根据这个[链接](http://developer.appcelerator.com/question/140931/disable-user-interaction)，Titanium 中的等价物是在滑块上方添加一个透明层，这样用户的触摸就不会传递给滑块。这是链接中的代码。

```
var overlay_view = Ti.Ui.createView({
    height:'100%',
    width:'100%',
    top:0,
    left:0
})
win.add(overlay_view); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:02:41.670

这肯定是不正确的 UI，为什么要使用用户无法交互的滑块？正确使用的是 Ti.UI.ProgressBar，否则 enabled:false 灰色行为是正确的，因此用户不会尝试摆弄它。

如果没有使用它的上下文，我不知道，但 UI 约定会建议上述内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T07:26:21.823

在 Objective-C 中，我会将`userInteractionEnabled`属性设置为`NO`. 我想这翻译成`userInteractionEnabled: false`钛？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T10:09:49.787

杰克先生的回答对我来说很好。[但我从这里](http://developer.appcelerator.com/question/146682/prevent-the-user-from-changing-the-slider-value-manually--ios-titanium#answer-254217)得到了更简单的方法。通过重置[touchEnabled](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.Slider-property-touchEnabled)属性，如`touchEnabled : false`. 我在这里添加它作为答案，因为它对其他人有帮助！

```
var slider = Ti.UI.createSlider({
        min : 0,
        max : 60,
        width : '60%',
        height: 40,
        value : 25,
        touchEnabeld : false,
        leftTrackImage : 'slider.png'
}); 
```

# ssas - 计算成员的表达式

> ID：14252708
> 
> 赞同：0
> 
> 时间：2013-01-10T07:22:23.440
> 
> 标签：ssas, mdx

如何获取两个日期之间的数据。我使用了以下表达式：

```
(
   {[campaign].[campaign start date]:[campaign].[campaign end date]},
   [Measures].[sales]
 ) 
```

但它给出了 null 作为结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:57:21.380

如果您发布了您正在使用的完整 MDX，这将有所帮助。

同时，我猜您需要将时间维度放入过滤器（WHERE）中，并将度量放入行或列中，并存在另一个维度（只是它的顶级成员）以返回单个结果单元格：

```
SELECT {[Some other dimension].defaultMember} ON ROWS,
{[Measures].[sales]} ON COLUMNS
FROM [MyCube]
WHERE (AGGREGATE({[campaign].[campaign start date]:[campaign].[campaign end date]})) 
```

由于该`WHERE`子句仅接受元组，因此您必须使用`AGGREGATE`将日期范围从集合压缩为单个项目。

您还可以尝试创建计算成员并对其进行过滤：

```
WITH MEMBER [Actual Time].[6th to 30th Nov 2006] 
AS 'Aggregate([Actual Time].[All Actual Time].[2006].[December].[6 December 2006] : [Actual Time].[All Actual Time].[2006].[November].[30 November 2006])', 
SOLVE_ORDER=0 
SELECT {whatever} ON ROWS,
{[Measures].[sales]} ON COLUMNS
FROM [MyCube]
WHERE ([Actual Time].[6th to 30th Nov 2006]) 
```

# vim - 如何在 Vim 中增加/减少同一行中的所有整数？

> ID：14252710
> 
> 赞同：0
> 
> 时间：2013-01-10T07:22:30.490
> 
> 标签：vim

在 Vim 中，`ctrl+a`是增加一个整数，`ctrl+x`是减少一个整数。

例如，要修改以下代码以将 1、2、3 附加到数组中，我可以简单地`ctrl+a`在 line3 中放置一次，在 line4 中放置两次：

```
array = []      # line1
array.append(1) # line2
array.append(1) # line3
array.append(1) # line4 
```

然后会变成：

```
array = []      # line1
array.append(1) # line2
array.append(2) # line3
array.append(3) # line4 
```

但是当我想在一行中增加一个以上的整数时，这并不方便。例如，我想改变：

```
rank1 = 1
rank1 = 1
rank1 = 1 
```

到：

```
rank1 = 1
rank2 = 2
rank3 = 3 
```

我的问题是，通过一个按键增加同一行中的所有整数是否是一种方便的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:28:15.833

您首先键入以下两行：

```
array = []
rank1 = 1 
```

然后将光标放在第 2 行。然后按顺序输入以下内容：

```
qa
yy
p
shift+v
:
s/\d\+/\=submatch(0)+1/g
q
5@a 
```

这里的“5”可以更改为您想要的重复次数。

好的，这可行，但它变得更加复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T08:18:49.920

这个命令应该这样做：

```
:s/\d\+/\=submatch(0) + 1/g 
```

编辑：“+”应该在 Vim 中转义

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-27T12:45:59.610

在 Vim 版本 8（第一次提出这个问题时不存在）中，您可以使用`g Ctrl+A`将一列数字每次增加 1。所以从上面的例子开始：

```
rank1 = 1
rank1 = 1
rank1 = 1
rank1 = 1
rank1 = 1 
```

移动到第二行并按下`V`以直观地突出显示它。移至最后一行，然后键入`g Ctrl+A`。这会将第一个 1（在第二行）增加到 2，将后面的行增加到 3，依此类推，给你：

```
rank1 = 1
rank2 = 1
rank3 = 1
rank4 = 1
rank5 = 1 
```

要在行尾增加 1 的列，您需要选择一个不包含行前数字的块。例如，当光标仍在第二行时，键入`$ Ctrl+V 3j`。然后再做`g Ctrl+A`一次，你得到：

```
rank1 = 1
rank2 = 2
rank3 = 3
rank4 = 4
rank5 = 5 
```

这仍然涉及分别在一行上做每个数字，但因为它一次做所有行，它只涉及总共做两次，所以应该仍然更快。

# sharepoint-2010 - sharepoint 基于声明的身份验证 FBA 自定义注销不起作用

> ID：14252712
> 
> 赞同：0
> 
> 时间：2013-01-10T07:22:39.760
> 
> 标签：sharepoint-2010, fba

您好，我是 sharepoint 开发的新手。我正在开发一个我们使用 FBA 的应用程序。出于注销目的，我们使用自定义注销页面，在该页面上我们正在清除所有会话、cookie。现在，当用户登录时，可以使用此工具[http://portswigger.net/burp/](http://portswigger.net/burp/)复制和保存登录用户的 cookie 和整个会话数据。现在注销后，这可以很容易地用于再次登录用户。没有什么对我有用，虽然我在注销时已经过期了 auth cookies。任何建议如何使用户无法使用通过 burp 工具保存的 cookie 登录..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:02:30.630

您可以发出一个加密的 cookie 来存储会话 ID。向站点的标头添加一个控件，将加密标头与当前标头进行比较。如果它们不匹配，请立即发送 FedAuth cookie 以使其过期。

# c# - 将 Linq 中的数据类型转换为 Sql

> ID：14252717
> 
> 赞同：4
> 
> 时间：2013-01-10T07:22:49.640
> 
> 标签：c#, linq

我必须在 linq 查询连接语句中将数据类型从 long 转换为 string。例如

```
 from t1 in table1

 join t2 in table2 on new {t1.field1, t1.field2} equals new {t2.field1, t2.field2} 

 select new {t1.field1,t2.field1 all columns} 
```

t1.field2 是 long 类型， t2.field2 是 string 类型。当我放置 ToString 方法时，它会引发异常。异常消息

LINQ to Entities 无法识别方法“System.String ToString()”方法，并且该方法无法转换为存储表达式。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T07:25:45.443

使用[SqlFunctions.StringConvert](http://msdn.microsoft.com/en-us/library/dd466166.aspx)

```
SqlFunctions.StringConvert((double) t1.field2) 
```

# android - 我如何从 Rails 3 App 的 params[:myobject] 中的 andoriod 应用程序获取发布的数据

> ID：14252724
> 
> 赞同：0
> 
> 时间：2013-01-10T07:23:07.267
> 
> 标签：android, ruby-on-rails, ruby

我正在使用 Ruby on Rails 3 应用程序，我想从我的 Android 应用程序发布数据。我已经设置了正确的标题`"Content-Type: application/json" and "Accept: application/json".`

我在我的控制器中获取参数`params["name"]`，这些参数`params["description"]`是从 Android 应用程序发布的。

但我无法在我的控制器中获取 params[:test] 之类的参数。

如果我使用“curl”发布数据，例如：

```
curl --verbose --header "Accept: application/json" --header "Content-type: application/json" --request POST --data '{"name":"I belong to AAA","description":"AAA"}' myurl/tests 
```

然后我可以获取数据`params[:test]`并将值正确保存到数据库中，并且我不必在我的创建方法中执行任何其他操作，例如 json 解析等。

当我从 Android 应用程序发布数据时，如何实现同样的目标？

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:05:03.760

```
Following is my Android code and Response:

public InputStream HTTP_POST(String URL,List<NameValuePair> mNameValuePairs) 
{
    HttpClient mHttpClient = new DefaultHttpClient();
    try 
    {
        URL url = new URL("http", "192.168.0.126", 3000, "/tests.json");
        Log.d("URL", url.toString());
        /*Log.d("URL", URL);
        URI baseURL = new URI(URL);*/
        HttpPost mHttpPost = new HttpPost(url.toURI());

        if(mNameValuePairs!=null)
        {
mHttpPost.setEntity(new UrlEncodedFormEntity(mNameValuePairs));
        }

        HttpResponse mHttpResponse = mHttpClient.execute(mHttpPost);
        Log.d("status code",""+getResponseStatusCode(mHttpResponse));

        if(getResponseStatusCode(mHttpResponse) == 200) 
        {
            HttpEntity mHttpEntity = mHttpResponse.getEntity();
            return mHttpEntity.getContent();
        }
        else 
        {
            Log.d("Error", ""+getResponseStatusCode(mHttpResponse));
            return null;
        }
    } 
    catch (Exception e) 
    {
        e.printStackTrace();
        return null;
    } 
}
 ----------------------
 private class PostTest extends AsyncTask<String, Void, String>
{
    private ProgressDialog mProgressDialog = null;
    String name = null;
    String details = null;
    @Override
    protected void onPreExecute()
    {
        super.onPreExecute();
        mProgressDialog = new ProgressDialog(LoginForm.this);
        mProgressDialog.setMessage(Constant.MSG_PROGRESSBAR_WAITING);
        mProgressDialog.setCancelable(false);
        mProgressDialog.setCanceledOnTouchOutside(false);
        mProgressDialog.show();

        name = editTextLogin.getText().toString().trim();
        details = editTextPassword.getText().toString().trim();

    }

    @Override
    protected String doInBackground(String... params) 
    {
        try 
        {
            String baseUrl = "http://192.168.0.126:3000/tests/";

    List<NameValuePair> mNameValuePairs = new ArrayList<NameValuePair>();
            mNameValuePairs.add(new BasicNameValuePair("name", name));
    mNameValuePairs.add(new BasicNameValuePair("description", details));
return common.InputStreamToString(common.HTTP_POST(baseUrl, mNameValuePairs));
        } 
        catch (Exception e) 
        {
            e.printStackTrace();
            return null;
        }
    }

    @Override
    protected void onPostExecute(String response)
    {
        super.onPostExecute(response);
        mProgressDialog.dismiss();
        try 
        {
            if(response != null)
            {
                Log.d("response", response);

            }
            else
            {
Toast.makeText(LoginForm.this, "Login Failed...  Try again", Toast.LENGTH_SHORT).show();
            }
        } 
        catch (Exception e) 
        {
            e.printStackTrace();
        }
    }
}
--------------------------
     Response which I got from this code:
{"name":null,"created_at":"2013-01-11T05:31:39Z","updated_at":"2013-01-11T05:31:39Z","description":null,"id":106} 
```

# google-apps-script - 应用脚本中的搜索框 UI

> ID：14252729
> 
> 赞同：0
> 
> 时间：2013-01-10T07:23:25.253
> 
> 标签：google-apps-script

我们正在借助存储在 scriptdb 中的 Google Apps 脚本实现一个搜索框，用于在 Google 站点中搜索评论。

在 UI 端，我们现在实现了一个文本框和一个列表框，用于列出来自 scriptdb 的建议，它的工作原理如下图所示。

![搜索框的解决方法](../Images/55ee44a7948d597ea868ce309a26d455.png)

现在我正在尝试在下面的列表框中将键入的字符串设置为**粗体**，以便为用户提供更大的灵活性，以便在建议框中找到确切的字符串。如下图所示。

![在此处输入图像描述](../Images/9ccb1aac6ba00a964cdcb84a206f5228.png)

并且在列表框控件中，我们可以设置 styleAttribute 为添加的项目设置粗体或更改字体颜色。

```
Ex:

app.createListBox().addItem("SELECT").setStyleAttribute("color","red"); 
```

上述语句将为所有列表框项设置样式属性。

但是如何为添加的项目中的特定字符设置样式属性

```
listbox.addItem("HELLO world") 
```

问题是仅在列表框中为上述 addItem 的大写字母设置样式属性。

它将更有用并降低 Google Apps 脚本中的开发人员复杂性。

而且我在[issue 2293](http://code.google.com/p/google-apps-script-issues/issues/detail?id=2293)中将其作为问题跟踪器的增强提出。

如果还有其他解决方法，请在此处建议。这将对需要此功能的每个人都有帮助。

Tnx，乔卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:17:04.277

UiService 中没有解决方法。您可以使用允许自定义 HTML 和 javascript 代码[的 HtmlService](https://developers.google.com/apps-script/html_service)

# excel - Excel VBA - 移动单元格

> ID：14252730
> 
> 赞同：-1
> 
> 时间：2013-01-10T07:23:26.080
> 
> 标签：excel, excel-2010, vba

看起来像一个简单的单元格移动，但是当有超过 10,000 行时，手动操作太繁琐了。需要一种更快的方法来做到这一点。

输入

```
A列 B列
1个
2年
1 Z

```

输出

```
A 列 B 列 C 列
1个XZ
2年

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:19:36.253

这就是你所追求的吗？

```
Sub ShiftCells()

Dim rnAll As Range, rnCell As Range, rnTarget As Range

Set rnAll = Sheet1.Range("A1:A" & Sheet1.UsedRange.Rows.Count)

For Each rnCell In rnAll
    If WorksheetFunction.CountIf(Sheet1.Range(rnCell.Address, rnAll.Cells(1)), rnCell.Value) > 1 Then
        Set rnTarget = rnAll.Find(rnCell.Value, rnAll.Cells(rnAll.Cells.Count), xlValues, xlWhole, xlByRows, xlNext, True, True)
        rnTarget.EntireRow.Cells(1, Sheet1.Columns.Count).End(xlToLeft).Offset(0, 1).Value = rnCell.Offset(0, 1).Value 'Move value to next free column in corresponding index row
        rnCell.Value = ""
    End If
Next

If rnAll.SpecialCells(xlCellTypeBlanks).Count > 0 Then
    rnAll.SpecialCells(xlCellTypeBlanks).EntireRow.Delete
End If

End Sub 
```

它检查第 1 列中的所有值，如果该“键”已存在于其上方，则从第 2 列获取值并将其放入现有键旁边的下一个可用列中。然后它会删除空行，因此您最终会在左侧得到一组唯一的键，而在右侧则有所有对应的值。

* * *

编辑 - 此代码将值从 B 列移动到从 K 开始的列，如果它们不存在则添加索引：

```
Sub ShiftCells()

Dim rnAll As Range, rnCell As Range, rnTarget As Range, rnDestination As Range

Set rnAll = Sheet1.Range("A1:A" & Sheet1.UsedRange.Rows.Count)
Set rnDestination = Sheet1.Range("K1:K" & Sheet1.UsedRange.Rows.Count)

For Each rnCell In rnAll
    If WorksheetFunction.CountIf(rnDestination, rnCell.Value) = 0 Then 'Index doesn't exist
        Set rnTarget = rnDestination.Cells(1).Offset(WorksheetFunction.CountA(rnDestination), 0)
            rnTarget.Value = rnCell.Value 'Populate the index if it doesn't exist
            rnTarget.Next.Value = rnCell.Next.Value
    Else 'Index exists
        Set rnTarget = rnDestination.Find(rnCell.Value, rnDestination.Cells(rnAll.Cells.Count), xlValues, xlWhole, xlByRows, xlNext, True, True)
            rnTarget.EntireRow.Cells(1, Sheet1.Columns.Count).End(xlToLeft).Next.Value = rnCell.Next.Value 'Move value to next free column if index exists
    End If
Next 
```

结束子

# docx - Microsoft Word Docx 下载附件错误

> ID：14252738
> 
> 赞同：0
> 
> 时间：2013-01-10T07:24:07.430
> 
> 标签：docx, docx4j

我将 doc 或 docx 文档保存在 Unix 目录中，并与允许用户下载附件的网页集成。我有以下代码来流式传输字符并保存为具有正确 MIME 类型的 Word 文档，但为什么打开它时显示垃圾字符。它与字符编码问题有关。如何解决这个问题？我应该使用 docx4j 吗？

```
String fullfilename = filename;

        File f = new File(fullfilename);
        int length = 0;

        ServletOutputStream op = response.getOutputStream();
        ServletContext context = getContext();
        String mimetype = context.getMimeType(fullfilename);

        response.setContentType((mimetype != null) ? mimetype
                : "application/x-download");
        response.setContentLength((int) f.length());
        response.setHeader("Content-Disposition", "attachment;filename="
                + filename);

        byte[] bbuf = new byte[fullfilename.length()];
        DataInputStream in = new DataInputStream(new FileInputStream(f));
        while ((in != null) && ((length = in.read(bbuf)) != -1)) {
            op.write(bbuf, 0, length);

        }

        in.close();
        op.flush();
        op.close(); 
```

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:11:22.537

设置正确的 mime 类型后线程关闭。

# java - Breezejs 和 java

> ID：14252741
> 
> 赞同：5
> 
> 时间：2013-01-10T07:24:22.133
> 
> 标签：java, breeze

我是新来的微风，只需要知道它是否支持像Tomcat这样的Java服务器..

我的意思是我看到了 100 个使用**Breeze**和**Asp.net**服务器的示例，但没有看到任何使用**Java 服务器**的示例，请对此有所了解；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:03:45.170

好吧，这是轻而易举的问题

**根据您的文档，Breeze 似乎是为 .NET 硬连线的。您甚至在示例中使用了 Visual Studio。**

是的，我们最初的发布展示了 Breeze 使用带有 .NET Entity Framework 后端的 Visual Studio。

需要明确的是，Breeze 不需要 .NET，但这是目前我们通过 WebAPI 连接数据提供者的方式。我们计划支持其他后端和前端，以及展示 Visual Studio 以外的 IDE。您对 UserVoice 的反馈有助于我们优先考虑这些功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-19T04:28:17.823

使用 Hibernate 和 JAX-RS 为 Breeze 开发 Java 后端的工作正在顺利进行。请查看[微风js-hibernate](https://github.com/Breeze/breeze.server.java/tree/master/breezejs-hibernate)。

NorthBreeze示例是一个使用了breathjs-hibernate 库的Web 应用程序(WAR) [。](https://github.com/Breeze/breeze.js.samples/tree/master/java/NorthBreeze)我们使用 Maven 构建它并将其部署在 Tomcat 上。它使用 Angular 作为 UI 位。它仍然很粗糙。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T17:59:53.507

Ankur，请将此请求添加到微风[用户语音](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions)中（并投票支持它）。在确定下一步要处理哪些功能/样本时，我们会认真对待这些建议。

# jquery - 我们可以动态添加 jqgrid 选项吗？

> ID：14252743
> 
> 赞同：3
> 
> 时间：2013-01-10T07:24:45.020
> 
> 标签：jquery, jqgrid

我对 Jqgrid 有疑问。谁能告诉我，是否可以在 Jqgrid 中动态添加诸如“shrinkToFit:false”之类的选项或其他选项。

谁能告诉它怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T09:43:09.457

如果您查看 jqGrid[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:options)，您会看到有一列（最后一个）名为*Can be changed?* . 此列告诉您是否可以在 jqGrid 初始化后设置\更改选项值。在大多数情况下，此列采用以下值之一：

*   **否**- 初始化后无法设置\更改选项值
*   **不，方法可用。**- 有一个专门用于更改此选项的特殊方法，可以在[此处](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:methods)找到 jqGrid 方法文档。
*   **是**的 - 可以使用以下`setGridParam`方法设置\更改选项值：

    $('#gridId').jqGrid('setGridParam', { autoencode: true });

*   **是的。需要重新加载**- 可以使用`setGridParam`方法设置\更改选项值，但需要重新加载 jqGrid 才能使用新值。这可以这样实现：

    $('#gridId').jqGrid('setGridParam', { altRows: true }).trigger('reloadGrid');

我希望这能总体上解释这个主题。

如果涉及`shrinkToFit`选项，则在初始化后无法设置\更改其值-您需要销毁网格并重新构建它。

# assembly - RTC 星期几字节

> ID：14252744
> 
> 赞同：4
> 
> 时间：2013-01-10T07:24:48.467
> 
> 标签：assembly, x86, real-time-clock

我通过端口 0x70 和 0x71 直接读/写 RTC。根据手册，工作日字节将包含星期天 = 1 的星期几，值范围从 1 到 7。当我读到今天的字节时，我得到了 4，即星期三。而当我阅读 RTC 信息时`hwclock -r`，当天是星期四，这是正确的。

将日期设置`hwclock`为其他日期并使用我的代码读取它并不能反映工作日字节的变化。

这个问题在所有系统中都存在。可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T07:38:39.980

来自[OSDev Wiki](http://wiki.osdev.org/CMOS)（强调添加）：

> RTC 芯片能够跟踪一周中的当前日期。它所做的只是在午夜增加其“工作日”寄存器并在达到 7 时将其重置为零。不幸的是，无法保证该寄存器被任何东西正确设置（包括当用户使用 BIOS 配置更改时间和日期时）屏幕）。**它完全不可靠，不应使用。**
> 
> 确定星期几的正确方法是从日期开始计算。

我相信这既回答了您最初的问题，也回答了为什么手动更改 RTC 日期`hwclock`不会显示工作日偏移量的更改 ( `0x07`)。如果它只是午夜的翻转柜台，那说明了很多。

至于从日期计算星期几而不使用系统时间函数，例如`strptime`，看看这个 StackOverflow 线程：[C Program to find week of week given date](https://stackoverflow.com/questions/6054016/c-program-to-find-day-of-week-given-date?rq=1)

# javascript - 使用 Google 地图 API 的热图

> ID：14252746
> 
> 赞同：2
> 
> 时间：2013-01-10T07:25:07.603
> 
> 标签：javascript, google-maps-api-3, heatmap

我正在尝试使用 Google Maps API 创建热图。我得到的是地图，但不是坐标上的热值。给出下面的代码：

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=APIKEY&sensor=true">

    </script>
    <script type="text/javascript">

   function initialize() {
  var mapOptions = {
    zoom: 3,
    center: new google.maps.LatLng(8.881928, 76.592758),
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
}

function loadScript() {
  var script = document.createElement("script");
  script.type = "text/javascript";
  script.src = "http://maps.googleapis.com/maps/api/js?key=APIKEY&sensor=true&callback=initialize";
  document.body.appendChild(script);
}
window.onload = loadScript;
 </script>

<script>
var heatMapData = [
  {location: new google.maps.LatLng(8.8678, 76.5623 },
  {location: new google.maps.LatLng(9.5674, 77.5623)},
  {location: new google.maps.LatLng(10.7821, 78.447)},
  {location: new google.maps.LatLng(12.4523, 79.443)},
  {location: new google.maps.LatLng(37.782, -122.441)},
  {location: new google.maps.LatLng(37.782, -122.439)},
  {location: new google.maps.LatLng(37.782, -122.435)},
  {location: new google.maps.LatLng(37.785, -122.447)},
  {location: new google.maps.LatLng(37.785, -122.445)},
  {location: new google.maps.LatLng(37.785, -122.441)},
  {location: new google.maps.LatLng(37.785, -122.437)},
  {location: new google.maps.LatLng(37.785, -122.435)}
];

var heatmap = new google.maps.visualization.HeatmapLayer({
  data: heatMapData
});
heatmap.setOptions({radius: heatmap.get('20')});
heatmap.setMap(map);

</script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

这是输出的屏幕截图。有人可以帮我吗？

![在此处输入图像描述](../Images/89aaa07e55d03d4ab97f9f94961deea3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T07:40:11.303

根据[Google Maps API 文档](https://developers.google.com/maps/documentation/javascript/layers#JSHeatMaps)`google.maps.LatLng`，您应该将对象数组传递给`HeatmapLayer`as `data`。

试试这个：

```
var heatMapData = [
    new google.maps.LatLng(8.8678, 76.5623),
    new google.maps.LatLng(9.5674, 77.5623),
    new google.maps.LatLng(10.7821, 78.447),
    new google.maps.LatLng(12.4523, 79.443),
    new google.maps.LatLng(37.782, -122.441),
    new google.maps.LatLng(37.782, -122.439),
    new google.maps.LatLng(37.782, -122.435),
    new google.maps.LatLng(37.785, -122.447),
    new google.maps.LatLng(37.785, -122.445),
    new google.maps.LatLng(37.785, -122.441),
    new google.maps.LatLng(37.785, -122.437),
    new google.maps.LatLng(37.785, -122.435)
]; 
```

此外，当您包含 Google Maps API 时，您需要`google.maps.visualization`通过添加`&libraries=visualization`到 URL 的末尾来加载库。

**工作示例：http: [//jsfiddle.net/EBQQH/](http://jsfiddle.net/EBQQH/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-12T07:18:21.213

您忘记将结束括号放在这里 {location: new google.maps.LatLng(8.8678, 76.5623_ _ _},

那就是问题所在

# asp.net - 从母版页注销后出现错误

> ID：14252747
> 
> 赞同：0
> 
> 时间：2013-01-10T07:25:15.373
> 
> 标签：asp.net, authentication, response.redirect

我在 asp.net 2005 中创建了角色身份验证示例。我在我的 default.aspx 页面上创建了登录面板，登录后它工作正常。我使用以下代码登录

```
FormsAuthentication.RedirectFromLoginPage(txtUName.Text, true, urlpath);
FormsAuthentication.SetAuthCookie(txtUName.Text, true);
Response.Redirect(urlpath, false); 
```

我在登录后显示的单个母版页中使用了所有必需的页面链接。我使用母版页中的代码进行“注销”，如下所示点击链接按钮

```
 try
 {
      Response.Redirect("~/Logout.aspx" );
 }
 catch (Exception ee)
 { 
      return;
 } 
```

现在，当我从母版页注销时，出现这样的错误

```
unable to evaluate expression because the code is optimized or native frame is on top of call stack 
```

我已经护目镜，但没有得到解决方案。我无法找出这背后的原因。请提供适当的解决方案。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:35:34.163

```
http://support.microsoft.com/kb/312629/en-us 
```

要解决此问题，请使用以下方法之一： • 对于 Response.End，调用 HttpContext.Current.ApplicationInstance.CompleteRequest 方法而不是 Response.End 以绕过对 Application_EndRequest 事件的代码执行。

• 对于 Response.Redirect，使用重载 Response.Redirect(String url, bool endResponse) 为 endResponse 参数传递 false 以抑制对 Response.End 的内部调用。例如：Response.Redirect("nextpage.aspx", false);

如果您使用此解决方法，将执行 Response.Redirect 之后的代码。• 对于 Server.Transfer，请改用 Server.Execute 方法。

# mysql - MySQL sum 默认返回 0

> ID：14252748
> 
> 赞同：4
> 
> 时间：2013-01-10T07:25:24.890
> 
> 标签：mysql, sum

我在使用 sum 功能时遇到问题。所以基本上，我有 2 张桌子，**paiment_type**和**bills**。在**bills**表中，我有一个外键名称**fk_paiement_type**，它可以让我知道该特定账单使用了哪种付款方式。

打印统计信息时，我这样做是为了按付款类型获取总数：

```
SELECT 
  pt.name,
  SUM(f.total_ttc) AS total_mode 
FROM
  bills AS f 
  INNER JOIN paiement_type AS pt 
    ON pt.id = f.fk_paiement_type 
WHERE (
    f.created BETWEEN '2013-01-10' 
    AND '2013-01-10'
  ) 
  AND (
    f.type LIKE 'facture' 
    OR f.type LIKE ''
  ) 
GROUP BY f.fk_paiement_type 
```

这段代码运行良好，但我实际上有 3 种不同的付款类型，有时白天只使用了其中的两种，如果它不存在，我仍然想显示它。

编辑：我已经尝试使用 IFNULL 功能，但它没有用。bills 表中的 fk_paiement_type 有时只会返回与 paiement_type 表匹配的 2 个值。我想我的问题来自这里：

```
INNER JOIN paiement_type AS pt ON pt.id = f.fk_paiement_type 
```

任何想法？

编辑2：

我的表结构如下：

```
**Bills Table**

id (int), 
fk_paiement_type (int), 
ref (varchar), 
fk_client (int), 
tss (double), 
total_ttc (double), 
type (varchar), 
created (datetime)

**Paiement_type Table**

id (int), 
name (varchar) 
```

我试过你的最后一个答案，但它仍然没有用。现在，我只是在我的 Java 代码中绕过这个问题，但我希望有一种“干净”的方式来做这件事。

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T07:26:51.340

这里使用 ifnull

```
SELECT 
  pt.name,
  IFNULL(SUM(f.total_ttc),0) AS total_mode 
FROM
  factures AS f 
  INNER JOIN paiement_type AS pt 
    ON pt.id = f.fk_paiement_type 
WHERE (
    f.created BETWEEN '2013-01-10' 
    AND '2013-01-10'
  ) 
  AND (
    f.type LIKE 'facture' 
    OR f.type LIKE ''
  ) 
GROUP BY f.fk_paiement_type 
```

编辑 ：

```
SELECT 
  pt.name,
  SUM(f.total_ttc) AS total_mode 
FROM
  bills AS f 
INNER JOIN (SELECT * FROM paiement_type GROUP BY fk_paiement_type) AS pt ON pt.id = f.fk_paiement_type 
WHERE (f.created BETWEEN '2013-01-10' AND '2013-01-10') AND (f.type LIKE 'facture' OR f.type LIKE '') 
GROUP BY f.fk_paiement_type 
```

我认为当您使用内部联接时会加入多个结果，因此限制内部联接以每组仅获取 1 条记录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:35:31.007

尝试这个

```
 SELECT 
    f.thename,
     f.total_mode 
    FROM (SELECT name as thename , SUM(total_ttc) AS total_mode  from bills 
          WHERE (
           f.created BETWEEN '2013-01-10' 
           AND '2013-01-10'
          ) 
           AND (
                f.type LIKE 'facture' 
             OR f.type LIKE ''
               ) GROUP BY fk_paiement_type  ) f
    INNER JOIN paiement_type AS pt 
    ON pt.id = f.fk_paiement_type 
```

# tomcat - Liferay 5.2.3 /tomcat 6 适用于 Windows Server 2008 R2 的 SSL 安装步骤

> ID：14252754
> 
> 赞同：0
> 
> 时间：2013-01-10T07:25:58.957
> 
> 标签：tomcat, ssl, liferay, ssl-certificate

我创建了具有以下位置的 CSR 文件：“C:\Program Files (x86)\Java\jre6\bin”

我的 liferay 安装也有 jre 文件夹（\tomcat-6.0.18\jre1.5.0_17）。我不确定以上两个 JRE 中的哪一个是生成 CSR 的正确位置。

对于 Apache Tomcat 服务器，此链接非常有用： [http ://www.entrust.net/ssl-technical/webserver.cfm](http://www.entrust.net/ssl-technical/webserver.cfm)

但是在 Liferay 中配置相同的东西对我来说很难。如果有人可以为我提供针对 liferay 的特定步骤，那将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:42:04.210

如果您只想通过 https 使 Liferay 可用，您只需要根据您链接的现有文档配置您的应用程序服务器（例如 tomcat）。Liferay 对此没有添加任何内容，并且在这种情况下不处理 https。

您可能需要做更多的唯一情况是当您通过 https 从 Liferay 访问其他服务器时（例如，通过 https 进行远程发布）以在 Liferay 和其他 tomcat/liferay 之间建立信任。（[这篇博客文章](https://www.liferay.com/web/olaf.kock/blog/-/blogs/setting-up-remote-staging-through-https)可能会帮助您进行远程登台）

为了找出使用了哪个 java，您可能需要参考您的 tomcat 配置，例如在 bin/setenv.sh 中，或者参考可能显示它运行哪个版本的进程列表。或者只是删除其中一个 JRE 并使用最终的 JRE，并且只使用你拥有的（最好知道你的服务器上到底运行了什么）

另外，请考虑更新到更新的版本。5.2.3 现在已经过时了将近 3 年

# iphone - 无法在 splitviewcontroller 的详细视图中获取 web 视图中的数据

> ID：14252755
> 
> 赞同：0
> 
> 时间：2013-01-10T07:26:04.007
> 
> 标签：iphone, ios, objective-c, ios5, uisplitviewcontroller

在我的 ipad 应用程序中，我无法在 Web 视图中获取数据。该 Web 视图位于 splitviewcontroller 的详细视图中。该数据来自链接。

我正在使用这段代码。

在拆分视图表中确实选择了索引路径处的行

```
post=[self.postListMutableArray objectAtIndex:indexPath.row];
PostDetailsViewController *postDetails=[[PostDetailsViewController alloc]initWithNibName:@"PostDetailViewController_Ipad" bundle:nil];
postDetails.detailItem=post.postLink; 
```

在拆分视图详细视图中

```
- (void)setDetailItem:(id)newDetailItem
{
if (_detailItem != newDetailItem)
{
    _detailItem = newDetailItem;

    // Update the view.

    NSLog(@"detail Item String is %@",_detailItem);

    [self configureView];

}

}

- (void)configureView
{
// Update the user interface for the detail item.

    NSString* str =_detailItem;
    NSURL* url = [NSURL URLWithString:str];
    NSLog(@"URL is ----> %@",url);
    self.webView.scalesPageToFit=YES;
    [self.webView loadRequest:[NSURLRequest requestWithURL:url]];
    //[self.view addSubview:webView];

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:33:44.477

`PostDetailsViewController`在.h 类中创建新变量：-

> @property(strong,nonatomic)NSString *strGetPostDetail;

并合成`PostDetailsViewController`.m

@synthesize strGetPostDetail

现在您可以调用`splitViewTable` `Delegate` `DidSelect`方法：-

```
post=[self.postListMutableArray objectAtIndex:indexPath.row];
PostDetailsViewController *postDetails=[[PostDetailsViewController alloc]init];
postDetails.strGetPostDetail=post; 
```

# android - 使用 OpenCV Android 进行面部特征检测

> ID：14252757
> 
> 赞同：5
> 
> 时间：2013-01-10T07:26:18.240
> 
> 标签：android, opencv, android-ndk, face-detection

我需要开发一个面部特征检测应用程序，通过它我可以检测眼睛、鼻子、嘴唇、头部及其面部。为此，我选择了 OpenCV。我经历了许多教程和示例项目。在那里我可以看到 haarcascade 文件的使用情况，通过这些文件我可以在录制视频时检测面部特征。据我所知，haar 级联文件的位置。

但是没有网站可以告诉我在 OpenCV android 项目中 haarcascade 文件的完整实现。

请为我提供一些有关的网站或给我一些关于相同的简要知识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-09T09:33:05.273

这是使用 openCV 检测人脸的好方法。由于您使用的是 android，因此您可能找不到用 java 编写的代码，但您也可以随时将其模态化以在 android 上工作。这是我认为最好的方法。[http://docs.opencv.org/master/d7/d8b/tutorial_py_face_detection.html#gsc.tab=0](http://docs.opencv.org/master/d7/d8b/tutorial_py_face_detection.html#gsc.tab=0)

[http://docs.opencv.org/modules/contrib/doc/facerec/facerec_tutorial.html](http://docs.opencv.org/modules/contrib/doc/facerec/facerec_tutorial.html)

这是使用 OpenCV 的不同方法的另一个详细用途。希望它有所帮助，如果您在更改代码方面需要帮助，您必须发布您到目前为止所做的事情，然后我很乐意提供帮助！干杯!

# asp.net - ASP.Net 中的 4 层架构中的层

> ID：14252758
> 
> 赞同：1
> 
> 时间：2013-01-10T07:26:18.937
> 
> 标签：asp.net, architecture

根据[这篇](http://www.dotnetfunda.com/articles/article18.aspx)文章中的 4 层架构，业务对象也被视为层。

在这个应用程序中，我们将有以下 4 层（如博客中给出的） 1\. 业务对象 [BO] 2\. 业务访问层 [BAL] 3\. 数据访问层 [DAL] 4\. UI（4 层）文件夹 [UI ]

我想澄清一下，在软件架构中，我们是否将业务对象视为一个单独的层？

我的第二个问题是

如果我们有两层架构，这意味着我们可以有两台物理服务器，一台服务器只能有 DB（数据库服务器），而另一台服务器将包括表示（UI）、业务逻辑、数据访问层和业务对象。这是正确的吗 ？

和

在三层中，我们可以在一台服务器 (T1) 上部署 UI 层、业务逻辑、数据访问层、另一台服务器上的业务对象 (T2) 和数据库独立服务器 (T3)。在这种情况下，我们必须创建服务（.Net 服务或 WCF 或远程处理）来为 UI 层公开对象。

我不确定 4 层架构。根据 [[this]](http://www.dotnetfunda.com/articles/article18.aspx)文章，它描述了 4 层，包括业务对象 (BO)。我不确定我们是否将 BO 视为层？

寻找我发现的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T08:50:59.767

通常，层用于表示逻辑分组，而层用于表示物理分组。所以首先，我通常将其称为 n 层架构而不是 4 层架构。有关层和层的更多信息，请参阅[本文](http://www.guidanceshare.com/wiki/Application_Architecture_Guide_-_Chapter_9_-_Layers_and_Tiers)

现在，文章中看到的 BO 层实际上是通常所说的 DTO（数据传输对象），因为它们是 POCO 实体——这些被认为是横切组件，可以从任何层使用。其他基础设施组件（例如日志记录、审计跟踪等）也属于类似的横切组件。虽然，它是一个逻辑组，但它们通常不被称为层。

您如何在物理组（进程/服务器）中托管您的层将决定层数。因此，您可以将数据库作为一层，将承载 UI/BL/DAL 的应用服务器 (IIS) 作为另一层，将浏览器/客户端作为第三层。同样，您可以在应用服务器上托管 BL/DAL，在 Web 服务器上托管 UI，从而创建更多层。

# android - 如何使用 Jsoup 返回字符串数组？

> ID：14252761
> 
> 赞同：0
> 
> 时间：2013-01-10T07:26:31.450
> 
> 标签：android, json, parsing, android-asynctask, jsoup

如何将使用 jsoup 库提取的所有 href 链接存储到字符串数组？

然后将其全部显示在 TextView 中？

我不知道如何将**AsyncTask**与**String Array**一起使用，也不知道如何在从 Google 提取 href 链接期间执行**FOR LOOP 。**我不知道该设置什么条件才能使**FOR LOOP**停止。我当前的代码只返回最后一个 href 链接。我希望有人可以向我说明。我很感激你的时间！

```
package com.example.jsouptestarray;

import java.io.IOException;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

import com.example.jsouptestarray.R;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.widget.TextView;

public class MainActivity extends Activity {

    TextView text;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        new MyTask().execute();

         }

    private class MyTask extends AsyncTask<Void, Void, String> {

          @Override
          protected String doInBackground(Void... params) {

            Document doc;
            String linkText = ""; 

            try {
                doc = Jsoup.connect("https://www.google.com/").get();
                 Elements links = doc.getElementsByTag("a");
                 for (Element el : links) { 
                     linkText = el.attr("href");
                        System.out.println("Href Found!");
                        System.out.println("Href attribute is : "+linkText);
                 }

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return linkText;   
          } 

          @Override
          protected void onPostExecute(String result) {        
            //if you had a ui element, you could display the title
            ((TextView)findViewById (R.id.textView2)).append ( result  );
          }
        }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:35:24.360

将您的课程更改`AsyncTask`为从以下位置返回 String ArrayList `doInBackground`：

```
private class MyTask extends AsyncTask<Void, Void, ArrayList<String>> {

ArrayList<String> arr_linkText=new ArrayList<String>();

          @Override
          protected ArrayList<String> doInBackground(Void... params) {

            Document doc;
            String linkText = ""; 

            try {
                doc = Jsoup.connect("https://www.google.com/").get();
                 Elements links = doc.getElementsByTag("a");
                 for (Element el : links) { 
                     linkText = el.attr("href");
                     arr_linkText.add(linkText); // add value to ArrayList
                 }
              } catch (IOException e) {
                // TODO Auto-generated catch block
               e.printStackTrace();
             }
            return arr_linkText;     //<< retrun ArrayList from here
          } 

          @Override
          protected void onPostExecute(ArrayList<String> result) {        

          // get all value from result to display in TextView
               TextView textview=(TextView)findViewById(R.id.textView2);
              for (String temp_result : result) {
                System.out.println("links :: "+temp_result);

                           textview.append (temp_result +"\n");
             }
          }
        } 
```

# vba - 如何逐行解析 WinHTTP 响应：UTF-8 编码的 CSV？

> ID：14252762
> 
> 赞同：2
> 
> 时间：2013-01-10T07:26:34.047
> 
> 标签：vba, csv, utf-8, httpresponse, winhttp

作为我愉快地解决问题的下一步（[不理解为什么 WinHTTP 不验证某些 HTTPS 资源](https://stackoverflow.com/questions/14184926/not-understanding-why-winhttp-does-not-authenticate-certain-https-resource)），我需要漂亮地解析获得的 CSV。目前我使用以下解决方案：

```
If HTTPReq.Status = 200 Then
    If FSO.FileExists(CSV_Path) = True Then FSO.DeleteFile (CSV_Path)
    Set FileStream = CreateObject("ADODB.Stream")
    FileStream.Open
    FileStream.Type = 1
    FileStream.Write HTTPReq.responseBody
    FileStream.SaveToFile (CSV_Path)
    FileStream.Close
    ActiveWorkbook.Connections("Redmine Timelog").Refresh
    ActiveSheet.PivotTables("PivotTable_RM").PivotCache.Refresh
End If 
```

也就是说，我将 CSV 保存到磁盘，然后将其作为数据源链接到 Excel。但是，我想让我的 Excel 书自给自足，无需创建其他文件（出于一些非常明显的原因）。

就我而言，解决方案非常简单：`WinHTTP.responseText`在单独的 Excel 工作表上逐行存储（而不是当前存储的链接 CSV），然后使用`Text to Data`Excel 转换。但是，我面临以下直接麻烦：

1.  CSV 是 UTF-8 编码的，而原始 WinHTTP 响应文本似乎不是。有没有办法使用所需的编码来解释它？
2.  如何将 CSV 拆分为行？使用`Split`函数还是其他什么？CSV 似乎使用了一些标准的 NewLine 字符，并且 99% 的数据应该没有这些字符。

解决了许多类似的问题，但到目前为止，我发现 VBA 没有任何明确和可接受的问题，因此我们将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:17:50.327

最后我自己找到了两种解决方案：

1.  借助 ADODB.Stream 将 CSV 转换为 UTF-8（更多信息请参见：[http](http://www.motobit.com/tips/detpg_binarytostring/) ://www.motobit.com/tips/detpg_binarytostring/ ）
2.  `Text to Data`使用Excel 例程拆分 CSV 并进一步解析字符串数组

以下是代码的相关部分：

```
'CSV to UTF-8
Set FileStream = CreateObject("ADODB.Stream")
FileStream.Open
FileStream.Type = 1 'Binary
FileStream.Write HTTPReq.responseBody
FileStream.Position = 0
FileStream.Type = 2 'Text
FileStream.Charset = "UTF-8"
CSV_Text = FileStream.ReadText
FileStream.Close
'CSV Splitting
CSV_Strings = Split(Trim(CSV_Text), vbLf)
ThisWorkbook.Worksheets("RM_Log").Cells.ClearContents
Set OutputRange = ThisWorkbook.Sheets("RM_Log").Range("A1:A" & UBound(CSV_Strings) + 1)
OutputRange = WorksheetFunction.Transpose(CSV_Strings)
OutputRange.TextToColumns Destination:=ThisWorkbook.Sheets("RM_Log").Range("A1"), _
    DataType:=xlDelimited, TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=False, _
    Tab:=False, Semicolon:=False, Comma:=True, Space:=False, Other:=False, FieldInfo _
    :=Array(Array(1, 3), Array(2, 1), Array(3, 1), Array(4, 1), Array(5, 1), Array(6, 1), _
    Array(7, 1), Array(8, 1), Array(9, 1)), DecimalSeparator:=".", _
    TrailingMinusNumbers:=True 
```

结果，我的 Excel 文件现在完全可以自给自足了。希望这对其他人也有帮助。非常感谢所有留下评论的人——他们缩小了我的搜索范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-28T13:42:51.943

这条线

```
OutputRange = WorksheetFunction.Transpose(CSV_Strings) 
```

应该是这样的

```
OutputRange.Formula = WorksheetFunction.Transpose(CSV_Strings) 
```

# c# - 在window mobile 5.0上运行的C#程序扫描二维码

> ID：14252763
> 
> 赞同：-2
> 
> 时间：2013-01-10T07:26:38.100
> 
> 标签：c#

我是 Windows CE 应用程序开发的新手。我需要使用visual studio 2008 专业版开发windowCE 应用程序。我已经安装了 windows mobile device center、windowsCE emulator 3.0。该程序应该允许用户使用 MC70（windows mobile 5.0 设备）扫描二维码。二维码信息将显示并存储到数据库中。

通过我的研究，我下载并安装了开发window CE程序所需的软件。现在的下一阶段是对其进行编程。我找不到完整的示例代码或完整的二维码相关库。

有人可以帮我解决这个问题吗？真的需要帮助，用C#开发一个二维码扫描程序，在Window CE平台上运行。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:49:32.390

几天前你问了一个非常相似的问题，我建议你应该下载摩托罗拉 EMDK。

*不要使用模拟器 - 它不适用于制造商特定的 API。直接在设备上调试！*

适用于 .NET 的摩托罗拉 EMDK 包含几个示例，向您展示如何编写程序来扫描条形码。请注意，要使您的方案正常工作，您必须使用设备的成像器，而不是一维激光扫描仪单元。

在我的 Win7 64 机器上，这些示例可以在`C:\Users\Public\Motorola EMDK for .NET`.

# logging - log4go 的异常行为

> ID：14252766
> 
> 赞同：2
> 
> 时间：2013-01-10T07:26:57.423
> 
> 标签：logging, go

我发现[log4go](http://code.google.com/p/log4go/w/list)包不时丢失日志。

以下是一个简单的代码片段（我移动了`log4go`目录，因此可以进行以下导入。）：

```
package main
import (
    "log4go"
    "log"
    "fmt"
)

func main() {
    fmt.Println("fmt")
    log.Println("log")
    log4go.Info("log4go")
    log4go.Info("log4go")
} 
```

然后我按 执行`go run test.go`，输出如下：

```
fmt
2013/01/10 15:24:04 log 
```

消息`log4go`不写入输出。

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T11:49:57.580

**编辑**：似乎他们的入门页面不再是最新的，事实上我在让 log4go 打印到标准输出时遇到了问题，在 3.0.1 版的文档中他们指出：

*   使用说明： - ConsoleLogWriter 不会将消息来源显示到标准输出，但 FileLogWriter 会。

这在我的盒子上无法重现。将其打印到标准输出的唯一方法是在记录调用后通过调用 os.Stdout.Sync() 手动刷新（如@jnml 建议的那样）。

一般来说，我的印象是 log4go 的文档最近没有维护，示例不起作用，它们使用不推荐使用的方法，因此一般行为难以理解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T00:08:15.590

检查`log4go`网站上的问题后，似乎`log4go`有冲洗问题。

因为它使用a`channel`写入文件，如果`main`退出太快，日志内容将不会被写入。

因此`time.Sleep(time.Second)`，在代码片段末尾添加 a 会导致日志内容刷新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T07:32:32.990

甚至没有提供至少一个“log4go”的链接，回答这个问题并不容易（因此-1）所以让我猜猜：在某处可能缺少对“flush”的调用。也许更好地将问题报告给包作者？

顺便说一句：考虑到标准/推荐的 Go 设置，导入路径“log4go”也被破坏了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-06T13:16:35.503

像下面这样简单地向 Close() 添加一些代码。

```
for i := 10; i > 0 && len(w.rec) > 0; i-- {
    time.Sleep(100 * time.Millisecond)
} 
```

w.rec 中的一些记录无法保存。

[https://github.com/ccpaging/log4go](https://github.com/ccpaging/log4go)

# c++ - 如何以表格格式打印数据？

> ID：14252767
> 
> 赞同：2
> 
> 时间：2013-01-10T07:26:59.753
> 
> 标签：c++, performance, format

我有一个数据结构。

```
 map <const char*, vector<double> > m;

  Key   values 
  AA     1 2 3 1 2 1 2 3
  BB     2 3 4 1 2 3 4 5 
  CC     2 3 4 1 2 3 4 5 
```

我想以以下格式打印输出：

```
AA  BB   CC
1   2    2
2   3    3
3   4    4
1   1    1
2   2    2
1   3    3
2   4    4
3   5    5 
```

我怎样才能以有效的方式实现这一点？遍历地图和复制矢量非常耗时。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T08:06:39.820

这个想法是迭代第一轮以打印地图的键，然后遍历每个向量并逐个打印出元素（如果有）。

```
void func()
{
  std::map<std::string, std::vector<int> > m;  

  m["AA"] = {1, 2, 3, 1, 2, 1, 2, 3};
  m["BB"] = {2, 3, 4, 1, 2, 3, 4, 5, 5 };  
  m["CC"] = {2, 3, 4, 1, 2, 3, 4, 5};

  size_t size = 0;
  for (auto item = m.begin(); item != m.end(); ++item)
  {
    std::cout << item->first << '\t';
    if (size < item->second.size())
    {
      size = item->second.size();
    }
  }

  std::cout << std::endl;

  for (size_t i = 0; i< size; i++)
  {
    for (auto item = m.begin(); item != m.end(); ++item)
    {
      if (i < item->second.size())
      {
        std::cout << item->second.at(i) << '\t';
      }
    }
    std::cout << std::endl;
  }
} 
```

如果所有向量的大小相同，您可以忽略大小检查并使用 [] 运算符来获得更好的速度。

```
for (size_t i = 0; i< size; i++)
  {
    for (auto item = m.begin(); item != m.end(); ++item)
    { 
        std::cout << item->second[i] << '\t'; 
    }
    std::cout << std::endl;
  } 
```

查看示例代码[链接](http://ideone.com/vkiwMo)，享受

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T07:48:14.170

我想出什么。

警告：未经测试！

```
using namespace std;
map <const char*, vector<double> > m;

vector<double>::size_type int index = -1;
map <const char*, vector<double> >::size_type finishedVectors = 0;
while(1)
{
    for(map <const char*, vector<double> >::iterator it = m.begin(); it != m.end(); ++it)
    {
        if(index == -1)
        {
            std::cout << it->first << "\t";
        }
        else
        {
            if(index < it->second.size())
            {
                std::cout << it->second[i] << "\t";
            }
            else
            {
                ++finishedVectors;
            }
        }
    }
    if(finishedVectors == m.size())
    {
        break;
    }
    ++index;
} 
```

# iphone - 如何避免 iPhone 中特定调用 LinkedIn API 的油门限制？

> ID：14252771
> 
> 赞同：-1
> 
> 时间：2013-01-10T07:27:17.823
> 
> 标签：iphone, objective-c

我有一个应用程序，我将 LinkedIn 集成到我的应用程序中。我正在向我的连接发布消息，该连接工作正常。但问题是，当我在一段时间内多次发布消息说 15 条消息时，它会返回油门限制错误：

```
{
  "errorCode": 0,
  "message": "Throttle limit for calls to this resource is reached.",
  "requestId": "J69QX565O6",
  "status": 403,
  "timestamp": 1357802749431
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-06T01:33:20.620

您已用完每日数据限制！

请参阅 API 使用限制[@Throttle Limits](https://developer.linkedin.com/documents/throttle-limits)

文档指出，每个用户帐户每天可以发送 10 条消息，如果使用开发人员帐户执行，则每天最多可以发送 40 条消息（您可以在 LinkedIn[应用程序配置部分](https://www.linkedin.com/secure/developer)将自己或其他人添加为开发人员）。您的应用程序每天也有 5k 的全局消息传输限制。据我所知，这是无法解决的，因为这是 LinkedIn 设置的硬性限制

# android - 如何禁用先前布局的触摸

> ID：14252772
> 
> 赞同：12
> 
> 时间：2013-01-10T07:27:34.270
> 
> 标签：android, layout

我的android布局如下：

```
<RelativeLayout>

    <Layout
        android:id="@+id/login_fragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:name="com.test.console.LoginFragment"  />

    <Layout
        android:id="@+id/transperent_fragment"
        android:name="com.test.transperentFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/body_texture"
        android:alpha="0.2"> />

</RelativeLayout> 
```

![如果我触摸透明层，仍然会单击登录按钮。 那么如何避免在触摸透明布局后单击登录按钮](../Images/80deb4200af6227c0dc3ce900f3620ba.png)

如果我触摸透明层，仍然会单击登录按钮。那么如何避免在触摸透明布局后单击登录按钮

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-10T07:32:38.360

有 2 个选项可以使您的底部布局不可点击：

1.  通过添加属性使您的底层（或按钮）不可点击`android:clickable="false"`
2.  通过添加属性使您的顶层可点击`android:clickable="true"`，然后触摸不会传递到较低层。

希望对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-28T01:40:46.343

使用**wrap_content**作为登录按钮

```
<Layout
    android:id="@+id/login_fragment"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:name="com.test.console.LoginFragment"  />

<Layout
    android:id="@+id/transperent_fragment"
    android:name="com.test.transperentFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/body_texture"
    android:alpha="0.2"> /> 
```

# ibm-rad - IBM RAD 8.0 数据源连接

> ID：14252777
> 
> 赞同：0
> 
> 时间：2013-01-10T07:27:53.677
> 
> 标签：ibm-rad

问题 在 RAD 8.0（安装在本地工作站上）中，我们已将数据源配置为连接到 Iseries 上的 DB2。RAD 的 Web 控制台中的测试操作成功，但出现 2 个警告。

但是，当尝试从应用程序（以编程方式）连接时，我们收到以下异常

java.lang.Class.throwNoSuchMethodException: J2CA0009E: 尝试实例化资源 jdbc/iSeries_Conn 使用的 ManagedConnectionFactory 类 com.ibm.ws.rsadapter.spi.WSManagedConnectionFactoryImpl 时发生异常：java.lang.NoSuchMethodException: com.ibm.ejs。 j2c.DefaultSecurityHelper。（javax.resource.spi.ManagedConnectionFactory，com.ibm.ejs.j2c.MCFExtendedProperties）

遵循的步骤

1.  设置提供程序驱动程序时选择的 JDBC 提供程序：DB2 UDB for iSeries (Toolbox XA)
2.  使用的驱动程序库：jt400.jar（我们从 IBM 的开发工作室中挑选）
3.  已创建数据源，经测试，连接成功，出现 2 个警告

    一个。警告：数据源类 com.ibm.as400.access.AS400JDBCXADataSource 上不存在属性“translateBoolean”。

    湾。警告：数据源类 com.ibm.as400.access.AS400JDBCXADataSource 上不存在属性“metaDataSource”。

4.  以编程方式尝试访问数据源，使用以下语句

    一个。上下文 ctx = new InitialContext();

    湾。db2DataSource = (DataSource) ctx.lookup(“jdbc/iSeries_Conn”); //在这一行发生异常

您能否建议一个适当的解决方案来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:10:37.003

问题在于取代 jt400.jar 的连接器 jar (iwdtrt.jar) 文件，因此 jt400.jar 中的类被抑制。

通过从 web lib 文件夹中删除 iwdtrt.jar 文件可以解决此问题。

# php - Drupal node_form 未定义函数

> ID：14252779
> 
> 赞同：1
> 
> 时间：2013-01-10T07:28:02.197
> 
> 标签：php, api, drupal, drupal-7

当我在模块中运行[node_form()](http://api.drupal.org/api/drupal/modules!node!node.pages.inc/function/node_form/7)时，出现以下错误：*致命错误：调用未定义的函数 node_form()*

使用此函数是否需要一些特殊上下文，因为当 API 参考说它在 modules/node/node.pages.inc 中定义时，我无法弄清楚为什么它会未定义

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T08:57:43.360

默认情况下不包含该特定文件，因此您需要手动执行：

```
module_load_include('inc', 'node', 'node.pages'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:17:50.750

您可以使用`drupal_get_form`而不是`node_form`.

# php - 不使用 OLE 的 PHP 4 excel 导出

> ID：14252780
> 
> 赞同：0
> 
> 时间：2013-01-10T07:28:09.190
> 
> 标签：php, export-to-excel

在不使用 OLE 的情况下以 Excel 97-2003 (*.xls) 文件格式制作报告的最佳库是什么？它必须使用 PHP 4 并支持样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:42:27.407

根据它的更新日志，[php-excel-reader](http://code.google.com/p/php-excel-reader/)适用于 PHP4。

# jquery - 到达最后一张幻灯片后返回第一张幻灯片 - 使用 jQuery Slider

> ID：14252782
> 
> 赞同：0
> 
> 时间：2013-01-10T07:28:11.747
> 
> 标签：jquery, slider

我有一个带有自动前进功能的 jQuery 滑块。但我想知道在到达最后一张幻灯片后如何返回第一张幻灯片。currentSlide 变量（它保存我们正在查看的当前幻灯片的索引）只是不断变大，在到达最后一张幻灯片后不会返回零。我没有为滑块本身包含我所有的 jQuery 脚本，因为那会很大，而且我认为没有必要。这是代码：

```
<html>
<head>
</head>

<body>
<div class="slider" data-slide="0">
    <div class="slide"></div>
    <div class="slide"></div>
    <div class="slide"></div>
    <div class="slide"></div>
</div>

<script type="text/javascript" src="js/jquery-1.7.2.js"></script>
<script type="text/javascript">

$(window).load(function(){
    var currentSlide = $(".slider").attr("data-slide"); /*Every time a slide is viewed, the index number of that slide is added to an html5 data- attribute. That way, we know what slide we are on. This var stores that information. */
    var timeOut = null;

    (function autoAdvance(){
        $('.sliderNav').find('.sliderTrigger' + (currentSlide)).trigger('click',[true]); /* Automatically click the trigger that will advance the slider to the next slide. */
        currentSlide++;
        timeOut = setTimeout(autoAdvance,5000);
    })();

});

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:39:38.140

```
...
var currentSlide = $(".slider").attr("data-slide"); 
var timeOut = null;
count = $(".slider").children().length;

(function autoAdvance(){
    $('.sliderNav').find('.sliderTrigger' + (currentSlide)).trigger('click',[true]); 
    if (count == currentSlide){
        currentSlide = 1;
    } else {
        currentSlide++;
    }
    timeOut = setTimeout(autoAdvance,5000);
    })();
... 
```

# c# - 子页面提交时关闭 iframe fancybox 并重新加载父页面

> ID：14252786
> 
> 赞同：0
> 
> 时间：2013-01-10T07:28:39.720
> 
> 标签：c#, jquery, fancybox

我的页面上有 iframe fancybox。在子页面上，单击“添加按钮”时，我向 DB 添加了一些内容。在这个过程之后，我想关闭fancybox并重新加载父页面。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:41:36.610

这应该在页面重新加载时调用..

```
 window.parent.closeDialogFormSubmit();

   //Or

   window.top.parent.closeDialogFormSubmit(); 
```

此`closeDialogFormSubmit`功能应该在该页面上打开的精美框中。 `closeDialogFormSubmit`为花哨的盒子关闭代码编写代码。

该函数应该写在外面`$(document).ready(function(){});`， `$(function(){});`否则它将找不到该函数并给出未定义的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:07:23.360

**1）。在子页面**

使用 API 方法`parent.$.fancybox.close()`

您可以创建一个按钮，如：

```
<a href="javascript:parent.jQuery.fancybox.close();"><img src="myCloseButton.png" alt="close fancybox" /></a> 
```

**请记住**，这些页面之间的交互受[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)的约束，因此如果子页面位于另一个域中，`parent.$.fancybox.close()`则可能无法正常工作。

**编辑**：如果在提交表单后应该关闭子页面，则使用标签`onsubmit`中的属性设置关闭方法，如：`form`

```
<form id="login_form" action="process.php" onsubmit="javascript:parent.jQuery.fancybox.close();"> 
```

请参阅[此帖子](https://stackoverflow.com/a/9118087/1055987)以获取更多参考和演示。

**2）。在父页面中**

`afterClose` 将回调 添加到您的自定义脚本中，例如：

```
$(".fancybox").fancybox({
    afterClose : function() {
        location.reload();
        return;
    }
}); 
```

...关闭fancybox后重新加载页面。见**[JSFIDDLE](http://jsfiddle.net/EWTxv/)**

# java - 缩放画布后位图质量丢失

> ID：14252794
> 
> 赞同：4
> 
> 时间：2013-01-10T07:29:43.743
> 
> 标签：java, android, bitmap

我想绘制在画布中缩放的位图（基于位图和视图大小）。问题是，如果我在绘制位图之前缩放画布：

```
 canvas.scale(1.5f,1.5f);
 canvas.drawBitmap(mBitmap, 0, 0, paint); 
```

这是结果：

![混叠图像](../Images/b6aafff8f7d27151a519f6f83d3057d6.png)

但是，如果不是缩放画布，而是缩放位图：

```
Bitmap scaled = Bitmap.createScaledBitmap(
        mBitmap, bitmapWidth, bitmapHeight,
        true);
canvas.drawBitmap(scaledBitmap, 0, 0, paint); 
```

结果要好得多： ![正确缩放的图像](../Images/8e409f07c5d8f738c432173f1e236da4.png)

问题是位图非常大，并且在内存中同时保存原始位图和缩放位图可能会有问题。

每次位图或视图边界发生变化时，有没有什么方法可以在不创建缩放位图的情况下获得第二个结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:41:33.540

绘制到画布时使用包含缩放信息的矩阵

```
canvas.drawBitmap(x,y,..., matrix...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T07:45:00.050

从源中读取位图时使用`inSampleSize`in`BitmapOptions`以相应地对其进行缩放（它作为额外参数传递）。

这是 android 在几乎所有情况下加载图像以避免内存溢出的首选方式，因为完整的图像永远不会加载到内存中。

[可以在此处找到有关有效加载位图](http://developer.android.com/training/displaying-bitmaps/index.html)的 android 文档。

使用示例代码说明如何从您的源中检索所需大小的图像。（资源、文件等）

中的两种方法`Loading Large Bitmaps Efficiently`是您正在寻找的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T09:37:26.310

我的问题的解决方案是 Paint 没有启用 FILTER_BITMAP_FLAG 标志。

# c# - 如何捕获 Devexpress XtraReport 打印日期

> ID：14252796
> 
> 赞同：0
> 
> 时间：2013-01-10T07:29:50.357
> 
> 标签：c#, winforms, printing, devexpress, xtrareport

我一直在使用 Devexpress XtraReport 来显示要打印的客户列表。由于我的系统要求，我希望将上次打印日期存储在数据库中。我已经尝试过 PrintProgress 方法，但它不能让我更进一步。此外，在将日期/时间戳存储在数据库中之前，我必须确保文档已成功打印。我应该使用哪种方法？您的想法受到高度赞赏。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T10:55:39.413

为什么不在`report.Print()`调用后立即保存数据？如果报告已成功打印，您无法 100% 确定，因为有一百万件您无法控制的事情可能会出错（纸张卡住、打印机未插电......）。您只需要假设报告已打印。如果出现任何问题，用户将再次打印它，无论如何。

# sql - 如何根据主键从另一个表中更新 mytable 的列？

> ID：14252797
> 
> 赞同：1
> 
> 时间：2013-01-10T07:29:56.440
> 
> 标签：sql, sql-server

使用 SQL 查询，如何更新此表

```
pkey   ColA   ColB   ColC
----   ----   ----   ----
ABC1   appl   pine   orng
BOPQ   pine   appl   orng
PLKQ   orng   appl   pine 
```

从此表中获取 ColC 值

```
pkey   ColA   ColB   ColC
----   ----   ----   ----
ABC1   xbcs   qqqq   STRA
BOPQ   asdf   retf   BERR
PLKQ   32q4   xcvv   YTAR
MLAO   iasp   xclk   qppe 
```

并得到这个更新的结果

```
pkey   ColA   ColB   ColC
----   ----   ----   ----
ABC1   appl   pine   STRA
BOPQ   pine   appl   BERR
PLKQ   orng   appl   YTAR 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T07:32:57.217

试试这个方法：

```
update This_table
set This_table.ColA =  C.ColA,
    This_table.ColB =  C.ColB
from ColC C
where C.pkey = This_table.pkey 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:39:50.297

另一种选择

```
UPDATE t1
SET t1.ColC = t2.ColC
FROM dbo.test1 t1 JOIN dbo.test2 t2 ON t1.pkey = t2.pkey 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/ff230/2/2)上的演示[](http://sqlfiddle.com/#!3/ff230/2/2)

# android - 使用自定义列表视图中的按钮选择所有项目

> ID：14252800
> 
> 赞同：0
> 
> 时间：2013-01-10T07:30:01.620
> 
> 标签：android, listview, android-arrayadapter

我想使用“SelectAll”和“DeselectAll”按钮选择和取消选择列表视图中的所有项目。我为 SelectAll 编写了代码，但它抛出了`NullPointException`. 我在我的代码中找不到错误。有人可以指出我的代码中的错误。

```
final ListView list;
String[] listItems = { "Enabled" };

list = (ListView)findViewById(R.id.list);

list.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_multiple_choice, getResources().getStringArray(R.array.facilities)));
list.setItemsCanFocus(false);
list.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);                                       

list.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        CheckedTextView ctv = (CheckedTextView)arg1;
        //other functionality!                                              
    }
});

OnClickListener clickListener = new OnClickListener() {
    @Override
    public void onClick(View view) {
        int itemCount = getListView().getCount();
        System.out.print(itemCount);
        for (int i = 0; i < itemCount; i++){
            list.setItemChecked(i, true);
            //getListView().setItemChecked(i, chk.isChecked());
        }
    }
};

Button button = (Button) findViewById(R.id.selectAll);
button.setOnClickListener(clickListener); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:32:04.087

尝试使用下面的代码...

```
private OnClickListener checkAllCheckboxes = new OnClickListener()
{
   public void onClick(View v) 
   {
       ListView lv = getListView();
       int size = getListAdapter().getCount();
       if(lv.isItemChecked(0))
       {
           for(int i = 0; i<=size; i++)
           {
              lv.setItemChecked(i, false);
           }
       } 
    }
 }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:39:31.560

您可以创建一个数据类的 ArrayList

```
class data
{
boolean chekced=false 
create setter and getter of this 

} 
```

最初创建数据类的 ArrayList 在所有 arraylist 项目中检查为 false 调用 select 时将所有项目设置为 true 然后 moify adpater 并在 listView 上调用 notifyDatasetChanged

你可以这样做

# javascript - Javascript 计算不正确

> ID：14252803
> 
> 赞同：0
> 
> 时间：2013-01-10T07:30:11.317
> 
> 标签：javascript

我的 javascript 中有一个奇怪的问题，请查看下面的代码：

```
dateParts = document.getElementById('date').value.split('/');
newDays = 14;
year = dateParts[2];
month = parseInt(dateParts[1]) - 1;
day = parseInt(dateParts[0]) + parseInt(newDays);
alert(dateParts[0]+" + "+newDays+" = "+day); 
```

并假设`document.getElementById('date') = 07/01/2013`

计算将给出正确的结果 =`07 + 14 = 21`

计算工作在所有日期都很好，除了`08/01/2013`/`09/01/2013`

结果是`08 + 14 = 14`，知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T07:35:36.770

您的数字被视为八进制，因为您没有在s 中使用[基数。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)`parseInt()`你需要`parseInt()`像这样调整你的 s ：

```
month = parseInt(dateParts[1], 10) - 1;
day = parseInt(dateParts[0], 10) + parseInt(newDays, 10); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T07:36:12.503

`0`引入`08`并导致`09`JavaScript 假定该数字是八进制的。由于这些不是有效的八进制值，因此将它们视为 0。有关详细信息，请参阅[此问题。](https://stackoverflow.com/questions/850341/how-do-i-work-around-javascripts-parseint-octal-behavior)

调用时应始终使用基数`parseInt`以避免此问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T07:48:13.830

函数是parseInt(str, redix)，如果parseInt中的值以0开头，则假设基数为8，所以'09'，'08'无效，函数返回0。需要调用函数像 parseInt('08', 10) 来获得正确的值。

# c# - 我在哪里可以找到 LR(1) 解析器生成器的简单、易于理解的实现？

> ID：14252806
> 
> 赞同：1
> 
> 时间：2013-01-10T07:30:17.333
> 
> 标签：c#, parsing, lr, lr1

我在哪里可以找到 LR(1) 解析器生成器的简单（尽可能多，但不简单！）实现？

我不是在寻找性能，只是在寻找生成 LR(1) 状态（项目集）的能力。
C++、C#、Java 和 Python 都适合我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T07:30:17.333

我用 C# 写了一个非常简单的，想在这里分享。

它基本上填充了`action`查找表，它告诉您要转换到哪个状态或使用哪个规则来减少。
如果这个数是非负数，那么它表示一个新的状态；如果它是负数，那么它的补码（即`~x`）表示规则索引。

您现在需要做的就是制作一个词法分析器并使用操作表进行实际解析。

**注意 1：**为现实世界的语法生成状态可能会很慢，因此在生产代码中使用它之前，您可能需要三思而后行！

**注意 2：**您可能需要仔细检查它的正确性，因为我只检查了一点。

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using size_t = System.UInt32;

public class LRParser
{
    private string[] symbols;  // index => symbol
    private IDictionary<string, size_t> interned = new SortedDictionary<string, size_t>();  // symbol => index
    private int[/*state*/, /*lookahead*/] actions;  // If >= 0, represents new state after shift. If < 0, represents one's complement (i.e. ~x) of reduction rule.

    public LRParser(params KeyValuePair<string, string[]>[] grammar)
    {
        this.interned.Add(string.Empty, new size_t());
        foreach (var rule in grammar)
        {
            if (!this.interned.ContainsKey(rule.Key))
            { this.interned.Add(rule.Key, (size_t)this.interned.Count); }
            foreach (var symbol in rule.Value)
            {
                if (!this.interned.ContainsKey(symbol))
                { this.interned.Add(symbol, (size_t)this.interned.Count); }
            }
        }
        this.symbols = this.interned.ToArray().OrderBy(p => p.Value).Select(p => p.Key).ToArray();
        var syntax = Array.ConvertAll(grammar, r => new KeyValuePair<size_t, size_t[]>(this.interned[r.Key], Array.ConvertAll(r.Value, s => this.interned[s])));
        var nonterminals = Array.ConvertAll(this.symbols, s => new List<size_t>());
        for (size_t i = 0; i < syntax.Length; i++) { nonterminals[syntax[i].Key].Add(i); }

        var firsts = Array.ConvertAll(Enumerable.Range(0, this.symbols.Length).ToArray(), s => nonterminals[s].Count > 0 ? new HashSet<size_t>() : new HashSet<size_t>() { (size_t)s });

        int old;
        do
        {
            old = firsts.Select(l => l.Count).Sum();
            foreach (var rule in syntax)
            {
                foreach (var i in First(rule.Value, firsts))
                { firsts[rule.Key].Add(i); }
            }
        } while (old < firsts.Select(l => l.Count).Sum());

        var actions = new Dictionary<int, IDictionary<size_t, IList<int>>>();
        var states = new Dictionary<HashSet<Item>, int>(HashSet<Item>.CreateSetComparer());
        var todo = new Stack<HashSet<Item>>();
        var root = new Item(0, 0, new size_t());
        todo.Push(new HashSet<Item>());
        Closure(root, todo.Peek(), firsts, syntax, nonterminals);
        states.Add(new HashSet<Item>(todo.Peek()), states.Count);
        while (todo.Count > 0)
        {
            var set = todo.Pop();
            var closure = new HashSet<Item>();
            foreach (var item in set)
            { Closure(item, closure, firsts, syntax, nonterminals); }
            var grouped = Array.ConvertAll(this.symbols, _ => new HashSet<Item>());
            foreach (var item in closure)
            {
                if (item.Symbol >= syntax[item.Rule].Value.Length)
                {
                    IDictionary<size_t, IList<int>> map;
                    if (!actions.TryGetValue(states[set], out map))
                    { actions[states[set]] = map = new Dictionary<size_t, IList<int>>(); }
                    IList<int> list;
                    if (!map.TryGetValue(item.Lookahead, out list))
                    { map[item.Lookahead] = list = new List<int>(); }
                    list.Add(~(int)item.Rule);
                    continue;
                }
                var next = item;
                next.Symbol++;
                grouped[syntax[item.Rule].Value[item.Symbol]].Add(next);
            }
            for (size_t symbol = 0; symbol < grouped.Length; symbol++)
            {
                var g = new HashSet<Item>();
                foreach (var item in grouped[symbol])
                { Closure(item, g, firsts, syntax, nonterminals); }
                if (g.Count > 0)
                {
                    int state;
                    if (!states.TryGetValue(g, out state))
                    {
                        state = states.Count;
                        states.Add(g, state);
                        todo.Push(g);
                    }

                    IDictionary<size_t, IList<int>> map;
                    if (!actions.TryGetValue(states[set], out map))
                    { actions[states[set]] = map = new Dictionary<size_t, IList<int>>(); }
                    IList<int> list;
                    if (!map.TryGetValue(symbol, out list))
                    { map[symbol] = list = new List<int>(); }

                    list.Add(state);
                }
            }
        }

        this.actions = new int[states.Count, this.symbols.Length];
        for (int i = 0; i < this.actions.GetLength(0); i++)
        {
            for (int j = 0; j < this.actions.GetLength(1); j++)
            { this.actions[i, j] = int.MinValue; }
        }
        foreach (var p in actions)
        {
            foreach (var q in p.Value)
            { this.actions[p.Key, q.Key] = q.Value.Single(); }
        }

        foreach (var state in states.OrderBy(p => p.Value))
        {
            Console.WriteLine("State {0}:", state.Value);
            foreach (var item in state.Key.OrderBy(i => i.Rule).ThenBy(i => i.Symbol).ThenBy(i => i.Lookahead))
            {
                Console.WriteLine(
                    "\t{0}: {1} \xB7 {2} | {3} →  {0}",
                    this.symbols[syntax[item.Rule].Key],
                    string.Join(" ", syntax[item.Rule].Value.Take((int)item.Symbol).Select(s => this.symbols[s]).ToArray()),
                    string.Join(" ", syntax[item.Rule].Value.Skip((int)item.Symbol).Select(s => this.symbols[s]).ToArray()),
                    this.symbols[item.Lookahead] == string.Empty ? "\x04" : this.symbols[item.Lookahead],
                    string.Join(
                        ", ",
                        Array.ConvertAll(
                            actions[state.Value][item.Symbol < syntax[item.Rule].Value.Length ? syntax[item.Rule].Value[item.Symbol] : item.Lookahead].ToArray(),
                            a => a >= 0 ? string.Format("state {0}", a) : string.Format("{0} (rule {1})", this.symbols[syntax[~a].Key], ~a))));
            }
            Console.WriteLine();
        }
    }

    private static void Closure(Item item, HashSet<Item> closure /*output*/, HashSet<size_t>[] firsts, KeyValuePair<size_t, size_t[]>[] syntax, IList<size_t>[] nonterminals)
    {
        if (closure.Add(item) && item.Symbol >= syntax[item.Rule].Value.Length)
        {
            foreach (var r in nonterminals[syntax[item.Rule].Value[item.Symbol]])
            {
                foreach (var i in First(syntax[item.Rule].Value.Skip((int)(item.Symbol + 1)), firsts))
                { Closure(new Item(r, 0, i == new size_t() ? item.Lookahead : i), closure, firsts, syntax, nonterminals); }
            }
        }
    }

    private struct Item : IEquatable<Item>
    {
        public size_t Rule;
        public size_t Symbol;
        public size_t Lookahead;

        public Item(size_t rule, size_t symbol, size_t lookahead)
        {
            this.Rule = rule;
            this.Symbol = symbol;
            this.Lookahead = lookahead;
        }

        public override bool Equals(object obj) { return obj is Item && this.Equals((Item)obj); }

        public bool Equals(Item other)
        { return this.Rule == other.Rule && this.Symbol == other.Symbol && this.Lookahead == other.Lookahead; }

        public override int GetHashCode()
        { return this.Rule.GetHashCode() ^ this.Symbol.GetHashCode() ^ this.Lookahead.GetHashCode(); }
    }

    private static IEnumerable<size_t> First(IEnumerable<size_t> symbols, IEnumerable<size_t>[] map)
    {
        foreach (var symbol in symbols)
        {
            bool epsilon = false;
            foreach (var s in map[symbol])
            {
                if (s == new size_t()) { epsilon = true; }
                else { yield return s; }
            }
            if (!epsilon) { yield break; }
        }
        yield return new size_t();
    }

    private static KeyValuePair<K, V> MakePair<K, V>(K k, V v) { return new KeyValuePair<K, V>(k, v); }

    private static void Main(string[] args)
    {
        var sw = Stopwatch.StartNew();
        var parser = new LRParser(
            MakePair("start", new string[] { "exps" }),
            MakePair("exps", new string[] { "exps", "exp" }),
            MakePair("exps", new string[] { }),
            MakePair("exp", new string[] { "INTEGER" })
        );
        Console.WriteLine(sw.ElapsedMilliseconds);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T19:43:42.607

[LRSTAR 9.1](http://lrstar.tech)是最小的 LR(1) 和 LR(*) 解析器生成器。您可以使用它来验证您的解析器生成器是否提供了正确的状态，方法是使用选项'/s'。LRSTAR 已经针对[HYACC](http://hyacc.sourceforge.net)进行了测试，发现它给出了正确的 LR(1) 状态。LRSTAR 和 6 个 Microsoft Visual Studio 项目提供了 20 种语法。

# php - &= 在偶数上产生 false

> ID：14252810
> 
> 赞同：-1
> 
> 时间：2013-01-10T07:30:25.190
> 
> 标签：php, operators, boolean, variable-assignment

我偶然发现了一些奇怪的东西，我在任何地方都找不到任何答案。&= 似乎将偶数解释为假。对此是否有合理的解释，或者这是一个错误？

这个片段重现了这个问题，至少在我的设置中：

```
$nums = array(1,2,3,4,5,6,7,8,9,10);
$var1 = true;
$var2 = true;
foreach ($nums as $num) {
    // Test
    $var1 &= $num;
    $var2 = $var2 && $num;
    echo "$var1, $var2<br />";
    //Reset
    $var1 = true;
    $var2 = true;
} 
```

系统：PHP 版本 5.3.10-1ubuntu3.4

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T07:34:27.143

如果我正确理解了您的问题，那么您将 Bi [**​​twise AND ( `&`)**](http://php.net/manual/en/language.operators.bitwise.php)与[**Logical AND ( `&&`)**](http://php.net/manual/en/language.operators.logical.php)混淆了。不，它们不一样。

如果您检查数字的二进制表示，则可以最好地理解按位运算。以下是偶数/奇数的情况：

```
/* 1 & 0 */ 00000001b & 00000000b // 00000000b
/* 1 & 1 */ 00000001b & 00000001b // 00000001b
/* 1 & 2 */ 00000001b & 00000010b // 00000000b
/* 1 & 3 */ 00000001b & 00000011b // 00000001b 
```

对于逻辑运算，您只需要查看操作数的*真实性*：

```
1 && 0 // false -- 0 is falsy
1 && 1 // true  -- any non-zero number is truthy
1 && 2 // true
1 && 3 // true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:33:02.470

您正在对数字进行按位与运算。

二进制数是...

```
1  => 0001
2  => 0010
3  => 0011
4  => 0100
5  => 0101
6  => 0110
7  => 0111
8  => 1000
9  => 1001
10 => 1010 
```

意识到当您增加数字时，最低有效位总是在变化，并且由于您正在与 进行与`1`运算，因此看起来偶数是假的，因为结果是`0`( `0000 & 1`is `0`)。

# c# - 如何从打开文件对话框中读取文件并添加到 URL 以使用 wmplib 播放？

> ID：14252811
> 
> 赞同：0
> 
> 时间：2013-01-10T07:30:47.327
> 
> 标签：c#, visual-studio-2010

我正在制作一个简单的音乐播放器，实现 WMPlib 来播放媒体文件....我正在尝试使用打开文件对话框打开文件...对话框出现并且能够选择文件但是当我尝试时出现异常将文件名分配给 Player.URL

在线

```
Player.URL = openFileDialog1.FileName; 
```

错误说

你调用的对象是空的。谁能给我一个关于如何将文件名分配给 player.URL 的线索

完整代码如下......

```
using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;

namespace WindowsFormsApplication2
{
    public partial class Form1 : Form
    {

        WMPLib.WindowsMediaPlayer Player;
        public Form1()
        {
            InitializeComponent();
        }

        private void PlayFile(String url)
        {
            Player = new WMPLib.WindowsMediaPlayer();
            Player.PlayStateChange +=
                new WMPLib._WMPOCXEvents_PlayStateChangeEventHandler(Player_PlayStateChange);
            Player.MediaError +=
                new WMPLib._WMPOCXEvents_MediaErrorEventHandler(Player_MediaError);
            Player.URL = url;
            Player.controls.play();
        }

        private void Player_PlayStateChange(int NewState)
        {
            if ((WMPLib.WMPPlayState)NewState == WMPLib.WMPPlayState.wmppsStopped)
            {
                this.Close();
            }
        }

        private void Player_MediaError(object pMediaObject)
        {
            MessageBox.Show("Cannot play media file.");
            this.Close();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            openFileDialog1.Filter = "(mp3,wav,mp4,mov,wmv,mpg)|*.mp3;*.wav;*.mp4;*.mov;*.wmv;*.mpg|all files|*.*";
            openFileDialog1.ShowDialog(); 

        }

        private void button2_Click(object sender, EventArgs e)
        {
            PlayFile(Player.URL);
        }

        private void openFileDialog1_FileOk(object sender, CancelEventArgs e)
        {
            MessageBox.Show(openFileDialog1.FileName);
            Player.URL = openFileDialog1.FileName;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:37:53.347

尝试像这样使用 openFileDialog1：

```
DialogResult result = openFileDialog1.ShowDialog();

if (result == DialogResult.OK)
{
   Player.URL = openFileDialog1.FileName;
} 
```

在 button1_Click()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:07:26.710

确保在使用之前创建*WMPLib.WindowsMediaPlayer的实例。*现在，您似乎正在单击“打开文件”按钮并尝试将返回的文件名分配给空对象。

# java - 如何从 4 中打印 1 个随机字符串？

> ID：14252814
> 
> 赞同：-4
> 
> 时间：2013-01-10T07:30:56.417
> 
> 标签：java, eclipse, string

```
String haiku1 = "As the wind does blow\nAcross the trees, I see the\nBuds blooming in May."; 
String haiku2 = "I walk across sand\nAnd find myself blistering\nIn the hot, hot heat."; 
String haiku3 = "Falling to the ground,\nI watch a leaf settle down\nIn a bed of brown.";  
String haiku4 = "It’s cold and I wait\nFor someone to shelter me\nAnd take me from here."; 
```

我需要从上面列出的四个中打印一个随机字符串。我怎么能这样做？我知道我必须使用随机。谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T07:33:42.903

最好把你的字符串放在一个数组中。

```
String haiku[] = new String[4];
haiku[0] = "/*your string*/";
haiku[1] = "/*your string*/";
haiku[2] = "/*your string*/";
haiku[3] = "/*your string*/"; 
```

然后从 0-3 生成随机数以访问数组的索引。

```
Random randomizer = new Random();         //import java.util.Random;
int index = randomizer.nextInt(4);
System.out.println("Generated random string: " + haiku[index]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T07:35:35.257

像这样 -

```
 ...
    int nextInt = new Random().nextInt(4);
    switch (nextInt) {
    case 1:
        System.out.println(haiku1);
        break;
    case 2:
        System.out.println(haiku2);
        break;
    case 3:
        System.out.println(haiku3);
        break;
    case 4:
        System.out.println(haiku4);
        break;

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T07:32:17.407

创建上述字符串的数组并使用[`java.util.Random`](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html)类为数组索引生成随机数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T07:36:49.867

你应该把这个字符串放在一个数组中。

如需进一步参考，请查看以下链接。 [从 ArrayList 中检索随机项](https://stackoverflow.com/questions/5034370/retrieving-a-random-item-from-arraylist)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T07:37:27.000

生成一个随机数，然后访问存储在数组中特定位置的值：

```
 Random r = new Random();
  int index = r.nextInt(4); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-10T07:37:40.907

我会这样做：

```
String[] myArray = {haiku1,haiku2,haiku3,haiku4};
Random rand = new Random();
int randomnum = rand.nextint(4);
System.out.println(myArray[randomnum]); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-10T07:37:52.643

```
 String haiku1 = ("As the wind does blow\nAcross the trees, I see the\nBuds blooming in May.");
    String haiku2 = ("I walk across sand\nAnd find myself blistering\nIn the hot, hot heat.");
    String haiku3 = ("Falling to the ground,\nI watch a leaf settle down\nIn a bed of brown.");
    String haiku4 = ("It’s cold and I wait\nFor someone to shelter me\nAnd take me from here.");

    String[] array={haiku1,haiku2,haiku3,haiku4};

    Random rndm=new Random();

    System.out.println( "Generated Random String: "+array[rndm.nextInt((array.length-1) - 0 + 1) + 0]); 
```

# ruby-on-rails-3 - Spork 和 Guard EADDRINUSE

> ID：14252821
> 
> 赞同：0
> 
> 时间：2013-01-10T07:31:48.720
> 
> 标签：ruby-on-rails-3, rspec-rails, guard, spork

我正在构建一个 Rails 应用程序并使用 Spork/Guard/Rspec 进行测试。

我在 mac (10.6.8) 上——这是我正在使用的 gem：

```
gem "rspec-rails", "~> 2.12.1"   
gem "guard-rspec", "~> 2.3.3"   
gem "guard-spork", "~> 1.4.1"   
gem "spork", "~> 0.9.2"   
gem 'rb-fsevent', '~> 0.9.1', :require => false   
gem "growl", "~> 1.0.3"  
gem 'capybara', '1.1.2' 
```

当我编辑路由文件时，它应该重新启动 spork 服务器，这是我的 Guardfile 中的行：

```
guard 'spork', :rspec_env => { 'RAILS_ENV' => 'test' }, :foreman => true do
  watch('config/routes.rb')
end 
```

但是最近，当我添加新路线时，我刚刚开始收到以下错误：

```
Loading Spork.prefork block...
Rack::File headers parameter replaces cache_control after Rack 1.5.
Address already in use - bind(2) (Errno::EADDRINUSE)
/Users/cyrus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/drb/drb.rb:861:in `initialize'
/Users/cyrus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/drb/drb.rb:861:in `open'
/Users/cyrus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/drb/drb.rb:861:in `open_server'
/Users/cyrus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/drb/drb.rb:759:in `block in open_server'
/Users/cyrus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/drb/drb.rb:757:in `each'
/Users/cyrus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/drb/drb.rb:757:in `open_server'
/Users/cyrus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/drb/drb.rb:1342:in `initialize'
/Users/cyrus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/drb/drb.rb:1624:in `new'
/Users/cyrus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/drb/drb.rb:1624:in `start_service'
/Users/cyrus/.rvm/gems/ruby-1.9.3-p125@h/gems/spork-0.9.2/lib/spork/server.rb:29:in `listen'
/Users/cyrus/.rvm/gems/ruby-1.9.3-p125@h/gems/spork-0.9.2/lib/spork/server.rb:20:in `run'
/Users/cyrus/.rvm/gems/ruby-1.9.3-p125@h/gems/spork-0.9.2/lib/spork/runner.rb:75:in `run'
/Users/cyrus/.rvm/gems/ruby-1.9.3-p125@h/gems/spork-0.9.2/lib/spork/runner.rb:10:in `run'
/Users/cyrus/.rvm/gems/ruby-1.9.3-p125@h/gems/spork-0.9.2/bin/spork:10:in `<top (required)>'
/Users/cyrus/.rvm/gems/ruby-1.9.3-p125@h/bin/spork:23:in `load'
/Users/cyrus/.rvm/gems/ruby-1.9.3-p125@h/bin/spork:23:in `<main>' 
```

通常当 spork 启动时，我会得到以下信息：

```
Loading Spork.prefork block...
Rack::File headers parameter replaces cache_control after Rack 1.5.
Spork is ready and listening on 8989! 
```

如何避免此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T22:53:30.350

我来到这里遇到与OP相同的问题。

在进入“错误是错误”帖子的兔子洞并检查发生故障的代码行之后，我沮丧地重新启动。执行此操作后，我意识到端口上的锁定可能来自于我已注销上一个桌面会话这一事实，并且 Spork DRb 服务器在关闭时挂起 RubyMine，所以也许这就是端口打开的原因。

果然，我现在可以启动 Spork 服务器了。

我添加了这个，以便其他面临这个问题的人可以考虑它是否符合他们的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T01:53:21.753

通过删除`:foreman => true`in`Guardfile`我能够摆脱这个问题。现在我没有`.env`在我的测试中有意义地使用我的文件中的值，所以应该没问题，但我在 Github 上提交了一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:04:52.970

看起来这个错误是一个错误：[https ://github.com/rails/rails/pull/8812](https://github.com/rails/rails/pull/8812)

# java - java：使用 hashmap 或其他 java 集合创建查找表？

> ID：14252822
> 
> 赞同：3
> 
> 时间：2013-01-10T07:31:51.130
> 
> 标签：java, collections, lookup

[扩展这个问题](https://stackoverflow.com/q/14236601/1503130)，我接受了一个答案，它说在这种情况下**使用查找表或哈希图**，因为它是**处理多个条件的更好构造**。

当前构造。

> **类来存储消息。**

```
 public class ProgressMessages 
    {
     public static String msg1="Welcome here .....";
     .
     .
     .
     //around 100 more similar static variables.
    } 
```

> **条件并显示来自上述类的正确消息。**

```
 int x=calculatedVal1(m,n); 
    int y=calculatedVal2(o,q);

    SimpleDateFormat formater=new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    Date d=new Date();
    String s=formater.format(d);

    try {
          long d1 = formater.parse("2013-01-10 13:53:01").getTime();
          long d2=formater.parse(s).getTime();
          totaldays=Math.abs((d1-d2)/(1000*60*60*24));
         } catch (ParseException e) {
            e.printStackTrace();
         }

    if(totaldays<7&&x<20)
     {
      System.out.println("my message...1"+ProgressMessages.msg1); 
     }

    else if(totaldays<7&&x>10&&y<20)
    {
      System.out.println("my message...2"+ProgressMessages.msg2);
    }   
    ....
    //obvioulsy 100 more else-if's to display 100 messages. 
```

> 我实际上想知道在这种情况下查找表有什么帮助？

**它应该如何在 java Hashmap/Hashtable 等中实现，有什么好处呢？**

- - 编辑 - -

我要去@assylias anwer，因为它更干净。但是如果我使用 Enums，那么我就有了解决办法。

为了描述大局...

即消息列表就像...

1) "Welcome," + nameOfUser+"your success rate is"+ succssRate +"%"+ earlier it was +earlier +"%".

2) "Oh yes.."+ succssRate +"%"+ improved from +earlier +"%".

3.) "Now you should focus on "+exerCiseName.

How could I do this using Enumeration as it has fixed String data. Could I make different constructors? How any example with the edit code to assylas answer?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T07:52:25.213

You could use an enum, assuming the list of messages is known at compile time. The advantages are that each message is now responsible for holding its condition, and the calling code will be much simpler.

```
public enum Message {

    MESSAGE1("Welcome") {
        @Override
        boolean isApplicable(long totalDays, int x, int y) {
            return totalDays < 7 && x < 20;
        }
    },
    MESSAGE2("Bye bye") {
        @Override
        boolean isApplicable(long totalDays, int x, int y) {
            return totalDays < 7 && x > 10 && y < 20;
        }
    };

    private String msg;

    Message(String msg) {
        this.msg = msg;
    }

    abstract boolean isApplicable(long totalDays, int x, int y);

    public static String lookupMessage(long totalDays, int x, int y) {
        for (Message m : Message.values()) {
            if (m.isApplicable(totalDays, x, y)) {
                return m.msg;
            }
        }
        throw new IllegalArgumentException();
    }
} 
```

Now in your calling code, no more if / else if, just one line of code:

```
System.out.println(Message.lookupMessage(1, 2, 3)); 
```

Note 1: This is not as efficient as using a Map as the lookup is an O(n) operation, but because n is 100 or so it should not be a significant performance penalty. And it is more readable and maintainable than the solution proposed in the other answer.

Note 2: You could even put the conditions / messages in a flat file, read the file at runtime and use a scripting engine to eval each condition at runtime. It would be slightly slower (but we are talking about sub-milliseconds here) but would remove all the clutter from your code and put it in a configuration file.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T13:17:09.233

I would use a

```
Map<Criteria, Message> lookupTable; 
```

where `Criteria` is a class you write (and override `equals()` and `hashCode()`), representing the criteria to choose a message.

`Message` is also a class you write, which encapsulates the actual message `String` but also provides you some functionality to set the variables.

With this solution you have to initialize the map once at the beginning of your program and can always use it like this:

```
Criteria criteria = ... // gather your criteria somehow
Message msg = lookupTable.getMessage(criteria);
// use your variable setting methods here
String message = msg.toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T07:37:58.683

If you have so many conditions, you cant avoid putting those conditions some where in the code. The advantages of using lookup table is 1)Easy to implement. 2)Flexible.If you want to change the value of some message in future, you can go to looktable class and change.

# iphone - UILabel 属性转储

> ID：14252825
> 
> 赞同：1
> 
> 时间：2013-01-10T07:32:06.837
> 
> 标签：iphone, ios, objective-c, xcode, uilabel

我有一个`UILabel`带有属性的设置`IB`（如自定义字体、阴影颜色、文本颜色等）。我想打印它的所有属性，`UILabel`以使我能够在属性内的不同屏幕上使用同一组`UITableViewCell` `textLabel`属性。如何打印我在第一个屏幕中设置的所有属性以将其与`textLabel`内部属性一起使用`UITableViewCell`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:58:49.090

创建一个函数来设置第一个屏幕上标签的属性。

```
-(void) setLabelProperties: (UILabel *) myLabel{
myLabel.textColor = [UIColor redColor];
//set other properties
} 
```

在您的设备上调用相同的方法

```
- (UITableViewCell*)tableView:(UITableView *)table cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

setLabelProperties(cell.textLabel);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T07:43:52.357

我找到了一个`Cmd-C`并从一个 Interface Builder XIB`Cmd-V`复制并粘贴`UILabel`到另一个通常也会复制属性。

我想同样的作品也适用于 Storyboard。从一个复制`ViewController`到另一个。

# regex - regsub -all 特定替换为空格

> ID：14252826
> 
> 赞同：1
> 
> 时间：2013-01-10T07:32:10.990
> 
> 标签：regex, tcl

我正在使用 regsub 将 (T|Z) 替换为空格

```
set date(1,2) "2012-09-14T00:00:00Z"
regsub -all {(T|Z)} $date(1,2) " " date(1,2)
puts $date(1,2) 
```

但是当我使用

```
regsub -all {(T|Z)} $date(1,2) "\s" date(1,2) 
```

它正在用 \s 替换 T|Z 。

如何将单个空格字符映射到“\s”以使代码清晰可见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T12:45:03.953

替换`"\s"`为`" "`

*   `\s`: 可能意味着很多事情，具体取决于上下文。在正则表达式的上下文中，如果正则表达式解释器知道它，它应该在 unix 类型的程序上表示“任何空白字符（空格或制表符，或任何其他在当前语言环境和 LC_LANG 中都可以作为空白字符） ”。所以它会**匹配**其中任何一个。但是，在“替换”方面，无法知道需要哪个（空格？制表符？另一个？）因此无法在该方面进行解释，并且 tcl 将其“按原样”放置。

# java - Jboss 中的死信服务

> ID：14252836
> 
> 赞同：0
> 
> 时间：2013-01-10T07:32:40.040
> 
> 标签：java, jboss, dead-letter

我们已经在 J​​boss SOA 平台上部署了应用程序。从性能上看，我们已经注释掉了 jboss-esb.xml 中的 DeadLetterService。因此，当任何异常发生或消息未传递给第 3 方时，它不应该转到 DLQ。但是现在我们收到以下错误

```
********************************
2012-12-18 18:02:30,996 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/ServiceName].[HttpGateway]] (http-0.0.0.0-9032-14) Servlet.service() for servlet HttpGateway threw exception
org.jboss.soa.esb.listeners.message.MissingServiceException: Registry details for service [JBossESB-Internal:DeadLetterService] could not be determined from the registry.
        at org.jboss.soa.esb.client.ServiceInvoker.post(ServiceInvoker.java:348)
******************************** 
```

将响应发送给第 3 方大约需要 5 分钟。我们正在尝试找出延迟的原因。

谁能知道这个问题与“DeadLetterService”有什么关系？或者我怎样才能重现这个问题？或者为什么要延迟 5 分钟？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T06:46:37.577

我不确定出于性能原因关闭 DeadLetterService 是什么意思，但由于对该服务的调用在 ServiceInvoker 中是硬编码的，因此完全删除该服务并不是一个好主意。

您可以通过属性关闭它的使用，无论是全局还是每条消息。

> DeadLetterService 默认打开，但是在 jbossesb-properties.xml 中，您可以将 org.jboss.soa.esb.dls.redeliver 设置为 false 以关闭它的使用。如果你想在每条消息的基础上控制它，那么在特定的消息属性中相应地设置 org.jboss.soa.esb.dls.redeliver 属性。Message 属性将优先于任何全局设置使用。默认是使用配置文件中设置的值。

[https://access.redhat.com/knowledge/docs/en-US/JBoss_Enterprise_SOA_Platform/5/html/ESB_Programmers_Guide/chap-SOA_ESB_Programmers_Guide-Advanced_Topics.html#idp105205​​76](https://access.redhat.com/knowledge/docs/en-US/JBoss_Enterprise_SOA_Platform/5/html/ESB_Programmers_Guide/chap-SOA_ESB_Programmers_Guide-Advanced_Topics.html#idp10520576)

# c++ - 如果我不实例化类，模板类构造函数中的 static_assert 是否应该触发？

> ID：14252840
> 
> 赞同：1
> 
> 时间：2013-01-10T07:33:00.957
> 
> 标签：c++, c++11, static-assert

> **可能重复：**
> [C++0x static_assert 和模板实例化](https://stackoverflow.com/questions/5246049/c0x-static-assert-and-template-instantiation)

由于以下原因，以下代码无法在 GCC 中编译`static_assert`：

```
#include <ratio>
#include <iostream>

template<typename T>
class A
{
public:
    const static T a = 10;
    A() 
    {
        static_assert(false, "Can't instantiate this");
    }
};

int main() 
{
    A<int>::a;
    return 0;
} 
```

( [http://ideone.com/3opRfQ](http://ideone.com/3opRfQ) )

但是，相同的代码在 Visual Studio 2012 中编译。如果我实际实例化该类，我只会收到编译错误（此外，如果我将类设为非模板化，则会触发 static_assert 而不实例化该类）。

哪个编译器的行为符合标准？我认为是 GCC，但我在标准中看不到明确的确认。

# video - mpeg streamclip 转换为快动作（时间流逝）

> ID：14252842
> 
> 赞同：3
> 
> 时间：2013-01-10T07:33:01.707
> 
> 标签：video, converter

我有一个 10 分钟长的视频。我想把它转换成快动作（慢动作的对立面。又名时间流逝、加速动作、减速），这样观看它的人只需 2.5 分钟即可观看。所以这将是 4 倍（？）的加速。我在 Mac 上，使用 mpeg streamclip。该视频是使用 Screenflick 制作的截屏视频（有很多等待时间），将其保存为 .mov。

需要明确的是，我不想以快进或 4 倍的速度观看它，我想将其导出，这样每个人都可以使用 4 倍（他们的玩家以 1 倍的速度播放）。似乎应该有一些帧速率设置，但我无法弄清楚。

这是我能找到的最接近的东西：[如何通过丢帧来加速视频？](https://stackoverflow.com/questions/1334975/how-can-i-speed-up-a-video-by-dropping-frames)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T15:54:30.783

我假设您已经阅读了此[http://blog.grio.com/2012/01/fast-and-slow-motion-video-with-ffmpeg.html](http://blog.grio.com/2012/01/fast-and-slow-motion-video-with-ffmpeg.html)

```
ffmpeg -i input.mp4 -vf “setpts=0.25*PTS” output.mp4 
```

官方文档： http: [//ffmpeg.org/trac/ffmpeg/wiki/How%20to%20speed%20up%20/%20slow%20down%20a%20video](http://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20speed%20up%20/%20slow%20down%20a%20video)

# c# - 将文本框值传递给 gridview

> ID：14252844
> 
> 赞同：1
> 
> 时间：2013-01-10T07:33:21.517
> 
> 标签：c#, asp.net, gridview

我在页面 aspx 中有 gridview 控件和文本框 + 按钮控件。

我想通过单击按钮将文本框值传递给gridview。

```
<asp:GridView ID="gvName" runat="server" ViewStateMode="Enabled">
<Columns>
<asp:TemplateField>
<ItemTemplate>
<asp:Label ID="lblName" runat="server"></asp:Label>
</ItemTemplate>
</asp:TemplateField>
</Columns>
</asp:GridView> 
```

并使用此代码：

```
protected void btnAddName_Click(object sender, ImageClickEventArgs e)
    {
      foreach (GridViewRow row in gvName.Rows)
        {
            if ((Label)row.FindControl("lblName") is Label)
            {
                ((Label)row.FindControl("lblName")).Text = txtName.Text;
            }
        }
     } 
```

但它不行。：-（ 请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T07:38:47.943

```
Create a rowdatabound command and place the below code. 

protected void gvName_RowDataBound(object sender, GridViewRowEventArgs e)
{
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            Label lblName = (Label)row.FindControl("lblName");         
            lblName.Text = txtName.Text;  
        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T07:36:22.423

如果网格行具有带有`id`lblName 的标签，那么您将从行中获取它，您无需再次检查它。

```
foreach (GridViewRow row in gvName.Rows)
{
    Label lblName = (Label)row.FindControl("lblName");         
    lblName.Text = txtName.Text;            
} 
```

**注意**：如果您在 thr gridview 中没有行，那么您将无法获得标签中的值。您需要确保它们是网格中的行。

# ios - UICollectionView 内容框架在模拟器上显示正确，在设备上显示错误

> ID：14252848
> 
> 赞同：2
> 
> 时间：2013-01-10T07:33:34.837
> 
> 标签：ios, ios6, ios-simulator, uicollectionview

我已经在这个问题上工作了一周，但我迷路了。我有一个具有自定义布局的以编程方式创建的 UICollectionViewController。这是我的根 UIViewController 的子视图。在任何分辨率的模拟器中，视图都正确显示。但在我的 iPhone 4s 上，视图似乎大小合适，但内容框架并未完全填满 UICollectionView 框架。

有没有人对我如何进一步调试有任何提示或提供有关此问题可能是什么的任何提示？

# android - 在设置中启用选择声音

> ID：14252853
> 
> 赞同：0
> 
> 时间：2013-01-10T07:33:56.537
> 
> 标签：android, android-layout, android-intent

如何以编程方式在我们的手机默认设置中启用/禁用选择声音。（如按钮单击、布局单击声音等）guyyzz 帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T07:49:06.883

```
<uses-permission android:name="android.permission.WRITE_SETTINGS"/> 
```

***禁用声音效果*** [putInt()](http://developer.android.com/reference/android/provider/Settings.System.html#putInt%28android.content.ContentResolver,%20java.lang.String,%20int%29)

```
Settings.System.putInt(getContentResolver(), Settings.System.SOUND_EFFECTS_ENABLED, 0); //To disable 
```

***启用声音效果***

```
Settings.System.putInt(getContentResolver(), Settings.System.SOUND_EFFECTS_ENABLED, 1); //To Enable 
```

# php - 默认值正在数据库中提交

> ID：14252856
> 
> 赞同：0
> 
> 时间：2013-01-10T07:34:06.893
> 
> 标签：php, html

我正在使用这个文本区域，以便用户可以在这里写一些文本，我正在使用`onblur`，`onfocus` 所以当用户单击默认文本时它不显示，我提供一些消息作为默认值，问题是当用户写一些东西时这个文本区域比默认值也存储在数据库中，输入了其他文本，错误在哪里？我在这个变量中取值`$nature_speci`

```
 $nature_speci = trim(mysql_prep($_POST['other_naturespeci'])); 
```

这是文本区域的 html 代码

```
<textarea id="other_naturespeci" name="other_naturespeci" size="30" maxlength="100"  onfocus="if(this.value==this.defaultValue)this.value='';" onblur="if(this.value=='')this.value=this.defaultValue;">Assignment Specification in Few Words.<?php if (isset($errors)) { echo $_POST['other_naturespeci'];}elseif(isset($_GET['other_naturespeci'])){ echo $_GET['other_naturespeci'];} ?></textarea> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:41:40.810

只需使用占位符而不是 onblur 和 onfocus

```
<textarea id="other_naturespeci" name="other_naturespeci" size="30" maxlength="100"  placeholder="defaulttext">Assignment Specification in Few Words.<?php if (isset($errors)) { echo $_POST['other_naturespeci'];}elseif(isset($_GET['other_naturespeci'])){ echo $_GET['other_naturespeci'];} ?>
</textarea> 
```

这就是html5的优势。看[链接](http://www.w3schools.com/html5/att_input_placeholder.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:42:11.810

而不是使用`onblur`以及`onfocus`为什么不使用新的 HTML5 属性`placeholder`。目前除 IE 之外的所有浏览器都支持它。

如果您还想在 IE 中显示它，则可以使用 javascript shim 来显示它。例如，如果您使用 jQuery，则可以使用[https://github.com/parndt/jquery-html5-placeholder-shim](https://github.com/parndt/jquery-html5-placeholder-shim)

# php - PHP MYSQL_RESULT 数组问题

> ID：14252858
> 
> 赞同：1
> 
> 时间：2013-01-10T07:34:19.817
> 
> 标签：php, mysql

**我有一个变量叫**

```
$staff=mysql_query($aSQL, $staffDirectory) or die(mysql_error()); 
```

**列表的显示在这里：**

```
<table>
<?php if(!empty($row_staff)){  do { ?>
 <tr>
<td rowspan="3"><?php 
if( !isset($row_staff['photo'])){
        echo "<img width='100px' src='images/user_default.PNG'/>";
    }else{
        echo "<img width='100px' src='".$row_staff['photo']."'/>"; 
    }
?></td>
<td align="left"><h4 ><span class="staffList"><?php echo $row_staff['name_eng']; ?><br />
</span></h4>
 <h4> <span class="staffList"><?php echo $row_staff['name_chi']; ?>    </span></h4></td>
<td rowspan="3"><span class="staffList"><img src="images/phone32.png" alt="" width="32" height="32" />  <?php echo $row_staff['contact_no']; ?><br />
    <img src="images/printer32.png" alt="" width="32" height="32" />  <?php echo $row_staff['fax_no']; ?><br />
    <img src="images/mail32.png" alt="" width="32" height="32" />  <?php echo $row_staff['email']; ?></span></td>
</tr>
  <tr>      
    <td>
  <p><span class="staffList"><?php echo $row_staff['groupname']; ?><br />
    <?php echo $row_staff['department']; ?><br />
    Joined on : 
    <?php echo $row_staff['date_join']; ?></span></p></td>
</tr>
  <tr>
  <td valign="middle"><p>&nbsp;</p></td>
  </tr>
  <?php } while ($row_staff = mysql_fetch_assoc($staff));} ?> 
```

我使用这个五线谱来显示一个列表，所以默认情况下列表只会显示所有内容。当我执行一些排序或搜索时，我将更改此人员变量并且我的列表将得到更新。

我现在的问题是我想将数组导出到 XLS 文件，除了数组之外一切都很好。

**这是代码**

```
 $i=0;
        for($x = 0;$x<mysql_num_rows($staff);$x++){
        //do{
            $i = $x+2;
            mysql_data_seek($staff,$x);
            $array = mysql_fetch_row($staff); 
```

这个 $staff 变量与初始变量保持一致，因此无论我如何执行搜索和排序，显示列表都会显示结果，但是当我尝试检索此变量时，它仍然是显示所有内容的初始变量。所以，我真的很困惑，我该如何解决呢？我真的很困惑...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:26:07.727

您 `$row_staff`在获取 sql 的 while 循环之前使用。

你不会得到任何数据，它将是未定义的变量`$row_staff`

# android - Android GCM：为什么有时会失败？

> ID：14252860
> 
> 赞同：4
> 
> 时间：2013-01-10T07:34:20.933
> 
> 标签：android, google-cloud-messaging

在我的应用程序中遇到过这种情况，有时 GCM 注册发生得很快，有时需要 1 小时以上才能注册。

我试过研究它，但我没有找到任何解释。根据我的研究，其他人也经历过这种情况。有谁知道为什么？

# python - python - 如何对python列表中的元素进行汇总？

> ID：14252869
> 
> 赞同：0
> 
> 时间：2013-01-10T07:34:50.797
> 
> 标签：python, list, iteration

> **可能重复：**
> [对元组列表中的每个值求和](https://stackoverflow.com/questions/14180866/sum-each-value-in-a-list-of-tuples)

我需要帮助解决这个问题，提前感谢您的合作。我想得到这个：

```
result=[12,15,18] 
```

从

```
a= [[1,2,3],[4,5,6],[7,8,9]] 
```

我正在尝试使用下面的代码，但如果内部列表可能是变量，我想找到一个通用的形式来执行此操作。

```
lista=[[5, 7, 9], [8, 11, 13], [11, 13, 15]]

b2 = [lista [0][i]+ lista [1][i] + lista [2][i] for i in range(len(lista))]

print (b2) 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:45:50.663

```
a= [[1,2,3],[4,5,6],[7,8,9]]
result = map(sum, zip(*a))
print result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:46:23.797

我会这样做：

```
# a is some list
b2 = [0]*len(a[0])
for x in a:
    for y in range(len(x)):
         b2[y] += x[y]
print(b2) 
```

# c# - C# 泛型继承和协变

> ID：14252872
> 
> 赞同：1
> 
> 时间：2013-01-10T07:35:23.103
> 
> 标签：c#, generics

我正在构建一个集合库，我希望所有通用集合接口都需要类类型，并且所有实现它们的集合都是任何类型。因此，在值类型上，集合将有两种方法，一种用于值类型，另一种用于装箱。这可能吗？

像这样：

```
interface ICollection<ItemType> where ItemType : class
{
    void DoSomething(ItemType item);
}

class Collection<ItemType> : ICollection<ItemType>
{
    void DoSomething(Object item);
    void DoSomething(ItemType item);
} 
```

除非这样，最好的解决方法是什么？接口是非通用的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T07:47:44.037

该行：

```
ICollection<Object> s = new Collection<String>(); 
```

（评论）将与`out`差异一起工作；但是，`DoSomething(ItemType)`将需要`in`差异；所以该类型既不是`in`也不是`out`：方差*在这里不适用*。

通常处理的方式是使用通用*和*非通用 API。对特定类型感兴趣的人可以使用通用 API；只对“对象”感兴趣的人可以使用非通用 API。

举例说明：

```
interface ICollection
{
    void DoSomething(object item);
}
interface ICollection<ItemType> : ICollection
{
    void DoSomething(ItemType item);
}

class Collection<ItemType> : ICollection<ItemType>
{
    void ICollection.DoSomething(Object item)
    {
        DoSomething((ItemType)item);
    }
    public void DoSomething(ItemType item)
    {
        //...
    }
} 
```

然后*这个*工作：

```
ICollection s = new Collection<String>();
object o = "abcd";
s.DoSomething(o); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:48:43.570

值类型总是装箱为 type `object`。这将强制任何装箱值类型的集合为 a `Collection<object>`，这不是真正的类型安全（没有人阻止您添加例如 a `string`，然后）。不过，类型安全应该是泛型类型的最大优势之一。因此，如果可能的话，我建议放弃`class`约束。

顺便说一句：您仍然可以将这些通用接口（无`class`约束）分配给它们的非通用版本：
`IList l = new List<int>();`

# r - 在R中将整数7写为字符“007”

> ID：14252878
> 
> 赞同：4
> 
> 时间：2013-01-10T07:35:42.987
> 
> 标签：r, format, number-formatting

我正在尝试使用`as.character`R 中的函数将整数转换为字符串。但我需要字符串的长度始终为 3。因此`7`将转换为`007`、`10`into`010`等等。我想知道是否有一些简单的修改`as.character`（或任何其他内置的 R 例程）可以快速完成此操作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-10T07:37:10.870

见`?sprintf`：

```
R> sprintf("%03d", c(7, 10))
[1] "007" "010" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-10T08:17:38.343

另一种可能：

```
formatC(c(7, 10), width=3, flag="0")
# [1] "007" "010" 
```

# java - 邮政编码的正则表达式

> ID：14252881
> 
> 赞同：0
> 
> 时间：2013-01-10T07:36:08.790
> 
> 标签：java, android

我需要从地址中提取 6 位邮政编码。

“51 Bras Basah Road #01-01 Manulife Centre Singapore 189554”

邮政编码总是 6 位数字，但不一定在地址的最后。

请帮我提供一个正确的“java”正则表达式来从上面的地址获取邮政编码。

阿斯米

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T07:43:23.493

如果您可以确定邮政编码是您输入的唯一 6 位数字，您应该能够逃脱：

```
Pattern zipPattern = Pattern.compile("(\\d{6})");
Matcher zipMatcher = zipPattern.matcher("51 Bras Basah Road #01-01 Manulife Centre Singapore 189554");
if (zipMatcher.find()) {
    String zip = zipMatcher.group(1);
} 
```

另请参阅[java.util.regex.Pattern 的 API 文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Pattern.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:51:28.143

这是简单的正则表达式

(.*)((\d){6})$

第一组是“51 Bras Basah Road #01-01 Manulife Centre Singapore” 第二组是邮政编码（6位数）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T08:25:42.920

这是一个正则表达式，它将找到*最后*六位数字：

```
((\d{6}.*)*\s)?(\d{6})([^\d].*)?$ 
```

当然，您需要在编译模式时对字符串进行转义：

```
Pattern postal_code_group3 = Pattern.compile("((\\d{6}.*)*\\s)?(\\d{6})([^\\d].*)?$"); 
```

您可以从任何匹配的第 3 组中获取邮政编码。

请注意，第 2 组在邮政编码前强制使用空格，除非字符串以邮政编码开头。

第 4 组负责处理邮政编码之后的任何内容，并防止尾随的 7 位或更多位数字被匹配为邮政编码。

# c++ - 如何使用 npapi 插件获取附加到 http 请求的 postdata

> ID：14252883
> 
> 赞同：0
> 
> 时间：2013-01-10T07:36:09.173
> 
> 标签：c++, plugins, browser, network-programming, npapi

是否可以使用 npapi 插件获取 post 请求的 postdata。我们可以使用插件轻松访问 url、cookie 等，但是发布数据呢！

```
FB::DOM::WindowPtr window = m_host->getDOMWindow();
referrer="";
title ="";postdata ="";
cookie = "";userAgent = "";

if (!window)
    return;

if (window->getJSObject()->HasProperty("document"))
     cookie = window->getNode("document")->getProperty<std::string>("cookie");
if (window->getJSObject()->HasProperty("document"))
     referrer = window->getNode("document")->getProperty<std::string>("referrer");
if (window->getJSObject()->HasProperty("document"))
     title = window->getNode("document")->getProperty<std::string>("title");
if (window->getJSObject()->HasProperty("navigator")) 
     userAgent = window->getNode("navigator")->getProperty<std::string>("userAgent"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:57:15.167

你能用Javascript得到它吗？我不这么认为；但如果可能的话，这就是你从 NPAPI 做的方式。NPAPI 无法获取页面中发布请求的发布数据，因此您可以获取的唯一内容是通过 javascript。

# javascript - 从弹出窗口javascript提交表单

> ID：14252888
> 
> 赞同：1
> 
> 时间：2013-01-10T07:36:21.613
> 
> 标签：javascript, jquery, dom

我想提交一个表单弹出窗口。

**父.html**

```
<form class="myform" name="forms" onsubmit="return submit_form()" >

</form>
<form class="myform" name="forms" >

</form>
<form class="myform" name="forms" >

</form> 
```

**Parent.html JAVASCRIPT**

```
<script>

function submit_form()
{

console.log(0);
return false;
}

window.onload = function(){

//attach eventListner

 document.getElementsByName("forms").addEventListner("submit",function(){

  console.log(1);

  return false;

 },false);

//IN JQUERY 

$(document).ready(function(){

  $(".myform").live("submit",function(){

    console.log(2);return false;

  });

});

};

</script> 
```

我正在使用`window.open`方法打开一个新的弹出窗口，

我正在尝试从弹出窗口提交表单，如下所示...

```
var docs = window.opener.document ;

//first try to submit through jQuery

$(docs).find("form").eq(0).submit(); // it will work all browsers except IE8

or

docs.getElementsByTagName("form")[0].submit(); // it will work everywhere ,but on parent window the form will submitted by default (no attached events will work) 
```

请帮忙 ..

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:39:44.333

```
div id="divform">
            <form action="/system/wpacert" method="post" enctype="multipart/form-data" name="certform">
                <div>Certificate 1: <input type="file" name="cert1"/></div>
                <div>Certificate 2: <input type="file" name="cert2"/></div>

                <div><input type="button" value="Upload" onclick="closeSelf();"/></div>
            </form>
        </div>
        <div  id="closelink" style="display:none">
            <a href="javascript:window.close()">Click Here to Close this Page</a>
        </div>

function closeSelf(){
    document.forms['certform'].submit();
    hide(document.getElementById('divform'));
    unHide(document.getElementById('closelink'));

} 
```

# javascript - iPad 上 HTML5 应用程序中的声音延迟

> ID：14252891
> 
> 赞同：2
> 
> 时间：2013-01-10T07:36:29.930
> 
> 标签：javascript, mobile-safari, html5-audio

我正在用 HTML5 + Javascript 编写一个游戏，它使用了很多声音。显然，鉴于 HTML5 中音频的当前状态，这很有趣。我正在使用 audiosprite 来最大程度地减少加载和延迟，并且在桌面上一切正常。所有声音播放，没有延迟。但是，在移动 Safari 中的 iPad（第 3 代，iOS 6）上运行相同的代码是另一回事。一些按顺序播放的声音被丢弃，可能是因为在下一个 .play() 事件发生之前前一个声音还没有开始播放。我不想增加时间延迟，因为这会破坏游戏的流程。

任何人都有类似的问题并提出任何巧妙的优化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T09:22:13.610

可变比特率编解码器确实会导致不同平台之间的时序差异。我注意到使用恒定比特率有一些改进。

# jquery - 是什么导致 $.ajax 导致完整的回发

> ID：14252893
> 
> 赞同：5
> 
> 时间：2013-01-10T07:36:38.087
> 
> 标签：jquery, json, asp.net-mvc

有人能告诉我是什么原因导致**$.ajax 'POST'**请求导致完整的回发（整页刷新）吗？

我在**ASP.NET MVC**上下文中使用 $.ajax 'POST'，其中视图通过 $.ajax 'POST' 请求调用控制器方法（返回 JSON 结果）。

代码如下。

* * *

```
// View.
<button id="save" onclick="saveClick()" /> 
```

* * *

```
// View.
<script type="text/javascript">

    function saveClick() {
        if (!$("form").valid()) {
            return false;
        }

        $.ajax({
            url: '@Url.Action(@MVC.Ticket.ActionNames.SaveTicket, @MVC.Ticket.Name)'
            type: 'POST',
            data: JSON.stringify(getJsonTicket()),
            dataType: 'json',
            contentType: "application/json",
            cache: false,
            success: function(data) {
                alert(data.SaveResult);
            }
        });

        return true;
    }

    function getJsonTicket() {
        ...
    }

</script> 
```

* * *

```
// Controller action.
public virtual JsonResult SaveTicket(Ticket newTicket)
{
    try
    {
        TicketManager.SaveTicket(newTicket);
        return Json(new CreateTicketViewModel {SaveResult = "success"});
    }
    catch
    {
        return Json(new CreateTicketViewModel { SaveResult = "error" });
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-10T09:04:30.507

做

```
<button id="save" type="button" onclick="saveClick()" /> 
```

确保此按钮未发布表单。

**解释：**

按钮元素的 type 属性的默认值为“submit”。

[https://stackoverflow.com/a/3315016/1014281](https://stackoverflow.com/a/3315016/1014281)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T09:10:03.290

你确定你使用的是 a`<button>`而不是`<input type="submit">`？因为如果您不阻止按钮提交，它将提交表单（完整回发）。

`<input type="submit" onclick="return saveClick()">`只要`saveClick()`始终返回 false 就应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-30T06:55:20.523

你必须添加`type="button"`到你的`button`标签

# sql - 如何在 SQL Server 中使用不同数据库的表

> ID：14252901
> 
> 赞同：3
> 
> 时间：2013-01-10T07:37:19.630
> 
> 标签：sql, sql-server-2008

我必须将一些表（16 个表）传输到另一个数据库，并且有许多使用这些表的存储过程（200 个表）。

不推荐将存储过程传输到另一个数据库。

对于我的情况：

`dbA`包含 `sp_xyz`存储过程`tableB`和`tableC`表。

和内容`sp_xyz`可以是：

```
 SELECT A.column1, B.column2 
 FROM
 tableB A 
 JOIN tableC B ON A.fk_b_id = B.id 
```

我们要传输`tableC`到 dbB。那么我应该如何以最小的变化来改变这个 sp。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T07:43:56.580

如果您想在另一个数据库中使用表，那么当数据库位于同一服务器上时，您可以在 sql server 中执行以下操作：

```
Select * from [DBName].[Schema].[Table] 
```

如果数据库位于另一台服务器中，请同时指定链接服务器名称：

```
Select * from [DBServer].[DBName].[Schema].[Table] 
```

架构名称 - 替换为您的架构，在 sql server 中默认为“dbo”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T07:51:22.430

我对此进行了查询，发现您可以使用

```
SELECT * FROM DB_Name.Schema.Table_Name 
```

例如

```
SELECT * FROM abcDB.dbo.address 
```

# joomla - Joomla 2.5 登录表单页面显示空白页面

> ID：14252904
> 
> 赞同：0
> 
> 时间：2013-01-10T07:37:35.907
> 
> 标签：joomla, login, joomla2.5

在我的 Joomla 2.5.8 安装的前端，“.../index.php/component/users/?view=login”显示为空白页。

基本上，我试图在我的导航栏上创建一个链接到预订系统的链接。只有注册用户才能访问此预订系统。如果他们登录成功，将显示预订页面，否则，将出现登录屏幕并要求用户登录以访问预订系统。

我的 Joomla 菜单结构是这样的：

1) 预订系统菜单项是菜单项别名，具有公共访问权限。任何人都可以在我的菜单导航栏上看到这个链接。

2) 菜单项别名链接到驻留在不同菜单上的另一个菜单项并已注册访问。这个不同的菜单没有在任何地方发布。

我按照此页面上的指南进行操作：[仅向注册用户显示 joomla 文章，如果未登录，则显示登录屏幕是](https://stackoverflow.com/questions/10495498/show-a-joomla-article-to-registered-users-only-or-a-login-screen-if-not-logged)

非常感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:52:00.630

问题是你的模板。它有错误或未定义的功能。尝试将 &template=system (.../index.php/component/users/?view=login&template=system) 放在您的 url 末尾。我将尝试提供更多详细信息和选项来解决您的问题。

# javascript - 防止android默认浏览器在横向模式下缩放

> ID：14252909
> 
> 赞同：1
> 
> 时间：2013-01-10T07:37:49.810
> 
> 标签：javascript, android, web-applications

横向模式/ qwerty键盘模式放大android默认浏览器..
有什么办法可以避免这种情况？缩放行为是..

使用设备：机器人 4

另外，需要注意的是，我正在使用这个元标记：

```
 <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:57:53.737

如果您在字体/用户界面上有缩放问题...

使用此 CSS 标记。

```
 html {
    -webkit-text-size-adjust: none; /* Never autoresize text */
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T19:47:56.337

奇怪的是，滚动到横向顶部导致它：

```
window.scrollTo(0, 0); 
```

# webrtc - 基于 libjingle 的客户端和 gtalk 之间的视频聊天

> ID：14252913
> 
> 赞同：2
> 
> 时间：2013-01-10T07:37:52.893
> 
> 标签：webrtc, videochat, libjingle, hangout

我已经构建了一个基于 libjingle 的 google talk 客户端（呼叫应用程序），并且我正在尝试呼叫 gtalk（talk 作为 gmail Web 客户端的一部分提供）。

不幸的是，我在 gtalk 上没有看到基于 libjingle 的客户端的视频和音频，但是在基于 libjingle 的客户端上可以看到 gtalk 的视频和音频。

一段时间前，视频聊天工作得很好。我怀疑在谷歌推出或更新具有环聊功能的 gmail 客户端之后，协议或某些可能不兼容的握手机制发生了变化。

对此有任何想法或想法吗？

# c# - 用于条件转换的 IValueConverter 参数

> ID：14252922
> 
> 赞同：3
> 
> 时间：2013-01-10T07:38:38.033
> 
> 标签：c#, wpf, ivalueconverter

我有一个带有文本框的表单，该文本框（默认情况下）采用十进制值。不幸的是，业务规则说它们也可以取一个百分比值（实际上是相同的东西，只是乘以 100）。为了确保将正确的值插入到数据库中（例如，如果受访者输入了 95，我希望它变为 .95），我在相关文本框旁边添加了复选框，用户可以选择这些复选框以指示该值是百分比，而不是小数。为了在小数和百分比之间切换以供将来显示、报告等，我正在尝试使用 IValueConverter。

我创建了一个将字段值相乘以将其显示为百分比的转换器，并且（尽管我还没有进行测试）应该在保存时将该显示值重新转换回小数。

我遇到的问题是让转换器仅在选中复选框的情况下工作。从我所有的阅读来看，最有可能的方法是使用复选框值作为 IValueConverter 的参数，但我不知道如何做到这一点。

**所以，我的问题是：** 我如何（甚至可以）使用位于 TextBox 旁边的 Checkbox 中的 Checkbox.IsChecked 值作为 IValueConverter 的参数来确定是否对 TextBox 文本进行转换？问题是如何识别与正在转换的文本框相关的复选框以及如何将其值作为 IValueConverter 的参数传递

我尝试在这里查看： [如何将对另一个控件的引用作为 IValueConverter 参数传递？](https://stackoverflow.com/questions/1438879/how-can-i-pass-a-reference-to-another-control-as-an-ivalueconverter-parameter)，但它有点令人沮丧。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:58:26.437

不幸的是，您不能在 ConverterParameter 上使用绑定，但您可以使用[IMultiValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.imultivalueconverter.aspx)来完成此任务。

你会像这样使用它

```
<TextBlock.Text>
  <MultiBinding Converter="{StaticResource YourConverter}">
    <Binding Path="YourDecimalProperty"/>
    <Binding Path="IsChecked" ElementName="YourCheckBoxName" />
  </MultiBinding>
</TextBlock.Text> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:53:14.667

首先：您不应该将控件（视图）传递给转换器。传递 IsChecked 属性的值就足够了。

不幸的是，您不能对 ConverterParameter 进行数据绑定，因为它不是 DependencyProperty。作为一种解决方法，您可以将 IsChecked 属性绑定到 ViewModel 上的属性，然后使用 ValueConverter 将文本框绑定到整个 ViewModel。在 ValueConverter 中，您可以访问 ViewModel 并进行格式化。

# visual-studio-2010 - 操作无法完成：指针无效

> ID：14252927
> 
> 赞同：38
> 
> 时间：2013-01-10T07:39:18.797
> 
> 标签：visual-studio-2010, android-layout, xamarin.android

**更新：**

您将在下面找到主要与 ASP.NET 问题相关的答案，而不是我最初遇到的问题。如果您对 ASP.NET 有任何问题，请向下滚动并忽略标记为解决方案的答案，因为我有一些非常罕见的情况，到目前为止我还没有遇到过。

* * *

**原始问题：**
几天来我的视觉工作室有问题。每次我想打开 Android 横向布局（默认布局正常加载）时，它都会告诉我“操作无法完成：Üngültiger Zeiger”（无效指针）（德语 Win 7 上的英语工作室）我发现了一些不同的线程论坛，但大多数都与字体更改有关，我从未做过。我的字体现在是 Consolas

我发现的另一件事是：[链接](http://qualapps.blogspot.de/2010/07/invalid-pointer-error-in-visual-studio.html)
，但我从未在我的 .csproj 文件中找到这些行

所以......这里有什么问题？

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2015-12-17T07:36:05.237

这是一个旧线程，但同样的症状又回来了，但基于一个新的原因。安装 ASP.NET 5 RC1 后出现错误。我通过删除此文件夹解决了这个问题：

```
Users\{yourusername}\AppData\Local\Microsoft\VisualStudio\14.0\ComponentModelCache 
```

（或`%LocalAppData%\Microsoft\VisualStudio\14.0\ComponentModelCache`），然后重新启动 Visual Studio。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2016-02-23T07:38:27.963

关闭 Visual Studio 删除**%LocalAppData%\Microsoft\VisualStudio\14.0\ComponentModelCache** 重新打开 Visual Studio

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-06T00:22:05.287

我短暂地遇到了这个问题，我立即来到这个线程并且重命名解决方案对我不起作用。但是，一旦我重新启动视觉工作室并重新打开，问题就消失了（此后一直没有回来）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-18T17:54:01.033

我之前遇到过这个问题，找到了这个帖子，今天安装了一堆扩展后问题再次出现，再次找到了这个帖子。

在较早的情况下，按照上面给出的答案卸载 Asp.net 5 RC1。但是，这次我不愿意卸载它，因为我希望 Asp.net 5 RC1 继续可用。我还想避免卸载新的扩展。

所以我尝试了替代答案，关闭 VS2015 并删除 c:\Users\myusername\AppData\Local\Microsoft\VisualStudio\14.0\ComponentModelCache 的内容。在重新启动 VS2015 并重新打开我的项目时保持该文件夹打开（并且为空）显示四个文件（缓存、目录、错误和外部）重新填充。然后我能够打开导致指针错误的文件。

底线：我建议在卸载 ASP.net 5 RC1 时清除 ComponentModelCache 修复程序，特别是对于任何想要向前而不是向后移动的人。:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-12-29T13:23:39.110

我通过删除此文件夹解决了这个问题：c:\Users\myusername\AppData\Local\Microsoft\VisualStudio\14.0\ComponentModelCache。并重新启动视觉工作室。它工作正常。在我的系统中，这个问题是由于 Bootstrap Snippet Packet 扩展和一些相关的扩展。它们可以稍后安装。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-06T15:24:26.953

I had a similar issue, and for some strange reason, renaming the solution file (.sln) to something else resolved the issue.

I haven't figured out *why* though.

* * *

Edit: *Please have a look at the other answers before trying this one out since there might be one that suits your problem more specifically. The answer above solved an issue that was caused by something that normally doesn't happen, and can't really be reproduced, whereas the answers below are caused by something specific.*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-04T20:17:14.990

今天每次双击 .cshtml (MVC Razor) 文件时，我都会遇到这个问题。

我有 Visual Studio 2015，随 Xamarin 和最新版本的 Resharper 一起安装了 Update 3。

我查看了事件查看器，发现每次发生这种情况时，我都会从 Windows 错误报告中获得一个 ID 为 1001 的事件。以下是该活动的一些细节：

> 故障桶 126628082325，类型 5 事件名称：VisualStudioNonFatalErrors 响应：不可用 Cab Id：0
> 
> 问题签名：P1：devenv.exe P2：14.0.25420.1 P3：未知 P4：vs/core/packageloadfailure P5：[XamarinIOSPackage] P6：未知 P7：未知 P8：CVsPackageMgr::CVsPackageInfo::LogHr P9：0 P10：无
> 
> 附件：\?\C:\Users{username}\AppData\Roaming\Microsoft\VisualStudio\14.0\ActivityLog.xml \?\C:\Users{username}\AppData\Local\Temp\VSFaultInfo\161104_024954_7771968\ErrorInformation。 txt \?\C:\ProgramData\Microsoft\Windows\WER\Temp\WER47B3.tmp.WERInternalMetadata.xml
> 
> 这些文件可能在此处可用：C:\ProgramData\Microsoft\Windows\WER\ReportArchive\NonCritical_devenv.exe_147f9374de860c29317ae48d025a111977d1f_00000000_246b4a34
> 
> 分析符号：重新检查解决方案：0 报告 ID：da867a9f-a2c7-11e6-8298-a0369f8ee7a3 报告状态：0 哈希桶：75f36458281df055612fae225a6dcaa0

我没有看到 .cshtml 和 Xamarin 之间的联系，但是当我检查 Xamarin 的更新（工具->选项->Xamarin->其他->立即检查）时，有一个更新在等待。我安装了该更新，并且似乎已重置 Xamarin IOS 安装并且问题不再发生。

因此，如果您安装了 Xamarin 工具并看到此错误和提及 Xamarin 的相应事件，我的建议是检查 Xamarin 的更新并应用它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-02T06:36:54.050

我通过使用“以管理员身份运行”重新启动 Visual Studio 解决了这个问题。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-08-10T10:28:55.510

在安装 MindScape 以获得 sass 支持后，我遇到了同样的问题。我有 VS2015 更新 2。解决方案：安装 VS 更新 3 解决了我的问题。下载表格：[https ://www.visualstudio.com/en-us/news/releasenotes/vs2015-update3-vs](https://www.visualstudio.com/en-us/news/releasenotes/vs2015-update3-vs)

# android - 在没有移动地图集创建器的情况下获取 osmdroid 的地图图块

> ID：14252934
> 
> 赞同：2
> 
> 时间：2013-01-10T07:40:06.153
> 
> 标签：android, osmdroid

我正在编写一个需要离线地图的新 android 应用程序。我一直在尝试使用移动地图集创建器来获取地图图块，但是移动地图集创建器已被开放的街道地图标记为滥用其服务。当您尝试使用移动地图集创建器下载地图并被阻止瓷砖时，您可以看到。我想知道是否有任何其他选项可以为 osmdroid 生成地图图块以在 android 上使用，或者是否有更好的选项在 android 设备上生成离线地图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:39:15.253

您可以使用“Maperitive”（http://maperitive.net/）

它的工作方式大致相同，但您必须手动将生成的地图图块打包到 .zip 文件中才能与 osmdroid 一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:42:41.817

将移动地图集创建器中的地图源更改为 Mapquest。下载所有你想要的，检查文件夹（解压缩）名称，如果你使用 osmdroid 渲染，将其重命名为 MapquestOSM。

# c++ - map数据结构的multimap

> ID：14252936
> 
> 赞同：0
> 
> 时间：2013-01-10T07:40:11.100
> 
> 标签：c++, performance

我正在解析一个包含近 10 亿条（或可能是万亿条）记录的文件。我在用着

```
 struct ltstr
 {
    bool operator()(const char* s1, const char* s2) const
    {
        return strcmp(s1, s2) < 0;
    }
 };

 multimap<char*, map<char*, char*, ltsr>,ltstr > m; 
```

这是在 C++ 中使用上述数据结构的有效方法吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:26:48.677

不，这不对。数十亿，更不用说数万亿的记录将不适合当今计算机的操作内存。请记住，10 亿条记录将消耗 32 GB 的映射开销，另外 16 GB 用于指向键和值的指针，显然还有*n*个 GB，其中*n*是实际数据的键和值的平均长度（假设 64 位系统；在 32 位系统中只有一半，但不适合 3 GB 地址空间限制）。世界上只有少数大型服务器具有如此大的内存。

处理如此大量数据的唯一选择是小批量处理它们。如果可以分别对每个元素进行处理，则只需一次加载一个元素，处理并丢弃它。无论数据大小如何，流式处理*总是*更快，因为它只需要固定数量的内存，因此可以有效地利用 CPU 缓存。

如果不能这样处理，因为需要特定的顺序或者您需要查找条目或其他内容，您需要将数据准备到适当的外部（磁盘上）结构。即使用外部合并排序（将分区写入临时文件）对它们进行排序，使用 B-tree 或哈希等对它们进行索引。这是*很多*工作。但幸运的是，有几个库可以实现这些算法。我会建议：

*   [*DMB](http://en.wikipedia.org/wiki/Dbm)，外部散列库，如GDBM [、](http://www.gnu.org.ua/software/gdbm/) Berkeley [DB](http://www.oracle.com/us/products/database/berkeley-db/index.html)或 ndbm。这些只提供地图的外部模拟，最简单，但 API 是基于 C 的。
*   [stxxl](http://stxxl.sourceforge.net/)提供了几个外部容器的外部变体和适用于它们的算法。最大的优点是 API 与标准库集合相同。
*   对于更复杂的数据操作，只需使用[sqlite](http://sqlite.org/)即可。它同样快速且更复杂的数据处理更容易用 SQL 表达。

# c++ - 程序启动后立即以退出状态 0 退出

> ID：14252941
> 
> 赞同：0
> 
> 时间：2013-01-10T07:40:22.120
> 
> 标签：c++, visual-studio-2010, qt

我遇到了这个奇怪的问题：

我使用 Qt( *core/gui/sql/webkit* ) 编写了一个程序，它工作得很好。

但是几天前它突然坏了。可执行文件在启动后会立即退出，DEBUG/RELEASE 版本都有这个奇怪的问题。

这就是我试图找出原因的原因：

*   我在文件中放了一个**断点**`main.cpp`，该行`QApplication a(argc, argv)`。但似乎调试器甚至没有到达那个点。

*   **我在另一台 PC**上尝试我的项目，但问题仍然存在。

任何建议表示赞赏。

添加：

环境：Win7/VS2010/Qt-4.8.4

主.cpp：

```
#include "adeditor.h"
#include <QtGui/QApplication>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    ADEditor w;
    w.show();
    return a.exec();
} 
```

从类`adeditor`继承`QMainWindow`。

**已修复** *，但我不知道为什么*

这是解决方案：

我创建了一个*新*项目并*复制了**原始*项目中每个文件的所有内容，它就可以工作了。

我**非常**想知道它是如何发生的，所以下次它发生在我身上时，我想知道如何正确地处理 i 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:11:45.207

发表我的评论作为答案，以便将来的访问者能看到一点：

> 也有可能你有另一个`main`函数挂在某个被调用/链接到的地方。– OmnipotentEntity 34 分钟前
> 
> 我之前检查过情况，确实有另一个`main`，但在我解决了这个问题之后，什么都没有改变。– 赫尔辛基 29 分钟前
> 
> 自从删除它之后，您是否从头开始执行了一个完全干净的构建`main`？– OmnipotentEntity 23 分钟前
> 
> @OmnipotentEntity：是的！这正是问题所在，现在我知道了，谢谢——赫尔辛基 7 分钟前

# android - 模拟 960x640（普通屏幕 xhdpi）

> ID：14252943
> 
> 赞同：0
> 
> 时间：2013-01-10T07:40:25.513
> 
> 标签：android, android-emulator

当前的 ADT 插件不允许创建普通屏幕 xhdpi 虚拟设备。但是，我需要确保一切正常。

你能告诉我如何实现创建这个配置吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:58:54.770

> 模拟 960x640（普通屏幕 xhdpi）当前 ADT 插件不允许创建普通屏幕 xhdpi 虚拟设备

你是对的。AFAIK 你只能用下面给出的密度创建模拟器，而 Creatinf AVD 你会得到下面的图像。您只能从以下设备中进行选择来制作您的模拟器。

![在此处输入图像描述](../Images/846a8711ae97ce74cc22a342d1b3bb17.png)

**您的替代解决方案：**

> **但是，我需要确保一切正常。**

是的，你一定能得到你想要的。

如果您想检查您的应用程序是否在 960x640（普通屏幕 xhdpi）设备上完美运行。您可以根据以下建议进行自定义配置。

将您的 ADT 更新到版本 21 之后。

**`Add Custom`在旧版本中，如果您想要自定义设备配置（如果您想要 Nexus 4），则每次必须设置屏幕。**

在 ADT21 版本中，您可以通过

> **打开`AVD Manager`，你可以定义你的自定义屏幕`"Device Definition"`**

**替代方案（更简单的方法）**

> 在最新版本中，您不需要根据上述建议设置自定义设备配置，因为它提供了更简单的方法。您>只需使用您的设备配置制作模拟器，然后您将在`Graphical Layout`XML 中看到带有模拟器名称的那些配置

就像在使用名称为“Nexus7_Android_4.2”的Android 4.2创建我的Nexus7模拟器模拟器之后，我将自动在xml的图形布局中获得此设备配置。

下面是它的屏幕截图。

![在此处输入图像描述](../Images/b97d1e5e83c13f9e3be2d0ac367cfeab.png)

希望它会帮助你。

# excel - 新行时自动插入下拉列表

> ID：14252945
> 
> 赞同：0
> 
> 时间：2013-01-10T07:40:53.637
> 
> 标签：excel, excel-2007, ms-office, vba

我有一个三列的excel表。（姓名）、（姓氏）和（身份类型）。列身份类型只能采用 3 个值，（Id、Passport、Drivers Licence）。我想要的是当用户开始在新行上写入时，应该会出现一个下拉列表，其中包含标识类型列上的这 3 个值。那可能吗？。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:14:32.400

不需要 VBA 使用[**数据验证**](http://www.youtube.com/watch?feature=player_embedded&v=Dqo9I6yP3Nc)：

突出显示要将此下拉列表添加到的列中的所有单元格。

`Data`您需要在菜单中选择`Data Validation`。然后您应该得到以下内容，您需要在下拉列表中选择您想要的三个值：

![在此处输入图像描述](../Images/a90e16f385bc32632e6bb38d986913d4.png)

这导致：

![在此处输入图像描述](../Images/90884d5873518bc63c480f9b6176d66f.png)

还是我误解了你的问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-21T22:11:04.287

我知道这很旧，但不是选择一个单元格进行验证，而是选择整个列。这会将验证添加到列中的所有单元格，并在数据扩展时为您提供所有行的下拉列表。

# android - 在后台运行

> ID：14252948
> 
> 赞同：0
> 
> 时间：2013-01-10T07:41:14.223
> 
> 标签：android, battery

嗨，我有一个简单的问题，我需要在屏幕锁定时在后台运行我的应用程序。使用服务是唯一的方法吗？对于我的简单程序来说，它似乎很复杂。（我正在编写简单的 gps 记录器，即使用户阻止了电话，它也必须记录）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:04:51.123

是的，这是唯一的方法。使用 normal `Service`，你也可以让它在因为资源不足而杀死它`sticky`时让它重新启动。`Android`

使用`startService`开始是。如果您正在使用它，它将在被杀死时`bindService`停止。你可能不想要那个。当您不想再使用该服务时，不要忘记致电。`Service``Activity``stopService`

`IntentService`不合适，因为它会在完成后自行停止。

# perl - Perl 聊天服务器客户端挂断

> ID：14252949
> 
> 赞同：0
> 
> 时间：2013-01-10T07:41:22.413
> 
> 标签：perl

我正在尝试在 perl 中创建一个聊天服务器程序，其中客户端输入一些文本，服务器以输入的 ASCII 值的总和进行响应。但是，有一个问题。服务器正在正确处理数据，但客户端没有接收到它。这是代码：

```
#!usr/bin/perl
#client.pl
use strict;
use warnings;
use IO::Socket;
$| = 1;

print "Client Program\n";

my $lp = 12000;

my $client_socket = new IO::Socket::INET (
PeerAddr => '127.0.0.1',
PeerPort => $lp,
Proto => 'tcp'
) or die "Cannot create the socket: $!\n";

print "Server connected at port $lp \n";
print "Enter the text to sent to the server: \n";
my $user_input = <>;
chomp $user_input;
print $client_socket;
$client_socket->send($user_input);
my $server_output;
$client_socket->recv($server_output, 1024);
print "ASCII Sum received: scalar(<$client_socket>)";
$client_socket->close(); 
```

客户端在发送数据后就挂断了（我可以说是因为我看到了服务器程序中收到的文本。但是，在我终止客户端之前，服务器处理不会出现）。我不明白这里出了什么问题。我也可以发布服务器程序，但它似乎没有任何问题。

这是服务器程序：

```
#!/usr/bin/perl
#server.pl
use strict;
use warnings;
use IO::Socket;
$| = 1;

print "Server Program\n";
my $lp = 12000;

my $server_socket = new IO::Socket::INET (
LocalHost => '127.0.0.1',
LocalPort => $lp,
Proto => 'tcp',
Listen => SOMAXCONN,
Reuse => 1) or die "Cannot create the socket: $!\n";
my $sum_ASCII = 0;
print "Server started at port $lp \n";
print "Press Ctrl+C to stop the server\n";
print "Waiting for client to connect.. \n";
# or die sprintf "ERROR:(%d)(%s)(%d)(+%s)", $!,$!,$^E,$^E
while (my $new_client = $server_socket->accept()) { 

my $addr = $new_client->peerhost();
my $port = $new_client->peerport();
print "Connected to client at $addr at port $port ";
while(<$new_client>) {
    print "Following is the text entered by client: \n";
    print "$_ \n";
    my $len = length($_);
    print "The length of the string is: $len\n";
    my @char_array = split(//);
    #print "@char_array";
    print "Initially sum is $sum_ASCII\n";
    for (my $i = 0; $i< $len; $i++)
    {
        print "Adding ASCII of '$char_array[$i]'.. ";
        $sum_ASCII = $sum_ASCII + ord($char_array[$i]);
        print "\t Sum = $sum_ASCII\n";
    }
    print "\n\nTotal sum of ASCII values of the all the sent characters is: $sum_ASCII\n"       
}
print "Sending the sum to the client.. \n";

my $np = 98765;
my $client_socket = new IO::Socket::INET (
PeerAddr => '127.0.0.1',
PeerPort => $np,
Proto => 'tcp'
) or die "Cannot create the socket: $!\n";
print "Client connected at port $np \n";
$client_socket->send($sum_ASCII);
$client_socket->close();

print "\nClient now disconnecting..\n";
close $new_client;  
print "\nWaiting for new client to connect.. \n"; 
```

}

```
#my $np = 12345
#my $client_socket = new IO::Socket::INET (
#LocalAddr => '127.0.0.1',
#PeerPort => $np,
#Proto => 'tcp'
#) or die "Cannot create the socket: $!\n";

#print "Client connected at port $np \n";

#$client_socket->send($sum_ASCII);
#$client_socket->close();
#print "Enter the text to sent to the server: \n";
#my $user_input = <>;
#chomp $user_input;
#print $client_socket;
#$new_client->send($sum_ASCII);

$server_socket->close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:58:26.330

我不知道 Perl 中的 Socket 工作原理。但是查看您的代码，我可以建议一些更改。

改变你的：

```
 print "ASCII Sum received: scalar(<$client_socket>)"; 
```

至：

```
 print "ASCII Sum received: " . scalar(<$client_socket>); 
```

希望这可以打印您的日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:49:40.693

[如果服务器与perl chat server 中的 Error](https://stackoverflow.com/q/14250886/1741542)相同，那么您的服务器将等待换行符，该换行符永远不会发送。

跳过`chomp $user_input;`您的客户端或使用

```
my $data;
my $retval = $new_client->recv($data, 1024);
print "Following is the text entered by client: $data\n";
$new_client->send($data); 
```

而是在您的服务器中。

有关[`recv`](http://perldoc.perl.org/functions/recv.html)返回值的说明，请参阅。

在您的客户端中，您必须将输出更改为

```
my $server_output;
$client_socket->recv($server_output, 1024);
print "ASCII Sum received: $server_output\n"; 
```

# php - 无法在 PHP 中使用 Api Twitter 1.1 向 Twitter 发送推文

> ID：14252955
> 
> 赞同：0
> 
> 时间：2013-01-10T07:41:39.247
> 
> 标签：php, twitter, twitter-oauth

[我通过https://api.twitter.com/1.1/statuses/update.json](https://api.twitter.com/1.1/statuses/update.json) api将 http-post 发送到 Twitter，但响应显示错误：

```
array(1) { ["errors"]=> array(1) { [0]=> array(2)

{ ["message"]=> string(23) "Bad Authentication data" ["code"]=> int(215) } } } 
```

如何使用 API 修复并可以在 Twitter 上发布推文？非常感谢。

注意：我不想使用第三个库，只是 API Twitter Api 来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:53:13.400

以下其中一项可能是正确的：

*   您的应用程序尚未向 Twitter 提交完整的 oAuth 授权请求，因此无权在您的帐户上发布。
*   您尚未向`update.json`端点提交适当的字段以表明您的授权。
*   您根本没有 oAuth 实施。哦哦。

与 Twitter API 交互的应用程序需要 oAuth 协议，并且实现起来相当复杂。除非您是痛苦和痛苦的大傻瓜，否则您应该**强烈**考虑使用现有的实现，而不是尝试构建自己的实现。

# php - 如何检查给定的字符串是否是有效的正则表达式？

> ID：14252958
> 
> 赞同：1
> 
> 时间：2013-01-10T07:41:41.493
> 
> 标签：php

> **可能重复：**
> [测试正则表达式在 PHP 中是否有效](https://stackoverflow.com/questions/8825025/test-if-a-regular-expression-is-a-valid-one-in-php)

```
 <?php 

    $subject = "PHP is the web scripting language of choice.";    
    $pattern = 'sssss';

    if(preg_match($pattern,$subject))
    {
        echo 'true';
    }
    else
    {
        echo 'false';
    }

?> 
```

上面的代码给了我警告，因为字符串`$pattern`不是有效的正则表达式。

如果我通过有效的正则表达式，那么它工作正常......

我如何检查`$pattern`是有效的正则表达式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T10:28:57.063

如果正则表达式有问题，您可以编写一个引发错误的函数。（就像我认为应该的那样。）使用`@`来抑制警告是不好的做法，但如果你用抛出的异常替换它应该没问题。

```
function my_preg_match($pattern,$subject)
{
    $match = @preg_match($pattern,$subject);

    if($match === false)
    {
        $error = error_get_last();
        throw new Exception($error['message']);
    }
    return false;
} 
```

然后你可以检查正则表达式是否正确

```
$subject = "PHP is the web scripting language of choice.";    
$pattern = 'sssss';

try
{
    my_preg_match($pattern,$subject);
    $regexp_is_correct = true;
}
catch(Exception $e)
{
    $regexp_is_correct = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:07:12.007

使用`===`运算符：

```
<?php 

    $subject = "PHP is the web scripting language of choice.";    
    $pattern = 'sssss';

    $r = preg_match($pattern,$subject);
    if($r === false)
    {
        // preg matching failed (most likely because of incorrect regex)
    }
    else
    {
        // preg match succeeeded, use $r for result (which can be 0 for no match)
        if ($r == 0) {
            // no match
        } else {
            // $subject matches $pattern
        }
    }

?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-10T08:24:51.670

你可以`preg_match`用 try catch 包装，如果它抛出异常，则认为结果为 false。

无论如何，您可以查看[正则表达式以检测有效的正则表达式](https://stackoverflow.com/questions/172303/is-there-a-regular-expression-to-detect-a-valid-regular-expression)。

# java - Java/XML - 更改 TextView

> ID：14252962
> 
> 赞同：-2
> 
> 时间：2013-01-10T07:42:17.247
> 
> 标签：java, android, xml, textview

有人能解释一下为什么这段代码不起作用吗？我想用 Java 代码更改 textview 的文本，但没有任何变化。

```
package com.example.gethtml;

import android.app.Activity;
import android.os.Bundle;    

public class MainActivity extends Activity {

    GetCode getCode = new GetCode();
    Affiche affiche = new Affiche();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        try {
            getCode.getCode();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:54:54.853

通过 java 代码更改`textview`'s 文本的代码应至少包含一个`TextView`对象。我在您的代码中看不到这一点。但是我在下面写了一个示例代码。

```
setContentView(R.layout.activity_main);
TextView txtView = (TextView) findViewById(R.id.txtview);
txtView.setText("This is changed text"); 
```

您`activity_main.xml`应该包含`TextView`使用您所指的 id 定义的内容。希望能帮助到你。

# mysql - 从两个mysql表中检索数据并返回单个结果

> ID：14252966
> 
> 赞同：1
> 
> 时间：2013-01-10T07:42:30.557
> 
> 标签：mysql, select, join, union

我有两个mysql表，例如

国家排名表

```
country, clicks
-------  -----
0         657  
1         3300
2         9050 
```

clickTable 表格

```
id, name,    clicks,  deviceid, country
-- ------    ------   --------  -------
0   player1  33       uniqueid1  0
1   player2  665      uniqueid2  2 
2   player3  88       uniqueid3  18
3   player4  5000     uniqueid4  2 
```

我想从指定国家/地区的 countriesRanking 表中检索点击值，并从指定 deviceid 的 clickTable 中检索点击值。

就像是

```
SELECT clicks FROM clicksTable WHERE deviceid='$deviceid' UNION SELECT clicks FROM countriesRanking WHERE country='$country' 
```

所以如果 deviceid 是 uniqueid4 并且 country 是 2，这将返回

```
5000, 9050 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:47:19.433

试试这个：

```
SELECT ct.clicks fromClicks, cr.clicks fromCountry
FROM clicksTable ct 
LEFT JOIN countriesRanking cr ON ct.country = cr.country 
WHERE ct.deviceid='uniqueid4' AND ct.country = 2; 
```

检查此链接[**SQL FIDDLE DEMO**](http://sqlfiddle.com/#!2/58f376/2)

**输出**

```
| FROMCLICKS | FROMCOUNTRY |
----------------------------
|       5000 |        9050 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:48:49.600

试试这个

```
SELECT clicks FROM clicksTable ct
join countriesRanking cr on cr.country=ct.country

WHERE deviceid='$deviceid' and cr.country='$country' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T07:51:30.873

> 我想从指定国家/地区的 countriesRanking 表中检索点击值，并从指定 deviceid 的 clickTable 中检索点击值。

像这样：

```
SELECT clicks 
FROM clicksTable 
WHERE deviceid = 'uniqueid4' 
UNION ALL
SELECT clicks 
FROM countriesRanking 
WHERE country = 2; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/58f376/1)

这会给你：

```
| CLICKS |
----------
|   5000 |
|   9050 | 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T07:55:31.167

我认为您的查询是正确的，但您拼错了 Table Name `clickTable`。你改写了`clicksTable`。

# extjs - ExtJs 没有在 ComboBox 上触发选择事件

> ID：14252967
> 
> 赞同：19
> 
> 时间：2013-01-10T07:42:32.667
> 
> 标签：extjs, combobox, extjs4

我有 ExtJs 的问题`combobox`，考虑我有一个`combobox`有 4 个项目和一个`select`事件 on的回调函数`combobox`。

当我要设置`combobox`选定的值时`setValue()`，ExtJs 不会触发`select`事件。

我该如何解决这个问题？

我应该自己触发这个事件`setValue()`吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-10T07:53:08.010

我可以告诉你一年前 sencha 支持人员对此有何评论：

> 好吧，根据定义，事件是由用户操作触发的函数调用，当您调用 select 时没有用户操作。
> 
> 无论如何，“修复”很简单：你知道你调用了 select 所以在调用 select 之后你可以调用你的 select 监听器函数。

这取决于你的情况，你应该做什么。对我来说，我挂起我的实现，以便我能够调用重新负责的方法，但另一方面，当你自己触发事件时，我看不到任何不利因素。所以我认为这取决于你更喜欢哪种方法。

**这是一个如何自己触发事件的示例**（部分来自[@JohanHaest](https://stackoverflow.com/users/1463272/johan-haest)的评论）

*为了简单起见，我说您只启用了单一选择*

```
var record = combo.store.getById(id);
combo.select(id);
combo.fireEvent('select', combo, record); 
```

或者

```
combo.select(model);
combo.fireEvent('select', combo, model); 
```

当前版本 ( **4.1.3**`select` ) 中将 方法的第二个参数设置为`true`. 根据源代码，这将触发 select 事件。但是第一个参数必须是一个模型实例。

```
// source-snipped
select: function(r, /* private */ assert) 
```

所以打电话

```
combo.select(model, true); 
```

将触发选择事件，但此行为可能随时更改（版本），因为断言被标记为私有

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-18T09:33:02.343

我遇到了这个问题，因为我`valueField`在组合框上使用不正确......我不确定这应该做什么，但如果你设置不正确，它会破坏组合框 - 它会阻止`change`事件触发并停止`select`事件射击不止一次。

我的猜测是，因此您可以在列表中有多个对象代表同一个项目，而 valueField 代表键，因此如果您设置错误，那么键对于所有内容都是未定义的，因此对所有内容都是相同的。这意味着在第一组之后没有任何内容算作新值。

这似乎是非常小众的行为（而不是我想要的），所以我只是在我的情况下将其剥离，然后事情就开始起作用了。

* * *

我也认为你想要的事件就是`change`事件 -[文档](http://docs.sencha.com/extjs/4.1.0/#!/api/Ext.form.field.ComboBox)（4.1）说

```
Fires when the value of a field is changed via the setValue method. 
```

而`select`仅在有人单击组合框时触发

顺便说一句，但我也会质疑为此使用事件 - 你知道你已经调用了 setValue 那么为什么不做你想要在调用 set value 后发生的事情。事件倾向于使代码更加混乱，如果您不需要多播，那么通常最好不要打扰它们。

# javascript - 如何：使用动态 ID 创建隐藏输入的 XSL 模板

> ID：14252972
> 
> 赞同：0
> 
> 时间：2013-01-10T07:42:46.237
> 
> 标签：javascript, xslt, dom

我有这个 XML：

```
<EditRemote>
   <RemoteVendorServer>
      <FriendlyName><![CDATA[blabla]]></FriendlyName>
      <Description></Description>
      <CommunicationMethod>
         <GetExecutors>
            <Executor queryString=".*"/>
            <Executor queryString="[CX].*"/>
            <Executor queryString="[^CX].*"/>
         </GetExecutors>
         <RemoteAccess/>
      </CommunicationMethod>
   </RemoteVendorServer>
</EditRemote> 
```

我想在“Executor”标签上做应用模板，并将所有 queryStrings 值收集到动态创建的具有动态 ID 的隐藏输入中。所以我的代码如下所示：

```
<script type="text/javascript">
     .
     .
    var queryCounter = 0;
    var c_UNDERSCORE_QUERY_STRING = "_queryString";
     .
</script>
     .
     .
<xsl:apply-templates select="EditRemote/RemoteVendorServer/CommunicationMethod/GetExecutors/Executor" mode="tcp"/>
 .
 .
 // at the bottom of the xsl file I create the template:
 <xsl:template match="Executor" mode="tcp">     
    <input value="{@queryString}">
         <xsl:attribute name="id">
            <script type="text/javascript">
                queryCounter + c_UNDERSCORE_QUERY_STRING+"tcp";
            </script>
         </xsl:attribute>
         <xsl:attribute name="name">
            <script type="text/javascript">
                queryCounter + c_UNDERSCORE_QUERY_STRING+"tcp";
            </script>
         </xsl:attribute>
    </input>

    <script type="text/javascript">
        queryCounter++;
    </script>
</xsl:template> 
```

我回到服务器的只是最后一个没有键名的查询。它以某种方式进入了一个名为 Description(textarea element) 的不同输入，该输入在上面的应用模板之前用 xsl 编写：服务器输入：...,Description=[^CX].*,... 我什至看到了在我的 UI 中，当页面加载时，查询位于描述文本区域内。我的代码中似乎有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:01:59.643

您不能将脚本标签放入`<xsl:attribute>`.

而且您*绝对*不能从 XSLT 中执行或访问 JavaScript - 为什么您认为这是可能的？

尝试这样的事情。

```
<xsl:template match="Executor" mode="tcp">   
    <input value="{@queryString}" id="{position()}_queryString_tcp" name="{position()}_queryString_tcp" />
</xsl:template> 
```

阅读

*   [属性值模板](http://www.w3.org/TR/xslt#attribute-value-templates)
*   [功能](http://www.w3.org/TR/xpath/#function-position)_[`position()`](http://www.w3.org/TR/xpath/#function-position)

# c# - 传递给 saltarelle 的 jquery ajax 回调的参数的数据类型是什么

> ID：14252986
> 
> 赞同：0
> 
> 时间：2013-01-10T07:43:26.753
> 
> 标签：c#, jquery

```
 var jqopt = new jQueryAjaxOptions
            {
                Url = Model.Helper.ServiceEndpoint,
                Type = "Get"
            };

 var req = jQuery.Ajax(jqopt);
            req.Success(_ => { Log("Ajax succeeded: " + _.ToString()); });
            req.Fail(_ => { Log("Calling back after failure!!" + _.ToString()); }); 
```

我需要在错误中看到错误消息而不是 object _

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:20:33.070

这是成功和错误回调的签名

```
 private void jsSuccessCallBack(object data, string textStatus, jQueryXmlHttpRequest request)
        {

            var items = data as List<FamilyTrustBE>;
            foreach (FamilyTrustBE item in items)
            {
                Helper.Log(string.Format("Result is: id {0}, {1}: {2}", item.id, item.name, item.description));
            }

        }

        private void jsErrorCallBack(jQueryXmlHttpRequest request, string textStatus, Exception error)
        {
            dynamic myerr = error;
            Helper.Log(string.Format("status={0} in ERROR callback. Error: {1}, Inner: {2}", textStatus, myerr.message, myerr.InnerException));
        } 
```

这是我的 Helper.Log 方法：

```
 [IgnoreNamespace]
internal class Helper
{ 
    public static void Log(string str)
    {
        var content = jQuery.Select(Helper.HTMLMessageDivSelector).GetHtml();
        var messageDiv = jQuery.Select(Helper.HTMLMessageDivSelector);
        messageDiv.Html(str + "<br/>" + content);

        //write message to debug console if it is defined
        dynamic w = System.Html.Window.Self;
        { 
                if (w.console is object)   
                    w.console.log(str);
        }

    }
 } 
```

# erlang - 是否需要在 mnesia 中为插入顺序添加顺序列？

> ID：14252994
> 
> 赞同：0
> 
> 时间：2013-01-10T07:43:51.123
> 
> 标签：erlang, mnesia

我想`mnesia`按插入的顺序获取记录。

首先，我想添加一`timestamp`列。但它是针对不同计算机的一组节点发现的，`timestamp`是由不同的计算机创建的。不能保证这些不同计算机的计时器是同步的。

那，我认为它可以通过数据库的事务来解决以`mnesia`生成顺序值。但这可能太昂贵了。

我想知道`mnesia(`qlc`)`的输出记录的顺序是否保证插入顺序。如果是这样，上面的麻烦就不存在了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:12:09.160

Mnesia 默认在内部使用哈希表，因此没有可以依赖的特定顺序。一般来说，如果系统之间没有某种共识，这个问题是无法解决的。说一个全球柜台或类似的东西。

更好的方法是考虑是否真的需要严格订购所有东西。通常你不想要并且只想要一个较弱的顺序，如“这*肯定*发生在以前，但这大致是同时，所以让我们在它们之间选择一些顺序。”

# ruby-on-rails - Rails 生成控制器、模型和视图的良好实践

> ID：14252999
> 
> 赞同：0
> 
> 时间：2013-01-10T07:44:07.877
> 
> 标签：ruby-on-rails, coding-style

在 Rails 中，创建模型、控制器和视图的最佳实践是什么？我知道三种方式。

1）脚手架“一切”。

2）通过终端生成每个控制器和模型。

3) 手动创建所有文件。（这样做时需要小心。我必须牢记控制器的复数形式和在模型中使用单数）

目前，我遵循第三种方法，尽管它涉及一些风险。我只想知道要遵循的最佳做法是什么。如果还有其他方法，我很高兴知道。谢谢你的时间。

PS：我是RoR的初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:53:45.707

我认为脚手架相当糟糕，因为它会产生很多你可能不想要的东西，我只将它用于尖峰解决方案。

在实际项目中，我的公司规则书说我必须使用测试驱动开发（我喜欢）。这意味着在默认方法中（有时我无法遵循）我从集成测试开始并遵循它。（我构建了一个路由，然后是一个控制器方法，然后是一个视图，然后是一个模型......）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:00:51.450

我确实相信脚手架是最好的方法，因为它可以自动完成手动创建的整个过程。您将获得您的模型、控制器、视图和迁移，`rails g scaffold myscaffold`这就是为什么我们将 ruby​​ on rails 称为敏捷 Web 开发解决方案。因此，支持开发人员快速引导软件或快速更改功能的工具可以帮助您保持敏捷。

另一件事是，如果您可以快速引导一个项目，您可能会更灵活地对优先级的重新排序做出反应。这将有助于以更清晰和更好的方式对您的开发计划进行核心开发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-26T01:18:32.337

没有完美的解决方案。如果你手动编码，你真的在​​使用惯用的 rails 吗？对于“中级”程序员 - 既不想手动编写所有代码，也不能依赖简单的脚手架。您必须了解生成的代码，但将 60 wpm 的完美编码留给大师！

我建议三个语用学

A. 有一个好的开始。样板化是在 Javascript 和 Node 项目中执行此操作的主要方法，您可以在其中选择所需的模块（为 auth 设计，为 ajaxy 表单设计 simple_form，twitter-bootstrap 等），然后从一个负载充足的站点开始，而不是零碎地固定它. 这并不重 - 仅用于制作“PRO”网站。我仍在寻找好的 RoR 样板、railsapps（composer 是姊妹站点）和 railsbricks，以及好的旧 Rails 模板，Rails Engines 应该允许你这样做。遗憾的是，没有足够的说明如何做到这一点，因为它需要“大师”来提供包含最佳实践的经过测试的配置。

B. 模型优先方法。从第一天起就从一个体面的模型开始。不要一一添加字段，而是坐下来尝试为您的站点获取 3-4 个核心表，然后确定它们之间的关系。“敏捷”的人可能会反对极简主义的方法，但如果你有经验，为什么不“提前设计一点”。当然，您想在编码之前避免 10 多个表格或 ER 图的另一个极端！如果你有不错的模型/用户设计，你可以为你的 MVP（最小可行产品）提前很好地预测网站的外观和固有模型。这当然表明您对您希望应用程序的外观有大约 2-4 周的远见:)

C. 测试/迁移更少的脚手架。混合方法更实用，您首先单独进行模型生成和任何数据迁移，然后在没有测试或迁移的情况下搭建支架。您可以查看 Rails 4 for Beginners book ch 5 中的示例。好处是 - 您不会覆盖手工制作的模型代码，并让脚手架负责处理 RoR 魔法为您提供的每个模型约 5+ 个文件的脏细节。# 1\. 生成带有标题、正文的模型文章 # 执行 rake db:create，手动向模型添加验证，例如存在性、最小长度等架构编辑或脚手架全部） $ rails 生成迁移 add_excerpt_and_location_to_articles 摘录：字符串位置：

如果您明白了这一点 - 您可以看到在您改进模型时，脚手架被视为丢弃。此时您真的不关心覆盖控制器详细信息或视图。但是您正在保护您的模型，并手动编辑模型之间的关系，以及详细的验证。

作为一个附带好处，模型优先的实用主义适用于这种方法。在停止搭建脚手架之前，您可以在应用程序中获得 5-20 个模型。到那时，您的代码模型应该是相当确定的。