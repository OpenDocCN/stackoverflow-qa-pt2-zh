# StackOverflow 问答 12910000-12910999

# mysql - mysql远程托管

> ID：12910000
> 
> 赞同：0
> 
> 时间：2012-10-16T07:58:04.893
> 
> 标签：mysql, jsp, hosting, localhost

您好，我在 Eatj.com 上托管了一个小网页（JSP+Mysql），试用期为 15 天。我的问题是本地主机上的数据库连接成功，但托管我的连接字符串后出现异常。代码：

```
try{
  String connectionURL = "jdbc:mysql://pulicipaddress/dbname"; 

  Connection con= null; 
  Class.forName("com.mysql.jdbc.Driver"); 
  con = DriverManager.getConnection(connectionURL, "eatjid", "eatjpassword");
... 
```

它说我的连接没有定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:24:47.097

如果 JSP 和数据库都托管在eatj.com，我希望您已经从eatj.com 获得了数据库登录信息。我想 - 与大多数主机一样 - 无法从“外部”访问数据库，因此它必须是一些内部服务器名称。

此外，当数据库和访问数据库的代码都在托管环境中运行时，通过公共地址访问数据库是没有意义的。

通常，在托管环境中，事情是这样工作的：

```
 +- "hoster only" ----------------+
External Viewer ----> | JSP-Code ----> Database Server |
                      +--------------------------------+ 
```

外部查看器请求由 JSP 创建的网页，JSP 在“仅主机”环境中执行所有操作。

# c# - 序列化为xml

> ID：12910002
> 
> 赞同：0
> 
> 时间：2012-10-16T07:58:06.417
> 
> 标签：c#, .net, xml, serialization

我有一个类，我需要将它序列化为 XML，但只有特定的属性，即不是全部。最好的方法是什么？另一种方法是创建属性及其值的字典，然后序列化字典。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:01:33.290

看看[XmlAttributes.XmlIgnore Property](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributes.xmlignore.aspx)。您需要做的就是装饰您不想序列化的字段`[XmlIgnoreAttribute()]`

示例类：

```
// This is the class that will be serialized.  
public class Group
{
   // The GroupName value will be serialized--unless it's overridden. 
   public string GroupName;

   /* This field will be ignored when serialized--unless it's overridden. */
   [XmlIgnoreAttribute]
   public string Comment;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:34:19.997

上面的答案效果很好。但我不喜欢所有内容都被序列化并且只有指定字段不存在的想法。只是一个不同偏好的情况，真的，我喜欢控制事情的运作方式。

使用来自 MS 的 ISerializable 是：“允许对象控制自己的序列化和反序列化。” 和一些反思：

```
 // Required by ISerializable
    public virtual void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        FieldInfo[] fields = this.GetType().GetFields(BindingFlags.NonPublic | BindingFlags.Instance);

        foreach (FieldInfo field in fields)
        {
            if (!IsSerializable(field))
                continue;

            info.AddValue(field.Name, field.GetValue(this));
        }
    }

    protected bool IsSerializable(FieldInfo info)
    {
        object[] attributes = info.GetCustomAttributes(typeof(SerializableProperty), false);

        if (attributes.Length == 0)
            return false;

        return true;
    } 
```

“SerializableProperty”是我放在要序列化的字段上的空属性。

至于哪个序列化器，完全取决于你。XML 很好，因为您可以在之后阅读和编辑它。但是，我选择了 BinaryFormatter，它可以在复杂或大型结构的情况下提供更小的文件大小。

# php - 创建多语言网站 - 静态还是动态？

> ID：12910005
> 
> 赞同：1
> 
> 时间：2012-10-16T07:58:24.990
> 
> 标签：php, constants, multilingual

我正在创建一个网站，它必须是多语言的。必须进行翻译并添加前缀*（NO auto-translations api）*。我的问题是，什么更有效？：

*   为每种语言创建一个文件集。
*   创建一个文件集并通过 PHP 常量显示文本。
*   我还想过做一个 MySql 查询来获取一个包含文档开头所有翻译的数组。

**注意**：* 不会有非常大的文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:02:51.173

从长远来看，最好的选择是为每种语言使用一个文件集。如果您使用行业标准格式，例如 GNU gettext，PHP 已[内置支持](http://php.net/manual/en/book.gettext.php). 此外，第三方翻译公司和翻译工具通常支持该格式，因此长期站点维护对开发人员的依赖较少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:05:22.900

我正在将[Zend Translate](http://framework.zend.com/manual/1.12/en/zend.translate.html)用于我正在开发的网站。

Zend Framework 中的大部分组件都可以作为独立组件使用。我正在使用完整的堆栈，但仅使用 Zend Translate 应该不是主要问题。

至于使用数据库获取翻译，我认为这取决于您处理的内容类型。例如，对于 Joomla！有些组件以不同的语言存储同一篇文章的不同版本。

我会推荐 Zend Translate，因为你有不同的选项来获取翻译：PHP 数组、INI 文件、gettext、xml。

您可以扩展适配器类以创建数据库后端适配器。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T08:23:53.507

我认为它会对您有所帮助：[http](http://www.youtube.com/watch?v=v7vCp_TFcdU)
://www.youtube.com/watch?v=v7vCp_TFcdU 它用于`session`存储所选语言并为每种语言使用一个数组。

# jquery - 使用 jquery 显示有限的文本

> ID：12910013
> 
> 赞同：2
> 
> 时间：2012-10-16T07:58:50.227
> 
> 标签：jquery

我想使用 jquery 显示有限的文本（50 个字符）。请让我怎么做。我正在使用以下代码。

```
var ta = $('title', item).text().replace(/\(.*?\)/, ""); 
```

这句话的输出是“未能获得非洲国家杯的参赛资格可能会给埃托奥的国脚带来遗憾”。我只想展示50个角色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:01:19.040

你可以使用这样的东西：

```
String sOut = $('title', item).text().substring(0,50); 
```

虽然我不知道那里`item`在做什么。:|

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:01:14.653

试试这个：

```
var ta = $('title', item).text().substring(0,50) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T08:01:25.013

```
var ta = $('title', item).text();
var edited = ta.substring(0,50); 
```

***[阅读更多](http://www.w3schools.com/jsref/jsref_substring.asp)***

上面的代码是假设*item*是范围创建的

或者您可以使用 Jquery 链接将其写在一行中。

```
var ta = $('title', item).text().substring(0,50); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T08:03:02.370

```
if(ta.length > 50){
   ta = ta.substring(0, 47) + '...';
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T08:01:57.617

```
var ta = $('title', item).text();
ta = ta.substring(0,50); 
```

# c++ - 大小 不被接受为完整的模板参数

> ID：12910015
> 
> 赞同：-2
> 
> 时间：2012-10-16T07:58:52.110
> 
> 标签：c++, templates, c++11

编译器（GCC 4.7.2）似乎对这段代码有问题：

```
 template<int BoolSize> struct BoolReg {};
  template<> struct BoolReg<1> { static const Jit::RegType Val_t = Jit::u8; };
  template<> struct BoolReg<2> { static const Jit::RegType Val_t = Jit::u16; };
  template<> struct BoolReg<4> { static const Jit::RegType Val_t = Jit::u32; };

  template <class T> struct JitRegType {};

  template <> struct JitRegType<bool>   { static const Jit::RegType Val_t = BoolReg< sizeof<bool> >::Val_t; }; 
```

它说：

> 错误：模板参数 1 无效

在上面代码的最后一行。而当传递一个整数文字而不是`sizeof(bool)`它时工作正常：

```
 template <> struct JitRegType<bool>   { static const Jit::RegType Val_t = BoolReg<1>::Val_t; }; 
```

但是，`bool`标准没有指定 a 的大小，因此我想使用更便携的方式并根据`bool`.

这真的是格式错误的 C++11 吗？

标准说：

> 非类型、非模板模板参数的模板参数应为以下之一：
> 
> 整数或枚举类型的整数常量表达式；或非类型模板参数的名称；或具有外部链接的对象或函数的地址，包括函数模板和函数模板 ID，但不包括非静态类成员，表示为 & id-expression 其中 & 是可选的，如果名称引用函数或数组，或如果相应的模板参数是参考；或指向成员的指针，如 5.3.1 中所述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:06:20.717

你想使用`sizeof(bool)`而不是`sizeof<bool>`. 那`sizeof`不是模板。

# html - 中心图像，较小的图像围绕外部旋转

> ID：12910022
> 
> 赞同：0
> 
> 时间：2012-10-16T07:59:40.150
> 
> 标签：html, css

我需要有一个中央大图像，较小的图像围绕它的外部旋转。可以用css和html完成吗？

另外，做这个静态的代码是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:01:43.603

恐怕您不能使用 HTML/CSS。使用 javascript，您可以通过一些三角函数计算轻松完成

# uml - 如何在 UML 序列图中显示 System.out 和 System.err？

> ID：12910025
> 
> 赞同：1
> 
> 时间：2012-10-16T07:59:50.913
> 
> 标签：uml, sequence-diagram

我正在为一个`writeToFile()`方法绘制一个 UML 序列图。在该方法中，进行了以下调用：

*   System.out.println()
*   System.err.println()
*   System.exit();

我对如何在图中表示这一点感到困惑。我是否分别绘制了三个单独的矩形：System.out、System.err 和 System？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:18:52.420

> 我是否分别绘制了三个单独的矩形：System.out、System.err 和 System？

这是一种务实且完全有效的方法。每个都是各种各样的“对象”，以这种方式显示很好。

另一种方法是为“系统”显示单个对象生命线。如果（a）您有许多其他对象并且（b）突出显示哪些 out/err/exit 在您要显示的内容中并不那么重要，则可能会减少混乱。

真正归结为您要传达的内容。

hth。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:08:41.883

您可能想要使用三个生命线：

1.  系统输出
2.  系统错误
3.  系统

然后显示三个调用

1.  println（给 System.out 实例的消息）
2.  println（给 System.err 实例的消息）
3.  退出（给系统实例的消息）

# heroku - Heroku 在部署我的应用程序时抛出错误。无法理解

> ID：12910031
> 
> 赞同：2
> 
> 时间：2012-10-16T08:00:18.020
> 
> 标签：heroku

我的 GIT 提交和推送命令成功通过，但我的应用程序无法启动，并告诉我出现了服务器错误。我检查了 Heroku 服务器的状态，它以最佳性能运行。

这是我在日志中发现的错误：

```
C:/Documents and Settings/Administrator/.heroku/client/lib/heroku/updater.rb:155
:in `spawn': No such file or directory - C:/Program Files/Heroku/bin/heroku upda
te (Errno::ENOENT)
        from C:/Documents and Settings/Administrator/.heroku/client/lib/heroku/u
pdater.rb:155:in `background_update!'
        from C:/Program Files/Heroku/lib/heroku/updater.rb:135:in `inject_libpat
h'
        from C:/Program Files/Heroku/bin/heroku:19:in `<main>' 
```

我不明白这是什么意思。你能帮我么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:16:23.507

问题似乎与 2.32.13 版本有关。删除此版本并安装 2.32.14 解决了 Windows XP 上的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:23:46.020

根据[这篇文章](https://stackoverflow.com/questions/8899029/heroku-toolbelt-fails-to-run-after-last-update)（在Ubuntu上）删除和安装应该可以解决问题

# asp.net-mvc-3 - 如何在不刷新页面的情况下将表单数据发布到跨域

> ID：12910032
> 
> 赞同：0
> 
> 时间：2012-10-16T08:00:24.013
> 
> 标签：asp.net-mvc-3, jquery, asp.net-ajax

我已经尝试了很多关于使用 Ajax 发布方法将表单数据发布到跨域的方法。但我收到了成功的回应。但表单数据未发布到请求的跨域，而不是在浏览器中显示 404 网络错误。

谁能建议如何在 ASP.NET MVC 应用程序中将表单数据发布到跨域？

# android - 在 Android 4 中使用带有选项卡的 ActionBar 时，片段中的 ListView 不显示

> ID：12910033
> 
> 赞同：0
> 
> 时间：2012-10-16T08:00:24.623
> 
> 标签：android, listview, tabs, android-actionbar, fragment

我使用 Eclipse 向导创建了一个带有 ActionBar 和选项卡的活动。我想在我的三个选项卡中显示 ListViews，但如果在我运行我的应用程序时没有显示它们。

带有选项卡的活动代码：

```
public class CreateProjectManually extends FragmentActivity implements ActionBar.TabListener {

    /**
     * The {@link android.support.v4.view.PagerAdapter} that will provide fragments for each of the
     * sections. We use a {@link android.support.v4.app.FragmentPagerAdapter} derivative, which will
     * keep every loaded fragment in memory. If this becomes too memory intensive, it may be best
     * to switch to a {@link android.support.v4.app.FragmentStatePagerAdapter}.
     */
    SectionsPagerAdapter mSectionsPagerAdapter;

    /**
     * The {@link ViewPager} that will host the section contents.
     */
    ViewPager mViewPager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_create_project_manually);
        // Create the adapter that will return a fragment for each of the three primary sections
        // of the app.
        mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

        // Set up the action bar.
        final ActionBar actionBar = getActionBar();
        // set the app icon as an action to go home
        actionBar.setDisplayHomeAsUpEnabled(true); 
        //enable tabs in actionbar
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

        // When swiping between different sections, select the corresponding tab.
        // We can also use ActionBar.Tab#select() to do this if we have a reference to the
        // Tab.
        mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
            @Override
            public void onPageSelected(int position) {
                actionBar.setSelectedNavigationItem(position);
            }
        });

        // For each of the sections in the app, add a tab to the action bar.
        for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
            // Create a tab with text corresponding to the page title defined by the adapter.
            // Also specify this Activity object, which implements the TabListener interface, as the
            // listener for when this tab is selected.
            actionBar.addTab(
                    actionBar.newTab()
                            .setText(mSectionsPagerAdapter.getPageTitle(i))
                            .setTabListener(this));
        }
    }

    /**
     * Actionbar
     * */ 
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
      switch (item.getItemId()) {
        case R.id.menu_save:
            //TODO Speichern implementieren
            Toast.makeText(getBaseContext(), "Speichern",Toast.LENGTH_LONG).show(); 
            break;
        case android.R.id.home:
            // app icon in action bar clicked; go home
            Intent intent = new Intent(this, ProjectList.class);
            intent.putExtra("Uniqid","From_CreateProjectManually_Activity");
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(intent);
            return true;    
        default:
            break;
        }
      return true;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_create_project_manually, menu);
        return true;
    }

    @Override
    public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    }

    @Override
    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
        // When the given tab is selected, switch to the corresponding page in the ViewPager.
        mViewPager.setCurrentItem(tab.getPosition());
    }

    @Override
    public void onTabReselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    }

    /**
     * A {@link FragmentPagerAdapter} that returns a fragment corresponding to one of the primary
     * sections of the app.
     */
    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int i) {
            Fragment fragment = new DummySectionFragment();
            Bundle args = new Bundle();
            args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, i + 1);
            fragment.setArguments(args);
            return fragment;
        }

        @Override
        public int getCount() {
            return 3;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            switch (position) {
                case 0: return getString(R.string.building).toUpperCase();
                case 1: return getString(R.string.room).toUpperCase();
                case 2: return getString(R.string.devices).toUpperCase();
            }
            return null;
        }
    }

    /**
     * A dummy fragment representing a section of the app, but that simply displays dummy text.
     */
    public static class DummySectionFragment extends Fragment {
        public DummySectionFragment() {
        }

        public static final String ARG_SECTION_NUMBER = "section_number";

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {

            return (LinearLayout) inflater.inflate(R.layout.listviews, container, false);

        }
    }

} 
```

以及带有 ListView 的布局的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/fragment_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <ListView
            android:id="@+id/listView1"
            android:layout_width="match_parent"
            android:layout_height="259dp" >
        </ListView>

    </LinearLayout>

</LinearLayout> 
```

TextView 显示，但 ListView 不显示。问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T14:26:55.940

首先，您必须为您拥有的列表视图创建适配器，并使用它自己的自定义行，并根据根视图在 onCreateView 方法中找到它的 id，如下所示：

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View rootView = inflater.inflate(R.layout.fragment_calendar_dummy,
                container, false);
        /*TextView dummyTextView = (TextView) rootView
                .findViewById(R.id.section_label);
        dummyTextView.setText(Integer.toString(getArguments().getInt(ARG_SECTION_NUMBER)) + "HOLA");*/
        //getFavorito(ARG_SECTION_NUMBER);

        //asyncFavorite().execute(ARG_SECTION_NUMBER);
        lista = (ListView) rootView.findViewById(R.id.Your own list);
        loadingLista = (RelativeLayout) rootView.findViewById(R.id.loadingLista);
        int mes = getArguments().getInt(ARG_SECTION_NUMBER);
        new asyncFavorite().execute(Integer.toString(mes));
        Log.i("mfb", "puse el-----------------" + Integer.toString(mes));

        return rootView;
    } 
```

在此之后，您必须创建一个方法来扩充您的列表，创建一个包含列表所有元素的对象的数组列表，并使用它来扩充所有行：

```
m_orders = new ArrayList<Order>();
            //JSONObject data = new JSONObject(Fetcher.getMonthBirthday(FBAccount, params[0]));
            //resData = data.getJSONArray("data");

            //Log.i("mfb", "RESDATA::::::::::" + resData + "////////////////////" +Index.userID);

            JSONObject objeto = null;

            String nombre = "";
            String cumpliendo = "";
            String mes = "";
            String dia = "";
            String uuid = "";

            String favorite = "";
            String ownerID = "";

            int mesNumero = 0;

            String[] cumple = null;
            String pasoMes = "";

            for(int i = 0; i<resData.length(); i++){
                objeto = resData.getJSONObject(i);
                nombre = objeto.getString("name");
                cumpliendo = objeto.getString("edad");

                cumple = objeto.getString("birthday").split("-");

                dia = cumple[2];
                pasoMes = cumple[1];
                mesNumero = Integer.parseInt(pasoMes);

                //mes = getMes(mesNumero);

                uuid = objeto.getString("uuid");

                favorite = "1";
                ownerID = objeto.getString("user_id");

                m_orders.add(i, new Order(""+nombre, ""+cumpliendo, ""+mes, ""+dia, "" + uuid, ""+favorite, ""+ownerID, "" + FBAccount));                       

                //Log.i("mfb", "HH " + nombre);

            } 
```

您必须将适配器设置为您的列表

```
runOnUiThread(new Runnable() {

                @Override
                public void run() {
                    try {                   
                        Log.v("mfb", " Runnable "+m_orders.size());
                        adapterOrder = new orderItemAdapter(activity.getApplicationContext(), android.R.layout.simple_list_item_1, m_orders);
                        lista.setAdapter(adapterOrder);
                        adapterOrder.notifyDataSetChanged();
                    }catch (NullPointerException e){
                        Log.e("Error", " generateAdapter NullPointerException ERROR => "+e.getMessage());
                    }catch (Exception e) {
                        // TODO: handle exception
                        Log.e("Error", " generateAdapter Exception ERROR => "+e.getMessage());
                    }                       
                }
            }); 
```

适配器是这样的：

```
public class orderItemAdapter extends ArrayAdapter<Order>{
    public ArrayList<Order> orders;
    LayoutInflater inflater = null;

    public orderItemAdapter(Context context, int textViewResourceId, ArrayList<Order> orders){
        super(context, textViewResourceId, orders);
        this.orders = orders;   

        Log.v("mfb", "orderItem "+this.orders.size());
    }

    public void add(int index, Order order){
        this.orders.add(index, order);
    }

    @Override        
    public View getView(int position, View convertView, ViewGroup parent){

        View vi=convertView;
        LayoutInflater inflater = null;

        if(convertView==null){  
            inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            vi = inflater.inflate(R.layout.list_user, null);
        }

        Order order = orders.get(position);
        if(order != null){
            TextView nombre = (TextView)vi.findViewById(R.id.nombre); 
            TextView edadCumplir = (TextView)vi.findViewById(R.id.edadCumplir);
            //TextView mes = (TextView)vi.findViewById(R.id.mes);
            TextView dia = (TextView)vi.findViewById(R.id.dia);

            //Log.v("mfb", " order position => "+position);

            if(nombre != null){
                nombre.setText(orders.get(position).getNombre());
                //Log.v("mfb", "orderItemAdapter nombre =>" + nombre.getText());
            }

            if(edadCumplir != null){
                edadCumplir.setText("Turning " + orders.get(position).getCumpliendo());
            }

            /*if(mes != null){
                mes.setText(orders.get(position).getMes());
            }*/

            if(dia != null){
                dia.setText(orders.get(position).getDia());
            }
        }           
        return vi;
    }               
} 
```

# php - 如何从 MySQL 大表中删除一列

> ID：12910035
> 
> 赞同：3
> 
> 时间：2012-10-16T08:00:25.450
> 
> 标签：php, mysql, query-optimization

我有一个 250GB 500M 行的 MySQL 表，想删除它的一列。该列是 VARCHAR(255)。我想以尽可能少的停机时间来执行此操作。想法：

1.  我可以添加任何有助于此操作的配置吗？
2.  在每一行之前迭代php并删除其中的值会更好吗？
3.  之后会需要 OPTIMIZE TABLE 吗？
4.  这种程序的合理时间估计是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:05:52.207

为了确保最短的停机时间，我会亲自备份并恢复到备用数据库，然后在再次恢复之前执行“删除列”。

1.  [关联](https://www.bitrixsoft.com/support/training/course/index.php?COURSE_ID=22&LESSON_ID=1274)

2.  可能是，但我会说这需要更长的时间并且更容易出错。

3.  是的，好主意，也可以考虑事先使用 ANALYZE TABLE

优化表；OPTIMIZE 命令应在 DBMS 脱机以进行计划维护时运行。该命令是非标准 SQL。

# mysql - DISTINCT 与 LEFT JOINS

> ID：12910037
> 
> 赞同：0
> 
> 时间：2012-10-16T08:00:38.523
> 
> 标签：mysql

我从不同的表中获取记录并避免重复行我使用`GROUP BY`子句，`DISTINCT`比`GROUP BY`我尝试使用（作为替换）的大量`JOIN`查询要快，但它也获取重复记录。知道如何实现优化、最快和高效的查询。`DISTINCT``GROUP BY`

**查询样本：**

这里索引是`projectId`在项目表中的字段上设置的。

```
SELECT DISTINCT p.*, p.projectId as proId, plat.*, con.*, dom.*, sta.*, tech.*, role.*, pimg.*, c.*, dur.* 
                FROM projects p 
                LEFT JOIN projectplatforms pplat ON p.projectId = pplat.projectId JOIN platforms plat ON plat.platformId = pplat.platformId 
                LEFT JOIN projectcountries pcon ON p.projectId = pcon.projectId JOIN countries con ON con.countryId = pcon.countryId 
                LEFT JOIN projectdomains pdom ON p.projectId = pdom.projectId JOIN domains dom ON dom.domainId = pdom.domainId 
                LEFT JOIN statuses sta ON p.statusId = sta.statusId 
                LEFT JOIN projecttechs ptech ON p.projectId = ptech.projectId JOIN technologies tech ON tech.techId = ptech.techId 
                LEFT JOIN projectroles prole ON p.projectId = prole.projectId JOIN roles role ON role.roleId = prole.roleId 
                LEFT JOIN projectimages pimg ON p.projectId = pimg.projectId
                LEFT JOIN clients c ON p.clientId = c.clientId 
                LEFT JOIN durations dur ON p.durationId = dur.durationId 
                WHERE p.featured = 1 
                ORDER BY p.year DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:46:18.373

使用 DISTINCT mysql 将返回所有唯一的行。如果您在一个或部分列上使用 GROUP BY，情况就不一样了。您可能想使用 GROUP BY 而不是 DISTINCT。

# tags - freemarker.runtime - 模板处理错误：“没有为 http://www.springframework.org/security/tags 定义映射”

> ID：12910039
> 
> 赞同：1
> 
> 时间：2012-10-16T08:00:44.120
> 
> 标签：tags, spring-security, freemarker

弹簧安全：3.0.2 Freemarker：2.3.19

我想在 freemarker 中使用 springSecurity 标签，但它会抛出这个错误：

[16 14:10:46,349 错误] [btpool0-0] freemarker.runtime - 模板处理错误：“没有为[http://www.springframework.org/security/tags](http://www.springframework.org/security/tags)定义映射”

没有为[http://www.springframework.org/security/tags定义映射](http://www.springframework.org/security/tags)

## 有问题的指令：

==> 赋值：security=JspTaglibs["http://www.springframework.org/security/tags"] [on line 1, column 1 in macro/header.ftl] in user-directive page.bodytemplate [on line 6 , items.ftl 中的第 1 列]

ftl: <#assign security=JspTaglibs["http://www.springframework.org/security/tags"] />

pom.xml

```
 <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-taglibs</artifactId>
        <version>3.0.2.RELEASE</version>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-29T15:46:34.010

如果问题发生在 tomcat7-maven-plugin 而不是 jetty-maven-plugin 上，您很可能会受到 tomcat7 未完全初始化的 servlet 上下文的影响。

代替“tomcat:run”，执行“tomcat:run-war”

后者确保您的 Web 应用程序（几乎）完全被构建和引导，就像在 /WEB-INF/libs 中有 jars。freemarker 的 tlds 扫描逻辑将像一个魅力一样工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:51:12.883

切换到 run-jetty-run maven 模块时遇到此错误。模块 jetty:run 没有这个错误。

这帮助了我：

1.  下载 spring-security.tld 文件并将其放在 webapp/WEB-INF/tld 文件夹中

2.  将此代码添加到 web.xml：

    ```
    <jsp-config>
        <taglib>
            <taglib-uri>http://www.springframework.org/security/tags</taglib-uri>
            <taglib-location>/WEB-INF/tld/spring-security.tld</taglib-location>
        </taglib> 
    </jsp-config> 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T18:57:22.513

您要下载的标签库似乎包含该标签 `org.springframework.security.taglibs.authz.AclTag`。Spring Security taglibs（具有此类）的最后一个版本是 2.0.7 版本，因此存在问题。

您可以将 spring 更改为 2.0 版本。[或者您可以从https://src.springframework.org/svn/spring-security/branches/spring-2.5-integration-branch/taglibs/src/main/resources/META-INF/security.tld](https://src.springframework.org/svn/spring-security/branches/spring-2.5-integration-branch/taglibs/src/main/resources/META-INF/security.tld)下载 security.tld和在 freemarker 模板上使用它，如下所示：`<#assign security=JspTaglibs["/WEB-INF/tlds/security.tld"] />`

顺便说一句，我真的不明白为什么[http://www.springframework.org/security/tags](http://www.springframework.org/security/tags)不起作用......我已经尝试像你一样使用它，我也遇到了同样的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T11:42:25.640

这不起作用的原因与 Servlet 容器（也许还有规范）有关。如果您通过命名空间关联标记库，则只有当 JAR 位于 WEB-INF/lib 文件夹中时，它才会自动执行此操作。

如果将 spring-security-taglibs.jar 移动到 WEB-INF/lib 文件夹中，它将起作用。

# android - 从 url 获取图像需要很多时间，尽管它会在 webView 中快速加载

> ID：12910045
> 
> 赞同：0
> 
> 时间：2012-10-16T08:00:56.307
> 
> 标签：android

我有一个位于 HTTP url 的图像，当我尝试将其加载到活动中的 webview 中时，它不需要太多时间来加载，但是当我尝试通过创建如下所示的位图将其设置为 ImageView 时

```
fis = new FileInputStream(f);
fis = new java.net.URL(filePath).openStream();
bfis = new BufferedInputStream(fis);
b = BitmapFactory.decodeStream(fetch(filePath), null, o2);
fis.close(); 
```

这需要很多时间，如何有效地将图像设置为 ImageView ？

您还可以解释为什么它在 webView 中快速加载，而从输入流中获取它需要大量时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:07:31.690

> UrlImageViewHelper 将自动下载、保存和缓存 BitmapDrawables 中的所有图像 url。重复的 url 不会被加载到内存中两次。位图内存使用弱引用哈希表进行管理，所以一旦图像不再被您使用，它将自动被垃圾收集。

[https://github.com/koush/UrlImageViewHelper](https://github.com/koush/UrlImageViewHelper)

# wpf - 在屏幕调整大小时自动调整后面的代码中画线

> ID：12910046
> 
> 赞同：0
> 
> 时间：2012-10-16T08:01:01.423
> 
> 标签：wpf, silverlight

我需要在后面的代码中画一条线，从特定的 X、Y 点开始，到特定的 X、Y 点结束。这些点永远不会改变，但随着画布大小的调整，线条将需要调整。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:04:52.043

为什么不在水平画布大小上画线并在调整大小后立即刷新画布？应该是微不足道的。

# java - 删除 Windows 上 JTextPane 中的默认填充

> ID：12910047
> 
> 赞同：3
> 
> 时间：2012-10-16T08:01:04.850
> 
> 标签：java, swing, jlabel, jtextpane

为了在 Java Swing GUI 上显示信息，我混合使用了`JLabel`组件和`JTextPanes`.

如下图所示，`JLabels`除了右下角标记为红色和黄色的标签外，所有标签均除外。这是 a `JTextPane`，因为我不知道渲染前的文本长度，它必须换行（这在 a 中不起作用`JLabel`，对吧？）。

![Windows 和 Mac 上的不同渲染](../Images/bf64014c2b17fc1ed3291a9e70be1462.png)

左列右对齐，右边距为 5，右列左对齐，边距为零。

在 Eclipse WindowBuilder 和 Windows 7 渲染中，`JTextPane`显然有一个我无法删除的小填充。

令人惊讶的是，我的 Mac（Mountain Lion）上没有显示此填充，并且`JTextPane`对齐得非常好。

有什么方法可以在 Windows 和 Mac 上实现相同的对齐外观？为什么`JTextPane`组件在窗口上有这种烦人的填充？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T08:58:58.803

使用`textPane.getMargin()/setMargin()` 但实际上它是由 L&F 定义的

# grails - Grails spring security grails.plugins.springsecurity.providerNames

> ID：12910049
> 
> 赞同：1
> 
> 时间：2012-10-16T08:01:14.420
> 
> 标签：grails, spring-security

假设我想为同一个登录请求使用两个身份验证提供程序。

```
grails.plugins.springsecurity.providerNames = [
    'customAuthenticationProvider',
    'ldapAuthProvider',
    'anonymousAuthenticationProvider',
    'rememberMeAuthenticationProvider'] 
```

场景是我首先使用我的 customAuthenticationProvider 进行身份验证，它授予/拒绝访问权限。完成此操作后，它会继续检查是否能够向 LDAP 服务器验证用户身份，该服务器反过来授予/拒绝。

这是 Spring Security 的运行方式，例如上面的 providerNames 列表？或者，如果第一个提供者访问/拒绝并采取相应的行为，它是否会授予访问权限。

是否需要通过所有身份验证尝试才能获得访问权限？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T02:24:06.957

将按列出的顺序尝试提供者，直到其中一个验证成功，或者它们都失败。当其中一个进行身份验证时，该过程将停止，其余的提供者将不会被尝试。

# android - 较新的手机无法使用宽带连接

> ID：12910051
> 
> 赞同：0
> 
> 时间：2012-10-16T08:01:17.213
> 
> 标签：android, sockets, ksoap

所以我正在尝试使用 ksoap 从 web 服务中收集一些数据。它在旧手机上运行良好，在我有 wifi 连接时在新手机上运行良好。当我从移动提供商更改为宽带时，它返回错误：

```
 java.net.SocketException: Socket is closed 
```

有人知道为什么会这样吗？真的很奇怪，我有两部手机都使用相同的应用程序连接到同一个 web 服务，而旧的可以工作而新的不能。

顺便说一句我的代码：

```
String METHOD_NAME = "MPList";
String SOAP_ACTION = "https://server.location:443/MobileWS/#MPList";
String NAMESPACE = "https://server.location:443/MobileWS/";
String URL = "https://server.location:443/MobileWS/";

SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
request.addProperty("user", user);
request.addProperty("pass", pass);

SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER12); 
List<HeaderProperty> headerList = new ArrayList<HeaderProperty>();

headerList.add(new HeaderProperty("Content-Type", "text/xml; charset=utf-8"));
headerList.add(new HeaderProperty("SoapAction", "https://server.location/#MPList"));
envelope.setOutputSoapObject(request);
HttpTransportSE httpTransport = new HttpTransportSE(URL);  
httpTransport.debug = true;
try{
    httpTransport.call(SOAP_ACTION, envelope, headerList);
    SoapObject response = (SoapObject)envelope.bodyIn;
    String a=httpTransport.responseDump;
} catch (IOException e2) {
    e2.printStackTrace();
} catch (XmlPullParserException e2) {
    e2.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:44:59.670

好吧，Android 4.0.3 和 4.0.4 似乎存在问题，因此它不适用于 https。链接：[http ://code.google.com/p/android/issues/detail?id=29509&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars](http://code.google.com/p/android/issues/detail?id=29509&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)

如果有人再次遇到这个问题，这里是解决方案：

你必须添加具有“keep-alive”值的http“Connection”属性。

```
 headerList.add(new HeaderProperty("Connection", "keep-alive")); 
```

解决了我的问题！！！

# java - 如何解决通用递归绑定问题？

> ID：12910053
> 
> 赞同：1
> 
> 时间：2012-10-16T08:01:18.907
> 
> 标签：java, generics

我在编译我的代码时遇到了一些问题。

```
$ mvn clean compile 
```

像这样的错误通知我。

```
[58,30] type parameters of <D,K>D cannot be determined; no unique maximal instance exists for type variable D with upper bounds DS, 
```

也许这个问题是由`recursive bounds of generic types`. 正确的？

参考： [泛型在 Eclipse 中编译和运行，但在 javac 中不编译](https://stackoverflow.com/questions/2858799/generics-compiles-and-runs-in-eclipse-but-doesnt-compile-in-javac)

我该如何解决这个问题？

```
@SuppressWarnings("unchecked")
public static <D extends DataStore<K, T>, K, T extends Persistent> D createDataStore(Class<T> persistent, Properties properties) throws IOException {
    try {
        return (D) (new HBaseStore<K, T>());
    } catch (Exception e) {
        throw new RuntimeException("cannot initialize a datastore", e);
    }
}

public static <DS extends DataStore<U, P>, U, P extends Persistent> DS createDataStore(Class<P> persistent) throws IOException {
    return createDataStore(persistent, null); // ERROR
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:09:30.450

这意味着该类型`D`仅作为泛型参数存在。例如`T`可以从方法参数中解析`Class<T> persistent`。如果将方法的签名更改为以下内容，则可以解决此问题：

```
public static <D extends DataStore<K, T>, K, T extends Persistent> D createDataStore(Class<T> persistent, Class<D> dataStoreType, Properties properties) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:43:10.810

当参数类型没有为编译器提供足够的信息来推断泛型类型参数时，您可以显式地提供类型参数。对于非静态方法，您会说`this.<list of type parameters>methodName(...)`. 对于像这样的静态方法，您放置类名而不是`this`

```
public static <DS extends DataStore<U, P>, U, P extends Persistent> DS createDataStore(Class<P> persistent) throws IOException {
    return NameOfThisClass.<DS, U, P>createDataStore(persistent, null); // ERROR
} 
```

# javascript - 获取元素集合的各个高度

> ID：12910056
> 
> 赞同：2
> 
> 时间：2012-10-16T08:01:34.157
> 
> 标签：javascript, jquery

我有以下代码：

```
var posts = elementToAdd.find(".post");
posts.each(function(i, e) {
    var elementHeight = e.height() // BANG!
}); 
```

Posts 包含许多匹配的元素，我试图根据每个元素的高度循环并执行逻辑，但是各个元素没有 height 属性，那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T08:04:46.480

[`.height()`](http://api.jquery.com/height/)是一个 jQuery 方法，使用它从元素创建一个 jQuery 对象。

```
var posts = elementToAdd.find(".post");
posts.each(function(i, e) {
    var elementHeight = $(e).height();
}); 
```

也看看[`.outerHeight()`](http://api.jquery.com/outerheight/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:06:46.260

each 和 height 是 JQuery 功能。确保您的页面上有 JQuery 引用并尝试以下操作：

```
$('.post').each(
    function(ix, val) {
        var elementHeight = $(val).height();
        // more stuff...
    }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:07:00.357

你可以使用 .height() jquery 函数...

[http://api.jquery.com/height/](http://api.jquery.com/height/)

代码..

```
var posts = elementToAdd.find(".post");
posts.each(function(i, e) {
    var elementHeight = $(e).height();  // calculate the height of current element.
} 
```

# mysql - MYSQL 最后插入的行的 id 没有自动增量列

> ID：12910060
> 
> 赞同：0
> 
> 时间：2012-10-16T08:01:49.840
> 
> 标签：mysql

我在 Mysql 中有一个存储过程

```
DELIMITER $$
CREATE PROCEDURE REG_LOCATE(IN MDN VARCHAR(50), IN CALLID VARCHAR(50))
BEGIN
DECLARE cmd CHAR(255);
DECLARE result int(10);
DECLARE transactionId VARCHAR(255);
INSERT INTO  transactions(id, device_number, call_id, creation_time, method_name) VALUES( UUID(), MDN, CALLID, now(), 'MDN_REG_LOCATE');
SELECT id FROM transactions ORDER BY creation_time desc LIMIT 1 INTO transactionId;
END;
$$
DELIMITER ; 
```

我在事务表中插入了一行，其 id 由 mysql 的 UUID() 插入，现在我如何从同一过程中的事务表中获取最后插入的 id。我用过

```
SELECT id FROM transactions ORDER BY creation_time desc LIMIT 1 INTO transactionId; 
```

但它没有给我最后插入的 id。请帮助我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:02:58.817

首先将调用结果分配给一个变量，然后在语句`UUID()`中使用该变量的值：`INSERT`

```
DELIMITER $$

CREATE PROCEDURE REG_LOCATE(IN MDN VARCHAR(50), IN CALLID VARCHAR(50))
BEGIN
  DECLARE cmd CHAR(255);
  DECLARE result int(10);
  DECLARE transactionId VARCHAR(255);

  SET transactionId := UUID();
  INSERT INTO transactions
    (id, device_number, call_id, creation_time, method_name)
  VALUES
    (transactionId, MDN, CALLID, now(), 'MDN_REG_LOCATE');
END$$

DELIMITER ; 
```

# soa - 服务之间的非统一流量 (SOA)

> ID：12910062
> 
> 赞同：1
> 
> 时间：2012-10-16T08:02:03.780
> 
> 标签：soa

我想在我的应用程序中实现 SOA。它将由多个级别的服务组成（级别 1 是顶级服务，级别 2 是级别 1 服务所需的服务，依此类推）。一些低级别的服务将有更高的被访问概率，因此与顶级服务相比，导致流量更加密集。

有没有什么办法，比如智能路由或算法或技术来应对这种不均匀的流量，从而在这个架构中获得最佳性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:15:09.033

听起来您将层误认为是服务。请注意，服务会（相对）产生大量开销（序列化、反序列化、安全性（身份验证、授权，可能是加密）、网络等）。这是您想要在所有地方都做的事情吗？（另见[纳米服务](http://arnon.me/wp-content/uploads/2010/10/Nanoservices.pdf)反模式）

对于您的问题 - 您可以部署多个服务副本，注意在外部存储它们的状态（缓存、数据库等）并在它们之前放置一个负载均衡器。

# objective-c - 在 Objective-C 中在运行时创建类有什么意义？

> ID：12910067
> 
> 赞同：1
> 
> 时间：2012-10-16T08:02:43.790
> 
> 标签：objective-c, ios, runtime, objective-c-runtime

我最近重读了Mike Ash 关于*如何在**[Objective-C 运行时](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)*[创建类的有趣教程](http://www.mikeash.com/pyblog/friday-qa-2010-11-6-creating-classes-at-runtime-in-objective-c.html)

很长一段时间以来，我一直在想在哪里应用这种语言的强大功能。对于我想到的大多数想法，我总是看到一个矫枉过正的解决方案，我最终继续使用`NSDictionary`. 您在运行时创建类的使用案例是什么？我看到的唯一一个是 Obj-C 解释器......更多想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T17:56:50.720

当有人需要在运行时创建类时，我看到了一些可能的选项

*   隐藏有关它的信息（在大多数情况下它不会有帮助，但是......你可以）
*   执行多重继承（如果你真的需要它:)
*   使用您自己的语言（即一些类似 XML），可以由您的程序解释，用 Obj-C 编写（类似于 NSProxy，但更好。）
*   创建一些可以在运行时更改其行为的动态类

一般来说..这个有一些可能的用途。但在现实世界中，在默认服务应用程序中实际上不需要这样做:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:15:07.790

例如，它可以与 Core Data 或与数据库相关的任何 API 一起使用，以创建在编译时未知的新对象类。但是，我怀疑这是否经常使用，它主要是系统在运行程序时使用的机制......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:05:12.953

在 Cocoa 框架中，KVO 是通过动态创建类的“通知”版本来实现的。见[http://www.mikeash.com/pyblog/friday-qa-2009-01-23.html](http://www.mikeash.com/pyblog/friday-qa-2009-01-23.html)

# directx - 未来型 MMO，引擎选择？

> ID：12910069
> 
> 赞同：1
> 
> 时间：2012-10-16T08:02:53.950
> 
> 标签：directx, unity3d, game-engine, unreal-development-kit, mmo

我们是一小群开发者，我们希望创造一个未来的 MMO，它将城市建设、RTS、经济和政治类型的游戏结合起来。

我们不确定是否应该从头开始开发 DirectX9 引擎或使用 XNA、DXstudio 等工具。（我们有使用 DirectX 创建简单的类似 FPS 引擎的经验）

另一个问题是，像 UnrealEngine/UDK、Unity 这样的引擎是否真的适合像我们这样的复杂游戏（使用这些引擎开发的大多数游戏都是 FP/3rdP Shooters）？

关于从哪里开始使用引擎的任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:48:27.833

如果您自己构建它，您总是会得到完全符合您需求的引擎。但这需要时间并且成本高昂。

另一方面，选择像 UDK/CryEngine 这样的引擎，您会节省一些时间，但可能需要花时间才能完全按照您的意愿去做。

如果我建议一个开始是确定游戏的每一个技术方面。例如，像这样的事情：图形、内容处理/管道、SocialSupport（Facebook、Twitter）、目标平台、如何解决大多数编程问题（如何使用经济系统、构建系统等）

当所有这些都完成后，只需在您想要测试的所有引擎中进行简单的 alpha 测试即可。（包括编写自己的，但只有有限的东西才能使其成为原型）从那里选择感觉最好的，并希望它会成功，:)

希望能有所帮助！

# r - 非数值函数估计与积分

> ID：12910074
> 
> 赞同：0
> 
> 时间：2012-10-16T08:03:13.867
> 
> 标签：r, function, integration, estimation

请在 R 中放入以下结构：

```
g <- c(0.00125277273229879, 0.00126154615176554, 0.0012703959424814, 
0.00127932294600281, 0.00128832795839672, 0.00129741176435766, 
0.00130657513720778, 0.00131581896967928, 0.00132514399529097, 
0.00133455111246124, 0.00134404117411893, 0.0013536149592724, 
0.00136327342888814, 0.00137301739609167, 0.00138284774792897, 
0.00139276542262179, 0.00140277127309897, 0.00141286625464083, 
0.00142305128272433, 0.0508421359805228, 0.00186998245686827, 
0.00188362983020243, 0.00189739567535365, 0.00191128104995371, 
0.00192528723908206, 0.00193941540840815, 0.00195366674065997, 
0.00196804251523079, 0.00198254393190719, 0.0019971722359653, 
0.00201192874091554, 0.00202681464654449, 0.0020418313232245, 
0.00205698005034884, 0.00207226214711413, 0.002087678932717, 
0.00210323179458836, 0.00211892205192484, 0.00213475116039167, 
-0.114451596942742, 0.00120694924932032, 0.00121602907494663, 
0.00122519601872553, 0.00123445103025114, 0.00124379508186234, 
0.00125322929373903, 0.00126275455292721, 0.00127237205352726, 
0.00128208273376092, 0.00129188771380808)

gx <- c(122.05, 122.1, 122.15, 122.2, 122.25, 122.3, 122.35, 122.4, 
122.45, 122.5, 122.55, 122.6, 122.65, 122.7, 122.75, 122.8, 122.85, 
122.9, 122.95, 123, 123.05, 123.1, 123.15, 123.2, 123.25, 123.3, 
123.35, 123.4, 123.45, 123.5, 123.55, 123.6, 123.65, 123.7, 123.75, 
123.8, 123.85, 123.9, 123.95, 124, 124.05, 124.1, 124.15, 124.2, 
124.25, 124.3, 124.35, 124.4, 124.45, 124.5) 
```

我想找到一个 interpolate 的函数`g ~ gx`，但它应该有一些特殊的功能：

*   它应该以函数形式表示，例如，如果它是一个多项式，它应该返回我的多度和系数（如果它是渐近正常的，那就太好了！）。
*   我需要整合函数形式，如果有人能告诉我R是否可以解决非数值积分，我将不胜感激。

作为第二个特征的一个例子，考虑

```
y <- function(x) {
 x ^ 2
} 
```

有没有办法`y`与 R 积分可以返回我`(x ^ 3) / 3`而不是在积分极值之间评估的数值？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:23:47.147

如果您可以忍受线性插值，那么`approxfun`将返回一个计算插值的函数。您可能更喜欢使用`lm`后跟`predict`作用于`lm`返回的对象。

而且，正如 JG 在评论中指出的那样，如果您的数据集具有“尖锐的曲线”或不密集， `splinefun`可能会给您一个更好的拟合函数。

# android - 将数组字符串转换为列表？添加所有部分错误

> ID：12910075
> 
> 赞同：0
> 
> 时间：2012-10-16T08:03:29.893
> 
> 标签：android, listview, arraylist, android-fragments, adapter

从服务 JSONArray 调用的 EQName 列表 EQResponseArray = new JSONArray(EQSpecifCompanrison);

```
 int EQResponseSize = EQResponseArray.length();
    String[] EQName = new String[EQResponseSize];

     for(int i = 0; i< EQResponseSize; i++)
     {
       JSONObject EQResponseObject = EQResponseArray.optJSONObject(i);
       int EQ_ID = EQResponseObject.optInt("EquipmentStatusId");
       EQID[i] = EQ_ID;  
       String EQ_Name = EQResponseObject.optString("EquipmentStatusDescription");
       EQName[i] = EQ_Name; 
       int EQ_PlantID = EQResponseObject.optInt("equipmentParentStatusId");
       EQPlantID[i] = EQ_PlantID;

      }

  I have problem in AddALL section. I think problem in to convert how it will be? Planet constructer takes list items but my list have array list.
     ArrayList<Planet> planetList = new ArrayList<Planet>();

      Object[] mStringArray = planetList.toArray();
      planetList.addAll(EQName);
      listAdapter = new PlanetArrayAdapter(getActivity(), planetList);
      SpecificList.setAdapter( listAdapter ); 
```

# asp.net-mvc - 有没有多数据库多租户 ASP.Net MVC 参考应用

> ID：12910077
> 
> 赞同：2
> 
> 时间：2012-10-16T08:03:38.397
> 
> 标签：asp.net-mvc, multi-tenant

我目前正在构建一个托管在 Windows Azure 上的多租户、单一代码库 MVC 应用程序，并提出了我自己的应用程序框架工作来支持它。

虽然它有效，但我仍然不是 100% 满意，我想知道是否有人知道多数据库、单一代码库的一个很好的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:58:47.610

我不确定多租户，但[KiGG](http://kigg.codeplex.com/)是域驱动设计和支持多个数据库的应用程序的一个很好的例子。它不会同时使用多个数据库，但它们的层设计方式允许非常好的可扩展性，例如缓存或日志记录。

我认为 KiGG 的设计方法也非常适合多租户，即使它不能完全回答您的问题，我认为无论如何都值得阅读代码。

# installation - 为什么我无法安装 openstack Glance？

> ID：12910088
> 
> 赞同：0
> 
> 时间：2012-10-16T08:04:27.767
> 
> 标签：installation, cloud, openstack

我尝试使用命令安装 Glance

```
(os)mirror0@lab:~/tmp/glance$ python setup.py install 
```

但是失败了，为什么？

```
src/lxml/lxml.etree.c:181079: error: ‘XML_PARSE_NOENT’ undeclared (first use in this function)
src/lxml/lxml.etree.c:181079: error: ‘XML_PARSE_NOCDATA’ undeclared (first use in this function)
src/lxml/lxml.etree.c:181079: error: ‘XML_PARSE_NONET’ undeclared (first use in this function)
src/lxml/lxml.etree.c:181374: error: ‘XML_PARSE_RECOVER’ undeclared (first use in this function)
src/lxml/lxml.etree.c:181374: error: ‘HTML_PARSE_NONET’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182031: error: ‘XML_XPATH_NUMBER_ERROR’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182041: error: ‘XML_XPATH_UNFINISHED_LITERAL_ERROR’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182051: error: ‘XML_XPATH_VARIABLE_REF_ERROR’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182061: error: ‘XML_XPATH_INVALID_PREDICATE_ERROR’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182071: error: ‘XML_XPATH_UNCLOSED_ERROR’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182081: error: ‘XML_XPATH_INVALID_CHAR_ERROR’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182116: error: ‘XML_XPATH_UNDEF_VARIABLE_ERROR’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182126: error: ‘XML_XPATH_UNDEF_PREFIX_ERROR’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182136: error: ‘XML_XPATH_UNKNOWN_FUNC_ERROR’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182146: error: ‘XML_XPATH_INVALID_OPERAND’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182156: error: ‘XML_XPATH_INVALID_TYPE’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182166: error: ‘XML_XPATH_INVALID_ARITY’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182176: error: ‘XML_XPATH_INVALID_CTXT_SIZE’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182186: error: ‘XML_XPATH_INVALID_CTXT_POSITION’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182532: error: ‘LIBXSLT_VERSION’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182544: error: ‘xsltLibxsltVersion’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182556: error: ‘__pyx_v_4lxml_5etree_XSLT_DOC_DEFAULT_LOADER’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182556: error: ‘xsltDocDefaultLoader’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182565: warning: implicit declaration of function ‘xsltSetLoaderFunc’
src/lxml/lxml.etree.c:182565: error: ‘xsltDocLoaderFunc’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182565: error: expected ‘)’ before ‘__pyx_f_4lxml_5etree__xslt_doc_loader’
src/lxml/lxml.etree.c:182816: warning: implicit declaration of function ‘xsltRegisterAllExtras’
src/lxml/lxml.etree.c:182825: warning: implicit declaration of function ‘exsltRegisterAll’
error: Setup script exited with error: command 'gcc' failed with exit status 1
(os)mirror0@lab:~/tmp/glance$ echo $?
1

(os)mirror0@lab:~/tmp/glance$ python -V
Python 2.6.6 
```

**编辑1**：我已经安装了libxml2-dev，仍然无法安装glance，为什么？

```
src/lxml/lxml.etree.c:181079: error: ‘XML_PARSE_NONET’ undeclared (first use in this function)
src/lxml/lxml.etree.c:181374: error: ‘XML_PARSE_RECOVER’ undeclared (first use in this function)
src/lxml/lxml.etree.c:181374: error: ‘HTML_PARSE_NONET’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182031: error: ‘XML_XPATH_NUMBER_ERROR’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182041: error: ‘XML_XPATH_UNFINISHED_LITERAL_ERROR’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182051: error: ‘XML_XPATH_VARIABLE_REF_ERROR’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182061: error: ‘XML_XPATH_INVALID_PREDICATE_ERROR’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182071: error: ‘XML_XPATH_UNCLOSED_ERROR’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182081: error: ‘XML_XPATH_INVALID_CHAR_ERROR’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182116: error: ‘XML_XPATH_UNDEF_VARIABLE_ERROR’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182126: error: ‘XML_XPATH_UNDEF_PREFIX_ERROR’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182136: error: ‘XML_XPATH_UNKNOWN_FUNC_ERROR’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182146: error: ‘XML_XPATH_INVALID_OPERAND’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182156: error: ‘XML_XPATH_INVALID_TYPE’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182166: error: ‘XML_XPATH_INVALID_ARITY’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182176: error: ‘XML_XPATH_INVALID_CTXT_SIZE’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182186: error: ‘XML_XPATH_INVALID_CTXT_POSITION’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182532: error: ‘LIBXSLT_VERSION’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182544: error: ‘xsltLibxsltVersion’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182556: error: ‘__pyx_v_4lxml_5etree_XSLT_DOC_DEFAULT_LOADER’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182556: error: ‘xsltDocDefaultLoader’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182565: warning: implicit declaration of function ‘xsltSetLoaderFunc’
src/lxml/lxml.etree.c:182565: error: ‘xsltDocLoaderFunc’ undeclared (first use in this function)
src/lxml/lxml.etree.c:182565: error: expected ‘)’ before ‘__pyx_f_4lxml_5etree__xslt_doc_loader’
src/lxml/lxml.etree.c:182816: warning: implicit declaration of function ‘xsltRegisterAllExtras’
src/lxml/lxml.etree.c:182825: warning: implicit declaration of function ‘exsltRegisterAll’
error: Setup script exited with error: command 'gcc' failed with exit status 1
(os)mirror0@lab:~/tmp/glance$ dpkg -l | grep libxml2
ii  libxml2                              2.7.8.dfsg-2+squeeze5               GNOME XML library
ii  libxml2-dev                          2.7.8.dfsg-2+squeeze5               Development files for the GNOME XML library
ii  libxml2-utils                        2.7.8.dfsg-2+squeeze5               XML utilities
ii  python-libxml2                       2.7.8.dfsg-2+squeeze5               Python bindings for the GNOME XML library
ii  python-lxml                          2.2.8-2                             pythonic binding for the libxml2 and libxslt libraries 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:01:33.700

尝试安装[Libxslt](http://xmlsoft.org/XSLT/)。对于 Ubuntu：

```
sudo apt-get install libxslt1.1 libxslt1-dev python-libxslt1 
```

# android - 在我的应用程序中显示使用 3rd 方 android 应用程序拍摄的照片

> ID：12910092
> 
> 赞同：1
> 
> 时间：2012-10-16T08:04:38.767
> 
> 标签：android, android-layout, android-intent, android-emulator

我无法显示使用 3rd 方 android 应用程序捕获的当前图像并将其显示在我自己的本机应用程序上。它总是一个只有操作栏的空屏幕。但是，拍摄的照片可能位于我指定的文件夹中。

有人可以帮忙吗？非常感激！干杯:)

XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical" android:layout_width="fill_parent"
  android:layout_height="fill_parent" android:id="@+id/linear">

  <ImageView android:id="@+id/imageView1"
    android:layout_width="fill_parent" android:layout_height="fill_parent" 
    android:contentDescription="@string/desc"/>
</LinearLayout> 
```

源代码：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) { 
    super.onActivityResult(requestCode, resultCode, data); 
    switch(requestCode) {
    case 0:
        if(resultCode == Activity.RESULT_OK){  
            Bitmap photo = (Bitmap) data.getExtras().get("data"); 
            imageView.setImageBitmap(photo);
        }
    break; 

    case 1:
        if(resultCode == RESULT_OK){  
            Uri selectedImage = data.getData();
            imageView.setImageURI(selectedImage);
        }
    break;

    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:47:11.647

```
android:contentDescription="@string/desc" 
```

将上面的行添加到 ImageView 的 xml 中，其中 desc 应该在 string.xml 中并将其设置为某个值。看起来这定义了简要描述视图内容的文本。此属性主要用于可访问性。由于某些视图没有文本表示，因此此属性可用于提供此类。

像 ImageViews 和 ImageButtons 这样的非文本小部件应该使用 contentDescription 属性来指定小部件的文本描述，以便屏幕阅读器和其他辅助工具可以充分描述用户界面。

```
String  selectedImagePath = getPath(selectedImageUri);
Bitmap myBitmap = BitmapFactory.decodeFile(selectedImagePath);
imageView.setImageBitmap(bmp); 
```

使用上面的代码

```
public String getPath(Uri uri) {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:22:21.863

你在保存你的价值`fileUri`吗`Activity`？如果是这样，您是否从已保存的实例中恢复它？

如果不是，它可能会在活动被销毁时被重置。

# c# - 释放对象和关闭电子表格时出现问题？

> ID：12910096
> 
> 赞同：0
> 
> 时间：2012-10-16T08:05:01.573
> 
> 标签：c#

我正在使用 EPPlus 打开一个电子表格，然后用图片和信息填充它。当我尝试删除包含我用来填充电子表格的所有图片的文件夹时，我收到此文件正在与另一个应用程序一起使用的错误。释放使用的对象并关闭电子表格的正确方法是什么？

```
using (var package = new ExcelPackage(existingFile))
     {
        ExcelWorkbook workBook = package.Workbook;
        if (workBook != null)
        {
          if (workBook.Worksheets.Count > 0)
            {
              int i = 0;
              foreach(ExcelWorksheet worksheet in workBook.Worksheets)
              {
                xlWorkSeet1[i] = worksheet;
                i = i + 1;
              }

            }
        }

           //More code ...

           FileStream aFile = new FileStream(tempFolderPathAlt + saveas + ".xls",    FileMode.Create);
           byte[] byData = package.GetAsByteArray();
           aFile.Seek(0, SeekOrigin.Begin);
           aFile.Write(byData, 0, byData.Length);
           aFile.Close();

            xlWorkSeet1 = null;
            workBook = null;

      }//End using

     String P = Path.Combine(tempFolderPathAlt, "ExtractedFiles");
     bool directoryExists = Directory.Exists(P);
     if (directoryExists)
     Directory.Delete(P, true); // deletes sub-directories 
```

我得到的错误是它试图删除我添加到电子表格中的照片。

![在此处输入图像描述](../Images/e670710546d9740f1bff8b5b60e6fa59.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:14:06.007

Try out following and please let me know whether this helps

```
int writeTimeout = 200;
using (var aFile = new FileStream(tempFolderPathAlt + saveas + ".xls",    FileMode.Create))
{
      aFile.WriteTimeout = writeTimeout;
      byte[] byData = package.GetAsByteArray();            
      aFile.Seek(0, SeekOrigin.Begin);            
      aFile.Write(byData, 0, byData.Length);            
      xlWorkSeet1 = null;             
      workBook = null;  
      Thread.Sleep(writeTimeout);
} 
```

# spring - Spring Injection 在资源文件中找不到变量

> ID：12910097
> 
> 赞同：1
> 
> 时间：2012-10-16T08:05:02.187
> 
> 标签：spring, configuration, resource-files

我在我的项目中创建了一个资源文件。我想将资源文件中的值注入spring bean。我在 applicationContext.xml 中定义了资源文件的占位符。

```
<context:property-placeholder  location="file:///${MRAPOR_PROPPATH}mRapor.properties" /> 
```

我可以将值注入到 applicationContext.xml 中声明的 bean，例如：

```
<bean
        id="dataSource"
        class="org.springframework.jndi.JndiObjectFactoryBean" >

        <property
            name="jndiName"
            value="${database.jndiName}" />

        <property
            name="lookupOnStartup"
            value="false" />

        <property
            name="cache"
            value="true" />

        <property
            name="proxyInterface"
            value="javax.sql.DataSource" />
    </bean> 
```

这很好用。但是，如果我使用 spring 注释声明 bean，我将无法注入值。

```
@Component("SecurityFilter")
public class SecurityFilter implements Filter {
    public static final String USER = "USER_SESSION_KEY";
    public static final String CENTRIFY_USERNAME_KEY = "REMOTE_USERNAME";

    @Value("${url.logout}")//I get error here !!!!
    private String logoutUrl;
    //proper setters and  getters.
} 
```

你知道为什么我不能访问使用注释声明的 bean 中的值吗？

这是我的例外

```
weblogic.application.ModuleException: 
    at weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1510)
    at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:482)
    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
    Truncated. see log file for complete stacktrace
Caused By: java.lang.IllegalArgumentException: Could not resolve placeholder 'url.logout' in string value [${url.logout}]
    at org.springframework.util.PropertyPlaceholderHelper.parseStringValue(PropertyPlaceholderHelper.java:173)
    at org.springframework.util.PropertyPlaceholderHelper.replacePlaceholders(PropertyPlaceholderHelper.java:125)
    at org.springframework.beans.factory.config.PropertyPlaceholderConfigurer$PlaceholderResolvingStringValueResolver.resolveStringValue(PropertyPlaceholderConfigurer.java:255)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveEmbeddedValue(AbstractBeanFactory.java:748)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:745) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:53:36.757

您确定`SecurityFilter`实际过滤请求的实例是由 Spring 管理的吗？

默认情况下`Filter`，声明的 s`web.xml`由 servlet 容器实例化，因此它们不受 Spring 和 Spring 注释的管理，例如`@Value`在它们中不起作用。

但是，Spring 为您的用例提供了特殊支持——您可以使用`DelegatingFilterProxy`. `web.xml`如下声明：

```
<filter>
    <filter-name>SecurityFilter</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>...</filter-mapping> 
```

`DelegatingFilterProxy`将请求过滤委托给一个名为`SecurityFilter`（如您的`@Component`）的bean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:16:30.393

由`@Value`java 编译器处理，而 XML 由 Spring Bean Processor 解析 - 这是两个非常不同的东西......为什么你认为应该以相同的方式工作？

**编辑**：我阅读了它，似乎实际上可以使用 Spring EL，您只需使用前缀`#`而不是`$`：

```
private @Value( "#{application.url.logout}" ) String logoutUrl; 
```

干杯，

# ruby-on-rails - 为什么当我在注册/编辑设计视图中放置删除对象链接时，它总是删除帐户？

> ID：12910100
> 
> 赞同：0
> 
> 时间：2012-10-16T08:05:19.030
> 
> 标签：ruby-on-rails, devise, destroy

我正在使用设计 gem 并在注册/编辑视图上显示用户的对象。

我有这样的问题：当我单击删除对象链接时 - 它会破坏用户记录，但应该删除对象。

用户有很多网站，所以我向用户展示了他的网站，并希望用户可以使用以下代码删除它：

```
<% @websites.each do |website| %>  
  <%unless current_user.websites.empty? %>
    <%= link_to 'X', website_path(website), method: :delete, data: { confirm: 'Are you sure?' } %>
  <% end %>      
<% end %> 
```

控制器代码：

```
class RegistrationsController < Devise::RegistrationsController
  def edit
    @websites = current_user.websites
    @reports = current_user.financial_reports
  end
end

class WebsitesController < ApplicationController
  def destroy
    @website = Website.find(params[:id])
    if (current_user.id != @website.user_id)
      redirect_to root_path
      flash[:notice] = 'You are not owner!'
    else
      @website.destroy
      respond_to do |format|
      format.html { redirect_to websites_url }
      format.js
    end
  end
end 
```

我没有更改 Websites_controller 中标准行为的任何内容。

有人可以建议如何解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:24:39.467

值得检查您的关联。如果您`:dependent => :destroy`在用户和网站之间建立错误的关联，那么销毁网站也会导致关联的用户也被销毁。

# sql - 是否可以从 *.txt 文件填充我的 *.sdf 数据库中的表？

> ID：12910107
> 
> 赞同：0
> 
> 时间：2012-10-16T08:05:43.260
> 
> 标签：sql, sql-server, database, ado.net

所以一切都在我的问题中。我在 asp.net 中有一个 Web 应用程序，有两个数据库：

第一个`ASPNETDB.MDF`和第二个`MyApp.sdf`

我想`MyApp.sdf`从外部文件（如 txt 文件或其他文件）填充表格。

这在 Visual Studio 2010 中可行吗？有什么办法吗？

非常感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:14:28.263

编写一个简单的应用程序：

```
 using (SqlConnection sqlcnn = new SqlConnection("Data Source=myapp.sdf"))
    {
        SqlCommand sqlcmd = new SqlCommand();
        sqlcmd.Connection = sqlcnn;

        sqlcnn.Open();

        StreamReader sr = new StreamReader(@"c:\mydir\myfile.txt");

        while (sr.Peek() != -1) // check for eof (end of file)
        {
            String line = sr.ReadLine();

            String[] values = line.Split(' '); // e.g if your values are seperated by space

            sqlcmd.CommandText = String.Format("INSERT INTO tableName VALUES ({0},{1},{2})", values[0], values[1], values[2]);

            sqlcmd.ExecuteNonQuery();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:26:22.297

您还可以对包含由字段终止符分隔的记录的文件使用 bcp -BULK INSERT 命令。例如：

```
BULK INSERT tablename 
FROM 'c:\file.txt' 
WITH 
( 
    FIRSTROW = 2, // if the first row contains table field names
    MAXERRORS = 0, 
    FIELDTERMINATOR = ',', //separator character
    ROWTERMINATOR = '\n' 
) 
```

# php - 使用 php exec 和 javascript 执行 bash 脚本

> ID：12910112
> 
> 赞同：5
> 
> 时间：2012-10-16T08:05:55.777
> 
> 标签：php, javascript, html, bash

我正在尝试在下面运行这个 javascript，但没有看到 php shell_exec 命令的输出。

运行 test -a bash 脚本会输出一系列 ID 的 34535、25643、23262 等。当我在我的 php 文件中简单地运行它时，它工作正常。

```
print shell_exec('/opt/bin/echkchunk -a'); 
```

但是当我尝试在下面运行它并选择 test1 时，屏幕上没有任何输出。浏览 chromes 开发人员工具时，我看到选择 test1 时的代码如下

`<!--?php shell_exec("/opt/bin/echkchunk -a"); ?-->`

好像它被注释掉了。

所以我的问题是，是否可以使用 php 和 JavaScript 以这种方式运行 bash 脚本？还是有另一种方法可以在没有 JavaScript 的情况下将该信息显示到网页上？

```
<script type="text/javascript">
  var tester = '<?php shell_exec("/opt/bin/test -a"); ?>';      
     $(document).ready(function() {
            $("#selector").on("change", function() {
                    if ($("#selector").val() == "test1") {
                        $("#rightselection").css("background-color", "red");
                        $("#rightselection").html(tester);
                    }
                    if ($("#selector").val() == "test2") {
                        $("#rightselection").css("background-color", "blue");
                        $("#rightselection").html("test2");
                    }
                    if ($("#selector").val() == "test3"){
                        $("#rightselection").css("background-color", "yellow");
                        $("#rightselection").html("test3");
                    }
                    if ($("#selector").val() == ""){
                        $("#rightselection").css("background-color", "green");
                        $("#rightselection").html("This is a Test");
                    }
            });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:21:46.417

如果您的结果是多行，则需要用转义序列或 HTML 替换换行符。尝试更换

```
var tester = '<?php shell_exec("/opt/bin/test -a"); ?>'; 
```

和

```
var tester = '<?php echo str_replace(PHP_EOL, '<br/>', shell_exec("/opt/bin/test -a")); ?>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:12:22.503

尝试运行命令将输出复制到标准输出：

```
<?php shell_exec("/opt/bin/echkchunk -a 2>&1"); ?> 
```

如果运行命令时发生错误，shell_exec 将返回 null，`2>&1`即使命令失败，您也将获得整个输出。

见[sh 命令： exec 2>&1](https://stackoverflow.com/questions/1216922/sh-command-exec-21)

# objective-c - NSNumbers 作为值添加到 NSMutableDictionary 变为 null

> ID：12910116
> 
> 赞同：0
> 
> 时间：2012-10-16T08:06:07.040
> 
> 标签：objective-c, cocoa-touch

我有一段代码将对象字典构造为键，将操作代码（如添加/更新/删除）构造为值。

最近，无论是 iOS 6，还是“zee Germans”的到来，它都崩溃了。值是被构造的，偶尔会被添加，但大多数时候我会得到一个充满（空）值的字典。

```
for (int i = 0; i < newArray.count; i++)
{
    if (![oldArray containsObject:[newArray objectAtIndex:i]])
    {
        NSNumber *opNumber = [NSNumber numberWithInt:(int)kInsertOperation];
        [_operationsForRows setObject:opNumber forKey:[newArray objectAtIndex:i]];
    }
    else ...
} 
```

我已经用中间变量和将枚举值显式转换为 int 来修饰代码，并且变得更加困惑。打印出结果字典给出：

```
{
"<Order: 0x8aad980>" = (null);
"<Order: 0x8aad7a0>" = (null);
} 
```

谁能解释一下，我在这里错过了什么？字典甚至不应该能够保存空值，不是吗？

此代码在 ARC 下。

NSMutableDictionary 在主线程上初始化，但仅在单个辅助线程上使用。

有时，会正确添加一两个对象。说，10%。从那以后我尝试过的：

*   我已将字典初始化移至与用法相同的线程。哇，90-95% 的对象都被正确添加了，但这里和那里仍然是 null。
*   我已经在类字段中保存了所有可能的 NSNumber。在主线程上创建字典和数字，0% 的成功率，比我开始的要低。
*   在类字段中使用当前线程初始化的字典和主线程编号，我再次达到 90-95%...

哭吧，哭吧……看起来像是对整个地方的重写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:45:11.307

尝试使用[NSMutableDictionary](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableDictionary_Class/Reference/Reference.html)而不是 NSDictionary。

两者之间的区别在于您可以`NSMutableDictionary`在初始化后修改而`NSDictionary`设置。

# php - 如何在 WordPress 上编辑默认功能？

> ID：12910118
> 
> 赞同：1
> 
> 时间：2012-10-16T08:06:10.333
> 
> 标签：php, wordpress, function

我应该`dynamic_sidebar()`在 wordpress 上编辑功能（隐藏一些类别，编辑模板）。

是否可以？我读到“你需要编辑核心”，但我不明白这个“核心”在哪里 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:11:01.410

就个人而言，你听起来像是刚刚开始，所以我会给你一些建议。***永远不要编辑核心***。

快速修复很诱人。当他们不知道更好的时候，每个人都做过，但是你有机会学习正确的方法。

逻辑地处理你的问题。你想编辑它是为了什么？隐藏一些类别？使用 CMS 中的内部小部件系统并将其取下。删除类别，或使用 CSS 隐藏它们`{display:none;}`。

祝我年轻的学徒好运。我希望你能接受一些建议并认真听取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T08:23:36.103

永远不要编辑核心。原因是如果您更改默认行为，您安装的主题可能无法正常工作，并且对 wordpress 引擎的更新会破坏您的更改。

要更改 wordpress 的行为方式，请创建一个子主题。然后添加一个`functions.php`文件并在其中创建一个具有您所需行为的小部件。

您还可以注册一种新型侧边栏和仅显示该类型侧边栏的页面模板。

请参阅：[http](http://codex.wordpress.org/Child_Themes) ://codex.wordpress.org/Child_Themes和[https://codex.wordpress.org/Function_Reference/register_sidebar_widget](https://codex.wordpress.org/Function_Reference/register_sidebar_widget)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:12:38.843

最好的方法是使用插件制作一个 Child 模板`One-click child theme`。将包含函数的文件复制到子模板（使用 ftp）并在那里进行编辑。这样，您可以更新您的模板并仍然保留您的更改。

# excel - 从 jira webwork 插件导出 excel

> ID：12910119
> 
> 赞同：1
> 
> 时间：2012-10-16T08:06:12.587
> 
> 标签：excel, report, jira, webwork

我为 Jira 3.12 编写了自己的 webwork 插件，用于报告一些项目的版本进度。我不能使用标准的 jira 报告插件，因为客户需要两步参数选择（一些项目和每个选定项目的版本集）。他还需要此报告的 excel 导出。但我不明白，如何将此参数传递给 ConfigureReport 或不知道另一种方法。

如何将 excel 导出添加到我的网络工作插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-06T12:21:38.230

固定的。我在速度模板中的 HTML 按钮上绑定 javascript：

```
function generateexcel(tableid)
        {
            var table= document.getElementById(tableid);
            table.border = 1;
            var html = table.outerHTML;
            window.open('data:application/vnd.ms-excel,' + encodeURIComponent(html));
        } 
```

其中 tableid 是该模板中报告表的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:21:26.107

要获取有关使用 webwork 的一些示例，您可以查看[https://marketplace.atlassian.com/plugins/com.consultingtoolsmiths.jira.samples.webwork](https://marketplace.atlassian.com/plugins/com.consultingtoolsmiths.jira.samples.webwork)

# node.js - node.js Redis 包更新是否会清除 Redis 数据库？

> ID：12910125
> 
> 赞同：0
> 
> 时间：2012-10-16T08:06:29.157
> 
> 标签：node.js, redis, node-redis

我最近更新了我的 node.js Redis 包。现在我的数据似乎消失了。更新会删除我的所有数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:35:28.557

奇怪的是更新客户端库会破坏您的数据。我建议查看以下可能的原因：

*   Redis 未配置为持久化数据，或者您的配置是使用 RDB 快照持久化但不够频繁，并且您以硬方式杀死 Redis 而不是使用 SHUTDOWN 命令。
*   客户端库有某种单元测试，如果再次运行一个实例不会检测到该实例不是空的并且会破坏数据内容。你有没有进行任何测试？

还要确保由于某种原因您的代码中没有 FLUSHALL / FLUSHDB 命令，或者您的密钥没有因为生存时间设置而简单地过期（使用 EXPIRE 或 SETEX 等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:30:31.323

我对节点的 Redis 客户端了解不多，但我可以打赌，升级 DB 客户端不会导致清除 DB。这将是错误的行为。

因此，要么这是您遇到的某种错误，要么您做错了什么清除了独立于您正在使用的 Redis 客户端升级的数据库。

# python - 安装 Matplotlib 时出错 - clang

> ID：12910126
> 
> 赞同：8
> 
> 时间：2012-10-16T08:06:32.923
> 
> 标签：python, xcode, macos, matplotlib, clang

我已经尝试安装 Matplot lib，但我仍然在努力克服错误。

我已经安装了 numpy 和 psipy，但是当我使用 easy_install 时出现以下错误（pip 也有类似的错误）。

是的，我已经在 Xcode 中安装了命令行工具来解决“找不到 gcc-4.2”的问题。

```
pymods ['pylab']
packages ['matplotlib', 'matplotlib.backends', 'matplotlib.backends.qt4_editor',          

'matplotlib.projections', 'matplotlib.testing', 'matplotlib.testing.jpl_units',     

'matplotlib.tests', 'mpl_toolkits', 'mpl_toolkits.mplot3d', 'mpl_toolkits.axes_grid',     

'mpl_toolkits.axes_grid1', 'mpl_toolkits.axisartist', 'matplotlib.sphinxext',    

'matplotlib.tri', 'matplotlib.delaunay', 'pytz', 'dateutil', 'dateutil.zoneinfo']
warning: no files found matching 'KNOWN_BUGS'
warning: no files found matching 'INTERACTIVE'
warning: no files found matching 'MANIFEST'
warning: no files found matching '__init__.py'
warning: no files found matching 'examples/data/*'
warning: no files found matching 'lib/mpl_toolkits'
warning: no files found matching 'LICENSE*' under directory 'license'
gcc-4.2 not found, using clang instead
In file included from src/ft2font.cpp:3:
src/ft2font.h:16:10: fatal error: 'ft2build.h' file not found
#include <ft2build.h>
     ^
1 error generated.
error: Setup script exited with error: command 'clang' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T22:50:22.733

我最近也遇到了这个问题，但是我使用的是 pip。如果您安装了[自制软件](http://mxcl.github.com/homebrew/)，您可以通过运行以下命令来解决它：

```
brew install freetype
brew install libpng
brew link freetype
pip install git+https://github.com/matplotlib/matplotlib.git#egg=matplotlib-dev 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-25T22:26:21.320

其实还有更简单的方法！先看看有没有安装X11库（ls /usr/X11/include）

如果不是，您可能需要安装 X11

如果他们是那么一个简单的修复是这样的：

```
cd /usr/X11/include
sudo ln -s freetype2/freetype 
```

基本上出于某种原因，它在 /usr/X11 上寻找 freetype 库，实际上它在 freetype2 的子文件夹中。奇怪 - 但它确实以这种方式编译。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-15T08:42:51.703

我做了以下事情，它对我有用

```
sudo apt install libfreetype6-dev
pip install matplotlib 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T09:00:11.717

您缺少 freetype2，或者至少缺少开发版本。它正在寻找`ft2build.h`一个 freetype2 头文件。

您可以尝试从源代码安装[freetype2](http://www.freetype.org/index2.html)，或者只使用 macports、fink 或 homebrew 之类的包管理器来安装它（对于包管理器，请确保您选择了可用的开发版本）。

但是如果你要走包管理器的路线，你也可以这样安装 matplotlib。并且可能有包含 freetype2 的 OS X 二进制文件，因此这可能比从源代码安装更容易。

easy_install 和 pip 不为您安装 freetype2 的原因是它不是 Python 包。

== 更正 ==

freetype2 应该可用，而不仅仅是 easy_install 或 pip 期望的地方。在我的 Mac 上，我可以在 /usr/X11/include 中 ft2build.h。因此，您需要将`CFLAGS`变量设置为该目录（并且可能`LDFLAGS`设置为 /usr/X11/lib`）才能使安装正常工作。现在，使用 easy_install 和 pip，我不能 100% 确定该怎么做。试试例如

```
CFLAGS=-I/usr/X11/include LDFLAGS=-L/usr/X11/lib easy_install matplotlib 
```

或者，只需下载 matplotlib 源代码，自行调整`setup.py`和构建。

# java - JDBC ResultSet - 无法检索别名列

> ID：12910133
> 
> 赞同：0
> 
> 时间：2012-10-16T08:06:55.317
> 
> 标签：java, sql, jdbc

我们有以下 SQL 查询：

```
select Resa.ResID, Avgångdatum, Avgångtid, AvgångStad, AnkomstTid, AnkomstDatum, AnkomstStad, AntalPlatser, Kostnad,

    (select sum(Bokning.AntalBiljetter) from Bokning where Bokning.ResID = Resa.ResID) as EnkelBiljetter,

    (select sum(Bokning.AntalBiljetter) from Bokning where Resa.ResID in
        (select PaketResa.ResID from PaketResa where PaketResa.PaketID in
            (select PaketID from PaketResa where PaketResa.PaketID = Bokning.PaketID))) as PaketBiljetter

from Resa; 
```

当我们尝试在 java 中获取列“Enkelbiljetter”和“PaketBiljetter”时，使用

```
Integer.parseInt(result.getObject("PaketBiljetter").toString() 
```

它返回一个空指针异常。我们尝试`useOldAliasMetadataBehavior=true`在连接语句中添加“？”，但结果是一样的。也不会将 columnindex（10 和 11）放入 getObject 方法中。我们使用的是 5.1.19 JDBC 驱动程序。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:30:18.577

它可能是您的，也可能是`result`返回`getObject(...)`一个空指针。既然有一种`getInt()`方法，你应该先试试这个：

```
result.getInt("PaketBiljetter") 
```

看看会发生什么。

# yii - Yii中多字视图文件的命名约定？

> ID：12910140
> 
> 赞同：1
> 
> 时间：2012-10-16T08:07:28.850
> 
> 标签：yii, naming-conventions

如果我有两个或更多单词的视图，例如：

```
public function actionApprovalQueue() 
```

视图文件本身的命名约定是什么？

```
approval-queue.php
approvalQueue.php
approvalqueue.php
?? 
```

关于[公约](http://www.yiiframework.com/doc/guide/1.1/en/basics.convention)的文档只说：

> 视图文件应以视图名称命名。例如，*索引* 视图位于*index.php*文件中。

这对包含两个或更多单词的视图没有任何线索。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T08:34:56.830

当谈到命名约定时，它归结为适合您的组织，或者您的组织遵循什么，或者您的团队的其他成员决定什么。关键是整个代码库的**一致性。**

我会说使用破折号（连字符），因为变量通常命名为`$xyzAbc`or `$xyz_abc`。所以使用`approval-queue.php`.

绝对不要去`approvalqueue.php`。

编辑：在这里阅读更多关于[Yii 的约定](http://www.yiiframework.com/doc/guide/1.1/en/basics.convention "http://www.yiiframework.com/doc/guide/1.1/en/basics.convention")。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:12:19.740

Yii 建议以驼峰式命名变量、函数和类类型，将名称中每个单词的首字母大写，并在没有空格的情况下连接它们。变量和函数名称的第一个单词应该全部小写，以区别于类名称（例如 $basePath、runController()、LinkPager）。对于私有类成员变量，建议在其名称前加上下划线字符（例如 $_actionList）。

由于在 PHP 5.3.0 之前不支持命名空间，因此建议以某种独特的方式命名类以避免与第三方类的名称冲突。因此，所有 Yii 框架类都以字母“C”为前缀。

控制器类名称的一个特殊规则是它们必须附加单词 Controller。然后控制器 ID 被定义为类名，第一个字母小写并且单词 Controller 被截断。例如，PageController 类将具有 ID 页面。此规则使应用程序更加安全。它还使与控制器相关的 URL 更加清晰（例如 /index.php?r=page/index 而不是 /index.php?r=PageController/index）。

# jquery - 提交表单后 Jquery .change() 不起作用

> ID：12910141
> 
> 赞同：0
> 
> 时间：2012-10-16T08:07:30.323
> 
> 标签：jquery, jsp

我对 jquery 很陌生。我有根据下拉列表更改的 jsp 表单字段。但是`.change()`一旦页面提交，jquery 方法就不起作用了。请让我知道我是否可以使用任何其他方法代替`.change()`？

代码：

```
 $(document).ready(function(){
$("#form\\:select").change(function()
    {
   var value=    $("#form\\:select").val();

 if(value=="")
 {
    $("#fields").css("display","none");
 }else
{
  $("div","div#fields").hide();
 $("#fields").css("display","block");
  $("div#"+value).show();
      }
   });
 }); 
```

我有 div 标签显示下拉列表的不同字段。一旦我提交表单，.change 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:13:48.563

据我所知，为了让 Javascript 工作，页面上需要已经加载了 Javascript。通过提交页面，您将刷新其中的所有内容，包括其中加载的 Javascript，这意味着刷新页面后该页面中的所有内容都会丢失。为了完成这项工作，您需要手动向页面发布一个值，一旦您提交它，您需要通过 PHP 读取该值，并根据您想要使用 PHP 执行的操作来触发 Javascript 函数。这基本上就像将 Javascript 变量设置为 1，然后刷新页面。它将再次设置为 0，因为它没有保存在任何地方。

# c - 如何用结构解释这些结果？

> ID：12910143
> 
> 赞同：1
> 
> 时间：2012-10-16T08:07:40.713
> 
> 标签：c, struct

我得到了以下意想不到的结果，尽管内存将一直被 4 个字节除，但事实并非如此：

```
602040  nes.val
602044  nex.c1
602045  nes.c2
602048  (nes.z).v1
60204c  (nes.z).v2
602050  nes.str1
602057  nes.str2 
```

代码是

```
/*
 * struct.c - Program to test struct
 * Written 2009-2012 by F Lundevall
 * Copyright abandoned. This file is in the public domain.
 */
#include <stdio.h>      /* Defines printf. */
#define ARRAYSIZE 3

/* Declare structured types (but not variables). */
struct ipair
{
  int v1;
  int v2;
};

struct nested
{
  int val;
  char c1;
  char c2;
  struct ipair z;
  char str1[7];
  char str2[11];
};

/* Declare global variable ipa - an array of struct ipair. */
struct ipair ipa[ ARRAYSIZE ]; /* Array of ipairs. */

/* Declare global variable na - an array of struct nested. */
struct nested na[ ARRAYSIZE ]; /* Array of ipairs. */

/* Declare some structured variables. */
struct ipair s1;
struct nested nes = { 17, 'Q', 'Z', { 117, 217 }, "Hello!", "Goodbye!" };

int main ()         /* Called as a method/function/subroutine. */
{
  int i;            /* Loop index variable. */
  int * ip;         /* Temporary pointer to int for printouts. */
  struct ipair * ipp;    /* Declare a pointer to struct ipair. */
  struct nested * nesp;  /* Declare a pointer to struct nested. */

  s1.v1 = 11;       /* Assign a value to val in s1\. */
  s1.v2 = 17;       /* Assign a value to v2 in s1\. */

  printf( "Message ST.01 from struct.c: Hello, structured World!\n");
  printf( "ST.02: s1: stored at %lx (hex), sizeof(s1) is %d (dec)\n",
          (unsigned long) &s1, (int) sizeof(s1) );
  printf( "ST.03: s1.v1 at %lx (hex) contains %d (dec), %x (hex)\n",
          (unsigned long) &(s1.v1), s1.v1, s1.v1);
  printf( "ST.04: s1.v2 at %lx (hex) contains %d (dec), %x (hex)\n",
          (unsigned long) &(s1.v2), s1.v2, s1.v2);

  ipp = &s1;        /* Pointer ipp now points to a struct ipair. */
  printf( "\nST.05: Executed ipp = &s1;\n");
  printf( "ST.06: ipp: stored at %lx (hex), contains %ld (dec), %lx (hex)\n",
          (unsigned long) &ipp, (unsigned long) ipp, (unsigned long) ipp );  
  printf( "ST.07: Dereference pointer ipp and we find: (*ipp).v1=%d, (*ipp).v2=%d\n",
          (*ipp).v1, (*ipp).v2 );
  printf( "ST.08: Dereference with different syntax: ipp->v1=%d, ipp->v2=%d\n",
          ipp->v1, ipp->v2 );

  (*ipp).v1 = nes.val; /* Copy a value using dot-syntax. */
  printf( "\nST.09: Executed (*ipp).v1 = nes.val;\n");

  ipp -> v2 = 4711;  /* Assign a value using arrow syntax. */
  printf( "ST.10: Executed ipp -> v2 = 4711;\n");
  printf( "ST.11: Dereference pointer ipp and we find: (*ipp).v1=%d, (*ipp).v2=%d\n",
          (*ipp).v1, (*ipp).v2 );

  for( i = 0; i < ARRAYSIZE; i += 1 )
  {
    ipa[ i ].v1 = 1000 + i;
    ipa[ i ].v2 = 2000 + i;
  }
  printf( "\nST.12: Initialized ipa.\n");

  ip = (int *) ipa;
  for( i = 0; i < ARRAYSIZE * 2; i += 1 )
  {
    printf("ST.%.2d: Memory at %lx (hex) contains %d\n",
           i+13, (unsigned long) ip, *ip);
    ip += 1;
  }

  ipp = ipa;
  printf( "\nST.23: Executed ipp = ipa;\n");
  printf( "ST.24: ipp: stored at %lx (hex), contains %ld (dec), %lx (hex)\n",
          (unsigned long) &ipp, (unsigned long) ipp, (unsigned long) ipp );  
  printf( "ST.25: Dereference pointer ipp and we find: ipp->v1=%d, ipp->v2=%d\n",
          ipp->v1, ipp->v2 );

  ipp = ipp + 1;
  printf( "\nST.26: Executed ipp = ipp + 1;\n");
  printf( "ST.27: ipp: stored at %lx (hex), contains %ld (dec), %lx (hex)\n",
          (unsigned long) &ipp, (unsigned long) ipp, (unsigned long) ipp );
  printf( "ST.28: Dereference pointer ipp and we find: ipp->v1=%d, ipp->v2=%d\n",
          ipp->v1, ipp->v2 );

  printf( "\nST.29: nes: stored at %lx (hex), sizeof(nes) is %d (dec)\n",
          (unsigned long) &nes, (int) sizeof(nes) );
  printf( "ST.30: nes.val at %lx (hex) contains %d (dec), %x (hex)\n",
          (unsigned long) &(nes.val), nes.val, nes.val);
  printf( "ST.31: nes.c1 at %lx (hex) contains '%c', %d (dec), %x (hex)\n",
          (unsigned long) &(nes.c1), nes.c1, nes.c1, nes.c1);
  printf( "ST.32: nes.c2 at %lx (hex) contains '%c', %d (dec), %x (hex)\n",
          (unsigned long) &(nes.c2), nes.c2, nes.c2, nes.c2);
  printf( "ST.33: nes.z: stored at %lx (hex)\n", (unsigned long) &(nes.z));
  printf( "ST.34: (nes.z).v1 at %lx (hex) contains %d (dec), %x (hex)\n",
          (unsigned long) &((nes.z).v1), (nes.z).v1, (nes.z).v1);
  printf( "ST.35: (nes.z).v2 at %lx (hex) contains %d (dec), %x (hex)\n",
          (unsigned long) &((nes.z).v2), (nes.z).v2, (nes.z).v2);
  printf( "ST.36: nes.str1 at %lx (hex) contains: %s\n",
          (unsigned long) &(nes.str1), nes.str1 );
  printf( "ST.37: nes.str2 at %lx (hex) contains: %s\n",
          (unsigned long) &(nes.str2), nes.str2 );

  na[0] = nes;     /* Copy the complete structure. */
  printf( "\nST.38: Executed na[0] = nes;\n" );

  nesp = na ;      /* Let nesp point to the copy. */
  printf( "\nST.39: Executed nesp = &na;\n" );
  printf( "ST.40: nesp: stored at %lx (hex); contains %ld (dec), %lx (hex)\n",
          (unsigned long) &nesp, (unsigned long) nesp, (unsigned long) nesp);
  printf( "ST.41: Dereference pointer nesp and we find: nesp->val=%d, and...\n",
          nesp->val );
  printf( "ST.42: nesp->c1='%c', (*nesp).c2='%c', and...\n",
      nesp->c1, (*nesp).c2 );
  printf( "ST.43: (nesp->z).v1=%d,(nesp->z).v2=%d, and...\n",
           (nesp->z).v1, (nesp->z).v2 );
  printf( "ST.44: nesp->str1=\"%s\" (*nesp).str2=\"%s\"\n",
      nesp->str1, (*nesp).str2 );

  nesp = nesp + 1;
  printf( "\nST.43: Executed nesp = nesp + 1;\n" );
  printf( "ST.44: nesp: stored at %lx (hex); contains %ld (dec), %lx (hex)\n",
          (unsigned long) &nesp, (unsigned long) nesp, (unsigned long) nesp);

  return( 0 );  /* exit from program by returning from main() */
} 
```

我得到的输出是：

```
Message ST.01 from struct.c: Hello, structured World!
ST.02: s1: stored at 60212c (hex), sizeof(s1) is 8 (dec)
ST.03: s1.v1 at 60212c (hex) contains 11 (dec), b (hex)
ST.04: s1.v2 at 602130 (hex) contains 17 (dec), 11 (hex)

ST.05: Executed ipp = &s1;
ST.06: ipp: stored at 7fff9d23ca00 (hex), contains 6299948 (dec), 60212c (hex)
ST.07: Dereference pointer ipp and we find: (*ipp).v1=11, (*ipp).v2=17
ST.08: Dereference with different syntax: ipp->v1=11, ipp->v2=17

ST.09: Executed (*ipp).v1 = nes.val;
ST.10: Executed ipp -> v2 = 4711;
ST.11: Dereference pointer ipp and we find: (*ipp).v1=17, (*ipp).v2=4711

ST.12: Initialized ipa.
ST.13: Memory at 6020a0 (hex) contains 1000
ST.14: Memory at 6020a4 (hex) contains 2000
ST.15: Memory at 6020a8 (hex) contains 1001
ST.16: Memory at 6020ac (hex) contains 2001
ST.17: Memory at 6020b0 (hex) contains 1002
ST.18: Memory at 6020b4 (hex) contains 2002

ST.23: Executed ipp = ipa;
ST.24: ipp: stored at 7fff9d23ca00 (hex), contains 6299808 (dec), 6020a0 (hex)
ST.25: Dereference pointer ipp and we find: ipp->v1=1000, ipp->v2=2000

ST.26: Executed ipp = ipp + 1;
ST.27: ipp: stored at 7fff9d23ca00 (hex), contains 6299816 (dec), 6020a8 (hex)
ST.28: Dereference pointer ipp and we find: ipp->v1=1001, ipp->v2=2001

ST.29: nes: stored at 602040 (hex), sizeof(nes) is 36 (dec)
ST.30: nes.val at 602040 (hex) contains 17 (dec), 11 (hex)
ST.31: nes.c1 at 602044 (hex) contains 'Q', 81 (dec), 51 (hex)
ST.32: nes.c2 at 602045 (hex) contains 'Z', 90 (dec), 5a (hex)
ST.33: nes.z: stored at 602048 (hex)
ST.34: (nes.z).v1 at 602048 (hex) contains 117 (dec), 75 (hex)
ST.35: (nes.z).v2 at 60204c (hex) contains 217 (dec), d9 (hex)
ST.36: nes.str1 at 602050 (hex) contains: Hello!
ST.37: nes.str2 at 602057 (hex) contains: Goodbye!

ST.38: Executed na[0] = nes;

ST.39: Executed nesp = &na;
ST.40: nesp: stored at 7fff9d23ca08 (hex); contains 6299840 (dec), 6020c0 (hex)
ST.41: Dereference pointer nesp and we find: nesp->val=17, and...
ST.42: nesp->c1='Q', (*nesp).c2='Z', and...
ST.43: (nesp->z).v1=117,(nesp->z).v2=217, and...
ST.44: nesp->str1="Hello!" (*nesp).str2="Goodbye!"

ST.43: Executed nesp = nesp + 1;
ST.44: nesp: stored at 7fff9d23ca08 (hex); contains 6299876 (dec), 6020e4 (hex) 
```

1.  内存没有一次对齐 4 个字节是什么意思？我认为内存总是一次对齐 4 个字节。

2.  任何部分变量之间是否有任何未使用的字节？我该如何检查这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T08:10:04.503

内存没有对齐，*变量*是。并且对齐要求通常取决于变量本身的类型。

例如，`char`变量可能能够到达*任何*地址，两字节`short`变量可能需要到达偶数地址，四字节`int`变量可能必须在四字节边界对齐等等。

C 编译器可以在 a 的成员之间的任意位置插入填充`struct`（以对齐该点之后的成员）和最后一个成员之后（以帮助对齐 that 的数组`struct`）。

他们不允许在 a 的第一个成员之前填充`struct`。

在检查填充方面，我不确定您为什么会关心它，因为它没有用于任何有用的事情。

但是，如果*必须，*您可以将`struct`变量的地址转换为 a `char *`，然后访问各个字节。就像是：

```
struct xyzzy {
    char c;
    // 3 bytes padding if int alignment is 4
    int i;
};
struct xyzzy plugh;
char *twisty = (char *)(&plugh);
// Now use twisty[1] for the first padding byte and so on. 
```

# java - linux 64bit libjvm.so：文件格式无法识别

> ID：12910144
> 
> 赞同：2
> 
> 时间：2012-10-16T08:07:41.700
> 
> 标签：java, linux, 64-bit

当我在我的 linux（64 位）上使用 javavm 时，我收到错误：.../amd64/server/libjvm.so：文件无法识别：文件 fromat 无法识别。

我无法搜索有关此的任何有用信息。

将 Linux 上的 JNI 库与 Java 7 JDK 链接

```
g++ -L$MYJDK/jre/lib/amd64/server -ljvm touch.o -o testjdk
/tc_work/dsd/testjdk7/jdk1.7.0_02/jre/lib/amd64/server/libjvm.so: file not recognized: File format not recognized

file $MYJDK/jre/lib/amd64/server/libjvm.so 
/tc_work/dsd/testjdk7/jdk1.7.0_02/jre/lib/amd64/server/libjvm.so: ELF 64-bit LSB shared object, AMD x86-64, version 1 (SYSV), not stripped

nm $MYJDK/jre/lib/amd64/server/libjvm.so 
nm: /tc_work/dsd/testjdk7/jdk1.7.0_02/jre/lib/amd64/server/libjvm.so: File format not recognized 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:11:21.140

我想你遇到了这个错误：[http](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7152237) ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7152237 ，另见[https://stackoverflow.com/questions/9619513/linking-jni-lib-on- linux-with-java-7-jdk](https://stackoverflow.com/questions/9619513/linking-jni-lib-on-linux-with-java-7-jdk)。如果可能的话，我建议将您的工具链 (g++) 升级到更新的版本。

# node.js - 在Nodejs中，如果cookie被删除，如何获取以前的会话数据

> ID：12910145
> 
> 赞同：0
> 
> 时间：2012-10-16T08:07:42.510
> 
> 标签：node.js, session, express, connect

如果用户手动或以其他方法删除所有 cookie，我想获取以前的会话数据。因为我也在会话和全局中存储了一些数据，所以我需要从全局中删除每个会话被破坏的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:16:14.343

如果用户删除了所有 cookie，那么他就是没有 cookie 的用户，对吗？那么如何区分这个用户和任何其他用户呢？这是一个非常困难的问题，我怀疑是否有可靠的解决方案。

例如，您可能希望通过 IP 识别用户，但 IP 可能会更改（动态 IP）。您可能希望通过创建 WebSocket（FlashSocket 的）连接来识别用户并使其保持打开状态，但这仅在用户查看您的页面时才有效（并且也可能手动关闭）。

所以忘记以前的会议。如果您需要清理会话数据，则创建一个 CRON 作业或后台线程（或在 Node.JS 的情况下为后台异步作业），它们会定期执行此操作。或者您可以只使用被动清理，即实现会话机制，当接近（预定义的）内存限制时会自行清理（这应该在创建新会话时触发）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:11:32.850

我只是将会话设置为在 redis 中自动过期，因此它会随着时间的推移自行清理。不幸的是，我忘记了我是如何做到这一点的，我认为它是数据库上的一个属性。

当有人注销时，我会销毁会话：

```
req.session.destroy(function(){
 //session has been destroyed
}); 
```

# c# - 如何通过C#代码只打开一次资源管理器

> ID：12910146
> 
> 赞同：1
> 
> 时间：2012-10-16T08:07:46.470
> 
> 标签：c#, winforms

我有这个打开资源管理器的代码（通过按下按钮）：

```
System.Diagnostics.Process.Start("IExplore.exe",@"C:\Help.html"); 
```

问题是，如果我多次按下按钮 - 资源管理器将打开很多节目

如何强制资源管理器只打开一次？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:13:49.533

```
if (Process.GetProcessesByName("iexplore").Length == 0)
    System.Diagnostics.Process.Start("IExplore.exe", @"C:\Help.html"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:16:11.393

1.  禁用按钮。
2.  通过标志控制点击

IE ; on_btn_clkd()
{
if(!previouslyClickd)
{
(点击功能)
previousClicked = false;
}
否则
返回；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:26:45.027

在您的班级中使用`ShDocVw.dll`..
在 Internet Explorer 的实例中声明

```
InternetExplorer wBrowser; 
```

并在您的按钮中单击添加

```
if (wBrowser==null)
    {
     wBrowser = new InternetExplorer();
     wBrowser.Visible = true;
     wBrowser.Navigate(@"C:\Help.html");
    } 
```

您需要添加在项目中`ShDocVw`找到的引用`System32`并导入命名空间`using SHDocVw;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T08:13:41.703

尝试使用这段代码：

```
bool ProcessIsRunning(string process)
{
    return (System.Diagnostics.Process.GetProcessesByName(process).Length != 0);
} 
```

用法：

```
if (!ProcessIsRunning("IExplore.exe"))
    System.Diagnostics.Process.Start("IExplore.exe",@"C:\Help.html"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T09:32:37.160

如果酸的默认浏览器`IE`只是试试这个代码：

```
System.Diagnostics.Process.Start(@"C:\Help.html"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T08:19:47.593

你可以这样做

```
private void Form1_Load(object sender, EventArgs e)
    {
        IeProcess = new Process();
        startInfo = new ProcessStartInfo("IExplore.exe");
        startInfo.WindowStyle = ProcessWindowStyle.Maximized;
    }

private void buttonStackoverflow_Click(object sender, EventArgs e)
    {
        startInfo.FileName = "www.Stackoverflow.com";
        IeProcess.StartInfo = startInfo;
        IeProcess.Start();
    }

    private void buttongoogle_Click(object sender, EventArgs e)
    {
        startInfo.FileName = "www.google.com";
        IeProcess.Start();
    } 
```

# android - android - 向用户询问应用程序评分并提供机会与朋友分享应用程序链接的标准方式

> ID：12910147
> 
> 赞同：4
> 
> 时间：2012-10-16T08:07:54.117
> 
> 标签：android

我发现了不同的方法来为 android 应用程序用户提供在应用程序内与朋友共享应用程序链接的机会，并要求他们在 google play 上对应用程序进行评分。由于我是使用标准方式做事的朋友，但对 android 来说还是新手，我想知道是否有谷歌推荐的标准方式来做到这一点，

*   要求应用内的应用用户在 Google Play 上对其进行评分
*   提供机会通过电子邮件、Facebook 等在应用程序内与朋友分享 google play 上的应用程序链接

谢谢哥们

**更新**

由于这显然不是很清楚，我的问题主要是围绕这样做的技术方面。（当然也欢迎其他建议）

**更新 2**

成立

[http://www.androidsnippets.com/prompt-engaged-users-to-rate-your-app-in-the-android-market-appirater](http://www.androidsnippets.com/prompt-engaged-users-to-rate-your-app-in-the-android-market-appirater)

这不完全是我想要的，但可能对绊倒这个线程的人有用。其核心是 Budius 所建议的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:14:33.827

确实没有“标准”的方式来做到这一点。这是一个非常微妙的情况，我想第一条规则是不要对你的用户粗鲁或过度打扰。

让共享选项在某些菜单上始终可用，不要强迫您的用户使用它。

关于评分，您可以计算您的应用程序的使用次数（或使用时长），并根据该估计弹出一个东西，让用户可以选择对其进行评分，但除非用户点击“稍后提醒我”，否则永远不要再次显示该消息。

**编辑：**

根据作者评论：没有什么特别的代码明智，要对应用程序进行评分，您只需启动一个 Action_VIEW 到您的应用程序链接（例如，对于我的应用程序）

```
 startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("https://play.google.com/store/apps/details?id=com.budius.WiFiShoot"))); 
```

并且共享是相同的标准共享代码（[http://developer.android.com/training/sharing/send.html](http://developer.android.com/training/sharing/send.html)），只是传递您的应用程序链接，也许还有一些额外的消息，例如：“看看我的真棒应用程序！”

# android-ndk - Android NDK 构建给出了错误 6

> ID：12910149
> 
> 赞同：2
> 
> 时间：2012-10-16T08:08:12.807
> 
> 标签：android-ndk, gnu-make

无法让 Eclipse 构建我的 NDK/JNI 项目。Eclipse 或命令提示符下的 ndk-build 都提供以下输出：

```
/cygdrive/c/android-ndk-r8b/build/core/setup-app.mk:75: recipe for target `clean-installed-binaries' failed
make: *** [clean-installed-binaries] Error 6 
```

什么是“错误 6”？我在任何地方都找不到任何文档。有用的是，它没有说明问题是什么，只是给出了神秘的错误代码。

我找到了 setup-app.mk 并尝试插入一些东西来回显它正在执行的命令，这只是删除了一些文件。我将它复制并粘贴到命令提示符下，它自己运行良好：

```
rm -f ./libs/armeabi/lib*.so ./libs/armeabi-v7a/lib*.so ./libs/mips/lib*.so ./libs/x86/lib*.so 
```

还尝试插入“whoami”，它直接从命令提示符匹配了一个 whoami，因此它不会充当具有不同权限或其他内容的不同用户。

被困在这几天了。任何人都可以帮忙吗？

抢。

PS。我发现 Eclipse/NDK/JNI 几乎无法使用。它似乎只工作了一两个星期，然后再次陷入困境，似乎对我没有任何改变。在我修复此错误之前，这个现在无法使用。我也将它安装在另一台机器上，由于完全不同的原因，它现在也完全坏了。有人如何在这种环境中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:02:49.853

实际命令起作用并不奇怪：错误消息来自**make**本身，它未能生成适当的命令！

现在可能发生了什么：很可能，您有一些带有空格的路径。确保相邻的 eclipse、cygwin、project、workspace 和 ndk 在其根路径中有空格。

也许，PATH 有一些问题。我指的是三种环境中的环境变量：windows native、cygwin、eclipse。会不会是让你实际跑起来和你想象的不一样？

请注意，您不需要 cygwin 来使用 NDK 7 及更高版本进行构建，只需使用**ndk-build.cmd**即可。

# asp.net - 使用 ASP.NET 和实体框架的 SQL Server 2008 R2 FILESTREAM

> ID：12910150
> 
> 赞同：2
> 
> 时间：2012-10-16T08:08:21.157
> 
> 标签：asp.net, sql, entity-framework, filestream

我现在已经搜索了 2 天，但仍在苦苦挣扎！任何建议将不胜感激！

我正忙于创建一个网络应用程序 - 一个在线车辆交易商项目。

技术：VS2010、SQL Server 2008 R2、实体数据模型 4 (EF)、用于图像的 SQL 文件流。

我的文件流设置正确，可以上传和下载图像 ( `varbinary(MAX)`)。

我的问题/问题是：

1.  我在将下载图像的数据网格中有链接。我不想下载，我需要在网格中显示实际图像。

2.  以上都是使用 ADO.NET 完成的，如何将其集成到 EF 中？我的理解是 EF 不支持文件流？这在 EF4 中是否发生了变化？

也许我把这整件事倒过来了？

任何建议，示例链接将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:14:36.697

我还不知道 EF 中的 FILESTREAM 支持，但我认为您并不真正需要它。您可以只在 EF 中映射图像的 ID，并使用普通 SQL 在浏览器中加载图像内容。这不会是一个问题，因为您永远不会加载以在 Web 应用程序中急切地加载图像，因为它是通过单独的 URL 呈现的，因此您只需要 ID。通过 ID 获取内容的 SQL 是有史以来最简单的事情，因此您不会失去任何 EF 功能。如果您有与 EF 对象相关的 FK，唯一的问题可能是最终插入，但这应该足够简单。

# java - mvn pax:provision (org.osgi.framework.BundleException: Fragment bundles 无法启动。)

> ID：12910154
> 
> 赞同：0
> 
> 时间：2012-10-16T08:08:55.050
> 
> 标签：java, maven, osgi, pax

以下是我的父 pom.xml 的一些部分：

```
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-api</artifactId>
  <version>1.6.1</version>
</dependency>
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-jdk14</artifactId>
  <version>1.6.1</version>
  <scope>runtime</scope>
</dependency>

     .
     .
     .

<plugin>
  <groupId>org.ops4j</groupId>
  <artifactId>maven-pax-plugin</artifactId>
  <version>1.5</version>
</plugin> 
```

如果我运行`mvn pax:provision`一切正常，除了一件事。我得到：

> `Auto-properties start: file:bundles/slf4j.jdk14_1.6.1.jar (org.osgi.framework.BundleException: Fragment bundles can not be started.)`

消息很清楚，但我如何告诉 pax 插件 slf4j.jdk 是片段而不是包？

尽管我收到错误，但所有捆绑包都处于活动状态，但片段已解决。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:00:19.813

我知道的唯一方法是使用`<provision>`带有`@nostart`后缀的显式元素。这些参数逐字传递给[Pax Runner](http://team.ops4j.org/wiki/display/paxrunner/Provisioning)。

# asp.net-mvc-3 - 从jqgrid的行中获取rowID

> ID：12910157
> 
> 赞同：0
> 
> 时间：2012-10-16T08:09:15.113
> 
> 标签：asp.net-mvc-3, jqgrid, checkbox, jqgrid-asp.net

在我的`asp.net MVC 3`应用程序中`Jqgrid`用作我的网格。它包含一个复选框，我管理事件如下

```
 $("#list").find('input[type=checkbox]').live('change', function () {
                if ($(this).is(':checked')) {
                    var _row = $(this).parent().parent();
}
}); 
```

我得到了使用`$(this).parent().parent()`我想要的行`get the id of the _row`。我怎样才能得到身份证？有什么方法请分享

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:35:14.820

这应该可以解决问题：

```
$('#list').find('input[type=checkbox]').live('change', function () {
    if ($(this).is(':checked')) {
        var row = $(this).parent().parent();
        var rowId = row.attr('id');
    }
}); 
```

如果您使用`idPrefix`jqGrid 选项的默认值（为空字符串），否则 id 将附加此选项的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:27:06.443

在选择行上，您可以获得所选行的 id。事实上，当您选中一个复选框时，您也会选择一行：

```
onSelectRow: function(id){
yourId = $("#yourGrid").jqGrid('getGridParam', 'selrow');
alert("The id of checked row is: "+yourId);
} 
```

# css - CSS 在 Heroku 上返回“内部服务器错误”

> ID：12910158
> 
> 赞同：0
> 
> 时间：2012-10-16T08:09:15.830
> 
> 标签：css, ruby-on-rails, stylesheet-link-tag

我正在使用 Rails 3.1.1 并且有一个网站，其样式表设置会根据季节等在一年中发生变化，如下所示：

```
<%= stylesheet_link_tag "application" %>
<%= stylesheet_link_tag 'themes/theme_winter.css' %> 
```

与`theme_winter.css`被放置在`themes`样式表文件夹中的一个文件夹中。

我正在**使用 Memcachier**，所以在线它看起来像这样：

```
 <link href="/assets/application-75b2717254d80c8ed37d5f955e2a0287.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/themes/theme_winter-a5de7f8f92d3d03061fd6aeb23ca2c40.css" media="screen" rel="stylesheet" type="text/css" /> 
```

这在我的本地机器上工作得很好，但在 Heroku 上，冬季样式表（和类似的）不会加载。如果我查看页面源并单击链接（在页面源中，以查看 css），我的 Web 浏览器中会显示此错误：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<HTML>
  <HEAD><TITLE>Internal Server Error</TITLE></HEAD>
  <BODY>
    <H1>Internal Server Error</H1>
    undefined method `each' for nil:NilClass
    <HR>
    <ADDRESS>
     WEBrick/1.3.1 (Ruby/1.9.2/2011-07-09) at
     www.mydomain.com:80
    </ADDRESS>
  </BODY>
</HTML> 
```

我真的不明白为什么它`undefined method`为 nil:NilClass 指代每个'。这没有意义！

我相信这个问题与缓存有关，因为在我实现 Memcachier 之前它曾经工作过，但我也记错了。

无论如何，我都尝试添加`:cache => false`和上传新文件，`git add -A`但没有任何运气。

我真的看不出出了什么问题。我从未在 CSS 中看到过这样的错误！你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:26:38.623

这似乎与[这个问题](https://stackoverflow.com/questions/12911060/fragment-exist-for-memcache-does-not-find-cached-info/)有关，为什么我不知道。但问题似乎与我没有安装 memcachier gem 有关。

# git - Git推送上游

> ID：12910159
> 
> 赞同：7
> 
> 时间：2012-10-16T08:09:18.323
> 
> 标签：git, github

我试图为此寻找答案，但找不到直接的答案。

我正在运行下面的代码。

```
git fetch upstream  # get the latest copy from master / upstream
git merge upstream/master  # merge the downloaded copies and merge to your copy
git commit -am"test"  # commit your latest changes
git push origin master  # push to your fork
git push upstream  # push to master copy from where you forked your project - is this safe? 
```

推送到上游（`git push upstream`）是否安全？我的主要目标是将我的更改从我的 fork 应用到主项目。还是有更好的方法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:16:02.383

这取决于您是否有权推送。如果还没有，请让上游存储库的所有者从您的 fork 中提取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:17:51.653

由于您已将此问题标记为 GitHub，因此我假设您希望将更改推送到您的 fork，然后从 GitHub 的 UI 发出拉取请求。Git 没有用于发出拉取请求的命令行选项。

您可以在[https://help.github.com/articles/using-pull-requests阅读更多内容](https://help.github.com/articles/using-pull-requests)

# java - jackson jsonnode 属性错误

> ID：12910166
> 
> 赞同：0
> 
> 时间：2012-10-16T08:09:57.930
> 
> 标签：java, jackson, dropwizard

我想要这样的东西

```
@Property
public JsonNode node 
```

为了能够直接从rest api客户端传入。

这适用于 Jackson 1.9（没有特殊序列化），但由于某种原因不适用于 2.1。我收到一条错误消息，提示无法对 JsonNode 进行反序列化。

我创建了一个实现 MessageBodyReader 接口的类，但我不确定如何实际使用它。我该如何进行这项工作？

还有其他解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:43:08.927

发现了问题。

原来我在应该使用 com.fasterxml.jackson.annotate.JsonProperty 时使用了来自 org.codehaus.jackson.annotate.JsonProperty 的错误 JsonNode

# c# - 为什么我的方法调用 Assembly.GetCallingAssembly() 不是 JIT 内联的？

> ID：12910167
> 
> 赞同：5
> 
> 时间：2012-10-16T08:09:58.530
> 
> 标签：c#, visual-studio, inline, jit, vshost.exe

我正在尝试制作一个简短的 C# 片段来说明由于[MSDN 中概述](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getcallingassembly.aspx)`Assembly.GetCallingAssembly()`的 JIT 内联而导致的行为变化。到目前为止，这是我的代码：

```
class Program
{
   static void Main(string[] args)
   {
       Console.WriteLine( GetAssembly().FullName );
       Console.ReadLine();
   }

   static Assembly GetAssembly()
   {
       return System.Reflection.Assembly.GetCallingAssembly();
   }
} 
```

我在“Release”中构建并开始使用“Start without Debugging” - 此设置使[此答案](https://stackoverflow.com/a/12686974/57428)中的代码产生内联。我看到的结果是

```
ConsoleApplication2, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null 
```

所以很明显`GetAssembly()`没有内联到`Main()`，否则我会看到`mscorlib`调用程序集。

我已经查看了所有内联标准，但我不明白为什么`GetAssembly()`不内联。

是否有可能知道为什么 JIT 编译器决定不内联调用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T10:19:22.353

这是 .NET 3.5 中 Assembly.GetCallingAssembly() 的声明：

```
[MethodImpl(MethodImplOptions.NoInlining)]
public static Assembly GetCallingAssembly()
{
    StackCrawlMark lookForMyCallersCaller = StackCrawlMark.LookForMyCallersCaller;
    return nGetExecutingAssembly(ref lookForMyCallersCaller);
} 
```

StackCrawlMark 枚举很有趣，当调用者将被内联时，“查找我的调用者调用者”无法正常工作。在 SSCLI20 source code for thread.cs 中有一条注释，其中声明了枚举：

> 声明此枚举类型的本地 var 并通过 ref 将其传递给需要进行堆栈爬取的函数将防止内联调用 [原文如此] 并将 ESP 点传递给堆栈爬取到

这与 GetCallingAssembly() 中发生的事情非常匹配，它是一个局部变量，并且确实由 ref 传递。不确定机制是什么，但抖动会产生一个名为 CORINFO_FLG_BAD_INLINEE 的方法属性。这反过来又强制调用 MethodDesc::SetNotInline()。这是一个猜测，这是非常模糊的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T08:46:00.323

再加上我的两分钱。不要依赖 JIT*可能会*做的事情来让您的程序正常运行。

禁止 JIT 内联方法的一些条件*如下*（取自[此处](http://blogs.msdn.com/b/ericgu/archive/2004/01/29/64717.aspx)）

*   大于 32 字节 IL 的方法将不会被内联。
*   虚函数没有内联。
*   具有复杂流控制的方法不会被内联。复杂流控制是除 if/then/else 之外的任何流控制；在这种情况下，切换或同时。
*   包含异常处理块的方法不是内联的，尽管抛出异常的方法仍然是内联的候选方法。
*   如果方法的任何形式参数是结构，则该方法将不会被内联。

仅仅因为 JIT*可以*内联该方法，并不意味着它一定会。将其与构建配置/运行时/操作系统组合之间的行为差​​异结合起来，嗯......你有它。

有关 .Net 3.5 SP1 JIT 的内联行为的更多信息在[这里](http://blogs.msdn.com/b/vancem/archive/2008/08/19/to-inline-or-not-to-inline-that-is-the-question.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T08:37:16.800

实际上，您的调用`Program.GetAssembly` *被*内联到`Program.Main`. 但是您看不到区别，因为`Program.GetAssembly`和`Program.Main`都定义在同一个名为`ConsoleApplication2`.

尽管您可以用另一种方式说明 JIT 内联：

```
using System;
using System.Diagnostics;

namespace A3
{
    public class Program
    {
        static void Main(string[] args)
        {
            StackFrame[] stackFrames = GetStackFrames();
            foreach (StackFrame stackFrame in stackFrames)
                Console.WriteLine(stackFrame.GetMethod().Name); // write method name

            Console.ReadLine();
        }

        //[MethodImpl(MethodImplOptions.NoInlining)]
        static StackFrame[] GetStackFrames()
        {
            StackTrace stackTrace = new StackTrace(); // get call stack
            return stackTrace.GetFrames(); // get method calls (frames)
        }
    }
} 
```

如果没有 JIT 内联（例如，在 Debug 模式下或如果`[MethodImpl(MethodImplOptions.NoInlining)]`属性应用于`GetStackFrames`），它将至少向控制台写入两行：

1.  `GetStackFrames`
2.  `Main`

但如果发生内联，`stackFrames`将只包含一种方法：`Main`

**更新**

此外，您可以在此处阅读：[调试和托管过程](http://msdn.microsoft.com/en-us/library/ms242202.aspx)以及 Rawling 在他的评论中提到的：

> Assembly.GetCallingAssembly().FullName 根据是否启用托管进程返回不同的结果。如果在启用托管进程的情况下调用 Assembly.GetCallingAssembly().FullName，它将返回 mscorlib。如果在禁用托管进程的情况下调用 Assembly.GetCallingAssembly().FullName，它会返回应用程序名称。

# java - 使用 JCC 创建 Java 库的接口后，如何在 Python 脚本中创建 Java 字符串对象？

> ID：12910171
> 
> 赞同：2
> 
> 时间：2012-10-16T08:10:16.757
> 
> 标签：java, python, string, interface, jcc

我有一个 Java 库，我使用 Apache 的 JCC 创建了一个 CPython 接口。当我执行以下操作时，会出现“String”对象，所以我认为 String 对象有一个合适的接口（“p”是我使用“import library as p”加载的库）。

```
dir(p)
... 
'OutputStream', 'Package', 'PrintStream', 'PrintWriter', 'RuntimeException',
'SecurityException', 'Serializable', 'Short', 'StackTraceElement', 'String', 
... 
```

使用我“接口”的这个库从 Python 创建 Java 字符串的方法是什么？互联网上没有答案，JCC 文档太短。

我不想要一个 Python 字符串，而是一个可以传递给接口 Java 方法的 Java 字符串。

# c#-4.0 - 在应用程序中将 alla textinput 控件转换为大写

> ID：12910173
> 
> 赞同：0
> 
> 时间：2012-10-16T08:10:20.790
> 
> 标签：c#-4.0

亲爱的我们已经开发了一个 hr 应用程序（winform），它包含近 98 个表格。它在我们的组织中进行测试。但是现在的问题是管理层希望所有的数据输入都是大写的。我们没有在我们的任何控件中设置任何字符大小写，现在将字符大小写更改为所有控件几乎是非常危险的

任何人都可以提出任何将输入限制为大写的想法吗？我在 Program.cs 文件中尝试过一些东西。但它似乎不起作用

还试图覆盖 textbox.textchanged 事件，这似乎是一个愚蠢的想法，如果有更多想法，请考虑将我们视为开发中的新成员

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:20:11.453

虽然这是一个奇怪的要求，但您可以使用 LINQ 来“大写”所有 TextBox-Control：

```
var allTxt = from form in Application.OpenForms.Cast<Form>()
             from txt in form.Controls.OfType<TextBoxBase>()
             select txt;
foreach (var txt in allTxt)
    txt.Text = txt.Text.ToUpper(); 
```

[`Application.OpenForms`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.openforms.aspx)返回应用程序拥有的所有打开的表单，[`TextBoxBase`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.textboxbase.aspx)是文本控件（TextBox，RichTextBox）的基类。[`Enumerable.OfType`](http://msdn.microsoft.com/en-us/library/bb360913.aspx)过滤器`TextBoxBase`。

请注意，这不会递归搜索控件。当前仅搜索顶部的控制容器。如果您需要递归搜索，请执行类似[这样](https://stackoverflow.com/a/2525113/284240)的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:15:57.027

看看[KeyPreview](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.keypreview%28v=vs.71%29.aspx)事件，它可以让您控制应用程序的所有输入，而不管焦点在哪里。

我想说，到目前为止，最好的解决方案是用您自己的文本框实现替换所有文本框 - 使这样的更改更简单，但如果这不切实际，KeyPreview 应该可以工作。

# bash - 使用 bash 打开和关闭进程

> ID：12910174
> 
> 赞同：2
> 
> 时间：2012-10-16T08:10:21.070
> 
> 标签：bash, firefox, unix, process, kill

使用 Ubuntu，我想为 Ubuntu 服务器创建一个 shell 脚本 (bash)，它将打开一个 firefox 实例，然后在浏览器中关闭**该**特定实例？

要打开一个 Firefox 实例，我可以这样写：

```
firefox www.example.com 
```

我已经阅读了搜索所有 firefox 实例并**手动**关闭它们的文章，我可以编写：

```
ps aux | grep firefox
pidof firefox
kill #process# 
```

但是有没有办法让我搜索我在开始时打开的**特定**的 firefox 实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:16:11.220

您可以`jobs`用来获取从该 shell 启动的所有正在运行的进程的 ID（例如，在您的脚本中）

```
#!/bin/bash

firefox www.example.com &
PID=`jobs -p`

kill $PID 
```

查看`help jobs`选项。请注意，`jobs`列出*了从此 shell 启动的所有进程*，因此如果您遵循这种方法并想要杀死多个进程，您可能需要对输出进行一些额外的解析`jobs`以找到正确的进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:50:11.827

在后台启动进程，并记住它的 pid。

```
#!/bin/bash
firefox www.example.com &
declare -i PID=$!
# blah, blah, blah
kill ${PID} 
```

如果您担心 firefox 退出并且同时分配了其他一些进程 ${PID} 您可以将 kill 更改为以下内容以降低风险：

```
ps -p ${PID} | fgrep firefox && kill ${PID} 
```

# java - FTP 的浏览按钮

> ID：12910178
> 
> 赞同：0
> 
> 时间：2012-10-16T08:10:40.770
> 
> 标签：java, button, ftp, jfilechooser

我是java新手，正在努力学习。现在我正在尝试编写一个下载/上传管理器程序。我想为 FTP 创建一个浏览按钮，以便用户可以从那里选择要下载的文件。我可以手动下载它并写入其目录。有没有办法使用**JFileChooser**或类似的类来做到这一点？我不想使用插件，因为我想自己写。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:31:43.040

不确定“我不想使用插件，因为我想自己编写它”是什么意思。除非您想自己编写完整的[FTP 客户端](http://en.wikipedia.org/wiki/FTP_client)，否则请考虑使用[ftp4j](http://www.sauronsoftware.it/projects/ftp4j/)。

`JFileChooser`是选择本地文件。或者提供您自己`FileSystemView`的`ftp4j`后端并使用它来选择远程服务器上的文件进行下载。

简短的回答：只需使用 ftp4j 通过 FTP 浏览文件。

# java - 正则表达式搜索字符串

> ID：12910181
> 
> 赞同：-1
> 
> 时间：2012-10-16T08:10:48.723
> 
> 标签：java, regex

我在为我的应用程序中需要的特定参数搜索字符串时遇到了很大的问题，我假设唯一真正的方法是使用正则表达式，但是它们让我非常头疼！我通常不自己写它们，但把它们从其他网站上取下来，但是我需要的东西不够简单，不能被包括在内:(

这是字符串：

```
10 50 u E2U+pstn:tel "!^(.*)$!tel:\\1;spn=42180;mcc=234;mnc=33!" . 
```

我需要从这个字符串中提取`spn`,`mcc`和 the 。`mnc`不幸的是，我调用的 api 更改了某些请求在字符串上的位置，这使得索引字符串变得困难。我真的需要列出我需要获取 spn= 的内容，然后继续阅读数字，但我尝试的一切都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:13:12.550

我不会使用正则表达式，而只是拆分：

```
String[] tokens = str.split(";");
for (int i=0; i<tokens.length; i++) {
   if (tokens[i].startsWith("spn=")) {
       spn = Integer.parseInt(tokens[i].substring("spn=".length()));
   }
} 
```

当然，您可以对此进行一点客观化，或者使用`"spn="`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:21:51.737

使用[`Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)and的解决方案[`Matcher`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html)：

```
String s = "10 50 u E2U+pstn:tel \"!^(.*)$!tel:\\\\1;spn=42180;mcc=234;mnc=33!\"";
Pattern p = Pattern.compile("^.*spn=([0-9]+);mcc=([0-9]*);mnc=([0-9]*)!.*$");
Matcher matcher = p.matcher(s);
matcher.matches(); // true
String spn = matcher.group(1); // 42180
String mcc = matcher.group(2); // 234
String mnc = matcher.group(3); // 33 
```

**编辑：**您也可以使用[命名捕获组](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#groupname)：

```
Pattern p =
  Pattern.compile("^.*spn=(?<spn>[0-9]+);mcc=(?<mcc>[0-9]*);mnc=(?<mnc>[0-9]*)!.*$");
Matcher matcher = p.matcher(s);
matcher.matches(); // true
String spn = matcher.group("spn");
String mcc = matcher.group("mcc");
String mnc = matcher.group("mnc"); 
```

# ios - “将源编译为 Objective-C++”的 ZipArchive 链接器错误

> ID：12910183
> 
> 赞同：2
> 
> 时间：2012-10-16T08:10:55.093
> 
> 标签：ios, linker-errors, ziparchive

我使用的是 Xcode 4.3.2，目标架构是 armv7，基础 sdk 是 iOS 5.1。

我尝试在一些测试项目上使用 ZipArchive，它可以在构建设置设置为“根据文件类型”时正常工作。但是，当我将设置更改为“将源代码编译为 Objective-C++”（这是我的主项目的要求）时，编译器会引发很多错误（解析和语义问题）。

那么我的问题是在这个 Objective-C++ 项目中编译 .c 文件。所以我看到了这个问题，[[here]](https://stackoverflow.com/questions/2137541/xcode-compile-source-as-override-for-specific-file)并将文件类型从“.c”更改为“.c.objc”。现在，我收到链接器错误。人们将 ZipArchive 导入他们的项目时发现的常见问题。像这样->

```
Undefined symbols for architecture i386: "_zipOpen", referenced from: -[ZipArchive CreateZipFile2:] in ZipArchive.o 
```

而且我认为针对这些链接器错误问题给出的解决方案是针对编译为“文件类型”的项目源，而不是针对 Objective-C++。知道可以做什么吗？

# php - PHP 中的 MongoDB（Yii 框架）。有条件查找

> ID：12910185
> 
> 赞同：0
> 
> 时间：2012-10-16T08:11:03.513
> 
> 标签：php, mongodb, yii, mongodb-php

如何在我的集合中找到字段“日期”=“当前日期”的所有值？

我有：

```
$cursor = $mongo->$db->$collection->find(array('date_of_download' => date('Y-m-d',time()) )); 
```

但只找到字段“date_of_download”

在带有条件的 Mongo 查询中：

```
$in

The $in operator is analogous to the SQL IN modifier, allowing you to specify an array    of possible matches.

db.collection.find( { field : { $in : array } } ); 
```

但是我怎么用 Yii 写呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:21:48.063

你可以让它工作如下

```
//Mongo Syntax
db.collection.find( { field : { $in : array } } ); 
```

到（在 PHP + Yii 中）

```
//This example
$cursor = $mongo->$db->$collection->find(array('date_of_download' => array('$in' => array('2012-09-11', '2012-09-12')))); 
```

# c# - 将 png 保存到输出流被截断

> ID：12910186
> 
> 赞同：0
> 
> 时间：2012-10-16T08:11:11.053
> 
> 标签：c#, browser, iis-7.5

希望这不是重复...

假设我有一个 png 格式的图像，大小约为 300kb，我将它从一个 aspx 文件发送到客户端，如下所示：

```
Bitmap img = new Bitmap(filepath);
using(MemoryStream ms = new MemoryStream())
{
    img.save(ms, ImageFormat.Png);

    Response.ContenType="image/png";
    ms.WriteTo(Response.OutputStream);
}
img.Dispose(); 
```

在客户端javascript中，它很简单：

```
var img = new Image();
img.src = xxx.aspx?param=semething; 
```

这通常有效......但有时响应似乎被缩短了。Chrome 会等待该请求，直到超时。在 firebug 中，在 Net 选项卡下的 Images 视图中，请求实际上显示如下：

```
Get xxx.aspx?param=something   hostUrl   0(14.7mb) 127.0.0.1:80 
```

那 14.7mb 看起来很奇怪......在它看似超时后，萤火虫实际上会显示整个加载的图像......所以在这种情况下，IIS 似乎已经发送了所有内容......

在所有情况下，标头都正确显示了 contentType 和 content-Length。有时请求不会结束，直到我关闭浏览器或从网页中提取图像。然后我可以找到 IIS 向事件日志发送错误消息，说明远程主机关闭了连接。

我似乎无法确定问题所在...

*   编辑 -

改为简单地做一个Response.TransmitFile(filePath)，但问题仍然存在。至少在 chrome 中，我认为请求最终会在 90 秒后被浏览器终止。IIS 没有记录任何错误......看起来 IIS 认为它已经完成了它必须做的所有事情......但是在通往浏览器的途中丢失了一些东西......在本地机器上。

我将把系统带到另一台机器上，稍后再进行测试...稍后再尝试更改为 .ashx...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:18:12.510

不确定那里运行的其他代码，但您需要确保在写入任何内容之前先清除您的响应：

```
Response.Clear();
Response.ClearContent();
Response.ClearHeaders(); 
```

另外我强烈建议您使用**Response.TransmitFile**而不是将文件读入内存，读取它然后写入输出流可能真的很消耗内存。

**编辑**

此外，如果您可以更改为使用 .ashx 而不是 .aspx 它可能会更快。

# python - Pandas DataFrame 按天/小时/分钟切片

> ID：12910187
> 
> 赞同：6
> 
> 时间：2012-10-16T08:11:17.070
> 
> 标签：python, pandas, slice

我有带有日期时间索引的熊猫数据框，例如“YYYY-MM-DD HH:MM:SS”。

```
Index               Parameter
2007-05-02 14:14:08     134.8
2007-05-02 14:14:32     134.8 
2007-05-02 14:14:41     134.8 
2007-05-02 14:14:53     134.8 
2007-05-02 14:15:01     134.8 
2007-05-02 14:15:09     134.8 
......
2007-05-30 23:08:02     105.9 
2007-05-30 23:18:02     105.9 
2007-05-30 23:28:02     105.9 
2007-05-30 23:38:03     105.8 
```

`df['2007']`可以按年或按月对 DataFrame 进行切片`df['2007-05']`吗？

但是，例如，当我尝试按天对 DataFrame 进行切片时`df['2007-05-02']`，我遇到了错误：

```
KeyError: < Timestamp: 2007-02-05 00:00:00\. 
```

我使用熊猫版本 8.0.1。是否可以以小于年或月的频率对 DataFrame 进行切片？例如，按天还是按小时？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T08:16:51.230

使用`df.ix[x:y]`where`x`和`y`are datetime 对象。

例子：

```
In [117]: frame.index.summary()
Out[117]: 'DatetimeIndex: 6312960 entries, 2000-04-05 00:01:00 to 2012-04-06 00:00:00\nFreq: T'

In [118]: x=datetime(2001, 4, 5, 0, 1)

In [119]: y=datetime(2001, 4, 5, 0, 5)

In [120]: print frame.ix[x:y]
                     radiation      tamb
2001-04-05 00:01:00  67.958873  8.077386
2001-04-05 00:02:00  50.801294  0.731453
2001-04-05 00:03:00  16.042035  6.944998
2001-04-05 00:04:00   5.678343  9.728967
2001-04-05 00:05:00  72.551601  7.652942 
```

你也可以这样做：

```
In [121]: print frame.ix[x]
radiation    67.958873
tamb          8.077386
Name: 2001-04-05 00:01:00 
```

# validation - 不反映用户需求的需求示例

> ID：12910189
> 
> 赞同：1
> 
> 时间：2012-10-16T08:11:29.853
> 
> 标签：validation, requirements

我已经读过软件可以通过验证阶段（所有要求都已完成）但验证失败 - 要求不能反映用户的需求。我想不出一个需求实际上错过了真正使用的需求的例子。（这些需求如何通过需求分析验证？）。我会很感激一个例子，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:16:20.613

如果有隐含的要求，它很容易发生。例如：John 想要一个软件，它可以在 ebay 上找到商品的最低价格。他没有说他希望此次发行来自他的国家，应该是拍卖。

# javascript - javascript - attr('href') 在 IE8 中不起作用

> ID：12910191
> 
> 赞同：1
> 
> 时间：2012-10-16T08:11:33.860
> 
> 标签：javascript, href

我的网站上有一个脚本似乎无法在 IE8 中运行。

目的是单击第 2 节（下）中的链接并检索第 1 节中的 href 并传递给 countries.loadajaxpage 脚本。

第 1 节

```
<a id="circle_all_all" class="circle selected" href="my_news_all_al.php" rel="popularcontainer" style="display:block;"></a> 
```

第 2 节

```
<a onclick="var circle = $('.selected a').attr('href');var c = circle.slice(0, -7);countries.loadajaxpage(c+'_al.php');>Click here</a> 
```

我尝试使用 alert(circles) 来查看它是否在 IE8 中有效，但它不（在其他浏览器中有效，包括 IE9）

您的帮助将受到高度评价。

谢谢大家。

乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:13:04.923

尝试：

```
var circle = $('a.selected') 
```

# java - 无法在 UIMA Eclipse 中查看组件描述符编辑器

> ID：12910193
> 
> 赞同：0
> 
> 时间：2012-10-16T08:11:49.193
> 
> 标签：java, eclipse, uima

我已经按照网站上的说明安装了 UIMA 并将其与 eclipse 集成。但是，即使在我将插件放入 Eclipse 之后，当我转到描述符->教程->ex1->TutorialTypeSystem.xml 下的 xml 文件时，我也无法使用组件描述符编辑器打开它，因为当我看不到该选项时我右键单击它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:20:55.507

尝试使用 Eclipse 更新站点而不是手动放入 Jars。

# android - 我的日志文件中的 Tapfortap 频繁请求

> ID：12910196
> 
> 赞同：-1
> 
> 时间：2012-10-16T08:12:06.390
> 
> 标签：android

在 adb logcat 中，我看到了这一点，即使所有应用程序都已关闭，并且屏幕已关闭。有人能告诉我为什么当应用程序关闭时，tapfortap 不会停止发送请求吗？

```
10-16 10:09:19.874 D/com.tapfortap.TapForTap( 1692): has checked in? true
10-16 10:09:19.904 D/com.tapfortap.TapForTap( 1692): has checked in? true
10-16 10:09:19.973 D/com.tapfortap.TapForTap( 1692): has checked in? true
10-16 10:09:20.154 D/com.tapfortap.TapForTap( 1692): has checked in? true
10-16 10:09:20.204 D/com.tapfortap.TapForTap( 1692): has checked in? true
10-16 10:09:20.263 D/com.tapfortap.TapForTap( 1692): has checked in? true
10-16 10:09:20.294 D/com.tapfortap.TapForTap( 1692): has checked in? true
10-16 10:09:20.344 D/com.tapfortap.TapForTap( 1692): has checked in? true
10-16 10:09:20.384 D/com.tapfortap.TapForTap( 1692): has checked in? true
10-16 10:09:20.443 D/com.tapfortap.TapForTap( 1692): has checked in? true
10-16 10:09:20.524 D/com.tapfortap.TapForTap( 1692): has checked in? true
10-16 10:09:20.563 D/com.tapfortap.TapForTap( 1692): has checked in? true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:21:22.943

这些是调试日志消息。如果您使用最新版本的 Tap for Tap 或过滤日志以不显示调试信息，那么您将不会在日志中看到这一点。它可能如此频繁的一个原因是有人试图循环请求广告。其上的 SDK 肯定不会每秒多次调用该方法！

资料来源：我是 Tap for Tap 的首席开发人员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:14:00.697

TapForTap 可能是一项服务。它正在询问它是否已签入。

# magento - 使用产品 ID 在 Magento 中获取产品 sku 以获取大型收藏

> ID：12910198
> 
> 赞同：4
> 
> 时间：2012-10-16T08:12:13.117
> 
> 标签：magento

我有一个包含近 90000 种产品的目录。我需要检索所有没有关联图像的产品 sku。通过 sql 查询，我可以获得所有没有图像的产品的 id 列表。我需要从该 ID 获取产品 sku。所以，我有一个 $ids 数组，其中包含所有没有图像的产品（接近 60000）。

我试图通过使用magento api简单的东西来获取所有相应的sku：

```
foreach ($ids as $id){
   $product = Mage::getModel('catalog/product')->load($id);
   echo $product->getSku()."\n";
} 
```

但这会导致 PHP 致命错误：允许的内存大小...（内存大小为 1024Mb，我无法更改）。

我的问题是：从这个 $ids 数组中，我怎样才能得到所有相应的 sku 而不会导致内存大小错误？有没有更简单的方法来获取具有产品 ID 的产品属性？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-16T08:47:12.210

目前您正在加载大量不需要的产品数据，这会导致致命错误。在您的情况下，您只需要产品 sku。我建议使用 Magento 集合。

我想，下面的代码片段会为你工作：

```
$productsCollection = Mage::getModel('catalog/product')
                    ->getCollection()
                    ->addAttributeToFilter('entity_id', array('in' => $ids));

foreach($productsCollection as $product) {
    echo $product->getSku();
} 
```

Magento 会自动将 sku 添加到选择中，但请注意，有时您可能想要获取一些自定义产品属性，例如带有代码“颜色”的属性。然后您需要添加`->addAttributeToSelect('color')`，代码将如下所示：

```
$productsCollection = Mage::getModel('catalog/product')
                    ->getCollection()
                    ->addAttributeToFilter('entity_id', array('in' => $ids))
                    ->addAttributeToSelect('color');

foreach($productsCollection as $product) {
    echo $product->getSku();
    echo $product->getColor();
} 
```

如果要获取所有产品属性，可以使用 ->addAttributeToSelect('*')

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-09-19T21:07:38.530

在不加载产品的情况下获取单独的属性

```
$resource = Mage::getResourceSingleton('catalog/product');    
$sku = $resource->getAttributeRawValue($productId, 'sku', $storeId) 
```

# javascript - 从“didReceiveRemoteNotification”函数调用 index.html 中的 javascript 函数

> ID：12910199
> 
> 赞同：1
> 
> 时间：2012-10-16T08:12:18.507
> 
> 标签：javascript, objective-c, ios, cordova

我正在使用 cordova 2.1.0 创建 IOS 应用程序。我如何从设备收到通知时由委托调用的“didReceiveRemoteNotification”函数调用 javascript 函数。

函数定义如下：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo{
 ......
  Call_to_js_function(); // in index .html 
} 
```

我怎么能调用这个js函数。还请提及是否要更改“didReceiveRemoteNotification”函数的任何参数。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:24:26.223

1.  创建插件
2.  从“didReceiveRemoteNotification”调用插件函数
3.  使用基类 CDVPlugin 的“writeJavascript”方法

**检查IOS 的[PushNotification 插件](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/PushNotification)**

[https://github.com/phonegap/phonegap-plugins/tree/master/iOS/PushNotification](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/PushNotification)

# android - Android 日志去混淆/回溯

> ID：12910206
> 
> 赞同：2
> 
> 时间：2012-10-16T08:12:36.717
> 
> 标签：android, obfuscation, proguard, deobfuscation

我需要一些有关 Android 日志文件去混淆的帮助。

问题是，如果我有一个例外，比如：

```
 ...
    10-16 10:03:10.488: E/AndroidRuntime(25723): Caused by: java.lang.NullPointerException
    10-16 10:03:10.488: E/AndroidRuntime(25723):    at proguard.test.a.a(Unknown Source)
    ... 
```

回溯返回原始日志，但如果我粘贴到日志函数名称和行，如：

```
 ...
    10-16 10:03:10.480: I/ghghghg(25723): Crash in function [proguard.test.a.a() Line : -1 ]
    ... 
```

回溯不会取消该日志行。我知道有一个**-regex**参数来回溯命令，但我找不到任何解释或示例。[Proguard 回溯手册在http://proguard.sourceforge.net/manual/retrace/usage.html](http://proguard.sourceforge.net/manual/retrace/usage.html)上不可用。

如何配置回溯以对日志中的自定义行进行去混淆处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:09:58.020

ProGuard 手册（[在线](http://proguard.sourceforge.net/manual/retrace/usage.html)，也包含在 ProGuard 发行版中）包含一个示例。它使用 java.util.regex 语法和一些额外的类名通配符等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-09T19:33:53.677

你可以试试[recat](https://github.com/EverythingMe/recat)。它是一个基于 logcat-color 的 python 脚本，专门为这种场景制作，即时 logcat 去混淆（虽然在 Windows 上不起作用）。

# php - 哪个 TYPO3 版本支持什么 PHP 版本？

> ID：12910209
> 
> 赞同：14
> 
> 时间：2012-10-16T08:12:46.003
> 
> 标签：php, compatibility, typo3

我计划将我的 PHP 升级到 5.3 版。我的大多数网站都在 TYPO3 框架上运行。其中一些在 TYPO3 版本 4.5 之前安装。旧 TYPO3 版本和 PHP 5.3 是否存在任何已知问题？

我找不到有关此旧 TYPO3 版本的系统要求的任何信息。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-16T08:58:49.980

**TYPO3 版本一览** [https://typo3.org/download/](https://typo3.org/download/)

**TYPO3 升级维基** [https://docs.typo3.org/typo3cms/InstallationGuide/Upgrade/](https://docs.typo3.org/typo3cms/InstallationGuide/Upgrade/)

**维基百科上的 TYPO3 版本：** [http ://en.wikipedia.org/wiki/TYPO3](http://en.wikipedia.org/wiki/TYPO3)

下表为您提供有关 TYPO3 版本要求的更多详细信息。

状态 06.02.2015

![在此处输入图像描述](../Images/ee089818305381c7ed24a5b19840a274.png)

状态 07.11.2014

Typo3 现在称为 TYPO3 CMS

![在此处输入图像描述](../Images/d75eb2747dfa72643717f04d2367c677.png)

状态 24.07.2014

![在此处输入图像描述](../Images/2d49f6602655d8b8ddcec3e1e802d746.png)

状态 15.08.2012

![在此处输入图像描述](../Images/0751974f81fa882f663c026ac58eaf41.png)

状态 28.12.2010

![在此处输入图像描述](../Images/111b48977c4fd6c99f56d0e16ce41491.png)

目前我正在使用 PHP 5.4.x 运行 TYPO3 4.6，到目前为止我没有遇到任何问题。

# sql - 验证网站中的发件人身份

> ID：12910211
> 
> 赞同：0
> 
> 时间：2012-10-16T08:12:46.107
> 
> 标签：sql, encryption, validation

几天前，当我设计一个`HTML`将数据提交`php`到`SQL`数据库的表单时，我开始考虑这个问题。我解决了我的问题，但我在这里问的是一个计算机理论问题，这可能会在未来帮助我（或其他人）。

我想保护自己免受[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的影响，我认为`php`与其在服务器端验证数据，不如让 javascript 在客户端验证数据（我在 JS 中比在 PHP 中更流利）然后发送。

但是，老练的用户可能会检查 javascript（或`HTTPrequest`），然后对其进行更改以向服务器发送他自己的恶意请求。

我的问题：

> 理论上是否可以在 clinet 端进行计算，**代码对他可见**，并以某种方式发送它以确保数据是从我的程序发送的，而不是从更改的代码发送的？

这可以通过带有公钥和私钥的 RSA 方案来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:14:14.253

> 我想保护自己免受 SQL 注入，我认为不是验证数据

不要验证数据以保护自己免受 SQL 注入。验证数据以确保它是您想要的格式。

转义数据以保护自己免受 SQL 注入（并[通过准备好的语句和参数化查询](https://stackoverflow.com/a/60496/19068)进行转义）。

> 理论上是否可以在 clinet 端进行计算，代码对他可见，并以某种方式发送它以确保数据是从我的程序发送的，而不是从更改的代码发送的？

不可以。客户端代码可以完全绕过。在这个领域，只有*快速*告诉用户他们的数据如果提交到服务器将被拒绝是有用的。

> 这可以通过带有公钥和私钥的 RSA 方案来完成吗？

不可以。您必须将其中一把钥匙交给客户。然后可以独立于您的代码提取和使用它。

# javascript - 当其他元素消失时动画/缓和一个元素到位置

> ID：12910213
> 
> 赞同：9
> 
> 时间：2012-10-16T08:12:55.550
> 
> 标签：javascript, jquery, jquery-animate, easing

请看看这个小提琴：http: [//jsfiddle.net/dhcyA/](http://jsfiddle.net/dhcyA/)

尝试单击一个块。我想要的是当其他元素消失时，选定的块将动画/缓和到他的给定位置，而不是像现在这样跳跃。然后，当再次单击该框时，相同的动画会自行重复，但随后又回到原位。

也许要记住：
我使用的是响应式设计，这意味着这些块在缩放窗口后可以是垂直和水平的。

对小提琴或建议的任何重新修改都会很棒！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T03:03:55.747

**这是我的解决方案。**

在您现有的标记上，我添加了一个包装器划分来计算包装器内框的位置。像这样

```
<div id="wrapper">
    <div class="block">
        <h2>I'm block 1</h2>
    </div>
    ....
</div> 
```

为了保持块的流动性，我创建了一个函数来将块定位在包装器上。这是块位置的函数：

```
var reposition = function() {
    wrapper = $("#wrapper");
    console.log(wrapper.innerWidth());
    pLeft = 0;
    pTop = 0;
    maxRowHeight = 0;
    $(".block").each(function(){
        if($(this).data('active')) {
            $(this).data('top', pTop);
            $(this).data('left', pLeft);
        } else {
            $(this).stop(0,0).animate({
              'top' : pTop + 'px',
              'left' : pLeft + 'px'
            });
        }
            pLeft += $(this).outerWidth() + parseInt($(this).css('marginLeft'));
            if($(this).height() > maxRowHeight) maxRowHeight = $(this).outerHeight() + parseInt($(this).css('marginTop')); //Find out the longest block on the row

            if(pLeft + $(this).next().outerWidth() + parseInt($(this).next().css('marginLeft')) >= wrapper.innerWidth()) {
               pLeft = 0;
               pTop += maxRowHeight;
               maxRowHeight = 0;
            }

    });    
}; 
```

最后，切换块的脚本

```
$(".block").click(function() {

    $(this).siblings().slideToggle('slow'); //Toggle other blocks

    if(!$(this).data('active')){ //if the block is not active
        $(this).data('left', $(this).position().left); //sets its left
        $(this).data('top', $(this).position().top);   // and top position
        $(this).animate({ //animate at the top and bottom
            top:0,
            left:0
        },'slow');

        $(this).data('active',true);

    }else{

        $(this).animate({ //animate to its last known position
            top:$(this).data('top'),
            left:$(this).data('left')
        },'slow');

        $(this).data('active',false);
    }
}); 
```

### 演示

*   [Demo](http://jsfiddle.net/Starx/GC3FX/14/) [[Full]](http://jsfiddle.net/Starx/GC3FX/14/show)（调整大小以查看保持的流畅度）
*   [演示](http://jsfiddle.net/Starx/wy6mv/3)[[完整]](http://jsfiddle.net/Starx/wy6mv/3/show)（显示可变高度的版本）

以下是此解决方案提供的内容：

> *   记住最后一个位置并逐渐动画到/从这个位置开始
> *   块位置在加载和每次调整大小时计算和动画
> *   尽管使用绝对位置，但仍会发生重新定位，`$(window).resize()`从而**保持块的流动**性
> *   支持**可变**高度
> *   *现有标记和 CSS 的微小变化*
> 
> 还修复了 Gaby 扩展的两个问题
> 
> *   独立核算每个区块保证金
> *   调整大小后重新计算元素的位置

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-28T21:31:59.127

**最终更新**

这是一个完整的工作解决方案（*在我看来非常简单*），用 JS 设置定位（*一个简单的计算*）和其余的 CSS 转换..

**演示在** [http://jsfiddle.net/gaby/pYdKB/3/](http://jsfiddle.net/gaby/pYdKB/3/)

它保持了任意数量元素的流动性`float:left`并适用于任意数量的元素，并且您可以保留`:nth-child`样式，如果您想让多个元素可见，它也可以工作。

**javascript**

```
var wrapper = $('.wrapper'),
    boxes = wrapper.children(),
    boxWidth = boxes.first().outerWidth(true),
    boxHeight = boxes.first().outerHeight(true); 

function rePosition(){
    var w = wrapper.width(),
        breakat = Math.floor( w / boxWidth ); // calculate fluid layout, just like float:left

    boxes
        .filter(':not(.go)')
        .each(function(i){
            var matrixX = ((i)%breakat)+1,
                matrixY = Math.ceil((i+1)/breakat);

            $(this).css({
                left:(matrixX-1) * boxWidth ,
                top: (matrixY-1) * boxHeight
            });
        });
}

$('.box').click(function(){
    $(this)
        .siblings()
        .toggleClass('go');// just add the go class, and let CSS handle the rest

    rePosition(); // recalculate final positions and let CSS animate the boxes
});

$(window).resize(rePosition);
$(window).trigger('resize'); 
```

**CSS**

```
.wrapper{
    position:relative;
}

.box{
    width:200px;
    height:100px;
    position:absolute;
    margin:5px;
    cursor:pointer;
    overflow:hidden;
    text-align: center;
    line-height: 100px;

        -moz-transition-property: top,left,width,height;
     -webkit-transition-property: top,left,width,height;
         -ms-transition-property: top,left,width,height;
          -o-transition-property: top,left,width,height;
             transition-property: top,left,width,height;

        -moz-transition-duration: 1s;
     -webkit-transition-duration: 1s;
         -ms-transition-duration: 1s;
          -o-transition-duration: 1s;
             transition-duration: 1s;
}

.go{
    height:0;
    width:0;
} 
```

***注意**：正如@Athari 在评论中正确提到的那样，您应该包括所有浏览器前缀以获得最广泛的支持。（我最初的回答只包括 moz / webkit 和标准）*

* * *

**原始答案**

您不能直接使用当前的 HTML 结构来执行此操作。浮动概念不支持它。

但如果你能负担得起额外的包装，那没问题。

只需滑动额外包装元素的内容..

将`float`代码放在包装元素上并使用

```
$(document).ready(function() {

    $(".block-wrapper").click(function() {
        $(this).siblings().find('.block').slideToggle("slow");
    });

}); 
```

**演示在** [http://jsfiddle.net/gaby/t8GNP/](http://jsfiddle.net/gaby/t8GNP/)

* * *

**更新#1**

如果您需要将点击的元素移动到左上角和后退，那么您无法使用 CSS 真正做到这一点。

您将需要手动定位它们（*​​通过 JS*），设置 CSS 过渡（*或 jquery*），并在单击后应用新位置。

稍后您可能希望不止一个保持可见并重新定位..

所以你可能想看看伟大的[同位素插件](http://isotope.metafizzy.co/)，它可以处理这个和许多更多的情况/布局

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-03T22:44:04.163

这是我的版本：http: [//jsfiddle.net/selbh/dhcyA/92/](http://jsfiddle.net/selbh/dhcyA/92/) （仅更改了 javascript，并且它是响应式的）

```
$(document).ready(function() {

    $(".block").click(function() {
        var $this = $(this);
        var pos = $this.offset();
        var $siblings = $(this).siblings().add(this);
        var marginTop = $this.css('marginTop').replace(/[^-\d\.]/g, '');
        var marginLeft = $this.css('marginLeft').replace(/[^-\d\.]/g, ''); 

        var $clone = $this.clone();

        $siblings.slideToggle("slow");

        $clone.css({
            position: 'absolute',
            left: pos.left - marginLeft,
            top: pos.top - marginTop,
            'background-color': $this.css('background-color')
        });

        $('body').append($clone);

        $this.css('opacity', 0);

        $clone.animate({
            'left': 0,
            'top': 0
        });

        $clone.click(function() {
            $siblings.slideToggle("slow", function() {
                $clone.remove();
                $this.css('opacity', 1);
            });

            $clone.animate({
                left: pos.left - marginLeft,
                top: pos.top - marginTop
            });
        });

    });

});​ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-28T22:37:16.927

大挑战！

## 新版本：

这是一个更好的版本，因为它使块保持在它们的行中。我添加了一个`css`函数，以便您的`nth-child`样式甚至可以应用于行中。甚至保持相同的 HTML 结构。

**演示：http:** [//jsfiddle.net/MadLittleMods/fDDZB/23/](http://jsfiddle.net/MadLittleMods/fDDZB/23/)

这个新版本的 jQuery 看起来像：

```
$('.block').on('click', function() {
    var block = $(this);

    // Keep the blocks in line
    makeRows($('body'));

    $('.block').not(this).each(function() {

        // If sibling on the same level, horizontal toggle
        // We also want ignore the toggleMethod if it is shown because we might need to reassign
        if (($(this).position().top == block.position().top && (($(this).data('toggle') == -1) || $(this).data('toggle') == null)) || ($(this).data('toggle') != -1 && $(this).data('toggleMethod') == 'side'))
        {
            $(this).data('toggleMethod', 'side');

            // Hide block
            if ($(this).data('toggle') == -1 || $(this).data('toggle') == null)
            {
                // Set properties for later use in show block
                $(this).data('overflowBefore', $(this).css('overflow'));
                $(this).css('overflow', 'hidden');
                $(this).data('marginBefore', $(this).css('margin'));

                var width = $(this).width();
                $(this).animate({
                    width: 0,
                    margin: 0
                }, function() {
                    $(this).data('toggle', width);
                });
            }
            // Show block
            else
            {
                $(this).css('overflow', $(this).data('overflowBefore'));

                $(this).animate({
                    width: $(this).data('toggle'),
                    margin: $(this).data('marginBefore')
                }, function() {
                    $(this).data('toggle', -1);
                });
            }
        }
        // Do a normal vertical toggle
        else 
        {
            $(this).data('toggleMethod', 'top');
            $(this).slideToggle('slow');
        }
    });

});

// Make rows to make the blocks in line
function makeRows(container)
{
    // Make rows so that the elements stay where they should
    var containerWidth = container.width();
    var currentRowWidth = 0;

    // Add styles first so nothing gets messed up
    container.children().each(function() {
        var itemCSS = css($(this));
        $(this).css(itemCSS);
    });

    // Now assemble the rows
    container.children().each(function() {

        var blockWidth = $(this).outerWidth() + parseInt($(this).css('margin-left')) + parseInt($(this).css('margin-right'));

        if((currentRowWidth + blockWidth) < containerWidth)
        {
            currentRowWidth += blockWidth;
        }
        else
        {
            Array.prototype.reverse.call($(this).prevUntil('.row')).wrapAll('<div class="row"></div>');
            $(this).prev().append('<div class="row_clear" style="clear: both;"></div>');

            currentRowWidth = 0;
        } 
    });    
}

// Remove the rows added
function deleteRows()
{
    var content = $('.row').contents()
    $('.row').replaceWith(content);

    $('.row_clear').remove();
}

$(window).resize(function() {
    deleteRows();
});

// Functions courtesy of marknadal
// https://stackoverflow.com/a/5830517/796832
function css(a)
{
    var sheets = document.styleSheets, o = {};
    for(var i in sheets) {
        var rules = sheets[i].rules || sheets[i].cssRules;
        for(var r in rules) {
            if(a.is(rules[r].selectorText)) {
                o = $.extend(o, css2json(rules[r].style), css2json(a.attr('style')));
            }
        }
    }
    return o;
}

function css2json(css)
{
    var s = {};
    if(!css) return s;
    if(css instanceof CSSStyleDeclaration) {
        for(var i in css) {
            if((css[i]).toLowerCase) {
                s[(css[i]).toLowerCase()] = (css[css[i]]);
            }
        }
    } else if(typeof css == "string") {
        css = css.split("; ");          
        for (var i in css) {
            var l = css[i].split(": ");
            s[l[0].toLowerCase()] = (l[1]);
        };
    }
    return s;
} 
```

我添加了一个`makeRows`和`deleteRows`函数，以便块保持在它们的行中，而不是变小并移动到上面的行中。每当窗口调整大小时，我都会调用`deleteRows`它，以便它可以保持响应式布局。然后，如果需要切换块，我会重新创建行。

`css`和`css2json`功能是由[marknadal提供的](https://stackoverflow.com/a/5830517/796832)

* * *

* * *

## 旧版：

我想出了一个解决方案，`.animate`以便它可以水平缓解。

**这是一个演示：http:** [//jsfiddle.net/MadLittleMods/fDDZB/8/](http://jsfiddle.net/MadLittleMods/fDDZB/8/)

jQuery 看起来像：

```
$('.block').on('click', function() {
    var block = $(this);
    $(this).siblings().each(function() {
        // If sibling on the same level, horizontal toggle
        // We also want ignore the toggleMethod if it is shown because we might need to reassign
        if (($(this).position().top == block.position().top && ($(this).data('toggle') == -1) || $(this).data('toggle') == null) || ($(this).data('toggle') != -1 && $(this).data('toggleMethod') == 'side'))
        {
            $(this).data('toggleMethod', 'side');

            // Hide block
            if ($(this).data('toggle') == -1 || $(this).data('toggle') == null)
            {
                // Set properties for later use in show block
                $(this).data('overflowBefore', $(this).css('overflow'));
                $(this).css('overflow', 'hidden');
                $(this).data('marginBefore', $(this).css('margin'));

                var width = $(this).width();
                $(this).animate({
                    width: 0,
                    margin: 0
                }, function() {
                    $(this).data('toggle', width);
                });
            }
            // Show block
            else
            {
                $(this).css('overflow', $(this).data('overflowBefore'));

                $(this).animate({
                    width: $(this).data('toggle'),
                    margin: $(this).data('marginBefore')
                }, function() {
                    $(this).data('toggle', -1);
                });
            }
        }
        // Do a normal vertical toggle
        else 
        {
            $(this).data('toggleMethod', 'top');
            $(this).slideToggle('slow');
        }
    });
});​ 
```

关键是分离被切换的块，`.slideToggle`因为`.animate`你必须在它们显示和隐藏时应用相同的块。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-29T01:33:09.573

我有点困（这里是凌晨 2:30）所以我把一半完成的答案留在这里给你一个想法（我在 30 分钟内完成了，所以我想再多 30 分钟你就能得到一些非常好的东西）

[http://jsfiddle.net/LuL2s/2/](http://jsfiddle.net/LuL2s/2/)

诀窍来自块持有者，它制作缓动动画并在它们出现和消失时产生差异

JS

```
$(document).ready(function() {
    var open = true;
    $(".block").click(function() {
            var $this = $(this);
            var count = 0;
        if (open) {
            $this.parent().siblings().children().slideToggle("slow", function(){
                if (count++ == 2) {                 
                    $this.parent().siblings().animate({width: 'toggle', height:'toggle'});
                }
            });
        } else {
            $this.parent().siblings().animate({width: 'toggle', height:'toggle'}, function(){
                if (count++ == 2) {                 
                    $this.parent().siblings().children().slideToggle("slow");                
                }
            });

        }
        open = !open;                      
    });

}); 
```

HTML

```
<div class="block-holder">
    <div class="block">
        <h2>I'm block 1</h2>
    </div>
</div>

<div class="block-holder">
    <div class="block">
        <h2>I'm block 2</h2>
    </div>
</div>

<div class="block-holder">
    <div class="block">
        <h2>I'm block 3</h2>
    </div>
</div>

<div class="block-holder">
    <div class="block">
        <h2>I'm block 4</h2>
    </div>
</div> 
```

CSS

```
.block {
    width: 100%;
    height: 100%;
    text-align: center;
    line-height: 100px;
    cursor: pointer;
}
.block-holder:nth-child(1) .block {
    background: green;
}
.block-holder:nth-child(2) .block {
    background: red;
}
.block-holder:nth-child(3) .block {
    background: orange;
}
.block-holder:nth-child(4) .block {
    background: pink;
}

.block-holder {
    width: 200px;
    height: 100px;
    float: left;
    margin: 20px;
} 
```

# wcf - WCF - TargetInvocationException 未处理

> ID：12910215
> 
> 赞同：-1
> 
> 时间：2012-10-16T08:13:00.133
> 
> 标签：wcf, synchronization, smartclient

我正在尝试创建 WCF 以将我的移动设备与我的服务器同步。当我尝试单击同步按钮时，它会抛出 TargetInvocationException。下面是 Sync() 方法。

代码

```
 Cursor.Current = Cursors.WaitCursor;
            CustomerProxy.CustomerCacheSyncService svcProxy = new CustomerProxy.CustomerCacheSyncService();
            Microsoft.Synchronization.Data.ServerSyncProviderProxy syncProxy =
                new Microsoft.Synchronization.Data.ServerSyncProviderProxy(svcProxy);

            // Call SyncAgent.Synchronize() to initiate the synchronization process.
            // Synchronization only updates the local database, not your project's data source.
            CustomerCacheSyncAgent syncAgent = new CustomerCacheSyncAgent();
            syncAgent.RemoteProvider = syncProxy;
             /*throws error below code*/
            Microsoft.Synchronization.Data.SyncStatistics syncStats = syncAgent.Synchronize();

            // TODO: Reload your project data source from the local database (for example, call the TableAdapter.Fill method).
            customer_ConfirmationTableAdapter.Fill(testHHDataSet.Customer_Confirmation);

            // Show synchronization statistics
            MessageBox.Show("Changes downloaded: " + syncStats.TotalChangesDownloaded.ToString()
                + "\r\nChanges Uploaded: " + syncStats.TotalChangesUploaded.ToString());

            Cursor.Current = Cursors.Default; 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:30:30.363

我再次重新创建了 Web 服务，它现在可以工作了。问题是移动设备找不到我的本地网络服务。谢谢。

# javascript - jQuery 中的智能切换类

> ID：12910216
> 
> 赞同：7
> 
> 时间：2012-10-16T08:13:01.130
> 
> 标签：javascript, jquery

我正在尝试实现一个脚本来在特定元素上设置不同的类名……</p>

假设 dom 看起来像这样：

```
<body class='pre-existing-class-name'> 
```

如果我做

```
smartToogle('body', 'new-class');
// the dom should look like this
// <body class='pre-existing-class-name new-class'>
smartToogle('body', 'new-class-2');
// the dom should look like this
// <body class='pre-existing-class-name new-class-2'> 
```

我做了以下代码，但它不起作用：

```
var smartToogle = function (element, newClassName) {
    var oldClassName;
    var $element = $(element);

    $element.addClass(newClassName);
    if (oldClassName !== newClassName) {
        $element.removeClass(oldClassName);
    }
    oldClassName = newClassName;
}; 
```

要求：
1）我正在使用查询
2）我只想传递一个类名，即新的类名。

* * *

解决方案：
以下代码有效，但我不喜欢它，因为它使用全局变量。
有什么提示可以解决吗？

```
function myToggle(newClassName) {
    if (window.oldClassName) {
         $('body').toggleClass(window.oldClassName);
    }
    window.oldClassName = newClassName;
    $('body').toggleClass(newClassName);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T10:15:44.410

您可以使用元素的数据属性，可以使用

```
$(element).data(attrib_name) 
```

您的方法只需稍作改动

```
function myToggle(newClassName) {
    if (window.oldClassName) {
         $('body').toggleClass(window.oldClassName);
    }
    window.oldClassName = newClassName;
    $('body').toggleClass(newClassName);
} 
```

可以替换为

```
function myToggle(element, newClassName) {
    if ($(element).data('oldClassName')) {
         $(element).toggleClass($(element).data('oldClassName'));
    }
    $(element).data('oldClassName', newClassName)
    $(element).toggleClass(newClassName);
} 
```

希望这可以为您解决。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T08:15:48.220

**更新：**

您需要了解一件事。如果您想要两种不同的行为**，则不需要 2 个不同的类来改变行为**。一个就足够了，因为您可以根据类是**on**还是**off**来更改行为。

假设我希望我的元素以一种方式具有红色悬停事件。并希望它具有与 CSS 不同的蓝色悬停事件。然后这是要走的路：

```
$('#toggle').click(function(){
    $('.normal').each(function(){
        $(this).toggleClass('active');
    });        
}); 
```

[JSFiddle 演示](http://jsfiddle.net/BPBQN/2/)

在这里，我们使用一个按钮来切换所有 div 并更改它们的 CSS 行为，现在看起来很容易吧？

但是，如果您还需要切换**Javascript/jQuery 事件**，则不会这样做。在这种情况下，您将需要使用其他 3 种方法来管理它；`.on()`, `.off()`, 和`.hasClass()`.

```
$('#toggle').click(function(){
    $('.normal').each(function(){
        if($(this).hasClass('active')){
            $(this).off('click');
        } else {
            $(this).on('click', function(){
                alert('You are clicking on an active div.');
            });
        }
        $(this).toggleClass('active');
    });        
}); 
```

[JSFiddle 演示 2](http://jsfiddle.net/BPBQN/1/)

如您所见，我们添加了一个**if 语句**。如果元素具有`.active`类，我们`.off()`将`.click()`. 如果没有活跃的班级，我们将`.click()` `.on()`. 在 if 语句下，我们**总是**切换`.active`类。所以这不必放在 if 语句中。

我希望这能为你清除一切，祝你好运！

* * *

**老答案：**

最好在`.toggleClass()`这里使用。

将元素上的第一个类用于默认属性，将第二个类`.active`用于交互。

此外，使用`.on('click', function(){})`绑定将使您能够添加交互，一旦元素被切换，该交互将立即绑定。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-19T22:55:04.750

这是一个小提琴：http: [//jsfiddle.net/NCwmF/2/](http://jsfiddle.net/NCwmF/2/)

我为此做了一个小小的 jQuery 插件。删除当前的智能类（如果有）并添加新的智能类。如果在没有参数`className`的情况下调用当前智能类，则只会被删除。

```
$.fn.smartToggle = function (className) {

    var dataId = 'smartToggle';

    return this.each(function () {

        var $el = $(this);

        $el
            .removeClass($el.data(dataId) || '')
            .addClass(className)
            .data(dataId, className);
    });
}; 
```

像所有其他 jQuery 方法一样使用它：

```
$('body').smartToggle('myClass'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-23T21:11:07.530

**新的，更简单的答案** 工作方式与以前类似，但增加了 2 个：1.) 如果最初没有类，则可以工作；2.) 如果其他函数在调用之间更改元素类，则可以工作。我还更改了函数名称，因此它不会干扰 jQuerys 本机 toggleClass。

```
$.fn.fancyToggleClass = function(new_class) {
return this.each(function() {

    // get the last class this function added (if exists) or false (if not)
    var $this = $(this),
        toggled_class = $this.data('toggled-class') || false;       

    // if we dont have an original class, then set it based on current class
    if (toggled_class) {
        $this.removeClass(toggled_class);
    }

    // add new class and store as data, 
    // which we check for next time function is called
    $this.addClass(new_class).data('toggled-class', new_class);

    // alert the class, just as a check to make sure everything worked! 
    // remove this for production, or switch to console.log
    alert('element class: ' + $this.attr('class'));

});
} 
```

更新小提琴：http: [//jsfiddle.net/facultymatt/xSvFC/3/](http://jsfiddle.net/facultymatt/xSvFC/3/)

**旧答案** 我建议将原始类存储在元素数据属性中。然后，您的函数可以检查是否设置了此数据，如果是，则清除元素类，从元素数据中添加原始类以及您在函数中传递的新类。

如果未设置数据，该函数将在第一次运行时将当前类存储为数据。

查看此小提琴以获取带有注释的工作示例：http: [//jsfiddle.net/facultymatt/xSvFC/](http://jsfiddle.net/facultymatt/xSvFC/)

这是代码。这是一个 jquery 函数，因此可以在任何元素上调用它（并且也可以链接！）

```
$.fn.toggleClass = function(new_class) {
    return this.each(function() {

        // cache selector for this
        $this = $(this);

        // get original class (if exists) or false (if not)
        var original_class = $this.data('original-class') || false;       

        // if we dont have an original class, then set it based on current class
        if (!original_class) {

            original_class = $this.attr('class');
            $this.data('original-class', original_class);

        // we do have an original class, so we know user is now trying to add class 
        // here we clear the class, add the original class, and add the new class           
        } else {

            // assign the original class, and new class, 
            // and a space to keep the classes from becoming one 
            $this.attr('class', original_class + ' ' + new_class);

        }

        // alert the class, just as a check to make sure everything worked! 
        // remove this for production, or switch to console.log
        alert('element class: ' + $this.attr('class'));

    });
} 
```

希望这可以帮助！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T21:51:08.977

为避免全局变量，您可以使用@ankur 所写的数据属性。这是您的问题的有效解决方案：

```
function myToggle(element, newClassName) { 
    if (!$(element).data('baseclassname')) { 
        $(element).data('baseclassname', $(element).attr('class')); 
    } 
    $(element)
        .attr('class', $(element).data('baseclassname'))
        .addClass(newClassName); 
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T08:18:07.457

这对你有用吗？

```
var smartToogle = function (element, preExistingClassName, newClassName) {
    $(element)[0].className = preExistingClassName + ' ' + newClassName;
}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-16T08:18:46.643

只需使用`hasClass`. 但是你必须告诉函数这*两个*类是什么：

```
function smartToggle(element, class1, class2) {
    var $element = $(element);

    if ($element.hasClass(class1)) {
        $element.removeClass(class1);
        $element.addClass(class2);
    }
    else {
        $element.removeClass(class2);
        $element.addClass(class1);
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-16T08:31:20.357

```
$(function(){
    var smartToggle = function (element, newClassName) {
        var elementClasses = element.attr('class');

        element.addClass(newClassName);

        // check if there is more than one class on the element
        if(elementClasses .indexOf(' ') >= 0){
            var oldClassNames = elementClasses.split(" ");

            if (oldClassNames[oldClassNames.length - 1] !== newClassName) {
                element.removeClass(oldClassNames[oldClassNames.length - 1]);
            }
        }

    };

    smartToggle($('.test'), 'newclass');
    smartToggle($('.test'), 'newclass2');
}); 
```

**演示 - [http://jsfiddle.net/Q9A8N/](http://jsfiddle.net/Q9A8N/)**（查看控制台以查看每次传递时它在做什么）

那应该可以满足您的要求，但是正如@TJ Crowder 所说，它相当脆弱，并假定您要删除的类是元素上的最后一个。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-23T12:09:49.350

作为对您问题的回答，我会选择[ankur的回答](https://stackoverflow.com/a/12952301/86072)

[作为Sem 的回答](https://stackoverflow.com/a/12910256/86072)的后续，关于 jQuery 事件的处理：

您可以使用该`on`函数根据实时过滤器处理来自父节点的任何 jquery 事件：

```
function myToggle(element, newClassName) {
    if ($(element).data('oldClassName')) {
         $(element).toggleClass($(element).data('oldClassName'));
    }
    $(element).data('oldClassName', newClassName);
    $(element).toggleClass(newClassName);
}

//event delegation : 'on' is called on the $('.divContainer') node, but we handle
//clicks on '.divItm' items, depending on their current class
$('.divContainer')
.on('click', '.divItm.plain', function(){ myToggle( this, 'red' ); })
.on('click', '.divItm.red', function(){ myToggle( this, 'blue' ); })
.on('click', '.divItm.blue', function(){ myToggle( this, 'plain' ); });

//initialize each item with the 'plain' class
myToggle( $('.divItm'), 'plain' ); 
```

这是[jsFiddle](http://jsfiddle.net/czTgd/2/)。

您会注意到，每次单击项目时调用的函数取决于其“活动”类，并且您无需在`click`每次项目更改类时手动启用/禁用处理程序。

您可以从[文档页面](http://api.jquery.com/on/)了解更多详细信息。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-23T18:53:35.047

```
var smartToogle = function (element, newClass) {
  var $element = $(element),
      currentClass = $element.data('toggle-class');

  if (currentClass != newClass) $element.data('toggle-class',newClass).removeClass(currentClass || '');

  $element.toggleClass(newClass);
}; 
```

或其他变体：

```
$.fn.smartToogle = function (newClass) {
      currentClass = this.data('toggle-class');

  if (currentClass != newClass) this.data('toggle-class',newClass).removeClass(currentClass || '');

  this.toggleClass(newClass);
}; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-24T18:35:43.027

在这个实现中，您必须保留对这个 fancytoggle 实例的引用。

```
var fancytoggle = function(el, oldClass){
    // create a function scope so we'll have a reference to oldClass 
    return function(newClass) {
        // toggle the old class and the new class
        $(el).toggleClass(oldClass+ ' ' + newClass);
        // update the new class to be the old class
        oldClass = newClass;
    };
}; 
```

对于您的示例，代码看起来像。

```
var bodytoggle = fancytoggle('body', 'pre-existing-class-name');
bodytoggle('new-class');
// 'new-class' replaces 'pre-existing-class-name'
bodytoggle('new-class-2');
// 'new-class-2' replaces 'new-class' 
```

要查看它的实际效果，请参阅[http://jsfiddle.net/aaf2L/6/](http://jsfiddle.net/aaf2L/6/)

# r - 通过符号在ggplot2中设置特定的填充颜色

> ID：12910218
> 
> 赞同：17
> 
> 时间：2012-10-16T08:13:06.300
> 
> 标签：r, graphics, formatting, ggplot2

您好想调整下面的图表，使零以下的值用红色填充，上面的值用深蓝色填充。我怎么能用ggplot2做到这一点？

```
 mydata = structure(list(Mealtime = "Breakfast", Food = "Rashers", `2002` = 9.12, 
                            `2003` = 9.5, `2004` = 2.04, `2005` = -20.72, `2006` = 18.37, 
                            `2007` = 91.19, `2008` = 94.83, `2009` = 191.96, `2010` = -125.3, 
                            `2011` = -18.56, `2012` = 63.85), .Names = c("Mealtime", "Food", "2002", "2003", "2004", "2005", "2006", "2007", "2008","2009", "2010", "2011", "2012"), row.names = 1L, class = "data.frame")
x=ggplot(mydata) +
  aes(x=colnames(mydata)[3:13],y=as.numeric(mydata[1,3:13]),fill=sign(as.numeric(mydata[1,3:13]))) +
  geom_bar(stat='identity') + guides(fill=F)
print(x) 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-16T08:50:53.033

您构建数据的方式不应该是`ggplot2`：

```
require(reshape)
mydata2 = melt(mydata) 
```

基本条形图：

```
ggplot(mydata2, aes(x = variable, y = value)) + geom_bar() 
```

![在此处输入图像描述](../Images/789744a5aceda23823e5a74080f60f33.png)

现在的诀窍是添加一个额外的变量来指定值是负数还是正数：

```
mydata2[["sign"]] = ifelse(mydata2[["value"]] >= 0, "positive", "negative") 
```

..并在调用中使用它`ggplot2`（结合`scale_fill_*`颜色）：

```
ggplot(mydata2, aes(x = variable, y = value, fill = sign)) + geom_bar() + 
  scale_fill_manual(values = c("positive" = "darkblue", "negative" = "red")) 
```

![在此处输入图像描述](../Images/84c4db6c0889e19ab368db3ee06e899b.png)

# java - 无法在文件中获取特定输出

> ID：12910219
> 
> 赞同：2
> 
> 时间：2012-10-16T08:13:09.213
> 
> 标签：java, file-io

```
File outputFile2 = new File("money2.txt");
    BufferedWriter outData2 = new BufferedWriter(new FileWriter(outputFile2));
    for(int i = 0 ; i < 4 ; i++)
    {
        System.out.println(ts[i].getMoney());
        outData2.write("TESTING");
        outData2.write(ts[i].getMoney());
        outData2.newLine();
    }
    outData2.close(); 
```

这是我的代码。在我的控制台中，我得到

```
20000
10000
10000
4000 
```

这正是我想要的文件。但相反，我得到了这个`money2.txt`：

```
TESTING?
TESTING?
TESTING?
TESTING? 
```

*（测试是为了调试目的）*

我不知道如何调试它。我的文件被正确写入（因为正在打印“TESTING”。我的数组正在被正确读取（因为到控制台的输出是正确的。

出了什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T08:16:32.067

我怀疑`ts[i].getMoney()`是一个`int`，因为 BufferedWriter 是一个低级文本接口，它假设您正在编写一个 codePoint 字符，即对于您正在使用的字符编码`(char) 20000`，`(char) 10000`它看起来是未知的。`?`

使用 PrintWriter 尝试以下操作

```
File outputFile2 = new File("money2.txt");
PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter(outputFile2)));
for (int i = 0; i < 4; i++) {
    System.out.println(ts[i].getMoney());
    out.println("TESTING " + ts[i].getMoney());
}
out.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:18:04.237

`.toString()`之后添加`ts[i].getMoney()` ，如果不行，请使用`Integer.toString(ts[i])`

# android - RelativeLayout 忽略第二个 ImageView？

> ID：12910220
> 
> 赞同：0
> 
> 时间：2012-10-16T08:13:11.180
> 
> 标签：android, android-layout

我有以下 XML 布局

```
<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/mainLayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal|center_vertical">

            <ImageView
                android:id="@+id/IVLEFT"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_alignParentLeft="true"
                android:background="#ff0000"
                android:padding="1dp"
                />

            <ImageView
                android:id="@+id/IVRIGHT"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_toRightOf="@+id/IVLEFT"
                android:layout_alignParentRight="true"
                android:layout_alignBottom="@+id/IVLEFT"
                android:layout_alignTop="@+id/IVLEFT"
                android:src="@drawable/shadow_pages"
                android:background="#00ff00"
                android:padding="1dp" />
    </RelativeLayout> 
```

我希望我的布局有 2 个 ImageViews - 一个在左边，一个在右边。但实际发生的是：

在运行时，我将 IVLEFT 的图像设置为一个大图像（比如 1024X768）——它覆盖了我的所有布局，放弃了 IVRIGHT（我什至看不到它）

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:39:10.083

尝试这个：：

```
<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/mainLayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal|center_vertical">

            <ImageView
                android:id="@+id/IVLEFT"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:background="#ff0000"
                android:padding="1dp"
                android:src="@drawable/ic_launcher"/>

            <ImageView
                android:id="@+id/IVRIGHT"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/IVLEFT"
                android:layout_alignParentRight="true"
                android:layout_alignBottom="@+id/IVLEFT"
                android:layout_alignTop="@+id/IVLEFT"
                android:src="@drawable/ic_launcher"
                android:background="#00ff00"
                android:padding="1dp" />
    </RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:18:06.357

这是因为您已将第一个`ImageView`宽度和高度指定给`fill_parent`. 所以它将获得整个布局。然后，您的布局还取决于您的第一张图片，因为如果您给第一张图片提供大图片`Imageview`，它将占用整个布局。

如果要并排显示 2 张图像，请尝试使用`linearlayout`with `layout_weights`to two `imageViews`。

也给你的`RelativeLayout`宽度和高度 `fill_parent`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:21:42.657

这是因为你`RelativeLayout`的`wrap_content`宽度。即使它在屏幕之外，它也会占用它需要的所有空间。

改为使用`fill_parent`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T08:40:12.543

1.  将 RelativeLayout 宽度更改为`fill_parent`

2.  您的 xml中没有带有 的 ImageView `id = "@+id/magazineImageView"`，如果您的意思是`"@+id/IVLEFT"`，则第一个图像本身占据了整个屏幕宽度，因此您看不到第二个图像。

3.  如果您想查看第二张图像，请将 ImageView 宽度设为`wrap_content`或一些硬编码值

4.  更重要的是，当您使用任何 View id 作为参考时，不要在 id 中使用**+**符号。**+**号用于定义视图的 id，第一次

利用：

```
android:layout_toRightOf="@id/magazineImageView" 
```

# xml - 从 ESRI Shapefile 转换为 OS VectorMap Local GML

> ID：12910224
> 
> 赞同：0
> 
> 时间：2012-10-16T08:13:31.713
> 
> 标签：xml, esri, shapefile, vml, gml

我必须创建一个程序来转换`ESRI Shapefiles`为`OS VectorMap Local GMLs`. 我正在为我的问题寻找一些信息......我尝试使用两个站点的文档：

*   [ESRI Shapefile 文档](http://www.esri.com/library/whitepapers/pdfs/shapefile.pdf)
*   [操作系统 VectorMap 本地文档](http://www.ordnancesurvey.co.uk/oswebsite/docs/user-guides/os-vectormap-local-gml-user-guide.pdf)

我使用`ESRI Shapefile Reader library`它，它工作正常。我可以阅读我的`*.shp`文件。问题是我不知道我应该`featureCode`从哪里...

```
 <osgb:lineMember>
    <osgb:Line fid="ID_864">
      <osgb:featureCode>15600</osgb:featureCode>
      <osgb:featureDescription>Water Feature</osgb:featureDescription>
      <osgb:polyline>
        <gml:LineString srsName="osgb:BNG">
          <gml:coordinates>405513.50,408701.00 405514.01,408707.15 405514.50,408711.50</gml:coordinates>
        </gml:LineString>
      </osgb:polyline>
    </osgb:Line>
  </osgb:lineMember> 
```

`ESRI Shapefiles`只包含坐标，所以我不知道它的特征码是什么......

第二件事是`<osgb:textMember>`标签。WTF是一个`textMember`？哪一种形状类型`ESRI Shapefile`？

提前感谢您的帮助！

**[编辑]**
或者你知道一些像这样进行转换的库/程序？这也是一个很好的解决方案:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:54:27.630

您的转换问题的答案很简单 - GDAL 可以使用[ogr2ogr](http://www.gdal.org/ogr2ogr.html)从 shp -> VML 转换。有关语法，请参阅[对此问题的评论。](https://gis.stackexchange.com/questions/29169/quantim-gis-python-script-to-convert-shapefile-to-gml)

# javascript - 添加删除链接/按钮以删除输入字段内容？

> ID：12910227
> 
> 赞同：0
> 
> 时间：2012-10-16T08:13:40.060
> 
> 标签：javascript, jquery, forms, wordpress

我正在使用具有多个输入字段的输入表单。

这些输入字段可以预先填充，因此我想为用户提供一个简单的删除选项，然后在字段旁边使用“删除”链接或按钮删除该输入字段的全部内容。

按下删除按钮也会给他们一个文本确认它已被删除。

我附上了我正在尝试做的 jpeg

![在此处输入图像描述](../Images/d7a66195d13ae8105bebd681c1de97df.png)

我正在使用 wordpress 和重力表单作为我的表单构建器。我在想也许有一个 jquery 解决方案可以做到这一点，但不知道怎么做？

我的一个输入字段的代码如下，我表单上的 inout 字段都是相同的代码，但当然是不同的 id，所以我不想在这里粘贴所有内容，只是 1 作为示例。

```
<li id="field_15_144" class="gfield">
  <label class="gfield_label" for="input_15_144">List</label>
    <div class="ginput_container">
    <input id="input_15_144" class="medium" type="text" tabindex="40" value="" name="input_144">
    </div>
  // this would be the link to delete the contents of input field "input_15_144
  <a href="" class="deleteURL">Delete</a>
</li> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:40:00.333

在这里，我`ids`为小提琴添加了自定义等。您可以按照自己喜欢的方式使用它：

较旧：[jsFiddle](http://jsfiddle.net/Lewdh/) - [Lewdh](http://jsfiddle.net/Lewdh/)

# 编辑

为了满足新的要求，进行了更多的编辑。

[jsFiddle](http://jsfiddle.net/Lewdh/4/) - [Lewdh/4/](http://jsfiddle.net/Lewdh/4/)

# HTML 代码

```
<li id="field_15_144" class="gfield">
  <label class="gfield_label" for="input_15_144">List</label>
    <div class="ginput_container" id="inpContain">
        <input id="input_15_144" class="medium" type="text" tabindex="40" value="http://jsfiddle.net/" name="input_144" />
        <button value="delete">Delete</button><br />
    </div>
</li>
<li id="field_15_145" class="gfield">
  <label class="gfield_label" for="input_15_145">List</label>
    <div class="ginput_container" id="inpContain">
        <input id="input_15_145" class="medium" type="text" tabindex="40" value="http://jsfiddle.net/" name="input_145" />
        <button value="delete">Delete</button><br />
    </div>
</li> 
```

# jQuery 代码

```
$(document).ready(function() {
    $("li div button").on('click', function() {
        $(this).prev("input").val('');
        $(this).parent().append('<span style="color: green;">Success! Your link has been deleted.</span>');
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:31:49.887

jQuery 的 val() 可以满足您的需求。在上面的示例中，您可以使用这样的函数。

```
$('#input_15_144').val(''); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T08:38:42.843

HTML

```
<div class="ginput_container">
    <input id="input_15_144" class="medium" type="text" tabindex="40" value="www.google.com" name="input_144">
    <a href="#" id="delete">delete</a>  <br/>      
        <span id="msg" style="color:green;"><span>
</div> 
```

jQuery

```
$('a#delete').click(function(){
 $('input#input_15_144').val(''); 
 $('span#msg').html('deleted successfully');                            
});​ 
```

[***检查演示***](http://jsfiddle.net/RNYWt/)

您可以根据需要进行样式设置。我创建了简单的 eg，其中包含您想要的功能。如果您有任何问题，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T08:33:26.330

试试这个

```
$(function(){
 $(".ginput_container").append('<a href="#" onclick="return false;" id="delete_link">delete</a>'); // append a delete link

  $('#delete_link').click(function(){
      $('#input_15_144').val(''); // set the textfield empty
      $(".ginput_container").append('<br><span>Success - Your link has been deleted</span'); // put a success message
 });
}); 
```

您可以应用 css 进行格式化

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T08:34:01.040

抱歉，如果我误解了您的问题，但要重置输入类型文本字段，您只需将其值设置为空字符串：

```
$('#id').val(''); 
```

# c# - 使用 NUnit 对 Controller Action 方法进行单元测试时遇到困难

> ID：12910232
> 
> 赞同：2
> 
> 时间：2012-10-16T08:13:58.160
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010, unit-testing, nunit

我想使用 NUnit 测试框架对方法 ExecLogin() 进行单元测试。但是我在编写测试代码时遇到问题，因为 GenerateInput() 方法被声明为内部虚拟。因此，我无法将我认为需要的 SessionUserId 参数传递给它。请指导我如何为 ExecLogin() 编写单元测试代码。我是测试新手。

这与 ASP.NET MVC3 测试控制器操作有关。

```
 public class BaseController : Controller
    {
        public string SessionUserId
        {
            get { return Session["UserId"] as string; }
            set { Session["UserId"] = value; }
        }

        internal virtual SomeType GenerateInput(SomeType inputData)
        {
             var finalInput = new StringBuilder(600);

             finalInput.Append("<Root>")
             .Append("<UserId>")
             .Append(SessionUserId)
             .Append("</UserId>")
             .Append("<IPAddress>")
             .Append(this.GetClientIpAddress())
             .Append("</IPAddress>")
             .Append(inputData.InputValue)
             .Append("</Root>");

             inputData.InputValue = finalInput.ToString();
             return inputData;
        }
    }

    public class LoginController : BaseController
    {
        [HttpPost]
        public JsonResult ExecLogin(JsonRequest<LoginModel> request)
        {
            var loginObj = request.InputObject;

            var login = new StringBuilder(300);
            login.Append("<UserName>").Append(loginObj.UserName).Append("</UserName>")
                .Append("<Password>").Append(EncodingHelper.GetHashedPassword(loginObj.Password)).Append("</Password>")
                .Append("<RememberMe>").Append(loginObj.RememberMe).Append("</RememberMe>")
                ;
        var input = new SomeType { Operation = request.Operation, PageName = ActionName, InputValue = login.ToString() };

        var returnValue = SomeDelegate.Instance.ExecuteOperation(GenerateInput(input));
        return Json(new JsonResponse<string> { Status = returnValue.Status, Result = this.PopulateSession(returnValue) });
        }
    } 
```

这是我们的模型类：

```
 public class LoginModel
   {
       public string UserId { get; set; }
       public string UserName { get; set; }
       public string Password { get; set; }
       public bool RememberMe { get; set; }
       public bool IsValidUser { get; set; }
   }

   public class JsonRequest<T>
   where T : class
   {
       public string Operation { get; set; }
       public T InputObject { get; set; }
   } 
```

在学习依赖注入模式时，我开始知道使用具体类可以使代码更紧密地耦合。代码耦合得越紧密，测试就越困难。这就是为什么我无法正确测试它的原因吗？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:55:35.680

这实际上是一个常见模式的一部分，如何在不干扰公开可用的接口的情况下提供额外的测试挂钩点，幸运的是，内部是你的朋友。

我假设问题是您有 2 个程序集，为简单起见，我们称它们为 MyCode.dll 和 MyCode.Tests.dll。这意味着 MyCode.Tests 无法访问 MyCode 的内部方法，因为基本上它不是内部的:-)

如果您转到 MyCode 项目的 AssemblyInfo.cs 文件，则可以添加以下内容

```
[assembly:InternalsVisibleTo("MyCode.Tests") 
```

这正是它所说的，它使您的内部结构在 MyCode.Tests 代码库中可见。有关详细信息，请参阅[InternalsVisibleTo](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)和[Friend 程序集](http://msdn.microsoft.com/en-us/library/0tke9fxk.aspx)

# javascript - 在日期选择器中隐藏日期

> ID：12910237
> 
> 赞同：1
> 
> 时间：2012-10-16T08:14:16.397
> 
> 标签：javascript, jquery, datepicker

我在日期选择器中隐藏日期取决于星期几有一些问题，例如如果今天是星期五隐藏星期六，如果今天是星期六 - 隐藏星期天。

我有这个代码可以检查今天是什么日子：

```
$(function () {
var day_date = new Date();
    var weekday = new Array(7);
      weekday[0]="Sunday";
      weekday[1]="Monday";
      weekday[2]="Tuesday";
      weekday[3]="Wednesday";
      weekday[4]="Thursday";
      weekday[5]="Friday";
      weekday[6]="Saturday";
    var n = weekday[day_date.getDay()];
    $('#day_of_week').val(n);
}); 
```

我也有这段代码来隐藏（但整个）周末和那些总是被隐藏的日子：

```
var disabledDays = ['15/8/2012', '1/11/2012', '11/11/2012', '25/12/2012', '26/12/2012'];

function nationalDays(date) {
    var m = date.getMonth(),
        d = date.getDate(),
        y = date.getFullYear();
    for (i = 0; i < disabledDays.length; i++) {
        if ($.inArray(d + '/' + (m + 1) + '/' + y, disabledDays) != -1 || new Date() > date) {
            return [false];
        }
    }
    return [true];
}

function noWeekendsOrHolidays(date) {
  var noWeekend = jQuery.datepicker.noWeekends(date);
  return noWeekend[0] ? nationalDays(date) : noWeekend;
} 
```

在 datepicker 上“执行”上述代码的行如下所示：

```
beforeShowDay: noWeekendsOrHolidays, 
```

我尝试使用此代码执行此操作，但它不起作用：

```
$('#day_of_week').change(function()
     if( $("#day_of_week").val() == Friday ) {
          $("#date_from, #date_to").datepicker({
          beforeShowDay: noWeekendsOrHolidays
      });
      }
     else {
      }
}); 
```

我将非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T09:03:49.330

我正在使用一个日期选择器，它会自动在隐藏日期上工作。我希望它对你有帮助。 [http://multidatespickr.sourceforge.net/#maxPicks-demo](http://multidatespickr.sourceforge.net/#maxPicks-demo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:47:33.763

我得到了一个关于这个的链接，希望它会起作用。 [http://multidatespickr.sourceforge.net](http://multidatespickr.sourceforge.net/)

# ruby-on-rails - 使用 ruby gem guard-shopify 的步骤是什么

> ID：12910245
> 
> 赞同：2
> 
> 时间：2012-10-16T08:14:51.643
> 
> 标签：ruby-on-rails, ruby, gem, shopify, guard

我目前正在 Shopify 上创建一个主题，并找到了一个名为 guard-shopify 的红宝石。我正在努力使用宝石。它已安装，我开始添加 api 密钥和秘密密码，但现在我正在努力找出如何在本地编辑主题文件并让它与 guard shopify 一起工作，以便它将最新的更改推送到通过守卫shopify帐户。

有没有人有使用这种红宝石的好经验？

谢谢，马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:49:36.660

试试 shopify_theme gem - 它有一个手表选项 - [https://rubygems.org/gems/shopify_theme](https://rubygems.org/gems/shopify_theme)

# ios - NSDateFormatter & NSDate dateFromString 输出 null

> ID：12910246
> 
> 赞同：1
> 
> 时间：2012-10-16T08:15:04.570
> 
> 标签：ios, iphone, xcode

```
NSString *dateString = [[items objectAtIndex:indexPath.row] objectForKey:@"date"];
NSLog(@"DATE: %@",dateString);
// outputs 16/10 23:59:49

NSDateFormatter *dateFormat;
[dateFormat setDateFormat:@"dd/MM HH:mm:ss"];
NSDate *date = [dateFormat dateFromString:dateString];

NSLog(@"DATE: %@", date);
// outputs null 
```

但它每次都输出null。请你能帮我做错什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:26:20.443

您忘记创建`NSDateFormatter`：

您应该替换行：

```
NSDateFormatter *dateFormat; 
```

和：

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:10:04.977

您必须设置年份，否则日期将显示为空。您可以使用当前年份并将您的字符串分成月份和日期，然后像这样`"dd-MM-yyyy"`或您想要的任何其他方式进行设置。

```
 NSString *string = @"16/10 23:59:49";
    NSDateFormatter *df = [[NSDateFormatter alloc] init];
    [df setDateFormat:@"yyyy-MM-dd"];

    NSArray *arrayDateData = [string componentsSeparatedByString:@"/"];
     NSString *dayStr =[arrayDateData objectAtIndex:0];
    NSString *string1 =[arrayDateData objectAtIndex:1];
    NSString *monStr = [[string1 componentsSeparatedByString:@" "] objectAtIndex:0];

    NSString *timeString;
    timeString=[NSString stringWithFormat:@"%d-%@-%@",2012,monStr,dayStr];
    NSDate *dateFromString = [[NSDate alloc] init];
    dateFromString=[df dateFromString:timeString];
    NSLog(@"date from string: %@",dateFromString); 
```

我想这会对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:37:16.247

你需要创建

> NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];

# android - 如何解决“设备上未知的 Android 版本”。

> ID：12910250
> 
> 赞同：5
> 
> 时间：2012-10-16T08:15:22.610
> 
> 标签：android, eclipse, android-ndk, samsung-mobile

==开发环境==

*   Eclipse 版本：3.7.2
*   Ntt Docomo 的三星 Galaxy S with Android (unrooted) 2.3.3
*   ndk 版本：r8
*   电脑：Windows 7

==问题== 我有一个针对 android API 级别 9 (2.3.1) 构建的 ndk 项目。当尝试作为“Android Native Application”进行调试时，Eclipse 经常显示“Unknown Android version on device”。在控制台中并拒绝启动应用程序。

1.  Eclipse 使用什么逻辑来生成该消息？
2.  必须采取哪些步骤来解决它？

我使用的其他安卓手机没有这个问题。

# objective-c - 目标c和可可将十进制英尺转换为英尺和英寸？

> ID：12910252
> 
> 赞同：0
> 
> 时间：2012-10-16T08:15:29.520
> 
> 标签：objective-c, cocoa, decimal

我如何将 5.5 转换为 5 英尺 6 英寸。我正在使用目标 c 和 xcode 在 xcode 中执行此操作。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T08:20:03.283

我认为没有任何本机功能可以做到这一点。无论如何，这将起作用

```
CGFloat decimal = 12.5;
NSInteger feet = (NSInteger)decimal;
CGFloat fraction = decimal - feet;
NSInteger inches = (NSInteger)(12.0 * fraction);
NSLog(@"%f feet %f inches", feet,inches); 
```

# python - 在 Python 中继承文档字符串 + 在 IDE 中预览

> ID：12910253
> 
> 赞同：0
> 
> 时间：2012-10-16T08:15:35.063
> 
> 标签：python, spyder

我目前正在花一些时间为 matplotlib 编写一个包装器，以便更轻松地为出版物等创建图。

目前我使用 Spyder 作为 IDE，我真的很喜欢 Object Inspector 功能，它为您正在使用的对象提供实时文档。

无论如何，我的部分 API 只转发对 matplotlib 函数的调用，因此从这些函数继承文档会非常方便。

如果我打印到控制台，写作`myfunction.__doc__ = matplotlibfunction.__doc__`似乎可以工作`__doc__`，但是 Spyder 中的对象检查器没有显示文档，有没有人对为什么有好的建议，以及我可以做些什么来获得预期的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T04:19:22.283

格雷格，你想`myfuncion`从编辑器中查看文档字符串吗？问题是 Spyder 依赖于[rope](http://rope.sourceforge.net/)库对编辑器进行文档字符串检查，不幸的是，它有几个缺点，我们将尝试在 2.2 版本上修复。

# url - 动态创建网页（使用部分 URL 作为变量）

> ID：12910255
> 
> 赞同：0
> 
> 时间：2012-10-16T08:15:39.307
> 
> 标签：url, dynamic

在我正在开发的站点中，我有一个页面，该页面基于 url 中的变量显示帖子： `http://www.mywebsite.com?id=18` 因此这将加载 mySQL 数据库中 ID 为 18 的帖子。

我希望创建相同的效果，但网址类似于： `http://www.mywebsite.com/articles/title-of-article-18/`

是否有一种方法可以使用动态帖子内容动态创建这些页面，其中 url 最初由以下人员创建： `"http://www.mywebsite.com/articles/" + postTitle`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:19:16.020

您正在寻找 mod_rewrite 并通过 htaccess 重写 url。

它的作用是从您的 url 中获取模式，并且 htaccess 文件检测到模式将其重定向到[http://www.mywebsite.com?id=18](http://www.mywebsite.com?id=18)。用户仍然可以看到漂亮的网址。

/articles/title-of-article-18/ 目录实际上并不存在，并且用户永远不会真正到达该位置，因为 htaccess 会秘密更改服务器处理的 url。

见 [http://en.wikipedia.org/wiki/Rewrite_engine](http://en.wikipedia.org/wiki/Rewrite_engine)

或我发现的随机教程：http: [//www.blogstorm.co.uk/htaccess-mod_rewrite-ultimate-guide/](http://www.blogstorm.co.uk/htaccess-mod_rewrite-ultimate-guide/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:19:31.620

尝试 url 重写

[http://www.simple-talk.com/dotnet/asp.net/a-complete-url-rewriting-solution-for-asp.net-2.0/](http://www.simple-talk.com/dotnet/asp.net/a-complete-url-rewriting-solution-for-asp.net-2.0/)

# javascript - 我如何调试 jquery 对象

> ID：12910258
> 
> 赞同：0
> 
> 时间：2012-10-16T08:15:51.143
> 
> 标签：javascript, jquery

> **可能重复：**
> [调试 Javascript](https://stackoverflow.com/questions/2948262/debug-javascript)

时不时地我有一个 jquery 对象，但我无法找到其中的内容。我不得不尝试许多组合，例如查看类名、id 和其他属性，以查看该变量是什么，有时还可以隐藏它。

是否有任何适当的方法来调试 jquery 对象以查看其中的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:19:25.043

[Firebug](http://getfirebug.com/)、[Internet Explorer 开发者工具栏](http://www.microsoft.com/downloads/details.aspx?familyid=e59c3964-672d-4511-bb3e-2d5e1db91038&displaylang=en)、[Chrome 开发者工具](http://blog.chromium.org/2009/06/developer-tools-for-google-chrome.html)。这些是某些浏览器的一些工具。

像 eclipse 这样的一些 IDES 可以让你内联调试。

还有一个 javascript 语句：`debugger;`，您可以将其用于此目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:20:42.197

使用 firebug 或 chrome 开发者工具，您可以调试任何 javascript 对象。您需要在对象初始化之后添加断点，然后将对象添加到监视面板。

对象成员显示在树视图中。

# excel - 按单元格值保存 Excel 文件并保存在打开文件的当前目录中

> ID：12910260
> 
> 赞同：3
> 
> 时间：2012-10-16T08:15:58.163
> 
> 标签：excel, vba

我正在尝试将此代码保存到打开文件的目录中。目前它设法通过 cel 文本保存文件，但默认情况下希望保存在 c:/my 文档中。

这是我到目前为止所拥有的，不知道在哪里添加 ThisWorkbook.Path

```
Sub Save()

 Dim flToSave As Variant
 Dim flName As String
 Dim flFormat As Long

 flFormat = ActiveWorkbook.FileFormat

 flName = Range("A1") & Range("A2").Text
 flToSave = Application.GetSaveAsFilename _
 (flName, filefilter:="Excel Files (*.xlsm), *.xlsm", _
 Title:="Save FileAs...")

 If flToSave = False Then
 Exit Sub
 Else

 Thisworkbook.SaveAs Filename:=flToSave, FileFormat:=flFormat
 End If

 End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:23:54.083

改变你`GetSaveAsFilename`的

```
flToSave = Application.GetSaveAsFilename _
(ThisWorkbook.Path & "\" & flName, filefilter:="Excel Files (*.xlsm), *.xlsm", _
Title:="Save FileAs...") 
```

这将`SaveAs`在指定目录中启动

# java - 使用 jpcap 减少数据包长度

> ID：12910261
> 
> 赞同：1
> 
> 时间：2012-10-16T08:16:00.097
> 
> 标签：java, mysql, network-programming, jpcap

我用java写了一个服务器，端口是4444。然后我用终端连接到端口4444（我的mysql真实端口是3306）然后用jpcap捕获数据包并将src端口和ip更改为我的服务器端口和ip 并且我将目标端口和 id 更改为 mysql 端口和 ip。我用 jpcapSender 发送新数据包。问题是，当我发送数据包时，它的长度是 74。但是当我捕获该数据包时，它是 60 字节。我猜这是因为 dont_frag 是假的。但改变它并没有帮助。封装连接；

```
 public class Bridge implements PacketReceiver {
NetworkInterface device;
static int DeviceName;
public Bridge(NetworkInterface device,int deviceName) throws IOException {
ServerSocket ss = new ServerSocket(4444);
    this.device = device;
    this.DeviceName=deviceName;
    System.err.println(DeviceName);
    JpcapCaptor jpcap;
    jpcap = JpcapCaptor.openDevice(device, 2000, false, 20);
      //        System.err.println(jpcap.isNonBlockinMode());
    jpcap.loopPacket(-1, new Bridge());
}

public Bridge() {

}

@Override
public void receivePacket(Packet p) {

    if (p instanceof TCPPacket) {

        TCPPacket myPacket = (TCPPacket) p;

        if(myPacket.dst_port==3306 && myPacket.src_port==4444){

            System.err.println("don't frag"+myPacket.len);

        }
        if (myPacket.dst_port == 4444) {
            if(myPacket.syn==true){
                System.err.println("connecting"+myPacket.len);
                DatalinkPacket dlp=myPacket.datalink;
                System.err.println(dlp.toString());
                try {
                    Server.src_ip = myPacket.src_ip;
                    Server.src_port = myPacket.src_port;
        myPacket.src_ip = InetAddress.getByName("127.0.0.1");// TODO
                                                                            // variable
                    myPacket.src_port = 4444;
                    myPacket.dst_ip = InetAddress.getByName("127.0.0.1");//                         System.err.println("device"+this.DeviceName);
                    myPacket.dst_port = 3306;
                    sendPacket(myPacket);
                } catch (UnknownHostException e) {
                    // Auto-generated catch block
                    e.printStackTrace();
                }//
                catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            if (myPacket.syn = false ) {//
                System.err.println("query request");
                MySqlRequestParser parser = new MySqlRequestParser(
                        myPacket.data);
                String query = parser.getQuery();
                System.err.println(query);
                // TODO get rules from db
                // TODO check for rules
                try {
                    Server.src_ip = myPacket.src_ip;
                    Server.src_port = myPacket.src_port;
                //  myPacket.src_ip = InetAddress.getByName("127.0.0.1");// TODO
                                                                            // variable
                    //myPacket.src_port = 4444;
                    myPacket.dst_ip = InetAddress.getByName("127.0.0.1");// TODO
                    myPacket.dst_port = 3306;
                    sendPacket(myPacket);
                } catch (UnknownHostException e) {
                    // Auto-generated catch block
                    e.printStackTrace();
                }//
                catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
        if (myPacket.src_port == 3306) {
            System.err.println("response"+myPacket.sequence);
            if (myPacket.syn == false || myPacket.syn == true) {
                System.err.println("response to query");
                myPacket.dst_ip = Server.src_ip;
                myPacket.dst_port = Server.src_port;
                myPacket.src_port = 4444;// TODO about ip it's kinda
                                            // fishiiii
                try {
                    sendPacket(myPacket);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
    }

}

public void sendPacket(TCPPacket packet) throws IOException {
    NetworkInterface[] devices = JpcapCaptor.getDeviceList();
    System.err.println("dev number"+DeviceName);
    NetworkInterface dev=devices[DeviceName];
    System.err.println("in sender packet src ip"
            + packet.src_ip.getHostAddress() + " dst ip "
            + packet.dst_ip.getHostAddress() + " src port "
            + packet.src_port + " dst port " + packet.dst_port+" len"+packet.len+" datalink:"+packet.datalink.toString());
    JpcapSender sender = JpcapSender.openDevice(dev);
    //TCPPacket tp=new TCPPacket(packet.src_port,packet.dst_port, packet.sequence, packet.ack_num, packet.urg, packet.ack, packet.psh, packet.rst, packet.syn, packet.fin, packet.rsv1, packet.rsv2, packet.window, packet.urgent_pointer);
    System.err.println("open device"+packet.len);

    boolean df=packet.dont_frag;
    boolean mf=packet.more_frag;
    boolean rf=packet.rsv_frag;
    packet.dont_frag=true;
    packet.offset=(short)(((packet.offset&0xFF)<<8)|((packet.offset&0xF00)>>8));
    packet.offset=(short)((packet.offset|((mf?0x0020:0)|(df?0x0040:0)|(rf?0x0080:0))));
    System.err.println("don't frag"+packet.dont_frag);
    sender.sendPacket(packet);
    System.err.println("packet sent");
    sender.close();
}

public static void main(String[] arg) throws IOException {
    NetworkInterface[] devices = JpcapCaptor.getDeviceList();
    int localIndex = 0;
    for (int i = 0; i < devices.length; i++) {
        if (devices[i].name.equals("lo")) {
            localIndex = i;
        }
    }
    System.err.println("lo:" + localIndex);
    Bridge br = new Bridge(devices[localIndex],localIndex);

} 
```

}

# javascript - 客户端 url 映射

> ID：12910269
> 
> 赞同：1
> 
> 时间：2012-10-16T08:16:14.113
> 
> 标签：javascript, express

我正在使用 express，我想清理我的硬编码 URL。似乎有许多项目在服务器端产生 urlFor 功能。是否有在客户端执行此操作的最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T01:16:59.773

像这样的东西对你有用吗？

[https://gist.github.com/4108452](https://gist.github.com/4108452)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T21:38:00.117

我最终构建了一个共享模块，它导出两个函数：`pathRaw`和`pathFor`.

`pathRaw`输出可以被快速路由机制使用的路径。例如：

```
pathRaw('user.video.new'); 
```

返回`'/users/:userid/videos/new'`。请注意，我使用的是 mongoose 的复数功能。

`pathFor`获取输出`pathRaw`并替换 ids。例如：

```
pathFor('user.message.index', {userid: 'u1'}); 
```

返回`'/users/u1/messages'`。请注意，附加值将转换为查询参数。

我添加了一些其他功能，例如路径覆盖。一旦代码经过更多的实战测试，我可能会将其放在 github 上。

# python - 连接 netconf 时抛出意外的会话关闭错误

> ID：12910270
> 
> 赞同：1
> 
> 时间：2012-10-16T08:16:19.690
> 
> 标签：python, ssh, openssh, ietf-netconf

我正在使用 ncclient 连接到 netconf。但是，当我尝试通过 python 连接时

**抛出“ncclient.transport.errors.SessionCloseError：意外**的会话关闭”错误。我正在使用的代码片段如下

```
manager.connect('<servername>',22,username='<username>') 
```

对此的任何帮助都非常受欢迎。我可以使用公钥连接到远程服务器，因此我没有在连接中提供密码

在 netconf 服务器日志中，我可以看到拒绝访问错误。（即使我尝试使用用户名和密码，我也遇到了同样的问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T05:21:44.317

你没有提供很多信息。

1.  你用的是哪个版本的`ncclient`？
2.  您使用的是哪个版本的 Python？
3.  您要连接到哪个 NETCONF 实现？这是一个实际的交换机或路由器，还是运行 Linux 服务器之类的`libnetconf`东西`yuma`？

根据这里的信息，我可以想象有几件事是错误的：

*   `paramiko`没有使用正确的密钥来建立 SSH 传输。
*   您正在尝试与 SSH 服务器而不是 NETCONF 服务器建立 NETCONF 会话。

在您的脚本中，使用类似的内容创建一些日志，`manager.logging.basicConfig(filename='ncclient.log', level=manager.logging.DEBUG)`然后重新运行您的脚本 - 您是否获得了更多信息？

这是一个老问题，但我希望我至少可以为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:32:09.277

您的机器可能彼此不认识（例如当您通过普通 ssh 连接并获得“未知密钥，真的连接（y/n）？”错误。在这种情况下，默认情况下会话不会连接。到使用“unknown_host_cb”参数更改此行为：

```
def allowUnknownHosts(host,fingerprint):
  return True

self.manager = manager.connect(host=host, port=port, username=user,password=password, unknown_host_cb=allowUnknownHosts) 
```

# mysql - 数据库设计：多个连接表或一个带有标识“表”列的表

> ID：12910275
> 
> 赞同：0
> 
> 时间：2012-10-16T08:16:33.643
> 
> 标签：mysql, database, database-design

我正在设计一个可以标记任何内容的数据库，并且我可能希望能够选择具有特定标记的所有内容。

我正在为以下两个选项而苦苦挣扎，希望得到一些建议。如果有更好的方法请告诉我。

**选项 A**
多个“多对多”连接表。

```
标签：
  ID
  标签

媒体：
  ID
  标题
  源代码
  创建

媒体标签：
  ID
  media_id
  tag_id

文章：
  ID
  标题
  内容
  创建

文章标签：
  ID
  article_id
  tag_id

```

**选项 B**
单个“标记引用”表，它使用“表”列来标识要连接到哪个表。

```
标签：
  ID
  标签

标签参考：
  ID
  row_id
  tag_id
  桌子

媒体：
  ID
  标题
  源代码
  创建

文章：
  ID
  标题
  内容
  创建

```

从维护的角度来看，选项 B 似乎是有利的，但考虑到 SQL 查询来选择所有内容，并且认为没有多个查询是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:22:27.430

使用**Option B**时，您不能为其他表设置外键。因此，我会选择**选项 A**和每个 m:n 关系的一个表。

“从维护的角度来看选项 B” – 是一场噩梦。如果你删除一篇文章会发生什么？所有带有它的行都`row_id`将保留在`tag_reference`表中。您始终需要手动更新这些条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:27:59.473

选项 B 包含一个多值依赖，因此违反了[第四范式](http://en.wikipedia.org/wiki/Fourth_normal_form)。我更喜欢选项A

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:18:48.313

实际上，这取决于每个 sql 开发人员。但我更喜欢`Option A`，因为您可以很容易地知道表中的某个列是另一个表的`foreign key`（*假设它是真的*）。

`Option B`有点糟糕的设计，因为在列中存储表名是个坏主意。你可以花更多的钱`IF`或`CASE`在这里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T08:26:23.263

第二个选项几乎可以防止您使用任何 JOIN 来获得高效的 SQL，从而迫使您使用慢速多选。

所以我想说第一种选择要好得多。

# python - Python 看门狗问题 - 缺少事件

> ID：12910276
> 
> 赞同：5
> 
> 时间：2012-10-16T08:16:40.003
> 
> 标签：python, watchdog

我正在使用 Python Watchdog 来监视 Ubuntu 上的文件夹。它适用于 1 或 2 个文件，但是当我通过命令移动 50 个文件时，`mv *.xml dest_folder`它只收到 2 个事件并且只处理 2 个文件。下面是代码。

```
def on_moved(self, event):
    try:
        logger.debug("on_moved event :" + str(event) )
        self._validate_xml(event.dest_path)
    except Exception as ex:
        logger.exception(ex) 
```

如果我注释掉`_validate_xml`函数，那么我会收到所有 45 个事件。

谁能告诉我看门狗到底发生了什么，最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T08:55:45.563

我没有使用 Python Watchdog，但从通用实时系统的角度来看，

*   处理 xml`_validate_xml`可能会很慢，并且会让您错过事件。
*   event = 类似于中断，处理应该尽可能快。

如果您在处理事件时做的越多，您的系统就会变得越不“实时”。您可以做的是将 xml 有效性检查卸载到另一个进程并与`Queue`（消息将是`event.dest_path`）您看到移动的路径交换消息。您的事件处理将像将消息放入队列一样简单，并且队列的使用者可以批量处理文件。

简而言之：

*   实例化一个`Queue`
*   `fork()`过程
*   在`on_moved`处理程序中，将消息放入队列中，
*   在分叉的进程中，从队列中弹出消息并调用`_validate_xml`.
*   您可以选择[`multiprocessing.Pool`](http://docs.python.org/library/multiprocessing.html)并行利用 do validate xml 文件。

祝你好运。

**编辑：**在我的系统上测试；上面的大多数评论似乎都不适用，因为看门狗的代码似乎处理`threading`得很好。

```
#!/usr/bin/env python

import time
from watchdog.observers import Observer, api
from watchdog.events import LoggingEventHandler, FileSystemEventHandler, FileMovedEvent
import logging

def counter_gen():
    count = 0
    while True:
        count += 1
        yield count

class XmlValidatorHandler(FileSystemEventHandler):
    sleep_time = 0.1
    COUNTER = counter_gen()
    def on_moved(self, event):
        if isinstance(event, FileMovedEvent):
            print '%s - event %d; validate: %s' % (
            type(self).__name__, self.COUNTER.next(), event.dest_path)
            time.sleep(self.sleep_time)

class SlowXmlValidatorHandler(XmlValidatorHandler):
    sleep_time = 2
    COUNTER = counter_gen()

def get_observer(handler):
    observer = Observer(timeout=0.5)
    observer.event_queue.maxsize=10
    observer.schedule(handler, path='.', recursive=True)
    return observer

if __name__ == "__main__":
    logging.basicConfig(level=logging.INFO)
    event_handler = LoggingEventHandler()
    observer1 = get_observer(XmlValidatorHandler())
    observer2 = get_observer(SlowXmlValidatorHandler())
    observer1.start()
    observer2.start()
    try:
        while True:
            time.sleep(1)
    except KeyboardInterrupt:
        observer1.stop()
        observer2.stop()
    observer1.join()
    observer2.join() 
```

无法重现您的问题。一些指示：

*   检查队列`maxsize`，如果您那里已经有物品并且没有及时处理，那么我的猜测是`timeout`踢进去并且`event`丢失了。在这种情况下，您可能需要调整大小。
*   检查`timeout`，如果已配置，您可能需要调整该参数。

也许更完整的片段会帮助我们帮助您。

# iphone - 用于动态 xib 加载的 iPhone 5 设备修饰符

> ID：12910279
> 
> 赞同：2
> 
> 时间：2012-10-16T08:16:52.343
> 
> 标签：iphone, ios, ipad, iphone-5, universal

我正在开发一个通用的 iOS 应用程序，并希望为 iPhone 5 使用不同的 xib 文件。它目前的工作方式是自动选择具有正确设备修饰符的文件（如此处指定：http: [//developer.apple.com /library/ios/#documentation/Cocoa/Conceptual/LoadingResources/Introduction/Introduction.html#//apple_ref/doc/uid/10000051i-CH1-SW2](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/LoadingResources/Introduction/Introduction.html#//apple_ref/doc/uid/10000051i-CH1-SW2)）。但是没有提到如何处理 iPhone 5。我很惊讶，因为我的印象是他们更喜欢开发人员在 5 上创建不同/独特的体验，而不仅仅是自动缩放......

有人知道有效的修饰符吗？(eg myxib~iphone5.xib) 比自己处理设备检测和切换要方便。

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T08:29:08.310

不幸的是，没有命名约定，但有一种方法。这就是我正在使用的：

我有一个名为 GlobalConstants 的全局 .h 文件，我将所有#define 宏都放入其中。我有这个：

```
static BOOL is4InchRetina()
{
    if ((![UIApplication sharedApplication].statusBarHidden && (int)[[UIScreen mainScreen] applicationFrame].size.height == 548) || ([UIApplication sharedApplication].statusBarHidden && (int)[[UIScreen mainScreen] applicationFrame].size.height == 568))
        return YES;

    return NO;
} 
```

然后在我的任何视图控制器类中 - 我像这样覆盖 init 方法：

```
#import GlobalConstants.h

-(id) init {

if(is4InchRetina()) self = [super initWithNibName:@"myNibName5" bundle:[NSBundle mainBundle]];
else self = [super initWithNibName:@"myNibName" bundle:[NSBundle mainBundle]];

return self
} 
```

# php - PHP 和作曲家

> ID：12910280
> 
> 赞同：4
> 
> 时间：2012-10-16T08:16:55.383
> 
> 标签：php, composer-php

使用最新版本运行`php composer.phar`给了我：

```
PHP Fatal error:  Cannot redeclare class Symfony\Component\Console\Helper\Helper in phar:/composer.phar/vendor/symfony/console/Symfony/Component/Console/Helper/Helper.php on line 19 
```

这是怎么回事？在本地工作正常，但在 Linux 服务器上。

一旦我尝试运行任何命令或直接运行文件，就会发生这种情况。我不能自我更新或任何东西。我试过重新下载。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T08:30:34.590

很可能您已`apc.enable_cli`设置为 1，您可以使用`php -i | grep apc`.

另一种检查一切是否可以运行 composer 的方法是以检查模式运行安装程序：

```
curl -s https://getcomposer.org/installer | php -- --check 
```

APC 完全被 PHAR 破坏（至少在 CLI 模式下），并且它在 CLI 中不提供任何缓存，因为每个进程都是独立的，所以禁用它是有道理的，该标志只是用于调试目的 AFAIK。

# django - Django 管理列降序排序

> ID：12910281
> 
> 赞同：2
> 
> 时间：2012-10-16T08:17:00.610
> 
> 标签：django, django-admin, django-grappelli

当将 Django admin 与[grappelli](https://github.com/sehmaschine/django-grappelli)一起使用时，我希望单击列标题将按降序对表格进行排序。

（我不希望通过在模型元类中定义排序字段来对列进行默认排序。）

默认行为是升序。

第**一次**点击应该是这样的：

![要求的行为](../Images/90a53fc29c57a78ec93f34e30b990151.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:46:09.767

重写[`def result_headers(cl)`](https://github.com/django/django/blob/master/django/contrib/admin/templatetags/admin_list.py#LC88)

添加这两行：

```
 .....
    .....
    th_classes = ['sortable']
    order_type = ''

    #new lines

    default_order_type = getattr(attr, "admin_order_first_type", None)
    new_order_type = default_order_type if default_order_type else 'asc'

    #end of new lines

    sort_priority = 0
    sorted = False
    ...
    ... 
```

现在在 ModelAdmin 中，您可以：

```
list_display = ('number_of_players', ....)

def number_of_players(self, team):
        return intcomma(team.number_of_players)

number_of_players.short_description = '# num of players'
number_of_players.admin_order_field = 'number_of_players'
number_of_players.admin_order_first_type = 'desc' #will make the column to be ordered desc first 
```

我测试了它并且它有效

# python - AppEngine MapReduce NDB，DeadlineExceededError

> ID：12910282
> 
> 赞同：0
> 
> 时间：2012-10-16T08:17:01.050
> 
> 标签：python, google-app-engine, mapreduce, app-engine-ndb

我们正在尝试在我们的项目中大量使用**MapReduce 。**现在我们遇到了这个问题，日志中有很多“ **DeadlineExceededError ”错误......**

它的一个例子（回溯每次都不同）：

```
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/runtime/wsgi.py", line 207, in Handle
    result = handler(dict(self._environ), self._StartResponse)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1505, in __call__
    rv = self.router.dispatch(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1253, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1077, in __call__
    return handler.dispatch()
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 545, in dispatch
    return method(*args, **kwargs)
  File "/base/data/home/apps/s~sba/1.362471299468574812/mapreduce/base_handler.py", line 65, in post
    self.handle()
  File "/base/data/home/apps/s~sba/1.362471299468574812/mapreduce/handlers.py", line 208, in handle
    ctx.flush()
  File "/base/data/home/apps/s~sba/1.362471299468574812/mapreduce/context.py", line 333, in flush
    pool.flush()
  File "/base/data/home/apps/s~sba/1.362471299468574812/mapreduce/context.py", line 221, in flush
    self.__flush_ndb_puts()
  File "/base/data/home/apps/s~sba/1.362471299468574812/mapreduce/context.py", line 239, in __flush_ndb_puts
    ndb.put_multi(self.ndb_puts.items, config=self.__create_config())
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/ndb/model.py", line 3625, in put_multi
    for future in put_multi_async(entities, **ctx_options)]
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/ndb/tasklets.py", line 323, in get_result
    self.check_success()
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/ndb/tasklets.py", line 318, in check_success
    self.wait()
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/ndb/tasklets.py", line 302, in wait
    if not ev.run1():
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/ndb/eventloop.py", line 219, in run1
    delay = self.run0()
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/ndb/eventloop.py", line 181, in run0
    callback(*args, **kwds)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/ndb/tasklets.py", line 365, in _help_tasklet_along
    value = gen.send(val)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/ndb/context.py", line 274, in _put_tasklet
    keys = yield self._conn.async_put(options, datastore_entities)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_rpc.py", line 1560, in async_put
    for pbs, indexes in pbsgen:
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_rpc.py", line 1350, in __generate_pb_lists
    incr_size = pb.lengthString(pb.ByteSize()) + 1
DeadlineExceededError 
```

**我的问题是：**

*   我们怎样才能避免这个错误？
*   工作会发生什么，它会被重试（如果是这样，我们如何控制它？）还是不重试？
*   到底会不会导致数据不一致？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T18:21:57.013

显然，您执行的 put 太多，无法在一个数据存储调用中插入。您在这里有多种选择：

1.  如果这是一个相对罕见的事件 - 忽略它。Mapreduce 将重试切片并降低放置池的大小。确保您的地图是幂等的。
2.  看看[http://code.google.com/p/appengine-mapreduce/source/browse/trunk/python/src/mapreduce/context.py](http://code.google.com/p/appengine-mapreduce/source/browse/trunk/python/src/mapreduce/context.py) - 在你的 main.py 你可以降低`DATASTORE_DEADLINE`，`MAX_ENTITY_COUNT`或`MAX_POOL_SIZE`降低大小整个mapreduce的池。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T15:13:31.907

如果您使用的是 InputReader，则可以调整默认的 batch_size 以减少每个任务处理的实体数量。

我相信任务队列会重试任务，但您可能不希望它这样做，因为它可能会遇到相同的 DeadlineExceededError。

数据不一致是可能的。

也看到这个问题。 [App Engine - 使用 Mapper API 的任务队列重试计数](https://stackoverflow.com/questions/3342072/app-engine-task-queue-retry-count-with-mapper-api)

# android - getIntent() 方法在 android 服务的 onStartCommand() 方法中未定义

> ID：12910283
> 
> 赞同：2
> 
> 时间：2012-10-16T08:17:00.687
> 
> 标签：android, service, android-intent, undefined, onstart

有谁知道为什么我的 getIntent() 方法未针对 android 服务和 onStartCommand() 方法内部定义？

```
 @Override
public int onStartCommand(Intent intent, int flags, int startId){
super.onStartCommand(intent, startId, startId);

Intent i = getIntent();
Bundle extras = i.getExtras();
filename = extras.getString("filename");

 return START_STICKY;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T08:18:49.080

因为意图是作为函数的参数传递的......

```
onStartCommand(Intent intent, ...
    Bundle extras = intent.getExtras(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T08:19:16.420

该`getIntent()`方法是活动而不是服务。在Activity中如果你想获取当前的Intent，那么你可以调用`getIntent()`方法来获取Intent。在服务中，该`onStartCommand()`方法已经具有参数意图，因此您可以获取与意图一起传递的额外数据。

您已经从该方法中获取`intent`对象。`onStartCommand()`核实。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T08:19:37.733

类中没有`getIntent`() 方法`Service`。您可以使用传递给的意图参数`onStartCommand`

# linq-to-xml - LINQ to XML：如何重新排列查询？

> ID：12910286
> 
> 赞同：0
> 
> 时间：2012-10-16T08:17:10.403
> 
> 标签：linq-to-xml

我有有效的代码：

XML:

```
<parameters>
    <company>asur_nsi</company>
    <password>lapshovva</password>
    <user>dogm_LapshovVA</user>
</parameters> 
```

代码：

```
XElement documentRoot = XElement.Load(webConfigFilePath);
var param = from p in documentRoot.Descendants("parameters")
            select new
            {
                company = p.Element("company").Value,
                password = p.Element("password").Value,
                user = p.Element("user").Value
            };

foreach (var p in param)
{
    AuthContext ac = new AuthContext()
    {
        Company = p.company,
        Password = p.password,
        User = p.user
    };
} 
```

但是，我想让它变得更好更短，并想立即返回 AuthContext 类型的对象。我想以某种方式将 AuthContext 对象的创建移动到“选择新”部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:22:09.997

```
XElement documentRoot = XElement.Load(webConfigFilePath);
var param = from p in documentRoot.Descendants("parameters")
            select new AuthContext()
            {
                Company = p.Element("company").Value,
                Password = p.Element("password").Value,
                User = p.Element("user").Value
            }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:22:50.090

```
XElement documentRoot = XElement.Load(webConfigFilePath);
var authContexts = (from p in documentRoot.Descendants("parameters")
            select new AuthContext
            {
                Company = p.Element("company").Value,
                Password = p.Element("password").Value,
                User = p.Element("user").Value
            }).ToArray(); 
```

只需创建`AuthContext`而不是匿名类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:40:01.947

打扰一下。我刚刚弄清楚如何做我想做的事：

```
var config = XElement.Load(webConfigFilePath).Descendants("parameters").Single();
AuthContext ac = new AuthContext
{
    Company = config.Element("company").Value,
    Password = config.Element("password").Value,
    User = config.Element("user").Value
}; 
```

还是非常感谢。

# sql - 合并具有重复数据的表

> ID：12910287
> 
> 赞同：5
> 
> 时间：2012-10-16T08:17:15.323
> 
> 标签：sql, sql-server, data-warehouse

对于 SQL Server 数据仓库，我需要匹配 2 个包含大致相同数据的表。

显然不止于此，因此重新定义任务不是一种选择:-)

给定 2 个表，A 和 B

表 A：

```
id  | fid | type
-------------------
100 | 1   | cookies
110 | 1   | muffins
120 | 1   | muffins 
```

表 B：

```
id   | fid | type
--------------------
a220 | 1   | muffins
b220 | 1   | muffins 
```

合并时（在此处应用秘密 IT - SQL），它应该成为

A_B：

```
A_id | B_id | fid | type
---------------------------
100  | NULL | 1   | cookies
110  | a220 | 1   | muffins
120  | b220 | 1   | muffins 
```

任何使用 T-SQL 的解决方案都是首选，性能不是问题。如果 SSIS 是一个更简单的选择，我可以接受。

* * *

这是一个用于创建测试环境供您使用的脚本。

```
/****** Object:  Table [dbo].[B]    ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[B](
    [id] [varchar](10) NULL,
    [fid] [int] NULL,
    [type] [varchar](50) NULL
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
INSERT [dbo].[B] ([id], [fid], [type]) VALUES (N'a220', 1, N'muffins')
INSERT [dbo].[B] ([id], [fid], [type]) VALUES (N'b220', 1, N'muffins')
/****** Object:  Table [dbo].[A]    ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[A](
    [id] [varchar](10) NULL,
    [fid] [int] NULL,
    [type] [varchar](50) NULL
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
INSERT [dbo].[A] ([id], [fid], [type]) VALUES (N'100', 1, N'cookies')
INSERT [dbo].[A] ([id], [fid], [type]) VALUES (N'110', 1, N'muffins')
INSERT [dbo].[A] ([id], [fid], [type]) VALUES (N'120', 1, N'muffins') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T08:24:54.637

假设您要匹配 ID 的类型和顺序...

```
select a.id, b.id, ISNULL(a.fid,b.fid) fid, ISNULL(a.type,b.type) type
from
    (select *, ROW_NUMBER() over (partition by type order by id) rn from a ) a
        full outer join
    (select *, ROW_NUMBER() over (partition by type order by id) rn from b ) b
        on a.rn=b.rn
        and a.type = b.type
order by a.id 
```

# c# - C# DLNA/UPNP 媒体播放

> ID：12910291
> 
> 赞同：1
> 
> 时间：2012-10-16T08:17:41.810
> 
> 标签：c#, media, upnp, dlna

我正在尝试将特定媒体流式传输到 dlna/upnp 兼容设备。我已经了解了如何使用 c# 向设备发送命令（例如播放、暂停、停止等）。

所以，我可以在设备上播放媒体。但是，我不清楚我如何告诉设备播放*什么*媒体。对此有特定的命令吗？

我看到了“SetAVTransportURI”命令，但这需要一个 uri，我只想从我的网络上的共享目录播放视频文件。我如何告诉设备播放哪些媒体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:37:50.233

根据**UPnP MediaRenderer**规范（它是公开的，请查看[www.upnp.org](http://www.upnp.org)），预计**AVTransport**`file:`服务仅针对**内部**协议采用 URI 方案，这在*很大程度上未指定且特定*于设备（如规范中所述）。换句话说，您只能`SetAVTransportURI`使用`file:`“CD 上的第一首曲目”或“Tuner station X”之类的内容。如果要远程连接，则必须使用协议**http-get**，即 URI 方案`http:`。设置一个简单的网络服务器来发布您的共享目录应该可以解决问题。

对于 UPnP 的这个隔离部分（即设置**单一**、**已知的**媒体 URI、**没有浏览**和**没有像视频名称等元数据**），您不需要您的服务器知道任何特殊的 DLNA/UPnP 服务。只要您想拥有比没有更好的用户体验，请查找一些成熟的 UPnP 媒体服务器。也有一些用 C# 编写的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:47:40.960

检查 wikipedia 条目以了解 Windows 上的[URI 方案](http://en.wikipedia.org/wiki/File_URI_scheme)。
您的共享网络目录是否也提供 DLNA/UPNP 服务？编辑：如果没有 UPNP 服务，您可以查看有关 UPNP 服务器功能的[这个](https://stackoverflow.com/questions/418451/c-sharp-upnp-dnla-media-server-library)问题。

# ruby-on-rails - 在 Pow 上运行的 Rails 应用程序不会因 /lib 目录中的更改而重新加载

> ID：12910295
> 
> 赞同：5
> 
> 时间：2012-10-16T08:17:50.937
> 
> 标签：ruby-on-rails, ruby, rack-pow

经过多次谷歌搜索后，我尝试将这两个都添加到我的配置中，但没有发生重新加载：

```
config.autoload_paths += %W(#{config.root}/lib)
config.autoload_paths += Dir["#{config.root}/lib/**/"] 
```

我对 /lib 下的文件进行了更改，但在 Pow 中刷新不会重新加载更改

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T08:38:11.110

您需要在更改 /lib 中的文件后重新启动 pow，因为 Rails 在启动时会在此处初始化对象，并且在启动后不会再次加载它们（因此在服务器启动时进行更改不会产生影响）。为了克服这个问题，您有几个选择：

1.  你可能想看看使用`require_dependency`.

2.  您可以通过触摸 restart.txt 文件来重新启动 Pow：`touch ~/.pow/restart.txt`

3.  如果您要大量更改 lib 文件夹，为了获得更方便的解决方案，请添加[anvil](http://anvilformac.com/)以轻松处理重新启动。

4.  如果您不想这样做，只需将您的类添加到 /app 路径到一个新文件夹中。

# php - Zend Framework 2：活动菜单项

> ID：12910300
> 
> 赞同：7
> 
> 时间：2012-10-16T08:17:57.747
> 
> 标签：php, zend-framework2

从配置构建导航：

```
'navigation' => array(
    'default' => array(
        'admin' => array(
                'label' => 'Administration',
                'controller' => 'index',
                'action' => 'index',
                'route' => 'admin/default',
              ),
         'album' => array(
                'label' => 'Album',
                'controller' => 'index',
                'action' => 'index',
                'route' => 'album/default',
              ),
  /* ... */ 
```

路由配置就像它是真的一样。菜单中的导航有效。链接菜单指向所需模块的所需控制器/动作。但是在引入菜单和过渡到一个或另一个菜单项时，active 同时标记了两个点以及“管理”和“专辑”。据我了解，出于与控制器名称和操作名称匹配的原因，但仍然存在“路线”并且它有所不同......并非没有为每个项目生成不同的网址......但不知何故，尽管这，它们都被标记为活动的。

路由配置：

```
 'router' => array(
    'routes' => array(
        'admin' => array(
            'type'    => 'Literal',
            'options' => array(
                'route'    => '/admin',
                'defaults' => array(
                    '__NAMESPACE__' => 'Admin\Controller',
                    'controller'    => 'Index',
                    'action'        => 'index',
                ),
            ),
            'may_terminate' => true,
            'child_routes' => array(
                'default' => array(
                    'type'    => 'Segment',
                    'options' => array(
                        'route'    => '/[:controller][/:action[/id:id]]',
                        'constraints' => array(
                            'controller'    => '[a-zA-Z][a-zA-Z0-9_-]*',
                            'action'        => '[a-zA-Z][a-zA-Z0-9_-]*',
                            'id'            => '[0-9]+',
                        ),
                        'defaults' => array(
                        ),
                    ),
                ), 
```

专辑路由配置类似...

为什么会这样？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:40:33.023

如果您使控制器名称包含命名空间，那么它们将是唯一的并且不会发生冲突：

```
Admin\Controller\IndexController
Album\Controller\IndexController 
```

而不是

```
Index
Index 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T15:02:32.160

看起来这就是 ZF2 的工作方式（`isActive()`Zend\Navigation\Page\Mvc.php 中的读取函数）。最初它检查路由/控制器/动作的匹配，但如果失败，ZF2 再次检查控制器/动作对。所以有三种可能的方式：

1.  [在https://github.com/zendframework/zf2/issues](https://github.com/zendframework/zf2/issues)打开一个工单并等待响应。

2.  覆盖`\Zend\Navigation\Page\Mvc`。

3.  为控制器选择不同的名称（不要使用`index`名称，因为它是 Mvc.php 中控制器的默认名称）。

# android - Android，如何停止出现在 EditText 下方的指针

> ID：12910305
> 
> 赞同：5
> 
> 时间：2012-10-16T08:18:05.383
> 
> 标签：android, android-edittext

我有一个包含一些 EditTexts 的活动。当我单击 EditText 以更改其中的文本时，会在光标出现的位置下方出现一个蓝色箭头。我怎样才能阻止这个出现？

![恼人的蓝色箭头示例](../Images/f3615105a92e42122476968ded54a102.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-15T01:57:41.087

正如 MarvinLabs 所指出的，它是 Android SDK 中的一组可绘制对象。但是它们可以被覆盖。

1.  在您的 sdk 平台中找到这些图像：

    *   text_select_handle_left.png
    *   text_select_handle_middle.png
    *   text_select_handle_right.png
2.  将它们复制到您的 drawables 文件夹，以便您有一个本地副本可供参考。您可以更改它们的颜色，使它们为空，或任何您想要的。请注意，正如 MarvinLabs 所说，完全删除它们可能并不明智，因为它们帮助用户选择文本进行剪切和复制。

3.  如果您尚未在您的 styles.xml 中定义自定义主题，请定义一个。然后将这些项目添加到其中：

_

```
<style name="CustomTheme" parent="@android:style/Theme.Holo.Light">
  <item name="android:textSelectHandleLeft">@drawable/text_select_handle_left</item>
  <item name="android:textSelectHandleRight">@drawable/text_select_handle_right</item>
  <item name="android:textSelectHandle">@drawable/text_select_handle_middle</item>
</style> 
```

**前：**

![前](../Images/221f5e5f02f5108d202a12d0dd6e9611.png)

**后：**

![后](../Images/2e2d13441a5f57eaf1fcacc9f558e57a.png)

（不同的EditTexts，但你明白了）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T08:21:25.347

该指针是一个系统助手，允许用户轻松移动光标（比仅仅通过触摸 EditText 更精确）。所以我不知道你是否可以删除它，但我相信这不是一个好主意。

此外，这种指针的样式会根据设备而有所不同。如果您查看 SDK 的 android 源代码，您会发现一些名为 text_select_handle_XXX.png 的可绘制对象，我想您会从中找到如何在您自己的主题中更改系统样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T08:20:02.877

我很确定这只发生在特定的 API 或设备上。它在其他应用程序上的工作方式也可能不同。最终，我看不到任何真正的方法来禁用设备原生的东西。此外，那里的设备非常庞大，因此即使您找到方法，您也很难禁用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-04T12:48:33.727

您可以使用自定义的`EditText`. 您需要创建一个自定义`MovementMethod`实现，一个`canSelectArbitrarily()`返回 false 的实现。然后您只需覆盖`EditText.getDefaultMovementMethod()`以返回您的`CustomMovementMethod`：

```
public class MyEditText extends EditText {
    private CustomMovementMethod customMovementMethod = new CustomMovementMethod();
    @Override 
    public MovementMethod getDefaultMovementMethod() {
        return customMovementMethod;
    }
}

private class CustomMovementMethod implements MovementMethod {

    @Override
    public boolean canSelectArbitrarily() {
        return false;
    }

    @Override
    public void initialize(TextView widget, Spannable text) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onGenericMotionEvent(TextView widget, Spannable text, MotionEvent event) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean onKeyDown(TextView widget, Spannable text, int keyCode, KeyEvent event) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean onKeyOther(TextView view, Spannable text, KeyEvent event) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean onKeyUp(TextView widget, Spannable text, int keyCode, KeyEvent event) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void onTakeFocus(TextView widget, Spannable text, int direction) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onTouchEvent(TextView widget, Spannable text, MotionEvent event) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean onTrackballEvent(TextView widget, Spannable text, MotionEvent event) {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

# c++ - "class className;" 是什么意思 本身在 C++ 中做吗？

> ID：12910308
> 
> 赞同：-1
> 
> 时间：2012-10-16T08:18:14.937
> 
> 标签：c++

> **可能重复：**
> [C++ - 前向声明](https://stackoverflow.com/questions/4757565/c-forward-declaration)

所以在我的头文件中，我定义/声明了一个类，其中包含名为**User的所有功能**

然后在 .cpp 源文件中靠近顶部`class User;`

我是 c 新手，但在我查看的几个教程中找不到答案，所以来到这里

它有什么作用 ？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:20:09.083

它被称为前向声明，使编译器能够识别该类，而无需实际了解其内部结构。您只需通知编译器存在这样的类，并且声明指向它的指针不会引发错误。

另一种方法是包含声明该类的相应头文件，但如果您只需要指向该类型的指针，那将太重了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:20:26.063

它是所谓的“前向声明”：它使编译器知道该类，而无需实际定义它。请注意，这是 C++，而不是 C。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:24:00.837

它*声明*类而不实际*定义*它。从这个意义上说，它没有什么不同：

```
void doSomething(void); 
```

该原型告诉编译器`doSomething()`存在，但实际上并没有指定它的作用。

它通常用于您需要该类存在的地方（因此您可以以某种方式引用它）但您不需要了解它的任何属性。

# logging - 仅记录 IIS 中的错误

> ID：12910310
> 
> 赞同：0
> 
> 时间：2012-10-16T08:18:20.560
> 
> 标签：logging, iis-7.5

我们正在运行一些相当大的网站，每天的浏览量超过 10 万次。我们并没有研究一种定制日志记录的方法。

我们最近确实从 IIS 6 切换到了 IIS 7.5，但我们还没有找到设置详细级别的方法。在 IIS 6 中，我们可以设置

*   离开
*   致命的
*   错误
*   警告
*   信息
*   调试
*   全部

我们通常只对 ERROR 和 FATAL 日志行感兴趣。

有没有办法在 IIS 7.5 中实现这一点，还是我们必须改变方法？是否有可能每天运行几次的工具来细化日志，整理出我们感兴趣的内容？

谢谢

# c# - 如何在 ms word 模板中放置标签并用数据库中的数据填充它们

> ID：12910311
> 
> 赞同：4
> 
> 时间：2012-10-16T08:18:19.933
> 
> 标签：c#, asp.net, templates, ms-word

我需要制作一个应用程序，用户上传某个文档模板（Word 等）并将其放置在具有某些 id 的控件（标签、文本框）中，并且基于控件的 id，我必须用数据填充模板从 SQL server 然后使填充数据的 word 文档可供下载。

无论如何我可以使用 C# 和 APS.NET、Javascript、Jquery 等吗？

我真的不知道从哪里开始。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:50:15.017

您可以从模板中创建文档，如下所示：

```
priavte void CreateWordDocument(string InputFileNamePath, string OutputFileNamePath)
    {

    Application app = new Microsoft.Office.Interop.Word.Application();   

    doc = app.Documents.Open(InputFileNamePath,ref missing, ref missing,ref Missing, ref Missing);
    // Activate document
    doc.Actiavte();
    //Find place holders in input template and replace them with database values

    this.FindAndReplace(app,"<Name>","John"); //take all values from database 
    this.FindAndReplace(app,"<Address>","Test address");
    this.FindAndReplace(app,"<City>","Test City");

    //Save file
    doc.SaveAs(ref OutputFileNamePath, ref missing, ref missing, ref missing, ref missing);

    doc.Close(ref missing,ref missing,ref missing,)
    } 
```

访问链接以获得更多帮助：[http ://www.techrepublic.com/blog/howdoi/how-do-i-modify-word-documents-using-c/190](http://www.techrepublic.com/blog/howdoi/how-do-i-modify-word-documents-using-c/190)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:49:29.790

我搜索了一下，发现我的问题的解决方案是[**Open XML SDK 2.0 for Microsoft Office**](http://www.microsoft.com/en-us/download/details.aspx?id=5124)

我从来没有使用过它，我想我必须搜索很多，直到我可以在我的应用程序中使用它。希望它会正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T11:40:31.797

当您在 C# 中自己编写代码时，还请注意以下方面：

1.  直接处理文档时，页眉和页脚应该单独处理。当您在重复元素的页面上有多个相同的值时，我发现总是将第一个定义的值放在页眉中并在页脚有引用时将最后一个定义的值更容易。
2.  尽量不要使用 XML 表示；替换原始 XML 时，在 XML 文档中处理页眉和页脚要困难得多。
3.  表格可能会导致问题；当您使用文档的文本表示来解析内容时（并且当您想要插入重复行时需要这样做），表格会在文本表示和文档中的光标位置之间引入偏移。您将需要在表中手动添加额外的锚点或使用 XML 表示。
4.  或者，当您需要类似表格的结构时，请在文档中使用 TAB-s 而不是表格。
5.  当您需要重复图片或框架或其他更高级的功能时，它们比表格更容易。如果您只有有限的图片列表（例如 CxO-s 的签名），请将它们全部放在 Word 文档中，并删除根本不需要或不需要重复的图片。

对于上传，我建议记住设置元数据属性（这使文档管理系统的工作更轻松）并使用 Web 服务或类似的东西在后端处理它。

# php - 如何在第一个双换行符序列之前隔离内容？

> ID：12910312
> 
> 赞同：2
> 
> 时间：2012-10-16T08:18:23.730
> 
> 标签：php, regex, substring, preg-replace, preg-match

```
<ul>
    <li><a href="#">Foo</a></li>
    <li><a href="#">Foo</a></li>
    <li><a href="#">Foo</a></li>
</ul>

<ul>
    <li><a href="#">Bar</a></li>
    <li><a href="#">Bar</a></li>
    <li><a href="#">Bar</a></li>
</ul> 
```

在第一个空行之前如何获取任何内容？

**注意：**内容的第一和第二部分并不总是以 ul 开头。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T08:20:22.757

```
preg_match('/\A.*?(?=\s*^\s*$)/smx', $subject, $regs);
$result = $regs[0]; 
```

解释

```
preg_match(
    '/\A    # Start of string
    .*?     # Match any number of characters (as few as possible)
    (?=     # until it is possible to match...
     \s*    #  trailing whitespace, including a linebreak 
     ^      #  Start of line
     \s*    #  optional whitespace
     $      #  End of line
    )       # (End of lookahead assertion)/smx', 
    $subject, $regs);
$result = $regs[0]; 
```

假设您将只包含空格的行计算为空行。如果不是，请删除“可选空格”行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-28T12:04:07.837

在一个示例字符串中，如下所示：

```
<ul>
    <li><a href="#">Foo</a></li>
    <li><a href="#">Foo</a></li>
    <li><a href="#">Foo</a></li>
</ul>

<ul>
    <li><a href="#">Bar</a></li>
    <li><a href="#">Bar</a></li>
    <li><a href="#">Bar</a></li>
</ul>

<ul>
    <li><a href="#">Bum</a></li>
    <li><a href="#">Bum</a></li>
    <li><a href="#">Bum</a></li>
</ul>

<ul>
    <li><a href="#">Barf</a></li>
    <li><a href="#">Barf</a></li>
    <li><a href="#">Barf</a></li>
</ul> 
```

Tim`preg_match()`使用惰性量词和前瞻的模式需要 432 步才能完成。它还依赖于字符串中实际存在双换行符序列的事实（如果双换行符不存在，它将无法匹配）。

我想我会推荐一种不同的技术。在您的字符串上使用`preg_replace()`更简单（贪婪）的模式。

代码：（[演示](https://3v4l.org/GlnkN)）

```
preg_replace('/\R{2}.*/s', '', $html) 
```

无论字符串中是否出现双换行符序列，它不仅返回所需的输出，而且该模式只需要**7**步。这就是我将在我的项目中使用的。

`\R`匹配不同操作系统上的换行符序列。
`s`s 模式修饰符告诉正则表达式引擎在与通配符匹配时包含换行符`.`。

# javascript - 测量页外元素的高度

> ID：12910319
> 
> 赞同：1
> 
> 时间：2012-10-16T08:18:49.260
> 
> 标签：javascript, jquery, outerheight

我在元素中进行 Ajaxing。我想根据它们的高度来决定把它们放在哪里（想想盒子包装类型算法）。

当我这样遍历我的元素时，我总是`0`得到`outerHeight`：

```
posts.each(function(i, e) {
    var elementHeight = $(e).outerHeight();
    // elementHeight is always 0
}); 
```

如何获取元素的显示高度？

* * *

看来我必须将元素添加到页面才能获得高度，这是有道理的。
在尽可能简单地对用户不可见的同时执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:20:56.220

您必须将元素添加到页面，以便它们通过布局过程，然后它们将具有大小。

您可以将它们添加到主体，获取高度，然后将它们删除。当元素在页面中时浏览器忙于运行您的代码，这些元素将永远不会显示：

```
var el = $('<div>test</div>');
$(document.body).append(el);
var h = el.height();
el.remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:26:08.600

将帖子附加到`hidden`(display: none) div 元素，然后遍历它们以获取它们各自的`outerHeight`值。

**HTML**

```
<div id="postContainer"></div> 
```

**CSS**

```
#postContainer { display: none;} 
```

**JS**

```
var cont = $('#postContainer'), postsLength = posts.length;
posts.each(function(i, e) {
    cont.append(e);
    if (!--postsLength) calcOuterHeight();
});

function calcOuterHeight(){
    cont.find('.posts').each(function(i, e){
        var oh = $(e).outerHeight();
    })
} 
```

# ruby - 带有消息的救援异常

> ID：12910322
> 
> 赞同：2
> 
> 时间：2012-10-16T08:19:07.383
> 
> 标签：ruby, exception, error-handling

我得到异常`Thrift::TransportException (end of file reached)`，我想用消息（“到达文件结尾”）来拯救它。

现在我做

```
begin
  #...
rescue Thrift::TransportException => e
  raise e unless "end of file reached" == e.message
  # do whatever if it is not end of file reached.
end 
```

有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T08:29:04.037

如果可以避免，请不要依赖消息的逻辑 - 消息只是文本，Thrift 的开发人员可以在任何给定时间点自由更改它们，从而破坏您的应用程序。

`TransportException`在 Thrift 中有一个`type`，这是您可以[在此处](http://rubydoc.info/gems/thrift/0.5.0/Thrift/TransportException)看到的常量之一。与您相关的是`END_OF_FILE`.

至于代码中的实现，没有比在`rescue`块中检查异常属性更好的方法了，所以：

```
begin
  #...
rescue Thrift::TransportException => e
  raise e unless e.type == Thrift::TransportException::END_OF_FILE
  # do whatever if it is not end of file reached.
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:29:57.300

你不需要`raise`在一个`rescue`块中，我会建议在你想要的任何地方显示一个实例变量。另外，`1==a`它非常难看，就像`blue is a sky`

```
begin
  #...
rescue Thrift::TransportException => e
  @error = e.message if e.message == "end of file reached"
  # do whatever if it is not end of file reached.
end 
```

# c++ - 使用 OpenGL 定向图形以查看相机

> ID：12910332
> 
> 赞同：2
> 
> 时间：2012-10-16T08:19:31.567
> 
> 标签：c++, opengl, matrix

在我的 opengl 应用程序中，我想定位人物以查看相机，为此，我为所有对象定义了 2 个向量，正面和向上。

我使用 gluLookAt 来控制相机，所以我需要的向量 newFront 和 newUp 很容易知道。

我用来控制每个图形方向的代码是：

```
m4D orientate(v3D newFront, v3D newUp)
{
    double angle = angle_between(front, newFront);
    v3D cross = normalize(cross_product(front, newFront));

    m4D matrix = rotate_from_axis(angle, cross);

    up = normalize(up * matrix);

    angle = angle_between(up, newUp);
    cross = normalize(cross_product(up, newUp));

    return(rotate_from_axis(angle, cross) * matrix);
} 
```

当矩阵堆栈只有这个矩阵时，此代码运行良好，但如果我推动先前的矩阵旋转（当然是前向和向上的向量旋转），它会失败。

我有什么错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:19:26.630

当有更简单的方法时，为什么总是那些复杂的“我解决反向旋转并将其乘以模型视图”广告牌/冒名顶替解决方案？

令 M 为要确定广告牌矩阵的模型视图矩阵。矩阵是 4×4 实值类型。左上角的 3×3 定义了旋转和缩放。对于广告牌，这部分是身份。

因此，通过用身份替换当前模型视图矩阵的左上部分，并保持其余部分不变，即

```
 1  0  0 tx
 0  1  0 ty
 0  0  1 tz
wx wy wz ww 
```

并使用该矩阵进行进一步的转换，您将获得所需的效果。如果应用了缩放，则用缩放矩阵替换左上角的恒等式。

# iphone - 如何从字典中创建具有特定项目的数组？

> ID：12910338
> 
> 赞同：0
> 
> 时间：2012-10-16T08:19:50.847
> 
> 标签：iphone, ios, ipad

我有一个应用程序，其中我将成员的详细信息作为字典。我想添加一个包含字典中特定对象的数组。我得到的响应是这样的，

```
{
    500 =     {
        name = baddd;
        status = "<null>";
    };
    511 =     {
        name = abyj;
        status = "Hi all...:-)";
    };
    512 =     {
        name = abyk;
        status = fdffd;
    };
} 
```

我想创建一个只有名称结果的数组。我试过这样

```
for(int i=0;i<=self.currentChannel.memberCount;i++)
{

    NSString *name=[NSString stringWithFormat:@"%@",[self.currentChannel.members objectForKey:@"name"]] ;  
    NSLog(@"%@",name);
    [searchfriendarray addObject:name]; 

}
NSLog(@"%@",searchfriendarray); 
```

但增加的价值是空的。有谁能够帮助我 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:24:22.583

遍历`objectEnumerator`以获取值（内部字典）。然后只需将“名称”的值添加到结果数组中。示例（假设字典名为`d`）：

```
 NSDictionary* d = ...
 NSMutableArray* array = [NSMutableArray arrayWithCapacity:d.count];
 for(NSDictionary* member in d.objectEnumerator) {
     [array addObject:[member objectForKey:@"name"]];
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:32:39.200

Krumelur 比我快；）他说你应该先遍历字典值是对的。在您的实现中，您没有在某处引用您的计数器变量 i，因此每次迭代中的 NSString 名称都是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:42:18.903

这可能会帮助你..

```
// here you can get Array of Dictionary First
     NSArray *arr = [[NSArray alloc] initWithContentsOfFile:@""]; // get array first from your response
     NSDictionary *temp = [[NSDictionary alloc] initWithDictionary:self.currentChannel.members];
    for(int i=0;i<=self.currentChannel.memberCount;i++)
    {

        NSDictionary *temp = [arr objectAtIndex:i];
        NSString *name=[NSString stringWithFormat:@"%@",[temp objectForKey:@"name"]] ;  
        NSLog(@"%@",name);
        [searchfriendarray addObject:name]; 

    }
    NSLog(@"%@",searchfriendarray); 
```

谢谢。

# python - 在 Plone 模板中处理表单提交

> ID：12910348
> 
> 赞同：3
> 
> 时间：2012-10-16T08:20:27.983
> 
> 标签：python, plone

我有一个带有视图类的页面模板。在页面模板中，我有一个提交到同一页面的按钮，即

```
<form method="post" tal:attributes="action request/getURL" >
    <input type="hidden" name="filename" value="" tal:attributes="value python:item['filename']" />
    <input type="submit" name="form.action.convert" value="Convert" /> 
</form> 
```

提交表单时，会调用视图类。

```
class Html(BrowserView):

    def __init__(self, context, request): 
        self.request = request
        self.context = context         

    def __call__(self):
        # Is this a form submission via POST?
        req = self.request
        if req.get('REQUEST_METHOD', 'POST') and \
            req.form.get('form.action.convert', '') == 'Convert': 

            self.convert_document(self.context, str(req.form.get('filename', '')))

    def convert_document(self, contextObj, fileToConvert):
       """ Do something """
       return None 
```

现在，问题是我无法将逻辑放入`__init__`方法中，因为该方法被多次调用，导致只需单击一次即可提交多个表单。但是，`__call__`单击按钮时会调用一次该方法，但不幸的是，如果我单击链接以查看视图中的当前内容项，则没有任何反应，因为`__call__`调用了该方法并且没有任何反应。

我不能在`__call__`方法中使用下面的代码。浏览器会抱怨页面以永远不会结束的方式重定向。

```
self.context.REQUEST.response.redirect( self.context.absolute_url() ) 
```

在 Plone 的页面模板中处理表单提交是否有更好的方法？如何`convert_document`在页面模板的视图类中调用我的方法（即）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T09:07:18.943

首先，对您的代码进行一些注释，可以对其进行简化和改进：

最佳做法是让您的表单使用`absolute_url()`您的视图的方法；它是规范的 URL，`request/getURL`如果您的视图包含在其他地方，则可能包含获取异常或完全错误的 URL：

```
<form method="post" tal:attributes="action view/absolute_url" >
    <input type="hidden" name="filename" value="" tal:attributes="value item/filename" />
    <input type="submit" name="form.action.convert" value="Convert" /> 
</form> 
```

输入`filename`框 tal 表达式可以只使用路径表达式，这些对字典都适用。

您不需要重新定义该`__init__`方法，`BrowserView`该类已经为您提供了该方法。

为了测试表单是否已提交，我们通常只测试请求中是否存在提交按钮，您的测试比需要的更复杂：

```
def __call__(self):
    if 'form.action.convert' in self.request.form: 
        self.convert_document() 
```

因为`convert_document`是你视图的一个方法，它本身可以访问`self.context`和`self.request.form['filename']`，简化你的方法签名。由于您现在知道您的表单已提交，因此您可以指望它`self.request.form['filename']`存在并成为一个字符串；如果不是有人一直在手动修改请求并且事情应该打破，所以我通常不会`get(..., '')`在这种情况下使用。

视图必须始终在方法中完成所有工作`__call__`，因为`__init__`在遍历期间会调用 ，此时尚未确定当前用户等关键信息。您不需要`redirect`通过上下文访问该方法的响应，只需从`self.request`属性访问它，但记得*返回*结果：

```
return self.request.response.redirect(self.context.absolute_url()) 
```

但是，如果您的视图是上下文对象的*默认*视图，那确实会导致浏览器无法容忍的重定向循环。

请注意，如果您确实覆盖了具有关联模板`__call__`的视图类的方法，`BrowserView`则需要确保在适当的位置返回模板的输出。因此，我对您的视图类的攻击将是：

```
class Html(BrowserView):
    def __call__(self):
        if 'form.action.convert' in self.request:
            self.convert_document()
            return self.request.response.redirect(self.context.absolute_url())
        return self.index()

    def convert_document(self):
       """ Do something """
       context = self.context
       filename = self.request.form['filename']
       # Do something with the context and filename 
```

# java - java - 如何在java中通过TCP发送对象？

> ID：12910350
> 
> 赞同：1
> 
> 时间：2012-10-16T08:20:36.050
> 
> 标签：java, sockets, serialization, tcp, connection

我正在编写一个程序来将一个**对象**从一个类发送到另一个类。这是我的程序的一个简短示例，用于表示该问题。如您所见，从服务器发送到客户端的对象是学生类**，该类已在每个类（服务器/客户端）中单独定义。**我通过发送一个工作正常的 ArrayList 检查了这段代码，但是当涉及到我自己定义的类类型时，我收到了这个错误：

```
Exception in thread "main" java.lang.ClassCastException: ServerSide$1Student cannot be cast to ClientSide$1Student
    at ClientSide.main(ClientSide.java:29) 
```

这是服务器端的代码：

```
import java.io.*;
import java.net.*;

public class ServerSide {

    public static void main(String[] args) {
        class Student implements Serializable
        {
            int id;
            public Student(int num){id=num;}
            public void setID(int num){id=num;}
            public void Print(){System.out.println("id = " + id);}
        }
        try
        {
            Student a = new Student(3);
            ServerSocket myServerSocket = new ServerSocket(9999);
            Socket skt = myServerSocket.accept();   
            try 
            {
                ObjectOutputStream objectOutput = new ObjectOutputStream(skt.getOutputStream());
                objectOutput.writeObject(a);                
            } 
            catch (IOException e) 
            {
                e.printStackTrace();
            } 
        }
        catch (IOException e) 
        {
            e.printStackTrace();
        }
    }
} 
```

而对于客户端是：

```
import java.io.*;
import java.net.Socket;
import java.net.UnknownHostException;

public class ClientSide {

    public static void main(String[] args)
    {
        class Student implements Serializable
        {
            int id;
            public Student(int num){id=num;}        
            public void setID(int num){id=num;}
            public void Print(){System.out.println("id = " + id);}
        }
        try {       
            Socket socket = new Socket("10.1.1.2",9999);
            try {
                ObjectInputStream objectInput = new ObjectInputStream(socket.getInputStream());
                try {
                    Object object =(Student) objectInput.readObject();
                    Student tmp = (Student) object;
                    tmp.Print();
                } catch (ClassNotFoundException e) {
                    e.printStackTrace();
                }
            } catch (IOException e) {
                e.printStackTrace();
            }           
        } catch (UnknownHostException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }   
    }   
} 
```

**编辑：**

**我将它们移动到同一个文件并添加了序列化 ID。它工作正常。**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T08:26:02.213

拥有两个同名的类是不够的。这两个类需要有

*   同一个包
*   如果有的话，在同一个外部类中
*   具有相同的serialVersionUID。

我建议你有一个单独的、独立的类，它对客户端和服务器都是通用的。在更复杂的项目中，您可能会考虑在客户端和服务器模块都依赖的模块中构建这些通用组件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T08:24:54.553

您永远无法将表示 X 类实例的流反序列化为 Y 类实例。

要解决您的问题，您需要将该`Student`类的代码移动到另一个文件，例如 Student.java，并在您的客户端代码和服务器代码上使用该单一类。

请注意，如果您修改您的类，在大多数情况下，您将需要重新部署服务器（否则客户端将向服务器发送一个表示只有客户端知道的类实例的流）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T08:26:25.947

您正在引用两个不同的类。`Student`哪个是 的内部，`ClientSide`哪个`Student`是 的内部类`ServerSide`。您应该将该`Student`类移动到不同的文件。

# java - GXT 上传文件浏览窗口被浏览器阻止

> ID：12910358
> 
> 赞同：2
> 
> 时间：2012-10-16T08:21:24.973
> 
> 标签：java, google-chrome, gwt, file-upload, gxt

我正在使用 GXT File UploadField 上传数据，该代码如下所示，但是当我单击上传按钮时，浏览器第一次阻止了上传弹出窗口。之后它可以正常工作。为什么我重新加载页面第一次弹出窗口被阻止？我必须双击该按钮才能打开上传弹出窗口。

```
 if (uploadFileView == null) {
    uploadFileView = new UploadFileView();
    /* upldate Labels */
    uploadFileView.setHeading(uploadBasicLabels.uploadNewFile());
    uploadFileView.getBtnSubmit().setText(uploadBasicLabels.upload());

    uploadFileView.getBtnSubmit().addListener(Events.Select, new   Listener<BaseEvent>() {
        @Override
        public void handleEvent(BaseEvent be) {
            String id = uploadFileView.getFileField().getFileInput().getId();
            if(presenter.validateFile(id)){
                resetAllowed = false;
                uploadFileView.hide();  
                presenter.uploadNewFile();
            }else
                uploadFileView.getBtnSubmit().setEnabled(false);
        }
    });
    uploadFileView.addListener(Events.Hide, new Listener<BaseEvent>() {
        @Override
        public void handleEvent(BaseEvent be) {
            if(resetAllowed && !uploadFileView.isVisible()) {
                presenter.validateClose();
//                  presenter.resetCurrentRow();
            }
            resetAllowed  = true;
        }
    });
    uploadFileView.getFileField().addListener(Events.OnChange, new Listener<BaseEvent>() {
        @Override
        public void handleEvent(BaseEvent be) {
            if(uploadFileView.getFileField().getValue().equals("")){
                uploadFileView.getBtnSubmit().setEnabled(false);                    
            }else{
                uploadFileView.getBtnSubmit().setEnabled(true);

                /* on change Event Called twice */
                if(timer == null){
                    timer = new Timer() {

                        @Override
                        public void run() {
                            uploadFileView.getBtnSubmit().fireEvent(Events.Select);
                            timer = null;
                        }
                    };

                    timer.schedule(100);
                }
            }
        }
    });

    uploadFileView.addListener(Events.Show, new Listener<BaseEvent>() {
        @Override
        public void handleEvent(BaseEvent be) {
            presenter.getAppController().getFocusManager().setCurrentComponent(uploadFileView);
            uploadFileView.getFileField().getFileInput().focus();
        }
    });
}

uploadFileView.show();  
uploadFileView.getFileField().getFileInput().click(); 
```

# javascript - 禁用文本框验证失败时的 ASP 必需字段验证器

> ID：12910365
> 
> 赞同：0
> 
> 时间：2012-10-16T08:21:48.070
> 
> 标签：javascript, asp.net, validation, requiredfieldvalidator

我对 asp.net 必填字段验证器有疑问。在我的情况下，我有一个依赖于 DropDownList 的文本框：如果选择了一个值，则 TextBox 处于活动状态，否则它被禁用并放入 0 值内。

我想验证器要做的是检查文本框是否为空，并且：

*   如果文本框被禁用，则值为 0 => 验证通过
*   如果启用了文本框，则值取决于 suser => Validation 取决于用户输入

我发现如果文本框被禁用并且里面有一个值，验证器会阻止回发并显示消息，即使在文本框中有 0 值！（我也尝试过 NA 或类似的东西）

这是我的代码：

```
<asp:TextBox ID="txt_CIGUnico" runat="server"></asp:TextBox>
<asp:RequiredFieldValidator runat="server" ID="txt_CIGUnico_Validator" ControlToValidate="txt_CIGUnico" Display="Dynamic" InitialValue="" ErrorMessage="Inserisci un valore per il CIG"/> 
```

下拉列表中的 jQuery 执行以下操作：

```
if ($("[name*='tipoCIG']").attr('value') == "Singolo") {
    $("[name*='txt_CIGUnico']").removeAttr("disabled");
}
else {
    $("[name*='txt_CIGUnico']").attr("disabled", "disabled");
    $("[name*='txt_CIGUnico']").val("0");
} 
```

有什么建议吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:44:04.667

我建议根据需要使用 Javascript 启用/禁用 RFV。

```
ValidatorEnable(document.getElementById('<%=txt_CIGUnico_Validator.ClientID%>'), false); 
```

第二个参数将验证器设置为启用 (true) 或禁用 (false)。

# c# - 从所有数据网格视图中删除空行

> ID：12910369
> 
> 赞同：2
> 
> 时间：2012-10-16T08:21:56.360
> 
> 标签：c#, winforms, datagridview

这样我就可以从一个 datagridview 中删除空行。

```
bool Empty = true;

            for (int i = 0; i < PrimaryRadGridView.Rows.Count; i++)
            {
                Empty = true;
                for (int j = 0; j < PrimaryRadGridView.Columns.Count; j++)
                {
                    if (PrimaryRadGridView.Rows[i].Cells[j].Value != null && PrimaryRadGridView.Rows[i].Cells[j].Value.ToString() != "")
                    {
                        Empty = false;
                        break;
                    }
                }
                if (Empty)
                {
                    PrimaryRadGridView.Rows.RemoveAt(i);
                }
            } 
```

我得到了大约 6 个数据网格视图，我想删除所有的空行。

有没有办法从界面中的所有datagridviews中删除空行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T10:18:24.157

你可以创建一个方法

```
private void clearGrid(DataGridView view) {
    for (int row = 0; row < view.Rows.Count; ++row) {
        bool isEmpty = true;
        for (int col = 0; col < view.Columns.Count; ++col) {
            object value = view.Rows[row].Cells[col].Value;
            if (value != null && value.ToString().Length > 0) {
                isEmpty = false;
                break;
            }
        }
        if (isEmpty) {
            // deincrement (after the call) since we are removing the row
            view.Rows.RemoveAt(row--);
        }
    }
} 
```

并将您的 6 个 DataGridView 中的每一个传递给该方法。

```
clearGrid(PrimaryRadGridView); 
```

# sql-server-2000 - SQL Server 2000 中的标识范围问题

> ID：12910371
> 
> 赞同：1
> 
> 时间：2012-10-16T08:22:09.793
> 
> 标签：sql-server-2000

这些天我的应用程序运行良好。最近当我尝试添加数据时，其中一个表抛出错误

> 复制管理的身份范围已满，必须由复制代理更新。INSERT 冲突发生在数据库“YourDatabase”、表“StillBillAccount”、列“ID”中。可以调用 sp_adjustpublisheridentityrange 来获取新的身份范围。

我尝试`Sp_adjustpublisheridentityrange`为特定表执行，但没有成功。

请提供任何解决方案。

提前致谢，

# gwt - GWT googleCharts 栏已修剪

> ID：12910372
> 
> 赞同：1
> 
> 时间：2012-10-16T08:22:20.497
> 
> 标签：gwt, google-visualization

我正在将 GWT api 用于谷歌图表并遇到一些问题：

*   柱形图缺少起始值和结束值的列

![聚集柱形图](../Images/c991e70779cd7dcb07ea90827ec4c276.png)

*   条形图宽度被修剪为第一个/最后一个值的一半

![堆积条形图](../Images/5c67390123fdab7655bcd5b9276eac29.png)

为了解决这个问题，我尝试了 viewWindowMode 属性

```
HorizontalAxisOptions opt = HorizontalAxisOptions.create();
opt.set("viewWindowMode","pretty"); 
```

但这不起作用。

关于如何解决的任何想法？

代码：

```
private Options createOptions(ChartDataProxy response) {

        Options options = Options.create();
        options.setWidth(chartPanel.getOffsetWidth() - 2 * chartBorderWidth);
        options.setHeight(chartPanel.getOffsetHeight() - 2 * chartBorderWidth);

        HorizontalAxisOptions opt = HorizontalAxisOptions.create();
        opt.setTitle(response.getxAxisName());
        opt.setSlantedText(true);
        opt.set("viewWindowMode","pretty");

        options.setHAxisOptions(opt);

        AxisOptions vopt = AxisOptions.create();
        vopt.setTitle( response.getyAxisName());
        vopt.set("viewWindowMode","pretty");

        options.setVAxisOptions(vopt);

        options.setTitle(response.getCaption() + " " + response.getSubCaption());
        options.setLegend( LegendPosition.BOTTOM );

        options.setPointSize(4);

        return options;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:01:12.240

尽管我使用的是javascript，但我遇到了类似的问题。也许，你可以把它改编成 GWT。

基本上DataView可以修复它。您只需要使用 DataView 处理第一列，并在不使用 DataView 时返回您需要返回的任何内容 - 但是，作为字符串。我（不）知道，这很奇怪。

鉴于我有两列：日期，数字。我将使用这种代码：

```
var data = new google.visualization.DataTable();

data.addColumn('date', 'month');
data.addColumn('number', 'users');

// trick to prevent the bar chart from being cut in half at both edge of our graph
var dataView = new google.visualization.DataView(data);
dataView.setColumns([{calc: function(data, row) { return data.getFormattedValue(row, 0); }, type:'string'}, 1]);

var chart = new google.visualization.ColumnChart(document.getElementById('chart_monthly_users'));
chart.draw(dataView, options); 
```

希望能帮助到你。我只是收集分散的解决方案。

# sql - 访问中的统计语法

> ID：12910373
> 
> 赞同：0
> 
> 时间：2012-10-16T08:22:20.430
> 
> 标签：sql, ms-access

我想`Point`在我的应用程序中做一些统计，这是表格的列`Point`：

```
id   type   city
1    food   NewYork
2    food   Washington
3    sport  NewYork
4    food   ..... 
```

每个点都属于某种类型并位于某个城市。

现在我想计算每种类型在不同城市的点数。

例如，这里有两种类型：`food`和`sport`。

然后我想知道：

```
how many points of `food` and `sport` at NewYork
how many points of `food` and `sport` at Washington
how many points of `food` and `sport` at Chicago
...... 
```

我试过这个：

```
select type,count(*) as num from point group by type ; 
```

但我不能按城市分组。

怎么做？

## **更新**

```
id      type        city
1       food        NewYork
2       sport       NewYork
3       food        Chicago
4       food        San 
```

我想得到这样的东西：

```
 NewYork     Chicago     San
food    2           1           1
sport   1           0           0 
```

我将使用 html 表格和图表来显示这些数据。

所以我需要进行计数，我可以使用这样的东西：

```
select count(*) from point where type='food' and city ='San'
select count(*) from point where type='food' and city ='NewYork'
.... 
```

但是我认为这是一个坏主意，所以我想知道我是否可以使用 sql 来进行计数。

顺便说一句，对于这些表格数据，人们如何使用 json 组织他们的结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:55:44.630

这就是你想要的：

```
 SELECT city, 
     COUNT(CASE WHEN [type] = 'food' THEN 1 END) AS FoodCount,
     COUNT(CASE WHEN [type] = 'sport' THEN 1 END) AS SportCount
    FROM point
    GROUP BY city 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:47:39.357

更新：

要以聚合的行/列格式获取结果，您需要使用数据透视表。在 Access 中，它称为[交叉表查询](http://office.microsoft.com/en-us/access-help/make-summary-data-easier-to-read-by-using-a-crosstab-query-HA010229577.aspx)。您可以使用 Crosstab 查询向导通过漂亮的 UI 生成查询，或者直接切入 SQL：

```
TRANSFORM COUNT(id) AS CountOfId
   SELECT type
     FROM point
 GROUP BY type
    PIVOT city 
```

分组用于计算每个 id 的数量`type`。附加`PIVOT`子句对数据进行`city`分组，并将每个分组显示在单独的列中。最终结果如下所示：

```
 NewYork     Chicago     San
food    2           1           1
sport   1           0           0 
```

# php - PHP自定义会话ID，优化版

> ID：12910378
> 
> 赞同：2
> 
> 时间：2012-10-16T08:22:31.773
> 
> 标签：php, session

我想实现一个 PHP 自定义会话 ID，同时避免`session_start()`不必要的调用。

基本上，一种简单的算法是

```
session_start();
if ( ! isset( $_SESSION['MyStuff'] )) {
  session_write_close();
  session_id( generate_my_id() );
  session_start();
}

$_SESSION['MyStuff'] = some stuff...; 
```

如果会话一开始就过期或不存在，那么首先`session_start()`会创建自己的 ID 并向浏览器发送 cookie。然后会话结束，并创建另一个会话，发送另一个 cookie（加上创建和关闭会话文件的开销）。

另一种解决方案是测试 PHPSESSID cookie 是否存在，其值是否具有根据 - homecooked - generate_my_id() 函数的格式 - 然后再次测试 $_SESSION 值是否存在。但是，如果会话过期（没有 $_SESSION['MyStuff']），`session_start()`将再次调用不必要的会话。

所以问题是，根据我的观察，实际上是两个问题

*   有没有办法在调用之前指定 PHP 应该如何创建会话 ID（似乎不可能）`session_start()`？

*   有没有办法检查是否`session_start()`必须创建一个新会话，或者只使用一个可用的服务器端？（这将消除它的第一个电话）

欢迎任何好的选择。

**编辑**

澄清什么是自定义 ID。

会话 ID 是 PHP 用来在服务器上检索会话的字符串键，每个用户都有不同的键。该密钥通常存储在 cookie 中，然后浏览器将该 cookie 及其请求发送到服务器/PHP 以“连接”到会话。PHP 根据设置自动设置会话 ID 密钥，基于 MD5（用户和时间相关数据）或 SHA1（相同相关数据）。因此，会话 ID 是 MD5 或 SHA1 密钥 - 希望是唯一的。

自定义 ID 是程序员（我）手动创建的密钥，绕过了 md5/sha1 创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T18:56:01.390

迟到的答案，但请检查**[PHP v5.5.1的更改日志](http://www.php.net/ChangeLog-5.php#5.5.1)**

它引用了一个名为 SessionIdInterface 的新接口，该接口唯一的方法是 create_sid，尽管它仍然没有记录。

```
interface SessionIdInterface  {
    public function create_sid ();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:39:36.243

1.  [`session.hash_function`](http://sg3.php.net/manual/en/session.configuration.php#ini.session.hash-function)是的，从 5.3 开始，您可以在生成会话 ID 时指定哈希算法；不建议使用您自己的哈希算法，特别是因为哈希附带的算法已经过广泛的传播、速度、冲突等测试。

2.  由于 cookie 通常用于使会话永久化，因此您可以使用该信息来确定是否`session_start()`会创建新会话。

下面说明了一种最小化所需`session_start()`语句数量的方法；它是从现有代码（即 OO）推导出来的：

```
do {
    // discover session by cookie
    if (isset($_COOKIE[session_name()])) {
        session_start();
        // validate session contents
        if (!isset($_SESSION['MyStuff'])) {
            // destroy session and regenerate id
            session_destroy();
            session_regenerate_id(true); // skip this if you generate your own
        } else {
            // validation passed, no need to populate
            break;
        }
    }
    // populate new session
    // you can use session_id($your_id) here
    session_start();
    $_SESSION['MyStuff'] = 'foobar';
} while (false); 
```

奇怪的`do { } while`循环只是一个美化的，因此如果当前会话有效`goto`，您可以跳过第二个。`session_start()`

# javascript - 添加产品并将其与税相乘的计算器

> ID：12910380
> 
> 赞同：-3
> 
> 时间：2012-10-16T08:22:43.570
> 
> 标签：javascript, javascript-events

在为我的计算器找出代码时遇到问题。我已经使用我的教科书寻求帮助，但仍然不知道为什么它根本不计算，请提供一些提示会很棒，谢谢。

```
 <html>
<head>
<title> Total Calculator </title>
</head>
<body>
<p>
Bananas:   <input type="text" id="bananasBox" value=""> at $ 0.50 a piece<br>
Sodas  :   <input type="text" id="sodasBox"   value=""> at $ 0.75 per can<br>
Chips  :   <input type="text" id="chipsBox"   value=""> at $1.25 per bag<br>
Candy  :   <input type="text" id="candyBox"   value=""> at $1.00 per pack<br>
TAX is 10 %
</p>
<input type="button" value="Calculate"
<button id='Calculate' onclick= "Calculate()" value="Calculate">Calculate</button>
<script type="text/javascript">

function Calculate() {
    var total = 0;
    var cost = document.getElementById("cost").value;
    var tax = document.getElementById("tax").value;

    total = cost*tax;
    document.getElementById("total").value = total;

document.getElementById('outputDiv').innerHTML= 'Your TOTAL is: ' + total;">
}
</script>
<hr>
<div id="outputDiv"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:25:21.847

你有很多问题。

* * *

`onclick`HTML 无效（按钮标记在属性中途停止）。

的结束标记`<script>`丢失。

* * *

JavaScript 中函数声明的语法是：

```
function identifier() { } 
```

`identifier`函数的名称在哪里。标识符不带引号，并且其中不能有空格。

* * *

没有尝试在代码中的任何位置调用您的函数。

* * *

您对 进行了四次调用`document.getElementById`，但只有一个您尝试访问的 ID 存在。

* * *

`}`在最后一次调用之前结束函数`document.getElementById`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:26:48.577

好吧，如果您完全按照教科书进行，那么我认为您不会遇到这些问题。

1.  带空格的函数名
2.  验证您的输入按钮语法

2.1 点击

2.2 关闭标签

3 关闭脚本标签

# objective-c - 为简单起见将控制器拆分为类别

> ID：12910386
> 
> 赞同：1
> 
> 时间：2012-10-16T08:23:08.963
> 
> 标签：objective-c, cocoa

我正在研究一个`NSWindowController`，它正在迅速开始变大。然而，我正在研究的控制器的优点之一是它是相当分段的——它的一部分可以在逻辑上分开。

我想把这个控制器分成几类，以便更容易找到东西。关于为此目的使用类别的普遍共识是什么？有吗？有没有苹果实际使用类似模式的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:52:22.290

这是个人喜好。

作为一个旧时代（1970 年代）的程序员，我喜欢将任何文件保留在 1 页内——在 Objective C 的实践中，我的上限是 300-400 行。

我对工程师编写充满意大利面条代码的单片 FORTRAN 程序有着不幸的回忆。

限制文件大小或使用类别没有内在的好处，但如果它可以使代码更易于理解和维护，那么它是值得的。

我同意，如果使用类是可行的，则应考虑这一点。您还应该考虑使用函数而不是方法是否可以简化代码 - 这些可以放入单独的文件中。

我对这两种情况都使用了类别，`NSWindowController`在`NSViewContorller`一种情况下将 2000 行代码减少到 5 个类别。这应该对生成的代码没有影响，但肯定会使编码更容易。

您可以查看 Apple 示例（并且有一些类别示例），但在框架中无法说明底层代码是如何编写的。

我的建议是通过任何方便的方式限制文件大小。

# c# - LINQ：查找最大元素（不是最大值）

> ID：12910392
> 
> 赞同：2
> 
> 时间：2012-10-16T08:23:30.723
> 
> 标签：c#, .net, linq

假设您有一个给定长度的边列表（作为双精度）。现在你想找到最大长度的边。在 LINQ 中是否有一种简单的方法可以做到这一点？

当然，我可以先用 Max 计算最大值，然后进行比较，但首先，这将是两次计算，其次比较双精度值是否相等是一件坏事。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T08:26:32.593

*   Jon Skeet`MaxBy`在他的 MoreLINQ 库中有：[http ://code.google.com/p/morelinq](http://code.google.com/p/morelinq)

*   另外，看看[Observable.MaxBy](http://msdn.microsoft.com/en-us/library/system.reactive.linq.observable.maxby%28v=vs.103%29.aspx)

*   或者看看

    ```
    e.OrderByDescending(x => x.SomeProperty).First(); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:38:13.037

sehe 打败了我，得到了正确的答案，所以我会用它来说明一个可能有缺陷的假设：

> ...其次比较双打的平等是一件坏事。

IIRC比较复制的 double 是否相等*应该没有任何问题。*毕竟它只有 8 个字节。问题出现在计算中 - 或使用来自不同来源的两个相似值。

也就是说，害怕比较浮点数是件好事：P

# html - 使用 CSS 更改 div 顺序

> ID：12910398
> 
> 赞同：2
> 
> 时间：2012-10-16T08:23:49.070
> 
> 标签：html, css

我遵循无法更改的 HTML 结构。它包含三个垂直 div。我只想使用 CSS 更改 div 的位置，以便第二个 div 出现在最顶部，第一个和第三个 div 出现在这之后（唯一重要的是第二个 div 应该出现在顶部）。

我正在尝试使用以下 CSS 代码，它在顶部显示第二个 div，但隐藏了第一个 div。在此之后如何显示其他两个 div？所有三个 div 都有**不同的高度**。

**HTML：**

```
<div class="wrap">
    <div class="one">
       This should be third.
    </div>
    <div class="two">
       This should be first.     
    </div>
    <div class="three">
       This should be second.
    </div>
</div> 
```

**CSS：**

```
.wrap{
    width: 100px;
    overflow: hidden;
    position: relative;
}

.one, .two, .three{
    width: 100px;
    margin-bottom: 10px;
    background: yellow;     

}

.two{    
    position: absolute;
    top: 0;
    background: green;
} 
```

**JSFiddle：http:** [//jsfiddle.net/UK6vK/](http://jsfiddle.net/UK6vK/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:37:27.923

您将此样式代码用于 .one 和 .three

```
.one, .three{
width: 100px;
margin-bottom: 10px;
background: yellow;     
float:right;
} 
```

并设置为 .two 这种风格

```
.two{    
position: absolute;
top: 0;
background: green;
left:0;
width:100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-17T17:29:04.923

这些都不适合我，但对 Saeed 的一些调整似乎 - 基本上复制第二个 div 并将其仅用于布局，即

HTML

```
<div class="wrap">
<div style="position:relative;" class="two">
    <strong>This should be first..</strong>  
    <p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi auctor diam eget lorem vehicula aliquam. Aliquam ac tellus eget justo facilisis malesuada. Curabitur mi sapien.</p>        
</div>
<div class="one">
    <strong>This should not be first..</strong>
   <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.  </p>
</div>
<div class="two">
    <strong>This should be first..</strong>  
    <p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi auctor diam eget lorem vehicula aliquam. Aliquam ac tellus eget justo facilisis malesuada. Curabitur mi sapien.</p>        
</div>
<div class="three">
    <strong>This can be 2nd or third.</strong>
       <p> Aliquam ac tellus eget justo facilisis malesuada. Curabitur mi sapien, bibendum sed eleifend non, pretium eget arcu. Vivamus et augue nec quam rutrum tempor in in urna. </p>
</div>
</div> 
```

position:relative 表示其他元素将被此元素向下移动（无论如何它会出现在已向上移动的 DIV 的后面/前面）。

CSS：

```
.one, .three{
width: 100%;
margin-bottom: 10px;
background: yellow;     
float:right;
}
.two{    
position: absolute;
top: 0;
background: green;
left:0;
width:100%;
margin-bottom:10px;
} 
```

我意识到你说 HTML 不能被如此迂腐地改变 - 说这不是你问题的答案，但在我的情况下，我不能改变 HTML 结构的原因是因为我想要一个默认的移动布局，重新 -时下单`@media is screen and (min-width: 700px;)`。我可以使虚拟 div 消失（z-index 或其他），除非我需要它来重新组织布局（不依赖于 JS）。

[http://jsfiddle.net/UK6vK/83/](http://jsfiddle.net/UK6vK/83/)

# asp.net-mvc - 如何在 ASP.NET MVC 中序列化 JSON 接口？

> ID：12910404
> 
> 赞同：0
> 
> 时间：2012-10-16T08:24:00.837
> 
> 标签：asp.net-mvc, json

我尝试通过将对象转换为某个接口来过滤掉不必要的属性。接下来，我将其序列化为 JSON 对象，如下面的代码。

```
@{ 
    var program = ViewBag.Program as IProgram;
}

<script type="text/javascript">
    window.program = @Html.Raw(Json.Encode(program));
</script> 
```

但是，它仍然序列化原始对象中的所有属性，而不是仅序列化接口中定义的属性。

如何仅序列化当前对象类型中的属性，而不是序列化原始对象中的所有属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:44:27.920

当然使用视图模型：

```
@{ 
    var program = new 
    { 
        Foo = ViewBag.Program.Property1,
        Bar = ViewBag.Program.Property2
    };
}

<script type="text/javascript">
    window.program = @Html.Raw(Json.Encode(program));
</script> 
```

顺便说一句，这应该在您的控制器操作中完成，而不是使您的视图混乱。因此，与其在 ViewBag.Program 中传递这个对象，不如直接传递一个仅包含您需要序列化的属性的视图模型。

```
public ActionResult SomeAction()
{
    Program program = ...
    ViewBag.Program = new
    {
        Foo = ViewBag.Program.Property1,
        Bar = ViewBag.Program.Property2
    };
    return View();
} 
```

哦，使用真实的视图模型并将 ViewBag 剪掉。

# python - Python：系统功能是否太慢？

> ID：12910410
> 
> 赞同：0
> 
> 时间：2012-10-16T08:24:26.730
> 
> 标签：python, http, networking, flask

我有一个带有 3 台计算机的小型网络。我在第二台计算机上有一个 C++ 程序，它从网络接口读取数据包，而第一台计算机向它发送数据。我需要从第三台计算机上运行它。我写了一个小python脚本使用`flask`

```
import os
from flask import Flask
app = Flask(__name__)

@app.route("/")
def hello():
    os.system("./a.out &")

if __name__ == "__main__":
    app.run(host='0.0.0.0') 
```

问题是，使用启动可执行文件时似乎有一个小的延迟，`os.system()`并且第二台计算机丢失了一些数据包。有没有办法加快这个速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:29:03.333

我强烈建议使用某种队列。调用系统函数的高级 Web 服务器的性能可能无法预测（基于机器的繁忙程度等）。

如果您有一个在后台读取的进程进行通信并将数据包排队，并且 Web 端点从队列中读取，那将是最可靠的解决方案。

# android - 无法在 Eclipse Juno Mac 中安装新软件

> ID：12910411
> 
> 赞同：4
> 
> 时间：2012-10-16T08:24:27.337
> 
> 标签：android, eclipse, adt

我是 Eclipse 的新手，我正在尝试为它安装 Android ADT 插件。当我转到帮助 > 安装新软件时，我收到错误框“无法完成请求。此安装未正确配置软件更新。有关详细信息，请参阅错误日志”

错误日志：

```
Could not locate the running profile instance. The eclipse.p2.data.area and eclipse.p2.profile properties may not be set correctly in this application's config.ini file. 
```

有谁知道这意味着什么？安装 Android ADT 插件需要做什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-16T09:51:48.420

修复：我卸载了 Eclipse IDE for Java Developers 并安装了 Eclipse Classic。问题解决了！

# java - Java中字符串的不变性是否会导致内存不足

> ID：12910414
> 
> 赞同：1
> 
> 时间：2012-10-16T08:24:40.060
> 
> 标签：java, memory, memory-management, out-of-memory

我编写了一个简单的 Java 程序，它从数据库中读取一百万行并将它们写入文件。

该程序可以使用的最大内存为 512M。

我经常注意到这个程序运行了超过 500K 行的内存不足。

由于该程序是一个非常简单的程序，因此很容易发现它没有内存泄漏。该程序的工作方式是它从数据库中获取一千行，使用 Streams 将它们写入一个文件，然后去获取接下来的一千行。每行的大小各不相同，但没有一行很大。在程序运行时进行转储时，在堆上很容易看到较旧的字符串。这些堆中的字符串无法访问，这意味着它们正在等待收集垃圾。我也相信 GC 不一定在这个程序的执行过程中运行，这会使 String 在堆中的时间比它们应该的要长。

我认为解决方案是使用长字符数组（或字符串缓冲区）而不是使用字符串对象来存储数据库返回的行。假设我可以覆盖字符数组的内容，这意味着可以在多次迭代中使用相同的字符数组，而不必每次都分配新的空间。

伪代码：

1.  使用 new char[1000][1000] 创建一个数组数组；
2.  将数据库中的一千行填充到数组中。
3.  将数组写入文件。
4.  对接下来的一千行使用相同的数组

如果上面的伪代码解决了我的问题，那么实际上 String 类的不可变特性会伤害 Java 程序员，因为即使 String 不再使用，也没有直接的方法来声明 String 使用的空间。

这个问题有更好的选择吗？

PS：我没有单独进行静态分析。我使用 yourkit profiler 来测试堆转储。转储清楚地表明 96% 的字符串没有 GC 根，这意味着它们正在等待收集垃圾。另外我不在我的代码中使用 Substring。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:28:03.133

类的不变性`String`与`OutOfMemoryError`. 不变性意味着它永远不会改变，只能这样。

如果你的内存用完了，那只是因为*垃圾收集器*无法找到任何要*收集的**垃圾*。

 *在实践中，您可能在内存中保存了对太多字符串的引用（例如，您是否有任何类型的集合保存字符串，例如 List、Set、Map？）。您必须销毁这些引用以允许垃圾收集器完成其工作并释放一些内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:31:05.427

唯一可能导致 OutOfMemoryError 的字符串是如果您保留了更大字符串的一小部分。如果你这样做，从堆转储中应该很明显。

当您进行堆转储时，我建议您只查看活动对象，在这种情况下，您不需要的任何保留对象很可能是代码中的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T08:29:06.227

这个问题的简单答案是“不”。我怀疑你挂在参考文献上的时间比你想象的要长。

您是否正确关闭了这些流？你在`intern()`ing 那些字符串。如果字符串尚不存在，这将导致永久复制字符串，并占用*permgen*空间（未收集）。你在拿`substring()`一个更大的字符串吗？字符串使用享元模式，如果使用`substring()`. 有关更多详细信息，请参见[此处](https://stackoverflow.com/questions/2147783/why-does-appending-to-a-string-save-memory/2147803#2147803)。

你建议垃圾收集没有运行。该选项`-verbose:gc`将记录垃圾收集，您可以立即看到发生了什么。*

# android - 检查 imageView 的状态

> ID：12910415
> 
> 赞同：0
> 
> 时间：2012-10-16T08:24:43.157
> 
> 标签：android, android-layout

您好我想知道是否存在任何方法来检查我的 imageView 是否被同一布局中的其他图像视图覆盖？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:35:48.457

打开 xml 布局时签入`OutLine`选项卡`Graphical Layout`

# javascript - 具有多个级别对象的 Crockford 的 .supplant

> ID：12910430
> 
> 赞同：5
> 
> 时间：2012-10-16T08:25:46.213
> 
> 标签：javascript

```
/** Supplant **/
String.prototype.supplant = function(o) {
    return this.replace (/{([^{}]*)}/g,
        function (a, b) {
            var r = o[b];
            return typeof r === 'string' || typeof r === 'number' ? r : a;
        }
    );
}; 
```

Crockford 无疑是一位 JavaScript 大巫师，但他的原型在涉及多级对象时却有所欠缺。

我希望此功能涵盖多级对象替换，例如“{post.detailed}”，任何人都可以帮助我修改替代版本吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T08:32:03.497

那应该不会太难。请改用此替换功能：

```
function (a, b) {
    var r = o,
        parts = b.split(".");
    for (var i=0; r && i<parts.length; i++)
        r = r[parts[i]];
    return typeof r === 'string' || typeof r === 'number' ? r : a;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T08:35:00.153

我个人讨厌人们在 JavaScript 的原生类型上塞进自己的垃圾。如果我要写它，我会做以下事情......但是为什么不喜欢布尔值呢？

```
function supplant(str, data) {
    return str.replace(/{([^{}]*)}/g, function (a, b) {

        // Split the variable into its dot notation parts
        var p = b.split(/\./);

        // The c variable becomes our cursor that will traverse the object
        var c = data;

        // Loop over the steps in the dot notation path
        for(var i = 0; i < p.length; ++i) {

            // If the key doesn't exist in the object do not process
            // mirrors how the function worked for bad values
            if(c[p[i]] == null)
                return a;

            // Move the cursor up to the next step
            c = c[p[i]];
        }

        // If the data is a string or number return it otherwise do
        // not process, return the value it was, i.e. {x}
        return typeof c === 'string' || typeof c === 'number' ? c : a;
    });
}; 
```

顺便说一句，它不支持数组，你需要做一些额外的事情来支持它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-22T09:40:04.317

@Bergi 方法支持布尔值：

```
function (a, b) {
    var r = o,
        parts = b.split(".");
    for (var i=0; r && i<parts.length; i++)
        r = r[parts[i]];
    return typeof r === 'string' || typeof r === 'number' || typeof r === 'boolean' ? r : a;
} 
```

原始 Crockford 的 Supplant 方法，支持布尔值：

```
if (!String.prototype.supplant) {
    String.prototype.supplant = function (o) {
        return this.replace(/{([^{}]*)}/g,
            function (a, b) {
                var r = o[b];
                return typeof r === 'string' || typeof r === 'number' || typeof r === 'boolean' ? r : a;
            }
        );
    };
} 
```

祝你好运！

[https://gist.github.com/fsschmitt/b48db17397499282ff8c36d73a36a8af](https://gist.github.com/fsschmitt/b48db17397499282ff8c36d73a36a8af)

# jquery - 图片自动平移，肯烧伤效果

> ID：12910438
> 
> 赞同：0
> 
> 时间：2012-10-16T08:26:11.533
> 
> 标签：jquery

想找到一个可以平移图片的插件，但会自动执行此操作。

图片将调整大小以制作此动画，但剪裁右侧和底部。使用 Jquerys 内置的功能使它变得不稳定。

```
 jQuery('#banner').find('img').animate({
   width: 1183 + 'px',
   height: 628 + 'px'
   }, 65000, 'linear');
 }); 
```

这不好。

# c# - 降级到 .net 2.0 时出现 JScript 错误

> ID：12910440
> 
> 赞同：1
> 
> 时间：2012-10-16T08:26:14.013
> 
> 标签：c#, javascript, .net, jscript

我创建的 Web 应用程序项目有问题。最初我在 .net 3.5 中开发它，一切都很好。从那以后，我被告知它需要在 .net 2.0（*叹气*）中，这不仅导致我编写的 LINQ 内容出现问题，而且现在还产生了一个奇怪的 JScript 错误。每当我单击 UpdatePanel 中的按钮时都会发生错误。错误出现在 ScriptResource.axd 文件之一中。错误是：

```
Microsoft JScript runtime error: Unable to get value of the property 'PRM_ParserErrorDetails': object is null or undefined 
```

并发生在行

```
this._endPostBack(this._createPageRequestManagerParserError(String.format(Sys.WebForms.Res.PRM_ParserErrorDetails,parserErrorDetails)),sender); 
```

页面是使用 MasterPage 创建的，MasterPage 是包含 UpdatePanel 的页面以及 UpdateProgress 控件。自从更改为 .net 2.0 后，就出现了这个错误。当我更改它时，我将 System.Web.Extensions 程序集添加到 web.config 并注册了来自同一程序集的控件。我在网上进行了研究，似乎找不到任何有解决方案或类似问题的人。有什么建议或答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:40:37.693

好的，像往常一样，我在发布后几乎立即解决了问题。问题似乎是我的 web.config 文件中缺少一些部分。我已经使用注册了控件

```
<pages>
  <controls>
    <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </controls>
</pages> 
```

以及使用的程序集

```
<assemblies>
    <add assembly="System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
</assemblies> 
```

在 system.web 部分内，但我也错过了：

```
<sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
  <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
    <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" allowDefinition="MachineToApplication"/>
    <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
      <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" allowDefinition="Everywhere" />
      <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" allowDefinition="MachineToApplication" />
      <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" allowDefinition="MachineToApplication" />
    </sectionGroup>
  </sectionGroup>
</sectionGroup> 
```

在配置中的 configSections 部分内，还有

```
<httpHandlers>
  <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
  <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
  <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" validate="false"/>
</httpHandlers>
<httpModules>
  <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
</httpModules> 
```

在 system.web 中。

# jquery - jQuery：nextAll 独立于父母

> ID：12910447
> 
> 赞同：1
> 
> 时间：2012-10-16T08:26:23.350
> 
> 标签：jquery

我正在构建一个小型灯箱插件（只是为了好玩），如果用户按下一个键，它应该打开（模拟点击）具有相同“rel”属性的下一个链接。

```
 .nextAll('.box[rel="'+boxed+'"]').eq(0).click(); 
```

上面的代码适用于以下示例：

```
<a href="/1.jpg" class="box" rel="box-abc123">One</a>
<a href="/2.jpg" class="box" rel="box-abc123">Two</a>
<a href="/3.jpg" class="box" rel="box-abc123">Three</a> 
```

但是如果图像在不同的父元素中，比如……</p>

```
<header><a href="/1.jpg" class="box" rel="box-abc123">One</a></header>
<section><a href="/2.jpg" class="box" rel="box-abc123">Two</a></section>
<footer><a href="/3.jpg" class="box" rel="box-abc123">Three</a></footer> 
```

......它不起作用。当然我可以使用 parent() 跳转，但我想构建它完全独立于父元素（因为并不总是有一些）。有没有办法找到独立于任何父元素的下一个元素？有谁知道如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:53:23.583

如果您不想使用父元素，请使用`slice`获取下一个所有元素

```
$('a.box[rel="'+boxed+'"]').slice($('a.box[rel="'+boxed+'"]').index(this)) 
```

工作小提琴：http: [//jsfiddle.net/aaWHt/2/](http://jsfiddle.net/aaWHt/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:22:44.677

我有一个类似的问题 - 基本上试图获取集合中的下一个元素，而不管它们出现在 dom 树中的什么位置。最好的解决方案是最初循环这些元素，并给它们一个`id`，然后可以用来选择下一个元素。

```
$boxSelector = $('.box[rel="box-abc123"]');

$boxSelector.each(function(i, v) {
  $(this).prop('id', 'box-' + ++i);
}); 
```

然后，您可以通过执行类似于此的操作来获得`id`下一个：`.box`

```
var nextId = '';
var boxLength = $boxSelector.length;

$boxSelector.on('click', function() {
  var thisIndex = parseInt(this.id.replace(/[^\d]+/, ''));
  nextId = (thisIndex == boxLength) ? 1 : thisIndex+1;
}); 
```

然后，您可以使用以下方法选择下一个元素：

```
$('#box-' + nextId); 
```

我知道这并不能直接回答您的问题，但您应该能够应用相同的原则来达到预期的结果。

# python - 如何在 Linux 下读取 GPS 数据？

> ID：12910452
> 
> 赞同：1
> 
> 时间：2012-10-16T08:26:35.870
> 
> 标签：python, linux, gps, serial-port

我之前用win7从com口读取GPS数据。从现在开始，我想在 Ubuntu 下读取数据，但相同的代码不起作用。这是我的代码：

```
import serial, sys, time, threading
from datetime import datetime, timedelta    

class MeasureModule():
    def __init__(self, port, baudrate, sync_time=0, sync_nr=0):
        self.port = port;
        self.baudrate = baudrate;

    def start(self):
        try:
            self.serial = serial.serial_for_url(self.port, self.baudrate, timeout=1)
        except AttributeError:            
            self.serial = serial.Serial(self.port, self.baudrate, timeout=1)
        start = time.clock()
        while(time.clock()-start<11):     
            data  = self.readline()        
            print(data)

        self.stop();                    

    def stop(self):
        self.serial.close()   

    def readline(self, timeout=1, endline='\n'):
        buff='';
        try:            
            tic = time.clock()
            ch = self.character(self.serial.read(1))

            # you can use if not ('\n' in buff) too if you don't like re
            while ((time.clock() - tic) < timeout) and (not ch in endline):
                buff += ch                
                ch = self.character(self.serial.read(1))

        except serial.SerialException, e:
            return buff

        return buff

    def character(self,b):
        if sys.version_info >= (3, 0):
            return b.decode('latin1')
        else:
            return b 
```

我通过以下方式调用了该函数：

```
for i in range (0,4):
    try:    
        print "Starting measurement /dev/ttyACM%d" % i
        gs = GPSModule('/dev/ttyACM%d' % i, 4800, 1, 1)
        gs.start()
    except:
        print "Unable to connect"

run@FXR:/dev$ dmesg  | grep tty
[    0.000000] console [tty0] enabled
[    4.764464] cdc_acm 2-1.6:1.1: ttyACM0: USB ACM device
[    4.767620] cdc_acm 2-1.6:1.3: ttyACM1: USB ACM device
[    4.771525] cdc_acm 2-1.6:1.9: ttyACM2: USB ACM device
[    4.808622] usb 2-1.4.4: pl2303 converter now attached to ttyUSB0 
```

但我没有收到任何东西。

我怎样才能在 Ubuntu 下做同样的事情？如何从 com 端口读取 GPS 数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T09:27:17.997

好的！

这段代码非常丑陋和陈旧，我在 2006 年这样做了，当时我还是个初学者，而且很天真。

现在宝贝步骤！

1.  使用命令 dmesg 或检查您的控制台消息以了解您的 GPS 连接了哪个 USB 设备。在我的情况下是 USB0

2.  之后玩这个代码

* * *

```
import serial
import socket

ser = serial.Serial('/dev/ttyUSB0', 4800, timeout=1)
latitude = ''
longitude = ''
def readgps(latitude,longitude):
    """Read the GPG LINE using the NMEA standard"""
    while True:
        line = ser.readline()
        if "GPGGA" in line:
            latitude = line[18:26] #Yes it is positional info for lattitude
            longitude = line[31:39] #do it again
            return(latitude,longitude)
    print "Finished" 
```

* * *

当然你必须调用函数；）请不要忘记。

请记住，gps 始终在发送数据和通信。

出于教育目的，请在 ser.readline() 之后执行：打印行

所以你可以看到整个数据不仅经纬度坐标。

记住 USB GPS 只是一个花哨的串行设备；）这段代码非常简单，我相信你会理解并做出更好的代码/程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T09:09:09.877

你没有用你的程序打开 /dev/ttyUSB0 。您的 GPS 模块是如何插入的？

如果你这样做会发生什么：

```
stty -F /dev/ttyACM0 4800
cat /dev/ttyACM0 
```

在控制台中？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-18T02:02:33.730

您可能必须将自己添加到 gps 所在的组中。这是很晚才发布的，但我最近尝试在 linux 上配置一个 usb gps puck，我不得不`sudo adduser -aG USERMAME dialout`在终端上做。这只是将用户添加到 gps 所在的组（拨出）。如果您不知道该组，cd 到`/dev`（在终端中）并输入 ll（或 ls -Flh 如果这不起作用）这将显示所有权限和组。有一列特别有趣；这是最后一列（我想倒数第三个——抱歉，我现在在 Windows 上），您可能会在名为“拨出”的列表中看到大约六七个项目。如果你的文件——你的usb——出现在那里，那就是组。否则，只需寻找团队和您`sudo adduser...`自己。

确保您先注销，然后 - 重新登录后 - 再次进入终端并键入`cat /dev/ttyACM0`. 如果您仍然什么也看不到，那么您需要配置并告诉它转储其信息的正确速率（波特率）；所以，输入（正如其他人提到的）`stty -F /dev/ttyACM0 4800`将波特率配置为 4800。你应该用谷歌搜索正确的波特率，但最后一个命令本质上是说，拿这个文件（-F）并以这个速率（4800）跟我说话。

我希望这对某人有所帮助，因为我确实在让我的 usb gps puck 在 linux-mint 上工作时遇到了一些麻烦。祝所有 linux 用户好运（我是最近的转换者）。:D

# java - Java遍历所有目录并找到一个文件

> ID：12910456
> 
> 赞同：0
> 
> 时间：2012-10-16T08:26:54.130
> 
> 标签：java, recursion

我必须搜索可以在任何目录或驱动器中的文件。它应该与任何操作系统兼容。当我用谷歌搜索时，大多数代码都会遍历特定目录而不是完整的文件系统。有没有办法有效地做到这一点？任何帮助或建议将不胜感激。

下面是我从[http://www.mkyong.com/java/how-to-traverse-a-directory-structure-in-java/](http://www.mkyong.com/java/how-to-traverse-a-directory-structure-in-java/)获得的代码，但我们必须传递一些目录作为参数。有没有办法概括得到所有的位置？

```
public static void main (String args[]) {

    displayIt(new File("C:\\"));
}

public static void displayIt(File node){

    System.out.println(node.getAbsoluteFile());

    if(node.isDirectory()){
        String[] subNote = node.list();
        for(String filename : subNote){
            displayIt(new File(node, filename));
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:30:30.043

Apache Commons-IO 是这种操作的一个很好的 API。对于 Unix 系统，您可以只使用 root "/"，但这不适用于 windows，因此您必须询问所有 root 并遍历它们：

```
File[] roots = File.listRoots();

Collection<File> files = new ArrayList<File>();    

for(File root : roots) {
    files.addAll(FileUtils.listFiles(
      root, 
      new RegexFileFilter(<your regex filter>), 
      DirectoryFileFilter.DIRECTORY
    ));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:30:38.060

这种代码片段将列出目录和子目录中的所有文件。您不必将任何文件添加到 allFiles 中，您可以在那里进行检查。由于您还没有提供任何代码（所以我假设您还没有尝试过任何东西）我会让您更新它；）

```
private void addFiles(File file, Collection<File> allFiles) {
    File[] files = file.listFiles();
    if (files != null) {
       for (File f : files) {
           allFiles.add(f);
           addFiles(f, allFiles);
       }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:51:47.883

如果你想通过递归来做到这一点，这里是 DFS 的代码，代码可能不起作用（我从不测试它），并且它没有优化，但它可能会给你一些想法如何解决你的问题

```
File find(String directoryName, String pattern)
{
 File currentDirectory = loadFile(directoryName);

for (String name: currentDirectory .list())
{
File children = loadFile(name)

if (children.isDirectory())
{
 File file = find(name, pattern)
 if (file !=null)
 {
  return file;
 }
}
else
{
 if (match(name,pattern)
  {
   return children;
  }
}
}
return null;

} 
```

# windows - 从 VSS 复制文件

> ID：12910457
> 
> 赞同：0
> 
> 时间：2012-10-16T08:27:04.120
> 
> 标签：windows, copy, snapshot, volume-shadow-service, sector

我正在开发一个 Windows VSS 应用程序，我需要一些关于它的帮助。创建快照后，如何使用 C/C++ 从卷快照中复制文件或文件的块（扇区），最好是文件块。有人可以指导我吗，或者可以指导我做同样的任何样本或文档。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:51:53.463

您可以使用常规函数访问 VSS 快照项

`CreateFile()`打开文件

`ReadFile()`或`BackupRead()`读取/备份其数据

只有项目的根路径会改变

（例如，**\\?\GLOBALROOT\Device\HarddiskVolumeShadowCopyX\**而不是**C:\**）

你想确切地知道什么？

# applet - Windows 商店应用程序中的 Java 小程序

> ID：12910463
> 
> 赞同：0
> 
> 时间：2012-10-16T08:27:28.957
> 
> 标签：applet, windows-8

我有一个 java 小程序，我正在开发一个 Windows 商店应用程序。我想将我的小程序集成到这个应用程序中。这可行吗？如果是的话……你能告诉这个过程吗？

谢谢，哈沙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:00:29.197

您将无法在 Windows 应用商店应用程序中运行此程序，因为 WebView（或一般 IE 10 的非桌面版本）不允许使用插件（您需要安装 Java） - Flash 对某些站点除外）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:02:23.213

您可能应该能够将您的 Java Applet 运行到 a 中`WebView`，但我不确定这是否是一个好习惯。您应该将您的 java 小程序转换为`HTML5/JavaScript`应用程序或 C# 应用程序以获得最佳性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-26T14:57:21.880

目前是不可能的。当您安装 Java 时，您一定错过了 Java 在 Metro 中不起作用。

# objective-c - 从捏合位置缩放在 CGContext 上绘制的图像

> ID：12910465
> 
> 赞同：4
> 
> 时间：2012-10-16T08:27:37.050
> 
> 标签：objective-c, zooming, cgcontext

这个问题是不久前另一个 SO 问题的后续问题：[zooming using pinch but not using transform methods](https://stackoverflow.com/questions/10532113/zooming-using-pinch-but-not-using-transform-methods)。我让缩放几乎完美地工作，但是它仍然会使绘制的图像“跳跃”，正如我一直所说的那样。代码中最重要的部分如下：

当观察到捏事件时，调用此方法：

[代码片段 1]

```
- (IBAction)handlePinchGesture:(UIGestureRecognizer *)sender {
    float previousZoomLevel = zoomLevel;
    UIPinchGestureRecognizer *pinch = (UIPinchGestureRecognizer *)sender;

    float zoomIncreaseFactor = [self getZoomFactor:[pinch scale]]; //= 13 or 7 or 10
    float estimatedDelta = (previousZoomLevel * zoomIncreaseFactor) / 150;

    if ([pinch scale] > previousScale) {
        zoomLevel += estimatedDelta;
    }

    if ([pinch scale] < previousScale) {
        zoomLevel -= estimatedDelta;
    }

    previousScale = [pinch scale];

    if (zoomLevel < MIN_ZOOM_LEVEL) {
        zoomLevel = MIN_ZOOM_LEVEL;
    }

    if (zoomLevel > MAX_ZOOM_LEVEL) {
        zoomLevel = MAX_ZOOM_LEVEL;
    }

    CGPoint loc = [pinch locationInView:self];

    NSLog(@"loc: {%.1f,%.1f}, lastPinchLoc: {%.1f,%.1f}", loc.x,loc.y,lastPinchLocation.x,lastPinchLocation.y);

    //uncomment the below part to always zoom from the first zoom location.
    //if (lastPinchLocation.x != 0 && lastPinchLocation.y != 0) {
        //loc.x += lastPinchLocation.x - loc.x;
        //loc.y += lastPinchLocation.y - loc.y;
    //}

    //NSLog(@"newLastPinchLocation: {%.1f,%.1f}", loc.x,loc.y);

    lastPinchLocation = loc;

    hasBeenMoved = YES;

    if (zoomLevel != previousZoomLevel) {
        [self setNeedsDisplay];
    }
} 
```

当我在整个屏幕上捏合时，上面的 NSLog 会给出以下打印：

```
2012-10-16 10:15:19.357 App[2609:907] loc: {147.0,232.0}, lastPinchLoc: {0.0,0.0}
2012-10-16 10:15:19.391 App[2609:907] loc: {147.0,231.0}, lastPinchLoc: {147.0,232.0}
2012-10-16 10:15:19.436 App[2609:907] loc: {148.0,232.0}, lastPinchLoc: {147.0,231.0}
2012-10-16 10:15:19.457 App[2609:907] loc: {148.0,232.0}, lastPinchLoc: {148.0,232.0}
2012-10-16 10:15:19.474 App[2609:907] loc: {148.0,233.0}, lastPinchLoc: {148.0,232.0}
2012-10-16 10:15:19.507 App[2609:907] loc: {147.0,233.0}, lastPinchLoc: {148.0,233.0}
2012-10-16 10:15:19.573 App[2609:907] loc: {103.0,355.0}, lastPinchLoc: {147.0,233.0}
2012-10-16 10:15:20.324 App[2609:907] loc: {585.0,710.0}, lastPinchLoc: {103.0,355.0}
2012-10-16 10:15:20.340 App[2609:907] loc: {584.0,709.0}, lastPinchLoc: {585.0,710.0}
2012-10-16 10:15:20.356 App[2609:907] loc: {584.0,710.0}, lastPinchLoc: {584.0,709.0}
2012-10-16 10:15:20.374 App[2609:907] loc: {584.0,710.0}, lastPinchLoc: {584.0,710.0}
2012-10-16 10:15:20.407 App[2609:907] loc: {583.0,710.0}, lastPinchLoc: {584.0,710.0}
2012-10-16 10:15:20.456 App[2609:907] loc: {512.0,811.0}, lastPinchLoc: {583.0,710.0}
2012-10-16 10:15:21.056 App[2609:907] loc: {645.0,163.0}, lastPinchLoc: {512.0,811.0}
2012-10-16 10:15:21.090 App[2609:907] loc: {647.0,164.0}, lastPinchLoc: {645.0,163.0}
2012-10-16 10:15:21.107 App[2609:907] loc: {647.0,165.0}, lastPinchLoc: {647.0,164.0}
2012-10-16 10:15:21.156 App[2609:907] loc: {602.0,249.0}, lastPinchLoc: {647.0,165.0}
2012-10-16 10:15:21.839 App[2609:907] loc: {153.0,702.0}, lastPinchLoc: {602.0,249.0}
2012-10-16 10:15:21.856 App[2609:907] loc: {157.0,703.0}, lastPinchLoc: {153.0,702.0}
2012-10-16 10:15:21.874 App[2609:907] loc: {159.0,704.0}, lastPinchLoc: {157.0,703.0}
2012-10-16 10:15:21.890 App[2609:907] loc: {160.0,704.0}, lastPinchLoc: {159.0,704.0}
2012-10-16 10:15:21.906 App[2609:907] loc: {123.0,796.0}, lastPinchLoc: {160.0,704.0}
2012-10-16 10:15:21.923 App[2609:907] loc: {125.0,794.0}, lastPinchLoc: {123.0,796.0}
2012-10-16 10:15:22.706 App[2609:907] loc: {368.0,303.0}, lastPinchLoc: {125.0,794.0}
2012-10-16 10:15:22.723 App[2609:907] loc: {369.0,307.0}, lastPinchLoc: {368.0,303.0}
2012-10-16 10:15:22.725 App[2609:907] loc: {369.0,307.0}, lastPinchLoc: {369.0,307.0}
2012-10-16 10:15:22.739 App[2609:907] loc: {371.0,312.0}, lastPinchLoc: {369.0,307.0}
2012-10-16 10:15:22.756 App[2609:907] loc: {374.0,312.0}, lastPinchLoc: {371.0,312.0}
2012-10-16 10:15:22.773 App[2609:907] loc: {338.0,392.0}, lastPinchLoc: {374.0,312.0} 
```

就在 CGContext 上绘制项目之前，将 x 和 y 放入此方法中，然后我在返回的位置上绘制项目。类变量“zoomTouchLocation”与上述代码段中的“lastPinchLocation”具有相同的值。

[代码片段2]

```
- (CGPoint)handleCoordinatesX:(float)x y:(float)y {
    x -= zoomTouchLocation.x;
    y -= zoomTouchLocation.y;

    x = x * zoomLevel;
    y = y * zoomLevel;

    x += zoomTouchLocation.x;
    y += zoomTouchLocation.y;

    return CGPointMake(x, y);
} 
```

如果我每次都捏在大致相同的位置，它会按预期工作，但是当我在整个屏幕上捏时，图像会像疯了一样跳来跳去。

现在基本上我的问题是，是否有人可以帮助我解决这个“跳跃”问题，并让图像从我放大的位置缩放而不跳跃。如果您需要更多信息，请在下面的评论中提问。

（而且我知道我的代码发生跳跃是很正常的，我只是找不到阻止它这样做的方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:36:09.443

没有整个代码很难提供帮助，但您应该尝试将 view.layer.anchorPoint 设置为您的 pinchLocation（如果尚未完成）。像这样，当变换完成后，这个点就不动了。对于旋转或缩放非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T04:24:31.173

应在离散事件期间跟踪和/或重置您的缩放增量和坐标。也就是说，您需要了解并使用`UIPinchGestureRecognizer.state`来确定要重置跟踪逻辑和增量的位置，以及何时更新您为缩放位置跟踪的坐标。

* * *

这方面的一个基本说明来自 Touches 示例：

```
- (void)scalePiece:(UIPinchGestureRecognizer *)gestureRecognizer
{
    [self adjustAnchorPointForGestureRecognizer:gestureRecognizer];

    if ([gestureRecognizer state] == UIGestureRecognizerStateBegan || [gestureRecognizer state] == UIGestureRecognizerStateChanged) {
        [gestureRecognizer view].transform = CGAffineTransformScale([[gestureRecognizer view] transform], [gestureRecognizer scale], [gestureRecognizer scale]);
        [gestureRecognizer setScale:1];
    }
} 
```

# android - Android Spinner：显示 Spinner 弹出窗口时如何淡化背景（活动布局）？

> ID：12910466
> 
> 赞同：0
> 
> 时间：2012-10-16T08:27:38.927
> 
> 标签：android, background, spinner

默认情况下，当显示带有选项列表的弹出窗口时，Spinner 不会淡化下面的活动布局。

DialogFragment 自动淡化下面的活动，我希望我的所有微调器实例具有相同的行为。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:45:51.523

好吧，看来我自己找到了答案：View 类中有一个方法[setAlpha()](http://developer.android.com/reference/android/view/View.html#setAlpha%28float%29)。

它只需要绑定到 Spinner 点击事件

# awk - 通过 awk 从字符串中删除一个空格

> ID：12910468
> 
> 赞同：10
> 
> 时间：2012-10-16T08:27:46.493
> 
> 标签：awk

如何使用 awk 从字符串中删除名称和姓氏之间的空格？大多数示例都是关于将数据从命令行重定向到 awk，但我需要在 awk 脚本中操作字符串。

转换这个：

```
"steve john" 
```

到：

```
"stevejohn" 
```

我有一个字符串变量，我要求用户在 awk 脚本中输入。我需要删除空格。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-16T08:31:30.873

`gsub`是你的朋友。以下命令基本上对正则表达式（在本例中为单个空格）进行全局替换，在目标`$0`（整行）上将其替换为空字符串。

```
pax> echo "steve john" | awk '{ gsub (" ", "", $0); print}'
stevejohn 
```

您可以使用任何目标，包括用户的一个输入：

```
pax> awk 'BEGIN {getline xyzzy ; gsub(" ","", xyzzy) ; print xyzzy}'
hello there my name is pax
hellotheremynameispax 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-16T08:30:01.267

使用`sed`：

```
$ echo "steve john" | sed 's/ //g'
stevejohn 
```

如果必须使用`awk`，请执行以下操作：

```
$ echo "steve john" | gawk '{print $1 $2}'
stevejohn 
```

**编辑：**

在 bash 脚本中，您可以执行以下操作：

```
s="steve john" # user input
t=$(echo $s | gawk '{print $1 $2}')
echo $t 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T08:38:49.460

```
echo "john smith aaa " |\
awk 'BEGIN {FS=" "; OFS=""} {for(i=1;i<=NF;++i) {out = out OFS $i}} END {print out;}' 
```

# json - 在 JSON 中搜索多个值，而不是使用库

> ID：12910469
> 
> 赞同：0
> 
> 时间：2012-10-16T08:27:53.637
> 
> 标签：json, search

我希望能够在以下 JSON 对象中搜索包含键“位置”的对象，然后返回一个数组或 json 对象，其中包含该人的“名称”加上该人的位置值。

样品退货：

> var matchesFound = [{Tom Brady, New York}, {Donald Steven,Los Angeles}];

```
var fbData0 = {
   "data": [
      {
         "id": "X999_Y999",
         "location": "New York",
         "from": {
            "name": "Tom Brady", "id": "X12"
         },
         "message": "Looking forward to 2010!",
         "actions": [
            {
               "name": "Comment",
               "link": "http://www.facebook.com/X999/posts/Y999"
            },
            {
               "name": "Like",
               "link": "http://www.facebook.com/X999/posts/Y999"
            }
         ],
         "type": "status",
         "created_time": "2010-08-02T21:27:44+0000",
         "updated_time": "2010-08-02T21:27:44+0000"
      },
      {
         "id": "X998_Y998",
         "location": "Los Angeles",
         "from": {
            "name": "Donald Steven", "id": "X18"
         },
         "message": "Where's my contract?",
         "actions": [
            {
               "name": "Comment",
               "link": "http://www.facebook.com/X998/posts/Y998"
            },
            {
               "name": "Like",
               "link": "http://www.facebook.com/X998/posts/Y998"
            }
         ],
         "type": "status",
         "created_time": "2010-08-02T21:27:44+0000",
         "updated_time": "2010-08-02T21:27:44+0000"
      }
   ]
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-05T07:12:35.217

@vsiege - 您可以使用这个 javascript 库 ( [http://www.defiantjs.com/](http://www.defiantjs.com/) ) 来搜索您的 JSON 结构。

```
var fbData0 = {
   ...
},
res = JSON.search( fbData0, '//*[./location and ./from/name]' ),
str = '';

for (var i=0; i<res.length; i++) {
    str += res[i].location +': '+ res[i].from.name +'<br/>';
}

document.getElementById('output').innerHTML = str; 
```

这是一个工作小提琴；
[http://jsfiddle.net/hbi99/XhRLP/](http://jsfiddle.net/hbi99/XhRLP/)

DefiantJS 使用“search”方法扩展了全局对象 JSON，并使得使用 XPath 表达式查询 JSON 成为可能（XPath 是标准化的查询语言）。该方法返回一个包含匹配项的数组（如果没有找到则为空数组）。

您可以通过在此处粘贴 JSON 来测试 XPath 表达式：http:
[//www.defiantjs.com/#xpath_evaluator](http://www.defiantjs.com/#xpath_evaluator)

# sql-server - 在 MSSQL 触发器中使用 POST 方法

> ID：12910470
> 
> 赞同：8
> 
> 时间：2012-10-16T08:27:55.510
> 
> 标签：sql-server, post

当触发器执行时，我需要向外部 URL 发布（HTTP 方法）一些信息*。*我知道使用触发器时有很多安全和性能影响，所以我担心这里不是进行这种处理的地方。但无论如何，我发布这个是为了获得一些关于如何解决问题的反馈或想法。一些考虑：

*   触发器中触发的事务可以是异步的。
*   该过程必须照顾授权
*   最终 URL 是 Internet 上的 php 脚本。

真正触发此执行的应该是向表中插入或更新一条记录，因此我必须使用此触发器，因为我无法触及（第三方）应用程序。

附带说明一下，*Service Broker*是否值得考虑？欢迎任何想法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T08:34:51.320

你是对的，这不是你想在触发器中做的事情。在你的应用程序中你最不想做的就是在每个更新/插入/删除中引入 HTTP 请求的延迟，即使一切正常，这也会非常明显。但是当事情运行不好时，它会运行*得很*糟糕：当 HTTP 资源出现可用性问题时，添加的耦合会导致您的应用程序失败，更糟糕的是与回滚相关的正确性问题（您执行触发器的事务可能会回滚，但HTTP 调用已经完成）。

这就是为什么引入一个将触发器与 HTTP 调用分离的层至关重要的原因，这是通过队列完成的。表是用作队列，还是 Service Broker 队列，甚至是 MSMQ 队列，都由您来决定。最简单的解决方案是将[表用作队列](http://rusanu.com/2010/03/26/using-tables-as-queues/)：

*   触发器将要进行的 HTTP 调用的请求排入队列（插入）
*   在运行触发器的事务提交后，该请求可用于出列
*   监控（轮询）队列的外部应用程序获取请求并发出 HTTP 调用

Service Broker 相对于自定义表作为队列的优势在于[内部激活](http://msdn.microsoft.com/en-us/library/ms171617%28v=sql.105%29.aspx)，这将允许您的 HTTP 处理代码在队列中有要处理的项目时按需运行，而不是轮询。但是从引擎内部通过 SQLCLR 进行 HTTP 调用是非常不明智的。外部进程对于访问 HTTP 之类的东西要好得多，因此不需要增加 Service Broker 的复杂性。

# git - Egit 传输错误

> ID：12910474
> 
> 赞同：1
> 
> 时间：2012-10-16T08:27:59.660
> 
> 标签：git, github, egit, zend-studio, gitstack

我已经在本地服务器上建立了一个 gitstack repo，我还注册了一个免费的 github 帐户，只是为了看看它是什么样的。

但是，当我尝试从本地存储库或 git hub 存储库克隆存储库时，我收到此错误：

```
Transport Error
Cannot List the available branches
Reason:
Exception caught during execution of ls-remote command 
```

这是什么意思，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:23:06.220

在 Egit 遇到这个问题后，我又回到使用 GitBash 来尝试创建、推送和拉取存储库。然后我收到了这个错误：

Git Bash 错误：

```
fatal: http://xx.xx.x.xxx/mjtest.git/info/refs not found: did you run git update-server-info on the server? 
```

Egit错误：

```
Transport Error
Cannot List the available branches
Reason:
Exception caught during execution of ls-remote command 
```

我发现解决 GitBash 和 Egit 错误的方法是创建一个名为的空文件`git-daemon-export-ok`并将其直接放入`xxxx.git`服务器上存储库的根目录中。

**解决方案解释：**

我在 gitstack 中建立了一个名为的存储库，`mjtest`并为自己创建了一个新的用户名和密码，并将自己添加到具有读写访问权限的存储库中。

这就是我在 GitBash 中所做的事情：

我设置了我的本地仓库：

```
git config --global user.name "XXXXXXXX"
git config --global user.email XXXXXXXX
mkdir ~/mjtest
cd ~/mjtest
git init
touch README 
```

然后我创建空文件：

```
touch git-daemon-export-ok 
```

所以现在我们有一个本地存储库，其中有一个名为的文件`README`和我们的`git-daemon-export-ok`文件。我们现在需要复制`git-daemon-export-ok`文件并将其直接放入`mjtest.git`服务器中的文件夹中。完成后，`git-daemon-export-ok`可以从本地存储库中删除文件，因为它只需要在服务器上。

添加、提交和推送：

```
git add README
git commit -m 'first commit'
git remote add origin http://XX.XX.X.XXX/mjtest.git
git push origin master 
```

这应该可以工作，您应该能够进入您的 gitstack 服务器并查看您的第一次提交。

然后我回到 Egit 并克隆了`http://XX.XX.X.XXX/mjtest.git`存储库，它工作了。

现在在 GitBash 和 Egit 中都可以进行推送和拉取工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:39:56.013

请查看 [Can't clone remote git repository with EGit](https://stackoverflow.com/questions/9481818/cant-clone-remote-git-repository-with-egit)有几个潜在的原因。在我必须处理该错误消息的情况下，这是 Eclipse 中给出的错误 .ssh 目录，或者 ssh 目录中完全缺少 SSH 密钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-13T14:59:24.573

克隆远程存储库时还有另一个与传输相关的可能错误。

从还没有任何分支或标签但有其他引用的存储库克隆会导致“ `remote transport reported error`”，这已在 Git 2.36（2022 年第二季度）中更正。

请参阅[Jonathan Tan ( ) 的](https://github.com/jhowtan)[提交 dccea60](https://github.com/git/git/commit/dccea605b6c30262a6a44bde8d10b0a20c331d87)（2022 年 1 月 24 日[）](https://github.com/jhowtan)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([d991df4 提交中](https://github.com/git/git/commit/d991df4bf6259bc53223feb71957c961b7b8fa84))^(，2022 年 2 月 9 日）)[`jhowtan`](https://github.com/jhowtan)
^([`gitster`](https://github.com/gitster))

> ## [`clone`](https://github.com/git/git/commit/dccea605b6c30262a6a44bde8d10b0a20c331d87)：支持不寻常的远程参考配置
> 
> ^(签字人：Jonathan Tan)

> 当使用协议 v0 或 v1 克隆无分支和无标记但非无引用远程时，Git 调用`transport_fetch_refs()`空引用列表。
> 这会使克隆失败并显示消息“ `remote transport reported error`”。
> 
> Git 应该避免调用`transport_fetch_refs()`，就像它在遥控器没有反射的情况下一样。
> 因此，请教 Git 这样做。
> 
> 在协议 v2 中，这不会发生，因为客户端传递了 ref-prefix 参数，这些参数会过滤掉 ref 广告中的非分支和非标签，从而使远程显示为空。
> 
> 请注意，此错误涉及逻辑[`builtin/clone.c`](https://github.com/git/git/blob/dccea605b6c30262a6a44bde8d10b0a20c331d87/builtin/clone.c)，仅影响克隆，不影响获取。

# php - 使用 ZF 1.9 上传文件导致没有数据

> ID：12910475
> 
> 赞同：0
> 
> 时间：2012-10-16T08:28:00.573
> 
> 标签：php, zend-framework, extjs

我目前混合使用 extJS4 和 Zend Framework 1.9（文件上传页面的用户界面是用 extJS4 编程的，而应用程序本身是用 Zend Framework 1.9 编程的）。

我目前遇到的现象是，我从用户界面获取的数据看起来是正确的，但是让 zend 框架确认数据已发送到 php 页面的唯一方法是使用 getRawBody()。isPost() 结果为真，但 getPost() 不返回任何数据，而且 $_REQUEST 根本不返回任何数据。我正在使用 $upload=new \Zend_File_Transfer_Adapter_Http(); 在程序中处理传入的文件。但是： $upload->getFileInfo(); 也根本不返回任何数据（apache 和 php 的错误日志没有显示任何异常。）

getRawBody 返回以下字符串（我已将其放入日志文件中，因此 string(776) 可能是我的日志记录功能的一部分）：

```
string(776) "Content-Type: multipart/form-data; boundary=---------------------------2384732604503
Content-Length: 667

-----------------------------2384732604503
Content-Disposition: form-data; name="combobox-1327-inputEl"

2
-----------------------------2384732604503
Content-Disposition: form-data; name="filefield-1328-inputEl"; filename="mytest. - Kopie.txt"
Content-Type: text/plain

testtest
-----------------------------2384732604503
Content-Disposition: form-data; name="filefield-1329-inputEl"; filename="mytest..txt"
Content-Type: text/plain

testtest
-----------------------------2384732604503
Content-Disposition: form-data; name="filefield-1330-inputEl"; filename=""
Content-Type: application/octet-stream

-----------------------------2384732604503--
" 
```

我的问题是这种行为的原因可能是什么（或者我在这里做错了什么）。（注：我使用 XAMPP 和 PHP 5.4 作为 Web 服务器）

我现在用另一种变体进行了尝试：

```
 <html>
  <body>
    <form action="/uploadmodule/index/save-upload/" method="post" enctype="multipart/form-data">
      Name: <input type="text" name="imageName" />
      Image: <input type="file" name="image" />
        <input type="submit" value="submit" />
    </form>
  </body>
</html> 
```

当我使用它时......所有功能都应该......只有当我使用 extJS4 uploadvariant 时它才不起作用。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:04:05.100

现在问题已经解决了。这不是我最初怀疑的 php 端/zend 框架端的问题，而是由 extJS 代码中的参数引起的。

$_REQUEST、$_POST、$_GET 为空，只有 getRawBody() 得到“Post”的现象是由以下参数设置为 true 造成的：

```
Ext.data.writer.JsonView.prototype.encode = true; 
```

一旦参数设置为false：

```
Ext.data.writer.JsonView.prototype.encode = false; 
```

$_POST, ... 再次被填充。

# android - Android TableLayout CustomRow

> ID：12910478
> 
> 赞同：0
> 
> 时间：2012-10-16T08:28:07.850
> 
> 标签：android, android-layout, android-widget, android-view, android-custom-view

我正在尝试制作日历，为此我正在使用表格布局，然后我想定义一个包含 TextViews 的自定义行（布局 xml），以便能够在此处访问数据以及我的表格布局示例：

```
 <TableLayout
  android:id="@+id/appointmentListView"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TableRow 
    android:id="@+id/tableRow1">
    <LinearLayout
        android:orientation="horizontal"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        >

        <TextView
            android:id="@+id/unitNul"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="00:00"/>

        <CustomRow><\CustomRow> //this is where I imagined I would have to put my    custom element

    </LinearLayout>

</TableRow> 
```

然后我会根据他们一天中的时间在正确的行中进行约会（通过。切换逻辑）

我的问题是：如何向每个表格行添加自定义元素？这是最好的方法吗？

旁注：我试图制作一个自定义视图元素，但这对我来说似乎有点难以处理。（如果您知道一个很好的指南来解释这一点，这也是一个选择）我已经尝试过：http: [//developer.android.com/guide/topics/ui/custom-components.html](http://developer.android.com/guide/topics/ui/custom-components.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:06:53.490

像这样创建一个 XML::

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout
            android:id="@+id/tablerows"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="@android:color/white"
            android:stretchColumns="0,1" >
        </TableLayout>

    </LinearLayout>

</LinearLayout> 
```

然后在活动类中动态添加行和像这样的其他视图；；

```
 TableRow row;
    TextView t1, t2;
    int dip = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,(float) 1,             getResources().getDisplayMetrics());
   row = new TableRow(context);
   row.setLayoutParams(new android.widget.TableRow.LayoutParams(android.widget.TableRow.LayoutParams.FILL_PARENT,
                android.widget.TableRow.LayoutParams.WRAP_CONTENT));
t1 = new TextView(context);
t1.setTypeface(null, 1);
t1.setTextSize(15);
t1.setWidth(50 * dip);
t1.setPadding(20*dip, 0, 0, 0);
row.addView(t1); 
```

然后在你的表（这里是“myTable”）中添加这样的行::

```
myTable.addView(row, new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT)); 
```

# iphone - 如何通过 NSOperation 实现并发任务？

> ID：12910479
> 
> 赞同：1
> 
> 时间：2012-10-16T08:28:12.280
> 
> 标签：iphone, ios, ipad, grand-central-dispatch, nsthread

我是新手`NSoperation`。`NSoperation`是一个单发对象。

1.  我们如何通过 并发实现多个操作`NSoperation`？

2.  没有可能`NSoperationQueue`吗？

3.  即使我们使用 NSoperationQueue，它也会执行 FIFO 格式的操作。它会如何并发执行呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:45:34.010

如果你想实现一个**并发操作**——也就是说，一个相对于调用线程异步运行的操作——你必须编写额外的代码来异步启动操作。例如，您可能会生成一个单独的线程、调用异步系统函数或执行其他任何操作来确保 start 方法启动任务并立即返回，并且很可能在任务完成之前返回。

大多数开发人员应该永远不需要实现并发操作对象。**如果您总是将操作添加到操作队列中，则无需实现并发操作。当您向操作队列提交非并发操作时，队列本身会创建一个线程来运行您的操作**。因此，将非并发操作添加到操作队列仍然会导致操作对象代码的异步执行。只有在需要异步执行操作而不将其添加到操作队列的情况下，才需要定义并发操作的能力。

请参阅[并发编程指南 - 并发与非并发操作部分](http://developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html)

另请阅读[使用 NSOperation 管理并发](https://developer.apple.com/cocoa/managingconcurrency.html)

您通常通过将操作添加到**操作队列**（NSOperationQueue 类的实例）来执行操作。

NSOperationQueue类管理一组**NSOperation**对象的执行。被添加到队列后，操作将保留在该队列中，直到它被显式取消或完成其任务的执行。**队列中的操作（但尚未执行）本身是根据优先级和互操作对象依赖关系组织的，并相应地执行**。一个应用程序可以创建多个操作队列并向其中的任何一个提交操作。

**操作队列**直接执行其操作，通过在辅助线程上运行它们，或间接使用 libdispatch 库

You can read more about [NSOperation here](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html) and read more about [NSOperationQueue here](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html#//apple_ref/doc/uid/TP40004592)

# javascript - 如何在“类似收件箱的 Gmail”应用程序上操作浏览器的 URL 和后退按钮

> ID：12910481
> 
> 赞同：0
> 
> 时间：2012-10-16T08:28:16.400
> 
> 标签：javascript, jquery, html, ajax

> **可能重复：**
> [如何在 github 源代码浏览中完成 AJAX？](https://stackoverflow.com/questions/9041872/how-ajax-is-done-in-github-source-browse)

我有一个基本上有 2 个主页的应用程序：

1.  带有应用程序列表的主页（如收件箱列表）
2.  一个应用程序页面，里面有很多事情要做（比如一条消息）

**我有两个不明白如何解决的问题：**

1.  **浏览器的 URL**：在第一页上是`www.foobar.com/inbox`，在第二页上是`www.foobar.com/inbox?app=1234`。如何在不真正转到另一个页面或刷新页面的情况下做到这一点
2.  **浏览器后退/前进按钮**- 我如何操作它们，所以如果我在一个页面上并且我按下“后退”我会回到收件箱而不是上一页？我读了一些关于它的讨论，不明白从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:38:09.767

查看 gmail url，您将看到`#`(hash)，例如：

```
document.location.hash; 
```

插件很多，可以从这里入手：

[Ben Alman - jQuery hashchange 事件](http://benalman.com/code/projects/jquery-hashchange/examples/hashchange/#test1)

# javascript - Jquery - 根据点击或选择更改 URL

> ID：12910487
> 
> 赞同：1
> 
> 时间：2012-10-16T08:28:39.613
> 
> 标签：javascript, jquery

这是我之前帖子的后续问题：[链接](https://stackoverflow.com/questions/12895416/change-url-depending-on-click)

我想根据所选语言更改 url 的字符串。所以如果我有`href="../folder/Languages/English/test/test.html`

单击或选择另一种语言会将 href 更改为：`href="../folder/Languages/SomeOtherLanguage/test/test.html`

现在我想根据语言添加一个标志图标。因为我找不到用 css 创建它的方法，所以我偶然发现了 jQuery-plugin [ddSlick](http://designwithpc.com/Plugins/ddSlick)。我喜欢插件的整体风格，但现在我无法让它与文本链接解决方案一起使用。我已经设置了一个 jsfiddle，所以你可以看看：[JSFiddle](http://jsfiddle.net/bJPwn/)

也许这比我想象的要容易，但我的 jQuery 还不够好。

希望你能在这里帮助我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:13:53.860

I don't clearly got want you want but I have changed something in the fiddle. I hope that's thing you want. Check the new [FIDDLE](http://jsfiddle.net/mQt7P/) out

# mysql - 选择加入的记录，省略垃圾关系数据而不使用 where

> ID：12910494
> 
> 赞同：1
> 
> 时间：2012-10-16T08:29:09.487
> 
> 标签：mysql, sql

说

```
Table A             Table AB         Table B
+----+---------+    +-----+-----+    +----+-----+
| id | name    |    | ida | idb |    | id | age |
+----+---------+    +-----+-----+    +----+-----+
|  1 |   'one' |    |   1 |   3 |    |  3 |   3 |
+----+---------+    +-----+-----+    +----+-----+
|  2 |   'two' |    |   2 |   4 |    |  5 |   5 |
+----+---------+    +-----+-----+    +----+-----+
|  3 | 'three' |    |   2 |   5 |
+----+---------+    +-----+-----+

What I want           What I get
+---------+------+    +---------+------+
| name    | age  |    | name    | age  |
+---------+------+    +---------+------+
|   'one' |    3 |    |   'one' |    3 |
+---------+------+    +---------+------+
|   'two' |    5 |    |   'two' |    5 |
+---------+------+    +---------+------+
| 'three' | NULL |    |   'two' | NULL |
+---------+------+    +---------+------+
                      | 'three' | NULL |
                      +---------+------+ 
```

我的 sql 是

```
SELECT A.name, B.age
FROM A
LEFT JOIN AB
  ON A.id = AB.ida
LEFT JOIN B
  ON AB.idb = B.id 
```

**约束**：我不想`Where`出于特定原因使用语句，也`sub-queries`出于性能原因。

有没有办法我只能获取关系 AB 与仅使用`JOIN`/`ON`而没有子查询存在的东西相匹配的记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:30:58.583

使用分组。

```
SELECT A.name, Max(B.age)
FROM A 
LEFT JOIN AB 
  ON A.id = AB.ida 
LEFT JOIN B 
  ON AB.idb = B.id 
GROUP BY a.id, a.Name 
order by a.id 
```

或者你可以使用右连接。

```
select a.name, b.age
from 
    b 
    inner join ab on b.id = ab.idb
    right join a on ab.ida = a.id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T08:33:12.273

使用内部而不是外部联接与表`B`：

```
SELECT A.name, B.age
FROM A LEFT JOIN (
  AB JOIN B ON AB.idb = B.id
) ON A.id = AB.ida 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/feef7/1/0)上查看。

# android - 以字符串形式读取文件

> ID：12910503
> 
> 赞同：63
> 
> 时间：2012-10-16T08:29:45.660
> 
> 标签：android, string, optimization

我需要在 android 中将 xml 文件作为字符串加载，以便将其加载到 TBXML xml 解析器库并解析它。即使对于一些 KB 的非常小的 xml 文件，我现在必须以字符串形式读取文件的实现需要大约 2 秒。是否有任何已知的快速方法可以在 Java/Android 中将文件作为字符串读取？

* * *

这是我现在的代码：

```
public static String readFileAsString(String filePath) {
    String result = "";
    File file = new File(filePath);
    if ( file.exists() ) {
        //byte[] buffer = new byte[(int) new File(filePath).length()];
        FileInputStream fis = null;
        try {
            //f = new BufferedInputStream(new FileInputStream(filePath));
            //f.read(buffer);

            fis = new FileInputStream(file);
            char current;
            while (fis.available() > 0) {
                current = (char) fis.read();
                result = result + String.valueOf(current);
            }
        } catch (Exception e) {
            Log.d("TourGuide", e.toString());
        } finally {
            if (fis != null)
                try {
                    fis.close();
                } catch (IOException ignored) {
            }
        }
        //result = new String(buffer);
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2012-11-13T08:49:24.050

最终使用的代码如下：

```
http://www.java2s.com/Code/Java/File-Input-Output/ConvertInputStreamtoString.htm

public static String convertStreamToString(InputStream is) throws Exception {
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = reader.readLine()) != null) {
      sb.append(line).append("\n");
    }
    reader.close();
    return sb.toString();
}

public static String getStringFromFile (String filePath) throws Exception {
    File fl = new File(filePath);
    FileInputStream fin = new FileInputStream(fl);
    String ret = convertStreamToString(fin);
    //Make sure you close all streams.
    fin.close();        
    return ret;
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-06-27T11:13:51.760

你可以用它`org.apache.commons.io.IOUtils.toString(InputStream is, Charset chs)`来做到这一点。

例如

```
IOUtils.toString(context.getResources().openRawResource(<your_resource_id>), StandardCharsets.UTF_8) 
```

要添加正确的库：

> 将以下内容添加到您的 app/build.gradle 文件中：
> 
> ```
> dependencies {
>     compile 'org.apache.directory.studio:org.apache.commons.io:2.4'
> } 
> ```
> 
> *   [https://stackoverflow.com/a/33820307/1815624](https://stackoverflow.com/a/33820307/1815624)

或者对于 Maven 存储库，请参见 ->[这个链接](http://mvnrepository.com/artifact/org.lucee/commons-io/2.4.0)

对于直接 jar 下载，请参阅-> [https://commons.apache.org/proper/commons-io/download_io.cgi](https://commons.apache.org/proper/commons-io/download_io.cgi)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-04-18T18:04:13.780

重新设计了源自 ->[接受的答案的方法集](https://stackoverflow.com/a/13357785/1815624)

@JaredRummler 对您的评论的回答：

> [以字符串形式读取文件](https://stackoverflow.com/questions/12910503/read-file-as-string#comment56574366_13357785)
> 
> 这不会在字符串末尾添加一个额外的新行吗？

为了防止在末尾添加换行符，您可以在第一个循环期间使用布尔值集，就像在代码示例中一样`Boolean firstLine`

```
public static String convertStreamToString(InputStream is) throws IOException {
   // http://www.java2s.com/Code/Java/File-Input-Output/ConvertInputStreamtoString.htm
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();
    String line = null;
    Boolean firstLine = true;
    while ((line = reader.readLine()) != null) {
        if(firstLine){
            sb.append(line);
            firstLine = false;
        } else {
            sb.append("\n").append(line);
        }
    }
    reader.close();
    return sb.toString();
}

public static String getStringFromFile (String filePath) throws IOException {
    File fl = new File(filePath);
    FileInputStream fin = new FileInputStream(fl);
    String ret = convertStreamToString(fin);
    //Make sure you close all streams.
    fin.close();
    return ret;
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-12-18T15:30:37.670

如果你使用 Kotlin，这很容易：

```
val textFile = File(cacheDir, "/text_file.txt")
val allText = textFile.readText()
println(allText) 
```

来自`readText()`文档：

> 使用 UTF-8 或指定字符集以字符串形式获取此文件的全部内容。不建议在大文件上使用此方法。它具有 2 GB 文件大小的内部限制。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-08-14T18:33:47.683

对于文件，我们事先知道其大小，因此只需一次性阅读！

```
String result;
File file = ...;

long length = file.length();
if (length < 1 || length > Integer.MAX_VALUE) {
    result = "";
    Log.w(TAG, "File is empty or huge: " + file);
} else {
    try (FileReader in = new FileReader(file)) {
        char[] content = new char[(int)length];

        int numRead = in.read(content);
        if (numRead != length) {
            Log.e(TAG, "Incomplete read of " + file + ". Read chars " + numRead + " of " + length);
        }
        result = new String(content, 0, numRead);
    }
    catch (Exception ex) {
        Log.e(TAG, "Failure reading " + this.file, ex);
        result = "";
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-06-16T14:19:22.353

```
public static String readFileToString(String filePath) {
    InputStream in = Test.class.getResourceAsStream(filePath);//filePath="/com/myproject/Sample.xml"
    try {
        return IOUtils.toString(in, StandardCharsets.UTF_8);
    } catch (IOException e) {
        logger.error("Failed to read the xml : ", e);
    }
    return null;
} 
```

* * *

## 回答 #7

> 赞同：-12
> 
> 时间：2014-07-19T16:11:09.977

这对我有用

```
i use this path

String FILENAME_PATH =  "/mnt/sdcard/Download/Version";

public static String getStringFromFile (String filePath) throws Exception {
    File fl = new File(filePath);
    FileInputStream fin = new FileInputStream(fl);
    String ret = convertStreamToString(fin);
    //Make sure you close all streams.
    fin.close();        
    return ret;

} 
```

# c# - 使用 ASIHttprequest XCode4.2 调用 WCF Web 服务

> ID：12910509
> 
> 赞同：2
> 
> 时间：2012-10-16T08:30:21.430
> 
> 标签：c#, wcf, ios5, xcode4, asihttprequest

嗨，我编写了简单的 WCF 服务并上传到我的本地 IIS（v7）服务器。所以网址是这样的`http://mylink/WCF_SAMPLE/Service1.svc`。我的 wcf web 服务是用 svcutil.exe 测试的，所以 wcf web 服务是正确的。

我尝试使用来自 AsiHttprequest 的 WCF Web 服务。但它失败了。我检查了显示的响应`<object returned empty description>`。这是我为 IOS 应用程序编写的代码。

```
 NSURL *url=[NSURL URLWithString:@"http://mylink/WCF_SAMPLE/Service1.svc"];
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request setRequestMethod:@"POST"];
[request addRequestHeader:@"Content-Type" value:@"text/xml"];
[request setPostValue:@"john" forKey:@"fname"];
[request setPostValue:@"Carter" forKey:@"sname"];
[request setDelegate:self]; 
[request startAsynchronous]; 
```

这是我在 IService1.cs 中的 Web 服务代码：

```
[ServiceContract]
public interface IService1{
   [OperationContract]
   [WebInvoke(Method="POST",UriTemplate="/showemployeename")]
   string showemployeename(string fname,string sname);
} 
```

Service1.svc.cs 内部

```
public class Service1:IService1{
 public string showemployeename(string fname,string sname)
 {
    return fname+sname
 }
} 
```

这是我的 web.config 文件

```
<system.serviceModel>
  <services>
   <service name="WCF_SAMPLE.Service1" behaviorConfiguration="WCF_SAMPLE.Service1Behavior">
       <endpoint address="" binding="wsHttpBinding" contract="WCF_SAMPLE.IService1">
       </endpoint>
       <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
    </service>
  </services>
  <behavior name="WCF_SAMPLE.Service1Behavior">
     <serviceMetadata httpGetEnabled="true" />
     <serviceDebug includeExceptionDetailInFaults="false"/>
   </behavior></system.serviceModel> 
```

如何连接到 WCF Web 服务以及如何获取 showemployeename 功能？

感谢任何帮助

最佳 Rgds, df

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:16:15.573

您正在将`WCF_SAMPLE.Service1`服务配置为使用.`wsHttpBinding`而不是`webHttpBinding`. 这篇[简短的博客文章](http://blogs.msdn.com/b/bashmohandes/archive/2008/01/05/using-webhttpbinding-json-support-in-wcf.aspx)提供了一个使用`webHttpBinding`.

# c# - 调用方法 n 次

> ID：12910512
> 
> 赞同：-3
> 
> 时间：2012-10-16T08:30:31.887
> 
> 标签：c#, .net

```
int noOfAttempts = 3;
void StartServer();
bool IsServerRunning(); 
```

我需要根据结果重新尝试`StartServer()`3 次`IsServerRunnig()`。像这样的东西：

```
StartServer();
if (!IsServerRunning())
{
    StartServer();
    if (!IsServerRunning())
    {
        StartServer();
        if (!IsServerRunning())
        {
            StartServer();
        }
    }
} 
```

我不想像上面那样使用 for 循环或丑陋的代码。有没有更好的方法来做到这一点？一种方式，如果将来更改，我将不必更改我的代码`noOfAttempts`？

编辑： **我期待“代表”概念中的一些东西（如果可能的话）。**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T08:46:15.150

**更新**：

似乎您实际上想要（编辑）一些巧妙的方式来描述重试逻辑。在这种情况下，请查看诸如[Polly](https://github.com/App-vNext/Polly "波莉")之类的瞬态故障处理库。

* * *

好的。

```
3.TimesUntil(IsServerRunning, StartServer); 
```

在这里委托魔法：

```
public static class Extensions 
{
    public static void TimesWhile(this int count, Func<bool> predicate, Action action)
    {
        for (int i = 0; i < count && predicate(); i++) 
           action();
    }
    public static void TimesUntil(this int count, Func<bool> predicate, Action action)
    {
        for (int i = 0; i < count && !predicate(); i++) 
            action();
    }
} 
```

**致尊敬的反对者：** 这只是为了好玩，我永远不会为实际项目编写此代码。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-16T08:32:07.783

你可以使用一个while循环

```
int counter = 0;
while(counter < 3 && !IsServerRunning()) {
    StartServer();
    counter++;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-16T08:34:47.800

在这里你没有循环......

```
private void Start(int numberOfAttempts)
{
    if (numberOfAttempts == 0)
        return;

    StartServer();

    if (!IsServerRunning())
        Start(numberOfAttempts-1);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T08:46:02.743

正如大家已经注意到的那样，while 或 for 循环确实是解决这个问题最简单的部分。

如果您真的想为这些东西设置一些非常高级的东西，请查看[蹦床功能问题](https://stackoverflow.com/questions/189725/what-is-a-trampoline-function)或查看[Bart 的文章](http://bartdesmet.net/blogs/bart/archive/2009/11/08/jumping-the-trampoline-in-c-stack-friendly-recursion.aspx)。使用这种方法，您将能够避免循环（因此我认为在这种情况下不值得）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T08:32:53.990

当然：

```
while (numRetries > 0 && !IsServerRunning) {
    StartServer();
    numRetries--;
} 
```

如果您喜欢冒险，也可以使用`goto`;-)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T08:34:02.680

```
int numberOfAttempts = 3;

do
{
    StartServer();
    numberOfAttempts--;
} 
while(!IsServerRunning() && numberOfAttempts > 0) 
```

更新：因此此操作密切相关，您可以创建方法

```
bool TryStartServer()
{
     StartServer();
     return IsServerRunning();
} 
```

第二个，将尝试多次启动服务器（并返回操作结果）

```
bool TryStartServer(int numberOfAttemtps)
{
    for(int attempt = 0; attempt < numberOfAttempts; attempt++)
        if (TryStartServer)
            return true;

    return false; 
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-16T08:39:13.827

如果你真的想要的话，你可以使用一个委托......（也许是一个可重用的东西库？）

```
public void CallFunctionNTimes(Action func, int nTimes, params bool[] conditions) {
    int callCounter = 0;

    while (callCounter < nTimes && conditions.All(x => x == true)) {
        func();
        callCounter++;
    }
} 
```

用法：

```
CallFunctionNTimes(StartServer, 3, !IsServerRunning /* Other stuff too if you want */); 
```

..与其他答案并没有太大不同，除了我猜它可以重复使用:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-16T08:42:53.367

do..while(false) 循环怎么样？（开玩笑，但说真的，我以前在代码中见过）

```
int numTries;

        do
        {
            if(numTries == 0)
                break;

            StartServer();
            numTries--;

            if (!IsServerRunning)
                continue;
        } while (false); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-16T08:43:17.437

我可能会使其成为`StartServer`方法本身的内置功能。像这样的东西（只是一个概念证明）：

```
public class ServerNotRunningException : Exception { /*No content here*/ }

public void StartServer(int attempts = 3)
{
    try
    {
        //attempt to start server
        if(!IsServerRunning()) // or check something available in your method
            throw new ServerNotRunningException();
    }
    catch(ServerNotRunningException ex)
    {
        // you should log ex.ToString() here!
        if(attempts>0) StartServer(attempts-1); //try again!
        else throw new ServerNotRunningException(); //mission failed, bubble up!
    }
} 
```

用法：

```
StartServer();
//or, to make it try i.e. 5 times
StartServer(5); 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-10-16T12:55:52.933

纯娱乐

```
var calls = Enumerable.Repeat<List<string>>(new List<string>() { "IsServerRunning", "StartServer" }, noOfAttempts).ToList();
calls.ForEach(new Action<List<string>>(
    delegate(List<string> item)
    {
        // Use reflection here to create calls to the elements of item
    }
)); 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-10-16T08:40:05.457

最好将重试逻辑与主代码完全分开：

```
void Attempt(Action action, Func<bool> ensure, int noOfAttempts)
{
   while (noOfAttempts-- > 0 && !ensure())
   {
       action();
   }
} 
```

接着：

```
Attempt(action:StartServer, ensure:IsServerRunning, noOfAttempts:3) 
```

# java - 使用 maven-eclipse-plugin 将依赖 jar 文件从文件夹指定到 eclipse 项目中，而不是 M2_REPO 变量

> ID：12910516
> 
> 赞同：0
> 
> 时间：2012-10-16T08:30:41.480
> 
> 标签：java, eclipse, maven, eclipse-plugin, maven-eclipse-plugin

我希望 Eclipse 项目的 JAR 构建路径（或构建路径中的 jar 文件）指向名为“lib”的 Eclipse 项目的本地目录，而不是指向 M2_REPO 变量（我的 Maven 本地存储库路径）

在 lib 目录中，有通过覆盖 'mave-dependency-plugin' 中的覆盖 'copy-dependencies' 目标复制的 jar 文件我的意图是 eclipse 项目是自包含的。

我尝试覆盖目标配置工作区和来自 maven-eclipse-plugin，但它不起作用。

¿有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:03:02.570

`.classpath`当然，您可以使用 maven-eclipse-plugin覆盖生成的

```
 <plugin>
    <artifactId>maven-eclipse-plugin</artifactId>
    <version>2.8</version>
    <configuration>
      <wtpversion>1.5</wtpversion>
      <packaging>war</packaging>
      <wtpContextName>${project.artifactId}</wtpContextName>
      <buildOutputDirectory>WebContent/WEB-INF/classes</buildOutputDirectory>
      <additionalConfig>
        <file>
          <name>.classpath</name>
          <content><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<classpath>
  <classpathentry including="**/*.java" kind="src" path="src/main/java"/>
  <classpathentry excluding="**/*.java" kind="src" path="src/main/resources"/>
  <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
  <classpathentry kind="con" path="org.eclipse.jdt.USER_LIBRARY/project-lib"/>
  <classpathentry kind="output" path="WebContent/WEB-INF/classes"/>
</classpath>]]></content>
        </file>
      </additionalConfig>
      <buildcommands>
        <buildcommand>org.eclipse.jdt.core.javabuilder</buildcommand>
        <buildcommand>org.eclipse.wst.common.project.facet.core.builder</buildcommand>
      </buildcommands>
    </configuration>
  </plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:49:06.267

我建议尝试以下方法之一：

*   使用 Maven 存储库管理器（例如 Nexus）并部署您拥有的任何不在可用存储库中的 jar。然后使用“正常”的 Maven 依赖项。
*   使用系统 Maven 依赖项。

# php - 更改 exec() PHP 中的输入路径

> ID：12910519
> 
> 赞同：0
> 
> 时间：2012-10-16T08:31:00.980
> 
> 标签：php, cmd, exec, dirname

我希望上传文件的路径来自`C:\\xampp\\htdocs\\cmd`， `dirname(__FILE__)`但是当我这样做时，脚本会引发错误。

工作代码

```
exec( dirname(__FILE__)."\\xyz.exe C:\\xampp\\htdocs\\cmd\\blue.png D:\\1.png\", $output); 
```

但我想要：

```
exec( dirname(__FILE__)."\\xyz.exe" dirname(__FILE__)."\\blue.png D:\\1.png\", $output); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:36:21.927

为什么在执行 all 之前不 chdir：

```
$imagename = 'blue.png';
$command = 'chdir ' . __DIR__ . '; xyz.exe ' . $imagename . ' D:\\1.png\\ ';
exec( $command, $output); 
```

# iphone - Iphone5：在ios6上运行ios5应用程序时顶部和底部出现黑屏

> ID：12910521
> 
> 赞同：0
> 
> 时间：2012-10-16T08:31:10.373
> 
> 标签：iphone, ios5, ios6

> **可能重复：**
> [PhoneGap 和 iPhone 5：去除顶部和底部的黑色条纹](https://stackoverflow.com/questions/12508775/phonegap-and-iphone-5-remove-top-and-bottom-black-stripes)

请赐教。当我在 ios6 视网膜 4 英寸模拟器上运行我的 ios5 应用程序时，我可以在模拟器的顶部和底部看到黑屏。请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:05:14.893

您必须包含 iPhone 5 的默认初始屏幕图像。这充当一个标志，告诉设备您的应用程序已设置为 4 英寸显示屏。

图片名称必须为：Default-568h@2x.png

# java - 是否可以在 Swing 中使用单个文档侦听器来监听多个文本字段

> ID：12910522
> 
> 赞同：5
> 
> 时间：2012-10-16T08:31:14.213
> 
> 标签：java, swing, jtable, listener, jtextfield

我在 JTable 上有 12 个过滤器，用于 12 列。每个过滤器都是 JTextField 类型的 TextField。每次用户在文本框过滤器中输入数据时，就会发生搜索。

**示例：** 假设我在它们上方有 3 列和 3 个文本框作为过滤器。现在，在我的表格过滤的任何文本框中键入的任何内容都必须发生。它发生得很好。

```
╔═════════════╦═════════════╦═════════════╗
║ [TextField] ║ [TextField] ║ [TextField] ║
╠═════════════╬═════════════╬═════════════╣
║             ║             ║             ║
╠═════════════╬═════════════╬═════════════╣
      ...           ...           ...
╠═════════════╬═════════════╬═════════════╣
║             ║             ║             ║
╚═════════════╩═════════════╩═════════════╝ 
```

每个文本字段的文本字段侦听器如下所示，

```
textField.getDocument().addDocumentListener(new DocumentListener() {
  public void changedUpdate(DocumentEvent e) { method(); } 
  public void removeUpdate(DocumentEvent e) { method(); }
  public void insertUpdate(DocumentEvent e) { method(); } 
}; 
```

我的问题是，我正在为所有 12 个文本字段重复此代码，这让我很不高兴。这是我们唯一的方法吗？或者有人可以建议我更好的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T08:33:52.617

*   从匿名类切换到内部类并将相同的侦听器附加到每个字段。源包含在事件中
*   使其成为一个单独的类，并继续为每个字段使用单独的侦听器。至少避免代码重复

有关内部类的示例，请参阅[本教程](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)

# eclipse - 模拟 eclipse SWT/JFACE 对话框和小部件

> ID：12910528
> 
> 赞同：5
> 
> 时间：2012-10-16T08:31:36.803
> 
> 标签：eclipse, unit-testing, swt, jface

有没有办法对 Eclipse 对话框和 SWT/Jface 小部件进行单元测试？或者甚至更好 - 是否有一些 jar/框架可以帮助我模拟 Shell 或 Composite（这样我就不必模拟太多他们的方法）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-02T21:54:31.647

您正在寻找一个模拟 SWT 控件的框架。在使用 TDD 或您的测试必须可靠时，这通常被认为是最佳实践。

SWTBot 不模拟 SWT。使用 SWTBot 时，目标代码使用主机操作系统的标准 SWT 实现来执行。SWTBot 从另一个线程检查并触发 SWT 控件。这种方法不会将代码与环境隔离，根据主机平台和影响 SWT 的其他环境差异，测试可能会给出不同的结果。

不幸的是，由于缺少可注入构造函数、验证包、层次结构以及最终类和方法的代码，因此不能使用 Mockito 或 JMockit 等通用模拟库来模拟 SWT。对于 SWT 之类的库，您将需要使用自定义存根。搜索不显示任何 SWT 模拟库。因此，我在[https://github.com/westbury/SWT-Mock](https://github.com/westbury/SWT-Mock)开始了一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:36:24.440

[SWTBot](http://www.eclipse.org/swtbot/)应该是首先要看的东西。

[这](http://www.vogella.com/articles/SWTBot/article.html)是 Vogella 提供的关于如何使用 SWTBot 的精彩教程。

最后，[这](https://stackoverflow.com/questions/5716174/testing-swt-gui-whith-swtbot)是关于 SWTBot 的另一个 SO 问题。

# python - 基于属性在xml中读取和写入值

> ID：12910529
> 
> 赞同：0
> 
> 时间：2012-10-16T08:31:40.217
> 
> 标签：python, xml

我有一个如下的 xml 文件，我想从我的设备中读取数据并使用 python 脚本将数据写入“值”列。

```
<TopoDefs>
  <Device Name="SNB" LogicalType="CORE" 
          IdCode="0x03886A21" Mask="0xf0000000">
    <Variable name="A0" value="0x52001321" type="GREEN" /> 
    <Variable name="A1" value="0x51001321" type="GREEN" /> 
    <Variable name="A2" value="0x03001321" type="GREEN" /> 
    <Variable name="A3" value="0x14001321" type="GREEN" /> 
    <Variable name="B0" value="0x5A001321" type="BLUE" /> 
    <Variable name="B1" value="0x51001321" type="BLUE" /> 
    <Variable name="B2" value="0x04001321" type="BLUE" /> 
    <Variable name="B3" value="0x05001321" type="BLUE" />
  </Device>
</TopoDefs> 
```

我完全是python脚本的新手。如何解析 xml 文件并指向属性值以替换为将一直更改的新值？如果我使用 getElementsByTagName 和 nodevalue，它将读取节点的所有字符串，我如何通过仅读取值来限制并且其他变量保持不变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:59:05.017

这是一个迭代文档中所有设备以及设备中所有变量的示例：

```
xmlstr = """<TopoDefs>
  <Device Name="SNB" LogicalType="CORE"
          IdCode="0x03886A21" Mask="0xf0000000">
    <Variable name="A0" value="0x52001321" type="GREEN" />
    <Variable name="A1" value="0x51001321" type="GREEN" />
    <Variable name="A2" value="0x03001321" type="GREEN" />
    <Variable name="A3" value="0x14001321" type="GREEN" />
    <Variable name="B0" value="0x5A001321" type="BLUE" />
    <Variable name="B1" value="0x51001321" type="BLUE" />
    <Variable name="B2" value="0x04001321" type="BLUE" />
    <Variable name="B3" value="0x05001321" type="BLUE" />
  </Device>
</TopoDefs>"""

import xml.etree.ElementTree as ET
document = ET.fromstring(xmlstr)

for dev in document.iter('Device'):
    for var in dev.iter('Variable'):
        var.set('value', 'new_value')

print ET.tostring(document) 
```

# java - 如果请求中未提供命名空间前缀，java @webservice 将接收空参数值

> ID：12910531
> 
> 赞同：0
> 
> 时间：2012-10-16T08:31:43.853
> 
> 标签：java, web-services, parameters, null

如果请求中未提供命名空间前缀，java @webservice 将接收空参数值

webservice客户端正在发送如下请求，我必须让它工作我试图将目标命名空间删除为@WebService（targetNamespace =“”）

```
 and

    @WebMethod()
        @WebResult(name = "fusionIntegrationResponse", targetNamespace = "")
        @RequestWrapper(targetNamespace = "")
        @ResponseWrapper(targetNamespace = "")
        @Override`enter code here`
        public FusionIntegrationResponse activateFusion(String agentId, String ucn, String companyId) {

    WSDL always add targetnamespace and if I remove explicitly it says invalid definition.

    **webservice receives null values for all parameter for following soap request message.**

    <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <SOAP-ENV:Body>
    <activateFusion xmlns="http://ws.fusionintegration.service.fnb.co.za/">
    <arg0>F3015505</arg0>
    <arg1>96334</arg1>
    <arg2>15</arg2>
    </activateFusion>
    </SOAP-ENV:Body></SOAP-ENV:Envelope>

    **following works fine**
    <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.fusionintegration.service.fnb.co.za/">
       <soapenv:Header/>
       <soapenv:Body>
          <ws:activateFusion>
            <arg0>F3015505</arg0>
           <arg1>96334</arg1>
           <arg2>15</arg2>
          </ws:activateFusion>
       </soapenv:Body>
    </soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:52:16.413

根据您的工作请求，您的参数似乎没有命名空间，因此以下内容应该有效：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
  <SOAP-ENV:Body>
    <activateFusion xmlns="http://ws.fusionintegration.service.fnb.co.za/">
      <arg0 xmlns="">F3015505</arg0>
      <arg1 xmlns="">96334</arg1>
      <arg2 xmlns="">15</arg2>
    </activateFusion>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

# javascript - 为什么 IE8 不处理 iframe onload 事件？

> ID：12910534
> 
> 赞同：5
> 
> 时间：2012-10-16T08:31:59.217
> 
> 标签：javascript, html, iframe, internet-explorer-8

示例代码：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<script>
function on_iframe_load() {
    document.getElementById('iframe_a').onload = function() {
        alert('Thanks for the visit!');
    };
}
</script>
</head>
<body>
<iframe name="iframe_a" id="iframe_a"></iframe>
<a href="http://www.example.com/" target="iframe_a" onclick="on_iframe_load();">Go!</a>
</body>
</html> 
```

它可以在所有主要浏览器中正常运行，但 IE8（可能还有以前的版本）不理解它。

**更新**：刚刚想出了一个解决方案，但我不确定它是否是正确的编码。请查阅：

```
<!DOCTYPE html>
<html>

    <head>
        <title></title>
        <script>
            var clicked = false;

            function activate() {
                clicked = true;
            }

            function pop() {
                if (clicked) {
                    alert('Thanks for the visit!');
                };
            }
        </script>
    </head>

    <body>
        <iframe name="iframe_a" onload="pop();"></iframe>
        <a href="http://www.example.com/" target="iframe_a" onclick="activate();">Go!</a>

    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T09:46:48.907

在 iframe 上使用内联属性似乎可以解决 IE8 中的这个问题：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<script>
function onIframeLoad(iframe) {
    if(iframe.src) {
        alert('Thanks for the visit!');
    }
}
function onLinkClick(url) {
    document.getElementById('iframe_a').src = url;
}
</script>
</head>
<body>
<iframe id="iframe_a" onload="onIframeLoad(this);"></iframe>
<a href="http://www.example.com/" onclick="onLinkClick(this); return false;">Go!</a>
</body>
</html> 
```

**按要求更新：**

您应该尝试编写更不显眼的 javascript。以这种方式编写代码可能会阻止您在 IE 中出现这种奇怪的错误。

```
<!DOCTYPE html>
<html>
<body>
    <iframe id="display-frame"></iframe>
    <a href="http://www.example.com/">Go!</a>
    <script>
        window.onload = function() {
            var iframe = document.getElementById('display-frame'),
                link = document.getElementsByTagName('a')[0];

            // load handler
            function onIframeLoad() {
                alert('Thanks for the visit!');
            }

            // event handlers
            if(iframe.addEventListener) iframe.addEventListener('load', onIframeLoad, false);
            else if(iframe.attachEvent) iframe.attachEvent('onload', onIframeLoad);

            link.onclick = function() {
                iframe.src = this.href;
                return false;
            }
        };
    </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-06T11:58:00.790

只需使用 jquery：

```
$(iframe).bind( 'load', function(){} ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T09:41:29.833

页面加载后，您似乎无法使用 DOM 属性向 IE 中的 iFrame 添加负载侦听器。

但是你可以使用`attachEvent`，所以：

```
function on_iframe_load() {
    function foo() {
        alert('Thanks for the visit!');
    };
    var el = document.getElementById('iframe_a');

    if (el.attachEvent) {
      el.attachEvent('onload',foo);
    } else if (el.addEventListener) {
      el.addEventListener('load', 'foo', false);
    }
} 
```

我在 IE 6 中进行测试并颠倒了通常的测试顺序，以便`attachEvent`优先使用`addEventListener`. 您可能想要测试更新版本的 IE 以查看相反的顺序是否有效，并测试其他类似 IE 的浏览器，例如 Opera。

### 编辑

测试后修改代码（我傻）以使用`addEventListener`. 这是适用于 IE 和其他的东西：

```
function on_iframe_load() {
    function foo() {
        alert('Thanks for the visit!');
    };
    var el = document.getElementById('iframe_a');

    if (el.attachEvent) {
      el.attachEvent('onload',foo);

    } else {
      el.onload = foo;
    }
} 
```

如果您在标记中使用 onload 属性，则无需使用脚本添加侦听器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T07:07:22.283

有用 ：）

在 IE8、ff、chrome 上测试

```
var iframe = document.getElementById('iframeid');

    if (iframe .attachEvent) {
      iframe .attachEvent('onload',alert("IE Iframe loaded"));

    } else {
      iframe .onload = alert("Other than IE Iframe loaded");
    } 
```

# c++ - 如何从C中的数据中删除Ì

> ID：12910540
> 
> 赞同：-6
> 
> 时间：2012-10-16T08:32:26.930
> 
> 标签：c++, c, visual-studio-2010, parsing

我得到这样的价值

```
"RE000022000500200Ì 0.00 0.1 0.129.8#####-  97-   2#####-   1#####   960.504.00 0: 00.000.00 8: 013:52 0: 021:52############2.00.0   " 
```

在对上述数据进行一些处理后，我想要一个这样的值你能请你删除“Ì”的逻辑应该是什么？

```
"RE000022000500200 0.00 0.1 0.129.8#####-  97-   2#####-   1#####   960.504.00 0: 00.000.00 8: 013:52 0: 021:52############2.00.0   " 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:53:14.883

如果数据中没有值为 0xC3 的字符，则可以遍历数据字符串，如果出现值等于 0xC3 的字符，则删除该字符和下一个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:39:00.487

`std::string`如果你用来保持你的价值，这很容易。

```
#include <string>
#include <algorithm>

std::string input = ...;
input.erase(std::remove(input.begin(), input.end(), 'Ì'), input.end()); 
```

如果您坚持使用 C 字符串或数组，那就更复杂了。

我从上面的评论中看到您正在使用 C 字符串。我建议你改用 C++ 字符串。

# spring-ws - NullPointerException in saxon IdentityTransformer.transform when extracting data from javax DOMSource

> ID：12910541
> 
> 赞同：0
> 
> 时间：2012-10-16T08:32:28.673
> 
> 标签：spring-ws, saxon, jdom-2

I am using **Spring Webservice (2.1.0) Client** to send a very simple Message to a Soap UI Mock Webservice. (Hello World style, no namespaces)

Before Sending the DOMSource via the SpringWebserviceTemplate it is extracted from a jdom2.Element as **jdom2.transform.JDOMSource**. (JDOM 2.0.2)

The Transformer is Saxon 9.4.0.4.

While calling the Spring Webservice Template function sendSourceAndReceiveToResult the **net.sf.saxon.IdentityTransformer** throws a **NullPointerException** when executing the **transform(DOMSource,responseResult)** function.

Since DOMSource is available at that point I do not know what could have gone wrong.

Stacktrace tells me the Nullpointer was thrown at: **net.sf.saxon.lib.SerializerFactory.getReceiver (line 239)**.

It would help me greatly if you could speculate on possible causes.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:24:36.683

Please note that the best way of reporting a Saxon problem is to use either the Saxon forums at [http://saxonica.plan.io](http://saxonica.plan.io), or the saxon-help mailing list on SourceForge. We try to monitor questions on StackOverflow, but it's often a few days before we notice them.

With this kind of problem, the cause is often that some piece of software (like Spring Webservice) is using the JAXP TransformerFactory mechanism to load whatever XSLT transformer it finds on the classpath, but hasn't actually done the testing to ensure that it works with an arbitrary XSLT transformer; people often test only with the default one provided by the JDK. It's not clear from your question whether you actually intended for it to use Saxon or not.

Line 239 of SerializerFactory is actually doing

```
throw new IllegalArgumentException("Unknown type of result: " + result.getClass()); 
```

(having tested whether result is one of the kinds of Result that it recognizes); so it looks to me as if result (which is probably the value passed to the transform() method) is null. Check the contents of your responseResult value.

# architecture - 架构隔离机制

> ID：12910542
> 
> 赞同：1
> 
> 时间：2012-10-16T08:32:32.010
> 
> 标签：architecture, isolation

我们目前正在审查如何将我们的核心业务组件（在代码中）与前端开发隔离开来。我们已经有了多层架构，但它们是使用 dll（或某些地方的 web 服务）引用的。

我们想做的是将部分 UI 外包给外部开发人员。问题是我们必须提供可以逆向工程的dll，然后才能“获得”核心业务逻辑代码。

解决此问题的一种方法不是使用 dll 公开 BO，而是使用 Webservices 公开 BO。然而，问题很少。例如安全性、调试、异常处理、托管等。对我来说，这听起来不适合上面提到的问题，但 Web 服务也不适用于此类问题。

我想知道有没有人遇到过类似的情况？或者如果有人这样做了？如果是这样怎么办？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:37:50.450

接口契约的概念在这里似乎很贴切。

如果您的接口的契约定义良好（让它们成为 DLL 入口点、WSDL 等等），那么创建一个允许 UI 开发人员测试行为的模拟实现应该不会很困难。

我们采取的唯一预防措施是要求 UI 承包商将代码提交到我们的 SVN 存储库（不，这里没有 Git :)），以便我们的构建机器可以连续运行集成测试，并且我们可以每天评估进度和问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:39:06.393

提供实现业务逻辑的 Web 服务点 - 这将由您自己托管并可供 UI 开发人员访问。

通过这种方式，您可以控制业务逻辑，并且 UI 团队可以访问 API。

如果这不可行，请将您的业务逻辑的公共接口提取到它自己的包中，并实现一组“罐装”响应——只是供 UI 人员使用的硬编码数据。这允许您为 UI 团队提供他们将集成的界面以及示例数据，但无需您的实际业务逻辑。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T13:02:18.483

y 原则可能会帮助您分离您所要求的关注点。

它是一种系统地分离业务和技术关注点的方法。

以下字符图形描述了该方法：

```
 Business requirements      Technical requirements
+------   |                             |  ------+
|         v                             v        |
|  Business model               Technical model  |
\          \                            /      /
 \          \                        /       /
   \          \                    /       /
     \          > Mapping rules <        /
       \              |                /
         \            |              /
          \           v             /
           \    Implementation     /
            \         |           /
             \        |          /
              \       v         /
               Acceptance Tests 
```

如果映射规则一致并且可以重复应用，则该方法可以自动化。反向 y 分析可以显示是否是这种情况。

如果该方法适用，它将对效率产生深远影响。无需一遍又一遍地将业务问题映射到技术问题，该过程可以重复并最终实现自动化。

您可以在我的公司网页上找到更多信息。

# android - Android选项菜单按钮仅在第二次单击后有效

> ID：12910546
> 
> 赞同：-1
> 
> 时间：2012-10-16T08:32:51.323
> 
> 标签：android, button, onclicklistener, android-optionsmenu

我的应用程序中有以下代码。有一个登录按钮在我看来可以正常工作。我已经覆盖了视图上的选项菜单，并将登录代码放在附加到选项菜单的侦听器中。当我按下选项菜单登录按钮时，第一次点击没有任何反应，但在随后的点击中一切正常。为什么是这样？

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // TODO Auto-generated method stub
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.layout.menuentryoptionsmenu, menu);
        return true;

    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
switch (item.getItemId()) {

        case R.id.login:
                        item.setOnMenuItemClickListener(new OnMenuItemClickListener(){

                            @Override
                            public boolean onMenuItemClick(MenuItem item) {
                                // TODO Auto-generated method stub
                                Log.e(TAG, "login clicked from opts menu");
                                 compId = "100";
                                    String theUsername = userName.getText().toString();
                                    thePassword = passwordPin.getText().toString();
                                    String loginType = "1";

                                    String[] params = new String[]{compId, theUsername, thePassword, loginType};

                                    //validate user Asynchonously on background thread
                                    AsyncValidateCarer avc = new AsyncValidateCarer();
                                    avc.execute(params);
                                return true;
                            }});

            return true;

        case R.id.changeuser:
            if(isAllowChangeUser.equalsIgnoreCase("false")){
            item.setVisible(false);
            }
            return true;

        default:

            return super.onOptionsItemSelected(item);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:36:22.717

移除点击监听器。只需将整个登录代码放在`case R.id.login:`.

那是因为 onOptionsItemSelected 已经是点击了，不用再创建和设置了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:37:57.437

似乎第一次单击选项菜单项时，您只是添加了 OnMenuItemClickListener 侦听器。第二次单击时，您将触发该侦听器。

Try removing the onMenuItemClickListener code and put the code in your onMenuItemClick function into the switch statement directly.

# java - Jodconverter 异常：无法在 windows 中启动和连接

> ID：12910548
> 
> 赞同：0
> 
> 时间：2012-10-16T08:33:01.917
> 
> 标签：java, exception, jodconverter

为什么我得到以下异常..

我坚持了几天这个问题..

请帮我..

```
INFO: ProcessManager implementation is WindowsProcessManager

org.artofsolving.jodconverter.office.OfficeException: failed to start and connect

                at org.artofsolving.jodconverter.office.ManagedOfficeProcess.startAndWait(ManagedOfficeProcess.java:61)

                at org.artofsolving.jodconverter.office.PooledOfficeManager.start(PooledOfficeManager.java:102)

                at org.artofsolving.jodconverter.office.ProcessPoolOfficeManager.start(ProcessPoolOfficeManager.java:59)

                at com.hiringsteps.ats.util.service.impl.UtilService.convertWord2Pdf(UtilService.java:132)

                at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

                at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)

                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)

                at java.lang.reflect.Method.invoke(Method.java:597)

                at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)

                at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)

                at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)

                at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)

                at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)

                at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)

                at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)

                at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)

                at $Proxy51.convertWord2Pdf(Unknown Source)

                at com.hiringsteps.ats.applicant.facade.impl.ApplicantFacade.convert2PdfNHighlight(ApplicantFacade.java:553)

                at com.hiringsteps.ats.applicant.facade.impl.ApplicantFacade.register(ApplicantFacade.java:433)

                at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

                at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)

                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)

                at java.lang.reflect.Method.invoke(Method.java:597)

                at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)

                at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)

                at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)

                at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)

                at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)

                at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)

                at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)

                at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)

                at $Proxy65.register(Unknown Source)

                at com.hiringsteps.ats.applicant.dwr.impl.ApplicantDwr.register(ApplicantDwr.java:107)

                at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

                at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)

                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)

                at java.lang.reflect.Method.invoke(Method.java:597)

                at org.directwebremoting.impl.ExecuteAjaxFilter.doFilter(ExecuteAjaxFilter.java:34)

                at org.directwebremoting.impl.DefaultRemoter$1.doFilter(DefaultRemoter.java:472)

                at org.directwebremoting.impl.DefaultRemoter.execute(DefaultRemoter.java:475)

                at org.directwebremoting.impl.DefaultRemoter.execute(DefaultRemoter.java:323)

                at org.directwebremoting.servlet.PlainCallHandler.handle(PlainCallHandler.java:52)

                at org.directwebremoting.servlet.UrlProcessor.handle(UrlProcessor.java:101)

                at org.directwebremoting.spring.DwrController.handleRequestInternal(DwrController.java:256)

                at org.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)

                at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)

                at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)

                at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)

                at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)

                at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)

                at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)

                at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)

                at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)

                at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:362)

                at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)

                at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)

                at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:726)

                at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)

                at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:206)

                at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)

                at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)

                at org.mortbay.jetty.Server.handle(Server.java:324)

                at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)

                at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:842)

                at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:648)

                at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)

                at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)

                at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)

                at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:450)

Caused by: java.util.concurrent.ExecutionException: org.artofsolving.jodconverter.office.OfficeException: could not establish connection

                at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)

                at java.util.concurrent.FutureTask.get(FutureTask.java:83)

                at org.artofsolving.jodconverter.office.ManagedOfficeProcess.startAndWait(ManagedOfficeProcess.java:59)

                ... 68 more 
```

我的代码是

```
public  void convertWord2Pdf(String inputPath, String outputPath ) {    
        try {    
            File inputFile = new File(inputPath);

            File outputFile = new File(outputPath);

            OfficeManager officeManager = new DefaultOfficeManagerConfiguration().buildOfficeManager();

            officeManager.start(); // may tweak the start and stop code to appear elsewhere for additional efficiency

            DocumentFormat docFormat = new DocumentFormat("Portable Document Format", "pdf", "application/pdf");

            Map map = new HashMap();

            map.put("FilterName", "writer_pdf_Export");

            PropertyValue[] aFilterData = new PropertyValue[1];

            aFilterData[0] = new PropertyValue();

            aFilterData[0].Name = "SelectPdfVersion";

            aFilterData[0].Value = 1;

            map.put("FilterData", aFilterData);

            docFormat.setStoreProperties(DocumentFamily.TEXT, map);

            OfficeDocumentConverter docConverter = new OfficeDocumentConverter(officeManager);

            docConverter.convert(inputFile, outputFile, docFormat);

            officeManager.stop(); 

        } catch (Throwable e) {          

            e.printStackTrace();    
        }
    } 
```

在我的 pom.xml

```
<dependency>

        <groupId>org.artofsolving.jodconverter</groupId>

        <artifactId>jodconverter-core</artifactId>

        <version>3.0-beta-3</version>

</dependency> 
```

早些时候我的代码是

```
public  void convertWord2Pdf(String inputPath, String outputPath ) {  
        try {
            File inputFile = new File(inputPath);
            File outputFile = new File(outputPath);           

            OpenOfficeConnection connection = new SocketOpenOfficeConnection(8100);

            connection.connect();         

            DocumentConverter converter = new OpenOfficeDocumentConverter(connection);

            converter.convert(inputFile, outputFile);

            //close the connection

            connection.disconnect();
        }

        catch (Throwable e) { 
            e.printStackTrace();
        }  
    } 
```

在 pom.xml 中

```
<dependency>

    <groupId>com.artofsolving</groupId>

    <artifactId>jodconverter</artifactId>

    <version>2.2.2</version>           

</dependency> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T09:00:19.660

您的代码看起来没问题，但似乎 open office 服务没有运行，因此 JODConverter 无法连接到它，因此出现异常 ( `org.artofsolving.jodconverter.office.OfficeException: failed to start and connect`)。如果它正在运行，则可能是端口错误。

您可以查看您正在使用的端口，并尝试确定它是否真的可以运行。

从这个来源：[http ://www.artofsolving.com/node/10](http://www.artofsolving.com/node/10)

> JODConverter 需要连接到正在运行的 OpenOffice.org 实例才能执行文档转换。
> 
> 这与通常启动 OpenOffice.org 程序不同。OpenOffice.org 可以配置为作为服务运行并侦听 TCP 端口上的命令；有几种方法可以完成此操作，但最简单的方法是使用以下选项从命令行启动它：

您可以使用以下方式启动服务：

`soffice -headless -accept="socket,host=127.0.0.1,port=8100;urp;" -nofirststartwizard`

windows下的帮助请看：

*   [http://www.artofsolving.com/node/11](http://www.artofsolving.com/node/11)
*   [http://community.nuxeo.com/5.3/books/nuxeo-book/html/admin-openoffice.html](http://community.nuxeo.com/5.3/books/nuxeo-book/html/admin-openoffice.html)

# jquery - 删除 jquery datepicker alt 中的 3 个点

> ID：12910549
> 
> 赞同：7
> 
> 时间：2012-10-16T08:33:06.523
> 
> 标签：jquery, yii

我正在通过 YII 框架使用 jquery datepicker 并使用图像。这张图片有`title`而且`alt`我无法删除它们

这是我在 YII 中显示图像的代码

```
$this->widget('zii.widgets.jui.CJuiDatePicker', array(
'name' => 'sso_register[dob]',
//'model' => $model,
'attribute' => 'dob',
'value' => $dbText,
'options' => array(
'changeMonth' => true,
'changeYear' => true,
'dateFormat' => 'dd/mm/yy',
'yearRange' => "-100:+0",
'maxDate' => '31/12/2007', //day can choose >= tomorrow
'buttonImage' => Yii::app()->baseUrl . '/images/date_picker.png',
'buttonImageOnly' => true,
'showButtonPanel' => false,
'showOn' => 'button',
'altField' => '',
),
'htmlOptions' => array(
'class' => 'inputfield-middleside-date',
'readonly' => 'true',
'style' => 'position: relative; z-index: 100;',
'tabindex' => '7',
'alt'=>'',
'title'=>'',
)
)); 
```

有什么方法可以在所有浏览器上删除图像 alt 属性中的这 3 个点？谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T08:54:29.640

添加`'buttonText'=>'',`将解决问题

[http://api.jqueryui.com/datepicker/#option-buttonText](http://api.jqueryui.com/datepicker/#option-buttonText)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T21:28:23.693

如果使用传统功能，

您可以使用

```
buttonText : '', 
```

带有光标指针的完整示例，使用日、月和年重定向：

```
<script> 
    $("#calendario").datepicker({
        buttonImage: '/images/calendario2.png',
        buttonImageOnly: true,
        changeMonth: true,
        changeYear: true,
        showOn: 'both',         
        buttonText : '',        
        onSelect: function(date, instance) {            
            var date = $(this).datepicker('getDate'),
            dia  = date.getDate(),  
            mes = date.getMonth() + 1,              
            agno =  date.getFullYear();
            window.location = "caja.php?dia="+dia + '&mes=' + mes + '&agno=' + agno;        }
     });        
     $( ".ui-datepicker-trigger" ).css('cursor','pointer');    
</script> 
```

# iphone - 无法安装从 Xcode 4.5 创建的 .ipa

> ID：12910556
> 
> 赞同：1
> 
> 时间：2012-10-16T08:33:32.697
> 
> 标签：iphone, ios, xcode

我正在 xcode 4.5 中开发我的应用程序，我想创建`.ipa`文件以将项目传输到客户端的设备。但不幸的是我无法将它安装在设备中。给出一个弹出窗口说“无法安装”。

我已经创建了 ipa 并从 xcode 4.0.2 安装它。所以我知道这个过程。我想我也给出了正确的配置文件。有什么理由或者任何人都可以在 xcode 4.5 中给我一个关于这个的教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:56:53.480

您是否使用包含客户端设备 UDID 的临时分发配置文件构建应用程序？

或者，使用 Testflight 非常适合这种事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:25:32.813

回复。我在 entitlements.plist 文件中发现解决方案是一个名为 get-task-allow 的属性。我不得不将其设置为否。xcode 4.5 发生了什么事。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:52:41.393

假设 ipa 是正确的，客户端设备是否运行 ipa 支持的操作系统（检查项目的部署目标）？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T03:11:27.753

执行安装时，您在设备的 Xcode Organizer 控制台中看到了什么？控制台中可能会出现一条错误消息，可为您提供线索。

.ipa 文件名中是否有任何不安全的字符？我曾经遇到过 iTunes 安装应用程序并将 .ipa 文件名更改为应用程序名称的情况。好吧，应用程序名称中有一个“/”，这在文件名中效果不佳。控制台向我显示了发生的错误。

如果您不使用连接到 Xcode 的设备进行安装，您可以使用 iPhone 配置实用程序在远程机器上观看/录制控制台。

# html - 容器中具有相同 z-index 参数的弹出覆盖问题

> ID：12910561
> 
> 赞同：0
> 
> 时间：2012-10-16T08:33:50.657
> 
> 标签：html, css, overlay, z-index, layer

我有这个页面[http://jsfiddle.net/UFTSK/2/](http://jsfiddle.net/UFTSK/2/)当您将鼠标悬停在图像上时，会出现弹出块覆盖错误。如果我删除标签中的 z-index ( [http://jsfiddle.net/UFTSK/3/](http://jsfiddle.net/UFTSK/3/) )，一切正常。但是在IE7中同样的问题。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:47:44.163

我使用 jQuery 动态更新弹出窗口和锚点的 z-index 并更改弹出窗口的位置，然后就可以了。

[http://jsfiddle.net/KwB9k/](http://jsfiddle.net/KwB9k/)

# javascript - jQuery 记忆游戏 – if (text != text) {reload page}

> ID：12910567
> 
> 赞同：0
> 
> 时间：2012-10-16T08:34:03.043
> 
> 标签：javascript, jquery

我正在尝试制作一个小记忆游戏，但我遇到了一些 jQuery 问题：游戏仅使用代码制作，因此配对由 html-symbols 组成。如果两个单击的“图块”的符号不相同，我想要的是重新加载页面。我试过了`if ($(this).text() != $(".active").text()) { location.reload(); }`，它似乎不起作用。我是 jQuery n00b，如果我犯了明显的愚蠢错误，很抱歉^__^

链接： http: [//www.carlpapworth.com/htmlove/memory.html](http://www.carlpapworth.com/htmlove/memory.html)

HTML：

```
<body>
<header>
<div id="headerTitle"><a href="index.html">&lt;html<span class="heart">&hearts;</span>ve&gt;</a>
            </div>
            <div id="help">
                <h2>?</h2>
                <div id="helpInfo">
                    <p>How many tiles are there? Let's see [calculating] 25...</p>
                </div>
            </div>
        </header>
    <div id="reward">
        <div id="rewardContainer">
            <div id="rewardBG" class="heart">&hearts;
            </div>
            <p>OMG, this must be luv<br><a href="index.html" class="exit">x</a></p>
        </div>
    </div>  
    <div id="pageWrap">
            <div id="mainContent">
            <!-- DON'T BE A CHEATER !-->
                <table id="memory">
                    <tr>
                        <td class="pair1"><a>&Psi;</a></td>
                        <td class="pair2"><a>&para;</a></td>
                        <td class="pair3"><a>&Xi;</a></td>
                        <td class="pair1"><a>&Psi;</a></td>
                        <td class="pair4"><a >&otimes;</a></td>
                    </tr>
                    <tr>
                        <td class="pair5"><a>&spades;</a></td>
                        <td class="pair6"><a >&Phi;</a></td>
                        <td class="pair7"><a>&sect;</a></td>
                        <td class="pair8"><a>&clubs;</a></td>
                        <td class="pair4"><a>&otimes;</a></td>
                    </tr>
                    <tr>
                        <td class="pair9"><a>&Omega;</a></td>
                        <td class="pair2"><a>&para;</a></td>
                        <td id="goal">
                <a href="#reward" class="heart">&hearts;</a>
                        </td>
                        <td class="pair10"><a>&copy;</a></td>
                        <td class="pair9"><a>&Omega;</a></td>
                    </tr>
                    <tr>
                        <td class="pair11"><a>&there4;</a></td>
                        <td class="pair8"><a>&clubs;</a></td>
                        <td class="pair12"><a>&dagger;</a></td>
                        <td class="pair6"><a>&Phi;</a></td>
                        <td class="pair11"><a>&there4;</a></td>
                    </tr>
                    <tr>
                        <td><a class="pair12">&dagger;</a></td>
                        <td><a class="pair5">&spades;</a></td>
                        <td><a class="pair10">&copy;</a></td>
                        <td><a class="pair3">&Xi;</a></td>
                        <td><a class="pair7">&sect;</a></td>
                    </tr>
                </table>
            <!-- DON'T BE A CHEATER !-->
            </div>
    </div> <!-- END Page Wrap -->
    <footer>
        <div class="heartCollection">
            <p>collect us if u need luv:<p>
            <ul>
                <li><a id="collection1">&hearts;</a></li>
                <li><a id="collection2">&hearts;</a></li>
                <li><a id="collection3">&hearts;</a></li>
                <li><a id="collection4">&hearts;</a></li>
                <li><a id="collection5">&hearts;</a></li>
                <li><a id="collection6">&hearts;</a></li>
            </ul>
        </div>
        <div class="credits">with love from Popm0uth ©2012</div>
    </footer> 
```

Javascript：

```
$(document).ready(function() {

    $('td').click(openCard);

    function openCard(){
        $(this).addClass('opened');
        $(this).find('a').addClass('visible');
        if ($(".active")[0]){
            function match(){ 
                if  ($(this).text() != $(".active").text()) {
                location.reload();
                }       
                else {
                $(".active").removeClass("active");
                }
            }
        }
        else {
            $(this).addClass("active");
        }
    }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:56:13.130

尝试这样的事情

```
if ($(".active")[0]){

            if  ($(this).text() != $(".active").text()) {
            location.reload();
            }       
            else {
            $(".active").removeClass("active");
            }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:58:42.640

这里有几件事出了问题。首先，您`match()`在块中声明您的函数`if ($(".active")[0])`，这是不正确的。您应该在`if`块之外，甚至在`openCard`函数之外声明它，并使用`match()`.

此外，您需要在将`this`对象存储在变量中后传入您的对象，否则将无法访问它。像这样的东西：

```
var thisCard = $(this).text();
var activeCard = $(".active").text();

$(document).ready(function() {

    $('td').click(openCard);

    function openCard(){
        var that = $(this);
        that.addClass('opened');
        that.find('a').addClass('visible');
        if ($(".active")[0]){
            match(that);
        }
        else {
            that.addClass("active");
        }
    }
    function match(that){ 
        if  (that.text() != $(".active").text()) {
            location.reload();
        }       
        else {
            $(".active").removeClass("active");
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T09:01:35.290

您已`function match()`在 `if ($(".active")[0])`块内定义，但您没有在任何地方调用它。这就是为什么，它永远不会进入那个函数。

顺便说一句，尝试使用 FireBug（如果您使用 Firefox）或开发工具（如果您使用 chrome）来调试您的 javascript，这样您就会知道问题出在哪里。这将使调试更容易。

# android - CusotomSwitch 绘制为 Button

> ID：12910570
> 
> 赞同：1
> 
> 时间：2012-10-16T08:34:23.663
> 
> 标签：android, android-widget

我正在写一个CustomSwitch。它是从[Switch](http://developer.android.com/reference/android/widget/Switch.html)扩展而来的。在`onDraw()`方法中的某些情况下，我想将CustomSwitch 绘制为Button。

我尝试了几种方法，但都没有奏效。我无法调用`((Button)this).draw(canvas);`会`onDraw()`导致堆栈溢出的原因。我试图克隆 CustomSwitch 或对其进行充气并将其转换为 Button，但这两种方法都没有奏效。

有没有人知道如何将 CustomSwitch 绘制为 Button？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:12:08.653

好的，这就是我所做的。

```
private Button drawButton;
public CustomSwitch(Context context) {
    super(context);
    this.drawButton = new Button(context);
}
public CustomSwitch(Context context, AttributeSet attrs) {
    super(context, attrs);
    this.drawButton = new Button(context, attrs);
}
public CustomSwitch(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    this.drawButton = new Button(context, attrs, defStyle);
}
@Override
public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    this.drawButton.measure(widthMeasureSpec, heightMeasureSpec);
};
@Override
protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
    super.onLayout(changed, left, top, right, bottom);
    this.drawButton.layout(left, top, right, bottom);
};
@Override
protected void onDraw(android.graphics.Canvas canvas) {
    //...
    if(condition) {
        this.drawButton.draw(canvas);
    }
} 
```

# java - 验证数字签名时如何绕过证书过期验证

> ID：12910571
> 
> 赞同：2
> 
> 时间：2012-10-16T08:34:26.377
> 
> 标签：java, .net, digital-signature, pkcs#7

当我使用过期的公共证书验证 Java 中的数字签名 (PKCS#7) 时遇到问题。更详细地说，在 .NET 中签名数据然后**在 Java 中验证的情况下是可以的，但在 Java中签署数据并在 Java 中****验证的**情况下会出现 Certificate Expired 错误。在这两种情况下，我都使用了相同的验证方法、相同的私钥和公共证书。

请告诉我为什么？如果我想在验证数字签名时绕过Certificate Expired验证该怎么办？

谢谢，

C#.NET 中的签名方法

```
private static string SignData(byte[] data, string pkcs12FileUrl, string pkcs12Password)
    {
        X509Certificate2 signerCert = new X509Certificate2(pkcs12FileUrl, pkcs12Password);
        ContentInfo content = new ContentInfo(data);
        SignedCms signed = new SignedCms(content, true);
        CmsSigner signer = new CmsSigner(signerCert);
        signer.IncludeOption = X509IncludeOption.None;
        signed.ComputeSignature(signer);

        return Convert.ToBase64String(signed.Encode());
    } 
```

Java中的签名方法

```
public static String SignData(byte[] data, String pkcs12File, String pkcs12Password)
    throws Exception
{
        if(Security.getProvider("BC")==null)
        {
            Security.addProvider(new BouncyCastleProvider());
        }
        KeyStore keyStore = getPkcs12Info(pkcs12File, pkcs12Password);

        Enumeration<String> aliasesList = keyStore.aliases();
        String aliasName = "";
        while (aliasesList.hasMoreElements())
        {
            aliasName = aliasesList.nextElement().toString();
        }

        X509Certificate signerCert = (X509Certificate) keyStore.getCertificate(aliasName);
        PrivateKey privateKey = (PrivateKey) keyStore.getKey(aliasName,pkcs12Password.toCharArray());

        CMSSignedDataGenerator Signer = new CMSSignedDataGenerator();
        Signer.addSigner(privateKey, signerCert, CMSSignedDataGenerator.DIGEST_SHA1);

        CMSProcessableByteArray digestContent = new CMSProcessableByteArray(data);

        CMSSignedData Signed = Signer.generate(digestContent, false, "BC");
        return Base64.encode(Signed.getEncoded());

}

private static  KeyStore getPkcs12Info(String pkcs12File, String pkcs12Password) throws Exception
{
    //KeyStore keyStore = KeyStore.getInstance("PKCS12", "BC");
        KeyStore keyStore = KeyStore.getInstance("PKCS12");
        keyStore.load(new FileInputStream(pkcs12File), pkcs12Password.toCharArray());
        return keyStore;
} 
```

Java中的验证方法

```
public static boolean VerifySignature(byte[] data, String digitalSignature, InputStream publicCertFile) throws Exception
{
    if(Security.getProvider("BC")==null)
    {
        Security.addProvider(new BouncyCastleProvider());
    }
    CertificateFactory factory = CertificateFactory.getInstance("X509","BC");
    X509Certificate publicCert = (X509Certificate)factory.generateCertificate(publicCertFile);
    CMSProcessableByteArray digestContent = new CMSProcessableByteArray(data);
    CMSSignedData Signed = new CMSSignedData(digestContent,Base64.decode(digitalSignature));
    SignerInformation Signer=(SignerInformation)Signed.getSignerInfos().getSigners().iterator().next();
    return Signer.verify(publicCert, "BC");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:34:31.797

我找到了 C# SignedCms 的这个主题[Java 实现，](https://stackoverflow.com/questions/11013111/java-implementation-of-c-sharp-signedcms?rq=1)并尝试在 Java 中更改我的 Sign 方法的代码。最后，它工作得很好。这是我在Java中更新的代码

```
public static String SignData(byte[] data, String pkcs12File, String pkcs12Password)
    throws Exception
{
        ByteArrayOutputStream byteArrOut = new ByteArrayOutputStream();
        DEROutputStream derOut = new DEROutputStream(byteArrOut);
        try
        {
            if(Security.getProvider("BC")==null)
            {
                Security.addProvider(new BouncyCastleProvider());
            }
            KeyStore keyStore = getPkcs12Info(pkcs12File, pkcs12Password);

            Enumeration<String> aliasesList = keyStore.aliases();
            String aliasName = "";
            while (aliasesList.hasMoreElements())
            {
                aliasName = aliasesList.nextElement().toString();
            }

            X509Certificate signerCert = (X509Certificate) keyStore.getCertificate(aliasName);
            PrivateKey privateKey = (PrivateKey) keyStore.getKey(aliasName, pkcs12Password.toCharArray());

            List certList = new ArrayList();
            Store certs = new JcaCertStore(certList);

            JcaSimpleSignerInfoGeneratorBuilder builder = new JcaSimpleSignerInfoGeneratorBuilder().setProvider("BC").setDirectSignature(true);

            CMSSignedDataGenerator signer = new CMSSignedDataGenerator();
            signer.addSignerInfoGenerator(builder.build("SHA1withRSA", privateKey, signerCert));
            signer.addCertificates(certs);

            CMSTypedData msg = new CMSProcessableByteArray(data);
            CMSSignedData signed = signer.generate(msg, false);

            derOut.writeObject(signed.toASN1Structure().toASN1Primitive());
            return Base64.encode(byteArrOut.toByteArray());
        }
        catch(Exception ex)
        {
            throw ex;
        }
        finally
        {
            derOut.close();
            byteArrOut.close();
        }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:51:04.670

如果您使用已过期的证书签署文件，那已经毫无意义。证书已过期，不应再用于新用途。验证签名证书已过期的文档是有意义的，因为至少您知道在文档签名时证书是有效的。除非它显然是由 .NET 签名的。对我来说，这听起来像是 .NET 中的一个错误。

# scheme - 使用方案在二叉搜索树中插入节点键和值

> ID：12910579
> 
> 赞同：1
> 
> 时间：2012-10-16T08:34:53.693
> 
> 标签：scheme, racket, binary-search-tree

我在树形图中插入一个键`key`和一个值，返回一个新树，其中一个节点包含适当位置的键和值。`val``t`

我有这个定义：

```
(define (tree-node key value left right)(list key value left right))

(define (get-key tn) (node_key tn))
(define (get-val tn) (node_val tn))
(define (get-left tn) (node_left tn))
(define (get-right tn) (node_right tn))

(define (node_key tn) (list-ref tn 0))
(define (node_val tn) (list-ref tn 1))
(define (node_left tn) (list-ref tn 2))
(define (node_right tn) (list-ref tn 3)) 
```

我正在尝试这种`insert`方法

```
(define (insert t key val)

  (cond (empty? t))
  (tree-node (key val '() '()))

  ((equal key (get-key t))
   (tree-node (key val (get-left t) (get-right t)))

   ((<key (get-key t))
    (tree-node ((get-key t) (get-val t) (insert (get-left t key val)) (get-right t)))
    (tree-node ((get-key t) (get-val t) (get-left t) (insert (get-right t key val))))))) 
```

我用这个来定义

```
(define right (insert (insert empty 3 10) 5 20)) 
```

我在 DrRacket 中遇到了这个错误

```
application: not a procedure;
expected a procedure that can be applied to arguments
given: (list 0 1 2)
arguments...: [none] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:02:52.287

正在发生的事情是一个树节点（它只是一个列表）被返回到一个预期函数的位置。Scheme 无法执行该列表 - 它不是一个函数，所以它在抱怨。

我怀疑这是因为你弄乱了括号。

```
(cond (empty? t)) 
```

是一个自包含的复合表达式。它被评估，返回 t 的值。之后的表达式不会作为条件的一部分进行评估。

# mysql - 更新所有行并在其之前添加文本

> ID：12910583
> 
> 赞同：3
> 
> 时间：2012-10-16T08:35:09.013
> 
> 标签：mysql, sql

下面是我的桌子的样子

```
create table tab (id INT, fullname varchar(100)); 
```

数据是

```
insert into tab values
(1,'Full Name 1'),
(2,'Full Name 2'),
(3,'Full Name 3'),
(4,'Full Name 4'),
(5,'Full Name 5'),
(6,'Full Name 6'); 
```

我想用`fullname`as更新表格`My Full Name is + actuallfullname`。例如 id 1 的数据应该是`My Full Name is Full Name 1`.

知道如何在一个查询中完成这项工作吗？

使用下面的查询，它会执行 n 次，因为我有这么多的记录。

```
UPDATE tab SET fullname='My Full Name is Full Name 1'; 
```

## [sqlfiddle](http://sqlfiddle.com/#!2/f1f1f/1)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T08:36:37.763

使用**[`CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)**.

```
UPDATE tab 
SET fullname = CONCAT('My Full Name is ', fullname) 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/7c2fc/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T08:37:13.360

您可以使用 MySQL 的[`CONCAT()`](http://dev.mysql.com/doc/en/string-functions.html#function_concat)功能：

```
UPDATE tab SET fullname = CONCAT('My Full Name is ', fullname); 
```

但这真的属于数据库吗？听起来像是一个人通常会在应用程序的表示层执行的操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T08:36:46.093

参考[`CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)

```
UPDATE tab SET fullname=CONCAT('My Full Name is ',fullname); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T08:37:59.017

```
UPDATE tab SET fullname = CONCAT('My Full Name is ' , fullname) 
```

# jquery - 将 jquery 参数传递给控制器 操作

> ID：12910589
> 
> 赞同：0
> 
> 时间：2012-10-16T08:35:31.200
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

我想将 2 个带有 ajax 函数的参数传递给控制器​​操作，但我使用它的代码不起作用。动作被调用但没有参数；下面的代码有什么问题？请帮忙。谢谢！

查看代码：

```
 <fieldset>
            @Html.Label("Start date: *")
            @Html.TextBoxFor(model => model.startDate, new { Class = "calendar", data_mini = true, data_role = "datebox", data_options = "{\"mode\":\"calbox\",\"useNewStyle\": true,\"overrideStyleClass\": \"calendar\",\"fieldsOrderOverride\": [\"d\",\"m\",\"y\"],\"headerFormat\":\"%A,%d, %-m, %Y\",\"dateFormat\":\"DD-MM-YYYY\",\"useTodayButton\":true}" })
        </fieldset>
        <fieldset>
            @Html.Label("End date: *")
            @Html.TextBoxFor(model => model.endDate, new { Class = "calendar", data_mini = true, data_role = "datebox", data_options = "{\"mode\":\"calbox\",\"useNewStyle\": true,\"overrideStyleClass\": \"calendar\",\"fieldsOrderOverride\": [\"d\",\"m\",\"y\"],\"headerFormat\":\"%A,%d, %-m, %Y\",\"dateFormat\":\"DD-MM-YYYY\",\"useTodayButton\":true}" })
        </fieldset>
        <fieldset>
            @Html.Label("Submited: *")
        </fieldset>
        <a data-role="button" id="search" name="search" data-theme="a" class="book ui-btn ui-btn-corner-all ui-shadow ui-btn-up-a">
        <span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text">Search</span></span></a> 
```

jQuery代码：

```
<script type="text/javascript">
 $("#search").click(function () {
    GetNewDaysList();
   });
//gets elements for the selected dates
function GetNewDaysList() {
var action = '@Url.Action("GetNewDays", "ApproveWork")';
var criteria = new Array($("#startDate").val(),$("#endDate").val());
    var opt = {
        type: "GET",
        data: { criteria: criteria },
        url: action,
        success: DaysListSuccess,
        error:DaysListFailed
    };
    jQuery.ajax(opt);
}

  function DaysListSuccess(data) {
    if (data != undefined) {
        $.mobile.hidePageLoadingMsg();
        $('ul').hide();
        $("#employeeDays").html(data).trigger('create');
        $("#searchSection").show();
        $("#employeeDays").show();
    }
}

  function DaysListFailed() {
 //
}
}); 
```

控制器代码：

```
 [HttpGet]
      public ActionResult GetNewDays(IEnumerable<string> criteria)
    {
        List<string> criteriaList = criteria.ToList();
        DateTime start = DateTime.ParseExact(criteriaList[1],"dd-MM-yyyy", System.Globalization.CultureInfo.InvariantCulture);
        string startToString = start.ToString("yyyyMMdd");
        DateTime end = DateTime.ParseExact(criteriaList[2], "dd-MM-yyyy", System.Globalization.CultureInfo.InvariantCulture);
        string endToString = end.ToString("yyyyMMdd");            
        List<string> daysList = new List<string>();
       var model = new ApproveWorkModel();
       model.daysList = daysList;
       return PartialView ( "EmployeeDays",model);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:40:20.837

用这个：

```
var opt = {
    type: "GET",
    data: { 
            startDate:  $("#startDate").val(),
            endDate: $("#endDate").val()
    },
    url: action,
    success: DaysListSuccess,
    error:DaysListFailed
}; 
```

在控制器中：

```
public ActionResult GetNewDays(string startDate, string endDate) 
```

# java - 二维字符串传递给 JTable

> ID：12910599
> 
> 赞同：0
> 
> 时间：2012-10-16T08:35:53.403
> 
> 标签：java, swing, file-io, csv, jtable

我正在尝试从 CSV 文件中获取数据，将其解析为二维数组，然后将其返回到在 JTable 中显示它的 GUI。好像不太顺利！

从 CSV 获取的方法

```
static String[][] readGUIFromPropertyFile(String sFileName, String userName) throws FileNotFoundException
{
       String thisLine;
       String tempArray[][] = new String[20][4];
       int i = 0;
       BufferedReader reader = new BufferedReader(new FileReader(sFileName));
        try
        {
           while((thisLine = reader.readLine()) != null)
                {
                    String propertyDetails[] = thisLine.split(",");

                    if (propertyDetails[0].equals(userName))
                    {
                        tempArray[i][0] = propertyDetails[1];
                        tempArray[i][1] = propertyDetails[2];
                        tempArray[i][2] = propertyDetails[3];
                        tempArray[i][3] = propertyDetails[4];
                        tempArray[i][4] = propertyDetails[5];
                        i++;
                    }
               }
           return tempArray;
        }
        catch(IOException e)
        {
            System.out.print("\nProperties do not exist\n"); 
            e.printStackTrace();
        } 
        finally{
            try
            {   reader.close();
            }catch (IOException e){}}
        return tempArray;
            }
} 
```

图形用户界面代码

```
else if (event.getSource() == reload)
            {
                try {
                    data = CSVWrite.readGUIFromPropertyFile(propertyFile, userName);
                    JOptionPane.showMessageDialog(frame, "Properties Loaded");
                    userPropertyView.add(displayProperties);
                } catch (FileNotFoundException e) {
                    JOptionPane.showMessageDialog(frame, "Properties Not Loaded");
                    e.printStackTrace();
                }
            } 
```

我让它与命令界面一起工作，所以我知道代码正在工作，但我必须同时实现 GUI 和命令行。我可以从 GUI 写入 CSV，没问题，但无法显示它。我已经研究了 ArrayLists，实际上我明天有一个关于它们的讲座，所以这也是一种可能性。

我不能使用 OpenCSV，因为我必须为此使用默认库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T08:41:01.697

*   将[String tempArray[][]](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)直接作为 JTables构造函数[JTable(Object[][] rowData, Object[] columnNames)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html)

*   更好的方法应该是添加一个新行`TableModel`，而不是在运行时替换 JTable，更多在教程[创建表模型](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)

# java - 原始值转换

> ID：12910602
> 
> 赞同：3
> 
> 时间：2012-10-16T08:36:06.763
> 
> 标签：java, primitive-types

这是Java中的代码片段：

```
int i = 1234567890;     
float f = i;    
System.out.println(i - (int)f); 
```

为什么输出不等于0？它执行扩展，因此不应该丢失数据。然后，您只需截断该值。最好的祝福

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T08:44:52.170

看到不同

```
 int i = 1234567890;     
 float f = i;    
 System.out.println(i - f);
 System.out.println((int)f);
 System.out.println(f);
 System.out.println(i-(int)f); 
```

输出：

```
0.0

1234567936

1.23456794E9

-46 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T08:37:50.990

你的错误在这里：

> 它执行扩展，因此不应该丢失数据。

这种说法是错误的。扩大并不意味着您不会丢失数据。

从[Java规范](http://docs.oracle.com/javase/specs/jls/se5.0/html/conversions.html#5.1.2)：

> 扩大原始转换不会丢失有关数值**整体大小的信息。**
> 
> 将 int 或 long 值转换为 float，或将 long 值转换为 double，**可能会导致精度损失**- 也就是说，结果可能会丢失值的某些最低有效位。在这种情况下，生成的浮点值将是整数值的正确舍入版本，使用 IEEE 754 舍入到最近模式（第 4.2.4 节）。

强调我的。

规范明确指出，*量级*不会丢失，但会丢失*精度。*

*扩大*这个词不是指数据类型的精度，而是指它的**范围**。浮点数比整数更宽，因为它们的范围更大。

> **整数**
> 
> 4 个字节，有符号（二进制补码）。-2,147,483,648 至 2,147,483,647。
> 
> **漂浮**
> 
> 4 字节，IEEE 754。覆盖范围从 1.40129846432481707e-45 到 3.40282346638528860e+38（正或负）。

如您所见，`float`具有更大的范围。但是，某些整数不能完全表示为浮点数。这种表示错误导致您的结果与 0 不同。存储在 f 中的实际值是 1234567936。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:39:27.143

扩大可能会失去精度。An`int`具有 32 位精度，而 a`float`具有 25 位精度（24 位尾数和隐含的最高位）。Java 认为`float`比 64 位更宽，`long`恕我直言有点疯狂

由于精度有 8 位差异，误差可能高达 +/-64 左右，因为它将`int`值四舍五入到最接近的`float`表示。

```
int err = 0;
for (int i = Integer.MAX_VALUE; i > Integer.MAX_VALUE / 2; i--) {
    int err2 = (int) (float) i - i;
    if (Math.abs(err2) > err) {
        System.out.println(i + ": " + err2);
        err = Math.abs(err2);
    }
} 
```

印刷

```
... deleted ...
2147483584: 63
2147483456: -64 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T08:40:34.833

你会惊讶地发现，即使这是真的：

```
(f==(f+1))==true 
```

给定`f`的是一个足够大的浮点数......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T08:41:13.980

```
int i = 1234567890;     
    float f = i;    
    System.out.println((int)f);
    System.out.println(i);
    System.out.println(i - (int)f); 
```

输出是：

```
1234567936
1234567890
-46 
```

看到不同。

比较整数浮点数具有更大的值。

# wordpress - 样式表子主题问题 - woothemes 画布

> ID：12910603
> 
> 赞同：0
> 
> 时间：2012-10-16T08:36:07.513
> 
> 标签：wordpress, canvas, themes

我在 ie8 中遇到了我的 wordpress (canvas) 网站的问题，并将其追溯到我的子主题标题中的样式表链接 - 这段代码：

```
href="<?php bloginfo('stylesheet_url'); ?>" 
```

在浏览器中翻译为“...canvas-child/style.css”，这是错误的 - 根据 woothemes 说明，您应该仅使用“custom.css”自定义子主题中的 css，并将“style.css”留在您的父“画布”主题。我真的需要知道 1\. 这是一个错误 2\. 这个 php 代码应该指向什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:48:12.570

查看：[http](http://codex.wordpress.org/Child_Themes) ://codex.wordpress.org/Child_Themes了解有关儿童主题的信息。

*style.css 是子主题中唯一需要的文件。它提供了 WordPress 识别子主题的信息头，并替换了父主题的 style.css。*

当您使用子模板时，只需将具有相同名称的文件复制到您的子主题并在此处输入您的调整。

# android - 在 phonegap 应用程序中隐藏 MainActivity 窗口

> ID：12910606
> 
> 赞同：1
> 
> 时间：2012-10-16T08:36:20.983
> 
> 标签：android, cordova, main-activity

我正在使用 phonegap (cordova-2.1.0) 开发一个 android 应用程序。

我的 MainActivity.java 代码如下 -

```
package com.app.myapp;

import android.os.Bundle;
import org.apache.cordova.*;

public class MainActivity extends DroidGap {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

**问题**：每当我启动应用程序时，它首先显示 MainActivity 窗口，然后显示实际的 HTML 代码。有没有办法摆脱 MainActivity 并直接显示 HTML？

提前致谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T16:20:49.180

将此添加到您的 AndroidManifest 应用程序标签中：

`android:theme="@android:style/Theme.NoTitleBar"`

应该做的伎俩。

# c# - MEF，ImportingConstructor 似乎导致错误

> ID：12910611
> 
> 赞同：1
> 
> 时间：2012-10-16T08:36:36.333
> 
> 标签：c#, c#-4.0, mef

我不断收到以下代码的以下错误：

```
Error: "No exports were found that match the constraint: 

ContractName    MefTestSample.Contracts.ICanDoSomethingImportant" 
```

Program.cs如下：

```
namespace MefTestSample
{
    class Program
    {
        private static CompositionContainer m_Container;

        static void Main(string[] args)
        {
            UseMockedUpTypes();
            ICanDoSomethingImportant cool = m_Container.GetExport<ICanDoSomethingImportant>().Value;
            cool.DoSomethingClever();
            Console.ReadLine();
        }

        private static void UseMockedUpTypes()
        {
            //The commented out section works just by itself.  
            /*
            m_Container =
                new CompositionContainer(
                    new AssemblyCatalog(
                        typeof(MefTestSample.Mocks.ClassesDoNotNecessarly).Assembly));
             */

            //This fails if i dont comment out the [ImportingConstructor] block.
            var assemblyCatalog1 = new AssemblyCatalog(typeof (MefTestSample.Mocks.ClassesDoNotNecessarly).Assembly);
            var myassembly = new AssemblyCatalog(typeof (ServiceLibrary.MoonService).Assembly);
            var aggregateCatalog = new AggregateCatalog(assemblyCatalog1, myassembly);
            m_Container = new CompositionContainer(aggregateCatalog);
        }
    }
} 
```

下面是 ClassesDoNotNecessarly 的代码：

```
namespace MefTestSample.Mocks
{
    [Export(typeof(ICanDoSomethingImportant))]
    public class ClassesDoNotNecessarly : ICanDoSomethingImportant
    {
        //private IServicesContract _isc;
        #region ICanDoSomethingImportant Members

        /* This seems to be causing the problem.
        [ImportingConstructor]
        public ClassesDoNotNecessarly([Import("Moon")]IServicesContract isc)
        {
            string temp = isc.DisplayMessage();
            Console.WriteLine(temp);
        }
        */

        public void DoSomethingClever()
        {
            Console.WriteLine("Hehe, I'm actually procrastinating!");        
        }

        #endregion
    }
} 
```

MoonService如下：

```
namespace ServiceLibrary
{
    [Export(typeof(IServicesContract))]
    public class MoonService : IServicesContract
    {
        public string DisplayMessage()
        {
            return "Moon services were accessed.";
        }
    }
} 
```

我认为问题是什么。如果我保留 program.cs 原样，并注释掉 ClassesDoNotNecessarly 类中的 [ImportingConstructor] 属性 + 构造函数，程序将显示该类中的文本。

如果我取消注释 [ImportingConstructor] 属性 n 构造函数，然后我开始收到此问题顶部显示的错误。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:06:43.747

去掉`[Import("Moon")]`构造函数中的，Export没有命名，所以Import不能命名为return。

# mysql - Mysql：不同实体的单独或公共关系表

> ID：12910616
> 
> 赞同：3
> 
> 时间：2012-10-16T08:36:53.153
> 
> 标签：mysql, database, database-design

在我的数据库中，我有不同的实体，如`todos`, `events`,`discussions`等。
每个实体都可以有`tags`, `comments`,`files`和其他相关项目。

现在我要设计这些表之间的关系，我想我必须从以下两种可能的解决方案中进行选择：

**1\. 分离的关系表**

所以我将创建`todos_tags`, `events_tags`, `discussions_tags`, `todos_comments`, `events_comments`,`discussions_comments`等表。

**2.常用关系表**

我将只创建这些表：`related_tags`、`related_comments`、`related_files`等，其结构如下：

**相关标签**

*   `entity`(event|discussion|todo|etc. - 作为枚举或 tinyint (1|2|3|etc.))
*   `entity_id`
*   `tag_id`

我应该使用哪种设计？

可能你会说：视情况而定，我认为这是正确的。

我的情况大部分时间（可能 70%+）我只需要查询其中一个实体（事件、讨论或待办事项），但在某些情况下，我需要它们都在同一个查询中（包括事件、讨论、待办事项）例如具有指定的标签）。**在这种情况下，如果我使用单独的关系表**，我将不得不在 3+ 表上进行联合（在我的情况下它可以是 5+ 表）。

每个表中的行数不会超过 1000-2000 行（事件、讨论、待办事项）；

正确的方法是什么？对此有哪些个人经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:39:49.450

第二种模式更具可扩展性。通过这种方式，您将能够扩展您的应用程序以构建涉及一种以上类型的查询。此外，即使是动态地，也可以轻松地将新类型添加到未来。此外，它允许更大的聚合自由度，例如允许您计算每种类型中存在多少行，或者在特定时间范围内创建了多少行。

另一方面，第一种设计除了速度之外并没有真正的优势：但是 MySQL 已经擅长处理这些类型的查询，对您来说足够快。您可以创建一个索引“实体”以使其顺利运行。如果将来您需要对表进行分区以提高速度，您可以在以后进行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T08:44:34.120

拥有一个单一的、常见的关系表（例如 related_tags）是一种更简单的设计，您可以在其中指定列中的实体类型，而不是拥有多个表。只需确保将实体和 tag_id 字段正确索引在一起以获得最佳性能。

# android - 解析复杂的肥皂响应

> ID：12910619
> 
> 赞同：4
> 
> 时间：2012-10-16T08:37:14.460
> 
> 标签：android, ksoap

我正在使用 wcf 服务的 android 中构建我的第一个应用程序。我正在使用 ksoap2 解析响应。响应实际上是在 C# 中定义的对象数组。我按照这个非常有用的[指南](http://seesharpgears.blogspot.gr/2010/10/web-service-that-returns-array-of.html)做了这个。现在我的问题是我需要使用一个 wcf 服务，该服务在 C# 中再次返回一个对象数组，但这次这些对象的一些属性是其他对象。所以我的问题是如何映射内部对象以便我可以解析它们的属性？

如果我不清楚，我需要解析这样的对象：

```
public class OutterObject {

     private InnerObject1 io1;
     private InnerObject2 io2;

} 
```

希望我足够清楚

好的，这是我的简化代码，我不能只发布我认为有问题的部分

```
 SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);

    Request.addProperty("connString",args.get(0));
    Request.addProperty("ClCode", args.get(1));
    Request.addProperty("TeCode", args.get(2));
    Request.addProperty("CourseDate", args.get(3));               

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);

    envelope.addMapping(namespace, "SRV_WeekProgramm",newSRV_WeekProgramm().getClass());
    envelope.addMapping(namespace, "Course", new Course().getClass());
    envelope.addMapping(namespace, "StudentHours", new StudentHours().getClass());

    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    androidHttpTransport.call(SOAP_ACTION, envelope);    

    Course response = (Course)envelope.bodyIn; //this is where it crashes 
```

这是抛出的异常： java.lang.ClassCastException: org.ksoap2.serialization.SoapObject cannot be cast to connectionInitializer.Course

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:13:25.240

这是一个对我有用的例子。
这是来自 Web 服务的响应消息类型

```
 <message name="loginUserResponse">
     <part name="code" type="xsd:int"/>
     <part name="desc" type="xsd:string"/>
     <part name="user" type="tns:user"/>
  </message> 
```

方法`loginUser`定义

```
<operation name="loginUser">
   <documentation>Login user.</documentation>
   <input message="tns:loginUserRequest"/>
   <output message="tns:loginUserResponse"/>
</operation> 
```

类`UserResponse`（外部）包含`User`属性：

```
public class UserResponse  implements KvmSerializable {
public int code;
public String desc;
public User user;
public Object getProperty(int arg0) {
    switch (arg0) {
    case 0:
        return code;
    case 1:
        return desc;
    case 2: 
        return user;
    default:
        break;
    }
    return null;
}

public int getPropertyCount() {
    return 3;
}
public void getPropertyInfo(int index, Hashtable arg1, PropertyInfo info) {
    switch (index) {
    case 0:
        info.type = PropertyInfo.STRING_CLASS;
        info.name = "code";
        break;
    case 1:
        info.type = PropertyInfo.STRING_CLASS;
        info.name = "desc";
        break;
    case 2:
        info.type = User.class;
        info.name = "user";
        break;
    default:
        break;
    }

}

public void setProperty(int index, Object value) {
    switch (index) {
    case 0:
        this.code = Integer.parseInt(value.toString());
        break;
    case 1:
        this.desc = value.toString();
        break;
    case 2:
        this.user = (User) value;
    default:
        break;
    }       
}
  } 
```

和`User`类（内）

```
 public class User implements KvmSerializable  {
public int user_id;
public String username;
public String email;
public String password;

public User() {

}

public Object getProperty(int index) {
    switch (index) {
    case 0:
        return user_id;
    case 1:
        return username;
    case 2:
        return email;
    case 3:
        return password;
    default:
        return null;
    }
}

public int getPropertyCount() {
    return 4;
}

public void getPropertyInfo(int index, Hashtable arg1, PropertyInfo info) {
    switch (index) {
    case 0:
        info.type = PropertyInfo.INTEGER_CLASS;
        info.name = "user_id";
        break;
    case 1:
        info.type = PropertyInfo.STRING_CLASS;
        info.name = "username";
        break;
    case 2:
        info.type = PropertyInfo.STRING_CLASS;
        info.name = "email";
        break;
    case 3:
        info.type = PropertyInfo.STRING_CLASS;
        info.name = "password";
        break;
    default:
        break;
    }
}

public void setProperty(int index, Object value) {
    if(null == value)
        value = "";
    switch (index) {
    case 0:
        user_id = Integer.parseInt(value.toString());
        break;
    case 1:
        username = value.toString();
        break;
    case 2:
        email = value.toString();
        break;
    case 3:
        password = value.toString();
        break;
}
   } 
```

**这很重要**：确保为外部类和内部类注册密钥。

```
 envelope.addMapping(NAMESPACE, "loginUserResponse", UserResponse.class);
  envelope.addMapping(NAMESPACE, "user", User.class); 
```

最后，你可以通过强制转换得到结果：

```
 HttpTransportSE androidHttpTransport = new HttpTransportSE(SERVER_URL); //open the requisition
   androidHttpTransport.call(SOAP_ACTION, envelope);// call
   UserResponse response = (UserResponse)envelope.bodyIn; 
```

希望这有帮助！

# iphone - 通过我的应用分享相机胶卷中的照片

> ID：12910622
> 
> 赞同：3
> 
> 时间：2012-10-16T08:37:22.140
> 
> 标签：iphone, camera, ios6, shared-libraries

我想开发一个可以将图像分享到社交网络的应用程序，它运行良好，但我希望我的应用程序具有一些高级功能

我看到在 ios6 中，它可以通过点击共享按钮从照片库中共享图像

现在我想要我的应用程序在共享屏幕的列表应用程序中，我该怎么做？

![图片](../Images/630395ce5cef7f95657d42c413613474.png)

```
- (void) loadMoreData

{
   [self requestServerGetTimeline];
}

- (void) btnImageClicked:(NSString *)photoId
{
    DetailImageController *detailImageController = [[DetailImageController alloc] initwithPhotoId:photoId withNavigationController:self.navigationController];
    [self.navigationController pushViewController:detailImageController animated:YES];
    [detailImageController release];
}

- (void) btnUsernameClicked:(NSString *)userId
{
    MeshUserInformationController *detailUserController = [[MeshUserInformationController alloc] initWithNavigation:self.navigationController withUserId:userId];
    [self.navigationController pushViewController:detailUserController animated:YES];
    [detailUserController release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T11:14:38.693

您无法配置照片应用程序的 UIActivityView 控制器，但您可以为您的应用程序配置和制作自己的活动。

# iphone - iOS 6 上的 CIGaussianBlur 和 CIAffineClamp

> ID：12910625
> 
> 赞同：9
> 
> 时间：2012-10-16T08:37:33.773
> 
> 标签：iphone, objective-c, ios, core-image

我试图在 iOS 6 上使用 CoreImage 模糊图像而没有明显的黑色边框。[Apple 文档](https://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CIAffineClamp)指出，使用 CIAffineClamp 过滤器可以实现这一点，但我无法从过滤器中获取输出图像。这是我尝试过的，但不幸的是，当我访问 [clampFilter outputImage] 时会创建一个空图像。如果我只执行模糊，则会生成图像，但带有深色嵌入边框。

```
CIImage *inputImage = [[CIImage alloc] initWithCGImage:self.CGImage];

CIContext *context = [CIContext contextWithOptions:nil];

CGAffineTransform transform = CGAffineTransformIdentity;

CIFilter *clampFilter = [CIFilter filterWithName:@"CIAffineClamp"];
[clampFilter setValue:inputImage forKey:kCIInputImageKey];
[clampFilter setValue:[NSValue valueWithBytes:&transform objCType:@encode(CGAffineTransform)] forKey:@"inputTransform"];

CIImage *outputImage = [clampFilter outputImage];

CIFilter *blurFilter = [CIFilter filterWithName:@"CIGaussianBlur"
     keysAndValues:kCIInputImageKey, outputImage, @"inputRadius", [NSNumber numberWithFloat:radius], nil];

outputImage = [blurFilter outputImage];

CGImageRef cgimg = [context createCGImage:outputImage fromRect:[outputImage extent]];
UIImage *blurredImage = [UIImage imageWithCGImage:cgimg];
CGImageRelease(cgimg); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-07T09:03:05.737

CIAffineClamp 过滤器将您的范围设置为无限，这会混淆您的上下文。尝试保存预钳位范围 CGRect，然后将其提供给上下文初始化程序。

# c++ - C++11 std::regex_match 返回额外字符

> ID：12910626
> 
> 赞同：4
> 
> 时间：2012-10-16T08:37:37.213
> 
> 标签：c++, regex, gcc, c++11, gnu

> **可能重复：**
> [gcc4.7 对正则表达式有问题吗？](https://stackoverflow.com/questions/12530406/is-gcc4-7-buggy-about-regular-expressions)

我按照[http://www.cplusplus.com/reference/std/regex/regex_match/](http://www.cplusplus.com/reference/std/regex/regex_match/)上的示例并在 Ubuntu 12.04 64 位上使用 g++ 版本 4.6.3 编译

以下是我的输出：

```
string literal matched
string object matched
range matched
string literal with 3 matches
string object with 3 matches
range with 3 matches
the matches were: [subject] [sub] [bject] 
```

虽然示例输出是：

```
string literal matched
string object matched
range matched
string literal with 3 matches
string object with 3 matches
range with 3 matches
the matches were: [subject] [sub] [ject] 
```

请注意，在我的机器上**[bject]**被提取，这是不正确的。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:38:44.023

根据[gcc 实施状态（4.6.3 版）](http://gcc.gnu.org/onlinedocs/gcc-4.6.3/libstdc++/manual/manual/status.html#status.iso.2011)，正则表达式库尚未完全实施。它不会引发错误，也不会提供警告。这确实令人不快。

但是，其他人之前已经观察到了这一点，也有更新的版本：

*   [这是 C++11 正则表达式错误我还是编译器？](https://stackoverflow.com/q/8060025/1025391)
*   [regex_match 和 regex_search 之间的区别？](https://stackoverflow.com/q/11628047/1025391)
*   [gcc 4.8 或更早版本对正则表达式有问题吗？](https://stackoverflow.com/q/12530406/1025391)
*   [正则表达式误解或只是破坏了实现？](https://stackoverflow.com/q/7696063/1025391)

常见的建议是进一步使用[Boost.Regex](http://www.boost.org/doc/libs/1_51_0/libs/regex/doc/html/index.html)或尝试使用其他编译器。

请参阅[此答案](https://stackoverflow.com/a/12665408/1025391)以进一步阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:18:38.340

您可以将示例简化为：

```
std::string s("subject");
std::regex e("(sub)(.*)");
std::smatch sm;
std::regex_match(s, sm, e); 
```

更有趣的是：

```
std::string s("subject");
std::regex e("(sub)(ject)");
std::smatch sm;
std::regex_match(s, sm, e); 
```

所以，这看起来像是 GNU 实现中的一个错误。

# windows - 无法在 Metro 应用程序中访问资产文件

> ID：12910627
> 
> 赞同：1
> 
> 时间：2012-10-16T08:37:38.013
> 
> 标签：windows, windows-8, microsoft-metro

我正在尝试读取一个文本文件，该文件作为 Metro 应用程序中的资产提供。如果将文件路径指定为“ms-appx:///Assets/file.txt”，我会收到拒绝访问错误。显然，我需要设置一些功能来访问安装位置文件夹。我尝试在清单设计器中启用所有功能，但仍然是同样的错误。请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T14:14:56.330

试试这个：

```
StorageFile file = await StorageFile.GetFileFromApplicationUriAsync(
    new Uri("ms-appx:///Assets/file.txt"));
Stream stream = await file.OpenStreamForReadAsync();
StreamReader sr = new StreamReader(stream); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:03:12.283

这正是您使用的参考吗？尝试

```
ms-appx:///Assets/file.txt 
```

# azure - Azure 会话表在 AspProvider 的 TableStorageSessionStateProvider 中保持为空

> ID：12910629
> 
> 赞同：0
> 
> 时间：2012-10-16T08:37:50.173
> 
> 标签：azure, forms-authentication, azure-table-storage, server-farm

我们有一个曾经在单个实例中运行一段时间的 Web 角色。为了应对更高的负载（并获得更好的 SLA），我们目前正在迁移角色以支持多个实例。

该角色使用表单身份验证（带有自定义成员资格提供程序），我们的理解是我们必须在实例之间启用某种共享会话状态，因此如果用户在实例 1 上登录并获取他的`.ASPXAUTH`cookie，那么实例 2知道这个cookie。

我们这样做了，目前该角色在两个实例上运行，并且一切正常。我们测试了用户保持登录状态，即使他的请求是在他登录的实例之外的另一个实例上处理的。如果用户没有登录，访问将被拒绝。

我们还检查了是否`TableStorageSessionStateProvider`在 Azure 表存储帐户中创建了一个表，并且确实有一个`Sessions`包含`PartitionKey`,`RowKey`和`Timestamp`列的表。

但是，令我们惊讶的是，`Sessions`桌子总是空着。无论有多少用户登录，表中都没有数据。

**如果不通过`Sessions`表，这些实例如何通信？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:40:41.027

您在这里混合了两个不同的东西：**Authentication**和**Session State**。

确实，为了在多个实例中使用 Session State，您需要一个共享存储（InProc 不起作用）。在这种情况下`TableStorageSessionStateProvider`会起作用，因为所有实例都可以访问存储在此处的会话数据。当您在用户的当前会话中存储某些东西时使用会话状态，例如购物车。你会这样称呼它：`Session["UserShoppingCart"] = shoppingCart;`.

但是您在问题中描述的内容与会话状态无关，这完全与表单身份验证有关。当您在实例 1 上进行身份验证时，您将获得一张票作为回报（存储在 .ASPXAUTH cookie 中）。此票证经过加密和签名，包含您的用户名、到期时间、自定义用户数据等基本信息...

既然您有多个实例，那么下一个请求可能会让您进入实例 2。我认为您的问题是，这些实例如何通信？**好吧，他们没有。**每当请求开始时，在它到达您的页面或控制器之前，FormsAuthenticationHttpModule 就会启动并查找 .ASPXAUTH cookie。它检查签名，对其进行解密，然后用来自 cookie（票证）的信息填充 HttpContext.Current.User。

实例之间的唯一链接是 machineKey（用于加密/解密/签名/验证 cookie）。每当您在 Windows Azure 中部署多个实例时，Fabric Controller 都会确保[所有实例都获得相同的 machineKey](http://msdn.microsoft.com/en-us/library/gg494983.aspx)。这样，实例 2 将能够解密和验证由实例 1 加密和签名的票证。

# git - Git：在“git rm”之后推送更改

> ID：12910631
> 
> 赞同：5
> 
> 时间：2012-10-16T08:37:53.083
> 
> 标签：git, github, bitbucket

我删除了一个文件`git rm test`，目前这是`git status .`

```
Noob@Noob:/media/data/bitbucket/pythonscripts$ git status .
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       deleted:    test
# 
```

现在，当我尝试使用`git push`它在我的仓库中推送更改时，它会说`Everything up-to-date`。我知道通常需要先`add`而不是`commit`推送之前，但在我的情况下，我应该添加什么，因为我已经删除了文件。

此外，如果我这样做`git commit -m "commit message"`，这会覆盖我所有的提交，因为目前我没有文件可以附加这个提交。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T08:41:15.353

做完之后`git rm`需要做`git commit`。Git 说这`Everything up-to-date`是因为你没有创建一个删除这个文件的提交。

例如，如果你这样做`git reset --hard`，你会看到你的文件又回来了。

大体上`git rm`没有什么不同`git add`。

* * *

> 这会覆盖我所有的提交吗

不，它不会，它会创建一个删除此文件的新提交。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-18T04:13:02.347

回答您的问题需要三个步骤。

```
1\. git rm #your_files

2\. git commit -m "#your_comments"

3\. git push origin #your_local_branch:#your_remote_branch 
```

# vim - vim累积数字问题

> ID：12910633
> 
> 赞同：2
> 
> 时间：2012-10-16T08:37:55.760
> 
> 标签：vim

我想在我的文件中有以下内容

```
#define BIT_MASK_1      (1 << 0)
#define BIT_MASK_2      (1 << 1)
#define BIT_MASK_3      (1 << 2)
#define BIT_MASK_4      (1 << 3) 
```

所以我写了这样一行：

```
#define BIT_MASK_1      (1 << 0) 
```

, 然后输入`Y3p`, `V3j`，所以我得到了四个相同的行被选中，然后我想使用下面的命令将文本变成我想要的内容

```
:'<,'>s/BIT_MASK_/zs/d*/ze//=line(".") - line("'<") + 1
:'<,'>s//zs/d*/ze)$//=line(".")-line("'<") 
```

但我得到了`E488: Trailing characters`错误，我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T08:40:44.683

我不禁认为您最好使用 Ctrl+A （[增加光标下的数字](https://stackoverflow.com/questions/2147783/why-does-appending-to-a-string-save-memory/2147803#2147803)）和交互式定义的[宏](http://www.thegeekstuff.com/2009/01/vi-and-vim-macro-tutorial-how-to-record-and-play/)来执行此类操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T08:56:51.550

假设你有第一行：（光标在开头）

```
#define BIT_MASK_1      (1 << 0) 
```

然后你输入：（`^A = Ctrl + A`）

```
qaYp^Af<^Aq 
```

然后

```
3@a 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T08:48:50.787

不完全是您问题的答案，但我宁愿使用 Ca 来增加数字

就像是

```
t(h^At)^A0 
```

您可以将其放入宏中并根据需要多次运行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-27T11:26:04.863

只需输入：

```
:for i in range( 1, 4 ) | call append( line( '$' ), [ '#define BITMASK_' . i . ' (1 << ' . (i - 1) . ')' ] ) | endfor 
```

有时使用 vim 作为编程语言比使用奇怪的击键更好。

# c++ - 修改右值引用的值 - 它是如何工作的？

> ID：12910637
> 
> 赞同：16
> 
> 时间：2012-10-16T08:38:08.407
> 
> 标签：c++, c++11, rvalue-reference

下面的代码编译并运行得很好。就在我认为我开始对右值引用和 std::forward 有了不错的掌握时 - 这个非常简单的代码揭示了我不理解的关于右值的一些非常基本的东西。请澄清。

```
#include <iostream>
#include <iomanip>
using namespace std;

void fn( int&& n )
{
    cout << "n=" << n << endl;
    n = 43;
    cout << "n=" << n << endl;
}

int main( )
{
    fn( 42 );
} 
```

我使用以下命令行使用 g++ 4.7 编译它：
g++ --std=c++11 test.cpp

输出为：
n=42
n=43

我的主要问题是编译器将“n”存储在函数 fn 中的什么位置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T08:49:24.150

我可以详细说明这里在低级别发生的情况。

1.  类型的临时变量`int`是在 的堆栈上创建的 `main`。它被赋值为 42。

2.  临时地址被传递给`fn`.

3.  `fn`通过该地址写入 43，更改临时值。

4.  函数退出，临时函数在涉及调用的完整表达式结束时终止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T08:49:34.750

获取它的地址，即 &n，您将看到它的指针值。

您可以将一个局部变量粘贴到您的函数中，也可以在 main 中，并获取它们的地址，看看它在哪里，但是依赖它们之间的任何比较都是未定义的行为。

int 不是 const 是正确的，您的函数会获取它。以同样的方式，您可以使用 r 值引用初始化具有集合的类，然后类可以稍后修改它，即它不必是 const 成员。但是不会有副本。

按照标准，被“移动”的对象将处于稳定、可用的状态，但它所持有的实际值是未定义的。

# java - 正则表达式 - 有效 IPv4，不包括多播地址和广播地址

> ID：12910638
> 
> 赞同：0
> 
> 时间：2012-10-16T08:38:11.167
> 
> 标签：java, regex, ip, ipv4

我正在尝试创建一个正则表达式来检查 IP 是否有效且可用。我们希望排除匹配多播地址（例如 224.0.0.2）和地址（例如 0.0.0.0）的那些。

目前的代码检查范围 0-255 之间的任何内容，但我无法弄清楚如何实现它。

到目前为止我的代码是

```
^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b 
```

任何帮助都是极好的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-10T13:12:52.350

它将是最便携的、最容易编写的、最容易维护的将是部分进行。

```
\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)
\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)
\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)
\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b 
```

这将只匹配有效的 IP 地址，并将每个部分分开以供进一步检查

```
if (int(group[1]) != 224 and (int(group[1]) != 0 or int(group[2]) != 0 or int(group[3]) != 0 or int(group[4]) != 0) ... 
```

正则表达式不太擅长“但不是”操作。

但是，如果您坚持将其作为单个正则表达式，则只需枚举所有有效选项。

```
\b(25[0-5]|2[0134][0-9]|22[0-35-9]|1[0-9][0-9]?|[2-9][0-9]|[2-9])
\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)
\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)
\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b 
```

...这并不完美，因为它只测试第一个八位字节不是 224 或 0。如果您想要针对 0.0.0.0 进行完整测试，那么您必须重现上述 15 次，以识别所有组合，其中至少有一个八位字节非零。

当然，您需要*编写一个测试*来确保您返回所有 40 亿个组合的正确答案。不应该花太长时间来运行...... ;-)

# r - 为什么gdal给了我来自R的变量的不同最大值和最小值？

> ID：12910641
> 
> 赞同：0
> 
> 时间：2012-10-16T08:38:16.270
> 
> 标签：r, gdal, netcdf, rgdal

这三行将打开并从 netcdf 文件中读取一个变量：

```
f=open.ncdf("C:\\BR_Ji1.nc")
A = get.var.ncdf(nc=f,varid="date",verbose=TRUE)
B = get.var.ncdf(nc=f,varid="GPP",verbose=TRUE)
[1] "get.var.ncdf: entering. Here is varid:"
[1] "GPP"                 
[1] "checking to see if passed varid is actually a dimvar"
[1] "entering vobjtodimname with varid= GPP"
[1] "vobjtodimname: is a character type varid.  This file has 6 dims"
[1] "vobjtodimname: no cases found, returning FALSE"
[1] "get.var.ncdf: isdimvar: FALSE"
[1] "vobjtovarid: entering with varid=GPP"
[1] "Variable named GPP found in file with varid= 17"
[1] "vobjtovarid: returning with varid deduced from name; varid= 17"
[1] "get.var.ncdf: ending up using varid= 17"
[1] "ndims: 2"            
[1] "get.var.ncdf: varsize:" 
[1]     1 17520          
[1] "get.var.ncdf: start:" 
[1] 1 1                     
[1] "get.var.ncdf: count:"
[1]     1 17520            
[1] "get.var.ncdf: totvarsize: 17520"
[1] "Getting var of type 3  (1=short, 2=int, 3=float, 4=double, 5=char, 6=byte)"
[1] "get.var.ncdf: C call returned 0"
[1] "count.nodegen: 17520    Length of data: 17520"
[1] "get.var.ncdf: final dims of returned array:"
[1] 17520       
[1] "varid: 17" 
[1] "nc$varid2Rindex: 1"  "nc$varid2Rindex: 2"  "nc$varid2Rindex: 0"  "nc$varid2Rindex: 0"  "nc$varid2Rindex: 3" 
[6] "nc$varid2Rindex: 0"  "nc$varid2Rindex: 4"  "nc$varid2Rindex: 5"  "nc$varid2Rindex: 6"  "nc$varid2Rindex: 7" 
[11] "nc$varid2Rindex: 8"  "nc$varid2Rindex: 9"  "nc$varid2Rindex: 10" "nc$varid2Rindex: 11" "nc$varid2Rindex: 12" 
[16] "nc$varid2Rindex: 13" "nc$varid2Rindex: 14" "nc$varid2Rindex: 15" "nc$varid2Rindex: 16" "nc$varid2Rindex: 17"
[21] "nc$varid2Rindex: 18" "nc$varid2Rindex: 19" "nc$varid2Rindex: 20"
[1] "nc$varid2Rindex[varid]: 14"
[1] "get.var.ncdf: setting missing values to NA"
[1] "missval: -9999   tol: 0.09999"
[1] "get.var.ncdf: implementing add_offset ( FALSE ) and scale_factor ( FALSE )"
[1] "var has NEITHER add_offset nor scale_factor"
**K = get.var.ncdf(nc=f,varid="Qle",verbose=TRUE)
write.table(t(rbind(A,B,K)),"C:\\Ji1-gpp-lat.txt")** 
```

当我查看提取的数据时，我发现我有非常小的负值。然后我使用 gdalinfo 发现最大值为 400，最小值为 0（这是正常的，这就是值的样子）。任何想法为什么我得到错误的号码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-08T21:25:43.160

See this question: [Does ComputeBandStats take nodata into account?](https://stackoverflow.com/questions/37857254). The statistics contained in the file's metadata may not be fresh or precisely calculated. If you want accurate statistics you should calculate them yourself, or make sure the flag for calculating them using approximations is set to False.

# openssl - 如何配置 openssl 的默认后端引擎？

> ID：12910642
> 
> 赞同：9
> 
> 时间：2012-10-16T08:38:17.827
> 
> 标签：openssl, cryptography, backend

我编译了带有cryptodev支持（即硬件加速）的OpenSSL，但不幸的是默认引擎仍然是软件。

```
time openssl speed -evp aes-128-cbc -engine cryptodev 
```

产生“正确”的数字，但 ProFTP（也使用 OpenSSL）在使用时不会显示任何性能提升（FTP Secure，FTPS，无论您如何称呼它）。

该引擎支持 AES-128、AES-192、RC4、SHA-1、DES、Triple-DES 和其他一些。

我的`/etc/ssl/openssl.cnf`样子是这样的：

```
#...
# a lot of generic stuff...
#...

[engine_section]
cryptodev = cryptodev_section

[cryptodev_section]
default_algorithms = ALL 
```

我查看了代码，但他们通过定义、重新定义、取消定义以及与原型相结合来做令人讨厌的事情，这使得追踪变得很痛苦......

如果以上是正确的，当用户创建 CTX_SSL 或类似时，调用什么例程来初始化引擎？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-02T09:56:02.047

根据[OpenSSL 的 config(5)](http://www.openssl.org/docs/apps/config.html)：“命令 default_algorithms 设置 ENGINE 将使用函数 ENGINE_set_default_string() 提供的默认算法”。我不相信“ALL”是一个有效的引擎。您可以尝试指定`engine_id`to `default_algorithms`。

* * *

如果您在源代码中执行此操作，请尝试调用：

```
ENGINE_load_builtin_engines(); 
```

其次是

```
ENGINE_register_all_complete(); 
```

如果您有`ENGINE*`，那么您可以执行以下操作：

```
ENGINE* eng = ENGINE_by_id("XXX");
ENGINE_set_default(eng, ENGINE_METHOD_ALL);
OpenSSL_add_all_algorithms(); 
```

我不知道关于这个主题的任何好的文档，但我没有检查过 Viega、Massier 和 Chandra 的书。[我们中的一些人在Libcrypto API](http://wiki.openssl.org/index.php/Talk%3aLibcrypto_API)的 OpenSSL wiki 讨论页面上讨论了它。

# sql-server-2008 - 投射错误

> ID：12910643
> 
> 赞同：0
> 
> 时间：2012-10-16T08:38:28.707
> 
> 标签：sql-server-2008, casting, varchar

我有一个查询，我必须从 varchar 列中提取一些数字字段。当我在 select 语句中进行一些替换和子字符串并将其转换为 bigint 时，一切正常，但是当我在 join 中使用相同的转换时，它会抛出错误“将数据类型 varchar 转换为 bigint 时出错”。这怎么可能？

```
select CAST(
        case when CHARINDEX('/',f.BML,1)>0 
            then substring(replace(replace(replace(replace(replace(replace(replace(replace(replace(f.BML,'A',''),'B',''),'C',''),'+',''),',',''),'S',''),'H',''),'P',''),'¸','') ,1,CHARINDEX('/',BML,1)-1)
        else replace(replace(replace(replace(replace(replace(replace(replace(replace(f.BML,'A',''),'B',''),'C',''),'+',''),',',''),'S',''),'H',''),'P',''),'¸','') 
        end as bigint)
from TableN n join TableO o  on
    n.Id=o.Id 
    join TableF f on
        f.OId=o.OId and
        substring(cast(n.RJ as varchar(10)),1,3)=substring(CAST(f.MT AS varchar(10)),1,3) and
    CAST(
        case when CHARINDEX('/',f.BML,1)>0 then substring(replace(replace(replace(replace(replace(replace(replace(replace(replace(f.BML,'A',''),'B',''),'C',''),'+',''),',',''),'S',''),'H',''),'P',''),'¸','') ,1,CHARINDEX('/',f.BML,1)-1)
        else replace(replace(replace(replace(replace(replace(replace(replace(replace(f.BML,'A',''),'B',''),'C',''),'+',''),',',''),'S',''),'H',''),'P',''),'¸','') 
        end as bigint) =n.mbr
order by n.Ident 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:54:58.957

正如我在评论中指出的那样，无法保证评估条件的顺序。因此，如果您有：

```
 f.OId=o.OId and
    substring(cast(n.RJ as varchar(10)),1,3)=substring(CAST(f.MT AS varchar(10)),1,3) and
CAST(
    case when CHARINDEX('/',f.BML,1)>0 then substring(replace(replace(replace(replace(replace(replace(replace(replace(replace(f.BML,'A',''),'B',''),'C',''),'+',''),',',''),'S',''),'H',''),'P',''),'¸','') ,1,CHARINDEX('/',f.BML,1)-1)
    else replace(replace(replace(replace(replace(replace(replace(replace(replace(f.BML,'A',''),'B',''),'C',''),'+',''),',',''),'S',''),'H',''),'P',''),'¸','') 
    end as bigint) =n.mbr 
```

并且要么 要么`f.OId=o.OId`应该`substring(cast(n.RJ as varchar(10)),1,3)=substring(CAST(f.MT AS varchar(10)),1,3)`消除具有`BML`不可转换为的值的行`bigint`，这不能保证不会尝试转换。

* * *

您可以尝试将应该消除错误`BML`值的过滤器移动到子查询或 CTE 中，但这仍然不能保证查询优化器不会将转换运算符下推到子查询中并且仍然会导致错误。

处理这个问题的唯一真正方法（不幸的是）是将查询分成两部分，消除第一个查询中不可转换的值，并将此查询的结果放在临时表/表变量中。然后使用这个临时表构建查询的后半部分。

# javascript - 如何检测 Javascript 正则表达式中的命名空间字符串？

> ID：12910644
> 
> 赞同：1
> 
> 时间：2012-10-16T08:38:29.660
> 
> 标签：javascript

我需要检查一个字符串是否代表一个有效的命名空间格式。命名空间由用点分隔的 id 组成。每个 id 都以字母字符开头，并以字母数字字符开头。

有效的命名空间：

```
"com.company.package"
"com.company"
"com" 
```

无效的命名空间：

```
"1com.company.package"
"com.1company"
"com.com%any"
".com.company"
"com.company."
"com "
" com"
""
"."
"com..company" 
```

目前我使用这个简单的正则表达式，但它并没有检查所有这些无效的命名空间：

```
if( /^[\w\.]$/.test( namespaceStr ) ) {
  //valid namespace
} else {
  //invalid namespace
} 
```

对于检查字符串是否代表有效命名空间的小而有效的方法有什么更好的建议吗？

这是一个小 jsfiddle，您可以使用它来测试这个正则表达式：http: [//jsfiddle.net/bA85y/](http://jsfiddle.net/bA85y/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T08:42:48.467

**编辑：**这个应该适用于每种情况：

```
/^(?:[a-z]\d*(?:\.[a-z])?)+$/i 
```

如果您不关心捕获更短的组：

```
/^([a-z]\d*(\.[a-z])?)+$/i 
```

一点解释：

```
^ // Start
( // Open group
[a-z]\d* // Must start by letter and may be followed by a number (greedy)
(\.[a-z])? // It may be followed by a dot only if it's followed by a letter (non-greedy)
)+ // Close group and match at least once so we get rid of empty values
$ // Ends, not allow any other characters 
```

**演示：http:** [//jsfiddle.net/elclanrs/5hnQV/](http://jsfiddle.net/elclanrs/5hnQV/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T08:56:28.117

我想你正在寻找这个：

```
/^[a-z][a-z0-9]*(\.[a-z][a-z0-9]*)*$/i 
```

**编辑：**

这个稍微好一点（受到@HashemQolami`?:`和`\d`@elclanrs 的启发）：

```
/^[a-z][a-z\d]*(?:\.[a-z][a-z\d]*)*$/i 
```

这个更短，但做同样的工作：

```
/^[a-z](?:[a-z\d]*(?:\.[a-z])?)*$/i 
```

这个也是，使用前瞻来测试它不以 a 结尾`.`：

```
/^(?!.*\.$)(?:[a-z][a-z\d]*\.?)+$/i 
```

请注意，所选答案不适用于“abc”或在某些情况下超过两个级别。

**更新：**

我做了一个小（非常基本的）测试：

```
var valid = [
"com.company.package",
"com.company",
"com.company1",
"com1.company1",
"a.b.c",
"a1.b.c3.d",
"a1.b2.c3.d4"];

var invalid = [
"1com.company.package",
"com.1company",
"com.com%any",
".com.company",
"com.company.",
"com ",
" com",
"",
".",
"com..company"];

function testRegex(regex, list)
{
    var res=[];
    for(var i=0; i<list.length; i++)
    {
        if(regex.test(list[i]))
            res.push(list[i] + " ==> matched");
        else
            res.push(list[i] + " ==> NOT matched");
    }

    return res.join('<br>');
}

var regex = /^[a-z][a-z0-9]*(\.[a-z][a-z0-9]*)*$/i;

var html = "<p>VALID</p>";
html += testRegex(regex, valid);
html += "<p>INVALID</p>";
html += testRegex(regex, invalid);

document.write("<div>" + html + "</div>"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T08:50:42.660

试试这个模式：

```
/^[a-z][a-z0-9]*(?:\.[a-z][a-z0-9]*)*$/i 
```

**编辑：** 这是@elclanrs [jsfiddle的回归](http://jsfiddle.net/5hnQV/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T08:58:09.240

基于@dionyziz 回答这项工作：

```
/^[a-z]+(\.[a-z]+)*[^.\s]$/ 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-16T08:41:49.730

以下正则表达式将满足您的需求。它检查一个字母字符串，然后允许多个其他字母字符串用点分隔。

```
/^[a-z]+(\.[a-z]+)*$/ 
```

# objective-c - Objective-c 对象调用

> ID：12910649
> 
> 赞同：0
> 
> 时间：2012-10-16T08:38:58.333
> 
> 标签：objective-c, cordova

谁能告诉我这行代码是做什么的？

```
self.viewController = [[MainViewController alloc] init]; 
```

viewController 已经是一个 CDVViewController 对象，所以我不太确定它对 MainViewController 做了什么：S？

任何帮助都会很棒

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:29:47.703

首先它创建并初始化一个 MainViewController* 对象，然后将其分配给 [self setViewController: ]。self.viewController 实际上是对 self setter 方法的调用，而不是简单的指针赋值（不像 viewController = [[MainViewController alloc] init]，如果 viewController 不是 ivar）。

取决于您使用 @property 语句生成 setter 的方式，但假设它是

```
@property(nonatomic, retain)*UIViewController viewController 
```

您可以免费获得一个生成的 setter 方法，创建方式如下：

```
- (void)setViewController:(UIViewController*)controller{
    if(viewController != controller){
      [viewController autorelease];
     viewController = [controller retain];
    }
} 
```

因此，如果您的 viewController 是一个 CDVViewController* 对象，它现在正在与一个新的 CDVViewController* 对象交换。CDVViewController* 现已发布，CDVViewController 被保留并分配给 viewController ivar。

顺便说一句，如果你刚刚完成作业，你应该这样做：

```
[viewController release]; // if it was before a CDVViewController
self.viewController = [[MainViewController alloc] init]; 
```

有保留财产

```
self.viewController = [[[MainViewController alloc] init] autorelease]; // it will be retained in the setter, so you must free it 
```

根据您的代码，以避免泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:41:22.023

这一行简单地创建了一个新对象，MainViewController 类的实例，并将其指针存储在变量 viewController 中。

# macos - fuse4x sshfs on macosx执行错误

> ID：12910653
> 
> 赞同：5
> 
> 时间：2012-10-16T08:39:07.180
> 
> 标签：macos, fuse, sshfs

在我的日常工作中，我在 macosx 10.7 上使用 sshfs。

要安装 sshfs，我使用了 macport：“port install fuse4x sshfs”。

今天的错误：

```
$ sshfs user@domain.com:/path myfolder
fuse4x client library version is incompatible with the kernel extension (kext='0.9.0', library='0.9.2'). 
```

欢迎任何提示。没看懂，没更新系统。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-21T12:37:53.600

跟随

```
$ brew info fuse4x-kext 
```

指示：

> 为了使基于 FUSE 的文件系统能够工作，必须由 root 用户安装 fuse4x 内核扩展：

```
$ sudo /bin/cp -rfX /usr/local/Cellar/fuse4x-kext/0.9.2/Library/Extensions/fuse4x.kext /Library/Extensions
$ sudo chmod +s /Library/Extensions/fuse4x.kext/Support/load_fuse4x 
```

> 如果从以前版本的 Fuse4x 升级，则需要在执行上面列出的步骤之前卸载旧的内核扩展。首先，检查是否没有基于 FUSE 的文件系统正在运行：

```
$ mount -t fuse4x 
```

> 卸载所有 FUSE 文件系统，然后卸载内核扩展：

```
$ sudo kextunload -b org.fuse4x.kext.fuse4x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:29:10.013

**tl;博士：**

*在使用同步*动词更新端口树后尝试手动更新 fuse4x-kect

```
port sync
port upgrade fuse4x-kext 
```

**更长的阅读时间**

您粘贴的错误意味着macports在升级fuse4x时没有更新kext端口fuse4x-kext，它应该有。我怀疑您的问题仍然存在，因为您可能自 2012 年 10 月以来已更新，您应该执行定期端口升级并检查新的 macports 版本何时发布以运行*selfupdate*动词。

作为将来的参考，您可以通过查看其信息来猜测端口的 kext 端口是什么

```
port info fuse4x 
```

或依赖项列表：

```
port deps fuse4x 
```

提供 kexts 的端口可以使用*加载*和*卸载*动词从内核加载和卸载。

# matlab - 在matlab中使用mmreader时如何自己指定帧速率

> ID：12910655
> 
> 赞同：0
> 
> 时间：2012-10-16T08:39:14.950
> 
> 标签：matlab, video

我在 matlab 中有一个视频；我使用 mmreader 阅读。文件信息为：

视频设置：

```
BitsPerPixel = 24
FrameRate = 25
Height = 288
NumberOfFrames = 590
VideoFormat = RGB24
Width = 352 
```

在我的编码中，我想将帧速率更改为某个值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:52:52.550

您可以使用 ：

```
movie(M,n,fps) 
```

这会以每秒 fps 帧的速度播放电影。默认值为每秒 12 帧。无法达到指定速度的电脑尽可能快地播放

或者，参见例如这个代码位（取自 matlab 文档）。尤其是它的最后一行...

```
%Read and play back the movie file xylophone.mpg:
xyloObj = mmreader('xylophone.mpg');

nFrames = xyloObj.NumberOfFrames;
vidHeight = xyloObj.Height;
vidWidth = xyloObj.Width;

% Preallocate movie structure.
mov(1:nFrames) = ...
struct('cdata', zeros(vidHeight, vidWidth, 3, 'uint8'),...
       'colormap', []);

% Read one frame at a time.
for k = 1 : nFrames
   mov(k).cdata = read(xyloObj, k);
end

% Size a figure based on the video's width and height.
hf = figure;
set(hf, 'position', [150 150 vidWidth vidHeight])

 % Play back the movie once at the video's frame rate.
 movie(hf, mov, 1, xyloObj.FrameRate); 
```

# mysql - 使用 3.23.58 版本的子查询重写 MySQL 查询

> ID：12910660
> 
> 赞同：1
> 
> 时间：2012-10-16T08:39:43.337
> 
> 标签：mysql, sql

我需要一些帮助来查询 MySQL 版本 3.23.58 的数据库。

原则上我想做这个查询（包括一些 php）：

```
SELECT * 
FROM abstracts 
LEFT JOIN 
(SELECT * FROM reviewdata WHERE reviewerid='$userid') as reviewdata 
ON abstracts.id=reviewdata.abstractid  
WHERE session='$session' 
```

换句话说，如果审稿人已经对其进行了审阅，我想要一个包含所有摘要的列表以及摘要的审阅数据。否则我仍然想要摘要，但审查数据为空（以便他可以更改它）。

上面的查询在较新的版本中运行良好，但在这个旧版本中，我不允许使用子查询，所以当我在 LEFT JOIN 中使用嵌套的 SELECT 时，MySQL 会报错。

所以现在我正在寻找一种方法来避免这个子查询......

我试过：

```
SELECT * 
FROM  abstracts 
LEFT JOIN reviewdata 
ON abstracts.id=reviewdata.abstractid  
WHERE session='$session' AND (reviewerid='$userid' or reviewerid is null) 
```

但这会导致其他审稿人而不是该特定审稿人审阅的摘要根本不会显示给他。

我的问题是我不知道当时允许什么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:49:31.013

如果没有旧安装，我无法尝试此操作，但请尝试在 ON 子句中检查 reviewerid。

```
SELECT * 
FROM abstracts 
LEFT OUTER JOIN reviewdata  
ON abstracts.id=reviewdata.abstractid  
AND reviewerid='$userid'
WHERE session='$session' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:50:34.463

从我的角度来看，您重构的查询应该显示所有审阅者的摘要，包括特定的审阅者。以下条件

```
 AND (reviewerid='$userid' or reviewerid is null) 
```

没有任何意义，可以直接删除。为了限制结果集与特定审阅者相关的数据，您必须排除`or reviewerid is null`部分尝试

```
SELECT * 
FROM  abstracts 
LEFT JOIN reviewdata 
ON abstracts.id=reviewdata.abstractid  
WHERE session='$session' AND reviewerid='$userid' 
```

另一个建议 - 在查询中指定字段时使用别名

# python - 如何猴子修补另一个包的管理类？

> ID：12910665
> 
> 赞同：1
> 
> 时间：2012-10-16T08:39:55.650
> 
> 标签：python, django, monkeypatching

我的 Django 项目使用的包之一有一个简单的管理类，如下所示：

```
class EventUpdateInline(admin.StackedInline):
    model = EventUpdate

class EventAdmin(admin.ModelAdmin):
    form = EventForm
    list_display = ('date_created', 'description', 'status', 'date_updated')
    search_fields = ('description', 'message')
    list_filter = ('services',)
    inlines = [EventUpdateInline] 
```

我编写了一个`EventUpdateInline`我想使用的自定义类。我怎样才能`EventUpdateInline`用我的`CustomEventUpdateInline`班级代替？

这是第一个问题。问题的第二部分是我想向`EventUpdate`模型添加一个自定义属性，以便我的`CustomEventUpdateInline`类可以使用它。

我将把我的代码放在哪里来导入我的`CustomEventUpdateInline`并替换旧的和旧的将自定义属性添加到`EventUpdate`模型中？

我不确定这是否可能。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T09:04:14.157

编辑：

tl;dr：fork 并改用 pip/virtualenv - 这是一种更清洁、可维护和理智的方法。猴子修补通常是一个糟糕的主意 - 请参阅链接到 SO 答案。但有时它是较小的邪恶。

如果你想要一个快速而肮脏的猴子补丁 - [https://stackoverflow.com/a/6720998/473285](https://stackoverflow.com/a/6720998/473285)

但是，通常这些天，如果项目位于 github 或 bitbucket 上，或者我只是克隆它，请进行更改，然后使用`pip -e`（您正在使用`virtualenv`，对吗？）安装我的克隆版本。如果您认为您的更改将被上游接受，这是最好的方法。

要考虑的另一件事是前向兼容性。将第三方软件包更新到更高版本后，您的猴子补丁仍然有效吗？您在 git 中的更改会干净地合并吗？

通常我会在一些或所有这些罕见的情况下使用猴子补丁：

*   您正在编写一个用于分发的软件包，但您需要修改另一个第三方软件包才能正常工作（很少见，仅在第三方维护者不接受补丁时才有效）
*   您正在对类、方法或函数进行相对直接的替换，这些类、方法或函数将与包的内部结构完美结合。
*   代码不可用或不是使用 pip/virtualenv 易于使用的形式（罕见）
*   您认为代码不会升级，或者您永远需要升级（不太可能）
*   您没有使用 pip/virtualenv （不好，但有时对于旧版、非常规或配置错误的安装是不可能的）。
*   您不认为上游维护者会接受您的更改，或者认为它们对其他人有用。

如果您正在进行更多涉及的更改或更广泛有用的事情，那么最好经常分叉然后尝试被上游接受。即使您的更改是为了促进纯内部的东西，这些东西永远不会在您的项目之外的任何地方使用，virtualenv 也是一种更好的方法。

# mongodb - 我可以根据多个文档进行查询吗？

> ID：12910672
> 
> 赞同：1
> 
> 时间：2012-10-16T08:40:11.650
> 
> 标签：mongodb

我有一个文档集合，其中每个文档都应该有另一个匹配的文档。（这不是设计使然，仅适用于我当前的操作。）但是，集合中文档数量的当前计数是奇数。有没有一种方法可以查询其他文档未共享的键值？

IE。如果我有这样的收藏：

```
{_id:'dcab0001', foo: 1, bar: 'dfgdgd'}
{_id:'dcab0002', foo: 2, bar: 'tjhttj'}
{_id:'dcab0003', foo: 1, bar: 'ydgdge'}
{_id:'dcab0004', foo: 3, bar: 'jyutkf'}
{_id:'dcab0005', foo: 3, bar: 'pofsth'} 
```

我可以对此进行查询`foo`，以返回带有 id 的文档`dcab0002`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T12:19:30.433

您可以使用 MapReduce 或在 MongoDB 2.2+ 中使用[Aggregation Framework](http://docs.mongodb.org/manual/applications/aggregation/)来执行此操作。

这是使用聚合框架的示例：

```
db.pairs.aggregate(

    // Group by values of 'foo' and count duplicates
    { $group: {
        _id: '$foo',
        key: { $push: '$_id' },
        dupes: { $sum: 1 }
    }},

    // Find the 'foo' values that are unpaired (odd number of dupes)
    { $match: {
        dupes: { $mod: [ 2, 1 ] }
    }}

    // Optionally, could add a $project to tidy up the output
) 
```

样本输出：

```
{
    "result" : [
        {
            "_id" : 2,
            "key" : [
                "dcab0002"
            ],
            "dupes" : 1
        }
    ],
    "ok" : 1
} 
```

# c# - XmlDoc SelectNodes 选择整个文档

> ID：12910676
> 
> 赞同：2
> 
> 时间：2012-10-16T08:40:23.543
> 
> 标签：c#, xml

我有一个***没有命名空间的简单 XML 文档***

这是我用 C# 编写的代码，用于根据*Name*搜索特定元素。

```
public XmlElement SearchXML(string name)
    {
    XmlDocument xDoc = new XmlDocument();
    string filePath = ConfigurationManager.AppSettings["path"];
    xDoc.Load(filePath);

        string xQryStr = "//NewPatient[Name='" + name + "']";
        xDoc.SelectNodes(xQryStr);

        XmlElement xmlEle = xDoc.DocumentElement;
        return xmlEle;
    } 
```

XML文档如下

![XML 文件的屏幕截图](../Images/69e39c3aef6e93a51d83c55e2de29835.png)

当我尝试调用方法*SearchXML*并将*Dennis*作为参数传递时，它不是返回仅包含特定元素的 xml 元素，而是返回整个文档。

我可能在哪里犯错？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:42:13.730

`xDoc.SelectNodes(xQryStr)`不会改变原始文档。您需要存储此方法调用的返回值并将其返回。

ATM 您只是返回原始文档的根元素（即整个树）

编辑

在回答您的评论时，您可以按如下方式钓到第一个匹配的 XmlElement：

```
xDoc.SelectNodes(xQryStr).OfType<XmlElement>().FirstOrDefault() 
```

这将返回一个`null`或一个`XmlElement`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T09:01:36.377

如果要根据 XPath 表达式选择节点列表，则需要以`.SelectNodes`这种方式使用：

```
public XmlElement SearchXML(string name)
{
    XmlDocument xDoc = new XmlDocument();
    string filePath = ConfigurationManager.AppSettings["path"];
    xDoc.Load(filePath);

    string xQryStr = "//NewPatient[Name='" + name + "']";

    XmlNodeList listOfNodes = xDoc.SelectNodes(xQryStr);

    foreach(XmlNode node in listOfNodes
    {
       // do something with that list of XML nodes you've selected....
       // XmlElement xmlEle = node;
       // return xmlEle;
    }
} 
```

调用`.SelectNodes(xpath)` **返回**匹配 XML 节点的列表（参见[MSDN 文档`XmlDocument.SelectNodes`](http://msdn.microsoft.com/en-us/library/hcebdtae.aspx)）——一旦你有了这个列表，你就可以遍历匹配的节点并对它们做一些事情......

或者，如果您希望只有一个 XML 节点与您的 XPath 表达式匹配，您也可以使用`.SelectSingleNode`:

```
 string xQryStr = "//NewPatient[Name='" + name + "']";

    XmlNode matchedNode = xDoc.SelectSingleNode(xQryStr);

    if(matchedNode != null)
    {
       // do something with that list of XML nodes you've selected....
       return matchedNode;
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T08:47:05.907

你能改变吗

```
string xQryStr = "//NewPatient[Name='" + name + "']"; 
```

至

```
 xQryStr = "/NewPatient[Name='" + name + "']"; 
```

请参阅以下链接 [http://www.csharp-examples.net/xml-nodes-by-name/](http://www.csharp-examples.net/xml-nodes-by-name/)

# android - 布局：如何使图像按比例改变其宽度和高度？

> ID：12910682
> 
> 赞同：3
> 
> 时间：2012-10-16T08:40:49.620
> 
> 标签：android, android-layout

我有这样的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="horizontal">

<TextView
    android:id="@+id/title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:layout_toLeftOf="@+id/my_image"
    android:ellipsize="end"
    android:singleLine="true"
    android:text="Some text"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<ImageView
    android:id="@+id/my_image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/title"
    android:layout_alignBottom="@+id/title"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"
    android:adjustViewBounds="true"
    android:src="@drawable/my_bitmap_image" /> 
```

这种布局几乎可以满足我的需要：它使图像视图高度与文本视图相同。拉伸的图像图形内容也保持纵横比。

**但是，**图像视图的宽度**不会**改变！结果，我在文本和图像视图之间有很大的差距！作为临时解决方案，我覆盖`View#onLayout`.

**问题**：如何更改 xml 布局中的图像宽度？

**更新：**

这是我需要的最终布局（文本 + 一些图像）。看第一张图片：它的宽度应该与其中的缩放图像完全相同，没有填充和边距：

![在此处输入图像描述](../Images/dca6fbcddb5a67a302a28c96f7164c23.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T09:54:22.443

对于`imageView`您可以将图像添加到线性布局并赋予权重属性。例如，如果您有 3 张图像，则将`linearlayout`权重设为`3`1，然后对于每张图像，您将权重设为 1。这样，所有图像的宽度将统一对齐。将线性方向作为水平方向的希望，所以你明白了我的意思。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" 
    android:weightSum="3"
     >
   <ImageView android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" 
    android:layout_weight ="1" />

    <ImageView android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" 
    android:layout_weight ="1" />

    <ImageView android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" 
    android:layout_weight ="1" />
     </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T10:58:00.977

好的，正如我从答案中看到的那样，没有解决方案可以强制图像视图按比例改变它们的宽度和高度。因此，这只能以编程方式解决。下面是我的解决方案：

a）创建您的自定义布局类

（不要忘记使用**公共**访问修饰符覆盖所有父构造函数，否则 GUI 编辑器将失败）：

```
public class MyLayout extends RelativeLayout {... 
```

~~b) 覆盖方法：~~ **已弃用 - 在此方法中更改布局参数可能会导致副作用。请参阅下面的推荐方法**

`~~protected void onLayout(boolean changed, int l, int t, int r, int b) {~~`

`~~ImageView icon = (ImageView) findViewById(R.id.my_image);~~` `~~icon.setMaxWidth(icon.getMeasuredHeight());~~`

`~~super.onLayout(changed, l, t, r, b);~~`

`~~}~~`

b) 添加创建方法：

```
public static MyLayout createLayout(ViewGroup parent) {
Context context = parent.getContext();
MyLayout item = (MyLayout) LayoutInflater.from(context).inflate(
            R.layout.my_layout, parent, false);    
TextView tv = (TextView) findViewById(R.id.title);
ImageView icon = (ImageView) findViewById(R.id.my_image);
ViewGroup.LayoutParams p = icon.getLayoutParams();
p.width =   (int) tv.getTextSize();;
icon.setLayoutParams(p);
return item;
} 
```

c) 最终布局：

```
<?xml version="1.0" encoding="utf-8"?>
<com.mypackage.MyLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="horizontal">

<TextView
android:id="@+id/title"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentLeft="true"
android:layout_centerVertical="true"
android:layout_toLeftOf="@+id/my_image"
android:ellipsize="end"
android:singleLine="true"
android:text="Some text"
android:textAppearance="?android:attr/textAppearanceMedium" />

<ImageView
android:id="@+id/my_image"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignTop="@+id/title"
android:layout_alignBottom="@+id/title"
android:layout_alignParentRight="true"
android:layout_centerVertical="true"
android:adjustViewBounds="true"
android:src="@drawable/my_bitmap_image" />
</com.mypackage.MyLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T09:43:04.963

代替RelativeLayout，使用LinearLayout。您可以添加“重量”属性以确保所需的间距。

看下面的代码

```
 <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/logonFormButtons"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:baselineAligned="true"       
    android:orientation="horizontal">

    <TextView
        android:id="@+id/logonFormBTLogon"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"            
        android:text="Some Text"
        android:layout_weight="0.5" />

    <ImageView
        android:id="@+id/logonFormBTCancel"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"            
        android:src="@drawable/apk"
        android:layout_weight="0.5" />
    </LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T08:44:51.480

我想这与`android:layout_alignParentRight="true"`您的 ImageView 有关。你试过`layout_toRightOf="@id/title"`吗？

您也可以尝试`android:scaleType="fitStart"`使用 ImageView。这应该将图像与 ImageView 的左上角对齐。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T08:46:22.730

尝试将`scaleType = fitXY`OR`centerInside`属性添加到 imageView

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T08:59:09.720

至于我，我很欣赏使用 getLayoutParams() 在我的代码中动态更改宽度或高度...例如

```
DisplayMetrics displaymetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
    int height = displaymetrics.heightPixels;
    int wwidth = displaymetrics.widthPixels;
    convertPixelsToDp(wwidth, getApplicationContext());
//    Toast.makeText(getApplicationContext(), height+ "= "+convertPixelsToDp(height, getApplicationContext()) + 
//          "   " + wwidth+ "= "+convertPixelsToDp(wwidth, getApplicationContext()), Toast.LENGTH_LONG).show();
   //scroll view 1 screen height size
    scr1 = (ScrollView) findViewById(R.id.ScrollView01);
    scr1.getLayoutParams().height=height - 200; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-16T09:27:19.463

将图像视图放在线性布局中。给每个图像视图赋予权重..它会按比例增加大小..

# java - 是否有可能建立某种机制来强制开发人员为类中的所有方法编写 Junit 测试用例？

> ID：12910683
> 
> 赞同：2
> 
> 时间：2012-10-16T08:40:55.743
> 
> 标签：java, junit4

我想知道是否可以开发某种组件（例如：自定义注释），这将迫使开发人员为类中的所有方法编写 Junit 测试用例。抱歉，如果这听起来很荒谬。只是想确定我是否在朝着正确的方向思考。欢迎任何建议提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:43:23.043

为什么不使用像[Cobertura](http://cobertura.sourceforge.net/introduction.html)这样的代码覆盖工具？您可以将其配置为强制执行某个覆盖级别，如果未强制执行，则构建失败（请参阅链接文章的末尾）。

然而，它不会强制执行测试的质量，而且一个完全自动化的系统也不会解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:07:55.693

代码是人写的。世界上所有的覆盖工具都不会改变这一点。

我将采取的方法是确保您的开发人员不会因为必须编写单元测试而编写单元测试，但要确保他们对自己编写的代码负责。

# php - xsl 文件从 linux 服务器加载 php

> ID：12910686
> 
> 赞同：0
> 
> 时间：2012-10-16T08:41:06.693
> 
> 标签：php, linux, xslt, domdocument

我是 Xsl 新手。我想从 http 位置加载 xsl 文件。我正在使用以下代码，结果为假（无法加载）。

```
$xsl = new DomDocument;
  $path=('http://www.clearcube.com/support/view/home.xsl');
  $load_result=$xsl->load($path);

    if(!$load_result){
         echo "Can't load " ;

    }else{
        echo'loaded';

         } 
```

我不知道为什么这个文件没有加载。请帮助和建议提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:13:27.737

在 php.inin 文件中启用 display_errors 后，我收到以下警告

```
Warning: DOMDocument::load(): php_network_getaddresses: getaddrinfo failed: Name or service not known 
```

然后我才知道这是由于服务器中没有对该文件的外部访问。所以将文件外部 url (http://www.clearcube.com/support/view/home.xsl) 更改为永恒 url (abc/test/view/home.xsl)。那就是解决方案对我有用。

# selenium - 从 Selenium RC 迁移到 Webdriver

> ID：12910690
> 
> 赞同：2
> 
> 时间：2012-10-16T08:41:20.267
> 
> 标签：selenium, automation, webdriver, selenium-rc, selenium-webdriver

我正在从 RC 迁移到 webdriver。在我现有的项目中，我使用 Selenium 类中的方法，例如 selenium.click() selenium.type() 等。

我需要将这些更改为等效的 webdriver 命令，还是有办法我仍然可以使用这些命令？

我使用 Firefox 12，Eclipse IDE

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T08:47:51.803

有`WebDriverBackedSelenium`。本质上，这是 RC API 和 WebDriver API 之间的桥梁。这将做你所追求的，会对代码进行一些修改，但大部分仍然是相同的。它为您提供了 WebDriver 本身的灵活性，同时保持旧代码不变。

强烈建议将您的解决方案完全转换为直接使用 WebDriver API。

WebDriver API 不断更新、开发和支持。

RC API*和*“RC-WebDriver-Bridge”（WebDriverBackedSelenium）不会。

页面`WebDriverBackedSelenium`存在于此处：

[http://seleniumhq.org/docs/03_webdriver.html#alternative-back-ends-mixing-webdriver-and-rc-technologies](http://seleniumhq.org/docs/03_webdriver.html#alternative-back-ends-mixing-webdriver-and-rc-technologies)

创建 Firefox 新实例的示例用法：

```
var driver = new FirefoxDriver();

var selenium = new WebDriverBackedSelenium(driver, baseUrl);

selenium.open("http://www.google.com");
selenium.type("name=q", "cheese");
selenium.click("name=btnG");

selenium.stop(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T06:30:02.210

在使用给定的驱动程序创建 WebDriverBackedSelenium 实例后，不必调用 start() - 因为驱动程序的创建已经启动了会话。在测试结束时，应该调用 stop() 而不是 Driver 的 quit() 方法。

这更类似于 WebDriver 的行为——创建一个 Driver 实例会启动一个会话，但它必须通过调用 quit() 显式终止。

# mysql - 使用 date_format 选择日期范围 MySQL

> ID：12910691
> 
> 赞同：8
> 
> 时间：2012-10-16T08:41:20.760
> 
> 标签：mysql, date, date-format

我在使用 MySQL 选择日期范围时遇到问题。

```
SELECT MvtDate,date_format(MvtDate,'%d-%m-%Y')
  FROM (`immmvt`)
 WHERE date_format(MvtDate,'%d-%m-%Y') BETWEEN '01-01-2010' AND '02-01-2010' 
```

`mvtDate`类型是 date like `2010-01-01 00:00:00`。

当我运行查询时，结果适用于几天和几个月，但它也显示了其他年份的其他结果。

之类的`01-01-2011`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T08:42:58.160

你应该使用`STR_TO_DATE`，因为你想转换`string`回`date`

```
SELECT MvtDate, date_format(MvtDate,'%d-%m-%Y')
FROM  `immmvt`
WHERE MvtDate BETWEEN STR_TO_DATE('01-01-2010','%d-%m-%Y') AND 
                      STR_TO_DATE('02-01-2010','%d-%m-%Y') 
```

```
仅供参考： DATE_FORMAT() 将日期转换为格式化的字符串表示形式。
     STR_TO_DATE() 将格式化字符串转换回日期

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T08:46:56.203

```
SELECT MvtDate,date_format(MvtDate,'%d-%m-%Y')
  FROM (`immmvt`)
 WHERE date_format(MvtDate,'%d-%m-%Y') IN ('01-01-2010', '02-01-2010') 
```

# javascript - ajax 请求后触发插件

> ID：12910693
> 
> 赞同：0
> 
> 时间：2012-10-16T08:41:28.827
> 
> 标签：javascript, jquery, ajax, wysiwyg

我有一个文本框，我试图将其变成所见即所得（使用[jwysiwyg](https://github.com/jwysiwyg/jwysiwyg)）。页面上不存在文本框，直到触发 ajax 请求并通过请求将其加载到页面中。

我的问题是我无法让文本框成为正常的所见即所得

`$('.wysiwyg').wysiwyg();`由于`.wysiwyg`不存在`DOM Ready`如何解决此问题，我尝试了以下方法，

```
$("a.suggest-date").click(function(){
        var self = $(this).attr('href');
        $("#mask").show();
        $("#suggestedDate").children().remove();
        $("#send-date textarea").val("");
        $.get(self + '#suggestedDate', null, function(result){ 
            $("#ajax-loaded").append(result);
            $(".wysiwyg").wysiwyg();
        });
        //$("#ajax-loaded").load(self + "#suggestedDate")
        $("#ajax-loaded").show();
        setTimeout(function() { $("#ajax-loaded").removeClass("loading"); $("#ajax-loaded header.loading").hide(); }, 500);
        return false;
    }); 
```

我在做一些明显错误的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:44:49.857

```
$.get(self + '#suggestedDate').then(
    $(".wysiwyg").wysiwyg();
); 
```

[阅读更多](http://api.jquery.com/deferred.then/)

这将允许您在 $.get 调用成功后调用 .wysiwyg() 。

# events - 谷歌脚本事件未定义

> ID：12910694
> 
> 赞同：3
> 
> 时间：2012-10-16T08:41:29.813
> 
> 标签：events, google-apps-script

我构建了一个在编辑电子表格时运行的 Google 脚本：

```
function onEdit(event)
{
  Browser.msgBox(event.source);
  general(event);
} 
```

当我的函数命名为 onEdit() 时，Browser.msgBox 返回“电子表格”（因此定义了源） 当我的函数命名为 othername() 时，Browser.msgBox 返回“未定义”。

我用同一个用户执行脚本，脚本在我的电子表格被编辑时运行，除了函数的名称我没有更改任何其他内容。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:51:57.973

`onEdit`是[Google Script](https://developers.google.com/apps-script/understanding_events)中的一个事件，因此更改它的名称会产生不同的行为。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:10:19.083

当您使用除 onEdit() 之外的其他函数时，event.source 保持未定义。

我已经用 event.range 替换了 event.source，现在它可以工作了。

我不明白为什么，但它运行。

# android - 如何将设备连接到 Eclipse？

> ID：12910697
> 
> 赞同：5
> 
> 时间：2012-10-16T08:41:43.710
> 
> 标签：android, eclipse, android-emulator, device, galaxy

我无法解决这个简单的问题。

我正在尝试通过 USB 电缆将我的设备连接到 Eclipse。
在我的 PC 上，我已经安装了 Eclipse 和 Android SDK，并且在模拟器上运行程序运行良好。

我已经在我的 PC 上下载并安装了 Samsung Kies。如果通过 USB 连接到 PC，它会显示我的设备。

但我不知道如何将设备与模拟器连接。

***连接意味着，我想在我的设备而不是模拟器上运行 Eclipse 代码。***我正在使用***`Samsung Galaxy Ace GT-S5830i`***. 请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T10:26:19.167

评论缺少格式，所以我添加了一个答案。

1.  检查您的计算机是否有您的电话驱动程序。我假设你使用`Windows`. 打开`Device Manager`

    *   在命令提示符处，在“开始搜索”框或“运行”框中，键入以下命令：`mmc devmgmt.msc`

    *   . 其他方式：查看[链接](http://technet.microsoft.com/en-us/library/cc754221%28v=ws.10%29.aspx)

    如果您找到您的电话名称，或者`ADB Interface`您有司机。尝试重新启动`DDMS`或重新启动您的`Eclipse`.

2.  如果您没有找到您的设备或没有看到任何`Other device with yellow question mark`内容，请尝试通过在手机上浏览至`Settings`- `Developer Options`- `Enable developer option`- `Enable USB debugging`-来安装驱动程序`Plug your phone to computer`。Windows 会要求您安装驱动程序。

3、在Android SDK Manager（在Eclipse中）更新Google USB驱动或者搜索`Samsung Galaxy Ace GT-S5830i driver`

4.我在某些设备上遇到了一些奇怪的情况。

*   Nexus S：禁用开发者选项。重启手机。再次启用。Windows 要求安装驱动程序，否则您将在`Eclipse`.
*   HTC 手机或三星：将`Connectivity Option`手机更改为`Charge only`（滑动状态栏。检查显示的通知）。有些手机将其设置为某种**同步数据**，因此 Windows 无法识别设备。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T08:47:25.580

我认为你的模拟器是自动的。您可以将其更改为手动。

试试这个，

**第1步**

转到运行配置

![在此处输入图像描述](../Images/f99f10c544e9f795cb47d657ae382e94.png)

您可以看到三列 Android、Target 和 Common。

![在此处输入图像描述](../Images/d0ab85b6da2efcfd0fbfb41d33d06f35.png)

**第2步**

选择目标

**第 3 步**

选择始终提示选择设备。单击确定

**第4步**

现在运行您的项目，您应该会看到模拟器和您的设备。选择您的设备，然后单击确定。 ![在此处输入图像描述](../Images/febf550a733bedbc02a302fe4903b700.png)

希望能帮助到你。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-20T18:27:56.753

[来源](http://www.developer.com/ws/android/connecting-your-android-device-to-eclipse.html)。

故障排除
这一切听起来都非常简单，但有无数的怪癖和难以诊断的问题可能使连接设备比听起来困难得多。在本节中，我们将列出您的设备未注册时要尝试的事项清单。

1.  检查是否启用了 USB 调试。当您从机器上插入/拔出设备或重新启动手机时，此设置可能会无意（甚至可能自动）更改。

2.  在设备连接到您的机器时检查您的设备。它是否要求您在不同的模式之间进行选择？某些手机​​具有“仅充电”模式，可以防止 Eclipse 识别设备。

选择连接类型

3.  确保您没有在后台运行 Android 虚拟设备。

4.  USB电缆有问题吗？如果您手头有备用电缆，请将其插入以排除电缆本身的故障。

5.  仔细检查您正在运行正确的驱动程序。即使您是，某些设备也预装了所有必需的软件（例如，HTC Sync），从其他位置下载驱动程序可能会使情况变得混乱。如果您的设备可能出现这种情况，请尝试从您的机器上卸载驱动程序并从您的设备内存中重新安装软件。

6.  驱动程序是否需要支持软件？例如，Windows 上的 Samsung Kies 需要 .Net Framework 3.5 SP1 或更高版本。这通常与驱动程序一起安装，但不能保证。

7.  众所周知，运行 Android 调试监视器工具 (monitor.bat) 可以启动 Eclipse 以识别新设备。连接您的设备，找到 monitor.bat (android-sdks/tools/monitor.bat) 并双击打开。这将打开 Android Debug Monitor，这是一个列出已连接设备的独立调试工具。

安卓调试监视器

8.  正在运行的 adb.exe 进程可能会干扰连接。`CTRL`关闭 Eclipse ，然后按`Shift`和打开任务管理器`Esc`。找到 adb.exe 进程并杀死它。启动 Eclipse 并重试。

9.  检查您的“项目构建目标”是否与您设备上的 Android 版本兼容。您可以通过打开“设置”并选择“关于手机”，然后选择“软件信息”选项（如果有）来检查您的设备运行的 Android 版本。如果您需要提醒项目的构建目标，请确保在 Eclipse 的“Package Explorer”中选择了该项目，打开“Project”菜单并选择“Properties”。如果默认情况下未选择“Android”选项卡，请打开它并显示构建目标。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T08:44:21.807

您是否在设备中启用了**USB 调试**？您可以在您的设备中找到它

```
Settings -> Developer Options -> USB Debugging. 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-16T09:22:25.973

您创建的 android 应用程序将是一个 .apk 文件，由 eclipse 在成功运行期间生成。从 Eclipse 项目资源管理器中或通过跟踪您的工作区来查找 .apk 文件。将 .apk 文件复制到您的存储卡（通过 USB 或读卡器）并安装它。

您还应该在 Android 设备的“安全”下启用“未知来源”选项。![在这里找到APK文件！[][1]](../Images/3f39d742d372106d3d60a1dbb7f30527.png)

![在此处查找 APK 文件](../Images/1e0010a4b377395a7f2e0a5f2cc8cb58.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-16T09:42:40.517

如果您在手机上启用了所需选项（USB 调试和未知来源），您可以尝试这样做。在您的计算机上打开命令控制台。使用`cd`导航到您的 android sdk 安装文件夹。转到平台工具。你应该有那里的`adb`文件。运行这个

```
./adb kill-server 
```

进而

```
./adb start-server 
```

然后检查插入的设备

```
./adb devices 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-16T08:45:10.837

首先，您没有将设备与模拟器连接。您想要的是 eclipse 来识别您的设备并将其用于开发。

[官方文档](http://developer.android.com/tools/device.html)中提供了有关使用设备进行 android 开发的所有内容。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-16T08:45:11.150

您必须将手机置于“调试”模式 - 我手边没有说明（但您可以在此处或在 android 网站上搜索您需要的信息）。

还要检查[THIS](http://www.mkyong.com/android/android-debugging-on-real-device/)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-16T08:45:39.107

尝试右键单击项目-->运行方式-->运行配置，然后选择目标并选择始终提示在您的设备上打开调试模式现在尝试运行项目

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-16T08:47:51.180

我假设您不是指将设备与模拟器连接，而是将设备连接到您的计算机，以便您可以调试它并直接从 Eclipse 运行应用程序到设备。在这种情况下，三星的 KIES 根本不会帮助您。您需要的是 SDK 的 Extras 选项卡中提供的 Android USB 驱动程序。有时安装会出错，因为您没有以管理员身份运行 SDK 管理器，因此请确保您这样做。完成所有这些后，请确保您的设备未连接到计算机，然后在安装驱动程序后重新连接。系统会提示您使用必须接受的新设备安装向导。此外，您应该在您的设备上启用调试，并且作为额外的步骤，您可以将启动设置为手动配置，但这不是必需的。

启用设备调试

```
Settings -> Developer Options -> USB Debugging. 
```

欲了解更多信息，请访问[这里](http://developer.android.com/tools/extras/oem-usb.html#Drivers)

顺便说一句：如果 Google USB 驱动程序不起作用，您可能需要安装位于[此处的特定三星驱动程序](http://www.samsung.com/us/support/downloads)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-16T09:17:43.800

转到 -> 设置 -> 应用程序 -> 开发 -> USB 调试

启用它并尝试。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-02-07T22:54:27.697

我知道这有点旧，但我遇到了同样的问题。我尝试了设置USB调试（关闭），断开连接，重新启动手机，USB调试（打开），连接手机的所有选项，但它就是无法连接。

我最终在我的机器上安装了最新版本的 Kies，并在安装程序的末尾添加了统一选项，然后我的电话就会连接。（不确定我是否需要统一选项）但它对我有用。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-05-06T16:36:10.353

我尝试了以上所有方法，但对我没有帮助。我还做了几件事

1.  由于我的移动设备是 Android，我取消了 Kies 安装程序中的统一选项。这是帮助我解决问题的关键
2.  我重新启动了我的手机。

# grails - 抽象域类和命名查询继承？

> ID：12910698
> 
> 赞同：4
> 
> 时间：2012-10-16T08:41:46.647
> 
> 标签：grails, grails-orm

我对命名查询的继承可能性有疑问。我们想像这样在我们的抽象域类中存储一些命名查询。

```
abstract class AbstractDomain {
    boolean state

    static namedQueries = {
        isActive{
            eq("state", true)
        }
    }
} 

class Person extends AbstractDomain {
    String name
    Integer age

    static namedQueries = {
        age18 {
            eq("age", 18)
        }
    }
} 
```

当我们尝试在抽象域中调用命名查询时，由于闭包被覆盖，它失败了。

Person.isActive.age18 由于 isActive 不存在而失败。

我们可以在抽象域类中重用命名查询吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T09:27:29.660

试试这个

```
class Person extends AbstractDomain {
    String name
    Integer age

    static namedQueries = {
        age18 {
            eq("age", 18)
            }
        } << AbstractDomain.namedQueries
    } 
```

# ios - 访问不同类ios的IBOoutlet UIButton

> ID：12910702
> 
> 赞同：0
> 
> 时间：2012-10-16T08:42:10.387
> 
> 标签：ios

我们如何访问其他类的 UIButton。即我们有一个类 A 和按钮 ButtonA 。单击 ButtonA 时，它将在 App Delegate Window 上添加一个 SubView ViewB 。现在，当有人在 ViewB 上单击 ButtonB 时，我想更改 ButtonA 图像？

我怎样才能做到这一点？

B类是单例类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:48:27.153

有很多方法，但是如果您使用的是 IB：

您应该在 B 类中拥有一个属性，例如：

```
@property (nonatomic, retain) IBOutlet UIViewController* classAInstance; 
```

在 IB 中将实例分配给所需的类，就像其他东西一样

从B类：

```
self.classAInstance.ButtonB // is accessable 
```

要使自动完成工作并避免编译错误，您需要`#import classA.h`在 classB 中。

如果您不想使用 IB，您可以通过编程方式执行此操作（但您需要在 ClassB 中存储对 ClassA 实例的引用，反之亦然），例如：

```
classB.classAInstance = classAInstance;
classA.classBInstance = classBInstance; 
```

不要忘记也将属性设为 nil，否则它们可能会相互锁定（因此它们不会释放）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:49:53.940

`Class A`您必须从进行访问`Class B`，您有很多选择，例如其中一些：

*   在您的 中声明一个`Class A`实例变量，并在从`Class B`创建时分配它。`class B``Class A`
*   `Class B`在单击时声明要调用的回调块（作为实例变量）`Button B`。
*   从`Class A`听一个`NSNotification`那个发表的`Class B`。
*   实施`KVO`from `Class A`to`Class B's Button B`以监听它的变化。

# rest - 如何在 Robot Framework 中使用 REST 库？

> ID：12910709
> 
> 赞同：9
> 
> 时间：2012-10-16T08:42:41.120
> 
> 标签：rest, http, automated-tests, robotframework

有人知道如何使用机器人框架的 REST 库吗？该库可在此处获取[http://code.google.com/p/robotframework-restlibrary/source/browse/trunk/RestLibrary.py](http://code.google.com/p/robotframework-restlibrary/source/browse/trunk/RestLibrary.py)。似乎没有可用的文档。

我在 Robot Framework 中尝试过类似的操作，但请求没有返回响应：

```
REST Test Case
    Get    https://maps.googleapis.com/maps/api/timezone/json?location=39.6034810,-119.6822510&timestamp=1331161200&sensor=true
    Response    test 
```

任何想法如何使用这个库？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T16:02:31.737

该库似乎没有很好的文档记录。也许您应该看一下[https://github.com/bulkan/robotframework-requests](https://github.com/bulkan/robotframework-requests)，它似乎已记录和维护。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-18T06:37:23.480

我找到了另一个可以进行 http 调用甚至解析 json 的库。另外，它有据可查的[http://peritus.github.com/robotframework-httplibrary/HttpLibrary.html](http://peritus.github.com/robotframework-httplibrary/HttpLibrary.html)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-01-07T15:22:29.897

自 2009 年以来未开发机器人框架的 REST 库（请参阅[更改](https://code.google.com/p/robotframework-restlibrary/source/list)）。

Robot Framework官方页面引用了几个HTTP级别的[测试库](http://robotframework.org/#libraries)，例如：

*   [robotframework-requests](https://github.com/bulkan/robotframework-requests) - 开发处于活动状态并使用 Requests HTTP python 库。

    示例用法：

    ```
    Grab Avatar Url
             Create Session    github    https://api.github.com     
      ${resp}=
        ...  Get Request       github    /users/jandias
             Should Be Equal As Strings
               ...             ${resp.status_code}  200     
             Dictionary Should Contain Key
               ...             ${resp.json()}       avatar_url 
    ```

*   [robotsframework-httplibrary](https://github.com/peritus/robotframework-httplibrary) - 使用 WebTest（带有 livetest）python 库...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-01T06:22:51.850

可能对其他人有用，另一个 lib [https://pypi.org/project/RESTinstance/](https://pypi.org/project/RESTinstance/)，用于测试 RESTful JSON API

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-01-15T06:31:07.833

使用“请求”库。在您的 RIDE 工具中，打开“库”并输入“请求”并保存。执行你的测试用例。希望它对你有用

# objective-c - 有没有办法在windows中编写iOS代码？

> ID：12910711
> 
> 赞同：2
> 
> 时间：2012-10-16T08:42:48.593
> 
> 标签：objective-c, ios

> **可能重复：**
> [如何使用 Windows 开发机器为 iPhone 开发？](https://stackoverflow.com/questions/22358/how-can-i-develop-for-iphone-using-a-windows-development-machine)

我正在使用 Windows 7。现在，我已经开始编写 iOS 代码了。不买mac机可以吗？有什么工具可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:50:32.313

您可以在虚拟机上安装 Mac OS X。即使您购买了 Mac OS X 的副本，它是否合法也是值得商榷的。

提交应用程序也可能会出现问题，因为应用程序加载器可能会在虚拟机上失败。

另一种选择是使用跨平台框架进行开发。在某些情况下，您只需要 mac 进行最终编译和上传。

以下是一些这样的框架

*   土坯空气
*   电话间隙
*   果酱SDK
*   统一
*   钛

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:07:45.477

直接回答您的问题：是的，您可以在 Windows 中编写 iOS 代码。您可以使用简单的记事本或 Notepad++ 或任何其他文本编辑器。

如果您还想编译您的代码，答案是否定的。你做不到。

如果您不想购买 Mac，有几种方法（请不要忘记它们是非法的）：

*   在虚拟机上安装 Mac OS X
*   安装 hackintosh

但是您可能会花费更多时间来配置您的 hackintosh，而不是实际进行一些编程。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T08:45:15.177

是的，您可以在 Windows 7 上进行 iOS 编程。请安装 vmware 或 virtualbox。然后在上面安装mac os。通过 xcode 你可以为 iPhone 编写代码。

# objective-c - 表中的 JSON 解析

> ID：12910714
> 
> 赞同：0
> 
> 时间：2012-10-16T08:43:03.240
> 
> 标签：objective-c, xcode, json, uitableview, asihttprequest

我没有回应

```
(
        {
        "first_name" = Akash;
        idprofile = 1;
        iduser = 1;
        "last_name" = Testing;
        picUrl = "http://qalina.acapglobal.com/kangatime/ktapp/profilepics/1/1_Jellyfish.jpg";
        "profile_picture_filepath" = "1_Jellyfish.jpg";
    },
        {
        "first_name" = testing;
        idprofile = 3;
        iduser = 1;
        "last_name" = tst;
        picUrl = "http://qalina.acapglobal.com/kangatime/ktapp/profilepics/1/3_Penguins.jpg";
        "profile_picture_filepath" = "3_Penguins.jpg";
    },
        {
        "first_name" = test;
        idprofile = 4;
        iduser = 1;
        "last_name" = test;
        picUrl = "http://qalina.acapglobal.com/kangatime/ktapp/profilepics/1/4_Chrysanthemum.jpg";
        "profile_picture_filepath" = "4_Chrysanthemum.jpg";
    },
        {
        "first_name" = prashant1;
        idprofile = 19;
        iduser = 1;
        "last_name" = kharade1;
        picUrl = "http://qalina.acapglobal.com/kangatime/ktapp/profilepics/1/19_Koala.jpg";
        "profile_picture_filepath" = "19_Koala.jpg";
    },
        {
        "first_name" = Priyank;
        idprofile = 68;
        iduser = 1;
        "last_name" = Jain;
        picUrl = "http://qalina.acapglobal.com/kangatime/ktapp/profilepics/1/68_P.jpg";
        "profile_picture_filepath" = "68_P.jpg";
    },
        {
        "first_name" = sdasd;
        idprofile = 106;
        iduser = 1;
        "last_name" = sdasd;
        picUrl = "http://qalina.acapglobal.com/kangatime/ktapp/profilepics/1/";
        "profile_picture_filepath" = "<null>";
    }
) 
```

在我做dis之后

```
NSMutableArray *fNames = [NSMutableArray array];

for(NSDictionary *temp in responseArr)
{
    [fNames addObject:[temp objectForKey:@"first_name"]];

}
 NSLog(@"fNamesArray==>%@",fNames);

NSMutableArray *lNames = [NSMutableArray array];

for(NSDictionary *temp1 in responseArr)
{
    [lNames addObject:[temp1 objectForKey:@"last_name"]];
}
NSLog(@"lNamesArray==>%@",lNames); 
```

我明白了：

fNamesArray==>（Akash，测试，测试，prashant1，Priyank，sdasd）

lNamesArray==>( 测试, tst, test, kharade1, Jain, sdasd )

fNamesArray 由名字组成，lNamesArray 由姓氏组成。现在我要做的是组合两个数组（名字+姓氏）并将它们显示在与每个配置文件相关的表格和图像中，并显示在表格行上。

就像第一行应该包含

阿卡什测试

第二行

测试 tst

等等...

任何帮助，将不胜感激。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:50:59.053

最好在下面...

```
NSMutableArray *fullNames = [[NSMutableArray alloc] init];
for(NSDictionary *temp in responseArr)
{
    NSString *strFullName = [NSString stringWithFormat:@"%@ %@", [temp objectForKey:@"first_name"], [temp1 objectForKey:@"last_name"]];
    [fullNames addObject: strFullName]
}
 NSLog(@"fNamesArray==>%@",fullNames);

```

Inserted for related new question...

To get array from JSON response, [How to create JSON Array string given below?](https://stackoverflow.com/a/8893119/790794)

# php - 遍历循环并将变量添加在一起

> ID：12910716
> 
> 赞同：0
> 
> 时间：2012-10-16T08:43:13.430
> 
> 标签：php, while-loop, accumulate

我有以下循环显示字段金钱和百分比。我想在迭代时将所有钱加在一起，我该如何做到这一点并在循环外回显一个总数？

```
while(the_repeater_field('income')) {
   the_sub_field('money');
   the_sub_field('percent');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:49:03.863

```
<?php 
$Sum_Money   = 0;
$Sum_Percent = 0;

while (the_repeater_field('income')) {
  $Money   = the_sub_field('money'); 
  $Percent = the_sub_field('percent');
  $Sum_Money   += $Money;
  $Sum_Percent += $Percent;
}

echo $Sum_Money; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:47:56.880

编辑以反映问题的新格式。这是答案：

```
<?php
$total = 0;
$totalPercent = 0;
while(the_repeater_field('income')) {
    $total += the_sub_field('money');
    $totalPercent += the_sub_field('percent');
}
echo "Total: $total, Percent: $totalPercent";
?> 
```

# java - 执行字符串作为方法？

> ID：12910717
> 
> 赞同：1
> 
> 时间：2012-10-16T08:43:13.897
> 
> 标签：java, reflection, rmi, rpc

是否可以将字符串作为方法执行？

假设我有一个服务器和一个客户端。客户端正在发送一个`"sayHello()"`字符串。如果他有方法，客户端可以在客户端执行这个字符串作为`private void sayHello()`方法吗？

我知道我可以通过将字符串与某些值进行比较并基于此调用函数来调用该方法。但我正在研究类似上面描述的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T08:44:17.440

[这听起来像是Java 反射](http://docs.oracle.com/javase/tutorial/reflect/index.html)的完美匹配。但是请注意，有许多框架可用于使用 Java 执行远程方法调用，您可能会重新发明轮子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T08:45:38.373

[Java 反射](http://docs.oracle.com/javase/tutorial/reflect/index.html)可以做到这一点。

另请查看对所述要求更具体的[远程方法调用 (RMI) 。](http://en.wikipedia.org/wiki/Java_remote_method_invocation)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T08:53:46.757

反射不是很难编码：

```
public void invokeByName(String methName) {
  try { getClass().getDeclaredMethod(methName).invoke(this); } 
  catch (RuntimeException e) { throw e; }
  catch (Exception e) { throw new RuntimeException(e); }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T08:53:30.627

一个简洁的例子：

```
class Foo {
    public static void main(String[] args) throws Exception {
        String methodStr = "sayHello";
        Foo foo = new Foo();
        foo.getClass().getDeclaredMethod(methodStr).invoke(obj);
    }

    private void sayHello() {
        System.out.println("hello stackoverflow!");
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T09:26:25.633

是的，请参见`java.beans.Statement`和`java.beans.Expression`。

# java - 如何将修改后的先序树遍历数据填充到 Java 树对象中？

> ID：12910719
> 
> 赞同：4
> 
> 时间：2012-10-16T08:43:16.673
> 
> 标签：java, php, tree, populate, mptt

我有一个*MPTT*结构的下表：

```
CREATE TABLE IF NOT EXISTS menus (
  id int(10) unsigned NOT NULL AUTO_INCREMENT,
  parent_id int(10) DEFAULT NULL,
  lft int(10) DEFAULT NULL,
  rght int(10) DEFAULT NULL,
  module_name varchar(255) DEFAULT NULL,
  module_controller_name varchar(128) DEFAULT NULL,
  module_action_name varchar(128) DEFAULT NULL,
  alias varchar(128) DEFAULT NULL,
  PRIMARY KEY (id)
) ENGINE=InnoDB;

INSERT INTO menus (`id`, `parent_id`, `lft`, `rght`, `module_name`,    
`module_controller_name`, `module_action_name`, `alias`) VALUES (1, NULL, 1, 14,  
'Root', '', '', 'Root'),
(2, 1, 2, 7, 'Toolbox', '', '', 'Toolbox'),
(3, 2, 5, 6, 'Menu Manajemen', 'menus', 'index', 'MenuManajemenz'),
(4, 2, 3, 4, 'Hak Akses Manajemen', 'access_rights', 'index', 'HakAksesManajemen'),
(5, 1, 8, 13, 'Accounts', '', '', 'Accounts'),
(6, 5, 9, 10, 'Users', 'users', 'index', 'Users'),
(7, 5, 11, 12, 'Groups', 'groups', 'index', 'Groups'); 
```

在*CakePHP*中，我可以创建以下数据结构：

```
Array
(
    [0] => Array
        (
            [Menu] => Array
                (
                    [id] => 2
                    [parent_id] => 1
                    [lft] => 2
                    [rght] => 7
                    [module_name] => Toolbox
                    [module_controller_name] => 
                    [module_action_name] => 
                    [alias] => Toolbox
                )

            [children] => Array
                (
                    [0] => Array
                        (
                            [Menu] => Array
                                (
                                    [id] => 4
                                    [parent_id] => 2
                                    [lft] => 3
                                    [rght] => 4
                                    [module_name] => Hak Akses Manajemen
                                    [module_controller_name] => access_rights
                                    [module_action_name] => index
                                    [alias] => HakAksesManajemen
                                )

                            [children] => Array
                                (
                                )

                        )

                    [1] => Array
                        (
                            [Menu] => Array
                                (
                                    [id] => 3
                                    [parent_id] => 2
                                    [lft] => 5
                                    [rght] => 6
                                    [module_name] => Menu Manajemen
                                    [module_controller_name] => menus
                                    [module_action_name] => index
                                    [alias] => MenuManajemenz
                                )

                             [children] => Array
                                (
                                )

                        )

                 )

         )
    ) 
```

问题是如何使用*Java*树类在*Java中填充**MPTT*数据结构。是的，我知道*Java*不能像*PHP*那样拥有动态数组，在*Java*中你必须使用类*Model*。

 ***我的模型类如下所示：

```
public class Menu {
    private String moduleName;
    private String moduleControllerName;
    private String moduleActionName;
    private String alias;

    public String getModuleName() {
        return moduleName;
    }

    public void setModuleName(String moduleName) {
        this.moduleName = moduleName;
    }

    public String getModuleControllerName() {
        return moduleControllerName;
    }

    public void setModuleControllerName(String moduleControllerName) {
        this.moduleControllerName = moduleControllerName;
    }

    public String getModuleActionName() {
        return moduleActionName;
    }

    public void setModuleActionName(String moduleActionName) {
        this.moduleActionName = moduleActionName;
    }

    public String getAlias() {
        return alias;
    }

    public void setAlias(String alias) {
        this.alias = alias;
    }
} 
```

我觉得这很混乱，我不知道该怎么做。来自数据库的数据被填充到*Java*树对象中。我不知道该怎么做，我不知道如何完全填充它。我正在使用[*Vivin 的 GenericTree* Java 类](http://vivin.net/2010/01/30/generic-n-ary-tree-in-java)

我想我需要数据查询策略，是否需要递归函数来从数据库中检索所有数据？我认为这需要两个步骤：1.查询数据，2.将所有数据填充到树对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:00:18.090

为此，您实际上并不需要通用的树数据结构。考虑以下示例：

```
private static final class Menu {
    private Menu parent;
    private List<Menu> children;

    private String moduleName;
    private String moduleControllerName;
    private String moduleActionName;
    private String alias;
} 
```

（为简洁起见省略了 getter/setter）

该`parent`字段可帮助您设置父菜单，并且可以为根菜单为空。

将“儿童”菜单添加到该`children`字段。

有了这个，您将能够满足我希望的分层菜单的需求。

现在构建查询，假设您有一个结果集`rs`：

```
Menu menu;

while (rs.hasNext()) {
    if (rs.get("parent_id") == null) {
        // it s the root
        menu = new Menu(rs.get("id"), /* etc... */);
    } else {
        menu = findMenuById(menu, rs.get("parent_id"));
        menu.addChild(new Menu(rs.get("id"), /* etc... */));
} 
```

至于 find`findMenuById`它可能是这样的：

```
private Menu findMenuById(Menu menu, Long id) {
    if (menu.getId() == id) return menu;
    for (Menu childMenu : menu.getChildren()) {
        Menu found = findMenuById(childMenu, id);
        if (found != null) return found;
    }
    return null;
} 
```

### 编辑

这是我制作的自定义工作实现。我将您的菜单插入数据库并使用结果集。我应该与您的自定义抽象几乎相同。

```
Menu root = null;
        Map<Integer, Menu> menus = new HashMap<Integer, Menu>();

        final Database databaseConnection = Database.createConnection("test", "root", "");
        final ResultSet rs = databaseConnection.executeQuery("SELECT * FROM test.menus;");
        while ( rs.next() ) {
            final Menu menu = new Menu(rs.getInt("id"))
                .setAlias(rs.getString("alias"))
                .setModuleName(rs.getString("module_name"));

            final Integer parentId = rs.getInt("parent_id");
            if (root == null && parentId == 0) {
                root = menu;
            } else {
                menus.get(parentId).addSubMenu(menu);
            }

            menus.put(menu.getId(), menu);
        }

        rootMenu = root;

        databaseConnection.closeConnection(); 
```

`Note 1`: 我用 an`HashMap`来存储尚未附加到根目录的菜单。

`Note 2`：如果有多个根菜单，此实现将不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:59:36.287

您可能想要添加一个`private Menu menu;`实例变量，以便您可以对树结构进行建模

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-01T13:21:13.507

检查 MPTT 的 Java JPA 实现可能对您很有价值。源代码中的演示可以提供如何建模实体以及填充树的想法。

[https://github.com/hacker-works/mptt-jpa](https://github.com/hacker-works/mptt-jpa)***

# php - in_array 检查它是否包含 mm/dd/yyy 格式的日期

> ID：12910722
> 
> 赞同：1
> 
> 时间：2012-10-16T08:43:31.523
> 
> 标签：php, arrays, date

我有一个动态数组`$v`，其内容根据提交的表单而变化。有些表单可能有日期字段，而其他表单可能没有。对于所有表单，我使用相同的数组`$v`将值存储在一`key=>value`对中，然后将其插入表中。所以有时数组可能看起来像

```
$v = array('patron_name'=>'some value',
           'place' => 'again some value',
           'pin' => 'blah blah') 
```

在其他时候它可能看起来像

```
$v = array('joomla'=>'some value again',
           'date_applied' => '23/04/2012',
          ) 
```

如上所示，内容因形式而异。我正在寻找的是首先检查是否`$v`包含形式的值，如果包含`dd/mm/yyy`，则将其更改为`yyyy-mm-dd`格式以插入表中。我可以处理转换部分，但我一直在确定是否`$v`包含日期。

所以基本上我打算以这种方式进行：

```
if(in_array('date in dd/mm/yyyy format', $v))
{
  // change it to yyyy-mm-dd
}
// and then insert into table
$flag = insert($tablename, $v); 
```

非常感谢任何帮助。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T08:49:29.843

而不是`in_array`，使用[`preg_replace_callback`](http://php.net/manual/de/function.preg-replace-callback.php). 将数组传递给它并匹配日期格式模式。如果模式匹配，则将其替换为回调。

示例（[演示](http://codepad.viper-7.com/54Bme4)）：

```
$v = array(
    'joomla'=>'some value again',
    'date_applied' => '23/04/2012',
);

$result = preg_replace_callback('#^\d{1,2}/\d{1,2}/\d{4}$#', function($match) {
    return DateTime::createFromFormat('d/m/Y', $match[0])->format('Y-m-d');
}, $v);

print_r($result); 
```

在旁注中，由于 Ymd 包含与 d/m/Y 相同的值，因此您不必严格使用回调，而只需使用`preg_replace`( [demo](http://codepad.viper-7.com/hmVYxg) )：

```
$result = preg_replace('#^(\d{1,2})/(\d{1,2})/(\d{4})$#', '$3-$2-$1', $v); 
```

不过，使用回调将允许您使用任意日期格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:50:36.227

您可以使用`array_walk()`它，再加上`preg_match()`：

```
function handle_dates(&$v)
{
    if (preg_match('#^(\d{1,2})/(\d{1,2})/(\d{4})$#', $v, $matches)) {
        $v = sprintf("%02d-%02d-%02d", $matches[3], $matches[2], $matches[1]);
    }
}

array_walk($v, 'handle_dates'); 
```

或者：

```
function replace_dates($v)
{
    return preg_replace('#^(\d{2})/(\d{2})/(\d{4})$#', '\3-\2-\1', $v);
}

$v = array_map('replace_dates', $v); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T08:50:48.013

in_array 不采用关联数组，但是有很多关于如何使这项工作的示例：[Check If In_Array (in Recursive Associative Array)](https://stackoverflow.com/questions/11009875/check-if-in-array-in-recursive-associative-array)（但一定要寻找更好的；））

至于检查是否有日期，您可以做很多事情。

如果您知道日期将始终采用 dd/mm/yyyy 格式，您可以为此使用正则表达式（谷歌应该给出足够的结果），使用 preg_match 检查值是否包含给定格式的字符串，如果是格式它。

如果可以更改格式（例如，如果它的人工输入，人们倾向于使用 / 或 - 取决于语言细节，只需测试 strtotime(); 是否返回 false 就足够了。

一个示例正则表达式“未经测试”

```
 if (preg_match('/([0-9]{2})\/([0-9]{2})\/([0-9]{4})/', $date) {
    // date found
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T08:49:55.093

如何使用[array_search](http://php.net/manual/es/function.array-search.php)来确定您的数组是否包含该格式的字符串？也拿到了钥匙。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T09:02:37.257

你可以很容易地检查它

```
if($v['date_applied']!="")
{
$date=date_create($v['date_applied']);
$fdate=date_format($date,'Y-m-d');
} 
```

然后你的代码插入

# excel - 名称对象编号在工作表上工作，但在宏中使用时以字符串形式出现

> ID：12910726
> 
> 赞同：1
> 
> 时间：2012-10-16T08:43:46.210
> 
> 标签：excel, constants, vba

我正在使用名称对象来创建我在工作表计算中使用的常量。我的问题是我需要在宏中使用这些相同的常量，但似乎无法创建一个整数——它们一直以字符串的形式出现。

我的一段代码如下所示：

```
Private Sub Workbook_Open()

    'intDocRows
    ActiveWorkbook.Worksheets("INV").Names.Add Name:="intDocRows", RefersToR1C1 _
        :=16
    ActiveWorkbook.Worksheets("INV").Names("intDocRows").Comment = ""

End Sub 
```

然后我需要在计算中使用这个值，但在下面的两个实例中它一直以“=16”而不是 16 的形式出现。

`ThisWorkbook.ActiveSheet.Names("intDocRows").Value` `ThisWorkbook.ActiveSheet.Names("intDocRows").RefersTo`

感谢所有帮助。谢谢。不过，如果我在单元格中使用它，它工作得很好……只是在宏中我遇到了问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T14:56:56.010

您可以`Evaluate(ThisWorkbook.ActiveSheet.Names("intDocRows").Value)`在比您的方法更简单的宏代码中使用。或者甚至只是`Evaluate(Names("intDocRows").Value)`除非您在多个工作表上具有相同的名称。

# java - 如何在java中使用treeset从用户那里获取输入？

> ID：12910727
> 
> 赞同：0
> 
> 时间：2012-10-16T08:43:48.067
> 
> 标签：java

我`Treeset`用来对边缘进行排序，这是代码：

```
TreeSet<Edge> edges = new TreeSet<Edge>();

//Sample problem - replace these values with your problem set
edges.add(new Edge("0", "1", 2));
edges.add(new Edge("0", "3", 1));
edges.add(new Edge("1", "2", 3));
edges.add(new Edge("2", "3", 5));
edges.add(new Edge("2", "4", 7));
edges.add(new Edge("3", "4", 6));
edges.add(new Edge("4", "5", 4));

System.out.println("Graph");
KruskalEdges vv = new KruskalEdges();

for (Edge edge : edges) {
    System.out.println(edge);
    vv.insertEdge(edge);
} 
```

我只想从用户那里获取输入，而不是静态地给予`edges.add`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:48:50.523

如果您的`Edge`构造函数接受两个`String`参数和一个参数，那么只需使用[Scanner](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)`int`读取两个参数`String`和一个参数，将它们存储在变量中，然后将它们传递给构造函数。`int``Edge`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:57:06.987

您可以使用扫描仪在运行时获取输入

```
//From command line
Scanner in = new Scanner(System.in); 
```

```
//From file
Scanner sc = new Scanner(new File("edges"));
while (sc.hasNextLong()) {...} 
```

然后你必须用这些值实例化 Edge 对象并在你的 TreeSet 中使用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:50:15.143

查看[Scanner 的文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)以了解如何以简单的方式获取输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T09:58:43.780

使用循环提示每个`Edge`实例的 3 个参数（您可以通过`Scanner`类执行此操作。）。然后处理这些参数（我的意思是使用`String`类函数等）来构造实例。最后，将每个实例添加到同一循环中的边缘集。示例代码：

```
TreeSet<Edge> edges = new TreeSet<Edge>();

Scanner scanner = new Scanner(System.in);
int counter = 10;

while (counter > 0)
{
    System.out.println("Enter edge parameters:");
    String temp = scanner.nextLine();
    String[] params = temp.split("-");
    edges.add(new Edge(params[0], params[1], Integer.valueOf(params[2])));
    counter--;
} 
```

**注意**：上面的循环执行了10次，只是为了演示，你可以自己操作循环。它希望用户输入*破折号（-）*作为参数的分隔符。一个有效的用户输入可能是这样的：*24-5-6*并且还要小​​心错误处理，不匹配的用户输入在此代码中不会被处理。

# android - Android Monitor Connectivity：我收到了两次

> ID：12910729
> 
> 赞同：1
> 
> 时间：2012-10-16T08:43:57.923
> 
> 标签：android, connection, broadcastreceiver

几天前，我在 Stackoverflow 帖子中发现了一个代码，用于了解我的设备连接何时使用广播接收器发生变化。我将它调整到我的应用程序并且它可以工作，但是每次我打开/关闭我的互联网连接时，我的接收器上的 onReceive 方法都会被调用两次。这是为什么？无论如何，我的应用程序运行良好，但是当一次就足够时，我会执行两次操作。

这是我的接收器：

```
public class ConnectivityReceiver extends BroadcastReceiver {

    private Context mContext;

    Thread network_check = new Thread(new Runnable(){
        public void run() {
            if (NetworkHelper.isOnline(mContext)) {
                     // Do some stuff
            }
        }
    });

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d("MonitorInternetConnectivity", "onReceive");
        mContext = context;
        network_check.start();
    }
} 
```

网络助手类：

```
public class NetworkHelper {

    public static boolean isOnline(Context context) {
        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        if (netInfo != null && netInfo.isConnectedOrConnecting() && canHit()) {
            return true;
        }
        return false;
    }

    public static boolean canHit() {
        try {
            URL url = new URL("http://www.google.com/");
            HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
            urlConnection.setConnectTimeout(3000);
            urlConnection.connect();
            urlConnection.disconnect();
            return true;
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        } 
    }
} 
```

我将此添加到我的清单中（以及所需的权限）：

```
<receiver android:name=".receivers.ConnectivityReceiver" android:exported="false">
        <intent-filter>
            <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
        </intent-filter>
</receiver> 
```

每次我的连接更改时，日志都会显示两次“onReceive”。为什么？

谢谢！

- - - - - - - - 编辑 - - - - - - - - - - -

我添加有关收到的意图的信息。每次连接发生变化时，收到的两个意图都是完全相同的。

设备离线时：

```
Intent { act=android.net.conn.CONNECTIVITY_CHANGE flg=0x10000010 cmp=com.pfc.app/.receivers.ConnectivityReceiver (has extras) }
Extras:
    NetworkInfo: type: WIFI[], state: DISCONNECTED/DISCONNECTED, reason: (unspecified), extra: (none), roaming: false, failover: false, isAvailable: false
    noConnectivity: true
    inetCondition: 0 
```

设备上线时：

```
Intent { act=android.net.conn.CONNECTIVITY_CHANGE flg=0x10000010 cmp=pfc.dani.palou/.receivers.ConnectivityReceiver (has extras) }
Extras:
    NetworkInfo: type: WIFI[], state: CONNECTED/CONNECTED, reason: (unspecified), extra: (none), roaming: false, failover: false, isAvailable: true
    inetCondition: 0 
```

# android - 在 android 中遇到“onTouchEvent”问题

> ID：12910732
> 
> 赞同：1
> 
> 时间：2012-10-16T08:44:04.663
> 
> 标签：android

我正在通过观看 Thenewboston 的视频来练习 Android 开发。

从他的一个视频中，我正在尝试创建一个`onTouchEvent()`，但我收到了错误：`Java.lang.NullPointerException`。

[newboston 134号码教程](http://www.youtube.com/watch?v=Oz8KG4wwBzA&feature=BFa&list=EC2F07DBCDCC01493A)

我应该怎么办？

现在整个代码是：

```
 package com.chupamobile.android.googlemaps;

import java.util.List;

import android.app.AlertDialog;
import android.content.DialogInterface;
import android.os.Bundle;
import android.view.MotionEvent;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;

public class GoogleMapsActivity extends MapActivity {

    MapView map;
    Long start, stop;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        map = (MapView) findViewById(R.id.mymap);
        map.setBuiltInZoomControls(true);

        Touchy t = new Touchy();
        List<Overlay> overlayList = map.getOverlays();
        overlayList.add(t);
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    class Touchy extends Overlay {
        public boolean onTouchEvent(MotionEvent e, MapView m) { 
            if (e.getAction() == MotionEvent.ACTION_DOWN) {
                start = e.getEventTime();
            }
            if (e.getAction() == MotionEvent.ACTION_UP) {
                stop = e.getEventTime();
            }
            if (stop - start > 1500) {
                AlertDialog alert = new AlertDialog.Builder(
                        GoogleMapsActivity.this).create();
                alert.setTitle("Pick an option");
                alert.setMessage("I told u pick an option");
                alert.setButton("Place a pin",
                        new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                // TODO Auto-generated method stub

                            }
                        });
                alert.show();
                return true;
            }

            return false;
        }
    }
} 
```

我的错误列表：

```
Warning: 10-16 10:06:57.106: E/MapActivity(1649): Couldn't get connection factory client

10-16 10:07:03.645: W/dalvikvm(1649): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
10-16 08:17:31.174: W/dalvikvm(1349): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
10-16 08:17:31.334: E/AndroidRuntime(1349): FATAL EXCEPTION: main
10-16 08:17:31.334: E/AndroidRuntime(1349): java.lang.NullPointerException
10-16 08:17:31.334: E/AndroidRuntime(1349):     at com.chupamobile.android.googlemaps.GoogleMapsActivity$Touchy.onTouchEvent(GoogleMapsActivity.java:45)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at com.google.android.maps.OverlayBundle.onTouchEvent(OverlayBundle.java:63)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at com.google.android.maps.MapView.onTouchEvent(MapView.java:679)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at android.view.View.dispatchTouchEvent(View.java:5541)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1951)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1712)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1684)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1684)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1684)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1684)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1912)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1371)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at android.app.Activity.dispatchTouchEvent(Activity.java:2364)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1860)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at android.view.View.dispatchPointerEvent(View.java:5721)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2890)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2466)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:845)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2475)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at android.os.Looper.loop(Looper.java:137)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at android.app.ActivityThread.main(ActivityThread.java:4424)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at java.lang.reflect.Method.invokeNative(Native Method)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at java.lang.reflect.Method.invoke(Method.java:511)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-16 08:17:31.334: E/AndroidRuntime(1349):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T09:08:18.423

尝试创建一个 OnTouchListner。

例子

```
 button.setOnTouchListener(new View.OnTouchListener() 
    {

        public void onClick(View v) 
        {
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:26:15.840

在我上面的代码中，我使用`Long start, stop;`的`long start, stop;`是错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T09:15:06.390

你可以做如下。

说你需要在按钮中触发触摸（我猜是点击事件），而不是在你的 xml 代码中添加这个

```
android:onClick=onClick 
```

在你的 oncreate 方法之后的活动中写下这个

```
public void onClick(View v){

   switch(v.getId()){

      case R.id.urbuttonid:{

        Log.e("click event fired?","yes");        

        break;

      }

   }

} 
```

这样做后检查你的日志

# perl - 为什么shebang线总是第一线？

> ID：12910744
> 
> 赞同：26
> 
> 时间：2012-10-16T08:44:50.917
> 
> 标签：perl, unix, solaris, shebang

我有一个简单的 perl 脚本，如下所示：

```
#!/usr/bin/perl

use strict;
use warnings;

print "hello world!\n"; 
```

我可以按如下方式执行此脚本：

```
>temp.pl
hello world!
> 
```

如果我添加一些这样的评论：

```
#this script is just for test
#the shebang
#!/usr/bin/perl

use strict;
use warnings;

print "hello world!\n"; 
```

当我尝试执行时，它给我的输出如下：

```
> temp.pl
use: Command not found.
use: Command not found.
print: Command not found.
> 
```

这里的重点是，无论如何，shebang 线都应该始终位于顶部。谁能解释为什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-16T09:32:32.903

shebang 必须是第一行，因为它是由**内核**解释的，它查看可执行文件开头的两个字节。如果这些是`#!`该行的其余部分，则将其解释为要运行的可执行文件以及该程序可用的脚本文件。（细节略有不同，但这就是图片）。

由于内核只会查看前两个字符并且没​​有其他行的概念，因此您必须将 hash bang 放在第 1 行。

现在如果内核无法执行以 开头的文件会发生什么`#!whatever`？shell 试图派生一个可执行文件并被内核告知它不能执行该程序，作为最后的手段，它试图将文件内容解释为一个 shell 脚本。由于 shell 不是 perl，你会得到一堆错误，就像你试图运行一样

```
 sh temp.pl 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-16T09:31:08.383

不仅仅是它必须是第一行，字符`#!`还必须是文件中的前两个字节。这可以运行脚本是一种外壳功能，而不是操作系统功能，并且它不特定于任何特定的脚本语言。

当系统被告知执行文件的内容时，无论是使用类似的东西`.../path/to/bin/program`，还是通过 PATH 的类似路径，它都会检查文件的前几个字节以寻找揭示文件类型的“幻数”它是（您可以使用 file(1) 命令查看该过程）。如果它是一个已编译的二进制文件，那么它将以适当的方式加载并执行它，如果前两个字节是`#!`它，它将执行“shebang-hack”。

'shebang-hack' 是一些 shell 使用的一种特殊情况（实际上，基本上是每个 shell，但它是约定而不是要求），其中 shell 读取剩余的字节到换行符，将这些解释为文件名，然后执行该文件，将当前文件的其余部分作为输入。加上一些你可能在[别处](http://www.faqs.org/faqs/unix-faq/faq/part3/section-16.html)读到的细节。

*有些*（版本的）shell 将允许很长的第一行，有些只允许短的；有些允许多个参数，有些只允许一个。

如果文件不是以 开头`#!`，但确实是文本，则某些 shell 将试探性地尝试执行它。Csh（如果我没记错的话）认为它是一个 csh 脚本，如果第一行是空白的，那么对于一些 shell 的行为来说，存在一些复杂而神秘的情况，因为生命太短而无法记住。

在[Sven Mascheck 的 #! 页](http://www.in-ulm.de/~mascheck/various/shebang/)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-16T09:52:47.270

除了上面的解释，[这里](http://www.faqs.org/faqs/unix-faq/faq/part3/section-16.html)和[这里](http://www.in-ulm.de/~mascheck/various/shebang/)和[这里](https://en.wikipedia.org/wiki/Shebang_%28Unix%29)都有详细介绍，还有一些关于 Perl 的特殊事情`#!`还没有提到。

Perl 读取该`#!`行并做两件事。首先，如果路径看起来不像 perl，它将使用它重新执行程序！例如...

```
#!/bin/sh

echo "Hello world!" 
```

如果执行为 . 将正确运行`perl /path/to/that/program`。我不知道 Perl 这样做的历史原因是什么，但是当您使用 Test::Harness 测试多种语言时，它会派上用场。

第二件事是 Perl 找到`#!`行中的任何开关并应用它们，就像它们在命令行上一样。这就是为什么`#!/usr/bin/perl -w`要打开警告的原因。

值得一提的是，与 shebang 处理的其他部分不同，这一切都是在 Perl 内部完成的，而不是 Unix，因此可以移植到 Windows。

另一个 Perl + shebang 注释是您可能在许多 Perl 程序的顶部发现的这种疯狂。

```
#!/usr/bin/perl

eval 'exec /usr/bin/perl -w -S $0 ${1+"$@"}'
    if 0; # not running under some shell 
```

有时，在非常、非常、非常古老的系统上，`#!`无法运行，Perl 程序由 shell 执行。`eval`强制外壳首先使用 Perl 重新执行文件。由于 shell 语句以换行符结束，因此看不到`if 0`. Perl 确实看到了`if 0`，所以它不执行 eval。Perl 和 shell 都有语法上等效`eval`的运算符，这使得 hack 工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T10:44:20.843

至少在 POSIX 兼容系统上，shebang 用于告诉可执行加载器如何处理设置了可执行位的文本文件。

加载器知道如何处理二进制文件，它们以“幻数”开头，这些天通常与 ELF 相关。

另一方面，没有 shebang 的文本文件由机器上可用的 POSIX 兼容 shell 执行，这就是为什么你有这些 shell 错误消息：

```
use: Command not found.
use: Command not found.
print: Command not found. 
```

当你的可执行文件不被 POSIX 兼容的 shell 解释时，你需要告诉加载器使用什么解释器。其他操作系统（如 Windows）选择文件扩展名来解决这个问题，但 Unix 在这种特定情况下不使用或关心扩展名。它使用的是第一行的shebang，它说明了要使用的命令解释器。唯一的缺点是脚本语言应该忽略第一行。希望这是`#`大多数脚本语言的注释行前缀的情况。

尽管普遍认为，可移植脚本根本不应该有shebang。特别`#!/bin/sh`不建议他们使用。

# asp.net - Silverlight 错误 - 创建互操作 Excel 的工作簿对象时

> ID：12910746
> 
> 赞同：0
> 
> 时间：2012-10-16T08:44:51.890
> 
> 标签：asp.net, wcf, silverlight, silverlight-4.0, wcf-ria-services

当我使用来自域服务的下一行创建时，出现了以下错误。

```
Microsoft.Office.Interop.Excel.Workbook excel = new Microsoft.Office.Interop.Excel.Workbook();

---------------------------
Error
---------------------------
Invoke operation 'CallExcel' failed. Retrieving the COM class factory for component with CLSID {00020819-0000-0000-C000-000000000046} failed due to the following error: 80040154 Class not registered (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)).
---------------------------
OK   
--------------------------- 
```

这个奇怪的错误的原因是什么？如果我使用 word 对象，那么它也适用于互操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:31:55.757

你应该创建excel应用程序。第一的。 [MSDN](http://msdn.microsoft.com/en-us/library/ms173186%28v=vs.80%29.aspx)

# oauth - 使用 Google Apps 脚本发出 oAuth 请求

> ID：12910749
> 
> 赞同：0
> 
> 时间：2012-10-16T08:44:59.433
> 
> 标签：oauth, google-apps-script

我一直在尝试使用 oAuth 对 3rd 方服务进行身份验证，但在 UrlFetchApp.fetch() 阶段出现“意外错误”。这促使我用 Twitter 替换 3rd 方服务，其示例在其中一个教程中提供，我也看到 twitter 存在同样的问题。

这是我的代码。

```
function testTwitter() {
  var oauth = UrlFetchApp.addOAuthService('twitter');
  oauth.setRequestTokenUrl('https://api.twitter.com/oauth/request_token');
  oauth.setAuthorizationUrl('https://api.twitter.com/oauth/authorize');
  oauth.setAccessTokenUrl('https://api.twitter.com/oauth/access_token');
  oauth.setConsumerKey('CONSUMER_KEY');
  oauth.setConsumerSecret('CONSUMER_SECRET');

  var url = 'https://api.twitter.com/1/statuses/mentions.json'; 
  try{
    var options = {
      "oAuthServiceName" : "twitter",
      "oAuthUseToken" : "always",
      "method":"GET"
    };
     var resp = UrlFetchApp.fetch(url,options);
      Logger.log(resp.getContentText());
  }catch(ex){
    Logger.log(ex);
  }
} 
```

当我看到日志时，我看到在 UrlFetchApp.fetch 阶段抛出了以下内容。

```
Exception: Unexpected error: 
```

我错过了什么吗？回调 URL 是否必要？如果是，我在哪里指定它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:42:00.103

我已经在 twitter 上使用了您的代码，如果您按照 Apps 脚本页面中的教程操作，它可以正常工作：[https ://developers.google.com/apps-script/articles/twitter_tutorial](https://developers.google.com/apps-script/articles/twitter_tutorial)

主要是检查**设置 Twitter**部分。您必须设置您的 twitter 以使用您的脚本。这是为您的 twitter 设置新应用程序的链接：http: [//dev.twitter.com/apps/new](http://dev.twitter.com/apps/new)

编辑：这也应该适用于您正在使用的其他 3rd 方服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-08T11:32:18.827

我创建了上面脚本的一个版本，按照上面的教程设置了 Twitter（包括指定的回调 URL），一切都很好......直到昨天下午。

```
 function tweet() {
   // Setup OAuthServiceConfig
   var oAuthConfig = UrlFetchApp.addOAuthService("twitter");
   oAuthConfig.setAccessTokenUrl("http://api.twitter.com/oauth/access_token");
   oAuthConfig.setRequestTokenUrl("http://api.twitter.com/oauth/request_token");
   oAuthConfig.setAuthorizationUrl("http://api.twitter.com/oauth/authorize");
   oAuthConfig.setConsumerKey(ScriptProperties.getProperty("twitterConsumerKey"));
   oAuthConfig.setConsumerSecret(ScriptProperties.getProperty("twitterConsumerSecret"));

   // Setup optional parameters to point request at OAuthConfigService.The "twitter"
   // value matches the argument to "addOAuthService" above.
   var options =
     {
        muteHttpExceptions : true,
       "oAuthServiceName" : "twitter",
       "oAuthUseToken" : "always"
     };
   var_url='https://api.twitter.com/1.1/search/tweets.jsonq=hello&count=5&include_entities=true&result_type=recent';
   var result = UrlFetchApp.fetch(url,options);
   var tweets  = Utilities.jsonParse(result); 
```

出于某种原因，我现在收到 OAuth 错误。我添加了 muteHTTPExceptions = true 并且消息显示“无法对服务进行身份验证：twitter”。

我做了以下事情：

*   检查了执行文件，可以看到我的密钥和秘密是从项目属性中提取的

*   使用相同的密钥和秘密从 Twitter 生成了一个 CURL，以仔细检查它们是否正常工作（它们是正常的，我得到了预期的响应）

*   将我的 google 脚本部署为 webapp（以防万一这里出现某种权限错误）

有人知道我还能检查什么吗？有点卡在这里...

非常感谢任何帮助:)

# playorm - 在 PlayOrm 中重新索引

> ID：12910757
> 
> 赞同：0
> 
> 时间：2012-10-16T08:45:16.303
> 
> 标签：playorm

在 PlayOrm 中，我浏览了命令行工具类，但不知道是否有更好的方法来重新索引？即，如果我必须重新构建任何实体的索引，是否有直接的 API，或者我是否需要执行 cmdline 实用程序中已完成的所有操作？如果现在没有直接的方法，那么它是否计划在未来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:38:12.787

我不确定您所说的“更好的方法”是什么意思

现在在命令行工具中，您可以使用以下命令重新索引

```
REINDEX /<Column Family>/<Indexed Column>/<Partitioned by>/<Partition Id> 
```

或者如果没有分区

```
REINDEX /<Column Family>/<Indexed Column> 
```

通常，重新索引是手动操作。它可以通过 api 完成，因为命令行是通过 api 完成的，尽管我认为大多数人会手动重新索引。

# python - 在 SQL 语句中格式化单引号

> ID：12910758
> 
> 赞同：3
> 
> 时间：2012-10-16T08:45:18.560
> 
> 标签：python

我的问题很简单，在 Python 中，如何格式化包含单引号的 SQL 语句？

我有地名

```
"Musee d'Orsay" 
```

我想要的是

```
"Musee d\'Orsay" 
```

所以，我尝试使用以下语句替换单引号

```
str.replace("'","\'") 
```

但是，它返回原始字符串。你能给我任何帮助吗？

双斜线效果很好。

```
str.replace("'","\\'") 
```

* * *

好的，谢谢大家的回复。我已经想通了。

我必须通过加倍单引号来逃避它。

> str.replace("'","''")
> 
> 插入表名值（奥赛博物馆）；

这个对我有用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T08:55:08.543

您不应该通过准备将进入其中的字符串来创建 sql 查询：您应该使用占位符并让库为您完成转义工作。

确切的语法可能会根据您使用的数据库而改变。例如，在[sqlite](http://docs.python.org/library/sqlite3.html)中：

```
m = "Musée d'Orsay"
cursor.execute('SELECT * FROM table WHERE museum=?', m) 
```

# ruby - 保持黄瓜常用步骤的最佳做法

> ID：12910763
> 
> 赞同：5
> 
> 时间：2012-10-16T08:45:46.220
> 
> 标签：ruby, cucumber, automated-tests, watir, watir-webdriver

我将 cucumber-watir-webdriver 用于自动化目的。我有以下目录结构：

```
|features
 -|feature1
 --|1.feature
 --|step_definitions
 ---|1.rb
 -feature2
 --|2.feature
 --|step_definitions
 ---|2.rb 
```

等等。我需要知道什么是减少`1.rb`和`2.rb`. `feature1`并且`feature2`完全不同，所以我不能将两者结合在一个目录中。还有一些部分特征线相同，但步骤执行不同，因此如果它们在一起会产生歧义。

我需要知道是否有一些共同的部分`1.rb`以及`2.rb`我应该把它放在哪里是保持共同步骤定义的最佳实践。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:46:21.563

将您的功能分离到单独的目录中很好，但最好将您的`*_step.rb`文件一起保存在该`step_definitions`目录下的一个`features`目录中。您可以将两个功能共有的步骤放入一个`common_steps.rb`文件中（更好的是类似于`login_steps.rb`and`test_data_creation_steps.rb`而不是`common_steps.rb`）。

要将其转换为与您的问题相同的样式目录结构图，我建议如下：

```
|features
 -|feature1
 --|1.feature
 -feature2
 --|2.feature
 -|step_definitions
 --|1.rb
 --|2.rb
 --|common_steps.rb <-- put your common steps in here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:46:41.437

Cucumber 仅在当前或后续目录中搜索步骤定义。所以我们不能在两个功能目录下面有通用的步骤定义目录或文件，我找到了一个解决方案

```
|features
 -|feature1
 --|1.feature
 --|step_definitions
 ---1.rb
 -feature2
 --|2.feature
 --|step_definitions
 ---2.rb
 -|common_steps.rb <-- keep common steps in here 
```

现在加载此步骤定义添加

```
 require "#{File.dirname(__FILE__)}/../../common_steps.rb" 
```

在你的 1.rbs 中。你也可以有更长的目录结构，然后你可以在每个这样的目录中保留 common_steps.rb 文件，其中包含以下功能的常用步骤，你可以要求以前的 common_steps.rb 文件 -

```
 require "#{File.dirname(__FILE__)}/../common_steps.rb" 
```

这段代码。这将使您的目录结构和 step_definition 文件保持干净

# javascript - JavaScript 中的 while 和 charAt

> ID：12910764
> 
> 赞同：0
> 
> 时间：2012-10-16T08:45:55.750
> 
> 标签：javascript, parsing, render, pixel

我有一个想法，如果我可以制作一个文本文件并将其渲染为像素。第一次测试成功。我有一个像素。现在，当我放置更多像素时，它将无法正常工作。这是代码：

```
xhr=new XMLHttpRequest();
xhr.open("GET", "graphtest.prg", false);
xhr.send();
document.write(xhr.responseText);
var file=xhr.responseText;
var c=0;
var bad=false;
var val=0;
var rgbs="rgb(";
while(c<file.length && bad==false) {
    //alert(file.charAt(c));
    cc=file.charAt(c);
    if (cc=="P" || cc=="R" || cc=="G") {
        // magic
    }
    else {
        if (cc=="{") {
            if (val!=5) {
                var newelem=document.createElement("span");
                newelem.innerHTML="&nbsp;";
                /*newelem.style.width="1px";
                newelem.style.height="1px";
                newelem.position="absolute";*/
                newelem.className="graf";
            }
        }
        else if (cc=="'") {
            c++;
            cc=file.charAt(c);
            switch (val) {
                case 0:
                    //alert("RUN");
                    var num=""+cc.toString();
                    c++;
                    while(!isNaN(file.charAt(c))) {
                        num+=file.charAt(c).toString();
                        c++;
                    }
                    newelem.style.left=num+"px";
                    //alert(num);
                    val++;
                    c++;
                    continue;
                    break;
                case 1:
                    var num=""+cc.toString();
                    c++;
                    while(!isNaN(file.charAt(c))) {
                        num+=file.charAt(c).toString();
                        c++;
                    }
                    newelem.style.top=num+"px";
                    //alert(num);
                    val++;
                    c++;
                    continue;
                    break;
                case 2:
                    var num=""+cc.toString();
                    c++;
                    while(!isNaN(file.charAt(c))) {
                        num+=file.charAt(c).toString();
                        c++;
                    }
                    rgbs+=num+",";
                    //alert(num);
                    val++;
                    c++;
                    continue;
                    break;
                case 3:
                    var num=""+cc.toString();
                    c++;
                    while(!isNaN(file.charAt(c))) {
                        num+=file.charAt(c).toString();
                        c++;
                    }
                    rgbs+=num+",";
                    //alert(num);
                    val++;
                    c++;
                    continue;
                    break;
                case 4:
                    var num=""+cc.toString();
                    c++;
                    while(!isNaN(file.charAt(c))) {
                        num+=file.charAt(c).toString();
                        c++;
                    }
                    rgbs+=num+")";
                    //alert(num);
                    val++;
                    c++;
                    continue;
                    break;
                case 5:
                    newelem.style.backgroundColor=rgbs;
                    document.body.appendChild(newelem);
                    val=0;
                    rgbs="";
                    newelem=null;
                    cc="";
                    num="";
                    break;
            }
        }
        if (val==5) {
            newelem.style.backgroundColor=rgbs;
            document.body.appendChild(newelem);
            val=0;
            rgbs="";
            //newelem=null;
            //c;
            alert(file.charAt(c));
            cc="";
            num="";
        }
    }
    c++;
} 
```

这是“图形文本”文件：

```
PRG{'100','200','0','255','0'}{'200','100','0','0','255'} 
```

第一个像素渲染成功，但第二个像素没有背景色。这是解析问题还是其他问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:02:56.700

由于大量重复代码，现在解析器很混乱。在您的每一个 switch 案例中，您都重复了许多相同的代码，这不是必需的。

除此之外，我注意到的一件事是您的`rgbs`var`var rgbs="rgb(";`在脚本的开头被初始化，但`rgbs="";`在像素解析结束时被重新初始化。

# tridion - 如何从 DataExtender 中检索当前用户？

> ID：12910769
> 
> 赞同：4
> 
> 时间：2012-10-16T08:46:09.370
> 
> 标签：tridion, tridion-2011

我编写了一个 DataExtender 来“隐藏”某些项目。这个想法是某些项目不应该在 GUI 的任何列表中可见，即使用户可以访问它（类似于 Windows 中的系统文件/文件夹，即使您有权阅读它们通常也不可见） .

它工作正常，但现在我想为系统管理员做一个例外：他们应该总是看到每个项目。但我看不到如何从我的 DataExtender 中检索当前用户。这甚至可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T08:55:25.107

您可以使用`Tridion.Web.UI.Core.Utils.GetUserName()`获取 Windows 用户名，然后创建自己的核心服务客户端，调用 Impersonate，然后调用 GetCurrentUser。

# c# - 从内网外部访问网站时显示登录页面

> ID：12910771
> 
> 赞同：1
> 
> 时间：2012-10-16T08:46:18.500
> 
> 标签：c#, asp.net-mvc-3, iis, asp.net-membership

我正在用 ASP.NET MVC3 开发一个具有一些简单内容管理功能的 Intranet Web 应用程序。内部网中的任何人都可以查看该网站，但只能由注册用户编辑。从 Intranet 外部，除注册用户外，任何人都不得查看该网站。

有没有办法检查是否有人以某种方式从 Intranet 外部访问该网站并将他们重定向到登录页面？这应该在 IIS 或 C# 中完成吗？我真的不知道用什么方法来解决这个问题。我仍然想使用非常方便的 [Authorize] 属性。

任何人都可以帮忙吗？非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:39:53.363

您可以编写一个自定义 Authorize 属性，该属性将检查客户端 IP 地址是否属于本地 Intranet 并允许匿名访问，否则需要身份验证：

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var ip = httpContext.Request.UserHostAddress;
        if (IsIntranetAddress(ip))
        {
            // The IP address of the client belongs on the intranet => 
            // allow anonymous access
            return true;
        }

        return base.AuthorizeCore(httpContext);
    }

    private bool IsIntranetAddress(string ip)
    {
        throw new NotImplementedException();
    }
} 
```

`[MyAuthorize]`现在用属性装饰你的控制器/动作。或者，如果您想将其应用于所有请求，只需将其注册为全局操作过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:48:45.903

您可以简单地从防火墙设置中限制用户，并且如果您不分配任何公共 ip，无论如何它都不会被互联网用户访问。

# c# - 将对象列表序列化为 .settings

> ID：12910773
> 
> 赞同：0
> 
> 时间：2012-10-16T08:46:29.797
> 
> 标签：c#, .net, xml, serialization, settings.settings

我试图将对象列表序列化到我的 user.settings 文件中。我已经尝试了很多东西，我唯一要做的就是这里的解决方案。[将自定义类的集合添加到 Settings.Settings](https://stackoverflow.com/questions/7000625/add-a-collection-of-a-custom-class-to-settings-settings?lq=1)我尝试了许多不同的方法，但这是唯一始终有效的方法。

**编辑**：我试图序列化的是一个对象列表（可序列化类的），或者只是一个元组列表

解决方案如下所示：

```
public class Favorites: ApplicationSettingsBase
{
    [UserScopedSetting()]
    [SettingsSerializeAs(System.Configuration.SettingsSerializeAs.Binary)]
    [DefaultSettingValue("")]
    public System.Collections.ArrayList FavoritesList
    {
        get
        {
            return ((System.Collections.ArrayList)this["FavoritesList"]);
        }
        set
        {
            this["FavoritesList"] = (System.Collections.ArrayList)value;
        }
    }
} 
```

从技术上讲，它有效。但是，我想让它作为 XML 序列化而不是二进制工作。切换到 SettingsSerializeAs.Xml，它不会序列化设置，我得到的只是这些设置的空标签。当我将设置序列化为 XML 时，我是否必须采取不同的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:09:32.493

您可以使用 XmlSerializer 并在代码中序列化您的集合。

然后您可以将序列化的数据字符串保存到设置中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:13:10.613

请试试这个，

```
public class Favorites: ApplicationSettingsBase
{
    private String[] favoritesList;

    [UserScopedSetting()]
    [System.Xml.Serialization.XmlElementAttribute("FavoritesList")]
    [DefaultSettingValue("")]
    public String[] FavoritesList
    {
        get
        {
            return (this.favoritesList);
        }
        set
        {
            this.favoritesList = value;
        }
    }
} 
```

注意：我使用了字符串数据类型的数组。但理想情况下，它可以是您的自定义对象的数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:20:56.797

我让它看起来像这样工作，设置存储“收藏夹”类型的对象：

```
public sealed class Favorites : ApplicationSettingsBase
{
    public Favorites()
    {
        this.FavoritesList = new List<Favorite>();
    }

    [UserScopedSetting]
    public List<Favorite> FavoritesList
    {
        get
        {
            return (List<Favorite>)this["FavoritesList"];
        }
        set
        {
            this["FavoritesList"] = value;
        }
    }
}

[Serializable]
public class Favorit
{
    // ...
} 
```

# perl - 带有原始 XML 的 Perl SOAP::Lite WSDL

> ID：12910780
> 
> 赞同：1
> 
> 时间：2012-10-16T08:47:11.117
> 
> 标签：perl, soap, wsdl

我想用 Perl 发出一个 SOAP 请求，我想发送原始 XML 数据，例如

```
$xml = "<IODATA>
  <TEST>
    Hello World
  </TEST>
</IODATA>"; 
```

我正在使用这样的 SOAP::Lite：

```
my $soap = SOAP::Lite->service('http://localhost/cms/WebService/RDCMSXMLServer.WSDL');
$soap->Execute($xml, "", ""); 
```

但是当我检查 SOAP 主体时，我的 xml 被解析并且看起来像这样：

```
&lt;IODATA&gt; 
```

等等

WSDL 文件：

```
<?xml version='1.0' encoding='UTF-8' ?>
<definitions
name='RDCMSXMLServer'
targetNamespace='http://tempuri.org/RDCMSXMLServer/webservice/'
xmlns:wsdlns='http://tempuri.org/RDCMSXMLServer/webservice/'
xmlns:typens='http://tempuri.org/RDCMSXMLServer/type/'
xmlns:soap='http://schemas.xmlsoap.org/wsdl/soap/'
xmlns:xsd='http://www.w3.org/2001/XMLSchema'
xmlns:stk='http://schemas.microsoft.com/soap-toolkit/wsdl-extension'
xmlns:dime='http://schemas.xmlsoap.org/ws/2002/04/dime/wsdl/'
xmlns:ref='http://schemas.xmlsoap.org/ws/2002/04/reference/'
xmlns:content='http://schemas.xmlsoap.org/ws/2002/04/content-type/'
xmlns:wsdl='http://schemas.xmlsoap.org/wsdl/'
xmlns='http://schemas.xmlsoap.org/wsdl/'>

<types>
    <schema
        targetNamespace='http://tempuri.org/RDCMSXMLServer/type/'
        xmlns='http://www.w3.org/2001/XMLSchema'
        xmlns:SOAP-ENC='http://schemas.xmlsoap.org/soap/encoding/'
        xmlns:wsdl='http://schemas.xmlsoap.org/wsdl/'
        elementFormDefault='qualified'>

        <import namespace='http://schemas.xmlsoap.org/soap/encoding/'/>
        <import namespace='http://schemas.xmlsoap.org/wsdl/'/>
        <import namespace='http://schemas.xmlsoap.org/ws/2002/04/reference/'/>
        <import namespace='http://schemas.xmlsoap.org/ws/2002/04/content-type/'/>

    </schema>
</types>

<message name='XmlServer.Execute'>
    <part name='sParamA' type='xsd:string'/>
    <part name='sErrorA' type='xsd:anyType'/>
    <part name='sResultInfoA' type='xsd:anyType'/>
</message>

<message name='XmlServer.ExecuteResponse'>
    <part name='Result' type='xsd:string'/>
    <part name='sErrorA' type='xsd:anyType'/>
    <part name='sResultInfoA' type='xsd:anyType'/>
</message>

<portType name='XmlServerSoapPort'>

    <operation name='Execute' parameterOrder='sParamA sErrorA sResultInfoA'>
        <input message='wsdlns:XmlServer.Execute'/>
        <output message='wsdlns:XmlServer.ExecuteResponse'/>
    </operation>

</portType>

<binding name='XmlServerSoapBinding' type='wsdlns:XmlServerSoapPort' >

    <stk:binding preferredEncoding='UTF-8'/>
    <soap:binding style='rpc' transport='http://schemas.xmlsoap.org/soap/http'/>

    <operation name='Execute'>
        <soap:operation soapAction='http://tempuri.org/RDCMSXMLServer/action/XmlServer.Execute'/>
        <input>
            <soap:body
                use='encoded'
                namespace='http://tempuri.org/RDCMSXMLServer/message/'
                encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'
                parts='sParamA sErrorA sResultInfoA'/>
        </input>
        <output>
            <soap:body
                use='encoded'
                namespace='http://tempuri.org/RDCMSXMLServer/message/'
                encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'
                parts='Result sErrorA sResultInfoA'/>
        </output>
    </operation>

</binding>

<service name='RDCMSXMLServer' >
    <port name='XmlServerSoapPort' binding='wsdlns:XmlServerSoapBinding' >
        <soap:address location='http://10.1.102.104:80/CMS/webservice/RDCMSXMLServer.WSDL'/>
    </port>
</service>

 </definitions> 
```

我该如何改变呢？

非常感谢您提前。

克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T15:08:03.307

> 我想用 Perl 发出一个 SOAP 请求，我想发送原始 XML 数据

让我们来看看。在[SOAP::Data 文档](https://metacpan.org/module/SOAP::Data#COMPOSING-MESSAGES-USING-RAW-XML)中有一个关于使用原始 XML 的部分。这里是：

> 在某些情况下，您可能需要使用原始的未序列化 XML 文本对消息进行编码。要使用原始 XML 实例化 SOAP::Data 对象，请执行以下操作：
> 
> ```
> $xml_content = "<foo><bar>123</bar></foo>";
> $elem = SOAP::Data->type('xml' => $xml_content); 
> ```

您也可以使用您的代码执行此操作。它可能看起来像这样：

```
my $xml = <<'XML';
<IODATA>
  <TEST>
    Hello World
  </TEST>
</IODATA>
XML

my $soap = SOAP::Lite->service('http://localhost/cms/WebService/RDCMSXMLServer.WSDL');
my $res = $soap->sayHello(SOAP::Data->type( 'xml' => $xml )); 
```

* * *

**但是**，这将不起作用，因为`sayHello`您的 WSDL 文件中没有定义名为的方法！我没有尝试过您的 WSDL，但您可能想再次通读[SOAP::Lite 文档](https://metacpan.org/module/SOAP::Lite)以自己完成此操作。

我相信它可以[像这样](https://metacpan.org/module/SOAP::Lite#RPC-ENCODED)或类似的方式工作（未经测试！）：

```
use SOAP::Lite;
my $soap = SOAP::Lite->service("http://localhost/cms/WebService/RDCMSXMLServer.WSDL");
my $result = $soap->Execute($sParamA, $sErrorA,$ sResultInfoA);
print $result->result(); 
```

您可能还会发现[这](http://www.perlmonks.org/?node_id=691616)很有帮助。

# ember.js - 这在 Ember.js 中是否已被弃用？

> ID：12910783
> 
> 赞同：1
> 
> 时间：2012-10-16T08:47:23.333
> 
> 标签：ember.js

在 Ember.js 文档中，它声明您可以将属性绑定到布尔值。但是，当我尝试使用以下任何一种并且值为 false 时，它​​不会应用提供的类名。

`<div {{bindAttr class="isEnabled:enabled:disabled"}}> Warning! </div>`

`<div {{bindAttr class="isEnabled::disabled"}}> Warning! </div>`

此功能不再可用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T08:56:23.900

该功能仍然有效，并且未被弃用。

如果你不能让它工作，我猜它是因为你猜`isEnabled`是视图的一个属性，但是视图渲染上下文已经改变，所以你必须写：

```
<div {{bindAttr class="view.isEnabled:enabled:disabled">Warning!</div> 
```

我建议您阅读[View context changes gist](https://gist.github.com/2494968)。

编码：

```
App = Ember.Application.create();

App.FooView = Ember.View.extend({
    templateName: "foo-template"
});​ 
```

模板：

```
<script type="text/x-handlebars">
    The disabled view:
    {{view App.FooView isEnabled=false}}
    <br />
    The enabled view:
    {{view App.FooView isEnabled=true}}
</script>

<script type="text/x-handlebars" data-template-name="foo-template">
    <span {{bindAttr class="view.isEnabled:enabled:disabled"}}>A div</span>
</script>​ 
```

JSFiddle[就在这里](http://jsfiddle.net/T58kw/)。

# soap - 在 PHP 中使用 SoapClient() 时出错

> ID：12910785
> 
> 赞同：0
> 
> 时间：2012-10-16T06:14:19.007
> 
> 标签：soap, php

我正在尝试使用 PHP 的 SoapClient() 访问 WSDL（Web 服务定义语言）文件。我发现 WSDL 文件已通过身份验证。我尝试通过另一个参数在阵列上传递凭据并在我的服务器上使用活动 SSL，但仍然出现错误。

这是我正在使用的代码：

> $client = new SoapClient("https://webservices.chargepointportal.net:8081/coulomb_api_1.1.wsdl",array("trace" => "1","Username" => "username","Password" = > "密码"));

这是我得到的错误：

> 警告：SoapClient::SoapClient(https://webservices.chargepointportal.net:8081/coulomb_api_1.1.wsdl) [soapclient.soapclient]：未能打开流：第 80 行的 PATH_TO_FILE 中的连接超时
> 
> 警告：SoapClient::SoapClient() [soapclient.soapclient]: I/O 警告：无法在第 80 行的 PATH_TO_FILE 中加载外部实体“https://webservices.chargepointportal.net:8081/coulomb_api_1.1.wsdl”
> 
> 致命错误：未捕获的 SoapFault 异常：[WSDL] SOAP-ERROR：解析 WSDL：无法从“https://webservices.chargepointportal.net:8081/coulomb_api_1.1.wsdl”加载：无法加载外部实体“https： //webservices.chargepointportal.net:8081/coulomb_api_1.1.wsdl" 在 PATH_TO_FILE:80 堆栈跟踪：#0 /home2/wingstec/public_html/widget/API/index.php(80): SoapClient->SoapClient('https ://webserv...', Array) #1 {main} 在第 80 行的 PATH_TO_FILE 中抛出

似乎错误说文件在我们给定的路径中不存在，但是当我们直接在浏览器上运行该路径时，我们正在获取该文件

谁能帮我弄清楚到底是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:45:04.557

首先确保您有权从您的主机帐户或服务器访问网站 - 首先检查您是否可以访问 http 网络服务（不带*s*）。如果没有，请检查 php.ini 中的 allow_url_fopen 是否设置为 true。

然后，如果您尝试建立 https 连接，则需要本地证书。看看你是否可以添加一个并使用类似的东西实例化你的 Soap 对象

```
new SoapClient($wsdl, array('local_cert' => $pathToLocalCert)); 
```

# android - android 4.0.4 支持 RTSP 吗？

> ID：12910786
> 
> 赞同：2
> 
> 时间：2012-10-16T08:47:31.180
> 
> 标签：android, youtube, rtsp, android-videoview

嗨，这可能是一个重复的问题，但似乎我找不到答案，我是 android 新手，我正在使用`RTSP`从 youtube 获取视频 url。我播放我使用的 url `videoview`，它在我的测试设备 HTC sense (android 2.3.4) 上工作，但它一直`"cannot play video"`在 android 4.0.4 中提示我？你有什么建议吗？

# mysql - 使用连接从 2 个表中获取数据并按最新排序（一对多关系）

> ID：12910787
> 
> 赞同：0
> 
> 时间：2012-10-16T08:47:33.160
> 
> 标签：mysql

1.  嗨，我正在尝试使用连接从两个表中获取数据，但我不知道如何实现它。

    我有两张桌子

    a) 如果它有 caseid

    一个案例会有很多回应

    b)response 有responseid和caseid

    现在我想按最新响应获取所有案例顺序。

    任何帮助？

编辑：-这会支持一对多关系吗？？？？. 我正在寻找过滤重复值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:50:14.910

```
select c.caseid, r.responseid
from case c Inner Join response r ON c.caseid = r.responseid
order by r.responseid 
```

这可能会对您进行进一步的此类查询有很大帮助。 [http://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:51:53.327

```
select c.*, r.responseid
from `case` c Inner Join `response` r ON c.caseid = r.caseid
order by r.responseid 
```

# javascript - 从答案产生有效总和

> ID：12910789
> 
> 赞同：1
> 
> 时间：2012-10-16T08:47:40.370
> 
> 标签：javascript, jquery

我正在创建一个简单的算术游戏。基本上我现在所处的位置是我有一个填充了数字的网格。网格的一侧是数字 0-9。当网格中的隐藏数字突出显示时，用户应单击侧面的正确数字。如果它是正确的，它应该采用“wordglow3”类，如果它是错误的，它应该采用“wordglow4”类。当一个整数完成时（如果它的长度超过一个数字）。一些额外的类应该接管以确定整数是对还是错。正确的是“wordglow2”，错误的是“wordglow”。

基本上，目的是随机产生一个总和，使网格中的数字成为总和的答案。我打算通过手动列出每个数字附加的一些总和来完成此操作，但我认为如果脚本根据网格中突出显示的答案生成一个总和会更好。这样就不会有太多的后端编辑，并且会有更多的随机化。

我已经在网上寻找了这个例子，但没有任何运气。谁能指出我正确的方向？

这是目前的清单..

```
<ul style="display:none;" id="answerlist">

    <li data-answer="1" data-add=""></li>

    <li data-answer="2" data-add=""></li>

    <li data-answer="3" data-add=""></li>

    <li data-answer="4" data-add=""></li>

    <li data-answer="5" data-add=""></li>

    <li data-answer="6" data-add=""></li>

    <li data-answer="7" data-add=""></li>

    <li data-answer="8" data-add=""></li>

    <li data-answer="9" data-add=""></li>

    <li data-answer="10" data-add=""></li>

    <li data-answer="11" data-add=""></li>

    <li data-answer="12" data-add=""></li>

    <li data-answer="13" data-add=""></li>

    <li data-answer="14" data-add=""></li>

    <li data-answer="15" data-add=""></li>

  </ul> 
```

正如你所看到的，我想从加法开始，然后在我知道如何做之后再学习更难的运算符。

这是接受用户选择的脚本..

```
if ($('.drop-box.spellanswer').length == answerIsCorrect) {

                $('.drop-box.spellanswer').addClass('answerglow2');
                $(right).val('Right!');
                $(right).show();
                success.play();
                $(wrong).hide();
                score.right++;
                score.attempts++;

                if (score.right == 3) {

                    $('.answers').css('visibility', 'visible');
                    $('.answers').html("Well done! </br> You correctly spelt " + score.right + ". </br> Keep it up.").show();
                    $('table').fadeOut(3000);
                    $('.right').hide();
                    $('.box-style2').hide();
                    $('.box-style').hide();
                    $('.picstyle').hide();
                    $('.play').hide();
                    $('.minibutton2').hide();
                    $("#mysoundclip").attr('src', listOfWords[rndWord].audio);
                    audio.stop();
                    $("#mypic").attr('src', listOfWords[rndWord].pic);
                    pic.hide();

                }

                setTimeout(function() {
                    jQuery('.minibutton').trigger('click');
                }, 1500);

                setTimeout(function() {
                    jQuery(right).hide();
                }, 1500);

            } else {

                $('.drop-box.spellanswer').addClass("answerglow4").css('color', 'transparent');
                $(wrong).val('Wrong');
                $(wrong).show();
                failure.play();
                $(right).hide();
                score.wrong++;
                score.attempts++;

                if (score.wrong == 3) {

                    $(".minibutton").css('visibility', 'visible').prop('disabled', false);

                }

                $('.drop-box.spellanswer').animate({
                    'opacity': 1
                }, 2000, function() {
                    $(this).removeClass('answerglow4').removeClass('occupied').html('')

                });
                setTimeout(function() {
                    jQuery(wrong).hide();
                }, 1500);
            }

        }
    });

}

}); 
```

# jquery - 在jQuery中实现鼠标移动滚动

> ID：12910792
> 
> 赞同：0
> 
> 时间：2012-10-16T08:47:44.707
> 
> 标签：jquery, html, scroll

我想在 jQuery 中实现鼠标移动滚动。

滚动的目的是查看完整的图像.. 以 Modal Popup 的形式出现。

此图像显示为 Div 的背景图像。

我可以使用 jQuery 在鼠标移动时上下移动图像。但问题是滚动完整图像后div的背景继续滚动事件。我必须阻止这种情况发生。

供参考，你可以看到： -

[http://zovi.com/california-dream-t-shirt-white--S123RNM84602#2](http://zovi.com/california-dream-t-shirt-white--S123RNM84602#2)

单击大图像，将出现一个模式弹出窗口。滚动时，无需额外滚动即可查看完整图像。

我正在努力实现这一目标。提前致谢..

这是我的代码：-

完整的 HTML

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <style>
        .backdrop
        {
            position: relative;
            height: 300px; /*could be anything really..*/
            width: 400px; /*could be anything really..*/
            border: 3px solid #6699ff;
            background: url('image/TShirt/tshirtpicZoom1.jpg') 0 0 no-repeat;

        }

        .direction
        {
            position: absolute;
            width: 50%;
            height: 100%;
        }
        .top
        {
            left: 0;
            top: 0;
            width:100%;

        }
        .bottom
        {
            left: 0;
            top: 50%;
            width:100%;
        }
    </style>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script>
        $(function () {
            var x = 0,
        y = 0,
        rate = 0,
        maxspeed = 10;
            var backdrop = $('.backdrop');

            $('.direction', backdrop).mousemove(function (e) {
                var $this = $(this);
                var top = $this.is('.top');

                if (top) {
                    var h = $this.height();
                    rate = (h - e.pageY - $(this).offset().top + 1) / h;
                }
                else {
                    var h = $this.height();
                    rate = -(e.pageY - $(this).offset().top + 1) / h;
                }
            });

            backdrop.hover(
        function () {
            var scroller = setInterval(moveBackdrop, 10);
            $(this).data('scroller', scroller);
        },
        function () {
            var scroller = $(this).data('scroller');
            clearInterval(scroller);
        }
    );

            function moveBackdrop() {
                y += maxspeed * rate;
                var newpos = x + 'px ' + y + 'px';

                backdrop.css('background-position', newpos);
            }
        }); 

    </script>
</head>
<body>
    <div class="backdrop">
        <div class="direction top">
        </div>
        <div class="direction bottom">
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:40:20.630

我自己得到了解决方案......

这就是我所做的......

获取一个虚拟图像控件并将其隐藏

```
<img id="DummyImage" class="hidden" /> 
```

`$('#BigImage')`在调用模态弹出窗口（即点击事件）之前，将图像源分配给虚拟图像控件 。

同时使 y 和 rate 值为 0

```
y = 0;
rate = 0;
$("#DummyImage").attr('src', imageSrc); 
```

现在在鼠标移动事件中，即' `moveImageZoomBox`'函数使虚拟图像控件可见并获得图像的高度。

在同一个鼠标移动事件中，将变量设为 ' `scrollmin`' 和 ' `scrollmax`' 然后

`scrollmin=-(height of the image)`

```
scrollmax=(height of the image)/2 
```

现在应用条件，这样的值应该在 ' `scrollmin`' 和 ' `scrollmax`'之间

' `moveImageZoomBox`' 函数将如下所示：

```
function moveImageZoomBox() {
                y += maxspeed * rate;
                var ScrollYMin = 0;
                var ScrollYMax = 0;
                var tths = this;
                $("#DummyImage").show();

                ScrollYMin = -($("#DummyImage")[0].naturalHeight-300);//in order to stop scrolling whole image up
                ScrollYMax = $("#DummyImage")[0].naturalHeight / 2-200;//in order to stop scrolling whole image down

                $("#DummyImage").hide();

                var newpos = x + ' ' + y + 'px';
                if (y > ScrollYMin && y < ScrollYMax) {
                    imageZoomBox.css('background-position', newpos);
                }
                else {
                    y -= maxspeed * rate;
                }
            } 
```

# asp.net - 基本的 asp.net 网页调整大小问题

> ID：12910795
> 
> 赞同：0
> 
> 时间：2012-10-16T08:47:51.100
> 
> 标签：asp.net, html, css

我正在创建一个非常基本的 asp.net 网页来显示错误消息。它没有任何功能，只是一个静态页面。我的问题是中间的警告消息框面板具有启用正确自动换行的最小尺寸，但是当浏览器的大小调整为小于该面板时，我会在页面一侧获得空白。我没有大量使用网站、css 甚至 html 的知识或经验，所以如果有人能对这个问题有所了解，那就太好了：D

我已经上传[了一些图片](http://imgur.com/a/3PYDC)，这样您就可以看到正常的外观以及当我调整浏览器大小并向右滚动时会发生什么。

另外一个快速说明它发生在我测试过的所有浏览器（Chrome、IE、Mozilla）中，所以我相当有信心这是由于我缺乏知识:)

这是我的html/css：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Unauthorised.aspx.cs" Inherits="_Default" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<style>
html, body {margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding:0; width:100%; height:100%; font-size:100%;}
#BannerImage {position:relative; padding:0; width:100%; height:10%;}
#OuterBackgroundPanel {position:absolute; width:100%; height:90%; z-index:0;}
#InnerBackgroundPanel{position:absolute; top:2%; left:1%; width:98%; height:94%; z-index:1;} 
#MessagePanel {position:absolute; border:3px solid #000000; top:33%; left:33%; width:33%; height:33%; min-height:175px; min-width:425px; max-height:175px; max-width:450px;}
h1 {text-align:center; font-family:Calibri; font-size:2em;}
h2 {text-align:center; font-family:Calibri; font-weight:normal; font-size:1.2em;}
p {text-align:center; font-family:Calibri; font-size:1em;}
</style>
<title>Unauthorised Personnel Warning</title>
</head>
<body>
<div id="Banner">
<asp:Image ID="BannerImage" runat="server" ImageUrl="~/Resources/Gradient Banner.png" />
</div>

<div id="Backgrounds">
<asp:Panel ID="OuterBackgroundPanel" runat="server" BackColor="#D6E8FF">
<asp:Panel ID="InnerBackgroundPanel" runat="server" BackColor="#EBF3FF">
<asp:Panel ID="MessagePanel" runat="server" BackColor="#FFFFFF">
<h1>Title text.</h1>
<h2>Message text.</h2>
<p>Description text.</p>
</asp:Panel>
</asp:Panel>
</asp:Panel>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:52:38.463

例如，您对横幅使用 min-width

```
#Banner{
   min-width:1000px;
} 
```

# facebook - iframe Like 按钮未触发 edge.create

> ID：12910800
> 
> 赞同：8
> 
> 时间：2012-10-16T08:48:21.310
> 
> 标签：facebook, iframe, facebook-like

我不想使用 xfbml。我需要使用像下面这样的 iframe 按钮。但这不是开火`edge.create`。

```
<div id="fb-root"></div>
<script src="http://connect.facebook.net/en_US/all.js"></script>
<script>
// initalize your Facebook App
  FB.init({
    appId  : '113869198637480',
    status : true, // check login status
    cookie : true, // enable cookies to allow the server to access the session
    xfbml  : true  // parse XFBML
  });
// subscribe to the event
FB.Event.subscribe('edge.create', function(response) {
  alert('you liked this');
});
FB.Event.subscribe('edge.remove', function(response) {
  alert('you unliked this');
});
</script>

<iframe id="test" src="http://www.facebook.com/plugins/like.php? 
       href=http://google.com/&amp;
       layout=button_count&amp;
       show_faces=false&amp;
       width=50&amp;
       action=like&amp;
       colorscheme=light&amp;
       height=21" 
       scrolling="no" frameborder="0" 
       style="border:none; overflow:hidden; width:50px;  
              height:21px;" 
       allowTransparency="true"> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-29T20:48:13.960

这是完全可以预料的；javascript 回调仅在使用社交插件的 Javascript 版本时可用，包括点赞按钮。

这在[Like Button 文档](https://developers.facebook.com/docs/reference/plugins/like/)中有所提及：

```
How do I know when a user clicks a Like button?

If you are using the XFBML version of the button, you can subscribe to the 'edge.create' event through FB.Event.subscribe. 
```

当您将 Like 按钮直接包含为 iFrame 时，来自 Facebook 服务器的事件无法传播回您的 javascript 代码 - Facebook Javascript SDK 在使用 XFBML 版本的 Like 按钮时处理此通信

# c++ - 关闭 RPC 服务器端点

> ID：12910809
> 
> 赞同：5
> 
> 时间：2012-10-16T08:48:38.153
> 
> 标签：c++, c, rpc, endpoint

我有一个使用特定端口启动 RPC 服务器的程序：

1.  RpcServerRegisterIf
2.  RPCServerUseProtSeqEp
3.  开始听...
4.  RpcUnregisterIf

但是，在调用 RPCServerUseProtSeqEp 后，端口立即分配给进程，随后对该函数的调用返回 Duplicate Endpoint。

如何取消注册\关闭此端口？我需要在几个进程中使用这个 rpc 服务器。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-11-17T21:22:38.227

您混淆了顺序：

1.  RpcServerUseProtseqEp() // 告诉 RPC 使用哪个协议
2.  RpcServerRegisterIf() // 注册接口
3.  RPCServerListen()

参见[msdn，RPCServer 应用程序](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378869%28v=vs.85%29.aspx)

我希望这个答案不会太晚

添加 2016 年 8 月 22 日

1.  要关闭服务器端点，请使用 RpcServerUnregisterIf() 请参阅[msdn，停止 RPCServer 应用程序](https://msdn.microsoft.com/en-us/library/windows/desktop/aa378687(v=vs.85).aspx)

2.  再次：您混淆了 api 调用的顺序：首先调用 RpcServerUseProtseqEp() 来指定协议，然后调用 RpcServerRegisterIf() 来注册服务器，然后调用 RpcServerListen()

3.  RpcServerListen() 正在阻塞调用它的线程。如果您从控制台程序调用它，请使用 ctrl c 结束调用。然后将执行下一行代码，通常是 RpcServerUnregisterIf()。如果您从 nseperate 线程（例如在服务中）调用 RpcServerListen()，请在主线程中使用 RpcMgmtStopServerListening() 关闭服务器。

# jquery - jQuery Mobile“错误加载页面”

> ID：12910813
> 
> 赞同：5
> 
> 时间：2012-10-16T08:48:40.867
> 
> 标签：jquery, html, jquery-mobile

我正在使用 Jquery1.8.2 和 Jquery-mobile 1.1

当我单击注销按钮时，我必须转到主页。我能够获得主页，但在返回主页之前收到**“错误加载页面”**消息。

测试.html

```
<body>  
  <div data-role="page">
      <div data-role="header" data-theme="b" >
          <h1> Success Page </h1>
           <a data-role="button" id="logoutbtn" data-theme="b">Logout</a>
       </div><!-- /header -->
       <div data-role='content'>            
    </div>
</div>
</body> 
```

测试.js

```
$(document).ready(function(){   
$("#logoutbtn").click(function () {     
    document.location.href = "Home.html";
});
}); 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T16:24:53.567

您应该使用 jquery mobile 特定的方法。

```
$.mobile.changePage("Home.html"); 
```

请参阅[文档位置-href-位置-vs-mobile-changepagelocation](https://stackoverflow.com/questions/11823386/document-location-href-location-vs-mobile-changepagelocation)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T09:07:53.543

谢谢迪帕克斯

代替

```
document.location.href = "/Home.html"; 
```

我已将其修改如下

```
document.location.href = "./Home.html"; 
```

它工作正常，能够返回主页而不会出现任何错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T07:47:32.910

`$.mobile.changePage("Home.html")`在我的电脑上不起作用

但相反`$.mobile.changePage("#");`，它隐藏了`error loading page`消息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-25T00:16:41.043

我使用了正确的版本和 $.mobile.changePage 来更改页面，但它仍然失败并出现同样的错误。后来我意识到我是在 www/js/custom/handler/handler.js 中的一个 js 文件中执行此操作的。所以我使用的是相对于这个位置的路径。

但是后来我意识到路径必须相对于包含这个 js 的 index.html。

这解决了我的问题。

# regex - 从字符串中提取子字符串

> ID：12910814
> 
> 赞同：0
> 
> 时间：2012-10-16T08:48:47.967
> 
> 标签：regex, string, parsing, text-files

我需要分析一个文本文件。该文件包含一些配置信息。数据保存如下（一般示例）：

```
size=12age=2speed=33id=93539841277312987 
```

但该文件也可能包含分隔符`,`或其他任何内容：

```
size = 12 , age = 2 , speed = 33 , id = P93AR9841277312987 
```

输入遵循的规则只有一个：配置名称后跟`=`值后跟

我所拥有的：输入文件中可能出现的所有配置名称，保存在字典中

我想要什么：将输入文件中的值保存到字典中的适当键（[Size,12][age,2]...）。我很难提取一个和以下配置名称之间的值。

到目前为止我所做的：找到配置名称的结束索引作为我想要的字符串的开始索引。但是很难确定下一个配置名称从哪里开始。此外，还应处理配置名称列表的末尾（因为没有以下配置名称可供参考）。一种想法是搜索文本文件中的所有配置名称，并选择最小但仍大于当前配置名称结束索引的结束索引的开始索引。但我认为有一个更简单的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:58:55.403

我想出了这个正则表达式，但它在值中包含分隔符。每个匹配返回两个捕获组，键和值：

```
(size|age|speed|id)\s*=\s*(.+?)(?=\s|size|age|speed|id|$) 
```

您可以修改它以添加所有配置名称。您还可以修改前瞻以包含您的分隔符，在这种情况下，它不会在值中包含您的分隔符。这是[测试](http://rubular.com/r/Q95uJAbOZu)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:13:06.167

这是一个 Perl 解决方案，它可能是给定文本文件规范的最佳解决方案：

```
my @keys = ('foo','bar','2baz','bla');
my $data = "spoofoo=123  , bar= 12baz = blah";

foreach my $key (@keys)
{
    if ($data =~ /\Q$key\E\s*=\s*([\w\d]+)/) 
    {
        my $val = $1;
        foreach my $key2 (@keys)
        {
           if ($val =~ /(.*)\Q$key2\E$/)
           {
               $val = $1;
               last;
           }
        }
        print "$key value is $val\n";
    }
    else
    {
        print "$key not found\n";
    }
} 
```

这会找到字典中每个键后面的值。然后它检查它找到的值以查看该值的结尾是否实际上是另一个键的开头。但是，可能会出现根本无法解决的情况，具体取决于您的键集和潜在值。

# maven - 将 hdf5 库（java 和 c++）添加到公共 maven 存储库？

> ID：12910817
> 
> 赞同：6
> 
> 时间：2012-10-16T08:48:54.347
> 
> 标签：maven, netbeans, hdf5

是否有一个公共 maven 存储库，我或其他人可以在其中放置 HDF java 和 HDF C++ 库？我没有 maven 存储库，我不想为这些 3rd 方库自己设置一个。必须有更多的人在使用 HDF 库并希望将它们用作 maven 项目的一部分。

[http://www.hdfgroup.org/hdf-java-html/](http://www.hdfgroup.org/hdf-java-html/)

甚至可以将本机 c++ 库（*.so 文件）放入 maven 存储库吗？还是有另一种方法可以将它们放入netbeans中的maven项目中？

最后，我想将我制作的工具（特定 HDF 格式的转换器）组装（Maven Assembly Plugin）到一个 jar 文件中，以便于分发该工具。这也将使其他人更容易处理我的工具的源代码，并让他们在那里构建自己的版本。

该工具针对 HDF java 库进行编程，这些 java 库需要 HDF c++ 库位于 javaPath 上。

# django - 在优化 ORM 查询的同时编写 Django 应用程序的最佳实践？

> ID：12910820
> 
> 赞同：2
> 
> 时间：2012-10-16T08:49:06.110
> 
> 标签：django, optimization, orm

编写一个复杂的 django 应用程序涉及在不同的地方（视图、模板等）使用 ORM 对象。然而，设计 ORM 模型通常是在项目开始时完成的。在那个阶段很难准确预测如何查询数据（主要使用什么 ForeignKeys）。

我们可以在许多阶段优化 ORM 进行的查询数量：

*   select_related() - 在给定的 ORM 调用中
*   prefetch_related() - 在给定的 ORM 调用中
*   覆盖模型 ModelManager 以预取所有查询的所有相关模型

我通常的优化方法是编写我的整个应用程序，然后使用开发人员工具栏，查看它为给定视图生成了多少查询，然后决定它们来自哪里以及如何避免它们（使用上述选项）。

但是我发现这种方法容易出错（例如，您可能忘记检查所有视图或其他背景 /celery/ 方法）。但是，我发现在编写逻辑时进行低效的优化也非常困难（因为我想专注于逻辑，而不是那时的 ORM 调用）。

所以我的问题是——优化 ORM 查询的最佳实践（最佳时机）是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:08:58.353

他们说过早的优化是万恶之源。当事情变得缓慢时，您应该开始担心优化（即使我们都知道他们最终会这样做）。
使用 Django Debug Toolbar 手动检查每个视图实际上比自动化测试更容易出错。
第一种方法是通过[django-timelog](https://github.com/garethr/django-timelog)收集一些指标，然后从较慢的视图开始使用 DDT。

# c# - ResizeBuffers 时 DirectX 无效调用

> ID：12910821
> 
> 赞同：3
> 
> 时间：2012-10-16T08:49:11.027
> 
> 标签：c#, directx, slimdx

我正在编写一个非常简单的建模软件，这更像是一个挑战。大约 3 周前，我对 SwapChain.ResizeBuffers() 函数没有真正的问题。

我更换了 PC，切换到 Visual Studio Express 2012（从 Pro 9），并使用相应的 SlimDX.dll 将我的解决方案切换到 x64。

它仍然运行良好，但是当我调整托管视口的窗口大小时，它得到：DXGI_ERROR_INVALID_CALL (-2005270527)。

谷歌上的快速搜索告诉我，战地 3 也可能与某些特定驱动程序有这个问题。是否可以？

我已经阅读了我能找到的关于该功能的所有内容，但不知何故，我找不到现在正在搞砸的变化。希望有人能看到我做错了什么。

```
 // Form we are attached to.
    private Dockable dock;

    // Rendering stuff.
    private Device device;
    private Viewport viewport;
    private SwapChain swapChain;
    private RenderTargetView renderView;
    private DepthStencilView depthView;

    public Renderer(Dockable form)
    {
        if (form == null)
            return;

        dock = form;

        CreateSwapchain();
        Resize();
    }

    private void CreateSwapchain()
    {
        // Swap Chain & Device
        SwapChainDescription description = new SwapChainDescription()
        {
            BufferCount = 1,
            Usage = Usage.RenderTargetOutput,
            OutputHandle = dock.Handle,
            IsWindowed = true,
            ModeDescription = new ModeDescription(dock.ClientSize.Width, dock.ClientSize.Height, new Rational(60, 1), Format.R8G8B8A8_UNorm),
            SampleDescription = new SampleDescription(1, 0),
            Flags = SwapChainFlags.AllowModeSwitch,
            SwapEffect = SwapEffect.Discard
        };

        Device.CreateWithSwapChain(DriverType.Hardware, DeviceCreationFlags.Debug, description, out device, out swapChain);
    }

    private void CreateRenderView()
    {
        // Dispose before resizing.
        if (renderView != null)
            renderView.Dispose();

        if (depthView != null)
            depthView.Dispose();

        swapChain.ResizeBuffers(0, 0, 0, Format.Unknown, 0); // ERROR : DXGI_ERROR_INVALID_CALL when resizing the window, but not when creating it.
        renderView = new RenderTargetView(device, Resource.FromSwapChain<Texture2D>(swapChain, 0));

        Texture2DDescription depthBufferDesc = new Texture2DDescription()
        {
            ArraySize = 1,
            BindFlags = BindFlags.DepthStencil,
            CpuAccessFlags = CpuAccessFlags.None,
            Format = Format.D16_UNorm,
            Height = dock.ClientSize.Height,
            Width = dock.ClientSize.Width,
            MipLevels = 1,
            OptionFlags = ResourceOptionFlags.None,
            SampleDescription = new SampleDescription(1, 0),
            Usage = ResourceUsage.Default
        };

        depthView = new DepthStencilView(device, new Texture2D(device, depthBufferDesc));
    }

    public void Resize()
    {
        CreateRenderView();

        viewport = new Viewport(0.0f, 0.0f, dock.ClientSize.Width, dock.ClientSize.Height);
        device.ImmediateContext.Rasterizer.SetViewports(viewport);
        device.ImmediateContext.OutputMerger.SetTargets(depthView, renderView);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T20:37:28.760

在调整交换链大小之前，您需要释放与交换链关联的所有资源。

所以这包括渲染视图（你做的），但是当你创建你的渲染目标视图时你会在资源上添加引用。

```
Resource.FromSwapChain<Texture2D>(swapChain, 0) 
```

为纹理添加一个参考计数器。由于您不缓存它，因此您无法释放它。

所以你需要这样做：

```
Texture2D resource = Texture2D.FromSwapChain<Texture2D>(swapChain, 0);
renderView = new RenderTargetView(device, resource); 
```

然后在调用调整大小之前：

```
if (resource != null) { resource.Dispose(); } 
```

刚刚在我的引擎上对其进行了测试，它可以工作（你也对 0 正确，它也可以工作）。

# java - 从 xml 中删除子节点时不需要的换行符

> ID：12910830
> 
> 赞同：2
> 
> 时间：2012-10-16T08:49:29.440
> 
> 标签：java, xml, newline

我有一个问题，当我从 xml 中删除子节点时，xml 中会有一个空行。该节点已正确删除，但我不想要一个空行，而且我不知道该空行来自哪里，因为我没有编写 xml，但 Javas Transformer 正在为我做这件事：

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
TransformerFactory tf = TransformerFactory.newInstance();
Transformer t;
DocumentBuilder db;
db = dbf.newDocumentBuilder();
Document doc = db.parse(myXml);

//get the node I want to remove
Node n = getMyNodeToRemove(doc);
n.getParentNode().removeChild(n);

//write the xml
t = tf.newTransformer();
DOMSource src = new DOMSource(doc);
StreamResult result = new StreamResult(xml);
t.transform(src, result); 
```

我要编辑的 xml 实际上非常简单，如下所示：

```
<parent>
  <childnode 1>
  <childnode i want to remove>
  <childnode 2>
  <childnode 3>
</parent> 
```

删除孩子后，它看起来像这样：

```
<parent>
  <childnode 1>

  <childnode 2>
  <childnode 3>
</parent> 
```

但我想要的是这样的：

```
<parent>
  <childnode 1>
  <childnode 2>
  <childnode 3>
</parent> 
```

是否有一些函数可以在我缺少的父节点上调用？或者 xmls 是否有明确的漂亮打印功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:16:28.567

MadProgrammer：谢谢你的帮助。我现在只是删除了空的文本节点并且它可以工作 - 但我不明白为什么首先创建它们对我来说似乎是不好的解析。

# umbraco - 如何在不使用dashboard.config 的情况下在仪表板中打开页面

> ID：12910837
> 
> 赞同：1
> 
> 时间：2012-10-16T08:49:42.677
> 
> 标签：umbraco

在我正在处理的 Umbraco 站点中，我有一个要求，我需要执行以下操作：

在 Umbraco 的“会员”区域中，共有三个内容树节点：

*   成员
*   会员组
*   会员类型

当用户点击上述任一节点时，默认行为如下：

```
javascript.UmbClientMgr.appActions().openDashboard('member'); 
```

我想做的是 - 当用户单击`Member Groups`节点时，我想在仪表板中打开一个新页面（不是`members`中配置的仪表板页面`dashboard.config`）

我看过对

```
UmbClientMgr.contentFrame('page.aspx'); 
```

为了在仪表板中打开页面，但我看不到如何更改“成员组”节点的默认行为。我尝试`umbracoAppTree`通过将`action`列更改为来编辑该节点的记录：

```
openDashboard('testing123') 
```

然后将鼠标悬停在节点上，查看上面的动作是否出现在 JavaScript 链接中，但没有出现。

有人可以建议我如何更改`Member Groups`链接，以便它在仪表板中打开一个新页面吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:06:22.250

在我的解决方案中，我有一个自定义的 LoadMemberGroups 类，它替换了 Umbraco 的默认 loadMemberGroups 类（我通过编辑`umbracoAppTree`表格并更改现有条目的`treeHandlerAssembly`和`treeHandlerType`列来做到这一点）。`loadMemberGroups`

我没有意识到在我的代码中我可以像这样`action`为`Member Groups`节点设置：

```
protected override void CreateRootNode(ref XmlTreeNode rootNode)
{
    rootNode.Action = "MyAction";
} 
```

所以我可以将动作更改为我需要的任何内容。凉爽的。

# r - ggplot中x轴标签之间的自定义间距

> ID：12910841
> 
> 赞同：2
> 
> 时间：2012-10-16T08:49:57.350
> 
> 标签：r

我有一个df：

```
 Year          Ratio       N    Mean        sd        se        ci
97  1867 TILLBANK...PLACTILL 2  3.861999  4.082170  2.886530  36.67685
98  1867   TILLOBL..PLACTILL 2 21.848833 17.859532 12.628596 160.46153
99  1867   TILLLOAN.PLACTILL 2 54.197044 23.309360 16.482207 209.42629
100 1867   TILLEQUI.PLACTILL 2  0.000000  0.000000  0.000000   0.00000
101 1867   TILLCONT.PLACTILL 2  0.000000  0.000000  0.000000   0.00000
102 1867   TILLRECI.PLACTILL 2 10.772286  5.110514  3.613679  45.91615

str(df) :

     'data.frame':  1152 obs. of  7 variables:
 $ Year : Factor w/ 156 levels "1855","1856",..: 13 13 13 13 13 13 13 13 14 14 ...
 $ Ratio: Factor w/ 8 levels "TILLBANK...PLACTILL",..: 1 2 3 4 5 6 7 8 1 2 ...
 $ N    : num  2 2 2 2 2 2 2 2 2 2 ...
 $ Mean : num  3.86 21.85 54.2 0 0 ...
 $ sd   : num  4.08 17.86 23.31 0 0 ...
 $ se   : num  2.89 12.63 16.48 0 0 ...
 $ ci   : num  36.7 160.5 209.4 0 0 ... 
```

**1）**我正在做一个`ggplot`：

```
qqs<-ggplot(dfccomp, aes(x=Year, y=sd,colour=Ratio))+geom_point()+
    facet_grid(Ratio~.)+
    theme(axis.text.x  = element_text(angle=-90, hjust=0.5, size=11,colour="black")) 
```

这个情节适用于`geom_point()`但现在适用于`geom_line()`. 如果我使用`geom_point()`，那么多年来（从 1867 年到 2010 年），x 轴都会变得非常混乱： ![在此处输入图像描述](../Images/332b587c2e248068e573853985e04df3.png)

如果我使用`geom_line()`, 不起作用，我会得到： ![在此处输入图像描述](../Images/88e32f8fbaa0e5c5de478b062d2db0db.png)

所以，我想知道如何只选择某些特定年份出现在 x 轴上？

**2）**我不明白的另一件奇怪的事情是，如果我将`df$Year`上面的内容转换为数字，

```
df$Year=as.numeric(as.character(df$Year)) 
```

情节是： ![在此处输入图像描述](../Images/58a0bcfb95a19e267a39a5dfaeedf006.png)

现在，x 轴上只有 3 年。哪个更好，但仍然不是我想要的......

为什么两者都`geom_point()`有效`geom_line()`？

更新：在下面的答案中，我读到“年份是一个因素，因此 ggplot() 将相应地解释它并产生一个点图。geom_line() 没有做任何事情的原因是这个 geom 对数据没有意义提供；因子性质向 ggplot() 表明 x 轴是不连续的，并且在该轴上的点之间没有可以绘制的内容，因此没有线。”。

但我有一个不同的情节，其中`geom_line()`有一个因素。为什么会这样？

```
qq<-ggplot(df, aes(x=Year, y=Mean,colour=Ratio)) + 
    geom_errorbar(aes(ymin=Mean-sd, ymax=Mean+sd), colour="black", width=.1, position=position_dodge(.1)) +
    geom_line(position=position_dodge(.1)) +
    geom_point(position=position_dodge(.1), size=3, shape=21, fill="white") + # 21 is filled circle
    xlab("Year") +
    ylab("Mean (%)")+ggtitle("Ratios")+facet_grid(Ratio~.)+theme(axis.text.x  = element_text(angle=-90, hjust=0.5, size=11,colour="black")) 
```

图片： ![在此处输入图像描述](../Images/2737cc53be1c24b4cb8db6fa2848a29d.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T11:39:53.273

`Year`是一个因素，因此`ggplot()`将相应地解释它并产生一个点图。原因`geom_line()`没有做任何事情，因为这个 geom 对提供的数据没有意义；因子性质表明`ggplot()`x 轴是不连续的，并且在该轴上的点之间没有可绘制的内容，因此没有线。

`geom_line()`转换`Year`为数字变量后得到的数字清楚地表明了这种情况。现在`ggplot()`，按照其语法，为连续的 x 轴数据生成折线图。

所以现在你的问题归结为控制 x 轴上的比例（比例就是`ggplot()`所谓的轴）。我看到两个选项；

1.  [使用此处](http://docs.ggplot2.org/current/scale_continuous.html)`scale_x_continous()`记录的方法提供您自己的比例
2.  将您的`Year`数字数据转换为`Date`对象，并`ggplot()`通过 处理比例或对其进行自定义`scale_x_date()`，如此处所记录和说明[的](http://docs.ggplot2.org/current/scale_date.html)

要转换为`Date`对象，您可以执行以下操作：

```
dfccomp <- transform(dfccomp,
                     Year = as.Date(paste(Year, "01", "01", sep = "-"))) 
```

将这两个`"01"`s 更改为您想要的任何月份（第一个`"01"`）或日期，但无论您选择什么，它实际上都是任意的并且不是必需的；该数据点将相隔 1 年。

然后，您可以使用`minor_breaks`参数 in`scale_x_date()`来控制显示次要刻度的数量或位置，以及`breaks`设置显示哪些年份的参数。我建议你不要展示所有年份，否则结果会一团糟。你也不需要每年作为一个小休息，因为网格线只会淹没情节。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-16T11:40:27.463

如果您`Year`用作因子，`ggplot`将为每个因子级别打印一个标签。您可以在前两个图中看到这一点。

如果`Year`用作数值变量，`ggplot`将自动选择 x 轴标签的值的子集。在您的第三个图中，两次休息之间的距离为 100。

您可以使用参数手动指定 x 轴上的断点`scale_x_continuous`位置`breaks`。在下面的示例中，中断之间的距离为 20。使用代码来查找所需的绘图。

```
ggplot(df, aes(x=as.numeric(as.character(Year)), y=sd, colour=Ratio)) +
geom_point() +
facet_grid(Ratio~.) +
theme(axis.text.x  = element_text(angle=-90, hjust=0.5, size=11,colour="black")) +
scale_x_continuous(breaks = as.numeric(levels(df$Year))[c(TRUE, rep(FALSE, 19))]) 
```

# php - 分解并从数组中选择每个元素

> ID：12910844
> 
> 赞同：0
> 
> 时间：2012-10-16T08:50:04.190
> 
> 标签：php, mysql, arrays, explode

我有一个小任务，我有一个 mysql 表“商店”。它包含一个“类别”列。类别的每个字段都包含不同的值，例如“22,44,33,55,24,33,22”现在从该字段中获取每个值，我需要从另一个表中的“父”列中获取值。（与 ids 链接）我正在选择整个字符串，但我想选择每个数字。请帮我解决一下这个。

```
$db_selected = mysql_select_db("",$con);
$sql = "SELECT categories from shops";
$array = mysql_query($sql,$con);
while($row=mysql_fetch_array($array)){
foreach($row as $value){
    $result= explode(" ", $value);
    foreach($result as $newvalue){
    $query="SELECT parent FROM categories where categories.id=$newvalue<br/>";
    echo $query;
    }
    }
    }
mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:56:32.103

您正在基于空间`字符进行爆炸，但您的值需要基于`,`. 所以试试`

 ````
$result= explode(",", $value);
foreach($result as $newvalue){

    $query="SELECT parent FROM categories where categories.id='$newvalue'";
                                                           // ^ Quotes the Value
                                                           // Remove the <br />

    echo $query."<br />"; //Instead add it here and avoid the bug if you decide the run the query

    // This example is showing mysql_* library but it is deprecated

    $result = mysql_query($query);
    $row = mysql_fetch_assoc($result);
    $parent = $row['parent']; //Now you can something like this

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:53:17.417

如果您的类别列包含“22,44,33,55,24,33,22”，那么您的爆炸肯定应该是

```
$result= explode(",", $value); 
```

例如，在字符串中的逗号上爆炸给你 22, 44, 33 ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:53:37.443

我认为问题出在`$result= explode(" ", $value);` 这应该是`$result= explode(",", $value);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T08:54:17.270

```
$result= explode(",", $value); 
```

由于字符串的格式是用逗号分隔的，所以应该用逗号来展开字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T08:56:09.483

值是否用逗号分隔？

即使您的问题是数据库设计，`explode(',', $value)`也应该为您提供 ID。`

# c# - 如何“深度”克隆封闭源代码 3rd 方类的属性？

> ID：12910847
> 
> 赞同：0
> 
> 时间：2012-10-16T08:50:05.780
> 
> 标签：c#, .net, class, object, clone

.NET 框架的[ICloneable](http://msdn.microsoft.com/en-us/library/system.icloneable(v=vs.100).aspx)接口通常提供一种支持[克隆](http://en.wikipedia.org/wiki/Cloning_%28programming%29)类实例的方法。

但是，如果我有**多个 3rd 方类**，并且不想单独关心每个属性，如何有效地克隆这些类的对象？（这些类的源代码不可用）。有没有使用[泛型](http://msdn.microsoft.com/en-us/library/512aeb7t%28v=vs.100%29.aspx)和[扩展方法的方法](http://msdn.microsoft.com/en-us/library/vstudio/bb383977%28v=vs.100%29.aspx)？

我需要的是一个深度克隆，它创建一个包含所有属性和（子）对象的精确副本。

* * *

**示例：**假设您要在[LinqPad](http://www.linqpad.net/)`UserQuery`中克隆一个对象：

```
void Main()
{
    UserQuery uc=this;
    var copy=uc.CreateCopy(); // clone it
} 
```

我正在寻找的是一个`CreateCopy()`扩展，它允许创建副本而无需处理此类的细节，因为我不拥有`UerQuery`.

（请注意，这`UserQuery`只是显示我需要的示例，它也可以是 PDF 文档类、用户控件类、ADO.NET 类或其他任何东西）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T08:50:05.780

我目前有**两种不同的解决方案**，一种使用反射，一种不使用反射：

* * *

**1.）**使用**通用扩展方法**（加上**[反射](http://msdn.microsoft.com/en-us/library/ms173183(v=vs.100).aspx)**），您可以在 C# 中这样做：

```
public static class Extension
{
    public static T CreateCopy<T>(this T src)
        where T: new()
    {
        if (src == null) return default(T); // just return null
        T tgt = new T(); // create new instance
        // then copy all properties
        foreach (var pS in src.GetType().GetProperties())
        {
            foreach (var pT in tgt.GetType().GetProperties())
            {
                if (pT.Name != pS.Name) continue;
                (pT.GetSetMethod()).Invoke(tgt, new object[] { 
                    pS.GetGetMethod().Invoke(src, null) });
            }
        };
        return tgt;
    } // method
} // class 
```

这非常强大，因为现在您可以**克隆每个对象，**不仅是您编写的类中的对象，还包括所有类中的对象，**包括 .NET Framework 的系统类**。并且由于反射，**您不需要知道它的属性，**它们会自动复制。

## 例子

要使用 method `CreateCopy()`，假设您有一个`Customer`类和一个`Order`类，并且您需要创建副本（不是引用）但具有新的 ID。然后您可以执行以下操作：

```
Order CopyOrderWithNewPK(Order item)
{
    Order newItem = item.CreateCopy(); // use ext. method to copy properties
    newItem.OrderId = new Guid(); // create new primary key for the item
    return newItem;
} 
```

毫不奇怪，对于 Customer 类，它看起来是一样的：

```
Customer CopyCustomerWithNewPK(Customer item)
{
    Customer newItem = item.CreateCopy(); // use ext. method to copy properties
    newItem.CustomerId = new Guid(); // create new primary key for the item
    return newItem;
} 
```

**请注意**，示例类中定义的所有属性的值都会自动复制。如果您不拥有源代码，您甚至可以克隆第 3 方程序集的对象。权衡是，反射方法更慢。

* * *

**2.）受**[这个](https://stackoverflow.com/q/11599526/1016343)问题的启发，还有另一种**无需反思的方法。**一个优点是它甚至能够克隆实体框架的对象（例如，将实体对象附加和重新附加到不同的数据上下文）：

```
// using System.Runtime.Serialization;
public class Cloner<T>
{
    readonly DataContractSerializer _serializer 
            = new DataContractSerializer(typeof(T));

    /// <summary>
    /// Clone an object graph
    /// </summary>
    /// <param name="graph"></param>
    /// <returns></returns>
    public T Clone(T graph)
    {
        MemoryStream stream = new MemoryStream();
        _serializer.WriteObject(stream, graph);
        stream.Seek(0, SeekOrigin.Begin);
        return (T)_serializer.ReadObject(stream);
    }
} 
```

为了不破坏上面的例子，你可以改变扩展方法`CreateCopy`如下：

```
public static class Extension
{   
    public static T CreateCopy<T>(this T src)
        where T: new()
    {
            return (new Cloner<T>()).Clone(src);
    }   
} 
```

**注意：**虽然`Cloner`is using `System.Runtime.Serialization`，但被克隆的对象**不需要**是可序列化的。这可能是一个优势，我见过的其他解决方案只能克隆可序列化对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:57:59.517

如果你实现了`ICloneable`你就不必关心每个属性！你的回答很好，但对我来说，它的代码和反射性能都很差（！），我更喜欢使用

```
class Test : ICloneable
{
    public int A { get; set; }
    public int B { get; set; }

    #region ICloneable-Member

    public object Clone()
    {
        return base.MemberwiseClone();
    }

    #endregion
} 
```

# c++ - 将结构成员传递给函数 C++

> ID：12910850
> 
> 赞同：0
> 
> 时间：2012-10-16T08:50:12.237
> 
> 标签：c++, struct, pass-by-reference

好的，所以我有一个结构，我需要创建一个增加一本书数量的函数。在为每本书调用该函数后，我将调用 printBooks，我可以做得很好。我知道这是一个非常简单的程序，但我只是不能这样做，所以任何帮助表示赞赏

```
#include <iostream>
using namespace std;

#define BOOKS 3

struct Book
{
    string title;
    string isbn;
    int amount;
} books [BOOKS];

void printBooks(Book b);
void addAmount(Book &book,int amount);

int main()
{
    int i;

    for(int i = 0;i < BOOKS; i++)
    {
        cout << "Enter isbn : ";
        cin >> books[i].isbn;

        cout << "Enter title : ";
        cin >> books[i].title;

        cout << "Enter amount : ";
        cin >> books[i].amount;

    }

    cout << "\nThe number of books after adding amount by one :\n";

    for(i = 0;i < BOOKS; i++)
    {
        addAmount(); // intentionally left blank.don't know what to put
        printBooks(books[i]);
    }

    return 0;
}

void printBooks(Book b)
{
    cout << b.isbn << endl;
    cout << b.title << endl;
    cout << b.amount << endl;
}
void addAmount(Book &book,int amount)
{
    book.amount++;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T08:51:47.373

您在`addAmount();`没有参数的情况下调用。你大概是说

```
addAmount(books[i], 42); 
```

还可以考虑将`printBooks`签名更改为

```
void printBook(const Book& b) 
```

或者，更好的是，使它成为一个成员函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:54:11.290

```
void addAmount(Book &book)
{
    book.amount++;
} 
```

进而

```
addAmount(books[i]); 
```

顺便说一句，您实际上并不需要将结构按值传递给`printBooks`. 只需使用 const 引用即可。调用代码不需要修改。

```
void printBooks(const Book &b)
{
    cout << b.isbn << endl;
    cout << b.title << endl;
    cout << b.amount << endl;
} 
```

# c# - 如何投射字典 到字典

> ID：12910857
> 
> 赞同：0
> 
> 时间：2012-10-16T08:50:30.930
> 
> 标签：c#, casting, idictionary, memorycache

我正在使用 default `MemoryCache`，它可以很好地满足我的目的。但是该`GetValues()`方法返回`IDictionary<string, object>`

有没有一种快速的方法可以将其转换为`IDictionary<string, MyType>`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T08:53:41.510

使用[`ToDictionary`](http://msdn.microsoft.com/en-us/library/bb549277.aspx)：

```
ToDictionary(k => k.Key, k => (MyType)k.Value) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:53:55.980

执行您自己的`GetValues`方法来调用原始方法。对于每个结果，将转换为第二个返回值（对象之一）并生成您自己的 casted `IDictionary`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:54:32.193

这意味着您只能将类型的对象存储`MyType`在此缓存中。但如果是这种情况，你可以有一个包装方法：

```
public static IDictionary<string, MyType> GetValues(IEnumerable<string> keys)
{
    return MemoryCache.Default.GetValues(keys).ToDictionary(x => x.Key, x => x.Value as MyType);
} 
```

# iphone - 使用 UIScrollView 进行分页

> ID：12910863
> 
> 赞同：0
> 
> 时间：2012-10-16T08:50:44.270
> 
> 标签：iphone, objective-c, ios

我想[在教程中创建一个滚动视图，如 Paging with UIScrollView](http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content)。唯一不同的是在我的应用程序中，我将 .xib 文件添加到 UIscrollView 而不是 UIImageView，并且我从后端部分获取数据而不是静态设置它们。

我发现这条线需要时间（它实际上将图像加载到另一个滚动视图）：

```
[self.offerView loadVisiblePages]; 
```

这正是那里发生的事情：

```
@implementation OfferUIView

- (void)initialization {
    NSInteger pageCount = self.pageImages.count;

    // Set up the array to hold the views for each page
    self.pageViews = [[NSMutableArray alloc] init];
    for (NSInteger i = 0; i < pageCount; ++i) {
        [self.pageViews addObject:[NSNull null]];
    }

    CGSize pagesScrollViewSize = self.scrollView.frame.size;
    self.scrollView.contentSize = CGSizeMake(pagesScrollViewSize.width * 3, pagesScrollViewSize.height);
}

- (void)loadVisiblePages {
    [self initialization];

    // First, determine which page is currently visible
    CGFloat pageWidth = self.scrollView.frame.size.width;
    NSInteger page = (NSInteger)floor((self.scrollView.contentOffset.x * 2.0f + pageWidth) / (pageWidth * 2.0f));

    // Work out which pages we want to load
    NSInteger firstPage = page - 1;
    NSInteger lastPage = page + 1;

    // Purge anything before the first page
    for (NSInteger i=0; i<firstPage; i++) {
        [self purgePage:i];
    }
    for (NSInteger i=firstPage; i<=lastPage; i++) {
        [self loadPage:i];
    }
    for (NSInteger i=lastPage+1; i<self.pageImages.count; i++) {
        [self purgePage:i];
    }
} 
```

我的问题是当我第一次运行应用程序时，加载图像太慢了。你能帮助我吗？

这是 .h 文件：

```
@interface ViewController2 : UIViewController {
@private
    UIScrollView *scrollView;
}

@property (nonatomic, strong) IBOutlet UIScrollView *scrollView;
@property (nonatomic, strong) PFLogInViewController *login;

@end 
```

和 .m 文件：

```
@interface ViewController2 ()
@property (nonatomic, strong) NSMutableDictionary *pageImages;
@property (nonatomic, strong) NSMutableArray *companies;
@property (nonatomic, strong) NSMutableArray *offers;
@property (nonatomic, strong) NSMutableArray *pageViews;
@property (nonatomic, strong) OfferUIView *offerView;
@property (nonatomic, assign) NSString *address;

- (void)loadVisiblePages;
- (void)loadPage:(NSInteger)page;
- (void)purgePage:(NSInteger)page;

@end

@implementation ViewController2

@synthesize scrollView = _scrollView;
@synthesize offerView = _offerView;

@synthesize pageImages = _pageImages;
@synthesize companies = _companies;
@synthesize offers = _offers;
@synthesize pageViews = _pageViews;
- (void)loadVisiblePages {
    // First, determine which page is currently visible

    CGFloat pageWidth = self.scrollView.frame.size.height;
    NSInteger page = (NSInteger)floor((self.scrollView.contentOffset.y * 2.0f + pageWidth) / (pageWidth * 2.0f));

    // Work out which pages we want to load
    NSInteger firstPage = page - 1;
    NSInteger lastPage = page + 1;

    // Purge anything before the first page
    for (NSInteger i=0; i<firstPage; i++) {
        [self purgePage:i];
    }
    for (NSInteger i=firstPage; i<=lastPage; i++) {
        [self loadPage:i];
    }
    for (NSInteger i=lastPage+1; i<self.pageImages.count; i++) {
        [self purgePage:i];
    }
}

- (void)loadPage:(NSInteger)page {
    if (page < 0 || page >= self.pageImages.count) {
        // If it's outside the range of what we have to display, then do nothing
        return;
    }
    // Load an individual page, first seeing if we've already loaded it
    UIView *pageView = [self.pageViews objectAtIndex:page];
    if ((NSNull*)pageView == [NSNull null]) {

        CGRect frame = self.scrollView.bounds;
        frame.origin.x = 0.0f;
        frame.origin.y = frame.size.height * page;

        NSArray *views = [[NSBundle mainBundle] loadNibNamed:@"OfferView" owner:self options:nil];
        self.offerView = [views objectAtIndex:0];
        self.offerView.contentMode = UIViewContentModeScaleAspectFit;
        self.offerView.frame = frame;
        [self.scrollView addSubview:self.offerView];
        [self.pageViews replaceObjectAtIndex:page withObject:self.offerView];

        self.offerView.pageId = 1;

        Company *company = [self.companies objectAtIndex:page];
        self.offerView.labelCompany.text = company.name;
        self.offerView.companyAddress = company.address;

        Offer *offer = [self.offers objectAtIndex:page];
        NSMutableArray *imageArray = [self.pageImages objectForKey:offer.objectId];
        self.offerView.pageImages = imageArray;
        self.offerView.offerId = offer.objectId;
        [self.offerView loadVisiblePages];

        self.offerView.labelOffer.text = @"Vid köp för minst";
        self.offerView.labelOffer.text =[[self.offerView.labelOffer.text stringByAppendingFormat:@" %i", offer.offer] stringByAppendingString:@"kr."];

        [self.offerView.labelDiscount setText: [[NSString stringWithFormat:@"%i", offer.discount] stringByAppendingString:@":-"]];

        double deadline = [offer.deadline timeIntervalSinceNow];
        double createdAt = [offer.createdAt timeIntervalSinceNow];
        double difference = deadline - createdAt;

        NSNumber *theDouble = [NSNumber numberWithDouble:difference];
        int inputSeconds = [theDouble intValue];
        int hours =  inputSeconds / 3600;
        int minutes = ( inputSeconds - hours * 3600 ) / 60;
        //int seconds = inputSeconds - hours * 3600 - minutes * 60;
        NSString *theTime = [NSString stringWithFormat:@"%dh %dm", hours, minutes];
        [self.offerView.labelDeadline setText:theTime];
    }
}

- (void)purgePage:(NSInteger)page {
    if (page < 0 || page >= self.pageImages.count) {
        // If it's outside the range of what we have to display, then do nothing
        return;
    }

    // Remove a page from the scroll view and reset the container array
    UIView *pageView = [self.pageViews objectAtIndex:page];
    if ((NSNull*)pageView != [NSNull null]) {
        [pageView removeFromSuperview];
        [self.pageViews replaceObjectAtIndex:page withObject:[NSNull null]];
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    // Set up the image we want to scroll and add it to the scroll view
    [self loadDataFromParse];

    NSInteger pageCount = self.pageImages.count;

    // Set up the array to hold the views for each page
    self.pageViews = [[NSMutableArray alloc] init];
    for (NSInteger i = 0; i < pageCount; ++i) {
        [self.pageViews addObject:[NSNull null]];
    }
    printf("%s\n", [@"ViewDidLoad" UTF8String]);
}

- (void)loadDataFromParse {
    self.pageImages = [[NSMutableDictionary alloc] init];
    self.companies = [[NSMutableArray alloc] init];
    self.offers = [[NSMutableArray alloc] init];

    PFQuery *companyQuery = [PFQuery queryWithClassName:@"Company"];
    NSArray *companyArray = [companyQuery findObjects];

    NSArray *offerArray;
    PFQuery *offerQuery = [PFQuery queryWithClassName:@"Offer"];

    NSArray *imageArray;
    PFQuery *imageQuery = [PFQuery queryWithClassName:@"Image"];

    for (NSInteger i=0; i<companyArray.count; i++) {
        PFObject *fetchedCompany = [companyArray objectAtIndex:i];
        Company *company = [[Company alloc] init];
        company.name = [fetchedCompany objectForKey:@"name"];
        company.address = [fetchedCompany objectForKey:@"address"];
        [offerQuery whereKey:@"company" equalTo:fetchedCompany];
        offerArray = [offerQuery findObjects];

        for (NSInteger j=0; j<offerArray.count; j++) {
            PFObject *fetchedOffer = [offerArray objectAtIndex:j];
            Offer *offer = [[Offer alloc] init];
            offer.objectId = [fetchedOffer valueForKey:@"objectId"];
            offer.offer = [[fetchedOffer objectForKey:@"offer"]integerValue];
            offer.discount = [[fetchedOffer objectForKey:@"discount"]integerValue];
            offer.deadline = [fetchedOffer objectForKey:@"deadline"];
            offer.createdAt = [fetchedOffer objectForKey:@"createdAt"];

            [imageQuery whereKey:@"offer" equalTo:fetchedOffer];
            imageArray = [imageQuery findObjects];

            NSMutableArray *array = [[NSMutableArray alloc] init];
            for (NSInteger k=0; k<imageArray.count; k++) {
                PFObject *fetchedimage = [imageArray objectAtIndex:k];
                [array addObject:fetchedimage];
            }
            [self.pageImages setObject:array forKey:offer.objectId];
            [self.offers addObject:offer];
            [self.companies addObject:company];
        }
    }
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    // Set up the content size of the scroll view
    CGSize pagesScrollViewSize = self.scrollView.frame.size;

    //self.scrollView.contentSize = CGSizeMake(pagesScrollViewSize.width * self.pageImages.count, pagesScrollViewSize.height);

    self.scrollView.contentSize = CGSizeMake(pagesScrollViewSize.width, pagesScrollViewSize.height * self.pageImages.count);

    // Load the initial set of pages that are on screen
    [self loadVisiblePages];

    printf("%s\n", [@"ViewWillAppear" UTF8String]);
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    self.offers = nil;
    self.companies = nil;
    self.pageImages = nil;
    self.pageViews = nil;
    self.scrollView = nil;
    self.offerView = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

#pragma mark - UIScrollViewDelegate

- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    // Load the pages which are now on screen
    [self loadVisiblePages];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:54:05.443

下载[SMPageControl](http://maniacdev.com/2012/10/open-source-highly-customizable-ios-uipagecontrol-replacement/)示例..，它可能会帮助你..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:04:13.167

在加载某些数据需要太多时间的情况下，您应该将工作卸载到后台线程。你试过使用[GCD](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html)吗？

例如，您将像这样进行：

```
dispatch_queue_t preloadQueue = dispatch_queue_create("preload queue", nil);
    dispatch_async(preloadQueue, ^{
        // do the heavy task here
        dispatch_async(dispatch_get_main_queue(), ^{
        // set-up all the ui components that are required to be set on the main thread
        });
    }); 
```

也可以`Instruments`与`Time Profiling Tool`to pin point 一起使用，该指令需要一些时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T09:14:31.693

为了提高您的响应能力，我建议：

*   首先加载缩略图并在后台加载实际图像。
*   回收图像并在内存中最多保留 3 个。
*   `UIImageViews`使用以下方法加载`UIImages`加载以避免iOS缓存图像（在内存中进行手动缓存）：

    `+ (UIImage *)imageWithContentsOfFile:(NSString *)path`

*   如果加载缩略图是不可接受的并且您的图像非常大，我会将它们平铺加载。

您可以查看WWDC 2010[中的使用 Scrollviews 设计应用程序](https://developer.apple.com/videos/wwdc/2010/)（需要登录）以及 Apple 的以下示例：[PhotoScroller](http://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010080)和[ScrollViewSuite](http://developer.apple.com/library/ios/#samplecode/ScrollViewSuite/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008904)。还有一个来自 WWDC 2009 的有趣视频，名为*Mastering Scrollviews in iPhone*，它涵盖了以`UITableView`细胞回收方式回收图像，但我找不到它。

# javascript - 一个提交按钮中的两个 onclick 功能

> ID：12910866
> 
> 赞同：1
> 
> 时间：2012-10-16T08:50:52.487
> 
> 标签：javascript, onclick, google-analytics

我想使用 onclick 函数将 Google Analytics 跟踪事件代码添加到提交按钮，但是那里已经有一个 onclick 函数。

现有代码

```
<input name="Submit" type="submit" class="button" style="float:left; clear:both;" onclick="MM_validateForm('name','','R','contact_number','','R','email','','RisEmail','address1','','R','address2','','R');return document.MM_returnValue" value="Submit" /> 
```

我要添加的代码

```
onclick="_gaq.push(['_trackEvent', 'Contact Page Enquiry', 'Enquiry', 'Contact Page Enquiry']);" 
```

这可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:56:25.267

如果您使用的是 jQuery，它可以工作。您可以在单个元素上有多个 onclick 事件。

检查[这个](http://jsfiddle.net/m6MWa/)

代码

```
document.getElementById("a").onclick = function() {
   alert(2); //this over writes the onclick on the element. This is called
};

$("#a").click(function() {
    alert(3); //this is called
});​ 
```

HTML：

```
<a id="a" onclick="alert(1)">click</a>​ 
```

[检查像这样](https://stackoverflow.com/questions/8751518/two-javascript-function-in-an-onclick?lq=1)或[这样](https://stackoverflow.com/questions/2881307/can-i-have-two-javascript-onclick-events-in-one-element)的其他SO问题

从上面的链接中，您可以执行以下操作：

```
<input name="Submit" type="submit" class="button" style="float:left; clear:both;" onclick="MM_validateForm('name','','R','contact_number','','R','email','','RisEmail','address1','','R','address2','','R'); _gaq.push(['_trackEvent', 'Contact Page Enquiry', 'Enquiry', 'Contact Page Enquiry']); return document.MM_returnValue" value="Submit" /> 
```

顺便说一句，这是未经测试的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:53:16.730

您需要一个回调函数，该函数将在单击事件时触发两个脚本。

[http://jsfiddle.net/gF7Td/2/](http://jsfiddle.net/gF7Td/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T08:53:55.720

我只是在猜测，但是...如果您在返回之前粘贴代码怎么办？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T04:30:23.607

需要注意的两件事：

1.  您可能只希望`_trackEvent`在表单通过验证时触发调用。
2.  事件跟踪通过从分析服务器请求跟踪像素来工作。如果表单提交导致在跟踪请求完成之前将新页面加载到同一窗口，您最终可能会丢失或部分数据收集。

您可以通过延迟表单提交来解决第二个问题。

```
<input id="Submit" name="Submit" type="submit" ... />
...
$('#Submit').click(function(e) {
  // Prevent the default handling of the form submit button
  e.preventDefault();
  MM_validateForm('name', ...
  // If the form didn't validate, don't do anything else
  if (!document.MM_returnValue) return;
  _gaq.push(['_trackEvent', ...
  // Get the form & submit it after 150ms delay
  var form = $(this).parents('form:first');
  setTimeout(function() {form.submit()},150);
}); 
```

# java - java - 如何在其 toString() 函数的覆盖内修改枚举的字符串表示形式？

> ID：12910868
> 
> 赞同：0
> 
> 时间：2012-10-16T08:51:00.233
> 
> 标签：java, enums, overriding

我有以下枚举：

```
public enum Rank{
   FIRST,
   SECOND
} 
```

每当`toString()`在枚举上调用函数（或其在字符串文字中使用）时，我希望返回**FIRST_RANK**（而不是默认的字符串' **FIRST** '）。如果我覆盖这样的`toString()`功能：

```
@Override
public String toString(){
  return this.toString() + "_RANK";
} 
```

但这显然会导致递归。问题是我需要使用`toString()`枚举的默认实现，并且没有`toString()`可以调用的枚举超类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T08:52:45.987

每当您想要该枚举实例的*名称*时，都应该使用该[**`name()`**](http://docs.oracle.com/javase/7/docs/api/java/lang/Enum.html#name%28%29)方法。在您的示例中：

```
@Override public String toString() {
  return this.name() + "_RANK";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T08:53:33.123

你可以使用[name()](http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html#name%28%29)方法吗？

```
@Override public String toString() {
  return this.name() + "_RANK";
} 
```

从文档：

> 返回此枚举常量的名称，与其枚举声明中的声明完全相同。大多数程序员应该优先使用 toString() 方法而不是这个方法，因为 toString 方法可能会返回一个对用户更友好的名称。此方法主要设计用于正确性取决于获取确切名称的特殊情况，该名称不会因版本而异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T08:52:46.923

```
@Override
public toString(){
  return super.toString() + "_RANK";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T08:54:02.123

尝试

```
@Override
public toString(){
  return super.toString() + "_RANK";
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T08:58:09.140

将此添加到您的枚举中

```
 @Override 
 public String toString() {   
       return this.name() + "_RANK"; 
 } 
```

toString() 应该返回**String**。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-16T09:09:51.490

而不是直接使用名称，我宁愿这样做：

```
@Override public String toString() {   
    return super.toString() + "_RANK"; 
} 
```

即使它的结果与在这种情况下使用完全相同`this.name()`......但在我看来，这更好地反映了这种情况下的面向对象编程。

# android - 如何获取设备的传输（Tx）功率值？

> ID：12910870
> 
> 赞同：5
> 
> 时间：2012-10-16T08:51:25.513
> 
> 标签：android, bluetooth

我想要设备传输功率的值。有什么方法可以得到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:32:41.323

对于任何给定的现有蓝牙 ACL 连接，都有一个 HCI 命令来读取传输功率级别。

蓝牙核心规范，4.0，[第 2 卷]，E 部分，7.3.35，HCI_Read_Transmit_Power_Level

任何特定的蓝牙堆栈实现（例如 Android）如何提供此服务是另一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-08T15:52:10.893

您可以通过扫描回调在您的 Android 应用程序中获取设备的传输功率。请注意，要使其正常工作，您必须在清单文件中授予以下权限：

```
<uses-permission android:name="android.permission.BLUETOOTH"/>  
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> 
```

我为从 BLE 获取传感器传输功率的活动创建了一个要点：

[https://gist.github.com/jamesjmtaylor/77578aaed78ee02f475bbbbc85f88e65](https://gist.github.com/jamesjmtaylor/77578aaed78ee02f475bbbbc85f88e65)

您可以在此处阅读有关 Android 与 BLE 交互的更多信息：

[https://developer.android.com/guide/topics/connectivity/bluetooth.html#HDP](https://developer.android.com/guide/topics/connectivity/bluetooth.html#HDP)

# clearcase - 如何删除 RTC 源代码管理中的文件？

> ID：12910879
> 
> 赞同：2
> 
> 时间：2012-10-16T08:51:48.820
> 
> 标签：clearcase, rtc

我在项目的根级别有一个要删除的文件。如果使用 ClearCase，我将在本地删除文件，然后检查文件位置的父目录，这将从 clearcase 远程存储库中删除文件。要在 RTC 源代码管理中删除文件，此选项似乎不可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:32:25.930

无需调整父目录（就像您必须使用 ClearCase 一样）。

只需从磁盘中删除文件（在本地工作区或沙箱中）。
要求 RTC 在“Pending Changes”视图中刷新该沙箱，您将在未解决部分中看到该文件，其相关箭头上带有“-”。

[将此示例](https://jazz.net/library/article/39/#Example_3)视为插图（显示已删除的文件，已签入变更集的一部分）：

![删除](../Images/7c296bfda9100a0df9041bd447e92b1c.png)

签入，然后交付（在将此变更集与工作项相关联之后）。

任何在同一 Stream 上创建或更新 repo 工作区的用户都不会再看到该文件。

这相当于`cleartool rmname`（如果需要，您可以稍后取回该文件）

`cleartool rmver`只有使用 RTC4 才能从引用 ( ) 中删除文件版本：“[永久删除与文件更改关联的内容](https://jazz.net/downloads/rational-team-concert/milestones/4.0M5?p=news#scm_contentdelete)”

![scm内容删除](../Images/f78e86d7354c0bcb2de2a9540aa09975.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T22:35:31.957

[VonC](https://stackoverflow.com/users/6309/vonc)的[回答](https://stackoverflow.com/a/12911601/6309)是正确的。

我要提到的唯一补充是，如果您想**删除共享根目录**（加载的最低元素），则有一个“在存储库中删除”操作，因为我们需要一种区分**delete**与**unload**的方法。

请参阅“[将 RTC Eclipse 客户端与其他工具一起使用](https://jazz.net/library/article/531/)”：

![本地工作区加载](../Images/5c62613489e3b8f341495b16007c0eaf.png)

> 加载文件夹时，默认选择的是组件的顶级文件夹（在上面的示例中，这将是`Ruby Project`文件夹）。
> 但是，在上面的屏幕截图中，**组件本身已被选中**。结果将是组件根文件夹加载到文件位置`C:\dev\sandbox\Ruby Work`，并且该文件夹将包含组件的所有内容。
> 正如我们将在接下来的部分中看到的，**加载组件根文件夹有一些好处**。
> 这样做的主要优点是，虽然 Eclipse 客户端提供了一些自定义操作来共享新内容以及删除或移动**沙箱中的顶级文件夹**（称为**`share root`**)，这些操作仅在内容作为 Eclipse 项目加载时可用。
> 
> Eclipse 客户端在项目的上下文菜单中提供了`Team/Delete`in Repository `action and a`Team/Move in Repository` 操作，可用于删除或移动存储库中的相应文件夹。
> SCM CLI 中没有与这些操作等效的操作，因此如果您正在处理不能作为 Eclipse 项目使用的内容，则需要加载要删除或移动的文件夹的父文件夹才能执行此操作。

# android - 如何在 KSOAP 中解析字符串数组，android

> ID：12910880
> 
> 赞同：1
> 
> 时间：2012-10-16T08:51:49.527
> 
> 标签：android, ksoap

SOAP 响应

```
<?xml version="1.0" encoding="UTF-8"?>
 <S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
    <S:Body>
    <ns2:getItemTypesResponse xmlns:ns2="http://Product/">
        <return>Laptop</return>
        <return>Netbook</return>
    </ns2:getItemTypesResponse>
</S:Body> 
```

如何在 android 中解析这个 SOAP 响应？

这是我的代码。

```
for(int i =0 ; i<count;i++){
            //SoapObject inner= (SoapObject)outer.getProperty(i);
            String s = null;
            s = outer.getProperty(i).toString();
            result.add(s);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:41:22.347

您所需要的都在这里：[http](http://code.google.com/p/ksoap2-android/wiki/CodingTipsAndTricks#sending/receiving_array_of_complex_types_or_primitives)
://code.google.com/p/ksoap2-android/wiki/CodingTipsAndTricks#sending/receiving_array_of_complex_types_or_primitives尝试创建对象实现`KvmSerializable`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:08:22.563

创建一个实现的类`KvmSerializeable`：

```
public class Import implements KvmSerializable {

String test;

public Import() {}

public Import (String test) {
    this.test = test;
}

public Object getProperty(int arg0) {

    switch (arg0) {

    case 0:
        return test;
    default:
        return test;
    }

}

public int getPropertyCount() {
    return 1;
}

public void getPropertyInfo(int arg0, Hashtable arg1, PropertyInfo arg2) {

    switch (arg0) {
    case 0:
        arg2.type = PropertyInfo.STRING_CLASS;
        arg2.name = "test";
        break;
    default:
        break;
    }

}

public void setProperty(int arg0, Object arg1) {

    switch (arg0) {
    case 0:
        test = (String) arg1;
        break;
    }

} 
```

}

只需更改变量，使其适合您的需要。进而：

```
 SoapObject soapObject = new SoapObject(NAMESPACE_NIST_IMPORT,
                METHOD_NAME_NIST_IMPORT);

       Import import= new Import("Hello, World!");

        PropertyInfo pi = new PropertyInfo();
        pi.setName("req");
        pi.setValue(import);
        pi.setType(import.getClass());
        soapObject.addProperty(pi);

        SoapSerializationEnvelope soapSerializationEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        soapSerializationEnvelope.setOutputSoapObject(soapObject);

        soapSerializationEnvelope.addMapping(NAMESPACE, "Import", new Import().getClass()); 
```

要解析响应：

```
 SoapObject response = (SoapObject)soapSerializationEnvelope.getResponse();
        Import.test=  response.getProperty(0).toString(); 
```

# c++ - 隐式转换掩盖了重载的运算符。如何解决？

> ID：12910883
> 
> 赞同：3
> 
> 时间：2012-10-16T08:51:56.387
> 
> 标签：c++, oop, design-patterns, operator-overloading

我有一个相当复杂的结构。我也很确定我已经盯着它看太久了，所有这些树现在都遮蔽了我对森林的看法。所以我会给你我的构造的全部复杂性，即使我怀疑它实际上只有一小部分是相关的。

现在，我用文字构造：

*   从它自己的基类派生的模板化基类实现了几个运算符重载。

*   从模板化基类子类化的类（使用它们自己的名称作为模板参数）将可以访问所有运算符。[根据此问题](https://stackoverflow.com/questions/12742728/derive-overloaded-operator-but-operate-on-same-types-only)，此构造可确保运算符只能对相同的类型进行操作。

*   一个特定的子类实现了一些特殊版本的操作符。调用这个类`Derived`。这个子类也使用命名构造函数，所以它的主要构造函数是`private`.

*   另一个基类实现了转换运算符 to`double`和 to `Derived`，以使其子类能够（隐式）转换为`Derived`类型。调用这些基类之一`OtherDerived`。

*   `Derived`然后可以通过调用 中的命名构造函数之一`Derived`或通过传递来构造`OtherDerived`的实例`Derived D = OtherDerived(5.0);`

我的问题：

1.  定义`Derived D = OtherDerived(5.0) * 2.0;`似乎强制`OtherDerived(5.0)`转换为*double*而不是`Derived`，因此乘法`2.0`只是 double 的乘积，而不是`operator*`in`Derived`基类的输出。

2.  模板化基类中的定义`operator*=`不能返回对 的引用`*this`，因为 的类型`*this`是`BaseClass<T>`，而所需的引用类型只是`T&`。

如何优雅地解决这些问题？

我认为第二个问题是次要的，因为我可以通过根本不返回引用来轻松解决它。不过，有一个也不错。但对我来说最重要的是：我如何让人们能够书写`Derived D = OtherDerived(...) * 2.0`或类似的、简单的形式？

要求人们写作

*   `Derived D = (Derived)OtherDerived(...) * 2.0;`， 或者
*   `Derived D = OtherDerived(...) * Derived::someName(2.0);`， 或者
*   `Derived D = OtherDerived(...).operator*(2.0);`

等等似乎相当奇怪和不必要......

注意：最好是`operator double()`剩余的可用:)

这是一个 MWE：

```
#include <iostream>
#include <cmath>

class SuperBase
{
public:
    virtual ~SuperBase(){}
    SuperBase() : value(0.0) {}

protected:
    double value;
    SuperBase(double value) : value(value) {}
};

template <class T>
class Base : public SuperBase
{
public:
    virtual ~Base(){}
    Base() : SuperBase() {}

    T& operator*=(double F)       { value *= F; return *this; }
    T  operator* (double F) const { return T(value*F); }

    double operator*(const T& U) const {
        return value*U.value;
    }

protected:
    double value;
    Base(double value) : SuperBase(value) {}
};

class Derived final : public Base<Derived>
{
public:

    ~Derived(){}
    Derived() : Base<Derived>(){}

    static Derived someName(double value) {
        return Derived(value);
    }

    Derived operator*(const Derived& D) const {
        return Derived(value/D.value);
    }

private:
    Derived(double value) : Base<Derived>(value) {}
};

class OtherBase
{
public:
    virtual ~OtherBase(){}

    operator double () { return value; }
    operator Derived() { return Derived::someName(value); }

protected:
    double value;
};

class OtherDerived final : public OtherBase
{
public:
    ~OtherDerived(){}

    OtherDerived(double value){
        this->value = std::sqrt(value);
    }
};

int main(int argc, char *argv[])
{
    Derived a = OtherDerived(1.05);     // Compiles fine

    Derived b = OtherDerived(1.05);     // Compiles fine
    b *= 2.0;                           // Error: cannot cast Base<Derived>
                                        // to Derived

    Derived c = OtherDerived(1.05)*2.0; // Error: casts the
                                        // OtherDerived to double,
                                        // so Derived(double) gets
                                        // called, which is private

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:01:10.813

`Derived::operator*`隐藏`Base::operator*`。`using Base::operator*`尝试在课堂上插入`Derived`以`operator*(double)`在`Derived`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:03:53.947

对于问题 #1，您可以实现一个独立的乘法运算符：

```
Derived operator*(const OtherDerived& op1, double op2)
  {
  return (Derived)val1*Derived::someName(val2);
  } 
```

此外，两个转换运算符都`OtherBase`应该是`const`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T09:06:11.930

如果您的代码＃2 `main`，您的问题似乎源于您希望您的类在构造函数为私有时在内部`Base<Derived>`创建一个`Derived`对象......您必须使该类成为朋友才能要调用的构造函数。`Base<Derived>::operator*=``Derived``Base<Derived>``Derived`

对于您的`main`代码的案例#3，我会`operator*`为您的`OtherBase`or`OtherDerived`类定义一个以防止隐式转换为`double`.

# php - 提取唯一订单

> ID：12910885
> 
> 赞同：0
> 
> 时间：2012-10-16T08:51:59.217
> 
> 标签：php, mysql, sql, join

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:03:46.667

添加额外`subquery`内容，每次只能获得一种产品`order_id`

```
Select 
    orders.id, 
    orders.order_price, 
    orders.purchase_date,
    customers.email, 
    product_orders.qty, 
    products.name 
from 
    orders 
    INNER JOIN product_orders on orders.id=product_orders.orders_id 
    INNER JOIN
    (
        SELECT orders_id, MIN(Product_ID) prodID
        FROM product_orders
        GROUP BY orders_id
    ) c ON product_orders.orders_ID = c.orders_id AND
            product_orders.Product_ID = c.prodID
    INNER JOIN products on product_orders.product_id=products.id 
    INNER JOIN customers on orders.customer_id =customers.id 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/608a5/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:44:29.160

您需要三个新表：

```
Bundles (ID, Name)

BundleProducts (BundleID, ProductID)

OrderLines (ID, OrderID, ProductID, BundleID, Qty) 
```

假设 Bundles 包含：

```
ID    Name
1     IPad & Android 
```

并且 BundleProducts 包含

```
BundleID    ProductID
1           2
1           3 
```

然后，当客户将产品添加到他们的订单中时，您将 ProductID 插入 OrderLines 表中。如果他们添加了一个 Bundle，则将其插入 BundleID。订单完成后，您可以使用填充了 Product_ID 的 OrderLines 表中的每个产品填充 Product_Orders 表，如果填充了 ProductLines.BundleID，还使用 ​​BundleProducts 表中的每个 ProductID。

或者，您可以将捆绑包本身制作成产品。这意味着您不需要 Bundles 表，但仍需要 BundleProducts 表。此外，您不需要 OrderLines 中的 BundleID 列。因此，“Ipad & Android Bundle”成为 Products 表中的新产品。

订单完成后，您将执行以下操作：

```
INSERT INTO 
    Product_Orders (Orders_id, Product_ID, Qty)
SELECT
    Orders.ID,
    COALESCE(BundleProducts.ProductID, OrderLines.ProductID),
    OrderLines.Qty
FROM
    Orders
    INNER JOIN OrderLines ON Orders.ID = OrderLines.Orders_ID
    LEFT JOIN BundleProducts ON OrderLines.ProductID = BundleLines.BundleID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:57:42.200

```
Select orders.id, orders.order_price, orders.purchase_date, customers.email, product_orders.qty, products.name 
from orders 
INNER JOIN product_orders on orders.id=product_orders.orders_id 
INNER JOIN products on product_orders.product_id=products._id 
INNER JOIN customers on orders.customer_id =customers.id
GROUP BY orders.id 
```

添加 GROUP BY orders.id

# node.js - node.js 响应两次

> ID：12910887
> 
> 赞同：4
> 
> 时间：2012-10-16T08:52:06.057
> 
> 标签：node.js, debian

我在 debian 机器上全新安装节点（来自 git ）时出现了一个奇怪的行为。似乎问题不在我的代码中，因为在 Windows 上一切正常。我已经知道这不是网站图标问题。

这是我写的：

```
var app = require('express')()
  , server = require('http').createServer(app)
  , io = require('socket.io').listen(server) 
  , url = require('url')
  , qs = require('querystring')
  , request =  require('request')
  , fs = require('fs') 
```

其次是

```
server.listen(3000); 
app.post('/postReload', function (req, res) {
  var fullBody = '';
  req.on('data', function(chunk) {
    fullBody += chunk.toString();
    if (fullBody.length > 1e6) {
        req.connection.destroy();  
    }
  });
  req.on('end', function() {        
    out = qs.parse(fullBody);
    vars = out.vars || ''; 
    if(out.module && out.value){ 
        // do the job
        // console.log here is done twice !
    }
    res.writeHead(200, {'Content-Type': 'text/html'}) 
    res.end(); 
 });
}); 
```

写另一种方式时：

```
app.post('/postReload', function (req, res) {
  // console.log here is done twice !
} 
```

这个问题影响到每个浏览器，一周的测试并没有解决任何问题。

这里有人有想法吗？

双重动作发生在 curl 或浏览器访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:32:45.060

谢谢赫克托·科雷亚。

这就是我声明 socket.io 的方式......我新的简单代码是：

```
var express = require('express')
var app = express();
var server = http.createServer(app);
var io = require('socket.io').listen(server);

app.get('/', function (req, res) {
console.log('Only one time !!!')
res.end();
}) 
```

我现在继续点头。

# php - 我可以使用 PDO 参数化语句创建 MYSQL 表吗？

> ID：12910891
> 
> 赞同：2
> 
> 时间：2012-10-16T08:52:23.093
> 
> 标签：php, mysql, pdo

我希望使用 PHP 和 PDO 创建一个 MySQL 表。我还希望参数化表名。我已经尝试实现这一点，并且出现错误的代码如下所示。

```
class databaseaccess {

    public $hostname = 'localhost';
    public $username = 'root';
    public $password = 'root';
    private $db = null;
    public $rows;

    public function __construct() {
        try {
                $this->db = new PDO("mysql:host=$hostname;dbname=noteshareproject", $this->username, $this->password);
        }
        catch (PDOException $Exception) {
            throw new Exception("DB failed to connect ".$Exception->getMessage());
        }
    }

    public function writetable($title,$id){
        if ($this->db === null) throw new Exception("DB is not connected");
        //query works with `:title` however keeps the commas. Gotta find out what is wrong.
        $query = "CREATE TABLE noteshareproject.:title (id INT NOT NULL AUTO_INCREMENT, PRIMARY KEY(id), username VARCHAR(20)) ENGINE=myISAM;";
        $statement = $this->db->prepare($query);
        $title = $title . $id;
        $title = (string) $title;
        $statement->bindValue(':title', $title, PDO::PARAM_STR);
        $statement->execute();
        print_r($statement->errorInfo());
        echo $title;

    }
} 
```

上述代码的输出如下：

```
Array
(
    [0] => 42000
    [1] => 1064
    [2] => You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''exampletablename'(id INT NOT NULL AUTO_INCREMENT, PRIMARY KEY(id), username VARCHAR(20)) EN' at line >2
)
exampletablename 
```

我在 MySQL 语法或 PDO 实现中做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T08:57:22.000

您不能在准备好的语句中为标识符（列/表/数据库/函数名等）使用占位符。您只能将它们用于值。

```
CREATE TABLE noteshareproject.:title
//                            ^^^^^^ this will not work 
```

如果您想这样做，您将必须手动清理`$title`，以便可以直接在字符串中使用它。

另请注意，无法准备诸如[DDL](http://en.wikipedia.org/wiki/Data_definition_language)语句，因此使用. 您不妨只使用or 。`CREATE TABLE``prepare()`[`query()`](http://php.net/manual/en/pdo.query.php)[`exec()`](http://php.net/manual/en/pdo.exec.php)

我也想知道你想要这样做的事实是否表明数据库设计不佳 - 要求多个相同结构的表不太可能是存储信息的正确方法，尽管不了解更多关于你的应用程序不可能肯定地说。

# excel - 将单元格链接到以前的工作簿

> ID：12910893
> 
> 赞同：0
> 
> 时间：2012-10-16T08:52:33.600
> 
> 标签：excel, vba

如果我还想问：我有包含某些链接的现金提款文件。12 月从 11 月的某些单元格获取信息。是否有可能当我打开 12 月以自动收集 11 月的链接而无需更改“=+'C:\Stores\Fego Caffe Irene\Cash Ups\2011[Fego Caffe June 2011.xlsm]Daily Breakdown'!$ E $ 42”每次我节省一个新的月份。所以如果我创建一个 1 月文件，它必须自动链接​​到 12 月，而我不必一直手动更改公式？

基本上问。我刚刚创建了一个 2013 年 1 月的现金提成文件，该文件从 2012 年 12 月获取信息。现在我在 1 月单元格中的公式是“=+'C:\Stores\Fego Caffe Irene\Cash Ups\2012[Fego Caffe 2012 年 11 月.xlsm] Daily Breakdown'!$E$42" 现在发生的事情是我现在必须取消保护工作表并手动将 11 月更改为 12 月，以便 1 月可以链接到 2012 年 12 月的文件。

是否有可能有一个 VB 宏，当您打开一月文件时，它会自动链接到 2012 年 12 月等其他月份。本月取自上月。

抱歉，在这方面还是很新

感谢你的帮助！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:11:02.070

您可以使用`Workbook.LinkSources`获取链接文件列表，然后使用`Workbook.ChangeLink`. 刷新数据`Workbook.UpdateLink`

这是您可以在创建新的 Months 工作簿后调用的宏。

它将打开一个对话框供您选择要链接到的文件

为简单起见，它被编写为在代码中包含保护密码，但你知道如何提示它，所以我将把它留给你。

```
Sub UpdateLink()
    Dim strFile As String
    Dim aLinks As Variant
    Dim i As Long
    Dim strLink As String
    Dim strLinkNew As String

    With Application.FileDialog(msoFileDialogFilePicker)
        .AllowMultiSelect = False
        .Show

        If .SelectedItems.Count > 0 Then
            strLinkNew = .SelectedItems(1)

            aLinks = ThisWorkbook.LinkSources(xlExcelLinks)
            If Not IsEmpty(aLinks) Then
                For i = 1 To UBound(aLinks)
                    strLink = aLinks(i)
                    If strLink Like "*\Fego Caffe Irene*.xlsm" Then

                        ' Change Linked File
                        ThisWorkbook.Worksheets("Links").Unprotect "YourPassword"
                        ThisWorkbook.ChangeLink Name:=strLink, NewName:=strLinkNew, Type:=xlExcelLinks
                        ThisWorkbook.Worksheets("Links").Protect "YourPassword"
                    End If
                Next
            End If
        End If
    End With
End Sub 
```

值得注意的一件事：你对一些但不是所有的变量进行了标记。如果您将`Option Explicit`所有模块放在顶部，它将迫使您养成始终声明变量的良好做法。

# javascript - 调用函数时触发事件

> ID：12910901
> 
> 赞同：0
> 
> 时间：2012-10-16T08:53:03.267
> 
> 标签：javascript, events, raphael

当在 Raphaeljs 中为特定的 raphael 对象调用转换函数时，我正在寻找一种触发事件的方法。到目前为止，这是我想出的。

```
var paper = new Raphael( 0, 0, 1000, 1000 );
var rect = paper.rect( 100, 100, 100, 100 );
var rect1 = paper.rect( 0, 0, 100, 100 );

rect.transform = ( function() {
    var original = rect.transform;

    return function( ) {
         // fire event for rect
        return original.apply( this, arguments );
    }
})();

rect1.transform = ( function() {
    var original = rect1.transform;

    return function( ) {
        // fire event for rect1   
        return original.apply( this, arguments );
    }
})();

rect.transform( "s2" ); // event for rect.transform fired
rect1.transform( "s2" ); // event for rect1.transform fired 
```

我只是想知道是否有其他人知道这样做的任何其他方式。

[在这里](http://jsfiddle.net/bruno/mE5pf/3/)摆弄我的例子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:03:30.143

您可以通过扩展元素原型对所有元素执行此操作，有关详细信息，请参阅[http://raphaeljs.com/reference.html#Raphael.el](http://raphaeljs.com/reference.html#Raphael.el)。

# c++ - Opencv 错误：没有 GPU 支持（库在没有 CUDA 支持的情况下编译）

> ID：12910902
> 
> 赞同：8
> 
> 时间：2012-10-16T08:53:04.690
> 
> 标签：c++, c, opencv, cuda

我正在尝试使用 CUDA 在 GPU 上使用 opencv 处理一些图像处理任务。我正在使用 ubuntu。我毫无问题地设置了我的两个产品 Opencv 和 Cuda，我对此很确定。但是，当我尝试在 Eclipse 中运行 sampleCOde 时，出现错误：

`OpenCV Error: No GPU support (The library is compiled without CUDA support) in mallocPitch, file /home/muad/Source/OpenCV-2.4.2/modules/core/src/gpumat.cpp, line 749`

我重新制作了我的opencv，但我仍然明白。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T21:03:28.400

如文档中所述，您必须使用 CMake 构建 OpenCV 并设置标志 WITH_CUDA=ON。然后您将获得功能齐全的 OpenCV GPU 模块。否则，该模块仍会构建，但您会收到 CV_GpuNotSupported 的异常。

欲了解更多信息，请阅读此处：[http ://docs.opencv.org/modules/gpu/doc/introduction.html](http://docs.opencv.org/modules/gpu/doc/introduction.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T10:53:20.940

我有同样的问题。我通过使用.exe将opencv_core243d.dll从`E:\opencv\build\gpu\x64\vc10\lib`文件夹复制到工作目录来修复它。不知道为什么这很重要，但确实如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-09T06:31:07.797

我猜你的系统路径仍然设置为以前没有用 gpu 编译的 dll。您应该在重建 opencv 后首先更改您的系统路径。

# java - Java Spring Bean 的 Oracle DB 连接问题

> ID：12910904
> 
> 赞同：2
> 
> 时间：2012-10-16T08:53:06.593
> 
> 标签：java, spring, connection, oracle11g

实际上我正在尝试调用 queryForInt() 方法，但它显示 NULL 异常。当我使用以下代码访问具有相同凭据的 dB 时：

----------------这是工作-----------

```
DriverManagerDataSource dataSource = new DriverManagerDataSource();
dataSource.setDriverClassName("oracle.jdbc.driver.OracleDriver");
dataSource.setUrl("jdbc:oracle:thin:@localhost:1521:xe");
dataSource.setUsername("userName");
dataSource.setPassword("pwd"); 
```

------ 在 Bean 中 ------（这不起作用）

```
<!-- DAOS -->
<bean id="ProductDAO" class="br.edeploy.voive.dao.ProductDAO">
    <property name="dataSource" ref="dataSource"/>
</bean> 
```

---------在 ProductDAO 类上 --------------（我使用 Spring 方法时抛出异常）

```
try
{
  int i = getSimpleJdbcTemplate().queryForInt("Select * from ERP_PRODUCT", "");
}
catch(DataAccessException dax)
{
  throw new Exception("Error: "+dax.getMessage());
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:04:59.377

Spring jdbcTemplate.queryForInt() 支持以下参数

```
 int    queryForInt(String sql) 
          Execute a query that results in an int value, given static SQL.

 int    queryForInt(String sql, Object[] args) 
          Query given SQL to create a prepared statement from SQL and a list of arguments to bind to the query, resulting in an int value.

 int    queryForInt(String sql, Object[] args, int[] argTypes) 
          Query given SQL to create a prepared statement from SQL and a list of arguments to bind to the query, resulting in an int value. 
```

您为参数传递参数，不确定为什么使用第二种方法而不是第一种方法（当您不需要传递参数时）

**编辑** 使用 queryForInt() 的方法是：

```
String sql = "SELECT COUNT(*) FROM CUSTOMER";

int total = getJdbcTemplate().queryForInt(sql); 
```

查看您的代码，看起来您需要使用`queryForObject()`

```
String sql = "SELECT NAME FROM CUSTOMER WHERE CUST_ID = ?";

String name = (String)getJdbcTemplate().queryForObject(
            sql, new Object[] { custId }, String.class); 
```

# opengl-es - 如何在 WebGL 中的 xy 平面（z=0）上绘制 2D 形状？

> ID：12910906
> 
> 赞同：1
> 
> 时间：2012-10-16T08:53:12.283
> 
> 标签：opengl-es, webgl

我希望在 WebGL 的 xy 平面 (z=0) 上绘制 2D 形状。

我正在从[这里](http://learningwebgl.com/lessons/)阅读。

这是我的drawScene函数：

```
function drawScene() {
    gl.viewport(0, 0, gl.viewportWidth, gl.viewportHeight);
    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

    mat4.perspective(45, gl.viewportWidth / gl.viewportHeight, 0.1, 100.0, pMatrix);

    mat4.identity(mvMatrix);
    mat4.translate(mvMatrix, [2.0, 5.0, -1.0]);

    mvPushMatrix();
    gl.bindBuffer(gl.ARRAY_BUFFER, squareVertexPositionBuffer);
    gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, squareVertexPositionBuffer.itemSize, gl.FLOAT, false, 0, 0);

    gl.bindBuffer(gl.ARRAY_BUFFER, squareVertexColorBuffer);
    gl.vertexAttribPointer(shaderProgram.vertexColorAttribute,squareVertexColorBuffer.itemSize, gl.FLOAT, false, 0, 0);

    setMatrixUniforms();
    gl.drawArrays(gl.TRIANGLE_FAN, 0, squareVertexPositionBuffer.numItems);

        mvPopMatrix();
} 
```

squareVertexPositionBuffer 和 squareVertexColorBuffer 是我的对象的形状和颜色缓冲区。

问题在这里： `mat4.perspective(45, gl.viewportWidth / gl.viewportHeight, 0.1, 100.0, pMatrix);`和 `mat4.translate(mvMatrix, [2.0, 5.0, -1.0]);`

我希望在 z=0 平面上绘制对象。所以当我把它改成 `mat4.perspective(45, gl.viewportWidth / gl.viewportHeight, 0.0, 100.0, pMatrix);`和 `mat4.translate(mvMatrix, [2.0, 5.0, 0.0]);`

屏幕上什么也没有显示。为什么会这样？

此外，我们在 WebGL 中指定的数字是否以屏幕像素单位转换和存储缓冲区中的形状坐标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:53:18.077

这是因为您的近剪裁平面（ 中的第三个参数`mat4.perspective`）设置为 0.1，这意味着前面的任何东西都将被剔除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T07:13:55.860

如果你想做 2D 渲染，你不应该使用 3D 数学。摆脱 mat4 库并进行 2D 数学运算，所有关于 2D 的问题都会消失。

在 WebGL 中为 2D 使用 3D 数学可以说是 OpenGL 1.0 遗留下来的旧思想，并且不再应该被劝阻。

这是一系列关于如何进行 2D 的文章，包括 2D 数学库

[http://games.greggman.com/game/webgl-fundamentals/](http://games.greggman.com/game/webgl-fundamentals/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T22:01:39.900

在我进入答案的主要部分之前，并努力回答您问题的最后一部分，了解 WebGL 接收到的数字实际上如何变成屏幕上的颜色可能会有所帮助。如果您不介意点击“ [WebGL 的工作原理？](https://stackoverflow.com/questions/7328472/how-webgl-works/7374194#7374194) ”，我已经写了一个详细的答案。

您不能将近平面深度 0 用于透视矩阵，因为这样做会产生除以 0，从而导致矩阵中的 NaN 值：

```
 // fovy, aspect, znear, zfar
m = mat4.perspective(     45,      1,     0, 100);
//=> [NaN, 0, 0, 0, 0, NaN, 0, 0, NaN, NaN, -1, -1, 0, 0, 0, 0] 
```

将近平面视为相机镜头的目镜。它非常靠近您的眼睛，但实际上并不*在*您的眼睛中，这就是近平面 0 的含义。

然而，使用一个非零的近似值只是答案的一半。您应该熟悉正交投影，这有点与透视相反。

透视意味着随着物体变得更远，它们似乎变得更小。这就是给你深度感的原因。使用正交投影矩阵，无论对象离相机多近或多远，它们都被绘制成相同的大小，这使得它们非常适合各种 2D 操作，甚至在 3D 引擎中（例如绘制范围镜头或 HUD）。

值得注意的是，即使使用正交投影，仍然必须有一个近平面和远平面，并且物体必须仍然位于它们之间才能可见。

大多数矩阵库都具有生成正交投影的功能，实际上使用创建后的正交矩阵与使用透视矩阵相同。这是使用 实例化正交矩阵的示例`gl-matrix`：

```
m = mat4.ortho(left, right, bottom, top, near, far); 
```

大多数人都对价值观应该是什么感到困惑。事实是，你可以使用任何你想要的值。如果您希望将事物保持在单位空间中，则可以使用范围`-1..1`，如果您想将对象缩放到窗口大小，这很有用，或者您可以使用画布的像素坐标，这有时对布局很有用用户界面等。（是的，您可以使用接近 0 的值。）

使用负的近平面值是可行的，但可能有点笨拙，因为它在技术上意味着允许绘制摄像机*后面的对象。*在 2D 环境中，这可能不太重要。这样做有其用途，但并不常见。

我不完全确定物体是否会开始*在*近平面上被剔除或*越过*它，所以你应该谨慎使用直接在近平面上的值。为了安全起见，我尝试始终将近平面设置为至少比最近的物体更近 0.01。

关于近值和远值的另一件事：它们直接且极大地影响深度缓冲区的准确性。让它们尽可能靠近。显然，这在 3D 中更为重要，但如果您正在制作伪 2D 场景，例如在图层中相互偏移精灵，则可以发挥作用。

最后，关于在 WebGL 中制作 2D 图形的最后一点说明。您需要调用一些函数：

```
// Disable depth testing. This way, the last object drawn is always in "front".
// WebGL will not attempt to determine whether one object lies behind another.
gl.disable(gl.DEPTH_TEST);

// Alternatively, keep depth testing, but allow objects that share a plane with
// one another to overwrite each other. Your mileage may vary but the idea here
// is to be able to draw the scene in distinct layers, where objects in a given
// layer share the same plane but objects from one layer to the next can still
// take advantage of depth testing.
gl.depthFunc(gl.LEQUAL); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T17:49:10.387

此外，如果您正在执行 2D 渲染器，您可能应该禁用深度缓冲区测试。因为您可能希望依靠绘制顺序来确定可见性。

# ios - iOS - 在 UIScrollView 内添加多个 UIButton 滚动不顺畅

> ID：12910909
> 
> 赞同：2
> 
> 时间：2012-10-16T08:53:16.913
> 
> 标签：ios, uiscrollview, uibutton, smooth-scrolling

我在中添加 (400+) `UIButton`s `UIScrollview`，当我滚动时`simulator`它运行良好，但在 iPad 中滚动缓慢。

[这](http://mocku.ps/ga24n5)就是我正在做的事情。

> ```
> - (void)viewDidLoad {
> [scrollView setContentSize:CGSizeMake(180 * 24 , 22 * 40 + 200)];
> for (int e=0; e<12; e++) {
>     for(int i=0;i<24;i++)
>     {
>         UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
>         btn.titleLabel.font = [UIFont systemFontOfSize:12.0f];
>         [btn setBackgroundColor:[UIColor colorWithRed:248.0/255.0 green:248.0/255.0 blue:248.0/255.0 alpha:1]];
> 
>         CALayer *layer = btn.layer;
>         layer.cornerRadius = 5.f;
>         layer.masksToBounds = YES;
>         layer.borderWidth = 1.f;
>         layer.borderColor = [[UIColor colorWithRed:190.0/255.0 green:190.0/255.0 blue:190.0/255.0 alpha:1] CGColor];
> 
>         CGRect rect = btn.frame;
>         rect.size.height = 40;
>         rect.size.width = 50;
>         rect.origin.x =  100 * i;
>         rect.origin.y = 40 * e;
>         btn.frame = rect;
> 
>         CAGradientLayer *shineLayer = [CAGradientLayer layer];
>         shineLayer.frame = layer.bounds;
>         shineLayer.colors = [NSArray arrayWithObjects:
>                              (id)[UIColor colorWithWhite:0.9f alpha:0.5f].CGColor,
>                              (id)[UIColor colorWithWhite:0.9f alpha:0.7f].CGColor,
>                              (id)[UIColor colorWithWhite:0.9f alpha:1.f].CGColor,
>                              (id)[UIColor colorWithWhite:0.9f alpha:1.f].CGColor,
>                              (id)[UIColor colorWithWhite:0.9f alpha:1.f].CGColor,nil];
>         [layer addSublayer:shineLayer];
> 
>         UILabel *lblDes = [[UILabel alloc] initWithFrame:CGRectMake(0,0,50,40)];
>         lblDes.backgroundColor = [UIColor clearColor];
>         lblDes.numberOfLines = 3;
>         lblDes.textColor = [UIColor colorWithRed:4.0/255.0 green:106.0/255.0 blue:200.0/255.0 alpha:1];
>         lblDes.textAlignment = UITextAlignmentCenter;
>         lblDes.text = @"adf";
>         lblDes.tag = -1;
>         lblDes.font = [UIFont systemFontOfSize:11.f];
> 
>         [btn addSubview:lblDes];
>         [scrollView addSubview:btn];
>     }
> }
> [super viewDidLoad];  // Do any additional setup after loading the view, typically from a nib. } 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:24:01.093

iOS 模拟器在 Mac 上运行，比实际的 Device 快很多。

这完全取决于您的要求（为什么需要这么多按钮），

我建议添加一个 UIView 作为子视图，然后在 drawRect - 绘制必要的东西。然后你可以使用手势识别器来找出用户点击的位置。（根据**tdubik**的建议）

其他解决方案可能是 tableView。（有可能重复使用单元格。您可以为每个单元格添加一个按钮）。

如果 tableView 不是您要查找的内容，并且 drawRect 过于简单（因为它将没有选择效果） - 您可以有一个隐藏的 UIButton，然后可以将其（处于突出显示状态）相应地放置在用户点击并删除的位置，当用户从屏幕上移除触摸时。

**编辑**

使用 drawrect 时 - 然后您可以为使用 drawrect 绘制元素的子视图添加手势识别器：

```
CustomViewClass *mView = [CustomViewClass alloc] init]; 
```

...

```
UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc]
    initWithTarget:self action:@selector(handleTap:)];

singleTap.delegate = self;

singleTap.numberOfTapsRequired = 1;

singleTap.numberOfTouchesRequired = 1;

[mView addGestureRecognizer:singleTap]; 
```

进而 ：

```
- (void)handleTap:(UITapGestureRecognizer *)tap
{
    CGPoint mPoint = [tap locationInView:tap.view];

    int mOffset = 0; //beginning offset where buttons will start.

    for(int i = 0; i < 20; i++) //how many rows of buttons? 20? 
    { 
        mOffset += 20; //your custom drawn button height + offset from previous button

        if(mPoint.y < mOffset) //now check - if y tapped position is lower than current button.y + its height, then we know what button we tapped.
        {
            //do something - we found button row!!
            break;
        }
    }

    mOffset = 0; //beginning x offset

    for(int i = 0; i < 20; i++) //how many columns buttons? 20? 
    { 
        mOffset += 20; //your custom drawn button width + offset from previous button

        if(mPoint.x < mOffset) //now check - if x tapped position is lower than current button.x + its width, then we know what button we tapped.
        {
            //do something - we found button column!! at this point we know which button was tapped.
            break;
        }
    }
} 
```

*如果您有二维按钮数组，请为 x 坐标添加相同的检查。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:19:33.987

在仪器中分析您的应用程序，以确保按钮是缓慢的原因。

而不是 UIButtons 创建 UIView 派生类安装了手势识别器或只是 UIControl。最好的方法是使用 drawRect 方法绘制视图。

# python - 如何使正则表达式与普通字符串兼容并且字符串以换行符开头

> ID：12910913
> 
> 赞同：0
> 
> 时间：2012-10-16T08:53:33.537
> 
> 标签：python, regex

有问题的代码：

```
out, err = shellcmd.run_get_out(shell_cmd, login_shell=True)
p = re.compile('^' + module + '/(.*)$')
m = p.match(out)
if m:
    return m.group(1)
return None 
```

它从某个 shell 命令获取输出并进行正则表达式匹配。例如：out 是 'rvct/4.1_0894\n' 而模块是 'rvct'，它返回 '4.1_0894' 但是在某些系统上，shell 命令输出以新行开头，out 将是 '\nrvct/4.1 _0894\n'，我必须做出这个改变

```
p = re.compile('^\n' + module + '/(.*)$') 
```

让它发挥作用

我可以在这两种情况下都使用正则表达式吗？我试过了

```
p = re.compile('^' + module + '/(.*)$', re.MULTILINE) 
```

它似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:00:00.440

您可以先从输出中删除换行符，使用`out.strip()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:10:52.270

或者你可以跳过任意数量的带星号的前导换行符：

```
p = re.compile('^\n*' + module + '/(.*)$') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T09:11:10.543

您可以在模式中使换行符成为可选：

```
p = re.compile('^\n?' + module + '/(.*)$') 
```

`?`这里是量词，意思是 0 或 1

请参阅[docs.python.org 上的正则表达式章节中的重复内容](http://docs.python.org/howto/regex.html#repeating-things)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T09:17:14.810

试试这个

```
p = re.compile('^' + "nacho" + '/(.*)$', re.DOTALL) 
```

IE：

```
>>> re.findall("(.*)$", myvar, re.DOTALL)
['dfasd\nasdf\nadsfasdgasdgadfga\ndfasdf\nga\ndf\nga\n\n\n', ''] 
```

你的问题是'。如果您不告诉它这样做，请不要匹配换行符。

# javascript - Dojo 1.8 图表编程教程报错

> ID：12910918
> 
> 赞同：1
> 
> 时间：2012-10-16T08:53:41.107
> 
> 标签：javascript, html, dojo, javascript-framework, dojox.charting

我一直在阅读一些 Dojo 1.8 教程，这些教程很棒，但是在基本图表教程中遇到了一个错误。声明性示例工作正常，但程序示例在尝试呈现图表时出现错误。

图表教程：[http ://dojotoolkit.org/documentation/tutorials/1.8/charting/](http://dojotoolkit.org/documentation/tutorials/1.8/charting/)

工作声明性示例：[http ://dojotoolkit.org/documentation/tutorials/1.8/charting/demo/basic-declarative.php](http://dojotoolkit.org/documentation/tutorials/1.8/charting/demo/basic-declarative.php)

错误的程序示例：[http ://dojotoolkit.org/documentation/tutorials/1.8/charting/demo/basic-programmatic.php](http://dojotoolkit.org/documentation/tutorials/1.8/charting/demo/basic-programmatic.php)

根据我的调查，问题似乎在于代码试图在字符串上使用“IN”操作数，此时它会崩溃。

firebug 中的错误如下所示：“TypeError: invalid 'in' operand t”

您需要下载 dojox/gfx/path.js 的非缩小版本并查看第 191 行，您将在其中看到以下代码片段：

```
if(t instanceof Array){
    this._collectArgs(_12,t);
  }else{
    if("x" in t&&"y" in t){
      _12.push(t.x,t.y);
    }
  } 
```

我相信错误是逻辑落入“if（“x” in t&&“y” in t）”行的地方。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:40:05.003

是的，我找到了错误的原因，但没有找到补救措施。

它的 labelOffset 值是一个负数，看中了！

因此，如果您将“-20”更改为“20”，它会正常运行。

完整示例，包括导致错误的负值...

```
<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Demo: Basic Programmatic Chart</title>
    <link rel="stylesheet" href="style.css" media="screen">
    <link rel="stylesheet" href="../../../resources/style/demo.css" media="screen">
  </head>
  <body>
     <h1>Demo: Basic Programmatic Chart</h1>

     <!-- create the chart -->
     <div id="chartNode" style="width: 550px; height: 550px;"></div>

     <!-- load dojo and provide config via data attribute -->
     <!-- load dojo and provide config via data attribute -->
     <script src="//ajax.googleapis.com/ajax/libs/dojo/1.8/dojo/dojo.js"></script>
     <script>

     // x and y coordinates used for easy understanding of where they should display
     // Data represents website visits over a week period
     chartData = [
       { x: 1, y: 19021 },
       { x: 1, y: 12837 },
       { x: 1, y: 12378 },
       { x: 1, y: 21882 },
       { x: 1, y: 17654 },
       { x: 1, y: 15833 },
       { x: 1, y: 16122 }
     ];

     require([
        // Require the basic 2d chart resource
        "dojox/charting/Chart",

        // Require the theme of our choosing
        "dojox/charting/themes/Claro",

        // Charting plugins: 

        //Require the Pie type of Plot 
        "dojox/charting/plot2d/Pie",

        // Wait until the DOM is ready
        "dojo/domReady!"
      ], function(Chart, theme, PiePlot){

        // Create the chart within it's "holding" node
        var pieChart = new Chart("chartNode");

        // Set the theme
        pieChart.setTheme(theme);

        // Add the only/default plot 
        pieChart.addPlot("default", {
          type: PiePlot, // our plot2d/Pie module reference as type value
          radius: 200,
          fontColor: "black",
          labelOffset: "-20" <-- bug value here
        });

        // Add the series of data
        pieChart.addSeries("January",chartData);

        // Render the chart!
        pieChart.render();

      });
    </script>
  </body>
</html> 
```

只需将 labelOffset 值设为正值，一切都应该运行正常。

```
labelOffset: "20" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:02:18.417

看来它在教程中是一个错误，'labelOffset' 应该接受一个数字，但他们给了它一个字符串，因此它失败了，把引号拿掉它就可以了，请参阅这个论坛帖子。 [1.7 和 1.8 中的图表教程](http://dojo-toolkit.33424.n3.nabble.com/Charting-tutorial-in-1-7-and-1-8-td3992848.html)

# html - HTML col 属性

> ID：12910922
> 
> 赞同：5
> 
> 时间：2012-10-16T08:53:48.860
> 
> 标签：html

我只是想知道默认情况下，HTML`<table>`元素是否隐式地将属性 scope="col" 应用于`<th>`元素中包含的第一组`<thead>`元素？

当我在浏览器中呈现下面的第一组 HTML 时，它似乎自动检测到`<th>`一月、二月、三月、四月等的单元格是列的标题。那么 scope="col" 是否不需要添加到标记中，因为它会以这种方式自动呈现？

```
 <table>
    <caption>2009 Employee Sales by Department</caption>
    <thead>
        <tr>
            <th></th>
            <th>Jan</th>
            <th>Feb</th>
            <th>March</th>
            <th>April</th>
            <th>May</th>
            <th>June</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th scope="row">Firefox</th>
            <td>37.1</td>
            <td>36.6</td>
            <td>36.3</td>
            <td>35.8</td>
            <td>35.2</td>
            <td>34.4</td>
        </tr>
        </tr>   
    </tbody>
</table> 
```

这第二组标记包括为 Jan、Feb、March April 等添加到标签中的 scope="col"。有必要吗？正如上面的示例似乎将这些渲染`<th>`为列而没有范围“col”。

我知道 scope 属性在普通的网络浏览器中没有视觉效果，但可以被屏幕阅读器使用。那么是否应该为了更好的语义标记和可访问性而添加它？

```
<table>
        <caption>2009 Employee Sales by Department</caption>
        <thead>
            <tr>
                <th scope="col"></th>
                <th scope="col">Jan</th>
                <th scope="col">Feb</th>
                <th scope="col">March</th>
                <th scope="col">April</th>
                <th scope="col">May</th>
                <th scope="col">June</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th scope="row">Firefox</th>
                <td>37.1</td>
                <td>36.6</td>
                <td>36.3</td>
                <td>35.8</td>
                <td>35.2</td>
                <td>34.4</td>
            </tr>
            </tr>   
        </tbody>
    </table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T09:03:28.647

根据[HTML5 规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/tabular-data.html#the-th-element)，该`scope`属性默认为`auto`：

> 范围属性的缺失值默认是自动状态。

这个值的特点是

> 自动状态使标题单元格应用于基于上下文选择的一组单元格。

所以我假设屏幕阅读器将能够正确检测上下文，这反过来意味着您不必显式定义属性，除非您有一些特殊的实例或用例`rowgroup`和`colgroup`值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:07:25.390

您可以使用范围属性更多地指定表格的含义。在普通表格中，我什至不会使用它，但是如果您的表格在您的页面上有意义，并且人们想要接管它，那么使用它会很方便，尤其是在阅读器上。但是，如果您只是添加表来在其中做一些次要的事情，请将其排除在外。就个人而言，只有当表格真正扩大时，您才应该考虑这一点。

定义如下：

> 定义和使用
> 
> 范围属性指定标题单元格是否是列、行或列或行组的标题。

这来自 W3 网站，顺便说一句。

# node.js - 在 Node.JS 上模拟网站负载

> ID：12910923
> 
> 赞同：0
> 
> 时间：2012-10-16T08:53:54.930
> 
> 标签：node.js, performance-testing

我正在考虑创建自己的简单负载测试，我可以通过多个请求（例如 100-1000 个并发用户）访问我的网站以查看它的性能。我想尝试 Node.js，但我不知道这是否是适合这项工作的错误技术，因为 Node.js 不使用线程？我可以使用 Node.js 使用的异步模型来模拟许多用户请求，还是更适合用其他语言（如 Ruby/.NET/Python）来做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:05:48.397

Node.js 应该非常适合这项任务。我在工作中这样做。您必须更改的一个关键部分是 http 套接字池。以下代码将完全禁用池，如果您愿意，可以让您的 Node.js 进程挨饿。

```
var http = require('http');
var req = http.request(..., agent: false) 
```

[您可以在http.Agent 文档](http://nodejs.org/api/http.html#http_class_http_agent)中了解更多信息。

您对线程的关注是精明的，但即使您达到了这个限制（Node 非常擅长保持资源效率），解决方案也很简单：启动负载测试的多个实例（进程）。实际上，您可能必须完全使用多台机器才能正确模拟负载。

在任何情况下，使用 Ruby 或 Python 都不会自动获胜。异步编程是I/O 和网络绑定任务的*理想选择，而 Node 在这方面表现出色。*同样，虽然 Ruby 和 Python*有*第三方异步框架，但它们在定义上比 Node.js 中给出的*标准*异步框架更晦涩难懂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:02:37.097

Node 可以触发尽可能多的请求（尽管您可能需要更改 的默认值`http:Agent`）。您更可能受到操作系统可以执行的操作的限制，而不是节点中固有的任何内容（当然，这些限制将适用于您使用的任何其他语言）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T21:13:02.530

[使用nodeload](https://github.com/benschmaus/nodeload)创建负载测试很简单。

# geometry - 三角形与二维点之间的距离

> ID：12910929
> 
> 赞同：3
> 
> 时间：2012-10-16T08:54:06.230
> 
> 标签：geometry, distance

我正在尝试计算点和三角形之间的最短距离。

我尝试了以下，1.计算三角形的质心。2\. 在质心和点之间形成一条线。3\. 找出三角形的哪一边与上面形成的线相交。4\. 求该点与步骤（3）中求出的相交线的垂直距离。

难道我做错了什么？谁能帮我拉开距离？

# php - 为用户启动一个php代码（一些用户在其中的竞争），登录与否

> ID：12910932
> 
> 赞同：0
> 
> 时间：2012-10-16T08:54:15.103
> 
> 标签：php, mysql, phpmyadmin

好的，我知道标题并没有真正告诉您我的问题是什么，但我现在就试试。我正在开发一个游戏。人们可以订阅他们的动物参加比赛。那场比赛在特定时间开始。这是一场所有用户都可以订阅的比赛。所以计算哪个动物是第一，第二等发生在一个执行的 php 文件中，每 2 分钟有一个新的计算大约 1 小时。所以有30个计算。但是ofc。此代码未连接到登录用户。登录的用户可以点击 LIVE 按钮查看当前结果。

示例：今天晚些时候 17:00 有一场比赛。4 名玩家订阅了 15 只动物，他们都可以检查他们的动物的表现。

我不希望有人向我发布完整的代码，但我想知道我应该如何让 php 代码在我的服务器上运行大约 1 小时（所以执行代码、睡眠 2 分钟、新计算、睡眠 2 分钟等等） . 所以它没有连接到用户。

我考虑过 cron 工作，但我相信这真的不是解决方案。感谢您阅读：p

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:08:39.890

两种方法：

1.  您使用的算法总是会得出相同的结论，而不管它何时运行以及由谁运行。您只需定义起始参数，然后您可以随时在需要时计算结果（或在开始和结束之间的任何时间点的中间结果）。因此，任何用户都可以随时访问您的网站，并且该算法将从某个固定的起始条件即时计算当前排名。
2.  或者，您将所有数据保存在中央数据存储中，并以特定间隔实际更新数据；任何用户都可以随时请求当前排名，并且将使用数据存储中的最新数据。您仍然需要一种具有上述特征的算法，因为您可能明确地*没有*真正实时运行模拟。每隔 x 秒，你就会再次运行你的计算，计算你上次运行它们时应该发生的变化。

本质上，您使用的*任何*算法都需要这种方法。即使是“实时”程序也只是保持循环，从以前的状态一点一点地改变值。这些变化之间的间隔可以任意延长，直到有必要时你什么都不计算。同时，您只需将所需的所有数据存储在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:19:36.080

Cron 工作是我认为的正确方式。当您对算法不太擅长时，请检查一下：[How To: PHP with Cron job](http://www.thegeekstuff.com/2011/07/php-cron-job/)也许您必须使用不同的 cron 作业。

# vb.net - 调整窗口窗体控件的大小

> ID：12910933
> 
> 赞同：2
> 
> 时间：2012-10-16T08:54:15.913
> 
> 标签：vb.net, winforms

我的问题是我无法根据表单大小调整表单控件的大小。我有一个包含文本框、标签和按钮的表单。单击按钮时，我需要在特定大小的窗口中打开相同的表单，并且我希望表单的所有控件都应与表单成比例，并且控件内的字体大小也应成比例。任何人都可以建议如何使用代码来做到这一点。无法通过使用锚点和停靠属性来解决此问题。

我的代码：

```
Private Sub Test_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    Dim widthRatio As Single = Me.Size.Width / 300.0F
    Dim heightRatio As Single = Me.Size.Height / 300.0F
    Dim scale As New SizeF(widthRatio, heightRatio)
    Me.Scale(scale)
    For Each control As Control In Me.Controls
        control.Scale(scale)
        control.Font = New Font(control.Font.FontFamily,   control.Font.SizeInPoints * widthRatio * heightRatio)
    Next
End Sub 
```

在这里，对于宽度和高度比，我已经划分了 300.0F，因为我的原始形式是 size(300,300)，但我没有让所有控件都平等地扩展......任何建议都值得赞赏。

谢谢

帕拉维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:09:11.323

检查这两行

```
Dim widthRatio As Single = Me.Size.Width / 300.0F
Dim heightRatio As Single = Me.Size.Height / 300.0F 
```

在你的情况下 Me.Size.Width = 300 和 Me.Size.Height = 300 这就是它不起作用的原因，改变宽度或高度然后检查它

# asp.net-mvc - Asp.Net MVC 路由异常

> ID：12910934
> 
> 赞同：0
> 
> 时间：2012-10-16T08:54:16.780
> 
> 标签：asp.net-mvc

我正在使用 MVC 开发我的网站。我收到以下错误。

URL：**http**
://www.abc.com/robots.txt 1\. 路径“/robots.txt”的控制器未找到或未实现 IController。

URL: **http://www.abc.com/blogs/post/whats-new-in-mvc**
2\. 路径 '/blogs/post/whats-new-in-mvc' 的控制器未找到或未实现控制器..

但我的网站中没有上述网址。上面的url是怎么生成的？你能告诉我解决上述问题的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:57:09.167

搜索引擎使用第一个索引您的网站。[`robots.txt`](http://www.robotstxt.org/)在您的应用程序中添加一个文件是一个很好的做法。因此，您可以将此文件添加到站点的根目录。就第二个 url 而言，我完全不知道是谁在查询它。也许在您网站的某个地方，您有指向此网址的链接？

但是，如果您不想使用此文件，则可以将其从路由中排除：

```
routes.IgnoreRoute("robots.txt"); 
```

现在，当搜索引擎向该文件发送请求时，他也会收到 404，但该请求不会通过 MVC 管道进行路由。

# objective-c - 将委托分配给我的 PieChartView 时发送到实例的无法识别的选择器

> ID：12910936
> 
> 赞同：1
> 
> 时间：2012-10-16T08:54:25.107
> 
> 标签：objective-c, ios

嗨，我已经搜索和搜索，然后我决定在这里发布 - 这个问题对你来说可能很愚蠢，但它已经花了我一天的时间:(

所以我正在尝试使用 XYPieChart 来绘制一些饼图，这里有一些来自 XYPieChart 的代码：

XYPieChart.h

```
@class XYPieChart;
@protocol XYPieChartDataSource <NSObject>
@required
- (NSUInteger)numberOfSlicesInPieChart:(XYPieChart *)pieChart;
- (CGFloat)pieChart:(XYPieChart *)pieChart valueForSliceAtIndex:(NSUInteger)index;
@optional
- (UIColor *)pieChart:(XYPieChart *)pieChart colorForSliceAtIndex:(NSUInteger)index;
- (NSString *)pieChart:(XYPieChart *)pieChart textForSliceAtIndex:(NSUInteger)index;
@end

@protocol XYPieChartDelegate <NSObject>
@optional
- (void)pieChart:(XYPieChart *)pieChart willSelectSliceAtIndex:(NSUInteger)index;
- (void)pieChart:(XYPieChart *)pieChart didSelectSliceAtIndex:(NSUInteger)index;
- (void)pieChart:(XYPieChart *)pieChart willDeselectSliceAtIndex:(NSUInteger)index;
- (void)pieChart:(XYPieChart *)pieChart didDeselectSliceAtIndex:(NSUInteger)index;
@end 
```

XYPieChart.m

```
@synthesize dataSource = _dataSource;
@synthesize delegate = _delegate; 
```

然后在我自己的视图控制器 XYPieChartViewTestViewController.h

```
#import <UIKit/UIKit.h>
#import "XYPieChart.h"

@interface XYPieChartViewTestViewController : UIViewController <XYPieChartDelegate,      XYPieChartDataSource>
@property (weak, nonatomic) IBOutlet XYPieChart *MyPieCharts;
@end 
```

和 XYPieChartViewTestViewController.m

```
#import "XYPieChartViewTestViewController.h"

@interface XYPieChartViewTestViewController ()
@end
@implementation XYPieChartViewTestViewController
@synthesize MyPieCharts = _MyPieCharts;

- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

    [_MyPieCharts setDelegate:self];
} 
```

但是在执行 [_MyPieCharts setDelegate:self]; 时，有一个转储：

2012-10-16 10:33:53.100 XYPieChartViewTest[3859:11303]-[UIView setDelegate:]：无法识别的选择器发送到实例 0x9040680 ***第一次抛出调用堆栈：libc++abi.dylib：终止调用抛出异常

如果我在“[_MyPieCharts setDelegate:self];”行和 PO self._MyPieCharts.delegate 处放置一个断点，它会说：

po self.MyPieCharts.delegate 错误：执行被中断，原因：尝试取消引用无效的 ObjC 对象或向其发送无法识别的选择器。进程已恢复到执行前的状态。

我已经在[这里](http://www.4shared.com/zip/dBCBCOJI/XYPieChartViewTest.html)上传了项目，因为我无法发布屏幕截图。

这是否意味着 self.MyPieCharts.delegate 未初始化？你知道我该怎么做吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T14:49:41.347

似乎 MyPieCharts 未在 Interface Builder 中连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:58:02.490

尝试将委托设置为：

```
[_MyPieCharts setDelegate:XYPieChartDelegate]; 
```

# android - android - 我们可以在没有物理指南针的情况下获得指南针方向吗（例如使用 2 个 GPS 点？）

> ID：12910941
> 
> 赞同：1
> 
> 时间：2012-10-16T08:54:36.547
> 
> 标签：android, gps, compass-geolocation

我的手机没有指南针，我可以在没有物理指南针的情况下获得类似指南针的方向（角度）（例如，使用 2 个 GPS 点移动 pobject？）或任何其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:00:15.490

您可以使用[Location.getBearing](http://developer.android.com/reference/android/location/Location.html#getBearing%28%29)从使用 LocationManager获得的位置对象中获取方位角。

[您也可以使用Location.bearingTo](http://developer.android.com/reference/android/location/Location.html#bearingTo%28android.location.Location%29)方法手动计算它。

[Android SDK](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/location/Location.java#Location.computeDistanceAndBearing%28double,double,double,double,float%5B%5D%29)使用[精确的方法](http://www.ngs.noaa.gov/PUBS_LIB/inverse.pdf)来操作位置。该方法认为地球不是平的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:57:06.770

如果设备正在移动，则可以使用捕获多个 GPS 位置来获取行进方向。

请注意，这只会为您提供行进方向，而不是设备的方向。

编辑：如果你在这些点之间有两个点方向是简单的数学，你可以在任意数量的网站上找到。我也相信 android/iOS 等有一些内置的功能可以让事情变得更容易。

# android - 是否可以为单个 ViewPager 加载不同的布局

> ID：12910945
> 
> 赞同：1
> 
> 时间：2012-10-16T08:55:07.747
> 
> 标签：android, android-layout, android-fragments, android-viewpager, illegalargumentexception

我的应用程序有 3 个按钮。图书馆，商店和最新的。当我单击这些按钮中的任何一个时，我想加载不同的布局。对于 Library ，aViewPager。对于 STORE，一个 ViewPager，对于 LATEST，一个普通的布局文件。怎么做？

如果我为 Library & Store 加载 ViewPager。当我旋转我的设备时，我的应用程序崩溃了`IllegalArgumentException : No view found for Id for Fragment.`

我尝试了很多方法。我也发布了很多问题。仍然没有积极的回应。

谁能告诉我该怎么做？

# jsf - 如何在组件渲染器中动态创建 a4j:commandLink？

> ID：12910949
> 
> 赞同：1
> 
> 时间：2012-10-16T08:55:25.187
> 
> 标签：jsf, jsf-2, richfaces, ajax4jsf

我正在尝试通过扩展其渲染器来为**rich:dataTable添加一些功能。**更具体地说，我想在标题列中呈现一个链接，该链接触发一个 ajax 调用（以触发支持 bean 中的一个动作）。

所以我的第一个想法是修改dataTable的渲染器以实例化并添加一个**a4j：commandLink**实例。这在某种程度上确实有效，链接确实可以很好地呈现，但是没有调用相关的操作，并且没有执行添加的参数分配。此外，我无法真正弄清楚视图的哪些部分正在执行和渲染，似乎我设置的值被忽略了（例如，如果我将**@all**指定为这两个属性的值，我仍然会得到一个部分响应，其中只包含一个我页面的一小部分）。

这是我用来创建链接的代码：

```
UICommandLink l = (UICommandLink) context.getApplication().createComponent(UICommandLink.COMPONENT_TYPE);
l.setTransient(false);
l.setRender("@all");
l.setExecute("@all");
l.setActionExpression(ULHelper.createMethodExpression("#{orderBy.toggle('"+ sortName + "')}", null, String.class);
l.setParent(uiColumn);
l.getChildren().add(headerFacet);
l.encodeAll(context); 
```

**uiColumn**是 UIColumn 实例，**headerFacet**是应该在链接中呈现的文本。

链接确实显示正确，单击链接触发 ajax 请求就好了（javascript 控制台中没有错误） - 但我不知道服务器端接下来会发生什么，该操作没有被调用，表是也不会重新渲染。

如果我添加一个 ActionListener

```
l.addActionListener(...); 
```

或将参数实例添加到链接

```
UIParameter par = (UIParameter) context.getApplication().createComponent(UIParameter.COMPONENT_TYPE);
par.setValue(sortName);
par.setAssignToExpression(ULHelper.createValueExpression("#{bean.text}", String.class));
l.getChildren().add(par); 
```

没有区别，两者都没有被执行。

我怀疑它与状态保存有关，a4j:commandLink 没有被保存，因此第二个请求没有找到可以使用的链接（因此监听器、参数等......），但我没有想法如何保持（和恢复）链接的状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:46:10.820

只需从工作来源中取样，这可能会有所帮助：

```
import org.ajax4jsf.component.html.HtmlAjaxCommandLink;

    public UIComponent ajaxLink(...) {
        HtmlAjaxCommandLink ajaxLink = new HtmlAjaxCommandLink();
        ajaxLink.setId(...);
        ajaxLink.setValue(...);
        ajaxLink.setAjaxSingle(true);
        ajaxLink.setOncomplete(...some js func..);
        ajaxLink.setReRender(...);
        FacesContext context = FacesContext.getCurrentInstance();
        MethodExpression actionListenerExpression = context.getApplication().getExpressionFactory().createMethodExpression(context.getELContext(), "#{someSeamComponent.someAction}", null, new Class[]{ActionEvent.class});
        MethodExpressionActionListener actionListener = new MethodExpressionActionListener(actionListenerExpression);
        ajaxLink.addActionListener(actionListener);
        return ajaxLink;
    }

uiComponent.getChildren().add(ajaxLink(...)); 
```

# java - Struts 2 重定向到同一页面，没有内容更新

> ID：12910950
> 
> 赞同：0
> 
> 时间：2012-10-16T08:55:32.700
> 
> 标签：java, struts2

我在struts 2中被重定向到同一页面。

页面的内容是动态的，并且会根据一些变量而变化。我有一个按钮可以更改其中一些变量，然后重定向到同一页面。但是您可以猜到页面上没有任何变化，即使我按下页面的刷新按钮也没有任何变化。当我转到其他页面并返回时，页面的内容发生了变化。

知道如何在我按下按钮时确保页面发生变化吗？

```
BusinessReply<List<UiMessage>> reply = new BusinessReply<List<UiMessage>>();
reply = openFileOrchestrator.correctDecisionCMD(userContext, interactionId);

if (!reply.hasMessages()) {
    redirectTo = redirectTo(DECISION_OVERVIEW);
} else {
    ...
} 
```

提前致谢

# windows-phone-7 - 如何在 Windows Phone 7.5 上从网站调用 SMS 撰写？

> ID：12910951
> 
> 赞同：4
> 
> 时间：2012-10-16T08:55:36.340
> 
> 标签：windows-phone-7, web, sms

`sms:`只需在 href 属性中使用前缀，这对于 iOS、Android 甚至 BlackBerry OS 来说都非常简单，如下所示：

```
<a href="sms:0046730123456">Send an SMS to +46 73 012 34 56</a> 
```

这将启动 SMS 应用程序，并在前面提到的平台上预先填写了号码。但是在使用 Internet Explorer 的 WP7.5 上，我们收到一条错误消息，指出不支持 URL 方案。有人在网上暗示过，`smsto:`但这也不起作用。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-17T10:28:59.513

您应该使用javascript注入来获取链接点击事件，解决方案就像[这里。](https://stackoverflow.com/questions/8317697/is-it-possible-to-detect-the-dom-element-tapped-in-a-wp7-webbrowser-control/8317917#8317917)

# android - AndEngineRuntimeException：检测到固有不兼容的设备。

> ID：12910953
> 
> 赞同：6
> 
> 时间：2012-10-16T08:55:44.197
> 
> 标签：android, andengine

当我运行我的 AndEngine 程序时，我的手机上出现这样的错误，它在我的 frnds 手机上成功运行，但是当我尝试运行时，我收到了类似检测到固有不兼容设备的错误......

我的logcat在下面

```
 10-16 14:13:23.061: E/AndroidRuntime(4533): FATAL EXCEPTION: GLThread 10
   10-16 14:13:23.061: E/AndroidRuntime(4533): java.lang.ExceptionInInitializerError
   10-16 14:13:23.061: E/AndroidRuntime(4533):  at org.andengine.opengl.vbo.attribute.VertexBufferObjectAttributeFix.glVertexAttribPointer(VertexBufferObjectAttributeFix.java:39)
   10-16 14:13:23.061: E/AndroidRuntime(4533):  at org.andengine.opengl.vbo.attribute.VertexBufferObjectAttributes.glVertexAttribPointers(VertexBufferObjectAttributes.java:50)
   10-16 14:13:23.061: E/AndroidRuntime(4533):  at org.andengine.opengl.shader.ShaderProgram.bind(ShaderProgram.java:126)
   10-16 14:13:23.061: E/AndroidRuntime(4533):  at org.andengine.opengl.shader.PositionTextureCoordinatesShaderProgram.bind(PositionTextureCoordinatesShaderProgram.java:86)
   10-16 14:13:23.061: E/AndroidRuntime(4533):  at org.andengine.opengl.vbo.VertexBufferObject.bind(VertexBufferObject.java:162)
   10-16 14:13:23.061: E/AndroidRuntime(4533):  at org.andengine.opengl.texture.TextureWarmUpVertexBufferObject.warmup(TextureWarmUpVertexBufferObject.java:97)
   10-16 14:13:23.061: E/AndroidRuntime(4533):  at org.andengine.opengl.texture.TextureManager.updateTextures(TextureManager.java:257)
   10-16 14:13:23.061: E/AndroidRuntime(4533):  at org.andengine.engine.Engine.onDrawFrame(Engine.java:613)
   10-16 14:13:23.061: E/AndroidRuntime(4533):  at org.andengine.opengl.view.EngineRenderer.onDrawFrame(EngineRenderer.java:105)
   10-16 14:13:23.061: E/AndroidRuntime(4533):  at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1332)
   10-16 14:13:23.061: E/AndroidRuntime(4533):  at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1116)
   10-16 14:13:23.061: E/AndroidRuntime(4533): Caused by: org.andengine.util.exception.AndEngineRuntimeException: Inherently incompatible device detected.
   10-16 14:13:23.061: E/AndroidRuntime(4533):  at org.andengine.opengl.GLES20Fix.<clinit>(GLES20Fix.java:39) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T08:57:58.873

正如[42labs 所说](http://42labs.tumblr.com/post/23674161190/fixing-crash-in-andengines-live-wallpaper-on-2-2)：

> 幸运的是，它很容易修复 - 在您的源根目录（AndroidManifest.xml 所在的目录）中创建一个名为 libs 的目录，然后在其中创建一个名为 armeabi 的目录。[现在从这里](https://github.com/nicolasgramlich/AndEngine)获取 AndEnginesources（来自 OpenGL ES 2.0 分支）。您可以克隆存储库或下载它。没关系。
> 
> **重要的是您应该将 libs/armeabi 中可用的 libandengine.so 复制到您刚刚在目录中创建的 libs/armeabi 中。将解决问题:)**
> 
> 可能这不是官方的解决方案，也许我们在AndEngine的论坛上没有看到任何注释，但是这种方法在30秒内解决了问题并且不会产生任何其他问题。
> 
> 还有——为什么会崩溃？它解决了什么问题？
> 
> 其实挺搞笑的。Google 开发人员在准备 Froyo Java SDK 时忘记实现一些（标准！）OpenGL ES 2.0 功能的 Java 版本。此问题的解决方案是使用 JNI 创建一个调用桥接至 SDK 中缺少的本机函数。AndEngine 在提到的 libandengine.so 中有这个桥。当引擎启动时，它会检查操作系统的版本。如果是 Froyo（或更低），它会尝试加载库。如果该库不存在，则无法解决此问题并且必须崩溃。

# java - 将语言代码转换为语言名称的 Java 库/api

> ID：12910955
> 
> 赞同：2
> 
> 时间：2012-10-16T08:55:45.477
> 
> 标签：java, nlp, converter, iso

是否有一个 Java 库/api，给定一个 iso 语言代码，返回相应的语言名称。例如 zh-cn 应该返回中文，en 应该返回英文等等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T08:58:50.420

Java Locale 类可以这样做：

```
new Locale("zh", "cn").getDisplayName();
--> Chinese (China) 
```

您只需要解析语言/国家/地区名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T09:00:08.557

你不需要图书馆；你可以用`java.util.Locale`这个。

```
Locale locale = new Locale("zh", "cn");
System.out.println(locale.getDisplayLanguage()); 
```

这将打印

```
Chinese 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T09:00:20.827

[Locale API](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Locale.html)为 java 语言做国家代码。参考上面的链接

# php - 每天都有横幅更新

> ID：12910957
> 
> 赞同：0
> 
> 时间：2012-10-16T08:55:51.483
> 
> 标签：php, flash, banner

我目前正在为客户整理一些基本的动画 HTML5 横幅，他们根据正常运行时间要求提供一个（他们是 SAAS 提供商）。除非发生事故，否则此横幅将更新正常运行时间。我在 Adob​​e Animate 中设计了横幅，并且所有可用的数字都达到了 1,000，但我正在努力思考如何实现它。我猜横幅需要调用脚本或类似的东西？

任何想法/反馈将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:29:03.337

你可以做的是以下

*   将当前日期/时间存储到过期时间为 0（永不过期）的缓存中（如果您有权访问 memcached，则为[教程）。](http://www.script-tutorials.com/how-to-use-memcache-with-php/)
*   有一种方法让客户端重置正常运行时间。这实际上是将缓存值设置为当前时间。
*   确定要获取的横幅`max((current datetime - cached datetime), 0)`

# asp.net - 将数据注释扩展验证包实现到 Web 表单应用程序

> ID：12910958
> 
> 赞同：0
> 
> 时间：2012-10-16T08:55:51.787
> 
> 标签：asp.net, validation, c#-4.0, data-annotations, webforms

我需要实施

任何人都可以建议一篇示例文章，用于在我的 Web 表单应用程序（4.0）中实现数据注释扩展验证包

[http://dataannotationsextensions.org/](http://dataannotationsextensions.org/)

谢谢并恭祝安康，

世宾虚拟机

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:43:36.913

[我有托管在 CodePlex 上的DataAnnotations Validator 控件](http://davalidation.codeplex.com/)的开源实现，也可以通过[NuGet](https://nuget.org/packages/DAValidation)获得。

[这](http://amanek.com/building-data-annotations-validator-control-with-client-side-validation/)是描述 DataAnnotations Validator 控件内部的文章。

DAValidation 项目与 ASP.NET MVC 输入验证具有相同的可扩展性架构，您可以轻松地将[http://dataannotationsextensions.org/](http://dataannotationsextensions.org/)改编为 Web 窗体项目。

希望这会帮助你。

# mongodb - 分片在集群中不均衡

> ID：12910959
> 
> 赞同：3
> 
> 时间：2012-10-16T08:56:06.217
> 
> 标签：mongodb, sharding

我有2个碎片。一个在独立服务器上，另一个在副本集上：

```
mongos> db.runCommand({listshards:1})
{
        "shards" : [
            {
                "_id" : "shard0000",
                "host" : "mongo3:10001"
            },
            {
                "_id" : "set1",
                "host" : "set1/mongo1:10001,mongo2:10001"
            }
        ],
        "ok" : 1
} 
```

我已经插入了大约 30M 条记录。

据我了解，mongo 应该平等地平衡分片之间的数据，但它不会发生：

```
mongos> db.stats()
{
    "raw" : {
        "set1/mongo1:10001,mongo2:10001" : {
            "db" : "my_ginger",
            "collections" : 3,
            "objects" : 5308714,
            "avgObjSize" : 811.9953284354742,
            "dataSize" : 4310650968,
            "storageSize" : 4707774464,
            "numExtents" : 23,
            "indexes" : 2,
            "indexSize" : 421252048,
            "fileSize" : 10666115072,
            "nsSizeMB" : 16,
            "ok" : 1
        },
        "mongo3:10001" : {
            "db" : "my_ginger",
            "collections" : 6,
            "objects" : 25162626,
            "avgObjSize" : 1081.6777010475776,
            "dataSize" : 27217851444,
            "storageSize" : 28086624096,
            "numExtents" : 38,
            "indexes" : 6,
            "indexSize" : 1903266512,
            "fileSize" : 34276900864,
            "nsSizeMB" : 16,
            "ok" : 1
        }
    },
    "objects" : 30471340,
    "avgObjSize" : 1034.6936633571088,
    "dataSize" : 31528502412,
    "storageSize" : 32794398560,
    "numExtents" : 61,
    "indexes" : 8,
    "indexSize" : 2324518560,
    "fileSize" : 44943015936,
    "ok" : 1
} 
```

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T16:17:59.293

根据`sh.status()`评论中的输出，您在 shard0000（单个主机）上有 164 个块，在 set1（副本集）上有 85 个块。发生这种不平衡的常见原因有两个：

1.  您选择了错误的分片键（单调递增或类似）
2.  您的所有数据最初都在一个分片上，并且正在重新平衡

平衡器将不断尝试将块从高分片移动到低分片，同时移动最大块（对于选择上述单调递增键的人，这会有所帮助）。但是，一次只能进行一次迁移，因此这将需要一些时间，特别是如果您同时继续从分片写入/读取。如果事情真的很糟糕，并且你确实选择了一个糟糕的分片键，那么这可能会持续一段时间。

如果您的所有数据首先在一个分片上，然后您添加了另一个分片，那么您会遇到类似的问题 - 块计数需要一段时间才能稳定，因为一半的数据必须从原始分片中移出（除了它的其他活动）来平衡事情。平衡器通常会选择低范围的块首先移动，所以如果这些块不太可能在内存中（再次回到糟糕的分片键），那么它们必须在它们被迁移之前被分页。

要检查平衡器是否正在运行：

[http://docs.mongodb.org/manual/reference/method/sh.setBalancerState/#sh.getBalancerState](http://docs.mongodb.org/manual/reference/method/sh.setBalancerState/#sh.getBalancerState)

然后，要查看它在做什么，请连接到 mongos（最后 10 次操作）：

```
use config
db.changelog.find().sort({$natural:-1}).limit(10).pretty() 
```

同样，如果您想查看它们的性能，您将在每个分片的主日志中看到与迁移相关的消息、它们花费了多长时间等。

# javascript - 滑块中的图像计数 (1/10)

> ID：12910960
> 
> 赞同：0
> 
> 时间：2012-10-16T08:56:07.130
> 
> 标签：javascript, jquery, css, ajax, slider

这是一张具有自动淡入淡出的图像幻灯片，我也可以通过左下角的箭头（下一个和上一个箭头）来控制它。问题是我想显示所有图像和我们正在观看的图像的当前编号（如箭头之间的编号），我已经做了标记，但我已经搜索了很多关于如何编程数字但不能找不到类似的东西。有人可以帮帮我吗？

这是标记：

```
<div id="slideshow">
    <ul id="slides">
        <li><img src="img/project_image.jpg" /></li>
        <li><img src="img/project_image2.jpg"/></li>
        <li><img src="img/project_image3.jpg" /></li>
        <li><img src="img/project_image4.jpg" /></li>
    </ul>
</div>

<div class="project_navigation" class="clearfix">
    <ul id="nav">
        <li id="prev"><a href="#">Previous</a></li>
        <div class="project_number">
            <p>10/12</p>
        </div>
        <li id="next"><a href="#">Next</a></li>
    </ul>
</div> 
```

这就是我所说的滑块：

```
 $("#slideshow").css("overflow", "hidden");

  $("ul#slides").cycle({
      fx: 'fade',
      pause: 1,
      prev: '#prev',
      next: '#next'
  }); 
```

我正在使用这个插件：http: [//jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:10:38.873

```
$(function() {
    $('#slideshow').cycle({
        fx:       'fade',
        timeout:   0,
        prev: '#prev',
        next: '#next',
        after:     onAfter
    });
});

function onAfter(curr,next,opts) {
    var caption = 'Image ' + (opts.currSlide + 1) + ' of ' + opts.slideCount;
    $('#caption').html(caption);
} 
```

您可以使用`after`回调（或`before`）通过函数更改 div 的内容。此函数将在每次转换之后（或之前）运行。

[http://jsfiddle.net/spacebeers/VhcgL/](http://jsfiddle.net/spacebeers/VhcgL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:08:47.773

请参阅此插件的 onPrevNextEvent 回调函数。

```
$("ul#slides").cycle({
      fx: 'fade',
      pause: 1,
      prev: '#prev',
      next: '#next',
      onPrevNextEvent : function(isNext, zeroBasedSlideIndex, slideElement){
           $('.project_number p').text(zeroBasedSlideIndex+'/'+$("ul#slides img").length);
      }
  }); 
```

不测试此代码，但可能在循环完成之前触发 onPrevNextEvent。在这种情况下，您应该查看 isNext 参数或 onAfter 事件。

# java - 在linux中对于一个正在运行的java进程，如何找到它的参数，比如它的调试端口？

> ID：12910964
> 
> 赞同：2
> 
> 时间：2012-10-16T08:56:22.003
> 
> 标签：java, linux

我有一个正在运行的 java 进程，我想知道它是用哪些参数启动的，具体来说，我想知道指定了哪个调试端口（它是）。有没有办法在linux中做到这一点？

更新：应用程序是通过 ant 启动的，所以我可以获得 ant 命令选项，所以现在我知道了启动的任务，也知道了 ant 进程 ID。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T08:58:04.327

`jps -v -m`可能也有帮助`cat /proc/<pid>/cmdline`

编辑：`jvisualvm`还提供一堆关于运行 java 进程的信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T08:58:05.643

为什么不直接使用`ps -fe`？

从`ps`手册页

> -f 进行全格式列表。此选项可以与许多其他 UNIX 样式选项结合使用以添加其他列。**它还会导致打印命令参数**。与 -L 一起使用时，将添加 NLWP（线程数）和 LWP（线程 ID）列。请参阅 c 选项、格式关键字 args 和格式关键字 comm。

（我的重点）

# linux-kernel - buildroot - 如何更改内核版本字符串

> ID：12910969
> 
> 赞同：4
> 
> 时间：2012-10-16T08:56:37.203
> 
> 标签：linux-kernel, release, buildroot

我在带有 buildroot 和 Armstrong linux (Linux4sam) 的 SAM9G25 EK 板上工作。我的脚本正在创建 linux 版本“2.6.39+”，而这个“+”令人困惑（/lib/modules 文件夹等）。我想删除它。我发现只有两个文件 .uImage.cmd 和 kernel.release 包含这个字符串，但都生成了。

这个字符串是在哪里创建的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T09:24:16.640

你有一个`.config`？在那里查找分配给 的值`CONFIG_LOCALVERSION`。

要在内核版本中没有指定本地版本，请`CONFIG_LOCALVERSION`通过以`#`.

默认值为：

```
#CONFIG_LOCALVERSION is not set 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:32:50.203

在这种情况下，主要原因是：scripts/setlocalversion line >170：

```
# append a plus sign if the repository is not in a clean
# annotated or signed tagged state (as git describe only
# looks at signed or annotated tags - git tag -a/-s) and
# LOCALVERSION= is not specified
if test "${LOCALVERSION+set}" != "set"; then
    scm=$(scm_version --short)
    res="$res${scm:++}"
fi 
```

我把这部分注释掉了。

# facebook - 付款报告中的 payment_detail 为空

> ID：12910972
> 
> 赞同：1
> 
> 时间：2012-10-16T08:56:52.823
> 
> 标签：facebook, payment

通过[https://paymentreports.facebook.com](https://paymentreports.facebook.com) ( [https://developers.facebook.com/docs/payments/developer_reports_api/](https://developers.facebook.com/docs/payments/developer_reports_api/) ) 请求详细付款报告时，我总是有一个空的 payment_detail：

SH,COMPANYID,payment_detail CH,app_id,payment_type,product_type,payment_id,time_completed,recv_currency,recv_amount,fx_batch_id,fx_rate,settle_currency,reference_id,tax_country SF,0

我遗漏了重要数据的请求 URL：[https ://paymentreports.facebook.com/COMPANYID/report?date=2012-09-30&type=detail&access_token=ACCESSTOKEN](https://paymentreports.facebook.com/COMPANYID/report?date=2012-09-30&type=detail&access_token=ACCESSTOKEN)

如何让 payment_detail 包含数据？（credits_detail 有数据）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-13T11:11:33.453

这里的问题是当时还没有使用 Facebook 本地货币。这些报告是针对 Facebook Credits 的，因此该部分是空的。

# java - 眨眼吞咽异常

> ID：12910973
> 
> 赞同：2
> 
> 时间：2012-10-16T08:56:58.950
> 
> 标签：java, jaxb, apache-wink

我正在尝试对 jaxb/jackson 的 wink 中的枚举类型进行一些验证。

我有一个枚举，它需要一些值。我想允许一个空值，即不在 xml/json 中设置它，但我也想检查无效值并给出错误。

我发现默认情况下，如果我提供不在枚举中的值，则 jaxb/wink 只会返回 null，因此我尝试使用 setter 来验证输入。使用 Level.valueOf(newLevel) 尝试将提供的字符串转换为值会引发异常并给我一个堆栈跟踪和 http 错误。这没关系，但我真正想要的是自定义异常，以便我可以对错误响应的编组进行一些控制。我试着扔了一个，但它被（我认为）眨眼吞噬了。

```
enum Level {BASIC, ADVANCED};

@XmlAttribute
public void setLevel(String newLevel) throws MyException {
    if (newNodeLevel != null) {
        try {
            this.level = Level.valueOf(newLevel);
        } catch (IllegalArgumentException e) {
            throw new MyException("level invalid");
        }
   }
} 
```

除了使用 Throwable 而不是 Exception 之外，还有什么方法可以实现这一点吗？

# php - Magento 导入：min_sale_qty 被忽略

> ID：12910974
> 
> 赞同：2
> 
> 时间：2012-10-16T08:57:02.640
> 
> 标签：php, magento, import, magento-1.7

我使用[AvS_FastSimpleImport](https://github.com/avstudnitz/AvS_FastSimpleImport)模块将产品导入 Magento。到目前为止，它适用于很多属性/配置。问题是某些属性像`min_sale_qty`or`use_config_min_sale_qty`被简单地忽略并且根本没有效果。我设置`use_config_min_sale_qty`了，`0`所以我认为它应该可以工作。

**更新**

如果我设置`use_config_min_sale_qty = 0`，它确实有效，`min_sale_qty = 4`修复整个导入。但我只有一些产品`min_sale_qty > 1`。看起来它使用整个导入的第一个值。

示例产品：

```
Array
(
    [sku] => 5409
    [_type] => simple
    [_attribute_set] => Default
    [_product_websites] => base
    [name] => Test
    [price] => 3
    [qty] => 1
    [is_in_stock] => 1
    [min_sale_qty] => 4
    [use_config_min_sale_qty] => 0
    (... some more)
) 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:16:51.587

这是导入模块（Magento Core）中的一个错误。

\app\code\core\Mage\ImportExport\Model\Import\Entity\Product.php，第 1609 行

Mage_ImportExport_Model_Import_Entity_Product::_saveStockItem()

$row 未初始化：

```
$row = array();
$row['product_id'] = $this->_newSku[$rowData[self::COL_SKU]]['entity_id'];
$row['stock_id'] = 1; 
```

此错误已在 Magento2 中[修复，](https://github.com/magento/magento2/blob/master/app/code/core/Mage/ImportExport/Model/Import/Entity/Product.php#L1401)但在 1.7.0.2 社区版本中未修复。

# safari - Omniture 在 Safari 浏览器上发送双重指标

> ID：12910978
> 
> 赞同：5
> 
> 时间：2012-10-16T08:57:10.623
> 
> 标签：safari, analytics, adobe-analytics

我使用omniture 分析来跟踪在网站上购物时何时查看产品。这些报告在 FF、Chrome、IE 浏览器中正常发送，但不知何故，当使用 Safari 时，报告会发送两次。

Safari 没有拨打两个电话，可能发生的情况是它拨打了一个电话，而该电话正在响应重定向，然后再拨打第二个电话。可能是由于某种原因，Omniture 将呼叫记录为两个条目，但这很愚蠢。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T23:13:39.543

确保您已将 Safari 设置为接受 cookie，默认情况下它将阻止第三方 cookie。

如果您使用第三方 cookie 并且它们被阻止，那么您可以在每个页面视图上看到两个调用。第一个将具有 302 状态，第二个将具有 200 状态。当 SiteCatalyst 加载时，它会检查其中包含唯一访问者 ID 的 cookie。如果访问者以前从未访问过该站点，或者他们已经清除了 cookie，则不会找到访问者 ID cookie。在这种情况下，对 SiteCatalyst 的调用会被重定向回来，这次使用的是 Omniture 服务器生成的访问者 ID 值。

如果浏览器接受 cookie，则该访问者 ID 值将写入一个（命名为`s_vi`），并在 SiteCatalyst 将记录的每个附加页面视图或其他自定义操作中从那里引用。

如果无法设置该 cookie，则可能会在每个页面视图上看到多个调用（一个 302 和一个 200）。但别担心，当这种情况发生时，您不会因为多次页面浏览而受到打击。您的分析数据不会因此而被夸大。

# java - AtomicLong 与 Long 性能

> ID：12910981
> 
> 赞同：4
> 
> 时间：2012-10-16T08:57:25.610
> 
> 标签：java, performance, atomic

上下文：我正在使用 netty 并定义了一个处理程序来计算和分类传入/传出流量。为此，我使用了一个如下所示的 enumMap：

```
EnumMap<MyEnum, AtomicLong> 
```

但是现在我意识到只有一个线程在操纵这些值（以前我认为它不止一个，netty 似乎保证每个通道一个线程）。这意味着 AtomicLong 不是必需的。**但是，由于 AtomicLong 是原始 long 的包装器，而 Long 是不可变类型，我有理由认为仅将 AtomicLong 交换为 Long 性能会降低。**

**对此有什么想法吗？**

我可能应该做的是移动到 int 并删除整个 enumMap 的东西..

BR塞巴斯蒂安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:59:47.263

假设你只有一个线程：

如果避免创建对象，AtomicLong 可以比使用 Long 更快。

再次快速是使用`long[]`或不使用对象与像[TObjectLongHashMap 这样的集合](http://trove4j.sourceforge.net/javadocs/gnu/trove/map/hash/TObjectLongHashMap.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:00:14.503

我无法想象给定的：

> 为了对传入/传出流量进行计数和分类

从`AtomicLong`到`Long`（或`long`）的转换将对您的表现产生任何影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-23T04:20:49.070

我们使用 LongAdder 来处理同样的事情；）

# javascript - facebook javascript 提要/发送 onclick

> ID：12910984
> 
> 赞同：-1
> 
> 时间：2012-10-16T08:57:29.280
> 
> 标签：javascript, onclick, facebook-javascript-sdk

我有以下来自 facebook 的 js，它只是根据方法设置加载提要或发送对话框。

它在页面加载时加载它。它可以在点击时加载吗？意思是用户想要它而不是页面加载时？

示例js

```
<script src="http://connect.facebook.net/en_US/all.js"></script>
<div id="fb-root"></div>
<script>
  // assume we are already logged in
  FB.init({appId: '123456', xfbml: true, cookie: true});

  FB.ui({
      method: 'feed',
      name: 'People Argue Just to Win',
      link: 'http://www.nytimes.com/2011/06/15/arts/people-argue-just-to-win-scholars-assert.html',
      });
 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:04:46.747

当然，为什么不呢！在函数内提供 API 并在单击锚标记时执行函数。

这是演示：http: [//jsfiddle.net/kayen/N9jhL/](http://jsfiddle.net/kayen/N9jhL/)

# pdf - 我想检查 pdf 文档是否包含 web 应用程序 c# 中的交叉引用流或表。如何检查？

> ID：12910986
> 
> 赞同：3
> 
> 时间：2012-10-16T08:57:37.410
> 
> 标签：pdf, cross-reference

我有一个 c# web 应用程序，我想检查 pdf 文档是否包含交叉引用流。如果它包含交叉引用流，则将其转换为引用表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:37:58.053

检测相当容易。从文件末尾搜索“%%EOF”；正确的 PDF 文件实际上以 '%%EOF' 行结尾，不太正确的文件可能在该标记后面有一些垃圾字节。该标记线之前的行包含最后一个交叉引用的位置（参见ISO-32000-1:2008第 7.5.5 节[的 Adob​​e 副本）。](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)转到此处注明的位置。

如果在该位置找到 xref 关键字，则 PDF 有一个交叉引用表。如果您改为找到 PDF 流对象（同上第 7.5.8 节），则 PDF 具有交叉引用流。如果您在那里都没有找到，那么该文件的某些内容是可疑的。

但是，转换很困难，特别是如果 PDF 还使用只能与交叉引用流一起使用的对象流。您可能希望使用 iText(Sharp) 之类的库来阅读 PDF 并在启用较少压缩的情况下再次导出。

此外，如果 PDF 已签名，则无法在不破坏签名的情况下进行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T08:48:51.187

从交叉引用流转换为可以解析的内容时要注意的一件事是交叉引用流允许新类型的引用条目。沿着**"uncompressed"**和**"free"**您现在已经将**"compressed"**作为新的引用类型。

此条目不能直接 1:1 转换为正常的交叉引用表。交叉引用流内的**“压缩”**引用条目指向所谓的**“对象流”**。后者包含多个索引对象。外部参照流中的“压缩”条目然后命名对象流和索引。然后使用对象流中的第一行将索引解析为对象流中的字节偏移量。

如果您仍然对该主题感兴趣，我建议您查看**“3.4.7 Cross-Reference Streams”**一章。**尤其是“与不支持 PDF 1.5 的应用程序的兼容性**”段落可以提供帮助。它处理所谓的**“混合引用”**，以某种方式执行您想要的操作。

现在，我们或多或少知道如何将外部参照流转换为外部参照表，让我们继续检测外部参照流。

*   **您可以使用/Type/XRef**搜索流（两个关键字之间有可变空格）。
*   此外，如果您有任何**/Type/ObjStm**流，您可以推断必须存在外部参照流，因为只有外部参照流可以指向对象流；）（请参阅上文以获取解释）。
*   最后但并非最不重要的一点是，如果您解析的文档的**PDF 版本****小于 1.5**，您可以确定没有包含外部参照流。这在很大程度上取决于创建文档的 PDF 创作工具。有些人坚持参考有些人不坚持。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T19:13:35.383

这是一种 hack，但您可以使用以下代码来检测 PDF 是否包含交叉引用流。

该代码使用[Docotic.Pdf 库](https://bitmiracle.com/pdf-library/)。

```
public static bool ContainsCrossReferenceStreams(string fileName)
{
    using (PdfDocument document = new PdfDocument(fileName))
    {
        return document.SaveOptions.UseObjectStreams;
    }
} 
```

当库打开 PDF 时，它设置`SaveOptions.UseObjectStreams`为`true`源文档是否使用交叉引用流。否则属性返回`false`。

免责声明：我为图书馆的供应商工作。

# jquery - 将从每个函数中提取的文本存储到变量中的正确代码是什么？

> ID：12910989
> 
> 赞同：0
> 
> 时间：2012-10-16T08:57:44.393
> 
> 标签：jquery

我知道这不是正确的代码，但是我想问如何使用正确的代码实现背后的想法？

我打算将每个列表项中的所有文本存储到变量中

```
var date = $('.selector1 ul li')each().text()
var time = $('.selector2 ul li')each().text()

$(selector3).html("<td>date</td><td>time</td>"); 
```

是的，我正在尝试将其转换为表格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:03:01.507

下面的代码不是一个完整的答案，但它应该有所帮助。其余的取决于你的逻辑。

```
var date;

$('li').each(function(index) {
    date = $(this).text();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:03:26.627

假设您要连接这些值，这可能就是您要查找的内容：

```
var date = $('.selector1 ul li').map(function() {
    return $(this).text();
}).get().join(', '); 
```

[演示](http://jsfiddle.net/VWYej/)

# javascript - 嵌套在 .each 中的 $.get

> ID：12910992
> 
> 赞同：1
> 
> 时间：2012-10-16T08:57:56.437
> 
> 标签：javascript, jquery

尝试对 jQuery 循环函数 (.each) 实现延迟时遇到问题。
问题是：我有一个包含多列的行列表，用户需要在其中输入他的数据。
现在，当用户单击按钮保存时，需要一一检索所有行并将其数据插入数据库。

第一个 get 插入数据并返回最后插入的 id。然后在第二个 $.get 中，最后插入的 id 用作历史条目。

下面的代码可以正常工作，唯一的问题是整个过程在嵌套 $.get 开始之前完成。所以第二个 $.get 插入的所有数据都是一样的。

函数 getIdNumber 从 id 中删除不需要的字符（例如从 row_1 到 1）

```
$('.data_row').each(function(i){
    id = getIdNumber(this.id);

    setTimeout(function() {

    date = $('#dat_'+id).val();
    customer = $('#cus_'+id).val();
    amount_paid = $('#amt_'+id).val();
    remarks = $('#rem_'+id).val();
    account = $('#acc_'+id).val();

       url = "bin/_receipts.php?addreceipts=&date="+date+"&customer="+customer+"&amountpaid="+amount_paid+"&remarks="+remarks+"&paidaccount=" + account;

       $.get(url, function(d){

          url2 = "bin/_ledgerHandler.php?addaudittrail=&user="+escape("<? echo $_SESSION["user_id"]; ?>")+"&trantype="+escape("Receipt - "+d+"")+"&val="+escape(amount_paid)+"&category=receipts";
          $.get(url2, function(){  

          });                    

       });         

    }, 1000*i);

 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:03:36.723

对于您的第二个 $.get，您需要将第二个 $.get 所需的所有内容都包含在第一个 get 的数据结果中，而不是使用您在第一次 get 之前计算的值。这样您就可以保证第二个 $.get 的所有数据都与第一个的结果相关。

换句话说，不要在你的第二个 $.get 中使用 amount_paid 的值，而是在你的数据中返回任何需要的值以及最后一个插入 id。

# android - android development - 在我的设备上同时拥有当前发布版本和开发版本的智能方法

> ID：12910998
> 
> 赞同：0
> 
> 时间：2012-10-16T08:58:02.650
> 
> 标签：android

我想这对于像我这样的新 android 开发人员来说可能是一个常见问题，所以我想问它，即使这没什么大不了的。我想在我的设备上同时拥有应用程序的当前发布的稳定版本和正在开发的版本。然而，当我想安装两者时，我得到了

```
Re-installation failed due to different application signatures.
You must perform a full uninstall of the application. 
```

我从技术上理解它，但我想知道如何有一个简单的方法来解决这个问题，这样我就可以在我的手机上同时拥有这两个应用程序。我暂时可以更改包名称，但我希望有更直接的方法来完成它。

谢谢

**更新**

“Marc Bernstein”在以下帖子中给出的解决方案 - 感谢 Algo 发布指向它的链接

[如何更改 Android 应用程序的包名称](https://stackoverflow.com/questions/4025369/how-to-change-package-name-of-an-android-application/9171773#9171773)

有一种方法可以在 Eclipse 中轻松更改包名称。右键单击您的项目，向下滚动到 Android 工具，然后单击重命名应用程序包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:05:02.670

只需更改已发布和开发版本应用程序的包名称。更改包名真的很简单很容易，按照那个帖子

[https://stackoverflow.com/a/9171773/185022](https://stackoverflow.com/a/9171773/185022)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:15:51.117

“已发布”版本应使用发布密钥库进行签名。

“开发”版本应使用调试密钥库进行签名。

在安装时，Android 会抱怨这两个应用程序（具有相同的包名）具有**不同的签名**，并且不会安装最新的（`Re-installation failed due to different application signatures.`）。

要解决此（**正常**）行为，请在开发时**更改应用程序的包名称**（例如：com.example.myapp-dev）。