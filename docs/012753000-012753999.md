# StackOverflow 问答 12753000-12753999

# winforms - ClickOnce - 无法下载应用程序

> ID：12753006
> 
> 赞同：1
> 
> 时间：2012-10-05T19:41:41.343
> 
> 标签：winforms, deployment, clickonce

我将应用程序部署到 ftp 发布文件夹。并希望用户从 ftp 位置下载文件，但他们看到的是。这是什么原因，我该如何解决？ ![单击一次下载问题](../Images/2ea6d0502bde635a9e90fc66898c22d1.png)

# php - drupal：表单 API，根据输入动态隐藏或显示字段

> ID：12753010
> 
> 赞同：13
> 
> 时间：2012-10-05T19:42:07.613
> 
> 标签：php, drupal, drupal-7, drupal-fapi, drupal-forms

我正在构建一个表单模块。早期的领域之一是一组单选按钮。默认情况下，第一个按钮被选中。接下来我会有一系列的选择框。一个需要可见，其他则不可见。然后当用户选择不同的单选按钮时，我希望显示或隐藏不同的选择框。如何默认隐藏字段和标签，然后根据选择的单选按钮（或其他选择框选项）显示它？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-06T01:48:15.417

您可以使用该`#states`属性来实现这一点。该`#states`属性可以应用于所有表单 API 元素。

这是带有示例的[文档链接。](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7#states)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-06-24T05:30:51.877

#states 的简单用法示例：仅当名称为“type”的另一个字段具有值“sell”时才显示名称为“item”的选择字段

```
$form['item'] = array( 
        '#title' => t('Task Item'),
        '#type' => 'select',
        '#states' => array(
            // Only show this field when the value of type is sell.
            'visible' => array(
                ':input[name="type"]' => array('value' => 'sell'),
            ),
        ),
    ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-20T06:16:57.947

您还可以使用“条件字段”模块。这是链接：[https](https://drupal.org/project/conditional_fields) ://drupal.org/project/conditional_fields 它在创建内容类型时提供了一个“管理依赖项”选项卡，您可以在其中选择当字段具有特定值时哪些字段可见。

# c - 使用 Eclipse CDT 在 PATH 中找不到程序“gcc”

> ID：12753011
> 
> 赞同：5
> 
> 时间：2012-10-05T19:42:16.647
> 
> 标签：c, eclipse, gcc, eclipse-cdt

我似乎无法弄清楚如何使用 Eclipse CDT。

我在 Mac OS X 上，并试图在 C 中打印“Hello World”，但出现错误：

> 在 PATH 中找不到程序“gcc”。

如何在 Eclipse 中使用 C？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:12:59.013

我有同样的问题。这可能是因为您的计算机上没有安装 GCC 编译器。

在 OSX 上，您只需打开终端并检查`which gcc`. 如果它没有返回路径，[则从此处安装 GCC](https://github.com/kennethreitz/osx-gcc-installer)。

安装后，此命令应返回路径：

![在 OSX 终端中寻找 GCC](../Images/a45e2e942d0e9304c6e70134c9c08909.png)

我只需要重新启动 Eclipse，然后一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:45:49.783

你有没有在你的机器上安装过[XCode](https://developer.apple.com/xcode/)

**更新** 我建议按照[本教程](http://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/)安装 brew。如果不需要，可以跳过 ruby​​ 部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T10:47:45.420

这就是我摆脱它的方式。

安装 MinGW。选择基本设置中的所有文件并选择应用更改。选择新的 C++ 项目 您将能够在工具链部分看到“MinGW GCC”，选择相同并创建项目。

# mysql - 过程参数是 int，但是当使用双精度调用过程时，它会编译

> ID：12753012
> 
> 赞同：0
> 
> 时间：2012-10-05T19:42:28.567
> 
> 标签：mysql, variable-assignment

正如您在下面看到的，我有两个用于该过程的参数。我希望它们都是整数。但是，当我用非整数测试程序时，它仍然编译！为什么？

```
 create procedure int_arith( p_1 int, p_2 int)
 begin
  select coalesce(p_1 + p_2, 'Null entry') addition;
 end;
 #

 call test.a03_int_arith(10,3.3)\G 
```

结果是：

```
 addition: 13 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:45:07.680

在某些语言中将 double 提升为 int 是有效的（请参阅类型转换）。正在发生的是解释器（无论是编译器）在这个 3.3 中看到双精度，并将其截断为整数（隐式地将双精度转换为 int）。

# ios - 是否有任何框架可以让 jquery 在 ios 的 mousevents 上做正确的事情？

> ID：12753013
> 
> 赞同：0
> 
> 时间：2012-10-05T19:42:29.317
> 
> 标签：ios, jquery

使用 jquery 和 ios 处理鼠标事件时，需要向每个传统的 ,`touchstart`等鼠标绑定添加额外的事件类型。除此之外，还需要额外的样板代码来获取正确的 eventObject 值。`touchend``mousedown``mouseup``touchmove`

IE：

```
e.preventDefault();
var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0]; 
```

有没有什么框架可以让我只使用传统的桌面鼠标事件，并让 jquery 在 ios safari 中做正确的事情？

# jquery - 什么是 jQuery 脚本，用于选择 divs 类中提到的任何数字，然后向该数字添加一个类？

> ID：12753014
> 
> 赞同：-1
> 
> 时间：2012-10-05T19:42:30.077
> 
> 标签：jquery, css

如果一个 div 有一个类“座右铭”，并且在该 div 中它说，“庆祝 24 年的业务！” 我想要一个可以找到该 div 中提到的任何数字的脚本（因为它可能会在明年更改为 25，等等，因此我不想具体获取数字），我希望它添加一个带有类的跨度。可能的？

原因是它从设置中的 WordPress 'description' 中提取了这个文本，所以我不能直接将数字放在一个跨度中。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:51:56.060

你可以用一些字符串操作来搞乱它：

```
var motto = $('.motto'),
    num = motto.text().match(/\d+/), // regex matching digits
    text = motto.text().replace(num, '<span class="num">'+num+'</span>');

motto.html(text); 
```

演示：http: [//jsbin.com/uxuhuv/1/edit](http://jsbin.com/uxuhuv/1/edit)

# c# - 除非我在 MouseMove 上设置光标，否则光标会一直重置为默认值

> ID：12753018
> 
> 赞同：0
> 
> 时间：2012-10-05T19:43:14.900
> 
> 标签：c#, winforms, cursor, mouseevent

有一个简单的表单，在一个位置有一个 PictureBox。我想在输入该控件时将光标更改为十字光标，并在它离开时将其更改回来。

```
private void Canvas_MouseEnter(object sender, EventArgs e)
    {
        this.Canvas.Cursor = Cursors.Cross;
    }

    private void Canvas_MouseLeave(object sender, EventArgs e)
    {
                    this.Canvas.Cursor = Cursors.Default;
    } 
```

这行不通。如果我仔细观察，我可以看到它在 MouseEnter 上快速变化，但它会立即翻转回默认光标。我必须添加`"this.Canvas.Cursor = Cursors.Cross;"`到 MouseMove 事件才能使其工作，但是我可以不断看到它闪烁回默认光标。

是什么赋予了？这是我整个应用程序中唯一与光标相关的代码，是什么导致它在每次移动鼠标时重置为默认光标？

谢谢。

编辑：我是个白痴。我在这个小应用程序上与之合作的人有一些光标代码隐藏在导致问题的其他地方。多谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:49:11.467

为什么不为图片框设置光标？

```
yourPictureBox.Cursor = Cursors.Cross; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:48:14.510

我从头开始尝试了一个新项目（只有 mouseenter/leave 处理程序，没有别的），它可以工作。

可能是您的应用程序中的其他内容？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T19:51:19.157

```
public Form1()
{
  InitializeComponent();
  pictureBox1.MouseHover += new EventHandler(PictureBox1_MouseHover);
}

void pictureBox1_MouseHover(object sender, EventArgs e)
{
  this.PictureBox1.Cursor = Cursors.Cross;
} 
```

您想使用`MouseHover`事件处理程序。

# markdown - 如何在 markdown 中转义商标或版权符号？

> ID：12753022
> 
> 赞同：4
> 
> 时间：2012-10-05T19:43:24.853
> 
> 标签：markdown

对于降价，我想说的是：

```
The parser consumes a .tm file. 
```

但是（在我的 GitHub readme.md markdown 文件中）以及在我的 mac 上使用 Markdown Pro，markdown 想要使 tm 成为上标的 TM 商标符号。我已经在不同的位置尝试了反斜杠 .\tm、.\t\m、.(tm) 等，但我最终得到的是输出文本中的斜杠。有谁知道这应该如何工作？

当我输入这个时，我可以看到 stackoverflow 正在使用降价，我没有得到那种行为！嗯？洞察力赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-09-26T08:39:13.297

对于任何来到这里想知道如何在他们的 github 风格的降价（或 github README.me）中制作 TM（商标）符号的人，它就像这样简单：

```
:tm: 
```

[![在此处输入图像描述](../Images/2c6b7279d4046cf541beb92c0a536902.png)](https://i.stack.imgur.com/AS0EY.png)

我从[这个综合列表中找到它](https://gist.github.com/rxaviers/7360908)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T17:36:50.463

问题解决了。原来它与降价无关。Mac OS X 具有自动生成 TM 符号的文本替换功能。编辑->替换->文本替换

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T19:45:56.787

反引号怎么办？

```
The parser consumes a `.tm` file. 
```

# api - 我想使用 Twitter 流 API，服务器需要多强大才能处理它？

> ID：12753023
> 
> 赞同：0
> 
> 时间：2012-10-05T19:43:25.700
> 
> 标签：api, twitter, streaming

我目前有一个 cron 作业，它使用每分钟运行的 Twitter 搜索 API，但这将我限制为每个请求只有 100 个结果，我希望开始使用流 API，但担心这会进一步增加服务器负载（我目前使用共享主机，我的 cron 工作已经引发了一些危险信号）。

我的问题是，为了在没有任何积压数据的情况下充分捕获流式 API 数据，我应该获得的服务器的最低规格是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T02:17:24.073

我使用过并且也看到过其他人这样做的一种设计是使用消息队列。通过专用于该目的的线程将推文加载到队列中。然后，您可以在队列的另一端有另一个线程读取推文并根据需要进行处理。这是我正在谈论的一个很好的例子：

[http://www.laurentluce.com/posts/python-twitter-statistics-and-the-2012-french-presidential-election/](http://www.laurentluce.com/posts/python-twitter-statistics-and-the-2012-french-presidential-election/)

没有足够的分析，没有人可以告诉你，你的规格应该是什么。正如对您问题的评论之一所建议的那样，您将得到的最接近的答案是尝试一下。一般来说，对你想做的事情做一个快速的原型，看看效果是什么，并根据需要进行测量。同样，这里有许多架构原则在起作用，所以有人告诉你应该做什么甚至是不明智的。

乔

# ruby-on-rails - gbarcode 问题 - 未生成条形码

> ID：12753024
> 
> 赞同：0
> 
> 时间：2012-10-05T19:43:36.460
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在 Ubuntu 12.10 上使用带有 ruby​​ 1.8.7 和 rails 3.0.7 的 gbarcode

在我的开发服务器中有 gbarcode 版本 0.98.20 可以工作并生成条形码。但是我的生产服务器上有 0.98.16 版本，它给出了以下错误：

```
ActionController::RoutingError (No route matches "/images/barcodes/ATL-00566.png") 
```

现在我知道这听起来像是一个路由问题，但事实并非如此。问题是 rails 正在 images/barcodes 目录中寻找条形码 png 它不存在，因为版本 0.98.16 没有生成它。

我尝试在我的生产系统上安装 0.98.20，但出现以下错误：

```
extconf.rb:10: GNU Barcode is no longer bundled with the gbarcode gem. Please install GNU barcode before installing this gem (Exception) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T20:13:57.693

问题出在 Windows 中的 ImageMagick 上。gbarcode 0.98.16 与 0.98.20 一样有效。

# sql - 如何获取组名的组成员列表

> ID：12753032
> 
> 赞同：0
> 
> 时间：2012-10-05T19:44:21.200
> 
> 标签：sql, oracle

我有`GROUPs`和`USERs`。 `GROUPs`可以包含`USERs`和其他`GROUPs`。

数据存储在一个表中，`NODES`如下所示，其中`PARENT_NDE_ID`是组/用户的包含父级。用户总是有一个作为组 ID 的父级。如果组没有父组，则父组 ID 和组 ID 相等。

```
NODES
-----
NDE_ID (int)
PARENT_NDE_ID (int)
DESCRIPTION (string, any name)
NDE_TYPE (string, either 'USER' or 'GROUP') 
```

我的问题是，我想获得一个组的成员列表。

我想生产：

```
GROUP NAME | MEMBER NAME
---
Group A | Group B
Group A | Bob
Group B | Dave
Group C | Mike 
```

或者，一个接受组名并为我提供可以为每个组名手动运行的成员列表的构建查询，例如：

```
select NODES.DESCRIPTION, NODES.NDE_TYPE 
where PARENT_NDE_ID = (the id associated with the provided group name string) 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:21:26.720

您需要 CONNECT BY - 阅读此 URL：[Oracle 文档](http://docs.oracle.com/cd/B19306_01/server.102/b14200/queries003.htm)

# linux - 将 SIGINT 从键盘发送到 bash 中的管道命令

> ID：12753035
> 
> 赞同：13
> 
> 时间：2012-10-05T19:44:30.640
> 
> 标签：linux, bash, signals

如果在 bash 中我`a | b | c | d`在命令行上运行然后按`^C`，哪个进程会收到信号？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-05T19:53:40.100

简而言之，他们都这样做。

设置管道时，shell 会创建一个*[进程组](http://www.informit.com/articles/article.aspx?p=366888&seqNum=8)*。`^C`被内核的线路规程解释为用户请求中断当前在前台运行的进程组。向`SIGINT`进程组发送信号会自动将信号传递给组中的所有进程。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-09-02T10:22:11.827

我更喜欢实验：

```
#!/bin/bash
# FILE /tmp/bla.sh
# trap ctrl-c and call ctrl_c()
trap ctrl_c INT

MY_ID=$1 # Identifier for messages

function ctrl_c() {
    echo >&2 "GOODBYE $MY_ID"
    exit
}

# This will continue until interrupted, e.g. if the input/output get closed
cat
# If we somehow got to the end
echo >&2 "grace $MY_ID" 
```

链接它们，运行和破坏它们

```
nitz@mars:~$ /tmp/bla.sh 1 | /tmp/bla.sh 2
^CGOODBYE 2
GOODBYE 1
0 
```

如您所见，两次执行都收到了中断信号，这意味着它们都被杀死了。此外，他们输出被杀的顺序是随机的，例如：

```
nitz@mars:~$ /tmp/bla.sh 1 | /tmp/bla.sh 2 | /tmp/bla.sh 3 | /tmp/bla.sh 4
^CGOODBYE 2
GOODBYE 4
GOODBYE 1
GOODBYE 3 
```

# django - 使用 send_mail 方法时 Djrill 抛出“TypeError”

> ID：12753037
> 
> 赞同：0
> 
> 时间：2012-10-05T19:44:33.760
> 
> 标签：django

我目前正在尝试将 mandrill 集成到这个基于 Django 的电子邮件网站中。Djrill 是 Django 的推荐包，它代替默认的 SMTP/电子邮件后端，将电子邮件传递到 Mandrill 帐户。

当我尝试通过运行以下命令来测试这个新后端是否正常工作时：

```
send_mail('Test email', body, 'noreply@*********.com', [user.email], fail_silently=False) 
```

它引发以下错误： http: [//pastebin.ca/2239978](http://pastebin.ca/2239978)

谁能指出我的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:54:17.090

**更新：**

正如@DavidRobinson 在评论中提到的那样，您没有从 mandrill API 身份验证调用中获得成功的响应。您应该仔细检查您的 API 密钥。

如果正确，请尝试使用 curl 发帖`{"key": <your api key>, "email": <your from email>}`，`MANDRILL_API_URL + "/users/verify-sender.json"`看看是否获得 200。

像这样的东西：

```
curl -d key=1234567890 -d email=noreply@mydomain.com http://mandrill.whatever.com/user/verify-sender.json 
```

**原答案：**

Djrill 中还有一个问题会阻止有用的错误消息传播。堆栈跟踪的最后一行是问题所在。

`open`这是从[源代码](https://github.com/brack3t/Djrill/blob/master/djrill/mail/backends/djrill.py)中获取的整个方法：

```
def open(self, sender):
    """
    """
    self.connection = None

    valid_sender = requests.post(
        self.api_verify, data={"key": self.api_key, "email": sender})

    if valid_sender.status_code == 200:
        data = json.loads(valid_sender.content)
        if data["is_enabled"]:
            self.connection = True
            return True
    else:
        if not self.fail_silently:
            raise 
```

看看它是如何说`raise`没有异常论点的？该语法只允许在`except`块内使用，并引发当前正在处理的异常。`except`它在块外不起作用。

[Djrill 中的一个未解决问题](https://github.com/brack3t/Djrill/issues/1)提到了发送失败并链接了一个据称可以修复它的分叉。我怀疑 Djrill 没有得到很好的支持，你可能会完全尝试那个 fork 或其他解决方案。

# php - 从 PHP 中的多个数组中打印一个值

> ID：12753041
> 
> 赞同：1
> 
> 时间：2012-10-05T19:44:55.903
> 
> 标签：php, arrays

如何从 PHP 中的多个数组中打印一个值？

例如，这是我拥有的结构，我想`filepath`从这些数组中打印出来，很明显我们有两个数组，但在我的情况下它是动态的。如何`filepath`从未知数量的数组中打印？

```
[field_pic] => Array
    (
        [0] => Array
            (
                [fid] => 29
                [uid] => 1
                [filename] => 011.jpg
                [filepath] => sites/default/files/011.jpg
                [filemime] => image/jpeg
                [filesize] => 154608
                [status] => 1
                [timestamp] => 1349463183
                [list] => 1
                [data] => 
            )

        [1] => Array
            (
                [fid] => 31
                [uid] => 1
                [filename] => 019.jpg
                [filepath] => sites/default/files/019.jpg
                [filemime] => image/jpeg
                [filesize] => 158635
                [status] => 1
                [timestamp] => 1349463188
                [list] => 1
                [data] => 
            )
    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:47:30.907

在其自己的行上输出每个文件路径

```
foreach( $field_pics as $field_pic )
{
    echo $field_pic['filepath'] . '<br />';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:47:10.303

```
foreach($field_pic as $pic)
   var_dump($pic["filepath"]); 
```

你想要这样吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T19:51:16.380

假设您的二维数组被称为`$main`以下应该实现您的目标：

```
#create an array to store the filenames
$filenames_array = array();

# this will loop through the first array
foreach($main as $subarray)
{
     # append the filename to the end of the array you created to store these names
     $filenames_array[] = $subarray['filename'];
}

var_dump($filenames_array); 
```

那应该可以解决这个问题。

PS这是你的作业吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T19:47:11.997

尝试：

```
for($i = count($field_pic) -1 ; $i >= 0 ; $i-- ){ //You have to substract 1 to the array length because it's of bound
    echo "filepath=" . $field_pic[$i]['filepath'];
} 
```

例子 ：

```
$arr = array(1,2,3) 
```

`Count($arr) = 3;` 但是`$array[3] = undefined;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T21:11:18.043

真的感谢大家，这就是我修复它的方法：

```
for($i = count($node->field_pic) ; $i >= 0 ; $i-- ){
    echo $node->field_pic[$i]['filepath'];
} 
```

# list - 在 Erlang 中，如何从给定 id 值的记录列表中返回整条记录？

> ID：12753045
> 
> 赞同：5
> 
> 时间：2012-10-05T19:45:02.657
> 
> 标签：list, erlang, records

我在谷歌和以前的答案中看到了相关的问题和解决方案，但它们都让我感到困惑。

假设我有一个记录列表，每个记录都有一个 ID。说：

```
-record(blah, {id, data}).
 Record2#blah.id = 7
 L = [Record1, Record2, ... ] 
```

我正在寻找一个像 get_record(List, ID) 这样的函数，它将完整地返回相应的记录，例如：

```
22> get_record(L, 7).
{blah, id=7, data="ta da!"} 
```

非常感谢，

LRP

一世

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T20:03:07.497

在内部，记录是 的元组`{Name, v1, v2}`，因此您的示例记录看起来像`{blah, 7, data}`一个元组。

考虑到这一点，您可以使用该`lists:keyfind/3`函数在列表中查找记录：

```
lists:keyfind(7, #blah.id, L). 
```

这里的第一个参数是 ID 值，第二个参数是 ID 字段的元组索引，第三个参数是列表。

该`#Name.Field`语法允许您获取任何记录字段的字段索引。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T21:23:40.163

您也可以使用列表理解，例如

```
[R || R <- Records, R#blah.id == 7] 
```

这将为您提供列表中与 id 匹配的所有记录。

# python - 在同一个表中获取与父级相关的子元素

> ID：12753049
> 
> 赞同：0
> 
> 时间：2012-10-05T19:45:09.000
> 
> 标签：python, mysql, sqlalchemy

我有以下数据库架构

```
class posts(Base):
    __tablename__ = 'xposts'
    id = Column(Integer, primary_key=True) 

class Comments(Base):  
    __tablename__ = 'comments'
    id = Column(Integer, primary_key=True) 
    comment_parent_id=Column(Integer,unique=True)  
    #comment_id fetches comment of a comment ie the comment_parent_id
    comment_id=Column(Integer,default=None)
    comment_text=Column(String(200)) 
```

数据库中的值是

```
1   12  NULL    Hello First comment
2   NULL    12  First Sub comment 
```

我想使用 sqlalchemy 获取帖子的所有评论和子评论，并且到目前为止

```
qry=session.query(Comments).filter(Comments.comment_parent_id!=None)
print qry.count() 
```

有没有办法我可以在查询中获取评论的所有子评论，我在同一个表（评论）上尝试了外连接，它看起来很愚蠢并且失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:33:58.753

您在 sqlalchemy 查询中使用了 all() 函数，之后您可以使用 count 和 len 来查找数据库中的总行。因为这个查询提供了 2'd 列表结果。

```
qry=session.query(Comments).filter(Comments.comment_parent_id!=None).all()

len(qry) 
```

# html - 如何让 iframe 占据所有剩余空间

> ID：12753053
> 
> 赞同：1
> 
> 时间：2012-10-05T19:45:11.753
> 
> 标签：html, css, iframe, height

我有以下代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="res/favicon.ico" />
<title>My website</title>

<style type="text/css">
    .wrap {
    position:relative;
    margin:0 auto;
    width:900px;
    text-align:center;
}

#header, #footer {
    width:100%;
    float:left;
}

#footer {
    position:fixed;
    bottom:0;
    z-index:999999;
}
</style>

</head>
<body>
  <div id="header">
      <div class="wrap">
           <div class="logo">
                <h1>Header</h1>
           </div>
           <div>Menu goes here</div>
      </div>
 </div>

 <iframe src="http://www.cnn.com"></iframe>

  <div id="footer">
      <div class="wrap">
           <h2>Footer</h2>
      </div>
 </div>
</body>
</html> 
```

如何设置 iframe 以使其占据页眉和页脚之间的所有剩余宽度和高度？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T20:04:25.843

**解决了，需要一些javascript :)**

**现场示例：**
~~[http](http://simplestudio.rs/yard/framed/framed.html)~~ ://simplestudio.rs/yard/framed/framed.html （离线）

**代码：**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="res/favicon.ico" />
<title>My website</title>

<style type="text/css">

#framed {

    position: relative;
    width: 100%;
    height: 100%;   

}

.wrap {
    position:relative;
    margin:0 auto;
    width:900px;
    text-align:center;
}

#header, #footer {
    width:100%;
    float:left;
}

#footer {
    position:fixed;
    bottom:0;
    z-index:999999;
}
</style>

    <script>

        var resize = setInterval(function(){chng_iframe_height('framed','header','footer')},500);

        function chng_iframe_height(ifrid,hid,fid) {

            var eheight = window.innerHeight;
            var ifrobj = document.getElementById(ifrid); 
            var header = document.getElementById(hid); 
            var footer = document.getElementById(fid); 
            var header_height = getComputedStyle(header).height;
            var footer_height = getComputedStyle(footer).height;

            var reserved_height = parseInt(header_height) + parseInt(footer_height);

            ifrobj.style.height = eheight - reserved_height +"px";     

        }
    </script>

</head>
<body onload="chng_iframe_height('framed','header','footer');">
  <div id="header">
      <div class="wrap">
           <div class="logo">
                <h1>Header</h1>
           </div>
           <div>Menu goes here</div>
      </div>
 </div>

 <iframe src="http://www.cnn.com" id="framed"></iframe>

  <div id="footer">
      <div class="wrap">
           <h2>Footer</h2>
      </div>
 </div>
</body>
</html> 
```

基本上，我计算页眉和页脚渲染的高度，获取 window.innerHeight 并从这些数字中我知道页脚中的页眉之间还有多少像素，所以我将该值分配给 iframe 和 whoila 它可以工作......

我还设置了 setinterval 以每半秒调用一次该函数，因此如果您调整窗口大小，它几乎会立即更新 iframe 高度...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:52:29.173

尝试将一个类添加到您的 iframe 或当场设置它的样式，如下所示：

```
<iframe style="height:100%; width:100%;" src="http://www.cnn.com"></iframe> 
```

也试试这个：

```
<iframe height="100%" width="100%" src="http://www.cnn.com"></iframe> 
```

也不要忘记删除 body 标签上的填充/边距，以便页眉和页脚一直走：

```
body {
    margin:0;
    padding: 0;
} 
```

编辑：

如果这不起作用，您将不得不添加固定的宽度和高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T10:34:49.547

我使用了 .css() 和 $(window).height() 当你使用 $(window).height() 确保你的文档类型为 html

```
<script>
      var resize = setInterval(function(){chng_iframe_height('framed','header','footer')},500);

        function chng_iframe_height(ifrid,hid,fid) {

            var eheight = $(window).height();
            var ifrobj = document.getElementById(ifrid); 
            var header_height = $("#" + hid).css("height"); // getComputedStyle(header).height;
            var footer_height = $("#" + fid).css("height"); 

            var reserved_height = parseInt(header_height) + parseInt(footer_height);

            ifrobj.style.height = eheight - reserved_height +"px";     

        }
    </script> 
```

# javascript - 扩展或包装原生 Date 对象

> ID：12753057
> 
> 赞同：0
> 
> 时间：2012-10-05T19:45:27.433
> 
> 标签：javascript, date, coffeescript, prototype

我想围绕 Javascript 的本机`Date`对象类型编写一个包装器。对于该日期的每个本地属性，我只想将其代理为我班级拥有的日期。我正在使用咖啡脚本，除了更改日期对象的任何方法外，一切似乎都有效。我想知道我是否错误地设置了绑定。

这是我到目前为止所拥有的。如果您检查它编译成的内容（修改为与 JSLint 一起玩，但行为与我在浏览器中看到的相同），您可以看到它的行为：http: [//jsfiddle.net/XRgKM/1/](http://jsfiddle.net/XRgKM/1/)

```
class CP.MyDate

  @DateProperties: (name for name in Object.getOwnPropertyNames(window.Date.prototype) when _.isFunction(window.Date.prototype[name]))

  constructor: (@date = new Date()) ->
    # Hack to allow me to use the __bind function like the rest of the
    # 'coffeescript native' class functions:
    bnd = `__bind`
    for name in MyDate.DateProperties
      bnd(@[name], @)

    # Validate parameter:
    if not @date instanceof Date
      throw new Error("date must be a native date")

    # Copy date locally:
    @date = new Date(@date)

  test: () => alert("TEST")

  for name in @DateProperties
    MyDate.prototype[name] = () ->
      returnVal = @date[name].apply(@date, arguments)
      if returnVal isnt @date and returnVal instanceof Date
        returnVal = new MyDate(returnVal)
      return returnVal 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T00:06:24.600

*您在循环*问题中有标准闭包。你认为`name`这里的功能会是什么？

```
for name in @DateProperties
  MyDate.prototype[name] = () ->
    returnVal = @date[name].apply(@date, arguments)
    if returnVal isnt @date and returnVal instanceof Date
      returnVal = new MyDate(returnVal)
    return returnVal 
```

在函数内部，`name`将是的最后一个值，`@DateProperties`这与您想要的完全不同。您需要获取`name`函数的当前值而不是`name`引用。由于这是很常见的事情，CoffeeScript 有一个[`do`关键字](http://coffeescript.org/#loops)来帮助：

> 当使用 JavaScript 循环生成函数时，通常会插入一个闭包包装器，以确保循环变量是封闭的，并且所有生成的函数不只是共享最终值。CoffeeScript 提供了`do`关键字，它立即调用传递的函数，转发任何参数。

你想这样做：

```
for name in @DateProperties
  do (name) ->
    # Carry on as before... 
```

演示：http: [//jsfiddle.net/ambiguous/8gc7b/](http://jsfiddle.net/ambiguous/8gc7b/)

另请注意，jsfiddle 支持 CoffeeScript，请查看侧边栏中的*面板*下。

而且你不需要`DateProperties`像那样显示，你可以隐藏它：

```
class CP.MyDate

  DateProperties = (name for name in Object.getOwnPropertyNames(window.Date.prototype) when _.isFunction(window.Date.prototype[name])) 
```

并`DateProperties`在您的`CP.MyDate`班级内参考。

# entity-framework-5 - 使用 edmx 设计器将实体框架中的列合并为一列

> ID：12753058
> 
> 赞同：3
> 
> 时间：2012-10-05T19:45:33.963
> 
> 标签：entity-framework-5, two-columns, edmx-designer

我正在使用 EntityFramework 5 EDMX 设计器，并希望将一个人的名字和姓氏组合成实体上的单个字段值（例如名称）。

我认为在以前的版本中有一种方法可以做到这一点，但我没有看到任何可以做我需要做的事情。

这还有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-06T17:16:02.257

除非我不理解您的问题，否则我相信我已经使用类似于以下内容的部分类做到了这一点：

```
 public partial class person
    {
        public string name { 
            get
            {
                return firstname + " " + lastname;
            }
            set{ }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:19:11.503

我这样做的方式是通过`Computed Column`这里解释的：

[如何在 SQL Server 中使计算列可以为空](https://stackoverflow.com/q/9051760/114029)

如果您使用计算列，您将能够在 LINQ 查询中使用这样的列。例如：

```
var users = Database.Users.Where(u => u.FullName.ToLower().Contains("string")); 
```

您不会收到“ *LINQ to Entities 中不支持*”之类的错误，因为此属性实际上是模型对象的一部分。所有繁重的工作都发生在数据库端。

当然，您可以将`FullName`属性放在部分类中并使用它。

```
public string FullName 
{
    get { return string.Format("{0} {1}", FirstName, LastName); }
} 
```

在这种情况下，您必须先调用`.ToList()`( `Database.Users.ToList();`) 才能在 LINQ 查询中使用此属性。`.ToList()`将水合/带入你`Users`的记忆。这是不可取的！

* * *

您还可以尝试`FullName`此处描述的属性实现：[Entity Framework Code First Migrations 中的计算列](http://geekswithblogs.net/DavidPaquette/archive/2012/09/23/calculated-columns-in-entity-framework-code-first-migrations.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:20:30.023

不，这是不可能的。您可以[创建模型定义的函数](https://stackoverflow.com/questions/5612827/entity-framework-where-do-i-extend-the-csdl-msl/5613642#5613642)并在查询中使用它，但它仍然不是您实体的一部分。如果您的实体是只读的，您可以使用组合列创建数据库视图并将其映射而不是表 - 它还显示了将列组合成单个属性不是那么容易的主要原因。读取过程中的自动连接很容易，但自动分解以将正确的值保存到正确的列中很难并且容易出错。

如果您需要组合属性而不是查询，您可以简单地创建实体类的另一个部分并添加您自己的计算属性。如果您需要组合属性进行查询，请使用模型定义的函数。

# jquery - 如何设置jquery创建内容的图像宽度

> ID：12753059
> 
> 赞同：-1
> 
> 时间：2012-10-05T19:45:38.503
> 
> 标签：jquery, image, jquery-selectors, width, css

我在设置使用 jquery 自动创建的缩略图/图像的宽度时遇到了麻烦。

这是 jQuery 文件的代码：

```
 var span = document.createElement('span');
                a.appendChild(span); 
                                var img = document.createElement('img');
                img.setAttribute('src',(entry.thumbnail ? entry.thumbnail.hqDefault : ''));
                span.appendChild(img);
                var em = document.createElement('em');
                span.appendChild(em); 
```

您可以看到正在创建一个 img，我也可以在带有 firebug 的 html 上看到它，如下所示：

```
<a class="clip" style="cursor: pointer;">
<span>
<img src="http://i.ytimg.com/vi/iN9a273LvaQ/hqdefault.jpg">
<em></em>
</span>
</a> 
```

如何在不影响我网站上所有其他图像的情况下分配此图像的宽度？我可以在我的样式表中设置一个最大宽度，但这会改变我所有图像的大小，我不希望这样。如果有人可以帮助我，我会很高兴...

我查看了代码中的其他样式元素，发现了这一点：

```
var iframe = document.createElement('iframe');
            iframe.setAttribute('id', cfg.block+'Player');
            iframe.setAttribute('type', 'text/html');
            iframe.setAttribute('width', cfg.width); 
```

(...)

```
 if(!this.cfg.width){
                    this.cfg.width = 200;
                } 
```

我想它必须是这样的，但是当我尝试这样做时它对我不起作用，删除 cfg 并将其替换为`img`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:48:30.753

为创建的图像添加 id 属性

```
var img = document.createElement('img');
img.setAttribute('src',(entry.thumbnail ? entry.thumbnail.hqDefault : ''));
img.setAttribute('id', 'myImage'); 
```

并以您的风格

```
#myImage {width: 200px;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:51:28.053

您可以直接在图像元素上设置宽度：

```
var img = new Image();
img.src = ...;
img.width = 200; 
```

请注意，几乎不需要`setAttribute`在 DOM 元素上使用，只需设置所需的属性即可。

如果事实证明您无法修改引用的代码，但之后可以访问 DOM，请使用此 jQuery：

```
$('a.clip > span > img').attr('width', 200); 
```

这只会影响那些使用您的原始片段创建的图像。

# security - 多种盐来保护密码

> ID：12753062
> 
> 赞同：1
> 
> 时间：2012-10-05T19:45:43.480
> 
> 标签：security, hash, passwords, salt

如果您在散列密码之前使用盐 - 这将使散列更加安全。这是有道理的，因为彩虹表攻击变得更加困难（不可能？）。

如果你使用多种盐怎么办？例如 - 您检查一天是星期一，还是月份，小时等（或某种组合）。然后你有一个存储字段的数据库：（userid，hash1，hash2，hash3 ...）。

这会使信息更安全（或更安全）吗？

例子：

1) 用户使用密码“PASS”注册。2）系统（本例中为php）存储每天（7个密码）的值（md5（$password.$this_day））。进入表密码、列 hash_monday、hash_tuesday 等。 3) 用户登录，脚本检查密码，其中 'hash_'.$this_day 与输入的内容匹配。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T07:16:31.080

您的系统将不再安全 - 您最终会得到几个单一的盐数据库而不是一个。原则上它可能更不安全，因为您帮助攻击者为同一字符串提供了 7 个哈希值以供选择，而他只需要猜测一个。相同明文的这些多个哈希值也可能会影响用于密码的加密的加密强度（不确定那个，它将取决于所使用的算法）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T22:12:27.370

也许你应该看看这篇小[文章](http://www.martinstoeckli.ch/php/php.html#ssl_bcrypt)。你的方法有几个问题。

1.  盐不能防止字典攻击。如果正确使用，它可以防止彩虹表。
2.  为每个密码使用唯一的盐。盐应该是一个随机值，而不是从已知信息中得出。它必须与密码一起存储。
3.  不要**使用 MD5**对密码进行哈希处理。Md5 被认为是损坏的，散列密码的速度太快了。使用现成的 GPU，您可以每秒计算 8 Giga MD5 哈希（[2012 年](http://hashcat.net/oclhashcat-lite/#performance)）。这使得在不到 0.1 毫秒的时间内暴力破解大约 500000 个单词的整个英语词典成为可能！
4.  使用**Bcrypt**对密码进行哈希处理。建议使用完善的库，如[phpass](http://www.openwall.com/phpass/)，如果你想了解它是如何实现的，可以阅读上面的文章。

如果您想在哈希函数中添加秘密（如隐藏密钥或隐藏函数），您可以在密码中添加**胡椒。**辣椒**不**应该存储在数据库中，并且应该保密。只要攻击者只能访问您的密码哈希（SQL 注入），而不能访问具有密码的服务器，辣椒就可以防止字典攻击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T14:34:44.770

在这种情况下，我认为多个哈希不会对您有所帮助，主要是因为当有人破坏您的数据库时，他们会注意到您有 7 种不同的盐要反对，并且可能会根据一周中的几天做出有根据的猜测。MD5 从根本上来说并没有什么问题，因为很多人都喜欢跟风。那些说 MD5 是损坏的哈希的人对哈希函数和加密哈希函数有根本的误解，我建议忽略它们。如果您需要加密哈希函数，请使用 SHA-2（或该系列或更高版本的产品）。

您将需要对用户输入进行加盐，如您所知，通常建议使用随机值，但它也可以是您存储在单独应用程序空间（数据库外部）中的值，您也只需保护该信息. 我强烈建议让密码散列函数对任何输入进行数千次迭代。因为这会减慢在数据库上匹配哈希的自动化过程。

如果你的用户使用容易猜到的密码，字典攻击每天都会打败你，无法防止愚蠢。

# git - VIM 范围行号寄存器

> ID：12753065
> 
> 赞同：4
> 
> 时间：2012-10-05T19:45:54.180
> 
> 标签：git, vim

是否有一个寄存器或变量保存当前选定范围的行号？

`line(".")`适用于当前行，但在可视范围内是否有一个？

**编辑**

如下所述`'<`，和`'>`寄存器保存开始行和结束行。

除了使用上述内容之外，我最终做的是在 VimScript 中编写一个函数，该函数获取这些行号并执行一个外部命令，我将在下面包含它：

```
function! Github(line1, line2)
    execute "!github -f " . expand("%") . " -l " . a:line1 . " -n " . a:line2
endfunction
com! -range Github call Github(<line1>, <line2>) 
```

我是 VimScript 的新手，但根据我从最初的谷歌搜索中收集到的信息，上述函数接受一个范围。然后，我获取开始和结束行号，并使用它们执行`github`与 Github API 接口的外部脚本和/或根据 git 信息打开浏览器到 github 页面。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T19:46:57.870

*   `'<`和`'>`分别。

    所以：应该是你所期望`line("'<")`的`line("'>")`

*   还，

    ```
    :'<,'>sort 
    ```

    对最后的视觉选择进行排序

*   ````<`跳到最后一个视觉选择的开头（另见`:he v_o`）

*   最后，如果***不***`'cpoptions'`包括，您可以用作 的同义词：*`*``:*``:'<,'>`*

     *```
    :se cpoptions-=*
    :*sort 
    ```*

# xml - 信息路径和 XML 文件

> ID：12753066
> 
> 赞同：0
> 
> 时间：2012-10-05T19:45:55.527
> 
> 标签：xml, infopath, infopath2010, gpo

我有一个 GPO，它阻止所有应用程序打开，GPO 中列出的应用程序除外。我正在尝试双击设置为使用 Infopath 打开的 XML 文件。Infopath 在允许的应用程序列表中。为什么我会收到此警报？如果我打开 Infopath 并使用它来打开文件，它工作正常。如果您假设它正在尝试使用 Internet Explorer 打开，那么它也在允许的应用程序列表中。

# ajax - h:selectOneRadio 选择被取消选中

> ID：12753071
> 
> 赞同：0
> 
> 时间：2012-10-05T19:46:24.373
> 
> 标签：ajax, jsf, jsf-2

我有一个使用单选按钮选择行的表。单击单选按钮时，ajax 会执行一些代码来更新另一个字段，然后呈现表单。一切正常，除了单选选项消失并且所有单选按钮都未选中。我不确定为什么会这样？单击按钮，因此值不应更改。这不是 onchange javascript，我将其作为测试删除，但仍然是同样的问题。我也不能只渲染更新的字段，因为它与下面的代码分开，我得到一个 servlet 异常 - 未知 id 错误（也许有人可以告诉我如何解决这个问题？）

```
<h:dataTable id="addClient" styleClass="dataTable"
    value="#{AddEntryMB.clientValues}" var="c" binding="#{AddEntryMB.dataTable}" 
                rendered="#{AddEntryMB.renderClientTable}">
    <f:facet name="header" >
                Select Client to Associate with Appointment
            </f:facet>

    <h:column>
        <f:facet name="header">Select</f:facet>

                <h:selectOneRadio valueChangeListener="#{AddEntryMB.setSelectedItem}" 
                    immediate="true" onchange="dataTableSelectOneRadio(this);" >
                        <f:selectItem itemValue="null" />
                        <f:ajax event="click" render="@form"/>
                </h:selectOneRadio>
    </h:column> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T01:15:34.807

It gets unselected because the value is not been set in a model value and the form get refreshed by ajax. You could prevent the unselection by binding the value to the model.

```
<h:selectOneRadio ... value="#{AddEntryMB.selected[c.id]}"> 
```

with

```
private Map<Long, Boolean> selected = new HashMap<Long, Boolean>(); // +getter 
```

In this example, I assume that the type represented by `#{c}` has a `private Long id` property which represents the unique ID.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:27:48.007

看起来您选择的值没有保存在支持 bean 中。

首先，您应该将 h:selectOneRadio 组件绑定到支持 bean 值：

`<h:selectOneRadio valueChangeListener="#{AddEntryMB.setSelectedItem}" value=#{c.radioValue} immediate="true" onchange="dataTableSelectOneRadio(this);" >`

然后尝试在您的 ajax 中处理 dataTable，例如：

`<f:ajax event="click" render="@form" execute="addClient"/>`

另外我还会添加一个`itemLabel`旁边`itemValue`以查看选择的内容：

`<f:selectItem itemValue="null" itemLabel="NULL"/>`

# ruby-on-rails - Rails：如何在相册/新表单中添加相册的用户所有权？

> ID：12753074
> 
> 赞同：1
> 
> 时间：2012-10-05T19:46:37.667
> 
> 标签：ruby-on-rails

嗨，我目前正在开发我的第一个 Rails 项目，这是一个供用户制作专辑和上传图片的网站。我的应用程序中安装了注册、登录和加好友功能。我正在努力做到这一点，以便在相册创建表单中，您可以看到您的朋友列表并选择您想要与谁共享相册访问权限（这意味着您选择的任何人也将成为其中的一部分`@album.users`。我正在计划关于使用复选框（我想不出更好的方法）进行此选择。但是，我不确定如何将`friendship`模型与专辑/新表单链接起来。这就是我的表单的样子：

专辑/new.html.erb

```
<%= form_for ([@user, @album]), :html => { :id => "uploadform", :multipart => true } do |f| %>
<div class="formholder">
    <%= f.label :name %>
    <%= f.text_field :name %>

    <%= f.check_box :friends %>

    <%= f.label :description %>
    <%= f.text_area :description %>

    <br>

    <%=f.submit %>
</div>
<% end %> 
```

第 6 行出现错误（ `<%= f.check_box :friends %>`

错误：

`undefined method 'friends' for #<Album:0x007fa3a4a8abc0>`

我可以理解为什么，但我不知道如何解决它。我有典型的友谊加入模型来添加朋友，我希望能够看到所有朋友的列表并选择他们。我认为接下来的步骤是`@album.users << @user.friendships.find_by_name(params[:friends])`在相册控制器的创建操作中添加类似的内容，但我不知道如何循环遍历只为朋友返回一个参数的表单？

这是我的文件：

相册控制器创建动作：

```
 def create
      @user = User.find(params[:user_id])
      @album = @user.albums.build(params[:album])
      # not so sure about the following line.
      @album.users << @user.friendships.find_by_name(params[:friends])
      respond_to do |format|
        if @user.save
          format.html { redirect_to user_album_path(@user, @album), notice: 'Album was successfully created.' }
          format.json { render json: @album, status: :created, location: @album}
        else
          format.html { render action: "new" }
          format.json { render json: @album.errors, status: :unprocessable_entity }
        end
      end 
    end 
```

专辑模特

```
class Album < ActiveRecord::Base
  attr_accessible :name, :description
  validates_presence_of :name

  has_many :album_users
  has_many :users, :through => :album_user
  has_many :photos

end 
```

用户模型

```
class User < ActiveRecord::Base

has_secure_password
attr_accessible :email, :name, :password, :password_confirmation
validates_presence_of :password, :on => :create

validates_format_of :name, :with => /[A-Za-z]+/, :on => :create
validates_format_of :email, :with => /\A([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})\Z/i, :on => :create
validates_length_of :password, :minimum => 5, :on => :create

has_many :album_users
has_many :albums, :through => :album_users
accepts_nested_attributes_for :albums

has_many :friendships
has_many :friends, :through => :friendships

before_save { |user| user.email = email.downcase }
before_save :create_remember_token

private

  def create_remember_token
    self.remember_token = SecureRandom.urlsafe_base64
  end 
```

结尾

album_user 模型（连接表以在有很多用户的相册和有很多相册的用户之间建立多对多关系）

```
class AlbumUser < ActiveRecord::Base
  belongs_to :album
  belongs_to :user
end 
```

友谊模型

```
class Friendship < ActiveRecord::Base
  attr_accessible :friend_id

  belongs_to :user
  belongs_to :friend, :class_name => "User"
end 
```

如果您需要更多信息，请告诉我！！提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T06:45:24.390

您应该`users_ids`在 的可访问属性列表中添加（是的，两个“s”）`Album`，然后在该`:users_ids`字段上使用“选择多个”。

```
<%= f.collection_select(:users_ids, User.all, :id, :name, :multiple => true) %> 
```

# jquery - 在 jQuery 自动完成中从数组中删除所选项目

> ID：12753082
> 
> 赞同：6
> 
> 时间：2012-10-05T19:47:07.713
> 
> 标签：jquery

我有这个数组，

```
var metrics = [
        {
            value: "1",
            label: "Sold Listings",
            desc: "sold_listings"
        },
        {
            value: "10",
            label: "New Pendings",
            desc: "new_pendings"
        },
        {
            value: "4",
            label: "All Pendings",
            desc: "all_pendings"
        },
        {
            value: "2",
            label: "New Listings",
            desc: "new_listings"
        },
        {
            value: "3",
            label: "Active Listings",
            desc: "active_listings"
        }
    ]; 
```

我想要做的是 Selected 项目，例如我将选择 Active Listings，这个项目应该从数组中删除。这样当自动完成再次呈现时，它不会显示所选项目。

```
//My Idea of removing the item
            $.each(metrics,function(i,val){
                if(val.value == ui.item.value){
                    delete metrics[i];
                }
            }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T20:02:23.233

问题是您没有更新`autocomplete`.
为此，您必须使用以下行。

`$('.yourAutocomplete').autocomplete('option', 'source', yourArray);`

因此，在自动完成选择事件中：

假设那`#autocomplete`是你的`input`.

```
select: function(e, ui) {
    metrics = jQuery.grep(metrics, function(element) {
        return element.value != ui.item.value;
    });
    $('#autocomplete').autocomplete('option', 'source', metrics)
    return false;
} 
```

[**演示**](http://jsfiddle.net/Ex3Rp/)

*参考*：

*   [http://jqueryui.com/demos/autocomplete/#method-option](http://jqueryui.com/demos/autocomplete/#method-option)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T19:50:33.123

从[这篇](https://stackoverflow.com/questions/3596089/how-to-add-and-remove-array-value-in-jquery)文章中，您可以执行以下操作：

```
var y = [1, 2, 3] 
var removeItem = 2; 

y = jQuery.grep(y, function(value) { 
  return value != removeItem; 
}); 
```

编辑：

对于您的示例，您可以执行以下操作：

```
var removeItem = "1"; 
metrics = $.grep(metrics, function(val) { 
    if (val.value != removeItem) {
        return val;
    }
}); 
```

这将删除值为“1”属性的第一个数组项。

# c# - 读取双嵌套xml

> ID：12753086
> 
> 赞同：2
> 
> 时间：2012-10-05T19:47:20.360
> 
> 标签：c#, xml, nested

我正在尝试阅读以下 XML 文件

```
<Tabellen>
<Header>
    <Tables>
        <Table>SW_RL</Table>
            <Fields>
                <Field>KeyVeld</Field>
                <Type>Alpha</Type>
                <Size>100</Size>
                <SubType>st_none</SubType>
            </Fields>
            <Fields>
                <Field>ErrorCode</Field>
                <Type>Alpha</Type>
                <Size>50</Size>
                <SubType>st_none</SubType>
            </Fields>
            <Fields>
                <Field>Description</Field>
                <Type>Memo</Type>
                <Size>100</Size>
                <SubType>st_none</SubType>
            </Fields>
        </Tables>
</Header>
<Header>
    <Tables>
        <Table>SW_RH</Table>
    <Fields>
        <Field>DocNum</Field>
        <Type>Numeric</Type>
        <Size>0</Size>
        <SubType>st_none</SubType>
    </Fields>
    <Fields>
        <Field>PaymentTerms</Field>
        <Type>Numeric</Type>
        <Size>0</Size>
        <SubType>st_none</SubType>
    </Fields>
    <Fields>
        <Field>DocDate</Field>
        <Type>Date</Type>
        <Size>0</Size>
        <SubType>st_none</SubType>
    </Fields>
    <Fields>
        <Field>Contract_Start</Field>
        <Type>Date</Type>
        <Size>0</Size>
        <SubType>st_none</SubType>
    </Fields>
    <Fields>
        <Field>Contract_End</Field>
        <Type>Date</Type>
        <Size>0</Size>
        <SubType>st_none</SubType>
    </Fields>
    <Fields>
        <Field>CardCode</Field>
        <Type>Alpha</Type>
        <Size>40</Size>
        <SubType>st_none</SubType>
    </Fields>
    <Fields>
        <Field>CardName</Field>
        <Type>Alpha</Type>
        <Size>100</Size>
        <SubType>st_none</SubType>
    </Fields>
    <Fields>
        <Field>BillToAddress</Field>
        <Type>Alpha</Type>
        <Size>100</Size>
        <SubType>st_none</SubType>
    </Fields>
    <Fields>
        <Field>ShipToAddress</Field>
        <Type>Alpha</Type>
        <Size>100</Size>
        <SubType>st_none</SubType>
    </Fields>
    <Fields>
        <Field>NumAtCard</Field>
        <Type>Alpha</Type>
        <Size>100</Size>
        <SubType>st_none</SubType>
    </Fields>
    <Fields>
        <Field>BillingPeriod</Field>
        <Type>Alpha</Type>
        <Size>10</Size>
        <SubType>st_none</SubType>      
    </Fields>
    <Fields>
        <Field>AdvanceBilling</Field>
        <Type>Alpha</Type>
        <Size>10</Size>
        <SubType>st_none</SubType>
    </Fields>
    </Tables>
</Header>
</Tabellen> 
```

当前代码

```
XmlDocument xmldoc = new XmlDocument();
xmldoc.Load(directory + "\\Server_Config.xml");
XmlNodeList xmlNodelist = null;
XmlNodeList xmlNodelist2 = null;

xmlNodelist = xmldoc.SelectNodes("Tabellen/Header/Tables");
foreach (XmlNode mnode in xmlNodelist)
{
    MessageBox.Show(mnode["Table"].InnerText, "ok");
     //create table

    xmlNodelist2 = xmldoc.SelectNodes("Tabellen/Header/Tables/Fields");
    foreach (XmlNode mnode2 in xmlNodelist2)
    {
        MessageBox.Show(mnode2["Field"].InnerText, "ok");
        // create fields
    }

} 
```

总体思路是创建2个表表1：RL包含3个字段表2：RH包含12个字段

但实际上结果是两个表都包含 15 个字段

我究竟做错了什么 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:58:14.473

Linq2Xml 更易于使用。

```
XDocument xDoc = XDocument.Load("myfile.xml");
var tables = xDoc.Descendants("Header")
                .Select(h => new
                {
                    Table  = h.Descendants("Table").First().Value,
                    Fields = h.Descendants("Fields")
                              .Select(f=>new{
                                    Field = f.Element("Field").Value,
                                    Type = f.Element("Type").Value,
                                    Size = f.Element("Size").Value,
                                    SubType = f.Element("SubType").Value
                               })
                              .ToList()
                })
                .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:19:01.270

```
xmlNodelist2 = xmldoc.SelectNodes("Tabellen/Header/Tables/Fields"); 
```

应该

```
xmlNodelist2 = mnode.SelectNodes("Fields"); 
```

否则，您将选择 XML 中的所有字段，而不仅仅是当前表下的字段。

（但是我没有测试过代码）

# php - 从正则表达式中删除数据

> ID：12753091
> 
> 赞同：-3
> 
> 时间：2012-10-05T19:47:52.970
> 
> 标签：php, javascript, html, regex

> **可能重复：**
> [解析包含图像数据的文本文件](https://stackoverflow.com/questions/12715889/parse-a-text-file-containing-image-data)

这是我从文本文件中获取图像数据的代码：

```
while (!feof($fh)) {
    $line = fgets($fh);
    $lines[] = $line;
    $match1 ="/^[0-9]{1,3},[0-9]{1,3}/";
    $match2 = "/[0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(?:,?[0-9]{1,3})*(?:\.[0-9]{1,10})?\b/";

    $parts  = preg_match($match1, $line, $regs);
    $parts2 = preg_match($match2, $line, $regs2);
    foreach($regs as $key => $lame) {
        $lamer[] = $lame;
    }
    foreach($regs2 as $key => $lame2) {
        $lamer2[] = $lame2;
    }
} 
```

第一个 preg_match 获取坐标，第二个获取 rgba() 数据。我正在尝试将其放入 javascript 数组中，但出现此错误：

```
SyntaxError: too many constructor arguments 
```

我认为 javascript 数组的数据太多了。

现在我想知道如何或是否可以跳过数组中的数据，即具有 0 alpha 的 rgba 的坐标，这意味着我必须跳过两者。

我也想知道我是否应该尝试将两场比赛合二为一，看看是否会更容易，但我不知道该怎么做。

这是我正在使用的数据，它是 300x180 图像：

```
41,6: (255,255,255, 0) #FFFFFF00 srgba(255,255,255,0)
42,6: (255,255,255, 0) #FFFFFF00 srgba(255,255,255,0)
90,35: (77, 80, 12, 98) #4D500C62 srgba(77,80,12,0.384314)
91,35: (95, 99, 13, 78) #5F630D4E srgba(95,99,13,0.305882)
92,35: (96, 99, 31, 90) #60631F5A srgba(96,99,31,0.352941)
93,35: (106,110, 14, 68) #6A6E0E44 srgba(106,110,14,0.266667)
94,35: (95, 99, 13, 78) #5F630D4E srgba(95,99,13,0.305882)

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:23:41.027

使用 JavaScript RegExp 模式

```
^(\\d+),(\\d+)[^#]+#.{6}(?!00)[^(]+\\((\\d+),(\\d+),(\\d+),(\\d*(?:\\.\\d*)?) 
```

检查[这个演示](http://jsfiddle.net/wGk8F/)。

# php - 创建历史列表，防止重复

> ID：12753093
> 
> 赞同：0
> 
> 时间：2012-10-05T19:47:59.117
> 
> 标签：php

我正在创建一个网站，其中一项功能在它的一侧，它将向用户显示他们访问该网站后访问过的页面，他们可以单击其中任何一个名称并将其带回该页面。我有它的工作，但是当他们点击返回某个页面时，如果他们再次点击它们，它会写出重复页面。例如，假设我们有 10 个页面，从 main01 到 main10。用户到达 main05 页面，并决定要返回 main03，他单击历史列表上的 main03 并正常访问，决定他要继续并单击“继续”，这将他带到 main04 页面，即美好的。但历史列表变为：

```
main01
main02
main03
main04
main05
main03
main04 
```

所以我试图做的是创建一个方法来检查访问的页面是否已经添加到数组中，如果已经添加，那么它应该什么都不回显。如果没有，那么它会回显正确的链接。但是每当我现在尝试它时，它只会显示您访问的最后一页，并在您每次更改页面时覆盖它。这是我的代码：

```
 if($_POST['visited']){
    $_SESSION['visitedpages'][$_SESSION['i']] = $_POST['visited'];
    $_SESSION['i']++;
    echo "<pre>";
    print_r($_SESSION['visitedpages']);
    echo "</pre>";
}

if($_SESSION['visitedpages']){
    $a_length = count($_SESSION['visitedpages']);
    for($x = 0; $x < $a_length; $x++){

        $name = $_SESSION['visitedpages'][$x];
        $exists = checkifexists($name, $a_length);

        if(!$exists){
        echo "<a href=\"$name.php\">$name</a><br />";
        }
        else{
        echo "";
        }
    }

}

function checkifexists($name, $a_length){
    for($z = 0; $z < $a_length;$z++){

        $existingname = $_SESSION['visitedpages'][$z-1];
        if($name === $existingname) {
            return true;
        }
    }
    return false;

} 
```

我怎样才能让它正常工作？任何帮助，将不胜感激。

编辑：实际上，看起来我是通过检查它在写入数组时是否存在来工作的，而不是在将其作为链接写入时。但是，现在每当我单击链接访问页面（例如 main05 中的 main03）时，它都会转到 main03 但历史列表不显示，对此有任何输入吗？

EDIT2：所以我根据您的建议使用 in_array 更改了它，并且它显示正确，但它仍然列出重复项。这是我使用的代码：

```
 if(in_array($_POSTED['visited'],$_SESSION['visitedpages'])){
            echo "";
        }
        else{
            $_SESSION['visitedpages'][$_SESSION['i']] = $_POST['visited'];
            $_SESSION['i']++;
            echo "<pre>";
            print_r($_SESSION['visitedpages']);
            echo "</pre>";
            $arrayinit = true;

        } 
```

现在，每当我访问以前的页面时，数组看起来都是这样的：

```
Array
(
[0] => main01
[1] => main02
[2] => main03
[3] => main04
[4] => main03
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:55:04.083

你需要检查你的`checkifexists`功能。

您正在检查该页面是否已被提及；如果有，则返回 true。但是你正在做的是`$_SESSION['visitedpages']`查看整个页面是否在其中，当然它是。

尝试调用它：

```
$exists = checkifexists($name, $x - 1); 
```

然后，您只需检查数组中较早的元素以查看它们是否重复。

对于它的价值，您可以使用[in_array更有效地做到这一点](http://php.net/manual/en/function.in-array.php)

# facebook - 如何强制 Facebook Like 按钮重新抓取我的页面？

> ID：12753094
> 
> 赞同：4
> 
> 时间：2012-10-05T19:48:04.727
> 
> 标签：facebook, caching, facebook-like, facebook-likebox

我在一个页面 (http://www.usna.edu/BillAF/game.php) 上创建了一个类似按钮，用于发送其父页面的 URL/数据。不幸的是，当我第一次把它放进去时，一个旧版本的页面位于父页面的位置，它上面没有打开的图形元标记。

因此，当有人“喜欢”该页面时，它会发送错误的标题和一个白色和灰色方块上一半字母“e”的“垃圾”图像。

我检查了：http: [//developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)，它有更新的信息。我还尝试将关联的 AP ID 更改为新的，当我“喜欢”它时，似乎都没有刷新它发送的内容。我还尝试将 index.php 添加到它应该发布的 URL 的末尾（http://www.usna.edu/BillAF），但无济于事。

我能做些什么来强制它重新刮掉页面吗？如果没有，有谁知道facebook自己重新刮掉它需要多长时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:23:23.523

清除 facebook 缓存的图像和文本的一个好方法是运行工具 Debugger：

[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)

通过将您共享的 url 放在那里，它将从您的网站刷新 facebook 缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T22:02:30.030

Facebook有一个用于重新抓取页面数据[的 API ，我使用以下函数：](https://developers.facebook.com/docs/opengraph/using-objects#selfhosted-update)

```
function purgeFacebookCache($url, $debug=false) {

    // Set the variables for Facebook
    $fields = array(
        'id' => urlencode($url), 
        'scrape' => true
    );
    foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
    rtrim($fields_string,'&');

    // Connect
    $ch = curl_init();
    curl_setopt($ch,CURLOPT_URL,'https://graph.facebook.com');
    curl_setopt($ch,CURLOPT_POST,count($fields));
    curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);
    $result = curl_exec($ch);

    // Debug
    if ($debug) {
        var_dump($result);
    }

} 
```

# nutch - 如何在 Nutch 中只抓取 HTML？

> ID：12753095
> 
> 赞同：1
> 
> 时间：2012-10-05T19:48:10.210
> 
> 标签：nutch

是否可以通过 Nutch 仅抓取/获取纯 HTML 页面（即没有图片、视频、flash、excel、exe、pdf 或 word 文件）？

如何通过 Nutch检查`Content-Type`页面并仅获取页面？`text/html`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:35:49.163

编辑`conf/regex-urlfilter.txt`：

为忽略设置文件后缀：

```
-\.(jpg|gif|zip|ico)$ 
```

# c - 用于 C 的 std::unordered_set(int) 容器库

> ID：12753097
> 
> 赞同：0
> 
> 时间：2012-10-05T19:48:11.813
> 
> 标签：c, stl

> **可能的重复：**
> [C 等价于 C++ STL](https://stackoverflow.com/questions/11004252/c-equivalent-of-c-stl)

由于嵌入式系统的内存限制，我正在用 C 编写程序。我需要一个`std::unordered_set<int>`来实现我的算法。C 有哪些类似 STL 的库？如果没有实现，`std::unordered_set<int>`那么我可以使用什么容器作为替代方案？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-05T19:55:53.887

[sglib](http://sglib.sourceforge.net/) [红黑树容器](http://sglib.sourceforge.net/doc/index.html#rbtree_exam)似乎提供了我需要的东西。

# python - 在 for 循环中填充 python 字典返回相同的值

> ID：12753099
> 
> 赞同：3
> 
> 时间：2012-10-05T19:48:21.713
> 
> 标签：python, python-2.7

为了满足项目的需要，迭代一些数据并将所需的值添加到预制字典中。

这是代表我的问题的代码示例：

```
class Parser:
    def __init__(self):
        self.records = [['value1','value2','value3'], 
                        ['value4','value5','value6'],
                        ['value7','value8','value9']]
    def get_parsed(self):
        parsed = []
        dic = {'key1': '',
               'key2': '',
               'key3': '',
               }
        for i in self.records:
            dic['key1'] = i[0]
            dic['key2'] = i[1]
            dic['key3'] = i[2]
            parsed.append(dic)
        return parsed 
```

我期望得到的是这样的字典列表：

```
[{'key1':'value1','key2':'value2','key3':'value3'},
 {'key1':'value4','key2':'value5','key3':'value6'},
 {'key1':'value7','key2':'value8','key3':'value9'}] 
```

但我得到的是：

```
[{'key1':'value1','key2':'value2','key3':'value3'},
 {'key1':'value1','key2':'value2','key3':'value3'},
 {'key1':'value1','key2':'value2','key3':'value3'}] 
```

虽然如果我将字典初始化移动到“for”循环中 - 我得到了想要的结果，但我不明白为什么会这样？

编辑：问题更多的是“为什么会这样”我在 ipython 中做了一些测试，这就是我所拥有的：

```
In [1]: d = {'a':'','b':'','c':''}

In [2]: d
Out[2]: {'a': '', 'b': '', 'c': ''}

In [3]: d['a'] = 'value'

In [4]: d['b'] = 'other_value'

In [5]: d['c'] = 'third_value'

In [6]: d
Out[6]: {'a': 'value', 'b': 'other_value', 'c': 'third_value'}

In [7]: d['a'] = 'inserting new value'

In [8]: d
Out[8]: {'a': 'inserting new value', 'b': 'other_value', 'c': 'third_value'} 
```

所以键的值可以更新并且它**会改变**，为什么它不会发生在 FOR 循环中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T19:50:09.873

您正在修改*相同的字典*并将其插入列表三次。为循环的每次迭代创建一个*新字典：*

```
for i in self.records:
    dic = { 'key1': i[0], 'key2': i[1], 'key3': i[2] }
    parsed.append(dic) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T19:50:45.977

因为你`dic`是在循环之外创建的，所以你只创建一个字典。如果你想要三个不同的字典，你需要创建三个不同的字典，所以将初始创建移到`dic`循环内部。

要回答您更新的问题，问题是尽管您认为您正在为 each 附加一个新的 dict `parsed.append(dic)`，但您只是将相同的 dict 附加了三次。 `Append`不复制字典。因此，每当您修改该字典时，所有字典都会`parse`显示更改，因为它们都是相同的字典。您的第二个代码示例的此版本可能更具说明性：

```
>>> d = {'a': '', 'b': '', 'c': ''}
>>> stuff = []
>>> stuff.append(d)
>>> print stuff
[{'a': '', 'c': '', 'b': ''}]
>>> d['a'] = 'other'
>>> print stuff
[{'a': 'other', 'c': '', 'b': ''}]
>>> stuff.append(d)
>>> print stuff
[{'a': 'other', 'c': '', 'b': ''}, {'a': 'other', 'c': '', 'b': ''}]
>>> d['a'] = 'yet another'
>>> print stuff
[{'a': 'yet another', 'c': '', 'b': ''}, {'a': 'yet another', 'c': '', 'b': ''}] 
```

请注意，更改 dict “有效”，因为它确实会更改值，但不管怎样，列表仍然多次包含相同的 dict，因此您所做的任何更改都会覆盖您之前所做的任何更改。最后，您的列表仅包含字典的最后一个版本，因为所有早期更改都被列表中的所有字典覆盖。

# linux - 在 Linux 中使用程序集将变量打印到命令行

> ID：12753106
> 
> 赞同：2
> 
> 时间：2012-10-05T19:49:11.653
> 
> 标签：linux, assembly, nasm

在 Linux 汇编中尝试我的手，我遇到了以下问题。我刚刚开始，所以我的程序是一个相对简单的程序，它源自我在 linuxassembly 找到的一些示例。它接受传递给命令行的第一个参数并将其打印出来。这是我到目前为止...

```
section .bss
    test_string: resb 3

section .text
    global _start

_start:
    pop ebx     ;argument number
    pop ebx     ;program name
    pop ebx     ;first argument
    mov [test_string],ebx

    mov eax,4
    mov ebx,1
    mov ecx,test_string
    mov edx,3
    int 80h

    mov eax,1
    mov ebx,0
    int 80h 
```

我知道这写得不好，但由于我是新手，我只是想在继续之前更好地了解汇编指令/变量的工作原理。我组装和链接使用...

```
nasm -f elf first.asm
ld -m elf_i386 -s -o first first.o 
```

然后我运行使用..

```
./first one two 
```

我以为它会打印出来，`one`但它会打印出像`Y*&`. 我究竟做错了什么？我`test_string`的类型不对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T19:58:39.230

您试图打印出指向字符串的指针的值，而不是打印字符串。你想这样做。

```
pop ebx     ;argument number
pop ebx     ;program name
pop ebx     ;pointer to the first argument

mov ecx,ebx ;load the pointer into ecx for the write system call

mov eax,4   ;load the other registers for the write system call
mov ebx,1
mov edx,3
int 80h

mov eax,1
mov ebx,0
int 80h 
```

# html - 如何使用溢出垂直居中和裁剪图像：隐藏？

> ID：12753108
> 
> 赞同：1
> 
> 时间：2012-10-05T19:49:20.687
> 
> 标签：html, css, image

我正在尝试在不拉伸或缩小图像的情况下显示预设的图像缩略图。我的 HTML 如下所示：

```
<div class="container">
    <img src="photo.jpg" alt="Test Photo" class="clipped" />
</div> 
```

我的 CSS：

```
.container{
    height: 75px;
    width: 75px; 
    overflow: hidden;
}

.container img.clipped {
    width: 100%; 
} 
```

![在此处输入图像描述](../Images/2f366baf8b9f79051b396b2d761a9501.png)

我希望在 75 x 75 像素的容器中看到图像的中心，如下所示，即垂直居中。

![在此处输入图像描述](../Images/64a8039dd74b02dc2c6e10a5963d0570.png)

知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T19:58:22.010

图像从框的左上角开始调整大小，因此只有底部被剪掉。

您可以实现将图像移动到背景的结果：

[**演示**](http://jsfiddle.net/gionaf/AGCW6/)-**警告**：不适用于 IE8

HTML：

```
<div class="container"></div>​ 
```

CSS：

```
.container{
    height: 75px;
    width: 75px; 
    overflow: hidden;
    background:url(photo.jpg) left center no-repeat;
    background-size:75px auto; /* or background-size:100% auto; */
}​ 
```

* * *

要将此方法应用于多个容器，您可以将其拆分为两个类：

```
.container {
    height: 75px;
    width: 75px; 
    overflow: hidden;
}​

.myPic {
    background:url(photo.jpg) left center no-repeat;
    background-size:75px auto; /* or background-size:100% auto; */
} 
```

然后你可以拥有：

```
<div class="container myPic"></div>​
<div class="container2 myPic"></div>​
<div class="container myPic2"></div>​
<div class="container2 myPic2"></div>​ 
```

...等等。

或者您可以使用内联样式设置背景图像：

```
.container {
    /* same stuff */
    background-position: left center;
    background-repeat: no-repeat;
    background-size:75px auto; /* or background-size:100% auto; */
} 
```

和

```
<div class="container" style="background-image:url(photo.jpg);">
<div class="container" style="background-image:url(photo2.jpg);"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T19:57:29.310

我没有纯 css 解决方案，而且我不确定无论尺寸如何，您的 HTML 都会有一个相当简单的解决方案，但是使用 javascript 您可能会这样做（如果您不使用 jQuery，请适应[vanilla ）：](http://vanilla-js.com/)

```
$('.container').each(function(){
    var $img = $(this).find('img');
    $(this).scrollTop(($img.height()-$(this).height())/2);
    $(this).scrollLeft(($img.width()-$(this).width())/2);
});​ 
```

[示范](http://jsfiddle.net/vgkGD/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-27T20:16:42.907

支持 translateY 的现代浏览器的一种方法。

```
.clipped {
    position: relative;
    top: 50%;
    -webkit-transform: translateY(-50%);
    -ms-transform: translateY(-50%);
    transform: translateY(-50%);
} 
```

jsFiddle 示例：http: [//jsfiddle.net/5qts9jt5/130/](http://jsfiddle.net/5qts9jt5/130/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T19:51:17.080

```
.container {
  line-height: 73px;
}
.container img.clipped {
  vertical-align:middle;
} 
```

# django - Tastypie 从继承的模型中访问字段

> ID：12753113
> 
> 赞同：5
> 
> 时间：2012-10-05T19:49:36.647
> 
> 标签：django, tastypie

是否可以在相关模型上包含字段，使用美味派？

根据我下面的模型：如果我将一个 VideoContent 和一个 TextContent 实例保存到数据库，然后我可以从我的 Content 资源中取回 2 个对象，但是没有其他字段可用。

是否可以包含来自相关模型的字段（在本例中为视频 url 和文本内容），是否可以满足将来添加更多内容类型而无需重写内容资源，或者我是从方向错误？

目标是能够使用更多 ContentTypes 扩展它，而无需更改 Content 资源（假设可以首先让它工作）

模型.py：

```
class Content(models.Model):
    parent = models.ForeignKey('Content', related_name='children', null=True, blank=True)

class TextContent(Content):
    text = models.CharField(max_length=100)

class VideoContent(Content):
    url = models.CharField(max_length=1000) 
```

然后是我的资源：

```
class ContentResource(ModelResource):
    children = fields.ToManyField('myapp.api.resources.ContentResource', 'children', null=True, full=True)

    class Meta:
        resource_name = 'content'
        queryset = ContentResource.objects.all()
        authorization = Authorization()
        always_return_data = True 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-07T01:40:14.160

**我在另一个答案中找到了一个很好的解决方案**

[为多表继承 Django 模型填充一个美味的资源](https://stackoverflow.com/questions/11924132/populate-a-o2m-modelresource/12049987#12049987)

* * *

我遇到了同样的问题 - 尽管我仍在解决它。到目前为止，我已经弄清楚了两件事：

django-model-utils 提供了一个继承管理器，让您可以使用抽象基类来查询它的表，并可以自动向下转换查询结果。

要看的一件事是资源类可用的[脱水/再水化方法。](http://django-tastypie.readthedocs.org/en/latest/resources.html#the-dehydrate-cycle)

这就是我所做的：

```
class CommandResource(ModelResource):

   class Meta:
        queryset = Command.objects.select_subclasses().all() 
```

这只会让你成功 - 资源还必须包括脱水/再水合的东西，因为你必须*手动*打包对象以从用户那里传输（或接收）。

我现在意识到的事情是，这是超级hacky，必须有一个更好/更清洁的方式由美味派提供 - 他们不能指望你必须在这些类型的情况下进行这种类型的手动重新包装 - 但是，也许他们是这样。我在这点上只有大约 8 小时的美味派经验，所以如果我解释这一切都错了，也许一些好的 stackoverflow 用户可以让我直截了当。:D :D :D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-25T09:50:19.120

我有同样的要求，终于解决了。

我不喜欢上面链接中给出的答案，因为我不喜欢组合查询集和重新排序的想法。

显然，您可以继承多个资源。

通过对多个资源进行子类化，您可以包含资源的字段。
由于这些字段对于每个资源都是唯一的，因此我在 init.xml 中将它们设为空。

想知道是否有办法只列出父母一次。（现在有两个。一个用于子类化，一个用于元类）

```
class SudaThreadResource(ThreadResource):

    def __init__(self, *args, **kwargs):
        super(SudaThreadResource, self).__init__(*args, **kwargs)

        for field_name, field_object in self.fields.items():
            # inherited_fields  can be null                                                                                                                                                                                                                                     
            if field_name in self.Meta.inherited_fields:
                field_object.null=True

    class Meta(ThreadResource.Meta):
        resource_name = 'thread_suda'
        usedgoodthread_fields = UsedgoodThreadResource.Meta.fields[:]
        userdiscountinfothread_fields = UserDiscountinfoThreadResource.Meta.fields[:]
        staffdiscountinfothread_fields = StaffDiscountinfoThreadResource.Meta.fields[:]
        bitem_checklistthread_fields = BitemChecklistThreadResource.Meta.fields[:]

        parent_field_set = set(ThreadResource.Meta.fields[:])

        field_set = set(
            set(usedgoodthread_fields) |
            set(userdiscountinfothread_fields) |
            set(staffdiscountinfothread_fields) |
            set(bitem_checklistthread_fields)
        )

        fields = list(field_set)
        inherited_fields = list(field_set - parent_field_set)

        queryset = forum_models.Thread.objects.not_deleted().exclude(
            thread_type__in=(forum_const.THREAD_TYPE_MOMSDIARY, forum_const.THREAD_TYPE_SOCIAL_DISCOUNTINFO)
        ).select_subclasses() 
```

# html - 限制跨度标记以匹配另一个跨度宽度

> ID：12753123
> 
> 赞同：-1
> 
> 时间：2012-10-05T19:50:21.230
> 
> 标签：html, css

我正在尝试消除与另一个不匹配的跨度的任何溢出。

这就是我正在处理的事情。[http://jsfiddle.net/D2WPW/12/](http://jsfiddle.net/D2WPW/12/)

所以 与的宽度`.graph span`不匹配。`.text span`我想`overflow: hidden;`会做的伎俩。我猜不会。我会以错误的方式解决这个问题吗？

任何见解和帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:55:08.250

跨度标签将根据需要占用尽可能多的空间。如果您仔细观察，您将插入一个`.graph`带有内联样式的画布元素，该样式明确将宽度设置为 116 像素。

也许相反，您应该使画布元素的宽度动态化，并将其设置为等于相邻`.text`跨度的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:20:51.450

`.text`元素不在元素内部，`.graph`所以没有理由`overflow: hidden`on`.graph`应该 clip `.text`。

您应该做的是设置静态宽度以及包含图形和文本的元素：`overflow: hidden`http : [//jsfiddle.net/D2WPW/26/](http://jsfiddle.net/D2WPW/26/)`text-align: justify`

您可能还希望`white-space: nowrap`防止太长的文本换行到下一行。

# vb.net - Visual Basic 数据文件位置

> ID：12753124
> 
> 赞同：1
> 
> 时间：2012-10-05T19:50:21.363
> 
> 标签：vb.net

我想知道是否有地方可以保存包含一些数据的文件（由应用程序内部使用 - 就像一个非常小的数据库）。我不想将它保存到 C:\file.txt。有没有一个地方可以让 Visual Basic 保存这些文件，比如 bin 之类的？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:53:56.833

您可以使用 VB 对象 My.Computer.FileSystem.SpecialDirectories.AllUsersApplicationData 或 My.Computer.FileSystem.SpecialDirectories.CurrentUserApplicationData 中的路径来存储您想要的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:53:31.970

目前尚不清楚您在谈论哪种数据（类型、大小和用途），但嵌入式数据库可能正是您正在寻找的。

[SQL Server Compact Edition](http://en.wikipedia.org/wiki/SQL_Server_Compact)或[SQLite](http://www.sqlite.org/)可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T19:56:31.133

你有几个选择。

您可以将数据存储在数组、XML 文件、SQL 数据库（Access、SQL Server 等）中。您可以使用特定于用户的本地用户位置。

这一切都取决于有多少数据。

# api - Google API - 使用内部 IP 重定向 URI

> ID：12753127
> 
> 赞同：8
> 
> 时间：2012-10-05T19:50:40.420
> 
> 标签：api, google-api, uri

我正在使用 Google 日历 API 创建一个应用程序。在我的本地 apache 安装上一切正常，使用 localhost:8888/pathtoapp 作为重定向 URI。

我想将应用程序迁移到本地网络上的另一台机器。我尝试将 URI 更改为新 apache 安装的本地 ip。我收到以下错误...

```
Error: invalid_request
Invalid parameter value for redirect_uri: Raw IP addresses not allowed: http://192.168.0.17/pathtoapp/ 
```

关于如何使用内部 IP 作为重定向 URI 或其他方式的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T19:54:26.307

看起来 API 不允许您使用 IP 地址。尝试使用网络名称而不是 IP 地址。如果您无权访问该名称，请在本地计算机上为该特定 IP 创建一个别名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-13T09:20:26.913

**【开发环境合适的解决方案】**

虽然 Google 控制台不允许您将 IP 作为重定向 URI：

> 重定向无效：http: [//10.100.1.1](http://10.100.1.1)必须以公共顶级域（如 .com 或 .org）结尾

您可以创建一个主机名条目，将您的有效域重定向到另一个所需的 IP 地址：

`$ vim /etc/hosts`

附加： `10.100.1.1 localhost.com www.localhost.com`

现在您可以从 或 作为重定向 URI 访问您的`localhost.com`站点。`www.localhost.com``localhost.com`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T21:19:35.170

这是不可能的...您必须在公共服务器上保留一个域名才能进行测试...对我来说似乎也很愚蠢:-P

重复： [公共 IP 地址可以用作 Google OAuth 重定向 URI 吗？](https://stackoverflow.com/questions/14238665/can-a-public-ip-address-be-used-as-google-oauth-redirect-uri)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-31T06:33:32.697

使用 localhost:port/redirectpath 在本地机器上进行测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-21T17:16:02.510

对于 windows 操作系统，可以通过在系统中添加主机条目来删除此错误，因此 google 会认为它来自给定的主机名

拿你的全球 IP 地址说：106.200.247.101（或谷歌我的 IP 是什么，你会得到它）转到 Windows 上的 C:\Windows\System32\drivers\etc\hosts 并添加一个新条目，如下所示

例如：106.200.247.101 abc.com

然后您将能够参考使用给定的主机名

# c++ - unicode 字符值

> ID：12753129
> 
> 赞同：1
> 
> 时间：2012-10-05T19:50:48.737
> 
> 标签：c++, excel, unicode, char, collation

问题：按值排列的 Unicode 扩展符号的正确顺序是什么？

如果我对 Unicode 字符列表进行 excel 排序，则顺序与我使用 excel“=code()”并按这些值排序时不同。目的是我想测量字符之间的距离，例如 ab = 1 和 &-% = 1; 当使用 excel 排序功能进行排序时，在三个内排序的两个字符的值似乎在 134 之外。

此外，一些 char 符号在 excel 中是空白的，有几个用“find”找到了两次，是两个不同的符号 - 根本没有找到几个。请解释这些“特殊”字符的详细信息。

[http://en.wikipedia.org/wiki/List_of_Unicode_characters](http://en.wikipedia.org/wiki/List_of_Unicode_characters)

示例代码：

```
int charDist = abs(alpha[index] - code[0]); 
```

编辑：为了找出 c++ vs2008 中的 UNICODE 值，我运行每个代码作为从代码 1 到代码 255 与代码 1 的比较

```
cout << mem << " code " << key << " is " << abs(key[0] - '') << " from " << endl; 
```

括号里是一个黑色的笑脸，这个网站没有字体，但是命令窗口有，在vs2008中看起来像半张贴| 与 T 的右半部分。 Excel 留下空白。

以下 Unicode 在 c++ vs2008 中不使用 std 库和 #include 9、10、13、26、34、44 处理，

而且，代码 1 到 127 的数字“距离”是正确的，但在 128 处，距离会跳过一个额外的距离，并且由于某种原因更远。然后从 128 到 255，距离反转并变得更近；255 距离 1 '' 2

如果这些遵循更合乎逻辑的东西并且只有 1 到 255 没有打嗝或跳过和反转，并且 255-1 = 254 但是嘿，我知道什么，那就太好了。

EDIT2：我发现它 - 没有绝对 - UNIFORMAT 的排序规则是 128 到 255，然后是 1 到 127，并产生 1 到 255，其中 9、10、13、26、34、44 的 6 个跳过是垃圾。这并不直观。在新的顺序 128->255,1->127 中，从 127 到 128 的奇怪跳转更加清晰，这是因为没有 0，所以在 255 和 1 之间缺少值。

解决方案：使用每个符号的值制作我自己的哈希表，并且不要依赖 c++ std 库或 vs2008 来提供 UNIFORMAT 值，因为它们对于测量 UNIFORMAT 的几个特定子集之外的字符距离是不正确的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T20:16:05.753

Unicode 没有定义的排序（或整理）顺序。当 Excel 排序时，它使用基于当前所选语言的表格。例如，在英语模式下使用 Excel 的人可能会得到与在葡萄牙语模式下使用 Excel 不同的排序结果。

还有标准化的问题。使用 Unicode，一个“字符”不一定对应一个值。一些字符可以用不同的方式表示。例如，大写的欧米茄可以编码为希腊字母或表示电阻单位的符号。在某些语言中，单个字符可能由多个连续值组成。

空白值可能对应于您没有任何字体覆盖的字形。一些系统使用所谓的“Unicode 字体”，其中包含每个脚本所需的大部分字形。当当前字体没有必要的字形时，Windows 倾向于即时切换字体。这两种方法都不需要所有字形。此外，一些 Unicode 值不编码为可见字形（例如，Unicode 中有许多不同类型的空格），一些值更像 ASCII 样式的控件代码（例如，段落分隔符或双向控件），还有一些值只有当它们与另一个字符组合时才有意义，就像许多“组合”口音一样。

所以没有一个你会满意的答案。也许如果你提供更多关于你最终想要做什么的信息，我们可以建议一种不同的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T20:19:47.567

我不认为你可以在不显着限制你的方法的情况下在 Excel 中做你想做的事情。

通过实验，Code 函数永远不会返回高于 255 的值。如果您使用无法通过此 VBA 代码生成的任何 unicode 文本，它将被解释为问号 (?) 或 63。

```
For x = 1 To 255
    Cells(x, 1).Value = Chr(x)
Next 
```

您应该能够使用代码确定差异。但如果该字符不属于该领域，则您需要离开 Excel，因为即使是 VBA 也会将任何其他 Unicode 字符转换为问号 (?) 或 63。

# javascript - 禁用 Superfish 菜单项

> ID：12753134
> 
> 赞同：-1
> 
> 时间：2012-10-05T19:51:05.873
> 
> 标签：javascript, jquery, css, superfish

这感觉应该很容易做到，但由于某种原因我遇到了麻烦。我有一个相当普通的[Superfish](http://users.tpg.com.au/j_birch/plugins/superfish/#examples)菜单（只有顶行和下拉菜单，没有子菜单）。

我想禁用其中一个菜单项而不将其从菜单中删除。处理 onClick 很容易 - 如果您选择了菜单，只需忽略单击。给我带来麻烦的部分是向用户指示“此菜单项已禁用”。

例如，我希望菜单项“禁用我”具有不同的颜色、不同的背景等。

![在此处输入图像描述](../Images/d896859f0c5fb4a830fa50732f3a657c.png)

我有一个[JSFiddle](http://jsfiddle.net/dpLoops/WUjQQ/)，我试图将颜色设置为红色（或绿色，或其他）。

如果 JSFiddle 死了，这里是基础：

HTML：

```
<ul id="sample-menu-1" class="sf-menu">
    <li class="current">
        <a href="#a">menu item</a>
        <ul>
            <li>
                <a href="#aa">menu item</a>
            </li>
            <li class="current">
                <a href="#ab">menu item</a>
            </li>
            <li class='disableLI'>
                <a href="#">DISABLE ME</a>
            </li>
            <li>
                <a href="#">menu item</a>
            </li>
        </ul>
    </li>
    <li>
        <a href="#">menu item</a>
    </li>
    <li>
        <a>menu item</a>
    </li>    
</ul>​ 
```

这是香草Javascript：

```
$("ul.sf-menu").superfish();​ 
```

这是不工作的CSS：

```
.disableLI { color: red; }
.sf-menu, .disableLI { color : green; } 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:06:49.647

```
li.disableLI { background-color : red !important; }
.disableLI a { color : green; } 
```

这将使 li 变为红色，字体颜色变为绿色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:54:04.583

我认为您只是针对错误的元素

[http://jsfiddle.net/WUjQQ/1/](http://jsfiddle.net/WUjQQ/1/)

让事情变得简单

```
.disableLI a { color: red !important; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T19:54:05.373

```
.disableLI a { color : green; } 
```

# css - 我想让一个 div 包含默认操作（按 在这种情况下），而不必创建一个按钮

> ID：12753147
> 
> 赞同：0
> 
> 时间：2012-10-05T19:52:02.130
> 
> 标签：css, internet-explorer-8, haml

这只是IE8中的一个问题。它在 Firefox、Chrome、Safari 甚至 IE9 中运行良好。无论如何，我的应用程序登录页面上有一个 div，我将其设置为看起来像一个巨大的灰色按钮。这是代码：

```
.user_form .submit input[type=submit] {
  display: block;
  width: 100%;
  height: 55px;
  text-align: left;
  margin-bottom: 0;
  padding: 0 11px;
  color: #fff;
  font-size: 16px;
  font-weight: bold;
  line-height: 25px;
  text-shadow: -1px -1px 1px rgba(0,0,0, 0.25);
  text-transform: uppercase;
  background: #4a5a64 url(/images/h1_background.gif) repeat-x;
  border: none;
} 
```

这是haml代码：

```
.submit
  = submit_tag 'Sign in', :class => 'no_style', :type => 'submit' 
```

由于这在除 IE8 之外的所有浏览器上都可以正常工作，因此我想知道是否有一种方法可以在不将其转换为按钮的情况下解决此问题，即在 haml 中是这样的：

```
.submit
  %button.submit_tag { bla bla bla } Sign In 
```

谢谢！

更新：这是我整个登录页面的所有 Haml 代码。正如我所说，在 Firefox、Chrome 和 IE9 中，如果您输入用户名和密码，然后按 Enter 键，您将进入欢迎页面（当然，假设您的用户名和密码正确）。然而，在 IE8 中，您只需听到一声哔声，您就会停留在页面上。

```
- content_for :trackers do
  = google_analytics_standard_page_tracker
  = salesforce_tracker

- title 'Sign In', false

- form_for :session, :url => session_path, :html => { :class => 'user_form' } do |f|
  .field
    = f.label :email, 'Username'
    = f.text_field :email, :maxlength => 255, :autofocus => true
  .field
    = f.label :password
    = f.password_field :password

  .submit
    %input{ :type => 'submit', :value => 'Sign in' }

.section.right
  %ul.links
    %li= link_to 'Forgot password?', new_password_path
    %li= link_to 'Don\'t have an account? Sign up now', marketing_site_url("/index.php/buy-now")
    %li= link_to 'Resend activation email', resend_activation_path

  = render 'shared/need_help' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:58:27.383

您始终可以使用原始 HTML 版本，但您必须手动连接所有涉及的内容。就像是：

```
%input{:type => "submit", :value => "Add class"} 
```

或者如果你喜欢 HTML 样式属性

```
%input(type="submit" value="Add class") 
```

# c# - 提高嵌套对象过滤速度

> ID：12753148
> 
> 赞同：0
> 
> 时间：2012-10-05T19:52:02.307
> 
> 标签：c#, asp.net, performance, c#-4.0, webforms

这是我遇到的一个问题（简化示例）：假设我有几个表： ![在此处输入图像描述](../Images/5c6b78fe3bf7afa2321bac1194475e2c.png)

一个客户可以拥有多种产品，而一种产品可以具有多种功能。

在我的 asp.net 前端，我有一个包含客户信息的网格：

像这样的东西：

```
Name   Address   
John   222 1st st     
Mark   111 2nd st 
```

我需要的是按功能过滤客户的能力。因此，我有一个与客户相关的可用功能的下拉列表。

我目前在做什么：
1\. 我`DataTable`从存储过程中返回客户。我将它存储在视图状态
2 中。我从存储过程返回`DataTable`连接到客户的功能。我将它存储在视图状态 3 中。在选择过滤器时，我使用新的 feature_id 过滤器再次运行存储过程，我再次加入其中以仅显示已选择功能的客户。

**我的问题：速度很慢。**

我认为可能的解决方案是：
1\. 在页面加载时，在一个视图状态变量中返回所有数据。所以基本上是三个嵌套对象列表。这将使我的页面加载缓慢。2\. 以某种聪明的方式执行 async loazing。如何？

有更好的解决方案吗？

**编辑：**
这是一个简化的示例，因此我还需要按通过 6 个表连接到表 Customer 的属性过滤客户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:14:44.897

在 ViewState 中存储整个客户列表将会非常缓慢；在 ViewState 中存储所有客户的所有信息会变得更糟，除非您的整个客户群非常小，比如大约 30 条记录。

首先，为什么要将所有客户加载到 ViewState 中？如果您有大量客户，请一次加载一页数据。这至少会减少通过网络传输的数据量，也可能会加快您的存储过程。

在您的位置上，我会首先专注于优化数据检索（包括最小化您返回的数量），然后关注更快的存储和显示方式。如果您遇到阻止这种情况的异常约束（非常慢的数据库；没有分析工具；不允许更改存储过程），请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:19:21.940

解决方案 1：在查询中包含您需要过滤的任何条件，仅返回和呈现请求的记录。无需使用视图状态。

解决方案2：检索一些合理的客户页面限制，在浏览器上使用javascript进行过滤。允许轻松导航到下一页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:21:09.833

我处理这些场景的方法是将 Xml 传递给 SQL，然后针对它运行一个连接。所以 Xml 看起来像：

```
<Features><Feat Id="2" /><Feat Id="5" /><feat Id="8" /></Features> 
```

然后您可以将该 Xml 传递给 SQL（取决于 SQL 的版本有不同的方法），但在较新的版本中它比以前容易得多：

[http://www.codeproject.com/Articles/20847/Passing-Arrays-in-SQL-Parameters-using-XML-Data-Ty](http://www.codeproject.com/Articles/20847/Passing-Arrays-in-SQL-Parameters-using-XML-Data-Ty)

另外，不要将任何内容放在 ViewState 中；真的没有理由这样做。

# javascript - Javascript URL 重定向

> ID：12753149
> 
> 赞同：-2
> 
> 时间：2012-10-05T19:52:03.323
> 
> 标签：javascript, url, redirect

我们的 Intranet 中有一个内部聊天频道。我们继续在聊天频道上发布有用的外部网站链接，以便与其他人分享这些文章。但是现在我们想首先在我们的内部网站上重定向文章，然后从那里将其重定向到互联网。

如何使用 JavaScript 实现这一点？

链接发布在聊天频道 --> 内部网站 --> 外部链接

我基本上会在聊天频道上放置一个链接，该链接应该转到内部网站并从那里重定向到外部网站。

有人可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:55:59.387

```
setTimeout("window.location.replace(\"" + newUrl + "\");", waitTime); 
```

您可以将 newUrl 作为 qs 变量传递给中间页面。你能告诉我们更多关于你的用例吗？您希望聊天应用自动获取这些链接吗？向聊天应用程序添加一个框，它会自动格式化吗？

# eclipse - Eclipse 无法在带有石英的 grails-app/jobs 文件夹中找到类

> ID：12753150
> 
> 赞同：0
> 
> 时间：2012-10-05T19:52:05.973
> 
> 标签：eclipse, grails, quartz-scheduler

我有一个使用石英的 grails 项目，但 Eclipse 似乎无法在 grails-app/jobs 文件夹中找到文件。我可以手动将石英文件夹添加为源文件夹，这样它就可以找到石英作业。似乎 eclipse 插件应该能够自动找到这个 - 这是插件的问题还是有办法配置 grails 来查找作业文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T01:10:21.403

I checked my project in STS 2.9.0M1 and the `jobs` folder shows up under `grails-app`. You are correct, STS doesn't seem to recognize this as a groovy source folder because "Open Type" doesn't bring it up any of the job files, but "Open Resource..." finds them.

I think this is because the `jobs` folder is a custom artifact type registered by the Quartz plugin. I don't think that the Eclipse Grails plugin is smart enough to find the custom artifact directory.

# jquery - jQuery对MVC3中动态生成的单选按钮进行不显眼的验证？

> ID：12753152
> 
> 赞同：2
> 
> 时间：2012-10-05T19:52:10.047
> 
> 标签：jquery, asp.net-mvc, jquery-validate

我有一个动态表单应用程序，并且正在尝试对表单元素应用适当的不显眼的验证，并且无法让表单以我想要的方式显示验证错误。

我呈现单选按钮表单项的部分视图如下所示：

```
@model FormItem

<div class="form-row">
<div class="form-item">@Model.Text</div>
<div class="form-item-responses">
    @foreach(FormItemResponse formItemResponse in Model.Responses.OrderBy(x => x.SortOrder))
    {
        if(Model.Required)
        {
            @Html.RadioButton(Model.Id.ToString(), formItemResponse.Id, formItemResponse.DefaultSelection, new { @class = "required", data_val = "true", data_val_required = "*"}) @formItemResponse.Text

        }
        else
        {
             @Html.RadioButton(Model.Id.ToString(), formItemResponse.Id, formItemResponse.DefaultSelection) @formItemResponse.Text
        }

        <text>&nbsp; &nbsp;</text>
    }
    <span class="field-validation-valid" data-valmsg-for="@Model.Id.ToString()" data-valmsg-replace="true"></span>
</div> 
```

这是给不熟悉 MVC 的人的最终标记：

```
<div class="form-row">
<div class="form-item">Form Item Text Here</div>
<div class="form-item-responses">
    <input class="required" data-val="true" data-val-required="*" name="026d44a7-fa55-4fe8-8d2f-4f561c77c716" type="radio" value="dcfa4a9a-53e1-44d5-b6b3-a133673bfa2e" />Yes            &nbsp; &nbsp;
    <input class="required" data-val="true" data-val-required="*" name="026d44a7-fa55-4fe8-8d2f-4f561c77c716" type="radio" value="0042876b-2362-4f65-9c8a-dddf7f8206e8" />No            &nbsp; &nbsp;
    <input class="required" data-val="true" data-val-required="*" name="026d44a7-fa55-4fe8-8d2f-4f561c77c716" type="radio" value="a0918eab-93b6-4e45-a78d-301e28571037" />NA            &nbsp; &nbsp;
    <span class="field-validation-valid" data-valmsg-for="026d44a7-fa55-4fe8-8d2f-4f561c77c716" data-valmsg-replace="true"></span>
</div> 
```

在作品中，任何一组单选按钮都会得到正确验证，并且`*`出现在项目旁边。但是，我想做的是将所有内容的文本颜色更改`.form-item-responses`为红色。不仅仅是验证错误消息。

我怎样才能做到这一点？我尝试使用`invalidHandler`这样的：

```
 $("#items-form").validate({
      invalidHandler: function (form, validator) {
          var errors = validator.numberOfInvalids();
          console.log(errors);
          $("input.input-validation-error").each(function() {
              this.parent().css("color", "red");
          });
      }
  }); 
```

但这似乎覆盖了默认行为，只是`This field is required`在每个答案组中的第一个单选按钮旁边放了一个黑色。我想要默认行为，然后只是这个额外的变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:45:18.217

我解决这个问题的方法是从表单中获取验证器作为变量，然后访问 document.ready 中的设置，如下所示：

```
 var validatorData = $('#items-form').data('validator');
        validatorData.settings.highlight = function (element, errorClass) {
            $(element).parent().parent().css("color", "red");
        }; 
```

我不确定为什么我尝试的第一种方法不起作用。因为这似乎是文档和许多在线示例中的方式。

# php - CakePHP 2 时间格式

> ID：12753154
> 
> 赞同：0
> 
> 时间：2012-10-05T19:52:15.747
> 
> 标签：php, cakephp, datetime, timezone, cakephp-2.0

我的时间格式有问题 我有这样的代码

```
 //in the core file it set to UTC
        debug(date_default_timezone_get());
        $currentTime = time(); //UTC

        //CurrentTime in UTC
        debug(date('Y-m-d H:i:s',$currentTime));

        $timepst = CakeTime::format('Y-m-d H:i:s', $currentTime, null, 'PST');
        $timejst = CakeTime::format('Y-m-d H:i:s', $currentTime, null, 'JST');

        //I'm trying to convert back the time from PST to UTC using PST time
        $timeutc = CakeTime::format('Y-m-d H:i:s', strtotime($timepst), null, 'UTC');

        debug('PST : ' . $timepst);
        debug('JST : ' . $timejst);
        debug('UTC : ' . $timeutc); 
```

结果是

```
'UTC'

'2012-10-05 19:44:50'

'PST : 2012-10-05 12:44:50'

'JST : 2012-10-06 04:44:50'

'UTC : 2012-10-05 12:44:50' 
```

我的问题是，为什么使用 PST 时间转换回 UTC 不起作用？有什么帮助吗？

基本上，我想让用户根据他们自己的时区（用于日期输入）保存一些文章，但我需要将其转换回 UTC 以将其保存在数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:01:35.860

转换是根据服务器时区和作为参数传递给 CakeTime::format() 的用户时区之间的时差来完成的。在第三次调用 CakeTime::format() 的示例代码中，您将用户时区作为 UTC 传递，服务器的时区也是 UTC，因此时间不会发生变化。

# ruby-on-rails - 回形针::NotIdentifiedByImageMagickError in Spree::Admin::ImagesController#create

> ID：12753157
> 
> 赞同：3
> 
> 时间：2012-10-05T19:52:30.950
> 
> 标签：ruby-on-rails, imagemagick, paperclip, spree

我第一次尝试设置 Spree。一切都很顺利，直到我点击图片上传。我已经在 Mac OSX Mountain Lion 上使用自制软件安装了 Imageamgick。上传任何图片都会出现以下错误。

```
Paperclip::NotIdentifiedByImageMagickError in Spree::Admin::ImagesController#create

    Command :: identify -format %wx%h :file
[paperclip] An error was received while processing: #<Paperclip::NotIdentifiedByImageMagickError: /var/folders/fq/9g_6hmg513g6137rb6sbghw00000gn/T/stream20121005-26943-16883d4.png is not recognized by the 'identify' command.>

Paperclip::NotIdentifiedByImageMagickError (/var/folders/fq/9g_6hmg513g6137rb6sbghw00000gn/T/stream20121005-26943-16883d4.png is not recognized by the 'identify' command.):
  paperclip (2.7.1) lib/paperclip/geometry.rb:29:in `from_file'
  spree_core (1.2.0) app/models/spree/image.rb:35:in `find_dimensions'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__1794851703999987262__post_process__1580526166879208018__callbacks' 
```

当我从命令行运行识别时，我得到以下输出

```
 Image Settings:
  -alpha option        on, activate, off, deactivate, set, opaque, copy
                       transparent, extract, background, or shape
  -antialias           remove pixel-aliasing
  -authenticate password
                       decipher image with this password
  -channel type        apply option to select image channels
  -colorspace type     alternate image colorspace
  -crop geometry       cut out a rectangular region of the image
  -define format:option
                       define one or more image format options
  -density geometry    horizontal and vertical density of the image
  -depth value         image depth
  -extract geometry    extract area from image
  -features distance   display image features (e.g. contrast, correlation)
  -format "string"     output formatted image characteristics
  -fuzz distance       colors within this distance are considered equal
  -gamma value         of gamma correction
  -interlace type      type of image interlacing scheme
  -interpolate method  pixel color interpolation method
  -limit type value    pixel cache resource limit
  -monitor             monitor progress
  -ping                efficiently determine image attributes
  -quiet               suppress all warning messages
  -regard-warnings     pay attention to warning messages
  -respect-parentheses settings remain in effect until parenthesis boundary
  -sampling-factor geometry
                       horizontal and vertical sampling factor
  -seed value          seed a new sequence of pseudo-random numbers
  -set attribute value set an image attribute
  -size geometry       width and height of image
  -strip               strip image of all profiles and comments
  -unique              display the number of unique colors in the image
  -units type          the units of image resolution
  -verbose             print detailed information about the image
  -virtual-pixel method
                       virtual pixel access method

Image Operators:
  -negate              replace every pixel with its complementary color 

Miscellaneous Options:
  -debug events        display copious debugging information
  -help                print program options
  -list type           print a list of supported option arguments
  -log format          format of debugging information
  -version             print version information

By default, the image format of `file' is determined by its magic
number.  To specify a particular image format, precede the filename
with an image format name and a colon (i.e. ps:image) or specify the
image type as the filename suffix (i.e. image.ps).  Specify 'file' as
'-' for standard input or output. 
```

任何帮助将不胜感激。

谢谢，科里

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-07T18:44:16.853

我的错误是 - “<strong>Paperclip::NotIdentifiedByImageMagickError in Spree::Admin::ImagesController”</p>

几天前我修复了这个错误。

在此之前我尝试过：

*   更新 XCode（使用命令行工具）
*   更新 Imagemagick（我从源代码和二进制模块尝试过）
*   更新 MacPort
*   使用 Brew（使用 Imagemagic 的所有依赖项刷新，使用“brew doctor”），而不是 MacPort
*   重新安装所有使用 Imagemagick 的 gem
*   捆绑更新
*   ETC

并且确定我在 production.rb 文件中有我的“Paperclip::Attachment.default_options[:command_path]”选项指向 Imagemagick bin 文件夹。

我从头到尾做了几次，一次又一次。

但没有什么能帮助我。

顺便说一句，*在所有情况下，我都可以很好*地使用任何类型的测试图像进​​行“转换”、“识别”和“显示”，但在我的 Rails 应用程序（spree 应用程序）中却没有。

我潜入北斗并尝试在 Rails 控制台内进行研究

```
Paperclip.run("identify", "-format %m :file", :file => "/path/to/image”) 
```

就像回形针一样。并且只有此命令的新格式（可卡因 0.4）：

```
Paperclip.run("identify", "-format %m /path/to/image") 
```

工作正常！！！

结果，我发现**可卡因 0.4 是我问题的根源**。我尝试在我的 Gemfile 中降级到可卡因 0.3.2，我的 Spree 应用程序开始工作！！！

我需要做的就是**使用可卡因 0.3.2 而不是 0.4**！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:57:28.450

检查 png 格式是否在识别的编译格式列表中：

```
identify -list format 
```

如果不是，您可能必须使用以下选项重新编译它：

```
./configure --prefix=/usr/local --with-bzlib=yes --with-fontconfig=yes --with-freetype=yes --with-gslib=yes --with-gvc=yes --with-jpeg=yes --with-jp2=yes --with-png=yes --with-tiff=yes 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T05:37:04.620

当公共文件夹中不存在图像文件时，我也遇到了问题。
**我刚刚复制了一个**同名的随机文件，一切都开始工作了。

```
parepclip 2.7.5 cocain 0.3.2 
```

# jquery - 如何在 jQuery Mobile 中返回 1 个结果动态页面生成？

> ID：12753162
> 
> 赞同：1
> 
> 时间：2012-10-05T19:53:06.583
> 
> 标签：jquery, ajax, mobile, dynamic

我需要在此处输入一个参数，以便每页仅显示一首诗。但是，我不知道该放什么或放哪里。我希望我展示的是正确的代码部分。

我的书和章节列表加载正常，但是当显示章节副本时，我的所有经文都显示在一页上。

```
// append verses as paragraphs
var chapterHTML = '';
$( verseNodeName , chapter).each(function(i) {
   var vers = $(this);
   chapterHTML += '<p><sup>'+ (i+1) +'</sup> '+ vers.text() +'</p>'
 });

// Get the empty page we are going to insert our content into.
var $page = $('#chapter');

// Get the header for the page to set it
$header = $page.children( ":jqmData(role=header)" );
$header.find( "h1" ).html( book.bname +' '+ chapterNum );

// Get the content element for the page to set it
$content = $page.children( ":jqmData(role=content)" );
$content.html(chapterHTML); 
```

我希望有人可以帮助我......这是我得到演示/代码的地方，如果有人可以提供帮助：[http ://www.moretechtips.net/2012/07/dynamic-page-generation-in-jquery.html](http://www.moretechtips.net/2012/07/dynamic-page-generation-in-jquery.html)

# nhibernate - NHibernate删除父级时删除ManyToMany记录

> ID：12753163
> 
> 赞同：0
> 
> 时间：2012-10-05T19:53:11.403
> 
> 标签：nhibernate, nhibernate-3

我正在使用遗留代码（所以我想尽可能少地改变它），我在这里的多对多关系遇到了一些麻烦。

这是我所拥有的：

```
public class Feature {
   List<Profile> Profiles{get;set;}
}

public class Profile{
   List<FeatureProfile> Features{get;set;}
}

public class FeatureProfile {
   Feature Feat {get;set;}
   Profile Profile {get;set;}
} 
```

他们的映射是这样的：

```
mapper.Class<Feature>(m=>
    m.Bag(x => x.Profiles, bagMap =>
                    {
                        bagMap.Table("FeatureProfile");
                        bagMap.Key(key=>key.Column("FeatureId"));
                        bagMap.Cascade(Cascade.All | Cascade.DeleteOrphans);
                    },map=>map.ManyToMany(manyToMany=>manyToMany.Column("ProfileId")))
);

mapper.Class<Profile>(m=>
    m.Bag(x => x.Features, bagMap =>
                    {
                        bagMap.Key(key=>key.Column("ProfileId"));
                        bagMap.Inverse(true);
                        bagMap.Cascade(Cascade.All | Cascade.DeleteOrphans);
                   })
);

mapper.Class<FeatureProfile>(m=> {
    m.ManyToOne(x => x.Profile, x => x.Column("ProfileId"));
    m.ManyToOne(x => x.Feat, x => x.Column("FeatureId"))
}); 
```

我需要的是：当我删除一个功能时，它的功能配置文件也会被删除。请注意，我认为这可能适用于 NHibernate 2.x

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:26:11.143

我的经验更多是使用 XML 映射，但我想说下面的行无论如何都可以帮助你。NHibernate 为**m:n**关系提供直接映射（使用**Pair-table**，如上例所示）。您可以完全删除对象*FeatureProfile*。该关系将被隐式映射，并且在删除任何两端（配置文件或特征）时同样适用

```
<class name="Feature"...>
... 
<bag name="Profiles" lazy="true" 
    table="FeatureProfile" cascade="none" >
  <key column="FeatureId" />
  <many-to-many class="Profile" column="ProfileId" />
</bag>
...

<class name="Profile"...>
... 
<bag name="Features" lazy="true" 
    table="FeatureProfile" cascade="none" >
  <key column="ProfileId" />
  <many-to-many class="Feature" column="FeatureId" />
</bag>
... 
```

而在这种情况下，NHibernate 没有其他办法，在删除 Feature 时，也要删除 Pair-table 记录（不能/不应该让 DB 不一致）。

已编辑：在这种情况下，袋子的级联应该是无。delete-orphan 会导致非常危险的删除：不仅是对，还有关系的末端。

由 OP 编辑​​：这是我们使用按代码映射的内容：

```
mapper.Class<Profile>(m =>
{
    m.Bag(x => x.Features, bagMap =>
    {
        bagMap.Table("FeatureProfile");
        bagMap.Key(key=>key.Column("ProfileId"));
        bagMap.Lazy(CollectionLazy.Lazy)
        bagMap.Inverse(false);
        bagMap.Cascade(Cascade.None);
    },map=>map.ManyToMany(manyToMany=>manyToMany.Column("FeatureId")))
}

mapper.Class<Feature>(m =>
{
    m.Bag(x => x.Profiles, bagMap =>
    {
        bagMap.Table("FeatureProfile");
        bagMap.Key(key=>key.Column("FeatureId"));
        bagMap.Lazy(CollectionLazy.Lazy)
        bagMap.Inverse(false);
        bagMap.Cascade(Cascade.None);
    },map=>map.ManyToMany(manyToMany=>manyToMany.Column("ProfileId")))
}); 
```

# javascript - click() 后函数停止

> ID：12753169
> 
> 赞同：0
> 
> 时间：2012-10-05T19:53:45.320
> 
> 标签：javascript, jquery

我正在尝试模拟两次单击以打开菜单。第一个打开菜单，第二个打开子菜单，但在第一次 click() 后功能停止。

这是我的 JS 代码：

```
function open_menu(id_menu, id_sub_menu) {
    $('.sous-domaines a#lien-domaine-'+id_menu).click();
    $('a#lien-menu-'+id_sub_menu).click();
} 
```

我用这段代码在 HTML 中调用我的函数：

```
<span onClick="open_menu('0', '116')">Open sub-menu</span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:02:39.960

好吧，您可以尝试一下，这几乎是您所拥有的，除了我没有在某处打开菜单这一事实

[http://jsfiddle.net/tRg3e/2/](http://jsfiddle.net/tRg3e/2/)

我认为 .click() 仅在您附加了处理程序时才有效，它不会触发对元素的本机点击。我在没有处理程序的情况下尝试过，并且链接不去

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:03:16.220

你能做这样的事情吗？第一次点击后设置一个布尔值

```
var IsClick = false;

function open_menu(id_menu, id_sub_menu) {
    $('.sous-domaines a#lien-domaine-'+id_menu).click();
     if (IsClick){ fnSecondClick();}   
}

function fnSecondClick() {
//open submenu

} 
```

或类似的东西 - 点击检查菜单是否可见：

```
function open_menu(id_menu, id_sub_menu) {
    $('.sous-domaines a#lien-domaine-'+id_menu).click();
     if ($(element).is(":visible")){ fnSecondClick();}   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:04:17.157

你应该远离在这样的元素中声明的“onClick”，如果我记得的话，这是不好的做法。尽管如此，它仍然有效。

如果您可以提供一些 HTML 代码，这将有助于阐明这个想法，但您可以设置一个触发事件，例如：

[http://jsfiddle.net/wrN2u/3/](http://jsfiddle.net/wrN2u/3/)

**编辑：**使用切换 - [http://jsfiddle.net/wrN2u/18/](http://jsfiddle.net/wrN2u/18/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T19:55:58.113

你可能做得太快了。

将第二个包裹在一个`window.setTimeout()`

# vb.net - 使用 vb.net 在表中创建 html 表

> ID：12753171
> 
> 赞同：0
> 
> 时间：2012-10-05T19:53:51.077
> 
> 标签：vb.net, html-table

试图弄清楚我做错了什么。我正在做的是在表中创建一个表。请注意下面使表格正常工作的功能，并对其进行了测试。下面是我的代码，任何帮助将不胜感激。当我运行它时，它显示的是我创建的控件（表）中的最后一行。

```
 Dim tblrow As TableRow
 Dim tblcell As TableCell

 tblrow = New TableHeaderRow

 tblcell = New TableHeaderCell
 tblcell.Controls.Add(add_table(zone_name, hgt, randomNum, fontSize, tblID))
 tblrow.Cells.Add(tblcell)

  Table1.Rows.Add(tblrow) 
```

# java - getEngineByName("JavaScript") 的 ScriptEngine 为 Null？

> ID：12753175
> 
> 赞同：3
> 
> 时间：2012-10-05T19:53:59.420
> 
> 标签：java, javascript, rhino

```
ScriptEngine engine = new ScriptEngineManager().getEngineByName("JavaScript"); 
```

引擎为空？？？我也尝试遍历 scriptEnginefactories 它为零...

我的类路径上有 js-1.7R1.jar ......谁能告诉我我还需要做什么来注册 javascript 引擎（我发现 Rhino 是 js-1.7r.jar）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-07T01:02:20.600

“ *Eclipse 使用自己的编译器，但使用系统的 JRE……* ” - Bart Kiers

确保 JRE 为 1.6 或更高版本。根据评论，Jeryl Cook 将 eclipse 设置为 JRE 1.5。他从 Eclipse 中删除了这个并添加了 JRE 1.6，它可以工作并解决他的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-19T12:35:12.563

我在 JDK 11 上遇到了同样的问题。使用 JDK 8 解决了这个问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-07T00:56:33.330

确保你有

> sun.org.mozilla.javascript.internal，com.sun.script.javascript；

类路径中的包。
您尝试运行的是 Java SE（Java Scripting Api）中 Rhino 的 fork 版本。看起来你的 Java 没有它（检查上面的包）。我相信 js-1.7R1.jar 是来自 mozilla 的原始 Rhino 实现 - 您可以尝试直接运行它[link](https://developer.mozilla.org/en-US/docs/Rhino/Embedding_tutorial)，而不是通过 Java Scripting API。

# javascript - 跟踪用户观看视频的时长

> ID：12753185
> 
> 赞同：11
> 
> 时间：2012-10-05T19:54:41.777
> 
> 标签：javascript, html5-video

我教一门在线课程，我需要确保我的学生确实观看了某个视频。现在，我明白一切都可能被击败，但我正在寻找的是 80/20 规则，即我可以做一些调整，开始为我的学生负责的旅程。

Q1：如果当前窗口失去焦点，有没有办法通过 JavaScript 触发事件？

Q2：有没有办法在视频播放完毕时触发事件？

Q3：有没有办法确保视频一直播放，而不是学生点击时间线的末尾？

我觉得不得不说（再次），请不要用“你在浪费时间，学生会打败你所做的任何事情”之类的方式来回答这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T05:42:16.040

你用的是什么播放器。如果您使用的是 JWPlayer 或 Flow Player 等开源视频播放器。您可以跟踪事件。我个人更喜欢流播放器，您可以使用谷歌分析来跟踪页面上您想要的持续时间和任何其他任务。

由于您在页面上有身份验证机制，因此您可以获得学生的用户名（或标识符）。将此事件作为标签推送到谷歌分析，您可以跟踪学生所做的每一件事，包括他点击的链接、播放内容的持续时间、他播放的时间......

*   你可以设置谷歌分析[http://www.google.lk/analytics/](http://www.google.lk/analytics/)它的免费 :)
*   事件跟踪指南[https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)
*   流播放器事件[http://flash.flowplayer.org/documentation/events/player.html](http://flash.flowplayer.org/documentation/events/player.html)

示例设置

```
 <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', '#########']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);

      })();

    </script> 
```

追踪

```
_gaq.push(['_trackEvent', 'Videos', 'Play', 'Gone With the Wind']); 
```

这是我从[http://vsp.ideawide.com/](http://vsp.ideawide.com/)获取的实时代码的一部分，我在其中跟踪了其中一些事件。

```
var events = {
    clip : {
        onStart: function(clip) {
            _gaq.push(['_trackEvent',"Videos", "Play", defaults.source]);
        },

        onPause: function(clip) {
            _gaq.push(['_trackEvent',"Videos", "Pause", defaults.source, parseInt(this.getTime())]);
        },

        onResume: function(clip) {
            _gaq.push(['_trackEvent',"Videos", "Resume", defaults.source, parseInt(this.getTime())]);
        },

        onSeek: function(clip) {
            _gaq.push(['_trackEvent',"Videos", "Seek", defaults.source ]);
        },

        onStop: function(clip) {
            _gaq.push(['_trackEvent',"Videos", "Stop", defaults.source, parseInt(this.getTime())]);
        },
         onFinish: function(clip) {
            _gaq.push(['_trackEvent',"Videos", "Finish", defaults.source]);
        }
    },
    onFullscreen: function() {
        _gaq.push(['_trackEvent',"Videos", "Full Screen", defaults.source]);
    },
    onError: function(errorCode , errorMessage) {
        _gaq.push(['_trackEvent',"Videos", "Error", defaults.source, errorCode ]);
    }
} 
```

作为最后一点，使用合适的球员进行正确的分析设置，您可以将您的 80/20 提高到 99/1。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T20:04:12.830

这是假设使用 video 标签的 HTML5 视频。

```
player = document.getElementById("player");

//Get current percent complete. You may want to check for 95%+ rather than 100%.
setInterval(function(){
    percentComplete = player.currentTime/player.duration;
}, 300); 

window.onblur = function() {
//this will be called when the window loses focus
}; 
```

您可以调用没有控件属性的视频标签来禁用搜索栏。然后，您可以使用以下方法触发点击播放：

```
player.play(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T22:19:40.417

**初始方法的问题**

> 我教一门在线课程，我需要确保我的学生确实观看了某个视频。

这就是问题所在。您的要求是学生实际*观看*视频，但我们能以编程方式做的最好的事情是确保视频由服务器发送并由客户端接收。除了使用面部识别和音频环回等极端措施外，您无法确定是否有人在观看，或者目标观众正在观看，或者有人在听。学生可以简单地开始播放视频并走开。

这听起来像是一种技术性，但实际上这是一个重要的区别。您所拥有的相当于一个旨在确保有人阅读一本书的系统，但该系统所能做的就是检查该书在任何给定时间是打开还是关闭。

**安全**

> 现在，我明白一切都可能被击败，但我正在寻找的是 80/20 规则，即我可以做一些调整，开始为我的学生负责的旅程。

任何事情都可以通过足够的努力被击败，但建议的解决方案几乎可以毫不费力地被击败。如果您的普通用户欺骗系统比合法使用它更容易，那么它可能不值得实施。

**另一种方法**

与其关注浏览器是否正在播放视频，不如考虑将焦点转移回用户身上。通过在显示视频时要求一些*特定*的用户交互，您将能够对系统有更高的信心。

最简单的方法是将视频分成几个小部分，在每个播放后显示一个指向下一个视频的链接。

然后，您可以编写一个小脚本来显示对该系列视频（每个用户）的请求之间的时间，并根据片段的长度标记任何相距太远或太近的请求（或者与平均值进行比较，如果由于某种原因数据不可用）。如果您有权访问这些数据，则可以直接从服务器日志中提取这些数据，或者您可以自己记录。

**理解**

如果您想采取额外的步骤并测试理解（或保留），这种替代方法很容易扩展。与其有一个指向下一个视频的链接，不如有几个指向它的链接，以问题答案的形式。如果您担心学生分享答案，请不要告诉他们是否正确，只需将他们发送到下一个视频即可。您可以稍后查看此数据并决定是否要使用它以及如何弯曲它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T20:02:02.417

Q1：寻找事件 onblur

Q2：这取决于你的球员。有 Flash 视频播放器，您可以使用 ExternalInterface.call("myFunctionName()"); 调用 javascript 函数；来自 AS3

Q3：我会尝试找到一个具有所有选项的 Flash 播放器，但我的解决方案更多的是 as3 到 javascript。

我希望这可以帮助你！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T19:59:31.433

也许为视频的长度做一个 setTimeout 并在视频的长度过去后触发一个事件。

试试这个来检测窗口何时失去焦点：

```
window.onblur = function() {
   //do something here...
}; 
```

如果你真的担心 setTimeout 的准确性，不妨试试这个：

```
var start = (new Date).getTime();

function CheckTime() {

   var diff = (new Date).getTime() - start;
   if (diff >= videoLength) {
       FireVideoDoneEvent();
   }
   else {
       setTimeout(function() {
           CheckTime();
       }, 1000);
   }

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-05T20:14:09.060

1.  如前所述，处理 window.onblur
2.  视频完成后，您将触发“结束”事件
3.  您可以调用 mediaElement.played.end() 以获取在浏览器中播放的秒数。

看[这里](http://www.html5rocks.com/en/tutorials/video/basics/)和[这里](https://developer.mozilla.org/en-US/docs/Using_HTML5_audio_and_video?redirectlocale=en-US&redirectslug=Using_audio_and_video_in_Firefox#Specifying_playback_range)

# makefile - GNU Make：使用替换归档库成员

> ID：12753195
> 
> 赞同：1
> 
> 时间：2012-10-05T19:55:35.850
> 
> 标签：makefile, gnu-make

下面的两个选项有什么区别？在这两种情况下都不会`$<`扩展到只有一个`requisite`（根据定义为“第一个”）？

**选项1：**

```
libcounter.a(lexer.o): lexer.o
  $(AR) $(ARFLAGS) $@ $<

libcounter.a(counter.o): counter.o
  $(AR) $(ARFLAGS) $@ $< 
```

**选项 2：**

```
libcounter.a: lexer.o
  $(AR) $(ARFLAGS) $@ $<

libcounter.a: counter.o
  $(AR) $(ARFLAGS) $@ $< 
```

ARFLAGS`rv`在这两种情况下都成立。

作为参考，这些示例取自《[使用 GNU Make 管理项目](https://rads.stackoverflow.com/amzn/click/com/0596006101)》一书。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:16:30.523

在第一个选项中，`make`知道足够了解对象内部`libcounter.a`以`lexer.o`查看它是否需要使用新对象更新库。在第二个选项中，将库本身的时间戳与对象进行比较，这可能会导致库的更新丢失——例如，假设 1)`lexer.o`构建，然后 2)`counter.o`构建，然后 3)`libcounter.a`新`lexer.o`添加；现在在这一点上，时间戳`libcounter.a`比 更新`counter.o`，因此`make`错误地断定它不需要将新的添加`counter.o`到库中。

# c++ - 黑莓 C++ Cascade 中的控制台

> ID：12753206
> 
> 赞同：-2
> 
> 时间：2012-10-05T19:56:11.187
> 
> 标签：c++, cascade, blackberry-10

我想`console.log`在我的应用程序中使用在控制台窗口中打印输出，但编译器报告此错误

```
Description Resource    Path    Location    Type
'console' was not declared in this scope    CalcolatorQML.cpp   ‪/CalcolatorQML/src‬    line 27 C/C++ Problem 
```

现在我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T05:02:30.050

如果 QML 中的 console.log() 和 CPP 中的 qDebug<< 没有在控制台中打印消息，请在 main.cpp 类中使用以下方法

```
void myMessageOutput(QtMsgType type, const char* msg){
                fprintf(stdout, "%s\n", msg);                
                fflush(stdout);
} 
```

并且在主函数中使用“qInstallMsgHandler(myMessageOutput);” 像下面这样

```
int main(int argc, char **argv)
{
    Application app(argc, argv);
    qInstallMsgHandler(myMessageOutput);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:25:14.060

BB10 上没有控制台窗口。要登录到 IDE 控制台终端，您可以使用 stdout/stderr (cout/cerr) 但这些应在生产之前删除。在生产模式下输出到 stdout/stderr（没有附加调试器）最终存储在设备“磁盘”上，占用空间并导致闪存设备不必要的磨损。

对于生产错误日志，您应该直接使用 slog2 工具或使用 QDebug 对象。

# multithreading - Perl 线程中的垃圾收集

> ID：12753208
> 
> 赞同：8
> 
> 时间：2012-10-05T19:56:27.077
> 
> 标签：multithreading, perl, garbage-collection

这个问题很有趣，因为以下两个程序之一有效。

我正在使用 Image::Magick 来调整一些照片的大小。为了节省一点时间，我在自己的线程中处理每张照片，并使用信号量来限制同时工作的线程数。最初我允许每个线程同时运行，但脚本会很快为所有照片分配 3.5 GB（我只有 2GB 可用），并且由于所有交换到磁盘，脚本的运行速度会比正常慢 5 倍。

工作的信号量版本代码如下所示：

```
use threads;
use Thread::Semaphore;
use Image::Magick;

my $s = Thread::Semaphore->new(4);
foreach ( @photos ) {
    threads->create( \&launch_thread, $s );
}
foreach my $thr ( reverse threads->list() ) {
    $thr->join();
}

sub launch_thread {
    my $s = shift;
    $s->down();
    my $image = Image::Magick->new();

    # do memory-heavy work here

    $s->up();
} 
```

这很快分配了 500MB，并且运行得非常好，不需要更多。（线程以相反的顺序连接以表明一个观点。）

我想知道同时启动 80 个线程并阻塞其中大部分是否会产生开销，因此我更改了脚本以阻塞主线程：

```
my $s = Thread::Semaphore->new(4);
foreach ( @photos ) {
    $s->down();
    threads->create( \&launch_thread, $s );
}
foreach my $thr ( threads->list() ) {
    $thr->join();
}

sub launch_thread {
    my $s = shift;
    my $image = Image::Magick->new();

    # do memory-heavy work here

    $s->up();
} 
```

这个版本开始很好，但逐渐积累了原版使​​用的 3.5GB 空间。它比一次运行所有线程要快，但仍然比阻塞线程慢很多。

我的第一个猜测是线程使用的内存在调用 join() 之前不会被释放，并且由于它是阻塞的主线程，因此在所有线程都被分配之前不会释放线程。然而，在第一个工作版本中，线程以或多或少的随机顺序通过保护，但以相反的顺序加入。如果我的猜测是正确的，那么，在任何时候都应该有不止四个正在运行的线程在等待加入（），而且这个版本也应该更慢。

那么为什么这两个版本如此不同呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T20:04:29.433

您不需要创建超过 4 个线程。一个主要的好处是这意味着 Perl 解释器的副本减少了 76 个。此外，由于所有线程或多或少同时完成，因此它使收割顺序变得毫无意义。

```
use threads;
use Thread::Queue qw( );
use Image::Magick qw( );

use constant NUM_WORKERS => 4;

sub process {
   my ($photo) = @_;
   ...
}

{
   my $request_q = Thread::Queue->new();

   my @threads;
   for (1..NUM_WORKERS) {
       push @threads, async {
          while (my $photo = $request_q->dequeue()) {
             process($photo);
          }
       };
   }

   $request_q->enqueue($_) for @photos;
   $request_q->enqueue(undef) for 1..NUM_THREADS;
   $_->join() for @threads;
} 
```

# java - 根据每个元素的值之和拆分数组

> ID：12753210
> 
> 赞同：2
> 
> 时间：2012-10-05T19:56:34.550
> 
> 标签：java, arrays, split, sub-array

假设输入数组的元素按升序排列，如下例所示：

```
int[] a= {23,24,25,30,34,36,40,41,43,45,50}; 
```

我需要将数组拆分为不同的子数组。每个子数组将包含元素，使得它们的总和小于或等于 100。

对于上述输入，我的输出应该是：

```
b1[]= {23,24,25};

b2[]= {30,34,36};

b3[]= {40,41};

b4[]= {43,45};

b5[]= {50}; 
```

输入数组中元素的值和数量可能会有所不同。

我对 Java 很陌生，我完全被卡住了。请建议我继续进行的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:11:25.413

如果数字的顺序很重要，你可以这样写（这段代码只打印太阳数组）

```
int sum = 0;
for(int i=0;i<a.length;i++){
   if(sum + a[i] <= 100){
       sum += a[i];
       System.out.print(a[i]+" ");
   }else{
       sum = 0;
       System.out.println("");
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:21:01.503

我将为您提供一些有关如何执行此操作的想法，并将编码留给您。如果您对实现的特定部分有疑问，请随时提问。

您必须在这里做的第一件事是创建一个存储子数组的地方。由于您不知道最终会得到多少个子数组，因此像 a 这样的动态`List`将是一个不错的选择，但如果您还没有了解这些，那么大数组也可以完成这项工作。

大阵列应该多长？嗯，每个子数组都小于 100，对吧？您可以将输入中的所有元素相加并除以 100 以获得估计值。

完成初始设置后，您需要弄清楚如何将输入数组拆分为子数组。你知道子数组的规则是“小于 100”，所以你必须做一些加法。

一个一个地查看输入元素。它们中的每一个都必须以一个子数组结尾；唯一的问题是何时停止一个子阵列并开始下一个子阵列。因此，如果添加下一个输入数字会使您的子数组总数超过 100，请将当前子数组存储在大数组中，并将该输入放入一个全新的子数组中。

当然，将之前添加的一堆数字加起来是浪费时间。您可以在旁边保留一个单独的变量来存储当前子数组的总数，这样您就不必为每个输入添加当前子数组上的所有元素。请记住在创建新子数组时将该变量重新设置为 0！

最后，您可能会用完子阵列或大阵列中的空间。如果发生这种情况，只需创建一个两倍大的新值并将当前值复制进去。

# django - 使用 POST 请求登录到 Django 站点

> ID：12753213
> 
> 赞同：1
> 
> 时间：2012-10-05T19:57:10.010
> 
> 标签：django, vb.net, authentication

我正在编写一个需要将数据发送到 Django 站点的 VB.NET 程序，但该站点受密码保护。因此我需要先登录。我现在使用的代码是：

```
Dim reqT As HttpWebRequest
Dim resT As HttpWebResponse
reqT = WebRequest.Create("http://websiteURL/login/")
reqT.Method = "POST"

Dim Data As String
Data = "{""username"":""fakeusername""&""password"":""fakepassword""}"
Dim credArray As Byte() = Encoding.UTF8.GetBytes(Data)
reqT.ContentType = "application/x-www-form-urlencoded"
reqT.ContentLength = credArray.Length
Dim dataStreamT As Stream = reqT.GetRequestStream()
dataStreamT.Write(credArray, 0, credArray.Length)
dataStreamT.Close() 
```

这从网络服务器返回 403 错误，不幸的是我不知道如何修复它。我认为这可能是 csrf 失败或者我的 POST 数据格式错误。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T20:20:03.943

对我来说听起来像是 CSRF 保护。Django CSRF 文档在这里：

*   [https://docs.djangoproject.com/en/dev/ref/contrib/csrf/](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/)

根据[工作原理部分](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#how-it-works)，您的 POST 请求将需要传递 CSRF 令牌和 CSRF cookie。

如果您向登录页面发出 GET 请求，您应该能够从 HTML 源中获取令牌。我猜你也可以访问cookie？

# spring - 需要帮助了解Tomcat线程池和JDBC连接池

> ID：12753219
> 
> 赞同：1
> 
> 时间：2012-10-05T19:57:51.480
> 
> 标签：spring, tomcat, jdbc, connection-pooling, c3p0

我已经使用 Tomcat 有一段时间了。但是我从来没有完全了解它是如何工作的，尤其是线程池和 JDBC 连接池。

以一个标准的 Spring Web 应用程序（带有 c3p0 连接池）为例。我的问题是

1.  当 TC 启动时，它是否创建了 N 个线程，每个线程都有一个 applicationContext？

2.  如果是这样，这是否意味着每个线程都会创建自己的 bean 实例列表？

3.  bean定义之一是

> ```
> <bean id="dataSource" class = "com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
>   <property name="driverClass" value="${db.driverClassName}"/>
>   <property name="jdbcUrl" value="${db.url}"/>
>   <property name="user" value="${db.username}"/>
>   <property name="password" value="${db.password}"/>
>   <property name="minPoolSize" value="5" />
> </bean> 
> ```

这将在创建此 bean 时创建 5 个 JDBC 连接。这是否意味着我们最终会得到

> 5 个连接 x N 个线程 = 5N 个连接？

这对我来说听起来不对。我认为 JDBC 池在所有线程之间共享。但显然 JDBC 池（定义为 ComboPooledDataSource bean）是作为 applicationContext 的一部分创建的，对吧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T20:08:08.813

> 当 TC 启动时，它是否创建了 N 个线程，每个线程都有一个 applicationContext？

不，它只创建一个上下文，其中包含可用于该 Web 应用程序中每个线程的所有 bean。这意味着 Spring bean（默认为单例）需要是线程安全的，因为它们通常由多个线程同时访问。这很好，因为通常 Spring bean 是无状态的，因此根据定义是线程安全的。

此外，只有一个 JDBC 连接池拥有 5 个连接。所有 Tomcat Web 线程（以及其他，如果已创建）都会竞争这 5 个连接。

因此，您剩下的问题不再相关。是什么让您认为 Spring 为每个线程创建上下文？

# openlaszlo - 为什么调试器说记录的 OpenLaszlo lz.FocusService.getFocus() 方法不存在

> ID：12753220
> 
> 赞同：0
> 
> 时间：2012-10-05T19:57:54.037
> 
> 标签：openlaszlo, lzx

[OpenLaszlo 编程平台（ http://www.openlaszlo.org/lps4.9/docs/reference/](http://www.openlaszlo.org/lps4.9/docs/reference/) ）的最新官方版本（4.9.0）的 lz.Focus 参考手册文档提供了许多调用方法的示例lz.FocusService 对象，但是，许多示例不起作用：

例如：

```
lz.FocusService.getFocus(); 
```

调用此命令会响应以下调试器窗口错误：

> TypeError：错误 #1006：getFocus 不是函数。

为什么我在尝试使用它时会出现此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:01:15.467

OpenLaszlo 4.9.0 参考手册文档令人困惑。使用相同的方法名称调用 lz.Focus 对象（而不是 lz.FocusService）似乎有效。

例如：

```
lz.Focus.getFocus(); 
```

这不会给出错误。

# printing - 适用于 Windows 8 的 V4 打印机驱动程序架构

> ID：12753225
> 
> 赞同：-3
> 
> 时间：2012-10-05T19:58:22.623
> 
> 标签：printing, windows-8, driver

Windows 8 引入了一种新的打印机驱动程序架构，称为 V4。与以前的打印机驱动程序架构相比有哪些主要变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T20:12:28.763

驱动程序的设计理念与 Metro 风格的应用程序体验和 Windows 商店保持一致。这里有一些变化：

1.  V4 驱动程序也是基于 XPS 过滤器管道的，因此没有核心更改。
2.  UI 插件支持已被删除。因此 UI 将基于传统的 PPD/GPD，否则 OEM 将不得不开发 Metro 应用程序以在 Metro 模式下运行并单独的桌面应用程序以提供自定义 UI。
3.  将为每个驱动程序分配一个 GUID，以便可以根据驱动程序 GUID 从 Windows 商店安装 Metro 风格的应用程序及其更新。
4.  添加了增强的指向和打印支持。这样，驱动程序将永远不会在 windows8 之前的 windows 版本上下载，但将使用默认点和打印驱动程序启用打印。

关于开发 v4 打印机驱动程序的白皮书：http: [//msdn.microsoft.com/en-us/library/windows/hardware/br259124.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/br259124.aspx)

# css - 在另一个 div 中居中 3 个 div（一个具有可变宽度，2 个具有固定宽度）

> ID：12753229
> 
> 赞同：0
> 
> 时间：2012-10-05T19:58:36.750
> 
> 标签：css, layout, html

我正在努力实现以下目标：

在一个用 div 固定的外部居中 3 个 div 标签

要居中的两个内部 div 标签是固定的（左侧和右侧的图像）。

内部 div 标记之一（在中心带有文本的标记）具有可变宽度。**注意：我还需要这个文本 div 垂直居中。**

这是我想要实现的目标：http: [//uploadpic.org/storage/2011/hDGazBwWF2QHzGipwkyJ7ESsX.gif](http://uploadpic.org/storage/2011/hDGazBwWF2QHzGipwkyJ7ESsX.gif)

如何做到这一点？我找到了类似问题的答案，但与我所描述的不完全一样。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:05:45.597

使用`vertical-align: middle`. 这是一个快速演示：http: [//jsbin.com/ujoket/1/edit](http://jsbin.com/ujoket/1/edit)

# ssh - 在 Nagios 中使用 check_by_ssh 产生奇怪的行为（和远程执行失败）

> ID：12753232
> 
> 赞同：1
> 
> 时间：2012-10-05T19:58:43.003
> 
> 标签：ssh, nagios, remote-execution

我是 Nagios 的新手，我一直试图让 Nagios 处理一些简单的 check_by_ssh 命令。我现在可以成功地从命令行运行命令，如下所示：

```
#/usr/local/nagios/libexec/check_by_ssh -H HERP.DERP.COM -C "/home/derrp/bin/...
 check_disk -w 50 -c 10 -A" 
```

哪个呈现

```
DISK OK - free space: blah blah blah 
```

所以，这很好；从命令行可以正常工作。但是，当我将它放入我的 commands.cfg 文件中（首先使用宏`$USER1$`，`$HOSTADDRESS$`虽然文字信息产生相同的结果），并检查 Nagios 的 Web 界面进行验证，它告诉我

```
Remote command execution failed: ssh_askpass: exec(/usr/bin/ssh-askpass): 
No such file or directory 
```

我已确保已安装 ssh-askpass。是什么赋予了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-02T13:41:20.500

出于某种原因，添加“-E”标志修复了它。根据`check_by_ssh`手册页，这是忽略`STDERR`标志。现在我得到了 check_raid 的输出。

最终命令：

> $USER1$/check_by_ssh -i ~nagios/.ssh/id_dsa -H $HOSTADDRESS$ -t 60 -l -l root -o StrictHostKeyChecking=no -o ConnectTimeout=15 -o BatchMode=yes -o ServerAliveCountMax=3 -o ServerAliveInterval =10 -C "/usr/local/libexec/nagios/check_raid" -E

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:30:50.323

您必须设置 ssh 密钥，以便“nagios”用户可以 ssh 到远程主机**而无需在私钥上设置密码**，否则它无法使用 check_by_ssh 运行检查。

直到你可以运行（*作为 nagios 用户*）这样的东西......

```
ssh [nagios@]remotehost.example.com /path/to/your/plugins/check_procs 
```

...您没有正确设置密钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T12:19:10.367

我有一个类似的问题 - 运行

```
sudo -u nagios check_by_ssh .... 
```

帮助 - 我对私钥的权限错误。但是 sudo 在这里是必不可少的 - 以 root 身份运行的工作不一定作为 nagios 工作。

# java - Java Apache POI 读取 Word (.doc) 文件并获取使用的命名样式

> ID：12753233
> 
> 赞同：1
> 
> 时间：2012-10-05T19:58:58.153
> 
> 标签：java, ms-word, apache-poi

我正在尝试使用 poi-scratchpad-3.8 (HWPF) 阅读 Microsoft Word 2003 文档 (.doc)。我需要逐字读取文件，或者逐字符读取文件。无论哪种方式都可以满足我的需要。一旦我阅读了一个字符或单词，我需要获取应用于单词/字符的样式名称。那么，问题来了，如何在读取 .doc 文件时获取用于单词或字符的样式名称？

**编辑**

我正在添加我用来尝试此操作的代码。如果有人想尝试这个，祝你好运。

```
private void processDoc(String path) throws Exception {
    System.out.println(path);
    POIFSFileSystem fis = new POIFSFileSystem(new FileInputStream(path));
    HWPFDocument wdDoc = new HWPFDocument(fis);

    // list all style names and indexes in stylesheet
    for (int j = 0; j < wdDoc.getStyleSheet().numStyles(); j++) {
        if (wdDoc.getStyleSheet().getStyleDescription(j) != null) {
            System.out.println(j + ": " + wdDoc.getStyleSheet().getStyleDescription(j).getName());
        } else {
            // getStyleDescription returned null
            System.out.println(j + ": " + null);
        }
    }

    // set range for entire document
    Range range = wdDoc.getRange();

    // loop through all paragraphs in range
    for (int i = 0; i < range.numParagraphs(); i++) {
        Paragraph p = range.getParagraph(i);

        // check if style index is greater than total number of styles
        if (wdDoc.getStyleSheet().numStyles() > p.getStyleIndex()) {
            System.out.println(wdDoc.getStyleSheet().numStyles() + " -> " + p.getStyleIndex());
            StyleDescription style = wdDoc.getStyleSheet().getStyleDescription(p.getStyleIndex());
            String styleName = style.getName();
            // write style name and associated text
            System.out.println(styleName + " -> " + p.text());
        } else {
            System.out.println("\n" + wdDoc.getStyleSheet().numStyles() + " ----> " + p.getStyleIndex());
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:14:49.343

我建议您查看[来自 Apache Tika 的 WordExtractor](http://svn.apache.org/repos/asf/tika/trunk/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/WordExtractor.java)的源代码，因为它是使用 Apache POI 从 Word 文档中获取文本和样式的一个很好的示例

根据您在问题中所做和未说的内容，我怀疑您正在寻找类似这样的内容：

```
 Range r = document.getRange();
    for(int i=0; i<r.numParagraphs(); i++) {
       Paragraph p = r.getParagraph(i);
       String text = p.getText();
       if( ! text.contains("What I'm Looking For")) {
          // Try the next paragraph
          continue;
       }

       if (document.getStyleSheet().numStyles()>p.getStyleIndex()) {
          StyleDescription style =
               document.getStyleSheet().getStyleDescription(p.getStyleIndex());
          String styleName = style.getName();
          System.out.println(styleName + " -> " + text);
       }
       else {
          // Text has an unknown or invalid style
       }
    } 
```

对于更高级的东西，看看 WordExtractor 源代码，看看你还能用这种东西做什么！

# android - android.os.Build.MODEL 稳定吗？

> ID：12753235
> 
> 赞同：0
> 
> 时间：2012-10-05T19:59:06.607
> 
> 标签：android

有谁知道 Build.Model 是否稳定？我们可以依靠它在制造商的更新之间不发生变化吗？

[http://developer.android.com/reference/android/os/Build.html#MODEL](http://developer.android.com/reference/android/os/Build.html#MODEL)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:07:41.643

> 我们可以依靠它在制造商的更新之间不发生变化吗？

是的，仅仅因为它是一个`static final`值，因此不能更改，除非通过“制造商更新”来更改类定义。

# jquery - jQuery链接单击数据表不起作用

> ID：12753242
> 
> 赞同：1
> 
> 时间：2012-10-05T19:59:51.057
> 
> 标签：jquery, datatables

我正在使用 jquery 数据表插件，第一行有两个链接。这些链接用于在点击时发送 ajax。由于我实现了数据表（我之前只有一个表），它停止工作。我环顾四周并尝试了两件事：

我原本有

```
 $(".approveReject").click(function () {
                   OnApproveRejectClick("voavi", this);
               }); 
```

但是将其替换为

```
$(document).delegate("click", '.approveReject', function (event) {
alert("clicked");
}); 
```

没有成功，所以我尝试将 fnInitComplete 回调添加到数据表初始化对象：

```
 "fnInitComplete": function () {
            $(".approveReject").click(function () {
                OnApproveRejectClick("voavi", this);
            });
        } 
```

依然没有。点击根本不起作用。知道我需要做什么才能将点击事件绑定到我的链接吗？谢谢

完整的数据表初始化

```
 $("#voaviTable").dataTable({
        "bJQueryUI": true,
        "bScrollInfinite": true,
        "bScrollCollapse": true,
        "iDisplayLength": 30,
        "sScrollY": "450px",
        "oLanguage": {
            "sSearch": "Filter: "
        },
        "aaSorting": [],
        "fnInitComplete": function () {
            $(".approveReject").click(function () {
                OnApproveRejectClick("voavi", this);
            });
        }
    }); 
```

表示例行：

```
<tr class="even">
<td class=" ">
<a id="lnkApprove" class="approveReject" href="#">Approve</a>
|
<a id="lnkReject" class="approveReject" href="#">Reject</a>
<span class="ui-icon ui-icon-circle-check" style="display: none;"></span>
<span class="ui-icon ui-icon-circle-close" style="display: none;"></span>
<img id="loaderGif" height="16px" style="display: none;" src="../../Content/images/loader.gif">
</td>
<td class="statusID "> 32 </td>
<td class="statusText "> new </td>
<td class=" "> </td>
<td class=" "> </td>
<td class=" "> Cote de Blancs </td>
<td class=" "> </td>
<td class=" "> </td>
<td class=" ">
<td class=" "> 10/5/2012 2:54:05 PM </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T20:07:54.857

您使用委托错误

```
$(document).delegate( '.approveReject', "click",function (event) {// <-- notice where the selector and event is
    alert("clicked");
}); 
```

虽然如果你使用 jQuery 1.7+ 使用 .on()

```
$(document).on("click", '.approveReject', function (event) {
    alert("clicked");
}); 
```

最好的办法是将事件绑定到您的表，因为它是最接近的静态父元素（我猜）

```
$('#voaviTable').on('click','.approveReject', function (event) { 
```

> $(document).delegate(selector, events, data, handler); // jQuery 1.4.3+
> 
> $(document).on(事件、选择器、数据、处理程序); // jQuery 1.7+

# c# - 检测控件何时在 WPF 中的画布上移动

> ID：12753245
> 
> 赞同：0
> 
> 时间：2012-10-05T20:00:00.820
> 
> 标签：c#, wpf, wpf-controls, hittest

我有一个自定义 UserControl，其位置绑定到 ViewModel 中的参数。

```
<Canvas Name="CursorCanvas">
    <ctrl:HandCursor x:Name="RightHandCursor" State="{Binding RightHandState}" Visibility="{Binding IsHandTracking, Converter={StaticResource BoolToVisibilityConverter}}" Canvas.Top="{Binding RightHandY}" Canvas.Left="{Binding RightHandX}" />
</Canvas> 
```

在这个控件内部，我正在执行 HitTest，以确定它下面的内容。当前，此 HitTest 连接到 DispatcherTimer ta 1 秒间隔。我宁愿告诉控件在 Canvas 上移动时执行 HitTest，但我无法找到如何在正在移动的 UserControl 中捕获 Canvas 位置更新。

如何在上面定义的“HandCursor”用户控件的代码隐藏中捕获 Canvas.Top/Left 移动更新？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:19:48.957

您可以通过覆盖和附加属性的属性元数据来添加[PropertyChangedCallback ：](http://msdn.microsoft.com/en-us/library/System.Windows.PropertyChangedCallback.aspx)`Canvas.Left``Canvas.Top`

```
static HandCursor()
{
    Canvas.LeftProperty.OverrideMetadata(
        typeof(HandCursor),
        new FrameworkPropertyMetadata(
            (o, e) => ((HandCursor)o).LeftPropertyChanged((double)e.NewValue)));

    Canvas.TopProperty.OverrideMetadata(
        typeof(HandCursor),
        new FrameworkPropertyMetadata(
            (o, e) => ((HandCursor)o).TopPropertyChanged((double)e.NewValue)));
}

private void LeftPropertyChanged(double left)
{
    ...
}

private void TopPropertyChanged(double top)
{
    ...
} 
```

# css - 从 Rails 中的 scss 文件复制 css

> ID：12753247
> 
> 赞同：1
> 
> 时间：2012-10-05T20:00:12.790
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, sass

我在 Firebug 中注意到`body`元素的 css 显示了两次（第一次所有规则都被删除）。第一个`body`元素来自 url：`http://localhost:3000/assets/application.css?body=1`

第二个`body`元素来自 url： `http://localhost:3000/assets/scaffolds.css?body=1`

我在名为 header.css.scss 的目录中添加了另一个 scss 文件`/app/assets/stylesheets`。`/assets/header.css`就像我想要的那样，它现在被包含在所有网页中。但是 application.css 再次在每个页面中复制其所有内容。

我做错什么了吗？我不应该在资产中创建 header.css.scss 文件吗？为什么我的所有 css 规则都被复制了？

***更新***：我的 application.css 文件中只有一些简单的 css：

```
/*
 * This is a manifest file that'll be compiled into application.css, which will include all the files
 * listed below.
 *
 * Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,
 * or vendor/assets/stylesheets of plugins, if any, can be referenced here using a relative path.
 *
 * You're free to add application-wide styles to this file and they'll appear at the top of the
 * compiled file, but it's generally better to create a new file per style scope.
 *
 *= require_self
 *= require_tree .
*/
body {
    margin: 0;
}
#content {
    padding: 10px;
    background-color: #eee;
}
code {
    background-color: #d0d0d0;
    padding: 1px 3px;
} 
```

我的 header.scss 文件与 application.css 没有任何共同之处：

```
@import "compass/css3/images";

header {
  border-bottom: 1px solid #6787d2;
  height: 7em;
  position: relative;
  background-color: #f0edee;
  background-image: url("/assets/background_header.png");
  padding: 10px 10px 0 10px;
  box-shadow: 0 -1px 3px #C0BABB inset;
}
header address {
  background-color: #b9dd8c;
  @include filter-gradient(#b9dd8c, #5ab86d, vertical);
  $experimental-support-for-svg: true;
  @include background-image(linear-gradient(top,  #b9dd8c 0%,#5ab86d 100%));
  border: 1px solid #15905b;
} 
```

`application.html.erb`布局只有一个 CSS 参考：

```
<!DOCTYPE html>
<html>
<head>
  <title>whatever</title>
  <%= stylesheet_link_tag "application", :media => "all" %> 
```

最后，视图没有任何对 CSS 的引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:51:36.853

你实际上并没有做错什么。

您可能会稍微误解您在萤火虫中看到的内容。

1.  您有多个与 body 标签匹配的 CSS 选择器。具有更具体选择器的 CSS 是根据 CSS 的工作方式应用的。Firebug 向您展示了所有匹配的 CSS，并删除了由实际应用的 CSS 重新定义的样式。

    如果对您来说重要的是不要让重新定义的 CSS 甚至首先应用，请将其应用于 body 标签的类或 id。

2.  添加 header.css 时，您应该期望 Rails 包含每个页面的 application.css、scaffolds.css 和 header.css 的所有内容。目的是将所有 CSS 预编译成一个主 CSS 文件，每个页面都会引用该文件。浏览器将只调用一次 CSS 文件，并将其缓存，因此它不必再次获取 CSS 文件。

    简单地说，将 header.css 添加到资产的目的是包含 header.css 和每个页面中的所有其他 CSS。要不应用将由重复规则重新定义的规则，由您来定义规则，以免它们无意重叠。（如果这是您想要的，它们应该只重叠。例如为 body 设置字体，然后更改 td 标签内的字体。）

我希望我明白你在问什么，这可以解决问题。

*评论后编辑的另一个答案*

我认为您可能正在做的是每次添加新的 CSS 文件时添加一个 stylesheet_link_tag。您应该只有一个 stylesheet_link_tag 用于应用程序，而不是任何用于脚手架或标题。通过在 application.css.scss 中包含脚手架和标头，它们已经被包含，并且使用 stylesheet_link_tag 再次包含它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:49:51.997

我通过重命名解决了这个`application.css`问题`application.css.scss`。我这样做是因为我想在整个应用程序范围内添加一些 scss，结果证明它删除了我网页中所有重复的 css。

所以我不知道最初是什么导致了重复..

# php - 将数据从条形码阅读器导入 Web 应用程序

> ID：12753248
> 
> 赞同：1
> 
> 时间：2012-10-05T20:00:12.993
> 
> 标签：php, barcode

我正在开发一个基于 PHP 的 Web 应用程序并添加对创建和读取条形码的支持。我想知道如何将通过 USB 连接的条形码阅读器中的数据导入运行 Web 应用程序的 PC？条码扫描仪是否有任何标准格式传输数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T20:08:04.150

显然取决于生产商和型号。更好的有不止一种模式。但是三种策略很常见：

1.）它们充当键盘，因此“键入”扫描的任何内容。这仅适用于小容量负载，并强制您连接到系统。因此，对于 Web 应用程序，您需要一个简单的文本输入字段。

2.) 它们包含某种内存（通常是 SD 插槽/卡），用于存储扫描的代码。这使您能够以异步时间表“上传”扫描的数据，例如在从商店旅行回来时或其他任何情况下。SD 卡有一个标准的文件系统，代码通常被扫描成 CSV 文件。因此，对于 Web 应用程序，您需要上传文件或必须批量处理代码。

3.) 他们使用 WLAN 并且可以使用诸如 REST-API 之类的东西来“上传”他们的数据。由于反馈存在问题，在我的经验中通常不能真正使用。对于 Web 应用程序，这意味着您必须添加这样的 API。

哦，还有一件有趣的事情：更好的必须被编程。这通常是通过从手册中扫描无穷无尽的系列代码来完成的。一个非常“有趣”的过程:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T20:03:24.643

大多数条形码扫描仪将自己作为键盘呈现给计算机。如果您使用的是其中之一，则数据格式将与正常输入相同。

您可以在 Web 应用程序中使用常规`<input>`（具有焦点）捕获数据。

# haskell - 你如何使用 Haskell 在同一个端口上运行 websockets 服务器和普通 HTTP 网络服务器？

> ID：12753249
> 
> 赞同：2
> 
> 时间：2012-10-05T20:00:22.680
> 
> 标签：haskell, websocket, socket.io

我一直在使用[Network.WebSockets](http://hackage.haskell.org/packages/archive/websockets/0.6.0.4/doc/html/Network-WebSockets.html)编写 websocket 服务器。

`runServer`你用这样的方式启动一个 websockets 服务器：

```
app :: Request -> WebSockets Hybi00 ()
app _ = app1
main :: IO ()
main = runServer "0.0.0.0" 8000 app 
```

但我真的希望 websockets 服务器与普通的 Snap 网络服务器一起用完端口 80。

Node.js 能够使用 Socket.io 来做到这一点（参见左侧示例中的[http://socket.io/#how-to-use ）。](http://socket.io/#how-to-use)

这是一个实现类似功能的 Ruby 库：[https ://github.com/simulacre/sinatra-websocket](https://github.com/simulacre/sinatra-websocket)

在 Haskell 中如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T01:24:24.690

[websockets-snap](http://hackage.haskell.org/package/websockets-snap)包有一个功能：

runWebSocketsSnap :: Protocol p => (Request -> WebSockets p()) -> Snap()

这应该让您可以在应用程序的几乎任何地方使用 websocket。这是一个简单的例子：

```
main = quickHttpServe $ route [ ("hello", writeText "hello world")
                              , ("websocket", runWebSocketsSnap ...)
                              ] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T20:22:24.103

Warp 提供了用于将常规 HTTP 请求提升为 WebSockets 请求的钩子。我不知道 Snap 的首选服务器是什么……这是我用于 Warp/WAI 应用程序的模式：

```
httpApp :: Application
httpApp req = ...

wsApp :: WebSockets.Request -> WebSockets Hybi10 ()
wsApp req = do
   -- check if the request should be handled
   if shouldHandleRequest
     then do
       acceptRequest
       ...

     else rejectRequest ...

main :: IO ()
main = do
  let settings = Warp.defaultSettings
        {settingsIntercept = WebSockets.intercept wsApp}

  Warp.runSettings settings httpApp
  return () 
```

# c# - 在inkcanavas中选择元素后如何取消选择元素

> ID：12753250
> 
> 赞同：0
> 
> 时间：2012-10-05T20:00:26.810
> 
> 标签：c#, wpf

我像这样选择一些元素`inkcanvas`：

```
List<UIElement> temp = e.GetSelectedElements().ToList();
SelectList.Add(temp.ElementAt(0));
inkcanvas.Select(SelectList);//in this line inckanvas editing mode change to select 
```

现在我想在单击其中一个时取消选择它，但是矩形`mouseclick`不会触发我无法确定单击的元素！任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T23:42:14.850

inkCanvas.Select(null, null); 这会成功的。

# php - 来自 Zend 的 passthru 的 PHP 实时输出

> ID：12753251
> 
> 赞同：0
> 
> 时间：2012-10-05T20:00:33.460
> 
> 标签：php, zend-framework, exec, command-line-interface

我正在使用 PHP+Zend 构建一些 CLI 进程（是的，我也讨厌它），我遇到了一个奇怪的问题，我不知道如何解决关于 exec() 或 passthru() 命令的输出的问题。

简而言之，我有一个*testexecAction*

```
fwrite(STDOUT,"First\n");
passthru("ping -c 3 192.168.18.10");
fwrite(STDOUT,"Second\n"); 
```

当我使用为 Zend 制作的 CLI 界面调用它时，我得到以下输出

```
~ php console.php --funcion testexec
First
Second
PING 192.168.18.10 (192.168.18.10): 56 data bytes
64 bytes from 192.168.18.10: icmp_seq=0 ttl=64 time=0.692 ms
... 
```

如您所见， passthru 命令的输出正在打印，但在“第二”行之后打印，就像它被保存在某个缓冲区中一样，我想更改此行为，以便输出不缓冲，但我没有想法如何完成它。其背后的原因是我正在使用 passthru/exec 来调用其他长的 php 进程，我想实时查看输出并按顺序排列

我猜它在某处是 Zend 选项，但我不确定“某处”，因为我已经使用原始 PHP 进行了其他测试，并且输出没有缓冲，而是直接打印到控制台。

我的 Zend CLI 界面相当简单

```
$_SERVER["REQUEST_URI"] = "/console/" . getConsoleArg("-function");
$application->bootstrap()
    ->run(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:38:26.373

我修复了它调用 ob_flush(); 关于我的内部流程输出。

# python - Python中的多重继承有问题吗？

> ID：12753260
> 
> 赞同：2
> 
> 时间：2012-10-05T20:01:55.970
> 
> 标签：python, python-3.x, multiple-inheritance

您好，我正在搜索 python 中的类继承，我看到它也支持多重继承，但不知何故似乎有问题：o 我找到了一个例子：

```
class ParentOne:
    def __init__(self):
        print "Parent One says: Hello my child!"
        self.i = 1

    def methodOne(self):
        print self.i

class ParentTwo:
    def __init__(self):
        print "Parent Two says: Hello my child"

class Child(ParentOne, ParentTwo):
    def __init__(self):
        print "Child Says: hello"
A=Child() 
```

输出

```
Child Says: hello 
```

那么当孩子继承 ParentOne 和 ParentTwo 为什么没有初始化这些类？我们应该在继承类 Child 中手动初始化它们吗？**什么是正确的示例，所以我们可以看到仅使用继承打印的所有消息？**

> 事实上，它比这稍微复杂一些。方法解析顺序动态变化以支持对 super() 的协作调用。这种方法在其他一些多继承语言中称为 call-next-method，并且比单继承语言中的超级调用更强大。

在需要手动初始化的情况下如何更强大？很抱歉所有这些问题。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T20:06:08.420

这[`super`](http://docs.python.org/py3k/library/functions.html#super)是为了：

```
class ParentOne():
    def __init__(self):
        super().__init__()        
        print("Parent One says: Hello my child!")
        self.i = 1

    def methodOne(self):
        print(self.i)

class ParentTwo():
    def __init__(self):
        super().__init__() 
        print("Parent Two says: Hello my child")

class Child(ParentOne, ParentTwo):
    def __init__(self):
        super().__init__()
        print("Child Says: hello")

A=Child() 
```

印刷

```
Parent Two says: Hello my child
Parent One says: Hello my child!
Child Says: hello 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T20:08:44.600

没有调用基类方法，因为您没有调用它们。无论是单个碱基还是多个碱基，您都必须明确地执行此操作。在这个简单的例子中，添加`super().__init__()`到*所有三个*类。有关更一般的建议，请阅读[Python 的 super() 被认为是超级！](http://rhettinger.wordpress.com/2011/05/26/super-considered-super/).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T20:07:12.680

在您的示例中，您专门用子类**init方法覆盖了继承的****init**方法。如果您希望所有这些都运行，您可以使用 super() 显式调用父级的 init 方法。

 **如果您没有覆盖**init**方法，那么此示例中将使用 ParentOne 中的方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-05T21:00:53.570

这很简单：

```
class ParentOne:
    def __init__(self):
        print "Parent One says: Hello my child!"
        self.i = 1

    def methodOne(self):
        print self.i

class ParentTwo:
    def __init__(self):
        print "Parent Two says: Hello my child"

class Child(ParentOne, ParentTwo):
    def __init__(self):
        ParentOne.__init__(self)
        ParentTwo.__init__(self)
        print "Child Says: hello"

A=Child() 
```

问题解决了。你也可以使用`super()`，但在这种情况下你不需要。请注意，您不能混合使用这两种方法，您要么需要在层次结构中的*所有类中调用 super()，要么**都不*调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T20:14:53.307

正确的例子是 som,thing along (Python3)：

```
class BaseClass:
    def __init__(self):
        print("Initializing base")

class ParentOne(BaseClass):
    def __init__(self):
        super().__init__()
        print("Initializing parent 1")

class ParentTwo(BaseClass):
    def __init__(self):
        super().__init__()
        print("Initializing parent 1")

class Child(ParentOne, ParentTwo):
    def __init__(self):
        super().__init__()
        print("Initializing child")

c = Child() 
```

Python 定义了“超级”内置函数，它使用描述良好的方法解析顺序正确解析下一个被调用的方法——因此，它根本不是“问题”——相反，它工作得很好在极端情况下，其他语言确实有问题 - 此处描述：http: [//www.python.org/download/releases/2.3/mro/](http://www.python.org/download/releases/2.3/mro/)**

# cuda - Cuda：内置变量在哪里？（threadIdx、blockIdx、blockDim、gridDim、warpSize）

> ID：12753269
> 
> 赞同：2
> 
> 时间：2012-10-05T20:02:45.520
> 
> 标签：cuda

我想知道这些信息是从哪里来的。访问这些变量时，我真的是在访问寄存器还是其他地方？（我的猜测是这些是寄存器值。）
我想知道将它们存储在寄存器中是否有任何速度优势？

```
__global__ void myKernel(int, float, int*) {
   const int reg1= threadIdx.y      // gonna use/Rd reg1 some 50 different places
   :  
   :  
} 
```

或者读取 threadIdx.y 大约 50 次是否一样快？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T21:28:08.640

内置变量位于不同计算能力的不同位置。在更新的设备上，信息被打包到专用寄存器中。在程序集 (cuobjdump -sass) 中，指令 S2R 用于将值从特殊寄存器移动到通用寄存器。将值分配给自动变量的行为不需要编译器在任何时间段内将值分配给寄存器。编译器可能会对内置寄存器进行最佳分配。

# javascript - 惊人的 CSS Div 滚动效果，无法解释，提供链接。这是一个网页设计问题，如何获得这样的效果？

> ID：12753270
> 
> 赞同：1
> 
> 时间：2012-10-05T20:02:53.783
> 
> 标签：javascript, css, html

这是我想展示[Smokey Bones Menu](http://www.smokeybones.com/menu/)的示例网站的链接。向下滚动页面，看看 div 是如何相互重叠的，但它比这更复杂，因为实际页面也在滚动。任何人都可以帮助回答如何达到这种效果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T20:13:20.650

我假设您指的是菜肴的背景。

效果有两个组成部分：

a) CSS 属性`background-attachment: fixed;`。这可以防止背景图像与 div 一起滚动。（这不依赖于 JavaScript）

`background-position`b) 通过在滚动时略微改变来移动背景的 JavaScript 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T20:10:09.047

这是做一些非常相似的插件：[https ://github.com/IanLunn/jQuery-Parallax](https://github.com/IanLunn/jQuery-Parallax)

您可以在 Google 上搜索 parallax effet 以获取更多示例/脚本

希望这有帮助！

# iphone - UIDatePicker：获取出现在两个文本字段中的日期

> ID：12753280
> 
> 赞同：1
> 
> 时间：2012-10-05T20:03:37.940
> 
> 标签：iphone, ios, xcode, uitextfield, uidatepicker

我已经在互联网和这个网站上搜索了很多小时 - 我发现了许多类似的问题，并尝试了人们提出的建议，但我似乎无法使用我正在使用的代码获得任何东西。

这是发生了什么：

我有两个文本字段（dateOpened 和 dateClosed），我希望日期出现在其中。当您单击每个文本字段时，会出现日期选择器（我能够让该部分工作）。但是，我在获取日期显示在 dateClosed 文本字段中时遇到问题。

对于 dateOpened - 当我单击文本字段时，会出现日期选择器，我选择一个日期，它会出现在该文本字段中。效果很好！

问题：

对于 dateClosed - 当我单击文本字段时，日期选择器出现（效果很好），我选择了一个日期，但它出现在 dateOpened 文本字段中，而不是应有的 dateClosed。

对于如何让日期出现在 dateClosed 文本字段中的任何建议，我将不胜感激。谢谢！！！:)

.h 文件：

```
UIActionSheet *dateSheet;

@property (nonatomic, strong)NSDate *openedDate;
@property (nonatomic, strong)NSDate *closedDate;

@property (strong, nonatomic) IBOutlet UITextField *dateOpened;
@property (strong, nonatomic) IBOutlet UITextField *dateClosed;

-(IBAction)dismissKeyboard:(id)sender;

-(void)setOpened;
-(void)setDateField;
-(void)cancelDateSet; 
```

.m 文件：

```
-(void)setOpened { 
    dateSheet = [[UIActionSheet alloc]initWithTitle:nil delegate:nil cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];
[dateSheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];
CGRect pickerFrame = CGRectMake(0, 44, 0, 0);
    UIDatePicker *dateOpenedPicker = [[UIDatePicker alloc]initWithFrame:pickerFrame];
    [dateOpenedPicker setDatePickerMode:UIDatePickerModeDate];
    [dateSheet addSubview:dateOpenedPicker];
    UIToolbar *controlToolBar = [[UIToolbar alloc]initWithFrame:CGRectMake(0, 0, dateSheet.bounds.size.width, 44)];
    [controlToolBar setBarStyle:UIBarStyleBlack];
    [controlToolBar sizeToFit];
   UIBarButtonItem *spacer = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
   UIBarButtonItem *setButton = [[UIBarButtonItem alloc]initWithTitle:@"Set Date" style:UIBarButtonItemStyleDone target:self action:@selector(dismissDateSet)];
   UIBarButtonItem *cancelButton = [[UIBarButtonItem alloc]initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target:self action:@selector(cancelDateSet)];
   [controlToolBar setItems:[NSArray arrayWithObjects:spacer, cancelButton, setButton, nil]animated:NO];
   [dateSheet addSubview:controlToolBar];
   [dateSheet showFromTabBar:self.tabBarController.tabBar];
   [dateSheet setBounds:CGRectMake(0, 0, 320, 485)];    
}

-(void)cancelDateSet {
   [dateSheet dismissWithClickedButtonIndex:0 animated:YES];
 }

-(void)setDateField {

    NSArray *datesList = [dateSheet subviews];
    for (UIView *subView in datesList)
    {
        if ([subView isKindOfClass:[UIDatePicker class]]) {
        self.openedDate = [(UIDatePicker *)subView date];
        }
    }

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
    [dateFormatter setDateFormat:@"MM/dd/yyyy"];

    //will display date in dateOpened text field
    [dateOpened setText:[dateFormatter stringFromDate:self.openedDate]];

    //date to display in dateClosed text field - Does not work
    [dateClosed setText:[dateFormatter stringFromDate:self.closedDate]];

    [dateSheet dismissWithClickedButtonIndex:0 animated:YES];
}

-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
   [self setOpened];
   return NO;
}

-(IBAction)dismissKeyboard:(id)sender {
    [sender resignFirstResponder];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:15:13.870

3 个步骤

*   确定要填写的文本字段[开始日期或结束日期]，使用标志[使用代表]
*   显示日期选择器并获取用户收集的日期
*   根据第一种方法确定的结果[标志]保存日期值以供进一步用作开始日期和结束日期[如果循环]

在这里，您的方法没有实现获得价值`self.closedDate`

# c# - 在特定时间执行特殊功能的 Windows 服务

> ID：12753282
> 
> 赞同：0
> 
> 时间：2012-10-05T20:03:46.153
> 
> 标签：c#, .net, timer, windows-services, scheduled-tasks

我有一个 Windows 服务，它监视文件的网络文件夹，并在创建时移动该文件并进行一些变形。这很好用。

我的问题是，如果文件在上午 9:30 之前还没有保存到受监控的位置，我需要让我的服务发送一封提醒电子邮件。我希望不必为此编写第二个程序，这似乎是一个常见的建议（带有计划任务的第二个程序）。

那么，我有哪些选择？我假设我可以使用 Timer 以某种方式完成这项工作，但我知道这不是最好的主意。有没有办法让计划任务让我的服务执行特定功能？

感谢您的任何想法...

编辑：作为参考，我目前正在研究[Quartz.NET](http://quartznet.sourceforge.net/index.html)，起初似乎有点矫枉过正......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:30:58.437

我没有看到任何错误使用计时器，使用 System.Timers.Timer 并将间隔设置为例如 5 分钟，然后在 Elapsed 事件中检查当前时间，如果通过了 9:30 发送邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:10:04.667

Personnaly，我建议*System.Threading.Timer*在同一个服务中。

像这样的东西：

```
using System;
using System.Threading;

public class Foo
{
    private Timer _timer;
    private readonly static TimeSpan TIME_OF_DAY = new TimeSpan(9, 30, 0);

    public void Main()
    {
        var now = DateTime.Now;
        var nextDt = now.Date.AddDays(1).Add(TIME_OF_DAY); 
        _timer = new Timer(TimerCallback, null, (int)nextDt.Subtract(now).TotalMilliseconds, Timeout.Infinite);
    }

    public void TimerCallback(object state)
    {
        try
        {
            // Reminder
        }
        finally
        {
            try
            {
                var now = DateTime.Now;
                var nextDt = now.Date.AddDays(1).Add(TIME_OF_DAY);
                _timer.Change((int)nextDt.Subtract(now).TotalMilliseconds, Timeout.Infinite);
            }
            catch (ObjectDisposedException) { }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:30:34.733

您的帖子中有两个问题。1\. 您需要安排程序在每天上午 9.30 进行检查 2\. 如果未保存，您需要通过电子邮件通知。

实际上 Quartz.NET 使用起来非常简单。我目前正在使用 Quartz.NET 来运行我的一项计划任务。您只需要编写 4-5 行代码并完成作业调度部分。

来到您的电子邮件，您可以使用 log4net。Log4net 有一个叫做 SMTPAppender 的东西。您可以在 web 或 app.config 本身中指定与 log4net 相关的所有配置。它也非常简单且非常直接。SMTPAppender 的示例 log4net 配置如下所示：

```
<configuration>
  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net" />
  </configSections>
  <log4net>
    <appender name="SMTPAppender" type="log4net.Appender.SMTPAppender">
      <authentication value="Basic" />
      <to value="xxx@xxx" />
      <from value="yyy@yyy" />
      <username value="user" />
      <password value="pass" />
      <subject value="ERROR" />
      <smtpHost value="host" />
      <port value="25" />
      <lossy value="true" />
      <evaluator type="log4net.Core.LevelEvaluator">
        <threshold value="WARN" />
      </evaluator>
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%newline%date [%thread] %-5level %logger %newline %message%newline%newline%newline" />
      </layout>
    </appender>
    <root>
      <level value="INFO"></level>
    </root>
    <logger name="SMTPAppender">
      <level value="INFO"></level>
      <appender-ref ref="SMTPAppender"></appender-ref>
    </logger>
  </log4net>
</configuration> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T20:24:52.450

我还建议使用第二个程序来进行检查并发送电子邮件，因为与服务进行通信并不容易。它可能看起来像重复，但从长远来看，它会更容易开发和维护。

*与其让服务*发送电子邮件，不如让*第二个程序*发送电子邮件。如果要重用服务中的代码，请将服务项目添加为对第二个程序的引用。

这说起来容易做起来难，但它应该比尝试让第二个程序以某种方式与服务通信更容易，因为您必须自己连接通信机制。

# php - 此 XML 代码是否可能存在 PHP 内存泄漏？

> ID：12753287
> 
> 赞同：1
> 
> 时间：2012-10-05T20:04:24.830
> 
> 标签：php, xml, memory-leaks

下面的代码是否可能存在内存泄漏？我们有一个使用 PHP v5.3.3 在 Apache 服务器上运行的网站，该代码被批评为可能存在内存泄漏。希望另一双眼睛看着这个会帮助发现一个问题。

```
<?php
// set feed URL
$feedURL = 'http://gdata.youtube.com/feeds/api/users/UFDeptHousing/uploads';

// read feed into SimpleXML object
$sxml = simplexml_load_file($feedURL);
?>
<?php
// iterate over entries in feed
    $i = 0;
foreach ($sxml->entry as $entry) {
        if($i < 4) {
  // get nodes in media: namespace for media information
  $media = $entry->children('http://search.yahoo.com/mrss/');

  // get video player URL
  $attrs = $media->group->player->attributes();
  $watch = $attrs['url']; 

  // get video thumbnail
  $attrs = $media->group->thumbnail[1]->attributes();
  $thumbnail = $attrs['url']; 

  // get <yt:duration> node for video length
  $yt = $media->children('http://gdata.youtube.com/schemas/2007');
  $attrs = $yt->duration->attributes();
  $length = $attrs['seconds']; 

  // get <yt:stats> node for viewer statistics
  $yt = $entry->children('http://gdata.youtube.com/schemas/2007');
  $attrs = $yt->statistics->attributes();
  $viewCount = $attrs['viewCount']; 

  // get <gd:rating> node for video ratings
  $gd = $entry->children('http://schemas.google.com/g/2005'); 
  if ($gd->rating) {
    $attrs = $gd->rating->attributes();
    $rating = $attrs['average']; 
  } else {
    $rating = 0; 
  }

  ?>
  <tr>
    <td width="95">
    <span class="thumbnail"><a href="<?php echo $watch; ?>"><img src="<?php echo $thumbnail;?>" width="85" height="48" alt="<?php 
        $varlength = strlen($media->group->title);
      if ($varlength > 30) {
        echo substr($media->group->title,0,30)."...";
      }else {
          echo $media->group->title;
      }         ?>" /></a></span>
    </td>
    <td width="130">
    <span class="title"><a href="<?php echo $watch; ?>">
            <?php 
        $varlength = strlen($media->group->title);
      if ($varlength > 30) {
        echo substr($media->group->title,0,30)."...";
      }else {
          echo $media->group->title;
      }         ?>
    </a></span>
    <span class="length">Length: <?php printf('%0.2f', $length/60); ?></span>  
    </td>
  </tr>
<?php
        }
        $i++;
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T20:46:50.780

“此代码被批评为可能存在内存泄漏”

谁在批评？如果它是一个 IDE，它可能没有意识到所有数据收集都是在循环的上下文中完成的，该循环将在 4 次迭代后停止收集数据。

它还可能担心没有“else”这一事实——即，如果 i > 4，它只会继续循环，直到它遍历整个文件。它不会继续积累数据，但会继续循环。如果文件足够大，可能会导致问题。

但也许在“if”末尾添加“else {break;}”会使错误消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:38:17.620

此代码的每次迭代都有少量内存使用：

```
Mem: 77920 / 77960
Mem: 83968 / 83968
Mem: 84280 / 84280 
```

(RHEL5/PHP 5.1.6)

但这是意料之中的。我没有发现在这段代码中使用 unset 有任何好处，但是您始终可以将代码包装在一个函数中以取消所有设置。

只需使用 memory_get_usage() 进行测试、测试和测试

# javascript - 无法访问 javascript 全局变量

> ID：12753290
> 
> 赞同：0
> 
> 时间：2012-10-05T20:04:30.160
> 
> 标签：javascript, scope, global

```
<html>
<head>
    <title>Group Test</title>
    <script type="text/javascript" src="/static/javascript/jquery-1.8.2.min.js"></script>

</head>
<body>

    <script type="text/javascript">

    var global = new Array();
    $.ajax({
        url: "/json",
        success: function(reports){
            global = reports;
            process(reports);
            return global;
            }
        });

function process(reports){
    for (i=0; i<reports.length; i++) {
        document.write(i + " : "+reports[i].fields.report_name+"<br>");
        }
    }

    </script>

</body>
</html> 
```

好的，这就是我的代码。我试图在我的代码中使用 JSON 数据，但由于某种原因，每当我尝试在 $.ajax() 函数之外使用报告对象时，我都会收到“报告未定义”错误。

根据 JSLint，代码看起来不错，并且将报告和变量 global 都列为全局变量。

如果我尝试运行任何使用外部任何一个的东西，它就行不通。

```
'success'(reports)
global
global
line 22
process(reports)
global
document 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:07:44.337

您不能`reports`作为全局对象访问，只能`global`从每个地方访问。 `reports`是成功的局部变量，也是`process`函数的局部变量

```
<script type="text/javascript">

    var global = new Array();
    $.ajax({
        url: "/json",
        success: function(reports){
            global = reports;
            process(reports);
            return global;
            }
        });

function process(reports){
    for (i=0; i<reports.length; i++) {
        document.write(i + " : "+reports[i].fields.report_name+"<br>");
        }
    }
        // reports is undefined here. but global can be accessed (will be empty array before success function get called)
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:09:50.747

请记住`$.ajax`是异步的，因此除非您在成功回调中调用您的函数，否则该值可能尚未设置。

你也需要使用`global`not `reports`。

# mysql - 选择数据库中最新版本的行

> ID：12753291
> 
> 赞同：0
> 
> 时间：2012-10-05T20:04:31.853
> 
> 标签：mysql, sql

这是场景....

我有一个 MySQL 表（称为固定装置），其中包含以下内容....

![在此处输入图像描述](../Images/73d889f4f353fcc17a8b5a1b295b31f0.png)

您可以看到 A 队在日期 2012-06-01 的夹具已更新，版本 4 是最后一个条目，其开球时间为 12:00。

我需要一些 SQL 来选择日期 2012-06-01 的所有记录，但只选择最新版本，所以它应该看起来像....

![在此处输入图像描述](../Images/f96473c512c94280f98abf97404ad242.png)

这是我尝试过的，它看起来很完美，但它返回了错误的 ID 和时间（这已经改变了），见下文......

```
 select id, max(version), team, date, time, oppo from fixtures where date = "2012-06-01" group by team 
```

![在此处输入图像描述](../Images/acd5bf46ea160c5afa5243240d7b6921.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:13:32.573

```
select id,version, team, date, time, oppo 
from fixtures A where id in
(
    select max(id)from fixtures 
    where date = "2012-06-01" 
    group by team
) 
```

假设：`id`是主键

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:11:30.350

试试这个：

```
select f.id, a.version, a.team, f.date, f.time, f.oppo from fixtures f inner join
(select max(version) version, team from fixtures where date = "2012-06-01" group by team) a
 on f.version = a.version and f.team = a.team 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:12:17.097

```
SELECT id
    ,version
    ,team
    ,DATE
    ,TIME
    ,oppo
FROM fixtures
WHERE DATE = "2012-06-01"
    AND id = (
        SELECT max(f2.id)
        FROM fixtures f2
        WHERE f2.DATE = DATE
            AND f2.team = team
        ) 
```

# vb.net - Visual Basic - 是运算符

> ID：12753295
> 
> 赞同：4
> 
> 时间：2012-10-05T20:04:52.390
> 
> 标签：vb.net

```
Public Class EquipmentNode
 '...
End Class

Private Sub DoWork()
 Dim node As TreeNode = _contextNode

 If node is EquipmentNode ' Does not work
 if node is TypeOf EquipmentNode ' Does not work
End Sub 
```

如何查看节点是否为同一类型。现在我只是投射它并查看结果是否为空，但我想使用“Is”运算符。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T20:07:36.497

[Visual Basic Is 运算符](http://msdn.microsoft.com/en-us/library/kb136x1y.aspx)（与[C# 的 is 运算符](http://msdn.microsoft.com/en-us/library/scekt9xw%28v=vs.100%29.aspx)不同）不会告诉您对象的*类型*，而是告诉您两个对象变量是否引用同一个实际对象实例。

> Is 运算符确定两个对象引用是否引用同一个对象

这不会告诉您对象是否是特定类型。

要比较类型，您可以使用：

```
If TypeOf node Is EquipmentNode Then 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T20:08:42.610

VB 中的[`Is`运算符](http://msdn.microsoft.com/en-us/library/kb136x1y.aspx)不像`is`C# 那样检查对象是否属于某种类型，它与 C# 的[`ReferenceEquals()`](http://msdn.microsoft.com/en-us/library/system.object.referenceequals.aspx).

# variables - WooCommerce - 将产品属性添加到购物车，而无需将其用作变量

> ID：12753297
> 
> 赞同：0
> 
> 时间：2012-10-05T20:04:58.930
> 
> 标签：variables, attributes, woocommerce

在我们的商店中，我们只销售一种颜色的产品，我创建了一种“属性”颜色，仅显示在产品页面的“附加信息”上，它不作为“变量”包含在添加到购物车时，它将只显示我在变量选项上添加的内容，在这种情况下是“大小”

如何在不将其用作变量的情况下将属性“颜色”添加到购物车。或者，如果它必须显示为变量，我不希望它作为下拉列表。

我正在使用 WooCommerce。希望我说得有道理，对不起，我是设计师而不是编码员。

*!- 电子邮件已删除-！*请将答案发布到网站，而不是电子邮件！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T03:07:22.387

制作您的变量，然后使用默认选择选项将您选择的项目显示为已选择。有时让他们选择是有意义的，对他们购买的东西有更多的认识。

# vim - vim 在选择时运行一系列命令（或函数）

> ID：12753302
> 
> 赞同：4
> 
> 时间：2012-10-05T20:05:26.270
> 
> 标签：vim

我有一系列 vim 命令将所选块写入临时文件，在该文件上运行函数（knitcite），然后读入另一个文件：

```
w! ~/.vbuf <CR> 
!knitcite ~/.vbuf ~/.vbuf <CR> 
r ~/.vbuf <CR> 
```

如果我在运行第一个命令之前在可视模式下选择了一个文本块，它将变为

```
:'<,'>w! ~/.vbuf <CR> 
```

根据需要将选定的内容传递给文件。我可以将它放入我的 .vimrc 中的一个简单的 vim 函数中，但无法弄清楚如何将视觉选择的内容传递给该函数。如果这是一个命令而不是三个命令，我可以使用可视地图来执行此操作，但不确定如何使用三个命令来执行此操作。就像是：

```
command knitcite call Knitcite()
func! Knitcite()  
exec "w! ~/.vbuf <CR>"
exec "!knitcite ~/.vbuf ~/.vbuf <CR> "
exec "r ~/.vbuf <CR>"
func 
```

但这不会从可视块中获取任何数据。我想我需要为我的 Knitcite 函数提供一个参数，但无法弄清楚它会是什么。（似乎这可能与[this SO question](https://stackoverflow.com/questions/8356572/vim-call-a-function-from-inside-a-vmap)有关，但我无法弄清楚如何从该答案中概括。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:12:07.220

最简单的做法是用作过滤器：

```
:'<,'>!knitcite 
```

如果`knitcite`在过滤器模式下不起作用（通常用于`-`将标准输入表示为文件名，其他选项可能适用），您可以将其包装在 shell 脚本中：

```
#!/bin/bash
tmpname="/tmp/$(basename "$0").tmp$RANDOM"

trap "rm -f '$tmpname'" ERR INT EXIT
knitcite <(cat) "$tmpname"
cat "$tmpname" 
```

* * *

否则，您似乎想用输出替换视觉选择：

```
:'<,'>w! ~/.vbuf
:'<,'>d _
:silent! !knitcite ~/.vbuf ~/.vbuf.out
:'<-1r ~/.vbuf.out 
```

***笔记***

1.  为输出使用单独的临时文件：*否则，在大多数平台上可能会出现问题，其中输出文件的截断可能会在读取输入之前发生！*
2.  在命令中使用*黑洞寄存器*( `"_`)`:delete`以避免破坏任何寄存器

# google-app-engine - App Engine AttributeError：“模块”对象没有属性“事件”

> ID：12753303
> 
> 赞同：1
> 
> 时间：2012-10-05T20:05:26.617
> 
> 标签：google-app-engine

我在同一个实例上出现了这个错误 20 次，然后在实例被杀死后它就消失了，因为处理了太多的顺序错误。我的代码没有进行任何更改，这是我唯一一次看到这种情况发生。

问题：

*   我的代码中的什么类型的问题可能导致这种情况仅在某些情况下发生？我不知道从哪里开始寻找，因为我无法重现问题。
*   有没有办法减少实例在被杀死之前允许的顺序错误的数量，这样如果再次发生就不会造成太大的破坏？

这是我从这个实例中获得的第一个日志（没有错误）：

```
2012-10-05 18:41:03.266 /rpc/?action=ServerAvailable 500 60908ms 0kb popwords/1.2         CFNetwork/548.1.4 Darwin/11.4.2
98.207.195.103 - - [05/Oct/2012:11:41:03 -0700] "GET /rpc/?action=ServerAvailable HTTP/1.1" 500 0 - "popwords/1.2 CFNetwork/548.1.4 Darwin/11.4.2" "www.popwordsapp.appspot.com" ms=60909 cpu_ms=498 loading_request=1 instance=00c61b117c8f8b7f701c0776284c25a64c7ff329
I 2012-10-05 18:41:03.265
This request caused a new process to be started for your application, and thus caused your application code to be loaded for the first time. This request may thus take longer and use more CPU than a typical request for your application. 
```

这是此实例的下一个日志（第一个有错误）：

```
2012-10-05 18:49:38.704 /rpc/?action=ServerAvailable 500 867ms 0kb popwords/1.2 CFNetwork/548.1.4 Darwin/11.4.2
98.207.195.103 - - [05/Oct/2012:11:49:38 -0700] "GET /rpc/?action=ServerAvailable HTTP/1.1" 500 0 - "popwords/1.2 CFNetwork/548.1.4 Darwin/11.4.2" "www.popwordsapp.appspot.com" ms=867 cpu_ms=86 instance=00c61b117c8f8b7f701c0776284c25a64c7ff329
E 2012-10-05 18:49:38.103
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/runtime/wsgi.py", line 195, in Handle
handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/runtime/wsgi.py", line 239, in _LoadHandler
handler = __import__(path[0])
  File "/base/data/home/apps/s~popwordsapp/1.362183705604897547/main.py", line 40, in <module>
from google.appengine.ext import db
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 98, in <module>
from google.appengine.api import datastore
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/datastore.py", line 62, in <module>
from google.appengine.datastore import datastore_query
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_query.py", line 64, in <module>
from google.appengine.datastore import datastore_index
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_index.py", line 62, in <module>
from google.appengine.api import yaml_object
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/yaml_object.py", line 36, in <module>
from google.appengine.api import yaml_listener
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/yaml_listener.py", line 34, in <module>
    yaml.events.StreamStartEvent: 'StreamStart',
AttributeError: 'module' object has no attribute 'events' 
```

在这两个日志之间有一个日志，其中创建了一个额外的实例（没有错误）。没有一个错误来自在第一个实例之后立即创建的另一个实例。由于处理了太多的顺序错误，它在第一个实例被杀死后开始成功处理请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:33:59.017

我在部署代码后偶尔会看到此错误，并且重新部署通常会停止它。我知道，这没什么帮助，但希望这是谷歌很快会解决的问题。

# c - 从 R 中的 .C 调用返回输出

> ID：12753304
> 
> 赞同：0
> 
> 时间：2012-10-05T20:05:29.397
> 
> 标签：c, r, rcpp

[在此处](http://cran.r-project.org/doc/manuals/R-exts.html#Interface-functions-_002eC-and-_002eFortran)`.C`的 R 函数文档中，它说 C 函数本身必须是返回类型。我正在处理一些使用该函数（而不是Rcpp）的继承代码，但我想编写一个“返回”未知大小向量的函数。如果我知道这个向量的大小，我可以在 R 中分配它并将指针传递给 C，然后可以修改其内容。鉴于我不知道它的大小，在 R 中声明它的方法是什么？我想它会有这个形状，但我不知道细节：`void``.C``.Call`

```
output <- ?????
storage.mode(a) <- "integer"
tmp <- .C("myfunc",a,output) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:11:28.500

我建议您使用`.Call()`而不是`.C()`- 请参阅 r-devel 列表上的最近讨论。我猜你会发现几乎没有经验丰富的 R 开发人员建议将其`.C()`用于新项目。

这是一个简单的说明。您绝不会被迫使用 Rcpp，同样的代码也可以用普通的 C API 编写，尽管不是那么紧凑：

```
R> fx <- rcpp(signature(sn="integer"), body='   // rcpp() is from inline 0.3.10
+    int size = as<int>(sn);
+    IntegerVector v(size); 
+    for (int i=0; i<size; i++) v[i] = i;
+    return(v); 
+ ') 
R> fx(3) 
[1] 0 1 2   
R> fx(7) 
[1] 0 1 2 3 4 5 6  
R> 
```

在旧`.C()`接口中，您只能返回诸如`*int`or之类的原子 C 类型，`*double`并且您*不能在 C 级别分配空间，*因为您只能`SEXP`在实际可以返回对象时“标记”对象以供 R 管理`SEXP`——而且只能如此`.Call()`。

# asp.net - Asp.net 2.0 路由

> ID：12753305
> 
> 赞同：0
> 
> 时间：2012-10-05T20:05:32.970
> 
> 标签：asp.net, routing, webforms

我正在尝试在 asp.net 2.0 webform 上实现一个friendlyurl。我要通过以下方式捕获目标页面上的 id：

```
Page.RouteData.Values ["id"] 
```

但我没有找到。

在 asp.net 2.0 上是否有任何替代 Page.RouteData.Values 的方法？有没有办法在 asp.net 2.0 上实现路由？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:11:45.527

是的，这是可能的，但您必须实现一些功能才能使其正常工作。这并不完全是一种限制，但该技术本身并没有。看看这个链接：[http ://www.simple-talk.com/dotnet/asp.net/a-complete-url-rewriting-solution-for-asp.net-2.0/](http://www.simple-talk.com/dotnet/asp.net/a-complete-url-rewriting-solution-for-asp.net-2.0/)

您需要更改 IIS 上的一些配置以使其正常工作。

# c# - 图中节点的拓扑排序子集

> ID：12753308
> 
> 赞同：0
> 
> 时间：2012-10-05T20:05:45.780
> 
> 标签：c#, algorithm, graph-algorithm, topological-sort

我有一个代表一组依赖关系的大图。用户可以指定他们想要使用一定数量的这些依赖项，我需要弄清楚使用它们的正确顺序（他们可能指定不直接相关的依赖节点，但通过图中的其他节点依赖） .

目前，我正在通过运行图形的拓扑排序并在用户指定的所有节点都已排序后停止来实现这一点。但是，这不会导致所需的依赖项最少，我必须返回并尝试删除任何不需要的节点。

是否有更好的方法或已知算法来查找节点子集的拓扑类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:44:31.033

最佳解决方案可能是构建仅由用户选择的节点的新图，并适当分配依赖关系。例如，如果 A-->B-->C，用户选择 A 和 C，则您构建的图是 A-->C。然后做一个标准的拓扑排序。

# php - 在使用 AJAX 保存到数据库后，使用 PHP 从数据库中获取最新值。无需重新加载页面

> ID：12753311
> 
> 赞同：0
> 
> 时间：2012-10-05T20:06:12.210
> 
> 标签：php, ajax, database, onmouseout

我正在建立一个模拟 Flickr 网站，您可以在其中通过单击 1-10 星来对照片进行评分。当页面加载时，它会为照片创建一个对象，并根据与其 id 对应的 db 条目设置其值。当您将鼠标悬停在星星上时，它们会亮起（从 1 开始）到您光标所在的星号，指定您的评分。当您单击星标时，它会提交评级（通过 AJAX）并更新数据库，然后设置星标以反映新评级。

问题是，如果您将鼠标悬停在星星上，然后将鼠标从它们上移开（不单击一个），那么点亮的星星反映的是页面最初加载时照片的评级，而不是当前的评级（基于用户点击星号时使用 AJAX 记录的评分）。

数据库正在更新，星号在 AJAX 调用之后反映了正确的评级（因为我在 AJAX 调用结束时调用了与 onmouseout 相同的函数，stars_current_rating(rating)）。唯一的区别是在 AJAX 调用结束时，我将 xmlhttp.responseText 作为参数传入。在 onmouseout 中，我传入（我想要的）数据库中该照片的最新评级。

```
onmouseout="stars_current_rating(<?php echo Photograph::find_by_id($_GET['id'])->rating?>);" 
```

我在这个调用背后的逻辑是假设我通过找到它并将新评级传递给 stars_current_rating(...) 来获取已保存到数据库的新评级。唯一的问题是 onmouseout 传递页面加载时从数据库中提取的原始评级参数，而不是数据库中的新值（这是 find_by_id() sql函数所做的）......这是处理的代码星星的显示。

```
 <div id="rating" class="rating">
        <?php 
            for($i=1; $i<11; $i++){
        ?>
        <a id="rating_star<?php echo $i ?>" href="#" onmouseover="decide_rating(<?php echo $i ?>);" 
        onmouseout="stars_current_rating(<?php echo Photograph::find_by_id($_GET['id'])->rating?>);" 
        onmousedown="set_rating(<?php echo $photo->id.", ".$i ?>);">
        <img id="star<?php echo $i ?>" class="rating_star" src=
        <?php 
            // Sets up stars with initial rating in db when page is first loaded
            if($photo->rating >= $i){ 
                echo "images/assets/rating_star.png";
            } else {
                echo "images/assets/rating_star_off.png";
            }
        ?>
        />
        </a>
        <?php } ?>

    </div> 
```

任何帮助或见解将不胜感激有关该问题的更多详细信息，请单击下面的链接以获取原始问题。

[包含所有代码和具体细节的原始问题](https://stackoverflow.com/questions/12751568/updating-and-displaying-the-most-recent-record-in-db-after-ajax-updates-the-va)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:22:36.197

您可以使用您的`set_rating`功能来更改`onmouseout`功能..像这样

```
function set_rating(photo_id,rating) {
    //do your ajax or whatever here, don't need to change anything

    //we need some way to select all the 'rating_star' links
    for(var i=1, i<11; i++) {
        var star = document.getElementById('rating_star' + i);

        //overwrite the current mouseout function with a new one,
        // providing the new current rating

        star.onmouseout = function() {
            stars_current_rating(rating);
        }
    }
} 
```

# python - 用于测量 SVG 文件中对象的 Python 模块？

> ID：12753312
> 
> 赞同：2
> 
> 时间：2012-10-05T20:06:17.813
> 
> 标签：python, svg, xml-parsing, vector-graphics

我有一堆 SVG 文件，每个文件都包含一组我想要测量其长度的折线。这是一种典型的折线：

```
<path d="M 1828.0 1476.0 1838.0 1384.0 1771.0 1360.0 1730.0 1334.0 1687.0 1344.0 1654.0 1352.0 " stroke="rgb(255,200,0)" fill="none" stroke-width="8.0"/> 
```

每个 SVG 中有几百行这样的行。

是否有 Python SVG 处理模块可以处理这个并测量长度？如果它们不存在，是否有解析 SVG 文件的现有解决方案，所以我只需要开发一些用于测量（而不是解析）的东西？如果有这样的模块，我将不胜感激有关如何解决此问题的任何提示。我对 Python 2 或 3 没有强烈的偏好，尽管我是 Python 新手，而且我所做的大部分工作都是在 Python 2 中完成的。

非常感谢！

PS我找到[了 svgwrite](http://packages.python.org/svgwrite/)和[pysvg](http://codeboje.de/pysvg/)，但看起来他们都写了 SVG 文件，并没有真正解析它们或进行任何测量。

# asp.net-mvc - Html.LabelFor 语句未显示为指定值

> ID：12753313
> 
> 赞同：4
> 
> 时间：2012-10-05T20:06:18.230
> 
> 标签：asp.net-mvc, form-helpers

我通过 Html.LabelFor 助手在 foreach 语句中显示 GuarantorName。

但是，我没有得到预期的结果。

它没有显示 GuarantorName 的实际值，而是简单地打印如下：Label 值表示实际字段名称，即：GuarantorName，而我需要该字段名称的实际值（如“Bill Yeager”），我已在调试期间验证具有各种不同的名字。

在调试期间，我可以在列表中看到我在集合中有实际的名字。

我怎样才能做到这一点？

这是我在代码中的观点：

```
@foreach (var item in Model.Guarantors)
                {
                    <td>
                        @Html.CheckBoxFor(model => item.isChecked)
                        @Html.LabelFor(model => item.GuarantorName)
                    </td>
                } 
```

如果我尝试这个，我会收到以下错误：

```
@Html.DisplayFor(model => item.GuarantorFirstName + item.GuarantorLastName) 
```

异常详细信息：System.InvalidOperationException：模板只能用于字段访问、属性访问、单维数组索引或单参数自定义索引器表达式。

```
Source Error:

Line 95:                     <td>
Line 96:                         @Html.CheckBoxFor(model => item.isChecked)
Line 97:                         @Html.DisplayFor(model => item.GuarantorFirstName + item.GuarantorLastName)
Line 98:                     </td>
Line 99:                 } 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-05T20:19:27.507

LabelFor 显示属性名称。您希望 DisplayFor 显示该字段的值。

```
@foreach (var item in Model.Guarantors)
                {
                    <td>
                        @Html.CheckBoxFor(model => item.isChecked)
                        @Html.DisplayFor(model => item.GuarantorName)
                    </td>
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T06:20:23.400

```
@foreach (var item in Model.Guarantors)
                {
                    <td>
                        @Html.CheckBoxFor(model => item.isChecked)
                        @Html.DisplayFor(model => item.GuarantorName)
                    </td>
                }

And also we can use when used IList<Model>

@for(int i=0;i<model.Guarantors.count();i++)
{
 <td>
                        @Html.CheckBoxFor(model =>model[i].isChecked)
                        @Html.DisplayFor(model => model[i].GuarantorName)
                    </td>
} 
```

# transformation - 如何在一次转换中沿矢量缩放？

> ID：12753314
> 
> 赞同：1
> 
> 时间：2012-10-05T20:06:22.983
> 
> 标签：transformation

## 背景

我试图理解矩阵变换。（使用它的 Ruby API 为 SketchUp 开发插件）

我一直在设置小型实验，将学习分成小块，这样我就可以看到当我应用各种转换时会发生什么，而且总体上进展顺利。我看到了事情是如何工作的，我可以对转换矩阵进行相当抽象的描述，并将它们转化为实际发生的事情。

## 问题

但在这里，我已经被跺了跺脚：

（我们在这里使用 4x4 矩阵。）

我想沿给定向量（或局部坐标系）缩放一组点。

假设我们有一个正方形，`[20,10]`从全局原点偏移，旋转 30 度。我想在 X 方向上将此正方形缩放为 2 倍。

所以我们有一个局部缩放变换：

`local_scale = Geom::Transformation.scaling( 2, 1, 1 )`

### 我尝试并工作的内容：

1.  将点转换为局部坐标系。
2.  应用局部尺度变换。
3.  将这些点转换回全局坐标系。

我已经尝试过了，它有效。但是，我对此并不满意。它需要我迭代和转换我的点集三次。似乎效率不高。请记住，我使用的是基于 Ruby 的 API——速度很慢，而且我正在处理包含数千个点的数据集。

### 这可以做到吗？

有没有一种方法可以只对每个点进行一次迭代和转换并获得正确的结果？

### 我试过了，但失败了：

我尝试将局部坐标的逆变换与局部缩放相结合，但失败了。（这里显然有一些关于组合转换的内容，我需要再次阅读。）

我想也许这会起作用：

`( local_coords_transformation.inverse * scaling ) * local_coords_transformation )`

我认为这会将我的局部缩放转换转换为在全局坐标系中工作的转换。它没有——我预计你们中的一些人现在会摇头。

如果我的解释不清楚或需要更多背景信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:52:32.117

啊! 得到它的工作！:D

`local_coords_transformation * scaling * local_coords_transformation.inverse`

我第一次弄错了，因为我没有意识到转换的顺序与你用英语描述的顺序相反。在阅读这篇维基百科文章时，我意识到出了什么问题：

[http://en.wikipedia.org/wiki/Transformation_matrix#Composing_and_inverting_transformations](http://en.wikipedia.org/wiki/Transformation_matrix#Composing_and_inverting_transformations)

> 换句话说，组合变换 A 后跟 B 的矩阵只是各个矩阵的乘积。**请注意，乘法是按照与英文句子相反的顺序进行的：“A 后接 B”的矩阵是 BA，而不是 AB**。

呸！

# iis - 将 ASP.NET Web API 部署到 IIS 服务器

> ID：12753316
> 
> 赞同：9
> 
> 时间：2012-10-05T20:06:33.127
> 
> 标签：iis, asp.net-web-api

我开发了我的第一个 Web API，并试图将其部署到我的 QA 服务器。我在 IIS 中创建了一个名为 qa.mysite.com 的网站。我将我的 Web API 部署到此文件夹并尝试运行它。

当我在本地调试站点并转到

> `http://localhost:3735/api/Bid_Received`

它工作正常。然而，当我去

> `http://qa.mysite.com/api/Bid_Received`

我收到 404 错误。

我究竟做错了什么？我没有上传正确的文件吗？

当我查看将 Web API 部署到的文件夹时，我看到以下项目：

文件夹：bin、Content、Images、Scripts、Views 文件：favicon.ico、Global.asax、packages.config、Web.config

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T15:23:37.957

好的，我发现了问题。

1.  我没有在这台服务器上安装 .Net 4.0，所以我安装了它。

2.  我用 IIS 注册了 .Net 4.0

3.  我将此网站设置为使用 .Net 4.0

4.  这个盒子正在运行 IIS6，所以我按照本文中的建议让 ASP.Net Web API 与 IIS6上的[ASP.Net MVC 一起工作 IIS6 Walkthrough](http://haacked.com/archive/2008/11/26/asp.net-mvc-on-iis-6-walkthrough.aspx)

# winforms - P/Invoked ShowCursor 返回 0

> ID：12753317
> 
> 赞同：0
> 
> 时间：2012-10-05T20:06:36.747
> 
> 标签：winforms, pinvoke, dll-injection

我正在编写的应用程序需要向另一个应用程序发送消息以使光标可见。我的绝大多数编程经验都是用 C# 编写的，并且我设法编写了一个 DLL Injector，它允许我使用 CreateRemoteThread 注入托管代码。我正在注入的 DLL 内部是对 ShowCursor 的 P/Invoked 调用。然而，这似乎没有任何效果，并且使用 StreamWriter 检查 ShowCursor 返回的值表明，虽然函数成功并且显示计数器增加，但在其他某个点计数器返回到 0。（应该显示光标无论如何，现在我想起来了。）

我错过了什么重要的信息？Windows 窗体是否有一些功能阻止我像这样更改光标？ShowCursor 是否绑定到它正在运行的线程，所以它在完成后恢复？还是完全不同的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T00:30:06.267

当然。即使在自己的线程上运行它，您也可以很容易地看到它不起作用：

```
public partial class Form1 : Form {
    public Form1() {
        InitializeComponent();
    }
    private void button1_Click(object sender, EventArgs e) {
        System.Threading.ThreadPool.QueueUserWorkItem((o) => {
            int cnt = ShowCursor(false);
            System.Diagnostics.Debug.Print("Count = {0}", cnt);
        });
    }
    [System.Runtime.InteropServices.DllImport("user32.dll")]
    private static extern int ShowCursor(bool show);
} 
```

光标不动。您必须在该进程的 UI 线程上注入代码。很难做到，SetWindowsHookEx() 设置，比如说，一个 WH_CALLWNDPROC 钩子和 SendMessage() 来触发它。我认为。

# asp.net - 单击以在 gridview 中选择行导致在编辑模式下回发

> ID：12753318
> 
> 赞同：2
> 
> 时间：2012-10-05T20:06:37.933
> 
> 标签：asp.net, select, gridview, onclick, edit

当前，当用户单击行上的任意位置时，它会选择该行。不幸的是，在编辑模式下（单击“编辑”后），每次用户单击表单上的任何位置时，表单都会回发。如何禁用此功能并让用户安静地编辑行？

这就是我拥有的可以单击以选择行的功能：

```
protected void GridView1_RowCreated(object sender, System.Web.UI.WebControls.GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            List<int> notClickable = new List<int>();
            {
                notClickable.Add(0);
            }

            for (int i = 0; i < e.Row.Cells.Count; i++)
            {
                if (!notClickable.Contains(i))
                {
                    e.Row.Cells[i].Attributes["onclick"] = Page.ClientScript.GetPostBackClientHyperlink(this.GridView1, "Select$" + e.Row.RowIndex);
                    e.Row.Cells[i].Attributes["onclick"] = this.Page.ClientScript.GetPostBackClientHyperlink(this.GridView1, "Select$" + e.Row.RowIndex);
                }
            }

            e.Row.Attributes.Add("onmouseover", "this.originalstyle=this.style.backgroundColor;this.style.backgroundColor='#ceedfc'");
            e.Row.Attributes.Add("onmouseout", "this.style.backgroundColor=this.originalstyle");
            e.Row.Attributes.Add("style", "cursor:pointer;");
            e.Row.ToolTip = "Click to select row";
        }
    } 
```

解决问题的修订代码：

```
protected void GridView1_RowCreated(object sender, System.Web.UI.WebControls.GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            if (GridView1.EditIndex != -1)
            {
                e.Row.Attributes.Remove("onmouseover");
            }
            else
            {
                List<int> notClickable = new List<int>();
                {
                    notClickable.Add(0);
                }

                for (int i = 0; i < e.Row.Cells.Count; i++)
                {
                    if (!notClickable.Contains(i))
                    {
                        e.Row.Cells[i].Attributes["onclick"] = Page.ClientScript.GetPostBackClientHyperlink(this.GridView1, "Select$" + e.Row.RowIndex);
                        e.Row.Cells[i].Attributes["onclick"] = this.Page.ClientScript.GetPostBackClientHyperlink(this.GridView1, "Select$" + e.Row.RowIndex);
                    }
                }

                e.Row.Attributes.Add("onmouseover", "this.originalstyle=this.style.backgroundColor;this.style.backgroundColor='#ceedfc'");
                e.Row.Attributes.Add("onmouseout", "this.style.backgroundColor=this.originalstyle");
                e.Row.Attributes.Add("style", "cursor:pointer;");
                e.Row.ToolTip = "Click to select row";
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:32:28.483

在您的选择功能上，让它删除 onclick 属性。然后，当您完成编辑后，将其添加回来。

# javascript - 在 asp.net 中使用 jsonp

> ID：12753330
> 
> 赞同：0
> 
> 时间：2012-10-05T20:07:50.640
> 
> 标签：javascript, asp.net, jsonp

我有以下 javascript 来获取一些 jsonp 进入我的网页。

```
 <script type="text/javascript">

    function updateSales(sales) {

         alert(sales);

     }

     function handleRefresh() {
         alert("I'm alive");

         var url = "http://172.18.4.8:83/webservice.asmx/ADUsers2?callback=updateSales";
         var newScriptElement = document.createElement("script");
         newScriptElement.setAttribute("src", url);
         newScriptElement.setAttribute("id", "jsonp");

         var oldScriptElement = document.getElementById("jsonp");
         var head = document.getElementsByTagName("head")[0];
         if (oldScriptElement == null) {
             head.appendChild(newScriptElement);
         } else {
             head.replaceChild(newScriptElement, oldScriptElement);
         }

     }

    function pageLoad() {

       setInterval(handleRefresh, 3000);

    }
</script> 
```

出于某种原因，我无法让它工作。我知道我得到的 jsonp 是正确的，因为我可以浏览到该 url 并获得 json 格式字符串。当我加载网页时，我还活着的警报每 3 秒就会出现一次，但我从来没有收到带有 webservice 字符串的警报。

有什么想法或建议吗？

感谢您的帮助

# javascript - 如何从本地存储中对 JSON 对象进行排序并删除重复项

> ID：12753337
> 
> 赞同：0
> 
> 时间：2012-10-05T20:08:08.687
> 
> 标签：javascript, sorting, object

我在本地存储中有一个地址列表，存储为 JSON 对象。

```
{"Addresses"[
  {"address1":"1111 W Main"},
  {"address2":"2222 W Main"},
  {"address3":"1111 W Main"},
  {"adess4":"3333  Main"}
]}; 
```

我需要对它们进行排序并删除重复项。

我可以用数组做到这一点

```
var addressList = ['2111 W State', '2111 W State', '1111 W State', '3111 W State'];
var sortedAddressList = addressList.sort();
var results = [];
for (var i = 0; i < addressList.length; i++) {
  if (sortedAddressList[i + 1] != sortedAddressList[i]) {
    results.push(sortedAddressList[i]);
  }
}
alert(results); 
```

如何在不将对象转换为字符串的情况下获得相同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:28:23.787

首先，您的对象属性命名不是很明智。访问密钥应该是可预测的，而不是依赖于索引的知识。

```
{"Addresses": [
  {"address":"1111 W Main"},
  {"address":"2222 W Main"},
  {"address":"1111 W Main"},
  {"address":"3333  Main"}
]}; 
```

所以此时，您可以使用之前使用的技术，但您只需要访问该`"address"`属性。

```
var sortedAddressList = data.Addresses.sort(function(a, b) {
    return a.address.localeCompare(b.address);
});
var results = [];
for (var i = 0; i < sortedAddressList.length; i++) {
  if (sortedAddressList[i + 1].address != sortedAddressList[i].address) {
    results.push(sortedAddressList[i]);
  }
}
alert(results); 
```

* * *

或者我们可以让它更现代一点：

```
var results = data.Addresses.sort(function(a, b) {
    return a.address.localeCompare(b.address);
}).filter(function(item, i, arr) {
    return arr[i + 1].address != item.address;
});

alert(results); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:23:09.160

您可以像这样读取并将唯一值放入数组中

```
var data = {
    "Addresses": [{
        "address1": "2222 W Main"},
    {
        "address2": "1111 W Main"},
    {
        "address3": "1111 W Main"},
    {
        "adess4": "3333  Main"}]
};

var arr = [];

var address = ['address1', 'address2', 'address3', 'adess4'];

$.each(data.Addresses, function(i, value) {
    var val = value[address[i]];
    if (arr.indexOf(val) == -1) {
        arr.push(val);
    }
});

console.log(arr);

arr.sort(); 
```

[检查小提琴](http://jsfiddle.net/sushanth009/napSP/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:25:09.223

对于初学者，我会将所有键设为“地址”：

`{"Addresses"[{"address":"1111 W Main"},{"address":"2222 W Main"},{"address":"1111 W Main"},{"adess":"3333 Main]};`

之后，您可以遍历该特定键的 JSON 对象并将这些值存储到一个数组中。最后，您可以使用上面的排序/删除重复方法。

```
var addressList = {"Addresses":[{"address":"1111 W Main"},{"address":"2222 W Main"},{"address":"1111 W Main"},{"address":"3333  Main"}]}; 

var arr = new Array();
for(var i =0; i < addressList.Addresses.length; i++){
 arr.push(addressList.Addresses[i].address);
}

var sortedAddressList = arr.sort();
var results = [];

 for (var i = 0; i < sortedAddressList.length; i++) {
   if (sortedAddressList[i + 1] != sortedAddressList[i]) {
       results.push(sortedAddressList[i]);
   }
 }

alert(results);​ 
```

**[例子](http://jsfiddle.net/LGChQ/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T20:39:05.847

你在找这样的东西吗？

```
var uniqueSortedAddresses = [];
({"Addresses":[
  {"address1":"1111 W Main"},
  {"address2":"2222 W Main"},
  {"address3":"1111 W Main"},
  {"address4":"3333  Main"}
]}).Addresses.forEach(function(addressObj) {
  var i,address;
  for(i in addressObj) {
    if(addressObj.hasOwnProperty(i)) {
      address = addressObj[i];
      if(uniqueSortedAddresses.indexOf(address)==-1){
        uniqueSortedAddresses.push(address);
      }
    }
  }
});
uniqueSortedAddresses.sort(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-05T20:14:05.740

使用 Jackson 对象映射器，我认为您可以轻松获得带有输入流或字节 [] 的地址数组列表，您喜欢的任何类型。

只需将其放入 java.util.SortedSet 中，所有事情就完成了。

# ios - iphone 5 上的 Admob 放置一致性

> ID：12753339
> 
> 赞同：0
> 
> 时间：2012-10-05T20:08:24.183
> 
> 标签：ios, admob, iad

我正在使用它来设置我的广告框架

```
bannerView_ = [[GADBannerView alloc] initWithFrame:CGRectMake(0.0, self.view.frame.size.height-164 -GAD_SIZE_320x50.height, GAD_SIZE_320x50.width,GAD_SIZE_320x50.height)]; 
```

它在 3.5" 显示器上看起来不错。在 4" 显示器上，东西到处都是……我终于使用自动缩放设置修复了所有东西，使其在 4" 上看起来很好。我不知道该怎么处理横幅虽然是广告。现在它最终出现在 4 英寸显示屏上的一些东西之上。如果可能的话，我想要一个 4" 或 3.5" 显示器的不同设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:06:42.973

这是我现在的解决方案......也许有更好的方法。

```
CGRect screenBound = [[UIScreen mainScreen] bounds];
CGSize screenSize = screenBound.size;
CGFloat screenHeight = screenSize.height;

if((int)screenHeight==568)
{
// adjust for iphone 5
}
else
{
// standard frame
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T01:26:28.460

您要在哪里专门放置 GADBannerView 与您的屏幕相关的位置？我觉得这可能是 AutoLayout 的一个用例（放置 ​​GADBannerView，使其与屏幕上的另一个项目相比始终位于某个位置）。

# extjs - 如何更改代码以使组合框显示 displayField 值列表

> ID：12753340
> 
> 赞同：1
> 
> 时间：2012-10-05T20:08:29.360
> 
> 标签：extjs, extjs4, extjs4.1

如何更改代码，以便在 store 有嵌套的 json 数据时，combobox 显示 displayField 值的列表。

当我通过组合框编辑列“名称”时，它显示空列表。

```
Ext.define("Model", {
    extend: "Ext.data.Model",
    fields: [
        {name: "id", type: "int"},
        {name: "name.name"},
        {name: "phone", mapping: "name.phone"},
        {name: "descr", type: "string", mapping:'description'}
    ]
});

// store with data that we will recieve from test echo ajax service
var Store = Ext.create("Ext.data.Store", {
    model: "Model",
    autoLoad: true,
    proxy: {
        type: 'ajax',
        url: '/echo/json/',
        actionMethods: {read: 'POST'}, // echo ajax service required
        extraParams: {
            json: Ext.JSON.encode({
                root: [{id: 1, name: {name:"John", phone: "123"}, description:"Fapfapfap"},
                       {id: 2, name: {name:"Danny", phone: "234"}, description:"Boobooboo"},
                       {id: 3, name: {name:"Tom", phone: "345"}, description:"Tralala"},
                       {id: 4, name: {name:"Jane", phone: "456"}, description:"Ololo"},]
                })
        },
        reader: {
            type: 'json',
            root: 'root'
        }
    },
});

// and finally I have a grid panel
Ext.create("Ext.grid.Panel", {
    store: Store,
    columns: [
        {dataIndex: "id", header:"ID"},
        {dataIndex: "name.name", header:"Name", flex: 1, editor: {xtype:"combo", store: Store, displayField:'name.name'}},
        {dataIndex: "phone", header:"Phone", flex: 1, editor: "textfield"},
        {dataIndex: "descr", header: "Description", flex: 2, editor: "htmleditor"}
    ],
    //selType: 'rowmodel',
    plugins: [Ext.create('Ext.grid.plugin.CellEditing')],
    renderTo: Ext.getBody(),
}); 
```

这里的例子：http: [//jsfiddle.net/3MknG/2/](http://jsfiddle.net/3MknG/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:51:45.813

如果我如下设置字段“名称”映射，它将按预期工作。

```
{name: "name", mapping: "name.name"} 
```

并像这样配置网格列：

```
{dataIndex: "name", header:"Name", flex: 1, 
 editor: {xtype:"combo", store: Store, displayField:'name'}}, 
```

更改示例在这里：http: [//jsfiddle.net/3MknG/3/](http://jsfiddle.net/3MknG/3/)

但我不想将字段“name.name”的名称更改为“name”，因为它按网格的预期工作。

有没有人遇到过类似的问题？

**更新：**

我找到了一种解决方案。不是最好的，但它对我有用。

当组合作为组件初始化时，我动态添加具有映射配置的新字段以存储模型。

```
Ext.define("MyCombo", {
    extend: "Ext.form.field.ComboBox",
    alias:"widget.mycombo",
    initComponent: function(){
        var me = this;

        if (me.displayMapping) {
            var store = me.getStore();
            var proxy = store.getProxy();
            var model = proxy.getModel();
            me.displayField = Ext.id(me.displayMapping); // It is necessary to have difference between the name and other existing names in model.
            // Add new field with mapping to store model
            model.prototype.fields.add(new Ext.data.Field({ name: me.displayField,
                                                            mapping: me.displayMapping}));
        }
        me.callParent();
    }
});

Ext.create("Ext.grid.Panel", {
    store: Ext.create("MyStore"),
    columns: [
        {dataIndex: "id", header:"ID"},
        {dataIndex: "name.name", header:"Name", flex: 1, 
                    editor: {xtype: "mycombo",
                             store: Ext.create("MyStore"),         
                             displayMapping: "name.name"}},
        {dataIndex: "phone", header:"Phone", flex: 1, editor: "textfield"},
        {dataIndex: "descr", header: "Description", flex: 2, editor: "htmleditor"}
    ],
    plugins: [Ext.create('Ext.grid.plugin.CellEditing')],
    renderTo: Ext.getBody(),
}); 
```

您可以在这里找到更改后的示例：http: [//jsfiddle.net/3MknG/7/](http://jsfiddle.net/3MknG/7/)

有谁知道更好的解决方案？

# unit-testing - 我可以在经典 ABAP 报告中使用 ABAP 单元测试吗？

> ID：12753341
> 
> 赞同：11
> 
> 时间：2012-10-05T20:08:34.460
> 
> 标签：unit-testing, abap

我想在我的 ABAP 程序中实现 ABAP 单元测试，但我的第一份报告是经典的 ABAP 报告，根本没有 OO 类。

这甚至可能吗？还是仅用于 OO 类的 ABAP 单元？

我可以将它与子程序一起使用吗？

```
PERFORM get_date_range using sy-date changing lv_fromdate lv_todate. 
```

PS 我是一名长期的 Java 开发人员，仍在学习 ABAP。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T09:39:57.857

这是带有单元测试的示例报告：

```
report ztest.

end-of-selection.

  data number type i value 10.
  perform write_value using number.
  perform add_5 changing number.
  perform write_value using number.
  perform subtract_2 changing number.
  perform write_value using number.

form add_5 changing x type i.
  x = x + 5.
endform.

form subtract_2 changing x type i.
  x = x - 2.
endform.

form write_value using x type i.
  data x_str type string.
  x_str = x.
  condense x_str.
  write: / x_str.
endform.

class lcl_test definition for testing duration short risk level harmless.
  public section.
  protected section.
    methods add_5 for testing.
    methods subtract_2 for testing.
  private section.
    methods setup.
endclass.

class lcl_test implementation.
  method add_5.
    data number type i.
    number = 5.
    perform add_5 changing number.
    cl_aunit_assert=>assert_equals( act = number exp = 10 ).
    number = 20.
    perform add_5 changing number.
    cl_aunit_assert=>assert_equals( act = number exp = 25 ).
  endmethod.
  method subtract_2.
    data number type i.
    number = 5.
    perform subtract_2 changing number.
    cl_aunit_assert=>assert_equals( act = number exp = 3 ).
    number = 20.
    perform subtract_2 changing number.
    cl_aunit_assert=>assert_equals( act = number exp = 18 ).
  endmethod.
  method setup.
  endmethod.
endclass. 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-08T05:55:46.813

我不确定我是否正确理解了这个问题，但您当然可以在 ABAP 程序中包含单元测试，例如报告程序。在报表程序中包含以下代码，然后编译它。

之后，当您进入对象列表（Ctrl+Shift+F5 显示）时，您可以右键单击您的程序，然后`Execute -> Unit Tests`从菜单中进行选择。

重要的部分是单元测试被标记为`FOR TESTING`并且至少有一个方法被标记`FOR TESTING`。该`RISK LEVEL`添加还将根据系统设置确定是否允许运行测试。（在编辑器中按 F1 键以阅读更多内容）。

```
* The following defines a unit test class
class unit_tests definition for testing risk level harmless.
  public section.
    methods: test_query for testing.
endclass.

class unit_tests implementation.
  method test_query.
    data: lv_result type string.
    perform execute_query_b using '123' changing lv_result.
    assert lv_result = 'Expected_value'.
  endmethod.
endclass.

* Here is a subroutine in our program we wish to test
form execute_query_b using a changing res.
  res = 'Expected_value'.
endform. 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-05T20:59:29.470

你可以很好地在你的测试类/方法中使用

`PERFORM <form> IN PROGRAM <prog>`

然后验证你得到的结果。

编辑：

此外，SAP 帮助说明了这一点：
*创建 ABAP 单元测试*
ABAP 单元测试以测试方法的形式在 ABAP 程序中的本地测试类中实现，并使用辅助类 CL_AUNIT_ASSERT 的静态方法检查预期结果。

这验证了 ABAP 程序的测试应该是本地测试类，如下面的一些答案。仍然可以使用`PERFORM <form> IN PROGRAM <prog>`，但我敢冒险，这是一种在本地进行测试的更好方法。

T。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-16T05:19:11.900

在`ABAP`编程中，它将允许开发人员进行单元测试。

`ABAP`也包含`MACRO's`类似 in 的概念`C-programming`，但 in`ABAP MACROS`不允许单元测试。

```
REPORT ZDEMO_INTERNALTABLES.

TYPES : BEGIN OF ty_scarr,

        carrid TYPE scarr-carrid,
        carrname TYPE scarr-carrname,
        END OF ty_scarr.

DATA : it_scarr TYPE STANDARD TABLE OF ty_scarr,

       wa_scarr TYPE ty_scarr.
      PERFORM SA .

*&---------------------------------------------------------------------*
*&      Form  SA
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
*  -->  p1        text
*  <--  p2        text
*----------------------------------------------------------------------*

FORM SA .

  wa_scarr-carrid = 'AA'.
        wa_scarr-carrname = 'American airlines'.
        insert wa_scarr into table it_scarr .

         wa_scarr-carrid = 'df'.
        wa_scarr-carrname = 'xmy demy airlines'.
        insert wa_scarr into table it_scarr.

         wa_scarr-carrid = 'AC'.
        wa_scarr-carrname = 'AIRLINES'.
        APPEND WA_SCARR TO IT_SCARR.

         wa_scarr-carrid = 'AD'.
        wa_scarr-carrname = 'American airlines'.
        insert wa_scarr into table it_scarr.

        if SY-SUBRC = 0.
          ENDIF.
ENDFORM.                    " SA 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-17T14:54:03.223

SAP 有在哪里创建测试类的[官方建议](https://help.sap.com/doc/saphelp_nw75/7.5.5/en-US/4e/c4d16b6e391014adc9fffe4e204223/frameset.htm)，根据这些建议

> 在 ABAP 程序结束时创建 ABAP Unit 本地类和测试方法。当前没有单独的 ABAP 包含在 ABAP 程序和 ABAP 单元测试报告中

[因此，您应该像Rene 所建议的](https://stackoverflow.com/a/12779045/911419)那样，在报告末尾简单地添加本地测试类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-22T00:15:38.823

使用或编写<mainprogram_name> 程序，您可以编写带有Define <your_macro> 结束定义的宏来重复一个过程。你可以调用一个类方法：

```
class=>method(exporting = something 
importing = others) 
```

或者，您可以在主程序中创建子程序。等等

# opengl-es - 如何将纹理或纹理区域保存到 libgdx 中的文件？

> ID：12753342
> 
> 赞同：0
> 
> 时间：2012-10-05T20:08:34.420
> 
> 标签：opengl-es, textures, libgdx

差不多就是这样，我想在运行时修改 libgdx 中的一些纹理，以便能够将它们保存为 .png 文件，但我不知道该怎么做。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T23:22:43.890

要`Pixmap`使用该`getPixels`方法获取像素数据，请将其转换为 a `byte[]`，然后按照此 libGDX 论坛帖子中的示例进行操作：[http ://www.badlogicgames.com/forum/viewtopic.php?p=8358#p8358](http://www.badlogicgames.com/forum/viewtopic.php?p=8358#p8358)

这篇文章讨论了使用`ScreenUtils`刮屏并获取像素数组。在那之后的一切对你来说都应该是一样的。

我在这段代码上取得了成功，但它确实生成了非常低效的 PNG 文件。我使用 pngcrush 离线合并它们。

# python - 从字典中删除一个或多个键

> ID：12753351
> 
> 赞同：0
> 
> 时间：2012-10-05T20:09:03.043
> 
> 标签：python, python-3.x

在 Scala 中，要从我需要做的字典中删除一个键（从 REPL 粘贴）：

```
scala> Map(9 -> 11, 7 -> 6, 89 -> 43) - 9
res4: scala.collection.immutable.Map[Int,Int] = Map(7 -> 6, 89 -> 43) 
```

要删除多个键：

```
scala> Map(9 -> 11, 7 -> 6, 89 -> 43) -- Seq(9, 89)
res5: scala.collection.immutable.Map[Int,Int] = Map(7 -> 6) 
```

这样做的 Python 方法是什么？（我发布了 Scala 示例，因为这是我的背景。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T20:10:07.440

如果`d`是您的字典和`k`要删除的键：

```
d.pop(k) 
```

例如：

```
d = {"a": 1, "b": 2, "c": 3}
d.pop("a")
print d
# {'c': 3, 'b': 2} 
```

如果要删除多个：

```
for k in lst:
    d.pop(k) 
```

如果您想以非破坏性方式执行此操作，并获得一个作为子集的新字典，您最好的选择是：

```
s = set(lst)
new_dict = {k: v for k, v in d.items() if k not in s} 
```

您可以使用`k not in lst`而不是处理`set(lst)`，但`set`如果要删除的项目列表很长，使用会更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T19:07:03.673

```
>>> d = {"a": 1, "b": 2, "c": 3}
>>> for _ in ['a','c']: del(d[_])
... 
>>> d
{'b': 2} 
```

# git - opendiff 或其他合并工具通过 ssh 与远程机器的 Git 交谈

> ID：12753352
> 
> 赞同：4
> 
> 时间：2012-10-05T20:09:21.743
> 
> 标签：git, ssh, proxy, merge, opendiff

如何使用 opendiff 或其他可视化合并工具通过 ssh 连接到远程 Linux 服务器并使用本地可视化合并工具处理 Git 合并冲突？

我可以在本地配置 git 来代理远程服务器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T22:00:12.590

获得所需内容的最简单方法可能是使用**sshfs**挂载远程目录，并像在本地一样解决文件中的冲突。但是，您仍然需要`git add`通过在远程服务器上运行该命令将更改标记为已解决（使用 ）。

我从你提到的 opendiff 猜想你正在使用 Mac OS。在 Mac OS 上获取 sshfs 的推荐方法曾经是[macfuse](http://code.google.com/p/macfuse/)，但看起来好像不再受支持，所以使用[FuseX](http://code.google.com/p/macfuse/)可能会更好。（我只是一个非常少见的 Mac 用户，我个人不能保证其中任何一个。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-19T12:50:05.823

我遇到了类似的问题，然后我将我的开发环境移到了灯上。

我改变了我的工作流程，现在我将 PhpStorm (IDE) 与远程 SFTP 和它拥有的内部 git 工具一起使用。这是一个必须更有效的工作流程！（大多数 IDE 都有类似的工具）

正如 Mark Longair 所说，如果您想坚持使用您用来工作的工具，那么 sshfs 是最好的解决方案。

最后，您选择的任何方法都可以使用私钥。它会让您忘记您在远程文件夹上工作！

# iphone - ios 6 问题上的 AES 加密/解密

> ID：12753353
> 
> 赞同：0
> 
> 时间：2012-10-05T20:09:26.650
> 
> 标签：iphone, encryption, ios6

我正在尝试使用我在网络上找到的一些库（他们使用`CommonCrypto`）（链接如下）来加密/解密文件，但是所有库在 ios6 中都有相同的问题（而不是在 ios 5 中）：例如我用“加密图像” xx”作为密码，当我解密它时，我总是得到一个真实的结果，并且输出一个非零数据，如果密码是“xx”，则图像格式正确（我可以打开它）如果不是，我不能，这只是在ios6中。我听说 ios 6 的 WPA2-AES 加密密码有问题：[ios6 wifi issue](http://www.dailygadgets.net/apples-ios-6-wi-fi-issues-linger-on/13652/)。

这是一个已知问题吗？您能告诉我在 ios6 上执行此操作的方法吗？

使用的库的链接： [https ://github.com/dev5tec/FBEncryptor](https://github.com/dev5tec/FBEncryptor) [https://github.com/AlanQuatermain/aqtoolkit/tree/master/CommonCrypto](https://github.com/AlanQuatermain/aqtoolkit/tree/master/CommonCrypto) [http://code.google.com/p/iphonebits/source/browse /trunk/src/加密/?r=2](http://code.google.com/p/iphonebits/source/browse/trunk/src/Encryption/?r=2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T01:53:05.307

只要您不为密文提供身份验证/完整性保护，即使密钥不正确，代码也可能始终解密。AES 块加密是 1:1，纯文本消息只有一个密文，密文总是链接到单个纯文本消息。这意味着如果您提供了错误的密钥，解密将是一个与块大小相同的随机值。

使用 HMAC，最好使用另一个密钥，对消息进行签名或使用经过身份验证的加密模式。

# vb.net - 从另一个表单中删除 DataGridView 行

> ID：12753356
> 
> 赞同：1
> 
> 时间：2012-10-05T20:09:31.717
> 
> 标签：vb.net, datagridview

我从 DataGridView 中删除行时遇到问题。我有客户的 DataGridView。当我单击行时，新表单打开（带有客户数据）。在此表单中，有一个“删除”按钮，其中单击 Sub 是此代码：

```
Form1.DataGridView1.Rows().RemoveAt(_personIndex) 
```

问题是这段代码不起作用。我以与 datagridview 相同的形式尝试了此代码并且它有效。我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:13:12.127

只有在共享 DataGridView1 时，您访问 DataGridView1 的方式才有效。在您的客户端数据表单上，创建一个可以采用 DataGridViewRows 或 DataGridView 集合的构造函数，这样您就可以访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:48:45.593

您应该让加载客户信息的第二个表单触发一个事件并让您的主表单处理该事件。这样您就可以直接访问 datagridview。

为了做到这一点，你需要做四件事：

1.  第二种形式的事件声明为：

    `Friend Event DeleteClient(ByRef rowID As Integer)`

2.  您必须声明在单击一行时启动的第二个表单`withevents`：

    `Dim WithEvents secondForm As ClientForm`

3.  一个事件处理程序，它将捕获被删除的行并将其从数据网格视图中删除

    ```
    Private Sub DeleteClient(ByRef rowID As Integer) Handles clientform.DeleteClient
        DataGridViw1.Rows().RemoveAt(rowID)
    End Sub 
    ```

4.  删除按钮的按钮单击事件中的 RaiseEvent 调用。

    `RaiseEvent DeleteClient(idOfRowToBeRemoved)`

一旦一切就绪，每次单击删除按钮时，事件应该被触发并被调用辅助表单的表单捕获，并且应该删除该行。

# google-apps-script - 将多个邀请对象添加到 Google 日历活动会引发错误

> ID：12753358
> 
> 赞同：0
> 
> 时间：2012-10-05T20:09:36.193
> 
> 标签：google-apps-script

*   我正在尝试批量邀请群组成员参加日历活动
*   如果我使用其电子邮件邀请该组，则该组在事件中被拆分（这是正常的）但邀请未“验证”......我可以在日历界面中手动验证它们，但这不是解决方案。最后，即使他们的名字出现在活动中，客人也不会被邀请。如果我不手动“保存”此事件，日志**会将该组**显示为 only guest，**而不是它的 users**。

因此，我尝试使用下面的脚本分别添加每位客人，但我收到一个我不明白![在此处输入图像描述](../Images/f76821621ad434f0d2d5901b52d0f7d4.png) 的错误该错误出现在第一次活动成功邀请的可变数量之后......有时只有一个，有时是 2 或 3 或 5 ...随机。

*这是在域上的谷歌应用程序教育帐户上运行的。我拥有管理员权限，并且拥有日历的所有权限。*

这是相关功能的代码：（获取组成员，邀请他们参加一段时间内的每个事件，在新工作表上打印结果日志。）

```
function sendinvites(e) {
  var calendar_name = e.parameter.calendar;
  var email = calendar_name.toLowerCase()+'@insas.be';
  var group = GroupsManager.getGroup(email);
  var members = group.getAllMembers();
  var startDate = new Date(e.parameter.start);
  var endDate = new Date(e.parameter.end);
  var Calendar = CalendarApp.getCalendarsByName(calendar_name);
  var sheetName = calendar_name + "-du-" + Utilities.formatDate(e.parameter.start, FUS1, "dd-MMM-yyyy")
      + "-au-" + Utilities.formatDate(e.parameter.end, FUS1, "dd-MMM-yyyy")  
// 
  var events = Calendar[0].getEvents(startDate , endDate);
  if (events[0]) {
    var eventarray = new Array();
    var line = new Array();
    line.push('Titre : '+calendar_name,'Début ','Fin','Localisation','Durée','invités');
    eventarray.push(line);

    for (i = 0; i < events.length; i++) {
      if(events[i].getTitle().match('semaine n')=='semaine n'){continue}
    var lr = logsheet.getLastRow(); // these lines are added here for test purpose only, to see where in the loop it fails... that's why I set values cell by cell !
      logsheet.getRange(lr+1,1).setValue(events[i].getTitle()+' / '+Utilities.formatDate(events[i].getStartTime(), FUS1, "dd-MMM-yyyy"));
      for(nn=0;nn<members.length;++nn){
        logsheet.getRange(lr+1,nn+2).setValue(members[nn]);  
        events[i].addGuest(members[nn])
            }
      line = new Array();
      line.push(events[i].getTitle());
      line.push(Utilities.formatDate(events[i].getStartTime(), FUS1, "dd-MMM-yyyy")+' à ' +Utilities.formatDate(events[i].getStartTime(), FUS1, "HH:mm"));
      line.push(Utilities.formatDate(events[i].getEndTime(), FUS1, "dd-MMM-yyyy")+' à ' +Utilities.formatDate(events[i].getEndTime(), FUS1, "HH:mm"));
      line.push(events[i].getLocation());
      line.push((events[i].getEndTime() - events[i].getStartTime()) / 3600000);
      var invitelist='';
      var list = events[i].getGuestList()
          for(nn=0;nn<list.length;++nn){invitelist+=list[nn].getName()+', '}
      line.push(invitelist)
      eventarray.push(line);
    }
    Logger.log(eventarray)
    var sheet = SpreadsheetApp.getActiveSpreadsheet().insertSheet(sheetName);
    sheet.getRange(1,1,eventarray.length,eventarray[0].length).setValues(eventarray);
    sheet.getRange(1,1,1,eventarray[0].length).setBackgroundColor('#ffffcc');
    sheet.setColumnWidth(1, 450);sheet.setColumnWidth(2, 150);sheet.setColumnWidth(3, 150);sheet.setColumnWidth(4, 250);sheet.setColumnWidth(5, 75);sheet.setColumnWidth(6, 450);;
    sheet.setFrozenRows(1)
  } else {
    var startstring = Utilities.formatDate(e.parameter.start, FUS1, "dd-MMM-yyyy");
    var endstring = Utilities.formatDate(e.parameter.end, FUS1, "dd-MMM-yyyy");
    Browser.msgBox('Aucun événement entre le ' + startstring + ' et le ' + endstring +' dans votre agenda :'+calendar_name);
  }

  var app = UiApp.getActiveApplication();
  app.close();
  return app;  
} 
```

所以我的问题是：这是正确的方法吗？我应该通过其电子邮件邀请该组吗？在这种情况下，我如何才能将该组自动拆分到每个日历中？

有没有人遇到过这种情况？

我有点卡在这里：-/

参考： [问题跟踪器 1906](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1906)[与 264](http://code.google.com/p/google-apps-script-issues/issues/detail?id=264)合并 ，请参阅自己的答案以了解详细信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:45:15.190

根据[http://code.google.com/p/google-apps-script-issues/issues/detail?id=264#c40](http://code.google.com/p/google-apps-script-issues/issues/detail?id=264#c40)

```
This exception error is not a bug. 
This issue occurs only when one event is being modified by multiple parties simultaneously. 
It is thrown intentionally to prevent a loss of data. 
```

尝试在脚本的各个部分之间使用睡眠代码：

```
Utilities.sleep(2000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T19:09:20.470

阅读问题跟踪器似乎有一个解决此问题的解决方法，即每次分别获取事件并一次添加一位客人。

这**非常慢**，但显然运行没有错误（到目前为止;-)

***我希望谷歌会改变这种行为，因为它非常不舒服！***

代码太慢了，以至于在有 15 位客人的 20 次活动后超时……非常高兴的是，我添加的日志表告诉我它在哪里停止，我用来设置日期的 UI 即使在超时后也保持打开状态。我想我会在接下来的几天里喝很多咖啡，等待我从 9 月到 6 月填满的 20 个日历！;-P

* * *

这是修改后的代码（部分已更改）

```
for (i = 0; i < events.length; i++) {
  if(events[i].getTitle().match('semaine n')=='semaine n'){continue}
    var ID = events[i].getId(); // get the ID to be able to recall the event later
var lr = logsheet.getLastRow();
  logsheet.getRange(lr+1,1).setValue(events[i].getTitle()+' / '+Utilities.formatDate(events[i].getStartTime(), FUS1, "dd-MMM-yyyy"));
  for(nn=0;nn<members.length;++nn){
    logsheet.getRange(lr+1,nn+2).setValue(members[nn]);  
    Calendar[0].getEventSeriesById(ID).addGuest(members[nn]);// separately get each event and add guest
  }
  line = new Array();
  line.push(events[i].getTitle());
  line.push(Utilities.formatDate(events[i].getStartTime(), FUS1, "dd-MMM-yyyy")+' à ' +Utilities.formatDate(events[i].getStartTime(), FUS1, "HH:mm"));
  line.push(Utilities.formatDate(events[i].getEndTime(), FUS1, "dd-MMM-yyyy")+' à ' +Utilities.formatDate(events[i].getEndTime(), FUS1, "HH:mm"));
  line.push(events[i].getLocation());
  line.push((events[i].getEndTime() - events[i].getStartTime()) / 3600000);
  var invitelist='';
  var list = Calendar[0].getEventSeriesById(ID).getGuestList()
      for(nn=0;nn<list.length;++nn){invitelist+=list[nn].getName()+', '}
  line.push(invitelist)
  eventarray.push(line);
} 
```

# php - 如何摆脱关闭浏览器或选项卡的用户

> ID：12753360
> 
> 赞同：0
> 
> 时间：2012-10-05T20:09:42.647
> 
> 标签：php, javascript, sql

> **可能重复：**
> [如何计算网站上的在线用户](https://stackoverflow.com/questions/2843989/how-to-count-online-users-on-a-website)

如何关闭已关闭浏览器或选项卡的用户，并在他们返回到我的在线用户列表中的页面时将其重新打开？这是我的代码：

```
 $sql = "SELECT
user_id,
user_name,
user_class,
online
FROM
users
WHERE
online = 1
GROUP BY
 user_name ASC ";
$result = mysql_query($sql);
if(!$result)
{
echo 'There are currently no user online.' . mysql_error();
}
else
{
if(mysql_num_rows($result) == 0)
{
    echo 'There are currently no user online.';
}
else
{
    //display category data
    while($row = mysql_fetch_assoc($result))
    { $D= $row['online']; 
    if( ($D) !=1)
    {
    echo 'There are currently no user online.';
}
else
{ 
         echo'<a href="/index.php?area=profile&userid=' . $row['user_id'] .  '" ' . $row['user_class'] . '>' . $row['user_name'] . '</a>, ';}}}}?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T20:16:30.917

您不会像这样在数据库中使用标志。您应该设置一个记录用户最后一次出现的关系表。通常间隔5分钟左右。

基本上，每个页面加载您登录一个表 user_id, datetime

然后，每个页面加载您想知道谁在线的地方，您都会检查日期时间 >= 时间 - 5 分钟的表格。

如果您不明白我的意思，评论中的教程可能会更有用，但总的来说，这个想法是这样的：

当用户与站点交互时记录。这可能是关系表中的页面加载、ajax 请求等。我建议使用关系，因为它允许您跟踪所有行为并避免不必要地更新用户表。

```
INSERT INTO `site_activity` (`user_id`, `date_time`) VALUES ( $user_id, NOW() )
// by the way, here we assume you're escaping $user_id 
```

然后在页面加载时查询该表。您可以直接进行计数，也可以加入用户表以报告 WHO 在线。以下是获取过去 5 分钟结果的基本查询。

```
SELECT * FROM `site_activity` WHERE `date_time` >= DATE_SUB( NOW(), INTERVAL 5 MINUTE ) 
```

这只是为了给出结构的基本概念。用例场景需要更多关于您的需求、现有代码等的信息。

# java - Glassfish 下的安全 SSL Web 服务

> ID：12753362
> 
> 赞同：1
> 
> 时间：2012-10-05T20:09:48.727
> 
> 标签：java, web-services, ssl, ejb, glassfish-3

您好，我正在 Glassfish 下部署 Web 服务（ejb），我只是按照这些步骤操作，没有任何结果[http://www.java-tips.org/java-ee-tips/java-api-for-xml-web-services /using-jax-ws-based-web-services-wit.html：glassfish-ejb-jar.xml](http://www.java-tips.org/java-ee-tips/java-api-for-xml-web-services/using-jax-ws-based-web-services-wit.html)描述符内容：

```
<!DOCTYPE glassfish-ejb-jar PUBLIC "-//GlassFish.org//
DTD GlassFish Application Server 3.1 EJB 3.1//EN" 
"http://glassfish.org/dtds/glassfish-ejb-jar_3_1-1.dtd">
<glassfish-ejb-jar>
<enterprise-beans>
    <ejb>
        <ejb-name>Test</ejb-name>
        <webservice-endpoint>
            <port-component-name>Test</port-component-name>
            <transport-guarantee>CONFIDENTIAL</transport-guarantee>
        </webservice-endpoint>
    </ejb>
</enterprise-beans>
</glassfish-ejb-jar> 
```

当我尝试转到[https://mysite.com/Test](https://mysite.com/Test)时，它显示一个空白页面，知道吗？

# apache-flex - Flex 应用程序中的亚洲字符支持

> ID：12753368
> 
> 赞同：1
> 
> 时间：2012-10-05T20:10:31.190
> 
> 标签：apache-flex, multilingual

我的应用程序目前只被英文用户使用，现在我们计划在中国、日本、韩国和其他亚洲国家推出应用程序，因此希望在其中建立亚洲语言支持，这应该允许用户在他们的输入数据语言，这也将保存在我们的系统中。

我在网上某处读到我可以使用设计字体来支持相同的字体，我修改了我们的样式表以在当前字体名称之外添加“_sans”，我现在可以输入亚洲语言的数据，但我观察到 UI 看起来和感觉已经退化，字体不再清晰，而且看起来很朦胧。

我在这里做错了吗？请告知如何解决这个问题，我想支持亚洲字符但想保持系统当前的外观和感觉。

任何帮助都会很棒！

谢谢阿布舍克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:15:08.250

尝试嵌入更具吸引力和锐利的亚洲字体，网络上有免费用于商业用途的字体。
您使用的是哪个 IDE？

# android - 使用密钥字符串加密另一个字符串中的字符串，编译问题

> ID：12753370
> 
> 赞同：0
> 
> 时间：2012-10-05T20:10:40.217
> 
> 标签：android, string, encryption

我需要 2 种简单的加密和解密方法来加密一个`String a`使用`String b`另一个`String key`作为加密和解密密钥的加密。

我发现这段代码似乎在做我需要的

```
public class DesEncrypter {
    Cipher ecipher;
    Cipher dcipher;

    DesEncrypter(SecretKey key) {
        try {
            ecipher = Cipher.getInstance("DES");
            dcipher = Cipher.getInstance("DES");
            ecipher.init(Cipher.ENCRYPT_MODE, key);
            dcipher.init(Cipher.DECRYPT_MODE, key);

        } catch (javax.crypto.NoSuchPaddingException e) {
        } catch (java.security.NoSuchAlgorithmException e) {
        } catch (java.security.InvalidKeyException e) {
        }
    }

    public String encrypt(String str) {
        try {
            // Encode the string into bytes using utf-8
            byte[] utf8 = str.getBytes("UTF8");

            // Encrypt
            byte[] enc = ecipher.doFinal(utf8);

            // Encode bytes to base64 to get a string
            return new sun.misc.BASE64Encoder().encode(enc);
        } catch (javax.crypto.BadPaddingException e) {
        } catch (IllegalBlockSizeException e) {
        } catch (UnsupportedEncodingException e) {
        } catch (java.io.IOException e) {
        }
        return null;
    }

    public String decrypt(String str) {
        try {
            // Decode base64 to get bytes
            byte[] dec = new sun.misc.BASE64Decoder().decodeBuffer(str);

            // Decrypt
            byte[] utf8 = dcipher.doFinal(dec);

            // Decode using utf-8
            return new String(utf8, "UTF8");
        } catch (javax.crypto.BadPaddingException e) {
        } catch (IllegalBlockSizeException e) {
        } catch (UnsupportedEncodingException e) {
        } catch (java.io.IOException e) {
        }
        return null;
    }
} 
```

不幸的是需要修复工作，我得到一个错误

```
sun.misc.BASE64Encoder() 
```

并且在

```
sun.misc.BASE64Decoder() 
```

要求我在 sun.misc 包中创建 base64 编码器和解码器

怎么修？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:18:20.210

`sun.misc.BASE64Encoder`并且`sun.misc.BASE64Decoder`在 Android Java 实现中不存在。它们仅在 Oracle 的 JDK 中是内部的，尽管您确实可以访问，但不能保证它们在那里。

您可以使用 android.util.Base64 类在 Android 中对 base 64 进行编码和解码。

要编码，请更改：

```
return new sun.misc.BASE64Encoder().encode(enc); 
```

到：

```
return android.util.Base64.encodeToString(enc, android.util.Base64.DEFAULT); 
```

要解码，请更改：

```
byte[] dec = new sun.misc.BASE64Decoder().decodeBuffer(str); 
```

到：

```
byte[] dec = android.util.Base64.decode(str, android.util.Base64.DEFAULT); 
```

# c# - 使用 Moq 测试计时器

> ID：12753373
> 
> 赞同：2
> 
> 时间：2012-10-05T20:10:47.470
> 
> 标签：c#, unit-testing, moq

我正在构建一个计时器类，但我无法通过测试。我想测试当计时器上的时间过去时调用一个方法。

我有以下课程：

```
public class TimeOutTimer
{
    private readonly ISubscriber _subscriber;
    private Timer _timer;

    public TimeOutTimer(ISubscriber subscriber)
    {
        _subscriber = subscriber;
    }

    public void Start()
    {
        _timer = new Timer(1000);
        _timer.Start();
        _timer.Elapsed += TimerOnElapsed;
    }

    private void TimerOnElapsed(object sender, ElapsedEventArgs elapsedEventArgs)
    {
        _subscriber.TimeReached();   
    }
} 
```

和测试，使用最小起订量：

```
[Test]
public void Start_WithValidParameters_TriggersTimeReached()
{
    var subscriberMock = new Mock<ISubscriber>();
    var timer = new TimeOutTimer(subscriberMock.Object);

    timer.Start();

    subscriberMock.Verify(subscriber => subscriber.TimeReached());
} 
```

如果我取出 Timer 并直接调用 _subscriber.TimeReached()，它就可以工作。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T20:24:45.710

在您的示例中，事件应在 1000 毫秒后调用，而您则立即进行验证。显然，此时无法调用该事件。

最简单的方法是在你的测试中放置一个线程睡眠。

```
[Test]
public void Start_WithValidParameters_TriggersTimeReached()
{
    var subscriberMock = new Mock<ISubscriber>();
    var timer = new TimeOutTimer(subscriberMock.Object);        

    timer.Start();
    Thread.Sleep(1000);

    subscriberMock.Verify(subscriber => subscriber.TimeReached());
} 
```

然而，这并不是为基于时间的类生成单元测试的正确方法。

正确的方法是创建一个`ITimer`接口，然后由基于`Timer`.

`ITimer`then 成为 的依赖项，`TimeoutTimer`并在构造函数中或作为属性传递给它。

在您的测试中，您可以模拟计时器，使其与您的测试同步而无需等待（例如，通过控制类手动触发事件）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T20:24:32.463

好吧，您在这里处理的是异步操作。如果您在处理程序中放置一个断点并通过代码进行调试，并且如果您在验证行上等待一个拼写，那么当您跨过验证行时，您将看到处理程序确实执行了。您的问题是您的测试在处理程序有机会触发之前完成。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-05T20:25:38.733

您必须在测试中引发 Elapsed 事件。

我怀疑是新的计时器引起了麻烦。您可以尝试使其可注入，然后将其注入测试并引发事件。

# compiler-construction - 将转译器写入实际映射发生的位置

> ID：12753374
> 
> 赞同：9
> 
> 时间：2012-10-05T20:10:54.920
> 
> 标签：compiler-construction, lexical-analysis, code-translation

我想了解转译器的工作原理。最好的办法是写一篇ofcourse。

从理论上讲，我一直在研究一些资源以了解其工作原理。我了解以下内容：

据我了解，我基本上需要编写两个类：

1.  词法分析器
2.  解析器

## 词法分析器

将`Lexical Analyzer`文件的源代码作为输入（输入流）。例如下面的代码：

```
if (someVar == 20) {
    MessageBox("Hello World!");
} 
```

然后`Lexical Analyzer`创建数据块：

```
[if]
[ ]
[(]
[someVar]
[ ]
[==]
[ ]
[20]
[)]
[ ]
[{]
[\n]
[\t]
[MessageBox]
[(]
["]
[Hello World!]
["]
[)]
[;]
[\n]
[\t]
[}] 
```

然后将其发送给`Parser`班级。

## 解析器

然后`Parser`该类将读取所有标记块（？）并指定每个标记（？）的含义。它将为其分配某种类型。因此，上述字符串的结果将被标识为：

```
[if]      // Keyword
[ ]       // Whitespace
[(]       // L_Parenthesis
[someVar] // Identifier
[ ]       // Whitespace
[==]      // Operator
[ ]       // Whitespace
[20]      // Number (or Integer)
[)]       // R_Parenthesis
[ ]       // Whitespace
[{]       // L_Bracket
[\n]      // Whitespace
[\t]      // Whitespace
[MessageBox] // Keyword
[(]       // L_Parenthesis
["]       // Not yet sure where this would go
[Hello World!] // Same..
["]       // Same...
[)]       // R_Parenthesis
[;]       // Semicolon
[\n]      // Whitespace
[\t]      // Whitespace
[}]       // R_Bracket 
```

正如你所看到的，我还没有完全弄清楚哪些类型到底在哪里。但这应该是基本思想。

现在我想做的下一件事就是将该源代码转换为另一个源代码，从而对其进行转译。但这是如何工作的？我找不到任何直接的教程和解释。

假设我有以下**自定义**代码：

```
def myVar = true;

public function myFunc ( def arg1 )
{
    if ( arg1 == true ) {
        MessageBox("My Message");
    }
} 
```

然后 Lexical 进程将解析这段代码。那么我如何将其转换为 Javascript 之类的东西？

```
var myVar = true;

myFunc = function ( arg1 )
{
    if ( arg1 == true ) {
        alert("My Message");
    }
} 
```

从我的自定义 cdoe 到像 Javascript 这样的代码，映射是如何工作的？比如函数声明。我的`Lexical`解析器具有以下内容：`public`, `function`, `myFunc`. 它怎么知道它应该映射到：`myFunc = function`...？

任何人都可以提供有关如何在其中完成此操作的任何有用且实用的信息`transpiler`？或者我`lexical`为这份工作编写分析器是不是错了？

## 编辑

所以很明显我的词法分析器/解析器如何工作的想法并不完全正确。任何有关此过程如何工作的“伪”信息（带有伪示例）都非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-11-05T12:59:34.033

你已经做了一些实验。我建议你选择 ANTLR。您指定的两种语言的语法都存在于 ANTLR v4 的 Github 存储库中。下一步是映射两个 Grammars 。变量到变量，函数到函数等...意味着所有语言结构：关键字、符号等。任何额外的功能都需要硬编码，否则转译、编译或解释将无法 100% 工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-23T19:06:19.603

我强烈推荐看看[Decaf 编译器项目](https://parasol.tamu.edu/courses/decaf/students/)。

一般来说，转译器或翻译器只是一个没有优化的编译器。

以下是编译器（或本例中的转译器）各个阶段的概述。

1.  词法分析：这需要输入流并将其转换为标记。标记是语言中最小的有意义的单位。例如，关键字、大括号、标识符。标记通常可以用正则语言（或等效的正则表达式）来描述，因此词法分析器通常使用正则表达式来扫描输入流以创建分类标记。

2.  Parsing：解析器，一般来说，需要将标记流转换为[Abstract Syntax Trees](https://en.wikipedia.org/wiki/Abstract_syntax_tree)。这使我们能够从输入中收集更多的含义和结构。例如 "(id:x) (operator:=) (id:y)" 可以是传入的令牌流，然后解析将输出以 (operator:=) 为根的树， (id:x) 为左孩子，和 (id:y) 作为右孩子。AST 的结构取决于语言的语法。一般来说，您的解析器会强制执行语言语法。

3.  [语义分析](https://en.wikipedia.org/wiki/Semantic_analysis_(compilers))：这是您通过 AST 并从输入中收集您需要的其他信息的地方。一个典型的例子是类型检查。

4.  优化：在语义分析之后，编译器通常会执行某种程度的优化。在转译器/翻译器的情况下，可能不需要优化。

5.  代码生成：这是您将一种语言“映射”到另一种语言的部分。生成器将获取每个 AST 并生成它指定的代码。在普通编译器中，这会生成程序集或机器代码。在翻译器/转译器中，您只需要为您想要的特定语言编写生成器。

当然，这份清单非常详尽，但我希望它可以帮助您更好地了解您的项目！

# algorithm - 如何开发拼写检查器和建议器

> ID：12753376
> 
> 赞同：3
> 
> 时间：2012-10-05T20:10:56.550
> 
> 标签：algorithm, spell-checking

> **可能重复：**
> [什么算法在拼写检查器中给出建议？](https://stackoverflow.com/questions/2294915/what-algorithm-gives-suggestions-in-a-spell-checker)

我需要开发一个孟加拉语拼写检查器和正确的拼写建议器。我使用编辑距离算法开发了一个，它不能给出很好的预测。谁能指导我采取更好的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T20:20:49.357

Peter Norvig 写了一篇关于如何构建统计拼写校正器的[热门文章。](http://norvig.com/spell-correct.html)如果您能找到一堆可能正确的孟加拉语文本，那么该方法可能对您有用。这些示例使用 Python，但方法不是特定于语言的。

# sandbox - GameCenter 沙盒成就是否适用于临时分发构建？

> ID：12753379
> 
> 赞同：2
> 
> 时间：2012-10-05T20:11:00.793
> 
> 标签：sandbox, game-center, ad-hoc-distribution, achievements

我已经按照 GameCenter 的所有说明进行操作。我添加了验证我的应用程序的代码，并通过 iTunes Connect 为我的应用程序创建了 3 个示例成就。

我可以在 GameCenter 沙盒中看到我的 3 个示例成就。此外，我添加了一个 GameCenter 按钮，该按钮调用弹出 GameCenter 沙盒 GUI，当我单击该按钮时，我的 3 个示例成就也会显示。

到目前为止，一切都很好，对吧？

此外，我知道我在运行时已通过 API 成功“验证”，并且在启动时我的游戏标题屏幕顶部会出现一个小的 GameCenter 公告栏。所以这很好。

而且我知道我的“iphone-appid”与我在 iTunes connect 中创建的应用程序完全相同。所以这也不是问题。

这就是问题所在——当我调用函数将成就添加到 GameCenter 时，它们会报告成功，但是当我切换到沙盒 GameCenter 时，它们不会出现。

我正在运行“临时分发”这一事实是否会在这里产生问题？由于其他原因，我目前无法使用“iPhone Developer”签名身份进行构建。

# javascript - 当音乐播放器开始使用 JavaScript 时，如何更改 CSS 属性？

> ID：12753381
> 
> 赞同：0
> 
> 时间：2012-10-05T20:11:17.360
> 
> 标签：javascript

我的页面上有一个音乐播放器，其代码如下：

```
<!--SCM Music Player by Adrian C Shum - http://scmplayer.net-->  
<script type="text/javascript" src="http://scmplayer.net/script.js" ></script>  
<script type="text/javascript">  
SCMMusicPlayer.init("{'skin':'skins/black/skin.css','playback':{'autostart':'true','shuffle':'true','volume':'40'},'playlist':[{'title':'2Spooky Battle','url':'http://a.tumblr.com/tumblr_mbdoptQ5LT1rte8jio1.mp3'}], 'onplay': function() {alert('playing');},'placement':'bottom','showplaylist':'false'}");  
</script>  
<!--End of SCM Music Player script--> 
```

我也有两张图片，其代码如下所示：

```
<html>
<head>
<style type="text/css">

#img1{
  position: fixed;
  right: 10px;
  bottom: 100px;
  z-index: 10;
  visibility:hidden;
}

#img2{
  position: fixed;
  left: 10px;
  top: 10px;
  z-index: 10;
  visibility:hidden;
}

</style>
</head>

<body>
  <img src="IMAGE1.png" id="img1">
  <img src="IMAGE2.png" id="img2">
</body>
</html> 
```

我想这样做，以便在播放器启动时这两个都变得“可见”。我需要添加/取出/替换什么才能使它起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:15:35.900

使用 jQuery 我会写这个 javascript 代码

```
<script>
    function ChangeCSS()
    {
        $('#img1').css({ //new css style goes here
                         z-index : 10 
                      });
</script>
// in your init method there is onPlay method use it to call this function. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:18:33.467

这将取决于 SCMPlayer 是否让您能够指定“回调”，这本质上是播放器在特定事件发生时调用的一段代码。

另一种方法是使用一组外部控件来管理播放器，并将您的代码附加到其中。SCMPlayer 的文档 (http://scmplayer.net/#api) 提供了有关如何通过单击调用播放/暂停的说明。您可以调整它以调用自定义函数，该函数适当地设置项目的可见性。

尽管您没有在原始问题中指定它，但 jQuery 使像这样的 DOM 元素的操作非常容易。你会想看看它是否适合你的情况。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:19:39.607

有一个 onPlay 回调。您可能可以使用它。

未经测试的示例代码：

```
function displayElement(id) {
    document.getElementById(id).style.visibility = 'visible';
}

onplay: function() {
    displayElement('img1');
    displayElement('img2');
} 
```

# java - 等待对象在 CORBA 命名服务中绑定

> ID：12753386
> 
> 赞同：2
> 
> 时间：2012-10-05T20:11:34.320
> 
> 标签：java, corba

我想等待服务器将自己绑定到 CORBA 命名服务中。首先，我尝试使用以下代码轮询命名服务

```
Object expectedObj = null;
do
{
   try { expectedObj = ncRef.resolve_str("expectedToBeInNameService"); } 
   catch (NotFound e) {}
   Thread.sleep(2000);
} while(expectedObj == null; 
```

我最大的问题是这个阻塞。等待它非阻塞的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:38:49.043

您可以在另一个线程中等待并使用回调来通知“原始”线程或对象对命名服务的请求已解决。

```
class WaitThread extends Thread {
    CallBackObj callback;

    public WaitThread(CallBackObj callback) {
      this.text = callback;
      // assume CORBA stuff initiated here
    }

    public void run() {
      Object expectedObj = null;
      do
      {
         try { expectedObj = ncRef.resolve_str("expectedToBeInNameService"); } 
         catch (NotFound e) {}
         Thread.sleep(2000);
      } while(expectedObj == null;
      callback.notifyMethodExample();
    }
  } 
```

调用者必须实现接口 CallBackObj 并将通过

```
WaitThread wt = new WaitThread(this);
wt.start();

interface CallBackObj {
 void notifyMethodExample();

} 
```

# c++ - Linux - 查找进程是否已准备好或正在运行

> ID：12753387
> 
> 赞同：5
> 
> 时间：2012-10-05T20:11:34.990
> 
> 标签：c++, linux, process, file-descriptor, proc

我正在开发一个具有进程监控功能的 C++ 应用程序，它基于此模型监控状态变化：http: [//www.macdesign.net/capella/it4813/images/stallings-Linux_process-thread_states-f4.18.png](http://www.macdesign.net/capella/it4813/images/stallings-Linux_process-thread_states-f4.18.png)

但是，由于 /proc/pid/status 将“就绪”和“正在执行”状态结合为“正在运行”，我不知道如何找出进程实际处于这些状态中的哪一个。任何人都可以对我如何发现这一点提供任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:11:27.247

问题格式不正确。在单个 CPU 上，实际上**永远**不可能看到处于“运行”状态的进程，因为根据定义，监控进程具有 CPU。如果您确实需要对进程转换进行细粒度的日志记录控制，则需要在内核中进行（或至少在内核支持下进行——请参阅 lttng 或 systemtap 以获取可能在此处提供帮助的工具）。从用户空间跟踪 CPU 使用率的工具更粗粒度，或者使用内核已经跟踪的总使用量（例如`/usr/bin/time`），或者通过间隔对进程表进行采样（引导图以这种方式工作）。

# reporting-services - Reporting Services 编辑器截断查询文本

> ID：12753389
> 
> 赞同：0
> 
> 时间：2012-10-05T20:11:46.357
> 
> 标签：reporting-services, reportingservices-2005

我正在为 Visual Studio 2005 中的 SSRS-2005 设计报告，在编辑大查询时，编辑器停止允许字符输入。

由于编辑器的功能很差，并且不允许使用 CTRL+A 之类的命令，我们倾向于在 SQL Server 管理控制台中编辑查询，然后将它们粘贴到实际报表的数据集查询中。

那是查询被截断的时候。问题是一旦发生，我们根本无法修复查询。将查询粘贴在小块中也不起作用。关闭VS并重新启动，仍然无法工作。

卡住了，不知道如何解决这个问题。

# php - 在php中访问对象数组

> ID：12753391
> 
> 赞同：-2
> 
> 时间：2012-10-05T20:11:51.740
> 
> 标签：php, arrays, zend-framework, object, doctrine

我正在使用带有 ZF2 的 Doctrine (DQL) 来执行以下查询：

```
$qb->select('a.schoolID, a.schoolName')
    ->from('College\Entity\School', 'a');
$schools=$qb->getQuery()->getResult(); 
```

这将返回对象数组或二维数组，如下所示：

```
array (size=2)
  0 => 
    array (size=2)
    'schoolID' => int 1
    'schoolName' => string 'Alabama A & M University' (length=24)
1 => 
   array (size=2)
    'schoolID' => int 2
    'schoolName' => string 'University of Alabama at Birmingham' 
```

我的问题是：如何以及什么是访问这种类型的数组的最佳方法，其中包含未知数量的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T20:15:41.917

你什么意思？这是一个普通的数组。

例如，您可以像这样循环遍历它：

```
foreach ($schools as $school)
{
   // Do something with $school, like:
   echo $school['schoolName'];
} 
```

您可以查询项目的数量，如`count($schools)`.

# asp.net-mvc-3 - 使用带有工厂扩展的 Ninject 3.0.0 将工厂注入到 ASP.NET MVC 3 中的自定义成员提供程序时遇到问题

> ID：12753395
> 
> 赞同：1
> 
> 时间：2012-10-05T20:12:05.647
> 
> 标签：asp.net-mvc-3, dependency-injection, ninject, ninject-extensions

我正在创建一个具有自定义成员资格提供程序的 ASP.NET MVC 3 webapp。我`Ninject.Extensions.Factory 3.0.0`过去尝试将工厂注入到我的自定义会员提供程序的公共财产中，但进展并不顺利。

这是我的自定义会员类和工厂接口：

```
public class MtgMembershipProvider : MembershipProvider
{
    [Inject]
    public IUnitOfWorkFactory UnitOfWorkFactory { get; set; }

    ...
}

public interface IUnitOfWorkFactory
{
    IUnitOfWork GetEFUnitOfWork();
} 
```

这是我的会员初始化模块：

```
public class MtgMembershipInitializationModule : IHttpModule
{
    public MtgMembershipInitializationModule(MembershipProvider membershipProvider)
    {
    }

    public void Dispose()
    {            
    }

    public void Init(HttpApplication context)
    {
    }
} 
```

这是来自 NinjectWebCommon.cs 的 RegisterServices 代码：

```
private static void RegisterServices(IKernel kernel)
{
    kernel.Bind<IUnitOfWork>()
        .To<EFUnitOfWork>()
        .NamedLikeFactoryMethod((IUnitOfWorkFactory f) => f.GetEFUnitOfWork());

    kernel.Bind<MembershipProvider>().ToMethod(ctx => Membership.Provider);
    kernel.Bind<IHttpModule>().To<MtgMembershipInitializationModule>();
} 
```

在 web.config 中，我有以下内容：

```
<system.web>
  <membership defaultProvider="MtgMembershipProvider">
    <providers>
      <clear />
      <add name="MtgMembershipProvider" type="MtgManager.WebUI.Infrastructure.MtgMembershipProvider" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="MtgManager_WebUI" />
    </providers>
  </membership>
</system.web> 
```

当我启动 webapp 时，在模块初始化期间出现异常：

```
Error activating IUnitOfWorkFactory
No matching bindings are available, and the type is not self-bindable.
Activation path:
 3) Injection of dependency IUnitOfWorkFactory into property UnitOfWorkFactory of type MtgMembershipProvider
 2) Injection of dependency MembershipProvider into parameter membershipProvider of constructor of type MtgMembershipInitializationModule
 1) Request for IHttpModule

Suggestions:
 1) Ensure that you have defined a binding for IUnitOfWorkFactory.
 2) If the binding was defined in a module, ensure that the module has been loaded into the kernel.
 3) Ensure you have not accidentally created more than one kernel.
 4) If you are using constructor arguments, ensure that the parameter name matches the constructors parameter name.
 5) If you are using automatic module loading, ensure the search path and filters are correct. 
```

我不确定我做错了什么。[我已经关注了 Remo Gloor 的关于ASP.NET Provider 依赖注入与 Ninject 3.0.0](http://www.planetgeek.ch/2012/02/08/asp-net-provider-injection-with-ninject-3-0-0/)的博客文章，以及[相关的 StackExchange 讨论](https://stackoverflow.com/questions/5596441/inject-repository-to-custom-membership-provider-with-ninject/10394860#10394860)，以及[关于 NamedLikeFactoryMethod](https://stackoverflow.com/questions/11557856/namedlikefactorymethod-in-ninject-extensions-factory-working-in-non-compliance-w)和许多其他帖子的这个问题，但我被卡住了。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T00:05:08.323

你必须绑定你的工厂

```
Bind<IUnitOfWorkFactory>().ToFactory(); 
```

# function - 如何使用 NSString 方法返回字符串？

> ID：12753398
> 
> 赞同：0
> 
> 时间：2012-10-05T20:12:12.383
> 
> 标签：function, methods, nsstring, format

给定这样的函数：

```
 - (NSString *) changemystringsomehow
{
    // do something to the string / check the string
    return ?;
} 
```

我将如何在另一个函数中使用它来取回“已更改”的字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T11:48:32.537

好吧，阅读他们说的*手册。我发现文档有时难以理解，但我试了一下。我找到了答案并学会了如何制作一个类别。

[自定义现有类](http://developer.apple.com/library/ios/ipad/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html)

# c# - CodeFramework 和方法组。执行：登录是什么意思？

> ID：12753399
> 
> 赞同：0
> 
> 时间：2012-10-05T20:12:13.910
> 
> 标签：c#, wpf

我正在关注[这个 CodeFramework 示例](http://www.code-magazine.com/article.aspx?quickid=1201061&page=2)，并在安装 Code Framework 扩展后创建了一个测试项目。

但是，我不太明白这行代码在 LoginViewModel 中的含义。

```
Actions.Add(new ViewAction("Enter", execute: Login)); 
```

我不明白“执行：登录”是什么意思。更具体的是什么执行：是什么意思？你能创建这种类型的命令还是预定义的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:28:32.243

```
 Actions.Add(new ViewAction("Enter", execute: Login)); 
```

该`execute: Login`部分只是一个命名参数。Login 必须是当前范围内的一个值（可能是一个方法），并且 execute 是参数的名称。

# c# - SELECT 实体框架中的异常处理

> ID：12753400
> 
> 赞同：1
> 
> 时间：2012-10-05T20:12:15.067
> 
> 标签：c#, entity-framework

使用 Entity Framework 和 IEnumerables 的优点之一是您不必担心何时实际从数据库中查询数据。您只需传递查询结果，当实际需要时，EF 会为您获取。但是，当涉及到在您的 SELECT 代码周围放置 try/catch 时，它就会成为一个问题，因为要准确确定何时查询数据库并不容易。

我现在遇到间歇性数据库超时，我想记录 EF 在发生这种情况时使用的 SQL，但我遇到了上面刚刚描述的问题。我有什么方便的方法来处理这个吗？还是我看错了问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T20:41:54.563

每当执行您期望的功能代码块时，您应该使用正确的 try/catch 错误处理（就像在这种情况下，每当您针对 EF 数据上下文执行 Lamba 表达式和/或 LINQ 查询时）。真正的问题是你为什么会收到超时。

我想恭敬地指出您上述陈述的一个潜在错误，它可能会为诊断和修复您的超时提供一些帮助。“......您不必担心何时实际从数据库中查询数据。” 我建议在构建名义上复杂的 LINQ 查询的过程中，您实际上确实需要非常清楚数据库何时会受到影响。在通过调用 ToList()、Distinct()、Count() 等将它们具体化之前，您将希望尽可能长时间地将 LINQ 查询保持为 IQueryable。

因此，假设您正在查询一个百万行的表并且您正在通过潜在标准进行解析，您应该等到最后使用 ToList() 实现查询，因为这是 EF 生成的 SQL 语句将在数据库上执行：

```
using(var context = CreateEFContextFactory())
{
   var x = (from d in context.MyBigTable select d);
   if(!string.IsNullOrWhitespace(stringParam1))
      x = (from d in x where x.Field1 == stringParam1 select d);
   if(intParam2 > 0)
      x = (from d in x where x.Field2 == intParam2 select d);

   var listOfMyBigTableObjects = x.Distinct().ToList();  //point of sql execution
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:31:57.227

听起来您在这里尝试做几件事：[查看由 Entity Framework 生成的 SQL](https://stackoverflow.com/questions/4700323/how-to-get-the-sql-generated-by-the-entity-framework)，并添加一个[全局错误处理程序](https://stackoverflow.com/questions/766610/how-to-get-elmah-to-work-with-asp-net-mvc-handleerror-attribute)。

如果您正在编写 .NET Web 应用程序或 api，则可以添加默认错误处理程序，例如[elmah](http://code.google.com/p/elmah/)。如果您使用的是 MVC，则[全局错误处理程序](https://stackoverflow.com/questions/766610/how-to-get-elmah-to-work-with-asp-net-mvc-handleerror-attribute)的答案演示了将 elmah 设置为全局处理程序，但您可以轻松地自定义该示例，以使用您自己的日志记录实用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T20:22:41.383

你有点知道查询什么时候会被执行，例如`.ToList()`, `.FirstOrDefault()`,`.Any()`等等。所以你应该把你的`try catch`块放在它们周围。

# hibernate - Grails 事务问题 IllegalStateException 已经为键 BasicDataSource TransactionSynchronizationManager.bindResource 的值

> ID：12753403
> 
> 赞同：1
> 
> 时间：2012-10-05T20:12:20.930
> 
> 标签：hibernate, grails, grails-orm, spring-transactions

在 grails 2.1.0 中使用服务时出现以下异常。关于调试的想法？

造成的：

```
Caused by: java.lang.IllegalStateException: Already value [org.springframework.jdbc.datasource.ConnectionHolder@138d3450] for key [org.apache.commons.dbcp.BasicDataSource@3eedee39] bound to thread [http-bio-8080-exec-2]
        at org.springframework.transaction.support.TransactionSynchronizationManager.bindResource(TransactionSynchronizationManager.java:189)
        at org.springframework.orm.hibernate3.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:571) 
```

全栈

```
[org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/].[default]] - <Servlet.service() for servlet [default] in context with path [] threw exception>
org.springframework.transaction.CannotCreateTransactionException: Could not open Hibernate Session for transaction; nested exception is java.lang.IllegalStateException: Already value [org.springframework.jdbc.datasource.ConnectionHolder@5e4d415f] for key [org.apache.commons.dbcp.BasicDataSource@3eedee39] bound to thread [http-bio-8080-exec-7]
        at org.springframework.orm.hibernate3.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:596)
        at org.codehaus.groovy.grails.orm.hibernate.GrailsHibernateTransactionManager.super$3$doBegin(GrailsHibernateTransactionManager.groovy)
        at sun.reflect.GeneratedMethodAccessor734.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
        at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
        at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1047)
        at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
        at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodOnSuperN(ScriptBytecodeAdapter.java:128)
        at org.codehaus.groovy.grails.orm.hibernate.GrailsHibernateTransactionManager.doBegin(GrailsHibernateTransactionManager.groovy:32)
        at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
        at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:127)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
        at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSite.invoke(PojoMetaMethodSite.java:189)
        at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:53)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)
        at org.grails.datastore.gorm.GormStaticApi.withTransaction(GormStaticApi.groovy:573)
        at com.igive.userinfo.User.withTransaction(User.groovy)
        at com.igive.userinfo.User$withTransaction.call(Unknown Source)
        at org.codehaus.groovy.grails.plugins.springsecurity.GormUserDetailsService.loadUserByUsername(GormUserDetailsService.groovy:59)
        at org.codehaus.groovy.grails.plugins.springsecurity.GrailsUserDetailsService$loadUserByUsername.callCurrent(Unknown Source)
        at org.codehaus.groovy.grails.plugins.springsecurity.GormUserDetailsService.loadUserByUsername(GormUserDetailsService.groovy:77)
        at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:86)
        at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:129)
        at org.springframework.security.authentication.ProviderManager.doAuthentication(ProviderManager.java:130)
        at org.springframework.security.authentication.AbstractAuthenticationManager.authenticate(AbstractAuthenticationManager.java:48)
        at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:97)
        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:199)
        at org.codehaus.groovy.grails.plugins.springsecurity.RequestHolderAuthenticationFilter.doFilter(RequestHolderAuthenticationFilter.java:40)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
        at org.codehaus.groovy.grails.plugins.springsecurity.MutableLogoutFilter.doFilter(MutableLogoutFilter.java:79)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.codehaus.groovy.grails.web.servlet.mvc.GrailsWebRequestFilter.doFilterInternal(GrailsWebRequestFilter.java:69)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.codehaus.groovy.grails.web.filters.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:65)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:185)
        at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:159)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.IllegalStateException: Already value [org.springframework.jdbc.datasource.ConnectionHolder@5e4d415f] for key [org.apache.commons.dbcp.BasicDataSource@3eedee39] bound to thread [http-bio-8080-exec-7]
        at org.springframework.transaction.support.TransactionSynchronizationManager.bindResource(TransactionSynchronizationManager.java:189)
        at org.springframework.orm.hibernate3.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:571)
        ... 74 more
2012-10-05 14:04:16,522 ERROR http-bio-8080-exec-2 [org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/].[default]] - <Servlet.service() for servlet [default] in context with path [] threw exception>
org.springframework.transaction.CannotCreateTransactionException: Could not open Hibernate Session for transaction; nested exception is java.lang.IllegalStateException: Already value [org.springframework.jdbc.datasource.ConnectionHolder@138d3450] for key [org.apache.commons.dbcp.BasicDataSource@3eedee39] bound to thread [http-bio-8080-exec-2]
        at org.springframework.orm.hibernate3.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:596)
        at org.codehaus.groovy.grails.orm.hibernate.GrailsHibernateTransactionManager.super$3$doBegin(GrailsHibernateTransactionManager.groovy)
        at sun.reflect.GeneratedMethodAccessor734.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
        at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
        at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1047)
        at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
        at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodOnSuperN(ScriptBytecodeAdapter.java:128)
        at org.codehaus.groovy.grails.orm.hibernate.GrailsHibernateTransactionManager.doBegin(GrailsHibernateTransactionManager.groovy:32)
        at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
        at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:127)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1237)
        at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSite.invoke(PojoMetaMethodSite.java:189)
        at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:53)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)
        at org.grails.datastore.gorm.GormStaticApi.withTransaction(GormStaticApi.groovy:573)
        at com.igive.userinfo.User.withTransaction(User.groovy)
        at com.igive.userinfo.User$withTransaction.call(Unknown Source)
        at org.codehaus.groovy.grails.plugins.springsecurity.GormUserDetailsService.loadUserByUsername(GormUserDetailsService.groovy:59)
        at org.codehaus.groovy.grails.plugins.springsecurity.GrailsUserDetailsService$loadUserByUsername.callCurrent(Unknown Source)
        at org.codehaus.groovy.grails.plugins.springsecurity.GormUserDetailsService.loadUserByUsername(GormUserDetailsService.groovy:77)
        at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:86)
        at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:129)
        at org.springframework.security.authentication.ProviderManager.doAuthentication(ProviderManager.java:130)
        at org.springframework.security.authentication.AbstractAuthenticationManager.authenticate(AbstractAuthenticationManager.java:48)
        at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:97)
        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:199)
        at org.codehaus.groovy.grails.plugins.springsecurity.RequestHolderAuthenticationFilter.doFilter(RequestHolderAuthenticationFilter.java:40)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
        at org.codehaus.groovy.grails.plugins.springsecurity.MutableLogoutFilter.doFilter(MutableLogoutFilter.java:79)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.codehaus.groovy.grails.web.servlet.mvc.GrailsWebRequestFilter.doFilterInternal(GrailsWebRequestFilter.java:69)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.codehaus.groovy.grails.web.filters.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:65)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:185)
        at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:159)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.IllegalStateException: Already value [org.springframework.jdbc.datasource.ConnectionHolder@138d3450] for key [org.apache.commons.dbcp.BasicDataSource@3eedee39] bound to thread [http-bio-8080-exec-2]
        at org.springframework.transaction.support.TransactionSynchronizationManager.bindResource(TransactionSynchronizationManager.java:189)
        at org.springframework.orm.hibernate3.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:571)
        ... 74 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T00:21:48.610

这些错误是由与休眠会话混淆的插件引起的。我们将插件更改为使用事件侦听器，而不是直接访问休眠会话。

代码示例：[https ://github.com/iGivefirst/elasticsearch-grails-plugin/blob/newlistener/src/groovy/org/grails/plugins/elasticsearch/ElasticSearchEventListener.groovy](https://github.com/iGivefirst/elasticsearch-grails-plugin/blob/newlistener/src/groovy/org/grails/plugins/elasticsearch/ElasticSearchEventListener.groovy)

# sql - SQL联合？或其他方法

> ID：12753408
> 
> 赞同：1
> 
> 时间：2012-10-05T20:13:04.053
> 
> 标签：sql, talend

我正在使用 SQL Server 2008 和 Talend

我面临的问题是，我在两个不同的数据库中有两个表，它们具有相同的字段，我正在尝试查询它们并满足某些条件。

用户具有查看表和所有表的正确权限。

这两个表我只需要几个字段，所以我创建了视图以使生活更轻松：Db USA 我创建了一个视图

（在视图中）

```
"SELECT IDCUST, NAMECUST,CODETERM,AMTCRLIMT,DATELASTIV,AMTBALDUEH
FROM TABLE!
WHERE COUNTRYCODE = 'USA' OR COUNTRYCODE ="U.S.A" //this is for USA server 
only the other doesn't have the WHERE clause. 
```

现在我想做的是用我的另一个数据库（'MAIN'）查询这个视图。

标准是如果 IDCUST 相同，那么我只想要“美国”数据库中的行。

我试过了：

```
SELECT *  
FROM USA.dbo.VIEWUSA 
UNION 
SELECT *  
FROM MAIN.dbo.VIEWMAIN
WHERE MAIN.dbo.IDCUST <> USA.dbo.VIEWUSA.IDCUST 
```

尽管说 USA.dbo.VIEWUSA.IDCUST 不合适，但它有一个错误。

我尝试将其作为 JOIN，但我的连接根本不起作用（最大行数约为 6k，在我停止之前它以 100k 的速度查询。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T20:23:31.370

我认为 union all 是最好的方法，但是您需要稍作调整：

```
select *
from usa.dbo.ViewUSA
union all
select *
from MAIN.dbo.VIEWMAIN vm
where vm.idcust not in (select idcust from usa.dbo.ViewUSA) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T20:19:02.247

通过使用联合，您将从集中删除重复的行。联合还希望每个选择中的列具有相同的数据类型。如果表中名称相同的列具有相同的数据类型，这应该会产生您想要的输出。

```
SELECT IDCUST
    ,NAMECUST
    ,CODETERM
    ,AMTCRLIMT
    ,DATELASTIV
    ,AMTBALDUEH
FROM USA.dbo.VIEWUSA

UNION

SELECT IDCUST
    ,NAMECUST
    ,CODETERM
    ,AMTCRLIMT
    ,DATELASTIV
    ,AMTBALDUEH
FROM MAIN.dbo.VIEWMAIN 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T20:24:28.937

假设列名的数据类型相同，并且您正在寻找类似联合的语法而不是连接语法......

**VIEWMAIN 中没有 VIEWUSA 条目的所有记录。**

```
SELECT customer_id, customer_name
FROM MAIN.dbo.VIEWMAIN
minus
SELECT customer_id, customer_name  
FROM USA.dbo.VIEWUSA 
```

**VIEWUSA 中所有不在 VIEWMAIN 中的记录**

```
SELECT customer_id, customer_name
FROM MAIN.dbo.VIEWUSA
minus
SELECT customer_id, customer_name  
FROM USA.dbo.VIEWMAIN 
```

**仅在两个表中的记录**

```
SELECT customer_id, customer_name
FROM MAIN.dbo.VIEWUSA
intersect
SELECT customer_id, customer_name  
FROM USA.dbo.VIEWMAIN 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T20:15:51.867

如果我理解正确，这就是你想要的。这将从 IDCUST 相同的两个表中获取所有数据。

编辑：试试这个

```
SELECT * 
FROM USA.dbo.VIEWUSA a 
WHERE a.IDCUST NOT IN (SELECT DISTINCT IDCUST FROM MAIN.dbo.VIEWMAIN) 
```

# jquery - JQuery 工具提示悬停在单选按钮上

> ID：12753415
> 
> 赞同：2
> 
> 时间：2012-10-05T20:13:43.493
> 
> 标签：jquery, html, radio-button, tooltip, tipsy

我想在将鼠标悬停在单选按钮上时显示工具提示。所以我正在尝试使用这个插件：[tipsy](http://onehackoranother.com/projects/jquery/tipsy/)。所以这是我的html：

```
<label><input type="radio" name="options" value="1" class="required" id="option1"> Option1</label> 
```

然后我尝试了这样的事情：

```
$("#option1").tipsy({fallback: "test" }); 
```

但是当我将鼠标悬停在单选按钮上时，什么也没有出现。为什么什么都没有出现，我该如何让它工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T20:18:44.653

添加`title`到您的`input`.

`<input type="radio" name="options" value="1" class="required" id="option1" title="MyText">`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T20:27:56.930

这是一个如何处理悬停的示例。这相当简单...

[http://jsfiddle.net/wrN2u/50/](http://jsfiddle.net/wrN2u/50/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:18:14.137

您是否将文本放在标题属性中？

```
<input type="radio" name="options" value="1" title="Some Text To Display" class="required" id="option1" /> 
```

# ruby - Ruby 和类似类型语言中的数组是向量吗？

> ID：12753419
> 
> 赞同：2
> 
> 时间：2012-10-05T20:14:10.840
> 
> 标签：ruby, arrays, r, math, vector

R 将 csv 的数字列表（逗号分隔值 ie `1, 2, 3`）包装在`c()`函数中，这是 R 核心库的一部分，它将 csv 的数字列表转换为向量。

这些向量看起来像 Ruby 或 Java 数组，除了这些 csv 列表被包装在`c()`而不是`[]`. 看起来数组实际上是向量的一个子集。这是真的吗？如果是这样，这对于数组和矩阵意味着什么？

我发现关于该主题的一次讨论指出数组是静态向量。但在 Ruby 中，数组不是静态的。在 Ruby 中，数组是向量吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:20:18.443

是的，在 R 中，数组只是一个带有属性的向量，这些属性给出了数组的维度。

来自`?array`：

> 细节：
> 
> R 中的数组可以有一个、两个或多个维度。它只是一个向量，存储有附加属性，给出维度（属性“dim”）和可选的这些维度的名称（属性“dimnames”）。
> 
> 二维数组与“矩阵”相同。
> 
> 一维数组通常看起来像向量，但某些函数可能以不同的方式处理：'str' 在最新版本的 R 中确实区分了它们。
> 
> '"dim"' 属性是一个长度为 1 或多个的整数向量，包含非负值：值的乘积必须与数组的长度匹配。

也许自己看这个最简单的方法是看一个向量、一个矩阵和一个更高维的数组，如下所示：

```
a <- array(1:12, dim=c(2,2,3))
m <- matrix(1:4, ncol=2)
v <- c(1,2)

is(a)
# [1] "array"     "matrix"    "structure" "vector"    "vector"  
is(m)
# [1] "matrix"    "array"     "structure" "vector"
is(v)
# [1] "numeric" "vector" 

attributes(a)
# $dim
# [1] 2 2 3
attributes(m)
# $dim
# [1] 2 2
attributes(v)
# NULL

## Finally, try this
v <- 1:12
dim(v) <- c(2,2,3)
v 
```

# java - 从 Java 中插入 MySql 时出现语法错误

> ID：12753420
> 
> 赞同：1
> 
> 时间：2012-10-05T20:14:20.467
> 
> 标签：java, mysql, syntax, insert, timestamp

尝试从 Java 向 Mysql 插入一些值时出现语法错误。

我的代码如下所示：

```
date = new SimpleDateFormat("yyyy-MM-dd").parse(nextLine[0]);
        java.sql.Timestamp sqlDate = new java.sql.Timestamp(date.getTime());
        st.executeUpdate("INSERT INTO " + tick + "(day, open, high, low, close, volume) VALUES (" + sqlDate + ", " + nextLine[1] + ", " + nextLine[2] + ", " + nextLine[3] + ", " + nextLine[4] + ", " + nextLine[5] + ")"); 
```

我的例外：

> com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '00:00:00.0, 128.40, 128.50, 127.30, 128.20, 1415200)' 附近使用正确的语法

很高兴有任何帮助:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T20:19:06.940

虽然可以修复直接的语法错误，但我*强烈*建议不要这样做。您根本不应该将值直接包含在 SQL 中。

相反，通过 使用参数化查询`PreparedStatement`，并将您的值设置为参数。在这种情况下，您将使用[`PreparedStatement.setTimestamp`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#setTimestamp%28int,%20java.sql.Timestamp%29)设置值 - 当然，在首先更改要参数化的查询之后。

参数化 SQL 的好处：

*   [SQL注入攻击](http://bobby-tables.com)的预防
*   避免容易出错的字符串转换（如本例所示）
*   代码和数据分离，SQL更易读

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T20:18:58.483

强烈建议：

1) 在调用 executeUpdate() 之前创建一个 Java 字符串变量

2) 确保您的字符串在语法上是正确的（引用的日期、值之间的逗号等）

还：

“准备”是你的朋友；）

*   [http://www.jdbc-tutorial.com/jdbc-prepared-statements.htm](http://www.jdbc-tutorial.com/jdbc-prepared-statements.htm)

我*想*你可能已经在使用它们了......但你没有显示那部分代码......我当然没有看到任何地标（“？”）

但我认为1）首先制作字符串，2）在你的JDBC调用之前检查字符串（例如在你的调试器中）将是一个巨大的帮助......恕我直言......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:22:01.530

日期需要在 MySQL 中引用，因此您需要`sqlDate`用单引号括起来：

```
st.executeUpdate("INSERT INTO " + tick + "(day, open, high, low, close, volume) VALUES ('" + sqlDate + "', " + nextLine[1] + ", " + nextLine[2] + ", " + nextLine[3] + ", " + nextLine[4] + ", " + nextLine[5] + ")"); 
```

我假设其他值是数字，因此没有引号是安全的。

这种方法的最大问题是您容易受到[SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)。您应该改用准备好的语句：

```
PreparedStatement ps = conn.prepareStatement("INSERT INTO my_table(day, open, high, low, close, volume) VALUES (?,?,?,?,?,?)");
ps.setTimestamp(1, sqlDate);
ps.setBigDecimal(2, nextLine[1]);
... 
```

# html - 在iframe中将类从父级添加到href

> ID：12753421
> 
> 赞同：0
> 
> 时间：2012-10-05T20:14:25.453
> 
> 标签：html, iframe, href, audio-player, stratus

我已经搜索和搜索无济于事，所以如果这已经在其他地方发布但我找不到它，我深表歉意。或者我可能已经找到它，但对使用它来解决我的问题的解决方案还不够了解。

我在我的网站上使用[http://stratus.sc/](http://stratus.sc/)音乐播放器。它允许人们点击网站正文中的曲目链接，并让它们在底部的播放器上播放。看起来像这样：

父 Javascript

```
<script type="text/javascript" src="http://stratus.sc/stratus.js"></script>

<script type="text/javascript">
$(document).ready(function(){
$.stratus({
  links: 'http://soundcloud.com/someartist'
});
});
</script> 
```

iframe HTML：

```
<a href="http://soundcloud.com/track"  class="stratus">Track Name</a> 
```

我的问题出现了，因为我网站上的所有内容都显示在 iframe 中，因此播放器将在用户导航时继续播放。我需要 iframe 中的 href 在父窗口中查找类“stratus”，但找不到正确的语法来执行此操作。看起来它应该有一个相当简单的解决方案，但我在 HTML 方面还是个新手，在 Javascript 和 jquery 方面更是如此。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T02:44:58.807

$(".stratus") 将选择所有类*stratus的元素*

# grails - 如何在不使用 jar 文件的情况下引用/链接 grails 工作区中的另一个项目？

> ID：12753423
> 
> 赞同：0
> 
> 时间：2012-10-05T20:14:44.443
> 
> 标签：grails, sts-springsourcetoolsuite

我有一个引用 java 核心应用程序的 Grails 网站。我已经成功地为该项目添加了 .jar 依赖项；但是 java 项目与我的 grails 项目在同一个工作区中，我最终想直接引用该项目。我不想处理每次对 java 项目进行修改、清理和更新我的依赖项时创建新 jar 文件的附加步骤。我将 java 项目添加到我的 grails 项目“Java Build Path”中，起初一切似乎都工作正常，但是当我运行 grails>compile 时，编译器无法解析指向 java 项目的所有导入。

我使用 Spring Source Toolssuite 作为我的 IDE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:01:36.487

您是否尝试将项目添加到“部署程序集”路径（与属性菜单中的“Java 构建路径”级别相同）？

# c# - 制作此异步方法的通用版本

> ID：12753427
> 
> 赞同：2
> 
> 时间：2012-10-05T20:15:09.580
> 
> 标签：c#, wcf, asynchronous, silverlight-4.0, prism

我有一个使用连接到 WCF 服务的 MEF/Prism 的 Silverlight 客户端。我正在编写一个“服务代理”以在整个应用程序中用作共享服务。这个“服务代理”是一个单例，它为客户端提供调用 WCF 服务的唯一方式。我已经实现了我的服务契约，所有的方法看起来都非常相似，除了它们调用的特定 Begin/End 操作和它们接受的参数。

例如：

```
public void WakeUpInstanceAsync(Foo opportunity, bool isHistorical, Action<WakeupObj> callback)
{
    if (IsOpen())
    {
        AsyncCallback asyncCallback = (e) =>
        {
            _currentDispatcher.BeginInvoke(() =>
            {
                try
                {
                    callback(_funnelClient.EndWakeUpInstance(e));
                }
                catch (CommunicationException ex1)
                {
                    // Notify someone via eventaggregator?
                    callback(null);
                }
            });
        };

        _funnelClient.BeginWakeUpInstance(opportunity, isHistorical, asyncCallback, null);
    }
} 
```

有什么方法可以创建一个带有 2 个参数的通用方法（“开始”方法和“结束”方法）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T20:42:07.170

像这样的东西会是你正在寻找的东西吗？

```
 public void WakeUpInstanceAsync(Foo opportunity, bool isHistorical, Action<WakeupObj> callback)
    {
        this.ImplementAsyncMethod(
            asyncCallback => _funnelClient.BeginWakeUpInstance(opportunity, isHistorical, asyncCallback, null),
            asyncResult => _funnelClient.EndWakeUpInstance(asyncResult),
            callback);
    }

    public void ImplementAsyncMethod<T>(Action<AsyncCallback> begin, Func<IAsyncResult, T> end, Action<T> callback)
    {
        if (IsOpen())
        {
            AsyncCallback asyncCallback = (e) =>
            {
                _currentDispatcher.BeginInvoke(() =>
                {
                    try
                    {
                        callback(end(e));
                    }
                    catch (CommunicationException ex1)
                    {
                        // Notify someone via eventaggregator?
                        callback(default(T));
                    }
                });
            };

            begin(asyncCallback);
        }
    } 
```

（免责声明 - 我没有编译它）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T20:21:47.380

您可以使用[TaskFactory.FromAsync](http://msdn.microsoft.com/en-us/library/dd321543%28v=vs.95%29.aspx)将几乎任何`Begin`/`End`异步方法对包装到`Task<T>`. 这为使用异步编程提供了一个更简洁的模型，因为您可以在 UI 线程上使用延续来进行“回调”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:20:09.190

似乎您需要一个 WakeUpInstanceResult 类来保存多个参数。

# ruby-on-rails - heroku上的rails 2

> ID：12753430
> 
> 赞同：1
> 
> 时间：2012-10-05T20:15:25.257
> 
> 标签：ruby-on-rails, heroku, stack, cedar

我已经使用 Webrick 在 Rails 2.2.2 中的本地 MAC MINI 机器上创建了一个应用程序，它可以工作

现在我想在 Heroku 上上传应用程序

**$ heroku create myapponline --stack cedar**

好的，在我检查我是否存在 heroku 上的应用程序之后

**$ git远程-v**

```
> heroku    git@heroku.com:myapponline.git (fetch)
> heroku    git@heroku.com:myapponline.git (push) 
```

伟大的！

但是当我想上传应用程序时

**$ git push heroku 大师**

```
> Counting objects: 124, done. Delta compression using up to 4 threads.
> Compressing objects: 100% (110/110), done. Writing objects: 100%
> (124/124), 75.90 KiB, done. Total 124 (delta 21), reused 0 (delta 0)
> 
> -----> Heroku receiving push  !     Heroku push rejected, no Cedar-supported app detected
> 
> To git@heroku.com:myapponline.git  ! [remote rejected] master ->
> master (pre-receive hook declined) error: failed to push some refs to
> 'git@heroku.com:myapponline.git' 
```

注意当我输入**$ git status**时，所有文件都在**主分支中**

先感谢您，

一个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T20:31:45.970

Rails 2.2 是 pre-Rack 和 pre-Bundler，所以普通的 Rails buildpack 对你没有帮助。这是可能的，但老实说，你真的需要升级。运行旧的 Rails 版本（包括 2.2.2 而不是 2.2.3）存在安全隐患，更不用说将自己绑定到一个古老的框架意味着很难利用过去**三年**的工作Ruby 生态系统。

如果，毕竟，由于某种原因你仍然必须这样做，那很好。您需要在 Heroku 指定的端口上创建自己的[Procfile](https://devcenter.heroku.com/articles/procfile)来启动您选择的 Web 服务器（Webrick？糟糕！）。您还需要某种方法将所有 gem 放入 slug，方法是[制作自定义 buildpack](https://devcenter.heroku.com/articles/buildpack-api)或将 Bundler 破解到 Ruby 2.2 中。

是的，所有这些都需要比升级到合理版本的 Rails 更多的 Ruby 知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:23:49.177

检查这个：

[heroku-push-rejected-no-cedar-supported-app-detected](https://stackoverflow.com/questions/8361475/heroku-push-rejected-no-cedar-supported-app-detected)

描述一个类似的问题..

# android - 如果 TextView 有太多数据，视图会消失

> ID：12753431
> 
> 赞同：0
> 
> 时间：2012-10-05T20:15:29.030
> 
> 标签：android, android-layout

我正在使用以下 XML 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <!--Multi Line TextView -->
    <TextView
        android:id="@+id/incomingmsg"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:autoLink="web"
        android:inputType="textMultiLine"
        android:minLines="5"
        android:scrollbars="vertical"
        android:singleLine="false"
        android:textIsSelectable="true" >
    </TextView>
    <!--Some more Views Here -->
</LinearLayout> 
```

如果`TextView`数据太多，则`View`屏幕上不会出现下面的 s。我希望根据文本的大小将`View`s 直接显示在下方。`TextView`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:23:21.310

使用相对布局：

```
 // scrollview is to scroll the layout even the Textview takes the full height of the device so that the view is visible under TextView. 
   //If your Textview doesn't take too much height, you don't need to use scrollview.
   <Scrollview>
   <RelativeLayout>
        <TextView>
        <View
           android:layout_width="match_parent"
           android:layout_height="4dip"
           android:layout_below="@id/textview"
           android:background="#7c7c7c" />
   </RelativeLayout>
  <Scrollview> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T20:26:13.007

根据您的 XML，您的视图设置为高于 TextView（多行视图），而不是低于 TextView？

此外，您还可以添加或设置 max_height 和 max_lines 属性。这可能会有所帮助。

# eclipse - 将 JProfiler 附加到运行的 Eclipse

> ID：12753432
> 
> 赞同：0
> 
> 时间：2012-10-05T20:15:32.350
> 
> 标签：eclipse, eclipse-3.6, jprofiler

当我尝试将 JProfiler 附加到正在运行的 Eclipse Helios 3.6 时，我想，我得到了

> ...线程“main”中的异常 java.lang.NoSuchMethodError: main

为什么会发生这种情况，我该如何阻止它发生？

我可以很好地附加到 Juno Eclipse 实例。

# c# - 将 BitmapImage 对象作为文件保存在 Windows 8 的本地存储中？

> ID：12753437
> 
> 赞同：2
> 
> 时间：2012-10-05T20:15:41.960
> 
> 标签：c#, windows-8, microsoft-metro, .net-4.5, bitmapimage

我有一个 BitmapImage 对象，它已经设置了它的源等。我只是想将它保存到我的应用程序本地存储文件夹中，以便我可以在程序的其他位置引用它。我只是不知道如何从对象到文件获取它！我已经找到了 WP7 类似问题的解决方案，但它只是不一样。

我已经从 Base64 字符串创建我的图像（它可以将图像加载到 UI 图像查看器并查看它）并调用它`img`，我知道我需要得到它`ApplicationData.Current.LocalFolder`，但我不知道如何转换它。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:49:06.587

是来自相机用户界面吗？

```
var _Photo = await new CameraCaptureUI()
    .CaptureFileAsync(CameraCaptureUIMode.PhotoOrVideo);
await _Photo.MoveAsync(ApplicationData.Current.LocalFolder); 
```

是从打开文件开始的吗？那么你只需要：

```
await _Photo.MoveAsync(ApplicationData.Current.LocalFolder); 
```

但是，如果您只是有一个 BitmapImage，则无法从中获取图像。相反，您需要返回到原始源或文件。这是唯一的方法。[参考](http://social.msdn.microsoft.com/Forums/en/winappswithcsharp/thread/591bb2dc-46d7-46b8-b06f-3ea89cfe7476)

# ubuntu - 在 Ubuntu 上安装 OpenManage - 登录失败

> ID：12753439
> 
> 赞同：0
> 
> 时间：2012-10-05T20:15:53.387
> 
> 标签：ubuntu, login, installation

服务器：戴尔 R510
RAID 控制器：PERC 6/i
操作系统：Ubuntu 12.04

问题：
我需要向 RAID 5 阵列添加 3 个额外的驱动器。如果我理解正确，这不能通过 PERC 6/i 控制器的 BIOS 完成，而是必须通过 Dell OpenManage 完成。

我已按照[http://linux.dell.com/repo/community/deb/latest/](http://linux.dell.com/repo/community/deb/latest/)上的说明在服务器上安装 OpenManage。但是，每当我尝试从 Web 浏览器登录时，它都会显示“登录失败”。我已按照说明编辑了 /opt/dell/srvadmin/etc/omarolemap，并尝试使用多个用户（包括 root）登录。没有任何效果。

问题：
有没有人遇到过这个问题，或者有人知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T02:40:13.243

检查 /etc/pam.d/ 中的 omauth 文件并将其移动到其他位置或删除该文件。我在 Ubuntu 12.04 上并升级到 OpenManager 7.1 但无法登录，直到我在 pam.d 中删除了该文件。

# mongodb - mapReduce/Aggregation：按嵌套文档中的值分组

> ID：12753440
> 
> 赞同：0
> 
> 时间：2012-10-05T20:15:54.520
> 
> 标签：mongodb, mapreduce, mongoose, aggregation-framework

想象我有一个这样的集合：

```
{
  "_id": "10280",
  "city": "NEW YORK",
  "state": "NY",
  "departments": [
             {"departmentType":"01",
              "departmentHead":"Peter"},
             {"departmentType":"02",
              "departmentHead":"John"}
  ]
},
{
  "_id": "10281",
  "city": "LOS ANGELES",
  "state": "CA",
  "departments": [
             {"departmentType":"02",
              "departmentHead":"Joan"},
             {"departmentType":"03",
              "departmentHead":"Mary"}
  ]
},
{
  "_id": "10284",
  "city": "MIAMI",
  "state": "FL",
  "department": [
  "departments": [
             {"departmentType":"01",
              "departmentHead":"George"},
             {"departmentType":"02",
              "departmentHead":"Harry"}
  ]
} 
```

我想获得每个部门类型的计数，例如：

```
[{"departmentType":"01", "dCount":2},
 {"departmentType":"02", "dCount":3},
 {"departmentType":"03", "dCount":1}
] 
```

为此，我已经尝试了几乎所有方法，但是我在网上找到的所有示例都比较简单，其中 group by 是在文档根级别的字段上完成的。相反，我在这里尝试按部门类型进行分组，这似乎破坏了我迄今为止发现的所有内容。

关于如何使用 Mongoose 的聚合实现或 mapreduce 来做到这一点的任何想法？

理想情况下，我想排除所有 count <= 1 的部门类型，并按部门类型对结果进行排序。

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:22:03.717

您需要 $unwind 部门数组，该数组将为数组中的每个条目创建一个文档，以便您可以在管道中聚合它们。

不幸的是，您不能预先过滤 departmentTypes <= 1，因为 $size 只会采用精确值，但您可以将其从结果中过滤掉。这不是很好，但它有效。此示例仅预过滤具有 EXACTLY 2 个部门的记录，但仅用于演示，您可能希望删除第一个 $match，因为我们稍后会过滤掉 <=1 和第二个 $match 的结果；

```
db.runCommand({
    aggregate: "so",
    pipeline: [
        {   // filter out only records with 2 departments
            $match: {
                departments: { $size: 2 }
            }
        },
        // unwind - create a doc for each department in the array
        { $unwind: "$departments" },
        {   // aggregate sum of departments by type
            $group: {
                _id: "$departments.departmentType",
                count: { $sum: 1 },
            }
        },
        {   // filter out departments with <=1
            $match: {
                count: { $gt: 1 },
            }
        },
        {   // rename fields as per example
            $project: {
                _id: 0,
                departmentType: "$_id",
                dCount: "$count",
            }
        }
    ]
}); 
```

请注意，我还假设您之前的 json 示例有错字，并且“部门”实际上并不存在。假设所有文档都具有与前两个相同的架构，则此代码将起作用。

如果您不关心获得的实际字段名称，请随意删除第一个 $match 和最后一个 $project。

# php - ASP.net 调用 javascript 然后返回一个值给后面的代码

> ID：12753449
> 
> 赞同：1
> 
> 时间：2012-10-05T20:16:54.543
> 
> 标签：php, jquery, asp.net, postback

嘿，我正在从 PHP 设计的网站设计 ASP.net 中的网站。他们通过 JavaScript 进行表单检查，如果通过验证，则通过 Ajax 提交所有数据。

是否可以通过后面的代码从提交按钮触发一段 JavaScript，并在我处理回发以保存数据**之前读取返回的值，或者在用户更正 JavaScript 指示的字段之前什么都不做？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:26:43.323

在 .NET 中，按钮控件有一个 onClientClick，您可以在其中输入任何 js 函数或代码。注意，添加return false；在上述代码之后，否则.net 将触发完整的回发。

这可能很老套，但您也可以考虑为此使用更新面板；只是一个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T20:28:19.720

是的。您可以通过多种方式做到这一点。我更喜欢处理程序，因为它们超轻量级。虽然，拉取他们的 Javascript 并使用 .NET 的验证器可能会减少您的工作量。这是一个示例处理程序，但以防万一：

```
public class CheckData : IHttpHandler
{
    public bool IsReusable
    {
        get { return false; }
    }
    public void ProcessRequest(HttpContext context)
    {
        string sInputData = context.Request["input_post_var"];
        context.Response.ContentType = "text/plain";
        if (!String.IsNullOrEmpty(sInputData))
            context.Response.Write("1");
        else
            context.Response.Write("0");
    }
} 
```

您可以通过右键单击解决方案中的文件夹，添加新项目...，找到通用处理程序来创建其中之一。

您也可以使用 AJAX.NET，但实际上整个框架非常臃肿，如果可以的话，我会避免使用它。不过，这只是偏好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T20:31:36.507

如果您在 javascript 中进行验证，我会制作一个隐藏的提交按钮，如果验证通过，则该按钮会被 javascript 按钮单击：

```
<input type="button" value="validate" onclick="Validate()" />

<asp:Button ID="aspButton" class="aspButton" OnClick="CodeBehindMethod" style="display: none;" />

<script>
function Validate() {
    //if validation passes
    $(".aspButton").click(); //This is the reason for the class on this button, since                       
                             //asp buttons have huge long stupid id names
    //else do some kind of error notification
}

</script> 
```

如果您在后面的代码中进行验证，那么为什么不使用提交按钮的回发呢？

# python - Sqlalchemy mixins / 和事件监听器

> ID：12753450
> 
> 赞同：13
> 
> 时间：2012-10-05T20:17:00.970
> 
> 标签：python, events, model, sqlalchemy

我一次尝试 2 件新事物，因此感谢您在简化和澄清方面的帮助。

```
from sqlalchemy.ext.declarative import declared_attr
from sqlalchemy import Column, Float, event

class TimeStampMixin(object):

    @declared_attr
    def __tablename__(cls):
        return cls.__name__.lower()

    created = Column(Float)
    modified = Column(Float)
    def __init__(self, created = None,
                       modified = None):
        self.created = created
        self.modified = modified

def create_time(mapper, connection, target):
    target.created = time()

#def modified_time(mapper, connection, target):
#    target.modified = time()

event.listen(TimeStampMixin, 'before_insert', create_time)
#event.listen(TimeStampMixin, 'before_update', modified_time) 
```

所以我想创建一个可以在任何类中应用的mixin：

```
class MyClass(TimeStampMixin, Base):
    etc, etc, etc 
```

此类继承了在创建时创建时间戳并在更新时创建/修改时间戳的功能。

导入时出现此错误：

```
raise exc.UnmappedClassError(class_)
sqlalchemy.orm.exc.UnmappedClassError: Class 'db.database.TimeStampMixin' is not mapped 
```

aaaand 我在这一点上被难住了。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-29T01:52:39.647

将您的侦听器附加到类方法中，它将事件附加到子类。

```
class TimeStampMixin(object):
    @staticmethod
    def create_time(mapper, connection, target):
        target.created = time()

    @classmethod
    def __declare_last__(cls):
        # get called after mappings are completed
        # http://docs.sqlalchemy.org/en/rel_0_7/orm/extensions/declarative.html#declare-last
        event.listen(cls, 'before_insert', cls.create_time) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-05T21:09:24.707

这是我要监听`before_insert`事件的方法：添加一个`classmethod`到你`TimeStampMixin`的注册当前类并处理设置创建时间的。

例如

```
class TimeStampMixin(object):

    # other class methods

    @staticmethod
    def create_time(mapper, connection, target):
        target.created = time()

    @classmethod
    def register(cls):
        sqlalchemy.event.listen(cls, 'before_insert', cls.create_time) 
```

这样，您可以：

1.  轻松扩展和更改您收听的内容和注册的内容。
2.  覆盖某些类的 create_time 方法
3.  明确哪些方法需要设置其时间戳。

您可以简单地使用它：

```
class MyMappedClass(TimeStampMixin, Base):
    pass

MyMappedClass.register() 
```

简单，非常清晰，没有魔法，但仍然可以像你想要的那样封装。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-22T19:40:30.697

现代 SqlAlchemy 中最好的方法是将`@listens_for`装饰器与`propagate=True`.

```
from datetime import datetime
from sqlalchemy import Column, Float
from sqlalchemy.ext.declarative import declared_attr
from sqlalchemy.event import listens_for

class TimestampMixin():
    @declared_attr
    def created(cls):
        return Column(DateTime(timezone=True))

@listens_for(TimeStampMixin, "init", propagate=True)
def timestamp_init(target, args, kwargs):
    kwargs["created"] = datetime.utcnow() 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-06T17:04:59.723

你也可以这样做：

```
from sqlalchemy.orm.interfaces import MapperExtension

class BaseExtension(MapperExtension):
    """Base entension class for all entities """

    def before_insert(self, mapper, connection, instance):
        """ set the created_at  """
        instance.created = datetime.datetime.now()

    def before_update(self, mapper, connection, instance):
        """ set the updated_at  """
        instance.modified = datetime.datetime.now()

class TimeStampMixin(object):
    id = Column(Integer, primary_key=True, autoincrement=True)
    created = Column(DateTime())
    modified = Column(DateTime())

    __table_args__ = {
        'mysql_engine': 'InnoDB',
        'mysql_charset': 'utf8'
    }
    __mapper_args__ = { 'extension': BaseExtension() } 
```

并定义你的类，如：

```
class User(TimeStampMixin, Base): 
```

# c++ - 在解析的情况下，可以在 C 中使用什么而不是 istringstream（在 C++ 的情况下）？

> ID：12753470
> 
> 赞同：1
> 
> 时间：2012-10-05T20:18:48.290
> 
> 标签：c++, c

例如：

```
istringstream ss("hello hi here haha");
string p;
while (iss >> p)
{
    if (p == "hello")
        statement1;
    else if (p == hi)
        statement2;
} 
```

这里使用了解析，那么 b 在 c 中可以使用什么来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:30:38.710

这是一个示例代码，将您的代码段转换为 C：

```
#include <stdio.h>
#include <string.h>

int main ()
{
  char s[] ="hello hi here haha";
  char *tok;
  char *last;
  tok = strtok_r(s, " ", &last);
  while (tok != NULL) {
    if(!strcmp(tok, "hello"))
      statement1;
    else if(!strcmp(tok, "hi"))
      statement2;
    tok = strtok_r(NULL, " ", &last);
  }
  return 0;
} 
```

**更新**我按照 Adam Rosenfield 在评论中的建议更改了`strtok`对的调用。`strtok_r`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:36:37.117

如果您正在做一些不平凡的事情，请考虑使用[flexand bison](http://dinosaur.compilertools.net/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:28:43.403

像这样的东西？

```
char* ss = "hello hi here hahah";

int i=0;
while (ss[i] != '\0')
{
  while (ss[i] != ' ' && ss[i] != '\0')
    ++i;

  char* p[40];
  memcpy(p,ss,i);

  if (p == "hello")
    statement1;
  else if (p = "hi")
    statement2;
} 
```

# c# - 使用实体框架进行数据验证

> ID：12753476
> 
> 赞同：1
> 
> 时间：2012-10-05T20:19:13.713
> 
> 标签：c#, asp.net, asp.net-mvc-3, entity-framework, ado.net

我正在使用带有 asp.net mvc3 的 ADO.Net 实体框架。我有一个首先是数据库的模型。正如我将解释的那样，数据验证在某些情况下不起作用。

我有一个表格，当我提交该表格时，有些项目正在被验证，而另一些则没有。我只是使用这样的表格，

```
 @using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

   <fieldset>
        <legend></legend>

         <div class="editor-label">
            @Html.LabelFor(model => model.VERSION_ID)
            @Html.EditorFor(model => model.VERSION_ID)
            @Html.ValidationMessageFor(model => model.VERSION_ID)
        </div>

        <div class="editor-field">
            @Html.LabelFor(model => model.ENTITY2.Name)
            @Html.EditorFor(model => model.ENTITY2.Name)
            @Html.ValidationMessageFor(model => model.ENTITY2.Name)
        </div>
    <p>
        <input type="submit" value="Create" />
    </p> 
```

现在，version_id 有验证工作，而 Name 没有。我从另一个实体那里得到这个名字。关于验证为什么不起作用的任何想法？我可以输入不应被允许的空字段，因为该字段是必需的，但是当我按下提交时，我得到一个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:27:12.507

我认为您的 Model 类允许空值。

我会避免直接在 Views 中使用 Model 类，并为此创建一个单独的 ViewModel（一个 POCO 类）。**ViewModel 应该只有视图需要的相关属性。**大多数时候不是域模型的所有属性！您可以在 ViewModel 上使用数据注释（必需属性等...）

```
public class VersionViewModel
{
  [Required]
  public string VersionID { set;get;}

  [Required]
  public string Name { set;get;}
} 
```

您的视图将被强类型化为此 ViewModel。当发布回操作方法时，您将从 ViewModel 中映射您的域模型的值并保存它。

```
[HttpPost]
public ActionResult Edit(VersionViewModel model)
{
  if(ModelState.IsValid)
  {
     //validation is ok. Let's save
    var domainModel=new Version();
    domainModel.VERSION_ID=model.VersionID ;
    domainModel.Name=model.Name;

    //Let's save and REdirect 
    yourRepositary.SaveVersion(domainModel);
    return RedirectToAction("Saved",new { id=model.ID});     
  }
  return View(model);
} 
```

您可以考虑使用[AutoMapper](https://github.com/AutoMapper/AutoMapper)等库，而不是手动映射。

# html - 带有图像和文本的圆角 Div

> ID：12753482
> 
> 赞同：0
> 
> 时间：2012-10-05T20:19:26.917
> 
> 标签：html, css

我正在尝试创建一个包含 div 和文本的圆角的 div。我在尝试显示我的圆角时遇到问题，因为它似乎`overflow:hidden;`不起作用。

我正在阅读这篇[文章](https://stackoverflow.com/a/6528918)，解释了图像和父 div 都需要`position:static;`，但是一旦我这样做了 .text 就不会出现在图像上方。

**HTML：**

```
<div class="span8 cell">
    <img src="http://www.placehold.it/400x200">    
    <div class="text">text</div>
</div> 
```

**CSS：**

```
.cell {
    width: 400px;
    height: 100%;
    overflow: hidden;
    border-top-left-radius:5px 5px;
    border-top-right-radius:5px 5px;
    border-bottom-left-radius:5px 5px;
    border-bottom-right-radius:5px 5px;
    -moz-box-shadow: 0 1px 3px #000;
    -webkit-box-shadow: 0 1px 3px #000;
    box-shadow: 0 1px 3px #000;
    background: #e5e5e5;
    position: relative;
    margin: 30px;
}

.cell img { position: static; }

.cell .text{
    height: 100%;
    color: #fff;
    font-weight: bold;
    position: absolute;
    top: 0;
    box-sizing:border-box;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    padding: 20px;
    text-align: left;
}? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:26:27.593

在 Chrome 中，位于圆角顶部的任何元素也需要圆角。在此示例中，您将希望像这样对图像的角进行圆角处理：

```
.cell img {
    border-top-left-radius:5px 5px;
    border-top-right-radius:5px 5px;
    position: static;
} 
```

# jquery - jQuery，在具体到位时更改 css 属性

> ID：12753484
> 
> 赞同：-1
> 
> 时间：2012-10-05T20:19:36.130
> 
> 标签：jquery

我的 jQuery 代码在点击时将 div 的高度从 200px 更改为 100%。这很完美。但我需要当我再次单击它时，相同的元素，div 变回 200px。我不知道如何执行此操作，除非使用 if 语句，但我不确定如何查看 css 属性是否与某个 css 属性匹配。

这是我的代码。

```
<script>
$(document).ready(function() {

        $("#port1").click(function() {
            $(".ppc").css("height","100%");
        });

    });

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T20:21:15.840

定义一个高度为 100% 的 CSS 类，点击，然后切换类

CSS

```
.classname {
    height: 100%
} 
```

JS

```
 $("#port1").click(function() {
        $(".ppc").toggleClass('classname');
    }); 
```

使用 css 类添加样式总是一个好主意，因此如果您需要添加一大堆样式，则可以轻松添加/删除和更少的 js 代码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T20:23:14.840

您可以添加一个变量 var isPort1Max = false;

然后就可以在onclick函数中设置了。

```
var isPort1Max = false;

function() {
    if (isPort1Max){
        $(".ppc").css("height","100%");
        isPort1Max=true;
    else {
        $(".ppc").css("height","200px");
        isPort1Max=false;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T20:23:31.713

```
$('#port1').toggle(function () {
    $(".ppc").css({height: "100%"});
}, function () {
    $(".ppc").css({height: "200px"});
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-05T20:29:37.910

为两者定义一个类并使用 toggleClass，或使用以下内容：

```
$("#port1").click(function() {
    $(".ppc").css("height", function(i, val) {
        return val == '200px' ? '100%' : '200px';
    });
}); 
```

[**演示**](http://jsfiddle.net/t24CN/)

# debugging - 如何在 magento 1.7 中打开开发者模式？

> ID：12753490
> 
> 赞同：4
> 
> 时间：2012-10-05T20:19:49.983
> 
> 标签：debugging, magento

我完成了[本](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-5-magento-models-and-orm-basics)教程，我的问题在于我没有得到任何函数。在“全局配置和创建模型”部分包含错误（分配给变量时`Mage::getModel('weblog/blogpost')`，而*模型尚不存在*）。

在某些时候，我在 /index.php 中发现了一个 if 语句，其中调用了以下方法： `Mage::setIsDeveloperMode(true);`为了测试它，我将它放在 if 语句之外（我知道这不是好的做法）。

结果是我收到了这个警告信息：

```
Warning: simplexml_load_string() [function.simplexml-load-string]: Entity: line 1: parser error : XML declaration allowed only at the start of the document  in /home/dowebro/public_html/magento/lib/Varien/Simplexml/Config.php on line 510

#0 [internal function]: mageCoreErrorHandler(2, 'simplexml_load_...', '/home/dowebro/p...', 510, Array)
#1 /home/dowebro/public_html/magento/lib/Varien/Simplexml/Config.php(510): simplexml_load_string('    loadString('    loadFile('/home/dowebro/p...')
#4 /home/dowebro/public_html/magento/app/code/core/Mage/Core/Model/Config.php(318): Mage_Core_Model_Config->loadModulesConfiguration(Array, Object(Mage_Core_Model_Config))
#5 /home/dowebro/public_html/magento/app/code/core/Mage/Core/Model/App.php(414): Mage_Core_Model_Config->loadModules()
#6 /home/dowebro/public_html/magento/app/code/core/Mage/Core/Model/App.php(343): Mage_Core_Model_App->_initModules()
#7 /home/dowebro/public_html/magento/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#8 /home/dowebro/public_html/magento/index.php(91): Mage::run('', 'store')
#9 {main} 
```

但仍然没有我期望的错误。

那么，我怎样才能摆脱这个警告信息，但更重要的是，我怎样才能在开发模式下看到错误呢？

谢谢！

编辑：当我继续学习本教程时，我发现我没有从核心课程中得到任何反馈。例如：在尝试从资源定义不完整的模型中获取数据时，我应该得到“无法检索实体配置：weblog/blogpost”。好吧，我没有。:|

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T21:48:01.553

开发者模式是`use strict`PHP 和 Magento 的一种。它迫使你修复**一切**。如果看起来该`simplexml_load_string`函数不喜欢系统中的 XML 配置文件之一。您可以通过转到第 510 行找到哪一个

```
/home/dowebro/public_html/magento/lib/Varien/Simplexml/Config.php 
```

和 var 转储传递给`loadFile`.

根据错误信息

```
XML declaration allowed only at the start of the document 
```

我的猜测是您的`config.xml`XML 序言前面有一些空格

```
[    ]<?xml version=... 
```

或者您不小心`<?`在 XML 文件中添加了某个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T18:02:00.857

我有这个问题，我可以解决调试文件 app\code\core\Mage\Core\Model\Config.php

在这个类中搜索方法 loadModulesConfiguration 并且我确定你有以下代码：

```
foreach ($fileName as $configFile) {
    $configFile = $this->getModuleDir('etc', $modName).DS.$configFile;
    if ($mergeModel->loadFile($configFile)) {
         $mergeToObject->extend($mergeModel, true);
    }
} 
```

这添加了一个块尝试捕获，如下所示：

```
foreach ($fileName as $configFile) {
    try {
        $configFile = $this->getModuleDir('etc', $modName).DS.$configFile;
        if ($mergeModel->loadFile($configFile)) {
            $mergeToObject->extend($mergeModel, true);
        }
    } catch(Exception $e) {
        Mage::log($configFile);
    }
 } 
```

然后检查日志，您将获得问题所在文件的名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-31T09:54:28.273

我不知道为什么我的帖子被删除了。模组我什至不能给你回消息。

我遵循与@Michael 相同的教程并遇到了同样的问题。

解决方案是应用程序 index.php 的根目录并从以下语句的前面删除哈希

```
#ini_set('display_errors', 1) 
```

至

```
ini_set('display_errors', 1) 
```

# sql-server - 无法将值 NULL 插入列'；列不允许空值。插入失败。(T-SQL)

> ID：12753497
> 
> 赞同：0
> 
> 时间：2012-10-05T20:20:16.600
> 
> 标签：sql-server

我有以下代码：

```
set identity_insert CapModel.LedgerAmountByECMAccountByRptLOB ON

INSERT INTO [AnalyticsV2P7].[CapModel].[LedgerAmountByECMAccountByRptLOB] (AccountintDate,Ledger,Period,RptLOB,ECMAccount,Amount,AmountId)
SELECT * FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0','Excel 12.0;Database=E:\Database\Data\AnalyticsV2P7\LedgerAmountByECMAccountByRptLOB.xlsx', 'SELECT * FROM [Sheet1$]');

set identity_insert CapModel.LedgerAmountByECMAccountByRptLOB Off 
```

where`AmountID`是一个标识列，其中不允许 NULL 值。在我的 Excel 文件中，该列是空白的（除了标题）

我收到以下错误消息：

> *无法将值 NULL 插入列“AmountId”、表“AnalyticsV2P7.CapModel.LedgerAmountByECMAccountByRptLOB”；列不允许空值。插入失败。*

我知道不允许 NULL 值，因为我是这样设置的，但它不应该填充标识列所以没有 NULL 值吗？

我将不胜感激任何帮助！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:22:48.923

[SET IDENTITY_INSERT](http://msdn.microsoft.com/en-us/library/aa259221%28v=sql.80%29.aspx)意味着您正在为标识列提供值 - 您就是这样，因为它既在您的列列表中，又从您的 SELECT 语句返回。

删除 SET IDENTITY_INSERT 行，并从列列表中删除 AmountId。您还需要枚举从 Excel 工作表返回的列，以免提供 AmountId。

# android - Android 上的推送通知：Google GCM 与 Amazon SNS？

> ID：12753500
> 
> 赞同：12
> 
> 时间：2012-10-05T20:20:22.983
> 
> 标签：android, push-notification, android-c2dm, google-cloud-messaging, amazon-sns

我的 Android 应用程序需要简单的推送通知来获知服务器上新数据的出现。Android 提供了看起来很合适的[Google Cloud Messaging (GCM) 。](http://developer.android.com/guide/google/gcm/gcm.html)

但是，运行低于 Android 4.0.4 的设备需要在手机上存在 Google 帐户（根据截至 2012 年 10 月 1 日的[Google 平台统计数据](http://developer.android.com/about/dashboards/index.html)，这目前约占 Android 手机的 75%）。而且，在不相关的应用程序活动中要求用户设置 Google 帐户似乎不是一种好的体验。

对于可以在 Android 平台上使用的更通用的推送机制有什么建议吗？[例如， Amazon SNS](http://aws.amazon.com/sns/)的优缺点是什么？还有其他候选人吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-13T09:26:47.767

该服务还提供了一个通用的 Android 和 iOS 接口，并且比解析便宜得多：[PushApps](http://www.pushapps.mobi)

PushApps 现在可以使用一个新的 wiki 站点 - [PushApps wiki](http://wiki.pushapps.mobi)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T20:26:08.253

我强烈推荐 Parse API。你可以在这里找到它：http: [//parse.com](http://parse.com)。它不仅适用于 Android 设备，而且还适用于 iOS、JavaScript 和 REST 跨平台。您可以发送简单的文本推送消息，也可以发送 JSON 字符串到推送设备的复杂消息。我不确定你的应用程序需要的范围（你可能需要更多的服务器端控制，尽管 Parse 现在也提供了一种在云中运行代码的方法），但一定要看看 Parse。

**编辑：**

首先，Parse 实际上只是 GCM 的一个包装器，因此它并不能真正回答您的问题，因为归根结底，它是 GCM 提供的一些服务，可以让您更快地启动和运行推送服务器。

二、Parse已宣布关闭，2017年1月28日后不再支持： [Parse博客公告](http://blog.parse.com/announcements/moving-on/)

第三，要真正回答您的问题，确实有一些 GCM 和 SNS 的替代品可以满足您的需求。在不详细介绍每种方法的优缺点的情况下，这里有一些可供您研究的替代方法：

*   网络套接字
*   HTTP 长轮询
*   根据您的用例，从服务器定期轮询（即每天轮询一次以获取最新通知的“提要”。
*   某种类型的 MQTT 协议实现

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-30T07:46:39.343

对于 android 设备，一些不错的选择是**GCM、Amazon SNS、Urban Airship**。试试 Urban Airship，直到 Parse 对我来说是最好的选择，但他们将在 2017 年停止服务，所以这不是一个好的选择。

# bash - 使用 Festival 生成音频文件

> ID：12753504
> 
> 赞同：3
> 
> 时间：2012-10-05T20:20:40.343
> 
> 标签：bash, festival

是否可以通过将输出管道传输到其他程序来在 Festival 中生成音频文件？我试图找出如何使用 Festival 的“歌唱合成”选项将 xml 文件转换为音频文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:23:28.360

对于名为“america1.xml”的文件，您可以使用以下命令：`text2wave -mode singing america1.xml -o america1.wav`生成 wav 文件。

我在这里找到了这些信息：http: [//festvox.org/docs/manual-1.4.3/festival_29.html](http://festvox.org/docs/manual-1.4.3/festival_29.html)

# sql - 错误的行估计在日期范围内连接两个表

> ID：12753511
> 
> 赞同：0
> 
> 时间：2012-10-05T20:21:19.030
> 
> 标签：sql, sql-server-2005, inner-join

## 表

*   TEST_RUNS (ID int, Date_Time datetime, Row1 int, Row2 int, Row3 int, Row4 int)
*   ADMIN_TIME_FILTER (ID int, Name varchar(20), Start_Date datetime, End_Date datetime)

**ADMIN_TIME_FILTER**包含一个通过自动化频繁更新的移动日期范围的小列表。我们有共同的日期范围（ThisYear、ThisDay 等）和一些更深奥的范围。该表的存在严格来说是作为在连接中从 TEST_RUNS 中过滤数据的一种方式。

**TEST_RUNS**包含我们关心的实际数据，并且有数百万行。我们有一堆已定义的视图将这两个表连接在一起，因此我们只需更新 ADMIN_TIME_FILTER 表并将更改传播到视图。除了日期之外，没有将这两个表链接在一起的行。

## 查询

问题是估计的行数大大偏离，导致查询性能不佳。这是一个简单的查询，展示了错误的估计：

```
with test as (
    SELECT a.* FROM TEST_RUNS a
    INNER JOIN ADMIN_TIME_FILTER b ON b.ID = 5 -- ID for ThisYear range
       AND a.date_time BETWEEN b.start_date AND b.end_date
)
select count(*) from test 
```

这是查询计划：

![查询计划](../Images/d7091126272fa3aeb20bd463068be6c4.png)

统计数据不是问题。我可以运行以下查询并获得准确的行估计

```
with test as (
    select tr.* from test_runs tr
    where tr.date_time between '2012-01-01 00:00:00' and '2012-12-31 00:00:00'
)
select count(*) from test 
```

## 帮助

放弃我们的连接方法并不是一项简单的任务，因此我正在寻找一种替代方法来改进行估计。

由于性能影响，索引视图似乎不是一个可行的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T20:46:53.170

问题不在于行数。您的查询设置为非等值连接。除了使用嵌套循环之外，SQL Server 确实没有其他方法来处理连接。

如果您在“a”表中有一个 id，则以下内容可能会有所帮助：

```
with test as (
    SELECT a.*
    FROM TEST_RUNS a INNER JOIN
         ADMIN_TIME_FILTER b
         ON a.id = b.id and b.ID = 5 and -- ID for ThisYear range
            a.date_time BETWEEN b.start_date AND b.end_date
)
select count(*) from test 
```

通过匹配表之间的“id”，SQL Server 可以考虑其他连接算法，例如合并连接或哈希连接。

我怀疑可能有另一种方法来解决这个问题。B 上使用的索引是什么？我建议（id，start_date，end_date）。引擎可能决定在日期上使用索引来满足查询。

# xmlhttprequest - 有没有办法检测 XmlHttpRequest 无法解析 URL？

> ID：12753512
> 
> 赞同：2
> 
> 时间：2012-10-05T20:21:25.777
> 
> 标签：xmlhttprequest

有没有办法检测 XmlHttpRequest 无法解析 URL ？使用错误的 url 调用 Open(...) 时似乎不会抛出异常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T21:50:47.170

HTTP 状态代码为零。
这适用于无法建立连接且未使用代理的网络问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:28:33.480

您可能会收到一个 404 not found 标头返回。

# sql - 变量中的单个行集

> ID：12753513
> 
> 赞同：0
> 
> 时间：2012-10-05T20:21:45.613
> 
> 标签：sql, sql-server-2008, sql-server-2005, sql-server-2008-r2

我被困在这个地方。我正在尝试在变量中获取单个行集值。

```
DECLARE @last_timestamp as varchar;
SET @last_timestamp = SELECT MAX(modify_timestamp) FROM dbo.table1
PRINT @last_timestamp 
```

它返回以下错误

```
Msg 156, Level 15, State 1, Line 2
Incorrect syntax near the keyword 'SELECT'. 
```

Cursor 是解决此问题的唯一方法吗？任何帮助会有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:22:37.697

```
SELECT @last_timestamp := MAX(modify_timestamp) FROM dbo.table1 
```

或者

```
SELECT MAX(modify_timestamp) INTO @last_timestamp FROM dbo.table1 
```

或者

```
SET @last_timestamp = (SELECT MAX(modify_timestamp) FROM dbo.table1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:25:27.117

尝试：

```
DECLARE @last_timestamp as varchar;
SELECT @last_timestamp  = MAX(modify_timestamp) FROM dbo.table1
PRINT @last_timestamp 
```

或者

```
DECLARE @last_timestamp as varchar;
SET @last_timestamp  = (SELECT MAX(modify_timestamp) FROM dbo.table1)
PRINT @last_timestamp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:25:04.840

`SELECT`您可以在语句周围放置括号

```
DECLARE @last_timestamp as varchar;
SET @last_timestamp = (SELECT MAX(modify_timestamp) FROM dbo.table1)
PRINT @last_timestamp 
```

# android - 无法删除短信

> ID：12753514
> 
> 赞同：2
> 
> 时间：2012-10-05T20:21:46.273
> 
> 标签：android, sms

我正在尝试删除短信。

```
String URI = "content://sms/inbox";
Cursor cursor = getContentResolver().query(Uri.parse(URI), null,null, null, null);
String[] _id = new String[cursor.getCount()];
String[] thread_id = new String[cursor.getCount()];
if (cursor.moveToFirst()) {
    for (int i = 0; i < cursor.getCount(); i++) {
        try {
            _id[i] = cursor.getString(cursor.getColumnIndexOrThrow("_id")).toString();
            thread_id[i] = cursor.getString(cursor.getColumnIndexOrThrow("thread_id")).toString();
        } catch (IllegalArgumentException e) {
            Log.d(TAG, e.toString());
        }
    }
}
final String id = _id[0]; // for debugging deleting the first msg
final String tid = thread_id[0]; // for debugging deleting the first msg
((Button) findViewById(R.id.delete)).setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
            Log.d(TAG, "id="+id+",tid="+tid);
            getContentResolver().delete(Uri.parse(URI),"_id=" + id + " and thread_id=" + tid,new String[] { String.valueOf(id),String.valueOf(tid) });
            Toast.makeText(getApplicationContext(), "SMS DELETED. RESTARTING ACTIVITY", Toast.LENGTH_LONG);
            Intent i = getApplicationContext().getPackageManager().getLaunchIntentForPackage(getApplicationContext().getPackageName());
            i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP| Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(i);
    }
}); 
```

它抛出一个异常：

```
10-06 00:48:43.234: E/AndroidRuntime(27912): FATAL EXCEPTION: main
10-06 00:48:43.234: E/AndroidRuntime(27912): java.lang.IllegalArgumentException: Unknown URL
10-06 00:48:43.234: E/AndroidRuntime(27912):    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:144)
10-06 00:48:43.234: E/AndroidRuntime(27912):    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:114)
10-06 00:48:43.234: E/AndroidRuntime(27912):    at android.content.ContentProviderProxy.delete(ContentProviderNative.java:483)
10-06 00:48:43.234: E/AndroidRuntime(27912):    at android.content.ContentResolver.delete(ContentResolver.java:675)
10-06 00:48:43.234: E/AndroidRuntime(27912):    at com.example.detector.MainActivity$1.onClick(MainActivity.java:85)
10-06 00:48:43.234: E/AndroidRuntime(27912):    at android.view.View.performClick(View.java:2408)
10-06 00:48:43.234: E/AndroidRuntime(27912):    at android.view.View$PerformClick.run(View.java:8816)
10-06 00:48:43.234: E/AndroidRuntime(27912):    at android.os.Handler.handleCallback(Handler.java:587)
10-06 00:48:43.234: E/AndroidRuntime(27912):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-06 00:48:43.234: E/AndroidRuntime(27912):    at android.os.Looper.loop(Looper.java:123)
10-06 00:48:43.234: E/AndroidRuntime(27912):    at android.app.ActivityThread.main(ActivityThread.java:4633)
10-06 00:48:43.234: E/AndroidRuntime(27912):    at java.lang.reflect.Method.invokeNative(Native Method)
10-06 00:48:43.234: E/AndroidRuntime(27912):    at java.lang.reflect.Method.invoke(Method.java:521)
10-06 00:48:43.234: E/AndroidRuntime(27912):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
10-06 00:48:43.234: E/AndroidRuntime(27912):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
10-06 00:48:43.234: E/AndroidRuntime(27912):    at dalvik.system.NativeStart.main(Native Method) 
```

删除删除时抛出异常。我的清单中有以下内容：

```
<uses-permission android:name="android.permission.READ_SMS" />
<uses-permission android:name="android.permission.WRITE_SMS"/> 
```

我尝试将 URL 更改`content://sms`为删除。不工作。给出以下异常：

```
10-06 01:59:57.602: E/AndroidRuntime(29381): android.database.sqlite.SQLiteException: bind or column index out of range: handle 0x6cfa38
10-06 01:59:57.602: E/AndroidRuntime(29381):    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:158)
10-06 01:59:57.602: E/AndroidRuntime(29381):    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:114)
10-06 01:59:57.602: E/AndroidRuntime(29381):    at android.content.ContentProviderProxy.delete(ContentProviderNative.java:483)
10-06 01:59:57.602: E/AndroidRuntime(29381):    at android.content.ContentResolver.delete(ContentResolver.java:675)
10-06 01:59:57.602: E/AndroidRuntime(29381):    at com.example.detector.MainActivity$1.onClick(MainActivity.java:85) 
```

有人可以看看这个并说出问题所在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:44:34.537

我认为你真正需要的是：

```
getContentResolver().delete(Uri.parse(URI),"_id=? and thread_id=?",new String[] { String.valueOf(id),String.valueOf(tid) }); 
```

看起来 delete() 使用准备好的语句，这意味着您不会在语句字符串中传递 id，因为它们是在第三个参数中传递的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-27T10:39:30.977

**我的活动.java**

```
 private static final String ADDRESS_COLUMN_NAME = "address";
    private static final String DATE_COLUMN_NAME = "date";
    private static final String BODY_COLUMN_NAME = "body";
    private static final String ID_COLUMN_NAME = "_id";

    (...)

    // Defines selection criteria for the rows you want to delete
    String mSelectionClause = ADDRESS_COLUMN_NAME + " = ? AND " + BODY_COLUMN_NAME + " = ? AND " + DATE_COLUMN_NAME + " = ?";

    String[] mSelectionArgs = new String[3];
    mSelectionArgs[0] = currentSms.getAddress();
    mSelectionArgs[1] = currentSms.getMsg();
    mSelectionArgs[2] = currentSms.getDate().toString();

    ContentResolver contentResolver = getContentResolver();

    // Delete from database
    int rowsDeleted = 0;
    rowsDeleted = contentResolver.delete(
            Uri.parse("content://sms"),   // the sms content URI
            mSelectionClause,                    // the column to select on
            mSelectionArgs                       // the value to compare to
    );

    if (rowsDeleted > 0) {
        Log.d(TAG, "Success!");
    } else {
        Log.d(TAG, "Delete sms UNSUCCESSFULL!!!");
    } 
```

**注意：不要忘记检查读、写短信的权限。并且版本 > KitKat 该应用程序必须成为短信的默认应用程序。**

# javascript - 使用zlib解压gz文件

> ID：12753518
> 
> 赞同：1
> 
> 时间：2012-10-05T20:22:07.397
> 
> 标签：javascript, node.js, zlib

我编写了下面的代码来打开一个 txt 文件并对其执行一些转换，然后将转换写入一个新文件。原始源文件虽然是 gzip'd，但我无法让节点工作的 zlib 模块。有人可以展示一个将 zlib 集成到下面的示例中的示例吗？在这种情况下。bigdata.sql 实际上是 bigdata.sql.gz，我只是在处理之前手动对其进行压缩。是制作我自己的对象并继承流对象的答案吗？

## 更新

我回答了我自己的问题，而不是问如何，也许有人可以告诉我一个更好的方法来做到这一点？或者也许这是最好的方法......

```
var fs = require('fs');
var util = require('util');
var stream = require('stream');
var zlib = require('zlib');

console.time('gz decompress')

// inherit from the stream object
function transformStream () {
  this.writable = true;
  this.readable = true;
}

util.inherits(transformStream, stream.Stream);

transformStream.prototype.modifyRow = function (data) {
  // console.log("begin data--->");
    console.log(data.toString('ascii'));
  // console.log("<---end data");
};

transformStream.prototype.write = function(data) {
    this.emit("data", data);
};

transformStream.prototype.end = function() {
    this.emit("end");
    console.timeEnd('gz decompress')
};

transformStream.prototype.destroy = function() {
  this.emit('close');
};

var ts = new transformStream();

ts.on("data", function(data) {
  this.modifyRow(data);
});

path='bigdata.sql.gz';
var file = fs.createReadStream(path).pipe(zlib.createUnzip()).pipe(ts); 
```

# perl - 使用perl从网页上的表格中提取信息

> ID：12753523
> 
> 赞同：1
> 
> 时间：2012-10-05T20:22:36.820
> 
> 标签：perl

我对 perl 很陌生，需要一些帮助来从网页中提取表格。我今天能够弄清楚如何使用 perl 打印页面。现在我只需要提取表中说明温度的信息。我目前的代码是：

```
# perl
use strict;
# use LWP::Simple;
use LWP::UserAgent;
my $ua = new LWP::UserAgent;
$ua->timeout(120);
my $url='http://MyTempSite/';
my $request = new HTTP::Request('GET', $url);
my $response = $ua->request($request);
my $content = $response->content();
print $content; 
```

我正在尝试从此 html 文件中获取温度读数：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><body    bgcolor="#C0C0C0" text="#000000" vlink="#800080" link="#0000FF"><P><h1>TempTrax Digital Thermometer</h1><BR><table cellpadding=0 cellspacing=0 border=0><TR><TD>Model:</TD><TD width=10 rowspan=7><BR></TD><TD>E4</TD><TR><TD>Manufacturer:</TD><TD>Sensatronics</TD> </TR><TR><TD>Website:</TD><TD><a href="http://www.sensatronics.com">http://www.sensatronics.com</a></TD></TR><TR><TD>Firmware Version:</TD><TD>1.2</TD></TR><TR><TD>Release Date:</TD><TD>December 16, 2003</TD></TR><TR><TD>Serial Number:</TD><TD>EA8E6L0T121</TD></TR><TR><TD>Unit name:</TD><TD>LiveTempMonitor</TD></TR></TABLE><P><h3>Current temperature readings:</h3><p><table><TR><TD width=200>Probe1:</TD><TD> 75.1</TD></TR>
<TR><TD width=200>Probe2:</TD><TD>-99.9</TD></TR>
<TR><TD width=200>Probe3:</TD><TD>-99.9</TD></TR>
<TR><TD width=200>Probe4:</TD><TD>-99.9</TD></TR>
</table></body></html> 
```

我应该如何仅获取要提取的“当前温度读数”表中的信息？提前感谢大家看一下这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:35:17.407

```
use 5.010;
use strict;
use warnings;

use XML::LibXML qw( );

my $html = $response->decoded_content( charset => 'none' );
my $doc  = XML::LibXML->load_html( string => $html );
my $root = $doc->documentElement();
my @readings =
   map $_->textContent(),
    $root->findnodes(
       '//table[ position() = 2 ]/tr/td[ position() = 2 ]'
    );

say for @readings; 
```

# php - 我应该如何创建一个总是超时的测试资源

> ID：12753527
> 
> 赞同：3
> 
> 时间：2012-10-05T20:22:59.003
> 
> 标签：php, python, apache, url, timeout

我正在对一个 URL 提取器进行单元测试，我需要一个总是导致`urllib2.urlopen()`(Python) 超时的测试 url。我试过制作一个只有 sleep(10000) 的 php 页面，但这会导致 500 内部服务器错误。

每当请求时，我将如何创建导致客户端连接超时的资源？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T21:59:06.770

> **编辑：**我看到了 [php] 标记，只是假设这是 PHP 代码——但是，如果这是您正在使用的语言，那么相同的原则可以适用于 Python。

成功的单元测试要求您**在完全隔离**所有外部影响的情况下测试代码单元。这意味着，如果您的测试依赖于文件系统（或者在这种情况下是一些外部 Web 服务器）之类的东西才能正常运行，那么您做错了。当您的测试依赖于外部 Web 服务器时，您会大大增加测试代码的复杂性，并引入误报和其他错误测试结果的可能性。

听起来当前的测试实现需要一个成熟的模拟 Web 服务器来提供特定的、可测试的响应。*这不应该是这样*。这种影响深远的测试依赖性只会导致上述问题。

### 更好的方法

但是您如何测试原生 PHP 功能及其与远程数据（如 HTTP 或 FTP）的交互？答案是在代码中添加测试*“接缝”*。考虑以下简单示例：

```
<?php

class UrlRetriever {

    public function retrieve($uri) {
        $response = $this->doRetrieve($uri);
        if (false !== $response) {
            return $response;
        } else {
            throw new RuntimeException(
                'Retrieval failed for ' . $uri
            );
        }
    }

    /**
     * A test seam to allow mocking of `file_get_contents` results
     */
    protected function doRetrieve($uri) {
        // suppress the warning from a failure since we're testing against the
        // return value (FALSE on failure)
        return @file_get_contents($uri); 
    }
} 
```

您的相关 PHPUnit 测试将如下所示：

```
<?php

class UrlRetrieverTest extends PHPUnit_Framework_TestCase {

    /**
     * @covers UrlRetriever::retrieve
     * @expectedException RuntimeException
     */
    public function testRetrieveThrowsExceptionOnFailure() {
        $retriever = $this->getMock('UrlRetriever', array('doRetrieve'));
        $retriever->expects($this->once())
                  ->method('doRetrieve')
                  ->will($this->returnValue(false));

        $retriever->retrieve('http://someurl');
    }

    /**
     * @covers UrlRetriever::retrieve
     */
    public function testSomeSpecificOutputIsHandledCorrectly() {
        $expectedValue = 'Some value I want to manipulate';

        $retriever = $this->getMock('UrlRetriever', array('doRetrieve'));
        $retriever->expects($this->once())
                  ->method('doRetrieve')
                  ->will($this->returnValue($expectedValue));

        $response = $retriever->retrieve('http://someurl');
        $this->assertEquals($response, $expectedValue);
    }
} 
```

显然，这个例子是人为的并且非常简单，但是这个概念可以根据你的需要进行扩展。通过像上述`UrlRetriever::doRetrieve`方法一样创建测试接缝，我们可以使用标准测试框架轻松模拟结果。

这种方法使我们能够测试操作远程资源的原生 PHP 函数的其他复杂结果，而无需接触外部 Web 服务器或在被测系统之外引入错误的可能性。

在 OP 的特定情况下，如果需要超时结果，只需模拟相关的测试接缝方法以执行本机 PHP 函数在超时情况下会执行的任何操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T20:33:09.110

你试过[httpbin](http://httpbin.org/)的`/delay`吗？

httpbin 是一个用 Python 编写的**HTTP 请求和响应服务**（我认为 Kenneth Reitz 开发它是为了[`requests`](http://docs.python-requests.org)在编写它的同时测试模块），源代码在[GitHub 上](https://github.com/kennethreitz/httpbin)。我实际上不确定是否`/delay`会延迟接受请求连接或发送响应。但如果它不完全符合您的需求，它应该很容易修改或扩展它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T20:25:00.543

连接超时？例如，使用`netcat`. 监听某个端口（`nc -l`），然后尝试从该端口下载数据`http://localhost:port/`...... 它将打开连接，永远不会回复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T20:28:26.100

在 PHP 中，您可以发送带有状态码 408 的标头

```
header("HTTP/1.0 408 Request Timeout"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T19:26:51.017

虽然这里有一些很好的答案，但我发现我只需要一个简单的 php sleep() 调用并覆盖 Apache 的超时。

我知道单元测试应该是孤立的，但是这个端点所在的服务器是无处可去的。

# ruby-on-rails-3 - Rails 3 清理显示对象属性的重复语法

> ID：12753530
> 
> 赞同：0
> 
> 时间：2012-10-05T20:23:10.343
> 
> 标签：ruby-on-rails-3, metaprogramming

所以我将对象的属性映射到视图中的表，我想让代码更简洁一些，并消除多余的 HTML。

这是它的样子：

```
- @users.each do |user|
   %tr
     %td= user.username
     %td= user.first_name
     %td= user.last_name
     %td= user.email
     %td= user.country
     %td= user.state
     %td= user.password 
      ... 
```

我想知道是否有一种消除所有这些冗余`%td= user.`调用的好方法。我正在观看[Form Builders](http://railscasts.com/episodes/311-form-builders?view=asciicast)上的 Railscast 插曲，他有一个辅助方法，它使用以下元编程语法来消除重复：

```
%w[text_field text_area password_field collection_select].each do |method_name|
    define_method(method_name) do |name, *args| 
```

现在有什么办法可以使用类似于这种结构的东西吗？实际上，我在替换方法名称后尝试实现这个精确的语法结构，并且似乎 define_method 函数未定义（哦，具有讽刺意味！）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:24:47.203

用于`.send`动态调用方法：

```
- %w(username first_name last_name ...).each do |method|
  %td= user.send(method) 
```

# android - android.app.Activity.onStop 中的 NPE

> ID：12753534
> 
> 赞同：1
> 
> 时间：2012-10-05T20:23:28.190
> 
> 标签：android

我在 Play 商店中看到了这个崩溃。

当我检查 framework/base/core/java/android/app/Activity.java 的源代码时

对于 ICS（崩溃发生在 4.0.4）

唯一的解释是应用程序为空！

校验码：

```
protected void onStop() {
    if (mActionBar != null) mActionBar.setShowHideAnimationEnabled(false);
    getApplication().dispatchActivityStopped(this);
    mCalled = true;
} 
```

例外：

```
java.lang.RuntimeException: Unable to stop activity {my.app/my.app.StartActivity}:  java.lang.NullPointerException
at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:2588)
at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:2654)
at android.app.ActivityThread.access$2100(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:961)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3647)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at android.app.Activity.onStop(Activity.java:1301)
at my.app.StartActivity.onStop(StartActivity.java:675)
at android.app.Instrumentation.callActivityOnStop(Instrumentation.java:1169)
at android.app.Activity.performStop(Activity.java:3968)
at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:2583)
... 11 more 
```

# php - 如何从 Ajax/Jquery 的下拉列表中获取复选框中的数据

> ID：12753537
> 
> 赞同：1
> 
> 时间：2012-10-05T20:23:39.330
> 
> 标签：php, ajax, jquery, checkbox

我没有在这里发布完整的代码，但我想知道如何根据下拉列表检索复选框中的数据。我有一个用户下拉列表，以及复选框中的页面数据。

假设表`user`有两列 ( `user_id`, `user`) 和`pages`三列 ( `page_id`, `user_id`, `title`)。

我希望这些复选框根据选定的用户自动选中/取消选中而不刷新页面。假设我正在获取用户

```
echo '<select name="user_id">';
echo '<option value="">Select User</option>';

$sql = "SELECT * from users";
$res = mysql_query($sql);
while($row = mysql_fetch_assoc($res)) {
    $uid = $row['user_id'];
    $user = $row['user'];
    echo '<option value="'.$uid.'">'.$user.'</option>'; 
}

echo '</select>'; 
```

以及基于选定用户的复选框中的数据（确保在查询`user_id`中进行比较`IF condition`但不在查询中）

```
$user_id = $_POST['user_id']; //selected user from list

$query = "SELECT * from pages";
$result = mysql_query($query);
while($rowPage = mysql_fetch_assoc($result)) {

    $upid = $rowPage['user_id'];
    $pid = $rowPage['page_id'];
    $title = $rowPage['title'];

    if($upid == $user_id) {
        echo '<input type="checkbox" name="userPages[]" value="'.$pid.'" checked="checked"> '.$title;   
    } else {
        echo '<input type="checkbox" name="userPages[]" value="'.$pid.'"> '.$title;
    }
} 
```

我的意思是在不刷新页面的情况下如何在 Ajax/Jquery 中实现。希望你明白我的意思。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T04:24:23.240

这是你能做的就是这样

```
 echo '<select name="user_id" id="userCombo">';
 echo '<option value="">Select User</option>';

 $sql = "SELECT * from users";
 $res = mysql_query($sql);
 while($row = mysql_fetch_assoc($res)) {
    $uid = $row['user_id'];
    $user = $row['user'];
    echo '<option value="'.$uid.'">'.$user.'</option>'; 
 }

echo '</select>';
echo '<div id="userCheckBoxes"></div>' 
```

现在将 ajax 调用放在选择框的更改事件上。我在这里打算使用jquery ajax。

```
<script type="text/javascript">
 $(document).ready(function()
 {
   $("#userCombo").change(function()
   {
     var id=$(this).val();
     var dataString = 'user_id='+ id;
     $.ajax
     ({
         type: "POST",
         url: "ajax_checkboxes.php",
         data: dataString,
         cache: false,
         success: function(html)
         {
            $("#userCheckBoxes").html(html);
         }
     });
   });
 });
 </script> 
```

现在将 ajax_checkboxes.php 放入同一目录。然后将下面的代码放入 ajax_checkboxes.php。我假设您可以自己建立数据库连接。

```
 $user_id = $_POST['user_id']; //selected user from list

  $query = "SELECT * from pages";
  $result = mysql_query($query);
  while($rowPage = mysql_fetch_assoc($result)) {

       $upid = $rowPage['user_id'];
       $pid = $rowPage['page_id'];
       $title = $rowPage['title'];

    if($upid == $user_id) {
        echo '<input type="checkbox" name="userPages[]" value="'.$pid.'"        checked="checked"> '.$title;   
     } else {
        echo '<input type="checkbox" name="userPages[]" value="'.$pid.'"> '.$title;
    }
 } 
```

我没有在本地服务器上品尝过它，但我相信它会起作用。

PS 不要在您网站的头部包含 jQuery。

# jquery - 如何为 bxSlider 内的元素正确添加边距

> ID：12753541
> 
> 赞同：0
> 
> 时间：2012-10-05T20:23:56.177
> 
> 标签：jquery, css, bxslider

目标：有一个能够滑动DIV的滑块，元素之间必须有间隙。

问题：我有 6 张幻灯片（DIV），它们应该是这样的：[http](http://cl.ly/image/3t2Q0w1N350y) ://cl.ly/image/3t2Q0w1N350y （这不是很准确的例子，因为左边幻灯片中的图像被切割了大约 15 个像素。但我希望它将给出需要实现的目标的想法。）

我使用来自 bxslider 网站示例页面的代码：

```
$(function(){
 $('#slider1').bxSlider({
displaySlideQty: 3,
moveSlideQty: 1,
prevText: "",
prevSelector: '#backar',
prevImage: '/img/siteicons/slider-left-arrow.png',
nextText: "",
nextSelector: '#forwar',
nextImage: '/img/siteicons/slider-right-arrow.png'
 });
}); 
```

正如我所说的幻灯片需要在元素之间有间隙，所以我添加了 margin-right: 20px; to .element 但结果很奇怪...现在元素之间有一个间隙，但是几圈后元素本身并没有正确显示。（例如：[http](http://cl.ly/image/3J0O2e360N1m) ://cl.ly/image/3J0O2e360N1m ）

所以我的问题是：如何为滑块中的元素正确添加边距/填充（无论如何）？我不确定这个问题是 CSS 还是 JS 相关，但我希望有人知道解决方案。

我尝试了不同的边距/填充，我还尝试添加固定数字而不是 getWrapperWidth(); 到 bxSlider 代码中的 wrapperWidth =。但没有运气。

我的测试页面：[http ://restop.cutepictures.ru/htmlmockup/test.html](http://restop.cutepictures.ru/htmlmockup/test.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:15:15.417

没有边距，没有填充。你想在 bxSlider 中的元素之间有一个间隙——为你的 DIV/li（你的“滑动元素”）等添加额外的宽度。

就我而言

```
.element{
float: left;
width: 225px;
max-width: 225px;
max-height: 210px;
} 
```

顺便说一句，我还在滑块 js 中将固定宽度设置为 wrapperWidth

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:40:40.930

问题是您的滑块工具正在使用 .element div 的宽度来确定单击箭头时要滑动的距离。换句话说，去掉 .element div 上的 margin-right

```
.element {
    float: left;
    max-height: 210px;
    max-width: 210px;
    width: 210px;
} 
```

并为您的图像添加填充权

```
img {
    border: 0 none;
    padding-right: 10px;
} 
```

稍微摆弄一下，我想你可以让它看起来像你想要的那样。

# ios - iOS：以编程方式从屏幕底部对齐按钮 x 像素

> ID：12753542
> 
> 赞同：0
> 
> 时间：2012-10-05T20:24:24.960
> 
> 标签：ios, button, margins, autoresizingmask

我正在为其他人制作的应用程序创建与 iOS6 的兼容性。我习惯于使用带有自动调整大小掩码的按钮/UI 元素，但我真的不知道当您以编程方式创建按钮时它们是如何工作的。

例如：

```
- (UIButton*) createSampleButton {
    UIButton* b = createSampleViewButton(CGRectMake(67, 270, 191, 45), 
                                          @"btn_shuffle", 
                                          @"btn_shuffle_active",
                                          self,
                                          @selector(sampleAction));
    b.autoresizingMask = UIViewAutoresizingFlexibleTopMargin;
    [self attachButton:b];
    return b;
} 
```

我如何更改这些按钮，以便它们根据某个比例/边距放置，而不是任意选择点，直到一切“看起来正确”？

我在想类似的东西：

```
- (UIButton*) createSampleButton {
    CGFloat height = self.bounds.size.height;
    CGFloat bottomBound = 80;
    UIButton* b = createSampleViewButton(CGRectMake(67, height-bottomBound, 191, 45), 
                                          @"btn_shuffle", 
                                          @"btn_shuffle_active",
                                          self,
                                          @selector(sampleAction));
    [self attachButton:b];
    return b;
} 
```

这可以保证我每次都将按钮放置在距屏幕底部 80 点的位置，对吗？有没有更优雅或更有目的性的方式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:38:00.933

掩码与在 IB 或代码中创建时的掩码相同。但是，您要确保在代码中做的事情是确保框架设置正确比例一次。在您的情况下，是的，您确实需要 UIViewAutoResizingFlexibleTopMargin，并根据 y = parentView.bounds.size.height - （如您所描述的 x 点）在原点上设置正确的 y 值，这就是您需要做的一切。

编辑：根据您更新的问题，也许这会对您有所帮助。如果按钮具有恒定大小，请在创建按钮时将框架设置为以 CGPointZero 作为原点的大小。如果 UIView 拥有该按钮，则将此代码放在 layoutSubviews 中。如果 UIViewController 拥有该按钮，请将 self.bounds 替换为 self.view.bounds 并将其放入 view(Will/Did)LayoutSubviews 中（假设 iOS5+）。

```
 // Aligning the button at it's current x value, current size, with its bottom border margin pizels from the bottom of the parent view.
    CGFloat margin = 10;
    CGRect buttonFrame = button.frame;
    buttonFrame.origin.y = self.bounds.size.height - buttonFrame.size.height - margin;
    button.frame = buttonFrame; 
```

此外，在实现文件的顶部定义常量值。随意创建方便的方法以提高可读性（如果您发现这更具可读性并且不会在一行上做太多），例如

```
 CGRect CGSetYInRect(CGFloat y, CGRect rect)
    ...
    button.frame = CGSetYInRect(self.bounds.size.height - button.frame.size.height - margin, button.frame); 
```

在适当的时候使用 AutoResizing 以避免 layoutSubviews 中的显式逻辑。

当您仅迁移到 iOS 6 + 时，请使用 AutoLayout。

# c++ - 是否可以手动定义枚举类的转换？

> ID：12753543
> 
> 赞同：51
> 
> 时间：2012-10-05T20:24:26.790
> 
> 标签：c++, enums, c++11, enum-class

通常，您可以使用以下语法为类定义强制转换：

```
class Test {
public:
  explicit operator bool() { return false; }
}; 
```

有没有办法做到这一点或类似的事情`enum class`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-05T20:37:29.483

不，这不对。

实际上， an`enum class`根本就不是类。`class`仅使用该关键字是因为突然将 unscoped 更改`enum`为 scoped`enum`将意味着重新处理*所有*枚举代码。所以委员会决定为了区分新式和旧式枚举，新的枚举将被标记为`class`，因为它已经是一个关键字，所以 no不能在 C++ 中`enum`命名。`class`他们本可以选择另一个，无论如何这不会更有意义。

然而，尽管有`class`关键字，它们仍然是常规枚举，因为括号内只允许使用枚举数（以及可能分配给它们的值）。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-05T22:03:40.050

`constexpr`不，但是您可以使用成员和构造函数使普通类类型像枚举类一样工作。然后你可以添加所有你想要的附加成员函数。

* * *

证明它甚至可以使用`switch`：

```
#include <iostream>

struct FakeEnum
{
    int x;

    constexpr FakeEnum(int y = 0) : x(y) {}

    constexpr operator int() const { return x; }

    static const FakeEnum A, B, Z;
};

constexpr const FakeEnum FakeEnum::A{1}, FakeEnum::B{2}, FakeEnum::Z{26};

std::istream& operator>>(std::istream& st, FakeEnum& fe)
{
    int val;
    st >> val;
    fe = FakeEnum{val};
    return st;
}

int main()
{
    std::cout << "Hello, world!\n";
    FakeEnum fe;
    std::cin >> fe;

    switch (fe)
    {
        case FakeEnum::A:
        std::cout << "A\n";
        break;
        case FakeEnum::B:
        std::cout << "B\n";
        break;
        case FakeEnum::Z:
        std::cout << "Z\n";
        break;
    }
} 
```

* * *

证明使用`switch`不需要与 的隐式相互转换`int`：

```
#include <iostream>

/* pseudo-enum compatible with switch and not implicitly convertible to integral type */
struct FakeEnum
{
    enum class Values { A = 1, B = 2, Z = 26 };
    Values x;

    explicit constexpr FakeEnum(int y = 0) : FakeEnum{static_cast<Values>(y)} {}
    constexpr FakeEnum(Values y) : x(y) {}

    constexpr operator Values() const { return x; }
    explicit constexpr operator bool() const { return x == Values::Z; }

    static const FakeEnum A, B, Z;
};

constexpr const FakeEnum FakeEnum::A{Values::A}, FakeEnum::B{Values::B}, FakeEnum::Z{Values::Z};

std::istream& operator>>(std::istream& st, FakeEnum& fe)
{
    int val;
    st >> val;
    fe = FakeEnum(val);
    return st;
}

int main()
{
    std::cout << "Hello, world!\n";
    FakeEnum fe;
    std::cin >> fe;

    switch (fe)
    {
        case FakeEnum::A:
        std::cout << "A\n";
        break;
        case FakeEnum::B:
        std::cout << "B\n";
        break;
        case FakeEnum::Z:
        std::cout << "Z\n";
        break;
    }
    // THIS ERRORS: int z = fe;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-05T20:36:25.677

您不能在 C++ 中定义非成员强制转换运算符。而且您当然不能为枚举定义成员函数。所以我建议你做自由函数来将你的枚举转换为其他类型，就像你实现强制转换运算符一样。

例如

```
bool TestToBool(enum_e val)
{
    return false;
}

const char *TestToString(enum_e val)
{
    return "false";
} 
```

* * *

有一种将这些枚举关联到布尔值的好方法，您必须将其拆分为两个文件 .h 和 .cpp。如果它有帮助，那就是：

枚举.h

```
///////////////////////////////
// enum.h
#ifdef CPP_FILE
#define ENUMBOOL_ENTRY(A, B)            { (enum_e) A, (bool) B },
struct EnumBool
{
    enum_e  enumVal;
    bool    boolVal;
};
#else
#define ENUMBOOL_ENTRY(A, B)            A,
#endif

#ifdef CPP_FILE
static EnumBool enumBoolTable[] = {
#else
enum enum_e
{
#endif
ENUMBOOL_ENTRY(ItemA, true),
ENUMBOOL_ENTRY(ItemB, false),
...
};

bool EnumToBool(enum_e val); 
```

枚举.cpp

```
///////////////////////////////
// enum.cpp
#define CPP_FILE
#include "enum.h"

bool EnumToBool(enum_e val)
    //implement 
```

我没有编译它，所以如果它有任何错误，请放轻松:)。

# iphone - 升级到 xcode 4.5，Mountain Lion 和模拟器停止工作

> ID：12753553
> 
> 赞同：0
> 
> 时间：2012-10-05T20:24:58.343
> 
> 标签：iphone, ios-simulator, ios6, osx-mountain-lion, xcode4.5

我已经搜索了这里提出的问题，并认为我之前已经找到了删除模拟器数据的答案，但我的问题似乎略有不同。

当我运行该应用程序时，该应用程序正在使用最新版本的 xcode 并已在模拟器中的其他系统上运行，在模拟器中，它打开了模拟器并且模拟器屏幕为黑色。不是我见过的正常黑色问题，但您仍然可以看到边缘周围的 iPhone 或 iPad 框架，整个模拟器窗口是黑色的，就像它没有加载一样。

当我查看调试日志时，它总是这样说，只有这个“错误：无法附加到进程 ID 0”。

我已经尝试了[Xcode 编译我的应用程序的步骤，但无法在模拟器中运行它，](https://stackoverflow.com/questions/9702201/xcode-compiles-my-app-but-cant-run-it-in-the-simulator)我已经卸载并重新安装了 xcode。问题仍然存在。

如果有人有任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:47:49.220

好的，我最近几天有这个问题。我在“硬件”菜单中更改了设备，它自动开始工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:52:37.877

问题原来是 root 没有运行模拟器，所以我们给了各种文件夹和文件权限，对不起，长长的列表，我做了一半的工作，其他人做了剩下的工作，但如果你遇到这个问题，开始在非root帐户中工作（系统管理员也没有工作）。

# forms - Contactform 7 占位符验证

> ID：12753565
> 
> 赞同：2
> 
> 时间：2012-10-05T20:25:39.870
> 
> 标签：forms, wordpress, validation, contact

我正在为 Wordpress 使用 Contactform 7。我已经编辑了 text.php 和 textarea.php 以启用占位符的使用。这很好用。

但是，验证不适用于某些输入字段，因为验证认为占位符是正在验证的实际文本。是的，这当然可以验证，因为它不是空的。

我的占位符输入字段如下：

*   你的名字
*   您的电子邮件地址
*   你的电话号码

等等。

在contactform 7的scripts.js中，我希望验证检查输入是否与占位符不同。因此，如果输入值与占位符值相同，则进行 CF7 的错误验证。

任何想法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-01-31T14:42:02.183

在contactform 7插件文件夹的scripts.js中

改变这个：

```
var submit = form.find('input:submit');
        if (! submit.length) return; 
```

有了这个：

```
var submit = form.find('input:submit');
        if (! submit.length || submit == this.find('[placeholder]').wpcf7Placeholder()) return; 
```

# ios - 如何检查 base64 编码是否正确？

> ID：12753566
> 
> 赞同：2
> 
> 时间：2012-10-05T20:25:40.843
> 
> 标签：ios, in-app-purchase

我是 base64 编码的 transactionReciept 用于应用内购买验证。我在我的应用程序中编码并将其发布到我的服务器，然后发送到沙箱。我得到状态：21002。如何检查我的编码收据以确保编码正确？

这是我们发送到沙盒的内容：

"receipt-data" : "uPOMP4QUAAIKCgAACgoAAAAAAAAAAAAAAAAAAAAAAAB7Cgkic2lnbmF0dXJlIiA9ICJBaW9DWFhqeUpKeStUc29wZkJIUGE2bkxDS0hHbnNqbE5iRTlrTE1kYVJ2STZDTnIzVlQ5QlVBZE5GRlFwRmM5d0doN1N2bHJH.......", "password" : "cKWOP8gHAABhyAYAIAA...."

这看起来像 base64 编码吗？我们的名称-值对是否正确？我们只是将收据和密码作为名称-值对发送，对吗？

谢谢。

# asp.net-mvc-3 - ASP.NET MVC 3：@RenderSection 中是否不支持带有 @section 的多个嵌套视图？

> ID：12753572
> 
> 赞同：-1
> 
> 时间：2012-10-05T20:26:17.017
> 
> 标签：asp.net-mvc-3, razor

这是我在 ASP.NET MVC 3 中的设置：母版页 --(RenderBody)-> 索引视图 --(Html.Action)-> 部分视图。

母版页有一个`@RenderSection`，部分视图有一个`@section`块，但内容不包含在母版页上。但是，我可以将`@section`块放在索引视图上，这样就可以了。MVC 3 不支持多嵌套部分吗？我真的不想将部分块上移一个级别，但如果没有其他方法，我会这样做。

仅供参考，这个特定的 RenderSection 位于母版页的底部，用于包含 JavaScript 块。如果部分视图需要执行一些脚本，它可以包含 @section 块以保持一切井井有条。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:29:49.730

您不能在局部视图中使用 @section。您可以有嵌套布局，但不能有部分布局。

# tomcat - Tomcat-Maven 401 错误：无法调用 Tomcat 管理器

> ID：12753578
> 
> 赞同：10
> 
> 时间：2012-10-05T20:26:37.377
> 
> 标签：tomcat, maven, spring-mvc, m2eclipse

经历了 StackOverFlow 中显示的大部分错误，但仍然无法解决。我正在尝试部署一个 SpringMVC 应用程序。但是，我就是无法让它工作。

Maven 部署错误：

```
[ERROR] Failed to execute goal org.codehaus.mojo:tomcat-maven-plugin:1.1:redeploy (default-cli) on project productmgmt: Cannot invoke Tomcat manager: Server returned HTTP response code: 401 for URL: http://localhost:8080/manager/text/deploy?path=%2Fproductmgmt&war=&update=true -> [Help 1] 
```

Pom.xml：

```
<build>
        <finalName>productmgmt</finalName>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>tomcat-maven-plugin</artifactId>
                <configuration>
                    <url>http://localhost:8080/manager/text</url>
                    <path>/productmgmt</path>
                    <username>admin</username>
                    <password>password</password>
                </configuration>
            </plugin>
        </plugins>
    </build> 
```

Tomcat-Users.xml

```
<role rolename="admin"/>
  <role rolename="manager"/>
  <user username="admin" password="admin" roles="admin,manager"/>
</tomcat-users> 
```

更多信息：

```
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

这对我有用

```
<role rolename="manager-script"/>
<role rolename="admin-script"/>
<user password="password" roles="manager-script,admin-script" username="admin"/>
</tomcat-users> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T20:28:34.377

您的 Maven 配置将用户名和密码设置为`admin/password`. 在 Tomcat 配置中，它们被设置为`admin/admin`.

切换你`pom.xml`的拥有`<password>admin</password>`。

此外，需要根据[Tomcat 文档](http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html)更改管理员用户的角色。您需要**manager-gui**角色访问 HTML 管理器，而**manager-script**角色访问文本界面。

# ios - iOS6 中 MKMapKit 的路由数据

> ID：12753580
> 
> 赞同：3
> 
> 时间：2012-10-05T20:26:47.233
> 
> 标签：ios, ios6, mapkit, ios6-maps

我之前在 iOS 应用程序中完成了路由，但是在 iOS6 中，我们现在显示 Apple 地图 - 这会导致问题，因为我们使用的是 Google 路由数据，如果我们使用 Google 数据，我们应该在 Google 地图上显示它。

我一直在搜索，但据我所知，Apple 不提供任何路由数据。到目前为止，最接近答案的似乎是苹果公司所说的`Apps that consume direction information do so by sending an appropriate request to the Maps app, which then handles the task of displaying that information to the user.`——对我来说，这意味着地图应用程序将被打开以显示路线，并将用户带出我们的应用程序。

*   我们在哪里可以获得可以在使用 Apple 地图的 iOS6 应用程序上使用的即时路由数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T01:55:35.407

不幸的是 MapKit 不提供路由数据。

> 在 iOS 6 及更高版本中，Map Kit 支持向用户提供基于地图的方向。应用程序可以提供方向，也可以使用地图应用程序本身来提供方向。使用方向信息的应用程序通过向地图应用程序发送适当的请求来完成此操作，然后地图应用程序处理向用户显示该信息的任务。但是，如果您正在实现自己的导航应用程序，则可以将您的应用程序注册为路线应用程序，即路线提供者。当地图应用程序接收到来自用户（或其他应用程序）的方向请求时，它可以将这些请求转发到您的应用程序进行显示。

[来源](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/ProvidingDirections/ProvidingDirections.html#//apple_ref/doc/uid/TP40009497-CH8-SW5)

因此，您最好的选择是使用外部路由数据或地图应用程序。由于 Google 禁止在未显示在 Google 地图上的情况下使用其路由数据，因此您可能需要检查 bing API（[此处](http://msdn.microsoft.com/en-us/library/ff701705.aspx)）。它们要求您将 bing 地图与 bing 路由数据一起使用并不是很明显，但它们也提供了静态地图 api（[此处](http://msdn.microsoft.com/en-us/library/ff701724.aspx)）。

[或者，您可能想在 github 上](https://github.com/kishikawakatsumi/ClassicMap)查看这个项目。它显示了如何在地图视图中加载谷歌地图图块。

祝你好运。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-14T05:19:30.750

您可以使用[MapQuest 的 Open Directions API](http://developer.mapquest.com/web/products/open/directions-service)。它是免费的，而且似乎没有任何限制。他们还有一个[许可的 API](http://developer.mapquest.com/web/products/dev-services/directions-ws)，每日免费限制。

我相信您只需将他们的徽标放在您的应用程序的某个位置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-15T17:33:12.963

Apple 可能会在未来提供路线信息，但目前它仅在地图应用中可用。

一种解决方案是在您的地图视图中使用 Google 切片。[ClassicMap](https://github.com/kishikawakatsumi/ClassicMap)的代码对此进行了完整的实现，并且可以通过自由许可证获得。在 Apple 提供路由信息之前，将其用作权宜之计。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T16:03:37.330

您是对的，[Google API 服务条款](https://developers.google.com/maps/terms)在 10.1.1 点 g 中：

> **(g) 不得使用没有 Google 地图的内容**。您不得在没有相应 Google 地图的情况下使用或显示内容，除非 Maps API 文档明确允许您这样做，或获得 Google 的书面许可。在任何情况下，您都不得在非谷歌地图上或与非谷歌地图一起使用或显示内容。例如，您不得将通过服务获得的地理编码与非 Google 地图结合使用。作为另一个示例，您不得在非 Google 地图旁边显示街景图像，但您可以在没有相应 Google 地图的情况下显示街景图像，因为 Maps API 文档明确允许您这样做。

在 iOS 6 之前，对 Google API 的访问是透明的，Apple 通过 MapKit 框架访问，Apple 为我们开发人员处理了所有的许可、费用等，我们不需要担心这一点。

现在 Apple 正在使用他们自己的地图服务，我们无法通过 MapKit 框架访问 Google API，就像您说的那样，并且 MapKit 无法以您想要的方式使用它。

所以你必须与谷歌保持沟通，但问题是你现在将使用谷歌数据而没有谷歌地图。

这是一个问题，如果您的应用程序很受欢迎，并且 Google 意识到，他们可能会选择与您发生问题。

目前还没有正确的方法，一些应用程序正在将谷歌地图平铺到苹果地图上，但是你需要向谷歌注册你的应用程序以获得我假设的 API 密钥，这会限制你的请求数量，并且可能你可能必须向 Google 支付 API 使用费。

# jquery - 如何将计数器限制为特定数字？

> ID：12753584
> 
> 赞同：0
> 
> 时间：2012-10-05T20:27:01.653
> 
> 标签：jquery, counter

我设置了一个计数器来跟踪单击下一个和上一个按钮的次数。

1.  click = 一个上一个按钮出现
2.  click = 九个 Next 按钮消失

我想限制计数器的数量。例如 10。一旦达到 10。

```
// Buttons
var count = 0;
$("#mod3-6-1_nextbutton").click(function() {
    $("#actions-container").css({
        "top" : "-=110px"
    });

    count += 1;
    counter();
});
$("#mod3-6-1_backbutton").click(function() {
    $("#actions-container").css({
        "top" : "+=110px"
    });
    count -= 1;
    counter();
});

function counter() {

    if (count == 0) {
        $("#mod3-6-1_backbutton").css({
            "top" : "-9999px",
            "left" : "-9999px",
        }); 
    }
    if (count == 1) {
        $("#mod3-6-1_backbutton").css({
            "top" : "20px",
            "left" : "44px",    
        }); 
    }
    if (count > 9) {
        $("#mod3-6-1_nextbutton").css({
            "top" : "-9999px",
            "left" : "-9999px",
        });
        $("#actions-container").css({
                 "top" : "-990px"
             });
    }
    else {
            $("#mod3-6-1_nextbutton").css({
                   "top" : "20px",
                  "left" : "700px",

        }); 
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:28:55.147

这应该可以为您完成工作

```
return (counter < 10); 
```

一旦计数器为 10，这会将返回值设置为 false，并且您的代码将不会被执行。一旦返回 false；

```
 var count = 0;
$("#mod3-6-1_nextbutton").click(function() {
    count += 1;
    if (count > 9) {
        return false;
    }
    else if (count == 9) {
        // DO nothing
    }
    else {
        $("#actions-container").css({
            "top": "-=110px"
        });
    }
    counter();
});
$("#mod3-6-1_backbutton").click(function() {

    count -= 1;
    if (count > 9) {
        return false;
    }
    else if (count == 0) {
        // DO nothing
    }
    else {
        $("#actions-container").css({
            "top": "+=110px"
        });
    }
    counter();
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:32:03.490

仅当计数小于您的最大值时才执行操作，并且由于下一个按钮消失，计数无论如何都不应该超过您的最大值。一种草率的做法就是说

```
if (count < max) {
    // make sure the right button shows and
    // do stuff
} else {
    // make button disappear
} 
```

您还可以用 css 类替换这些 css 行并使用 addClass()/removeClass() 来实现样式。为了使它更健壮，您可以从您拥有的幻灯片数量中获得最大计数

```
var max = $('#slider .slides').length; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:40:43.257

很多重复的代码，只是你必须做的一个例子。

```
var count = 0;
var LIMIT = 10;

$("#mod3-6-1_nextbutton, #mod3-6-1_backbutton").click(function() {
    var top, count;
    if($(this).is('#mod3-6-1_nextbutton')) {
        if(count == LIMIT) return false;
        top = "-=110px";
        val = 1;
    } else {
        top = "+=110px";
        val = -1;
    }

    $("#actions-container").css({
        "top" : top
    });
    count += val;
    counter();
}); 
```

# python - Pythonic获取对象布尔值的方法

> ID：12753589
> 
> 赞同：0
> 
> 时间：2012-10-05T20:27:41.153
> 
> 标签：python

我想就编写一个函数的最惯用方式发表意见，`True`如果一个对象是真实的，则返回，`False`否则。例如：

```
is_truthy(True) # True
is_truthy(False) # False
is_truthy(123) # True
is_truthy(0) # False
is_truthy("some string") # True
is_truthy("") # False 
```

我想出的最好的是：

```
def is_truthy(obj):
    return not not obj 
```

有人可以做得更好吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T20:29:34.457

```
is_truthy = bool 
```

内置程序让您满意。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T20:29:38.600

你可以这样做：

```
bool(obj) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:36:07.430

如果您需要`bool`它，是因为您最终将在`if`语句等中使用它。我认为您不需要在*istruthy*函数中封装任何内容；直接用就行了`bool`。即而不是：

```
if is_truthy(my_bool):
    # do something 
```

只需这样做：

```
if my_bool:
    # do something 
```

# python - 使用 i18 但没有 webapp2 的 Python 单元测试

> ID：12753595
> 
> 赞同：1
> 
> 时间：2012-10-05T20:28:31.127
> 
> 标签：python, unit-testing, google-app-engine, webapp2, python-babel

在我的项目中使用 i18 时，我遇到了单元测试问题。我的项目使用framewoks i18和webapp2 功能使用i18的翻译。但是当我测试时，我得到了错误——缺少全局变量请求。例如它是：

 `````
from unittest import TestCase, main
from webapp2_extras.i18n import lazy_gettext as _

def Hello(a):
    if a > 0:
       message = _('My great message!11 a > 0')
    else:
       message = _('My great message!11 a =< 0')
    return message

class TestHandler(TestCase):

    def testHello0(self):
        self.assertEqual(Hello(0), 'My great message!11 a =< 0')

    def testHello3(self):
        self.assertEqual(Hello(3), 'My great message!11 a > 0')

if __name__ == '__main__':
     main() 
```

and I have message:

```
FAIL: testHello0 (text3.TestHandler)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/text3.py", line 14, in testHello0
    self.assertEqual(Hello(0), 'My great message!11 a =< 0')
AssertionError: Request global variable is not set. 
```

I have a solution to this problem, but I do not like it. This is a crutch. How can you test my function without using framewoks on similarity webapp2

```
from unittest import TestCase, main
from webapp2_extras.i18n import lazy_gettext as _
import webapp2

def Hello(a):
    if a > 0:
        message = _('My great message!11 a > 0')
    else:
        message = _('My great message!11 a =< 0')
    return message

class OneHandler(webapp2.RequestHandler):
    def get(self):
        myNumber = self.request.get('myNumber')
        myNumber = int(myNumber)
        message = Hello(myNumber)
        self.response.write(message)

routes = [('/One', OneHandler)]
app = webapp2.WSGIApplication(routes = routes)

class TestHandler(TestCase):

    def testHello0(self):
        myNumber = 0
        URL = '/One?myNumber=%s' % myNumber

        self.response = app.get_response(URL)
        self.mess = self.response.body
        self.assertEqual(self.mess, 'My great message!11 a =< 0') 

    def testHello3(self):
        myNumber = 3
        URL = '/One?myNumber=%s' % myNumber

        self.response = app.get_response(URL)
        self.mess = self.response.body
        self.assertEqual(self.mess, 'My great message!11 a > 0') 

if __name__ == '__main__':
    main() 
```

and well done!` 

```
Ran 2 tests in 0.047s

OK 
```

但这不是一个好的解决方案。我如何测试我的功能而不使用 webapp2 等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:51:40.857

我在文件 TEXT31.py 中删除了我的函数 Hello()。之后我使用了下一个代码：

```
from unittest import TestCase, main
import TEXT31

def dummy_gettext(message):
    return message

TEXT31._ = dummy_gettext # original _-function requires webapp2 environment

class TestHandler(TestCase):

    def testHello0(self):
        self.assertEqual(TEXT31.Hello(0), 'My great message!11 a =< 0')

    def testHello3(self):
        self.assertEqual(TEXT31.Hello(3), 'My great message!11 a > 0')

if __name__ == '__main__':
    main() 
```

做得好！我放松...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:05:24.013

只是不要测试外部代码并修补您的 _lazy 函数

```
from unittest import TestCase
import fudge

from path.to import fun
# def fun(msg):
#     return _lazy("foo %s") % msg

class TestHandler(TestCase):
    @fudge.patch("path.to._lazy")
    def test_foo(self, fake_lazy)
        fake_lazy.is_callable().calls(lambda s, **kw: s)
        self.assertEqual(fun("bar"), "foo bar") 
````

# c# - 调用 OnPropertyChange("property_name") 将更新发送到所有绑定属性

> ID：12753603
> 
> 赞同：2
> 
> 时间：2012-10-05T20:29:01.123
> 
> 标签：c#, .net, winforms, visual-studio-2010, data-binding

所以我有一个包含 40 个左右属性的类，这些属性通过与微控制器的通信进行更新。此类实现 INotifyPropertyChanged。

松散示例：

```
private int _Example;
public int Example
{
    get
    {
        return _Example;
    }
    set
    {
        _Example = value;
        OnPropertyChange("Example");
    }
} 
```

和 OnPropertyChange 函数：

```
protected void OnPropertyChange(string p_Property)
{
    if (PropertyChanged != null)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(p_Property));
    }
}

public event PropertyChangedEventHandler PropertyChanged; 
```

绑定（其中许多）

```
Second_Class_Control.DataBindings.Clear();
Second_Class_Control.DataBindings.Add("My_Property",  FirstClass,    "Example"); 
```

在主窗体中，我设置了绑定来显示这些值并对这些值做出反应。其中一个碰巧落在另一类的另一处房产上。*我碰巧在这个属性的 set 函数中放置了一个断点，并注意到它在任何*时候第一个类的*任何*属性发生变化时都会被调用。

这是正确的行为吗？我没有注意到任何性能损失，但我计划让这些类的许多实例一起运行并且没想到会出现这种情况。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:32:55.457

嗯..我注意到你有你的 OnPropertyChange 虚拟。为什么会这样，您是否在某处进行了覆盖？

我通常这样创建它：

```
public class ViewModelBase : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

然后用于用法：

```
public class MainWindowViewModel : ViewModelBase
{
    private string name;
    public string Name
    {
     get { return name; }
     set { name = value; OnPropertyChanged("Name"); }
    }
} 
```

# css - Extjs4 多组标题值 css

> ID：12753604
> 
> 赞同：1
> 
> 时间：2012-10-05T20:29:03.107
> 
> 标签：css, grouping, extjs4.1

[我正在使用这里](http://www.sencha.com/forum/showthread.php?226739-MultiGrouping-and-MultiGroupingSummary)的 Extjs4 多分组插件。

我已经成功使用它，但是我想显示组标题本身中每列总计的摘要。我如何为此设置适当的CSS？

![分组标题中各列下的列总和](../Images/4270cc345142ac551d9b876e4f319889.png)

在 Multigrouping.js 中

```
getFragmentTpl: function() {
    var me = this;
    return {
        indentByDepth: me.indentByDepth,
        depthToIndent: me.depthToIndent,
        renderGroupHeaderTpl: function(values, parent) {
     return Ext.XTemplate.getTpl(me, 'groupHeaderTpl').apply(values, parent);
            //var z = new Ext.XTemplate('{name} ({rows.grouplength})');
            //return z.apply(values, parent);
        }
    };
}, 
```

在我的网格中

```
features: [ 
    {
        ftype:'multigrouping',
        groupHeaderTpl: [
                         '{[this.readOut(values)]}',
                         {
                             readOut:function(values) {
                                 debugger;
                                 var sum1 =0 ,sum2=0,sum3=0;
                                    for( var i = 0 ; i< values.records.length ; i++)
                                        {
                                            var val = parseFloat(values.records[i].data.d2012.mp);
                                            sum1 += isNaN(val) ? 0.0 : val;
                                            val = parseFloat(values.records[i].data.d2013.mp);
                                            sum2 += isNaN(val) ? 0.0 : val;
                                            val = parseFloat(values.records[i].data.d2014.mp);
                                            sum3 += isNaN(val) ? 0.0 : val;

                                        }
                                    return values.name +  '(' + values.records.length + ')' +  ' ' + sum1.toFixed(2) + '            ' + sum2.toFixed(2) + '           ' + sum3.toFixed(2);
                                }
                         }
                     ]

    }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:28:16.957

不得不求助于一些黑客来让它工作。还在等官方答复。我必须这样做而不使用多分组摘要的主要原因是 - 我想限制来自服务器的记录数。我可以在服务器端对我的业务对象进行一些智能分组。- 这样做的主要原因是因为 IE8 在更大数据集上的性能。- 已经尝试过在 chrome 上运行良好但在 IE8 上出现性能问题的 extjs4 树网格组件。

hack 是 a) 在网格中使用数组属性来存储我想要操作的 dom 元素 b) 使用布尔值来知道第一次布局何时完成 b) 为 afterlayout 添加监听器（当你的应用程序可以做一个 Ext.get('..dom element..') 你知道你已经完成了）

听众：

```
listeners : 
{
 afterlayout : function(eopts)
 {
     var x = this.mOwnArray;
     if(!this.loadedwithVals && x.length > 0)
         {
    for(var i =0 ; i<x.length ; i++)
        {
            var dom = Ext.get(x[i].id);
            var theId = dom.id;
            theId = theId.match(/\d+/)[0];
            var title = dom.query("td[class='x-grid-cell x-grid-cell-first']");
            title[0].className = 'x-grid-cell x-grid-cell-gridcolumn-' + theId + ' x-grid-cell-first';
            title[0].colSpan=1;
            var groupedHeader = dom.query("div[class='x-grid-group-title']");
            groupedHeader[0].innerHTML =  x[i].name + '(' + x[i].length + ')';
            for(var year=2012;year<=2018;year++)
                {
                var t = "t"+year;
                var someText1 = '<td class=" x-grid-cell x-grid-cell-numbercolumn">';
                var someText2 = '<div class="x-grid-cell-inner " style="text-align: left; ;">';
                var someText3 = '<div class="x-grid-group-title">' + x[i].total[t] + '</div></div></td>';
                var someText = someText1 + someText2 + someText3;
                dom.insertHtml("beforeEnd",someText);   
                }
        }
            this.loadedwithVals = true;
     }
} 
```

和功能如

```
features: [ 
    {
        ftype:'multigrouping',
        startCollapsed : true,
        groupHeaderTpl: [
                         '{[this.readOut(values)]}',
                         {
                             readOut:function(values) {
                                 var header = new Object();
                                 header.id = values.groupHeaderId;
                                 header.sum = [];
                                 header.total = new Object();
                                 for(var year = 2012 ; year <= 2018 ; year++)
                                     {
                                        var t = "t"+year;
                                        header.total[t] = [];
                                     }
                                 // all the records in this header
                                    for( var i = 0 ; i< values.records.length ; i++)
                                        {
                                            // for all the 'years' in this record
                                            for(var year=2012;year<=2018;year++)
                                                {
                                                    var d = "d"+year;
                                                    var ct = "t" + year;
                                                    var arecord = values.records[i].data;
                                                    var val = parseFloat(arecord[d].mp);
                                                    val = isNaN(val) ? 0.0 : val;
                                                    Ext.Array.push(header.total[ct],val);
                                                }
                                        }
                                // push the sum of the records into its top level group
                                         for(var year = 2012 ; year <= 2018 ; year++)
                                         {
                                            var t = "t"+year;
                                            var sum = Ext.Array.sum(header.total[t]);
                                            header.total[t] = sum.toFixed(2);
                                         }
                                 header.name = values.name;
                                 header.length = values.records.length;
                                 var headerName = values.name;
                                 if(values.hasOwnProperty('parent'))
                                     {
                                        var parent = values.parent;
                                        headerName = headerName.replace(parent,'');
                                     }
                                 header.name = headerName;
                                 header.length = values.records.length;
                                 Ext.Array.push(grid.mOwnArray,header);
                                 // really not used
                                return values.name +  '(' + values.records.length + ')';
                                }
                         }
                     ]

    },
] 
```

# jquery - jQuery.post 在 IE9 上作为 HTTP GET 发送

> ID：12753605
> 
> 赞同：1
> 
> 时间：2012-10-05T20:29:07.953
> 
> 标签：jquery, internet-explorer-9

我正在使用 jQuery 1.8.2 通过 jQuery 的 ajax POST 调用一些后端服务器 api。后端服务器和网页都在同一个域中。

在我的 js 文件中，我只是在调用`$.post('/createAccount',data,function(e) { alert(e); });`

在 Fiddler 中，此请求在 IE9 中作为 GET 发送。

```
GET http://[redacted]/createAccount HTTP/1.1
Accept: */*
Origin: [redacted]
Accept-Language: en-US
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Host: [redacted]
Connection: Keep-Alive
Pragma: no-cache 
```

使用 Chrome（最新）的同一页面在 Fiddler 中返回以下内容：

```
POST http://[redacted]/createAccount HTTP/1.1
Host: [redacted]
Connection: keep-alive
Content-Length: 103
Origin: http://[redacted]
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.79 Safari/537.4
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
Accept: */*
Referer: http://[redacted]/builder?token=[redacted]
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

email=test123&token=[redacted]&company=tokentest1 
```

这是使用 $.ajax 而不是 $.post 的代码（同样的问题）：

```
 $.ajax({
            url : '/createAccount',
            type : 'POST',
            data : obj,
            dataType : 'json',
            cache: 'false',
            success : function(data) {
                if(data.status === 'ok') {

                } else {
                    alert('error');
                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:32:46.623

这是一个糟糕的时刻。我有一些其他代码可以回退到 MSFT 的 XDomainRequest，并且在该代码中它强制所有请求获取，而不是从 jQuery 选项对象中提取请求类型。

# c# - 使用列表

> ID：12753616
> 
> 赞同：-4
> 
> 时间：2012-10-05T20:29:56.940
> 
> 标签：c#, asp.net, linq

我有两个列表：（注意：列表的项目是 "NAME" 和 "ID" 的组合）

```
List<string> ListA = new List() {"SAM001","SAM002","SAM003","PIT001","PIT002","PIT004","ROSE001","ROSE002","JASE001" };
//so on

List<string> ListB = new List() {"SAM001","SAM003","PIT000","ROSE002","JASE001","INDI000"};` 
//so on... 
```

现在基于这两个列表，我想创建两个新列表，假设 listCommon 和 listUncommon。

listCommon 将包含 ListA 和 ListB 的所有匹配项。

listUnCommon 将包含 ListA 的所有剩余项目

**现在我的条件是，如果 ListB 中的任何项目都有 NAME + 000，那么以该名称开头的 ListA 的所有项目都应该添加到我的 listCommon 中。**

示例 1：如果 ListB 项目是 PIT000 并且 ListA 项目是 PIT001,PIT002,PIT003,ABC001 那么 listCommon = PIT001,PIT002,PIT003 因为 ListB 的 PIT 为 000 所以条件为真所有 ListA 'PIT' 项目添加到 listcommon

因此，如上面的列表和我的情况，我想要下面的最终列表

```
List<string> listCommon = new List() {"SAM001","SAM003", "PIT001","PIT002","PIT004","ROSE002", "JASE001" };
List<string> listUncommon = new List() {"SAM002", "ROSE001"}; 
```

请建议..我只是在循环中花费了几分钟，但没有得到我提到的实际结果:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T20:42:10.927

这应该有效。

```
var common = ListA.Intersect(ListB)
    .Concat(
        ListA.Where(a => 
             ListB.Any(
                b => b.EndsWith("000") && 
                b.StartsWith(a.Substring(0, a.Length - 3))
             )
        )
    );
var uncommon = ListA.Except(common); 
```

使用插入，然后您从列表 A 中选择任何一个，其中列表 B 有一个匹配前 3 个字母并以 000 结尾的条目。

这不是最有效的方法，但它在代码方面很简洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:35:47.940

从 2 个列表中查找常见项目：

`var listCommon = list1.Intersect(list`2);

更新 - 减去的项目：

```
var subtractedItems = new HashSet(listCommon);
commonItems.ExceptWith(list1); 
```

# java - 如何在 IntelliJIDEA 中创建具有默认文件名的模板？

> ID：12753624
> 
> 赞同：1
> 
> 时间：2012-10-05T20:30:42.297
> 
> 标签：java, templates, intellij-idea, javadoc

如何为模板设置默认文件名？我最近一直在浏览我的代码，添加了一些信息的 package-info.java。我想让 IntelliJ IDEA 创建具有正确名称和包行的文件，所以我所要做的就是填写注释块。

我已经找到了一种[解决方法](https://stackoverflow.com/questions/6419606/intellij-idea-new-template)（将文件扩展名设置为**txt**），以便模板能够创建文件。但是，我仍然必须将文件名指定为 package-info，然后在完成后将其重命名为`package-info.txt`to `package-info.java`。

由于它们都将被命名`package-info`，我想将其设置为模板的一部分或默认值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:16:07.060

恐怕在实现[IDEABKL-5038](http://youtrack.jetbrains.com/issue/IDEABKL-5038)或[IDEA-](http://youtrack.jetbrains.com/issue/IDEA-17910) 17910 之前这是不可能的，因为 Java 文件模板的处理方式不同。

# javascript - 在提交表单时调用两个函数

> ID：12753625
> 
> 赞同：0
> 
> 时间：2012-10-05T20:30:49.507
> 
> 标签：javascript, ruby-on-rails-3, client-side, jquery-events, client-side-validation

我在 Rails 应用程序中使用 client_side_validations gem 进行表单验证，它在提交时为表单添加了一些功能来进行验证，我需要自己执行自定义验证，这超出了 client_side_validations gem 的功能，所以当我添加它使用`form.submit = function`它有效，两个验证都被调用。但是我不明白如何决定提交或不提交表单，如果两个函数都返回 false 那么它应该提交，但看起来即使其中一个返回 true 表单也无需等待即可提交对于另一个返回它的值，我该如何处理这种情况，我不能将它变成一个函数，因为这意味着将我的代码放入我永远不想做的 client_side_validations JavaScript 文件中？

任何想法和帮助表示赞赏。

这是我的自定义验证代码供参考：

```
 $('#new_business').submit ->
    that = $('#business_referrer_code')
    if(that.attr("validated") == "true")
      return true
    else
      code = $('#business_referrer_code')
      $.ajax '/representatives/validate_code',
        type: 'GET'
        dataType: 'json'
        data: "code=#{code.val()}"
        success: (data, textStatus, jqXHR) ->
          if(data.error)
            that.after("<label class='message'> Invalid Reference Code</label>")
          else
            that.attr("validated", true)
            that.submit()
      false
    true 
```

由 client_side_validations 自动生成的其他代码是我无法更改的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T11:05:00.810

这是您可以尝试的解决方案：

```
onsubmit="return validateName() && validatePhone() && validateAddress() && validateEmail()" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-05T20:51:39.927

如果您使用一些客户端参数，您可以执行以下操作：

```
<script type="text/javascript">
    function checkValues()
    {
        var value1 = functionGetValue1Value();
        var value2 = functionGetValue2Value();

        if (value1 == True && value2 == True)
        {
            completeSubmit();
        }
    }

    function completeSubmit()
    {
        // create a (post) request to some destination.
    }
</script>
<form action="javascript:checkValues();">
    <submit value="submit" />
</form> 
```

您还可以将客户端变量 (?) 传递给服务器并在服务器上检查它们。

如果你这样做，那么在网络上嗅探的人可能会获取这些变量并劫持会话或类似的东西。但它比用户可以编辑js代码并通过的纯客户端验证要好。

# ruby - 外部文件中的 Sinatra 助手给出 LoadError

> ID：12753630
> 
> 赞同：1
> 
> 时间：2012-10-05T20:31:35.850
> 
> 标签：ruby, sinatra

我正在尝试添加一个帮助程序以将 mongo db 连接到我的模块化 Sinatra 应用程序

当我`foreman start`在控制台中输入时，我得到：

```
/home/sunny/Programs/landing_pages/app.rb:17:in `block in <class:LandingPages>': undefined local variable or method `connect' for LandingPages:Class (NameError) 
```

我的`app.rb`文件如下所示：

```
require 'sinatra/base' 
require 'sinatra/partial'
require 'sinatra/db_helper'
require 'bundler/setup'
require 'mongo'

class LandingPages < Sinatra::Base
  helpers Sinatra::DbHelper

  configure do
    $collection = connect
  end 
end 
```

我的`./lib/sinatra/db_helper.rb`样子是这样的：

```
require 'sinatra/base'

module Sinatra
  module DbHelper
    def connect
      conn = Mongo::Connection.new("localhost")
      db = conn.db("leads")
      db.collection("laws")
    end 
  end 

  helpers DbHelper
end 
```

我的`config.ru`样子是这样的：

```
require './app'

run LandingPages 
```

我以为我正确地遵循了以下说明：

[http://www.sinatrarb.com/extensions.html](http://www.sinatrarb.com/extensions.html)

但我不完全确定。我不是在做一个 gem，而只是一个 sinatra 应用程序，所以我的目录层次结构可能不正确。我没有 rake 文件或 gem 规范。我需要它们吗？

一些谷歌搜索也发现了这一点：

[外部文件中的 sinatra 助手](https://stackoverflow.com/questions/6916626/sinatra-helper-in-external-file)

Dave Sag 完美地回答了我的问题，但我无法让它发挥作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:16:11.747

这是因为`helpers`在 sinatra 应用程序实例上通过 is 创建的方法的范围，因为它`include`在引擎盖下调用了 ruby​​。所以这会起作用：

```
get '/some/route' do
  db = connect
  # do something else ...
end 
```

但是 configure 块有一个类范围，因此它可以用于配置整个应用程序。因此，要使其工作，您可以将方法定义为：

```
module Sinatra
  module DbHelper
    def self.connect
      conn = Mongo::Connection.new("localhost")
      db = conn.db("leads")
      db.collection("laws")
    end 
  end 
end 
```

然后可以通过: `$collection = Sinatra::DbHelper.connect`或者更受欢迎的方式调用它，您可以调用`register`而不是`helpers`. `register`在后台调用`extend`，所以你最终得到了类级别的方法（如果你扩展了一个类，无论如何）。然后，您可以像这样制作配置块：

```
configure do |app|
  $collection = app.connect
end 
```

您也可以`registered`在 DbHelpers 模块上的方法中完成所有这些操作。请参阅文档中的示例以了解其工作原理。

# android - 无法获取谷歌地图 api 密钥

> ID：12753632
> 
> 赞同：0
> 
> 时间：2012-10-05T20:31:36.633
> 
> 标签：android, google-maps

我有 Windows 7，似乎我无法获得 api 密钥！我已经尝试了很多！

我打开cmd并输入：

```
 keytool -list -alias androiddebugkey -keystore D:\avd\.android\debug.keystore -storepass android -keypass android 
```

然而它对我说：

> 'keytool' 不是内部或外部命令、可运行程序或批处理文件。

我也试过这样：

```
"C:\Program Files\Java\jdk1.7.0_07\bin\java.exe" keytool -list -alias androiddebugkey -keystore D:\avd\.android\debug.keystore -storepass android -keypass android 
```

它说：

```
Could not find or load main class keytool 
```

**希望有人可以帮助我我非常渴望答案！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:38:16.810

尝试这个

```
C:\Program Files\Java\jdk1.7.0_07\bin\keytool -v -list -alias androiddebugkey -keystore D:\avd\.android\debug.keystore -storepass android -keypass android 
```

或者

只需将 debug.keystore 文件复制到与 keytool 相同的文件夹并在命令提示符下执行以下命令

```
keytool -v -list -alias androiddebugkey -keystore D:\avd\.android\debug.keystore -storepass android -keypass android 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:33:10.733

美元符号不是您需要粘贴到终端的一部分。你应该从`keytool`前进开始。在示例中，美元符号显示提示符的开头（这是它在 Unix/Mac 终端上的外观）。

`keytool`是一个可执行文件，它是 Java SDK 的一部分。bin 文件的位置必须添加到终端的路径中，或者您必须使用文件的完整路径运行它。通常，在 Windows 上，Java 二进制文件位于`C:\Program Files\Java\jdk1.7.0_07\bin`或类似的位置。在这种情况下，您的第二次猜测很接近，但`keytool`不是您传递给的命令`java.exe`……它本身是同一目录中的可执行文件。

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-21T12:57:28.533

这些是对我有用的命令提示符的步骤：

> cd C:\Program Files\Java\jdk1.8.0_05\bin keytool -list -alias androiddebugkey -keystore C:\Users\ {用户名}.android\debug.keystore -storepass android -keypass android

# xss - XSS 持久性漏洞

> ID：12753633
> 
> 赞同：1
> 
> 时间：2012-10-05T20:31:38.513
> 
> 标签：xss, jdbctemplate

Fortify 扫描器/分析器建议 db 输出被污染，在下面的代码中标记 XSS 持久性漏洞。它甚至没有外部参数或连接！有什么建议吗？

提前致谢

```
public List<String> getExtensions() {
    return jdbcTemplate.query(
        "SELECT ext FROM document_type GROUP BY ext",
        new RowMapper<String>() {
            public String mapRow(ResultSet results, int rowNum) throws SQLException {
                return results.getString(1);                    
            }
        }
    );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T08:07:07.253

你确定你没有误解结果吗？这可能是加载 XSS（由其他一些 SQL 存储）的地方，但实际的 XSS 发生在将数据放入网页的地方。

# jquery - JQuery CreditCard 验证器扩展

> ID：12753640
> 
> 赞同：1
> 
> 时间：2012-10-05T20:32:26.287
> 
> 标签：jquery, jquery-plugins, jquery-validate

我正在使用 Jquery Validator 我的挑战是当用户更新他们的个人资料信息时。但不改变他们的 CC 。

在更新页面时，我只显示 4* ***** **** *1111

所以如果使用验证失败：（下面的代码片段）

```
$("#profile-form").validate({
      rules: {
             ccnum: { required: true, creditcard: true },
             exp_year: { ccDate: true},
             exp_month: { ccDate: true}
             } 
```

但是，如果用户输入一个新的 CC 号码，它会按照预期的方式进行操作。

所以我的问题是，如果用户想要更新其他内容并且保持 CC 卡不变，我该怎么办。

有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T02:10:45.720

如果元素的值已更改，我将编写一个调用信用卡验证方法的新规则：

```
$.validator.addMethod("creditcard-custom", function (value, element) {
    return this.optional(element) || 
        element.value === element.defaultValue ||
        $.validator.methods.creditcard.call(this, value, element);
}, $.validator.messages.creditcard); 
```

**用法**：

```
$("#myform").validate({
    rules: {
        ccnum: {
            required: true,
            'creditcard-custom': true
        },
        exp_year: {
            ccDate: true
        },
        exp_month: {
            ccDate: true
        }
    }
}); 
```

**示例：http:** [//jsfiddle.net/andrewwhitaker/kqczf/2/](http://jsfiddle.net/andrewwhitaker/kqczf/2/)

# java - 在 lucene 中搜索 UUID 不起作用

> ID：12753642
> 
> 赞同：3
> 
> 时间：2012-10-05T20:32:29.497
> 
> 标签：java, search, lucene

我有一个 UUID 字段，我以以下格式添加到我的文档中：372d325c-e01b-432f-98bd-bc4c949f15b8。但是，当我尝试通过 UUID 查询文档时，无论我如何尝试转义表达式，它都不会返回它们。例如：

```
+uuid:372d325c-e01b-432f-98bd-bc4c949f15b8
+uuid:"372d325c-e01b-432f-98bd-bc4c949f15b8"
+uuid:372d325c\-e01b\-432f\-98bd\-bc4c949f15b8
+uuid:(372d325c-e01b-432f-98bd-bc4c949f15b8)
+uuid:("372d325c-e01b-432f-98bd-bc4c949f15b8") 
```

甚至使用 TermQuery 完全跳过 QueryParser，如下所示：

```
new TermQuery(new Term("uuid", uuid.toString())) 
```

或者

```
new TermQuery(new Term("uuid", QueryParser.escape(uuid.toString()))) 
```

这些搜索都不会返回文档，但如果我搜索 UUID 的一部分，它将返回一个文档。例如，这些将返回一些东西：

```
+uuid:372d325c
+uuid:e01b
+uuid:432f 
```

我应该怎么做才能索引这些文档，以便我可以通过它们的 UUID 将它们拉回来？我考虑过重新格式化 UUID 以删除连字符，但我还没有实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T04:45:01.073

我让它工作的唯一方法是使用 WhitespaceAnalyzer 而不是 StandardAnalyzer。然后像这样使用 TermQuery：

```
IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_36, new WhitespaceAnalyzer(Version.LUCENE_36))
            .setOpenMode(IndexWriterConfig.OpenMode.CREATE_OR_APPEND);
writer = new IndexWriter( directory, config); 
```

然后搜索：

```
TopDocs docs = searcher.search(new TermQuery(new Term("uuid", uuid.toString())), 1); 
```

WhitespaceAnalyzer 阻止 Lucene 通过连字符拆分 UUID。另一种选择可能是消除 UUID 中的破折号，但使用 WhitespaceAnalyzer 对我的目的同样有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:23:48.053

根据[Lucene 查询语法规则](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html)，查询

```
+uuid:372d325c\-e01b\-432f\-98bd\-bc4c949f15b8 
```

应该管用。

我猜如果没有，那是因为`uuid`在将文档插入索引时没有填充该字段。你能确定这个字段到底插入了什么吗？您可以使用[Luke](http://www.getopt.org/luke/)爬取索引并查找为该`uuid`字段存储的实际值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-25T00:58:46.403

如果您计划将 UUID 字段作为查找键，则需要让 Lucene 将整个字段索引为单个字符串而不进行标记化。这是通过为您的 UUID 字段设置正确的 FieldType 来完成的。在 Lucene 4+ 中，您可以使用 StringField。

```
import java.io.IOException;
import java.util.UUID;
import junit.framework.Assert;
import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.document.StringField;
import org.apache.lucene.document.TextField;
import org.apache.lucene.index.DirectoryReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.IndexWriterConfig;
import org.apache.lucene.index.Term;
import org.apache.lucene.queryparser.classic.ParseException;
import org.apache.lucene.queryparser.classic.QueryParser;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.TopDocs;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.RAMDirectory;
import org.apache.lucene.util.Version;
import org.junit.Test;

/**
 * Using Lucene 4.7 on Java 7.
 */
public class LuceneUUIDFieldLookupTest {

    private Directory directory;
    private Analyzer analyzer;

    @Test
    public void testUsingUUIDAsLookupKey() throws IOException, ParseException {

        directory = new RAMDirectory();
        analyzer = new StandardAnalyzer(Version.LUCENE_47);

        UUID docUUID = UUID.randomUUID();
        String docContentText1 = "Stack Overflow is a question and answer site for professional and enthusiast programmers.";

        index(docUUID, docContentText1);

        QueryParser parser = new QueryParser(Version.LUCENE_47, MyIndexedFields.DOC_TEXT_FIELD.name(), analyzer);
        Query queryForProgrammer = parser.parse("programmers");

        IndexSearcher indexSearcher = getIndexSearcher();
        TopDocs hits = indexSearcher.search(queryForProgrammer, Integer.MAX_VALUE);
        Assert.assertTrue(hits.scoreDocs.length == 1);

        Integer internalDocId1 = hits.scoreDocs[0].doc;
        Document docRetrieved1 = indexSearcher.doc(internalDocId1);
        indexSearcher.getIndexReader().close();

        String docText1 = docRetrieved1.get(MyIndexedFields.DOC_TEXT_FIELD.name());
        Assert.assertEquals(docText1, docContentText1);

        String docContentText2 = "TechCrunch is a leading technology media property, dedicated to ... according to a new report from the Wall Street Journal confirmed by Google to TechCrunch.";
        reindex(docUUID, docContentText2);

        Query queryForTechCrunch = parser.parse("technology");
        indexSearcher = getIndexSearcher(); //you must reopen directory because the previous IndexSearcher only sees a snapshoted directory.
        hits = indexSearcher.search(queryForTechCrunch, Integer.MAX_VALUE);
        Assert.assertTrue(hits.scoreDocs.length == 1);

        Integer internalDocId2 = hits.scoreDocs[0].doc;
        Document docRetrieved2 = indexSearcher.doc(internalDocId2);
        indexSearcher.getIndexReader().close();

        String docText2 = docRetrieved2.get(MyIndexedFields.DOC_TEXT_FIELD.name());
        Assert.assertEquals(docText2, docContentText2);
    }

    private void reindex(UUID myUUID, String docContentText) throws IOException {
        try (IndexWriter indexWriter = new IndexWriter(directory, getIndexWriterConfig())) {
            Term term = new Term(MyIndexedFields.MY_UUID_FIELD.name(), myUUID.toString());
            indexWriter.updateDocument(term, buildDoc(myUUID, docContentText));
        }//auto-close
    }

    private void index(UUID myUUID, String docContentText) throws IOException {
        try (IndexWriter indexWriter = new IndexWriter(directory, getIndexWriterConfig())) {
            indexWriter.addDocument(buildDoc(myUUID, docContentText));
        }//auto-close
    }

    private IndexWriterConfig getIndexWriterConfig() {
        return new IndexWriterConfig(Version.LUCENE_47, analyzer).setOpenMode(IndexWriterConfig.OpenMode.CREATE_OR_APPEND);
    }

    private Document buildDoc(UUID myUUID, String docContentText) {
        Document doc = new Document();
        doc.add(new Field(
                MyIndexedFields.MY_UUID_FIELD.name(),
                myUUID.toString(),
                StringField.TYPE_STORED));//use TYPE_STORED if you want to read it back in search result.

        doc.add(new Field(
                MyIndexedFields.DOC_TEXT_FIELD.name(),
                docContentText,
                TextField.TYPE_STORED));

        return doc;
    }

    private IndexSearcher getIndexSearcher() throws IOException {
        DirectoryReader ireader = DirectoryReader.open(directory);
        IndexSearcher indexSearcher = new IndexSearcher(ireader);
        return indexSearcher;
    }

    enum MyIndexedFields {

        MY_UUID_FIELD,
        DOC_TEXT_FIELD
    }
} 
```

# iphone - 当 HxW 长度不是 2 的幂时，如何在 cocos2d 中重复背景？

> ID：12753643
> 
> 赞同：0
> 
> 时间：2012-10-05T20:32:28.670
> 
> 标签：iphone, ios, cocos2d-iphone

在尝试创建重复的平铺覆盖时，我发现了很多问题（比如[这个](https://stackoverflow.com/questions/6736759/repeating-background-in-cocos2d-has-black-edges)）提到 Cocos2d 中的重复图像必须具有是 2 的幂的高度和宽度尺寸。

这提出了两个问题。首先，为什么这是一个限制？其次，更重要的是，如何创建尺寸不是 2 次方的重复滚动图像？如果我有一个非常宽的背景（比如 4000 像素）并且我希望它在 X 轴上重复。在这种情况下我应该怎么做？我不敢相信“正确”的答案是在宽度上增加 96 个像素，并将图像的高度也增加到 4096。那是浪费字节！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:47:01.727

这个答案有很好的信息，说明为什么需要 2 个纹理的力量。

[为什么 iPhone 上的纹理图像需要二维的幂？](https://stackoverflow.com/questions/214608/why-do-images-for-textures-on-the-iphone-need-to-have-power-of-two-dimensions)

至于你的第二个问题，纹理不必是方形的，只是宽度和高度都必须是 2 的幂。所以你可以有一个 4096x128 重复的图像作为你的背景。还要记住，无论大小如何，纹理始终以两倍大小的未压缩幂存储在内存中。因此，宽度为 4000 的图像和宽度为 4096 的图像实际上使用相同数量的内存。

# java - Java - 表达式必须是数组类型，但它解析为 Stack

> ID：12753645
> 
> 赞同：2
> 
> 时间：2012-10-05T20:32:32.583
> 
> 标签：java

我正在制作一个程序，我在其中声明了一个堆栈并将其命名为“单词”。我使用了这段代码，如下所示：

```
Stack <String> words = new Stack<String>(); 
```

但是当我尝试使用此代码对其中的单词进行洗牌时，会出现一个关于它是堆栈的错误：

```
Collections.shuffle(words);
int mistakes = 0;
final String CORRECT_WORD= words[0]; 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T20:36:20.410

如果您需要来自 的第一个值`words`，只需使用`pop()`：

```
final String CORRECT_WORD = words.pop(); 
```

或`Vector`的`elementAt(0)`。

```
final String CORRECT_WORD = words.elementAt(0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T20:35:34.000

```
final String CORRECT_WORD= words[0]; 
```

Java 集合不像 C++ 等价物那样支持数组语法。相反，您必须使用 API 中的方法。在这种情况下，您需要使用`[Stack.pop()][1]`：

```
final String CORRECT_WORD= words.pop(); 
```

[Java API 文档](http://docs.oracle.com/javase/7/docs/api/)是一个非常有用的工具，它将告诉您每个接口和类可以使用哪些方法。由于您使用的是 Stack 类，因此您当然应该熟悉[Stack 的文档](http://docs.oracle.com/javase/7/docs/api/java/util/Stack.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T20:37:00.150

堆栈设计为只允许您访问添加的最后一个元素（即它是 LIFO，后进先出），这使得洗牌成为问题。

如果您想打乱单词，请将它们放入列表（例如 ArrayList），打乱它们，然后在打乱后将它们放入堆栈或队列中。

# javascript - javascript比较危机

> ID：12753646
> 
> 赞同：4
> 
> 时间：2012-10-05T20:32:32.977
> 
> 标签：javascript, comparison

我遇到以下情况，无法理解原因，谁能解释一下？

```
var foo = [0];
console.log(foo == !foo); // true 
console.log(foo == foo);  // true 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T20:35:17.920

第二个比较很容易解释：`foo`等于自身。

然而，第一个有点棘手：`foo`它是一个数组，它是一个对象，`true`当[被强制为 boolean](http://ecma-international.org/ecma-262/5.1/#sec-9)时，它的计算结果为。`!foo`也是如此`false`。但是`foo`左侧的比较没有被转换为布尔值。在相等比较期间，两个操作数实际上都转换为数字。这是它的评估方式：

```
[0] == false
[0] == 0
"0" == 0
0 == 0
true 
```

根据[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)，与相等运算符的比较`==`：

> 如果两个操作数的类型不同，JavaScript 会转换操作数，然后应用严格比较。如果任一操作数是数字或布尔值，则尽可能将操作数转换为数字

我知道这个解释听起来很肤浅。它实际上比这要复杂得多，但基本步骤是我上面列出的那些。您可以查看 ECMA-262 规范的详细信息，尤其是第[9](http://ecma-international.org/ecma-262/5.1/#sec-9)节和第[11.9](http://ecma-international.org/ecma-262/5.1/#sec-11.9)节。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-05T20:41:02.430

您应该使用 "===" 和 "!==" 而不是 "==" 和 "!=" 更多解释： [JavaScript 比较中应该使用哪个等号运算符 (== vs ===)？](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)

[http://net.tutsplus.com/tutorials/javascript-ajax/the-10-javascript-mistakes-youre-making/](http://net.tutsplus.com/tutorials/javascript-ajax/the-10-javascript-mistakes-youre-making/)

# oracle - 如何在同一张表上查询和执行触发器

> ID：12753647
> 
> 赞同：0
> 
> 时间：2012-10-05T20:32:35.147
> 
> 标签：oracle, triggers

希望有人可以帮助解决这个问题。我是触发器的新手，我正在尝试创建一个触发器来检查正在修改的记录是否具有特定值。

例如，我有一个名为 Filing 的表，它有一个 Filing_id 和一个 Filing_status，我想防止有人更新或删除该表中具有 Filing_status="FILED" 的任何记录。所以如果我有以下

```
Filing_id    Filing_status    Val
---------    -------------    ---
0             Filed           X 
```

如果有人试图修改 Val 触发器应该停止它我创建了以下触发器：

```
CREATE or replace TRIGGER TRG_PREV_FILING
  BEFORE DELETE or UPDATE
  ON PF.FILING
  FOR EACH ROW
   declare
     rowcnt number;
   BEGIN
     SELECT COUNT(filing_id) INTO rowcnt FROM PF.FILING 
      where status = 'FILED'
       and  filing_id = :new.filing_id;
     if (rowcnt > 0)
     then
      raise_application_error (-20100, 'You can not delete Or Update initial record');
     end if;
   END; 
```

我面临的问题是我得到：ORA-04091 这是“表归档正在变异，触发器/函数可能看不到它”

所以基本上我不能在我正在执行触发器的同一张表上查询？这是我的问题吗？有人知道解决这个问题吗？

我很感激任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:43:57.180

您不必查询正在触发的表触发器就可以进行这种检查。您可以使用 获取正在修改的列的值`:old`。这是一个例子：

```
SQL> create table filing(
  2    status varchar2(31),
  3    val    number
  4  );

Table created

SQL> create or replace trigger TRG_FILING before delete or update on FILING
  2  for each row
  3  begin
  4    if lower(:old.status) = 'filed'
  5    then
  6      raise_application_error(-20000, 'You cannot delete or modify this record');
  7    end if;
  8  end;

SQL> /

Trigger created

SQL> insert into FILING values('FILED', null);

1 row inserted

SQL> insert into filing values('OK', 1);

1 row inserted

SQL> commit;

Commit complete

SQL> select *
  2    from filing;

STATUS                                 VAL
------------------------------- ----------
FILED                           
OK                                       1 

SQL> delete
  2    from filing
  3   where val is null;

ORA-20000: You cannot delete or modify this record
ORA-06512: at "HR.TRG_FILING", line 4
ORA-04088: error during execution of trigger 'HR.TRG_FILING' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:14:46.730

基本点是您应该以触发器根据更新/删除的行进行验证的方式设计数据库。如果您有几行相同的行，`filing_id`那么您可能会使您的数据库设计工作过度。也许你真的只检查自己的表，在这种情况下你可以使用`:old`. 但是当您有几行要检查时（我假设这是因为您进行了计数），那么您必须使用两个表。这是一个建议。

```
create table filing_status (filing_id number, status varchar2(10));
create table filing_content (filing_id number, content_id number, content varchar2(200));
CREATE or replace TRIGGER TRG_PREV_FILING
  BEFORE DELETE or UPDATE
  ON FILING_content
  FOR EACH ROW
   declare
     rowcnt number;
   BEGIN
     SELECT COUNT(filing_id) INTO rowcnt FROM FILING_status 
      where status = 'FILED'
       and  filing_id = :new.filing_id;
     if (rowcnt > 0)
     then
      raise_application_error (-20100, 'You can not delete Or update filed record');
     end if;
   END;
/
insert into filing_status values (1, 'FILING');
insert into filing_content values (1, 1, 'foo');
insert into filing_content values (1, 2, 'bar');
insert into filing_status values (1, 'FILED');
update filing_content set content = 'bahr' where filing_id = 1 and content_id = 2;

ERROR at line 1:
ORA-20100: You can not delete Or update filed record
ORA-06512: at "DEMO.TRG_PREV_FILING", line 9
ORA-04088: error during execution of trigger 'DEMO.TRG_PREV_FILING' 
```

# plesk - 在删除操作期间破坏了 Plesk

> ID：12753648
> 
> 赞同：0
> 
> 时间：2012-10-05T20:32:38.933
> 
> 标签：plesk

我的服务器磁盘空间不足，我在 SSH 中运行了以下命令：

```
sudo find / -type f -size +10000k | xargs rm -Rf 
```

我本来打算将我的文件夹范围磨练到我的邮件目录，但可惜没有这样做就按了 Enter。

我很确定我一定是删除了 Plesk 中的一些重要内容，因为它现在会引发 500 Internal Server Error。我检查了错误日志，它反复抛出这个：

```
(mod_fastcgi.c.3811) pid  8181 5 not found: No child processes 
```

我的主机（Media Temple）提供了保存服务器快照并将其重置为默认值的功能，但如果可能的话，我真的很想避免这种情况。我的生产网站 + 数据库都是 A-Okay。Plesk 是我唯一能看到的是抛出错误。

这个问题还有其他解决方案吗？我正在考虑重新安装 Plesk，但我不确定这会对我的电子邮件帐户和 mysql 数据库产生什么影响。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T05:35:33.953

我认为最安全的方法是从 MediaTemple 订购新的 Plesk 服务器，使用 Plesk MIgration & Transfer 工具将您的站点移动到新服务器，然后放弃原来的服务器。这样，在您进行新的设置和验证之前，您的原始服务器不会受到影响。

恐怕你已经杀死了 Plesk 管理数据库......

# c++ - 创建类的可变参数包装器

> ID：12753651
> 
> 赞同：4
> 
> 时间：2012-10-05T20:33:01.180
> 
> 标签：c++, templates, lambda, c++11, g++

我有模板类`Reader`

```
template<typename T>
class Reader{
    typedef T type;
}; 
```

特殊实现（派生类）具有带有签名的方法

`T read(IStream&, any number of arguments, zero possible)`

即类 `IntegerReader`公共功能：

```
template <typename T>
class IntegerReader : public Reader<T>{
public:
    T read(IStream& stream);
    T read(IStream& stream, T min, T max);
    T read(IStream& stream, T min, T max, std::string name);
} 
```

现在我想创建一个包装器，这将允许我创建另一个阅读器，并使用参数调用一些阅读器。

我试过这个：

```
template <typename T, typename... Args>
class ParametrizedReader : public Reader<typename T::type> {
    T reader;
    Args... args;
    ParametrizedReader(T reader, Args... args):reader(reader), args(args){
    }

    typename T::type read(IStream& stream){
        return reader.read(args..., stream);
    }
};
testlib/readerWrapper.hpp:7:6: error: expected unqualified-id before ‘...’ token
testlib/readerWrapper.hpp: In constructor ‘ParametrizedReader<T, Args>::ParametrizedReader(T, Args ...)’:
testlib/readerWrapper.hpp:8:61: error: class ‘ParametrizedReader<T, Args>’ does not have any field named ‘args’
testlib/readerWrapper.hpp: In member function ‘typename T::type ParametrizedReader<T, Args>::read(IStream&)’:
testlib/readerWrapper.hpp:12:22: error: ‘args’ was not declared in this scope 
```

这个：

```
template <typename T, typename... Args>
class ParametrizedReader : public Reader<typename T::type> {
    std::function<T()> lambda;
    ParametrizedReader(T reader, Args... args){
        lambda = [=](IStream& stream){
            reader.read(stream, args...);
        };
    }

    typename T::type read(IStream& stream){
        return lambda(stream);
    }
};

testlib/readerWrapper.hpp:9:24: error: parameter packs not expanded with ‘...’:
testlib/readerWrapper.hpp:9:24: note:         ‘args’
testlib/readerWrapper.hpp:9:28: error: expansion pattern ‘args’ contains no argument packs 
```

和这个：

```
template <typename T, typename... Args>
class ParametrizedReader : public Reader<typename T::type> {
    std::function<T()> lambda;
    ParametrizedReader(T reader, Args... args){
        lambda = [reader, args...](IStream& stream){
            reader.read(stream, args...);
        };
    }

    typename T::type read(IStream& stream){
        return lambda(stream);
    }
};

testlib/readerWrapper.hpp:8:25: error: expected ‘,’ before ‘...’ token
testlib/readerWrapper.hpp:8:25: error: expected identifier before ‘...’ token
testlib/readerWrapper.hpp:8:28: error: parameter packs not expanded with ‘...’:
testlib/readerWrapper.hpp:8:28: note:         ‘args’ 
```

g++-4.7给出的编译错误

虽然我不确定第一个示例是否正确并且应该编译，但我相信第二个和第三个应该。

我发现[了这个错误](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=41933)，似乎没有修复。

有解决方法吗，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T21:55:57.460

您可以通过将参数绑定到 lambda 而不是捕获它们来解决此问题。

```
ParametrizedReader(T reader, Args... args){
    lambda = std::bind(
        [=](IStream& stream, Args... as){
            reader.read(stream, as...);
        }, args...);
} 
```

尽管您可能想按照@Alexandre 所说的那样做，而不是在确切的参数类型上参数化类模板：

```
template <typename T>
class ParametrizedReader : public Reader<typename T::type> {
    std::function<T()> lambda;
    template<typename... Args>
    ParametrizedReader(T reader, Args... args){
        lambda = std::bind(
            [=](IStream& stream, Args... as){
                reader.read(stream, as...);
            }, args...);
    }
    // ...
}; 
```

（注：未经测试。）

也可能有效的是，只需`std::bind`放入第二个片段并尝试您的第二个或第三个解决方案，这次使用可变参数函数模板。也许它有效，谁知道呢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T20:40:28.430

这让我想起了一个已知的错误：[http](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=41933) : //gcc.gnu.org/bugzilla/show_bug.cgi?id=41933 它至少影响 gcc 4.6.2 和 4.7.x 系列。

Clang 3.1 在处理 lambda 捕获中的可变参数时没有问题。

也许你可以走老式的路线并将这些东西存储到一个元组中：http: [//liveworkspace.org/code/7d4347021aaf004489591e78654f0233](http://liveworkspace.org/code/7d4347021aaf004489591e78654f0233)

```
#include <tuple>
#include <vector>
#include <string>

////////////////////////////////////
template<int ...>         struct seq                         {                         }; 
template<int N, int ...S> struct gens : gens<N-1, N-1, S...> {                         }; 
template<int ...S>        struct gens<0, S...>               { typedef seq<S...> type; }; 

////////////////////////////////////

template<typename T>
struct Reader
{
    typedef T type;
};

//Special implementations (derrived classes) have methods with signature
struct IStream {};

template <typename T>
class IntegerReader : public Reader<T>
{
public:
    T read(IStream& stream);
    T read(IStream& stream, T min, T max);
    T read(IStream& stream, T min, T max, std::string name);
};

template <typename T, typename... Args>
class ParametrizedReader : public Reader<typename T::type>
{
    T _reader;
    std::tuple<Args...> _args;
public:
    ParametrizedReader(T reader, Args... args)
        : _reader(reader), _args(std::forward<Args>(args)...)
    {
    }

    typename T::type read(IStream& stream)
    {
        callFunc(typename gens<sizeof...(Args)>::type());
    }

    template<int ...S>
        void callFunc(seq<S...>)
        {
            func(std::get<S>(_args) ...);
        }
};

template <typename T, typename... Args>
ParametrizedReader<T, Args...> make_parameterized_reader(T reader, Args... args)
{
    return ParametrizedReader<T, Args...>(reader, std::forward<Args>(args)...);
}

int main(int argc, const char *argv[])
{
    Reader<char> reader;
    auto pr = make_parameterized_reader(reader, "stuff", 3.14, std::string("you can think of"), std::vector<int> { 1,2,3 });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:43:00.503

我会从类模板中删除参数包，使用完美转发和 std::bind。

```
template <typename T>
class ParametrizedReader : public Reader<typename T::type> 
{
    std::function<T()> lambda;

    template <typename... Args>
    ParametrizedReader(T reader, Args&&... args)
    {
        using namespace std::placeholders;

        lambda = std::bind(
            std::mem_fn(&Reader::read),
            _1,
            std::forward<Args>(args)...);
    }

    typename T::type read(IStream& stream)
    {
        return lambda(stream);
    }
}; 
```

# ios - 删除 iOS 设置包中的首选项

> ID：12753652
> 
> 赞同：0
> 
> 时间：2012-10-05T20:33:02.980
> 
> 标签：ios, xcode, settings.bundle

这是我第一次尝试将 Settings.bundle 添加到我的应用程序中，我的 XCode 版本是 4.5。添加一个新的 Settings.bundle 后，我点击它的 Root.plist，我可以看到 Preference Items 中已经有 4 个项目。然而，虽然我可以添加新的 Preference 项目，但我无法删除现有的 4。我也尝试完全删除 Preference Items，但是当我将其添加回来时，它带有更多的预设项目。

还有其他人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T02:46:23.257

您可以选择要删除的项目，然后按 DELETE。

您还需要确保在执行此操作后进行 CLEAN BUILD，因为可能会留下残留文件。

从未听说过或经历过旧/现有 plist 的待处理项目。

# sql-server-2008 - 新的 LightSwitch 项目

> ID：12753654
> 
> 赞同：1
> 
> 时间：2012-10-05T20:33:07.330
> 
> 标签：sql-server-2008, permissions, visual-studio-lightswitch

我已经使用 Lightswitch 创建的 SQL 数据库启动了一个新的 Lightswitch 项目。当我发布和安装新的桌面项目时，一切都很好，在发布、安装或加载新应用程序时没有错误。出现第一个也是唯一一个屏幕。我可以点击不同的记录，数据就会显示出来，我可以编辑数据。但是，如果我使用列表搜索功能，所有字段都会变成红色 x'd。
原始应用程序按其应有的方式工作。我尝试过使用和不使用 IIS：使用 (local) 和 (IIS) 发布并使用两种方法获得相同的结果。新应用程序的连接字符串选项与原始应用程序不同，因为未提供系统管理员和系统用户连接字符串，因此很难知道我是否复制了工作设置。在 Management Studio 中，我对安全性、权限、角色和登录选择充满了兴趣。很明显这是权限级别的问题，但我不知道从哪里开始解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T02:56:42.553

您正在显示的表格中有多少个字符串属性？是否有大量不需要包含在搜索中的属性？

此论坛帖子讨论了与您遇到的相同问题：[搜索返回错误“无法加载数据”并带有红色 X](http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/c8acb1d1-49de-4231-908c-962a49117de4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:38:32.893

您是否检查过您的连接字符串设置？当我在开发中使用 SQL Express 并使用 SQL Server Enterprise 作为我的目标数据库服务器时，我确实遇到了这些问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T22:57:55.173

请参阅：诊断部署的 3 层 LightSwitch 应用程序中的问题 [http://blogs.msdn.com/b/lightswitch/archive/2011/09/20/diagnosing-problems-in-a-deployed-lightswitch-application-eric- erhardt.aspx](http://blogs.msdn.com/b/lightswitch/archive/2011/09/20/diagnosing-problems-in-a-deployed-lightswitch-application-eric-erhardt.aspx)

# c - 在C中的文件中存储和恢复结构

> ID：12753659
> 
> 赞同：3
> 
> 时间：2012-10-05T20:33:46.417
> 
> 标签：c, file, struct, restore

我需要将一个结构存储在一个文件中，然后将其读回以返回它。我会尝试将其写入文件，如下所示：

```
void lld_tpWriteCalibration(struct cal cal) {
    FIL fdst;      /* file objects */
   UINT bw;        /* File write count */

    /* Create destination file on the drive 0 */
    wf_open(&fdst, "0:calibration.txt", FA_CREATE_ALWAYS | FA_WRITE);
    wf_write(&fdst, cal, sizeof(cal), &bw);

    wf_close(&fdst);
} 
```

那行得通吗？我怎样才能读回它并从这个函数中返回它？

```
struct cal lld_tpReadCalibration(void) {

} 
```

结构是：

```
 struct cal {
       float xm; 
       float ym; 
       float xn; 
       float yn; 
   }; 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T20:43:30.237

您可以以与存储结构相同的方式检索结构。

```
read(&fdst, &cal, sizeof(cal)); 
```

[但是你必须小心，因为字节序](http://en.wikipedia.org/wiki/Endianness)问题，你不能在每个架构上都这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T20:50:16.017

如果您只尝试在与写入文件相同类型的机器上读取文件，那么您将可以使用该结构和写入/读取技术。像这样写入的数据不能在不同类型的机器之间可靠地移植。

# mercurial - Mercurial 移植可以处理重命名的文件吗

> ID：12753660
> 
> 赞同：6
> 
> 时间：2012-10-05T20:33:46.640
> 
> 标签：mercurial

我想用来`hg graft`将变更集从一个分支复制到另一个分支。

但是，在变更集中修改的文件已`hg rename`在源分支中重命名（使用 ） - 在我要移植的变更集之前。

当我尝试时，我得到：

```
scanning for duplicate grafts
grafting revision 3
  searching for copies back to rev 2
  unmatched files in local:
   f1.txt
resolving manifests
 overwrite: False, partial: False
 ancestor: c06936303423, local: cfeaa3003c57+, remote: e3f2a201d1e2
remote changed f1a.txt which local deleted
use (c)hanged version or leave (d)eleted? c 
```

(c) 和 (d) 似乎都不是正确的选择。

文件 f1a.txt 从源分支中的 f1.txt 重命名。f1a.txt 甚至从未存在于目标分支中。

这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T18:47:21.543

This is an excellent question. It looks like it is not possible. I replayed your scenario and also tried *transplant* and *rebase* -- with the same effect.

I guess the basic reason why this does not work is because a graft explicitly only picks the changes of one revision, i.e. past changes (including file renames) explicitly are not considered (**update:** could be a bug or missing feature as well, see @Soulman's answer).

You did not ask for, but here's a work around ..

1.  Get a patch of the changeset you want to graft:

    ```
    $ hg export --git -r <rev-to-graft> > my.patch 
    ```

2.  In this patch, replace `f1a.txt` with `f1.txt`, so you get:

    ```
    ...
    diff --git a/f1.txt b/f1.txt
    --- a/f1.txt
    +++ b/f1.txt
    @@ -1,1 +1,1 @@
    ... 
    ```

    Sed is your friend here: `sed -i my.patch -e "s,\([ab]\)/f1a\.txt,\1/f1.txt,g"`

3.  Import the edited patch to the target revision:

    ```
    $ hg up <target-rev>
    $ hg import my.patch 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-26T13:04:27.677

我认为这只是一个有望修复的错误。有一张票：[当文件在祖先版本中移动时，嫁接失败](https://bz.mercurial-scm.org/show_bug.cgi?id=4028)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T18:02:33.137

重命名是删除+添加+注释，将旧文件的历史视为新文件的历史。在进行移植时（即通过复制相同的更改而不创建关系而不是合并来创建新的更改集），您必须以某种方式合并更改集的更改。在这种情况下，您只能移植“添加”操作或决定不添加文件（将其删除）。我很遗憾地说，在这种情况下，根本不可能嫁接重命名，因为如果另一个分支没有那个文件，那是没有意义的。

对不起，如果我没有正确理解您所处的情况。如果是这样，请提供一个例子。（很少有命令可以设置一个虚拟仓库，它可以重现您的案例）。

# asp.net - Sqlite3 在网络服务器上是只读的？

> ID：12753665
> 
> 赞同：1
> 
> 时间：2012-10-05T20:34:31.603
> 
> 标签：asp.net, sqlite, database-connection

我在 Visual Studio 上安装 sqlite db manager 并创建我的数据库。我将此数据库文件添加到“app_data > myDB”（无分机）

它在使用调试模式的 Visual Studio 上完美运行。但是当我将此项目发布到 Web 时，我的数据完美地从 db 获取，我的更新按钮也在工作并说它完成了！

不幸的是，当我刷新页面返回我的旧数据时，它没有改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:59:35.187

我解决了，您还必须在 db 文件夹上设置权限，sqlite 版本必须在您的连接字符串中定义：像这样：

```
data source=|path|\MYSQLITE_DB; Version=3; 
```

# php - $.ajax 将数组作为 Json 发送到 PHP。$_POST = 空

> ID：12753667
> 
> 赞同：0
> 
> 时间：2012-10-05T20:34:39.843
> 
> 标签：php, javascript, jquery, ajax, json

好的，我花了很多时间在这上面，我不明白我做错了什么。

**在 PHP 文件中获取数据似乎是不可能的**。

1.  首先，我多次调用“复制”来填充“结果”数组。
2.  然后，我调用该`$.ajax`方法
3.  在 process.php $_POST 是空的

*--> 在 PHP`$x`中，`$y`或者`$time`不为空但不为空。*

> **编辑2：**
> 
> 好的 - 使用 json_last_error() 我看到这是我的 json，它是“语法错误：格式错误”。但我不知道如何编码它比我正在做的更好。
> 
> **所以我通过在 $_POST 上添加一个 stripslashes() 来作弊。**
> 
> [{\"x\":104,\"y\":218,\"时间戳\":1349476537434},{\"x\":90,\"y\":202,\"时间戳\": 1349476537469},{\"x\":82,\"y\":192,\"时间戳\":1349476537487},{\"x\":71,\"y\":177,\"时间戳\ ":1349476537514},{\"x\":68,\"y\":174,\"时间戳\":1349476537568},{\"x\":68,\"y\":173,\"时间戳\":1349476537801},{\"x\":68,\"y\":174,\"时间戳\":1349476538478},{\"x\":68,\"y\":175, \"时间戳\":1349476538512},{\"x\":68,\"y\":175,\"时间戳\":1349476538579},{\"x\":69,\"y\": 175,\"时间戳\":1349476538678}]
> 
> **编辑1：**
> 
> **发布的数据似乎很好（往下看），我完成了“成功功能”。**
> 
> [{"x":529,"y":97,"time":1349469608703},{"x":385,"y":331,"time":1349469608720},.....]

**JS 端 - index.php：**

```
<script src="jquery.js"></script>    

results = new Array();

function copy(x, y, time) {
   var o = { 'x': x, 'y': y, 'time': time };
   results.push(o);
}

function save() {
    var encoded_results = JSON.stringify(results);

    $.ajax({
        url: "process.php",
        type: 'POST',
        data: {
            "results" : encoded_results 
        },

        success: function(data, status, xhr) {
           alert(data);
           console.log(data);
           console.log(xhr);
        },      
        error: function (xhr, ajaxOptions, thrownError) {
            alert(xhr.status);
            alert(thrownError);
        }
    });
} 
```

**PHP 端 - process.php：**

```
if(isset($_POST["results"]))
{
    $result_json = $_POST["results"];
    $JSONArray  = json_decode($result_json, true);

    if($JSONArray !== null)
    { 
        $x = $JSONArray["x"];
        $y = $JSONArray["y"];
        $time = $JSONArray["time"]
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:45:25.250

`$JSONArray`是一个关联数组的数组，因此要访问它使用的第一个元素 f `$JSONArray[0]['x]`，`$JSONArray[0]['y']`而不是`$JSONArray['x']`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:27:31.657

在 JavaScript 方面，您发布了一个对象数组 - x / y / 时间组合的列表。然而，PHP 端忽略了列表和对象部分：

```
$x = $JSONArray["x"]; 
```

对比

```
$x = $JSONArray[0]->x; 
```

所以总体上可能是一个循环：

```
foreach($JSONArray as $triple)
{
    $x=$triple->x;
    $y=$triple->y;
    $time=$triple->time;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:40:55.213

还要设置 dataType: 属性

`dataType : 'json'` 在你的 ajax 请求中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T20:43:55.843

我刚刚这样做了，这是我的 AJAX 语法：

```
$.ajax({
  type: "GET",
  url: "test2.php",
  data: { anarray : array1 },
  dataType: "json",
  success:function(result){  
  array1 = result;
  $.each(array1, function(x, valu){
    $('#arraycontent').hide().append(x + " " + valu + "<br>").fadeIn();
  })
    }            
    }); 
```

并且 PHP 文件简单推送了 2 个元素进行演示：

```
<?php 
$testArray = $_REQUEST['anarray'];

array_push($testArray, 'test', 'stuff');

echo json_encode($testArray);

?> 
```

# iphone - IPHONE 4.3.3 ImageIO： JPEG不是JPEG文件：以0xff 0xd9开头

> ID：12753669
> 
> 赞同：0
> 
> 时间：2012-10-05T20:34:45.807
> 
> 标签：iphone, objective-c, ios4, wifi, decode

我的项目：通过WIFI连接，SOCKET传输。当我收到图片数据时，错误信息：<code>ImageIO: <ERROR> JPEGNot a JPEG file: starts with 0xff 0xd9。</code>

```
-(void)decodeData:(char*)data length:(int)length {
        struct TVDATA *tvData=(struct TVDATA *)data;
        [jpgData appendBytes:(char*)tvData+8 length:length-8];

        if(tvData->m_frag_totle-1==tvData->m_frag_cur) {
            image = [[UIImage alloc] initWithData:jpgData];

            [self performSelectorOnMainThread:@selector(aa) withObject:nil waitUntilDone:!NO];

            jpgData.length=0;
    }

-(void)aa {
    if(imgView.image!=nil){
        [imgView.image release];
    }
    imgView.image=image;

    [scrollView setDisplayImage:image];

    if (videoflag==1) {
        [self performSelectorOnMainThread:@selector(writeVideo) withObject:nil waitUntilDone:!NO];
    }
} 
```

# mysql - 根据条件从另一个表中选择 SUM

> ID：12753670
> 
> 赞同：0
> 
> 时间：2012-10-05T20:34:48.867
> 
> 标签：mysql

数据库：`mysql`>`ver 5.0`

```
table 1: type_id (int), type
table 2: name_id, name, is_same_as = table2.name_id or NULL
table 3: id, table2.name_id, table1.type_id, value (float) 
```

我想对值求和，并计算`table 3`where中的值`table2.name_id`是相同的，并且还包括`id`where的值`is_same_is=name_id`。我想为 中`table3`的所有值选择所有数据`table2`。

如果我的问题不是很清楚，并且已经回答但我无法找到相关答案，请道歉。或者不完全知道要寻找什么。

```
[data]. table1
id | type
=========
1  | test1
2  | test2

[data].table2
name_id  |  name  | is_same_as
==============================
1        |  tb_1  | NULL
2        |  tb_2  | 1
3        |  tb_3  | NULL
4        |  tb_4  | 1

[data].table3
id    |   name_id  |  type_id | value
======================================
1     |   1        |  1       | 1.5
2     |   2        |  1       | 0.5
3     |   2        |  2       | 1.0

output:
name_id| type_id|SUM(value)
=======================================================
1      | 1      |2.0  < because in table2, is_same_as = 1
2      | 2      |1.0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:28:21.653

我认为以下内容可以满足您的要求：

```
select coalesce(t2.is_same_as, t2.name_id) as name_id, t3.type_id, sum(value)
from table_3 t3 join
     table_2 t2
     on t3.name_id = t2.name_id
group by coalesce(t2.is_same_as, t2.name_id), t3.type_id
order by 1, 2 
```

它在 上加入表`name_id`。但是，它会使用该`is_same_as`列（如果存在或`name_id`不存在）来汇总数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:30:29.650

这可能是你要找的：（我没有在 MySQL 中测试过，所以可能有错字）

```
with combined_names_tab (name_id, name_id_ref) as
(
select name_id, name_id from table2
union select t2a.name_id, t2b.name_id
  from table2 t2a 
  join table2 t2b 
    on (t2a.name_id = t2b.is_same_as)
)
select cnt.name_id, t3.type_id, sum(t3.value) sum_val
  from combined_names_tab cnt
  join table3 t3
    on ( cnt.name_id_ref = t3.name_id )
 group by cnt.name_id, t3.type_id
having sum(t3.value) / count(t3.value) >= 3 
```

以下是查询的作用：

首先，它创建“combined_names_tab”，它是您希望使用“is_same_as”列进行分组的所有 table2 行的连接来做出决定。我确保通过执行 UNION 来包含“父”行。

其次，一旦你有了上面的那些行，它就是一个简单的连接到 table3 的一个 GROUP BY 和一个 SUM。

注意： table1 是不必要的（我相信）。

让我知道这个是否奏效！

约翰...

# c# - 如何从数组中的子类调用正确的方法？

> ID：12753674
> 
> 赞同：0
> 
> 时间：2012-10-05T20:35:41.600
> 
> 标签：c#, asp.net, arrays, parent-child

我不确定这在 C# 中是否允许，但我很确定我以前用其他语言做过。

假设我有班级，`Parent`，其中有孩子`Child0`和`Child1`。我制作了一个类型数组`Parent`where `Array[0]`is of type`Child0`和`Array[1]`is of type `Child1`。在这种情况下，我如何调用孩子的方法？当我输入`Array[0].Method()`时，它会调用`Parent`Method 的版本。如何让它调用`Child0`方法的版本？这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T20:44:05.297

您只需在基类中将 Method 声明为 virtual：

```
public class Parent{
    public virtual void Method(){
    ...
    }
} 
```

并在继承类中覆盖它：

```
public class Child : Parent{
    public override void Method(){
        ...
    }
} 
```

请注意，如果您的 Parent 类中不需要“标准”实现，因为所有继承类都有自己的版本，您也可以将方法设置为抽象：

```
public class Parent{
    abstract public void Method();
} 
```

然后你没有选择，所有从 Parent 继承的类都必须提供 Method 的实现，否则你会遇到编译时错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T20:44:53.203

如果您创建父方法`virtual`，则可以覆盖子类中的基方法。

```
public class Human
{       
    // Virtual method 
    public virtual void Say()
    {
        Console.WriteLine("i am a human");
    }
}

public class Male: Human
{        
    // Override the virtual method 
    public override void Say()
    {
        Console.WriteLine("i am a male");
        base.Draw(); // --> This will access the Say() method from the 
       //parent class.           
    }
} 
```

将它们添加到数组中：（尽管我个人会使用 a `List<T>`）

```
 Human[] x = new Human[2];
 x[0] = new Human();
 x[1] = new Male(); 
```

打印结果：

```
 foreach (var i in x)
 {
    i.Say();
 } 
```

将打印出来

```
"i am a human" // --> (parent class implementation)    
"i am a male" // --> (child class implementation) 
```

# php - 按值对 Array 中的对象数组进行排序

> ID：12753680
> 
> 赞同：0
> 
> 时间：2012-10-05T20:36:26.347
> 
> 标签：php, sorting, object

基本上我试图在一个数组中对一个复杂的对象数组进行排序：

```
Array
(
    [190515] => stdClass Object
        (
            [nid] => 15740686
            [venue_nid] => 190515
            [occurrences] => 1
            [this_weeks_occurrences] => 0
            [end_date] => 1350853200
            [end_date_end_time] => 1350853200
            [is_ongoing] => 0
            [title] => Wentz Concert Hall and Fine Arts Center
            [times] => Array
                (
                    [0] => stdClass Object
                        (
                            [nid] => 15740686
                            [venue_nid] => 190515
                            [venue_title] => Wentz Concert Hall and Fine Arts Center
                            [datepart] => 20121021
                            [occurrences] => 1
                            [times] => Sun 4:00pm
                            [end_times] => Sun 4:00pm
                            [next_year] => 0
                            [next_month] => 0
                            [next_week] => 3
                            [occurrence_date] => 1350853200
                        )

                )

            [times_list] => Array
                (
                    [0] => Oct 21 sun 4:00pm
                )

        )

    [31403] => stdClass Object
        (
            [nid] => 15740686
            [venue_nid] => 31403
            [occurrences] => 1
            [this_weeks_occurrences] => 0
            [end_date] => 1350176400
            [end_date_end_time] => 1350176400
            [is_ongoing] => 0
            [title] => KAM Isaiah Israel
            [times] => Array
                (
                    [0] => stdClass Object
                        (
                            [nid] => 15740686
                            [venue_nid] => 31403
                            [venue_title] => KAM Isaiah Israel
                            [datepart] => 20121014
                            [occurrences] => 1
                            [times] => Sat 8:00pm
                            [end_times] => Sat 8:00pm
                            [next_year] => 0
                            [next_month] => 0
                            [next_week] => 2
                            [occurrence_date] => 1350176400
                        )

                )

            [times_list] => Array
                (
                    [0] => Oct 13 sat 8:00pm
                )

        )

    [33861] => stdClass Object
        (
            [nid] => 15740686
            [venue_nid] => 33861
            [occurrences] => 1
            [this_weeks_occurrences] => 0
            [end_date] => 1350781200
            [end_date_end_time] => 1350781200
            [is_ongoing] => 0
            [title] => Music Institute of Chicago, Nichols Concert Hall
            [times] => Array
                (
                    [0] => stdClass Object
                        (
                            [nid] => 15740686
                            [venue_nid] => 33861
                            [venue_title] => Music Institute of Chicago, Nichols Concert Hall
                            [datepart] => 20121021
                            [occurrences] => 1
                            [times] => Sat 8:00pm
                            [end_times] => Sat 8:00pm
                            [next_year] => 0
                            [next_month] => 0
                            [next_week] => 3
                            [occurrence_date] => 1350781200
                        )

                )

            [times_list] => Array
                (
                    [0] => Oct 20 sat 8:00pm
                )

        )

) 
```

我需要按发生日期排序并确保顶部对象（例如190515）中的数据不会被其他对象损坏，并包括对象的“时间”[数组]可能存在第二个发生日期的可能性。

我在这里看到过类似的按字段排序的对象数组，但不是数组/对象的深度。我尝试使用 usort 但我认为我的值语法不正确。

基本上我试过了。

```
function cmp($x, $y) {
    if ($x->occurrence_date > $y->occurrence_date) {
      return 1; }
    else {
      return -1; }
 }
usort($node->timeout_events_schedule->venues, 'cmp'); 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:39:01.307

怎么样：

```
function compare($x,$y)
{
    if($x->times[0]->occurrence_date == $y->times[0]->occurrence_date)
        return 0;
    elseif($x->times[0]->occurrence_date < $y->times[0]->occurrence_date)
        return -1;
    else
        return 1;

}

uasort($your_array,'compare'); 
```

uasort() 保留您的密钥，不像 usort() [http://www.php.net/manual/en/function.uasort.php](http://www.php.net/manual/en/function.uasort.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T21:02:02.480

帮助您解决问题的一些提示：

*   您将需要[uasort](http://www.php.net/manual/en/function.uasort.php)功能，以保留关联键
*   您不能直接从或访问`occurrence_date`密钥，您需要`$x``$y``$x->times[0]->occurence_date`
*   在进行比较之前，请遍历`$x->times`以检查是否有更多条目，选择一个适合您需要的条目。
*   因为`occurence_date`是一个数字，您不必使用字符串比较功能

祝你好运 ：）

# uml - 如何创建具有相同用例选项的 UML 用例图？

> ID：12753683
> 
> 赞同：1
> 
> 时间：2012-10-05T20:36:53.113
> 
> 标签：uml, use-case

我遇到了一个用例有两个选项可供选择的情况。

示例：用例“流程数据”具有“批准”和“拒绝”等选项 如果批准，则更新库存。如果拒绝，请归档信息。

我知道如何在活动图中表示它，但我不知道在用例图中显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-02T07:34:38.277

这里有两个选择。

A）你做了两个用例而不是一个。`Approve Data`和`Decline Data`

B）你做了一个用例`Process data`。在主要场景中，您描述 的步骤，`Approve Data`在例外或替代场景中，您描述 的步骤`Decline Data`。在这种情况下，用例图上看不到差异，但没关系。用例图旨在让您概述应用程序中的大部分行为，而不是细节。

替代方案或例外方案的选择取决于您的后置条件。如果`Decline`场景满足后置条件，则为备用场景，否则为异常场景。

这个词`Data`不是很具体。我更喜欢比数据更有意义的东西`Order`，例如`Application`，...

如果不知道所有细节，我无法确定，但选项 B) 可能是最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:30:43.553

用例对特定参与者有特定的目标。

1.  识别用例的参与者。
2.  确定演员的目标。
3.  用强特定动词定义用例，过程是弱非特定动词。

    我发现要求模棱两可，您似乎将两个独立的演员混为一谈。

    请参阅[Uml 样式指南：用例](http://www.agilemodeling.com/style/useCaseDiagram.htm)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-06T11:34:12.727

您创建相同用例的两个视图。在第一个视图中，您使用 Approve 创建流程数据，使用 Decline 创建第二个视图。每个视图都是不同的用例图，但使用相同的用例。

明确区分图形视图和模型视图非常重要。我的意思是图形用例图应该是从 UML 模型中提取的视图。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-16T10:45:09.420

![我想这会对你有所帮助](../Images/80478a141b8464a01f828fc3e36c1aa0.png)

如果没有，请使用此链接**[http://msdn.microsoft.com/en-us/library/dd409427.aspx](http://msdn.microsoft.com/en-us/library/dd409427.aspx)**

# javascript - 默认调用函数？

> ID：12753693
> 
> 赞同：0
> 
> 时间：2012-10-05T20:38:16.813
> 
> 标签：javascript

有可能做这样的事情吗？

```
var foo;
foo.bar = function { };
foo.variable1 = "Hello World";
foo.variable2 = 5; 
```

...并以某种方式做到这一点，以便我可以：

```
function example() {
    foo(); // <-- have this call foo.bar()
    foo.variable1 = "Goodbye World"; // <-- but still have this work 
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:40:37.247

是的。函数也只是对象。

```
var foo = function () { alert("Hi!") };
foo.variable1 = "Hello world";

console.log(foo.variable1);
foo(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:44:51.703

比你想象的要容易。

```
var foo = function() {
  foo.bar();
};

foo.bar = function() {
  console.log('Hello World. '+ foo.variable1);
};

foo.variable1 = "Goodbye World";

foo(); // "Hello World. Goodbye World" 
```

# iphone - CAAnimation 确定哪个动画是哪个

> ID：12753697
> 
> 赞同：-1
> 
> 时间：2012-10-05T20:38:38.437
> 
> 标签：iphone, objective-c, ios, ipad, caanimation

我有三个 CAShapeLayer，每个都有不同的路径，但是三个图层应用了相同的动画，即：

```
 [self animateToLineLayer:self.leftDottedLine_ withKey:@"leftLineAnimated"];

   - (void) animateToLineLayer:(CAShapeLayer *) line withKey:(NSString *) key
    {
        CABasicAnimation *pathAnimation = [CABasicAnimation animationWithKeyPath:@"strokeEnd"];
        [pathAnimation setFromValue:[NSNumber numberWithFloat:0.0f]];
        [pathAnimation setToValue:[NSNumber numberWithFloat:1.0f]];
        [pathAnimation setDuration:10.0];
        [pathAnimation setDelegate:self];
        [pathAnimation setFillMode:kCAFillModeForwards];
        [line addAnimation:pathAnimation forKey:key];
    }

    then I try to find this animation back by doing:

    - (void)animationDidStop:(CAAnimation *)animation finished:(BOOL)flag
    {
        if (animation == [self.leftDottedLine_ animationForKey:@"strokeEnd"]) {
            NSLog(@"DONE");
        }

        if (![self.leftDottedLine_ isNotNull]){
            NSLog(@"NIL");
        }

        NSLog(@"JUST DONE");
    } 
```

但问题是它永远不会打印完成！为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:53:18.290

您可能想在此处查看有关如何在animationDidStop 委托中识别动画的提示： [如何在animationDidStop 委托中识别CAAnimation？](https://stackoverflow.com/questions/1255086/how-to-identify-caanimation-within-the-animationdidstop-delegate)

您确定将自己设置为代表吗？另外，也许 == 不起作用。尝试 isEqualTo: 或上述链接中所述的字符串比较。

# php - 有没有办法让一个 symfony 1.4 模块有多个控制器？

> ID：12753698
> 
> 赞同：0
> 
> 时间：2012-10-05T20:38:47.000
> 
> 标签：php, symfony-1.4

我有一种情况，我在 Symfony 1.4 中有一个基本控制器（一个基本 actions.php 文件）。我想为同一模块创建另一个控制器，以扩展该基本控制器。

我需要扩展该基本控制器，因为我想自定义某些访问者的行为，这些访问者是基于 URL 中的 ID 识别的。

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:31:43.550

同一模块的另一个控制器类，我认为在 symfony 中是不可能的。

我想对您来说最简单的解决方案是在同一个类中创建另一个方法，然后从基类中调用它。

例如：actions.class.php：

```
public function executeBaseAction(sfWebRequest $request) {

   .. if($user....) then return $this->executeCustomAction($request);

}

public function executeCustomAction(sfWebRequest $request) {
  // $this->setTemplate('anotherTemplate?');

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T02:06:59.637

实际上，您可以为同一个模块添加另一个控制器类。

您可以通过这种方式在您的操作目录中包含多个文件：

在 action1Action.class.php

```
class action1Action extends sfAction
{
    public function execute($request) {
        //Your code here
    }
} 
```

这将使用模板 action1Success.php

在 action2Action.class.php

```
class action2Action extends sfAction
{
    public function execute($request) {
        //Your code here
    }
} 
```

这将使用模板 action2Success.php

# javascript - 获取样式表规则 Javascript / jQuery

> ID：12753700
> 
> 赞同：0
> 
> 时间：2012-10-05T20:39:00.270
> 
> 标签：javascript, css, stylesheet, rule

我正在尝试编写一个函数，该函数将接收要更新的 CSS 规则以及用于更新规则的 CSS，到目前为止，我有以下内容：

```
getCSSRule:function(getRule, newRule){
    var styles=document.styleSheets;
    for(var i=0,l=styles.length; i<l; ++i){
        var sheet=styles[i]; 

        if(sheet.title === "style"){
            var rules=sheet.cssRules;
            for(var j=0, l2=rules.length; j<l2; j++){
                var rule=rules[j];

                // SELECT APPROPRIATE RULE IN STYLESHEET
                if(getRule === rule){  

                    // LOSE IT HERE

                };
            };
        };
    };
}, 
```

到目前为止，代码有效。它查找所有样式表，按标题定位一个，然后遍历该样式表的规则。我现在遇到的问题是将 getRule（传递给函数的 CSS 规则名称）与 CSS 中的规则进行比较。我是使用 document.styleSheets 的新手，发现结构有些混乱。任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:42:01.663

CSS 规则没有名称。也许你的意思是`selectorText`？如果是这样，您可以像这样选择正确的规则：

```
if (getRule === rule.selectorText) {
    /* do stuff */
} 
```

`getRule`是所需规则的确切选择器。在这种情况下，“精确”意味着选择器的真正精确形式。示例样式表：

```
.div {...}
#div {...}
div {...}
div:hover {...} 
```

如果你想改变`div`类的规则，你`getRule`应该是`.div`，如果你想改变规则`div.hover`，`getRule`应该是`.div:hover`等等。

# javascript - 如何在jquery中将xmllist转换为xml

> ID：12753704
> 
> 赞同：0
> 
> 时间：2012-10-05T20:39:19.133
> 
> 标签：javascript, jquery, xml

我如何转换类似的东西

```
<a/>
<b/> 
```

在 jquery 中像下面这样的结构化 xml

```
<parent>
 <a/>
 <b/>
</parent> 
```

我从服务器获取 xml 作为文件（作为 xmlDoc）。

谢谢

# mysql - 触发器内的select语句中的MySQL错误

> ID：12753705
> 
> 赞同：2
> 
> 时间：2012-10-05T20:39:29.450
> 
> 标签：mysql, select, triggers

我最近开始研究 MySQL n 现在我想创建一个触发器，但 MySQL 在我的语法中返回一个错误。

```
delimiter $$;
create trigger abc after insert on ratings
for each row
    begin
        set @n1 = select avg(rating) from ratings join users where ratings.uname=users.uname 
        and ratings.bookid=new.bookid users.`type`='admin' or users.`type`='critic';
        update books set avgcriticrating = @n1 where bookid=new.bookid;
end; 
```

select 语句在自己触发时运行完美，但当我在触发器内使用它时会出错。

这是MySQL给出的错误

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'select avg(rating) from ratings join users where ratings.uname=users.uname an' at line 4 
```

book 和 rating 表都包含一个名为 bookid 的字段。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:43:35.483

如果您想从 select 语句中获取单个值，则该语句必须在（括号）中。

```
set @n1 = (select avg(rating) from ratings join users where ratings.uname=users.uname 
    and ratings.bookid=new.bookid users.`type`='admin' or users.`type`='critic'); 
```

下一个错误将发生在`new.bookid users`- 可能存在`and`或`or`缺失。

# php - 使用 PHP 执行需要输入的系统命令

> ID：12753706
> 
> 赞同：0
> 
> 时间：2012-10-05T20:39:34.063
> 
> 标签：php, pear, pecl

PHP 中有没有一种方法可以制作`exec()`或其中一个变体运行需要用户在执行会话中输入的系统命令。可以是`FTP transfer`例如甚至只是带有`more`标志的打印语句命令。比如说在`Windows command prompt`我做一个`type bigfile.txt | more`它给我一个输出屏幕，然后我使用键盘让下一行出现。

从浏览器运行时，有没有办法使用任何 PHP 命令行执行函数来捕获这种行为？如果不在标准 PHP 中，是否有任何人以前使用过的`PEAR`/`PECL`资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:41:55.670

您可能可以使用[proc_open](http://php.net/proc_open)执行此操作，它可以以非阻塞方式使用，并为您提供输入和输出管道。

但是，根据经验，我只会将此作为最后的手段。使用非交互式可执行文件或原生 PHP 库通常更易于维护。例如，我正在努力想出一个你想要的理由，`proc_open('mycommand | more')`当你可以`exec('mycommand')`

# php - php 在同一行中回显页码

> ID：12753708
> 
> 赞同：0
> 
> 时间：2012-10-05T20:39:51.893
> 
> 标签：php, css, pagination, echo

我的回显结果有分页系统但是，页码在彼此下方回显

例如

```
 1
                2 3 4 5 
```

这是我的代码：

```
for($i=0;$i < $count1;$i=$i+$limit)
 {
if($i <> $start)
{       
    echo "<a href='view.php?search=$search&start=$i&limit=$limit&price=$price&category=$category'><font face='Verdana' size='2'><b>&nbsp;$l&nbsp;</b></font></a> ";
}
else
{
    echo "<center><font face='Verdana' size='4' color=#2E9AFE ><b>&nbsp;$l&nbsp;</b></font></center>";
} 
```

修改后的代码：

```
$i=0;
 $l=1;
   echo "<p align='left'>";
   for($i=0;$i < $count1;$i=$i+$limit)
   {
  if($i <> $start)
   {        
   echo '<a href="view.php?   search=$search&start=$i&limit=$limit&price=$price&category=$category">$i</a>';
}
else
{
   echo '<span class="current">$i</span>';
}        
$l=$l+1;
  }
 echo "</p>";
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:48:39.603

```
<?php for($i=0;$i < $count1;$i=$i+$limit): ?>

  <?php if($i <> $start): ?>

 <a href="view.php?search=<?php echo $search;?>&start=<?php echo $i;?>&limit=<?php echo $limit;?>&price=<?php echo $price;?>&category=<?php echo $category;?>">
 <?php echo $i; ?></a>

  <?php else: ?>

  <span class="current"><?php echo $i;?></span>

  <?php endif; ?>
<?php endfor; ?> 
```

CSS：

```
a,span.current{font-weight:bold;font-family:Verdana;} 
```

所有都是内联元素，所以它们会保持...内联。在您的 CSS 中添加填充、文本装饰、颜色和任何内容。如果您的意图更清楚（中心？），我可以帮助您实现您想要的。远离旧的 html 和表格 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:33:38.977

这是执行上述操作的另一种方法，并添加了一些附加功能：

```
$count1 = 10;    
$menu = '';

$link = array(
  'search' => ( isset($search) ? $search : $search = '' ),
  'start' => ( isset($start) ? $start : $start = 0 ),
  'limit' => ( isset($limit) ? $limit : $limit = 1 ),
  'price' => ( isset($price) ? $price : $price = '' ),
  'category' => ( isset($category) ? $category : $category = '' ),
);

foreach( range(0, $count1, $limit) as $i ) {
  $menu .= ( ($link['start'] = $i) == $start ? 
    '<span class="current">'.$i.'</span>' :
    '<a href="view.php?'.http_build_query($link).'">'.$i.'</a>'
  ) . PHP_EOL;
}

echo $menu; 
```

*（以上需要php5+）*

关于 neeko 的评论，要将`$start`变量与链接中显示的文本分开 - 您所要做的就是引入另一个变量，该变量在每个循环中计数 - 或者，因为我们已经有了范围数组的键，我们可以使用它：

```
foreach( range(0, $count1, $limit) as $key => $i ) {
  $menu .= ( ($link['start'] = $i) == $start ? 
    '<span class="current">Page'.($key+1).'</span>' :
    '<a href="view.php?'.http_build_query($link).'">Page'.($key+1).'</a>'
  ) . PHP_EOL;
} 
```

我用过`$key + 1`, 因为`$key`它将是从零开始的*（即从零开始计数）*，但是 +1 只是改变了一些东西，所以我们从 1 开始计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:43:07.023

我认为这是因为 center 是一个块元素，这意味着它不会与其他数字内联（但这不是我的专长，所以我可能错了。你可以把它们放在一张桌子上。

```
echo "<table><tr>";

for($i=0;$i < $count1;$i=$i+$limit)
{
    echo "<td>";
    if($i <> $start)
    {       
        echo "<a href='view.php?search=$search&start=$i&limit=$limit&price=$price&category=$category'><font face='Verdana' size='2'><b>&nbsp;$l&nbsp;</b></font></a> ";
    }
    else
    {
        echo "<center><font face='Verdana' size='4' color=#2E9AFE ><b>&nbsp;$l&nbsp;</b></font></center>";
    }
    echo "</td>";
}
echo "</tr></table>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T20:44:39.053

**试试这个：**

```
for($i=0;$i < $count1;$i=$i+$limit)
{
if($i <> $start)
{       
    echo "<a href='view.php?search=$search&start=$i&limit=$limit&price=$price&category=$category'><div style='font-family: verdana; font-size: 12px; font-weight: bold; float: left; position: relative; padding: 5px; margin-right: 5px;'>$l</div></a>";
}
else
{
    echo "<div style='font-family: verdana; font-size: 14px; font-weight: bold; float: left; position: relative; color: #2E9AFE; padding: 5px; margin-right: 5px;'>$l</div>";
} 
```

我已经更改了代码的 html 部分以显示在带有 float: left 和其他一些 css 调整的 div 元素中，所以现在它应该放在一行中......

# css - 创建由另一个样式的属性确定的属性

> ID：12753709
> 
> 赞同：0
> 
> 时间：2012-10-05T20:39:52.783
> 
> 标签：css, html, dreamweaver

## 无论如何，子样式的属性是否由另一个样式属性确定？例如

```
.sidebar #menu{
width:100%;
}
.sidebar #menu #Sub{
left:(.sidebar #menu.width)px;
} 
```

* * *

因此，在这种情况下，子菜单将位于菜单元素的右侧。这不是我正在编码的内容，但这是我需要在菜单中使用的一般概念。这样，无论他们的屏幕大小如何，子菜单都将始终位于主菜单旁边。仅供参考，我是 css 新手，所以如果您知道答案，请在初学者级别进行解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T20:51:55.937

我会在这个例子中推荐 jQuery。使用以下内容：

```
$(".sidebar #menu #Sub).css("left", $(".sidebar #menu").css("width")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T20:42:38.847

仅当您使用[LESS](http://lesscss.org/)或[SASS 之](http://sass-lang.com/)类的东西时。CSS 本身目前不直接支持这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T09:54:17.903

根据您网站的其他结构和布局，您可以使用

```
.sidebar #menu #Sub{
    left:100%;
} 
```

# java - Java中VBA With语句的等价物

> ID：12753711
> 
> 赞同：0
> 
> 时间：2012-10-05T20:40:11.690
> 
> 标签：java, vba, with-statement

我目前正在通过以下方式调用我的方法：

```
InstrumentsInfo instrumentsInfo = new InstrumentsInfo();
String shortInstruName = "EURUSD"

TrackInstruments trackInstruments = new TrackInstruments(instrumentsInfo.getInstrumentID(shortInstruName), instrumentsInfo.getInstrumentTickSize(shortInstruName), instrumentsInfo.getInstrumentName(shortInstruName)); 
```

在VBA中我会做这样的事情

```
With instrumentsInfo
 TrackInstruments(.getInstrumentID(shortInstruName), .getInstrumentTickSize(shortInstruName), .getInstrumentName(shortInstruName)); 
```

所以我的问题是，有没有办法避免在 Java 的方法调用中重复“instrumentsInfo”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:48:24.253

总之不，虽然你可能想考虑改变

```
TrackInstruments trackInstruments = new TrackInstruments(instrumentsInfo.getInstrumentID(shortInstruName), instrumentsInfo.getInstrumentTickSize(shortInstruName), instrumentsInfo.getInstrumentName(shortInstruName)); 
```

至

```
TrackInstruments trackInstruments = new TrackInstruments(instrumentsInfo); 
```

然后让构造函数获取它需要的参数。

或者，如果您需要很多参数，也许可以使用[构建器模式。](http://rwhansen.blogspot.co.uk/2007/07/theres-builder-pattern-that-joshua.html)

或者确实问问自己，当后者似乎如此严重地依赖它时，为什么要在`InstrumentsInfo` 外部进行构建。`TrackInstruments`（在没有完全理解你的对象的情况下）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T20:49:12.363

是的，您可以在 TrackInstruments 中创建一个接受对象类型 InstrumentsInfo 的构造函数

```
TrackInstruments trackInstruments = new TrackInstruments(instrumentsInfo); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:47:59.420

不，Java 中没有`With`这样的语法。但是，为避免重复“instrumentsInfo”，您可以创建一个采用以下类型的构造函数：

```
TrackInstruments trackInstruments = new TrackInstruments(instrumentsInfo); 
```

但是，这种设计会导致`TrackInstruments`了解`InstrumentsInfo`不会促进对象之间的松散耦合，因此您可以使用：

```
Integer instrumentID = instrumentsInfo.getInstrumentID(shortInstruName);
Integer instrumentTickSize = instrumentsInfo.getInstrumentTickSize(shortInstruName);
String instrumentName = instrumentsInfo.getInstrumentName(shortInstruName);

TrackInstruments trackInstruments = new TrackInstruments(instrumentID, instrumentTickSize, instrumentName); 
```

# java - 使用 Objectify 注册多个类

> ID：12753714
> 
> 赞同：0
> 
> 时间：2012-10-05T20:40:31.147
> 
> 标签：java, objectify

可以用 Objectify4 注册多个类吗？我的意思是，两个具有相同类名的实体，例如`com.mycompany.MyEntity`or`org.mycommunity.MyEntity`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:22:52.143

它会起作用，但您需要为其中一个指定不同的名称：

```
@Entity(name="OtherEntity") 
```

此名称将成为数据存储中的*种类*。它默认为类短名称。

# asp.net - MVC Mailer 将模型传递给邮件视图

> ID：12753715
> 
> 赞同：0
> 
> 时间：2012-10-05T20:40:32.367
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, mvcmailer

我正在使用 MVC Mailer - 我的控制器中有这个：

```
 //
    // POST: /ExhibitorInterest/Create

    [HttpPost]
    public ActionResult Create(ExhibitorInterest exhibitorinterest)
    {
        if (ModelState.IsValid)
        {
            db.ExhibitorInterests.Add(exhibitorinterest);
            db.SaveChanges();

            UserMailer.ExhibitorInterest().Send();

            return RedirectToAction("Thankyou");
        }

        return View(exhibitorinterest);
    } 
```

但我想将模型**参展商**兴趣传递给邮件视图：

UserMailer.cs 有：

```
public virtual MvcMailMessage ExhibitorInterest()
    {
        //ViewBag.Data = someObject;
        return Populate(x =>
        {
            x.Subject = "ExhibitorInterest";
            x.ViewName = "ExhibitorInterest";
            x.To.Add("me@myemail.co.uk");
        });
    } 
```

任何想法如何让参展商对 UserMailer.cs 感兴趣 - 所以我可以将它添加到邮件视图中吗？

谢谢，

标记

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T21:39:43.477

想我想通了 - 将 IUSerMailer.cs 的签名更改为：

```
public interface IUserMailer
{
 MvcMailMessage ExhibitorInterest(ExhibitorInterest exhibitorinterest); 
```

和 UserMail.cs 到：

```
public virtual MvcMailMessage ExhibitorInterest(ExhibitorInterest exhibitorinterest)
{
 ViewBag.Data = exhibitorinterest.xxxxxxx; 
```

希望它可以帮助别人。

谢谢，马克

# iphone - 在 iPhone5 和 iPhone4 的 xib 中处理不同尺寸的图像？

> ID：12753718
> 
> 赞同：3
> 
> 时间：2012-10-05T20:40:36.700
> 
> 标签：iphone, ios, uiimageview, ios6, iphone-5

上一篇关于迁移到 iPhone 5 的帖子只提到添加一个新大小的启动图像*，如果需要，可能会使用 AutoLayout。

但是我有一些 xib，其中有一个背景图像，它填满了整个屏幕（可能是导航和标签栏，具体取决于视图）。为了支持 iPhone 5，我现在需要针对不同屏幕尺寸的不同图像，这在 xib 或其他地方是如何处理的？

（*顺便说一句，如果应用程序不使用启动图像，你会怎么做？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T21:17:23.490

[这是](http://redth.info/get-your-monotouch-apps-ready-for-iphone-5-ios-6-today/)一个真正可以帮助您的链接。保存启动图像，如果您在文件名末尾输入“-568h@2x.png”，iOS 不会自动选择正确的图像。[上面的链接](http://redth.info/get-your-monotouch-apps-ready-for-iphone-5-ios-6-today/)中提到了几个帮助方法，可以让您的工作变得轻松。

我已经采用了上面提到的链接中的代码，这是 Obj-C 的辅助函数：

```
-(BOOL) IsTall
{
    return ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) && ([[UIScreen mainScreen] bounds].size.height * [[UIScreen mainScreen] scale] >= 1136);
} 
```

一点类别写作也会有所帮助。

```
@interface NSString (Special)
-(NSString*)correctImageNameForiPhone5
@end

@implementation NSString (Special)
-(NSString*)correctImageNameForiPhone5
{
    if([self isTall])
            return -imageNameAppendedWith_-568h@2x.png_-; //Do the correct NSString magic here
    else
            return -originalImageName-;
}
@end 
```

最后，当您访问 UIImage 对象时：

```
NSString *filename = @"backgroundImage.png";
UIImage *img = [UIImage imageNamed:[filename correctImageNameForiPhone5]]; 
```

这里的假设是您的所有 iPhone5 特定图像文件名都以“-568h@2x”结尾。如果你只是把它放到你的项目中，这个代码示例肯定是行不通的，但你明白了。它需要一些 NSString 修复。

# android - 如何从字符串生成 javax.crypto.SecretKey

> ID：12753719
> 
> 赞同：0
> 
> 时间：2012-10-05T20:40:37.993
> 
> 标签：android, string, encryption, cryptography, secret-key

以下行允许我生成一个 SecretKey

```
 SecretKey key = KeyGenerator.getInstance("DES").generateKey(); 
```

但我想生成一个与特定字符串相关的 SecretKey。

例如

```
String myKeyStr="abcde";

SecretKey mykey2=keyGeneratedFrom(myKeyStr); 
```

显然，SecretKey 生成应该有一个 1:1 的链接，以避免在解密过程中出现问题。

我不知道如何解决这个问题。

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:57:35.700

密码不是钥匙。您必须使用 PBKDF2 之类的东西从密码中派生密钥。即便如此，拥有安全密码也是值得的。在 Java 中使用时有很多关于 PBKDF2 的信息，Bouncy Castle 库也可以提供帮助。

*   [Android中的PBKDF2函数](https://stackoverflow.com/questions/8091519/pbkdf2-function-in-android)
*   [Java - 使用 HMACSHA256 作为 PRF 的 PBKDF2](https://stackoverflow.com/questions/9147463/java-pbkdf2-with-hmacsha256-as-the-prf)
*   [Java 中带有 bouncycastle 的 PBKDF2](https://stackoverflow.com/questions/8674018/pbkdf2-with-bouncycastle-in-java)

等等。

不要忘记使用随机盐。

# c# - 如何修复错误：“当前线程需要将其公寓状态设置为 ApartmentState.sta 才能启动 Internet Explorer”？

> ID：12753720
> 
> 赞同：6
> 
> 时间：2012-10-05T20:40:38.943
> 
> 标签：c#, nunit, watin

我在 C# 中有以下代码：

```
namespace Tests
{    
    [SetUpFixture, RequiresSTA]
    public class Setup
    {
        public IE Window = new IE("webpage");

        [SetUp]
        public void SetUp()
        {

        }

        [TearDown]
        public void TearDown()
        {

        } 
    }
} 
```

当我尝试在我的网站上运行它时，它返回错误：

> “当前线程需要将其公寓状态设置为 ApartmentState.sta 才能启动 Internet Explorer”

通常，当使用除 SetupFixture 之外的任何东西时，需要 STA 解决方案。但由于某种原因，它现在不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-11T12:38:48.477

如果您包含以下行，则解决方案实际上非常简单：

```
[assembly: RequiresSTA] 
```

在您的页面顶部，它将设置整个程序集以使用 STA，并且不再引发错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T20:48:24.117

您可以尝试启动一个新线程并设置其 ApartmentState：

```
var t = new Thread(new ThreadStart(ToDo));
t.SetApartmentState(ApartmentState.STA);
t.Start();
// Run synchronously by waiting for t to finish.
t.Join(); 
```

和代表：

```
private void ToDo()
{
    // Do something...
} 
```

或内联版本：

```
var t = new Thread(() => 
{
    // Do something...
}); 
```

# esb - ESB Mule 客户端盯着 xml-properties 失败

> ID：12753723
> 
> 赞同：0
> 
> 时间：2012-10-05T20:40:43.530
> 
> 标签：esb, mule

我使用骡子 3.x

我有一个测试 MuleClient 连接性的代码。

这个测试没问题并且工作正常：

```
public void testHello() throws Exception
    {
        MuleClient client = new MuleClient(muleContext);
        MuleMessage result = client.send("http://127.0.0.1:8080/hello", "some data", null);
        assertNotNull(result);
        assertNull(result.getExceptionPayload());
        assertFalse(result.getPayload() instanceof NullPayload);

        //TODO Assert the correct data has been received
        assertEquals("hello", result.getPayloadAsString());
    } 
```

但是这个测试不好 - 它失败并出现连接异常：

```
public void testHello_with_Spring() throws Exception {

    MuleClient client = new MuleClient("mule-config-test.xml");
    client.getMuleContext().start();

    //it fails here
    MuleMessage result = client.send("http://127.0.0.1:8080/hello", "some data", null);
    assertNotNull(result);

    assertNull(result.getExceptionPayload());
    assertFalse(result.getPayload() instanceof NullPayload);

    //TODO Assert the correct data has been received
    assertEquals("hello", result.getPayloadAsString());
} 
```

两个测试都使用了“mule-config-test.xml”，这个文件的路径没问题，我检查了。

这是我最后得到的错误消息：

> 异常堆栈是： 1\. 地址已在使用中 (java.net.BindException) java.net.PlainSocketImpl:-2 (null) 2\. 无法绑定到 uri "http://127.0.0.1:8080/hello" (org .mule.transport.ConnectException)
> org.mule.transport.tcp.TcpMessageReceiver:81 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/transport/ConnectException.html) --- -------------------------------------------------- ---------------------------- 根异常堆栈跟踪：java.net.BindException：地址已在 java.net.PlainSocketImpl.socketBind 处使用（本机方法）在 java.net.PlainSocketImpl.bind(PlainSocketImpl.java:383) 在 java.net.ServerSocket.bind(ServerSocket.java:328) + 3 个以上（设置调试级别日志记录或'-Dmule.verbose.exceptions =true' 代表一切）
> 
> * * *
> 
> [10-05 16:33:37] 错误 HttpConnector [main]：org.mule.transport.ConnectException：无法绑定到 uri“http://127.0.0.1:8080/hello”[10-05 16:33： 37] 错误 ConnectNotifier [main]: 无法连接/重新连接: HttpConnector {
> name=connector.http.mule.default 生命周期=stop this=7578a7d9
> numberOfConcurrentTransactedReceivers=4
> createMultipleTransactedReceivers=true connected=false
> supportedProtocols=[http] serviceOverrides= } 。根例外是：地址已在使用中。类型：类 java.net.BindException [10-05 16:33:37] 错误 DefaultSystemExceptionStrategy [main]：无法绑定到 uri“http://127.0.0.1:8080/hello”
> 
> org.mule.api.lifecycle.LifecycleException：无法处理事件，因为“connector.http.mule.default”已停止

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:47:10.847

我认为问题出在您没有显示的内容`testHello_with_Spring()`上：可能在 Mule 已经运行时正在执行。你开始的第二个骡子然后与另一个骡子发生端口冲突。

`testHello()`和`testHello_with_Spring()`在同一个测试套件中吗？如果是的话，看到这`testHello()`依赖于已经运行的 Mule，我会说这将是`testHello_with_Spring()`.

# hadoop - Hadoop HDFS - 无法为文件授予 +x 权限

> ID：12753726
> 
> 赞同：4
> 
> 时间：2012-10-05T20:40:52.210
> 
> 标签：hadoop, hdfs, fuse, cloudera

因此，我使用 Cloudera 的安装和管理工具来启动并运行一个 3 节点的服务器集群。

我正在运行 HDFS，可以查看/创建目录等。

我继续安装了 Fuse 插件，它允许我将 HDFS 作为文件系统挂载。一切正常。我可以将文件写入文件夹等。

问题：

当我`'chmod 777 ./file.sh'`在已安装的驱动器中运行时，它不会给出任何错误，但是当我执行时`'ls -l'`它只有：

```
'-rw-rw-rw- 1 root nobody 26 Oct  5 08:57 run.sh' 
```

当我运行`'sudo -u hdfs hadoop fs -chmod 777 /run.sh'`它时，它仍然具有相同的权限。无论我以任何方式做什么，我都无法获得任何文件的执行权限。

我在 Cloudera 管理器中禁用了权限，并且还 chown'd 文件夹（chmod -R 777 文件夹也是）。但似乎没有任何效果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:50:19.930

似乎在 fstab 挂载行中添加：“umask=000”就可以了。（还添加了 exec 以获得良好的衡量标准）

谢谢！

# splunk - Splunk 石墨集成

> ID：12753728
> 
> 赞同：1
> 
> 时间：2012-10-05T20:40:55.870
> 
> 标签：splunk, graphite

我想知道 Graphite 是否可以从 Splunk 中提取日志数据来绘制图形。我知道 Graphite 可以从 Nagios 读取数据，但想知道它是否也可以从 Splunk 中提取数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T03:01:40.547

您还可以通过 Splunk SDK 之一提取数据 - [http://dev.splunk.com/view/sdks/SP-CAAADP7](http://dev.splunk.com/view/sdks/SP-CAAADP7)

开发人员网站上有一个示例，显示从 splunk 中提取数据并将其推送到 Leftronic - [http://dev.splunk.com/view/SP-CAAAADSR](http://dev.splunk.com/view/SP-CAAADSR)

JavaScript SDK 中还有许多可视化示例，展示了如何从 Splunk 提取数据并使用其他库进行可视化 - [http://dev.splunk.com/view/javascript-sdk/SP-CAAAECM](http://dev.splunk.com/view/javascript-sdk/SP-CAAAECM)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-15T23:28:34.403

这是我为 Splunk 编写的一个应用程序，它正是这样做的：[https ://github.com/OnBeep/splunk_graphite](https://github.com/OnBeep/splunk_graphite)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T02:48:32.153

如果目标是在 splunk 中绘制数据图表，您可以在 splunk 中使用**[chart](http://docs.splunk.com/Documentation/Splunk/4.3.4/SearchReference/Chart)**或**[timechart](http://docs.splunk.com/Documentation/Splunk/4.3.4/SearchReference/Timechart)**命令。

如果幸灾乐祸要在碳/石墨中绘制 splunk 数据，这取决于您希望从 spunk 中提取的数据，您应该能够做到；

*   在 splunk 中创建[保存搜索](http://docs.splunk.com/Documentation/Splunk/4.3.4/User/Savesearchtutorial)
*   使用 cli 或[rest api](http://dev.splunk.com/view/rest-api-overview/SP-CAAADP8)执行和收集保存搜索的结果
*   解析结果然后将其推入碳中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T21:41:59.333

这是它的工作原理：

1.  Carbon监听接收数据。
2.  Carbon 接收数据并将其存储在耳语中。
3.  Graphite 从 Whisper 和 carbon 缓存中读取并显示图表。

根本没有拉力。向碳提交数据非常简单。它有两个端口，一个用于简单的 tcp 连接并每行提交一个指标（metric.name metric.value metric.timestamp），或者也有一个 pickle 端口。

通常，您将使用[Logstash](http://logstash.net/)或[logster](https://github.com/etsy/logster)以常规表达式解析应用程序日志，其中任何一个都将负责将生成的指标提交给 carbon。

此外，如果您的软件能够通过 udp 提交实时指标，您可以使用 statsd 监听 udp 和配置的间隔总和或平均值，并通过许多不错的设置提交给碳（例如获得第 95 个百分位， ETC）。

总之，我敢打赌，无论 Splunk 给你留下什么日志，你都可以确保将数据提交给石墨。

# iphone - 显示 UIAlertView 会导致 EXC_BAD_ACCESS

> ID：12753730
> 
> 赞同：2
> 
> 时间：2012-10-05T20:41:09.787
> 
> 标签：iphone, objective-c, ios, uialertview, afnetworking

我`AFNetworking`用来发出网络请求。Web 请求完成后。我希望显示 UIAlertView。我正在使用 ARC，代码似乎可以在设备上运行。如果我使用模拟器，我会收到错误：EXC_BAD_ACCESS

我究竟做错了什么？

```
UIAlertView* postSubmitAlertView = [[UIAlertView alloc] init];
postSubmitAlertView.delegate = self;
[postSubmitAlertView addButtonWithTitle:@"Ok"];

AFHTTPRequestOperation *op = [[AFHTTPRequestOperation alloc] 
    initWithRequest:request];

[op setCompletionBlock:^(void) {
    if(op.response.statusCode == 200) {

        postSubmitAlertView.title = @"Submission Good";
        postSubmitAlertView.message = @"GOOD";

   } else {

        postSubmitAlertView.title = @"Submission Failed.";
        postSubmitAlertView.message = @"FAIL";
   }

   [postSubmitAlertView show];
}];
[op start]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T21:08:18.840

关键问题是`UIKit`应该在主线程上调用东西。

> **注意：**在大多数情况下，UIKit 类只能在应用程序的主线程中使用。对于从 UIResponder 派生的类或涉及以任何方式操作应用程序的用户界面的类尤其如此。

[UIKit 框架参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKit_Framework/Introduction/Introduction.html#//apple_ref/doc/uid/TP40006955-CH1-SW1)

查看[NSOperation](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html)的文档`setCompletionBlock:`

> **讨论** 无法保证完成块的确切执行上下文，但通常是辅助线程。因此，您不应使用此块来执行任何需要非常特定的执行上下文的工作。相反，您应该将该工作分流到应用程序的主线程或能够执行此操作的特定线程。

修改代码最简单的解决方案是`UIKit`在主线程上调用这些东西

```
- (void)viewDidLoad
{
  [super viewDidLoad];

  NSURL *URL = [NSURL URLWithString:@"http://www.google.com"];
  NSURLRequest *request = [NSURLRequest requestWithURL:URL];

  AFHTTPRequestOperation *op = [[AFHTTPRequestOperation alloc]
                                initWithRequest:request];

  [op setCompletionBlock:^(void) {

    dispatch_async(dispatch_get_main_queue(), ^{
      UIAlertView* postSubmitAlertView = [[UIAlertView alloc] init];
      postSubmitAlertView.delegate = self;
      [postSubmitAlertView addButtonWithTitle:@"Ok"];

      if(op.response.statusCode == 200) {

        postSubmitAlertView.title = @"Submission Good";
        postSubmitAlertView.message = @"GOOD";

      } else {

        postSubmitAlertView.title = @"Submission Failed.";
        postSubmitAlertView.message = @"FAIL";

      }

      [postSubmitAlertView show];
    });

  }];
  [op start];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T13:01:16.237

EXC_BAD_ACCESS 是由访问已释放的对象引起的。为避免这种情况，请调用 UIAlertView 类型的模式：

```
//Function body:

-(void)checkSaving
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Do you want to add these results to your database?"
                                                    message:@"\n\n"
                                                   delegate:self
                                          cancelButtonTitle:@"No"
                                          otherButtonTitles:@"Save", nil];
    alert.alertViewStyle = UIAlertViewStyleDefault;
    [alert show];

    //this prevent the ARC to clean up :
    NSRunLoop *rl = [NSRunLoop currentRunLoop];
    NSDate *d;
    d = (NSDate*)[d init];
    while ([alert isVisible]) {
        [rl runUntilDate:d];
    }
}

//Your choice result:

- (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    // the user clicked one of the OK/Cancel buttons
    if (buttonIndex == 1)//Save
    {
        //do something    
    }
    if (buttonIndex == 0)//NO
    {
        //do something
    }
}

//Register the functions in the interface declaration:

@interface yourViewController ()
-(void)checkSaving
- (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
//...
@end

//To call:

[self checkSaving]; 
```

我希望这会对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T21:03:33.707

```
UIAlertView* postSubmitAlertView = [[UIAlertView alloc] init];
postSubmitAlertView.delegate = self;
[postSubmitAlertView addButtonWithTitle:@"Ok"];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc]initWithRequest:request];
[operation  setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {

        NSLog(@"success: %@", operation.responseString);   
        postSubmitAlertView.title = @"Submission Good";
        postSubmitAlertView.message = @"GOOD";

} 
    failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"error: %@",  operation.responseString);
        postSubmitAlertView.title = @"Submission Failed.";
        postSubmitAlertView.message = @"FAIL";

}
 ];

[postSubmitAlertView show]; 
```

希望这能解决您的问题。

# objective-c - 仪器中的内存警告调试

> ID：12753734
> 
> 赞同：1
> 
> 时间：2012-10-05T20:41:31.347
> 
> 标签：objective-c, ios, xcode, instruments

我是ios开发新手。我现在有一个非常严重的问题。我的应用程序几乎完成了，但由于内存警告，它经常崩溃。每当我在现有视图控制器的顶部显示新视图控制器时，都会收到内存警告。自定义视图类在加载新视图控制器时将 UIWebView 添加到其视图中。

我尝试使用仪器调试内存分配，但不知道如何分配内存。heapshot 分析的屏幕截图显示了一堆非对象，如下图所示，当我看到堆栈跟踪时，它指向添加 webview。 ![在此处输入图像描述](../Images/f046ec3daddecd03787edbb6f6bd79a5.png)

请建议我如何调试。这些非对象指向什么，我应该如何处理它们。我提前感谢您的建议和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:48:07.773

非对象分配几乎总是用作对象内的后备存储。即一个 NSMutableArray 通常由几个 malloc() 的缓冲区支持，这些缓冲区出现在​​仪器的非对象分配中。

除非非对象是*唯一*在 Instruments 中显示为分配的东西，否则您可以忽略它们。

相反，专注于特定类型的分配。Heapshot 迭代中还有其他内容吗？看起来右侧的回溯中有一个 CardScrollView 。他们会正确地离开吗？

# c++ - 使用 make 生成依赖项时出错

> ID：12753736
> 
> 赞同：0
> 
> 时间：2012-10-05T20:41:44.233
> 
> 标签：c++, makefile, gnu-make

我正在尝试实现论文“ [Recursive Make Considered Harmful](http://aegis.sourceforge.net/auug97.pdf) ”中概述的非递归 make 解决方案。我目前坚持要生成 *.d 依赖文件。我在下面提供了 makefile、示例 module.mk 和错误。有什么想法可以解决这个问题吗？

```
MODULES :=      \
    module1     \
    module2     

# define compiler
CC = /opt/local/bin/clang++-mp-3.1

# exclude the following warnings for clang
CLANG_NO_WARN =                 \
    -Wno-c++98-compat           \
    -Wno-weak-vtables           \
    -Wno-padded                 \
    -Wno-global-constructors    \
    -Wno-exit-time-destructors   

# look for include files in each of the modules
CFLAGS +=                                                               \
    -g -Weverything -Wall -std=c++11 -stdlib=libc++ $(CLANG_NO_WARN)    \
    -I../ -I/usr/local/include $(patsubst %, -I%, $(MODULES))

# linker flags
LDFLAGS :=                                                  \
    -stdlib=libc++                                          \
    -L/usr/local/boost_1_50_0/stage/lib -L/usr/local/lib

# extra libraries if required (each module will add to this)
LIBS :=                     \
    -lboost_program_options \
    -lboost_system          \
    -lglog                  \
    -lpugixml

# source files to be compiled (each module will add to this)
SRCS := \
    Main.cpp

# include the descriptions for each module
include $(patsubst %, %/module.mk, $(MODULES))

# determine the object files
OBJS := \
    $(patsubst %.cpp, %.o, $(filter %.cpp, $(SRCS)))

# link the program
prog: $(OBJS)
    $(CC) -o $@ $(OBJS) $(LDFLAGS) $(LIBS)

# include the C include dependencies
include $(OBJS:.o=.d)

# calculate C include dependencies
%.d: %.cpp
    depend.sh `dirname $*.cpp` $(CFLAGS) $*.cpp > $@  

----------

#!/bin/sh

# Evaluate dependencies for use by the makefile

echo "Called"
DIR="$1"
shift 1
case "$DIR" in
    "" | ".")
        $CC -MM -MG "$@" | sed -e 's@ˆ\(.*\)\.o:@\1.d \1.o:@' ;;
    *)
        $CC -MM -MG "$@" | sed -e "s@ˆ\(.*\)\.o:@$DIR/\1.d \ $DIR/\1.o:@" ;;
esac    

------------

# module.mk
SRCS += \
    Algo.cpp        \
    CommandHandler.cpp  \
    Exchange.cpp        \
    TCPSocket.cpp       \
    TradingEngine.cpp       

----------

$ make
makefile:68: Main.d: No such file or directory
makefile:68: view_string.d: No such file or directory
makefile:68: Algo.d: No such file or directory
makefile:68: CommandHandler.d: No such file or directory
makefile:68: Exchange.d: No such file or directory
makefile:68: TCPSocket.d: No such file or directory
makefile:68: TradingEngine.d: No such file or directory
makefile:68: Exchange.d: No such file or directory
makefile:68: Requests.d: No such file or directory
makefile:68: TickCapture.d: No such file or directory
makefile:68: types.d: No such file or directory
make: *** No rule to make target `types.d'.  Stop. 
```

**更新** 完成的makefile和示例module.mk

```
$cat makefile
# executable name
BINARY := my_prog

# clang config
CLANG := /opt/local/bin/clang++-mp-3.1

CLANG_WARNINGS :=               \
    -Wno-c++98-compat           \
    -Wno-weak-vtables           \
    -Wno-padded                 \
    -Wno-global-constructors    \
    -Wno-exit-time-destructors

CLANG_CFLAGS := \
    -g -Weverything -Wall -std=c++11 -stdlib=libc++

CLANG_LDFLAGS := \
    -stdlib=libc++

# generic compiler config
CC :=       $(CLANG)
CFLAGS :=   $(CLANG_WARNINGS) $(CLANG_CFLAGS) 
LDFLAGS :=  $(CLANG_LDFLAGS)

INCS :=                             \
    -I../                           \
    -I/usr/local/include            \
    $(patsubst %, -I%, $(SUBDIRS))

LIBS :=                                 \
    -L/usr/local/boost_1_50_0/stage/lib \
    -L/usr/local/lib                    \
    -lboost_program_options             \
    -lboost_system                      \
    -lglog                              \
    -lpugixml

# list subdirectories in which to look for dependencies
# must define SRCS first as subdirs will append to this
# their src files
SRCS := Main.cpp

SUBDIRS :=  \
    module1 \
    module2

include $(patsubst %, %/module.mk, $(SUBDIRS))

# derive object files from srcs
OBJS := $(patsubst %.cpp, %.o, $(filter %.cpp, $(SRCS)))

# link the program
$(BINARY): $(OBJS)
    $(CC) -o $@ $(OBJS) $(LDFLAGS) $(LIBS)

# include generated dependency files
DEPS := $(OBJS:.o=.d)
-include $(DEPS)

# generate include dependencies
%.d: %.cpp
    ./depend.sh `dirname $*.cpp` $(INCS) $*.cpp > $@

# compile
.cpp.o:
    $(CC) $(CFLAGS) $(INCS) $< -c -o $@

# clean, obviously
clean:
    rm -f $(BINARY)
    rm -f $(OBJS)
    rm -f $(DEPS)

# et voila!   

-----

$cat module1/module.mk
SRCS_PATH := module1
SRCS += \
    $(SRCS_PATH)/Algo.cpp           \
    $(SRCS_PATH)/CommandHandler.cpp \
    $(SRCS_PATH)/Exchange.cpp       \
    $(SRCS_PATH)/TCPSocket.cpp      \
    $(SRCS_PATH)/TradingEngine.cpp 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T23:19:11.680

即使不存在这样的源文件，它看起来好像添加了一些模块`types.cpp`。`SRCS`

至于警告，当你第一次运行这个 makefile 时，依赖文件 ( `foo.d`) 还不存在，所以 Make 抱怨它不能`include`。这不是问题，当这些文件事先确实存在时，警告不会出现在后续运行中。要完全抑制警告，请更改`include`为`-include`.

# php - 如何在 XPATH 中对表达式进行 OR 查询

> ID：12753744
> 
> 赞同：2
> 
> 时间：2012-10-05T20:42:43.153
> 
> 标签：php, html, xpath

我正在尝试使用 xpath 从 HTML 字符串中提取 href、srcs 和 value 属性

```
 $dom = new DOMDocument;  
                libxml_use_internal_errors(true);
                $dom->loadHTML (stripslashes ($content)); 
                $xpath = new DOMXPath ($dom);
                libxml_clear_errors();

                $doc = $dom->getElementsByTagName('html')->item(0);
                $srcs = $xpath->query('.//@src');
                $hrefs = $xpath->query ('.//@href');
                $values = $xpath->query ('.//@value'); 
```

如何将 xpath 查询表达式与 OR 结合起来？这样我就只有一个数组可以遍历。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T20:46:18.710

`$stuff = $xpath->query('.//@src | //@href | //@value');`

| （或管道）是您正在寻找的运营商。

# javascript - 使用 JQuery 通过拖放来排序图片

> ID：12753745
> 
> 赞同：1
> 
> 时间：2012-10-05T20:42:49.627
> 
> 标签：javascript, jquery, drag-and-drop

我有一个从数据库中检索并显示在 html 上的照片列表。我想通过允许用户拖动并放置在其他图片位置并替换它来创建一个订单功能。

类似于 netflix 的队列优先级

有没有一个 JQuery 插件呢？我必须从头开始开发吗？

* * *

由于 Scrooby 的回答，我找到了我正在寻找的东西，见下文

![在此处输入图像描述](../Images/5ff488704eba9f652a7dcc06f4eab2d3.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T20:45:53.603

您可以使用 jQuery UI Sortable 对列表项进行排序：

[http://jqueryui.com/demos/sortable/](http://jqueryui.com/demos/sortable/)

或者，如果您需要对表格行进行排序，您可以使用：

[http://archive.plugins.jquery.com/project/TableDnD](http://archive.plugins.jquery.com/project/TableDnD)

每个插件都有在拖动完成时触发的事件，然后您可以运行 Ajax 调用来更新您的数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T20:46:01.473

像[jQuery UI Draggable + Sortable](http://jqueryui.com/demos/draggable/sortable.html)这样的东西效果很好，应该可以解决问题。

# apache - 将 Maven 1 项目转换为 Maven 2

> ID：12753756
> 
> 赞同：2
> 
> 时间：2012-10-05T20:43:37.637
> 
> 标签：apache, maven, maven-2

我是 Maven 新手，在项目中遇到了一些困难。我要将 Maven 1 项目转换为 Maven 2。

我从这些文件开始：

*   maven.xml -- 包含自定义构建脚本
*   project.properties -- 通用构建设置
*   project.xml -- 项目对象模型 (POM) 定义

据我了解，Maven 2 项目我必须将这些文件移动到这些文件中：

*   pom.xml -- POM 定义
*   （也可能）settings.xml——本地配置

我已经通过使用命令**'mvn one:convert'**来解决这个问题。

这似乎照顾 project.xml > pom.xml

然后我向 pom.xml 添加了一个以包含 project.properties （这似乎有效）。

我是否正确地假设我剩下的就是转移 maven.xml >> pom.xml 的内容？

maven.xml 开头：

```
<project default="site_deploy"
     xmlns:ant="jelly:ant"
     xmlns:maven="jelly:maven"
     xmlns:j="jelly:core"
     xmlns:util="jelly:util">

    <ant:property environment="env"/> 
```

并包含以下目标：

```
<goal name="site_deploy">
    <attainGoal name="clean"/>
    <attainGoal name="clean:clean"/>
    <ant:delete dir="${maven.src.dir}/core/target" />
    <attainGoal name="core_deploy"/>
</goal>

<goal name="core">
    <maven:maven
        descriptor="core/project.xml"
        goals="jar:install"/>
      <ant:property name="m2Dir" value="${maven.repo.local}/../../.m2/repository/app/${application.version}"/>
      <ant:property name="m1Path" value="${maven.repo.local}/${application.id}/jars/${application.id}-core-${application.version}.jar"/>
      <ant:echo message="copying jar m1 to m2 (${m1Path}) to (${m2Dir})" />
      <ant:mkdir dir="${m2Dir}"/>
      <ant:copy todir="${m2Dir}" file="${m1Path}" />
</goal> 
```

从我的阅读来看，如果没有绑定到任何构建阶段，目标可以通过直接调用在构建生命周期之外执行，第二种方法是为目标编写插件。

我将如何确定目标是否具有依赖关系——我将如何编写插件？我主要指的是 apache.org 上的 maven 指南，但其中一些很难理解。

这是生成的pom文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <modelVersion>4.0.0</modelVersion>
  <groupId>${application.id}</groupId>
  <artifactId>${application.artifact}</artifactId>
  <version>${application.version}</version>
  <name>${application.name}</name>
  <inceptionYear>2007</inceptionYear>
  <organization>
    <name>OrganizationName</name>
    <url>http://organization.url</url>
  </organization>
  <scm>
    <connection>scm:svn:connection</connection>
    <url>http://svn.organization.local/svn/trunk/application_name</url>
  </scm>
  <build>
    <plugins>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>
    </plugins>
  </build>
  <reporting>
    <plugins>
      <plugin>
        <artifactId>maven-changes-plugin</artifactId>
        <configuration>
          <xmlPath>${basedir}/xdocs/changes.xml</xmlPath>
        </configuration>
      </plugin>
    </plugins>
  </reporting>
</project> 
```

# c# - 带有自定义比较器的 OrderBy 的 Linq 语法

> ID：12753762
> 
> 赞同：23
> 
> 时间：2012-10-05T20:44:16.150
> 
> 标签：c#, linq

具有自定义排序比较器的任何给定 Linq 表达式有两种格式：

格式 1

```
var query =
    source
    .Select(x => new { x.someProperty, x.otherProperty } )
    .OrderBy(x => x, new myComparer()); 
```

格式 2

```
var query =
    from x in source
    orderby x // comparer expression goes here?
    select new { x.someProperty, x.otherProperty }; 
```

**问题：**
第二种格式的order-by表达式的语法是什么？

**不是问题：**
如何使用第一种格式所示的自定义比较器。

**奖励积分：**
上面列出的两种 Linq 格式是否有实际的正式名称？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-05T20:47:34.090

> 第二种格式的 order-by 表达式的语法是什么？

它不存在。来自[orderby 子句文档](http://msdn.microsoft.com/en-us/library/bb383982.aspx)：

> 您还可以指定自定义比较器。但是，它只能通过使用基于方法的语法来使用。

* * *

> 如何以第一种格式使用自定义比较器。

你写对了。你可以通过`IComparer<T>`你写的。

* * *

> 上面列出的两种 Linq 格式是否有实际的正式名称？

格式 1 称为“基于方法的语法”（[来自上一个链接](http://msdn.microsoft.com/en-us/library/bb383982.aspx)），格式 2 是“查询表达式语法”（来自[此处](http://msdn.microsoft.com/en-us/library/bb546145.aspx)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T20:46:43.403

> 如何使用自定义比较器，如第一种格式所示。

您不能使用该格式的自定义比较器。

> 上面列出的两种 Linq 格式是否有实际的正式名称？

格式1是方法语法，格式2是“查询语法”，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T20:52:39.197

**问题：**

这在查询语法中是不可能的，因为没有重载。

**不是问题：**

只有使用反射来比较对象时，才能使用具有匿名类型的比较器，最好使用类型化实现进行比较。

如果您不想创建类型化实现，可以使用`Tuple`：

```
var query =
    source
    .Select(x => new Tuple<string, int>(x.someProperty, x.otherProperty))
    .OrderBy(x => x, new MyComparer());

public class MyComparer : IComparer<Tuple<string, int>>
{
  public int Compare(Tuple<string, int> x, Tuple<string, int> y)
  {
    return x.Item1.CompareTo(y.Item1);
  }
} 
```

**赠金：**

*   查询语法或理解语法
*   方法语法或扩展方法语法

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-01T05:32:44.067

这不一定回答原始问题，但它在一定程度上扩展了概述的一些可能性。我发布这个以防其他人遇到类似的问题。此处发布的解决方案概述了在其他情况下可能有用的通用顺序选项。在此示例中，我想按不同的属性对文件列表进行排序。

```
/// <summary>
/// Used to create custom comparers on the fly
/// </summary>
/// <typeparam name="T"></typeparam>
public class GenericCompare<T> : IComparer<T>
{
    // Function use to perform the compare
    private Func<T, T, int> ComparerFunction { set; get; }

    // Constructor
    public GenericCompare(Func<T, T, int> comparerFunction)
    {
        ComparerFunction = comparerFunction;
    }

    // Execute the compare
    public int Compare(T x, T y)
    {

        if (x == null || y == null) 
        {
            // These 3 are bell and whistles to handle cases where one of the two is null, to sort to top or bottom respectivly
            if (y == null && x == null) { return 0; }
            if (y == null) { return 1; }
            if (x == null) { return -1; }
        }

        try
        {
            // Do the actual compare
            return ComparerFunction(x, y);
        }
        catch (Exception ex)
        {
            // But muffle any errors
            System.Diagnostics.Debug.WriteLine(ex);
        }

        // Oh crud, we shouldn't be here, but just in case we got an exception.
        return 0;
    }
} 
```

然后在实现中……</p>

```
 GenericCompare<FileInfo> DefaultComparer;

        if (SortOrder == SORT_FOLDER_FILE)
        {
            DefaultComparer = new GenericCompare<FileInfo>((fr1, fr2) =>
            {
                return fr1.FullName.ToLower().CompareTo(fr2.FullName.ToLower());
            });
        }
        else if (SortOrder == SORT_SIZE_ASC)
        {
            DefaultComparer = new GenericCompare<FileInfo>((fr1, fr2) =>
            {
                return fr1.Length.CompareTo(fr2.Length);
            });
        }
        else if (SortOrder == SORT_SIZE_DESC)
        {
            DefaultComparer = new GenericCompare<FileInfo>((fr1, fr2) =>
            {
                return fr2.Length.CompareTo(fr1.Length);
            });
        }
        else
        {
            DefaultComparer = new GenericCompare<FileInfo>((fr1, fr2) =>
            {
                return fr1.Name.ToLower().CompareTo(fr2.Name.ToLower());
            });
        }

        var ordered_results = (new DirectoryInfo(@"C:\Temp"))
                .GetFiles()
                .OrderBy(fi => fi, DefaultComparer); 
```

最大的优点是您不需要为每个订单创建一个新类，您只需连接一个新的 lambda。显然，这可以通过各种方式进行扩展，所以希望它会在某个时间、某个地方对某人有所帮助。

# qt - QtInputContextFactory 在嵌入式目标上返回 NULL

> ID：12753763
> 
> 赞同：0
> 
> 时间：2012-10-05T20:44:20.010
> 
> 标签：qt, qt-creator, qml, embedded-linux, qtembedded

在我的嵌入式系统上，我没有 X11、Mac、Win、S60 等。我不断收到从 QInputContextFactory 类的 create 方法返回的 NULL ( 0 ) 指针。我确认没有定义 QT_NO_LIBRARY。

在我的桌面 Qt Build 上，这工作得很好。

我还验证了我的自定义键和父级正在传递给该方法。

什么可能导致这失败？-->

```
if (QInputContextFactoryInterface *factory =
        qobject_cast<QInputContextFactoryInterface*>(loader()->instance(key))) {
        result = factory->create(key);
    } 
```

这是整个方法：

```
QInputContext *QInputContextFactory::create( const QString& key, QObject *parent )
{
    QInputContext *result = 0;
#if defined(Q_WS_X11) && !defined(QT_NO_XIM)
    if (key == QLatin1String("xim")) {
        result = new QXIMInputContext;
    }
#endif
#if defined(Q_WS_WIN)
    if (key == QLatin1String("win")) {
        result = new QWinInputContext;
    }
#endif
#if defined(Q_WS_MAC)
    if (key == QLatin1String("mac")) {
        result = new QMacInputContext;
    }
#endif
#if defined(Q_WS_S60)
    if (key == QLatin1String("coefep")) {
        result = new QCoeFepInputContext;
    }
#endif
#ifdef QT_NO_LIBRARY
    Q_UNUSED(key);
#else
    qDebug() << "Here we are";
    if (QInputContextFactoryInterface *factory =
        qobject_cast<QInputContextFactoryInterface*>(loader()->instance(key))) {
        result = factory->create(key);
    }
#endif
    if (result)
        result->setParent(parent);
    return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:38:57.273

在 Qt 中，`QInputContextFactory`该类是加载输入上下文插件的前端。如果输入上下文插件不存在或未正确部署，它将无法加载。输入上下文插件通常存储在`$QT_PLUGIN_PATH/inputmethods`. 因此，如果该目录中没有插件，则该`create`方法`QInputContextFactory`将返回 NULL。

值得注意的是，Qt 确实提供了一些自定义插件位置的机制。有关这方面的更多详细信息，请参阅以下内容：

[http://qt-project.org/doc/qt-4.8/deployment-plugins.html](http://qt-project.org/doc/qt-4.8/deployment-plugins.html)

# python - 删除指定的字符串，很像数组的“删除”？

> ID：12753768
> 
> 赞同：0
> 
> 时间：2012-10-05T20:44:55.797
> 
> 标签：python, string

如果我有一个字符串，例如“ASDFBOB DESUDESUBOBADSF”，如何删除所有提及“bob”的内容，将行变成“ASDF DESUDESUADSF”？这将是一个很大的帮助，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:46:11.850

```
>>> "ASDFBOB DESUDESUBOBADSF".replace('BOB','')
'ASDF DESUDESUADSF' 
```

不过要小心，这是区分大小写的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T20:47:25.967

[`str.replace`](http://docs.python.org/library/stdtypes.html#str.replace)与空字符串的替换一起使用：

```
>>> x = 'ASDFBOB DESUDESUBOBADSF'
>>> y = x.replace('BOB', '')
>>> y
'ASDF DESUDESUADSF' 
```

默认情况下，替换*所有*实例；如果您只想替换 1 个（或最多 N 个）实例，请将其作为第三个参数传入，例如`x.replace('BOB', '', 1)`.

如果您需要更强大的替换功能，例如不区分大小写或正则表达式，请[`re.sub`](http://docs.python.org/library/re.html#re.sub)改用。

# c# - 更改 datagridview 后更新数据库表

> ID：12753770
> 
> 赞同：1
> 
> 时间：2012-10-05T20:45:10.253
> 
> 标签：c#, .net, datagridview, sql-update

我已经广泛搜索了一种使用存储过程将datagridview中的更改更新到数据库的简单方法，并认为这种方法是我的答案。但我有一个问题。

我有一个项目，其数据源名为“testData”，数据库中的表名为“documents”。

我有一个窗口窗体，我将“文档”表拖到该窗体上，因此文档绑定源和文档表适配器组件被自动添加到我的窗体中。我添加了一个datagridview并将其数据源设置为documentsBindingSource；和一个带有代码隐藏的“更新”按钮，如下所示。

一切正常，数据在运行时加载，我可以更改 datagridview 中的数据。

但是，当我单击“更新”按钮时，我收到一条错误消息，指出“（dgvDocumentName.DataSource as DataTable）.Rows”（在代码中突出显示）“...未设置为对象的实例”。

对于我做错了什么或我错过了什么，我将不胜感激。

谢谢。

**“更新”按钮的代码隐藏：**

```
private void btnUpdate_Click(object sender, EventArgs e)
{
  dgvDocumentName.EndEdit();
  foreach (DataRow row in (dgvDocumentName.DataSource as DataTable).Rows)
  {
    if (row.RowState != DataRowState.Unchanged)
    {
      String sAction;

      switch (row.RowState)
      {
        case DataRowState.Added:
          sAction = "I";
          break;
        case DataRowState.Deleted:
          sAction = "D";
          break;
        case DataRowState.Modified:
          sAction = "U";
          break;
        default:
          sAction = "U";
          break;
      }
      documentsTableAdapter.procActionDocuments(Convert.ToInt32(row["colDocumentID"]),
                                                row["colDocumentName"].ToString(),
                                                Convert.ToInt32(row["colDocumentType"]),
                                                row["colDocumentText"].ToString(),
                                                sAction);
    }
  }
} 
```

# jsp - jsp 形式的项目符号未正确编码

> ID：12753771
> 
> 赞同：0
> 
> 时间：2012-10-05T20:45:10.753
> 
> 标签：jsp, unicode, character-encoding

我有一个带有 jsp 表单的网络应用程序。如果用户将项目符号文本从 word 复制到表单中，项目符号将变成奇怪的字符 Ã¢Â¿ 并由表单提交。有没有办法在 jsp.xml 中的表单级别防止这种情况发生？我正在使用 UTF-8 编码

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:28:48.243

不仅仅是子弹——每个非 ASCII 字符都可能被破坏。

您的页面以 UTF-8 编码输出，但您没有将输入处理为 UTF-8。不幸的是，Servlet 规范，在它的许多严重错误中，要求使用 ISO-8859-1 处理输入。完全改变这种行为是一种痛苦，并且在不同的 servlet 容器中有所不同。[一些以 Tomcat 为中心的背景](http://wiki.apache.org/tomcat/FAQ/CharacterEncoding)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T22:52:33.353

*在从请求正文中提取第一个请求参数之前*，您需要将请求正文字符编码设置为相同，否则它将是依赖于 servletcontainer 的默认值，通常是 ISO 8859-1。

```
request.setCharacterEncoding("UTF-8"); 
```

执行这项工作的一个明智的地方是[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)。

### 也可以看看：

*   [Unicode - 如何让字符正确？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

# excel - Excel VBA：PivotCaches.Create 类型不匹配

> ID：12753773
> 
> 赞同：3
> 
> 时间：2012-10-05T20:45:11.877
> 
> 标签：excel, excel-2007, pivot-table, type-mismatch, vba

很久以前，我曾经使用过 vb（作为 Visual Studio pkg 的一部分），而一份新工作让我在业余项目中使用 VBA 进行了一些工作。我不会说我是新手船，但我仍然在重新学习我以前做过的很多事情（更不用说，结合我在学习 VB 时没有涉及到的 excel 特定部分）在视觉工作室）

我已经在另一个项目中通过 vba 完成了几个数据透视表，但是我现在有一个让我难过的特定项目。

我一直在重复使用 VBA Excel 参考书中列出的一些数据透视表的代码，并且它一直运行良好。但是在这个特定的工作簿中，在工作表上按下了一个按钮，该按钮在传递一些变量的同时调用一个函数。一切通常都很好而且花花公子，但是当我尝试创建缓存时，我收到一个错误，告诉我我有一个不匹配错误？据我了解，在创建数据透视缓存时，字符串和变体可以作为源数据传递，但是之前多次重复下面的代码，直到现在我都没有遇到任何问题。

* * *

```
Private Function createPivotTable(ByRef sheetName As Variant, ByVal sheetNum As Integer)

Dim DataRange As Range
Dim pivotTableCache As PivotCache
Dim pivotTableReport As PivotTable

ActiveWorkbook.Worksheets("EXAMPLE SHEET").Activate
Range("A1").Select
Set DataRange = Selection.CurrentRegion

Worksheets.Add.Name = sheetName

Set pivotTableCache = ActiveWorkbook.PivotCaches.Create(xlDatabase, _ 
      SourceData:=DataRange)
Set pivotTableReport = pivotTableCache.createPivotTable(TableDestination:=ActiveWorkbook.Worksheets(sheetName).Range("A1"), _
TableName:="PVR")

.... 
```

所以我基本上被卡住了。[**我在这里**](http://social.msdn.microsoft.com/forums/en-US/isvvba/thread/e6c0989e-0c0a-4eb6-93e0-bc6785f1bee5)找到了另一个围绕类似问题跳舞的线程。评价最高的评论确实解决了一个问题，因为当我将它作为字符串沿范围位置传递时，我不再有不匹配的问题，但是当我尝试创建实际表本身时，我一直收到一个 1004 错误告诉我我需要选择多行数据（从我可以解释的内容来看 - 可悲的是，错误代码的 msgbox 切断了这一行，这很有趣哈哈）。但是，我已经仔细检查过，选择确实抓住了我的整个表格（所有 6 列和 1000 行）。

任何帮助或指向正确方向将不胜感激。

*验证; 我将 sheetName 作为变体而不是字符串传递，因为我使用输入框要求用户命名工作表，并且作为故障保险，将输入框的句柄尺寸标注为变体允许我检查用户是否已取消操作（然后返回值 false 而不是空白字符串）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T03:54:46.190

看起来虽然您确定了正确的范围，但它没有找到数据，因为您的范围没有引用包含数据的工作表。您可能想尝试：

```
Private Function createPivotTable(ByRef sheetName As Variant, ByVal sheetNum As Integer)

   Dim pivotTableCache As PivotCache
   Dim pivotTableReport As PivotTable

   Worksheets.Add.Name = sheetName

   Set pivotTableCache = ActiveWorkbook.PivotCaches.Create(xlDatabase, _ 
     SourceData:=Sheets("EXAMPLE SHEET").Range("A1").CurrentRegion)
   Set pivotTableReport = pivotTableCache.createPivotTable( _
     TableDestination:=ActiveWorkbook.Worksheets(sheetName).Range("A1") _
     , TableName:="PVR")

   .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-21T17:58:31.530

时间有点晚了，但我偶然发现了一个类似的问题，也许我的解决方案对其他人有帮助。

首先，微软的文档说：

> “传递 Range 时，建议要么使用字符串指定工作簿、工作表和单元格范围，要么设置命名范围并将名称作为字符串传递。传递 Range 对象可能会导致“类型不匹配”错误不料。”

因此，根据我的经验，传递一个范围对象在大多数情况下都可以正常工作，但有时会返回类型不匹配。“出乎意料”的结局是让我寻求解决方法的原因，这非常简单。我发现只有当活动表是数据表时，该方法才会接受 DataRange.Address，所以我这样做：

```
DataRange.Worksheet.Activate()
cache = ActiveWorkbook.PivotCaches().Create(1, DataRange.Address, 6)
pivot = cache.CreatePivotTable(destination, name, True, 6) 
```

请注意，我在 Python 中使用 pywintypes 执行此操作，因此在 VBA 中可能是不带括号的“.Activate”，以及声明和设置的对象变量等。

CreatePivotTable 方法中的“目标”是一个范围对象，到目前为止没有任何问题。

# html - Orbeon Forms 中的只读字段行为

> ID：12753774
> 
> 赞同：0
> 
> 时间：2012-10-05T20:45:15.750
> 
> 标签：html, css, readonly, orbeon, disabled-input

Orbeon Forms 中的字段只读行为存在问题。我们通常在绑定定义中编写条件来告诉字段何时应该是只读的，因此当满足条件时，表单（HTML 浏览器）上的字段将不可编辑。

但是，在该字段的 HTML 页面源代码中，我们看到该字段支持属性 disabled="disabled" 但不是 readonly="readonly"。由于属性 disabled="disabled"，输入字段中的数据将显示为灰色（**IE 浏览器，windows 默认外观**），并且看起来模糊/暗淡，因此无法正确查看。此外，我们不能通过 css 属性为禁用字段更改输入数据的颜色，但我们可以对具有属性 readonly="readonly" 的字段执行此操作。

所以问题是，当我们在 Orbeon 代码的绑定定义中说 readonly="true" 时，是否有可能在 HTML 浏览器上将属性设置为 readonly="readonly" 而不是 disabled="disabled"

示例 Orbeon 代码和 HTML 页面源快照如下

```
<xhtml:html xmlns:xforms="http://www.w3.org/2002/xforms"
    xmlns:f="http://orbeon.org/oxf/xml/formatting"
    xmlns:xhtml="http://www.w3.org/1999/xhtml"
    xmlns:xxforms="http://orbeon.org/oxf/xml/xforms"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    >

    <xhtml:head>
        <xforms:model xmlns:xforms="http://www.w3.org/2002/xforms"
                xmlns:xs="http://www.w3.org/2001/XMLSchema" id="main-model">

          <xforms:instance id="form-instance">
            <form>
              <field-1></field-1>
              <field-2></field-2>
              <field-3></field-3>
            </form>
          </xforms:instance>

          <xforms:instance id="form-attributes">
            <attributes>
                <summary>false</summary>
            </attributes>
          </xforms:instance>

          <xforms:bind id="summary" nodeset="instance('form-attributes')/summary" />
          <xxforms:variable name="summary" select="instance('form-attributes')/summary" />

          <xforms:bind nodeset="instance('form-instance')" readonly="$summary='true'" />

          <xforms:bind id="field-1" nodeset="instance('form-instance')/field-1" />
          <xforms:bind id="field-2" nodeset="instance('form-instance')/field-2" />
          <xforms:bind id="field-3" nodeset="instance('form-instance')/field-3" />

        </xforms:model>
    </xhtml:head>

    <xhtml:body>

      <table>
        <tr>
            <td>
                <xforms:trigger appearance="minimal" id="readonly-view">
                    <xforms:label>Readonly View</xforms:label>
                    <xforms:action ev:event="DOMActivate">
                        <xforms:setvalue bind="summary" value="'true'" />
                    </xforms:action>
                </xforms:trigger>
            </td>
            <td>
                <xforms:trigger appearance="minimal" id="editable-view">
                    <xforms:label>Editable View</xforms:label>
                    <xforms:action ev:event="DOMActivate">
                        <xforms:setvalue bind="summary" value="'false'" />
                    </xforms:action>
                </xforms:trigger>
            </td>
        </tr>
        <tr>
            <td>
                Field 1: 
            </td>
            <td>
                <xforms:input bind="field-1" id="field-1-id" xxforms:maxlength="10" /> 
            </td>
        </tr>
        <tr>
            <td>
                Field 2: 
            </td>
            <td>
                <xforms:input bind="field-2" id="field-2-id" xxforms:maxlength="10" /> 
            </td>
        </tr>
        <tr>
            <td>
                Field 3: 
            </td>
            <td>
                <xforms:input bind="field-3" id="field-3-id" xxforms:maxlength="10" /> 
            </td>
        </tr>
      </table>

    </xhtml:body>
</xhtml:html> 
```

HTML 页面源代码的快照：

![在此处输入图像描述](../Images/62b878aa9bc66f29bdbfeda6ef0adfea.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T22:55:37.273

此时，正如您所注意到的，Orbeon Forms`disabled="disabled"`在只读表单字段上生成`readonly="readonly"`，而不是在不更改 Orbeon Forms 的情况下无法更改。

您的问题的一个可能的解决方案是使用[只读控件的静态外观，它只](http://wiki.orbeon.com/forms/doc/developer-guide/xforms-mips#TOC-Static-appearance-for-read-only-controls)显示字段的值，其方式类似于 an`xf:output`将执行的操作，而不是只读表单字段。这通常对于非常轻松地创建*评论页面*很有用，您可以在其中向用户展示他们在提交之前输入的所有值。

# sql - 当我从另一个表更新表时没有得到正确的结果

> ID：12753775
> 
> 赞同：0
> 
> 时间：2012-10-05T20:45:23.723
> 
> 标签：sql

我正在尝试在 sql 查询中使用 update / where 来匹配 ID，然后将关联的数据拉到我的表中。

我遇到了一个问题。

首先，当我跑步时

```
UPDATE table1
SET table1.column = table2.column
FROM table2
WHERE table1.columnB = table2.columnB 
```

它适用于某些人，而不适用于其他人。它就像50/50的成功。有些结果是完全错误的，我不知道为什么。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T20:49:23.170

我能想到的唯一原因是连接不是一对一的。也就是说，table2 中有多个行与 table1 中的每一行匹配。在这种情况下，结果来自任意行。

# java - 使用 .getInt (Android) 时出现 NullPointerException 和应用程序崩溃

> ID：12753779
> 
> 赞同：1
> 
> 时间：2012-10-05T20:45:54.690
> 
> 标签：java, android, eclipse, android-intent, nullpointerexception

我在我的 Android 应用程序上使用了一个意图和 getIntent，但它在模拟器中崩溃了。Logcat 表明我的问题是 NullPointerException 但从昨天开始我就是找不到解决这个问题的方法。

这是我的Logcat：

```
10-05 20:27:12.053: E/AndroidRuntime(246): Uncaught handler: thread main exiting due to uncaught exception
10-05 20:27:12.063: E/AndroidRuntime(246): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.Tonos/com.example.Tonos.TonosSet}: java.lang.NullPointerException
10-05 20:27:12.063: E/AndroidRuntime(246):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
10-05 20:27:12.063: E/AndroidRuntime(246):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
10-05 20:27:12.063: E/AndroidRuntime(246):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
10-05 20:27:12.063: E/AndroidRuntime(246):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
10-05 20:27:12.063: E/AndroidRuntime(246):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-05 20:27:12.063: E/AndroidRuntime(246):  at android.os.Looper.loop(Looper.java:123)
10-05 20:27:12.063: E/AndroidRuntime(246):  at android.app.ActivityThread.main(ActivityThread.java:4363)
10-05 20:27:12.063: E/AndroidRuntime(246):  at java.lang.reflect.Method.invokeNative(Native Method)
10-05 20:27:12.063: E/AndroidRuntime(246):  at java.lang.reflect.Method.invoke(Method.java:521)
10-05 20:27:12.063: E/AndroidRuntime(246):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
10-05 20:27:12.063: E/AndroidRuntime(246):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
10-05 20:27:12.063: E/AndroidRuntime(246):  at dalvik.system.NativeStart.main(Native Method)
10-05 20:27:12.063: E/AndroidRuntime(246): Caused by: java.lang.NullPointerException
10-05 20:27:12.063: E/AndroidRuntime(246):  at com.example.Tonos.TonosSet.onCreate(TonosSet.java:21)
10-05 20:27:12.063: E/AndroidRuntime(246):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-05 20:27:12.063: E/AndroidRuntime(246):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
10-05 20:27:12.063: E/AndroidRuntime(246):  ... 11 more 
```

这是我的“TonosSet.java”：

```
package com.example.Tonos;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.ImageView;
import android.widget.TextView;

public class TonosSet extends Activity {
/**
 * @see android.app.Activity#onCreate(Bundle)
 */
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.tonos_set);

    Intent i = getIntent();
    int position = i.getExtras().getInt("id");

    ImageView imageView = (ImageView) findViewById(R.id.full_image_view2);
    TextView textView1 = (TextView)findViewById(R.id.namesong);
    TextView textView2 = (TextView)findViewById(R.id.artist);

    switch (position){
    case 0:        
        imageView.setImageResource(R.drawable.pico);

        textView1.setText("Tone1");
        textView2.setText("Someone");        
    break;

    case 1:        
        imageView.setImageResource(R.drawable.pict);

        textView1.setText("Tone2");
        textView2.setText("Someone");           
    break;

    }

}
} 
```

下面是创建 Intent "i" (Tonos.java) 的代码部分：

```
....            
maListViewPerso.setAdapter(mSchedule);

    maListViewPerso.setOnItemClickListener(new OnItemClickListener() {
            @Override
        @SuppressWarnings("unchecked")
        public void onItemClick(AdapterView<?> a, View v, int position, long id){
                HashMap<String, String> map = (HashMap<String, String>) maListViewPerso.getItemAtPosition(position);

                Toast.makeText(Tonos.this, "" + position, Toast.LENGTH_SHORT).show();

                Intent tonosset = new Intent(Tonos.this, TonosSet.class);
                startActivity(tonosset);

                Intent i = new Intent(getApplicationContext(), TonosSet.class);

                i.putExtra("id", position);
                startActivity(i);

            }

    });

}
} 
```

非常感谢你们！=)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:50:16.180

```
 // First time you start TonosSet activity (without extra)
 // If you want to start TonosSet activity only once, comment two following line
 Intent tonosset = new Intent(Tonos.this, TonosSet.class);
 startActivity(tonosset);

 // Second time you start TonosSet activity (with extra this time)
 Intent i = new Intent(getApplicationContext(), TonosSet.class);
 i.putExtra("id", position);
 startActivity(i); 
```

您启动了两次 TonosSet 活动。第一次启动它时，意图没有额外的。要解决您的问题，请检查您的意图是否有额外的。

```
Intent i = getIntent();
int position = -1; // init with default value
if(i.getExtras() != null)
    position = i.getExtras().getInt("id"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T20:55:37.233

```
 Intent tonosset = new Intent(Tonos.this, TonosSet.class); 
            startActivity(tonosset); 

            Intent i = new Intent(getApplicationContext(), TonosSet.class); 

            i.putExtra("id", position); 
            startActivity(i); 
```

您正在创建两个意图：一个有额外的，另一个没有。当您尝试从没有的活动中获得额外的东西时，就会发生 NPE。

# passwords - 如何更改 LAMP 密码？

> ID：12753781
> 
> 赞同：0
> 
> 时间：2012-10-05T20:46:08.340
> 
> 标签：passwords, xampp, lampp

我不小心为lampp中的xampp页面设置了密码。

如何更改/删除密码（用于lampp）？

我的lampp版本是1.8.1，在Ubuntu下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T10:09:45.150

输入 sudo /opt/lampp/lampp security。这将要求您更改密码。如果您是 sudoer，则无需输入旧密码。如果这不能解决您的问题，请访问此链接 [a link] [http://www.apachefriends.org/f/viewtopic.php?p=193142&sid=d84e4bebb8b922f339a2b1b1e812a05a](http://www.apachefriends.org/f/viewtopic.php?p=193142&sid=d84e4bebb8b922f339a2b1b1e812a05a)

# wso2 - 带有 SessionID 的 WSO2 身份服务器身份验证

> ID：12753784
> 
> 赞同：1
> 
> 时间：2012-10-05T20:46:17.293
> 
> 标签：wso2, wso2carbon, wso2is

我有一个网站，该网站将有一个 GUI，用户在其中输入用户名/密码，然后该网站将通过 Web 服务将凭据发送到 WSO2 身份服务器。

我正在考虑使用“AuthenticationAdmin”服务的“登录”操作。但是，我希望该服务的“LoginResponse”也返回一个 sessionID 而不仅仅是真/假。

有人可以告诉我我是否走在正确的道路上吗？

如果没有，有人可以指导我如何做到这一点吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T06:22:38.987

login 方法实际上返回一个会话 cookie，但它不在响应正文中，它在标头中。[在此处](http://blog.facilelogin.com/2010/05/managing-users-and-roles-with-wso2.html)查看以下博客文章。调用 login() 方法后，您可以从服务上下文中获取 cookie，如下所示：

```
(String) authstub._getServiceClient().getServiceContext().getProperty(  
  HTTPConstants.COOKIE_STRING); 
```

然后将其用于其他呼叫。

# android - 在 Android 4.0 (ICS) 上反转颜色

> ID：12753788
> 
> 赞同：2
> 
> 时间：2012-10-05T20:46:40.487
> 
> 标签：android, api, colors, screen, android-4.0-ice-cream-sandwich

我有一个小部件，它利用了一个新功能，根据 intarwebs 的无限智慧，它是 Android 4.0（冰淇淋三明治）中的股票。方便的是，我的手机就是这样。

此小部件反转手机的屏幕颜色。不仅仅是一个应用程序；整个屏幕。

前几天我开始玩一个名为 Tasker 的惊人应用程序，它可以做一些非常强大的事情；包括运行脚本、向手机发送命令等。

我试图弄清楚这种倒置存在于世界的哪个地方，这样我就可以通过 Tasker 自己利用它，但我到处都达不到要求。Android API 文档对我来说是希腊语，而 Google 似乎只想向我指出人们谈论该功能有多棒。

关于我在哪里可以找到这个功能/功能/动作/在编程意义上的任何想法？

提前非常感谢！任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T22:34:22.417

我已经搜索过，唯一发现的是它在自定义 rom/内核上可用。

我认为它不适用于股票 rom。

# networking - 在启用环回的多播下，数据包在出入和返回的过程中经过什么路径？

> ID：12753794
> 
> 赞同：0
> 
> 时间：2012-10-05T20:46:57.240
> 
> 标签：networking, network-programming, multicast, latency

我想知道是否可以使用环回的出站数据包来隔离和测量硬件网络接口卡的延迟......或者这种方法是否行不通？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T22:25:31.163

它可能不会靠近 NIC，只是内核中的短路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T13:43:31.190

数据包通过环回，数据包在网络堆栈中向下传递到环回驱动程序。它不会去任何靠近硬件接口的地方。

# iphone - 如何快速访问 Xcode 4.5.1 中的文档？

> ID：12753796
> 
> 赞同：2
> 
> 时间：2012-10-05T20:47:08.113
> 
> 标签：iphone, xcode, ipad, xcode4

如何在 Xcode 4.5 中快速访问符号、方法、枚举等的文档？

alt + 单击符号显示快速信息。苹果删除了打开文档的字典图标。我尝试了 cmd / alt / shift / click mumbo jumbo dance 的所有其他可能的快捷方式，但都没有打开文档浏览器。

我想有一个隐藏的技巧可以快速打开它吗？

**编辑：发现这个新的快速信息框有一个文档链接。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T21:09:15.750

**⌘ Command + 双击**符号：跳转到符号的定义。

**⌥ Option + 双击**符号：在符号的文档中查找文本。（仅当您安装了它们的符号的文档集时才有效。）

您应该查看[此 URL](https://stackoverflow.com/questions/146297/hidden-features-of-xcode)以了解有关快捷方式的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:52:39.193

你在你的问题中说“快速”，坦率地说，xcode 在快速阅读文档方面很糟糕

我建议你从应用商店安装免费的[Dash](http://itunes.apple.com/gb/app/dash-docs-snippets/id458034879?mt=12) - 这是一个比 xcode 快得多的文档查看器

然后为 Xcode 安装这个插件

```
https://github.com/omz/Dash-Plugin-for-Xcode 
```

现在在符号上执行“alt + click”会立即打开 Dash 到正确的文档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:48:49.983

**Alt + 双击**任何符号以打开文档。

# android - 控制 Google Play 应用描述中的空行

> ID：12753801
> 
> 赞同：6
> 
> 时间：2012-10-05T20:47:27.730
> 
> 标签：android, google-play

在 Google Play 中发布我的应用程序的描述时，我很难控制我的文本段落之间是否出现空行。我提交的文本总是在段落之间包含空白行，但其中一些在已发布的版本中被删除。我发现如果我使用
标签，我会得到两个空行，这也不是我想要的。

有人想出这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T18:54:04.690

我设法通过反复试验偶然发现了一个解决方案。对我有用的是用换行符、空格和另一个换行符分隔段落。换句话说，段落之间的空白行包括该空白行上的空格。

# go - 类型转换接口切片

> ID：12753805
> 
> 赞同：262
> 
> 时间：2012-10-05T20:48:07.237
> 
> 标签：go, go-reflect, go-interface

我很好奇为什么 Go 不会隐式转换为何`[]T`时`[]interface{}`隐式转换`T`为`interface{}`. 我错过了这种转换是否有一些重要的东西？

例子：

```
func foo([]interface{}) { /* do something */ }

func main() {
    var a []string = []string{"hello", "world"}
    foo(a)
} 
```

`go build`抱怨

> 不能在函数参数中使用 (type []string) 作为类型 []interface {}

如果我尝试明确地这样做，同样的事情：`b := []interface{}(a)`抱怨

> 无法将 (type []string) 转换为 type []interface {}

所以每次我需要进行这种转换（这似乎经常出现）时，我一直在做这样的事情：

```
b = make([]interface{}, len(a), len(a))
for i := range a {
    b[i] = a[i]
} 
```

有没有更好的方法来做到这一点，或者标准库函数来帮助这些转换？每次我想调用一个可以获取整数或字符串列表的函数时，多写 4 行代码似乎有点愚蠢。

* * *

## 回答 #1

> 赞同：288
> 
> 时间：2012-10-05T22:16:52.627

在 Go 中，有一条通用规则，即语法不应隐藏复杂/昂贵的操作。将 a 转换`string`为 an`interface{}`在 O(1) 时间内完成。将 a 转换`[]string`为 an`interface{}`也是在 O(1) 时间内完成的，因为切片仍然是一个值。但是，将 a 转换`[]string`为 an`[]interface{}`需要 O(n) 时间，因为切片的每个元素都必须转换为 an `interface{}`。

此规则的一个例外是转换字符串。在将 a`string`与 a`[]byte`或 a`[]rune`相互转换时，即使转换是“语法”，Go 也会 O(n) 工作。

没有标准库函数可以为您进行这种转换。您可以使用反射制作一个，但它会比三行选项慢。

反射示例：

```
func InterfaceSlice(slice interface{}) []interface{} {
    s := reflect.ValueOf(slice)
    if s.Kind() != reflect.Slice {
        panic("InterfaceSlice() given a non-slice type")
    }

    // Keep the distinction between nil and empty slice input
    if s.IsNil() {
        return nil
    }

    ret := make([]interface{}, s.Len())

    for i:=0; i<s.Len(); i++ {
        ret[i] = s.Index(i).Interface()
    }

    return ret
} 
```

不过，您最好的选择就是使用您在问题中提供的代码行：

```
b := make([]interface{}, len(a))
for i := range a {
    b[i] = a[i]
} 
```

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2012-10-06T08:12:52.933

您缺少的是，`T`它`interface{}`的值`T`在内存中有不同的表示形式，因此不能简单地转换。

类型变量`T`只是它在内存中的值。没有关联的类型信息（在 Go 中，每个变量都有一个在编译时而不是在运行时已知的单一类型）。它在内存中表示如下：

*   价值

`interface{}`持有一个类型的变量在`T`内存中表示如下

*   类型指针`T`
*   价值

所以回到你原来的问题：为什么 go 不隐式转换`[]T`为`[]interface{}`？

转换`[]T`为`[]interface{}`将涉及创建一个新的`interface {}`值切片，这是一个不平凡的操作，因为内存中的布局完全不同。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-10-20T23:03:59.803

这里是官方的解释：[https ://github.com/golang/go/wiki/InterfaceSlice](https://github.com/golang/go/wiki/InterfaceSlice)

```
var dataSlice []int = foo()
var interfaceSlice []interface{} = make([]interface{}, len(dataSlice))
for i, d := range dataSlice {
    interfaceSlice[i] = d
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-05T21:56:23.463

试试`interface{}`吧。要作为切片回滚，请尝试

```
func foo(bar interface{}) {
    s := bar.([]string)
    // ...
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-02-20T17:39:54.733

如果您需要更多缩短代码，您可以为助手创建新类型

```
type Strings []string

func (ss Strings) ToInterfaceSlice() []interface{} {
    iface := make([]interface{}, len(ss))
    for i := range ss {
        iface[i] = ss[i]
    }
    return iface
} 
```

然后

```
a := []strings{"a", "b", "c", "d"}
sliceIFace := Strings(a).ToInterfaceSlice() 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-09-24T03:46:17.773

我很好奇通过反射转换接口数组与在循环中执行它相比要慢多少，如[斯蒂芬的回答](https://stackoverflow.com/a/12754757/901019)中所述。这是两种方法的基准比较：

```
benchmark                             iter      time/iter   bytes alloc         allocs
---------                             ----      ---------   -----------         ------
BenchmarkLoopConversion-12         2285820   522.30 ns/op      400 B/op   11 allocs/op
BenchmarkReflectionConversion-12   1780002   669.00 ns/op      584 B/op   13 allocs/op 
```

因此，使用循环比通过反射**快约 20% 。**

这是我的测试代码，以防您想验证我是否正确地做事：

```
 import (
        "math/rand"
        "reflect"
        "testing"
        "time"
    )

    func InterfaceSlice(slice interface{}) []interface{} {
        s := reflect.ValueOf(slice)
        if s.Kind() != reflect.Slice {
            panic("InterfaceSlice() given a non-slice type")
        }

        // Keep the distinction between nil and empty slice input
        if s.IsNil() {
            return nil
        }

        ret := make([]interface{}, s.Len())

        for i := 0; i < s.Len(); i++ {
            ret[i] = s.Index(i).Interface()
        }

        return ret
    }

    type TestStruct struct {
        name string
        age  int
    }

    var letters = []rune("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ")

    func randSeq(n int) string {
        b := make([]rune, n)
        for i := range b {
            b[i] = letters[rand.Intn(len(letters))]
        }
        return string(b)
    }

    func randTestStruct(lenArray int, lenMap int) map[int][]TestStruct {
        randomStructMap := make(map[int][]TestStruct, lenMap)
        for i := 0; i < lenMap; i++ {
            var testStructs = make([]TestStruct, 0)
            for k := 0; k < lenArray; k++ {
                rand.Seed(time.Now().UnixNano())
                randomString := randSeq(10)
                randomInt := rand.Intn(100)
                testStructs = append(testStructs, TestStruct{name: randomString, age: randomInt})
            }
            randomStructMap[i] = testStructs
        }
        return randomStructMap
    }

    func BenchmarkLoopConversion(b *testing.B) {
        var testStructMap = randTestStruct(10, 100)
        b.ResetTimer()

        for i := 0; i < b.N; i++ {
            obj := make([]interface{}, len(testStructMap[i%100]))
            for k := range testStructMap[i%100] {
                obj[k] = testStructMap[i%100][k]
            }
        }
    }

    func BenchmarkReflectionConversion(b *testing.B) {
        var testStructMap = randTestStruct(10, 100)
        b.ResetTimer()

        for i := 0; i < b.N; i++ {
            obj := make([]interface{}, len(testStructMap[i%100]))
            obj = InterfaceSlice(testStructMap[i%100])
            _ = obj
        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-01T23:01:38.217

在 Go 1.18 或更高版本中，使用以下函数将任意切片类型转换为`[]interface{}`：

```
func ToSliceOfInterface[T any](s []T) []interface{} {
    result := make([]interface{}, len(s))
    for i, v := range s {
        result[i] = v
    }
    return result
} 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2019-03-25T13:06:29.053

转换`interface{}`成任何类型。

句法：

```
result := interface.(datatype) 
```

例子：

```
var employee interface{} = []string{"Jhon", "Arya"}
result := employee.([]string)   //result type is []string. 
```

# iphone - 在不使用自动布局的情况下调整 iPhone 5 屏幕大小

> ID：12753806
> 
> 赞同：0
> 
> 时间：2012-10-05T20:48:20.850
> 
> 标签：iphone, objective-c, xcode, ios6, iphone-5

在 .xib 或 .storyboard 中启用自动布局并添加 640 像素 x 1136 像素的初始屏幕可以使 iPhone 5 分辨率支持更高的屏幕。

然而，这样做，我的应用程序开始显示一些有趣的东西，我认为自动布局不是一个好主意。

我想知道是否有办法启用 iPhone 5 设备支持，即在不使用 Autolayout 的情况下修复应用程序的分辨率？也许我可以在代码中设置？

如果是，那么我将不需要创建 2 个故事板或 nib 来支持 iOS5 和 iOS6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:08:34.490

如果您之前没有使用 Autolayout，则无需使用它来支持 iPhone 5。

当您将界面放在一起时，您只需要检查您的绑定，并在较高的手机尺寸和常规手机尺寸之间切换，如下所述： [Xcode Storyboard 显示新的 iPhone 5 屏幕尺寸？](https://stackoverflow.com/questions/12584376/xcode-storyboard-displaying-the-new-iphone-5-screen-size/12586135#12586135)

如果您的屏幕在两种屏幕尺寸下看起来都不错，那么您就完成了。

如果您正在编写大量代码来显示您的 UI，那么您将有更多工作要做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T04:52:30.277

几周前我找到了一个很好的答案（下面的链接）。您将复制并粘贴旧 iPhone 故事板，将其重命名以反映 iPhone 5，然后按下位于布局网格底部的扩大屏幕尺寸的按钮。可能需要进行一些小的编码调整，但此示例代码在 AppDelegate 中用于检测正在运行的设备，从而检测要使用的 Storyboard。你只需要复制你的界面，但这些 GUI 更改可以在没有代码和 AutoLayout 的情况下进行（还需要注意 AutoLayout 删除了 iOS 5 和更低的兼容性）

[xcode 4.5 如何在启动时选择故事板](https://stackoverflow.com/questions/12536689/xcode-4-5-how-to-pick-storyboards-at-launch)

# ruby - 如何在 node.js 中执行此 PKCS7 登录？

> ID：12753817
> 
> 赞同：8
> 
> 时间：2012-10-05T20:48:53.423
> 
> 标签：ruby, node.js, cryptography, openssl, certificate

所以我将一个 ruby​​ 库移植到 node.js，并且需要创建一个 PKCS7 签名。

这是 ruby​​ 库正在做的事情：

```
p12_certificate = OpenSSL::PKCS12::new(File.read('some-path.c12'), self.certificate_password)
x509_certificate = OpenSSL::X509::Certificate.new(File.read('some-other-path.pem'))

flag = OpenSSL::PKCS7::BINARY|OpenSSL::PKCS7::DETACHED
signed = OpenSSL::PKCS7::sign(p12_certificate.certificate, p12_certificate.key, File.read('some-manifest'), [x509_certificate], flag) 
```

我将如何在节点中实现相同的目标？我认为它会是这样的：

```
crypto.createCredentials({
  pfx : fs.readFileSync('some-cert.p12'),
  passphrase : this.certificate_password,
  cert : fs.readFileSync('some-path.pem','some-encoding'),
}) 
```

问题：

*   这是正确的方法吗？
*   我是否需要指定密钥、ca 列表、crl 列表或密码列表？
*   我应该使用什么编码来读取证书？
*   线设置的节点等价物是什么`signed`
*   节点等价于什么`signed.to_der`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-20T14:26:56.633

这段代码可以帮助你。专为 PKCS7 设计，但您可以根据需要修改 de openssl 命令行。

```
 var util = require('util');
var spawn = require('child_process').spawn;
var Promise = require('promise');

// Expose methods.
exports.sign = sign;

/**
 * Sign a file.
 *
 * @param {object} options Options
 * @param {stream.Readable} options.content Content stream
 * @param {string} options.key Key path
 * @param {string} options.cert Cert path
 * @param {string} [options.password] Key password
 * @param {function} [cb] Optional callback
 * @returns {object} result Result
 * @returns {string} result.pem Pem signature
 * @returns {string} result.der Der signature
 * @returns {string} result.stdout Strict stdout
 * @returns {string} result.stderr Strict stderr
 * @returns {ChildProcess} result.child Child process
 */

function sign(options, cb) {
    return new Promise(function (resolve, reject) {
        options = options || {};

        if (!options.content)
            throw new Error('Invalid content.');

        if (!options.key)
            throw new Error('Invalid key.');

        if (!options.cert)
            throw new Error('Invalid certificate.');

        var command = util.format(
            'openssl smime -sign -text -signer %s -inkey %s -outform DER -nodetach',
            options.cert,
            options.key
        );

        if (options.password)
            command += util.format(' -passin pass:%s', options.password);

        var args = command.split(' ');
        var child = spawn(args[0], args.splice(1));

        var der = [];

        child.stdout.on('data', function (chunk) {
            der.push(chunk);
        });

        child.on('close', function (code) {
            if (code !== 0)
                reject(new Error('Process failed.'));
            else
                resolve({
                    child: child,
                    der: Buffer.concat(der)
                });
        });

        options.content.pipe(child.stdin);
    })
        .nodeify(cb);
} 
```

我的文件名为：signHelper。这是调用它的代码：

```
signHelper.sign({
            content: s, 
            key: path.join(__dirname, '../certs/test/' + "keyfile.key")//,
            cert: path.join(__dirname, '../certs/test/' + "certfile.crt"),
            password: 'password'
        }).catch(function (err) {
            logger.error("Error signing: " + err.stack);
            callback(err);
        }).then(function (result) {
            logger.info("signTicket ++++++++++++");
            callback(null, result.der); //result.der is the signed certificate
        }); 
```

您只需要了解如何使用 openssl 做您需要的事情。我希望这个对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T09:49:02.053

目前无法在 node 或 iojs 中本地执行此操作，您可以做的最好的事情是使用[smime 模块](https://github.com/hipush/smime)运行 exec 命令，例如。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T13:23:58.717

[验证 PKCS#7 (PEM) 签名/解压 node.js 中的数据](https://stackoverflow.com/questions/15969733/verify-pkcs7-pem-signature-unpack-data-in-node-js)

不能评论超过链接，但希望这可以让你开始。这只是验证签名，但是我相信您可以将其反向工程为创建一个。

# python - Google Apps API：日历订阅的无损检查

> ID：12753818
> 
> 赞同：1
> 
> 时间：2012-10-05T20:49:03.990
> 
> 标签：python, google-calendar-api

我正在编写一个命令行脚本来为我们的 Google 域（教育和商业应用程序）上的每个帐户订阅一个单一的学术日程日历。似乎没有一种简单的方法可以强制执行此操作，因此我使用 Calendar API V2 和 python API 客户端来获取所有帐户并单独订阅日历。API 会根据用户是否已经订阅日历做出不同的响应，但是文档似乎没有说明在不更改订阅状态的情况下检查某人是否已经订阅日历的任何方法。

[https://developers.google.com/google-apps/calendar/v2/developers_guide_python#ManagingSubscriptions](https://developers.google.com/google-apps/calendar/v2/developers_guide_python#ManagingSubscriptions)

我需要一种非破坏性的方法来找出谁已经订阅了日历，这样我们就可以制作一个列表并在我们决定取消整个日历工作时回滚。

现在我能想到的最好的方法是执行更改并记录哪些已经订阅，但我真的很想看看在我将它释放到生产之前是否有一种无副作用的方法领域。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:58:08.937

您可以检索用户列表中所有日历的列表。请注意，这包括用户不会在其 UI 中看到的隐藏日历：

[https://developers.google.com/google-apps/calendar/v2/developers_guide_python#RetrievingCalendars](https://developers.google.com/google-apps/calendar/v2/developers_guide_python#RetrievingCalendars)

feed = calendar_client.GetAllCalendarsFeed() print feed.title.text for i, a_calendar in enumerate(feed.entry): print '\t%s. %s' % (i, a_calendar.title.text,)

# ruby-on-rails - rspec find_by_id 和错误的参数数量（0 代表 1）

> ID：12753820
> 
> 赞同：0
> 
> 时间：2012-10-05T20:49:13.367
> 
> 标签：ruby-on-rails, rspec

不知何故，我无法弄清楚为什么我的请求规范由于错误而失败：

参数数量错误（0 代表 1）

当我在 show 方法中使用 find_by_id 时。

这是我的表演方法

```
def show
  @message = Message.find_by_id(params[:id])

  # rest of code
end 
```

这是我的要求规格

```
require 'spec_helper'

describe "message pages" do
  subject { page }

  before do
    @message = FactoryGirl.create(:message)
  end

  it "should show message page properly" do
    visit message_path(@message.id)
    page.should have_content(@message.content) # this fails as message path ends up with wrong number of arguments error
  end
end 
```

如果我将 find_by_id() 更改为 find() 则一切正常。我需要 find_by_id 因为我不想引发 404 错误，而是想检查是否为 nil 然后将用户引导到适当的页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:40:52.427

你可以试试：

```
visit message_path(@message) 
```

或者

```
visit message_path(id: @message.id) 
```

并报告

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T06:30:33.850

而不是“find_by_id”（顺便说一句已弃用......），您可以使用`find`并从异常中拯救。这要简单得多。

```
def show
  begin
    @message = Message.find(params[:id])
  rescue ActiveRecord::NotFound
    do whatever you want on missing message
    return
  end
  # rest of code
end 
```

# css - ::首字母伪元素在Firefox中不起作用

> ID：12753822
> 
> 赞同：3
> 
> 时间：2012-10-05T20:49:19.277
> 
> 标签：css, firefox, pseudo-element

我一生都无法弄清楚这一点。我只想将美元符号设置为不同的颜色，并且我想避免在美元符号周围使用其他元素。

```
<ul>
    <li><strong>John Dow</strong> <div>$5,849,487<sup>84</sup></div></li>
    <li><strong>David Jones</strong> <div>$5,498,364<sup>01</sup></div></li>
    <li><strong>Susie Smith</strong> <div>$5,098,276<sup>35</sup></div></li>
</ul> 
```

这个CSS：

```
li::first-letter {
    color: blue;
}
li div::first-letter {
    color: red;
}​​ 
```

蓝色有效，红色无效。

[http://jsfiddle.net/ryanwheale/KUzUp/](http://jsfiddle.net/ryanwheale/KUzUp/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T20:53:37.760

这似乎是由于`$`Firefox 没有将字符解释为字母字符，基于发现用`$`字母字符 ( `A`, `B`, `C`...) 替换 会导致演示工作：

```
<ul>
    <li><strong>David Wilcox</strong> <div>A$5,849,487<sup>84</sup></div></li>
    <li><strong>David Cowee</strong> <div>B$5,498,364<sup>01</sup></div></li>
    <li><strong>D.J. Johnson</strong> <div>C$5,098,276<sup>35</sup></div></li>
</ul>​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/KUzUp/4/)。

不过，重新审视这个问题，值得注意的是，现在您可以使用 CSS 生成内容来提供和样式化第一个字符，使用`::before`：

```
li div::before {
    content: '$';
    color: red;
} 
```

使用 HTML：

```
<ul>
    <li><strong>David Wilcox</strong> 
        <div>5,849,487<sup>84</sup>
        </div>
    </li>
    <!-- siblings removed for brevity -->
</ul> 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/KUzUp/48/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T20:54:31.393

一切正常：`::first-letter`选择第一个字母，但“$”不是字母而是特殊字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T21:01:52.710

其他人已经解释了为什么它不起作用，所以，你可以考虑一个小修复：给你的钱 div 一个类，例如

```
<li><strong>David Wilcox</strong> <div class="money">5,849,487<sup>84</sup></div></li> 
```

取出文字 $，并将其放入`:before`内容中，例如：

```
.money:before {
    content: '$';
    ...
} 
```

现在你可以随心所欲地设计它。

# cuda - Cuda：内核启动队列

> ID：12753825
> 
> 赞同：4
> 
> 时间：2012-10-05T20:49:38.993
> 
> 标签：cuda

我没有找到关于内核启动操作机制的太多信息。[API](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_Toolkit_Reference_Manual.pdf)说要[查看](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf)CudaProgGuide 。而且我在那里也找不到太多东西。
由于内核执行是异步的，并且某些机器支持并发执行，因此我相信内核有一个队列。

```
 Host code:      
    1\. malloc(hostArry, ......);  
    2\. cudaMalloc(deviceArry, .....);  
    3\. cudaMemcpy(deviceArry, hostArry, ... hostToDevice);
    4\. kernelA<<<1,300>>>(int, int);  
    5\. kernelB<<<10,2>>>(float, int));  
    6\. cudaMemcpy(hostArry, deviceArry, ... deviceToHost);  
    7\. cudaFree(deviceArry); 
```

第 3 行是同步的。第 4 & 5 行是异步的，机器支持并发执行。所以在某些时候，这两个内核都在 GPU 上运行。（kernelB 有可能在 kernelA 完成之前启动并完成。）此时，主机正在执行第 6 行。第 6 行相对于复制操作是同步的，但没有什么阻止它在 kernelA 或之前执行kernelB 已完成。

1）GPU中有内核队列吗？（GPU 是否阻塞/停止主机？）
2）主机如何知道内核已经完成，并且将结果从设备传输到主机是“安全的”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-14T01:44:47.947

是的，GPU 上有各种各样的队列，由驱动程序管理。

异步调用或多或少会立即返回。在操作完成之前，同步调用不会返回。内核调用是异步的。`Async`如果它们是异步的，则大多数其他 CUDA 运行时 API 调用都由后缀指定。所以回答你的问题：

> 1）GPU中有内核队列吗？（GPU 会阻塞/停止主机吗？）

有各种各样的队列。GPU 在同步调用上阻塞/停止主机，但内核启动不是同步操作。它会立即返回，在内核完成之前，甚至可能在内核启动之前。将操作启动到单个流中时，该流中的所有 CUDA 操作都是*序列化*的。*因此，即使内核启动是异步的，您也不会观察到启动到同一个流的两个内核的重叠执行，因为 CUDA 子系统保证一个流中的给定 CUDA 操作直到同一流中的*所有先前 CUDA 操作才会启动*完成了。空流还有其他特定规则（如果您没有在代码中显式调用流，则使用该流），但前面的描述足以理解这个问题。*

 *> 2）主机如何知道内核已经完成，并且将结果从设备Xfer到主机是“安全的”？

由于将结果从设备传输到主机的操作是**CUDA**调用 (cudaMemcpy...)，并且它与前面的操作在同一流中发出，因此设备和*CUDA 驱动程序*管理 cuda 调用的执行顺序，以便cudaMemcpy 直到所有先前对同一流发出的 CUDA 调用都完成后才开始。因此`cudaMemcpy`，即使您使用`cudaMemcpyAsync`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:57:31.917

您可以在内核调用之后使用[cudaDeviceSynchronize()](http://www.clear.rice.edu/comp422/resources/cuda/html/group__CUDART__DEVICE_gb76422145b5425829597ebd1003303fe.html)来保证之前向设备请求的所有任务都已完成。如果kernelB 的结果与kernelA 的结果相互独立，则可以在内存复制操作之前设置该函数。如果没有，您将需要在调用 kernelB 之前阻塞设备，从而导致两次阻塞操作。*

# c++ - 适用于 C/C++、C#、.Net 的实时协作 IDE

> ID：12753832
> 
> 赞同：10
> 
> 时间：2012-10-05T20:49:58.863
> 
> 标签：c++, c, collaboration

我正在寻找可以与其他人协作的 IDE。我想进行实时编辑和颜色协调（这意味着如果 Bob 在线并更改了一些代码，那么他的更改将非常简单，类似于在 Google 上共享文档）。

我试过通过谷歌搜索，但我找不到任何真正适合我需要的东西。我目前是一名大学生，和其他同学有一些项目，但是使用 Pastebin 有点麻烦，因为我必须打开一个 IDE +一个网络浏览器，然后复制粘贴、共享等。

是否有任何 IDE 可以通过实时协作为 C/C++、C#、.Net 等进行编译？如果我必须在我的桌面上设置一个服务器以使其工作，我这样做没有问题

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T20:55:04.083

我相信实际上，使用分布式版本控制系统（如[git](http://git-scm.com/)，也许通过[gitorious](http://gitorious.org/)或[github](http://github.com)）是一个更明智的想法，至少对于像 C 这样的常用编程语言（并且你需要一个社交约定，至少就像 Bob 正在研究的那样）文件`foo.c`或功能`foofoo`，而爱丽丝专注于`bar.c`或功能`barbar`）。除了 git，您可能还想使用 IRC、聊天、pastebin 等进行实时通信。您可能不会一次编辑同一行（甚至可能是同一功能）两个远方的人。

像 C 这样的编程语言的语义不适合同时发布单一源代码的想法。（定义对这种共同开发理念友好的语言仍然是一个研究课题）。

顺便说一句，您不需要 IDE 来用 C 或 C++ 编写代码（尤其是在 Linux 上，它为您提供了许多其他工具`emacs`，或者`vim`或者`gedit`or `geany`, `grep`, `make`, `ctags`, `git`, `awk`... 一起使用）。许多非常大的 C 或 C++ 自由软件程序（GCC、Linux 内核、Gnome/GTK、Qt/KDE、LibreOffice ....）由许多没有 IDE 的合格人员编写。恕我直言，这是非常重要的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T20:59:50.803

我建议尝试：

*   [http://moonedit.com/](http://moonedit.com/) - 简单的实时编辑器
*   [http://www.saros-project.org/DemoVideo](http://www.saros-project.org/DemoVideo) - Eclipse 的实时编辑器（所以你可以在那里使用 C++）

在[http://en.wikipedia.org/wiki/Collaborative_real-time_editor](http://en.wikipedia.org/wiki/Collaborative_real-time_editor)有很多建议。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-03T01:15:22.763

这是一个旧线程，但如果其他人仍然对这个主题/功能感兴趣，现在有一堆基于 Web 的 IDE。如果你用谷歌搜索“web ide”，你会得到一份不错的协作 web IDE 列表。为了完整起见，我将列出我使用过和喜欢的一个：

[Cloud9 IDE](http://www.c9.io)

除了小的家庭作业，你最好使用[GIT](http://git-scm.com/book/en/v2/Getting-Started-About-Version-Control)或[Hg](http://mercurial.selenic.com/)之类的版本控制系统。尽管它们对于大多数小型家庭作业来说都是多余的；特别是如果它是一个入门课程，并且大多数学生已经很难独自学习编程材料。

另一个注意事项是，基于 Web 的 IDE 不一定与使用 VCS 互斥。您可以在 Cloud9 IDE 中使用 GIT。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T21:06:06.287

为自己省去麻烦并使用某种版本控制。无论是 git、hg、svn 还是你有的。选择你的毒药，但这是版本控制存在的很大一部分。为了交流？AIM、IRC、Skype，这并不重要。

在这种情况下，您可以拥有良好的版本控制、良好的 IDE 和良好的聊天程序，或者您可以拥有一个程序来同步您的代码、允许您聊天并允许您编辑代码，但可以做到以上所有不良。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T21:06:28.340

查看小队：

[http://squadedit.com/](http://squadedit.com/)

托管服务，因此设置很容易，并且它支持 C++ 语法突出显示。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-05T20:57:23.710

看看 EFC，[http://www.eclipse.org/ecf/](http://www.eclipse.org/ecf/)。更具体地说，可乐， http: [//vimeo.com/1195398](http://vimeo.com/1195398)。

# c# - 将项目添加到 Observablecollection 的语法

> ID：12753835
> 
> 赞同：0
> 
> 时间：2012-10-05T20:50:11.053
> 
> 标签：c#, wpf

我有一个公共词典定义为

```
public Dictionary<string, double> comboBoxSelections { get; set; } 
```

并使用添加项目

```
this.comboBoxSelections = new Dictionary<string, double>();
comboBoxSelections.Add(currItem, d); 
```

我想将其用作 WPF 中 ComboBox 的 ItemsSource，因此每当更新 comboBoxSelections 时，我都会在 ComboBox 中看到可供选择的更新项目。所以我想也许我需要把它包装在 ObservableCollection 中

```
public ObservableCollection<Dictionary<string, double>> comboBoxSelections { get; set; }
this.comboBoxSelections = new ObservableCollection<Dictionary<string, double>>(); 
```

将新字典项添加到 ObservableCollection 的语法是什么？就像是...

```
comboBoxSelections.Add(new Dictionary<string, double>(currItem, d)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:59:14.647

您可以使用`ObservableCollection<KeyValuePair<string,double>>`或`ObservableCollection<Tuple<string,double>>`绑定到 XAML 中的这些值。

[或者你可以在这里](https://stackoverflow.com/questions/3818365/wpf-how-can-i-implement-an-observablecollectionk-t-with-a-key-like-a-dictio)和[那里](http://drwpf.com/blog/2007/09/16/can-i-bind-my-itemscontrol-to-a-dictionary/)使用 ObservableDictionary 检查。

# jquery - jQuery on click 切换列表中的 DIV 并且一次只显示一个，并且 .dblclick() 上的相同 div 使用不同的切换？

> ID：12753840
> 
> 赞同：0
> 
> 时间：2012-10-05T20:50:24.857
> 
> 标签：jquery

我有一个水平的封面列表，如果您单击其中任何一个，它将切换并显示背面，但一次只能切换一个。但是，如果您双击前盖，它也会切换以显示不同的背面。

第一个切换有效，一次只显示一个。但是第二次切换`dblClick`不起作用。我不确定我是否需要更好地使用`onClick`明确地编写第一个切换，或者第二个切换是否无论如何都不可能？

的HTML

```
 <div id="cover-wrapper">
      <ul class="covers">
        <li class="cover" id="remove-cover">
            <div class="cover-front">
        <a href="javascript:showonlyone('show-back1');" >
               <img src="images/covers/1.png" />
            </a>
            </div>    
            <div class="cover-back" id="show-back1">
              <div class="content">
                 <!-- content here...  -->
              </div>
            </div>       
       </li>
       <li class="cover" id="remove-cover">
            <div class="cover-front">
        <a href="javascript:showonlyone('show-back2');" >
               <img src="images/covers/2.png" />
            </a>
            </div>    
            <div class="cover-back" id="show-back2">
              <div class="content">
                <!-- content here...  -->
              </div>
            </div>       
      </li> 
```

Javascript

```
//Toggle cover on click from front to back & only ever show one toggled from list
function showonlyone(thechosenone) {
  $(".cover-back").each(function(index) {
    if ($(this).attr("id") == thechosenone) {
      $(this).fadeIn(0);
    } else {
      $(this).fadeOut(0);
    }
  }
});

//Toggle cover on dblclick from front to back with different back div 
$(document).ready(function() {
  $("li.cover").dblclick(function() {
    if ($(this).hasClass("cover-back-2")) {
      $(this).toggleClass("cover-back-2", false);
    } else {
      $(this).toggleClass("cover-back-2", true);
    }
  });
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:04:07.193

我已将您的代码简化为

[http://jsfiddle.net/HkwTg/1/](http://jsfiddle.net/HkwTg/1/)

The toggleClass works on double click, you can see it in firebug, i edited it so the text turns to green. You should handle the single click in jquery

# python - 我有一个包含这些数据的文件

> ID：12753841
> 
> 赞同：-4
> 
> 时间：2012-10-05T20:50:42.553
> 
> 标签：python, string, string-parsing, group-by

**2012-05-10 BRAD 10**
**2012-05-08 BRAD 40**
**2012-05-08 BRAD 60**
**2012-05-12 TOM 100**
我想要输出为
**2012-05-08 BRAD|2|100**
**2012-05-10 BRAD| 1|10**
**2012-05-12 汤姆|1|100**

我从这段代码开始::

```
import os,sys
fo=open("meawoo.txt","w")
f=open("test.txt","r")
fn=f.readlines()
f.close()
for line in fn:
    line = line.strip()
    sline = line.split("|")
    p = sline[1].split(" ")[0],sline[2],sline[4]
    print p
    fo.writelines(str(p)+"\n")
fo.close()
o_read = open("meawoo.txt","r")
x_read=o_read.readlines()
from operator import itemgetter
x_read.sort(key=itemgetter(0))
from itertools import groupby
z = groupby(x_read, itemgetter(0))
print z
for elt, items in groupby(x_read, itemgetter(0)):
    print elt, items
    for i in items:
        print i

It will be very helpful if u suggest me some usefull changes to my work.TIA 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T21:18:04.120

以下代码应该以您想要的格式打印数据（据我了解）：

```
d = {}
with open("testdata.txt") as f:
    for line in f:
        parts = line.split()
        if parts[0] in d:
            if parts[1] in d[parts[0]]:
                d[parts[0]][parts[1]][0] += int(parts[2])
            else:
                d[parts[0]][parts[1]] = [int(parts[2]), 0]
            d[parts[0]][parts[1]][1] +=1
        else:
            d[parts[0]] = {parts[1]: [int(parts[2]), 1]}
    for date in sorted(d):
        for name in sorted(d[date]):
            print "%s %s|%d|%d" % (date, name, d[date][name][0], d[date][name][1]) 
```

我将每一行保存在字典中，以行的日期作为键，值是另一个以名称为键的字典，值是一个包含两个元素的列表：第一个是这个名字的数字的累积总和此日期到此行，第二个是此日期/名称星座的总和数。然后我以您要求的格式打印字典，并使用两个日期的比较给出的结果与将日期比较为具有格式的字符串的结果相同的情况`YYY-MM-DD`，所以我可以`sorted`在日期字符串上使用该函数。我也按名字排序。

有关示例（适用于无法使用文件），请参见[http://ideone.com/rx3h2](http://ideone.com/rx3h2)。它提供了您要求的相同输出。

# arrays - 如何从unix命令将结果放入数组

> ID：12753844
> 
> 赞同：1
> 
> 时间：2012-10-05T20:50:45.650
> 
> 标签：arrays, perl, unix, cat

我正在尝试将每个文件的转储从 Perl 脚本中的 unix 命令转储到数组中。下面是我得到的错误。谁能帮我解决这个问题？

`Can't locate object method "cat" via package "C:/prac/cmm_ping.txt" (perhaps you forgot to load "C:/test/cmm_ping.txt"?) at fandd.pl line 25.`

下面是我的程序

```
#!/usr/bin/perl

use warnings;

@files=glob("C:/prac/*");

foreach $file (@files){
   @data=system(cat  $file);
      foreach $line (@data){`
        print $line;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:53:08.443

```
system(cat $file) 
```

包含间接方法调用。以上等价于：

```
system($file->cat) 
```

你的意思是

```
system("cat $file") 
```

但这是错误的，因为您没有转换`$file`为 shell 文字。最好通过绕过您不需要的 shell 来完全避免创建 shell 命令。

```
system('cat', $file) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:41:14.567

对于在 Perl 中运行 Unix 命令时遇到的问题，我采取了不同的方法，我能够通过以下代码解决这个问题。

```
@files = <C:/prac/*.ext>;

for $file (@files){
  open (FILE, "$file")             or die $!;
  open (OUT,">> C:/prac/data.txt") or die $!;

  while($line= <FILE> ) {
    print OUT $line if $line =~ /something/ ;
  }

  close FILE;
  close OUT;
} 
```

# c# - 在数据流任务中访问 SSIS 变量

> ID：12753845
> 
> 赞同：0
> 
> 时间：2012-10-05T20:50:50.043
> 
> 标签：c#, ssis, dataflowtask

在 SSIS 脚本任务中，可以使用以下语法访问 SSIS 变量：

Dts.Variables["VariableName"].Value

但是，在数据流任务中，语法会有所改变：

变量.变量名

同时，某些变量在数据流任务中似乎不可用。即使它们清楚地列在变量工具箱中，并且可以在脚本任务中访问，但由于某种原因它们没有通过。有人可以向我解释为什么会这样以及如何使用语法/方法来实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:53:35.517

能够自己（快速）回答这个问题。打开脚本任务时，自定义属性下的 ReadOnly/ReadWrite 变量列表可用。选择要在其各自类别中使用的变量，并使用上面的适当语法。

# javascript - 我如何知道何时选择了新的 (Spry) 手风琴选项卡（类似于“单击时”）？我想附上我自己的行为

> ID：12753846
> 
> 赞同：-1
> 
> 时间：2012-10-05T20:50:50.633
> 
> 标签：javascript, dom-events, accordion, spry

我有一个手风琴来处理注册。当用户单击不同的面板选项卡时，我想验证在每个面板上输入的数据。我在每个面板上都有一个继续按钮，并且当用户使用它转到下一个面板时，我能够验证我内心的内容。

我的问题是他们也可以在手风琴选项卡上独立单击（我希望他们能够跳过以进行编辑），但我也想验证这些事件。

我做了一堆搜索，但没有找到满意的答案。我对 Javascript 和 jQuery 非常陌生，所以如果你有代码片段给我，请彻底解释它们。

这应该是一个简单的问题（类似于`on-click`等）。我还没有找到答案，我感到非常惊讶和沮丧。

编辑：
埃里克，我无法让它工作。这是我的版本。我把它放在头部。我有一些过去对我来说可靠的测试代码（更改其中一个选项卡上的标签）。我假设这段代码对你有用？无论如何，感谢您的帮助，我希望我们已经充分了解彼此。

```
// add capability to detect when accordion tab has been clicked

RegFormAccordion.addEventListener('click', function(e){
    var btnElement;

    (function findAccordionButton(el){

        //e.target is the original element actually clicked on
        //the event bubbles up to ancestor/parent nodes which is why you can listen at
        //the container

        if(!btnElement){ btnElement = e.target; }
        else { btnElement = el; }

        if(e.target.className !== 'accordionBtn')
        {
            findAccordionButton(btnElement.parentNode);
        }
        else
    {
        var curr_panel_index = RegFormAccordion.getCurrentPanelIndex();

            document.getElementById("verify-reg-panel-label").innerHTML = "Index = " + curr_panel_index; // test code to see if it's even getting here

        if (curr_panel_index == 1) // contact section
            {
        ValidateContact();
        }
        else if (curr_panel_index == 2) // payment section
        {
        ValidatePayment();
        }
        UpdateVerifyPanel(); // update contents of verification panel
    }
    })()

} ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T06:44:55.343

好的。我找到了 SpryAccordion.js 用来打开新面板的函数并添加了我自己的代码。简单而优雅。这不是我通常会做的（通常我不理会“图书馆”）。但是，如果你让它可编辑而没有给我另一种方式来获得所需的控制，那么黑客就会发生。

如果我需要在我的网站上的其他地方使用另一个手风琴，我必须在调用 hack 之前仔细检查我是否拥有正确的手风琴。我愿意做出权衡。它现在完美运行。这是代码：

Spry.Widget.Accordion.prototype.openPanel = function(elementOrIndex)

{

```
var panelA = this.currentPanel;
var panelB;

if (typeof elementOrIndex == "number")
    panelB = this.getPanels()[elementOrIndex];
else
    panelB = this.getElement(elementOrIndex);

if (!panelB || panelA == panelB)    
    return null;

// Start Becca's code
var panelIndex = this.getPanelIndex(panelA);
if (panelIndex == 1) // contact info panel
{
   if (ValidateContact())
      UpdateVerifyPanel();
       else
      return null;
}
else if (panelIndex == 2) // payment info panel
{
   if (ValidatePayment())
      UpdateVerifyPanel();
   else
      return null;
}
// End Becca's code

var contentA = panelA ? this.getPanelContent(panelA) : null;
var contentB = this.getPanelContent(panelB); 
```

…………

};

是的，我想要的只是对面板选项卡的控制与对我自己的用户定义按钮的控制相同，以确保我可以在继续之前进行验证，并在用户进行任何编辑后更新我的验证屏幕，而不仅仅是他们碰巧点击了我的继续按钮。我是一个快乐的露营者。很高兴我请了几天假。

我希望这可以帮助人们更好地控制自己的手风琴。很高兴我不需要上 jQuery 速成课程，因为我现在只想启动我的破网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:48:33.103

事件委托。

```
someAccordianContainer.addEventListener('click', function(e){
    var btnElement;

    (function findAccordionButton(el){

        //e.target is the original element actually clicked on
        //the event bubbles up to ancestor/parent nodes which is why you can listen at
        //the container

        if(!btnElement){ btnElement = e.target; }
        else { btnElement = el; }

        if(e.target.className !== 'accordionBtn'){
            findAccordionButton(btnElement.parentNode);
        }
        else { doSomething(btnElement); }
    })()

} ); 
```

但是，如果您支持较旧的浏览器，则必须对 IE<=8 进行规范化，因为它使用专有的 attachEvent 方法。点击 quirksmode.org 了解详细信息，或者只使用 jQuery 或 MooTools 之类的东西。

# android - Android：检测对 ImageView 中实际图像的触摸

> ID：12753847
> 
> 赞同：0
> 
> 时间：2012-10-05T20:50:53.173
> 
> 标签：android, imageview

正如标题中所写，我正在尝试检测 ImageView 上的触摸事件。我可以通过在 ImageTouchHandler 类中使用 onTouch 事件来做到这一点。问题是，如果 ImageView 中包含的图像被调整大小以适合屏幕，我会在 ImageView 坐标中而不是在我的实际图像中获得触摸位置。

比如我的图片是480*648，我的imageView是1000*450，不知道怎么检测图片中的触摸位置。

我尝试用这个 : 获得实际图像的左侧位置`_imageView.getDrawable().getBounds().left`，但我总是有 0。

我也试过这个：

```
float leftImage = (_imageView.getWidth()-_imageView.getDrawable().getIntrinsicWidth())/2; 
```

但这并不好。

你有什么主意吗？

提前致谢， 瓦伦丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T01:42:23.317

如果图像放置在屏幕的左侧，或者正好在中心（宽度或高度），或者在屏幕的右侧，您可以计算它`leftX` `rightX` 等等...

所以你要做的是计算这些位置。例如，如果图像位于屏幕中央：

*   `leftx = (ScreenWidth - ImageWidth) / 2`
*   添加`imagewidth`, 现在你有`rightX`( `rightX = leftX + imageWidth`)
*   对高度做同样的事情；您也可以为此使用@dennisdrew 的答案

尝试将 API 更新为等的最新`getWidth`版本`getHeight`。

我的代码：

```
public void calculateImageDimensions() {
    if(ScreenWidth < 480) {
        HeightDartBoard = ScreenWidth;
        WidthDartBoard = ScreenWidth;
        RadiusBoard = ScreenWidth / 2;
        if(WidthDartBoard == 320) {
            RadMulti = 0.75; // multiplier for different scaled images
        } else {
            RadMulti = 0.5; // means half the image width and height
        }
        LeftXBoard = 0;
    } else {
        HeightDartBoard = 480; // I already know the width and height
        WidthDartBoard = 480;
        RadiusBoard = 240;
        LeftXBoard = (ScreenWidth - WidthDartBoard) / 2; // this is what interests you
    }
    RightXBoard = LeftXBoard + WidthDartBoard; // now add the width of image to left X
    TopYBoard = intActionBar; // actionbar height is start of my image topY
    BottomYBoard = TopYBoard + HeightDartBoard; // and again add height of board
} 
```

现在给你：

```
LeftX = (ScreenWidth - (WidthDartBoard * RadMulti)) / 2; 
```

现在你有一个计算图像`width`和`height`它的位置的例子......

在该`onTouchEvent`方法中，您现在可以对其进行测试：

```
if(((eventX > leftX) && (eventX < rightX)) && ((eventY > topY) && (eventY < bottomY)))     {
   // code here
} 
```

如果这是`true`您单击图像上的某个位置。

如果你想制作新的`x`和`y`相对于图像本身的：

```
newX = eventX - leftX
newY = eventY - topY 
```

现在`newX`和`newY`是实际图像的`X`和。`Y`

# gradle - 如何将环境传递给 gradle exec

> ID：12753852
> 
> 赞同：14
> 
> 时间：2012-10-05T20:51:43.207
> 
> 标签：gradle

如何在执行期间将变量传递给*Exec*？我想编写一个传递 gradle 文件，它将执行我当前的构建命令，让我将配置从构建服务器计划移动到源代码控制管理的 build.gradle 文件。这也是我在为更大的项目做准备时了解 gradle 的一部分。

我想使用不同的变量进行配置执行命令。在 ant 中，我会设置我的属性，然后通过嵌套的 env 块将它们传递给 exec。在 gradle 中，我正在填充一个与任务环境合并的地图，但这不起作用。

我无法将 '<<' 添加到 checkenv，因此任务代码执行之前填充的 buildEnvironmentVariables 或在错误的范围内。我知道我没有遵循正确的任务配置。

请提供建议或指出手册/文档的正确部分。

**build.gradle - 执行 gradle checkenv**

```
def buildEnvironmentVariables = [:]
task setEnv() << {
    buildEnvironmentVariables['JAVA_OPTS']="-XX:ErrorFile=foo/logs" 
}

task checkenv(dependsOn: 'printEnv', type:Exec) {
    workingDir '../..'
    executable = 'cmd'
    environment << buildEnvironmentVariables
    println "buildEnvironmentVariables = " << buildEnvironmentVariables['JAVA_OPTS']
    args = ['/c','set','JAVA_OPTS']
} 
```

我是否应该只在项目相当于“目标”时将任务添加到项目中，并将诸如 exec 之类的操作封装在顶级任务中？

添加的任务就像 ant 目标，封装的任务就像 ant 任务？

```
def buildEnvironmentVariables = [:]
task setEnv() << {
    buildEnvironmentVariables['JAVA_OPTS']="-XX:ErrorFile=foo/logs" 
}

task checkenv(dependsOn: 'printEnv') << {
    println "buildEnvironmentVariables = " << buildEnvironmentVariables['JAVA_OPTS']
    ext.check = exec() {
        workingDir '../..'
        executable = 'cmd'
        environment << buildEnvironmentVariables
        args = ['/c','set','JAVA_OPTS']
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-05T21:12:44.000

从头开始可能会更好：

```
task doSomething(type: Exec) {
    workingDir ...
    executable ...
    args ...
    environment JAVA_OPTS: "-XX:ErrorFile=foo/logs"
} 
```

然后，您可以使用`gradle doSomething`. 这是否实现了您的目标？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-09T20:40:12.693

好的，这是我最终使用 Peter N. 建议的模式所遵循的课程

*   定义/使用检测 OS 和 Arch 的例程
*   在配置期间为所有 exec 任务配置环境的方法
*   示例执行任务

…………

```
import org.apache.tools.ant.taskdefs.condition.Os

def is64Arch() {
    return System.properties['os.arch'].toLowerCase().contains('64')
}

task configureEnvironment() {
    def envVars = [:]

    envVars['JAVA_OPTS']="-Dlog.directory=target/logs -Djava.awt.headless=true -XX:ErrorFile=target/logs"

    if (is64Arch()) 
    {
        envVars['JAVA_OPTS'] +=" -Xmx2048m -XX:MaxPermSize=768m" 
        println "*** ARCH: 64"
    }
    else
    {
        envVars['JAVA_OPTS'] +=" -Xmx1792m -XX:MaxPermSize=512m" 
        println "*** ARCH: 86"
    }

    tasks.withType(Exec) { environment << envVars }

}

task checkJavaEnvVars(type:Exec)  {
    workingDir '../..'
    commandLine 'cmd','/c','set JAVA'
} 
```

# javascript - 检测页面中的所有 iframe 是否都有 src

> ID：12753853
> 
> 赞同：2
> 
> 时间：2012-10-05T20:51:44.263
> 
> 标签：javascript, iframe, src, printing-web-page

我有一个动态数量的 iframe 的页面。window.print() 必须在 iframe 加载时调用（即有 src）。

如何在纯 JavaScript 中优雅地处理这件事而不至于迂腐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:22:37.350

```
function getLoadedFrames () {

    var frames = document.getElementsByTagName( 'iframe' ), // Get all iframes
        loadedFrames = [], i;

    for ( i = 0; i < frames.length; i++ ) {
        /*
            If iframe has a src attribute, that attribute has a value AND
            that value is not equal to the current window location (leaving src
            blank seems to return the current location instead of empty string)
            then add the frame to the loadedFrames array.
        */
        if ( frames[ i ].src && frames[ i ].src.length > 0 && frames[ i ].src !== window.location.href ) {
            loadedFrames.push( frames[ i ] );
        }
    }

    return loadedFrames; // An array of your 'loaded' frames
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:27:03.000

你可以做

```
function areAllIframesLoaded() {
  var frames = document.getElementsByTagName( 'iframe' )
  return Array.prototype.slice.call(frames).reduce(function(p, c) {
    return p && c.src && c.src.length > 0 && c.src !== window.location.href
  }, true);
} 
```

这将遍历所有 iframe 并返回 true 或 false 以判断它们是否都已`src`定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T21:27:25.093

不太确定这是否是您想要的，但也许它会有所帮助：

```
window.addEventListener("DOMContentLoaded", function(){
    // Get all iframes as soon as DOM has loaded
    var iframes = document.getElementsByTagName("iframe");
    for (var i = 0, l = iframes.length; i < l; ++i) {
        // Add event handler to every iframe
        iframes[i].onload = function(){
            // Execute window.print() when iframe has loaded
            window.print();
        };
    }
}); 
```

这无需检查`src`属性即可工作，因为如果 a`iframe`没有 a `src`，`onload`则永远不会触发该事件。

请注意，这在 IE 中不起作用；请参阅SO 上的[此答案](https://stackoverflow.com/a/3989289/1350193)以获得与 jQuery 的等价物`$(document).ready`...

# html - 如何在画布上作画？

> ID：12753856
> 
> 赞同：0
> 
> 时间：2012-10-05T20:51:47.797
> 
> 标签：html, canvas

你能告诉我如何在画布上作画吗？这是html 5代码：

```
 var TableHeight = 300,
     TableWidth = 500,    
 function init() {
    canvas = document.getElementById('canvas');
    context = canvas.getContext('2d');
    table.draw();
}

table = {
    color: '#000',
    PositionX : 1,
    PositionY: 1,
    width: TableWidth,
    height: TableHeight,
    draw: function(){
        context.fillStyle = this.color;
        context.fillRect = (this.PositionX, this.PositionY, this.width, this.height);
        context.clearRect(5, 5, TableWidth - 10, TableHeight - 10);
    }
} 
```

这是我的html代码

```
<body>
    <canvas id ='canvas' width = 500px height = 300px ></canvas>
    <script>init()</script>
</body> 
```

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:18:58.053

您的代码有很多问题。

首先：据我所知，您的函数声明是错误的。它没有被定义为在你最后一个全局变量之后，你放了一个逗号，而不是一个分号。以下是如何正确定义您的函数，因为您不是通过变量来完成的：

```
var TableHeight = 300,
    TableWidth = 500;

function init() {
    canvas = document.getElementById('canvas');
    context = canvas.getContext('2d');
    table.draw();
} 
```

最后，while`.fillStyle`是一个属性，而不是一个方法，同样不是这样的`.fillRect()`，它确实是一个方法，需要这样执行：

```
var table = {
    color: '#000',
    PositionX: 1,
    PositionY: 1,
    width: TableWidth,
    height: TableHeight,
    draw: function() {
        context.fillStyle = this.color;
        context.fillRect(this.PositionX, this.PositionY, this.width, this.height);
        context.clearRect(5, 5, TableWidth - 10, TableHeight - 10);
    }
} 
```

[**演示**](http://jsfiddle.net/e7ref/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:14:30.780

这里的问题是`fillRect`，`fillStyle`等是方法，而不是属性。你需要这样称呼他们：

```
context.fillStyle(this.color); 
```

有关更多信息和示例，请参阅[MDN上的文档](https://developer.mozilla.org/en-US/docs/Canvas_tutorial)

您还应该查看[Douglas Crockford 的](http://javascript.crockford.com/)网站以获取有关良好 Javascript 样式的指针。例如，您`var`在某些地方省略了关键字，这会导致变量无意中成为全局变量。

# sql-server-2008 - 对 SQL 记录进行排序

> ID：12753857
> 
> 赞同：0
> 
> 时间：2012-10-05T20:51:49.167
> 
> 标签：sql-server-2008, stored-procedures, sql-order-by

我需要按字母顺序（按 CustomerName）对我的 SQL 存储过程记录集（如下所示）进行排序，但还要保持 RecordID 的顺序（意味着 RecordID 2 相对于 ParentID 和 ID 字段高于 RecordID 3）。有什么建议么？

```
ID           ParentID         RecordID        CustomerName
53445347        5344        2                 Witt - 47
534453475345    53445347    3                 Witt - 45
534453475346    53445347    3                 Witt - 46
53445351        5344        2                 Sjob - 51
534453515348    53445351    3                 Sjob - 48
534453515349    53445351    3                 Sjob - 49
534453515350    53445351    3                 Sjob - 50
53445357        5344        2                 Hal - 57
534453575355    53445357    3                 Hal - 55
534453575356    53445357    3                 Hal - 56
534453577252    53445357    3                 Hal - 52
53446852        5344        2                 Boston, - 52
534468526850    53446852    3                 Boston, - 50
534468526851    53446852    3                 Boston, - 51
534468527205    53446852    3                 Boston, - 05
53447884        5344        2                 Agri - 84
534478847883    53447884    3                 Agri - 83
534478847957    53447884    3                 Agri - 57 
```

预期的输出如下：

```
53447884        5344        2                 Agri - 84
534478847883    53447884    3                 Agri - 83
534478847957    53447884    3                 Agri - 57
53446852        5344        2                 Boston, - 52
534468526850    53446852    3                 Boston, - 50
534468526851    53446852    3                 Boston, - 51
534468527205    53446852    3                 Boston, - 05
53445357        5344        2                 Hal - 57
534453575355    53445357    3                 Hal - 55
534453575356    53445357    3                 Hal - 56
534453577252    53445357    3                 Hal - 52
53445351        5344        2                 Sjob - 51
534453515348    53445351    3                 Sjob - 48
534453515349    53445351    3                 Sjob - 49
534453515350    53445351    3                 Sjob - 50
53445347        5344        2                 Witt - 47
534453475345    53445347    3                 Witt - 45
534453475346    53445347    3                 Witt - 46 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:53:57.587

如果您的所有客户名称都按照您的示例形成：

```
ORDER BY SUBSTRING( CustomerName, 0, CHARINDEX( '-', CustomerName)), RecordID 
```

顺便说一句，如果您有机会更改模型，请将 CustomerName 的 alpha 和数字部分拆分为两个字段，您的生活会更好，世界会合而为一。

如果您可以在没有客户姓名的情况下使用`-`

不如试试

```
ORDER BY  CASE WHEN CHARINDEX('-', CustomerName) = 0 
               THEN CustomerName
               ELSE SUBSTRING( CustomerName, 0, CHARINDEX( '-', CustomerName))
            END,
            RecordID 
```

# ruby-on-rails - 是否可以在文件选择后立即提交 file_field_tag“浏览”按钮？

> ID：12753858
> 
> 赞同：3
> 
> 时间：2012-10-05T20:51:54.993
> 
> 标签：ruby-on-rails

现在它的作用是允许我选择文件，但我需要单击一个额外的“提交”按钮来提交表单。是否可以将浏览按钮的功能与表单提交结合起来？Rails 中是否有功能，或者我是否需要使用 javascript 创建自定义 ajax 调用？谢谢！

当前代码：

```
 = form_for @user, :url => add_file(@user), :remote => true do |f|
      = file_field_tag :file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T05:16:04.853

为此，您肯定需要使用 jquery ......我使用以下功能做了同样的事情

这是我的html代码：-

```
<div class="third"><input name="upload" value="" type="text"/>&nbsp;<span class="activebtn sm"><a href="" class="btn">Browse...</a></span><input type="file" name="images[]" onchange="displayPreview(this.files,this)" class="image_upload" size="23" id="image_upload1"/></div> 
```

在改变我写了jquery

```
 function displayPreview(files,obj)
  {
    curr_file_obj = $(obj);
    if(window.FileReader)
    {
      var reader = new FileReader();
      reader.onload = onFileLoad;
      reader.readAsDataURL(files[0]);
    }

  } 
```

我的要求是上传图像并在上传后立即显示其预览。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:31:13.477

Rails 没有这样的功能。

您需要编写 javascript 来执行此操作，但您不需要进行 ajax 调用。

相反，定义 file_field_tag 但使用 CSS display:none; 将其隐藏。然后定义一个实现你的javascript的按钮。您的 javascript 应该调用隐藏的 file_field_tag，然后提交表单。

```
<% form_for @user, :url => add_file(@user), :remote => true do |ff| %>
  <%= ff.file_field_tag "file", "id" => "file_select_input", "style" => "display:none" %>
  <%= ff.button "upload", "onclick" => "<your-javascript-call>" %>
<% end %> 
```

*很抱歉没有用 HAML 写这个，但我把它留给你。*:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T06:20:26.387

Rails 不可能，但您可以考虑使用像[Fine Uploader这样的 javascript 插件](http://github.com/valums/file-uploader)

# android - DialogFragment：总是使用进度条的空指针异常。如何解决？

> ID：12753862
> 
> 赞同：0
> 
> 时间：2012-10-05T20:52:26.313
> 
> 标签：android, nullpointerexception, android-fragments, android-fragmentactivity

考虑这个 DialogFragment：

```
public class RollTriggerDialog extends DialogFragment{

    private ProgressDialog _dialog;
    int _progress;
    public Handler _progressHandler;

    public RollTriggerDialog() {
        // empty
    }

    @Override
    public Dialog onCreateDialog(final Bundle savedInstanceState) {
        _dialog = new ProgressDialog(getActivity());

        this.setStyle(STYLE_NO_TITLE, getTheme());
        _dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        _dialog.setProgress(0);

        _progressHandler = new Handler() {
            public void handleMessage(Message msg) {
                super.handleMessage(msg);

                if (_progress >= 100) {
                    _dialog.dismiss();
                } else {
                    _progress++;
                    _dialog.incrementProgressBy(1);
                    _progressHandler.sendEmptyMessageDelayed(0,100);
                }

            }
        };
        //_progressHandler.sendEmptyMessage(0); <- This uncommented would start the progress
        return _dialog;
    }
} 
```

它只是一个带有处理程序的水平进度条，一旦处理程序收到一条消息，进度条就会从 0 变为 100。

如果我想自己从活动中触发 sendEmptyMessage，我总是会**收到空指针异常：**

```
public class MainActivity extends FragmentActivity {

    private RollTriggerDialog mRollTriggerDialog;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        FragmentManager fm = getSupportFragmentManager();
        mRollTriggerDialog = new RollTriggerDialog();
        mRollTriggerDialog.show(fm, "addDiceDialog_tag");
        ((RollTriggerDialog)fm.findFragmentByTag("addDiceDialog_tag"))._progressHandler.sendEmptyMessage(0); // <--- NPE HERE!
    }
} 
```

如果在 dialogFragment 中取消了 sendEmptyMessage 行的注释，并且注释了主活动中带有 NPE 的行；应用程序运行。该调用有什么问题？

请注意，这是整个代码，除了清单和布局文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:49:11.707

出现`NullPointerException`是因为`findFragmentByTag`回报`null`。解决方案是`fm.executePendingTransactions()`在您使用该`findFragmentByTag`方法立即执行该片段事务之前调用（[有关详细信息，请参阅此问题](https://stackoverflow.com/questions/7246479/android-fragmenttransaction-commit-when)）。

此外，`Handler`引用将`null`在那个时刻，因此您需要在片段的生命周期方法之一中对其进行初始化，例如`onCreate`：

```
public static Handler _progressHandler; // should be made static

//...
@Override
public void onCreate(Bundle savedInstanceState) {       
    super.onCreate(savedInstanceState);
    _progressHandler = new Handler() {
        public void handleMessage(Message msg) {
            super.handleMessage(msg);

            if (_progress >= 100) {
                _dialog.dismiss();
            } else {
                _progress++;
                _dialog.incrementProgressBy(1);
                _progressHandler.sendEmptyMessageDelayed(0, 100);
            }

        }
    };
} 
```

# mysql - 当 field2 重复时更新 field1

> ID：12753865
> 
> 赞同：0
> 
> 时间：2012-10-05T20:52:42.647
> 
> 标签：mysql, sql, sql-update

当他们的 site_id 相同时，我想从不同的记录中更新纬度和经度位置。

例如，如果

```
ID | SiteID | Latitude | Longitude
1      5      74.4545   -35.5466
2      6      74.4545   -35.5466
3      5      75.4584   -45.5966
4      6      79.6545   -36.5496 
```

我希望记录 3 和与 SiteID 5 匹配的所有其他记录 1 的纬度和经度。类似地，记录 2 和 4

我怎么能在mysql中做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:14:33.283

您需要首先找到正确的值，然后进行更新。正确的值是：

```
select t.*
from t join 
     (select siteId, min(id) as minId
      from t
      group by siteId
     ) ts
     t.id = minId 
```

现在的问题是您无法在查询中更新和引用同一个表。所以，把它放在一个临时表中，比如说`master`。

这些是主记录。您可以按以下方式进行更新：

```
update t
    join master
    on t.id = master.id
    set t.latitude = master.latitude,
        t.longitude = master.longitude 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:12:45.560

我将使用 site_table 作为您的表的名称。

```
UPDATE site_table TARG, site_table VALDATA
SET TARG.Latitude = VALDATA.Latitude, TARG.Longitude = VALDATA.Longitude

WHERE TARG.SiteId = VALDATA.SiteId
  AND VALDATA.id = (SELECT min(MINREC.id) FROM site_table MINREC
                    WHERE MINREC.SiteId = TARG.SiteId) 
```

# javascript - 切换按钮时如何删除文本输入？

> ID：12753868
> 
> 赞同：1
> 
> 时间：2012-10-05T20:52:53.753
> 
> 标签：javascript, jquery, html

我对“是”、“否”、“真”和“假”按钮的测试输入并不完全正确。您可以[在这里](http://helios.hud.ac.uk/u0867587/Mobile_app/QandATable3.php)查看和测试。请按照以下步骤操作：

1.  点击“Open Grid”并选择“True or False”按钮，将出现“True”和“False”按钮。
2.  单击按钮“True”，按钮将变为绿色，您将在下面看到该按钮的文本输入。这可以。
3.  现在点击“False”按钮，会发生“False”按钮打开而“True”按钮关闭（变回白色）的情况。现在好的是出现了“False”文本输入，坏的是它没有删除“True”文本输入。

所以我的问题是，如果用户单击“真”或“假”或“是”或“否”的替代按钮，我希望刚刚关闭的按钮将其输入删除。

如何做到这一点？

下面是添加和删除输入的函数：

```
 function btnclick(btn)
{
    var context = $(btn).parents('#optionAndAnswer');
    if (context.length == 0) {
        context = $(btn).parents('tr');
    }
    var $btn = $(btn);
    var value = btn.value;
    var id = $btn.attr('id');

    var $otherYNBtn = value === "Yes" ? $(context.find("input[value='No']")) : $(context.find("input[value='Yes']"));
    var $otherTFBtn = value === "True" ? $(context.find("input[value='False']")) : $(context.find("input[value='True']"));

    if ($(context.find("input[value='Yes']")).hasClass('answerBtnsOn')) {
        $otherYNBtn.removeClass('answerBtnsOn').addClass('answerBtnsOff');
    }

    else if ($(context.find("input[value='No']")).hasClass('answerBtnsOn')) {
        $otherYNBtn.removeClass('answerBtnsOn').addClass('answerBtnsOff');
    }

    if ($(context.find("input[value='True']")).hasClass('answerBtnsOn')) {
        $otherTFBtn.removeClass('answerBtnsOn').addClass('answerBtnsOff');
    }

    else if ($(context.find("input[value='False']")).hasClass('answerBtnsOn')) {
        $otherTFBtn.removeClass('answerBtnsOn').addClass('answerBtnsOff');
    }

    if ($(btn).hasClass('answerBtnsOff')) {
        var n = $("input[name='" + id + "value']").length;
        var hid = "hidden" + id + n + "value";  
        $(btn).attr("data-hid", hid);

        // append those values to the form
        var input = '<input type="text" id="' + hid + '" value="' + value + '" name="' + id + 'value" />';
        $('#QandA').append(input);      
        // toggle the button
        $btn.removeClass('answerBtnsOff').addClass('answerBtnsOn'); 
    // do the opposite - remove the input
    }
    else {
        $("#" + $(btn).attr("data-hid")).remove();
        $btn.removeClass('answerBtnsOn').addClass('answerBtnsOff');
    }  

    $('.answertxt', context).val(context.find('.answerBtnsOn').length > 0 ? context.find('.answerBtnsOn').length : 0);

    return false;
} 
```

下面是“真”、“假”、“是”和“否”按钮：

```
 <table id="optionAndAnswer" class="optionAndAnswer">
    <tr>
    <tr class="answer">
    <td>3\. Answer</td>
    <td>
    <table id="answerSection">
  <tr>
<td>
<input class="answerBtns answers answerBtnsOff" name="answerName[True]"  id="answerTrue"    type="button"   value="True"    onclick="btnclick(this);"/>
<input class="answerBtns answers answerBtnsOff" name="answerName[False]" id="answerFalse"   type="button"   value="False"   onclick="btnclick(this);"/>
<input class="answerBtns answers answerBtnsOff" name="answerName[Yes]"   id="answerYes"     type="button"   value="Yes"     onclick="btnclick(this);"/>
<input class="answerBtns answers answerBtnsOff" name="answerName[No]"    id="answerNo"      type="button"   value="No"      onclick="btnclick(this);"/>
</td>
</tr>
    </table>
    </td>
    </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:09:30.777

这是您的 jsfiddle 的解决方案：

[http://jsfiddle.net/Bjqr6/12/](http://jsfiddle.net/Bjqr6/12/)

总的来说，你的方法不是最好的方法，但我没有时间从头开始。下一次，我会考虑将您的问题和答案放入类中，并为值维护一个全局数组。这样生成 Html 代码将更容易与重要的实际值和属性分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:00:14.897

我建议保留问题计数的计数器，以便每个选项和答案框都有一个 id，以便您可以在添加新框之前从中删除任何现有框。这也将允许您追溯更新它（在添加第四个问题后设置第三个）

# c# - 使用 WindowAPICodePack 的 commonOpenFileDialog 获取没有路径的文件名

> ID：12753870
> 
> 赞同：-3
> 
> 时间：2012-10-05T20:53:05.220
> 
> 标签：c#

使用 Windows API Code Pack`CommonOpenFileDialog`时，如何在不获取路径信息的情况下检索`filename`a `file`（如）？`mydoc.text`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:55:07.040

用 C#？

```
string lcMyPath = GetPathFromSomewhere();
string lcMyFilename = Path.GetFileName(lcMyPath); 

//-- C:\myfile.txt -> myfile.txt.
Console.WriteLine(lcMyFilename); 
```

[Path.GetFileName (System.IO)](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T20:55:32.850

试试这个：http: [//msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)

```
string fileName = @"C:\mydir\myfile.ext";
string path = @"C:\mydir\";
string result;

result = Path.GetFileName(fileName);
Console.WriteLine("GetFileName('{0}') returns '{1}'", 
    fileName, result);

result = Path.GetFileName(path);
Console.WriteLine("GetFileName('{0}') returns '{1}'", 
    path, result);

// This code produces output similar to the following: 
// 
// GetFileName('C:\mydir\myfile.ext') returns 'myfile.ext' 
// GetFileName('C:\mydir\') returns '' 
```

# visual-studio-2010 - 卸载 Visual Studio 2012 后，无法在 Visual Studio 2010 中打开 Azure 云项目

> ID：12753876
> 
> 赞同：0
> 
> 时间：2012-10-05T20:53:30.897
> 
> 标签：visual-studio-2010, azure, visual-studio-2012

`The imported project "C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Windows Azure Tools\1.4\Microsoft.WindowsAzure.targets" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk. C:\MyProject\MyProject.ccproj`尝试加载云项目时出现消息框。这是在卸载 Visual Studio 2012 之后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T20:53:30.897

Visual Studio 2012 卸载程序在 C:\Program Files (x86)\MSBuild\4.0\ 中留下了一个只需要删除的设置文件。

# java - Java中类似ADT的多态性（不改变类）

> ID：12753880
> 
> 赞同：10
> 
> 时间：2012-10-05T20:53:42.193
> 
> 标签：java, haskell, algebraic-data-types

在*Haskell*中，我可以定义以下数据类型：

```
data Tree = Empty
      | Leaf Int
      | Node Tree Tree 
```

然后像这样编写多态函数：

```
depth :: Tree -> Int
depth Empty = 0
depth (Leaf n) = 1
depth (Node l r) = 1 + max (depth l) (depth r) 
```

在*Java*中，我可以使用接口模拟代数数据类型：

```
interface Tree {}
class Empty implements Tree {}
class Leaf implements Tree { int n; }
class Node implements Tree { Tree l; Tree r; } 
```

但是如果我尝试使用类似 Haskell 的多态性，我会得到一个错误：

```
int depth(Empty node) {
    return 0;
}
int depth(Leaf node) {
    return 1;
}
int depth(Node node) {
    return 1 + Math.max(depth(node.l), depth(node.r));   // ERROR: Cannot resolve method 'depth(Tree)'
} 
```

克服这个问题的正确方法是**将方法放在** `depth()` **每个类**中。但是如果我**不想**把它放在那里怎么办？例如，方法`depth()`可能与类没有直接关系`Tree`，将其添加到类会破坏业务逻辑。或者，更糟糕的是，`Tree`可能是在我无法访问的 3rd 方库中编写的。在这种情况下，实现**类似 ADT 的多态性的****最简单方法**是什么？

 **以防万一，目前我正在使用以下语法，这显然是不受欢迎的：

```
int depth(Tree tree) {
    if (tree instanceof Empty) depth((Empty)tree)
    if (tree instanceof Leaf) depth((Leaf)tree);
    if (tree instanceof Node) depth((Node)tree); 
    else throw new RuntimeException("Don't know how to find depth of " + tree.getClass());
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T21:29:12.277

尝试这样的事情。

抱歉，我的 Java 生锈了。如果与我不同，您可以记住语法，则可以使用 Java 泛型来细化您正在编写的方法`Object`所需`Integer`的任何类。但是您不能（可以吗？）返回原始类型，抱歉。

```
interface TreeFolder {
    Object onEmpty();
    Object onLeaf (int n);
    Object onNode (Tree l, Tree r);
}

interface Tree {
    Object fold (TreeFolder f);
}

class Empty implements Tree {
    Object fold (TreeFolder f) {
        return f.onEmpty();
    }
}

class Leaf implements Tree {
    private int n;
    Object fold (TreeFolder f) {
        return f.onLeaf (n);
    }
}

class Node implements Tree {
    private Tree l, r;
    Object fold (TreeFolder f) {
        return f.onNode (l, r);
    }
}

// meanwhile, in a class in another package far far away...
Object depth (Tree tree) {
    return tree.fold (new TreeFolder() {
        Object onEmpty() { return new Integer(0); }
        Object onLeaf (int n) { return new Integer(n); }
        Object onNode (Tree l, Tree r) {
            Integer ll = (Integer) l.fold (this);
            Integer rr = (Integer) r.fold (this);
            return new Integer (ll.intValue() + rr.intValue());
        }
    });
} 
```

请注意，`depth()`我必须手动递归（调用`fold()`）`Tree`参数。相反，您可以选择预先对它们进行递归`Node.fold()`（并`TreeFolder`相应地进行更改），但是您*必须*递归 --- 如果您愿意，您不能选择仅递归到左子树。（在 Haskell 中，由于懒惰，我们不必进行这种权衡。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-05T21:33:39.950

这是您可以以一种通用且可扩展的方式处理此问题的一种方法的粗略草图。它不会在所有情况下都直接起作用，但可能会帮助您入门。

首先，一些初始假设：

1.  我们不希望将任何特定内容`depth`添加到`Tree`类中。
2.  我们不想失去静态类型的好处。

关键是要意识到你想在这里重新创建的 Haskell 代码不是`Tree`类型本身，而是它上面的*模式匹配*。因此，我们首先将“树上的模式匹配”作为其自身的第一类 (ha, ha) 实体。使用 C#-ish 伪代码，因为我多年没有使用 Java：

```
interface MatchTree<R> 
{
    R matchEmpty(Empty empty);
    R matchLeaf(Leaf leaf);
    R matchNode(Node node);
} 
```

要使用这种具体化的模式匹配，我们需要一个适当的方法`Tree`：

```
interface Tree
{
    R patternMatch<R>(MatchTree<R> patterns);
} 
```

然后，每个单独的子类型都可以通过以自身作为参数`Tree`调用适当的方法来实现该函数。`MatchTree`

等效的 Haskell 将是这样的：

```
data MatchTree r = MatchTree { matchEmpty :: r
                             , matchLeaf :: Int -> r
                             , matchNode :: Tree -> Tree -> r
                             } 
```

...可以很容易地看出它直接对应于 case 表达式：

```
match tree z fl fn = case tree of
                       Empty -> z
                       Leaf x -> fl i
                       Node lt rt -> fn lt rt 
```

顺便说一句，这种具体化的模式匹配在 OOP 圈子中被称为“访问者模式”。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-05T21:37:37.467

> 例如，方法 depth() 可能与 Tree 没有直接关系，将其添加到类会破坏业务逻辑。或者，更糟糕的是，Tree 可能是在我无法访问的 3rd 方库中编写的。在这种情况下，实现类 ADT 多态性的最简单方法是什么？

在这种情况下 - 我建议您使用设计模式**[Visitor](http://en.wikipedia.org/wiki/Visitor_pattern)**。它允许您**分离数据的表示和处理的逻辑**，甚至更多 - 它允许您实现不同的处理策略。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-06T16:53:19.387

@stemm 是正确的，访问者模式非常适合这个问题。但是，我还建议您查看众所周知的访问者模式的修改版本。一位博主发明了这种[教堂编码模式](http://apocalisp.wordpress.com/2009/08/21/structural-pattern-matching-in-java/)。这种模式比访问者模式更密集，并且具有更多的功能风格。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-06T16:44:49.387

编辑：这是您不想要的答案（放在`depth()`界面中`Tree`），但我认为无论如何它都值得全面分析。

* * *

更广泛地说，这是使用 classes 实现*sum 类型*的问题。在面向对象的语言中有一种非常常见的求和类型的方法。即*解释器模式*。

```
interface Tree { int depth(); }

class Empty implements Tree { int depth(){ return 0; }

class Leaf implements Tree {
  int n;
  int depth(){ return 1; }
}

class Node implements Tree {
  Tree l; Tree r;
  int depth(){ return max(depth(l), depth(r)); }
} 
```

让我们将其与 haskell 方法进行比较！很明显，类的作者可以有任意多种类型（`Empty`, `Leaf`, `Node`）和方法（`depth()`, `numLeafs()`）。但是，想要扩展这个树库的外部代码呢？

`:: Tree -> a`在 haskell 中使用代数数据类型，如果库公开`Tree(..)` （类型本身和所有三个构造函数），外部代码库可以添加类型的树函数。但是，不能向 中添加新的构造函数`Tree`，如下所示：

```
-- Code far far away can't do this in haskell
data Tree = ...
          | ...
          | Node3 Tree Tree Tree 
```

但是在java中使用解释器模式时，情况正好相反。不能向`Tree`接口添加新方法，但可以像这样添加新的构造函数：

```
-- Code far far away *can* do this in java
class Node3 implements Tree {
  Tree l; Tree mid; Tree r;
  int depth(){ ... }
} 
```

* * *

总之，这种设计模式在以下情况下非常有效：

*   其他人想在代数数据结构中添加项。
*   您需要完整的类型安全性

但这有点不令人满意，因为：

*   其他人不能添加减速器功能，如`numNodes()`
*   Trees 上的方法必须在每个类中放置一次，这感觉有些做作。我们更喜欢每个方法对树进行一次模式匹配，而不是我们以一种转置的方式进行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-05T21:32:20.937

我还没有找到任何令人愉快的解决方案。

我希望这可以帮助你。

```
interface Tree {
}

class Empty implements Tree {
}

class Leaf implements Tree {
    int n;
}

class Node implements Tree {
    Tree l;
    Tree r;
}

class Test{

    public static void main (String args[]){

        Test p = new Test();
        Empty e = new Empty();      
        System.out.println(p.depth(e));
        Leaf t = new Leaf();
        System.out.println(p.depth(t));     
        Node n = new Node();
        n.l = t;
        n.r = e;
        System.out.println(p.depth(n));
    }

    int depth(Tree tree) {
        if(tree instanceof Leaf){
            return 1;
        }
        return 0;    
    }

    int depth(Node node) {
        return 1 + Math.max(depth(node.l), depth(node.r));  
    }   

}
    } 
```

祝你好运！**

# mysql - 日期之间的时差，包括营业时间，不包括节假日

> ID：12753881
> 
> 赞同：1
> 
> 时间：2012-10-05T20:53:44.753
> 
> 标签：mysql

如何计算两个日期之间的时间差，考虑：

*   仅限周一至周五
*   上午 9 点至下午 5 点 30 分之间的时间；
*   不包括假期。

例子：

*   d1 = 2012-10-05 17:00:00
*   d2 = 2012-14-09 12:00:00

计算步骤：

*   2012-10-05 = 00:30:00
*   2012-10-06 = 00:00:00
*   2012-10-07 = 00:00:00
*   2012-10-08 = 07:30:00
*   2012-10-09 = 04:00:00

ddiff(d2,d1) = 12:00:00

[如here所述](https://stackoverflow.com/questions/10330836/how-to-count-date-difference-excluding-weekend-and-holidays-in-mysql)，我知道如何仅使用周一至周五来做到这一点。我说的是 MySQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:00:59.373

我提出了一个相对简单的解决方案，用于计算*完整*临时日期的时差。但是，使用 mysql 计算开始和结束日期的时间差有点麻烦。我*已将*它们包含在我的解决方案中，但有一些假设。

无论如何，这是sql

```
SET @startdate:='2012-12-24 17:00:00';
SET @enddate:='2013-01-02 12:00:00';

SELECT
TIME_TO_SEC(TIMEDIFF(CONCAT(DATE(@startdate),' 17:30:00'), @startdate))/3600 as startday_time,
TIME_TO_SEC(TIMEDIFF(@enddate, CONCAT(DATE(@enddate),' 9:00:00')))/3600 as endday_time,
SUM(daily_hours) as otherdays_time from
(
    SELECT 7.5 as daily_hours, id, DATE_ADD(DATE(@startdate),INTERVAL id-1 DAY) as idate from numbers
) dates
LEFT JOIN holidays on DATE(dates.idate) = DATE(holidays.date)
WHERE
idate BETWEEN @startdate AND @enddate
AND holidays.date IS NULL
AND DAYOFWEEK(idate) <> 7 AND DAYOFWEEK(idate) <> 1; 
```

sqlfiddle在这里： [http ://sqlfiddle.com/#!2/ff3f3/1/2](http://sqlfiddle.com/#!2/ff3f3/1/2)

为了获得有效的临时日期，我们需要两个表 - 一个`holidays`列出所有假期日期的`numbers`表和一个包含一系列整数的表，这对于连接以获得一系列连续的日期（没有间隙）非常有用。

注意：在 sqlfiddle 中，我`numbers`只将表格填充到 12 以涵盖我的示例中使用的日期 - 根据您将使用的日期范围，它可能需要填充到更高的数字。

对于开始时间和结束时间，我做了以下假设：

*   开始日期和结束日期都是应计入总时间的有效日期
*   开始日期的时间在午餐和 17.30 之间
*   结束日期的时间在午餐和 17.30 之间

如果这些假设是错误的，那么您将进入严重的条件领域（有很多 if），并且可能最好在 php（或其他）中这样做。

注意：出于说明目的，我没有添加时间（以小时为单位）。

# sencha-touch - 如何配置从 Sencha Touch 中的选择字段启动的 Ext.List？

> ID：12753882
> 
> 赞同：0
> 
> 时间：2012-10-05T20:53:44.213
> 
> 标签：sencha-touch, drop-down-menu, ext.list

在 Sencha Touch 2 中，我有一个带有选择字段的表单面板，可以从大量模型中进行选择。通过在选择字段上设置 usePicker 属性，我可以选择 Ext.Picker 或 Ext.List 作为选择器组件。但是如何配置 Ext.List？

我尝试设置 defaultPhonePickerConfig 和 defaultTabletPickerConfig，但这似乎不起作用。具体来说，我想设置 { grouped: true, indexBar: true } 来帮助我的用户浏览一长串选项。我使用 JavaScript 调试器跟踪 showPicker() 方法并验证实例化的 Ext.List 在其 config 属性中设置了这两个属性。但是列表覆盖仍然不显示组标题或索引栏。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:53:54.330

解决方案是将配置推迟到绘制面板组件之后：

```
usePicker: false,
defaultTabletPickerConfig: {
    listeners: {
        painted: function(panel) {
            var list = panel.down('list');
            list.setGrouped(true);
            list.setIndexBar(true);
        }
    }
} 
```

这是愚蠢的。

# c - 即使设置了所有 itimerspec 成员， timer_settime 也会失败

> ID：12753883
> 
> 赞同：1
> 
> 时间：2012-10-05T20:53:44.907
> 
> 标签：c, timer, posix, errno

因此，直到最近，当我们决定将其移至 Lubuntu 12.04 系统时，这段代码才能正常工作。对 timer_settime 的调用返回 EINVAL，并在 gdb 下运行它我已经确认 ts 的所有字段在调用时都在 0 和 999999999 之间：

```
1067        if(-1 ==timer_settime(tid,0,&ts,NULL))
(gdb) print ts
$1 = {it_interval = {tv_sec = 0, tv_nsec = 200000000}, it_value = {tv_sec = 0,
tv_nsec = 0}} 
```

因为这应该是唯一可以导致它返回 EINVAL 的东西，所以我非常困惑。也许这里有一些明显的东西我错过了。

```
struct sigevent sev;
struct itimerspec ts;
timer_t *tid;
//actually point the pointer at something.
tid = calloc(1,sizeof(timer_t));
//make sure there's no garbage in the structures.
memset(&sev,0,sizeof(struct sigevent));
memset(&ts,0, sizeof(struct itimerspec));
//notify via thread
sev.sigev_notify = SIGEV_THREAD;
sev.sigev_notify_function = SwitchThreadHandler;
sev.sigev_notify_attributes = NULL;
sev.sigev_value.sival_ptr = tid;
ts.it_value.tv_sec =0;
ts.it_value.tv_nsec = 0;
ts.it_interval.tv_sec = 0;
ts.it_interval.tv_nsec = 200000000;
if(-1 == timer_create(CLOCK_REALTIME,&sev,tid))
{
    retval = EX_SOFTWARE;
    fprintf(stderr,"Failed to create timer.");
    free(tid);
    return retval;
}

if(-1 ==timer_settime(tid,0,&ts,NULL))
{
    int errsv = errno;
    fprintf(stderr,"timer_settime FAILED!!!\n");
    if(errsv == EINVAL)
    {
        fprintf(stderr,"INVALID VALUE!\n");
    }
    else
    {
        fprintf(stderr,"UNKOWN ERROR: %d\n",errsv);
    }
    return EX_SOFTWARE;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T21:51:49.410

`timer_settime`记录为将 a`timer_t`作为第一个参数，而不是 a `timer_t *`like `timer_create`。`EINVAL`如果`timerid`无效，它将失败。

`*tid`因此，您应该作为第一个参数传递。

请注意，您的编译器应该为此发出警告。

# c# - 空参数错误

> ID：12753884
> 
> 赞同：0
> 
> 时间：2012-10-05T20:53:52.933
> 
> 标签：c#, asp.net-mvc-3

我在创建的应用程序中调用 Edit 方法时遇到问题。在视图中单击一个 ActionLink，它应该将订单号作为参数传递给 Edit 方法，并打开一个编辑页面，其中填充了字段中的订单信息。但是，单击链接后，我收到错误消息：

> 参数字典包含“AddressUpdater.WebUI.Controllers.OrderController”中方法“System.Web.Mvc.ViewResult Edit(Int32)”的不可为空类型“System.Int32”的参数“orderNum”的空条目。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数

但是该参数存在于 URL 中。以下是相关方法：

```
public ViewResult Edit(int orderNum)
{
    Order order = repository.Orders.First(o => o.OrderNumber == orderNum);
    return View(order);
} 
```

如果如果将参数更改为`int? orderNum`页面将呈现没有错误但没有任何数据存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:55:54.247

将数据发送到操作方法很可能有问题`Edit`，即在您的操作链接中。只需打开一些开发工具（例如 Firebug 或 Chrome 开发工具）来检查发送到服务器的内容。

当您的网址看起来像

```
Edit?OrderNumber=1234 
```

那么你需要在你的 Action 方法上有一个匹配的参数，比如

```
public ViewResult Edit(int orderNumber) {...} 
```

反而

```
Edit(int orderNum){...} 
```

不会工作。基本上 url 参数名称和操作方法参数名称必须匹配（不区分大小写，但名称必须匹配）

# c# - else 语句之前奇怪的自动缩进

> ID：12753886
> 
> 赞同：2
> 
> 时间：2012-10-05T20:54:02.523
> 
> 标签：c#, visual-studio

`else`在使用 C# 的 Visual Studio 中（这在 2010 年和 2012 年都发生在我身上），如果我在语句之前输入一个新行，我会得到一个奇怪的自动缩进：

```
if (condition1)
{
    DoSomething();
} // press Enter here, after the brace
    // auto indents to here

    // Helpful comment here about condition2, but awkwardly auto-indented
else if (condition2)
{
    DoSomethingElse();
} 
```

直观地说，我希望它只会自动缩进到与`if`/相同的列`else`，但它会进一步缩进一级。

我意识到无论如何将其他代码放在这两个块之间是非法的，但我仍然想在那里发表评论。有谁知道为什么会发生这种情况或如何解决？`else`每当我尝试评论一个块时，必须按退格键 4 次，这非常奇怪和烦人。

我知道有人会说“只需将评论放在`else`/`if`块内”，但我对这种现象的实际解释/解决方案感兴趣；*此外，对我来说，用评论解释两行前发生的代码是*没有意义的。

我也知道有人会说“只需将注释与`else`/`if`块放在同一行”，但将注释和代码放在同一行对我来说似乎很恶心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:03:13.073

我刚刚在 Visual Studio 2012 中尝试过：

事实上，当你写评论时，它似乎没有正确缩进。

但是在按下`CTRL`+ `E`, `CTRL`+之后`D`，一切都会自动正确缩进（在我看来）：

```
 if (condition)
        {

        }
        // comment line
        // another one
        else if (condition)
        {

        } 
```

# asp.net-mvc - 如何让 MSBuild 使用作为 nuget 包引用的 MVC 程序集构建我的解决方案

> ID：12753887
> 
> 赞同：3
> 
> 时间：2012-10-05T20:54:04.057
> 
> 标签：asp.net-mvc, asp.net-mvc-4, visual-studio-2012, nuget

我正在尝试在没有在机器上安装 Visual Studio 或 MVC 4 的情况下在测试服务器上构建 MVC 解决方案。

该解决方案将所有必需的 MVC 程序集称为 nuget 包。在项目中，所有 MVC 程序集都标记为本地复制。当然，在我的开发机器上，该解决方案在 Visual Studio 中构建得很好。

在构建机器上，我安装了 .net sdk，我正在尝试使用 MSBuild 构建解决方案。所有 nuget 包都受源代码控制，当我在服务器上进行 SVN 更新时，它会获取所有包。

当我运行构建时，我得到了对 MVC DLL 的损坏引用。我不明白为什么会发生这种情况，因为在解决方案中引用了 DLL 并且存在供构建使用。

这是 MSBuild 返回的错误示例...

```
DataAnnotations\RunDataAnnotationsFromModelPropertyAttribute.cs(5,18): error CS0234: The type or namespace name 'Mvc' does not exist in the namespace 'System.Web' (are you missing an assembly reference?)
DataAnnotations\RunDataAnnotationsFromModelPropertyAttribute.cs(12,93): error CS0246: The type or namespace name 'IClientValidatable' could not be found (are you missing a using directive or an assembly reference?)
Security\MyAuthenticateAttribute.cs(6,18): error CS0234: The type or namespace name 'Mvc' does not exist in the namespace 'System.Web' (are you missing an assembly reference?)
Security\MyAuthenticateAttribute.cs(12,48): error CS0246: The type or namespace name 'AuthorizeAttribute' could not be found (are you missing a using directive or an assembly reference?)
Security\MyAuthorizeAttribute.cs(5,18): error CS0234: The type or namespace name 'Mvc' does not exist in the namespace 'System.Web' (are you missing an assembly reference?)
Security\MyAuthorizeAttribute.cs(13,45): error CS0246: The type or namespace name 'AuthorizeAttribute' could not be found (are you missing a using directive or an assembly reference?)
Web\Mvc\MyLoginController.cs(7,18): error CS0234: The type or namespace name 'Mvc' does not exist in the namespace 'System.Web' (are you missing an assembly reference?)
Web\Mvc\MyLoginController.cs(44,62): error CS0234: The type or namespace name 'Mvc' does not exist in the namespace 'System.Web' (are you missing an assembly reference?) ... 
```

我花了几个小时在这上面。令我沮丧的是，它是在我的机器上的 Visual Studio 中构建的，而不是在使用 msbuild 的服务器上构建的。

赛斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T00:18:24.910

右键单击项目并单击“卸载”，然后再次单击“编辑”。

找到`<Reference>`for `System.Web.Mvc`。如果`<HintPath>`没有引用“包”目录（或丢失），那就是你的问题。只需删除包和所有引用并重新开始。

NuGet 包还原仅还原磁盘上的文件，它不会更新项目引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:03:10.373

“复制本地”只是意味着它将从您的 MVC3 安装中复制尚未安装在远程计算机上的程序集。

您是否尝试将 MVC dll 复制到项目中的文件夹（您提交到 VCS 存储库）并从那里引用所有这些，而不是从默认安装目录？那应该工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T05:50:57.103

在运行 msbuild 命令之前尝试在解决方案上运行 nuget install？如果您运行的是 VS2010 或更高版本，并且已将 nuget 扩展更新到最新版本，则“项目”菜单上有一个“启用 Nuget 包还原”选项。这会将您的解决方案和项目文件配置为在构建过程中运行 nuget install。

# unix - 为什么 zsh globbing 不能与 find 命令一起使用？

> ID：12753889
> 
> 赞同：23
> 
> 时间：2012-10-05T20:54:25.127
> 
> 标签：unix, zsh, glob

我一直在使用 zsh globbing 来执行以下命令：

```
 vim **/filename
 vim *.html.erb 
```

依此类推，但是当我输入以下内容时：

```
 find . -name *mobile* 
```

我得到回应：

```
 zsh: no matches found: *mobile* 
```

为什么？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-05T21:15:20.910

```
find . -name *mobile* # does not work 
```

对比

```
find . -name '*mobile*' # works 
```

不同之处在于 shell 在解析行时所采取的步骤。通常，shell 在运行命令之前会扩展它找到的任何通配符。但是，单引号将参数标记为文字，这意味着 shell 在运行命令之前不会对该参数执行通配符扩展。

为了演示差异，假设您位于包含以下文件的目录中：

```
$ tree
./
mobile.1
dir/
    mobile.2 
```

zsh 在运行前会将第一个表单扩展为以下形式：

```
find . -name mobile.1 
```

这意味着 find 只会查找字面上命名为 mobile.1 的文件

第二种形式将按如下方式运行：

```
find . -name *mobile* 
```

这意味着 find 将查找包含字符串“mobile”的任何文件名。

这里要注意的重要一点是 zsh 和 find 都支持相同的通配符语法，但是在这种情况下您希望 find 处理通配符，而不是 zsh。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T20:54:25.127

事实证明，解决问题所需要做的就是在输入周围添加一些引号：

```
find . -name '*mobile*' 
```

对于为什么我还没有真正的答案……而且文档中也没有什么让我印象深刻的东西，但是如果您知道答案，请告诉我！

# c - 旋转矩阵缩小对象？

> ID：12753892
> 
> 赞同：1
> 
> 时间：2012-10-05T20:54:33.003
> 
> 标签：c, opengl, trigonometry, model-view, rotational-matrices

我的数学错了吗？用户应该能够输入以度为单位的角度，并分别旋转矩阵。相反，它缩小对象并翻转它......调用

```
glmxRotate(&modelview, 0.0f, 0.0f, 1.0f, 90.0f); 
```

（模型视图是一个单位矩阵）产生：

常规：http: [//i.imgur.com/eX7Td.png](http://i.imgur.com/eX7Td.png)

旋转：http: [//i.imgur.com/YnMEn.png](http://i.imgur.com/YnMEn.png)

这是glmxRotate：

```
glmxvoid glmxRotate(glmxMatrix* matrix, glmxfloat x, glmxfloat y, glmxfloat z,
    glmxfloat angle)
{
    if(matrix -> mx_size != 4){GLMX_ERROR = GLMX_NOT_4X4; return;}

    //convert to rads
    angle *= 180.0f / 3.14159;

    const glmxfloat len = sqrtf((x * x) + (y * y) + (z * z)),
                    c = cosf(angle),
                    c1 = 1.0f - c,
                    s = sinf(angle);

    //normalize vector
    x /= len;
    y /= len;
    z /= len;

    glmxfloat rot_mx[] = {x * x * c1 + c,
                          x * y * c1 + z * s,
                          x * z * c1 - y * s,
                          0.0f,

                          x * y * c1 - z * s,
                          y * y * c1 + c,
                          y * z * c1 + x * s,
                          0.0f,

                          x * z * c1 + y * s,
                          y * z * c1 - x * s,
                          z * z * c1 + c,
                          0.0f,

                          0.0f,
                          0.0f,
                          0.0f,
                          1.0f,};

    _glmxMultiMatrixArray(matrix, rot_mx, 4);
} 
```

另外，如果一个平移矩阵是用最后四列中的平移定义的，那么如何平移一个单位矩阵，因为结果总是会产生 0？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:43:54.470

你的矩阵对我来说看起来是正确的，但你知道你的角度乘以弧度实际上是弧度乘以角度吗？

```
//convert to rads
angle *= 180.0f / 3.14159; 
```

应该是`Pi/180.f`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-02T23:11:10.393

由于浮点数存储在 sin 和 cos 中的空间有限，因此无法精确计算出这意味着每次旋转物体时都会发生小错误，这意味着随着时间的推移物体会变小。如果您不希望发生这种情况，请使用四元数进行旋转。 [https://www.npmjs.com/package/quaternion](https://www.npmjs.com/package/quaternion)

# proxy - 代理感知的定义是什么

> ID：12753893
> 
> 赞同：8
> 
> 时间：2012-10-05T20:54:37.347
> 
> 标签：proxy, definition

我需要澄清流行语“代理感知”。这是否意味着在应用程序尝试直接与主机执行操作后感知到代理？还是在创建代理对象（想想.net WebProxy）并传入代理地址、端口、登录名等之后，应用程序知道如何创建和使用与服务器的代理连接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T15:49:42.073

我认为这个词意味着如果应用程序能够建立到一个或多个代理服务器的连接，以通过这些代理服务器重新路由您的连接尝试到目标主机。

例如，带有代理设置的网络浏览器（proxy-aware）首先连接到代理服务器并请求代理服务器连接到您请求的网页，但大多数终端客户端不支持代理设置并且无法执行这样的过程，因此不代理感知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:18:23.767

在筛选了几篇寻找定义的帖子后，我为自己提出了定义。“代理感知应用程序是这样的应用程序，即给定代理地址（和/或凭据）以及目标地址，应用程序将创建代理连接，并将管理客户端、代理连接之间流量的软件端和目的地。” 我的结论是，成为代理感知应用程序的必要条件不是感知代理的能力，而是接受和管理客户端和目标之间存在中间可寻址跃点这一事实的能力。

# javascript - Javascript 路由正则表达式脚本

> ID：12753895
> 
> 赞同：1
> 
> 时间：2012-10-05T20:54:47.527
> 
> 标签：javascript, ajax, regex, router

我正在开发像 Backbone、Sammy、Spin 这样的 Javascript 路由器。但是我的要求很简单。我们应该能够给它一组路由及其相应的回调，并且我们应该能够根据请求处理浏览器 URL。

我如何替换 :id 只使用数字， :slug 替换常见的蛞蝓？

我写了这段代码：

```
core.route = function(route, options, callback) {
    var url = options.hash;
    var route_segments = route.split('/').length-1;
    var hash_segments = url.split('/').length-1;
    var route_matcher = new RegExp(route.replace(/:[^\/]+/g, '([\\w-]+)'));
    if (url.match(route_matcher)) {
        if (route_segments === hash_segments){
            callback();
        }
    }
};

core.route('/work/:slug/:id/', options, function() {
    alert("work/example/id");
});

core.route('/work/:id/', options, function() {
    alert("work/id/");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:30:39.003

你为什么不看看 Backbone 的路由实现，然后试着找出你真正需要的东西呢？这应该是可能的，你也可以在那里找到[使用过的正则表达式](https://github.com/documentcloud/backbone/blob/master/backbone.js#L908)：

[https://github.com/documentcloud/backbone/blob/master/backbone.js#L894](https://github.com/documentcloud/backbone/blob/master/backbone.js#L894)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:11:46.140

您必须首先定义蛞蝓的外观。但是`\d+`匹配正则表达式中的数字字符串，所以你可以试试这个：

```
core.route('/work/:slug/(\\d+)/', options, function() {
//...
core.route('/work/(\\d+)/', options, function() {
//... 
```

# python - 如何从 Python 加载用 tcl 编写的 dll 文件

> ID：12753896
> 
> 赞同：1
> 
> 时间：2012-10-05T20:54:50.150
> 
> 标签：python, dll, tcl

我有一个用 tcl 编写的脚本，它加载一个 dll 文件。我想在 python 中加载这个文件。我不确定 dll 文件是否是用 tcl 编写的，但是因为 tcl 文件导入它我认为它是用 tcl 编写的。我曾尝试使用 WinDLL("path_to_dll") 但我知道没有提供名称的模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:59:14.683

最简单的方法是在 Python 进程中使用 Tkinter 包及其内置的 Tcl 解释器。

如果它是一个 Tcl 扩展 dll，那么在没有太多设置的情况下从 Python 调用它是没有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T08:07:02.260

Python 和 Tcl 有本质上不同的 C API；完全没有理由期望为其中一个编写的二进制库可以与另一个一起使用。有可能编写一个库来使用它加载到的任何库的 API——从 Tcl 的角度来看，这将涉及链接到 Tcl 存根库，这样就不会对 API 进行讨厌的硬绑定——但我没有不知道如何在 Python 方面做到这一点，这绝对是非常棘手的事情。更实际的做法是拥有一个包含与语言无关的实现的库，然后再拥有两个将该 API 绑定到特定语言的库（绑定层甚至可以使用 SWIG 之类的工具自动生成，尽管这不能解决语言阻抗问题问题）。

当然，如果您只是想用一种语言编写库并从另一种语言使用它，您可以这样做。毕竟，库只是磁盘上的字节。不过，让专业工具（编译器、链接器）负责编写库通常会更容易；库的数据格式并不是最简单的东西！

# html - 背景剪辑和背景来源之间有什么区别吗？

> ID：12753900
> 
> 赞同：28
> 
> 时间：2012-10-05T20:55:17.370
> 
> 标签：html, css, background

CSS3 声明`background-clip`和`background-origin`似乎对背景有相同的效果。它们似乎都将背景限制在相对于 HTML 元素的某个区域，所以我想知道这两个声明的功能是否真的存在差异。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-05T20:59:34.210

根据 MDN：

> **background-clip** CSS 属性指定元素的背景（颜色或图像）是否延伸到其边框下方。

尽管

> **background-origin** CSS 属性确定背景定位区域，即使用 background-image CSS 属性指定的图像原点的位置。

*   [https://developer.mozilla.org/en-US/docs/CSS/background-clip](https://developer.mozilla.org/en-US/docs/CSS/background-clip)
*   [https://developer.mozilla.org/en-US/docs/CSS/background-origin](https://developer.mozilla.org/en-US/docs/CSS/background-origin)

这两个属性都有三个选项：`border-box`、`padding-box`和`content-box`。该`background-origin`属性确定背景的放置位置（默认为填充框），而`background-clip`确定显示背景的哪一部分（默认为边框框）。这些属性可以一起使用，也可以单独使用。

一些示例可能有用：

*   [默认](http://jsfiddle.net/j08691/t2tpjys0/1/)（未指定任何属性）

**背景来源**

*   [背景原点设置为`border-box`](http://jsfiddle.net/j08691/t2tpjys0/2/)- 请注意背景图像是如何略微向上和向左移动的，以便其位置的原点位于 div 的边框下方（边框已设为透明以帮助可视化这一点）。
*   [Background-origin 设置为`padding-box`](http://jsfiddle.net/j08691/t2tpjys0/3/)(default) - 由于该`padding-box`值是默认值，因此应该与默认示例相同。
*   [背景原点设置为`content-box`](http://jsfiddle.net/j08691/t2tpjys0/4/)- 请注意背景图像是如何稍微向下和向右移动的，以便其位置的原点是 div 的内容区域，这由应用于 div 的填充确定。

**背景剪辑**

*   [背景剪辑设置为`border-box`](http://jsfiddle.net/j08691/t2tpjys0/5/)（默认） - 这里与默认示例没有区别，因为背景图像的原点是填充框（默认），而背景剪辑设置为边框框（默认）。在这种情况下，图像不会被剪裁，因为它适合边框框。
*   [背景剪辑设置为`padding-box`](http://jsfiddle.net/j08691/t2tpjys0/6/)- 这里与默认示例没有区别，因为背景图像的原点是填充框（默认）并且背景剪辑设置为填充框。与前面的示例一样，图像没有被剪裁，因为它适合填充框。
*   [Background-clip 设置为`content-box`](http://jsfiddle.net/j08691/t2tpjys0/7/)- 在这里您可以看到背景正在被剪裁，因为应用于 div 的填充创建了一个小的内容区域。背景图像的原点仍然是填充框。

**background-clip 和 background-origin 一起使用**

*   [Background-clip 设置为`padding-box`和 background-origin 设置为`content-box`](http://jsfiddle.net/j08691/t2tpjys0/8/)（均为非默认值） - 在这里您可以看到图像的原点已设置为 content-box，因此它被 div 的填充从正常位置向下和向左推. 然后将背景剪辑设置为填充框，以便图像不会显示在底部或右侧边框下方（如果设置为边框框则会显示）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T20:58:42.310

来自[CSS3.info](http://www.css3.info/preview/background-origin-and-background-clip/)：

background-origin 属性用于确定如何计算某个框内背景的背景位置。

background-clip 属性用于确定背景是否延伸到边框中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T20:58:29.190

阅读：[http ://www.css3.info/preview/background-origin-and-background-clip/](http://www.css3.info/preview/background-origin-and-background-clip/)

'background-clip' 是背景是否在一个盒子、填充或其他东西中！

'background-origin' 用于计算某个背景在某个边框、填充或其他东西中的位置！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-19T18:36:24.920

该矩阵演示了差异以及两者何时有效：

[http://codepen.io/anon/pen/RNVKvj](http://codepen.io/anon/pen/RNVKvj)

HTML

```
<h3>Image size default - origin has no impact</h3>
<div class="box box4" > <span>clip:border<br>
  origin:any</span> </div>
<div class="box box1"> <span>clip:padding<br>
  origin:any</span> </div>
<div class="box box7"  > <span>clip:content<br>
  origin:any</span> </div>
<br clear="all"/>
<h3>Image position top, left</h3>
<div class="positioned">
  <div class="box box4"> <span>clip:border<br>
    origin:border</span> </div>
  <div class="box box5"> <span>clip:border<br>
    origin:padding</span> </div>
  <div class="box box6"> <span>clip:border<br>
    origin:content</span> </div>

  <div class="box box1" style="clear:both;"> <span>clip:padding<br>
    origin:border</span> </div>
  <div class="box box2"> <span>clip:padding<br>
    origin:padding</span> </div>
  <div class="box box3"> <span>clip:padding<br>
    origin:content</span> </div>

  <div class="box box7" style="clear:both;"> <span>clip:content<br>
    origin:border</span> </div>
  <div class="box box8"> <span>clip:content<br>
    origin:padding</span> </div>
  <div class="box box9"> <span>clip:content<br>
    origin:content</span> </div>
</div>
<br clear="all"/>

<h3>Image size "contained"</h3>
<div class="contain">

  <div class="box box4"> <span>clip:border<br>
    origin:border</span> </div>
  <div class="box box5"> <span>clip:border<br>
    origin:padding</span> </div>
  <div class="box box6"> <span>clip:border<br>
    origin:content</span> </div>

  <div class="box box1" style="clear:both;"> <span>clip:padding<br>
    origin:border</span> </div>
  <div class="box box2"> <span>clip:padding<br>
    origin:padding</span> </div>
  <div class="box box3"> <span>clip:padding<br>
    origin:content</span> </div>

  <div class="box box7" style="clear:both;"> <span>clip:content<br>
    origin:border</span> </div>
  <div class="box box8"> <span>clip:content<br>
    origin:padding</span> </div>
  <div class="box box9"> <span>clip:content<br>
    origin:content</span> </div>
</div> 
```

CSS

```
.box{ background:url(http://upload.wikimedia.org/wikipedia/en/2/24/Lenna.png) no-repeat center center;  
  width:300px;
  height:300px;  
  border:solid 25px rgba(0,0,0,0.5);  
  padding:25px;
  float:left;
  margin-right:5px; margin-bottom:5px;
  box-sizing:border-box;

}
.contain .box{  
  background-size: contain;
}
.positioned .box{  
  background-position:top left;
}
.box span{color:#fff; text-align:center; display:block; font-size:20px; font-weight:bold; height:100%; background-color:rgba(256,256,256,0.5);}

.box1{
  background-clip:padding-box;
  background-origin:border-box;
}

.box2{
  background-clip:padding-box;
  background-origin:padding-box;
}

.box3{
  background-clip:padding-box;
  background-origin:content-box;
}

.box4{
  background-clip:border-box;
  background-origin:border-box;
}

.box5{
  background-clip:border-box;
  background-origin:padding-box;
}

.box6{
  background-clip:border-box;
  background-origin:content-box;
}

.box7{
  background-clip:content-box;
  background-origin:border-box;
}

.box8{
  background-clip:content-box;
  background-origin:padding-box;
}

.box9{
  background-clip:content-box;
  background-origin:content-box;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-26T16:23:02.260

> **背景来源**
> 
> 在此属性之前，当我们将背景图像添加到元素时，图像位置从元素中填充的左上角开始。background-origin 让你决定你希望背景位置的起点在哪里，边框或填充或内容。
> 
> 根据 box-model， background-origin 的新属性有 3 个值：
> 
> border-box - 将背景位置 0,0 点定位在边框的左上角。padding-box（默认） - 将背景位置 0,0 点定位在填充的左上角。content-box - 将背景位置 0,0 点定位在内容的左上角。
> 
> **背景剪辑**
> 
> 使用 background-clip 我们可以决定在哪里剪切背景图像，它与前面提到的背景原点值相同。
> 
> background-clip 的新属性有 3 个值：
> 
> 边框框（默认） - 显示完整图像，不剪切任何东西。padding-box - 剪切边框背景图像。内容框 - 剪切边框和填充背景图像。

取自链接：
[https ://coderwall.com/p/h7dwaq/say-hello-to-background-origin-and-background-clip-css3-new-features](https://coderwall.com/p/h7dwaq/say-hello-to-background-origin-and-background-clip-css3-new-features)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-13T03:32:39.613

我写了一篇关于这个主题的**文章**，如果有人真的很期待看到**background-clip**和**background-origin**之间的区别，那么请查看这篇文章。

***链接：*** [https ://medium.com/@AmJustSam/whats-the-difference-between-background-clip-vs-background-origin-b9a43b4a973](https://medium.com/@AmJustSam/whats-the-difference-between-background-clip-vs-background-origin-b9a43b4a973)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-08-04T04:42:30.067

简而言之 -

background-origin : 指定图像的原点

background-clip : 指定绘画区域

# cuda - 无法让简单的 CUDA 程序工作

> ID：12753906
> 
> 赞同：5
> 
> 时间：2012-10-05T20:55:40.543
> 
> 标签：cuda

我正在尝试 CUDA 编程的“hello world”程序：将两个向量相加。这是我尝试过的程序：

```
#include <cuda.h>
#include <stdio.h> 
#define  SIZE 10

__global__  void vecAdd(float* A, float* B, float* C) 
{ 
   int i = threadIdx.x; 
   C[i] = A[i] + B[i]; 
} 

int  main() 
{ 
     float A[SIZE], B[SIZE], C[SIZE]; 
     float *devPtrA, *devPtrB, *devPtrC; 
     size_t memsize= SIZE * sizeof(float); 

     for (int i=0; i< SIZE; i++) {
        A[i] = i;
        B[i] = i;
     }

     cudaMalloc(&devPtrA, memsize); 
     cudaMalloc(&devPtrB, memsize); 
     cudaMalloc(&devPtrC, memsize); 
     cudaMemcpy(devPtrA, A, memsize,  cudaMemcpyHostToDevice); 
     cudaMemcpy(devPtrB, B, memsize,  cudaMemcpyHostToDevice); 

     vecAdd<<<1, SIZE>>>(devPtrA,  devPtrB, devPtrC); 
     cudaMemcpy(C, devPtrC, memsize,  cudaMemcpyDeviceToHost); 

     for (int i=0; i<SIZE; i++) 
         printf("C[%d]: %f + %f => %f\n",i,A[i],B[i],C[i]); 

     cudaFree(devPtrA); 
     cudaFree(devPtrB); 
     cudaFree(devPtrC); 
} 
```

编译：

```
nvcc cuda.cu 
```

输出是这样的：

```
C[0]: 0.000000 + 0.000000 => 0.000000
C[1]: 1.000000 + 1.000000 => 0.000000
C[2]: 2.000000 + 2.000000 => 0.000000
C[3]: 3.000000 + 3.000000 => 0.000000
C[4]: 4.000000 + 4.000000 => 0.000000
C[5]: 5.000000 + 5.000000 => 0.000000
C[6]: 6.000000 + 6.000000 => 0.000000
C[7]: 7.000000 + 7.000000 => 0.000000
C[8]: 8.000000 + 8.000000 => 366987238703104.000000
C[9]: 9.000000 + 9.000000 => 0.000000 
```

每次运行它时，我都会得到 C[8] 的不同答案，但所有其他元素的结果始终为 0.000000。

Ubuntu 11.04 系统是一个 64 位 Xeon 服务器，具有 4 个内核，运行最新的 NVIDIA 驱动程序（2012 年 10 月 4 日下载）。该卡是具有 96 个内核和 1GB 内存的 EVGA GeForce GT 430。

我应该怎么做才能弄清楚发生了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T06:28:32.420

似乎您的驱动程序未初始化，但不检查 cuda 返回代码始终是一种不好的做法，您应该避免这种做法。这是可用于 cuda 调用的简单函数 + 宏（引自 Cuda by Example）：

```
static void HandleError( cudaError_t err,
                         const char *file,
                         int line ) {
    if (err != cudaSuccess) {
        printf( "%s in %s at line %d\n", cudaGetErrorString( err ),
                file, line );
        exit( EXIT_FAILURE );
    }
}
#define HANDLE_ERROR( err ) (HandleError( err, __FILE__, __LINE__ )) 
```

现在开始调用你的函数，如：

```
HANDLE_ERROR(cudaMemcpy(...)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T04:50:36.067

最可能的原因：未加载 NVIDIA 驱动程序。在无头 Linux 系统上，X Windows 没有运行，因此驱动程序不会在启动时加载。

以 root 身份运行`nvidia-smi -a`以加载它们并以报告的形式获得确认。

尽管现在已加载驱动程序，但每次运行 CUDA 程序时仍需要对其进行初始化。将驱动程序置于持久模式，`nvidia-smi -pm 1`以便它们始终保持初始化状态。将此添加到启动脚本（例如 rc.local）中，以便在每次启动时发生。

# javascript - 主干视图实例化 TypeError

> ID：12753907
> 
> 赞同：3
> 
> 时间：2012-10-05T20:55:43.343
> 
> 标签：javascript, jquery, backbone.js, underscore.js, backbone-views

我是 Backbone 的新手，我正在尝试使用 Underscore 的模板渲染一个基本视图。这是javascript：

```
TestView = Backbone.View.extend({
   initialize: function() {
      this.render();
   },
   render: function() {
      var template = _.template( $('#template').html(), {} );
      this.el.html( template );
   }
});

var test_view = new TestView( { el: $('#container') } ); 
```

这是我在 Chrome 中遇到的错误：

```
Uncaught TypeError: Expecting a function in instanceof check, but got [object Object] 
```

它在第 1203 行（开发版）上从 Backbone 抛出错误。[您可以在我的网站上](http://athanclark.com/jstest)看到正在运行的错误。

我在这里做错了什么？我应该省略 render() 函数吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T20:59:22.217

改变加载顺序，即先jQuery：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://documentcloud.github.com/underscore/underscore.js"></script>
<script src="http://backbonejs.org/backbone.js"></script> 
```

# jquery - 有没有办法编写一个选择器来遍历标签的父级，直到找到匹配项？

> ID：12753908
> 
> 赞同：0
> 
> 时间：2012-10-05T20:55:45.570
> 
> 标签：jquery

看起来在 jQuery 中没有办法做到这一点，但我想我会问你们好人是否有一个聪明的工作可以让我避免`parent().parent().parent()`.

我基本上希望完成这样的事情：`$('#myId').parent('li')`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:56:40.880

试试[`.closest()`](http://api.jquery.com/closest/)选择器

```
$('#myId').closest('li'); 
```

这将遍历它在 DOM 树中的祖先。

[检查小提琴](http://jsfiddle.net/sushanth009/FLLP5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T20:56:49.847

你应该使用`closest()`：

```
$(startElem).closest(selectorString); 
```

或者，可能`parents()`：

```
$(startElem).parents(selectorString); 
```

主要区别在于`closest()`它将返回零个或一个匹配项（它找到的第一个元素，或者如果选择器与祖先不匹配则不返回任何元素），而`parents()`将返回一个、无或许多元素（它继续向上 DOM 树到根元素并返回所有找到的匹配项（如果有）。）

顺便说一句，`closest()`还将搜索起始元素，而`parents()`只会查看从起始元素的`parent()`节点开始的那些祖先。

参考：

*   [`closest()`](http://api.jquery.com/closest/).
*   [`parents()`](http://api.jquery.com/parents/).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T20:57:15.823

您可以使用`closest` 或 `parents`。

不同之处在于`parents`返回所有父母`li`，`closest`返回第一个。

*参考资料*：

*   [http://api.jquery.com/closest/](http://api.jquery.com/closest/)
*   [http://api.jquery.com/parents/](http://api.jquery.com/parents/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T20:57:33.550

使用`$('#myId').parents('li')`. 见：[http ://api.jquery.com/parents/](http://api.jquery.com/parents/)

# python - 覆盖 Python mock 的补丁装饰器

> ID：12753909
> 
> 赞同：24
> 
> 时间：2012-10-05T20:55:47.793
> 
> 标签：python, testing, mocking

我有一个 Python`TestCase`类，其中除一个之外的所有测试方法都需要以相同的方式修补对象。另一种方法需要来自同一对象的一些其他行为。我正在使用[mock](http://www.voidspace.org.uk/python/mock/)，所以我做了：

```
@mock.patch('method_to_patch', mock.Mock(return_value=1))
class Tests(TestCase):

    @mock.patch('method_to_patch', mock.Mock(return_value=2))
    def test_override(self):
         (....) 
```

但这行不通。运行时`test_override`，它仍然从类装饰器调用修补的行为。

经过大量调试，我发现在`TestSuite`构建过程中，`@patch`around`test_override`是在 around 之前调用的`Tests`，并且由于`mock`按顺序应用补丁，类装饰器覆盖了方法装饰器。

这个顺序正确吗？我期待相反的情况，我不确定如何覆盖补丁......也许有一个`with`声明？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-09T16:08:02.203

好吧，事实证明，睡个好觉和洗个冷水澡让我重新思考了整个问题。我对嘲笑的概念还很陌生，所以它还没有完全正确。

问题是，没有必要将补丁覆盖到模拟对象。这是一个模拟对象，这意味着我可以让它做任何事情。所以我的第一次尝试是：

```
@mock.patch('method_to_patch', mock.Mock(return_value=1))
class Tests(TestCase):

    def test_override(self):
         method_to_patch.return_value = 2
         (....) 
```

这有效，但具有更改所有后续测试的返回值的副作用。所以我尝试了：

```
@mock.patch('method_to_patch', mock.Mock(return_value=1))
class Tests(TestCase):

    def test_override(self):
         method_to_patch.return_value = 2
         (....)
         method_to_patch.return_value = 1 
```

它就像一个魅力。但似乎代码太多了。于是我走上了上下文管理的道路，就像这样：

```
@mock.patch('method_to_patch', mock.Mock(return_value=1))
class Tests(TestCase):

    def test_override(self):
         with mock.patch('method_to_patch', mock.Mock(return_value=2):
             (....) 
```

我认为它看起来更清晰，更简洁。

关于`patch`装饰器的应用顺序，实际上是正确的顺序。就像从下向上应用堆叠的装饰器一样，方法装饰器应该在类装饰器之前调用。我想这是有道理的，我只是期待相反的行为。

无论如何，我希望这对将来像我这样的可怜的新手灵魂有所帮助。

# android - 在智能手机上从网站建立新联系人

> ID：12753911
> 
> 赞同：-1
> 
> 时间：2012-10-05T20:55:56.913
> 
> 标签：android, iphone, import, webkit, contacts

我想在我的网站上创建一个按钮，当从智能手机点击它时，它将允许用户导入我的联系信息。

看来您可以使用 来执行此操作`vcard`，但这需要智能手机用户安装其他软件才能使其正常工作。

是否有类似于“tel:”href-tag 的东西可以触发将数据导入手机的联系人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:58:01.337

看看[这个](https://stackoverflow.com/questions/1892373/iphone-how-to-get-safari-to-recognize-a-vcard)，它使用 VCalendar 方法来实现从网页存储联系人。

此处引用的完整代码示例：

```
<?php
# Send correct headers      
header("Content-type: text/x-vcalendar; charset=utf-8"); 
# Alternatively: application/octet-stream
# Depending on the desired browser behaviour
# Be sure to test thoroughly cross-browser

header("Content-Disposition: attachment; filename=\"iphonecontact.ics\";");
# Output file contents - simple version
#echo file_get_contents("iphonecontact.ics");

# Generate file contents - advanced version
# BEGIN:VCALENDAR
# VERSION:2.0
# BEGIN:VEVENT
# DTSTART;TZID=Europe/London:20120617T090000
# DTEND;TZID=Europe/London:20120617T100000
# SUMMARY:iPhone Contact
# DTSTAMP:20120617T080516Z
# ATTACH;VALUE=BINARY;ENCODING=BASE64;FMTTYPE=text/directory;
#  X-APPLE-FILENAME=iphonecontact.vcf:
#  QkVHSU46VkNBUkQNClZFUlNJT046My4wDQpOOkNvbnRhY3Q7aVBob25lOzs7DQpGTjppUGhvbm
#  UgQ29udGFjdA0KRU1BSUw7VFlQRT1JTlRFUk5FVDtUWVBFPVdPUks6aXBob25lQHRoZXNpbGlj
#  b25nbG9iZS5jb20NClRFTDtUWVBFPUNFTEw7VFlQRT1WT0lDRTtUWVBFPXByZWY6KzQ0MTIzND
#  U2Nzg5MA0KRU5EOlZDQVJE
# END:VEVENT
# END:VCALENDAR

echo "BEGIN:VCALENDAR\n";
echo "VERSION:2.0\n";
echo "BEGIN:VEVENT\n";
echo "SUMMARY:Click attached contact below to save to your contacts\n";
$dtstart = date("Ymd")."T".date("Hi")."00";
echo "DTSTART;TZID=Europe/London:".$dtstart."\n";
$dtend = date("Ymd")."T".date("Hi")."01";
echo "DTEND;TZID=Europe/London:".$dtend."\n";
echo "DTSTAMP:".$dtstart."Z\n";
echo "ATTACH;VALUE=BINARY;ENCODING=BASE64;FMTTYPE=text/directory;\n";
echo " X-APPLE-FILENAME=iphonecontact.vcf:\n";
$vcard = file_get_contents("iphonecontact.vcf");        # read the file into memory
$b64vcard = base64_encode($vcard);                      # base64 encode it so that it can be used as an attachemnt to the "dummy" calendar appointment
$b64mline = chunk_split($b64vcard,74,"\n");             # chunk the single long line of b64 text in accordance with RFC2045 (and the exact line length determined from the original .ics file exported from Apple calendar
$b64final = preg_replace('/(.+)/', ' $1', $b64mline);   # need to indent all the lines by 1 space for the iphone (yes really?!!)
echo $b64final;                                         # output the correctly formatted encoded text
echo "END:VEVENT\n";
echo "END:VCALENDAR\n";
?> 
```

（Steve Grobe 的原始答案 - [iPhone：如何让 safari 识别电子名片？](https://stackoverflow.com/questions/1892373/iphone-how-to-get-safari-to-recognize-a-vcard)）

# coldfusion - 在 cfinvoke 中引用冷融合组件时如何向上遍历两个级别？

> ID：12753912
> 
> 赞同：1
> 
> 时间：2012-10-05T20:55:57.987
> 
> 标签：coldfusion, path, parent, cfc

如果我不想做任何映射，是否还有另一种方法可以调用组件中的方法，即“上两层”。像这样：

```
 service
     component_to_call.cfc
  mem
     pages
     handlers
        calling.cfc 
```

这是我从内部打来的电话`calling.cfc`：

```
 <cfinvoke 
    component="service.component_to_call"
    method="do_the"
    param1="#renderedResults#" 
    param2="#taskByName#" 
    returnvariable="tamperedCode">
    </cfinvoke> 
```

这会引发`service.component_to_call`无法找到的错误。

**问：**
如何调用父文件夹中的组件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T21:18:50.053

为什么不想使用映射？这有点奇怪。

无论如何，只需直接浏览到您希望实例化的 CFC，它就会输出它的自动生成的 API 文档，首先是它的完整虚线路径。你可以用那个。然而，这是绝对的，不是相对的。

你不能做的是以某种方式指定一个相对路径，就像使用文件一样（例如：“../../fileInGrandparentDir.cfm”......不能用 CFC 路径来做到这一点。

另一种方法是将作为两个 CFC 的祖先的某个目录创建为自定义标记路径，然后您可以通过文件名引用 CFC，CF 会找到它们。如果目录结构很复杂，这样做会影响性能。也就是说：性能影响*不大*。

真的......您应该有一个到应用程序目录顶层的映射，然后使用该映射来完全路径 CFC。这就是它通常的做法，我认为这是最便于携带的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T21:11:56.560

您可以在与调用 CFC 相同级别的 Proxy.cfc 中包含上一级的 CFC，然后通过添加 extends="Proxy" 作为调用 CFC 的属性来扩展 Proxy.cfc。

示例 Proxy.cfc

```
<cfcomponent name="Proxy">
<cfinclude template="../../service/component_to_call.cfc">
</cfcomponent> 
```

调用 cfc 的示例

```
<cfcomponent name="calling" extends="Proxy">
</cfcomponent> 
```

# javascript - 使用 JavaScript 解析带有管道字符的短语

> ID：12753913
> 
> 赞同：0
> 
> 时间：2012-10-05T20:56:19.083
> 
> 标签：javascript, safari-extension

我一直在开发用于将内容保存到[Instapaper](http://www.instapaper.com/)的 Safari 扩展程序，并且一直在努力增强我对书签的标题解析。例如，我最近保存的一篇文章的标签如下所示：

> 报告：Bing 用户受到恶意软件重定向的不成比例影响 | TechCrunch

我想在我的 Safari 扩展程序中使用 JavaScript 来删除管道字符之后的所有文本，这样我可以使最终的书签在保存到 Instapaper 后看起来更整洁。

我已经尝试使用如下代码块在几个类似的案例中成功解析标题：

```
if(safari.application.activeBrowserWindow.activeTab.title.search(' - ') != -1) {
            console.log(safari.application.activeBrowserWindow.activeTab.title);
            console.log(safari.application.activeBrowserWindow.activeTab.title.search(' - '));
            var parsedTitle = safari.application.activeBrowserWindow.activeTab.title.substring(0, safari.application.activeBrowserWindow.activeTab.title.search(' - '));
            console.log(parsedTitle);
}; 
```

一旦我尝试用管道字符做同样的事情，我就开始陷入循环；但是，由于 JavaScript 将其用作特殊字符。我已经尝试了几位代码来尝试解决这个问题。最近看起来像这样（尝试使用正则表达式并转义管道字符）：

```
if(safari.application.activeBrowserWindow.activeTab.title.search('/\|') != -1) {
            console.log(safari.application.activeBrowserWindow.activeTab.title);
            console.log(safari.application.activeBrowserWindow.activeTab.title.search('/\|'));
            var parsedTitle = safari.application.activeBrowserWindow.activeTab.title.substring(0, safari.application.activeBrowserWindow.activeTab.title.search('/\|'));
            console.log(parsedTitle);
}; 
```

如果有人可以给我一个适用于此的提示，我们将*不胜*感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T20:59:28.983

您的正则表达式格式错误。它应该是：

```
safari.application.activeBrowserWindow.activeTab.title.search(/\|/) 
```

注意缺少引号；我在这里使用正则表达式文字。此外，正则表达式文字需要由`/`.

您可以简单地使用以下正则表达式进行替换，而不是搜索然后替换：

```
str = str.replace(/\|.*$/, ""); 
```

`|`如果字符存在，这将删除字符之后的所有内容。

# java - Hive 相当于 Pig 的 PigRunner？

> ID：12753915
> 
> 赞同：1
> 
> 时间：2012-10-05T20:56:31.847
> 
> 标签：java, hive, apache-pig

是否有与 Pig 的[PigRunner](http://pig.apache.org/docs/r0.8.1/api/org/apache/pig/PigRunner.html)类等效的 Hive 可以轻松地从 Java 程序中运行 HQL 脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T13:12:15.610

该`Spring for Apache Hadoop`框架具有`Hive`集成功能，查看[源代码](https://github.com/SpringSource/spring-hadoop/tree/master/src/main/java/org/springframework/data/hadoop/hive)可能会让您了解如何从代码运行 hql 脚本。

另一方面，您也可以检查`Hive`源（尤其是[CliSessionState](http://hive.apache.org/docs/r0.9.0/api/index.html?org/apache/hadoop/hive/cli/CliSessionState.html)和[CliDriver](http://hive.apache.org/docs/r0.9.0/api/index.html?org/apache/hadoop/hive/cli/CliDriver.html)）以查看*Hive shell*如何获取 hql 文件（即：） `hive -f file.q`。

基于这些，这样的原始实现可以完成这项工作：

```
import java.io.PrintStream;
import org.apache.hadoop.hive.cli.CliDriver;
import org.apache.hadoop.hive.cli.CliSessionState;
import org.apache.hadoop.hive.common.LogUtils;
import org.apache.hadoop.hive.conf.HiveConf;
import org.apache.hadoop.hive.ql.session.SessionState;

public class RunHQLScript {

    private static class MyCliSessionState extends CliSessionState {
        public MyCliSessionState(HiveConf conf, String host, int port) {
            super(conf);
            this.host = host;
            this.port = port;
        }
    }

    public static void main(String[] args) throws Exception {

        LogUtils.initHiveLog4j();
        CliSessionState ss = new MyCliSessionState(new HiveConf(SessionState.class),
                "localhost", 10000);

        ss.in = System.in;
        ss.out = new PrintStream(System.out, true, "UTF-8");
        ss.err = new PrintStream(System.err, true, "UTF-8");
        ss.fileName = "file.q";  //HQL file

        SessionState.start(ss);
        ss.connect();
        CliDriver cli = new CliDriver();
        int processFile = cli.processFile(ss.fileName);
        System.out.println("return code: " +processFile);
        ss.close();
    }
} 
```

请注意，需要运行`Thrift service`（默认在端口 10000 上）才能执行脚本。

# java - 关于Java应用程序的内存使用

> ID：12753919
> 
> 赞同：4
> 
> 时间：2012-10-05T20:57:01.343
> 
> 标签：java, tomcat, memory, jvm

我有一个关于 java web 应用程序的内存使用的问题..

在任务管理器中，Tomcat 服务似乎占用**了 8,677,544,000** Bytes 的内存

在jvisualvm中，部署在那个tomcat下的java应用的内存使用情况如下

```
Heap: 
Used: 2,304,233,184 B
Size: 8,589,934,592 B
Max: 10,737,418,240 B

Permgen:
Used:  80,272,056 B
Size: 536,870,912 B
Max:  536,870,912 B 
```

Tomcat 的 Service.bat 文件中的内存参数：

```
-Xms8192m;-Xmx10240m;-XX:PermSize=512m;-XX:MaxPermSize=512m 
```

现在，我的问题是，无论我设置什么 MaxHeapFreeRatio，即使已用空间有时会缩小，可用空间也不会缩小。

谁能告诉我为什么会这样。有没有办法缩小可用空间，以便系统上运行的其他进程可以利用它？

我正在使用最新版本的 JDK 1.7 和 Tomcat 7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T09:30:40.910

使用参数`-Xms8192m`告诉 Tomcat（嗯，JVM）在启动时分配至少 8 GiB 的堆空间。

JVisualVM 统计数据支持这一点，但也告诉您应用程序正在使用大约 2 GiB。

将启动值降低到较低的值（从 2 GiB 开始）。请注意，如果应用程序需要更多堆空间，您已经告诉它您最多可以使用 10 GiB `-Xmx10240m`，因此也可能值得将该值降低（可能为 4 GiB）。

显然，如果您开始获得 OOME，您将需要增加这些值，直到应用程序有足够的速度可以愉快地运行（假设没有内存泄漏等）。

另外，请注意，进程大小将始终大于堆大小，因为它还包括永久生成空间 ( `-XX:MaxPermSize=512m`) 和 JVM 本身的内部内存/库。

* * *

**基本示例：**

```
-Xms512m;-Xmx1536m;-XX:PermSize=64m;-XX:MaxPermSize=256m 
```

这里的最小值是 512 MiB 堆，64 MiB perm gen，因此最小 OS 进程大小约为 600 - 650 MiB。

随着应用程序分配更多空间直至最大值（1.5 GiB 堆，256 MiB perm gen），我预计进程大小将达到约 2 GiB。

现在，如果我们使用您的值：

```
-Xms8192m;-Xmx10240m;-XX:PermSize=512m;-XX:MaxPermSize=512m 
```

这里的最小值是 8 GiB 堆，512 MiB perm gen，因此最小 OS 进程大小约为 8.6 GiB - 几乎就是您所看到的。

使用最大值，进程大小将接近 11 GiB。

# c++ - C++ - 在 std::map 中查找相邻元素

> ID：12753926
> 
> 赞同：1
> 
> 时间：2012-10-05T20:58:01.780
> 
> 标签：c++, map

使用我在下面提到的示例查找 STL 映射中的相邻元素的最有效方法是什么：

假设我有一个整数映射 - 字符串：

```
1 -> Test1
5 -> Test2
10 -> Test3
20 -> Test4
50 -> Test5 
```

如果我打电话：

```
get_adjacent(1) // Returns iterator to 1 and 5
get_adjacent(2) // Returns iterator to 1 and 5
get_adjacent(24) // Returns iterator to  20 and 50
get_adjacent(50) // Returns iterator to 20 and 50 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:03:39.390

使用`std::lower_bound`and`std::upper_bound`正是为了这个。

更好的是`std::map::equal_range`结合了两者的力量：

[在http://liveworkspace.org/code/d3a5eb4ec726ae3b5236b497d81dcf27](http://liveworkspace.org/code/d3a5eb4ec726ae3b5236b497d81dcf27)上实时查看

```
#include <map>
#include <iostream>

const auto data = std::map<int, std::string> {
    { 1  , "Test1" }, 
        { 5  , "Test2" }, 
        { 10 , "Test3" }, 
        { 20 , "Test4" }, 
        { 50 , "Test5" }, 
};

template <typename Map, typename It>
void debug_print(Map const& map, It it)
{
    if (it != map.end())
        std::cout << it->first;
    else
        std::cout << "[end]";
}

void test(int key)
{
    auto bounds = data.equal_range(key);

    std::cout << key << ": " ; debug_print(data, bounds.first)  ; 
    std::cout << ", "        ; debug_print(data, bounds.second) ; 
    std::cout << '\n'        ; 
}

int main(int argc, const char *argv[])
{
    test(1);
    test(2);
    test(24);
    test(50);
} 
```

输出：

```
1: 1, 5
2: 5, 5
24: 50, 50
50: 50, [end] 
```

# php - Wordpress：使用 PHP 或 .htaccess 更改名称

> ID：12753932
> 
> 赞同：0
> 
> 时间：2012-10-05T20:58:39.583
> 
> 标签：php, .htaccess, wordpress

我的目标是在我的 WP 网站中使用干净的 URL，目前我有以下示例：

**例子：**

插件名称：= gft_galleries

pageTitle: = 画廊一

`http://domain.co.nz/pluginName/pageTitle/`

Wordpress 或 .htaccess 中是否有创建以下内容但保留正确结构的内容？

**例子：**

`http://domain.co.nz/galleries/pageTitle`

**.ht访问**

```
RewriteEngine On
Options +FollowSymlinks
RewriteBase /
RewriteCond %{HTTP_HOST} ^(www\.)(.*)$ [NC]
RewriteRule ^(.*)$ http://%2/$1 [L,R=301]
RewriteRule ^gft_gallery/(.*)$ /gallery/$1 [L]
RewriteRule ^index\.php$ - [L]

# uploaded files
RewriteRule ^files/(.+) wp-includes/ms-files.php?file=$1 [L]

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule . index.php [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:13:48.993

我想你要找的是这个。

将它添加到您的 .htaccess 中，但如果它的 wordpress，您的重写引擎可能已经打开，所以省略该行

```
#modified ;)
RewriteEngine On
RewriteRule ^gft_gallery/(.*)$ /gallery/$1 [L] 
```

我想另一种简单的方法是使用符号链接，通过键入

```
$ ln -s gft_gallery/ gallery 
```

进入您的终端，或通过脚本

```
<?php symlink('gft_gallery','gallery'); ?> 
```

请记住，如果您使用上面的 PHP 方法添加`Options FollowSymLinks`您的 apache.conf 或 htacces

# mysql - 使用单个查询从两个表中选择帖子及其所有标签

> ID：12753937
> 
> 赞同：0
> 
> 时间：2012-10-05T20:58:47.037
> 
> 标签：mysql, sql

我有两张桌子；一个带有发布数据，而在另一行中，每一行都有一个标签和帖子 ID (FK)。
是否可以使用单个查询从这两个表中选择具有所有标签的帖子？如何？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:14:34.587

假设您有名为 posts(id, content) 和 tags(post_id, tag) 的表：

```
SELECT posts.id, posts.content, tags.tag FROM posts 
    LEFT JOIN tags ON tags.post_id = posts.id
WHERE posts.id = ? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:02:29.440

我想你可以把查询转过来

```
SELECT * FROM post p 
INNER JOIN TABLE tag
ON tag.tag_id = p.tag_id
WHERE p.post_id=? 
```

虽然我认为这不会比进行 2 个单独的查询更快

* * *

编辑

下面的评论认为做一个连接而不是两个单独的查询更快。

# php - PHP reg_ex 在字符串中查找多个单词

> ID：12753938
> 
> 赞同：-1
> 
> 时间：2012-10-05T20:58:53.460
> 
> 标签：php, regex, preg-match

情况的性质，我需要 1 模式来执行以下操作：

创建应该找到的模式

1.  单个单词的完全匹配
2.  2 个单词组合的完全匹配。
3.  可以在字符串中找到的 2 个单词的匹配项。

我的问题是#3。目前我有：

```
$pattern = '/\s*(foo|bar|blah|some+text|more+texted)\s*/'; 
```

我怎样才能附加到这个模式，它会在字符串中的任何组合中找到“坏文本”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:20:50.023

使用正则表达式检查字符串中的单词**错误**

```
 /\bbad\b/ 
```

要检查字符串中的短语**错误文本**，请使用正则表达式

```
 /\bbad text\b/ 
```

要检查字符串中单词**bad**和**text**的任何组合，请使用正则表达式

```
 /\b(bad|text)\s+(?!\1)(?:bad|text)\b/ 
```

要检查字符串是否存在单词**bad**和**text**使用正则表达式

```
 /(?=.*\bbad\b)(?=.*\btext\b)/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:04:00.120

有几种方法可以做到这一点，但这是一个简单的方法

```
$array_needles = array("needle1", "needle2", etc...); 
$array_found_needles = array(); 

$haystack = "haystack";

foreach ($array as $key=>$val) {
    if(stristr($haystack, $val) {
    //do whatever you want if its found
    $array_found_needles[] = $val; //save the value found
    }
} 

$found = count($array_found_needles);

if ($found == 0) {
    //do something with no needles found
} else if($found == 1) {
    //do something with 1 needle found 
} else if($found == 2) {
    //do something with two needles found, etc
} 
```

# winforms - 在Form构造函数中传递参数，winforms c#

> ID：12753947
> 
> 赞同：4
> 
> 时间：2012-10-05T20:59:35.150
> 
> 标签：winforms, constructor, asp.net-3.5

我有以下继承层次结构：

A 类：表格
B 类：A 类

A 类需要能够接受一个参数，以便我可以像这样创建 B 类的实例：

```
ClassB mynewFrm = new ClassB(param); 
```

如何在 A 类中定义这样的构造函数？

谢谢！

我在 .net 3.5 中使用 Winforms，c#

编辑：A 类和 B 类被定义为表单，使用部分类。所以我想这变成了一个关于部分类和自定义（覆盖）构造函数的问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T22:03:32.370

这是一个完整的演示示例，演示了所需的行为。

为了方便您的学习，我选择了一个**字符串**类型参数，您可以根据自己的情况进行调整。

要对其进行测试，请创建一个新的**Visual Studio** * *C#* * 项目并使用以下代码填充**program.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;

namespace Stackoverflow
{

    public class ClassA : Form
    {
        public ClassA()
        {
            InitializeComponent();
        }

        public ClassA(string WindowTitleParameter)
        {
            InitializeComponent();
            this.Text = WindowTitleParameter;
            MessageBox.Show("Hi! I am ClassB constructor and I have 1 argument. Clic OK and look at next windows title");
        }

        private void InitializeComponent() // Usually, this method is located on ClassA.Designer.cs partial class definition
        {
            // ClassA initialization code goes here
        }

    }

    public class ClassB : ClassA
    {
        // The following defition will prevent ClassA's construtor with no arguments from being runned
        public ClassB(string WindowTitleParameter) : base(WindowTitleParameter) 
        {
            InitializeComponent();
            //this.Text = WindowTitleParameter;
            //MessageBox.Show("Hi! I am ClassB constructor and I have 1 argument. Clic OK and look at next windows title");
        }

        private void InitializeComponent() // Usually, this method is located on ClassA.Designer.cs partial class definition
        {
            // ClassB initialization code goes here
        }

    }

    static class Program
    {
        /// <summary> 
        /// The main entry point for the application. 
        /// </summary> 
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);

            // If you debug this code using StepInto, you will notice that contructor of ClassA (argumentless)
            // will run prior to contructor of classB (1 argument)

            Application.Run(new ClassB("Look at me!"));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:03:52.007

对于`ClassA`您的构造函数看起来像

```
public ClassA(Object param)
{
    //...
} 
```

因为`ClassB`它看起来像

```
public ClassB(Object param) : base(param) 
{
    //...
} 
```

where`base(param)`实际上将调用`ClassA`接受该参数的构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T21:02:04.770

类的构造函数看起来像这样。

```
private Object _object1;

public ClassA(object object1)
{
    _object1 = object1;
} 
```

# c - 平均值计算器的奇怪输出

> ID：12753953
> 
> 赞同：0
> 
> 时间：2012-10-05T20:59:59.190
> 
> 标签：c, function, calculator, mean

所以我正在编写一个统计计算器程序，我开始编写的第一个函数是平均值计算器。我的问题是我的答案值非常大（和错误）。

```
Please Enter a number of inputs
 4
Please enter number 1
 1
Please enter number 2
 2
Please enter number 3
 3
Please enter number 4
 4
Statistical Calculator Menu
(1) Mean
(2) Standard Deviation
(3) Range
(4) Restart/Exit
 1
3940705125981218000000000000000000.000000 
```

这是我的源代码。

```
const int MAX_DATA=5;
void menu(float numbers[], int amount);
float mean(float numbers[],int amount);

int main() 
{ 
int i, amount;
float numbers[MAX_DATA];

printf("Please Enter a number of inputs \n");
scanf("%d", &amount);
if (amount>MAX_DATA){
              printf("You entered too many numbers");
             }else{  

for (i=1;i<amount+1;i++){
    printf("Please enter number %d\n", i);
    scanf("%f",&numbers[i]);
    }
      menu(numbers,amount);
}  
    getch();
return 0;
}

void menu(float numbers[],int amount)
{
 int input2;
 printf("Statistical Calculator Menu");
 printf("\n(1) Mean\n(2) Standard Deviation\n(3) Range\n(4) Restart/Exit");
 scanf("%d",&input2);
      if(input2==1){
         mean(numbers,amount);
        }

}

float mean(float numbers[],int amount)
{
 int i;
 float sum;
 float average;
 for (i=0; i<amount;i++){
     sum=sum+numbers[i];
     }
     average=sum/amount;
     printf("%f", average);

  return average;   
} 
```

有人可以指出错误，或解释为什么计算不正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T21:02:09.017

您没有进行初始化`sum`，因此它会采用堆栈中该位置最后一个垃圾值。改变：

```
float sum; 
```

到：

```
float sum = 0; 
```

您遇到的另一个问题是：

```
for(i = 1; i < amount + 1; i++) {
    printf("Please enter number %d\n", i);
    scanf("%f",&numbers[i]);
} 
```

数组索引从 0 开始，所以应该是：

```
for(i = 0; i < amount; i++) {
    printf("Please enter number %d\n", i);
    scanf("%f",&numbers[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:03:35.690

除了迈克所说的，

```
for (i=1;i<amount+1;i++)
{
    printf("Please enter number %d\n", i);
    scanf("%f",&numbers[i]);
}

float mean(float numbers[],int amount)
{
   // ..
   for (i=0; i<amount;i++){
    sum=sum+numbers[i];
  }
.... 
```

从此，你没有填满`numbers[0]`。但在`mean`计算中，使用 0 索引处的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T21:01:59.623

```
float sum;
float average;

for (i=0; i<amount;i++){
     sum=sum+numbers[i];
 } 
```

`sum`未在您的程序中初始化。

# sql-server - UDF 的 SQL 服务器查询统计信息

> ID：12753954
> 
> 赞同：1
> 
> 时间：2012-10-05T21:00:02.710
> 
> 标签：sql-server, query-performance

当我运行一次存储过程并查看 sys.dm_exec_query_stats 中的查询统计信息时，我得到正确的执行计数，即 1

但是当我执行一次 UDF 时，我看到它的执行计数是 4（在 sys.dm_exec_query_stats 中有 3 行用于该 udf）

ObjName ExecutionCount AvgWorkerTime

* * *

fnGetDomesticNumber 1 3066
fnGetDomesticNumber 2 411
fnGetDomesticNumber 1 657

谁能帮我理解这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:46:22.913

SQL Server 可能正在重新编译 UDF。您可以通过运行 SQL Server Profiler 并捕获 SP:Recompile 事件来验证这一点。

此外，根据调用该函数的 SQL 查询，SQL Server 可能每行数据调用一次该函数。这可以解释 ExecutionCount 为 2。

# c# - 用超时c#执行shell

> ID：12753955
> 
> 赞同：1
> 
> 时间：2012-10-05T21:00:06.367
> 
> 标签：c#, windows, cmd

大家好，我已经创建了一个小应用程序来使用命令执行“命令提示符”到目前为止，我创建了一个简单的线程睡眠方法

```
public static string Executecmd(string command, int sleepSec) {
    try {
        string result = null;
        System.Threading.Thread objThread = new System.Threading.Thread(delegate() {
            result = ExecuteCommandSync(command);
        });
        objThread.IsBackground = true;
        objThread.Start();
        while (objThread.IsAlive == true) {
            System.Threading.Thread.Sleep(sleepSec * 1000);
            objThread.Abort();
        }
        return result;
    }
    catch (Exception x) {
        Console.WriteLine(x.Message + "\n" + x);
        return null;
    }
} 
```

它工作正常，但即使命令执行完成它也会保持睡眠状态，直到线程睡眠完成所以我的问题是我如何创建一个方法来执行它并睡眠 5 秒，如果它完成它会停止，否则等待 5 秒然后中止

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T21:08:34.977

使用具有时间跨度的[Thread.Join](http://msdn.microsoft.com/en-us/library/23f7b1ct.aspx)。

```
 System.Threading.Thread objThread = new System.Threading.Thread(delegate() {
        result = ExecuteCommandSync(command);
    });
    objThread.IsBackground = true;
    objThread.Start();

    //Waits here for "sleepSec" seconds or until the thread finishes, whichever is shorter.
    if(objThread.Join(new TimeSpan.FromSeconds(sleepSec)) == false)
    {
        //Only executes this code of the thread did not finish before the timeout.
        objThread.Abort();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:06:25.833

您可以为此目的使用[WaitHandle.WaitOne(TimeSpan) 。](http://msdn.microsoft.com/en-us/library/system.threading.waithandle.aspx)

# css - 内联时覆盖 CSS 类的一部分？

> ID：12753959
> 
> 赞同：2
> 
> 时间：2012-10-05T21:00:38.083
> 
> 标签：css, class, overriding

我有一个由 CSS 类设置样式的 html img。在某些情况下，我想覆盖该类中使用的宽度和高度值。

我正在使用 Microsoft 为 .Net 系统提供的称为 TagBuilder 类的东西构建这个 img 标记，它允许开发人员将属性分配给 html 元素。

在这种情况下，一个 CSS 类已分配给 img 标签，我可以单独分配宽度和高度属性，但它们并不优先于 CSS 类中设置的值。

我的标签目前看起来像这样：

`<img alt="my link" class="static" height="240" id="StaticImage" src="http://imageserver.com/myImage.jpg" width="240">`

静态 CSS 类的宽度和高度值各为 300，如您所见，我试图用 240 覆盖它们。它在这种情况下不起作用，但我可以在没有第二个 CSS 类的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T21:04:21.430

您可以将`style`属性添加到您的`img`：

```
<img alt="my link" class="static" height="240" id="StaticImage"
src="http://imageserver.com/myImage.jpg" width="240"
style="height:240px;width:240px;"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T21:08:24.477

您可以使用内联 css

```
<img alt="my link" style="width:240px; height:240px;" class="static" id="StaticImage" src="http://imageserver.com/myImage.jpg"> 
```

或者

`!important`在您的 CSS 中，您可以使用修饰符定义样式

```
.static {
    width:240px !important;
    height:240px !important;
} 
```

这样，无论如何，您的宽度、高度将始终被使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T21:22:44.013

尽量缩小你的元素选择范围。越具体，您必须覆盖声明的机会就越大。例如，添加类和元素的 ID：

```
#StaticImage.static {
   height: 240px; 
   width: 240px;
} 
```

你甚至可以发疯并添加它的属性：

```
#StaticImage.static[alt=my link] {
   height: 240px; 
   width: 240px;
} 
```

如果失败，请提高其优先级：

```
#StaticImage.static {
   height: 240px !important; 
   width: 240px !important;
} 
```

您可以通过包含其父元素使其更加具体。内联 css 可以覆盖其他所有内容吗？当然可以，但是如果您可以添加内联 css，为什么不添加另一个类来进一步缩小您的选择范围呢？这样您就可以控制文件中的所有 CSS。

另外，检查是否有一行 JavaScript 强制元素的大小。JavaScript 可以改变 css 值，不管它是什么。

# database - 如何设置自定义数据库键？

> ID：12753960
> 
> 赞同：0
> 
> 时间：2012-10-05T21:00:37.397
> 
> 标签：database, sqlite

我正在设计一个数据库结构（Android 上的 SQLite），它将由两个表组成，容器（表 1）和对象/容器数据（表 2）。

表 1 将包含容器数据的键和容器/对象的键列表。表 2 将包含对象/容器的数据：标题、描述、类别、图片等。

通过这种设计，我将能够进入一个容器，获取它的数据（标题、图像）并按顺序获取其中包含的项目列表，然后搜索每个项目的数据（图像，可能是标题）。然后用户可以点击一个项目，如果它是一个对象转到它的数据，或者如果它是一个容器，重复这个过程。

如何为每个表设置 ID，以便知道 ID 属于哪个表。例如，如果 ID 为偶数，则指向表 1，如果为奇数，则指向表 2。

我想我可能刚刚找到了一个现在看起来相当明显的答案……我只需要测试一下。基本上，您可以通过在创建行时将 ID 设置为所需的内容来设置自定义 ID。

```
INSERT INTO test1(rowid, a, b) VALUES(123, 5, 'hello'); 
```

我是从[http://www.sqlite.org/autoinc.html](http://www.sqlite.org/autoinc.html)得到的（希望我两天前能看到它:)）现在我得走了，所以当我得到一个机会。

我想我现在唯一关心的（如果它有效）是它是否会在您不使用的 ID 之间创建空行，浪费空间？

我也考虑过只有两个单独的列表，但顺序很重要，所以这需要另一个列表来跟踪对象的顺序，所以我想知道是否可以进行键操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T10:53:07.147

如果容器和对象具有公共属性，那么您可以创建一个包含公共属性的基表（项目）以及仅包含额外数据（继承）的容器和对象表。

这称为每个类型的表层次结构 (TPT)。有关 [1] 和 [2] 的更多信息。

然后，您的容器可以使用简单的外键链接到 Items，因为无论它是容器还是对象，它都会在那里有一个条目。

现在，如果您只想拥有对象，请从容器中选择所有项目并与您的对象表进行 INNER JOIN。像这样你只会得到对象而不是容器。如果您只想要容器，请使用容器表进行连接。如果您需要容器和对象并且需要所有额外数据（不在 Item 基表中），您可以对对象表执行 LEFT OUTER JOIN，然后对容器表执行 LEFT OUTER JOIN。

参考：

[1] [http://www.sqlteam.com/article/implementing-table-inheritance-in-sql-server](http://www.sqlteam.com/article/implementing-table-inheritance-in-sql-server)

[2] [http://blogs.devart.com/dotconnect/table-per-type-vs-table-per-hierarchy-inheritance.html](http://blogs.devart.com/dotconnect/table-per-type-vs-table-per-hierarchy-inheritance.html)

# javascript - Unicode 和 Javascript：无效的字节序列

> ID：12753962
> 
> 赞同：5
> 
> 时间：2012-10-05T21:00:47.850
> 
> 标签：javascript, unicode, utf-8

某些字节序列在 Unicode 编码中显然无效，我知道某些语言（一种是 Python）在发生这种情况时会引发错误。

`XMLHttpRequest`我的问题是：在or期间接收到这样的序列时，Javascript 会发生什么`XDomainRequest`？结果字符串是否：

1.  发生这种情况时被截断？
2.  跳过错误序列并从下一个字节开始？
3.  继续解码并仅在显示时显示替换 � 字符？

如果为 3，那么该`charCodeAt`函数是否返回有效的字符代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T21:09:39.720

3 号发生。它在显示时显示�，并且 charCodeAt 返回 0xFFFD，即� unicode 字符。

# git - 冲突解决合并提交似乎不完整

> ID：12753975
> 
> 赞同：1
> 
> 时间：2012-10-05T21:02:17.453
> 
> 标签：git, merge, conflict

有一个存在冲突的功能分支。这些都得到了解决，并提交了决议。

不幸的是，我搞砸了合并，并且一些先前发布的功能倒退了——这是通过在合并提交 sha1 和前一个标签之间进行差异来验证的。

当我这样做时，`git show <sha1 for merge commit>`所有更改都是无害的。

当我这样做时`git log -Sunique_variable_added_for_feature_and_lost_after_botched_merge`，我只看到添加的提交，`unique_variable_...`但看不到来自错误合并的有问题的删除。

然而，当我采取可耻的步骤在像 Tower 这样的 gui git 客户端中查看提交的 sha1 时，我可以清楚地看到拙劣的线条。

我完全错过了 Tower 使用的附加开关吗？为什么pickaxe没有选择合并提交中隐含的删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:29:15.237

合并提交差异必然显示为“组合差异”，显示与合并提交的所有父项相比的差异。但是，`git show`另外使用了`--cc`diff 选项，该选项通过仅显示冲突解决方案来缩短输出。[正如手册所解释的](http://www.kernel.org/pub/software/scm/git/docs/git-diff-tree.html)那样，非冲突的大块，例如导致您的问题的删除，被跳过为“无趣” 。

用于`git show -c <commit>`以未删节的形式请求合并的差异，您将看到合并提交引入的所有更改。这很可能是 GUI 程序所做的。

# java - 使用 chrome 浏览器的 RemoteDriver 在下拉菜单中失败

> ID：12753976
> 
> 赞同：0
> 
> 时间：2012-10-05T21:02:16.747
> 
> 标签：java, xpath, selenium, webdriver, selenium-grid

我使用的是 selenium-standalon-2.25.0 而 chrome 是 13 版。

这是html：

```
<select name="suffix" class="select">
<option value="" selected>Please select...</option>
<option value="Ms.">Ms.</option>
<option value="Mrs.">Mrs.</option>
<option value="Mr.">Mr.</option>
</select> 
```

这是我调用以选择其中一个选项的命令。另一个是我从数据库中获取的变量，问题是我从数据库中获取的后缀。这适用于 Firefox 和 IE，但不适用于 chrome：

```
driver.findElement(By.xpath("//option[@value='" + other + "' and ..[@name='" + question + "']]")).click(); 
```

这是我得到的例外：

```
org.openqa.selenium.InvalidSelectorException: findElement execution failed;
 Unable to locate an element with the xpath expression //option[@value='Ms.' and ..[@name='suffix']] because of the following error:
Error: INVALID_EXPRESSION_ERR: DOM XPath Exception 51 (WARNING: The server did not provide any stacktrace information)
Command duration or timeout: 52 milliseconds
For documentation on this error, please visit: http://seleniumhq.org/exceptions/invalid_selector_exception.html
Build info: version: '2.25.0', revision: '17482', time: '2012-07-18 21:08:56'
System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.6.0_25'
Driver info: driver.version: EventFiringWebDriver
Session ID: bf6368f23db4a2fe27d9b96849af1b1d
Command duration or timeout: 646 milliseconds
For documentation on this error, please visit: http://seleniumhq.org/exceptions/invalid_selector_exception.html
Build info: version: '2.25.0', revision: '17482', time: '2012-07-18 21:09:54'
System info: os.name: 'Linux', os.arch: 'amd64', os.version: '3.2.0-31-generic', java.version: '1.6.0_31'
Driver info: driver.version: RemoteWebDriver
Session ID: 134947044387 
```

我已经为此工作了一段时间，我的猜测是与我的 findElement 语句有关。奇怪的是它适用于 FF 和 IE。任何帮助将不胜感激。再次感谢。

布莱恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:35:38.420

换个方式做...

```
//select[@name='suffix']/option[@value='Ms.'] 
```

您的 XPath 查询似乎无效。这甚至没有逻辑意义。从树上下来，而不是上树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T08:30:31.643

**除了Arran**提到的方法，还可以尝试使用 css 选择器。它们比 xPaths 工作得更快。

```
String msCssSelector= "select[name='suffix']>option[value='Ms.']"
String mrsCssSelector=  "select[name='suffix']>option[value='Mrs.']"
String mrCssSelector=  "select[name='suffix']>option[value='Mr.']" 
```

也不要忘记验证在firepath中找到的定位器，在ffox中的firebug插件 ![定位器验证](../Images/0f1e8e661a7ec7a36d79125ca3c96555.png)

*方法1*

```
driver.findElement(By.cssSelector(msCssSelector)).click(); 
```

*方法 2*使用操作构建器 API

```
WebElement mnuOptionElement;
mnuOptionElement = driver.findElement(By.cssSelector(mrCssSelector));
Actions builder = new Actions(driver);
// Move cursor to the Main Menu Element
builder.moveToElement(mnuOptionElement).click(); 
```

有关操作生成器的更多信息，您可以[在此处获取](http://www.anitpatel.net/2012/02/25/selenium-webdriver-how-to-click-on-a-hidden-link-or-menu/)

*方法 3*使用 jsExecutor 点击 web 元素。在所有情况下都对我有用。

```
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x = $(\'"+msCssSelector+"\');");
        stringBuilder.append("x.click();");
        js.executeScript(stringBuilder.toString()); 
```

希望这对你有用）

# c# - 在 Web 应用程序使用的类库中对使用配置管理器的方法进行单元测试

> ID：12753978
> 
> 赞同：5
> 
> 时间：2012-10-05T21:02:18.527
> 
> 标签：c#, web-services, testing, configurationmanager

我正在尝试为 Web 服务背后的代码编写测试。此代码位于从服务本身调用的单独类库中。此类库用于`ConfigurationManager`获取其连接字符串，通常在您运行 Web 服务时，这些字符串由 Web 服务的`web.config`. 但是，当我从测试代码运行它时，它们会抛出`null`异常。

我已经在网上搜索了一段时间的答案，并尝试了几个解决大致相似问题的方法，但没有任何效果。（没有什么是我的情况。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T04:30:43.433

这取决于您拥有的 Visual Studio 版本，但如果您拥有 VS 2010，则可以使用[Moles](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&sqi=2&ved=0CC0QFjAB&url=http://visualstudiogallery.msdn.microsoft.com/22c07bda-ffc9-479a-9766-bfd6ccacabd4&ei=ZLNvUN-dJJCC8QTJ5oCIBQ&usg=AFQjCNE5vIkcyAjEkCYxdKI5vV7AM3WTVw&sig2=M9sueP3itBi46CA_cH2_3A&cad=rja)模拟静态类，而在 VS 2012 中，您拥有[Microsoft Fakes](http://msdn.microsoft.com/en-us/library/hh549175.aspx)。

尽管如此，正如 Joachim Isaksson 在他的评论中所说，如果您实际上是在进行单元测试，您可以通过接口和包装器将访问 ConfigurationManager 包装到 ，然后模拟接口。

# c++ - C++ 记忆化理解

> ID：12753979
> 
> 赞同：1
> 
> 时间：2012-10-05T21:02:19.767
> 
> 标签：c++, arrays, recursion, map, memoization

我试图了解记忆化在 C++ 中是如何工作的，所以我查看了 Fib 中使用的记忆化示例。顺序。

```
std::map<int, int> fibHash;

int memoized_fib (int n)
{
    std::map<int, int>::iterator fibIter = fibHash.find(n);
    if( fibIter != fibHash.end() ) return *fibIter;

    int fib_val;
    if( n <=1 )    fib_val = 1;
    else           fib_val = memoized_fib ( n-1 ) + memoized_fib ( n-2 );

    fibHash[ n ] = fib_val;
    return fib_val;
} 
```

我对 fibHash[n] 的工作原理有点困惑。它是否只保存每个 fib(#) 的单个值？此外，迭代器遍历索引以在表中查找正确的值并返回？例如 fib(6) = 找到 fib(5) 和 fib(4)，已经存储并添加它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T21:10:10.203

你说的基本正确。

> “它 [fibHash] 是否只保存每个 fib(#) 的单独值？”

对，就是这样。这些值在计算时被填充（使用`fibHash[ n ] = fib_val;`）。较低的 fib 值用于计算较高的 fib 值。

该`fibHash`映射将 X 映射到 fib(X)，简单明了。

这样做的好处是，如果你计算 fib(20)，然后计算 fib(21) 和 fib(23)，然后也许是 fib(15)，你只需要计算一次中间值。

这种加速的成本是将值存储在`fibHash`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T21:10:39.920

代码确实将每个都保存`fib_val`到`fibHash`地图中。调用的[find](http://www.cplusplus.com/reference/stl/map/find/)`fibHash`方法搜索地图以查看该值是否是先前计算的。如果是这样，`find`则返回此值的迭代器，并且函数将其返回 ( `return *fibIter`)。

`fibHash[ n ] = fib_val;`在地图中添加一个新值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T21:40:20.687

> 它是否只保存每个 fib(#) 的单个值？

是的。

> 此外，迭代器遍历索引以在表中查找正确的值并返回？

是的。

> 例如 fib(6) = 找到 fib(5) 和 fib(4)，已经存储并添加它们？

依靠。首先 fib(6) 搜索以查看之前是否调用过 fib(6)。如果有，则返回存储的答案。如果它从未被调用过，则调用 fib(5) 和 fib(4)。有趣的是，如果必须计算 fib(5)，它会在 fib(6) 之前调用 fib(4)*，然后当 fib(6) 也调用 fib(4) 时，可以保证在 fibHash 中找到结果，因为fib(5) 已经调用了 fib(4)。这就是导致 fib(n) 从指数时间坍缩成更像线性的东西的原因。

斐波那契的朴素递归实现归结为多次加 1。

```
fib(5) =
fib(4)                                     + fib(3) =
fib(3)                   + fib(2)          + fib(2)          + fib(1) =
fib(2)          + fib(1) + fib(1) + fib(0) + fib(1) + fib(0) + fib(1) =
fib(1) + fib(0) + fib(1) + fib(1) + fib(0) + fib(1) + fib(0) + fib(1) = 
1      + 1      + 1      + 1      + 1      + 1      + 1      + 1 =
8 
```

实际上，要计算 fib(n)，您最终需要进行 fib(n)-1 加法。但是如果在计算 fib(n) 的过程中您保存并使用之前计算的斐波那契数，那么您不再需要执行这么多的加法。以这种方式计算 fib(n) 只需要 n 次加法：

```
fib(5) =
fib(4)                            + fib(3) =
fib(3)                   + fib(2) + fib(3) =
fib(2)          + fib(1) + fib(2) + fib(3) =
fib(1) + fib(0) + fib(1) + fib(2) + fib(3) = 
1      + 1      + 1      + 2      + 3 =
8 
```

[* 虽然不能保证订单。fib(6) 可以先调用 fib(4)，然后当 fib(6) 调用 fib(5) 时，fib(5) 调用 fib(4) 现在保证返回一个存储的值。]

# javascript - 如何使用 html 捕获和替换标记中的项目

> ID：12753983
> 
> 赞同：1
> 
> 时间：2012-10-05T21:02:49.077
> 
> 标签：javascript, jquery, regex

我想解析这样的文本

```
<! this is inside a token > text outside the token <! more inside > more outside 
```

我想捕获所有令牌并用`<span>...</span>`标签替换它们。

例如

```
<! this is inside a token > 
```

应该替换为

```
<span> this is inside a token </span> 
```

我尝试了正则表达式 `/<!(.+)>/`，但它只捕获了整个字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:07:05.560

这将起作用

```
/<!([^>]+)>/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:08:28.167

替换`<!([^>]*)>`为`<span>$1</span>`

检查[这个演示](http://jsfiddle.net/8AHFn/)。

# django - 对 django 评论强制执行安全性（权限）

> ID：12753986
> 
> 赞同：0
> 
> 时间：2012-10-05T21:02:59.480
> 
> 标签：django, django-comments, django-permissions

我正在使用标准的 django.contrib.comments 应用程序。但是，对于我的应用程序，我需要对发布和查看评论实施更精细的权限。例如，我只希望某些人查看针对给定对象发布的评论，并阻止其他人针对给定对象发布评论。它足以知道目标对象 ID 和当前用户来强制执行权限。

我最初的想法是在评论 url 周围放置一个装饰器，但由于它们包含在内，我不太确定如何做到这一点。

```
(r'^comments/', include('django.contrib.comments.urls')), 
```

我可以将它们分解成单独的 url 并在那里添加装饰器（即将 django.contrib.comments.urls 中的所有 url 带入 myapp.urls）但这感觉不对。

关于最佳方式的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T14:04:02.763

您可以只[覆盖单个 urls](http://blog.yourlabs.org/post/19777151073/how-to-override-a-view-from-an-external-django-app)，这是一种常见的做法。

# c# - 我应该担心版本冲突吗？

> ID：12753987
> 
> 赞同：5
> 
> 时间：2012-10-05T21:03:04.970
> 
> 标签：c#, app-config, devart, dotconnect

我最近从版本 6 更新了我的 devArt dotConnect for Oracle 组件。？至 7.2

一切似乎都很好。

但是，在编译时，我看到了警告：“*发现同一依赖程序集的不同版本之间存在冲突。* ”

我不知道这是否与 dotConnect 组件有关（它没有说），但我认为这是一个很好的猜测。

当我 2-click 警告时，我得到对话框：

> MS Visual Studio -- 一个或多个依赖程序集存在版本冲突。
> 
> 您想通过在 app.config 文件中添加绑定重定向记录来解决这些冲突吗？

他们（MS）或它（VS）提供了多么好的，但是......它会做什么？它并没有确切地告诉我。我是该留下还是该离开？

## 更新

我参考了两个 DevArt dotConnect for Oracle 组件：

Devart.Data - 和 Devart.Data.Oracle

Devart.Data：运行时版本 v2.0.50727，版本 5.0.555.0

Devart.Data.Oracle：运行时版本 v2.0.50727，版本 7.2.96.0

所以有一个版本，但没有一个运行时版本，不匹配。我不知道这是否是问题所在。如果警告信息更明确，那就太好了。大概“它”确切地知道问题出在哪里——它为什么不泄露这些重要信息？

## 更新 2

我有另一个使用完全相同的两个引用的项目。安装更新的组件后甚至无法编译。为什么这两个项目有那么大的区别呢？因此，即使 .DLL 相同（名称相同，磁盘上的位置相同），我还是删除了它们，然后将它们添加回第二个项目，它运行良好 - 没有错误，没有警告。但是，我回到第一个项目，仍然收到相同的警告，我删除并添加了这两个引用/DLL——我仍然收到相同的警告。所以我仍然不知道该做什么/我是否应该接受 VS 的提议/重定向的建议（我在脑海中想象“老派”电话接线员以各种方式重新连接电线，做值得青少年 Twister 爱好者的旋转）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T21:22:50.380

绑定记录会将绑定部分添加到您的 web.config（或 app.config）文件中，将给定版本的 dll 指向另一个版本。但是，如果它们彼此不兼容，这可能很危险。他们看着像是

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
      <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

但是，在去之前，我会检查不同项目从哪里链接您的 Devart dll，并确保它们都引用相同。在极端情况下，将您想要使用的 Devart dll 复制到解决方案的文件夹中，并使您的所有项目都指向那个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:23:24.747

是的，你应该担心。您有两个程序集（例如 MyAssembly1 和 MyAssembly2）引用相同的程序集（例如 MySharedAssembly），但版本不同。只有一个版本的 MySharedAssembly 可以加载和使用您的应用程序，因此 MyAssembly1 和 MyAssembly2 需要正确使用它。

必须参考旧版本的 MySharedAssembly。所以一个问题是 MySharedAssembly 是否向后兼容？如果没有，那么您的应用程序可能无法正常工作。

如果将重定向添加到配置中，则基本上是说任何尝试加载旧版本的 MySharedAssembly 的程序集都应该使用新版本。因此，如果 MySharedAssembly 是向后兼容的，那么您当然可以侥幸逃脱。但这需要您的应用程序有一个配置文件。

您最好的选择是找到引用共享程序集的程序集，并查看它们是否有使用最新和最佳版本的更新。

# mysql - Rails 控制台与 MySQL 控制台 - 计算大表中的行数

> ID：12753988
> 
> 赞同：0
> 
> 时间：2012-10-05T21:03:08.097
> 
> 标签：mysql, ruby-on-rails-3, performance

我想显示一张图表，显示过去 30 天内一个表有多少条记录。我要做一个 rake 任务，我每天都会从一个 cron 工作中运行。

我刚刚做了一个测试，我发现了一个奇怪的“问题”。我在 Rails 控制台中运行了这段代码：

```
SeenEpisode.count
#=> (57135.2ms)  SELECT COUNT(*) FROM `seen_episodes` 
```

然后我在 MySQL 控制台中对此进行了测试：

```
use my_database;
SELECT COUNT(*) FROM seen_episodes;
1 row in set (3.94 sec) 
```

该表有 2100 万条记录。

我在生产服务器上运行了这两个测试，以获得真实的性能数据。

其他具有大约 500k 条记录的表在 Rails 控制台中需要 80-300 毫秒。

为什么在 Rails 中计算（使用相同的查询）21m 大表比在 MySQL 控制台中花费的时间要长得多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:06:24.260

我猜你在 INNODB 上，其中 count(*) 没有被缓存。

# c++ - 使用 boost::function 和 boost::bind 到成员变量

> ID：12753993
> 
> 赞同：1
> 
> 时间：2012-10-05T21:03:30.623
> 
> 标签：c++, boost, function-pointers, boost-bind, boost-function

我正在尝试创建一个 boost::function 允许设置对象的成员变量。我创建了一个我能想到的最简单的例子来了解我正在尝试（和失败）做的事情。我觉得我掌握了 boost::bind，但我是 boost 的新手，我相信我错误地使用了 boost::function。

```
#include <iostream>
#include <Boost/bind.hpp>
#include <boost/function.hpp>

class Foo
{
public:
    Foo() : value(0) {}

    boost::function<void (int&)> getFcn()
    {
        return boost::function<void (int&)>( boost::bind<void>( Foo::value, this, _1 ) );
    }

    int getValue() const    { return value; }

private:
    int value;
};

int main(int argc, const char * argv[])
{
    Foo foo;

    std::cout << "Value before: " << foo.getValue();

    boost::function<void (int&)> setter = foo.getFcn();
    setter(10);     // ERROR: No matching function for call to object of type 'boost::function<void (int &)>'
                    // and in bind.hpp: Called object type 'int' is not a function or function pointer

    std::cout << "Value after: " << foo.getValue();

    return 0;
} 
```

我在第 28 行遇到错误，我想使用该函数将 Foo::value 设置为 10。我只是在处理这整件事错了吗？我应该只传回一个 int* 或其他东西，而不是使用 boost 来完成所有这些吗？我之所以调用“getFcn()”是因为在我的实际项目中我使用的是消息传递系统，如果包含我想要的数据的对象不再存在，getFcn 将返回一个空的 boost::function。但我想如果没有找到任何东西，我可以使用 int* 返回 NULL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:31:09.333

这`boost::bind<void>( Foo::value, this, _1 )`在您的代码中本质上是`Foo::value`用作成员函数。这是错误的。`Foo::value`不是函数。

让我们一步一步构建：

```
class Foo
{
    ...
    boost::function< void (Foo*, int) > getFcn ()
    {
        return boost::function< void (Foo*, int) >( &Foo::setValue );
    }

    void setValue (int v)
    {
        value = v;
    }
    ...
}

int main ()
{
    ...
    boost::function< void (Foo*, int) > setter = foo.getFcn();
    setter( &foo, 10);
    ...
} 
```

所以这里函数`this`显式地接受对象。让我们使用`boost.bind`绑定`this`作为第一个参数。

```
class Foo
{
    ...
    boost::function< void (int) > getFcn ()
    {
        return boost::bind(&Foo::setValue, this, _1);
    }

    void setValue (int v)
    {
        value = v;
    }
    ...
}

int main ()
{
    ...
    boost::function< void (int) > setter = foo.getFcn();
    setter( 10);
    ...
} 
```

（未经测试的代码）

# c++ - 检查类型是否可散列

> ID：12753997
> 
> 赞同：21
> 
> 时间：2012-10-05T21:03:45.413
> 
> 标签：c++, c++11, sfinae

我想使用标准库的无序容器的默认实例创建一个类型特征来检查特定类型是否可散列，因此它是否具有`std::hash`. 我认为这将是一个非常有用的功能（例如，在通用代码中`std::set`用作故障保护）。`std::unordered_set`因此，我认为`std::hash`没有为每种类型定义，开始制作以下 SFINAE 解决方案：

```
template<typename T> std::true_type hashable_helper(
    const T&, const typename std::hash<T>::argument_type* = nullptr);

template<typename T> std::false_type hashable_helper(...);

//It won't let me derive from decltype directly, why?
template<typename T> struct is_hashable 
    : std::is_same<decltype(hashable_helper<T>(std::declval<T>())),
                   std::true_type> {}; 
```

（如果这不是最好的解决方案甚至是错误的，请原谅我谦虚的 SFINAE 能力。）

但后来我了解到，*gcc 4.7*和*VC++ 2012*都定义`std::hash`了任何类型`T`，只是`static_assert`在非专业版本中。但是，它们不是有条件地编译（以及使用*gcc 4.7*的*libstdc++的**clang 3.1*）使断言失败，从而导致编译错误。这似乎是合理的，因为我认为s 不是由 SFINAE 处理的（对吗？），所以 SFINAE 解决方案似乎根本不可能。更糟糕的是，在通用模板中甚至没有 a但只是**没有定义**它**`static_assert``gcc 4.6``static_assert``std::hash`**`()`运算符，在尝试使用它时导致链接器错误（这总是比编译错误更糟糕，我无法想象有任何方法可以将链接器错误转换为编译器错误）。****

 ****那么，如果类型具有有效的特`std::hash`化，或者至少对于`static_assert`通用模板中的库（以某种方式将`static_assert`错误转换为 SFINAE 非错误），是否有任何符合标准且可移植的方法来定义返回的这种类型特征？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2018-08-19T08:24:22.790

从 C++17 开始，现在可以以更优雅的方式执行此操作。来自关于 std::hash 的[cppreference ：](https://en.cppreference.com/w/cpp/utility/hash)

> 此模板的每个特化要么启用（“未污染”），要么禁用（“中毒”）。对于库和用户都没有为其提供启用的特化 std::hash 的每个类型 Key，该特化存在并且被禁用。禁用的特化不满足 Hash，不满足 FunctionObject，并且 std::is_default_constructible_v、std::is_copy_constructible_v、std::is_move_constructible_v、std::is_copy_assignable_v、std::is_move_assignable_v 都是假的。换句话说，它们存在，但不能使用。

这意味着 STL 必须在 C++17 中删除 static_assert。这是使用“Clang-6.0.0 -std=c++17”的有效解决方案：

```
#include <functional>
#include <ios>
#include <iostream>
#include <type_traits>

template <typename T, typename = std::void_t<>>
struct is_std_hashable : std::false_type { };

template <typename T>
struct is_std_hashable<T, std::void_t<decltype(std::declval<std::hash<T>>()(std::declval<T>()))>> : std::true_type { };

template <typename T>
constexpr bool is_std_hashable_v = is_std_hashable<T>::value; 

struct NotHashable {};

int main()
{
    std::cout << std::boolalpha;
    std::cout << is_std_hashable_v<int> << std::endl;
    std::cout << is_std_hashable_v<NotHashable> << std::endl;
    return 0;
} 
```

[例如，当您使用boost::hash_combine](https://www.boost.org/doc/libs/1_68_0/doc/html/hash/reference.html#boost.hash_combine)或[boost::hash_range](https://www.boost.org/doc/libs/1_68_0/doc/html/hash/reference.html#id-1_3_11_11_2_2_26_2_2-bb)时，这可能会派上用场。如果包含包含以下代码示例的标头，则不再需要为特定类型定义提升哈希。

```
#include <boost/functional/hash_fwd.hpp>

template <typename T, typename = std::void_t<>>
struct is_boost_hashable : std::false_type { };

template <typename T>
struct is_boost_hashable<T, std::void_t<decltype(boost::hash_value(std::declval<T>()))>> : std::true_type { };

template <typename T>
constexpr bool is_boost_hashable_v = is_boost_hashable<T>::value;  

namespace boost
{
    template <typename T>
    auto hash_value(const T &arg) -> std::enable_if_t<is_std_hashable_v<T> &&
                                                      !is_boost_hashable_v<T>, std::size_t>
    {
        return std::hash<T>{}(arg);
    }
} 
```

注意*is_boost_hashable_v*，这是避免歧义所必需的，因为 boost 已经为许多散列提供了散列。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-05T21:55:12.420

似乎我们有两个相互矛盾的要求：

1.  如果实例化可能失败并从重载集中删除相应的函数，SFINAE 旨在避免模板的任何实例化。
2.  `static_assert()`旨在创建错误，例如，在模板的实例化期间。

在我看来，1\. 显然胜过 2.，即您的 SFINAE 应该可以工作。从两个独立的编译器供应商的外观来看，不幸的是不是在他们之间而是在我之间。该标准似乎没有指定默认定义的`std::hash<T>`外观，并且似乎仅对`std::hash<T>`专门针对 type的情况施加约束`T`。

我认为您提出的类型特征是一个合理的想法，应该得到支持。但是，该标准似乎并不能保证它可以实施。可能值得向编译器供应商提出这个问题和/或提交标准的缺陷报告：据我所知，当前的规范没有给出明确的指导应该发生什么。...如果规范当前要求上述类型特征失败，则可能是需要纠正的设计错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-05T23:37:51.970

这是您的问题的一个非常肮脏的解决方案：它适用于 GCC 4.7（而不是 4.6，由于缺少 C++11 功能：重载重载）

```
// is_hashable.h
namespace std {
    template <class T>
    struct hash {
        typedef int not_hashable;
    };

}

#define hash hash_
#define _Hash_impl _Hash_impl_
#include<functional>
#undef hash
#undef _Hash_impl

namespace std {
    struct _Hash_impl: public std::_Hash_impl_{
        template <typename... Args>
            static auto hash(Args&&... args) 
                -> decltype(hash_(std::forward<Args>(args)...)) {
             return hash_(std::forward<Args>(args)...);
        }
    };
    template<> struct hash<bool>: public hash_<bool> {};
    // do this exhaustively for all the hashed standard types listed in:
    // http://en.cppreference.com/w/cpp/utility/hash
}

template <typename T>
class is_hashable
{
    typedef char one;
    typedef long two;

    template <typename C> static one test( typename std::hash<C>::not_hashable ) ;
    template <typename C> static two test(...);

public:
    enum { value = sizeof(test<T>(0)) == sizeof(long) };
};

// main.cpp
// #include "is_hashable.h"
#include<iostream>
#include<unordered_set>

class C {};

class D {
public:
    bool operator== (const D & other) const {return true;}
};

namespace std {
    template <> struct hash<D> {
        size_t operator()(const D & d) const { return 0;}
    };
}

int main() {
    std::unordered_set<bool> boolset; 
    boolset.insert(true);
    std::unordered_set<D> dset; 
    dset.insert(D());// so the hash table functions
    std::cout<<is_hashable<bool>::value<<", ";
    std::cout<<is_hashable<C>::value << ", ";
    std::cout<<is_hashable<D>::value << "\n";
} 
```

输出是：

> 1, 0, 1

我们基本上“劫持”了哈希符号并`typedef`在其中注入了一些帮助程序。您需要为 VC++ 修改它，特别是修复，`_Hash_impl::hash()`因为它是一个实现细节。

如果您确保将标记为的部分`is_hashable.h`作为第一个包含在内，那么这个肮脏的技巧应该可以工作......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-03T02:55:01.390

我也打这个。我尝试了一些解决方法，并为`std::hash<>`. 白名单维护起来并不愉快，但它安全且有效。

我在 VS 2013、2015、clang 和 gcc 上试过这个。

```
#include <iostream>
#include <type_traits>

// based on Walter Brown's void_t proposal
// http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n3911.pdf
namespace detail {
    template<class... TN> struct void_t {typedef void type;};
}
template<class... TN>
struct void_t {typedef typename detail::void_t<TN...>::type type;};

// extensible whitelist for std::hash<>
template <class T, typename = void> 
struct filtered_hash;
template <class T> 
struct filtered_hash<T, 
    typename std::enable_if<std::is_enum<T>::value>::type> 
    : std::hash<T> {
};
template <class T> 
struct filtered_hash<T, 
    typename std::enable_if<std::is_integral<T>::value>::type> 
    : std::hash<T> {
};
template <class T> 
struct filtered_hash<T, 
    typename std::enable_if<std::is_pointer<T>::value>::type> 
    : std::hash<T> {
};

template<typename, typename = void>
struct is_hashable
    : std::false_type {};

template<typename T>
struct is_hashable<T, 
    typename void_t<
        typename filtered_hash<T>::result_type, 
        typename filtered_hash<T>::argument_type, 
        typename std::result_of<filtered_hash<T>(T)>::type>::type>
    : std::true_type {};

// try it out..
struct NotHashable {};

static_assert(is_hashable<int>::value, "int not hashable?!");
static_assert(!is_hashable<NotHashable>::value, "NotHashable hashable?!");

int main()
{
    std::cout << "Hello, world!\n";
} 
```****