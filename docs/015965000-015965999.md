# StackOverflow 问答 15965000-15965999

# asp.net - 在gridview中单击删除链接时隐藏行

> ID：15965002
> 
> 赞同：1
> 
> 时间：2013-04-12T06:56:56.867
> 
> 标签：asp.net, gridview

我有一个gridview，其中有两个链接按钮。这里是：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" PageSize="5" OnRowCommand="gv_RowCommand" 
                        AllowPaging="true" DataKeyNames="ID" CssClass="mGrid"  BackColor="White" BorderColor="Silver" BorderStyle="Double"
                        BorderWidth="1px" CellPadding="4" >

         <RowStyle BackColor="White" Width="150%" ForeColor="#003399" />
            <Columns>
                <asp:TemplateField HeaderText="ID" Visible="false" >
                    <ItemTemplate>
                                    <asp:Label ID="lblID"  Text='<%#Bind("ID") %>' runat="server"></asp:Label>
                    </ItemTemplate>

                </asp:TemplateField>

                <asp:TemplateField  HeaderText="Version">
                    <ItemTemplate>
                                    <asp:Label ID="lblversion" Text='<%#Bind("version") %>' runat="server"></asp:Label>
                    </ItemTemplate>

                </asp:TemplateField>

                <asp:TemplateField HeaderText="Image ID">
                    <ItemTemplate>
                                    <asp:Label ID="lblimageid" runat="server" Text='<%#Bind("image_id") %>'></asp:Label>
                    </ItemTemplate>

                </asp:TemplateField>

                <asp:TemplateField HeaderText="Getty ID">
                    <ItemTemplate>
                                    <asp:Label ID="lblgettyid" runat="server" Text='<%#Bind("getty_id") %>'></asp:Label>
                    </ItemTemplate>
                    <%--<EditItemTemplate>
                                    <asp:TextBox ID="txtgettyid" Text='<%#Bind("getty_id") %>' runat="server"></asp:TextBox>
                    </EditItemTemplate>--%>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Pool Letter">
                    <ItemTemplate>
                                    <asp:Label ID="lblpoolletter" runat="server" Text='<%#Bind("pool_letter") %>'></asp:Label>
                    </ItemTemplate>

                </asp:TemplateField>

                <asp:TemplateField HeaderText="To Use">
                    <ItemTemplate>
                                    <asp:Label ID="lbltouse" runat="server" Text='<%#Bind("to_use") %>'></asp:Label>
                    </ItemTemplate>
                   <%-- <EditItemTemplate>
                                    <asp:TextBox ID="txttouse" Text='<%#Bind("to_use") %>' runat="server"></asp:TextBox>
                    </EditItemTemplate>--%>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Clue">
                    <ItemTemplate>
                                    <asp:Label ID="lblclue" runat="server" Text='<%#Bind("clue") %>'></asp:Label>
                    </ItemTemplate>

                </asp:TemplateField>

                <asp:TemplateField HeaderText="Range">
                    <ItemTemplate>
                                    <asp:Label ID="lblrange" runat="server" Text='<%#Bind("range") %>'></asp:Label>
                    </ItemTemplate>

                </asp:TemplateField>

                <asp:TemplateField HeaderText="last_updated">
                    <ItemTemplate>
                                    <asp:Label ID="lbllastupdated" runat="server" Text='<%#Bind("last_updated") %>'></asp:Label>
                    </ItemTemplate>

                </asp:TemplateField>

                <asp:TemplateField HeaderText="Status">
                    <ItemTemplate>
                                    <asp:Label ID="lblstatus" runat="server" Text='<%#Bind("status") %>'></asp:Label>
                    </ItemTemplate>

                </asp:TemplateField>

                <asp:TemplateField  HeaderText="First">
                    <ItemTemplate>
                                    <asp:Label ID="lblfirst" runat="server" Text='<%#Bind("first") %>'></asp:Label>
                    </ItemTemplate>

                </asp:TemplateField>

                <asp:TemplateField HeaderText="Middle">
                    <ItemTemplate>
                                    <asp:Label ID="lblmiddle" runat="server" Text='<%#Bind("middle") %>'></asp:Label>
                    </ItemTemplate>

                </asp:TemplateField>

                <asp:TemplateField HeaderText="Last">
                    <ItemTemplate>
                                    <asp:Label ID="lbllast" runat="server" Text='<%#Bind("last") %>'></asp:Label>
                    </ItemTemplate>

                </asp:TemplateField>
                 <asp:TemplateField >
                 <ItemStyle Wrap="false" Width="100px" />
                    <ItemTemplate>
                                    <asp:LinkButton ID="lnkbtnedit" Text="Edit" Visible="true" style="color:#006699;"  CommandName="Edit" runat="server"></asp:LinkButton>
                      &nbsp;&nbsp; <asp:LinkButton ID="lnkbtndel" Text="Delete" Visible="true"  style="color:#006699;"  CommandName="Delete" runat="server">  </asp:LinkButton>
                    </ItemTemplate>

                </asp:TemplateField>

            </Columns>
              <PagerStyle BackColor="#006699" Font-Bold="True" ForeColor="White" HorizontalAlign="Center" />
                        <AlternatingRowStyle BackColor="#CCFFFF" />
                        <SelectedRowStyle BackColor="#009999" Font-Bold="True" ForeColor="#CCFF99" />
                        <HeaderStyle  BackColor="#006699" Font-Bold="True" ForeColor="White"  />
    </asp:GridView>

void GridView1_RowDeleting(object sender, GridViewDeleteEventArgs e)
        {
            GridViewRow row = GridView1.Rows[e.RowIndex];

            int ID = Convert.ToInt32(GridView1.DataKeys[e.RowIndex].Value);

            con = new SqlConnection(conString);
            con.Open();
            int v = version + 1 ;

            string updatedetails = "update tblfameface set status ='Deleted',version=" + v + "  where ID=" + ID + " ";
            SqlCommand cmd = new SqlCommand(updatedetails, con);
            int temp = cmd.ExecuteNonQuery();
            con.Close();

            //int rows = GridView1.CurrentCell.RowIndex;
            //GridView1.Rows.RemoveAt(rows);

            bindDB();

            LinkButton btndel = (LinkButton)GridView1.Rows[row.RowIndex].FindControl("lnkbtndel");
            btndel.Visible = false;

        } 
```

单击编辑链接时，它按需要工作，当我单击删除链接时，我希望隐藏该行。应该触发哪个事件以及如何处理？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:09:51.463

```
private void button1_Click(object sender, EventArgs e)
{
  int row = dataGridView1.CurrentCell.RowIndex;
  dataGridView1.Rows.RemoveAt(row);
} 
```

试试这个代码............

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:26:55.643

这是 Aspx：

```
<Columns>
 <asp:TemplateField HeaderText="Hide"> <ItemTemplate> <asp:LinkButton ID="lnkHide" runat="server" Text="Hide" OnClick="LnkHide_Click" /> </ItemTemplate> </asp:TemplateField>
            <asp:BoundField DataField="Name" HeaderText="Name" />
</Columns> 
```

这是背后的代码：

```
 protected void LnkHide_Click(object sender, EventArgs e)
    {
        GridViewRow clickedRow = ((LinkButton)sender).NamingContainer as GridViewRow;
        clickedRow.Visible = false;
    } 
```

试试这个代码

# c# - 如果我想至少区分英式英语和美式英语，我应该使用什么语言标准？

> ID：15965003
> 
> 赞同：1
> 
> 时间：2013-04-12T06:57:06.943
> 
> 标签：c#, architecture, localization, iso

在主题中，我正在设计一个可以接受各种语言文件的系统，提交者希望能够说这是“用美国英语写的”或“用英国英语写的”（当然只是“英语” ' 但这可能是题外话，因为它仍然是一种独特的方言）

我一直在查看 ISO-639-3，但这似乎并不能解释“美式英语”的添加

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T07:03:26.707

当您提到 ISO 639-3 时，您似乎正在寻找语言*代码*。然后`en-US`用于美国英语，`en-GB`英国英语。

参考：[BCP 47](http://www.rfc-editor.org/info/bcp47)，尤其是“识别语言的标签”部分，目前是[RFC 5646](http://www.rfc-editor.org/info/rfc5646)。

# spring - 在春天初始化地图

> ID：15965004
> 
> 赞同：2
> 
> 时间：2013-04-12T06:57:12.470
> 
> 标签：spring, map

我正在使用 spring 表达式从一些配置中读取地图。现在我该如何构造一个 bean。

```
<bean id="xyz"  class= "java.util.Map" >
   <!-- how to pass $xyz to this -->
    <!-- i know how to pass static entries to  it  using entry tag , but how abut map? !-->
</bean> 
```

如何将我的地图传递给 bean xyz？

对于字符串，可以使用以下代码。

```
<bean id="x" class ="java.util.String >
  <construtor-arg>  $x
   </constructort-arg>
</bean> 
```

但是对于 map 没有将 map 作为 inp 的构造函数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T07:11:21.813

使用 Spring util 架构

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:util="http://www.springframework.org/schema/util"
   xsi:schemaLocation="
      http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans.xsd
      http://www.springframework.org/schema/util
      http://www.springframework.org/schema/util/spring-util.xsd">

  <bean id="yourBean" class="yourBean">
    <property name="aPrameterOfTypeMapInYourBean">
      <map>
        <entry key="first" value="hallo"/>
        <entry key="second" value="world"/>
        <entry key="third" value="that is easy"/>
        <entry key="forth" value="and hopefully solve your problem"/>

        <entry key="yourParam" value="$x"/>

      </map>
    </property>
  </bean>

</beans> 
```

Spring 还支持集合的合并（`<map>`应该有一个合并属性）。因此，您需要定义两个映射，并将其中一个指定为另一个的父级。

更多细节：

*   @参见[Spring 参考附录 D.2.2.5`<util:map>`](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/xsd-config.html#xsd-config-body-schemas-util-map)
*   @参见 Spring 参考4.4.2.4[集合，“集合合并”小节](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-collection-elements)

# python - 在 Python subprocess.Popen 函数中使用 ls

> ID：15965017
> 
> 赞同：2
> 
> 时间：2013-04-12T06:58:13.543
> 
> 标签：python, subprocess, ls

```
proc = subprocess.Popen(['ls', '-v', self.localDbPath+'labris.urls.*'], stdout=subprocess.PIPE)
while True:
    line = proc.stdout.readline()
    if line != '':
        print line
    else:
        break 
```

使用上面的代码时，我收到错误消息：

```
ls: /var/lib/labrisDB/labris.urls.*: No such file or directory 
```

但是当我从 shell 中执行相同的操作时，我没有收到任何错误：

```
ls -v /var/lib/labrisDB/labris.urls.* 
```

这也不会给出任何错误：

```
proc = subprocess.Popen(['ls', '-v', self.localDbPath], stdout=subprocess.PIPE)
while True:
    line = proc.stdout.readline()
    if line != '':
        print line
    else:
        break 
```

为什么第一个代码失败？我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T07:02:47.127

您会收到错误，因为 python*子进程*无法像*bash*一样扩展 * 。

像这样更改您的代码：

```
from glob import glob
proc = subprocess.Popen(['ls', '-v'] + glob(self.localDbPath+'labris.urls.*'), stdout=subprocess.PIPE) 
```

以下是有关 python 中的 glob 扩展和解决方案的更多信息：[Python 子进程中的 Shell 扩展](https://stackoverflow.com/questions/14482135/shell-expansion-in-python-subprocess)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:02:13.397

[通配](http://en.wikipedia.org/wiki/Glob_%28programming%29)是由外壳完成的。因此，当您`ls *`在终端中运行时，您的 shell 实际上正在调用`ls file1 file2 file3 ...`.

如果你想做类似的事情，你应该看看这个[`glob`](http://docs.python.org/3/library/glob.html)模块，或者只是通过一个 shell 运行你的命令：

```
proc = subprocess.Popen('ls -v ' + self.localDbPath + 'labris.urls.*',
                        shell=True,
                        stdout=subprocess.PIPE) 
```

（如果您选择后者，请务必阅读[安全警告](http://docs.python.org/3/library/subprocess.html#frequently-used-arguments)！）

# c# - 使用 ravendb 中的事务存储文档后立即读取文档

> ID：15965019
> 
> 赞同：0
> 
> 时间：2013-04-12T06:58:23.997
> 
> 标签：c#, transactions, ravendb

在这里，我使用事务范围存储类型为 transactionSummary 的文档，如下所示

```
public class TransactionSummary
{
[JsonIgnore]
        public Guid? Etag { get; set; }
        public String Id { get; set; }
        public String TransactId { get; set; }
        public OpenOrClosed BalanceType { get; set; }
        public TransactStatus Status { get; set; }
        public String PayeeAccountNo { get; set; }
        public Decimal AmountPaid { get; set; }
}

using (var trans = new TransactionScope())
{
  using (IDocumentSession sess = GetConnection())
   {
     sess.Store(fldtrans);
     sess.SaveChanges();
   }
    trans.complete();
} 
```

立即存储后，我需要检索它，所以我按以下方式进行操作

```
 using (IDocumentSession sess = GetConnection())
   {
     sess.Advanced.AllowNonAuthoritativeInformation = false;
     sess.Advanced.UseOptimisticConcurrency = true;
     transact = sess.Query<TransactionSummary>().Where(x => x.TransactId ==transactid).FirstOrDefault();                                                                 
     transact.Etag = sess.Advanced.GetEtagFor(transact);
   } 
```

这里我得到一个异常如下 ex = {"Value cannot be null.\r\nParameter name: key"}StackTrace = "
at System.Collections.Generic.Dictionary `2.FindEntry(TKey key)\r\n at System.Collections.Generic.Dictionary`2.TryGetValue(TKey key, TValue& value)\r \n 在 Raven.Client.Document.InMemoryDocumentSessionOperations.GetDocumentMetadata[T](T instance) in c...

我知道提交事务需要一定的时间，因此当立即读取文档时它会失败。但是我怎样才能克服这个问题，这样我就不会牺牲我的要求。

马特在这里，我在该事务范围内也做了很多其他工作，我刚刚向您展示了一瞥，以便您了解其中之一是我将 TransactionId 发布到队列中，并且我的后台服务获取 transactionId（不是文档Id) 并执行其他一些需要在事务后完成的过程。这里发生的是队列在事务在真实数据库中受到影响之前较早地获取 transactionId。

这是我的 Getconnection 代码供参考。

```
public class DataAccess : IDataAccess
    {
        static IDocumentStore _docStore ;
        public DataAccess()
        {

            _docStore = new DocumentStore { Url = "http://localhost:8081" };
            _docStore.Initialize();
            _docStore.Conventions.IdentityPartsSeparator = "-";  

        }

        #region IDataAccess Members

        public IDocumentSession GetConnection()
        {

            IDocumentSession sess = _docStore.OpenSession();
            _docStore.DatabaseCommands.EnsureDatabaseExists("MyDB");
            return sess=_docStore.OpenSession("MyDB");
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T14:00:11.010

根据您所展示的内容，无需显式定义事务范围。会话范围定义的工作单元周围已经存在隐式事务。唯一需要显式使用`TransactionScope`的情况是，如果您正在调用两个或多个具有不同会话的独立数据库 - 或调用 raven 和其他一些事务感知进程。

我不确定为什么要在存储后立即在新会话中查询。您肯定会遇到过时的索引问题需要处理。如果你真的必须这样做，你可能应该只通过它的`Id`.

也许您没有意识到这一点，但在您的第一个会话中`Id`调用后立即可用`.Store()`- 甚至在您保存更改之前。如果您想获取文档的 etag，您可以在第一个会话中调用`.GetEtagFor()`之后立即调用。`.SaveChanges()`实际上没有必要为这些目的创建另一个会话。

如果您还没有阅读过，您还应该阅读[这篇](http://ravendb.net/kb/16/using-optimistic-concurrency-in-real-world-scenarios)关于乐观并发和 etag 问题的 RavenDB 知识库文章。我想你会发现那里解决了你的大部分问题。

最后一件事 - 请更新您的问题以显示您的`GetConnection()`方法的代码。如果不显示，很难判断您是否正在使用`IDocumentSession`并且正确。`IDocumentStore`谢谢。

# git - Git push - “一切都是最新的” - 但是工作树文件没有得到更新。该怎么办？

> ID：15965022
> 
> 赞同：1
> 
> 时间：2013-04-12T06:58:29.980
> 
> 标签：git, githooks

**1)**我有一个`prime`关于`remote server host`.

**2)**我有一个`bare`关于`remote server host`.

**3）**我有一个`clone of the bare`带有工作树的存储库`local computer`，并且在此本地存储库中将其设置为远程。

有时，我们的共享主机工作人员直接添加了一些文件（没有暂存），而不使用通用过程“git add and commit” -**结果：**

我们经常做 git push ，它说：“一切都是最新的”（真的，因为bare得到了更新）但prime没有，因此，`working tree`文件不存在。

我需要一些东西（钩子，cronjob？），以便当裸与素数不同时，素数必须用最新的裸文件更新。

我们可以使用钩子或 cronjob 来强制这种行为吗？

我们有哪些选择？

我可以聊天，如果有人有耐心的话。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:30:52.317

我建议在您的裸仓库上设置一个接收后挂钩，以便在每次推送时执行：

```
git --git-dir=/path/to/prime/.git --work-tree=/path/to/prime pull bare 
```

（这里不需要' `cd`'，因为你指定`git`了repo目录和工作树的位置）。

前提是主要回购有一个名为“ `bare`”的远程。

```
cd /path/to/prime
git remote add bare /path/to/bare.git 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:04:39.807

您可以创建远程跟踪分支。它不会用新的更改自动更新你的本地树，但它会告诉你有多少次提交你的远程在你的本地仓库之前。创建远程跟踪分支

git branch --track [新分支名称] [远程分支名称]

# javascript - 使用函数参数解构赋值

> ID：15965024
> 
> 赞同：2
> 
> 时间：2013-04-12T06:58:37.147
> 
> 标签：javascript

```
function foo( [a,b] ) {

    console.log(a);
    console.log(b);
}

foo( [12,34] ); 
```

印刷：

```
12
34 
```

也在这里：

```
 var { a:x, b:y } = { a:7, b:8 };
 console.log(x); // prints: 7
 console.log(y); // prints: 8 
```

这种分配方法有效吗？这种方法会带来什么问题吗？

同样使用相同的技术，我们可以交换两个变量：

```
var a = 1;
var b = 2;
[a,b] = [b,a]; 
```

我只是想知道这种类型的作业将来会出现什么问题？我在哪里可以找到与此类作业相关的最佳参考？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:19:57.203

这是 Javascript 1.7 的一个特性，它是 Mozilla 实现 Javascript 的一部分。

[https://developer.mozilla.org/en-US/docs/JavaScript/New_in_JavaScript/1.7#Destructuring_assignment_(Merge_into_own_page.2Fsection)](https://developer.mozilla.org/en-US/docs/JavaScript/New_in_JavaScript/1.7#Destructuring_assignment_(Merge_into_own_page.2Fsection))

它不是任何 ECMAScript 标准的一部分（据我所知），我认为没有任何计划使其在其他浏览器中可用；你不应该在便携式网站中使用它。

# arduino - Arduino：错误：“abs”未在此范围内声明

> ID：15965025
> 
> 赞同：2
> 
> 时间：2013-04-12T06:58:45.763
> 
> 标签：arduino

我正在开发一个需要 abs() 函数的 arduino 库：

```
#include <math.h>
normTransFreq1 = abs(1.0); 
```

错误：未在此范围内声明“abs”

正如`math.h`cpp中已经包含的那样，我完全不确定如何解决这个问题。新安装的 arduino 1.5.2 没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T07:06:25.253

刚刚找到解决方案：

库不需要包含 math.h。相反，应通过将以下内容添加到头文件中来包含 Arduino.h：

```
#if ARDUINO >= 100
  #include "Arduino.h"
#else
  #include "WProgram.h"
#endif 
```

# jquery - history.pushState() 并单击后退/前进按钮

> ID：15965031
> 
> 赞同：0
> 
> 时间：2013-04-12T06:59:11.360
> 
> 标签：jquery, html, pushstate, html5-history

这是我在 ajax 加载时更改 url 的代码

```
$.ajax({
  url: url,
  success: function (data) {
  $(selector).html(data);
    var title = data.match("<title>(.*?)</title>")[1]; // get title of loaded content   
    window.history.pushState( {page : 0} , document.title, window.location.href ); // store current url.    
    window.history.pushState( {page : 1} , title, url ); // Change url.
    document.title = title; // Since title is not changing with window.history.pushState(), 
    //manually change title. Possible bug with browsers.
    window.onpopstate = function (e) {
        window.history.go(0);
    };
  }
}); 
```

当我点击**返回**时，上一页正在加载。如果我再次点击没有任何反应。再点击一下它就会转到第一页。经过一些测试，我发现，在每次 ajax 加载时，后退按钮都有 2 个相同的页面

![在此处输入图像描述](https://i.stack.imgur.com/nCYzb.png)

**单击前进按钮时，我还需要一个代码来获取历史记录**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:55:27.210

版主已经删除了我的帖子，因为我真的给出了一些代码片段来尝试提供帮助。

* * *

但我仍然会尝试举一个例子：

假设你有这段代码是由事件 onclick 触发的。

```
$(function() {
    function load(url, push) {
        $.ajax({
            url: url,
            success: function (data) {
                var title = data.match("<title>(.*?)</title>")[1];
                document.title = title;
                if (push) {
                    history.pushState(null, title, url);
                }
            }
        });
    }

    $(document).click(function(e) {
        if (e.target.nodeName === 'A') {
            var url = $(e.target).attr('href');
            if (url.indexOf('#') !== 0) {
                load(url, true);
                e.preventDefault();
            }
        }
    });

    $(window).bind('popstate', function(e) {
        load(window.location.href, false);
    });
}); 
```

# javascript - 如果未在脚本中指定域，则重定向网站 - 使用 Javascript 进行保护

> ID：15965035
> 
> 赞同：1
> 
> 时间：2013-04-12T06:59:21.023
> 
> 标签：javascript, security, multiple-domains, redirect

**简要想法：**我正在构建脚本，通过将它们锁定在单个域上来保护我的网页设计工作。如果网站上传到不同的域，它将重定向到我的网站。意味着它不允许从不同的域加载实际网站，除非我指定它们。

我的工作脚本：

```
-- DECODED SCRIPT --

[]['constructor']['constructor'](self['unescape']('if(~location.protocol.indexOf('http:')&&~location.host.indexOf('isupportu.in')){}else(location.href='http://iamwebdeveloper.in')'))() 
```

在上面的代码中，我允许我的工作仅使用 http 协议加载到“www.abc.com”上。但是，如果我们加载没有 www 即“abc.com”的网站，它将无法工作。

```
www.abc.com --> Website load

abc.com --> www.iamwebdeveloper.in

xyz.com --> www.iamwebdeveloper.in

www.xyz.com --> www.iamwebdeveloper.in 
```

我决定使用`.htaccess`/`web.config`文件来强制重定向没有 www 的域。请求 www.abc.com [运行良好]

**但现在我想升级这个脚本，我需要你的帮助：**

*   不希望依赖 .htaccess / web.config 文件来重定向非 www。要求。
*   万维网。并且非 www 请求应该接受，但不允许子域。例如 subdomain.abc.com 是不允许的。
*   我想在脚本中为他们的单个网站有多个域的大客户添加多个域作为插件域。我想在上面的脚本中添加更多域。

有人可以帮我验证这个脚本是否符合我的上述逻辑吗？

```
[]["constructor"]["constructor"]
(
    self["unescape"]
    ("<!-- I WILL USE THIS CODE AFTER CONVERTING TO ESCAPE TEXT AND IGNORE THIS COMMENT -->
        if (location.protocol.indexOf("http:") && ( (location.host.indexOf("isupportu.in")) || (location.host.indexOf("paytronicindia.com")) || (location.host.indexOf("paytronicworldwide.com")) || (location.host.indexOf("paytronicnetwork.com")) )
        ){}else(location.href='http://iamwebdeveloper.in')
    ")
)
() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T11:11:20.200

看起来您的*真正*问题类似于“*如何在 JavaScript 中检查当前页面的主机名是否是特定域列表之一，带或不带`www.`前缀？* ”

有很多方法可以做到这一点，但一种相当简单的方法是将正则[表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)与匹配[`location.hostname`](https://developer.mozilla.org/en-US/docs/DOM/window.location)：

```
var re = /^(www\.)?((site1|site2|site3)\.in|(site4|site5)\.com)$/;
if ( !re.test( location.hostname ) ) {
    location.href = 'http://yourwebsite.in';
} 
```

混淆是一项练习。

# php - ZendSoapServer 在抛出异常/SoapFault 时丢失错误代码

> ID：15965037
> 
> 赞同：0
> 
> 时间：2013-04-12T06:59:23.527
> 
> 标签：php, zend-framework, exception, soap, error-code

我有一个 Zend 后端和一个 Zend 前端，两者都通过 SOAP 进行通信。后端出现异常，应在前端抛出异常/SoapFault。这适用于错误消息，但错误代码会以某种方式丢失。我需要代码能够在前端以不同语言显示错误。我尝试了很多，但无法让它工作。

**这是我的 SoapController 的后端 handleSoap 函数：**

```
private function handleSOAP($class) {
    $options = array('uri' => 'urn:'.$class.'','location' => $this->_WSDL_URI);
    $server = new Zend_Soap_Server(null, $options);
    $server->setEncoding('ISO-8859-1');
    $server->setClass($class);
    $server->registerFaultException('Exception');
    $server->handle();  
} 
```

**在前端的 SoapCallerClass：**

```
 public function __construct() {
            $this->client = new Zend_Soap_Client($this->_WSDL_URI);
            $this->client->setWsdlCache(WSDL_CACHE_NONE);
            $this->client->setEncoding('ISO-8859-1');
    }

    public function __call($method,$params) {
       try {
         $this->client->mySoapFunction();    
       } catch (Exception $e)  {
       throw $e; // No error code inside !
       }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:22:31.843

我查看了传递给前端的 SoapFault 对象。使用 getMessage() 返回原始消息。使用 getCode 返回 0，但该对象有一个名为 faultcode 和 faultmessage 的属性，其中包含异常的原始代码和消息。

# python - python numpy.convolve 解决卷积积分限制从 0 到 t 而不是 -t 到 t

> ID：15965040
> 
> 赞同：6
> 
> 时间：2013-04-12T06:59:30.720
> 
> 标签：python, numpy, numeric

我有一个类型的卷积积分：

![卷积积分 \int_0^t](https://i.stack.imgur.com/vdV7I.jpg)

为了数值求解这个积分，我想使用`numpy.convolve()`. 现在，正如您在[在线帮助](http://docs.scipy.org/doc/numpy/reference/generated/numpy.convolve.html)中看到的那样，卷积是从 -infinity 到 +infinity 正式完成的，这意味着数组完全相互移动以进行评估 - 这不是我所需要的。我显然需要确保选择正确的卷积部分——你能否确认这是正确的方法，或者告诉我如何正确地做，（也许更重要）为什么？

```
res = np.convolve(J_t, dF, mode="full")[:len(dF)] 
```

J_t 是一个分析函数，我可以根据需要评估尽可能多的点，dF 是测量数据的导数。对于这次尝试，我选择了`len(J_t) = len(dF)`，因为根据我的理解，我不需要更多。

感谢您的想法，一如既往，感谢您的帮助！

* * *

**背景信息**（对于那些可能感兴趣的人）

这些类型的积分可用于评估物体的粘弹性行为（或电压变化期间电路的响应，如果您对此主题更熟悉的话）。对于粘弹性，J(t) 是蠕变柔量函数，F(t) 可以是随时间变化的偏应变，那么这个积分将产生偏应力。如果你现在有一个 J(t) 的形式：

```
J_t = lambda p, t: p[0] + p[1]*N.exp(-t/p[2]) 
```

`p = [J_elastic, J_viscous, tau]`这将是“著名的”标准[线性固体](http://en.wikipedia.org/wiki/Standard_linear_solid_model)。积分限制是测量的开始 t_0 = 0 和感兴趣的时刻 t。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T16:46:54.243

为了让它正确，我选择了以下两个函数：

```
a(t) = t
b(t) = t**2 
```

很容易进行数学运算并发现它们在您的案例中定义的“卷积”具有以下值：

```
c(t) = t**4 / 12 
```

所以让我们尝试一下：

```
>>> delta = 0.001
>>> t = np.arange(1000) * delta
>>> a = t
>>> b = t**2
>>> c = np.convolve(a, b) * delta
>>> d = t**4 / 12
>>> plt.plot(np.arange(len(c)) * delta, c)
[<matplotlib.lines.Line2D object at 0x00000000025C37B8>]
>>> plt.plot(t[::50], d[::50], 'o')
[<matplotlib.lines.Line2D object at 0x000000000637AB38>]
>>> plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/UWp0b.png)

因此，通过执行上述操作，如果您的`a`和`b`有两个元素，您将在 的第一个元素中`n`获得正确的卷积值。`n``c`

不确定下面的解释是否有意义，但它就在这里......如果你认为卷积是沿着 y 轴镜像函数之一，然后沿着 x 轴滑动它并计算乘积的积分每个点，很容易看出，由于在定义区域之外 numpy 将它们视为用零填充，因此您有效地设置了从 0 到 t 的积分区间，因为第一个函数为零低于零，而第二个函数在 t 之上为零，因为它最初在零之下为零，但已被镜像并向右移动 t。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-13T16:08:21.233

我正在解决同样的问题，并使用一种效率极低但功能正确的算法解决了它：

```
def Jfunk(inz,t):

    c0 = inz[0]
    c1 = inz[1]
    c2 = inz[2]

    J = c0 - c1*np.exp(-t/c2)

    return J

def SLS_funk(inz, t, dl_dt):

    boltz_int = np.empty(shape=(0,))

    for i,v in enumerate(t, start=1):

        t_int = t[0:i]

        Jarg = v - t[0:i]

        J_int = Jfunk(inz,Jarg)

        dl_dt_int = dl_dt[0:i]

        inter_grand = np.multiply(J_int, dl_dt_int)

        boltz_int = np.append(boltz_int, simps (inter_grand, x=t_int) )

    return boltz_int 
```

感谢这个问题及其答案，我能够根据上面建议的 numpy 卷积函数实现更好的解决方案。如果 OP 很好奇，我对这两种方法进行了时间比较。

对于具有 20,000 个时间点的 SLS（三参数 J 函数）：

使用 Numpy 卷积：~0.1 秒

使用蛮力方法：~7.2 秒

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T08:29:11.960

如果有助于了解对齐方式，请尝试将一对冲动进行卷积。使用 matplotlib（使用`ipython --pylab`）：

```
In [1]: a = numpy.zeros(20)
In [2]: b = numpy.zeros(20)
In [3]: a[0] = 1
In [4]: b[0] = 1
In [5]: c = numpy.convolve(a, b, mode='full')
In [6]: plot(c) 
```

您可以从结果图中看到，第一个样本`c`对应于第一个重叠位置。在这种情况下，*只有*第一个样本`a`和`b`重叠。其余的都漂浮在未定义的空间中。`numpy.convolve`有效地用零替换了这个未定义的空间，如果您设置了第二个非零值，您可以看到：

```
In [9]: b[1] = 1
In [10]: plot(numpy.convolve(a, b, mode='full')) 
```

在这种情况下，绘图的第一个值是 1，和以前一样（表明 的第二个值`b`根本没有贡献）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-28T17:56:10.120

在过去的两天里，我一直在为类似的问题而苦苦挣扎。OP 可能已经继续，但我仍然在这里展示我的分析。以下两个来源帮助了我：

1.  关于[stackoverflow的讨论](https://stackoverflow.com/questions/48715879/python-numpy-convolve-integral-limits)
2.  [这些笔记](http://web.mit.edu/2.14/www/Handouts/Convolution.pdf)

我将考虑从 time 开始在同一时间序列上定义的时间序列数据![](https://latex.codecogs.com/gif.latex?%5Cinline&space;t=0 "t=0")。让这两个系列是`A`和`B`。他们的（连续）卷积是

![](https://latex.codecogs.com/gif.latex?C&space;=&space;A&space;%5Cotimes&space;B&space;=&space;%5Cint_%7B-%5Cinfty%7D%5E%7B%5Cinfty%7D&space;A&space;(%5Ctau)&space;B&space;(t&space;-&space;%5Ctau)&space;d&space;%5Ctau. "C = A \otimes B = \int_{-\infty}^{\infty} A (\tau) B (t - \tau) d \tau。")

在上面的等式中代入![](https://latex.codecogs.com/gif.latex?%5Cinline&space;t "吨")，![](https://latex.codecogs.com/gif.latex?%5Cinline&space;t&space;+&space;t_m "t + t_m")我们得到`np.convolve(A,B)`返回的结果：

![](https://latex.codecogs.com/gif.latex?c_%7Bj+m%7D&space;%5Cequiv&space;C[j]&space;=&space;%5Csum_%7Bi&space;=&space;-%5Cinfty%7D%5E%7B+%5Cinfty%7D&space;A[i]&space;B[j&space;-&space;i&space;+&space;m] "c_{j+m} \equiv C[j] = \sum_{i = -\infty}^{+\infty} A[i] B[j - i + m]")

你想要的是

![](https://latex.codecogs.com/gif.latex?C%5E%7Bmy%7D&space;=&space;%5Cint_%7B0%7D%5E%7Bt%7D&space;A&space;(%5Ctau)&space;B&space;(t&space;-&space;%5Ctau)&space;d&space;%5Ctau. "C^{my} = \int_{0}^{t} A (\tau) B (t - \tau) d \tau。")

再次进行相同的替换，我们得到

![](https://latex.codecogs.com/gif.latex?c%5E%7Bmy%7D_%7Bj+m%7D&space;=&space;%5Csum_%7Bi&space;=&space;0%7D%5E%7Bj+m%7D&space;A[i]&space;B[j&space;-&space;i&space;+&space;m] "c^{my}_{j+m} = \sum_{i = 0}^{j+m} A[i] B[j - i + m]")

![](https://latex.codecogs.com/gif.latex?%5Cinline&space;c_%7Bj+m%7D "c_{j+m}")这与上面相同，因为`A`负索引外推为零，而*i* > ( *j* + *m* )`B[j - i + m]`为零。

如果您查看上面引用的注释，您可以找出![](https://latex.codecogs.com/gif.latex?%5Cinline&space;c_0 "c_0")对应![](https://latex.codecogs.com/gif.latex?%5Cinline&space;t=0 "t=0")于我们时间序列的时间。列表中的下一个值将对应于![](https://latex.codecogs.com/gif.latex?%5Cinline&space;t&space;=&space;dt "t = dt")，依此类推。因此，正确答案将是

![](https://latex.codecogs.com/gif.latex?%5Cint_0%5Et&space;A(%5Ctau)&space;B&space;(t-&space;%5Ctau)&space;d%5Ctau "\int_0^t A(\tau) B (t- \tau) d\tau")

等于`np.convolve(A,B)[0:M]`, 其中`M = len(A) = len(B)`.

这里请记住，时间数组的最后一个元素`M*dt = T`在哪里。`T`

**免责声明：**我不是程序员、数学家或工程师。我不得不在某处使用卷积，并从我自己与这个问题的斗争中得出这些结论。如果有人能指出，我很乐意引用任何有这种分析的书。

# c# - 如何将行添加到 datagridview winforms？

> ID：15965043
> 
> 赞同：5
> 
> 时间：2013-04-12T06:59:41.690
> 
> 标签：c#, winforms, datagridview

我想将行添加到`datagridview`. 我尝试了很多可能性，但它没有出现任何东西。我认为最好的解决方案是创建一个数据表，然后将其用作我的 gridview 的数据源。我使用winforms。请，欢迎任何其他想法。这是我到目前为止所尝试的：

```
public DataTable GetResultsTable()
    {
        DataTable table = new DataTable();
        table.Columns.Add("Name".ToString());
        table.Columns.Add("Color".ToString());
        DataRow dr;
        dr = table.NewRow();
        dr["Name"] = "Mike";
        dr["Color "] = "blue";
        table.AcceptChanges();
        return table;
    }
public void gridview()
{
     datagridview1.DataSource=null;
     datagridview1.DataSource=table;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T07:35:04.660

我在您的代码中发现了两个错误：

1.  `dr["Color "] = "blue";`列颜色应该没有空格 `dr["Color"] = "blue";`
2.  您忘记在表格中添加行

    `table.Rows.Add(dr);`

你可以试试这个

```
public DataTable GetResultsTable()
{
    DataTable table = new DataTable();
    table.Columns.Add("Name".ToString());
    table.Columns.Add("Color".ToString());
    DataRow dr = table.NewRow();
    dr["Name"] = "Mike";
    dr["Color"] = "blue";
    table.Rows.Add(dr);
    return table;
}
public void gridview()
{          
    datagridview1.DataSource =  GetResultsTable();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T07:05:54.163

有不同的方法，但在不同的条件下。

正如我的以下代码向您展示了在字符串数组的情况下的 gridview.add 方法：

```
datagridview1.Rows.Add( { val, val, val }); 
```

这取决于您要应用它的上下文和情况。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T07:33:30.350

试试这个方法：

```
dataGridView1.Columns.Add("Col1", "Name"); // "Col1" is the name of the column and  "Name" is the column header text"
dataGridView1.Columns.Add("Col2", "Age");
dataGridView1.Rows.Add("ABC", "25"); 
```

希望这可以帮助 ：）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-12T07:19:50.370

```
DataGridView dgv = new DataGridView();

DataTable table = new DataTable();

dgv.DataSource = table;

table.Columns.Add("Name");
table.Columns.Add("Color");
table.Rows.Add("Mike", "blue");
table.Rows.Add("Pat", "yellow");

this.Controls.Add(dgv); 
```

# django - Django“未找到链接的授权令牌”

> ID：15965046
> 
> 赞同：0
> 
> 时间：2013-04-12T06:59:52.477
> 
> 标签：django, python-2.7, linkedin

这是我第一次使用 LinkedIn API。我正在使用 Django。

我已将来自 github 的 django allauth 添加到我的项目中。

在 settings.py 我已将链接添加到“已安装的应用程序”

我在 Linkedin api 中创建了一个应用程序然后我将用户访问密钥和密钥添加到我的管理阶段。

> ```
> INSTALLED_APPS = (
> 'django.contrib.auth',
> 'django.contrib.contenttypes',
> 'django.contrib.sessions',
> 'django.contrib.sites',
> 'django.contrib.messages',
> 'django.contrib.staticfiles',
> # Uncomment the next line to enable the admin:
> 'django.contrib.admin',
> 'registration',
> 'django.contrib.humanize',
> 'allauth',
> 'allauth.account',
> 'allauth.socialaccount',
> 'allauth.socialaccount.providers.facebook',
> 'allauth.socialaccount.providers.google',
> 'allauth.socialaccount.providers.linkedin', ) 
> ```

```
LOGIN_REDIRECT_URL = '/accounts/Dashboard/'
LOGIN_ERROR_URL = '/accounts/login_error/' 
```

> ```
> TEMPLATE_CONTEXT_PROCESSORS = (
> 'django.contrib.auth.context_processors.auth',    
> "django.core.context_processors.debug",
> "django.core.context_processors.i18n",
> "django.core.context_processors.media",
> "django.core.context_processors.static",
> "django.core.context_processors.request",
> "django.core.context_processors.tz",
> "django.contrib.messages.context_processors.messages",
> "allauth.account.context_processors.account",
> "allauth.socialaccount.context_processors.socialaccount",)
> 
> AUTHENTICATION_BACKENDS = (
> 'django.contrib.auth.backends.ModelBackend',    
> "allauth.account.auth_backends.AuthenticationBackend", 
> ```
> 
> )

网址.py

```
url(r'', include('allauth.urls')), 
```

在我的模板中

```
<a href="{% url socialauth_begin 'linkedin' %}">linkedin</a> 
```

当我尝试通过链接登录时，我的 url 重定向到**“/accounts/profile”**，我收到错误***“我们无法找到授权令牌”。***

任何人都知道为什么我无法获得访问令牌 PIN？

谢谢你。

# android - android中的java.lang.NoClassDefFoundError

> ID：15965052
> 
> 赞同：0
> 
> 时间：2013-04-12T07:00:18.437
> 
> 标签：android, noclassdeffounderror

我在我的项目中将 Sherlock 操作栏库更新为新版本。编译运行logcat后显示NoClassDefFoundError。

我已经检查了 jar 版本。我已经在项目 libs 文件夹中添加了 jar。我还检查了构建路径中的订单和导出选项卡。我也尝试过清理和构建。我仍然收到 NoClassDefFoundError。

我的 LogCat 如下所示

```
 E/AndroidRuntime(9699): java.lang.NoClassDefFoundError: com.mobiotics.tvbuddydemo.TVBuddyMainActivity
 E/AndroidRuntime(9699):    at com.mobiotics.tvbuddydemo.SplashScreen.onCreate(SplashScreen.java:54)
 E/AndroidRuntime(9699):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 E/AndroidRuntime(9699):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
 E/AndroidRuntime(9699):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
 E/AndroidRuntime(9699):    at android.app.ActivityThread.access$1500(ActivityThread.java:123)
 E/AndroidRuntime(9699):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
 E/AndroidRuntime(9699):    at android.os.Handler.dispatchMessage(Handler.java:99)
 E/AndroidRuntime(9699):    at android.os.Looper.loop(Looper.java:123)
 E/AndroidRuntime(9699):    at android.app.ActivityThread.main(ActivityThread.java:3839)
 E/AndroidRuntime(9699):    at java.lang.reflect.Method.invokeNative(Native Method)
 E/AndroidRuntime(9699):    at java.lang.reflect.Method.invoke(Method.java:507)
 E/AndroidRuntime(9699):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
 E/AndroidRuntime(9699):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
 E/AndroidRuntime(9699):    at dalvik.system.NativeStart.main(Native Method) 
```

初始屏幕中的错误行

```
TVBuddyMainActivity.setSuccess(false); 
```

我无法弄清楚早期工作正常的原因

我的主要节日

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.mobiotics.tvbuddydemo"
android:versionCode="1"
android:versionName="1.0" >
<uses-sdk android:minSdkVersion="8" 
    android:targetSdkVersion="15"
    />
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" 
    android:theme="@style/MyTheme" 
    android:screenOrientation="portrait" 
    >
     <activity
        android:name=".SplashScreen"
        android:label="@string/app_name" 
        android:screenOrientation="portrait" 
         >
         <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
     </activity>
            <activity
        android:name=".TVBuddyMain"
        android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
      </activity>
    <activity
        android:name=".CustomSearch"
        android:screenOrientation="portrait" 
        >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
      </activity>

    <activity 
        android:name=".PackageBuilderActivity"
        android:screenOrientation="portrait" 
        >           
    </activity>
      <service
        android:name="com.mobiotics.tvbuddy.data.service.Droid_service"
        android:exported="false" />
</application>
        <uses-permission android:name="android.permission.CAMERA" android:required="false"/>    
    <uses-feature android:name="android.hardware.camera" android:required="false"/>
    <uses-feature android:name="android.hardware.camera.autofocus" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:33:11.037

`com.mobiotics.tvbuddydemo.TVBuddyMainActivity`未在 android 清单文件中声明。

您已声明`android:name=".TVBuddyMain"`不需要。

此外，在活动中访问静态方法并不是一个好主意。

```
TVBuddyMainActivity.setSuccess(false) 
```

通过意图传递该错误值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:06:43.703

如果你使用 jar 文件。不要通过“java Build path”添加。Jar 文件应该在**libs**文件夹中。如果没有 libs 文件夹，请创建它并将您的 jar 文件放在**libs**文件夹中。然后右键单击jar文件并执行构建路径并添加到构建路径。

感谢你

# excel - 如何在忽略缺失值（编码为 999）的同时在 Excel 中将值相加？

> ID：15965056
> 
> 赞同：1
> 
> 时间：2013-04-12T07:00:22.233
> 
> 标签：excel, excel-formula

请考虑以下 Excel 工作表：

```
 A  B   C    D   E    F
---------------------------
1  10  5  999  999  10   25
2   5  1   10  999   5   21
3   5  1  100   1    5  112 
```

我需要的是列的每个单元格中的公式`F`来累加每行的值，同时忽略`999`值。所以通常单元格中的公式`F1`是：

```
=SUM(A1:F1) 
```

但这显然返回 2048，而不是 25。所以我的问题是：什么公式将所有值相加，忽略`999`（缺失）值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T07:08:41.397

Extending from comment (and thanks to @SiddharthRout):

You can use

```
=SUMIF(A1:E1,"<>999") 
```

in column F.

# javascript - 如何从jquery中的多个图标中调用图标？

> ID：15965065
> 
> 赞同：0
> 
> 时间：2013-04-12T07:00:51.740
> 
> 标签：javascript, html, css, jquery, icons

我有这些js代码；

```
 $(document).ready(function() {
      $.getJSON("Stations.php", function(jsonData){  
      $.each(jsonData, function(key,value) {
      $('#selectStation')
     .append($("<option></option>")
     .attr("value",key)
     .text(value.name)); 

  });
 });
 });
function sta_callStation(sel){
  $('#noOfPassengers, #infoOfPassengers, #distType,#distParams').empty();
   $('#sta_numberOfIcons').empty();
    $.getJSON('Stations.php', function(station){

        $.each(station, function(sta_key, sta_value) {

        if(sel.value==sta_key)
        {
          $.each(sta_value.passengers, function(j,passengers) 
        {

          //$('#sta_numberOfIcons').append('<i class="icon-user" ></i>');
          var pas_icon = document.createElement("a");
          pas_icon.className = "icon-user";
          pas_icon.id='id_'+(j);
          pas_icon.setAttribute('href', '#');
          pas_icon.setAttribute('rel', 'popover');
          //alert('id_'+(j));
          document.getElementById('sta_numberOfIcons').appendChild(pas_icon); 

      });
        }
  });

  });
  } 
```

这是一些html部分：

```
Stations
 <select name="selectStation" id="selectStation" onchange="sta_callStation(this);">   
 </select> 
```

首先，当页面加载时，组合框充满了 Station 1 、Station2 等。当我想选择其中一个（指 1、2、3、4 或 5 ）时，我正在调用 sta_callStation 函数。我动态创建人物图标给他们一些属性，例如他们的 id；id_1 ,id_2 等。但是之后我如何在鼠标悬停时触发它们，我应该使用它们的类还是 id？选站前： [https](https://docs.google.com/file/d/0B1RbKsJ4B8eoeW5wdWhLQW85QTQ/edit?usp=sharing) ://docs.google.com/file/d/0B1RbKsJ4B8eoeW5wdWhLQW85QTQ/edit?usp= sharing 选站后（php随机产生乘客） [https://docs.google.com/file/d/ 0B1RbKsJ4B8eoQmYwWVpYbno2NnM/edit?usp=sharing](https://docs.google.com/file/d/0B1RbKsJ4B8eoQmYwWVpYbno2NnM/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:16:47.147

您可以使用一些客户端 UI 框架（例如 Knockout.js）。

如果您想保持您的 UI 相当简单，那么就像您所说的那样，您可以使用人员属性创建类并附加对图标 HTML 元素的引用。创建类的实例时，将 HTML 回调函数链接到您的对象函数。

像这样的东西：

```
var PassInfo = function (name)
{
  name: name,
  onhover: function ()
  {
    // do something special
  }
};

var passInstance = new PassInfo('passenger1');

$(pas_icon).hover(function()
{
  passInstance.onhover();
}); 
```

# python - PyDev 代码分析在 Aptana Studio 中不起作用

> ID：15965066
> 
> 赞同：5
> 
> 时间：2013-04-12T07:01:18.703
> 
> 标签：python, eclipse, aptana, pydev, code-analysis

`Import`我有几个 Python 项目，我使用“ --> `Existing Folder as New Project`”将它们导入 Aptana

导入成功，我可以在 Aptana 中运行和调试脚本。但是，由于某种原因，我无法让 PyDev 的代码分析工作。

`Window`-> `Preferences`-> `PyDev`-> `Editor`->中的所有设置`Code Analysis`似乎都是正确的：

*   `Do code analysis?`被检查
*   `pep8.py`设置为运行并将结果报告为警告

我通过右键单击文件并选择“运行代码分析”来运行它： ![在此处输入图像描述](https://i.stack.imgur.com/lXm0W.png)

以下窗口很快出现，但随后关闭，我看不到任何结果（即“问题”视图中没有任何结果，部分代码下没有红色下划线等）： ![在此处输入图像描述](https://i.stack.imgur.com/WAk7M.png)

知道可能出了什么问题吗？或者我应该在哪里寻找更多关于幕后发生的事情（日志文件等）的详细信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T11:29:15.627

可能您没有正确设置源文件夹（这些文件夹代表您在此项目中的 PYTHONPATH）。有关如何配置的详细信息，请参阅：[http ://pydev.org/manual_101_project_conf.html。](http://pydev.org/manual_101_project_conf.html)

# linux - sed 不匹配的返回值

> ID：15965073
> 
> 赞同：71
> 
> 时间：2013-04-12T07:01:33.787
> 
> 标签：linux, json, sed

我`sed`用于在运行时更新我的​​ JSON 配置文件。有时，当 JSON 文件中的模式不匹配时，`sed`仍会以返回码 0 退出。

`sed`返回 0 表示成功完成，但是如果没有找到正确的模式并更新文件，为什么返回 0 呢？有解决方法吗？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-04-12T07:38:53.443

正如@cnicutar 评论的那样，命令的返回码表示命令是否成功执行。与您在代码/脚本中实现的逻辑无关。

所以如果你有：

```
echo "foo"|sed '/bar/ s/a/b/' 
```

sed 会返回`0`，但如果你写了一些语法/表达式错误，或者输入/文件不存在，sed 无法执行你的请求，sed 将返回 1。

**解决方法**

这实际上不是**解决方法**。sed 有`q`命令：（来自手册页）：

```
 q [exit-code] 
```

在这里，您可以根据需要定义退出代码。例如，如果不存在，`'/foo/!{q100}; {s/f/b/}'`将以代码 100 退出，否则执行替换 f->b 并以代码 0 退出。`foo`

匹配案例：

```
kent$  echo "foo" | sed  '/foo/!{q100}; {s/f/b/}'
boo
kent$  echo $?
0 
```

不匹配案例：

```
kent$ echo "trash" | sed  '/foo/!{q100}; {s/f/b/}'
trash
kent$ echo $?
100 
```

我希望这回答了你的问题。

**编辑**

我必须补充一点，上面的示例仅用于单行处理。我不知道你的具体要求。当你想得到`exit 1`。一行不匹配或整个文件。如果整个文件大小写不匹配，你可以考虑 awk，甚至`grep`在你的文本处理之前做一个......

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2013-04-12T08:13:31.940

这可能对您有用（GNU sed）：

```
sed '/search-string/{s//replacement-string/;h};${x;/./{x;q0};x;q1}' file 
```

如果`search-string`找到它，它将被替换为`replacement-string`并且在文件末尾`sed`将退出并`0`返回代码。如果没有进行替换，则返回码将为`1`.

更详细的解释：

在 sed 中，用户可以使用两个寄存器：将当前行加载到其中的模式空间 (PS)（减去换行符）和一个称为保持空间 (HS) 的备用寄存器，该寄存器最初是空的。

一般的想法是使用 HS 作为标志来指示是否发生了替换。如果 HS 在文件末尾仍然为空，则没有进行任何更改，否则发生了更改。

该命令`/search-string/`与 PS 中的任何内容匹配`search-string`，如果发现它包含`search-string`以下花括号之间的命令，则执行。

首先进行替换`s//replacement-string/`（sed 使用最后一个正则表达式，即`search-string`，如果左侧为空，`s//replacement-string`则与 相同`s/search-string/replacement-string/`），然后`h`命令复制 PS 并将其放入 HS。

sed 命令`$`用于识别文件的最后一行，然后发生以下情况。

首先该`x`命令交换两个寄存器，因此 HS 变为 PS，PS 变为 HS。

然后在 PS 中搜索任何字符`/./`（`.`意味着匹配任何字符），记住 HS（现在是 PS）最初是空的，直到发生替换。如果条件为真，`x`则再次执行`q0`命令，该命令结束所有 sed 处理并将返回码设置为`0`. 否则`x`执行命令并将返回码设置为`1`.

注意虽然`q`退出 sed 处理它不会阻止 PS 被 sed 重新组装并按正常方式打印。

另一种选择：

```
sed '/search-string/!ba;s//replacement-string/;h;:a;$!b;p;x;/./Q;Q1' file 
```

或者：

```
sed '/search-string/,${s//replacement-string/;b};$q1' file 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2016-03-09T19:23:44.867

这些答案都太复杂了。编写一些使用 grep 来确定要替换的东西是否存在然后使用 sed 替换它的 shell 脚本有什么问题？

```
grep -q $TARGET_STRING $file
if [ $? -eq 0 ]
then
    echo "$file contains the old site"
    sed -e "s|${TARGET_STRING}|${NEW_STRING}|g" ....
fi 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-02-25T08:57:25.883

对于**1 行**输入。为避免重复 /pattern/：

当`s`替换成功时，用于`t`有条件地跳转到一个标签，例如`x`。否则使用`q`退出代码退出，例如`100`：

`'s/pattern/replacement/;tx;q100;:x'`

例子：

```
$ echo 1 > one
$ < one sed 's/1/replaced-it/;tx;q1;:x'
replaced-it
$ echo $?
0
$ < one sed 's/999/replaced-it/;tx;q100;:x'
1
$ echo $?
100 
```

[https://www.gnu.org/software/sed/manual/html_node/Branching-and-flow-control.html](https://www.gnu.org/software/sed/manual/html_node/Branching-and-flow-control.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-06-28T06:51:34.247

下面是我们使用`sed -rn`or的模式`sed -r`。

整个搜索和替换命令（“s/.../.../...”）是可选的。如果使用搜索和替换，为了速度并且已经匹配 $matchRe，我们使用尽可能快的 $searchRe 值，使用 . 其中字符不需要重新验证，并且 .{$len} 用于模式的固定长度部分。

none found 的返回值为 $notFoundExit。

```
/$matchRe/{s/$searchRe/$replacement/$options; Q}; q$notFoundExit 
```

出于以下原因：

*   无需浪费时间测试匹配和不匹配的案例
*   无需浪费时间复制到缓冲区或从缓冲区复制
*   没有多余的分支
*   合理的灵活性

改变 Q 命令的大小写会改变行为，具体取决于退出的时间。涉及将布尔逻辑应用于多行输入的行为要求解决方案更加复杂。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-02-05T23:56:51.980

我们有上面的答案，但我花了一些时间才弄清楚发生了什么。我试图为像我这样的 sed 基本用户提供一个简单的解释。

让我们考虑这个例子：

```
echo "foo" | sed  '/foo/!{q100}; {s/f/b/}' 
```

这里我们有两个 sed 命令。第一个是`'/foo/!{q100}'`此命令实际检查模式匹配，`100`如果不匹配则返回存在代码。考虑以下示例，`-n`用于使输出静默，因此我们仅获得现有代码。

此示例 foo 匹配，因此退出代码返回为`0`

```
echo "foo" | sed -n '/foo/!{q100}'; echo $?
0 
```

此示例输入是`foo`，我们尝试匹配，因此不返回`boo`匹配和退出代码`100`

```
echo "foo" | sed  -n '/boo/!{q100}'; echo $?
100 
```

因此，如果我的要求只是检查模式匹配与否，我可以使用

```
echo "<input string>" | sed -n '/<pattern to match>/!{q<exit-code>}' 
```

更多示例：

```
echo "20200206" | sed -n '/[0-9]*/!{q100}' && echo "Matched" || echo "No Match"
Matched

echo "20200206" | sed -n '/[0-9]{2}/!{q100}' && echo "Matched" || echo "No Match"
No Match 
```

第二个命令是`'{s/f/b/}'`替换我多次使用的`f`in 。`foo``b`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-04-05T08:07:07.627

对于**任意数量**的输入行：

```
sed --quiet 's/hello/HELLO/;t1;b2;:1;h;:2;p;${g;s/..*//;tok;q1;:ok}' 
```

在匹配时填充保持空间，并在最后一行之后检查它。`1`如果文件中没有匹配项，则返回状态。

*   `s/hello/HELLO`- 替换检查
*   `t1``1`-如果替换成功则跳转到标签
*   `b2``2`-无条件跳转到标签
*   `:1`- 标签`1`
*   `h`- 复制模式以保留空间（替换成功时）
*   `:2`- 标签`2`
*   `p`- 无条件打印图案空间
*   `${ ... }`- 匹配最后一行，评估里面的块
*   `g`- 将保持空间复制到模式空间（如果之前第一次替换成功，则非空）
*   `s/..*//`- 虚拟替换，设置分支标志
*   `tok`- 跳转到标签`ok`（如果虚拟替换在非空保持空间上成功）
*   `q1`- 以错误状态 1 退出
*   `:ok`- 标签`ok`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-02-02T15:11:13.530

正如我们已经知道的那样，当 sed 匹配失败时，它只是简单地返回其输入字符串——没有发生错误。输入和输出字符串之间的差异确实意味着匹配，但匹配并不意味着字符串之间存在差异；毕竟 sed 可以简单地匹配所有输入字符。该缺陷是在以下示例中创建的

```
h=$(echo "$g" | sed 's/.*\(abc[[:digit:]]\).*/\1/g')    
if [ ! "$h" = "$g" ]; then    
  echo "1"   
else    
  echo "2"    
fi 
```

where`g=Xabc1`给出 1，而 setting`g=abc1`给出 2；然而这两个输入字符串都由 sed 匹配！因此，很难确定 sed 是否匹配。一个解法：

```
h=$(echo "fix${g}ed" | sed 's/.*\(abc[[:digit:]]\).*/\1/g')
if [ ! "$h" = "fix${g}ed" ]; then    
  echo "1"   
else    
  echo "2"    
fi 
```

在这种情况下，如果 sed 匹配，则打印 1。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-11T15:20:07.167

我曾想通过在找到匹配项时退出来截断文件（并排除匹配的行）。当可能重新运行在文件末尾添加行的进程时，这很方便。"Q;Q1" 不起作用，而只是 "Q1" 起作用，如下所示：

如果 sed -i '/text I want to find/Q1' file.txt 然后在文件末尾插入空行 + 新行 fi 只插入没有空行的新行

# java - DataOutputStream 的 writeInt 不起作用

> ID：15965075
> 
> 赞同：1
> 
> 时间：2013-04-12T07:01:41.410
> 
> 标签：java

我已经编写了这个程序来将标记写入名为 的文件`marks.txt`中，但是为什么`dos.writeInt()`将 Ascii 值写入文件中？

```
class Q5marks
{
   public static void main(String a[])throws IOException`
   {
      int marks[]=new int[6]
      File file = new File("marks.txt");
      FileOutputStream fos = new FileOutputStream(file);
      DataOutputStream dos = new DataOutputStream(fos);
      Scanner sc = new Scanner(System.in);
      for(int i = 0;i<6;i++)
      {
        marks[i]=sc.nextInt();
        System.out.println("marks "+(i+1)+" =>" +marks[i]);
        dos.writeInt(marks[i]);
      }
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:10:22.373

> i want to insert 65 65 65 65 65 65 but it writes A A A A A A into the file

Then you should be using [`PrintStream`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html) and not [`DataOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:22:08.483

用 : 替换您的代码`dos.writeBytes(marks[i]+"");`。它应该按您的需要工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T07:04:51.427

它会将数值写入文件，因为您已指定`writeInt`.

~~您可能希望使用：~~

 ~~```
doc.writeChar(marks[i]); 
```~~ 

~~但我不能太确定。你的问题还不够清楚。~~

而是用作 PrintStream。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T07:11:06.737

当您调用`dos.writeInt(marks[i]);`时，不要认为它会以人类可读的格式编写 int（因为普通文本编辑器将所有内容视为 char，因此您的 65 变为 A）。它将写入 int 的字节值。您可以使用 readInt() 方法再次读取文件。

编辑：如果您想要它应该编写 int 显示您可以使用普通文本编辑器读取它，然后使用使用 FileWriter 而不是 DataOutputStream 的流动代码。并且不要忘记关闭作者。

```
class Q5marks
 {
  public static void main(String a[])throws IOException
   {
  int marks[]=new int[6];
  File file = new File("marks.txt");
  FileOutputStream fos = new FileOutputStream(file);
  FileWriter writer=new FileWriter(file);
  Scanner sc = new Scanner(System.in);
  for(int i = 0;i<6;i++)
  {
    marks[i]=sc.nextInt();
    System.out.println("marks "+(i+1)+" =>" +marks[i]);
    writer.write(String.valueOf(marks[i])+" ");//a space is added to increase the readability 
  }
  writer.close();
} 
```

}

# haskell - 在haskell中交换嵌套列表

> ID：15965081
> 
> 赞同：2
> 
> 时间：2013-04-12T07:02:02.967
> 
> 标签：haskell, nested-lists, hotswap

我想交换一个列表`(1,3,[2,4],5,[7,12,[14]])`

我知道在 haskell 类型的列表中应该是相同的，所以我很困惑我该怎么做。

我应该使用其他数据结构吗？或者我应该定义另一种数据类型？

例如交换 2 3 (1,3,[2,4],5,[7,12,[14]]) ==> (1,3,5,[2,4],[7,12,[ 14]])

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:23:15.367

事实上，这样的列表是不可能的，它确实是你正在看的一棵树，例如像这样的东西。

```
data NestedList a = Leaf a | Node [NestedList a] 
```

现在你必须想想你真正的意思是什么`swap`。你可以交换顶级列表，你可以交换叶子和......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:34:15.363

在您的情况下，它不是一个列表，而是一个元组。元组是异构容器，这就是为什么它们内部可能存在不同类型的原因。然而，在元组中交换元素是不可能用通用的方式编写的，至少使用标准的 Haskell 是不可能的。我建议对 Bryan 指出的数据进行操作。

# python-3.x - centOS 6.3 上的 ipython3

> ID：15965082
> 
> 赞同：0
> 
> 时间：2013-04-12T07:02:06.340
> 
> 标签：python-3.x, centos, ipython, centos6

有没有人在 centOS 6.3 中使用过 ipython3 ？我安装了 ipython（python2.6），但似乎我无法将它与 python3 一起使用，fedora 18 似乎有一个错误 [https://bugzilla.redhat.com/show_bug.cgi?id=784947](https://bugzilla.redhat.com/show_bug.cgi?id=784947)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-26T21:50:14.680

我做到了，方法如下：

*   将**python3**安装到 /opt/python3/ 与

    *   `yum install openssl-devel bzip2-devel expat-devel gdbm-devel readline-devel sqlite-devel`
    *   `wget http://www.python.org/ftp/python/3.3.2/Python-3.3.2.tar.bz2`
    *   `bzip2 -cd Python-3.3.2.tar.bz2 | tar xvf -`
    *   `cd Python-3.3.2 && ./configure --prefix=/opt/python3`
    *   `make && make install`
    *   `ln -s /opt/python3/bin/python3 /usr/bin/python3`

    *   安装**分发**

    *   `wget http://pypi.python.org/packages/source/d/distribute/distribute-0.6.43.tar.gz#md5=a216a46dc9bec5835fa3c6041f1c77c2`

    *   `tar xvf distribute-0.6.43.tar.gz && cd distribute-0.6.43 && python3 setup.py install`

    *   一点点**也**不会伤害：

    *   `cd /opt/pytnon3/bin && ./easy_install pip`

    *   最后，输入**ipython3**：

    *   `cd ~ && wget pypi.python.org/packages/source/i/ipython/ipython-0.13.2.tar.gz#md5=ead3b7eb70c653b537fb9d96d71b8b2a`

    *   `tar xvf ipython-0.13.2.tar.gz && cd ipython-0.13.2`
    *   `python3 setup.py install`

正如它在网络上随处指出的那样，`python 2`被使用`yum`并且您不想破坏它，因此您`python3`小心地将其放在一边。

```
[root@terras bin]# cat /etc/*release*
CentOS release 6.4 (Final)
CentOS release 6.4 (Final)
CentOS release 6.4 (Final)
cpe:/o:centos:linux:6:GA

[root@terras bin]# ls -la /opt/python3/bin/ipython3
-rwxr-xr-x. 1 root root 307 May 27 03:18 /opt/python3/bin/ipython3

[root@terras bin]# ./ipython3
Python 3.3.2 (default, May 26 2013, 23:38:41)
Type "copyright", "credits" or "license" for more information.

IPython 0.13.2 -- An enhanced Interactive Python.
?         -> Introduction and overview of IPython's features.
%quickref -> Quick reference.
help      -> Python's own help system.
object?   -> Details about 'object', use 'object??' for extra details.

In [1]: 
```

# java - 如何在 h2 数据库中设置用户定义的变量？

> ID：15965083
> 
> 赞同：0
> 
> 时间：2013-04-12T07:02:09.123
> 
> 标签：java, h2

我正在尝试使用 Java 中的 H2 数据库设置用户定义的变量。

当我设置一个带有`NULL`值的变量时，它工作正常。但是当我尝试定义一个变量`0`作为初始值时，我得到了这个错误：

> org.h2.jdbc.JdbcSQLException：
> 
> SQL 语句“ `SET @ROWNUM[*]=0;` ”中的语法错误；预期的“标识符”；

SQL 语句：

```
SET @rowNum=0; [42001-171] 
```

我的代码：

```
SET @rowNum=0;       // gives error
SET @townroute=NULL; // works fine 
```

如何将整数值设置为变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:14:25.063

[`ROWNUM`](http://h2database.com/html/functions.html#rownum)是一个内置函数，你不能给它赋值。您将需要使用其他名称，例如`ROW_NUM`.

# c# - 编码的 ui 测试无法在层次结构中找到日期时间选择器

> ID：15965096
> 
> 赞同：1
> 
> 时间：2013-04-12T07:02:40.047
> 
> 标签：c#, coded-ui-tests

我在一个表单中有 3 个日期时间选择器。我想选择^(第二)个日期时间选择器，但在播放时它总是选择层次结构中的第一个^(日期)时间选择器。我试过提供所有搜索属性，但没有成功。

有解决办法吗？

# jquery - 使用 Jquery 调用 Servlet

> ID：15965112
> 
> 赞同：0
> 
> 时间：2013-04-12T07:03:30.297
> 
> 标签：jquery, servlets

我正在尝试使用 Jquery 从 servlet 中检索

```
$(document).ready(function() {
    $("#mybutton").click(function(event) {
        alert('1');
        $.get("http://localhost:8888/ntlm/getuser", function(data) {
            alert('data ' + data);
            $(".errorMssg").text("Data Loaded: " + data);
            alert('data ' + data);
        });
        return true;
    });
}); 
```

在 GetUser servlet 我有

```
public void doGet(HttpServletRequest request, 
                  HttpServletResponse response) throws ServletException, 
                                                       IOException {
    response.setContentType(CONTENT_TYPE);
            response.setContentType("text/html");
    PrintWriter out = response.getWriter();
    out.print("Authenticating?");
}

protected void doPost(HttpServletRequest request, 
                      HttpServletResponse response) throws ServletException, 
                                                           IOException {
    doGet(request, response);
} 
```

如果我直接访问`http://localhost:8888/ntlm/getuser`，我可以看到输出，但是当我使用 Jquery 调用时，看不到输出。

这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:16:42.527

要执行跨域请求，例如`http://localhost:8888/ntlm/authenticate`从 提供的网页的请求`http://192.168.1.2:8988`，您将需要启用[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)或使用 JSONP。

[jQuery JSONP](https://stackoverflow.com/questions/2681466/jsonp-with-jquery)。

# spring-mvc - CloudFoundry 中的 Dose Spring MVC 应用程序支持扩展 ViewResolver

> ID：15965116
> 
> 赞同：0
> 
> 时间：2013-04-12T07:03:53.873
> 
> 标签：spring-mvc, cloud-foundry

当我想在 Spring MVC 应用程序中使用 Rythm 模板（[https://github.com/greenlaw110/Rythm](https://github.com/greenlaw110/Rythm)）时，我使用 spring-webmvc-rythm-template（[https://github.com/lawrence0819/spring-web -节奏模板](https://github.com/lawrence0819/spring-web-rythm-template)）。我将应用程序发布到我自己的 eclipse 中的 tomcat 或 STS 中的 tc 服务器，它工作正常。但是当我将应用程序发布到 CF 时，即使我注释了默认的 jsp 解析器，扩展的 rythmResolver 也无法再次工作。所以我想知道大家是否知道CF是否支持SpringMVC app的自定义扩展ViewResolver？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:30:54.913

Ennn ....我想我在这个问题上犯了一些错误。这是一个伪问题。仅仅因为我在一个地方使用了特定于操作系统的分隔符，导致在 CF 服务器中找不到该文件。所以该方法一直返回false。这个问题已经解决了。

# php - 从字符串中随机设置 xml 中的属性值

> ID：15965117
> 
> 赞同：0
> 
> 时间：2013-04-12T07:03:59.140
> 
> 标签：php, xml, dom, for-loop

我在文本文件中有一个字符串。
我正在尝试从此文件中获取文本并推送到 xml 属性值。
这是我的代码：-

```
<?php
$region = file_get_contents('activity.text');
$arr1 = explode(',',$region);
$arr1[array_rand($arr1)];
$ran1 = $arr1;

// create doctype
$dom = new DOMDocument("1.0");

// display document in browser as plain text 
// for readability purposes
header("Content-Type: text/plain");
// create root element
$root = $dom->createElement("products");
$dom->appendChild($root);

//for($i=0,$j=351;$i<count($arr1);$i++,$j++)
for($i=0;$i<2;$i++)
{
$pro_id = $dom->createElement("product_id");
$root -> appendChild($pro_id);
//append attribute ib product_id
$attpro = $dom->createAttribute("value");
$pro_id -> appendChild($attpro);
//append attribue value in product_id
$attval = $dom->createTextNode($i+1);
$attpro -> appendChild($attval);

// create child dist_region
$dist_region = $dom->createElement("dist_region");
$pro_id->appendChild($dist_region);
// create attribute node
$attreg = $dom->createAttribute("value");
$dist_region->appendChild($attreg);
// create attribute value node
$attval = $dom->createTextNode("$ran1[$i]");
$attreg->appendChild($attval);

}
echo $dom->saveXML();
?> 
```

这是我的字符串（region.txt）：-

```
10066,10067,10068,10069,10070,10071,10072,5 
```

在这里，我尝试将字符串中的文本作为属性值随机推送到 xml 文件中，我的代码输出是：-

```
<products>
    <product_id value="1">
        <dist_activity value="10066"/>
        <dist_activity value="10066"/>
    </product_id>
    <product_id value="2">
        <dist_activity value="10067"/>
        <dist_activity value="10067"/>
    </product_id>
</products> 
```

我想要输出这种类型的东西： -

```
<?xml version="1.0"?>
<products>
    <product_id value="1">
        <dist_activity value="10066"/>
        <dist_activity value="10069(any thing not same)"/>
    </product_id>
    <product_id value="2">
        <dist_activity value="10067"/>
        <dist_activity value="10072(any thing not same)"/>
    </product_id>
</products> 
```

从字符串中随机获取属性值
谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:18:01.240

我认为您的问题更多是将值按所需顺序而不是添加 XML 元素。一些提示：

*   您可以使用`shuffle()`来随机化整个数组。见[http://php.net/shuffle](http://php.net/shuffle)
*   您可以使用`array_chunk()`来制作一组两个值。见[http://php.net/array_chunk](http://php.net/array_chunk)

代码示例：

```
$values = explode(',', '10066,10067,10068,10069,10070,10071,10072,5');

shuffle($values);

$groups = array_chunk($values, 2);
print_r($groups);

$count = count($groups);

foreach ($groups as $index => $group)
{
    $last = $index+1 === $count;
    printf(" %s─ product_id: %d\n", $last ? '└' : '├', $index + 1);

    foreach ($group as $subindex => $value)
    {
        printf(" %s   %s─ dist_activity: %s\n", $last ? ' ' : '│', $subindex ? '└' : '├', $value);
    }
    if (!$last) print(" │\n");
} 
```

输出：

```
Array
(
    [0] => Array
        (
            [0] => 10069
            [1] => 10068
        )

    [1] => Array
        (
            [0] => 10072
            [1] => 10067
        )

    [2] => Array
        (
            [0] => 5
            [1] => 10070
        )

    [3] => Array
        (
            [0] => 10071
            [1] => 10066
        )

)
 ├─ product_id: 1
 │   ├─ dist_activity: 10069
 │   └─ dist_activity: 10068
 │
 ├─ product_id: 2
 │   ├─ dist_activity: 10072
 │   └─ dist_activity: 10067
 │
 ├─ product_id: 3
 │   ├─ dist_activity: 5
 │   └─ dist_activity: 10070
 │
 └─ product_id: 4
     ├─ dist_activity: 10071
     └─ dist_activity: 10066 
```

[在行动中看到它。](http://eval.in/16120)

# java - 没有html表单的文件上传Java

> ID：15965124
> 
> 赞同：-3
> 
> 时间：2013-04-12T07:04:29.667
> 
> 标签：java, file, upload

我目前正在开发一个用 Java 编写的桌面应用程序，用户将在其中将文件上传到某个位置。我是Java的初学者，我想知道如何制作文件上传部分。我在 Internet 上寻找解决方案，但它们似乎都使用 html 表单和 Java servlet。如果可能的话，我希望在没有 html 代码的情况下上传文件，因为我的应用程序不会在浏览器上运行，它将是一个桌面应用程序。用 Java（没有 html）编写的文件上传示例会很棒。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:06:47.310

如果是 Swing 应用程序，使用文件选择器选择文件并通过套接字将其传输到服务器。连接到服务器，打开输出流并传输文件数据。而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:09:35.553

您可以使用[`JFileChooser`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFileChooser.html)让用户选择文件，然后使用 FTP 客户端（例如 Apache 的）[`FTPClient`](http://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html)在某些 FTP 服务器上上传项目。

# mysql - 如何在 Joomla 1.5 中创建 SQL 事务？

> ID：15965125
> 
> 赞同：1
> 
> 时间：2013-04-12T07:04:39.327
> 
> 标签：mysql, joomla1.5

我已经在 J​​oomla 中成功创建了一个组件，用户可以在其中更新数据库内容。问题是我有两个查询要执行，如果第二个查询失败，第一个查询所做的更改应该被丢弃。我已经尝试过这些代码，但它并没有让我回滚：

```
 $db = JFactory::getDBO();

    $db->setQuery("BEGIN");
    $db->query();
    $db->setQuery($delete_script);
    $db->query();
    $db->setQuery($update_script);
    $db->query();

    if($db->getErrorMsg())
    {
        $db->setQuery("ROLLBACK");
        $db->query();
        JFactory::getApplication()->enqueueMessage(JText::_($sql_script . 'An error occurred while saving loan types. Please check formatting and try again.'), 'error');
    }
    else
    {
        $db->setQuery("COMMIT");
        $db->query();
        JFactory::getApplication()->enqueueMessage(JText::_('Loan types have been saved successfully!'), 'message');

    }

    JRequest::setVar( 'view', 'loantypes' );
    parent::display(); 
```

那么如何在 Joomla 1.5 中创建事务呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:09:11.897

You should perform like this:

```
$db = JFactory::getDBO();

$db->setQuery("BEGIN");
$db->query();

$db->setQuery($delete_script);
$db->query();
if($db->getErrorMsg()) {
    $db->setQuery("ROLLBACK");
    $db->query();
    JFactory::getApplication()->enqueueMessage(JText::_($sql_script . 'An error occurred while saving loan types. Please check formatting and try again.'), 'error');
}
$db->setQuery($update_script);
$db->query();

if(!$db->getErrorMsg()) {
    $db->setQuery("COMMIT");
    $db->query();
    JFactory::getApplication()->enqueueMessage(JText::_('Loan types have been saved successfully!'), 'message');

}

JRequest::setVar( 'view', 'loantypes' );
parent::display(); 
```

Rollback must be performed on recent executed query.

# ruby-on-rails - 设计的控制器在哪里？如何在用户/编辑页面中添加来自其他模型的数据？

> ID：15965127
> 
> 赞同：2
> 
> 时间：2013-04-12T07:04:46.830
> 
> 标签：ruby-on-rails, ruby-on-rails-3

似乎设计没有在 app/controller 文件夹中创建任何控制器文件，现在我希望在用户/编辑视图中显示来自其他模型的一些自定义信息，但由于没有要添加的控制器，因此无法弄清楚如何做到这一点

```
@num_of_cars = current_user.num_of_cars.all 
```

我希望在用户/编辑页面中显示 num_of_cars 但无法弄清楚如何做到这一点

编辑 - 下面提到的代码给了我错误，我将此代码放在我的设计/注册/编辑文件中

```
<%= render partial: 'myinfo/cars_list' %> 
```

其中 myinfo 是另一个具有部分 _cars_list.html.erb 的资源，/myinfo 脚手架工作得非常好，但是当我尝试将该部分显示到用户/编辑中时，它给了我

```
undefined method `each_with_index' for nil:NilClass 
```

（我正在使用 each_wit_index 来显示列表，但我认为这不是问题）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T07:10:01.883

Override the Devise sessions controller actions:

```
# app/controllers/sessions_controller.rb
class SessionsController < Devise::SessionsController

  def edit
    # add custom logic here
    @num_of_cars = current_user.num_of_cars.all 
    super
  end

end 
```

Register the controller:

```
# app/config/routes.rb
devise_for :users, :controllers => {:sessions => "sessions"} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T07:22:20.747

您可以为handel 创建新的控制器`devise/registration/edit`

这是`controller/passwords_controller.rb`

```
class PasswordsController < Devise::RegistrationsController
  before_filter :authenticate_user!
  def edit
    @num_of_cars = current_user.num_of_cars.all
    super
  end

  def update
    @user = current_user
    # raise params.inspect
    if @user.update_with_password(params[:user])
      sign_in(@user, :bypass => true)
      redirect_to user_path, :notice => "Password has been change!"
    else
      render :edit,:locals => { :resource => @user, :resource_name => "user" }
    end
  end
end 
```

这是routes.rb

```
devise_scope :user do
 get '/edit_password' => 'passwords#edit', :as => :change_password
 put '/change' =>  'passwords#update'
end 
```

最后你可以复制`devise/registrations/edit.html.erb`到`passwords/edit.html.erb`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T11:07:25.597

在您的情况下，您不必覆盖设计控制器。你可以更换

```
<%= render partial: 'myinfo/cars_list' %> 
```

和

```
<%= render partial: 'myinfo/cars_list', :locals => { :num_of_cars => current_user.num_of_cars.all } %> 
```

在您的设计/注册/编辑页面中。然后在“myinfo/cars_list”部分中使用“num_of_cars”变量而不是“@num_of_cars”应该可以解决您的问题。

# c# - 如何在 windows phone 中绑定不同大小的列表框中的数据 - 2

> ID：15965129
> 
> 赞同：0
> 
> 时间：2013-04-12T07:04:53.030
> 
> 标签：c#, windows-phone-7, xaml

是否可以在 Listbox 中以不同的 2 大小绑定数据？

我想在 Windows Phone 中使用单击并按住事件以下列格式显示列表框绑定数据。

![在此处输入图像描述](https://i.stack.imgur.com/xgjcV.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:13:09.990

这个有可能。您需要创建两个不同的 DataTemplates 并使用 DataTemplateSelector 的[技巧](http://www.geekchamp.com/articles/implementing-windows-phone-7-datatemplateselector-and-customdatatemplateselector)

将一个[Windows Phone Toolkit](http://phone.codeplex.com/)添加到您的项目中，并定义一个列表框，如下所示：

```
<ListBox Source="{ set your binding here}">
    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <toolkit:WrapPanel/>
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
    <ListBox.ItemsPannel>
   <ListBox.ItemTemplate>
      define your DataTemplates and dataTempleteSelectors here
   </ListBox.ItemTemplate> 
```

# javascript - 模态弹出 javascript

> ID：15965130
> 
> 赞同：1
> 
> 时间：2013-04-12T07:04:55.003
> 
> 标签：javascript, popup, modal-dialog

大家好，我的页面中有一个 div，它代表一个弹出窗口。我在窗口内有一个按钮。单击按钮时，我需要调用一个 javascript 函数。（我只需要在客户端执行此操作，而不是在服务器中执行此操作）。如果验证成功，则弹出窗口可以关闭。如果没有，它应该显示一条警告消息并**STAY THERE INSTEAD OF CLOSING**。仅当验证成功时，我才需要关闭弹出窗口。否则，它应该显示一个警报并留下来。我如何让它留下来？以下是我的代码。

**div结构**：

```
<script type="text/javascript">

     $(function () {
                    $("#dialog:ui-dialog").dialog("destroy");
                    $('#TimeslotGroup').dialog({
                        autoOpen: false,
                        draggable: false,
                        resizable: false,
                        bgiframe: false,
                        modal: true,
                        width: 700,
                        title: "Timeslot Group Entry",
                        open: function (type, data) {
                            $(this).parent().appendTo("form");
                        }
                    });
                });
                function showDialog(id) {
                    $('#' + id).dialog("open");
                }

                function closeDialog(id) {
                    $('#' + id).dialog("close");
                    $("#dialog:ui-dialog").dialog("destroy");
                }
                //getter
                var modal = $(".selector").dialog("option", "modal");
                //setter
                $(".selector").dialog("option", "modal", true);

             </script>
            <script type="text/javascript">
                Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(function (evt, args) {
                    $('#TimeslotGroup').dialog({
                        autoOpen: false,
                        draggable: false,
                        resizable: false,
                        bgiframe: false,
                        modal: true,
                        width: 500,
                        title: "Timeslot Group Entry",
                        open: function (type, data) {
                            $(this).parent().appendTo("form");
                        }
                    });
                });
             </script><div id="TimeslotGroup" class="ui-widget-overlay" style="overflow-y: scroll;"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:26:18.290

使用[beforeClose](http://api.jqueryui.com/dialog/#event-beforeClose)事件

```
$( "#dialog" ).dialog({
    beforeClose: function(e, ui){
        if(!valid){
            return false;
        }
    }
}); 
```

# asp.net - 使用 autofac AutofacWebTypesModule 时 User.Identity.Name 为空

> ID：15965131
> 
> 赞同：1
> 
> 时间：2013-04-12T07:05:03.760
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, autofac

我正在使用`ASP.NET MVC 4`和`Autofac`。我有一个`WebWorkContext`类，我在我的解决方案的各个地方注入了一个类，以获取当前员工的详细信息。

这是我的 global.asax 文件中的 Autofac 注册：

```
protected void Application_Start()
{
     // Autofac
     ContainerBuilder builder = new ContainerBuilder();

     builder.RegisterModule(new AutofacWebTypesModule());

     builder.RegisterControllers(Assembly.GetExecutingAssembly());

     builder.RegisterType<WebWorkContext>().As<IWorkContext>().InstancePerHttpRequest();

     IContainer container = builder.Build();
     DependencyResolver.SetResolver(new AutofacDependencyResolver(container));
} 
```

我的 WebWorkContext 类：

```
public class WebWorkContext : IWorkContext
{
     private readonly IEmployeeService employeeService;
     private readonly HttpContextBase httpContext;

     public WebWorkContext(IEmployeeService employeeService, HttpContextBase httpContext)
     {
          this.employeeService = employeeService;
          this.httpContext = httpContext;
     }

     public Employee CurrentEmployee
     {
          get
          {
               return GetCurrentEmployee();
          }
     }

     protected Employee GetCurrentEmployee()
     {
          string identityName = this.httpContext.User.Identity.Name.ToLower();

          // Do what I need to do to get employee details from
          // the database with identityName
     }
} 
```

我会在以下位置设置一个断点：

```
string identityName = this.httpContext.User.Identity.Name.ToLower(); 
```

`identityName`总是空的。不知道为什么？我错过了什么吗？

我如何使用 WebWorkContext 类：

```
public class CommonController : Controller
{
     private readonly IWorkContext workContext;

     public CommonController(IWorkContext workContext)
     {
          this.workContext = workContext;
     }

     public ActionResult EmployeeInfo()
     {
          Employee employee = workContext.CurrentEmployee;

          EmployeeInfoViewModel viewModel = Mapper.Map<EmployeeInfoViewModel>(employee);

          return PartialView(viewModel);
     }
} 
```

我正在使用`Visual Studio 2012`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:20:32.553

该网站使用 Visual Studio 2012 附带的 IIS。我不知道我需要禁用匿名身份验证并在 Web 项目本身上启用 Windows 身份验证。现在可以了。如果其他人有同样的问题，以下是我遵循的步骤：

IIS 快递

*   在解决方案资源管理器中单击您的项目以选择该项目。
*   如果“属性”窗格未打开，请将其打开 (F4)。
*   在项目的“属性”窗格中：

    *   将“匿名身份验证”设置为“禁用”。
    *   将“Windows 身份验证”设置为“启用”。

# facebook - Facebook 应用程序无限循环尝试从画布上登录

> ID：15965133
> 
> 赞同：2
> 
> 时间：2013-04-12T07:05:12.613
> 
> 标签：facebook, facebook-graph-api, openid, facebook-oauth

[当我尝试从http://apps.facebook.com/myapp（FB](http://apps.facebook.com/myapp)画布）访问我的应用程序时，它工作正常。但是，如果我直接从[http://myapp.herokuapp.com](http://myapp.herokuapp.com)（画布外）进行操作，则在输入我的 FB 凭据后，它会陷入 URL 参数“状态”和“代码”不断变化的循环中。

在 FB 应用配置中，画布 URL 和站点 URL 都是[http://myapp.herokuapp.com](http://myapp.herokuapp.com)。

可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:05:23.437

有人遇到了同样的问题，并在上​​面发表了一篇博文：

[http://thinkdiff.net/facebook/facebook-apps-infinite-redirection-solution/](http://thinkdiff.net/facebook/facebook-apps-infinite-redirection-solution/)

可能是配置问题。

也尝试更新您的 sdk。

清除缓存和 cookie。

# openx - Openx 2.8.10 视频在 Joomla 中逐步添加

> ID：15965139
> 
> 赞同：4
> 
> 时间：2013-04-12T07:05:43.110
> 
> 标签：openx, joomla3.0

我已按照本[教程](http://www.openx.com/docs/2.8/userguide/banners+video+ads)使用 OpenX 创建视频广告。我在 OpenX 平台中创建它。现在，我不知道该怎么做才能在我的 Joomla 网站上调用这个视频。[我在此站点](http://www.longtailvideo.com/video-ads/)下载了 JW Player 的 Open Ad Streamer 插件。

要查看我的视频添加到我的网站，我需要使用以下格式在我的区域中放置一些代码： ![在此处输入图像描述](https://i.stack.imgur.com/jZrro.jpg)

是否有任何教程逐步将内嵌视频广告放入您自己的网站（Joomla）？Joomla 中 OpenX 横幅的最佳组件是什么？

# javascript - 在 Sharepoint 2010 中 Visual Web Part 的 Page_Load 方法之前执行 Javascript

> ID：15965141
> 
> 赞同：0
> 
> 时间：2013-04-12T07:05:49.650
> 
> 标签：javascript, jquery, asp.net, sharepoint, sharepoint-2010

> 我需要获取屏幕尺寸，并根据结果需要在页面上显示图像。ascx.cs 文件代码：

```
<script type="text/javascript">
    var width = 0;
    width = screen.width;

    $('#<%= clientScreenWidth.ClientID %>').val(width);
    alert(width); </script>  
 <asp:HiddenField ID="clientScreenWidth" runat="server" /> 
```

> 在 Page_Load 方法中的 .cs 文件上，我试图访问 Hiddenfield 的值，但值为“”，因为一旦加载页面，javascipt 就会运行。有没有办法强制 javascript 在页面加载之前运行。我可以在 StackOverFlow 和博客上看到很多这样的问题，但是因为我正在使用 sharepoint 2010 并且没有像`<body>`所有这样的标签，所以没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:11:18.127

Page_Load 将始终在脚本日志之前调用，您需要在 Web 部件中放置一个带有加载消息的时间，并在 Timer_Tick 中绑定您的共享点 Web 部件。这样，您将在隐藏字段中获取数据。

如果您想知道更好的方法，请访问：http: [//51degrees.codeplex.com/](http://51degrees.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T03:46:44.080

理想情况下，您将使用 JavaScript 显示/隐藏图像，因为此时您将获得屏幕尺寸信息，并且不需要再次往返服务器。

如果您想继续使用 C# 中的逻辑，您可以让 JS 在分配字段后启动回发，使用 ajax 调用重新加载页面的一部分，或者使用添加的查询字符串重新加载页面。然而，所有这些都需要再次往返服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T04:32:28.087

试着把你放在下面 在你的例子中，你引用的东西甚至还不存在。

# jquery - 使用 Next/Previous 按钮添加滚动到水平 UL 列表

> ID：15965145
> 
> 赞同：0
> 
> 时间：2013-04-12T07:06:14.210
> 
> 标签：jquery, html-lists, horizontal-scrolling

我想将下一个/上一个按钮添加到我的水平滚动列表中。我关注了这篇文章：[Using jQuery to add scrolling to a flat UL list](https://stackoverflow.com/questions/7715356/using-jquery-to-add-scrolling-to-a-flat-ul-list)

但这对我不起作用，请检查这个小提琴：http: [//jsfiddle.net/PrasadJadhav/45zyu/3/](http://jsfiddle.net/PrasadJadhav/45zyu/3/)

我尝试使用：

```
ul {
    white-space: nowrap;
} 
```

我不希望滚动条出现在完整列表中，方法是：

```
overflow : scroll;
/* OR */
overflow : auto; 
```

有没有可以解决这个问题的jquery插件？

**更新：**
我们可以这样做：http: [//jsfiddle.net/2Hr4U/](http://jsfiddle.net/2Hr4U/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:15:02.610

你期待像

[http://jsfiddle.net/45zyu/4/](http://jsfiddle.net/45zyu/4/)

```
.tabmenu {position: absolute; top: 40px; left: 0px; width:500px;height:30px; border:1px olid green; white-space: nowrap; height: 50%; overflow: auto; }

.tabmenu ul {list-style: none;  white-space: nowrap; margin:0px;  display: inline-block;}

.tabmenu ul li { display: inline-block; float: left; position: relative; background: #4b6592 }
.tabmenu ul li a { display: inline-block; color: #fff; }

.tabmenu ul li a span { display: block; padding: 9px 15px 9px 10px;  font-size: 10px; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:19:23.453

或者，如果您只想要一个可以设置样式的小插件形式的自定义滚动条，我会推荐这个：http: [//jamesflorentino.github.io/nanoScrollerJS/](http://jamesflorentino.github.io/nanoScrollerJS/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T09:16:03.200

我找到了使用这个插件的解决方案： [Smooth Div Scroll。](http://www.smoothdivscroll.com/)

检查这个工作小提琴：http: [//jsfiddle.net/PrasadJadhav/2Hr4U/804/](http://jsfiddle.net/PrasadJadhav/2Hr4U/804/)

我使用了以下代码：

```
$("div.tabmenu").smoothDivScroll(); 
```

# python - 仅当尚未设置值时才在 dict 中设置值

> ID：15965146
> 
> 赞同：14
> 
> 时间：2013-04-12T07:06:15.737
> 
> 标签：python, dictionary, lazy-evaluation

如果尚未设置值，那么在 a 中设置值的最*Pythonic方法是什么？*`dict`

目前我的代码使用 if 语句：

```
if "timeout" not in connection_settings:
    connection_settings["timeout"] = compute_default_timeout(connection_settings) 
```

`dict.get(key,default)`适用于使用 dict 的代码，不适用于准备将 dict 传递给另一个函数的代码。你可以用它来设置一些东西，但它并不漂亮：

```
connection_settings["timeout"] = connection_settings.get("timeout", \
    compute_default_timeout(connection_settings)) 
```

即使字典包含密钥，也会评估计算函数；漏洞。

Defaultdict 是默认值相同时。

当然，很多时候你将不需要计算的原始值设置为默认值，它们当然可以使用`dict.setdefault`. 但是更复杂的情况呢？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-12T07:15:59.910

[`dict.setdefault`](http://docs.python.org/library/stdtypes.html#dict.setdefault)将精确地“仅在尚未设置值的情况下在 dict 中设置值”。

您仍然需要计算值以将其作为参数传递：

```
connection_settings.setdefault("timeout", compute_default_timeout(connection_settings)) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-12T07:10:36.250

这有点无法回答，但我想说最pythonic的是你拥有的if语句。你抵制了用单线`__setitem__`或其他方法对其进行处理的冲动。由于现有但错误的值，您已经避免了逻辑中可能出现的错误，这些错误可能在尝试巧妙地使用短路`and`/`or`黑客攻击时发生。很明显，不需要时不会使用计算功能。

它清晰、简洁、易读 - *pythonic*。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-12T07:09:07.060

One way to do this is:

```
if key not in dict:
  dict[key] = value 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-13T10:47:14.930

从**Python 3.9**开始，您可以使用*合并运算符* `|`来合并两个字典。右边的 dict 优先：

```
d = { key: value } | d 
```

注意：这会创建一个包含更新值的新字典。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T07:16:38.630

我正在使用以下内容将 kwargs 修改为非默认值并传递给另一个函数：

```
def f( **non_default_kwargs ):

    kwargs = {
        'a':1,
        'b':2,
    }
    kwargs.update( non_default_kwargs )

    f2( **kwargs ) 
```

这具有以下优点

*   您不必键入两次密钥

*   一切都在一个函数中完成

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T07:21:25.527

您可能需要`dict.setdefault`：

创建一个新字典并设置一个值：

```
>>> d = {}
>>> d.setdefault('timeout', 120)
120
>>> d
{'timeout': 120} 
```

如果已经设置了一个值，`dict.setdefault`则不会覆盖它：

```
>>> d['port']=8080
>>> d.setdefault('port', 8888)
8080
>>> d
{'port': 8080, 'timeout': 120} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-11T13:30:01.913

@Rotareti 的回答让我想知道对于旧版本的 Python 3.9，我们是否可以这样做：

```
>>> dict_a = {'a': 1 }
>>> dict_a = {'a': 3, 'b': 2, **dict_a}
>>> dict_a

{'a': 1, 'b': 2} 
```

（嗯，它在 Python3.7 上肯定可以工作，但是这种 Pythonesque 够吗？）

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-06-15T22:51:27.673

`.get()`我发现利用 dict方法的返回值`None`(Falsy)既方便又明显，并且`or`如果密钥不存在，则推迟对昂贵的网络请求的评估。

```
d = dict()

def fetch_and_set(d, key):
    d[key] = ("expensive operation to fetch key")
    if not d[key]:
        raise Exception("could not get value")
    return d[key]

...

value = d.get(key) or fetch_and_set(d, key) 
```

* * *

具体而言，就我而言，我正在从缓存中构建一个*新*`fn()`字典，然后在加快调用后更新缓存。

这是我使用的简化视图

```
j = load(database)  # dict
d = dict()

# see if desired keys are in the cache, else fetch
for key in keys:
    d[key] = j.get(key) or fetch(key, network_token)

fn(d)  # use d for something useful

j.update(d)  # update database with new values (if any) 
```

# iphone - “代码签名错误：未找到包含任何钥匙串签名证书的未过期配置文件”

> ID：15965149
> 
> 赞同：1
> 
> 时间：2013-04-12T07:06:21.837
> 
> 标签：iphone, ios, xcode, ipad

我的所有新项目都有问题。如果我尝试“存档”以提交到应用商店，我会收到此错误`"Code Sign error: No unexpired provisioning profiles found that contain any of the keychain's signing certificates"`。但是，如果我尝试归档我的任何旧项目，它们就可以正常工作。我注意到两个项目中的代码符号选项不同：

工作项目：

![在此处输入图像描述](https://i.stack.imgur.com/x2jHJ.png)

这是 NOT WORKING 代码符号选项：

![在此处输入图像描述](https://i.stack.imgur.com/mRSRc.png)

我对你们的问题是，为什么会有差异，或者我如何才能使我的项目工作并获得正确的代码签名选项。

我将非常感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T07:21:44.563

在选择供应配置文件（开发人员或发行版）时，请确保选择与您在目标摘要中输入的捆绑标识符匹配的配置文件。

可能是您没有添加正确的捆绑标识符。只是检查..

**编辑：**总结查看图像。您必须输入要使用的配置文件的捆绑标识符。我希望您知道每个配置都有一个捆绑标识符。示例 com.yourCompany.something

当您选择分发配置文件时，请确保您的目标摘要（参考图片）中的标识符和分发配置文件的标识符匹配。

![在此处输入图像描述](https://i.stack.imgur.com/qcNms.png)

# git - Git rm，当我只删除一个文件时，给出可怕的“目录删除失败”

> ID：15965155
> 
> 赞同：9
> 
> 时间：2013-04-12T07:06:41.427
> 
> 标签：git

```
~/repo/samples>git rm subviews.js
rm 'samples/subviews.js'
Deletion of directory 'samples' failed. Should I try again? (y/n) n 
```

为什么当我明确告诉我要删除文件时它会尝试删除目录？

为了更清楚：

*同一个目录包含大约 10 个文件，它们也被 git 跟踪。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T07:13:57.450

删除文件后，该目录`samples`可能为空。Git 通常会在那时将其删除，但是由于您的 shell 的工作目录也在同一目录中，因此删除会失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-25T19:19:08.603

升级到最新版本的 msysgit。

我使用 msysgit v1.7.11 已经有很长时间了。升级到 v1.8.5 后问题消失了。

# php - Ajax 发布成功函数返回成功和错误

> ID：15965159
> 
> 赞同：0
> 
> 时间：2013-04-12T07:06:47.760
> 
> 标签：php, javascript, ajax, jquery

好的，所以我试图让 ajax 发布到我的 php 文件，查找一个 mysql 字段，如果它存在 echo 'clientsuccess' 否则 echo 'Client already exists' 但是在成功函数上它返回两个值，尽管它们在一个 php if 语句。我很可能遗漏了一些非常简单的东西，但非常感谢任何帮助。

PHP：

```
 <?php 
session_start();
$clientArray = $_POST['clientArray'];

$clientArray = explode(',', $clientArray);
$count = 0;

foreach($clientArray as $clientField) 
{

trim($clientField);
if(empty($clientField)) {
$clientField = '-'; 
}

}

$con = mysql_connect("localhost",$_SESSION['MysqlUser'],$_SESSION['MysqlPass']);
if (!$con)
{
die('Could not connect with '.$_SESSION['MysqlUser'].mysql_error());
}

mysql_select_db("smeinsti_SPW_Inventory", $con);

$checkclient = mysql_query("SELECT ClientName FROM Clients WHERE ClientName = '".$clientArray[0]."'", $con);

if(mysql_num_rows($checkclient)==0)
{

$sql="INSERT INTO Clients (`ClientName`, `PhoneNumber`, `Email`, `Address`, `OrderDate`)
VALUES
('$clientArray[0]', '$clientArray[1]', '$clientArray[2]', '$clientArray[3]', CURDATE())";

$clientArray[0] = $_SESSION['ClientName'];
echo "clientsuccess";

} else {
echo 'Client already exists';   
}

?> 
```

JS：

```
 function NextPage()
{
var ClientData = [];

$('form#order-form.create input[type=text]').each(function() {

ClientData += $(this).val() + ',';

})

alert(ClientData);

var parameters = {
clientArray: ClientData
};

$.ajax({
type: "POST",
async:false,
url: "write_client.php",
data: parameters,
success: function(result){       
var res=result;
if(res = 'clientsuccess') {
window.location = 'admin.php?id=7';
} else {
alert('Client already exists');
}
}
}); 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:15:16.487

您的条件等号不正确！把'=='

```
 if(res == 'clientsuccess') { //Double Equal to
    window.location = 'admin.php?id=7';
    } else {
    alert('Client already exists');
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:16:10.707

`mysql_num_rows`返回选定行的数量，而不是某一行的字段。用于`mysql_fetch_row`获取您在查询中选择的行：

您还可以使用 mysql_result 获取一行并获取某个字段：

$client 存在 = mysql_result($checkclient, 0, 0); 这将获取第一行（基于零）并返回第一个字段（基于零）。

# c - 在 C 中将代码点转换为 wchar_t

> ID：15965160
> 
> 赞同：2
> 
> 时间：2013-04-12T07:06:55.160
> 
> 标签：c, visual-studio, encoding, cjk, codepoint

如果我知道 str 中这 2 个汉字你好的 unicode 代码点

如何将此 char * str 代码点转换为汉字并将其分配给 wchar_t * wstr ？

```
char * str = "4F60 597D";
wchar_t * wstr; 
```

我知道我可以像这样直接分配并解决问题。

```
wchar_t * wstr = L"\u4F60\u597D"; 
```

但是我的问题比这更复杂，我的情况不允许这样做。

如何进行从文字代码点到 wchar_t * 的转换？

谢谢。

我正在使用将字符集设置为 MBCS 的 MS Visual C，假设我不能使用 UNICODE 字符集。

**更新**：抱歉，刚刚将**wchar_t wstr**更正为**wchar_t * wstr**

**UPDATE** char * str 包含 UTF-8 代码单元序列，用于 2 个汉字你好

```
char * str = "\xE4\xBD\xA0\xE5\xA5\xBD";    
size_t len = strlen(str) + 1;
wchar_t * wstr = new wchar_t[len];
size_t convertedSize  = 0;
_locale_t local = _create_locale( LC_ALL , "Chinese");
_mbstowcs_s_l(&convertedSize, wstr, len, str, _TRUNCATE, local);
MessageBoxW( NULL, wstr , (LPCWSTR)L"Hello", MB_OK); 
```

为什么 MessageBox 打印出日文字符？而不是中文？正确的语言环境名称是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:17:21.433

我可以考虑这个功能：

```
#define GetValFromHex(x) (x > '9' ? x-'A'+10 : x - '0')

wchar_t GetChineesChar(const char* strInput)
{
    wchar_t result = 0;
    LPBYTE ptr = (LPBYTE)&result;

    ptr[0] = GetValFromHex(strInput[2]) * 16 + GetValFromHex(strInput[3]);
    ptr[1] = GetValFromHex(strInput[6]) * 16 + GetValFromHex(strInput[7]);

    return result;
}

wchatr_t* GetChineesString(const char* strInput)
{
    size_t  len = strlen(strInput) / 8;
    wchar_t* returnVal = new wchar_t[len];
    for (int i = 0; i < len; i++)
    {
         returnVal[i] = GetChineesChar(&strInput[i*8]);
    }
    return returnVal;
} 
```

那么你应该调用`GetChineesString`(); 当然，您可以添加更多验证以检查前两个字符是 \x 并且第五个和第六个字符也是 \x 在继续之前。但这是更健壮代码的起点。这不是健壮的，也没有经过测试。

编辑：我假设所有十六进制值都是大写。

# java - 在android中创建多个http post

> ID：15965164
> 
> 赞同：3
> 
> 时间：2013-04-12T07:07:02.237
> 
> 标签：java, android

你好我想问一些问题我想制作与我制作的网络服务连接的应用程序

我的应用程序有 2 个名为 app_id 和令牌的唯一 ID，app_id 仅在应用程序首次启动时生成一次，令牌由 Web 服务生成

每个请求，我必须检查令牌是否已过期，如果令牌已过期，它将调用单独的 Web 服务并生成新令牌

问题是应用程序必须访问 2 个不同的 Web 服务：请求新令牌并获取另一个所需数据

我使用 asynctask，但是 Web 服务对请求令牌的响应总是相同的每个请求，我不知道为什么

```
protected Boolean doInBackground(Void... params) {
        int status = 0;
        int token_expired=0;
        String token_val = token.getToken(getBaseContext());
        for(int i=0;i<5 && status==0;i++) {
            try {
                Thread.sleep(1000);
                //function to check if token already expired or not and request new token using http post
                token_expired = token.checkToken(getBaseContext());
                System.out.println("token expired: " +token_expired);
                if (token_expired==1 || token_expired==2) {
                     //function to call another web service and get a data from it
                     status =  rclient.Execute("POST");
                }
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        if (status==0) {
            return false;
        }else{
            return true;
        }
    } 
```

之前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:28:58.797

哦，是的，这是从类令牌处理程序检查令牌的功能

```
public Integer checkToken(Context context) {
        int status = 0; //0 = failed to request token , 1 = successfully request new token, 2 = token has not expired yet
        String token_id = getToken(context); 
        System.out.println("token_id: " +token_id);
        //if (token_id!=null) {
            Long time = getTime(context);
            Long curr_time = System.currentTimeMillis()/1000;
            System.out.println("time before: " +time);
            System.out.println("time current: " +curr_time);
            Long interval = curr_time - time;
            System.out.println("interval: " +interval);
            if (interval>10) {
                status = TokenGenerator(context);
            }else {
                status = 2;
            }       
        //}
        return status;      
    }

} 
```

这是一个从同一个类请求新令牌的函数

```
 public synchronized Integer TokenGenerator(Context context) {
     int status = 0;
     SharedPreferences sharedPrefs = context.getSharedPreferences(TOKEN_STORAGE, Context.MODE_PRIVATE);
     uniqueID = sharedPrefs.getString(PREF_UNIQUE_ID, null);
     try {
        rclient.AddJSON("app_id", uniqueID);
        rclient.CompileJSON();
    } catch (JSONException e1) {
        e1.printStackTrace();
    }
     try {
        status =  rclient.Execute("POST");
     } catch (Exception e) {
         e.printStackTrace();
     } 
     if (status==1) {
        String response = rclient.getResponse();
        String token = null;
        System.out.println("uuid_response: " +response);
        try {
            JSONObject json = new JSONObject(response);
            token = json.getString("result");
        } catch (JSONException e) {
            e.printStackTrace();
        }
        Long tsLong = System.currentTimeMillis()/1000;
        String ts = tsLong.toString();
        System.out.println("time: " +ts);
        Editor editor = sharedPrefs.edit();
        editor.putString(TIMESTAMP, ts);
        editor.putString(TOKEN_ID, token);
        editor.commit();
        }
return status;

} 
```

所以基本上其余客户端类调用了两次，第一次在类令牌处理程序中请求新令牌，第二次来自活动本身

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:39:19.617

根据您发布的代码，我认为 rclient.Execute("POST") 用于获取数据。但是下面的代码

```
if (token_expired==1 || token_expired==2) {
     //function to call another web service and get a data from it
     status =  rclient.Execute("POST");
} 
```

表示如果令牌仍然存在，您正在尝试再次获取新令牌。我认为行 status = rclient.Execute("POST"); 应替换为从服务器获取数据的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T08:36:45.830

将休息客户端类的构造函数放入函数后问题解决

# database-design - 位置坐标，纬度和经度的长度是多少？

> ID：15965166
> 
> 赞同：370
> 
> 时间：2013-04-12T07:07:05.970
> 
> 标签：database-design, latitude-longitude

纬度和经度可以有多少位数字，小数点前和小数点后？

这是我从 Windows Phone 设备发送的位置获取的示例：

```
Latitude=-63572375290155
Longitude=106744840359415 
```

这很长，超出了我的表格列大小并导致错误。

* * *

## 回答 #1

> 赞同：740
> 
> 时间：2013-05-24T21:19:37.010

如果纬度坐标以十进制度数报告为 -6.3572375290155 或 -63.572375290155，那么您可以四舍五入并存储多达 6 个小数位，以实现 10 厘米（或 0.1 米）精度。如果坐标参考系统 (CRS) 不是 EPSG:4326（例如 EPSG:3857），则 x 和 y 值测量距原点的距离（以米为单位，而不是以度为单位）。

## 概述

南半球和北半球的有效纬度范围分别为**-90 和 +90 。**经度在**-180 和 +180**范围内，分别指定本初子午线以西和以东的坐标。作为参考，[赤道](http://en.wikipedia.org/wiki/Equator)的纬度为 0°，[北极](http://en.wikipedia.org/wiki/North_Pole)的纬度为北纬 90°（写作 90° N 或 +90°），[南极](http://en.wikipedia.org/wiki/South_Pole)的纬度为 -90°。

[本初子午线](http://en.wikipedia.org/wiki/Prime_meridian)的经度为 0°，穿过英格兰格林威治。国际[日期变更线 (IDL)](http://en.wikipedia.org/wiki/International_Date_Line)大致遵循 180° 经度。正值经度落在东半球，负值落在西半球。

## 十进制度精度

**使用十进制度表示法的坐标中的**六 (6) 位小数精度为 10 厘米（或 0.1 米）分辨率。**坐标十进制度的每个 .000001 差异大约是 10 厘米长。例如，谷歌地球和谷歌地图的图像分辨率通常为 1 米，有些地方的分辨率更高，为每像素 1 英寸。一米分辨率可以使用 5 个小数位表示，因此超过 6 个小数位对于该分辨率是无关的。赤道处的经度间距离与纬度相同，但随着子午线在该点汇聚，两极处的经度间距离为零。**

 **对于毫米 (mm) 精度，则以十进制度格式表示带 8 位小数的纬度/经度。由于大多数应用程序不需要这种精度，小数点后 6 位对于大多数情况来说就足够了。

在另一个方向上，十进制度数表示约 111 公里（或 60 海里）的距离，0.1 十进制度数表示约 11 公里的距离。

这是一个以 0,0 为起点的纬度与 delta 度数和估计距离（以米为单位）的小数位数差异表。

| 小数位 | 十进制度 | 距离（米） | 笔记 |
| --- | --- | --- | --- |
| 0 | 1.0 | 110,574.3 | 111 公里 |
| 1 | 0.1 | 11,057.43 | 11 公里 |
| 2 | 0.01 | 1,105.74 | 1公里 |
| 3 | 0.001 | 110.57 |  |
| 4 | 0.0001 | 11.06 |  |
| 5 | 0.00001 | 1.11 |  |
| 6 | 0.000001 | 0.11 | 11 厘米 |
| 7 | 0.0000001 | 0.01 | 1 厘米 |
| 8 | 0.00000001 | 0.001 | 1 毫米 |

## 度-分-秒 (DMS) 表示

对于 DMS 表示法，1 弧秒 = 1/60/60 度 = ~30 米长，0.1 弧秒增量为 ~3 米。

例子：

*   `0° 0' 0" W, 0° 0' 0" N`⟹ `0° 0' 0" W, 0° 0' 1" N`⟹ 30.715 米
*   `0° 0' 0" W, 0° 0' 0" N`⟹ `0° 0' 0" W, 0° 0' 0.1" N`⟹ 3.0715 米

1 弧分 = 1/60 度 = ~2000m (2km)

* * *

## 更新：

[这](https://xkcd.com/2170/)是一个关于坐标精度的有趣漫画。

* * *

## 回答 #2

> 赞同：227
> 
> 时间：2014-05-28T14:35:58.087

谷歌地图实际上使用带符号的值来表示位置：

*   **纬度**：最大/分钟`90.0000000`到`-90.0000000`

*   **经度**：最大/分钟`180.0000000`至`-180.0000000`

因此，如果您想在项目中使用坐标，则需要 DECIMAL(10,7) 即。对于 SQL。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2017-11-08T19:39:54.400

有效经度为 -180 到 180 度。

纬度应该是从 -90 度到 90 度，但是非常靠近两极的区域是不可索引的。

因此，由 EPSG:900913 / EPSG:3785 / OSGEO:41001 指定的确切限制如下：

*   **有效经度为 -180 到 180 度。**
*   **有效纬度为 -85.05112878 到 85.05112878 度。**

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2016-01-28T03:20:17.983

最大纬度总共是：9（12.3456789），经度 10（123.4567890），它们都有最多 7 个小数字符（至少我可以在[Google 地图](http://maps.google.com)中找到），

例如，Rails 和 Postgresql 中的两列看起来都像这样：

```
t.decimal :latitude, precision: 9, scale: 7
t.decimal :longitude, precision: 10, scale: 7 
```

编辑：

正如 Jasie 所说，最大小数应该是 8，但只有少数 Web 服务接受。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-05-31T10:49:21.843

在 SQL Server 中存储 Lat Long 值的理想数据类型是 decimal(9,6)

正如其他人所说，这大约是 10 厘米精度，而仅使用 5 个字节的存储空间。

例如`CAST(123.456789 as decimal(9,6)) as [LatOrLong]`

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-05-06T09:56:15.210

我知道已经有几个答案，但我添加了这个，因为这增加了关于小数位的大量信息，因此增加了询问的最大长度。

纬度和经度的长度取决于精度。每个的绝对最大长度为：

*   纬度：**12 个字符**（例如：-90.00000001）
*   经度：**13 个字符**（例如：-180.00000001）

对于两个持有：最多 8 个小数位是可能的（尽管不常用）。

对精度依赖的解释：

[![在此处输入图像描述](https://i.stack.imgur.com/crFH4.png)](https://i.stack.imgur.com/crFH4.png)

[请参阅维基百科上的十进制度数文章中](https://en.wikipedia.org/wiki/Decimal_degrees)的完整表格

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-04T00:59:29.587

请检查 UTM 坐标系[https://en.wikipedia.org/wiki/Universal_Transverse_Mercator_coordinate_system](https://en.wikipedia.org/wiki/Universal_Transverse_Mercator_coordinate_system)。

对于特定的地图投影，这些值必须以米为单位。例如，UTM 11 区的阿西尼博因山峰（北纬 50°52′10″ 115°39′03″W）由 11U 594934.108296 5636174.091274 表示，其中 (594934.108296, 5636174.091274) 以米为单位。**

# java - 用 Java 编写程序以将日期转换为序列号，就像在 Excel 中所做的那样

> ID：15965167
> 
> 赞同：0
> 
> 时间：2013-04-12T07:07:07.393
> 
> 标签：java, excel, date

我写了一个函数，但它没有给出实际的 O/P ...

```
public int date(Object O) {
    if (O instanceof Date) {
        Date d1 = (Date) O;
        Calendar cal = Calendar.getInstance();
        cal.setTime(d1);
        int dd, mm, yy;
        dd = cal.get(Calendar.DAY_OF_MONTH);
        mm = cal.get(Calendar.MONTH);
        yy = cal.get(Calendar.YEAR);

        if (dd == 29 && mm == 02 && yy == 1900)
            return 60;

        long nSerialDate = ((1461 * (yy + 4800 + ((mm - 14) / 12))) / 4)
                + ((367 * (mm - 2 - 12 * ((mm - 14) / 12))) / 12)
                - ((3 * (((yy + 4900 + ((mm - 14) / 12)) / 100))) / 4) + dd
                - 2415019 - 32075;

        if (nSerialDate < 60) {
            // Because of the 29-02-1900 bug, any serial date
            // under 60 is one off... Compensate.
            nSerialDate--;
        }

        return (int) nSerialDate;
    }
    return -1;
} 
```

## 主班

```
p s v main(String args[]){
CommonFunctionsImpl cmp= new CommonFunctionsImpl();
    Date date1 = null;
      try {
        date1 = new SimpleDateFormat("MM/dd/yy").parse("05/18/2008");

    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    System.out.println("date-----"+cmp.date(date1));
} 
```

**输出** `date-----39556`

**在 Excel 中** `DATE(2008,5,18) = 39586.00`

我的程序 O/P 实际上与 Excel O/P 不匹配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T07:18:28.120

正确的算法已经在 Apache POI 中实现。看看类[org.apache.poi.ss.usermodel.DateUtil](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/DateUtil.html)。

此描述也可能有用：http: [//support.microsoft.com/kb/214094/en-us](http://support.microsoft.com/kb/214094/en-us)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T08:51:59.067

程序中的问题是：

在程序中，变量`mm(month)`以 4 的形式出现，而 O/P 仅在第 4 个月出现。 *（一年的第一个月是0）*

要解决此问题，您需要增加月份值。

```
 dd = cal.get(Calendar.DAY_OF_MONTH);
    mm = cal.get(Calendar.MONTH);
    yy = cal.get(Calendar.YEAR);

    //Solution for the issue
    mm++;

    if (dd == 29 && mm == 02 && yy == 1900)
        return 60;

    long nSerialDate = ((1461 * (yy + 4800 + ((mm - 14) / 12))) / 4)
            + ((367 * (mm - 2 - 12 * ((mm - 14) / 12))) / 12)
            - ((3 * (((yy + 4900 + ((mm - 14) / 12)) / 100))) / 4) + dd
            - 2415019 - 32075; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-12T07:28:12.110

试试这个：

```
Date begin = new Date(0, 0, 1); // 1900 based date
Date date = new Date(108, 4, 18); // your date

// There is 2 days offset from the calculated date and what you 
// expect so I added it on the result
System.out.println(2+(date.getTime()-begin.getTime())/(1000*60*60*24)); 
```

参见[java.util.Date](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html#Date%28int,%20int,%20int%29) JavaDoc && Excel[日期](http://office.microsoft.com/en-us/excel-help/date-function-dax-HA102839075.aspx?CTT=1)函数指南

# database - jsp下拉不工作！请协助

> ID：15965169
> 
> 赞同：1
> 
> 时间：2013-04-12T07:07:10.653
> 
> 标签：database, jsp, drop-down-menu, resultset

// resultset,resultset2 与 rsmd(ResultSetMetaData object) 一起正确定义 & DB 连接也正确定义 //tr & table tags....

```
 String td_names[] ={"DVD","BOOKS","NOVELS"};

    resultset=statement.executeQuery("SELECT * FROM mytable");
    rsmd=resultset.getMetaData();
    for(int j=0;j<td_names.length;j++)
            {
    %>
            <td><%=td_names[j]%></td>
    <%
                resultset2=statement2.executeQuery("SELECT " + rsmd.getColumnName(j) + " FROM mytable");
    %>
            <td>
                <select name='drop_'<%=j%> >
    <%    
                    for(int i=0;resultset2.next();i++)
                    {
    %>
                        <option><%=resultset2.getString(i)%></option>
    <%
                    }
    %>
                </select>
            </td>
    <%
    } 
```

.......剩余代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:47:07.153

行！=列

请从

```
for( 
```

至

```
while( 
```

和

```
getString(i) 
```

至

```
getString(1) 
```

请改用 JSLT-SQL。

# objective-c - 故事板和内存管理

> ID：15965172
> 
> 赞同：0
> 
> 时间：2013-04-12T07:07:43.797
> 
> 标签：objective-c, memory, storyboard

我正在使用故事板，但偶然发现了一些我无法掌握的东西。

我正在以编程方式设置我的视图控制器`performSegueWithIdentifier:`。

它就像一个魅力，但我注意到每次我这样做时，我都会创建该 viewController 的一个新实例，因此，我有不断堆积的内存。当我模拟内存警告时，我看到每次我打电话`performSegueWithIdentifier:`

我有一个视图控制器的新实例，它永远不会被释放。所以内存只是堆积起来，我无法释放它，最终导致崩溃。

我只是像这样进入视图控制器：

```
// If sales are registered, go to view
[self performSegueWithIdentifier:@"previousSaleSegue" sender:self]; 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:55:17.143

您将视图控制器堆叠在一起，而不是返回到前一个。假设您使用的是导航控制器，您将这样做：

```
A --push--> B --finished! Push---> New A ---Push---> B ---Finished! push--->A ... 
```

你应该做的是：

```
A --push--> B --finished! Pop -
^-----------------------------/ 
```

您正在通过评论使用模态序列，在这种情况下，您需要向返回按钮添加一个操作以关闭视图控制器（返回到前一个）而不是呈现另一个实例。原理是一样的。你会用

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T08:07:20.960

如果您确定 viewcontroller 实例没有被释放，那一定是因为您在某处保持对它的引用（它可能是控制器本身的一个循环）。

# c - 如何知道我们是内存不足还是使用 realloc() 时出错了？

> ID：15965174
> 
> 赞同：3
> 
> 时间：2013-04-12T07:07:49.180
> 
> 标签：c, realloc

`realloc(void *ptr, size_t new_size)``NULL`在两种情况下返回：

*   如果内存不足，则不释放旧内存块并返回 NULL。
*   如果发生错误，也会返回 NULL。

我怎么知道发生了什么类型的问题？

如果内存不足，我可能会将一些内存分页到磁盘。

我怎么知道我是否应该这样做`free(ptr)`？（也许它已经被 realloc 释放了）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T07:16:58.627

[从这里](http://pubs.opengroup.org/onlinepubs/7908799/xsh/realloc.html)引用

```
RETURN VALUE

Upon successful completion with a size not equal to 0, realloc() returns a pointer 
to the (possibly moved) allocated space. If size is 0, either a null pointer or a 
unique pointer that can be successfully passed to free() is returned. If there is
not enough available memory, realloc() returns a null pointer  and sets errno to 
[ENOMEM]. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:11:30.583

来自[http://linux.die.net/man/3/realloc](http://linux.die.net/man/3/realloc)

> 笔记：
> 
> UNIX 98 标准要求 malloc()、calloc() 和 realloc() 在失败时将 errno 设置为 ENOMEM。Glibc 假设这已经完成（并且这些例程的 glibc 版本会这样做）；如果您使用未设置 errno 的私有 malloc 实现，则某些库例程可能会在没有 errno 原因的情况下失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T07:11:42.543

> 我怎么知道我是否应该释放（ptr）？（也许它已经被 realloc 释放了）

`realloc`*可能返回的唯一现实原因`NULL`是没有足够的可用内存，而您对此无能为力。

此外，万一它失败了，它`realloc`永远不会释放你的记忆，所以你总是必须自己处理。

* * *

[*或者当使用大小 0 调用时]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T07:11:20.770

如果`realloc()`失败（返回`NULL`），您应该`free()`自己指向指针。唯一需要担心的奇怪情况是[新大小为 0](https://stackoverflow.com/q/2132273/226621)时。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T07:11:23.703

如果你内存不足`errno`应该是`ENOMEM`。此外，如果`realloc`失败，它*不会*释放您传递给它的指针的内存。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T07:11:58.820

大多数情况下 - 这取决于 realloc 的实现。

但是，一般来说，您不必 free(ptr) 因为 realloc 从来没有首先分配它（因此返回 NULL ）。

要确定 realloc 是否无法增加堆大小，只需检查 ERRNO 编号。Malloc/Calloc/Realloc 将 ERRNO 设置为 ENOMEM（存储空间不足可用于服务请求）

# java - 使用 gson 解析空的 Json 数组

> ID：15965179
> 
> 赞同：0
> 
> 时间：2013-04-12T07:08:28.723
> 
> 标签：java, json, gson

我正在使用 gson 来解析 JSON 回复。该代码适用于正确的 JSON 响应。但是，如果 JSON 回复是空数组，我的代码一直在抱怨“期待 begin_object 但得到 end_array”

```
JSON response
    {
        "list" : {
                  "data" : [

                  ]
         }
    } 
```

我的代码

```
try {
    jsonReader.beginArray();
        do{
        jsonReader.beginObject();
            while(jsonReader.hasNext()){
                      // Parse all data
              jsonReader.endObject();
            } while(jsonReader.hasNext());
            jsonReader.endArray();
} catch (IOException e) {
//Exception
} 
```

我知道上面的异常是什么意思，它只是意味着它期望一个数组中的对象来处理。但由于它是一个空数组，它会给出异常。

但是我查看了 api 指南，没有方法可以检查 JSON 是空数组还是输入流中的下一个对象是对象还是数组结尾等。

谁能告诉我 GSON API 中存在任何此类方法。或者我们如何才能解决这个问题？

**编辑：**我已经修改了从服务器获得的响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T04:51:36.097

您已经在使用适当的方法。这是[JsonReader 类文档](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/stream/JsonReader.html)[`JsonReader.hasNext()`](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/stream/JsonReader.html#hasNext%28%29)中描述的方法：

> 在数组处理方法中，首先调用 beginArray() 以使用数组的左括号。然后创建一个累加值的 while 循环，当 hasNext() 为 false 时终止。最后，通过调用 endArray() 读取数组的右括号。

您只需要从 do/while 切换到 while 循环。您当前的代码要求数组中始终至少有一个对象，因为 do/while 直到循环结束才检查条件。

# ios - How to download a web page with it's inner resoures like images,css in iOS?

> ID：15965180
> 
> 赞同：1
> 
> 时间：2013-04-12T07:08:31.987
> 
> 标签：ios, objective-c, http, nsurlrequest, nsurlcache

I'm trying to download the specified web pages with their inner page resources to disk. When I send a NSURLRequest, only the initial URL would be request, but the resources as images,css,js would not be download.

Someone suggests to use cache, but I don't want to cache every web page browsed in the uiwebview, but only the one I specified.For example, when I input an url to the uiwebview addressbar then click on the "save" button, the page will be saved entire, but the other browsing in the webview will not be cached automatically.

Does there any way to download the entire webpages? Thank you very much!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:56:05.047

我曾经遇到过同样的问题，我使用[ASIWebPageRequest](http://allseeing-i.com/ASIHTTPRequest/ASIWebPageRequest)解决了它。当时它已经很旧了，但仍然有效。

我写了一个方法（基于示例方法）来下载文件夹中的网页。您需要对其进行修改以使其正常工作。

```
- (IBAction)loadURL:(NSURL *)url inFolder:(NSString*)folderPath
{
    // Assume request is a property of our controller
    // First, we'll cancel any in-progress page load
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];
    [[self request] setDelegate:nil];
    [[self request] cancel];

    [self setRequest:[ASIWebPageRequest requestWithURL:url]];
    [[self request] setDelegate:self];
    [[self request] setDidFailSelector:@selector(webPageFetchFailed:)];
    [[self request] setDidFinishSelector:@selector(webPageFetchSucceeded:)];

    // Tell the request to embed external resources directly in the page
    [[self request] setUrlReplacementMode:ASIReplaceExternalResourcesWithData];

    self.theCache.storagePath = folderPath;

    // It is strongly recommended you use a download cache with ASIWebPageRequest
    // When using a cache, external resources are automatically stored in the cache
    // and can be pulled from the cache on subsequent page loads
    self.request.cacheStoragePolicy = ASICachePermanentlyCacheStoragePolicy;
   [[self request] setDownloadCache:self.theCache];

   // Ask the download cache for a place to store the cached data
   // This is the most efficient way for an ASIWebPageRequest to store a web page
   //[[self request] setDownloadDestinationPath:
   //[[ASIDownloadCache sharedCache] pathToStoreCachedResponseDataForRequest:[self request]]];
   [[self request] setDownloadDestinationPath:[self.theCache pathToStoreCachedResponseDataForRequest:[self request]]];

   [[self request] startAsynchronous]; 
```

}

我也使用了 ASIownloadCache。

```
...
    ASIDownloadCache *localCache = [[ASIDownloadCache alloc] init];
    self.theCache = localCache;
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:17:57.547

您可以实现一个自定义 NSUrlCache 并保存所有内容。使用 NSUrlRequest 下载的所有内容都将使用 NSUrlCache。UIWebView 所做的一切都使用 NSUrlRequest。如果您需要样本，请查看[https://github.com/evermeer/EVURLCache](https://github.com/evermeer/EVURLCache)

# c# - 如何从包含多个相似部分的字符串中仅替换子字符串的一部分？

> ID：15965185
> 
> 赞同：0
> 
> 时间：2013-04-12T07:08:52.833
> 
> 标签：c#, string, winforms, datagridview

我可能没有按照我的意愿提出这个问题。请考虑以下情况。

**场景：**
我正在我的 C# Win Form 应用程序中实现搜索/替换功能。此功能可以选择替换“以”或“以”某个值结尾的子字符串。例如：

*   一个字符串包含`"123ABCD"`. 替换`"123"`为`"XYZ"`应该产生：`"XYZABCD"`
*   一个字符串包含`"ABCD123"`. 替换`"123"`为`"XYZ"`应该产生：`"ABCDXYZ"`

这两个功能都运行良好。我的问题是当字符串包含`"123ABCD123"`. 使用 时，这两个操作都返回错误的值`"XYZ"`。

*   “开始于”产生`"XYZABCDXYZ"`，而不是`"XYZABCD"`
*   “以”结尾产生`"XYZABCDXYZ"`而不是`"ABCDXYZ"`

谁能给我一个想法如何实现这一目标？

谢谢 ！！！

**代码片段：**

```
if (this.rbMatchFieldsStartedWith.Checked)
{
    if (caseSencetive)
    {
        matched = currentCellValue.StartsWith(findWhat);
    }
    else
    {
        matched = currentCellValue.ToLower().StartsWith(findWhat.ToLower());
    }
}
else if (this.rbMatchFieldsEndsWith.Checked)
{
    if (caseSencetive)
    {
        matched = currentCellValue.EndsWith(findWhat);
    }
    else
    {
        matched = currentCellValue.ToLower().EndsWith(findWhat.ToLower());
    }
}

if (matched)
{
    if (replace)
    {
        if (this.rbMatchWholeField.Checked)
        {
            currentCell.Value = replaceWith;
        }
        else
        {
            currentCellValue = currentCellValue.Replace(findWhat, replaceWith);
            currentCell.Value = currentCellValue;
        }
        this.QCGridView.RefreshEdit();
    }
    else
    {
        currentCell.Style.BackColor = Color.Aqua;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:10:40.717

[这对于正则表达式](http://www.regular-expressions.info/)来说听起来不错。

它受 .NET 支持，并且还具有替换语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:22:05.433

实现依赖于搜索模式的替换方法。

换行

```
currentCellValue = currentCellValue.Replace(findWhat, replaceWith); 
```

和

```
if (this.rbMatchFieldsStartedWith.Checked)
{
    // target string starts with findWhat, so remove findWhat and prepend replaceWith
    currentCellValue = replaceWith + currentCellValue.SubString(findWhat.Length);
}
else
{
    // target string end with findWhat, so remove findWhat and append replaceWith.
    currentCellValue = currentCellValue.SubString(0, currentCellValue.Length - findWhat.Length) + replaceWith;
}

currentCell.Value = newValue; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T07:29:44.447

我只想尝试不使用正则表达式的替换方法。
（正则表达式可能是正确的方法，但找到替代方法很有趣）

```
void Main()
{
    string test = "123ABCD123";  // String to change
    string rep = "XYZ";          // String to replace
    string find = "123";         // Replacement string
    bool searchStart = true;     // Flag for checkbox startswith 
    bool searchEnd = true;       // Flag for checkbox endswith
    bool caseInsensitive = true; // Flag for case type replacement

    string result = test;         
    int pos = -1;
    int lastPos = -1;

    if(caseInsensitive == true)
    {
        pos = test.IndexOf(find, StringComparison.InvariantCultureIgnoreCase);
        lastPos = test.LastIndexOf(find, StringComparison.InvariantCultureIgnoreCase);
    }
    else
    {
        pos = test.IndexOf(find, StringComparison.Ordinal);
        lastPos = test.LastIndexOf(find, StringComparison.Ordinal);
    }

    result = test;
    if(pos == 0 && searchStart == true)
    {
        result = rep + test.Substring(find.Length);
    }
    if(lastPos != 0 && lastPos != pos && lastPos + find.Length == test.Length && searchEnd == true)
    {
        result = result.Substring(0, lastPos) + rep;
    }
    Console.WriteLine(result);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T07:34:51.273

首先，让我们跟踪您的场景，假设：

*   要处理的字符串是 123ABCD123
*   开头是检查。
*   目的是将“123”替换为“XYZ”

只需阅读您的代码。我们击中`if (this.rbMatchFieldsStartedWith.Checked)`并且评估为真。所以我们踏入了那个街区。我们打了`matched = currentCellValue.StartsWith(findWhat);`和`matched = true`。我们继续`if (matched)`条件，它也评估为`true`。之后`if (replace)`评估为`true`。最后，我们做出最后一个决定，`if (this.rbMatchWholeField.Checked)`然后`false`我们继续`else`块：

```
currentCellValue = currentCellValue.Replace(findWhat, replaceWith);
currentCell.Value = currentCellValue; 
```

此块中的第一行替换所有出现的`findWhat`with `replaceWith`，即所有出现的 123 替换为 XYZ。当然，这不是期望的行为。当然，`Replace`您必须使用一个函数来替换字符串的第一次或最后一次出现，而不是根据输入。

# jquery - jquery wrap函数不起作用

> ID：15965189
> 
> 赞同：0
> 
> 时间：2013-04-12T07:09:16.090
> 
> 标签：jquery

我的html是这样的

```
 <div id="149708366" class="fav-list">
      <em style="display:none">&nbsp;</em>
    </div> 
```

和我的 jquery 代码用新的 div 包装它（ $(data) 引用上面的 html ）

```
 alert( $(data).find(list).wrap('<div class="new" />').html()); 
```

我期待低于html的结果

```
 <div id="149708366" class="fav-list">
      <em style="display:none">&nbsp;</em>
    </div> 
```

但只在 jquery 警报消息中得到这个

```
<em style="display:none">&nbsp;</em> 
```

谁可以帮我这个事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:12:49.913

试试这个

```
alert( $(data).find(list).wrap('<div class="new" />').parent().html()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:11:21.673

`wrap()`返回原始元素，因此输出是正确的。

> 此方法返回用于链接目的的原始元素集。

# visual-studio-2012 - Visual Studio 2012 with SQL Server 2008 R2 Connection error occurred during the pre-login handshake

> ID：15965190
> 
> 赞同：0
> 
> 时间：2013-04-12T07:09:24.553
> 
> 标签：visual-studio-2012, sql-server-2008-r2, windows-server-2008-r2

![enter image description here](https://i.stack.imgur.com/XH73C.png)

> A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-02T20:26:22.930

我有同样的错误，该错误是由防病毒软件产生的

# asp.net - I want to insert "An error occurred object reference not set to an instance of an object while insert and update new record" into database

> ID：15965195
> 
> 赞同：0
> 
> 时间：2013-04-12T07:09:33.363
> 
> 标签：asp.net, mysql, c#-4.0

I want to insert and update data into database on button click but when I fill all fields and start debugging and when dubugger is on buyer code this error is occurred "object reference not set to an instance of an object". Kindly help me.......

```
protected void btnSaveChanges_Click(object sender, EventArgs e)
    {
        if (Convert.ToInt32(ViewState["BuyerId"]) > 0)
        {
            oBuyer = new Buyer();
            //Fill object with Text box values
            oBuyer.BuyerId = Convert.ToInt32(ViewState["BuyerId"]);
            oBuyer.BuyerCode = txtBuyerCode.Text;
            oBuyer.SunCode = txtSunCode.Text;
            oBuyer.BuyerName = txtBuyerName.Text;
            oBuyer.BuyerAddress1 = txtBuyerAddress1.Text;
            oBuyer.BuyerAddress2 = txtBuyerAddress2.Text;
            oBuyer.BuyerAddress3 = txtBuyerAddress3.Text;
            oBuyer.BuyerAddress4 = txtBuyerAddress4.Text;
            oBuyer.BuyerPostCode = txtBuyerPostcode.Text;
            oBuyer.BuyerPhone = txtBuyerPhone.Text;
            oBuyer.BuyerFax = txtBuyerFax.Text;
            oBuyer.BuyerEmail = txtBuyerMail.Text;
            oBuyer.PfaCode = txtBuyerPFACode.Text;
            oBuyer.Guarantee = Convert.ToDecimal(txtBuyerGuarantee.Text);
            oBuyer.DefaultDestination = ddlBuyerDefaultDestination.SelectedValue;
            oBuyer.HbaLevy = chkHBALeavy.Checked;
            oBuyer.SfiaWhite = chkSFIAPelagic.Checked;
            oBuyer.SfiaPelagic = chkSFIAPelagic.Checked;
            oBuyer.MarketBox = txtBuyerMarketBox.Text;
            oBuyer.Comments = txtComments.Text;
            oBuyer.BuyerRegistrationNo = txtBuyerRigistrationNo.Text;

        }
        else
        {
            //Fill object with Text box values
            oBuyer.BuyerCode = txtBuyerCode.Text;
            oBuyer.SunCode = txtSunCode.Text;
            oBuyer.BuyerName = txtBuyerName.Text;
            oBuyer.BuyerAddress1 = txtBuyerAddress1.Text;
            oBuyer.BuyerAddress2 = txtBuyerAddress2.Text;
            oBuyer.BuyerAddress3 = txtBuyerAddress3.Text;
            oBuyer.BuyerAddress4 = txtBuyerAddress4.Text;
            oBuyer.BuyerPostCode = txtBuyerPostcode.Text;
            oBuyer.BuyerPhone = txtBuyerPhone.Text;
            oBuyer.BuyerFax = txtBuyerFax.Text;
            oBuyer.BuyerEmail = txtBuyerMail.Text;
            oBuyer.PfaCode = txtBuyerPFACode.Text;
            oBuyer.Guarantee = Convert.ToDecimal(txtBuyerGuarantee.Text);
            oBuyer.DefaultDestination = ddlBuyerDefaultDestination.SelectedValue;
            oBuyer.HbaLevy = chkHBALeavy.Checked;
            oBuyer.SfiaWhite = chkSFIAPelagic.Checked;
            oBuyer.SfiaPelagic = chkSFIAPelagic.Checked;
            oBuyer.MarketBox = txtBuyerMarketBox.Text;
            oBuyer.Comments = txtComments.Text;
            oBuyer.BuyerRegistrationNo = txtBuyerRigistrationNo.Text;
        }

        //enter into nSYScatch6 service
        bool saveBuyer = nSYSCatch6ServiceInitiator.SaveBuyer(oBuyer);
        if (saveBuyer)
        {
        }
        Response.Redirect(Request.RawUrl);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:13:22.527

您`oBuyer = new Buyer();`在`else`分支中缺少一个。

# css - 如何使div低于另一个div

> ID：15965200
> 
> 赞同：3
> 
> 时间：2013-04-12T07:09:49.413
> 
> 标签：css, html, margin

我想要`#blue`div 下面的`#green`div

`#blue`div有`margin-top : -10px; attribute`

```
 <style>
    #red{
        width: 400px;

        border: 1px solid red;
    }
    #green{
        width: 100%;
        height: 100px;
        background-color: green;
        border-bottom: 2px solid yellow;
        z-index: 2;
    }
    #blue{
        width: 100%;
        height: 100px;
        background-color: blue;
        border-top: 2px solid brown;
        margin-top: -10px;
        z-index: 1;
    }
    </style>

<div id="red">
    <div id="green">
    </div>
    <div id="blue">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T07:13:48.570

可能添加and div 和div会做你想做的事，因为我怀疑你需要一个在另一个后面`position:absolute`。如果它们需要一个接一个，那么也可以在蓝色和绿色上使用相对定位。`#blue``#green``position:relative``#red`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:18:44.660

我看不到问题，你的代码很好。或者你的意思是在 div 下？就像隐藏在绿色 div 下的蓝色 div 一样？那么您需要在要移动/隐藏的 div 上添加 position: relative （或 absoulte ）属性。nad 然后顶部或左侧。例子：

```
 #blue{
    /* without position: relative/absoulte the z-index wont work!*/
        position:relative;
/* this moves the dives up or down*/
        top: -100px;
/* this move the div left or right! */
left: 15px;
        width: 100%;
        height: 100px;
        background-color: blue;
        border-top: 2px solid brown;
        margin-top: -10px;
        z-index: 1;
    } 
```

# regex - 如何知道一个单词在字符串中的总出现次数并在 perl 中从中检索数据？

> ID：15965202
> 
> 赞同：0
> 
> 时间：2013-04-12T07:09:54.993
> 
> 标签：regex, perl

我有一个这样的字符串

```
$myString = "Itwas%AC%4D%AC%4A%5BL3%BF5,T3,S13%4A%5Bbound over%AC%4A%5BC6%4A%5B%5D%AC%4A%5BL7%BF11%4A%5Ball good people to come" 
```

我的要求是计算 %4A%5B 的出现次数，并获取两个 %4A%5B 之间的数据并存储在一个数组中。

例子：

```
1)L3%BF5,T3,S13
2)C6
3)L7%BF11 
```

在上面的字符串中，它出现了 6 次。所以我想知道在运行时并获取 %4A%5B 之间的数据并存储在一个数组中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T07:15:52.097

[按照这里](https://stackoverflow.com/questions/15965202/how-to-know-the-total-occurrences-of-a-word-in-a-string-and-retrieve-data-from-i#comment22754649_15965202)的建议使用[split](http://perldoc.perl.org/functions/split.html) 和as split 模式，然后计算结果数组中的元素数：`%4A%5B`

```
$myString = "Itwas%AC%4D%AC%4A%5BL3%BF5,T3,S13%4A%5Bbound over%AC%4A%5BC6%4A%5B%5D%AC%4A%5BL7%BF11%4A%5Ball good people to come";
@array = split /%4A%5B/, $myString;
$num = @array - 1;

use Data::Dumper;
print "Occurrences: $num\n";
print Dumper(@array); 
```

输出：

```
Occurrences: 6
$VAR1 = 'Itwas%AC%4D%AC';
$VAR2 = 'L3%BF5,T3,S13';
$VAR3 = 'bound over%AC';
$VAR4 = 'C6';
$VAR5 = '%5D%AC';
$VAR6 = 'L7%BF11';
$VAR7 = 'all good people to come'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T08:05:08.197

您还可以像这样计算正则表达式匹配：

```
my @matches = $myString =~ /%4A%5B/g;
print scalar(@matches) 
```

# php - 从openId清空用户信息，为什么？

> ID：15965203
> 
> 赞同：0
> 
> 时间：2013-04-12T07:09:57.420
> 
> 标签：php, openid, lightopenid

我有这个修改过的 lightOpenId 的谷歌示例连接代码：

```
<?php
require_once('../db.php');
session_start();
# Logging in with Google accounts requires setting special identity, so this example shows how to do it.
require 'openid.php';
try {
    # Change 'localhost' to your domain name.
    $openid = new LightOpenID('127.0.0.1');
    if(!$openid->mode) {
        if(isset($_GET['login'])) {
            $openid->identity = 'https://www.google.com/accounts/o8/id';
            $openid->required = array('contact/email');
            $openid->optional = array('namePerson', 'namePerson/friendly');
            header('Location: ' . $openid->authUrl());
        }
?>
<form action="?login" method="post">
    <button>Login with Google</button>
</form>
<?php
    } elseif($openid->mode == 'cancel') {
        echo 'User has canceled authentication!';
    } else {
        if ($openid->validate()) {
            $_SESSION['auth'] = $openid->identity;

            $userinfo = $openid->getAttributes();
            print_r($openid->required);
            echo $_SESSION['auth'];

            $stmt = $dbh->prepare("INSERT INTO users(id,name,email) VALUES(:id,:name,:email)");
            $stmt->execute(array(":id" => $openid->identity,
                                ":name" => "name",
                                ":email" => "name"));
        }
    }
} catch(ErrorException $e) {
    echo $e->getMessage();
} 
```

我的问题是 $openid->required 不返回任何东西。数组本身甚至不包含一个空的“联系人/电子邮件”字段。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:15:19.530

`$openid->required`在请求之间不会保留，但您不必使用它。

至于为`$userinfo`空，它只包含提供者返回的字段（例如，没有字段），无论您请求什么。

提供者可能会返回您请求的字段，但它不必，甚至不必支持返回任何附加数据（因为这是协议扩展）。

# php - JS anon functions in PHP (without anon function support)

> ID：15965207
> 
> 赞同：1
> 
> 时间：2013-04-12T07:10:18.353
> 
> 标签：php, anonymous-function

Let's say I have this JS code:

```
var events = ['start', 'stop', 'tick']
,   obj = ... // object with events
,   receiver = function(event_name, event_args){ // function to receive all events
        console.log(event_name, event_args);
    }
;

for(var i=0; i<events.length; i++){
    obj.on(events[i], (function(event){
        return function(){
            return receiver(event, arguments);
        };
    })(events[i]));
} 
```

What I'm doing here is to route all events to function "receiver".

I'm trying to replicate this behavior in PHP, since I already have `obj.on` (`$obj->on`) functionality.

I would like to support (slightly) old PHP versions (5.1+), so I can't make use of anonymous functions (as well as passing variables to said functions).

Here's a tentative (and incomplete) version of the above code:

```
$events = array('start', 'stop', 'tick');
$obj = new ... ; // object with events
function receiver($event_name, $event_args){ // function to receive all events
    echo $event_name.' | '.print_r($event_args, true);
}

foreach($events as $event){
    $obj->on($event, ...); // ???
    // ???
        return receiver($event, func_get_arguments());
    // ???
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:18:16.153

我可以看到的一种可能的方法是利用`__invoke`：

```
$events = array('start', 'stop', 'tick');
$obj = new ... ; // object with events
function receiver($event_name, $event_args){ // function to receive all events
    echo $event_name.' | '.print_r($event_args, true);
}

class EventRedirector {
    public $event_name = '';
    public $redirector = '';
    public function __invoke(){
        $redirector = $this->redirector;
        return $redirector($this->event_name, func_get_args());
    }
    public function __construct($event_name, $redirector){
        $this->event_name = $event_name;
        $this->redirector = $redirector;
    }
}

foreach($events as $event){
    $obj->on($event, new EventRedirector($event, 'receiver'));
} 
```

# asp.net - 即使输入无效，asp 页面上的自定义验证器也会返回 Page.IsValid (ture)

> ID：15965211
> 
> 赞同：1
> 
> 时间：2013-04-12T07:10:27.483
> 
> 标签：asp.net, validation, email-validation

我有一段代码需要修复。

```
<td>
   <asp:TextBox ID="txtEmail" runat="server" CssClass="TextBoxCss"></asp:TextBox>
   <asp:RequiredFieldValidator ID="reqEmail" runat="server" ControlToValidate="txtEmail"
        ErrorMessage="Enter Email" ValidationGroup="entryvalid" Display="None">  
   </asp:RequiredFieldValidator>
   <asp:ValidatorCalloutExtender ID="ValidatorCalloutExtender4" runat="server" 
        TargetControlID="reqEmail"  CssClass="CustomValidator" />
   <asp:CustomValidator ID="valEmail" ControlToValidate="txtEmail" Display="None"
        runat="server" ValidationGroup="entryvalid" ErrorMessage="Invalid Email Address"
        ClientValidationFunction="ValidateEmail" />
   <asp:ValidatorCalloutExtender ID="ValidatorCalloutExtender3" runat="server" 
        TargetControlID="valEmail" CssClass="CustomValidator" />
</td> 
```

如果我将电子邮件框留空，那么它会显示“输入邮件”和 page.IsValid使用以下代码返回**False ：**

```
public bool IsValid
{
   get
    {
     EnableValidation(true);
     Page.Validate("entryvalid");                
     return Page.IsValid;
    }
} 
```

电子邮件验证功能：

```
function ValidateEmail(source, arguments) {
    var val1 = $.trim(arguments.Value.toLowerCase());
    var regexemail = /^([\w-_]+\.)*[\w-_]+@([\w-_]+\.)*[\w-_]+\.[\w-_]+$/;
    arguments.IsValid = regexemail.test(val1);
} 
```

但是当我给无效的电子邮件（“user@gmail@.com”）它说“无效条目”但 Page.IsValid 返回**True**。

任何人都可以请提到哪里可能是错的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T08:08:28.480

我将其用于电子邮件验证：

```
<asp:RegularExpressionValidator ID="valEmail" runat="server" 
  ErrorMessage="* Please enter a valid email address" 
  ControlToValidate="txtEmail"
  ValidationGroup="Group1" 
  ValidationExpression="^[_a-zA-Z0-9-]+(\.[_a-zA-Z0-9-]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*(\.[a-zA-Z]{2,4})$">
</asp:RegularExpressionValidator> 
```

这是客户端验证而不是服务器端验证

**编辑**

目前服务器不知道自定义验证器是否有效。

您需要将：添加`OnServerValidate="ServerValidation"`到 aspx.xml 中的自定义验证器。

然后添加以下服务器端：

```
void ServerValidation (object source, ServerValidateEventArgs arguments)
{
  //perform your check here.
  arguments.IsValid = false;
} 
```

现在，当`Page.IsValid`被调用时，服务器将知道自定义验证器。

看[这篇文章](http://msdn.microsoft.com/en-us/library/9eee01cx%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:34:19.557

试试这个 Aspx 代码：

```
<asp:RequiredFieldValidator runat="server" ID="rfvEmail" Display="None" ControlToValidate="txtEmail"
                            InitialValue="" ValidationGroup="SubscriptionDetails" ErrorMessage="Email is Mandatory"
                            ForeColor="Red"></asp:RequiredFieldValidator>
                        <ajaxToolkit:ValidatorCalloutExtender ID="vceEmail" TargetControlID="rfvEmail" runat="server">
                        </ajaxToolkit:ValidatorCalloutExtender>
                        <asp:RegularExpressionValidator ID="regexEmailValid" runat="server" ValidationExpression="^[a-zA-Z][\w\.-]*[a-zA-Z0-9]@[a-zA-Z0-9][\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]$"
                            ControlToValidate="txtEmail" ErrorMessage="Invalid Email" ValidationGroup="SubscriptionDetails"
                            Display="None"></asp:RegularExpressionValidator>
                        <ajaxToolkit:ValidatorCalloutExtender ID="vce1Email" TargetControlID="regexEmailValid"
                            runat="server">
                        </ajaxToolkit:ValidatorCalloutExtender> 
```

# cordova - 与 phonegap ios 一起使用时，kendo ui mobile 挂起

> ID：15965219
> 
> 赞同：0
> 
> 时间：2013-04-12T07:11:13.583
> 
> 标签：cordova, kendo-ui, kendo-mobile

我正在使用新发布的 kendoui 2013、phonegap 2.6.0、ios 模拟器 6.1 和 iphone 4s(ios 6.1)。

我尝试了两种方法：1）使用phonegap生成的index.html并手动添加kendoui css和javascript。2) 编写一个没有phonegap javascript 的简单kendoui index.html。

两种方式都将挂在开始屏幕上（尚未显示 index.html）。但是如果我删除下面的代码，它就不会挂起，而是会显示 index.html。

```
var app = new kendo.mobile.Application(); 
```

然后我在代码下添加一个警报：

```
var app = new kendo.mobile.Application();
alert("ddddd"); 
```

警报将显示在开始屏幕上，但它仍会挂在开始屏幕上并且不会显示 index.html。

kendoui初始功能中似乎有一些异步任务，并且无法在设备上完成。

index.html 的源代码：

```
<!DOCTYPE html>
<!--
    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
     KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.
-->
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <!-- <link rel="stylesheet" type="text/css" href="css/index.css" /> -->
        <link href="1/css/kendo.mobile.all.min.css" rel="stylesheet" />
        <title>Hello World</title>
    </head>
    <body>
        <div data-role="view" id="home">
            <header data-role="header">
                <div data-role="navbar">
                    dddd
                </div>
            </header>
        </div>
        <script type="text/javascript" src="cordova-2.6.0.js"></script>
        <script src="1/js/jquery.min.js"></script>
        <script src="1/js/kendo.all.min.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript">
            app.initialize();
            var app = new kendo.mobile.Application();
        </script>
    </body>
</html> 
```

有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T14:39:21.753

除了删除 app.initialize()，您还需要移动 var app = new kendo.mobile.Application(); [对 PhoneGap 的deviceready](http://docs.phonegap.com/en/2.6.0/cordova_events_events.md.html#deviceready)事件的初始化调用。

```
<script>

    document.addEventListener("deviceready", onDeviceReady, false);

    function onDeviceReady() {

        // Now safe to use the Cordova API
        var app = new kendo.mobile.Application();
    }

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:29:09.973

在分配之前，您正在尝试使用 app 的方法。此外，Kendo UI Mobile 的应用程序中没有这样的方法。只需删除 app.initialize() 行，您的应用程序可能就可以工作了。

# sdk - 我需要哪个版本的 windows phone sdk？

> ID：15965220
> 
> 赞同：0
> 
> 时间：2013-04-12T07:11:15.690
> 
> 标签：sdk, windows-phone

我有 Windows 8 - 32 位系统。我需要安装哪个版本的sdk？在 windows 8 32 位中安装 windows phone sdk 的任何其他选项？我在哪里获得适用于 windows8 32 位操作系统的 windows sdk？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:35:24.687

从[这里](https://dev.windowsphone.com/en-us)开始！你明白一切。

对于[wp7.1](http://www.microsoft.com/en-us/download/details.aspx?id=27570)

```
System requirements
Supported operating systems: Windows 7, Windows Vista

Windows® Vista® (x86 and x64) with Service Pack 2 – all editions except Starter Edition
Windows 7 (x86 and x64) – all editions except Starter Edition
Installation requires 4 GB of free disk space on the system drive.
3 GB RAM
Windows Phone Emulator requires a DirectX 10 or above capable graphics card with a WDDM 1.1 driver

The Windows Phone SDK 7.1 is compatible with the final version of Visual Studio 2010 SP1\. 
```

对于[wp8](http://www.microsoft.com/en-us/download/details.aspx?id=35471)

```
System requirements
Supported operating systems: Windows 8, Windows 8 Pro

Operating system type:
Windows 8 64-bit (x64) client versions
Hardware:
6.5 GB of free hard disk space
4 GB RAM
64-bit (x64) CPU
Windows Phone 8 Emulator:
Windows 8 Pro edition or greater
Requires a processor that supports Second Level Address Translation (SLAT)
If your computer meets the hardware and operating system requirements, but does not meet the requirements for the Windows Phone 8 Emulator, the Windows Phone SDK 8.0 will install and run. However, the Windows Phone 8 Emulator will not function and you will not be able to deploy or test apps on the Windows Phone 8 Emulator. 
```

基本上，您需要 Win 8 64x 或 Win7。

# php - 提交到会话而不更改页面？

> ID：15965228
> 
> 赞同：0
> 
> 时间：2013-04-12T07:11:31.720
> 
> 标签：php

我目前正在使用 PHP 开发一个网上商店项目，但我在购物车方面遇到了困难。基本上我做了一个这样的会话：

```
session_start();
$cart = array('product1', 'product2'); //Test values
$_SESSION['cart'] = $cart; 
```

然后，当我打开产品页面时，我希望可以通过按钮将产品添加到我的数组中。

```
<form action="submit.php" method="post"><button name="buy" type="submit">
Buy It!</button></form> 
```

这是 submit.php 的代码：`<?php $cart[]="product3";?>`

现在这实际上根本不起作用。我用的是$_POST，网页变了，新产品没有添加到会话数组中……

我的问题是：提交时如何保持在同一个网页中，以及如何将其实际添加到会话数组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:14:44.127

将 submit.php 更改为

```
 <?php 
         session_start();
         $_SESSION['cart'][]="product3";
      ?> 
```

留在同一个网页上..你必须使用**ajax**提交表单..[在这里学习](http://api.jquery.com/jQuery.post/)

# php - 无法调用未定义 Cgridcview 的方法“更新”

> ID：15965230
> 
> 赞同：1
> 
> 时间：2013-04-12T07:11:34.030
> 
> 标签：php, yii

`$.fn.yiiGridView.update('sopodetail-grid'+itemcd);` 这个函数没有运行。

它`Cannot call method 'update' of undefined`在控制台中说。

通过ajax插入数据`gridview`不刷新时出现问题。

我使用 foreach 循环渲染多个网格视图，并使用 concatenating 使它们中的每一个都是唯一的 id `item_cd`。

```
 function validateDetailForm()
    {
        var jForm   = $('#sopodetail-form');                                                    
        var data    = jForm.serialize();
        var itemcd  = $('#cmbitemcd').val();

        $.ajax({
            type: 'POST',
            url : jForm.attr('action'),
            data: data,
            dataType:'html',
            success:function(data) 
            {

                $(".info").animate({opacity: 1.0}, 3000).fadeOut("slow");
                $.fn.yiiGridView.update('sopodetail-grid'+itemcd);
            },
            error: function(data) { // if error occured
                alert('Error occured.please try again');
                $('#detail-content').html(data);
            },
        });
    } 
```

这就是我如何渲染多个 gridview 我连接 id ......

```
foreach($modelSoDet as $modelSoDetObj):
    $this->widget('zii.widgets.CDetailView', array(
            'data'=>$modelSoDetObj,
            'attributes'=>array(
                'item_cd',
                'item.item_name',
                'item.item_desc',
                'qty',
                'qty_purchased'
            )
    ));

    $modelSoPoDetail = new Sopodetail();
    $modelSoPoDetail->unsetAttributes();
    $modelSoPoDetail->so_cd   = $modelSoDetObj->so_cd;
    $modelSoPoDetail->item_cd = $modelSoDetObj->item_cd;
    $gridid           = 'sopodetail-grid'.$modelSoPoDetail->item_cd; 

    $this->widget('zii.widgets.grid.CGridView', array(
            'dataProvider'=>$modelSoPoDetail->search(),
            'summaryText' => '',
            'id'=>$gridid,
            'columns'=>array(
                'type',
                'po_cd',
                'qty'
            )
    ));
            endforeach; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-01T00:25:05.770

`$.param.querystring`从 中调用`yiiGridView.update`并且位于 中`jquery.ba-bbq.js`。

如果您有包含的内容，请检查您的 HTML 源代码`jquery.ba-bbq.js`...

如果`jquery.ba-bbq.js`包含 ，那么您可能会在 .之后重新创建 jQuery 对象`jquery.ba-bbq.js`。例如 jQuery 被多次加载....

来源：[http ://www.yiiframework.com/forum/index.php/topic/9387-cgridview-update/](http://www.yiiframework.com/forum/index.php/topic/9387-cgridview-update/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:24:04.547

您应该简单地尝试使用正确的语法：

```
$('sopodetail-grid'+itemcd).yiiGridView('update'); 
```

# java - Java反射获取多个类

> ID：15965238
> 
> 赞同：1
> 
> 时间：2013-04-12T07:11:59.800
> 
> 标签：java, reflection

如何使用反射获取 .java 文件的所有类名。

当我运行以下代码时，它只会打印出 Boat。我尝试过制作一系列类，例如：

```
Class c[] = Class.forName("boat.Boat") 
```

但它会导致语法错误

```
public class Reflection {
public static void main(String[] args) {
    try {           
         Class c = Class.forName("boat.Boat");
         System.out.println(c.getSimpleName()); 
    } catch(Exception e) {
        e.printStackTrace();
    }
  }
} 
```

船.java

```
package boat;
public class Boat extends Vehicle {
     public Boat() {}
}

class Vehicle {
     public Vehicle() {
         name = "";
     }
     private name;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T07:15:13.640

即使您在单个 .java 文件中编写多个类（只有一个公共类），您也会得到多个 .class 文件。因此，您无法从 .java 文件中获取类列表。

您确实可以选择编写自定义解析器来解析 .java 文件并检索类名。不知道那有什么用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:17:44.103

您可以`Boat`通过调用对象`getSuperclass()`来获取类的超类`Class`：

```
Class<?> c = Boat.class;

Class<?> superClass = c.getSuperclass();
System.out.println(superClass.getSimpleName());  // will print: Vehicle 
```

查看[java.lang.Class](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html)的 API 文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T07:17:51.643

它是我们在not`.class`中提供的文件。文件。所以没有规定使用方法从 .java 文件中获取所有类。`Class.forName("");``java``Class.forName()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T07:18:10.280

如果您愿意使用其他库，则可以使用 Reflections Project，它允许您搜索包中列出的类。

```
 Reflections reflections = new Reflections("my.package.prefix");
 //or
 Reflections reflections = new Reflections(ClasspathHelper.forPackage("my.package.prefix"), 
      new SubTypesScanner(), new TypesAnnotationScanner(), new FilterBuilder().includePackage(...), ...);

 //or using the ConfigurationBuilder
 new Reflections(new ConfigurationBuilder()
      .filterInputsBy(new FilterBuilder().includePackage("my.project.prefix"))
      .setUrls(ClasspathHelper.forPackage("my.project.prefix"))
      .setScanners(new SubTypesScanner(), new TypeAnnotationsScanner().filterResultsBy(optionalFilter), ...));

 //then query, for example:
 Set<Class<? extends Module>> modules = reflections.getSubTypesOf(com.google.inject.Module.class);
 Set<Class<?>> singletons =             reflections.getTypesAnnotatedWith(javax.inject.Singleton.class);

 Set<String> properties =       reflections.getResources(Pattern.compile(".*\\.properties"));
 Set<Constructor> injectables = reflections.getConstructorsAnnotatedWith(javax.inject.Inject.class);
 Set<Method> deprecateds =      reflections.getMethodsAnnotatedWith(javax.ws.rs.Path.class);
 Set<Field> ids =               reflections.getFieldsAnnotatedWith(javax.persistence.Id.class);

 Set<Method> someMethods =      reflections.getMethodsMatchParams(long.class, int.class);
 Set<Method> voidMethods =      reflections.getMethodsReturn(void.class);
 Set<Method> pathParamMethods = reflections.getMethodsWithAnyParamAnnotated(PathParam.class);
 Set<Method> floatToString =    reflections.getConverters(Float.class, String.class); 
```

如您所见，您可以使用不同的过滤器进行搜索。我不认为你不能为 java 文件做，但你可以在所有类中搜索包名。

# mysql - 使用 ruby 从 Mysql 获取数据

> ID：15965242
> 
> 赞同：2
> 
> 时间：2013-04-12T07:12:15.413
> 
> 标签：mysql, ruby-on-rails

我的代码是这个

```
db_con =Mysql.new('localhost', 'root', 'root', 'user')
obj = db_con.query("select * from users where id=1 limit 1")
title=obj.fetch_hash["title"] 
```

它给出了结果，但我的标题是俄语，例如（знак ударения, znak udareniya）它给了我们

```
title =???? ????????, znak udareniya 
```

在我的数据库中存储`,знак ударения, znak udareniya`

我该如何解决这个问题请建议我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:21:58.897

你用

```
 db_con =Mysql.new('localhost', 'root', 'root', 'user')
    db_con.query("set names utf8")
    obj = db_con.query("select * from users where id=1 limit 1")
    title=obj.fetch_hash["title"] 
```

我找到了原始结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:46:37.770

将 DB 中的编码更改为 utf8 或创建一个新的 db：

```
$ mysql -u USER -p
create database YOURDB_NAME_development CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

# c - 取消引用 void 指针数组

> ID：15965244
> 
> 赞同：-1
> 
> 时间：2013-04-12T07:12:17.083
> 
> 标签：c, pointers, malloc

我有一组 void 指针，我想将它们放入一个 void 指针数组中。我从 malloc 开始：

```
void **p2vals=malloc(nelems*sizeof(void*)); 
```

..这给了我一个指向指针的数组。但是后来我想取消引用像 *p2vals 这样的 p2vals ，这应该让我得到一个 void 指针。当然编译器不喜欢它，但我需要它。我想设置

```
*(p2vals+someoffset)=somevoidptr; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:21:23.693

考虑，

```
int a = 5;
int *p = &a; 
```

在这种情况下，我们向编译器表明 p 将指向一个整数。因此，众所周知，当我们`*p`在运行时执行类似的操作时，没有。将读取等于 int 大小的字节数。

取消引用 void 指针，编译器将不知道要准确读取多少字节。`type`在使用它们之前，您需要将它们类型转换为一些

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:30:16.773

如果您想将内存地址存储为变量，我建议您使用`uintptr_t`而不是`void *`。如果您想写入或读取任何偏移量，只需执行`(uintptr_t)((char *)(pointer) + offset)`.

# android - 如何在android中将视频上传到youtube？

> ID：15965246
> 
> 赞同：14
> 
> 时间：2013-04-12T07:12:21.377
> 
> 标签：android, video, upload, youtube-api, share

我正在创建一个应用程序来录制视频并将其上传到 YouTube 和其他社交网站。

对于上传，我使用 Droid 共享功能，效果很好。

在电子邮件、Facebook、Skype 等中上传完美，但当我选择 YouTube 时，它​​不会上传我的视频。

这是我用于视频共享的代码。

```
Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,"SUBJECT_NAME");
sharingIntent.setType("video/*");
File newFile = new File(video_path);
sharingIntent.putExtra(android.content.Intent.EXTRA_STREAM,Uri.fromFile(newFile));
startActivity(Intent.createChooser(sharingIntent,"Where you want to share?")); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-17T10:19:12.553

试试这个代码。

```
ContentValues content = new ContentValues(4);
content.put(Video.VideoColumns.DATE_ADDED,
System.currentTimeMillis() / 1000);
content.put(Video.Media.MIME_TYPE, "video/mp4");
content.put(MediaStore.Video.Media.DATA, "video_path");
ContentResolver resolver = getBaseContext().getContentResolver();
Uri uri = resolver.insert(MediaStore.Video.Media.EXTERNAL_CONTENT_URI, content);

Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,"Title");
sharingIntent.putExtra(android.content.Intent.EXTRA_STREAM,uri);
startActivity(Intent.createChooser(sharingIntent,"share:")); 
```

此代码*添加*到您的**分享按钮的 onClick()** *方法*中并获取结果。**将EXTRA_STREAM**中的值作为**URI**而不是作为文件传递。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-14T06:47:25.687

我没有足够的声誉来发表评论，但我失去了一个小时左右的时间试图让 user2126788 的代码工作，因为我忘记在意图上设置类型。

```
sharingIntent.setType("video/*"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T09:57:16.617

请在 android manifest 中添加这一行

```
 <intent-filter>
     <action android:name="android.intent.action.SEND" />
     <category android:name="android.intent.category.DEFAULT" />              
     <data android:host="www.youtube.com" android:mimeType="text/*" /> 
     </intent-filter> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-13T13:40:19.690

经过几个小时试图找出如何让它在 facebook、youtube、instagram 和 whatsapp 上上传和分享视频。这是对我有用的代码。将录制的视频从您的应用程序上传到社交媒体应用程序

```
ContentValues content = new ContentValues(4);
            content.put(Video.VideoColumns.DATE_ADDED,
            System.currentTimeMillis() / 1000);
            content.put(Video.Media.MIME_TYPE, "video/mp4");
            content.put(MediaStore.Video.Media.DATA, "your_path_to_video");
            ContentResolver resolver = getBaseContext().getContentResolver();
            Uri uri = resolver.insert(MediaStore.Video.Media.EXTERNAL_CONTENT_URI, content);

            Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
            sharingIntent.setType("video/*");
            sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,"Title");
            sharingIntent.putExtra(android.content.Intent.EXTRA_STREAM,uri);
            startActivity(Intent.createChooser(sharingIntent,"share:")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T14:19:47.350

这段代码对我来说很好。

我尝试实施并获得最佳结果。

因此，如果有人遇到此类问题，请尝试此代码。

我敢肯定它也非常适合您。

```
ContentValues content = new ContentValues(4);
content.put(Video.VideoColumns.DATE_ADDED,
System.currentTimeMillis() / 1000);
content.put(Video.Media.MIME_TYPE, "video/mp4");
content.put(MediaStore.Video.Media.DATA, "path_of_video");
ContentResolver resolver = getBaseContext().getContentResolver();
Uri uri = resolver.insert(MediaStore.Video.Media.EXTERNAL_CONTENT_URI, content);

Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,"Title_text");
//sharingIntent.setType("video/*");
//File newFile = new File(path_var);
sharingIntent.putExtra(android.content.Intent.EXTRA_STREAM,uri);
startActivity(Intent.createChooser(sharingIntent,"Where you want to share?")); 
```

这段代码在你的分享按钮的 onClick() 方法中并得到结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T09:02:16.923

这段代码*对我来说很好。*

```
Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,"Title_text");
//sharingIntent.setType("video/*");
File newFile = new File(path_var);
sharingIntent.putExtra(android.content.Intent.EXTRA_STREAM,uri);
startActivity(Intent.createChooser(sharingIntent,"Where you want to share?")); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-17T20:13:12.513

另一个很好的解决方案是在不离开应用程序的情况下实现自己的上传机制。您可以将 Google Java 和 Android 库与 YouTube Java 库一起使用。

这是一个完整的应用程序：[https ://github.com/youtube/yt-direct-lite-android](https://github.com/youtube/yt-direct-lite-android)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-12T19:44:54.533

```
 ContentValues content = new ContentValues(4);
        content.put(MediaStore.Video.VideoColumns.DATE_ADDED,
                System.currentTimeMillis() / 1000);
        content.put(MediaStore.Video.Media.MIME_TYPE, "video/mp4");
        content.put(MediaStore.Video.Media.DATA, path);
        ContentResolver resolver = getActivity().getContentResolver();
        Uri uri1 =  Uri.fromFile(new File(path)); 

        Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
        sharingIntent.setType("video/*");
        sharingIntent.setPackage("com.google.android.youtube");
        sharingIntent.putExtra(Intent.EXTRA_TITLE, "Title");
        sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Desc");
        sharingIntent.putExtra(android.content.Intent.EXTRA_STREAM, uri1);
        startActivity(Intent.createChooser(sharingIntent, "Share to")); 
```

# jquery - 如何在取消选择特定复选框时取消选中复选框

> ID：15965247
> 
> 赞同：0
> 
> 时间：2013-04-12T07:12:23.117
> 
> 标签：jquery

我想根据取消选中另一个复选框来取消选中复选框。前任。

```
 <input id=isActive_1 type=checkbox />
<input id=isActive_2 type=checkbox />
<input id=isActive_3 type=checkbox />

    <input id=publish_1 type=checkbox />
<input id=publish_2 type=checkbox />
<input id=publish_3 type=checkbox /> 
```

当我取消选中“isActive_1”时，此时应该取消选中“publish_1”。请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:21:58.217

看到这个： [小提琴](http://jsfiddle.net/vJvR8/)

```
$('input[id^=isActive_]').change(function () {
   $("input[id^=publish" + this.id.replace('isActive', '') + "]").attr('checked', this.checked);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:14:17.027

```
$("input#isActive_1").click(function(){
 if($('input#isActive_1:checked').length > 0)
   $('input#publish_1').attr('checked', true);
 else
   $('input#publish_1').attr('checked', false);
}); 
```

**编辑：**错误的测试知道是否第一次选中“isActive_1”复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T07:14:51.390

你可以使用这个：

```
$(document).ready(function(){
    $("input#isActive_1").click(function(){
        if(!$("input#isActive_1").prop("checked"))
          $("input#publish_1").prop("checked", false);
        else
          $("input#publish_1").prop("checked", true);
    });
}); 
```

### 小提琴：http: [//jsfiddle.net/praveenscience/uJxL8/](http://jsfiddle.net/praveenscience/uJxL8/)

* * *

**从评论更新**

以这种方式使用正则表达式选择器：

```
$(document).ready(function(){
    $("[id^=isActive_]").click(function(){
        /////
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T07:17:28.240

首先对属性值使用双引号，并使用`isActive_`复选框的id来获取索引`publish_`

**[现场演示](http://jsfiddle.net/kP5nm/1/)**

*html*

```
<input id="isActive_1" type="checkbox" />
<input id="isActive_2" type="checkbox" />
<input id="isActive_3" type="checkbox" />
<input id="publish_1" type="checkbox" />
<input id="publish_2" type="checkbox" />
<input id="publish_3" type="checkbox" /> 
```

*Javascript*

```
$('[id^=isActive_]').change(function () {
    $('#publish_' + this.id.replace('isActive_', '')).attr('checked', this.checked);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T07:18:55.643

你应该试试这个： [JSFiddle](http://jsfiddle.net/tXd8G/3/)

```
$(function() {
    $(document).on("click", "input[id^='isActive_']", function() {
        var number = +$(this).attr("id").substring(9);
        var checked = $(this).prop("checked");

        // for checking & unchecking behaviour
        //$("#publish_"+number).prop("checked", checked);

        if(!checked) {
            $("#publish_"+number).prop("checked", false);
        }
    });
}); 
```

（或与“改变”事件）

您现在可以添加任意数量的复选框，甚至可以动态添加（例如，在页面加载和 JavaScript 执行后 - 从 AJAX）

# highcharts - 在 HighCharts 气泡图中的轴上强制 0

> ID：15965250
> 
> 赞同：0
> 
> 时间：2013-04-12T07:12:37.410
> 
> 标签：highcharts, bubble-chart

我想强制我的气泡图的轴从 0 开始。在我要设置的任何其他图表类型中

```
yAxis: {
   min:0
} 
```

但这可能会导致 y 值接近零的气泡被剪裁。

到目前为止，我能想到的只是添加一个不可见的虚拟系列来强制轴从 0 开始。

有关我的问题和解决方法，请参阅[http://jsfiddle.net/kzoon/jd3c9/](http://jsfiddle.net/kzoon/jd3c9/)。

有没有人更好地解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:28:26.800

使用刻度定位器怎么样？它允许您以编程方式设置刻度位置。查看文档：[http ://api.highcharts.com/highcharts#yAxis.tickPositioner](http://api.highcharts.com/highcharts#yAxis.tickPositioner)

示例函数可以这样工作：

1.  查找轴的最小值和最大值
2.  如果 min 大于 0，则使用 0 作为 min：
3.  除非我们达到最大值，否则每“20”添加一次刻度

在这里你可以找到代码：

```
yAxis: {
    tickPositioner: function () {
        var positions = [],
            min = Math.floor(this.min / 10) * 10,
            max = Math.ceil(this.max / 10) * 10,
            step = 20,
            tick;

        if (min > 0)
            min = 0;

        tick = min;

        while (tick < max + step) {
            positions.push(tick);
            tick += step;
        }

        return positions;
    }
}, 
```

并在 jsfiddle 上工作演示：http: [//jsfiddle.net/2ABFW/](http://jsfiddle.net/2ABFW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:24:28.240

您可以使用**startWithTick**：http: [//jsfiddle.net/jd3c9/8/](http://jsfiddle.net/jd3c9/8/)

```
 yAxis: {
        startWithTick: true
    } 
```

现在您的 y 轴将显示 0 下的下一个刻度（在本例中为 -20），并且不会剪切任何气泡。

# awk - 如何在使用 uniq 或 awk 的 shell 脚本中获取唯一 IP 地址和错误的计数？

> ID：15965251
> 
> 赞同：0
> 
> 时间：2013-04-12T07:12:39.193
> 
> 标签：awk, uniq, nslookup

我正在使用 shell 脚本对 URL 进行 nslookup 以进行多次迭代。我需要检查每个 URL 返回了多少次 IP。

在输出文件中，输出存储为

```
URL 
IP address 
```

使用 uniq -c 命令我在相同 IP 地址相邻时得到计数，但当相同 IP 地址在非相邻行上时不计算

```
Command is 
cat file.log | awk '{print $1}' | uniq -c 
```

这是示例输出

```
1 url
3 72.51.46.230 
```

现在，如果为特定 URL 返回多个 IP 地址，并且它们位于不相邻的行上，因为我没有运行。的迭代。在这种情况下，uniq-c 命令将不起作用。如果我使用排序选项，它会排序，但我需要为每个 URL 显示上面的输出，即。URL 和下一行包含计数及其 IP 地址。

例如。如果我在 google.com 上执行 nslookup，它将返回多个地址，并且我执行 uniq -c 我得到以下输出。如您所见，IP 地址相同，但计数仅为 1，因为 uniq -c 不适用于非相邻行。

```
 1 74.125.236.64
  1 74.125.236.78
  1 74.125.236.67
  1 74.125.236.72
  1 74.125.236.65
  1 74.125.236.73
  1 74.125.236.70
  1 74.125.236.66
  1 74.125.236.68
  1 74.125.236.71
  1 74.125.236.69
  1 nslookup: can't resolv 'google.com'
  1 nslookup: can't resolv 'google.com'
  1 nslookup: can't resolv 'google.com'
  1 nslookup: can't resolv 'google.com'
  1 nslookup: can't resolv 'google.com'
  1 nslookup: can't resolv 'google.com'
  1 nslookup: can't resolv 'google.com'
  1 74.125.236.70
  1 74.125.236.66
  1 74.125.236.68
  1 74.125.236.71
  1 74.125.236.69 
```

我也尝试过使用 AWK，但在这种情况下，输出没有按照我的要求进行格式化。

awk 命令

```
awk '{a[$0]++}END{for (i in a) printf "%-2d -> %s \n", a[i], i}' file.log 
```

您能否提出一个更好的解决方案来实现这一点 - 以上述格式获取计数和显示？

所需的输出格式是

```
URL
Count IP address 
```

示例输入文件。

```
URL1
72.51.46.230
72.51.46.230
google.com
74.125.236.64
74.125.236.78
(null)
nslookup: can't resolv 'google.com'
nslookup: can't resolv 'google.com'
nslookup: can't resolv 'google.com'
nslookup: can't resolv 'google.com'
nslookup: can't resolv 'google.com' 
```

需要的样本输出为

```
URL1
2 72.51.46.230
google.com
1 74.125.236.64
1 74.125.236.78
1 null
5 nslookup: can't resolv 'google.com' 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T08:03:09.190

以下`awk`脚本完成了这项工作：

```
$1~/[a-z]+[.].*/{         # If line have a letter in must be a URL 
    for(i in ip)          # Print all the counts and IPs (empty first time)
         print ip[i],i      
    delete ip             # Delete array for next set of IP's
    print                 # Print the URL 
    next                  # Skip to next line
}
{
    ip[$0]++              # If here line contains IP, increment the count per IP 
}
END{                      # Reached end of file need to print the last set of IPs
    for(i in ip)
        print ip[i],i
} 
```

将其另存为`script.awk`并运行如下：

```
$ awk -f script.awk file
creativecommons.org
2 72.51.46.230
google.com
5 nslookup: can't resolv 'google.com'
1 (null)
1 74.125.236.64
1 74.125.236.78 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:27:53.797

尝试您的第一个命令，但添加`sort`：

```
awk '{print $1}' file.log | sort | uniq -c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T07:39:58.887

你可以直接使用：

```
awk '{a[$1]++}END{for(i in a)print a[i],i}' file.log 
```

而不是多个命令和管道每个命令的输出。

如果你想要它没有 awk：

`cut -f1 -d"\t" file.log|sort|uniq-c`会做

# java - 如何使用 httpclient 发送 url 帖子

> ID：15965252
> 
> 赞同：0
> 
> 时间：2013-04-12T07:12:43.770
> 
> 标签：java, spring-mvc, reflection, apache-httpclient-4.x

我使用 httpclient 登录到我的项目，如下所示：

```
public void login(String username,String password){
        HttpClient client = new DefaultHttpClient();
        HttpPost post = new HttpPost("http://localhost:8080/j_spring_security_check");
        try {
          List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
          nameValuePairs.add(new BasicNameValuePair("j_username", username));
          nameValuePairs.add(new BasicNameValuePair("j_password", password));

          post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
          HttpResponse response = client.execute(post);

          BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        } catch (IOException e) {
          e.printStackTrace();
        }
      } 
```

我使用上面的如下：

```
HttpClientRequests httpRequest = new HttpClientRequests();
httpRequest.login("mayank","hexgen"); 
```

现在我想发送一个`POST`方法请求，如下所示：

```
@RequestMapping(method = RequestMethod.POST, value = "/trade/createrequisition")
    public @ResponseBody
    void createRequisition(@RequestBody CreateRequisitionRO[] request,
            @RequestHeader("validateOnly") boolean validateOnly) {
....
} 
```

所以我创建了如下反射：

```
HttpClientRequests httpRequest = new HttpClientRequests();
        Class[] paramString = new Class[1]; 
        paramString[0] = String.class;

        Class parames = CreateRequisitionRO[].class;

        CreateRequisitionRO[] roRqequest = new CreateRequisitionRO[1];
        boolean istrueOrFalse=true;

        Class booleanVal ;  
        booleanVal = Boolean.TYPE;

        Class cls;
        try {
            cls = Class.forName("com.hexgen.api.facade.HexgenWebAPI");

            Method method = cls.getDeclaredMethod("createRequisition", parames,booleanVal);

            RequestMapping methodRequestMappingAnnotation = method.getAnnotation(RequestMapping.class);
            RequestMethod[] methods = methodRequestMappingAnnotation.method();
            String[] mappingValues = methodRequestMappingAnnotation.value();
            //String methodType = methods[0].name();
            //String url = mappingValues[0];

            httpRequest.login("mayank","hexgen");

        }catch(Exception ex){
            ex.printStackTrace();
        } 
```

现在在此之后`httpRequest.login("mayank","hexgen");`如何发送请求以访问以下方法：

```
@RequestMapping(method = RequestMethod.POST, value = "/trade/createrequisition")
        public @ResponseBody
        void createRequisition(@RequestBody CreateRequisitionRO[] request,
                @RequestHeader("validateOnly") boolean validateOnly) {
    ....
    } 
```

所以。

我能够以编程方式登录系统，但成功登录后无法调用。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:20:39.117

这取决于服务可以接受什么样的内容。XML/json/什么？

我看到你得到了你必须通过反射发布的地址。您应该发布到该地址的内容是`CreateRequisitionRO`编组为 json/xml(?) 的数组。将它们编组后，只需将该内容设置为请求实体发送帖子消息。然后服务器端应该解组请求内容并调用`createRequisition()`处理程序方法。

编组的完成方式取决于您的项目。有很多库，我猜 JAXB 是最流行的。

# wxpython - 更改 StaticText 标签的正确方法是什么？

> ID：15965254
> 
> 赞同：7
> 
> 时间：2013-04-12T07:13:08.853
> 
> 标签：wxpython, wxwidgets

我正在编写一个 wxPython 应用程序，当我尝试更改 StaticText 对象中的文本时，我设置的对齐方式消失了。它从居中开始，但在文本更改后，对齐方式又回到默认的左对齐方式。这是我的相关代码：

```
#initializing
self.panel = wx.Panel(self)
self.st_RouteInfo = wx.StaticText(self.panel, label=self.route_start, style=wx.ALIGN_CENTRE)

#changing StaticText
self.st_RouteInfo.SetLabel("Put text here")
self.Update() 
```

我猜我忘记了一些基本的东西，因为我是 wxPython 和 wxWidgets 的新手。谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-12T09:19:41.383

您必须调用 sizer 或 parent 的[`Layout()`](http://www.wxpython.org/docs/api/wx.Sizer-class.html#Layout)方法：

```
class MainWindow(wx.Frame):
    def __init__(self, *args, **kwargs):
        wx.Frame.__init__(self, *args, **kwargs)

        self.panel = wx.Panel(self)
        self.label = wx.StaticText(self.panel, label="Test", style=wx.ALIGN_CENTRE)
        self.button = wx.Button(self.panel, label="Change")

        self.sizer = wx.BoxSizer()
        self.sizer.Add(self.label, 1)
        self.sizer.Add(self.button)

        self.button.Bind(wx.EVT_BUTTON, self.OnButton)

        self.panel.SetSizerAndFit(self.sizer)  
        self.Show()

    def OnButton(self, e):
        self.label.SetLabel("Oh, this is very looooong!")
        self.sizer.Layout()
        # self.panel.Layout()  #Either works

app = wx.App(False)
win = MainWindow(None)
app.MainLoop() 
```

# regex - 克隆集合标准。它们可以不区分大小写或正则表达式吗？

> ID：15965258
> 
> 赞同：2
> 
> 时间：2013-04-12T07:13:24.417
> 
> 标签：regex, plone

我想根据包含字符串“任务报告”的任何内容的内容标题创建一个集合。这可以是大小写的任意组合，分隔符可以是空格、破折号或下划线。

因此，一个简单的解决方案是文本搜索条件上的正则表达式（或等效）。有没有办法做到这一点？* 似乎可以用作通配符，但仅此而已。

我可以添加多个条件，但这些似乎是 ANDed，我看不到 OR 它们的任何选项。有没有办法 OR 收集标准？

另一种方法是在所有相关内容上强制执行标签，但如果我能避免走那条路，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T14:45:06.030

[集合建立在 Plone ZCatalog](http://plone.org/documentation/manual/developer-manual/indexing-and-searching/introduction-to-zcatalog)索引工具之上。它们基本上代表罐头查询。

因此，它们也*受到*目录功能的限制。Plone 目录只能进行`AND`搜索。它的 Title 索引已经是全文搜索索引，具有词干和不区分大小写的匹配，但没有支持正则表达式搜索的索引类型。

有一个[`AdvancedQuery`附加组件](http://plone.org/documentation/manual/developer-manual/indexing-and-searching/searching-with-advancedquery)至少`OR`也支持查询，但是您必须创建一个自定义的 Collections 子类才能使用该工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T14:07:13.867

任何内容对象的内容都应在 SerachableText 索引中编制索引。该索引是一个文本索引，它将标记并使所有内容都不区分大小写。

# python - Python 解释器模式 - 有哪些方法可以探索 Python 的模块及其用法

> ID：15965260
> 
> 赞同：3
> 
> 时间：2013-04-12T07:13:31.917
> 
> 标签：python, interpreter, code-documentation

在 Python 解释器中：

有哪些方法可以了解我拥有的包裹？

```
>>> man sys
File "<stdin>", line 1
    man sys
      ^ 
```

SyntaxError：无效的语法

```
>>> sys --help
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: bad operand type for unary -: '_Helper' 
```

更正：

```
>>> help(sys)
... 
```

现在，我如何查看我的 sys.path 上所有可用的包？并查看它们的后续用法和文档。我知道我可以轻松下载 PDF，但所有这些东西都已经准备好了，我不想复制文件。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T07:44:43.390

你可以看一下`help("modules")`，它显示了可用模块的列表。要探索特定的模块/类/函数，请使用`dir`和`__doc__`：

```
>>> import sys
>>> sys.__doc__
"This module ..."

>>> dir(sys)
[..., 'setprofile', ...]

>>> print(sys.setprofile.__doc__)
setprofile(function)

Set the profiling function.  It will be called on each function call
and return.  See the profiler chapter in the library manual. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T07:46:02.660

Python 有一个广泛的内置帮助系统，您可以通过以下方式访问`help()`：

```
>>> help()

Welcome to Python 2.7!  This is the online help utility.

If this is your first time using Python, you should definitely check out
the tutorial on the Internet at http://docs.python.org/tutorial/.

Enter the name of any module, keyword, or topic to get help on writing
Python programs and using Python modules.  To quit this help utility and
return to the interpreter, just type "quit".

To get a list of available modules, keywords, or topics, type "modules",
"keywords", or "topics".  Each module also comes with a one-line summary
of what it does; to list the modules whose summaries contain a given word
such as "spam", type "modules spam".

help> modules

Please wait a moment while I gather a list of all available modules...

BaseHTTPServer      base64              importlib           sha
Bastion             bdb                 imputil             shelve
CGIHTTPServer       binascii            inspect             shlex
Canvas              binhex              io                  shutil
[...]

Enter any module name to get more help.  Or, type "modules spam" to search
for modules whose descriptions contain the word "spam".

help> base64
Help on module base64:

NAME
    base64 - RFC 3548: Base16, Base32, Base64 Data Encodings

FILE
    /usr/local/lib/python2.7/base64.py

MODULE DOCS
    http://docs.python.org/library/base64

FUNCTIONS
    b16decode(s, casefold=False)
        Decode a Base16 encoded string.

        s is the string to decode.  Optional casefold is a flag specifying whether
        a lowercase alphabet is acceptable as input.  For security purposes, the
        default is False.

        The decoded string is returned.  A TypeError is raised if s were
        incorrectly padded or if there are non-alphabet characters present in the
        string.

    b16encode(s)
        Encode a string using Base16.

        s is the string to encode.  The encoded string is returned.

    b32decode(s, casefold=False, map01=None)
        Decode a Base32 encoded string.

        s is the string to decode.  Optional casefold is a flag specifying whether
        a lowercase alphabet is acceptable as input.  For security purposes, the
        default is False.

        RFC 3548 allows for optional mapping of the digit 0 (zero) to the letter O
        (oh), and for optional mapping of the digit 1 (one) to either the letter I
        (eye) or letter L (el).  The optional argument map01 when not None,
        specifies which letter the digit 1 should be mapped to (when map01 is not
        None, the digit 0 is always mapped to the letter O).  For security
        purposes the default is None, so that 0 and 1 are not allowed in the
        input.

        The decoded string is returned.  A TypeError is raised if s were
        incorrectly padded or if there are non-alphabet characters present in the
        string.

    b32encode(s)
        Encode a string using Base32.

        s is the string to encode.  The encoded string is returned. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T08:27:19.610

有一个[名为 nullege 的搜索引擎](http://nullege.com/)，用于查找特定模块或对象在源代码中的使用方式。

请参阅[操作系统的示例](http://nullege.com/codes/search?cq=os)

[我在github 上](https://github.com/niccokunzmann/nullege)为此编写了一个 python 接口

# android - Android：如何以编程方式显示位置源设置？

> ID：15965261
> 
> 赞同：2
> 
> 时间：2013-04-12T07:13:35.823
> 
> 标签：android, setting

我想打开位置源设置，我这样做

```
 Intent intent = new Intent( Settings.ACTION_LOCATION_SOURCE_SETTINGS );
    startActivityForResult(intent, 0); 
```

但在某些手机（主要是 Android 4.0.4，一些 4.1.2）中，它会报告异常：

```
 android.content.ActivityNotFoundException: No Activity found to handle Intent {   act=android.settings.LOCATION_SOURCE_SETTINGS }
at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1518)
at android.app.Instrumentation.execStartActivity(Instrumentation.java:1390)
at android.app.Activity.startActivityFromChild(Activity.java:3472)
at android.app.Activity.startActivityForResult(Activity.java:3224)
at cn.safetrip.edog.function.map.h.onClick(HomeActivity.java:970)
at     com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:169)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:154)
at android.app.ActivityThread.main(ActivityThread.java:4624)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:809)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:576)
at dalvik.system.NativeStart.main(Native Method) 
```

我不知道...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T12:37:23.327

试试这个：

```
 startActivityForResult(new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS), 0); 
```

以及您输入代码的活动名称是什么。

# jquery - Jquery 工具提示在 IE 8 中不起作用

> ID：15965268
> 
> 赞同：1
> 
> 时间：2013-04-12T07:14:15.713
> 
> 标签：jquery, cross-browser, tooltip

```
<script>
$(function () {
    $(document).tooltip({
        content: function () {
            return $(this).prop('title');
        }
    });
});

<span title=\"<table class='tooltip'><tr><td class='tooltipqty'>11</td><td class='tooltipqty'>$11-01-13</td></tr></table>\">
Previous Schedule
</span> 
```

这与 FireFox 配合得很好，但没有错误出现，IE 中也没有工具提示。请帮我解决问题所在。

我正在使用以下来源

```
<link rel="stylesheet" type="text/css" href="jquery/css/jquery-ui-1.10.2.css" />
<script src="jquery/js/jquery-1.9.1.js"/></script>
<script src="jquery/js/jquery-ui-1.10.2.js"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:21:05.847

我无法立即测试您的问题，但我确实为您找到了这个，这似乎是一个类似的问题。你能试试吗？ [http://forum.jquery.com/topic/jquery-ui-tooltip-position-fixed](http://forum.jquery.com/topic/jquery-ui-tooltip-position-fixed)

# c# - 检查是否安装了任何类型的 PDF 阅读器

> ID：15965274
> 
> 赞同：6
> 
> 时间：2013-04-12T07:14:29.543
> 
> 标签：c#, visual-studio, pdf

我的 中有一个`Help`函数`Application`，它由一个`webbrowser control`. 那`webbrowser control`充满了`.pdf file`，其来源`.pdf file`是我们自己的网站。

问题是，不是每个人都会`PDF Reader`在他们的机器上安装一个，所以我想检查是否安装了一个：是或否。我搜索了互联网，我主要看到 Stackoverflow 上的用户想要检查是否`Adobe Reader`安装了，那不是我想要的。我需要知道`PDF Reader`机器上是否安装了某个地方。

我确实找到了以下代码，这可能对我有帮助：

```
public void CheckPdfReaderAvailable()      
{      
    RegistryKey key = Registry.ClassesRoot.OpenSubKey(".pdf");      
    Assert.IsNotNull(key);      
} 
```

当我查看上面的代码时，我的想法是代码检查是否`registry`知道`.pdf format`，但我不确定。

有人可以告诉我如何使用上面的代码或给我一个例子，关于我应该如何解决这个问题？

提前致谢！

**编辑：**

以下答案帮助了我：[https ://stackoverflow.com/a/774482/1661209](https://stackoverflow.com/a/774482/1661209)

解决这个问题的另一种方法是在先决条件中添加一个 pdf reader lite 并让用户首先安装它，您不必检查 pdf Reader，因为您知道然后安装了一个，如果没有您可以说他们无法使用帮助功能是用户的错误，因为您为他们提供了一种使用已发布项目轻松安装 pdf 阅读器的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T07:31:25.200

除了知道是否有用之外，您还可以检查以下注册表项：

`HKEY_CLASSES_ROOT\MIME\Database\Content Type\application/pdf`

这将有一个条目`CLSID`，它指向默认应用程序的类 ID。

如果注册表项或`CLSID`值不存在，则 MIME 类型未知，或者没有默认应用程序来处理 MIME 类型`application/pdf`文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T07:27:33.110

您可以直接查询注册表，但推荐的解决方案是使用[IQueryAssociations](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb761400%28v=vs.85%29.aspx)接口查看是否有注册的程序可以打开 pdf。可以在[pinvoke.net](http://www.pinvoke.net/default.aspx/shlwapi.AssocQueryString)上找到一个示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-16T10:05:36.963

John Willemse 建议的方法的 C# 实现（不会将 Edge 识别为 Windows 10 的非 N 版本上的默认查看器）：

```
 private bool CanOpenPDFFiles
    {
        get
        {
            bool CLSIDpresent = false;

            try
            {
                using (Microsoft.Win32.RegistryKey applicationPDF = Microsoft.Win32.Registry.ClassesRoot.OpenSubKey(@"MIME\Database\Content Type\application/pdf"))
                {
                    if (applicationPDF != null)
                    {
                        var CLSID = applicationPDF.GetValue("CLSID");
                        if (CLSID != null)
                        {
                            CLSIDpresent = true;
                        }
                    }
                }
            }
            catch (Exception)
            {

            }

            return CLSIDpresent;
        }
    } 
```

# javascript - 将 DOM 对象附加到 qunit-fixture + Qunit

> ID：15965280
> 
> 赞同：1
> 
> 时间：2013-04-12T07:14:47.110
> 
> 标签：javascript, qunit

我正在使用 Qunit 框架进行 javaScript 单元测试。我有一个带有表单和文本框的 DOM 对象。

```
 <div>
  <form action="/" id="Form1" method="post">
  <div>
    <input  data-val="true" data-val-fileextensions="The DocumentFileName field only 
            accepts files with the following extensions: doc,docx,txt,rtf,pdf" data-
            val-fileextensions-fileextensions="doc,docx,txt,rtf,pdf" id="Text1" 
            name="FileExtensiondTest.fileExtensionInValid.DocumentFileName" type="text" 
            value="test.ppt" />
  </div>
  </form>
 </div> 
```

我想将上面的 DOM 对象添加到 qunit-fixture 并在测试用例中访问 DOM 对象属性，如下所示：

```
 ok($("#FileExtensiondTest_fileExtensionInValid_DocumentFileName").hasClass("input-
         validation-error"), "True, Valid Test"); 
```

我尝试通过以下代码行将 DOM 添加到 qunit-fixture：

```
 $("#qunit-fixture").append('<div><form action="/" id="Form1" method="post"><div>        
      <input  data-val="true" data-val-fileextensions="The DocumentFileName field 
        only accepts files with the following extensions: doc,docx,txt,rtf,pdf" data-
        val-fileextensions-fileextensions="doc,docx,txt,rtf,pdf" id="Text1" 
        name="FileExtensiondTest.fileExtensionInValid.DocumentFileName" type="text" 
        value="test.ppt" /></div></form></div>'); 
```

我做得对吗..需要你的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-29T04:31:25.847

在您的代码中：

```
ok(
  $("#FileExtensiondTest_fileExtensionInValid_DocumentFileName")
    .hasClass("input-validation-error"), 
  true, 
  "Valid Test"
); 
```

您是否尝试使用“ **#FileExtensiondTest.fileExtensionInValid.DocumentFileName** ”或“ **#Text1** ”更改**“#FileExtensiondTest_fileExtensionInValid_DocumentFileName ”**

 ****让我们知道解决方案是什么。一旦你解决它。祝你好运！****

# sql-server - 索引 2 个最大整数的计算列

> ID：15965283
> 
> 赞同：-1
> 
> 时间：2013-04-12T07:14:52.747
> 
> 标签：sql-server, indexing, calculated-columns

根据 Sql Server，任何计算列只有在确定性时才能被索引。即，*考虑列 a、b 和 c 是 INT 数据类型和 c = a+b*。现在列 C 可以被索引，但是 ** 当列 a 或 b 拥有最大的 Integer 值时，它会抛出算术错误，有什么解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:21:51.497

```
create table TA (
    ID int not null primary key,
    a int not null,
    b int not null,
    c as a+b
)
go
create index IX_TA_c on TA (c)
go
insert into TA(ID,a,b) values (1,1,2147483647) 
```

插入得到：

```
Msg 8115, Level 16, State 2, Line 1
Arithmetic overflow error converting expression to data type int.
The statement has been terminated. 
```

如果您希望计算始终有效，请更改计算，以使至少其中一列被强制为 a `bigint`（因此数学和结果类型`c`也是`bigint`）：

```
 c as CAST(a as bigint)+b 
```

# asp.net - 需要有关我的项目的 ASP.net html 代码的帮助我想显示数据

> ID：15965284
> 
> 赞同：1
> 
> 时间：2013-04-12T07:15:00.433
> 
> 标签：asp.net, .net, visual-studio-2010

我想在用户登录我的网站时显示数据，它将在我的侧边栏中显示他们添加的唯一数据+他们的用户信息，只需查看图片即可。
感谢您的帮助！
希望你能理解我，
我目前正在使用**VisualStudio 2010**，因为我们需要同时使用它**MS SQL**但我的数据库没有问题+我不允许`datasource`在设计师中使用我的教授说我必须做代码:))，只是其中的代码。和平！
如果看不到图片，可以点这个：[http ://sdrv.ms/ZQyhxK](http://sdrv.ms/ZQyhxK)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-12T08:05:53.933

您可以使用：

```
cmd.Parameters.AddWithValue("@userid",lbluserid.value) 
```

您还可以使用：

```
SqlParameter[] p = new SqlParameter[1];
p[0] = new SqlParameter("@userid",lbluserid.value); 
```

然后

```
cmd.Parameters.Add(p); 
```

# c# - c# HttpClient上传文件到spring rest服务

> ID：15965285
> 
> 赞同：4
> 
> 时间：2013-04-12T07:15:02.380
> 
> 标签：c#, java, spring, httpclient

问题：我有一个 Java spring rest 服务来上传文件（大尺寸）。我想使用 .NET httpClient（或其他 .net 客户端）来调用上传服务。

问题：

1.  似乎发送大文件的最佳选择是多部分文件，互操作性是什么？
2.  如果不可能，最好的选择是什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-05T16:17:02.770

这就是答案：我可以将带有多部分附件的文件从 c# 客户端发送到 Java JAX Rest Webservice。

```
 try
        {
            using (
            var client = new HttpClient())
            using (var form = new MultipartFormDataContent())
            {
                using (var stream = new FileStream(fileName, FileMode.Open, FileAccess.Read, FileShare.ReadWrite)) {
                    using (var fileContent = new StreamContent(stream)) {

                        fileContent.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment") {FileName = fileName, DispositionType = DispositionTypeNames.Attachment, Name = "fileData"};

                        form.Add(fileContent);
                        // only for test purposes, for stable environment, use ApiRequest class.
                        response = client.PostAsync(url, form).Result;
                    }
                }
            }

            return response.RequestMessage != null ? response.ReasonPhrase : null;
        }
        catch (Exception ex)
        {
            TraceManager.TraceError("Post Asyn Request to " + url + " \n" + ex.Message, ex);
            throw;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:19:33.233

HTTP 是一个独立于操作系统平台和编程语言的标准，因此如果您的 .net 客户端符合标准，则互操作性应该不会有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-07T20:55:57.627

java 弹簧启动

```
@RequestMapping(value="/upload", method=RequestMethod.POST)
public @ResponseBody String upload(@RequestParam("FileParam") MultipartFile file){
    InputStream fromClient=file.getInputStream();
    ...do stuff with the database/ process the input file... 
```

C＃

```
HttpClient client = new HttpClient();
MultipartFormDataContent form = new MultipartFormDataContent();
FileInfo file = new FileInfo(@"<file path>");
form.Add(new StreamContent(file.OpenRead()),"FileParam",file.Name);
HttpResponseMessage response = await client.PostAsync("http://<host>:<port>/upload", form);
Console.WriteLine(response.StatusCode);
Console.WriteLine(response.ReasonPhrase);
Console.WriteLine(response.ToString());
Console.WriteLine(Encoding.ASCII.GetString(await response.Content.ReadAsByteArrayAsync())); 
```

# php - 在php中增加会话时间

> ID：15965303
> 
> 赞同：0
> 
> 时间：2013-04-12T07:16:00.350
> 
> 标签：php

我正在尝试使用以下代码增加会话时间：

```
ini_set('session.gc_maxlifetime', 60*60*24*15);
ini_set("session.cookie_lifetime", 60*60*24*15);
session_set_cookie_params(60*60*24*15);
session_start(); 
```

但是会话将在 1 小时左右后到期。我无法在 php.ini 中进行更改

是否有在不修改 php.ini 的情况下增加会话超时的替代方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:19:55.960

或者，您可以在 .htaccess 中设置 php 值

```
 php_value setting_name setting_value

eg

  php_value session.cookie_lifetime  60*60*24*15 
```

# sql - 如何在 Groovy 脚本中将 SQL 日期时间值转换为 XML 日期时间值

> ID：15965304
> 
> 赞同：0
> 
> 时间：2013-04-12T07:16:06.647
> 
> 标签：sql, xml, datetime, groovy

我是 Groovy 脚本的新手，我想知道如何将我从 SQL 数据库获得的值转换为 XML 值？

例如：

我有一个变量 start_date 包含 '2013-04-13 14:34:08'

我想将其转换为：

'2013-04-13T14:34:08'

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:52:06.520

从一个字符串：

```
def start_date = '2013-04-13 14:34:08'
println start_date.replace(' ', 'T') 
```

从日期开始：

```
def start_date = new Date()
println start_date.format('yyyy-MM-ddTHH:mm:ss') 
```

# php - 在不同的存储库 symfony2 中调用存储库

> ID：15965306
> 
> 赞同：3
> 
> 时间：2013-04-12T07:16:10.660
> 
> 标签：php, symfony

我有一个关于存储库的问题：是否可以使用

```
$em = $this->getDoctrine()
                ->getEntityManager();
     $range = $em->getRepository('***Bundle:entityA')
                ->find($id); 
```

在实体B的存储库中？？？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T10:03:37.820

在您的存储库类中，您已经可以访问实体管理器，因此您只需要执行以下操作：

```
$this->getEntityManager()->getRepository('***Bundle:entityA')->find($id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:31:56.057

我推荐以下内容：

**案例A：** 您需要查询2个实体，彼此没有关系。使用 2 个存储库，2 个查询

```
$range1 = $em->getRepository('***Bundle:entityA')->find($id);
$range2 = $em->getRepository('***Bundle:entityB')->find($id); 
```

**案例B：** 需要查询2个实体，相互关联，或者相互依赖。使用 1 个存储库，编写自定义存储库函数，加入它们，或在多个表上选择

```
$range = $em->getRepository('***Bundle:entityA')->findAjoinedB();

 class EntityArepository extends EntityRepository
 {

   public function findAjoinedB(){
       $qb = $this->createQueryBuilder('entityA')
             ->leftJoin('entityA.entityB_id', 'entityB')
             ->where(....
             ....;

       return $qb->getQuery()->getResult();
   }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-08T15:43:04.380

如果您更喜欢注入依赖项，请将您的存储库声明为服务，以便您可以注入一个以在另一个内部使用它：

**服务.yml**

```
services:
    repository.entity_a:
        class: AppBundle\Entity\EntityARepository
        factory: [@doctrine, getRepository]
        arguments:
            - AppBundle::EntityA

    repository.entity_b:
        class: AppBundle\Entity\EntityBRepository
        factory: [@doctrine, getRepository]
        arguments:
            - AppBundle::EntityB
        calls:
            - [setEntityARepository, [@repository.entity_a]] 
```

在EntityBRepository.php 中，您必须有一个属性设置器（setEntityARepository）来存储存储库（即$entityARepository）。

# python - 在python中处理字符串

> ID：15965309
> 
> 赞同：0
> 
> 时间：2013-04-12T07:16:16.080
> 
> 标签：python, string, parsing

我有 2 个字符串：

```
s7="ONE : TWO : THREE : FOUR : FIVE 30.1 : SIX 288.3 : SEVEN 1.9 : EIGHT 45.3 :"    
s8="ONE : TWO : THREE : FOUR 155.5 : FIVE 334.7 : SIX 6.7 : SEVEN 44.5 :" 
```

我正在使用以下代码来解析它：

```
c=s.count(':')
if c==8:
    res=""
    res=s.split(' : ')
    res = [item.strip() for item in s.split(':')]
    for index, item in enumerate(res):
        print index, item
if c==7:
    res=""
    res=s.split(' : ')
    res = [item.strip() for item in s.split(':')]
    for index, item in enumerate(res):
        print index, item 
```

我得到的这个输出是

```
>>> parse(s7)
0 ONE
1 TWO
2 THREE
3 FOUR
4 FIVE 30.1
5 SIX 288.3
6 SEVEN 1.9
7 EIGHT 45.3
8 
>>> parse(s8)
0 ONE
1 TWO
2 THREE
3 FOUR 155.5
4 FIVE 334.7
5 SIX 6.7
6 SEVEN 44.5
7 
```

如何从 s7 中的索引 4 到 7 和 s8 中的索引 3 到 6 中提取数值？我需要存储这些值，以便稍后将它们写入数据库。

我已经尝试了几件事，但它们不起作用。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:25:36.160

总是这样吗？你可以简单地做：

```
s7="ONE : TWO : THREE : FOUR : FIVE 30.1 : SIX 288.3 : SEVEN 1.9 : EIGHT 45.3 :"
for elem in s7.split(' '):
    try:
        print elem
        total += float(elem)
    except:
        pass
s7 = total
>>> s7
365.6 
```

并且做同样的事情`s8`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:26:17.460

您可以在每个字符串上使用以下正则表达式：

```
[A-Z][ ]+([\d.]+) 
```

对于每个字符串，您要查找的值将在第一个捕获的组中，如果不是空的。[您可以在www.debuggex.com](http://www.debuggex.com/?re=%5BA-Z%5D%5B%20%5D%2b%28%5B%5Cd.%5D%2b%29&flags=&str=0%20ONE%0A1%20TWO%0A2%20THREE%0A3%20FOUR%0A4%20FIVE%2030.1%0A5%20SIX%20288.3%0A6%20SEVEN%201.9%0A7%20EIGHT%2045.3%0A%0A0%20ONE%0A1%20TWO%0A2%20THREE%0A3%20FOUR%20155.5%0A4%20FIVE%20334.7%0A5%20SIX%206.7%0A6%20SEVEN%2044.5)上确切地看到正在发生的事情。

完整代码：

```
import re

s7="ONE : TWO : THREE : FOUR : FIVE 30.1 : SIX 288.3 : SEVEN 1.9 : EIGHT 45.3 :"

def parse(s):
  res = s.split(' : ')
  matches = [re.search('[A-Z][ ]+([\d.]+)', x) for x in res]
  return [float(x.group(1)) for x in matches if x is not None]

print(parse(s7)) // prints "[30.1, 288.3, 1.9, 45.3]" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T07:41:19.660

你也可以做一个列表理解。

假设字符串始终采用您提供的格式，那么这将起作用：

```
def parse(s):
    results = [float(x) for x in s.split(' ') if x.count('.') == 1] 
```

`>> [30.1, 288.3, 1.9, 45.3]`

`>> [155.5, 334.7, 6.7, 44.5]`

这段代码说：

```
for every `x` in the split string, which I've split on whitespace, 
cast it to a float if x's count of `.` is 1. 
```

在这里使用`count()`是有效的，因为如果它没有发现任何异常，它不会引发任何异常，`.`但是如果你想使用异常处理，那么`index()`它将是你正在寻找的那个。

# powershell - 如何使用 Powershell 使远程服务器上的进程没有响应

> ID：15965317
> 
> 赞同：0
> 
> 时间：2013-04-12T07:16:42.837
> 
> 标签：powershell, process

我不明白，远程服务器上的响应是空的。

```
Get-Process explorer -ComputerName vcass1 | select name,id,responding

Name                                               Id Responding
----                                               -- ----------
explorer                                         1204
explorer                                         3020 
```

但回应我真的很空：

```
Get-Process explorer -ComputerName vcass1 | Where-Object {$_.Responding -eq $true}
>> No result

Get-Process explorer -ComputerName vcass1 | Where-Object {$_.Responding -eq $false}
>> No result 
```

当我尝试使用：**-ComputerName localhost**我有同样的问题，但没有**-ComputerName**我对每个进程都有价值**$True ！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:57:53.737

根据[MSDN 上的帮助，](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.responding.aspx)您应该得到一个`NotSupportedException`错误，表明：

> 您正试图访问远程计算机上运行的进程的响应属性。此属性仅适用于在本地计算机上运行的进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T14:51:10.843

如果远程服务器在 Windows 2012 上，您可以远程读取**响应**状态。

# java - 为什么发生 MySQLIntegrityConstraintViolationException 时 Spring Framework 不抛出 DuplicateKeyException？

> ID：15965323
> 
> 赞同：1
> 
> 时间：2013-04-12T07:16:55.133
> 
> 标签：java, mysql, spring, hibernate

`DuplicateKeyException`延伸`DataIntegrityViolationException`。但是`DataIntegrityViolation`，如果任何唯一键约束被破坏而不是`DuplicateKeyException`.

我有一个订单表，其中订单代码是唯一的。当我尝试插入带有重复代码的订单时，我期待出现 DuplicateKeyException，但是我收到了 DataIntegrityViolationException。

这是堆栈跟踪：

```
org.springframework.dao.DataIntegrityViolationException: Duplicate entry '1-561336327' for key 'code_UNIQUE'; SQL [n/a]; constraint [null]; nested exception is 
org.hibernate.exception.ConstraintViolationException: Duplicate entry '1-561336327' for key 'code_UNIQUE' 
com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry '1-561336327' for key 'code_UNIQUE' – 
```

有人知道这是否是预期的吗？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-04-12T07:29:18.263

来自 Spring doc（对我来说似乎很清楚）

公共类 DuplicateKeyException 扩展 DataIntegrityViolationException

当尝试插入或更新数据导致违反主键或唯一约束时引发异常。请注意，这不一定是一个纯粹的关系概念；大多数数据库类型都需要唯一的主键。[ [http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/dao/DuplicateKeyException.html](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/dao/DuplicateKeyException.html) ]

公共类 DataIntegrityViolationException 扩展 NonTransientDataAccessException

当尝试插入或更新数据导致违反完整性约束时引发异常。请注意，这不是纯粹的关系概念；大多数数据库类型都需要唯一的主键。[ [http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/dao/DataIntegrityViolationException.html](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/dao/DataIntegrityViolationException.html) ]

# codenameone - 合并两个项目

> ID：15965326
> 
> 赞同：1
> 
> 时间：2013-04-12T07:17:09.773
> 
> 标签：codenameone

我有两个代号为一个的单独项目都运行良好，现在我想将这两个项目合并为一个。我知道如何组合代码和类文件，但我想知道如何组合`theme.res`两个项目的文件，因为一个文件中至少有 15-17 个表单，`theme.res`并且很难再次创建所有文件。请建议是否有任何方法可以合并两个`theme.res`文件，或者我可以`theme.res`在一个项目中使用两个文件。例如

项目 1：名称：test1 具有 12 表格的 theme.res 文件

项目 2：名称：test2 具有 18 表格的 theme.res 文件

新项目：name:Merge= test1+test2（如果可能的话，一个 theme.res 文件，格式为 12+18 = 30）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:30:05.303

设计器有一个导入功能，允许将一个 res 文件导入另一个文件。我建议在开始之前将这两个文件复制到备份中，然后从您要导入的文件（例如主题等）中删除重复项，然后导入另一个文件。

# algorithm - 在 1 和 0 的二维数组中找到一个 1 的矩形

> ID：15965328
> 
> 赞同：2
> 
> 时间：2013-04-12T07:17:24.323
> 
> 标签：algorithm

我有一个二维对象数组，如果对象的 clicked 属性设置为 true，则应将其视为“1”，否则应视为“0”。这些是被选中的块。我需要检查选定的框是否形成一个矩形。解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T08:03:29.947

**高水平：**

*   跟踪最外面的 1。
*   数所有的 1。
*   如果计数等于最外面的 1 包围的面积，我们就有一个矩形。

**伪代码：**

```
left = width + 1
right = 0
top = height + 1
bottom = 0
count = 0

for x = 1 to width
for y = 1 to height
  if grid[x][y] == 1
    left   = min(left  , x)
    right  = max(right , x)
    top    = min(top   , y)
    bottom = max(bottom, y)
    count++

if count > 0 and count == (right-left+1)*(bottom-top+1)
  print "We have a rectangle!"
else
  print "We don't have a rectangle!" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:31:21.663

你可以这样解决它：

*   搜索第一个元素 1
*   水平向右走，然后向下，然后向左，然后向上
*   如果你回到原点，你有一个矩形
*   然后确保所有其他元素为0。

这个算法是 O(n^2) 并且如果你只允许一个矩形就可以工作。如果你有多个矩形，它会变得复杂..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T07:50:56.387

我会做这样的事情（伪代码）：

```
// your 2d-array / matrix (N is the number of lines, M the number of columns)
m[N][M] = ...

// x coord of top left object containing 1
baseM = -1
baseFound = false
// expected width of rectangle
width = 0
widthLocked = false

// this is set to true after we started recognizing a rectangle and encounter
// a row where the object expected to be 1 in order to extend the rectangle
// is 0.
heightExceeded = false

// loop over matrix
for i = 1 to N: // lines
    // at the beginning of a line, if we already found a base, lock the width
    // (it cannot be larger than the number of 1s in the row of the base)
    if baseFound: widthLocked = true

    for j = 1 to M: // columns
        if m[i][j] == 1:
            if not baseFound:
                baseM = j, baseFound = true
                width = 1
            else:
                if j < baseM:
                    // not in rectangle in negative x direction
                    return false
                if heightExceeded:
                    // not in rectangle in y direction
                    return false
                if widthLocked:
                    // not in rectangle in positive x direction
                    if j - baseM >= width: return false
                 else:
                    width = j - baseM
        elseif baseFound:
            if widthLocked:
                // check if we left the rectangle and memorize it
                if j == baseM: heightExceeded = true
                if not heightExceeded:
                    // check if object in rectangle is 0
                    if j > baseM && j < baseM + width: return false
if baseFound:
    return true
else:
    // what is the expected result if no rectangle has been found?
    return ? 
```

在 O(n) 中运行。当心错误。

注意：大多数编程语言都有从 0 开始的数组，因此您可能需要`i`从`0`to循环`N - 1`，与 for 相同`j`。

# mysql - 在 Wordpress AJAX 搜索中按自定义分类法搜索

> ID：15965336
> 
> 赞同：0
> 
> 时间：2013-04-12T07:17:55.120
> 
> 标签：mysql, ajax, wordpress, autocomplete

我有一个自定义帖子类型，它分配了三个自定义分类法：位置、类型和部门。在一个页面上，我使用 jQuery UI 自动完成功能构建了一个搜索表单，该表单从我通过 Ajax 制作的搜索功能中检索结果。问题是，每当我搜索类别名称时，都不会显示结果。

例如：如果我将名为“.NET Software Architect”的帖子设置为位置“London”，则搜索将仅在搜索字符串为“.Net”或“Software”时返回结果，但在设置为“London”时不会返回结果。

```
$args = array(
    's' => $sq,
    'posts_per_page' => -1,
    'post_type' => 'jobs'
);
$posts = new WP_Query($args); 
```

# python - 更新 django 模型对象中的继承属性

> ID：15965339
> 
> 赞同：0
> 
> 时间：2013-04-12T07:18:00.000
> 
> 标签：python, django, tastypie

我在更新从其他表继承的属性时遇到问题

```
class AgentCategory(models.Model):
""" Agent Category """
    class Meta:
    verbose_name_plural = "agentcategories"
    name = models.CharField(max_length=200, unique=True)
    description = models.TextField(blank=True)

class Agent(models.Model):
    agentcategory = models.ManyToManyField(AgentCategory,null=True) 
```

我应该如何手动更新代理模型中的代理类别？截至目前，我正在尝试这种方法，但是，它不起作用）：

```
property_selected.agentcategory = "api/v1/agentcategory/3"
property_selected.save() 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:56:11.980

与`Agent`有`ManyToManyField`关系`AgentCategory`。

`agentcategory`将包含条目列表。

您可以通过以下方式更新其条目，

```
agent_cats = AgentCategory.objects.filter(...)
property_selected.agentcategory.clear()
property_selected.agentcategory = agent_cats
property_selected.agentcategory.save() 
```

# android - 保存/恢复片段状态android

> ID：15965341
> 
> 赞同：14
> 
> 时间：2013-04-12T07:18:08.887
> 
> 标签：android, android-viewpager, fragment, savestate

我正在尝试创建一个使用 Jack Wharton 的 ViewPager 库（[此处](https://github.com/JakeWharton/Android-ViewPagerIndicator)）的应用程序，每个页面仅使用图像（类似于 Prixing（[此处](https://play.google.com/store/apps/details?id=fr.epicdream.beamy&feature=search_result#?t=W251bGwsMSwxLDEsImZyLmVwaWNkcmVhbS5iZWFteSJd)）主屏幕）。一切正常，除了片段中的 saveInstance。

在 Jack Wharton 的示例中，他将文本存储在一个名为 mContent 的 String 变量中，并在 onCreate 中恢复它，但在我的情况下，我该怎么办？保存/恢复位图？！任何客观的答案将不胜感激！

我对这个使用应用程序的 Fragment 很陌生，因为我看到的每个示例都只介绍了基础知识，而对于更复杂的示例则变得越来越困难。

PS。如果知道有用的话，我正在使用 CirclePageIndicator。

当前的片段代码在这里：

```
 public final class SpecialOfferFragment extends Fragment {

    private int imageResourceId;

    public static SpecialOfferFragment newInstance(int i) {

        //probably I'll use a bitmap(downloaded) as parameter instead of using static images
        SpecialOfferFragment fragment = new SpecialOfferFragment();

        fragment.imageResourceId = i;

        return fragment;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // if ((savedInstanceState != null) { }

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        ImageView image = new ImageView(getActivity());
        image.setImageResource(imageResourceId);
        image.setScaleType(ScaleType.FIT_XY);

        LinearLayout layout = new LinearLayout(getActivity());
        layout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.FILL_PARENT));

        layout.setGravity(Gravity.CENTER);
        layout.addView(image);

        return layout;
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        //smth to save here..
    }
} 
```

在应用程序的当前状态下，我收到以下异常：

```
04-12 07:28:17.760: E/AndroidRuntime(31903): FATAL EXCEPTION: main 
04-12 07:28:17.760: E/AndroidRuntime(31903): java.lang.NullPointerException
04-12 07:28:17.760: E/AndroidRuntime(31903): at android.support.v4.app.FragmentManagerImpl.saveFragmentBasicState(FragmentManager.java:1576)
04-12 07:28:17.760: E/AndroidRuntime(31903):    at android.support.v4.app.FragmentManagerImpl.saveAllState(FragmentManager.java:1617)
04-12 07:28:17.760: E/AndroidRuntime(31903):    at android.support.v4.app.FragmentActivity.onSaveInstanceState(FragmentActivity.java:481)
04-12 07:28:17.760: E/AndroidRuntime(31903):    at android.app.Activity.performSaveInstanceState(Activity.java:1113)
04-12 07:28:17.760: E/AndroidRuntime(31903):    at android.app.Instrumentation.callActivityOnSaveInstanceState(Instrumentation.java:1188)
04-12 07:28:17.760: E/AndroidRuntime(31903):    at android.app.ActivityThread.performStopActivityInner(ActivityThread.java:2804)
04-12 07:28:17.760: E/AndroidRuntime(31903):    at android.app.ActivityThread.handleStopActivity(ActivityThread.java:2862)
04-12 07:28:17.760: E/AndroidRuntime(31903):    at android.app.ActivityThread.access$900(ActivityThread.java:127)
04-12 07:28:17.760: E/AndroidRuntime(31903):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1175)
04-12 07:28:17.760: E/AndroidRuntime(31903):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-12 07:28:17.760: E/AndroidRuntime(31903):    at android.os.Looper.loop(Looper.java:137)
04-12 07:28:17.760: E/AndroidRuntime(31903):    at android.app.ActivityThread.main(ActivityThread.java:4511)
04-12 07:28:17.760: E/AndroidRuntime(31903):    at java.lang.reflect.Method.invokeNative(Native Method)
04-12 07:28:17.760: E/AndroidRuntime(31903):    at java.lang.reflect.Method.invoke(Method.java:511)
04-12 07:28:17.760: E/AndroidRuntime(31903):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
04-12 07:28:17.760: E/AndroidRuntime(31903):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
04-12 07:28:17.760: E/AndroidRuntime(31903):    at dalvik.system.NativeStart.main(Native Method) 
```

每当我暂停/停止包含此片段的活动时，都会发生这种情况，例如按下主页按钮。

**

## 编辑代码：

**

```
 public class MainMenu extends FragmentActivity {

    //private List<CategoriesHolder> categoriesList = new ArrayList<CategoriesHolder>();
    //private CategoriesAdapter categoriesAdapter = null;
    //private GridView gv_mainmenu_categories;

    SpecialOfferFragmentAdapter mAdapter;
    ViewPager mPager;
    PageIndicator mIndicator;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_mainmenu);

        linkUI();
        setAction();

        // just for testing
        String[] imagesUrls = null;

        mAdapter = new SpecialOfferFragmentAdapter(getSupportFragmentManager(),
                this, imagesUrls);

        //categoriesAdapter = new CategoriesAdapter(this, categoriesList);

        // used for Categories GridView
        //gv_mainmenu_categories.setAdapter(categoriesAdapter);

        // used for ViewPager
        mPager.setAdapter(mAdapter);
        mIndicator.setViewPager(mPager);

    }

    private void linkUI() {
        mPager = (ViewPager) findViewById(R.id.vp_mainmenu_special_offers);
        mIndicator = (CirclePageIndicator) findViewById(R.id.indicator);

        //gv_mainmenu_categories = (GridView) findViewById(R.id.gv_mainmenu_categories);

    }

    private void setAction() {

    }
} 

    public class SpecialOfferFragmentAdapter extends FragmentPagerAdapter implements
        IconPagerAdapter {

    private int[] mCarouselImages = new int[] { R.drawable.pic1,
            R.drawable.pic2, R.drawable.pic3, R.drawable.pic4, R.drawable.pic5

    };

    private String[] imagesUrls;
    private Context context;

    public static final int[] ICONS = new int[] {
            R.drawable.perm_group_calendar, R.drawable.perm_group_camera,
            R.drawable.perm_group_device_alarms, R.drawable.perm_group_location };

    private int mCount = mCarouselImages.length;

    public SpecialOfferFragmentAdapter(FragmentManager fm, Context context,
            String[] imagesUrls) {
        super(fm);
        this.context = context;
        this.imagesUrls = imagesUrls;
    }

    @Override
    public Fragment getItem(int position) {

        return SpecialOfferFragment.newInstance(mCarouselImages[position]);
    }

    @Override
    public int getCount() {
        return mCount;
    }

    @Override
    public int getIconResId(int index) {
        return ICONS[index % ICONS.length];
    }

    public void setCount(int count) {
        if (count > 0 && count <= 10) {
            mCount = count;
            notifyDataSetChanged();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T08:40:45.947

为了实现你想要的东西，你应该使用整数值来存储你的当前位置`ViewPager`，然后使用这个值来设置你的正确位置`ViewPager`。

例如在你的做这样的事情`FragmentActivity`：

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
  super.onSaveInstanceState(savedInstanceState);
  savedInstanceState.putInt("mMyCurrentPosition", mPager.getPosition());
}

@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
  super.onRestoreInstanceState(savedInstanceState);
  mMyCurrentPosition = savedInstanceState.getInt("mMyCurrentPosition");
  // where mMyCurrentPosition should be a public value in your activity.
} 
```

这将保存您的 ViewPager 的最后一个位置。然后在你`onResume()`的例子之后你可以检查

```
if(mMyCurrentPosition != 0){
    mPager.setCurrentItem(mMyCurrentPosition);
} 
```

我认为这应该可行，将图像/位图保存在捆绑包中不是一个好习惯（而且我认为你做不到）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T07:36:12.843

好的，首先我想澄清一些可能解决您对已保存实例状态的困惑的东西。Savedinstancestate 只能处理原语（int、double、float、byte..）和 String 对象。这应该是您所需要的，但在某些情况下，您还想保存其他对象的实例。为此，您需要一些其他模式来完成这项工作，例如一个工厂模式，其中包含所有位图的数组。例如，创建一个类 ImageFactory 来保存位图的静态 ArrayList。每当您旋转设备时，都会再次调用 oncreateview 和 onactivitycreated 方法，此时您可以检查是否要从工厂检索信息。例如

> if(savedInstanceState != null) { //我们有一个 savedinstancestate 所以可能有保存的图像 ImageFactory.getBMPs(); }

希望你能用这个信息做点什么。祝你好运

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-23T04:20:14.590

> 这在您的主要活动中对我来说既简单又简单

```
 @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);
        onCreate(savedInstanceState);
    } 
```

> 在你的清单里面

```
 <activity
            android:configChanges="orientation|screenSize"/> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-16T07:03:05.727

我创建了我自己的方法来保存片段数据，同时使用 SharedPreference 更改选项卡：

方法如：

```
 public void saveData() {

    Log.d("msg", "Save Instance");
    SharedPreferences.Editor outState = getActivity().getSharedPreferences("order", Context.MODE_APPEND).edit();

    orderDate = orderDateEditText.getText().toString();
    orderBy = orderByEditText.getText().toString();
    orderMobileNo = orderMobileNoEditText.getText().toString();
    orderTransport = orderTransportEditText.getText().toString();
    orderInvoicePer = orderInvoicePerEditText.getText().toString(); 
    orderCharge = orderChargeEditText.getText().toString();
    orderGoodsDispatch = orderGoodsDispatchEditText.getText().toString();
    orderOthers = orderOthersEditText.getText().toString();
    orderIsDirect = orderIsDirectCheckBox.isChecked() ? 1 : 0;

    outState.putBoolean("saved", true);

    outState.putString("orderDate", orderDate);
    outState.putString("orderBy", orderBy);
    outState.putString("orderMobileNo", orderMobileNo);
    outState.putString("orderTransport", orderTransport);
    outState.putString("orderInvoicePer", orderInvoicePer);
    outState.putString("orderCharge", orderCharge);
    outState.putString("orderGoodsDispatch", orderGoodsDispatch);
    outState.putString("orderOthers", orderOthers);
    outState.putInt("orderIsDirect", orderIsDirect);

    outState.commit();
} 
```

调用此方法时

```
 @Override
    public void onStop() {
    // TODO Auto-generated method stub
        super.onStop();

        saveData();
} 
```

**用EditText**替换保存的数据：

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onActivityCreated(savedInstanceState);

    /***** PUT DATA IN EDITTEXT is ITS AVAILABLE IN BUNDLE *****/
    SharedPreferences orderData = getActivity().getSharedPreferences("order", Context.MODE_APPEND);
    Log.d("msg", ""+orderData.getBoolean("saved", false));

    if(orderData.getBoolean("saved", false))
    {
        orderDate = orderData.getString("orderDate", "");
        orderBy = orderData.getString("orderBy", "");
        orderMobileNo = orderData.getString("orderMobileNo", "");
        orderTransport = orderData.getString("orderTransport", "");
        orderInvoicePer = orderData.getString("orderInvoicePer", ""); 
        orderCharge = orderData.getString("orderCharge", "");
        orderGoodsDispatch = orderData.getString("orderGoodsDispatch", "");
        orderOthers = orderData.getString("orderOthers", "");
        orderIsDirect = orderData.getInt("orderIsDirect", 0);

        orderDateEditText.setText(orderDate);
        orderByEditText.setText(orderBy);
        orderMobileNoEditText.setText(orderMobileNo);
        orderTransportEditText.setText(orderTransport);
        orderInvoicePerEditText.setText(orderInvoicePer);
        orderChargeEditText.setText(orderCharge);
        orderGoodsDispatchEditText.setText(orderGoodsDispatch);
        orderOthersEditText.setText(orderOthers);
        if(orderIsDirect == 0)
            orderIsDirectCheckBox.setChecked(false);
        else
            orderIsDirectCheckBox.setChecked(true);
    }
} 
```

愿此代码对您有帮助...

谢谢...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-17T03:12:15.530

我不太确定这个问题是否仍然困扰着你，因为它已经有几个月了。但我想分享一下我是如何处理这个问题的。这是源代码：

```
int FLAG = 0;
private View rootView;
private LinearLayout parentView;

/**
 * The fragment argument representing the section number for this fragment.
 */
private static final String ARG_SECTION_NUMBER = "section_number";

/**
 * Returns a new instance of this fragment for the given section number.
 */
public static Fragment2 newInstance(Bundle bundle) {
    Fragment2 fragment = new Fragment2();
    Bundle args = bundle;
    fragment.setArguments(args);
    return fragment;
}

public Fragment2() {

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    super.onCreateView(inflater, container, savedInstanceState);
    Log.e("onCreateView","onCreateView");
    if(FLAG!=12321){
        rootView = inflater.inflate(R.layout.fragment_create_new_album, container, false);
        changeFLAG(12321);
    }       
    parentView=new LinearLayout(getActivity());
    parentView.addView(rootView);

    return parentView;
}

/* (non-Javadoc)
 * @see android.support.v4.app.Fragment#onDestroy()
 */
@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    Log.e("onDestroy","onDestroy");
}

/* (non-Javadoc)
 * @see android.support.v4.app.Fragment#onStart()
 */
@Override
public void onStart() {
    // TODO Auto-generated method stub
    super.onStart();
    Log.e("onstart","onstart");
}

/* (non-Javadoc)
 * @see android.support.v4.app.Fragment#onStop()
 */
@Override
public void onStop() {
    // TODO Auto-generated method stub
    super.onStop();
    if(false){
        Bundle savedInstance=getArguments();
        LinearLayout viewParent;

        viewParent= (LinearLayout) rootView.getParent();
        viewParent.removeView(rootView);

    }
    parentView.removeView(rootView);

    Log.e("onStop","onstop");
}
@Override
public void onPause() {
    super.onPause();
    Log.e("onpause","onpause");
}

@Override
public void onResume() {
    super.onResume();
    Log.e("onResume","onResume");
} 
```

这是 MainActivity：

```
/**
 * Fragment managing the behaviors, interactions and presentation of the
 * navigation drawer.
 */
private NavigationDrawerFragment mNavigationDrawerFragment;

/**
 * Used to store the last screen title. For use in
 * {@link #restoreActionBar()}.
 */

public static boolean fragment2InstanceExists=false;
public static Fragment2 fragment2=null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    setContentView(R.layout.activity_main);

    mNavigationDrawerFragment = (NavigationDrawerFragment) getSupportFragmentManager()
            .findFragmentById(R.id.navigation_drawer);
    mTitle = getTitle();

    // Set up the drawer.
    mNavigationDrawerFragment.setUp(R.id.navigation_drawer,
            (DrawerLayout) findViewById(R.id.drawer_layout));
}

@Override
public void onNavigationDrawerItemSelected(int position) {
    // update the main content by replacing fragments
    FragmentManager fragmentManager = getSupportFragmentManager();
    FragmentTransaction fragmentTransaction=fragmentManager.beginTransaction();
    switch(position){
    case 0:
        fragmentTransaction.addToBackStack(null);
        fragmentTransaction.replace(R.id.container, Fragment1.newInstance(position+1)).commit();
        break;
    case 1:

        Bundle bundle=new Bundle();
        bundle.putInt("source_of_create",CommonMethods.CREATE_FROM_ACTIVITY);

        if(!fragment2InstanceExists){
            fragment2=Fragment2.newInstance(bundle);
            fragment2InstanceExists=true;
        }
        fragmentTransaction.addToBackStack(null);
        fragmentTransaction.replace(R.id.container, fragment2).commit();

        break;
    case 2:
        fragmentTransaction.addToBackStack(null);
        fragmentTransaction.replace(R.id.container, FolderExplorerFragment.newInstance(position+1)).commit();
        break;
    default: 
        break;
    }
} 
```

parentView 是关键点。通常，在onCreateView时，我们只使用return rootView。但是现在，我将rootView添加到parentView，然后返回parentView。为防止出现“The specified child has a parent. You must call removeView() on the ...”错误，我们需要调用“parentView.removeView(rootView)”，否则我提供的方法没用。我也想分享我是如何找到它的。首先，我设置了一个布尔值来指示实例是否存在。当实例存在时，rootView 不会再次膨胀。但是后来，logcat给了child已经有了parent的东西，所以我决定用另一个parent作为中间的Parent View。这就是它的工作原理。希望对你有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-20T11:59:15.930

让我写下我处理这个问题的方法。我在 Activity 中保留了一个片段对象变量，以供以后交互。在 onCreate() 方法中，我检查是否存在 savedInstanceState （由屏幕旋转或其他原因引起）。

```
public class MainActivity extends AppCompatActivity {
PlaceAddFragment mFragment;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    if(savedInstanceState == null) {
        mFragment = new PlaceAddFragment();
        mFragment.setProfileImages(incomingPics);

        getSupportFragmentManager()
                .beginTransaction()
                .replace(R.id.form_fragment_holder, mFragment, PlaceAddFragment.TAG)
                .commit();
    }else{
        mFragment = (PlaceAddFragment) getSupportFragmentManager().findFragmentByTag(PlaceAddFragment.TAG);
    }
} 
```

在我的片段类中，我重写了 onSaveInstanceState 方法，并在其中添加了 setRetainInstance(true)，如下所示：

```
public class PlaceAddFragment extends Fragment {
public static final String TAG = ".PlaceAddFragment";
private ProfileImageAdapter mAdapter;
private List<ProfileImage> mProfileImages;
private Context mContext;

public PlaceAddFragment() {
    // Required empty public constructor
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {

    mContext = getContext();
    View view = inflater.inflate(R.layout.fragment_place_add, container, false);

    RecyclerView mRecyclerView = (RecyclerView) view.findViewById(R.id.hw_pictures_holder);
    mRecyclerView.setLayoutManager(new LinearLayoutManager(mContext, LinearLayoutManager.HORIZONTAL, false));
    mAdapter = new ProfileImageAdapter(mContext, mProfileImages);
    mRecyclerView.setAdapter(mAdapter);

    return view;
}

@Override
public void onSaveInstanceState(final Bundle outState) {
    super.onSaveInstanceState(outState);
    setRetainInstance(true);
}

@Override
public void onDestroy() {
    super.onDestroy();
    mAdapter = null;
    mProfileImages = null;
}

public void setProfileImages(List<ProfileImage> incomingPics) {
    this.mProfileImages = incomingPics;
}

public List<ProfileImage> getProfileImages() {
    return this.mProfileImages;
}
} 
```

如果您希望此代码正常工作，您应该实现 ProfileImageAdapter mAdapter、ProfileImage 对象和所有这些的 xml 布局。

# python - 正态分布；铁蟒

> ID：15965344
> 
> 赞同：2
> 
> 时间：2013-04-12T07:18:13.010
> 
> 标签：python, random, ironpython, normal-distribution

我希望用户指定一个范围增量、差值的 sigma 以及它应该产生的随机值的数量。但是 Iron Python 中产生具有正态分布的随机值的最佳方法是什么？我在 NumPy 中找到了一个可以做到这一点的函数，但据我了解，它不适用于 Iron Python。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T07:21:37.213

该`random`模块有一个功能可以为您执行此操作：（`random.gauss(mu, sigma)`或者`random.normalvariate(mu, sigma)`，尽管根据文档，前者应该稍微快一些）。[另请参阅此处](https://ironpython-test.readthedocs.org/en/latest/library/random.html)的 IronPython 文档。

# android - Android：更改列表视图中特定项目的图像

> ID：15965351
> 
> 赞同：6
> 
> 时间：2013-04-12T07:18:42.277
> 
> 标签：android, android-listview, baseadapter

![截屏](https://i.stack.imgur.com/qkv92.png)

在上图中，有一个列表视图，其中包含用户可以下载的项目列表。![下载按钮](https://i.stack.imgur.com/vsqbM.png)这是告诉用户他可以下载文件的图像。下载完成后，图片将变为![下载完成按钮](https://i.stack.imgur.com/D1Jf7.png). 我的问题是当我下载文件时，状态图像（表示下载已完成）会更改为另一行，相反，它应该更改为我选择的行。目前，如果我下载列表中的第一个文件，图像会更改为列表中的第 4 或第 5 项。此外，当我尝试从列表中下载任何其他文件时。它会打开最后下载的文件（这是应用程序的功能，如果文件已经下载，则在 pdf 阅读器中打开它），即，如果我下载列表中的第一个文件然后转到第二个项目，那么而不是下载第二个文件，它会打开最后下载的文件。此外，如果我滚动列表视图，列表中其他项目的下载状态也会更改。下面是我的适配器代码：

```
public class DownloadListAdapter extends BaseAdapter {
Context ctx;
public ArrayList<DownloadListDao> mDownloadList;
String readMoreLink;
public static final String TAG = "DownloadListAdapter";
ProgressDialog mProgressDialog;
private boolean isSDCardPresent;
File tieDir;
int downloadState[];

public DownloadListAdapter(Context ctx,
        ArrayList<DownloadListDao> mDownloadList) {
    this.ctx = ctx;
    this.mDownloadList = mDownloadList;
    downloadState = new int [mDownloadList.size()];
    for(int i = 0; i < mDownloadList.size(); i++) {
        downloadState[i] = 0;
    }
    tieDir = new File(Environment.getExternalStorageDirectory().toString()
            + "/tie");
}// Constructor

public int getCount() {
    return this.mDownloadList.size();
}// getCount

public Object getItem(int position) {
    return this.mDownloadList.get(position);
}// getItem

public long getItemId(int position) {
    return 0;
}// getItemId

static class ViewHolder {
    TextView txtTitle, txtTheme, txtDate;
    ImageView imgDownload;
}// ViewHolder

ViewHolder holder;

public View getView(final int position, View convertView, ViewGroup parent) {
    final String url = mDownloadList.get(position).getUrl();
    if (convertView == null) {
        convertView = LayoutInflater.from(parent.getContext()).inflate(
                R.layout.downlist_adapter, null);
        holder = new ViewHolder();

        holder.txtTitle = (TextView) convertView
                .findViewById(R.id.txtTitle);
        holder.txtTheme = (TextView) convertView
                .findViewById(R.id.txtTheme);
        holder.txtDate = (TextView) convertView.findViewById(R.id.txtDate);
        holder.imgDownload = (ImageView) convertView
                .findViewById(R.id.imgDload);

        holder.imgDownload.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                File mediaFile = null;
                if (url != null && !url.equals("null") && !url.equals("")) {
                    String fileName = url.toString().substring(
                            url.toString().lastIndexOf("/") + 1,
                            url.toString().length());
                    mediaFile = new File(tieDir, fileName);
                }
                processFile(mediaFile, url, position);
                int pos = (Integer)v.getTag();
                downloadState[pos] = 1;
            }
        });
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    if (mDownloadList != null && mDownloadList.size() > 0) {
        if (mDownloadList.get(position).getTitle() != null
                && !mDownloadList.get(position).getTitle().equals("null")
                && !mDownloadList.get(position).getTitle().equals("")) {
            holder.txtTitle.setText(mDownloadList.get(position).getTitle());
        }

        if (mDownloadList.get(position).getTheme() != null
                && !mDownloadList.get(position).getTheme().equals("null")
                && !mDownloadList.get(position).getTheme().equals("")) {
            holder.txtTheme.setText(mDownloadList.get(position).getTheme());
        }

        if (mDownloadList.get(position).getDate() != null
                && !mDownloadList.get(position).getDate().equals("null")
                && !mDownloadList.get(position).getDate().equals("")) {
            holder.txtDate.setText(mDownloadList.get(position).getDate());
        }

        if (downloadState[position] == 1) {
            holder.imgDownload.setImageDrawable(ctx.getResources()
                    .getDrawable(R.drawable.ic_dloaded));
        } else {
            holder.imgDownload.setImageDrawable(ctx.getResources()
                    .getDrawable(R.drawable.ic_dload));
        }
    }
    holder.imgDownload.setTag(position);
    return convertView;
}// getView

protected void downloadFile(String url, int position, String fileName) {

    Log.v(TAG, "Preparing to download");
    mProgressDialog = new ProgressDialog(ctx);
    mProgressDialog.setMessage("Dowloading...");
    mProgressDialog.setIndeterminate(false);
    mProgressDialog.setMax(100);
    mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

    isSDCardPresent = Environment.getExternalStorageState().equals(
            Environment.MEDIA_MOUNTED);
    if (!isSDCardPresent) {
        noSDCardAlert(ctx);
    } else {
        if ((tieDir.exists()) && (tieDir != null)) {
            if (NetworkConnection.isOnline(ctx)) {
                if (tieDir.isDirectory()) {
                    Log.v(TAG, "if tie dir URL:::" + url);
                    new DownloadAudioAsync(ctx, position, fileName).execute(url);
                }
            } else {
                ((DownloadListActivity) ctx)
                        .OpenNetErrDialog("Please check your internet connection...");
            }
        } else {
            boolean isDirectoryCreated = tieDir.mkdirs();
            if (isDirectoryCreated) {
                Log.v(TAG, "if tie not dir URL:::" + url);
                if (NetworkConnection.isOnline(ctx)) {
                    new DownloadAudioAsync(ctx, position, fileName).execute(url);
                } else {
                    ((DownloadListActivity) ctx)
                            .OpenWiFiDialog("Please check your internet connection...");
                }
            }
        }
    }
}

private void noSDCardAlert(Context ctx) {
    AlertDialog.Builder ad = new AlertDialog.Builder(ctx);
    ad.setMessage("No sd card present..");
    ad.setPositiveButton("OK", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            dialog.dismiss();
        }
    });

    if (!((DownloadDetail) ctx).isFinishing()) {
        ad.show();
    }
}

public void OpenDialog(String messageID) {

    final Dialog dialog = new Dialog(ctx,
            android.R.style.Theme_Translucent_NoTitleBar);
    dialog.setContentView(R.layout.dialog_base);
    dialog.getWindow().getAttributes().windowAnimations = android.R.style.Animation_Dialog;
    dialog.setCancelable(false);

    TextView alertMessage = (TextView) dialog.findViewById(R.id.txtMessage);
    Button btnOK = (Button) dialog.findViewById(R.id.btnOk);
    btnOK.setText("Show");
    alertMessage.setText(messageID);
    dialog.show();
    btnOK.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            dialog.dismiss();
        }
    });
}

protected void showPdf(File mediaFile) {
    Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setDataAndType(Uri.fromFile(mediaFile), "application/pdf");
    intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
    ctx.startActivity(intent);
}

public class DownloadAudioAsync extends AsyncTask<String, String, String> {
    Context ctx;
    int pos;
    private ProgressDialog pd;
    String fileName;

    public DownloadAudioAsync(Context ctx, int pos, String fileName) {
        this.ctx = ctx;
        this.pos = pos;
        this.fileName = fileName;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        Log.v(TAG, "inside on pre execute");
        pd = new ProgressDialog(ctx);
        pd.setMessage("Downloading...\nPlease wait..");
        pd.show();
    }

    @Override
    protected String doInBackground(String... aurl) {
        int count;

        try {
            Log.v(TAG,
                    "inside do in background with url::"
                            + aurl[0].toString());
            aurl[0] = aurl[0].replaceAll(" ", "%20");
            URL url = new URL(aurl[0]);

            URLConnection conexion = url.openConnection();
            conexion.connect();

            int lenghtOfFile = conexion.getContentLength();

            fileName = URLDecoder.decode(fileName, "UTF-8");
            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream(tieDir + "/"
                    + fileName);

            byte data[] = new byte[1024];

            long total = 0;

            while ((count = input.read(data)) != -1) {
                total += count;

                publishProgress("" + (int) ((total * 100) / lenghtOfFile));
                output.write(data, 0, count);
            }

            output.flush();
            output.close();
            input.close();
        } catch (Exception e) {
        }
        return null;
    }

    @Override
    protected void onPostExecute(String unused) {
        if (!((DownloadListActivity) ctx).isFinishing()) {
            pd.dismiss();
            updateView(pos);
        }
    }

    private void updateView(int pos) {
        View v = ((DownloadListActivity) ctx).menuListView.getChildAt(pos
                - ((DownloadListActivity) ctx).menuListView
                        .getFirstVisiblePosition());
        ImageView imgDloadBtn = (ImageView) v.findViewById(R.id.imgDload);
        imgDloadBtn.setImageDrawable(ctx.getResources().getDrawable(
                R.drawable.ic_dloaded));
        notifyDataSetChanged();
    }
}

private void processFile(File mediaFile, String url, int pos) {
    if (url != null && !url.equals("null") && !url.equals("")) {
        if (mediaFile != null) {
            Log.v(TAG, "in processFile FileName " + mediaFile.getName());
            Log.v(TAG, "in processFile Position " + pos);
            if(!mediaFile.exists()) {
                Log.v(TAG, "in processFile Media file doesn't exists");
                downloadFile(url, pos, mediaFile.getName());
            } else {
                Log.v(TAG, "in processFile Media file exists");
                try {
                    showPdf(mediaFile);
                } catch (ActivityNotFoundException anfe) {
                    OpenDialog("PDF Reader is not installed on your device.");
                }
            }
        }
    }
}
}// DownloadAdapter 
```

我已经阅读[了这篇文章](https://stackoverflow.com/questions/7738527/getting-an-issue-while-checking-the-dynamically-generated-checkbox-through-list/7739006#7739006)以回收视图（感谢[Knickedi](https://stackoverflow.com/users/920511/knickedi)的深入解释）。但是，我无法弄清楚实际问题在哪里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T07:38:30.080

每当您滚动视图时都会重新创建方法的问题`getview`，以处理您必须使用的确切位置`setTag & getTag`，请查看以下几个 stackvoerflow 答案以了解`setTag & getTag`：

[使用 ArrayAdapter 的 ListView 中的按钮](https://stackoverflow.com/a/14154397/646806)

[从android中的自定义列表中获取单选按钮值](https://stackoverflow.com/a/14646471/646806)

甚至将下载的状态存储到`booleanarray` 如下状态：

```
int boxState[]; 
```

在适配器构造函数中，最初设置为零：

```
for (int i = 0; i < getData.size(); i++) {
    boxState[i] = 0;

    } 
```

在适配器 getview 方法中：

```
holder.imgDownload.setTag(position); 
```

现在您单击下载按钮将值设置为 1（在按钮的 onclick 内）：

```
pos = (Integer) v.getTag();
boxState[pos]=1; 
```

最后，当您将视图检查条件滚动到以下方式时（将以下代码放入 getview 方法中）：

```
if (boxState[position] == 0) {
            holder.imgDownload.setImageDrawable(ctx.getResources()
                    .getDrawable(R.drawable.ic_dloaded)); //which aren't downloaded
        } else {
             holder.imgDownload.setImageDrawable(ctx.getResources()
                    .getDrawable(R.drawable.ic_dload)); // which are downloaded.
        } 
```

# java - 根据列中的重复项从数据中删除整行

> ID：15965360
> 
> 赞同：1
> 
> 时间：2013-04-12T07:19:11.313
> 
> 标签：java, mysql, database, duplicates

所以这是我的问题。我有一个巨大的数据文本文件，我需要通过显然使用 java 程序将所有这些数据快速输入到 mySQL 数据库中。我唯一的问题是，数据是由某个 ID 标识的。其中一些 ID 具有重复项，并且包含与彼此相同的所有信息。为了排序和清晰起见，我想删除所有这些。

解决此问题的最佳方法是什么？如果有人可以提供帮助，我将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T07:22:00.373

在读取数据时有一个 hashmap 或 hashset。检查 id 是否存在于 hasmap/hashset 中，如果存在则继续。否则输入 set/map 并插入。

顺便说一句： *hashmap 和 hashset 之间的区别在于 hashset 只接受值，而 hashmap 接受键值。但是，Hashset 本身在内存中使用了一个 hashmap，并且只是为值插入了一个虚拟对象。* 请参阅：[HashMap 和 Hashtable 之间的区别？](https://stackoverflow.com/questions/40471/differences-between-hashmap-and-hashtable)

**哈希集示例：**

```
 HashSet<Integer> distinctIds = new HashSet<Integer>();

    MyRowData rowdata;
    int rowID;

    while((rowdata = this.getRowData())!=null ) // or however you iterate over the rows using reader etc
    {
    rowID = rowdata.getRowID(); 

    if(!distinctIds.contains(new Integer(rowID)))
    {
      distinctIds.add(rowID);
      inertDataInMysql(rowdata); //however you insert your data here
      System.out.println("Adding " + rowID);
    }
    } 
```

您可以通过对多行执行可交换插入来使用批量插入来进一步加快代码速度。看：

*   [http://viralpatel.net/blogs/batch-insert-in-java-jdbc/](http://viralpatel.net/blogs/batch-insert-in-java-jdbc/)
*   [为什么批量插入/更新更快？批量更新如何工作？](https://stackoverflow.com/questions/1006969/why-are-batch-inserts-updates-faster-how-do-batch-updates-work)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:23:31.903

将数据添加到数据库时，只需在您的 ID 中添加一个主键。这样，重复的 ID 行将不会添加到您的数据库中。希望这可以帮助。

# c# - Is DotNetNuke CMS W3C Standards compliant?

> ID：15965366
> 
> 赞同：0
> 
> 时间：2013-04-12T07:19:28.760
> 
> 标签：c#, asp.net, dotnetnuke

**My questions is:**
Whether DotNetNuke is W3C compliant for the code it generates?

Mostly articles that I have read are bit outdated (and I'm a newbie too) so I'm unable to decide. Any help will be highly appreciated.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-12T10:35:06.060

Latest version of DotNetNuke 7.x is NOT standard compliant. If you go to [http://validator.w3.org/](http://validator.w3.org/) and add www.dotnetnuke.com you will notice some errors. They are minor and fixable errors. Most of the code is standard compliant but not all.

# c# - 尽早应用自动省略号

> ID：15965370
> 
> 赞同：0
> 
> 时间：2013-04-12T07:19:48.433
> 
> 标签：c#, winforms

我有几个标签，左右固定，连续。我已启用 AutoEllipsis，它适用，但我希望它更早激活 - 在标签之间留出一点空间。我认为边距会在这里做，但随后标签文本停止激活省略号，反而变得更糟。有谁知道怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:25:04.033

使用`TableLayoutPanel`. `Label`在列中锚定，并锚定`TableLayoutPanel`fo `Form`。

# php - 如何配置 XAMPP 从 localhost 发送邮件？

> ID：15965376
> 
> 赞同：279
> 
> 时间：2013-04-12T07:20:00.763
> 
> 标签：php, xampp

我正在尝试从本地主机发送邮件。但我无法从本地主机发送邮件，所以任何人都可以告诉我如何重新配置​​我的 xampp 以从本地主机发送邮件

* * *

## 回答 #1

> 赞同：400
> 
> 时间：2013-08-12T10:57:03.610

您可以使用 sendmail 包从 localhost 发送邮件，sendmail 包在 XAMPP 中内置。因此，如果您使用的是 XAMPP，那么您可以轻松地从 localhost 发送邮件。

例如，您可以配置`C:\xampp\php\php.ini`并`c:\xampp\sendmail\sendmail.ini`让 gmail 发送邮件。

在`C:\xampp\php\php.ini`查找`extension=php_openssl.dll`并从该行的开头删除分号，以使 SSL 为本地主机的 gmail 工作。

在 php.ini 文件中查找`[mail function]`和更改

```
SMTP=smtp.gmail.com
smtp_port=587
sendmail_from = my-gmail-id@gmail.com
sendmail_path = "\"C:\xampp\sendmail\sendmail.exe\" -t" 
```

现在打开`C:\xampp\sendmail\sendmail.ini`。将 sendmail.ini 中的所有现有代码替换为以下代码

```
[sendmail]

smtp_server=smtp.gmail.com
smtp_port=587
error_logfile=error.log
debug_logfile=debug.log
auth_username=my-gmail-id@gmail.com
auth_password=my-gmail-password
force_sender=my-gmail-id@gmail.com 
```

现在你已经完成了！使用邮件功能创建 php 文件并从本地主机发送邮件。

PS：不要忘记在上面的代码中替换**my-gmail-id**和 **my-gmail-password 。**此外，如果您从上面复制设置，请不要忘记删除重复的键。例如，如果在 php.ini 文件中有另一个**sendmail_path** ，请在下面的行中添加注释：`sendmail_path="C:\xampp\mailtodisk\mailtodisk.exe"`

还记得使用 XAMMP 控制面板重新启动服务器，以使更改生效。

对于 gmail，请检查[https://support.google.com/accounts/answer/6010255](https://support.google.com/accounts/answer/6010255)以允许从不太安全的应用程序访问。

> 要在 Linux 上通过 Gmail 从 localhost 发送电子邮件（带有 sendmail 包），请检查[PHP+Ubuntu Send email using gmail form localhost](https://stackoverflow.com/questions/33969783/phpubuntu-send-email-using-gmail-form-localhost/45125490#45125490)。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-07-13T13:41:07.060

在用于测试目的的 XAMPP v3.2.1 中，您可以看到 XAMPP 在 XAMPP/mailoutput 中发送的电子邮件。在我的 Windows 8 上，这不需要任何额外的配置，是测试电子邮件的简单解决方案

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2017-09-08T03:38:00.983

## 您可以在没有 Internet 的情况下测试在您的 PC 中发送邮件

你应该使用[Papercut](https://github.com/ChangemakerStudios/Papercut)这个简单的应用程序来测试发送邮件。你不需要配置任何东西。

只需运行它并尝试测试发送邮件：

test_sendmail.php

```
<?php
$to = "somebody@example.com";
$subject = "My subject";
$txt = "Hello world!";
$headers = "From: webmaster@example.com" . "\r\n" .
"CC: somebodyelse@example.com";

mail($to,$subject,$txt,$headers);
?> 
```

你会看到这个：

[![在此处输入图像描述](https://i.stack.imgur.com/ldBnw.png)](https://i.stack.imgur.com/ldBnw.png)

我希望你有一个美好的一天。你可以在**Youtube 上**找到我以获取更多教程[Piseth Sok](https://www.youtube.com/channel/UC6PjJ7zV6oFsyg1hKLnATJw/)

欢呼！

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2014-04-14T13:21:53.430

在本地主机或本地服务器上发送电子邮件非常简单

注意：我在安装了 Xampp 的 Windows 7 64 位上使用测试邮件服务器软件

只需下载测试邮件服务器工具并根据其网站上给出的说明安装[测试邮件服务器工具](http://www.toolheap.com/test-mail-server-tool/)

现在您只需要更改`php.ini`文件下的两行

1.  查找`[mail function]`并删除之前的分号`;smtp = localhost`
2.  把分号放在前面`sendmail_path = "C:\xampp\mailtodisk\mailtodisk.exe"`

您不需要更改任何其他内容，但如果您仍然没有收到电子邮件而不是检查`SMTP port`，则端口号必须相同。

以上方法为Xampp软件提供的默认设置。

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2013-04-12T07:25:13.050

您必须在服务器上配置[SMTP](https://www.rfc-editor.org/rfc/rfc821)。您可以免费使用Google 提供的[G Suite SMTP](https://support.google.com/a/answer/176600)：

```
<?php

$mail = new PHPMailer(true);

// Send mail using Gmail
if($send_using_gmail){
    $mail->IsSMTP(); // telling the class to use SMTP
    $mail->SMTPAuth = true; // enable SMTP authentication
    $mail->SMTPSecure = "ssl"; // sets the prefix to the servier
    $mail->Host = "smtp.gmail.com"; // sets GMAIL as the SMTP server
    $mail->Port = 465; // set the SMTP port for the GMAIL server
    $mail->Username = "your-gmail-account@gmail.com"; // GMAIL username
    $mail->Password = "your-gmail-password"; // GMAIL password
}

// Typical mail data
$mail->AddAddress($email, $name);
$mail->SetFrom($email_from, $name_from);
$mail->Subject = "My Subject";
$mail->Body = "Mail contents";

try{
    $mail->Send();
    echo "Success!";
} catch(Exception $e){
    // Something went bad
    echo "Fail :(";
}

?> 
```

阅读更多关于`PHPMailer` [这里](https://github.com/Synchro/PHPMailer)。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2019-02-02T11:17:30.577

根据我的个人经验，我发现与 Vikas Dwivedi 答案非常相似的事情会很好地工作。

第 1 步（php.ini 文件）

在位于`xampp\php\php.ini`. 将设置更改为以下内容：

```
 extension=php_openssl.dll
 [mail function]
 sendmail_path =":\xampp7\sendmail\sendmail.exe -t"
 mail.add_x_header=On 
```

将其他变量`mail funciton`放在`;`它们之前，将其关闭。例如`;smtp_port=25`

第 2 步（sendmail.ini 文件）

在位于 xampp\sendmail\semdmail.ini 的 sendmail.ini 中更改为以下内容：

```
 smtp_server=smtp.gmail.com
 smtp_port=465
 smtp_ssl=auto
 auth_username=address@gmail.com
 auth_password=YourPassword 
```

第 3 步（代码）

创建一个 php 文件并使用以下内容：

```
 <?php
    mail($to, "subject", "body", "From: ".$from);
 ?> 
```

**注意**

*   您需要重新启动 apache 才能重新加载 php.ini。
*   您需要在[https://myaccount.google.com/u/1/security中激活 Google Less 安全应用访问](https://myaccount.google.com/u/1/security)
*   使用管理员权限运行 Xampp 可能会有所帮助。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-03-05T17:32:44.193

此代码用于来自本地 XAMPP 和 Gmail 帐户的邮件。这段代码很简单，对我来说试试你自己。

**下面更改 php.ini 文件**

```
SMTP=smtp.gmail.com 
smtp_port=587 
sendmail_from = your@gmail.com 
sendmail_path = "\"C:\xampp\sendmail\sendmail.exe\" -t" 
extension=php_openssl.dll 
```

**sendmail.ini 文件中的以下更改**

```
smtp_server=smtp.gmail.com
smtp_port=587
error_logfile=error.log
debug_logfile=debug.log 
auth_username=yourmail@gmail.com 
auth_password=your-gmail-password 
force_sender=yourmail@gmail.com 
```

**请在您的 PHP 文件中写入 belove 代码以发送电子邮件**

```
<?php 
    $to = "tomail@gmail.com";
    $subject = "Test Mail";
    $headers = "From: from_mail@gmail.com\r\n";
    $headers .= "Reply-To: replytomail@gmail.com\r\n";
    $headers .= "CC: theassassin.edu@gmail.com\r\n";
    $headers .= "MIME-Version: 1.0\r\n";
    $headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
    $message = '<html><body>';
    $message .= '<img src="//css-tricks.com/examples/WebsiteChangeRequestForm/images/wcrf-header.png" alt="Website Change Request" />';
    $message .= '<table rules="all" style="border-color: #666;" cellpadding="10">';
    $message .= "<tr style='background: #eee;'><td><strong>Name:</strong> </td><td>Details</td></tr>";
    $message .= "<tr><td><strong>Email:</strong> </td><td>Details</td></tr>";
    $message .= "<tr><td><strong>Type of Change:</strong> </td><td>Details</td></tr>";
    $message .= "<tr><td><strong>Urgency:</strong> </td><td>Details</td></tr>";
    $message .= "<tr><td><strong>URL To Change (main):</strong> </td><td>Details</td></tr>";
    $addURLS = 'google.com';
    if (($addURLS) != '') {
        $message .= "<tr><td><strong>URL To Change (additional):</strong> </td><td>" . $addURLS . "</td></tr>";
    }
    $curText = 'dummy text';           
    if (($curText) != '') {
        $message .= "<tr><td><strong>CURRENT Content:</strong> </td><td>" . $curText . "</td></tr>";
    }
    $message .= "<tr><td><strong>NEW Content:</strong> </td><td>New Text</td></tr>";
    $message .= "</table>";
    $message .= "</body></html>";

    if(mail($to,$subject,$message,$headers))
    {
        echo "Mail Send Sucuceed";
    }
    else{
        echo "Mail Send Failed";    
    }
?> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-04-22T23:43:33.447

除了所有答案，请注意`sendmail.ini`文件中的内容：

> auth_password=this- is- **Not** -your-Gmail-password

由于新的谷歌安全问题，您应该按照以下步骤为此目的设置应用程序密码：

1.  在安全选项卡中转到[https://accounts.google.com/](https://accounts.google.com/)
2.  开启两步验证
3.  返回安全选项卡并设置应用程序密码（在选择应用程序下拉菜单中，您可以选择“其他”）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-02T13:46:50.657

刚刚花了一个多小时试图完成这项工作。对于所有发布的所有建议都无法正常工作的问题的每个人：您必须在您的 XAMPP 界面中重新启动 Apache！只是重新启动 XAMPP 将不起作用！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-12T07:25:55.850

您必须为此定义`SMTP`服务器和端口。除了从实时主机发送邮件之外。

[这是一个有用的链接](http://roshanbh.com.np/2007/12/sending-e-mail-from-localhost-in-php-in-windows-environment.html)。

> 注意：该端口应该未使用。请注意，某些应用程序喜欢`Skype`使用默认端口并阻止发送邮件。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-02-26T09:18:48.107

我尝试了很多方法从 XAMPP 本地主机发送邮件，但由于 XAMPP 没有 SSL 证书，我的电子邮件请求被 Gmail 或类似的 SMTP 服务提供商阻止。

然后我使用 MailHog 作为本地 smtp 服务器，你需要做的就是运行它。localhost:1025 用于 smtp 服务器，localhost:8025 用于邮件服务器，您可以在其中查看您发送的电子邮件。

这是我的代码：

```
 require_once "src/PHPMailer.php";
    require_once "src/SMTP.php";
    require_once "src/Exception.php";

    $mail = new PHPMailer\PHPMailer\PHPMailer();

      //Server settings
    $mail->SMTPDebug = 3;                      // Enable verbose debug output
    $mail->isSMTP();                                            // Send using SMTP
    $mail->Host       = 'localhost';                    // Set the SMTP server to send through
    $mail->Port       = 1025;                                    // TCP port to connect to
    // $mail->Username   = '';                     // SMTP username
    // $mail->Password   = '';                               // SMTP password
    // $mail->SMTPAuth   = true;                                   // Enable SMTP authentication
    // $mail->SMTPSecure = 'tls';         // Enable TLS encryption; `PHPMailer::ENCRYPTION_SMTPS` also accepted

    //Recipients
    $mail->setFrom('testtoo@testto.com', 'Mailer');
    $mail->addAddress('testtoo@webbamail.com', 'Joe User');     // Add a recipient

    // Content
    $mail->isHTML(true);                                  // Set email format to HTML
    $mail->Subject = 'Here is the subject';
    $mail->Body    = 'This is the HTML message body <b>in bold!</b>';
    $mail->AltBody = 'This is the body in plain text for non-HTML mail clients';

    if(!$mail->Send()) {
        echo "Mailer Error: " . $mail->ErrorInfo;
    } else {
        echo "Message sent!";
    } 
```

[MailHog Github 存储库链接](https://github.com/mailhog/MailHog)

# python - Python：使用 .append() 检索和修改字典中的值时出错？

> ID：15965377
> 
> 赞同：0
> 
> 时间：2013-04-12T07:20:06.390
> 
> 标签：python, dictionary, key, append

假设我有一个字符列表，我想将每个字符映射到它在列表中出现的次数。下面的代码实现了这一点：

```
characters = ['a','b','c','a']
d = {}
for ch in characters:
   d[ch] = d.get(ch,0) + 1
return d 
```

现在假设，我不想将每个字符映射到它在列表中出现的次数，而是将它映射到一个 1 的列表，其中每个 1 代表列表中的一次出现。例如，类似 {a:[1,1], b:[1], c:[1]}。我使用相同的格式，但它不起作用。有人可以解释为什么不吗？

```
characters = ['a','b','c','a']
d = {}
for ch in characters:
   d[ch] = d.get(ch,[]).append(1)
#print type(d['a'])
return d 
```

我得到 AttributeError: 'NoneType' object has no attribute 'append'，即使如果我删除 for 循环中的 .append() 打印类型（d['a']) 会返回“list”。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:46:06.127

```
characters = ['a','b','c','a']
d = {}
for ch in characters:
   d[ch] = d.get(ch,[]).append(1)
#print type(d['a'])
return d 
```

`dict.get`返回键的值，`ch`如果它不存在，则返回您提供的默认值，即`[]`您创建的列表。无论如何，我认为您可能会感到困惑，因为`d.get`它没有设置任何值，它只返回一个。然后，您将附加`1`到此列表。`.append`是一个就地操作，因此它不会像您预期的那样返回后附加列表，它只是返回`None`以表示它不应该以您的方式使用。你可以做的是

```
d.setdefault(ch, []).append(1) 
```

哪个符合您的期望；）为了避免这种疯狂的语法，您可以使用`collections.defaultdict`如下所示：

```
d = defaultdict(list)
d[ch].append(1) 
```

看起来更干净

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:26:08.250

您将 的值分配`d[ch]`给 的返回值`[].append`。这样想你的代码相当于

```
tmp = d.get(ch,[])
d[ch] = tmp.append(1) 
```

试试这个：

```
d[ch] = d.get(ch,[])
d[ch].append(1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T07:50:00.417

该行`d[ch] = d.get(ch,[]).append(1)`设置`d[ch]`为函数返回的值`append`，即无。改为这样做：

```
d[ch] = d.get(ch, [])
d[ch].append(1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T09:11:10.323

这是我提出的解决方案：

```
characters = ['a','b','c','a']
d = {}
for ch in characters:
    d.setdefaultappend(ch, []).append(1)
return d 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-12T07:33:31.547

使用python`dir`函数

`list`有附加方法

`dist`没有附加方法

```
>>> characters = []
>>> d = {}
>>> dir(characters)
['__add__', '__class__', '__contains__', '__delattr__', '__delitem__', 
'__delslice__', '__doc__', '__eq__', '__format__', '__ge__', 
'__getattribute__', '__getitem__', '__getslice__', '__gt__', '__hash__', 
'__iadd__', '__imul__', '__init__', '__iter__', '__le__', '__len__', 
'__lt__', '__mul__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', 
'__repr__', '__reversed__', '__rmul__', '__setattr__', '__setitem__', 
'__setslice__', '__sizeof__', '__str__', '__subclasshook__', 'append',
'count', 'extend', 'index', 'insert', 'pop', 'remove', 'reverse', 'sort']

>>> dir(d)
['__class__', '__cmp__', '__contains__', '__delattr__', '__delitem__', '__doc__', 
'__eq__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__gt__', 
'__hash__', '__init__', '__iter__', '__le__', '__len__', '__lt__', '__ne__', 
'__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__setitem__', 
'__sizeof__', '__str__', '__subclasshook__', 'clear', 'copy', 'fromkeys', 'get', 
'has_key', 'items', 'iteritems', 'iterkeys', 'itervalues', 'keys', 'pop', 
'popitem', 'setdefault', 'update', 'values', 'viewitems', 'viewkeys', 'viewvalues'] 
```

# javascript - 获取客户端主机名

> ID：15965378
> 
> 赞同：0
> 
> 时间：2013-04-12T07:20:08.987
> 
> 标签：javascript

是否可以`javascript`获取运行脚本的客户端的主机名？如何？

我**不是**在谈论`url`.

# python - python中的连接子进程

> ID：15965382
> 
> 赞同：1
> 
> 时间：2013-04-12T07:20:37.473
> 
> 标签：python, subprocess

我是**python**新手，并且有一些与子进程相关的疑问。我想去任何目录并在那个位置做点什么。所以我这样尝试：

```
q1 = subprocess.Popen('cd ~/Desktop/my_folder', stdout=subprocess.PIPE, shell=True)
(out1, err) = q1.communicate() 
```

现在当我做

```
q2 = subprocess.Popen('ls', stdin=q1.stdout, stdout=subprocess.PIPE, shell=True)
(out2, err) = q2.communicate() 
```

我看到ls命令已经在我之前的地方执行了，所以这意味着q1进程被杀死了，我只想知道如何在q1进程中执行一些操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:25:33.273

`cd`有点特别。每个进程都有自己的当前工作目录。因此，当您为 创建子进程时`cd ~/Desktop/my_folder`，当前目录仅针对该特定子进程进行更改（更改其目录后立即退出）。

父进程以及任何其他子进程不受影响。

更改目录的最简单方法是使用[`os.chdir()`](http://docs.python.org/2/library/os.html#os.chdir).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T08:11:51.867

您可以通过[Shutil](http://docs.python.org/2/library/shutil.html)库进行 os 相关操作。

# javascript - 如何将焦点设置在 jquery 确认对话框上

> ID：15965386
> 
> 赞同：1
> 
> 时间：2013-04-12T07:21:00.430
> 
> 标签：javascript, jquery, html

我有一个简单的 jquery 确认对话框，并希望将焦点放在对话框本身而不是任何其他元素上。下面的代码是我所做的重点：

```
function showAlert() {   

                $("#dialog-confirm").dialog({
                    title: 'Main Information',
                    resizable: false,
                    height:140,
                    modal: true,
                    closeOnEscape:true,
                    buttons: {        
                        "Yes": function() {
                            document.getElementById('form1:newProfile' ).value="true";
                            if(disableSaveFlag) return false; else disableEnableSaveBtn('true');
                               $( this ).dialog( "close" );
                        },
                        "No": function() {
                            document.getElementById('form1:newProfile' ).value="false";
                            if(disableSaveFlag) return false; else disableEnableSaveBtn('true');
                            $( this ).dialog( "close" );
                        }      
                    }    
                });
                 $("#dialog-confirm").focus(); // this line sets focus on div element with given id
            }

<div id="dialog-confirm" style="display:none">  
    <p><span class="ui-icon ui-icon-alert" style="float: left; margin: 0 7px 20px 0;"></span>
        Do you want to create a new profile ? 
    </p>
</div> 
```

问题是我找不到对话框本身的“Id”来关注它。结果，焦点设置在 Div 元素上，而我的标题没有集中。

下面是我用上面的代码得到的：

![在此处输入图像描述](https://i.stack.imgur.com/ygEnm.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-02-01T07:38:53.713

只需按下`Tab`，它将聚焦对话框的第一个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-10T09:27:23.977

我想我们可以专注于以下事件。我只是尝试过并为我工作得很好..

```
onContentReady: function () {
    //select the element you want to focus here
    $(".btn-success").focus();
} 
```

所以我的完整代码看起来像这样。在这种情况下，我将按钮集中在我的对话框上。

```
$.confirm({
    icon: "fas fa-check-square",
    title: "&nbsp;Completed!",
    content: "Action Plans Updated Successfully!",
    type: "green",
    typeAnimated: true
    buttons: {
    Complete: {
      text: "Complete",
      btnClass: "btn-success",
      action: function () {
        location.reload(true);
      },
    },
  },
  onContentReady: function () {
      $(".btn-success").focus();
  },
}); 
```

# c# - Linq2Sql 的联合调用次数有限制吗？

> ID：15965389
> 
> 赞同：0
> 
> 时间：2013-04-12T07:21:12.287
> 
> 标签：c#, entity-framework, linq-to-sql, limit, union

使用Linq的Union方法，配合Entity Framework，在同一个上可以使用的次数有上限`IQueryable`吗？

考虑这个片段，显然有点做作：

```
public IQueryable<Person> GetPeople(IEnumerable<PersonDto> candidates)
{
    var successful = this.peopleRepository.All().Where(p => false);

    foreach(var candidate in candidates)
    {
        if (candidate.IsSuccessful())
        {
            var successfulCandidate = this.peopleRepository.All()
                            .Where(p => p.id == candidate.id);
            successful = successful.Union(successfulCandidate);
        }
    }

    return successful;
} 
```

`IQueryables`我可以使用 Entity Framework 和 SQL Server联合并仍然获得结果的次数是否有限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:30:11.373

Union 方法使用`==`第一个参数（此处为 ）的运算符实现`successful`。来自 MSDN：

```
The query behavior that occurs as a result of executing an expression tree that 
represents calling Union<TSource>(IQueryable<TSource>, IEnumerable<TSource>) depends
on the implementation of the type of the source1 parameter. The expected behavior is that 
the set union of the elements in source1 and source2 is returned. 
```

因此，如果源是自定义对象，您可能会遇到错误，具体取决于您的实现`==`以及您在`Union`参数中输入的内容，但这与调用次数无关`Union`

# makefile - 简单的 Makefile 不采用包含路径

> ID：15965390
> 
> 赞同：3
> 
> 时间：2013-04-12T07:21:13.857
> 
> 标签：makefile

以下是我的makefile。但它在构建过程中没有采用包含路径。

```
SHELL   = /bin/sh
CC      = g++ 
FLAGS   = 
CFLAGS  = -fPIC 
TARGET  = my_bridge.so
INC=-I/my_custom_path/include/ -I/my_custom_path/include/linux

SOURCES = $(shell echo *.cpp)
HEADERS = $(shell echo *.h)
OBJECTS = $(SOURCES:.cpp=.o)

all: $(TARGET)

$(TARGET): $(OBJECTS)
    $(CC) $(FLAGS) $(INC) $(CFLAGS) -o $(TARGET) $(OBJECTS) 
```

当我构建时，我得到以下行

```
g++    -c -o my_bridge.o my_bridge.cpp 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T07:46:52.927

您的`$(TARGET): $(OBJECTS)`规则告诉 make 如何生成`my_bridge.so`out of `my_bridge.o`，但您没有给出解释如何首先制作的规则`my_bridge.o`。`make`因此，它依赖于它的隐含规则，它为您提供了您所看到的命令。您可以定义自己的规则来编译`.cpp`文件，例如

```
%.o: %.cpp
        $(CC) $(FLAGS) $(INC) $(CFLAGS) -o $@ $< 
```

或将您的 include 指令放入 中`$(CXXFLAGS)`，该指令由`make`的默认规则使用（请参阅[https://www.gnu.org/software/make/manual/html_node/Catalogue-of-Rules.html#Catalogue-of-Rules](https://www.gnu.org/software/make/manual/html_node/Catalogue-of-Rules.html#Catalogue-of-Rules)）

# haskell - 如何将一个外部 hamlet 文件包含在另一个文件中？

> ID：15965394
> 
> 赞同：2
> 
> 时间：2013-04-12T07:21:37.023
> 
> 标签：haskell, yesod, hamlet

我的问题很简单：

如何将一个外部 hamlet 文件包含到另一个外部 hamlet 文件中？

假设我有一个在每个页面之间共享的页眉或页脚，它是否必须像这里提到的那样“在 haskell 中组装” [，](http://www.yesodweb.com/book/widgets#60-x10 "这里")还是只能从另一个 hamlet 文件中引用，类似于Django的[include指令？](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#include)

谢谢

# jquery - CSS 未应用于 IE 模式对话框中的内容

> ID：15965396
> 
> 赞同：1
> 
> 时间：2013-04-12T07:21:40.043
> 
> 标签：jquery, html, jquery-ui, css

我最近编写了一些代码，其中有几个 jQuery UI 模式对话框。在这些模态对话框中的每一个中，我都不想要 jQuery 提供的默认标题栏，所以我`create`在对话框代码的函数中使用了这行代码：

```
$(this).parents(".ui-dialog:first").find(".ui-dialog-titlebar").css("display","none"); 
```

然后我只是以这种方式填充模态对话框的内容：

### HTML

```
<div id="helpdialog" class="helpbox">
    <header id="helptitle">Help</header>    
    <p id="helptext">
        The aim of the game is to escape the maze by forming a correct sentence that ends on one of the edges of the grid.<br><br>
        From each square you can only move to one of the highlighted squares. Choose the only word that can correctly follow the word in the square that you are in and click on it.Move one square at a time, forming a sentence, until you reach one of the edges of the grid or until it is impossible to extend your sentence further. Click on Submit.<br><br>
        To undo your selections click on the squares you want to deselect in the reverse order to that in which you selected them (they will be numbered).<br><br>
        If you click on Reveal, the sentence will be shown for two seconds, and then you'll be able to resume playing.<br><br>
        In the Single player game find all of the sentences in the shortest time possible. 
    </p>
</div> 
```

### CSS

```
#helptitle {
    height: 1.5em;
    width: 100%;
    background-color: #d9d3ed;
    text-align: center;
    font-size: 1.3em;
    font-family: Dejavu, Verdana, Arial, sans-serif;
}
#helptext { 
    font-size: 0.9em;
    padding: .5em;
    font-weight: normal;
    margin-top: 0; 
} 
```

**好吧，问题是没有任何 CSS 属性似乎仅在较低版本的 IE 中**应用于`header`标记。不过，标签的 CSS会被应用。在所有其他浏览器中，它工作正常。我需要使用更具体的选择器还是有其他问题？**`p`**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:23:51.710

那是因为`<header>`标签只支持[**IE9**](http://www.w3schools.com/tags/tag_header.asp)，而不是以前。

一种解决方案是将 div 中的所有文本定位为标题，然后更具体地定位段落文本，例如

```
div {
    color:red;
}

div > p {
    color:blue;
} 
```

这是一个[**jsFiddle**](http://jsfiddle.net/eZHAz/)示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:25:39.630

这需要[HTML5 Shiv](http://code.google.com/p/html5shiv/)！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T07:26:29.670

IE 8 及更低版本不对未知元素应用任何样式。[在这里](http://fortuito.us/diveintohtml5/semantics.html#unknown-elements)查看更多信息。**

# security - 为 MongoDB 提供安全性的问题

> ID：15965397
> 
> 赞同：1
> 
> 时间：2013-04-12T07:21:43.347
> 
> 标签：security, mongodb

当我尝试使用具有安全性的 MongoDB 时，我遇到了一个大问题。昨天我向我的 MongoDB 添加了一个管理员用户，每个数据库的用户，我添加了 iptables 以提高安全性，MongoDBs 有时运行良好，但有时它不起作用，并显示消息 `** WARNING: You are running in OpenVZ。这是已知的坏了！！！``

然后，我重新安装了 MongoDB，我做了和以前一样的事情，但是我收到了同样的消息，除了我用这个启动 mongo 之外：`mongod --fork --logpath /var/log/mongodb.log --logappend`，但是如果我添加`--port foo --nohttpinterface`了，进程，如果启动，它没有在后台启动，因此，如果我尝试初始化我的 Node.JS，我将被迫关闭 MongoDB 进程。我也尝试安装 MongoDB 10Gen，但它给了我很多问题，所以我无法使用它。

如何在不损坏 MongoDB 的情况下保护我的 MongoDB 服务器和数据库？

谢谢提前！

编辑：

这是我在使用 MongoDB 10gen 时遇到的错误`exception in initAndListen std::exception: locale::facet::_S_create_c_locale name not valid, terminating Fri Apr 12 11:33:26.515 dbexit:`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:08:27.107

你的VM平台是OpenVZ吗？如果是这样，那么由于管理程序执行内存管理的方式，这会导致很多很多问题。有一张关于此的[JIRA 票。](https://jira.mongodb.org/browse/SERVER-1121)

我会问你的虚拟机提供商两个问题：

1）你的虚拟机使用什么管理程序

2) 如果是 OpenVZ，是否可以迁移到 Xen 或 KVM 管理程序。如果他们不能提供任何 OpenVZ 的替代品，我会感到惊讶。

# php - CodeIgnitor_2.1.3 中的 URI ROUTING 引发“未找到”错误

> ID：15965404
> 
> 赞同：-1
> 
> 时间：2013-04-12T07:22:06.580
> 
> 标签：php, codeigniter, apache2, wampserver

我已经安装了**CodeIgniter_2.1.3** 并运行

*   Windows 7的
*   Wamp 服务器 2.1
*   PHP 5.3.5
*   阿帕奇 2.2.17

在**\applicationconfig\routes.php**中，我创建了

```
$route['default_controller'] = "welcome";
$route['404_override'] = '';
$route['products/catlog'] = "welcome/getOneMethod"; 
```

在**\application\controllers\welcome.php**中，我创建了一个方法

```
 public function index()
{
    $this->load->view('welcome_message');
}

public function getOneMethod()
{
        echo "hi im in newMethod";
} 
```

> `http://localhost/CodeIgniter_2.1.3/products/catlog`

现在我希望在浏览器上运行上面的这个 url 给我页面

> 嗨，我在 newMethod 中

但相反，我收到了错误消息。

> 未找到
> 
> 在此服务器上未找到请求的 URL /CodeIgniter_2.1.3/products/catlog。

我应该怎么做才能使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:42:17.593

对于给定的 url 路由和控制器。

您将需要使用：

```
http://localhost/CodeIgniter_2.1.3/index.php/products/catlog/ 
```

可以使用 htaccess 重写规则删除 url 中的 index.php 部分。

在 /codeigniter2.1.3/ 文件夹中创建一个 .htaccess 文件并放置以下规则：

```
 <IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /CodeIgniter_2.1.3/

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /CodeIgniter_2.1.3/index.php [L]
    </IfModule> 
```

注意：这可能不是最好的方法。

编辑：

确保控制器完全如下所示，

```
class Welcome extends CI_Controller {

    public function index() {
        $this->load->view('welcome_message');
    }

    public function getOneMethod() {
        echo "hi im in newMethod";
    }

} 
```

路线如下：

```
$route['default_controller'] = "welcome";
$route['404_override'] = '';
$route['products/catlog'] = "welcome/getOneMethod"; 
```

暂时删除 htacces，并使其与 url 中的 index.php 一起使用。

IE：

```
http://localhost/CodeIgniter_2.1.3/index.php/products/catlog/ 
```

注意：由于您可以看到欢迎消息，因此您的安装或服务器没有问题。可能有一些语法错误。所以我建议你复制粘贴上面的代码，因为我已经检查过它们并且它们正在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:26:36.470

Doo 你访问 codeigniter 文档网站，你可以从这个 url 获得帮助如何创建静态页面

[http://ellislab.com/codeigniter/user-guide/tutorial/static_pages.html](http://ellislab.com/codeigniter/user-guide/tutorial/static_pages.html)

# linq - 使用 LINQ 从相同的两个表中的多个多对多关系中检索数据

> ID：15965405
> 
> 赞同：0
> 
> 时间：2013-04-12T07:22:06.770
> 
> 标签：linq, many-to-many

我有 4 张桌子：

1.  账户
2.  相片
3.  AccountPhotos (AccuntID, PhotoID) - 保存每个帐户购买照片的记录
4.  AccountFlagPhotos (AccountID, PhotoID) - 保存每个帐户的标记照片记录

因此，我在相同的 2 个表之间有 2 个多对多关系，保存相同的数据但用于不同的目的。

我通常在多对多关系表之间选择 LINQ 中的记录，如下所示：

```
public IQueryable<Photo> GetByAccount(string username)
    {
        //Get the specific Account record
        Account myAccount = new UserDAL().GetByID(username);

        //Get all photos for that account (many to many)
        return myAccount.Photos.AsQueryable();
    } 
```

问题是这次我在相同的两个表之间有两个多对多关系。如何在上面的代码中确定我想从哪个表（表 3 或 4）中检索记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:27:16.390

1.  转到**实体模型**
2.  右键单击**关系**
3.  选择**属性**
4.  使用**End2 导航属性**

*注意：*

从图表中，您可以通过从特定表的**导航属性**中选择关系来直接转到**关系属性。**

# ios - 消息未通过 XMPP 发送

> ID：15965410
> 
> 赞同：0
> 
> 时间：2013-04-12T07:22:16.283
> 
> 标签：ios, objective-c, xmpp, xmppframework

我在我的应用程序中使用 XMPP。每当我尝试向任何特定 ID（例如我的代码中的“test.codemen@gmail.com”）发送消息时，我的消息都不会被发送。我的代码如下。提前致谢。

```
- (IBAction)sendMsg:(id)sender 
{
    NSXMLElement *body = [NSXMLElement elementWithName:@"body"];
    [body setStringValue:msgField.text];

    NSXMLElement *message = [NSXMLElement elementWithName:@"message"];
    [message addAttributeWithName:@"type" stringValue:@"chat"];
    [message addAttributeWithName:@"to" stringValue:@"test.codemen@gmail.com"];
    [message addChild:body];

    iPhoneXMPPAppDelegate *share = [iPhoneXMPPAppDelegate sharedInstance];
    [[share xmppStream] sendElement:message];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T03:19:49.253

打印 xml，然后查看消息中的内容。也许您正在向错误的 JID 发送消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:06:45.820

你的代码对我来说看起来不错。Google Talk 仅将消息发送给您订阅的联系人。您向其发送消息的用户是否在您的联系人列表中？

# android - 使用 onListItemClick 切换案例循环

> ID：15965411
> 
> 赞同：0
> 
> 时间：2013-04-12T07:22:18.617
> 
> 标签：android, android-listview, switch-statement

我有一个列表视图，并且可以使用 onListItemClick 手动使用切换案例启动活动：

**案例0：案例1：案例2：.......**

但我想动态获取列表视图项目的数量，并像案例循环一样使用它们：**案例 i++**。我可能吗？

我想做的：

```
...
    setListAdapter(adapter);

      @Override
        public void onListItemClick(ListView l, View v, int position, long id) {
                super.onListItemClick(l, v, position, id);

                final int index = position;
                switch (position) {
                for (int i=0; i< l.getCount(); i++){
                case i:
                    Intent intent = new Intent();
                    intent.setClass(getActivity(), Activity.class);
                    startActivity(intent);
                    break;
                }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:39:17.307

如果您想在每个项目单击时调用相同的类，那么您不需要循环。只需传递意图 onItemClickListener() 即可。如果您想根据 ItemClick 传递不同的类，那么我认为每次您必须检查位置并根据Position传递Intent。

# javascript - 根据主机名定义参数

> ID：15965418
> 
> 赞同：4
> 
> 时间：2013-04-12T07:22:57.170
> 
> 标签：javascript, gruntjs

我`Gruntfile.js`我需要做这样的事情（伪代码）：

```
if (hostname == 'host1') : port=9000
else                     : port=9001 
```

我怎样才能得到`hostname`？（这将是我正在运行的主机`grunt`）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T07:24:11.757

```
var hostname = require("os").hostname(); 
```

# c# - Linq 查询返回 true 或 false

> ID：15965423
> 
> 赞同：17
> 
> 时间：2013-04-12T07:23:16.747
> 
> 标签：c#, linq, linq-to-sql

我有一个查询应该返回 TRUE 或 FALSE。

```
var query = from c in db.Emp
            from d in db.EmpDetails 
            where c.ID == d.ID && c.FirstName == "A" && c.LastName == "D" 
          // It should return TRUE when this above statement matches all these conditions 
```

我想将此查询结果附加到一个属性（字符串数据类型）

```
this.result = Conert.ToBoolean(query); 
```

如何在 LINQ 中实现这一点？

编辑：

EmpMapper 类

```
 public class EmpMapper
  {
    EmpEntities db;
    // ID column already exists in the DB
    private int ID;
    // I am creating this property to add it from the UI side, depending on the certain conditions in the query. That is why I created a separate class to map the existing ID from the DB
    bool result;
    public EmpMapper(int ID, bool result)
    {
      this.db = new EmpEntites();
      this.ID = ID;
      var query = from c in db.Emp
            from d in db.EmpDetails 
            where c.ID == d.ID && c.FirstName == "A" && c.LastName == "D" 
          // It should return TRUE when this above statement matches all these conditions
      this.result = Convert.ToBoolean(query);
    }
   public int ID
   {
    get{return this.ID;}
    set{this.ID = value;}
   }
   public bool result
   {
    get{return this.result;}
    set{this.result = value;}
   }
   } 
```

MainViewModel 类

```
 List<EmpMapper> empMapCol = new List<EmpMapper>();

     private void Page_Loaded(object sender, RoutedEventArgs e)
    {
      var emp_query = from c in db.Emp
                      orderby c.ID
                      select a;
     List<Emp> empCol = emp_query.ToList();
     foreach(Emp item in empCol)
     {
       this.empMapCol.Add(new EmpMapper(item.ID, item.result)); 
     }
     datagrid1.ItemsSource = empMapCol;
     }
     } 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-12T07:28:46.163

尝试这个，

```
 var query = (from c in db.Emp
        from d in db.EmpDetails 
        where c.ID == d.ID && c.FirstName == "A" && c.LastName == "D"
         select c 
         ).Any(); 

  this.result = query; //no need to convert to boolean its already bool value 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T07:30:07.023

如果我对您的理解正确，您想知道`true`查询的结果之一是否符合所有条件。在这种情况下，尝试这样的事情：

```
var found =
    (from c in db.Emp
    from d in db.EmpDetails
    where c.ID == y.ID && c.FirstName == "A" && c.LastName == "D"
    select c).Any();

this.result = found.ToString(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-12T07:29:08.740

您可以使用 .Any() 或 .Count()。**Any()**表现更好。（检查这个[SO question](https://stackoverflow.com/questions/305092/which-method-performs-better-any-vs-count-0)看看为什么）

**。任何（）**

```
var query = from c in db.Emp
            from d in db.EmpDetails 
            where c.ID == d.ID && c.FirstName == "A" && c.LastName == "D" 
          // It should return TRUE when this above statement matches all these conditions
this.result = query.Any().ToString() 
```

**。数数（）**

```
var query = from c in db.Emp
            from d in db.EmpDetails 
            where c.ID == d.ID && c.FirstName == "A" && c.LastName == "D" 
          // It should return TRUE when this above statement matches all these conditions
this.result = (query.Count() > 0).ToString() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T07:25:23.160

```
var query = from c in db.Emp
            from d in db.EmpDetails 
            select new { c.ID == y.ID &&  
                         c.FirstName == "A" && 
                         c.LastName == "D" }; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T08:08:54.507

如果你真的想要一个“真”或“假”的字符串响应：

```
 public string result
    {
        get
        {
            return db.Emp.SelectMany(c => db.EmpDetails, (c, d) => new {c, d})
                         .Where(@t => c.ID == y.ID && c.FirstName == "A" && c.LastName == "D")
                         .Select(@t => c)).Any().ToString();
        }
    } 
```

但我建议将属性“结果”设为布尔值并删除 ToString()。一旦你有一个布尔值，你总是可以在它上面做一个 ToString()

# c# - 如何删除多行文本框中的选定行？

> ID：15965426
> 
> 赞同：1
> 
> 时间：2013-04-12T07:23:21.810
> 
> 标签：c#, .net, textbox, multiline

我在下面的代码我使用“SelectedLines”来查找用户当前选择的行，AllLines 来查找多行文本框中的总行数。在最后一个 for 循环中，当 i=1 成功运行但当 i 为 +1 = 2 时，它给了我错误

> **错误**：“索引超出范围。必须为非负数且小于集合的大小。参数名称：索引？”

```
 // Retrieve selected lines
            List<string> SelectedLines = Regex.Split(txtNewURLs.SelectedText, @"\r\n").ToList();
            // Check for nothing, Regex.Split returns empty string when no text is inputted
            if (SelectedLines.Count == 1)
            {
                if (String.IsNullOrWhiteSpace(SelectedLines[0]))
                {
                    SelectedLines.Remove("");
                }
            }
            // Retrieve all lines from textbox
            List<string> AllLines = Regex.Split(txtNewURLs.Text, @"\r\n").ToList();
            // Check for nothing, Regex.Split returns empty string when no text is inputted
            if (AllLines.Count == 1)
            {
                if (String.IsNullOrWhiteSpace(AllLines[0]))
                {
                    AllLines.Remove("");
                }
            }

            string SelectedMessage = "The following lines have been selected";
            int numSelected = 0;
            // Find all selected lines
            foreach (string IndividualLine in AllLines)
            {
                if (SelectedLines.Any(a => a.Equals(IndividualLine)))
                {
                    SelectedMessage += "\nLine #" + AllLines.FindIndex(a => a.Equals(IndividualLine));
                   // changing the status of the selected lene from 0 to 1
                    AddURL objAddURL = new AddURL();
                    objAddURL.Where.SURL.Value = IndividualLine;
                    objAddURL.Where.ILicenseID.Value = CommonMethods.iLicenseID;
                    objAddURL.Query.Load();
                    if (objAddURL.RowCount > 0)
                    {
                        AddURL objaddurl1 = new AddURL();
                        objaddurl1.LoadByPrimaryKey(objAddURL.IAddURLID);
                        if (objaddurl1.RowCount > 0)
                        {
                            objaddurl1.IStatus = 1;
                            objaddurl1.Save();
                        }
                      //  AllLines.Remove(IndividualLine);
                    }
                    numSelected++;
                }
            }
            // int[] lineNo = new int[AllLines.Count];
            int linesNO = SelectedLines.Count;
            for (int i = 1; i <= linesNO; i++)
            {
                SelectedLines.RemoveAt(i);
            }

           // MessageBox.Show((numSelected > 0) ? SelectedMessage : "No lines selected."); 
```

任何人都可以帮我解决这个问题或建议我新的代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:49:44.240

c# 中的索引是从零开始的。

```
for (int i = 0; i < linesNO; i++)
    SelectedLines.RemoveAt(i); 
```

但是如果你想从你的文本框中删除选定的行，你的代码应该看起来像

```
 List<string> SelectedLines = new List<string> { "b", "c" };
 textBox1.Lines = textBox1.Lines.ToList().Except(SelectedLines).ToArray(); 
```

# objective-c - Objective-c EKEventEditViewController 关闭键盘

> ID：15965429
> 
> 赞同：1
> 
> 时间：2013-04-12T07:23:32.840
> 
> 标签：objective-c, ekevent

我正在展示一个将事件插入日历所需的 EKEventEditViewController。一切都很好，但是当我去选择一个日期时，如何以编程方式关闭键盘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T10:12:34.990

我知道这是一个旧帖子，但仍然没有回答。我一直处于这种情况。所以，想分享一下如何做到这一点。

```
- (void)calendarMonthView:(TKCalendarMonthView *)monthView didSelectDate:(NSDate *)d {
} 
```

在这个方法里面你可以放`[textView resignFirstResponder]`​​。这将在更改日期时关闭关键字。如果您想在开始时关闭它..只需`[textView resignFirstResponder]`在调用日历方法之前使用。

希望这对其他人有帮助。

这也是柯比的一个很好的答案，你也可以试试这个。

```
[self.view endEditing:YES]; 
```

礼貌：- [https://stackoverflow.com/a/3705527/1865424](https://stackoverflow.com/a/3705527/1865424)

# c# - 从 JSON 响应到列表框的数据绑定

> ID：15965437
> 
> 赞同：0
> 
> 时间：2013-04-12T07:23:51.873
> 
> 标签：c#, json, listbox

这是我第一次做 xaml，所以请理解我可能学习缓慢

下面是我的 CS 代码。我正在尝试将“属性”绑定到列表框。

```
public DirectionPage()
    {
        InitializeComponent();

        List<Feature> features = App.dResult.directions[0].features;
        foreach (Feature f in features)
        {
            Attributes a = f.attributes;
            MessageBox.Show(a.text);
        }
    }

    public ObservableCollection<Feature> test = new ObservableCollection<Feature>(); 
```

下面是 XAML 代码。

```
 <ListBox x:Name="directionListBox" ItemsSource="{Binding}" >
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Vertical">
                        <TextBlock Text="{Binding text}" Style="{StaticResource PhoneTextTitle2Style}" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:13:14.223

我没有看到属性的集合。可能您可以做的是收集列表中可能是您​​的属性`test`并将其放入投标中。

或者将 Features 集合作为列表框的 itemsource。IE

```
public DirectionPage()
    {
        InitializeComponent();
        List<Attributes> LAtributes=new List<Attributes>();
        List<Feature> features = App.dResult.directions[0].features;

        foreach (Feature f in features)
        {
            Attributes a=new Attributes();
            a = f.attributes;
            LAttributes.add(a);
            MessageBox.Show(a.text);
        }
       directionListBox.ItemsSource=Lattribute;
    } 
```

和

```
<ListBox x:Name="directionListBox" ItemsSource="{Binding}" >
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Vertical">
                        <TextBlock Text="{Binding Path=text}" Style="{StaticResource PhoneTextTitle2Style}" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

希望这会对您有所帮助！

# android - 在不同设备上的画布上绘制具有不同的平滑度

> ID：15965441
> 
> 赞同：2
> 
> 时间：2013-04-12T07:23:59.570
> 
> 标签：android

在我的应用程序中，我使用画布绘制字母。我的代码正在运行。

但我的问题是不同设备的平滑度。

我把屏幕放短了

1) 三星 Tab 2 7 英寸屏幕短片 ![在此处输入图像描述](https://i.stack.imgur.com/g6Q5R.png)

![在此处输入图像描述](https://i.stack.imgur.com/aKh3E.png)

2) 谷歌 nexus 7 英寸屏幕短片。

三星设备的问题是什么，为什么平滑度不起作用。

我也在下载这种类型的绘图应用程序，但在三星设备中无法正常工作。

请帮我 。

下面的代码用于油漆

```
class MyTView extends View {
        private Canvas  mCanvas;
        private Path    mPath;
        private Paint   mBitmapPaint;
        private Matrix matrix = new Matrix();
        private float mX, mY;
        private static final float TOUCH_TOLERANCE = 4;
        public MyTView(Context c) {
            super(c);

        mBitmap = Bitmap.createBitmap(display.getWidth(),
                display.getHeight(), Bitmap.Config.ARGB_8888);

        mCanvas = new Canvas(mBitmap);
        // set canvas background color white
        Paint paint = new Paint();
        // paint.setColor(Color.WHITE);
        paint.setStyle(Style.FILL);
        mCanvas.drawPaint(paint);
        mPath = new Path();
        mBitmapPaint = new Paint(Paint.DITHER_FLAG);

        }

        public MyTView(Context c, AttributeSet atrs ) {     
            super(c, atrs);     

            mBitmap = Bitmap.createBitmap(display.getWidth(), display.getHeight(), Bitmap.Config.ARGB_8888);
            //    mBitmap = Bitmap.createBitmap(display.getWidth(), display.getHeight(), Bitmap.Config.ARGB_8888);
            mCanvas = new Canvas(mBitmap);
            mPath = new Path();     
            mBitmapPaint = new Paint(Paint.DITHER_FLAG);

        } 

        public MyTView(Context c,Bitmap bmp ) {     
            super(c);    
             mBitmap = Bitmap.createBitmap(display.getWidth(), display.getHeight(), Bitmap.Config.ARGB_8888);
             mCanvas = new Canvas(mBitmap);
             mPath = new Path();     
             mBitmapPaint = new Paint(Paint.DITHER_FLAG);
             mCanvas.drawBitmap(bmp, 0, 0,null);
       } 
        protected void onDraw(Canvas canvas) {
            //canvas.drawBitmap(mBitmap, 0, 0, mTPaint); // ORIGINAL
            canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint); // ORIGINAL
            canvas.drawPath(mPath, mTPaint);
        }

        public void touch_start(float x, float y) {
            arrXY.clear();
            mPath.moveTo(x, y);
            mX = x;
            mY = y;
            arrXY.add(new XYBean(x, y)); 
        }

        public void touch_move(float x, float y) {
            arrXY.add(new XYBean(x, y));
            float dx = Math.abs(x - mX);
            float dy = Math.abs(y - mY);
            if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
                mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
                mX = x;
                mY = y;
            }
        }
        private void touch_up() {

            btn_replay.setBackgroundResource(R.drawable.button_blue);
            btn_replay.setTextColor(Color.parseColor("#FFFFFF"));

            System.out.println("--- touch up event ------");
            mPath.lineTo(mX, mY);
              // commit the path to our offscreen
             mCanvas.drawPath(mPath, mTPaint);
             mPath.reset();

             getScreenCap(drawLayout);

        }

           // mCanvas.drawPath(mPath, mPaint);
            ++count;
            isSet = false;
            //arrXY.clear();
            System.out.println("After clearing the arrXY: "+arrXY.size());
            isStart = true;

            postInvalidate();

        }

        @Override
        public boolean onTouchEvent(MotionEvent event) {
            float x = event.getX();
            float y = event.getY();

            switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    touch_start(x, y);
                    invalidate();
                    mCanvas.drawPath(mPath, mTPaint); // edited by shreyash
                    break;
                case MotionEvent.ACTION_MOVE:
                    touch_move(x, y);
                    invalidate();
                    mCanvas.drawPath(mPath, mTPaint); // edited by shreyash
                    break;
                case MotionEvent.ACTION_UP:

                    touch_up();
                    invalidate();
                   // arrXY.clear();
                    break;
            }
            return true;
        }
    } 
```

# c# - 大数据库中的 LINQ 和选择行

> ID：15965442
> 
> 赞同：2
> 
> 时间：2013-04-12T07:24:01.220
> 
> 标签：c#, linq, iqueryable

我有一些数据库，现在它包含一个大约 100 行的表。但是将来它不会有 100 行而是 1 000 000+ 行，我必须小心我现在正在开发的 Web 应用程序。

下一个问题是：在网页上，我需要创建分页列表来向用户显示记录。这是我计划使用的代码示例

```
public IQueryable<MyTable> GetRows(int from, int to)
{
   var queryRes = (from row in SomeDataContext.MyTable
                   order by row.id
                   select row).AsQueriable();
   return queryRes.Take(to).Skip(from);
} 
```

它只是代码示例。我没有运行它。但问题是在这种情况下会发生什么？我看到了两个场景

1.  它将从数据库和服务器端加载所有行，并返回从“从”到“到”范围内的记录。其他将被忽略。在这种情况下，我的应用程序会有很大的麻烦。想象一下每次从数据库中加载 1 000 000 行。这将是灾难。
2.  它将构造 SQL 请求，它将只返回我需要的行而不加载其他行。这正是我需要的。

我认为这将是 2 种情况，但我不确定也无法检查。我对么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T07:28:49.923

作为旁注，您不必调用`AsQueryable`. 做就够了

```
var queryRes = SomeDataContext.MyTable.OrderBy(r => r.Id);
return queryRes.Take(to).Skip(from); 
```

并回答您的问题 - 场景 2 将被执行。您始终可以使用 SQL Server Profiler 检查生成的 SQL，但如果您使用的是实体框架，您甚至可以执行`queryRes.ToString()`. `queryRes.ToList()`正如@Aron 正确指出的那样 - 只有在枚举结果（例如调用）时，才会对数据库实际执行查询。

这些问题更详细地解决了查找 SQL 代码的问题：

*   [如何从实体框架查看生成的 SQL？](https://stackoverflow.com/questions/4039082/how-to-view-generated-sql-from-entity-framework)
*   [实体框架执行的准确 sql 查询](https://stackoverflow.com/questions/4385756/exact-sql-query-executed-by-entity-framework/4385856)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T07:43:35.833

严格来说，1 和 2 都不正确。运行代码不会命中数据库。它构造了一个表达式树。调用代码仍然可以进一步修改表达式树，而无需访问数据库。

使用 IQueryable 接口不运行 SQL。正是在您调用`IEnumerable.GetEnumerator()`底层 Linq 提供程序时，将整个表达式转换为查询。本例是一个 SQL 查询，然后运行它。

例如，使用此代码。你可以有

```
void Main()
{
    var foo = from x in GetRows(10, 10)
            where x.Id > 1000
            select x;
    foreach(var f in foo)
    {
        //Stuff
    }
} 
```

实际运行的sql实际上会更接近

```
SELECT a,b,c FROM 
(SELECT a,b,c, ROW_NUMBER() OVER (ORDER BY ...) as row_number
FROM Table
WHERE id > 1000) t0
WHERE to.row_number BETWEEN 10 and 20; 
```

老实说，你做错了。您不需要 GetRows 方法。我会在构建表本身时直接调用 Linq 查询。您应该看看`IRepository`MVC 脚手架使用的模式。

最后，如果这意味着将其称为 AJAX 的 WebQuery，我将查看 .net 中的两个 OData 实现（WCF 数据服务和 WebAPI OData）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T07:30:10.920

你说的对。2.情景是会发生什么。当查询最终被执行时。

我建议扭转 Take - Skip，所以你从 Skip 开始

```
queryRes.Skip(from).Take(to) 
```

Debuggen 这个方法不会对数据库进行任何调用。它只返回查询 - 而不是结果。

如果您想准确测试会发生什么，请尝试下载[LinqPad](http://www.linqpad.net/) - 它非常适合揭开 linq 查询的神秘面纱。

# android - 如何在android中查找通过wifi直接模式传输的文件的文件名？

> ID：15965446
> 
> 赞同：8
> 
> 时间：2013-04-12T07:24:15.597
> 
> 标签：android, file-transfer, wifi-direct

嗨，我的最终目标是在两个设备之间使用 android 中的 wifi direct api 传输文件。一旦设备充当客户端，另一个设备充当服务器，就像 wifi direct sdk 演示中一样。为此，使用服务器端口和主机地址从客户端创建套接字。我想传输多个文件。在接收方接受客户端套接字连接时，我必须使用从客户端发送的文件的文件名创建文件。但我不知道服务器端的文件名。

那么如何使用套接字连接发送文件名，用于这种 wifi 直接传输模式以进行多个文件传输。

**使用服务器端口和主机地址从客户端创建套接字：**

```
fileUris = intent.getExtras().getParcelableArrayList(EXTRA_STREAM);
        String host = intent.getExtras().getString(
                EXTRAS_GROUP_OWNER_ADDRESS);
        Socket socket = new Socket();
        int port = intent.getExtras().getInt(EXTRAS_GROUP_OWNER_PORT);

        try {
            Log.d(WifiDirectActivity.TAG, "Opening client socket - ");
            socket.bind(null);
            socket.connect((new InetSocketAddress(host, port)),
                    SOCKET_TIMEOUT);

            Log.d(WifiDirectActivity.TAG,
                    "Client socket - " + socket.isConnected());
            OutputStream stream = socket.getOutputStream();
            ContentResolver cr = context.getContentResolver();
            InputStream is = null;
            for (int i = 0; i < fileUris.size(); i++) {
                Uri uri = fileUris.get(0);

                try {
                    is = cr.openInputStream(Uri.parse(uri.toString()));
                } catch (FileNotFoundException e) {
                    Log.d(WifiDirectActivity.TAG, e.toString());
                }
                DeviceDetailFragment.copyFile(is, stream);
                Log.d(WifiDirectActivity.TAG, "Client: Data written");
            } 
```

**从服务器端接受客户端套接字连接：**

```
 ServerSocket serverSocket = new ServerSocket(8988);
            Log.d(WifiDirectActivity.TAG, "Server: Socket opened");
            Socket client = serverSocket.accept();

            Log.d(WifiDirectActivity.TAG,
                    "Server: connection done with client");

            final File f = new File(
                    Environment.getExternalStorageDirectory() + "/"
                            + context.getPackageName() + "/wifip2pshared-"
                            + "sample");
            File dirs = new File(f.getParent());
            if (!dirs.exists())
                dirs.mkdirs();
            f.createNewFile();

            Log.d(WifiDirectActivity.TAG,
                    "server: copying files " + f.toString());
            InputStream inputstream = client.getInputStream();                          

            copyFile(inputstream, new FileOutputStream(f));
            serverSocket.close(); 
```

在文件创建时在接收方提供文件名真的很受打击。有什么方法可以发送文件名。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:58:48.090

您可以创建一个嵌入文件名和实际数据的捆绑对象。像这样的东西：

```
 public class WiFiDirectBundle extends Serializable {
        private String fileName;
        private String mimeType;
        private Long fileSize;
        private byte[] fileContent;

        public WiFiDirectBundle() {}

        // adds a file to the bundle, given its URI
        public void setFile(Uri uri) {
            File f = new File(Uri.parse(uri.toString()));

            fileName = f.getName();
            mimeType = MimeTypeMap.getFileExtensionFromUrl(f.getAbsolutePath());
            fileSize = f.length();

            FileInputStream fin = new FileInputStream(f);        
            fileContent = new byte[(int) f.length()];
            fin.read(fileContent);
        }

        // restores the file of the bundle, given its directory (change to whatever
        // fits you better)
        public String restoreFile(String baseDir) {
            File f = new File(baseDir + "/" + fileName);
            try {
                FileOutputStream fos = new FileOutputStream(f);
                if (fileContent != null) {
                    fos.write(fileContent);
                }

                fos.close();
                return f.getAbsolutePath();

            } catch (IOException e) {
                    e.printStackTrace();
            }

            return null;
        }

        public String getFileName() {
            return fileName;
        }

        public String getMimeType() {
            return mimeType;
        }

        public Long getFileSize() {
            return fileSize;
        }
    } 
```

`WiFiDirectBundle`然后，您可以通过简单地使用输入和输出流来来回传递一个实例。当您收到一个对象时，您必须将它显式地强制转换为`WiFiDirectBundle`该类。

我知道这并不优雅，但它确实有效。

# android - android AlertDialog 显示一次

> ID：15965447
> 
> 赞同：0
> 
> 时间：2013-04-12T07:24:21.200
> 
> 标签：android, android-alertdialog

我只想在安装时显示一次对话框。我在 currentIntervalChoice 中接受用户的价值。但在其他部分无法访问。我怎样才能做到这一点。我已经在全球范围内声明了 currentIntervalChoice。像这样。

```
 int currentIntervalChoice; 
```

这是我的代码：

```
 private void doFirstRun()
{
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
    if (settings.getBoolean("isFirstRun", true))
    {
        //-------------------------------------------------------------------------
        Toast.makeText(getApplicationContext(),"in 1st run true", Toast.LENGTH_LONG).show();
        LayoutInflater li = LayoutInflater.from(this);
        View promptsView = li.inflate(R.layout.prompts, null);
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);
        // set prompts.xml to alertdialog builder
        alertDialogBuilder.setView(promptsView);
        final EditText userInput = (EditText) promptsView
                .findViewById(R.id.editTextDialogUserInput);

        // set dialog message
        alertDialogBuilder.setCancelable(false).setPositiveButton("OK",
                new DialogInterface.OnClickListener()
                {
            public void onClick(DialogInterface dialog,int which)
            {
                 String value = userInput.getText().toString();
                 currentIntervalChoice=Integer.parseInt(value);
                toggleLogging(AppSettings.getServiceRunning(MainActivity.this),
                        AppSettings.setLoggingInterval(MainActivity.this,currentIntervalChoice));
                dialog.dismiss();
                // return;  
            }
              });
        // create alert dialog
        AlertDialog alertDialog = alertDialogBuilder.create();
        // show it
        alertDialog.show();
        SharedPreferences.Editor editor = settings.edit();
        editor.putBoolean("isFirstRun", false);
        editor.commit();
    }
    else
    {

        Toast.makeText(getApplicationContext(),"in 1st run false", Toast.LENGTH_LONG).show();       
        toggleLogging(AppSettings.getServiceRunning(MainActivity.this),
                AppSettings.setLoggingInterval(MainActivity.this,currentIntervalChoice));
    }
} 
```

我在我的 Activity 的 onCreate() 中调用 doFirstRun()。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:43:23.910

我用这个

```
boolean disclaimer = getSharedPreferences(PREF_NAME, 0).getBoolean(DISCLAIMER, false);
                if(!disclaimer)
                    {
                    startActivity(new Intent(SplashScreenActivity.this,DisclaimerActivity.class));
                    }else{                  
                        startActivity(new Intent(SplashScreenActivity.this,MainActivity.class));
                    } 
```

并在免责声明活动中更新了 pref 值

```
public void onAccept(View v) {
    Editor edit = getSharedPreferences(PREF_NAME, 0).edit();
    edit.putBoolean(DISCLAIMER, true);
    edit.commit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:33:37.713

使用 SQLite。也许下次需要显示对话框。

# objective-c - 为什么没有 NSOperationWithBlock

> ID：15965451
> 
> 赞同：1
> 
> 时间：2013-04-12T07:24:41.030
> 
> 标签：objective-c, xcode4.5

我们可以有`[NSOperationQueue new] addOperationWithBlock`但我们没有`NSOperation withBlock`？

我认为 addOperationWithBlock 的方式是首先使用该块创建 NSOperation 然后将其添加到队列中。所以我们有一个功能可以做所有事情，但不能一次做一件事？

奇怪的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T07:27:23.167

你在找[`+[NSBlockOperation blockOperationWithBlock:]`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSBlockOperation_class/Reference/Reference.html#//apple_ref/doc/uid/TP40008157-CH1-SW4)吗？

# c - 将结构数组发送到 cuda 内核

> ID：15965453
> 
> 赞同：2
> 
> 时间：2013-04-12T07:24:50.480
> 
> 标签：c, arrays, struct, cuda

我正在做一个项目，我必须向 cuda 内核发送一个结构数组。该结构还包含一个数组。为了测试它，我编写了一个简单的程序。

```
struct Point {
    short     x;
    short     *y;
}; 
```

我的内核代码：

```
__global__ void addKernel(Point *a, Point *b, Point *c)
{
    int i = threadIdx.x;

    c[i].x = a[i].x + b[i].x;
    for (int j = 0; j<4; j++){
        c[i].y[j] = a[i].y[j] + a[i].y[j];
    }
} 
```

我的主要代码：

```
int main()
{
    const int arraySize = 4;
    const int arraySize2 = 4;

    short *ya, *yb, *yc;
    short *dev_ya, *dev_yb, *dev_yc;

    Point *a;
    Point *b;
    Point *c;
    Point *dev_a;
    Point *dev_b;
    Point *dev_c;

    size_t sizeInside = sizeof(short) * arraySize2;

    ya = (short *)malloc(sizeof(short) * arraySize2);
    yb = (short *)malloc(sizeof(short) * arraySize2);
    yc = (short *)malloc(sizeof(short) * arraySize2);

    ya[0] = 1; ya[1] =2; ya[2]=3; ya[3]=4;
    yb[0] = 2; yb[1] =3; yb[2]=4; yb[3]=5;

    size_t sizeGeneral = (sizeInside+sizeof(short)) * arraySize;

    a = (Point *)malloc( sizeGeneral );  
    b = (Point *)malloc( sizeGeneral );
    c = (Point *)malloc( sizeGeneral );

    a[0].x = 2;  a[0].y = ya;
    a[1].x = 2;  a[1].y = ya;
    a[2].x = 2;  a[2].y = ya;
    a[3].x = 2;  a[3].y = ya;

    b[0].x = 4;  b[0].y = yb;
    b[1].x = 4;  b[1].y = yb;
    b[2].x = 4;  b[2].y = yb;
    b[3].x = 4;  b[3].y = yb;

    cudaMalloc((void**)&dev_a, sizeGeneral);
    cudaMalloc((void**)&dev_b, sizeGeneral);
    cudaMalloc((void**)&dev_c, sizeGeneral);

    cudaMemcpy(dev_a, a, sizeGeneral, cudaMemcpyHostToDevice);
    cudaMemcpy(dev_b, b, sizeGeneral, cudaMemcpyHostToDevice);

    addKernel<<<1, 4>>>(dev_a, dev_b, dev_c);

    cudaError_t err = cudaMemcpy(c, dev_c, sizeGeneral, cudaMemcpyDeviceToHost);   

    printf("{%d-->%d,%d,%d,%d} \n err= %d",c[0].x,c[0].y[0],c[1].y[1],c[1].y[2],c[2].y[3], err);        

    cudaFree(dev_a);
    cudaFree(dev_b);
    cudaFree(dev_c);

    return 0;
} 
```

似乎 cuda 内核无法正常工作。实际上我可以访问 structs 'x' 变量，但我不能访问 'y' 数组。我该怎么做才能访问“y”数组？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:41:22.297

**当您将此结构发送到内核时，您会在主机内存而不是设备中**发送 short 和指针。这是至关重要的。对于简单类型 - 这很有效，因为内核在内存中指定了其本地副本以接受参数。因此，当您调用此内核时，您已将`x`和移动`y`到设备，而不是`y`. 您必须通过为其分配空间并更新指向**设备**内存的指针`y`来手动执行此操作。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:51:32.733

您没有将数组传递给设备。您可以通过像这样定义数组来使数组成为结构的一部分：

```
struct {
  short normalVal;
  short inStructArr[4];
} 
```

或者将数组传递到设备内存并更新结构中的指针。**

# matlab - 我在图像中设置了一个点，如何通过 Matlab 找到环绕所有点的外部不规则形状

> ID：15965458
> 
> 赞同：1
> 
> 时间：2013-04-12T07:25:16.037
> 
> 标签：matlab, shape, point, sift

我在执行SIFT算法后得到了一个点集。现在我想找到这些点的外部不规则形状。有没有人知道Matlab中的相关函数？请注意，我不想要凸厅。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T17:05:32.290

如果你想要凸包，（根据你的评论不清楚......你可以编辑问题顺便说一句），查找[convhull](http://www.mathworks.com/help/matlab/ref/convhull.html)。

如果您不想要凸包，[Delaunay 三角剖分](http://www.mathworks.com/help/matlab/ref/delaunay.html)可能会让您开始，因为结果既捕获了点的凸包，也捕获了内部结构，这样您就可以从返回的外部移除一些边缘三角测量。

# redirect - 将PC网站重定向到移动版本的最佳方法是什么

> ID：15965465
> 
> 赞同：1
> 
> 时间：2013-04-12T07:25:37.133
> 
> 标签：redirect, mobile, web

我已经创建了我的网站的移动版本，如果用户使用移动设备，我想从 PC 重定向到移动版本。我发现了一些东西，但让我知道什么是最好的方法。它应该查看任何手机或平板电脑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T11:12:06.840

我已经成功地使用了[检测移动浏览器](http://detectmobilebrowsers.com/)。它有许多可下载的脚本选项，例如用于 apache 服务器的 .htaccess、php 脚本、jQuery、perl 和许多其他脚本。

这是一个很好的起点。

祝你好运！

# vb6 - 需要在 VB6 包中包含 .ocx 和 .tlb 文件

> ID：15965473
> 
> 赞同：-5
> 
> 时间：2013-04-12T07:25:59.953
> 
> 标签：vb6, ocx, typelib

假设，我在我的 VB6 程序中使用了许多 Windows 不提供的文件`.ocx`。`.tlb`现在，如果我想在不存在这些文件的 PC 上运行我的程序，我是否必须安装并注册这两种类型的文件才能运行我的程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:51:53.723

您必须分发 OCX 文件。但是，您可能不需要分发 TLB 文件，除非您使用远程 COM 或通过 Variant 参数从该 TLB 文件传递​​用户定义类型。

# c# - WindsorContainer TypedFactory 如何将参数传递给间接对象

> ID：15965476
> 
> 赞同：1
> 
> 时间：2013-04-12T07:26:15.070
> 
> 标签：c#, castle-windsor, castle, windsor-3.0, windsor-facilities

我知道 TypedFactory 工具只会将给定的参数传递给它正在解析的对象。但是有没有办法将相同的参数传递给所有正在解析的间接对象？

我一直在尝试使用定义为的自定义范围来做到这一点

```
public class ArgumentPassThrough : IScopeAccessor
    {
        private static IDictionary _args;
        public void Dispose()
        {
            _args = null;
        }

        public ILifetimeScope GetScope(CreationContext context)
        {
            var h = context.Handler;
            if (_args == null)
            {
                _args = context.AdditionalArguments;
            }
            else
            {
                var enumerator = _args.GetEnumerator();
                enumerator.Reset();
                while (enumerator.MoveNext())
                {
                    if (!context.AdditionalArguments.Contains(enumerator.Key))
                    {
                        context.AdditionalArguments.Add(enumerator.Key, enumerator.Value);
                    }
                }
            }

            return new DefaultLifetimeScope();
        }
    } 
```

我有以下类结构：

```
 public class Child2
        {
            public Child2(Child1 child1)
            {
                Child1 = child1;
            }

            public Child1 Child1 { get; private set; }
        }

        public class Child1
        {
            public Child1()
            {
            }
        }

public class Parent
{
            public Parent(Child1 child1, Child2 child2)
            {
                Child1 = child1;
                Child2 = child2;
            }

            public Child1 Child1 { get; private set; }
            public Child2 Child2 { get; private set; }
    }

    public interface IParentFactory
    {
        Parent Create(Child1 child1);
    } 
```

我在 windsorcontainer 中注册它们：

```
 public void ScopedFactory()
    {
        _container.Register(

            Component.For<IParentFactory>().AsFactory(),
            Component.For<Parent>().LifestyleScoped<ArgumentPassThrough>(),
            Component.For<Child2>().LifestyleScoped<ArgumentPassThrough>(),

            Classes.FromThisAssembly().Pick()
                   .WithService.Self()
                   .LifestyleTransient()
            );
    } 
```

我正在使用它：

```
 [Test]
    public void ScopedFactoryDependency()
    {
        _demoModule.ScopedFactory();
        var fac = _container.Resolve<IParentFactory>();

        var p1 = AssertPassThrough(fac);
        var p2 = AssertPassThrough(fac);
        Assert.AreNotSame(p1,p2);
    }

    private Parent AssertPassThrough(IParentFactory fac)
    {
        Parent parent;
        var c1 = _container.Resolve<Child1>();
        using (_container.BeginScope())
        {
            parent = fac.Create(c1);
            Assert.AreSame(parent.Child1, c1);
            Assert.AreSame(parent.Child2.Child1, c1);
        }
        return parent;
    } 
```

第一遍有效，但我希望 ScopeAccesor 在 _contaier.BeginScope() 存在 using 块时被释放。这不会发生，第二遍将获得与第一遍相同的参数。

# iphone - HTML 视频仅通过耳机播放声音-iOS？

> ID：15965478
> 
> 赞同：2
> 
> 时间：2013-04-12T07:26:17.667
> 
> 标签：iphone, ios, cordova, sencha-touch

我开发了一个 sencha-phonegap 应用程序，其中包括播放应用程序中已经存在的视频。

当我通过本机播放器播放任何其他视频（例如视频歌曲）时，可以从底部的立体声扬声器完美地听到音频。

我只是使用 xtype: video 标签来播放视频。这是我播放视频的代码：

```
 {
   xtype    : 'video',
   x        : 0,
   y        : 0,
   left     :'0px',
   top      :'0px',
   width    : 175px,
   height   : 98px,
   url      : "path of video"
   posterUrl: 'placeholder.png'
  } 
```

我面临的问题是，每当播放视频时，它只会在连接耳机时播放声音，有时也可以从顶部扬声器（通话期间使用的扬声器）听到音频。

我检查了铃声和音量控制。一切都在最大。我的应用支持 iOS 5.0 及更高版本。这可能是iOS相关的问题吗？

请提供一些方向。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T08:17:00.303

如果尚未添加，请先添加**音频工具箱**和**AVFoundation框架，然后在应用启动时添加以下行的导入类**

```
 #import<AVFoundation/AVFoundation.h> 
```

而不是在应用启动时在项目中添加这两行

UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker; AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute,sizeof (audioRouteOverride),&audioRouteOverride);

也许它现在会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:29:12.237

在[sencha 论坛](http://www.sencha.com/forum/showthread.php?254439-Ext.Audio-in-iOS-with-ringer-off)之一上，我找到了[这个对我有帮助的链接](https://stackoverflow.com/questions/11616001/uiwebview-html5-audio-pauses-in-ios-6-when-app-enters-background)。

因为，它只特别提到了响铃关闭场景，它还以一般方式提到我们需要添加播放方法才能使声音正常工作。

干杯|米|

# google-apps-script - Google Gadget API 远程内容问题

> ID：15965488
> 
> 赞同：0
> 
> 时间：2013-04-12T07:26:42.107
> 
> 标签：google-apps-script, google-api, google-gadget

在我的 Google 小工具 JavaScript 中，我有一个可以从 Google Apps 脚本调用的 URL。

```
function getFileId(postData) {
  var params = {};  
  var url = "https://script.google.com/a/macros/mycompany.com/s/AAABBBCCCDDEEE-FFF-GGG/exec";
  params[gadgets.io.RequestParameters.POST_DATA] = postData;
  params[gadgets.io.RequestParameters.CONTENT_TYPE] = gadgets.io.ContentType.TEXT;
  params[gadgets.io.RequestParameters.METHOD] = gadgets.io.MethodType.GET;
  gadgets.io.makeRequest(url , responseFileId, params);
}; 
```

因此，当函数 responseFileId() 返回 obj.text 时，它实际上进入了 mycompany.com 登录屏幕。这意味着它需要我所做的那个小工具的身份验证。[Google Gadget 不是在“ https://script.google.com/a/macros/mycompany.com/s/AAABBBCCCDDEEE-FFF-GGG/exec](https://script.google.com/a/macros/mycompany.com/s/AAABBBCCCDDEEE-FFF-GGG/exec) ”上保存了我当前域的用于运行 Google Apps 脚本的 Google 凭据吗？

我尝试使用 Google Chrome 浏览器手动运行（[https://script.google.com/a/macros/mycompany.com/s/AAABBBCCCDDEEE-FFF-GGG/exec](https://script.google.com/a/macros/mycompany.com/s/AAABBBCCCDDEEE-FFF-GGG/exec)），它返回值而不显示登录屏幕。 ..

有人可以告诉这缺少哪一步吗？这与 Google OAuth 有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T05:24:10.373

而不是这样做。我找到了一个更好的主意 => 为远程网站使用标签。

# android - 从功能区图标制作 9 个补丁图像无法正确拉伸

> ID：15965490
> 
> 赞同：1
> 
> 时间：2013-04-12T07:27:04.540
> 
> 标签：android, image, nine-patch

我得到了这张图片，我需要制作 9 个补丁（我将它用于 textview 背景）。 ![在此处输入图像描述](https://i.stack.imgur.com/2DM6h.png)

我需要文本出现在星号左侧的文本，如下所示： ![在此处输入图像描述](https://i.stack.imgur.com/YQpKm.png)

我试过这个但没有成功：

![在此处输入图像描述](https://i.stack.imgur.com/yJdTG.png)

这甚至可能吗，还是我必须使用 9 补丁以外的其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:58:08.437

您的用例正是 9-patch 的发明目的，所以它应该可以工作！

以下是使用九个补丁时可能出现的一些常见错误：

*   您是否使用[draw9patch](http://developer.android.com/tools/help/draw9patch.html "绘制9补丁") -tool 制作图像？在 Photoshop 或其他照片编辑应用程序中制作，外部像素可能不是完全白色或黑色。
*   你的文件名正确吗？（以 .9.png 结尾）
*   如果您将九个补丁图像放在**密度大于**您正在测试的设备密度的资源文件夹中，则图像可能会按比例缩小并且您的一个黑色像素（左侧或顶部）被删除。

您可以通过以下任一方式解决此问题

1.  为所有密度（ldpi、**mdpi**、hdpi、**xhdpi**）提供九个补丁（粗体是最常见的）***<--首选！***

2.  为 xhpdi 制作九个补丁并绘制至少 2 个黑色像素。因为当从 xhdpi 缩小到 mdpi 时，你的图像被缩小了 2 倍，所以如果你只在 xhdpi 中绘制 1 个黑色像素，它可能会在缩小时被移除。

希望这对你有用。

# c++ - 支持 http 1.1 响应缓存的 C++ 库

> ID：15965493
> 
> 赞同：2
> 
> 时间：2013-04-12T07:27:09.837
> 
> 标签：c++, networking, http-caching

我正在做一个项目，我需要使用 C++ 中的网络库与服务器进行通信。目前我正在使用 POCO/Net

是否有任何支持**响应缓存**、身份验证、HTTP 和 HTTPS 的 C++ 库，类似于[Java 版本](http://www.google.se/url?sa=t&rct=j&q=github%20droidnetworking&source=web&cd=1&cad=rja&ved=0CCsQFjAA&url=https%3A%2F%2Fgithub.com%2Fsogeti%2FDroidNetworking&ei=NLZnUeDSIsaC4ASskYHYBg&usg=AFQjCNFSGmJF0WpWHUnO3Ge8e6Jrq5om9Q&bvm=bv.45175338,d.bGE)？

非常感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:37:25.987

wwwlib 似乎提供了您所追求的那种持久缓存，并且根据[W3lib](http://www.w3.org/Library/User/Using/Cache.html)符合 http 1.1 。不过我还没有尝试过，与 POCO 相比，它似乎非常低级。其他人可能有一个更简单的库......

# firefox - 无法运行 Xulrunner 的多个实例

> ID：15965497
> 
> 赞同：0
> 
> 时间：2013-04-12T07:27:25.780
> 
> 标签：firefox, xul, xulrunner

我在 xulrunner 中有一个简单的 hello world 应用程序。我需要能够运行应用程序的多个实例。但是，当我从命令行运行应用程序时，如果一个已经在运行，我得到![错误信息](https://i.stack.imgur.com/hAtgJ.png)

我尝试了几种方法，例如

1.  设置 MOZ_NO_REMOTE=1

`xulrunner application.ini --port=45333`

2.  设置-no-remote

`xulrunner -no-remote application.ini`（不起作用，因为 xulrunner 不采用 -no-remote 参数）

我正在使用 xulrunner 运行时 20.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T04:44:57.883

我终于让它工作了。这个想法是使用两个不同的配置文件运行两个实例，并带有`-profile /tempdir/`选项。

# java - Enter Key Listener for Date 在 linux 风格中不起作用

> ID：15965500
> 
> 赞同：0
> 
> 时间：2013-04-12T07:27:36.583
> 
> 标签：java, swt, keylistener

这是我的完整编码。我有两个类第一个 MyDateTime，第二个是员工。我已经包含了我当前工作的编码。对于 EmployeePart 类，AbstractEditorPart 是我们自己的父类，它是扩展的

```
public class MyDateTime extends DateTime{

    public DateTime(Composite parent, int style) 
    { 
        super(parent, style); 
    }

    public Date getValue() 
    { 
        Date date = new Date(getYear(), getMonth(), getDay()); 
        return date; 
    }
}

public Class EmployeePart extends AbstractEditorPart(
private MyDateTime currentDate;

public void createBody(Composite parent){
currentDate=Util.createDateChooserCombo(parent, toolkit, "Date:", 2);

}

public void save(Employee input){
return null;
}
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:28:25.287

结果比我最初想象的要复杂一些。

一种解决方案是为`TabList`包含`Composite`您`Widget`的 s 的 定义一个。这样，您可以首先定义您希望它们被遍历的顺序。

然后将 a 添加到您要遍历的`Listener`每个s 中。`Widget`这`Listener`将确定 中的下一个项目，并在按下或`TabList`时强制将焦点放在该项目上。`Tab``Enter`

这是一些示例代码：

```
public static void main(String[] args)
{
    Display display = Display.getDefault();
    Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

    final Composite content = new Composite(shell, SWT.NONE);
    content.setLayout(new FillLayout());

    Text first = new Text(content, SWT.BORDER);
    Text second = new Text(content, SWT.BORDER);

    content.setTabList(new Control[] {first, second});

    Listener enterListener = new Listener()
    {
        @Override
        public void handleEvent(Event event)
        {
            /* Is it a traverse via Tab or Enter? */
            if(event.keyCode == SWT.CR || event.keyCode == SWT.TRAVERSE_RETURN || event.keyCode == SWT.TRAVERSE_TAB_NEXT)
            {
                /* Get source of event */
                Widget source = event.widget;

                /* Get traverse order of content composite */
                Control[] tabList = content.getTabList();

                /* Try to find current position in the tab list */
                for(int i = 0; i < tabList.length; i++)
                {
                    if(source.equals(tabList[i]))
                    {
                        /* Get the next item in the tab list */
                        Control nextControl = tabList[(i + 1) % tabList.length];

                        /* And force the focus on this item */
                        nextControl.setFocus();
                        nextControl.forceFocus();

                        return;
                    }
                }
            }
        }
    };

    first.addListener(SWT.KeyUp, enterListener);
    second.addListener(SWT.KeyUp, enterListener);

    shell.pack();
    shell.open();

    while (!shell.isDisposed())
    {
        if (!display.readAndDispatch())
            display.sleep();
    }
    display.dispose();
} 
```

# php - 使用 htaccess php 重写 URL

> ID：15965503
> 
> 赞同：0
> 
> 时间：2013-04-12T07:27:56.210
> 
> 标签：php, .htaccess, url-rewriting

我想在我的项目中重写 url。

例如：

`http://www.example.com/dashboard/test/`至`http://dashboard.example.com/index.php`

我也想这样做：

`http://www.example.com/dashboard/test2/`至`http://dashboard.example.com/index.php`

谁能告诉我重写网址的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:32:31.067

首先，您在根目录中创建一个 .htaccess 文件。比，只需将重定向命令放入其中。此处解释了如何编写 .htaccess 以及如何创建重写规则：http: [//net.tutsplus.com/tutorials/other/the-ultimate-guide-to-htaccess-files/](http://net.tutsplus.com/tutorials/other/the-ultimate-guide-to-htaccess-files/)

您将需要类似的东西：

```
RewriteRule ^(.*)$ http://dashboard.example.com/$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:32:51.677

尝试这个

```
 Options +FollowSymLinks
RewriteEngine On
RewriteRule ^test.*$  http://dashboard.example.com/index.php [R=301,L] 
```

# tcl - 如何为 tcl 脚本创建日志文件

> ID：15965504
> 
> 赞同：2
> 
> 时间：2013-04-12T07:27:56.440
> 
> 标签：tcl

我正在运行 Tcl 脚本来连接 Telnet 端口。对于这个脚本，我想将所有 CMD 输出存储在一个日志文件中。如何在 Tcl 脚本中执行此操作？脚本如下：

```
#!/usr/bin/expect -f
#!usr/bin/expect
package require Expect
spawn telnet $serverName $portNum
expect "TradeAggregator>"
send "Clients\r"
expect "Client:"
send "1\r"
expect "1-Client>"
send "Pollers\r"
expect "Client Pollers"
send "2\r"
send "n\r"
expect ">"
set passwordOption $expect_out(buffer)
set searchString "Not confirmed" 
if {[string match *$searchString* $passwordOption]} { 
puts "match found" }\ 
else { 
puts "match not found" 
xmlPasswordChange $polName 
} 
```

所有 puts 输出和 xmlPasswordChange 过程输出都没有打印在日志文件中。你能指出我做错了什么吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T08:03:17.143

`log_file`您想在要开始保存输出的位置插入命令。例如，如果要保存所有输出，则将其粘贴到开头：

```
#!/usr/bin/expect -f

log_file myfile.log ;# <<< === append output to a file

package require Expect
spawn telnet $serverName $portNum
expect "TradeAggregator>"
send "Clients\r"
expect "Client:"
send "1\r"
expect "1-Client>"
send "Pollers\r"
expect "Client Pollers"
send "2\r" 
```

默认情况下，`log_file`如果文件存在则追加，或者创建一个新文件。如果你想每次都开始一个新的日志，那么：

```
log_file -noappend myfile.log 
```

### 更新

根据您关于为什么`puts`输出进入控制台而不是日志文件的问题。我理解的方式是`puts`去控制台。如果要记录到日志文件（`log_file`使用命令打开的打开），请改用`send_log`命令：

```
log_file -noappend myfile.log
send_log "This line goes into the log file"
send_user "This line goes into both the log file and console\n"
puts "This line goes to the console" 
```

上面的例子引入了另一个命令：`send_user`，它的作用`puts`与`send_log`组合相同。注意`send_user`不包含新行，所以调用者应该包含它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-29T07:59:41.070

此外，我们可以通过 stanted [open $file_name w] 命令创建自己的日志文件，并继续将所有内容写入该文件。

# jquery - 跨域Jquery AJax jsonp

> ID：15965506
> 
> 赞同：0
> 
> 时间：2013-04-12T07:27:58.237
> 
> 标签：jquery, cross-domain

我正在构建应用程序和服务器（不幸的是在不同的域上）

在我的应用程序上：

```
$.ajax({
  url: BASE_URL + "api/create",
  type: "get",
  async: false, // why do I need this
  dataType: "jsonp",
  data: {
    "auth_token": "cBQHASwKszsW4e75unK6"
  }, 
  error: function(error) {
    alert(JSON.stringify(error));
  },
  success: function(data) {
    alert(data);
  }
}); 
```

我知道服务器正在返回（当我在浏览器中访问它时）：

```
jQuery1910041686943266540766_1365730282085({"error":"User does not exist","status":400}) 
```

（这是正确的数据）

但是，ajax 请求失败并列为状态“失败”并键入“待定”

我不确定这里发生了什么

* * *

我也试过：

```
 $.getJSON(BASE_URL + "api/create?auth_token=cBQHASwKszsW4e75unK6&callback=?", function(data) {
   alert(JSON.stringify(data));
 }); 
```

这也失败了

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-12T07:37:06.910

为此，您需要创建一个代理页面。例如：proxy.php

调用请求直接通过ajax调用proxy.php

让我们知道它对你有用。

步骤： 1\. 创建一个新页面 proxy.php 2\. 使用 CURL 或 File_get_contents 从外部 URL 获取数据。3.通过ajax调用proxy.php代替跨域URL。

# c - MPI 减少到特定的接收缓冲区地址

> ID：15965508
> 
> 赞同：0
> 
> 时间：2013-04-12T07:28:02.983
> 
> 标签：c, parallel-processing, mpi

我正在尝试将两个数组（每个长度为 n）组合到根进程（rank=0）上的接收缓冲区中，以形成一个长度为 2*n 的数组，即包含所有值的单个数组。

为简洁起见，我的代码类似于以下内容：

```
#define ROOT 0

int myFunction(int* rBuf, int n) {
  int* sBuf = malloc(n*sizeof(int));

  // Do work, calculate offset, count etc.

  MPI_Reduce(sBuf, rBuf+offset[rank], counts[rank], 
             MPI_INT, MPI_SUM, ROOT, MPI_COMM_WORLD);
}
// where offset[rank] is amount to offset where it is to be received
// offset[0] = 0, offset[1] = n
// counts contains the length of arrays on each process 
```

但是，当我检查 rBuf 时，它会减少为没有偏移量的 rBuf，例如：

```
// Rank 0: sBuf = {3, 2}
// Rank 1: sBuf = {5, 1}
// Should be rBuf = {3, 2, 5, 1}    
rBuf = {8, 3, 0, 0} 
```

附加信息：

*   rBuf 被初始化为在减少之前使用 0 值的正确大小
*   所有进程都有偏移数组
*   当时使用 MPI_Reduce 的原因是，如果 rBuf 设置为 0s，那么使用 MPI_SUM 减少将给出所需的答案

我查看了文档、一些在线教程/指南，当然还有 SO，但我仍然无法弄清楚我做错了什么。

对于答案，我特别在寻找：

1.  这在技术上是否可以使用 MPI_Reduce？
2.  我的 MPI_Reduce 调用是否正确？（指针算术错误？）
3.  使用 MPI 是可行/正确的做法还是更好的方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:58:06.507

聚集（和分散）在[这个答案](https://stackoverflow.com/questions/9269399/sending-blocks-of-2d-array-in-c-using-mpi/9271753#9271753)中有一些详细的描述。

[Reduce](http://www.open-mpi.org/doc/v1.4/man3/MPI_Reduce.3.php)和[Gather](http://www.open-mpi.org/doc/v1.4/man3/MPI_Gather.3.php)是相关但不同的操作。当你调用`MPI_Reduce`这些向量时

```
// Rank 0: sBuf = {3, 2}
// Rank 1: sBuf = {5, 1} 
```

Reduce 做了正确的事；它采用各种`sBuf`s 并添加它们（因为您告诉它对数据执行操作`MPI_SUM`），给出`{8,3} == {3,2} + {5,1}`，并将结果放入根处理器接收缓冲区。（如果您希望每个人事后都有答案，[`MPI_Allreduce()`](http://www.open-mpi.org/doc/v1.4/man3/MPI_Allreduce.3.php)请改用。）但请注意，您对 Reduce 的调用，

```
 MPI_Reduce(sBuf, rBuf+offset[rank], counts[rank], 
             MPI_INT, MPI_SUM, ROOT, MPI_COMM_WORLD); 
```

实际上是无效的；对于 Reduce，每个人都需要以相同的计数进行调用。唯一`rBuf`重要的是根进程上的那个，在这种情况下是等级 0。

另一方面，Gather 也收集所有数据，但不是用 sum、product、xor 等操作折叠它，而是连接结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:50:58.600

所以我尝试了 MPI_Gatherv，这似乎解决了问题，验证了更大数量和大小的数组。

这是我所做的：

```
MPI_Gatherv(sBuf, counts[rank], MPI_INT, c, counts, offset, MPI_INT, 
            ROOT, MPI_COMM_WORLD); 
```

我也尝试过 MPI_Gather 但这没有用（它似乎但实际上以与我的 reduce 调用类似的方式传递偏移量没有实际效果）。

由此，我对我的具体问题的理解如下：

1.  这是不可能的/不是 MPI_Reduce 的预期用例
2.  因此，reduce 调用是不正确的，包括调用中的偏移量无效
3.  正确的方法是使用 MPI_Gatherv，因为这是这个库专门调用的地址（接收缓冲区中的位移）

如果更有经验的 MPI 用户愿意参与进来，那就太好了。

谢谢

# module - Lua：制作模块系统

> ID：15965513
> 
> 赞同：2
> 
> 时间：2013-04-12T07:28:22.893
> 
> 标签：module, include, lua

我想创建一个程序，它在不同的文件夹中有几个模块。主程序将确定需要加载哪个模块并将其加载。除此之外，它还会加载一些核心功能。

我创建了这个逻辑的原型，效果很好。但由于我是[Lua](http://www.lua.org/)的新手，我不确定实现这一点的正确方法。

现在我有下一个文件结构：

![在此处输入图像描述](https://i.stack.imgur.com/6RtpA.jpg)

**aoc**（主程序）：

```
aoc = {}
aoc_base_path = debug.getinfo(1).source:match("@(.*)/.*$") -- base path to my program
if not aoc_base_path then
  aoc_base_path = ''
else
  aoc_base_path = aoc_base_path..'/'
end

local aoc_base_arg={...}
dofile(aoc_base_path.."core/core")

local module = assert(loadfile(aoc_base_path.."modules/"..aoc_base_arg[1].."/module"))
local arg = table.copy(aoc_base_arg) -- this is my custom function (I'm not provide you with listing, it just copy one table to another one
table.remove(arg,1)
module(arg,aoc) -- pass to module all arguments except first one 
```

**核心/核心**（核心功能加载器）：

```
dofile (aoc_base_path..'core/move') 
```

**核心/移动**：

```
local function move(direction, refuel, dig, attack)
  -- some logic in local function (to not be overwriten in module)
end

function aoc.move()
  -- global function (it logic can be changed by module in case it needed)
  return move()
end 
```

**模块/矿井/模块**（模块）：

```
local arg={...} -- I passed 2 arguments in aoc main program
arg = arg[1]
local aoc = arg[2]
aoc.move() 
```

目前

> **lua>** aoc矿

或者

> **lua>** path/to/aoc mine

工作正常。但是，如果我做错了什么，谁能指出我？

**编辑：**通过获取改变逻辑`aoc_base_path`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:32:51.100

你可以稍微简化一下**aoc**：

```
aoc = {}
aoc_base_path = debug.getinfo(1).source:match("@(.*/)") or ''

dofile(aoc_base_path.."core/core")

local module = assert(loadfile(aoc_base_path.."modules/".. ... .."/module"))
module({select(2,...)},aoc) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:18:07.070

只需将 Lua 的库内置模块功能与[`require`](http://www.lua.org/manual/5.1/manual.html#pdf-require). 通过适当的设置，[`package.loaders`](http://www.lua.org/manual/5.1/manual.html#pdf-package.loaders)您可以配置此标准系统以从您想要的任何地方以任何您想要的方式加载模块。特定目录，直接来自 HTTP，由鸽子根据 RFC 1149 交付 - 它可以做到这一切。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T13:09:44.217

为了使您的目录结构或多或少相同，但使用 lua 包系统，您可以使用如下方法：

在您的基本路径中有一个文件`aoc.lua`：

```
local aoc = {}

local module = ...
local dir = module:gsub("%.","%/"):sub(1,-4)

package.path = dir.."?.lua;"..package.path
package.path = dir.."?/init.lua;"..package.path
package.path = dir.."modules/?.lua;"..package.path

return aoc 
```

在 /core 中有一个文件`init.lua`，它`require`是您要包含的核心包

```
require"core.move" 
```

然后您的核心包将如下所示：

```
local function move(direction, refuel, dig, attack)
  -- some logic in local function (to not be overwriten in module)
end

require"aoc".move = move 
```

在 /modules 中，您可以通过为每个模块创建一个 lua 文件来使事情变得更简单，因此 /modules/mine.lua 看起来像：

```
local aoc = require"aoc"

aoc.move() 
```

然后在 lua 提示符下你会写：

lua> 需要“path.to.aoc”

lua> require"core" --加载核心模块

lua> require"mine" -- 加载我的

## 编辑

如果你想保持相同的风格，将aoc.lua更改为just`return {}`并添加一个文件aoc，如下所示：

```
local dir = debug.getinfo(1).source:match("@(.*)/.*$") -- base path to my program
if not dir then dir = ''
else dir = dir..'/'
end

package.path = dir.."?.lua;"..package.path
package.path = dir.."?/init.lua;"..package.path
package.path = dir.."modules/?.lua;"..package.path

require"core"
for _,mod in ipairs{...} do
    require(mod)
end 
```

我建议这种方法的优点是所有的修改都在一个文件中，在这种情况下是 aoc，并且文件结构的其余部分使用相当标准的 lua 包约定。

# html - html/jquery - 在 iframe 中提交表单

> ID：15965514
> 
> 赞同：0
> 
> 时间：2013-04-12T07:28:27.207
> 
> 标签：html, jquery, iframe

我有一个以 iframe 作为目标的表单。它在使用经典的“提交”按钮时效果很好，但是当我使用 Jquery 提交表单时，它会打开一个新窗口并且不在 iframe 中定位。关于为什么会发生这种情况的任何建议？这是我的代码：

```
function formSubmit() {
  $('#formId').submit();
}
<form name="formId" id="formId" action="ajax/submitForm.php" method="post" target="iframe_submit" tmt:validate="true">
   [...]
   <input type="button" id="submit_button" value="GO" onclick="javascript:formSubmit();" />
</form>

<iframe style="border:none;width:0px;height:0px" id="iframe_submit" name="iframe_submit"></iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:42:52.710

问题不在 iframe 中，而是在`onclick="javascript:formSubmit();"`. `javascript:`首先，您不需要写入`on..=""`属性。但最好使用 jQuery 事件：

```
<form name="formId" id="formId" action="ajax/submitForm.php" method="post" target="iframe_submit">
    <input type="text" name="x" />
   <input type="button" id="submit_button" value="GO" />
</form> 
```

和：

```
function ftformSubmit() {
  $('#formId').submit();
}
$(function(){
    $('#submit_button').click(function(){
        $('#formId').submit();
    });
}); 
```

见[小提琴](http://jsfiddle.net/narekmarkosyan/EUFhs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:30:04.943

尝试

```
 $('#formId').get(0).submit(); 
```

# java - @Stateless webservice with JPA+JTA：如何提交托管实体的更改？

> ID：15965515
> 
> 赞同：5
> 
> 时间：2013-04-12T07:28:34.907
> 
> 标签：java, jpa, ejb, jax-rs, jta

我有以下简单的 web 服务声明为`@Stateless`在 GlassFish 3.1.2.2 上运行的 EJB，并使用 EclipseLink 2.4.1 使用 JTA`DataSource`连接到 MySQL 数据库：

```
@POST
@Consumes(MediaType.APPLICATION_JSON)
public Response update(TimeRow e) throws Exception {
    if ((e.getKey() == null) || !e.getKey().keyValid()) {
        return Response.status(400).build();
    }

    TimeRow existing = em.find(TimeRow.class, e.getKey());
    if (existing == null) {
        em.persist(e);
    } else {
        existing.setValues(e.getValues());
        em.flush();
    }
    return Response.status(204).build();
} 
```

实体类`TimeRow`：

```
@Entity
@NamedQueries({
    @NamedQuery(name="TimeRow.findAllByUser",
         query="SELECT t FROM TimeRow t WHERE t.table.userId = :uid")
})
public class TimeRow implements Serializable {

    @EmbeddedId
    private TimeRowPK key;

    @MapsId("userId")
    @JoinColumn(name = "USERID", referencedColumnName = "userId")
    @ManyToOne
    private UserTable table;
    @Column(name="ROWVALUES")
    private List<Double> values;

    public TimeRow() {
        this.key = new TimeRowPK();
        this.values = new ArrayList<Double>(20);
        extendValuesTo20();
    }

    public TimeRow(String uid, Date date) {
        this.key = new TimeRowPK(date, uid);
        this.table = new UserTable(uid);
        this.values = new ArrayList<Double>(20);
        extendValuesTo20();
    }

    public List<Double> getValues() {
        return values;
    }

    public void setValues(List<Double> values) {
        this.values = values;
        extendValuesTo20();
    }

    private void extendValuesTo20() {
        if (this.values.size() < 20) {
             for (int i = this.values.size(); i < 20; i++) {
                  this.values.add(0.0);
             }
        }
    }

} 
```

`@EmbeddableId` `TimeRowPK`：

```
@Embeddable
public class TimeRowPK implements Serializable {

    public TimeRowPK() { }

    public TimeRowPK(Date date, String userId) {
        this.date = date;
        this.userId = userId;
    }

    @Column(name="DAY")
    private Date date;
    @Column(name = "USERID")
    private String userId;

    public boolean keyValid() {
        return ((date != null) && ((userId != null) && !userId.isEmpty()));
    }

} 
```

`persistence.xml`（不带`<persistence>`标签）：

```
<persistence-unit name="test" transaction-type="JTA">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <jta-data-source>jdbc/test</jta-data-source>
    <class>com.test.TimeRow</class>
    <class>com.test.TimeRowPK</class>
    <class>...</class>
    <properties>
        <property name="eclipselink.ddl-generation" value="create-tables" />
        <property name="eclipselink.ddl-generation.output-mode" value="database" />
    </properties>
</persistence-unit> 
```

网络服务声明：

```
@Path("row")
@Stateless
public class TimeRowWebService {

    @PersistenceContext(unitName = "test")
    private EntityManager em;

    ...

} 
```

问题是，如果实体存在，则更改仅存储在 中`PersistenceContext`，但不会提交到数据库。这意味着我可以通过更改检索正确的数据，但是例如，如果我重新启动 AS，更改就消失了。AS 日志中没有错误。

所以我想我必须做一些 bean 级别的手动事务处理才能完成这项工作。我必须添加什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T16:03:10.530

在努力让这个工作`@EmbeddedId`方式之后，我尝试通过使用 generate 来实现它`@Id`，然后为两个关键字段添加一个唯一约束。

**实体**

```
public class TimeRow implements Serializable {

    @Id
    @GeneratedValue
    private long id;

    @JoinColumn(name = "USERID", referencedColumnName = "USERID")
    @ManyToOne(optional = false)
    private UserTable table;

    @Basic(optional = false)
    @Column(name = "DAY")
    @Temporal(TemporalType.DATE)
    private Date date;

    @Lob
    @Column(name="ROWVALUES")
    private List<Double> values;

    ...
} 
```

此外，我已将数据库引擎从`MyISAM`更改`InnoDB`为具有更好的外键支持。为此，我已添加`default-storage-engine = innodb`到`/etc/mysql/my.cnf`该`[mysqld]`部分下。

使用 DDL 生成数据库结构后，我为and[添加了唯一约束](https://stackoverflow.com/questions/635937/how-do-i-specify-unique-constraint-for-multiple-columns-in-mysql)：`USERID``DAY`

```
alter table TIMEROW add unique index(USERID,DAY); 
```

现在它可以工作并且数据已正确修改:) 非常感谢为这个问题做出贡献的每个人！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:32:20.833

也许问题在这里：

```
public void setValues(List<Double> values) {
    this.values = values;
    extendValuesTo20();
} 
```

尝试将其更改为使用容器的列表，如下所示：

```
public void setValues(List<Double> values) {
    this.values.clear();
    this.values.addAll(values);
    extendValuesTo20();
} 
```

此外，这是对 JPA 的一种非常奇怪的用法。我从来没有见过列表以这种方式持续存在`@ElementCollection`

# livecode - 如何在每张卡片上放一个按钮？

> ID：15965516
> 
> 赞同：0
> 
> 时间：2013-04-12T07:28:43.327
> 
> 标签：livecode

我想在堆叠的每张卡片上放置一个“下一个”按钮。在 Hypercard 中，我可以将按钮放入卡片或背景中。我还没有看到如何在每张卡片上显示一个按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T07:58:39.123

在 LiveCode 中，您可以创建一个可以在每张卡片上的背景组。首先**创建**你的**按钮（S）**选择它（他们），然后按工具栏中的“**组**”。这将创建一个组。然后在该组**的检查器中****选择 "Behave like a background"**。所有新卡都会自动拥有您的按钮。如果您已经创建了一堆卡片，您可以随时通过在菜单中选择“对象 => 放置组 =>”来添加组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:40:39.447

如果您来自 HyperCard 背景，那么背景可能是最需要忘记的事情，因为它们在 LiveCode 中的行为有点不同。但他们比老 HC 背景拥有*更多*的权力，所以从长远来看，转型的痛苦得到了很好的回报。

# c# - 如何使用 .net 的 Google.GData.Apps 对用户进行身份验证？

> ID：15965521
> 
> 赞同：2
> 
> 时间：2013-04-12T07:28:57.217
> 
> 标签：c#

我在我的网站上使用谷歌配置 api。我在谷歌和一些用户上创建了一个域。现在我想使用 AppsService 类对它们进行身份验证。

```
AppsService service = new AppsService("domain", "admin username", "admin password");
UserEntry user = service.RetrieveUser("username"); 
```

这两条线我到处都能找到。但我想用他的用户名和密码对用户进行身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:01:50.377

Mayank，如果你想用他的个人用户名和密码来验证用户，请尝试[谷歌 Oauth2.0](https://developers.google.com/accounts/docs/OAuth2)，而不是上面的代码，它是 2-legged oauth 1.0。您发布的代码用于整个域身份验证。个人用户请使用OAuth2.0，通过OAuth2.0登录时会弹出登录页面，之后会获取token进行进一步操作。

# javascript - javascript不能去掉字符串的第一个字母

> ID：15965524
> 
> 赞同：1
> 
> 时间：2013-04-12T07:29:00.487
> 
> 标签：javascript, replace, substring

我有一个 js 函数，一旦完成将计算基本代数方程。出于某种原因，它不会让我替换数组中字符串的第一个字符。我以前在这个功能中使用过它，但它现在不起作用。我试过使用 .replace() 和 .substring()。

这些是我尝试过的以下代码：

```
// this is what i've been testing it on
// $problem[o][j] = +5
var assi = $problem[0][j].charAt(0); // Get the first character, to replace to opposite sign
switch (assi){
  case "+":
    console.log($problem[0][j]);
    $problem[0][j].replace("+","-");
    console.log($problem[0][j]);
    break;
} 
```

以上输出到控制台：

```
> +5
> +5 
```

我尝试的下一个代码：

```
// Second code i tried with $problem[0][j] remaining the same
switch(assi){
  case "+":
    console.log($problem[0][j]);
    $problem[0][j].substring(1);
    $problem[0][j] = "-" + $problem[0][j];
    console.log($problem[0][j]);
    break;
} 
```

这将输出到控制台：

```
> +5
> -+5 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T07:30:55.363

字符串是不可变的 - 某个字符串的内容不能更改。您需要使用替换创建一个新字符串。您可以将此新字符串分配给旧变量以使其“看起来像”修改。

```
var a = "asd";
var b = a.replace(/^./, "b"); //replace first character with b
console.log(b); //"bsd"; 
```

重新分配：

```
var a = "asd";
a = a.replace(/^./, "b"); //replace first character with b
console.log(a); //"bsd"; 
```

* * *

如果你想翻转一个数字的符号，乘以 -1 可能更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:31:55.063

您需要用新字符串替换实际字符串

```
$problem[0][j] = $problem[0][j].replace("+","-"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T07:33:40.230

`.replace()`不会对字符串进行更改，它只是**返回**一个带有这些更改的新字符串。

//这什么都不做

```
problem[0][j].replace("+","-"); 
```

//这会保存替换的字符串

```
problem[0][j] = problem[0][j].replace("+","-"); 
```

# iphone - 当 NSString 包含表情符号时如何获取 NSString 大小？

> ID：15965525
> 
> 赞同：10
> 
> 时间：2013-04-12T07:29:08.533
> 
> 标签：iphone, ios, objective-c, nsstring, emoji

我目前正在使用

```
- (CGSize)sizeWithFont:(UIFont *)font constrainedToSize:(CGSize)size lineBreakMode:(UILineBreakMode)lineBreakMode 
```

获取 NSString 的大小。但是，当该字符串包含表情符号时，它似乎会计算文字 unicode 字符的大小，而不是考虑表情符号本身的大小，从而导致返回的大小不正确。

如何正确获取带有表情符号字符的字符串的大小，因为它将出现在 uilabel 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:21:43.637

NSString 不呈现表情符号，它代表一个字符串，所以 sizeWithFont 将只占字符串。

我会使用：

```
CGRect labelFrame = label.frame;  
labelFrame.size = [label sizeThatFits:CGSizeMake(100, 9999)];  
[label setFrame:labelFrame]; 
```

或者

```
//Alternatively  
[label sizeToFit]; 
```

请记住`sizeToFit`调用该方法的`sizeThatFits:`方法，因此仅将标签设置为正确的高度，sizeThatFits: 更快，并且在视觉上更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-27T23:25:29.837

我在同一件事上苦苦挣扎了一段时间，尝试了多种解决方案，包括接受的答案，但这对我不起作用。我通过使用文本创建一个 NSAttributed String 解决了这个问题，然后使用 NSAttributedString 方法 boundingRectWithSize:options:context: 来获取字符串的大小。

```
NSString *text = //some text
CGFloat maxSize = //text size constraints

NSAttributedString *attributedString = [[NSAttributedString alloc] initWithString:text
                                                                       attributes:@{NSFontAttributeName : font
                                                                                    }];

CGRect boundingRect = [attributedString boundingRectWithSize:maxSize options:NSStringDrawingUsesLineFragmentOrigin context:nil];
CGSize fitSize = boundingRect.size; 
```

# javascript - 减少加载大哈希表的正确方法

> ID：15965532
> 
> 赞同：2
> 
> 时间：2013-04-12T07:29:26.857
> 
> 标签：javascript, performance, web-applications

我有一个包含大哈希表（1 兆字节）的 JavaScript 应用程序。加载它以减少加载时间的正确方法是什么？

哈希表是这样的：

```
function unicodeTable (num) {
    // returns the unicode name of a given unicode num in decimal
var unicodedata =
{
0x0020:"SPACE",
// tens of thousand entries here
}
...
} 
```

该应用程序是一个 Unicode 浏览器。当用户将鼠标悬停在 Unicode 上时，它会显示其名称和代码点。

PS我想要不涉及一些js lib的解决方案。谢谢。

附录：页面在这里 [http://xahlee.info/comp/unicode_6_emoticons_list.html](http://xahlee.info/comp/unicode_6_emoticons_list.html)

这是 JavaScript [http://xahlee.info/comp/unicode_popup.js](http://xahlee.info/comp/unicode_popup.js)

在台式机/笔记本电脑上很好，但我注意到在黑莓平板电脑上，它冻结了浏览器 5 分钟左右。我不确定如何使用 ajax，或者 worker 是答案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:36:54.140

*   异步加载，比如使用 AJAX

*   尽可能使用[CDN](http://en.wikipedia.org/wiki/Content_delivery_network)

*   在不终止的范围内定义它。这避免了 JS 每次都创建和销毁它。

    ```
    function foo(){
      //creating bar
      var bar = 'someValue';
      //using bar here
      //bar will be destroyed as soon as foo is done
    } 
    ```

    但是在这一个中，bar 存在，因为它在 foo 之外：

    ```
    //creating bar
    var bar = 'someValue';

    function foo(){
      //using bar here
      //bar still lives after foo is done
    } 
    ```

*   使用计时器将处理（搜索、访问、遍历）卸载到[WebWorker](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers)或模拟工作者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T07:37:01.210

首先，确保使用 gzip 压缩响应。这将节省大量空间，因为文本压缩得非常好。其次，不需要哈希表。您可以只在正确位置有一个名称的数组，当有人将空间元素悬停在页面中时，您可以在 [20] 处进入此数组并检索名称。正如我在那里看到的那样，每个字符将节省 7 个字节。所以从这里一点点从那里一点点可以加起来。但这就是我能想到的。

# c++ - decltype 和左值表达式

> ID：15965533
> 
> 赞同：1
> 
> 时间：2013-04-12T07:29:27.343
> 
> 标签：c++, c++11, lvalue, decltype

根据[http://en.cppreference.com/w/cpp/language/decltype](http://en.cppreference.com/w/cpp/language/decltype)

```
struct A {
    double x;
};
const A* a = new A();

decltype( a->x ) x3; 
```

匹配1个案例，即：

*如果参数是对象/函数的不带括号的名称，或者是成员访问表达式（object.member 或指针->member），则`decltype`指定此表达式指定的实体的声明类型。*

但请注意：

> 如果一个对象的名称被括号括起来，它变成一个左值表达式

引导我提出以下问题：`a->x`如果不是左值表达式，它的类型是什么？

我什至不明白为什么

```
decltype((a->x)) x4 = x3; // type of x4 is const double& (lvalue expression) 
```

仅通过将其视为左值表达式这一事实评估为 a `const&`，实际上并没有看到链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T10:50:44.667

> 让我想到以下问题，如果 a->x 不是左值表达式，那么它的类型是什么？

你只是感到困惑。

> 如果一个对象的名称被括号括起来，它变成一个左值表达式

那应该是

> 如果对象的名称带有括号，则 decltype 对它的处理方式不同。

带括号和不带括号的东西都是左值表达式。如果不加括号，则 decltype 不会检查表达式的类型，而是检查名称查找找到要引用的名称的声明所使用的类型（例如，可能是`int&&`名称查找将其解析为右值引用变量，但表达式的类型是`int`并且是*左值*）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T10:27:28.943

The way to think about it is (IMHO) this:

```
decltype( a->x ) 
```

keeps/retrieves the information that `x` refers to a member variable, hence it gives you the declared type of the member variable. This is helpful because you couldn't extract that information if this would automatically turned into the next case:

```
decltype( (a->x) ) 
```

This is "just" an expression and therefore behaves like any other expression. It refers to whatever the expression *returns*, not what the expression *references*. The expression is an lvalue, it doesn't matter that it's a member variable. You *explicitly throw away a part of the information* that is available, expressing your intend of not being interested in what the object/member was declared as but only in the resulting type of the expression.

In other words: The first syntax gives you *more* information unless you *explicitly* decide you don't need them and use the second syntax.

# c# - 如何在 objdatatable 中找到 textbox1.text？

> ID：15965536
> 
> 赞同：1
> 
> 时间：2013-04-12T07:29:46.223
> 
> 标签：c#, winforms

我想`textbox1.text`找到`objdatatable.`

```
objdataadapter.Fill(objdatatable);

foreach (DataRow dt in objdatatable.Rows)
{
    if (dt.Equals(txtaddgroup.Text)))
} 
```

如何`dt.Equals(txtaddgroup.Text)`正确使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:32:00.543

您`row`在 dt 中可能需要使用一些列名来将其与文本进行比较`txtaddgroup`

```
foreach (DataRow dt in objdatatable.Rows)
{
     if (dt["ColumnName"].ToString() == txtaddgroup.Text)
     {
        //You code
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:47:02.653

你甚至不需要`convert`它到 a `string`，它是一个`object`. 所以你只需要使用`cast`它`string`：`(string)`

```
foreach (DataRow dt in objdatatable.Rows)
{
     if ((string)dt["ColumnName"] == txtaddgroup.Text)
     {
        //You code
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T07:45:27.893

您只是缺少列名：

```
foreach (DataRow dt in objdatatable.Rows)
{
    if (dt["ColumnName"].Equals(txtaddgroup.Text))
    {
    }
} 
```

你可以使用`Column Name`以及`Column Index`

# ios - 绘制辐射渐变： : CGContextDrawPath: 无效的上下文 0x0

> ID：15965538
> 
> 赞同：1
> 
> 时间：2013-04-12T07:29:54.517
> 
> 标签：ios, objective-c, core-graphics

我正在使用最新的 SDK 开发 iOS 5.0+ 应用程序。

我对 CoreGraphics 非常陌生，我不知道如何在`CALayer`.

我发现我必须使用[CGContextDrawRadialGradient](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGContext/Reference/reference.html)来绘制辐射渐变。

在 Google 上搜索，我看到我必须将辐射渐变添加到 CALayer 的内容中，但要绘制它，我需要一个[CGContext](https://developer.apple.com/library/ios/#documentation/graphicsimaging/reference/CGContext/Reference/reference.html#//apple_ref/doc/c_ref/CGContextRef)，我不知道如何获取它`CGContext`。

**你知道我该怎么做吗？**

我找到了本[教程](http://cupsofcocoa.com/2012/06/16/the-jungle-part-7-quartz-demos-section-2-of-3/)，但它也使用`CGContext`.

我的代码是这样的：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

@property (weak, nonatomic) IBOutlet UIView *testView;

@end 
```

**执行：**

```
#import "ViewController.h"
#import <QuartzCore/QuartzCore.h>

@interface ViewController ()

- (void)drawRadiantGradient;

@end

@implementation ViewController

@synthesize testView = _testView;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [self drawRadiantGradient];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)drawRadiantGradient
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    CGFloat redBallColors[] = {
        1.0, 0.9, 0.9, 0.7,
        1.0, 0.0, 0.0, 0.8
    };
    CGFloat glossLocations[] = {0.05, 0.9};
    CGGradientRef ballGradient = CGGradientCreateWithColorComponents(colorSpace, redBallColors, glossLocations, 2);
    CGRect circleBounds = CGRectMake(20, 250, 100, 100);
    CGPoint startPoint = CGPointMake(50, 270);
    CGPoint endPoint = CGPointMake(70, 300);
    CGContextDrawRadialGradient(context, ballGradient, startPoint, 0, endPoint, 50, 0);
    CGContextAddEllipseInRect(context, circleBounds);
    CGContextDrawPath(context, kCGPathStroke);
} 
```

我想创建一个`CALayer`，绘制一个辐射渐变，并将其添加`CALayer`到`_testView`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:03:47.050

您可以绘制到自己的上下文中（例如，您使用创建的图像上下文`UIGraphicsBeginImageContextWithOptions()`

或者

成为该层的代表并使用绘制到层图形上下文中`drawLayer:inContext:`

在我看来，你想做第二种选择。您将创建 CALayer 并将自己设置为委托。然后实现`drawLayer:inContext:`并使用上下文作为参数传递的上下文。

设置

```
CALayer *yourLayer = [CALayer layer];
// other layer customisation
yourLayer.delegate = self; 
```

并画

```
- (void)drawLayer:(CALayer *)layer inContext:(CGContextRef)ctx {
    // Check that the layer argument is yourLayer (if you are the 
    // delegate to more than one layer)

    // Use the context (second) argument to draw.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T08:11:14.950

当`UIGraphicsGetCurrentContext()`从特定方法调用或您通过调用创建一个新的 fe 时，唯一返回一个有效的上下文`UIGraphicsBeginImageContext()`。

因此，您需要做的是子类 a并用您方法中的代码`UIView`覆盖它的方法。或者您可以使用协议提供的委托方法。只需将图层的委托设置为您的 vc 并实现该方法。这可能看起来像这样：`drawRect:``drawRadiantGradient``CALayerDelegate``drawLayer:inContext:`

在您的 .h 文件中：

```
@interface MyVC : UIViewController
@property (weak, nonatomic) IBOutlet UIView *drawingView;    
/... 
```

在你的 .m 文件中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.drawingView.layer.delegate = self;
}

- (void)drawLayer:(CALayer *)layer inContext:(CGContextRef)context
{
    [self drawRadiantGradientInContext:context];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T08:02:27.980

创建一个 UIView 的自定义子类，在其`drawRect:`方法中绘制渐变，并让您的 VC 创建一个径向渐变视图并将其添加为其视图的子视图。

# service - 在wix中进行重大升级时如何只停止而不卸载Windows服务？

> ID：15965539
> 
> 赞同：4
> 
> 时间：2013-04-12T07:29:56.443
> 
> 标签：service, wix, upgrade

我正在开发一个应该在 wix v3.8 中安装 Windows 服务的安装程序。问题是我们需要进行重大升级而不卸载服务只是为了停止它。

我们在包含服务 exe 文件的组件中使用 ServiceInstall 和 ServiceControl。有没有办法使 ServiceInstall 的执行有条件（使用 REMOVE="ALL" AND NOT UPGRADINGPRODUCTCODE 之类的条件），以便在升级时不卸载服务（只是停止以便我们可以升级文件）？

一种解决方案是使用自定义操作，但也许有更好的方法？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T03:45:09.297

您必须覆盖处理这些元素的操作。如果适用于您的 MSI 包中的所有服务（如果您只有一项服务，那么对您来说很好），只要您没问题，以下内容可能会起作用：

```
<InstallExecuteSequence>
   <DeleteServices>NOT UPGRADINGPRODUCTCODE</DeleteServices>
</InstallExecuteSequence> 
```

您不需要为删除设置条件，因为 DeleteServices 已经考虑了组件的状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-15T23:10:12.873

最终为我工作的是

```
 <DeleteServices><![CDATA[REMOVE ~= "ALL" AND (NOT UPGRADINGPRODUCTCODE)]]> </DeleteServices>
  <InstallServices><![CDATA[NOT Installed]]> </InstallServices> 
```

我通过一系列反复试验以及结合其他一些具有类似答案的线程得出了这个答案。

只有 不起作用的可能原因之一是因为 WIX 在重新安装时也会删除该服务。我们只想在初始安装期间安装该服务一次。我们还希望确保在卸载时删除该服务。这是唯一对我有用的条件组合，允许服务保留其设置和用户帐户。

# css - CSS 中的 * 有什么作用？

> ID：15965548
> 
> 赞同：5
> 
> 时间：2013-04-12T07:30:21.877
> 
> 标签：css

明星是做什么的？这叫什么？对我来说，这是某种通配符。它叫什么，所以我可以阅读它？

```
#div {
  *zoom: 1; /*this ... *
   zoom : 1;
   display: inline;
   *display: inline; /*... and this, whats the difference? *
} 
```

我知道这意味着什么（所有元素）：

```
* {
..css code
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T07:35:06.320

简单来说，就是在不同IE浏览器版本上定位css的关键。它也可以称为 CSS Hack。

```
#div {
  *zoom: 1; /*Only works on IE7 and below*/
  zoom : 1;
  display: inline;
  *display: inline; /*Only works on IE7 and below*/
} 
```

表示此 CSS 仅适用于 IE7 及以下版本。这是一种我们可以用来在 IE7 及更低版本上应用 CSS 的 hack。

以下是唯一针对 IE6、IE7 和 IE8 的方法

```
#div{  
 color: red; /* all browsers, of course */  
 color : green\9; /* IE8 and below */  
 *color : yellow; /* IE7 and below */  
 _color : orange; /* IE6 */  
} 
```

如果您想了解有关浏览器特定 CSS 的更多信息，请[单击此处。](http://webdesignerwall.com/tutorials/css-specific-for-internet-explorer)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T07:36:15.420

`star-property hack`然而，IE 家族忽略了 *，并在没有它的情况下应用属性。此 hack 用于仅向 Internet Explorer 7（及更低版本）提供样式规则。它依赖于自 1997 年以来影响 Explorer 的错误 DOM 实现。根据规范，任何格式良好的 (X)HTML 文档的实际根元素都是 html 元素。相反，Explorer 7（及更低版本）将 html 元素视为包装在另一个未知元素中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T07:32:51.913

***属性：值**

> 尽管 Internet Explorer 7 更正了属性名称带有下划线或连字符前缀时的行为，但其他非字母数字字符前缀的处理方式与 IE6 中的相同。因此，如果您在属性名称前添加星号 (*) 等非字母数字字符，则该属性将在 IE 中应用，而不是在其他浏览器中应用。与连字符和下划线方法不同，CSS 规范没有保留星号作为前缀，因此随着 CSS 规范的发展，使用这种 hack 可能会导致意外行为。

[http://www.javascriptkit.com/dhtmltutors/csshacks3.shtml](http://www.javascriptkit.com/dhtmltutors/csshacks3.shtml)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-12T07:33:30.930

在您的上下文中，它似乎是**明星黑客**。它确实该属性仅适用于某些版本的 IE，具体取决于其用途。

[您可以在此处](http://en.wikipedia.org/wiki/CSS_filter#Star_hack)检索更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T07:52:54.817

`What does the * in css?`-> 选择指定元素之后的所有元素，例如。`div.red *{color: red;}`即使您在内部定义了其他颜色，也会在其类红色之后产生所有颜色红色，`div.red`因此您知道这`*`意味着`ALL` See **[This Fiddle](http://jsfiddle.net/ynHUL/)**

`* zoom: 1;`-> 这里你`*`首先放置了，所以这只会破解 IE，因为这种样式只在 IE 中有效，其他浏览器忽略了这一点。

`*`它在简单语言中称为星号，在编码语言中称为**[通用选择器](http://www.w3.org/TR/selectors/#universal-selector)**

# android - 在 Android 应用程序中启动 Adob e Reader

> ID：15965556
> 
> 赞同：0
> 
> 时间：2013-04-12T07:31:01.013
> 
> 标签：android, pdf, android-intent, adobe-reader, android-download-manager

我有一个 Android 应用程序，我在其中截获 WebView 中的 PDF 文件下载事件，使用 DownloadManager 下载它，然后使用 Adob​​e Reader 启动一个新意图以显示该文件。它工作正常，除了当 Adob​​e Reader 启动时，它会在显示实际文件之前显示以下消息：

> 只读文件 | 要修改此文档，请在您的设备上保存一份副本。保存 | 查看只读

在我关闭此提示后，文档将正确显示。如何摆脱只读提示？

这是我的代码：

```
public class MyDownloadListener implements DownloadListener {

    MainActivity activity;
    BroadcastReceiver receiver;
    DownloadManager downloadManager;

    public MyDownloadListener(MainActivity a) {
        activity = a;
        downloadManager = (DownloadManager) activity.getSystemService(Context.DOWNLOAD_SERVICE);
        receiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                String action = intent.getAction();
                if (DownloadManager.ACTION_DOWNLOAD_COMPLETE.equals(action)) {
                    long downloadId = intent.getLongExtra(DownloadManager.EXTRA_DOWNLOAD_ID, 0);
                    Query query = new Query();
                    query.setFilterById(downloadId);
                    Cursor c = downloadManager.query(query);
                    if (c.moveToFirst()) {
                        int columnIndex = c.getColumnIndex(DownloadManager.COLUMN_STATUS);
                        if (DownloadManager.STATUS_SUCCESSFUL == c.getInt(columnIndex)) {
                            String uriString = c.getString(c.getColumnIndex(DownloadManager.COLUMN_LOCAL_FILENAME));
                            File fileSrc = new File(uriString);
                            Intent intentPdf = new Intent(Intent.ACTION_VIEW);
                            intentPdf.setDataAndType(Uri.fromFile(fileSrc), "application/pdf");
                            intentPdf.setPackage("com.adobe.reader");
                            intentPdf.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            activity.startActivity(intentPdf);
                        }
                    }
                }
            }
        };
        activity.registerReceiver(receiver, new IntentFilter(DownloadManager.ACTION_DOWNLOAD_COMPLETE));
    }

    @Override
    public void onDownloadStart(String url, String userAgent, String contentDisposition, String mimetype, long contentLength) {
        Request request = new Request(Uri.parse(url));
        downloadManager.enqueue(request);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:26:33.240

根据类的官方文档[`DownloadManager.Request`](http://developer.android.com/reference/android/app/DownloadManager.Request.html)

> 此类包含请求新下载所需的所有信息。URI 是唯一必需的参数。**请注意，默认下载目标是共享卷，如果需要回收空间供系统使用，系统可能会在其中删除您的文件。如果这是一个问题，请使用外部存储上的位置**（请参阅 [setDestinationUri(Uri)](http://developer.android.com/reference/android/app/DownloadManager.Request.html#setDestinationUri%28android.net.Uri%29)。

因此，默认位置更多的是缓存位置，如果需要更多空间，系统可以删除文件。因此，如果您想保留文件，则可以使用[`setDestinationUri`](http://developer.android.com/reference/android/app/DownloadManager.Request.html#setDestinationUri%28android.net.Uri%29)提供 SD 卡中的路径..

并且看起来默认空间不允许下载管理器以外的任何其他线程/进程在该空间中写入文件，因此来自 adobe reader 的只读消息..

# jquery - 我的 jQuery.css 不起作用

> ID：15965564
> 
> 赞同：0
> 
> 时间：2013-04-12T07:31:53.327
> 
> 标签：jquery

我在用

```
$('div:first', $('#' + id)).css({ 'color': 'red' }) 
```

更改我的 div 的颜色，但它在我的页面中不起作用。然后当我通过代码获取颜色时

```
$('div:first', $('#' + id)).css('color') 
```

，它是红色的！谁能告诉我发生了什么？

我得到了关于我的问题的正确答案，但它被某人删除了。我把它贴在这里，希望它可以帮助别人。

```
$('div:first', '[id="' + id + '"]').css({'color': 'red' }); 
```

如果有人能告诉我我的代码和答案之间的区别，我将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:35:40.313

尝试这个

```
$('div:first', $('#' + id)).css( 'color', 'red' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:35:06.037

试试喜欢`$('div:first', $('#' + id)).css('color')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T07:36:22.543

尝试将它们替换为

```
$('div:first', $('#' + id)).css( 'color', 'red' ); 
```

# wcf - 异步读取 ,从命名空间“http://schemas.datacontract.org/2004/07/”中期待元素，遇到名为“工作流”的“元素”，命名空间“”

> ID：15965570
> 
> 赞同：3
> 
> 时间：2013-04-12T07:32:16.857
> 
> 标签：wcf, rest, serialization, xml-serialization, httpclient

我正在尝试使用 REST API 来通过 httpclient 获取数据，遇到了解析问题，{“第 1 行位置 95 中的错误。期望来自命名空间的元素'工作流'' [http://schemas.datacontract.org/2004/07/](http://schemas.datacontract.org/2004/07/) '.. 遇到名为 'workflow'、命名空间 '' 的 'Element'。“}

客户端代码是

```
string baseUri = "/rest/workflows/";
            client = CreateClient(baseUri);

            HttpRequestMessage request = CreateRequest(baseUri);
            var task = client.SendAsync(request);
            HttpResponseMessage response = task.Result;
            response.EnsureSuccessStatusCode();

            response.Content.ReadAsAsync<collection>().ContinueWith(wf =>
                {
                    Console.WriteLine(wf.Result.workflow.Length);
                }); 
```

数据类

```
/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.17929")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlRootAttribute(Namespace = "http://www.w3.org/2005/Atom", IsNullable = false)]
public partial class collection
{

    private workflow[] workflowField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("workflow", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public workflow[] workflow
    {
        get
        {
            return this.workflowField;
        }
        set
        {
            this.workflowField = value;
        }
    }
} 
```

并且响应xml文件是这种格式

```
<collection xmlns:ns2="http://www.w3.org/2005/Atom">
    <workflow uuid="5ffbde8c-c430-4851-9c83-164c102a4d68">
        <name>Remove a Volume</name>
        <categories>
            <category>Decommissioning</category>
        </categories>
    </workflow>
  </collection> 
```

我可以通过使用 response.Content.ReadAsStringAsync() 获取字符串并将其保存到 xml 文件，然后，我将其反序列化为集合，可以成功，但需要和 serizliazer 的默认命名空间

```
XmlSerializer serializer = new XmlSerializer(typeof(collection), "xmlns:ns2=\"http://www.w3.org/2005/Atom\"");
            c = serializer.Deserialize(stream) as collection; 
```

任何人都可以在这方面提供帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-04-20T17:58:57.853

您不应该触摸从 xsd.exe 工具生成的文件。

只需通过设置明确设置您要使用的`XmlSerializer`而不是`DataContractSerializer`默认使用`XmlMediaTypeFormatter`的`UseXmlSerializer = true`。

所以你必须像这样创建一个特定的类型格式化程序：

```
var formatters = new List<MediaTypeFormatter>() {
                new XmlMediaTypeFormatter(){ UseXmlSerializer = true } }; 
```

并将其用作`ReadAsAsync`方法的参数：

```
private async Task<T> ReadAsync<T>(HttpResponseMessage response)
=> await response.Content.ReadAsAsync<T>(formatters); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T10:33:19.910

您的命名空间不匹配；您的 xml 为原子地址声明了一个*命名空间别名*( `ns2`)，但集合元素的命名空间仍然为空，因为它不*使用*该别名（它不是`ns2:collection`）。xml 错误或代码错误。如果无法更改 xml，则只需将名称空间设置`[XmlRoot(...)]`为空字符串。如果 C# 正确且 xml 错误，则将其设为命名空间而不是别名：

```
<collection xmlns="http://www.w3.org/2005/Atom">
    <workflow uuid="5ffbde8c-c430-4851-9c83-164c102a4d68">
        <name>Remove a Volume</name>
        <categories>
            <category>Decommissioning</category>
        </categories>
    </workflow>
  </collection> 
```

或同样：

```
<ns2:collection xmlns:ns2="http://www.w3.org/2005/Atom">
    <workflow uuid="5ffbde8c-c430-4851-9c83-164c102a4d68">
        <name>Remove a Volume</name>
        <categories>
            <category>Decommissioning</category>
        </categories>
    </workflow>
  </ns2:collection> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-01T09:43:27.550

从我的 web api 读取数据时，我遇到了完全相同的问题。为我解决的问题是使用 [DataContract(Namespace="namespacefromyourwebapi")] 属性装饰客户端中的类，并使用 [DataMember] 属性对类中的每个属性进行装饰。

# apache - 为什么在我的网站上向 /eyeblaster 发出请求？

> ID：15965575
> 
> 赞同：10
> 
> 时间：2013-04-12T07:32:31.520
> 
> 标签：apache, adsense, ads

我的 Adsense 支持网站的 error.log 文件有很多这样的条目，我很确定这些条目与广告相关：

> [Fri Apr 12 07:19:57 2013] [错误] [客户端 IP] 文件不存在：/var/www/[mywebsite]/htdocs/eyeblaster，引用者：[http ://apac-bidder.mathtag.com/通知/iframe](http://apac-bidder.mathtag.com/notify/iframe)？[剪掉很多垃圾]

它是什么，它有害吗？我应该创建一个空的 eyeblaster.html 文件来关闭它吗？

我还有另外两个类似的——它们有关系吗？：

> [2013 年 4 月 12 日星期五 07:08:52] [错误] [客户端 IP] 文件不存在：/var/www/[mywebsite]/htdocs/7196176924447058959
> 
> [2013 年 4 月 12 日星期五 07:13:58] [错误] [客户端 IP] 文件不存在：/var/www/[mywebsite]/htdocs/_sans

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T18:39:51.737

看看上面的 StackOverflow 问题 -[确定哪个广告向 /eyeblaster/addineyev2.html 发出请求](https://stackoverflow.com/questions/13462795/determine-which-advertisement-made-a-request-to-eyeblaster-addineyev2-html)。我想一切都会被揭露:)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-16T03:13:18.143

Eyeblaster 是一家在线广告公司，现称为[Sizmek](http://www.sizmek.com/)（前身为 Mediamind）。

正如 John 提到的，此文件用作 iframe buster，就像 DoubleClick 的 iframe buster 一样，应该由发布者放置在 [www.example.com]/doubleclick/DARTIframe.html

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-02T20:49:08.040

另一种解决方案是禁止使用喷眼剂。
只需将这些添加到您的`robots.txt`：

```
Disallow: /eyeblaster
Disallow: /addineyeV2.html 
```

* * *

或者我更喜欢将 eyeblaster 重定向到`.htaccess`文件内的 index.html

```
RewriteCond %{REQUEST_URI} (eyeblaster|addineyeV2) [NC]
RewriteRule ^(.*)$ /index.html? [R=301,L] 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2014-08-28T00:46:29.480

eyeblaster 只是另一种恶意软件，据我所知，大多数机器最终都会在某个时间上运行它并没有引起任何系列问题，但最好是在你的反恶意软件发现它时将它从你的机器中删除

# iphone - 开始录制时的提示音

> ID：15965576
> 
> 赞同：0
> 
> 时间：2013-04-12T07:32:39.467
> 
> 标签：iphone, ios, objective-c, ipad

我第一次在我的应用程序中捕获视频，但是当我开始捕获时，我希望该按钮单击声音作为本机应用程序。我搜索了很多，才知道这是系统声音。谁能告诉我，当我开始捕获视频和停止捕获时，如何在我的应用程序中添加该声音。

目前我正在使用 AVAudioPlayer 播放声音，如下所示

```
 NSURL *url1 = [[NSBundle mainBundle] URLForResource:str withExtension:@"wav"];
_startAudioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url1 error:nil];
_startAudioPlayer.delegate= self;
[_startAudioPlayer prepareToPlay];
[_startAudioPlayer play]; 
```

提前致谢.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:25:21.323

只需导入`AudioToolbox.framework`.
为源音频文件创建 URL

```
NSURL *tapSound   = [[NSBundle mainBundle] URLForResource: @"tap"
                                                withExtension: @"aif"];

// Store the URL as a CFURLRef instance
self.soundFileURLRef = (CFURLRef) [tapSound retain];

// Create a system sound object representing the sound file.
AudioServicesCreateSystemSoundID (
    soundFileURLRef,
    &soundFileObject
); 
```

播放声音

```
AudioServicesPlayAlertSound (soundFileObject); 
```

这是一个很好的教程[链接](http://developer.apple.com/library/ios/#samplecode/PhotoPicker/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010196)，你可以按照这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:44:09.290

当你想开始捕捉视频时，像这样调用下面的方法......

```
[self playSound]; 
```

使用我的这种波纹管方法播放声音......

```
-(void)playSound
{ 
    NSString *path = [[NSBundle mainBundle] pathForResource:@"adriantnt_release_click" ofType:@"mp3"];
    AVAudioPlayer* theAudio=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
    theAudio.delegate=self;
    [theAudio play];
} 
```

首先将任何 mp3 或任何音频文件存储在您的项目文件夹中例如：我添加`adriantnt_release_click.mp3`文件。

还要添加`AVAudioPlayerDelegate`您的`.h`文件并添加`AudioToolbox.framework`您的项目..

# c# - 在c#中使用字符串动态打开现有表单

> ID：15965577
> 
> 赞同：0
> 
> 时间：2013-04-12T07:32:48.670
> 
> 标签：c#

我正在尝试打开动态附加在 menustrip 中的表单。

这里我的代码是：

表格`frm`；

```
string formName =((ToolStripMenuItem)sender).Text;
formName = Assembly.GetEntryAssembly().GetName().Name + "." + formName;

Type type = Type.GetType(formName);
frm = (Form)Activator.CreateInstance(type);           

frm.Show(); 
```

问题就在这里。我`null`得到了这种类型的价值。请帮助我完成这项任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:48:32.773

如果您不知道完全限定名称，您可以迭代程序集中的类型并找到您感兴趣的类型。

```
var q = from t in Assembly.GetExecutingAssembly().GetTypes()
        where t.IsClass && t.Name.Equals(formname) && t.IsSubclassOf(typeof(Form))
        select t; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:46:01.510

您正在混淆程序集名称 ( `Assembly.GetEntryAssembly().GetName().Name`) 和命名空间。

您需要找到表单的真正完全限定的类名。如果您知道名称空间（即所有表单的名称空间始终相同），您可以简单地对其进行硬编码。另一种解决方案是使用反射来枚举 `GetEntryAssembly`程序集中的所有类型，然后检查该类型是否代表具有给定名称的表单。

# android - 安卓 - SQLCipher

> ID：15965581
> 
> 赞同：2
> 
> 时间：2013-04-12T07:32:52.820
> 
> 标签：android, sqlcipher

这是我的演示项目

```
public class SQLDemoActivity extends Activity {
    EventDataSQLHelper eventsData;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //you must set Context on SQLiteDatabase first
        SQLiteDatabase.loadLibs(this);
        String password = "foo123";
        eventsData = new EventDataSQLHelper(this);
        //then you can open the database using a password
        SQLiteDatabase db = eventsData.getWritableDatabase(password);
        for (int i = 1; i < 100; i++)
            addEvent("Hello Android Event: " + i, db);
        db.close();
        db = eventsData.getReadableDatabase(password);
        Cursor cursor = getEvents(db);
        showEvents(cursor);
        db.close();
    }
    @Override
    public void onDestroy() {
        eventsData.close();
    }
    private void addEvent(String title, SQLiteDatabase db) {
        ContentValues values = new ContentValues();
        values.put(EventDataSQLHelper.TIME, System.currentTimeMillis());
        values.put(EventDataSQLHelper.TITLE, title);
        db.insert(EventDataSQLHelper.TABLE, null, values);
    }
    private Cursor getEvents(SQLiteDatabase db) {
        Cursor cursor = db.query(EventDataSQLHelper.TABLE, null, null, null, null, null, null);
        startManagingCursor(cursor);
        return cursor;
    }
    private void showEvents(Cursor cursor) {
        StringBuilder ret = new StringBuilder("Saved Events:\n\n");
        while (cursor.moveToNext()) {
            long id = cursor.getLong(0);
            long time = cursor.getLong(1);
            String title = cursor.getString(2);
            ret.append(id + ": " + time + ": " + title + "\n");
        }
        Log.i("sqldemo",ret.toString());
    }
} 
```

我收到以下错误我如何清除错误。以下作为演示项目的链接是[https://github.com/sqlcipher/android-database-sqlcipher](https://github.com/sqlcipher/android-database-sqlcipher)。

```
04-12 12:53:20.229: E/AndroidRuntime(7413): java.lang.UnsatisfiedLinkError: Couldn't load stlport_shared: findLibrary returned null

04-12 12:53:20.229: E/AndroidRuntime(7413):     at java.lang.Runtime.loadLibrary(Runtime.java:429)

04-12 12:53:20.229: E/AndroidRuntime(7413):     at java.lang.System.loadLibrary(System.java:554)

04-12 12:53:20.229: E/AndroidRuntime(7413):     at net.sqlcipher.database.SQLiteDatabase.loadLibs(SQLiteDatabase.java:142)

04-12 12:53:20.229: E/AndroidRuntime(7413):     at net.sqlcipher.database.SQLiteDatabase.loadLibs(SQLiteDatabase.java:137)

04-12 12:53:20.229: E/AndroidRuntime(7413):     at example.SQLDemoActivity.onCreate(SQLDemoActivity.java:20)

04-12 12:53:20.229: E/AndroidRuntime(7413):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)

04-12 12:53:20.229: E/AndroidRuntime(7413):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)

04-12 12:53:20.229: E/AndroidRuntime(7413):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)

04-12 12:53:20.229: E/AndroidRuntime(7413):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)

04-12 12:53:20.229: E/AndroidRuntime(7413):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)

04-12 12:53:20.229: E/AndroidRuntime(7413):     at android.os.Handler.dispatchMessage(Handler.java:99)

04-12 12:53:20.229: E/AndroidRuntime(7413):     at android.os.Looper.loop(Looper.java:123)

04-12 12:53:20.229: E/AndroidRuntime(7413):     at android.app.ActivityThread.main(ActivityThread.java:3683)
04-12 12:53:20.229: E/AndroidRuntime(7413):     at java.lang.reflect.Method.invokeNative(Native Method)
04-12 12:53:20.229: E/AndroidRuntime(7413):     at java.lang.reflect.Method.invoke(Method.java:507)

04-12 12:53:20.229: E/AndroidRuntime(7413):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)

04-12 12:53:20.229: E/AndroidRuntime(7413):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)

04-12 12:53:20.229: E/AndroidRuntime(7413):     at dalvik.system.NativeStart.main(Native Method)< 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:07:10.810

确保您的项目`libs/`正确设置了目录内容。您不仅需要 JAR 文件，还需要包含`.so`您打算支持的每个 CPU 架构的文件的子目录，例如您在[此示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/Database/ConstantsSecure)`libs/`的目录中看到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-01T01:51:07.687

我有同样的错误。这是对我有用的解决方案。

在您的 java 文件夹附近创建一个名为 jniLibs 的文件夹，并将所有目录（或您打算支持的体系结构的目录）与 *.so 文件一起放置在那里。

它必须看起来像这样。

[![在此处输入图像描述](https://i.stack.imgur.com/JUFVc.png)](https://i.stack.imgur.com/JUFVc.png)

如果它适合你，你不需要在你的 libs 文件夹中有这个文件夹。

PS我使用Android Studio。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-22T20:35:55.120

在您的应用程序中，在您的 build.gradle 文件中，确保您具有以下几行：

```
dependencies {
compile fileTree(dir: 'libs', include: ['*.jar'])
compile files('libs/sqlcipher-javadoc.jar')
compile files('libs/sqlcipher.jar') 
```

}

同样右键单击您的项目，打开模块设置并选择依赖项选项卡。确保列出了 sqlcipher-javadoc.jar 和 sqlcipher.jar。

# gwt - 读取输入数据并在 SmartGwt 中的 listgrid 中显示数据

> ID：15965588
> 
> 赞同：0
> 
> 时间：2013-04-12T07:33:17.753
> 
> 标签：gwt, textbox, smartgwt, listgrid

我编写了一个代码来从文本框中读取输入数据，然后单击提交按钮，该数据将显示在列表网格中。提交按钮点击事件代码在这里：

```
public void onClick(ClickEvent event) {sendInfoToSever();}
private void sendInfoToSever() {
            String Ename=firstName.getText();
            String Eemail=Email.getText();
            String Equerytype=rgi.getDisplayValue();
            String Edesignation1=check1.getFormValue();
            String Edesignation2=check2.getFormValue();
            String Econtact=Contact.getText();

            int indx=li1.getSelectedIndex();
            String Ecountry=li1.getValue(indx);
            String Equerytext=queryText.getText();
            showData.setWidth(475);
            showData.setHeight(100);

            ListGridField Lname= new ListGridField("name", "Name");
            ListGridField Lemail= new ListGridField("email", "Email");
            ListGridField Lquerytype= new ListGridField("Query Type");
            ListGridField Ldesignation1= new     ListGridField("Designation");
            ListGridField Ldesignation2= new     ListGridField("Designation");
            ListGridField Lcontact= new ListGridField("Contact");
            ListGridField Lcountry= new ListGridField("Country");
            ListGridField Lquerytext= new ListGridField("Query Text");
            showData.setFields(Lname,Lemail, Lquerytype, Ldesignation1, Ldesignation2, Lcontact, Lcountry, Lquerytext);
   } 
} 
```

如何将文本框数据设置为 listgrid 字段？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:21:37.683

尝试这样的事情：

```
YourCustomRecordObject[] data = new YourCustomRecordObject[]{  
                new YourCustomRecordObject(firstName.getText(), Email.getText(), ..all other fields.. )
};
showData.setData(data);

public class YourCustomRecordObject {

    public String name;
    public String email;
    .. all other fields..

    public YourCustomRecordObject(String name, String email, ..all other fields..) {
        this.name = name;
        this.email = emal;
        .......
    }

    .. getters and setters..
} 
```

# django - Django：/accounts/ProfileDetails/'utf8' 处的 UnicodeDecodeError 编解码器无法解码位置 5915 中的字节 0xe1：无效的继续字节

> ID：15965589
> 
> 赞同：4
> 
> 时间：2013-04-12T07:33:18.687
> 
> 标签：django

在 html 页面中添加 javascript 代码时出现此错误

/accounts/ProfileDetails/ 处的 UnicodeDecodeError

“utf8”编解码器无法解码位置 5915 中的字节 0xe1：无效的继续字节

有人出主意

```
Traceback: 
```

{% extends "base.html" %} 文件 "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" 在 get_response 111\. response = callback(request, *callback_args, **callback_kwargs)

```
File "/usr/local/lib/python2.7/dist-packages/django/contrib/auth/decorators.py" in _wrapped_view
20\.                 return view_func(request, *args, **kwargs)

File "/var/www/userreg/registration/views.py" in newpost
275\.             return render_to_response('registration/personal_information.html',context_instance=RequestContext(request))

File "/usr/local/lib/python2.7/dist-packages/django/shortcuts/__init__.py" in render_to_response
20\.     return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs)

File "/usr/local/lib/python2.7/dist-packages/django/template/loader.py" in render_to_string
169\.         t = get_template(template_name)

File "/usr/local/lib/python2.7/dist-packages/django/template/loader.py" in get_template
145\.     template, origin = find_template(template_name)

File "/usr/local/lib/python2.7/dist-packages/django/template/loader.py" in find_template
134\.             source, display_name = loader(name, dirs)

File "/usr/local/lib/python2.7/dist-packages/django/template/loader.py" in __call__
42\.         return self.load_template(template_name, template_dirs)

File "/usr/local/lib/python2.7/dist-packages/django/template/loader.py" in load_template
45\.         source, display_name = self.load_template_source(template_name, template_dirs)

File "/usr/local/lib/python2.7/dist-packages/django/template/loaders/filesystem.py" in load_template_source
39\.                     return (file.read().decode(settings.FILE_CHARSET), filepath)

File "/usr/lib/python2.7/encodings/utf_8.py" in decode
16\.     return codecs.utf_8_decode(input, errors, True)

Exception Type: UnicodeDecodeError at /accounts/ProfileDetails/
Exception Value: 'utf8' codec can't decode byte 0xe1 in position 5915: invalid continuation byte

base.html

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
     <meta charset="utf-8" />
     <title>{% block title %}Tagging Exploration{% endblock %}</title>

     <style type="text/css">

     .login_tabel tr td label
      {
      color:#2E6CB8;
      font-size: 13px;
      }
    </style>

</head>

<body>
<div id="website" style="border:1px solid #D910BB; width:1200px; margin:auto; padding:0px;">
{% block content %}

<div id="nav" style="margin-top:10px; border:1px solid #0FA31E;">
{% block navigation %}

{% endblock %}
</div>

<div id="content" style="border:1px solid #E91135;">
{% block main_content %}

{% endblock %}
</div>

{% endblock %}

 </div>  

 </body>
 </html>

persional_information.html

{% extends "base.html" %}
<script type="text/javascript">

var states = new Array();
states['Canada'] = new Array('Alberta','British Columbia','Ontario');
states['Mexico'] = new Array('Baja California','Chihuahua','Jalisco');
states['United States'] = new Array('California','Florida','New York');

var cities = new Array();
cities['Canada'] = new Array();
cities['Canada']['Alberta']          = new Array('Edmonton','Calgary');
cities['Canada']['British Columbia'] = new Array('Victoria','Vancouver');
cities['Canada']['Ontario']          = new Array('Toronto','Hamilton');
cities['Mexico'] = new Array();
cities['Mexico']['Baja California'] = new Array('Tijauna','Mexicali');
cities['Mexico']['Chihuahua']       = new Array('Ciudad Juárez','Chihuahua');
cities['Mexico']['Jalisco']         = new Array('Guadalajara','Chapala');
cities['United States'] = new Array();
cities['United States']['California'] = new Array('Los Angeles','San Francisco');
cities['United States']['Florida']    = new Array('Miami','Orlando');
cities['United States']['New York']   = new Array('Buffalo','new York');

function setStates() {
cntrySel = document.getElementById('country');
stateList = states[cntrySel.value];
changeSelect('state', stateList, stateList);
setCities();
}
function setCities() {
cntrySel = document.getElementById('country');
stateSel = document.getElementById('state');
cityList = cities[cntrySel.value][stateSel.value];
changeSelect('city', cityList, cityList);
}
function changeSelect(fieldID, newOptions, newValues) {
selectField = document.getElementById(fieldID);
selectField.options.length = 0;
for (i=0; i<newOptions.length; i++) {
selectField.options[selectField.length] = new Option(newOptions[i], newValues[i]);
}
}

function addLoadEvent(func) {
var oldonload = window.onload;
if (typeof window.onload != 'function') {
window.onload = func;
} else {
 window.onload = function() {
  if (oldonload) {
    oldonload();
  }
  func();
}
}
}

addLoadEvent(function() {
setStates();
});
</script>

<form action="." method="post" enctype="multipart/form-data">{% csrf_token %}
<table border="0" align="center" cellsapcing="1" cellspadding="1">
<tr>
    <td colspan="2"><h3> Personal Information</h3></td>
</tr>

<tr>
    <td colspan="2"><input type="hidden" value="{{ user.id }}" name="user_id"   />      </td>
</tr>

<tr>
    <td>First Name</td>
    <td><input type="text" name="fname" /></td>
</tr>

<tr>
    <td>Last Name </td>
    <td><input type="text" name="lastname" /></td>
</tr>

<tr>
    <td>Address </td>
    <td><input type="text" name="address1" /></td>
</tr>
<tr>
    <td></td>
    <td><input type="text" name="address2" /></td>
</tr>

   <tr>
   <td style="text-align: left;">Country:</td>
   <td style="text-align: left;">
    <select name="country" id="country" onChange="setStates();">
     <option value="Canada">Canada</option>
     <option value="Mexico">Mexico</option>
     <option value="United States">United States</option>
   </select>
   </td>
   </tr><tr>
   <td style="text-align: left;">State:</td>
   <td style="text-align: left;">
      <select name="state" id="state" onChange="setCities();">
         <option value="">Please select a Country</option>
      </select>
   </td>
  </tr><tr>
  <td style="text-align: left;">City:</td>
  <td style="text-align: left;">
     <select name="city"  id="city">
        <option value="">Please select a Country</option>
     </select>
  </td>
  </tr>
  </table>
  </form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-20T11:20:25.227

我怀疑您的模板文件未存储为 UTF-8：[https ://docs.djangoproject.com/en/dev/ref/unicode/#templates](https://docs.djangoproject.com/en/dev/ref/unicode/#templates)

如果您使用的是 Linux，您可以使用以下`file`命令找到文件的编码：

```
$ file -bi mytemplate.html
text/html; charset=utf-8 
```

如果您的模板以 UTF-8 编码，则检查文件`FILE_CHARSET`中的值`settings.py`并将其设置为`"utf-8"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:11:55.507

你从扩展`personal_informtion.html`而来，`base.html`但你没有使用`{% block %}`它。这是一个示例。

**base.html**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta charset="utf-8" />
    <title>{% block title %}Tagging Exploration{% endblock %}</title>

    <style type="text/css">
        .login_tabel tr td label{
            color:#2E6CB8;
            font-size: 13px;
        }
    </style>

    {% block js %}{% endblock js %}
</head>

<body>
..........
{% block main_content %}{% endblock %}
...........
</body>
</html> 
```

**个人信息.html**

```
{% extends "base.html" %}

{% block js %}
    {{ block.super }}
    <script type="text/javascript">
        ..........
    <script>
{% endblock %}

{% block main_content %}
<form action="." method="post" enctype="multipart/form-data">
    {% csrf_token %}
    .........
</form>
{% endblock %} 
```

# android - android-swipelistview 中的 android.view.InflateException

> ID：15965591
> 
> 赞同：0
> 
> 时间：2013-04-12T07:33:20.693
> 
> 标签：android, android-listview

您好我正在使用[SwipeListView](https://github.com/47deg/android-swipelistview)库。我收到错误

```
04-12 12:53:47.189: E/AndroidRuntime(15197): FATAL EXCEPTION: main
04-12 12:53:47.189: E/AndroidRuntime(15197): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.emr/com.example.emr.EmrLauncher}: android.view.InflateException: Binary XML file line #12: Error inflating class com.fortysevendeg.android.swipelistview.SwipeListView
04-12 12:53:47.189: E/AndroidRuntime(15197):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at android.os.Looper.loop(Looper.java:137)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at android.app.ActivityThread.main(ActivityThread.java:4424)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at java.lang.reflect.Method.invokeNative(Native Method)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at java.lang.reflect.Method.invoke(Method.java:511)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:817)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:584)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at dalvik.system.NativeStart.main(Native Method)
04-12 12:53:47.189: E/AndroidRuntime(15197): Caused by: android.view.InflateException: Binary XML file line #12: Error inflating class com.fortysevendeg.android.swipelistview.SwipeListView
04-12 12:53:47.189: E/AndroidRuntime(15197):    at android.view.LayoutInflater.createView(LayoutInflater.java:606)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:268)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at com.actionbarsherlock.internal.ActionBarSherlockNative.setContentView(ActionBarSherlockNative.java:119)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at com.actionbarsherlock.app.SherlockActivity.setContentView(SherlockActivity.java:229)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at com.example.emr.EmrLauncher.onCreate(EmrLauncher.java:59)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at android.app.Activity.performCreate(Activity.java:4465)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-12 12:53:47.189: E/AndroidRuntime(15197):    ... 11 more
04-12 12:53:47.189: E/AndroidRuntime(15197): Caused by: java.lang.reflect.InvocationTargetException
04-12 12:53:47.189: E/AndroidRuntime(15197):    at java.lang.reflect.Constructor.constructNative(Native Method)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at android.view.LayoutInflater.createView(LayoutInflater.java:586)
04-12 12:53:47.189: E/AndroidRuntime(15197):    ... 23 more
04-12 12:53:47.189: E/AndroidRuntime(15197): Caused by: java.lang.NumberFormatException: Invalid int: "@2131427340"
04-12 12:53:47.189: E/AndroidRuntime(15197):    at java.lang.Integer.invalidInt(Integer.java:138)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at java.lang.Integer.parse(Integer.java:375)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at java.lang.Integer.parseInt(Integer.java:366)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at com.android.internal.util.XmlUtils.convertValueToInt(XmlUtils.java:123)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at android.content.res.TypedArray.getInt(TypedArray.java:254)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at com.fortysevendeg.android.swipelistview.SwipeListView.init(SwipeListView.java:164)
04-12 12:53:47.189: E/AndroidRuntime(15197):    at com.fortysevendeg.android.swipelistview.SwipeListView.<init>(SwipeListView.java:134)
04-12 12:53:47.189: E/AndroidRuntime(15197):    ... 26 more 
```

这是我的 xml 文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:app="http://schemas.android.com/apk/res/com.example.emr"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".EmrLauncher" >

    <com.fortysevendeg.android.swipelistview.SwipeListView
        xmlns:swipe="http://schemas.android.com/apk/Location"
        android:id="@+id/emrlist"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:listSelector="#00000000"
        app:swipeActionLeft="reveal"
        app:swipeBackView="@+id/back"
        app:swipeCloseAllItemsWhenMoveList="true"
        app:swipeFrontView="@+id/front"
        app:swipeMode="both"
        app:swipeOffsetLeft="40dp"
        app:swipeOffsetRight="40dp"
        app:swipeOpenOnLongPress="true" />

</RelativeLayout> 
```

我也在使用 actionbar sherlock 库。我已经为 swipelistview 添加了所有必要的属性。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T20:30:36.843

我无法使用 libs/ 中的 swipelistview jar 令人满意地解决这个问题，所以我只是将源链接到作为外部库项目的源，并且效果很好。

您将在项目的 project.properties 中需要这样的东西（假设您的构建环境使用 ant - 如果没有，eclipse 也有类似的方法）：

```
android.library.reference.1=../ThirdParty/android-swipelistview 
```

我怀疑 jar 方法的问题是滑动列表初始化程序在编译时无法访问您的项目资源，因此当它尝试拉入这些资源（从您的本地 attrs.xml 文件）时，事情会变得一团糟 - 参考资料不要指向 /your/ 资源，因为编译 jar 时，这些资源不存在。

无论如何，希望这有助于推动事情的发展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T06:16:41.617

查看我关于开始使用 swipelistview 的帖子：http: [//modewagon.wordpress.com/2013/09/16/getting-started-with-swipelistview/](http://modewagon.wordpress.com/2013/09/16/getting-started-with-swipelistview/)

# c++ - 使用 JNA 从 Java 调用 C++ dll 方法并避免方法名称修改

> ID：15965592
> 
> 赞同：1
> 
> 时间：2013-04-12T07:33:25.910
> 
> 标签：c++, jna

我一直在通过 StackOverflow 上有关如何解决方法名称修改的链接，但没有找到任何具有实时示例的解决方案。

场景-C++ Ex.dll 文件由客户端提供。我需要访问 Ex.dll 并通过 Java 调用相同的方法。

限制 - 无法修改 Ex.dll，我只能访问相同的。

面临的问题 - 当我通过 JNA 访问 Ex.dll 时出现以下异常

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: Error looking up function 'getCPUSpeed': The specified procedure could not be found.
at com.sun.jna.Function.<init>(Function.java:134)
at com.sun.jna.NativeLibrary.getFunction(NativeLibrary.java:336)
at com.sun.jna.NativeLibrary.getFunction(NativeLibrary.java:316)
at com.sun.jna.Library$Handler.invoke(Library.java:203)
at $Proxy0.getCPUSpeed(Unknown Source)
at cpp.java.JnaTest.main(JnaTest.java:16) 
```

谷歌了很多，发现它是由于方法名称 Mangling，但又找不到任何好的示例代码与解决方案。

这是我使用的代码-

```
import com.sun.jna.Native;
class JnaTest
{

public static void main(String args[])
{
    try 
    {
        JnaInterface jInterface = (JnaInterface) Native.loadLibrary("Ex", JnaInterface.class);

        System.out.println("Calling C++ DLL method");
        System.out.println("========================");
        System.out.println("getCPUSpeed() -- "+jInterface.getCPUSpeed());

    } catch (Exception e) {
        e.printStackTrace();
    }
}
}

package cpp.java;
import com.sun.jna.Library;
public interface JnaInterface extends Library{  
public int getCPUSpeed();
} 
```

更新1：***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ***

下面提到的是我通过依赖walker浏览DBMM.dll时得到的实际功能-

DBMM DLL 函数-

??0cDbmmInterfaceCache@@QAE@ABV0@@Z

??0cDbmmInterfaceCache@@QAE@XZ

??0cDbmmInterfaceControl@@QAE@ABV0@@Z

??0cDbmmInterfaceControl@@QAE@XZ

??0cDbmmInterfaceEcon@@QAE@ABV0@@Z

??0cDbmmInterfaceEcon@@QAE@XZ

??0cDbmmInterfaceKnob@@QAE@XZ

??0cDbmmInterfaceOutput@@QAE@ABV0@@Z

??0cDbmmInterfaceOutput@@QAE@H@Z

??0cDbmmInterfacePoolLoan@@QAE@ABV0@@Z

??0cDbmmInterfacePoolLoan@@QAE@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z

??0cDbmmMacroEcon@@QAE@ABV0@@Z

??0cDbmmMacroEcon@@QAE@ABVcDbmmInterfaceEcon@@_N@Z

??0cDbmmMtgBasisConstSpreadModel@@IAE@XZ

??0cDbmmMtgBasisConstSpreadModel@@QAE@ABV0@@Z

??0cDbmmMtgBasisConstSpreadModel@@QAE@PBD@Z

??0cDbmmMtgBasisModel@@QAE@ABV0@@Z

??0cDbmmMtgBasisModel@@QAE@XZ

??0cScaleFieldsSubSum@@QAE@NN@Z

??1cDbmmInterfaceCache@@QAE@XZ

??1cDbmmInterfaceControl@@QAE@XZ

??1cDbmmInterfaceEcon@@QAE@XZ

??1cDbmmInterfaceKnob@@QAE@XZ

??1cDbmmInterfaceOutput@@QAE@XZ

??1cDbmmInterfacePoolLoan@@QAE@XZ

??1cDbmmMacroEcon@@QAE@XZ

??1cDbmmMtgBasisConstSpreadModel@@UAE@XZ

??1cDbmmMtgBasisModel@@UAE@XZ

??1cScaleFieldsSubSum@@QAE@XZ

??4cDbmmInterface@@QAEAAV0@ABV0@@Z

??4cDbmmInterfaceCache@@QAEAAV0@ABV0@@Z

??4cDbmmInterfaceControl@@QAEAAV0@ABV0@@Z

??4cDbmmInterfaceEcon@@QAEAAV0@ABV0@@Z

??4cDbmmInterfaceKnob@@QAEAAV0@ABV0@@Z

??4cDbmmInterfaceOutput@@QAEAAV0@ABV0@@Z

??4cDbmmInterfacePoolLoan@@QAEAAV0@ABV0@@Z

??4cDbmmMacroEcon@@QAEAAV0@ABV0@@Z

??4cDbmmMtgBasisConstSpreadModel@@QAEAAV0@ABV0@@Z

??4cDbmmMtgBasisModel@@QAEAAV0@ABV0@@Z

??4cScaleFieldsSubSum@@QAEAAV0@ABV0@@Z

??_7cDbmmMtgBasisConstSpreadModel@@6B@

??_7cDbmmMtgBasisModel@@6B@

??_FcDbmmInterfaceOutput@@QAEXXZ

??_FcDbmmInterfacePoolLoan@@QAEXXZ

??_FcScaleFieldsSubSum@@QAEXXZ

?Add@cScaleFieldsSubSum@@QAEXNN@Z

?InitSubsum@cScaleFieldsSubSum@@QAEXNN@Z

?ReInit@cDbmmMacroEcon@@QAEX_N@Z

* * *

不知道如何通过 Java 调用这些函数。

感谢有人可以为我提供Java端的解决方案，请提供示例代码:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T18:05:49.893

如果您通过 Visual Studio 构建 DLL，您应该能够将其构建为发行版而不是调试来修复函数名称（如果您尚未这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:12:57.283

您的函数使用 JNI 和 stdcall 约定进行装饰；它不是 C++ 损坏的。

`Java_sysInfo_`给定前缀，看起来该库是一个 JNI 库。如果是这种情况，您只需要声明等效的 Java 端，例如

```
// default package
public class sysInfo {
    static { System.loadLibrary("Ex"); }
    public static native int getCPUSpeed();
} 
```

我想你可能会发现这个映射是正确的并且你不需要 JNA。

**编辑**

给定一个具有任意 ctor 输入参数和方法的 C++ 类`getCount()`：

```
extern "C" int getCountForName(const char* name) {
    MyCPPClass mycpp(name);
    return mycpp.getCount();
} 
```

[将其编译为共享库](https://stackoverflow.com/questions/1235165/c-cross-platform-dynamic-libraries-linux-and-windows)，并通过 JNA 加载。

# android - 将国家 [] 更改为 ArrayList< > 安卓

> ID：15965597
> 
> 赞同：0
> 
> 时间：2013-04-12T07:33:35.273
> 
> 标签：android

在我的应用程序中，我正在尝试使用 setter 和 getter 方法填充车轮适配器，如我的 Post Class 中所示。

类帖子{

```
 private String imageList;
   private String country_name;
   private String country_code;

  public void setImageList (    String imageList){
        this.imageList = imageList;
    }

  public String getImageList (){
        return imageList;
    }

 public void setCountryName (   String country_name){
        this.country_name = country_name;
    }

  public String getCountryName (){
        return country_name;
    }
...

} 
```

我的 wheelAdapter 类如下：

```
public class SecondWheelAdapter extends AbstractWheelTextAdapter {

    ArrayList<convertor_pst> PostList = new ArrayList<convertor_pst>();

    public ImageLoader imageLoader; 

    // Countries names
    private String countries[] =
            new String[] {"EUR", "USD","EUR", "USD","EUR", "USD","EUR", "USD","EUR", "USD","EUR", "USD"};

    // Countries flags
    private int flags[] = new int[] {R.drawable.eur, R.drawable.usd,R.drawable.eur, R.drawable.usd,R.drawable.eur, R.drawable.usd,R.drawable.eur, R.drawable.usd,R.drawable.eur, R.drawable.usd,R.drawable.eur, R.drawable.usd};

    /**
     * Constructor
     */

    Convertor main;

    public SecondWheelAdapter(Context context) {
        super(context, R.layout.country_layout, NO_RESOURCE);
        setItemTextResource(R.id.country_name);
    }

    @Override
    public View getItem(int index, View cachedView, ViewGroup parent) {

        View view = super.getItem(index, cachedView, parent);
        ImageView img = (ImageView) view.findViewById(R.id.flag);
        img.setImageResource(flags[index]);

        return view;
    }

    @Override
    public int getItemsCount() {
        return countries.length;
    }

    @Override
    protected CharSequence getItemText(int index) {
        return countries[index];
    } 
```

我正在尝试替换此数组

```
// Countries names
        private String countries[] =
                new String[] {"EUR", "USD","EUR", "USD","EUR", "USD","EUR", "USD","EUR", "USD","EUR", "USD"}; 
```

值存储在 ArrayList<> 但我不知道如何修改国家 [] 以便它接受来自我的 PostList.get(id).getCountryName(); 的数据 接下来我需要在 setItemTextResource(R.id.country_name); 中设置它

请给我一个提示或教程。我从 github 得到这个轮子适配器，它带有一个库，但我遇到了困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:38:29.410

## 优化解决方案：

我建议您创建一个 ArrayList，而不是管理不同的 String Arrays 或 ArrayList，这样管理单个 ArrayList 会很容易。

我的意思是说删除`countries[]`并`flags[]`创建单一`ArrayList<Post>`类型。

# javascript - 如何将复选框列表的选定值保存在数组中？

> ID：15965598
> 
> 赞同：1
> 
> 时间：2013-04-12T07:33:40.127
> 
> 标签：javascript, jquery, asp.net

我想使用 javascript 或 jquery 将复选框的值保存在数组中。我的复选框列表在数据列表中。每当用户选择一个项目时，我想将该选定项目的值添加到数组中。

```
ASPX :

 <asp:DataList ID="dl_Groups_1" RepeatColumns="1"  runat="server" OnItemDataBound="dl_Groups_1_ItemDataBound" RepeatDirection="vertical" ShowFooter="False" ShowHeader="False">
        <ItemTemplate>
           <asp:CheckBox Font-Bold="true" runat="server" ID="chk_Group_1" Text='<%# Eval("category_type") %>' Value='<%# Eval("service_type_category_id") %>' onclick="OnGroupClick" />
            <asp:CheckBoxList  CssClass="line" runat="server" ID="chkServiceType_1" DataValueField="ServiceTypeID" DataTextField="Name" EnableViewState="true">
            </asp:CheckBoxList> 
            <br />
        </ItemTemplate>
    </asp:DataList> 
```

我尝试了以下方法，以获取被选中的项目，但我在这里被打动了......

```
function test() {
    $(":checkbox").each(function () {
        if (this.checked) {
            alert(this);
        }
    });
} 
```

当我这样做时，我收到警报消息为“ON”而不是值。我在哪里调用 javascript 以使数组在选择和取消选择复选框列表中的项目时保持更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:37:45.557

```
var arrValues = new Array();
function test() {
    $(":checkbox").each(function () {
        if (this.checked && arrValues.indexOf(this.value) == -1) {
            arrValues.push(this.value);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:44:00.897

利用`map()`

```
 var selectedValue= $("input:checkbox:checked").map(function(){
     return this.value;
 }).get();

console.log(selectedValue); 
```

selectedValue 将在数组中包含所有选中的值..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T07:50:31.540

```
var val;
$('#<%= chkServiceType_1.ClientID %> input[type=checkbox]').change(function(){
   val = $("#<%= chkServiceType_1.ClientID %> input[type=checkbox]:checked").map(function(){
          return this.value;
       }).get();
}) 
```

# c# - 如何在 C# 中缩放 UIElement？

> ID：15965606
> 
> 赞同：1
> 
> 时间：2013-04-12T07:34:15.707
> 
> 标签：c#, windows-phone-7, scale, uielement

我在 XAML 中定义了一个画布，我在 C# 中添加了很多图形。我遇到了一些困难，但需要一些帮助才能将比例应用于`UIElement`.

我创造了`ScaleTransform`这样的：

```
ScaleTransform scaleTrans = new ScaleTransform();
scaleTrans.ScaleX = scaleFactor;
scaleTrans.ScaleY = scaleFactor; 
```

但是我怎样才能将它应用到我`UIElement`的（我画布上唯一的孩子）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:37:22.333

您需要使用[UIElement.RenderTransform](http://msdn.microsoft.com/en-us/library/system.windows.uielement.rendertransform.aspx)属性：

```
yourElement.RenderTransform = scaleTrans; 
```

# xslt - 带有附加和根元素名称空间的 XSLT 标识转换

> ID：15965610
> 
> 赞同：1
> 
> 时间：2013-04-12T07:34:21.700
> 
> 标签：xslt, xslt-1.0, xml-namespaces

我正在尝试创建一个 XSLT 库来完成通过 XML 数据的大部分内容进行少量更改的常见任务。

包含文件当前如下所示（pass-through.xslt）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <!-- change default behaviour to copying all attributes and nodes -->
  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <!-- copy element but add a child node -->
  <xsl:template name="append">
    <xsl:param name="element"/>
    <xsl:param name="appendage"/>
    <xsl:element name="{name($element)}">
      <xsl:copy-of select="$element/namespace::*"/>
      <xsl:copy-of select="$element/@*"/>
      <xsl:apply-templates select="$element/node()"/>
      <xsl:copy-of select="$appendage"/>
    </xsl:element>
  </xsl:template>

</xsl:stylesheet> 
```

然后，您可以创建一个包含它的样式表，而不必担心一遍又一遍地重复自己（调用样式表）。

```
<xsl:stylesheet version="1.0"
    xmlns:ns="http://example/namespace"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:include href="pass-through.xslt"/>

  <!-- only worry about the transform you want -->
  <xsl:template match="element-to-be-modified">
  ...
  </xsl:template>

</xsl:stylesheet> 
```

如果您只想将元素添加到文档中，请调用“追加”。

```
<xsl:stylesheet 
```

*除了*我要附加到的元素上的名称空间外，这有效。如果我在根元素上有一个带有命名空间的 XML 文件，它会窒息说前缀没有命名空间绑定。如果我将根元素的名称空间添加到库中，那会很高兴，但是如果您必须为每次使用都修改它，那么这会违背库的目的。

我很乐意将 xmlns:ns="uri" 添加到调用样式表，但命名空间声明的范围似乎只扩展到该样式表 -*而不是*“附加”模板所在的包含的样式表。

我希望能够转变

```
<ns:root xmlns:ns="http://example/namespace">
  <ns:child>old child</ns:child>
</ns:root> 
```

到

```
<ns:root xmlns:ns="http://example/namespace">
  <ns:child>old child</ns:child>
  <ns:child>new child!</ns:child>
</ns:root> 
```

无需每次都包含身份转换样板。我尝试了各种各样的东西，包括在“附加”模板中的元素中添加一个命名空间=“{namespace-uri()}”，但似乎没有任何东西可以保留附加到的元素上的命名空间前缀。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:50:57.970

代替

```
<xsl:element name="{name($element)}"> 
```

经过

```
<xsl:element name="{name($element)}" namespace="{namespace-uri($element)}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:32:17.673

如果，当您调用命名模板“附加”时，您已经定位在要复制/修改的元素上，那么确实不需要将当前元素作为参数传递。你可以在这里使用**xsl:copy**

```
 <xsl:template name="append">
    <xsl:param name="appendage"/>
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
      <xsl:copy-of select="$appendage"/>
    </xsl:copy>
 </xsl:template> 
```

在您的示例中，您可以这样称呼它

```
<xsl:template match="ns:root">
   <xsl:call-template name="append">
       <xsl:with-param name="appendage"><ns:child>new child!</ns:child></xsl:with-param>
   </xsl:call-template>
</xsl:template> 
```

使用**xsl:copy**应该复制您的元素并保留命名空间。

# animation - SVG中的动画使用svg-edit

> ID：15965611
> 
> 赞同：3
> 
> 时间：2013-04-12T07:34:22.863
> 
> 标签：animation, svg, image-editing, svg-animate

我正在使用 svg-edit.googlecode.com。是否可以在 SVG 中制作动画？我需要在将旋转其头部的游戏中为图像设置动画。我有 10 帧动画图像，但我不知道如何将它带入动画的 svg。需要帮助让我的游戏角色通过 SVG 制作动画。

```
<svg width="512" height="320" xmlns="http://www.w3.org/2000/svg">
<!-- Created with SVG-edit - http://svg-edit.googlecode.com/ -->
<g>
<title>Layer 1</title>
</g>
</svg> 
```

# javascript - Joomla 3.0 的 OpenX 2.8.10 横幅

> ID：15965612
> 
> 赞同：1
> 
> 时间：2013-04-12T07:34:22.927
> 
> 标签：javascript, banner, openx, joomla3.0

Joomla 3.0 中放置由 OpenX AdServer 创建的广告的最佳组件是什么？OpenX AdServer 中生成的 JavaScript 代码不适用于横幅的默认组件。我正处于使用[Jumi 组件](http://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/custom-code-in-content/1023)放置 JavaScript 代码的开发阶段。

你知道在同一个视图中放置多个横幅（JavaScript 标记、iFrame 标记）的任何组件吗？有什么建议么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-17T15:51:25.950

iframes are required if you want the ads to autorefresh properly. There is a [plugin](http://extensions.joomla.org/extensions/ads-a-affiliates/affiliate-systems/affiliate-advertising/12297) that I haven't tried that says it integrates well with Joomla 2.5.

# javascript - 正则表达式字符串正确但不起作用

> ID：15965613
> 
> 赞同：-1
> 
> 时间：2013-04-12T07:34:26.990
> 
> 标签：javascript, regex

我有一个正则表达式

```
function checkNum(form) {
    var regex = "/^\d+/";
    if (!form.value.match(regex)) {
        alert('Please Enter value again');
        form.value = "";
    }
} 
```

但它不工作。

[我已经在这个网站http://www.regular-expressions.info/javascriptexample.html](http://www.regular-expressions.info/javascriptexample.html)中输入了这个正则表达式 /^\d+$/但它似乎在这个网站上也不起作用。我很确定这个表达是正确的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T07:38:02.550

正则表达式文字`/^\d+/` *没有*引号。

```
function checkNum(form) {
    var regex = /^\d+$/; //Pure digits from start to end
    if (!form.value.match(regex)) {
        alert('Please Enter value again');
        form.value = "";
    }
} 
```

演示[http://jsfiddle.net/KvuaM/](http://jsfiddle.net/KvuaM/)

* * *

如果您将*字符串* `"/^\d+/"`传递给您，`.match()`您将获得一个等价的正则表达式，`/\/^d+\//`因为隐式转换和无效`"\d"`转义。

```
new RegExp("/^\d+/").source
//"/^d+/" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:38:48.020

您在字符串中有斜杠，它们被解释为文字。从字符串中删除它们，或者使用它们来创建正则表达式 "^\d+" 或 /^\d+/

# extjs3 - EXTJS Combobox：在下拉列表中仅显示每个组合选择的 NONselected 值

> ID：15965617
> 
> 赞同：1
> 
> 时间：2013-04-12T07:34:48.383
> 
> 标签：extjs3

我在 gridcolumn 中有一个组合框，要求是在下拉列表中仅显示未选择的值以供下一个组合选择

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T21:58:28.507

一种可能性是使用[superselectbox](http://technomedia.co.uk/SuperBoxSelect/examples3.html)。如果你想自定义标准的组合框，你可以看一下超级选择框的源代码——它实际上是扩展的组合框。

# c# - 在运行时将对象转换为另一个类，但能够在运行前使用该成员

> ID：15965619
> 
> 赞同：0
> 
> 时间：2013-04-12T07:34:56.367
> 
> 标签：c#, object

用户可以选择使用三个连接。

1.  方镁石
2.  SQL 服务器
3.  MySQL

我目前有三种方法可以做同样的事情。我想做这样的事情

```
object obj;

if (connectionchosen == "Sqlite")
  obj = new SqlLiteConnection("connectiongstring);

if (connectionchosen == "MSSQL")
 ojb = new SqlConnection("connectionstring);

if (connectionchosen == "MySQL")
 obj = new MySqlConnection("connectionstring); 
```

显然，上述操作无法完成，因为除非正确转换/转换，否则 obj 无法看到 Sqlite / SQL Server / Mysql 成员。

如何使用上述 IF 将上述 obj 转换为三个之一并能够使用成员？

例子：

```
public static bool LOGIN(string USERNAME, string PASSWORD,GLOBALFUNCTIONS.DBS DB)
{
   try
   {
      bool val = false;
      OPENDB(DB);
      object cmd;

      if (DB == GLOBALFUNCTIONS.DBS.SQLLOCAL)
      {
         _CN.SQLLITECMD = new SQLiteCommand("select * from users where        username='" + USERNAME + "' and password='" + _GLOBAL.GLOBALFUNCTIONS.GETMD5(PASSWORD + USERNAME) + "'",_CN.SQLLITELOCAL);
         _CN.SQLLITEREADER = _CN.SQLLITECMD.ExecuteReader();

         if (_CN.SQLLITEREADER.Read())
         {
            val = true;
                            _GLOBAL.GLOBALFUNCTIONS.LOGIN(_CN.SQLLITEREADER[0].ToString(), val, _CN.SQLLITEREADER[2].ToString(), GLOBALVARS.DATABASE);
         }
         else
                            _GLOBAL.GLOBALFUNCTIONS.LOGIN(_CN.SQLLITEREADER[0].ToString(), val, _CN.SQLLITEREADER[2].ToString(), GLOBALVARS.DATABASE);
                        _GLOBAL.GLOBALFUNCTIONS.AUDIT(USERNAME, _CN.SQLLITECMD.CommandText, GLOBALVARS.DATABASE);
    }
    CLOSEDB(DB);
    return val;
}
catch (Exception)
{
   CLOSEDB(DB);
   return false;
} 
```

全部替换

```
_CN.SQLITECMD/_CN.SQLLITEREADER/_CN.SQLLITELOCAL 
```

和

```
_CN.MSSQLCMD/_CN.MSSQLREADER/_CN.MSSQLLOCAL 
```

相反，我希望对所有三个不同的连接简单地使用 CMD/READER/LOCAL。

我希望我足够清楚。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:43:23.917

通过基于接口的代码，[`IDbConnection`](http://msdn.microsoft.com/en-us/library/system.data.idbconnection.aspx)您可以抽象为具体的连接类型。

```
IDbConnection connection;

if (connectionchosen == "Sqlite")
  connection= new SqlLiteConnection("connectiongstring);

if (connectionchosen == "MSSQL")
  connection = new SqlConnection("connectionstring);

if (connectionchosen == "MySQL")
  connection = new MySqlConnection("connectionstring); 
```

要创建命令，您必须使用[`IDbConnection.CreateCommand`](http://msdn.microsoft.com/en-us/library/system.data.idbconnection.createcommand.aspx)根据连接类型创建正确类型命令的方法。然后，您将仅限于使用`IDbCommand`而不是更具体`SqlCommand`的`SQLiteCommand`等，这意味着您将无法访问提供商特定的功能。但如果您想对基础提供商不可知论，这就是要付出的代价。

[您可以在 ADO.NET DbProviderFactories](http://msdn.microsoft.com/en-us/library/wda6c36e.aspx)之上构建，而不是制作自己的工厂逻辑（如上所示）。这将允许您在实现中配置数据源`App.config`并避免使用任何提供程序特定的代码。

# c# - C# Outlook 按 ID、用户名或别名搜索地址

> ID：15965627
> 
> 赞同：2
> 
> 时间：2013-04-12T07:35:20.150
> 
> 标签：c#, get, outlook, connect

大家好，我需要一个解决方案来通过 ID、用户名或别名查找我的 GlobalAddressList 的联系人。

这是我的尝试，但仅用于按名称搜索：

```
AddressList gal = appl.Session.GetGlobalAddressList();
AddressEntry entry = gal.AddressEntries["xxxx"];
ExchangeUser ae = entry.GetExchangeUser(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:30:33.983

调用 Namespace.CreateRecipient、Recipient.Resolve，然后使用 Recipient.AddressEntry。

你是什​​么意思？EntryID（使用 Namespace.GetAddressEntryFromID）或其他一些 id，例如 SMTP 地址或 NT 帐户名？

# jsp - JSP：为每个请求/响应设置字符默认编码

> ID：15965634
> 
> 赞同：0
> 
> 时间：2013-04-12T07:35:43.250
> 
> 标签：jsp

有没有一种方法可以设置默认编码类型而无需显式调用

```
response.setCharacterEncoding("UTF-8");
request.setCharacterEncoding("UTF-8"); 
```

每个请求/响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:50:34.880

可以在 JSP 中设置内容类型：

```
<%@page language="java" contentType="text/html; charset=UTF-8"
  pageEncoding="UTF-8"%> 
```

在请求上设置编码是不常见的。它表明应用程序的其他地方存在缺陷。但是，如果您想显式地全局设置这些东西，请使用[Filter](http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html)。

# javascript - 抓住一个元素而不是全部

> ID：15965635
> 
> 赞同：0
> 
> 时间：2013-04-12T07:35:52.293
> 
> 标签：javascript, jquery

我的 html 中有独特`href='#cha'`的区域，每个区域的 cha 都是独特且不同的。我需要在我的 js 中点击区域，我已经有了这个独特的价值。valueRegionSelect 包含我在点击时的唯一值（它的变化取决于我的点击，例如 klu、chu、ada 等）。

html 部分与我的区域：

```
<div class="b-map">

    <div class="b-map__city"></div>

    <div class="b-map__item">
        <img class="mapImage" src="/images/map-light.png" width="701" height="408" border="0" usemap="#map" />

        <map name="map">
            <area shape="poly" coords="615,0,554,20,548,87,558," title="<?php echo isset($this->region['chu']) ? $this->region['chu']['r_name'] : "region name for  chu" ?>" href="#chu" />
            <area shape="poly" coords="47,237,63,237,67,246,48,248" title="<?php echo isset($this->region['klu']) ? $this->region['klu']['r_name'] : "region name for  klu" ?>" href="#klu" /> 
```

这一个抓住所有区域，但我只需要一个具有选定独特元素的区域：

```
$mapItem = $('.b-map__item area'); 
```

我在 js 中的相同函数中使用它：

```
coords = $mapItem.attr('coords').split(','), 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:40:08.420

如果您正在寻找`<area>`具有特定 的`href`，请使用属性选择器：

```
var valueRegionSelect = "cha";
$mapItem = $('.b-map__item').find('area[href="#' + valueRegionSelect + '"]'); 
```

[http://api.jquery.com/category/selectors/attribute-selectors/](http://api.jquery.com/category/selectors/attribute-selectors/)

( [http://api.jquery.com/attribute-equals-selector/](http://api.jquery.com/attribute-equals-selector/) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:42:15.953

如果我让你正确，那么这应该有效

```
var areaHref = ('#yourselectId').val();
$mapItem = $('.b-map__item').find('area[href="#'+areaHref+'"]'); ; 
```

# android - Android 2.3.3 Gingerbread 中的选项是什么，如 Android 4.0.4 ICECREAMSANDWICH 中的可访问性选项（“通过触摸探索”）

> ID：15965636
> 
> 赞同：0
> 
> 时间：2013-04-12T07:36:03.013
> 
> 标签：android

我想使用 Google 的 TALKBACK 应用程序进行无障碍访问，以便盲人可以访问它。我尝试在我的 android OS 4.0.4 IcecreamSandwich 和 2.3.3 Gingerbread 上使用它。

```
 Settings for 4.0 Icecreamsandwich are as follow:
         settings --> accessibility --> talkback - ON --> back --> Explore by touch - ON

   And Settings for 2.3.3 Gingerbread are as follow:
         settings --> accessibility - check --> talkback - check

  There is no option for "Explore by touch" in android 2.3.3 gingerbread.
   What is the alternative for "explore by touch" option in Android 2.3.3 Gingerbread ? 
```

我在 Google 群组[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/bqsP6Hbs5kE上问过同样的问题](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/bqsP6Hbs5kE)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T09:39:56.577

Gingerbread 中没有类似的“通过触摸探索”。它是与冰淇淋三明治一起推出的。

在 ICS 之前，Talkback 只能说出可聚焦的观点。

更多信息可以在[http://www.apps4android.org/?p=3628](http://www.apps4android.org/?p=3628)和[http://developer.android.com/guide/topics/ui/accessibility/apps.html](http://developer.android.com/guide/topics/ui/accessibility/apps.html)找到。

[Android 2.3.3 touch by explore](https://stackoverflow.com/questions/14296612/android-2-3-3-touch-by-explore/14988769#14988769)的答案表明 Eyes-Free 项目中的[AccessibilityShim](http://code.google.com/p/eyes-free/source/browse/trunk/libraries/widgets/access-shim/src/com/googlecode/eyesfree/widget/AccessibilityShim.java)库可用于在您的应用中实现通过触摸进行探索的功能。

# android - 在不同活动之间共享数据库

> ID：15965638
> 
> 赞同：0
> 
> 时间：2013-04-12T07:36:09.867
> 
> 标签：android, android-sqlite

我正在编写一个程序，它需要活动 A 将数据写入数据库，而活动 B 从数据库中读取数据。我将 SQLiteOpenHelper 类扩展为 DatabaseHelper，并以这种方式在 Activity A 中获取我的数据库：

```
SQLiteOpenHelper dbHelper = new DatabaseHelper(this, "classtableDatabase", null, 1);
SQLiteDatabase db = dbHelper.getWritableDatabase(); 
```

它在 Activity 中运行良好。当我尝试以相同的方式打开由 Activity A 在 Activity B 中创建的数据库时，它失败了，并且我收到以下错误消息：

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{cn.square2.iscut/cn.square2.iscut.ClassTableDetails}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1891)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
at android.app.ActivityThread.access$600(ActivityThread.java:127)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4441)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:231)
at cn.square2.iscut.ClassTableDetails.<init>(ClassTableDetails.java:28)
at java.lang.Class.newInstanceImpl(Native Method)
at java.lang.Class.newInstance(Class.java:1319)
at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1882)
... 11 more 
```

我应该怎么做才能解决这个问题？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T05:24:58.873

我有同样的问题。您不需要做任何事情，只需从您的活动以外的`MAIN`活动中对数据库进行静态引用。

# javascript - 如何使用 JavaScript 更改正在运行的网站内容？

> ID：15965644
> 
> 赞同：0
> 
> 时间：2013-04-12T07:36:30.343
> 
> 标签：javascript, dom, dom-events, runtime

假设，任何站点中都有许多复选框并且它们未被选中。站点可在任何服务器上运行。我没有网站代码。我想检查其中一些复选框。要查找复选框，`value`我`<td>` 可以使用 JavaScript 执行此操作吗？如何在该站点代码中运行 JavaScript 代码？我的目标是将复选框显示为“已选中”。

```
<tr>
            <td id ="id1" name"name1">value1</td>
            <td><input id="checkid1" name="checkname1" type="checkbox" value="false"></td>
</tr>
<tr>
            <td id ="id2" name"name2">value2</td>
            <td><input id="checkid2" name="checkname2" type="checkbox" value="false"></td>
</tr>
<tr>
            <td id ="id3" name"name3">value3</td>
            <td><input id="checkid3" name="checkname3" type="checkbox" value="false"></td>
</tr> 
```

如果可能，我想输入**value1**、**value2**和 JavaScript 将勾选相关复选框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:39:39.957

您可以使用 JQuery 来实现这一点。检查是否选中了复选框，然后为所需的其他复选框设置选中的 true。

[http://jquery-howto.blogspot.be/2008/12/how-to-check-if-checkbox-is-checked.html](http://jquery-howto.blogspot.be/2008/12/how-to-check-if-checkbox-is-checked.html)

要按值搜索，您可以执行以下操作：

```
$("input:checkbox[value=val]").attr("checked", true); 
```

# python - 将html表单值发布到python脚本

> ID：15965646
> 
> 赞同：19
> 
> 时间：2013-04-12T07:36:38.437
> 
> 标签：python, html, cgi

我创建了带有文本框和按钮的 html 表单

输入您的搜索关键字

我的要求是将文本框值传递给我的 test.py 代码，有什么办法吗？请建议我怎么做。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-12T07:42:13.690

在表单 action`form action=""`中，输入 cgi 脚本的位置，文本框的值将传递给 cgi 脚本。例如。

```
<form name="search" action="/cgi-bin/test.py" method="get">
Search: <input type="text" name="searchbox">
<input type="submit" value="Submit">
</form> 
```

在你的 test.py

```
import cgi
form = cgi.FieldStorage()
searchterm =  form.getvalue('searchbox') 
```

因此，您将在 python 的 searchterm 变量的搜索文本框中输入关键字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-17T19:05:17.840

我在浏览器中获取代码时遇到了问题。安装了python和xampp。我将 .py 脚本放在 cgi-bin 中，然后从这样的 html 页面调用它

```
<form name="input" action="../cgi-bin/name_of_script.py" method="get"> 
```

将html页面放在xampp的htdocs中。在 httd.conf 中找到该行

```
AddHandler cgi-script .cgi .pl .asp 
```

并将其更改为

```
AddHandler cgi-script .cgi .pl .asp .py 
```

在脚本中添加您拥有的 python 版本，例如我添加的

```
#!C:\Python27\python.exe 
```

因为我已经在上面的目录中安装了python27。

此外，如果您在 python 中打印某些内容，请将此行放在脚本的顶部

```
print "Content-Type: text/html; charset=utf-8\n\n"; 
```

上面的搜索框脚本对我来说效果很好。我的操作系统是 Windows 真的让我很震惊，我搜索并搜索了上述解决方案。

# html - IE10 / Windows 8 奇怪的轮廓和所有元素的框阴影效果

> ID：15965647
> 
> 赞同：5
> 
> 时间：2013-04-12T07:36:38.623
> 
> 标签：html, css, windows-8, internet-explorer-10

如果有人可以帮助解决这个问题，那就太好了。我在 IE10/Win8 上遇到了奇怪的渲染问题。在包括 IE10/Win7 在内的所有其他浏览器中一切正常，但 IE10/Win8 在选择或悬停在所有元素上时会显示奇怪的轮廓或框阴影。

我尝试将所有元素设置`(*)`为`outline:none`或`outline:transparent`设置`*:active, *:focus, *:hover`无济于事。我也禁用了过渡，但效果仍然出现。我将 Twitter Bootstrap 与其他自定义样式一起使用。所有的转换都是通过 Bootstrap 进行的。

IE10 不支持条件语句，因此我运行以下脚本将 ie10 类添加到 html 并添加特定于 IE10 的样式。

```
$(document).ready(function(){

    if( ($.browser.msie) && ($.browser.version == "10.0") ){
        $('html').addClass('ie10');
    }

}); 
```

还是不行。我附上了我面临的问题的屏幕截图（仅限 IE10 / Win 8）。

![背景图像上的伪影](https://i.stack.imgur.com/2Za80.jpg)

![h3 标签上的边框或轮廓](https://i.stack.imgur.com/5KuYU.png)

![单击输入框会导致奇怪的阴影/轮廓过渡](https://i.stack.imgur.com/uV0li.png)

![锚标签/按钮也有一个奇怪的轮廓](https://i.stack.imgur.com/v1lBA.png)

以下是文本框的一些示例代码：

**HTML**

```
<div class="input-placeholder">
    <input autofocus="autofocus" class="input-medium" id="user_full_name" name="user[full_name]" size="30" tabindex="1" type="text" value="Sagar Patil">
    <a href="#" class="error-msg hide" rel="popover" data-placement="right" data-content="" tabindex="104" data-original-title=""></a>
</div> 
```

**CSS**

```
.input-placeholder {
position: relative;
}

#profile .input-medium, #local-testing .input-medium {
width: 344px;
color: #a16d1d;
padding: 10px 13px;
-webkit-border-radius: 3px;
-moz-border-radius: 3px;
-ms-border-radius: 3px;
-o-border-radius: 3px;
border-radius: 3px;
} 
```

*引导样式*

```
textarea, input[type="text"], input[type="password"], input[type="datetime"], input[type="datetime-local"], input[type="date"], input[type="month"], input[type="time"], input[type="week"], input[type="number"], input[type="email"], input[type="url"], input[type="search"], input[type="tel"], input[type="color"], .uneditable-input {
background: #fdf7ed;
-webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,0.075);
-moz-box-shadow: inset 0 1px 1px rgba(0,0,0,0.075);
-ms-box-shadow: inset 0 1px 1px rgba(0,0,0,0.075);
-o-box-shadow: inset 0 1px 1px rgba(0,0,0,0.075);
box-shadow: inset 0 1px 1px rgba(0,0,0,0.075);
-webkit-transition: border linear .2s,box-shadow linear .2s;
-moz-transition: border linear .2s,box-shadow linear .2s;
-ms-transition: border linear .2s,box-shadow linear .2s;
-o-transition: border linear .2s,box-shadow linear .2s;
transition: border linear .2s,box-shadow linear .2s;
}

select, textarea, input[type="text"], input[type="password"], input[type="datetime"], input[type="datetime-local"], input[type="date"], input[type="month"], input[type="time"], input[type="week"], input[type="number"], input[type="email"], input[type="url"], input[type="search"], input[type="tel"], input[type="color"], .uneditable-input {
display: inline-block;
height: 20px;
padding: 13px;
margin-bottom: 13px;
font-size: 18px;
line-height: 20px;
border: 1px solid #a4875d;
color: #a16d1d;
-webkit-border-radius: 6px;
-moz-border-radius: 6px;
-ms-border-radius: 6px;
-o-border-radius: 6px;
border-radius: 6px;
} 
```

以下是绿色按钮的样式：

**HTML**

```
<div class="col3 pull-right">
    <a href="#" class="plan_choose btn btn-modal-plan btn-upgrade" data-planinfo="Power Corporate|$350|50 users||45" data-product-type="live_testing" id="plan_45">Upgrade</a>
</div> 
```

**CSS**

```
.plans div[class*="col"] {
float: left;
}

.plans .col3 {
width: 94px;
}

.btn-upgrade, .btn-repurchase, .modal-body .btn-upgrade, .modal-body .btn-repurchase {
color: #fff;
text-shadow: 0 1px 0 rgba(0,0,0,0.25);
background-color: #719a49;
background-image: -moz-linear-gradient(top,#719a49,#4d6a31);
background-image: -webkit-gradient(linear,0 0,0 100%,from(#719a49),to(#4d6a31));
background-image: -webkit-linear-gradient(top,#719a49,#4d6a31);
background-image: -o-linear-gradient(top,#719a49,#4d6a31);
background-image: -ms-linear-gradient(top,#719a49,#4d6a31);
background-image: linear-gradient(to bottom,#719a49,#4d6a31);
background-repeat: repeat-x;
border: 1px solid #344a1e;
-ms-filter: progid:dximagetransform.microsoft.gradient(startColorstr='#ff719a49',endColorstr='#ff4d6a31',GradientType=0);
} 
```

*引导样式*

```
.btn {
border-color: #c5c5c5;
border-color: rgba(0,0,0,0.15) rgba(0,0,0,0.15) rgba(0,0,0,0.25);
}

.btn-modal-plan {
display: inline-block;
vertical-align:middle;
width: 92px;
height: 27px;
line-height: 27px;
text-align: center;
font-size: 12px;
float: right;
padding: 0;
margin-top: 7px;
-webkit-border-radius: 6px;
-moz-border-radius: 6px;
-ms-border-radius: 6px;
-o-border-radius: 6px;
border-radius: 6px;
-webkit-box-shadow: inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);
-moz-box-shadow: inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);
-ms-box-shadow: inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);
-o-box-shadow: inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);
box-shadow: inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);
} 
```

任何帮助弄清楚发生了什么以及如何解决它将不胜感激。如果浏览器是 ie10，则已尝试所有方法，包括所有元素的状态重置`outline`和`border`样式。没运气。任何帮助将不胜感激。非常感谢。`transparent``none``active, focus and hover`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:46:06.973

我有一个[剧本，看看我能不能重现这个](http://jsfiddle.net/xVNGH/1/)。

突然想到的想法是 Internet Explorer 正在向锚点内的图像添加样式，因此您可以使用...

```
a img {
    border: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-16T15:48:00.627

这将解决它。

```
background-clip: padding-box; 
```

我在我的`.modal-content`引导类中发现了这个，这就是导致问题的原因。

删除此属性，您的所有问题都会消失。

# maven - Maven 没有将一些 JAR 复制到 WEB-INF/lib

> ID：15965650
> 
> 赞同：2
> 
> 时间：2013-04-12T07:37:06.257
> 
> 标签：maven, maven-war-plugin

我在 Eclipse 中使用 Maven 创建了一个 Web 项目。我需要该项目的 pentaho 库 jar，这是我的依赖项

```
<dependency>
    <groupId>pentaho-library</groupId>
    <artifactId>libbase</artifactId>
    <version>1.2.8</version>
    <optional>true</optional>
</dependency> 
```

当我运行`mvn:compile`or`mvn eclipse:eclipse`时，它正在下载`maven_repo`本地目录中的 JAR 文件我正在使用以下 war 插件

```
 <plugin>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.3</version>

        </plugin> 
```

问题是，当我运行`mvn war:war`创建 war 文件时，它没有将 libbase-1.2.8.jar 复制到 WEB-INF/lib 文件夹。但它正在复制所有其他 JAR 文件。问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:42:42.133

尝试删除`<optional>true</optional>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:47:00.443

[依赖机制简介：传递依赖](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Transitive_Dependencies)告诉我们以下`optional`内容：-

> **可选依赖项**- 如果项目 Y 依赖于项目 Z，项目 Y 的所有者可以**`optional dependency`**使用该**`"optional"`**元素将项目 Z 标记为 。
> 
> 当项目 X 依赖于项目 Y 时，X 将仅依赖于 Y，**而不依赖于 Y 的可选依赖项**Z。然后，项目 X 的​​所有者可以根据自己的选择显式添加对 Z 的依赖项。（***将可选依赖项视为“默认排除”可能会有所帮助。***）

那么这个`optional`依赖就不会被包含到我们的`WEB-INF/lib`.

我希望这可能会有所帮助。

# javascript - 使用 XMLHttpRequest 上传大文件时的进度条

> ID：15965651
> 
> 赞同：18
> 
> 时间：2013-04-12T07:37:06.380
> 
> 标签：javascript, jquery, file-upload, xmlhttprequest

我正在尝试使用 XMLHttpRequest 和 file.slice 将一些大文件上传到服务器。
我已经在文档和其他各种链接的帮助下做到了这一点。
由于上传大文件是一项漫长的工作，我想为用户提供一个进度条。
经过更多阅读后，我遇到了一个理论上的[示例](https://github.com/mailopl/html5-xhr2-chunked-file-upload-slice/blob/master/index.html)，该示例完全符合我的需要。
通过获取示例代码并使其适应我的需求，我达到了

```
var upload =
{
blobs: [],
pageName: '',
bytesPerChunk: 20 * 1024 * 1024,
currentChunk: 0,
loaded: 0,
total: 0,
file: null,
fileName: "",

uploadChunk: function (blob, fileName, fileType) {
    var xhr = new XMLHttpRequest();

    xhr.onreadystatechange = function () {
        if (xhr.readyState == 4) {
            if (xhr.responseText) {
                // alert(xhr.responseText);
            }
        }
    };

    xhr.addEventListener("load", function (evt) {
        $("#dvProgressPrcent").html("100%");
        $get('dvProgress').style.width = '100%';
    }, false);

    xhr.addEventListener("progress", function (evt) {
        if (evt.lengthComputable) {
            var progress = Math.ceil(((upload.loaded + evt.loaded) / upload.total) * 100);
            $("#dvProgressPrcent").html(progress + "%");
            $get('dvProgress').style.width = progress + '%';
        }
    }, false);

    xhr.upload.addEventListener("progress", function (evt) {
        if (evt.lengthComputable) {
            var progress = Math.ceil(((upload.loaded + evt.loaded) / upload.total) * 100);
            $("#dvProgressPrcent").html(progress + "%");
            $get('dvProgress').style.width = progress + '%';
        }
    }, false);

    xhr.open('POST', upload.pageName, false);

    xhr.setRequestHeader("Content-Type", "multipart/form-data");
    xhr.setRequestHeader("X-File-Name", fileName);
    xhr.setRequestHeader("X-File-Type", fileType);
    xhr.send(blob);
},
upload: function (file) {
    var start = 0;
    var end = 0;
    var size = file.size;

    var date = new Date();
    upload.fileName = date.format("dd.MM.yyyy_HH.mm.ss") + "_" + file.name;

    upload.loaded = 0;
    upload.total = file.size;

    while (start < size) {
        end = start + upload.bytesPerChunk;
        if (end > size) {
            end = size;
        }

        var blob = file.slice(start, end);
        upload.uploadChunk(blob, upload.fileName, file.type);
        start = end;
        upload.loaded += start;
    }

    return upload.fileName;
}
}; 
```

电话就像（没有验证）

```
upload.upload(document.getElementById("#upload").files[0]); 
```

我的问题是进度事件没有触发。
我已经为进度事件尝试了 xhr.addEventListener 和 xhr.upload.addEventListener （一次和一次），但它永远不会触发。onreadystatechange 和 load 事件触发就好了。

对于我做错的事情，我将不胜感激

**更新**
经过多次尝试，我设法模拟了一个进度，但我遇到了另一个问题：Chrome 的 UI 在上传期间没有更新。
代码现在看起来像这样

```
var upload =
{
    pageName: '',
    bytesPerChunk: 20 * 1024 * 1024,
    loaded: 0,
    total: 0,
    file: null,
    fileName: "",

    uploadFile: function () {
        var size = upload.file.size;

        if (upload.loaded > size) return;

        var end = upload.loaded + upload.bytesPerChunk;
        if (end > size) { end = size; }

        var blob = upload.file.slice(upload.loaded, end);

        var xhr = new XMLHttpRequest();

        xhr.open('POST', upload.pageName, false);

        xhr.setRequestHeader("Content-Type", "multipart/form-data");
        xhr.setRequestHeader("X-File-Name", upload.fileName);
        xhr.setRequestHeader("X-File-Type", upload.file.type);

        xhr.send(blob);

        upload.loaded += upload.bytesPerChunk;

        setTimeout(upload.updateProgress, 100);
        setTimeout(upload.uploadFile, 100);
    },
    upload: function (file) {
        upload.file = file;

        var date = new Date();
        upload.fileName = date.format("dd.MM.yyyy_HH.mm.ss") + "_" + file.name;

        upload.loaded = 0;
        upload.total = file.size;

        setTimeout(upload.uploadFile, 100);

        return upload.fileName;
    },
    updateProgress: function () {
        var progress = Math.ceil(((upload.loaded) / upload.total) * 100);
        if (progress > 100) progress = 100;

        $("#dvProgressPrcent").html(progress + "%");
        $get('dvProgress').style.width = progress + '%';
    }
}; 
```

**更新 2**
我已经设法修复它并模拟了一个在 chrome 中也可以工作的进度条。
我已经用有效的代码示例更新了之前的代码示例。
您可以通过减小一次上传的块的大小来更频繁地“刷新”栏 向您寻求帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T09:36:35.473

如[https://stackoverflow.com/a/3694435/460368](https://stackoverflow.com/a/3694435/460368)中所述，您可以这样做：

```
if(xhr.upload)
     xhr.upload.onprogress=upload.updateProgress; 
```

和

```
updateProgress: function updateProgress(evt) 
{
   if (evt.lengthComputable) {
       var progress = Math.ceil(((upload.loaded + evt.loaded) / upload.total) * 100);
       $("#dvProgressPrcent").html(progress + "%");
       $get('dvProgress').style.width = progress + '%';
   }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-16T18:05:18.167

有我的解决方案：

```
function addImages(id) {
  var files = $("#files").prop("files");
  var file = files[loopGallery];
  var cList = files.length;

  var fd = new FormData();
  fd.append("file", file);
  fd.append("galerie", id);

  var xhr = new XMLHttpRequest();
  xhr.open("POST", "moduls/galerie/uploadimages.php", true);
  xhr.upload.onprogress = function(e) {
    var percentComplete = Math.ceil((e.loaded / e.total) * 100);
    $("#progress").css("display","");
    $("#progressText").text((loopGallery+1)+" z "+cList);
    $("#progressBar").css("width",percentComplete+"%");
  };

  xhr.onload = function() {
    if(this.status == 200) {
      $("#progressObsah").load("moduls/galerie/showimages.php?ids="+id);
      if((loopGallery+1) == cList) {
        loopGallery = 0;
      } else {
        $("#progressBar").css("width", "0%");  
        loopGallery++;
        addImages(id);
      }
    }
  }

  if(cList > 0) {
    xhr.send(fd);
  }
} 
```

# lua - 电晕 addEventListener 问题

> ID：15965654
> 
> 赞同：0
> 
> 时间：2013-04-12T07:37:18.757
> 
> 标签：lua, coronasdk

```
local function composeConfession()
   print("composeConfession()") 
end 

function displyHomeScreen()
    local composeBtn=display.newImageRect("images/composeBtn.jpeg", 30, 30)
    composeBtn:addEventListerner("tap", composeConfession)
end 
```

我从 main 调用 displyHomeScreen() 因为它是全局的并创建了一个按钮，现在在其上分配了 composeConfession() 侦听器，它显示的错误是

错误：

文件：/Users/nashad/Desktop/JustInMind/homeScreen.lua 行：32

尝试调用方法“addEventListerner”（零值）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:39:10.523

它是 addEventListener 不是 addEventListerner

# spring - Bean 名称“contact”的 BindingResult 和普通目标对象都不能用作请求属性

> ID：15965660
> 
> 赞同：2
> 
> 时间：2013-04-12T07:37:46.877
> 
> 标签：spring, jsp, servlets, spring-mvc

我正在尝试使用 spring mvc +maven+ jpa hibernate 创建一个简单的项目。

我的jsp页面是：

```
<%@taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>

<div>
<form:form action="contact.html" method="post" commandName="contact" >

<div>
<label for="firstname">First Name</label>
<form:input path="firstname"/>
<form:errors path="firstname" cssClass="error"/>
</div>

<div>
<label for="lastname">Last Name</label>
<form:input path="lastname"/>
<form:errors path="lastname" cssClass="error"/>
</div>

<div>
<label for="telephone">Telephone</label>
<form:input path="telephone"/>
<form:errors path="telephone" cssClass="error"/>
</div>

<div>
<label for="email">Email</label>
<form:input path="email"/>
<form:errors path="email" cssClass="error"/>
</div>

<div>
<form:button name="submit" value="submit">Add Contact</form:button>
</div> 
```

我的contact.html控制器：

```
package com.corasent.contacts.controllers;

import javax.servlet.http.HttpServletRequest;

import org.springframework.beans.factory.annotation.Autowired;

import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;

import com.corasent.contacts.form.Contact;
import com.corasent.contacts.service.ContactService;

@Controller
@RequestMapping("contact.html")
public class ContactManagerController {

@Autowired
ContactService cs;

@RequestMapping(method = RequestMethod.GET)
public String contactController()
{
    System.out.println("In controller");
    ModelMap map=new ModelMap();
    Contact contact=new Contact();
    map.addAttribute("contact", contact);
    return "contacts";
}

@RequestMapping(method=RequestMethod.POST)
public ModelAndView getInfo(@ModelAttribute Contact contact, BindingResult result, HttpServletRequest req)
{
    ModelAndView mv=new ModelAndView("contacts");
    String name=contact.getFirstname();
    System.out.println("name is="+name);
    cs.validate(contact, result);
    if(result.hasErrors())
    {

        return mv ;
    }

    System.out.println("in post method");
    return mv;

}

public ContactService getCs() {
    return cs;
}

public void setCs(ContactService cs) {
    this.cs = cs;
} 
```

}

我知道 jsp 中的 commandName 是必须传递给控制器​​的 bean。在控制器中启动了相同的 bean，但似乎无法正常工作。它给了我上述错误。我也在粘贴stackTrace。

```
ERROR: org.springframework.web.servlet.tags.form.InputTag - Neither BindingResult nor     plain target object for bean name 'contact' available as request attribute
java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'contact' available as request attribute
at org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:141)
at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:179)
at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:199)
at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getName(AbstractDataBoundFormElementTag.java:165)
at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.autogenerateId(AbstractDataBoundFormElementTag.java:152)
at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.resolveId(AbstractDataBoundFormElementTag.java:143)
at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.writeDefaultAttributes(AbstractDataBoundFormElementTag.java:127)
at org.springframework.web.servlet.tags.form.AbstractHtmlElementTag.writeDefaultAttributes(AbstractHtmlElementTag.java:421)
at org.springframework.web.servlet.tags.form.InputTag.writeTagContent(InputTag.java:142)
at org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:103)
at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:80)
at org.apache.jsp.WEB_002dINF.views.jsp.contacts_jsp._jspx_meth_form_005finput_005f0(contacts_jsp.java:272)
at org.apache.jsp.WEB_002dINF.views.jsp.contacts_jsp._jspService(contacts_jsp.java:100)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1146)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
at java.lang.Thread.run(Thread.java:679)
12 Apr, 2013 12:36:53 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [jsp] in context with path [/contacts] threw     exception [An exception occurred processing JSP page /WEB-INF/views/jsp/contacts.jsp at line    10

7: 
8: <div>
9: <label for="firstname">First Name</label>
10: <form:input path="firstname"/>
11: <form:errors path="firstname" cssClass="error"/>
12: </div> 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T08:12:16.230

尝试：

```
@RequestMapping(method = RequestMethod.GET)
public String contactController(Model model)
{
    System.out.println("In controller");
    // ModelMap map=new ModelMap();
    Contact contact=new Contact();
    model.addAttribute("contact", contact);
    return "contacts";
} 
```

在您的代码中，您正在创建一个 ModelMap，但它没有用，因为在方法结束时被销毁。将模型作为参数传递，spring 稍后将使用它来填充您的 JSP。

你有一个例子[在这里](https://github.com/rstoyanchev/spring-mvc-31-demo/blob/master/src/main/java/org/springframework/samples/mvc31/crudcontroller/AccountController.java)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:38:12.253

尝试这样的事情：

```
@RequestMapping(method = RequestMethod.GET)
public ModelAndView contactController()
{
    System.out.println("In controller");
    // First attribute is view name, second model name and last model object
    return new ModelAndView("contacts","contact", new Contact());
} 
```

另外，在您的表格中，我将属性更改`commandName`为`modelAttribute`，我想我已经读过第一个已被弃用（在这里不要完全相信我）

# c - udp 套接字中接收缓冲区/队列的最大大小

> ID：15965662
> 
> 赞同：1
> 
> 时间：2013-04-12T07:37:59.660
> 
> 标签：c, windows, winapi, networking, udp

我开发了一个 udp 服务器/客户端应用程序，其中服务器有一个套接字，它可以连续接收来自 40 个客户端的数据。现在我想知道如果所有 40 个客户端同时发送数据会发生什么？根据我的理解，数据必须在接收缓冲区中排队，下次当我调用 recvfrom() 时，缓冲区中排队的数据会被接收，即我必须调用 recvfrom() 40 次才能接收所有 40 个客户端的数据，即使所有客户端同时发送数据。另外，我想知道40个客户端的所有数据都会在接收缓冲区中排队，还是部分数据也会被丢弃？另外，数据可以在接收缓冲区中排队的最大缓冲区大小是多少，在什么限制之后数据被丢弃？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:43:12.320

> 即使所有客户端同时发送数据，我也必须调用 recvfrom() 40 次才能接收所有 40 个客户端的数据。

换句话说，您是在询问网络堆栈是否可以组合单独的 UDP 数据报。答案是：不，它们将作为单独的数据报到达，需要单独调用`recvfrom()`.

> 另外，我想知道40个客户端的所有数据都会在接收缓冲区中排队，还是部分数据也会被丢弃？

UDP 不保证交付。数据包可以被丢弃在路由的任何地方：发送主机、路由上的任何设备以及接收主机。

> 另外，数据可以在接收缓冲区中排队的最大缓冲区大小是多少，在什么限制之后数据被丢弃？

这取决于操作系统，通常是可配置的。请记住，数据包可能在到达接收主机之前就被丢弃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T07:43:19.410

事实上，这一切都取决于您的操作系统套接字缓冲区的大小。在 linux 中，它相当容易配置，所以你可能需要做的就是谷歌如何为你的 Windows 系统更改它。

# ios - UITableViewCell 中的 UIButton 从 UITableView 窃取触摸

> ID：15965663
> 
> 赞同：10
> 
> 时间：2013-04-12T07:38:01.080
> 
> 标签：ios, uitableview, uibutton

我有一个与[此类](https://stackoverflow.com/questions/8379206/touch-on-uibutton-in-a-uitableviewcell-cannot-scroll-the-table)似的问题，但提供的答案并没有多大帮助。我有`UITableView`一些自定义`UITableViewCells`，这些单元格有一些嵌套的自定义`UIViews`，最后是一些 UIButtons。如上所述，问题是当我触摸我的按钮时，触摸事件不会填充`UITableView`并且它永远不会滚动。

这是一些代码（这只是最快的重现方式，不是我的实际代码）：

```
@interface ViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>

@property (strong, nonatomic) IBOutlet UITableView * tableView;

@end

@implementation ViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil])
    {
        self.tableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0,
                                                                       self.view.bounds.size.width,
                                                                       self.view.bounds.size.height)
                                                      style:UITableViewStylePlain];
        [self.view addSubview:self.tableView];
        self.tableView.delegate = self;
        self.tableView.dataSource = self;
    }
    return self;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell * cell = [[UITableViewCell alloc] init];
    UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.backgroundColor = [UIColor redColor];
    button.frame = CGRectMake(0, 0, 50, 44);
    [cell.contentView addSubview:button];
    return cell;
}

@end 
```

唯一单元格中的红色按钮不会让表格视图反弹滚动。

谁能帮我一点忙？

PS不要注意我提供的代码的愚蠢性，我知道有关它的所有问题。我只是提供它来显示问题的全部内容。`buttonView`这是和的冲突`scrollView`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-27T01:13:15.000

You can change the behaviour by overriding touchesShouldCancelInContentView: in the UITableView. For this to work you'll need to replace the table view with this subclass, either in loadView or in your xib file.

```
@interface AutoCancelTableView: UITableView
@end

@implementation AutoCancelTableView

//
// Overriding touchesShouldCanceInContentView changes the behaviour
// of button selection in a table view to act like cell selection -
// dragging while clicking a button will cancel the click and allow
// the scrolling to occur
//
- (BOOL)touchesShouldCancelInContentView:(UIView *)view {
    return YES;
}

@end 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-12T08:14:06.087

这是`UIScrollView`tableviews 使用的标准行为。在您移动手指之前，系统不知道您要滚动，但到那时您已经“按下”按钮，因此它假定这就是您想要做的。

您可以在 tableview 的滚动视图上使用几个属性来更改行为，但您可能会发现它们会对单元格和按钮的感觉产生负面影响，因为会增加延迟。

```
self.tableView.delaysContentTouches = YES; 
```

> **delaysContentTouches** If the value of this property is YES, the scroll view delays handling the touch-down gesture until it can determine if scrolling is the intent...

and

```
self.tableView.canCancelContentTouches = YES 
```

> **canCancelContentTouches** If the value of this property is YES and a view in the content has begun tracking a finger touching it, and if the user drags the finger enough to initiate a scroll, the view receives a touchesCancelled:withEvent: message and the scroll view handles the touch as a scroll.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-18T04:41:01.037

Because all the above answers not working for me. I add a imageView on the button and make the imageView user interface YES, then add a tap gesture on the iamgeView. In the tap gesture related methods I put the button related methods in. so all is well.. may be hack. But it work well..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T08:01:05.983

下面的代码对我有用：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
cell = [tableView dequeueReusableCellWithIdentifier:@"cell_id"];
cell.userInteractionEnabled = YES;
if (cell == nil) {
    cell = [[[CustomCell1 alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"cell_id"]autorelease];
}

[cell.button addTarget:self action:@selector(button_action) forControlEvents:UIControlEventTouchUpInside];}

-(void)button_action{NSLog(@"Hello!");} 
```

这是我的自定义单元格：

```
#import "CustomCell.h"
@implementation CustomCell
@synthesize button;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier{
self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
if (self) {
    button = [[UIButton alloc]init];
    button =[UIColor redColor];
    [self.contentView addSubview: button];
           }
return self;}

- (void)layoutSubviews {
[super layoutSubviews];
CGRect contentRect = self.contentView.bounds;
CGFloat boundsX = contentRect.origin.x;
CGRect frame;
frame= CGRectMake(boundsX+50 ,+15, 100, 100);
        button = frame;}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{   [super setSelected:selected animated:animated];
// Configure the view for the selected state
} 
```

# c# - 便携式图书馆的本地化

> ID：15965665
> 
> 赞同：1
> 
> 时间：2013-04-12T07:38:01.477
> 
> 标签：c#, windows-phone-7, localization, windows-store-apps, portable-class-library

我正在尝试在我的项目中使用 PL，现在我坚持使用本地化。我将我的 Resources 和 LocalizedStrings 移至 PL 项目。我的 LocalizedStrings 看起来像这样：

```
namespace Activity.Localization
{
  public class LocalizedStrings : INotifyPropertyChanged
  {
    public LocalizedStrings()
    {
    }

    private static Resources.AppResources localizedResources = new Resources.AppResources();

    public Resources.AppResources LocalizedResources { get { return localizedResources; } }

    public void ResetResources()
    {
        OnPropertyChanged("LocalizedResources");
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string name)
    {
        var handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(name));
        }
    }
  }
} 
```

并且资源位于 Resources 文件夹中（它是从 Windows phone 项目自动生成的）。

现在在我的视图中，我有这个按钮（Windows Phone 项目，MainPage.xaml）：

```
<controls:MenuButton x:Name="btnStartGame" 
                             Text="{Binding Path=LocalizedResources.btnStartGame, Source={StaticResource localization:LocalizedStrings}}" 
                             Tap="btnStartGame_Click"
                             Height="80" Width="400" 
                             FontSize="30" Margin="12"/> 
```

它编译并构建，但是当应用程序启动时出现异常：

```
Cannot find a Resource with the Name/Key localization:LocalizedStrings 
```

所以我想我必须做一些改变来获得可移植库的本地化，但是哪一个呢？我怎样才能改变它让它工作？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T08:13:06.567

您需要在 App.xaml 中添加您的 StaticResource：

[http://www.geekchamp.com/articles/localizing-a-windows-phone-app-step-by-step](http://www.geekchamp.com/articles/localizing-a-windows-phone-app-step-by-step)

# ios - CoreData 关系保存问题

> ID：15965667
> 
> 赞同：1
> 
> 时间：2013-04-12T07:38:18.833
> 
> 标签：ios, core-data

我在核心数据中有两个表，例如表 TA 和表 TB，TA 与 TB 具有一对多的关系。TA 中有一条记录 A1，我希望 TB 中有几条记录（B1，B2，..）映射到 for 循环中的 A1。在第一次迭代中，我查询 db 并获取 A1，调用 addTBObject:B1 并且没有保存上下文。在下一次迭代中，再次查询以获取 A1，但它返回 nil。（这么奇怪...）

如果我在第一次迭代中保存上下文，那么在下一次迭代中再次获得 A1 就可以了。但我不认为这是一种更好的做法，这会导致在一个 for 循环中执行许多保存操作。

有人可以帮忙吗？对此表示赞赏！

代码提取：

```
NSString* objBId = @"xxx";
for (int i=0; i< [dataArray count]; i++) {
    ObjA obj = [dataArray objectAtIndex:i];
    NSManagedObject* moObjA = [self getManagedObjAById:obj.objId inContext:context];
    if(moObjA)
    {
        NSManagedObject* moObjB = [self getManagedObjBById:objBId inContext:context];
        if (moObjB != nil)
        {
            [moObjB addAObject:moObjA];
            [self saveDB:context]; //if don't save here, moObjB will be nil in the next iteration...
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:08:45.510

似乎找到了解决这个问题的线索。在getManagedObjBById的实现中，每次都会发起NSFetchRequest，如果每次迭代都没有commit，则在下一次迭代中获取请求将返回nil。

在我将代码更改为使用 [NSFetchRequest fetchRequestWithEntityName:@"TabelB"] 后，一切就绪！for循环在每次迭代中总能得到托管对象B，无需再保存。

进一步看，这是否意味着某个实体的 NSFetchRequest 只能在提交之前初始化一次（一个事务）？

源代码：

```
NSFetchRequest* fetchRequest = [[NSFetchRequest alloc] init];
[fetchRequest setEntity:[NSEntityDescription entityForName:@"xxx" inManagedObjectContext:context]]; 
```

现在：

```
NSFetchRequest* request = [NSFetchRequest fetchRequestWithEntityName:@"xxx"]; 
```

# visual-studio-2010 - 在 UIMap.cs 中驱动的编码 UI 测试数据

> ID：15965671
> 
> 赞同：0
> 
> 时间：2013-04-12T07:38:28.073
> 
> 标签：visual-studio-2010, coded-ui-tests

我有很多codeuitest。每种测试方法都有共同的测试步骤。例如; this.UImap.navigatetourl(); 我已将它移到 UIMap.cs 中。因为我已经更改了 navigatetourl() 的代码。我想为不同的 url 运行相同的测试方法。我可以在 CodedUITest 中使用数据驱动测试，但我想在 UIMap.cs 中使用数据驱动测试。我能做些什么？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T06:23:04.220

使用您的 UIMap.NavigateToUrl() 方法并为您要访问的 URL 添加一个参数。在实际进行导航之前，使用该值在 UIMap 中设置适当的 *Params 属性。（我假设您记录了某种导航动作？）

在 CodedUI 测试中，从数据源中获取相关值并将其作为 URL 参数值传递给 UIMap.NavigateTo() 方法。

# c++ - 如何在 C++ OpenCv 中使用向量点？

> ID：15965674
> 
> 赞同：5
> 
> 时间：2013-04-12T07:38:30.490
> 
> 标签：c++, opencv

你们能帮我提供好的注释或链接吗？

例如：我需要创建一个向量并将这些 x,y 值转储到 Vector ..

```
Data { X , Y } = {1,1} , {1,2} , {1,3}, {2,1},{2,2},{2,3},{3,1},{3,2},{3,3} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-12T07:43:57.647

OpenCV 中的点向量只是包含[OpenCV 点](https://docs.opencv.org/2.4/modules/core/doc/basic_structures.html#point)对象的标准[C++ STL向量：](https://en.wikipedia.org/wiki/Standard_Template_Library)

```
std::vector<Point> data;
data.push_back(Point(1,1));
data.push_back(Point(1,2));
data.push_back(Point(1,3));
data.push_back(Point(2,1));
... 
```

或者，如果您使用[C++11](https://en.wikipedia.org/wiki/C%2B%2B11)或更高版本，您可以使用列表初始化：

```
std::vector<Point> data = {Point(1,1), Point(1,2), Point(1,3), Point(2,1)}; 
```

查看 STL Vector 的[C++ 参考](http://en.cppreference.com/w/cpp/container/vector)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T07:43:04.050

所以...您想使用向量来存储数据...其中每个元素都是一对`int`s？好吧，如果您不想创建自己的类型，请使用元组或对：

```
#include <vector>
#include <utility>

// ...

std::vector<std::pair<int, int> v;
// ...
v.push_back(std::make_pair(1, 1));
// ...
auto p = c[offset];
int x = p.first;
int y = p.second; 
```

# themes - Liferay 从 CE 版迁移到企业版：无法在控制面板中切换主题

> ID：15965675
> 
> 赞同：0
> 
> 时间：2013-04-12T07:38:35.230
> 
> 标签：themes, liferay, liferay-theme

我正在尝试使用 liferay EE 6.1.20 测试我的 liferay 主题。这个主题适用于我当前的 liferay 安装。我可以在 liferay EE 1.2.0 服务器上部署我的主题而不会出现任何错误。如果去控制面板并尝试将当前主题切换到我的主题 - 没有任何反应，我在我的页面上只看到 liferay 默认主题。我在服务器日志中没有发现任何错误 - 我无法发布任何日志或错误，因为我没有错误的输出......

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:21:53.413

我不希望两者之间有太多差异。然而，确保可以正确部署主题的最简单方法是使用匹配的 SDK（例如 6.1.20），将您的 _diffs 文件夹复制到该文件夹​​并编译主题。

确保 Liferay 的部署描述符`/WEB-INF/liferay-plugin-package.properties`明确说明主题与您的版本兼容，否则 Liferay 可能会认为它不兼容 - 这不是技术问题，而是配置问题。

还要检查 liferay-look-and-feel.xml - 那里可能还有一个兼容性字段，我不知道哪个优先。

之所以存在此设置，是因为主题是作为内置于 Liferay 的默认主题的不同而构建的 - 您基本上在此处说明您已检查该主题以实际使用的版本。您可以指定任意数量的版本，以及一些通配符（例如 6.1.20+）

# bash - AIX 特殊键

> ID：15965683
> 
> 赞同：1
> 
> 时间：2013-04-12T07:38:59.477
> 
> 标签：bash, centos, aix, vt100

我从 Centos 6 通过 ssh 连接到 AIX 5.3。AIX 和 Centos 上的外壳是 bash。当我在 shell 中按“Home”、“End”、“PgUp”、“PgDn”时，bash 输出波浪号（~）并且光标没有移动到字符串的结尾或开头。我怎样才能让这些按钮正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:57:14.233

尝试将其放入您的 Readline 初始化文件（默认`~/.inputrc`）：

```
"\e[5~": beginning-of-history
"\e[6~": end-of-history
"\e[7~": beginning-of-line
"\e[8~": end-of-line 
```

如果您想弄清楚键序列生成了哪些字符，一种方法是使用`od -c`，键入键序列，然后`Enter`，然后`Ctrl+D`。这样做`Home`对我来说是这样的：

```
$ od -c

0000000 033   [   7   ~  \n
0000005 
```

# macos - Mac OS X 的核心动画工具？

> ID：15965685
> 
> 赞同：3
> 
> 时间：2013-04-12T07:39:13.960
> 
> 标签：macos, core-animation, instruments

对于调整应用程序的性能，Core Animation Instrument 是 iOS 开发人员非常有用的工具。图层着色有助于快速找到潜在的瓶颈，获取 FPS 图也很有帮助。

不幸的是，该仪器似乎不适用于 Mac 应用程序。

是否有替代方案，或者我只是看起来不够努力（ Mark Dalrymple 的*Advanced Mac OS X Programming*确实提到了该仪器）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-26T08:55:51.423

一些工具可以在这里找到：

*   菜单 Xcode > 打开开发者工具 > 更多开发者工具……</li>
*   将打开 developer.apple.com，您必须登录
*   下载“Xcode 图形工具 - 2013 年 1 月”

然后使用“Quartz Debug”作为帧计。

还有一些用于调试 CALayers 的环境变量：

```
CA_COLOR_FLUSH, CA_COLOR_NO_WAIT, CA_COLOR_OPAQUE, CA_LOG_IMPLICIT_TRANSACTIONS, CA_LOG_IMAGE_COPIES, CA_COLOR_COPY, CA_PRINT_OBJECTS, CA_COLOR_OFFSCREEN 
```

遗憾的是，这些都没有记录，在这里你会找到一个列表： [http ://www.iphonedevwiki.net/index.php/QuartzCore.framework](http://www.iphonedevwiki.net/index.php/QuartzCore.framework)

# mysql - 如何编写 JPA 原生查询来连接两个表。Eclipseink JPA、Glassfish3.x、EJB3.1、MySQL

> ID：15965697
> 
> 赞同：0
> 
> 时间：2013-04-12T07:40:01.817
> 
> 标签：mysql, jpa-2.0, eclipselink, glassfish-3, nativequery

使用连接和 Eclipselink JPA2.0 实体编写 JPA 本机查询的正确方法是什么？

有人可以告诉我使用 Eclipselink JPA 本机查询或 JPQL 执行以下 SQL 查询吗？

SQL查询为：Select e.EmployeeName,e.EmpId, d.DeptId from Employee e, Department d join e.DeptId on d.DeptId where e.DeptId=d.DeptId

JPA 实体 bean 代码片段

```
@Entity
@Table(name = "employee")

@JoinColumn(name = "DeptId", referencedColumnName = "DeptId")
@ManyToOne
    private Department DeptId;

@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Employee.findAll", query = "SELECT e FROM Employee e")})

    //more auto generated named queries using NetBeans 
```

JPA 实体类“Employee”实现 java.io.Serializable 并且默认构造函数包含所有必需字段。

将 jpa 实体与 My-SQL 表映射的正确方法是什么

多对一关系：Employee.DeptId --> Department.DeptId Employee.RoleId --> JobRoles.RoleId

Employee.RoleId --> Skills.SkillId 两个表成功后我想加入三个表。

我正在阅读 Ecipselink 用户指南，但无法得到它。有人会为我提供代码片段或指导我更正资源。

我浏览了 EclipseLink JPA 在线指南：

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying) [查询 http://wiki.eclipse.org/EclipseLink/UserGuide/JPA](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA)

我正在使用本机查询，因为 Eclipse 链接 JPA 支持它并且 JPQL 不提供完整的可移植性。我编写并开发了一个示例 jsf-jpa 应用程序，其中 jpa 实体映射到单个表。使用 Netbeans IDE，生成和执行 JPQL 查询不需要太多时间。

我想使用本机查询和/或存储过程执行 JPA 实体。如果我可以在 SQL 查询和存储过程中使用我现有的技能，只要 JPA 实现不会带来太多问题，那将会更有效率。

**更新**：可以根据[JSR 317 的第 3.8.15 节 SQL 查询使用本机 SQL 查询：[JavaTM Persistence API，2.0 版][1]](http://download.oracle.com/otn-pub/jcp/persistence-2.0-fr-oth-JSpec/persistence-2_0-final-spec.pdf?AuthParam=1366282276_abf8b3a9d5be1e4f66a83ae56f20eb31) [http://download.oracle.com/otndocs/jcp/persistence-2.0-fr -其他-JSpec/](http://download.oracle.com/otndocs/jcp/persistence-2.0-fr-oth-JSpec/)

> SQL 查询工具旨在为必须使用正在使用的目标数据库的本机 SQL 的情况（和/或无法使用 Java Persistence 查询语言）的情况提供支持。本机 SQL 查询预计不能跨数据库移植

因此，我认为使用本机查询没有错，因为我不需要可移植性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:20:54.233

本机查询成功执行，JSR 317 规范的第 3.8.15 节有助于理解语法，除了命中和试验我的代码。

# python - 我有什么包裹？

> ID：15965699
> 
> 赞同：0
> 
> 时间：2013-04-12T07:40:15.760
> 
> 标签：python

**操作系统**Windows XP SP3

**情况**

我在我的机器上安装了三个 python exe。

1.  蟒蛇2.6
2.  蟒蛇 2.7
3.  Python EPD 已启用（用于 pylab）

**问题**

我安装了 wxPython，在选择中我决定将它安装到`Python in system registry`

我不知道这个包安装在哪个 python 上。

**我试过的**

我试着`import wx`在所有的shell上写，发现它被安装到了EPD python。

**更大的问题**

我不想每次安装软件包时都这样做。那么是否有可以在 shell 或任何其他方式中使用的命令，以便我可以了解所有已安装的软件包？

**请**帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:49:38.653

键入`help()`外壳。然后在帮助提示符类型`modules`中查看所有模块的完整列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T08:12:50.357

`sys.builtin_module_names`您可以使用和获得完整列表`pkgutil.walk_packages()`：

```
import pkgutil
import sys

print sys.builtin_module_names + [name for module_loader, name, ispkg in pkgutil.walk_packages()] 
```

的`modules`子命令`help()`在这些结果之上放置了一个更友好的界面。

# ubuntu - Bitnami：无法在 Ubuntu 服务器上安装 Nginx

> ID：15965703
> 
> 赞同：1
> 
> 时间：2013-04-12T07:41:04.790
> 
> 标签：ubuntu, nginx, bitnami, gitlab

我不是 Ubuntu 大师，我想快速开始[使用 GitLab](http://gitlab.org/)。获得[Bitnami GitLab VM](http://bitnami.com/stack/gitlab)后，我遇到了[问题](https://stackoverflow.com/questions/15757642/bitnami-gitlab-5-0-and-git-eclipse-egit-quick-start)，[无法配置 Apache2](https://stackoverflow.com/questions/15900937/bitnami-how-to-configure-gitlab-5-0-application-in-apache2-not-to-have-relative)。

现在想跟着[GitLab 5.0 安装](https://github.com/gitlabhq/gitlabhq/blob/5-0-stable/doc/install/installation.md#7-nginx)，安装 Nginx。然而运行

```
sudo apt-get install nginx 
```

返回：

> 包 nginx 不可用，但被另一个包引用。
> 
> 这可能意味着该软件包丢失、已过时或只能从其他来源获得。

请帮助我下一步该怎么做。

更新：组件列表在[README.txt中提到了](http://bitnami.com/stack/gitlab/README.txt)
[新版本的堆栈](http://bitnami.com/stack/gitlab/changelog.txt)，但尚未提供下载：
版本：5.0.1-0 2013-04-10 -> 我要尝试。

# android - 如何从android上的网站中提取元标记？

> ID：15965708
> 
> 赞同：1
> 
> 时间：2013-04-12T07:41:35.753
> 
> 标签：android, html, meta-tags

有没有一种智能的方法可以从 android 中的 URL 读取元标记的内容？我将在 android 的 webview 中显示一个网页，并想从里面的 metatag 中读取一些信息。是解析网页字符串找到特殊字符串“meta name="x-..." content="!!!”的唯一方法还是有更聪明的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-31T00:36:29.567

一个聪明的方法是使用[Jericho Library](http://jericho.htmlparser.net/docs/index.html)

假设你有一个这样的 html 文件

```
<html xmlns="http://www.w3.org/1999/xhtml" debug="true">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-1252"/>
<link href="styleUrgente.css" rel="stylesheet" type="text/css"/>
<meta name="viewport" content="width = 320, initial-scale = 1.0, user-scalable = no"/>
<meta name="joc-height" value="120"/>
<meta name="joc-enabled" value="1"/>
</head>
<body margin="0" marginheight="0" marginwidth="0" topmargin="0" leftmargin="0" rightmargin="0" bottommargin="0">
<script src="chrome-extension://bmagokdooijbeehmkpknfglimnifench/googleChrome.js"/>
</html> 
```

例如，要获取名称为“ `joc-height`”的元标记的值，您可以使用此方法：

```
public String extractAllText(String htmlText){
        Source source = new Source(htmlText);   
        String strData = "";        
        List<Element> elements = source.getAllElements("meta");

        for(Element element : elements )
        {
            final String id = element.getAttributeValue("name"); // Get Attribute 'id'
             if( id != null && id.equals("joc-height")){
                 strData = element.getAttributeValue("value").toString();    
                   }
        }
        return strData;
    } 
```

你会得到“ `120`”的值

# perl - 如何用完整的文件名分割perl中的路径？

> ID：15965709
> 
> 赞同：4
> 
> 时间：2013-04-12T07:41:40.217
> 
> 标签：perl, path, split

我想分道扬镳，谁能帮帮我？

我的输入是：

```
$getpath = "/u/project/path/file.name"; 
```

我想拆分`/u/project/path`一个变量和`file.name`另一个变量。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T07:51:17.137

[File::Basename](http://perldoc.perl.org/File/Basename.html)可以帮助您提取所需的信息（并且是核心模块的一部分）

```
 my($filename, $directories, $suffix) = fileparse($path); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-12T08:38:46.657

首先，有很多perl模块可以做你想做的，尝试在CPAN上搜索。其次，我建议使用 File::Spec 模块。例如：

```
use File::Spec;
($volume,$directories,$file) = File::Spec->splitpath( $path ); 
```

那么 $directories 将是“/u/project/path”，而 $file 将是“file.name”。

File::Spec 模块支持五种操作系统：Unix(Linux)、Mac、Win32、OS2、VMS。而且这个模块还提供了大量其他文件操作，如 catpath、updir、file_name_is_absolute 等。您无需在不同系统上更改代码。

参考：[文件::规范](http://metacpan.org/pod/File%3a%3aSpec)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T07:45:39.627

```
my($path, $file) = $getpath =~ m{(.+)/([^/]+)$}; 
```

也有很好的跨平台模块，请参阅[Path::Tiny](http://search.cpan.org/~dagolden/Path-Tiny-0.018/lib/Path/Tiny.pm)和[File::Spec](http://search.cpan.org/perldoc?File%3A%3ASpec)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-12T07:47:23.323

```
my $getpath = "/u/project/path/file.name";
my @arr=split /\//,$getpath;
my $filename=$arr[(scalar(@arr))-1]; #will give you the filename
my $path_no_filename= join "/",@arr[0..(scalar(@arr)-2)]; #will give everything except the filename 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-29T10:52:58.663

```
my $f = Mojo::File->new($getpath);
print($f->dirname, "::", $f->basename); 
```

快速测试：

```
> perl -Mojo -E 'my $f = f("/u/project/path/file.name"); say $f->dirname, "::", $f->basename' 
/u/project/path::file.name 
```

# java - 游戏结束后重新开始游戏

> ID：15965712
> 
> 赞同：0
> 
> 时间：2013-04-12T07:41:49.003
> 
> 标签：java, keylistener

在我制作的游戏中，我有一个显示你分数的游戏结束屏幕，现在我想让你按空格键重新启动游戏，这样你就不需要关闭程序并再次打开它来再次玩它。问题不在于如何在按下空格键时让游戏重新启动，而是如何让游戏重新启动。我试过这段代码：

```
if(key == KeyEvent.VK_SPACE && papi.isAlive() != true){ 
            remove(papi);
            papi.setSize(600,600);
            add(papi);
            setVisible(true);
            repaint();
        } 
```

为什么它不起作用？我试图制作一个包含游戏代码的类的精确副本，然后添加它而不是相同的类，这样就可以了。不幸的是，我不能一直这样做，因为我需要它能够根据图层的需要重新启动多次，而不仅仅是一次。

这是启动游戏的代码：

```
package Game;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Game extends JFrame implements KeyListener{
    private PAPITest papi;
    private JPanel panel;
    private boolean inMenu = true;
    private ImageIcon ii;
    private Image image;

    public Game(){
        addKeyListener(this);
        setFocusable(true);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setResizable(false);
        requestFocusInWindow();
        requestFocus();
        ii = new ImageIcon("Ball Jump.png");
        image = ii.getImage();
        papi = new PAPITest();
        panel = new JPanel();
        add(panel);
        setSize(600,600);
        setVisible(true);
    }

    public void paint(Graphics g){
        if(inMenu == true){
            Graphics2D g2D = (Graphics2D) panel.getGraphics();
            g2D.drawImage(image, 0, 0, this);
            repaint();
        }
    }

    public void keyPressed(KeyEvent e){
        requestFocusInWindow();
        requestFocus();
        int key = e.getKeyCode();
        if(key == e.VK_SPACE && inMenu == true){
            inMenu = false;
            remove(panel);
            papi.setSize(600,600);
            papi.setAlive(true);
            add(papi);            
            setVisible(true); 
        }

        if (key == KeyEvent.VK_SPACE && papi.isAlive() != true){ 
            remove(papi);
            papi.setSize(600,600);
            add(papi);
            setVisible(true);
            repaint();
        }
    }

    public void keyReleased(KeyEvent e){

    }

    public void keyTyped(KeyEvent e){

    }

    public static void main(String[] args){
        new Game();
    }
} 
```

这是游戏的代码： package Game;

```
import com.sun.j3d.utils.applet.MainFrame;
import com.sun.j3d.utils.geometry.*;
import com.sun.j3d.utils.universe.*;
import java.applet.Applet;
import java.awt.*;
import java.awt.event.*;
import javax.media.j3d.*;
import javax.swing.JLabel;
import javax.swing.Timer;
import javax.vecmath.*;

public class PAPITest extends Applet implements ActionListener,KeyListener{
    private TransformGroup objTrans,objTrans2, objTrans3, objTrans4, objTrans5, objTrans6, objTrans7;
    private Transform3D trans = new Transform3D();
    private BranchGroup objRoot = new BranchGroup();
    private BranchGroup objRoot2 = new BranchGroup();
    private BranchGroup objRoot3 = new BranchGroup();
    private BranchGroup objRoot4 = new BranchGroup();
    private BranchGroup objRoot5 = new BranchGroup();
    private BranchGroup objRoot6 = new BranchGroup();
    private BranchGroup objRoot7 = new BranchGroup();
    private SimpleUniverse u;
    private Canvas3D c;
    private BranchGroup scene, scene2, scene3, scene4, scene5, scene6, scene7;
    private Sphere sphere, sphere2, sphere3, sphere4, sphere5, sphere6, sphere7;
    private float height = 0.0f, sign = 1.0f, xloc = 0.0f;
    private float height2 = 0.0f, sign2 = -1.0f;
    private float rightX, right, rightDx, leftX, left, leftDx, rightX2, leftX2;
    private boolean isAlive = true;
    private JLabel scoreLabel;
    private int score = -400;
    private Timer timer;
    public int sumScore;

    public boolean isAlive(){
        return isAlive;
    }

    public void setAlive(boolean isAlive){
        this.isAlive = isAlive;
    }

    public BranchGroup createSceneGraph(){
        Color3f ambientColourRSphere = new Color3f(0.6f,0.0f,0.0f);
        Color3f emissiveColourRSphere = new Color3f(0.0f,0.0f,0.0f);
        Color3f diffuseColourRSphere = new Color3f(0.8f,0.0f,0.4f);
        Color3f specularColourRSphere = new Color3f(0.3f,0.0f,0.0f);
        float shininessRSphere = 20.0f;
        Appearance redSphereApp = new Appearance();
        redSphereApp.setMaterial(new Material(ambientColourRSphere,emissiveColourRSphere,
                             diffuseColourRSphere,specularColourRSphere,shininessRSphere));
        objRoot.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans = new TransformGroup();
        objTrans.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot.addChild(objTrans);
        sphere = new Sphere(0.15f,redSphereApp);
        objTrans = new TransformGroup();
        objTrans.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans.setTransform(pos1);
        objTrans.addChild(sphere);
        objRoot.addChild(objTrans);
        BoundingSphere bounds = new BoundingSphere
                (new Point3d(0.0,0.0,0.0),100.0);
        Color3f light1Color = new Color3f(0.2f,0.2f,1.0f);
        Vector3f light1Direction = new Vector3f(+4.0f,-7.0f,-12.0f);
        DirectionalLight light1 = new DirectionalLight
                (light1Color,light1Direction);
        light1.setInfluencingBounds(bounds);
        objRoot.addChild(light1);
        Color3f ambientColor = new Color3f(1.0f,1.0f,1.0f);
        AmbientLight ambientLightNode = new AmbientLight(ambientColor);
        ambientLightNode.setInfluencingBounds(bounds);
        objRoot.addChild(ambientLightNode); 
        Color3f bgColor = new Color3f(0.0f, 0.2f, 1.0f);
        Background bg = new Background(bgColor);
        bg.setApplicationBounds(bounds);
        objRoot.addChild(bg);
        return objRoot;
    }

    public BranchGroup createSceneGraph2(){
        objRoot2.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans2 = new TransformGroup();
        objTrans2.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot2.addChild(objTrans2);
        sphere2 = new Sphere(0.18f);
        objTrans2 = new TransformGroup();
        objTrans2.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans2.setTransform(pos1);
        objTrans2.addChild(sphere2);
        objRoot2.addChild(objTrans2);
        return objRoot2;
    }

    public BranchGroup createSceneGraph3(){
        objRoot3.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans3 = new TransformGroup();
        objTrans3.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot3.addChild(objTrans3);
        sphere3 = new Sphere(0.18f);
        objTrans3 = new TransformGroup();
        objTrans3.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans3.setTransform(pos1);
        objTrans3.addChild(sphere3);
        objRoot3.addChild(objTrans3);
        return objRoot3;
    }

    public BranchGroup createSceneGraph4(){
        objRoot4.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans4 = new TransformGroup();
        objTrans4.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot4.addChild(objTrans4);
        sphere4 = new Sphere(0.45f);
        objTrans4 = new TransformGroup();
        objTrans4.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans4.setTransform(pos1);
        objTrans4.addChild(sphere4);
        objRoot4.addChild(objTrans4);
        return objRoot4;
    }

    public BranchGroup createSceneGraph5(){
        objRoot5.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans5 = new TransformGroup();
        objTrans5.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot5.addChild(objTrans5);
        sphere5 = new Sphere(0.45f);
        objTrans5 = new TransformGroup();
        objTrans5.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans5.setTransform(pos1);
        objTrans5.addChild(sphere5);
        objRoot5.addChild(objTrans5);
        return objRoot5;
    }

    public BranchGroup createSceneGraph6(){
        objRoot6.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans6 = new TransformGroup();
        objTrans6.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot6.addChild(objTrans6);
        sphere6 = new Sphere(0.18f);
        objTrans6 = new TransformGroup();
        objTrans6.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans6.setTransform(pos1);
        objTrans6.addChild(sphere6);
        objRoot6.addChild(objTrans6);
        return objRoot6;
    }

    public BranchGroup createSceneGraph7(){
        objRoot7.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans7 = new TransformGroup();
        objTrans7.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot7.addChild(objTrans7);
        sphere7 = new Sphere(0.18f);
        objTrans7 = new TransformGroup();
        objTrans7.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans7.setTransform(pos1);
        objTrans7.addChild(sphere7);
        objRoot7.addChild(objTrans7);
        return objRoot7;
    }

    public PAPITest(){
        setFocusable(true);
        setLayout(new BorderLayout());
        setVisible(true);
        setSize(505,525);
        GraphicsConfiguration config = SimpleUniverse.getPreferredConfiguration();
        c = new Canvas3D(config);
        Color color = new Color(0.0f, 0.2f, 1.0f);
        setBackground(color);
        setSize(600,600);
        Font font = new Font("Helvatica",Font.BOLD,18);
        scoreLabel = new JLabel("Score: " + score);
        add("Center",c);
        c.addKeyListener(this);
        c.setSize(600,600);
        timer = new Timer(100,this);
        timer.start();
        scene = createSceneGraph();
        scene2 = createSceneGraph2();
        scene3 = createSceneGraph3();
        scene4 = createSceneGraph4();
        scene5 = createSceneGraph5();
        scene6 = createSceneGraph6();
        scene7 = createSceneGraph7();
        u = new SimpleUniverse(c);
        u.getViewingPlatform().setNominalViewingTransform();
        u.addBranchGraph(scene);
        u.addBranchGraph(scene2);
        u.addBranchGraph(scene3);
        u.addBranchGraph(scene4);
        u.addBranchGraph(scene5);
        u.addBranchGraph(scene6);
        u.addBranchGraph(scene7);
        rightX = 2.5f;
        right = 4.0f;
        float randomSpawn = (float) Math.random() * -2.7f + -3.1f;
        float randomSpawn2 = (float) Math.random() * -5.7f + -15.1f;
        float randomSpawn3 = (float) Math.random() * 5.7f + 18.1f;
        leftX = randomSpawn;
        left = randomSpawn;
        rightX2 = randomSpawn3;
        leftX2 = randomSpawn2;
        rightDx = -.05f;
        leftDx = .05f;  
    }

    public void keyPressed(KeyEvent e){
        if(e.getKeyChar() == 'd'|e.getKeyChar() == 'D'|e.getKeyCode() == e.VK_RIGHT){
            xloc = xloc + .1f;
        }

        if(e.getKeyChar() == 'a'|e.getKeyChar() == 'A'|e.getKeyCode() == e.VK_LEFT){
            xloc = xloc - .1f;
        }
    }    

    public void keyReleased(KeyEvent e){

    }

    public void keyTyped(KeyEvent e){

    }

    public void actionPerformed(ActionEvent e){
        height += .1f * sign;
        if(Math.abs(height * 2) >= 1)
            sign = -1.0f * sign;
        height2 += .1f * sign2;
        if(Math.abs(height2 * 2) >= 1)
            sign2 = -1.0f * sign2;
        Vector3d vec;
        int thing = 1;
        int thing2 = 2;
        if(height < -.4f){
          vec = new Vector3d(1.0,.8,1.0);
        }else{
          vec = new Vector3d(1.0,1.0,1.0);
          thing = 2;
        }
        trans.setScale(vec);
        trans.setTranslation(new Vector3f(xloc,height - .15f,0.0f));
        objTrans.setTransform(trans);
        if(height < -.10f){
          vec = new Vector3d(1.0,1.0,1.0);
          thing2 = 1;
        }
        if(height < -.4f){
          trans.setScale(new Vector3d(1.0,1.0,1.0));
        }
        if(score >= 1000){
            rightDx = -.06f;
            leftDx = .06f; 
        }
        if(score >= 2000){
            rightDx = -.07f;
            leftDx = .07f; 
        }
        if(score >= 4000){
            rightDx = -.08f;
            leftDx = .08f; 
        }
        if(score >= 5000){
            rightDx = -.1f;
            leftDx = .1f; 
        }
        if(score >= 10000){
            rightDx = -.2f;
            leftDx = .2f; 
        }
        if(score >= 15000){
            rightDx = -.3f;
            leftDx = .3f; 
        }
        Vector3f vector = new Vector3f(rightX += rightDx,-.7f,0.0f);
        trans.setTranslation(vector);
        objTrans2.setTransform(trans);
        Vector3f vector2 = new Vector3f(leftX += leftDx,-.7f,0.0f);
        trans.setTranslation(vector2);
        objTrans3.setTransform(trans);
        Vector3f vector3 = new Vector3f(rightX2 += rightDx,-.4f,0.0f);
        trans.setTranslation(vector3);
        objTrans4.setTransform(trans);
        Vector3f vector4 = new Vector3f(leftX2 += leftDx,-.4f,0.0f);
        trans.setTranslation(vector4);
        objTrans5.setTransform(trans);
        Vector3f vector5 = new Vector3f(right += rightDx,-.7f,0.0f);
        trans.setTranslation(vector5);
        objTrans6.setTransform(trans);
        Vector3f vector6 = new Vector3f(left += leftDx,-.7f,0.0f);
        trans.setTranslation(vector6);
        objTrans7.setTransform(trans);
        float leftXDistance = vector2.x - xloc - .22f;
        float xDistance = vector.x - xloc + .22f;
        float yDistance = -.7f - height;
        float xDistance2 = vector3.x - xloc - .05f;
        float yDistance2 = -.4f - height + .22f;
        float xDistance3 = vector5.x - xloc + .22f;
        float leftXDistance2 = vector4.x - xloc + .05f;
        float leftXDistance3 = vector6.x - xloc - .22f;
        double distance = Math.sqrt((xDistance * xDistance) + (yDistance * yDistance));
        double distance2 = Math.sqrt((xDistance2 * xDistance2) + (yDistance2 * yDistance2));
        double distance3 = Math.sqrt((xDistance3 * xDistance3) + (yDistance * yDistance));
        double leftDistance = Math.sqrt((leftXDistance * leftXDistance) + (yDistance * yDistance));
        double leftDistance2 = Math.sqrt((leftXDistance2 * leftXDistance2) + (yDistance2 * yDistance2));
        double leftDistance3 = Math.sqrt((leftXDistance3 * leftXDistance3) + (yDistance2 * yDistance2));
        if(distance < vec.x / 2 + .09f){
            if(thing == 2){
                score += 100;
                scoreLabel.setText("Score: " + score);
                float randomSpawn = (float) Math.random() * 2.5f + 3.1f;
                rightX = randomSpawn;
                trans.setTranslation(vector);
                objTrans2.setTransform(trans);
            }
            if(thing == 1){
                score -= 100;
                objRoot.detach();
                isAlive = false;
            }
        }
        if(distance3 < vec.x / 2 + .09f){
            if(thing == 2){
                score += 100;
                scoreLabel.setText("Score: " + score);
                float randomSpawn = (float) Math.random() * 2.5f + 3.1f;
                right = randomSpawn;
                trans.setTranslation(vector5);
                objTrans6.setTransform(trans);
            }
            if(thing == 1){
                score -= 100;
                objRoot.detach();
                isAlive = false;
            }
        }
        if(distance2 < vec.x / 2 + .09f){
            if(thing2 == 2){
                score += 200;
                scoreLabel.setText("Score: " + score);
                float randomSpawn = (float) Math.random() * 4.1f + 20.9f;
                rightX2 = randomSpawn;
                trans.setTranslation(vector3);
                objTrans4.setTransform(trans);
            }
            if(thing2 == 1){
                score -= 200;
                objRoot.detach();
                isAlive = false;
            }
        }
        if(leftDistance < vec.x / 2 + .09f){
            if(thing == 2){
                score += 100;
                scoreLabel.setText("Score: " + score);
                float randomSpawn = (float) Math.random() * -1.5f + -2.7f;
                leftX = randomSpawn;
                trans.setTranslation(vector2);
                objTrans3.setTransform(trans);
            }
            if(thing == 1){
                score -= 100;
                objRoot.detach();
                isAlive = false;
            }
        }
        if(leftDistance3 < vec.x / 2 + .09f){
            if(thing == 2){
                score += 100;
                scoreLabel.setText("Score: " + score);
                float randomSpawn = (float) Math.random() * -1.5f + -2.7f;
                left = randomSpawn;
                trans.setTranslation(vector6);
                objTrans7.setTransform(trans);
            }
            if(thing == 1){
                score -= 100;
                objRoot.detach();
                isAlive = false;
            }
        }
        if(leftDistance2 < vec.x / 2 + .09f){
            if(thing2 == 2){
                score += 200;
                scoreLabel.setText("Score: " + score);
                float randomSpawn = (float) Math.random() * -3.1f + -17.9f;
                leftX2 = randomSpawn;
                trans.setTranslation(vector4);
                objTrans5.setTransform(trans);
            }
            if(thing2 == 1){
                score -= 200;
                objRoot.detach();
                isAlive = false;
            }
        }
        if(rightX < -1.5f){
            float randomSpawn = (float) Math.random() * 1.5f + 2.1f;
            rightX = randomSpawn;
            trans.setTranslation(vector);
            objTrans2.setTransform(trans);
        }
        if(leftX > 1.5f){
            float randomSpawn = (float) Math.random() * -1.5f + -2.1f;
            leftX = randomSpawn;
            trans.setTranslation(vector2);
            objTrans3.setTransform(trans);
        }
        if(right < -1.5f){
            float randomSpawn = (float) Math.random() * 1.5f + 2.1f;
            right = randomSpawn;
            trans.setTranslation(vector);
            objTrans2.setTransform(trans);
        }
        if(left > 1.5f){
            float randomSpawn = (float) Math.random() * -1.5f + -2.1f;
            left = randomSpawn;
            trans.setTranslation(vector2);
            objTrans3.setTransform(trans);
        }
        if(rightX2 < -1.5f){
            float randomSpawn = (float) Math.random() * 1.5f + 2.1f;
            rightX2 = randomSpawn;
            trans.setTranslation(vector3);
            objTrans4.setTransform(trans);
        }
        if(leftX2 > 1.5f){
            float randomSpawn = (float) Math.random() * -1.5f + -2.1f;
            leftX2 = randomSpawn;
            trans.setTranslation(vector4);
            objTrans5.setTransform(trans);
        }
        if(xloc > .8f){
            xloc = .8f;
        }
        if(xloc < -.8f){
            xloc = -.8f;
        }
        sumScore = score;
        if(!isAlive){
            setBackground(Color.black);
            remove(scoreLabel);
            remove(c);
            setSize(600,600);
            setVisible(true);
            Font font = new Font("Helvatica",Font.BOLD,24);
            if(sumScore < 0){
                sumScore = 0;
            }
            JLabel label = new JLabel("                             Your Score: " + sumScore);           
            label.setFont(font);
            add(label);
            setVisible(true);
            repaint();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:53:29.257

仍然很难说，但似乎这些是关键线：

```
 papi = new PAPITest();
    papig = new PAPIGame(); 
```

这两个似乎共同管理您的游戏状态，因此如果您重新创建它们，您应该重新开始您的游戏。例如：

```
if(key == KeyEvent.VK_SPACE && papi.isAlive() != true){ 
    remove(papi);
    papi = new PAPITest();
    papig = new PAPIGame();
    papi.setSize(600,600);
    add(papi);
    setVisible(true);
    repaint();
} 
```

# c# - 使用 t4 模板在子文件夹中生成类

> ID：15965713
> 
> 赞同：4
> 
> 时间：2013-04-12T07:41:53.633
> 
> 标签：c#, entity-framework-5, t4, dbcontext

我正在使用 T4 模板生成我的实体的上下文。当 t4 模板文件运行时，它会将生成的文件添加到项目根目录中。我想要的是生成的文件放在一个子文件夹下。如果子文件夹不存在，则创建文件夹，然后将生成的文件放入其中。如果文件存在，则不会生成新文件。

我是 t4 模板的新手。我换了

```
fileManager.StartNewFile(entity.Name + ".cs"); 
```

至

```
fileManager.StartNewFile("SubFolder\" + entity.Name + ".cs"); 
```

当我运行它时，会在 SubFolder 中创建文件（使用 Windows 资源管理器打开文件夹），但项目不知道它。如果没有文件夹，则会发生奇怪的行为。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T02:31:30.107

最好将 tt 文件和模型类放在同一个文件夹中。只需更改 inputFile 路径，例如 inputFile = @"..\Model1.edmx" （如果您的 edmx 文件位于根文件夹中）。

可能需要更改的另一件事是命名空间，默认情况下它是 Code.VsNamespaceSuggestion()，它会将子文件夹名称添加到命名空间。像“ClassLibrary1.SubFolder”。它可能会导致问题。您可以对命名空间进行硬编码，例如 namespaceName = "ClassLibrary1"。

# objective-c - Phonegap 简单编辑

> ID：15965714
> 
> 赞同：0
> 
> 时间：2013-04-12T07:41:54.607
> 
> 标签：objective-c, cordova, phonegap-plugins

我目前即将在 PhoneGap / Cordova 开始一个项目。

在我想拍照的应用程序中，使用 getPicture 功能，然后进行非常简单的照片编辑。

编辑包括在图片上添加两个点（圆圈、点等），然后保存并用于上传。

我似乎找不到任何提供此功能的插件，所以我似乎需要一些本机代码，我可以自己将其作为插件实现。

实现这一目标的最简单方法是什么？

任何帮助，为我指明正确的方向都会让我开心。谢谢，

延斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:30:38.713

我认为您需要的是 html5 画布。我有使用 phonegap 在网络摄像头上编辑图像的经验。但是，您的要求似乎更容易。你可以先用getPicture api拍照。然后在画布上做你想做的事。

# c++ - lnk1104：无法打开“LIBC.lib”链接

> ID：15965716
> 
> 赞同：6
> 
> 时间：2013-04-12T07:42:13.723
> 
> 标签：c++, opengl, visual-studio-2012

在我的 OpenGL 项目中使用 GLee 编写着色器并编译后，我收到了错误 `LNK1104: cannot open file 'LIBC.lib'`。我已经尝试添加它并按照其他人的建议忽略它，但并没有解决这个问题。有没有其他方法可以解决我错过的这个问题？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-12T08:23:34.470

以下是几种可能的解决方案：

1.  这可能是由于代码生成冲突。如果您`libc.lib`的线程支持与您的项目设置不同，这可能会导致问题。如果是这样，请右键单击`project`，然后转到`properties->C++->code generation->Runtime Library`并将值更改为`Multi-threaded(MT)`。

2.  您`libc.lib`可能不支持多线程。右键单击`project`，然后转到`properties->Linker->Input->Additional Dependencies`并更改`libc.lib`为 `libcmt.lib`

3.  您的应用程序静态链接同一库的多个副本。右键单击`project`，然后转到`properties->Linker->Input->Ignore Specific Library`并添加`libc.lib`

4.  也许你的项目需要这个库，但你的系统没有。在这种情况下，您必须`.lib`从 Microsoft 下载文件并通过右键单击添加下载文件的路径`project`，然后转到`properties->Linker->General->Additional Library directories`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-10T13:55:31.837

我在带有 Windows SDK 7.1 的 MS VC++ 2012 Express 中遇到了这个问题。

我从 DISLIN 开发人员那里找到了这个解决方案：

```
 (i) in MS VC++\Project\<YourProject> Properties pull-down...
 (ii) <YourProject>Property Pages\Ignore Specific Default Libraries : libc.lib
(iii) <YourProject>Property Pages\Additional Dependencies\Edit : libcmt.lib 
```

答对了！

# operating-system - 如果程序的大小大于虚拟内存会怎样？

> ID：15965718
> 
> 赞同：2
> 
> 时间：2013-04-12T07:42:16.873
> 
> 标签：operating-system

我最近在电话采访中遇到了这个问题：

如果程序的大小大于虚拟内存的大小会怎样？

是否不允许运行或操作系统如何处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:50:48.277

*   是的，即使总大小大于地址空间，也有可能运行程序。

大于可用地址空间的程序存在了很长时间。常见的方法是将程序拆分为适合地址空间的块，然后按顺序/按需加载其他块。

*   如果您有可以播放文件的播放器，它将播放文件。不知道它与操作系统有何关系...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-21T19:44:33.667

是的，你绝对可以。覆盖是使用的机制。CPU 只引入要在主存储器中执行且当前需要的那部分代码。其余代码驻留在辅助存储器中，然后可以在需要时调用。

# javascript - 最小的 JavaScript 所见即所得 - 如果已存在，则从选定文本中删除标签

> ID：15965720
> 
> 赞同：2
> 
> 时间：2013-04-12T07:42:21.953
> 
> 标签：javascript, range, selection, wysiwyg, documentfragment

我正在制作一个最小的 JavaScript WYSIWYG 控件。

我不想使用 document.execCommand 因为它不允许任意 HTML，它在浏览器之间不一致等。

到目前为止，这是我精简到最低工作代码的内容：

[http://jsfiddle.net/2WxQn/1/](http://jsfiddle.net/2WxQn/1/)

```
<button data-action="strong"><strong>b</strong></button>
<button data-action="em"><em>i</em></button>
<button data-action="u"><u>u</u></button>
<p contenteditable>The quick brown fox jumps over the lazy dog.</p>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script>
  $( function(){
    $( 'button' ).on( 'click', function(){
      var selection = window.getSelection();                   
      var range = selection.getRangeAt( 0 );          
      var action = $( this ).attr( 'data-action' );            
      var node = document.createElement( action );
      var frag = range.extractContents();
      node.appendChild( frag );
      range.insertNode( node );

      return false;           
    });
  });
</script> 
```

如果某些选择已经包含强标签（或其他），我该如何制作以便再次单击按钮删除这些标签，而不是用新的强标签包装选择？

写这个问题给了我一个想法。我现在将尝试它并回答我自己的问题，如果它有效 - 这样这个问题就在这里，以防其他人遇到这个问题。否则我会屏住呼吸等待你的帮助:)

编辑：显然，如果其他人发布了一个可行的解决方案，我会接受他们的答案而不是我的答案，如果它更好的话。

编辑（2）：所以我的想法没有成功。事实证明，某些东西（可能是 range.insertNode）会神奇地为您平衡标签。我似乎没有从选择、范围或碎片中获得足够的信息来始终知道选择是否在给定的标签内。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:31:59.620

**编辑：这不是一个好的解决方案。它完全分解为比单行简单文本更复杂的任何东西。我已经解决了并将很快发布更好的解决方案。**

弄清楚了。

我构建了一个数组，其中包含所见即所得区域中的每个文本节点及其父标签的列表。

然后我将所选内容包装在一个自定义元素中，以便以后轻松删除，并且不与任何现有的 HTML 元素冲突，使用推荐的 x- 前缀。

然后，我从该列表中重建所见即所得元素的内容，从选择中的所有节点中删除单击按钮的标记（如果它们都已经拥有它），这是大多数所见即所得编辑器处理它的方式。

[http://jsfiddle.net/x7WRZ/](http://jsfiddle.net/x7WRZ/)

```
<button data-action="B"><b>b</b></button>
<button data-action="I"><i>i</i></button>
<button data-action="U"><u>u</u></button>
<p contenteditable>The quick brown fox jumps over the lazy dog.</p>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js"></script>
<script>
  $( function(){    
    var selectionWrapper = 'X-SELECTION';

    function getTextData( element ) {
      function getTextNodesIn( root ) {
        var textNodes = [];
        var parents = [];

        function getTextNodes( node ) {
          if( node.nodeType === 3 ){     
            var text = node.textContent;
            textNodes.push({
              text: text,
              parents: parents.slice( 0 )
            });
          } else {
            if( node !== root ){
              parents.push( node.tagName );
            }
            for( var i = 0, len = node.childNodes.length; i < len; ++i ){
              getTextNodes( node.childNodes[ i ] );
            }
            parents.pop();
          }
        }

        getTextNodes( element );

        return textNodes;
      }    

      return getTextNodesIn( element );   
    }

    function handleSelection( container, action ) {
      var textData = getTextData( container );
      container.innerHTML = '';

      //if every textNode in the selection has action as a parent, we want
      //to remove it from all of them.
      var selection = _( textData ).filter( function( data ){
        return _( data.parents ).contains( selectionWrapper );
      });
      var remove = _( selection ).every( function( data ) {
        return _( data.parents ).contains( action ) || data.text.trim() === ''; 
      });
      _( selection ).each( function( data ){
        if( remove ) {
          data.parents = _( data.parents ).without( action );
        } else {
          data.parents.push( action );
        }
      });

      //rebuild each text node
      _( textData ).each( function( data ){
        //no need to add empty text nodes
        if( data.text === '' ) {
          return;
        }
        //remove duplicates of the same parent tag and remove the selection wrapper
        var parents = _( data.parents ).chain().uniq().without( selectionWrapper ).value();            
        var target = container;
        _( parents ).each( function( parent ){
          var node = document.createElement( parent );
          target.appendChild( node );
          target = node;
        });
        var text = document.createTextNode( data.text );
        target.appendChild( text );
      });
    }

    $( 'button' ).on( 'click', function(){
      var action = $( this ).attr( 'data-action' );            
      var selection = window.getSelection();  

      for( var i = 0; i < selection.rangeCount; i++ ){
        var range = selection.getRangeAt( i );      
        var node = document.createElement( selectionWrapper );                    
        node.appendChild( range.extractContents() );          
        range.insertNode( node );
        handleSelection( $( 'p' )[ 0 ], action );
      }

      return false;           
    });
  });    
</script> 
```

# php - 在 url 中使用 & 的 PHP 错误

> ID：15965724
> 
> 赞同：0
> 
> 时间：2013-04-12T07:42:30.767
> 
> 标签：php, url

有一个字符串`XX&YY`，我将它传递到另一个页面。即，`localhost/sample/XX&YY/1`用于某些处理。现在，当我尝试在另一边获取 name 值时，我能够得到 only`XX`而不是 full `XX&YY`。如何纠正它？有任何想法吗？

注意：这是我的网址`localhost/sample.php?name=somevalue&pageno=somevalue has been url re-written to localhost/sample/name/pageno`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:43:50.920

您必须转义 URL。您可以使用`rawurlencode()`或`urlencode()`对您的 URL 进行编码。

**旁注：** [两个功能的区别](https://stackoverflow.com/questions/996139/php-urlencode-vs-rawurlencode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T08:34:38.307

如果我理解正确，这是您脚本的 URL：

```
http://localhost/sample/name/pageno 
```

然后由您的 Web 服务器将其重写为：

```
http://localhost/sample.php?name=somevalue&pageno=somevalue 
```

然后，这就是您应该如何格式化 URL：

```
$url = sprintf('http://localhost/sample/%s/%s', 
    urlencode('XX&YY'), 
    urlencode('1')
); 
```

# asp.net - IIS 与应用程序的本地安装

> ID：15965725
> 
> 赞同：1
> 
> 时间：2013-04-12T07:42:37.543
> 
> 标签：asp.net, iis, windows-7

我想用我的 Win32 应用程序提供一个 IIS 实例，以在这个应用程序中提供一些 ASP.NET HTML 文档。我可以独立于 IIS 的全局安装来安装 IIS 的本地版本吗？我可以交付多个 IIS 安装，因为我可以使用 apache 执行此操作，例如？还是我必须使用 IIS 的全局系统安装并将自己连接到现有网站或创建一个新网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:54:15.947

查看以下关于“自托管 ASP.net 网站”的 SO 问题和答案。

[有没有办法在 .Net 中创建“自托管”网站？](https://stackoverflow.com/questions/3875725/is-there-a-way-to-create-a-self-hosted-web-site-in-net)

# database - 数据库原子操作实现

> ID：15965734
> 
> 赞同：1
> 
> 时间：2013-04-12T07:43:12.513
> 
> 标签：database, database-design

问题是关于未包含在“begin-commit”块中的查询，而是关于在 postgres、mysql（至少是 innodb 引擎）中原子的普通插入和更新。那么这在内部是如何实现的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T13:57:00.750

所有 DML 语句都在事务的上下文中运行——显式事务 (BEGIN...COMMIT) 或隐式事务。我很确定这适用于所有 SQL dbms。[对于 PostgreSQL 来说](http://www.postgresql.org/docs/current/static/sql-begin.html)当然是这样。

> 默认情况下（不带BEGIN），PostgreSQL以“自动提交”模式执行事务，即每条语句都在自己的事务中执行，并在语句末尾隐式执行提交（如果执行成功，否则回滚）。

# java - Spring Data (JPA) Repository 是线程安全的吗？（又名 SimpleJpaRepository 线程安全）

> ID：15965735
> 
> 赞同：9
> 
> 时间：2013-04-12T07:43:12.650
> 
> 标签：java, jpa, spring-data, spring-data-jpa

我正在使用[Spring Data (JPA) 存储库](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/repositories.html#repositories.core-concepts)来处理 CRUD 样板。

我像这样定义我的存储库接口：

```
import org.springframework.data.repository.CrudRepository;

public interface FooRepository extends CrudRepository<Foo, Long>
{
  public Foo findByXAndYAndZ(X x, Y y, Z z);
} 
```

然后 Spring 会自动神奇地为我生成所述接口的实现。我们得到的是一个代理，但我相信最终我们会得到一个`org.springframework.data.jpa.repository.support.SimpleJpaRepository`.

*如果*底层目标类是线程安全的，则A`JdkDynamicAopProxy`是线程安全的。因此，问题是：线程安全吗？*`SimpleJpaRepository`*

 ** * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T11:42:03.147

一般来说，是的。它假设一个托管的`EntityManager`，我们将从 Spring 的工厂类（如果您使用 Spring 作为容器）或作为 CDI 托管 bean（通过`@Producer`方法声明）获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:54:00.653

通常 Spring 有线对象是线程安全的。

以下是一些有用的链接：

[http://www.petrikainulainen.net/programming/spring-framework/spring-data-jpa-tutorial-part-two-crud/](http://www.petrikainulainen.net/programming/spring-framework/spring-data-jpa-tutorial-part-two-crud/)

确保您使用正确的事务管理器

[http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/transaction/jta/JtaTransactionManager.html](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/transaction/jta/JtaTransactionManager.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-17T18:26:33.927

我还不确定，我可能完全错了，但我不认为存储库在特定情况下是线程安全的。看一眼：

github 上 spring-data-commons 中的 RepositoryFactorySupport.QueryExecutorMethodInterceptor。

有一个包含方法 -> 查询的并发哈希图。如果这些查询包含状态，或者这些查询的任何属性包含状态，则存储库不再是线程安全的。一个很好的例子是 spring-data-neo4j。DerivedGraphRepositoryQuery 特别有问题，因为它包含 CypherFinderQuery。那些包含查询参数形式的状态。我相信在 DerivedGraphRepository 中的查询期间，可能会出现一个参数被另一个线程覆盖的竞争条件。如果查询对象的作者给它们状态，这可能发生在其他 spring 数据存储库中。*

# jquery - 如何动态更改剑道 ui 网格中的值

> ID：15965737
> 
> 赞同：5
> 
> 时间：2013-04-12T07:43:17.093
> 
> 标签：jquery, kendo-ui, kendo-grid

我正在使用剑道 ui 网格。在那我已经使用批处理模式来保存值。如果我在一行中更改记录，则相应行的值也将更改，当我们单击保存时，两个字段都将保存到数据库中。

例如。我有一个像这样的网格：

```
 Integer    Value
   1         First
   2         Second
   3         Third
   4         Fourth 
```

如果我将 1 的值更改为 4，那么 4 将被更改，并且值也会动态更改。我的意思是我想在这里交换 1 和 4。而且我也可以更改剩余的所有字段，但最后所有记录都必须保存到数据库中。我试过像

此代码将在网格更改功能中

```
 var grid = $('#grid').data("kendoGrid");
 var selectedRow = grid.select();
 var selectedRowIndex = selectedRow.index();
 console.log(selectedRowIndex);

 var firstItem = dataSource.data()[selectedRowIndex];

 var datalength = dataSource.data();
 for (var i = 0; i < datalength.length; i++)
   {
     var dataItem = datalength[i].id;
     if (dataItem == firstItem.get('id'))
       {                                
         var secondItem = dataSource.data()[i];                                
         secondItem.set('id', dataItem);                               
       }
   } 
```

然后值正在改变，但值在改变后没有传递给控制器​​。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T11:35:45.863

如果您想直接使用数据，则需要将您更改的记录标记为脏记录。

```
 dataSource.data()[changedIndex].dirty = true;
 dataSource.sync(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-01T05:42:40.897

只需设置剑道网格中的数据值。

$("#my_grid").data("kendoGrid").dataSource.data()[rowindex].columnName=newValue;

在我的项目中，我在下拉更改中使用列名 = fclty_cd 更改了 Kendo 网格行的值。

我写了这个：

```
 function onChange(e) {
    var fromContactNumber = parseFloat($('#fromContactNumber').val());
    var toContactNumber = parseFloat($('#toContactNumber').val());
    var length = $('#grid table tr[role=row]').length;
    var faculty = $('#ddl_Faculty').val();
    for (var i = 1; i < length; i++) {
        var num = parseFloat($($('#grid table tr[role=row]')[i]).find("td")[4].innerText);
        if (num >= fromContactNumber && num <= toContactNumber) {
            $("#grid").data("kendoGrid").dataSource.data()[i - 1].fclty_cd = faculty;
            $($($('#grid table tr[role=row]')[i]).find("td")[11]).text(faculty);
        }
    }
} 
```

此行仅更改 UI 值： $($($('#grid table tr[role=row]')[i]).find("td")[11]).text(faculty);

此行更改 Kendo 数据网格中的值： $("#my_grid").data("kendoGrid").dataSource.data()[rowindex].columnName= newValue;

# java - Spring mvc使用jackson解析对象？

> ID：15965743
> 
> 赞同：0
> 
> 时间：2013-04-12T07:43:27.873
> 
> 标签：java, spring, jquery, spring-mvc, jackson

我的豆类，

```
import java.util.LinkedList;

public class Information {

    private LinkedList<String> information ;

    public LinkedList<String> getInformation() {
        return information;
    }

    public void setInformation(LinkedList<String> information) {
        this.information = information;
        System.out.println("List is : "+information);
    }

} 
```

我的控制器，

```
@RequestMapping(value="/registerDn.html",method=RequestMethod.POST)
public @ResponseBody Information registerDn( @RequestParam(value = "dn", required = false) String dn,
        @RequestParam(value = "acd", required = false) String acd ){
    System.out.println("DN is : "+dn+   "    acd : "+acd);
    WebApplicationContext ctx = WebApplicationContextUtils.getRequiredWebApplicationContext(context);
    UserOperation oper = (UserOperation)ctx.getBean("operation");
    oper.registerDn(dn);

    Information info = (Information) ctx.getBean("info");
    return info;
} 
```

我的 jquery 将是，

```
function registerDn(){

    $.ajax({  
        type: "POST",  
        url: contexPath + "/registerDn.html",
        data: "dn=" + dn + "&acd=" + acd,  
        success: function(response){

            var userInfo = "<ol>";

            for( i =0 ; i < response.information.length ; i++){
                userInfo += "<br><li><b>Name</b> : " + response.information[i] ;
            }

            userInfo += "</ol>";

            //Used to display the list
            $('#getlist').html(dn + " is : " + userInfo); 

        },  
        error: function(e){  
            alert('Error: ' + e);  
        }, 

    }); 

} 
```

我在 jquery-ajax 中获得了成功。但不知道如何解析它并在视图中显示它。

或单击按钮时如何使用 jquery-ajax 获取 bean 类中的列表。

好的答案绝对值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:57:46.800

您的示例代码中没有任何内容表明响应应该是/应该是 JSON 对象。

1.  Jackson jars 必须在类路径上，以便在应用程序的上下文中配置 MappingJackson HttpMessageConverter
2.  jQuery ajax 配置应将 dataType 定义为 json 或使用注释的`produces`属性`@RequestMapping`并将值设置为`application/json`

基本上，如果 Spring 知道响应内容类型应该是 json，它会使用 Jackson Mapping Converter 将你的 pojo 转换为 JSON，然后你的 jQuery 成功回调会得到一个 JSON 对象。

不过，您应该确切地看到 FireBug 发生了什么。

# android - 在 Android 应用程序中从 PDF 读取数据

> ID：15965749
> 
> 赞同：0
> 
> 时间：2013-04-12T07:43:40.600
> 
> 标签：android, parsing, pdf

我需要从这样的 pdf 日历中读取数据：

[http://www.consorziopriula.it/ecocalendario_schemi/Calendario%20Raccolte%202013%20TV2_definitivo%20NUOVO_Parte26.pdf](http://www.consorziopriula.it/ecocalendario_schemi/Calendario%20Raccolte%202013%20TV2_definitivo%20NUOVO_Parte26.pdf)

我必须在 Android 应用程序中执行此操作……这可能吗？如果可能的话......哪个是最好的方法？

# algorithm - 构造和打印二叉树（不平衡二叉树）的元素，从左到右，自下而上

> ID：15965753
> 
> 赞同：1
> 
> 时间：2013-04-12T07:43:56.367
> 
> 标签：algorithm, data-structures, binary-tree, tree-traversal

请让我知道如何实现以下目标：

我有一棵不平衡的二叉树，它同时具有左右子树。我必须按顺序打印该不平衡二叉树的节点值

(i) 从左到右，(ii) 从下到上，以及 (iii) 还将使用的数据结构及其内存管理或内存分配。

最初我的想法是，将进行级别顺序遍历，将元素排队，然后打印并取消排队队列。

非常感谢您对示例代码、伪代码、算法的帮助。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-18T03:51:35.870

这是使用 C++ 的不平衡二叉树的示例。每个节点携带的数据只是一个简单的整数值（连同左右子指针的管理数据和节点层级的深度）。

希望这显示了插入如何访问树中的节点，直到找到合适的位置将新节点插入树中。

左子树包含小于当前节点的值。因此，如果当前节点包含值 9，则该节点的左子树由值小于 9 的节点组成。

右子树包含大于当前节点的值。因此，如果当前节点包含值 9，则该节点的右子树由值大于 9 的节点组成。

当您访问每个节点时，如果您想找到一个大于当前节点值的值，则遍历右子树。如果要查找小于当前节点值的值，则遍历左子树。

```
// tree_data.cpp : Defines the entry point for the console application.
//

// VS2005 standard include for precompiled headers, etc.
#include "stdafx.h"

// C++ iostream header for standard output in namespace std::
#include <iostream>

// An unbalanced, ordered binary tree
// Left subtree are items less than the node value.
// Right subtree are items greater than the node value.

// The items are in order from left most leaf to the right most leaf
// however the left and right subtrees may be unbalanced meaning not the same
// depth depending on the order of inserts.  In other words if there are
// a large number of consecutive inserts with decreasing values the
// result will be a tree whose root is the first value inserted with a
// long left tree of decreasing values and no right hand tree at all.

struct TreeNode {
    TreeNode *pLeft;    // node that is less than the current node
    TreeNode *pRight;   // node that is greater than the current node
    int    iValue;      // value for this node
    int    iDepth;      // depth of this node in the tree, number of levels
};

typedef TreeNode *TreeHead;

const TreeHead emptyTree = 0;

// Since we use new to allocate tree nodes, the InsertNode () function could
// conceivably throw a memory allocation exception.
void InsertNode (int iValue, TreeHead &pTree)
{
    TreeNode TreeHeadInit = {emptyTree, emptyTree, iValue, 0};

    if (pTree == emptyTree) {
        // initialize the tree with this first item and return
        pTree = new TreeNode;
        *pTree = TreeHeadInit;
        return;
    }

    // Tree is not empty so lets find the place to put this new item to
    // be inserted.  We traverse the tree until we find the correct empty
    // spot in the tree and then we put it there.  If we come across the
    // value already in the tree then we do nothing and just return.
    TreeHead pTreeStruct = pTree;
    while (pTreeStruct != emptyTree) {
        // remember the depth of the current node as it will become the parent
        // node if we reach the outer most leaf and need to add a new node.
        TreeHeadInit.iDepth = pTreeStruct->iDepth;
        if (pTreeStruct->iValue == iValue) {
            // since we have found a node with the value specified then we
            // are done and we do nothing.
            return;  // do nothing
        } else  if (pTreeStruct->iValue < iValue) {
            if (pTreeStruct->pRight == emptyTree) {
                // we have reached the place where we need to add a new node to
                // extend the right tree with this greater value than the current
                // node contains.  allocate the node then break to initialize it.
                pTreeStruct = pTreeStruct->pRight = new TreeNode;
                break;
            }
            // the value to insert is greater than this node so we
            // traverse to the right where values greater than the
            // value of the current node are located.
            pTreeStruct = pTreeStruct->pRight;
        } else {
            if (pTreeStruct->pLeft == emptyTree) {
                // we have reached the place where we need to add a new node to
                // extend the left tree with this greater value than the current
                // node contains.  allocate the node then break to initialize it.
                pTreeStruct = pTreeStruct->pLeft = new TreeNode;
                break;
            }
            // the value to insert is less than this node so we
            // traverse to the left where values less than the
            // value of the current node are located.
            pTreeStruct = pTreeStruct->pLeft;
        }
    }

    // update this new node that has been added to the tree and
    // set its depth to be one more than the depth of its parent node.
    TreeHeadInit.iDepth++;
    *pTreeStruct = TreeHeadInit;
    return;
}

// print the tree starting with the lowest value to the highest value.
// for each node we want to print out the left item which is lower than
// the node's value and then the right item which is higher than the
// node's value.
void PrintTreeInOrder (TreeHead pTree)
{
    if (pTree != emptyTree) {
        PrintTreeInOrder (pTree->pLeft);
        std::cout << "  value " << pTree->iValue << " depth " << pTree->iDepth << std::endl;
        PrintTreeInOrder (pTree->pRight);
    }
}

// print the tree from the root element indenting the printed lines to give an
// idea as to a diagram of the tree and how the nodes are sequenced.
void PrintTreeInDepth (TreeHead pTree)
{
    if (pTree != emptyTree) {
        for (int i = 0; i < pTree->iDepth; i++) std::cout << "|..";
        std::cout << " value " << pTree->iValue << " depth " << pTree->iDepth;
        if (pTree->pLeft != emptyTree) {
            std::cout << " left " << pTree->pLeft->iValue << " ";
        } else {
            std::cout << " left NULL ";
        }
        if (pTree->pRight != emptyTree) {
            std::cout << " right " << pTree->pRight->iValue << " ";
        } else {
            std::cout << " right NULL ";
        }
        std::cout << std::endl;
        PrintTreeInDepth (pTree->pLeft);
        PrintTreeInDepth (pTree->pRight);
    }
}

int _tmain(int argc, _TCHAR* argv[])
{
    TreeHead myTree = emptyTree;

    // this is the first insert so will be the root of the unbalanced tree
    InsertNode (9, myTree);

    // now insert several items in decending order
    InsertNode (8, myTree);
    InsertNode (6, myTree);
    InsertNode (5, myTree);
    InsertNode (3, myTree);
    InsertNode (2, myTree);

    // now insert some other nodes haphazardly
    InsertNode (12, myTree);
    InsertNode (4, myTree);
    InsertNode (1, myTree);
    InsertNode (22, myTree);
    InsertNode (16, myTree);
    InsertNode (18, myTree);
    InsertNode (17, myTree);
    InsertNode (7, myTree);
    InsertNode (13, myTree);
    InsertNode (14, myTree);
    InsertNode (15, myTree);

    std::cout << "In order print" << std::endl;
    PrintTreeInOrder (myTree);
    std::cout << std::endl << std::endl;
    std::cout << "Depth diagram from Root using left traversal" << std::endl;
    PrintTreeInDepth (myTree);
    return 0;
} 
```

插入节点后打印出树的 main 的输出如下所示。此输出首先显示按顺序遍历，它按从小到大的顺序列出节点的值。下一个输出给出了关于不平衡树结构的想法，显示了来自根元素的左子树如何比右子树更长并且具有更多级别。您还可以从第二组输出中看到哪个节点包含哪些值。例如，值为 6 的节点有一个值为 5 的节点作为其左子节点，并有一个值为 7 的节点作为其右子节点。

```
In order print
  value 1 depth 6
  value 2 depth 5
  value 3 depth 4
  value 4 depth 5
  value 5 depth 3
  value 6 depth 2
  value 7 depth 3
  value 8 depth 1
  value 9 depth 0
  value 12 depth 1
  value 13 depth 4
  value 14 depth 5
  value 15 depth 6
  value 16 depth 3
  value 17 depth 5
  value 18 depth 4
  value 22 depth 2

Depth diagram from Root using left traversal
 value 9 depth 0 left 8  right 12
|.. value 8 depth 1 left 6  right NULL
|..|.. value 6 depth 2 left 5  right 7
|..|..|.. value 5 depth 3 left 3  right NULL
|..|..|..|.. value 3 depth 4 left 2  right 4
|..|..|..|..|.. value 2 depth 5 left 1  right NULL
|..|..|..|..|..|.. value 1 depth 6 left NULL  right NULL
|..|..|..|..|.. value 4 depth 5 left NULL  right NULL
|..|..|.. value 7 depth 3 left NULL  right NULL
|.. value 12 depth 1 left NULL  right 22
|..|.. value 22 depth 2 left 16  right NULL
|..|..|.. value 16 depth 3 left 13  right 18
|..|..|..|.. value 13 depth 4 left NULL  right 14
|..|..|..|..|.. value 14 depth 5 left NULL  right 15
|..|..|..|..|..|.. value 15 depth 6 left NULL  right NULL
|..|..|..|.. value 18 depth 4 left 17  right NULL
|..|..|..|..|.. value 17 depth 5 left NULL  right NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:02:57.533

看来你已经了解了算法。请记住，树是不平衡的，正常的递归实现可能会导致 StackOverflow。

# css - 为什么我的关闭按钮在某些浏览器中会晃动？

> ID：15965757
> 
> 赞同：5
> 
> 时间：2013-04-12T07:44:01.690
> 
> 标签：css, css-transforms

请查看演示 - [http://jsfiddle.net/cYGzC/](http://jsfiddle.net/cYGzC/)

这个想法是，在悬停时，十字（'×'）将围绕其中心转动，这将在悬停时产生很好的旋转运动。问题是，要使其正常工作，× 的中心和圆的中心必须重合。

```
.close_button {
    background-color: #3b3b3b;
    width: 40px;
    height: 40px;
    border-radius: 20px;
    box-shadow: 0 0 5px rgba(150,150,150,0.9);
    color: #fff;
    font-size: 40px;
    line-height: 40px;
    text-align: center;
    transition-duration: 2s;
    -webkit-transition-duration: 2s;
    -moz-transition-duration: 2s;
    -o-transition-duration: 2s;
    cursor: pointer;
} 
```

上面的 CSS 技巧似乎在许多浏览器中都可以完成这项工作，除了 Windows 中的 Chrome。（Mac Chrome 似乎工作正常。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T08:41:28.300

简短的回答是为您的十字架使用图像。正如 Taras 所说，不能保证字体在每个浏览器中都呈现完全相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T08:38:55.017

看起来`font-family`它是导致问题的一部分。如果你让它`font-family:Arial, Helvetica, sans-serif;`在 Firefox 中看起来效果更好

[http://jsfiddle.net/cYGzC/1/](http://jsfiddle.net/cYGzC/1/)

# javascript - Jquery 帮助：.click() 到每个单独的元素

> ID：15965762
> 
> 赞同：1
> 
> 时间：2013-04-12T07:44:09.577
> 
> 标签：javascript, jquery, click, each

我已经编写了这段代码，以便在`.box-open`单击按钮`.sharebox`（`#share-but`时间，因为每次我单击一个按钮时，所有的`.sharebox`s 都会将类`.box-open`应用于它。

```
function shareBox() {
$('.share').each(function( index ) {
    $(this).on('click', '#share-but', function() {
        if ($('.sharebox').hasClass('box-open')) {
            $('.sharebox').removeClass('box-open');
        }        
        else {
            $('.sharebox').addClass('box-open');
        }
    });
});
}
shareBox(); 
```

这是问题的图像（我正在构建一个 Tumblr 主题）。希望它更容易理解。[http://24.media.tumblr.com/c5c4252607bf4a9905c7c9de5b592c60/tumblr_ml4t2fSuQo1rqce8co1_500.png](http://24.media.tumblr.com/c5c4252607bf4a9905c7c9de5b592c60/tumblr_ml4t2fSuQo1rqce8co1_500.png) <---- 当我点击其中一个按钮时发生这种情况，但我只希望在我点击里面的时候添加一个`.sharebox`类相同的分区。`.box-open``#share-but``.share`

我希望这一切都是有道理的。我在 Javascript/Jquery 上仍然很菜鸟，因为我 2 周前才开始学习，所以非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:45:31.800

您必须使用`$(this)`而不是`$('.sharebox')`解决事件源

```
$('.sharebox').addClass('box-open'); 
```

将会

```
$(this).addClass('box-open'); 
```

元素的 id 在文档中应该是**唯一**的，因此您可以将 click 直接绑定到 '#share-but'，如果它不是唯一的，您可以像这样绑定它。

```
$('.share').on('click', '#share-but', function() {
    if ($('.sharebox').hasClass('box-open')) {
        $('.sharebox').removeClass('box-open');
    }        
    else {
        $('.sharebox').addClass('box-open');
    }
}); 
```

你可以用`toggleClass`它来简化，我假设你有一个 ID 为 #share 的项目，但是，

```
$('#share-but').click(function(){
   $(this).toggleClass("box-open");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:49:09.337

这将是一个更简单的版本，您可以切换类名:)

```
 $('.share').on("click", "#share-but", function() {
      $(this).find(".sharebox").toggleClass('box-open');
  }); 
```

# android - android中的jar文件

> ID：15965763
> 
> 赞同：0
> 
> 时间：2013-04-12T07:44:10.373
> 
> 标签：android, android-source, android-logcat

我正在尝试在 android 源代码中启用日志。正常程序如下——

1.  编辑要在其中启用日志的所有文件 = 15-20 分钟
2.  构建整个二进制文件 - 1 小时
3.  在手机上安装二进制文件并启动设备 - 大约 15 分钟

有什么方法可以让我编写一个apk文件，它可以在安装时直接在设备内部自动启用日志，即跳过前两个步骤并节省大量时间。

例如在文件 AudioManager.java 中，如果有几行日志被注释掉，我需要取消注释，然后再次构建二进制文件一个小时，以便接收正确的日志。有没有更短的方法可以做到这一点，我不必再次构建整个代码，并且可以在手机中进行一些更改，从而启用请求的日志。

# java - 这个看似过度设计的用于检查一个数字是否是另一个数字的倍数的代码的原因是什么？

> ID：15965767
> 
> 赞同：1
> 
> 时间：2013-04-12T07:44:22.330
> 
> 标签：java, design-patterns, division, integer-division

根据[这个答案](https://stackoverflow.com/a/8023671/57428)，如果我想检查一个数字是另一个数字的倍数，我可以使用余数运算符`%`。

```
 if( number % anotherNumber == 0 ) {
    number is a multiple of anotherNumber
 } 
```

然而，在这个充满了故意过度设计的代码的[有趣项目中，他们使用了以下方法：](https://github.com/Mikkeren/FizzBuzzEnterpriseEdition)

```
// int number;
// int anotherNumber;
if ((((int)(number / anotherNumber)) * anotherNumber == number)) {
    number is a multiple of anotherNumber
} 
```

它实际上是除以`number`然后`anotherNumber`乘回来并检查结果是否为`number`.

第二种方法是否有任何实际意义，还是只是故意过度设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:47:57.240

看起来第二个代码的作者不知道 % 运算符并使用乘法来验证是否有余数部分:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:48:36.300

直接从余数运算符的定义（JLS [§15.17.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.3)）得出两者在语义上是等价的：

> 在二进制数值提升（第 5.6.2 节）之后，整数操作数的余数运算会产生一个结果值，`(a/b)*b+(a%b)`例如`a`。

因此，更复杂的方法没有优势。

我不能说作者*为什么*以他们的方式写它，但他们认为有必要将整数除法的结果转换为这一事实`int`可能会给出提示......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T07:53:53.413

不，这显然是程序员资质较低的情况。在任何初级计算机科学课程中遇到模一。过度设计可能是由于缺乏类似的背景/实践。

PS我不会低估有关的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T07:54:04.617

例子

```
number = 13
anotherNumber = 4
number / anotherNumber = 13 / 4 = 3.25  // if  number or anotherNumber has type float or double
(int)(number / anotherNumber) = 3
(((int)(number / anotherNumber)) * anotherNumber = 3 * 4 = 12 
```

您可以看到结果仅与 相同`number`，当且仅当该部门`number / anotherNumber`具有整数结果时。

所以

```
if( number % anotherNumber == 0 ) 
```

和

```
if ((((int)(number / anotherNumber)) * anotherNumber == number)) 
```

在相同的情况下是正确的。我很确定，第一个版本有更好的性能。

我很确定编写代码的程序员要么不知道`%`-operator，要么在这种情况下没有考虑过它。

# python - scipy.optimize.fmin_cg 中的起始步长计算不清楚

> ID：15965768
> 
> 赞同：2
> 
> 时间：2013-04-12T07:44:23.823
> 
> 标签：python, optimization, scipy

我最近开始使用 scipy.optimize 并且我不清楚为什么在 fmin_cg 中，在启动时，根据当前函数值将函数的“先前”值设置为固定值

```
xk = x0
old_fval = f(xk)
old_old_fval = old_fval + 5000 
```

这绕过了代码中稍后处理（更正确？）这种情况的行搜索功能的方式。当然应该说：

```
xk = x0
old_fval = f(xk)
old_old_fval = None 
```

还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:26:42.703

是的，应该是`None`。再看一下代码，这两个值似乎都导致`1.0`用作初始步长，但是即使碰巧起作用，代码中的“魔术”数字也只是不好的风格。

想要[提交补丁](http://docs.scipy.org/doc/numpy/dev/)？（不过，现在我们更喜欢对补丁进行小的更改的拉取请求，但这并没有更多的工作。）

# python - 用python制作一个网络爬虫来下载pdf

> ID：15965770
> 
> 赞同：-1
> 
> 时间：2013-04-12T07:44:36.603
> 
> 标签：python, pdf, web-crawler

我想使用 Python 制作一个网络爬虫，然后从该 URL 下载 pdf 文件。谁能帮我？如何开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:50:51.687

[ScraperWiki](https://scraperwiki.com/)是一个不错的入门网站，您可以在该网站上在线编写和执行爬虫/爬虫。除了其他语言，它还支持[Python](https://scraperwiki.com/docs/python/)。它提供了许多有用的[教程](https://scraperwiki.com/docs/python/python_intro_tutorial/)和库以供快速入门。

# javascript - 如何使用按钮增加或减少 Web 浏览器控制字体大小？

> ID：15965771
> 
> 赞同：0
> 
> 时间：2013-04-12T07:44:41.713
> 
> 标签：javascript, c#-4.0, xml-parsing, windows-phone-8, webbrowser-control

您好我正在使用网络浏览器控件。我有两个按钮增加和减少。我想增加或减少网页视图内容

我的xml代码

```
<phone:WebBrowser x:Name="Webbrowser" IsScriptEnabled="True"/> 
```

我的 xaml.cs 代码

```
private void zoom_out(object sender, RoutedEventArgs e)
    {
        if (j > 0)
        {
            Webbrowser.FontSize -= 2;

            j--;
            i = j;
        }
    }
    private void zoom_in(object sender, RoutedEventArgs e)
    {
        if (i < 3)
        {
            Webbrowser.FontSize += 2;

            i++;
            j = i;
        }
    } 
```

我试过这段代码，但我不能增加或减少网页视图的字体大小。我挣扎了很长时间。请帮助我任何人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:43:46.663

根据您的场景，WebBrower 控件的 FontSize 不起作用，因为您需要为从 html 页面呈现的内容设置 FotnSize。`ScaleTransform`因此，您可以尝试`WebBrowser.RenderTransform`选择实现这一目标。我想它可能会对你有所帮助。

# c# - Fancybox (jQuery) 在第一次点击时不显示

> ID：15965773
> 
> 赞同：2
> 
> 时间：2013-04-12T07:44:46.687
> 
> 标签：c#, jquery, asp.net, visual-studio-2008, web

在 Web 应用程序中，我使用了 jQuery Fancybox，详情请参阅：http: [//fancybox.net/howto](http://fancybox.net/howto)

默认.aspx 代码：

```
 <a id="lnkAddPart" href ="Part.aspx" runat ="server" >
  <div id="Div1" class="button" runat="server">
    <asp:ImageButton ID="BtnAddRecord" ToolTip="Add Record" CssClass="image" ImageUrl="../img/tlb_list_addrecord.gif" runat="server" OnClick="BtnAddRecord_Click" />
  </div>
 </a> 
```

在此按钮单击的服务器端代码中，我调用了以下 jQuery 方法：

```
function AddPartList() {
            $(document).ready(function() {
            $("#lnkAddPart").fancybox({
                    'scrolling': 'no',
                    'width': 452,
                    'height': 225,
                    'type': 'iframe'
                });
            });
        } 
```

它以精美的盒子样式显示 Part.aspx 页面。但是，它在第​​二次点击事件中显示了那个花哨的框。我的意思是，第一次点击它并没有打开花哨的盒子。那有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T07:50:20.800

你不应该把`document.read`y 放进去`AddPartList`

```
$(document).ready(function() {
     $("#lnkAddPart").fancybox({
          'scrolling': 'no',
          'width': 452,
          'height': 225,
          'type': 'iframe'
      });
}); 
```

# jquery - jQuery - 未选中复选框时删除 href 属性

> ID：15965776
> 
> 赞同：0
> 
> 时间：2013-04-12T07:44:58.003
> 
> 标签：jquery, checkbox, attributes, href

我有一个表格，在“继续结帐”链接之前的末尾带有“单击此处接受条款和条件”复选框。

使用 jQuery，我想在未选中复选框时删除“继续购物”链接的 href 属性，并且当用户选择复选框时，href 属性将添加回链接。

我正在使用的代码如下，但由于某种原因这不起作用：

```
jQuery(document).ready(function() {

if ($('input#tandc').is(':checked')) {
    jQuery("#continue_shopping").attr("href");
}
else
    jQuery("#continue_shopping").removeAttr("href").css({"opacity" : "0.3", "cursor":"default"});
    }); 
```

我的 html 标记是这样的：

```
<input type="checkbox" name="tandc" value="tandc" id="tandc" required>
    I accept the <a href="/terms-and-conditions">Terms and Conditions</a>
</input>
<a id="continue_shopping" href="/store/shopping-cart/shipping/">Continue Shopping</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T07:50:57.837

尝试这个。你应该首先设置`continue shopping`禁用。逻辑上对吗？

```
$(function(){
// should be disabled first, shouldnot it be?
$("#continue_shopping").removeAttr("href").css({"opacity" : "0.3", "cursor":"default"});
 $('#tandc').change(function() {
    if($(this).prop('checked')) {
        $("#continue_shopping").attr('href', '/store/shopping-cart/shipping/');
    } else {
        $("#continue_shopping").removeAttr("href").css({"opacity" : "0.3",  "cursor":"default"});
    }
  });
 }); 
```

**演示：** [工作版本](http://jsfiddle.net/7kakv/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:58:07.300

两件事情：

1 - 使用`prop()`方法。

```
$('#tandc').change(function() {
    if($(this).prop('checked')) {
        $("#continue_shopping").attr('href', '/store/shopping-cart/shipping/');
    } else {
        $("#continue_shopping").removeAttr("href").css({"opacity" : "0.3",  "cursor":"default"});
    }
  }); 
```

2 - 使用标签，这样您的用户就不必明确单击该框：

```
<input type="checkbox" name="tandc" value="tandc" id="tandc" required>
<label for="tandc">I accept the <a href="/terms-and-conditions">Terms and Conditions</a></label>

</input>
<a id="continue_shopping" href="#">Continue Shopping</a> 
```

**jsFiddle**：http: [//jsfiddle.net/hescano/8narS](http://jsfiddle.net/hescano/8narS)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T07:49:20.707

该代码是否符合您的要求？

```
$(document).ready(function() {
    $('#tandc').on('click', function() {
        if ($(this).is(':checked')) {
            $("#continue_shopping").attr('href', '/store/shopping-cart/shipping/');
        } else {
            $("#continue_shopping").removeAttr("href").css({"opacity" : "0.3", "cursor":"default"});
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T07:51:54.597

试试这个： **DEMO**

[http://jsfiddle.net/7kakv/](http://jsfiddle.net/7kakv/)

```
jQuery(document).ready(function() {

$('#tandc').on('click', function() {
        if ($(this).is(':checked')) {
            $("#continue_shopping").attr('href', '/store/shopping-cart/shipping/').css({"opacity" : "1"});
        } else {
            $("#continue_shopping").removeAttr("href").css({"opacity" : "0.3", "cursor":"default"});
        }
      });
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T07:52:52.787

当未选中复选框时，这会将 href 设置为空白。

```
if ($('input#tandc').is(':checked') == false) {
    jQuery("#continue_shopping").attr("href","");   
}); 
```

# eclipse - Eclipse 的来自实体类的 JSF 页面向导

> ID：15965782
> 
> 赞同：1
> 
> 时间：2013-04-12T07:45:36.443
> 
> 标签：eclipse, netbeans, facelets, crud, wizard

我想知道是否有一个 JSF Pages from Entity Classes 向导，例如 NetBeans for Eclipse 中的一个，用于为 CRUD Capabilities 生成 Facelets 文件。谢谢你

# ruby-on-rails - 符号查找错误：节点：未定义符号：_ZN2v86LockerC1EPNS_7IsolateE

> ID：15965784
> 
> 赞同：1
> 
> 时间：2013-04-12T07:45:43.463
> 
> 标签：ruby-on-rails, node.js, ember.js

我尝试将 ember.js 与 rails 一起使用，我遵循 railscasts [http://railscasts.com/episodes/408-ember-part-1](http://railscasts.com/episodes/408-ember-part-1)并收到此错误

```
Showing /home/william/codes/408-ember-part-1/raffler-    after/app/views/layouts/application.html.erb where line #6 raised:

node: symbol lookup error: node: undefined symbol: _ZN2v86LockerC1EPNS_7IsolateE

  (in /home/william/codes/408-ember-part-1/raffler- after/app/assets/javascripts/store.js.coffee)
Extracted source (around line #6):

3: <head>
4:   <title>Raffler</title>
5:   <%= stylesheet_link_tag    "application", :media => "all" %>
6:   <%= javascript_include_tag "application" %>
7:   <%= csrf_meta_tags %>
8: </head>
9: <body>
Rails.root: /home/william/codes/408-ember-part-1/raffler-after 
```

一开始我认为这可能是我做错了什么，但正如你所看到的，我尝试了 railscast 的源代码，仍然得到这个错误

我使用 openSUSE 12.3 并安装了 nodejs 作为 javascript 编译器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:56:56.103

通过从源安装nodejs解决

# postgresql - 为什么 PostgreSQL (9.1) 不使用索引进行简单的相等选择？

> ID：15965785
> 
> 赞同：5
> 
> 时间：2013-04-12T07:45:45.263
> 
> 标签：postgresql, indexing, postgresql-9.1

我的表`lead`有一个索引：

```
\d lead
...
Indexes:
    "lead_pkey" PRIMARY KEY, btree (id)
    "lead_account__c" btree (account__c)
    ...
    "lead_email" btree (email)
    "lead_id_prefix" btree (id text_pattern_ops) 
```

为什么 PG (9.1) 不使用索引来进行这种简单的等式选择？电子邮件几乎都是独一无二的......

```
db=> explain select * from lead where email = 'blah';
                         QUERY PLAN
------------------------------------------------------------
 Seq Scan on lead  (cost=0.00..319599.38 rows=1 width=5108)
   Filter: (email = 'blah'::text)
(2 rows) 
```

其他索引命中查询似乎没问题（尽管我不知道为什么这个不只使用 pkey 索引）：

```
db=> explain select * from lead where id = '';
                                  QUERY PLAN
------------------------------------------------------------------------------
 Index Scan using lead_id_prefix on lead  (cost=0.00..8.57 rows=1 width=5108)
   Index Cond: (id = ''::text)
(2 rows)

db=> explain select * from lead where account__c = '';
                                    QUERY PLAN
----------------------------------------------------------------------------------
 Index Scan using lead_account__c on lead  (cost=0.00..201.05 rows=49 width=5108)
   Index Cond: (account__c = ''::text)
(2 rows) 
```

起初我认为这可能是由于`email`. 例如，如果 stats 声明`email`适用`blah`于大部分表，那么 seq 扫描会更快。但事实并非如此：

```
db=> select count(*), count(distinct email) from lead;
 count  | count
--------+--------
 749148 | 733416
(1 row) 
```

即使我强制关闭 seq 扫描，规划器的行为就好像它别无选择：

```
db=> set enable_seqscan = off;
SET
db=> show enable_seqscan;
 enable_seqscan
----------------
 off
(1 row)

db=> explain select * from lead where email = 'foo@blah.com';
                            QUERY PLAN
---------------------------------------------------------------------------
 Seq Scan on lead  (cost=10000000000.00..10000319599.38 rows=1 width=5108)
   Filter: (email = 'foo@blah.com'::text)
(2 rows) 
```

也试过`EXPLAIN ANALYZE`：

```
db=> explain analyze select * from lead where email = 'foo@blah.com';
                                                         QUERY PLAN
-----------------------------------------------------------------------------------------------------------------------------
 Seq Scan on lead  (cost=10000000000.00..10000319732.76 rows=1 width=5102) (actual time=77845.244..77845.244 rows=0 loops=1)
   Filter: (email = 'foo@blah.com'::text)
 Total runtime: 77857.215 ms
(3 rows) 
```

这是`\d`输出（抱歉，必须隐藏列名，并裁剪以适应 SO 的限制；请参阅[http://pastebin.com/ve3gzJpY](http://pastebin.com/ve3gzJpY)上的未裁剪版本）：

```
 Table "lead"
                   Column                   |            Type             | Modifiers 
--------------------------------------------+-----------------------------+-----------
 XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX | real                        | 
 XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX | text                        | 
 XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX | boolean                     | 
 XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX | text                        | 
 ...
 XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX | text                        | 
 email                                      | text                        | 
 XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX | boolean                     | 
 ...
 XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX | text                        | 
 XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX | text                        | 
 account__c                                 | text                        | 
 XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX | text                        | 
 ...
 XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX | text                        | 
 XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX | text                        | 
 id                                         | text                        | not null
 XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX | real                        | 
 ...
 XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX | timestamp without time zone | 
 XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX | real                        | 
Indexes:
    "lead_pkey" PRIMARY KEY, btree (id)
    "lead_account__c" btree (account__c)
    "lead_XXXXXXXXXXXXXXXXXXXXXX" btree (XXXXXXXXXXXXXXXXXXXXXX)
    "lead_XXXXXXXXXXXXXXXXXXXXXX" btree (XXXXXXXXXXXXXXXXXXXXXX)
    "lead_XXXXXXXXXXXXXXXXXXXXXX" btree (XXXXXXXXXXXXXXXXXXXXXX)
    "lead_email" btree (email)
    "lead_id_prefix" btree (id text_pattern_ops) 
```

这是`pg_dump --schema-only -t lead`（再次在[http://pastebin.com/ve3gzJpY](http://pastebin.com/ve3gzJpY)看到未裁剪的，具有唯一的列名，以防它有助于重现性）：

```
--
-- PostgreSQL database dump
--

SET statement_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SET check_function_bodies = false;
SET client_min_messages = warning;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- Name: lead; Type: TABLE; Schema: public; Owner: pod; Tablespace: 
--

CREATE TABLE lead (
    XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX real,
    XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX text,
    XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX boolean,
    XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX text,
    XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX text,
    XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX date,
    ...
    XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX text,
    account__c text,
    XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX text,
    ...
    XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX text,
    id text NOT NULL,
    XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX real,
    ...
    XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX timestamp without time zone,
    XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX real
);

ALTER TABLE lead OWNER TO pod;

--
-- Name: lead_pkey; Type: CONSTRAINT; Schema: public; Owner: pod; Tablespace: 
--

ALTER TABLE ONLY lead
    ADD CONSTRAINT lead_pkey PRIMARY KEY (id);

--
-- Name: lead_account__c; Type: INDEX; Schema: public; Owner: pod; Tablespace: 
--

CREATE INDEX lead_account__c ON lead USING btree (account__c);

--
-- Name: lead_XXXXXXXXXXXXXXXXXXXX; Type: INDEX; Schema: public; Owner: pod; Tablespace: 
--

CREATE INDEX lead_XXXXXXXXXXXXXXXXXXXX ON lead USING btree (XXXXXXXXXXXXXXXXXXXX);

--
-- Name: lead_XXXXXXXXXXXXXXXXXXXX; Type: INDEX; Schema: public; Owner: pod; Tablespace: 
--

CREATE INDEX lead_XXXXXXXXXXXXXXXXXXXX ON lead USING btree (XXXXXXXXXXXXXXXXXXXX);

--
-- Name: lead_XXXXXXXXXXXXXXXXXXXX; Type: INDEX; Schema: public; Owner: pod; Tablespace: 
--

CREATE INDEX lead_XXXXXXXXXXXXXXXXXXXX ON lead USING btree (XXXXXXXXXXXXXXXXXXXX);

--
-- Name: lead_email; Type: INDEX; Schema: public; Owner: pod; Tablespace: 
--

CREATE INDEX lead_email ON lead USING btree (email);

--
-- Name: lead_id_prefix; Type: INDEX; Schema: public; Owner: pod; Tablespace: 
--

CREATE INDEX lead_id_prefix ON lead USING btree (id text_pattern_ops);

--
-- PostgreSQL database dump complete
-- 
```

一些PG目录咒语：

```
db=> select * from pg_index where indexrelid = 'lead_email'::regclass;
 indexrelid | indrelid  | indnatts | indisunique | indisprimary | indisexclusion | indimmediate | indisclustered | indisvalid | indcheckxmin | indisready | indkey | indcollation | indclass | indoption | indexprs | indpred
------------+-----------+----------+-------------+--------------+----------------+--------------+----------------+------------+--------------+------------+--------+--------------+----------+-----------+----------+---------
  215251995 | 101034456 |        1 | f           | f            | f              | t            | f              | t          | t            | t          | 101    | 100          | 10043    | 0         | ¤        | ¤
(1 row) 
```

一些语言环境信息：

```
db=> show lc_collate;
 lc_collate  
-------------
 en_US.UTF-8
(1 row)

db=> show lc_ctype;
  lc_ctype   
-------------
 en_US.UTF-8
(1 row) 
```

我搜索了很多过去的 SO 问题，但没有一个是像这样的简单平等查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T13:11:39.380

要排除这些故障，您必须在故障排除步骤之间在桌子上运行 VACUUM ANALYZE 以查看有效的方法。否则你可能不知道究竟是什么地方发生了变化。因此，请先尝试并再次运行，看看它是否能解决问题。

接下来的运行步骤（在每个步骤之间运行真空分析和测试用例）是：

```
ALTER TABLE lead ALTER COLUMN email SET STATISTICS 1000; 
```

也许这会解决它。也许不吧。

如果这不能解决问题，请仔细查看 pg_stat 视图：

```
SELECT * FROM pg_stat WHERE table_name = 'lead'; 
```

请仔细阅读以下内容，看看您在 pg_stat 中看到了什么错误；

[http://www.postgresql.org/docs/9.0/static/planner-stats.html](http://www.postgresql.org/docs/9.0/static/planner-stats.html)

编辑：要非常清楚，`vacuum analyse`这不是故障排除的全部。但是，它必须在故障排除步骤之间运行，否则您无法确定规划器是否考虑了正确的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:38:23.150

> CREATE INDEX lead_id_prefix ON Lead USING btree (id text_pattern_ops);

text_pattern_ops 的使用在这里看起来很奇怪。如果您的 ID 是某种整数，我会尝试删除此索引作为测试。（我会毫不犹豫地在开发服务器上删除此索引。）由于您在“lead.id”上有另一个 btree 索引，我希望删除*此*索引以诱使优化器使用“lead.id”上的另一个索引”。

如果这被证明是真的，那么我将尝试更深入地挖掘原因。

# magento - Magento Bulk 产品添加到购物车

> ID：15965790
> 
> 赞同：1
> 
> 时间：2013-04-12T07:46:01.720
> 
> 标签：magento, magento-1.7

我在添加散装产品时遇到问题，我需要像

我有以这种条件出售的产品

2 包，9.50 盎司：6.78 美元（3.39/单位）

6 件装，9.50 盎司：19.32 美元（3.22/件）

如果我选择 2 Pack with QTY 2 那么我的购物车将是

2 包 (6.78) * 2 (数量) = 13.56

我会选择同样的方式

6 包 (19.22) * 2 (数量) = 115.32

我需要这样的结果。

# php - 在 PHP 中查找至少两个给定时间

> ID：15965797
> 
> 赞同：1
> 
> 时间：2013-04-12T07:46:38.743
> 
> 标签：php

有人可以帮我比较两次并找出哪个比另一个少。更少我的意思是哪个时间比另一个时间长。

从数据库中检索时间：

```
$time1 = strtotime($row[0]);
$time2 = strtotime($row2[0]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T07:50:54.230

如果您只想知道哪个日期更早，您可以简单地比较它们。

这是 PHP 手册中的一个示例：

```
$d1 = new DateTime('1492-01-01');

$d2 = new DateTime('1492-12-31');

var_dump($d1 < $d2);

var_dump($d1 > $d2);

var_dump($d1 == $d2);

?> 
```

结果 ：

```
bool(true)

bool(false)

bool(false) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:50:34.810

您必须将输入日期转换为时间戳，然后从另一个中减去一个。

```
$timestampA = 1221672010;
$timestampB = 1221671010;
$diff       = $timestampA - $timestampB;

if ( $diff > 0 ) {
  // $timestampA date is after $timestampB date
} else if ( $diff < 0 ) {
  // $timestampA date is before $timestampB date
} else {
  // dates are equal
} 
```

要将字符串日期转换为时间戳，您可以使用[`strtotime`](http://php.net/strtotime)函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T07:51:01.560

我相信 2 次是指 2 个日期。您始终可以将它们转换为时间戳，然后它们会比较这两个数字。

为此，您可以使用 strtotime 功能

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T07:52:51.973

如果您的意思是 time() 时间数据使用 min 函数： http: [//fr.php.net/min](http://fr.php.net/min)

否则，[http ://php.net/manual/en/datetime.diff.php](http://php.net/manual/en/datetime.diff.php)

```
$time1 = time();
$time2 = time()-3600;
var_dump(min($time1, $time2)); 
```

或者

```
$datetime1 = date_create('2009-10-11');
$datetime2 = date_create('2009-10-13');
$interval = date_diff($datetime1, $datetime2);
echo $interval->format('%R%a days') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T07:54:41.290

您可以使用[time()](http://php.net/manual/en/function.time.php)函数返回以自 Unix 纪元（格林威治标准时间 1970 年 1 月 1 日 00:00:00）以来的秒数测量的当前时间

或者，如果您有字符串格式的日期时间，则可以在比较之前使用[strtotime()](http://fr2.php.net/manual/en/function.strtotime.php)对其进行转换。

最小的数字是最老的时间！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T08:05:26.183

```
$time = strtotime(min(array($row[0], $row2[0]))); 
```

给你最早的时间。

# api - WSO2 ESB：HTTPS API

> ID：15965800
> 
> 赞同：4
> 
> 时间：2013-04-12T07:46:41.617
> 
> 标签：api, ssl, https, wso2, wso2esb

是否可以在 WSO2 ESB 上为 API 启用 HTTPS 协议？

> **https** ://localhost:8280/api/mySslApi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-04T03:09:41.450

您可以简单地调用 API 的 HTTPS 端点，默认情况下它是启用的。请注意，HTTPS 端口是 8243 而不是 8280。

```
https://localhost:8243/api/mySslApi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-27T19:20:03.417

默认情况下它已经启用，如果你按照 axi2.xml 配置，你会发现下面的细节，

1.对于Http

```
 <transportReceiver name="http" class="org.apache.synapse.transport.passthru.PassThroughHttpListener">
    <parameter name="port" locked="false">8280</parameter>
    <parameter name="non-blocking" locked="false">true</parameter>
    <!--parameter name="bind-address" locked="false">hostname or IP address</parameter-->
    <!--parameter name="WSDLEPRPrefix" locked="false">https://apachehost:port/somepath</parameter-->
    <parameter name="httpGetProcessor" locked="false">org.wso2.carbon.mediation.transport.handlers.PassThroughNHttpGetProcessor</parameter>
    <!--<parameter name="priorityConfigFile" locked="false">location of priority configuration file</parameter>-->
</transportReceiver> 
```

2.对于Https

```
<transportReceiver name="https" class="org.apache.synapse.transport.passthru.PassThroughHttpSSLListener">
    <parameter name="port" locked="false">8243</parameter>
    <parameter name="non-blocking" locked="false">true</parameter>
    <parameter name="HttpsProtocols">TLSv1,TLSv1.1,TLSv1.2</parameter> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-04T01:27:10.103

是的，在 WSO2 ESB 中，当我们想要保护 REST API 时，我们可以简单地通过 HTTPS 使其可用，如下所示。

```
 <resource uri-template="/view/{symbol}" methods="GET" protocol="https"> 
```

并让安全处理程序验证凭据。

```
 <handlers>
       <handler class="org.wso2.rest.BasicAuthHandler"/>
    </handlers> 
```

有关详细信息：[https ://docs.wso2.com/display/ESB490/Securing+APIs](https://docs.wso2.com/display/ESB490/Securing+APIs)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-12T08:32:47.493

我们目前通过发布者支持 BasicAuth/usernametoken 安全端点。如果发生握手错误，您可能需要编辑“HostnameVerifier”参数的axis2.xml。请查看以下链接以获取更多详细信息。 [http://docs.wso2.org/wiki/display/AM131/Adding+an+API](http://docs.wso2.org/wiki/display/AM131/Adding+an+API)

# mysql - MySQL my.cnf -- open-files-limit 导致 CPU 过载

> ID：15965801
> 
> 赞同：0
> 
> 时间：2013-04-12T07:46:47.567
> 
> 标签：mysql, my.cnf

我得到了这个服务器**Intel Xeon Quadcore E3-1230v2 和 8GBs 的 DDR3 RAM**我看到这个服务器的 CPU 用完了。它看起来严重超载。在观察“*每日进程日志*”后，我意识到下面的进程正在消耗 25% 的 CPU 资源，并且有三个这样的进程（技术错误）。以下是过程（错误）：

> /usr/sbin/mysqld --basedir/ --datadir/var/lib/mysql --usermysql --log-error/var/lib/mysql/server.yacart.com.err -- **open-files-limit16384** -- pid文件/var/lib/mysql/server.yacart.com.pid

如上述错误所示，**open-files-limit16384**似乎有问题，我尝试将 my.cnf 中的 open-files-limit 增加到 16384 但徒劳无功。下面是我的 my.cnf 现在的样子：

```
[mysqld]  
innodb_file_per_table=1  
local-infile=0  
open_files_limit=9978 
```

谁能告诉我一个好的 my.cnf 配置？哪个可以帮助我摆脱 CPU 过载？

我在从属服务器中运行了一个类似于 GoogleBot 的机器人脚本，以从互联网上挖掘数据。它在整个互联网上爬行。当我关闭这个脚本时，一切都井井有条。我想知道是否有可以应用于此脚本的修复程序？

这个机器人程序有大约 40 个数据库，每个数据库的大小为 50 - 800 MB，到目前为止，总 DB 大小约为 14 GB，我预计将来会达到 500 GB。在某一时刻（一整天）只使用一个 DB。第二天，我使用下一个 DB 等等。一旦最大的数据库达到 2 GB，我正在考虑增加 RAM。目前 RAM 似乎根本不是问题。

提前感谢你们可以提供的任何帮助。

问候，

山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T10:17:34.067

如果您有 WHM，请在**服务器配置 >> 调整设置 >> SQL下查找它**

** 让 cPanel 为您的 MySQL open_files_limit 配置确定最佳值？[?]

cPanel 将根据您的表总数在每次 MySQL 重新启动期间调整 open_files_limit 值。

# ajax - 在开发过程中代理和缓存某些ajax请求

> ID：15965807
> 
> 赞同：0
> 
> 时间：2013-04-12T07:47:18.567
> 
> 标签：ajax, proxy

我正在开发一个需要在启动时加载大量数据的单页网络应用程序。初始加载最多可能需要 10 秒，当您只想修复/检查一个小的更改时，这可能会非常令人沮丧。

启动时有两个 ajax 调用需要最多时间。理想情况下，我会运行一些代理，只要我愿意，它就可以缓存这些调用。也应该可以轻松地禁用这些响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:47:18.567

使用 Fiddler 的 AutoResponder 功能可以很容易地实现这一点。只需保存查询的响应并将其映射到自动回复规则中的规则即可。

# string - 为什么utf8和ascii兼容

> ID：15965811
> 
> 赞同：12
> 
> 时间：2013-04-12T07:47:27.680
> 
> 标签：string, utf-8, ascii

`A`在 UTF-8 中是`U+0041 LATIN CAPITAL LETTER A`. `A`在 ASCII 中是`065`.

UTF-8 如何与 ASCII 向后兼容？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-12T07:52:27.753

ASCII 仅使用 8 位字节的前 7 位。`00000000`所以从到 的所有组合`01111111`。此范围内的所有 128 个字节都映射到特定字符。

UTF-8 保留了这些精确的映射。ASCII 中由`01101011`表示的字符在 UTF-8 中也由相同的字节表示。所有其他字符都以多个字节的序列编码，其中每个字节都具有最高位集；即 UTF-8 中所有非 ASCII 字符的每个字节的格式为`1xxxxxxx`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-12T07:55:48.783

Unicode 向后兼容 ASCII，因为 ASCII 是 Unicode 的子集。Unicode 仅使用 ASCII 中的所有字符代码并添加更多字符。

虽然字符代码在 Unicode 中通常写为 0041，但字符代码是数字的，因此 0041 与（十六进制）41 的值相同。

UTF-8 不是字符集，而是与 Unicode 一起使用的编码。它也恰好与 ASCII 兼容，因为用于多字节编码的代码位于未使用的 ASCII 字符集中部分。

注意，只有 7 位 ASCII 字符集兼容 Unicode 和 UTF-8，基于 ASCII 的 8 位字符集，如 IBM850 和 windows-1250，使用 UTF-8 有的部分字符集多字节编码的代码。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-12T07:53:04.570

为什么：

因为一切都已经是 ASCII 并且具有向后兼容的 Unicode 格式使得采用变得更加容易。将程序转换为使用 UTF-8 比转换为 UTF-16 容易得多，并且该程序通过仍然使用 ASCII 继承了向后兼容的特性。

如何：

ASCII 是 7 位编码，但始终以 8 位字节存储。这意味着 1 位一直未被使用。

UTF-8 只是使用那个额外的位来表示非 ASCII 字符。

# ios - 带有本地视频文件的 AVPlayer

> ID：15965813
> 
> 赞同：4
> 
> 时间：2013-04-12T07:47:35.670
> 
> 标签：ios, nsurl

我的应用程序中有一个小视频部分。

所以我找到了这个样本，它从 url 播放 mp4 视频：[http ://www.sdkboy.com/?p=66](http://www.sdkboy.com/?p=66)

您可以在此处下载示例：[http ://www.sdkboy.com/tutorials/AVFoundation_Test3.zip](http://www.sdkboy.com/tutorials/AVFoundation_Test3.zip)

但是当我替换 NSURL 代码时

```
NSURL *url = [NSURL URLWithString:@"http://www.samkeeneinteractivedesign.com/videos/littleVid3.mp4"]; 
```

有了这个，播放本地视频，播放器不起作用。

```
NSURL *url = [NSURL URLWithString:[[NSBundle mainBundle] pathForResource:@"malina36" ofType:@"mp4"]]; 
```

该文件存在，我检查它

```
if ([[NSFileManager defaultManager] fileExistsAtPath:url.absoluteString]) {
        NSLog(@"yes");
    } else {
        NSLog(@"no");
    } 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-12T08:01:53.197

尝试使用[fileURLWithPath:](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)方法而不是 URLWithString:

# android - sqLiteDatabase.insert() 和 SQLite 错误代码 1，Android 数据库

> ID：15965817
> 
> 赞同：0
> 
> 时间：2013-04-12T07:47:44.277
> 
> 标签：android, database, sqlite

我从 Logcat 收到以下错误堆栈跟踪：

```
 SqliteDatabaseCpp(1355): sqlite returned: error code = 1

 msg = table my_table has no column named check_box_status,
 db=/data/data/com.example.dbtester/databases/my_database

 Error inserting check_box_status=1 price=210 check_box_label=testlabel

 table my_table has no column named check_box_status: , while compiling:
 INSERT INTO my_table(check_box_status,price,check_box_label) VALUES (?,?,?) 
```

我猜这与下面显示的 insert() 方法的中间参数为空有关，

```
 public void insertNewRow(int checkBoxStatus, String checkBoxLabel, int price){
          ContentValues contentValues = new ContentValues();
          contentValues.put(KEY_CHECKBOX_STATUS, checkBoxStatus);
          contentValues.put(KEY_CHECKBOX_LABEL, checkBoxLabel);
          contentValues.put(KEY_PRICE, price);
          sqLiteDatabase.insert(MYDATABASE_TABLE, null, contentValues); // <---
          } 
```

我为 sqLiteDatabase.insert() 的中间参数值设置了 null，但是我收到错误和上面显示的堆栈跟踪的原因可能是该变量不应该为 null。

从下面显示的信息中，我应该在那个现在为空的中间参数变量中放入什么？sqLiteDatabase.insert(MYDATABASE_TABLE, ?, contentValues);

请注意，我在用于创建表的字符串中明确声明了一个主键“ID INTEGER PRIMARY KEY AUTOINCREMENT”，我认为这与错误有关。

数据库初始化代码：

```
 public static final String MYDATABASE_NAME = "my_database";
    public static final String MYDATABASE_TABLE = "my_table";
    public static final int MYDATABASE_VERSION = 1;
    public static final String KEY_CHECKBOX_STATUS = "check_box_status";
    public static final String KEY_CHECKBOX_LABEL = "check_box_label";
    public static final String KEY_PRICE = "price"; 

  //create table MY_DATABASE (ID integer primary key, Content text not null);
    private static final String SCRIPT_CREATE_DATABASE =
     "CREATE TABLE IF NOT EXISTS " + MYDATABASE_TABLE + " (" + "ID INTEGER PRIMARY KEY AUTOINCREMENT, " +  
    "KEY_CHECKBOX_STATUS INTEGER, " + "KEY_CHECKBOX_LABEL TEXT, " + " KEY_PRICE INTEGER" + ");";

    SQLiteDatabase sqLiteDatabase;
    SQLiteHelper sqLiteHelper;
    Context context;

    public Database(Context c){
          context = c;
          sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
         } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:53:14.453

在您的创建 SQL 中，您将`KEY_CHECKBOX_STATUS`作为列名而不是值 ( `check_box_status`)..这就是为什么告诉`table my_table has no column named check_box_status`

所以创建应该是：

```
private static final String SCRIPT_CREATE_DATABASE =
 "CREATE TABLE IF NOT EXISTS " + MYDATABASE_TABLE + " (" + "ID INTEGER PRIMARY KEY AUTOINCREMENT, " +  
KEY_CHECKBOX_STATUS + " INTEGER, " + KEY_CHECKBOX_LABEL +" TEXT, " +  KEY_PRICE +" INTEGER" + ");"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T07:57:28.803

您的 Create Table 语法错误，因为您在引号中传递变量名称。所以像这样改变你的创建表

```
 "CREATE TABLE IF NOT EXISTS " + MYDATABASE_TABLE + " (" + "ID INTEGER PRIMARY KEY AUTOINCREMENT, " +  
            KEY_CHECKBOX_STATUS+" INTEGER, " + KEY_CHECKBOX_LABEL+" TEXT, " +  KEY_PRICE +" INTEGER" + ");"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T07:57:40.580

改变

```
private static final String SCRIPT_CREATE_DATABASE =
 "CREATE TABLE IF NOT EXISTS " + MYDATABASE_TABLE + " (" + "ID INTEGER PRIMARY KEY AUTOINCREMENT, " +  
KEY_CHECKBOX_STATUS + " INTEGER, " + KEY_CHECKBOX_LABEL + " TEXT, " +  KEY_PRICE + " INTEGER);"; 
```

# xaml - WP8 待办事项列表数据模板

> ID：15965819
> 
> 赞同：0
> 
> 时间：2013-04-12T07:47:49.213
> 
> 标签：xaml, windows-phone-8, windows-phone

在 WP 8 日历应用程序中，有一个“待办事项”部分，如下所示。很明显，他们在这里使用了 Pivot 控件。

![在此处输入图像描述](https://i.stack.imgur.com/WiTTJ.png)

但是，当我们单击“选择”按钮时，我们会看到一个新屏幕，其中包含可以检查以执行“删除”活动的项目列表。

![在此处输入图像描述](https://i.stack.imgur.com/Q1vhH.png)

当用户点击“选择”按钮时究竟发生了什么？

1.  用户是否导航到新页面（图 2）

或者

2.  其他两个枢轴项（日期、议程）是否被禁用并且 UI 已更新以反映可以检查以执行“删除”活动的项目列表。

我想在我的应用程序中实现相同的行为。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:41:58.403

@IvanCrojachKaračić 给出了一个很好的答案。

如果您想在运行时动态更改应用栏按钮，您可以这样做：

```
<phone:PhoneApplicationPage.Resources>
  <shell:ApplicationBar x:Key="appbar1"
                        IsVisible="True">
    <shell:ApplicationBarIconButton x:Name="abMain1"
                                    IconUri="/icons/appbar.favs.addto.rest.png"
                                    Text="blabla1" />
  </shell:ApplicationBar>

  <shell:ApplicationBar x:Key="appbar2"
                        IsVisible="True">
    <shell:ApplicationBarIconButton x:Name="abMain2"
                                    IconUri="/icons/appbar.favs.addto.rest.png"
                                    Text="blabla2" />
    <shell:ApplicationBarIconButton x:Name="abMain3"
                                    IconUri="/icons/appbar.cancel.rest.png"
                                    Text="blabla3" />
  </shell:ApplicationBar>
</phone:PhoneApplicationPage.Resources> 
```

然后从代码中更改它：

```
 ApplicationBar = (Microsoft.Phone.Shell.ApplicationBar) Resources["appbar1"]; 
```

和

```
 ApplicationBar = (Microsoft.Phone.Shell.ApplicationBar) Resources["appbar2"]; 
```

您可以使用大量不同的`AppBars`. 希望它的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:55:47.110

我会做的就是有这样的东西

```
<StackPanle>
    <Checkbox Visibility={Binding SomeProperty} IsChecked={Binding SomethingElse}/>
    <Label Content={Binding SomeOtherProperty}/>
</StackPanel> 
```

通过单击按钮，您只需将 SomeProperty 从 切换`Visibility.Visible`到`Visibility.Collapsed`，仅此而已。如果`SomethingElse`检查了属性中的任何项目，您只需启用其他按钮，如`Delete`, `Move`,`Foo`

编辑：我看不出为什么你不能在运行时改变可见性。只需定义明确的标准，这些标准会改变您在视图模型中的可见性属性。

要更改底部的图标，您需要执行以下操作

```
public partial class YourView
{
    private ApplicationBarIconButton _icon;
    public YourView()
    {
          _icon = (ApplicationBarIconButton)ApplicationBar.Buttons[0];
    }

    public void Foo()
    {
        if (SomeSavedState)
        {
            _icon.IconUri = new Uri("somePicture.png", UriKind.Relative);
            _icon.Text = "Delete";
        }
        else
        {
            _icon.IconUri = new Uri("someOtherPicture.png", UriKind.Relative);
            _icon.Text = "Select";
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-08T15:06:48.667

只需使用 LongListMultiSelector 并将属性 IsSelectionEnabled 设置为 true，它是一个工具包元素

# java - 在 Java 中刷新 Windows 上的 Internet 选项

> ID：15965825
> 
> 赞同：1
> 
> 时间：2013-04-12T07:48:04.663
> 
> 标签：java, windows, proxy, registry, refresh

通过 Windows（Vista、7 或 8）上的注册表更改网络配置后，我需要刷新 Internet 选项。目前，当我修改代理配置（通过 Advapi32）时，我需要重新启动浏览器以应用修改。

我发现我需要通知系统，在 C# 中： InternetSetOption(NULL, INTERNET_OPTION_SETTINGS_CHANGED, NULL, 0); InternetSetOption(NULL, INTERNET_OPTION_REFRESH, NULL, 0);

相关问题：[启用/禁用代理应用程序无法与 IE 一起正常工作](https://stackoverflow.com/questions/1393713/enabling-disabling-proxy-app-doesnt-work-properly-with-ie)

我需要在 Java 中简单地执行此操作，是否可以在不生成 Wininet 的 JNA 类/结构/枚举的情况下执行此操作？例如，我想到了 JNA 中原生的 Advapi32，或者由 System.exec 执行的命令行......

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:56:43.130

我不知道它是否会解决必须重新启动浏览器的问题，但是您可以使用该[`netsh`命令与`winhttp`](http://technet.microsoft.com/en-us/library/cc731131%28WS.10%29.aspx)更改 Windows 上的 HTTP 代理设置的[选项。](http://technet.microsoft.com/en-us/library/cc731131%28WS.10%29.aspx)

# ios - TIResourcePathManager 中的输入内存泄漏

> ID：15965826
> 
> 赞同：2
> 
> 时间：2013-04-12T07:48:07.043
> 
> 标签：ios, memory-leaks

我在使用仪器检测 iPad 设备中的内存泄漏时遇到了内存泄漏问题。

我的设备的默认键盘输入是中文，一旦我点击 UITextField 小部件，在键盘出现后，仪器就会出现内存泄漏。我想知道以前是否有人遇到过同样的问题？我的设备版本是 6.1。

以下是仪器输出的调用树。

```
<i>UIApplication sendEvent<i>
<i>_NSOperationInternal start<i>
<i>NSBlockOperation main<i>
<i>TIResourcePathManager fetchAssetsWithNames:forInputModes:updatingDictionary:continuation  TextInput<i>
<i>TIResourcePathManager fetchAssetsWithNames:continuation TextInput<i>
<i>TIResourcePathManager fetchAssetsForQueryResults:withError:updatingArray:continuation: TextInput<i> 
```

# assembly - 我可以运行在 dosbox 中切换到保护模式的汇编程序吗？

> ID：15965827
> 
> 赞同：2
> 
> 时间：2013-04-12T07:48:08.760
> 
> 标签：assembly, x86, protected-mode, dosbox, real-mode

我们正在研究一个汇编程序，它将 386 处理器从实模式切换到保护模式，然后再切换回实模式。该程序是使用 TASM 编译的。

因为这个程序需要做一些特权操作，而且需要实模式启动，所以我们需要从DOS下运行。为此，我们被告知带上软盘，这样我们就可以在大学的计算机上启动 DOS。

我想知道是否可以使用 Dosbox。但它需要在保护模式和实模式下**忠实地模拟 I386**，我不确定它是否这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T08:36:43.880

是的，您可以在 DosBox 中运行保护模式代码。我不能保证 DosBox 的 CPU 仿真代码中没有错误，并且您不会遇到任何错误，但 DosBox 确实支持保护模式。我可以在其中运行 DPMI 程序以及小型非 DPMI 保护模式程序。

# sql-server - 表分区功能 - 2008

> ID：15965829
> 
> 赞同：0
> 
> 时间：2013-04-12T07:48:14.683
> 
> 标签：sql-server, partitioning

我已经创建了一个带有辅助文件的新数据库作为休耕：

```
CREATE DATABASE XYZ_Dimensions_DW
ON PRIMARY
(NAME='DBForPartitioning_1',
FILENAME=
'E:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\XYZ_Dimensions_DW_1.mdf',
SIZE = 20,
MAXSIZE=1048576,
FILEGROWTH=20 ),
FILEGROUP FG3
(NAME = 'DBForPartitioning_2',
FILENAME =
'F:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\XYZ_Dimensions_DW_2.ndf',
SIZE = 20,
MAXSIZE=1048576,
FILEGROWTH=20 )
GO 
```

我已经创建了分区功能作为休闲：

```
CREATE PARTITION FUNCTION salesYearPartitions (int)
AS RANGE RIGHT FOR VALUES (5208);

CREATE PARTITION SCHEME salesPartitionScheme
AS PARTITION salesYearPartitions
TO ([PRIMARY], FG ) 
```

在此之后，我根据分区归档了所有数据，现在 sendoray 文件有 100 万条记录。

```
enter code here 
```

在这里，我的问题是如何将我的分区功能从 5208 更改为 5000。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T21:27:28.573

您必须使用命令来管理分区边界：`SPLIT`一个分区和`MERGE`两个相邻的分区。要更改边界，您有 2 个选项：

1.  如果你没有数据，那么

    ALTER PARTITION FUNCTION partition_function_name() MERGE RANGE 5208 ALTER PARTITION FUNCTION partition_function_name() SPLIT RANGE 5000

2.  如果您加载了大量数据，那么以其他方式执行会更快：

    ALTER PARTITION FUNCTION partition_function_name() SPLIT RANGE 5000 ALTER PARTITION FUNCTION partition_function_name() MERGE RANGE 5208

产生差异的原因是，当您拆分分区时，SQL Server 会读取并分离正在拆分的分区中的所有数据。因此，它不会拆分完整的数据集，而是仅拆分填充数据集的一半。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:52:39.177

```
ALTER PARTITION FUNCTION partition_function_name()
{ 
    SPLIT RANGE ( boundary_value )
  | MERGE RANGE ( boundary_value ) 
} [ ; ] 
```

更多在这里

[http://technet.microsoft.com/en-us/library/ms186307.aspx](http://technet.microsoft.com/en-us/library/ms186307.aspx)

# linq - 使用动态 Linq 查询过滤数据库

> ID：15965834
> 
> 赞同：1
> 
> 时间：2013-04-12T07:48:45.000
> 
> 标签：linq, linq-to-sql, entity-framework-5, linq-expressions

我有一个使用 EF 5 Code First 进行 Db 操作的 MVC 应用程序。EF 上还有通用存储库模式。

在向 DB 层发送查询之前，我进行了一些操作，例如创建动态 linq 查询并将其与另一个查询结合起来。

```
 Expression<Func<AssetItemInfo, bool>> dynamicFilter = DynamicLinqFactory<AssetItemInfo>.GetFilter(cmd.sSearch, searchColumns);
            Expression<Func<AssetItemInfo, bool>> deleteFilter = c => c.CurrentStatus != AssetStatus.Deleted;            
            var body = Expression.AndAlso(dynamicFilter.Body, deleteFilter.Body);
            Expression<Func<AssetItemInfo, bool>> filter = Expression.Lambda<Func<AssetItemInfo, bool>>(body, dynamicFilter.Parameters[0]); 
```

我在 DB 层的 Get 方法如下所示。

```
 public virtual PaginatedList<TEntity> Get(
            Expression<Func<TEntity, bool>> filter = null,
            Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>> orderBy = null,
            string includeProperties = "",
            int? page = null,
            int? take = null
         ) {
            IQueryable<TEntity> query = dbSet;

            if(filter != null) {
                query = query.Where(filter);
            }

            if(includeProperties != null) {
                foreach(var includeProperty in includeProperties.Split
                    (new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries)) {
                    query = query.Include(includeProperty);
                }
            }
            if(orderBy != null) {
                return orderBy(query).ToList().ToPaginatedList(page.Value, take.Value);
            }
            else {
                if(!page.HasValue) page = 0;
                if(!take.HasValue) take = 0;
                return query.ToList().ToPaginatedList(page.Value, take.Value);
            }
        } 
```

如您所见，有一个带有`Expression<Func<TEntity, bool>>`类型的过滤器参数。因此，如果我编写手动过滤器，它会很好地工作。但我想向前一步并在给定模型的所有属性上创建动态过滤器搜索关键字。为此，我使用下面的方法。

```
public class DynamicLinqFactory<TEntity> where TEntity : class, IDomainEntity {
        public static Expression<Func<TEntity, bool>> GetFilter(string filter, IEnumerable<string> filterTargets = null) {
            ParameterExpression c = Expression.Parameter(typeof(TEntity), "c");
            Type[] ContainsTypes = new Type[1];
            ContainsTypes[0] = typeof(string);
            MethodInfo myContainsInfo = typeof(string).GetMethod("Contains", ContainsTypes);
            if(filterTargets == null) {
                filterTargets = typeof(TEntity).GetProperties().Where(p => !p.GetMethod.IsVirtual && !p.Name.EndsWith("ID")).Select(p=>p.Name).ToList();
            }
            List<Expression> myFilterExpressions =
            filterTargets.Select<string, Expression>(s =>
              Expression.Call(
                Expression.Call(
                  Expression.Property(c, typeof(TEntity).GetProperty(s)),
                  "ToString",
                  null,
                  null
                ),
                myContainsInfo,
                Expression.Constant(filter)
              )
            ).ToList();

            Expression OrExpression = null;
            foreach(Expression myFilterExpression in myFilterExpressions) {
                if(OrExpression == null) {
                    OrExpression = myFilterExpression;
                }
                else {
                    OrExpression = Expression.Or(myFilterExpression, OrExpression);
                }
            }
            Expression<Func<TEntity, bool>> predicate = Expression.Lambda<Func<TEntity, bool>>(OrExpression, c);
            return predicate;
        }
    } 
```

上面的方法消除了虚拟成员和名称中包含“ID”后缀的成员，并生成了一个下面采样的动态表达式。

```
.Lambda #Lambda1<System.Func`2[Radore.Models.Asset.AssetItem,System.Boolean]>(Radore.Models.Asset.AssetItem $c) {
    .Call (.Call ($c.UpdateDate).ToString()
    ).Contains("tes") | .Call (.Call ($c.UpdatedBy).ToString()).Contains("tes") | .Call (.Call ($c.ServiceTag).ToString()).Contains("tes")
    | .Call (.Call ($c.Price).ToString()).Contains("tes") | .Call (.Call ($c.CurrentStatus).ToString()).Contains("tes") | .Call (.Call ($c.CreatedDate).ToString()
    ).Contains("tes") | .Call (.Call ($c.CreatedBy).ToString()).Contains("tes") | .Call (.Call ($c.Name).ToString()).Contains("tes")
    && (System.Int32)$x.CurrentStatus != 3
} 
```

但是当我尝试运行应用程序时，出现以下错误。

```
LINQ to Entities does not recognize the method 'System.String ToString()' method, and this method cannot be translated into a store expression. 
```

我删除了 ToString() 方法并简化了如下查询。

```
.Lambda #Lambda1<System.Func`2[Radore.Models.Asset.AssetItem,System.Boolean]>(Radore.Models.Asset.AssetItem $c) {
    .Call (.Call ($c.Name).ToString()).Contains("tes") && (System.Int32)$c.CurrentStatus != 3
} 
```

但是这一次我得到一个错误告诉我，`c`它没有绑定到 Linq。

您知道如何成功创建动态查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:03:36.410

最后，我可以编写一个为给定实体和搜索字符串创建 LINQ 查询的方法。此方法使用数据类型为字符串的属性。

此外，IEnumerable 参数允许您指定将包含在 LINQ 查询中的属性。

```
 public static Expression<Func<TEntity, bool>> GetFilter(string filter, IEnumerable<string> filterTargets = null) {
            ParameterExpression c = Expression.Parameter(typeof(TEntity), "c");
            Type[] ContainsTypes = new Type[1];
            ContainsTypes[0] = typeof(string);
            MethodInfo myContainsInfo = typeof(string).GetMethod("Contains", ContainsTypes);
            if(filterTargets == null) {
                filterTargets = typeof(TEntity).GetProperties().Where(p => p.PropertyType == typeof(string)).Select(p=>p.Name).ToList();
            }
            List<Expression> myFilterExpressions =
            filterTargets.Select<string, Expression>(s =>
              Expression.Call(
              Expression.Property(c, typeof(TEntity).GetProperty(s)),                
                myContainsInfo,
                Expression.Constant(filter)
              )
            ).ToList();

            Expression OrExpression = null;
            foreach(Expression myFilterExpression in myFilterExpressions) {
                if(OrExpression == null) {
                    OrExpression = myFilterExpression;
                }
                else {
                    OrExpression = Expression.Or(myFilterExpression, OrExpression);
                }
            }
            Expression<Func<TEntity, bool>> predicate = Expression.Lambda<Func<TEntity, bool>>(OrExpression, c);
            return predicate;
        } 
```

# dojo - 使用 AMD 风格创建 dojo EnhancedGrid

> ID：15965836
> 
> 赞同：0
> 
> 时间：2013-04-12T07:48:57.393
> 
> 标签：dojo

我正在尝试使用 AMD 样式创建增强网格，但面临问题。我为 dojo 1.7.1 创建了一个自定义构建

Enhancedgrid 的代码没有给出任何 javascript 错误。我正在使用的代码是：

```
<script data-dojo-config="async: true" src='./dojo/dojo.js'></script>
<script data-dojo-config="async: true" src='./dojo/mydojo.js'></script>
<script>

var dojoConfig = {
    baseUrl: "./",
    tlmSiblingOfDojo: false,
    packages: [
        { name: "dojo", location: "dojo" },
        { name: "dijit", location: "dijit" },
        { name: "dojox", location: "dojox" }
    ]
};

define(["dojox/grid/EnhancedGrid","dojo/data/ItemFileWriteStore"], function(EnhancedGrid,ItemFileWriteStore){
        /*set up data store*/
        var data = {
          identifier: 'id',
          items: []
        };
        var data_list = [
          { col1: "normal", col2: false, col3: 'But are not followed by two hexadecimal', col4: 29.91},
          { col1: "important", col2: false, col3: 'Because a % sign always indicates', col4: 9.33},
          { col1: "important", col2: false, col3: 'Signs can be selectively', col4: 19.34}
        ];
        var rows = 60;
        for(var i=0, l=data_list.length; i<rows; i++){
          data.items.push(dojo.mixin({ id: i+1 }, data_list[i%l]));
        }
        var store = ItemFileWriteStore({data: data});

        /*set up layout*/
        var layout = [[
          {'name': 'Column 1', 'field': 'id'},
          {'name': 'Column 2', 'field': 'col2'},
          {'name': 'Column 3', 'field': 'col3', 'width': '230px'},
          {'name': 'Column 4', 'field': 'col4', 'width': '230px'}
    ]];

        /*create a new grid:*/
        var grid = EnhancedGrid({
            id: 'grid',
            store: store,
            structure: layout,
            rowSelector: '20px'
         },  document.createElement('div'));

        /*append the new grid to the div*/
        dojo.byId("gridDiv").appendChild(grid.domNode);

        /*Call startup() to render the grid*/
    grid.startup();
});

</script> 
```

是否可以指出问题区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:12:47.403

**主要问题：**

您使用定义而不是要求功能！代码没有被执行！

**第二个问题：**

您将 document.createElement('div') 传递给您的网格！但它需要一个 div-id ！

这是一个工作的jsfiddle：

[http://jsfiddle.net/f8Zm7/1/](http://jsfiddle.net/f8Zm7/1/)

不要仅使用`<script>`标记添加 javascript 代码，请使用

```
<script type="text/javascript"></script> 
```

不要忘记关闭它。

jsfiddle 缺少 css 文件，所以不要指望一个好看的网格......

# java-me - 在 j2me 中使用 FTP

> ID：15965840
> 
> 赞同：0
> 
> 时间：2013-04-12T07:49:09.770
> 
> 标签：java-me, ftp

谁能告诉我如何在 j2me 中使用 FTP 发送文件..我得到了这个文件......但它不包含示例代码：

[http://ftp2me.sourceforge.net/javadoc/0.2_beta/](http://ftp2me.sourceforge.net/javadoc/0.2_beta/)

从这里我使用下面的代码，但不工作。

```
Ftp2Me ftp = new Ftp2Me("208.109.107.26", 21, "sdsd", "sdad", "Chetan"); 
```

谁能给我示例代码。

谢谢..

# c# - 从列表框中的三个项目中获取表单名称

> ID：15965844
> 
> 赞同：1
> 
> 时间：2013-04-12T07:49:31.433
> 
> 标签：c#, windows, forms

我在一个解决方案中拥有三个项目（项目 1、项目 2 和项目 3）。
每个项目都有自己的 Windows 窗体 (C#)。我正在项目 3 中编写代码。
我想要在一个列表框中列出所有项目表单名称：
这是我的代码：

```
private void GetFormNames()
{
    foreach (Assembly a in AppDomain.CurrentDomain.GetAssemblies())
    {
        AppDomain.CurrentDomain.Load(a.FullName);
        foreach (Type t in a.GetTypes())
        {
            if (t.BaseType == typeof(Form))
            {
                Form f = (Form)Activator.CreateInstance(t);
                string FormText = f.Text;
                string FormName = f.Name;
                checkedListBox1.Items.Add("" + FormText + "//" + FormName + "");
            }
        }
    }
} 
```

我收到此错误：

> 没有为此对象定义无参数构造函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:06:50.573

你打电话时

```
(Form)Activator.CreateInstance(t); 
```

这意味着类 t 有一个没有参数的构造函数。
您的表单之一不得具有无参数构造函数，这就是您有异常的原因。

您可以在调用 CreateInstance 之前对其进行测试

```
if (t.BaseType == typeof(Form) && t.GetConstructor(Type.EmptyTypes) != null) 
```

甚至更好：

```
if (t.BaseType == typeof(Form))
{
    var emptyCtor = t.GetConstructor(Type.EmptyTypes);
    if(emptyCtor != null)
    {
        var f = (Form)emptyCtor.Invoke(new object[]{});
        string FormText = f.Text;
        string FormName = f.Name;
        checkedListBox1.Items.Add("" + FormText + "//" + FormName + "");
    }
} 
```

# vim - 当键映射到 :mark 时，Vim 命令窗口输出会自动关闭 被按下

> ID：15965851
> 
> 赞同：1
> 
> 时间：2013-04-12T07:49:45.427
> 
> 标签：vim, command, shortcut

所以这就是我所拥有的

```
nnoremap M :marks<CR>       " show marks 
```

如果我手动键入命令并按回车键，它会显示得很好。其他没有“按 Enter 或键入命令继续”的命令也可以正常工作。`M`但是当我在正常模式下按时它不起作用。

我认为这种行为可能与`shortmess+=A`，但事实并非如此。知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:12:45.277

Vim 对 Ex 命令的解释与大多数其他语言不同，这就是为什么这是一个常见的陷阱。检查`:nmap M`会显示该评论包含在映射中。

您可以通过使用命令连接器结束映射来解决此问题`|`（这就是为什么您必须使用`<Bar>`将其包含到映射中）：

```
:nnoremap M :marks<CR>|       " show marks 
```

您也可以使用`:execute`（此类问题的典型解决方案），但这里最好的方法可能是将注释移到单独的前一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:58:08.747

罪魁祸首是尾随空格。在重新映射时，我应该注意不要添加空格和注释。

```
nnoremap M :marks<CR> 
```

解决了这个问题。注意后面没有评论和空格`<CR>`

# android - Eclipse机器因变量？

> ID：15965853
> 
> 赞同：1
> 
> 时间：2013-04-12T07:49:53.147
> 
> 标签：android, eclipse, variables, location

我正在两台不同的机器（家庭和工作）上开发 eclipse android projekt

每次我切换回家工作时，反之亦然，我将当前位置的项目文件夹替换为我在以前位置工作的最新版本并继续工作。

现在每次我这样做时，我还必须调整我的常量源文件，因为应用程序中的一些变量会根据我是在工作还是在家而有所不同（这些是预设的调试变量，例如我硬编码的网络服务器的 IP 地址以确保快速的工作流程）。

问题：我可以通过将这些预设变量存储在其他地方（eclipse 设置或外部文本文件）来防止源文件的调整，这样它们就不会从我以前的位置转移过来吗？我将如何进行设置？

# c# - DependencyProperty 未写在派生类中

> ID：15965855
> 
> 赞同：1
> 
> 时间：2013-04-12T07:50:00.270
> 
> 标签：c#, wpf, xaml, inheritance, dependency-properties

我正在使用 WPF/XAML 并基于`window`调用定义了我自己的视图`container`。`container`有一个 DependencyProperty 称为`CurrentElementProperty`链接到属性`CurrentElement`。我的问题是`set`该属性的方法永远不会从`DerivedContainer`. 如果我在属性注册期间更改为，它会被调用`typeof(Container)`。`typeof(DerivedContainer)`我几乎可以肯定，我在注册时做错了什么。

的定义`Container`

```
class Container : Window
{
    public static readonly DependencyProperty CurrentElementProperty = 
        DependencyProperty.Register(
            "CurrentElement",
            typeof(Element),
            typeof(Container),
            new FrameworkPropertyMetadata(
                null,
                FrameworkPropertyMetadataOptions.Inherits));
    public Element CurrentElement
    {
        get
        {
            return (Element)this.GetValue(Container.CurrentElementProperty);
        }
        set
        {
            this.SetValue(Container.CurrentElementProperty, value);
        }
    }
} 
```

XAML 的`DerivedContainer`（我删除了标准的 XML 命名空间定义）

```
<local:Container x:Class="ns.DerivedContainer"
                 xmlns:local="clr-namespace:ns">
  <local:Container.CurrentElement>
    <Element />
  </local:Container.CurrentElement>
</local:Container> 
```

背后的代码`DerivedContainer`

```
public partial class DerivedContainer : Container
{
    public DerivedContainer()
    {
        InitializeComponent();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T07:54:46.743

> 我的问题是永远不会从 DerivedContainer 调用属性的 set 方法

这不是问题 - 这是预期的行为。WPF`SetValue`直接调用而不是通过包装器。包装器的存在是为了方便其他客户端代码。如果您需要在设置属性时执行某些操作，则需要在`DependencyProperty.Register`调用中注册回调。

# android - 如何从自定义目录加载缩略图？

> ID：15965859
> 
> 赞同：0
> 
> 时间：2013-04-12T07:50:10.353
> 
> 标签：android, thumbnails, fetch

我搜索了很多，但我得到了从`Url`或获取缩略图的样本`Http`，但我实际上需要从我自己的目录中获取图像`sdcard`的缩略图而不访问`Android`默认缩略图目录，那就是我需要获取图像的缩略图从 `mnt/sdcard/myown/1.png`

有人可以帮忙吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:45:34.297

```
@Override
public void onCreate(Bundle savedInstanceState) {
    button1 = (Button) findViewById(R.id.button1);
    button1.setOnClickListener(onClickListener);
    image = (ImageView) findViewById(R.id.imageView1);

}

private OnClickListener onClickListener = new OnClickListener() {
    @Override
    public void onClick(final View v) {
        switch(v.getId()){
            case R.id.button1:
            String imagePath = Environment.getExternalStorageDirectory().toString() +"/myown/1.png";
            Bitmap bitmap = BitmapFactory.decodeFile(imagePath);
            image.setImageBitmap(bitmap);
            break;
        }
    }
}; 
```

your layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/android" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Change Image" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:57:47.853

Environment.getExternalStorageDirectory() 返回“/mnt/sdcard”

```
String imagePath = Environment.getExternalStorageDirectory().toString() + PATH_TO_IMAGE;
Bitmap bitmap = BitmapFactory.decodeFile(imagePath); 
```

# windows-phone-7 - 如何在 Windows Phone 上创建一个大文件以将磁盘填满？

> ID：15965862
> 
> 赞同：2
> 
> 时间：2013-04-12T07:50:29.640
> 
> 标签：windows-phone-7, windows-phone-8

比如我有一台 Lumia 920，它的总空间是 32G，可用空间是 24G。现在我想创建一些文件来填满磁盘，我怎样才能尽可能快地创建 24G 文件？我试过了，但是很慢。:-(

据我所知，一个应用程序（见下面的链接）可以做到这一点，但我真的不明白他是怎么做到的？写隔离存储很慢很慢。你能给我一些建议吗？

[http://www.windowsphone.com/en-us/store/app/%E7%BC%93%E5%AD%98%E6%B8%85%E7%90%86/b790919d-8ec8-40d8-b97a -10c466cedca8](http://www.windowsphone.com/en-us/store/app/%E7%BC%93%E5%AD%98%E6%B8%85%E7%90%86/b790919d-8ec8-40d8-b97a-10c466cedca8)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:05:49.857

您只需要像这样创建文件并写入一个字节：

```
FileStream fs = new FileStream(@"c:\tmp\yourfilename", FileMode.CreateNew);
fs.Seek(2048L * 1024 * 1024, SeekOrigin.Begin);
fs.WriteByte(0);
fs.Close(); 
```

这个例子将创建一个包含单字节内容的 2GB 文件！

# objective-c - 目标C中的静态方法（不是类方法）

> ID：15965865
> 
> 赞同：9
> 
> 时间：2013-04-12T07:50:33.467
> 
> 标签：objective-c, static-methods, class-method

在阅读[此](https://stackoverflow.com/questions/8089186/objective-c-difference-between-class-method-and-static-method)问题并接受该问题的答案时，我无法区分这两种方法。通过阅读示例实际上明白了这一点，但是，我无法编写自己的静态方法。

我尝试*在目标 c 静态方法中搜索创建静态方法*

这让我回到了[这个](https://stackoverflow.com/questions/2691383/how-can-i-make-a-static-method-in-objective-ci)和[这个](https://stackoverflow.com/questions/6585560/objective-c-static-method)问题的链接。但是，这里的示例是根据问题中的第一个链接的*CLASS 方法。*这让我很困惑。

谁能告诉我如何创建一个不是*类方法的**静态*方法？

 *对此的任何说明将不胜感激。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-12T07:59:45.733

您遇到的问题如下 - **Obj-C 中没有静态方法**，这就是您无法创建它们的原因。

静态方法和类方法之间的区别是语言概念之间的区别。您可以在 Java 或 C++ 等语言中找到静态方法，您将在 Obj-C 和 Ruby 等语言中找到类方法。

主要区别在于

1.  静态方法在所有实例之间共享（这在 Obj-C 中不存在）。它们根据*变量*的类型被静态调度（在编译时） 。

2.  类方法是类上的方法。在 Obj-C 和 Ruby 等语言中，类本身就是另一个类（元类）的实例。在方法声明之前使用`+`意味着该方法将在类上定义。从技术上讲，它只是一个实例方法，只是在不同的对象上。

如果你没有完全理解类方法的概念，请不要担心，这需要时间。为简化起见，您可以将其视为实例之间共享的方法，但可以在子类中覆盖它。*

# javascript - 在 Javascript 中上传具有大小和删除选项的文件

> ID：15965867
> 
> 赞同：0
> 
> 时间：2013-04-12T07:50:34.327
> 
> 标签：javascript

如何通过选择文件作为附件直接上传文件并将其显示为带有删除选项和大小的电子邮件，如我们的 Outlook。请分享 Javascript 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:42:23.477

第一：这不是为不想自己编写代码的懒惰程序员提供的社区，而是为有问题的人提供帮助的社区

第二：不可能在javascript中实际发送电子邮件或上传文件作为附件

# servlets - web.xml 中的标记不会捕获 java.lang.Throwable 异常

> ID：15965869
> 
> 赞同：3
> 
> 时间：2013-04-12T07:50:35.553
> 
> 标签：servlets, web.xml, custom-error-pages

我有一个使用 servlet 和 JSP 开发的网络应用程序。`IllegalArgumentException`如果我插入错误的参数，我将我的应用程序配置为抛出一个。然后我以这种方式配置了我的 web.xml 文件：

```
<error-page>
    <error-code>404</error-code>
    <location>/error.jsp</location>
</error-page>
<error-page>
    <exception-type>java.lang.Throwable</exception-type>
    <location>/error.jsp</location>
</error-page> 
```

当我升起 a`404 error`时，它可以工作并调用`error.jsp`，但是当我升起 a 时`java.lang.IllegalArgumentException`，它不起作用，我有 a`blank page`而不是`error.jsp`。为什么？

服务器是 Glassfish，日志显示 IllegalArgumentException 确实上升了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T14:27:03.833

你不应该抓住它并压制它，而应该让它去。

即不这样做：

```
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    try {
        doSomethingWhichMayThrowException();
    } catch (IllegalArgumentException e) {
        e.printStackTrace(); // Or something else which totally suppresses the exception.
    }
} 
```

但宁愿放手：

```
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    doSomethingWhichMayThrowException();
} 
```

或者，如果您实际上打算捕获它以进行日志记录（我宁愿为此使用过滤器，但是 ala），然后重新抛出它：

```
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    try {
        doSomethingWhichMayThrowException();
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
        throw e;
    }
} 
```

或者，如果它不是运行时异常，则重新将其包裹在 中`ServletException`，它将被容器自动解包：

```
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    try {
        doSomethingWhichMayThrowException();
    } catch (NotARuntimeException e) {
        throw new ServletException(e);
    }
} 
```

### 也可以看看：

*   [服务器如何优先使用哪种类型的 web.xml 错误页面？](https://stackoverflow.com/questions/5299169/how-does-tomcat-prioritize-which-type-of-error-page-to-use/)
*   [向与数据库交互的 Servlet 提交表单导致空白页面](https://stackoverflow.com/questions/6044204/submitting-form-to-servlet-which-interacts-with-database-results-in-blank-page)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-11T23:05:51.107

另一种（简化的）方法不是为各种情况声明多个处理程序，`<error-code>`而是`<exception-type>`有一个包罗万象的接收器，例如

```
<error-page>
    <location>/error-page.jsp</location>
</error-page> 
```

在您`error-page.jsp`的内部，您可以确定原因，无论是返回状态代码还是此处描述的异常：[https](https://www.tutorialspoint.com/servlets/servlets-exception-handling.htm) ://www.tutorialspoint.com/servlets/servlets-exception-handling.htm这些常量是标准[Servlet 3.0的一部分应用程序接口](https://www.javadoc.io/static/javax.servlet/javax.servlet-api/3.0.1/javax/servlet/RequestDispatcher.html)。

例如，`error-page.jsp`放置在 webapp 根目录中的原始响应处理程序可能如下所示：

```
Server encountered a situation
Status code: <%=(Integer) request.getAttribute(javax.servlet.RequestDispatcher.ERROR_STATUS_CODE)%>
<br>
Exception: <%=(Throwable) request.getAttribute(javax.servlet.RequestDispatcher.ERROR_EXCEPTION)%> 
```

出于安全原因，我不建议将确切的异常类型发送给客户端；这只是如何在处理程序中处理不同类型的错误和响应状态的示例`JSP`；可以使用 servlet 代替 JSP。

一个通用的包罗万象的处理程序与每个状态代码一个的处理程序当然取决于情况和要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-11T21:19:01.247

I have today the same issue. (JavaEE 7 and Glassfish 4.0)

The problem seems that the framework check it as String instead with the Class.

### String based check (the hypothesis)

When a Exception is twrown, `e.getClass()` is compared with `<exception-type>` as string. So you can't use inheritance.

Note that nested classes must be pointed as '$' instead '.' (same as getClass() method).

### Class based check

The framework create an instance of the class, and `<exception-type>` text refer to it, and the `class.isInstance()` is used to check.

This will need reflection and policy file could break it.

I hope that this response solves future issues.

# r - ggplot中geom_point（scale_colour_manual）中的填充和边框颜色

> ID：15965870
> 
> 赞同：52
> 
> 时间：2013-04-12T07:50:43.663
> 
> 标签：r, colors, ggplot2

我正在使用 ggplot 绘制散点图。我想要具有特定颜色和填充的点（例如，在`plot`，，`colour="blue", fill="cyan4"`），但我找不到如何。到目前为止，我所要做的是：

```
ggplot(df, aes(own,method)) +
  panel.configuration +
  scale_shape_identity() +  #to use the 'plot' shape format.
  geom_point(aes(color = factor(label)), position = "jitter",size=3) + 
```

（在以前`geom_point`我尝试添加`shape=21`，就像我在 中所做的那样`plot`）

```
 scale_colour_manual(values=c("A"="chocolate3","B"="cyan4")) +
  scale_fill_manual(values=c("A"="green", "B"="red")) + #DOES NOTHING...
  xlim(7,47) + ylim(7,47)+ ... etc. 
```

这就是我在没有“shape=21”的情况下得到的

![在此处输入图像描述](https://i.stack.imgur.com/gTJ0q.png)

这是我添加“shape=21”时得到的。在这两种情况下，它都会忽略`scale_fill` ![在此处输入图像描述](https://i.stack.imgur.com/ODdrr.png)

我也尝试添加`fill=c("blue","red")`geom_point，但 R 抱怨：“错误：设置美学的长度不兼容：形状、大小、填充”。

关于如何获得它的任何建议？`scale_fill`我的代码有什么问题？

非常感谢！

数据 (df) 如下所示：

```
21 15 A
24 16 A
24 17 A
28 14 A
24 15 A
22 15 A
20 18 A
24 18 A
34 9 B
38 12 B
41 19 B
42 13 B
36 12 B
40 17 B
41 14 B
37 12 B
40 13 B
37 15 B
35 15 B 
```

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-04-12T07:53:39.473

您必须使用`21 to 25`. 这些是具有`colour`和`fill`属性的：

```
ggplot(df, aes(own, method)) + 
     geom_point(colour="white", shape=21, size = 4, 
     aes(fill = factor(label))) + 
     scale_fill_manual(values=c("blue", "cyan4")) 
```

如果你也想要不同的颜色`colour`，那么：

```
ggplot(df, aes(own, method)) + 
      geom_point(aes(colour=factor(label), 
      fill = factor(label)), shape=21, size = 4) + 
      scale_fill_manual(values=c("blue", "cyan4")) + 
      scale_colour_manual(values=c("white", "black")) 
```

# java - java.util.TimeZone DST 问题

> ID：15965873
> 
> 赞同：0
> 
> 时间：2013-04-12T07:50:48.183
> 
> 标签：java, dst

java`java.util.TimeZone.inDaylightTime`和in 和有什么不一样 ？`java.util.TimeZone.useDaylightTime`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:53:36.680

`inDaylightTime`检查特定时区是否在指定为参数的时间处于夏令时，同时`useDaylightTime`检查时区是否有夏令时。

来源：[http ://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html](http://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html)

# iphone - 如何创建笔记本并将我的笔记保存在该笔记本中？

> ID：15965882
> 
> 赞同：4
> 
> 时间：2013-04-12T07:51:03.337
> 
> 标签：iphone, objective-c, ios6, evernote

1）我将一些 csv 文件逐一保存在我的印象笔记中，但我希望所有文件都在一个笔记本下。目前我在默认笔记本下保存笔记，但我想创建一个笔记本，然后我想将我的笔记保存在那个笔记本中

![我想要这样](https://i.stack.imgur.com/nj47t.png)

2）目前我正在将该csv文件转换为数据，以便在再次显示csv文件后显示一些附件

但是如何将文件直接保存到evernote而不将其转换为数据？我正在使用以下代码

```
NSData *NewdataHash = [NewFileData md5];
    EDAMData *NewedamData = [[EDAMData alloc] initWithBodyHash:NewdataHash size:NewFileData.length body:NewFileData];
    EDAMResource* Newresource = [[EDAMResource alloc] initWithGuid:nil noteGuid:nil data:NewedamData mime:@"application/csv" width:0 height:0 duration:0 active:0 recognition:0 attributes:nil updateSequenceNum:0 alternateData:nil];
    NSString *NewnoteContent = [NSString stringWithFormat:@"<?xml version=\"1.0\" encoding=\"UTF-8\"?>"
                                  "<!DOCTYPE en-note SYSTEM \"http://xml.evernote.com/pub/enml2.dtd\">"
                                  "<en-note>"
                                  "<span style=\"font-weight:bold;\">CountDown DairiesList.</span>"
                                  "<br />"
                                  "<span>Evernote logo :</span>"
                                  "<br />"
                                  "%@"
                                  "</en-note>",[ENMLUtility mediaTagWithDataHash:NewdataHash mime:@"application/csv"]];

    NSMutableArray* Newresources = [NSMutableArray arrayWithArray:@[Newresource]];

    EDAMNote *NewnewNote = [[EDAMNote alloc] initWithGuid:nil title:@"DairiesList CSV" content:NewnoteContent contentHash:nil contentLength:NewnoteContent.length created:0 updated:0 deleted:0 active:YES updateSequenceNum:0 notebookGuid:nil tagGuids:nil resources:Newresources attributes:nil tagNames:nil];
    [[EvernoteNoteStore noteStore] createNote:NewnewNote success:^(EDAMNote *note)
     {   

       }  

      failure:^(NSError *error) {
 }]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T05:20:57.957

```
 EDAMNotebook* notebook = [[EDAMNotebook alloc] initWithGuid:nil name:eObj.title updateSequenceNum:0 defaultNotebook:NO serviceCreated:0 serviceUpdated:0 publishing:nil published:NO stack:nil sharedNotebookIds:nil sharedNotebooks:nil businessNotebook:nil contact:nil restrictions:nil]; 

[noteStore createNotebook:notebook success:^(EDAMNotebook *notebook)  
{
 NSData *NewdataHash = [NewFileData md5];
    EDAMData *NewedamData = [[EDAMData alloc] initWithBodyHash:NewdataHash size:NewFileData.length body:NewFileData];
    EDAMResource* Newresource = [[EDAMResource alloc] initWithGuid:nil noteGuid:nil data:NewedamData mime:@"application/csv" width:0 height:0 duration:0 active:0 recognition:0 attributes:nil updateSequenceNum:0 alternateData:nil];
    NSString *NewnoteContent = [NSString stringWithFormat:@"<?xml version=\"1.0\" encoding=\"UTF-8\"?>"
                                  "<!DOCTYPE en-note SYSTEM \"http://xml.evernote.com/pub/enml2.dtd\">"
                                  "<en-note>"
                                  "<span style=\"font-weight:bold;\">CountDown DairiesList.</span>"
                                  "<br />"
                                  "<span>Evernote logo :</span>"
                                  "<br />"
                                  "%@"
                                  "</en-note>",[ENMLUtility mediaTagWithDataHash:NewdataHash mime:@"application/csv"]];

    NSMutableArray* Newresources = [NSMutableArray arrayWithArray:@[Newresource]];
                                   EDAMNote *newNote = [[EDAMNote alloc] initWithGuid:notebook.guid title:titileString content:noteContent contentHash:nil contentLength:noteContent.length created:0 updated:0 deleted:0 active:YES updateSequenceNum:notebook.updateSequenceNum notebookGuid:notebook.guid tagGuids:nil resources:resources attributes:nil tagNames:nil];

                                  [[EvernoteNoteStore noteStore] createNote:newNote success:^(EDAMNote *note)
                                   {
                                       NSLog(@"Note created successfully.");

                                   } failure:^(NSError *error) {
                                       NSLog(@"Error creating note : %@",error);
                                   }];

  }
                 failure:^(NSError *error)
                  {

                      NSLog(@"Error : %@",error);
                   }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T07:27:24.977

要将笔记保存在笔记本中，只需设置您创建`notebookGuid`的对象的 。`EDAMNote`您需要转换为 NSData 来存储 csv 文件。

# java - 执行顺序，静态块

> ID：15965883
> 
> 赞同：1
> 
> 时间：2013-04-12T07:51:03.187
> 
> 标签：java

我有以下场景包 com.example.test；

```
public class StaticTest {

    public static final String STATIC_VAR="Static Var";

    static{
        System.out.println("Static Block Called....");
    }
public static void init(){}
}

package com.example.test;

public class MainClass {
    public static void main(String[] args) {
        System.out.println("Test static initialization");
        String staticvar =StaticTest.STATIC_VAR;
        System.out.println("Referred static variable--> "+ staticvar);
        System.out.println("Calling static method");
        StaticTest.init();
        System.out.println("Static method invoked");
    }

} 
```

我得到的输出是

```
Test static initialization
Referred static variable--> Static Var
Calling static method
**Static Block Called....**
Static method invoked 
```

我期待的输出是

```
Test static initialization
**Static Block Called....**
Referred static variable--> Static Var
Calling static method
Static method invoked 
```

我在想，只要我提到静态变量，静态块就会被执行。

有什么解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T07:55:49.157

因为变量是`public static final`由编译器内联的。

所有对它的引用都被实际值替换，因为它不能改变，这被称为编译时间常数。

您的代码基本上被编译为：

```
System.out.println("Test static initialization");
String staticvar = "Static Var"; 
```

如果将值分配给方法的返回值 -

```
public static final String STATIC_VAR=getStaticVar();
private static String getStaticVar() {
    return "Static Var";
} 
```

你会得到你期望的结果。

有一个[很好的答案](https://stackoverflow.com/a/1406634/2071828)，解释了内联和 JLS 对编译时常量给出的保证。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T07:54:20.730

```
String staticvar =StaticTest.STATIC_VAR; 
```

不加载类`StaticTest`。相反，编译器将常量的*值内**联*到. 所以在运行时，这段代码将被执行：*`MainClass`*

 *```
String staticvar = "Static Var"; 
```

JLS 将此称为“[常量](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.4)”：

> 原始类型或 String 类型的变量，它是 final 并使用编译时常量表达式（第 15.28 节）初始化，称为常量变量。

这意味着这`StaticTest.init();`是 VM 第一次必须实际加载类。这会导致执行静态块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T07:59:20.757

主要原因是您声明`STATIC_VAR`为常量值，它将被编译器内联而不是被引用。将代码更改为

```
public static /*final*/ String STATIC_VAR="Static Var"; 
```

你会得到你期望的行为。

请参阅[第 12.4.1 节。当](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#d5e14527%3a)Java 语言规范初始化发生时：

> 类或接口类型 T 将在以下任何一项第一次出现之前立即初始化：
> 
> *   ...
> *   使用了由 T 声明的静态字段，并且该字段**不是常量**变量（第 4.12.4 节）。

`inlining`请参阅有关技术背景的常量值的其他答案。*

# javascript - 提交表单时如何使用javascript禁用页面内容

> ID：15965884
> 
> 赞同：1
> 
> 时间：2013-04-12T07:51:10.467
> 
> 标签：javascript

在我的应用程序中，当我单击表单提交时，会发生服务调用。当服务调用发生时，我需要禁用页面内容，直到加载下一页。

正如我给出的光标：等待鼠标指针变为加载符号并且不允许点击页面。但我仍然可以使用选项卡并输入或更改页面中的值。

谁能告诉代码使用透明图像禁用页面内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:54:24.693

你可以比使用透明图像更容易做到这一点：

```
$('body.waiting > *').on('click', function(e) {
    e.preventDefault();
}); 
```

我认为您应该只禁用提交输入，例如：

```
$('input').attr('disabled', 'disabled'); 
```

使用“覆盖”，在页面顶部添加一个绝对 div：

```
<div id="overlay" style="position:absolute;background:url('trans.png');left:0;top:0;width:100%;height:100%;display:none;"></div> 
```

而不仅仅是在提交表单时显示它：

```
$('#overlay').show(); 
```

# hardware - 是否可以在软件中测量计算机组件的功耗？

> ID：15965885
> 
> 赞同：0
> 
> 时间：2013-04-12T07:51:12.553
> 
> 标签：hardware

我在徘徊（最常见的）主板是否提供用于测量精确功率的硬件功能，由单个组件扩展 - CPU、RAM、WiFi等。

^(由于电压被读取并直接可用，例如在 BIOS 中，我认为也可以为功耗提供类似的接口。)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:32:35.877

搜索谷歌`fedora18 power optimization`弹出一个很好的指南。在里面，推荐使用[**PowerTOP**](http://en.wikipedia.org/wiki/PowerTOP)，并描述了它的使用。该程序“是一个软件实用程序，旨在测量、解释和最小化计算机的电力消耗”，这与回答我的问题一样接近。瞧。

# c++ - 支持响应缓存的 C++ 网络库

> ID：15965888
> 
> 赞同：2
> 
> 时间：2013-04-12T07:51:24.667
> 
> 标签：c++, http, http-caching, poco-libraries

嗨，我正在通过 POCO C++ 网络库编写一个具有 Web 请求的移动应用程序客户端。但是出于性能原因，我需要缓存 http 响应（响应缓存到磁盘）。听说可以，但是POCO Net好像没有这个支持？是否有任何其他支持响应缓存的网络库（请指点我一个例子）？

例如，如果我请求一个 JSON，我想在获取它之前检查缓存的版本是否与服务器版本是最新的，以使应用程序的整体外观更加流畅。

（我需要使用 C++，因为我在 C++ 中开发跨平台）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:39:54.037

没有开箱即用的支持，但是将[Cache Framework](http://pocoproject.org/slides/140-Cache.pdf)与基于[AbstractStrategy](http://pocoproject.org/docs/Poco.AbstractStrategy.html)的自定义策略一起用于磁盘持久性应该很简单。

要记住两件事：

1.  [缓存框架](http://pocoproject.org/slides/140-Cache.pdf)性能/大小损失（查看链接文档）
2.  [缓存控制标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9)：

> 如果请求方法、请求头字段和响应状态的要求表明它是可缓存的，则响应是可缓存的。

高温高压

# javascript - 如何使用 CSS 和 JavaScript 创建可定制的动态网格布局？

> ID：15965890
> 
> 赞同：7
> 
> 时间：2013-04-12T07:51:30.047
> 
> 标签：javascript, css, layout, less

我正在从事一个涉及大量 CSS 的项目。客户希望在主页上有一个网格布局，他希望能够通过拖放重新排列 UI 组件。这些 UI 组件可以有不同的尺寸：1x1、2x2 和 3x3。当我将 UI 项放在所需的新位置时，它应该将其他组件推到一边。任何可能的孔都应填充 1x1 组件。

[它应该如何工作](https://i.imgur.com/8cq2TEn.png)

1.  在我拖动一个组件之前
2.  拖动 2x2 组件
3.  将组件放在中间，两个 1x1 组件腾出空间并适应 2x2

请注意，网格的大小不限于 8 1x1，但它的高度和宽度应该可以扩大和变小。

我宁愿不使用表格，但除此之外我愿意接受建议。现在我刚刚使用了内联块 div，我可以拖放它来切换 jQuery DOM 对象。效果不是客户想要的： [现在如何](https://i.imgur.com/bfEoQ1i.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:47:07.320

我用同样的想法做了很多动态布局。您需要更多地考虑如何从一个块到另一个块的浮动行为在接下来的块中停止，以便它们像您想要的那样正确重新定位。所以定义一个浮动停止元素是必要的。您的积木可能适用`float:left`于`float:right`. 在某些时候，您会发现这种行为必须停止使用 CSS 最好的地方

```
.floatstop {
     clear: both; //the important code here..
     width: 100%;
     height: 1px;
     line-height: 1px;
     margin-top:-1px;
} 
```

和 HTML

```
<div class="floatstop"></div> 
```

由需要与左侧下一个块（也可能是右侧）设置边框的所有块组成，您必须定义一个基本布局，该布局为最右侧放置的块提供空间，并为其提供边框空间，否则它会在阻止之前。

但是有一种更现代的方式！您可以使用 CSS3 代码来定义您的布局。

```
.columnblock {
     width: 100%;
     column-gap: 30px;
     // for symmetric columned layouts use..
     column-count: 3; 
     // or for not symmetric layouts use..
     column-width: 280px;
}

<div class="columnblock">
    <p>Lorem Ipsum</p>
    <p>another Paragraph</p>
</div> 
```

这里还有其他要提及的内容，但您可以阅读 [http://www.w3schools.com/css3/css3_multiple_columns.asp](http://www.w3schools.com/css3/css3_multiple_columns.asp)

# sql-server-2008 - 使用字段的 MAX 选择记录返回表的 MAX 忽略条件

> ID：15965891
> 
> 赞同：3
> 
> 时间：2013-04-12T07:51:31.013
> 
> 标签：sql-server-2008, tsql, stored-procedures, cursor, max

我正在为报告做一个存储过程，我试图只获取那些具有确定字段（累计金额）的最高值的记录，问题是我似乎找不到解决方案，我想出的唯一解决方案是使用额外条件，问题是每个月（期间）字段都会更改并且并非所有记录都更新但我需要全部检索它们......（如果资产在那里折旧将不再是该表中与该资产相关的记录）

很抱歉，如果这令人困惑，我会尽力解释

该报告需要为每个供应商登记一份供应资产清单、描述、当前位置、价格以及资产还需要折旧多少。

所以，我正在做的是首先获取供应商列表，然后获取与位置相关的资产列表（使用光标）然后我尝试计算需要折旧的金额，有一个名为“DEPRECIACIONES”的表存储资产、期间以及每个期间和尚未完全折旧的每项资产从该资产中折旧的金额。当我尝试计算资产折旧的 MAX 金额，然后选择具有该 MAX 金额的项目的行时，问题就出现了，我确定我做错了什么，我的 TSQL 和一般数据库知识不是很好，我正在努力自学。

我已经上传了在这里抛出错误输出的架构、表和存储过程：

[http://sqlfiddle.com/#!3/78c32](http://sqlfiddle.com/#!3/78c32)

正确的输出应该是这样的：

```
Proveedor | Activo | Descripcion | Ubicacion Actual | Costo Adquisicion | Saldo sin depreciar | Periodo

Supplier | Asset | Description | Current Location | Cost | Money to be depreciated | Period
-------------------------------------------------------------------------------------------
Monse    |ActivoT|  texthere   |       1114       |2034.50|    RANDOM NUMBER HERE  |RandomP
Monse    |cesart |  texthere   |       4453       |4553.50|    RANDOM NUMBER HERE  |RandomP
nowlast  | activ |  texthere   |       4453       |1234.65|    RANDOM NUMBER HERE  |RandomP
nowlast  |augusto|  texthere   |       4450       |4553.50|    RANDOM NUMBER HERE  |RandomP
Sara     |Activo |  texthere   |       1206       |746.65 |    RANDOM NUMBER HERE  |RandomP 
```

我真的很感激告诉我我做错了什么（可能很多）以及如何解决它，提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:31:01.843

通过 SqlFiddle 提供完整信息的良好技能。

我没有完整的答案给你，但这可能会有所帮助。

首先，放弃光标——它很难调试并且可能很慢。重构为 SELECT 语句。这是我的尝试，在逻辑上应该等同于您的代码：

```
SELECT 
  p.Proveedor,
  a.Activo, 
  a.Descripcion, 
  Ubi.Ubicacion, 
  saldo_sin_depreciar = a.Costo_adquisicion - d.Monto_acumulado,
  d.Periodo

FROM  
  PROVEEDORES p
    INNER JOIN ACTIVOS_FIJOS a  ON a.Proveedor = p.Proveedor
    INNER JOIN DEPRECIACIONES d ON a.Activo = d.Activo 
    INNER JOIN 
      (
        SELECT 
         MAX(d1.Monto_acumulado) AS MaxMonto 
        FROM  DEPRECIACIONES d1 
         INNER JOIN  DEPRECIACIONES d2 
           ON d1.Monto_acumulado = d2.Monto_acumulado
      ) MaxAe 
    ON d.Monto_acumulado = MaxAe.MaxMonto

    INNER JOIN ACTIVO_UBICACION Ubi ON a.activo = ubi.activo
    INNER JOIN   
      (
        SELECT 
         activo, 
         ubicacion, 
         Fecha_Ubicacion, 
         RowNum  = row_number() OVER ( partition BY activo ORDER BY abs(datediff(dd, Fecha_Ubicacion, getdate())))
        FROM  
          ACTIVO_UBICACION
      ) UbU 
    ON UbU.ubicacion = Ubi.Ubicacion 

WHERE 
    -- a.Activo IS NOT NULL AND
        UbU.RowNum = 1 

ORDER BY
  p.Proveedor 
```

**注释**

我已经将定义连接的 WHERE 标准移到表列表中的 ON 子句中，这样可以更容易地查看您是如何连接表的。

请注意，所有联接都是 INNER，这可能不是您想要的 - 您可能需要一些 LEFT JOIN，我不太了解逻辑可以说。

此外，在您的游标过程中，Ubi 和 UbU 部分似乎没有显式地与其余表连接，因此我在 activo 列上画了一个 INNER JOIN，因为这是表连接的方式FK 关系。

在您的光标代码中，您将有效地得到一个可能是错误的并且运行起来也很昂贵的 CROSS JOIN。

WHERE 子句`a.Activo IS NOT NULL`不是必需的，因为 INNER JOIN 确保了它。

希望这可以帮助您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T05:03:05.367

我最终对游标使用了另一个查询并解决了问题。它可能不是最佳的，但它有效。每当我了解更多与数据库相关的东西时，我都会对其进行优化。

这是新的查询：

```
DECLARE P CURSOR STATIC
      FOR SELECT a.Proveedor, actub.activo, actub.ubicacion FROM [SISACT].PROVEEDORES p,[SISACT].ACTIVOS_FIJOS a, (SELECT activo, ubicacion, Fecha_Ubicacion, row_number() OVER (
            partition BY activo ORDER BY abs(datediff(dd, Fecha_Ubicacion, getdate()))
          ) AS RowNum FROM [SISACT].ACTIVO_UBICACION) actub WHERE RowNum = 1 AND a.Proveedor = p.Proveedor AND actub.activo = a.Activo
      OPEN P
      FETCH NEXT FROM P INTO @p, @a, @u
                 WHILE @@FETCH_STATUS = 0
                   BEGIN 
             SELECT @activo = a.Activo, @descripcion = a.Descripcion, @costo_adquisicion = a.Costo_adquisicion, @saldo_depreciado = MaxAe.MaxMonto, @periodo = d.Periodo
                FROM [SISACT].ACTIVOS_FIJOS a, [SISACT].DEPRECIACIONES d, SISACT.PROVEEDORES pro, SISACT.ACTIVO_UBICACION actu, (SELECT MAX(d1.Monto_acumulado) AS MaxMonto FROM [SISACT].DEPRECIACIONES d1 INNER JOIN [SISACT].DEPRECIACIONES d2 ON d1.Monto_acumulado = d2.Monto_acumulado WHERE d1.Activo = @a AND d2.Activo = @a) MaxAe
                WHERE a.Activo = d.Activo AND a.Activo = @a AND d.Activo = @a AND a.Proveedor = @p AND actu.Activo = @a AND actu.Ubicacion = @u
                SET @saldo_sin_depreciar = @costo_adquisicion - @saldo_depreciado
FETCH NEXT FROM P INTO @p, @a, @u
                     END
      CLOSE P
      DEALLOCATE P 
```

# php - preg_replace 与功能切换错误（？）

> ID：15965897
> 
> 赞同：1
> 
> 时间：2013-04-12T07:51:56.843
> 
> 标签：php, preg-replace

我正在尝试编写类似 BB-Code 函数的东西，它取代了例如。“[itemThumb type=file itemId=33]”，带有所选项目的缩略图。

为此，我在 uniText() 中使用 preg_replace：

```
function universeText($str){

    $str = preg_replace("#\[itemThumb type=(.*)\ typeId=(.*)\]#", showChatThumb("$1","$2") , $str);
return $str;

} 
```

因为 showChatThumb 的输出不起作用，我将 showChatThumb() 减少为：

```
function showChatThumb($itemType, $itemId){
switch($itemType){

   case 'file':
       $return = "rofl";
   break;
   case 'folder':
       $return = "lol";
   break;
   case 'link':
       $return = "asd";
   break;
return $return;
} 
```

但是 switch() 函数不知何故不适用于变量 $itemId。当我在 switch 函数之前或之后定义 $return 时，它被正确传递给了 replace 函数。我读到那个开关有时不能正常工作，所以我也尝试了 if, else if already 但它也不起作用。

但是如果我这样写，也将返回正确的值并抛出替换函数：

```
function showChatThumb($itemType, $itemId){
    return $itemType;
} 
```

我现在很无能为力，谢谢大家的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:54:37.840

尝试使用[preg_replace_callback()](http://php.net/manual/en/function.preg-replace-callback.php)：

```
function universeText($str){
    echo $str = preg_replace_callback("#\[itemThumb type=(.*)\ itemId=(.*)\]#", 'showChatThumb' , $str);
}
$str = "[itemThumb type=file itemId=33]";
function showChatThumb($param){

    switch($param[1]){

      case 'file':
         $return = "rofl";
      break;
      case 'folder':
         $return = "lol";
      break;
      case 'link':
            $return = "asd";
      break;

    }
    return $return;
}
$tes = universeText($str);
echo "<pre>"; print_r($tes); 
```

# c# - AllFramesReady 事件是否提供同步的颜色帧和深度帧？

> ID：15965898
> 
> 赞同：0
> 
> 时间：2013-04-12T07:51:59.410
> 
> 标签：c#, kinect

我是 Kinect 的新手，最近尝试使用 C# 将颜色帧和深度帧分别保存为 PNG 和二进制格式以供将来使用。该任务的一个关键要求是颜色帧和深度帧同步，即两帧应对应相同的逻辑场景。

我知道 AllFramesReady 事件可以同时提供颜色帧、深度帧和骨架帧，但是这些帧是否同步？检查保存的帧后，发现它们移动了大约两到三帧。这是可以接受的吗？

感谢所有回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:14:37.987

AllFramesReady 事件将为您提供最匹配的可用帧。如果您以 30 帧/秒的速度运行颜色和深度，则 AllFramesReady 事件将以 30 帧/秒的速度触发。如果您以较低的帧速率运行颜色，AllFramesReady 将以较慢的速率触发（并且您将错过任何与颜色帧无关的深度帧）。

[资源](http://social.msdn.microsoft.com/Forums/de-DE/kinectsdknuiapi/thread/2e172449-3d18-4914-9370-fbc1cfa31aa6)

有一个关于 AllFramesReady 事件的[教程](http://channel9.msdn.com/Series/KinectQuickstart/Camera-Fundamentals)，用于在颜色、深度和骨架帧之间同步数据。

# json - 从 WebAPI 获取 JSON 数据并将数据加载到 Store

> ID：15965901
> 
> 赞同：1
> 
> 时间：2013-04-12T07:52:12.453
> 
> 标签：json, asp.net-web-api, extjs4.2

我正在学习 ExtJS-4.2，我正在关注他们的 MVC 教程......

我构建了我的控制器、视图、模型、商店……我的商店有硬编码的数据。我有一个用于测试的有效 WebAPI，它以 json 格式发送结果......

本教程正在讨论如何从本地文件中读取并发送到 API，

**我想从 API 中读取什么并将我的数据加载到商店中......**

```
Ext.define('AM.store.Productstore',
{
    extend   : 'Ext.data.Store',
    model    : 'AM.model.Productmodel',
    autoload : true,
    proxy    : {
            type   : 'AJAX',
            url    : 'localhost/mfw/api/products/all'
            //tutorial is no help any furthur from this point on
           }
}); 
```

我的网址是`localhost/mfw/api/products/all`

我返回的 json 是

```
[{"ID":1,"Name":"aa","Category":"A","Price":200.00},
 {"ID":2,"Name":"bb","Category":"B","Price":200.00
 {"ID":3,"Name":"cc","Category":"C","Price":200.00},
 {"ID":4,"Name":"dd","Category":"D","Price":200.00},
 {"ID":5,"Name":"ee","Category":"E","Price":200.00},
 {"ID":6,"Name":"ee","Category":"F","Price":200.00}] 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T18:36:29.527

这是一个[jsfiddle](http://jsfiddle.net/delebash/PGggD/14/)，显示了包含您的数据的网格。关键之一是 json 阅读器的 root 属性。由于您的数据没有根，您可以保留根属性，它应该可以工作。如果您的数据包含在另一个字段（即根字段）中，则在阅读器中指定 root: 'myrootfield'。所以这是你的代理。同样在您的模型中使用 idProperty 指定关键字段，在您的情况下它是“ID”，我认为 extjs 默认为“id”小写的 idProperty，因此最好直接指定它。

```
 proxy    : {
            type   : 'rest',
            url    : 'localhost/mfw/api/products/all'
           reader: {
                type: 'json'
            }
           } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:51:49.567

请将您的代理类型更改为“rest”而不是“Ajax”。更多地提及您的阅读器配置。您是否将 json 键映射到模型中的字段。

请参阅 sencha 指南以获得更清晰的信息。

[http://docs.sencha.com/ext-js/4-2/#!/guide/data](http://docs.sencha.com/ext-js/4-2/#!/guide/data)

谢谢

# sql - 将 char 列转换为 varchar 值时出现 Sql 错误

> ID：15965903
> 
> 赞同：2
> 
> 时间：2013-04-12T07:52:25.720
> 
> 标签：sql, sql-server, case

我有一个 char(1) 列，但我想像这样选择此列：

```
SELECT CAST(CASE WHEN [ENABLED] = 'Y' THEN 'Yes' ELSE 'No' END AS EnabledTitle)
FROM [ICS_USERS] 
```

我收到此错误：

将 varchar 值“是”转换为数据类型位时转换失败。

有没有办法在 char 列中显示 varchar 值？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T07:55:39.170

你不需要打电话`CAST()`

```
SELECT CASE WHEN [ENABLED] = 'Y' THEN 'Yes' ELSE 'No' END AS EnabledTitle
FROM   [ICS_USERS] 
```

`CAST`转换一个值。您的转换发生在对`CASE`帐单上。

# python - Python数组索引

> ID：15965905
> 
> 赞同：0
> 
> 时间：2013-04-12T07:52:31.893
> 
> 标签：python

我正在编写一个代码来进行一些集成。但我被困在某个点（最后两行）。正如它所说的索引错误：索引超出范围。我想做的是 - 每次 r 有一个值时，它应该以 1 的增量写入空的对应索引，以便它可以跟踪它。任何帮助，将不胜感激。这是代码-

```
from pylab import*
from math import*

dx = 981
dy = 1043
bx = 534.4
by = 109.5

index = zeros(shape=(1,dx+dy))
r=0
r_max=0

for i in xrange(1,dy+1):
    for j in xrange (1,dx+1):
        if i-by > 0:
            theta = 180*atan(abs(j-bx)/(i-by))/pi
            if theta<10:
                r = round(sqrt((j-bx)**2+(i-by)**2))
                if r>0:
                    index[r]+=1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T08:02:43.243

当你`index = zeros(shape=(1,dx+dy))`创建一个二维数组时，第一个轴的大小为 1。当你`index[r]+=1`访问数组的第一个轴时，索引`r`可以大于 1。

所以看起来你想要的是摆脱第一个“无用”维度，通过做

```
index = zeros(shape=(dx+dy)) 
```

或者，索引第二个轴：

```
index[0, r]+=1 
```

或者，

```
index[:, r]+=1 
```

# android - 安卓设备上登录谷歌帐户与不登录谷歌帐户的电池寿命是多少？

> ID：15965909
> 
> 赞同：0
> 
> 时间：2013-04-12T07:52:48.177
> 
> 标签：android, operating-system

我试图找出登录到谷歌的设备的电池与未登录谷歌帐户的设备的电池是否有任何不同。我了解适用于 Android 的 Google Cloud Messaging (GCM) 是传输数据的有效方式之一。我想知道未登录谷歌帐户的设备是否会比未登录谷歌帐户的设备更频繁地唤醒设备。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:29:50.967

使用 GCM 会好很多。因为大多数需要与服务器同步的应用程序将利用 GCM 并仅在服务器上发生某些事情时发出请求，但如果您没有 GCM，某些应用程序将重复请求以确保同步状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T08:19:18.940

您可以在日志中看到您的设备在做什么。我敢打赌它的影响会非常小，但它似乎取决于应用程序的实现，如您[在此处](http://developer.android.com/google/gcm/adv.html)看到的：

让应用程序等待有一个活动的数据连接会很好，但我还没有找到任何关于它的信息。

# java - 动态选择类

> ID：15965912
> 
> 赞同：0
> 
> 时间：2013-04-12T07:52:53.930
> 
> 标签：java, inheritance, interface

首先我不知道如何称呼我的问题，所以任何关于更好标题的建议请告诉我。

我想创建一个接口，以便其他人可以添加他们的实现，然后在运行时决定使用哪个实现。

即我创建了一个接口“Food”，并且存在 2 个实现“Breakfast”和“Lunch”。在实现中，两者都有相同的方法名称和相同的参数，我想让用户在运行时调用它们中的任何一个。“makeFood() 使用早餐”或“makeFood() 使用午餐”。

一种可能性是只编译一个实现，但如果将来必须使用另一个实现，这将需要删除 .class 文件。

或者我应该使用某种类型的继承？

另外（不是优先级）：我不知道实现类名称，所以有人可以创建“晚餐”或“secondBreakfast”。这会让我陷入另一个困境，如果用户请求一个尚未实现的“类”该怎么办：SI 总是可以假设用户会知道哪些实现是可用的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T07:59:07.693

在我看来，这听起来像是策略模式将满足您的需求（GOF - [http://en.wikipedia.org/wiki/Strategy_pattern](http://en.wikipedia.org/wiki/Strategy_pattern)）。

我不清楚你希望它有多动态。拥有一个接口的两个实现和一个选择器方法是最简单的。但是您也可以动态地动态生成接口的实现，这可能对您来说太过分了。无论哪种方式，策略模式都可以抽象出这种复杂性，并使您能够根据所需的任何运行时标准选择不同的行为。

这是一个动态加载类的示例，假设您已经知道完全限定的类名并且该对象具有无参数构造函数：

```
Class c = Class.forName("java.lang.Object");
Object o = c.newInstance();

System.out.println( "o = " + o ); 
```

对于这种情况，您需要捕获的错误是：InterruptedException、ClassNotFoundException、IllegalAccessException、InstantiationException；很多，但只是以相同的方式处理它们并拒绝用户的选择。

如果你需要一个带参数的构造函数，那么：

```
Class c = Class.forName("java.lang.String");
Constructor cons = c.getConstructor( String.class ); // the args here are the expected types for the constructor that you require on the class
String s = (String) cons.newInstance( "hello" ); 
```

这将添加更多必须捕获的异常：InterruptedException、ClassNotFoundException、IllegalAccessException、InstantiationException、NoSuchMethodException、InvocationTargetException。但是再次以与以前相同的方式拒绝用户选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T08:37:39.150

如果您不知道类名并想知道所有可用的类，则需要在运行时获取接口的所有实现。这可以通过反射来实现：[http ://code.google.com/p/reflections/](http://code.google.com/p/reflections/)

看看方法`getSubTypesOf`

如果您希望用户提供自己的实现并使用这个，您有不同的选择：

1) 在启动时阅读提供的 Jar 并使用带有预配置设置的依赖注入（例如使用 Spring）。用户可以在应用程序启动之前将完全合格的类名写入设置。

2）使用插件机制，如 ServiceLoader：[http](http://docs.oracle.com/javase/6/docs/api/java/util/ServiceLoader.html) ://docs.oracle.com/javase/6/docs/api/java/util/ServiceLoader.html 或 JSPF：[http ://code.google.com/p /jspf/](http://code.google.com/p/jspf/)。

或者，如果您想在运行时阅读新的实现，您可以使用 OSGi：[http](http://en.wikipedia.org/wiki/OSGi) ://en.wikipedia.org/wiki/OSGi （看看 Apache Karaf、Eclipse Equinox 和 Apache Felix）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T07:59:59.640

您似乎在准确描述 Java 的`interface`. 例如：

食物.java：

```
interface Food {
    void makeFood();
} 
```

早餐.java：

```
class Breakfast implements Food {
    void makeFood() { System.out.println("Breakfast."); }
} 
```

午餐.java：

```
class Lunch implements Food {
    void makeFood() { System.out.println("Lunch."); }
} 
```

`Food`正如您所说，在这里我们有两种不同的实现。现在，我们可以`Food`通过构造任何一个实现类来实例化一个对象：

```
Food myFood = new Breakfast(); 
```

或者

```
Food myFood = new Lunch(); 
```

没有删除文件或类似的东西。希望这能让事情更清楚。

# types - 更清楚地了解内置、基本和原始数据类型？

> ID：15965914
> 
> 赞同：2
> 
> 时间：2013-04-12T07:52:58.130
> 
> 标签：types, primitive, built-in

我看过一些关于**基本数据类型**、**原始数据类型**和**内置数据类型的**定义。但我还不确定，我怎么能说数据类型是基本的或原始的，甚至是原始的基本的！
是否有任何好的定义可以帮助以这种方式指定数据类型的类型？

维基百科说原始数据类型由基本数据类型和内置数据类型组成。[foldoc.org](http://foldoc.org/type)说：“*有些类型是原始的 - 语言内置，没有可见的内部结构*”。

我真的很困惑！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-21T06:47:14.267

引用 Michael L. Scott 的书，*Programming Language Pragmatics*，第 7.1.1 节（类型的定义），p.322：

> 至少有三种方式来思考类型，我们可以称之为*指称*的、*构造*的和*基于抽象*的观点。[...] 从构造的角度来看，类型要么是一小部分*内置*类型（整数、字符、布尔值、实数等；也称为*原始*类型或*预定义*类型），要么是*复合*类型通过将类型*构造函数*（`record`、`array`等`set`）应用于一个或多个更简单的类型而创建。（“构造函数”这个术语的使用与 C++ 和 Java 的初始化函数无关。[...]

因此，从理论上的 POV 来看，这些术语（*原始*、*内置*、*预定义*——我也将添加*基本*）或多或少都是同义词，并且与*复合*类型相比，它们都是可以理解的，复合类型是使用它们构建的，可能在一种递归方式，某种“对类型的操作”（*一个 char 数组*、*一个指针集合*、*一个记录列表，每个记录都由一个 float 和一个 string 组成*，等等）

我同意@KeithThompson 的观点，从实际的 POV 来看，每种语言都将使用（其中一些）这些术语，为它们分配非常具体的含义，因此您必须浏览特定的语言规范才能了解在该上下文中的含义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-16T18:25:36.900

**内置数据类型**是一种语言中可用的数据类型，而不是从库或您编写的代码中添加的数据类型。通常，这是`int`或的情况`string`。

正如[Wikipedia](http://en.wikipedia.org/wiki/Primitive_data_type)所说：“关于是否应将非基本的内置类型视为‘原始’的意见各不相同”，**原始数据类型**的定义并不十分清楚。在我个人看来，**原始数据类型**与**基本数据类型**相同，即没有结构或子组件的数据类型。同样`int`是一个很好的例子，但`string`有子组件（构建它的不同字符）。另一种非原始类型是`file`，因为它具有文件名或路径等结构。

# extjs - 无法从 Ext.navigation.View [object Window] 推送新视图没有方法“up”

> ID：15965915
> 
> 赞同：0
> 
> 时间：2013-04-12T07:52:58.397
> 
> 标签：extjs, navigation, sencha-touch, sencha-touch-2, push

我在推动时遇到了这个错误。

```
Uncaught TypeError: Object [object Window] has no method 'up' 
```

我的代码

```
Ext.define('Proj.view.test.Home', {
    extend: 'Ext.navigation.View',
    xtype: 'homeTabItem',
    id: 'home',

    requires : [],
    config: {
        refs:{
            homeTab:'homeTabItem'
        },
        title : 'Home',
        iconCls: 'home',
        scrollable:true,
        listeners  : {
            element  : 'element',
            scope : this,
            delegate : 'div',
            tap      : function(e) {
                e.stopEvent();
                console.log(e.target.id);
                this.up('homeTabItem').push({
                        xtype: 'newView'

                 });
            }
        }
    },

    initialize:function(){
        Ext.Ajax.request({
            url: 'test.html',
            method: 'GET',
            callback: function(options, success, response) {
                Ext.ComponentQuery.query('homeTabItem')[0].setHtml( response.responseText );
            }
        });
    }

}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:58:32.893

创建全局变量

```
var myThis; 
```

在初始化添加`myThis=this;`

现在您可以使用 myThis 推送视图

# c# - .Net 中有关 Google Drive 的错误

> ID：15965917
> 
> 赞同：2
> 
> 时间：2013-04-12T07:53:14.037
> 
> 标签：c#, .net, namespaces, google-drive-api

我尝试学习如何使用 Google Drive 应用程序。我查看了这个网站（[https://developers.google.com/drive/quickstart-cs](https://developers.google.com/drive/quickstart-cs)）。当我为谷歌驱动器添加参考时，我使用了管理 Nuget 包。我搜索了 Google.Apis 并安装了它。当我清理和构建解决方案时，有一些错误。这些是

> 错误 1 ​​找不到类型或命名空间名称“DotNetOpenAuth”（您是否缺少 using 指令或程序集引用？）
> 
> 错误 2 命名空间“Google.Apis.Authentication”中不存在类型或命名空间名称“OAuth2”（您是否缺少程序集引用？）
> 
> 错误 3 命名空间“Google.Apis.Authentication”中不存在类型或命名空间名称“OAuth2”（您是否缺少程序集引用？）
> 
> 错误 4 名称空间“Google.Apis”中不存在类型或名称空间名称“Services”（您是否缺少程序集引用？）
> 
> 错误 5 找不到类型或命名空间名称“IAuthorizationState”（是否缺少 using 指令或程序集引用？）
> 错误 6 找不到类型或命名空间名称“NativeApplicationClient”（是否缺少 using 指令或装配参考？）

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-07T07:17:26.830

在 MVC 项目中遵循[https://developers.google.com/drive/quickstart-cs示例时出现类似的构建错误。](https://developers.google.com/drive/quickstart-cs)此示例在控制台应用程序中构建和执行良好。

在 MVC 应用程序中找到 OAuth 2.0 的不同代码示例（部分：Web 应用程序 (ASP.NET MVC)） [https://developers.google.com/api-client-library/dotnet/guide/aaa_oauth](https://developers.google.com/api-client-library/dotnet/guide/aaa_oauth)

或者 [https://code.google.com/p/google-api-dotnet-client/source/browse/Drive.Sample/?repo=samples](https://code.google.com/p/google-api-dotnet-client/source/browse/Drive.Sample/?repo=samples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-28T19:57:03.057

DotNetOpenAuth.OAuth2 我通过 nuget 找到

# intellij-idea - Intellij 11.1.5 - 项目特定路径变量

> ID：15965921
> 
> 赞同：4
> 
> 时间：2013-04-12T07:53:19.413
> 
> 标签：intellij-idea, path-variables, system-variable

我正在使用 Intellij 11.1.5。我们是一个庞大的团队，并且有一个非常复杂的项目设置。所以我们制作了一个模板，当有人需要设置一个新项目时，我们只需克隆它，她就可以开始了。我想自动化的另一件事是创建运行配置。一种这样的配置会启动一个自定义 bat 文件，该文件需要一个表示用户特定路径的参数。我想知道是否可以将该值存储为特定于每个项目的路径变量。也许在我项目的 .idea 文件夹中的某个地方。我知道 Intellij 将其存储在其 .IntelliJIdea11\config\options\path.macros.xml 文件中，但有没有办法调整它？

任何其他允许我在本地存储传递给运行配置脚本的参数的想法都会很有用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:46:44.837

恐怕你在IDEA中做不到，但是你可以直接在`.bat`文件中使用一些环境变量而不是使用参数（或者如果可能的话，重写批处理脚本来自动检测这个值）。指示您的用户定义此环境变量。

IDEA 路径变量是全局变量，不能特定于项目。

# apache - 对 Apache VirtualHosts 进行编程以使站点可以从两个端口访问

> ID：15965924
> 
> 赞同：0
> 
> 时间：2013-04-12T07:53:26.113
> 
> 标签：apache, http, proxy, config, virtualhost

我的服务器端位于[http://example.co.uk](http://example.co.uk)，可通过网络浏览器（或通过正常的 http 请求）访问[http://example.co.uk](http://example.co.uk)。但是，为了让我的应用程序能够访问服务器端，我希望它能够访问端口 5678 上完全相同的内容。所以我尝试在我的 apache 配置中的 virtualHosts 中对此进行编程：

```
<VirtualHost 184.107.24.1:80>
    ServerName example.co.uk
    ServerAlias www.example.co.uk
    DocumentRoot /home/example/public_html
    ServerAdmin webmaster@example.co.uk
    UseCanonicalName Off
    CustomLog /usr/local/apache/domlogs/example.co.uk combined
    CustomLog /usr/local/apache/domlogs/example.co.uk-bytes_log "%{%s}t %I .\n%{%s}t %O ."
    ## User example # Needed for Cpanel::ApacheConf
    UserDir enabled example
    <IfModule mod_suphp.c>
        suPHP_UserGroup example example
    </IfModule>
    <IfModule !mod_disable_suexec.c>
        <IfModule !mod_ruid2.c>
            SuexecUserGroup example example
        </IfModule>
    </IfModule>
    <IfModule mod_ruid2.c>
        RUidGid example example
    </IfModule>
    ScriptAlias /cgi-bin/ /home/example/public_html/cgi-bin/

    # To customize this VirtualHost use an include file at the following location
    # Include "/usr/local/apache/conf/userdata/std/2/example/example.co.uk/*.conf"

</VirtualHost> 
```

（这就是我最初的）。我尝试添加`Listen 5678`和添加关于代理请求的 3 行：

```
ProxyRequest Off
ProxyPass / http://example.co.uk:5678/
ProxyPassReverse / http://example.co.uk:5678/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:49:03.803

将您的 ports.conf 文件编辑为：

```
NameVirtualHost *:80
Listen 80
NameVirtualHost *:5678
Listen 5678 
```

通过更改 VirtualHost 定义

```
<VirtualHost 184.107.24.1:80 184.107.24.1:5678> 
```

# javascript - 对象中的函数

> ID：15965926
> 
> 赞同：0
> 
> 时间：2013-04-12T07:53:31.557
> 
> 标签：javascript, function, object

JS-伙计们，我遇到了一个小测试脚本的问题。

我有这个JS：

```
var button = {
    lastClick: 0,
    nowTime: new Date().getTime(),
    go: function () {
        var diff = this.nowTime - this.lastClick; 
        if (diff < 3000) alert('Too fast:' + diff / 1000); 
        lastClick = this.nowTime;
    }.bind(this)
}; 
```

这个HTML：

```
<input type="button" value="Go"  onClick="button.go();" /> 
```

`go`-function 应该使用我的 -object 中的and`nowTime`值`lastClick`，`button`但它们是*undefined*。有谁能够帮我？

[JS-小提琴](http://fiddle.jshell.net/8u4Du/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T07:55:01.080

那是因为`this`在你进行绑定时是未定义的（所以你绑定到`window`）。

你可以这样做 ：

```
var button = {
    lastClick: 0,
    nowTime: new Date().getTime()
};
button.go = function () {
    var diff = this.nowTime - this.lastClick; 
    if (diff < 3000) alert('Too fast:' + diff / 1000); 
    this.lastClick = this.nowTime;
}.bind(button); 
```

您还缺少一个`this.`before `lastClick`。

另一种方法是使用闭包/工厂：

```
var button = (function(){
  var lastClick = 0;
  var nowTime = new Date().getTime();
  return {
    go: function () {
      var diff = nowTime - lastClick; 
      if (diff < 3000) alert('Too fast:' + diff / 1000); 
      lastClick = nowTime;
    }
  }
})(); 
```

不同之处（可能对您有利也可能没有）是按钮的内部状态隐藏在此版本中（这些字段通常被称为“私有”）。

如果您希望 nowTime 始终是当前时间，请不要存储它：

```
var button = (function(){
  var lastClick = 0;
  return {
    go: function () {
      var nowTime = new Date().getTime();
      var diff = nowTime - lastClick; 
      if (diff < 3000) alert('Too fast:' + diff / 1000); 
      lastClick = nowTime;
    }
  }
})(); 
```

# c# - 使用 C# 的 LINQ to SQL

> ID：15965929
> 
> 赞同：1
> 
> 时间：2013-04-12T07:53:37.413
> 
> 标签：c#, linq, linq-to-sql

在 C# 2008 windows 应用程序中，我有以下指向 sql server 2008 r2 数据库的 linq to sql 语句。以下查询返回 null。但是有记录要取。

//代码

```
 string SubmissionPkgID = "valid string value";
   var varGoodTransCount = (from t in rData.Transactions
   join iw in rData.Ibooks on t.ImportID equals iw.ImportID
   join ip in rData.IPackages on iw.PID equals ip.PID
   where (ip.trc_num != null) && ip.trc_num == SubmissionPkgID
   group ip by ip.trc_num into g
   select new { trc_num = g.Key, Frequency = g.Count() }).FirstOrDefault(); 
```

注意：SubmissionPkgID 确实包含有效值。我穿在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:55:49.423

您的 linq 查询看起来不错，它必须工作。rData.IPackages.trc_num 是 int 还是 mumeric 对吗？所以你可以使用 HasValue 而不是检查 Null 值。

//代码

```
string SubmissionPkgID = "valid string value";
var varGoodTransCount = (from t in rData.Transactions
                        join iw in rData.Ibooks on t.ImportID equals iw.ImportID
                        join ip in rData.IPackages on iw.PID equals ip.PID
                        where (ip.trc_num.HasValue)  && ip.trc_num == SubmissionPkgID
                        group ip by ip.trc_num into g
                        select new { trc_num = g.Key, Frequency = g.Count() })
   .FirstOrDefault(); 
```

希望这会帮助你。

# objective-c - 如何让场景跟随我的精灵？

> ID：15965933
> 
> 赞同：1
> 
> 时间：2013-04-12T07:53:52.300
> 
> 标签：objective-c, cocos2d-iphone, kobold2d

我一直试图让我的场景跟随我的玩家精灵，但由于某种原因它没有跟随。谁能解释为什么？我试过以下教程，但没有运气。这是我当前的代码：

```
[self setViewpointCenter:Player.position];

    -(void)setViewpointCenter:(CGPoint) position {
    CGSize winSize = [[CCDirector sharedDirector] winSize];

    int x = MAX(position.x, winSize.width / 2);
    int y = MAX(position.y, winSize.height / 2);
    x = MIN(x, (theMap.mapSize.width * theMap.tileSize.width) - winSize.width / 2);
    y = MIN(y, (theMap.mapSize.height * theMap.tileSize.height) - winSize.height / 2);
    CGPoint actualPosition = ccp(x, y);

    CGPoint centerOfView = ccp(winSize.width/2, winSize.height/2);
    CGPoint viewPoint = ccpSub(centerOfView, actualPosition);
    self.position = viewPoint;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:27:43.863

废弃我的原始代码，并用 LearnCocos2D 推荐的干净代码替换它

```
[self runAction: [CCFollow actionWithTarget:Player]]; 
```

再次感谢 LearnCocos2D。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T00:42:38.193

我不确定我是否清楚地理解您要做什么，但我想您可能希望地图移动到玩家身后？
如果是这种情况，您可以尝试移动地图而不是自己。我的项目中有一个非常相似的功能，基本上只有一行不同，那就是最后一行。

```
self.position = viewPoint; 
```

这是它在我的代码中的显示方式：

```
map.position = viewPoint; 
```

希望有帮助！

# android - 如何连接到 Wifi ScanResult 项目

> ID：15965936
> 
> 赞同：4
> 
> 时间：2013-04-12T07:53:54.777
> 
> 标签：android, wifimanager

我正在尝试创建自定义 WifiSettings。

我创建一个活动：

```
package manual;    
import java.util.ArrayList;
import java.util.HashMap;    
import java.util.List;    
import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;    
import android.content.Intent;     
import android.content.IntentFilter;    
import android.net.wifi.ScanResult;    
import android.net.wifi.WifiConfiguration;   
import android.net.wifi.WifiManager;    
import android.os.Bundle;    
import android.util.Log;   
import android.view.View;    
import android.view.View.OnClickListener;    
import android.widget.AdapterView;    
import android.widget.Button;    
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.ImageButton;
import android.widget.ListView;    
import android.widget.SimpleAdapter;    
import android.widget.Switch;
import android.widget.TextView;    
import android.widget.Toast;

public class WiFiDemo extends Activity implements OnClickListener
 {      
    WifiManager wifi;       
    ListView lv;
    TextView textStatus;
    Button buttonScan;
    Switch enable;
    int size = 0;
    List<ScanResult> results;

    String ITEM_KEY = "key";
    ArrayList<HashMap<String, String>> arraylist = new ArrayList<HashMap<String, String>>();
    SimpleAdapter adapter;

    /* Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.wifi);
        buttonScan = (Button) findViewById(R.id.updateWifi);
        buttonScan.setOnClickListener(this);
        enable     = (Switch) findViewById(R.id.switch1);
        lv = (ListView)findViewById(R.id.listView1);

        wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
        enable.setChecked(wifi.isWifiEnabled());
        enable.setOnCheckedChangeListener(new OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton compoundbutton, boolean flag) {
                wifi.setWifiEnabled(flag);
                if(flag){
                    arraylist.clear();
                    lv.setVisibility(View.VISIBLE);
                    buttonScan.setEnabled(true);
                    wifi.startScan();
                }else{
                    lv.setVisibility(View.INVISIBLE);
                    buttonScan.setEnabled(false);
                }
            }
        });
        this.adapter = new SimpleAdapter(WiFiDemo.this, arraylist, R.layout.wifi_item, new String[] { ITEM_KEY }, new int[] { R.id.list_value });
        lv.setAdapter(this.adapter);
        lv.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                int a = lv.getSelectedItemPosition();

            }
        });

        registerReceiver(new BroadcastReceiver()
        {
            @Override
            public void onReceive(Context c, Intent intent) 
            {
               results = wifi.getScanResults();
               size = results.size();
               for(int i=size-1;i>=0;i--){
                   HashMap<String, String> item = new HashMap<String, String>();                       
                   item.put(ITEM_KEY, results.get(i).SSID);
                   arraylist.add(item);
               }
               if(size>0)
                   adapter.notifyDataSetChanged();
            }
        }, new IntentFilter(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION));                    
    }

    public void onClick(View view) 
    {
        arraylist.clear();          
        wifi.startScan();
        Toast.makeText(this, "Scanning....", Toast.LENGTH_SHORT).show();

    }    
} 
```

当用户单击 ListView 的一项时，它需要连接到该 wifi，所以

```
lv.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View view) {
        int a = lv.getSelectedItemPosition();
        ScanResult wifiChoosed = results.get(a);            
        //WHAT I NEED TO DO HERE? 
    }
}); 
```

我需要做什么`ScanResult wifiChoosed = results.get(a);`才能连接到wifi？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:03:00.203

```
 WifiManager wifiManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);
    // setup a wifi configuration
    WifiConfiguration wc = new WifiConfiguration();
    wc.SSID = "\"YOUR_SSID\"";
    wc.preSharedKey = "\"YOUR_PASSWORD\"";
    wc.status = WifiConfiguration.Status.ENABLED;
    wc.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.TKIP);
    wc.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.CCMP);
    wc.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_PSK);
    wc.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP);
    wc.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP);
    wc.allowedProtocols.set(WifiConfiguration.Protocol.RSN);
    // connect to and enable the connection
    int netId = wifiManager.addNetwork(wc);
    wifiManager.enableNetwork(netId, true);
    wifiManager.setWifiEnabled(true); 
```

# asp.net - 在哪里放置硬编码的字符串？

> ID：15965937
> 
> 赞同：1
> 
> 时间：2013-04-12T07:53:55.057
> 
> 标签：asp.net

我有带有组合框的 ASP.NET 页面，其中有一些项目。它看起来如下：

```
<telerik:RadComboBox runat="server" ID="cboExportToExcelChoice" EnableViewState="True" Width="100%" AutoPostBack="True">
    <Items>
        <telerik:RadComboBoxItem Text="Selected records" Value="Selected records" />
        <telerik:RadComboBoxItem Text="All records" Value="All records" />
    </Items>
</telerik:RadComboBox> 
```

如您所见，文本和值字符串是硬编码的。我可以把字符串放在哪里不被硬编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:56:45.537

将文本放入资源文件并在代码隐藏中获取值。

[http://msdn.microsoft.com/en-us/library/ms227427(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms227427%28v=vs.100%29.aspx)

# ruby - 确保多个变量具有不同的值

> ID：15965938
> 
> 赞同：3
> 
> 时间：2013-04-12T07:53:58.837
> 
> 标签：ruby

我必须比较多个变量并检查它们是否不同。有什么流畅的方法可以做到这一点吗？我可以

```
var1 = 3
var2 = "test"
var3 = 100

if var1 != var2 && var1 != var3 && var2 != var3
  ...
end 
```

但是，如果变量列表越来越长，这就变得不方便了。我想过类似的事情，`var1 != var2 != var3`但这不起作用。所以也许有一个简单的 Ruby 方式来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T09:09:19.850

您可以使用`uniq`' 破坏性对应物[`uniq!`](http://www.ruby-doc.org/core-2.0/Array.html#method-i-uniq-21)来确定数组是否包含重复项。`nil`如果没有找到重复项，则返回：

```
if ![var1, var2, var3].uniq!
  # no duplicates
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T07:58:25.660

一种方法可能是使用 Array#uniq。

```
inputs = [var1, var2, var3]

if inputs.uniq == inputs
  # ...
end

# or

if inputs.uniq.length == inputs.length
  # ...
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T07:58:34.717

你可以做这样的事情

```
a = [var1\. var2, var3]

if a.length == a.uniq.length
 ..
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T07:56:53.460

您可以使用映射来存储它们，并将其长度与输入变量进行比较。

# c++ - Matplotlib 和 C++ 中嵌入式 python 的子解释器

> ID：15965940
> 
> 赞同：0
> 
> 时间：2013-04-12T07:54:06.087
> 
> 标签：c++, python, python-3.x, matplotlib

我刚刚在我的 c++ 嵌入式 python 编辑器中添加了子解释器，以便为每次执行提供一个干净的解释器。

```
 PyThreadState* tmpstate = Py_NewInterpreter();
  PyThreadState_Swap(tmpstate);
  ... run the script ...
  Py_EndInterpreter(tmpstate); 
```

我自己的模块正在工作，我测试了 numpy 没有任何问题。问题出在matplotlib上

如果我第一次运行它，一切看起来都很好。我第二次得到：

```
<class 'TypeError'>: attribute of type 'NoneType' is not callable:   File "<string>", line 1, in <module>

  File "C:\Python33\lib\site-packages\pylab.py", line 1, in <module>
from matplotlib.pylab import *

  File "C:\Python33\lib\site-packages\matplotlib\__init__.py", line 152, in <module>
from matplotlib.rcsetup import (defaultParams,

  File "C:\Python33\lib\site-packages\matplotlib\rcsetup.py", line 19, in <module>
from matplotlib.fontconfig_pattern import parse_fontconfig_pattern

  File "C:\Python33\lib\site-packages\matplotlib\fontconfig_pattern.py", line 25, in <module>
from matplotlib.pyparsing_py3 import Literal, ZeroOrMore, \

  File "C:\Python33\lib\site-packages\matplotlib\pyparsing_py3.py", line 3275, in <module>
_escapedHexChar = Combine( Suppress(_bslash + "0x") + Word(hexnums) ).setParseAction(lambda s,l,t:unichr(int(t[0],16)))

   File "C:\Python33\lib\site-packages\matplotlib\pyparsing_py3.py", line 2961, in __init__
self.leaveWhitespace()

File "C:\Python33\lib\site-packages\matplotlib\pyparsing_py3.py", line 2587, in      leaveWhitespace
self.expr = self.expr.copy()

  File "C:\Python33\lib\site-packages\matplotlib\pyparsing_py3.py", line 705, in copy
cpy = copy.copy( self )

  File "C:\Python33\lib\copy.py", line 89, in copy
rv = reductor(2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:16:51.640

这似乎是 Python 3.3 中的一个错误：http: [//bugs.python.org/issue17408](http://bugs.python.org/issue17408)

问题是 ：

```
The reason is in Objects/typeobject.c: import_copyreg() has a static cache of the copyreg      module.
When the interpreter stops, the module is filled with None... but gets reused in the next     instance.

Resetting this "mod_copyreg" variable to NULL fixes the issue.
pickle is also broken for the same reason. 
```

# ios - 如何在没有 GPUImageFilterGroup 的情况下使用 GPUImageLookupFilter？

> ID：15965948
> 
> 赞同：3
> 
> 时间：2013-04-12T07:54:34.187
> 
> 标签：ios, opengl-es-2.0, gpuimage

我对理解 GPUImage 有疑问。具体来说，我不知道如何使用 GPUImageLookupFilter。例如，我在 GPUImageAmatorkaFilter 中有几个使用示例。但是在 GPUImageFilterGroup 中使用了 LookupFilter，我也不明白。我想知道我是否可以单独使用 LookupFilter。

我试过这个：

```
GPUImageLookupFilter *lookup = [[GPUImageLookupFilter alloc] init];

UIImage *image = [UIImage imageNamed:@"amatorka.png"];
GPUImagePicture *lookupImageSource = [[GPUImagePicture alloc] initWithImage:image];    
[lookupImageSource addTarget: lookup atTextureLocation: 1];
[lookupImageSource processImage];

GPUImagePicture *inputImg = [[GPUImagePicture alloc] initWithImage:inputImage];
[inputImg addTarget:lookup atTextureLocation: 1];
[inputImg processImage];

UIImage *quickFilteredImage = [lookup imageFromCurrentlyProcessedOutput]; 
```

但它不起作用，它像这样崩溃：

```
Assertion failure in -[GPUImageLookupFilter createFilterFBOofSize:], PathToSource/GPUImageFilter.m:369
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Incomplete filter FBO: 36054' 
```

我肯定需要初始化其他东西，但是...... 那么，任何人都可以帮助我使这一小段代码工作吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T05:56:49.973

感谢 Brad Larson 的回答：

> 一方面，您将两个图像都添加到纹理位置 1，因此其中一个覆盖了另一个。我相信，您需要将输入图像添加到纹理位置 0 并将查找模式添加到位置 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-13T14:02:20.037

这是我个人使用它的方式：

```
- (UIImage *)filterImage:(GPUImagePicture *)originalImageSource withLUTNamed:(NSString *)lutName
{
    GPUImagePicture *lookupImageSource = [[GPUImagePicture alloc] initWithImage:[UIImage imageNamed:lutName]];
    GPUImageLookupFilter *lookupFilter = [[GPUImageLookupFilter alloc] init];

    [originalImageSource addTarget:lookupFilter];
    [lookupImageSource addTarget:lookupFilter];

    [lookupFilter useNextFrameForImageCapture];
    [originalImageSource processImage];
    [lookupImageSource processImage];

    return [lookupFilter imageFromCurrentFramebufferWithOrientation:UIImageOrientationUp];
} 
```

# android - InputMethodService：如何锁定方向？

> ID：15965953
> 
> 赞同：0
> 
> 时间：2013-04-12T07:54:47.997
> 
> 标签：android, android-orientation, android-input-method

我正在实现一个 InputMethodService。我发现在某些用例中，很容易无意中转动设备，从而改变屏幕方向。不幸的是，这意味着应用程序的视图被重新创建并且输入法屏幕消失了。

[在Android](https://stackoverflow.com/questions/582185/android-disable-landscape-mode)等众多问题中提出的答案 - 禁用横向模式？ 为活动工作，但不为输入法服务工作。我无法控制这些活动，它们是由第 3 方编写的；另外，也只是我的输入法容易出现无意识的方向变化，其他输入法锁定方向是错误的。

可能只有当设备几乎水平时我才应该锁定方向。

也许我可以暂时得到加速度计专用。

那么：**如何暂时禁用 InputMethodService 的方向更改？**

# php - nginx更改phpmyadmin文件夹名称更改错误

> ID：15965954
> 
> 赞同：3
> 
> 时间：2013-04-12T07:54:58.387
> 
> 标签：php, apache, configuration, nginx

我有我的 phpmyadmin 设置

```
 location /phpmyadmin {
               root /usr/share/;
               index index.php index.html index.htm;
               location ~ ^/phpmyadmin/(.+\.php)$ {
                       try_files $uri =404;
                       root /usr/share/;
                       fastcgi_pass 127.0.0.1:9000;
                       fastcgi_index index.php;
                       fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
                       include /etc/nginx/fastcgi_params;
               }
               location ~* ^/phpmyadmin/(.+\.(jpg|jpeg|gif|css|png|js|ico|html|xml|txt))$ {
                       root /usr/share/;
               }
        }
        location /phpMyAdmin {
               rewrite ^/* /phpmyadmin last;
        } 
```

我正在寻找更改文件夹名称，以便我可以通过 /secure 访问 phpmyadmin

```
 location /secure {
               root /usr/share/;
               index index.php index.html index.htm;
               location ~ ^/secure/(.+\.php)$ {
                       try_files $uri =404;
                       root /usr/share/;
                       fastcgi_pass 127.0.0.1:9000;
                       fastcgi_index index.php;
                       fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
                       include /etc/nginx/fastcgi_params;
               }
               location ~* ^/secure/(.+\.(jpg|jpeg|gif|css|png|js|ico|html|xml|txt))$ {
                       root /usr/share/;
               }
        } 
```

但它一直给我 404 未找到，任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:09:04.973

以下工作和测试

```
location /pma/ {
    alias /usr/share/phpmyadmin/;
}

location ~ ^/pma/(.+\.php)$ {
    alias /usr/share/phpmyadmin/$1;
    fastcgi_pass 127.0.0.1:9000;
    fastcgi_index  index.php;
    fastcgi_param  SCRIPT_FILENAME  $request_filename;

    # From fastcgi_params
    include fastcgi_params;
    fastcgi_param  DOCUMENT_ROOT      /usr/share/phpmyadmin;
} 
```

关键是设置如下

```
fastcgi_param  DOCUMENT_ROOT      /usr/share/phpmyadmin; 
```

这是一个在 fastcgi_params 中获取 se 的变量，但是当它低于它时，它就像一个魅力，将两个地方的“pma”更改为你想要的任何东西，它会起作用......不需要符号链接

干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-21T05:34:26.643

尝试这个：

```
location /secure {
    alias /usr/share/phpmyadmin;
    index index.php index.html index.htm;

    location ~ ^/secure/(.+\.php)$ {
        alias /usr/share/phpmyadmin/$1;
        fastcgi_split_path_info ^(.+\.php)(/.+)$;

        include fastcgi_params;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME /usr/share/phpmyadmin/$1;
        fastcgi_pass php;
    }

    location ~* ^/secure/(.+\.(jpg|jpeg|gif|css|png|js|ico|html|xml|txt))$ {
        alias /usr/share/phpmyadmin/$1;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T09:39:55.780

像这样的东西应该工作。

```
location /secure/ {
    alias /usr/share/phpmyadmin/;

    location ~ ^/secure/(.+\.php)$ {
        alias /usr/share/phpmyadmin/$1;
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include /etc/nginx/fastcgi_params;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T08:24:22.417

你需要`alias`在这种情况下使用。

```
location /secure/ {
           alias /usr/share/phpmyadmin/; 
```

使用上述设置，所有请求都`/secure/`将被丢弃到`/usr/share/phpmyadmin/`.

# c++ - 打开 CV 通用 Mat 函数头

> ID：15965957
> 
> 赞同：5
> 
> 时间：2013-04-12T07:55:09.443
> 
> 标签：c++, templates, opencv

在 OpenCV 中，像这样访问`Mat`对象中的像素是很常见的：

```
float b = A.at<float>(4,5); 
```

问题是，如果您不知道先验数据的类型，就会陷入困境。有没有办法编写接受`Mat`带有模板类型的通用函数头`T`？我想为线性代数计算构建函数，我不想用一个`if`子句分隔`double`and `float`。就像是：

```
 void func(Mat <T> a) { 
     a.at<T>(3,4) = ... 
```

这在 OpenCV 中可行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T08:56:44.473

似乎另一种方法是使用`Mat_`对象而不是`Mat`：

```
template<typename T>
void func(Mat_ <T> a) {
   cout << a(0,0) << endl;
} 
```

如果要将 a 传递`Mat`给`func`，则必须指定类型：

```
Mat a;
func(Mat_<float>(a)); 
```

如果您使用与原始类型不同的`Mat`类型，OpenCV 将为您执行转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T08:01:44.360

这可以通过模板化你的函数来实现：

```
template<typename T>
void func(Mat a) { 
    a.at<T>(3,4) = ... 
```

但请注意，您没有简单的方法将类型 T 限制为仅 double 或 float，并且您的算法可能不适用于其他类型，但这可能不是实际问题。

还要注意使用模板的缺点：使用模板[的缺点是什么？](https://stackoverflow.com/questions/2734990/what-are-the-disadvantages-of-using-templates)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T13:32:19.230

[OpenCV 2 Cookbook](http://www.laganiere.name/opencvCookbook/)第 40 页声称这是不可能的。另外，关于 Mat_：

" 使用 cv::Mat 类的 at 方法有时会很麻烦，因为必须将返回的类型指定为每次调用的模板参数。在矩阵类型已知的情况下，可以使用 cv::Mat_ class 是 cv::Mat 的模板子类。

```
cv::Mat_<uchar> im2= image; // im2 refers to image 
im2(50,100)= 0; //access to row 50 and column 100 
```

由于 cv::Mat_ 元素的类型是在创建变量时声明的，因此 operator() 方法在编译时知道要返回哪种类型。”

**编辑**：使用 Mat.type()

```
Mat image=imread("image.bmp");
cout<<image.type(); 
```

控制台输出：

```
16 
```

Wiki：该方法返回矩阵元素类型，一个 id，兼容 CvMat 类型系统，如 CV_16SC3 或 16 位有符号 3 通道数组等。

# arrays - 平均 numpy 数组的特定部分

> ID：15965961
> 
> 赞同：2
> 
> 时间：2013-04-12T07:55:19.673
> 
> 标签：arrays, numpy, average

我正在尝试比较 numpy 数组的两个部分：

```
 a_matr = np.zeros([time_steps, 2], dtype=float) 
```

我用对应于时间步长的整数 0->1000 迭代地填充第一列，并用该时间步长的人口密度填充第二列。每次完成给定的时间步长 n 的周期后，我想比较前两个周期的平均值，即范围的平均值：a_matr[in*2,:] 到 a_matr[in,:]，与范围 a_matr[in,:] 到 a_matr[i,:] 的平均值相比。

由于 n 应该是任意的，有没有办法自动选择这样的范围，并将其传递给 np.average()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:09:34.953

如果我正确理解了这个问题，两个平均值可以这样计算：

```
a_matr[i-n*2 : i-n, :].mean()
a_matr[i-n : i, :].mean() 
```

顺便说一句，如果你在每次迭代中计算两个平均值，你最终会计算两次。相反，您可以将先前的平均值保存在一个变量中，并且在每次迭代中只计算最新的平均值。

# jquery - 通过缓存 JSON 响应提高自动完成性能

> ID：15965964
> 
> 赞同：0
> 
> 时间：2013-04-12T07:55:33.983
> 
> 标签：jquery, json, autocomplete, fcbkcomplete

我正在使用这个自动完成插件（FCBautocomplete）。我在字段中输入每个字符以获取结果，一个请求被发送到服务器。由于我的数据太大，我担心所有可能发生的内存崩溃以及时间。假设我有一个名为“John Smith”的联系人，将发送 10 个请求（返回所有结果，然后根据我输入的字符显示结果），这太贵了。现在我的问题是缓存如何帮助我？是否可以缓存 JSON 响应并从该缓存响应中获取其余的搜索结果（即用户输入第一个字符，当用户输入第二个字符和其余部分时，所有结果都将生成为 JSON 响应字符，而不是发送另一个请求，它从缓存的 JSON 响应中搜索）。

请让我知道这个问题的一个很好的解决方案，因为我担心性能。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-22T09:01:21.753

您在 ajax 调用上尝试此代码。

```
 var cache = {};
$.ajax({
    url : ajax.url + '&suggestions=' + $.trim(queryText),
    type : 'POST',
    dataType : 'json',
    success: function(data){
        if(data.value.length > 0){
            addItemFeed(data, etext);
            cache = data;
            bindEvents();
        }else{
            feed.hide();
        }
    }
}); 
```

只需分配一个名为缓存的对象并将您的数据放在缓存中，并尝试在页面上的任何位置访问此结果以避免不必要的 ajax 调用。

希望这可以帮助...！！！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-22T09:16:18.773

在 javascript 中定义全局变量可以解决您的查询。

```
window.AutoCompleteCacheVariable = ""; 
```

# node.js - 奇怪的 beforeunload 事件问题

> ID：15965965
> 
> 赞同：0
> 
> 时间：2013-04-12T07:55:37.110
> 
> 标签：node.js, websocket, socket.io

我发现了一个奇怪的问题，与`beforeunload`事件有关。

看看这段代码——

客户端 JavaScript：

```
var socket = io.connect('http://localhost:1337');

socket.on('connect', function() {
    window.addEventListener("beforeunload", function () {
        socket.emit('out');
    });
}); 
```

服务器节点.js：

```
/* Basics */
var express = require('express'),
    app = express(),
    server = require('http').createServer(app),
    io = require('socket.io').listen(server);

server.listen(1337, null);

io.set('transports', ['xhr-polling']);

// routing
app.get('/', function (req, res) {
    res.sendfile("index.html");
    app.use(express.static(__dirname));
});

io.sockets.on('connection', function (socket) {
    socket.on('out', function() {
        console.log('disconnected');
    });
}); 
```

如果我继续启动服务器并`localhost:1337`关闭选项卡，则服务器不会登录`disconnected`。

我发现如果我删除该行 -`io.set('transports', ['xhr-polling']);`
服务器将记录`disconnected`。

为什么服务器不登录`disconnected`xhr-polling？

感谢所有试图提供帮助的人。

# sql-server - Table-per-hierarchy (TPH) 继承与实体框架

> ID：15965967
> 
> 赞同：0
> 
> 时间：2013-04-12T07:55:45.017
> 
> 标签：sql-server, entity-framework, entity-framework-4, sql-server-2012

我有以下基础（抽象模型）：

```
public abstract class StatusMessage
{
    public int Id { get; set; }

    /// <summary>
    /// Message
    /// </summary>
    /// [Required]
    public string Description { get; set; }

    public DateTime? CreationDate { get; set; }

    public int UseraccountId { get; set; }
    public virtual Useraccount Useraccount { get; set; }
} 
```

而这个模型是从StatusMessage派生的：

```
public class ProjectStatusMessage : StatusMessage
{
    public int ProjectId { get; set; }
    public virtual Project Project { get; set; }
} 
```

在我的上下文中，我构建了一个 StatusMessage 集：

```
public IDbSet<StatusMessage> StatusMessage { get; set; } 
```

在我的初始化程序中，我尝试构建一个新的项目状态消息并将其保存到数据库中：

```
var statusMessages = new List<StatusMessage>
{
    new ProjectStatusMessage
    {
        Description = "Test-Project-Status-Message",
        ProjectId = 1,
        UseraccountId = 1
    }                   
};
statusMessages.ForEach(s => context.StatusMessage.Add(s));
context.SaveChanges(); 
```

执行代码时，编译器会抛出异常。“ProjectStatusMessage_Project”中的插入和外键约束存在冲突。冲突在表“dbo.Project”的“Id”列中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:36:02.017

我自己发现了问题。我的初始化程序中的顺序是错误的。我首先创建了项目状态，然后是项目...

# javascript - 我想使用 raphael 将鼠标悬停事件添加到我的代码中？

> ID：15965968
> 
> 赞同：0
> 
> 时间：2013-04-12T07:55:46.770
> 
> 标签：javascript, d3.js, raphael, circle-pack

```
var raphael = new Raphael(document.body,500,500);
raphael.setStart();
var d3_raphael = d3.raphael(raphael);
var stuff = {className:"", children:[
{className:"TVI",  packageName:'aa', value:2000},
{className:"SIC",  packageName:'aa', value:1520},
{className:"RTP1", packageName:'bb', value: 1400},
{className:"SIC",  packageName:'aa', value:1220},
{className:"RTP1", packageName:'bb', value: 1100},
{className:"SIC",  packageName:'aa', value:920},
{className:"RTP1", packageName:'bb', value: 800},
{className:"SIC",  packageName:'aa', value:1520},
{className:"RTP1", packageName:'bb', value: 1400},
{className:"SIC",  packageName:'aa', value:1220},
{className:"RTP1", packageName:'bb', value: 1100},
{className:"SIC",  packageName:'aa', value:920},
{className:"RTP2  manoj", packageName:'bb', value: 550}
]};

var r = 400,
format = d3.format(",d"),
fill = d3.scale.category10();

var bubble = d3.layout.pack()
.sort(function(a, b) {return b.value - a.value;})
.size([r, r]);

 var chart = d3_raphael.select("body").append("svg:svg")
.attr("width", r)
.attr("height", r)
.attr("class", "bubble");    
 var node = chart.selectAll("circle")
.data(bubble.nodes(stuff))
.enter().append("circle")
    .attr("class", "node")
    .attr("cx",function(d) { return d.x; })
    .attr("cy",function(d) { return d.y; })
    .attr("r", function(d) { return d.r; })
    .attr("fill", function(d) { return fill(d.packageName); })
    .mouseover(function() { 
    circle.append("<p>MouseOver</p>");
}); 
```

但这给了我错误 `Uncaught TypeError: Object [object Array] has no method 'mouseover'`。我想在它上面添加所有鼠标悬停事件

如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:47:10.413

在 d3 中执行此操作的方法是使用以下`on()`函数：

```
.on("mouseover", function() { 
    d3.select(this).append("<p>MouseOver</p>");
}); 
```

请注意，`<p>`标签在 SVG 中不起作用——但是您可以使用`foreignObject`. 例如，请参见[此处](http://bl.ocks.org/mbostock/1424037)。

# ios - 替换文档目录中的图像然后在表格视图中显示更改的图像中的问题

> ID：15965973
> 
> 赞同：0
> 
> 时间：2013-04-12T07:55:50.610
> 
> 标签：ios, nsdocumentdirectory

我使用以下代码替换文档目录中的图像

```
 NSLog(@"%@",_selectedimage);
        if([self string:pathOfDocDic containsText:@"Test_"]){

            NSLog(@"_selectedName%@",_selectedimage);
            NSData* data = UIImagePNGRepresentation(selectionView1.image);
            [data writeToFile:_selectedName atomically:YES]; 

          // no need to change database cus path going be same 
```

我只是通过放置具有相同目录路径和相同名称的新图像来更改图像。所以在那之后图像在文档目录中得到改变

现在的问题是，当我回到表格视图时，在文档目录中的图像显示与以前相同，图像已更改，但如果我关闭应用程序并重新启动，表格视图中的图像不会改变，然后它会改变我该如何解决这个问题？

# c# - 加载网络。动态地将 DLL 文件放入我的项目中

> ID：15965974
> 
> 赞同：0
> 
> 时间：2013-04-12T07:55:51.470
> 
> 标签：c#, dll

我不想要这个：`Assembly.LoadFrom(PathToAssembly)`。

我需要真正将运行时代码中的 dll 带到我的项目中，然后在没有激活器类的情况下正常使用它的类。就像我加载网络一样。dll 文件不是在运行时添加到我的项目中，但现在我需要在运行时添加。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T08:02:43.787

在这种情况下，您将遵循接口模式。您可以在其中创建具有所有所需方法存根的接口类。您仍将执行您的 Assembly.Load，但随后将生成的激活对象强制转换为您的接口类。

我没有 c# 中的示例，但是这个 vb.net 应该很容易理解。

```
Dim alib As Byte() = System.IO.File.ReadAllBytes(Application.StartupPath & "\\PeriodicMinimumsUtilities.dll")
Dim adeb As Byte() = System.IO.File.ReadAllBytes(Application.StartupPath & "\\PeriodicMinimumsUtilities.pdb")
Dim assembly As System.Reflection.Assembly = System.Reflection.Assembly.Load(alib, adeb)
Dim type As Type = Assembly.GetType("PeriodicMinimumsUtilities.frmPeriodicMinimumsReconcilliation")
Dim obj As Fireblade.POS.Business.IPeriodicMinimumsUtilities = Activator.CreateInstance(type) 
```

界面：

```
Public Interface IPeriodicMinimumsUtilities

    WriteOnly Property Database() As Meritsoft.GolfRez.Data.Database
    Function LoadMinimumsDataSource(ByVal v_fiscalYear As String, ByVal v_fiscalPeriod As Integer) As DataSet
    Function GetMinimumsSpent(ByVal v_fiscalYear As String, ByVal v_fiscalPeriod As Integer) As DataTable
    Function LoadFiscalPeriodsDataSource(ByVal ImposeLimit As Boolean) As DataSet

End Interface 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T08:00:12.493

1.  您需要像通常那样引用 DLL 才能“使用”它
2.  然后，使用`LoadFrom`或者，例如，您可以将程序集作为资源嵌入，并从流中加载它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T08:02:39.670

除了 .Net 提供的方法之外，没有其他方法可以在运行时在 .Net 中动态加载程序集`Assembly`。也许您有一个与您提到的方法调用相关的更具体的问题。如果是这样，请通过更新您的问题来指定它，以便社区可以为您提供帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T08:11:27.507

您不能使用类型信息（通常使用类）并在运行时加载 dll，因为您将没有类型信息可供编译。

您可以正常使用接口并针对接口加载 dll，或者您可以仅引用 dll 并正常使用类。

第三种选择（但一个糟糕的想法）是反映您尝试使用的所有类，使用辅助方法和字符串来识别属性和方法。这不是使用类的正常方式，但它实际上会在不存在类型信息的情况下编译。

# android - 在我的自定义视图中膨胀部分布局后无法通过 id 找到子视图

> ID：15965980
> 
> 赞同：0
> 
> 时间：2013-04-12T07:56:21.800
> 
> 标签：android, android-custom-view, inflate, findviewbyid

我有以下表示 FlashCard 的复合视图，并且只能以编程方式创建。

```
public class FlashCardView extends LinearLayout {

private FlashCard flashCard;

public FlashCardView(Context context, FlashCard flashCard) {
    super(context);
    this.flashCard = flashCard;

    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    inflater.inflate(R.layout.flashcard, this);

    ((TextView)findViewById(R.id.lbl_lesson)).setText(flashCard.getLesson()); //line 23
    ((TextView)findViewById(R.id.lbl_box)).setText(flashCard.getBox());

}
} 
```

我正在膨胀的 xml 看起来像这样：

```
<merge xmlns:android="http://schemas.android.com/apk/res/android">
<LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center_vertical|center_horizontal"
        android:layout_weight="1">

    <TextSwitcher
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/textSwitcher"
            >

        <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="New Text"
                android:id="@+id/germanText"
                android:textSize="24sp"
                android:textIsSelectable="false"
                />

        <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="New Text"
                android:id="@+id/spanishText"
                android:textSize="24sp"/>
    </TextSwitcher>
</LinearLayout>

<LinearLayout
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="20dp"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp">

    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="New Text"
            android:id="@+id/lbl_box"
            android:layout_weight="1"/>

    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="New Text"
            android:id="@+id/lbl_lesson"
            android:layout_weight="1"
            android:gravity="right"/>
</LinearLayout>
</merge> 
```

但是，当尝试使用 findViewById() 查找子视图时，我在第一次 findViewById 调用时收到以下异常：

```
04-12 00:17:20.829: ERROR/AndroidRuntime(31308): FATAL EXCEPTION: main
    java.lang.RuntimeException: Unable to start activity ComponentInfo{ch.crisi.congusto_a2/ch.crisi.congusto_a2.ConGustoA2}: android.content.res.Resources$NotFoundException: String resource ID #0x1
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
    at android.app.ActivityThread.access$600(ActivityThread.java:141)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5041)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: android.content.res.Resources$NotFoundException: String resource ID #0x1
    at android.content.res.Resources.getText(Resources.java:230)
    at android.widget.TextView.setText(TextView.java:3769)
    at ch.crisi.congusto_a2.FlashCardView.<init>(FlashCardView.java:23)
    at ch.crisi.congusto_a2.ConGustoA2.onCreate(ConGustoA2.java:30)
    at android.app.Activity.performCreate(Activity.java:5104)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
    ... 11 more 
```

我也尝试过这种方法：

```
 View v = inflater.inflate(R.layout.flashcard, null, false);
    v.findViewById(...) 
```

..并阅读了很多关于SO的内容，但到目前为止还没有找到问题的原因。我正在与 IntelliJ IDEA 合作，并且还对项目进行了重建。

**更新** 我将抽认卡 xml 的根元素更改为线性布局和膨胀，现在将文本设置如下，它可以工作。感谢所有的评论！

```
 LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v = inflater.inflate(R.layout.flashcard, null, false);

    TextView tv = (TextView) v.findViewById(R.id.lbl_lesson);
    tv.setText(String.valueOf(flashCard.getLesson()));

    tv = (TextView) v.findViewById(R.id.lbl_box);
    tv.setText(String.valueOf(flashCard.getBox())); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T08:47:23.280

Solution (see comments):

Find the `TextView` with:

```
View v = inflater.inflate(R.layout.flashcard, null, false);
TextView tv = (TextView)v.findViewById(R.id.lbl_lesson); 
```

And make sure you're setting the text on the `TextView` with a `String`, not a direct resource (`int`).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T08:42:51.477

确保您的方法`getLesson()`返回一个`string`. 如果它返回`int`，您将得到这个确切的错误，因为该`setText()`方法假定您正在尝试从 R 设置字符串资源。

尝试`((TextView)findViewById(R.id.lbl_lesson)).setText(Integer.toString(flashCard.getLesson()));`

# c# - mvc ajax 从模态提交

> ID：15965983
> 
> 赞同：0
> 
> 时间：2013-04-12T07:56:29.800
> 
> 标签：c#, ajax, asp.net-mvc-3

我调用一个模态，它允许用户选择一堆动态创建的复选框，然后将表单提交给控制器，该控制器保存传递给它的 FormCollection 中的所有信息，然后对调用模态的页面执行 RedirectToAction。

我希望能够仍然将内容保存在表单中，但是，我不想重定向到调用模态的页面，而是希望留在模态中。

**模态的**

```
<script type="text/javascript">
// Close Modal when done.
function CloseModal() {
    $("#SkillModalWindow").modal("hide");
}
</script>

@using (Ajax.BeginForm("Save", "SkillGroup", null, new AjaxOptions
{
    HttpMethod = "Post",
    OnSuccess = "CloseModal"
},
new { id = "CreateSkillGroups" }))
{
@Html.ValidationSummary(true)
@Html.Hidden("JobRoleId", (int)ViewBag.JobRoleID)

<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Add New Skills to Job Role</h3>
</div>
<div class="modal-body" id="CreateModal">@Html.Partial("_Create")</div>
<div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button type="submit" class="btn btn-primary">Save</button>
</div>
} 
```

**控制器动作**

```
[HttpPost]
public ActionResult Save(FormCollection formCollection)
{

foreach (var key in formCollection.AllKeys)
{
    do stuff.....

}
return RedirectToAction("Index");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:01:42.513

您可以返回包含模态标记的局部视图，而不是重定向：

```
[HttpPost]
public ActionResult Save(FormCollection formCollection)
{

    foreach (var key in formCollection.AllKeys)
    {
        do stuff.....

    }
    return PartialView("_Modal");
} 
```

`jquery.unobtrusive-ajax.js`如果您希望`Ajax.BeginForm`助手工作，还请确保您已将脚本包含在主视图中。

# java - 使用 JAVA 从 Socket 读取时减少 CPU 开销

> ID：15965984
> 
> 赞同：0
> 
> 时间：2013-04-12T07:56:32.443
> 
> 标签：java, multithreading, sockets

我有两个线程会增加 CPU 开销。1\. 以同步方式从套接字读取。2.等待接受来自其他客户端的连接

问题 1，我只是想读取来自客户端的任何数据，但我不能使用 readline，因为传入的数据有我标记的换行符以了解消息的标题结尾。所以我在线程中使用这种方式，但它增加了 CPU 开销

```
 public static String convertStreamToString(TCPServerConnectionListner socket) throws UnsupportedEncodingException, IOException, InterruptedException {

        BufferedReader reader = new BufferedReader(new InputStreamReader(socket.getSocket().getInputStream()));
        // At this point it is too early to read. So it most likely return false
        System.out.println("Buffer Reader ready? " + reader.ready());
        // StringBuilder to hold the response
        StringBuilder sb = new StringBuilder();
        // Indicator to show if we have started to receive data or not
        boolean dataStreamStarted = false;
        // How many times we went to sleep waiting for data
        int sleepCounter = 0;
        // How many times (max) we will sleep before bailing out
        int sleepMaxCounter = 5;
        // Sleep max counter after data started
        int sleepMaxDataCounter = 50;
        // How long to sleep for each cycle
        int sleepTime = 5;
        // Start time
        long startTime = System.currentTimeMillis();
        // This is a tight loop. Not sure what it will do to CPU
        while (true) {
            if (reader.ready()) {
                sb.append((char) reader.read());
                // Once started we do not expect server to stop in the middle and restart
                dataStreamStarted = true;
            } else {
                Thread.sleep(sleepTime);
                if (dataStreamStarted && (sleepCounter >= sleepMaxDataCounter)) {
                    System.out.println("Reached max sleep time of " + (sleepMaxDataCounter * sleepTime) + " ms after data started");
                    break;
                } else {
                    if (sleepCounter >= sleepMaxCounter) {
                        System.out.println("Reached max sleep time of " + (sleepMaxCounter * sleepTime) + " ms. Bailing out");
                        // Reached max timeout waiting for data. Bail..
                        break;
                    }
                }
                sleepCounter++;
            }

        }
        long endTime = System.currentTimeMillis();

        System.out.println(sb.toString());
        System.out.println("Time " + (endTime - startTime));

        return sb.toString();
    } 
```

问题 2，我不知道这样做的最佳方法是什么，我只是有一个线程不断等待其他客户端并接受它。但这也需要大量的 CPU 开销。

```
 // Listner to accept any client connection
    @Override
    public void run() {

        while (true) {
            try {
                mutex.acquire();
                if (!welcomeSocket.isClosed()) {
                    connectionSocket = welcomeSocket.accept();
                   // Thread.sleep(5);
                }

            } catch (IOException ex) {
                Logger.getLogger(TCPServerConnectionListner.class.getName()).log(Level.SEVERE, null, ex);
            } catch (InterruptedException ex) {
                Logger.getLogger(TCPServerConnectionListner.class.getName()).log(Level.SEVERE, null, ex);
            }
            finally
            {
                mutex.release();
            }

        }
    }
} 
```

Profiler 图片也会有所帮助，但我想知道为什么 SwingWorker 线程要花那么多时间？ ![在此处输入图像描述](https://i.stack.imgur.com/9gOJA.png)

问题一的更新代码：

```
 public static String convertStreamToString(TCPServerConnectionListner socket) throws UnsupportedEncodingException, IOException, InterruptedException {

            byte[] resultBuff = new byte[0];
            byte[] buff = new byte[65534];
            int k = -1;
            k = socket.getSocket().getInputStream().read(buff, 0, buff.length);
                byte[] tbuff = new byte[resultBuff.length + k]; // temp buffer size = bytes already read + bytes last read
                System.arraycopy(resultBuff, 0, tbuff, 0, resultBuff.length); // copy previous bytes
                System.arraycopy(buff, 0, tbuff, resultBuff.length, k);  // copy current lot
                resultBuff = tbuff; // call the temp buffer as your result buff

        return new String(resultBuff);
    }

}
        ![snapshot][2] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:00:49.180

只需摆脱`ready()`呼叫并*阻止。*在 ready() 为 false 时所做的一切实际上都是在浪费时间，*包括*睡眠。将`read()`阻塞恰好合适的时间。A`sleep()`不会。您要么睡眠时间不够长，这会浪费 CPU 时间，要么睡眠时间过长，这会增加延迟。偶尔你可能会睡到正确的时间，但这是 100% 的运气，而不是好的管理。如果您想要读取超时，请使用读取超时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T08:23:33.380

您似乎在等待一段时间后没有更多数据。

我建议你使用[Socket.setSoTimeout(timeout in seconds)](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#setSoTimeout%28int%29)

一个更好的解决方案是不需要通过一个协议来执行此操作，该协议允许您知道何时到达数据末尾。如果您的服务器实施不当并且您无法修复它，您只会这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:14:07.273

对于问题 1。100% CPU 可能是因为您正在从 BufferedReader.read() 读取单个字符。相反，您可以将数据块读取到数组并将其添加到您的字符串构建器。

# breeze - 如果键具有日期字段，则 saveChanges 失败（版本 1.2.8）

> ID：15965985
> 
> 赞同：1
> 
> 时间：2013-04-12T07:56:38.837
> 
> 标签：breeze

我们有一个具有三个关键字段的实体，其中一个是日期（不要问 - 它是一个没有其他明显键的摘要视图）。

在将更改保存到上述实体后处理来自服务器的响应时，Breeze 抛出“*此密钥已附加”错误。*

保存更改后， *MergeEntity*中会出现问题。似乎初始查找未能在客户端上找到实体，因此它尝试再次添加它导致错误。

在 MergeEntity 的顶部附近，我们发现以下行...

```
var entityKey = EntityKey._fromRawEntity(node, entityType); 
```

...返回一个 entityKey._keyInGroup == "1535:::44::: **2013-02-28T11:00:00.000Z** "。请注意看起来像 JSON 日期字符串的第三个关键字段。

后来，当新实体（错误地）创建其 entityKey._keyInGroup == "1535:::44::: **Fri Mar 01 2013 00:00:00 GMT+1300 (New Zealand Daylight Time)** "时。现在第三个字段看起来像一个真正的 JavaScript 日期。

当我们点击这条线时，错误终于发生了......

```
attachEntityCore(em, targetEntity, EntityState.Unchanged); 
```

...获取“*此密钥已附加*”错误，因为我们刚刚保存的实体显然一直在客户端缓存中。

* * *

**更新：我对 Breeze 的破解让这个工作......**

1) 我更改了 _ *fromRawEntity*函数以检查日期并正确转换它们，以便我们获得稍后为真实实体生成的相同键值。（此代码是从*updateEntity*函数复制的，因此行为应该相同）。

```
ctor._fromRawEntity = function (rawEntity, entityType) {
    var keyValues = entityType.keyProperties.map(function (p) {
        var val = rawEntity[p.nameOnServer];
        if (p.dataType.isDate && val) {
            if (!__isDate(val)) {
                val = DataType.parseDateFromServer(val);
            }
        }
        return val;
    });
    return new EntityKey(entityType, keyValues);
}; 
```

2) Breeze 现在在保存更改后找到了实体，但是......当 Breeze 尝试使用从服务器返回的值更新实体属性时，我得到了一个错误。我怀疑这是由于*defaultPropertyInterceptor*函数中的一个问题，该函数正在检查属性值是否已更改...

```
// exit if no change
if (newValue === oldValue) {
    return;
} 
```

比较日期时，这将始终返回 false，因此我将这一行修改为：

```
if (newValue === oldValue || (dataType && dataType.isDate && newValue && oldValue && newValue.valueOf() === oldValue.valueOf())) {
    return;
} 
```

从我最初的测试来看，一切似乎都在工作，但我非常感谢那些更熟悉微风的人的任何想法:)

**更新**：也许最后一个片段会更轻松，因为......

```
// exit if no change
var comparable = dataType && getComparableFn(dataType);
if (newValue === oldValue || (comparable && comparable(newValue) === comparable(oldValue))) {
    return;
} 
```

...尽管考虑到它在每个属性集中运行，这增加了一些代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:34:20.480

**编辑：**这已在 Breeze v1.3.0 中修复，现在可用。

* * *

同意，这是一个错误！它将在下周初的下一个版本中修复。（我们现在有一个包含日期作为主键一部分的测试：）

并感谢您发现、分析和报告它。分析确实有帮助。

# java - 在不丢失旧数据的情况下向treeMap的函数添加值

> ID：15965986
> 
> 赞同：1
> 
> 时间：2013-04-12T07:56:43.317
> 
> 标签：java, map, save, ioexception, treemap

我有一张地图：

```
Map<String, DistributorAdd> map= new TreeMap<String, DistributorAdd>(); 
```

我将它保存在 file.txt

```
FileOutputStream  fos = new FileOutputStream("Distrib.txt");
        ObjectOutputStream oos = new ObjectOutputStream(fos);
        oos.writeObject(map);
        oos.close(); 
```

问题是昨天的分销商喜欢：

```
public DistributorAdd(String distributor, String 
        emailAdress, String name, String speciality){...} 
```

明天会是这样：

```
public void ajouter(String Distributor, String EmailAdress, 
    String Name, String Phone, String Image) {..} 
```

我的同事已经在她的 Distrib.txt 中放置了很多信息，所以我想要的是能够在 Map 中放置一个新字符串而不破坏它。

我想保留 Distrib.txt 和我的 DistributorAdd 函数，有什么简单的步骤可以做到吗？

我得到的错误是：

```
ObjectInputStream ois = new ObjectInputStream(new FileInputStream("Distrib.txt"));
VendorA = (DistributorAdd) ois.readObject(); 
```

错误：

```
IOException : table.java => table()java.io.StreamCorruptedException: invalid stream header: ACED0573
at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:780)
at java.io.ObjectInputStream.<init>(ObjectInputStream.java:277)
at car.Table.<init>(Table.java:185)
at car.Table.main(Table.java:837) 
```

如果您有任何问题或需要我提供的更多信息，我将很乐意提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:34:13.010

请注意以下有关序列化的事项：

1）必须非常明智地使用它。

2）当我们序列化一个类时，就好像我们正在以实例变量的形式导出它的API。

3）始终`SerialVersionUID`在您的可序列化类中显式声明，如果我们不这样做，JVM 将根据您的类的内部结构（实例变量、公共方法等）自动计算，因此更改类的内部结构会改变这一点`SerialVersionUID`。

因此，如果我们在一个版本中对一个类进行序列化，然后在另一个版本中对其进行反序列化（通过版本更改，我的意思是我们正在更改可序列化对象的某些内部结构），版本不兼容必然会发生。

我不确定究竟是什么导致您的代码失败，因为我不知道您在 Serializable 类中做了哪些更改。

但我认为你应该考虑第 3 点

# c - 使用一个管道在父子之间进行读写

> ID：15965989
> 
> 赞同：2
> 
> 时间：2013-04-12T07:56:48.740
> 
> 标签：c, ipc, pipe

假设我有一个父进程分叉一个子进程，写入子进程，然后等待从子进程读取某些内容，我可以用一个管道实现这个吗？它看起来像：

```
int main(){
    pid_t pid1;
    int pipefd[2];
    char data[]="some data";
    char rec[20]; 

    if(pipe(pipefd) == -1){
        printf("Failed to pipe\n");
        exit(0);
    }

    pid1 = fork();
    if(pid1<0){
         printf("Fork failed\n");
         exit(0);
    }else if(pid1==0){
        close(pipefd[1]);
        read(pipefd[0],rec,sizeof(rec));
        close(pipefd[0]);
        //do some work and then write back to pipe
        write(pipefd[1],data,sizeof(data));
    }else{
        close(pipefd[0]);
        write(pipefd[1],data,sizeof(data));
        close(pipefd[1]);
        //ignoring using select() for the moment.
        read(pipedfd[0],rec,sizeof(rec));
    } 
```

在尝试了解更多信息时，手册页指出管道是单向的。这是否意味着当您创建管道以在父子之间进行通信时，写入管道的进程不能再读取它，而从管道读取的进程也不能再写入它？这是否意味着您需要两个管道来允许来回通信？就像是：

> 管道1：
> 
> P----阅读----->C
> 
> P<---写-----C
> 
> 管道2：
> 
> P----写---->C
> 
> P<---读-----C

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T08:06:07.630

不，根据定义，管道是单向的。问题是，如果没有任何同步，您将有两个进程从同一个文件描述符中读取。但是，如果您使用信号量，则可以执行类似的操作

```
S := semaphore initiated to 0.
P writes to pipe
P tries down on S (it blocks)
P reads from pipe

C reads from pipe
C writes to pipe
C does up on S (P wakes up and continues) 
```

另一种方法是使用两个管道 - 更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T08:13:27.733

> [是否`fildes[0]`也可写和是否`fildes[1]`也可读](http://pubs.opengroup.org/onlinepubs/009695399/functions/pipe.html)未指定。

话虽如此，最简单的方法是使用两个管道。

另一种方法是通过管道指定子进程的文件描述符/名称/路径。在子进程中，您可以写入 中指定的文件描述符/名称/路径，而**不是**`filedes[1]`写入. **`filedes[1]`**

# database - 为 Oracle DB 创建特定表

> ID：15965990
> 
> 赞同：1
> 
> 时间：2013-04-12T07:56:51.177
> 
> 标签：database, oracle

我必须制作一张带有一些规格和限制的表格。我对自动表创建不是很熟悉。我必须为 Oracle DB 做这个。表名：A0

```
Primary key (NUMBER), A0_PK
Date (DATE), A0_DATE
VARCHAR2, A0_INTERVAL
Value (NUMBER), A0_VALUE
Other 1000 columns, called for example. A0_COL_058 
```

表应填充 100.000 行，随机值，并带有约束：

```
Primary key is sequential: 1, 2, 3...
Date: only days (without time) for year 2013.
A0_INTERVAL, like date but string in YYYYMMDD format
Value: number in [0, 100]
Others: null 
```

我必须做一个脚本？脚本文件的扩展名是什么以及它在哪里执行？有人可以指出我正确的方向吗，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:40:36.283

对于基本设置，我建议以下内容：

```
 CREATE TABLE A0 (
          a0_pk         NUMBER
        , a0_date       DATE
        , a0_interval   VARCHAR2(20)
        , a0_value      NUMBER
        , CONSTRAINT c_a0_pk        PRIMARY KEY (a0_pk)
        , CONSTRAINT c_a0_date      CHECK ( a0_date >= TO_DATE ( '01.01.2013 00:00:00', 'DD.MM.YYYY HH24:MI:SS' ) AND a0_date < TO_DATE ( '01.01.2014 00:00:00', 'DD.MM.YYYY HH24:MI:SS' ) )
        , CONSTRAINT c_a0_value     CHECK ( a0_value BETWEEN 0 AND 100 )
    );

    BEGIN
        FOR i IN 1 .. 100 LOOP
            INSERT
              INTO A0
                 ( a0_pk
                 , a0_date
                 , a0_value
                 )
            VALUES
                 ( i
                 , TO_DATE ( '01.01.2013 00:00:00', 'DD.MM.YYYY HH24:MI:SS' ) + 365 * DBMS_RANDOM.VALUE
                 , TO_CHAR ( a0_date, 'YYYYMMDD' )
                 , FLOOR ( DBMS_RANDOM.VALUE ( 0, 101 ) )
                 )
                 ;
        END LOOP;
    END;

    UPDATE A0
       SET a0_interval = TO_CHAR ( a0_date, 'YYYYMMDD' )
         ;

    COMMIT;

    ALTER TABLE A0 ADD CONSTRAINT c_a0_interval  CHECK ( TO_CHAR ( a0_date, 'YYYYMMDD' ) = a0_interval ); 
```

请注意，`CONSTRAINT`如果您不需要 dbms 强制执行约束，则可以在表创建语句中省略除 pk 约束之外的行。创建表后，所有剩余的列都可以通过如下语句创建

```
ALTER TABLE A0 ADD ( A0_COL_001 NUMBER ); 
```

给定 1000 列的数量，语句列表最好由一些简短的 perl 脚本生成。或者，在电子表格中填写 3 列。第 1 列应分别包含 1000 个字符串实例，第`a`3 列`b`。用 0 到 999 的数字填充 column2，并将它们格式化为 3 位数字，前导零。将结果保存为 csv 文件。假设您选择作为 csv 分隔符，分别`a;`用`ALTER TABLE A0 ADD ( A0_COL_`和替换来编辑该文件。`;b``NUMBER );``;`

# perl - 在 cron 作业中执行 perl 脚本，“system”命令返回 -1

> ID：15965991
> 
> 赞同：1
> 
> 时间：2013-04-12T07:56:53.193
> 
> 标签：perl, cron

```
my $systemDateState = system "date";
my $systemXXXXState = system "xxxx";#xxxx is a program
print "$systemDateState\n";
print "$systemXXXXState\n"; 
```

这个 perl 脚本打印两个零。它从命令行工作。但是在 cron 作业中执行此脚本时，它返回一个零和一个 -1。

-1 表示 xxxx 从未执行。我尝试直接在 cron 作业中执行 xxxx。xxxx 执行正常。cron 作业中的 perl 脚本系统日期有效。为什么 cron 作业中的 perl 脚本系统 xxxx 从未执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T02:39:09.773

这里的情况是因为行结束。它在 a.sh`set Path & xxxx`和`set Path & perl script.pl`b.sh 中。cron 作业中的 a.sh 有效，b.sh 无效。区别在于 Unix 格式的 a.sh 和 Win 格式的 b.sh。我更改了 b.sh 的格式，它也可以正常工作。-_-||

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T08:02:41.490

尝试编辑您的 cronjob 以强制使用正确的目录。例如：

```
cd cronjobs && perl cronjob.pl 
```

# c# - 为什么不调用重载方法？

> ID：15965996
> 
> 赞同：13
> 
> 时间：2013-04-12T07:57:14.323
> 
> 标签：c#, .net

我认为被调用的方法是确定的运行时，还是我错过了什么？示例代码：

```
class Program
{
    static void Main(string[] args)
    {
        var magic = new MagicClass();
        magic.DoStuff(new ImplA());
        magic.DoStuff(new ImplB());
        Console.ReadLine();
    }
}
class MagicClass
{
    internal void DoStuff<T>(T input) where T : SomeBase
    {
        HiThere(input);
    }

    void HiThere(SomeBase input)
    {
        Console.WriteLine("Base impl");
    }

    void HiThere(ImplA input)
    {
        Console.WriteLine("ImplA");
    }

    void HiThere(ImplB input)
    {
        Console.WriteLine("ImplB");
    }
}

abstract class SomeBase
{

}
class ImplA : SomeBase{}
class ImplB : SomeBase{} 
```

我以为我会得到：

```
ImplA
ImplB 
```

作为输出，但它打印`Base impl`. 我有什么办法可以在不强制转换输入的情况下获得重载方法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-12T07:59:59.130

重载由编译器选择。对于这里的电话：

```
internal void DoStuff<T>(T input) where T : SomeBase
{
    HiThere(input);
} 
```

它选择带有`SomeBase`的那个，因为这就是它在编译时的全部内容。

您最可能想要的是覆盖。这意味着必须将不同的逻辑放入 SomeBase 的继承者中：

```
abstract class SomeBase
{
  abstract string Name { get; }
}
class ImplA : SomeBase{ override string Name { get { return "ImplA"; } } }
class ImplB : SomeBase{ override string Name { get { return "ImplB"; } } }

void HiThere(SomeBase input)
{
    Console.WriteLine(input.Name);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T08:03:33.417

在编译期间选择重载。
在运行时选择覆盖。

在这里，编译器只知道 T 可以分配给`SomeBase`，而没有别的。实际上，如果它按您的预期工作，您将能够完全跳过该`where T : SomeBase`部分。您需要它的原因是编译器需要知道该信息才能检查可以在提供的对象上调用什么。

# objective-c - 在 tableViewCell 内滚动 UITableView

> ID：15965998
> 
> 赞同：0
> 
> 时间：2013-04-12T07:57:16.413
> 
> 标签：objective-c, uitableview

我有一个自定义单元格，并将 viewController 作为子视图添加到该单元格：

```
TestViewController *vc = [[TestViewController alloc] initWithNibName:@"TestViewController" bundle:nil];
[self addSubview:vc.view]; 
```

新的 viewController 里面有一个 tableView。当我尝试滚动该 tableView 时，正在滚动自定义单元格所在的基本 tableView。

我该如何解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T08:22:52.940

我建议不要嵌入表格视图，但是如果你真的想这样做，解决方案可能是在`hitTest`基础上实现该方法`tableView`：

```
-(UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {

    //here you will need to check if the point lies within any of the 
    //child tableviews and return it .. else return the super method

    if ([self pointInChildTable:point]) {
        return [self childTableForPoint:point];
    }
    return [super hitTest:point withEvent:event];
} 
```

请注意，`pointInChildTable`并且`childTableForPoint`应该可能与返回带有结果的字典的方法相同。我把它们分开只是为了解释。

希望这可以帮助。

# mysql - 我可以使用一个查询来计算 SQL 中的两列吗

> ID：15965999
> 
> 赞同：4
> 
> 时间：2013-04-12T07:57:22.403
> 
> 标签：mysql, sql

我有

`office`

```
office_id    name
--------- -----------------
        1  office1
        2  office2
        3  office3 
```

`person`

```
uid  office_id age gender
---------------------------
  1          1  20   male
  2          1  20   female
  3          1  20   male
  4          1  21   male
  5          2  20   male
  6          3  20   male 
```

是否有可能我可以使用**一个**查询来获取

```
office_id    name age_20 male
-----------------------------
        1 office1      3    3  
        2 office2      1    1
        3 office3      1    1 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T07:59:12.497

是的你可以。MySQL 支持布尔运算，我认为这是最短的方法。如果您想要更友好的 RDBMS，请使用`CASE WHEN age = 20 THEN 1 ELSE 0 END`.

```
SELECT  a.office_ID,
        a.name,
        SUM(age = 20) age_20,
        SUM(gender = 'Male') male
FROM    office a
        LEFT JOIN person b
            ON a.Office_ID = b.office_ID
GROUP   BY a.office_ID, a.name 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/29330/1)