# StackOverflow 问答 16140000-16140999

# javascript - 带有悬停区域的地图在 div 中显示 alt 文本 - 相对于悬停区域

> ID：16140006
> 
> 赞同：0
> 
> 时间：2013-04-22T05:27:38.060
> 
> 标签：javascript, map, hover, area

我试图让一个 div 显示悬停区域的替代文本 - 相对于悬停区域定位。

我可以让文本显示，但不是在正确的位置。

这是我的js：

```
$(document).ready(function() {
if($('#Map')) {
    $('#Map area').each(function() {
    var altText = $(this).attr("alt");
        $(this).mouseover(function() {
    $("#popup").html(altText);
            $('#popup').show();

        });

        $(this).mouseout(function() {
    var altText = $(this).attr("alt");
            $('#popup').hide();
        });

    });
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:44:42.910

这将正常工作

```
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<script type="text/javascript">
$(document).ready(function () {
    $("#popup").draggable();
    if ($('#Map')) {
        $('#Map area').each(function () {
            var altText = $(this).attr("alt");
            $(this).mouseover(function (event) {

                $("#popup").html(altText);
                $("#popup").css({ 'top': event.clientY, 'left': event.clientX });
                $('#popup').show();

            });

            $(this).mouseout(function () {
                var altText = $(this).attr("alt");
                $('#popup').hide();
            });

        });
    }
}); 
```

你需要让 div 拖动，然后只有它会动态改变位置

# jquery - 如何使用 jquery 在文本区域中显示项目列表

> ID：16140011
> 
> 赞同：0
> 
> 时间：2013-04-22T05:28:15.660
> 
> 标签：jquery

我想在用户点击 control-enter 按钮时显示项目列表。

到目前为止，我知道我可以使用 jquery 触发事件来打开一个列表。但我不知道如何在 textarea 中显示该列表，以便用户可以从列表中选择一个项目并将其设置为 textarea。

```
$("textarea").trigger(some event here to open the list); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:51:13.633

如果我理解正确，请尝试以下操作：

看[小提琴](http://jsfiddle.net/dmymQ/48/)

HTML：

```
<div id="myDiv">
    <a>Enter</a><br />
    <div>
      <textarea>

      </textarea>
    </div>
</div>

<div id="select">
<select id="abc1">
  <option value="volvo">Option1</option>
  <option value="saab">Option2</option>
  <option value="mercedes">Option3</option>
  <option value="audi">Option4</option>
</select>
</div> 
```

JS：

```
$('#myDiv a').click(function(){
$('#select select').appendTo('#myDiv');
$('#select').css('display','block');

var text1 = $('#abc1 option:selected').val();
$('#myDiv textarea').html(text1);

    $("#abc1").change(function () {
  var str = "";
  $("#abc1 option:selected").each(function () {
            str += $(this).text() + " ";
  });
  $("#myDiv textarea").html(str);
})
.change();

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:37:06.623

```
var text = $('textarea#msg').val(); 
```

或者

```
var text = $("#msg").val(); 
```

是正确的。可能你可以试试

```
var text = $("#msg").text();. 
```

另外，如果您尝试在按钮的单击事件上获取 textarea 的值，请尝试将其放入

```
$(document).ready(). 
```

# c# - 通过 C# 中的反射在从程序集加载的窗体的“GridView”上设置“事件处理程序”

> ID：16140012
> 
> 赞同：0
> 
> 时间：2013-04-22T05:28:17.907
> 
> 标签：c#, events, datagridview, event-handling

在通过反射从程序集中加载的表单的“DataGridView”上设置**“EventHandler”**，会导致禁用所有先前在**“DataGridView”**上定义的**事件处理**程序，尽管事件处理程序不相同

 **我使用下面的代码将程序集加载为“表单”

```
string FullName = ApplicationPath + @"\DLL\" + DllName + ".dll";
System.Reflection.Assembly assmbly = System.Reflection.Assembly.LoadFrom(FullName);
Type[] contr = assmbly.GetTypes();

if (contr[0].BaseType.FullName == ("System.Windows.Forms.Form"))
{
   System.Windows.Forms.Form frm = assmbly.CreateInstance(contr[0].FullName) as Form;
   frm.Show();
} 
```

然后我使用下面的代码在从程序集中加载的表单的“DataGridView”上设置一个“事件处理程序”

```
foreach (Control ThisControl in ThisView.Controls) // ThisView is the same Form loaded from an assembly
{
  if (ThisControl.GetType().ToString().Trim() == "System.Windows.Forms.DataGridView")
  {
     DataGridView ThisGrid = (DataGridView)ThisControl;
     ThisGrid.MouseDown += new MouseEventHandler(ThisGrid_MouseDown);
  }
} 
```

怎么了？谢谢大家...**

# java - 带有 concat 的 Sql 服务器查询

> ID：16140016
> 
> 赞同：0
> 
> 时间：2013-04-22T05:28:58.090
> 
> 标签：java, hibernate

这是休眠查询，我想在 sql server 上运行它，但 concat 函数不在 sql server 中，我该怎么做。

```
strQuery = "from TempData where englishLex=:englishLex and category =:category and language=:language and login=:login and domain=:domain group by (concat(englishlex,category)) "; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:33:25.217

方法一：连接两个字符串

```
SELECT 'FirstName' + ' ' + 'LastName' AS FullName 
```

方法 2：连接两个数字

```
SELECT CAST(1 AS VARCHAR(10)) + 'R' + CAST(2 AS VARCHAR(10)) 
```

方法 3：连接表列的值

```
SELECT FirstName + ' ' + LastName
FROM AdventureWorks.Person.Contact 
```

# java - 如何使多个 JFrame/JDialog/JWindow 的 alwaysOnTop 状态独立？

> ID：16140021
> 
> 赞同：0
> 
> 时间：2013-04-22T05:29:28.703
> 
> 标签：java, swing

*情况*：我有几个需要一次显示的窗口的基于 Swing 的应用程序：

1.  主应用 JFrame（可能已最小化，但未关闭）
2.  浮动 JWindow（这需要始终可见且始终位于顶部）
3.  在某些情况下出现 JDialog (Dialog.ModalityType.APPLICATION_MODAL)。我希望这个对话框是模态的，但并不总是在顶部

我遇到了浮动窗口的问题 - 在某些情况下，它失去了它的 alwaysOnTop 状态。我通过引入计时器解决了这个问题，该计时器将每 5 秒更新一次此状态。

*问题*：如果我显示 JDialog，那么由于某种原因，它的 alwaysOnTop 状态将与浮动 JWindow 同步。例如，如果我切换到其他应用程序，则此 JDialog 将始终在顶部，同时我为浮动窗口更新 alwaysOnTop。

*问题*：为什么会发生这种情况，我该如何摆脱它？

在此先感谢，谢尔盖

# c# - SQLite 没有在 MonoDroid 和 MonoTouch 上正确存储 GUID 值

> ID：16140023
> 
> 赞同：2
> 
> 时间：2013-04-22T05:29:36.583
> 
> 标签：c#, sqlite, ado.net, xamarin.ios, xamarin.android

我正在使用 MonoDroid 将数据层从我的 Window Mobile 应用程序移植到 Android 和 iOS。我的数据层在 SQL SERVER、SQL CE 和 Windows SQLite 上运行并经过很好的测试。

我在我的 Android 解决方案中为我的项目创建了类库并导入了我的所有代码。我创建了一个新的 DbEngine 实现来调整 Mono 上 SQLite 的查询。

当我通过诸如“插入[用户]值（'xx'，'hello'，null）'之类的文本插入表格时，它工作正常，我可以看到affectedRows> 0。但是，当我尝试使用命令插入时参数，我在 GUID 列中得到不正确的值，请看截图。

```
// Creating the parameter
public override DbParameter CreateParameter(string name, object value)
{
    DbParameter result;
    if (value is byte[])
    {
        var length = (value as Array).Length;
        result = new SqliteParameter(name, DbType.Binary, length) { Value = value};
    }
    else if (value is string && ((string)value).Length > 4000)
    {
        var length = ((string)value).Length;
        result = new SqliteParameter(name, DbType.String, length) { Value = value };
    }
    else if (value is Guid)
    {
        result = new SqliteParameter(name, DbType.Guid) { Value = value }; // up to here, I can see that the GUID has the right value and the SQLiteParameter is created properly. 
    }
    else
    {
        result = new SqliteParameter(name, value);
    }
    return result;
} 
```

这是作为参数传递时插入行的方式 ![在此处输入图像描述](https://i.stack.imgur.com/BoqJs.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T05:40:42.333

经过长时间的斗争，似乎`GUID`不支持参数`Mono.Data.SQLite`。我需要解决的问题是在我的代码中，当我创建参数时，我检查它是否是`GUID`，我创建了一个类型`string`如下的参数：

```
result = new SqliteParameter(name, value.ToString()); 
```

这可以正常工作并正确存储值，也可以用于查询数据库。这非常令人沮丧，尤其是当 Xamarin 团队告诉我这是一个 Unicode 问题时 :( 希望它对其他人有所帮助。

# java - 如何使用 Runtime.getRuntime() 执行 .java 文件

> ID：16140031
> 
> 赞同：-3
> 
> 时间：2013-04-22T05:30:00.043
> 
> 标签：java

如何使用 Java 调用另一个 Java 程序`Runtime.getRuntime.exec()`？

它被告知使用我们可以使用的 java 程序执行程序`Runtime.getRuntime()`。这是一个例子。我可以使用`Runtime.getRuntime().exec("notepad.exe")`; 打开记事本

谁能帮我执行一个Java文件。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T05:31:03.837

你可以像这样执行一个java文件。

```
Runtime.getRuntime().exec("java Test"); 
```

这是假设您的&的环境变量 ( `Path`)已经设置好了，否则您也需要设置它们！`java``classpath`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:08:15.830

事实上你不能直接执行一个`.java`文件。它需要先编译。可以使用 System java 编译器来完成编译，该编译器可以`ToolProvider`使用`Runtime.getRuntime().exec(String)`. 样本将类似于：

```
import java.io.FileOutputStream;
import java.io.IOException;

import javax.tools.JavaCompiler;
import javax.tools.ToolProvider;

public class JavaTest {

    public static void main(String[] args) throws IOException {
        JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();

        // creating a file, but you could load an existing one
        FileOutputStream javaFile = new FileOutputStream("Test.java");
        javaFile.write("public class Test { public static void main(String[] args) { javax.swing.JOptionPane.showMessageDialog(null, \"I'm here!\",\"Test\", 1);}}"
                .getBytes());

        // compiling it
        JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
        compiler.run(null, System.out, System.err, "Test.java");

        // running it    
        Runtime.getRuntime().exec("java Test");
    }

} 
```

# ruby-on-rails - Rails 迁移问题

> ID：16140040
> 
> 赞同：0
> 
> 时间：2013-04-22T05:31:03.363
> 
> 标签：ruby-on-rails

通过迁移插入新记录是一种好习惯吗？最近，我在从头开始重新运行本地迁移时遇到了一个奇怪的错误。它会抛出这样的错误（例如：产品模型，成本列）：

> `undefined method 'cost=' for #<Product:0x10f60f4b8>`

移民：

```
class AddNewProducts < ActiveRecord::Migration
  def self.up
    product1 = Product.new
    product1.cost = 10
    ....
    product1.save!
  end
end 
```

之前在迁移中添加了列**成本：**

```
Class AddCosttoProducts < ActiveRecord::Migration

    def self.up
      add_column :product, :cost, :integer, :default => 0, :null => false   
    end

    def self.down
      remove_column product, :cost
    end
end 
```

关于为什么会发生的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:36:36.627

如果您已经运行了之前的迁移（添加`cost`字段），请在添加记录之前尝试重置列信息。

```
class AddNewProducts < ActiveRecord::Migration
  def self.up
    Product.reset_column_information
    product1 = Product.new
    product1.cost = 10
    ....
    product1.save!
  end
end 
```

# datetime - Python错误地从字符串中提取月份

> ID：16140047
> 
> 赞同：0
> 
> 时间：2013-04-22T05:31:47.587
> 
> 标签：datetime, python-2.6

Python 没有正确地从字符串中提取日期。我正在使用这段代码：

```
full_time = datetime.datetime.strptime(Datetime, "%m/%j/%y %H:%M") 
```

一切都是正确的，*除了*月份，它总是设置为一月。它正确地抓取了年、日、小时和分钟。但是由于某种原因，月份总是设置为一月（原始数据集中不是这种情况）。知道为什么它会这样做吗？

**更新：**我已经意识到[另一个问题解决了这里的问题](https://stackoverflow.com/questions/5247582/python-datetime-strptime-month-specifier-doesnt-seem-to-work)。但是，这个问题没有解决如何从以下格式的字符串中提取日期：`4/14/11 14:23`. 我无法控制数据集中日期的格式。[为此](https://stackoverflow.com/questions/16139306/determine-season-given-timestamp-in-python-using-datetime)，我只需要提取月份和日期。

# c++ - 使用命名空间创建 C++ 库

> ID：16140048
> 
> 赞同：1
> 
> 时间：2013-04-22T05:31:48.727
> 
> 标签：c++

我正在尝试探索命名空间并尝试像在 C 中那样创建示例库。我从未在 C++ 中这样做过，所以这就是我正在做的事情。这是我的代码，它工作正常，我想把它放在单独的文件中。

```
#include <iostream>
#include <string>

namespace TCS{
    class employee{
        int uID;
        std::string name;

        public:
        employee(const int& uId, const std::string& name)
        {
            this->uID=uId;
            (this->name).assign(name);
            }
        int getID()
        {
            return uID;
            }
        std::string getName()
                {
                    return name;
            }
        };
    }

using namespace std;

class employee{
        int uID;
        string name;

        public:
        employee(const int& uId, const string& name)
        {
            this->uID=uId;
            (this->name).assign(name);
            }
        int getID()
        {
            return uID;
            }
        string getName()
                {
                    return name;
            }
        };

int main()
{

    employee TechMEmp1(1,"Andrew");

    TCS::employee TCSEmp1(1,"Thomas");

    cout << "Tech M Employee is :- ID : " << TechMEmp1.getID() << " Name  : "
    << TechMEmp1.getName() << endl;

    cout << "TCS Employee is :- ID : " << TCSEmp1.getID() << " Name  : "
    << TCSEmp1.getName() << endl;

    return 0;
    } 
```

现在我只是想复制我将内容放在 C 中的单独文件中的方式。我创建了一个包含内容的文件 TCS.h：

```
#ifndef TCS_HEADER
#define TCS_HEADER
namespace TCS{
    class employee{
        int uID;
        std::string name;
        public:
        employee(const int& uId, const std::string& name);
        int getID();
        std::string getName();
        };
    }
#endif 
```

另一个文件：带有内容的 TCSNamespace.cpp

```
#include "TCS.h"
#include <string>

TCS::employee(const int& uId, const std::string& name);
        {
            this->uID=uId;
            (this->name).assign(name);
            }
int TCS::getID();
        {
            return uID;
            }
std::string TCS::getName();
        {
            return name;
            } 
```

我包含 main 的最终文件是：

```
#include <iostream>
#include <string>
#include "TCS.h"

using namespace std;

class employee{
        int uID;
        string name;

        public:
        employee(const int& uId, const string& name)
        {
            this->uID=uId;
            (this->name).assign(name);
            }
        int getID()
        {
            return uID;
            }
        string getName()
                {
                    return name;
            }
        };

int main()
{

    employee TechMEmp1(1,"Andrew Thomas");

    TCS::employee TCSEmp1(1,"Thomas Hula");

    cout << "Tech M Employee is :- ID : " << TechMEmp1.getID() << " Name  : "
    << TechMEmp1.getName() << endl;

    cout << "TCS Employee is :- ID : " << TCSEmp1.getID() << " Name  : "
    << TCSEmp1.getName() << endl;

    return 0;
    } 
```

我正在使用 Cygwin 并尝试单独编译文件，当我输入命令时： g++ -Wall -c TCSNamespace.cpp （我认为这将编译我的 TCSNamespace.cpp 它编译 c 文件的方式）我得到：

```
$ g++ -Wall -c TCSNamespace.cpp
In file included from TCSNamespace.cpp:1:
TCS.h:6: error: using-declaration for non-member at class scope
TCS.h:6: error: expected `;' before "name"
TCS.h:8: error: expected unqualified-id before '&' token
TCS.h:8: error: expected `,' or `...' before '&' token
TCS.h:8: error: ISO C++ forbids declaration of `parameter' with no type
TCS.h:10: error: using-declaration for non-member at class scope
TCS.h:10: error: expected `;' before "getName"
TCSNamespace.cpp:4: error: expected constructor, destructor, or type conversion before ';' token
TCSNamespace.cpp:5: error: expected unqualified-id before '{' token
TCSNamespace.cpp:5: error: expected `,' or `;' before '{' token
TCSNamespace.cpp:9: error: `int TCS::getID()' should have been declared inside `TCS'
TCSNamespace.cpp:10: error: expected unqualified-id before '{' token
TCSNamespace.cpp:10: error: expected `,' or `;' before '{' token
TCSNamespace.cpp:13: error: `std::string TCS::getName()' should have been declared inside `TCS'
TCSNamespace.cpp:14: error: expected unqualified-id before '{' token
TCSNamespace.cpp:14: error: expected `,' or `;' before '{' token 
```

我打算做的是单独编译 TCSNamespace.cpp 和 Namespace.cpp 然后链接它们以获得使用以下命令的可执行文件：

```
g++ -Wall -c TCSNamespace.cpp
g++ -Wall -c Namespace.cpp
gcc  TCSNamespace.o Namespace.o –o Namespace 
```

谁能告诉我哪里出错了？我还想知道在 C++ 中创建“TCS.h”的方式与在 C 中完成的方式相同，这是一种好的做法，因为 C++ 使用标头类型。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T05:38:19.703

我看到的一个问题是您没有将 .cpp 文件中的函数声明给类员工的成员。您需要用命名空间包装整个 .cpp 文件，然后让每个成员函数都以类名开头。您还可以在每个函数之前加上命名空间，`TCS::employee::employee(...)`而不是像我在下面所做的那样用命名空间包装整个代码，但是不断写出这些代码会变得非常麻烦。还要小心函数定义中的分号。

```
#include "TCS.h"
#include <string>

namespace TCS {
    employee::employee(const int& uId, const std::string& name) // <-- remove semicolon
    {
        this->uID=uId;
        (this->name).assign(name);
    }
    int employee::getID() // <-- remove semicolon
    {
        return uID;
    }
    std::string employee::getName() // <-- remove semicolon
    {
        return name;
    }
} 
```

您还需要从函数定义的末尾删除分号，如上所示。

我还建议包含`string`在 TCS.h 中，因为任何包含 TCS.h 的文件都必须包含字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T05:35:00.853

TCS.h 需要包含`<string>`头文件

TCSNamespace.cpp 应该是

```
#include "TCS.h"
#include <string>

namespace TCS {

employee::employee(const int& uId, const std::string& name)
        {
            this->uID=uId;
            (this->name).assign(name);
        }
int employee::getID()
        {
            return uID;
        }
std::string employee::getName()
        {
            return name;
        }
} 
```

在您的情况下-您没有指定，该函数是类的成员。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T05:36:04.417

`TCS.h`需要`#include <string>`。

目前，`TCS.h` 包含在之前，因此在处理时不知道`<string>`的声明。`std::string``name`

```
#ifndef TCS_HEADER
#define TCS_HEADER
#include <string>
namespace TCS{
    class employee{
        int uID;
        std::string name;
        public:
        employee(const int& uId, const std::string& name);
        int getID();
        std::string getName();
        };
    }
#endif 
```

此外，@ForEverR 在`.cpp`内容上击败了我，所以我会注意你可以写：

```
TCS::employee::employee(const int& uId, const std::string& name);
{
    this->uID=uId;
    (this->name).assign(name);
} 
```

最后：

> 我还想知道在 C++ 中创建“TCS.h”的方式与在 C 中完成的方式相同，这是一种好的做法，因为 C++ 使用标头类型。

回答：是的。

# python - 不同类型的类变量有什么区别？

> ID：16140052
> 
> 赞同：5
> 
> 时间：2013-04-22T05:32:10.000
> 
> 标签：python, class, variables, instance

首先，有`A`两个类变量和两个实例变量的类：

```
In [1]: def fun(x, y): return x + y

In [2]: class A:
   ...:     cvar = 1
   ...:     cfun = fun
   ...:     def __init__(self):
   ...:         self.ivar = 100
   ...:         self.ifun = fun 
```

我们可以看到 int 类型的类变量和实例变量都可以正常工作：

```
In [3]: a = A()

In [4]: a.ivar, a.cvar
Out[4]: (100, 1) 
```

但是，如果我们检查函数类型变量，情况就会发生变化：

```
In [5]: a.ifun, a.cfun
Out[5]: 
(<function __main__.fun>,
 <bound method A.fun of <__main__.A instance at 0x25f90e0>>)

In [6]: a.ifun(1,2)
Out[6]: 3

In [7]: a.cfun(1,2)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
/home/future/<ipython-input-7-39aa8db2389e> in <module>()
----> 1 a.cfun(1,2)

TypeError: fun() takes exactly 2 arguments (3 given) 
```

我知道 python 已翻译`a.cfun(1,2)`为`A.cfun(a,1,2)`然后引发错误。

**我的问题是**：既然`cvar`和`cfun`都是类变量，为什么 python 以不同的方式对待它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T06:23:42.313

实际上，分配给类成员的函数仍然是函数：

```
def x():pass

class A:  
    f = x
    e = None
    g = None

print(A.__dict__['f'])
# <function x at 0x10e0a6e60> 
```

当您从实例中检索它时，它会即时转换为方法对象：

```
print(A().f)
# <bound method A.x of <__main__.A instance at 0x1101ddea8>> 
```

[http://docs.python.org/2/reference/datamodel.html#the-standard-type-hierarchy](http://docs.python.org/2/reference/datamodel.html#the-standard-type-hierarchy) “用户定义的方法”：

> 如果该属性是用户定义的函数对象、未绑定的用户定义的方法对象或类方法对象，则可以在获取类的属性时（可能通过该类的实例）创建用户定义的方法对象。 .. 请注意，每次从类或实例中检索属性时，都会发生从函数对象到（未绑定或绑定）方法对象的转换。

这种转换只发生在分配给类的函数上，而不发生在实例上。请注意，这在 Python 3 中已更改，其中`Class.fun`返回普通函数，而不是“未绑定方法”。

至于您的问题，为什么需要这样做，方法对象本质上是一个闭包，其中包含一个函数及其执行上下文（“self”）。想象一下，你有一个对象并在某处使用它的方法作为回调。在许多其他语言中，您必须同时传递对象和方法指针或手动创建闭包。例如，在 JavaScript 中：

```
 myListener = new Listener()
  something.onSomeEvent = myListener.listen // won't work!
  something.onSomeEvent = function() { myListener.listen() } // works 
```

Python 在幕后为我们管理：

```
 myListener = Listener()
  something.onSomeEvent = myListener.listen // works 
```

另一方面，有时在一个类中拥有“裸”函数或“外来”方法是很实际的：

```
 def __init__(..., dir, ..):
       self.strip = str.lstrip if dir == 'ltr' else str.rstrip
       ...
  def foo(self, arg):
       self.strip(arg) 
```

上述约定（类 vars => 方法，实例 vars => 函数）提供了一种方便的方式来同时拥有两者。

无需添加，就像 python 中的其他所有内容一样，可以更改此行为，即编写一个不将其函数转换为方法并按原样返回它们的类。

# ios - 在 iPhone 中未收到任何推送通知

> ID：16140055
> 
> 赞同：23
> 
> 时间：2013-04-22T05:32:20.453
> 
> 标签：ios, iphone, objective-c, push-notification, apple-push-notifications

我使用[本教程](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)为推送通知制作了一个示例 PushTest 应用程序。

使用上面的教程，我收到“PushTest”想向您发送推送通知（仅一次）的消息，之后我从 iPhone 中删除了该应用程序，重新启动 iPhone，但无法再次收到相同的消息。

我已运行脚本 sample.php（更新建议的更改）并收到消息“已连接到 APNS”和“您的消息发送”。

但我没有收到任何推送通知。

请指导我哪里错了？
或者我尝试接收推送通知的内容。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-22T06:18:55.393

仅在 2 种情况下您不会收到推送

1.) 如果您的应用程序在前台。

2.）您的设备令牌对于接收推送通知无效，如果您仍然没有收到推送，请检查两个条件，请告诉我。谢谢

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T05:37:08.797

确保您使用的是启用推送通知的配置文件。然后检查您是否正在向服务器发送令牌。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-03-08T16:28:23.363

# 注意电池问题，它会阻止您一天或更长时间

除非手机已充满电，否则切勿在开发模式（连接手机）下开始测试推送。

[https://developer.apple.com/library/archive/technotes/tn2265/_index.html](https://developer.apple.com/library/archive/technotes/tn2265/_index.html)

> 如果您的通知负载包含内容可用密钥，则如果 iOS 或 OS X 确定这样做是节能的，您的应用程序将收到通知。如果超出设备的能源或数据预算，您的应用***将不会再收到***任何带有内容可用密钥的通知，直到预算被重置。这每天发生一次***，并且不能由用户或开发人员操作更改***。

一般来说，关于手机电池状态的通知（特别是当你被拴住时）非常不稳定。（此外，那篇文章中提到的一些非常古老的东西是完全错误的。）基本上，如果您的手机进入“由于电池而不会收到通知”模式，您通常永远不会收到通知 - 它可以去连续几天。

# 通知确实（或确实）更喜欢蜂窝 WTF！

> 在 iOS 上，推送通知会尽可能使用蜂窝数据网络，即使设备当前正在使用 Wi-Fi 进行其他网络活动，例如网页浏览或电子邮件。但是，如果蜂窝数据服务不可用，推送服务将退回到 Wi-Fi。

这在不同的 iOS 版本中发生了很大变化，但这是一个巨大的麻烦。

# >>>>> ！！！关键提示！<<<<<

不要忘记：

1.  构建到系留电话。您只会收到“沙盒、开发”推送通知。 ***但是那些几乎没有工作 - 他们很晚才到达，不在某些地区工作，等等。它们太脆弱了，通常不值得尝试。***

2.  增加内部版本号，为试飞正常构建，发送到试飞，然后从试飞安装。您现在将获得***正确、正常的 APPLE PUSH 通知***。

非常令人困惑你***！做！***获得有关开发测试飞行构建的***真实***推送通知。

也就是说 - 当您构建到 TestFlight 时，您确实会**获得与****在应用商店上发布**并由您的公共用户使用的实际应用程序完全相同的**“真实”**推送通知- 真实、真实的 APNS 推送通知。

 **令人难以置信的令人困惑的“开发、沙盒”推送通知***仅***适用于“系留电话构建”。（而且，为了增加混乱，“开发，沙盒”推送通知非常不可靠，所以你永远不知道它们是否有效。）

在这里阅读更多！ [https://stackoverflow.com/a/60550859/294884](https://stackoverflow.com/a/60550859/294884)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-22T06:17:26.980

我遵循了相同的教程。

确保您的应用程序列在通知中心，并且它的警报类型是任何但不是无。

您需要在 3 个条件下检查您的通知，

当您的应用程序打开、在后台和关闭时。

为此，您需要检查这些方法

```
// To Register your device token
- (void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken 
```

* * *

```
//If your app is not able to register
- (void)application:(UIApplication*)application didFailToRegisterForRemoteNotificationsWithError:(NSError*)error
{} 
```

* * *

```
//Your app receives push notification.
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{

    UIApplicationState state = [application applicationState];

    // If your app is running
    if (state == UIApplicationStateActive)
    {

        //You need to customize your alert by yourself for this situation. For ex,
        NSString *cancelTitle = @"Close";
        NSString *showTitle = @"Get Photos";
        NSString *message = [[userInfo valueForKey:@"aps"] valueForKey:@"alert"];
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@""
                                                            message:message
                                                           delegate:self
                                                  cancelButtonTitle:cancelTitle
                                                  otherButtonTitles:showTitle, nil];
        [alertView show];
        [alertView release];

    }
    // If your app was in in active state
    else if (state == UIApplicationStateInactive)
    {
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T06:20:35.370

如果应用程序的通知已打开，请检查您设备的**设置，并确保****通知中心**的通知类型不是“无” 。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-30T13:17:33.197

确保您选择正确的配置文件[![配置文件](https://i.stack.imgur.com/xYsHc.png)](https://i.stack.imgur.com/xYsHc.png)

并且您的应用程序已最小化。如果应用程序没有最小化使用

```
 - (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
    NSLog(@"info %@", userInfo);
} 
```

有关问题的其他[有用信息。](https://support.layer.com/hc/en-us/articles/204632870-How-do-I-troubleshoot-issues-with-Push-Notifications-on-iOS-)

对于 TESTING 推送，您可以使用[APN Tester Free](https://itunes.apple.com/ru/app/apn-tester-free/id626590577?mt=12)。 **注意：**插入带有空格的标记。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-22T14:40:25.107

我没有得到任何东西：

```
func application(_ application: UIApplication, didReceiveRemoteNotification userInfo: [AnyHashable : Any]) 
```

但是我的编译器在断点处停止

```
func application(_ application: UIApplication, didReceiveRemoteNotification userInfo: [AnyHashable : Any], fetchCompletionHandler completionHandler: @escaping (UIBackgroundFetchResult) -> Void) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-11T01:53:41.407

我遇到了类似的问题。一切都在代码中正确完成。我正在使用开发配置文件运行该应用程序，并在指向生产的服务器（iOS）上推送通知。确保您的配置文件与服务器设置匹配（沙盒与生产）。您还可以确保您的设备正确注册。**

# windows-runtime - 创建 Windows Metro 应用程序时如何减少内存使用量？

> ID：16140058
> 
> 赞同：2
> 
> 时间：2013-04-22T05:32:28.860
> 
> 标签：windows-runtime, microsoft-metro

我创建了一个 Metro 风格的应用程序或 Windows 8，但是在使用该应用程序时，我的 CPU 内存使用率总是很高，开始运行后没有一个字节减少。我认为这是因为没有正确处理内存。任何机构都有建议有效处理记忆？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T18:38:10.837

我认为 windows rt 自己处理内存......所以没有垃圾收集或释放。

我有一个非常占用内存的应用程序，我发现以下内容确实会影响内存：

1.  XAML 文件中有很多 ui 元素
2.  大型预定义数组（例如，string[,] arr = new string[100,100]）
3.  不使用[增量加载](http://www.silverlightplayground.org/post/2012/06/10/Metro-Incrementally-load-GridView-and-ListView-with-ISupportIncrementalLoading.aspx)和[ItemsControl](http://www.dutton.me.uk/2013/02/09/how-to-add-a-scrollviewer-to-an-itemscontrol-in-a-windows-store-app/)

如果您提供有关您的应用程序包含/做什么的更多信息，社区可以为您提供更多帮助。

# python - 如何在 wxpython 的 textctrl 中添加和编辑时间？

> ID：16140064
> 
> 赞同：0
> 
> 时间：2013-04-22T05:32:47.367
> 
> 标签：python, wxpython

我正在使用 wxpython 开发一个 GUI，我需要一个选择时间的 textctrl。我尝试使用 TimePickerCtrl，但未能将时间提取到 textctrl。如果有人分享一个很好的示例代码，它会为 textctrl 添加时间并且可以随时编辑 textctrl，那就太好了。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:47:49.597

你甚至看过 wxPython 演示吗？它显示了创建选取器控件的 3 种不同方法：

```
import wx
import wx.lib.masked as masked

class MyPanel(wx.Panel):

    def __init__(self, parent):
        wx.Panel.__init__(self, parent)
        self.mainSizer = wx.BoxSizer(wx.VERTICAL)
        # 12-hour format
        text1 = wx.StaticText( self, -1, "12-hour format:", size=(150,-1))
        self.time12 = masked.TimeCtrl( self, -1, name="12 hour control" )
        h = self.time12.GetSize().height
        spin1 = wx.SpinButton( 
                  self, -1, wx.DefaultPosition, (-1,h), wx.SP_VERTICAL )
        self.time12.BindSpinButton( spin1 )
        self.addWidgets([text1, self.time12, spin1])
        # 24-hour format
        text2 = wx.StaticText( self, -1, "24-hour format:")
        spin2 = wx.SpinButton(
                  self, -1, wx.DefaultPosition, (-1,h), wx.SP_VERTICAL )
        self.time24 = masked.TimeCtrl(
                        self, -1, name="24 hour control", fmt24hr=True,
                        spinButton = spin2
                        )
        self.addWidgets([text2, self.time24, spin2])
        # No seconds\nor spin button
        text3 = wx.StaticText( self, -1, "No seconds\nor spin button:")
        self.spinless_ctrl = masked.TimeCtrl(
                                self, -1, name="spinless control",
                                display_seconds = False
                                )
        self.addWidgets([text3, self.spinless_ctrl])
        # set sizer
        self.SetSizer(self.mainSizer)

    def addWidgets(self, widgets):
        sizer = wx.BoxSizer(wx.HORIZONTAL)
        for widget in widgets:
            if isinstance(widget, wx.StaticText):
                sizer.Add(widget, 0, wx.ALL|wx.CENTER, 5),
            else:
                sizer.Add(widget, 0, wx.ALL, 5)
        self.mainSizer.Add(sizer)

class MyFrame(wx.Frame):

    def __init__(self):
        wx.Frame.__init__(self, None, title="Spinner Demo")
        panel = MyPanel(self)
        self.Show()

if __name__ == "__main__":        
    app = wx.App(False)
    f = MyFrame()
    app.MainLoop() 
```

# oracle - 如何将复杂的游标记录传递到过程中？

> ID：16140067
> 
> 赞同：0
> 
> 时间：2013-04-22T05:32:52.570
> 
> 标签：oracle, plsql

假设我已经声明了这样的游标

```
CURSOR cur_customer IS
    SELECT c.customer_id, c.name, o.order_date
    FROM customer c, order o
    WHERE c.customer_id = o.customer_id

BEGIN
    FOR rec_customer IN cur_Customer LOOP
        -- invoke procedure here with rec_customer as a parameter
    END LOOP;
END; 
```

对于仅从一个表中获取游标的情况，可以像这样声明参数

```
rec_customer customer%ROWTYPE 
```

但在这种情况下，游标是从 2 个表中获取的。那么如何为这种情况声明参数呢？有可能吗？

有什么建议么 ？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:16:05.057

如果这一切都在 PL/SQL 程序中完成，则无需声明任何内容。使用隐式游标并让 PL/SQL 弄清楚：

```
declare
    tot_sal number(23,2) := 0;
begin
     for r in ( select dept.dept_no
                       , emp.sal
                from dept 
                     join emp (on emp.deptno = dept,deptno) )
     loop
         tot_sql := tot_sql + r.sql;
     end loop;
end; 
```

我不建议将此作为对 CURSOR FOR 循环的良好使用，它只是说明需要多少基础设施才能使事情正常工作。

如果你想要更多的结构，你可以使用 %ROWTYPE 关键字来引用游标，如下所示：

```
CURSOR cur_customer IS
    SELECT c.customer_id, c.name, o.order_date
    FROM customer c, order o
    WHERE c.customer_id = o.customer_id;

rec_customer cur_customer%ROWTYPE; 
```

也就是说，您可以像使用表一样使用光标定义记录变量。

如果要定义可以在程序单元（尤其是包）之间共享的结构，请声明 RECORD 类型。像这样的东西：

```
TYPE emp_rec IS RE(ORD 
     (emp_dept_name dept.dname%type
      , emp_name emp.ename%type
      , emp_sal emp.sql%type ); 
```

您可以使用它来定义各种东西，例如程序单元参数，无论您在哪里使用 %ROWTYPE。将此类声明放在包规范中，以便在多个包中共享它们。

```
FUNCTION get_emp (p_id emp.empno%type) return emp_rec%rowtype; 
```

[了解更多](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#CIHIEBJC)。

# javascript - date.format 不起作用

> ID：16140068
> 
> 赞同：0
> 
> 时间：2013-04-22T05:33:09.097
> 
> 标签：javascript, date, date-format

我正在尝试使用 date.format 并收到格式不是可识别方法的错误。我尝试在新解决方案中使用相同的方法，并且得到了正确的结果。知道为什么 .format 方法不起作用吗？这些都在Javascript中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:40:26.343

假设你在谈论`Date`类型......

很清楚为什么`format`方法不起作用 - 因为[Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)对象上没有这样的方法。

目前尚不清楚为什么/何时会起作用-很可能您正在使用一些脚本库来修改`Date`对象以具有`format`方法。

但是，如果您谈论的是其他类型 -`format`函数可能存在（或添加）到任何对象，并且不可能在没有代码的情况下提出任何建议......

即具有功能的自定义对象`format`：

```
var date = { format:function() {alert("Hi");}};
date.format(); 
```

# java - 文本框数据未与上传的文件一起传递

> ID：16140071
> 
> 赞同：1
> 
> 时间：2013-04-22T05:33:19.637
> 
> 标签：java, jsp, servlets

我已经提出申请。如果我只上传图像，那么事情就做得很好，但是当我使用文本框作为另一个输入，然后在我尝试将两个数据上传到数据库中之后，图像存储在里面，但文本框数据甚至没有传递到 servlet 文件。

这是我的jsp页面代码：

```
<body>
<form action="UploadPhoto" method="post" enctype="multipart/form-data">
<p>

<input type="file" name="ImageFile" id="ImageFile" />
</p>

<br>
<br>
<input type="text" name="txtname" placeholder="Name">
<p>
<input type="submit" name="submit" value="Upload" />
</p>

</form>
</body> 
```

这是我的 servlet 文件：

```
package com.crime.servlet;

import java.awt.image.BufferedImage;
import java.io.IOException;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;

import javax.imageio.ImageIO;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.apache.commons.fileupload.servlet.ServletFileUpload;
import org.apache.commons.fileupload.disk.DiskFileItemFactory;
import org.apache.commons.fileupload.*;

import sun.misc.BASE64Encoder;

import java.io.*;
import java.util.Iterator;
import java.util.List;
import java.io.File;

public class UploadPhoto extends HttpServlet {
    private static final long serialVersionUID = 1L;

    public UploadPhoto() {
        super();        
    }

    protected void doGet(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {

    }

    protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {

            try {
            Class.forName("com.mysql.jdbc.Driver").newInstance();
        } catch (InstantiationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        String name=request.getParameter("txtname");

        Connection con = null;
        String url = "jdbc:mysql://localhost:3306/AppDb";
        try {
            con = DriverManager.getConnection(url, "root", "root");
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        if (con != null) {

            System.out.println("Connection Succesful");
        } else {
            System.out.println("connection Failed!!!");
        }
//      ============connection endd===============

        PreparedStatement psmnt = null;

        try {
        //  String ImageFile = "";
            String itemName = "";
            boolean isMultipart = ServletFileUpload.isMultipartContent(request);
            if (!isMultipart) {
            } else {
                FileItemFactory factory = new DiskFileItemFactory();
                ServletFileUpload upload = new ServletFileUpload(factory);
                List items = null;
                try {
                    items = upload.parseRequest(request);
                } catch (FileUploadException e) {
                    e.getMessage();
                }
                System.out.println(items);
                Iterator itr = items.iterator();
                while (itr.hasNext()) {
                    FileItem item = (FileItem) itr.next();
                    if (!item.isFormField()) {

                        try {

                                itemName = item.getName();
                            //  String str = getServletContext().getRealPath("/")
                                    //  + "Example\\" + itemName;
                                    //  String str="D:\\images + itemName";
                                System.out.println("============");
                                System.out.println(itemName);
                                System.out.println(item.getContentType());
                                System.out.println(item.getSize());
                                System.out.println(name);
                                System.out.println("============");
                                File savedFile = new File(itemName);
                                item.write(savedFile);

                                System.out.println("beforee image=========");

                                String imageString = null;

                                BufferedImage originalImage = ImageIO.read(new File(itemName));
                                ByteArrayOutputStream baos = new ByteArrayOutputStream();
                                ImageIO.write( originalImage, "jpg", baos );
                                baos.flush();
                                byte[] imageInByte = baos.toByteArray();
                                baos.close();

                                BASE64Encoder encoder = new BASE64Encoder();
                                imageString = encoder.encode(imageInByte);
                                imageString = "data:image/jpeg;base64,"+imageString;
                                String query = "insert into test(name,image) values (?,?)";
                                psmnt = con.prepareStatement(query);

                                //psmnt.setString(1, null);
                                psmnt.setString(1, name);
                                psmnt.setBytes(2, imageString.getBytes());
                                int s = psmnt.executeUpdate();

                                response.sendRedirect("retrivephoto.jsp");
                            } catch (Exception e) {
                                System.out.println("Error" + e.getMessage());
                            }

                    }

                    }
                }

        } catch (Exception e) {
            System.out.println(e.getMessage());
        }

    }

} 
```

* * *

> 任何人都可以请帮我解决这个问题......

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T03:39:57.147

在 if 条件之后

```
if (!item.isFormField()) {
      ......
      ......
 } 
```

添加以下代码

```
else if (item.isFormField()) {
String name = item.getFieldName();
String value = item.getString();
...
} 
```

这将正常工作。

参考：[Apache Commons 文档](http://commons.apache.org/proper/commons-fileupload/using.html)

# mysql - 加快我的mysql语句

> ID：16140077
> 
> 赞同：1
> 
> 时间：2013-04-22T05:33:44.887
> 
> 标签：mysql, performance, select, virtual

我有下表：

```
+---------------------+-------+
| t                   | price |
+---------------------+-------+
| 2013-04-22 13:23:51 |  9.42 |
+---------------------+-------+ 
```

其中 t 是时间戳类型，价格是浮点数。

该表很大，大约有 500K 行。

任务：

我将显示表格和每行过去 3 天的最低价格。

所以我写了以下内容：

```
select *,(
  select max(b.price)
  from my_table b 
  where b.t<a.t and date(b.t)>=adddate(date(a.t),-3)
) from my_table a; 
```

问题是它从来没有完成我的查询，看起来它挂了....有没有办法加快查询速度？还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:41:59.343

我会试试这个：

```
select *,(
  select max(b.price)
  from my_table b 
  where b.t between a.t - interval 3 day and a.t - interval 1 second
) from my_table a; 
```

并确保 my_table.t 有一个索引：

```
alter table my_table add index ix_t (t); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:42:48.627

此查询应该可以快速运行：

```
SELECT *,
    (   SELECT max(b.price)
        FROM my_table b
        WHERE b.t > a.t - interval 3 day
          AND b.t < a.t
    )
FROM my_table a 
```

但你需要确保你有一个索引`mytable(t)`- 我假设这个字段是`timestamp`or `datetime`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T05:40:49.870

我认为您的 adddate 函数可能不正确。尝试像这样使用它：ADDDATE(at, INTERVAL -3 DAY)

# javascript - 将javascript变量作为字符串传递

> ID：16140086
> 
> 赞同：2
> 
> 时间：2013-04-22T05:34:39.463
> 
> 标签：javascript, android, asp.net

**快速详细信息：**我正在使用在 Android 应用程序 WebView 上显示的 ASP.NET MVC 4

在我的网络应用程序中，我有类似于以下内容的 javascript

```
<input type="button" value="Say hello" onClick="showAndroidToast('Hello Android!')" />
<script type="text/javascript">
    function showAndroidToast(toast) {
        Android.showToast(toast);
    }
</script> 
```

我希望通过字符串“toast”将当前用户帐户传递给 android。

我尝试了几种不同的方法将帐户名称作为字符串传递给 android，但都没有奏效，我认为这是因为 javascript 是在新线程上执行的。是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:51:17.590

我正在编辑上一个答案，因为这个问题的要求与提出的标题有很大不同。这不是关于如何将 Javascript 变量作为字符串传递给 android 的 (java) 类。这更像是一个与Android框架和ASP.NET Web服务之间的交互有关的问题。所以，特此我发布了一个广泛处理这个主题的链接（一篇写得很好的文章）[http://www.codeproject.com/Articles/304302/Calling-Asp-Net-Webservice-ASMX-From-an -安卓应用](http://www.codeproject.com/Articles/304302/Calling-Asp-Net-Webservice-ASMX-From-an-Android-Ap)。[注意：此解决方案利用了 Android 平台的 KSOAP 库 jar。]

基本上，您会希望其中一种 Web 服务方法返回登录用户，该方法可以由 Android 的本机 java 类调用（例如，我们称其为“soapActivity”）。现在，为了将此信息从 java 类“soapActivity”传送到 webView，请使用 webView 实例变量的 addJavascriptInterface() 方法。希望这可以帮助。

# android - 以编程方式可绘制项目的图层列表

> ID：16140090
> 
> 赞同：0
> 
> 时间：2013-04-22T05:35:30.107
> 
> 标签：android, layer-list

```
<?xml version="1.0" encoding="UTF-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">  
    <item android:drawable="@drawable/back" />
    <item>
        <shape>
            <solid/>
            <stroke 
                android:width="1dip" 
                android:color="#228886" />
            <corners android:radius="5dip"/>
            <padding 
                android:left="0dip" 
                android:top="0dip" 
                android:right="0dip" 
                android:bottom="0dip" />
        </shape>
    </item> 
</layer-list> 
```

我有这样的 xml 我怎么能以编程方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:39:54.303

使用[LayerDrawable](http://developer.android.com/reference/android/graphics/drawable/LayerDrawable.html#LayerDrawable%28android.graphics.drawable.Drawable%5B%5D%29)类。在结构中，您可以提供一个`Drawable`. 传递一个[Drawable](http://developer.android.com/reference/android/graphics/drawable/Drawable.html)和一个[ShapeDrawable](http://developer.android.com/reference/android/graphics/drawable/ShapeDrawable.html)

虽然我没有尝试过，但我认为它应该可以工作

# c - 从结构中的数组中减去

> ID：16140093
> 
> 赞同：-1
> 
> 时间：2013-04-22T05:35:40.140
> 
> 标签：c, string, struct

**我有一个关于func1 和主程序第一段的**快速问题。本质上，我不理解 a.word-- (in func1) 。

我已将其注释掉，并且 a.word 的输出中没有任何变化，但我不明白为什么它无关紧要。

是否将所有值向下移动 1？或者它只是从最后一个字母循环到倒数第二个字母，如果是这样，为什么在打印 a.word 时会打印出整个“myword”？

我是指针和整件事的新手。

谢谢！

```
#include <stdio.h>

struct foo{
int num;
char *word;
struct foo *ptr;
};
void func1(struct foo);
void func2(struct foo*);
void func3(struct foo);

int main() {
struct foo a;
a.num = 5;
a.word = "myword";
func1(a);
printf("1 %d %s\n", a.num, a.word);

a.num = 100;
a.word = "secondword";
func2(&a);
printf("2 %d %s\n", a.num, a.word);

a.ptr = &a;
a.num = 50;
a.word = "mylastword";
func3(a);
printf("4 %d %s\n", a.num, a.word);
}

void func1(struct foo a)
{
while(*(a.word) != '\0')
{
    putchar(*(a.word));
    a.word++;
}
putchar('\n');
if(a.num % 10 != 0)
{ a.num *= 2; }
a.word--;
printf("num is %d\n", a.num);
}

void func2(struct foo *a)
{
while(*(a->word) != '\0')
{
    putchar(*(a->word));
    a->word++;
}
putchar('\n');
if(a->num % 10 != 0)
{ a->num *= 2; }
a->word--;
printf("num is %d\n", (*a).num);
}

 void func3(struct foo a)
 {
if(a.num > a.ptr->num)
{ a.num = 500; }
else
{ a.num = a.ptr->num + 1; }

a.word = "myotherword";
a.ptr->word = "yetanotherword";
printf("3  %d %s\n", a.num, a.word);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T05:57:51.520

该代码显示了按值或按指针调用函数之间的区别。

```
void func1(struct foo a)  // call by value 
```

在这种情况下，每个更改`a`都不会应用于调用者的输入变量。

```
void func2(struct foo *a) // call by pointer 
```

相同，`func1`但在这种情况下，每次更改`a`都会影响到`a`调用方。

```
struct foo {
int num;
char *word;
struct foo *ptr;
}; 
```

这个结构是一个单向链表，每个元素指向下一个元素。

关于`a.word--;`你问的，因为这段代码有很多缺陷，逻辑不清楚。我只能说它会减少指向某处的指针是内存作为`char`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T05:41:03.620

```
a.word--; 
```

因为`aword`是程序中的一个指针，所以上面的语句所做的只是`aword`指向前一个元素，而不是它指向的当前元素。这是基本的指针算术，但是由于您说您是指针新手，因此我“指出”了它。

它与减量运算符的不同之处在于，它不只是减去 1，`aword`而是使它指向前一个元素，该元素可能距当前元素 N 个字节。你使用过吗

```
a.word++; 
```

现在它将是下一个元素的地址/指针。在您的程序中，`a.word`用于存储字符串的基地址。`a.word++`因此将指向字符串的“下一个字符”。

# jquery - 使用 jQuery 的自下而上选择器方法

> ID：16140095
> 
> 赞同：1
> 
> 时间：2013-04-22T05:35:41.523
> 
> 标签：jquery, jquery-selectors

我很好奇基于 jQuery 的自下而上或从右到左的查询选择。如何改进下面的这个选择器？

不是实际`keydown`事件，而是代码的`.undo`and`.save`部分？

```
<div id="dnsTitle" class="account accountTitle">
    <div class="content">
         <h4>DNS records for:  <a href="http://testing3.com" target="_blank">testing3.com</a></h4>
    <div>

    <div class="actions">
        <a class="undo disabled">Undo Changes</a>
        <a class="save disabled">Save Changes</a>
        <a class="back" href="./?module=dns_manager">Domain List</a>
    </div>
</div> 
```

jQuery 选择器

```
$(document).on("keydown", "#dnsRecords input" ,function() {
    $("#dnsTitle a.save, #dnsTitle a.undo").removeClass("disabled");
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T05:39:28.523

尝试

```
var dnsTitle  = $("#dnsTitle");
$(document).on("keydown", "#dnsRecords input" ,function() {
    $(".save, .undo", dnsTitle  ).removeClass("disabled");
}); 
```

或者

```
dnsTitle.find(".save, .undo").removeClass("disabled"); 
```

查看我为您的案例创建的[这个测试](http://jsperf.com/jquery-selector-performance-with-context)`dnsTitle.find(".save, .undo")`，似乎是最快的

对于选择器比较，请参阅[此测试](http://jsperf.com/jquery-selector-context-comparison)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T05:41:44.040

您可以使用：

```
$(document).on("keydown", "#dnsRecords input" ,function() {
    $("#dnsTitle").find(".save, .undo").removeClass("disabled");
}); 
```

# ariatemplates - Aria 模板浏览器兼容性

> ID：16140101
> 
> 赞同：0
> 
> 时间：2013-04-22T05:36:10.290
> 
> 标签：ariatemplates

我尝试使用 Aria 模板运行一个简单的代码。在 Mozilla 中它工作正常。在 chrome 中，我面临“Access-Control-Allow-Origin 不允许 Origin null”，并且 IE7 没有显示任何内容，同时也没有抛出任何错误（我们通常在页脚中看到）。

这是代码：index.html：

```
<html>
<head>
<title>
Aria Templates
</title>
<script type="text/javascript" src="aria/ariatemplates-1.3.6.js"></script>
<script type="text/javascript" src="aria/css/atskin-1.3.6.js"></script>
</head>
<body>
<div id="output"></div>
 <script type="text/javascript">
     Aria.loadTemplate({
     classpath: 'view.Hello',
         div: "output",
         data: {
             greeting: "Hello",
             people: ["John", "Paul", "George", "Ringo"]
         }
     });
        </script>
</body>
</html> 
```

和Hello.tpl：

```
{Template {
        $classpath: "view.Hello"
    }}
        {macro main()}

            <h1>Hello Fab Four World</h1>

            {foreach name in data.people}
                ${data.greeting} ${name}!<br/>
            {/foreach}

        {/macro}

    {/Template} 
```

这些文件在同一个驱动器中。Hello.tpl 放置在视图文件夹内，html 文件与 aria 文件夹一起放置在视图外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:41:32.733

由于跨域问题，Aria 模板 JS 无法在本地加载。使用一些服务器可以让您选择从服务器运行代码您可以使用 Mongoose 服务器[https://code.google.com/p/mongoose/](https://code.google.com/p/mongoose/)

# c# - 无法创建 MemoryStream

> ID：16140109
> 
> 赞同：1
> 
> 时间：2013-04-22T05:37:29.383
> 
> 标签：c#, memorystream

这段代码有什么理由不应该产生一个带有 Slappy 这个词的内存流吗？

```
 private MemoryStream StringBuilderToMemoryStream(StringBuilder source)
    {
        MemoryStream memoryStream = new MemoryStream();
        StreamWriter streamWriter = new StreamWriter(memoryStream);
        streamWriter.Write("slappy");
        return memoryStream;
    } 
```

即使我说它`streamWriter.Write(source.toString());`失败了。

有趣的是，它适用于调用此例程的方法之一，但不适用于其他任何方法。

我打电话给他们的顺序也没有区别。

但无论如何，即使我调用上述方法，从有效的方法中，输出仍然是一个空的 MemoryStream。

有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T05:39:24.667

您不会刷新流编写器，因此该单词永远不会被写入内存流。

在调用后添加以下内容`streamWriter.Write`：

```
streamWriter.Flush(); 
```

此外，如果您想稍后从内存流中读取该单词，请确保重置其位置，因为在 Write 之后它位于 word 之后`slappy`：

```
memoryStream.Position = 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T05:50:21.090

如果您不想调用`streamWriter.Flush();`，您可以在创建 StreamWriter 的那一刻设置它的 AutoFlush-Property。

```
MemoryStream memoryStream = new MemoryStream();
StreamWriter streamWriter = new StreamWriter(memoryStream)
   {
      AutoFlush = true
   } 
```

# database - 表中单个属性的解决方案

> ID：16140112
> 
> 赞同：5
> 
> 时间：2013-04-22T05:37:42.910
> 
> 标签：database, database-design, entity-relationship

我正在设计数据库架构。我有用户。用户提出订购请求。订单与付款相关联。付款完成后，我想为该用户生成贴纸。
贴纸有初始奖金（即 10 美元）。现在，管理员可以编辑贴纸奖品。因此，如果管理员更改贴纸奖品，则在管理员更改后订单将生成新奖品。

按数据库架构如下：

用户（id，姓名，电子邮件，密码）
订单（id，user_id，no_of_sticker，sticker_prize，地址，状态）
付款（id，order_id，金额，日期）
贴纸（id，order_id，名称，内容）
sticker_info（sticker_prize）

现在，我的问题是——只为一个属性创建新表是否很好。该sticker_prize 仅供管理员编辑

请提出您宝贵的建议。
谢谢你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-21T05:50:17.943

从数据库设计的角度来看，创建sticker_info 表以存储单个值是可以的。您应该确保表上有一个主键，这样您就不会得到重复的行。

在较大的系统中，通常有很多这样的值，并且解决方案通常是一个表格，例如： `configuration( configId, configValue )`.

# javascript - 从 Backbone 集合中的每个模型中获取随机项

> ID：16140113
> 
> 赞同：0
> 
> 时间：2013-04-22T05:37:50.917
> 
> 标签：javascript, backbone.js, collections, random, model

我有一个看起来像的数据

```
var categories = [
    {
        name: 'Animals',
        img: 'animals.jpg',
        list: [{name: 'Cat', img: 'cat.jpg', state: 'hidden'}, {name: 'Dog', img: 'dog.jpg', state: 'hidden'}, {name: 'Zebra', img: 'zebra.jpg', state: 'hidden'}, {name: 'Rabbit', img: 'rabbit.jpg', state: 'hidden'}]
    },
    {
        name: 'Birds',
        img: 'birds.jpg',
        list: [{name: 'Eagle', img: 'eagle.jpg', state: 'hidden'}, {name: 'Owl', img: 'owl.jpg', state: 'hidden'}, {name: 'Parrot', img: 'parrot.jpg', state: 'hidden'}, {name: 'Swan', img: 'swan.jpg', state: 'hidden'}]
    },
    {
        name: 'Fruits',
        img: 'fruits.jpg',
        list: [{name: 'Apple', img: 'apple.jpg', state: 'hidden'},{name: 'Cherry', img: 'cherry.jpg', state: 'hidden'},{name: 'Banana', img: 'banana.jpg', state: 'hidden'}, {name: 'Strawberry', img: 'strawberry.jpg', state: 'hidden'}, {name: 'Mango', img: 'mango.jpg', state: 'hidden'}, {name: 'Orange', img: 'orange.jpg', state: 'hidden'}, {name: 'Pomegranate', img: 'pomegranate.jpg', state: 'hidden'}, {name: 'Jackfruit', img: 'jackfruit.jpg', state: 'hidden'}]
    },
    {
        name: 'Flowers',
        img: 'flowers.jpg',
        list: [{name: 'Rose', img: 'rose.jpg', state: 'hidden'}, {name: 'Tulip', img: 'tulip.jpg', state: 'hidden'}, {name: 'Hibiscus', img:'hibiscus.jpg', state: 'hidden'}, {name: 'Sunflower', img: 'sunflower.jpg', state: 'hidden'}]
    }
    ]; 
```

在这里，我将类别用作集合，将每个类别用作模型。我想要的是从这个集合中获取一组随机的对象，它们在每个模型的列表中。假设我随机点击，我可能会得到菠萝蜜、玫瑰、苹果、鹰、猫、郁金香的列表。

不太确定我创建的结构是否正确。我应该为每个类别的对象列表数组中的每个项目使用模型吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:01:29.867

这可能是在许多因素中起作用的情况。

模型是静态的还是动态的。前一种情况可能很容易。其中您需要知道集合中所有模型的 id 或 cid 范围。

**静态案例**

将所有 id 存储在一个数组中。使用 Math.random() 选择数组的随机索引。

然后你可以使用这个

```
collection.get( arr[Math.random() * arr.length()]); 
```

认为这可能有点矫枉过正，但如果不知道数据的来源或范围，很难说出更好的方法。

# ajax - 使用 django 会话的 JQuery ajax 调用

> ID：16140117
> 
> 赞同：2
> 
> 时间：2013-04-22T05:38:18.887
> 
> 标签：ajax, django, session, authentication

我有一个在 Django 中使用自定义身份验证的站点，它使用用户名、密码和域对 Web 服务进行身份验证。我需要为每个后续视图的请求对象存储此信息。

一切似乎都很顺利，直到我尝试进行 jquery $.ajax 调用，调试从 ajax 请求调用的视图我没有会话信息并且用户是 AnonymousUser。

我需要会话变量来对 Web 服务进行后续调用以显示数据。我在那里尝试了一些东西，但似乎没有任何工作正常。我想确保用户在能够提交这些 Web 服务查询之前登录，因为我想保留用户名/域以在视图中查找密码（而不是在客户端）并确保用户始终登录。

视图.py

```
def login(request):
    if settings.DEBUG == True:
        print "views.login:Attempting loging at views.login(request)"

    if request.method == 'POST':
        if settings.DEBUG:
            print "views.login: method is POST"

        form = LoginForm(request.POST)

        if form.is_valid():
            if settings.DEBUG:
                print "Form is valid, attepmting to authenticate"
            Login(request, form.get_user())
            str = reverse('cm_base.views.index')
            request.session['username']=form.get_user()
            request.session['domain']=form.get_domain()

            return render_to_response('cm_base/index.html', 
                              {"DEBUG": True,
                               "user":request.session.get('username'),
                               'tabs': settings.TAB_LIST},
                              context_instance=RequestContext(request))
        else:
                # Their password / email combination must have been incorrect
            pass

    else:
        form = LoginForm()

    return render_to_response('cm_base/login.html', 
                              {"DEBUG": True,
                               'form' : form
                               },
                              context_instance=RequestContext(request))

@login_required()
def index(request):
    if request.method == 'POST':
        print "POSTING"
    if settings.DEBUG == True:

        print "views.index:Opening index"

    return render_to_response('cm_base/index.html', 
                              {"DEBUG": True,
                               "user":"user",
                               'tabs': settings.TAB_LIST},
                              context_instance=RequestContext(request))

@login_required()
def scorecard(request):
    user = CustomUser.objects.get(username=request.session.get('username'),
                                  domain=request.session.get('domain')) 
```

*在上述行上失败并使用 DoesNotExist: CustomUser 匹配查询不存在。查找参数为 {'username': None, 'domain': None}

base.js

```
$.ajax({
    url : path,
    data: $(this).serialize(),
    headers: {'X-CSRFToken':getCookie('csrftoken')
        ,'sessionid':getCookie('sessionid')
        },
    success : function(data) {
        console.log($(this));
        //refresh right div
        $('#contentpane').empty();
        $('#contentpane').html(data.rhtml);
        console.log(data.rhtml);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:12:33.073

看起来我的后端实现是问题所在。

后端.py

```
class CustomBackend(object)
...
def get_user(self, username):
    try:
        return CustomUser.objects.get(username=username)
    except CustomUser.DoesNotExist:
        return None 
```

这在会话传递期间被调用，实际上使用的是用户 ID，而不是用户名的主键，所以它总是不返回任何用户并默认为匿名用户。[当文档](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#writing-an-authentication-backend)说用户 ID 可以是任何东西（包括用户名）时，我误解了，我认为我可以将其传入，但我在对象上既有自动生成的用户 ID，也有用户名。

# for-loop - 如何在方案中创建嵌套循环

> ID：16140122
> 
> 赞同：1
> 
> 时间：2013-04-22T05:38:33.983
> 
> 标签：for-loop, scheme, nested-loops

我是方案新手，我正在尝试创建嵌套循环，其 C 代码如下所示：-

```
for(i = -1, a = 0; i > -5, a < 5; i--, a++)
{ 
   for(j = i, b = 0; j < (abs(i)), b < 5; j++, b++)
   { 
      <do something>
   }
} 
```

我在这个概念的计划中尝试了类似的事情：-

```
(let oloop( (i -1) (a 0))
            (display i)(display a) (newline) 
            (if (and (> i -5) (< a 5)) (oloop((- i 1) (+ a 1)))))) 
```

我无法嵌套所有四个循环加上上面的代码不起作用。

请建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T08:05:06.010

编写这些嵌套循环的一种方法是使用 to`do`循环构造，它接受 3 个参数：要绑定的变量（具有初始值和更新形式）、终止条件和主体形式：

```
(do ((i -1 (- i 1))                ; Count i downwards from -1
     (a  0 (+ a 1)))               ; Cound a upwards from 0
    ((or (= i -5) (= a 5)))        ; Stop when i = -5 or a = 5
  ;; Body of outer loop
  (do ((j i (+ j 1))               ; Count j upwards from i
       (b 0 (+ b 1)))              ; Count b upwards from 0
      ((or (= (abs i) j) (= b 5))) ; Stop when j = abs(j) or b = 5
    ;; Body of inner loop: Do something
    )) 
```

如果你坚持通过递归来做，使用命名的让，它可以像这样完成，缺点是更新变量的表单远离初始化和终止表单：

```
(let outer ((i -1) (a 0))
  (if (and (> i -5) (< a 5))
      (begin
        (let inner ((j i) (b 0))
          (if (and (< j (abs i)) (< b 5))
              (begin
                ; Do something
                ; then loop
                (inner (+ j 1) (+ b 1)))))
        (outer (- i 1) (+ a 1))))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:45:27.813

`i--`您的 Scheme 样本中的等价物在哪里？

```
(+ i 1) 
```

我对我的方案有点生疏，但我不认为就是这样。

另外，我不确定您在 C 程序中从哪里得到这个基本案例？

```
(< i 10) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:52:16.130

如果您使用的是 Racket，那么有一种非常简单的方法可以实现 C 风格的循环，使用[迭代和推导](http://docs.racket-lang.org/guide/for.html)。代码看起来几乎一样：

```
(for [(i (in-range -1 -5 -1))
      (a (in-range 0 5))]
  ; body of the outer loop
  ; do something with i a
  (for [(j (in-range i (abs i)))
        (b (in-range 0 5))]
    ; body of the inner loop
    ; do something with i a j b
    (display (list i a j b)))) 
```

# jquery - 不透明度过滤器在Firefox中不起作用

> ID：16140123
> 
> 赞同：0
> 
> 时间：2013-04-22T05:38:34.320
> 
> 标签：jquery, html, css

我是 html 和 css/jquery 的新手。我仍然设法使用 chrome 的检查元素和其他来源自己创建了一个网站。但是，不透明度过滤器在 firefox 中不起作用（使用的 firefox im 版本是 20.0.1）。对于“myHobbie”部分，所有图像都使用不透明度因子（`-webkit-filter:opacity = 50%`），但是当涉及到 Firefox 时，我发现它不支持 webkit。

谁能给我任何其他选择，以便它适用于 Firefox 和 chrome？如果可能的话，也适用于 IE。

我的网站网址是：`www.srikarshastry.com/index_vertical.html`

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:58:49.550

首先你做错的是

```
-webkit-filter:opacity=50% 
```

我只会在带有[webkit](http://en.wikipedia.org/wiki/Webkit)引擎的浏览器中使用，比如 chrome safari 等[更多细节](http://html5-demos.appspot.com/static/css/filters/index.html)。在您的情况下，mozilla firefox 使用的是[gecko](http://en.wikipedia.org/wiki/Gecko_%28layout_engine%29)不同的引擎。对于壁虎，您需要将不透明度设置为

```
-moz-opacity:0.5; 
```

或者

```
opacity: 0.5; 
```

下面给出了所有浏览器的透明度设置。

```
.transparent {

    /* Theoretically for IE 8 & 9 (more valid) */   
    /* ...but not required as filter works too */
    /* should come BEFORE filter */
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";

    /* This works in IE 8 & 9 too */
    /* ... but also 5, 6, 7 */
    filter: alpha(opacity=50);

    /* Older than Firefox 0.9 */
    -moz-opacity:0.5;

    /* Safari 1.x (pre WebKit!) */
    -khtml-opacity: 0.5;

    /* Modern!
    /* Firefox 0.9+, Safari 2?, Chrome any?
    /* Opera 9+, IE 9+ */
    opacity: 0.5;
} 
```

更多细节你可以参考[这个链接](http://css-tricks.com/css-transparency-settings-for-all-broswers/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:47:32.213

试试这个不透明度：0.5 for firefox

```
opacity:0.5;
filter:alpha(opacity=50); /* For IE8 and earlier */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T05:45:12.143

对于 Firefox，只需使用：

```
opacity:0.5 
```

> IE9、Firefox、Chrome、Opera 和 Safari 使用属性 opacity 来实现透明度。opacity 属性的取值范围为 0.0 - 1.0。较低的值使元素更透明。
> 
> IE8 和更早的版本使用 filter:alpha(opacity=x)。x 可以取 0 - 100 之间的值。较低的值使元素更透明。

[http://www.w3schools.com/css/css_image_transparency.asp](http://www.w3schools.com/css/css_image_transparency.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T16:21:53.860

谢谢你们。它终于奏效了。悬停效果搞砸了。所以，我做了改变：

```
/*Hover effects*/
 #gallery a img:hover {
 filter: alpha(opacity=100);
 opacity: 100;
}
/*Default state for brightness has to be specified specifically*/
#gallery a img.brightness:hover {
-webkit-filter: brightness(0);
brightness: 0;
    -moz-brightness:0;
filter: alpha(opacity=100);
opacity: 100;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T05:54:53.127

尝试这个

```
 /* IE 8 */
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";

  /* IE 5-7 */
  filter: alpha(opacity=50);

  /* Firefox */
  -moz-opacity: 0.5;

  -webkit-opacity: 0.5; /* Chrome & Safari */

  /* Safari 1.x */
  -khtml-opacity: 0.5;

  /* Good browsers */
  opacity: 0.5; 
```

# c# - OpenTK 鼠标拾取

> ID：16140124
> 
> 赞同：1
> 
> 时间：2013-04-22T05:38:41.597
> 
> 标签：c#, opentk, mouse-picking

我开发了一个小的 C# 示例，通过使用 OpenTK 和 winforms 来挑选要点

有一种方法可以绘制正方形，还有另一种方法可以选择三角形。不知何故，我没有得到任何点击。Readpixel 方法有什么问题吗？因为我刚刚使用正确的方法将 Tao 采摘样本转换为 OpenTK？你能告诉我我的方法有什么问题吗？

```
 private static int[,] board = new int[3, 3];        //Definition
   private const int BUFSIZE = 512;

   private void glControl1_MouseDown(object sender, MouseEventArgs e)
   {
        int[] selectBuffer = new int[BUFSIZE];              //This has to be redifined
        int hits;
        int[] viewport = new int[4];            

        if (e.Button == MouseButtons.Left)
        {
            GL.GetInteger(GetPName.Viewport, viewport);
            GL.SelectBuffer(BUFSIZE, selectBuffer);
            GL.RenderMode(RenderingMode.Select);
            GL.InitNames();
            GL.PushName(0);
            GL.MatrixMode(MatrixMode.Projection);
            GL.PushMatrix();
            GL.LoadIdentity();
            Byte4 Pixel = new Byte4();
            GL.ReadPixels(e.X, viewport[3] - e.Y, 1, 1, PixelFormat.Rgba, PixelType.UnsignedByte, ref Pixel);
            uint SelectedTriangle=SelectedTriangle = Pixel.ToUInt32();
            GL.Ortho(0, 3 ,0, 3, 1,-1); // Bottom-left corner pixel has coordinate (0, 0)                 
            DrawSquares(GL.RenderMode(RenderingMode.Select));
            GL.MatrixMode(MatrixMode.Projection);
            GL.PopMatrix();
            GL.Flush();
            hits = GL.RenderMode(RenderingMode.Render);
            ProcessHits(hits, selectBuffer);
            glControl1.SwapBuffers(); 
        }
    }

    private static void DrawSquares(int mode)
    {
        int i, j;
        for (i = 0; i < 3; i++)
        {
            if (mode == GL.RenderMode(RenderingMode.Select))                
                GL.LoadName(i);
            for (j = 0; j < 3; j++)
            {
                if (mode == GL.RenderMode(RenderingMode.Select))
                    GL.PushName(j);
                GL.Color3((float)i / 3.0f, (float)j / 3.0f, (float)board[i, j] / 3.0f);
                GL.Rect(i, j, (i + 1), (j + 1));
                if (mode == GL.RenderMode(RenderingMode.Select))
                    GL.PopName();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T05:36:39.720

我在代码中遇到了一些问题。它提出了这个问题。像这样更改实例。然后它将起作用:)。一个小错误导致了一个大问题:-(

```
//(mode == GL.RenderMode(RenderingMode.Select))
(mode == RenderingMode.Select) // Removed GL.RenderMode 
```

# ios - 解析的提要在 UITableView 上不可见，cellForRowAtIndexPath 方法未被访问

> ID：16140131
> 
> 赞同：0
> 
> 时间：2013-04-22T05:39:41.290
> 
> 标签：ios, xcode, uitableview, xcode4.5

我正在尝试在表格视图上显示已解析的 Yahoo RSS 提要。但是屏幕上什么也没有显示。当我使用断点时，我开始知道控件根本不会使用 cellForRowAtIndexPath 方法。我不知道为什么会这样。yahoo feed的结构如下：

```
 <?xml version="1.0" encoding="utf-8"?>
    <rss xmlns:media="http://search.yahoo.com/mrss/" version="2.0">
    <channel>
    <title>Yahoo! News - Latest News &amp; Headlines</title>
    <link>http://news.yahoo.com/</link>
    <description>The latest news and headlines from Yahoo! News. Get breaking news stories and in-depth coverage with videos and photos.</description>
    <language>en-US</language>
    <copyright>Copyright (c) 2013 Yahoo! Inc. All rights reserved</copyright>
    <pubDate>Sun, 21 Apr 2013 17:08:00 -0400</pubDate>
    <ttl>5</ttl>
    <image>
    <title>Yahoo! News - Latest News &amp; Headlines</title>
    <link>http://news.yahoo.com/</link>
    <url>http://l.yimg.com/a/i/us/nws/th/main_142c.gif</url>
    </image>
    <item><title>After the bombings, the blame game begins</title><description>&lt;p&gt;&lt;a href="http://news.yahoo.com/boston-marathon-bombing-blame-game-begins-210800101.html"&gt;&lt;img src="http://l3.yimg.com/bt/api/res/1.2/uiv31afw5K_BzPxeYQz44Q--/YXBwaWQ9eW5ld3M7Zmk9ZmlsbDtoPTg2O3E9ODU7dz0xMzA-/http://media.zenfs.com/en_us/News/Reuters/2013-04-22T013026Z_741208741_GM1E94M0Q7101_RTRMADP_3_USA-EXPLOSIONS-BOSTON.JPG" width="130" height="86" alt="A couple embraces at a memorial on Boylston Street to the victims of the Boston Marathon bombings in Boston" align="left" title="A couple embraces at a memorial on Boylston Street to the victims of the Boston Marathon bombings in Boston" border="0" /&gt;&lt;/a&gt;Some lawmakers fault the FBI for not following up on intelligence about one of the alleged bombers.&lt;/p&gt;&lt;br clear="all"/&gt;</description><link>http://news.yahoo.com/boston-marathon-bombing-blame-game-begins-210800101.html</link><pubDate>Sun, 21 Apr 2013 17:08:00 -0400</pubDate><source url="http://www.csmonitor.com/">Christian Science Monitor</source><guid isPermaLink="false">boston-marathon-bombing-blame-game-begins-210800101</guid><media:content url="http://l3.yimg.com/bt/api/res/1.2/uiv31afw5K_BzPxeYQz44Q--/YXBwaWQ9eW5ld3M7Zmk9ZmlsbDtoPTg2O3E9ODU7dz0xMzA-/http://media.zenfs.com/en_us/News/Reuters/2013-04-22T013026Z_741208741_GM1E94M0Q7101_RTRMADP_3_USA-EXPLOSIONS-BOSTON.JPG" type="image/jpeg" width="130" height="86"></media:content><media:text type="html">&lt;p&gt;&lt;a href="http://news.yahoo.com/boston-marathon-bombing-blame-game-begins-210800101.html"&gt;&lt;img src="http://l3.yimg.com/bt/api/res/1.2/uiv31afw5K_BzPxeYQz44Q--/YXBwaWQ9eW5ld3M7Zmk9ZmlsbDtoPTg2O3E9ODU7dz0xMzA-/http://media.zenfs.com/en_us/News/Reuters/2013-04-22T013026Z_741208741_GM1E94M0Q7101_RTRMADP_3_USA-EXPLOSIONS-BOSTON.JPG" width="130" height="86" alt="A couple embraces at a memorial on Boylston Street to the victims of the Boston Marathon bombings in Boston" align="left" title="A couple embraces at a memorial on Boylston Street to the victims of the Boston Marathon bombings in Boston" border="0" /&gt;&lt;/a&gt;Some lawmakers fault the FBI for not following up on intelligence about one of the alleged bombers.&lt;/p&gt;&lt;br clear="all"/&gt;</media:text><media:credit role="publishing company"></media:credit></item></guid></channel>
</rss> 
```

我的 feedViewController.m 如下：

```
@interface feedViewController ()

    @end

    @implementation feedViewController

    @synthesize tableView,showPosts;
    //@synthesize feed;

    Feed *xmlParseFeed;
    //channel *chShow;

    - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
    {
        self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
        if (self) {
            // Custom initialization
        }
        return self;
    }

    - (void)viewDidLoad
    {
        [super viewDidLoad];
        //self.feed = [[Feed alloc] init];
        self.showPosts = [[NSMutableArray alloc] init];

        NSArray *newPosts = [xmlParseFeed newPosts];

        if (newPosts) {   
            [self.showPosts addObjectsFromArray:newPosts];
            //[newPosts release];
        }

        static NSString *feedURLString = @"http://news.yahoo.com/rss";
        NSURL *feedURL = [NSURL URLWithString:feedURLString];
        xmlParseFeed = [[Feed alloc] initWithURL:feedURL];
        self.showPosts = [[NSMutableArray alloc] init];

        [xmlParseFeed refresh];
    }

    - (void)viewDidUnload
    {
        [self setTableView:nil];
        [super viewDidUnload];
        // Release any retained subviews of the main view.
    }
    - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
    {
        return 1;
    }
    - (NSInteger)tableView:(UITableView *)tableView
     numberOfRowsInSection:(NSInteger)section {

        return [showPosts count];
    }
    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
        static NSString *CellIdentifier = @"Cell";

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] ;
            cell.selectionStyle = UITableViewCellSelectionStyleNone;    
        }

        ItemDataCollection *post = [showPosts objectAtIndex:indexPath.row];
         Feed *entry = [showPosts objectAtIndex:indexPath.row];
        // Set up the cell...
            channel *channelRecord = [self.showPosts objectAtIndex:indexPath.row];
        cell.textLabel.text = channelRecord.cTitle;
        cell.textLabel.text = channelRecord.pubDate;
        NSLog(@"channelRecord.title *****************%@",channelRecord.cTitle);    

      /*  cell.textLabel.text = post.title;
        cell.textLabel.text = post.itemDescription;
        cell.textLabel.text = post.titleImage;
        NSLog(@"item title******%@",post.title); */

        cell.textLabel.font=[UIFont fontWithName:@"Arial" size:12];
        cell.textLabel.numberOfLines = 1;

       return cell;
    }
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end

Properties in channel class are: cTitle,pubDate and itemCollectionArray. Properties in Post class are: title, itemDescription and titleImage. Feed class is for parsing. the contents of Feed.m is as follows:

 @class ItemDataCollection;
    @implementation Feed
    @synthesize feedURL,feedRequest,currentElement,currentElementData;
    //@synthesize feedChannel;
    //@synthesize feedPosts;
    static ItemDataCollection *itemCollection;
    static NSMutableArray *channelCollection;
    NSMutableString *mString;
    NSMutableString *str;
    channel *Channel ;
    - (NSArray *)newPosts {
        NSMutableArray *posts = [[NSMutableArray alloc] init];

        for (NSInteger item = 1; item <= 5; item++) {
            //NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
            ItemDataCollection *newPost;
            newPost = [[ItemDataCollection alloc] init];
          // NSString *pubDate = [NSDate dateWithTimeIntervalSinceNow:@"pubDate"];
       newPost.title = [NSString stringWithFormat:@"title %@", kTitleElementName];
            newPost.itemDescription = [NSString stringWithFormat:@"itemdescription %@", kItemDescription];
            newPost.titleImage = [NSString stringWithFormat:@"image %@",kItemImage];
         //   newPost.itemTitle = [NSString stringWithFormat:@"itemtitle %@", ITEM_TITLE_XML];

            [posts addObject:newPost];
            //[newPost release];

           // [pool drain];
        }
        return posts;
    }

    - (Feed *) initXMLParser {

        //[super init];

        appDelegate = (appAppDelegate *)[[UIApplication sharedApplication] delegate];

        return self;
    }
    -(id)initWithURL:(NSURL *)sourceURL {
        if (self = [super init]) {  
             self.feedURL = sourceURL;

            channelCollection=[[NSMutableArray alloc] init];
        }
        return self;
    }
    - (void)refresh {
        self.feedRequest = [ASIHTTPRequest requestWithURL:feedURL];

      //  [feedPosts removeAllObjects];
        [feedRequest setDelegate:self];
        [feedRequest startAsynchronous];
    }
    - (void)requestFinished:(ASIHTTPRequest *)request {
        NSData *responseData = [request responseData];
       // NSLog(@"*************response are *********%@",[[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding]);

        NSXMLParser *parser = [[NSXMLParser alloc] initWithData:responseData];
        [parser setDelegate:self];
        if ([parser parse]) {

            [[NSNotificationCenter defaultCenter] 
             postNotificationName:@"myevent"
             object:nil];
           // [posts ]

        }    
    }

    - (void)requestFailed:(ASIHTTPRequest *)request {
        NSError *error = [request error];
        NSLog(@"requestFailed: %@", [error localizedDescription]);
    } 

    - (void)parser:(NSXMLParser *)parser
    didStartElement:(NSString *)elementName
      namespaceURI:(NSString *)namespaceURI
     qualifiedName:(NSString *)qName
        attributes:(NSDictionary *)attributeDict {

        if ([elementName isEqualToString:kChannelElementName]) {
            Channel = [[channel alloc] init];
            dict=[[NSMutableDictionary alloc] init];
            [Channel setItemCollectionArray:[[NSMutableArray alloc] init]];

            return ;
    }

        if ([elementName isEqualToString:kItemElementName]) {
           itemCollection=[[ItemDataCollection alloc] init];

            return ;
         }
        if ([elementName isEqualToString:kTitleElementName]) {

            return ;

        }
      if([elementName isEqualToString:kItemDescription]){
            return ;
        }
        if ([elementName isEqualToString:kItemImage]) {
            NSString *urlString = attributeDict[@"url"];
            if(urlString){
                [dict setObject:urlString forKey:@"img"];
                NSLog(@"%@",urlString);
                mString = [NSString stringWithFormat:urlString];
                str = [NSString stringWithFormat:mString];
            }

            return ;
        }

    }

    - (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {

        if (currentElementData == nil) {
            self.currentElementData = [[NSMutableString alloc] init];
        }

        [currentElementData appendString:string];     
    }
    - (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName
      namespaceURI:(NSString *)namespaceURI
     qualifiedName:(NSString *)qName {

        if ([elementName isEqualToString:kChannelElementName]) {
            [channelCollection addObject:Channel];

            NSLog(@"channel are***********%@",channelCollection);
            for(ItemDataCollection *mydata in Channel.itemCollectionArray){
                NSLog(@"___%@ <><><><><> desc \n   <><><><><><> img \n        %@",mydata.title,/*mydata.itemDescription*/mydata.titleImage);

            }

            Channel =nil;

        }

       else  if ([elementName isEqualToString:kItemElementName]) {
           [[Channel itemCollectionArray] addObject:itemCollection];
           itemCollection=nil;

            }
       else  if ([elementName isEqualToString:kTitleElementName]) {
           if(itemCollection==nil){

           Channel.cTitle=currentElementData;
           }
           else{

               itemCollection.title=currentElementData;

           }

       }
       else  if ([elementName isEqualToString:kPubDate]) {
           Channel.pubDate=currentElementData;

       }
      else  if ([elementName isEqualToString: kItemDescription]) {
          if(itemCollection!=nil){
           itemCollection.itemDescription = currentElementData;

       } 
      }
      else if([currentElementData rangeOfString:@"media:content"].location){

          if(itemCollection!=nil){

          if([str isEqualToString:mString]){
                //  [currentElementData appendString:dict];
                  itemCollection.titleImage = mString;
          } else{
              itemCollection.titleImage = @"";
          }
          }
      }

        self.currentElementData = nil;
    }
    - (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError {

        NSString *info = [NSString stringWithFormat:
                          @"Error %i, Description: %@, Line: %i, Column: %i",
                          [parseError code],
                          [[parser parserError] localizedDescription],
                          [parser lineNumber],
                          [parser columnNumber]];

        NSLog(@"RSS Feed Parse Error: %@", info);
    }

    @end 
```

提要正在被解析，可以在控制台上看到。但它在屏幕上不可见。可能是什么原因？正如我之前所说， cellForRowAtIndexPath() 根本没有被访问。这是什么原因？？

我添加了这个方法：

```
- (void)feedChanged:(NSNotification *)notification {
    NSArray *newPosts = [xmlParseFeed newPosts];

    NSLog(@"%@",newPosts);
    if (newPosts) {

        [self.showPosts addObjectsFromArray:newPosts];
        [self.tableView reloadData];
       // [self updateViewTitle];
       // [newPosts release];
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:50:53.890

我看不到您在代码中的哪个位置从 UITableView 调用 reloadData。您需要在加载 newPosts**后调用此方法。**

如果这不起作用，请检查以下几项：

1.  tableView:numberOfRowsInSection: 返回的值是多少？它大于零吗？如果它为零，这就是为什么不调用 tableView:cellForRowAtIndexPath 的原因。

2.  你如何加载你的提要？是在主线程还是其他线程？您应该在不同的线程中加载它，因此在加载数据时不会阻塞 UI，但请确保在将数据加载到 newPosts 后调用 reloadData。

# iphone - 在 ScrollView 中创建动态 UIButton 的正确方法？

> ID：16140139
> 
> 赞同：4
> 
> 时间：2013-04-22T05:40:10.680
> 
> 标签：iphone, ios, objective-c, cocoa-touch

我是`iOS`开发新手。

我有一个基于导航的应用程序，在我的应用程序中，我使用`for loop`. 我有两个`UITextField`s（**行**和**列**）`FirstViewController`。当用户输入行和列的值时**，**然后**单击**行**和**列**的**`OK Button`值传递到。在我必须放置一个逻辑来创建基于行和列值的所有按钮。****`anOtherViewController``anOtherViewController`****

 ******逻辑代码：**

```
for (int i = 1 ; i <= rows; i++)
{
    for (int j = 1 ; j <= columns ; j++)
    {
        NSString *btnTitle = [NSString stringWithFormat:@"%d",buttonCount];
        self.btnCount = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        self.btnCount.tag = [btnTitle intValue];
        [self.btnCount setTitle: btnTitle forState: UIControlStateNormal];
        [self.btnCount addTarget:self action:@selector(btnCountPressed:) forControlEvents:UIControlEventTouchUpInside];
        self.btnCount.frame = CGRectMake(162+changedX, 60+changedY, 43, 43);
        [self.scrollView addSubview:self.btnCount];

        [self.listOfbtnCount addObject:btnTitle];

        changedY = changedY + 50;
        buttonCount = buttonCount + 1;
    }
    changedX = changedX + 55;
    if (i == rows)
        widthScView = changedX;

    if (heightScView == 0)
        heightScView = changedY;

    changedY = 5;
} 
```

**我的截图：**

![在此处输入图像描述](https://i.stack.imgur.com/x0HoD.png)

它工作正常，但我的问题是，如果我输入的**行**和**列**的值超过**40** ( *about* )，那么我的应用程序需要更多时间来创建动态按钮。该问题仅与创建按钮所需的时间有关。

有什么方法可以更快地创建一个按钮？我还需要知道我的代码是否不利于内存管理？请在这个问题上帮助我。

**供参考：** *我没有产生任何错误，我只遇到了创建按钮的耗时过程的问题。*

预先感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T05:47:32.587

**你应该使用`UICollectionView`这个。**

[`UICollectionView`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html)工作原理很像`UITableView`，它将管理屏幕上显示的单元格，包括滚动，并且它会在需要时向其数据源询问新单元格。您还可以回收单元格，因此您只需要创建大约足以显示的内容，以及一些额外的内容。这应该确实可以提高性能，尤其是在滚动时。

Apple 在这里有一些[使用 UICollectionView 的示例代码](http://developer.apple.com/library/ios/#samplecode/CollectionView-Simple/Introduction/Intro.html#//apple_ref/doc/uid/DTS40012860)，观看[2012 WWDC Videos](https://developer.apple.com/videos/wwdc/2012/)中的*Introducing Collection Views*将使您有一个良好的开端。

> 我的问题是，如果我输入的行和列的值超过 40

四十行四十列将为您提供 1600 个按钮，其中大多数大多数时候不需要存在。通过为您管理屏幕上需要哪些单元格，`UICollectionView`可以将其减少到大约 80 个（根据您的屏幕截图判断）。通过这种方式，您应该会看到很多更好的性能。

`UICollectionView`一旦您配置了集合视图（您可以在代码或界面生成器中完成），还将简化按钮的定位，您不需要任何自己的代码来计算按钮的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:47:24.127

只需根据您的要求在此处实现您的逻辑..

```
 int imageIndex = 0;

    int yOffset = 4;//set offset which you want...

    while (imageIndex < rows)        
    {
        int yPos =  7 + yOffset * 30; // set distance in height between two raws

        for(int i = 0; i < columns; ++i)
        {
            CGRect  rect = CGRectMake((0 + i * 80), yPos, 80, 31);**// here set frame of every button with different x and y postion// here width of button is 80 and height is 31**

            if (imageIndex < rows) {

                UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
                button.frame = rect;
                button.tag = imageIndex;
                [button addTarget:self 
                           action:@selector(btnTemp_Clicked:)
                 forControlEvents:UIControlEventTouchDown];

                [button setTitle:[NSString stringWithFormat:@"%d",imageIndex] forState:UIControlStateNormal];
                [button.titleLabel setFont:[UIFont fontWithName:@"Helvetica-Bold" size:12]];

//                [button.titleLabel setTextColor:[UIColor blueColor]];
                [button setTitleColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"circle03.jpg"]] forState:UIControlStateNormal ];                
                [button setTitleColor:[UIColor redColor] forState:UIControlStateHighlighted ];

                [button setNeedsDisplay];

                [yourScrollView addSubview:button];

            }
            ++imageIndex;
        }
        ++yOffset;
    } 
```

查看我输出的屏幕..

![在此处输入图像描述](https://i.stack.imgur.com/mI6B8.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:37:55.743

试试这个方法

```
 -(void)ScrollViewSetting {

        scrollview.scrollEnabled=YES;
        scrollview.userInteractionEnabled=YES;

        TotalStyleX=25;
        TotalStyleY=18;

        int count=0;
        int px=0;
        int py=0;

        for (int i=1; i<=TotalStyleX; i++) {
            px=0;
            for (int j=1; j<=TotalStyleY; j++) {
                count++;

                UIButton *btn1=[[UIButton alloc] init];

                btn1.tag = count;
                btn1.frame=CGRectMake(px+10, py+10, 300, 380); //you can set your height and width your x and y position
                [scrollview addSubview:btn1];

                px=px+320;     
            }
            py=py+400;

        }
        [scrollview setContentSize:CGSizeMake(px, py)];

    } 
```****

# python-2.7 - 通过scrapy中的蜘蛛中的回调函数保存PDF文件

> ID：16140140
> 
> 赞同：1
> 
> 时间：2013-04-22T05:40:14.103
> 
> 标签：python-2.7, web-crawler, beautifulsoup, scrapy

您好我已经编写了以下代码来提取 pdf 文件所在的 url 并通过回调函数保存 pdf。但是我的回调函数-save_pdf 永远不会被调用。

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from scrapy.http import Request
from bs4 import BeautifulSoup

class spider_aicte(BaseSpider):
    name = "Colleges"
    allowed_domains = ["http://www.xyz.org"]
    start_urls = [
        "http://www.xyz/appwebsite.html",
        "http://www.xyz/misappengineering.htm",
        ]

    def parse(self, response):
        filename = response.url.split("/")[-2]
        soup = BeautifulSoup(response.body)
        for link in soup.find_all('a'):
            download_link = link.get('href')
            if '.pdf' in download_link:
                pdf_link = "http://www.xyz.org" + download_link
                print pdf_link
                print "pdf_link";
                for url in pdf_link:
                    print "inforLOOP-----pdflink"
                    yield Request(url, callback=self.save_pdf)

    def save_pdf(self, response):
         print "SAVING";
         path = self.get_path(response.url)
         with open(path, "wb") as f:
            f.write(response.body)
            print "SAVED" ; 
```

# php - WordPress - 仅显示父类别帖子而不是子类别帖子

> ID：16140145
> 
> 赞同：1
> 
> 时间：2013-04-22T05:40:42.170
> 
> 标签：php, wordpress, mysqli

我一直在努力从 Wordpress 中提取父类别的帖子。当我试图显示唯一的父类别帖子时，wordpress 查询也会显示子类别帖子。

怎么可以省略子类帖子。请帮忙！！..

```
<?
// Get the post ID
        $id = get_the_ID();         

        //get all the categories ( this function will return all categories for a post in an array)
        $category= get_the_category( $id );

        if ($category->category_parent == 0) {

        //extract the first category from the array
        $catID = $category[0]->cat_ID;

        //Assign the category ID into the query
        $verticalNavigationSwitcher = "cat=$catID&orderby=ID&order=ASC";
     }              

        $result = new WP_Query($verticalNavigationSwitcher);

                    //$featuredPosts->query('showposts=5&cat=3');
                    while ($result->have_posts()) : $result->the_post(); 
        ?>

   <li><a href='<?php the_permalink() ?>'><span><?php the_title(); ?></span></a></li>

  <?php 
            endwhile; 
            wp_reset_postdata();
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:07:06.403

尝试使用此查询：

```
$verticalNavigationSwitcher = "category__in=$catID&orderby=ID&order=ASC"; 
```

# java - 将Windows中的复制操作添加到Java应用程序

> ID：16140151
> 
> 赞同：0
> 
> 时间：2013-04-22T05:41:10.030
> 
> 标签：java, windows, windows-shell, right-click

我想在 windows 中获取 crtl+c 或右键单击复制之类的事件，这可以对运行的 java 应用程序执行该事件，

这意味着如果有人复制了一些文本，则应该将其粘贴到 java 应用程序文本区域中......

我已经制作了 java 应用程序，它可以通过 main 方法接受参数。

但是如何触发从windows到java的事件..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:06:50.297

最简单的方法是监视更改`Toolkit.getSystemClipboard`

有两种方法可以做到这一点。您可以监控对`DataFlavour`.

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Toolkit;
import java.awt.datatransfer.Clipboard;
import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.FlavorEvent;
import java.awt.datatransfer.FlavorListener;
import java.awt.datatransfer.Transferable;
import java.awt.datatransfer.UnsupportedFlavorException;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class ClipboardMonitor {

    public static void main(String[] args) {
        new ClipboardMonitor();
    }

    public ClipboardMonitor() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private JTextArea textArea;

        public TestPane() {
            textArea = new JTextArea(10, 10);
            setLayout(new BorderLayout());
            add(new JScrollPane(textArea));
            Toolkit.getDefaultToolkit().getSystemClipboard().addFlavorListener(new FlavorListener() {
                @Override
                public void flavorsChanged(FlavorEvent e) {
                    setText(getClipboardContents());
                }
            });
            Thread t = new Thread(new ContentsMonitor());
            t.setDaemon(true);
            t.start();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        protected String getClipboardContents() {
            String text = null;
            Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();
            if (clipboard.isDataFlavorAvailable(DataFlavor.stringFlavor)) {
                try {
                    Transferable contents = clipboard.getContents(TestPane.this);
                    text = (String) contents.getTransferData(DataFlavor.stringFlavor);
                } catch (UnsupportedFlavorException | IOException ex) {
                    ex.printStackTrace();
                }
            }
            return text;
        }

        protected void setText(final String text) {
            SwingUtilities.invokeLater(new Runnable() {
                @Override
                public void run() {
                    textArea.setText(text);
                }
            });
        }

        public class ContentsMonitor implements Runnable {

            @Override
            public void run() {
                String previous = getClipboardContents();
                while (true) {
                    try {
                        Thread.sleep(1000);
                    } catch (InterruptedException ex) {
                    }
                    String text = getClipboardContents();
                    if (text != null && !text.equals(previous)) {
                        setText(text);
                        previous = text;
                    }
                }
            }
        }
    }
} 
```

# java - 如何从 servlet 连接到数据库。我尝试了以下代码，但每次控制都会出现异常

> ID：16140153
> 
> 赞同：1
> 
> 时间：2013-04-22T05:41:19.030
> 
> 标签：java, database, servlets, database-connection

如何从 servlet 连接到数据库。我尝试了以下代码，但每次都控制异常。

```
 try
            {
            int num_rows = 0;
            Connection con = null;
            Statement st = null;
            Statement search = null;
            ResultSet rs = null;
            ResultSet searchRS = null;

            // Connecting to the database
            PrintWriter out = response.getWriter();
            Class.forName("com.mysql.jdbc.Driver").newInstance();
            con = DriverManager.getConnection("jdbc:mysql://127.0.0.1:3306/employees","root","");
            st = con.createStatement(); 
            rs = st.executeQuery("select employees.first_name,employees.last_name,employees.gender,employees.hire_date,departments.dept_name,salaries.salary from employees,departments,salaries,dept_emp where employees.emp_no=salaries.emp_no AND dept_emp.emp_no=employees.emp_no AND dept_emp.dept_no=departments.dept_no AND salaries.to_date='9999-01-01' AND (employees.first_name='"+Sname+"' OR employees.last_name='"+Sname+"')");
            //Retrieval of data from result set retrieved from database

            String[][] str = new String[10][6];

                while( rs.next())
                {
                    str[num_rows][0] = rs.getString("first_name");
                    str[num_rows][1] = rs.getString("last_name");
                    str[num_rows][2] = rs.getString("gender");
                    str[num_rows][3] = rs.getString("hire_date");
                    str[num_rows][4] = rs.getString("dept_name");
                    str[num_rows][5] = rs.getString("salary");
                    num_rows++;
                }

                if(num_rows <10)
                {
                    isLast = true;
                    var = 0;
                }   

            request.setAttribute("listvalue",str);
            request.setAttribute("rows",num_rows);
            RequestDispatcher RequestDispatcherObj =request.getRequestDispatcher("SearchName.jsp");

            RequestDispatcherObj.forward(request, response);

            out.flush();
            con.close();
            var = var +10;
            }
    catch(Exception e)
    {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:47:14.890

您的字符串数组可以容纳 10 条记录；可能您从数据库中获得的不仅仅是这些。

你可以试试这个-

```
while( rs.next() && num_rows < 10 ) 
```

如果您需要收集所有记录，最好使用 List 之类的集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:13:11.530

对我来说看起来像这条线

```
RequestDispatcherObj.forward(request, response); 
```

正在制造问题。它正在将请求转发到其他地方。`requestdispatcheobj`可能已关闭对象`out`。所以在那之后使用`flush() and write()` 将导致一个`IllegalStateException`.

```
out.flush();
con.close();
var = var +10; 
```

因此，请确保不是这种情况。

# scala - 如何将元组的元组转换为地图

> ID：16140154
> 
> 赞同：2
> 
> 时间：2013-04-22T05:41:32.850
> 
> 标签：scala

我有一个`Tuple`of `Tuple`s，需要将其转换为一个`Map`. 例如

```
(("a", 3), ("b", 1), ("c", 7), ..., ("z", 10)) 
```

应该导致`Map`

```
Map("a" -> 3, "b" -> 1, ..., "z" -> 10) 
```

在 Scala 中有哪些方法可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T05:58:24.887

```
scala> tuples
res0: ((String, Int), (String, Int), (String, Int)) = ((a,3),(b,1),(c,7))

scala> tuples.productIterator.map{case (a,b)=> (a -> b)}.toMap
res1: scala.collection.immutable.Map[Any,Any] = Map(a -> 3, b -> 1, c -> 7)

scala> res1("a")
res2: Any = 3

scala> res1("b")
res3: Any = 1

scala> res1("c")
res4: Any = 7 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T08:57:59.737

如果您愿意将依赖项引入您的项目，那么这种类型级别的东西就是 shapeless[的](https://github.com/milessabin/shapeless)好处：

```
> shapeless-core/console
[warn] Credentials file /home/folone/.ivy2/.credentials does not exist
[info] Compiling 24 Scala sources to /home/folone/workspace/shapeless/core/target/scala-2.11/classes...
[info] Starting scala interpreter...
[info] 
Welcome to Scala version 2.11.0-20130205-141957-132e09fc2e (OpenJDK 64-Bit Server VM, Java 1.7.0_17).
Type in expressions to have them evaluated.
Type :help for more information.

scala> import shapeless._
import shapeless._

scala> import Tuples._
import Tuples._

scala> val tuples = (("a", 3), ("b", 1), ("c", 7), ("z", 10))
tuples: ((String, Int), (String, Int), (String, Int), (String, Int)) = ((a,3),(b,1),(c,7),(z,10))

scala> tuples.hlisted.toList.toMap
res2: scala.collection.immutable.Map[String,Int] = Map(a -> 3, b -> 1, c -> 7, z -> 10) 
```

与其他解决方案相比，所有类型都在编译时进行检查。所以，这不会编译：

```
scala> val tuples = (("a", 3), ("b", 1), ("c", 7), ("z", "hello"))
tuples: ((String, Int), (String, Int), (String, Int), (String, String)) = ((a,3),(b,1),(c,7),(z,hello))

scala> tuples.hlisted.toList.toMap
<console>:15: error: could not find implicit value for parameter toList: shapeless.ToList[shapeless.::[(String, Int),shapeless.::[(String, Int),shapeless.::[(String, Int),shapeless.::[(String, String),shapeless.HNil]]]],Lub]
              tuples.hlisted.toList.toMap
                             ^ 
```

这是[@milessabin](http://youtu.be/GDbNxL8bqkY)在 nescala 2012 上的演讲，包括一些关于`HList`s 的信息。如果你喜欢，[这里是](http://youtu.be/9w1PDnD5mPc)今年最新的无形热度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T05:53:42.837

作为第一步，对于任意元组`t`（实际上是 的实例`scala.Product`），您可以使用它`t.productIterator`来获取`Iterator[Any]`其组件。

然后，要获取地图，您可以执行以下操作：

```
t.productIterator.asInstanceOf[Iterator[(String, Int)]].toMap 
```

*备注*：在您的情况下使用元组似乎有点奇怪，因为参数的类型是同质的。为什么不使用`List[(String, Int)]`like

```
List(("a", 3), ("b", 1), ("c", 7), ..., ("z", 10)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-08T10:18:15.067

两个最简洁的解决方案：

```
scala> tuples
res50: ((String, Int), (String, Int), (String, Int)) = ((a,3),(b,1),(c,7))

scala> tuples.productIterator.map{case t: (String, Int) => t}.toMap
res51: scala.collection.immutable.Map[String,Int] = Map(a -> 3, b -> 1, c -> 7)

scala> tuples.productIterator.map(_.asInstanceOf[(String, Int)]).toMap
res54: scala.collection.immutable.Map[String,Int] = Map(a -> 3, b -> 1, c -> 7) 
```

# ios - 在不使用后端服务器的情况下发布操作

> ID：16140163
> 
> 赞同：2
> 
> 时间：2013-04-22T05:42:46.657
> 
> 标签：ios, facebook, facebook-graph-api

我将此代码用于我的 facebook 请求，该请求将图像和文本发布到用户的提要：

我的问题是，如何添加位置参数？我遵循了本教程：[https ://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/show-nearby-places/](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/show-nearby-places/)

但我无法使用后端服务器。如果我不想使用后端服务器，如何在不使用后端服务器的情况下修改我的代码以发布故事，包括位置（最好链接到 facebook 位置）？我让用户选择了这个地方，而且效果很好。目前，我有兴趣在不使用后端服务器的情况下让“at Patxi's Chicago Pizza”出现。这可能吗？

![在此处输入图像描述](https://i.stack.imgur.com/QjA21.png)

```
NSMutableDictionary* params = [[NSMutableDictionary alloc] init];
[params setObject:self.textViewForComments.text forKey:@"message"];

//DLog(@"%@",[params objectForKey:@"message"]);

if(self.capturedImageAtFullResolution){

    DLog(@"not null");

    [params setObject:UIImagePNGRepresentation(self.capturedImageAtFullResolution) forKey:@"picture"];

    /*
    if(canPostSmileysImage){ //##

        //[params setObject:UIImagePNGRepresentation([self takeScreenShot]) forKey:@"picture"];

    } else {

    }
    */

    [self performPublishAction:^{

        [FBRequestConnection startWithGraphPath:@"me/photos"
                                     parameters:params
                                     HTTPMethod:@"POST"
                              completionHandler:^(FBRequestConnection *connection,
                                                  id result,
                                                  NSError *error)
         {
             if (error)
             {
                 //showing an alert for failure
                 DLog(@"%@",error);

                 UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                                 message:@"unable to post"
                                                                delegate:nil
                                                       cancelButtonTitle:@"OK"
                                                       otherButtonTitles:nil];
                 [alert show];

             }
             else
             {
                 //showing an alert for success
                 UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Posted!"
                                                                 message:@""
                                                                delegate:nil
                                                       cancelButtonTitle:@"OK"
                                                       otherButtonTitles:nil];
                 [alert show];
             }

         }];

    }];

} 
```

# ruby-on-rails - 使用单个模型，rails 为“不同形式的相同字段”显示不同的验证消息

> ID：16140165
> 
> 赞同：0
> 
> 时间：2013-04-22T05:42:58.423
> 
> 标签：ruby-on-rails, devise, validation

在这里，我使用具有单一模型 user.rb 的设备注册和登录表单的错误消息。如何更改字段电子邮件的错误消息和不同表单的密码？在 user.rb 我使用：

```
 validates_presence_of :full_name       
 validates_presence_of :email, :message => "enter email"
 validates_confirmation_of :password
 validates_presence_of :password, :message=> "enter password" 
```

在注册表单中：

```
= form_for(resource, :validate => true, :as => resource_name, :url => registration_path(resource_name)) do |f|
  %ul
    %li
      = f.label :full_name
      = f.text_field :full_name
    %li
    = f.label :email
      = f.email_field :email
    %li
      = f.label :password
      = f.password_field :password
    %li
      = f.label :password_confirmation
      = f.password_field :password_confirmation
    %li
      = f.label :zip
      = f.text_field :zip    
   = f.submit "Sign up", :class=> "btn btn-primary" 
```

登录表格：

```
= form_for(resource, :validate => true, :as => resource_name, :url => session_path(resource_name)) do |f|      
  %ul
    %li
      = f.label :email
      = f.email_field :email
    %li
      = f.label :password
      = f.password_field :password
    - if devise_mapping.rememberable?
      %li
        = f.check_box :remember_me
        = f.label :remember_me
  %div
    = f.submit "Log in", :class=> "btn btn-primary mt10 ml60" 
```

如何更改上述登录表单的消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:14:37.330

考虑这里问题的最佳答案：[Fully custom validation error message with Rails](https://stackoverflow.com/questions/808547/fully-custom-validation-error-message-with-rails)

这是一种非常灵活且可扩展的方式，可以修改各种模型属性的错误消息和字段名称及其相关的验证错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:04:34.923

默认情况下，登录表单将显示“无效的电子邮件或密码”。

这是故意的，因为对于登录操作，这种模糊的信息比具体的信息要好，比如“密码太短”、“电子邮件不存在”等。

我认为没有必要像其他正常形式那样将其更改为特定的。

# javascript - 单击“提交”按钮时如何调用 Javascript 函数？

> ID：16140166
> 
> 赞同：1
> 
> 时间：2013-04-22T05:43:12.530
> 
> 标签：javascript, html, dropzone.js

我正在尝试将拖放文件上传功能实现到网页中。我在 dropzone.js 文件中有这个 javascript 函数：

```
Dropzone.prototype.processFile = function(file) {
  this.filesProcessing.push(file);
  file.processing = true;
  this.emit("processingfile", file);
  return this.uploadFile(file);
}; 
```

我的 html 文件中有这个：

```
<script src="dropzone.js"></script>
<input type="submit" class="btn" value="Submit" /> 
```

[我从http://www.dropzonejs.com](http://www.dropzonejs.com)下载了 Dropzone.js 文件以在我的页面中实现。Dropzone 具有在文件被拖放到页面后立即开始上传文件或等到用户调用上述函数的功能。

单击“提交”按钮时如何调用该函数？我对 dropzone 的实际工作原理非常陌生。dropzone.js 的创建者的说明说我应该调用“myDropzone.processFile(file);” 如果我不希望 dropzone 在文件被放入元素后立即开始上传，但我不确定如何从我的 html 按钮调用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-13T11:09:38.010

```
<div id="previews" class="dropzone-previews"></div>

<button id="clickable">Click me to select files</button>

<script>
  new Dropzone(document.body, { // Make the whole body a dropzone
    url: "/upload/url", // Set the url
    previewsContainer: "#previews", // Define the container to display the previews
    clickable: "#clickable" // Define the element that should be used as click trigger to select files.
  });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-01T06:28:16.360

以下是有关该主题的教程的链接：http: [//bit.ly/1jVOKfd](http://bit.ly/1jVOKfd)

我发现教程中的示例脚本对于嵌入到 dropzone 中的按钮（即表单元素）效果很好。如果您希望将按钮放在表单元素之外，我可以使用单击事件来完成它：

首先，HTML：

```
 <form id="my-awesome-dropzone" action="/upload" class="dropzone">  
        <div class="dropzone-previews"></div>
        <div class="fallback"> <!-- this is the fallback if JS isn't working -->
        <input name="file" type="file" multiple />
        </div>

      </form>
      <button type="submit" id="submit-all" class="btn btn-primary btn-xs">Upload the file</button> 
```

然后，脚本标签....

```
 Dropzone.options.myAwesomeDropzone = { // The camelized version of the ID of the form element

        // The configuration we've talked about above
        autoProcessQueue: false,
        uploadMultiple: true,
        parallelUploads: 25,
        maxFiles: 25,

        // The setting up of the dropzone
        init: function() {
          var myDropzone = this;

         // Here's the change from enyo's tutorial...

            $("#submit-all").click(function (e) {
                e.preventDefault();
                e.stopPropagation();
                myDropzone.processQueue();
                }
            );

        }

      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T18:22:52.723

试试这个，它对我有用：

```
<form id="my-dropzone" class="dropzone" action="file-upload.php"></form>
<input type="button" value="Upload Files" onclick="uploadClicked()" />
<script type="text/javascript" src="dropzone.js"></script>
<script type="text/javascript">
    Dropzone.options.myDropzone = {
        maxFilesize: 2, // MB,
        enqueueForUpload: false
    };

    function uploadClicked() {
        var dz = Dropzone.forElement("#my-dropzone");
        for (var i = 0; i < dz.files.length; i++) {
            dz.filesQueue.push(dz.files[i]);
        }
    dz.processQueue();
    }
</script> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-22T06:00:21.597

```
<script>
function js_fun()
{
//do manipulations here and return true on success and false on failure 
}
</script>
<form method='get' onsubmit='return js_fun()'>
<input type='submit'/>
</form> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-22T05:52:10.940

dropzone 必须有一些初始化代码，可能已在 onLoad 事件中调用。首先禁用它，然后调用

`document.getElementById("btnSubmit").onclick = Dropzone.prototype.processFile ;`

# java - 对于 Selenium WebDriver 中的 ChromeDriverService 类型，未定义 usingChromeDriverExecutable(File) 的方法

> ID：16140168
> 
> 赞同：0
> 
> 时间：2013-04-22T05:43:27.733
> 
> 标签：java, google-chrome, selenium-webdriver, selenium-chromedriver

我的代码如下：

```
 ChromeDriverService service = new ChromeDriverService.Builder()
 .usingChromeDriverExecutable(new File("E:\\Software\\chromedriver.exe"))
 .usingAnyFreePort().build(); 
```

它给出了以下错误：

```
 The method usingChromeDriverExecutable(File) is undefined for the type
 ChromeDriverService 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T05:48:19.353

改变

```
usingChromeDriverExecutable 
```

至

```
usingDriverExecutable 
```

# c# - 如何替换字典 C# 中的 int 值

> ID：16140170
> 
> 赞同：2
> 
> 时间：2013-04-22T05:43:45.077
> 
> 标签：c#

我想知道如何替换 C# 字典中的 int 值。这些值看起来像这样。

*   25,12
*   24,35
*   12,34
*   34,12

我想知道我怎么只能替换一行。例如，如果我想用新值 12,12 替换第一行。而且它不会替换字典中的任何其他“12”值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T05:49:49.760

A`Dictionary<TInt, TValue>`使用所谓的索引器。在这种情况下，这些用于按键访问字典中的元素，因此：

`dict[25]`会回来`12`的。

现在，根据您想要做的是拥有一个 的键`12`和一个 的值`12`。不幸的是，您不能按键替换字典中的条目，因此您必须做的是：

```
if(dict.ContainsKey(25))
{
    dict.Remove(25);
}
if(!dict.ContainsKey(12))
{
    dict.Add(12, 12);
} 
```

**注意：**在您提供的值中，已经有一个键值对`12`作为其键，因此不允许您添加`12,12`到字典中，否则`if(!dict.ContainsKey(12))`会返回 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T05:46:41.900

您不能替换第一行，`12, 12`因为有另一个键值对 12 作为它的键。而且你不能在字典中有重复的键。

无论如何，你可以做这样的事情：

```
Dictionary<int, int> myDictionary = new Dictionary<int, int>();
myDictionary.Add(25, 12);
myDictionary.Add(24, 35);

//remove the old item
myDictionary.Remove(25);

//add the new item
myDictionary.Add(12, 12); 
```

**编辑：**如果您要保存一些 x,y 位置，我建议您创建一个名为 Point 的类并使用`List<Point>`. 这是代码：

```
class Point
{
    public double X {get; set;}
    public double Y {get; set;}

    public Point(double x, double y)
    {
        this.X = x;
        this.Y = y;
    }
} 
```

然后：

```
List<Point> myList =new List<Point>();
myList.Add(new Point(25, 13)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T06:45:52.493

In Dictionaries, the keys must be unique.

In case the key need not be unique, you could use a `List<Tuple<int, int>>` or `List<CustomClass>` with `CustomClass` containing two integer fields. Then you may add or replace the way you want.

# php - 在 CActiveForm 中初始化 ajaxVar 时

> ID：16140172
> 
> 赞同：0
> 
> 时间：2013-04-22T05:44:03.400
> 
> 标签：php, yii

关于`CActiveForm`文档中的内容是：（clientOptions部分）

> ajaxVar：字符串，表示请求的参数名称是AJAX请求。当触发 AJAX 验证时，名为该属性的参数将与其他表单数据一起发送到服务器。参数值是表单 ID。然后，服务器端可以检测谁触发了 AJAX 验证并做出相应的反应。默认为“ajax”。

现在看一下我的示例： 摘要：我有一个包含两个字段的表单，`mail`并且`newEmail`我通过提交表单`ajaxSubmitButton`（如果您需要表单代码，请告诉我输入）。在以下我得到`var_dump($_POST)`两种状态的内容：

**首先：**以下 var_dump($_POST) 用于字段（newEmail）为空时：

```
array
'User' =>
    array
    'email' => string 'user@gmail.com' (length=14)
    'newEmail' => string '' (length=0) 
```

**第二：**以下 var_dump($_POST) 用于填充所有字段时：

```
array
'User' =>
    array
    'email' => string 'user@gmail.com' (length=14)
    'newEmail' => string 'admin@gmail.net' (length=19)
'ajax' => string 'email-form' (length=10)
'yt0' => string 'update' (length=18) 
```

如您所见，只有在填写所有字段时，`ajaxVar(ajax)`存在于`$_POST`. 在`ajaxVar(ajax)`CActiveForm 中初始化时？

* * *

# 编辑

**电子邮件形式：**

```
<?php
<div class="form">
    <?php $form = $this->beginWidget('CActiveForm',array(
            'id'=>'email-form',
            'enableAjaxValidation'=>true,
    'clientOptions'=>array(
            'validateOnSubmit'=>true,
            'focus'=>'input[type="email"]:first',
            )
    )); ?>

    <div class="row">
            <?php echo $form->label($model,'email') ?>
            <?php echo $form->textField($model,'email') ?>
            <?php echo $form->error($model,'email') ?>
    </div>

    <div class="row">
            <?php echo $form->label($model,'newEmail') ?>
            <?php echo $form->textField($model,'newEmail') ?>
            <?php echo $form->error($model,'newEmail') ?>
    </div>
    <hr>
    <div class="row">
            <?php  echo CHtml::ajaxSubmitButton(
            'update',
            Yii::app()->createUrl('upanel/user/CEmail'),
            array(
                    'dataType'=>'json',
                    'type' => 'POST',
                    'data' => "js:$('#email-form').serialize()",
                    'success'=>'function(data){
                    if(data.status=="success")
                    {
                            //alert(data.status);
                            hideFormErrors(form="#email-form");
                            callback(status=data.status);
                    }else{
                            formErrors(data,form="#email-form");
                    }
                    }',

                    'beforeSend'=>'before',
            ),
            array(
                    'id' => 'update-button'.uniqid(),
                    'class'=>'submit-button'
            )
            );
            ?>
    </div>
    <?php $this->endWidget() ?>
</div> 
<?php echo $form->errorSummary($model,'please solve following errors:') ?> 
```

**行动电子邮件：**

```
public function  actionCEmail()
{
    /*ob_start();
    var_dump($_POST);
    $log=ob_get_contents();
    $fp = fopen('data.html', 'w');
    fwrite($fp, $log);
    fclose($fp);
    Yii::app()->end();*/ //This block active whenever i want see the $_POST content

    $model = $this->loadModel(Yii::app()->user->id);
    $model->scenario = 'CEmail';
    $this->performAjaxValidation($model,'email-form');

    if(Yii::app()->request->isAjaxRequest)
        $this->renderPartial('_cemail',array('model'=>$model),false,true);
    else
        $this->render('update',array('model'=>$model,'form'=>'_cemail'));
}

protected function performAjaxValidation($model,$form)
{
    if(isset($_POST['ajax']) && $_POST['ajax']===$form)
    {
        echo CActiveForm::validate($model);
        Yii::app()->end();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:42:29.633

```
ajaxVar 
```

初始化 onsubmit if `'validateOnSubmit'=>true,`。尝试`validateOnChange=>true`在初始化时使用并显示您的 cactiveform 代码。

并真正停止发明“自行车”。如果您在上一个问题中不理解我的代码，请尝试阅读[http://learnyii.blogspot.com/2010/12/yii.html 。](http://learnyii.blogspot.com/2010/12/yii.html)我向您展示了我在工作项目中使用的 ajax 验证工作代码。使用该方法，您`$_POST`将更新所有带有 JSON 对象的字段的更改，其中将包含表单错误。

停止淹没社区。问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:39:18.863

在你的行动中：

```
 public function  actionCEmail()
    {
        $model = $this->loadModel(Yii::app()->user->id);
        $model->scenario = 'CEmail';
        if(Yii::app()->request->isAjaxRequest)
            {
                $error = CActiveForm::validate($model);
                if($error!='[]')
                                {
                                    echo $error;
                    Yii::app()->end();
                }
            }

        if(isset($_POST['CEmailForm']))
              {
               //put form name in POST above 
               //do whatever you need with model here
               //save / edit etc.
               //in the end
               echo CJSON::encode(array(
                                  'status'=>'success',
                                  )); 
           Yii::app()->end();
               }
if(Yii::app()->request->isAjaxRequest) //check renders 
            $this->renderPartial('_cemail',array('model'=>$model),false,true);
        else
            $this->render('update',array('model'=>$model,'form'=>'_cemail'));
    } 
```

在您的视图中提交按钮：

```
 <?php echo CHtml::ajaxSubmitButton ("Save", Yii::app()->request->url, array (
            'dataType' => 'json', 
            'type'=>'post',
            'success' =>
            'js:function (data) {

              if(data.status=="success"){
                            //do whatever you need on success
                            //show flash/notification 
                          };

                                      }
              else {//show errors here
                $.each(data, function(key, val) {
                        $("#YourFormIDhere #"+key+"_em_").text(val);
                $("#YourFormIDhere #"+key+"_em_").css(\'display\',\'block\');           
                                });
                        //can show error summarry here or custom notifications      
                    };

              }',
        ), array (
        'id' => 'yourbuttonid_submit_'.rand(1,255), // Need a unique id or they start to conflict with more than one load.
        ));?> 
```

尝试这样做。有用。把事情简单化。你输了2个？验证 2 个字段的天数。我刚刚在我的更改密码表格上做了这个。我花了5分钟。我尝试使用默认空字段保存时的帖子​​：

```
{"UserChangePassword_verifyPassword":["Required field","Retype Password is incorrect."]} 
```

像这样做，不要浪费时间。问候。

# python - 以相反的顺序遍历 DataFrame 行索引

> ID：16140174
> 
> 赞同：6
> 
> 时间：2013-04-22T05:44:05.457
> 
> 标签：python, pandas

我知道如何遍历 pandas DataFrame 的行：

```
for id, value in df.iterrows(): 
```

但现在我想以相反的顺序遍历行（`id`是数字，但与行号不符）。首先，我想对索引进行排序`data.sort(ascending = False)`，然后运行相同的迭代过程，但它不起作用（它似乎仍然从小`id`到大）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T05:50:38.570

除非您使用 Cython，否则迭代 a`DataFrame`通常是一个坏主意。如果你真的需要，你可以使用切片符号来反转`DataFrame`：

```
In [8]: import pandas as pd

In [9]: pd.DataFrame(np.arange(20).reshape(4,5))
Out[9]: 
    0   1   2   3   4
0   0   1   2   3   4
1   5   6   7   8   9
2  10  11  12  13  14
3  15  16  17  18  19

In [10]: pd.DataFrame(np.arange(20).reshape(4,5))[::-1]
Out[10]: 
    0   1   2   3   4
3  15  16  17  18  19
2  10  11  12  13  14
1   5   6   7   8   9
0   0   1   2   3   4

In [11]: for row in pd.DataFrame(np.arange(20).reshape(4,5))[::-1].iterrows():
    ...:     print row
    ...:     
(3, 0    15
1    16
2    17
3    18
4    19
Name: 3)
(2, 0    10
1    11
2    12
3    13
4    14
Name: 2)
(1, 0    5
1    6
2    7
3    8
4    9
Name: 1)
(0, 0    0
1    1
2    2
3    3
4    4
Name: 0) 
```

# java - Java JDBC MySQL 异常：“ResultSet 关闭后不允许操作”

> ID：16140178
> 
> 赞同：5
> 
> 时间：2013-04-22T05:44:50.093
> 
> 标签：java, mysql, jdbc

我已经为此工作了将近一天半，但我似乎无法解决这个错误。我不知道为什么 ResultSet 被关闭。也许你们中的一些人可以帮助我。

MySQL数据库：

```
package net.gielinor.network.sql;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public abstract class MySQLDatabase {

    private String host;
    private String database;
    private String username;
    private String password;
    private Connection connection = null;
    private Statement statement;

    public MySQLDatabase(String host, String database, String username, String password) {
        this.host = host;
        this.database = database;
        this.username = username;
        this.password = password;
    }

    public abstract void cycle() throws SQLException;

    public abstract void ping();

    public void connect() {
        try {
            Class.forName("com.mysql.jdbc.Driver").newInstance();
            connection = DriverManager.getConnection(String.format("jdbc:mysql://%s/%s", host, database), username, password);
            statement = connection.createStatement();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void ping(String table, String variable) {
        try {
            statement.executeQuery(String.format("SELECT * FROM `%s` WHERE `%s` = 'null'", table, variable));
        } catch (Exception e) {
            connect();
        }
    }

    public ResultSet query(String query) throws SQLException {
        if (query.toLowerCase().startsWith("select")) {
            return statement.executeQuery(query);
        } else {
            statement.executeUpdate(query);
        }
        return null;
    }

    public Connection getConnection() {
        return connection;
    }

} 
```

MySQLHandler

```
package net.gielinor.network.sql;

import java.io.FileInputStream;
import java.util.ArrayList;
import java.util.List;
import java.util.Properties;

import net.gielinor.network.sql.impl.MySQLDonation;

public class MySQLHandler extends Thread {

    private static final MySQLHandler mysqlHandler = new MySQLHandler();

    public static MySQLHandler getMySQLHandler() {
        return mysqlHandler;
    }

    private static List<MySQLDatabase> updateList;
    private static String host;
    private static String database;
    private static String username;
    private static String password;

    @Override
    public void run() {
        while (true) {
            for (MySQLDatabase database : updateList) {
                try {
                    if (database.getConnection() == null) {
                        database.connect();
                    } else {
                        database.ping();
                    }
                    database.cycle();
                } catch (Exception ex) {
                    ex.printStackTrace();
                }

                try {
                    Thread.sleep(10000);
                } catch (Exception ex) {
                }
            }
        }
    }

    private static void loadProperties() {
        Properties p = new Properties();
        try {
            p.load(new FileInputStream("./sql.ini"));
            host = p.getProperty("host");
            database = p.getProperty("database");
            username = p.getProperty("username");
            password = p.getProperty("password");   
        } catch (Exception ex) {
            System.out.println("Error loading MySQL properties.");
        }
    }

    public static String getHost() {
        return host;
    }

    static {
        loadProperties();
        updateList = new ArrayList<MySQLDatabase>();
        updateList.add(new MySQLDonation(host, database, username, password));
    }

} 
```

MySQL捐赠

```
package net.gielinor.network.sql.impl;

import java.sql.ResultSet;
import java.sql.SQLException;

import net.gielinor.game.model.player.Client;
import net.gielinor.game.model.player.PlayerHandler;
import net.gielinor.game.model.player.PlayerSave;
import net.gielinor.network.sql.MySQLDatabase;

public final class MySQLDonation extends MySQLDatabase {

    public MySQLDonation(String host, String database, String username, String password) {
        super(host, database, username, password);
    }

    @Override
    public void cycle() throws SQLException {
        ResultSet results = query("SELECT * FROM `gieli436_purchases`.`donations`");
        if (results == null) {
            return;
        }
        while (results.next()) {
            String username = results.getString("username").replace("_", " ");
            System.out.println("name=" + username);
            Client client = (Client) PlayerHandler.getPlayer(username.toLowerCase());
            System.out.println(client == null);
            if (client != null && !client.disconnected) {
                int creditamount = results.getInt("creditamount");
                if (creditamount <= 0) {
                    continue;
                }
                handleDonation(client, creditamount);
                query(String.format("DELETE FROM `gieli436_purchases`.`donations` WHERE `donations`.`username`='%s' LIMIT 1", client.playerName.replaceAll(" ", "_")));
            }
        }
    }

    @Override
    public void ping() {
        super.ping("donations", "username");
    }

    private void handleDonation(Client client, int creditamount) throws SQLException {
        client.credits = (client.credits + creditamount);
        client.sendMessage("Thank you for your purchase. You have received " + creditamount + " store credits.");
        PlayerSave.save(client);
    }

} 
```

异常发生在这里：在 MySQLDonation 中的 while 循环中，实际的堆栈跟踪是这样的：

```
java.sql.SQLException: Operation not allowed after ResultSet closed
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1055)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:926)
    at com.mysql.jdbc.ResultSetImpl.checkClosed(ResultSetImpl.java:794)
    at com.mysql.jdbc.ResultSetImpl.next(ResultSetImpl.java:7077)
    at net.gielinor.network.sql.impl.MySQLDonation.cycle(Unknown Source)
    at net.gielinor.network.sql.MySQLHandler.run(Unknown Source) 
```

有了这些信息，让我说这*确实*有效，我得到了我的消息以及游戏中没有的内容，但它会重复，就像用户永远不会从查询中删除，所以它给了他们无限的奖励。如果您需要更多信息，请随时询问。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-22T05:56:02.267

运行`Delete`查询时，您使用查询中使用的相同`Statement`内容`Select`。当您在同一个上重新执行时`Statement`，前一个`ResultSet`会关闭。

为避免这种情况，您应该在`Statement`每次执行查询时创建一个新的。因此`statement = connection.createStatement();`，从类中的`connect()`方法中删除`MySQLDatabase`，并将该类中的所有内容替换`statement`为`connection.createStatement()`. 您也可以选择`statement`完全删除私有变量。

[你可以在这里](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#close%28%29)阅读更多关于它的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-06T08:57:10.513

当我们对差异使用相同的语句对象时，有时会发生此错误。类型

检查语句对象ss；

# database - 使用 vb.net 生成新的 DBF 文件

> ID：16140180
> 
> 赞同：0
> 
> 时间：2013-04-22T05:45:02.623
> 
> 标签：database, vb.net, database-design, dbf

在弄清楚生成访问数据库并随后将其转换为 .DBF 在 vb.net 中实际上是不可能的之后，我正在尝试使用 vb.net 创建一个 .DBF 文件

但是，现在我遇到以下问题：

这是我正在使用的代码：

```
Imports System.IO
Imports System.Data.SqlClient

Public Class frmStart
Inherits System.Windows.Forms.Form

Private Sub btnCreate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnCreate.Click

    Dim fd As FolderBrowserDialog = New FolderBrowserDialog
    Dim strFileName As String = ""
    Dim dbNameForm As New frmDatabaseName()

    ' init DB Vars
    Dim ds As New DataSet
    Dim sql As String

    ' Open Location browser
    dbNameForm.FileName = "Test"
    If dbNameForm.ShowDialog() = DialogResult.OK Then

        MsgBox("Select the location where you want your Access-File")

        If fd.ShowDialog() = DialogResult.OK Then
            Dim DatabaseFullPath As String = fd.SelectedPath & "\" & dbNameForm.FileName & ".DBF"

            'Create the Database
            CreateDatabase(DatabaseFullPath)
            MsgBox("Database created")

            'Open database
            Dim dBaseConnection As New System.Data.OleDb.OleDbConnection( _
                "Provider=Microsoft.Jet.OLEDB.4.0;" & _
                "Data Source=" & DatabaseFullPath & ";" & _
                "Extended Properties=dBase IV")
            dBaseConnection.Open()
            ' Filling the Database with the required Columns

            sql = "CREATE TABLE DB_Total (NAME varchar(79),TYPE varchar(16), UNIT varchar(31)," &
                    "ADDR varchar(254), RAW_ZERO varchar(11), RAW_FULL varchar(11), ENG_ZERO varchar(11)," &
                    "ENG_FULL varchar(11), ENG_UNITS varchar(8), FORMAT varchar(11), COMMENT varchar(254)," &
                    "EDITCODE varchar(8), LINKED varchar(1), OID varchar(10), REF1 varchar(11), REF2 varchar(11)," &
                    "DEADBAND varchar(11), CUSTOM varchar(128), TAGGENLINK varchar(32), CLUSTER varchar(16)," &
                    "EQUIP varchar(254), ITEM varchar(63), HISTORIAN varchar(6)," &
                    "CUSTOM1 varchar(254), CUSTOM2 varchar(254), CUSTOM3 varchar(254), CUSTOM4 varchar(254)," &
                    "CUSTOM5 varchar(254), CUSTOM6 varchar(254), CUSTOM7 varchar(254), CUSTOM8 varchar(254))"
            Dim dBaseCommand As New System.Data.OleDb.OleDbCommand(sql, dBaseConnection)
            dBaseCommand.ExecuteNonQuery()
            dBaseCommand = Nothing

            sql = "CREATE TABLE TagSubs (TAGNAME varchar(79), POLLTIME varchar(6), SCALEMODE varchar(8), DEADBAND varchar(15))"
            dBaseCommand = New System.Data.OleDb.OleDbCommand(sql, dBaseConnection)
            dBaseCommand.ExecuteNonQuery()
            dBaseCommand = Nothing
            dBaseConnection.Close()

        Else

            MsgBox("Action Cancelled")

        End If

    Else

        MsgBox("Action Cancelled")

    End If

End Sub

     ' Creating a Database
Private Function CreateDatabase( _
    ByVal DatabaseFullPath As String) As Boolean
    Dim bAns As Boolean = False
    Dim cat As New ADOX.Catalog
    Try

        Dim sCreateString As String = _
          "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & _
          DatabaseFullPath
        cat.Create(sCreateString)

        bAns = True

    Catch Excep As System.Runtime.InteropServices.COMException

    Finally
        cat = Nothing
    End Try
    Return bAns
End Function

End Class 
```

我也在使用第二个表单，但这只是一个用户可以在其中向文件添加名称的窗口（默认，名称是 "test.DBF" ）

编写此代码并运行它后，我收到以下错误：

```
C:\Documents and settings\HIJ541\Desktop\Test.DBF is not a Valid path. 
Make sure the path name is spelled correctly and there is an active connection 
with the server on which the file is located 
```

（大致从荷兰语翻译而来）

此外，当我尝试打开创建的 .DBF 文件时，它会告诉我以下信息：

```
the file you are trying to open is in a different format than specified 
by the file extension 
```

我想我真的在这个问题上..任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:26:21.543

我已经解决了我自己的问题。

显然，当您连接到 .DBF 文件时，您不应该输入完整的路径名（包括文件名）

所以：

```
Dim DatabaseFullPath As String = fd.SelectedPath & "\" & dbNameForm.FileName & ".DBF" 
```

应该是这样的：

```
Dim DatabaseFullPath As String = fd.SelectedPath & "\\" 
```

# javascript - 日期选择器范围工作错误

> ID：16140181
> 
> 赞同：1
> 
> 时间：2013-04-22T05:45:02.833
> 
> 标签：javascript, jquery, kendo-ui

重现步骤：

1.  在页脚的“迄今为止”中选择当前日期（例如，2013 年 4 月 21 日，星期日）
2.  在禁用状态下打开“从日期”当前链接

我需要在“从日期”中选择当天，但我没有这样做。这是可能的还是这是错误？

我需要能够从页脚的链接中选择当前日期。

开始日期控制的示例更改

```
 dateControlStart.bind('change', function (e) {
                var startDate = dateControlStart.value();

                if (startDate) {
                    startDate = new Date(startDate);
                    startDate.setDate(startDate.getDate());
                    dateControlEnd.min(startDate);
                }
                else
                {
                    dateControlEnd.min(new Date(1753, 1, 1));
                }
            }); 
```

[http://jsfiddle.net/dude_jsfiddle/X2ZkQ/](http://jsfiddle.net/dude_jsfiddle/X2ZkQ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:06:43.200

不是错误，默认情况下，javascript 日期对象需要`00:00`几个小时，因此当您从日历设置最大日期时，它会设置日期`Apr 22,2013 00:00`（对于 4 月 22 日的 PST 当前日期），因此将其设置为日历中的最大日期，它只允许您选择`Apr 21,2013 23:59:59`禁用的日期当前的日期。

试试这个设置最大日期：

```
 if (endDate) {
       endDate = new Date(endDate);
       endDate.setDate(endDate.getDate());
       endDate.setHours(23);
       dateControlStart.max(endDate);
   } 
```

[这是工作演示](http://jsfiddle.net/zaheerahmed/X2ZkQ/8/)

# php - 可靠地发送电子邮件并可靠地处理错误

> ID：16140186
> 
> 赞同：1
> 
> 时间：2013-04-22T05:45:40.853
> 
> 标签：php, email, pear

由于我一直是 Java 后端开发人员，因此我正在创建我的第一个学习练习网站。我正在设置一个用户注册表单，因为这将是我的用户第一次看到我的网站，我想确保我尽可能稳健地处理事情。通过一些试验，我遇到并实施了几乎所有这些解决方案：

*   php 的`mail()`功能 - 这在我测试它的第一天就起作用了，后来就停止了。我第一次意识到发送邮件不是“给定”的简单任务
*   梨邮件类 - 今晚实施，目前仍在工作
*   [pear smtp 邮件 -在此处](http://www.jvfconsulting.com/blog/190/PHP_Mail_Function_vs_SMTP_Guaranteed_Delivery.html)阅读此内容。让我觉得我应该使用 smtp？

在这一点上，我意识到可靠地发送电子邮件并不像我最初想象的那么简单。我的问题是**发送邮件*****最*****可靠的方法是什么***，以及**处理异常****的*最***可靠的方法是什么？例如，如果 SMTP 是最可靠的方式，请解释原因并提供一个简单的错误处理示例。*

 *对于发生的任何错误，它们是否会在进行一些自动重试时受益？我知道仅仅因为我*发送*邮件并不意味着该人会收到它，但我在问最强大的解决方案是什么，因为我确信其他人已经这样做了 100 次。

为了证明我不仅仅是一个懒惰的编码器，这就是我到目前为止*一直*在工作的东西 - 但我不知道这实际上有多强大（梨邮件）：

```
<?php } else if ($_SERVER['REQUEST_METHOD'] == 'POST') {

    include('Mail.php');
    include('Mail/mime.php');

    $to = urldecode($_POST['email']);
    if (preg_match('(\r|\n)', $to)) {
        die('No email injection for you!');
    }

    $headers = array(
        'From'=>'tag <me@mysite.com>',
        'Subject'=>'Registration for mysite.com'
    );
    $text_body = 'boring text message';
    $html_body = '<html>
        <head><title>Welcome</title></head>
        <body>
            <p>slightly less boring message</p>
        </body>
    </html>';

    //Utilize the mime class to generate mime body and add mime headers
    $mime = new Mail_mime();
    $mime->setTXTBody($text_body);
    $mime->setHTMLBody($html_body);
    $body = $mime->get();
    $headers = $mime->headers($headers);

    //Utilize the mail class to send the mime mail
    $mail = Mail::factory('mail');
    $mail->send($to, $headers, $body);

    echo 'mail sent maybe?';
?> 
```

编辑：使用带有错误处理的 SMTP 的代码示例

```
<?php } else if ($_SERVER['REQUEST_METHOD'] == 'POST') {

    include('Mail.php');
    include('Mail/mime.php');

    $to = $_POST['email'];
    $to = urldecode($to);
    if (preg_match('(\r|\n)', $to)) {
        die('No email injection for you!');
    }

    $headers = array(
            'From'=>'tag <me@mysite.com>',
            'Subject'=>'Registration for mysite.com'
            );
    $text_body = 'boring text message';
    $html_body = '<html>
        <head><title>Welcome</title></head>
        <body>
            <p>slightly less boring message</p>
        </body>
    </html>';

    //Utilize the mime class to generate mime body and add mime headers
    $mime = new Mail_mime();
    $mime->setTXTBody($text_body);
    $mime->setHTMLBody($html_body);
    $body = $mime->get();
    $headers = $mime->headers($headers);

    //Utilize the mail class to send the mime mail
    $host = 'mail.mysite.com';
    $port = '26';
    $username = 'me@mysite.com';
    $password ='myPassword';

    $smtp = Mail::factory('smtp', array (
            'host' => $host,
            'port' => $port,
            'auth' => true,
            'username' => $username,
            'password' => $password
            ));
    $mail = $smtp->send($to, $headers, $body);

    if (PEAR::isError($mail)) {
        echo("<p>" . $mail->getMessage() . "</p>");
    } else {
        echo("<p>Message successfully sent!</p>");
    }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T08:40:57.050

发送邮件通常涉及几个步骤：

1.  应用：将邮件放入本地投递代理队列
2.  投递代理：将邮件发送到配置的 SMTP 服务器
3.  SMTP 服务器：发送邮件到目标邮件服务器
4.  用户邮件应用程序：从邮件服务器获取邮件
5.  用户：点击邮件，阅读

PHP 的`mail()`函数将邮件放入 unix 上本地邮件传递代理的队列中。`false`如果这不起作用，您只会收到错误（返回值）。当代理无法进一步递送邮件或步骤 2-5 中的任何一个时，您不会收到通知。

使用与您的 SMTP 服务器的直接 SMTP 连接至少可以让您知道邮件是否无法传递到您的 SMTP 服务器，这比您获得的信息要多`mail()`。如果邮件没有被阅读或只是被过滤到垃圾邮件文件夹中，或者远程邮件帐户不存在（3-5），您不会得到信息。

要知道远程帐户是否存在，您需要解析错误响应邮件（“未投递的邮件返回给发件人），或者实现完整的远程服务器 SMTP 连接并自行发送（第 3 步），我不建议这样做。

要确定邮件是否已被阅读，您可以嵌入一个“web bug”，即显示在 HTML 邮件中并通知您邮件已显示的微小（可能是清晰的）图像。您可以使用它来将发送的邮件放入数据库，并在调用 Web 错误图像 URL 时将它们标记为已读。在 X 天内未阅读的邮件可以被视为“未阅读”或“失败” - 但用户也可以简单地休假 :)

# 可靠性和稳健性

当远程用户的邮件服务器关闭时，您自己的邮件服务器（第 3 步）会自动尝试重新发送邮件。如果这不起作用，您将收到诸如“邮件传递延迟 24 小时”之类的邮件，以及当它停止这样做时的另一封邮件。

因此，一旦邮件在您的邮件服务器上，您就可以确定该服务器将尽其所能来传递它。*

# r - 使用 R 的 IP 地址的纬度和经度

> ID：16140187
> 
> 赞同：3
> 
> 时间：2013-04-22T05:45:44.067
> 
> 标签：r, ip-address, latitude-longitude

我有一个庞大的 IP 地址列表。有没有办法使用R来获取这些地址对应的纬度和经度？

谢谢你。

拉维

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T07:27:52.680

这是一个有价值的商业过程，因此任何在线 API 查找要么 a) 昂贵，要么 b) 缓慢。

您最好的选择可能是下载 MaxMind City IP 数据库：

[http://dev.maxmind.com/geoip/geolite](http://dev.maxmind.com/geoip/geolite)

并获取 GeoLite City - CSV 版本包含两个文件，一个将 IP 地址块映射到位置 ID，另一个将 locationID 映射到城镇和经纬度坐标。例如：

```
startIpNum,endIpNum,locId
"16777216","16777471","17"
"16777472","16777727","104084"
"16777728","16778239","49" 
```

它告诉您第二个块范围内的 IP 位于：

```
104084,"CN","07","Fuzhou","",26.0614,119.3061,, 
```

因此，您需要做的就是编写一些 R 代码以读取这些数据库，将您拥有的点式 IP 地址编码为此处使用的形式（可能是 32 位整数）并进行几次查找。您可以通过使用 data.table 获得最佳性能，或者将其全部粘贴到 SQL 数据库中，或者使用他们的 C API 将一些 C 代码写入文件的二进制版本并通过 Rcpp 或其他魔法将其与 R 链接。

天哪，有人已经这样做了！！

[http://devblog.icans-gmbh.com/using-the-maxmind-geoip-api-with-r/](http://devblog.icans-gmbh.com/using-the-maxmind-geoip-api-with-r/)

和OMG2！有人把它做成了一个包：

[http://www.rforge.net/GeoIP/files/](http://www.rforge.net/GeoIP/files/)

请注意，这最后两个解决方案使用数据库的本地副本，而不是对网页进行查询，因此不会受到限制。

我刚刚让 GeoIP 包工作得非常简单，而且速度很快。您可能想要更新它附带的数据库文件，或者它可能是最新的。该软件包无需其他下载即可工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T05:49:11.307

看看**[http://ipinfodb.com/](http://ipinfodb.com/)**或**[http://freegeoip.net/](http://freegeoip.net/)**

他们提供 API 来从 IP 地址获取纬度/经度。（虽然不是 R 特定的）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-22T05:50:54.080

geoPlot[包](http://cran.r-project.org/web/packages/geoPlot/)有一个功能`ipListLookup`

# symfony - Symfony 在产品服务器上找不到模板

> ID：16140191
> 
> 赞同：1
> 
> 时间：2013-04-22T05:46:10.160
> 
> 标签：symfony, fosuserbundle

应该足够简单。一切都在我的本地环境中运行，但在我的 prod 服务器上（既不是 prod 也不是 dev 环境）。我收到一个错误，即找不到 FOS 模板：

```
Unable to find template "FOSUserBundle::layout.html.twig". 
```

我的代码很简单：

```
{% extends "FOSUserBundle::layout.html.twig" %} 
```

我要从本地 Windows 机器转到 Linux 机器。我读过区分大​​小写可能是罪魁祸首，但似乎并非如此。

FOS 捆绑包位于正常位置：`vendor/friendsofsymfony/user-bundle/FOS/UserBundle`.

我无法诊断 - 有什么想法吗？当我 FTPd 时，事情是否搞砸了？权限问题？常见的陷阱是什么？我很绝望！

更新：一条线索。我跑了`assetic:dump`，得到了

```
[RuntimeException]
".../app/Resources/FOSUserBundle/views/layout.html.twig" resource is hidden by a 
resource from the "*******Bundle" derived bundle. Create a
".../app/Resources/*******Bundle/views/layout.html.twig" file to override the bundle 
resource. 
```

[这个问题似乎很相关。](https://stackoverflow.com/questions/11837636/error-after-upgrading-fos-userbundle-from-1-2-to-2-0-in-symfony-2-1)

另一个更新：我`getParent()`在自己的包中使用来覆盖模板。我切换到[文档中的第一种方法，](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_templates.md)但现在模板`app/resources`根本没有效果。它直接进入带有白色背景的默认表单模板。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T19:53:51.257

这是一个大写/小写/命名空间的东西。我以为我的本地文件与遥控器同步，但事实并非如此。

只需检查 FOS 包中的整个目录和所有命名空间！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T15:32:19.810

I also encountered the problem and "solved" it by renaming my `layout.html.twig` inside my bundle's Resources/views folder to bundle-layout.html.twig and adapting my templates accordingly.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-05T11:02:16.343

我`resource is hidden by a resource`通过在良好的捆绑扩展中移动模板解决了该错误。

具体从`app/Resources/FOSUSerBundle/views/ChangePassword`
到`src/Application/Sonata/UserBundle/Resources/views/ChangePassword`

我混淆了 FOSUser 和 SonataUser。

# android - 在 Spinner 中必须默认为空

> ID：16140192
> 
> 赞同：0
> 
> 时间：2013-04-22T05:46:11.440
> 
> 标签：android

在微调器中，目前值会自动加载，但现在我们需要微调器默认为空，然后当用户单击微调器时必须加载值。

```
 public void requestSucceed(Response response) {
    // TODO Auto-generated method stub
    Log.i("Response Code ", response.getResponseCode() + "");
    if (response.getResponseCode() == 0) {
        List<String> list = new ArrayList<String>();
        list.add("Select Product");
        deliveryBoys = response.getDeliveryBoy();
        Log.v("Size is ", "" + deliveryBoys.length);
        for (int i = 0; i < deliveryBoys.length; i++) {
            list.add(deliveryBoys[i].getDistId());

        }
        Log.v("Size is ", "" + list.size());

        ArrayAdapter adapter = new ArrayAdapter(this,
                android.R.layout.simple_spinner_item, deliveryBoys);
        deliveryPerson.setAdapter(adapter);enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:56:10.620

> 是否有可能有一个加载时未选择任何内容的微调器

只有在没有数据的情况下。如果 SpinnerAdapter 中有 1+ 个项目，则 Spinner 将始终有一个选择。

> 微调器并非设计为命令小部件。用户不会期望 Spinner 中的选择来启动活动。请考虑使用其他东西，例如 ListView 或 GridView，而不是 Spinner

**编辑**

顺便说一句，我忘了提——您总是可以在您的适配器中添加一个表示“无选择”的额外条目，并使其成为 Spinner 中的初始选定项目。

检查：[https ://stackoverflow.com/a/4726649/1838457](https://stackoverflow.com/a/4726649/1838457)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:06:34.137

您可以有一个虚拟值（例如：选择送货员）作为默认值。因此，用户可以通过单击微调器来选择一个值。

# magento - Magento 通过获取客户的信用卡信息使用 webservice/API 进行支付

> ID：16140198
> 
> 赞同：1
> 
> 时间：2013-04-22T05:46:32.717
> 
> 标签：magento, magento-1.7

我正在为 POS 应用程序提供 magento 的网络服务。Pos 应用程序将交换客户信用卡并将其发送到 magento 数据库。有没有办法在 magento 结束时获取客户信用卡信息并付款。简单来说，我想做一个获取客户信用卡信息并在 magento 结束时付款的 API。**意味着**POS 应用程序将提供信用卡详细信息（客户购物总额、客户信用卡信息），我必须在 magento 结束时为该金额和该客户付款。对不起我的英语。

# php - 使用 preg_match 从文本中获取 src

> ID：16140199
> 
> 赞同：0
> 
> 时间：2013-04-22T05:46:35.457
> 
> 标签：php, preg-match

我正在通过简码将图像添加到 WP 站点：

`[figure src="" url"" caption=""]`

其中`src`是图像源，`url`是指向更大图像的链接（如果需要），`caption`是标题。

我试图`src`从上面的代码中得到它：

```
$pattern = '/<img[^>]*src=\"?(?<src>[^\"]*)\"?[^>]*>/im';
preg_match( $pattern, $html, $matches ); 
if($matches['src']) {
    return $matches['src'];
} 
```

但我试图弄清楚如何获得`[figure]`比赛。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:25:04.273

```
/\[figure(( src="(?<src>[^"]+)")?|( url="(?<url>[^"]+)")?|( caption="(?<caption>[^"]+)")?)*\]/i 
```

> [图 url="http://example.com/large.gif" 标题="我的标题" src="http://example.com/figure.gif"]

```
Array
(
    [0] => [figure url="http://example.com/large.gif" caption="my caption" src="http://example.com/figure.gif"]
    [1] => 
    [2] =>  src="http://example.com/figure.gif"
    [src] => http://example.com/figure.gif
    [3] => http://example.com/figure.gif
    [4] =>  url="http://example.com/large.gif"
    [url] => http://example.com/large.gif
    [5] => http://example.com/large.gif
    [6] =>  caption="my caption"
    [caption] =>  my caption
    [7] => my caption
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:50:29.380

尝试这个

```
$foo = [figure src="" url"" caption=""];
preg_match( '/src="([^"]*)"/i', $foo, $array ) ;
$finalStr = $array[0];
$explode = explode("=", $finalStr);
echo $explode[1]; 
```

# php - 外键约束失败

> ID：16140200
> 
> 赞同：2
> 
> 时间：2013-04-22T05:46:36.297
> 
> 标签：php, mysql

我在 php 和 mysql 中相对较新。我在表中插入值时面临的问题。我的`leave`表`leave`包含以下列..

1.lid(INT主键)

2.empname(varchar)

3.用户名（varchar）

4.点头(INT)

5.sdate(日期)

6.日期（日期）

7.原因（varchar）

8.action(varchar)

9.empID（INT FOREIGN KEY）

这`empID`是表中的`foreign key`参考资料`users`。我在向表中插入值时面临的问题。`leave`错误如下

**无法添加或更新子行：外键约束失败 ( `db_attendance1`. `leave`, CONSTRAINT `leave_ibfk_1`FOREIGN KEY ( `empID`) REFERENCES `users`( `empID`))**

在这里，我只是发送查询，就在这里..

```
 mysql_query("INSERT INTO `leave` 
           (`empname`, `username`,
            `nod`, `sdate`, `edate`,
            `reason`,`action`) 
            VALUES ('$empname', '$username', 
            '$nod', '$sdate', 
            '$edate', '$reason','');",
            $dbCon) or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T05:53:25.057

外键约束意味着您的一个表不接受会“破坏”外键的插入、更新或删除。这意味着，如果用户中不存在新的 EmpID，您将无法更新 EmpID。如果用户表中不存在新的 EmpID，则无法添加新的 EmpID，等等。因此，要解决此问题，您需要确保您尝试添加到表“离开”的 EmpID 首先存在于表“用户”中。外键可以是一个真正强大的项目，但也可以是一个真正的痛苦。由于您正在处理的数据库有外键约束，我建议您阅读一下它们：[http ://en.wikipedia.org/wiki/Foreign_key](http://en.wikipedia.org/wiki/Foreign_key)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-28T04:31:20.337

你可以把

```
SET FOREIGN_KEY_CHECKS=0; 
```

并运行您的查询。再次完成后将其设置回 1 by

```
SET FOREIGN_KEY_CHECKS=1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-21T12:58:46.053

Borniet，你帮我解决了我的类似问题。

@OP - 我所要做的就是在表中创建一个相应的行，以便外键存在。例如，表 1 有列名称 表 2 有列 friends_name，这是一个与表 1 中的名称相关联的外键。我收到此错误是因为我试图在表 2 中插入一行，其中 friends_name 引用了表 1 中不存在的名称。所以我创建了这个名字，我们开始比赛了:)。

# android - 为什么 getGroupView 不在 ExpandableListView 中调用？

> ID：16140204
> 
> 赞同：2
> 
> 时间：2013-04-22T05:47:10.180
> 
> 标签：android, expandablelistview

这是我的代码。l 当我运行它时，模拟器屏幕上什么也没有。即使我正在为父组传递价值。

我也在 getGroupView 上放了断点，但这个方法没有被调用。

// 父组中的值的类

```
public class ArrayForList
{
    public static String[] grp ={"Car"};
} 
```

// 活动

```
public class ExpandableActivity extends Activity {

    ExpandableListView ev;
    ExpandableAdapter adp;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_expandable);

        ev = (ExpandableListView) findViewById(R.id.el);
        ev.setAdapter(new ExpandableAdapter(this));
    }
    } 
```

//适配器

```
public class ExpandableAdapter extends BaseExpandableListAdapter {

    Context myContext;
    public ExpandableAdapter(Context con)
    {
        this.myContext = con;
    }

    @Override
    public Object getChild(int groupPosition, int childPosition) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getChildId(int groupPosition, int childPosition) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public int getChildrenCount(int groupPosition) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public Object getGroup(int groupPosition) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public int getGroupCount() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public long getGroupId(int groupPosition) {
        // TODO Auto-generated method stub
        return groupPosition;
    }

    @Override
    public View getGroupView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {
        if (convertView == null) {
            LayoutInflater inflater =  (LayoutInflater) myContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.group_row, null);
        }

        TextView tvGroupName = (TextView) convertView.findViewById(R.id.tv_group);
        tvGroupName.setText(ArrayForList.grp[groupPosition]);

        return convertView;

    }

    @Override
    public boolean hasStableIds() {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
        // TODO Auto-generated method stub
        return false;
    }
    } 
```

//xml group_row

```
 <TextView
        android:id="@+id/tv_group"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        /> 
```

//xml主要

```
<ExpandableListView
        android:id="@+id/el"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T05:56:35.357

在 ExpandableAdapter 类中更改某些方法的返回值。例如 getGroupCount() 返回大小 0，它更改为组大小。getGroup(int groupPosition)，它也返回空值，改变groupPosition的值。

# php - 在 cakephp 查找查询的同一张表上使用 sql union

> ID：16140208
> 
> 赞同：1
> 
> 时间：2013-04-22T05:47:26.680
> 
> 标签：php, mysql, sql, cakephp, cakephp-1.3

假设我有这样的查询：

```
(SELECT * FROM user WHERE id < 5 order by id DESC LIMIT 1)
UNION
(SELECT * FROM user WHERE id = 5)
UNION
(SELECT * FROM user WHERE id > 5  LIMIT 1) 
```

如何将上述查询转换为[CakePHP find('all')](http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Models.html#find-all)查询？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:51:13.280

## 使用模型::find('neighbors')

将其重写为 find('all') 会有问题，但`find('neighbors')`可能符合您的要求；

请参阅文档[`find('neighbors')`](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find-neighbors)

这应该为您提供所需的数据，但您可能需要稍微采用您的代码才能使其与返回数组的不同“布局”正常工作；

```
 $data = $this->User->find('neighbors', array('field' => 'id', 'value' => 5)); 
```

**更新**

刚刚看到您使用的是 CakePHP 1.3，上面发布的链接指向文档的 2.x 部分。虽然类似，但这是 CakePHP 1.3 的文档：

[http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Models.html#find-neighbors](http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Models.html#find-neighbors)

# php - Magento thumnailimage - Magmi

> ID：16140213
> 
> 赞同：0
> 
> 时间：2013-04-22T05:47:45.467
> 
> 标签：php, magento, magmi

我想知道需要设置 Magmi 中的正确设置，以便将 magento“缩略图”属性设置为“small_image”。这样我网站上的所有产品都将使用“small_image”作为缩略图。

例如，使用“默认值设置器”并将缩略图属性设置为“small_image”。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:04:48.753

当然这与 MAGMI 无关，您可以使用图像属性处理器设置图像；

[http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Image_attributes_processor](http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Image_attributes_processor)

在导入时，但要确定在前端使用哪一个，您需要修改主题的相关模板并拉取 small_image 而不是缩略图；

helper('目录/图像')->init($_product, 'small_image')->resize(135); ?>" width="135" height="135" alt="stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" />

# jquery - 在 HTML5 和 jQuery 中访问两个不同的网络摄像头

> ID：16140221
> 
> 赞同：3
> 
> 时间：2013-04-22T05:48:22.347
> 
> 标签：jquery, html

我想使用 HTML5 和 jQuery 制作一个简单的网络摄像头查看器。我找到了一些代码，如下所示

```
 <script src="RecordRTC.js"></script>
div>
    <video id="client-video" autoplay loop controls muted></video>
    <button id="record-video">Record Video</button>
</div>
<script>
    var video = document.getElementById('client-video');
    var videoConstraints = {
        audio: false,
        video: {
            mandatory: {},
            optional: []
        }
    };
      var  videoStream;
</script>
<script>
    function getByID(id) 
    {
        return document.getElementById(id);
    }
    var recordVideo = getByID('record-video');

    var recorder;
    recordVideo.onclick = function () 
    {
        if (!videoStream) navigator.webkitGetUserMedia(videoConstraints, function (stream) 
        {
            video.src = window.webkitURL.createObjectURL(stream);
            videoStream = stream;
            recorder = RecordRTC({
                video: video
            });
            recorder.recordVideo();
        });
        else 
        {
             video.src = window.webkitURL.createObjectURL(videoStream);
             recorder.recordVideo();
        }

        window.isAudio = false;
        this.disabled = true;
        stopRecordingVideo.disabled = false;
    };
</script> 
```

## RecordRTC.js

```
function RecordRTC(config) 
{
    var win = window,
        requestAnimationFrame = win.webkitRequestAnimationFrame || win.mozRequestAnimationFrame,
        cancelAnimationFrame = win.webkitCancelAnimationFrame || win.mozCancelAnimationFrame,
        URL = win.URL || win.webkitURL,
        canvas = document.createElement('canvas'),
        context = canvas.getContext('2d'),
        video = config.video;
    if (video) 
    {
        video.width = canvas.width = 320;
        video.height = canvas.height = 240;
    }

    var requestedAnimationFrame, frames = [];
    function recordVideo() 
    {
        if (!video) 
        {
            alert('No video element found.');
            return;
        }
        console.log('started recording video frames');

        var height = canvas.height,
            width = canvas.width;

        frames = [];

        function drawVideoFrame() 
        {
            requestedAnimationFrame = requestAnimationFrame(drawVideoFrame);
            context.drawImage(video, 0, 0, width, height);
            frames.push(canvas.toDataURL('image/webp', 1));
        }
        requestedAnimationFrame = requestAnimationFrame(drawVideoFrame);
    }

    var blobURL, blobURL2, fileType;
    function setBlob(blob, callback)
    {
        blobURL = blob;
        var config = {
            blob: blobURL,
            type: fileType === 'webm' ? 'video/webm' : 'audio/wav',
            fileName: (Math.random() * 1000 << 1000) + '.' + fileType,
            size: blobURL.length,
            onsuccess: function (fileEntry) 
            {
                console.log(fileEntry);
                fileSystemURL = fileEntry.toURL();
                if (callback)
                {   
                    callback(fileSystemURL);
                }
             }, 
            onerror: function (errorMessage) 
            {
                console.debug('Unabled to write temporary recorded file using FileWriter APIs.');
                var url = writer.toURL();
                if (url)
                {
                    return window.open(url);
                }
                else 
                {
                    console.debug('Unabled to write temporary recorded file using FileWriter APIs.');
                    if (callback) 
                        callback(blobURL2);
                }
            }
        };
    }

    return {
        recordVideo: recordVideo,
        getBlob: function () {
            return blobURL2;
        }
    };
} 
```

此代码正常工作并显示单个网络摄像头视图，但我想在同一页面中显示两个网络摄像头视图我怎么能在我的网页上第二个网络摄像头。我是 HTML5 和 JQuery 的新手。请帮助我。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-22T05:05:03.370

因为您使用的是 RecordRTC.js，所以我假设您的目标浏览器是 Google Chrome，因为这是目前[唯一支持的浏览器](https://github.com/muaz-khan/WebRTC-Experiment/tree/master/RecordRTC#browser-support)。

不幸的是，支持此功能的浏览器（例如 Google Chrome）仅支持一个网络摄像头，您必须在 chrome://settings/content 的内容设置下指定要使用的摄像头这一事实证明了这一点

![在此处输入图像描述](https://i.stack.imgur.com/SdZhg.png)

如果您想组装一个监控多个摄像头供您自己使用的安全摄像头系统，您需要设置某种服务器（即，在浏览器之外）来捕获每个摄像头的视频流。广播后，您可以使用该`video`元素构建包含每个视频流的网页。

如果您想要创建一个页面，让拥有多个网络摄像头的网络用户可以创建自己的类似多摄像头视图，您可能需要使用不同的技术，例如浏览器插件或可能的 Flash。

# c# - ffmpeg在部署后不创建缩略图

> ID：16140222
> 
> 赞同：1
> 
> 时间：2013-04-22T05:48:22.533
> 
> 标签：c#, asp.net

我正在尝试编写一个程序来使用 ffmpeg 创建视频文件的缩略图。它在本地机器上运行良好，但是在将我的项目部署到服务器机器后没有创建缩略图，问题在于 ffmpeg 权限。我为服务器上的每个人设置了完全权限，但没有输出

请帮助我让它给服务器机器任何额外的权限？

# perl - Perl Catalyst：结果集和关系

> ID：16140223
> 
> 赞同：1
> 
> 时间：2013-04-22T05:48:29.677
> 
> 标签：perl, catalyst

我的数据库中有两个表，其中一个表与我的 Accounts 表相关联。

因此，在我的 Account.pm 架构结果中，我添加了以下行。

```
__PACKAGE__->has_many('subjects', 'MyApp::DBIC::Schema::Subject', {'foreight.account_id' => 'self.account_id'}); 
```

然后在我的控制器中进行这样的搜索。

```
$c->stash->{search_results} = $c->model('DB::Account')->search(
{ -or => [
   firstname => {like => '%'.$search_term.'%'},
   'subjects.subject_title' => {like => '%'.$search_term.'%'},
 ]
},
{
 join => 'subjects',
 rows => '3',
},
{
 order_by => 'first name ASC',
 page => 1,
 rows => 10,
}
); 
```

它不会输出任何错误，但我不知道如何在我的视图文件中输出结果。这是在两个表之间建立关系的正确方法吗？

我的目标：提供一个`search_term`，搜索两个表并将结果输出到视图文件中。我的 SQL 看起来像这样：

```
SELECT FROM Accounts,Subjects WHERE Accounts.firstname=$search_term OR Subjects.subject_title=$search_term LEFT JOIN Subjects ON Accounts.account_id=Subject.account_id 
```

并且想要在视图文件中输出结果，如上所述。

我对 Perl 还很陌生，有些文档对我来说仍然没有多大意义。因此，我们将不胜感激任何帮助和提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T08:33:45.830

连接对我来说看起来不错，但尝试一个没有连接的简化版本来检查其他一切是否正常是有意义的。

的行为`DBIx::Class::ResultSet::search`因调用它的上下文而异。如果在列表上下文中调用它，那么它将执行数据库查询并返回一个`MyApp::DBIC::Schema::Account`对象数组。例如：

```
my @accounts = $c->model('DB::Account')->search(); 
```

在您的情况下，您`search`在标量上下文中调用，这意味着它不会返回一个数组，而是返回一个`DBIx::Class::ResultSet`对象（或其子类），并且至关重要的是它实际上不会执行数据库查询。为此，您需要`all`在结果集上调用该方法。因此，假设您使用的是默认模板工具包视图，您可能想要这样的东西：

```
[% FOREACH search_result IN search_results.all %]
    [% search_result.first_name %]
[% END %] 
```

DBIx::Class 的这种“懒惰”行为实际上非常有用，而且在我看来，文档中有些低估了。这意味着您可以将结果集保存在变量中并继续对其执行不同的搜索调用，而无需实际访问数据库，在您希望有条件地构建复杂查询的情况下，它可以允许更好的代码。有关详细信息，请参阅[DBIx::Class::Resultset](http://search.cpan.org/~ribasushi/DBIx-Class-0.08210/lib/DBIx/Class/ResultSet.pm#search)文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T07:29:07.203

您的查询中有错误：

尝试：

```
$c->stash->{search_results} = $c->model('DB::Account')->search(
  { -or => [
      firstname => {like => '%'.$search_term.'%'},
      'subjects.subject_title' => {like => '%'.$search_term.'%'},
    ]
  },
  {
    join => 'subjects',
    order_by => 'firstname ASC',
    page => 1,
    rows => 10,
  }
); 
```

# r - R +将结果列表转换为数据框

> ID：16140224
> 
> 赞同：1
> 
> 时间：2013-04-22T05:48:37.780
> 
> 标签：r, dataframe, lapply

我正在一次处理多个 csv 文件。

```
getResult<-function(df){
  c(runif(1, 0, 1), runif(1, 0, 1))
}

filenames <- list.files("temp", pattern="*.csv", full.names=TRUE)
ldf <- lapply(filenames, read.csv)
res <- lapply(ldf, getResult) 
```

在“getResult”函数中，我正在计算两个浮点值。最后，我需要一个带有文件名和两个“浮点”值的数据框。我怎么做？

我尝试执行以下操作：

```
data.frame(res,filenames) 
```

但我没有得到想要的结果。有人可以指导吗？

谢谢。

添加部分 dput(res) 输出：

```
list(c(0, 0.11340206185567), c(0, 0.0317919075144509), 
c(0, 0.0569948186528497)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T05:56:00.090

您可以尝试以下

```
data.frame(do.call(rbind, res), filenames) 
```

`do.call`将在列表上调用`rbind`函数`res`，然后`data.frame`将列绑定到一个`data.frame`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T05:55:12.113

您可以使用`sapply()`而不是`lapply()`来计算`res`。这将使矩阵具有与文件数相对应的两行和两列。然后`data.frame()`用于`t()`将矩阵转置为两列。

```
res <- sapply(ldf, getResult)
data.frame(t(res),filenames) 
```

# python - 为什么一个 virtualenv 环境包含 argparse、distribute 和 wsgiref？

> ID：16140230
> 
> 赞同：15
> 
> 时间：2013-04-22T05:48:58.940
> 
> 标签：python, python-2.7, virtualenv

我正在使用`virtualenv`1.7.1.2 和`python`2.7.3 版本来创建虚拟 python 环境。但是当我创建这样一个环境并激活它时，我可以看到安装了以下包（使用`pip freeze`）：

```
argparse==1.2.1
distribute==0.6.24
wsgiref==0.1.2 
```

这是为什么？这意味着什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T06:24:36.697

这些是标准包，并且将始终遵循该版本的 Python 和 Virtualenv。

*   `distribute`很不言自明。[这是必要的`pip`](https://stackoverflow.com/a/8550546/1076493)。Distribute 还包含 setuptools，但在包内因此无法使用`pip freeze`. 有关它*实际*功能的更多信息，请查看您的`env/lib/python2.7/site-packages/distribute-0.6.31-py2.7.egg`.

*   `wsgiref`实际上是标准库的一部分，但不被认可。有一个关于它的[错误报告](http://bugs.python.org/issue12218)，它已在 Python 3.3+ 中修复。在[为什么 pip freeze 会在使用 --no-site-packages 创建的新 virtualenv 中报告一些包？](https://stackoverflow.com/questions/6627035/why-does-pip-freeze-report-some-packages-in-a-fresh-virtualenv-created-with-no)

我不知道为什么`argparse`会出现，但我的猜测是因为它是依赖项或类似`wsgiref`. [不过，在 Python 中查找包依赖](https://stackoverflow.com/a/11148336/1076493)项可能有点麻烦/痛苦，特别是如果它已经安装在您的 virtualenv 中。

# gwt - RequestFactory 差异计算和“静态”查找方法

> ID：16140232
> 
> 赞同：1
> 
> 时间：2013-04-22T05:49:10.217
> 
> 标签：gwt, requestfactory

被这三个问题困住了：

1）我看到差异是在`AutoBeanUtils's diff`方法中计算的。我在实体中看到了一个标签，该标签`parentObject`用于比较计算差异。

`parent = proxyBean.getTag(Constants.PARENT_OBJECT);`在`AbstractRequestContext`课堂上。

这是否意味着加载到浏览器的给定实体有两个副本？如果我的实体实际大小是 1kb，实际加载的数据将是 2kb（因为实体的两个副本正在加载到浏览器上）？

2）在服务器端：

假设我必须从数据库中获取一个实体，`static find<EntityName>`应该这样我每次都必须进行 db 调用，或者有没有办法可以微调该行为？[对不起，我没有很好地理解这个`locator`概念。]

3）如果从客户端发送差异时服务器端发生崩溃（出于任何不需要特定于当前请求的原因）会发生什么？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:24:38.240

1.  当您`.edit()`成为代理时，它会复制并将您作为参数传递的不可变代理存储为`PARENT_OBJECT`返回的代理。

2.  每次调用该方法时，您通常都会进行一次数据库调用（对于 a`Locator`的`find()`方法也是如此），每个请求的调用次数不会超过两次。如果需要，您可以使用某种缓存，但如果您使用 JPA 或 JDO，这会为您处理好（您必须使用每个请求的会话模式，即 OpenSessionInView）

3.  如果在解码请求时出现任何错误，将返回一个*全局错误*，该错误将传递给失败请求`onFailure`的所有s。`Receiver``RequestContext`

请参阅[https://code.google.com/p/google-web-toolkit/wiki/RequestFactoryMovingParts#Flow](https://code.google.com/p/google-web-toolkit/wiki/RequestFactoryMovingParts#Flow)

# javascript - 使用 Socket.io emit 传输数据后，如何释放内存中的数据？

> ID：16140237
> 
> 赞同：0
> 
> 时间：2013-04-22T05:49:21.803
> 
> 标签：javascript, html, node.js, memory-leaks, socket.io

根据 Chrome 的开发工具，由于某种原因，使用 socket.emit() 后，数据仍在内存中。由于我必须多次使用这行代码，内存使用量不断增加。我在客户端的 JS 代码：

```
socket.emit('upload',{data: a_very_long_string}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:04:28.633

JS 中的局部变量（用 声明`var`）在函数返回时自动进行垃圾收集。如果它是一个全局变量，你总是可以通过`delete`. 所以我想在你的情况下，这是因为一些全局变量没有在`emit()`.

我发现这篇文章谈论的是 Socket.IO 中的内存泄漏，这对您的情况可能会有所帮助。[http://jpallen.net/2013/03/08/tracking-down-a-memory-leak-in-node-js-and-socket-io/](http://jpallen.net/2013/03/08/tracking-down-a-memory-leak-in-node-js-and-socket-io/)

关于释放变量，可以参考这个问题：[Memory release from local variable in JavaScript](https://stackoverflow.com/questions/2681511/memory-release-from-local-variable-in-javascript)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:26:11.440

这是socket.io的问题。这是因为 websocket 服务器中的内存泄漏。

请参阅此处发布的解决方案：

1.  [http://jpallen.net/2013/03/08/tracking-down-a-memory-leak-in-node-js-and-socket-io/](http://jpallen.net/2013/03/08/tracking-down-a-memory-leak-in-node-js-and-socket-io/)
2.  [https://github.com/LearnBoost/socket.io/issues/1015](https://github.com/LearnBoost/socket.io/issues/1015)

# asp.net - 网站实体框架迁移 ArgumentException

> ID：16140241
> 
> 赞同：2
> 
> 时间：2013-04-22T05:49:45.290
> 
> 标签：asp.net, entity-framework, database-migration

我正在学习如何使用实体框架

建立数据库模型后，我可以轻松地在 Web 应用程序和控制台项目中执行迁移。

但是当我在网站项目中创建数据库模型并执行迁移时，控制台会提示我

```
System.ArgumentException: The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))

Server stack trace: 
   at EnvDTE.Properties.Item(Object index)
   at System.Runtime.Remoting.Messaging.StackBuilderSink._PrivateProcessMessage(IntPtr md, Object[] args, Object server, Object[]& outArgs)
   at System.Runtime.Remoting.Messaging.StackBuilderSink.SyncProcessMessage(IMessage msg)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at EnvDTE.Properties.Item(Object index)
   at System.Data.Entity.Migrations.Extensions.ProjectExtensions.GetPropertyValue[T](Project project, String propertyName)
   at System.Data.Entity.Migrations.MigrationsDomainCommand.GetFacade(String configurationTypeName)
   at System.Data.Entity.Migrations.EnableMigrationsCommand.FindContextToEnable(String contextTypeName)
   at System.Data.Entity.Migrations.EnableMigrationsCommand.<>c__DisplayClass2.<.ctor>b__0()
   at System.Data.Entity.Migrations.MigrationsDomainCommand.Execute(Action command)
The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG)) 
```

我该怎么办？Q2。如果我创建一个 Web 应用程序项目，我该如何部署它？除了 FTP，我不知道部署网站的任何其他方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T07:40:13.003

不确定是什么导致了问题，但您可以通过创建一个包含模型和上下文的单独程序集来解决它，然后在该项目上启用迁移。从您的网站项目中引用该项目。

# java - Intellij 中的 Scala 配置

> ID：16140244
> 
> 赞同：3
> 
> 时间：2013-04-22T05:49:59.143
> 
> 标签：java, scala, ide, intellij-idea

我正在尝试在 Intellij 中为 Scala 运行 HelloWorld 类程序。

我的代码是：

> 包 helloscala
> 
> 对象 HelloScala { def main(args: Array[String]) { Console.println("Hello, world!"); } }

我对 INtellij IDE 提示的错误一无所知。

```
 JDK is JDK5 
```

错误是：

> java.lang.UnsupportedClassVersionError：在 java.security.SecureClassLoader.defineClass(SecureClassLoader) 的 java.lang.ClassLoader.defineClass(ClassLoader.java:621) 的 java.lang.ClassLoader.defineClass1(Native Method) 的 .class 文件中的错误版本号.java:124) 在 java.net.URLClassLoader.defineClass(URLClassLoader.java:260) 在 java.net.URLClassLoader.access$100(URLClassLoader.java:56) 在 java.net.URLClassLoader$1.run(URLClassLoader.java: 195) 在 java.security.AccessController.doPrivileged(Native Method) 在 java.net.URLClassLoader.findClass(URLClassLoader.java:188) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:307) 在 sun.misc.Launcher $AppClassLoader.loadClass(Launcher.java:268) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:252) 在 java.lang.ClassLoader。loadClassInternal(ClassLoader.java:320) 线程“main”中的异常

任何输入都会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T06:03:28.500

[Scala 2.10](http://www.scala-lang.org/downloads)不支持 Java 5。

> 软件要求：Scala 软件发行版可以安装在任何类 Unix 或 Windows 系统上。它需要 Java 运行时版本 1.6 或更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:17:22.697

使用 JDK 7 + sbt-idea 插件。

[SBT](http://scala-sbt.org)是首选的构建工具

我推荐我的项目[框架](https://github.com/fractal/skeleton)来设置它。Intllij + SBT (+eclipse 如果你想的话)

# sql - 在不使用数据转换的情况下更新 ssis 中的表

> ID：16140246
> 
> 赞同：3
> 
> 时间：2013-04-22T05:50:14.233
> 
> 标签：sql, sql-server-2008, business-intelligence, ssis

每当我尝试在 ssis 中将表从源表更新到目标表（sql server 到 sql server）时，我都会使用更新查询运行存储过程。我通过 OLE DB 命令执行此 SP。现在要运行 OLE DB 命令，我必须进行从 DT_WSTR 到 DT_STR 的数据转换。

![在此处输入图像描述](https://i.stack.imgur.com/LLWhj.png)

我的问题是：是否可以在没有此数据覆盖的情况下执行更新？令我困惑的是，我正在从 sql server 中提取数据并将数据推送到 sql server。那么为什么 varchar 具有不同的数据编码（DT_WSTR 和 DT_STR）？

但如果我只是做一个插入，即没有更新（使用 OLE DB 命令）我不必做任何覆盖，我的 SSIS 包工作正常。现在 DT_WSTR 和 DT_STR 没有问题，但只有当我尝试运行 OLE DB 命令时才会出现问题。ssis 现在如何将数据从 nvarchar 插入到 varchar？

![在此处输入图像描述](https://i.stack.imgur.com/MtGaV.png)

如果这是一个愚蠢的问题，我很抱歉。我对 SSIS 很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:06:06.880

似乎`ADO.NET`您用来连接的源`SQL Azure`默认情况下转换 `varchar`为。因为`nvarchar`目前`OLEDB`源不能用于连接`SQL Azure`，在我的情况下，它将为您提供正确的列数据类型，因此您只能使用`Data Conversion` 转换`DT_WSTR`为`DT_STR`。

有一个[Microsft Connect 项目](http://connect.microsoft.com/SQLServer/feedback/details/425295/ssis-allow-ado-net-source-to-directly-create-output-columns-of-type-dt-str)显示此问题的`ADO.NET`来源

```
 DECLARE @column_value AS NVARCHAR(30)
 SET @column_value = ?
 UPDATE YOURTABLE 
 SET column1=convert(varchar(30),@column_value) 
```

# c# - GridView 行值在更新后未更改

> ID：16140253
> 
> 赞同：1
> 
> 时间：2013-04-22T05:50:43.687
> 
> 标签：c#, asp.net, list, gridview, datatable

我想`GridView`用这段代码更新行，但编辑后`GridView`没有改变：

```
protected void res_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        //Retrieve the table from the session object.
        DataTable dt = (DataTable)Session["dt"];
        GridViewRow row =res.Rows[e.RowIndex];
        dt.Rows[row.DataItemIndex]["name"] = ((TextBox)(row.Cells[6].Controls[0])).Text;
        dt.Rows[row.DataItemIndex]["dewey"] = ((TextBox)(row.Cells[5].Controls[0])).Text;
        *dt.Rows[row.DataItemIndex]["subject"] = ((TextBox)(row.Cells[4].Controls[0])).Text;
        Session["dt"] = dt;
        res.EditIndex = -1;
        res.DataSource = dt;
        res.DataBind();
    } 
```

我的`Page_Load`：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        DataTable dt;
        if (!IsPostBack)
        {
            dt= Converter.ListBooks(new classes.Book().GetAll());
            Session["dt"] = dt;
            res.DataSource = dt;
            res.DataBind();
        }
        else
        {
            dt=(DataTable)Session["dt"];
            res.DataSource = dt;
            res.DataBind();
        }

    } 
```

例如，我将具有 * 的行更改为：

```
dt.Rows[row.DataItemIndex]["subject"] = "tx"; 
```

并且在编辑后“主题”列更改为“tx”，所以我不知道为什么在编辑前`((TextBox)(row.Cells[4].Controls[0])).Text`返回`TextBox`文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:27:57.860

因为您正在调用**DataBind();** 每次刷新页面（POST 或 GET）时的方法，让我解释一下，如果用户将新值放入 TextBox 并单击更新按钮以触发**res_RowUpdating**，即使**Page_Load**也会触发并将 Gird 与旧值的数据库值绑定并忽略用户输入值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:05:14.093

也许更改已完成，但表单未更新。

尝试将 gridview 控件放在更新面板控件中并调用 UpdatePanel.Update()。

当您使用 Web 控件时，您看到的可能与实际不同，因为数据的更改不会在表示层中自动更新。

要解决这个“问题”，您可以对整个页面进行回发（检索所有内容），但这就像用火箭筒杀死苍蝇一样，因为您不需要所有内容，只需要已更新的内容，因此为此目的有几个允许您进行部分更新的工具，例如 AJAX 控件：UpdatePanel。

希望能帮助到你。

更新：调用 DataTable 上的 AcceptChanges() 方法并在 if(!PostBack) 之后擦除 Page_Load 上的 else 分支

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T07:27:25.227

我想，你只需要重新绑定网格

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T07:34:46.843

删除`else`您的`page_load`.

应该为你做。

每次有一个`postback`不需要时，您都在绑定网格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T07:59:29.127

调用 的`AcceptChanges()`方法，`DataTable`然后绑定`GridView`。

# iphone - 在移动应用程序客户端 [ios] 中实现基于令牌的身份验证的最佳方法

> ID：16140264
> 
> 赞同：2
> 
> 时间：2013-04-22T05:51:43.303
> 
> 标签：iphone, ios, ipad, authentication, oauth-2.0

实现**基于令牌的身份验证**机制的最佳方法是什么？

**我试过的**

1.  我使用***传统的 http 调用机制***在用户默认值中获取访问令牌存储，并在稍后的 Web 服务中调用
2.  我尝试的另一个方法是***AFNetworking、AFOauthClient 机制***，我在其中创建了客户端并将令牌设置在共享实例的标头中并在代码中使用它

我发现**第二种**方法是实现这一点的正确方法。但是刷新机制处理是一团糟。如何以正确的方式实现它？

# python - 非常简单的 Python 应用程序中的输入错误

> ID：16140265
> 
> 赞同：-1
> 
> 时间：2013-04-22T05:51:43.913
> 
> 标签：python, python-3.x

我正在学习 python，在运行这个简单的猜测程序时，我在*guess=int(input('Enter an integer: '))*运行 Python 3 时遇到错误，因为这本书是基于这个版本的。提前致谢！

```
number = 23 
running = True

while running:
    guess = int(input('Enter an integer: '))

if guess == number:
    print('Congratulations')
    running = False
elif guess < number:
    print('No higher!')
else:
    print('Little lower!')
else:
print('while loop is over.')

print('done') 
```

错误：

```
Enter an integer: Traceback (most recent call last):
  File "../Documents/Python Programs/while.py", line 5, in <module>
    guess = int(input('Enter an integer: '))
EOFError: EOF when reading a line
[Finished in 0.1s with exit code 1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:56:42.537

你的缩进是错误的。一旦它被修复，程序在 Python3 下运行良好。

```
number = 23 
running = True

while running:
    guess = int(input('Enter an integer: '))

    if guess == number:
        print('Congratulations')
        running = False
    elif guess < number:
        print('No higher!')
    else:
        print('Little lower!')
else:
    print('while loop is over.')

print('done') 
```

# vba - 在word VBA中获取字符名称

> ID：16140266
> 
> 赞同：2
> 
> 时间：2013-04-22T05:51:52.593
> 
> 标签：vba, vb6

在这里，我想通过使用 VBA 来获取 word 中的字符名称。例如

*   a-> 拉丁文小写字母 A
*   A-> 拉丁文大写字母 A

**笔记：**

`ASC()`并 `ASCW()`用于获取字符值`(eg: asc("a") = 97)`，例如是否有任何方法可以获取字符名称或其他？

![在此处输入图像描述](https://i.stack.imgur.com/ggaQg.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T06:15:31.283

[干得好。](http://www.ascii-code.com/)

使用此表，您可以一次获取每个字符，并将其与我列出的表进行比较。所以，如果你有一个**å**，那么使用**ASC(å)**你会得到**229**，然后在你的桌子上进行查找，你会得到“***拉丁小写字母 a 上面有环***”。

对每个字母重复。

# javascript - CKEditor 中不可删除的元素

> ID：16140267
> 
> 赞同：2
> 
> 时间：2013-04-22T05:51:54.570
> 
> 标签：javascript, ckeditor

我想知道是否有办法在 CKEditor 4 中使元素“不可删除”。

我可能有一些像这样的 HTML：

```
<div class='content' contenteditable='true'>
    <div class='gallery'>...</div>
</div> 
```

在这种情况下`.gallery`，不应该`.content`通过退格或选择并按删除从 中删除。

**更新：似乎小部件不能被删除，或者至少据我所知。** 看一下[http://ckeditor.com/demo#widgets](http://ckeditor.com/demo#widgets)，可以删除小部件。还有其他想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T08:15:26.280

您正在寻找的是小部件。[它们将在 CKEditor 4.3 中实现](https://dev.ckeditor.com/ticket/9764)并提供此类功能。要有耐心 ;）

目前只有[占位符](http://ckeditor.com/addon/placeholder)插件可以做“类似”的事情，但我想这对你来说还不够。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-29T08:25:30.960

我使用一种解决方法使小部件不可删除。在小部件定义中，我将其添加到 init 属性中：

```
 init: function () {
        this.on('key', function(e) {
            let k = e.data.keyCode;
            // Backspace, delete, ctrl+x
            if ([8, 46, 1114200].includes(k)) { e.cancel() }
        })
    } 
```

它将阻止用户使用键盘删除小部件。“剪切”功能也需要禁用。

# javascript - 无法将日期传递给 javascript 函数

> ID：16140272
> 
> 赞同：2
> 
> 时间：2013-04-22T05:52:11.317
> 
> 标签：javascript, asp.net, asp.net-mvc

我有一个表 td 如下。

```
$roomRowId.append("<td  onclick='updateBookingRooms(" + roomId + "," + date + ")'></td>"); 
```

当用户单击此 td 我必须调用 javascript 函数

**updateBookingRooms(id,date)**。

id 变为真值，但日期不是真值。

**例如，如果 updateBookingRooms(1,02/04/2013) 我收到 id=1 和 date = 0.00012419274714356681**

有什么问题？如何检索原始日期值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T05:53:46.110

对参数使用括号：

```
$roomRowId.append("<td  onclick='updateBookingRooms(\"" + roomId + "\", \"" + date + "\")'></td>"); 
```

您还可以像这样附加点击事件：

```
$('<td></td>').appendTo($roomRowId).click([roomId, date], updateBookingRooms); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T05:55:09.880

我建议您在操作 DOM 时避免使用字符串连接。相反，jQuery 有一个很好的方式来构建一个 DOM 元素：

```
$roomRowId.append(
    $('<td/>', {
        text: 'some text that goes inside the td',
        click: function() {
            updateBookingRooms(roomId, date);
        }
    })
); 
```

从您的示例中不清楚您是否想要传递给函数的 javascript 变量或者这些变量是否是硬编码值`roomId`。`date`

# iphone - phonegap应用程序上的iphone键盘弹出问题？

> ID：16140273
> 
> 赞同：0
> 
> 时间：2013-04-22T05:52:14.547
> 
> 标签：iphone, cordova, phonegap-build, iphone-keypad

我正在使用phonegap（cordova）创建一个新的iphone应用程序。我的应用程序有一个问题。如果我点击任何输入字段，iphone键盘就会弹出，整个页面的位置也在改变。就像固定页脚在键盘上方弹出一样。请指导我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-12T22:06:18.357

这是一个很难“正确”的问题。您可以尝试在输入元素焦点上隐藏页脚，并在模糊时显示，但这在 iOS 上并不总是可靠的。每隔一段时间（十分之一，比如说，在我的 iPhone 4S 上），焦点事件似乎无法触发（或者可能存在竞争条件），并且页脚没有被隐藏。

经过反复试验，我想出了这个有趣的解决方案：

```
<head>
    ...various JS and CSS imports...
    <script type="text/javascript">
        document.write( '<style>#footer{visibility:hidden}@media(min-height:' + ($( window ).height() - 10) + 'px){#footer{visibility:visible}}</style>' );
    </script>
</head> 
```

本质上：使用 JavaScript 确定设备的窗口高度，然后动态创建 CSS 媒体查询以在窗口高度缩小 10 像素时隐藏页脚。因为打开键盘会调整浏览器显示的大小，所以这在 iOS 上永远不会失败。因为它使用的是 CSS 引擎而不是 JavaScript，所以它也更快更流畅！

注意：我发现使用 'visibility:hidden' 比使用 'display:none' 或 'position:static' 更少故障，但你的里程可能会有所不同。

# jakarta-ee - 基于 JAX-RS 2.0 应用程序中的 bean 验证的 HTML 表单验证

> ID：16140277
> 
> 赞同：0
> 
> 时间：2013-04-22T05:52:53.123
> 
> 标签：jakarta-ee, jax-rs, bean-validation

我们知道 JAX-RS 可以轻松地将表单输入值直接映射到服务器 bean 属性或方法参数。

现在 JAX-RS 2.0 提供了一种使用 bean 验证来验证服务器端值的方法，这真是太神奇了。

但是我们如何以 Ajax 的方式在前端（给提交 HTTP 表单的用户）呈现有用的验证信息呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:16:51.220

可能的方法如下。创建 ErrorEntity 类，类似于

```
@XmlRootEntity
public class ErrorEntity{
  private String errorCode;
  private String description;

  //getters, setter, constructors

} 
```

然后，如果发生错误抛出：

```
int statusCode = 500;
ErrorEntity ee = new ErrorEntity("SYSTEM", "Cannot connect to database, etc.");
throw new WebApplicationException(Response.status(statusCode).entity(ee).build()); 
```

显然使用正确的 HTTP 错误代码（400 表示格式错误的内容，404 表示丢失数据等）。

在 AJAX 应用程序中，如果您得到与 200、204 或 302 不同的内容，那么您应该获得带有 ErrorEntity 内容的 JSON 或 XML。

最简单的解决方案是简单地将 String 作为带有一些错误信息 + HTTP 状态代码的实体返回。

```
throw new WebApplicationException(Response.status(500).entity("Cannot connect to DB, ...").build()); 
```

# jquery - 调整窗口大小时jquery图像调整大小

> ID：16140278
> 
> 赞同：0
> 
> 时间：2013-04-22T05:52:59.713
> 
> 标签：jquery, css, image, resize

我一直在寻找和即兴创作并想出了这个：

```
$(window).resize(function() {
    function imgResize()
    {
        if ($("#post_container img").width() > $("#post_container img").height()){
            $('#post_container img').css({ 'width': '80%', 'height': 'auto' });
            }
        else if ($("#post_container img").width() < $("#post_container img").height()){
            $('#post_container img').css({ 'width': 'auto', 'height': '80%' });
            }
        else {
            $('#post_container img').css({ 'width': '80%', 'height': 'auto' });
            }
    }
}) 
```

该代码是否正确，因为它应该做的是在调整窗口大小时检测图像是纵向还是横向并调整其大小以使其完全适合屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:01:36.313

正如*@terry*提到的你已经定义了一个函数但没有执行它，你可以做什么来将函数移到外面并以这种方式调用它：

```
function imgResize(){
    if ($("#post_container img").width() > $("#post_container img").height()){
        $('#post_container img').css({ 'width': '80%', 'height': 'auto' });
    } else if ($("#post_container img").width() < $("#post_container img").height()){
        $('#post_container img').css({ 'width': 'auto', 'height': '80%' });
    } else {
        $('#post_container img').css({ 'width': '80%', 'height': 'auto' });
    }
}
$(window).resize(function() {
  imgResize();
}).resize(); //<-----------this will execute when page gets ready. 
```

或者另一种选择是在`.resize()`处理函数中完成所有操作：

```
$(window).resize(function() {
    if ($("#post_container img").width() > $("#post_container img").height()){
        $('#post_container img').css({ 'width': '80%', 'height': 'auto' });
    } else if ($("#post_container img").width() < $("#post_container img").height()){
        $('#post_container img').css({ 'width': 'auto', 'height': '80%' });
    } else {
        $('#post_container img').css({ 'width': '80%', 'height': 'auto' });
    }
}).resize(); //<-----------this will execute when page gets ready. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:00:19.030

我以某种方式让它按预期工作，这是到目前为止的最终代码：

```
$(window).load(function(){
    imgResize();
    $(window).on('resize', imgResize);
});

    function imgResize(){

        var sW = $("#right_column_post").width();  
        var sH = $(window).height();
        var iW = $("#post_container img").width();
        var iH = $("#post_container img").height();
        var eW = sW - iW; // horizontal space
        var eH = sH - iH; // vertical space

        if(eW > eH){ // more horizontal space
            $("#post_container img").css("height", (sH * 0.7));
            $("#post_container img").css("width", 'auto');

        } else if (eW < eH){ // more vertical space
            $("#post_container img").css("height", 'auto');
            $("#post_container img").css("width", (sW * 0.7));
        } else { // as much space
            $("#post_container img").css("height", 'auto');
            $("#post_container img").css("width", (sW * 0.7));
        } 

    } 
```

它几乎可以工作，但是正如您所看到的，当在横向比例的图像上减小窗口宽度时，图像比例会扭曲一段时间：

[http://tomiphotography.com/?p=158](http://tomiphotography.com/?p=158)

加载页面时，图像也会闪烁。我可以原谅，但比例需要固定。

# java - Java中本地、开放和递归时的布尔值混淆

> ID：16140279
> 
> 赞同：1
> 
> 时间：2013-04-22T05:53:13.197
> 
> 标签：java, if-statement, recursion, boolean

我是一个初学者，并且对这段代码感到非常困惑，因为布尔值“完成”会发生什么。我花了两个小时来理解这段代码，我很沮丧。

```
public boolean traverse(int row, int column){

boolean done = false; 

if(row == grid.length-1 && column == grid[0].length-1)
     done = true;
else{
     done = traverse(row + 1\. column); //down
     if(!done) done = traverse (row, column+1)//right
     }
if (done) grid[row][column] = PATH;
}
return done;
} 
```

首先，“完成”被声明为 FALSE。然后它移动到 if 和 else 语句并成为它的本地语句。现在，在 IF 和 ELSE 语句之外，当它说 if(done) 做某事时，当 done 是 FALSE 还是 TRUE？同样，在 ELSE 语句中， (!done) 是否意味着它是 FALSE，因为它在 IF ELSE 语句中被声明为 TRUE？

简而言之，当您使用带有布尔值的 IF、IF 和 ELSE 语句时，是否意味着它必须为 TRUE？

例如：

```
boolean love = false;
if(love) do this; 
```

现在，当爱是虚假的时候，这是否意味着“这样做”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:01:03.850

`!`操作员协商布尔值。`true`这意味着如果布尔变量为 ，则语句变为`false`。因此，对于您的示例，这将不会被执行：

```
boolean love = false;
if(love) do this; //not executed 
```

但是使用 a`!`它会被执行：

```
boolean love = false;
if(!love) do this; //executed 
```

在另一种情况下，这不会被执行：

```
boolean love = true;
if(!love) do this; //not executed 
```

**编辑：**
有关 if-Statements 的进一步解释，您可能会查看 oracle 的官方文档：http: [//docs.oracle.com/javase/tutorial/java/nutsandbolts/if.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/if.html)

**编辑2：**
也许如果您以这种方式编写代码，对您来说更容易理解：

```
public boolean traverse(int row, int column){

   boolean done = false; 

   if(row == grid.length-1 && column == grid[0].length-1) {
      done = true;
   }else{
      done = traverse(row + 1\. column); //down
      if(!done) {
         done = traverse (row, column+1)//right
      }
   }
   if (done) {
      grid[row][column] = PATH;
   }
   return done;
} 
```

# ios - 如何确定终点处三次贝塞尔路径的曲率

> ID：16140281
> 
> 赞同：1
> 
> 时间：2013-04-22T05:53:22.147
> 
> 标签：ios, bezier

我一直在做一个项目，我使用贝塞尔路径来绘制我需要的曲线。我的项目中的每个基本形状都由三个三次贝塞尔曲线首尾相连，以便斜率与它们相交的位置相匹配。

我需要解决的基本问题是由三个贝塞尔曲线组成的复合曲线是否与自身相交。经过一段时间的思考，我发现鉴于曲线的约束，我可以将任务简化为其他内容：

三个 Bezier 路径中的每一个的曲率应该在曲率方向上相对于它所邻接的曲线是相反的。换句话说，应该有一个拐点，其中一条贝塞尔曲线与另一条贝塞尔曲线邻接。如果不是这种情况，我想拒绝生成曲线的参数集并选择不同的集。

无论如何，我的基本问题是如何检测曲线相互邻接的拐点是否存在。

在插图中，三个贝塞尔曲线中的每一个都使用不同的颜色显示。左边的黑色曲线在它们相交的点处与红色曲线的弯曲方向相反，但右边的黑色曲线在同一方向弯曲。在红色和左黑色曲线相交处存在一个拐点，但在红色和右黑色曲线相交处没有。

![循环贝塞尔路径](https://i.stack.imgur.com/Q2AmE.jpg)

编辑：下面，我添加了另一个图像，显示了包围贝塞尔路径的多边形。黑色曲线中显示的多边形的交叉线测试的是拐点，而不是循环。我猜可以通过检查封闭多边形是否相交来测试一条曲线与另一条曲线相交，如红色和蓝色曲线所示。 ![具有控制点多边形的贝塞尔路径](https://i.stack.imgur.com/0KfDa.jpg)

PS由于有一些关于约束的问题，我将在这里列出其中的一些：

*   最左边的点和最右边的点具有相同的 y 值。
*   最左边点的控制点的x值小于
    最右边点的控制点的x值。这可以防止
    黑色和蓝色曲线相互交叉。
*   最左边和最右边点的斜率在水平线的大约 +/- 10 度范围内。
*   黑色和红色曲线的交点以及红色和蓝色曲线的交点将整条曲线分成大约三分之二。我没有确切的数字，但样本界限是红色曲线左端的 x 值介于最右边点 x 值的 25% 到 40% 之间。
*   交点的 y 值是整个宽度的 +/- 一小部分。
*   交叉点处的斜率 > 0.6 且 < 3.0（正或负）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-10T22:21:37.473

曲率方程比较简单。你只需要曲率的符号，所以你可以跳过一点数学。您基本上对一阶和二阶导数的叉积的符号感兴趣。

这种简化只适用于曲线平滑连接。如果没有等切线，则需要更复杂的测试。

曲线 P 的曲率符号：

```
ax = P[1].x - P[0].x;               //  a = P1 - P0
ay = P[1].y - P[0].y;
bx = P[2].x - P[1].x - ax;          //  b = P2 - P1 - a
by = P[2].y - P[1].y - ay;
cx = P[3].x - P[2].x - bx*2 - ax;   //  c = P3 - P2 - 2b - a
cy = P[3].y - P[2].y - by*2 - ay;

bc = bx*cy - cx*by;
ac = ax*cy - cx*ay;
ab = ax*by - bx*ay;

r = ab + ac*t + bc*t*t; 
```

请注意，r 是一阶和二阶导数的叉积，符号表示曲率方向。在左侧曲线的 t=1 和右侧曲线的 t=0 处计算 r。如果乘积为负，则存在拐点。

如果您有曲线 U、V 和 W，其中 U 是左侧黑色，V 是中间红色，W 是右侧黑色，则计算上面的 bc、ac 和 ab。如果两个连接都是拐点，则以下测试将成立：

```
(Uab+Uac+Ubc)*(Vab) < 0 && (Vab+Vac+Vbc)*(Wab) < 0 
```

曲率方程有一个我忽略的分母。它不影响曲率的符号，并且仅当曲线是一条线时才为零。

数学总结：

```
// start with the classic bezier curve equation
P = (1-t)^3*P0 + 3*(1-t)^2*t*P1 + 3*(1-t)*t^2*P2 + t^3*P3
// convert to polynomial
P = P0 + 3*t*(P1 - P0) + 3*t^2*(P2 - 2*P1 + P0) + t^3*(P3 - 3*P2 + 3*P1 - P0)
// rename the terms to a,b,c
P = P0 + 3at + 3btt + cttt
// find the first and second derivatives
P' = 3a + 6bt + 3ctt
P" =      6b  + 6ct
// and the cross product after some reduction 
P' x P" = ab + act + bctt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T17:25:20.607

检查贝塞尔曲线是否具有双点或自交点的确定性方法之一是计算**逆**方程并评估根，因为贝塞尔曲线的逆方程在自交点处始终为零。正如[TWSederberg 的这个例子中所详述的那样——课程笔记](http://cagd.cs.byu.edu/~557/text/ch16.pdf#15)。然后为了检测两条贝塞尔曲线（问题中的红色和黑色）是否相互交叉，有几种方法，[**二进制细分**](https://github.com/paperjs/paper.js/blob/master/src/path/Curve.js#L1167)（更容易实现）和[**贝塞尔剪裁**](https://github.com/paperjs/paper.js/blob/master/src/path/Curve.js#L1207)（效率和代码复杂度很好的平衡），**隐式**（不值得）。

但更有效的方法可能是将曲线细分为小线段并找到交点。[这是一种方法](https://github.com/paperjs/paper.js/blob/master/src/path/Path.js#L840)。尤其是当您想知道路径是否自相交，但不是在准确的交点上时。

如果您对分段贝塞尔曲线（或上面提到的@Pomax 的多贝塞尔曲线）的 CV 位置有明确的假设，您可以尝试在问题中提到的基于曲率的方法。

这是与问题相似的路径上的曲率图。在类似情况下，这似乎可以为您提供您正在寻找的解决方案。此外，在风口浪尖的情况下，这种*快速而肮脏*的方法似乎仍然有效！

![双点](https://i.stack.imgur.com/4CEcn.png) ![风口浪尖](https://i.stack.imgur.com/PFy6x.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-14T20:42:19.650

@维克多恩格尔：谢谢你的澄清。现在解决方案更加简单。

简而言之，看看两条曲线的扭矩。如果它们拉在一起，就会发生“弯曲”，如果它们相反，则“弯曲”会继续。

备注：这里的词 **“屈曲”**和**“曲率”**比***严格的数学含义***更直观，因此使用撇号。

和以前一样，一组点**P0,P1,P2,P3**定义了第一条三次贝塞尔曲线，**Q0,Q1,Q2**和**Q3**定义了第二条。此外，4 个向量：**a、b、u、w** 将很有用。

```
a = P2P3
b = P1P2
u = Q0Q1
v = Q1Q2 
```

我将省略 C1 连续性检查，它已经由你完成了。（这意味着**P3** = **Q0**和**a** x **u** =0）

最后，将出现**Tp**和**Tq**扭矩。

```
Tp = b x a 
```

（“x”表示向量积，但平面上的**Tp**被视为简单数字，而不是向量。}

```
if Tp=0            {very rarely vectors a, b can be parallel.}
    b = P0P1
    Tp = b x a 
    if Tp=0 
        No! It's can't be! Who straightened the curve???
        STOP
    endif
endif

Tq = u x v 
if Tq=0            {also  vectors u, v can be parallel.}
    v = Q2Q3
    Tq = u x v 
    if Tq=0 
        Oh no! What happened to my curve???
        STOP
    endif
endif 
```

现在是最后的测试：

```
if Tp*Tq < 0  then    Houston! We have AN "INFLEXION"!
              else    WE CONTINUE THE TURN! 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-10T12:09:47.620

假设您有 4 个点：P0、P1、P2 和 P3，它们描述了三次贝塞尔曲线（简称***cBc***）。P0 和 P3 是起点和终点，P1 和 P2 是方向点。

当 P0、P1 和 P2 共线时，***cBc***在 P0 处有一个拐点。

当 P1、P2 和 P3 共线时，***cBC***在 P3 处有一个拐点。

评论。

1) 使用向量积（分别为 P0P1 x P1P2 和 P1P2 x P2P3）检查共线性。结果应该是一个零长度向量。

2) 避免P0、P1、P2、P3都共线的情况，它们产生的***cBc***不是常识中的曲线。

推论。

当 P1=P2 时，***cBc 两边***都有拐点。

# java - JPA 枚举类型映射。最佳方法

> ID：16140282
> 
> 赞同：34
> 
> 时间：2013-04-22T05:53:24.103
> 
> 标签：java, jpa, enums, hibernate-mapping

像往常一样，Java 枚举类型具有相应的代码和名称描述。包含此类字段的 Java 类将它们包含为 Enum：

```
public enum MyEnum{
    SOMEINSTANCE(1, "test1"),
    SOMEINSTANCE(2, "test2");

    private final int code;
    private final String name;
    private MyEnum(int code, String name){
        this.code = code;
        this.name = name;
    }
    ... helper getter for code and name
}

@Entity
puclic class EnumHolder{
    private MyEnum myEnum;
} 
```

我是 JPA 的新手，但我希望有 ' `myEnums`' 表，看起来像：

```
code int not null, name varchar(50) not null) 
```

在我的`enumHolder`表中，我希望有`myEnumCode`指向 myEnums 表的字段。

使用 currenlty 同时支持 EnumType.ORDINAL 和 EnumType.STRING 我想这不是一个好主意。

还有一个问题。如何使用 Java类数据填写`myEnums`表格？`MyEnum`你会怎么做？请最好的方法。

**PS：以下是我可以提供的解决方案：**

假设有一个`myEnum`带有`code`和 name的表`fields`。Java`MyEnum`枚举，在问题中有所描述。`enumHolder`表需要`myEnumCode`引用`myEnum.code`字段。如果您不同意，请评论解决方案。

```
@Entity
@Access(AccessType.FIELD)
public class EnumHolder {
    @Id private int id;
    @Transient private MyEnum myEnum;
    …
    public int getId() { return id; }
    public void setId(int id) { this.id = id; }
    public MyEnum getMyEnum() { return MyEnum; }
    public void setMyEnum(MyEnum myEnum) { this.myEnum = myEnum; }

    @Access(AccessType.PROPERTY) @Column(name="myEnumCode")
    protected int getMyEnumForDb() {
        return myEnum.getCode();
    }

    protected void setMyEnumForDb(int enumCode) {
        myEnum = MyEnum.getByCode( enumCode);
    }
…
} 
```

当然这里也有缺点。但目前我看不到更好的方法。请不要提供 EnumType.ORDINAL 和 EnumType.STRING 的替代品。我不想在这里写下它的使用可能存在的所有问题（在 Effective Java 中，它是关于序数用法的描述）。使用 EnumType.STRING 我不喜欢这两种方法，因为它不允许在数据库中有描述并从 db 请求它。

关于填充数据库。我认为编写一个脚本并不难，它清除`myEnum`表，然后为每个 Java 枚举实例插入表中。并且始终在部署阶段执行此操作。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-09-05T21:44:44.633

最好的方法是将唯一的 ID 映射到每个枚举类型，从而避免 ORDINAL 和 STRING 的陷阱。请参阅这篇[文章](http://blog.chris-ritchie.com/2013/09/mapping-enums-with-fixed-id-in-jpa.html)，其中概述了映射枚举的 5 种方法。

摘自上面的链接：

**1&2。使用@Enumerated**

目前有 2 种方法可以使用 @Enumerated 注释在 JPA 实体中映射枚举。不幸的是，EnumType.STRING 和 EnumType.ORDINAL 都有其局限性。

如果您使用 EnumType.String，那么重命名您的枚举类型之一将导致您的枚举值与保存在数据库中的值不同步。如果您使用 EnumType.ORDINAL 则删除或重新排序枚举中的类型将导致保存在数据库中的值映射到错误的枚举类型。

这两种选择都很脆弱。如果枚举在未执行数据库迁移的情况下被修改，您可能会危及数据的完整性。

**3\. 生命周期回调**

一种可能的解决方案是使用 JPA 生命周期回调注释 @PrePersist 和 @PostLoad。这感觉非常难看，因为您的实体中现在将有两个变量。一个映射存储在数据库中的值，另一个映射实际的枚举。

**4\. 将唯一 ID 映射到每个枚举类型**

首选的解决方案是将您的枚举映射到枚举中定义的固定值或 ID。映射到预定义的固定值使您的代码更加健壮。对枚举类型顺序的任何修改，或者对名称的重构，都不会造成任何不利影响。

**5\. 使用 Java EE7 @Convert**

如果您使用的是 JPA 2.1，则可以选择使用新的 @Convert 注释。这需要创建一个使用@Converter 注释的转换器类，您可以在其中定义每种枚举类型将哪些值保存到数据库中。然后，在您的实体中，您将使用 @Convert 注释您的枚举。

**我的偏好：（4号）**

我更喜欢在枚举中定义我的 ID 而不是使用转换器的原因是良好的封装。只有枚举类型应该知道它的 ID，只有实体应该知道它如何将枚举映射到数据库。

有关代码示例，请参阅原始[帖子](http://blog.chris-ritchie.com/2013/09/mapping-enums-with-fixed-id-in-jpa.html)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-22T06:58:59.107

您可以使用 将枚举字段添加到您的实体[`@Enumerated`](http://docs.oracle.com/javaee/6/api/javax/persistence/Enumerated.html)。这里的关键是你想要你的蛋糕并且也吃它 - 为了一致性起见，最好选择要么`EnumType.ORDINAL`要么`EnumType.STRING`。

两者都有其优点和缺点，这些都[在这个网站](http://tomee.apache.org/examples-trunk/jpa-enumerated/)上列出。最大的区别似乎在于排序 - 如果您已`EnumType.ORDINAL`设置，则在更新枚举时会遇到问题。

我会鼓励你重新考虑你想要设计你的桌子的方式。字符串和整数本质上存储了相同的信息——枚举值*是*什么——你可以从数据库中取回这些信息而不必大惊小怪。`id`考虑到上面链接中的注意事项，最好将a 作为表上的主键，然后将枚举类型作为字符串或序数值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-09T15:42:46.410

```
@Column(name = "MY_TYPE")
@Enumerated(EnumType.STRING)
private MyType type;

enum MyType {
type_1
type_2
} 
```

然后创建您的列，如下所示：

```
TYPE_ID  VARCHAR(20) NOT NULL DEFAULT 'TYPE_1' CHECK (TYPE_ID IN ('TYPE_1', 'TYPE_2'))) 
```

这解决了我的问题。

# powershell-2.0 - Windows PowerShell 错误

> ID：16140290
> 
> 赞同：0
> 
> 时间：2013-04-22T05:54:08.273
> 
> 标签：powershell-2.0, office365

我正在尝试使用 Windows PowerShell 2.0连接到[Office 365 。](https://en.wikipedia.org/wiki/Microsoft_Office_365)由于出现错误，我无法运行以下命令：

> 导入模块 MSOnline
> 连接 msolservice

如果 connect cmdlet 不工作，我将无法连接到我的 Office 365 实例。我已经在两台不同的计算机上尝试过这个，在这两种情况下我都得到了同样的错误。一旦计算机运行 Windows XP 而另一台计算机运行 Windows 2008 R2。

一些背景。我已经安装了此处提供的 PowerShell 模块：

```
Microsoft Online Services Module for Windows PowerShell 32-bit
Microsoft Online Services Module for Windows PowerShell 64-bit 
```

我从这里安装了 SIA（Microsoft Online Services Module for Windows PowerShell）：

```
Microsoft Online Services Sign-In Assistant 32-bit
Microsoft Online Services Sign-In Assistant 64-bit 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:47:19.560

如果`Import-Module`运行正常，则意味着 cmdlet 已导入 PowerShell。试试这个：

```
Import-Module -MsonlineExtented -Force 
```

# c++ - Visual Studio 2012 更新 2 中的 std::async 衰减（丢失）右值引用。任何解决方法？

> ID：16140293
> 
> 赞同：8
> 
> 时间：2013-04-22T05:54:14.080
> 
> 标签：c++, visual-c++, c++11, future, visual-c++-2012

考虑下面的代码：

```
#include <memory>
#include <future>

using namespace std;

template <typename T, typename Work>
void Test2(future<T> f, Work w)
{
  async([](future<T> && f, Work w)
                      {}, move(f), move(w));
}

int main()
{
  future<int> x = std::async([]()->int{
        std::this_thread::sleep_for(std::chrono::microseconds(200));
        return 10;
    });

  Test2(std::move(x), [](int x){});
    return 0;
} 
```

上述失败并出现以下编译器错误：

> 错误 1 ​​错误 C2664: 'void Test2::::operator ()(std::future<_Ty> &&,Work) const' : 无法将参数 1 从 'std::future<_Ty>' 转换为 'std::future <_Ty> &&' c:\program files (x86)\microsoft visual studio 11.0\vc\include\xrefwrap 98 1 ConsoleApplication6

GCC 4.7.2 编译得很好 [http://ideone.com/KhMiV6](http://ideone.com/KhMiV6)

在我继续在 Microsoft Connect 上报告之前：

1）这是VC11的一个错误还是这实际上是标准行为？

2）有没有人知道这个的解决方法？

编辑：我已经在[Microsoft Connect](https://connect.microsoft.com/VisualStudio/feedback/details/785260/std-async-decaying-losing-rvalue-reference-in-visual-studio-2012-update-2)上报告了它。为了更快地解决问题，我们鼓励您对其进行投票。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T09:22:57.517

嗯，这似乎是VC11中的一个错误。显然，实现`async`并没有真正转发参数，而是复制它们。

从头顶开始，我将为右值创建一个小包装器，在复制包装器时移动构造元素：

```
 template <typename T>
    struct rvref_wrapper {
        rvref_wrapper(T&& value) : value_(std::move(value)) {}
        rvref_wrapper(rvref_wrapper const& other) : value_ (other.get()) {}
        T&& get() const { return std::move(value_); }
        mutable T value_;
    };

    template <typename T>
    auto rvref(T&& x) -> rvref_wrapper<typename decay<T>::type> {
       return std::move(x);
    } 
```

然后您必须修改您的测试场景，以便 lambda in`Test2`采用包装器而不是`future`自身：

```
 template <typename T, typename Work>
    void Test2(future<T> f, Work w)
    {
      async([](rvref_wrapper<future<T>> fr, Work w) {
          // acquire future<T>&& here
          future<T> f(fr.get());
          // e.g. call work with future value
          w(f.get());
      }, rvref(f), move(w));
    }

    int main()
    {
        future<int> x = std::async([]()->int{
            std::this_thread::sleep_for(std::chrono::microseconds(200));
            return 10;
        });

        Test2(std::move(x), [](int x){});
        return 0;
    } 
```

看起来有点难看，但至少它可以编译。希望对你有帮助！

# c++ - 用weak_ptr创建sinlgeton类是正确的方法吗

> ID：16140294
> 
> 赞同：13
> 
> 时间：2013-04-22T05:54:21.440
> 
> 标签：c++, c++11, singleton

我创建了一个父类来使用智能指针处理单例模式：

.h 文件：

```
template<class singleType>
class Singleton
{
public:
    static std::shared_ptr<singleType> GetInstance();

private:
    static std::weak_ptr<singleType> m_singleObject;
}; 
```

.cpp 文件：

```
template<class singleType>
std::shared_ptr<singleType> Singleton<singleType>::GetInstance()
{
    auto shareObject = m_singleObject.Lock();
    if (!shareObject)
    {
        shareObject.reset(new singleType);
        m_singleObject = shareObject;
    }

    return shareObject;
} 
```

不确定这是使用智能指针的正确方法吗？任何想法？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T08:05:55.457

已经讨论了这种实现的优缺点。但是有一堆bug：

1）由于这是一个模板，您必须将您的实现移动到标题中，否则链接器找不到它。

2）`.lock()`weak_ptr 的功能不是大写的。

3）不要忘记实例化

```
template<class singleType> 
std::weak_ptr<singleType> Singleton<singleType>::m_singleObject; 
```

4）更好地使用`shareObject = std::make_shared<singleType>(singleType());`而不是`new`： [http ://herbsutter.com/gotw/_103/](http://herbsutter.com/gotw/_103/)

5）正如康拉德所说：它不是线程安全的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T06:06:08.177

我做了一些研究，所以现在我会发布一个答案。

代码看起来应该可以工作，并且是智能指针的正确用法。唯一的问题是您希望单例的行为究竟如何。这应该表现得像一个教科书单例，除了如果当前没有任何东西有指向单例的指针，它将删除自己。这种行为实际上取决于您的程序的实现。如果您希望单只在使用时才存在，那么我会说去吧。

我会避免过于频繁地创建和销毁单点，尤其是在构建和解构特别密集的情况下。如果它不断被创建和删除，那么使用更标准的单例实现可能会更好。标准的单例行为往往是单例在程序运行期间只创建一次，并且永远不会被删除。

我认为这是一个聪明的实现，因为你有它的用途，我可能不得不借用这个想法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-22T07:45:25.260

您的代码不是线程安全的。

名称`lock`可能暗示并发访问被阻止，但实际上并没有这样的保证：当多个线程同时调用您的`GetInstance`函数时，您将获得多个实例而不是保证单个实例。

您需要在函数的整个`GetInstance`生命周期内创建一个显式锁。请注意，这当然不是很有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T06:05:51.933

据我所知，这应该没问题。您将避免乱序破坏问题，但在创建初始实例后创建新实例可能会出现问题。这个单例在任何时候都只有一个实例处于活动状态，但在程序运行的过程中，可能有多个实例整体处于活动状态。

这种破坏和娱乐在性能方面也可能是不受欢迎的，不仅在副作用方面。

# c# - 在 C# 中接近时出错

> ID：16140297
> 
> 赞同：4
> 
> 时间：2013-04-22T05:54:56.440
> 
> 标签：c#

我正在尝试关闭我的表单，以便当用户退出时，它将“用户已退出”保存到文本文件中，这是我的代码：

```
private void mainForm_FormClosing(object sender, FormClosingEventArgs e)
   {

        if (String.IsNullOrEmpty(directory))
        {
            Close();
            e.Cancel = false;
        }
        else
        {
            string time = DateTime.Now.ToString("hh:mm");

            TextWriter msg = new StreamWriter(directory, true);

            msg.WriteLine(" (" + time + ") == " + uName + " Has Left The Chat == ");

            msg.Close();

            Close();
            e.Cancel = false;
        }
   } 
```

我的问题是，我收到此错误：

> “确保您没有无限循环或无限递归”

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T05:57:08.070

您不能从表单关闭中调用 Close() 方法。删除所有 Close() 调用，它将起作用。

```
private void mainForm_FormClosing(object sender, FormClosingEventArgs e)
{
    if (String.IsNullOrEmpty(directory))
    {
        e.Cancel = false;
    }
    else
    {
        string time = DateTime.Now.ToString("hh:mm");

        using(TextWriter msg = new StreamWriter(directory, true))
        { 
            msg.WriteLine(" (" + time + ") == " + uName + " Has Left The Chat == ");
            msg.Close();
        }
        e.Cancel = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T05:58:01.623

您不需要调用该`Close()`方法。`mainForm_FormClosing`如果事件已执行，则有人已经调用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T06:02:15.660

由于Form已关闭，事件“ **mainForm_FormClosing** ”正在执行，无需调用**“Close();”** 在 If 和 Else 条件下。

如果你这样做，你会得到一个“System.StackOverflowException”

# drupal-7 - 如何在由视图创建的页面上显示块？

> ID：16140303
> 
> 赞同：0
> 
> 时间：2013-04-22T05:55:28.443
> 
> 标签：drupal-7

状态：我通过视图模块创建了一个页面。

名称-“文化与传统”路径-“文化与传统”

按内容类型显示内容的“标题”和“正文”。

我创建了一个名为“Blk Culture and Tradition”的块，它通过视图模块显示内容的标题。

然后我进入结构->块->“Blk Culture and Tradition”的配置，将culture-and-tradition放入“仅列出的页面”

问题：当我进入“文化与传统”的视图页面时，没有显示“Blk Culture and Tradition”块。

如何在视图创建的页面上显示块

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:30:30.657

我从[这里](http://drupal.org/node/531458)找到了解决方案。并删除内容类型的标记。

# mysql - 我想将 2 字段与格式空间连接起来

> ID：16140305
> 
> 赞同：1
> 
> 时间：2013-04-22T05:55:30.567
> 
> 标签：mysql

我想要具有 20 个字符的字段 pjPROJECTCODE（在字段中也包括字符，否则是空格）和 '::' pjDESCRIPTION 。我的代码如下

```
SELECT pjPROJECTCODE,CONCAT(pjPROJECTCODE,'::',pjDESCRIPTION) as full 
FROM su_project 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T05:58:12.493

你要[`CONCAT_WS`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat-ws)

与分隔符联系允许您指定如何连接字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:01:41.047

尝试

```
CONCAT_WS('::', pjPROJECTCODE, pjDESCRIPTION) 
```

见[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat-ws](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat-ws)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T06:07:52.933

```
SELECT pjPROJECTCODE,CONCAT(RPAD(pjPROJECTCODE,20,' '),'::',pjDESCRIPTION) as full 
FROM su_project 
```

使用 RPAD。

# android - Android - 日期选择器 - 获取值

> ID：16140306
> 
> 赞同：1
> 
> 时间：2013-04-22T05:55:32.977
> 
> 标签：android, datepicker

我在我的活动中使用 DatePicker 对话框供用户选择日期。我想要做的是在 textView 中显示选定的日期。任何人都可以帮助我如何获取选定的日期，然后相应地显示它。提前致谢！

以下是我用来实现 DatePicker 对话框的代码：

```
public static class DatePickerFragment extends DialogFragment
implements DatePickerDialog.OnDateSetListener {

        @Override
            public Dialog onCreateDialog(Bundle savedInstanceState) {
                // Use the current date as the default date in the picker
                final Calendar c = Calendar.getInstance();
                    int year = c.get(Calendar.YEAR);
                    int month = c.get(Calendar.MONTH);
                    int day = c.get(Calendar.DAY_OF_MONTH);

                    // Create a new instance of DatePickerDialog and return it
                    return new DatePickerDialog(getActivity(), this, year, month, day);
            }

            public void onDateSet(DatePicker view, int yyyy, int mm, int dd) {
            // Do something with the date chosen by the user

            }
}

public void showDatePickerDialog(View v) {
    DialogFragment newFragment = new DatePickerFragment();
    newFragment.show(getFragmentManager(), "datePicker");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:14:25.263

在 onDateSet 方法中，

```
String cuurent_date = String.valueOf(c.get(Calendar.DAY_OF_MONTH))
            + "/" + String.valueOf(c.get(Calendar.MONTH) + 1) + "/"
            + String.valueOf(c.get(Calendar.YEAR)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T08:31:32.280

在您的活动中实现一个侦听器接口并将其传递给 DatePickerFragment。然后通过调用它的方法来触发监听器。它在这里描述：http: [//developer.android.com/guide/topics/ui/dialogs.html#PassingEvents](http://developer.android.com/guide/topics/ui/dialogs.html#PassingEvents)

# blackberry-10 - 我在哪里可以下载黑莓 Q10 模拟器

> ID：16140307
> 
> 赞同：0
> 
> 时间：2013-04-22T05:55:33.177
> 
> 标签：blackberry-10, blackberry-android

我在哪里可以下载黑莓 Q 10 模拟器，没有明确的链接指定下载 Q10 的模拟器。

我遇到的唯一下载链接是

[http://developer.blackberry.com/native/downloads/bb10allsimversions/](http://developer.blackberry.com/native/downloads/bb10allsimversions/)

AnyIdea 可以在哪里下载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:40:42.217

您可以从这里下载 Q10 OS 10.1 模拟器：[https ://developer.blackberry.com/cascades/download/](https://developer.blackberry.com/cascades/download/)

# ios - 需要有关视图向上跳跃 20 像素的常见问题的帮助

> ID：16140311
> 
> 赞同：0
> 
> 时间：2013-04-22T05:55:54.990
> 
> 标签：ios, objective-c, uiview

很多人问关于视图跳跃 20px 的问题，但仍然不清楚为什么会发生，很多人说要设置`CGRect`调整这个问题，但这不是一个合适的解决方案。

这是我的情况，我所做的是：

在我的 ViewController.xib 文件中，我拖放了另一个`UIView`并在 ViewComreoller.h 文件中创建了它`@property (strong, nonatomic) IBOutlet UIView *settingsView;`

在 ViewController.m 文件中

```
- (IBAction)settings:(id)sender {

    [UIView transitionFromView:[self view] toView:[self settingsView] duration:1.0 options:UIViewAnimationOptionTransitionCrossDissolve completion:^(BOOL finished) {}];
}

- (IBAction)back:(id)sender {

    [UIView transitionFromView:[self settingsView] toView:[self view] duration:1.0 options:UIViewAnimationOptionTransitionCrossDissolve completion:^(BOOL finished) {}];
} 
```

就这样。

当`settingsView`它出现时，它向上跳了 20px。

两个视图的宽度和高度相同，而我所做的一切`transitionFromView:`，没有自定义代码，但仍然跳起来，为什么？

请就这个问题提供帮助并清除我的概念，为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:02:30.457

检查您的状态栏是否还在？20px 可能是顶部状态栏的问题。

有可能在 xib 中您启用了状态栏，而在项目中您可能不会显示状态栏。您可以通过编辑 info.plist 来完全避免状态栏。将带有键“状态栏最初隐藏”的行添加为 YES。

# bower - Bower 安装错误，“git 的状态代码：127”

> ID：16140320
> 
> 赞同：1
> 
> 时间：2013-04-22T05:56:33.123
> 
> 标签：bower

我在 Windows 8 上使用 Bower，每当我尝试安装软件包时都会出错。在这种情况下，我正在尝试安装 Twitter Bootstrap。所以我跑...

```
bower install bootstrap 
```

...我收到此错误...

```
bower cloning git://github.com/twitter/bootstrap.git
bower cached git://github.com/twitter/bootstrap.git
bower fetching bootstrap
bower error status code of git: 127

There were errors, here's a summary of them:
- bootstrap status code of git: 127
CreateProcessW: The system cannot find the file specified. 
```

我正在使用 Git 版本 1.7.9.mysgit.0 （通过[Rails Installer 安装](http://railsinstaller.org/)）。

是什么导致了这个错误，我该如何解决？

为了进一步隔离这个问题，我在 Cloud9 IDE 上成功运行了这个命令

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T09:29:20.830

您是否尝试过制作`bower cache-clean`，然后`bower install bootstrap`在这里为 Windows Server 2008 工作。

# android - 如何在android中找到与折线的距离？

> ID：16140328
> 
> 赞同：2
> 
> 时间：2013-04-22T05:57:15.453
> 
> 标签：android, google-maps-android-api-2

如何使用地图 apiV2 在 android 的谷歌地图中找到与折线的距离？当用户开始从一个位置移动到另一个位置时，我想找到距离。[当您知道 java 中的经度和纬度时，](https://stackoverflow.com/questions/837872/calculate-distance-in-meters-when-you-know-longitude-and-latitude-in-java)我使用了以米为单位的计算距离，但它需要两个纬度之间的距离，而不是根据用户在地图中的移动。如果有人知道如何使用折线求距离，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-21T06:57:48.827

要查找与折线的距离，您可以使用包含一种方法 distanceToLine 的 PolyUtil 类。implementation'com.google.maps.android:android-maps-utils:0.5+' 在你的 build.gradle 中添加这个库。有关更多信息，您可以使用 Google 地图实用程序类

[https://developers.google.com/maps/documentation/android-api/utility/](https://developers.google.com/maps/documentation/android-api/utility/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:07:10.157

为此，您需要使用线程。在那里，您应该定期找到当前坐标和上次保存的坐标之间的距离。

原始代码：

```
Coordinate current, last;
Distance D = 0;

while (true) {
  wait(10000);
  last = current;
  current = getNewCordinate;
  d = D + distFrom(current, last);
} 
```

这个逻辑会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-12T13:33:50.187

根据[Gevaria Purva](https://stackoverflow.com/a/37937476/245495)给出的答案，我在 PolyUtil 上找到了一个更合适的方法，名为[isLocationOnPath](http://googlemaps.github.io/android-maps-utils/javadoc/com/google/maps/android/PolyUtil.html#isLocationOnPath-LatLng-java.util.List-boolean-double-)。对于您最有可能要传递的第三个参数`true`。

# android - Android 应用内计费 v3 错误

> ID：16140334
> 
> 赞同：1
> 
> 时间：2013-04-22T05:57:32.697
> 
> 标签：android, testing, in-app

我在应用计费 v3 中实现，它适用于 android 测试 product_id。但是当我在我的开发者帐户中创建自己的 product_id 时。比将我的 sigend apk 作为草稿上传并在设备上安装签名的 apk 并尝试运行该应用程序，但我不断收到“从服务器检索信息时出错。[RPC:S-7:AEC-0]”。即使在 2 天后，此问题仍然存在。任何人都可以为此提供解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T04:23:22.537

像这样尝试，即使我以前也遇到过

第一种方法 按照以下步骤。

RPC:AEC:0 错误被称为 CPU/RAM/Device/Identity 故障。

摆脱此错误的唯一可能方法是，

转到设置>应用程序> Play商店>清除数据和清除缓存。

转到帐户>谷歌>删除帐户。

重启设备。

再次设置>帐户>谷歌>登录。

如果失败，

在计算机（不是平板电脑或手机）上登录您的 Google 电子钱包，点击付款方式，然后进行编辑以编辑信息。

# facebook - 即使授予了 publish_stream，是否也需要访问令牌？

> ID：16140335
> 
> 赞同：0
> 
> 时间：2013-04-22T05:57:42.803
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, facebook-opengraph

我是 facebook opengraph 和创建 facebook 应用程序的新手。我在 facebook 中开发了一个应用程序，并按照 opengraph 教程插入了必要的元标记。私下测试应用程序，已授予“publish_stream”权限。即使用户已授予 publish_stream 权限，是否还需要获取用户访问令牌？如何获得用户令牌？

```
function Visit_Link()
{   
    $config = array();
    $config['appId'] = 'APP ID';
    $config['secret'] = 'APP SECRET';

    $facebook = new Facebook($config);
    $response = $facebook->api(
    'me/namespace:action',
    'POST',
    array(
            'website' => "WEBSITE",

        )
        );

    print_r($response);
} 
```

显示的错误是`Fatal error: Uncaught OAuthException: An active access token must be used to query information about the current user. thrown in`

PS 我正在使用 fb php sdk

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:04:24.560

是的，您确实需要访问令牌，最好是长寿的（持续 60 天）。如果您使用 graph api explorer 令牌测试您的应用程序，则在 30 分钟左右后您总是需要一个新的，因为它是短暂的。使用[它](https://developers.facebook.com/docs/howtos/login/server-side-login/)来登录您的用户，因为它总是会返回一个长期存在的访问令牌，您可以将其存储在数据库中以供离线访问（facebook 弃用并引入了长期访问令牌）。

# android - Android - 用户注册或登录后如何在不重新启动应用程序的情况下将注册 ID 发送到服务器

> ID：16140336
> 
> 赞同：2
> 
> 时间：2013-04-22T05:57:48.353
> 
> 标签：android, android-layout, android-webview

我有一个带有`webview`. 我的网站允许注册和登录。如果用户是第一次安装应用，应用会为设备注册`GCM`. 但是，当他们实际登录该站点时，gcm_id 不会发送到服务器，因为我将它`webView.load_url`作为参数附加到该参数，该参数仅在您首次启动应用程序时运行。

如何重新加载或发送 gcm_id 而无需等待他们第二次运行应用程序？我不希望它是连续的，如果我可以帮助它，它会在每个页面加载时附加一个 url。我看过其他例子，但没有一个对我的问题有帮助。顺便说一句，如果这很重要，我的服务器会运行 php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:50:23.687

我发现了一个非常好的类，如果您需要通过 http 或 https 使用两行代码发送包括身份验证在内的 http get 请求。

[EasyHttpClient](https://github.com/uscheller/EasyHttpClient/blob/master/src/EasyHttpClient.java)

非常易于使用，您可以像这样使用它。

```
EasyHttpClient client = new EasyHttpClient();
System.out.println(client.get("https://encrypted.google.com/")); 
```

所以我想出的是，当他们第一次启动应用程序时，设备最初注册时会设置一个标志。然后，只要设置了该标志，它就会使用此 http 客户端定期发送请求来注册它，如果成功，它将使标志为空，不再尝试。由于该标志仅在尚未创建注册 ID 时设置，因此除非他们将其卸载，否则将永远不会再次设置它。目前看来还不错。我必须这样做，因为在他们登录之前他们是匿名的，而且我的网站无法注册匿名用户。只是想其他人可能想知道，因为我发现了各种乏味的方法，但 EasyHttpClient 是我找到的最好的方法。

顺便说一句，我这样做的原因是因为如果他们使用该应用程序一次并在那之后收到一条消息，推送通知将不起作用，所以我必须在他们第一次使用它时让它在我的服务器上注册。

# java - 如何使用 Selenium WebDriver 和 Java 向下滚动

> ID：16140337
> 
> 赞同：15
> 
> 时间：2013-04-22T05:57:50.800
> 
> 标签：java, selenium, selenium-webdriver

我想向下滚动我的网页并使用此代码滚动页面，但它不起作用

```
public ViewBasketSentToMePageObject viewSlideShare() throws InterruptedException {

    Thread.sleep(500l);

    Actions action1 =new Actions(getDriver());
    action1.keyDown(Keys.CONTROL).sendKeys(String.valueOf('\u0030')).build().perform();

    List<WebElement> function = getDriver().findElements(By.xpath("//a [@ng-click='onItemClick()']"));
    function.get(13).findElement(By.xpath("//img [@ng-src='resources/images/slideshare-icon-small.png']")).click();

    return getFactory().create(ViewBasketSentToMePageObject.class);
} 
```

寻求帮助

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-22T06:07:07.720

尝试使用下面的简单 java 脚本，您可以滚动页面。

```
JavascriptExecutor jsx = (JavascriptExecutor)driver;
jsx.executeScript("window.scrollBy(0,450)", ""); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-01T08:21:31.953

向下滚动：

```
WebDriver driver = new FirefoxDriver();
JavascriptExecutor jse = (JavascriptExecutor)driver;
jse.executeScript("scroll(0, 250);"); 
```

或者，您可以执行以下操作：

```
jse.executeScript("window.scrollBy(0,250)", ""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-13T10:49:11.083

滚动直到找到`WebElement`

尝试这个：

```
((JavascriptExecutor) driver).executeScript("arguments[0].scrollIntoView(true);", your_WebElement); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-18T10:31:11.610

```
WebElement element = driver.findElement(By.xpath("//input [@id='giveid']"));

((JavascriptExecutor) driver).executeScript("arguments[0].scrollIntoView();", element); 
```

用这个。这将帮助您在特定元素处向下滚动。我什至在我的网站上测试过。它工作正常。

# c# - 无法在 VS 2012 上运行 SpecFlow

> ID：16140342
> 
> 赞同：0
> 
> 时间：2013-04-22T05:58:09.837
> 
> 标签：c#

我刚刚从 VS 2010 更新到 VS 2012。我已经安装了 specFlow 1.9 和 NuGet 包。我还通过管理 NuGet 包安装了 specflow 包。

还将我的 app.config 配置为 Ms 测试。添加了所有必需的 dll 并生成了功能文件以及我的 .cs 文件。但我仍然无法运行或调试我的 specFlow 测试。虽然相同的设置适用于 VS 2010。按 F5 按钮也不起作用。是否有我在这里遗漏的任何步骤或在运行测试之前需要完成的任何设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T09:25:23.673

我有同样的问题。在 SpecFlow 谷歌组上找到这篇文章。将 ReSharper 设置为测试运行工具使它对我有用。我在 Visual Studio 2013 上运行 SpecFlow 1.9.3.1。

[https://groups.google.com/forum/#!msg/specflow/sb38tqgDaq4/pAeprtPu_PcJ](https://groups.google.com/forum/#!msg/specflow/sb38tqgDaq4/pAeprtPu_PcJ)

# jquery - jQuery 使用 Ajax 动态创建节点

> ID：16140348
> 
> 赞同：0
> 
> 时间：2013-04-22T05:58:24.540
> 
> 标签：jquery, asp.net, asp.net-ajax

在这里，我正在动态创建一个 jQuery 'accordion' 列表并将 'id' 分配给手风琴内的每个 'p' 部分（参见以 "$.get("/DataPage.aspx",......" 开头的行下面）。问题是我无法通过鼠标单击检索每个“p”的“id”。当我用静态数据生成手风琴时它正在工作。无法弄清楚问题是否有效与 $.get() 或其他东西。

```
 <html>
        <head>
            <title>Start Here</title>
            <link rel="stylesheet" type="text/css" href="css/mycss.css"/>
            <script type="text/javascript" src="jquery-1.9.1.min.js"></script>
            <script type="text/javascript" src="jquery-ui.custom.js"></script>    
            <link rel="stylesheet" type="text/css" href="jquery-ui-1.10.2.custom.css" />

        </head>
        <body>
            <div id="HeaderDiv" style="overflow:scroll">Product Listing</div>
            <div id="ParentContainer">
                <div id="ParentDiv" class="container" style="max-width:300px;"></div>
                <div class="container" style="max-width:900px;min-height:600px; background-                      color:azure;">            
                </div>
            </div>

      <script type="text/javascript">
       $(document).ready(function () {            
         $.get("/DataPage.aspx", { "type": "category" }, function (data) {
            /* 'data' is just a string with words separated by '#' character */
            var str = "";                
            var strarray = data.split("#"); 
            var len = strarray.length;                
            for (var i = 0; i < len; ++i) {                                 
                $("#ParentDiv").append('<p id="' + strarray[i] + '">' + strarray[i] + '</p>' + '<div id="div' + strarray[i] + '"><h6>something</h6></div>');
                str += strarray[i];
            }
            alert(str);
            $("#ParentDiv").accordion({
                collapsible: true, active: false, heightStyle: "content"
            });
        });             

        $("*", document.body).click(function (e) {
            e.stopPropagation();
            var domElem = $(this).get(0);
            $("#HeaderDiv").text(domElem.getAttribute("id"));
        });   
    });
    </script>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:02:01.537

这是您在使用异步 Ajax 调用时遇到的“臭名昭著”的竞争状况。

请记住这一点：`$.get()`将启动，然后将在“后台”运行，而您的 Javascript 代码的其余部分继续运行。因此处理程序的绑定`click()`将发生`before`，新元素将插入到回调中`$.get`

解决方法：将`click()`handler的绑定移动到回调里面`$.get`

```
 $(document).ready(function () {            
     $.get("/DataPage.aspx", { "type": "category" }, function (data) {
        /* 'data' is just a string with words separated by '#' character */
        var str = "";                
        var strarray = data.split("#"); 
        var len = strarray.length;                
        for (var i = 0; i < len; ++i) {                                 
            $("#ParentDiv").append('<p id="' + strarray[i] + '">' + strarray[i] + '</p>' + '<div id="div' + strarray[i] + '"><h6>something</h6></div>');
            str += strarray[i];
        }
        alert(str);
        $("#ParentDiv").accordion({
            collapsible: true, active: false, heightStyle: "content"
        });
        $("*", document.body).click(function (e) {
            e.stopPropagation();
            var domElem = $(this).get(0);
            $("#HeaderDiv").text(domElem.getAttribute("id"));
        });   
    });             

}); 
```

# ruby - 在 Ruby 中对哈希数组进行排序（按存在可选键 + 值排序）

> ID：16140351
> 
> 赞同：2
> 
> 时间：2013-04-22T05:58:41.250
> 
> 标签：ruby, arrays, hash, sorting

得到一个 Ruby 数组，如：

```
[  { "lat" => 123, "lon" => 456 },
   { "lat" => 789, "lon" => 102, "col" => "red" },
   { "lat" => 442, "lon" => 342 } ] 
```

我想对其进行排序，以便将**任何**`col`作为键的散列推到数组的顶部或底部。

无法找出正确的`sort_by`语法/语义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T06:08:17.757

```
a = [  { "lat" => 123, "lon" => 456 },
   { "lat" => 789, "lon" => 102, "col" => "red" },
   { "lat" => 442, "lon" => 342 } ] 
```

如果你想把它们放在顶部，那么

```
a.partition{|h| h.key?("col")}.flatten 
```

如果你想把它们放在底部，那么按照铁皮人的建议，

```
a.partition{|h| h.key?("col").!}.flatten 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:16:35.540

我一直喜欢的更实用的方法：

```
require 'pp'

a = [ {:foo => "aa","col" => "bar"}, { "lat" => 123, "lon" => 456 },
   { "lat" => 789, "lon" => 102, "col" => "red" },
   { "lat" => 442, "lon" => 342 } ]

arr = a.group_by{|h| h.key?("col")}

pp arr[false] + arr[true] # on the bottom 
```

***输出：***

```
[{"lat"=>123, "lon"=>456},
 {"lat"=>442, "lon"=>342},
 {:foo=>"aa", "col"=>"bar"},
 {"lat"=>789, "lon"=>102, "col"=>"red"}] 
```

* * *

```
pp arr[true] + arr[false] #on the top 
```

***输出：***

```
[{:foo=>"aa", "col"=>"bar"},
 {"lat"=>789, "lon"=>102, "col"=>"red"},
 {"lat"=>123, "lon"=>456},
 {"lat"=>442, "lon"=>342}] 
```

# sql-server-2008 - 插入与同一表中的现有记录相同的多条新记录，其中一列值已更改

> ID：16140356
> 
> 赞同：0
> 
> 时间：2013-04-22T05:58:56.747
> 
> 标签：sql-server-2008, stored-procedures

我有一个表，我在其中存储有关属性的租赁合同的记录。记录的存储方式如下：

```
ID|PropertName|ContractStartDate|ContractEndDate|Status
 1| pqr     | 5/17/2012       | 5/17/2013     |leased
 2| xyz     | 10/25/2012      | 10/25/2013    |leased
 3| lmn     | 4/21/2012       | 4/21/2013     |leased   
 4| efg     | 4/22/2012       | 4/22/2013     |leased 
```

现在我想编写存储过程，它将检查`ContractEndDate`今天的日期，如果它已过期，则在数据库中添加新记录，其值与以前的记录相同，但状态为过期。

这就是我的桌子之后的样子：

```
 ID|PropertName|ContractStartDate|ContractEndDate|Status
     1|   pqr     | 5/17/2012       | 5/17/2013     |leased
     2|   xyz     | 10/25/2012      | 10/25/2013    |leased
     3|   lmn     | 4/21/2012       | 4/21/2013     |leased   
     4|   efg     | 4/22/2012       | 4/22/2013     |leased
     5|   lmn     | 4/21/2012       | 4/21/2013     |expired
     6|   efg     | 4/22/2012       | 4/22/2013     |expired 
```

我尝试关注这篇文章：[SQL to copy row and change 1 column value](http://forums.asp.net/t/1285371.aspx/1)但我收到选择子查询的语法错误。

我可以使用光标和触发器解决这个问题吗？我对游标和触发器知之甚少，因此将不胜感激任何样本。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:29:49.773

```
DECLARE Cur CURSOR FOR
SELECT ID,PropertName,ContractStartDate,ContractEndDate,Status From TABLE_NAME

Open Cur
Declare @Id AS INT
DECLARE @PropertName AS VarChar(Max)
DECLARE @ContractStartDate AS DATETIME 
DECLARE @ContractEndDate AS DATETIME 
DECLARE @Status AS Varchar(80)
Fetch Next from Cur INTO @Id,@PropertName,@ContractStartDate,@ContractEndDate,@Status

While(@@fetch_status=0)
BEGIN
    IF(GETDATE() > @ContractEndDate)
    BEGIN
        DECLARE @newID bigint 
        set @newID = (select max(ID) FROM TABLE_NAME)
        INSERT INTO TABLE_NAME(ID,PropertName,ContractStartDate,ContractEndDate,Status)
        VALUES (@newID+1,@PropertName,@ContractStartDate,@ContractEndDate,'expired' )
        Fetch Next from Cur INTO @Id,@PropertName,@ContractStartDate,@ContractEndDate,@Status   
    END
    Fetch Next from Cur INTO @Id,@PropertName,@ContractStartDate,@ContractEndDate,@Status   
END

Close Cur
Deallocate Cur 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:14:07.417

你可以用光标解决这个问题。

```
Step 1:  Open cursor with the select statement.(select * from table where ContractEndDate = sysdate)
Step 2: Loop the cursor
        Insert the values as 
        insert into table (ID,PropertName,ContractStartDate ,ContractEndDate,Status) values (newid, cursorVariable.PropertName,... , 'expired');

Step 3: End of the loop / with in the loop commit the transaction. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T06:55:37.757

你可以简单`INSERT`...... `SELECT`假设你`ID`是一`IDENTITY`列。

```
INSERT INTO TABLE1(PropertName,ContractStartDate,ContractEndDate,Status)
SELECT PropertName, ContractStartDate, ContractEndDate, 'expired' 
FROM TABLE1 
WHERE GETDATE() > CONTRACTENDDATE 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!3/90edf/2)

# xcode - 在 AppDelegate 中为两个视图控制器使用和更新 NSMutableString

> ID：16140357
> 
> 赞同：1
> 
> 时间：2013-04-22T05:58:57.363
> 
> 标签：xcode, variables, viewcontroller, appdelegate

我在 AppDelegate.h 文件中定义了一个 NSMutableString。

```
//AppDelegate.h
@interface AppDelegate : UIResponder <UIApplicationDelegate>{
  @public
    NSMutableString *nidForDetailDisplay;
} 
```

然后我在我的 ViewController.m 文件中设置这个字符串。我正在存储一个字符串（nidForDetailDisplay）以从表视图传递到详细视图。

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

  rowNumber = indexPath.row;

  AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
      // this is where I set the string to a string of text
    appDelegate->theNidForDetailDisplay = [arrayOfNids objectAtIndex:rowNumber];

  UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
  UIViewController *detailViewController;

  DetailViewController *detail = [self.storyboard instantiateViewControllerWithIdentifier:@"detail"];

  [self.navigationController pushViewController:detail animated:YES];

 } 
```

在 ViewController 中，当我记录 theNidForDetailDisplay 时，我得到了正确的字符串。

接下来，我尝试在后续的 DetailViewController 中访问这个更新的 NSMutableString (nidForDetailDisplay)

```
-(void)viewWillAppear:(BOOL)animated {

[super viewWillAppear:animated];

 NSMutableString *storyid;

 AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];        
 appDelegate->theNidOnDetailDisplay = storyid;
 } 
```

但是，当我打印字符串 (storyid) 或 (theNidOnDetailDisplay) 时，它们都返回 null。

我在这里错过了什么吗？我应该使用实例变量吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:04:22.420

不要使用您的 AppDelegate 来传递数据。将属性添加到详细视图控制器并将值分配给该属性。

上`DetailViewController`：

```
@property (nonatomic) NSMutableString * nid; 
```

在您呈现之前分配它：

```
DetailViewController *detail = [self.storyboard instantiateViewControllerWithIdentifier:@"detail"];
detail.nid = [arrayOfNids objectAtIndex:rowNumber];
[self.navigationController pushViewController:detail animated:YES]; 
```

# gridview - 如何在网格视图中排列图像？

> ID：16140358
> 
> 赞同：2
> 
> 时间：2013-04-22T05:58:57.613
> 
> 标签：gridview, listbox, windows-phone-8

我想在网格视图中订购图像。我已经使用列表框并成功添加了图像。它的显示如下

![在此处输入图像描述](https://i.stack.imgur.com/QNJ71.png)

但我希望这些图像显示在网格视图中。可能与否。

请帮助我....提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T10:18:12.407

您应该将`LongListSelector`控制用于以下目的：

将命名空间添加到 XAML：

```
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone" 
```

然后将`LongListSelector`放在页面上并进行设置：

```
<phone:LongListSelector ItemsSource="{Binding IsoStorePics}"  LayoutMode="Grid" GridCellSize="60, 100">
    <phone:LongListSelector.ItemTemplate>
        <DataTemplate>
            <Image Source="hello.jpg" Margin="5"/>
        </DataTemplate>
    </phone:LongListSelector.ItemTemplate>
</phone:LongListSelector> 
```

注意`LayoutMode`和`GridCellSize`属性。如果设置`LayoutMode`为`Grid`，则需要指定`GridCellSize`，否则会出现异常。

有关您可以对`LongListSelector`网格布局执行哪些操作的更多示例，请参阅Microsoft 的[此示例应用程序](http://code.msdn.microsoft.com/wpapps/PhotoHub-Windows-Phone-8-fd7a1093)。

# java - 当文本超过文本大小时如何显示点？

> ID：16140360
> 
> 赞同：-1
> 
> 时间：2013-04-22T05:59:08.570
> 
> 标签：java, swt

当 a 的内容`Text`超过 的宽度时`Text`，我想`...`在文本字段的末尾显示点 ( )。

我尝试使用 a`ModifyListener`没有成功。对此的任何帮助将不胜感激。

```
 @Override
        public void modifyText(ModifyEvent e) {
            // TODO Auto-generated method stub

           if (wakeupPatternText.getText().length()>=12) {

               String wakeuppattern=wakeupPatternText.getText(0, 11);

               String dot="...";

              String wakeup=wakeuppattern+dot;
 wakeupPatternText.setText(wakeup);

        }      

        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:03:50.803

这应该做你想要的：

```
private static String textContent = "";

public static void main(String[] args)
{
    Display display = new Display();
    Shell shell = new Shell(display);
    shell.setLayout(new FillLayout(SWT.VERTICAL));

    Text text = new Text(shell, SWT.BORDER);

    text.addListener(SWT.FocusOut, new Listener()
    {
        @Override
        public void handleEvent(Event e)
        {
            Text text = (Text) e.widget;
            textContent = text.getText();

            text.setText(textContent.substring(0, Math.min(10, textContent.length())) + "...");
        }
    });

    text.addListener(SWT.FocusIn, new Listener()
    {
        @Override
        public void handleEvent(Event e)
        {
            Text text = (Text) e.widget;

            text.setText(textContent);
        }
    });

    Button button = new Button(shell, SWT.PUSH);
    button.setText("Lose focus");

    shell.pack();
    shell.open();
    while (!shell.isDisposed())
    {
        if (!display.readAndDispatch())
            display.sleep();
    }
    display.dispose();
} 
```

* * *

`String`它侦听焦点事件并在它太长时截断可见事件。

这是它的外观：

重点：

![在此处输入图像描述](https://i.stack.imgur.com/nk5WV.png)

没有焦点：

![在此处输入图像描述](https://i.stack.imgur.com/qjJDc.png)

* * *

您的代码无法正常工作的原因如下：当您`wakeupPatternText.setText(wakeup);`从侦听器内部调用时`VerifyListener`，侦听器本身会被再次递归调用。

# android - 如何仅在Android中将相机拍摄的图像和视频保存在应用程序内存中？

> ID：16140361
> 
> 赞同：1
> 
> 时间：2013-04-22T05:59:19.857
> 
> 标签：android, video-capture, android-gallery, android-image

我正在做一个项目，我需要将图像和视频仅保存在应用程序内部存储器中（而不是在 SDCard 或设备库中）。我正在使用下面的代码。但这也将图像/视频保存到设备库。请指教。

```
Bitmap bm;
        View v=imageview;
        v.setDrawingCacheEnabled(true);
        bm=Bitmap.createBitmap(v.getDrawingCache());
        v.setDrawingCacheEnabled(false);
        String fileName="image.png";        
        try 
        {
            FileOutputStream fOut=openFileOutput(fileName, MODE_PRIVATE);
            bm.compress(Bitmap.CompressFormat.PNG, 100, fOut);

        }
        catch (Exception e) 
        {
            e.printStackTrace();
        } 
```

我想将图像和视频设为私密和安全。所以我想将它们保存在应用程序内部存储器中。所以没有其他应用程序可以访问它。请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T06:11:54.060

将图像存储在内存中，它将图像存储在内部图像文件夹中。

```
 Uri uriSavedImage;

                // the temp folder to start the camera activity with
                    String fileName = "image_" + String.valueOf(imageNum)+ ".png";
                    path = getDir("images", Context.MODE_WORLD_WRITEABLE).getPath() + "/" + fileName;
                    // start the camera activity
                    file = new File(path);
                    while (file.exists()) {
                        imageNum++;
                        fileName = "image_" + String.valueOf(imageNum)+ ".png";     
                        path = getDir("images_pho",Context.MODE_WORLD_WRITEABLE).getPath()+ "/" + fileName;
                        file = new File(path);
                    }
                    Uri ur = Uri.parse(file.toString());
                    uriSavedImage = Uri.fromFile(file);

            Intent imageIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            imageIntent.putExtra(MediaStore.EXTRA_OUTPUT, uriSavedImage);

            OutputStream imageFileOS;
            try {
                imageFileOS = getContentResolver().openOutputStream(uriSavedImage);
                imageFileOS.write(data);
                imageFileOS.flush();
                imageFileOS.close();

            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } 
```

希望它有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:17:02.607

正如我告诉你的，您可以将相机拍摄的照片存储在内部存储器中，然后您可以立即从图库中删除拍摄的图像，`getContentResolver().delete(uri, null, null);`或者您可以使用它：

```
if (takenpicturefile.exists())
        if (takenpicturefile.delete())
            Log.d("tag","filedeleted"); 
```

有关更多详细信息，您可能需要参考[此](https://stackoverflow.com/questions/6390163/deleting-a-gallery-image-after-camera-intent-photo-taken)。希望能帮助到你。

# ruby-on-rails - Mongoid 观察者根本不开火（rails 3.2.13，mongoid 3.1.3）

> ID：16140362
> 
> 赞同：2
> 
> 时间：2013-04-22T05:59:34.123
> 
> 标签：ruby-on-rails, mongoid

我想我遵循了如何让观察者准确的描述，模型页面：

```
class Page
  include Mongoid::Document
  field :title, type: String
  field :content, type: String
end 
```

我有一个观察者（app/observers/page_observer.rb）：

```
class PageObserver < Mongoid::Observer
  observe :page # just to be sure!

  def initialize
    puts "Page observer initialized"
  end
  def after_update page
    puts "After update page "+page
  end
end 
```

我将它添加到 config/application.rb：

```
config.mongoid.observers = :page_observer 
```

然后当我这样做时`rails c`，我得到：

```
$ rails c
Page observer initialized
Loading development environment (Rails 3.2.13)
1.9.3p194 :005 > p = Page.first
 => #<Page _id: 5174ce01681167de23000001, title: "Hi", content: nil> 
1.9.3p194 :006 > p.title = "Hi1"
 => "Hi1" 
1.9.3p194 :007 > p.save
 => true 
```

我不应该看到“更新后页面”`p.save`吗？

这个简化示例的完整代码：[https ://github.com/dts/mongoid_observer_test](https://github.com/dts/mongoid_observer_test)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T21:15:40.807

Rails 模型在需要时才会加载，但是您不能在尚未加载的类上注册观察者，因此您需要先强制加载 Page 类。在加载所有其他文件后尝试添加`require File.expand_path('../../app/models/article', __FILE__)`， 即在`application.rb``if defined?(Bundler) ... end`

# javascript - socket.io 的“on”方法是加法器还是设置器？

> ID：16140364
> 
> 赞同：0
> 
> 时间：2013-04-22T05:59:42.533
> 
> 标签：javascript, socket.io, observer-pattern

在 socket.io 中，是否会使用“on”两次替换旧的注册，或者事件会触发两个监听器？一般而言，它与javascript“on”方法的行为是否一致？没有socket.io文档是有原因的吗？

```
var socket = io.connect("host:port")
socket.on('data', function(data) {
  console.log('listener1');
}

socket.on('data', function(data) {
  console.log('listener2');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:09:50.517

JavaScript 没有`on`方法。库只是将其作为事件发射器/发布-订阅模式的一部分来实现，其中代码“侦听”其他代码。

不，它不会取代现有的注册。它们被添加到“队列”中。可以这样想：监听数据到达的不仅仅是一段代码。可能有数百条线路在监听相同的数据。

# extjs - 搜索栏的搜索图标在煎茶中消失

> ID：16140368
> 
> 赞同：0
> 
> 时间：2013-04-22T06:00:12.600
> 
> 标签：extjs, sencha-touch, sencha-touch-2

当导航到搜索字段的新视图搜索图标在 sencha touch 中消失时，搜索字段也缩小了一点，因为我添加了一个额外的按钮。如何防止搜索字段缩小或如何维护搜索字段图标？

```
 Ext.define('Proj.view.Home', {
    extend: 'Ext.navigation.View',
    xtype: 'homeTabItem',
    id: 'home',

this.add(
            {
                xtype: 'toolbar',
                id: 'SeachToolbar',
                docked: 'top',
               items: [
                   {
                       xtype: 'searchfield',
                       align: 'left',
                       width:200,
                       placeHolder: 'Search'

                   },

                   {
                       id : 'searchButton_h',
                       xtype : 'button',
                       iconCls : 'search',
                       iconMask : true,
                       align : 'left',
                       scope:this,
                       handler:this.onSearchKeyUp
                   },

                   {

                       id : 'homeSelect',
                       xtype: 'selectfield',
                       hidden:true; 
                       iconMask : true,
                       align : 'right',
                       width : '20%',
                   }
    ]}); 
```

在推送视图中，我使“homeSelect”可见，并且我的 serchfield 的放大镜图标消失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T22:41:39.703

一个

```
var PnlQuejaReclamo = Ext.create('Ext.panel.Panel', {
                    id: 'PnlQuejaReclamo',
                    title: 'Quejas Reclamos',
                    layout: 'border',
                    tbar: [{
                            width: 200,
                            id:'Reclamo',
                            emptyText: 'Buscar...',
                            xtype: 'searchfield',
                            store: StoreQuejaReclamo,
                            params: {start: 0, limit: 100}
                        }, '->', {
                            itemId: 'create',
                            text: 'Agregar',
                            iconCls: 'agregar',
                            hrefTarget: 'quejareclamo/create',
                            handler: function(btn) {
                                btn.TipoIndicador = 3;
                                btn.Titulo = ' Queja Reclamo';
                                new SistIntegral.FrmQR.QuejaReclamo().Window(btn);
                            }
                        }, '-', {
                            itemId: 'edit',
                            text: 'Editar',
                            iconCls: 'editar',
                            hrefTarget: 'quejareclamo/edit/',
                            handler: function(btn) {
                                btn.TipoIndicador = 3;
                                btn.Titulo = ' Queja Reclamo';
                                new SistIntegral.FrmQR.QuejaReclamo().Window(btn);
                            }
                        }, '-', {
                            itemId: 'eliminar',
                            text: 'Eliminar',
                            iconCls: 'eliminar',
                            handler: function() {
                            },
                            disabled: true
                        }
                    ],
                    items: [gridQuejaReclamo, PnlDetalles],
                    closable: false
                }); 
```

# css - 使用 Twitter Bootstrap 添加 CSS 规则

> ID：16140369
> 
> 赞同：1
> 
> 时间：2013-04-22T06:00:13.203
> 
> 标签：css, jsp

我不知道如何使用 CSS。所以我在这里问。我正在创建一个 JSP 页面。我使用 Twitter Bootstrap 在我的 JSP 页面中添加了两个表。我需要为两个表添加不同的对齐方式。由于我使用 bootsrap 两个表具有相同的对齐方式。

这是我的代码

```
<div>
<table class="table table-bordered source">
//table 1 contents
</table>
</div>

<div>
<table class="table table-hover target">
//table 2 contents
</table>
</div> 
```

我想将表 1 的文本居中对齐，表 2 的左对齐。表 2 的标题应该居中，表 2 的边框应该是蓝色的。

所以我尝试了这个 CSS

```
 .table.table-hover.target td {
        text-align: left !important;
    }

    .table.table-hover.target th {
        text-align: right !important;
    }

    .table.table-bordered.source td
    {
        text-align: center !important;
    }
    .table.target
    {
            border-color:blue;
    } 
```

它不工作。当我给

```
.table td
{
    text-align:left !important;
} 
```

它将两个表格内容都向左对齐。我现在不使用 CSS。如何编写 CSS 规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:09:08.337

你可能有这样的事情：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset=utf-8 />
    <title>Your page</title>
    <link href="http://twitter.github.io/bootstrap/assets/css/bootstrap.css" rel="stylesheet" type="text/css" />
    <link href="http://twitter.github.io/bootstrap/assets/css/bootstrap-responsive.css" rel="stylesheet" type="text/css" />
</head>
<body>

    ...

    <script src="http://code.jquery.com/jquery.min.js"></script>
    <script src="http://twitter.github.io/bootstrap/assets/js/bootstrap.js"></script>
</body>
</html> 
```

就在下面`bootstrap-responsive.css`（或者如果你没有使用响应式布局，你甚至不会使用这个文件，女巫就会在`bootstrap.css`调用下面）。

添加一个新文件，如：

```
<link href="/assets/css/application.css" rel="stylesheet" type="text/css" /> 
```

并将所有覆盖规则添加到该文件中，上面的代码将如下所示：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset=utf-8 />
    <title>Your page</title>
    <link href="http://twitter.github.io/bootstrap/assets/css/bootstrap.css" rel="stylesheet" type="text/css" />
    <link href="http://twitter.github.io/bootstrap/assets/css/bootstrap-responsive.css" rel="stylesheet" type="text/css" />
    <link href="/assets/css/application.css" rel="stylesheet" type="text/css" />
</head>
<body>

    ...

    <script src="http://code.jquery.com/jquery.min.js"></script>
    <script src="http://twitter.github.io/bootstrap/assets/js/bootstrap.js"></script>
</body>
</html> 
```

该行`"/assets/css/application.css"`会说您的代码将在该特定路径中，根据您的需要进行更改

**注释：**

请记住评论您的 CSS 规则，以便其他人（甚至您在 6 个月的时间内）会理解您为什么要写这个......在 CSS 中您可以添加评论将其包装`/* ... */`

例如：

```
/* TABLES OVERRIDE: so they look like the main theme */
.table td
{
    text-align:left !important;
} 
```

# java - 在多台服务器上同步 cronjobs

> ID：16140370
> 
> 赞同：1
> 
> 时间：2013-04-22T06:00:17.870
> 
> 标签：java, linux, crontab

我有多个服务器通过 cron-tab 调度在 JAVA 中运行相同的后端进程。

早些时候，我只有一台服务器，用来安排所有作业。这更容易管理。

现在随着服务器数量的增加和在具有相同代码库的所有服务器上运行相同的进程，我想在所有机器上安排相同的 cron 作业。

我遇到了问题，因为如果有一次更改，我必须面对很多麻烦并进行手动更改/更新所有服务器。

谁能告诉我一些从一个共同点管理多台服务器上的调度的方法？是否有任何工具/库/API 等来处理这种情况？

截至目前，我正在所有服务器上更新/复制（使用 SCP）JAR，然后通过单独登录到每个服务器来重新启动所有进程。

到目前为止，我更喜欢如果我不必更改我的 JAVA 代码来管理这个（在日志运行中，我可以想到那个）。

但是，如果我可以创建一个小型 JAVA 应用程序（使用 Quartz）或者甚至是一个 shell 脚本来处理调度，我会去做。

我想明确一点，在所有服务器上更新 JAR 不是我的问题，我正在为此设置构建脚本（ANT）。

我关心的是所有服务器的通用调度代码。

有没有办法在一台服务器上安排作业，在远程服务器上启动作业？如果发生这种情况，我只需要在一台服务器上管理调度。我也不需要担心时钟同步问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:41:54.963

您可以创建一个文本文件，其中包含 crontab 条目，并且当您在每个服务器中部署 jar 文件时，您也可以使用 ant 通过运行命令同时更新 crontab `crontab mycrontab.txt`。

# android - Android Play 商店应用更新

> ID：16140372
> 
> 赞同：0
> 
> 时间：2013-04-22T06:00:25.340
> 
> 标签：android

我丢失了我的 android apk 证书。现在我想再次将我的新 apk 上传到同一个应用程序，但它不让我更新并给我一个证书错误

有没有办法从中提取证书？如果可能的话，我有原始的 apk

该应用程序是使用 adobe flash 构建的

请告诉任何细节

您需要为您的 APK 使用不同的版本代码，因为您已经有一个版本代码为 1000000 的 APK。您上传的 APK 使用与之前的 APK 不同的证书签名。您必须使用相同的证书。您现有的 APK 使用带有指纹的证书进行签名：SHA1: 2C:AB:E2:C0:DC:F9:2C:C8:DE:1B:60:DE:84:A1:71:CA :B6:6D:70:8D 并且用于签署您上传的 APK 的证书有指纹： SHA1: CC:FF:DE:87:AC:5A:08:E5:ED:21:A6 :52:1E:56:73:F1:CD:DF:7D:85

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:04:14.870

如果您有旧的密钥库，那么可能没有。您需要为此创建具有新包名称的新应用程序，然后才能上传。您必须为您的应用程序保留密钥库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:05:51.477

你运气不好。你是怎么弄丢那个证书的？你不能做一些硬盘恢复吗？你不是在某个地方备份了吗？

# ios - iOS中的人脸检测

> ID：16140378
> 
> 赞同：1
> 
> 时间：2013-04-22T06:01:10.600
> 
> 标签：ios, objective-c, xcode, photo, face-detection

我目前正在做一个项目，我需要检测一张脸，然后用相机拍照。（在相机正确对焦后）。

在 iOS 中有这样的可能吗？
有没有这方面的好教程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T13:45:33.033

我建议为此使用opencv，因为它已经证明了算法并且速度足够快，可以处理图像和视频

[https://github.com/aptogo/FaceTracker](https://github.com/aptogo/FaceTracker)

[https://github.com/mjp/FaceRecognition](https://github.com/mjp/FaceRecognition)

该解决方案也适用于 android，使用 opencv 端口到 android。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:49:00.110

使用[GPUImage](https://github.com/BradLarson/GPUImage)进行人脸检测。[GPUImage](https://github.com/BradLarson/GPUImage)中也提供了人脸检测示例。[请参阅 GPUImage 的FilterShowCase](https://github.com/BradLarson/GPUImage)示例项目中的最后一点，以进行人脸检测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-20T12:00:34.570

iOS 10 和 Swift 3

您可以查看可以检测面部的苹果示例

[https://developer.apple.com/library/content/samplecode/AVCamBarcode/Introduction/Intro.html](https://developer.apple.com/library/content/samplecode/AVCamBarcode/Introduction/Intro.html)

您可以选择人脸元数据使相机跟踪人脸并在脸上显示黄色框，它比这个例子有更好的表现

[https://github.com/wayn/SquareCam-Swift](https://github.com/wayn/SquareCam-Swift)

# javascript - Javascript密码验证

> ID：16140379
> 
> 赞同：-3
> 
> 时间：2013-04-22T06:01:13.413
> 
> 标签：javascript, validation, passwords

任何人都可以建议使用 javascript 进行简单的密码验证。我需要它至少有 4 个字符长并且包含最少 1 个字母和 1 个数字。

这是一个学校项目，所以它实际上只需要一个简单的验证来确保他们输入了所需的字符。

我在用

```
<textarea id="special_info" name="address" onfocus="this.value=''" rows="5" cols="40" >Please enter your address...
            </textarea>
            <div id="maxcar">(Maximum characters: 200)
            </div> 
```

我的 javascript 是这种格式

```
function validate_form(){

valid=true;

var letters=/^[a-zA-Z]+$/;
var numbers=/^[0-9]+$/;
var email=document.order_form.user_email.value;
var invalid = [];

if (document.order_form.first_name.value.search(letters)==-1){
invalid.push("*First Name")
}   

if (document.order_form.surname.value.search(letters)==-1){
invalid.push("*Surname Name")
}

if (email.indexOf("@")<1 || email.lastIndexOf(".")<email.indexOf("@")+2 
|| email.lastIndexOf(".")+2>=email.length){
invalid.push("*Email")
}

if (invalid.length != 0)
{alert("Please provide response: \n" + invalid.join("\n") ); 
    valid = false;
    invalid = [];}

return valid;} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T06:24:17.883

您可以使用正则表达式并检查长度。正则表达式是对一个字母和一个数字以任意顺序进行不区分大小写的检查。长度必须大于 3。

```
function testString(s) {
  var re = /[a-z]\d|\d[a-z]/i;
  return re.test(s) && s.length > 3;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:22:16.373

尝试这个：

```
// returns true if the form was valid; false otherwise.

function validateForm() {

    var allLetters = /^[a-zA-Z]+$/;
    var letter = /[a-zA-Z]/;
    var number = /[0-9]/;

    var firstName = document.order_form.first_name.value;
    var surname = document.order_form.surname.value;
    var email = document.order_form.user_email.value;
    var password = document.order_form.password.value;

    var invalid = [];

    if (!allLetters.test(firstName)) {
        invalid.push("*First Name");
    }

    if (!allLetters.test(surname)) {
        invalid.push("*Surname Name");
    }

    if (email.indexOf("@") < 1 || email.lastIndexOf(".") < email.indexOf("@") + 2 || email.lastIndexOf(".") + 2 >= email.length) {
        invalid.push("*Email");
    }

    if (password.length < 4 || !letter.test(password) || !number.test(password)) {
        invalid.push("*Password");
    }

    if (invalid.length != 0) {
        alert("Please provide response: \n" + invalid.join("\n"));
        return false;
    }

    return true;
} 
```

好好阅读，运行它，如果有不清楚的地方，可以提出问题。

注意使用[RegExp.test](http://www.w3schools.com/js/js_obj_regexp.asp)而不是 String.search。

# c++ - 在 std::all_of 中调用函数

> ID：16140380
> 
> 赞同：1
> 
> 时间：2013-04-22T06:01:27.400
> 
> 标签：c++, c++11, stl

我知道我可以这样做：

```
 vector<int> insidetest;

 if(std::all_of(insidetest.begin(),insidetest.end(),[](int i){return i>100;}))
    {
       std::cout << "All greater" << std::endl;
    } 
```

但我想调用另一个函数（可能比> 1000更复杂）。如何在 std::all_of 中调用另一个函数，例如：

```
 bool fun(const vector<int> *s)
   {
   return true;
   } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T06:03:15.963

如果`fun`有这样的签名 - 没有办法。它`fun`有签名`bool(int)`然后简单地写

```
if(std::all_of(insidetest.begin(),insidetest.end(),fun)) 
```

如果你想要函数中的其他参数 - 你可以使用`std::bind` 例如签名`bool(int, int, int)`

```
bool fun(int value, int min, int max)
{
   return value > min && value < max;
}

if(std::all_of(insidetest.begin(),insidetest.end(),
               std::bind(fun, std::placeholders::_1, 1, 5))) 
```

# maven - 找不到项目的父项：net.java:jvnet-parent：com.sun.jersey:jersey-project:pom:1.9

> ID：16140389
> 
> 赞同：2
> 
> 时间：2013-04-22T06:02:24.230
> 
> 标签：maven, neo4j, spring-data, spring-data-neo4j

我的项目涉及 spring-data-neo4j，运行 mvn clean install 时，出现 maven 构建错误。

```
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error building POM (may not be this project's POM).

Project ID: com.sun.jersey:jersey-project:pom:1.9

Reason: Cannot find parent: net.java:jvnet-parent for project: com.sun.jersey:jersey-project:pom:1.9 for project com.sun.jersey:jersey-project:pom:1.9 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-07T14:29:24.597

“根本原因是 Maven 2.2.1 中的缺陷。它没有遵循 301 重定向；如果您查看下载到本地存储库中的 .pom，您将看到从服务器传递的 301 HTML。更多信息是可在[http://jira.codehaus.org/browse/WAGON-314](http://jira.codehaus.org/browse/WAGON-314)获得。听起来唯一的解决方法是降级到 2.2.0，或者升级到更新版本的 Maven 3。（mrandall_cerner_com 在[https://java.net/jira/browse/JERSEY-1080](https://java.net/jira/browse/JERSEY-1080)）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-05-21T23:44:39.060

我在这里使用特定版本的 Maven 安装来解决问题。2.2.1

解决步骤：（假设你有 ubuntu）

如果已经安装了 maven (2.2.1)：

```
 sudo apt-get remove maven2 [To uninstall current maven 2.2.1]
  sudo apt-get install maven [Will install upgraded version] 
```

核实 ：

```
 mvn --version [Expect to display 3.*] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-03T09:13:59.700

试试这个，看看：

转到 Eclipse-> 窗口-> 首选项-> Maven-> 用户设置

复制您机器的本地存储库路径

导航到 .m2\repository\com\sun\jersey\jersey-project 并清理所有文件夹，如果 jersey-project 文件夹不存在则清理 .m2\repository\com\sun\jersey 内容..

然后在你的项目中更新你的 maven 依赖项（然后检查所有 jar 是否都下载到 .m2\repository\com\sun\jersey 文件夹）

# android - 无法点击信息窗口 android google map v2

> ID：16140396
> 
> 赞同：0
> 
> 时间：2013-04-22T06:02:47.437
> 
> 标签：android, android-layout, android-intent, android-widget, android-webview

我在单击窗口水龙头时遇到问题。

我的代码如下：

```
public class GamapA extends FragmentActivity implements OnInfoWindowClickListener{

Marker myMarkerOne;

Gmap gm;

  gm = ((SupportMapFragment)(getSupportFragmentManager().findFragmentById(R.id.map))).getMap();
             gm.setMapType(GoogleMap.MAP_TYPE_NORMAL);

 gm.setOnInfoWindowClickListener(this);

LatLng one = new LatLng(12.786608, 80.221916);

   myMarkerOne = gm.addMarker(new MarkerOptions()
            .position(one)
            .title("Test")
            .snippet("Testing")
            .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_GREEN)));       

@Override
    public void onInfoWindowClick(final Marker marker) 
{
        // TODO Auto-generated method stub
        if(marker.getPosition().equals(myMarkerOne))
        {

    Toast.makeText(GamapChF.this, "Hello",Toast.LENGTH_LONG)
    .show();
        }
    } 
```

单击窗口时，我没有收到敬酒消息。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:38:30.010

它不会给你吐司，因为

marker.getPosition() 给你喜欢`lat/lng: (23.06831002668264,72.58109997957945)`（检查这个打印日志喜欢`Log.e("marker.getPosition()-->", "" + marker.getPosition());`）

你正在传递：`new LatLng(23.06831, 72.58110);`

如您所见`(23.06831002668264,72.58109997957945)`，两者`(23.06831, 72.58110)`都不相等。所以**它永远不会给你`Toast`**。

因此，我会建议您使用 Title 进行比较或按摩，例如：

```
if (marker.getTitle().equalsIgnoreCase("Start")) {
            Toast.makeText(showMaps.this, "You have click on start -->",
                    Toast.LENGTH_LONG).show();
            Log.e("marker.getPosition()-->", "" + marker.getPosition());
        } 
```

# apache - yourinfo.allrequestsallowed.net 是什么？

> ID：16140397
> 
> 赞同：1
> 
> 时间：2013-04-22T06:02:49.537
> 
> 标签：apache, .htaccess

在我的 apache 灌输中，我一直在我的访问日志中看到以下行：

```
"POST http://yourinfo.allrequestsallowed.net/ HTTP/1.1" 200 
```

这真的把我吓坏了，因为这个网站没有托管在我的服务器上（我检查了 IP 只是为了 100% 确定）。我添加了一条“全部拒绝”行，因为该站点仍在开发中，现在 HTTP 200 响应更改为 403，就像该域托管在我的服务器上一样。

我非常困惑和害怕。有人知道发生了什么吗？我可以拒绝所有显然指向我的服务器的域吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:22:41.900

您可能需要检查以确保您没有`ProxyRequests On`在不应该设置的任何地方设置。通常，这样的请求是针对转发代理的，令人不安的是您返回的`200`响应可能表明请求已成功代理。

看看这个[关于代理滥用的 wiki 页面](http://wiki.apache.org/httpd/ProxyAbuse)。

> **我的服务器已正确配置为不代理，那么为什么 Apache 返回 200（成功）状态代码？**
> 
> 该状态码表明 Apache 成功地向客户端发送了响应，但不一定表示该响应是从外部网站检索到的。
> 
> RFC2616 第 5.1.2 节要求 Apache 必须接受在请求 URI 中具有绝对 URL 的请求，即使对于非代理请求也是如此。这意味着即使关闭了代理，Apache 也会接受看起来像代理请求的请求。但是，Apache 不会从外部站点检索内容，而是会在您网站的相应位置提供内容。由于主机名可能与您网站的名称不匹配，Apache 将在您的默认主机上查找内容。

但是检查一下您是否没有代理可能是值得的。否则，这并不是什么大不了的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:56:42.570

在乔恩·林（Jon Lin）指出我正确的方向之后，我想通了。

禁用 mod_proxy 并启用 mod_security 后，我将以下内容添加到我的虚拟主机配置中：

```
SecRuleEngine On
SecRule REQUEST_LINE "://" drop,phase:1 
```

然后重新启动apache。它会退出连接并返回任意数量的数据，从而在蛮力和 DDOS 攻击期间使用更少的资源和带宽。

此外，它在访问日志中显示为 HTTP 404 响应。

**编辑**：我更新了规则以删除所有类型或代理（https、https、ftp）。我不知道这种方式可以使用多少协议，但我宁愿安全也不要后悔。

# haskell - Haskell parsec match if (3) as if (3 > 0)

> ID：16140402
> 
> 赞同：2
> 
> 时间：2013-04-22T06:03:16.307
> 
> 标签：haskell, parsec

我目前正在使用 Parsec 和 boolExpr [http://hpaste.org/86299](http://hpaste.org/86299)的示例版本。我正在通过 GHC 在 Windows 上编译。

上面的代码将匹配一个布尔表达式，例如`3 < 4`or`a not 3`但是它不会匹配一个表达式，例如`3`, `true`or `(((3 < 1)))`。谁能给我关于如何匹配这样的表达式的建议`3`和`(((3 < 1)))`相同的`3 > 0`和`(((3 < 1))) > 0`，其中 >0 被假定/自动添加到 RHS-less 表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:30:21.910

这看起来像您正在尝试将语言的语义推送到*语法*解析器中。从编程语言的角度来看，“正确”的做法是在语法树中同时接受数字和布尔值表达式。然后，在稍后阶段 - 类型重建*而不是*解析 - 决定数字值表达式添加一个“> 0”，而布尔值表达式不添加。

# java - SharedPreferences 数据仍然不会更新 TextView

> ID：16140403
> 
> 赞同：0
> 
> 时间：2013-04-22T06:03:19.137
> 
> 标签：java, android, textview, sharedpreferences

我有一个活动类，它将扫描 NFC 标签并将其分配给一个字符串（这部分运行良好），然后通过 sharedpreferences 共享该字符串，然后更新一个 textview（除其他外）。由于某种原因，文本视图似乎永远不会使用 NFC 标签中的文本进行更新。这应该是一个足够简单的问题来解决 - 我根本无法获取分配给字符串以通过 sharedpreferences 更新 textview 的 NFC 数据，我不知道为什么。

CONNECT.JAVA 代码片段：

```
 // after scanning - splitting the message by comma
          String[]tagdata=msgtext.split(",");

        String networkSSID = tagdata[0].toString();
        String networkPass = tagdata[1].toString();
        String time = tagdata[2].toString();
        String restricted = tagdata[3].toString();
        String corename = tagdata[4].toString();

        String NDEF_PREF = "prefs";
        SharedPreferences prefs = getSharedPreferences(NDEF_PREF, Context.MODE_PRIVATE);
        SharedPreferences.Editor editor=prefs.edit();
     //   editor.putBoolean(time, true);
        editor.putString("time", time);
        editor.putBoolean(restricted, true);
        editor.putBoolean(corename, true);
        editor.commit(); 
```

RULES.JAVA 代码片段：（显示时间 textview 的地方 - 但永远不会改变）

```
 String NDEF_PREF = "prefs";
    SharedPreferences prefs = getSharedPreferences(NDEF_PREF, Context.MODE_PRIVATE); 
    boolean name = prefs.getBoolean("name", true); 
    boolean code = prefs.getBoolean("corename", true);
    //boolean time = prefs.getBoolean("time", true);
    String time = prefs.getString("time", "");
    boolean ssid = prefs.getBoolean("restricted", true);
    Time.setText(String.valueOf(time));
//String time = String.valueOf(time);

       Intent intent2 = new Intent(Rules.this, KillTimer.class);
        PendingIntent pintent2 = PendingIntent.getActivity(Rules.this, 0, intent2,
                0);
        AlarmManager alarm2 = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
        alarm.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
                time ? 1000 : 0, pintent2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:09:03.970

`editor.putString("name", name)`等等 prefs.getString("name", "");

代替

`SharedPreferences prefs=getPreferences(Context.MODE_PRIVATE);`

在 CONNECT.JAVA 你应该使用

`SharedPreferences prefs = getSharedPreferences(NDEF_PREF, Context.MODE_PRIVATE);`

当您调用`getPreferences`该首选项时，该首选项对于该活动是私有的。

# mysql - 如何在准备好的语句中将此值添加为查询？

> ID：16140405
> 
> 赞同：0
> 
> 时间：2013-04-22T06:03:33.673
> 
> 标签：mysql, jdbc, prepared-statement

```
Public void aMethod(String itemName, String theUsersName){  

preparedStatement = conn.prepareStatement("INSERT INTO items  (Owner_ID, Name, State)               VALUES         (?,?,?) ");
preparedStatement.setString(1, "(SELECT id FROM users WHERE username     = ' "+theUsersName+"')");
preparedStatement.setString(2, itemName); 
preparedStatement.setString(3, state);
preparedStatement.executeUpdate();

} 
```

用户名表包含用户名和 id 在这里我给定了 theUsersName 并希望找到该用户名的 id，以设置 Item 表中新项目的 Owner_ID = theUsername 的 id。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T06:08:52.067

如果它没有抛出异常，请尝试一下，（*否则我将删除它*）

```
String query =  "INSERT INTO items  (Owner_ID, Name, State) " +
                "SELECT ID, ? AS Name, ? AS State " +
                "FROM   users " +
                "WHERE  userName = ? " 
preparedStatement = conn.prepareStatement(query);
preparedStatement.setString(1, itemName);
preparedStatement.setString(2, state); 
preparedStatement.setString(3, theUsersName);
preparedStatement.executeUpdate(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:09:01.437

通过将其插入到原始`INSERT`语句中：

```
INSERT INTO items (Owner_ID, Name, State)
VALUES (SELECT id FROM users WHERE username = ?, ?,?) 
```

并将第一个参数替换为实际值：

```
preparedStatement.setString(1, theUsersName); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T06:09:36.067

你可以这样做：使用`INSERT INTO SELECT..`

```
INSERT INTO items  (Owner_ID, Name, State)
SELECT id,?,? FROM users WHERE 
username = ? 
```

或者像这样使用子查询：

```
INSERT INTO items (Owner_ID, Name, State)
VALUES ((SELECT id FROM users WHERE username = ? LIMIT 1),?,?) 
```

在这里，您必须将限制设置为 1。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T06:12:39.140

您首先必须从 users 表中获取 Id，然后才能传递它。看看：

```
preparedStatement = conn.prepareStatement("SELECT id FROM users WHERE username = ' "+theUsersName+"'");
ResultSet rs=preparedStatement.executeQuery();
 if(rs.next())
int id=rs.getInt(1);
preparedStatement.setString(1,id); 
```

# javascript - 仅在 Windows 7 中打开导出的 html 表到 excel 时出错？

> ID：16140406
> 
> 赞同：0
> 
> 时间：2013-04-22T06:03:38.757
> 
> 标签：javascript, html, windows, excel, windows-7

我正在使用以下代码将 html 表导出到 excel 中，在 Win XP 和 Win Server 2003 中打开导出的 excel 文件时没有错误，但是当我在 win 7 中尝试时，出现某种错误，

```
 function generateexcel(tableid)
 {
         var table= document.getElementById(tableid);
         var html = table.outerHTML;
         window.open('data:application/vnd.ms-excel,' + encodeURIComponent(html));
  } 
```

信息：有一条警告消息说我们正在打开一种不同的文件，那是 k，但在 win7 中还有一条警告消息说（它是在某种 chinees 中）....part.xlt。

**另一件事**是用扩展名 .xls.part.xls / .xlt.part.xlt 保存，我们可以用我们想要的文件名保存吗？

* ***请让我知道是否有任何其他方法可以将 html 表导出到 excel。

提前致谢 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T09:39:09.003

上面写的代码运行良好，错误原因是win7有一个触发这个错误的机制，它是为了提供额外的安全性。

将html表格数据导出为ex​​cel没有问题...

# google-custom-search - 如何在谷歌自定义搜索 api 中的 siteSearch 上指定多个值？

> ID：16140409
> 
> 赞同：8
> 
> 时间：2013-04-22T06:04:05.250
> 
> 标签：google-custom-search

我正在使用 google 自定义搜索 api，并希望使用 siteSearch 创建搜索：

```
https://www.googleapis.com/customsearch/v1?key=k&cx=cx&q=cocos2d&siteSearch=www.cocos2d-iphone.org&siteSearchFilter=i

and it works fine (returns all the result only from the given site).

Then I want to specify TWO sites to search so I tried to change the :
siteSearch=www.cocos2d-iphone.org

to 
siteSearch=www.cocos2d-iphone.org www.XXXXXXXX.org
siteSearch=www.cocos2d-iphone.org|www.XXXXXXXX.org
siteSearch=www.cocos2d-iphone.org||www.XXXXXXXX.org

but none of these works.

hope someone can help here, thanks:) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-05T17:12:50.570

目前我不相信您可以通过查询参数 siteSearch 指定更多站点。

不过，您可以在此处配置您的自定义搜索引擎：[https](https://www.google.com/cse/manage/all) ://www.google.com/cse/manage/all 在“要搜索的站点”区域中。

这也适用于排除，您可以在此处阅读：[https ://support.google.com/customsearch/bin/answer.py?hl=en&answer=2631038&topic=2601037&ctx=topic](https://support.google.com/customsearch/bin/answer.py?hl=en&answer=2631038&topic=2601037&ctx=topic)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-22T15:34:25.657

您不能使用*as_sitesearch*参数执行此操作，因为它只接受一个值。*但是您可以使用as_q*参数来实现您想要的，将其设置为某个值，例如：*“site:google.com OR site:microsoft.com”* - 其工作方式与[此搜索](https://www.google.es/search?q=test+site:www.google.com%20OR%20site:www.microsoft.com)类似。

as_q参数[在此处](https://developers.google.com/custom-search/docs/xml_results#Advanced_Search_Query_Parameters)*记录*为：

> as_q 参数提供要在文档中检查的搜索词。此参数还通常用于允许用户指定要在一组搜索结果中搜索的附加词。例子 q=president&as_q=John+Adams

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-07T12:03:02.697

使用“空格”作为分隔符

下面是适用于我的示例 PHP 代码

```
$url="https://www.googleapis.com/customsearch/v1?key=k&cx=cx&q=cocos2d&siteSearch=".urlencode("www.cocos2d-iphone.org www.XXXXXXXX.org")."&siteSearchFilter=i" 
```

谢谢， 奥哈尔·苏塔尔

# android - Android中的显示宽度和高度错误

> ID：16140411
> 
> 赞同：6
> 
> 时间：2013-04-22T06:04:18.850
> 
> 标签：android, screen-orientation

我的屏幕尺寸为 600（宽）x 1024（高）。我得到当前宽度 600 但错误地得到高度 976（没有旋转屏幕）。我得到当前宽度 1024 但错误得到高度 552（旋转屏幕）。

```
 int rowPixelWidth = ((WindowManager) getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay().getWidth();
                int rowWidth =  (int)Math.floor(rowPixelWidth / this.getResources().getDisplayMetrics().density);
                int rowPixelheight = ((WindowManager) getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay().getHeight();
                int rowheight =  (int)Math.floor(rowPixelheight / this.getResources().getDisplayMetrics().density);
                Log.d("rowWidth","rowWidth"+rowWidth);
                Log.d("rowheight","rowheight"+rowheight);
-------------------------------------------------------------
 <uses-sdk
        android:minSdkVersion="3"
        android:targetSdkVersion="8" />
    <supports-screens android:anyDensity="true"/>
------------------------------------------------------------- 
```

这段代码有什么问题？

以下是典型屏幕宽度的一些数字：

1.  320dp：典型的手机屏幕（240x320 ldpi、320x480 mdpi、480x800 hdpi 等）。
2.  480dp：像 Streak (480x800 mdpi) 这样的补间平板电脑。
3.  600dp：7 英寸平板电脑 (600x1024 mdpi)。
4.  720dp：10 英寸平板电脑（720x1280 mdpi、800x1280 mdpi 等）。

我得到了当前宽度，但没有得到所有设备的当前高度（没有（320x480 屏幕）。

我尝试[以像素为单位获取屏幕尺寸的](https://stackoverflow.com/questions/1016896/android-how-to-get-screen-dimensions/1016941#1016941)代码，但同样会出现问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T06:11:29.760

我相信`getDefaultDisplay`唯一给你的是应用程序将要显示的窗口，它不考虑其他东西，比如顶部的通知栏或底部的 android 按钮（主页、返回...）或类似的东西。

这可能就是为什么您在这两种情况下都看到垂直尺寸相差 48 像素的原因。

**更多信息**

您的代码似乎是正确的，并且与[那里](https://stackoverflow.com/a/1016941/347565)的代码相似。您可能还想在[这个答案](https://stackoverflow.com/a/11623621/347565)中使用类似的东西来为正确的 Android 版本使用正确的 API。

但无论如何，您将获得的尺寸不会包括带有软 Android 按钮的导航栏（当它们存在时）。

当您在 HVGA 屏幕上运行 Android 4.1 时，没有导航栏或组合栏（屏幕太小了），因此您可以获得整个屏幕的分辨率。

如果您在更大的屏幕上运行相同的版本，您将看到导航栏，您的应用程序可用的显示尺寸更小，您只能获得该空间的分辨率。

如果您不清楚，请查看[此处](http://developer.android.com/design/get-started/ui-overview.html)的导航栏和其他定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T11:51:09.473

上面代码的屏幕高度不包括底部宽度为 48px 的 android 按钮（主页、返回、最近的应用程序）。结果，您将屏幕高度设为 1024-48 = 976。

上面的函数给出了可以看到应用程序的区域。可以将您的应用程序设置为全屏应用程序，它将在顶部隐藏通知栏，但它仍然不会在底部隐藏 android 按钮栏（主页、返回、最近的应用程序）。因此，您可以利用的最大屏幕空间为 1024-48=976 像素。

但是在某些手机中，android 按钮不是屏幕的一部分，在这些情况下，您可以使用整个 1024 像素的屏幕。

# asterisk - 星号 Phpagi DTMF

> ID：16140413
> 
> 赞同：1
> 
> 时间：2013-04-22T06:04:25.167
> 
> 标签：asterisk, dtmf

我一直在四处寻找，但似乎找不到答案。我想看看我想做的事情是否可行：

我想在执行我的 phpagi 脚本时向我的调用者播放音乐。无论如何我可以抓住在音乐保持期间按下的任何 DTMF 吗？我想让音乐连续播放....

非常感谢我能得到的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:19:21.920

您可以使用 $AGI->stream_file($filename, $digits) ( [voip-info](http://www.voip-info.org/wiki/view/Asterisk+perl+agi) )

或类似的东西：

```
while ($digit ne "0") {
     $digit = $AGI->get_data("path/to/your/file", 1, 1);
     do your staff
     ...
} 
```

我在 Perl 中使用了它，但对于 phpagi 可能是一样的。希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-27T17:59:38.940

我认为现在回答为时已晚，但这可能会对某人有所帮助。背景音乐将继续播放，直到您停止播放。

```
// start background music
$agi->set_music(true);

//code....do your stuff

// stop background music
$agi->set_music(false); 
```

# javascript - 在 AngularJS 中处理路由变化

> ID：16140415
> 
> 赞同：2
> 
> 时间：2013-04-22T06:04:36.943
> 
> 标签：javascript, angularjs

如果应用程序状态很脏，我正在努力处理后退按钮并要求用户确认。关闭选项卡和重新加载已经通过`onbeforeunload`钩子处理。

我玩过`$routeChangeStart`,`$beforeRouteChange`等，但无法正确处理。使用`$routeChangeStart`，在调用我的回调之前有效地更改了路线。

处理这种情况的正确方法是什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-05T07:53:06.493

我相信 $locationChangeStart 会在您愿意时触发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T06:19:09.557

你可以使用：

```
$scope.$on('$routeChangeStart', function(next, current) { 
   //broadcasted before a route change
   // do something here
}); 
```

查看更多内容：[$route](http://docs.angularjs.org/api/ng.%24route)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T08:29:32.677

在父控制器中保留脏状态模型，对所有视图都通用？如果任何视图的控制器检测到脏状态，则会出现警报/确认，并带有一个“取消”按钮，将 $location.path(...) 重置为脏页面。

# php - 在 drupal 6 中搜索 pdf 文件

> ID：16140422
> 
> 赞同：0
> 
> 时间：2013-04-22T06:05:15.913
> 
> 标签：php, drupal, drupal-6, drupal-modules

有没有办法在常见的drupal搜索中包含pdf文件。我尝试[了 http://drupal.org/project/search_files](http://drupal.org/project/search_files)模块。但它在单独的选项卡下给出了结果。有没有将它们包含在常见的drupal搜索中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:10:14.227

是的，使用 hook_search 您也可以包含文件。按照 search_files 模块中的代码，您可以将它们与其他结果结合起来，而不是显示在单独的选项卡上！

# wordpress - 在 WP 中过滤函数

> ID：16140427
> 
> 赞同：0
> 
> 时间：2013-04-22T06:05:26.660
> 
> 标签：wordpress

我有一个儿童主题，我正在尝试过滤以下内容：

```
// add the function to the init hook
add_action( 'init', 'options_typography_get_google_fonts' );

// add a font to the $google_fonts variable
function options_typography_get_google_fonts() {

    // Google Font Defaults
    global $google_faces;
    $google_faces = array(

        'Great Vibes, cursive' => '*Great Vibes'    
        );

    return $google_faces;

} 
```

过滤这个以便我可以添加更多谷歌字体的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:04:10.283

你的问题有点模糊，所以这里有一些选项：

(1) 如果父主题检查`options_typography_get_google_fonts`函数是否存在（使用`function_exists`），您可以通过在子主题中重新声明该函数来覆盖该函数。

（2）如果父主题没有，您应该可以删除子主题中的动作：

`remove_action( 'init', 'options_typography_get_google_fonts' );`

并根据您刚刚删除的功能构建您自己的（类似但扩展的）功能。

(3) 如果您正在构建一个子主题，并且希望用户能够过滤字体列表，您应该返回一个可过滤数组：

`return apply_filters( 'my_options_typography_get_google_fonts_filter', $google_faces );`

# android - 菜单图标未出现在我的 Android 菜单中

> ID：16140428
> 
> 赞同：2
> 
> 时间：2013-04-22T06:05:29.287
> 
> 标签：android, cordova, menu, contextmenu

在我的应用程序菜单图标未显示，对我来说目前正在显示文本/字符串，但我需要文本的图标/图像意图。也尝试使用 xml 格式的菜单调用。

*   安卓版本是ver_4
*   科尔多瓦_2.5.0
*   图片/图标大小=32*32

testapp.java

```
 package com.example.testapp;

import android.annotation.SuppressLint;
import android.content.Intent;
import android.os.Bundle;
import org.apache.cordova.*;
import android.view.Menu;
import android.view.MenuItem;

public class testapp extends DroidGap {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.loadUrl("file:///android_asset/www/index.html");
 }

private static final int HOME = 0;
private static final int SETTINGS = 1;
private static final int HELP = 2;

@SuppressLint("NewApi")
@Override
public boolean onCreateOptionsMenu(Menu menu) {

    menu.add(0, HOME, 0, "Home")
        .setIcon(R.drawable.icon_home) 
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

    menu.add(0, SETTINGS, 0, "Settings")
        .setIcon(R.drawable.icon_settings)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

    menu.add(0, HELP, 0, "Help")
        .setIcon(R.drawable.icon_help)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
        return true;

}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case HOME:
             // app icon in action bar clicked; go home
            Intent intent = new Intent(this, testapp.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent);
            return true;

        case SETTINGS:
             this.startActivity(new Intent(android.provider.Settings.ACTION_SETTINGS));
            return true;
        case HELP:
            this.appView.sendJavascript("navigator.notification.alert('No help')");
            return true;

        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

}

我的 testapp.xml

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:id="@+id/menu_home"
      android:icon="@drawable/icon_home"
      android:showAsAction="ifRoom|withText"
      android:title="Home" />

  <item android:id="@+id/menu_settings"
      android:icon="@drawable/icon_settings"
      android:showAsAction="ifRoom|withText"
      android:title="Settings" />

  <item android:id="@+id/menu_help"
      android:icon="@drawable/icon_help"
      android:title="Help" />
</menu> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T17:23:56.557

可能是......您应该删除：AndroidManifest.xml 中的 android:theme="@style/AppTheme"

或编辑：android:theme="@android:style/Theme"

# android - Android：无法解析 java.awt.Image 类型。它是从所需的 .class 文件中间接引用的

> ID：16140431
> 
> 赞同：6
> 
> 时间：2013-04-22T06:05:36.960
> 
> 标签：android, awt, java

我正在使用一些`java projects in my Android project`. 我通过将它们添加到`Java Build Path`和中来引用这些项目`Project References`。这样做之后，我可以在我的 android 项目中访问 java 项目的类。但收到此错误

```
 The type java.awt.Image cannot be resolved. It is indirectly referenced from required .class files 
```

我现在该怎么办？？我是否需要添加任何 JRE 或其他东西会有所帮助？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-22T06:41:09.707

**找到解决方案：**

转到项目属性 `java build pata`->`Add library`

并添加`JRE System Library`并单击`finish`。现在你可以使用`java.awt`包:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T06:28:00.283

由于 dalvik 运行时中没有这些类，因此您不能在 Android 中使用依赖`java.awt.Image`或其他`awt`包（除外）的项目。`java.awt.font`

# ruby-on-rails-3 - rails 3.2 未检测到 javascript 更改？

> ID：16140451
> 
> 赞同：0
> 
> 时间：2013-04-22T06:07:01.043
> 
> 标签：ruby-on-rails-3, jquery

我是rails 3.2的新手。现在我有一个问题：我有2个用于显示highchart的patials是_device_per_product.html.erb和device_per_platform.html.erb。我通过这种方式呈现这些：

```
jQuery("#element_div").html("<%= escape_javascript(render(:partial => 'partial_page')) %>"); 
```

当我单击链接以呈现我的部分时，它可以工作。但下一次，我渲染另一个部分，它只是加载 javascript 代码，但不会从这些代码生成 highchart。在我看来，这是第一次在我的页面中加载 javascript。所以它会起作用。下次我的 javascript 不工作。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:59:25.643

我怀疑你有类似的东西：

```
$('#element_div a').click(function() {
  //do something
}); 
```

这仅在触发时绑定到页面上的内容。如果您要引入新的（或替换）它，那么您需要更改侦听器。

```
$(document).on("click","#element_div a", function () {
  // do something
  }} ); 
```

可以在[https://stackoverflow.com/a/10394566/2197771找到更详细的解释以及旧版本 jquery 的替代方案](https://stackoverflow.com/a/10394566/2197771)

# php - php第二个foreach不写出值

> ID：16140457
> 
> 赞同：0
> 
> 时间：2013-04-22T06:07:28.643
> 
> 标签：php

我在显示数据时遇到问题。我有以下数据

```
filter_name        filter_value
Hard Drize Size    16GB
Hard Drize Size    32GB
Screen Size        7''
Screen Size        8'' 
```

我想像这样呈现它。

```
Hard Drize Size
16GB
32GB

Screen Size
7''
8'' 
```

我想要在我的 php 代码中检查 filter_name 是否在 $temp 数组中，如果不是，则将其添加到 $temp 数组中，这样就不会导致重复条目。我现在遇到的问题是，当我在循环中使用相同的数据进行第二次 foreach 时，我没有得到任何数据，而且我的 sql 是正确的。所以我不知道如何输出这些值。对于第二个 foreach，它只打印出第一个 $filter_name["filter_name"] 等等。

php:

```
if($stmt->rowCount() > 0) 
{
    $filters = "<div class=\"filters\">         
    <div class=\"apply-filters\">Filters</div>";
    $temp = array();        
    $stmt->fetch(PDO::FETCH_ASSOC);

    foreach($stmt as $filter_name)
    {
        if(!in_array($filter_name["filter_name"], $temp)) 
        {
            $temp[] = $filter_name["filter_name"];
            $filters .= "<div class=\"filter-header\">".$filter_name["filter_name"]."</div>";
            //second loop here doesn't work with the same data.
            // test if filter_name["filter_name"] == second loop second_loop["filter_name"]
            // ten write out second_loop["filter_value"] e.g.
            foreach($stmt as $filter_value)
            {
                if($filter_name["filter_name"] == $filter_value["filter_name"])
                {
                    $filters .= $filter_value["filter_value"] ."<br />";
                }                  
            }

        }               
    }
    $filters .= "</div>";   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:19:37.047

`$stmt`首先，在第一个和第二个*foreach*之前做一个 var_dump来查看它的形式。也许它的格式不符合您的想法？

为什么不循环一次 $stmt 并在该循环中 print `$stmt['filter_name']`and `$stmt['filter_value']`？现在，您`$stmt`为第一次的每次迭代循环一个“额外”时间`foreach`。相反，只需做一个`foreach($stmt as $filter)`and `$filter`，作为一个关联数组，每个条目都应该包含`filter_name`and `filter_value`。

然后，您可以将实际打印移到 之外，`foreach`并且只在循环中构造您的数组，看起来应该像

```
array("Hard Drive Size" => array("16GB", "32GB"), "Screen Size" => array("7''", "8''")); 
```

然后你可以使用遍历该数据结构

```
foreach($myArray as $filter_name => $filter_values)
{
  // Print filter name header
  foreach($filter_values as $filter_value)
  {
    // print each value of the specific filter
  }
} 
```

要构建呈现的结构，您可以执行类似的操作

```
...

    $filters = array();

    foreach($stmt->fetchAll(PDO::FETCH_ASSOC) as $filter)
    {
      $filters[$filter['filter_name']][] = $filter['filter_value'];     
    }

... 
```

然后迭代*$filters*结构并打印它。

*更新：*

从您的 var_dump`$stmt`很明显，这`$stmt`不是您的结果集。您应该将结果分配`$stmt->fetch`给某事。喜欢`$result = $stmt->fetch(PDO::FETCH_ASSOC)`然后迭代`$result`。

查看

[http://php.net/manual/en/pdostatement.fetch.php](http://php.net/manual/en/pdostatement.fetch.php)

[http://php.net/manual/en/pdostatement.fetchall.php](http://php.net/manual/en/pdostatement.fetchall.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:26:55.670

我稍微修改了您的代码以满足您的需求：

```
$temp = array();
foreach($stmt as $filter_name)
{
    if(!in_array($filter_name["filter_name"], $temp)) 
    {
        echo '<b>' . $filter_name['filter_name'] . '</b><br>';
        $temp[] = $filter_name["filter_name"];

        foreach($stmt as $filter_value)
        {
            if($filter_name["filter_name"] == $filter_value["filter_name"])
            {
                echo $filter_value['filter_value'] . '<br>';
            }
        }
    }
} 
```

您可以在此处查看工作示例-> [http://codepad.viper-7.com/aFD079](http://codepad.viper-7.com/aFD079)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T06:24:33.597

```
if($stmt->rowCount() > 0) 
{
    $filters = "<div class=\"filters\">         
    <div class=\"apply-filters\">Filters</div>";
    $temp = array();        
    $stmt->fetch(PDO::FETCH_ASSOC);

    foreach($stmt as $filter)
        $temp[$filter['filter_name']][] = $filter['filter_value']; 

    foreach($temp as $filter_name => $filter_values)
    {
        $filters .= "<div class=\"filter-header\">".$filter_name."</div>";
        foreach ($filter_values as $value)
            $filters .= $filter_value."<br />";
    }

    $filters .= "</div>";   
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T06:09:31.260

`$`你之前失踪了`filter_value`。

改变

`foreach($stmt as filter_value)`

至

`foreach($stmt as $filter_value)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T06:13:25.003

```
 $stmt->fetch(PDO::FETCH_ASSOC);

foreach($stmt as $filter_name) 
```

可能是（我不确定）

```
 $aaa= $stmt->fetch(PDO::FETCH_ASSOC);

foreach($aaa as $filter_name) 
```

并尝试

```
$rows = $stmt->fetch(PDO::FETCH_ASSOC);
$tmp_name='';
$html='';
foreach($rows as $row)
{
    if($row['filter_name'] !=  $tmp_name){
     $html .=$row['filter_name'];
    }
    $html .=$row['filter_value'];

    $tmp_name=$row['filter_name'];
} 
```

回声 $html;

# c# - 如何触发 WebHandler 请求的会话开始 (Global.asax) 事件？

> ID：16140461
> 
> 赞同：10
> 
> 时间：2013-04-22T06:08:00.360
> 
> 标签：c#, asp.net

我有一个 Webhandler，它在我的 asp.net 项目中根据请求生成图像。但是如果用户直接访问资源，则不会触发 Global.asax 文件中的 session start Event。但在我的项目中，我需要触发会话开始事件。我怎样才能做到这一点？

```
 void Session_Start(object sender, EventArgs e) 
    {
        Session["Test"] = 1;

    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T06:11:07.683

`Session_Start`每当某些服务器端处理程序尝试读取或写入会话时，都会触发该事件。[`IRequiresSessionState`](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.irequiressessionstate.aspx)您可以尝试使用标记界面装饰您的处理程序：

```
public class MyHandler: IHttpHandler, IRequiresSessionState
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T06:14:19.310

你总是可以创建一个方法`Session_Start`并调用它

```
namespace WebFormsApplication1
{
    public class Global : HttpApplication
    {
        void Session_Start(object sender, EventArgs e) 
        {
            Global.StartSession();
        }
    }

    public static class Global 
    {
        public static void StartSession() {

            Session["Test"] = 1;
        }
    }
} 
```

在您的处理程序中，只需调用`Global.StartSession();`

# image - 如何允许在 MediaWiki 中插入内部图像？

> ID：16140462
> 
> 赞同：0
> 
> 时间：2013-04-22T06:08:04.207
> 
> 标签：image, mediawiki, src

允许在 wikitext 中使用 img 标签。

```
$wgAllowImageTag = true; 
```

此变体有效

```
<IMG SRC = "http://picasa.google.com/images/thumb_edit.png"> 
```

为我的站点中的图像剪切 src 属性。

```
<IMG SRC = "http://mysite.com/img.jpg"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:53:09.620

在tinymce中添加

```
relative_urls : false,
remove_script_host: false, 
```

# cocos2d-iphone - 计划覆盖本身

> ID：16140464
> 
> 赞同：0
> 
> 时间：2013-04-22T06:08:14.563
> 
> 标签：cocos2d-iphone

如果下面的“延迟测试”被调用 N 次，我希望它最终也会调用 doIt N 次。然而事实并非如此，似乎日程表会覆盖任何以前的日程表，据说具有相同的选择器。无论如何围绕这个？

```
-(void)delayingTest {
    if (_delay) {
        [self schedule:@selector(delayingTest) interval:1.0f repeat:0 delay:1.0f];
    }
    else {
        [self doIt];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:14:02.600

尝试这个：

```
-(void)delayingTest
{
    if (_delay)
    {
        [self unschedule:@selector(delayingTest)];
        [self schedule:@selector(delayingTest) interval:1.0f];
    }
    else
    {
        [self doIt];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:14:46.657

一种方法是：不要使用 _delay`int`而是将其与时间戳绑定，将其存储并在`NSDate`下次调用您的方法时比较时间戳。

# java - Java FX 编辑表中的空值

> ID：16140468
> 
> 赞同：0
> 
> 时间：2013-04-22T06:08:47.127
> 
> 标签：java, javafx

我有一个包含一些对象的表格视图。我已经使一些字段可编辑，只要字段最初有一个值，编辑效果很好：双击开始编辑，输入提交新值。

但是，如果原始字段为“null”，则编辑不起作用：双击开始编辑仍然有效，但如果您按 Enter，则再次触发“editstart”事件而不是 editcommit。

我在网上找到了一些关于这个问题的参考资料（在堆栈溢出和其他地方），但除了提供默认值（这并不总是可能或可取的）之外，很少有实际的解决方案

# iphone - xcode中的配置文件

> ID：16140471
> 
> 赞同：0
> 
> 时间：2013-04-22T06:09:01.923
> 
> 标签：iphone, ipad, xcode4.5, configuration-files

我是 iphone 开发的新手，我想知道`config file`xcode（iphone 和 ipad）中的内容与 Android 中的类似`Androidmanifest.xml`。

我在哪里可以找到好的教程来更改`differnt apps(like change app name ,app themes for different apps)`in 的设置，`config file`我需要生成它吗？

任何帮助将不胜感激....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:26:10.410

在此屏幕截图中，您可以看到 yourProjectName-Info.plist。在那里您可以找到更多设置项目的选项。

![在此处输入图像描述](https://i.stack.imgur.com/TUvz2.png)

# spring - 如何重定向 HTTP 状态 405 - 不支持请求方法“GET”到另一个页面

> ID：16140474
> 
> 赞同：1
> 
> 时间：2013-04-22T06:09:08.677
> 
> 标签：spring, jsp, redirect, spring-mvc, annotations

我正在构建一个应用程序，我想做一个验证，当用户尝试访问 POST 方法时，他应该被重定向到一个新页面。例如，当我登录时，用户名和密码验证是在 post 方法中完成的

```
 @RequestMapping(value = "/firstPage.htm", method = RequestMethod.POST) 
```

所以我想要做的是，如果用户在应用程序关闭后通过将其粘贴到浏览器 url 中保存此链接 xyz.../firstPage.htm，他不应该收到 405 错误，而是应该将他重定向到另一个页面，上面写着你是未授权查看此页面。

我该怎么做呢？

问候，

津戈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:47:01.690

您可以在控制器中添加另一个方法来处理相同的 URI，但使用 RequestMethod Get。它可以简单地显示一个带有登录表单的页面，要求用户登录。

这也将导致更标准化的方法。对 URL 的 GET 请求会显示表单，而将凭据发布到同一 URL 会登录。

希望这可以帮助。

# json - 如何将具有两个 key:value 列的数据框转换为 R 中的列表和 JSON 格式

> ID：16140475
> 
> 赞同：1
> 
> 时间：2013-04-22T06:09:22.190
> 
> 标签：json, r, list, dataframe

我有一个看起来像这样的数据框（10000+ 行除外）：

```
 V1         V2
  google 0.99702575
   gmail 0.02492131
    maps 0.02040844
motorola 0.02006636
    view 0.01679274 
```

我需要使用 toJSON() 将其转换为 JSON 格式，但我首先需要将其转换为如下所示的列表：

```
$google
[1] 0.99702575

$gmail
[1] 0.2492131

$maps
[1] 0.02040844

$motorola
[1] 0.02006636

$view
[1] 0.01679274 
```

那时我需要做的就是 toJSON(list)。最终结果应如下所示：

```
{"google":0.99702575,"gmail":0.02492131,"maps":0.02040844,"motorola":0.02006636,"view":0.01679274} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T06:18:17.040

使用创建列表并设置名称`setNames`

```
as.list(setNames(dat$V2,dat$V1)) 
```

使用您的数据，例如：

```
dat <- read.table(text='    V1         V2
  google 0.99702575
   gmail 0.02492131
    maps 0.02040844
motorola 0.02006636
    view 0.01679274',header=TRUE)
ll <- as.list(setNames(dat$V2,dat$V1))
library(rjson)
toJSON(ll) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T06:14:34.960

创建一个列表，然后设置名称

```
V2 <- as.list(DF[['V2']])
names(V2) <- as.character(DF[['V1']])
# V2 is now the list you requested. 
```

# java - tomcat 出错

> ID：16140476
> 
> 赞同：-6
> 
> 时间：2013-04-22T06:09:24.493
> 
> 标签：java, tomcat

我能够在 tomcat 服务器上运行我的应用程序，但我不知道出了什么问题。这是一个问题`tomcat`。

它显示如下错误：

**Tomcat错误：**

```
22 Apr, 2013 9:59:41 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files (x86)\Java\jre6\bin;.;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;D:\oracle\product\10.2.0\client_1\bin;C:\Program Files\AuthenTec TrueSuite\;C:\Program Files\AuthenTec TrueSuite\x86;C:\Program Files\Broadcom\Broadcom 802.11 Network Adapter\Driver;;C:\Program Files (x86)\Intel\iCLS Client\;C:\Program Files\Intel\iCLS Client\;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\Intel\Intel(R) Management Engine Components\DAL;C:\Program Files\Intel\Intel(R) Management Engine Components\IPT;C:\Program Files (x86)\Intel\Intel(R) Management Engine Components\DAL;C:\Program Files (x86)\Intel\Intel(R) Management Engine Components\IPT;C:\Program Files\Lenovo\Bluetooth Software\;C:\Program Files\Lenovo\Bluetooth Software\syswow64;;C:\Program Files (x86)\Google\Google Apps Sync\;C:\Program Files (x86)\TortoiseSVN\bin;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x86;C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x64;C:\Program Files\Java\jdk1.6.0_43\bin,C:\Program Files\Java

22 Apr, 2013 9:59:41 AM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:DynProj' did not find a matching property.

22 Apr, 2013 9:59:41 AM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:Mydynproj' did not find a matching property.

22 Apr, 2013 9:59:41 AM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:beerV1' did not find a matching property.

22 Apr, 2013 9:59:41 AM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:MyWebLibrary' did not find a matching property.

22 Apr, 2013 9:59:42 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8081"]

22 Apr, 2013 9:59:42 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]

22 Apr, 2013 9:59:42 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 493 ms

22 Apr, 2013 9:59:42 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina

22 Apr, 2013 9:59:42 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.37

22 Apr, 2013 9:59:43 AM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
        java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/MyWebLibrary]]
            at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
            at java.util.concurrent.FutureTask.get(Unknown Source)
            at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
            at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
            at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
            at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
            at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
            at java.util.concurrent.FutureTask.run(Unknown Source)
            at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
            at java.lang.Thread.run(Unknown Source)
        Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/MyWebLibrary]]
            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
            ... 7 more
        Caused by: java.lang.IllegalArgumentException: The servlets named [Book] and [pack2.Book] are both mapped to the url-pattern [/Book] which is not permitted
            at org.apache.catalina.deploy.WebXml.addServletMapping(WebXml.java:335)
            at org.apache.catalina.startup.ContextConfig.processAnnotationWebServlet(ContextConfig.java:2412)
            at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:2125)
            at org.apache.catalina.startup.ContextConfig.processAnnotationsFile(ContextConfig.java:2080)
            at org.apache.catalina.startup.ContextConfig.processAnnotationsFile(ContextConfig.java:2073)
            at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1300)
            at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)
            at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
            at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
            at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
            at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5179)
            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
            ... 7 more

22 Apr, 2013 9:59:43 AM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
        java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
            at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
            at java.util.concurrent.FutureTask.get(Unknown Source)
            at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
            at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
            at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
            at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
            at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
            at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
            at java.lang.reflect.Method.invoke(Unknown Source)
            at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
            at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:456)
        Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
            at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
            at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
            at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
            at java.util.concurrent.FutureTask.run(Unknown Source)
            at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
            at java.lang.Thread.run(Unknown Source)
        Caused by: org.apache.catalina.LifecycleException: A child container failed during start
            at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
            at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
            ... 7 more

22 Apr, 2013 9:59:43 AM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start: 
        org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8004]]
            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
            at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
            at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
            at java.lang.reflect.Method.invoke(Unknown Source)
            at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
            at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:456)
        Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
            at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
            ... 7 more
        Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
            at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
            ... 9 more
        Caused by: org.apache.catalina.LifecycleException: A child container failed during start
            at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
            at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
            ... 11 more

22 Apr, 2013 9:59:43 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 1268 ms 
```

请把答案发给我。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T06:11:14.200

这是这里的错误

```
The servlets named [Book] and [pack2.Book] 
are both mapped to the url-pattern [/Book] which is not permitted 
```

您在 web.xml 中映射这些 servlet 的方式不正确。

你的映射应该是

```
 <servlet>
    <servlet-name>servlet logicalname</servlet-name>
    <servlet-class>Here complete servlet name with package name</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>servlet logicalname</servlet-name>
    <url-pattern>/url pattern</url-pattern>
  </servlet-mapping> 
```

你可以给一个 url 模式只给一个 servlet。你不能给多个 servlet 相同的 url 模式。也检查一下

# c# - 在属性中使用 .Add() 方法添加元素后获取 list.Count 零

> ID：16140477
> 
> 赞同：3
> 
> 时间：2013-04-22T06:09:30.523
> 
> 标签：c#, list, session, properties

下面是我的代码

```
private List<string> _myList
public List<string> myList
{
     get
     {
         if (Session["MyData"] != null)
            _myList = Session["MyData"] as List<string>;
         if(_myList==null)
            _myList = new List<string>();
         return _myList; 
      }

     set 
     { 
         Session["MyData"] = value; 
     }
  } 
```

现在当我打电话

```
 myList.add(new string("string1")); 
```

并使用

```
 myList.Count 
```

我越来越`myList.Count equals 0`不知道我的代码有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:12:59.233

这会覆盖列表：

```
 get
 {
     if (Session["MyData"] != null)
        _myList = Session["MyData"] as List<string>; //<-- here
     if(_myList==null)
        _myList = new List<string>();
     return _myList; 
 } 
```

尝试将其更改为：

```
 get
 {
     if(_myList != null)
       return _mylist;

     if (Session["MyData"] != null)
        _myList = Session["MyData"] as List<string>;
     else
        _myList = new List<string>();

     return _myList; 
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:34:42.570

```
get
{
   if(_myList != null)
   { 
      Session["MyData"] = _myList;   // change
      return _myList;
   }

   if (Session["MyData"] != null)
      _myList = Session["MyData"] as List<string>;
   else
      _myList = new List<string>();

   return _myList; 
}
set
{
    _myList = value;         //change
    Session["MyData"] = value;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T06:13:07.177

您没有修改`_myList`. 在您的`get`中，有时您会返回一个新`List<string>`项目，因此您将新项目添加到该新项目中，`List`并在再次调用它时将成员计数为另一个新项目`List<string>`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T06:13:47.743

属性 getter 设置不`Session["MyData"] = new List<string>();`正确。

将您的代码更改为：

```
public List<string> myList
{
     get
     {
         return Session["MyData"] ?? (Session["MyData"] == new List<string>());
     }

     set 
     { 
         Session["MyData"] = value; 
     }
} 
```

# c++ - 如何从无符号长长掩码中获取数字？

> ID：16140483
> 
> 赞同：8
> 
> 时间：2013-04-22T06:09:50.567
> 
> 标签：c++

我想知道如何扭转这样的[事情](https://stackoverflow.com/questions/16037785/how-to-get-long-long-mask-by-number)。那么有一个如何摆脱面具的`mask`地方呢？`auto mask = 1ULL << 20;``20`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T06:16:57.927

## 无循环

许多年前，当我为国际象棋引擎编写按位算术时，我发现了一个快速实现，它对您的要求很有用，它是无循环的。此方法将返回第一个`1`位从右到左的位置（最低有效位）：

```
inline unsigned int lsb(unsigned long long value)
{
    if (!value)
        return -1;

    value &= -value;
    unsigned int lsb = (unsigned) value | (unsigned) (value >> 32);
    return (((((((((((unsigned) (value >> 32) != 0) << 1)
            + ((lsb & 0xffff0000) != 0)) << 1)
            + ((lsb & 0xff00ff00) != 0)) << 1)
            + ((lsb & 0xf0f0f0f0) != 0)) << 1)
            + ((lsb & 0xcccccccc) != 0)) << 1)
            + ((lsb & 0xaaaaaaaa) != 0);
}

int main()
{
    unsigned long long x = 1ULL<<20;
    cout << lsb(x) << endl;
} 
```

输出

```
20 
```

我想，我在[这里](http://www.stmintz.com/ccc/index.php?id=236134)找到了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T06:13:52.090

使用日志：

```
#include <iostream>
#include <cmath>
int main() {
    auto mask = 1ULL << 20; 
    std::cout << log2(mask) << std::endl;
    // edit out: std::cout << log(mask) / log(2) << std::endl;
    return 0;
} 
```

或循环和移位：

```
#include <iostream>
int main() {
    auto mask = 1ULL << 20; 
    for (unsigned int c = 0; c < sizeof(mask) * 8 && mask; c++) {
        mask >>= 1;
        if (mask == 0)
            std::cout << c << std::endl;
    }   
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-22T06:49:35.610

If it's a 64-bit mask, you can compute it modulo 67 and do a table lookup.

To wit:

```
static int table[67] = {
  -1, 0, 1,39, 2,15,40,23, 3,12,
  16,59,41,19,24,54, 4,-1,13,10,
  17,62,60,28,42,30,20,51,25,44,
  55,47, 5,32,-1,38,14,22,11,58,
  18,53,63, 9,61,27,29,50,43,46,
  31,37,21,57,52, 8,26,49,45,36,
  56, 7,48,35, 6,34,33};

int unmask(unsigned long long ull) {
 return table[ull % 67];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T06:22:51.157

```
//first if you want to make sure only 1 bit is "on" you can do that:
if ((mask & mask-1) != 0)
{
    //you have more than 1 bit "on", deal with it...
}

//finding which bit is "on" can be achieve in a loop
int count 0;
while (mask > 1)
{
    mask>>=1;
    count++;
}

//At this point count will have the required value (20 in your example) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T06:16:29.077

选项1：迭代

```
while (mask && !(mask & 1)) { mask>>=1; count++; } 
```

选项 2：一次迭代多个位：

```
unsigned long long a=0xFFFFFFFFULL; int b=32;
while (mask>1) {
    if (!(mask & a)) { count+=b; mask>>=b; }
    b>>=1; mask>>=b;
} 
```

选项 3：将掩码转换为双精度或浮点数并提取指数。

```
union { 
     struct {
        int mantissa:23;
        int exp:7;
        int sign:1;
     } s;
     float f;
} u = { (float) mask };

return u.s.exp + 1; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-22T06:14:20.320

一个简单的循环就可以了：

```
for (int bit = 0; bit < sizeof(mask) * 8; bit++)
{
    if ((1ULL << bit) & mask)
        std::cout << "Bit " << bit << " is set in the mask\n";
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-22T06:45:25.893

TMP 解决方案怎么样：

```
#include <iostream>

template < unsigned long long MASK >
struct MaskIndex
{
    enum { i = MaskIndex < MASK / 2 >::i + 1 };
};

template <>
struct MaskIndex < 1 >
{
    enum { i = 0 };
};

int main()
{
    const unsigned long long mask = 1ULL << 20;
    std::cout << MaskIndex < mask >::i << std::endl;
    return ( 0 );
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-04-22T06:17:27.477

你可以试试这个。。

```
if((1ULL<<20)&mask) {
        cout << "20th bit is set";
} 
```

# c# - Xsd.exe 在继承枚举时生成错误的 C# 类

> ID：16140484
> 
> 赞同：1
> 
> 时间：2013-04-22T06:10:04.130
> 
> 标签：c#, xsd, xsd.exe

这是一个错误吗？

```
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:simpleType name="sbrSexItemType">
            <xsd:restriction base="xsd:string">
                <xsd:enumeration value="1"/>
                <xsd:enumeration value="2"/>
                <xsd:enumeration value="3"/>
                <xsd:enumeration value="0"/>
            </xsd:restriction>
    </xsd:simpleType>
    <xsd:element name="TestSexItemType1" type="sbrSexItemType"/>
    <xsd:element name="TestSexItemType2" type="sbrSexItemType"/>
</xsd:schema> 
```

我得到：

```
/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "2.0.50727.3038")]
[System.SerializableAttribute()]
[System.Xml.Serialization.XmlRootAttribute("TestSexItemType1", Namespace="", IsNullable=false)]
public enum sbrSexItemType {

    /// <remarks/>
    [System.Xml.Serialization.XmlEnumAttribute("1")]
    Item1,

    /// <remarks/>
    [System.Xml.Serialization.XmlEnumAttribute("2")]
    Item2,

    /// <remarks/>
    [System.Xml.Serialization.XmlEnumAttribute("3")]
    Item3,

    /// <remarks/>
    [System.Xml.Serialization.XmlEnumAttribute("0")]
    Item0,
} 
```

这是某种玩笑吗？甚至没有产生错误。生成的代码如何以任何形状或形式表示 XSD？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:16:23.627

当然可能的值`1,2,3,0`不能直接转换为枚举值（标识符不能以数字开头），所以 xsd`Item`在创建标识符时将“”放在值之前。`XmlEnumAttribute`告诉`XmlSerializer`在读取或写入 Xml 文件时应该实际使用哪个值。所以看起来生成的枚举完成了这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:29:49.243

如果您有其他类型而不是枚举。您应该将枚举放在顶部。我不知道为什么，但我的问题就这样解决了。

# linux - 在 VIM 上保存文件时自动 rsync 不起作用，因为 rsync 提示密码

> ID：16140485
> 
> 赞同：1
> 
> 时间：2013-04-22T06:10:29.697
> 
> 标签：linux, ubuntu, vim, rsync

我正在将 VIM 配置为`rsync`在保存文件后执行 a，将我的服务器与我的开发笔记本电脑同步。它不起作用，因为 rsync 会提示我输入密码，即使我已经设置了公钥登录。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:41:53.150

与其使用 vim ，不如使用[incron](http://inotify.aiken.cz/?section=incron&page=about&lang=en)？它随大多数现代 Linux 发行版一起提供，并将同步任何更改，而不仅仅是您在 vim 中所做的更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T08:25:53.043

如果您使用`ssh`-connection with `rsync`，您始终可以为其设置无密码连接。`[Here][1]`是[一些](http://ubuntuforums.org/showthread.php?t=238672)不错的教程。它也可以通过 PuTTY、PLink、Pageant 等在 Windows 上完成。阅读文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T00:04:53.497

明确定义`ssh-key`您要使用的`ssh -i`：

*   `:nnoremap <expr> <D-s> ':w!<cr>' . ':!rsync -r -e ssh -i /home/user/.ssh/id_rsa ~/Folder/* user@my_ssh_server.com:~/Folder/ &<cr>' . ':!osascript ~/applescripts/chromereload.scpt &<cr>'`

或者您可以尝试将您的shell 变量设置为交互式，即使用`~/.bashrc`++ ( `man bash`)。不确定它是否有任何影响。

*   `:set shell=/bin/bash\ -i`

和/或根据需要在您的中定义别名`~/.bashrc`。也许将它与任何东西结合起来`chromereload.scpt`。

*   `alias vimsync='rsync -r -e ssh -i /home/user/.ssh/id_rsa ~/Folder/* user@my_ssh_server.com:~/Folder/'`

更多信息：
[vim -- 在交互模式下不识别别名？](https://stackoverflow.com/questions/8841116/vim-not-recognizing-aliases-when-in-interactive-mode)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-29T09:19:19.580

I haven't tried this but it should work:

Put this into your ~/.ssh/config file: ControlMaster auto ControlPath ~/.ssh/cm_socket/%r@%n:%p ControlPersist 300 KeepAlive yes ServerAliveInterval 60

Create the directory ~/.ssh/cm_socket and ssh into the server from another terminal. Now when you ssh into the server again it should use the same socket and no password is required, so your rsync command should work without password.

# iphone - 如何解决 iPhone 应用程序中的无效转换说明符警告

> ID：16140488
> 
> 赞同：2
> 
> 时间：2013-04-22T06:10:43.210
> 
> 标签：iphone, ios, ipad, uilabel

我有 iphone 应用程序在其中为标签分配值但是当我构建它时它显示以下警告无效转换说明符 $

这是标签赋值的代码。

```
label1.text=[NSString stringWithFormat:@"%d%$",newvalue1]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T06:14:04.200

被`%$`解释为格式字符串说明符。您需要`%$`使用两个百分号来转义百分比： ，或者如果您只想要一个美元符号，则`%%$`删除第二个。`%`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T06:13:26.907

像这样替换为什么你`%$`只保留放置`$`符号

`label1.text=[NSString stringWithFormat:@"%d$",newvalue1];`

# c# - linq to sql 删除以相同域开头的 URL

> ID：16140489
> 
> 赞同：0
> 
> 时间：2013-04-22T06:10:53.523
> 
> 标签：c#, .net, linq, visual-studio

我在数据表中有一个 URL 列表。我想删除以相同域开头的行。现在我有这个代码：

```
List<int> toRemove = new List<int>();
            toRemove.Clear();
            string initialDomain;
            string compareDomainName;
            for(int i = 0; i<UrlList.Rows.Count -1; i++)
            {
                if (toRemove.Contains(i))
                    continue;

                initialDomain = new Uri(UrlList.Rows[i][0] as String).Host;
                for(int j = i + 1; j < UrlList.Rows.Count; j++)
                {
                    compareDomainName = new Uri(UrlList.Rows[j][0] as String).Host;
                    if (String.Compare(initialDomain, compareDomainName, true) == 0)
                    {
                        toRemove.Add(j);
                    }
                }

                percent = i * 100 / total;
                if (percent > lastPercent)
                {
                    progress.EditValue = percent;
                    Application.DoEvents();
                    lastPercent = percent;

                }
            }

            for(int i = toRemove.Count-1; i>=0; i--)
            {
                UrlList.Rows.RemoveAt(toRemove[i]);
            } 
```

它适用于少量数据，但是当我加载一长串 URL 时它非常慢。现在我想转移到 linq，但我不知道如何使用 linq 来实现这一点。有什么帮助吗？

****更新***** 我不需要删除重复的行。例如。我有一个 URL 列表 现在，我知道如何删除重复的行了。我的问题是：我有一个简单的网址列表：**

 **```
http://centroid.steven.centricagency.com/forms/contact-us?page=1544
http://chirp.wildcenter.org/poll
http://itdiscover.com/links/
http://itdiscover.com/links/?page=132
http://itdiscover.com/links/?page=2
http://itdiscover.com/links/?page=3
http://itdiscover.com/links/?page=4
http://itdiscover.com/links/?page=6
http://itdiscover.com/links/?page=8

http://www.foreignpolicy.com/articles/2010/06/21/la_vie_en
http://www.foreignpolicy.com/articles/2010/06/21/the_worst_of_the_worst
http://www.foreignpolicy.com/articles/2011/04/25/think_again_dictators
http://www.foreignpolicy.com/articles/2011/08/22/the_dictators_survival_guide
http://www.gsioutdoors.com/activities/pdp/glacier_ss_nesting_wine_glass/gourmet_backpacking/
http://www.gsioutdoors.com/products/pdp/telescoping_foon_orange/
http://www.gsioutdoors.com/products/pdp/telescoping_spoon_blue/ 
```

现在我想要这个列表：

```
 http://centroid.steven.centricagency.com/forms/contact-us?page=1544
    http://chirp.wildcenter.org/poll
    http://itdiscover.com/links/
    http://www.foreignpolicy.com/articles/2010/06/21/la_vie_en
http://www.gsioutdoors.com/activities/pdp/glacier_ss_nesting_wine_glass/gourmet_backpacking/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:35:02.570

```
var result = urls.Distinct(new UrlComparer()); 
```

* * *

```
public class UrlComparer : IEqualityComparer<string>
{
    public bool Equals(string x, string y)
    {
        return new Uri(x).Host == new Uri(y).Host;
    }

    public int GetHashCode(string obj)
    {
        return new Uri(obj).Host.GetHashCode();
    }
} 
```

您还可以实现扩展方法`DistinctBy`

```
public static partial class MyExtensions
{
    public static IEnumerable<T> DistinctBy<T, TKey>(this IEnumerable<T> source, Func<T, TKey> keySelector)
    {
        HashSet<TKey> knownKeys = new HashSet<TKey>();
        return source.Where(x => knownKeys.Add(keySelector(x)));
    }
} 
```

* * *

```
var result = urls.DistinctBy(url => new Uri(url).Host); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:11:44.937

尝试使用这个：

```
IEnumerable<string> DeleteDuplicates(IEnumerable<string> source)
{
    var  hosts = new HashSet<string>();

    foreach (var s in source)
    {
        var host = new Uri(s).Host.ToLower();

        if (hosts.Contains(host))   
            continue;

        hosts.Add(host);

        yield return s;
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-22T06:25:18.187

您好实现此功能以删除重复的行

```
 public DataTable FilterURLS(DataTable urllist)
 {
      return
           (from urlrow in urllist.Rows.OfType<DataRow>()
            group urlrow by urlrow.Field<string>("Host") into g
            select g
            .OrderBy(r => r.Field<int>("ID"))
            .First()).CopyToDataTable();
  } 
```**

# javascript - Windows Phone 8 浏览器中的音频加载

> ID：16140490
> 
> 赞同：1
> 
> 时间：2013-04-22T06:10:59.667
> 
> 标签：javascript, windows-phone-8, internet-explorer-10

有没有办法在 Mobile IE（即 Windows Phone 8 手机上的默认浏览器）中确定该音频文件是否已加载？“canplaythrough”事件在 Mobile IE 上不起作用。

# android - Android 在带有遮罩的部分 imageView 上应用 colorMatrix colorFilter

> ID：16140501
> 
> 赞同：8
> 
> 时间：2013-04-22T06:11:47.207
> 
> 标签：android, bitmap, imageview, colormatrix, colorfilter

我想改变图像某些部分的亮度。我知道如何使用 ColorMatrix 来改变图像的亮度（或色调）。但它将应用于整个图像。

我有一个蒙版文件（黑白图像）。我只想在该蒙版的白色部分应用亮度变化**。**如何在 Android 中执行此操作？

下面是一个蒙版图像和我想要得到的结果。

![在此处输入图像描述](https://i.stack.imgur.com/yGHPk.png) ![在此处输入图像描述](https://i.stack.imgur.com/bgbxB.jpg)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T05:26:00.573

对于给定的位图和掩码：

![位图.png](https://i.stack.imgur.com/PdCII.png)

![面具.png](https://i.stack.imgur.com/mMCJb.png)

首先创建一个临时位图：

```
bitmap = BitmapFactory.decodeResource(ctx.getResources(), R.drawable.bitmap);
mask = BitmapFactory.decodeResource(ctx.getResources(), R.drawable.mask);

float[] src = {
    0, 0, 0, 0, 255,
    0, 0, 0, 0, 255,
    0, 0, 0, 0, 255,
    1, 1, 1, -1, 0,
};
ColorMatrix cm = new ColorMatrix(src);
ColorMatrixColorFilter filter = new ColorMatrixColorFilter(cm);
maskPaint = new Paint();
maskPaint.setColorFilter(filter);
maskPaint.setXfermode(new PorterDuffXfermode(Mode.DST_IN));

filteredBitmap = Bitmap.createBitmap(bitmap.getWidth(), bitmap.getHeight(), Config.ARGB_8888);
Canvas c = new Canvas(filteredBitmap);
c.drawBitmap(bitmap, 0, 0, null);
c.drawBitmap(mask, 0, 0, maskPaint);

colorFilterPaint = new Paint();
colorFilterPaint.setColorFilter(new LightingColorFilter(0xffffff, 0x880000)); 
```

并绘制它（因为我的模拟器缩小了它，所以我放大了它）：

```
@Override
public void draw(Canvas canvas) {
    canvas.save();
    canvas.scale(3, 3);
    canvas.drawBitmap(bitmap, 0, 0, null);
    canvas.drawBitmap(filteredBitmap, 0, 0, colorFilterPaint);
    canvas.restore();
} 
```

结果是：

![在此处输入图像描述](https://i.stack.imgur.com/GDD0o.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-14T04:01:20.630

你可以改变

```
float[] src = {
0, 0, 0, 0, 255,
0, 0, 0, 0, 255,
0, 0, 0, 0, 255,
1, 1, 1, -1, 0,
}; 
```

到

```
float[] src = {
0, 0, 0, 0, 255,
0, 0, 0, 0, 255,
0, 0, 0, 0, 255,
1, 1, 1, 0, 0,
}; 
```

在灰色部分提供更多的半透明度。

# openstack - Openstack Horizo n Fetch 实例

> ID：16140504
> 
> 赞同：1
> 
> 时间：2013-04-22T06:12:02.490
> 
> 标签：openstack

我想获取所有实例并计算 vcpu ram 等的正常运行时间。

检查位于 openstack_dashboard/dashboard/usage 的现有水平代码后

```
usage = api.nova.usage_get(self.request, self.tenant_id, start, end) 
```

我已经在互联网上搜索了它的文档，但我很不幸找到了一个。，我想知道参数开始和结束时会发生什么。

谢谢，我希望有人可以带领我进入这个领域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T00:37:06.897

你可以调试你的horzion`./manage.py shell`

# c - 错误：数组类型的元素类型不完整 - 已定义的结构

> ID：16140505
> 
> 赞同：0
> 
> 时间：2013-04-22T06:12:03.157
> 
> 标签：c

```
extern  const   struct  ss_type     ss_table    [MAX_CLASS];
extern  const   struct  ss_group_type   ss_group_table  [MAX_GROUPS]; 
```

merc.h:4430:30：错误：数组类型的元素类型不完整 merc.h:4431:35：错误：数组类型的元素类型不完整

从事一个宠物项目，我完全被这个项目难住了。我真的不知道为什么这个错误会反映这些行。我最好的猜测是编译器无法理解 ss_table、ss_type、ss_group_table 和 ss_group_type 是什么。

但是，定义了 ss_table 和 ss_type

```
const struct ss_type    ss_table [MAX_CLASS] =  {   {   /* FALSE */  
"",     
{0},    
{0},    
{NULL}  
}, 
```

ss_group_table 和 ss_group_type 也是如此

```
const struct ss_group_type  ss_group_table [MAX_GROUPS] = 
{
  /* NONE: FALSE return 0 */
  {"", 0,
   {
     {NULL, 0, 0,   {NULL},    {NULL}  }
   }
  }, 
```

这让我不知道如何解决这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:19:21.643

不，类型仅被前向声明，但未指定。至少你没有给我们任何东西。一个 resl 定义，如

```
struct toto {
  double hei;
}; 
```

必须可见。

此类`struct`定义应放在头文件中`.h`并包含在`.c`文件（也称为编译单元）中以使定义可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:21:23.577

如果类型不完整，则表示它已被前向声明，但尚未完全声明。

例如，以下编译：

```
struct S1 {};
struct S1 arr1[10]; 
```

而以下没有：

```
struct S2;
struct S2 arr2[10]; /* error: array type has incomplete element type */
struct S2 {}; 
```

# java - 如何访问 android 服务中的外部类成员？

> ID：16140508
> 
> 赞同：2
> 
> 时间：2013-04-22T06:12:09.380
> 
> 标签：java, android

基本上我有一个从我的 MainActivity 触发的 android Service *LogService 。*在服务类内部，我正在创建一个名为 locationFetcher的 LocationListener 类*LocationFetcher的对象。**LocationFetcher*类有一个公共字符串成员*FormattedResult*。现在在 LogService.run() 我想定期获取 FormattedResult 。怎么做 ？？下面是代码供参考。

我有一个像这样的 LocationListener：

```
/*This is relevant content of LocationFetcher.java */

public class LocationFetcher extends TimerTask implements LocationListener{

    public String FormattedResult;
    private boolean availableFlag;
    @Override
    public void onLocationChanged(Location arg0) {
        // TODO Auto-generated method stub
        this.availableFlag=true;
        this.FormattedResult=String.format(Locale.ENGLISH, "Lat=\t%f\nLong=\t%f", arg0.getLatitude(),arg0.getLongitude());
        Log.d("LocationFetcher",this.FormattedResult);
    }
    @Override
    public void run() {
        // TODO Auto-generated method stub
        Log.d("LocationFetcher","This is Timer Run !!!");
    }} 
```

我的安卓服务是这样的：

```
/* This is the relevant pert from LogService.java file*/

public class LogService extends Service{
    private Logger logger;
    private LocationFetcher locationFetcher;
    public LocationManager locationManager;
    private Timer timer1;

    @Override
    public int onStartCommand(Intent intent,int flags, int startId){
    super.onStartCommand(intent, flags, startId);
    if(!this.running){

        this.logger = new Logger();  //Initiated member from subclass
        this.logger.start();         //Started
        this.timer1 = new Timer();   //Timer for timed job          
        this.locationFetcher = new LocationFetcher();//THIS IS MY EXTERNAL CLASS in "LocationFetcher.java"  
                                      //I am using GPS data.
        this.locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
        if(this.locationFetcher != null){//NULLPointerException is thrown if I REMOVE this if ??WHY
            this.locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this.locationFetcher);
            this.timer1.scheduleAtFixedRate(this.locationFetcher, 5000, 2000); 
         //Below Line still throws NullPointrException ??WHY
         //this.locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, this.locationFetcher);

        }else{
            Log.d("GPS-Logger"," Found Null LocationFlecther !");
        }
    }
    public void run(){
        LogService ll = LogService.this;
        LocationManager mgr = ll.locationManager; //THIS IS MY QUESTION
        // HOW DO I ACCESS THE GPS LOCATION STORED in locationmanager.FormattedResult
        // Which is a string
        // //////////////////////////////////////////////////////////////////////////
        while(ll.isActive){

            try {

                String temp ;
                if(!temp.isEmpty()){
                    Log.d("GPS-Logger","data is :"+temp);
                }
                Log.d("GPS-Logger","data is :");
                Thread.sleep(5000);
                sec +=1 ;
                if(sec >= 12){
                    Log.d("GPS-Logger","Sending Data Here");
                    sec = 0;
                }

            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                ll.isActive=false;
                Log.d("GPS-Logged","EXIT Request Received");
            }
        }
    } 
```

我知道我在上面提出了多个问题，但我不知道如何将它们分开。需要帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:20:23.813

您可以将位置 Fetcher 修改为“LocationListenerClass”，如下所示：

在修改后的类中看到的主要关注点如下：

1.我使用了一个单例类来注册和删除整个区域的位置更新。（比如我们的服务等）。

2.**您应该从 onLocationChngaed() 和 getCurrentLocation() 初始化位置字符串说（如您所用的 FormattedResult）。因为 onLocationChngaed() 只会在[requestLocationUpdates](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28java.lang.String,%20long,%20float,%20android.location.LocationListener,%20android.os.Looper%29)中提供的距离和时间发生变化时调用，对此进行更多研究。**

```
 public class LocationListenerClass implements LocationListener{
        private static LocationListenerClass instance;
        private static Context context;
        private LocationManager myLocationManager;
        private LocationListener myLocationListener;
        private Double latitude = 0d;
        private Double longitude = 0d;
public static String FormattedResult;
        public static LocationListenerClass getInstance(Context context) {
            LocationListenerClass.context = context;
            if (null == instance) {
                instance = new LocationListenerClass();
            }
            return instance;
        }

        public void getCurrentLocation() {
            try {
                myLocationManager = (LocationManager) context
                        .getSystemService(Context.LOCATION_SERVICE);

                myLocationManager.requestLocationUpdates(
                        LocationManager.GPS_PROVIDER, 30000, 100,
                        this);

                Location location;
                location = myLocationManager
                        .getLastKnownLocation(LocationManager.GPS_PROVIDER);

                if (location == null) {
                    myLocationManager.requestLocationUpdates(
                            LocationManager.NETWORK_PROVIDER, 30000, 100,
                            myLocationListener);
                    location = myLocationManager
                            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                }

                if (location != null) {
                    try {
                        latitude = location.getLatitude();
                        Data.CURENT_LATITUDE = latitude;
                        Log.v(ConstantLib.LOG, " latitude : "
                                + Data.CURENT_LATITUDE);
                        longitude = location.getLongitude();
                        Data.CURENT_LONGITUDE = longitude;
                        Log.v(ConstantLib.LOG, " longitude : "
                                + Data.CURENT_LONGITUDE);

 **FormattedResult=String.format(Locale.ENGLISH, "Lat=\t%f\nLong=\t%f", latitude(),longitude());
        Log.d("LocationFetcher",this.FormattedResult);**

                    } catch (Exception e) {
e.printStackTrace();
                    }

                }
            } catch (Exception e) {
e.printStackTrace();
            }

        }

        public void removeLocationUpdates() {
            try {
                if (myLocationManager != null) {
                    myLocationManager.removeUpdates(myLocationListener);
                }
            } catch (Exception e) {
            }
        }

            public void onLocationChanged(Location location) {

                try {
                    if (location != null) {
                        Data.CURENT_LATITUDE = location.getLatitude();
                        Log.v(ConstantLib.LOG, "LOCATION CHANGED" + " latitude : "
                                + Data.CURENT_LATITUDE);
                        longitude = location.getLongitude();
                        Data.CURENT_LONGITUDE = location.getLongitude();
                        Log.v(ConstantLib.LOG, "LOCATION CHANGED" + " longitude : "
                                + Data.CURENT_LONGITUDE);

 **FormattedResult=String.format(Locale.ENGLISH, "Lat=\t%f\nLong=\t%f", latitude(),longitude());
        Log.d("LocationFetcher",this.FormattedResult);**
                    }
                } catch (Exception e) {
    e.printStackTrace();
                }

            }

            public void onProviderDisabled(String provider) {
                // TODO Auto-generated method stub

            }

            public void onProviderEnabled(String provider) {
                // TODO Auto-generated method stub

            }

            public void onStatusChanged(String provider, int status, Bundle extras) {
                // TODO Auto-generated method stub
            }
        } 
```

# python - Google App Engine Python 上的 Imaplib

> ID：16140510
> 
> 赞同：1
> 
> 时间：2013-04-22T06:12:25.803
> 
> 标签：python, google-app-engine, sockets, ssl, imaplib

有没有办法在谷歌应用引擎中支持 python 的 imaplib。

我想在 python 中使用谷歌应用引擎访问 gmail 收件箱。另一种方法也可以完成这项任务。但我希望它与 imap 有关。

我搜索了很多。谷歌应用引擎不支持 imaplib 的原因是它不支持 SSL 套接字。

任何方式我如何解决它，反正存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:24:59.583

感谢 Tim Hoffman 指出 App Engine 中对 SSL 的全新支持。它的文档在这里：[https](https://developers.google.com/appengine/docs/python/sockets/ssl_support) ://developers.google.com/appengine/docs/python/sockets/ssl_support 。

编辑：不幸的是，套接字仅适用于付费应用程序。（[https://developers.google.com/appengine/docs/python/sockets/overview#limitations-and-restrictions](https://developers.google.com/appengine/docs/python/sockets/overview#limitations-and-restrictions)）

如果不是太多，我建议您购买 5 美元的 App Engine 信用额度，直到该功能完成测试版。然后我很确定他们会提供免费使用等级。

希望这可以帮助。

# ios - 我可以分发旨在通过 iOS MDM 以 root 权限运行的内部应用程序吗？

> ID：16140513
> 
> 赞同：1
> 
> 时间：2013-04-22T06:12:58.100
> 
> 标签：ios, mdm

我可以分发旨在通过 iOS MDM 以 root 权限运行的内部应用程序吗？

换句话说，

在 MDM 证书下分发的应用程序能否以提升的权限执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T06:15:17.407

不，除非所有设备都越狱，否则这是不可能的。除了能够在任何设备上运行之外，内部应用程序对其他应用程序没有任何额外的权限。

# appfabric - 如何使用 WF 和 WCF 实现 AppFabric 缓存

> ID：16140521
> 
> 赞同：2
> 
> 时间：2013-04-22T06:13:36.023
> 
> 标签：appfabric

我是 Windows Server AppFabric 缓存的新手。
有谁知道如何在 WF 和 WCF 的帮助下使用 AppFabric 托管服务和缓存服务来实现 AppFabric 缓存...？
或者是否有任何用于 AppFabric 实施的简单易用的教程/电子书.....？
AppFabric 托管和缓存服务有什么区别..？
我们的要求是将现有的 asp.net 缓存转换为 AppFabric 缓存，以减少数据库读/写开销。
我们可以通过有限的代码更改来实现这一点......？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T11:16:50.133

这是 AppFabric 产品文档的链接：

[http://msdn.microsoft.com/en-us/library/hh351389.aspx](http://msdn.microsoft.com/en-us/library/hh351389.aspx)

嘿，您是否也考虑过 NCache 以满足您的缓存需求？[NCache](http://www.alachisoft.com/nache/)是一个功能非常丰富的

.NET 应用程序的分布式缓存解决方案，比

AppFabric，尤其是在您想要减少数据库开销的情况下。AppFabric 的拓扑（架构）集有限，而 Ncache 可根据您的应用程序需求在高可用性和容错性方面提供多种拓扑

我知道 NCache 提供了所有 ASP.NET 缓存功能，例如缓存依赖和

AppFabric 没有的 SqlDependency。

# c++ - 硬币行算法

> ID：16140527
> 
> 赞同：-1
> 
> 时间：2013-04-22T06:14:17.947
> 
> 标签：c++, algorithm, dynamic-programming

我被困在这个算法问题上，我得到了这个概念，但我很难想象它的实现。硬币排问题 有一排 n 个硬币，其值为正整数 c1, c2, 。. . , cn，不一定不同。目标是在初始行中没有两个相邻的硬币不能被拾取的约束下，拾取最大数量的钱。我这里有一个基本算法。

```
F[0]←0; F[1]←C[1]
for i ← 2 to n do
    F [i] ← max(C[i] + F [i − 2], F [i − 1]) 
return F [n] 
```

有人可以让我开始建立一个基本的实现。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:48:47.613

```
int max(int a, int b) {
  if(a > b) return a;
  return b;
}

int coin_row(int[] C, int n) {
  int F[n+1], i;
  F[0] = 0; F[1] = C[1];

  for(i = 2;i<=n;i++) {
    F[i] = max(C[i] + F[i-2], F[i-1]);
  }

  return F[n];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:30:42.387

根据你的算法，你想要这样的东西：

```
int coin_row(int[] array, int index, int length)
{
    if (index >= length) //beyond last coin
    {
        return 0;
    }

    int value = array[index];
    if (index >= length - 1) //last coin
    {
        return value;
    }
    else if (index >= length - 2) //second last coin
    {
        return max(value, coin+row(array, index+1);
    }

    return max(value+coin_row(array, index+2), coin_row(array, index+1));
} 
```

打电话给

```
coin_row(array, 0, length of array); 
```

# .net - 如何在Rails中读取没有名称的post缓冲区中上传的文件

> ID：16140533
> 
> 赞同：0
> 
> 时间：2013-04-22T06:14:39.637
> 
> 标签：.net, ruby-on-rails, ruby-on-rails-3, webclient

当文件没有名称时，如何从 Rails 中的 post 缓冲区读取文件？

我的客户端是 ac# 应用程序，它调用 WebClient.UploadFile()。这会将文件发布到我的服务器，其内容在发布缓冲区中。

更重要的是，文件没有像您`<input type=file name"myfile">`在网页上的表单中放置标签那样使用名称/值对发布；这只是文件。

当我检查我的控制器收到的请求时，我看到一个临时文件作为 Http::UploadedFile 的属性。我已经确认这个文件是我的客户上传的文件的完整内容，但是我不清楚如何通过对象模型访问它。

我确定其他人已经完成了 c# WebClient.UploadFile() -> rails server。有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:46:30.137

果然，rails 让这变得太容易了。

```
params[:file] 
```

是 type `ActionDispatch::Http::UploadedFile`，并且似乎是在这种情况下自动设置的参数 rails 。文件本身可以通过

```
params[:file].tempfile 
```

# java - 是否可以使用 Spring 为 API 当前类提供价值

> ID：16140536
> 
> 赞同：0
> 
> 时间：2013-04-22T06:14:57.350
> 
> 标签：java, spring, swing

无论如何，我可以使用 Spring 向 API（而不是类成员）提供参数吗？
我知道我可以将一个 API 调用的结果传递给班级成员

```
<bean id="registryService" class="foo.MyRegistry">
...properties set etc...
</bean>

<bean id="MyClient" class="foo.MyClient">
  <property name="endPoint" value="#{registryService.getEndPoint('bar')}"/>
</bean> 
```

但是，我想将值传递给 API（基本上我想`ActionListener`从`JButton`春天添加）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:29:15.713

不是真正的弹簧专家，但是......在 Spring 3 中。

```
@Value("#{properties.getAppropriateActionListener()}")
public void setActionListener(ActionListener listener) {
   myJButton.setActionListener(listener); 
} 
```

另外，我认为 Spring 期望 setEndpoint() 和 getEndPoint() 方法能够解析名为“endPoint”的属性。声明这样的属性有效地将值传递给 setEndPoint() 方法。因此，将值传递给 API（我假设是调用方法调用）实际上非常简单。

# java - 如何使用 Apache PDFBox 在现有文档上设置打印设置属性

> ID：16140537
> 
> 赞同：4
> 
> 时间：2013-04-22T06:14:58.560
> 
> 标签：java, pdfbox

我是 apache PDFBox api 的新手，我想使用 apache PDFBox 设置打印设置属性。

在这里，我想将页面大小设置为，`A4`并且我还想将打印缩放选项设置为`NO SCALING`.

在此处记下我正在加载一个准备好的 PDF 输入流。所以我想在打印`org.apache.pdfbox.pdmodel.PDDocument`之前用类设置打印属性。

我怎样才能做到这一点 ？

**编辑：**

这是我打印 PDF 文件的课程。请注意， 我想在其中添加代码的**TODO标记将 PDF 页面大小更改为****A4**并将页面缩放设置为**NO SCALING**。

```
public class PrintPDF extends Applet{
    private PrintPDF(){
        //static class
    }

    public static void main(String a[]) throws Exception{
        System.out.println("Printing Started...");
        String password = "";
        String pdfFile = "D://TEST//output.pdf";
        boolean silentPrint = true;
        String printerindx = "1";

        PrintService defaultService = PrintServiceLookup.lookupDefaultPrintService();            

        if( pdfFile == null )
        {
            usage();
        }

        PDDocument document = null;
        try
        {
            document = PDDocument.load( pdfFile );

            //TODO : ADD CODE TO SET PAPER SIZE TO A4 AND 
            //ADD CODE TO SET PAGE SCALING TO : NO SCALING

            if( document.isEncrypted() )
            {
                document.decrypt( password );
            }
            PrinterJob printJob = PrinterJob.getPrinterJob();

            if(printerindx != null )
            {
                PrintService[] printServices = PrinterJob.lookupPrintServices();

                for(PrintService printService : printServices){
                    if(printService.getName().equals("FG_LASER_PRINTER")){
                        printJob.setPrintService(printService);
                    }
                }
                            }

            if( silentPrint ){
                document.silentPrint( printJob );
            }else{
                document.print( printJob );
            }
        }
        finally{
            if( document != null ){
                document.close();
            }
        }

        System.out.println("Printing Completed...");
    }

    /**
     * This will print the usage requirements and exit.
     */
    private static void usage()
    {
        System.err.println( "Usage: java org.apache.pdfbox.PrintPDF [OPTIONS] <PDF file>\n" +
                "  -password  <password>        Password to decrypt document\n" +
                "  -silentPrint                 Print without prompting for printer info\n"
        );
        System.exit( 1 );
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:37:48.380

您应该可以通过更新 PageFormat 的 Paper 来做到这一点。

```
pdDocument.getPageFormat().getPaper().setSize(double width, double length); 
```

宽度和长度以英寸为单位。A4 尺寸为 8.27 × 11.69 英寸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:26:03.573

创建您的页面，如下所示：

```
PDPage page = new PDPage(PDPage.PAGE_SIZE_A4) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T00:42:31.560

我有同样的问题，我觉得做这件简单的事情太难了。对我来说，已接受的答案 pdDocument.getPageFormat(int page) 已弃用且无法使用。尽管它并不理想，但我最终还是选择了以下方法——甚至不使用 PDFBox 打印。

以下代码一次将页面转换为图像，并使用 java2d 调整大小并打印出来。

```
PDDocument pdfdoc = PDDocument.load(pdfPane.pdfFile);
@SuppressWarnings("unchecked")
final List<PDPage> pdfPages = pdfdoc.getDocumentCatalog().getAllPages();

PrinterJob pjob = PrinterJob.getPrinterJob();
pjob.setJobName(pdfPane.pdfFile.getName());
pjob.setPrintable(new Printable()
{
  @Override
  public int print( Graphics g, PageFormat pf, int page ) throws PrinterException
  {
    if (page > pdfPages.size())
      return NO_SUCH_PAGE;
    try
    {
      g.drawImage(pdfPages.get(page).convertToImage()
                ,(int)pf.getImageableX()
                ,(int)pf.getImageableY()
                ,(int)pf.getImageableWidth()
                ,(int)pf.getImageableHeight()
                ,null);
    }
    catch (IOException e)
    {
      LoggerUtil.error(e);
    }
    return PAGE_EXISTS;
  }
});
pjob.print();
pdfdoc.close(); 
```

# .net - 如何“覆盖”.NET 中的扩展方法？

> ID：16140543
> 
> 赞同：7
> 
> 时间：2013-04-22T06:15:25.503
> 
> 标签：.net, c#-3.0, extension-methods

所以我有一个对象层次结构来在 asp.net mvc 中生成 ui 控件并尝试实现流畅的 api。我做了一些虚拟课程来专注于当前的问题。
所以这是“错误”的代码库：

```
public abstract class HtmlElement { /* ... */ }

public abstract class UIElement : HtmlElement { /* ... */ }

public abstract class ButtonBase : UIElement { /* ... */ }

public class LinkButton : ButtonBase { /* ... */ }

public class ActionButton : ButtonBase { /* ... */ }

public static class HtmlElementExtensions
{
  public static T Id<T>(this T item, string id) where T : HtmlElement
  {
    /* set the id */
    return item;
  }
}

public static class ButtonBaseExtensions
{
  public static T Id<T>(this T item, string id) where T : ButtonBase
  {
    /* set the id and do some button specific stuff*/
    return item;
  }
} 
```

当我尝试在 LinkBut​​ton 上调用 Id 时，编译器会说存在模棱两可的调用：

```
LinkButton lb = new LinkButton().Id("asd"); 
```

我真的认为编译器在这种情况下会选择最接近的匹配，所以如果我有一个从 HtmlElement 继承的 Script 类而不是调用 HtmlExtensions Id 方法，并且对于 LinkBut​​ton（由于限制），将调用 ButtonBase 方法。我有一个解决方案，但我不确定是否有更好的解决方案。
我从 ButtonBaseExtensions 中删除了 Id 方法，并按以下方式修改了 HtmlElementExtensions Id 方法：

```
public static T Id<T>(this T item, string id) where T : HtmlElement
{
  if (item is ButtonBase)
  {
    /* do some button specific stuff*/
  }
  /* set the id */
  return item;
} 
```

这样，ButtonBase 的每个类后代都可以正常工作。我不太喜欢我的解决方案，因为它将 HtmlElement 逻辑与 ButtonBase 逻辑混合在一起。任何想法/建议以获得更好的解决方案？我以为我将它们放在不同的名称空间中，但只是一秒钟。我应该同时使用两个命名空间，所以不要解决问题。

您认为值得在 msdn 论坛上提及编译器应该注意对泛型扩展方法的限制吗？

与此同时，我进行了更多研究并在 msdn 论坛上启动了一个主题：[链接](http://social.msdn.microsoft.com/Forums/en-US/clr/thread/c9ad51c1-0c5a-4eb6-a530-89eaa628c07f)
我尝试了一些非通用扩展方法：

```
 public class BaseClass { /*...*/ }
  public class InheritedClass : BaseClass { /*...*/ }

  public static class BaseClassExtensions
  {
    public static void SomeMethod(this BaseClass item, string someParameter)
    {
      Console.WriteLine(string.Format("BaseClassExtensions.SomeMethod called wtih parameter: {0}", someParameter));
    }
  }

  public static class InheritedClassExtensions
  {
    public static void SomeMethod(this InheritedClass item, string someParameter)
    {
      Console.WriteLine(string.Format("InheritedClassExtensions.SomeMethod called wtih parameter: {0}", someParameter));
    }
  } 
```

如果我实例化这些：

```
BaseClass bc = new BaseClass();
InheritedClass ic = new InheritedClass();
BaseClass ic_as_bc = new InheritedClass();

bc.SomeMethod("bc");
ic.SomeMethod("ic");
ic_as_bc.SomeMethod("ic_as_bc"); 
```

产生了这个输出：

```
BaseClassExtensions.SomeMethod called wtih parameter: bc
InheritedClassExtensions.SomeMethod called wtih parameter: ic
BaseClassExtensions.SomeMethod called wtih parameter: ic_as_bc 
```

[你现在可以投票](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3886276-generic-extension-method-type-restriction-should-b)

谢谢，
彼得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T01:07:18.307

您可以查看有关扩展方法的 MSDN 文档：[扩展方法（C# 编程指南）](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)。有趣的部分在*Binding Extension Methods at Compile Time*下：

> ...它首先在类型的实例方法中查找匹配项。如果未找到匹配项，它将搜索为该类型定义的任何扩展方法，并绑定到**它找到的第一个扩展方法**。

所以这就是你看到这种行为的原因。而且我实际上可以购买它，想象一下有人可以只用一种方法覆盖您的应用程序的工作方式`public static T Id<T>(this T item, string id) where T : object`。如果你不会看到任何编译器错误，你会认为一切都是正确的，也许一切都会工作，除了一些极少数情况。会有多混乱？

还有一件关于你的方法的坏事。如果我将使用您的 API 并看到对于 Button 我有两种方法：一种方法`HtmlElementExtensions`和一种方法`ButtonBaseExtensions`会阻止我这样做`HtmlElementExtensions.Id(button, "id")`而不是`ButtonExtensions.Id(button, "id")`？

在您的情况下，我更喜欢组合方法：

```
public static T Id<T>(this T item, string id) where T : HtmlElement
{
  if (item is ButtonBase)
  {
      return (T)Id((ButtonBase)item);
  } 
  else if (item is HtmlElement)
  {
      return (T)Id((HtmlElement)item);
  }

  throw new NotSupportedException("Type " + item.GetType() + " is not supported by Id extension method");
}

private static ButtonBase Id(ButtonBase item, string id)
{
     return item;
}

private static HtmlElement Id(HtmlElement item, string id)
{
     return item;
} 
```

# android - Android - 折线图下方的填充颜色

> ID：16140546
> 
> 赞同：6
> 
> 时间：2013-04-22T06:15:41.890
> 
> 标签：android, canvas, charts, bitmap, paint

我正在为我们的一个应用程序构建折线图。图表中的线条部分工作正常，但现在我必须用颜色填充线条下方的区域，如下图所示。

![在此处输入图像描述](https://i.stack.imgur.com/kKxhW.png)

我正在使用此代码使用画布在位图上绘制线条。

```
 List<Float> xCoordinates = (List<Float>) coordinates[0];
    List<Float> yCoordinates = (List<Float>) coordinates[1];

    for (int i = 0; i < xCoordinates.size(); i++) {
        if (!firstSet) {
            x = xCoordinates.get(i);
            y = yCoordinates.get(i);
            p.moveTo(x, y);
            firstSet = true;
        } else {
            x = xCoordinates.get(i);
            y = yCoordinates.get(i);
            p.lineTo(x, y);
        }
    }

    textureCanvas.drawPath(p, pG); 
```

我需要知道的是，有没有一种方法可以轻松找到线条下方的区域并将其设为颜色，或者我是否必须计算图表 3 个点之间的每个区域并用颜色填充？

我不能使用现有的图表库，如**AchartEngine**、**ChartDroid**、**aFreeChart**等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T09:23:12.377

找到了解决方案

我首先绘制了渐变，然后绘制了折线图并通过创建另一条跟随折线图并在最后将其关闭的路径沿线擦除。之后，我将该区域涂成透明以擦除渐变的顶部。

```
 List<Float> xCoordinates = coordinates.first;
    List<Float> yCoordinates = coordinates.second;
    for (int i = 0; i < xCoordinates.size(); i++) {
        if (!firstSet) {
            x = xCoordinates.get(i);
            y = yCoordinates.get(i);
            linePath.moveTo(x, y);

            erasePath.moveTo(x, 0);
            erasePath.lineTo(x, y);

            firstSet = true;
        } else {
            x = xCoordinates.get(i);
            y = yCoordinates.get(i);
            linePath.lineTo(x, y);
            erasePath.lineTo(x, y);
        }
    }

    erasePath.lineTo(getWidth(), y);
    erasePath.lineTo(getWidth(), 0);
    erasePath.lineTo(0, 0);

    getTextureCanvas().drawPath(erasePath, clear);
    getTextureCanvas().drawPath(linePath, pG); 
```

结果看起来像这样

![在此处输入图像描述](https://i.stack.imgur.com/iUCCM.jpg)

另一种方法是完全遵循路径并围绕底部边缘进行剪辑，然后在第二条路径内绘制渐变。这将给出相同的结果，但图表上方的所有内容都将被保留，并且不会删除任何内容。

# iphone - 如何创建多个sqlite数据库实例？

> ID：16140551
> 
> 赞同：3
> 
> 时间：2013-04-22T06:16:18.430
> 
> 标签：iphone, objective-c, database, xcode, sqlite

我正在制作一个在线应用程序，当我同步我的数据网络时，会在不同的表中执行 25 到 30 个本地数据库查询。因此大约需要 25 到 30 秒，因为所有数据库查询都以这种方式执行，首先检查本地数据库中是否存在数据，如果存在，然后更新行，否则插入。现在我想问有什么方法可以同时执行这些所有查询。如果我能做到这一点，那么我可以在每次同步中节省 10 到 15 秒。所以请给出一个更好的解决方案来执行多个查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:21:03.543

考虑使用高性能数据库管理系统，例如[cubeSQL](http://prmac.com/release-id-33407.htm)：

> SQLabs 宣布发布 cubeSQL 一个功能齐全的高性能关系数据库管理系统，构建在 sqlite 数据库引擎之上。对于希望将单用户数据库解决方案转换为多用户项目的开发人员以及寻求经济实惠、易于使用和易于维护的数据库管理系统的公司而言，它都是理想的数据库服务器。cubeSQL 在 Windows、Mac、Linux 上运行，它可以嵌入到任何 iOS 和 Cocoa 应用程序中。
> 
> cubeSQL 速度快得令人难以置信，占用空间小，可靠性高，并且提供了一些独特的功能。它可以通过任何 JSON 客户端、PHP、本地 C SDK、Windows DLL 和高度优化的 REAL Studio 插件轻松访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:24:36.790

一次运行 2 个或两个以上的查询是不可能的，因为当 1 个查询运行时，它会锁定数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T06:51:48.927

如果您要执行的所有查询都与不同的表相关，那么在这种情况下，您可以为每个表创建单独的数据库文件。

# ruby-on-rails - 关联和 Collection_select

> ID：16140557
> 
> 赞同：1
> 
> 时间：2013-04-22T06:16:48.680
> 
> 标签：ruby-on-rails

错误：nil:NilClass 的未定义方法“map”

控制器

```
def new 
  @book=Book.new
  @subjects=Subject.find(:all)
end 
```

模型

```
belongs_to :subject
attr_accessible :title, :description, :subject_id
validates_presence_of :title,:description 
```

看法

```
<table>
    <tr>
        <td><b><%= f.label 'Title' %></b></td>
        <td><%= f.text_field :title %></td>
    </tr>
    <tr>
        <td><b><%= f.label 'Description' %></b></td>
        <td><%= f.text_area :description %></td>
    </tr>
    <tr>
        <td><b><%= f.label 'Subject' %></b></td>
        <td><%= f.collection_select(:subject_id,@subjects,:id,:name) %></td>
    </tr>
    <tr>
        <td><%= f.submit 'Save' %></td>
    </tr>
</table> 
```

当我试图在不填写标题和描述的情况下保存时，它向我展示了上述错误。如果我填写标题和描述，那么它工作得很好。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:27:26.747

错误：书籍中的 NoMethodError#create

显示 C:/work/Library/app/views/books/new.html.erb 其中第 21 行提出：

nil:NilClass 的未定义方法 `map' 提取的源代码（第 21 行附近）：

```
18:     <td><%= f.text_area :description %></td></tr>
19: 
20: <tr><td><b><%= f.label 'Subject' %></b></td>
21:     <td><%= f.collection_select(:subject_id,@subjects,:id,:name) %></td></tr>
22: 
23: <tr><td><%= f.submit 'Save' %></td></tr> 
```

控制器：类 BooksController < ApplicationController

```
before_filter :self_load, :only=>[:edit,:show,:update,:destroy]

def index
 @books=Book.where(:subject_id=>params[:id])
end

def new 
 @book=Book.new
 @subjects=Subject.all
end

def create 
 @book=Book.new(params[:book])
   if @book.save
    redirect_to root_url, :notice=>'New Book has been added'
   else 
    render :action=>'new'
   end
end

def edit
end

def update
 if @book.update_attributes(params[:book])
   redirect_to books_path, :notice=>'Book has been updated'
else
   render :action=>'edit'
end
end

def show
end

def destroy
 @book.destroy
 redirect_to root_url
end

def self_load
 @book=Book.find(params[:id])
end
end

class SubjectsController < ApplicationController

before_filter :self_load, :only=>[:edit,:show,:update,:destroy]

def index
 @subjects=Subject.all
 @books=Book.all
end

def new 
 @subject=Subject.new
end

def create 
 @subject=Subject.new(params[:subject])
if @subject.save
   redirect_to root_url, :notice=>'New subject has been added'
else 
   render :action=>'new'
end
end

def edit
end

def update
 if @subject.update_attributes(params[:subject])
   redirect_to root_url, :notice=>'Subject has been updated'
else
   render :action=>'edit'
end
end

def show
end

def destroy
 @subject.destroy
 redirect_to root_url
end

def self_load
 @subject=Subject.find(params[:id])
end

end 
```

模型：类 Book < ActiveRecord::Base

```
 belongs_to :subject

 attr_accessible :title, :description, :subject_id

 validates_presence_of :title,:description

 validates_uniqueness_of :title

 validates_length_of :title, :in=>3..20

 validates_length_of :description, :minimum=>5

end

class Subject < ActiveRecord::Base

 has_many :books, :dependent=> :destroy

 attr_accessible :name

 validates_presence_of :name

 validates_uniqueness_of :name

 validates_length_of :name, :in=>3..10

end 
```

看法：

## 添加新书

<%= form_for(@book) 做 |f| %> <% if @book.errors.any? %>

*   <%= 消息 %>

<% 结束 %>

```
<table>

<tr><td><b><%= f.label 'Title' %></b></td>
 <td><%= f.text_field :title %></td></tr>

<tr><td><b><%= f.label 'Description' %></b></td>
 <td><%= f.text_area :description %></td></tr>

<tr><td><b><%= f.label 'Subject' %></b></td>
 <td><%= f.collection_select(:subject_id,@subjects,:id,:name) %></td></tr>

<tr><td><%= f.submit 'Save' %></td></tr>

</table>

<% end %>

<%= link_to 'Back', root_url %> 
```

当我试图添加一本新书并且我将标题和描述保持为空并尝试保存时，我遇到了未定义的方法映射错误..如果我从我的视图源中删除 collection_select 然后我尝试添加一本新书并保留描述和标题为空并尝试保存它，它显示标题和描述不应该为空......当我的视图源中有collection_select时，如果我填写标题和描述并尝试保存它......它正在工作中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:01:12.013

```
<h2> Add New Book </h2>
<%= form_for(@book) do |f| %>
<% if @book.errors.any? %>
  <ul>
  <% @book.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
  <% end %>
  </ul>
<% end %>

<table>

<tr><td><b><%= f.label 'Title' %></b></td>
<td><%= f.text_field :title %></td></tr>

<tr><td><b><%= f.label 'Description' %></b></td>
<td><%= f.text_area :description %></td></tr>

<tr><td><b><%= f.label 'Subject' %></b></td>
<td><%= f.collection_select(:subject_id,@subjects,:id,:name) %></td></tr>

<tr><td><%= f.submit 'Save' %></td></tr>

 </table>

<% end %>

<%= link_to 'Back', root_url %> 
```

这是我的视图代码。如果我从我的视图代码中删除了collection_select，那么如果我没有填写任何内容并尝试保存，那么它会显示验证错误，如标题不能为空白或描述不能为空白......但是当我使用collection_select时，它会向我展示（错误：未定义的方法`map' for nil:NilClass)...但我希望标题或描述等验证错误不能为空。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-22T06:24:47.807

在您的模型中，您已明确添加验证以检查标题和描述。

```
validates_presence_of :title, :description 
```

如果从模型中删除上述行，则可以在没有这些值的情况下保存。

这是您的线路的答案（除了提到的错误）。但是您没有向我们展示`create`实际创建对象的控制器（操作）中的代码。

# android - 如何通过android中的打印机打印pdf或图像文件？

> ID：16140558
> 
> 赞同：1
> 
> 时间：2013-04-22T06:16:56.967
> 
> 标签：android, android-view

在我的应用程序中，我将视图更改为 PDF，但我不知道如何使用打印机打印文件。

**我对 PDF 代码的看法**

```
//Below layout View is to change PDF 
RelativeLayout MyView = (RelativeLayout)findViewById(R.id.print);
            try{

                View v1 = MyView.getRootView();
                v1.setDrawingCacheEnabled(true);
                bitmap = v1.getDrawingCache();

                if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED)) 
                    {  
                        file =new File(android.os.Environment.getExternalStorageDirectory(),"Test Folder");
                         if(!file.exists())
                        {
                          file.mkdirs();

                         } 
                         //f = new File(file, "filename"+.png);
                         //f= new File(file.getAbsolutePath()+file.separator+"test"+".png");
                        f= new File(file.getAbsolutePath()+file.separator+"test"+".pdf");
                    }
                /*  FileOutputStream ostream = new FileOutputStream(f);                                   
                  bitmap.compress(CompressFormat.PNG, 10, ostream);
                  ostream.close();*/

                 } 
            catch(Exception e){
                e.printStackTrace();
            }

            Document document=new Document();
            try{

                ByteArrayOutputStream stream = new ByteArrayOutputStream();
                bitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);
                byte[] byteArray = stream.toByteArray();

                PdfWriter.getInstance(document,new FileOutputStream(f));
                document.open();
                Image image = Image.getInstance (byteArray);
                document.add(new Paragraph(""));
                document.add(image);               
                document.close();

            }catch(Exception e){
                e.printStackTrace();
            } 
```

我将所有功能都放在打印按钮中，单击打印按钮后将相对布局视图更改为 PDF ，我的疑问是更改为 PDF 文件后我想通过打印机打印该 PDF 文件。我对打印功能一无所知。有人知道请帮我解决这个问题吗？

# c++ - 如何将多图像流添加到 AVI 文件中

> ID：16140559
> 
> 赞同：2
> 
> 时间：2013-04-22T06:16:57.853
> 
> 标签：c++, c, video, video-streaming, avi

我使用 C/C++ 项目作为以下输入从图像帧制作 AVI 文件：

1.  流 1：
    *   每秒帧数：12 fps
    *   帧数：500
2.  流2：
    *   每秒帧数：10 fps
    *   帧数：600
3.  流 3：
    *   每秒帧数：15 fps
    *   帧数：700

使用[avi_utils](http://www.wischik.com/lu/programmer/avi_utils.html)库，我尝试使用`AddAviFrame()`函数将这些帧添加到 AVI 文件中。这样，我只能创建一个帧率对应的帧流。 **是否可以将多个具有不同帧速率的流添加到 AVI 文件中？如果是那么我该怎么做**。我也尝试调用 release 函数`AVIStreamRelease()`，然后打开另一个流`AVIFileCreateStream()`，但它不起作用。请告诉我如何解决这种情况。

```
HAVI CreateAvi(const char *AVIFileName, int frameperiod, const WAVEFORMATEX *wfx)
{ 
  IAVIFile *pfile;
  AVIFileInit();
  HRESULT hr = AVIFileOpen(&pfile, AVIFileName, OF_WRITE|OF_CREATE, NULL);
  if (hr!=AVIERR_OK) {AVIFileExit(); return NULL;}
  TAviUtil *au = new TAviUtil;
  au->pfile = pfile;
  if (wfx==NULL) ZeroMemory(&au->wfx,sizeof(WAVEFORMATEX)); else  CopyMemory(&au->wfx,wfx,sizeof(WAVEFORMATEX));
  au->period = frameperiod;
  au->as=0; au->ps=0; au->psCompressed=0;
  au->nframe=0; au->nsamp=0;
  au->iserr=false;
  return (HAVI)au;
}
HRESULT AddAviFrame(HAVI avi, HBITMAP hbm)
{ 
  if (au->ps==0) // create the stream, if it wasn't there before
  { AVISTREAMINFO strhdr; ZeroMemory(&strhdr,sizeof(strhdr));
    strhdr.fccType = streamtypeVIDEO;// stream type
    strhdr.fccHandler = 0; 
    strhdr.dwScale = au->period;
    strhdr.dwRate = 1000;
    strhdr.dwSuggestedBufferSize  = dibs.dsBmih.biSizeImage;
    SetRect(&strhdr.rcFrame, 0, 0, dibs.dsBmih.biWidth, dibs.dsBmih.biHeight);
    HRESULT hr=AVIFileCreateStream(au->pfile, &au->ps, &strhdr);
    if (hr!=AVIERR_OK) {au->iserr=true; return hr;}
  }
  //Now we can add the frame
  HRESULT hr = AVIStreamWrite(au->psCompressed, au->nframe, 1, dibs.dsBm.bmBits, dibs.dsBmih.biSizeImage, AVIIF_KEYFRAME, NULL, NULL);
  if (hr!=AVIERR_OK) {au->iserr=true; return hr;}
  au->nframe++; return S_OK;
} 
```

谢谢大家。

# javascript - JavaScript 中的函数对象

> ID：16140562
> 
> 赞同：3
> 
> 时间：2013-04-22T06:17:09.260
> 
> 标签：javascript

我认为`Function`对象是 JavaScript 中的唯一实例。所有其他的`function(){...}`或`var xx=function(){...}`都是从这个对象继承的`Function`对象。那是基于原型的语言特性。并且在基于原型的语言中没有`Class`，它的优点之一是对象可以随时更改。例如添加方法或向其中添加属性。所以，我认为我们可以将其视为`object`键值集合。您可以在创建后随时将项目添加到其中。（如果我错了，请纠正我。）

假设你有代码：

```
 Function.test=function(){
            alert(Function.name);//"Function"  
            alert(Function.myName);//"fun"
        };
        Function.name="fun";
        Function.myName="fun";
        Function.test(); 
```

在上面的代码中，我要做的就是`test`向对象添加一个方法`Function`。这段代码没有发现错误。但是为什么`Function.name`不能改变呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:20:56.440

[MDN 的一个页面](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/Name#Description)指出函数的名称不能更改，因为它是只读的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:30:16.217

首先这个属性[不标准](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/Name)。这意味着不同的浏览器可能会按照自己的意愿对待它。第二件事是，根据 MDN，它是只读的。

# f# - 在运行时创建 F# 记录或联合类型（不是其实例）

> ID：16140563
> 
> 赞同：1
> 
> 时间：2013-04-22T06:17:22.063
> 
> 标签：f#, f#-3.0

在运行时创建表示 F# 记录或联合的 System.Type 实例的最佳方法是什么？也就是说，我正在为记录和联合寻找等效的 FSharpType.MakeTupleType。

澄清一下，我对创建实例（即 FSharpValue.MakeRecord 或 FSharpValue.MakeUnion）不感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:41:13.920

我不知道F# 库中的记录和联合的[FSharpType.MakeTupleType等效项。](http://msdn.microsoft.com/en-us/library/ee370461.aspx)

在运行时创建类似记录或联合类型的结构的一种方法是使用[Reflection.Emit](http://msdn.microsoft.com/en-us/library/3y322t50.aspx)。记录类型类似于密封类，联合类型是抽象基类，每种情况都有密封类。

例如，以下函数生成最小 F# 记录类型：

```
open System
open System.Reflection
open System.Reflection.Emit

let MakeRecord(typeName:string, fields:(string * Type)[]) =
    let name = "GeneratedAssembly"
    let domain = AppDomain.CurrentDomain
    let assembly = domain.DefineDynamicAssembly(AssemblyName(name), AssemblyBuilderAccess.RunAndSave)
    let name = "GeneratedModule"
    let dm = assembly.DefineDynamicModule(name, name+".dll")
    let attributes = TypeAttributes.Public ||| TypeAttributes.Class ||| TypeAttributes.Sealed
    let typeBuilder = dm.DefineType(typeName, attributes)
    let con = typeof<CompilationMappingAttribute>.GetConstructor([|typeof<SourceConstructFlags>|])
    let customBuilder = CustomAttributeBuilder(con, [|SourceConstructFlags.RecordType|])
    typeBuilder.SetCustomAttribute(customBuilder)
    let makeField name t =
        let attributes = FieldAttributes.Assembly
        let fieldBuilder = typeBuilder.DefineField(name+"@", t, attributes)
        let attributes = PropertyAttributes.None
        let propertyBuilder = typeBuilder.DefineProperty(name, attributes, t, [||])
        let customBuilder = CustomAttributeBuilder(con, [|SourceConstructFlags.Field|])
        propertyBuilder.SetCustomAttribute(customBuilder)
        let attributes = MethodAttributes.Public ||| MethodAttributes.HideBySig ||| MethodAttributes.SpecialName
        let methodBuilder = typeBuilder.DefineMethod("get_"+name, attributes, t, [||])
        let il = methodBuilder.GetILGenerator()
        il.Emit(OpCodes.Ldarg_0)
        il.Emit(OpCodes.Ldfld, fieldBuilder)
        il.Emit(OpCodes.Ret)
        propertyBuilder.SetGetMethod(methodBuilder)
        fieldBuilder
    let types = fields |> Array.map snd
    let cb = typeBuilder.DefineConstructor(MethodAttributes.Public, CallingConventions.Standard, types)
    let il = cb.GetILGenerator()
    il.Emit(OpCodes.Ldarg_0)
    il.Emit(OpCodes.Call, typeof<obj>.GetConstructor(Type.EmptyTypes))
    fields |> Array.iteri (fun i (name, t) -> 
        let paramName = name.Substring(0,1).ToLower()+name.Substring(1)
        let param = cb.DefineParameter(i+1, ParameterAttributes.In, paramName)
        let fieldBuilder = makeField name t
        il.Emit(OpCodes.Ldarg_0)
        il.Emit(OpCodes.Ldarg, param.Position)
        il.Emit(OpCodes.Stfld, fieldBuilder)
    )
    il.Emit(OpCodes.Ret)
    let t = typeBuilder.CreateType()
    assembly.Save("GeneratedModule.dll")
    t

let r = MakeRecord("MyRecord", [|"Alpha",typeof<int>;"Beta",typeof<string>|]) 
```

请注意，可能还需要生成 Record 类型的预期接口，即缺少 IEquatable、IStructuralEquatable、IComparable 和 IStructuralComparable 的实现。

**更新**

基于上述代码示例的扩展方法 MakeTupleType 和 MakeUnionType 现在可在开源[Fil](https://fil.codeplex.com/)（F# 到 IL 编译器）项目（alpha）中使用。

# php - 从两个表中检索数据，第一个表文本数据第二个表媒体图像。图像失败

> ID：16140567
> 
> 赞同：0
> 
> 时间：2013-04-22T06:17:33.187
> 
> 标签：php, mysql

大家好，我有两张表，一张包含属性信息，第二张是图片

财产。我想通过选择从第二个表中检索属性图像

第一个表一行，但它失败了。它只显示属性而不是图像的信息。

请问有人吗？

```
 <html>
    <body>
    <?php
    require_once('db.php');
    if(isset($_POST['property']))
    {
        $property=$_POST['property'];
        $propertyquery = "SELECT PropertyImageID, PropertyName, PropertyStatus FROM properties WHERE PropertyImageID =$property ";
        $propertyquery_run= mysql_query($propertyquery);
       if (mysql_num_rows($propertyquery_run) > 0) 
          {
        while ($propertyrow = mysql_fetch_array($propertyquery_run)) 
          {?>
            <div>PropertyName: <?php echo $propertyrow['PropertyName']   ?>  </div>
            <div>PropertyStatus: <?php echo $propertyrow['PropertyStatus'] ?>  </div>

    <?php }

        $imagequery ="SELECT PropertyImageID, ImagePath FROM propertyimages WHERE PropertyImageID='".$propertyrow['PropertyImageID']."'";
         $imagequery_run=mysql_query($imagequery);
                if(mysql_num_rows($imagequery_run) > 0)  
                {
                    while ($imagerow = mysql_fetch_array($imagequery_run))  
                    {
                    ?>
                       <div style="border:solid 2px #9F0; border-radius:5px; height:222px; width:544px;">
                       <img src="<?php echo $imagerow['ImagePath'];  ?>" >
                       </div><br />    
                    <?php
                    }

                }
            }
    }
    else
    {
        echo 'Go Back And Set Your Session.Thanks';
    }
    ?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:20:45.950

你的这行

```
$imagequery ="SELECT PropertyImageID, ImagePath FROM propertyimages WHERE PropertyImageID='".$propertyrow['PropertyImageID']."'";                                           
$imagequery_run=mysql_query($imagequery); 
```

现在应该在while循环中，它们不在while循环中。

# r - R - 循环 - 保存整个循环输出

> ID：16140568
> 
> 赞同：1
> 
> 时间：2013-04-22T06:17:33.763
> 
> 标签：r, loops, for-loop

我的数据文件（obs）看起来大概是这样（仅前六行用于说明）

```
date        time    station variable 1 variable 2
22/04/2013    05      10394          4          3
22/04/2013    04      10393          3          5
22/04/2013    07      10389          6          6  
22/04/2013    04      20987          8          1
22/04/2013    02      29483          9          3
22/04/2013    03      49893          5          7 
```

对于具有不同站点数量的几个地区，我有不同的站点编号列表。我想设置一个条件，如果站号包含在站列表中，则原始数据文件（obs）中具有该站号的行应保存到变量 test03 而不是站号为的行不包含在列表中。

示例站列表：

```
10394
10393
10389
29483 
```

对于只有四个站，我是这样做的：

```
bed <- (obs$station == 10394 | obs$station == 10393 | obs$station == 10389 | obs$station == 29483)

test03 <- obs[bed,] 
```

test03 然后看起来像这样：

```
date      time  station  variable 1  variable 2
22/04/2013  05    10394           4           3
22/04/2013  04    10393           3           5
22/04/2013  07    10389           6           6
22/04/2013  02    29483           9           3 
```

到目前为止，这一切都很好。但是，如果我不想单独输入每个站点（如果我有超过 100 个站点左右），我该怎么做呢？我用for循环尝试了它，但后来我只保存了test03中的最后一个站而不是所有站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:26:16.390

我能想到的两种快速方法：

如果每个站点的数据框中都有一行，那么`match`很有可能：

```
df <- data.frame( stations = letters[1:26] , var = runif(26) )
stations <- c("a","b","j")

df[ match( stations , df$stations ) , ]
   stations         var
1         a 0.311261693
2         b 0.002061808
10        j 0.343057454 
```

如果您的数据框中的每个站点都有多个条目，那么使用`%in%`运算符进行子集化应该可以满足您的要求：

```
df[ df$stations %in% stations , ]
   stations         var
1         a 0.311261693
2         b 0.002061808
10        j 0.343057454 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:22:19.310

用于`%in%`测试所有列表。例如这样的：

```
transform(obs,
           bed =  station %in% c(10394,10393,10389,29483))

        date time station variable1 variable2   bed
1 22/04/2013    5   10394         4         3  TRUE
2 22/04/2013    4   10393         3         5  TRUE
3 22/04/2013    7   10389         6         6  TRUE
4 22/04/2013    4   20987         8         1 FALSE
5 22/04/2013    2   29483         9         3  TRUE
6 22/04/2013    3   49893         5         7 FALSE 
```

或更简单地只获得正确的行：

```
obs[obs$station %in% c(10394,10393,10389,29483),]

       date time station variable1 variable2
1 22/04/2013    5   10394         4         3
2 22/04/2013    4   10393         3         5
3 22/04/2013    7   10389         6         6
5 22/04/2013    2   29483         9         3 
```

# c# - 从另一个事件填充gridview组合列中的单个组合框

> ID：16140571
> 
> 赞同：-3
> 
> 时间：2013-04-22T06:17:42.880
> 
> 标签：c#, gridview, window

我在 gridview 中创建了两个 Combobox 列。现在我想根据第一个组合框的值填充第二个组合框（在第一个组合框 selectedValueChanged 事件上）。请回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:33:50.903

一般方法可能如下所示：

```
private MyType1 _selectedItem1;
public MyType1 SelectedItem1
{
    get { return _selectedItem1; }
    set 
    {
        if (_selectedItem1 == value) return;
        _selectedItem1 = value;
        //replace with string implementation, if needed
        OnPropertyChanged(() => SelectedItem1);
        if (_selectedItem1 == ...)
        {
            ItemsSource2 = new List<MyClass2> { ... };
        }
        else if (_selectedItem1 == ...)
        {
            ...
        }
    }
}

private IList<MyType2> _itemsSource2;
public IList<MyType2> ItemsSource2
{
    get { return _itemsSource2; }
    set 
    {
        if (_itemsSource2 == value) return;
        _itemsSource2 = value;
        OnPropertyChanged(() => ItemsSource2);
    }
} 
```

# jquery - 响应式设计：如何调整图像/背景图像的大小并垂直对齐 div？

> ID：16140578
> 
> 赞同：7
> 
> 时间：2013-04-22T06:18:45.283
> 
> 标签：jquery, html, css, responsive-design

我正在尝试响应式设计。我的图像目前没有调整大小。在我的标记中，我还为某些需要调整大小的 div 应用了背景图像。

这是 HTML 视图：http: [//jsbin.com/emojeg/2](http://jsbin.com/emojeg/2)

请参阅此处的代码：http: [//jsbin.com/emojeg/2/edit](http://jsbin.com/emojeg/2/edit)

对于 800px 和 1100px 之间的屏幕宽度，我想调整图像的大小。对于 800 像素以下的任何内容，我想垂直对齐相框 - 无论屏幕宽度允许，每行 1 或 2 个。

目前，当我将浏览器的大小调整为较窄的宽度时，最多有 2 个框架环绕到下一行，但如果我继续调整大小，相框的背景似乎被切断，一些图像似乎消失了。不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T09:58:20.760

这是因为您使用的滑块具有大量绝对定位和固定宽度/高度。我建议使用真正响应的东西，比如 Flexslider ( [http://www.woothemes.com/flexslider/](http://www.woothemes.com/flexslider/) )

但如果您不想这样做，您可以从 .mrpv_container 类中删除 position:relative 和固定高度 --

```
.mrpv_container {
    width: 100%;
    height: 710px;
    position: relative;
    overflow: hidden;
} 
```

其余的 CSS 可能也必须清理，但这会产生预期的效果吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-05T01:02:12.183

为了让您的图像和背景正确调整大小，我建议进行以下更改。

首先使用百分比设置图像宽度和高度，为边缘周围的框架留出足够的空间，并使用`position:relative`从顶部添加百分比偏移量而不是设置边距。您无需担心水平位置，因为它已经居中，除非您想稍微调整它以解决您的帧图像不完全均匀的事实。

```
ul.mrpv_slider li div img {
    position:relative;
    top:11%;
    width:67%;
    height:78%;
} 
```

然后添加`background-size:100% 100%`到 *image_container* 以便框架的背景图像调整大小以匹配容器。

```
ul.mrpv_slider li div.image_container { 
    text-align:center;
    background-image:url(http://i36.tinypic.com/5feusn.png);
    background-position:bottom;
    background-repeat:no-repeat;
    margin-right:10px;
    display:inline-block;
    zoom: 1;
    *display: inline;
    height:324px;
    width:250px;

    /* this is the line you need to add */
    background-size:100% 100%;
} 
```

此时，您可以在媒体查询中覆盖容器的*宽度*和*高度*，并且图像和框架都将自行调整。

我不确定您打算在窗口大小更改时对布局做什么，但是您当前将宽度设置为 100% 并将高度设置为自动的媒体查询肯定不起作用。

举个例子，当屏幕宽度小于 600 像素时，您可以使用如下查询将图像缩小一半：

```
@media screen and (max-width: 600px) {
    ul.mrpv_slider li div.image_container {
        height:162px
        width:125px;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-30T12:07:05.083

我也一直在尝试响应式设计，发现 Twitter 的“引导程序”非常有用。它只有 3 个文件，我用它来构建我的所有网站。如果您还没有，请检查一下：http: [//twitter.github.io/bootstrap/](http://twitter.github.io/bootstrap/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-04T15:36:01.493

好吧，我使用 twitter bootstrap 和[http://responsiveimg.com/](http://responsiveimg.com/)来使图像响应并根据屏幕和图像大小固定纵横比。

如果您使用的是图像滑块，那么 jquery bxslider 也很有帮助

# php - PHP href 更新或切换 sql 中的 true 1 或 false 0 值

> ID：16140581
> 
> 赞同：0
> 
> 时间：2013-04-22T06:18:57.683
> 
> 标签：php, sql-update, toggle, href

我有一个从数据库输出的产品列表，我希望可以选择将产品设为“收藏”产品，并在收藏值为“1”时显示彩色图标，或在“0”时显示灰色图标因为不是最喜欢的。

我的问题是如何将变量更改/切换/更新为“0”，如果它当前为“1”，以及如何更改为“1”，当前为“0”且具有相同的href。

我可以使用以下内容正确显示上述内容...

```
$favourite = $row["favourite"];

switch(strtoupper($favourite))
{
case '0': $favourite_img = 'heart_16-no'; break;
case '1': $favourite_img = 'heart_16'; break;
default: $favourite_img = 'heart_16-no'; break;
}

$fav_img = "<img src='https://www.mysite.com/storeadmin/img/Basic_set_Png/$favourite_img.png'>"; 
```

我通过href将数据库中的产品值更新为“1”，并在必要时将以下内容更新为“0”...

```
//make item favourite
if(isset($_GET['favouriteid'])){
$id_to_favourite = $_GET['favouriteid'];
$sql = mysql_query("UPDATE products SET favourite=1 WHERE id='$id_to_favourite' LIMIT 1") or die (mysql_error());
header("location: inventory_list.php");
exit();
} 
```

我敢肯定这很容易我只是不知道正确的方法，所以可以真正搜索任何参考。

大概是这样的……

```
if(isset($_GET['favouriteid'])){
  $id_to_favourite = $_GET['favouriteid'];
  if (isset($row["favourite"]) && $row['favourite'] == '0') {
  mysql_query("UPDATE products SET favourite=1 WHERE id='$id_to_favourite' LIMIT 1") or die (mysql_error());
    } else if (isset($row["favourite"]) && $row['favourite'] == '1') {
    mysql_query("UPDATE products SET favourite=0 WHERE id='$id_to_favourite' LIMIT 1") or die (mysql_error());
    }
    header("location: inventory_list.php");
    exit();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:21:34.427

由于它是一个布尔值，您可以使用`bang`(!) 来反转或切换它

例如，

```
UPDATE products SET favourite = !favourite WHERE id='$id_to_favourite' LIMIT 1 
```

这只会将 0 更改为 1，或 1 更改为 0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:23:37.177

请注意，`intval()`在您的查询中实际使用它之前，您应该始终使用您所谓的整数输入（xss 无处不在！）。也就是说，只需`!`在列前面使用运算符（true = 1，false = 0，因此您可以使用这些）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T06:29:18.853

你可以使用三元运算符

```
$fav = (isset($row["favourite"]) && $row['favourite'] == '0') ? 1 : 0; 
```

然后像这样运行您的查询

```
"UPDATE products SET favourite = $fav WHERE id='$id_to_favourite' LIMIT 1" 
```

# r - R通过任意点绘制（abline + lm）最佳拟合线

> ID：16140582
> 
> 赞同：14
> 
> 时间：2013-04-22T06:18:57.880
> 
> 标签：r, plot, line, point, least-squares

我正在尝试使用它来绘制一条最小二乘回归线`abline(lm(...))`，它也被迫通过一个特定的点。我看到[这个问题](https://stackoverflow.com/questions/7333203/linear-regression-with-explicit-intercept-in-r)是相关的，但不是我想要的。这是一个例子：

```
test <- structure(list(x = c(0, 9, 27, 40, 52, 59, 76), y = c(50, 68, 
79, 186, 175, 271, 281)), .Names = c("x", "y"))

# set up an example plot
plot(test,pch=19,ylim=c(0,300),
     panel.first=abline(h=c(0,50),v=c(0,10),lty=3,col="gray"))

# standard line of best fit - black line
abline(lm(y ~ x, data=test))

# force through [0,0] - blue line
abline(lm(y ~ x + 0, data=test), col="blue") 
```

这看起来像：

![在此处输入图像描述](https://i.stack.imgur.com/jk6I1.png)

现在我将如何强制一条线穿过标记的任意点，`(x=10,y=50)`同时仍然最小化与其他点的距离？

```
# force through [10,50] - red line
?? 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-22T06:28:08.723

一个粗略的解决方案是将模型的原点移动到该点并创建一个没有截距的模型

```
nmod <- (lm(I(y-50)~I(x-10) +0, test))

abline(predict(nmod, newdata = list(x=0))+50, coef(nmod), col='red') 
```

![在此处输入图像描述](https://i.stack.imgur.com/8bbKB.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T06:36:55.323

您可以修改公式`lm()`并偏移数据：

```
p=10
q=50

abline(lm(I(y-q) ~ I(x-p) + 0, data=test), col="red") 
```

# java - java中的多部分base64图像发布

> ID：16140583
> 
> 赞同：0
> 
> 时间：2013-04-22T06:19:01.490
> 
> 标签：java, string, image, base64, httpurlconnection

我有一个 httpurlconnection 代码，用于将数据发布到服务器。当我尝试发送小数据时没关系，但是当我尝试发送 base64 图像字符串时，服务器没有正确接收到该字符串。我已经检查了从 jpg 转换的 base64 字符串，并且编码没问题。因此，导致字符串损坏的 http 进程存在问题。最初我认为可能是导致问题的大图像，但使用非常小的图像只会将部分图像传输到服务器，其余部分已损坏。有人可以建议我如何将 base64 图像字符串发送到服务器。我的代码如下：

```
HttpURLConnection hpcon= (HttpURLConnection) Url.openConnection();
        hpcon.setRequestMethod("POST");
        hpcon.setConnectTimeout(5 * 1000);
        hpcon.setDoOutput(true);
        OutputStreamWriter osw= new OutputStreamWriter(hpcon.getOutputStream());
        osw.write(data);
        osw.close(); 
```

数据类似于：

> key=YeP1r&nodeId=5&typeId=9&status=0&eventImage=imageString

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:32:38.557

找不到使用 HttpUrlConnection 的直接解决方案。使用：来自 apache 的 httpClient。实际上很容易使用。
[最后一个例子多部分](http://hc.apache.org/httpcomponents-client-ga/examples.html)

# perl - 使用 XAMPP 和 Ubuntu 安装 Perl 模块

> ID：16140591
> 
> 赞同：2
> 
> 时间：2013-04-22T06:19:42.710
> 
> 标签：perl, ubuntu, xampp, cpan

我一直在到处寻找，但我似乎没有得到它。我想用 Ubuntu 在我当前的 XAMPP 设置上安装一个 perl 模块。我到处寻找并尝试过，这两个似乎很有希望。

[http://www.apachefriends.org/f/viewtopic.php?p=135509](http://www.apachefriends.org/f/viewtopic.php?p=135509)

命令：/opt/lampp/bin/perl -MCPAN -e '安装 MIME::Lite'

[http://www.cpan.org/modules/INSTALL.html](http://www.cpan.org/modules/INSTALL.html)

命令：cpanm MIME::Lite

这两个命令都很好地安装了模块，但是当我使用它时，它给了我一个服务器错误，指出找不到模块 MIME::Lite。下面是错误信息。

错误消息：在@INC 中找不到 MIME/Lite.pm（@INC 包含：/root/perl5/lib/perl5/x86_64-linux-gnu-thread-multi /root/perl5/lib/perl5/i686-linux /root/perl5/lib/perl5 /opt/lampp/lib/perl5/5.10.1/i686-linux /opt/lampp/lib/perl5/5.10.1 /opt/lampp/lib/perl5/site_perl/5.10.1 /i686-linux /opt/lampp/lib/perl5/site_perl/5.10.1 . /opt/lampp) 在 /opt/lampp/htdocs/xampp/unlibolt/login/homepage.pl 第 8 行。开始失败--编译中止在 /opt/lampp/htdocs/xampp/unlibolt/login/homepage.pl 第 8 行。，

请帮忙。

我还想补充一点，我执行了相同的命令（/opt/lampp/bin/perl -MCPAN -e 'install DBI'）并且它正确安装了 DBI，并且由于某种原因在我尝试安装 MIME 时没有安装：：精简版和 JSON。

# android - 在 Android 中，对接状态是什么意思

> ID：16140594
> 
> 赞同：5
> 
> 时间：2013-04-22T06:19:57.303
> 
> 标签：android, android-intent, dock

Intent中有一个常量名为`ACTION_DOCK_EVENT`

在`API level 5`
广播动作中添加：用于更改设备物理对接状态的粘性广播。

对接状态是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:35:24.323

Android 设备可以停靠到几种不同类型的停靠设备中。这些包括汽车或家庭码头以及数字与模拟码头。因此，当设备的扩展坞发生更改时，它会引发以下意图`ACTION_DOCK_EVENT`

如果设备已对接，则可以将其对接在四种不同类型的对接中的任何一种中：

*   车
*   桌子
*   低端（模拟）办公桌
*   高端（数字）办公桌

资源[在这里](http://developer.android.com/training/monitoring-device-state/docking-monitoring.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:35:22.400

> 对接状态是什么意思

对接状态通常是指您的充电状态，可能是`car`、或`home dock`，Android 设备可以对接到几种不同类型的 Dock 中。`digital``analog docks`

**确定当前的对接状态**

详细`dock-state`信息作为附加内容包含在`ACTION_DOCK_EVENT`动作的粘性广播中。因为它是`sticky`，所以您不需要注册`BroadcastReceiver`. 您可以简单地调用`registerReceiver()`传入 null 作为广播接收器，如下一个片段所示。

```
IntentFilter ifilter = new IntentFilter(Intent.ACTION_DOCK_EVENT);
Intent dockStatus = context.registerReceiver(null, ifilter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-01T15:43:11.333

停靠状态详细信息作为附加内容包含在 ACTION_DOCK_EVENT 操作的粘性广播中。因为它是粘性的，所以不需要注册 BroadcastReceiver。您可以简单地调用 registerReceiver() 传入 null 作为广播接收器，如下一个片段所示。

```
 mContext = getApplicationContext();
        IntentFilter ifilter = new IntentFilter(Intent.ACTION_DOCK_EVENT);
        Intent dockStatus = registerReceiver(null, ifilter); 
```

您可以从 EXTRA_DOCK_STATE extra 中提取当前的对接状态：

```
 int dockState = (dockStatus == null ?
            Intent.EXTRA_DOCK_STATE_UNDOCKED :
            dockStatus.getIntExtra(Intent.EXTRA_DOCK_STATE, -1));
        boolean isDocked = dockState != Intent.EXTRA_DOCK_STATE_UNDOCKED;
        boolean isCar = dockState == Intent.EXTRA_DOCK_STATE_CAR; 
```

每当设备停靠或取消停靠时，都会广播 ACTION_DOCK_EVENT 操作。要监控设备停靠状态的变化，只需在应用程序清单中注册一个广播接收器，如下面的片段所示：action android:name="android.intent.action.ACTION_DOCK_EVENT"

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-14T07:45:31.760

来自[GeeksForGeeks](https://www.geeksforgeeks.org/how-to-check-if-the-android-device-is-in-dock-state/)帖子：

> 坞站是能够与 Android 内核通信以触发与坞站相关的事件并修改坞站文件状态的设备。扩展坞可以使系统和应用程序执行任何已编程的操作。一个示例是在停靠状态下显示不同的布局。它还可以打开一个音乐播放器应用程序，在桌面模式下自动播放音乐，如果它是这样编程的，在汽车模式下打开一个地图/导航应用程序等。Dock Mode 在不同的手机上是不同的，但它通常会把你的手机变成一个座钟、照片幻灯片查看器或音乐播放器。您还可以在接听电话时将其设置为免提。扩展坞内置于自放大扬声器或音乐盒中，或者它是通过 USB 连接到计算机、充电器或家庭影院设备的独立单元。一些坞站使用 USB 充电，使用蓝牙播放音乐。此模式是可以在某些手机（包括许多三星手机）上检测到的功能，但不是在每部手机或手机的每个版本上都可以检测到的功能。例如，三星 Galaxy S2、S3 和 S4 有底座模式，但 S5 没有。请检查您的手机功能以确保您的手机配备底座模式。

# asp.net-mvc - 如何在 MVC 的单个视图中添加编辑、删除和搜索功能？

> ID：16140596
> 
> 赞同：2
> 
> 时间：2013-04-22T06:20:07.853
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, html-helper

我是新手`MVC`。

在 MSDN 上，我研究过应该有`view`同名的文件夹`controller`。对于其中的每一个`Action Method`，`controller`我们必须`View`在同一个文件夹中创建一个。

**我正在创建一个测试应用程序，其中：**

我有`homeController`一个`Index ActionMethod`. 对应于它，我有一个`View`in `View/home/Index`，它只是显示员工的列表。

我知道我可以`[HTTP POST] Index ActionMethod`在`homeController`.

但我想在视图上添加`Delete`和`Search`功能。这样用户就可以搜索具有该名称的员工，并可以在同一页面上删除员工。

我不知道如何才能继续使用此功能。

我仍在使用此代码。

**`homeController`**

```
public ActionResult Index()
    {
        ViewBag.text = "Records Listing";
        var q = from p in objEmp.tbemployees select p;
        return View(q);
    } 
```

**索引.cshtml**

```
 @model IEnumerable<MvcApplication6.Models.tbemployee>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h1>@ViewBag.text</h1>
<table style="font-size:15px;">
    <tr>
        <th>
            Name
        </th>
        <th>
            Address
        </th>
        <th>
            Sallary
        </th>
    </tr>
    @foreach (var item in Model)
    {
        <tr >
            <td style="padding:7px;">
                @Html.DisplayFor(mm => item.ename)
            </td>
            <td style="padding:7px;">
              @Html.DisplayFor(mm => item.eadd)
            </td>
            <td style="padding:7px;">
              @Html.DisplayFor(mm => item.esal)
            </td>
              <td style="padding:7px; color:Blue; text-decoration:underline;">
            @Html.ActionLink("Edit", "Edit", new { id = item.empno })
            </td>

        </tr>
    }
</table> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:25:05.190

对于删除，您可以在表中添加一列，该列将调用控制器操作并将当前记录 ID 传递给它：

```
<tr>
    <td style="padding:7px;">
        @Html.DisplayFor(mm => item.ename)
    </td>
    <td style="padding:7px;">
        @Html.DisplayFor(mm => item.eadd)
    </td>
    <td style="padding:7px;">
        @Html.DisplayFor(mm => item.esal)
    </td>
    <td style="padding:7px; color:Blue; text-decoration:underline;">
        @Html.ActionLink("Delete", "Delete", new { id = item.empno })
        @Html.ActionLink("Edit", "Edit", new { id = item.empno })
    </td>
</tr> 
```

和您的删除操作：

```
public ActionResult Delete(int id)
{
    ... use the passed id to delete the record from the database
    return RedirectToAction("Index");
} 
```

对于 Edit 功能，您可以有一个控制器操作来获取记录并呈现允许编辑的视图：

```
public ActionResult Edit(int id)
{
    var employee = objEmp.tbemployees.FirstOrDefault(x => x.Id == id);
    if (employee == null)
    {
        // no employee with the specified id was found
        return new HttpNotFound();
    }
    return View(employee);
} 
```

然后你可以有一个相应的`~/Views/Home/Edit.cshtml`视图：

```
@model Employee
@using (Html.BeginForm())
{
    <div>
        @Html.LabelFor(x => x.ename)
        @Html.EditorFor(x => x.ename)
    </div>
    <div>
        @Html.LabelFor(x => x.eadd)
        @Html.EditorFor(x => x.eadd)
    </div>

    ...

    <button type="submit">Save</button>
} 
```

当然还有在提交此表单时更新记录的相应操作：

```
[HttpPost]
public ActionResult Edit(Employee employee)
{
    ... update the employee record
    return RedirectToAction("Index");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:24:37.207

您可以在控制器中添加和实现`Delete`操作方法。然后在您看来，调用`@Html.ActionLink("Delete", "Delete", new { id = item.empno })`. 这将返回一个链接到`Delete`控制器中的方法的超链接。

# php - javascript事件不处理脚本

> ID：16140598
> 
> 赞同：1
> 
> 时间：2013-04-22T06:20:13.483
> 
> 标签：php, javascript, html, css

我的javascript遇到了一个尴尬的问题，基本上我已经编写了以下javascript来删除我页面中动态添加的li标签，但它没有处理，javascript是：

```
$(document).ready(function(e) 
{
    $(".close").on("click", this, function() 
    {
        $(this).closest("li").remove();
        var panelId = $(this).closest('li').attr('href');
        // $(this).closest('#content').remove();
        // $('#tab1').remove();
        $('#nav-tabs a:last').tab('show');

            $('#close1').on('click',this, function() 
            {
                $('.tab1').remove();
                $('#nav-tabs a:last').tab('show');
            })

            $('#close2').on('click',this, function() 
            {
                $('.tab2').remove();
                $('#nav-tabs a:last').tab('show');
            }) 

            $('#close3').on('click',this, function() 
            {
                $('.tab3').remove();
                $('#nav-tabs a:last').tab('show');
            })

        })
        if(counter <= 1){
            counter = 1;
        }else  {
            counter--;
        }
        return false;
    })
}); 
```

问题是当我/用户点击 .close[button has close class] 时，这个 javascript 什么也不做，即使它应该删除最近的 li 标签；此外，当我将其粘贴到添加 javascript[javascript to add li tags] 中时，它开始工作！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:26:46.870

问题是您要删除第`li`一个，然后再尝试读取其中一个属性。

在完成所有需要访问它或其属性的东西`li` *之后*，您需要删除它。

IE

```
$(document).ready(function(e) {
    $(document).on("click", ".close", function() {

        var panelId = $(this).closest('li').attr('href'); // get the href first
        $(this).closest("li").remove(); // now delete the li

        ...

    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:25:11.950

尝试这个：

```
$(document).ready(function(e) 
{
    $(document).on("click", ".close", function() 
    {
        $(this).closest("li").remove();
        var panelId = $(this).closest('li').attr('href');
        // $(this).closest('#content').remove();
        // $('#tab1').remove();
        $('#nav-tabs a:last').tab('show');

            $(document).on('click','#close1', function() 
            {
                $('.tab1').remove();
                $('#nav-tabs a:last').tab('show');
            })

            $(document).on('click','#close2', function() 
            {
                $('.tab2').remove();
                $('#nav-tabs a:last').tab('show');
            }) 

            $(document).on('click','#close3', function() 
            {
                $('.tab3').remove();
                $('#nav-tabs a:last').tab('show');
            })

        })
        if(counter <= 1){
            counter = 1;
        }else  {
            counter--;
        }
        return false;
    })
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T06:27:16.677

您在阅读`li`之前删除了`id`，所以也`panelId`将`undefined`不得不使用基于事件委托的事件处理

```
$(document).ready(function(e) {

    $('#close1').on('click', this, function() {
                $('.tab1').remove();
                $('#nav-tabs a:last').tab('show');
            })

    $('#close2').on('click', this, function() {
                $('.tab2').remove();
                $('#nav-tabs a:last').tab('show');
            })

    $('#close3').on('click', this, function() {
                $('.tab3').remove();
                $('#nav-tabs a:last').tab('show');
            })

    $(document).on("click", ".close", function() {
                var panelId = $(this).closest('li').attr('href');
                $(this).closest("li").remove();
                $('#nav-tabs a:last').tab('show');
            })

    if (counter <= 1) {
        counter = 1;
    } else {
        counter--;
    }
    return false;
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T06:31:41.753

最明显的原因是当您绑定事件时，`.close`DOM 中不存在任何元素。一个简单的解决方案是使用[jQuery on()](http://api.jquery.com/on/)`event delegation`也可以实现。换句话说，该事件将绑定到另一个元素，即所需目标元素的父元素。这样，您只需绑定一次事件，而不必在运行时的每个新元素上重新绑定它。例如

```
$(window).click('.close',yourCloseFunction); 
```

# git - git format-patch/am 的问题（补丁不适用）

> ID：16140604
> 
> 赞同：15
> 
> 时间：2013-04-22T06:20:35.667
> 
> 标签：git, version-control

我正在尝试对我的 repo 应用一些补丁，并获取消息`patch does not apply`，除非我指定 params `--ignore-space-change --ignore-whitespace`。即使使用这些密钥也无法应用某些补丁，它表示存在需要手动解决的冲突。（但实际上那里没有冲突，自动合并必须解决这个问题）

我做了一个实验：从我的 repo 中的提交创建一个补丁，将 master 重置为上一个提交，尝试从文件中应用补丁。同样的错误信息。

任何想法，为什么会发生这种情况？

UPD 命令非常简单：

```
git format-patch -o ../_patches 0f3bf7874c32b22256ae2d9dc00b1afd6464e43c
git reset --hard 0f3bf7874c32b22256ae2d9dc00b1afd6464e43c
git am ../_patches/0001-test2.patch 
```

（这个 id 是指最后一次之前的第一次提交）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-22T10:13:12.760

您需要将`--keep-cr`标志传递给`git am`. 这很不幸，但由于存在竞争标准（电子邮件工作流程与本地），确实没有太多选择。

您可能还想尝试设置`.gitattributes`文件。尝试重新创建您的问题，当我将文件指定为需要 CRLF 时，我能够让事情正常工作。请注意，在没有首先规范化文件的情况下，它确实将整个文件显示为已修改。我通常使用 a `.gitattributes`：

```
.gitattributes  export-ignore
.gitignore      export-ignore

*.txt           text
*.C             text trailing-space space-before-tab -indent-with-non-tab
*.rst           text trailing-space space-before-tab -indent-with-non-tab
*.clj           text trailing-space space-before-tab -indent-with-non-tab

*.c             text diff=cpp trailing-space space-before-tab -indent-with-non-tab
*.cpp           text diff=cpp trailing-space space-before-tab -indent-with-non-tab
*.h             text diff=cpp trailing-space space-before-tab -indent-with-non-tab
*.hpp           text diff=cpp trailing-space space-before-tab -indent-with-non-tab
*.py            text diff=python trailing-space space-before-tab -indent-with-non-tab
*.tex           text diff=tex
*.java          text diff=java trailing-space space-before-tab -indent-with-non-tab
*.pl            text diff=perl trailing-space space-before-tab -indent-with-non-tab
*.php           text diff=php
*.rb            text diff=ruby trailing-space space-before-tab -indent-with-non-tab

*.vcproj        eol=crlf
*.dsp           eol=crlf
*.dsw           eol=crlf

*.sh            eol=lf

*.jpg           binary
*.png           binary
*.gif           binary
*.tiff          binary 
```

您需要根据[gitattributes 手册页](http://git-scm.com/docs/gitattributes)规范您的行尾。另一个 SO 用户最终也关闭了[`core.autocrlf`以](https://stackoverflow.com/questions/16082802/why-does-github-think-my-code-has-differences/16082900#comment-22988698)获取干净的提交和补丁。

**试图重现你的错误**

```
$ git init repo
Initialized empty Git repository in c:/tmp/git-eol/repo/.git/
$ cd repo
$ git config --local core.autocrlf false
$ vim foo.txt
$ git add foo.txt
$ git commit -m "Add foo."
[master (root-commit) 3903abd] Add foo.
 1 file changed, 3 insertions(+)
 create mode 100644 foo.txt
$ vim foo.txt
$ git st
## master
 M foo.txt
$ git commit -m "Add more foo." -a
[master 03e991a] Add more foo.
 1 file changed, 2 insertions(+)
$ git format-patch HEAD~1
0001-Add-more-foo.patch
$ vim 0001-Add-more-foo.patch 
```

查看生成的补丁文件，我看到：

[![](https://i.imgur.com/eC9g2xN.png "Vim 中的补丁视图")](https://imgur.com/eC9g2xN)

如您所见，回车符 ( `^M`s) 保留在补丁中。这是与`core.autocrlf=false`. 继续，我看到：

```
$ git reset --hard HEAD~1
HEAD is now at 3903abd Add foo.
$ git am 0001-Add-more-foo.patch
Applying: Add more foo.
error: patch failed: foo.txt:1
error: foo.txt: patch does not apply
Patch failed at 0001 Add more foo.
The copy of the patch that failed is found in:
   c:/tmp/git-eol/repo/.git/rebase-apply/patch
When you have resolved this problem, run "git am --resolved".
If you prefer to skip this patch, run "git am --skip" instead.
To restore the original branch and stop patching, run "git am --abort".
$ git am --abort 
```

所以补丁不能很好地开箱即用。使用`--keep-cr`符合预期：

```
$ git am --keep-cr 0001-Add-more-foo.patch
Applying: Add more foo.
$ 
```

好的。因此，让我们尝试一下`core.autocrlf=true`（在不同的存储库中）：

```
# Removed the initial commands...
$ git format-patch HEAD~1
0001-Add-more-foo.patch
$ git reset --hard HEAD~1
HEAD is now at 525b5aa Initial commit.
$ git am 0001-Add-more-foo.patch
Applying: Add more foo.
$ git config --get core.autocrlf
true 
```

在这种情况下，补丁到处都有 LF 结尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T09:52:53.930

啊哈！看来我已经找到原因了。存储库使用 CRLF 行结尾，但 format-patch 使用 LF 创建补丁文件。当我使用 autocrlf=false 从头创建一个仓库并进行相同的实验时，我遇到了同样的问题。（看起来像 Git 中的一个错误）
任何建议如何解决这个问题？

UPD 我的解决方案是使用 autocrlf=true 创建一个新的存储库，然后将两个存储库中的所有更改重新导入其中。

# android - 如何创建这种类型的滑块来打开下一个屏幕？

> ID：16140612
> 
> 赞同：0
> 
> 时间：2013-04-22T06:21:39.813
> 
> 标签：android, slider

我想创建一个滑块来移动下一个和上一个屏幕，如下图所示

![在此处输入图像描述](https://i.stack.imgur.com/BfWQ7.png)

我已经为应用程序实现了滑动功能，例如如果用户向左或向右滑动，他/她可以在下一个和上一个屏幕中移动，但是如何在屏幕的特定区域实现滑动以及如何获得这种类型的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:32:34.630

这是以下事情的工作

1.  为滑块背景重复的背景图像，用于锁定和解锁的图像，用于按钮选择的图像。

2.  您需要的活动如下

    1.  锁定图像上的触摸事件 执行的操作将是该按钮到您拇指的 x 位置的转换，您可以获取触摸事件中的坐标 ActionDown 将是您开始按下的位置，向上将是您释放它的位置。

所以这可以帮助构建这个滑块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:27:26.813

您可以为此使用[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)。

[http://developer.android.com/training/animation/screen-slide.html](http://developer.android.com/training/animation/screen-slide.html)

# jasper-reports - 转移到下一页的行在当前页（或阻止打印的上一页）中计算

> ID：16140613
> 
> 赞同：1
> 
> 时间：2013-04-22T06:21:50.427
> 
> 标签：jasper-reports

我如何理解报告的*详细信息*部分中的特殊行（Slpit Type = prevent）已转移到下一页以防止拆分？

我需要这样做，因为我有一个每行有一个数字列（假设它的名称是数量）的报告，我想显示每一页中所有记录的该列的总和，所需的值将根据数量列的总和计算当前页面和所有以前的页面（假设它的名称是 qSum）。如果我允许拆分详细带行，没有问题，但是当我阻止拆分时，拆分行的数量列值将添加到当前页面的计算总和（qSum）中，但行本身将显示在下一页！

任何想法 ？

换句话说，我如何强制总和仅适用于该页面上出现的行。（不包括转移行）

我的列总和是列页脚。

以下是我报告的部分内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="generalLedger01" pageWidth="842" pageHeight="595" orientation="Landscape" columnWidth="806" leftMargin="18" rightMargin="18" topMargin="4" bottomMargin="14" isFloatColumnFooter="true">
    <parameter name="zero" class="java.math.BigDecimal" isForPrompting="false">
        <property name="&quot;&quot;" value="0"/>
        <defaultValueExpression><![CDATA[new BigDecimal(0)]]></defaultValueExpression>
    </parameter>
    <parameter name="firstPageNumber" class="java.lang.Integer">
        <defaultValueExpression><![CDATA[0]]></defaultValueExpression>
    </parameter>
    <parameter name="budgetAllocation" class="java.math.BigDecimal">
        <property name="&quot;&quot;" value="0"/>
        <defaultValueExpression><![CDATA[new BigDecimal(0)]]></defaultValueExpression>
    </parameter>
    <parameter name="lastPageNumber" class="java.lang.Integer">
        <defaultValueExpression><![CDATA[0]]></defaultValueExpression>
    </parameter>
    <parameter name="paramYear" class="java.lang.Long">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="paramAccCode" class="java.math.BigDecimal">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <queryString>
        <![CDATA[SELECT
     voucher.`rec_no` AS voucher_rec_no,
     voucher.`acc_code` AS voucher_acc_code,
     voucher.`acc_name` AS voucher_acc_name,
     voucher.`pers_code` AS voucher_pers_code,
     voucher.`mult_single` AS voucher_mult_single,
     voucher.`debit_credit` AS voucher_debit_credit,
     voucher.`corr_ac_code` AS voucher_corr_ac_code,
     voucher.`voucher_no` AS voucher_voucher_no,
     voucher.`conv_rate` AS voucher_conv_rate,
     voucher.`entry_amount` AS voucher_entry_amount,
     voucher.`dollar_taka` AS voucher_dollar_taka,
     voucher.`details_1` AS voucher_details_1,
     voucher.`details_2` AS voucher_details_2,
     voucher.`details_3` AS voucher_details_3,
     voucher.`gj_1` AS voucher_gj_1,
     voucher.`gj_2` AS voucher_gj_2,
     voucher.`gj_3` AS voucher_gj_3,
     voucher.`amount` AS voucher_amount,
     voucher.`voucher_tag` AS voucher_voucher_tag,
     voucher.`voucher_date` AS voucher_voucher_date,
     voucher.`voucher_day` AS voucher_voucher_day,
     voucher.`voucher_month` AS voucher_voucher_month,
     voucher.`voucher_year` AS voucher_voucher_year,
     voucher.`voucher_quater` AS voucher_voucher_quater,
     code.code_name as codeName,
     subcode.sub_code_name as subCodeName
FROM
     `voucher` voucher, `code` code,`sub_code` subcode

where (  ((code.code=$P{paramAccCode})or(subcode.sub_code=$P{paramAccCode}))
         and
            voucher.`voucher_year`=$P{paramYear}
       and
            ( voucher.`acc_code`=$P{paramAccCode}
              or
             voucher.`corr_ac_code`=$P{paramAccCode}
            )
      )

GROUP BY

     voucher.`voucher_quater`,
     voucher.`voucher_month` ,
     voucher.`voucher_day` ,
     voucher.`rec_no`;]]>
    </queryString>
    <field name="voucher_rec_no" class="java.math.BigInteger"/>
    <field name="voucher_acc_code" class="java.math.BigDecimal"/>
    <field name="voucher_acc_name" class="java.lang.String"/>
    <field name="voucher_pers_code" class="java.math.BigDecimal"/>
    <field name="voucher_mult_single" class="java.lang.String"/>
    <field name="voucher_debit_credit" class="java.lang.String"/>
    <field name="voucher_corr_ac_code" class="java.math.BigDecimal"/>
    <field name="voucher_voucher_no" class="java.lang.String"/>
    <field name="voucher_conv_rate" class="java.math.BigDecimal"/>
    <field name="voucher_entry_amount" class="java.math.BigDecimal"/>
    <field name="voucher_dollar_taka" class="java.lang.String"/>
    <field name="voucher_details_1" class="java.lang.String"/>
    <field name="voucher_details_2" class="java.lang.String"/>
    <field name="voucher_details_3" class="java.lang.String"/>
    <field name="voucher_gj_1" class="java.lang.String"/>
    <field name="voucher_gj_2" class="java.lang.String"/>
    <field name="voucher_gj_3" class="java.lang.String"/>
    <field name="voucher_amount" class="java.math.BigDecimal"/>
    <field name="voucher_voucher_tag" class="java.lang.String"/>
    <field name="voucher_voucher_date" class="java.lang.String"/>
    <field name="voucher_voucher_day" class="java.lang.Long"/>
    <field name="voucher_voucher_month" class="java.lang.Long"/>
    <field name="voucher_voucher_year" class="java.lang.Long"/>
    <field name="voucher_voucher_quater" class="java.lang.Long"/>
    <field name="codeName" class="java.lang.String"/>
    <field name="subCodeName" class="java.lang.String"/>
    <variable name="balance" class="java.math.BigDecimal">
        <variableExpression><![CDATA[((($F{voucher_debit_credit}.equals("A"))&&(!(($F{voucher_corr_ac_code}).equals($P{paramAccCode}))))?($V{balance}.add($F{voucher_amount})):($V{balance}.subtract($F{voucher_amount})))]]></variableExpression>
        <initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
    </variable>
    <variable name="balance_tk" class="java.math.BigDecimal">
        <variableExpression><![CDATA[((($F{voucher_debit_credit}.equals("A"))&&(!(($F{voucher_corr_ac_code}).equals($P{paramAccCode}))))?($V{balance_tk}.add($F{voucher_entry_amount})):($V{balance_tk}.subtract($F{voucher_entry_amount})))]]></variableExpression>
        <initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
    </variable>
    <variable name="balance_credit" class="java.math.BigDecimal" resetType="Column" calculation="Sum">
        <variableExpression><![CDATA[$F{voucher_amount}]]></variableExpression>
    </variable>
    <variable name="balance_debit" class="java.math.BigDecimal" resetType="Column" calculation="Sum">
        <variableExpression><![CDATA[$F{voucher_amount}]]></variableExpression>
    </variable>
    <variable name="monthTotalDebit" class="java.math.BigDecimal" calculation="Sum">
        <variableExpression><![CDATA[((($F{voucher_debit_credit}.equals("A"))&&(!(($F{voucher_corr_ac_code}).equals($P{paramAccCode}))))?$F{voucher_amount}:$P{zero})]]></variableExpression>
        <initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
    </variable>
    <variable name="pageTotalCredit" class="java.math.BigDecimal" resetType="Page" calculation="Sum">
        <variableExpression><![CDATA[(($F{voucher_debit_credit}.equals("B")||(($F{voucher_corr_ac_code}).equals($P{paramAccCode})))?$F{voucher_amount}:$P{zero})]]></variableExpression>
    </variable>
    <variable name="pageTotalCredit_tk" class="java.math.BigDecimal" resetType="Page" calculation="Sum">
        <variableExpression><![CDATA[(($F{voucher_debit_credit}.equals("B")||(($F{voucher_corr_ac_code}).equals($P{paramAccCode})))?$F{voucher_entry_amount}:(($F{voucher_debit_credit}.equals("B")||(($F{voucher_corr_ac_code}).equals($P{paramAccCode})))?$F{voucher_entry_amount}:$P{zero}))]]></variableExpression>
    </variable>
    <variable name="monthTotalCredit" class="java.math.BigDecimal" calculation="Sum">
        <variableExpression><![CDATA[(($F{voucher_debit_credit}.equals("B")||(($F{voucher_corr_ac_code}).equals($P{paramAccCode})))?$F{voucher_amount}:$P{zero})]]></variableExpression>
    </variable>
    <variable name="pageTotalDebit_tk" class="java.math.BigDecimal" resetType="Page" calculation="Sum">
        <variableExpression><![CDATA[((($F{voucher_debit_credit}.equals("A"))&&(!(($F{voucher_corr_ac_code}).equals($P{paramAccCode}))))?$F{voucher_entry_amount}:$P{zero})]]></variableExpression>
    </variable>
    <variable name="pageTotalDebit" class="java.math.BigDecimal" resetType="Page" calculation="Sum">
        <variableExpression><![CDATA[((($F{voucher_debit_credit}.equals("A"))&&(!(($F{voucher_corr_ac_code}).equals($P{paramAccCode}))))?$F{voucher_amount}:$P{zero})]]></variableExpression>
    </variable>
    <variable name="monthTotalCredit_tk" class="java.math.BigDecimal" calculation="Sum">
        <variableExpression><![CDATA[(($F{voucher_debit_credit}.equals("B")||(($F{voucher_corr_ac_code}).equals($P{paramAccCode})))?$F{voucher_entry_amount}:(($F{voucher_debit_credit}.equals("B")||(($F{voucher_corr_ac_code}).equals($P{paramAccCode})))?$F{voucher_entry_amount}:$P{zero}))]]></variableExpression>
    </variable>
    <variable name="monthTotalDebit_tk" class="java.math.BigDecimal" calculation="Sum">
        <variableExpression><![CDATA[((($F{voucher_debit_credit}.equals("A"))&&(!(($F{voucher_corr_ac_code}).equals($P{paramAccCode}))))?$F{voucher_entry_amount}:$P{zero})]]></variableExpression>
        <initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
    </variable>
    <group name="voucher_voucher_quater">
        <groupExpression><![CDATA[$F{voucher_voucher_quater}]]></groupExpression>
        <groupFooter>
            <band height="16">
                <textField>
                    <reportElement positionType="Float" stretchType="RelativeToTallestObject" x="41" y="0" width="56" height="16"/>
                    <box>
                        <leftPen lineWidth="2.0" lineStyle="Double"/>
                        <rightPen lineWidth="2.0" lineStyle="Double"/>
                    </box>
                    <textElement textAlignment="Center">
                        <font fontName="Courier New" size="9"/>
                    </textElement>
                    <textFieldExpression><![CDATA[""]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement positionType="Float" stretchType="RelativeToTallestObject" x="96" y="0" width="46" height="16"/>
                    <box leftPadding="2"/>
                    <textElement>
                        <font fontName="Courier New" size="9"/>
                    </textElement>
                    <textFieldExpression><![CDATA[""]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true">
                    <reportElement x="142" y="0" width="198" height="16"/>
                    <box leftPadding="2" rightPadding="4">
                        <leftPen lineWidth="2.0" lineStyle="Double"/>
                        <rightPen lineWidth="2.0" lineStyle="Double"/>
                    </box>
                    <textElement textAlignment="Right">
                        <font fontName="Courier New" size="8" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA["SUB TOTAL:"]]></textFieldExpression>
                </textField>
                <textField pattern="#,##0.00">
                    <reportElement positionType="Float" stretchType="RelativeToTallestObject" x="340" y="0" width="74" height="16"/>
                    <box rightPadding="2"/>
                    <textElement textAlignment="Right">
                        <font fontName="Courier New" size="8" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$V{monthTotalDebit_tk}]]></textFieldExpression>
                </textField>
                <textField pattern="#,##0.00">
                    <reportElement positionType="Float" stretchType="RelativeToTallestObject" x="414" y="0" width="74" height="16"/>
                    <box rightPadding="2">
                        <leftPen lineWidth="1.0"/>
                        <rightPen lineWidth="1.0"/>
                    </box>
                    <textElement textAlignment="Right">
                        <font fontName="Courier New" size="8" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$V{monthTotalCredit_tk}]]></textFieldExpression>
                </textField>
                <textField pattern="#,##0.00">
                    <reportElement positionType="Float" stretchType="RelativeToTallestObject" x="488" y="0" width="74" height="16"/>
                    <box leftPadding="0" rightPadding="2">
                        <rightPen lineWidth="2.0" lineStyle="Double"/>
                    </box>
                    <textElement textAlignment="Right">
                        <font fontName="Courier New" size="8" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$V{balance_tk}]]></textFieldExpression>
                </textField>
            </band>
        </groupFooter>
    </group>
    <group name="voucher_voucher_month">
        <groupExpression><![CDATA[$F{voucher_voucher_month}]]></groupExpression>
    </group>
    <group name="voucher_voucher_day">
        <groupExpression><![CDATA[$F{voucher_voucher_day}]]></groupExpression>
    </group>
    <group name="voucher_voucher_tag">
        <groupExpression><![CDATA[$F{voucher_voucher_tag}]]></groupExpression>
    </group>
    <columnHeader>
        <band height="119" splitType="Stretch">
            <textField pattern="#,##0.00">
                <reportElement positionType="Float" stretchType="RelativeToTallestObject" x="414" y="104" width="74" height="15"/>
                <box topPadding="2" rightPadding="2">
                    <leftPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Right">
                    <font fontName="Courier New" size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[($V{PAGE_NUMBER}.intValue()==1?"" :$V{monthTotalCredit_tk})]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement positionType="Float" stretchType="RelativeToTallestObject" x="142" y="105" width="198" height="14"/>
                <box topPadding="2" leftPadding="2">
                    <leftPen lineWidth="2.0" lineStyle="Double"/>
                    <rightPen lineWidth="2.0" lineStyle="Double"/>
                </box>
                <textElement textAlignment="Center">
                    <font fontName="Courier New" size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[($V{PAGE_NUMBER}.intValue()==1?"" :"B/F")]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement positionType="Float" stretchType="RelativeToTallestObject" x="97" y="105" width="46" height="14"/>
                <box leftPadding="2"/>
                <textElement>
                    <font fontName="Courier New" size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[""]]></textFieldExpression>
            </textField>
            <textField pattern="#,##0.00">
                <reportElement positionType="Float" stretchType="RelativeToTallestObject" x="340" y="105" width="74" height="14"/>
                <box topPadding="2" rightPadding="2"/>
                <textElement textAlignment="Right">
                    <font fontName="Courier New" size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[(($V{PAGE_NUMBER}.intValue()==1)?"":$V{monthTotalDebit_tk} )]]></textFieldExpression>
            </textField>
            <textField pattern="dd/MM/yyyy">
                <reportElement positionType="Float" stretchType="RelativeToTallestObject" x="41" y="104" width="56" height="15"/>
                <box>
                    <leftPen lineWidth="2.0" lineStyle="Double"/>
                    <rightPen lineWidth="2.0" lineStyle="Double"/>
                </box>
                <textElement textAlignment="Center">
                    <font fontName="Courier New" size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[""]]></textFieldExpression>
            </textField>
            <textField pattern="#,##0.00">
                <reportElement positionType="Float" stretchType="RelativeToTallestObject" x="488" y="105" width="74" height="14"/>
                <box topPadding="2" rightPadding="2">
                    <rightPen lineWidth="2.0" lineStyle="Double"/>
                </box>
                <textElement textAlignment="Right">
                    <font fontName="Courier New" size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[(($V{PAGE_NUMBER}.intValue()==1)?"":$V{balance_tk} )]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="149" y="57" width="43" height="11"/>
                <textElement>
                    <font fontName="Courier New" size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{paramAccCode}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="340" y="90" width="74" height="15"/>
                <box topPadding="3">
                    <topPen lineWidth="2.0" lineStyle="Double"/>
                    <leftPen lineWidth="2.0" lineStyle="Double"/>
                    <bottomPen lineWidth="2.0" lineStyle="Double"/>
                </box>
                <textElement textAlignment="Center">
                    <font fontName="Courier New" size="8"/>
                </textElement>
                <text><![CDATA[DEBIT]]></text>
            </staticText>
            <staticText>
                <reportElement x="414" y="90" width="74" height="15"/>
                <box topPadding="3">
                    <topPen lineWidth="2.0" lineStyle="Double"/>
                    <leftPen lineWidth="1.0" lineStyle="Solid"/>
                    <bottomPen lineWidth="2.0" lineStyle="Double"/>
                </box>
                <textElement textAlignment="Center">
                    <font fontName="Courier New" size="8"/>
                </textElement>
                <text><![CDATA[CREDIT]]></text>
            </staticText>
            <staticText>
                <reportElement x="488" y="90" width="74" height="15"/>
                <box topPadding="3">
                    <topPen lineWidth="2.0" lineStyle="Double"/>
                    <leftPen lineWidth="1.0" lineStyle="Solid"/>
                    <bottomPen lineWidth="2.0" lineStyle="Double"/>
                </box>
                <textElement textAlignment="Center">
                    <font fontName="Courier New" size="8"/>
                </textElement>
                <text><![CDATA[BALANCE]]></text>
            </staticText>
            <staticText>
                <reportElement x="97" y="90" width="45" height="15"/>
                <box topPadding="3">
                    <topPen lineWidth="2.0" lineStyle="Double"/>
                    <leftPen lineWidth="2.0" lineStyle="Double"/>
                    <bottomPen lineWidth="2.0" lineStyle="Double"/>
                </box>
                <textElement textAlignment="Center">
                    <font fontName="Courier New" size="8"/>
                </textElement>
                <text><![CDATA[Vr .No.]]></text>
            </staticText>
            <staticText>
                <reportElement x="142" y="90" width="198" height="15"/>
                <box topPadding="3">
                    <topPen lineWidth="2.0" lineStyle="Double"/>
                    <leftPen lineWidth="2.0" lineStyle="Double"/>
                    <bottomPen lineWidth="2.0" lineStyle="Double"/>
                </box>
                <textElement textAlignment="Center">
                    <font fontName="Courier New" size="8"/>
                </textElement>
                <text><![CDATA[CHEQUE NO./EXPLANATION]]></text>
            </staticText>
            <textField>
                <reportElement x="719" y="0" width="66" height="20"/>
                <textElement>
                    <font fontName="Courier New" size="9"/>
                </textElement>
                <textFieldExpression><![CDATA["Page : "+($V{PAGE_NUMBER}+$P{firstPageNumber})]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="334" y="35" width="273" height="14"/>
                <textElement>
                    <font fontName="Courier New" size="9"/>
                </textElement>
                <textFieldExpression><![CDATA["FOR THE FISCAL YEAR "+$F{voucher_voucher_year}]]></textFieldExpression>
            </textField>
            <textField pattern="¤ #,##0.00">
                <reportElement x="143" y="79" width="30" height="10"/>
                <textElement>
                    <font fontName="Courier New" size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[" US$.   "]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="41" y="90" width="55" height="15"/>
                <box topPadding="3">
                    <topPen lineWidth="2.0" lineStyle="Double"/>
                    <leftPen lineWidth="2.0" lineStyle="Double"/>
                    <bottomPen lineWidth="2.0" lineStyle="Double"/>
                </box>
                <textElement textAlignment="Center">
                    <font fontName="Courier New" size="8"/>
                </textElement>
                <text><![CDATA[DATE]]></text>
            </staticText>
            <staticText>
                <reportElement x="344" y="22" width="108" height="13"/>
                <textElement textAlignment="Center">
                    <font fontName="Courier New" size="9" isBold="false"/>
                </textElement>
                <text><![CDATA[GENERAL LEDGER]]></text>
            </staticText>
            <staticText>
                <reportElement x="340" y="75" width="222" height="15"/>
                <box topPadding="3">
                    <topPen lineWidth="2.0" lineStyle="Double"/>
                    <leftPen lineWidth="2.0" lineStyle="Double"/>
                    <rightPen lineWidth="2.0" lineStyle="Double"/>
                </box>
                <textElement textAlignment="Center">
                    <font fontName="Courier New" size="8"/>
                </textElement>
                <text><![CDATA[IN BANGLADESH TAKA]]></text>
            </staticText>
            <textField>
                <reportElement x="149" y="68" width="191" height="11"/>
                <textElement>
                    <font fontName="Courier New" size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[($F{subCodeName}.isEmpty()?$F{codeName}:$F{subCodeName})]]></textFieldExpression>
            </textField>
            <textField pattern="#,##0.00">
                <reportElement x="174" y="79" width="166" height="10"/>
                <textElement>
                    <font fontName="Courier New" size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{budgetAllocation}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="39" y="57" width="110" height="11"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA["ACCOUNT CODE                :"]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="39" y="68" width="110" height="11"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA["ACCOUNT NAME                :"]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="39" y="79" width="110" height="11"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA["BUDGET ALLOCATION       :"]]></textFieldExpression>
            </textField>
        </band>
    </columnHeader>
    <detail>
        <band height="14" splitType="Prevent">
            <textField isStretchWithOverflow="true" pattern="#,##0.00">
                <reportElement positionType="Float" stretchType="RelativeToTallestObject" x="414" y="0" width="74" height="14" isPrintWhenDetailOverflows="true"/>
                <box rightPadding="2">
                    <leftPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Right">
                    <font fontName="Courier New" size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[(($F{voucher_debit_credit}.equals("B")||(($F{voucher_corr_ac_code}).equals($P{paramAccCode})))?$F{voucher_entry_amount}:"")]]></textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true">
                <reportElement positionType="Float" stretchType="RelativeToTallestObject" x="41" y="0" width="56" height="14" isPrintWhenDetailOverflows="true"/>
                <box>
                    <leftPen lineWidth="2.0" lineStyle="Double"/>
                    <rightPen lineWidth="2.0" lineStyle="Double"/>
                </box>
                <textElement textAlignment="Center">
                    <font fontName="Courier New" size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{voucher_voucher_date}]]></textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true" pattern="#,##0.00">
                <reportElement positionType="Float" stretchType="RelativeToTallestObject" x="488" y="0" width="74" height="14" isPrintWhenDetailOverflows="true"/>
                <box leftPadding="0" rightPadding="2">
                    <rightPen lineWidth="2.0" lineStyle="Double"/>
                </box>
                <textElement textAlignment="Right">
                    <font fontName="Courier New" size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{balance_tk}]]></textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true">
                <reportElement positionType="Float" stretchType="RelativeToTallestObject" x="142" y="0" width="198" height="14" isPrintWhenDetailOverflows="true"/>
                <box leftPadding="3">
                    <leftPen lineWidth="2.0" lineStyle="Double"/>
                    <rightPen lineWidth="2.0" lineStyle="Double"/>
                </box>
                <textElement>
                    <font fontName="Courier New" size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{voucher_details_1}+$F{voucher_details_2}+$F{voucher_details_3}+"\n"]]></textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true" pattern="#,##0.00">
                <reportElement positionType="Float" stretchType="RelativeToTallestObject" x="340" y="0" width="74" height="14" isPrintWhenDetailOverflows="true"/>
                <box rightPadding="2"/>
                <textElement textAlignment="Right">
                    <font fontName="Courier New" size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[((($F{voucher_debit_credit}.equals("A"))&&(!(($F{voucher_corr_ac_code}).equals($P{paramAccCode}))))?$F{voucher_entry_amount}:"")]]></textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true">
                <reportElement positionType="Float" stretchType="RelativeToTallestObject" x="804" y="0" width="1" height="14" isPrintWhenDetailOverflows="true"/>
                <box rightPadding="2">
                    <rightPen lineWidth="2.0" lineStyle="Double"/>
                </box>
                <textElement textAlignment="Right">
                    <font fontName="Courier New" size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[""]]></textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true">
                <reportElement positionType="Float" stretchType="RelativeToTallestObject" x="97" y="0" width="46" height="14" isPrintWhenDetailOverflows="true"/>
                <box leftPadding="3"/>
                <textElement>
                    <font fontName="Courier New" size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{voucher_voucher_no}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <columnFooter>
        <band height="14" splitType="Stretch">
            <textField pattern="#,##0.00">
                <reportElement x="488" y="0" width="74" height="13"/>
                <box topPadding="2" rightPadding="2">
                    <topPen lineWidth="2.0" lineStyle="Double"/>
                    <leftPen lineWidth="1.0" lineStyle="Solid"/>
                    <bottomPen lineWidth="2.0" lineStyle="Double"/>
                    <rightPen lineWidth="2.0" lineStyle="Double"/>
                </box>
                <textElement textAlignment="Right">
                    <font fontName="Courier New" size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{balance_tk}]]></textFieldExpression>
            </textField>
            <textField pattern="#,##0.00">
                <reportElement x="414" y="0" width="74" height="13"/>
                <box topPadding="2" rightPadding="2">
                    <topPen lineWidth="2.0" lineStyle="Double"/>
                    <leftPen lineWidth="0.0" lineStyle="Double"/>
                    <bottomPen lineWidth="2.0" lineStyle="Double"/>
                    <rightPen lineWidth="0.0" lineStyle="Double"/>
                </box>
                <textElement textAlignment="Right">
                    <font fontName="Courier New" size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{monthTotalCredit_tk}]]></textFieldExpression>
            </textField>
            <textField pattern="#,##0.00">
                <reportElement x="340" y="0" width="74" height="13"/>
                <box topPadding="2" rightPadding="2">
                    <topPen lineWidth="2.0" lineStyle="Double"/>
                    <leftPen lineWidth="2.0" lineStyle="Double"/>
                    <bottomPen lineWidth="2.0" lineStyle="Double"/>
                    <rightPen lineWidth="1.0" lineStyle="Solid"/>
                </box>
                <textElement textAlignment="Right">
                    <font fontName="Courier New" size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{monthTotalDebit_tk}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="42" y="0" width="298" height="13"/>
                <box topPadding="2">
                    <topPen lineWidth="2.0" lineStyle="Double"/>
                </box>
                <textElement textAlignment="Center">
                    <font fontName="Courier New" size="8" isBold="false"/>
                </textElement>
                <textFieldExpression><![CDATA[(($V{PAGE_NUMBER}+$P{firstPageNumber})==$P{lastPageNumber})?"GRAND TOTAL":"TOTAL C/F"]]></textFieldExpression>
            </textField>
        </band>
    </columnFooter>
    <lastPageFooter>
        <band/>
    </lastPageFooter>
</jasperReport> 
```

# c# - 查找匹配字符串算法

> ID：16140616
> 
> 赞同：3
> 
> 时间：2013-04-22T06:21:56.093
> 
> 标签：c#, .net, algorithm, substring, performance

我有很长的 5 个字符串（字符串的数量可能会改变）。这些字符串没有固定的格式。我将提供一个数字来指示子字符串的长度。我想找到给定长度的匹配子字符串。例如字符串是

```
 1\.     abcabcabc
      2\.     abcasdfklop 
```

字符串长度：3

给定这些值，输出将是这样的：

比赛#1：

```
 Matched string :               "abc"

 Matches in first string:        3

 Matching positions:             0,3,6

 Matches in second string:       1

 Match positions:                0 
```

* * *

比赛#2：

```
 Matched string :               "bca"

 Matches in first string:        2

 Matching positions:             1,4

 Matches in second string:       1

 Match    positions:             1 
```

我设法在 4 个 foreach 语句中做到了。但在我看来效率太低了。特别是如果输入大小非常大。有什么建议或捷径可以在 c# 中更有效地管理这个吗？无需成为真正的代码。只有伪代码也可以提供帮助。在此致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T06:40:35.150

您可以使用后缀数组来执行此操作。（后缀树也可以正常工作，但它们在实施中需要更多的空间、时间和谨慎。）

连接你的两个字符串，用两个都没有出现的字符分隔它们。然后构建一个后缀数组。然后你可以读出你的答案。

标准后缀数组为您提供了一个按字典顺序排序的指向字符串后缀的指针数组，以及一个“最长公共前缀长度”数组，告诉您两个字典顺序连续后缀的最长公共前缀有多长。

使用最长的公共前缀长度数组来获取您想要的信息是相当简单的；找到最长公共前缀长度数组的所有最大子数组，其中最长公共前缀长度至少是查询长度，然后，对于在第一个字符串和第二个字符串中都有匹配的每个子数组，报告适当的前缀和报告它出现 K+1 次，其中 K 是最大子数组的长度。

另一种更容易编码的方法是散列适当长度的所有子字符串。您可以使用任何滚动哈希函数轻松完成此操作。将动态指针数组存储到每个哈希的字符串中；对所有字符串进行哈希处理后，遍历所有出现的哈希并查找匹配项。您需要以某种方式处理误报；一种（概率）方法是使用多个散列函数，直到误报概率小到可以接受为止。另一种可能只在匹配项很少的情况下才可接受的方法是直接比较字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T10:31:14.710

如果您设法在 4 个未嵌套的 foreach 语句中做到这一点，那么您应该很好，您可能不需要优化。

这是我会尝试的。创建一个看起来像这样的结构

```
class SubString
{
    string str;
    int position;
} 
```

将两个字符串分成所有可能的子字符串并将它们存储到一个数组中。这具有 O(n2) 复杂度。

现在按字符串长度（ O(n*log(n)) 复杂度）对这些数组进行排序，并通过这两个来识别匹配项。

你需要额外的结构来保存结果，这可能需要更多的调整，但你知道这是怎么回事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T06:35:22.767

您可以使用后缀树的变体来解决此问题。[http://en.wikipedia.org/wiki/Longest_common_substring_problem](http://en.wikipedia.org/wiki/Longest_common_substring_problem) 另请查看：[算法：查找保留顺序的两个字符串之间的所有公共子字符串](https://stackoverflow.com/questions/7550897/algorithm-find-all-common-substrings-between-two-strings-where-order-is-preserv)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-07T19:15:02.183

如果使用非常大的字符串，内存可能会成为问题。下面的代码找到最长的公共子字符串并覆盖包含较小公共子字符串的变量，但可以轻松更改以将索引和长度推送到列表，然后作为字符串数组返回。

这是来自 Ashutosh Singh 的重构 C++ 代码，位于[https://iq.opengenus.org/longest-common-substring-using-rolling-hash/](https://iq.opengenus.org/longest-common-substring-using-rolling-hash/) - 这将在 O(N * log(N)^2) 时间内找到子字符串和 O(N) 空间

```
using System;
using System.Collections.Generic;
public class RollingHash
{
    private class RollingHashPowers
    {
        // _mod = prime modulus of polynomial hashing
        // any prime number over a billion should suffice
        internal const int _mod = (int)1e9 + 123;
        // _hashBase = base (point of hashing)
        // this should be a prime number larger than the number of characters used
        // in my use case I am only interested in ASCII (256) characters
        // for strings in languages using non-latin characters, this should be much larger
        internal const long _hashBase = 257;
        // _pow1 = powers of base modulo mod
        internal readonly List<int> _pow1 = new List<int> { 1 };
        // _pow2 = powers of base modulo 2^64
        internal readonly List<long> _pow2 = new List<long> { 1L };

        internal void EnsureLength(int length)
        {
            if (_pow1.Capacity < length)
            {
                _pow1.Capacity = _pow2.Capacity = length;
            }
            for (int currentIndx = _pow1.Count - 1; currentIndx < length; ++currentIndx)
            {
                _pow1.Add((int)(_pow1[currentIndx] * _hashBase % _mod));
                _pow2.Add(_pow2[currentIndx] * _hashBase);
            }
        }
    }

    private class RollingHashedString
    {
        readonly RollingHashPowers _pows;
        readonly int[] _pref1; // Hash on prefix modulo mod
        readonly long[] _pref2; // Hash on prefix modulo 2^64

        // Constructor from string:
        internal RollingHashedString(RollingHashPowers pows, string s, bool caseInsensitive = false)
        {
            _pows = pows;
            _pref1 = new int[s.Length + 1];
            _pref2 = new long[s.Length + 1];

            const long capAVal = 'A';
            const long capZVal = 'Z';
            const long aADif = 'a' - 'A';

            unsafe
            {
                fixed (char* c = s)
                {
                    // Fill arrays with polynomial hashes on prefix
                    for (int i = 0; i < s.Length; ++i)
                    {
                        long v = c[i];
                        if (caseInsensitive && capAVal <= v && v <= capZVal)
                        {
                            v += aADif;
                        }
                        _pref1[i + 1] = (int)((_pref1[i] + v * _pows._pow1[i]) % RollingHashPowers._mod);
                        _pref2[i + 1] = _pref2[i] + v * _pows._pow2[i];
                    }
                }
            }
        }

        // Rollingnomial hash of subsequence [pos, pos+len)
        // If mxPow != 0, value automatically multiply on base in needed power.
        // Finally base ^ mxPow
        internal Tuple<int, long> Apply(int pos, int len, int mxPow = 0)
        {
            int hash1 = _pref1[pos + len] - _pref1[pos];
            long hash2 = _pref2[pos + len] - _pref2[pos];
            if (hash1 < 0)
            {
                hash1 += RollingHashPowers._mod;
            }
            if (mxPow != 0)
            {
                hash1 = (int)((long)hash1 * _pows._pow1[mxPow - (pos + len - 1)] % RollingHashPowers._mod);
                hash2 *= _pows._pow2[mxPow - (pos + len - 1)];
            }
            return Tuple.Create(hash1, hash2);
        }
    }

    private readonly RollingHashPowers _rhp;
    public RollingHash(int longestLength = 0)
    {
        _rhp = new RollingHashPowers();
        if (longestLength > 0)
        {
            _rhp.EnsureLength(longestLength);
        }
    }

    public string FindCommonSubstring(string a, string b, bool caseInsensitive = false)
    {
        // Calculate max neede power of base:
        int mxPow = Math.Max(a.Length, b.Length);
        _rhp.EnsureLength(mxPow);
        // Create hashing objects from strings:
        RollingHashedString hash_a = new RollingHashedString(_rhp, a, caseInsensitive);
        RollingHashedString hash_b = new RollingHashedString(_rhp, b, caseInsensitive);

        // Binary search by length of same subsequence:
        int pos = -1;
        int low = 0;
        int minLen = Math.Min(a.Length, b.Length);
        int high = minLen + 1;
        var tupleCompare = Comparer<Tuple<int, long>>.Default;
        while (high - low > 1)
        {
            int mid = (low + high) / 2;
            List<Tuple<int, long>> hashes = new List<Tuple<int, long>>(a.Length - mid + 1);
            for (int i = 0; i + mid <= a.Length; ++i)
            {
                hashes.Add(hash_a.Apply(i, mid, mxPow));
            }
            hashes.Sort(tupleCompare);
            int p = -1;
            for (int i = 0; i + mid <= b.Length; ++i)
            {
                if (hashes.BinarySearch(hash_b.Apply(i, mid, mxPow), tupleCompare) >= 0)
                {
                    p = i;
                    break;
                }
            }
            if (p >= 0)
            {
                low = mid;
                pos = p;
            }
            else
            {
                high = mid;
            }
        }
        // Output answer:
        return pos >= 0
            ? b.Substring(pos, low)
            : string.Empty;
    }
} 
```

# jasper-reports - JasperReports JRXML FiIl subDataSet 与数据

> ID：16140622
> 
> 赞同：1
> 
> 时间：2013-04-22T06:22:38.390
> 
> 标签：jasper-reports

我正在尝试用数据填充子数据集。我想使用 $F{field_name} 从我的变量/属性中获取数据、填充数据集并从数据集中检索数据。有可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:32:58.997

是的，您可以从主数据集中填充子数据集。这些是填充子数据集的一些步骤：-

假设我们`field_name`在主数据集中有字段，现在我们想传递给子数据集-

1.  创建一个参数`$P{p_field_name}`并在主数据集中添加默认值`$F{field_name}`。

2.  然后编辑子数据集的查询并创建参数`$P{pm_field_name}`并添加默认值`$P{p_field_name}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:50:48.633

根据我的经验，不使用图表或列表组件是不可能填充子数据集的。[如果这是您的情况，您可以在此视频](http://www.youtube.com/watch?v=Hl_VyvpaiCo)中查看如何使用列表。如果你需要它的图表是[这样的](http://diethardsteiner.blogspot.com.es/2011/11/jaspersoft-ireport-how-to-pass.html)

否则，使用子报表并将您的 $F{field_name} 作为数据源传递，[此处说明](http://community.jaspersoft.com/questions/524953/how-fill-subdataset-jrdatasource)

# php - 多态关联或更简单的东西

> ID：16140624
> 
> 赞同：0
> 
> 时间：2013-04-22T06:22:41.867
> 
> 标签：php, mysql, foreign-key-relationship, polymorphic-associations

这是我的第一篇文章，我似乎无法在任何地方找到答案......

我有一个包含多家公司的数据库，每家公司都有多个地点。我在尝试定义联系人时遇到了问题。一些联系人需要是全球性的并且在任何位置都可用....一些联系人只需要存在于一个位置。在下面的contact_info 表中，我们指定了联系人的可见性（公司或位置）。但是，该位置需要选择其主要联系人。这使得 FK 从联系人 -> 位置和从位置 -> 联系人。

我知道还有另一张桌子，但我似乎无法概念化它。

```
CREATE TABLE `company_info` (
`id` INT NOT NULL AUTO_INCREMENT,
`name` VARCHAR(100) NOT NULL DEFAULT '',
PRIMARY KEY  (`id`),
UNIQUE KEY `name` (`name`));

CREATE TABLE `location_info` (
`id` INT NOT NULL AUTO_INCREMENT,
`company_info` INT NOT NULL DEFAULT -1,
`name` VARCHAR(100) NOT NULL DEFAULT '',
`primary_contact_id` INT NOT NULL DEFAULT -1,
PRIMARY KEY(`id`),
UNIQUE KEY(`company_id`,`name`),
FOREIGN KEY (company_id) REFERENCES company_info(id)
FOREIGN KEY (primary_contact_id) REFERENCES contact_info(id));

CREATE TABLE `contact_info` (
`id` INT NOT NULL AUTO_INCREMENT,
`company_id` INT
`location_id` INT,
`type` ENUM('Company','Location') NOT NULL DEFAULT 'Company',
`first_name` VARCHAR(50) NOT NULL DEFAULT '',
`last_name` VARCHAR(50) NOT NULL DEFAULT '',
PRIMARY KEY(`id`),
UNIQUE KEY(`id`,`company_id`,`location_id`),
FOREIGN KEY (location_id) REFERENCES location_info(id),
FOREIGN KEY (company_id) REFERENCES company_info(id) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:27:57.417

最有效的方法是将其拆分，以便为您的公司提供一个表格，为您的用户提供一个表格，以及一个仅用于存储所有连接（即`EntryID, UserID, CompanyID`）的表格。这样您以后就可以轻松地加载它们。

# arrays - 如何在 UITableViewCell 触摸上加载 URL

> ID：16140625
> 
> 赞同：0
> 
> 时间：2013-04-22T06:22:42.680
> 
> 标签：arrays, uitableview, xcode4

对此的新功能，只是在触摸某个 UITableView 单元格时尝试加载链接。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
  NSDictionary *dic = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:nil];
  NSArray *deals = [dic objectForKey:@"deals"];
  NSDictionary *dealOne = [deals objectAtIndex:0];
  NSString *url = [dealOne objectForKey:@"url"];

  UITouch *touch = [[event allTouches] anyObject];

  if([touch isKindOfClass:[UITableViewCell class]])
  {
    UITableViewCell *cell;
    CGPoint location = [touch locationInView: self.view];
    cell.center = location;

    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]];
  }
  NSLog(@"TABLECELL TOUCHED");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:42:35.807

使用以下方法解决。在这种情况下，我希望在为“finalDealOne”触摸单元格时加载链接。双击单元格时，将加载链接。

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:
{
  static NSString *CellIdentifier = @"Cell";
  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

  NSDictionary *dic = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:nil];
  NSArray *deals = [dic objectForKey:@"deals"];
  NSDictionary *dealOne = [deals objectAtIndex:0];
  NSString *title = [dealOne objectForKey:@"title"];
  NSString *finalDealOne = [NSString stringWithFormat:@"Deal One:\n\n''%@''\n\nDouble tap here to redeem offer.",title];

  (NSIndexPath *)indexPath
  UITapGestureRecognizer *tapped = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(finalDealOne)];
  tapped.numberOfTapsRequired = 2;

  [cell addGestureRecognizer:tapped];
} 
```

为了完成这项工作，我提供了以下参考：

```
 - (void)finalDealOne
 { 
    NSDictionary *dic = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:nil];
    NSArray *deals = [dic objectForKey:@"deals"];
    NSDictionary *dealOne = [deals objectAtIndex:0];
    NSString *url = [dealOne objectForKey:@"url"];

    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]];
 } 
```

# c# - 最小化到托盘

> ID：16140627
> 
> 赞同：6
> 
> 时间：2013-04-22T06:22:53.450
> 
> 标签：c#

我的应用程序用于聊天，我想如果有人需要快速隐藏它，但又不想关闭它，我想出了这个：

```
private void button6_Click(object sender, EventArgs e)
{
    this.WindowState = FormWindowState.Minimized; 
} 
```

但是，我不想去任务栏，而是希望它出现在托盘中（没有弹出窗口），只是应用程序图标，当有人点击它时，它需要设置它

```
this.WindowState = FormWindowState.Normal; 
```

这可能吗，怎么做？

另外，系统托盘是指右下角的那个，在时间旁边

我仍然无法让它工作，如果我按照你们说的做，通知栏中不会出现任何内容（顺便说一句：这是要最小化的完整代码）

```
private void button6_Click(object sender, EventArgs e)
{
    this.WindowState = FormWindowState.Minimized;

}

private void Form_Resize(object sender, EventArgs e)
{
    if (WindowState == FormWindowState.Minimized)
    {
        this.Hide();
    }

}

private void notifyIcon_Click(object sender, EventArgs e)
{
    this.Show();
    this.WindowState = FormWindowState.Normal;
} 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T06:27:31.673

> 处理表单的 Resize 事件。在此处理程序中，您覆盖 Resize 事件的基本功能，以使表单最小化到系统托盘而不是任务栏。这可以通过在表单的 Resize 事件处理程序中执行以下操作来完成：

1.  检查窗体的 WindowState 属性是否设置为 FormWindowState.Minimized。如果是，隐藏您的表单，启用 NotifyIcon 对象，并显示显示一些信息的气球提示。
2.  一旦 WindowState 变为 FormWindowState.Normal，通过将 NotifyIcon 对象的 Visible 属性设置为 false 来禁用它。
3.  现在，当您双击任务栏中的 NotifyIcon 对象时，您希望窗口重新出现。为此，请处理 NotifyIcon 的`MouseDoubleClick`事件。在这里，您使用方法显示表单`Show()`。

在表单调整大小事件中，在那里进行检查并隐藏表单

```
 private void Form_Resize(object sender, EventArgs e)
    {
        if (WindowState == FormWindowState.Minimized)
        {
            this.Hide();
        }
    } 
```

然后在单击任务栏图标时将其恢复。

```
private void notifyIcon_Click(object sender, EventArgs e)
{
    this.Show();
    this.WindowState = FormWindowState.Normal;
} 
```

参考：
[如何将 WinForms 应用程序最小化到通知区域？](https://stackoverflow.com/questions/6317033/c-sharp-winforms-minimize-to-tray)
[将应用程序最小化到系统托盘](https://stackoverflow.com/questions/7625421/minimize-app-to-system-tray)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T06:26:48.283

**使用以下代码：**

```
if (WindowState == FormWindowState.Minimized)
        {
            this.Hide();
        } 
```

当您最小化表单时，只需将其隐藏即可。您必须在`Form_Resize`事件中实现上述代码。

然后单击任务栏图标只需恢复其状态，如下所示：

```
private void notifyIcon_Click(object sender, EventArgs e)
    {
        this.Show();
        this.WindowState = FormWindowState.Normal;
    } 
```

`notifyIcon_Click`为此，您将需要使用事件。

希望它有帮助。

# javascript - 将 jQuery 选择器缓存到 JavaScript 对象？

> ID：16140629
> 
> 赞同：0
> 
> 时间：2013-04-22T06:23:13.833
> 
> 标签：javascript

基于类似于下面的javaScript代码，我希望能够用来`panelDNS.cache.propertyName`缓存**几个**常用的jQuery选择器

问题是我似乎需要把它包`$(document).ready(function() { )`起来才能工作。

我只是在学习 JS，所以我不确定如何做到这一点并保持我的简短 `panelDNS.cache`来访问这些值？

澄清我的问题。由于`panelDNS.cache`不是`Function`我可以在我的`init`函数中调用的，我需要弄清楚如何确保在`panelDNS.cache`调用或运行之前加载 DOM

```
var panelDNS = {

  unsavedChanges: false,

  init: function () {
    $(document).ready(function () {
      PanelDNS.events();
    });
  },

  cache: {
    dnsTitleId: $("#dnsTitle"),
    translation: {
      absolute: 0,
      relative: 0,
      sinceDirectionChange: 0,
      percentage: 0
    }
  },

  events: {

  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:31:15.063

“我在问，如何确保 panelDNS.cache.xxx 仅在 DOM 加载后才被调用”

你对此负责。通过在文档就绪函数中启动应用程序，确保您的应用程序代码仅在加载 DOM 后执行：

```
$(function(){
    //Your kickoff code
}); 
```

# iphone - NSTimer 方法多次调用

> ID：16140637
> 
> 赞同：0
> 
> 时间：2013-04-22T06:24:17.157
> 
> 标签：iphone, nstimer

我正在开发一个应用程序，因为我有一个要求。onTyping 方法调用文本字段文本更改。当我在文本字段上输入第一个字母时，ontying 方法被调用并且计时器启动和暂停方法在 10 秒后调用，暂停方法被调用继续输入.但我想在最后一个字母打字时调用暂停方法。我怎样才能实现这个

```
-(IBAction)onTyping:(id)sender
{

   // [NSTimer scheduledTimerWithTimeInterval:30 target:self selector:@selector(pause) userInfo:nil repeats:NO];

    if(timer==nil)
    {
        timer=[NSTimer scheduledTimerWithTimeInterval:10 target:self selector:@selector(pause) userInfo:nil repeats:NO];
    }
    [self fadeIn];

}
-(void)pause
{    
    [self fadeOut];

}
- (void)fadeIn
{
     NSlog(@"fadeIn");

}
- (void)fadeOut
{
   NSlog(@"fadeOut");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:27:53.690

调用类似下面`textFieldShouldEndEditing:`的方法方法...`UITextFieldDelegate`

```
- (BOOL)textFieldShouldEndEditing:(UITextField *)textField {
        [self pause];
    return YES;
} 
```

# php - 多次在数据库中搜索表单元素

> ID：16140641
> 
> 赞同：1
> 
> 时间：2013-04-22T06:24:24.977
> 
> 标签：php, postgresql

我正在尝试学习 php 并遇到了我需要帮助的任务。

> 背景信息 - 我有一个包含多个表的 postgresql 数据库。
> 
> 我需要什么 - 当我在 HTML 页面的表单中输入任何内容时，我需要从所有包含与我输入的内容相关的信息的表格中提取所有信息。
> 
> 示例 - 假设我在表格中输入食物中毒。我需要访问所有表格并提取与食物中毒相关的不同信息。

```
My code: (the connection part is not being posted as it works fine)

    <?php
            $result = pg_prepare($dbh, "Query1", 'SELECT * FROM Project.bacteria WHERE disease = $1');
            // if (pg_numrows($result) == 0)    { 
                // $result = pg_prepare($dbh, "Query1", 'SELECT * FROM Project.virus WHERE disease = $1');  
            // }

            //$sql = "SELECT * FROM Project.bacteria WHERE disease=";
            //$result = pg_query($dbh, $sql);
            $result = pg_execute($dbh, "Query1", array($disease));
            if (!$result) {
                    die("Error in SQL query: " . pg_last_error());
            }
            //$rows = pg_fetch_all($result)

    /*// iterate over result set
    // print each row*/
                while ($row = pg_fetch_array($result)) {
                        echo $row[0]." ".$row[1]. "<br />";
                    } 
?> 
```

对于上面的代码，当我输入`food poisoning`它时，它只搜索一个表`bacteria`，即返回相关信息（这里作为测试，我只在 . 处获取了信息`row position 1 and row position 2`。）

由于有多个表，例如`drugs`存储用于治疗食物中毒的药物信息的表，我想从各个表中提取该信息。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:41:38.467

试试这个

```
SELECT * FROM bacteria WHERE disease = ''
UNION ALL
SELECT * FROM drugs where desease = '' 
```

但我认为最好的方法是标准化你的表格。:)

# google-sheets - 如何在 ARRAYFORMULA() 中使用 INDEX()？

> ID：16140642
> 
> 赞同：5
> 
> 时间：2013-04-22T06:24:32.363
> 
> 标签：google-sheets

我正在尝试`INDEX()`在`ARRAYFORMULA()`. 作为一个简单（无意义）的示例，在 column 中有 4 个元素`A`，我希望输入的以下数组公式`B1`将显示`A`column 中的所有四个元素`B`：

```
=ARRAYFORMULA(INDEX($A$1:$A$4,ROW($A$1:$A$4))) 
```

`B1`但是，这只会用在 中找到的值填充字段`A1`。

当我进入

```
=ARRAYFORMULA(ROW($A$1:$A$4)) 
```

中`B1`，然后我确实看到所有数字 1 到 4 都出现在列中`B`。为什么我的第一个数组公式不像第二个那样扩展？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T06:49:24.887

如果将数组用作其参数之一，则 INDEX 函数不支持对数组进行“迭代”。据我所知，没有这方面的文件；它就是这样。所以第二个参数将始终默认为数组的第一个元素，即 ROW(A1)。

实现所需内容的一种笨拙的解决方法依赖于源数据旁边存在的第二个相邻列*（尽管第二列中的实际值并不重要）：

`=ArrayFormula(HLOOKUP(IF(ROW($A$1:$A$4);$A$1);$A$1:$B$4;ROW($A$1:$A$4);0))`

或者确实是这样的：

`=ArrayFormula(HLOOKUP(IF({3;2;4;1};$A$1);$A$1:$B$4;{3;2;4;1};0))`

* * *

*编辑 2015-06-09*

* 这在最新版的表格中不再需要；HLOOKUP 中的第二个参数可以是 $A$1:$A$4。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-25T11:58:52.483

这是`vlookup`与数组一起使用的提示，因此即使稍后在公式上移动列，公式仍然可以正常工作....

通常，配置 vlookup 使其仅读取 2 列并返回第二列。这可以通过仅输入所需的 2 列而不是范围和列索引来完成。

例子：

替换以下公式，如果移动列，则该公式将失败

```
=arrayformula( vlookup(C:C, booking!$A:$E ,5 ,false) ) 
```

使用这个公式，即使列被移动，它也将继续工作

```
=arrayformula( vlookup(C:C, {booking!$A:$A,booking!$E:$E} ,2 ,false) ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-25T12:12:14.030

注意，您也可以使用 vlookup 模拟索引函数。

例子：

列 R:R 包含用于在列预订中查找数据的行索引号！$A:$A

```
=arrayformula(vlookup(R:R ,arrayformula({row(booking!$A:$A), booking!$A:$A}),2 , false)) 
```

它是一个嵌套数组，因此分阶段测试可能会有所帮助，例如，仅举一个示例的内部部分，例如第 10 行中的返回条目：

```
=vlookup(10 ,arrayformula({row(booking!$A:$A), booking!$A:$A}),2 , false) 
```

# css - 无法减小标题 1 的粗体大小

> ID：16140647
> 
> 赞同：0
> 
> 时间：2013-04-22T06:24:38.110
> 
> 标签：css, html, web, header

我正在尝试使 h1 中的字体不那么粗体。看起来这些字母太胖了。

CSS：

```
h1 {color: #FFFFFF; font-family: ballparkweiner; font-size: 110px;
text-align: center; margin: 0px; }

@font-face {
    font-family: 'ballparkweiner';
    src: url('ballw___.eot');
    src: url('ballw___.eot?#iefix') format('embedded-opentype'),
         url('ballw___.woff') format('woff'),
         url('ballw___.ttf') format('truetype'),
         url('ballw___.svg#ballparkweiner') format('svg');
    font-weight: normal;
    font-style: normal;

}

h2 { margin: 0px; text-align: center; font-size: 40px; color: #FFFFFF; font-family: Cambria;}

body {background-color: #000000;}

h3 {text-align: center; color: #FFFFFF; }

#footer { font-weight: bold; text-align: center; font-family: Audimat;
    clear: both; width:48%;
        border-radius: 8px;
        background-color:black;
        text-align:center; margin-right:auto;
        margin-left:auto; color: #FFFFFF; } 
```

从我在网上搜集的资料来看，大部分都说用font-weight：lighter；

但是当我使用 css 验证器时，这并不能验证。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:40:18.393

添加这个：

```
h1 { font-weight: normal; } 
```

默认情况下，浏览器使用`bold`权重`h1`。由于您`@font-face`只声明了`normal`粗细字体，因此（某些）浏览器会在算法上加粗字形（即，使用一些简单的方法使笔画更宽）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:38:48.843

我实际上只是添加了字体粗细线（我把它放在@font face 下）

```
h1 {color: #FFFFFF; font-family: ballparkweiner; font-size: 110px;
text-align: center; margin: 0px; font-weight: lighter; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T06:35:14.920

我检查了你的 css 验证，你在哪里检查的？可能您检查了 css2 验证。在这里检查这是原始/最佳[http://jigsaw.w3.org/css-validator/validator](http://jigsaw.w3.org/css-validator/validator)

# javascript - 用匹配的子字符串附加字符串

> ID：16140650
> 
> 赞同：0
> 
> 时间：2013-04-22T06:24:51.353
> 
> 标签：javascript, date, nan

我在格式化从 Twitter API 收到的字符串时遇到问题。我使用 timeago 插件并在 IE 10 中返回 NaN。在寻找它之后似乎是因为收到的时间格式如下：

> 2013 年 4 月 2 日星期二 14:27:31 +0000

代替：

> 2013 年 4 月 2 日星期二 14:27:31 +0000

任何人都知道如果存在这种匹配的快速方法，然后如果存在则附加字符串？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:36:09.207

您可以使用`splice`and`split`方法来实现这一点。

```
var time="Tue Apr 02 14:27:31 +0000 2013";
var arr = time.split(" ");
var year = arr.splice(arr.length-1,1);
arr.splice(arr.length-1,0, year[0]);

//console.log(arr.join(" ")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:45:19.310

你可以这样做：

```
Var dateStr; // your date string
Var index = dateStr.indexOf('+'); 

If (index === dateStr.length-5) {
    // you're in format two, what you wanted 
} 
```

需要注意的是，这个日期必须以你显示它的方式出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T06:57:59.103

使用正则表达式，您可以使用：

```
var originalDate = "Tue Apr 02 14:27:31 +0000 2013";
// find the last two number blocks and swap them
var reformattedDate = originalDate.replace(/ (\+[0-9]+) ([0-9]{4})$/, "$2 $1"); 
```

这将切换原始日期中最后两个数字块的位置。

此外，此方法不会更改与正则表达式不匹配的日期。如果您获得的 originalDate 已经具有“2013 +0000”格式，则**不会**更改。;)

# xml - 使所有元素的属性一致

> ID：16140651
> 
> 赞同：1
> 
> 时间：2013-04-22T06:24:57.720
> 
> 标签：xml, xslt

我有一个 XML 文件，其中所有元素的属性都不一致

```
<Elem1 Attrib1="1" Attrib2="2"/>
<Elem2 Attrib1="21" Attrib3="23"/>
<Elem3 Attrib2="32" Attrib3="33" Attrib4="34"/> 
```

我想转换这个文件，以便所有元素都具有相同数量的属性

```
<Elem1 Attrib1="1" Attrib2="2" Attrib3="" Attrib4=""/>
<Elem2 Attrib1="21" Attrib2="" Attrib3="23" Attrib4=""/>
<Elem3 Attrib1="" Attrib2="32" Attrib3="33" Attrib4="34"/> 
```

这可以通过 XSLT 实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:15:36.567

这是一个 XSLT 2.0 选项。它可能被修改为适用于 XSLT 1.0。

**XML 输入**

```
<doc>
    <Elem1 Attrib1="1" Attrib2="2"/>
    <Elem2 Attrib1="21" Attrib3="23"/>
    <Elem3 Attrib2="32" Attrib3="33" Attrib4="34"/>
</doc> 
```

**XSLT 2.0**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:variable name="attrs" select="//@*/name()"/>
    <xsl:key name="kAttrs" match="@*" use="name()"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="*[@*]">
        <xsl:copy>
            <xsl:for-each select="key('kAttrs',$attrs)">
                <xsl:attribute name="{name(.)}"/>
            </xsl:for-each>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
<doc>
   <Elem1 Attrib1="1" Attrib2="2" Attrib3="" Attrib4=""/>
   <Elem2 Attrib1="21" Attrib2="" Attrib3="23" Attrib4=""/>
   <Elem3 Attrib1="" Attrib2="32" Attrib3="33" Attrib4="34"/>
</doc> 
```

* * *

这是另一个 XSLT 2.0 选项，它只是 2.0（这个也**快得多**）：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:variable name="attrs" select="distinct-values(//@*/name())"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="*[@*]">
        <xsl:copy>
            <xsl:for-each select="$attrs">
                <xsl:attribute name="{.}"/>
            </xsl:for-each>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

这将返回与上面相同的结果（带有相同的输入）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:07:35.967

有很多可能的灵魂。假设您所关注的属性列表是众所周知的，这里有点简单：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="Elem1|Elem2|Elem3">
        <xsl:copy >
            <xsl:attribute name="Attrib1">
                <xsl:value-of select="@Attrib1"/>
            </xsl:attribute>
            <xsl:attribute name="Attrib2">
                <xsl:value-of select="@Attrib2"/>
            </xsl:attribute>
            <xsl:attribute name="Attrib3">
                <xsl:value-of select="@Attrib3"/>
            </xsl:attribute>
            <xsl:attribute name="Attrib4">
                <xsl:value-of select="@Attrib4"/>
            </xsl:attribute>
        </xsl:copy>

    </xsl:template>
    <xsl:template match="*">
        <test>
        <xsl:apply-templates  />
        </test>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T06:51:46.900

**当转型**

```
<?xml version='1.0'?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml"/>
<xsl:template match="@*|node()">
<xsl:copy>
<xsl:apply-templates select="@*|node()"/>
</xsl:copy>
</xsl:template>

<xsl:template match="Elem1|Elem2|Elem3">
<xsl:copy>
<xsl:if test="@Attrib1"><xsl:attribute name="Attrib1"><xsl:value-of select="@Attrib1"/></xsl:attribute></xsl:if>
<xsl:if test="not(@Attrib1)"><xsl:attribute name="Attrib1"></xsl:attribute></xsl:if>
<xsl:if test="@Attrib2"><xsl:attribute name="Attrib2"><xsl:value-of select="@Attrib2"/></xsl:attribute></xsl:if>
<xsl:if test="not(@Attrib2)"><xsl:attribute name="Attrib2"></xsl:attribute></xsl:if>
<xsl:if test="@Attrib3"><xsl:attribute name="Attrib3"><xsl:value-of select="@Attrib3"/></xsl:attribute></xsl:if>
<xsl:if test="not(@Attrib3)"><xsl:attribute name="Attrib3"></xsl:attribute></xsl:if>
<xsl:if test="@Attrib4"><xsl:attribute name="Attrib4"><xsl:value-of select="@Attrib4"/></xsl:attribute></xsl:if>
<xsl:if test="not(@Attrib4)"><xsl:attribute name="Attrib4"></xsl:attribute></xsl:if>
</xsl:copy>
</xsl:template>
</xsl:stylesheet> 
```

**在以下 XML 上运行**

```
<test>
<Elem1 Attrib1="1" Attrib2="2"/>
<Elem2 Attrib1="21" Attrib3="23"/>
<Elem3 Attrib2="32" Attrib3="33" Attrib4="34"/>
</test> 
```

**给出所需的输出**

```
<?xml version='1.0' ?>
<test>
<Elem1 Attrib1="1" Attrib2="2" Attrib3="" Attrib4=""/>
<Elem2 Attrib1="21" Attrib2="" Attrib3="23" Attrib4=""/>
<Elem3 Attrib1="" Attrib2="32" Attrib3="33" Attrib4="34"/>
</test> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T08:36:31.477

这是 XSLT 1.0 中的通用方法。它包含一些额外的逻辑来确保属性的顺序相同：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes" />
  <xsl:key name="kAttr" match="@*" use="name()" />
  <xsl:variable name="distinctAttr"
                select="//@*[generate-id() = 
                             generate-id(key('kAttr', name())[1])]" />

  <xsl:template match="node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="*/*">
    <xsl:copy>
      <xsl:apply-templates select="$distinctAttr | @*">
        <xsl:sort select="name()" />
        <xsl:with-param name="parent" select="." />
      </xsl:apply-templates>
      <xsl:apply-templates select="node()" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="@*">
    <xsl:param name="parent" select="/.." />
    <xsl:if test="not($parent) or 
                  count(.. | $parent) = 1 or 
                  not($parent/@*[name() = name(current())])">
      <xsl:attribute name="{name()}">
        <xsl:value-of select="substring(., 1, string-length() * 
                                              (2 - count($parent | ..)))"/>
      </xsl:attribute>
    </xsl:if>
  </xsl:template>
</xsl:stylesheet> 
```

在此输入上运行时：

```
<doc>
  <Elem1 Attrib1="1" Attrib2="2"/>
  <Elem2 Attrib1="21" Attrib3="23"/>
  <Elem3 Attrib2="32" Attrib3="33" Attrib4="34"/>
</doc> 
```

结果是：

```
<doc>
  <Elem1 Attrib1="1" Attrib2="2" Attrib3="" Attrib4="" />
  <Elem2 Attrib1="21" Attrib2="" Attrib3="23" Attrib4="" />
  <Elem3 Attrib1="" Attrib2="32" Attrib3="33" Attrib4="34" />
</doc> 
```

# ios - 自定义 TableView 单元格在滚动 iPhone 之前和之前混合

> ID：16140652
> 
> 赞同：0
> 
> 时间：2013-04-22T06:25:02.507
> 
> 标签：ios, uitableview

在我的应用程序中，我有自定义的 tableView 单元格，其中 UILabels 具有不同的高度和两个按钮。我已经尝试了多种解决方案，但仍然没有运气。你能否建议我在下面的代码中哪里错了......

```
- (void)viewDidLoad
{
[super viewDidLoad];

self.myChklist.rowHeight = 10;
contentView.hidden = YES;
buildingQuest = [[NSMutableArray alloc]initWithObjects:@"Motor vehicles are not parked in the space",@"The complex spatial separation is not flammable by cutting of the substances released in the space",@"Is the provided interval for the Complex spatial Separation yet compiled? 1>Minimum distance between buildings is the height of higher building, at least 5m. 2>Minimum distance between buildings and warehouses of combustible materials at least 20 m", @"Are the openings (e.g. edges of the corrugated plates) completely covered in the terminal area with non-combustible material?",@"Information on both sides exists, that in the closing no materials may be suppressed, the presence of persons is prohibited in the closed area and that the fire doors must remain open only as long as necessary for operational reasons.",@"Motor vehicles are not parked in the space",nil ];

myChklist.delegate = self;
myChklist.dataSource = self;
[self.myChklist reloadData]; 
```

}

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

contentView.hidden = YES;
if( tableView == myChklist)
{

     static NSUInteger const kQuestLabelTag = 1;
    static NSUInteger const kYesButtonTag = 2;
    static NSUInteger const kNoButtonTag = 3;

   UILabel *QuestLabel = nil;
    UIButton *YesButton;
    UIButton *NoButton;
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        cell.selectionStyle = UITableViewCellSelectionStyleGray;           //cell bg
        self.myChklist.backgroundColor = [UIColor clearColor];

        QuestLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 5, 300, 0)];
        QuestLabel.tag = kQuestLabelTag;
        QuestLabel.numberOfLines = 9;//ceilf([[buildingQuest objectAtIndex:indexPath.row] sizeWithFont:[UIFont boldSystemFontOfSize:18] constrainedToSize:CGSizeMake(300, MAXFLOAT) lineBreakMode:NSLineBreakByWordWrapping].height);// add this  line

        QuestLabel.backgroundColor = [UIColor clearColor];
    QuestLabel.font = [UIFont systemFontOfSize:16];

        NSString *titleString = [buildingQuest objectAtIndex:indexPath.row] ;
        CGSize titleSize = [titleString sizeWithFont:[UIFont boldSystemFontOfSize:18] constrainedToSize:CGSizeMake(300, MAXFLOAT) lineBreakMode:NSLineBreakByWordWrapping];

        UIButton *YesButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];//[[UIButton alloc]
        [YesButton setFrame:CGRectMake(10, titleSize.height+5, 60, 30)];
        [YesButton setTitle:@"Yes" forState:UIControlStateNormal];

        YesButton.tag = kYesButtonTag;

        [YesButton.titleLabel setFont:[UIFont boldSystemFontOfSize:13]];
        YesButton.titleLabel.textColor = [UIColor blackColor];
        [YesButton addTarget:self action:@selector(yesAction) forControlEvents:UIControlEventTouchUpInside];
         [cell.contentView addSubview:YesButton];

        UIButton *NoButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [NoButton setTitle:@"No" forState:UIControlStateNormal];
        [NoButton.titleLabel setFont:[UIFont boldSystemFontOfSize:13]];
        NoButton.titleLabel.textColor = [UIColor blackColor];

        [NoButton setFrame:CGRectMake(95, titleSize.height+5, 60, 30)];
        NoButton.tag = kNoButtonTag;
        [NoButton setTag:indexPath.row];
        [NoButton addTarget:self action:@selector(NoAction:) forControlEvents:UIControlEventTouchUpInside];

        [cell.contentView addSubview:QuestLabel];

        [cell.contentView addSubview:NoButton];

    }
    else

   {

    QuestLabel = (UILabel *)[cell.contentView viewWithTag:kQuestLabelTag];
    YesButton = (UIButton *)[cell.contentView viewWithTag:kYesButtonTag];
    NoButton = (UIButton *)[cell.contentView viewWithTag:kNoButtonTag];

    }

    QuestLabel.text = [buildingQuest objectAtIndex:indexPath.row];

    questionString = [NSString stringWithFormat:@"%@",QuestLabel.text];

    QuestLabel.numberOfLines = ceilf([[buildingQuest objectAtIndex:indexPath.row] sizeWithFont:[UIFont boldSystemFontOfSize:18] constrainedToSize:CGSizeMake(300, MAXFLOAT) lineBreakMode:NSLineBreakByWordWrapping].height);
    NSString *titleString = [buildingQuest objectAtIndex:indexPath.row] ;
    CGSize titleSize = [titleString sizeWithFont:[UIFont boldSystemFontOfSize:18] constrainedToSize:CGSizeMake(300, MAXFLOAT) lineBreakMode:NSLineBreakByWordWrapping];

    [QuestLabel sizeToFit];
    return cell;

}

 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

NSString *titleString = [buildingQuest objectAtIndex:indexPath.row] ;
CGSize titleSize = [titleString sizeWithFont:[UIFont boldSystemFontOfSize:18] constrainedToSize:CGSizeMake(300, MAXFLOAT) lineBreakMode:NSLineBreakByWordWrapping];

return (titleSize.height)+70;
} 
```

**更新**1：现在我的标签按照 Rajesh 的回答正常工作。但是设置按钮标签是在单元格中混合我的按钮。

```
[NoButton setTag:indexPath.row]; //removing this line from tableview cell the button adjust properly, but on  button action it not provide me the index.row label.

-(void)NoAction:(id)sender       //button action
{

  NSIndexPath *indexPath = [NSIndexPath indexPathForRow:[sender tag] inSection:0];
  UITableViewCell *cell = [myChklist cellForRowAtIndexPath:indexPath];
   // NSIndexPath *selectedIndexPath = [self.myChklist indexPathForSelectedRow];
  questionString = [buildingQuest objectAtIndex:indexPath.row];

  checklistController *chk = [[checklistController alloc]initWithNibName:@"checklistController" bundle:nil];
  [self presentViewController:chk animated:YES completion:nil];

 chk.passedQuestString = questionString;
 } 
```

能否请你帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:24:44.117

我已经编辑了代码，请检查下面的代码。

而不是`[QuestLabel sizeToFit];`我动态设置标签高度

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

        static NSUInteger const kQuestLabelTag = 1;
        static NSUInteger const kYesButtonTag = 2;
        static NSUInteger const kNoButtonTag = 3;

        UILabel *QuestLabel = nil;
        UIButton *YesButton;
        UIButton *NoButton;
        static NSString *CellIdentifier = @"Cell";

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (cell == nil)
        {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

            cell.selectionStyle = UITableViewCellSelectionStyleGray;           //cell bg
            self.tableView1.backgroundColor = [UIColor clearColor];

            QuestLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 5, 300, 0)];
            QuestLabel.tag = kQuestLabelTag;
            QuestLabel.numberOfLines = 9;//ceilf([[buildingQuest objectAtIndex:indexPath.row] sizeWithFont:[UIFont boldSystemFontOfSize:18] constrainedToSize:CGSizeMake(300, MAXFLOAT) lineBreakMode:NSLineBreakByWordWrapping].height);// add this  line

            QuestLabel.backgroundColor = [UIColor clearColor];
            QuestLabel.font = [UIFont systemFontOfSize:16];

            NSString *titleString = [buildingQuest objectAtIndex:indexPath.row] ;
            CGSize titleSize = [titleString sizeWithFont:[UIFont boldSystemFontOfSize:18] constrainedToSize:CGSizeMake(300, MAXFLOAT) lineBreakMode:NSLineBreakByWordWrapping];

            UIButton *YesButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];//[[UIButton alloc]
            [YesButton setFrame:CGRectMake(10, titleSize.height+5, 60, 30)];
            [YesButton setTitle:@"Yes" forState:UIControlStateNormal];

            YesButton.tag = kYesButtonTag;

            [YesButton.titleLabel setFont:[UIFont boldSystemFontOfSize:13]];
            YesButton.titleLabel.textColor = [UIColor blackColor];
            [YesButton addTarget:self action:@selector(yesAction) forControlEvents:UIControlEventTouchUpInside];
            [cell.contentView addSubview:YesButton];

            UIButton *NoButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
            [NoButton setTitle:@"No" forState:UIControlStateNormal];
            [NoButton.titleLabel setFont:[UIFont boldSystemFontOfSize:13]];
            NoButton.titleLabel.textColor = [UIColor blackColor];

            [NoButton setFrame:CGRectMake(95, titleSize.height+5, 60, 30)];
            NoButton.tag = kNoButtonTag;
            [NoButton setTag:indexPath.row];
            [NoButton addTarget:self action:@selector(NoAction:) forControlEvents:UIControlEventTouchUpInside];

            [cell.contentView addSubview:QuestLabel];

            [cell.contentView addSubview:NoButton];

        }
        else

        {

            QuestLabel = (UILabel *)[cell.contentView viewWithTag:kQuestLabelTag];
            YesButton = (UIButton *)[cell.contentView viewWithTag:kYesButtonTag];
            NoButton = (UIButton *)[cell.contentView viewWithTag:kNoButtonTag];

        }

        QuestLabel.text = [buildingQuest objectAtIndex:indexPath.row];

        QuestLabel.numberOfLines = 0;

        NSString *titleString = [buildingQuest objectAtIndex:indexPath.row] ;
        CGSize titleSize = [titleString sizeWithFont:[UIFont boldSystemFontOfSize:18] constrainedToSize:CGSizeMake(300, MAXFLOAT) lineBreakMode:NSLineBreakByWordWrapping];
        CGRect rect = QuestLabel.frame;
        rect.size.height = titleSize.height+10;
        QuestLabel.frame = rect;

        return cell;

    } 
```

# android - programmatically include layout(i.e not xml) in android game

> ID：16140656
> 
> 赞同：0
> 
> 时间：2013-04-22T06:25:10.217
> 
> 标签：android, revmob

How to include layout programmatically in android without using xml layouts to display banner ads in android. I am creating a game App where i need to display banner ads in each and every game page. I have already included full screen revmob ads but i need to include banner ads. I used the following code but banner ads are not displaying

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

    <LinearLayout android:id="@+id/banner"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content" >
    </LinearLayout>

    </LinearLayout> 
```

MainActivity.java

```
public class MainActivity extends Activity {
private CCGLSurfaceView mGLSurfaceView;
private boolean isCreated = false;
public static FrameLayout m_rootLayout;

public static String APPLICATION_ID = "514b9c57cce0500d00000001";
public static RevMob revmob;

// This is used to display Toast messages and is not necessary for your app
@Override
protected void onCreate(Bundle savedInstanceState) {
    if (!isCreated) {
        isCreated = true;
    } else {
        return;
    }

    super.onCreate(savedInstanceState);

    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(R.layout.activity_main);
     //admob widget

    revmob = RevMob.start(this, APPLICATION_ID);
     displayRevMob();

    mGLSurfaceView = new CCGLSurfaceView(this);
    setContentView(mGLSurfaceView);

    CCDirector.sharedDirector().attachInView(mGLSurfaceView);

    getScaledCoordinate();

    Global.assetManager = getAssets();
    Global.context = this;
    Global.loadUserInfo();
    CCScene scene = CCScene.node();
    scene.addChild(new SplashScene(), -1);

    CCDirector.sharedDirector().runWithScene(scene);

    //-------------IAP-----------------------
    Log.d(TAG1, "Creating IAB helper.");
        mHelper = new IabHelper(this, base64EncodedPublicKey);
        mHelper.enableDebugLogging(true);
        Log.d(TAG1, "Starting setup.");
        mHelper.startSetup(new IabHelper.OnIabSetupFinishedListener() {
            public void onIabSetupFinished(IabResult result) {
                Log.d(TAG, "Setup finished.");

                if (!result.isSuccess()) {
                    // Oh noes, there was a problem.
                    complain("Problem setting up in-app billing: " + result);
                    return;
                }

                // Hooray, IAB is fully set up. Now, let's get an inventory of stuff we own.
                Log.d(TAG, "Setup successful. Querying inventory.");
                mHelper.queryInventoryAsync(mGotInventoryListener);
            }
        });

      RevMobBanner banner = revmob.createBanner(this);
          ViewGroup view = (ViewGroup) findViewById(R.id.banner);
          view.addView(banner);

        Global.myActivity=this;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:40:07.283

You should first create a new view from your xml layout file by LayoutInflater. then add the banner to it. here is a sample:

```
LayoutInflater inflater = LayoutInflater.from(getContext()); 
ViewGroup yourview = (ViewGroup)inflater.inflate(R.layout.yourlayout, null);

RevMobBanner banner = revmob.createBanner(this);
yourview.addView(banner); 
```

if you want use a linearlayout above your surfaceview, a simple way is this:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

    <LinearLayout android:id="@+id/banner"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content" 
           android:orientation="vertical">
    </LinearLayout>

    <CCGLSurfaceView android:id="@+id/yoursurfaceview"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content">
    </CCGLSurfaceView>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:54:38.940

The programmatic translation of your XML is;

```
LinearLayout lin=new LinearLayout(this);
lin.setLayoutsParams(new LayoutParams(LayoutParams.FILL_PARENT,
                                      LayoutParams.FILL_PARENT));
lin.setOrientation(LinearLayout.VERTICAL);

LinearLayout lin2=new LinearLayout(this);
lin2.setLayoutsParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                                      LayoutParams.WRAP_CONTENT));

lin.addView(lin2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:18:04.180

you can use **LayoutInflater** For example

```
LayoutInflater inflater = getLayoutInflater();
View layOut = inflater.inflate(R.layout.some_layout_name, false, false);
//to fetch Views use 
TextView label_name = (TextView) layOut.findViewById(R.id.view_id_here); 
```

# database - WIX：尝试在远程服务器上创建文件时 CostFinalize 引发错误

> ID：16140658
> 
> 赞同：1
> 
> 时间：2013-04-22T06:25:12.647
> 
> 标签：database, installation, wix

我们正在为安装程序使用 WIX 工具。我们可以选择在远程服务器上创建数据库。

当我们尝试在我们部署的服务器上不存在的驱动器上的远程服务器上创建数据库时，安装程​​序会抛出错误，提示“无效驱动器”。

在日志中，我们发现 CostFinalize 失败，因为此自定义操作尝试验证本地服务器上的空间。

有没有人遇到过这个问题？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:23:43.727

您**不能**安装到不存在的驱动器号。此外，映射到驱动器号的网络共享可能很难从系统服务访问，因为驱动器号可能仅对创建驱动器的用户可见。

但是，可以将文件安装到网络文件夹。[这个答案](https://stackoverflow.com/a/15956971/23852)中有详细信息。这将提供一个更强大的解决方案，而不是依赖映射到驱动器的网络共享是正确的。

# plone - Pone 4.3 uid 和 gid 未找到

> ID：16140660
> 
> 赞同：0
> 
> 时间：2013-04-22T06:25:14.520
> 
> 标签：plone

当使用统一安装程序安装 plone 4.3 时，它说它没有找到 gid，即使该组存在。

```
root@adrian:/home/Plone-4.3-UnifiedInstaller# ./install.sh --password=xxx --target=/home/Plone-4.3 --user=admin standalone

Testing /usr/bin/python2.7 for Zope/Plone requirements....
/usr/bin/python2.7 looks OK. We'll try to use it.

Root install method chosen. Will install for use by users:
  ZEO & Client Daemons:      admin
  Code Resources & buildout: plone_buildout

Detailed installation log being written to /home/Plone-4.3-UnifiedInstaller/install.log
Installing Plone 4.3 at /home/Plone-4.3

Using useradd and groupadd to create users and groups.
User 'admin' already exists. No need to create it.
id for admin returned
uid=5006(admin) gid=5007(admin) groups=5007(admin)
Expected to find uid for admin and gid for plone_group but did not.
Please use your system tools to create/edit users and groups, then try again. 
```

当我尝试按照建议做时：

```
root@adrian:/home# groupadd plone_group
groupadd: group 'plone_group' already exists 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:04:37.433

安装程序希望守护程序用户将 plone_group 作为其默认组。您正在使用的预先存在的用户已经有自己的默认组。

作为一种解决方法，请尝试让安装程序创建一个新的守护程序用户（或让它使用 plone_daemon）。

[并且，请在http://dev.plone.org](http://dev.plone.org)将其作为 bug 票提交。包括有关您的操作系统和版本的详细信息。将组件（用于票证）设置为“安装程序”。它会得到及时的关注。

# java - 在 HttpURLConnection 中使用 setReadTimeout 和代理设置

> ID：16140664
> 
> 赞同：1
> 
> 时间：2013-04-22T06:25:24.467
> 
> 标签：java, proxy, httpurlconnection, connection-timeout

我正在尝试使用用户定义的代理设置连接到 Internet。我已将其设置`setReadTimeout`为 5 秒。如果配置的代理不正确，那么我们将无法连接到互联网，我正在使用以下代码，但根本不会发生读取超时。

```
 URL u = new URL("http://www.google.com/");
            System.out.println("Checking internet connection availability.....");
            System.setProperty("java.net.useSystemProxies", "true");
            System.setProperty("http.proxyHost", proxyHost);
            System.setProperty("http.proxyPort", proxyPort);
            HttpURLConnection uc = (HttpURLConnection) u.openConnection();
            uc.setReadTimeout(5000);
            System.out.println("Response code : " + uc.getResponseCode());
            System.out.println("Internet connection is available....."); 
```

如果我运行上面的代码，那么程序会继续执行并且不会在 5 秒内终止。

有人可以帮我解决我的代码中的问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:31:31.137

尝试也添加`uc.setConnectTimeout(5000);`

**编辑：最终解决方案**

`uc.connect();`在获取响应代码之前使用。

此外，在打开 HttpURLConnection 时添加代理配置。

像这样 ：

```
HttpURLConnection uc = (HttpURLConnection) u.openConnection(new Proxy(Proxy.Type.HTTP, new InetSocketAddress(myProxyHost, Integer.parseInt(myProxyPort)))); 
```

# android - 在 HTTP Post Android 上传递参数

> ID：16140667
> 
> 赞同：0
> 
> 时间：2013-04-22T06:25:33.933
> 
> 标签：android, json, http

第一次进行 Web 集成工作时，我在将用户注册到系统时遇到了问题。我的本地主机中有一个`api`可以执行此功能。但问题是其返回的输出。传递数据时参数的类型是否也很重要？就像如果有一个字段询问用户的号码，在 HTTP POST 中，我是否必须以整数形式发回数据？但我确实注意到`BasicNameValuePair`不允许这样做。

基本程序如下所示：

```
public JSONObject registerURL(String fname,String lname,String mail,String password,String number,String sex,int role,String dob,String horoscope,String tob,String pob){
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("first_name", fname));
        params.add(new BasicNameValuePair("last_name", lname));
        params.add(new BasicNameValuePair("email",mail));
        params.add(new BasicNameValuePair("phone",number));
        params.add(new BasicNameValuePair("password",password));
        params.add(new BasicNameValuePair("sex",sex));
        params.add(new BasicNameValuePair("role", String.valueOf(role)));
        params.add(new BasicNameValuePair("date_of_birth",dob));
        params.add(new BasicNameValuePair("horoscope_id",horoscope));
        params.add(new BasicNameValuePair("time_of_birth",tob));
        params.add(new BasicNameValuePair("place_of_birth",pob));
        try {
            json = jsonParser.getJSONFromUrl(registerURL, params, POST);
        } catch (URISyntaxException e) {
            e.printStackTrace();
        }
        return json;
    } 
```

它调用的地方

```
public JSONObject getJSONFromUrl(String url, List<NameValuePair> params, int method) throws URISyntaxException {

        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpResponse httpResponse = null;
        HttpEntity httpentity = null;

        try {
            switch (method) {
            case 1: //PUT
                HttpPut putrequest  = new HttpPut(url);
                putrequest.setEntity(new UrlEncodedFormEntity(params));
                httpResponse  = httpClient.execute(putrequest);
                httpentity = httpResponse.getEntity();
                break;
            case 2: //GET
//              String paramString = URLEncodedUtils.format(params, "utf-8");
//              url += "?" + paramString;              
//              Log.e("URL", url);
                HttpGet httpGet = new HttpGet(url);   
                httpResponse = httpClient.execute(httpGet);
                httpentity = httpResponse.getEntity();          
                break;
            case 3: //POST
                HttpPost postrequest = new HttpPost(url);
                postrequest.setEntity(new UrlEncodedFormEntity(params));
                httpResponse = httpClient.execute(postrequest);
                httpentity = httpResponse.getEntity();

                break;
            }

            is = httpentity.getContent();

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
            Log.i("JSON HERE", json);
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);            
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    } 
```

错误如下：

```
04-22 12:20:44.745: I/JSON HERE(666): ArrayObject Object
04-22 12:20:44.745: I/JSON HERE(666): (
04-22 12:20:44.745: I/JSON HERE(666):     [storage:ArrayObject:private] => Array
04-22 12:20:44.745: I/JSON HERE(666):         (
04-22 12:20:44.745: I/JSON HERE(666):             [exception] => Exception Object
04-22 12:20:44.745: I/JSON HERE(666):                 (
04-22 12:20:44.745: I/JSON HERE(666):                     [message:protected] => Unrecognized method 'setIduser()'
04-22 12:20:44.745: I/JSON HERE(666):                     [string:Exception:private] => 
04-22 12:20:44.745: I/JSON HERE(666):                     [code:protected] => 0
04-22 12:20:44.745: I/JSON HERE(666):                     [file:protected] => C:\xampp\htdocs\blamethestars2\application\modules\api\models\ModelAbstract.php
04-22 12:20:44.745: I/JSON HERE(666):                     [line:protected] => 200
04-22 12:20:44.745: I/JSON HERE(666):                     [trace:Exception:private] => Array
04-22 12:20:44.745: I/JSON HERE(666):                         (
04-22 12:20:44.745: I/JSON HERE(666):                             [0] => Array
04-22 12:20:44.745: I/JSON HERE(666):                                 (
04-22 12:20:44.745: I/JSON HERE(666):                                     [file] => C:\xampp\htdocs\blamethestars2\application\modules\api\controllers\UserController.php
04-22 12:20:44.745: I/JSON HERE(666):                                     [line] => 102
04-22 12:20:44.745: I/JSON HERE(666):                                     [function] => __call
04-22 12:20:44.745: I/JSON HERE(666):                                     [class] => Api_Model_ModelAbstract
04-22 12:20:44.745: I/JSON HERE(666):                                     [type] => ->
04-22 12:20:44.745: I/JSON HERE(666):                                     [args] => Array
04-22 12:20:44.745: I/JSON HERE(666):                                         (
04-22 12:20:44.745: I/JSON HERE(666):                                             [0] => setIduser
04-22 12:20:44.745: I/JSON HERE(666):                                             [1] => Array
04-22 12:20:44.745: I/JSON HERE(666):                                                 (
04-22 12:20:44.745: I/JSON HERE(666):                                                     [0] => 1
04-22 12:20:44.745: I/JSON HERE(666):                                                 )
04-22 12:20:44.745: I/JSON HERE(666):                                         )
04-22 12:20:44.745: I/JSON HERE(666):                                 )
04-22 12:20:44.745: I/JSON HERE(666):                             [1] => Array
04-22 12:20:44.745: I/JSON HERE(666):                                 (
04-22 12:20:44.745: I/JSON HERE(666):                                     [file] => C:\xampp\htdocs\blamethestars2\application\modules\api\controllers\UserController.php
04-22 12:20:44.745: I/JSON HERE(666):                                     [line] => 102
04-22 12:20:44.745: I/JSON HERE(666):                                     [function] => setIduser
04-22 12:20:44.745: I/JSON HERE(666):                                     [class] => Api_Model_ProfileUser
04-22 12:20:44.745: I/JSON HERE(666):                                     [type] => ->
04-22 12:20:44.745: I/JSON HERE(666):                                     [args] => Array
04-22 12:20:44.745: I/JSON HERE(666):                                         (
04-22 12:20:44.745: I/JSON HERE(666):                                             [0] => 1
04-22 12:20:44.745: I/JSON HERE(666):                                         )
04-22 12:20:44.745: I/JSON HERE(666):                                 )
04-22 12:20:44.745: I/JSON HERE(666):                             [2] => Array
04-22 12:20:44.745: I/JSON HERE(666):                                 (
04-22 12:20:44.745: I/JSON HERE(666):                                     [file] => C:\xampp\htdocs\blamethestars2\library\Zend\Controller\Action.php
04-22 12:20:44.745: I/JSON HERE(666):                                     [line] => 516
04-22 12:20:44.745: I/JSON HERE(666):                                     [function] => registerAction
04-22 12:20:44.745: I/JSON HERE(666):                                     [class] => Api_UserController
04-22 12:20:44.745: I/JSON HERE(666):                                     [type] => ->
04-22 12:20:44.745: I/JSON HERE(666):                                     [args] => Array
04-22 12:20:44.745: I/JSON HERE(666):                                         (
04-22 12:20:44.745: I/JSON HERE(666):                                         )
04-22 12:20:44.745: I/JSON HERE(666):                                 )
04-22 12:20:44.745: I/JSON HERE(666):                             [3] => Array
04-22 12:20:44.745: I/JSON HERE(666):                                 (
04-22 12:20:44.745: I/JSON HERE(666):                                     [file] => C:\xampp\htdocs\blamethestars2\library\Zend\Controller\Dispatcher\Standard.php
04-22 12:20:44.745: I/JSON HERE(666):                                     [line] => 308
04-22 12:20:44.745: I/JSON HERE(666):                                     [function] => dispatch
04-22 12:20:44.745: I/JSON HERE(666):                                     [class] => Zend_Controller_Action
04-22 12:20:44.745: I/JSON HERE(666):                                     [type] => ->
04-22 12:20:44.745: I/JSON HERE(666):                                     [args] => Array
04-22 12:20:44.745: I/JSON HERE(666):                                         (
04-22 12:20:44.745: I/JSON HERE(666):                                             [0] => registerAction
04-22 12:20:44.745: I/JSON HERE(666):                                         )
04-22 12:20:44.745: I/JSON HERE(666):                                 )
04-22 12:20:44.745: I/JSON HERE(666):                             [4] => Array
04-22 12:20:44.745: I/JSON HERE(666):                                 (
04-22 12:20:44.745: I/JSON HERE(666):                                     [file] => C:\xampp\htdocs\blamethestars2\library\Zend\Controller\Front.php
04-22 12:20:44.745: I/JSON HERE(666):                                     [line] => 954
04-22 12:20:44.745: I/JSON HERE(666):                                     [function] => dispatch
04-22 12:20:44.745: I/JSON HERE(666):                                     [class] => Zend_Controller_Dispatcher_Standard
04-22 12:20:44.745: I/JSON HERE(666):                                     [type] => ->
04-22 12:20:44.745: I/JSON HERE(666):                                     [args] => Array
04-22 12:20:44.745: I/JSON HERE(666):                                         (
04-22 12:20:44.745: I/JSON HERE(666):                                             [0] => Zend_Controller_Request_Http Object
04-22 12:20:44.745: I/JSON HERE(666):                                                 (
04-22 12:20:44.745: I/JSON HERE(666):                                                     [_
04-22 12:20:44.745: E/JSON Parser(666): Error parsing data org.json.JSONException: Value ArrayObject of type java.lang.String cannot be converted to JSONObject 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:34:01.520

啊哈，您首先需要创建 JSONArray 而不是 JSONObject。因为，您使用了 json 数组。

```
JSONArray jsonArray = new JSONArray(jsonString);

JSONObject jsonObject = jsonArray.getJSONObject(index); 
```

# java - 错误：无法找到或加载主类 - Java cygwin

> ID：16140668
> 
> 赞同：8
> 
> 时间：2013-04-22T06:25:39.640
> 
> 标签：java, linux, cygwin, classpath

在 Windows 7 上使用 cygwin。

要编译我的所有文件，我会：

```
javac -cp ./antlr-3.2.jar *.java 
```

效果很好。然后我尝试

```
java -cp .:./antlr-3.2.jar Interpreter 
```

其中解释器是`.java`我知道在当前目录中的文件。我认为添加`.`到类路径可以解决我的问题，但我仍然得到

```
Error: Could not find or load main class Interpreter 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-22T06:26:47.897

即使您在 cygwin 下运行，java.exe 仍然是一个 windows 程序。

它需要`;`作为类路径分隔符。尝试 ，

```
java -cp ".;./antlr-3.2.jar" Interpreter 
```

或者

```
java -cp .\;./antlr-3.2.jar Interpreter 
```

您需要正确地转义或引用类路径，以便它不会被 shell 解释。

# asp.net - 如何迭代objectresult中的所有行和列

> ID：16140677
> 
> 赞同：0
> 
> 时间：2013-04-22T06:26:17.857
> 
> 标签：asp.net, linq-to-entities

有没有办法迭代objectResult？即就像在不指定列名的情况下迭代数据表的所有列和行一样。

我喜欢创建一个通用函数，它将显示对象结果的所有列。那么有可能实现这一目标吗？

```
Dim queryResults As Data.Objects.ObjectResult = CType(obj, Data.Objects.ObjectResult)

    If Not (queryResults Is Nothing) Then

        ' Create the representation. 
        Dim result As New Dictionary(Of String, Object)
        Dim enumerator As System.Collections.IEnumerator = Nothing
        enumerator = DirectCast(queryResults, System.Collections.IEnumerable).GetEnumerator()

        ' Iterate through the query results.  
        While enumerator.MoveNext() 
         ''How to get all columns ???
        End While
        ' Dispose the enumerator  
        DirectCast(enumerator, IDisposable).Dispose()

        Return result
    End If
    Return New Dictionary(Of String, Object) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:31:54.170

以这种方式尝试：

```
DataTable table = GetTable(); // Your Query to Get the data table.
foreach (DataRow row in table.Rows) // Loop over the rows.
{

    foreach (var item in row.ItemArray) // Loop over the items.
    {
       Console.WriteLine(item);
    }
} 
```

# javascript - 不允许使用 expressjs 加载本地资源

> ID：16140678
> 
> 赞同：0
> 
> 时间：2013-04-22T06:26:18.900
> 
> 标签：javascript, node.js, express

我正在尝试从文本文件中的字符串（文件名）加载图像文件：

```
var thisItem = ITEM_COLLECTION_FILE_NAME;
var rs = fs.createReadStream(path.resolve(thisItem));

rs.on("data", function(data) {
if (data) {
lines += data;
}
}); 
```

但是，当页面加载时，我收到此错误：

```
Not allowed to load local resource 
```

在这样的论坛上：[http](http://www.sencha.com/forum/showthread.php?200512-Not-allowed-to-load-local-resource) ://www.sencha.com/forum/showthread.php?200512-Not-allowed-to-load-local-resource我发现建议说我应该通过 HTTP 提供文件目录。问题是，我的整个应用程序都是基于 Express 构建的，所以它已经在使用 http 来提供文件。关于我在这里做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T14:01:38.400

您的问题与[Same origin policy](http://en.wikipedia.org/wiki/Same_origin_policy "同源政策")相关。如果您使用的是 express，您可以执行以下操作：

```
app.get('/img', function(req, res){
try{
    var full_path = /full/path/to/your/local/file

    fs.exists(full_path, function(exists){
        if(!exists){
            res.render('404.jade', {});
        }else{
            fs.readFile(full_path, "binary", function(err, file) {
                    res.writeHeader(200);  
                    res.write(file, "binary"); 
                    res.end();
            });
        }
    });
}catch (err){
    res.render('500.jade', {});
}
}); 
```

这会将您的图像写入流。您还可以通过提供静态文件的文件服务器或网络服务器提供您的图像，然后通过 http 从您的翡翠模板访问它。由于上述政策，您无法加载本地资源，例如 file://path/to/local/file

# gdb - gdb地址旁边的*是什么意思？

> ID：16140681
> 
> 赞同：1
> 
> 时间：2013-04-22T06:26:29.103
> 
> 标签：gdb

在下面的 gdb 输出中，地址旁边的 * 是什么意思？

```
(gdb) disas                                                  
Dump of assembler code for function _exit@plt:               
0x0804838c <_exit@plt+0>:       jmp    *0x8049774            
0x08048392 <_exit@plt+6>:       push   $0x10                 
0x08048397 <_exit@plt+11>:      jmp    0x804835c             
End of assembler dump. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:37:08.673

地址前的星号表示间接跳转。所以跳转的目标不是`0x8049774`，而是目标存储的地址`0x8049774`。

# javascript - 尝试获取国家/地区代码但没有提醒它不起作用

> ID：16140682
> 
> 赞同：0
> 
> 时间：2013-04-22T06:26:36.513
> 
> 标签：javascript, xpath

这是我的代码：-

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
            $.get(
        "final.xml",
        null,
        function (data) {
            xml = data;
        },
        "xml"
    );
    function get_list(){
             var city = $('#name').val();
            var xPath = '//*[@value = "' + city + '"]/../../@value';

          var iterator = xml.evaluate(xPath, xml.documentElement, null,
                XPathResult.UNORDERED_NODE_ITERATOR_TYPE, null);
            var thisNode = iterator.iterateNext();
            var str = '';
            while (thisNode) {
                if (str) {
                    str += ', ';
                }
                str += thisNode.textContent;
                thisNode = iterator.iterateNext();
            }

            $.get(
                "country_code.xml",
                null,
                function (data) {
                    xml = data;
                },
                "xml"
            );
             var code = str;
            var xPath1 = '//*[@name = "' + code + '"]/@code';
          var iterator = xml.evaluate(xPath1, xml.documentElement, null,
                XPathResult.UNORDERED_NODE_ITERATOR_TYPE, null);
            var thisNode = iterator.iterateNext();
            var str1 = '';
            while (thisNode) {
                if (str1) {
                    str1 += ', ';
                }
                str1 += thisNode.textContent;
                thisNode = iterator.iterateNext();
            }
            $("#result").text(str1);
        }
   </script>
</head>
<body>
<input type="text" id="name" ></input>
<input type="button"  name = "Get Code" onclick="get_list()"></input>
    <div id="result">
    </div>
</body>
</html> 
```

在这里，我在第一个 xml 文件中有两个 xml 文件，我尝试使用文本框输入的城市名称获取国家/地区名称，并将其存储`str`在我的第二个 xml 文件中的 var 上，我尝试使用此 var 查找国家/地区代码`str`。
当我尝试在我的第二个 xpath 之前发出警报时，它没有给出任何错误但没有给出任何结果，然后它的工作我试图在第二个 xpath 之前发出警报，`alert(str);`
请帮助我解决这个问题。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:43:03.187

您遇到的问题`$.get`是异步的，这意味着它不会阻止执行并等待请求（获取 xml 文件）完成。

在`get_list`函数中，您正在启动请求（调用`$.get`），然后在 3 行之后使用 xml 变量（`xml.evaluate(...)`）。因为`$.get`没有阻塞，请求可能没有返回，你分配的回调`xml = data`将不会运行，因此`xml`不会被定义。

警报“修复”它的原因是警报*确实*阻塞，这为响应返回所需的额外时间。

`$.get`解决方案是通过将`async = false`选项传递给调用来强制同步运行（如[文档](http://api.jquery.com/jQuery.ajax)所述），或者确保所有使用返回数据的代码仅在调用返回*后*执行（通常通过从回调，尽管还有其他方式（例如承诺））。

注意：强制同步通常不是正确的答案，默认情况下它们是异步的，这是有原因的。

# .htaccess - 在虚拟主机中使用 htaccess 保护目录

> ID：16140683
> 
> 赞同：0
> 
> 时间：2013-04-22T06:26:36.623
> 
> 标签：.htaccess, hosting, virtual

我在我的 web 根目录中使用以下 .htaccess 来限制对其文件的公共访问：

.htaccess

```
<Limit GET POST>
order deny,allow
deny from all
allow from 127.0.0.1
</Limit> 
```

但问题是我的网站托管在虚拟托管环境中，因此是否有人担心有人在我使用的同一台服务器上托管他的文件可以访问这些文件（因为我们都属于 127.0.0.1） ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:52:30.570

你是对的，来自同一主机的某人可以访问该目录。如果你想让它安全，我建议设置一个密码。

```
AuthType Basic
AuthName "Protected Area"
AuthUserFile /home/www/path/to/.htpasswd
require valid-user 
```

使用 htpasswd -c .htpasswd yourusername 创建 .htaccess 文件，或使用在线 htaccess 密码生成器之一。

> `<Limit GET POST>`

此外，如果您不确定是否只想限制 POST 和 GET，请不要使用类似的**东西**。Apache 提供的不止这些，例如 HEAD、PUT、DELETE、CONNECT 方法来发出请求。

> [<Limit> 指令的目的是将访问控制的效果限制为指定的 HTTP 方法。](http://httpd.apache.org/docs/2.2/mod/core.html#limit)

跳过 <Limit> 以确保。

# python - Python3：字符串到变量

> ID：16140684
> 
> 赞同：0
> 
> 时间：2013-04-22T06:26:45.043
> 
> 标签：python, string, variables, python-3.x

我到处寻找这个，但还没有找到合适的答案，我不想使用字典。

如何将字符串转换为变量名？例如我有这个电话：

```
object.variable 
```

这`variable`在`object`. 但是，我有很多变量（出于某种原因），还有更多变量。这样做似乎很愚蠢：

```
s = 'variable'
if s == 'variable': object.variable
elif s == 'variable2: object.variable2
etc.... 
```

那么有没有办法将字符串转换为变量名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:28:17.190

```
getattr(object, variable) 
```

但是我看不出有什么好的理由来访问这样的属性......

# php - 在 php 和 html 的表单中给出提交按钮后，如何生成带有编辑选项的数据列表？

> ID：16140685
> 
> 赞同：0
> 
> 时间：2013-04-22T06:26:45.750
> 
> 标签：php, datalist

我使用 php 和 html 创建了一个登录表单，如果我输入错误的用户名和密码，它会显示错误。还有一个注册链接可以创建新用户和密码。如果用户名和密码正确，它将被重定向到一个表单页面，该页面包含名称、工作区、手机、电子邮件、评论。

如果用户输入详细信息并单击提交，数据将被添加到数据库中，并且将显示一个页面，其中包含输入的数据。

现在，我需要编辑最后一页中显示的数据。显示的数据页面必须在该 ID 中输入所有详细信息。

在此先感谢！[这是用于页面生成的表单图像和 php 编码！[

```
<?php
$connect=mysql_connect("localhost","root","user");
if(!$connect)
    {
    die('Could not connect: ' .mysql_error());
    }
mysql_select_db("form",$connect);
$name=$_POST["name"];
$email=$_POST["email"];
$number=$_POST["number"];
$org=$_POST["org"];
$message=$_POST["message"];
$sql="INSERT INTO cath values('$name','$email','$number','$org','$message')";
if(!mysql_query($sql,$connect))
{
die('error:'.mysql_error());
}
echo "One record added";
mysql_close($connect);
?>
<?php
echo "<br>";
$connect=mysql_connect("localhost","root","user");
mysql_selectdb("form");
$result=mysql_query("SELECT * FROM cath");
echo "The details are....";
while($rows=mysql_fetch_array($result))
{
echo "<br>";
echo $name;
echo "<br>";
echo $email;
echo "<br>";
echo $number;
echo "<br>";
echo $org;
echo "<br>";
echo $message;
}
?>] 
```

[1](http://i.stack.imgur.com/1lJAg.png)

# gridview - 编写 WinRT GridView 拖放处理程序

> ID：16140699
> 
> 赞同：2
> 
> 时间：2013-04-22T06:27:24.517
> 
> 标签：gridview, windows-runtime

在 WinRT 中，我正在尝试为我的可变大小的 GridView 实现自定义拖放处理程序。在 DragItemsStarting 处理程序中，我可以使用 e.Items.FirstOrDefault() 获取正在拖动的项目。

我只有一个 GridView，因此该项目将被放置在其中的某个位置。如果它被放在另一个项目上，我需要知道该项目是什么，以便我可以将被拖动的项目插入该位置。

我怎样才能得到那个项目？[该](https://stackoverflow.com/questions/13950192/reordering-items-in-a-gridview-with-a-variablesizedwrapgrid-in-winrt)线程提到使用 GridView.ItemContainerGenerator.ContainerFromItem(item) 但这似乎不起作用，我找不到任何好的 Drop 事件示例。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:43:43.683

您可以处理 OnDragOver 和 OnDrop 事件，从事件参数中获取指针位置，然后使用 VisualTreeHelper.FindElementsInHostCoordinates 获取指针下的所有元素，然后分析这些元素并找到正确的元素，然后才能使用 ItemContainerGenerator.ContainerFromItem 获取项目。但是您将需要更多，因为最终用户可能会掉到某个没有任何物品的地方。您可以在这里查看示例：http: [//www.codeproject.com/Articles/536519/Extending-GridView-with-Drag-and-Drop-for-Grouping](http://www.codeproject.com/Articles/536519/Extending-GridView-with-Drag-and-Drop-for-Grouping)

# sql - 如何通过总和限制选择？

> ID：16140702
> 
> 赞同：5
> 
> 时间：2013-04-22T06:27:33.517
> 
> 标签：sql, postgresql, sum, limit

我想选择我库存中所有最便宜的玩具，总计 10.0 美元：

也就是说，我想做一些看起来像这样的事情：

`select * from toy where sum(price) < 10.0 order by price;`

什么是正确的 SQL？

为了更清楚，我将添加一个示例。假设我的表中有这些项目：

```
 name       | price
------------------+-------
car               |     1
boat              |     2
telephone         |     8
gold bar          |    50 
```

我的结果是：1 辆汽车和 1 艘船。

总价为 3 美元。我不能选择电话，因为它的价值是 13 美元，而且大于 10。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T06:54:40.050

尝试：

```
SELECT a.name, max(a.price) price 
FROM Toy a
JOIN Toy b
  on a.price > b.price or (a.price=b.price and a.name>=b.name)
GROUP BY a.name
HAVING SUM(b.price) <= 10.0
order by 2 
```

SQLFiddle[在这里](http://sqlfiddle.com/#!1/3faec/3)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T10:57:05.820

[SQL小提琴](http://sqlfiddle.com/#!1/3faec/10)

```
select name, price, total
from (
    select
        name, price,
        sum(price) over(
            order by price
            rows between unbounded preceding and current row
        ) total
    from toy
) s
where total <= 10
order by price 
```

请注意，虽然`between unbounded preceding and current row`是默认帧，但默认模式是`range`. 所以有必要至少`rows unbounded preceding`声明当前行是帧结束默认值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T07:00:59.890

这是使用递归 CTE 的实现。还有其他解决方案，您可以谷歌搜索“运行总计”。

```
WITH RECURSIVE CTE_RN  AS 
(
    SELECT *, ROW_NUMBER() OVER (ORDER BY Price) RN FROM Toys
)
, CTE_Rec AS
(
    SELECT name, price, rn FROM CTE_RN WHERE RN = 1
    UNION ALL
    SELECt r.name, a.price + r.price as price, r.rn FROM CTE_RN r
    INNER JOIN CTE_Rec a on a.RN + 1 = r.RN
    where a.price+r.price <= 10
 )
SELECT name, price as total_price FROM CTE_Rec 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!12/bb1c5/5)

PS：这在很大程度上取决于 RDBMS，这就是为什么在开始时包含该信息很重要的原因。

# android - Android：同时有两个媒体记录器实例

> ID：16140703
> 
> 赞同：6
> 
> 时间：2013-04-22T06:27:38.867
> 
> 标签：android, multithreading, record, mediarecorder

我可以同时运行 Android MediaRecorder 类的两个实例吗？例如

```
public MediaRecorder mrec1 ;
public MediaRecorder mrec2 ;

mrec1.setCamera(mCamera);
mrec1.setPreviewDisplay(surfaceHolder.getSurface());
mrec1.setVideoSource(MediaRecorder.VideoSource.CAMERA)
.
.
.
.
mrec2.setAudioSource(MediaRecorder.AudioSource.MIC);
mrec2.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
mrec2.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
.
.  
.
.
mrec1.prepare();
mrec2.prepare();
mrec1.start();
mrec2.start(); 
```

调用第二个 start() 时出现此错误我只想知道是因为已经调用了启动过程还是存在其他问题。第二个媒体记录器实例也被初始化并在单独的线程中使用。

```
04-22 11:08:45.869: E/MediaRecorder(7742): start failed: -2147483648
04-22 11:08:45.869: W/dalvikvm(7742): threadid=9: thread exiting with uncaught exception  (group=0x40018578)
04-22 11:08:45.869: E/AndroidRuntime(7742): FATAL EXCEPTION: Thread-10
04-22 11:08:45.869: E/AndroidRuntime(7742): java.lang.RuntimeException: start failed. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-09T13:11:44.673

根据[文档](https://developer.android.com/reference/android/media/MediaRecorder.html#release())：

> 除了占用不必要的资源（例如内存和编解码器的实例）之外，如果不再需要 MediaRecorder 对象，则无法立即调用该方法还可能导致移动设备持续消耗电池，如果没有**，其他应用程序录制失败**设备上支持同一编解码器的多个实例。即使支持同一编解码器的多个实例，当同时使用不必要的多个实例时，可能会出现一些性能下降。

我的失败尝试也没有任何结果。

# windows - Windows 上 Haskell 的彩色外壳？

> ID：16140705
> 
> 赞同：8
> 
> 时间：2013-04-22T06:27:43.740
> 
> 标签：windows, haskell, console, syntax-highlighting

[我正在从这个](http://learnyouahaskell.com/starting-out)教程网站学习haskell 。如您所见，图片中的控制台有颜色，使书写更容易，更易读。有什么方法可以让 Windows 上的 ghci 色彩鲜艳。

我问这个是因为 IDLE 在使用 Python 时具有颜色，这使得使用它更容易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T08:10:04.460

[WinGHCi](http://code.google.com/p/winghci/)（包含在 Windows 上的 Haskell 平台中）以有限的形式支持彩色输出：

![温格希](https://i.stack.imgur.com/OUhSe.png)

我建议使用真正的编辑器来处理比单行更复杂的事情。

# c++ - 向量 使用 push_back 调整大小 - 它是如何工作的？

> ID：16140706
> 
> 赞同：11
> 
> 时间：2013-04-22T06:27:44.433
> 
> 标签：c++, memory, vector, c++11, smart-pointers

据我了解，当将东西 push_back 放入向量时，有时它必须分配一个新的内存块，导致将所有元素从旧内存块复制到其中，调用它们的析构函数。由于 unique_ptr 析构函数删除了拥有的内存，它们怎么可能与向量一起使用？在向量中使用 unique_ptr 是否安全？它比普通指针慢吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-22T07:24:56.557

> 导致将所有元素从旧内存块复制到其中，调用它们的析构函数。由于 unique_ptr 析构函数删除了拥有的内存，它们怎么可能与向量一起使用？

事实上，它不再是严格地*复制*元素，而是在*移动*。对于没有隐式或显式移动构造函数的类型，也是如此。但是对于`unique_ptr`s 这意味着，新的 s 是在新分配的内存中构造的，给定对“旧” s`unique_ptr`的右值引用。`unique_ptr`他们的移动构造函数做了正确的事情，即它将所有权从旧的转移到新`unique_ptr`的，让旧的为空，因此当它们被销毁时没有任何内容被删除。

> 在向量中使用 unique_ptr 是否安全？

只要您尊重语言规则和“C++ 常识”，在*任何地方都*可以使用`unique_ptr`s 。这意味着，您将不得不*明确地*做一些愚蠢的事情来破坏安全行为。其中包括假装将拥有对象的所有权赋予另一个智能指针：**`unique_ptr`**

 **```
unique_ptr<T> ptr1 {new T()};
unique_ptr<T> ptr2 {ptr1.get()}; //two unique_ptr's owning the same object... 
```

`reinterpret_cast`或一些涉及,`memcpy`或`memset`其他不尊重 C++ 对象生命周期的破坏性操作。

> 它比普通指针慢吗？

也许。与复制原始指针相比，移动 a 显然会涉及一些小的开销`unique_ptr`，即将原始指针设置为零。但是是否可以优化该开销取决于您的编译器和优化器。与以往一样，请咨询您的分析器以评估它*是否*较慢以及减速是否重要。我敢打赌它不会，并且考虑到智能指针会给你带来的安全性，只是永远不要询问`unique_ptr`' 的性能。

旁注：如果您事先知道矢量的大小，请记住使用`vector::reserve()`. 它将为您节省`unique_ptr`s 的重新分配和移动。如果你只知道你的向量的大概大小，不要`unique_ptr`小题大做——s不是很大（通常和原始指针加上删除器一样大，可能会或可能不会被优化掉），所以保留一些除非你真的有严格的内存限制，否则百分之几不会受到伤害。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T06:32:19.760

使用移动语义可以将 unique_ptr 从一个位置移动到另一个位置。`std::move`这将避免在指针从一个内存位置“移动”到另一个内存位置时破坏指针所保存的数据。

这有点像在向量增长时从旧向量数组到新内存位置执行浅拷贝。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-22T06:31:29.047

根据[cppreference](http://en.cppreference.com/w/cpp/memory/unique_ptr)， for 的用例之一`std::unique_ptr`是在“移动感知容器”中使用，例如`std::vector`. 这意味着它`std::vector<T>`足够聪明，可以检测何时`T`是可移动的，这是 的情况`std::unique_ptr`，并在调整向量大小时使用移动构造函数。**

# mysql - 用于获取到期日期在当前数据 60 天后的数据的 Sql 查询

> ID：16140709
> 
> 赞同：2
> 
> 时间：2013-04-22T06:27:58.080
> 
> 标签：mysql, sql

用于获取到期日期在当前数据 60 天之后的数据的 Sql 查询。数据格式是

> 日期（“ymd”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:31:45.720

对于使用 MySQL 的 PHP：

```
$date1 = date("y-m-d");
$date2 = date("y-m-d", strtotime("+ 60 day"));

$query=sprintf("SELECT * FROM `table` WHERE `date_column` > %s and `date_column` <= %s", $date1, $date2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:35:28.307

甲骨文：

```
select * from table t where t.some_date between sysdate and (sysdate + 60); 
```

格式化日期：

```
to_date('2013-04-21','yyyy-mm-dd') 
```

# java - 如何在spring集成中动态调用Service Activator

> ID：16140719
> 
> 赞同：1
> 
> 时间：2013-04-22T06:28:39.950
> 
> 标签：java, spring, spring-integration

目前在我们的项目中，我们正在使用 spring 框架。由于一些项目需求，我们计划在我们的项目中实现 Spring Integration 框架。

我打算抛出 Spring Integration Sample(Spring Integration Rest HTTP Path Usage Demo) appications

下面是 applicationContext-http-int.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration.xsd      
    http://www.springframework.org/schema/integration/http http://www.springframework.org/schema/integration/http/spring-integration-http.xsd   
    http://www.springframework.org/schema/oxm http://www.springframework.org/schema/oxm/spring-oxm-3.0.xsd"
xmlns:int="http://www.springframework.org/schema/integration"
xmlns:oxm="http://www.springframework.org/schema/oxm" 
xmlns:int-http="http://www.springframework.org/schema/integration/http">

<int:annotation-config/>

<!-- handler mapping implementation that is aware of inbound Spring Integration 
        http inbound gateway's and inbound adapter's with "path" attributes -->
<bean class="org.springframework.integration.http.inbound.UriPathHandlerMapping"/>

<!-- Inbound/Outbound Channels -->
<int:channel id="employeeSearchRequest" />
<int:channel id="employeeSearchResponse" />

<int-http:inbound-gateway id="inboundEmployeeSearchRequestGateway"      
    supported-methods="GET, POST" 
    request-channel="employeeSearchRequest"
    reply-channel="employeeSearchResponse"      
    mapped-response-headers="Return-Status, Return-Status-Msg, HTTP_RESPONSE_HEADERS"       
    view-name="/employee" 
    path="/services/employee/{id}/search"
    reply-timeout="50000">

    <int-http:header name="employeeId" expression="#pathVariables.id"/>

</int-http:inbound-gateway>

<!-- Note: The default parameter name for favorParameter is 'format'. For instance, when this flag is true, a request for /services/employee/{id}/search?format=json will result 
        in an MappingJacksonJsonView being resolved, while the Accept header can be the browser-defined text/html,application/xhtml+xml  -->

<bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
    <property name="order" value="1" /> 
    <property name="defaultContentType" value="application/xml"/>
    <property name="favorParameter" value="true"/>  
    <property name="ignoreAcceptHeader" value="true" />     
    <property name="mediaTypes">
        <map>
            <entry key="json" value="application/json" />
            <entry key="xml" value="application/xml" />             
        </map>
    </property>
    <property name="defaultViews">
        <list>
            <bean
                class="org.springframework.integration.samples.rest.json.view.ExtendedMappingJacksonJsonView" >
                <property name="objectMapper" ref="jaxbJacksonObjectMapper"/>
            </bean> 
            <bean class="org.springframework.web.servlet.view.xml.MarshallingView">
                <constructor-arg ref="marshaller"/>                 
            </bean>             
        </list>
    </property>             
</bean>

<oxm:jaxb2-marshaller id="marshaller" contextPath="org.springframework.integration.samples.rest.domain" />

<int:service-activator id="employeeServiceActivator" 
                input-channel="employeeSearchRequest"
                output-channel="employeeSearchResponse" 
                ref="employeeSearchService" 
                method="getEmployee" 
                requires-reply="true"  
                send-timeout="60000"/>

<bean id="jaxbJacksonObjectMapper" class="org.springframework.integration.samples.rest.json.JaxbJacksonObjectMapper"/> 
```

据我了解，流程就像输入通道中有消息时会激活**employeeSearchService 。**但是根据我们的项目要求，我们需要在运行时根据一些标头值激活服务，例如

*   如果服务名称 = LoginService 和方法名称 = 操作，则服务激活器应该激活 LoginService 并调用操作方法。基于 url 模式
*   例如，如果我的 url 类似于 http:// `ipaddress`:8080/myapp/LoginService(is ServiceName).action(is method name)，那么应该激活 LoginService 并调用 action 方法。

任何建议和帮助将不胜感激，因为 SI 对我来说是新的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:22:22.613

有几种方法可以回答这个问题。第一种是使用简单的标头值

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:int="http://www.springframework.org/schema/integration"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration-2.2.xsd">

    <!-- input channel where the message starts -->
    <int:channel id="input.channel"/>

    <!-- routes to the different services based on the header value -->
    <int:header-value-router input-channel="input.channel" header-name="serviceName">
        <int:mapping value="a" channel="service.a.channel"/>
        <int:mapping value="b" channel="service.b.channel"/>
    </int:header-value-router>

    <!-- when serviceName header == 'a' -->
    <int:channel id="service.a.channel"/>

    <int:service-activator input-channel="service.a.channel" ref="serviceA"/>

    <!-- when serviceName == 'b' -->
    <int:channel id="service.b.channel"/>

    <int:service-activator input-channel="service.b.channel" ref="serviceB"/>
</beans> 
```

此示例允许您根据您可能需要的不同服务和多个选项进行扩展。

（input.channel 将与您的 employeeSearchRequest 相同）

另一个选项使用 SpEL 并假设只有两个服务

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:int="http://www.springframework.org/schema/integration"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration-2.2.xsd">

    <int:channel id="input.channel"/>

    <int:service-activator input-channel="input.channel"
        expression="headers['serviceName'] == 'a' ? @serviceA.process(payload) : @serviceB.process(payload)"/>

</beans> 
```

# linux - 上传文件并执行 bash 命令的 HTML 表单

> ID：16140721
> 
> 赞同：0
> 
> 时间：2013-04-22T06:28:50.263
> 
> 标签：linux, raspberry-pi, calibre

我有一个运行 Calibre (v 0.8.51) 无头作为电子书服务器和 Apache2 的 Raspberry Pi (Debian/Wheezy)。我想简化将电子书上传到我的 calibre 库的过程，创建一个 HTML 表单。表单提交按钮需要触发执行以下操作的脚本：

*   传递给包含作者、标题、ISBN、标签的 bash 命令变量；
*   将文件重命名为 book.mobi 后上传到特定位置（/home）；
*   运行以下 bash 命令 `calibredb add --library-path=/home/calibre-library --authors "$authors" --title "$title" --tags "$tags" --isbn "$isbn" /home/book.mobi` 最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T16:47:35.367

您需要服务器端脚本来处理来自 POST 表单的数据并进一步处理它。所以答案将取决于您的语言偏好。

1.  如果您知道/喜欢 PHP，您可以将表单发布到 PHP 页面。然后 PHP 脚本将检索 POST 参数。使用**exec**，您可以调用您的自定义脚本。这应该很快做到。[您可以在此处](http://php.net/manual/en/function.shell-exec.php)参考 exec 命令文档。
2.  如果您了解 Python，则可以选择任何 Web 框架。[我在这里](https://stackoverflow.com/questions/16207533/connecting-python-mysql-and-html/16207623#16207623)的另一个答案中提到了一些
3.  或者你可以使用任何其他语言

我偏向于 Python，因为它在 RPi 中得到了固有的支持，而且按照你的意愿进行操作系统操作和 bash 脚本执行也不是太难。

# c++ - 如何在没有标准 C 函数（如 print(f)）的情况下将 char 转换为八进制格式

> ID：16140723
> 
> 赞同：-6
> 
> 时间：2013-04-22T06:28:51.647
> 
> 标签：c++, c, linux, unix

需要将 char 的代码转换为八进制。也许先将 char 转换为十进制，然后再转换为八进制，如果它会更容易的话。没关系。

```
char c; // equal 'd' or '\n' for example
int d=...;//something to change 
```

`printf("%o",c)`将是很好的变体，但我不能使用标准 C 函数。只有自己的转换实现。请在这里写一些更好的工具或您自己的工具。

printf() 如何为 (%o)

```
printf(ul, 8)
{
    /* hold a long in base 8 */
    char *p, buf[(sizeof(long) * NBBY / 3) + 1];

    p = buf;
    do {
        *p++ = "0123456789abcdef"[ul % base];
    } while (ul /= base);
    do {
        putchar(*--p);
    } while (p > buf);
} 
```

但我不想使用 putchar()，只想保存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:34:02.073

十进制和八进制是数字基数，这仅在*显示*数字时（或*输入*数字时）才重要；实际数字通常以二进制形式存储在计算机内存中，但这对于典型程序通常并不重要。

在您的情况下，转换为八进制通常涉及一次提取三位（因为 2 ³是 8）。这可以通过使用掩码`7`（二进制`111`）进行掩码，然后移位来完成。这将以从右到左的顺序获得八进制数字。

假设 a`char`为 8 位（这是典型的），您将生成 3 个八进制数字，因为 3 * 3 = 9。两位数字只会覆盖 6 位，这显然是不够的。

那太少了，您实际上可以“展开”它：

```
void to_octal(char *buf, unsigned char x)
{
  buf[0] = '0' + ((x >> 6) & 7);
  buf[1] = '0' + ((x >> 3) & 7);
  buf[2] = '0' + (x & 7);
  buf[3] = '\0';
} 
```

请注意，以上*要求* `buf`至少有四个字符的可用空间。用法：

```
const unsigned char x = 212;
char buf[8];

to_octal(buf, x);
printf("%d is %s in octal\n", x, buf); 
```

# python - How to find a part of string in another string?

> ID：16140724
> 
> 赞同：0
> 
> 时间：2013-04-22T06:29:00.820
> 
> 标签：python, string, python-2.7, split

I need to read data from the file.

```
f=open("essay.txt","r")
my_string=f.read() 
```

The below string which starts with `\nSubject:` and ends with `\n` is in the `my_string`

```
Example:
"\nSubject: Good morning - How are you?\n" 
```

How can I search for the string which starts with `\nSubject:` and ends with `\n` ? Is there any python function to search for particular pattern of a string ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T06:31:12.763

It's better to just search through the file line by line instead of loading it all into memory with `.read()`. Every line ends with `\n`, no line starts with it:

```
with open("essay.txt") as f:
    for line in f:
        if line.startswith('Subject:'):
            pass 
```

To search for it in that string:

```
import re
text = "\nSubject: Good morning - How are you?\n"
m = re.search(r'\nSubject:.+\n', text)
if m:
    line = m.group() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T06:42:35.940

Try startswith().

```
str = "Subject: Good morning - How are you?\n"

if str.startswith("Subject"):
    print "Starts with it." 
```

# java - 如何使用谷歌地图3在struts2中绘制折线

> ID：16140725
> 
> 赞同：1
> 
> 时间：2013-04-22T06:29:01.213
> 
> 标签：java, javascript, google-maps, struts2

我想要[这个](https://code.google.com/apis/ajax/playground/#polylines_v3)功能到我的项目中。

我正在尝试提供功能，单击 Onbutton，我从 MySQL 中获取坐标数据到一个数组中，然后将此数组放入文本框的值中，以便 JavaScript 读取此值。但是，当我将 var 坐标值放入折线时，它显示为空白，当我从文本框中复制相同的值并将其粘贴到相同的 var 时，它的工作。

Java代码：

```
try {
Connection.getConnection();
java.sql.PreparedStatement preparedStatement = Connection.con
                .prepareStatement("select * from co_ordinates_data");

        resultSet = preparedStatement.executeQuery();

        while (resultSet.next()) {

            latitude.add(resultSet.getDouble("latitude"));
            longitude.add(resultSet.getDouble("longitude"));

            latlong.add("new google.maps.LatLng("
                    + resultSet.getDouble("latitude") + ","
                    + resultSet.getDouble("longitude") + ")");

        }

        size = latitude.size();

    } catch (Exception e) {
        System.out.println("path exception " + e.toString());
    }
    return "execute";

//textbox
<input type="text" id="latlng" value="<s:property value="latlong"/>"

here is my js code:

function initialize() {
    var myLatLng = new google.maps.LatLng(28.493729, 77.09255);
    var mapOptions = {
        zoom : 8,
        center : myLatLng,
        mapTypeId : google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);

    var cordinates = document.getElementById("latlng").value;

    var flightPlanCoordinates = [cordinates ];

    var flightPath = new google.maps.Polyline({
        path : flightPlanCoordinates,
        strokeColor : "#FF0000",
        strokeOpacity : 1.0,
        strokeWeight : 2
    });

    flightPath.setMap(map);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:21:29.503

问题可能是，当您运行`initialize()`Javascript 函数时，页面没有完全加载，并且`<input />`包含您的坐标的元素尚未呈现；

尝试`initialize()`从 javascript 控制台（在 Firefox 中，`CTRL`++ `SHIFT`）调用`K`，看看它是否有效。

您需要将对 javascript 的调用包含在一个`jQuery` **`$(document).ready()`**函数中（[更多信息在这里](https://stackoverflow.com/a/2305001/1654265)），或者将您的 javascript 函数移出`<head>`部件，将其放在部件的末尾`<body>`（不推荐）。

例子：

```
function initialize(){
   // all your stuff as above...
   // all your stuff as above...
   // all your stuff as above...
}

$(document).ready(function() {
    initialize();
}); 
```

# c# - 在 Windows Phone 8 中下载图像

> ID：16140733
> 
> 赞同：0
> 
> 时间：2013-04-22T06:29:54.210
> 
> 标签：c#, windows-phone-8

我必须下载大量图像并将其保存到本地文件夹。我还必须在下载图像时更新 UI。现在我正在使用下面的代码来一张一张地下载图片。但问题是 UI 在每次下载请求时都会被阻止。我应该如何处理下载方法？我对线程了解不多。谁能帮我一个好方法？

```
public async Task<T> ServiceRequest<T>(string serviceurl, object request)
{
    string response = "";
    httpwebrequest = WebRequest.Create(new Uri(serviceurl)) as HttpWebRequest;
    httpwebrequest.Method = "POST";

    httpwebrequest.ContentType = "application/json";
    byte[] data = Serialization.SerializeData(request);

    using (var requestStream = await Task<Stream>.Factory.FromAsync(httpwebrequest.BeginGetRequestStream, httpwebrequest.EndGetRequestStream, null))
    {
        await requestStream.WriteAsync(data, 0, data.Length);
    }

    response = await httpRequest(httpwebrequest);

    var result = Serialization.Deserialize<T>(response);
    return result;
}

public async Task<string> httpRequest(HttpWebRequest request)
{
    try
    {
        string received;

        using (var response = (HttpWebResponse)(await Task<WebResponse>.Factory.FromAsync(request.BeginGetResponse, request.EndGetResponse, null)))
        {
            using (var responseStream = response.GetResponseStream())
            {
                using (var sr = new StreamReader(responseStream))
                {
                    received = await sr.ReadToEndAsync();
                }
            }            
            response.Close();
        }

        return received;
    }
    catch(Exception ex)
    {
        return "";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:58:50.183

我建议您使用`System.Net.Http.HttpClient`. 您可以从 Nuget 获得它，只需选择搜索选项以包括预发布频道。但是有一个问题：它还没有正式发布，所以你现在不能在生产代码中使用它。并且没有关于它何时最终发布的消息。但如果你只是在学习，你可以自由地使用它。它使您描述的事情变得非常简单。这是我的代码中的一个示例，巧合的是:)，它完全符合您的要求：

```
private IEnumerable<string> CountPictures(int from, int to, string folder)
{
    for (int i = from; i < to; i++)
        yield return string.Format("{0}/image{1}.jpg", folder, i.ToString("D2"));
}

private async Task ImportImages()
{
    HttpClient c = new HttpClient();
    int count = 0;
    c.BaseAddress = new Uri("http://www.cs.washington.edu/research/imagedatabase/groundtruth/", UriKind.Absolute);
    foreach (var pic in CountPictures(1, 48, "leaflesstrees"))
    {
        var pic_response = await c.GetAsync(pic, HttpCompletionOption.ResponseContentRead);
        if (pic_response.IsSuccessStatusCode)
        {
            await SaveImageAsync(pic.Replace('/', '_'), await pic_response.Content.ReadAsStreamAsync());
            Debug.WriteLine(pic + " imported");
            count++;
        }
    }           
    Debug.WriteLine(string.Format("{0} images imported", count));
}

private Task SaveImageAsync(string filename, Stream stream)
{
    var task = Task.Factory.StartNew(() =>
    {
        if (stream == null || filename == null)
        {
            throw new ArgumentException("one of parameters is null");
        }
        try
        {
            using (IsolatedStorageFile isoStore = IsolatedStorageFile.GetUserStoreForApplication())
            {
                using (IsolatedStorageFileStream targetStream = isoStore.OpenFile(filename, FileMode.Create, FileAccess.Write))
                {
                    byte[] readBuffer = new byte[4096];
                    int bytesRead = -1;
                    stream.Position = 0;
                    targetStream.Position = 0;

                    while ((bytesRead = stream.Read(readBuffer, 0, readBuffer.Length)) > 0)
                    {
                        targetStream.Write(readBuffer, 0, bytesRead);
                    }
                }
            }
        }
        catch (Exception e)
        {
            System.Diagnostics.Debug.WriteLine("DocumentStorageService::LoadImage FAILED " + e.Message);
        }
    });
    return task;
} 
```

为了显示来自独立存储的图像，您可以参考我[在此处](https://stackoverflow.com/a/16103494/371804)的回答中描述的方法之一。

# java - 表视图外观和可用性增强

> ID：16140735
> 
> 赞同：1
> 
> 时间：2013-04-22T06:30:01.460
> 
> 标签：java, android, tableview, horizontal-scrolling, vertical-scrolling

我有一个活动，我在其中创建了一个填充了已解析 XML 数据的表视图。表格视图看起来像我想要的那样，并且在功能上它也是正确的，但我想增强表格视图的垂直滚动功能。

**Sr.No. column 可垂直滚动，但水平固定。这是根据我的要求，因此不需要更改！**

截屏：

![编号  桌子水平固定](https://i.stack.imgur.com/l4ZYN.png)

**整个表格可以垂直滚动，包括序列号列。这也符合我的要求，因此无需更改！**

截屏：

![整表垂直滚动](https://i.stack.imgur.com/ktOP5.png)

**我的要求是，表格的标题在滚动时将保持垂直固定，这样用户即使向下滚动到表格底部也能看到列名。**

所需输出的屏幕截图：

![表头垂直固定](https://i.stack.imgur.com/gY4Be.png)

活动源代码：

```
public class ReportListActivity extends Activity {

    TableLayout srno_table;
    TableRow srno_report_tr_data;

    TableLayout report_table;
    TableRow report_tr_data;

  //variables to send post request
    String reportList_responseBody;
    String reportList_responseCode;

    //variables to parse xml
    String report_list_xmlContent;

 // XML node keys of Exam Details
    static final String KEY_SET = "Set"; // parent node
    static final String KEY_EXAMSETID = "ExamSetId";
    static final String KEY_SETID = "SetId";
    static final String KEY_SETNAME = "SetName";
    static final String KEY_FULLMARKS = "FullMarks";
    static final String KEY_RIGHTMARKS = "RightMarks";
    static final String KEY_WRONGMARKS = "WrongMarks";
    static final String KEY_LEFTMARKS = "LeftMarks";
    static final String KEY_OBTAINMARKS = "ObtainMarks";
    static final String KEY_STUDENTRANK = "StudentRank";
    static final String KEY_EXAMDATE = "ExamDate";

    //Progressbar object
            ProgressDialog progress;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_LEFT_ICON);
        setContentView(R.layout.activity_report_list);
        //setting icon to title bar
        getWindow().setFeatureDrawableResource(Window.FEATURE_LEFT_ICON,R.drawable.ic_launcher);

      //starting the progress bar
            progress = ProgressDialog.show(this, "Please Wait","Getting report list", true);

        //===============For marquee===================================

            TextView marqueeTextView = (TextView) findViewById(R.id.marquee_textView);
            marqueeTextView.setText(Html.fromHtml(getFromPreference("marquee_Html_content")));
            marqueeTextView.setSelected(true);
            //===============For marquee===================================

        //sending post request to download data
        reportList_isOnline();

        srno_table=(TableLayout) findViewById(R.id.srno_table);

        //---------------Serial no Table Header-----------------------------------------------
        TableRow srno_tr_head = new TableRow(this);
        srno_tr_head.setId(10);
        srno_tr_head.setBackgroundResource(R.drawable.list_header);
        srno_tr_head.setLayoutParams(new LayoutParams(
        LayoutParams.FILL_PARENT,
        LayoutParams.WRAP_CONTENT));

        TextView label_sr_no = new TextView(this);
        label_sr_no.setId(20);
        label_sr_no.setText("S.No.");
        label_sr_no.setTextColor(Color.WHITE);
        label_sr_no.setPadding(5,5,5,5);
        srno_tr_head.addView(label_sr_no);// add the column to the table row here
        label_sr_no.setTextSize(15);    

        srno_table.addView(srno_tr_head, new TableLayout.LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

      //---------------Serial no Table Header-----------------------------------------------

        report_table=(TableLayout) findViewById(R.id.report_table);

        //---------------report Table Header-----------------------------------------------
        TableRow report_tr_head = new TableRow(this);
        report_tr_head.setId(10);
        report_tr_head.setBackgroundResource(R.drawable.list_header);
        report_tr_head.setLayoutParams(new LayoutParams(
        LayoutParams.FILL_PARENT,
        LayoutParams.WRAP_CONTENT));

        TextView label_test_name = new TextView(this);
        label_test_name.setId(20);
        label_test_name.setText("Test Name");
        label_test_name.setTextColor(Color.WHITE);
        label_test_name.setPadding(5,5,5,5);
        report_tr_head.addView(label_test_name);// add the column to the table row here
        label_test_name.setTextSize(15);    

        TextView label_test_date = new TextView(this);
        label_test_date.setId(21);// define id that must be unique
        label_test_date.setText("Date"); // set the text for the header 
        label_test_date.setTextColor(Color.WHITE); // set the color
        label_test_date.setPadding(5,5,5,5); // set the padding (if required)
        report_tr_head.addView(label_test_date); // add the column to the table row here
        label_test_date.setTextSize(15);

        TextView label_ro = new TextView(this);
        label_ro.setId(21);// define id that must be unique
        label_ro.setText("R.O."); // set the text for the header 
        label_ro.setTextColor(Color.WHITE); // set the color
        label_ro.setPadding(5,5,5,5); // set the padding (if required)
        report_tr_head.addView(label_ro); // add the column to the table row here
        label_ro.setTextSize(15);

        TextView label_wo = new TextView(this);
        label_wo.setId(21);// define id that must be unique
        label_wo.setText("W.O."); // set the text for the header 
        label_wo.setTextColor(Color.WHITE); // set the color
        label_wo.setPadding(5,5,5,5); // set the padding (if required)
        report_tr_head.addView(label_wo); // add the column to the table row here
        label_wo.setTextSize(15);

        TextView label_lo = new TextView(this);
        label_lo.setId(21);// define id that must be unique
        label_lo.setText("L.O."); // set the text for the header 
        label_lo.setTextColor(Color.WHITE); // set the color
        label_lo.setPadding(5,5,5,5); // set the padding (if required)
        report_tr_head.addView(label_lo); // add the column to the table row here
        label_lo.setTextSize(15);

        TextView label_max = new TextView(this);
        label_max.setId(21);// define id that must be unique
        label_max.setText("Max."); // set the text for the header 
        label_max.setTextColor(Color.WHITE); // set the color
        label_max.setPadding(5,5,5,5); // set the padding (if required)
        report_tr_head.addView(label_max); // add the column to the table row here
        label_max.setTextSize(15);

        TextView label_tm = new TextView(this);
        label_tm.setId(21);// define id that must be unique
        label_tm.setText("T.M."); // set the text for the header 
        label_tm.setTextColor(Color.WHITE); // set the color
        label_tm.setPadding(5,5,5,5); // set the padding (if required)
        report_tr_head.addView(label_tm); // add the column to the table row here
        label_tm.setTextSize(15);

        TextView label_rank = new TextView(this);
        label_rank.setId(21);// define id that must be unique
        label_rank.setText("Rank"); // set the text for the header 
        label_rank.setTextColor(Color.WHITE); // set the color
        label_rank.setPadding(5,5,5,5); // set the padding (if required)
        report_tr_head.addView(label_rank); // add the column to the table row here
        label_rank.setTextSize(15);

        report_table.addView(report_tr_head, new TableLayout.LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

      //---------------Serial no Table Header-----------------------------------------------

    }
    //onclick device back button
    @Override
    public void onBackPressed() {
        // do something on back.

        Intent intent = new Intent(ReportListActivity.this, TakeTestActivity.class);
        finish();
        ReportListActivity.this.startActivity(intent);
        return;
    }

  //method to show toast message
        public void makeAToast(String str) {
            //yet to implement
            Toast toast = Toast.makeText(this,str, Toast.LENGTH_SHORT);
            toast.setGravity(Gravity.CENTER, 0, 0);
            toast.show();
        }

    //check connection
        public boolean reportList_isOnline() {
            ConnectivityManager cm =(ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
            NetworkInfo netInfo = cm.getActiveNetworkInfo();
            if (netInfo != null && netInfo.isConnectedOrConnecting()) {

                 //sending request for exam name list
                new MyAsyncTask_download_report_list().execute(getFromPreference("student_code"),getFromPreference("reportExamType"));

                return true;
            }

          //alert box to show internet connection error
            AlertDialog.Builder Internet_Alert = new AlertDialog.Builder(ReportListActivity.this);
            // set title
            Internet_Alert.setCancelable(false);
            Internet_Alert.setTitle("Attention!");
            Internet_Alert.setMessage("This application requires internet connectivity, no internet connection detected");
            Internet_Alert.setPositiveButton("Quit", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface arg0, int arg1) 
                {
                    Intent intent = new Intent(Intent.ACTION_MAIN);
                    intent.addCategory(Intent.CATEGORY_HOME);
                    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    startActivity(intent);
                    onQuitPressed(); 
                }
            });

            Internet_Alert.create().show();
            return false;
        }

    //to remove application from task manager
        public void onQuitPressed() {

            int pid = android.os.Process.myPid();
            android.os.Process.killProcess(pid);
        }

         //saving A VALUE in preference variable
        public void saveInPreference(String name, String content)
        {
            SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
             SharedPreferences.Editor editor = preferences.edit();
             editor.putString(name,content);
             editor.commit();
        }

        //getting content from preferences
        public String getFromPreference(String variable_name)
        {
            String preference_return;
            SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
            preference_return = preferences.getString(variable_name,"");

            return preference_return;
        }

        //===================================================================================================================================
        //sending student code and exam type to server to report list
        //===================================================================================================================================
        private class MyAsyncTask_download_report_list extends AsyncTask<String, Integer, Double>{

            @Override
            protected Double doInBackground(String... params) {
                // TODO Auto-generated method stub
                postData(params[0],params[1]);
                return null;
            }

            @SuppressWarnings("deprecation")
            protected void onPostExecute(Double result){

                report_list_xmlContent=reportList_responseBody;
                parse_ReportList();

            }

            protected void onProgressUpdate(Integer... progress){

            }

            @SuppressWarnings("deprecation")
            public void postData(String student_code, String exam_type) {

                //to handle connection timeout
                HttpParams httpParams = new BasicHttpParams();
                HttpConnectionParams.setConnectionTimeout(httpParams, 10000);

                HttpConnectionParams.setSoTimeout(httpParams, 10000);

                // Create a new HttpClient and Post Header
                HttpClient httpclient = new DefaultHttpClient(httpParams);

                SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(ReportListActivity.this);
                final String url_first = preferences.getString("URLFirstPart","");
                HttpPost httppost = new HttpPost(url_first+"StudentReport");

                try {
                    // Data that I am sending
                    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
                    nameValuePairs.add(new BasicNameValuePair("StudentCode", student_code));
                    nameValuePairs.add(new BasicNameValuePair("ExamType", exam_type));
                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                    try 
                    {
                    // Execute HTTP Post Request
                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                    HttpResponse response = httpclient.execute(httppost);

                  //getting response body and code from the server
                    reportList_responseCode=""+ response.getStatusLine().getStatusCode();
                    reportList_responseBody = EntityUtils.toString(response.getEntity());
                    } 
                    catch (SocketTimeoutException ex)
                    {
                       //showing alert in case of connection timeout
                       AlertDialog alertDialog = new AlertDialog.Builder(ReportListActivity.this).create();

                       // Setting Dialog Title
                       alertDialog.setTitle("Please Note");

                      // Setting Dialog Message
                      alertDialog.setMessage("Connection problem, please try later!");

                      // Setting OK Button
                      alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                        // Write your code here to execute after dialog closed
                        dialog.cancel();
                        }
                });

                // Showing Alert Message
                alertDialog.show();
                    }

                    Log.d("Report list response body: ", reportList_responseBody);
                    Log.d("Report list response code: ", reportList_responseCode);
                }
                catch (Throwable t ) {
                    //Toast.makeText( getApplicationContext(),""+t,Toast.LENGTH_LONG).show();
                    Log.d("Error Time of Login",t+"");
                }
            }
        }
        //===================================================================================================================================
        //END sending student code and exam type to server to report list
        //===================================================================================================================================

        // function to populate report list from xml
        void parse_ReportList()
        {

            ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

            XMLParser parser = new XMLParser();
            Document doc = parser.getDomElement(report_list_xmlContent); // getting DOM element

            //list object to populate spinner
            //List<String> list = new ArrayList<String>();

            NodeList nl = doc.getElementsByTagName(KEY_SET);
            // looping through all item nodes <item>
            for ( int i = 0; i < nl.getLength();i++) {

                //----------------Serial no table body------------------------------------------
                 srno_report_tr_data = new TableRow(this);
                    srno_report_tr_data.setId(10);
                    srno_report_tr_data.setBackgroundResource(R.drawable.grey_list_bg);
                    srno_report_tr_data.setLayoutParams(new LayoutParams(
                    LayoutParams.FILL_PARENT,
                    LayoutParams.WRAP_CONTENT));

                    final TextView sr_no = new TextView(this);
                    sr_no.setId(20);
                    sr_no.setText(""+(i+1));
                    sr_no.setTextColor(Color.BLACK);
                    sr_no.setPadding(5,5,5,5);
                    sr_no.setGravity(Gravity.CENTER);
                    sr_no.setTextSize(12);
                    srno_report_tr_data.addView(sr_no);// add the column to the table row here

                    srno_table.addView(srno_report_tr_data, new TableLayout.LayoutParams(
                            LayoutParams.FILL_PARENT,
                            LayoutParams.WRAP_CONTENT));

                  //----------------Serial no table body------------------------------------------

        //----------------Report table body------------------------------------------       

                report_tr_data=new TableRow(this);
                report_tr_data.setId(10);
                report_tr_data.setBackgroundResource(R.drawable.grey_list_bg);
                report_tr_data.setLayoutParams(new LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

                // creating new HashMap
                //HashMap<String, String> map = new HashMap<String, String>();

                Element e = (Element) nl.item(i);

                   //Exam name
                    final TextView test_name = new TextView(this);
                    test_name.setId(20);
                    test_name.setText(parser.getValue(e, KEY_SETNAME));
                    test_name.setTextColor(Color.BLACK);
                    test_name.setPadding(5,5,5,5);
                    test_name.setGravity(Gravity.CENTER);
                    test_name.setTextSize(12);
                    report_tr_data.addView(test_name);// add the column to the table row here

                    //Exam date
                    final TextView test_date = new TextView(this);
                    test_date.setId(21);// define id that must be unique
                    test_date.setText(parser.getValue(e, KEY_EXAMDATE)); // set the text for the header 
                    test_date.setTextColor(Color.BLACK); // set the color
                    test_date.setPadding(5,5,5,5); // set the padding (if required)
                    test_date.setGravity(Gravity.CENTER);
                    test_date.setTextSize(12);
                    report_tr_data.addView(test_date); // add the column to the table row here

                    //R.O.
                    final TextView test_ro = new TextView(this);
                    test_ro.setId(21);// define id that must be unique
                    test_ro.setText(parser.getValue(e, KEY_RIGHTMARKS)); // set the text for the header 
                    test_ro.setTextColor(Color.BLACK); // set the color
                    test_ro.setPadding(5,5,5,5); // set the padding (if required)
                    test_ro.setGravity(Gravity.CENTER);
                    test_ro.setTextSize(12);
                    report_tr_data.addView(test_ro); // add the column to the table row here

                   //W.O.
                    final TextView test_wo = new TextView(this);
                    test_wo.setId(21);// define id that must be unique
                    test_wo.setText(parser.getValue(e, KEY_WRONGMARKS)); // set the text for the header 
                    test_wo.setTextColor(Color.BLACK); // set the color
                    test_wo.setPadding(5,5,5,5); // set the padding (if required)
                    test_wo.setGravity(Gravity.CENTER);
                    test_wo.setTextSize(12);
                    report_tr_data.addView(test_wo); // add the column to the table row here

                //L.O.
                    final TextView test_lo = new TextView(this);
                    test_lo.setId(21);// define id that must be unique
                    test_lo.setText(parser.getValue(e, KEY_LEFTMARKS)); // set the text for the header 
                    test_lo.setTextColor(Color.BLACK); // set the color
                    test_lo.setPadding(5,5,5,5); // set the padding (if required)
                    test_lo.setGravity(Gravity.CENTER);
                    test_lo.setTextSize(12);
                    report_tr_data.addView(test_lo); // add the column to the table row here  

                //MAX       
                final TextView test_max = new TextView(this);
                test_max.setId(21);// define id that must be unique
                test_max.setText(parser.getValue(e, KEY_FULLMARKS)); // set the text for the header 
                test_max.setTextColor(Color.BLACK); // set the color
                test_max.setPadding(5,5,5,5); // set the padding (if required)
                test_max.setGravity(Gravity.CENTER);
                test_max.setTextSize(12);
                report_tr_data.addView(test_max); // add the column to the table row here

                //TM
                final TextView test_tm = new TextView(this);
                test_tm.setId(21);// define id that must be unique
                test_tm.setText(parser.getValue(e, KEY_OBTAINMARKS)); // set the text for the header 
                test_tm.setTextColor(Color.BLACK); // set the color
                test_tm.setPadding(5,5,5,5); // set the padding (if required)
                test_tm.setGravity(Gravity.CENTER);
                test_tm.setTextSize(12);
                report_tr_data.addView(test_tm); // add the column to the table row here

                //RANK
                final TextView test_rank = new TextView(this);
                test_rank.setId(21);// define id that must be unique
                test_rank.setText(parser.getValue(e, KEY_STUDENTRANK)); // set the text for the header 
                test_rank.setTextColor(Color.BLACK); // set the color
                test_rank.setPadding(5,5,5,5); // set the padding (if required)
                test_rank.setGravity(Gravity.CENTER);
                test_rank.setTextSize(12);
                report_tr_data.addView(test_rank); // add the column to the table row here

                //EXAM SET ID
                  final TextView test_exam_set = new TextView(this);
                    test_exam_set.setId(21);// define id that must be unique
                    test_exam_set.setText(parser.getValue(e, KEY_EXAMSETID)); // set the text for the header
                    test_exam_set.setTextSize((float) 0.01);
                    test_exam_set.setTextColor(Color.TRANSPARENT); // set the color
                    test_exam_set.setPadding(5,5,5,5); // set the padding (if required)
                    report_tr_data.addView(test_exam_set); // add the column to the table row here

                report_table.addView(report_tr_data, new TableLayout.LayoutParams(
                         LayoutParams.FILL_PARENT,
                         LayoutParams.WRAP_CONTENT));

    //----------------------On click table row---------------------------------------

                report_tr_data.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub

//---------------------------------------------------------------------------------------------------

                        saveInPreference("showReportTab", "ScoreCard");
                        saveInPreference("reportExamName", test_name.getText().toString());
                        saveInPreference("reportExamSet", test_exam_set.getText().toString());
                        Intent intent = new Intent(ReportListActivity.this, ReportDetailsActivity.class);
                        finish();
                        ReportListActivity.this.startActivity(intent);
                    }
                });
                //----------------------On click table row---------------------------------------

                //----------------Report table body------------------------------------------   

                //deactivating progress bar
                progress.dismiss();

            }

        }
} 
```

布局文件在[这里](http://pastie.org/7696094)

**PS：除标题外，每一行都是可点击的**

# iphone - 创建数据的自定义格式文件并实现以应用程序格式导出功能并在应用程序中打开文件

> ID：16140740
> 
> 赞同：1
> 
> 时间：2013-04-22T06:30:14.013
> 
> 标签：iphone, ios, objective-c, export, custom-url

我想开发用户可以以应用程序格式导出数据并可以通过电子邮件发送数据文件的功能。现在用户从应用程序中删除数据。然后它转到邮件并打开文件。有一个选项可以在应用程序中打开该文件，当按下它时，已删除的内容会再次显示在应用程序中。

我知道我必须实现自定义 url，但我很困惑我应该在 sqlite 或核心数据中创建哪个数据库，以及如何以应用程序格式导出数据。还有如何制作自定义格式文件。

这个概念取自分钟记录器应用程序。 [https://itunes.apple.com/us/app/minutetaker-meeting-minutes/id519543986?mt=8](https://itunes.apple.com/us/app/minutetaker-meeting-minutes/id519543986?mt=8)

请参阅所附的一些图片以获得我需要实现的清晰图片。

![在此处输入图像描述](https://i.stack.imgur.com/RDuJF.png)

请帮忙。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T07:00:04.030

首先，研究`CFBundleDocumentTypes`哪种机制可以指定您的应用程序可以理解哪些文档类型。

此外，自定义文件类型并没有什么特别或神秘之处，它们只是一组导出的数据（二进制、XML、JSON、纯文本等），采用您的应用可以理解的格式。通常，您的自定义导出数据文件会有一个特殊的扩展名，允许操作系统知道如何处理它们。您可能还应该对一些标头信息进行编码，以便检查您是否了解文件内容（它确实是由您的应用程序创建的并且版本号匹配）。`NSDictionary`您可以像构建数据和[writeToFile:atomically:](http://developer.apple.com/mac/library/documentation/cocoa/reference/foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/doc/uid/20000140-CBHDBHDB)一样简单地创建导出文件，但您使用的确切方法取决于您的数据是什么以及如何将其存储在应用程序中。

如果您将数据存储在应用程序内的 CoreData 中，那么您可以简单地通过电子邮件发送磁盘上的数据存储文件（考虑在发送之前复制并重命名它）。CoreData 已经拥有版本信息和处理版本冲突的系统（从旧版本升级并在版本不兼容时抛出异常）。

您不应该做的是仅根据您导出和共享数据的要求来决定如何在应用程序中存储数据。这是两件非常不同的事情。根据应用程序在运行时的操作选择您的内部数据存储，并根据实际需要保存的数据选择导出的数据格式以重建您的数据集。CoreData 非常适合您的应用内存储，但 XML 文件更有可能成为导出数据的更好解决方案，因为它可以让您对导出的内容进行大量控制，并提供许多用于添加其他元数据的选项。

# css - 悬停div时的CSS如何显示其他类（或）div？

> ID：16140744
> 
> 赞同：2
> 
> 时间：2013-04-22T06:30:18.867
> 
> 标签：css, css-transitions

这是我的示例样式表

```
 <style>  
 .cover{ margin 0 auto;}    
  .cover .ab{ display:inline-block color:#000; height:25px;} 
```

悬停时，类 .ab 类 .ac 应该从 -25px 从 0px 下降

```
 .cover .ab:hover .ac{ top:0px }  
  .ac{ position:absolute; top:-25px; height:25px;} 
   </style> 
```

我的 html 看起来像

```
 <body>
       <div class="cover">
       <div class="ab">&nbsp;</div>
       </div>
       <div class="ac">&nbsp;</div>
       </body> 
```

它似乎不起作用，声明有什么问题，请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T06:36:45.630

```
.cover .ab:hover .ac { top:0px } 
```

这不起作用，因为 .ac 不是 .ab 的孩子（顺便说一下，也不是 .cover 的孩子）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T06:37:16.083

在 Cover 上使用 Sibling 选择器。`[Demo](http://jsfiddle.net/ZMs74/)`

```
 .cover:hover ~ .ac { top:0px } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T06:42:08.553

如果您的两个 div 都是兄弟姐妹，您可以实现它：

```
<div class="cover">
   <div class="ab">asdfa</div>     
   <div class="ac">test</div>
</div> 
```

然后是CSS：

```
.ab:hover ~ .ac{ top:0px;height:25px; } 
```

将为您[工作 Demo](http://jsfiddle.net/zaheerahmed/4p8CM/1220/)。

一般[兄弟组合子](http://reference.sitepoint.com/css/generalsiblingselector)( `~`) 适用于兄弟姐妹。

您可以在`.ac`div 中移动 div 或在`.cover`div 上应用 css `.cover`：

```
.cover:hover ~ .ac { top:0px } 
```

# java - 如何从 JPA 中的 entitymanager 获取旧实体？

> ID：16140745
> 
> 赞同：2
> 
> 时间：2013-04-22T06:30:21.137
> 
> 标签：java, jpa

如何从`entitymanager`JPA 中获取旧实体？

**代码：**

```
    地址address=em.find(Address.class,1);
    System.out.println("地址名称："+address.getAddressName); // 中国
    address.setAddressName("俄罗斯");
    地址address1=em.find(Address.class,address.getAddressId());
    System.out.println("地址名称："+address1.getAddressName); //?????????

```

我怎样才能得到“中国”的答案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T06:37:31.907

使用不同的 EntityManager。任何特定的 EntityManager 只会返回具有特定身份的单个对象（缓存在 L1 缓存中）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T06:59:04.150

DataNucleus 是正确的，但我建议使用带有查询提示的查询来绕过缓存，而不是使用 entityManager 的第二个实例。

请参阅[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Caching/Query_Options](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Caching/Query_Options)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T12:49:08.680

`em.refresh(address1)`

应该可以工作，因为它从数据库（“中国”）覆盖（“俄罗斯”）对对象所做的更改刷新对象状态。

变量 address 和 address1 引用同一个对象，所以 address.getAddressName() 和 address1.getAddressName() 都返回“中国”。

`em.merge(address); em.flush();`数据库在被调用之前仍然具有旧值 。

# python - Django admin 中不再显示绿色的小“+”按钮

> ID：16140747
> 
> 赞同：2
> 
> 时间：2013-04-22T06:30:26.597
> 
> 标签：python, django, admin

模型.py

```
class Lab(Model):
    professor = ForeignKey('Author') 
```

管理员.py

```
class LabAdmin(ModelAdmin):
    form = LabForm

register(Lab, LabAdmin) 
```

表格.py

```
class LabForm(ModelForm):
    professor = ModelChoiceField(Author.objects.order_by('name'))

    class Meta:
        model = Lab 
```

* * *

**情况：**我不得不为管理员使用自定义表单，因为教授下拉列表的条目没有按字母顺序排列。

**问题：**因此，下拉列表后不再有绿色的小“+”按钮，以便在实验室添加管理表单时直接添加（在弹出窗口中）教授。Django 通常会自动创建绿色按钮和表单，但由于我使用自定义表单，它就消失了。

**请求：**我想要在教授下拉列表后面的这个绿色的小“+”按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T07:46:16.390

并没有真正回答为什么缺少添加按钮，但无论如何：您不需要自定义表单来覆盖作者表单字段的查询集，您只需要覆盖`ModelAdmin.formfield_for_foreignkey`

```
class LabAdmin(ModelAdmin):
    # form = LabForm

    def formfield_for_foreignkey(self, db_field, request, **kwargs):
        if db_field.name == "professor":
            kwargs["queryset"] = Author.objects.order_by("name")
        return super(MyModelAdmin, self).formfield_for_foreignkey(
            db_field, request, **kwargs
            ) 
```

或者您可以将“名称”设置为`Author`.

# android - 在后台打开浏览器并在 Android 中读取浏览器 URL 文本

> ID：16140748
> 
> 赞同：1
> 
> 时间：2013-04-22T06:30:27.683
> 
> 标签：android, browser

我正在制作一个演示应用程序，其中我想通过单击按钮在后台打开浏览器，并且必须在打开浏览器后阅读浏览器 URL 栏文本。我怎样才能达到同样的效果。是否可行。我发现这是为了阅读 URL ，但是我不清楚如何在后台打开浏览器。

```
Cursor webLinksCursor = getContentResolver().query(Browser.BOOKMARKS_URI, Browser.HISTORY_PROJECTION, null, null, Browser.BookmarkColumns.DATE + " DESC");
int row_count = webLinksCursor.getCount();

int title_column_index = webLinksCursor.getColumnIndexOrThrow(Browser.BookmarkColumns.TITLE);
int url_column_index = webLinksCursor.getColumnIndexOrThrow(Browser.BookmarkColumns.URL);

if ((title_column_index > -1) && (url_column_index > -1) && (row_count > 0))
{
    webLinksCursor.moveToFirst();
    while (webLinksCursor.isAfterLast() == false)
    {
        if (webLinksCursor.getInt(Browser.HISTORY_PROJECTION_BOOKMARK_INDEX) != 1)
        {
            if (!webLinksCursor.isNull(url_column_index))
            {
                Log.i("History" , "Last page browsed " + webLinksCursor.getString(url_column_index));
                break;
            }
        }
        webLinksCursor.moveToNext();
    }            
}
webLinksCursor.close(); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:01:33.093

尝试

```
 CookieStore cookieStore = new BasicCookieStore();

 HttpContext localContext = new BasicHttpContext();
// Bind custom cookie store to the local context
  localContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);
  HttpClient http = new DefaultHttpClient();
 HttpPost post = new HttpPost(url);
 HttpResponse response = null;
try {
    response = http.execute(post,localContext);
} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
String str=(String) localContext.getAttribute("last_redirect_url");
               if (str == null)
                {
                   HttpUriRequest currentReq = (HttpUriRequest) localContext.getAttribute(ExecutionContext.HTTP_REQUEST);
                   HttpHost currentHost = (HttpHost)  localContext.getAttribute(ExecutionContext.HTTP_TARGET_HOST);
                   str = (currentReq.getURI().isAbsolute()) ? currentReq.getURI().toString() : (currentHost.toURI() + currentReq.getURI());
                  System.out.print(str); 
               } 
} 
```

# math - 如何验证国际证券识别码 (ISIN) 号码

> ID：16140753
> 
> 赞同：11
> 
> 时间：2013-04-22T06:30:44.937
> 
> 标签：math, financial

如果我没记错的话，ISIN 数字最后一个位置是验证数字。在前 11 位数字的函数中确定其值的数学函数是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-03-20T15:27:37.703

Building on the examples of others, here is a C# implementation which will validate both ISINs and CUSIPs (and maybe some other Luhn variations).

Usage:

```
foreach (var isin in ValidIsins)
{
    var calculatedChecksum = SecuritiesValidation.CalculateChecksum(isin.Substring(0, 11));
    var actualChecksum = (isin.Last() - '0');
    Assert.AreEqual(calculatedChecksum, actualChecksum);
}
foreach (var cusip in ValidCusips)
{
    var calculatedChecksum = SecuritiesValidation.CalculateChecksum(cusip.Substring(0, 8), true, true);
    var actualChecksum = (cusip.Last() - '0');
    Assert.AreEqual(calculatedChecksum, actualChecksum);
} 
```

Implementation:

```
public static class SecuritiesValidation
{
    public static int CalculateChecksum(IEnumerable<char> codeWithoutChecksum, bool reverseLuhn = false, bool allowSymbols = false)
    {
        return reverseLuhn
            ? codeWithoutChecksum
                .Select((c, i) => c.OrdinalPosition(allowSymbols).ConditionalMultiplyByTwo(i.IsOdd()).SumDigits())
                .Sum()
                .TensComplement()
            : codeWithoutChecksum
                .ToArray()
                .ToDigits(allowSymbols)
                .Select((d, i) => d.ConditionalMultiplyByTwo(i.IsEven()).SumDigits())
                .Sum()
                .TensComplement();
    }

    public static bool IsChecksumCorrect(string code, bool reverseLuhn = false, bool allowSymbols = false)
    {
        try
        {
            var checksum = code.Last().ToInt();
            return checksum == CalculateChecksum(code.Take(code.Length - 1), reverseLuhn, allowSymbols);
        }
        catch
        {
            return false;
        }
    }

    /* Be careful here. This method is probably inapropriate for anything other than its designed purpose of Luhn-algorithm based validation.
     * Specifically:
     * - numbers are assigned a value equal to the number ('0' == 0, '1' == 1).
     * - letters are assigned a value indicating the number 9 plus the letters ordinal position in the English alphabet ('A' == 10, 'B' == 11).
     * - if symbols are allowed (eg: for CUSIP validation), they are assigned values beginning from 36 ('*' == 36, '@' == 37).
     */
    private static int OrdinalPosition(this char c, bool allowSymbols = false)
    {
        if (char.IsLower(c))
            return char.ToUpper(c) - 'A' + 10;

        if (char.IsUpper(c))
            return c - 'A' + 10;

        if (char.IsDigit(c))
            return c.ToInt();

        if (allowSymbols)
            switch (c)
            {
                case '*':
                    return 36;
                case '@':
                    return 37;
                case '#':
                    return 38;
            }
        throw new ArgumentOutOfRangeException("Specified character is not a letter, digit or allowed symbol.");
    }

    private static bool IsEven(this int x)
    {
        return (x % 2 == 0);
    }

    private static bool IsOdd(this int x)
    {
        return !IsEven(x);
    }

    private static int ToInt(this char digit)
    {
        if (char.IsDigit(digit))
            return digit - '0';
        throw new ArgumentOutOfRangeException("Specified character is not a digit.");
    }

    private static IEnumerable<int> ToDigits(this char[] s, bool allowSymbols = false)
    {
        var digits = new List<int>();
        for (var i = s.Length - 1; i >= 0; i--)
        {
            var ordinalPosition = s[i].OrdinalPosition(allowSymbols);
            digits.Add(ordinalPosition % 10);
            if (ordinalPosition > 9)
                digits.Add(ordinalPosition / 10);
        }
        return digits;
    }

    private static int SumDigits(this int value)
    {
        //return value > 9 ? ((value / 10) + (value % 10)) : value;
        return ((value / 10) + (value % 10));
    }

    private static int ConditionalMultiplyByTwo(this int value, bool condition)
    {
        return condition ? value * 2 : value;
    }

    private static int TensComplement(this int value)
    {
        return (10 - (value % 10)) % 10;
    }
} 
```

It will likely make sense to use checksum validation in conjunction with a regular expression pattern match. These are the regex I use:

ISIN: `^(XS|AD|AE|AF|AG|AI|AL|AM|AO|AQ|AR|AS|AT|AU|AW|AX|AZ|BA|BB|BD|BE|BF|BG|BH|BI|BJ|BL|BM|BN|BO|BQ|BR|BS|BT|BV|BW|BY|BZ|CA|CC|CD|CF|CG|CH|CI|CK|CL|CM|CN|CO|CR|CU|CV|CW|CX|CY|CZ|DE|DJ|DK|DM|DO|DZ|EC|EE|EG|EH|ER|ES|ET|FI|FJ|FK|FM|FO|FR|GA|GB|GD|GE|GF|GG|GH|GI|GL|GM|GN|GP|GQ|GR|GS|GT|GU|GW|GY|HK|HM|HN|HR|HT|HU|ID|IE|IL|IM|IN|IO|IQ|IR|IS|IT|JE|JM|JO|JP|KE|KG|KH|KI|KM|KN|KP|KR|KW|KY|KZ|LA|LB|LC|LI|LK|LR|LS|LT|LU|LV|LY|MA|MC|MD|ME|MF|MG|MH|MK|ML|MM|MN|MO|MP|MQ|MR|MS|MT|MU|MV|MW|MX|MY|MZ|NA|NC|NE|NF|NG|NI|NL|NO|NP|NR|NU|NZ|OM|PA|PE|PF|PG|PH|PK|PL|PM|PN|PR|PS|PT|PW|PY|QA|RE|RO|RS|RU|RW|SA|SB|SC|SD|SE|SG|SH|SI|SJ|SK|SL|SM|SN|SO|SR|SS|ST|SV|SX|SY|SZ|TC|TD|TF|TG|TH|TJ|TK|TL|TM|TN|TO|TR|TT|TV|TW|TZ|UA|UG|UM|US|UY|UZ|VA|VC|VE|VG|VI|VN|VU|WF|WS|YE|YT|ZA|ZM|ZW)([0-9A-Z]{9})([0-9]{1})$`

CUSIP: `^[A-Z0-9]{8}[0-9]$`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-22T06:51:15.773

[http://en.wikipedia.org/wiki/International_Securities_Identification_Number](http://en.wikipedia.org/wiki/International_Securities_Identification_Number)

> 计算 ISIN 校验位的过程类似于 CUSIP 中使用的“Modulus 10 Double Add Double”技术。要计算校验位，首先将任何字母转换为数字，方法是将它们在字母表中的序数位置加到 9，这样 A = 10 和 M = 22。从最右边的数字开始，每隔一个数字乘以 2。（对于 CUSIP 校验位，这两个步骤是相反的。）将生成的数字串（大于 9 的数字变成两个单独的数字）相加。从大于或等于它的以零结尾的最小数字减去这个和：这给出了校验位，也称为和模 10 的十进制补码。也就是说，得到的和，包括校验 -数，是 10 的倍数。

他们也有一个[很好的例子](http://en.wikipedia.org/wiki/International_Securities_Identification_Number#Examples)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-22T07:45:17.313

根据维基百科上公布的例子，方法是：

1.  将每个字母替换为其序数（A=1，B=2 等等）加上 9 ->![在此处输入图像描述](https://i.stack.imgur.com/FZeuE.gif)
2.  对于从最右边位置 ( ![在此处输入图像描述](https://i.stack.imgur.com/EfLGn.gif)) 开始的偶数位置的每个数字，将其替换为其 double 的数字（两个向量条目中的两个数字） -> ![在此处输入图像描述](https://i.stack.imgur.com/izsor.gif)；
3.  验证码：

![在此处输入图像描述](https://i.stack.imgur.com/KkuHi.gif)

JavaScript 中一个可能的实现是：

```
function getVerificationCode(isin)
{
 if(isin.length != 12) return null;
 var v = []; 
 for(var i = isin.length-2; i >= 0; i--)
 {
    var c = isin.charAt(i);
    if(isNaN(c)) //Not a digit
    {
        var letterCode = isin.charCodeAt(i)-55; //Char ordinal + 9
        v.push(letterCode % 10);
        if(letterCode > 9)
          v.push(Math.floor(letterCode/10));
    }
    else
      v.push(Number(c));
 }
 var sum = 0;
 var l = v.length;
 for(var i = 0; i < l; i++)
     if(i % 2 == 0)
 {
    var d = v[i]*2;
    sum += Math.floor(d/10);
    sum += d % 10;
 }
 else
    sum += v[i];
 return 10 - (sum  % 10);
} 
```

**编辑：** 包括@queso 更新：

```
function getVerificationCode(isin) {
    if (isin.length != 12) return false;
    var v = [];
    for (var i = isin.length - 2; i >= 0; i--) {
        var c = isin.charAt(i);
        if (isNaN(c)) { //not a digit
            var letterCode = isin.charCodeAt(i) - 55; //Char ordinal + 9
            v.push(letterCode % 10);
            if (letterCode > 9) {
                v.push(Math.floor(letterCode / 10));
            }
        } else {
            v.push(Number(c));
        }
    }
    var sum = 0;
    var l = v.length;
    for (var i = 0; i < l; i++) {
        if (i % 2 == 0) {
            var d = v[i] * 2;
            sum += Math.floor(d / 10);
            sum += d % 10;
        } else {
            sum += v[i];
        }
    }
    return (10 - (sum % 10)) % 10
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-09T12:32:50.683

感谢**@pablo**和**@queso** ，我与您分享了 Matlab 中的一个函数。

```
function isISIN = checkISINCode(Isin)
%
%
%
% see:
%   - source:https://en.wikipedia.org/wiki/International_Securities_Identification_Number
%   - source: https://stackoverflow.com/questions/16140753/how-to-validate-a-international-securities-identification-number-isin-number
%
%
    isISIN = 0; 

    if length(Isin) ~= 12
        return;
    end

    v = [];
    for i = (length(Isin)-1):-1:1
        c = Isin(i);
        if isnan(str2double(Isin(i)))
            % from ASCII 
            letterCode = double(upper(Isin(i))) - 64 + 9; 
            v = [mod(letterCode, 10), v];
            if letterCode > 9
                v = [floor(letterCode/10),v];
            end
        else
            v = [int8(str2double(Isin(i))), v];
        end
    end

    sum_ = 0;
    l = length(v);
    for i=1:l
        if(mod(i-1,2) == 0)
            d = v(i) * 2.;
            sum_ = sum_ + floor( double(d) / 10.0);
            sum_ = sum_ + mod(d, 10);
        else
            sum_ = sum_ + v(i);
        end
    end
    checkValue = mod((10 - mod(sum_, 10)),10);

    % Check Computed value with last digit
    isISIN = int8(str2double(Isin(end))) == checkValue;
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-02T14:46:25.347

我想分享我在 R 中的实现。它不需要任何特定的包。

mgsub 是一种支持功能，允许在一个命令中替换 ISIN 代码中的所有字符。它是从[用 gsub 替换多个带重音的字母复制而来的](https://stackoverflow.com/questions/15253954/replace-multiple-letters-with-accents-with-gsub)

`iso3166alpha2$Code`包含 [Grenade](https://stackoverflow.com/users/68115/grenade)列出的国家/地区列表

该算法在函数中实现，如果 ISIN 代码有效`isIsin(x)`，则返回`TRUE`

```
mgsub <- function(pattern, replacement, x, ...) {
  if (length(pattern)!=length(replacement)) {
    stop("pattern and replacement do not have the same length.")
  }
  result <- x
  for (i in 1:length(pattern)) {
    result <- gsub(pattern[i], replacement[i], result, ...)
  }
  result
}

isIsin <- function (identifier) {

  correctPrefix <- substr(identifier, 1, 2) %in% c(iso3166alpha2$Code, "XS")

  correctLength <- nchar(identifier) == 12  

  correctCharset <- !grepl('[[:punct:]]', identifier)

  if(!correctPrefix | !correctLength | !correctCharset) {
    return(FALSE)
  }

  # replace all character with its equivalent number  
  identifierOnlyNumbers <- mgsub(LETTERS, seq(10, 35), substr(identifier, 1, 11))

  # split the identifier in single digits and reverse its order
  characterVector <- rev(unlist(strsplit(identifierOnlyNumbers, "")))

  # Double every second digit of the group of digits with the rightmost character
  characterVector[seq(1, nchar(identifierOnlyNumbers), 2)] <- 
    as.character(as.numeric(characterVector[seq(1, nchar(identifierOnlyNumbers), 2)]) * 2)

  # Subtract 9 if > 9 (can apply to all since no digit can be greater than 9 before doubling)
  # Add up the digits
  summation <- sum(ifelse(as.numeric(characterVector) > 9, as.numeric(characterVector) - 9, as.numeric(characterVector)))

  # Take the 10s modulus of the sum, subtract it from 10 and take the 10s modulus of the result 
  # this final step is important in the instance where the modulus of the sum is 0, as the resulting check digit would be 10
  correctCheckDigit <- (10 - (summation %% 10)) %% 10 == as.numeric(substr(identifier, 12, 12))

  correctCheckDigit 

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-23T08:58:18.843

这是 Swift 中的一种方法。

它首先使用正则表达式检查要求 2 个字母 + 10 个字母数字字符

```
func validateISIN(_ isin : String) -> Bool {
    guard isin.range(of: "^[A-Z]{2}[A-Z0-9]{10}$", options: .regularExpression) != nil,
        let checksum = Int(isin.suffix(1)) else { return false }
    let digits = isin.dropLast().map{Int(String($0), radix: 36)!}.map(String.init).joined()
    var sum = 0
    var evenFlag = true
    digits.reversed().forEach { character in
        var integer = Int(String(character))!
        if evenFlag { integer *= 2 }
        sum += integer / 10
        sum += integer % 10
        evenFlag.toggle()
    }
    return (10 - (sum % 10)) % 10 == checksum
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-28T13:27:17.583

kotlin 版本来验证校验和：

```
fun check(isin: String): Boolean {
    val isinInts = isin.map { it.toString().toInt(36) }
        .joinToString("").map { Character.getNumericValue(it) }
    val multipliers = isinInts.indices.map { it % 2 + 1 }.reversed()
    val sum = multipliers.indices.sumOf { index: Int ->
        (isinInts[index] * multipliers[index]).let { it / 10 + it % 10 }
    }
    return (10 - (sum % 10)) % 10 == 0
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-17T09:18:57.037

```
<?php
function cusipToIsin($CUSIP, $Country)
{
    if (strlen($CUSIP) == 9) {
        $string = charToCusipBinary($Country) . charToCusipBinary($CUSIP); //Convert any letters to numbers
        $arrayString = str_split($string);
        //check wether string length is even or odd
        if (strlen($string) % 2 != 0) {
            $num = 0;
            foreach ($arrayString as $key => $value) {
                //Collect odd and even characters
                if ($key % 2 != 0) {
                    $values = $value;
                } else {
                    $values = $value * 2; //The key is in odd position, so Multiply by 2
                }
                $sumValue = array_sum(str_split($values)); //Add up the individual digits
                $num += $sumValue;
            }
            $isinCheckDigit = (10 - ($num % 10)) % 10;
            $result1 = strtoupper($Country . $CUSIP . $isinCheckDigit);
        } else {
            $num = 0;
            foreach ($arrayString as $key => $value) {
                //Collect odd and even characters
                if ($key % 2 != 0) {
                    $values = $value * 2; //The key is in even position, so Multiply by 2
                } else {
                    $values = $value;
                }
                $sumValue = array_sum(str_split($values)); //Add up the individual digits
                $num += $sumValue;
            }
            $isinCheckDigit = (10 - ($num % 10)) % 10;
            $result1 = strtoupper($Country . $CUSIP . $isinCheckDigit);
        }
        $Validate = isinValidate($result1);
        if ($Validate == true) {
            $result = $result1;
        } else {
            $result = 'Please check the CUSIP';
        }
    } else {
        $result = 'Please check the CUSIP';
    }
    return $result;
}

function charToCusipBinary($string)
{
    return strtr(strtoupper($string), ['A' => '10', 'B' => '11', 'C' => '12', 'D' => '13', 'E' => '14', 'F' => '15', 'G' => '16', 'H' => '17', 'I' => '18', 'J' => '19', 'K' => '20', 'L' => '21', 'M' => '22', 'N' => '23', 'O' => '24', 'P' => '25', 'Q' => '26', 'R' => '27', 'S' => '28', 'T' => '29', 'U' => '30', 'V' => '31', 'W' => '32', 'X' => '33', 'Y' => '34', 'Z' => '35']);
}

function isinValidate($isin)
{
    if (!preg_match('/^[A-Z]{2}[A-Z0-9]{9}[0-9]$/i', $isin)) {
        return false;
    }
    $base10 = '';
    for ($i = 0; $i <= 11; $i++) {
        $base10 .= base_convert($isin{$i}, 36, 10);
    }
    $checksum = 0;
    $len = strlen($base10) - 1;
    $parity = $len % 2;
    for ($i = $len; $i >= 0; $i--) {
        $weighted = $base10{$i} << (($i - $parity) & 1);
        $checksum += $weighted % 10 + (int) ($weighted / 10);
    }
    return !(bool) ($checksum % 10);
}

echo cusipToIsin('78012KD61', 'US'); //ISIN: US78012KD617
?> 
```

# php - SugarCrm 自动填充字段

> ID：16140755
> 
> 赞同：0
> 
> 时间：2013-04-22T06:30:47.233
> 
> 标签：php, jquery, sugarcrm

我创建了一个具有现场手机号码的自定义模块。它与潜在客户模块具有多对一的关系。

现在，我想在潜在客户模块子面板中自动填充我的自定义模块的手机号码。

我知道这是一个很老的问题，但我找不到确切的解决方案。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:19:28.490

你能提供更多细节吗？这可能是您正在寻找的，但我不确定：

[SugarCRM 中的自动填充字段](https://stackoverflow.com/questions/15564091/autofill-field-in-sugarcrm/15759241#)

# html - 维基百科表中的默认排序列

> ID：16140758
> 
> 赞同：15
> 
> 时间：2013-04-22T06:30:56.680
> 
> 标签：html, css, mediawiki

有一个标准的 wiki 表

```
{| class="sortable wikitable"
! Title
! Authors
! ID Number
|-
| '''Applying UML and Patterns'''
| Craig Larman
| ID432
... 
```

如何使表格按第三列（ID）升序对表格进行排序？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T19:27:09.047

根据[MediaWiki 文档](http://en.wikipedia.org/wiki/Help%3aSorting#Initial_sort_order_of_rows)：

> 当用户第一次看到表格时，行将始终以与 wikitext 中相同的顺序出现。如果您希望表格按特定列排序，则必须按该顺序对 wikitext 本身进行排序。这通常针对第一列进行。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2019-03-16T16:17:19.143

根据[wiki-help](https://en.wikipedia.org/wiki/Help:Sorting#Initial_sort_order_of_rows)提供

当用户第一次看到表格时，行将始终以与 wikitext 中相同的顺序出现。如果您希望表格按特定列排序，则必须按该顺序对 wikitext 本身进行排序。这通常针对第一列进行。可视化编辑器可以轻松移动各个表格的列和行。有关这方面的信息，以及有关按初始字母顺序放置表格的信息，请参见[此处](https://en.wikipedia.org/wiki/Help:Sorting#initial_alphabetical_order)的相关部分。

更多内容 您可以使表格可排序并将选定的列设置为“不可排序” 单击[此处](https://en.wikipedia.org/wiki/Help:Sorting#Making_a_column_unsortable)了解更多信息。

# ruby - 访问哈希属性与访问对象属性的方式相同

> ID：16140759
> 
> 赞同：4
> 
> 时间：2013-04-22T06:31:07.813
> 
> 标签：ruby, hash

我有一个红宝石哈希，比如说

```
h={name: "john", age: "23"} 
```

它不是一个对象，只是一个从对象创建的散列。我想在访问对象时使用方法属性访问它的值。IE：

```
h.name => "john"
h.age  => 23 
```

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T06:36:58.040

[在您的情况下，使用openstruct](http://ruby-doc.org/stdlib-1.9.3/libdoc/ostruct/rdoc/OpenStruct.html)会很方便

```
require 'ostruct'

h = OpenStruct.new(name: "john", age: "23")

h.name #=> "john"
h.age  #=> 23 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-25T14:15:23.260

也许这就是你要找的

```
item = Struct.new(:id, :name)
item.new(1, 'Name') 
```

# python - 如何检查 django 模板中的字典中是否有内容

> ID：16140765
> 
> 赞同：8
> 
> 时间：2013-04-22T06:31:17.593
> 
> 标签：python, django

我有我像这样传递给模板的字典

```
dict['vars'] = ['a':'dd','b':'gg','c':'yy']
dict['myvars'] = ['a':'tt','b':'yy','c':'uu'] 
```

有时

当单个字典为空且没有键时。

我怎么能像这样检查

```
{%  if dict.vars empty   %}
do this 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-22T06:44:48.760

```
{% if not dict.vars %}
  do this
{% endif %} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-01-24T01:31:54.623

这：

```
{% if dict|length > 0 %} 
 do this
{% endif %} 
```

也应该做得很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-22T07:11:39.843

你也可以这样做：

```
{% if not "vars" in dict %}
    Hello
{% else %}
    abc
{% endif %} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-31T16:14:26.843

您也可以像这样检查字典是否为空

```
{% if not 'bool(video_url_dict)' %}
{% if 'bool(video_url_dict)' %} 
```

这将正常工作。

# android - 使用共享首选项/会话使用 Facebook-Android-SDK 3.0 登录

> ID：16140771
> 
> 赞同：2
> 
> 时间：2013-04-22T06:31:34.287
> 
> 标签：android, session, login, sharedpreferences, facebook-android-sdk

很长一段时间以来，我使用的登录名几乎与[本教程](http://www.androidhive.info/2012/03/android-facebook-connect-tutorial/)中的登录名相同，直到我意识到它已被弃用。

因此，像一个优秀的开发人员一样，我决定尝试将我的登录升级到 Facebook Android 3.0 SDK，但当我查看文档时，我不禁想知道为什么 Facebook 会在旧版本运行良好的情况下过度复杂化他们的登录。

我当前的代码如下，但我有点困惑。我过去只是简单地向 Facebook 发出授权请求，从他们那里获取一些信息，将其与我的数据库进行比较，如果它匹配 id，则将一些信息保存到共享首选项并打开我的应用程序的家庭活动。但是，对于 3.0 和“会话”，我有点困惑：

1.  我是否必须在所有活动中使用这些“会话”？
2.  如果是这样，它们会在我的应用程序中持续存在吗？
3.  如果我们已经共享首选项，那么会话的意义何在？

编码：

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
import java.util.List;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

import com.facebook.LoggingBehavior;
import com.facebook.Request;
import com.facebook.Response;
import com.facebook.Session;
import com.facebook.SessionState;
import com.facebook.Settings;
import com.facebook.model.GraphUser;
import com.loopj.android.http.JsonHttpResponseHandler;
import com.loopj.android.http.RequestParams;

public class FBLoginActivity extends Activity {
    private static final String URL_PREFIX_FRIENDS = "https://graph.facebook.com/me/friends?access_token=";

    private TextView textInstructionsOrLink;
    private Button buttonLoginLogout;
    private Session.StatusCallback statusCallback = new SessionStatusCallback();
 // List of additional write permissions being requested
    private static final List<String> PERMISSIONS = Arrays.asList("email","user_about_me","user_activities",
    "user_birthday","user_education_history", "user_events","user_hometown", "user_groups","user_interests","user_likes",
    "user_location","user_photos","user_work_history");

    SharedPrefs sharedprefs;
    // Request code for reauthorization requests.
    private static final int REAUTH_ACTIVITY_CODE = 100;

    // Flag to represent if we are waiting for extended permissions
    private boolean pendingAnnounce = false;
    protected String college; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.facebooklogin); 
        buttonLoginLogout = (Button)findViewById(R.id.buttonLoginLogout);
        textInstructionsOrLink = (TextView)findViewById(R.id.instructionsOrLink);

        Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_ACCESS_TOKENS);

        Session session = Session.getActiveSession();
        if (session == null) {
            if (savedInstanceState != null) {
                session = Session.restoreSession(this, null, statusCallback, savedInstanceState);
            }
            if (session == null) {
                session = new Session(this);
            }
            Session.setActiveSession(session);
            if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
                session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback).setPermissions(PERMISSIONS));
            }
        }

        updateView();
    }

    @Override
    public void onStart() {
        super.onStart();
        Session.getActiveSession().addCallback(statusCallback);
    }

    @Override
    public void onStop() {
        super.onStop();
        Session.getActiveSession().removeCallback(statusCallback);
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        Session session = Session.getActiveSession();
        Session.saveSession(session, outState);
    }

    private void updateView() {
        Session session = Session.getActiveSession();
        if (session.isOpened()) {
            Log.i("permissions",session.getPermissions().toString());
            //makeLikesRequest(session);
            makeMeRequest(session);

            Log.i("token",session.getAccessToken());
            Log.i("token experation", session.getExpirationDate().toString());

            Intent i = new Intent(getApplicationContext(), FaceTestActivity.class);
            startActivity(i);
            /*buttonLoginLogout.setText(R.string.logout);
            buttonLoginLogout.setOnClickListener(new OnClickListener() {
                public void onClick(View view) { onClickLogout(); }
            });*/
        } else {
            textInstructionsOrLink.setText(R.string.instructions);
            buttonLoginLogout.setText(R.string.login);
            buttonLoginLogout.setOnClickListener(new OnClickListener() {
                public void onClick(View view) { onClickLogin(); }
            });
        }
    }

    private void onClickLogin() {
        Session session = Session.getActiveSession();
        if (!session.isOpened() && !session.isClosed()) {
            session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback).setPermissions(PERMISSIONS));
        } else {

            Session.openActiveSession(this, true, statusCallback);
        }

    }

    private void onClickLogout() {
        Session session = Session.getActiveSession();
        if (!session.isClosed()) {
            session.closeAndClearTokenInformation();
        }
    }

    private class SessionStatusCallback implements Session.StatusCallback {
        @Override
        public void call(Session session, SessionState state, Exception exception) {
            updateView();
        }
    }

   /* private void makeLikesRequest(final Session session) {
        Request.Callback callback = new Request.Callback() {

            @Override
            public void onCompleted(Response response) {
                // response should have the likes

                 // If the response is successful
                if (session == Session.getActiveSession()) {

                    Log.i("likes response", response.toString());
                }

            }
        };
        Request request = new Request(session, "me/likes", null, HttpMethod.GET, callback);
        RequestAsyncTask task = new RequestAsyncTask(request);
        task.execute();
    } */

    private void makeMeRequest(final Session session) {
        // Make an API call to get user data and define a 
        // new callback to handle the response.
        Request request = Request.newMeRequest(session, 
                new Request.GraphUserCallback() {
            @Override
            public void onCompleted(GraphUser user, Response response) {
                // If the response is successful
                if (session == Session.getActiveSession()) {
                    if (user != null) {
                        // Set the id for the ProfilePictureView
                        // view that in turn displays the profile picture.
                        Log.i("user", user.toString());
                        JSONObject json = user.getInnerJSONObject();
                        Log.i("json me response", json.toString());

                        RequestParams params = new RequestParams();

                        String fb_token = session.getAccessToken().toString();
                        String fb_token_expires = session.getExpirationDate().toString();
                        Log.i("fb_token", fb_token);
                        params.put("fb_token",fb_token);
                        Log.i("fb_token_expires", fb_token_expires);
                        params.put("fb_token_expires",fb_token);

                        if(user.getBirthday() != null){
                            String birthday = user.getBirthday();
                            Log.i("birthday_1",birthday);
                            params.put("birthday", birthday);
                        }

                        if(user.getFirstName() != null){
                            String firstName = user.getFirstName();
                            Log.i("first name_2", firstName);
                            params.put("firstName", firstName);
                        }

                        if(user.getLastName() != null){
                            String lastName = user.getLastName();
                            Log.i("last name_3", lastName);
                            params.put("lastName", lastName);
                        }

                        if(user.getLink() != null){
                            String fb_link = user.getLink();
                            Log.i("fb_link_4", fb_link);
                            params.put("fb_link", fb_link);
                        }

                        if(user.getId() != null){
                            String fb_uid = user.getId();
                            Log.i("fb uid_5", fb_uid);
                            params.put("fb_uid", fb_uid);
                        }

                        if(user.getProperty("gender") != null){
                            String gender = user.getProperty("gender").toString();
                            Log.i("gender_6", gender);
                            params.put("gender", gender);
                        }

                        if(user.getProperty("email") != null){
                            String email = user.getProperty("email").toString();
                            Log.i("email_7", email);
                            params.put("email", email);
                        }

                        if(user.getProperty("verified") != null){
                            String verified = user.getProperty("verified").toString();
                            Log.i("verified_8", verified);
                            params.put("verified", verified);

                        }

                        if(user.getProperty("bio") != null){
                            String bio = user.getProperty("bio").toString();
                            Log.i("bio_9", bio);
                            params.put("bio", bio);

                        }
                        if(user.getLocation().getProperty("name") != null){

                            String location = user.getLocation().getProperty("name").toString();
                            Log.i("location_10", location);
                            params.put("location", location);

                        } 

                        //user Location
                        JSONArray education_array = (JSONArray)user.getProperty("education");
                        if (education_array.length() > 0) {
                            String education_length= String.valueOf(education_array.length());
                            Log.i("education_length",education_length);
                            ArrayList<String> collegeNames = new ArrayList<String> ();
                            for (int i=0; i < education_array.length(); i++) {
                                JSONObject edu_obj = education_array.optJSONObject(i);

                                // Add the language name to a list. Use JSON
                                // methods to get access to the name field.

                              String type = edu_obj.optString("type");
                              Log.i("type of edu", type);
                              if(type.equalsIgnoreCase("college")){
                                  JSONObject school_obj = edu_obj.optJSONObject("school");
                                  college = school_obj.optString("name");
                                  //Log.i("college",college);

                              }

                            }  
                            params.put("college", college);
                            Log.i("college", college);

                        }

                        RestClient.post(FB_LOGIN_URL, params, new JsonHttpResponseHandler() {
                            @Override
                            public void onFailure(Throwable arg0, JSONObject arg1) {
                                // TODO Auto-generated method stub
                                super.onFailure(arg0, arg1);

                                Log.i("FAILED TO LOGIN:", arg1.toString());
                                Toast.makeText(getApplicationContext(), arg1.toString() , Toast.LENGTH_LONG).show();
                            }

                            @Override
                            public void onSuccess(JSONObject json) {

                                Log.i("Login Request Success:", json.toString());

                                try {

                                    sharedprefs.createLoginSession(json);
                                    HashMap<String, String> user = sharedprefs.getUserDetails();
                                    String profile_uid = user.get(sharedprefs.KEY_UID);
                                    Intent i = new Intent(getApplicationContext(), TabHostFragmentActivity.class);
                                    i.putExtra("profile_uid", profile_uid);
                                    startActivity(i);
                                    finish();

                                } catch (JSONException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                }

                            }
                        });

                    }
                }
                if (response.getError() != null) {
                    // Handle errors, will do so later.
                }
            }
        });
        request.executeAsync();
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:00:02.467

您必须始终引用唯一的**Session**类。每个活动都必须从**Session**类中获取一个已经打开的会话，或者，如果没有找到有效的会话，则创建一个新的会话。

正如官方网站所说，您必须在每个想要向 Facebook 发出请求的活动中管理会话生命周期。
UiLifecycleHelper是一个非常有用的类，可以帮助您管理活动生命周期中的会话状态（例如，该类的 onPause() 方法处理删除在调用它的活动中添加的回调[）](http://developers.facebook.com/docs/reference/android/3.0/UiLifecycleHelper/)

定义 Session 类是为了更好地控制活动中的用户身份验证，并保证令牌缓存的自动管理。 [在这里](http://developers.facebook.com/docs/technical-guides/iossdk/session/)您可以找到更多详细信息。

# c++ - 函数外的 Ublas 向量初始化

> ID：16140775
> 
> 赞同：0
> 
> 时间：2013-04-22T06:31:43.113
> 
> 标签：c++, ublas

我想将一个特定的 boost ublas 向量声明为全局变量。问题是在函数外部声明总是会导致错误。

这是一个具体的例子：

以下代码将给出多个错误：( `error C2143: syntax error : missing ';' before '<<=' error C4430: missing type specifier - int assumed. error C2371: 'test' : redefinition; different basic types`)

```
#include <boost/numeric/ublas/matrix.hpp>
#include <boost/numeric/ublas/io.hpp>
#include <boost/numeric/ublas/assignment.hpp> 
using namespace boost::numeric::ublas;

vector<int> test(3);
test <<= 1,2,3;

void main () {
std::cout << test << std::endl;
} 
```

将声明移动到主程序但是有效

```
#include <boost/numeric/ublas/matrix.hpp>
#include <boost/numeric/ublas/io.hpp>
#include <boost/numeric/ublas/assignment.hpp> 
using namespace boost::numeric::ublas;

vector<int> test(3);

void main () {
test <<= 1,2,3;
std::cout << test << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:37:02.680

当然它会导致错误，因为它是

```
test.operator <<= (1,2,3); 
```

但是你不能在函数之外调用函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-17T18:47:41.857

在 C++11 中，这可以用 lambda 来解决：

```
const auto test = [](){
    ublas::vector<int> m(3);
    m <<= 1, 2, 3;
    return m;
}(); 
```

# python - Replacing variable with values from a CSV-file in python

> ID：16140777
> 
> 赞同：2
> 
> 时间：2013-04-22T06:31:45.487
> 
> 标签：python, variables, csv, header

I have a csv file with the following format:

```
variable,     name,   date,       location, youtube, 
 e1,      My birthday, 21st april, USA,    www.xyz.com
 e2,      your b'day,  1st May,   India,   www.abc.com
 e3,      christmas ,  25th Dec,  UK,      www.christmas.com 
```

Here, the first row represents the header, `e1`, `e2` and `e3` are my variables.

Now I want to check if there is a variable called `e1.name` in some text and then I want to replace it by corresponding value i.e `My birthday`.

Similarly if there is a variable `e2.location`, then it must be replaced by `India`. Thus I want a kind of matrix like access.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:49:21.350

```
import csv
with open('test.csv') as f:
    fieldnames = ('variable', 'name', 'date', 'location', 'youtube')
    r = csv.DictReader(f, fieldnames)
    next(f, None) # skip header
    rows = []
    for row in r:
        if row['variable'] == 'e1':
            row['name'] = 'My birthday'
        if row['variable'] == 'e2':
            row['location'] = 'India'
        rows.append(row)
    w = csv.DictWriter(a_file, fieldnames)
    w.writerows(rows) 
```

If you want a matrix form, do something like this:

```
import csv
with open('test.csv') as f:
    next(f, None) # skip header
    rows = list(csv.reader(f))
    rows[0][1] = 'My birthday'
    rows[1][3] = 'India'
    w = csv.writer(a_file)
    w.writerows(rows) 
```

# xml - Google Maps Markerclusterer 不会从 XML 加载

> ID：16140779
> 
> 赞同：0
> 
> 时间：2013-04-22T06:31:48.530
> 
> 标签：xml, maps, markerclusterer

我想首先说我知道这个问题过去曾被问过，但我无法得到旧的答案。在过去的 7 个小时里，我一直在使用 Google Maps Markerclusterer。我对 Javascript 比较陌生，并且能够为我的在线目录构建 Google 地图。我找到了 Makerclusterer，并认为这将是我标记过多问题的完美解决方案。问题是，我只知道如何从 XML 中读取，而此示例代码从 JSON 中读取。在尝试了几个小时让它从 XML 中读取之后，我想我可以简单地将我的 XML 转换为 JSON 格式，这将是一个简单的修复，但这也不起作用。

这是我们都知道并喜欢在我的服务器上正常运行的 MarkerClusterer 示例：（集群文件）

这是我动态生成的 XML 文件（它包含城市名称、经度和纬度坐标）：（XML 文件）

下面是示例 MarkerClusterer 代码。我已经阅读了数十篇“只需将标记点放入数组并将其提供给集群器”的评论，但我现在已经失败了十几次。任何输入表示赞赏。

```
<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/data.json">
</script>
<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer.js"></script>

<script type="text/javascript">
  function initialize() {
    var center = new google.maps.LatLng(37.4419, -122.1419);

    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 3,
      center: center,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var markers = [];
    for (var i = 0; i < 100; i++) {
      var dataPhoto = data.photos[i];
      var latLng = new google.maps.LatLng(dataPhoto.latitude,
          dataPhoto.longitude);
      var marker = new google.maps.Marker({
        position: latLng
      });
      markers.push(marker);
    }
    var markerCluster = new MarkerClusterer(map, markers);
  }
  google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:05:00.597

好吧，如果您必须使用 xml，好消息是它并没有那么困难。访问 xml 元素的工作方式与访问普通 DOM 非常相似，但有许多不同之处。

需要注意的一点是来自 xml 的所有数据都是一个字符串，因此在需要 Number 的地方，您必须转换为 Number 类型。例如在创建 google.maps.LatLng 时处理 lat & lon 值等。至于加载要读取的 xml，我们将使用 ajax 来加载它。

我整理了一个示例，其中包含一些额外的实用程序（请注意用于选择不同状态的选择，以及可单击以显示信息窗口的标记）供您仔细阅读。我加入 jQuery 库只是为了简化 ajax 请求代码，尽管 jQuery 也可以用于代码中我没有花时间转换的其他东西。我很好奇，xml中的'count_unverified'是什么？嗯，享受吧！

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>Google Maps MarkerClusterer</title>
<style type="text/css">
.map-infowindow {
    border:3px ridge blue;
    padding:6px;
}
</style>
<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
<script type="text/javascript">

function initialize(elementId, stateAbbr) {
    var callback = function (data, status, xhr) {
        //data will be the xml returned from the server
        if (status == 'success') {
            createMap(elementId, data);
        }
    };
    //using jQuery to fire off an ajax request to load the xml,
    //using our callback as the success function
    $.ajax(
        {
            url : 'http://historyads.com/xml_state.php',
            data : 'state='+ stateAbbr,
            dataType : 'xml',
            success : callback
        }
    );
}

function createMap(elementId, xml) {
    var i, xmlMarker, lat, lng, latLng,
        map = new google.maps.Map(
            document.getElementById(elementId),
            {
                mapTypeId: google.maps.MapTypeId.ROADMAP
            }
        ),
        infoWindow = new google.maps.InfoWindow({maxWidth:200}),
        xmlMarkers = xml.getElementsByTagName('marker'),
        markers = [],
        latlngs = [],
        bounds = new google.maps.LatLngBounds();
    //private function, for scope retention purposes
    function createMarker(latlng, name, count_unverified) {
        latlngs.push(latlng);
        var marker = new google.maps.Marker({
            position: latlng,
            map: map
        });
        google.maps.event.addListener(
            marker,
            "click",
            function () {
                var info = '<div class="map-infowindow"><h4 class="map-info-title">';
                info += name +'</h4><p class="map-info-content">count_unverified: ';
                info += count_unverified +'</p>';
                infoWindow.setContent(info);
                infoWindow.open(map, marker);
            }
        );
        markers.push(marker);
    }
    for (i = 0; i < xmlMarkers.length; i++) {
        xmlMarker = xmlMarkers[i];
        //lat & lng in the xml file are strings, convert to Number
        lat = Number(xmlMarker.getAttribute('lat'));
        lng = Number(xmlMarker.getAttribute('lng'));
        latLng = new google.maps.LatLng(lat, lng);
        createMarker(
            latLng,
            xmlMarker.getAttribute('name'),
            xmlMarker.getAttribute('count_unverified')
        );
    }
    markerCluster = new MarkerClusterer(map, markers);
    for (i = 0; i < latlngs.length; i++) {
        bounds.extend(latlngs[i]);
    }
    map.fitBounds(bounds);
    return map;
}

function buildStatesSelect() {
    var i,
        select = document.getElementById('stateSelect'),
        states = [
            'AL', 'AK', 'AZ', 'AR', 'CA', 'CO', 'CT', 'DE', 'DC', 'FL',
            'GA', 'HI', 'ID', 'IL', 'IN', 'IA', 'KS', 'KY', 'LA', 'ME',
            'MD', 'MA', 'MI', 'MN', 'MS', 'MO', 'MT', 'NE', 'NV', 'NH',
            'NJ', 'NM', 'NY', 'NC', 'ND', 'OH', 'OK', 'OR', 'PA', 'RI',
            'SC', 'SD', 'TN', 'TX', 'UT', 'VT', 'VA', 'WA', 'WV', 'WI', 'WY'
        ],
        len = states.length;
    for (i = 0; i < len; i++) {
        addOption(select, new Option(states[i], states[i]));
    }
    select.onchange = function () {
        var opt = this.options[this.options.selectedIndex];
        if (opt.value != '') {
            initialize('map', opt.value);
        }
    };
}

function addOption(select, option) {
    try {
        select.add(option,null); //standard method
    } catch(er) {
        select.add(option); //IE only
    }
}

google.maps.event.addDomListener(
    window,
    'load',
    function () {
        initialize('map', 'FL');
        buildStatesSelect();
    }
);

</script>
</head>
<body>
<div id="map" style="width:500px; height:500px;"></div>
<select id="stateSelect">
<option value="">Select State</option>
</select>
</body>
</html> 
```

# c# - 使用反射c#获取动态创建的ASPxTextBox的Text属性

> ID：16140782
> 
> 赞同：0
> 
> 时间：2013-04-22T06:31:56.723
> 
> 标签：c#, reflection, textbox, devexpress, dynamic-controls

在 ASPxPageControl 中，我添加了一些动态创建的标签和文本框。最初，文本框的 Text 属性为空，直到最终用户根据必要的信息填写文本框。

下一步是按下保存按钮，当发生这种情况时，在 button_ClickEvent 函数中，我正确获取了所有控件，但即使用户填写了文本框，文本属性也始终为空

我的代码中是否缺少某些内容？

这是我的代码：

```
 PropertyInfo cntrlProperty;
    foreach (System.Web.UI.Control cntrl in pControl.TabPages[1].Controls)
    {
          Type ControlType = testAssembly.GetType(typeof(ASPxTextBox));

          if (!cntrl.GetType().Equals(typeof(ASPxLabel)) && cntrl.GetType().Equals(ControlType))
          {

             cntrlProperty = cntrl.GetType().GetProperty("Text");

             var value = cntrlProperty.GetValue(cntrl);

              VALUES += String.Format("'{0}'" + ",", value);
          }

    } 
```

此外，我尝试在动态创建控件时设置默认字符串，这很好，因为当控件呈现时，此默认字符串位于文本框中。

假设默认字符串=“只是一个字符串”；

到目前为止，在我的代码上面的变量***值 = 只是一个字符串*** ，这没关系。

然后我所做的是在运行时将一些文本附加（我在“文本框中”键入）到“默认字符串”现在默认字符串看起来像

default string = "只是文本框中的一个字符串"

然后我按下保存按钮，结果它仍然存储的变量***值******value = 只是一个字符串***

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:56:38.933

好吧，我认为你根本不需要反思。您已经了解您的目标类型。当您不知道类型或者您可能正在处理多种类型并尝试将它们放入模式中时，您通常会使用反射。

考虑一下：

```
 foreach (System.Web.UI.Control cntrl in pControl.TabPages[1].Controls)
    {
        if (cntrl is ASPxTextBox)
        {
           VALUES += string.Format("'{0}' + ",", (cntrl as ASPxTextBox).Text);
        }
    }
```

如果在执行此操作时仍无法获得 text 属性值，则可能是控件内部存在问题，并且在页面通过 LoadPostData 阶段时未在浏览器中捕获输入的文本。

您还需要注意的是，要使此 LoadPostData 在使用 ASP.NET AJAX 添加控件时成功，您需要在创建它们之后在页面上为每个回发加载此控件，以便能够取回值.

希望这可以帮助。

# android - Android - 向布局添加视图

> ID：16140792
> 
> 赞同：1
> 
> 时间：2013-04-22T06:32:26.617
> 
> 标签：android, android-layout, android-view, android-scrollview

我有一个线性布局，我将为其添加视图以使其成为类似视图的列表，（不使用 android 列表视图的原因是，我在滑动菜单的滚动视图中使用此布局并且知道列表视图不能直接在滚动视图中使用）。我不知道我是否听错了，但我想要的只是滚动视图，其中包含一个可供用户选择的可滚动选项列表，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/9aTpR.png)

我的滚动视图看起来像这样：

```
<scrollview>
  <main layout>
       <some layout>
       <some layout>
       <some layout>
       <some layout> ////i wanted a list view here. as listview cant be used directly inside 
                          scrollview, i add views in the code to make it a list 
                         like view which has image view and checkedtextview to make it look like a
                         list view

  <main layout>
<scrollview> 
```

现在，问题是在添加一个视图之后，我还应该添加分隔线来分隔两个连续的视图。这是我完整的可滚动 layout.xml 代码[http://pastebin.com/YZPj9w4C](http://pastebin.com/YZPj9w4C)

这是我的布局（list_item_category），我将其作为单个视图[http://pastebin.com/htCTKmdT](http://pastebin.com/htCTKmdT)添加到上述可滚动的 layout.xml

这是我用来将视图膨胀到布局上的代码：

```
for (int i = 0; i < 9; i++) {
            panelView = inflater.inflate(R.layout.dialog_list_item_category,
                    null, false);
            panelView.setId(i);

            final CheckedTextView chk = (CheckedTextView) panelView
                    .findViewById(R.id.categories_checkbox);

            chk.setText(some text);

            ImageView img = (ImageView) panelView
                    .findViewById(R.id.categories_icon);

            img.setImageResource(some icon);
} 
```

总而言之，在将每个视图膨胀到布局后，我需要一条分隔线。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:46:57.413

具有指定高度、宽度和颜色的 TextView 将起作用。尝试添加这个，

```
<TextView
android:layout_width="fill_parent"
android:layout_height="5dp"
android:background="#colorCode"    
/> 
```

TextView 基本上就是它了。如果需要，您可以添加额外的属性，但关键是 textview 和 listview_divider 的高度应该相等，并且 textview 和 listview 分隔符的背景颜色也应该相等。在 ListView 中，您可以使用分隔高度和颜色

```
android:divider="#colorCode"
android:dividerHeight="sameAsTextViewHeight" 
```

# ios - 创建 NSFetchRequest 的两种方式有什么区别

> ID：16140796
> 
> 赞同：0
> 
> 时间：2013-04-22T06:32:40.850
> 
> 标签：ios, core-data, nsfetchrequest

方式1：

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Event" inManagedObjectContext:managedObjectContext]; 
```

方式2：

```
NSFetchRequest* fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Event"]; 
```

在方式 1 中，需要一个托管对象上下文，但在方式 2 中不需要。任何人都可以澄清这两者之间的区别吗？尤其是在表演上。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:37:58.757

不同之处在于，在您的第二个选项中，用于将提供的实体字符串解析为实际实体的上下文是在上下文中执行请求时获取的，`executeFetchRequest:error:`而在您的第一个选项中，您自己解析实体。

如果您使用共享同一模型的多个商店，则应在每次执行提取时设置请求的实体（如果您使用不同的商店），以便获得您请求的结果。

# android - 如何根据时间 AM/PM 自动更改日期

> ID：16140798
> 
> 赞同：2
> 
> 时间：2013-04-22T06:32:55.473
> 
> 标签：android

您好，我必须根据用户选择的时间 AM/PM 设置日期

**我的时间密码**

```
private TimePickerDialog.OnTimeSetListener timeListener1 = 
            new TimePickerDialog.OnTimeSetListener() {

        @Override
        public void onTimeSet(TimePicker view, int hourOfDay, int minute) {

            hours1=hourOfDay;
            min1=minute;
            SimpleDateFormat formate = new SimpleDateFormat("HH:mm");
            String newTime = formate.format(System.currentTimeMillis());

            updateTime1();

             Calendar c = Calendar.getInstance(); 
                int seconds = c.get(Calendar.SECOND);
                int minutes = c.get(Calendar.MINUTE);
                int hours = c.get(Calendar.HOUR);
                int years = c.get(Calendar.YEAR);
                int months = 1 + c.get(Calendar.MONTH);
                int days = c.get(Calendar.DAY_OF_MONTH);
                int AM_orPM = c.get(Calendar.AM_PM);

                try{
                    if ((c.get(Calendar.AM_PM) == 1) )
                    {
                        String PM = "";
                        if (AM_orPM == 1)
                        {
                            PM = "PM";
                        }
                        populateSetDate2(days, months, years);
                        Cabdate.setText("Refreshed on " + days + "-"
                        + months + "-" + years  + PM);

                    }
                    else if ((c.get(Calendar.AM_PM) == 0) )
                    {
                        String AM = "";
                        if (AM_orPM == 0)
                        {
                            AM = "AM";
                        }
                        populateSetDate2(ddd1, mmm1, ddd1);

                        Cabdate.setText("Refreshed on " + ddd1 + "-"
                        + mmm1 + "-" + yyy1 + AM);

                    }
                }
                catch (Exception e){} 
           /* if(hours1>=hours)
            { 
                hours=hours1+5;

                Toast.makeText(AirlinecabBooking.this, "invalid",Toast.LENGTH_LONG).show();
            }*/

        }

    }; 
```

**日期：**

```
@SuppressLint({ "ValidFragment", "NewApi" })
public class SelectDateFragment2 extends DialogFragment implements
OnDateSetListener {

    @SuppressLint("NewApi")
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) 
    {
        final Calendar calendar = Calendar.getInstance();

        yyy1 = calendar.get(Calendar.YEAR);
        mmm1 = calendar.get(Calendar.MONTH);
         ddd1 = calendar.get(Calendar.DAY_OF_MONTH);
        mmm1= mmm1 + 1;

        Calendar plus10days = Calendar.getInstance();
        plus10days.add(Calendar.DAY_OF_YEAR, 31);
         d = plus10days.get(calendar.DAY_OF_YEAR);
            calendar.get(Calendar.AM_PM);

        int yy = calendar.get(Calendar.YEAR);
        int mm = calendar.get(Calendar.MONTH);
        int dd = calendar.get(Calendar.DAY_OF_MONTH);

        return new DatePickerDialog(getActivity(), this, yy, mm, dd);
    }

    @Override
    public void onDateSet(DatePicker arg0, int yy, int mm, int dd) {
        // TODO Auto-generated method stub

            populateSetDate2(yy, mm + 1, dd);

    }
}

public void populateSetDate2(int year, int month, int day) {

    if (year == yyy1) {

        if ((month >= mmm1) && (year == yyy1)) {

            if( day > ddd1 && day < d )
            {

                Cabdate.setText(day + "/" + month + "/" + year);
                final_date=year+"-"+month+"-"+day;
                System.out.println(final_date);
            }
            else
            {
                Toast.makeText(getApplicationContext(),
                        "Sorry Problem with date. ", Toast.LENGTH_SHORT)
                        .show();
            }

        }

        else if (month >= mmm1 && year == yyy1) 
        {
            Cabdate.setText(day + "/" + month + "/" + year);
            final_date=year+"-"+month+"-"+day;
            System.out.println(final_date);
        }

        else
        {
            Toast.makeText(getApplicationContext(),
                    "Sorry Problem with month. ", Toast.LENGTH_SHORT)
                    .show();
        }

    }
    else
    {
        Toast.makeText(getApplicationContext(),
                "Sorry Problem with year. ", Toast.LENGTH_SHORT).show();

    } 
```

问题是当我选择任何时间格式 am/pm 时，即使我选择未来日期，它也会将日期设置为当前日期。

这`Cabdate`是我的约会`textview`

请帮帮我谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:07:14.397

`Calendar.getInstance();` 返回使用`Calendar`默认时区中的当前时间初始化的实例。您应该使用`setTimeInMillis(long millis)`或`setTime(Date date)`更改`Calendar`实例中的时间。

当你解雇你的 DatePiker

```
int day = datePicker.getDayOfMonth();
int month = datePicker.getMonth();
int year =  datePicker.getYear();

Calendar calendar = Calendar.getInstance();
calendar.set(year, month, day); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:27:20.840

用这个：

```
TimerTask scanTask;
final Handler handler = new Handler();
Timer t = new Timer();
scanTask = new TimerTask() {
    public void run() {
        handler.post(new Runnable() {
            public void run() {
                Calendar c = Calendar.getInstance();
                int seconds = c.get(Calendar.SECOND);
                Date mydate = Calendar.getInstance().getTime();
                SimpleDateFormat formatter = new SimpleDateFormat(
                        "MMM dd yyyy hh:mm:ss a");
                String time = formatter.format(mydate);
                // Toast.makeText(MainActivity.this, time,
                // Toast.LENGTH_SHORT).show();
                // textExpiry.setText(formatter.format(dateTime.getTime()));
                mTextTime.setText(time);

            }
        });
    }
};

t.schedule(scanTask, 1000, 1000); 
```

# error-handling - 用户生成 mzroute.js 错误

> ID：16140800
> 
> 赞同：3
> 
> 时间：2013-04-22T06:33:11.293
> 
> 标签：error-handling

有人知道这是什么

```
 https://srv.mzcdn.com/mzroute.js 
```

用于？谷歌几乎什么也没告诉我，但我的一个用户用这个地址生成了大约 800 条错误消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-10T07:54:19.603

我有类似的问题，我的 Web 应用程序代码已损坏（仅在 Chrome 中），因为某些东西已自动将这两个脚本添加到头中：

```
<script type="text/javascript" async="" src="https://srv.mzcdn.com/mzapp.js"></script>
<script type="text/javascript" async="" src="https://srv.mzcdn.com/scripts/_wildcard.js?384463"></script> 
```

在我的情况下，这是由 chrome 扩展“Facebook 的笑脸栏”添加的，所以你或你的一个用户安装了这个或类似的扩展......绝对卸载这个废话

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:55:15.440

看起来它来自 superfish.com 的浏览器扩展

不确定它是否是恶意的，但要小心

编辑：基于一些新的搜索一些其他扩展产生相同的错误，其中大部分被认为是垃圾软件

# ios - 在 iOS 上实现按钮网格

> ID：16140801
> 
> 赞同：3
> 
> 时间：2013-04-22T06:33:13.987
> 
> 标签：ios, uiview, grid, uicollectionview, calculator

实现类似于下图的按钮布局的最佳方法是什么？

我正在阅读有关创建自定义 UIView 或 UIControl 的内容，但后来我开始认为自定义 UICollectionViewLayout 可能会更好。我需要灵活地使某些按钮占据两个或更多按钮的空间（例如“等号”符号的较大按钮）。

我在想 NSMatrix 会很好用，但它没有在 iOS 中实现。

**我可以就解决此问题的最佳方法获得一些建议吗？**

提前致谢！

![全景软件的 Calc Pro](https://i.stack.imgur.com/6dOui.jpg) ![Cider Software 的 Calculator HD Pro 1.7](https://i.stack.imgur.com/2MpzV.png) ![Cider Software 的 Calculator HD Pro 1.7](https://i.stack.imgur.com/THocj.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:44:10.120

如果您愿意仅支持 iOS 6 及更高版本，则可以使用 UICollectionView。否则有许多自定义网格视图的实现，如[AQGridView](https://github.com/AlanQuatermain/AQGridView)。或者试试[这些](https://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=grid)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:51:42.670

你可以使用对gridview非常有用的UICollectionView。所以我给你一个链接，所以请阅读n实现它。

1.  [http://www.cnblogs.com/simonshi2012/archive/2012/10/08/2715136.html](http://www.cnblogs.com/simonshi2012/archive/2012/10/08/2715136.html)
2.  [http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12](http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12)
3.  [https://github.com/AshFurrow/UICollectionViewExample](https://github.com/AshFurrow/UICollectionViewExample)

# linux - recv 带有标志 MSG_DONTWAIT | TCP 套接字上的 MSG_PEEK

> ID：16140802
> 
> 赞同：0
> 
> 时间：2013-04-22T06:33:27.040
> 
> 标签：linux, sockets, network-programming, linux-kernel

我有一个用于交换消息的 TCP 流连接。这是在 Linux 内核内部。消费者线程不断处理传入的消息。消费一条消息后，我想检查是否还有更多未决消息；在这种情况下，我也会处理它们。我实现这一点的代码如下所示。krecv 是 sock_recvmsg() 的包装器，无需修改即可传递标志值（来自[ksocket 内核](http://ksocket.sourceforge.net/)模块的 krecv）

使用 MSG_DONTWAIT，我希望它不会阻塞，但显然它会阻塞。使用 MSG_PEEK，如果没有要读取的数据，它应该只返回零。这种理解正确吗？有没有更好的方法来实现我在这里需要的东西？我猜这应该是一个常见的要求，因为经常使用跨节点传递的消息。

```
int recvd = 0;

do {
            recvd   += krecv(*sockp, (uchar*)msg + recvd, sizeof(my_msg) - recvd, 0); 
            printk("recvd = %d / %lu\n", recvd, sizeof(my_msg));
} while(recvd < sizeof(my_msg));
BUG_ON(recvd != sizeof(my_msg));

/* For some reason, below line _blocks_ even with no blocking flags */
recvd = krecv(*sockp, (uchar*)tempbuf, sizeof(tempbuf), MSG_PEEK | MSG_DONTWAIT);
if (recvd) {
            printk("more data waiting to be read");
            more_to_process = true;
} else {
            printk("NO more data waiting to be read");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-31T01:22:07.380

您可以先检查缓冲区的长度：

```
int bytesAv = 0;
ioctl(m_Socket,FIONREAD,&bytesAv); //m_Socket is the socket client's fd 
```

如果里面有数据，那么带有MSG_PEEK的recv不应该被阻塞，如果根本没有数据，那么不需要MSG_PEEK，这可能是你喜欢做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-30T05:32:16.350

这是一个非常古老的问题，但是
1\. 问题仍然存在
2\. 我遇到了它。

至少对我来说（Ubuntu 19.04 和 python 2.7）这个 MSG_DONTWAIT 没有效果，但是如果我将超时设置为零（使用 settimeout 函数），它工作得很好。
这可以在 c 中使用 setsockopt 函数完成。

# mysql - 定义一个“伪”列，它是用于选择的 char 列的 substring()

> ID：16140803
> 
> 赞同：0
> 
> 时间：2013-04-22T06:33:27.397
> 
> 标签：mysql, sql, postgresql

使用 Postgres 和/或 Mysql（最新），我在表中有一个列，它是一个唯一键，是一个 char 列，包括例如。日期（8），分支（6），收银员（6），操作员（6），序列（6），冲销（1）。这些都是数值。我这样做是因为我认为 Inserts 比使用这些字段的单独列创建复合唯一键更有效。

我的主要问题是是否可以将一种伪列定义为 substring() 以允许仅使用列名进行选择来定义例如。“操作员”？

另一种方法是在 select 语句中使用 substring() ，这对于临时查询来说有点麻烦。

如果复合唯一键同样有效（对于插入），我可以使用它。

该表的容量非常大，但仅适用于插入和选择。选择将主要在主键上，主键由帐号 (int) 和交易号 (int) 组成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:18:54.727

{branch, cashier, operator} 三元组看起来很可疑，可能违反 BCNF 。*出于性能原因*，我认为您应该首先对数据模型进行规范化，然后再对其进行非规范化。

{date, branch, sequence} 对我来说看起来像是一个自然的 PK（不过，三分之二是保留字）

发布为答案（对不起，我还不能评论）

# ios - 在底部的 UIActionSheet 中放置取消按钮

> ID：16140805
> 
> 赞同：5
> 
> 时间：2013-04-22T06:33:34.413
> 
> 标签：ios, cocoa-touch, uiactionsheet

在 UIActionSheet 我有一个 uitableview 和取消按钮。默认情况下，取消按钮出现在顶部。我想让它出现在 tableview 之后的底部。我怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-29T16:19:55.160

这对我有用：

```
UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"SomeTitle" delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil, nil];
[actionSheet addButtonWithTitle:@"Some Action"];        
[actionSheet addButtonWithTitle:@"Cancel"];
actionSheet.cancelButtonIndex = actionSheet.numberOfButtons -1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:51:01.010

我试过了，取消按钮在底部：

```
menu = [[UIActionSheet alloc] initWithTitle:@"Actionsheet"
                                                  delegate:self
                                         cancelButtonTitle:@"Cancel"
                                    destructiveButtonTitle:@"destructive"
                                         otherButtonTitles:@"other1", nil];
menu.actionSheetStyle = UIActionSheetStyleDefault;
[menu addButtonWithTitle:@"Cancel"]; 
```

默认情况下，取消[按钮是隐藏](https://stackoverflow.com/questions/2760545/action-sheet-doesnt-show-cancel-button-on-ipad)的，添加取消将显示它。

**但是：**如果您的操作表上有其他 gui 元素，则必须

**option1）**定位那些隐藏其他按钮（为您的gui元素留出空间）。它是一个调整，但可以在某些情况下工作或

**选项2）**您必须手动将按钮添加到操作表

Actionsheet 的内置按钮不能自由对齐到底部，因为此内置 gui 元素的用途不同。

请参阅：[将 UIPickerView 添加到 UIActionSheet（底部的按钮）](https://stackoverflow.com/questions/16122487/adding-uipickerview-to-uiactionsheet-buttons-at-the-bottom/16140387#16140387)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-12T19:39:45.680

**斯威夫特**的例子：

```
func presentMyActionSheetIOS7() {
    let actionSheet: UIActionSheet = UIActionSheet(title: "What do you want to do?", delegate: self, cancelButtonTitle: nil, destructiveButtonTitle: nil)

    actionSheet.addButtonWithTitle("Change Transparency")
    actionSheet.addButtonWithTitle("Hide Photo")
    actionSheet.addButtonWithTitle("Cancel")
    actionSheet.cancelButtonIndex = actionSheet.numberOfButtons - 1

    actionSheet.showInView(self.view)
}

func actionSheet(actionSheet: UIActionSheet, clickedButtonAtIndex buttonIndex: Int) {
    switch buttonIndex {
        case 0:
            println("Change Transparency")
        case 1:
            println("Hide Photo")
        case 2:
            println("Cancel")
        default:
            println("Default")
    }
} 
```

# php - 在 codeigniter 中选择数据库 - 现在无法选择数据库

> ID：16140807
> 
> 赞同：4
> 
> 时间：2013-04-22T06:33:45.033
> 
> 标签：php, codeigniter

我试图重命名我的数据库（我正在使用 hostmonster），现在我的页面上没有加载任何内容。我似乎在这方面的任何地方都找不到任何文档。我将数据库重命名为原来的样子，但我仍然收到同样的错误，现在我的页面上没有加载任何内容。我正在使用 codeigniter（正如标题所暗示的那样）。以下错误是：

```
A Database Error Occurred

Unable to select the specified database: xxxxx

Filename: core/Loader.php

Line Number: 346 
```

我去这个文件，那里没有任何相关性：

```
// Load the DB class
$CI->db =& DB($params, $active_record); 
```

我现在必须将我的文件完全重新安装到服务器吗？这是 database.php 的样子...

```
$active_group = 'main';
$active_record = TRUE;

$db['main']['hostname'] = 'localhost';
$db['main']['username'] = 'xxxx';
$db['main']['password'] = 'xxxx';
$db['main']['database'] = 'xxxx';
$db['main']['dbdriver'] = 'mysql';
$db['main']['dbprefix'] = '';
$db['main']['pconnect'] = TRUE;
$db['main']['db_debug'] = TRUE;
$db['main']['cache_on'] = FALSE;
$db['main']['cachedir'] = '';
$db['main']['char_set'] = 'utf8';
$db['main']['dbcollat'] = 'utf8_general_ci';
$db['main']['swap_pre'] = '';
$db['main']['autoinit'] = TRUE;
$db['main']['stricton'] = FALSE; 
```

显然，我并没有真正使用（xxxx）的......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-04T11:31:49.450

在您的**控制面板**中，转到 MySQL 数据库

![Common Cpanel 上显示的数据库](https://i.stack.imgur.com/IX09G.jpg)

我假设你已经创建了一个用户，现在**你错过了**什么......是你**没有将**用户添加到数据库中

![在此处输入图像描述](https://i.stack.imgur.com/3t5b7.jpg)

添加后，确认必要的权限，然后你就可以走了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-26T12:35:39.380

设置`$db['default']['pconnect'] = FALSE;`。这里**mysql_pconnect()**被禁用，所以我们使用**mysql_connect()**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T06:36:43.470

**打开应用程序->配置->数据库.php**

并设置配置变量

```
$db['default']['database'] = 'new name'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-26T18:46:25.397

使用命令提示符/终端，从您的 mysql bin 文件夹中键入以下内容：

> mysql -u USER -h localhost -p 密码数据库名

看看这是否会给您带来任何问题（密码错误、数据库名称错误等）。确保使用配置中的相同文本（复制/粘贴）。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2016-09-28T09:48:37.083

我在CPanel下遇到了同样的问题。

它有助于设置：

```
$db['main']['db_debug'] = FALSE; 
```

# iphone - [__NSCFConstantString productIdentifier]：无法识别的选择器发送到实例 0x1ac04'

> ID：16140815
> 
> 赞同：0
> 
> 时间：2013-04-22T06:34:48.437
> 
> 标签：iphone, ios, in-app-purchase, app-store-connect

我使用测试用户帐户来测试我的应用内购买应用程序。我使用了产品名称，例如`#define PRODUCT_IDENTIFIER @"com.companyname.appname.P1"`当我在模拟器中运行我的应用程序时，我在日志中得到以下信息：

是的，你可以付款2013-04-22 11:37:44.809 appname[2382:c07] -[__NSCFConstantString productIdentifier]：无法识别的选择器发送到实例 0x1ac04

代码：

```
 -(void)checkForPayments{
        if ([SKPaymentQueue canMakePayments])
        {
            printf("\n YES u can make payments");
   //   SKPayment *myPayment = [SKPayment paymentWithProductIdentifier:PRODUCT_IDENTIFIER];
        SKPayment *myPayment = [SKPayment paymentWithProduct:PRODUCT_IDENTIFIER];
      [[SKPaymentQueue defaultQueue] addPayment:myPayment];
    [[SKPaymentQueue defaultQueue] addTransactionObserver:self];              
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T06:39:41.153

```
 1\. SKPayment *myPayment = [SKPayment paymentWithProductIdentifier:PRODUCT_IDENTIFIER]; // CORRECT
   2\. SKPayment *myPayment = [SKPayment paymentWithProduct:PRODUCT_IDENTIFIER]; //WRONG 
```

1.  正确，因为您传递的是 NSString 的 PRODUCT_IDENTIFIER，它需要 NSString

2.  是错误的，因为您传递的参数是 NSString，因为它`SKProduct`不需要`NSString`..

要使用`SKProduct`您需要首先使用`SKProductRequest`以下产品

```
SKProductsRequest *req = [[SKProductsRequest alloc] initWithProductIdentifiers:[NSSet setWithObject:PRODUCT_IDENTIFIER]];
req.delegate = self;
[req start]; 
```

然后在`Delegate`你`SKProductRequest`必须做以下

```
- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response{

      for(SKProduct *product in response.products){
            SKPayment *myPayment = [SKPayment paymentWithProduct:product];
      } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:40:09.303

嘿，您正在将 NSString 传递给一个接受其他类型对象的函数。这就是你得到的原因

```
-[__NSCFConstantString productIdentifier]: unrecognized selector sent to instance 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T06:40:11.707

检查您在 iTunes 上创建的 inApp id 是否与您在应用中定义的 inApp id 匹配。并确保您将 inApp 与您在 iTunes 中的应用相关联。

# java - 如何在方法“y”失败时调用方法“x”？

> ID：16140821
> 
> 赞同：-2
> 
> 时间：2013-04-22T06:35:12.570
> 
> 标签：java

如果方法 y 失败，我想运行方法 x。例如

```
public void createzoo (){

create.chimp();
if 
activateByMail.chimp() fails 
run 
activateByAdmin.chimp()

delete.chimp();

} 
```

如果我可以使用布尔值来实现这一点，那就太好了。我在 ubuntu 上用 java 写脚本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:39:53.020

从 chimp() 函数返回布尔值，它出了问题。并检查

```
 if(!activateByMail.chimp())
   activateByAdmin.chimp(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:38:33.557

你可以通过这两种方式做到这一点，

1.将method1的返回类型设为boolean，失败返回false，否则返回true。

```
 boolean method1(){
    if(succeed)
        return true;
    else 
        return false;
    } 
```

//像这样使用它：

```
if(!method1()) method2(); 
```

2\. 如果您在该方法中已经有返回值，请在方法 1 中抛出一些异常，并在调用中捕获它。并在 catch 块中调用方法 2。

```
 void method1(){
    if(!succeeed) throw new FailException();
    } 
```

像这样使用它

```
 try{
    method1();
    } catch(FailException ex){
    method2();
    } 
```

# jquery - 悬停 div 时显示 1px 间隙（在 IE8 中）

> ID：16140827
> 
> 赞同：1
> 
> 时间：2013-04-22T06:35:28.000
> 
> 标签：jquery, html, css

下图显示了问题：

![在此处输入图像描述](https://i.stack.imgur.com/lVo6N.gif)

在其他浏览器中工作，但由于某种原因，IE8`hover`在我的浏览器中显示 1 个间隙`div.ImageWrap`

有人可以知道为什么 IE 会这样。

[小提琴](http://jsfiddle.net/jhunlio/6TJKf/)
[JS Bin](http://jsbin.com/ifoquv/2/edit)

html:

```
<table border="0" cellpadding="0" cellspacing="0">
        <tr>
          <td class="first"><div class="imageWrap"></div></td>
          <td class="first"><div class="imageWrap"></div></td>
          <td class="first"><div class="imageWrap"></div></td>
          <td class="first"><div class="imageWrap"></div></td>
          <td class="first"><div class="imageWrap"></div></td>
          <td class="first"><div class="imageWrap"></div></td>
          <td class="first"><div class="imageWrap"></div></td>
        </tr>
      </table> 
```

CSS：

```
table {
  float:left;
  width:100%
}
table td.first {
  width:14%;
}
table td .imageWrap{
  border:1px solid red;
  height:100px;
  margin:0;
  padding:0;
  background-color:#000;
} 
```

js：

```
$('.imageWrap').hover(function() {
          $('.imageWrap').not($(this)).stop().animate({
              opacity: .3
          }, 500);
      }, function() {
          $('.imageWrap').stop().animate({
              opacity: 1
          });
      }, 250); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:57:01.833

尝试使用

```
table
{
  border-collapse:collapse;
} 
```

# c++ - 客户是否需要在他们的机器上安装 OpenCv 才能运行 C++ DLL（使用过的 Opencv 库）？

> ID：16140829
> 
> 赞同：-4
> 
> 时间：2013-04-22T06:35:43.813
> 
> 标签：c++, opencv, dll

如何分别制作一个DLL where声明和实现部分。

解释：

在 DLL 中

我已经在我的机器上安装了 Opencv，我需要创建一个 DLL，客户端可以在他们的新机器上访问我的 DLL（没有安装 OpenCV）。如何构建这样的DLL

我创建了 dll，但是当我在另一台机器上运行时，它要求提供 Opencv 头文件？如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:37:40.707

当我使用 DLL 时，还需要包含这些 DLL 的头文件。您将向您的客户提供标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:23:03.263

要在另一个系统中运行 OpenCV 包含的 app(exe)（未安装 openCV），只需从“C:\OpenCV2.1\bin”或 opencv 安装目录中的 bin 文件夹复制“dll”文件（仅 dll）并粘贴它们与您的 exe 目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T06:45:09.717

我认为您要做的是编译 OpenCV 和您的静态链接程序。基本上，它的作用是，不是将新编译的 DLL 链接到 OpenCV DLL，而是链接到 OpenCV 库的 .obj 文件。这种方法的问题是你必须为你想要支持的每个平台单独编译它。可以在[此处](http://www.shiffman.net/2011/01/23/how-to-build-opencv-static-libraries-mac-os-x/)找到一些帮助您入门的示例说明。它适用于 Mac，但它介绍了与任何其他平台都有些相似的基本过程。

# sockets - SCSI 之上的套接字 API？

> ID：16140830
> 
> 赞同：0
> 
> 时间：2013-04-22T06:35:55.410
> 
> 标签：sockets, protocols, network-protocols, tcp-ip, scsi

是否有任何现有软件可以在不同的传输上执行通常的套接字 API？我现在对 SCSI 特别感兴趣，但是知道是否有其他传输可用的东西也很好。它需要在连接的两边都有一些东西，在 SCSI 的情况下，一个在下面使用 SCSI 的仿真层和一些目标端软件也是如此。

至于我为什么需要这个，我需要支持一个使用套接字在 FC 上工作的现有应用程序，而 SCSI 在这方面非常适合。IP over FC 早就死了。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:44:28.937

RFC 的编号为[2143](https://www.rfc-editor.org/rfc/rfc2143)。

[这](http://www.linuxjournal.com/article/2344)是 Linux Journal 上的一篇文章，由[RFC 2143](https://www.rfc-editor.org/rfc/rfc2143)的作者Ben Elliston 撰写。

它不是在 SCSI 之上描述一个单独的套接字 API（例如 UNIX 套接字与 TCP/IP 套接字是分开的），而是关于在 SCSI 上实现 TCP/IP。

早在 2001 年，这是[为 Linux 实现的](http://ipoverscsi.sourceforge.net/)。

# algorithm - 如何从一组线中找到包围一个点的多边形？

> ID：16140831
> 
> 赞同：5
> 
> 时间：2013-04-22T06:36:00.170
> 
> 标签：algorithm, geometry, computational-geometry, planar-graph

我有一组不相交的线，其中一些在顶点处连接。我试图找到包含给定点的最小多边形（如果存在）。所以，在下图中，在所有线段的列表中，给定红色的点，我只想得到蓝色的点。我正在使用 Python，但可能会采用其他语言的算法；我不知道这个问题叫什么。

![例子](https://i.stack.imgur.com/EsQ0e.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T10:17:14.953

首先，删除所有具有至少一个自由端点且与任何其他线段不重合的线段。重复这样做，直到没有这样的段。

现在你有一个很好地细分为多边形区域的平面。

找到最接近您的点的段。请注意，不是最近的端点，而是最近的段。找出您需要沿线段的哪个方向（您的点应该在有向线段的右侧）。走到终点，右转（也就是走你来的路旁边的路段，逆时针计数）。继续前往下一个端点并右转，直到再次到达最近的路段。

然后，检查多边形是否包含给定点。如果不是，那么你找到了一个“岛”；删除该多边形及其所属的整个连接组件，然后通过再次选择最近的线段重新开始。可以通过简单的 DFS 找到连接的组件。

这为您提供了一个顺时针方向的多边形。如果你想要逆时针，这通常是软件和文献中默认的“正”方向，从你左边的点开始，然后在每个路口左转。

如果给定一个端点，您可以快速找到与它相关的所有片段，这肯定会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-14T21:11:28.193

这实际上只是@nm 答案的一个实现。这是我在赏金到期前走了多远；它完全未经测试。

```
def smallestPolygon(point,segments):
    """
    :param point: the point (x,y) to surrond
    :param segments: the line segments ( ( (a,b),(c,d) ) , . . . )
    that will make the polygon
    (assume no duplicates and no intersections)
    :returns: the segments forming the smallest polygon containing the point
    """
    connected = list(segments)

    def endPointMatches(segment1,segment2):
        """
        Which endpoints of segment1 are in segment2 (with (F,F) if they're equal)
        """
        if ( segment1 == segment2 or segment1 == segment2[::-1] ):
            return ( False, False )
        return ( segment1[0] in segment2 , segment1[1] in segment2 )

    keepPruning = True
    while ( keepPruning ):
        keepPruning = False
        for segment in connected:
            from functors import partial
            endPointMatcher = partial(endPointMatches,segment1=segment)
            endPointMatchings = map(endPointMatcher,connected)
            if ( not and(*map(any,zip(*endPointMatchings))) ):
                connected.remove(segment)
                keepPruning = True

    def xOfIntersection(seg,y):
        """
        :param seg: a line segment ( (x0,y0), (x1,y1) )
        :param y: a y-coordinate
        :returns: the x coordinate so that (x,y) is on the line through the segment
        """
        return seg[0][0]+(y-seg[0][1])*(seg[1][0]-seg[0][0])/(seg[1][1]-seg[0][1])

    def aboveAndBelow(segment):
        return ( segment[0][1] <= point[1] ) != ( segment[1][1] <= point[1] )

    # look for first segment to the right
    closest = None
    smallestDist = float("inf")
    for segment in filter(aboveAndBelow,connected):
        dist = xOfIntersection(segment,point[1])-point[0]
        if ( dist >= 0 and dist < smallestDist ):
            smallestDist = dist
            closest = segment

    # From the bottom of closest:
    # Go to the other end, look at the starting point, turn right until
    # we hit the next segment.  Take that, and repeat until we're back at closest.
    # If there are an even number of segments directly to the right of point[0],
    # then point is not in the polygon we just found, and we need to delete that
    # connected component and start over
    # If there are an odd number, then point is in the polygon we found, and we
    # return the polygon 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T04:05:46.457

如果您使用相同的线和不同的点多次执行此操作，则值得进行预处理以找出所有多边形。然后很简单：从点到无穷大画一条线（从概念上讲）。每次越过一条线时，增加该线所属的每个多边形的交叉计数。最后，第一个具有奇数交叉计数的多边形是最小的封闭多边形。由于任何任意线都将与任何其他线一样好（它甚至不需要是直的），通过绘制垂直或水平线来简化算术，但要注意交叉实际端点。

您可以通过在穿过每条线时创建多边形来执行此操作而无需预处理。这基本上简化为 nm 的算法，但没有所有特殊情况检查。

请注意，一条线可以属于两个多边形。事实上，它可能属于更多，但我不清楚你会如何说：考虑以下内容：

```
+---------------------------+
|                           |
|   +-------------------+   |
|   |                   |   |
|   |   +-----------+   |   |
|   |   |           |   |   |
|   |   |           |   |   |
+---+---+-----------+---+---+ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-02T19:01:45.347

**方法。** 我建议将输入解释为[PSLG](https://en.wikipedia.org/wiki/Planar_straight-line_graph)， G ，它由顶点和边组成。然后你的问题就简化为找到被点 p 击中的 G 的面。这是通过从 p 向某个方向发射光线来找到面部边界的边缘并沿某个方向穿过面部边界来完成的。然而，第一个边缘命中可能是一个未被 p 命中的面，但它本身被 p 命中的面包围。因此，我们可能需要继续沿着 p 发出的射线进行搜索。

**实施细节。** 在下面的代码中，我向东方向射出一条光线并以顺时针方向绕着脸部运行，即在每个顶点处我取下一个逆时针边，直到我再次到达第一个顶点。结果面作为 G 的顶点序列返回。

如果你想返回一个[简单的多边形](https://en.wikipedia.org/wiki/Simple_polygon)，那么你必须通过修剪 G 中的树来清理输入图 G，以便只保留简单的面。

```
def find_smallest_enclosing_polygon(G, p, simple=False):
  """Find face of PSLG G hit by point p. If simple is True
     then the face forms a simple polygon, i.e., "trees"
     attached to vertices are pruned."""

  if simple:
    # Make G comprise simple faces only, i.e., all vertices
    # have degree >= 2.
    done = False
    while not done:
      done = True
      for v in [v in vertices if degree(v) <= 1]:
        # Remove vertex v and all incident edges
        G.remove(v)
        done = False

  # Shoot a ray from p to the east direction and get all edges.      
  ray = Ray(p, Vector(1, 0))
  for e in G.iter_edges_hit(ray):

    # There is no enclosing face; p is in the outer face of G
    if e is None:
      return None

    # Let oriented edge (u, v) point clockwise around the face enclosing p
    u, v = G.get_vertices(e)
    if u.y < v.y
       u, v = v, u

    # Construct the enclosing face in clockwise direction
    face = [u, v]
    # While not closed
    while face[-1] != face[0]:
      # Get next counter-clockwise edge at last vertex at last edge.
      # If face[-1] is of degree 1 then I assume to get e again.
      e = G.get_next_ccw_edge(face[-2], face[-1])
      face.append(G.get_opposite_vertex(e, face[-1]))

    # Check whether face encloses p.
    if contains(face, p):
       return face

  return None 
```

**复杂。** 让 n 表示顶点的数量。请注意，在 PSLG 中，边数为 O(n)。修剪部分可能需要 O(n^2) 时间，就像上面实现的那样。但是通过识别度数为 1 的顶点并继续从这些顶点遍历，它可能是 O(n) 时间内的一个。

光线相交例程可以在 O(n) 时间内轻松实现。构建面部需要 O(m) 时间，其中 m 是构建的多边形的大小。我们可能需要测试多个多边形，但所有多边形的大小总和仍然在 O(n) 中。测试 contains(face, p) 可以通过检查 face 是否包含 G.iter_edges_hit(ray) 返回的奇数个边来完成，即在 O(m) 时间内。

通过一些预处理，您可以建立一个数据结构，通过计算几何中的经典[点定位](https://en.wikipedia.org/wiki/Point_location#Planar_case)算法在 O(log n) 时间内找到被 p 击中的人脸，并且您可以预先存储生成的多边形，用于简单和/或非简单案例。

# web-services - 通过 REST Web 服务在 Openbravo 社区版本中进行身份验证和授权

> ID：16140832
> 
> 赞同：2
> 
> 时间：2013-04-22T06:36:06.177
> 
> 标签：web-services, rest, authentication, authorization, openbravo

我无法找到一种 REST Web 服务方式来进行身份验证（登录）并了解他的角色（授权）。虽然，[Openbravo wiki](http://wiki.openbravo.com/wiki/ERP_2.50%3aDevelopers_Guide/Concepts/XML_REST_Web_Services#Login_and_Security) 说有一种登录方式，但没有提供有关其 URL 等的任何其他详细信息。有人可以在这方面提供帮助吗？谢谢

**编辑**
我也在[Openbravo 论坛](http://forums.openbravo.com/viewtopic.php?f=549512&t=7033357&p=7038550&sid=45b047b6abfd25e4924398862f2637a1#p7038550)上发布了这个问题。希望这对其他人有益。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-22T19:25:55.677

REST Web 服务提供了两种登录方法：

*   使用作为请求参数传递的登录名/密码登录（参数名称分别为 l 和 p）
*   基本http认证

如果您使用第一个选项并发出 get 请求，则会将参数添加到 url，例如：

```
http://server/openbravo/ws/dal/Country?l=user&p=password 
```

如果您发出 post 请求，则参数将作为请求的正文发送。[以下](https://stackoverflow.com/questions/4205980/java-sending-http-parameters-via-post-method-easily)是java中的方法。

要使用基本的 http 身份验证，您必须设置 Authorization 标头并将凭据设置为字符串“user:password”。[这里](https://stackoverflow.com/questions/12732422/adding-header-for-httpurlconnection)是如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:33:19.617

基本上，openbravo 默认带有两种不同的身份验证。

1.  DefaultAuthenticationManager
2.  自动登录身份验证管理器

这两个类都扩展了抽象类 AuthenticationManager。这意味着 Openbravo 在这里为自定义身份验证管理器提供了可扩展性。

至于 Web 服务身份验证，**`webServiceAuthenticate`**内部调用了一个方法**`AuthenticationManager`** ，用于对 REST Web 服务进行身份验证。[**您可以在此处**](http://code.openbravo.com/docs/erp/devel/pi/org/openbravo/authentication/AuthenticationManager.html#webServiceAuthenticate%28java.lang.String,%20java.lang.String%29)查看文档[](http://code.openbravo.com/docs/erp/devel/pi/org/openbravo/authentication/AuthenticationManager.html#webServiceAuthenticate%28java.lang.String,%20java.lang.String%29)

# c++ - 内置函数来比较 C++ 中的字符串？

> ID：16140835
> 
> 赞同：-6
> 
> 时间：2013-04-22T06:36:13.960
> 
> 标签：c++, function, built-in

我需要一些内置函数来比较`string`s。对于 C 风格的字符串，我有

```
strcmp(); 
```

但是我需要一些函数来处理这个`string`类。

```
string name1;
string name2; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T06:37:25.333

您正在寻找[相等运算符**`operator==()`**](http://en.cppreference.com/w/cpp/string/basic_string/operator_cmp)，它是为 定义的[`std::basic_string`](http://en.cppreference.com/w/cpp/string/basic_string)：

```
if (name1 == name2) 
```

其他比较运算符也可用，即`!=`、`<`、`<=`和。`>``>=`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:42:46.327

您*可以*使用[`std::string::compare()`](http://en.cppreference.com/w/cpp/string/basic_string/compare)which 提供与`strcmp()`.

```
std::string name1 = "John";
std::string name2 = "Micheal";

int result = name1.compare(name2); 
```

大致与以下内容相同：

```
const char* name1 = "John";
const char* name2 = "Micheal";

int result = std::strcmp(name1, name2); 
```

# c# - 在运行时创建、拖放和调整控件大小

> ID：16140836
> 
> 赞同：2
> 
> 时间：2013-04-22T06:36:28.677
> 
> 标签：c#, winforms, visual-studio-2010, drag-and-drop, resize

我正在尝试创建一个表单，其中包含以编程方式创建的面板和能够拖放和调整大小的控件，就像 Microsoft Visual Studio IDE 一样。

我创造了这样的东西。应该有这么多的线（蓝色的）和这么多的盒子（黄色的），我可以在蓝线内移动黄色的盒子。一切都可以在设计时使用定义的控件。

![在此处输入图像描述](https://i.stack.imgur.com/fiPSg.png)

和这里的源代码

```
 public partial class Form1 : Form
{
    bool allowResize = false;
    public Form1()
    {
        InitializeComponent();           

        panel1.AllowDrop = true;
        panel2.AllowDrop = true;
        panel3.AllowDrop = true; 
        panel4.AllowDrop = true;

        panel1.DragEnter += panel_DragEnter;
        panel2.DragEnter += panel_DragEnter;
        panel3.DragEnter += panel_DragEnter;
        panel4.DragEnter += panel_DragEnter;

        panel1.DragDrop += panel_DragDrop;
        panel2.DragDrop += panel_DragDrop;
        panel3.DragDrop += panel_DragDrop;
        panel4.DragDrop += panel_DragDrop;

        panelMove.MouseDown += panelMove_MouseDown;        

    }

    void panelMove_MouseDown(object sender, MouseEventArgs e)
    {
        panelMove.DoDragDrop(panelMove, DragDropEffects.Move);
    }

    void panel_DragEnter(object sender, DragEventArgs e)
    {
        e.Effect = DragDropEffects.Move;
    }

    void panel_DragDrop(object sender, DragEventArgs e)
    {
        ((Panel)e.Data.GetData(typeof(Panel))).Parent = (Panel)sender;
    }

    private void pictureBox1_MouseDown(object sender, MouseEventArgs e)
    {
        allowResize = true;
    }

    private void pictureBox1_MouseUp(object sender, MouseEventArgs e)
    {
        allowResize = false;
    }

    private void pictureBox1_MouseMove(object sender, MouseEventArgs e)
    {
        if (allowResize)
        {
            this.panelMove.Height = pictureBox1.Top + e.Y;
            this.panelMove.Width = pictureBox1.Left + e.X;
        }
    }       
} 
```

但我不知道如何在运行时创建这些控件（蓝色和黄色框）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:46:45.093

您应该检查[`Anchor`](http://msdn.microsoft.com/en-IN/library/system.windows.forms.control.anchor.aspx). `Control`Anchor 允许控件在运行时自动调整大小。

> 使用 Anchor 属性可以定义控件在调整其父控件大小时如何自动调整大小。将控件锚定到其父控件可确保在调整父控件大小时，锚定边缘相对于父控件的边缘保持在相同位置。
> 
> 您可以将控件锚定到其容器的一个或多个边缘。例如，如果您有一个带有 Anchor 属性值设置为 Top 和 Bottom 的 Button 的 Form，当 Form 的高度增加时，Button 会被拉伸以保持到 Form 的顶部和底部边缘的锚定距离。

MSDN：[`Control.Anchor`](http://msdn.microsoft.com/en-IN/library/system.windows.forms.control.anchor.aspx)

# design-patterns - 更多分层会完成这项工作吗？

> ID：16140838
> 
> 赞同：0
> 
> 时间：2013-04-22T06:36:37.303
> 
> 标签：design-patterns, architecture, dependency-injection

考虑有一个非常复杂的业务需求，在启动操作时需要执行几个业务逻辑步骤。例如，当用户提交请求时，需要执行的步骤是：

*   验证数据
    *   验证请求是否已经存在
    *   验证用户是否存在
    *   验证用户是否有足够的财务金额来提交请求
    *   验证用户是否可以立即发布请求
    *   验证是否有请求的项目
    *   验证请求的项目是否有效
    *   验证项目没有负金额
    *   ...（进一步验证）
*   将数据存储到存储库
*   向用户或相关方发送电子邮件
*   ...（也许还有其他步骤要做）

上面的例子可能离真正的业务需求还很远，但考虑到它是，那么我想这个操作将有大约 10 多个服务。

在使用构造函数依赖时，拥有 10 个以上的构造函数应该是一件坏事，所以我认为重构它就可以了。重构设计的一些说明：

```
ISubmitter(IValidator, IRequestRepository, INotification)
IValidator(IRequestValidator, IItemValidator)
IRequestValidator(IRequestRepository, IUserValidator, IItemExistValidator)
IUserValidator(IUserRepository, IUserFinancialValidator, IUserPublisherValidator)
IItemValidator(IItemRepository, IItemAmountValidator)
... // maybe more 
```

项目金额验证流程从提交者做了4层：ISubmitter->IValidator->IItemValidator->ItemAmountValidator。

我知道就关注点分离而言，我可以轻松获得所需的正确实现（例如：ItemAmountValidation）。但是在调试代码方面，跟踪它使用哪个验证类会不会变得更加困难？由于构造函数注入是在实现中定义而不是在接口中？

考虑最坏的情况，当调试器不是开发人员时，只有最低限度的测试场景，根本没有文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:12:36.077

你说的逻辑属于不同的层，但是需要注入到你的应用层。我要做的是注入执行任务所需的组件，例如执行请求的命令处理程序；一个负责验证输入的验证器，一个处理数据逻辑的存储库，以及一个发送邮件的 Mailer 组件（或服务）。

这一切都是为了将​​职责放在正确的组件中。构造函数注入是一个很好的选择，它在灵活性、可测试性方面为您提供了许多优势，并且使您的代码易于理解。

就调试而言，我不认为您必须做的更多努力应该成为不以模块化方式构建代码的理由。只需设置正确的断点就可以了。

也许[http://tinyurl.com/d99w8rl](http://tinyurl.com/d99w8rl)可以给你更多的洞察力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:59:59.900

> 但是在调试代码方面，跟踪它使用哪个验证类会不会变得更加困难？由于构造函数注入是在实现中定义而不是在接口中？

是的，它可能会让你在调试时不得不跳过更多的类。但是，这种设计允许测试您的代码（当然使用 TDD），并且在练习 TDD 时，您将不得不比以前少得多的调试代码。

# pkg-config - pkg-config --version 总是给出 0.26

> ID：16140847
> 
> 赞同：1
> 
> 时间：2013-04-22T06:36:59.740
> 
> 标签：pkg-config

因此，正在阅读有关 pkg-config 的信息（我认为它默认包含在我正在使用的 Debian 上）。但是每次我试图找到某个东西的版本时，它都会给我 0.26。

```
santeyio@Amadeus:/$ pkg-config --version python
0.26
santeyio@Amadeus:/$ pkg-config --version libre-office
0.26
santeyio@Amadeus:/$ pkg-config --version alsdkfj
0.26
santeyio@Amadeus:/$ pkg-config --version firefox
0.26
santeyio@Amadeus:/$ 
```

所以，我尝试 sudo apt-get 删除它，然后再次安装它。但我得到相同的结果。我知道我在这里遗漏了一些愚蠢的东西......谁能指出我正确的方向？

这是我重新安装的输出，如果有帮助的话......

```
santeyio@Amadeus:/$ sudo apt-get install pkg-config
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following packages were automatically installed and are no longer required:
calligra-l10n-engb cdparanoia comerr-dev k3b k3b-data k3b-i18n kdevelop-php-docs-l10n
kdevelop-php-l10n krb5-multidev language-pack-kde-en libasprintf0c2:i386 libcroco3:i386
libgcrypt11-dev libgnutls-dev libgnutls-openssl27 libgnutlsxx27 libgomp1:i386 libgpg-error-dev
libgssrpc4 libk3b6 libkadm5clnt-mit8 libkadm5srv-mit8 libkcddb4 libkdb5-6 libkrb5-dev libldap2-dev
libp11-kit-dev librtmp-dev libtasn1-3-dev linux-headers-3.5.0-17 postgresql-client-9.2
postgresql-common python-xkit screen-resolution-extra
Use 'apt-get autoremove' to remove them.
The following NEW packages will be installed:
pkg-config
0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.
Need to get 41.3 kB of archives.
After this operation, 136 kB of additional disk space will be used.
Get:1 http://us.archive.ubuntu.com/ubuntu/ quantal/main pkg-config amd64 0.26-1ubuntu2 [41.3 kB]
Fetched 41.3 kB in 0s (66.2 kB/s)   
Selecting previously unselected package pkg-config.
(Reading database ... 247983 files and directories currently installed.)
Unpacking pkg-config (from .../pkg-config_0.26-1ubuntu2_amd64.deb) ...
Processing triggers for man-db ...
Setting up pkg-config (0.26-1ubuntu2) ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:54:16.173

使用`--modversion`.

```
$ pkg-config --modversion python
2.7 
```

pkg-config 旨在针对库进行编译时使用-如果您尝试检查软件包的版本，请使用`dpkg -s`

```
$ dpkg -s firefox
Package: firefox
Status: install ok installed
Priority: optional
Section: web
Installed-Size: 48531
Maintainer: Ubuntu Mozilla Team <ubuntu-mozillateam@lists.ubuntu.com>
Architecture: amd64
Version: 17.0.1+build1-0ubuntu0.12.04.1 
```

或者`apt-cache policy`

```
$ apt-cache policy firefox
firefox:
  Installed: 17.0.1+build1-0ubuntu0.12.04.1
  Candidate: 20.0+build1-0ubuntu0.12.04.3
... 
```

# java - 如何从终端运行 JDBC 代码？

> ID：16140855
> 
> 赞同：1
> 
> 时间：2013-04-22T06:37:21.743
> 
> 标签：java, mysql, linux, jdbc, terminal

我已经使用`-cp <mysql-connector-java jar file>`. 编译过程中没有错误。创建了所有类文件

为了运行代码，我去了一个更高的目录并执行了`java packagename.MyPgm`.
但是，当我运行这是弹出的错误：

```
行号错误：-1
java.sql.SQLException：找不到适合 jdbc 的驱动程序：mysql://localhost/feedback?user=root&password=passwd
    在 java.sql.DriverManager.getConnection(DriverManager.java:640)
    在 java.sql.DriverManager.getConnection(DriverManager.java:222)
    在 javaapplication2.HttpHeaderParser.main(HttpHeaderParser.java:69)

```

> 导入 com.mysql.jdbc.Connection；
> 导入 com.mysql.jdbc.PreparedStatement；
> 导入 com.mysql.jdbc.Statement；
> 导入java.io.*；
> 导入 java.sql.DriverManager；
> 导入java.sql.SQLException；
> 导入 java.util.ArrayList；

公共类 HttpHeaderParser {

```
static Connection connect = null;
static Statement statement = null;
public static void main(String[] args) throws IOException {
    try {
        BufferedReader bufferedReader = new BufferedReader(new FileReader(new File("http_headers.txt")));   
        FirstLine firstObj = null;
        SecondLine secondObj;
        OtherFields otherObj;
        connect = (Connection) DriverManager.getConnection("jdbc:mysql://localhost/feedback?"+"user=root&password=sicily");  //this will connect to the database
        statement = (Statement) connect.createStatement(); 
```

我这里有一些 java String 操作。然后是 catch 语句。

```
catch (Exception e) {
        System.out.println("Error in line no: "+lineCount);                 //displays the line number of the input file where the program stopped
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:42:42.603

您仍然需要使用类路径参数运行代码。

所以应该是：

```
java packagename.MyPgm -cp <mysql-connector-java jar file> 
```

试试看，让/

编辑：

应该在创建连接之前添加此行。

样本：

```
Class.forName("com.mysql.jdbc.Driver");
Connection conn = null;
conn = DriverManager.getConnection("jdbc:mysql://hostname:port/dbname","username",  "password");
conn.close(); 
```

编辑2：

仅修复代码的某些部分：

```
OtherFields otherObj;
Class.forName("com.mysql.jdbc.Driver");
connect = (Connection) DriverManager.getConnection("jdbc:mysql://localhost/feedback?"+"user=root&password=sicily");  //this will connect to the database
statement = (Statement) connect.createStatement(); 
```

完成后，编译，

```
javac HttpHeaderParser.java -cp <mysql jar file> 
```

编译成功后，您需要运行相同的程序。

```
java HttpHeaderParser -cp <mysql jar file> 
```

但请记住，您编写 JDBC 代码的地方看起来并不合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:56:35.953

您需要一个类似于 的文件 ，并在`"mysql-connector-java-5.1.17-bin.jar"` 您`classpath`的程序中对它进行适当的引用

看来您正在替换`classpath`以仅引用一个文件，您可能至少需要“。” 还。

# c++ - 构造函数中使用的 C++ 枚举返回函数

> ID：16140861
> 
> 赞同：0
> 
> 时间：2013-04-22T06:37:36.237
> 
> 标签：c++, function, object, constructor, enums

我想从函数返回一个枚举值，因为我的构造函数需要创建一个枚举值。

我的课 ：

```
class myBasket{
enum myType {type1, type2, type3} MT;
public:
myBasket(myType thetype) : MT(thetype){} 
}; 
```

下面的部分是我想要创建的函数，但我不知道如何返回一个枚举值，所以我只是写它来告诉你我想要什么，因为这是我的问题，我如何识别它如果需要，在头文件中？

```
int bSize(int size){
return size;
} 
```

呼唤：

```
new myBasket(bSize(chosen_size)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:41:11.157

当你在一个类中进行枚举时，类名就像一个命名空间。

```
class MyClass
{
  enum SomeType
  {
    Val
  };
};

MyClass::SomeType v = MyClass::Val; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:54:06.270

c++98（也适用于 c++11）

```
#include <iostream>

class myClass
{
public:
    enum myBasket{one, two, three};

    myBasket bSize(myBasket size){
        return size;
    }

};

int main()
{
    myClass A; 
```

//枚举的名称在 c++98 中不被视为作用域 std::cout<

```
 return 0;
} 
```

c++11

```
#include <iostream>

class myClass
{
public:
    enum myBasket{one, two, three};

    myBasket bSize(myBasket size){
        return size;
    }

};

int main()
{
    myClass A;
    //only worked on c++11, the enum name work as a scope
    std::cout<<A.bSize(myClass::myClass::one)<<std::endl;

    return 0;
} 
```

您可以在 c++11 中声明枚举的类型并进行前向声明

.hpp

```
enum class myBasket;

class myClass
{
public:

    myBasket bSize(myBasket size);

}; 
```

.cpp

```
enum class myBasket : int{one, two, three}; 
```

注意枚举类不能隐式转换为 int

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-22T06:43:56.670

```
enum myType {type1, type2, type3} MT;    
class myBasket{

public:
myBasket(myType thetype) : MT(thetype){} 
}; 

myType bSize(int size){
return somesize; //cant return the input value so modified
}

new myBasket(bSize(chosen_size)); 
```

# c# - 如何将 Excel 模板复制到同一个 Excel 中的另一张工作表？

> ID：16140862
> 
> 赞同：0
> 
> 时间：2013-04-22T06:37:40.660
> 
> 标签：c#, excel, openxml

我是 OpenXML 的新手。我的概念并不完全清楚。我正在使用以下代码 -

```
Package package = Package.Open(newFile.FullName, FileMode.Open, FileAccess.ReadWrite);
            excelDoc = SpreadsheetDocument.Open(package);
            WorkbookPart wbPart = excelDoc.WorkbookPart;
            Sheet templateSheet = wbPart.Workbook.Descendants<Sheet>().Where((s) => s.Name == "Sheet1").FirstOrDefault();
            for (int i = 0; i < (int)(obj.Count / 4); i++)
            {
                WorkbookPart workBookpart = excelDoc.WorkbookPart;
                Workbook workbook = workBookpart.Workbook;
                Sheets sheets = workbook.Sheets;
                WorksheetPart workSheetPart = excelDoc.WorkbookPart.AddNewPart<WorksheetPart>("workSheet" + (i+2));
                Worksheet worksheet = new Worksheet();
                SheetData sheetdata = new SheetData();
                worksheet.Append(sheetdata);
                workSheetPart.Worksheet = worksheet;
                sheets.Append(templateSheet.CloneNode(true));
            }
            for (int i = 0; i < (int)(obj.Count / 4); i++)
            {
                uint sheetId = 1;
                if (excelDoc.WorkbookPart.Workbook.Sheets.Elements<Sheet>().Count() > 0)
                {
                    sheetId = excelDoc.WorkbookPart.Workbook.Sheets.Elements<Sheet>().Select(s => s.SheetId.Value).Max() + 1;
                }
                Sheet temp = wbPart.Workbook.Descendants<Sheet>().Skip(i + 1).Take(1).FirstOrDefault();
                temp.Name = "Sheet" + (i + 2);
                temp.Id = "workSheet" + (i + 2);
                temp.SheetId = sheetId;
            } 
```

此代码正在创建工作表，但“Sheet1”中不存在模板。我该怎么做？请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T22:35:04.930

从您现在所拥有的情况来看，您的问题是您正在复制`Sheet`，它为您提供模板表的元数据，但不会复制任何`WorksheetPart`包含工作表实际内容的关联对象。为此，您需要[Brian Jones 的这篇 MSDN 博客文章](http://blogs.msdn.com/b/brian_jones/archive/2009/02/19/how-to-copy-a-worksheet-within-a-workbook.aspx)中的部分内容，特别是他将工作表及其所有部分复制到新工作簿的部分。如有必要，我可以提供如何执行此操作的示例。

# sql-server - Orchard CMS 完整的站点数据备份/导出

> ID：16140864
> 
> 赞同：1
> 
> 时间：2013-04-22T06:37:42.167
> 
> 标签：sql-server, orchardcms

我在 Orchard 1.6 上运行一个网站。我使用的（共享）托管公司不是很好，我希望搬到新的地方，可能是 Azure。

问题是，在选择使用 SQL Server 2008 后，有没有办法可以通过管理 UI 导出我网站的所有数据？否则，我将需要从我只有有限访问权限的数据库中备份数据。

显然，我想稍后在其他地方重新导入它。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:27:46.307

查看[导入/导出模块](http://gallery.orchardproject.net/List/Modules/Orchard.Module.Orchard.ImportExport)。

这适用于很多内容项（页面、菜单、小部件等）。如果您有自定义内容部分，您可能需要为[您的内容部分驱动程序添加导入和导出支持](https://stackoverflow.com/questions/14891326/custom-part-properties-missing-in-export-orchard-1-6)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:38:16.437

您应该要求您的托管公司为您备份数据库或告诉您如何备份。这是你的数据，他们必须遵守。如果只是为了灾难恢复。

# selenium - 无法在 45000 毫秒内绑定到锁定端口 7054

> ID：16140865
> 
> 赞同：16
> 
> 时间：2013-04-22T06:37:48.353
> 
> 标签：selenium, webdriver

在 webdriver 独立服务器中运行自动化时，我随机收到此异常。一旦它来了，我就杀死了所有的 java 进程。那么这个异常的解决方案是什么？为什么随机出现？

不幸的是，据我所知，所有人都建议使用最新版本的 selenium jar 或根据 selenium 版本提供兼容的 firefox 版本，或者他们说检查该端口是否正在使用（尽管它不会！）或重新启动系统.很少有人建议卸载firefox版本并重新安装。任何永久解决方案或任何想法为什么会出现？

```
org.openqa.selenium.WebDriverException: Unable to bind to locking port 7054 within 45000 ms 
Build info: version: '2.30.0', revision: 'dc1ef9c', time: '2013-02-19 00:15:27' 
System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.7.0' 
Driver info: driver.version: FirefoxDriver 
Command duration or timeout: 47.94 seconds 
Build info: version: '2.28.0', revision: '18309', time: '2012-12-11 15:53:30' 
System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.7.0' 
Driver info: org.openqa.selenium.remote.RemoteWebDriver 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T11:52:10.700

似乎以前的 webDriver 实例（或其他东西）没有释放端口。这是此问题（Java）的解决方法（不好的做法）：

```
 public static FirefoxBrowser forceInit() {
        try {
            return new FirefoxBrowser();
        } catch (WebDriverException exc) {
            return forceInit();
        }
    } 
```

通过以下方式确保您的测试正确关闭驱动程序：

```
 driver.quit(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-05T22:43:25.527

确保您没有打开任何 WebDriver Firefox 窗口！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-21T14:31:07.480

尽管问题/问题来自相当长的一段时间，但我今天在 Windows 环境中遇到了同样的问题。我设法通过简单的机器重启来解决它。我鼓励你先做这件事，然后再做其他事情。

*   操作系统视窗 7
*   硒服务器版本：2.35.0

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-25T06:50:27.033

以防万一它可以帮助某人，我解决了这个错误，从 Windows 中的主机文件中删除了对 localhost 的任何引用（我正在从 Linux 远程执行测试到 Windows）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-16T15:58:29.100

我在 fedora 23 上使用 firefox 47.0 和 selenium-webdriver 2.45.1 时遇到了同样的问题。使用 firefox 版本 41 解决了这个问题。（版本 42 已经过测试并且运行良好。）使用终端运行在 fedora 上安装 ff41：

```
dnf install firefox-41.0.1-2.fc23 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-05-15T07:49:57.837

通过转到任务管理器杀死Firefox，这可能会有所帮助。

# .htaccess - .htaccess 文件不起作用

> ID：16140869
> 
> 赞同：0
> 
> 时间：2013-04-22T06:38:05.230
> 
> 标签：.htaccess, codeigniter

我正在使用 CodeIgniter 在 XAMPP 中运行我的应用程序。我有一个 .htaccess 文件，我不再需要在 url 中包含 index.php，但它不起作用。

我的 .htaccess 文件的内容是

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond $1 !^(index\.php|crossdomain\.xml|captcha|images|assets|archive|css|js|uploads|robots\.txt)
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

我已经将 AllowOverride 的所有目录设置为 All。我也已经启用了 mod_rewrite，但我的链接仍然不起作用。它不会转到指定的 URL，而是转到 XAMPP 主页。

同样在我的配置文件中，它看起来像这样：

> $config['base_url'] = '';
> $config['index_page'] = '';

然后在视图中：

> 一个 href="/注册"

我做对了吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:39:41.123

尝试

```
Options +FollowSymlinks
# Options +SymLinksIfOwnerMatch
RewriteEngine On
# RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteCond $1 !^(index\.php|monitor\.php|resources|test_gui|img|css|js|favicon\.ico|(.*)\.(png|js|jpg|swf|css|gif|ico|jpeg|scss)$)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

# pdf - iText：使用 Xmp 将自定义属性设置为 PDF 中的元数据

> ID：16140874
> 
> 赞同：0
> 
> 时间：2013-04-22T06:38:26.387
> 
> 标签：pdf, itext

我正在使用 iText 5.4.0 创建一个 PDF 文件。我需要向 pdf 添加一些自定义属性。我尝试了两种方法

1.  类的 addHeader 方法`com.itextpdf.text.Document`和
2.  的 setMoreInfo 方法`com.itextpdf.text.pdf.PdfStamper`。

但是这两个都将自定义属性添加到信息字典中。

我需要使用 Xmp 添加它们并检索回 Xml 文件。我怎样才能做到这一点？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:19:47.457

是的..!!.. 像这样实现了自定义架构

```
public class CustomSchema extends XmpSchema 
{

private static final long serialVersionUID = -4551741356974797330L;

public static final String LABELID = "ls:LabelId";

public CustomSchema() {
    super("cusprop");
}

public void addLabelId(String labelId) {
    XmpArray array = new XmpArray(XmpArray.UNORDERED);
    array.add(labelId);
    setProperty(LABELID, array);
}
public void addLabelArr(String tagId, String[] tagValue) {
    XmpArray array = new XmpArray(XmpArray.ORDERED);
    for (int i = 0; i < tagValue.length; i++) {
        array.add(tagValue[i]);
    }
    setProperty(tagId.toString().replace(" ", "").trim(), array);
}
} 
```

生成的 XML 如下

```
 <rdf:Description rdf:about="" xmlns:ls="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
     <TagId-20>
        <rdf:Seq>
            <rdf:li>arr0</rdf:li>
             <rdf:li>arr1</rdf:li>
        </rdf:Seq>
     </TagId-20>
     </rdf:Description> 
```

我想知道，如果这种结构也可以定制。例如，

```
 -<TagId-20>
            -<customTag>
                    <ls:userId>USERNAME</ ls:userId >
                    <ls:WONum>12-110992</ WONum >
            </customTag >
    </TagId-20> 
```

为了获得上述结构，我需要做什么？有没有可用的例子？

# asp.net-mvc - asp.net mvc 自定义 HandleUnauthorizedRequest

> ID：16140880
> 
> 赞同：0
> 
> 时间：2013-04-22T06:38:36.117
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在使用 asp.net mvc3。

我有一个自定义 AuthorizeAttribute。

我必须重写方法**HandleUnauthorizedRequest(AuthorizationContext filterContext)**

我的源代码如下。

```
protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
{
    switch (unAuthorizedStatus)
    {
        case UnauthorizedStatus.NonAuthenticated:
            // I have a question here.
            break;
        default: base.HandleUnauthorizedRequest(filterContext); break;
    }
} 
```

// 我有一个问题。

如果用户身份验证失败（案例 UnauthorizedStatus.NonAuthenticated），则返回上一个 URL，并且我想在 JavaScript（或 jquery）中显示警告窗口警报。

请回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:13:12.843

您确定需要重写 HandleUnauthorizedRequest 方法吗？

我遵循此处列出的方法：http: [//blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application.aspx](http://blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application.aspx)。太好了，他们将其包装到 MVC4 中。

本质上，您只处理 OnAuthorization 方法。剩下的留给基本属性。如果您未经身份验证，它具有自动将您路由到登录页面的好功能。

如果您真的想将用户自动导航回原始页面，您可以按照最初的想法覆盖该方法，而是将用户发送到一个新的操作方法，并从 HttpContext 传递返回 URL（我认为是指 url ）。然后，您可以在 html 中向用户显示一条消息，然后在等待几秒钟后通过元刷新自动将用户导航回其原始页面。

如果最终用户禁用了 JS，您的解决方案将不起作用。

# ruby-on-rails - Rails inverse_of 混淆

> ID：16140888
> 
> 赞同：0
> 
> 时间：2013-04-22T06:39:05.023
> 
> 标签：ruby-on-rails, associations, relationship

我有这两个模型：团队和用户。

每个用户可以有团队，每个团队有很多用户。但我想用 team.members 调用 team.users。我设法用 class_name 做到了这一点，但我还需要按用户访问团队。换句话说 user.team 应该返回我用户所在的团队。这是我想出的...

我的模型如下：

```
class Team < ActiveRecord::Base
  has_many :members, foreign_key: 'id', class_name: 'User', :inverse_of => :team
end

class User < ActiveRecord::Base
  belongs_to :team, :inverse_of => :user
end 
```

（我也尝试使用 :inverse_of => :members ，在 User 模型中。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:11:24.447

你是`:inverse_of`对的，至少在你使用`:inverse_of => :members`. 这里的问题是外键。`foreign_key`在另一个表中指定键列的名称，因此在您的情况下是在用户表中。如果您指定 just `id`，则将使用用户的 id。只需通过不指定外键将其保留为默认值，然后将其`team_id`.

```
class Team < ActiveRecord::Base
  has_many :members, :class_name => 'User', :inverse_of => :team
end

class User < ActiveRecord::Base
  belongs_to :team, :inverse_of => :members
end 
```

并且尽量不要将 ruby​​ 1.8 ( ) 中的 hash-syntax 与`:key => 'value'`ruby​​ 1.9 ( ) 中的新语法混合`key: 'value'`。

# asp.net-mvc-4 - 在 Asp.Net MVC 中集中导出为 CSV 文件

> ID：16140889
> 
> 赞同：0
> 
> 时间：2013-04-22T06:39:12.477
> 
> 标签：asp.net-mvc-4, telerik-mvc, export-to-csv

![在此处输入图像描述](https://i.stack.imgur.com/ejYxU.png)

我正在我的 MVC 项目中执行导出到 csv 功能。目前，如果我在每个页面上编写代码，它就可以正常工作。但我想避免重复执行集中导出功能的代码。

这是我的控制器代码

```
public ActionResult Export(string filterBy)
        {
            GridState gs = new GridState();
            gs.Filter = filterBy;
            gs.Page = 1;
            gs.Size = int.MaxValue;
            IEnumerable cities = City.GetAll().AsEnumerable().AsQueryable().ToGridModel(gs).Data;
            MemoryStream output = new MemoryStream();
            StreamWriter writer = new StreamWriter(output, Encoding.UTF8);
            writer.Write("Country Name,");
            writer.Write("State Name,");
            writer.Write("City Name,");
            writer.Write("City STD Code,");
            writer.Write("Is Display");
            writer.WriteLine();
            foreach (CityViewModel city in cities)
            {
                writer.Write(city.CountryName);
                writer.Write(",");
                writer.Write("\"");
                writer.Write(city.StateName);
                writer.Write("\"");
                writer.Write(",");
                writer.Write("\"");
                writer.Write(city.City.Name);
                writer.Write("\"");
                writer.Write(",");
                writer.Write(city.City.STDCode);
                writer.Write("\"");
                writer.Write(",");
                writer.Write(city.City.IsDisplay);
                writer.WriteLine();
            }
            writer.Flush();
            output.Position = 0;

            return File(output, "text/comma-separated-values", "city.csv");

        } 
```

这是我的观点：

```
@model Telerik.Web.Mvc.GridModel<QuexstERP.BusinessCore.BusinessEntities.SysAdmin.CityViewModel>
@using Telerik.Web.Mvc.UI
@{
    ViewBag.Title = "City List";
}

@(Html.Telerik().Grid(Model.Data)
        .Name("Grid")
        .DataKeys(keys => keys.Add(c => c.City.Id))
            .ToolBar(commands => commands.Insert().ButtonType(GridButtonType.Image).ImageHtmlAttributes(new { style = "margin-left:0", title = "Add" }))
                                .ToolBar(commands => commands
                .Custom()
                .HtmlAttributes(new { id = "TestFilter", onclick = "command_onClick(this)" })
                .Text("Export to csv")
                                        .Action("Export", "City", new { filterBy = "~" }))
            .DataBinding(dataBinding =>
                dataBinding.Server()
                    .Select("Select", "City", new { GridButtonType.Text })
                            .Insert("Create", "City", new { GridButtonType.Text })
                        .Update("Save", "City", new { GridButtonType.Text })
                        .Delete("Delete", "City", new { GridButtonType.Text }))
            .Columns(columns =>
            {
                columns.Command(commands =>
                {
                    commands.Custom("Edit").Action("Edit", "City").ImageHtmlAttributes(new { @class = "t-edit" }).ButtonType(GridButtonType.Image).HtmlAttributes(new { title = "Edit", @class = "RightAlign" });
                }).Width(40).Title("Edit").Visible(OperationHelper.EditOperation);

                columns.Command(commands =>
                {
                    commands.Delete().ButtonType(GridButtonType.Image).HtmlAttributes(new { title = "Delete", @class = "RightAlign" });
                }).Width(40).Title("Delete").Visible(OperationHelper.DeleteOperation);

                columns.Bound(p => p.CountryName).Width(200).Title("Country");
                columns.Bound(p => p.StateName).Width(200).Title("State");
                columns.Bound(p => p.City.Name).Width(310).Title("City");
                columns.Bound(p => p.City.STDCode).Width(200).Title("STD Code");
                columns.Bound(p => p.City.IsDisplay).Width(110).Title("IsDisplay");
            })
            .Pageable()
                .Scrollable()
            .Sortable()
                .Filterable()
                    .Resizable(command => command.Columns(true))
    )
@section HeadContent {

    <script type="text/javascript">
        function command_onClick(e) {

            var grid = $('#Grid').data('tGrid');

            var $cmd = $('#TestFilter');

            // Get its 'href' attribute - the URL where it would navigate to
            var href = $cmd.attr('href');

            // Update the 'filter' parameter with the grids' current filtering state
            href = href.replace(/filterBy=(.*)/, 'filterBy=' + (grid.filterBy || '~'));

            // Update the 'order' parameter with the grids' current ordering state
            href = href.replace(/orderBy=([^&]*)/, 'orderBy=' + (grid.orderBy || '~'));

            // Update the 'page' parameter with the grids' current page
            href = href.replace(/page=([^&]*)/, 'page=' + grid.currentPage);

            // Update the 'href' attribute
            $cmd.attr('href', href);
        }

    </script>
} 
```

我想集中导出到 CSV。我的项目中的许多表格（例如州、国家和国家/地区）都具有导出功能。是否可以编写一个泛型类并将参数传递给它。导出到 csv 是集中完成的？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:39:19.217

我们通过在控制器方法中将数据源绑定到 GridView 来实现类似的效果，例如

```
var data = GetSomeData();
var grid = new GridView { DataSource = data };
grid.DataBind();
Response.ClearContent();
Response.AddHeader("content-disposition", "attachment; filename=MyExcel.xls");

Response.ContentType = "application/vnd.ms-excel";
var sw = new StringWriter();
var htw = new HtmlTextWriter(sw);

grid.RenderControl(htw);

Response.Write(sw.ToString());
Response.End(); 
```

这样，您只需在 GridView 上设置相关数据源，并在输出流中返回网格数据的转储。通过一些重构，我们能够使其通用，现在我们所有的 UI 网格都使用它来导出到 Excel/CSV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T05:43:29.273

仅供参考。不要将数据绑定到网格，然后将其导出到 Excel。它会给你

> 您尝试打开的文件与文件扩展名指定的格式不同

尝试打开 Excel 时出错。

我已经为上述问题做了这个解决方案

```
public static void ExportToExcel(IEnumerable<dynamic> data, string sheetName)
{
    XLWorkbook wb = new XLWorkbook();
    var ws = wb.Worksheets.Add(sheetName);
    ws.Cell(2, 1).InsertTable(data);
    HttpContext.Current.Response.Clear();
    HttpContext.Current.Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
    HttpContext.Current.Response.AddHeader("content-disposition", String.Format(@"attachment;filename={0}.xlsx",sheetName.Replace(" ","_")));

    using (MemoryStream memoryStream = new MemoryStream())
    {
        wb.SaveAs(memoryStream);
        memoryStream.WriteTo(HttpContext.Current.Response.OutputStream);
        memoryStream.Close();
    }

    HttpContext.Current.Response.End();
} 
```

它动态地获取数据。使用[ClosedXml](https://closedxml.codeplex.com/)所以没有错误，并且导出到 Excel 功能是应用程序的核心希望这会对某人有所帮助。:)

# ios - UITableViewCell 中选定行的错误

> ID：16140890
> 
> 赞同：0
> 
> 时间：2013-04-22T06:39:19.087
> 
> 标签：ios, uitableview

有时，当我在 UITableView 中选择 1 行时，另一行也会变成选中状态。错误可能在哪里？

在**didSelectRowAtIndexPath**：

```
cartCell *cell = [tableView cellForRowAtIndexPath:indexPath];

if (cell.accessoryType == UITableViewCellAccessoryNone) {
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
    cell.crossImage.hidden = NO;
}
else {
    cell.accessoryType = UITableViewCellAccessoryNone;
    cell.crossImage.hidden = YES;
} 
```

在我的**cellForRowAtIndexPath**

```
static NSString *CellIdentifier = @"cellCart";
cartCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[cartCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

    Join *join = [_fetchByRecipe objectAtIndexPath:indexPath];
    cell.ingredientName.text = join.ingredient.name;
    cell.ingredientCount.text = [NSString stringWithFormat:@"%@", join.count];
    cell.ingredientUnit.text = join.ingredient.units;

if (cell.accessoryType == UITableViewCellAccessoryNone) {
    cell.crossImage.hidden = YES;
}
else {
    cell.crossImage.hidden = NO;
}

return cell; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:59:09.163

你可以试试下面的

在**didSelectRowAtIndexPath**：

```
Join *join = [_fetchByRecipe objectAtIndexPath:indexPath.row];
join.isSelected = !join.isSelected;
[tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationNone]; 
```

在我的**cellForRowAtIndexPath**

```
static NSString *CellIdentifier = @"cellCart";
cartCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[cartCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

    Join *join = [_fetchByRecipe objectAtIndexPath:indexPath.row];
    cell.ingredientName.text = join.ingredient.name;
    cell.ingredientCount.text = [NSString stringWithFormat:@"%@", join.count];
    cell.ingredientUnit.text = join.ingredient.units;

cell.accessoryType = join.isSelected?UITableViewCellAccessoryNone:UITableViewCellAccessoryCheckmark;

return cell; 
```

**已编辑 1** 只需向您的类添加一个属性`BOOL`..并使用我编辑的答案，它应该可以工作..`Join``isSelected`

**已编辑 2**

```
[_fetchByRecipe objectAtIndexPath:indexPath]; 
```

至

```
[_fetchByRecipe objectAtIndexPath:indexPath.row]; 
```

# c# - 使用 where 子句对 DataTable 应用排序

> ID：16140891
> 
> 赞同：0
> 
> 时间：2013-04-22T06:39:29.767
> 
> 标签：c#, asp.net, c#-4.0, data-binding, datatable

我有一个`DataTable`. 我想使用 C# Sort 函数对列应用排序。但我只想排序将特定值的那些行应用到其他列（不是应用排序的列）但未过滤表数据。我怎么能做这件事。

例如 - 我的`DataTable` `dt`

> 列第一（实体）|| 第二列（位置）
> 
> 候选人 || 0
> 
> 员工 || 印度
> 
> 候选人 || 2
> 
> 员工 || 英国
> 
> 候选人 || 3
> 
> 员工 || 中国

应用排序后，我希望我`DataTable`看起来像这样（排序仅将那些只有“员工”的字段应用到第一列，并且在对“候选人”或排序后的“员工”进行排序后显示`Datatable`）

排序后我的预期结果如下所示 -

> 列第一（实体）|| 第二列（位置）
> 
> 候选人 || 0
> 
> 员工 || 中国
> 
> 候选人 || 2
> 
> 员工 || 英国
> 
> 候选人 || 3
> 
> 员工 || 印度

非常感谢您的宝贵帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:17:52.570

您必须为此使用 DataView，DataView 是可排序的。将您的 Datatable dt 分配给 DataView 并使用 DataView 的 Sort 属性

```
DataView dv = dt.DefaultView;
dv.Sort = "Column name"; 
```

希望它对你有帮助。

# android - 无法在 UIImageView 中显示来自 php myadmin 的 BLOB

> ID：16140893
> 
> 赞同：0
> 
> 时间：2013-04-22T06:39:37.850
> 
> 标签：android, iphone, image, base64, blobs

我们在我们的应用程序中使用我们数据库中的一些图像。`BLOB`我们通过编码将它们放入`base64`，然后通过解码获得。问题是，我们从 android 应用程序中放入的所有图像，我们都正常进入 android 应用程序，但 NULL 到 iPhone 应用程序。但是，我们从 iPhone 应用程序中放置的所有图像，通常从 DB 获取：iPhone 和 android 应用程序。也许它不是同一个库`Base64`？为什么会这样？任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:59:18.327

更改 Base64 库解决了我的问题！如果有人有同样的问题，请从 [这里获取 Base64 库](https://github.com/nicklockwood/Base64/)

# css - CSS3下拉菜单悬停不起作用

> ID：16140903
> 
> 赞同：3
> 
> 时间：2013-04-22T06:40:10.940
> 
> 标签：css, drop-down-menu, touch, touchscreen

我的网站使用的是纯 CSS3 下拉菜单。问题是当网站在触摸屏设备上查看时，某些具有悬停属性的菜单项不会自动下拉。

我怎样才能改变它，如果菜单项有一个悬停下拉菜单，在触摸屏设备中你必须触摸它，然后菜单将下拉到我们 PC 中的其他位置，它仍将保持悬停效果。

可以只使用CSS来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:11:49.797

您是否尝试过`aria-haspopup`在支持触摸的设备上模拟悬停

看看[这篇文章](http://msdn.microsoft.com/en-us/library/ie/jj152135%28v=vs.85%29.aspx)。

> 在菜单等页面元素上，将元素的 aria-haspopup 属性设置为“true”。当启用触摸的设备上的 Internet Explorer 10 用户第一次点击页面元素时，用户的体验将与将光标悬停在该元素上的用户的体验相同。

我不确定浏览器对此的支持是什么样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:41:51.867

“悬停”并不是触摸屏的真正功能，因为它需要涉及鼠标指针。如果您使用的是支持触摸屏的优秀库，它也应该可以工作。如果没有，请尝试另一个库或自己编写一些东西。

# actionscript-3 - 在最顶层保留水印 - as3/flash builder

> ID：16140905
> 
> 赞同：0
> 
> 时间：2013-04-22T06:40:12.950
> 
> 标签：actionscript-3, flash-builder

我有一个看起来像这样的设置：

```
<mx:Canvas>
   <mx:Image id="mayimage"/>
</mx:Canvas>
<mx:Button id="watermark"/> 
```

按钮是我想要保留在图像顶部的水印。

但是在使用 addChild 将实际图像动态加载到“myimage”中后，按钮的皮肤（使用@Embed 嵌入）被新图像覆盖。

奇怪的是，它在 Firefox 中看起来很好，水印按钮仍然在最顶层，它只在 Chrome 中被掩盖。此外，即使按钮被图像覆盖，它仍然可以点击，这意味着只有按钮的皮肤被覆盖......

无论如何将按钮的皮肤保持在最顶层？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:54:35.300

不要用于显示您的图像，`addChild`只需更改`source`.`myimage`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T01:13:36.850

如果我们考虑这个：

```
<mx:Canvas id="myCanvas">
   <mx:Image id="mayimage"/>
</mx:Canvas>
<mx:Button id="watermark"/> 
```

而且您使用`myCanvas.addChild(myImage)`的图像永远不会与水印重叠。您是否有机会将其添加到上层`canvas`？

# ocr - EmguCV：如何使用 QueryFrame() 检测文件是否已到达文件末尾

> ID：16140906
> 
> 赞同：0
> 
> 时间：2013-04-22T06:40:17.100
> 
> 标签：ocr, video-processing, emgucv

我正在使用 Emgucv 从视频文件中捕获帧这是我的代码

```
private void Frame(object sender, EventArgs arg)
    {
        try
        {
            timesbetweenframes++;
            Image<Bgr, Byte> frame = FrameExtractor.QueryFrame();
            if (timesbetweenframes == 10 || timesbetweenframes == 0)
            {

                if (frame != null)
                {
                    Bgr min = new Bgr(65, 65, 65);
                    Bgr threshold = new Bgr(128, 128, 128);
                    Image<Bgr, Byte> Frame2 = frame;
                    //Noise Removal 
                    frame._SmoothGaussian(5);

                    VideoBox.Image = Frame2;
                    Bgr drawColor = new Bgr(Color.Blue);
                    using (Image<Gray, byte> gray = frame.Convert<Gray, Byte>())
                    {
                        TextExtract.Recognize(gray);
                        Tesseract.Charactor[] charactors = TextExtract.GetCharactors();
                        foreach (Tesseract.Charactor c in charactors)
                        {
                            Frame2.Draw(c.Region, drawColor, 1);
                        }

                    }
                    cptrdImage.Image = frame;
                    String text = TextExtract.GetText();
                    //removal of noise in this section 
                    Tags.Items.Add(text);
                    WriteData(text, fileName,frame);
                    fileName++;
                }
                else
                {
                    MessageBox.Show("Done!");
                    FrameExtractor = null;
                    InProgress = false;
                    timer1.Elapsed -= Frame;
                }
                timesbetweenframes = 0;
            }

        } 
```

帧函数被添加到定时器事件中，这会在每 500 毫秒后自动触发帧函数并每 10 帧提取一次。现在的问题是，在调用 queryframe() 函数后，程序崩溃并出现错误：“限制在0x7777f7a99 引用了 0x00000000 处的内存。一段时间后无法读取内存。

我是否以错误的方式使用它，或者有没有其他方法可以做到这一点而不会出现此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T15:23:54.213

也许时间（500毫秒）太短了？？

我会将此函数附加到 Application.Idle 事件，如果需要更多延迟然后 Thread.Sleep(neededTime - consumeTimeByFrameFunction) 这样您就可以消除可能的时间问题。

# html - 如何在悬停该图像时在图像高度中间设置上一个下一个图标

> ID：16140910
> 
> 赞同：0
> 
> 时间：2013-04-22T06:40:31.220
> 
> 标签：html, css, image, hover

我正在做之前和下一个实验，比如 facebook，当我们将鼠标悬停在图像上时，它会显示上一个和下一个图标。我使用简单的 CSS 稍微修改了图标。但我在这里唯一缺少的是导航 div 的正确位置。无论图像是 600*600 还是 1024*800，我都希望它们位于图像中间。

我尝试了这些，但没有取得任何进展 -

```
var maskHeight = ($('mainOne').height() - 50);
$('#hoverP').css({top:maskHeight}).show();
$('#hoverN').css({top:maskHeight}).show(); 
```

这是示例测试用例，其中包括与问题相关的所有内容，请帮助。-

```
 <!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Test</title>
    <script src="./jQuery.min.js"></script>
    <style>
        .imgHover {
            display: inline;
            position: relative;
        }
        .imgHover .hoverP {
            display: none;
            position: absolute;
            left: 3px;
            top:-200px;
            z-index: 2;
        }
        .imgHover .hoverN {
            display: none;
            position: absolute;
            right: 0px;
            top:-200px;
            z-index: 2;
        }
        .prev_big,.next_big {
            background-color:rgba(66,28,82,0.4);;
            border:2px solid rgba(255,255,255,0.7);
            color:#FFF;
            font-size:78px;
            font-weight:700;
            width:30px;
            height:200px;
            line-height:200px;
            -webkit-transition:.4s all;
            -moz-transition:.4s all;
            -o-transition:.4s all;
            transition:.4s all;
            text-shadow:0 1px 0 #FFF;
            z-index:3;
            text-decoration:none;
            -moz-transition-duration:.4s;
            -webkit-transition-duration:.4s;
            -o-transition-duration:.4s;
            transition-duration:.4s;
        }

        .prev_big {
            border-bottom-right-radius:15px;
            border-top-right-radius:15px;
            margin-left:-3px;
            padding:0 20px 0 0;
        }

        .next_big {
            border-bottom-left-radius:15px;
            border-top-left-radius:15px;
            right:0;
            padding:0 5px 0 15px;
        }

        .prev_big:hover,.next_big:hover {
            color:#FFF;
            background:#732C7B;
            padding-top:140px;
            padding-bottom:140px;
        }

    </style>

</head>
<script>
$(function() {
    $(".imgHover").hover(
        function() {
            $(this).children("img").fadeTo(200, 0.95).end().children(".hoverP").show();
        },
        function() {
            $(this).children("img").fadeTo(200, 1).end().children(".hoverP").hide();
        }
    );
    $(".imgHover").hover(
        function() {
            $(this).children("img").fadeTo(200, 0.95).end().children(".hoverN").show();
        },
        function() {
            $(this).children("img").fadeTo(200, 1).end().children(".hoverN").hide();
        }
    );
});
</script>
<body>

    <div class="imgHover">
        <div class="hoverP"><a class="prev_big" href="page1.html" title="View Previous Page"><</a></div>
            <img id="mainOne" src="./oneB.jpg" alt="">
        <div class="hoverN"><a class="next_big" href="page3.html" title="View --Next-- Page">></a></div>
    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:48:52.547

为什么需要 jQuery，一堆带有填充标记的样式？我是从头开始做的，你看看它是否有用

[**演示**](http://jsfiddle.net/vyWdC/)

另一方面，您可以使用过渡来实现平滑 -[**演示**](http://jsfiddle.net/vyWdC/1/)

```
<div class="wrapper">
    <img src="http://www.google.co.in/intl/en_ALL/images/logos/images_logo_lg.gif" />
    <div class="bar"><a href="#">Previous</a><a href="#">Next</a></div>
</div> 
```

CSS

```
div.wrapper {
    position: relative;
    display: inline-block;
}

.bar {
    opacity: 0;
    background: rgba(25,25,25,.5);
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 30px;
    line-height: 30px;
}

div:hover .bar {
    opacity: 1;
}

.wrapper a {
    position: absolute;
}

.wrapper a:nth-of-type(1) {
    left: 0;
}

.wrapper a:nth-of-type(2) {
    right: 0;
} 
```

# facebook - Yii facebook 登录问题

> ID：16140914
> 
> 赞同：0
> 
> 时间：2013-04-22T06:40:42.577
> 
> 标签：facebook, facebook-graph-api, yii, oauth-2.0

我在 Yii 中创建了一个 facebook 应用程序，并让用户使用他们的 facebook 凭据登录到我的应用程序。我使用 OAuth 进行 facebook 身份验证，它在本地服务器上工作正常，但在[php AppFog 服务器](http://www.appfog.com)上不起作用。我的应用程序的链接是[http://nettantra-cvbuilder.aws.af.cm/](http://nettantra-cvbuilder.aws.af.cm/)。任何机构都可以说出问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-26T04:10:41.277

这可能是因为您的 Facebook 应用程序中的 URL 不正确。您需要将这些替换为应用程序设置中的最终设置（至少在“使用 Facebook 登录的网站”中的“站点 URL”）。

# javascript - javascript中字符串值的字体颜色

> ID：16140916
> 
> 赞同：0
> 
> 时间：2013-04-22T06:40:44.470
> 
> 标签：javascript

我想将字体颜色应用于 JavaScript 中的字符串值。我如何能？
我尝试如下：我想要红色的搜索文本。

```
$(document).ready(function() {
    var defaultText="search";
    defaultText.text.color="red";
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:47:58.627

您只能更改 DOM 元素的颜色。在您的情况下，它不是 DOM 变量。它是一个字符串，您在 html 中的任何位置都没有显示。因此无法将颜色应用于该字符串。如果您也应用颜色你会在哪里看到那种颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:54:47.683

您可以使用 span 来保存字符串搜索并将 css 应用于此 span。

```
<span id="search"></span>

$(document).ready(function() {
    $('#search').val('search').css('color','red');
}); 
```

# php - 如何在godaddy共享主机linux中访问php.ini文件

> ID：16140917
> 
> 赞同：48
> 
> 时间：2013-04-22T06:40:47.287
> 
> 标签：php

我有一个网络，并且在我的本地主机上运行良好。

在我的 Godaddy 主机上上传后，我的网站出现了错误。结论是，我必须更改 php.ini 文件的 memory_limit，但在 FTP 管理器上找不到 php.ini。

我试图：

*   找到更改分类 FTP 管理器的方法。
*   从本地创建/上传 php.ini 文件并且不起作用。

我的问题是：我该如何解决这个问题？我必须更改 php.ini 文件。有没有人和我一样的经历？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-22T06:47:02.793

Create `php.ini` file with your desired setting and upload it in your root folder of server. It will take effect with this new setting.

You can't edit the `php.ini` file of `godaddy` server, but you can upload your own copy of your `php.ini` with your new setting.

This new setting will be available only to you. Other websites will not be affected with this new setting.

Previously I faced the same issue, but after doing this my problem was resolved.

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2017-08-08T08:17:34.600

程序：

*   转到您的**CPanel**
*   选择**PHP 版本**
*   单击链接**切换到 PHP 选项**
*   编辑您的配置
*   不要忘记点击**保存**

[![在此处输入图像描述](https://i.stack.imgur.com/i37cV.jpg)](https://i.stack.imgur.com/i37cV.jpg)

您也可以关注此截屏视频

[https://www.youtube.com/watch?v=tdUlIkZcOe0](https://www.youtube.com/watch?v=tdUlIkZcOe0)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-04-05T03:27:18.333

正如@Jason 所指出的，对于大多数共享托管环境，在您的 public_html 目录中有一份 php.ini 文件的副本可以覆盖系统默认设置。一个很好的方法是复制托管公司的副本。把它放在一个文件中，比如 copyini.php

```
<?php
  system("cp /path/to/php/conf/file/php.ini  /home/yourusername/public_html/php.ini");
?> 
```

从 phpinfo() 的输出中获取 /path/to/php/conf/file/php.ini；在一个文件中。然后在您的ini文件中，进行修改删除在此过程中创建的所有文件（当然除了php.ini :-)）

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-04-22T06:44:22.383

要检查您的`php.ini`文件是否生效，请打开纯文本编辑器并创建一个名为`phpinfo.php`. 插入以下行：

```
<?php phpinfo(); ?> 
```

将此文件保存到您网站的根目录，然后浏览到 yourdomain.com/phpinfo.php 以测试设置。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-08-25T16:21:24.570

赛普蒂约，

您需要创建自己的 php5.ini 文件并将其上传到您的根目录。使用 GoDaddy（就像我一样），您无法控制 web/conf/ 文件夹来对其版本进行任何更改。确保您使用 PHP5 将文件命名为 php5.ini 或为 PHP4 命名为 php.ini。将其上传到您的根文件夹，然后重新启动您的页面，然后使用 phpinfo() 检查您的 php 文件目录是否已正确更改。

有关更多信息，请查看此链接。 [http://www.ostraining.com/blog/coding/phpini-file/](http://www.ostraining.com/blog/coding/phpini-file/)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-05-28T02:40:22.343

如果您`php5.ini`的主目录中没有文件的良好副本（我最近发现自己处于困境），您需要遵循一些多步骤的过程来进行更改。

1.  创建一个小代码片段来查看`phpinfo()` 调用的输出。这很简单，并且有多个网站描述了这个过程。

2.  检查`phpinfo()`包含 的行的输出`Configuration File (php.ini) Path`。我的在 中`/usr/local/lib`，但您的路径可能不同（取决于购买的托管级别）。

3.  GoDaddy 不会简单地将这个文件复制到您的主目录中——听起来很愚蠢！但是，您可以编写一个小 php 程序来将此 php.ini 文件复制到您的主目录中。[https://www.jabari-holder.com/blog/how-to-get-godaddys-php5-ini-file/](https://www.jabari-holder.com/blog/how-to-get-godaddys-php5-ini-file/)的人 有一个带有此代码片段的下拉框，如果您愿意使用它。只需注意修改两件事：

    *   一个。更改您读取“来自”的路径以匹配您在步骤 2 中发现的路径。

    *   湾。将输出文件名更改为您选择的内容。无论如何，您将在稍后的步骤中重命名此文件。让我们调用我们复制的文件`Foo.ini`（但它可以是任何东西）。

4.  重命名`Foo.ini`为`.user.ini`（对于大多数 GoDaddy 帐户类型）。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-11-15T15:45:34.910

使用您所需的设置创建一个新的**php.ini**文件并将其上传到您的 Godaddy 托管帐户的**public_html**文件夹。

默认情况下，**Godaddy**不允许编辑它现有的**php.ini**文件。但是，您始终可以使用自己的设置上传您自己的 php.ini 文件副本。

下面是一个带有一些自定义值的简单 php.ini 文件的示例：

```
max_execution_time 600
memory_limit 128M
post_max_size 32M
upload_max_filesize 32M 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-03-02T02:29:53.960

我的 GoDaddy 帐户遇到了这个确切的问题。

我正在***使用 cPanel 运行 Linux 主机***

请按照以下步骤操作，如果您运行与我相同的主机，您应该没问题：

首先，去你**管理你的主机 - >管理**

然后你会看到一个名为**Files**的部分，点击**File Manager**

您可以选择以下**文档根目录：yourwebsite.com，**然后单击**GO**

这应该会立即将您带到**public_html**文件夹中

在该文件夹中，您可以**添加一个文件（通过单击左上角的+文件），将其命名为 phpinfo.php**

右键单击该新文件，然后选择编辑：

在其中正确并保存更改：

```
<?php phpinfo(); ?> 
```

在同一个**public_html**文件夹中，添加另一个名为**php.ini的文件**

也编辑这个，对这些行：

```
max_execution_time 600
memory_limit 128M
post_max_size 32M
upload_max_filesize 32M 
```

现在，回到你的**Manage Your Hosting -> Manage**，寻找**PHP Process**

**单击 Kill Process**，这将允许刷新您的新设置。你已准备好出发

*旁注：您可以通过导航到 yourwebiste.com/phpinfo.php 查看新设置*

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-02-11T03:07:12.957

我找到了重新加载 php5.ini 文件或立即加载新文件的指南。您将需要访问您的 Godaddy 托管面板，您将在其中找到“系统进程”选项在那里重新启动，它将立即加载 php5.ini 或 php.ini 文件。

2 个外部指南可帮助您：

[http://support.godaddy.com/help/article/5980/managing-system-processes-on-linux-hosting-accounts](http://support.godaddy.com/help/article/5980/managing-system-processes-on-linux-hosting-accounts)

[http://www.studio-owens.com/blog/GoDaddy-and-Your-php-ini-File.htm](http://www.studio-owens.com/blog/GoDaddy-and-Your-php-ini-File.htm)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-03-14T18:42:16.470

对于某些托管帐户，我使用的是 Ultimate Classic Linux，您需要使用的文件名是 .user.ini。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-12-19T15:00:57.460

这是一个较老的问题，但如果有人在设置此问题时遇到问题，那么他们的文档已经过时了。我复制了一个`php.ini`名为的文件`php5.ini`，现在它可以工作了。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-01-06T15:26:56.053

如果您使用godaddy共享主机，请按照以下步骤操作。非常简单：我们需要通过ftp访问服务器的根文件夹，在public_html文件夹下创建一个名为“php5.ini”的文件...然后添加3个愚蠢的行...也是“php5”，因为我将 php5.4 用于我的 1 个客户端。您可以通过控制面板检查您的版本并搜索 php 版本。使用 php5.ini 添加新文件不会妨碍服务器端的任何操作，但它只会覆盖我们命令它执行的任何操作。

步骤很简单：转到文件管理器..单击public_html..将出现一个新窗口..单击“+”号并以名称创建一个新文件：“php5.ini”...单击确定/保存。现在右键单击新创建的 php5.ini 文件并单击编辑...将出现一个新窗口...复制粘贴以下行并单击保存并关闭窗口。

memory_limit = 128M

upload_max_filesize = 60M

最大输入变量 = 5000

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-07-20T08:49:32.240

不是 php.ini 文件，而是一种解决方法。去 GoDaddy 的

> 文件 > 备份 > 恢复 MySQL 数据库备份

选择您的文件，然后单击上传。没有超时。如果需要，重命名数据库，并在

> 数据库 > MySQL 数据库

# python - 如何在 Python 中同时从 ftp 下载几个文件

> ID：16140921
> 
> 赞同：0
> 
> 时间：2013-04-22T06:41:04.553
> 
> 标签：python, file, download, simultaneous, ftplib

我是 Python 编程的新手。我的问题是，如何同时下载几个文件。不是一个文件一个文件，而是同时从 ftp 上的一个目录。现在我使用这个脚本，但我不知道如何重建这个代码：

```
 filenames = []
    ftp.retrlines("NLST", filenames.append)
    print filenames
    print path
    for filename in filenames:
        local_filename = filename
        print filename
        print local_filename
        f = open(local_filename, "wb") 

        s = ftp.size(local_filename)     
        sMB = s/(1024*1024) 
        print "file name: " + local_filename + "\nfile size: " + str(sMB) + " MB" 
        ftp.retrbinary("RETR %s" % local_filename, f.write) 
    print "\n Done :) "
    time.sleep(2)
    f.close()
    ftp.quit() #closing connection
    time.sleep(5) 
```

它工作正常，但不是我需要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-11T20:17:37.707

您可以使用多个线程或进程。`ftplib.FTP`确保在每个线程中创建一个新对象。最简单的方法（代码方面）是使用`multiprocessing.Pool`：

```
#!/usr/bin/env python
from multiprocessing.dummy import Pool # use threads
try:
    from urllib import urlretrieve
except ImportError: # Python 3
    from urllib.request import urlretrieve

def download(url):
    url = url.strip()
    try:
        return urlretrieve(url, url2filename(url)), None
    except Exception as e:
        return None, e

if __name__ == "__main__":
   p = Pool(20) # specify number of concurrent downloads
   print(p.map(download, open('urls'))) # perform parallel downloads 
```

其中`urls`包含要下载的文件的 ftp url，例如，`ftp://example.com/path/to/file`并[`url2filename()`](https://gist.github.com/zed/c2168b9c52b032b5fb7d)从 url 中提取文件名部分，例如：

```
import os
import posixpath
try:
    from urlparse import urlsplit
    from urllib import unquote
except ImportError: # Python 3
    from urllib.parse import urlsplit, unquote

def url2filename(url, encoding='utf-8'):
    """Return basename corresponding to url.

    >>> print url2filename('http://example.com/path/to/dir%2Ffile%C3%80?opt=1')
    fileÀ
    """
    urlpath = urlsplit(url).path 
    basename = posixpath.basename(unquote(urlpath))
    if os.path.basename(basename) != basename:
        raise ValueError(url)  # reject 'dir%5Cbasename.ext' on Windows
    return basename 
```

# javascript - 如何更改日期值？

> ID：16140924
> 
> 赞同：0
> 
> 时间：2013-04-22T06:41:15.297
> 
> 标签：javascript, jquery

我有以下 HTML，但我无法更改日期值和标题的值。你能建议如何做到这一点吗？

```
<a title="Date::04/08/2013">
  <span class="name">Date::</span>
  <span data-value="04/08/2013" class="value">04/16/2013</span>
</a> 
```

对不起，不完整的问题。

值 04/16/2013 是使用 jQuery 分配的，但 title="Date::04/08/2013" 和 data-value="04/08/2013" 没有改变。我想`"Date::04/08/2013"`应该`"Date::04/16/2013"`和`data-value="04/08/2013"`应该是`data-value="04/16/2013"`。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:34:41.817

我想你有这个

```
<a title="Date::04/08/2013" id='date-link'>
  <span id="date-title" class="name">Date::</span>
  <span id="date-value" data-value="04/08/2013" class="value">04/16/2013</span>
</a> 
```

你想要跟随

```
<a title="Date::04/16/2013" id='date-link'>
  <span id="date-title" class="name">Date::</span>
  <span id="date-value" data-value="04/16/2013" class="value">04/16/2013</span>
</a> 
```

如果是这样，您可以尝试以下

```
var dateTitle = jQuery("#date-title").html()
var dateValue = jQuery("#date-value").html()
jQuery('#date-link').attr('title', dateTitle+dateValue);
jQuery('#date-value').attr('data-value', dateValue); 
```

您可以使用以下代码创建一个 html 文件并检查您自己的

```
<script src="http://code.jquery.com/jquery-1.7.2.min.js" type="text/javascript"></script>

<a title="Date::04/08/2013" id='date-link'>
  <span id="date-title" class="name">Date::</span>
  <span id="date-value" data-value="04/08/2013" class="value">04/16/2013</span>
</a>

<a href ="javascript:void(0)" onclick="abc()">Click Here</a>

<script>
    function abc() {
    var dateTitle = jQuery("#date-title").html()
    var dateValue = jQuery("#date-value").html()
    jQuery('#date-link').attr('title', dateTitle+dateValue);
    jQuery('#date-value').attr('data-value', dateValue);}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:46:57.333

```
$('.value').attr('data-value',$('.value').html()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T06:51:32.590

```
var value = $('.value').text();
$('.value').attr('data-value',value) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T06:45:31.067

尝试这个 ：

```
$('span.value').attr("data-value", "04/16/2013") 
```

`.data("value")`可能不起作用，因为**值**映射到其他东西。

此外，如果可能，请尝试使用**value**以外的其他关键字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T06:53:56.963

**html代码：**

```
<a title="Date" id="data">
  <span class="name">Date::</span>
  <span data-value="04/08/2013" class="value">04/16/2013</span>
</a> 
```

**js：**

```
$("#data").find('span').attr("data-value", "04/16/2013"); 
```

试试这个你会得到数据值......

# c# - SQLite 数据源路径奇怪的问题？

> ID：16140925
> 
> 赞同：3
> 
> 时间：2013-04-22T06:41:19.493
> 
> 标签：c#, sql, database, sqlite, connection-string

SQLiteConnection 字符串最基本的形式是“data source = ...”

我尝试了一个演示，其中有一个名为 MyData.sdb 的 SQLite 数据库文件，该文件位于我的演示项目文件夹树中（例如：DemoProject\MyData.sdb）。以下 SQLiteConnection 字符串有效：

```
"data source = MyData.sdb" 
```

我可以选择表确定。我什至尝试将 MyData.sdb 添加到我的演示项目文件夹中的另一个子文件夹（例如，DemoProject\Data\MyData.sdb）并且上面的连接字符串仍然有效？哇，不敢相信。但现在最奇怪的是（与我在演示项目中所经历的相反）：

当我尝试另一个项目并将其应用于它时，当我尝试选择一个确实存在于我的 SQLite 数据库中的表时，它抛出了一个名为“没有这样的表...”的异常。太奇怪了。我怀疑这是因为数据库文件的路径不正确。我试过使用数据库文件的绝对路径，如下所示：

```
"data source = D:\\demo project\\MyData.sdb" 
```

然后它起作用了，为什么我在演示项目中很好地为我的SQLite数据库文件使用了相对路径，但不能在我的新项目中应用？

我认为这并不容易，它需要你的经验来解释。奇怪的事情可能在演示项目或我的新项目中，应该有一个工作异常。

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-29T00:01:58.730

由于您的应用程序的当前工作目录可能是什么，您的数据库文件的相对路径可能在项目之间不起作用。您可以通过在应用程序运行时获取来了解应用程序的工作目录`Environment.CurrentDirectory`。

例如，在 C# 控制台应用程序中，工作目录可能是：

```
D:\Projects\SQLiteTest\bin\Debug 
```

如果您的数据源恰好是`"data source = MyData.sdb"`，那么您的控制台应用程序将在`D:\Projects\SQLiteTest\bin\Debug\MyData.sdb`.

如果您的下一个应用程序是在 IIS 中运行的 asp.net 应用程序，则工作目录可能是：

```
C:\windows\system32\inetsrv 
```

您的应用程序将无法找到您的数据库位置，因为您很可能将数据库放在项目文件夹中，而不是 at `C:\windows\system32\inetsrv\MyData.sdb`。

[这个 SO question](https://stackoverflow.com/questions/5001980/app-config-connection-string-relative-path)包含一些解决方案，以始终如一地解析数据库的相对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-28T13:59:47.677

@"数据源=" + System.Windows.Forms.Application.StartupPath + "演示项目\MyData.sdb";

带有此代码的 this 是运行应用程序的数据库

# eclipse - 有没有Eclipse插件可以代替Putty和WinScp等外部工具的使用

> ID：16140926
> 
> 赞同：5
> 
> 时间：2013-04-22T06:41:22.927
> 
> 标签：eclipse, plugins, remote-server

每次我想在远程服务器上运行我的项目时，我需要将它从 Eclipse 导出为 jar 文件，使用 WinSCP 将文件从本地机器传输到远程服务器，然后使用 Putty 在远程运行它服务器。我想知道是否有更合适的方法来处理这个问题，例如一个允许我直接从 Eclipse 执行此操作的 Eclipse 插件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T07:06:37.007

此功能存在于 Eclipse 中，称为`Remote Systems Explorer`.

1.  `Remote Systems`转到`Window`-> `Show View`->打开视图`Other...`。

2.  然后在此视图中右键单击并选择 on `New connection...`。

3.  选择`SSH Only`远程系统类型并单击`Next`。

4.  填写必要的信息，例如主机名和连接名称，然后单击`Finish`。

5.  从视图中选择您刚刚创建的`Connector`节点并选择。输入您的凭据并按。`Remote Systems``Connect...``Ok`

如果您成功登录，您将在节点上看到一个绿色箭头，指示您已连接。

您可以右键单击`Shells`或`Terminals`并选择`Launch Shell/Terminal`。一个新的`Remote Shell`或`Terminal`应该出现在您可以输入命令的位置。

还可以在 Eclipse 中远程创建文件、打开/编辑和保存它们。

更多文档可以在[Eclipse RSE 手册](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.rse.doc.user%2Fgettingstarted%2Fg_start.html)中找到。

# content-management-system - ModX 同上：显示选择性文档

> ID：16140928
> 
> 赞同：0
> 
> 时间：2013-04-22T06:41:29.957
> 
> 标签：content-management-system, modx, modx-evolution, ditto, modx-resources

我想使用 Ditto 来显示文档列表。我似乎无法将其设置为正常工作。到目前为止，我有：

```
[!Ditto? &amp;parents=`3` &amp;documents=`10,32,339,86,303,302` &amp;tpl=`blog_summary`!] 
```

但这给了我文档 3 下的所有项目。

有谁知道这样做的正确方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:49:09.000

Try to set a "parents" parameter to 0 or delete parameter "parents", documents exactly are childs of document with id=3?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:10:34.247

根据文档`Documents: overrides parents property`。[同上文档](http://rtfm.modx.com/display/ADDON/Ditto+Parameters)

所以你的代码应该是这样的：

```
[!Ditto? &documents=`10,32,339,86,303,302` &tpl=`blog_summary`!] 
```

PS：maximkou 可能会失败，因为父 0 被认为是层次结构的顶层元素。

# android - android谷歌地图获取纬度和经度问题

> ID：16140933
> 
> 赞同：0
> 
> 时间：2013-04-22T06:41:45.473
> 
> 标签：android, google-maps

我创建了示例应用程序，我想从字符串地址行获取纬度和经度。这是我用来获取纬度和经度的方法

 `````
private void getFromLocation(String address) {
    Geocoder geoCoder = new Geocoder(this, Locale.getDefault());
    try {
        List<Address> addresses = geoCoder.getFromLocationName(address, 1);

        if (addresses.size() > 0) {
            GeoPoint p = new GeoPoint(
                    (int) (addresses.get(0).getLatitude() * 1E6),
                    (int) (addresses.get(0).getLongitude() * 1E6));

            latitude = p.getLatitudeE6() / 1E6;
            longtitude = p.getLongitudeE6() / 1E6;
            HAMBURG = new LatLng(latitude, longtitude);
            Log.d("latitide", "" + latitude);
            Log.d("longtitude", "" + longtitude);

        } else {
            Log.d("Addess", "Address not found");
        }
    } catch (Exception ee) {
        Log.d("ex", ee.toString());
    }
} 
```` 

`此方法抛出异常“ `java.io.IOException: Unable to parse response from server` ”。我犯了什么错误吗？有没有其他解决方案来获得纬度和经度？`

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:49:00.593

An IOException is likely to indicate that the remote request failed for some relatively low-level reason;

**`IOException: if the network is unavailable or any other I/O problem occurs`**

* * *

```
public List<Address> getFromLocationName (String locationName, int maxResults) 
```

Added in API level 1 Returns an array of Addresses that are known to describe the named location, which may be a place name such as "Dalvik, Iceland", an address such as "1600 Amphitheatre Parkway, Mountain View, CA", an airport code such as "SFO", etc.. The returned addresses will be localized for the locale provided to this class's constructor.

The query will block and returned values will be obtained by means of a network lookup. The results are a best guess and are not guaranteed to be meaningful or correct. It may be useful to call this method from a thread separate from your primary UI thread.

## Parameters

**locationName:** a user-supplied description of a location

**maxResults:** max number of results to return. Smaller numbers (1 to 5) are recommended

## **Returns:**

a list of Address objects. Returns null or empty list if no matches were found or there is no backend service available.

## Throws

**IllegalArgumentException:** if locationName is null

**IOException:** if the network is unavailable or any other I/O problem occurs

* * *

So, Do

**Please try to avoid several hits for address in a minute. Run this code on different device.**

for more detail check this [artical](http://developer.android.com/reference/android/location/Geocoder.html#getFromLocationName%28java.lang.String,%20int%29).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:57:03.157

```
 List<Address> foundGeocode = null;
   /* find the addresses  by using getFromLocationName() method with the given address*/
   try {
    foundGeocode = new Geocoder(MainActivity.this).getFromLocationName("Your location",1);
     Double s=foundGeocode.get(0).getLatitude(); //getting latitude
       Double n=foundGeocode.get(0).getLongitude();
        } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
        } 
`````

# c# - 如何从 C 调用 C# DLL？

> ID：16140939
> 
> 赞同：0
> 
> 时间：2013-04-22T06:42:26.380
> 
> 标签：c#, c, dll, unmanaged

我正在尝试使用[此](https://sites.google.com/site/robertgiesecke/Home/uploads/unmanagedexports)解决方案。我可以成功创建一个 C# DLL，但我不知道如何从 C 中调用它（没有使用这种语言的经验）。有人可以帮我吗？

我已经看到了类似的问题，但他们没有为我的问题提供答案。我已经知道如何使用 C# 创建非托管 DLL。我不知道的事情 - 我如何在 C 代码中使用它？

# android - android - 是否可以在整个页面中显示一行列表视图并通过按钮或手指翻转转到下一行？

> ID：16140942
> 
> 赞同：0
> 
> 时间：2013-04-22T06:42:43.070
> 
> 标签：android

我有一个自定义 ListView（每行顶部有一个大图像，下面是 textview），这是我的问题：是否可以在整个页面中仅显示 1 行，并使用下一个按钮或手指显示下一个行有一掷千金的效果？

这是一个描述性的图像：

![在此处输入图像描述](https://i.stack.imgur.com/k179K.png)

这将是我的 list.java 文件，但我已经按照我的描述更改了自定义布局。

```
/*
 * Copyright (C) 2008 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.example.android.apis.view;

import android.app.ListActivity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;
import android.widget.ImageView;
import android.graphics.BitmapFactory;
import android.graphics.Bitmap;
import com.example.android.apis.R;

/**
 * Demonstrates how to write an efficient list adapter. The adapter used in this example binds
 * to an ImageView and to a TextView for each row in the list.
 *
 * To work efficiently the adapter implemented here uses two techniques:
 * - It reuses the convertView passed to getView() to avoid inflating View when it is not necessary
 * - It uses the ViewHolder pattern to avoid calling findViewById() when it is not necessary
 *
 * The ViewHolder pattern consists in storing a data structure in the tag of the view returned by
 * getView(). This data structures contains references to the views we want to bind data to, thus
 * avoiding calls to findViewById() every time getView() is invoked.
 */
public class List14 extends ListActivity {

    private static class EfficientAdapter extends BaseAdapter {
        private LayoutInflater mInflater;
        private Bitmap mIcon1;
        private Bitmap mIcon2;

        public EfficientAdapter(Context context) {
            // Cache the LayoutInflate to avoid asking for a new one each time.
            mInflater = LayoutInflater.from(context);

            // Icons bound to the rows.
            mIcon1 = BitmapFactory.decodeResource(context.getResources(), R.drawable.icon48x48_1);
            mIcon2 = BitmapFactory.decodeResource(context.getResources(), R.drawable.icon48x48_2);
        }

        /**
         * The number of items in the list is determined by the number of speeches
         * in our array.
         *
         * @see android.widget.ListAdapter#getCount()
         */
        public int getCount() {
            return DATA.length;
        }

        /**
         * Since the data comes from an array, just returning the index is
         * sufficent to get at the data. If we were using a more complex data
         * structure, we would return whatever object represents one row in the
         * list.
         *
         * @see android.widget.ListAdapter#getItem(int)
         */
        public Object getItem(int position) {
            return position;
        }

        /**
         * Use the array index as a unique id.
         *
         * @see android.widget.ListAdapter#getItemId(int)
         */
        public long getItemId(int position) {
            return position;
        }

        /**
         * Make a view to hold each row.
         *
         * @see android.widget.ListAdapter#getView(int, android.view.View,
         *      android.view.ViewGroup)
         */
        public View getView(int position, View convertView, ViewGroup parent) {
            // A ViewHolder keeps references to children views to avoid unneccessary calls
            // to findViewById() on each row.
            ViewHolder holder;

            // When convertView is not null, we can reuse it directly, there is no need
            // to reinflate it. We only inflate a new View when the convertView supplied
            // by ListView is null.
            if (convertView == null) {
                convertView = mInflater.inflate(R.layout.list_item_icon_text, null);

                // Creates a ViewHolder and store references to the two children views
                // we want to bind data to.
                holder = new ViewHolder();
                holder.text = (TextView) convertView.findViewById(R.id.text);
                holder.icon = (ImageView) convertView.findViewById(R.id.icon);

                convertView.setTag(holder);
            } else {
                // Get the ViewHolder back to get fast access to the TextView
                // and the ImageView.
                holder = (ViewHolder) convertView.getTag();
            }

            // Bind the data efficiently with the holder.
            holder.text.setText(DATA[position]);
            holder.icon.setImageBitmap((position & 1) == 1 ? mIcon1 : mIcon2);

            return convertView;
        }

        static class ViewHolder {
            TextView text;
            ImageView icon;
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setListAdapter(new EfficientAdapter(this));
    }

    private static final String[] DATA = {
            "Abbaye de Belloc", "Abbaye du Mont des Cats", "Abertam",
            "Abondance", "Ackawi", "Acorn", "Adelost", "Affidelice au Chablis",
            "Afuega'l Pitu", "Airag", "Airedale", "Aisy Cendre",
            "Allgauer Emmentaler", "Alverca", "Ambert", "American Cheese",
            "Ami du Chambertin", "Anejo Enchilado", "Anneau du Vic-Bilh",
            "Anthoriro", "Appenzell", "Aragon", "Ardi Gasna", "Ardrahan",
            "Armenian String", "Aromes au Gene de Marc", "Asadero", "Asiago",
            "Aubisque Pyrenees", "Autun", "Avaxtskyr", "Baby Swiss", "Babybel",
            "Baguette Laonnaise", "Bakers", "Baladi", "Balaton", "Bandal",
            "Banon", "Barry's Bay Cheddar", "Basing", "Basket Cheese",
            "Bath Cheese", "Bavarian Bergkase", "Baylough", "Beaufort",
            "Beauvoorde", "Beenleigh Blue", "Beer Cheese", "Bel Paese",
            "Bergader", "Bergere Bleue", "Berkswell", "Beyaz Peynir",
            "Bierkase", "Bishop Kennedy", "Blarney", "Bleu d'Auvergne",
            "Bleu de Gex", "Bleu de Laqueuille", "Bleu de Septmoncel",
            "Bleu Des Causses", "Blue", "Blue Castello", "Blue Rathgore",
            "Blue Vein (Australian)", "Blue Vein Cheeses", "Bocconcini",
            "Bocconcini (Australian)", "Boeren Leidenkaas", "Bonchester",
            "Bosworth", "Bougon", "Boule Du Roves", "Boulette d'Avesnes",
            "Boursault", "Boursin", "Bouyssou", "Bra", "Braudostur",
            "Breakfast Cheese", "Brebis du Lavort", "Brebis du Lochois",
            "Brebis du Puyfaucon", "Bresse Bleu", "Brick", "Brie",
            "Brie de Meaux", "Brie de Melun", "Brillat-Savarin", "Brin",
            "Brin d' Amour", "Brin d'Amour", "Brinza (Burduf Brinza)",
            "Briquette de Brebis", "Briquette du Forez", "Broccio",
            "Broccio Demi-Affine", "Brousse du Rove", "Bruder Basil",
            "Brusselae Kaas (Fromage de Bruxelles)", "Bryndza",
            "Buchette d'Anjou", "Buffalo", "Burgos", "Butte", "Butterkase",
            "Button (Innes)", "Buxton Blue", "Cabecou", "Caboc", "Cabrales",
            "Cachaille", "Caciocavallo", "Caciotta", "Caerphilly",
            "Cairnsmore", "Calenzana", "Cambazola", "Camembert de Normandie",
            "Canadian Cheddar", "Canestrato", "Cantal", "Caprice des Dieux",
            "Capricorn Goat", "Capriole Banon", "Carre de l'Est",
            "Casciotta di Urbino", "Cashel Blue", "Castellano", "Castelleno",
            "Castelmagno", "Castelo Branco", "Castigliano", "Cathelain",
            "Celtic Promise", "Cendre d'Olivet", "Cerney", "Chabichou",
            "Chabichou du Poitou", "Chabis de Gatine", "Chaource", "Charolais",
            "Chaumes", "Cheddar", "Cheddar Clothbound", "Cheshire", "Chevres",
            "Chevrotin des Aravis", "Chontaleno", "Civray",
            "Coeur de Camembert au Calvados", "Coeur de Chevre", "Colby",
            "Cold Pack", "Comte", "Coolea", "Cooleney", "Coquetdale",
            "Corleggy", "Cornish Pepper", "Cotherstone", "Cotija",
            "Cottage Cheese", "Cottage Cheese (Australian)", "Cougar Gold",
            "Coulommiers", "Coverdale", "Crayeux de Roncq", "Cream Cheese",
            "Cream Havarti", "Crema Agria", "Crema Mexicana", "Creme Fraiche",
            "Crescenza", "Croghan", "Crottin de Chavignol",
            "Crottin du Chavignol", "Crowdie", "Crowley", "Cuajada", "Curd",
            "Cure Nantais", "Curworthy", "Cwmtawe Pecorino",
            "Cypress Grove Chevre", "Danablu (Danish Blue)", "Danbo",
            "Danish Fontina", "Daralagjazsky", "Dauphin", "Delice des Fiouves",
            "Denhany Dorset Drum", "Derby", "Dessertnyj Belyj", "Devon Blue",
            "Devon Garland", "Dolcelatte", "Doolin", "Doppelrhamstufel",
            "Dorset Blue Vinney", "Double Gloucester", "Double Worcester",
            "Dreux a la Feuille", "Dry Jack", "Duddleswell", "Dunbarra",
            "Dunlop", "Dunsyre Blue", "Duroblando", "Durrus",
            "Dutch Mimolette (Commissiekaas)", "Edam", "Edelpilz",
            "Emental Grand Cru", "Emlett", "Emmental", "Epoisses de Bourgogne",
            "Esbareich", "Esrom", "Etorki", "Evansdale Farmhouse Brie",
            "Evora De L'Alentejo", "Exmoor Blue", "Explorateur", "Feta",
            "Feta (Australian)", "Figue", "Filetta", "Fin-de-Siecle",
            "Finlandia Swiss", "Finn", "Fiore Sardo", "Fleur du Maquis",
            "Flor de Guia", "Flower Marie", "Folded",
            "Folded cheese with mint", "Fondant de Brebis", "Fontainebleau",
            "Fontal", "Fontina Val d'Aosta", "Formaggio di capra", "Fougerus",
            "Four Herb Gouda", "Fourme d' Ambert", "Fourme de Haute Loire",
            "Fourme de Montbrison", "Fresh Jack", "Fresh Mozzarella",
            "Fresh Ricotta", "Fresh Truffles", "Fribourgeois", "Friesekaas",
            "Friesian", "Friesla", "Frinault", "Fromage a Raclette",
            "Fromage Corse", "Fromage de Montagne de Savoie", "Fromage Frais",
            "Fruit Cream Cheese", "Frying Cheese", "Fynbo", "Gabriel",
            "Galette du Paludier", "Galette Lyonnaise",
            "Galloway Goat's Milk Gems", "Gammelost", "Gaperon a l'Ail",
            "Garrotxa", "Gastanberra", "Geitost", "Gippsland Blue", "Gjetost",
            "Gloucester", "Golden Cross", "Gorgonzola", "Gornyaltajski",
            "Gospel Green", "Gouda", "Goutu", "Gowrie", "Grabetto", "Graddost",
            "Grafton Village Cheddar", "Grana", "Grana Padano", "Grand Vatel",
            "Grataron d' Areches", "Gratte-Paille", "Graviera", "Greuilh",
            "Greve", "Gris de Lille", "Gruyere", "Gubbeen", "Guerbigny",
            "Halloumi", "Halloumy (Australian)", "Haloumi-Style Cheese",
            "Harbourne Blue", "Havarti", "Heidi Gruyere", "Hereford Hop",
            "Herrgardsost", "Herriot Farmhouse", "Herve", "Hipi Iti",
            "Hubbardston Blue Cow", "Hushallsost", "Iberico", "Idaho Goatster",
            "Idiazabal", "Il Boschetto al Tartufo", "Ile d'Yeu",
            "Isle of Mull", "Jarlsberg", "Jermi Tortes", "Jibneh Arabieh",
            "Jindi Brie", "Jubilee Blue", "Juustoleipa", "Kadchgall", "Kaseri",
            "Kashta", "Kefalotyri", "Kenafa", "Kernhem", "Kervella Affine",
            "Kikorangi", "King Island Cape Wickham Brie", "King River Gold",
            "Klosterkaese", "Knockalara", "Kugelkase", "L'Aveyronnais",
            "L'Ecir de l'Aubrac", "La Taupiniere", "La Vache Qui Rit",
            "Laguiole", "Lairobell", "Lajta", "Lanark Blue", "Lancashire",
            "Langres", "Lappi", "Laruns", "Lavistown", "Le Brin",
            "Le Fium Orbo", "Le Lacandou", "Le Roule", "Leafield", "Lebbene",
            "Leerdammer", "Leicester", "Leyden", "Limburger",
            "Lincolnshire Poacher", "Lingot Saint Bousquet d'Orb", "Liptauer",
            "Little Rydings", "Livarot", "Llanboidy", "Llanglofan Farmhouse",
            "Loch Arthur Farmhouse", "Loddiswell Avondale", "Longhorn",
            "Lou Palou", "Lou Pevre", "Lyonnais", "Maasdam", "Macconais",
            "Mahoe Aged Gouda", "Mahon", "Malvern", "Mamirolle", "Manchego",
            "Manouri", "Manur", "Marble Cheddar", "Marbled Cheeses",
            "Maredsous", "Margotin", "Maribo", "Maroilles", "Mascares",
            "Mascarpone", "Mascarpone (Australian)", "Mascarpone Torta",
            "Matocq", "Maytag Blue", "Meira", "Menallack Farmhouse",
            "Menonita", "Meredith Blue", "Mesost", "Metton (Cancoillotte)",
            "Meyer Vintage Gouda", "Mihalic Peynir", "Milleens", "Mimolette",
            "Mine-Gabhar", "Mini Baby Bells", "Mixte", "Molbo",
            "Monastery Cheeses", "Mondseer", "Mont D'or Lyonnais", "Montasio",
            "Monterey Jack", "Monterey Jack Dry", "Morbier",
            "Morbier Cru de Montagne", "Mothais a la Feuille", "Mozzarella",
            "Mozzarella (Australian)", "Mozzarella di Bufala",
            "Mozzarella Fresh, in water", "Mozzarella Rolls", "Munster",
            "Murol", "Mycella", "Myzithra", "Naboulsi", "Nantais",
            "Neufchatel", "Neufchatel (Australian)", "Niolo", "Nokkelost",
            "Northumberland", "Oaxaca", "Olde York", "Olivet au Foin",
            "Olivet Bleu", "Olivet Cendre", "Orkney Extra Mature Cheddar",
            "Orla", "Oschtjepka", "Ossau Fermier", "Ossau-Iraty", "Oszczypek",
            "Oxford Blue", "P'tit Berrichon", "Palet de Babligny", "Paneer",
            "Panela", "Pannerone", "Pant ys Gawn", "Parmesan (Parmigiano)",
            "Parmigiano Reggiano", "Pas de l'Escalette", "Passendale",
            "Pasteurized Processed", "Pate de Fromage", "Patefine Fort",
            "Pave d'Affinois", "Pave d'Auge", "Pave de Chirac",
            "Pave du Berry", "Pecorino", "Pecorino in Walnut Leaves",
            "Pecorino Romano", "Peekskill Pyramid", "Pelardon des Cevennes",
            "Pelardon des Corbieres", "Penamellera", "Penbryn", "Pencarreg",
            "Perail de Brebis", "Petit Morin", "Petit Pardou", "Petit-Suisse",
            "Picodon de Chevre", "Picos de Europa", "Piora",
            "Pithtviers au Foin", "Plateau de Herve", "Plymouth Cheese",
            "Podhalanski", "Poivre d'Ane", "Polkolbin", "Pont l'Eveque",
            "Port Nicholson", "Port-Salut", "Postel", "Pouligny-Saint-Pierre",
            "Pourly", "Prastost", "Pressato", "Prince-Jean",
            "Processed Cheddar", "Provolone", "Provolone (Australian)",
            "Pyengana Cheddar", "Pyramide", "Quark", "Quark (Australian)",
            "Quartirolo Lombardo", "Quatre-Vents", "Quercy Petit",
            "Queso Blanco", "Queso Blanco con Frutas --Pina y Mango",
            "Queso de Murcia", "Queso del Montsec", "Queso del Tietar",
            "Queso Fresco", "Queso Fresco (Adobera)", "Queso Iberico",
            "Queso Jalapeno", "Queso Majorero", "Queso Media Luna",
            "Queso Para Frier", "Queso Quesadilla", "Rabacal", "Raclette",
            "Ragusano", "Raschera", "Reblochon", "Red Leicester",
            "Regal de la Dombes", "Reggianito", "Remedou", "Requeson",
            "Richelieu", "Ricotta", "Ricotta (Australian)", "Ricotta Salata",
            "Ridder", "Rigotte", "Rocamadour", "Rollot", "Romano",
            "Romans Part Dieu", "Roncal", "Roquefort", "Roule",
            "Rouleau De Beaulieu", "Royalp Tilsit", "Rubens", "Rustinu",
            "Saaland Pfarr", "Saanenkaese", "Saga", "Sage Derby",
            "Sainte Maure", "Saint-Marcellin", "Saint-Nectaire",
            "Saint-Paulin", "Salers", "Samso", "San Simon", "Sancerre",
            "Sap Sago", "Sardo", "Sardo Egyptian", "Sbrinz", "Scamorza",
            "Schabzieger", "Schloss", "Selles sur Cher", "Selva", "Serat",
            "Seriously Strong Cheddar", "Serra da Estrela", "Sharpam",
            "Shelburne Cheddar", "Shropshire Blue", "Siraz", "Sirene",
            "Smoked Gouda", "Somerset Brie", "Sonoma Jack",
            "Sottocenare al Tartufo", "Soumaintrain", "Sourire Lozerien",
            "Spenwood", "Sraffordshire Organic", "St. Agur Blue Cheese",
            "Stilton", "Stinking Bishop", "String", "Sussex Slipcote",
            "Sveciaost", "Swaledale", "Sweet Style Swiss", "Swiss",
            "Syrian (Armenian String)", "Tala", "Taleggio", "Tamie",
            "Tasmania Highland Chevre Log", "Taupiniere", "Teifi", "Telemea",
            "Testouri", "Tete de Moine", "Tetilla", "Texas Goat Cheese",
            "Tibet", "Tillamook Cheddar", "Tilsit", "Timboon Brie", "Toma",
            "Tomme Brulee", "Tomme d'Abondance", "Tomme de Chevre",
            "Tomme de Romans", "Tomme de Savoie", "Tomme des Chouans",
            "Tommes", "Torta del Casar", "Toscanello", "Touree de L'Aubier",
            "Tourmalet", "Trappe (Veritable)", "Trois Cornes De Vendee",
            "Tronchon", "Trou du Cru", "Truffe", "Tupi", "Turunmaa",
            "Tymsboro", "Tyn Grug", "Tyning", "Ubriaco", "Ulloa",
            "Vacherin-Fribourgeois", "Valencay", "Vasterbottenost", "Venaco",
            "Vendomois", "Vieux Corse", "Vignotte", "Vulscombe",
            "Waimata Farmhouse Blue", "Washed Rind Cheese (Australian)",
            "Waterloo", "Weichkaese", "Wellington", "Wensleydale",
            "White Stilton", "Whitestone Farmhouse", "Wigmore",
            "Woodside Cabecou", "Xanadu", "Xynotyro", "Yarg Cornish",
            "Yarra Valley Pyramid", "Yorkshire Blue", "Zamorano",
            "Zanetti Grana Padano", "Zanetti Parmigiano Reggiano"};
} 
```

这是我的自定义 list_item_icon_text.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

    <ImageView
    android:id="@+id/icon"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

    <TextView
    android:id="@+id/text"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

# python - 有没有办法在 PyDev 项目中抑制 eclipse 中未解决的导入？

> ID：16140948
> 
> 赞同：9
> 
> 时间：2013-04-22T06:43:09.947
> 
> 标签：python, eclipse, pydev

我在eclipse中有一个Python项目，它导入了Python找不到的模块。以下是一些案例的列表：

1.  出于兼容性目的，某些文件可能会同时导入某些内置模块*的 2.x 和 3.x 版本（但我只能在项目设置中指定一个语法版本）*

2.  因为我正在编写的脚本将在与我非常不同的环境中运行，所以我使用的一些模块甚至不存在于系统中（*比如特定于 Windows 的模块，或者来自其他项目的模块，我真的不想直接链接到这个*）

3.  可能会或可能不会安装在将要执行脚本的机器上的模块（当然，包装在 try-except 子句中）等等......

将这些模块标记为错误非常烦人，因为它们使 REAL 语法错误变得不那么明显。我知道这种行为可以以某种方式被覆盖——我有另一个项目没有将未解决的导入标记为错误，但我找不到合适的设置。谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T07:07:14.377

添加`#@UnresolvedImport`到你的进口怎么样？例如：

```
import a_module_pydev_doesnt_know #@UnresolvedImport 
```

当您的光标位于 PyDev 标记错误的行中时，您只需按 Ctrl-1 并选择相应的条目以自动添加它。

*编辑：*我对它没有太多经验，但似乎如果你想为整个项目更改它（或者在不接触你的代码的情况下这样做），你也可以将有问题的模块添加到强制内置： http: [//pydev.org/manual_101_interpreter.html#PyDevInterpreterConfiguration-ForcedBuiltins](http://pydev.org/manual_101_interpreter.html#PyDevInterpreterConfiguration-ForcedBuiltins)

# erlang - 如何从 An Erlang Pid 中获取每个部分？

> ID：16140949
> 
> 赞同：2
> 
> 时间：2013-04-22T06:43:10.407
> 
> 标签：erlang, pid

`pid(A, B, C)`可以生成 pid `<A.B.C>`，如何从 pid 中获取 A、B 和 C？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T07:17:03.350

您可以使用`pid_to_list`, [Erlang doc](http://www.erlang.org/doc/man/erlang.html#list_to_pid-1)，但您可能不应该使用，因为这通常是一种不好的做法。

# windows-phone-8 - Windows Phone 卡模拟模式

> ID：16140951
> 
> 赞同：1
> 
> 时间：2013-04-22T06:43:33.890
> 
> 标签：windows-phone-8, nfc

谁能给我一些关于如何在 Windows Phone 8 中使用 CardEmulationMode 的指南？我是 Windows Phone 编程的初学者，我要求我的手机在 NFC 卡仿真模式下用于我正在创建的应用程序。

# iphone - 使用自定义字体绘制标签

> ID：16140954
> 
> 赞同：-1
> 
> 时间：2013-04-22T06:43:52.230
> 
> 标签：iphone

我想用 Origram 字体绘制一个标签。但是在字母边缘折叠文本时存在一些问题。任何人都可以帮助我。

我附上了图片。我的标签将如下图所示。这是绘图文本的图像。

![在此处输入图像描述](https://i.stack.imgur.com/AkBaz.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:18:22.260

[第 1 步：从http://www.fonts2u.com/origram.font](http://www.fonts2u.com/origram.font)站点下载 origram 字体文件
第 2 步：将字体文件添加到您的项目
第 3 步：在应用程序中注册您的字体，请参阅以下屏幕截图。
![请参阅此屏幕截图以使用您的应用程序配置外部字体文件](https://i.stack.imgur.com/vHFgJ.png)
第 4 步：使用以下代码创建标签并设置字体

```
UILabel *lbl = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320, 100)];
[lbl setFont:[UIFont fontWithName:@"Origram" size:30.0f]];
[lbl setTextAlignment:NSTextAlignmentCenter];
[lbl setText:@"Origram Font Test"];
[self.view addSubview:lbl]; 
```

# php - Run a Cron Job from 1 out of 4 identical Web servers all with the same job

> ID：16140960
> 
> 赞同：1
> 
> 时间：2013-04-22T06:44:23.030
> 
> 标签：php, mysql, linux, cron

I'm using AWS Amazon Web Services and I have 4 identical Web Servers. I have a cron job setup to sent out emails that only needs to run from one server but exists on all 4.

Everything on these web servers is identical which suits me but currently the cron job runs on all 4\. I therefore looking for a solution on how to have the job on all 4 servers but only run on one.

I do have a database and thought of using a tmp table to the first to write/register itself in that table would then be the only one to run (the others would read this and then not execute past this point). But I was concerned because they all use an identical system clock and therefore might read the table at the same time and even though one writes to it the others assume they also have access to run.

Would using a table be able to restrict 4 webservers to only 1 contined or would the identical clock factor get in the way?

Note: the server names have the potential of changing with time as they are more like resources then permanent systems. (eg: can spin new ones up when required)...

Is there a better way to do this? Note: I don't want a different server and I want them all identical.

thankyou

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:57:33.707

对我来说，我会这样做：

```
1 - create a lock for each of the server
2 - define a list of server like ['1'=>'server ip', '2'=>'server ip',...]
3 - pass in server id in cron job as args
4 - modify the script if (lock not exists) do run then create a lock for this server, delete the lock for next server.
5 - delete the lock for the first server to start with. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:49:59.767

每台机器都有不同的主机名，因此您可以使用它仅在所需机器上执行作业。例如，如果机器是“server01”、“server02”等，那么在 PHP 中你可以这样做：

```
if (gethostname() === 'server01') {
    // do the task
} 
```

另一种方法是，不是为所有服务器提供一个服务器映像，而是使用两个略有不同的映像，一个用于“主”服务器（具有 cron 任务等），另一个用于所有其他服务器（“辅助”）服务器。

# java - performace issue with the code ,exponential working

> ID：16140962
> 
> 赞同：0
> 
> 时间：2013-04-22T06:44:24.833
> 
> 标签：java, performance, algorithm

I have two lists of type object with data , the first one is principal entity and the second is dependent entity. In addition I have key table that relate between the principal and depended entity objects. In the first for statement I get one instance of type object and then I go and loop on every instance of the second entity and trying to find Match between them (i think exponential problem…) ,if match is find update the principal entity with the reference object .

The following code is **working** but I check it from performance perspective and it's not working in efficient way.

Do you have an idea/tips how to improve this code from perforce aspect.

In the JVM monitor I found that `EntityDataCreator.getInstanceValue` have a problem.

**This is the method start**

```
// start with the principal entity
        for (Object principalEntityInstance : principalEntityInstances) {

            List<Object> genObject = null;
            Object refObject = createRefObj(dependentMultiplicity);
            // check entries in dependent entity
            for (Object dependentEntityInstance : toEntityInstances) {
                boolean matches = true;

                for (String[] prop : propertiesMappings) {

                    // Get properties related keys
                    String fromProp = prop[0];
                    String toProp = prop[1];

                    Object fromValue = EntityDataCreator.getInstanceValue(fromProp, principalEntityInstance);
                    Object toValue = EntityDataCreator.getInstanceValue(toProp, dependentEntityInstance);

                    if (fromValue != null && toValue != null) {
                        if (!fromValue.equals(toValue)) {

                            matches = false;
                            break;
                        }
                    }
                }

                if (matches) {
                    // all properties match
                    if (refObject instanceof List) {
                        genObject = (List<Object>) refObject;
                        genObject.add(dependentEntityInstance);
                        refObject = genObject;
                    } else {
                        refObject = dependentEntityInstance;
                        break;
                    }
                }
            }

            if (refObject != null) {

                EntityDataCreator.createMemberValue(principalEntityInstance, navigationPropName, refObject);
            }
        }

public static Object getInstanceValue(String Property, Object EntityInstance) throws NoSuchFieldException,
            IllegalAccessException {

        Class<? extends Object> EntityObj = EntityInstance.getClass();
        Field Field = EntityObj.getDeclaredField(Property);
        Field.setAccessible(true);
        Object Value = Field.get(EntityInstance);
        Field.setAccessible(false);
        return Value;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T06:48:16.510

my guess would be your best bet is to go through both lists once, prepare all data that you need in hashtables, then do one iteration. this way, your problem becomes N+M instead of N*M

* * *

edit

```
Map<String,List<Object>> principalMap = new HashMap<String,List<Object>>();

for (Object principalEntityInstance : principalEntityInstances) {
   List<String> keys = getKeysFor(principalEntityInstance);
   for(String key : keys) {
       List<Object> l = principalMap.get(key);
       if(l==null) {
           l = new ArrayList<Object>();
           principalMap.put(key,l);
       }
       l.add(principalEntityInstance);
   }
} 
```

the do the same for dependentEntityInstance - this way, your searches will be much faster.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:52:39.607

我可能误解了您的问题，但我建议为您的实体定义一个 equals 方法并为它们定义一个散列方法，以便您可以利用 java 已经具有的所有优点来搜索和匹配实体。

我认为，当尽可能依赖 Java 的基础架构时，Sun/Oracle 花了很长时间才使它变得非常快。

# mongodb - querying on internals in mongo

> ID：16140978
> 
> 赞同：0
> 
> 时间：2013-04-22T06:46:09.430
> 
> 标签：mongodb, mongodb-query, mongodb-java

I have document structure like:

```
 { "_id": { "$oid" : "51711cd87023380037000001" }, 
    "dayData": "{ "daysdata":{"date":"02-12-2013","week_day":"","month":"","date_day":"","year":"2013"}}" 
    } 
```

I want to extract document having date = "02-12-2013" in the above. Here i am trying to query on a value which is also a json. Please let me know how to use mongodb java driver to extract this

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:22:39.987

**不回答**（stackoverflow 不会让我*评论*，因为我没有足够的分数！）

您的包含 json 的字符串存在语法错误。`"`后面有单`"year":"2013"`

您可能必须解决第一个问题。

# javascript - How to put event Listener to 20 forms on a page having different names

> ID：16140979
> 
> 赞同：0
> 
> 时间：2013-04-22T06:46:16.340
> 
> 标签：javascript, jquery

I have about 20 forms in my web page

```
<form id="post_comment_1" class="post_comment" action="cmt.php" method="post">

// form inputs

</form> 
```

.......

```
<form id="post_comment_20" class="post_comment" action="cmt.php" method="post">

// form inputs

</form> 
```

Now, I have to track the form submit using javascript. if there is only one form having id (post_comment) I can track it like this

```
$("#post_comment").submit(function(event){

    // function statements    

}); 
```

But I can not do this because I have about 20 forms on one page. What is the efficient way to have an event listener on each of the form submit??

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T06:48:03.293

```
$('.post_comment').submit(function(evt) {}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:52:41.887

尝试使用此[属性选择器`^`](http://api.jquery.com/attribute-starts-with-selector/)将选择以给定字符串开头的所有 id..

```
 $("form[id^='post_comment'").submit(function(event){
      ..... 
```

或班级

```
$('.post_comment').submit(function(event) {
  ..... 
```

类选择器比属性选择器更好更快..所以我会选择类选择器..（如果你可以在你的表单中添加一个类）

来自文档

> attributeStartsWith 选择器：但是它会比使用类选择器慢，因此如果可以的话，可以利用类来对类似元素进行分组。

# javascript - Javascript windows.open 错误

> ID：16140984
> 
> 赞同：-2
> 
> 时间：2013-04-22T06:46:47.997
> 
> 标签：javascript

我的页面末尾有以下代码。

```
<script>
$(".btn_fb").click(function() {
    window.open("http://www.facebook.com/sharer.php?u="+document.URL+"&amp;t=<%hdl_Title%>", "Facebook", "width=660,height=400,scrollbars=no;resizable=no");
    return false;
});    
$(".btn_tw").click(function() {
    window.open("http://twitter.com/home?status=<%hdl_Title%> "+document.URL+"", "Twitter", "width=660,height=400,scrollbars=no;resizable=no");
    return false;
});    
$(".btn_li").click(function() {
    window.open("http://www.linkedin.com/shareArticle?mini=true&amp;url="+document.URL+"&amp;title=<%hdl_Title%>;summary=<%hdl_Title%>", "LinkedIn", "width=660,height=400,scrollbars=no;resizable=no");
    return false;
}); 

$('.btn_go').click(function() {
    window.open("http://plus.google.com/share?url="+document.URL, 'Google Plus', 'width=660,height=500,scrollbars=no;resizable=no');
    return false;
});     
$(".btn_ma").attr("href", "mailto:?subject=<%hdl_Title%>&body=Hi%0D%0A%0D%0AI thought you may be interested in this: <%hdl_Title%> " + window.location); 
```

IE9 在遇到脚本的这一部分时会引发错误，我无法确定错误是什么。FF 不会抛出错误。

```
<script>   
    $('.button_google_plus').click(function() {
        window.open("http://plus.google.com/share?url="+document.URL, 'Google Plus', 'width=660,height=500,scrollbars=no;resizable=no');
        return false;
    }); 
</script> 
```

注意：代码：

```
<%hdl_Title%> 
```

是 CMS 中的一个参数集。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T06:51:22.833

**window.open()**方法的标题不应该有任何空格，window 属性只能包含`,` 不`;`
试试这个

```
window.open("http://plus.google.com/share?url="+document.URL, 'GooglePlus', 'width=660,height=500,scrollbars=no,resizable=no'); 
```

# objective-c - 释放特定对象时不调用 Dealloc 方法

> ID：16140985
> 
> 赞同：1
> 
> 时间：2013-04-22T06:46:49.850
> 
> 标签：objective-c

我已经使用`alloc/init`方法创建了一个对象，在我发布它之后`-dealloc`应该根据文档立即调用它。我在方法上设置了一个断点，`-dealloc`但它没有被命中，我的`-dealloc`方法也没有被调用。

请告诉我这背后的原因是什么，以及目标 c 中 dealloc 方法的用途是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T06:52:21.230

当您希望调用该`-dealloc`方法时，并不总是调用该方法。运行时也可能`-retain`出于内部原因在您的对象上发布了一个。

您也有可能（直接或间接）导致额外`-retain`发行。如果保留/分配和释放不平衡，您将永远不会看到`-dealloc`调用。它有助于打开静态分析器，以确保您的通话平衡。

只需遵循内存管理规则，不要猜测运行时，让内存管理系统完成它的工作。

什么时候调用dealloc方法的答案[？](https://stackoverflow.com/questions/13853438/when-does-dealloc-method-call?rq=1)可以帮助您了解您所看到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:03:58.240

因为**它仍然有参考**。这意味着它的引用计数未达到零。我不知道你的代码，它在哪里引用。但它没有调用这意味着它仍然有参考。可能是因为**强**关系或**亲子**关系

> 所有 Objective-C 对象都在堆上分配，因此如果您不想耗尽资源，就必须在某处释放它们。
> 
> 这让位于今天仍在使用的引用计数方法：每个对象都保留对其持有的任何引用的计数。如果您收到一个对象并且想要保留它，则保留该对象，并增加其引用计数。当你完成它时，你释放它，这会减少它的引用计数。一旦该计数达到零，则推断没有人引用该对象，并使用 -dealloc 方法自动释放该对象。
> 
> 此外，可以使用自动释放池告诉对象“在（希望）不久的将来的某个时间点释放”。这个想法是在堆栈上的某个地方（通常在线程开始或响应输入事件时）创建自动释放池并将其推送到堆栈上。然后可以向任何对象发送 -autorelease 消息，并将其分配给该池。
> 
> 当池对象被释放时，它只是简单地向所有分配给它的对象发送一个-release 消息。这样，任何不再使用的对象（即它们没有被显式保留）都会被释放。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-22T06:55:52.557

每当您的`dealloc`对象被释放时，都会调用（在更多情况下）。您不能直接调用此方法。

```
@interface myViewController:UIViewController
{
    NSString *myStr;
}

@end 
```

这里的`dealloc`@implementation 中的方法将在对象被释放`myViewController`时（在大多数情况下）被调用，而不是在被释放时。`myViewController``myStr`

尽管如果您使用 ARC，则不必使用。

# python - python中的变量和函数名称冲突

> ID：16140986
> 
> 赞同：4
> 
> 时间：2013-04-22T06:46:54.570
> 
> 标签：python

假设我有以下功能：

```
def xplusy(x, y):
    return x+y

def xplus1(x):
    xplusy = xplusy(x, 1)
    return xplusy 
```

现在，如果我调用`a = xplus1(4)`它会引发以下错误：

```
UnboundLocalError: local variable 'xplusy' referenced before assignment 
```

错误是因为命名冲突，如果我重新定义`xplus1`如下：

```
def xplus1(x):
    s = xplusy(x, 1)
    return s 
```

它工作正常。

为什么会这样：编译器不能正确区分变量和函数调用？

有什么办法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-22T07:06:25.687

在 Python 中，函数是数据，而类型是动态的。这意味着以下行是有效的 Python：

```
def func(x):
    return x + 3

func = 3 
```

`func`现在是一个int。`func`不再引用原始函数。最初是一个函数的事实`func`与将来可以分配给它的数据类型没有任何关系。（这就是“动态类型”的意思。）

因此，由于没有静态类型，并且“函数”是有效的数据类型，Python 解释器区分函数和同名引用的数据是没有意义的。因此，在给定的范围内，没有办法使用相同的非限定变量名来表示两个不同的东西。

在您的特定情况下，如果您的`xplus1`函数中的代码意味着什么，那将意味着“计算变量的值`xplusy(x,1)`并将**该值**分配给变量`xplusy`- 从而失去对**函数** `xplusy`的引用。” 但是，在函数范围内，解释器不允许您对该范围之外的变量进行赋值，因此它假定通过编写赋值语句，您正在引入一个新的局部变量`xplusy`。但是，尚未定义局部变量，因此您调用它的尝试`xplusy(x,1)`失败了。全局定义的函数不作为后备调用，因为同样，您不能让两个非限定名称相同并指向同一范围内的不同数据。

* * *

另一个演示“在一个范围内不重复变量名”规则的示例（实际上，我只是在尝试构建此答案时使用提示符时才发现的）：

```
>>> def f1():
...     a = xplusy(3,4)
...     xplusy = 5
...     print xplusy
...
>>> f1()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in f1
UnboundLocalError: local variable 'xplusy' referenced before assignment
>>> def f1():
...     a = xplusy(3,4)
...     print a
...
>>> f1()
7 
```

这表明它确实是**范围**，而不是需要唯一名称的**语句。**

* * *

编辑：这是一个非常酷的帖子，解释了这个和其他范围相关的行为： http: [//me.veekun.com/blog/2011/04/24/gotcha-python-scoping-closures/](http://me.veekun.com/blog/2011/04/24/gotcha-python-scoping-closures/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T06:53:50.867

在 python 中，函数是第一类对象，这意味着它与任何其他对象一样。

有关[什么是“一流”对象的更多信息？](https://stackoverflow.com/questions/245192/what-are-first-class-objects)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T06:51:39.060

发生这种情况的原因是因为作为全局变量存在于您的范围内，除非您明确地说is `xplusy`，否则无法更改该变量。`xplusy``global`

```
def xplusy(x,y):
    return x+y

def xplus1(x):
    global xplusy
    xplusy = xplusy(x,1)
    return xplusy 
```

但是，这将`xplusy`引用 an或第一次返回的任何内容，这意味着在第一次之后它将抛出s。`int``float``xplusy``TypeError`

更pythonic的方式很可能是

```
def xplus1(x):
    return xplusy(x,1) 
```

或使用`functools`模块：

```
from functools import partial
xplus1 = partial(xplusy,y=1) #since you wanted to override y with 1 
```

如果你不关心哪个参数被覆盖，你可以简单地做

```
xplus1 = partial(xplusy,1) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T06:52:09.763

在某些情况下，例如在回调中，您可以通过静态名称（`funcName`而不是`funcName()`）来引用函数。因此，在 Python 中，变量名是为函数保留的。很像您如何使用存储在变量中的 LAMBDA 函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T07:00:47.740

在 Python 中，`xplusy`可以引用任何东西。你可以这样做：

```
def xplusy(x, y):
    return x+y

def otherfunction(x, y):
    return x*y

def xplus1(x):
    xplusy = otherfunction
    return  xplusy(x, 1) 
```

并且`xplusy`变量将`otherfunction`在`xplus1`范围内引用。

```
xplus1(2)
>>> 2 
```

结果是 2 * 1 而不是 2 + 1。小心分配。使用尽可能多的变量。

# c# - ?= 在 ^ 之后是什么意思？

> ID：16140998
> 
> 赞同：1
> 
> 时间：2013-04-22T06:48:04.003
> 
> 标签：c#, regex

以下是至少六个字符并包含数字、符号或标点符号的强密码验证之一。

```
(?x)^(?=.* ( \d | \p{P} | \p{S} )).{6,} 
```

`(?=.*`之后是什么意思`(?x)^`？

我知道`?=`expr 是 Lookahead，它检查后面的文本是否与 expr 匹配。但在这种情况下，只有`^`一个字符串的开头在前面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T07:11:05.110

用一句话来说：

评论标志已设置 ( `(?x)`)。

字符串的开头必须是 ( `^`)，后面必须是 ( `?=`) 零个或多个字符 ( `.*`)，然后是 ( `(||)`) 数字 ( `\d`)、标点符号 ( `\p{P}`) 或符号 ( `\p{S}`)。

字符串开始后，必须有 6 个或更多的任意字符 ( `.{6,}`)

这能解释吗？