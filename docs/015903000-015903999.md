# StackOverflow 问答 15903000-15903999

# python - 需要有关在 Python 中构建标记字典的最佳结构的建议

> ID：15903005
> 
> 赞同：0
> 
> 时间：2013-04-09T13:16:38.220
> 
> 标签：python, data-structures, python-2.7

我对python很陌生，希望得到关于这个问题的建议。

我希望在 python 中创建一个令牌字典。首先，让我简要描述一下我需要什么样的功能。

1.  假设每个现有记录应该是 {word, type, count}。例如蛇，NN，10
2.  每当出现新记录 {word, type} 时，它都会检查字典是否存在。如果找到，计数 += 1。否则，添加计数为 1 的新记录。
3.  字典能够按最高计数排序

关于最佳结构的任何建议并向我展示它的示例？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:17:57.050

[collections.Counter](http://docs.python.org/2/library/collections.html#collections.Counter)为您服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T13:19:34.810

您可以使用[`collections.Counter()`](http://docs.python.org/2/library/collections.html#collections.Counter)（在 py2.7 中引入）：

```
In [52]: from collections import Counter

In [53]: c=Counter("aaabbc")

In [54]: c
Out[54]: Counter({'a': 3, 'b': 2, 'c': 1})

In [55]: c.most_common()
Out[55]: [('a', 3), ('b', 2), ('c', 1)] 
```

在 py2.6 中，您可以使用[`collections.defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)：

```
In [58]: from collections import defaultdict

In [59]: strs="aaabbc"

In [61]: dic=defaultdict(int)

In [62]: for x in strs:
   ....:     dic[x]+=1
   ....:     

In [63]: dic
Out[63]: defaultdict(<type 'int'>, {'a': 3, 'c': 1, 'b': 2})

In [64]: from operator import itemgetter

In [66]: sorted(dic.items(),reverse=True,key=itemgetter(1))
Out[66]: [('a', 3), ('b', 2), ('c', 1)] 
```

# javascript - javascript facebook检查用户是否是页面的粉丝

> ID：15903006
> 
> 赞同：1
> 
> 时间：2013-04-09T13:16:38.993
> 
> 标签：javascript, facebook-graph-api, facebook-like

这是我的代码：

```
 <div id="fb-root"></div>

<script>
  window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
      appId      : '',                        // App ID from the app dashboard
      channelUrl : 'http://.php', // Channel file for x-domain comms
      status     : true,                                 // Check Facebook Login status
      xfbml      : true                                  // Look for social plugins on the page
    });

    // Additional initialization code such as adding Event Listeners goes here
    FB.api('me/likes/',function(response) {
        if( response.data ) {
            if( !isEmpty(response.data) )
                alert('You are a fan!');
            else
                alert('Not a fan!');
        } else {
            alert(response);
            alert('ERROR!');
        }
    });
  };

  // Load the SDK asynchronously
  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/all.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));

// function to check for an empty object
function isEmpty(obj) {
    for(var prop in obj) {
        if(obj.hasOwnProperty(prop))
            return false;
    }

    return true;
}
</script> 
```

但是我返回了错误字符串......我做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T13:25:10.237

要获取用户是否是该页面的粉丝，您可以执行以下操作：

```
FB.api({
    method:     'fql.query', 
    query:  'SELECT uid FROM page_fan WHERE uid=user_id AND page_id=page_id'
}, function(resp) {
    if (resp.length) {
        alert('A fan!')
    } else {
        alert('Not a fan!');
    }
}
); 
```

您可以在此处阅读更多相关信息：http: [//www.masteringapi.com/tutorials/facebook-api-check-if-a-user-is-fan-of-a-facebook-page/20/](http://www.masteringapi.com/tutorials/facebook-api-check-if-a-user-is-fan-of-a-facebook-page/20/)

类似的问题：

[Facebook Javascript，如何检测用户是否是我的 Facebook 页面的粉丝？在我的网站上？](https://stackoverflow.com/questions/5493449/facebook-javascript-how-to-detect-if-user-is-a-fan-of-my-facebook-page-while-o)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T13:31:29.603

我没有执行登录和令牌访问！ [https://developers.facebook.com/docs/howtos/login/getting-started/](https://developers.facebook.com/docs/howtos/login/getting-started/)

# php - 如何向 Yii radioButtonList 模板添加另一个元素？

> ID：15903007
> 
> 赞同：1
> 
> 时间：2013-04-09T13:16:42.007
> 
> 标签：php, html, templates, yii, radiobuttonlist

我需要每个元素后带有工具提示的 radioButtonList。

我使用这段代码：

```
<?php echo $form->radioButtonList($model, 'Field', CHtml::listData(FieldDataModel::model()->findAll(), 'id', 'name')); ?> 
```

并得到以下结果：

```
[x] ParamName0
[ ] ParamName1
[ ] ParamName2 
```

我怎样才能得到这样的结果：

```
[x] ParamName0 [?]-(Link, that shows description. Description is taking from FieldDataModel)
[ ] ParamName1 [?]
[ ] ParamName2 [?] 
```

可能是，像 'template' => '{input} {label}' 这样的模板可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:32:33.930

这在当前的实现中是不可能的。您必须遍历列表数据并使用`CHtml::radioButton()`或手动创建按钮`CHtml::activeRadioButton()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:14:43.000

作为替代解决方案，您仍然可以`CActiveForm`动态使用和创建带有描述的所需链接。例如，它可能看起来像这样：

```
<?php
$listModels = FieldDataModel::model()->findAll();
$form = $this->beginWidget('CActiveForm');
?>
<div>
<?php
echo $form->radioButtonList($model, 'Field', CHtml::listData($listModels, 'id', 'name'));
?>
</div>
<?php
$this->endWidget();

$descriptions = array();
foreach ($listModels as $listModel)
    $descriptions['id-' . $listModel->id] = $listModel->description;
$modelClassName = get_class($model);
Yii::app()->clientScript->registerScript("customRadioButtonListInit", "
    var descriptions = " . CJavaScript::encode($descriptions) . ";
    jQuery('#" . $modelClassName . "_Field input[type=\"radio\"]').each(function() {
        var valueAttr = jQuery(this).attr('value');
        var jqLabel = jQuery(this).next('label');
        var jqTooltipLink = jQuery('<a></a>')
            .text('?')
            .attr('title', descriptions['id-' + valueAttr])
            .click(function(event) {
                event.preventDefault();
                event.stopPropagation();
                // TODO: implement your tooltip here...
                alert(jQuery(this).attr('title'));
            });
        jqLabel.after(jqTooltipLink).after(' ');
    })
", CClientScript::POS_READY); 
```

# asp.net - 安装 node.js

> ID：15903009
> 
> 赞同：0
> 
> 时间：2013-04-09T13:16:48.773
> 
> 标签：asp.net, node.js, visual-studio-2008, windows-xp

我已经从以下地址安装了nodejs

```
 http://nodejs.org/ 
```

但我无法在此地址运行代码示例

```
 http://askhds.blogspot.com/2012/01/nodejs-get-starting-with-nodejs-on_24.html 
```

我正在使用 Visual Studio 2008，并且我有 Visual Studio 的内置服务器可能没有冲突问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:23:02.217

您将无法通过内置的 VS Web 服务器运行 node.js，因为它仅用于启动 .net 应用程序。Node.js 用于在服务器端运行 javascript。你链接到的那个例子甚至没有提到视觉工作室，我不确定你为什么希望它在其中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:17:53.267

请先看这里：

[http://en.wikipedia.org/wiki/Nodejs](http://en.wikipedia.org/wiki/Nodejs)

然后在这里：

[如何开始使用 Node.js](https://stackoverflow.com/questions/2353818/how-do-i-get-started-with-node-js)

听起来您来自 .Net 背景，因为您正在尝试使用 Visual Studio。您需要了解 Node.js 采用的方法，因为它与 .Net 非常不同。Node.js 实际上创建了自己的 Web 服务器，因此它不需要托管在 IIS 或任何东西中。

虽然您可以使用 Visual Studio 编辑 .js 文件，并且可以将其配置为用作 Node.js 开发环境，但它并不是真正为此目的而构建的。如果您仍然对使用它感兴趣，请查看此处的步骤：

[http://www.seesharprun.net/leveraging-visual-studio-2012-for-node.js-development](http://www.seesharprun.net/leveraging-visual-studio-2012-for-node.js-development)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:58:06.233

从此链接下载nodejs并安装它......它会工作。 [http://code.google.com/p/nodejs-win/downloads/list](http://code.google.com/p/nodejs-win/downloads/list)

# iphone - 呈现其他视图时如何自动隐藏标签栏

> ID：15903014
> 
> 赞同：1
> 
> 时间：2013-04-09T13:17:05.300
> 
> 标签：iphone, ios, user-interface

有没有人用过QQ（国内流行）的IM软件？这个软件有一个标签栏，它有5个标签。在每个选项卡中都有一个导航控制器，如下所示：

![QQ主界面](https://i.stack.imgur.com/0FHpe.png)

在第二个选项卡中，当点击前三个表格视图单元格中的任何一个时，此选项卡的视图将以正常方式转换到另一个视图，即转换发生在选项卡栏控制器内。

![以正常方式转换到其他视图](https://i.stack.imgur.com/oc0Jf.png)

当点击最后三个表格视图单元格中的任何一个时，此选项卡的视图也会转移到另一个视图，但同时选项卡栏也会与视图控制器一起转移。

![使用标签栏过渡到其他视图](https://i.stack.imgur.com/zHLpu.png)

这很奇怪！根据第一种情况我们可以猜测导航控制器是标签栏控制器的孩子，但根据第二种情况标签栏可能是导航控制器的孩子，对吧？有人知道如何实现这个用户界面吗？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:28:49.273

感谢上帝！答案是将推送到导航控制器堆栈的视图控制器的 hidesBottomBarWhenPushed 属性设置为 YES。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:21:27.817

屏幕截图中的标签栏不一定是标签栏，它可以是视图控制器上的自定义视图，当标签栏需要大幅更改时，我使用了类似的方法。

# php - 直接参数VS。保存在变量中的值

> ID：15903020
> 
> 赞同：1
> 
> 时间：2013-04-09T13:17:25.837
> 
> 标签：php, mysql, function

这个功能应该：

```
function get_article_info(){
        $id = $_GET['id'];
        $data = array();
        $q = "SELECT * FROM articles WHERE article_id = $id";
        $qry = mysql_query($q);
        while($row = mysql_fetch_assoc($qry)){
            $data[] = $row;
        }
        return $data;
    } 
```

和这个一样：

```
function get_article_info2(){
        $id = $_GET['id'];
        $data = array();
        $q = mysql_fetch_assoc(mysql_query("SELECT * FROM articles WHERE article_id = $id"));

        while($row = $q){
            $data[] = $row;
        }
        return $data;
    } 
```

如果我尝试使用 get_article_info2 我会收到此错误：

```
Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 35 bytes) 
```

谁能告诉我为什么它不起作用？谢谢 ;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:22:53.780

```
 $q = mysql_fetch_assoc(mysql_query("SELECT * FROM articles WHERE article_id = $id"));

    while($row = $q){
        $data[] = $row;
    } 
```

这个循环没有尽头，因为你之前给 $q 赋值过一次，它永远不会改变。因此，同一行一遍又一遍地附加到 $data，最后你的脚本内存不足。

您必须分别为每条记录调用 fetch 函数（如在第一个代码中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T13:27:33.510

首先，您应该*始终*转义或清理您的 SQL 参数：

```
$sql = sprintf('SELECT * FROM articles WHERE article_id = %d', (int)$_GET['id']);
$res = mysql_query($sql); 
```

其次，你应该在循环`mysql_fetch_assoc()` *内执行；*否则会导致死循环：

```
while (($row = mysql_fetch_assoc($req)) !== false) {
    $data[] = $row;
} 
```

也就是说，您应该停止使用旧`mysql_*`功能；改用 PDO 或 mysqli 并利用准备好的语句的力量。

# php - PHP数组排序键

> ID：15903024
> 
> 赞同：0
> 
> 时间：2013-04-09T13:17:28.457
> 
> 标签：php, multidimensional-array

我有一个简单的多数组，如下所述，我需要按其键标签（而不是键值）排序。

```
array(
    1 => array(
        2 => array();
        11 => array();
        20 => array();
        31 => array();
        4 => array();
        43 => array();
        12 => array();
        3 => array();
    );
    2 => array();
    11 => array();
    20 => array();
    31 => array();
    4 => array();
    43 => array();
    12 => array();
    3 => array(); ); 
```

问题是我的排序返回我的数组排序如下：

`1, 11, 12, 2, 20, 3, 31,`等等……而不是`1,2,3,4,11,12,`等等……

这是我的订购功能：

```
private function orderByKey(&$array) {
        ksort($array);
        foreach($array as $value) {
            if (is_array($value)) {
                $this->orderByKey($value);
            }
        }
    } 
```

这里可能有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:20:37.643

您需要访问 $value 作为对 $array 中条目的引用

```
private function orderByKey(&$array) {
        ksort($array);
        foreach($array as &$value) {
            if (is_array($value)) {
                $this->orderByKey($value);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:20:44.463

即sort() 和ksort() 的第二个参数是sort_flags。如果您希望它按数字排序，而不是按字符串值（目前看起来），您必须设置该参数：

```
ksort($my_array, SORT_NUMERIC); 
```

查看 sort() 页面，其中解释了不同的排序标志：[http ://www.php.net/manual/en/function.sort.php](http://www.php.net/manual/en/function.sort.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T13:21:01.723

你可以使用[`natksort`](http://www.php.net/manual/en/function.ksort.php#49150)函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T14:09:35.133

除了不对子数组进行排序之外，我还阅读了您的问题，即您在按问题（`1, 11, 12, 2, 20, 3, 31, ...`）中概述的顺序对键进行排序时遇到问题：

```
uksort($array, function($a, $b) {
    return strcmp("$a ", "$b ");
}); 
```

这种排序确实用空格填充每个键，以便 3 大于 20 但小于 30。

完整代码：

```
private function orderByKey(&$array) {
    if (!is_array($array)) return;
    uksort($array, function($a, $b) {
        return strcmp("$a ", "$b ");
    });
    array_walk($array, [$this, 'orderByKey']);
} 
```

或者，如果`ksort()`对您有用：

```
private function orderByKey(&$array) {
    if (!is_array($array)) return;
    ksort($array);        
    array_walk($array, [$this, 'orderByKey']);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T13:21:20.367

[http://www.php.net/manual/en/function.uksort.php](http://www.php.net/manual/en/function.uksort.php)

是你搜索的；而不是 ksort：

```
uksort($array, function ($a, $b) { return $a - $b; }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T13:22:31.010

```
 ksort($myarray);
 foreach ($myarray as $key => $val) {
     echo "$key = $val\n";
 } 
```

# git - Git：有没有像 TFS 搁置集这样的功能？

> ID：15903025
> 
> 赞同：16
> 
> 时间：2013-04-09T13:17:28.750
> 
> 标签：git, version-control

我尝试保存“统一差异”，但找不到应用它的方法。

补丁适用于已提交的更改，我不希望在没有适当代码审查的情况下提交。

想法赞赏！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-06T09:00:03.677

Shelvesets 只是临时分支。所以 - 只是建立新的分支。Git 中的分支非常轻量级，因此从服务器创建、推送和删除非常简单和快速。您可以将其命名为 ie`wip-blabla`以通知它尚未准备好。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-03-13T21:57:21.880

git stash 是我见过的最接近搁置集的东西。这是一个本地预提交副本，一旦您再次开始工作，您就可以将其提取到您的分支中。

```
git stash
git checkout somebranch
git checkout branchwithstashedstuff
git stash pop 
```

git stash pop 结合了 git stash apply 和 git stash drop 对最新的 stash。

如果您有不止一个存储，您可以执行 git stash list 和 git stash apply stash@{n} 来获取第 n 个存储。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-04-03T15:52:05.603

Git 没有任何东西像 TFS Shelvesets 一样干净、优雅且与个人空间相关联。

在您自己的个人存储桶下，在服务器上制作了一个搁置集。与树枝不同，它永远不会出现在源树中，也不会混淆任何普通的水。它以与已提交代码相同的备份保证存储您的工作，而不会将其与已提交代码的空间混合。

我们在提交*之前*使用搁置集进行代码审查，因此我们永远不会在任何地方真正提交糟糕的代码。我们将它用作备份，以便我可以将工作保存在安全的地方，以防我的工作站融化。Git 没有完成这些事情，因为“分支”或“镜像”的任何使用都是一个额外的步骤，有人可能会搞砸，有人可能会忘记清理。

然而，Git 所做的是给你一个可以进行审查的确切位置……拉取请求。如果你擅长使用 Git，那么你必须擅长将糟糕的代码提交到本地仓库，因为这就是事情的发展方式，不会让人们的生活变得复杂。在 Pulls 之前不要担心评论，在 Pulls 做*评论*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-06T08:51:03.080

提交只是将更改保存到您的“本地”存储库，这是一种非常个人化的行为。那么在 Commit 之后 Push 之前 CR 有什么问题呢？

对我来说，patch 适用于与 shelve-set 类似的功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T13:30:14.130

我认为你可能想要做的镜像搁置集是创建另一个远程存储库。git remote add "changesetname" "changeseturl" （Git 允许您拥有任意数量的内容）在审核过程中 - 您可以将变更从变更集合并到您的源 - 然后您可以在完成后删除变更集。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-04T04:12:05.803

在 Visual Studio 中，如果您将源代码控制插件从 git 切换到 Visual Studio Team Foundation Server（工具 -> 选项 -> 源代码控制 -> 插件选择）。你可以像 TFS 一样做。

# qt - QWizard 中的 QCheckBox、QRadioButton 和 QComboBox：信号/插槽和 SignalMapping - 所需信息

> ID：15903026
> 
> 赞同：1
> 
> 时间：2013-04-09T13:17:47.590
> 
> 标签：qt, signals-slots, qcombobox, qcheckbox, qradiobutton

我正在尝试创建一个 QWizard。我需要在第一个窗口中使用 QRadioButton 和 QComboBox 的组合，在第二个窗口中使用 QCheckBox 和 QComboBox。

在第一个窗口中，每个 RadioButton 以文本形式出现的信息来自指定路径中的目录，而 ComboBox 列表是 RadioButton 目录中目录的迭代。

在第二个窗口中，过程与上面相同，而不是单选按钮，而是来自另一个目录路径的复选框。

单选按钮和 Combobox 与 Signals 和 Slots 相互依赖，如果选中一个单选按钮，则必须激活其对应的 Combobox，如果选择下一个单选，则必须禁用第一个单选。但这并没有发生，当我检查它时，组合框列表每次都会增加，并且相应的组合框也没有禁用。

这是我的代码：

```
 void SelectOption::initializeUi()
{
    this->setWindowTitle("Window-1");

    QGridLayout *gridLayout1 = new QGridLayout();
    gridLayout1->setMargin(5);
    gridLayout1->setSpacing(5);

    QSignalMapper* signalMapper = new QSignalMapper();

    for(int i = 0; i < list.size(); i++){
        radioButton[i] = new QRadioButton();
        radioButton[i]->setText(softwareList[i]);
        signalMapper->setMapping(radioButton[i], i);
        gridLayout1->addWidget(radioButton[i], i/1, i%1);
        connect(radioButton[i], SIGNAL(clicked()),signalMapper, SLOT(map()));
    }

connect(signalMapper, SIGNAL(mapped(const int &)),this, SIGNAL(radioChecked(const int &)));
connect(this, SIGNAL(radioChecked(const int &)),this, SLOT(test(const int)));

    QGridLayout *gridLayout2 = new QGridLayout();
    gridLayout2->setMargin(5);
    gridLayout2->setSpacing(5);

    for(int j = 0; j < list.size(); j++){
        comboBox[j] = new QComboBox();
        comboBox[j]->setDisabled(true);
        gridLayout2->addWidget(comboBox[j], j/1, j%1);
    }

    QPushButton *nextButton = new QPushButton("Next >");
    nextButton->setDefault(true);
    connect(nextButton, SIGNAL(clicked()), this, SLOT(showMainPage()));

    QPushButton *backButton = new QPushButton("< Back");
    backButton->setDefault(true);
    connect(backButton, SIGNAL(clicked()), this, SLOT(showSelectOS()));

    QPushButton *cancelButton = new QPushButton("Cancel");
    cancelButton->setDefault(true);
    connect(cancelButton, SIGNAL(clicked()), this, SLOT(cancel()));

    QHBoxLayout *hboxlayout;
    hboxlayout = new QHBoxLayout();
    hboxlayout->addLayout(gridLayout1);
    hboxlayout->addLayout(gridLayout2);

    QHBoxLayout *layout;
    layout = new QHBoxLayout();
    layout->addStretch(10);
    layout->addWidget(nextButton);
    layout->addWidget(backButton);
    layout->addWidget(cancelButton);
    layout->addStretch(10);

    QVBoxLayout *mainLayout;
    mainLayout = new QVBoxLayout();
    mainLayout->addLayout(hboxlayout);
    mainLayout->addLayout(layout);
    ui->centralwidget->setLayout(mainLayout);
}

void SelectOption::test(const int id) // REMEMBER
{
    if(radioButton[id]->isChecked()){
        comboBox[id]->setEnabled(true);
        comboBox[id]->addItem(" Select anyone ");
        QString path = qApp->applicationDirPath() + "/list/" + radioButton[id]->text();

        QDir dir;
        dir.cd(path);
        dir.setFilter(QDir::Dirs | QDir::NoDotAndDotDot);

        QFileInfoList list = dir.entryInfoList();
        for (int i = 0; i < list.size(); ++i) {
            QFileInfo fileInfo = list.at(i);
            comboBox[id]->addItem(fileInfo.fileName());
        }

    }else{
        comboBox[id]->clear();
        comboBox[id]->setDisabled(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:38:58.613

将所有单选按钮添加到一个`QButtonGroup`. 然后选中其中一个将取消选中所有其他。

**更新**（代码示例）。

使用起来绝对没有什么难的`QButtonGroup`。您只需要使用方法向其添加`QAbstractButton`继承者`void QButtonGroup::addButton ( QAbstractButton * button )`，所有其他将自动完成。这是一个简单的代码示例，在其构造函数中向主窗口添加三个单选按钮：

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent)
{
    setupUi(this);

    QVBoxLayout *layout = new QVBoxLayout(QMainWindow::centralWidget());

    QRadioButton *r1 = new QRadioButton("r1", this);
    QRadioButton *r2 = new QRadioButton("r2", this);
    QRadioButton *r3 = new QRadioButton("r3", this);

    layout->addWidget(r1);
    layout->addWidget(r2);
    layout->addWidget(r3);
    layout->addStretch();

    QButtonGroup *group = new QButtonGroup(this);
    group->addButton(r1);
    group->addButton(r2);
    group->addButton(r3);

    r1->setChecked(true);
} 
```

# android - jquery mobile中的textarea

> ID：15903030
> 
> 赞同：1
> 
> 时间：2013-04-09T13:17:51.610
> 
> 标签：android, css, cordova, jquery-mobile

我需要在我的 android phonegap 应用程序中以百分比设置 jquery 移动 textarea 高度。我已将 textarea 高度设置为百分比，但它没有改变。如何做到这一点。请帮助我。

这是我的代码：

```
#textarea
{
   height:20%;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:22:40.440

## 解决方案：

```
textarea {
    height:50% !important;
} 
```

但通常这还不够，因为如果您只在其中放置 textarea，jQM 内容 div 将永远不会占用可用空间的全部高度。所以我们需要让它占据整个页面的高度。

这是一个工作示例：http: [//jsfiddle.net/Gajotres/BLcYP/](http://jsfiddle.net/Gajotres/BLcYP/)

# java - Android（Java）中的64位长整数？

> ID：15903032
> 
> 赞同：1
> 
> 时间：2013-04-09T13:17:53.223
> 
> 标签：java, android

我以为我在 Java 中读到过，所有长整数都保证是 64 位的，即使在 32 位机器上也是如此。但我可能是错的。我有一个在 32 位 ARM CPU 的平板电脑上运行的 Android 应用程序。我的长整数表现得像 32 位整数（它们在达到大约 10^10 后溢出）。

这是正确的行为吗？

有没有办法在 Android 应用程序中轻松处理 64 位整数？

=========================== 编辑======================= ==== 我只是查看了代码并开始输入它并意识到问题可能出在其他地方。我需要修复该错误，并验证问题是否仍然存在（它可能不会）但我现在无法测试它，因为我没有随身携带我的 Android 设备。把这个推迟到以后。感谢您的回复，但这可能是我的愚蠢错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:36:19.873

长整数是 64 位： http: [//developer.android.com/reference/java/lang/Long.html](http://developer.android.com/reference/java/lang/Long.html)整数是 32 位：http: [//developer.android.com/reference/java/lang/Integer.html](http://developer.android.com/reference/java/lang/Integer.html)

# python - Python使用mechanize提交post数据

> ID：15903034
> 
> 赞同：2
> 
> 时间：2013-04-09T13:17:58.990
> 
> 标签：python, post, mechanize, urlencode, html-post

我必须提交给服务器的 url 如下所示：

```
www.mysite.com/manager.php?checkbox%5B%5D=5&checkbox%5B%5D=4&checkbox%5B%5D=57&self=19&submit=Go%21 
```

我这样写的帖子数据：

```
data = {'checkbox%5B%5D': '4', ....and so on... 'self': '19', 'submit': 'Go%21'} 
```

我对其进行编码：

```
data = urllib.urlencode(orbs) 
```

这就是我运行它的方式：

```
resp = mechanize.Request('http://mysite.com/manager.php', data)
cj.add_cookie_header(resp)
res = mechanize.urlopen(resp)
print res.read() 
```

错误说：我没有选择任何项目。因为我有嵌套表单，我如何在不使用 br.select_form(nr=0) 的情况下正确地做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:22:28.760

您对复选框字段名称进行了双重编码；你应该使用`checkbox[]`而不是`checkbox%5B%5D`. 此外，由于该键名被重用，您可能无法使用字典来收集参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T13:22:55.843

url编码是将字符串（即'[]'）变为百分比编码字符串（即'%5B%5D'）的过程，而url解码是相反的操作。所以：

```
checkbox%5B%5D=5&checkbox%5B%5D=4&checkbox%5B%5D=57&self=19&submit=Go%21 
```

是解码后：

```
checkbox[]=5&checkbox[]=4&checkbox[]=57&self=19&submit=Go! 
```

在您的代码中，您实际上是在封装一个已经编码的 url：

```
data = {'checkbox%5B%5D': '4', ....and so on... 'self': '19', 'submit': 'Go%21'}
data = urllib.urlencode(orbs) 
```

而是使用解码数据并将其传递给 urlencode：

```
data = {'checkbox[]': '4', ....and so on... 'self': '19', 'submit': 'Go!'}
data = urllib.urlencode(orbs) 
```

# ruby-on-rails - 找不到重定向到 404 页面 - rails

> ID：15903035
> 
> 赞同：-1
> 
> 时间：2013-04-09T13:18:05.040
> 
> 标签：ruby-on-rails, redirect, controller, routes

我需要将不正确的页面重定向到 404 页面，目前我正在重定向到主页，我有这个：

```
def thirdlevel
    if something
      if something else
        render :template => "services/thirdlevel"
      else
         redirect_to "/"
      end
    else
    redirect_to "/"
  end
end 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T16:41:50.483

我将 error404 操作添加到我的控制器，然后以这种方式引用它：

```
else
  render :action => "error404"
end

def error404
  @breadcrumb = [{:name => "Page not found"}]
end 
```

# google-chrome - Safari 和 Google Chrome 方向标尺

> ID：15903039
> 
> 赞同：1
> 
> 时间：2013-04-09T13:18:10.880
> 
> 标签：google-chrome, mobile, responsive-design, mobile-safari

我的一个朋友创建了一个网络手机，它在定位手机时向我展示了一些问题。它看起来很棒，但是当用户改变方向时它向我展示了一个问题。网站是[http://www.tivag.ch/app](http://www.tivag.ch/app)。当页面加载时，它在纵向模式下工作正常，当我在横向模式下更改时也可以正常工作，但是当我以纵向模式返回时，它向我显示了一个问题，它在右侧显示了一个空白区域。在纵向模式下返回页面时 document.width 保持横向模式的宽度，它不会改变值。规模不起作用:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:23:36.950

用于`overflow:hidden;`.content 元素。

```
.content {
width: 100%;
overflow:hidden; /*Important*/
height: auto;
float: left;
padding-bottom: 15px;
background: url(../img/bg_content.jpg) no-repeat center top;
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover;
} 
```

以及为了进一步一致的结果将其添加到您的头部。并且不要使用 minimum-scale="1"

```
<meta name="viewport" content="initial-scale = 1,user-scalable=no,maximum-scale=1.0"> 
```

# python - 需要涉及数组和随机位置的基本 Python 编程帮助

> ID：15903051
> 
> 赞同：0
> 
> 时间：2013-04-09T13:18:41.990
> 
> 标签：python, multidimensional-array

考虑一个 100X100 阵列。

1.  在这样的数组中生成一个包含数千个随机位置的数组，例如 (3,75) 和 (56, 34)。
2.  计算您的一个随机位置在任何（直）边缘的 15 像素范围内的频率

我正在尝试做上述问题以帮助我学习编程语言 Python，我是编程新手。

这是我到目前为止所拥有的：

```
from __future__ import division
from pylab import *
import math as m
from numpy import *

array1=[]
nMax=1001
n=1
while n<nMax:
    array1.append(random.randint(1, 101))
    n=n+1
array1=array(array1)
array1=array1.reshape(1000,1)
print array1

array2=[]
nMax=1001
n=1
while n<nMax:
    array2.append(random.randint(1, 101))
    n=n+1
array2=array(array2)
array2=array2.reshape(1000,1)
print array2 
```

这会产生两个包含 1000 个随机整数的单列数组。一个数组是我的随机 x 坐标集，另一个数组是我的随机 y 坐标集。我正在尝试合并这两个数组，以便我有一个 x 和 y 坐标数组，我该怎么做？一旦我有一个随机 x 和 y 坐标数组，我就可以使用 if 和 else 语句来完成问题吗？例如，如果 xcoordinate>85 或 xcoordinate<15 或 ycoordinate>85 或 ycoordinate<15 然后将一个数字附加到一个空列表，然后使用列表的长度作为计数器？

请问有人可以就这个问题给我一些指导吗？我做对了吗？如果是这样，我怎么不是？如果是这样，我该如何继续？

. . . 感谢大家的帮助。

我现在已经设法完成了这两个部分，但现在我面临着将其作为对前一个部分的扩展的挑战：

iii）计算您的一个随机位置在半径为 50 像素的圆的（任一侧）15 像素内的频率，并将结果写入屏幕，例如，阵列中平均 N% 的位置落在该区域内[N 是 0 到 100 之间的数字] 请注意，角落的坐标在圆的 15 像素范围内，那么它们应该包含在其中（如果它们距离超过 15 像素，那么它们不应该包含在内）。

iv) 添加代码，向用户请求您的阵列内的位置，然后在该位置落在该区域时提醒他们，例如警告：您选择的位置落在圆的边缘附近。

我该怎么做呢？我什至不知道从哪里开始。有人可以给我一些指示吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:26:55.667

**您可以跳过实际生成数组并直接进行频率计算：**

首先，应该注意的是，由于 x 和 y 坐标都是完全随机的：

我们有规则：

> `P(A or B) = P(A) + P(B) - P(A and B)`

所以我们可以说

> `P(X or Y within 15) = P(X within 15) + P(Y within 15) - P(X and Y within 15)`

由于暗示 X 和 Y 从`0 to 99`（或`1 to 100`）均匀随机，我们可以假设

> `P(X within 15) = P(Y within 15)`

所以整个事情变成了

> `P(X or Y within 15) = 2P(X within 15) - P(X within 15)^2`

现在，我们只需要计算`P(X within 15)`。观察到 X 只能取整数值，因此函数对于和`f(x) = |X - 49.5| - 35`将大于零。（我们从零开始索引，但它相当于从 开始）。`x = 0..14``x = 85..99``1...100`

所以，代码：

```
from random import randrange

N = 3000
P_x_within_15 = sum(abs(randrange(100) - 49.5) - 35 > 0 for _ in range(N)) / float(N)

print "Frequency of X or Y within 15 pixels of edge:",
print 2 * P_x_within_15 - P_x_within_15 ** 2 
```

您可能已经注意到，我们跳过了实际创建数组的步骤，只是在生成随机数时将它们的布尔值（True/False with True = 1, False = 0）相加。

**编辑 - 实际上创建一个数组**

要为 100 x 100 矩阵创建随机坐标数组：

使用`numpy`代码将是：

```
from random import randrange
N = 3000
coords_array = array([randrange(100) for _ in range(2 * N)]).reshape(N, 2) 
```

使用纯python，它将是：

```
from random import randrange
N = 3000
coords_list = [(randrange(100), randrange(100)) for _ in range(N)] 
```

这里有几点需要注意：

1.  在 python 中，索引从零开始排序。`randrange(100)`会给你一个介于 0 到 99 之间的数字，包括 0 和 99。

2.  `N`只是我们希望生成的坐标数

3.  术语点：在python中，方括号表示的数据结构是`list`s，而不是数组（尽管它们等价于其他编程语言中的数组）。在上面的代码`array1`中是一个 python `list`，而不是一个`array`（这是一个不同的数据结构）。对位：`numpy`然而，广泛使用数组。在您的代码中，当您这样做时`array(array1)`，您实际上是在创建一个`numpy`数组。

4.  方括号之间的内容称为*列表推导*。它在语义上等价于：

* * *

```
coords_list = []
for _ in range(N):
    coords_list.append((randrange(100), randrange(100))) 
```

* * *

# windows-7 - 从 Windows 7 升级到 Windows 8 后无法启动 Visual Studio 2012

> ID：15903052
> 
> 赞同：4
> 
> 时间：2013-04-09T13:18:49.167
> 
> 标签：windows-7, windows-8, visual-studio-2012

我最近将我的 Windows 7 专业版升级到了 Windows 8 专业版。一切顺利，所有程序和服务（包括 SQL 服务器）都正常工作，除了 Visual Studio：它停止工作并继续显示消息“Microsoft Visual Studio 专业版已停止工作...... Windows 将关闭程序并通知您是否有可用的解决方案”。

我不能做什么：

*   我无法启动调试器，因为......它正在调用 VS 2012 进行调试
*   我无法卸载 VS 2012（相同的消息）
*   我无法从原始 CD 重新安装 VS 2012（相同的消息）
*   我什至无法在安全模式下执行此操作（强制重新启动 Windows Installer 服务后）

我做了什么：

*   google 类似问题
*   清理注册表等
*   检查应用程序日志，注意到此错误：

    *   错误应用程序名称：vs_professional.exe，版本：11.0.50727.1，时间戳：0x4fd9f28c
    *   错误模块名称：igdumd32.dll，版本：9.17.10.2932，时间戳：0x50c92441
    *   异常代码：0xc0000005
    *   故障偏移：0x0001a56a
    *   故障进程 ID：0x1988
    *   错误应用程序启动时间：0x01ce35224e886a32
    *   错误的应用程序路径：C:\vs\vs_professional.exe
    *   错误模块路径：C:\WINDOWS\SYSTEM32\igdumd32.dll

我仍然没有做的事情：

*   全新安装 Windows 8（或 7）

我希望有人能给我一个想法...

PS：Windows 7 是 En-US，而 Windows 8 是 En-En。有人会说这没有理由产生影响……但是……谁知道呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T15:33:06.030

这似乎是图形驱动程序问题。

看[这里](http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/009caf88-c752-4af9-b83a-665b48520fa4)，[这里](http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/33936443-529e-4b97-8cbc-0b18edbc7e52/)和[这里](http://social.technet.microsoft.com/Forums/en-US/systemcenterservicemanager/thread/af32509d-e7a6-4288-8558-695857228820)。

这些页面中的一些建议解决方案：

1.  更新您的图形驱动程序
2.  [DisableHWAcceleration = 1](http://msdn.microsoft.com/en-us/library/aa970912.aspx)（如果由于某种原因无法更新驱动程序时很有用）
3.  回滚到以前的驱动程序版本（或者在您的情况下卸载并使用旧版本重新安装）

# c# - XlCall.Excel(XlCall.xlcCalculateNow) 在后台工作人员发生事件时抛出 XlCallException

> ID：15903055
> 
> 赞同：2
> 
> 时间：2013-04-09T13:18:53.337
> 
> 标签：c#, excel-dna

我有一个 ExcelFunction 排队一些计算：

```
[ExcelFunction(...)]
public static void QueueCalcs(... takes ranges ...)
{
    var calcRequests = ... builds list of calc request parameters from ranges ...
    calcRequests.ForEach(QueueCalculation);
}

public static void QueueCalculation(calcRequestParameters)
{
    var bWorker = new BackgroundWorker();
    bWorker.DoWork += bWorkerDoWork;
    bWorker.RunWorkerCompleted += bWorkerRunWorkerCompleted;
    bWorker.RunWorkerAsnc(calcRequestParameters);
}

private static void bWorkerRunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    XlCall.Excel(XlCall.xlcCalculateNow);
} 
```

工作人员成功完成，但 OnComplete 委托抛出：

```
Exception of type 'ExcelDna.Integration.XlCallException' was thrown 
```

如果我删除后台工作人员并使用常规的 foreach 循环，然后调用 XlCall.Excel(XlCall.xlcCalculateNow)，则该函数的行为与预期相同。

做这样的事情可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:24:38.390

您不能从非计算线程调用 Excel C API（XlCall.Excel 或任何 ExcelReference 方法）。

Excel-DNA 有一个帮助程序，可让您排队工作以在 Excel 主线程调用的宏上下文中运行`ExcelAsyncUtil.QueueAsMacro(...)`。

目前尚不清楚您要做什么，但是如果您要实现异步函数，这似乎不是正确的方法....有一些对[一次性异步函数的](https://exceldna.codeplex.com/wikipage?title=Asynchronous%20Functions)内置支持或[基于 Reactive Extensions 的实时数据馈送](https://exceldna.codeplex.com/wikipage?title=Reactive%20Extensions%20for%20Excel)。

# iphone - Iphone中的日期格式问题

> ID：15903057
> 
> 赞同：1
> 
> 时间：2013-04-09T13:18:56.553
> 
> 标签：iphone, ios, objective-c, nsdate

我使用以下代码比较两个日期。但尽管如此，我设置了日期格式，但我无法按照指定的日期格式获取日期。

我的代码如下：

```
NSDate *today = [NSDate date];

NSString *g = [NSString stringWithFormat:@"%@", [[NSUserDefaults standardUserDefaults]valueForKey:@"EventDate"]];
NSLog(@"%@", g);
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"MM/dd/yyyy"];
NSDate *ed = [df dateFromString:g];
NSLog(@"%@\n %@", ed, today); 
```

输出是：

```
04/09/2013
2013-04-08 18:30:00 +0000
2013-04-09 13:13:29 +0000 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:29:49.377

我想你正在寻找这个，你的最后一个日志应该是：

```
NSLog(@"%@\n%@", [df stringFromDate: ed], [df stringFromDate: today]); 
```

`ed`这样，您将`today`根据您的`NSDateFormatter`.

# ajax - Sencha touch2：Ajax Post请求成功和失败函数没有被调用？

> ID：15903060
> 
> 赞同：0
> 
> 时间：2013-04-09T13:19:01.110
> 
> 标签：ajax, extjs, extjs4, sencha-touch, sencha-touch-2

我是 sencha touch2 的新手，我有 Ajax Post Request 代理，并且能够获取 Json 数据。但是我的成功和失败函数没有被调用？知道我该怎么做吗？这是我的模型供您参考：

```
Ext.define('TestApp.model.ModelList', {
    extend: 'Ext.data.Model',
    xtype:'modelList',
    config: {
        fields:['work'],

        proxy:{
            type:'ajax',
            method: 'POST',

            url:'http://localhost:9090/apps/works',
            callbackKey: 'callback',
            actionMethods: {
                create : 'POST',
                read   : 'POST', // by default GET
                update : 'POST',
                destroy: 'POST'
            },
            headers: {
                'Content-Type': 'application/xml',
                'Accept':'application/json'

            },
            callback: function(options, success, response) {
                console.log('999999999'+response.responseText);// not getting called
            },
            success: function(response) {
              console.log('success++++');// not getting called
            },
            failure: function(response) {
                console.log('failure++++');// not getting called
            },

            reader:
            {
                type:'json'
            }
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:38:05.393

代理本身没有定义回调。执行的操作确实如此。因此，例如`Model.load(1,{...})`可以在配置参数中指定回调函数，如下所示：

```
MyApp.User.load(10, {
    scope: this,
    failure: function(record, operation) {
        //do something if the load failed
    },
    success: function(record, operation) {
        //do something if the load succeeded
    },
    callback: function(record, operation) {
        //do something whether the load succeeded or failed
    }
}); 
```

更多信息在这里：[http](http://docs.sencha.com/touch/2-1/#!/api/Ext.data.Model) ://docs.sencha.com/touch/2-1/#!/api/Ext.data.Model 或在这里：[http://docs.sencha.com/ext-js/4-1 /#!/api/Ext.data.Model-static-method-load](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model-static-method-load)

还要确保您需要 Ajax 代理而不是 JSONP 代理。在 Ajax 代理上，通常不需要指定主机和端口，因为它应该与应用程序主机相同。如果不是这种情况，那么您需要 JSONP 代理。

# windows-server-2003 - 将驱动程序添加到 Windows 2003 安装

> ID：15903064
> 
> 赞同：0
> 
> 时间：2013-04-09T13:19:08.660
> 
> 标签：windows-server-2003

我有一台 DELL PowerEdge T105，此服务器与 RAID SAS 配合使用此驱动程序不在 Windows CD 上，通常这些驱动程序在安装时通过按 F3 添加软盘，是否可以将驱动程序添加到 Windows Server 20003 中的一个目录光盘？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:36:52.467

看看[nLite](http://www.nliteos.com/guide/)，它允许您自定义 Windows 安装。基本上，它需要一张 Windows 安装 CD 并允许您对其进行自定义（集成驱动程序、添加服务包等）。最终结果是您必须将其刻录到 CD 的 ISO 文件。

已经有一段时间了，但我用它来为我的 Windows XP 安装添加一个 RAID 驱动程序。

# iphone - 如何在 UIView 顶部显示删除按钮

> ID：15903068
> 
> 赞同：0
> 
> 时间：2013-04-09T13:19:18.090
> 
> 标签：iphone, uiview

请帮我。我正在解决一个问题，在视图顶部显示一个删除按钮。

![在此处输入图像描述](https://i.stack.imgur.com/jWD2Y.png)

不使用像这样显示的贝塞尔路径

当我使用贝塞尔路径时显示如下

![在此处输入图像描述](https://i.stack.imgur.com/nIo2K.png)

我如何显示按钮。

这是我正在使用的代码

```
UIView *view1 = [[UIView alloc] initWithFrame:CGRectMake(50, 50, 100, 100)];
[view1 setBackgroundColor:[UIColor orangeColor]];

UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:view1.bounds byRoundingCorners:UIRectCornerTopLeft| UIRectCornerTopRight                                                         cornerRadii:CGSizeMake(10.0, 10.0)];
// Create the shape layer and set its path
CAShapeLayer *maskLayer = [CAShapeLayer layer];
maskLayer.frame = view1.bounds;
maskLayer.path = maskPath.CGPath;
// Set the newly created shape layer as the mask for the image view's layer
view1.layer.mask = maskLayer;

[self.view addSubview:view1];

UIButton *bt1 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[bt1 setTitle:@"D" forState:UIControlStateNormal];
[bt1 setFrame:CGRectMake(87, -10, 25, 25)];
[view1 addSubview:bt1]; 
```

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:50:09.963

您始终可以根据视图的位置在您的超级视图中添加按钮。

@Larme 说的是真的，当你制作一个视图时，你会掩盖该视图的所有子视图。

如果您不想这样做，只需输入视图的 drawRect 并在那里绘制透明角以达到相同的效果。

# java - 如何在java中找到一个字符串对象重复了多少次？

> ID：15903077
> 
> 赞同：2
> 
> 时间：2013-04-09T13:19:35.730
> 
> 标签：java, string, object

我必须字符串对象：

```
String first = "/Some object that has a loop in it object/";
String second = "object"; 
```

我需要做的是找出第二个对象在第一个对象中重复了多少次，你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:23:59.467

使用在后台使用正则表达式的这一行：

```
String[] parts = first.split(second); 
```

String在 String 中`second`出现**(parts.length - 1)**次`first`。就这样。

**编辑：**

为防止在 String`second`可能包含正则表达式特定字符的情况下可能出现不需要的结果，您可以`Pattern.quote(second)`在将其传递给`split()`方法时使用，正如其中一位评论员所建议的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:22:05.577

最简单的方法是`indexOf`在循环中使用，每次找到单词时都会推进起始索引：

```
int ind = 0;
int cnt = 0;
while (true) {
    int pos = first.indexOf(second, ind);
    if (pos < 0) break;
    cnt++;
    ind = pos + 1; // Advance by second.length() to avoid self repetitions
}
System.out.println(cnt); 
```

如果一个单词包含自我重复，这将多次找到该单词。请参阅上面的评论以避免此类“重复”发现。

[ideone 上的演示](http://ideone.com/PuI86M)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T13:24:31.547

使用[`regex`](http://en.wikipedia.org/wiki/Regular_expression)，例如：

```
import java.util.regex.*;

class Test {
    public static void main(String[] args) {
        String hello = "HelloxxxHelloxxxHello"; //String you want to 'examine'
        Pattern pattern = Pattern.compile("Hello"); //Pattern string you want to be matched
        Matcher  matcher = pattern.matcher(hello); 

        int count = 0;
        while (matcher.find())
            count++; //count any matched pattern

        System.out.println(count);    // prints how many pattern matched
    }
} 
```

来源：[java正则表达式匹配计数](https://stackoverflow.com/questions/7378451/java-regex-match-count)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T13:22:37.423

用这个 ：

```
 String first = "/Some object that has a loop in it object/";
     String second = "object";
     Pattern pattern = Pattern.compile(second);
     Matcher matcher = pattern.matcher(first) ;
     long count = 0;
     while(matcher.find()) {
         count ++;

     }
     System.out.println(count); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T13:23:02.963

尝试如下...

```
String str = "/Some object that has a loop in it object/";
String findStr = "object";
int lastIndex = 0;
int count =0;

while(lastIndex != -1){

       lastIndex = str.indexOf(findStr,lastIndex);

       if( lastIndex != -1){
             count ++;
             lastIndex+=findStr.length();
      }
}
System.out.println(count); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T13:24:16.563

您可以拆分`String`第二个`String`并计算结果数组的长度，它将多一个元素，即出现次数。或者您可以使用`Pattern`and `Matcher`，这是一种更合适的方法。

```
public static void main(String[] args) throws UnsupportedEncodingException, IOException {
    String first = "/Some object that has a loop in it object/";
    String second = "object";

    System.out.println(first.split(Pattern.quote(second)).length - 1);

    final Pattern pattern = Pattern.compile(Pattern.quote(second));
    final Matcher matcher = pattern.matcher(first);
    int count = 0;
    while (matcher.find()) {
        count++;
    }

    System.out.println(count);

} 
```

不要忘记使用`Pattern.quote`以防万一。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-16T15:02:57.157

我知道这是一个较老的话题，但在我脑海中，你可以使用递归：

```
// Recursive routine to find the xth repeat of a string
public int atIndex(String searchin, String searchfor, int whichone, int pos) {
    return atIndex(searchin, searchfor, whichone, pos, 0);
}

public int atIndex(String searchin, String searchfor, int whichone, int pos, int recursed) {
    return (whichone>0?atIndex(searchin, searchfor, --whichone, searchin.indexOf(searchfor,pos)+1,++recursed):(recursed==0?-1:pos-1));
} 
```

我是 Java 新手，所以可能存在我不知道的速度或资源问题，但一点点测试应该可以解决任何问题。

要调用它，您可以使用：

```
 String HL7Test="MSH|^~\\&|EPIC|EPICADT|SMS|SMSADT|199912271408|CHARRIS|ADT^A04|1817457" ;
    System.out.println(atIndex(HL7Test, "|", 4, 0)); 
```

希望这可以帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-20T19:06:06.580

在这里，您只需要两个变量并在循环条件中进行所有检查。

```
int pos = 0;
int count= 0;
while (first.indexOf(second, pos) >= 0) {
    count++;
    pos = first.indexOf(second, pos) + 1;
}

System.out.println(count); 
```

# vb.net - vb.net 中 Marshal.PtrToStructure 中的访问冲突异常

> ID：15903078
> 
> 赞同：0
> 
> 时间：2013-04-09T13:19:38.677
> 
> 标签：vb.net, marshalling, windows-7-x64, access-violation, intptr

## 我有下面的代码片段，它从在 dll 中定义的 C API 获取指针。使用编组我试图获取结构数组，这是我的要求。

```
<StructLayout(LayoutKind.Sequential, CharSet:=CharSet.Ansi)> _
Public Class vb_menu_dotnet
Public level As Short
Public menu_id As String
End Class
Dim current As IntPtr
Dim outArray As IntPtr
Dim manArray(100) As vb_menu_dotnet
vb_dotnet_get_menu_hierarchy(p_menu_handle, p_apl_id, outArray) //C API call
current = outArray
Dim j As Integer
For j = 1 To 100
manArray(j) = New vb_menu_dotnet()
Marshal.PtrToStructure(current, manArray(j)) //Access Violation Exception 
```

* * *

C API的原型如下：

```
vb_dotnet_get_menu_hierarchy(tcodss_handle_t p_menu_handle,char* p_apl_id,vb_menu_dotnet** p_menu_array)
Structure defination :
typedef struct {
short level;
char* menu_id;
} vb_menu_dotnet; 
```

当 dll 和以上代码都使用 x86 选项构建时，相同的代码片段有效。但是当使用 x64 选项运行时，我在 Marshal.PtrToStructure(current, manArray(j)) 处得到 AccessViolation Exception

注：使用VS2010，framework 4.0，Windows 7 64位操作系统

# ios - 在无限循环iOS中显示输出

> ID：15903083
> 
> 赞同：-1
> 
> 时间：2013-04-09T13:19:48.420
> 
> 标签：ios, loops, text, label, infinite

我是 iOS 新手，我需要一些关于如何在 Iphone 屏幕上无限循环显示输出的反馈。

当按下按钮时，应用程序进入无限循环并创建一些输出。我想在 Iphone 屏幕上显示这些输出。尽管我在调试屏幕上从 printf 获得了这些值，但 Iphone 屏幕上没有显示任何内容。如果我在没有无限循环的情况下尝试这个功能，我将能够在屏幕上看到输出，但是应用程序必须在无限循环中运行。

由于我对编程很陌生，应用程序是否需要在多线程模式下运行？

代码如下：

```
-(IBAction)button:(UIButton *)sender{
        NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

        int output = -1;

        while (pool) {

            //output is received

            if((output != -1) ) {

                printf("%i \n", output); // the output is seen on debug screen

                self.display.text = [NSString stringWithFormat:@"%i",output]; // the outputs is not shown on iphone

                //[pool release];

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:24:56.863

你没有改变输出的值，所以如果它进入循环它永远不会改变。

该应用程序已经是多线程的，否则不能 - 您可能正在谈论后台任务（[http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

您是否应该在不同的线程上取决于循环的控制方式，任何繁重的工作或大量的大量工作都应该从主线程中取出，类似于：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    //My background stuff

    dispatch_async(dispatch_get_main_queue(), ^{
        //My ui code
    });
}); 
```

关于线程，GCD 使用起来非常简单：（[https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)） - 有很多关于 GCD 的教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:36:30.647

我认为问题是快速变化的文本不让我们看到输出。

试试这个，告诉我你得到了什么。

```
self.display.text = [NSString stringWithFormat:@"%@%i",self.display.text, output]; 
```

# visual-studio-2010 - MSBuild：生成在 VisualStudio 的“错误列表”窗口中可见的消息

> ID：15903088
> 
> 赞同：6
> 
> 时间：2013-04-09T13:19:59.387
> 
> 标签：visual-studio-2010, msbuild, messages

Visual Studio 有一个“错误列表”窗口：

![Visual Studio 错误列表窗口](https://i.stack.imgur.com/qKrfP.png)

在 msbuild 任务中（在 .csproj 文件中）：

*   当我使用`<error text="Foo">`标签时，我在错误列表中得到一个错误（我可以通过在该窗口中取消切换错误来隐藏它）
*   当我使用`<warning text="Bar">`标签时，我在错误列表中收到警告（我可以通过在该窗口中取消切换警告来隐藏它）
*   当我使用`<message text="Baz">`标签时，**我在错误列表窗口中看不到任何内容**。如果我转到输出窗口，我可以在那里看到消息（即使我打开或关闭消息）。

**如何从 MSBuild 脚本生成显示在 Visual Studio“错误列表”窗口中的消息？**

注意：我使用的是 Visual Studio 2010。

# r - 在R中使用带有if else语句的for循环

> ID：15903091
> 
> 赞同：1
> 
> 时间：2013-04-09T13:20:01.933
> 
> 标签：r, mechanicalturk

我正在尝试使用 if else 语句创建一个 for 循环。我的代码如下所示：

```
for(i in 1:length(assignmentlist[,1]))
{if assignmentlist$Approve[i]=="1"
      {ApproveAssignment(assignments=assignmentlist$AssignmentId[i],sandbox=T)}
  else {RejectAssignment(assignments=assignmentlist$AssignmentId[i],sandbox=T)}} 
```

而“assignmentlist”如下所示

```
> assignmentlist
   AssignmentId    Approve                   
1          5135          1 
2          8963          0
3          6823          0
4          3287          1 
```

基本上我想为“批准”列中所有具有“1”的条目执行“批准分配”功能。问题是，我想在 ApproveAssignment 函数中使用相同的索引（相同的 i **）**。不幸的是，这似乎不起作用。有没有人有温和的方法来避免这个问题？

编辑：Approve Assignment 功能是通过 API 批准 Mechanical Turk 的特定分配的功能，并且是 MTurkR 包的一部分

非常感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:39:44.270

我不明白这一点，因为你循环的“i”可以直接在你的函数中使用：

```
ApproveAssignment <- function(assignments=NULL, sandbox=NULL) cat(i, "was approved\n")
RejectAssignment <- function(assignments=NULL, sandbox=NULL) cat(i, "was rejected\n")

for(i in 1:length(assignmentlist[,1])){
  if (assignmentlist$Approve[i]=="1")
    ApproveAssignment(assignments=assignmentlist$AssignmentId[i],sandbox=T)
  else
    RejectAssignment(assignments=assignmentlist$AssignmentId[i],sandbox=T)
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:32:49.613

如果，我假设你想在其中使用它，你是 的作者`ApproveAssignment`，你应该将索引作为附加参数交给函数。

```
ApproveAssignment <- function(assignments, sandbox, index) { ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T10:01:54.317

`ApproveAssignment`并`RejectAssignment`在内部循环通过一个 AssignmentIds 向量以对 API 进行特定于分配的调用，因此您所要做的就是为其提供一个 AssignmentIds 向量，无需循环或任何条件。

```
ApproveAssignment(assignments=assignmentlist$AssignmentId[assignmentlist$Approve==1],sandbox=T)
RejectAssignment(assignments=assignmentlist$AssignmentId[!assignmentlist$Approve==1],sandbox=T) 
```

# asp.net-mvc-3 - 如何在 TFS 中将 Bulk workItems 创建为 c# 中的错误

> ID：15903094
> 
> 赞同：1
> 
> 时间：2013-04-09T13:20:15.360
> 
> 标签：asp.net-mvc-3, c#-4.0, tfs

目前我正在使用 TFS Sdk 从 c# 代码创建工作项作为错误。我有大约 5k 个错误，我从 Sql Server Db Paging 查询 1000，然后将 workItems 创建到 TFS 中。但是创建 1000 个工作项并保存到 TFS 需要 15 分钟以上。以下是我创建的 workItems

```
foreach (var item in listbugs)
                            {
                                var workItem = new WorkItem(workItemTypes["bug"]);
                                workItem.Title = "newTitle";
                                workItem.Fields["repro steps"].Value = "Rerpoducible Step";
                                workItem.Save();
                            } 
```

因此，如果你们知道如何创建批量工作项，请分享知识。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:28:43.217

文档 ( [http://msdn.microsoft.com/en-us/library/bb130338%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/bb130338%28v=vs.90%29.aspx) ) 指出：

> 每次将工作项保存到 Team Foundation Server 时，都会在工作项对象模型和服务器之间生成一个往返操作。要在保存多个工作项时尽量减少往返次数，请使用 BatchSave 方法。

BatchSave 的文档：http: [//msdn.microsoft.com/en-us/library/bb140385%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/bb140385%28v=vs.90%29.aspx)

# java - Java CipherInputStream 将奇怪的字符放在行首

> ID：15903096
> 
> 赞同：1
> 
> 时间：2013-04-09T13:20:19.383
> 
> 标签：java, inputstream, outputstream, encryption

我正在测试 Java 中的文本加密。问题是我在行首得到了一些奇怪的字符，我不明白为什么。当我删除加密时，一切都很顺利。

复制到 Notepad++ 时，输出如下所示：

```
Hello

<SOH>dear

<STX><STX>world 
```

为什么我得到奇怪的控制字符？

代码：

```
public class Test {
        private static File file;
        private static final byte[] STAT_KEY = { -1, -2, 3, 4, -5, -6, -7, 8 };
        static {
            file = new File("MyFile.txt");
        }

        private static Cipher getCipher(int mode) throws InvalidKeyException, NoSuchAlgorithmException,
                InvalidKeySpecException, NoSuchPaddingException {
            DESKeySpec dks = new DESKeySpec(STAT_KEY);
            SecretKeyFactory skf = SecretKeyFactory.getInstance("DES");
            SecretKey desKey = skf.generateSecret(dks);
            Cipher cipher = Cipher.getInstance("DES");
            cipher.init(mode, desKey);
            return cipher;
        }

        private static void appendToFile(String item) throws Exception {
            CipherOutputStream cos = null;
            try {
                cos = new CipherOutputStream(new FileOutputStream(file, true), getCipher(Cipher.ENCRYPT_MODE));
                cos.write((item + String.format("%n")).getBytes());
            } finally {
                cos.close();
            }
        }

        private static void readFromFile() throws Exception {
            CipherInputStream cis = null;
            try {
                cis = new CipherInputStream(new FileInputStream(file), getCipher(Cipher.DECRYPT_MODE));
                int content;
                while ((content = cis.read()) != -1) {
                    System.out.print((char) content);
                }
            } finally {
                cis.close();
            }
        }

        public static void main(String[] args) throws Exception {
            String[] items = { "Hello", "dear", "world" };
            for (String item : items) {
                appendToFile(item);
            }
            readFromFile();
        }
    } 
```

PD：请原谅我处理异常的方式:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:19:07.097

很像 an `ObjectOutputStream`， the`CipherOutputStream`不是以允许直接附加的方式编写的。

> 追加（数据1）+追加（数据2）+追加（数据3）！=追加（数据1+数据2+数据3）

您需要添加自己的方法来分隔不同的数据块。搞笑`?`字符是`CipherOutputStream`.

如果您只是正常加密数据（即使用`Cipher`对象）并将输出写入由合适的分隔符包围的文件，那么生活可能会更轻松。

# android - 显示具有透明背景的 Android Webview

> ID：15903098
> 
> 赞同：0
> 
> 时间：2013-04-09T13:20:26.610
> 
> 标签：android, background, webview, transparent

我想加载一个动画 gif。我发现我可以在 WebView 中加载它。现在我创建了一个从 WebView 扩展的类。它看起来像这样：

```
public class GifWebView extends WebView {

public GifWebView(Context context, String path) {
  super(context);

  loadUrl(path);

  setBackgroundColor(Color.TRANSPARENT);
  setLayerType(WebView.LAYER_TYPE_SOFTWARE, null);

  }
} 
```

不幸的是背景是黑色的。你知道解决办法吗？我在 Android 4.1.2 上试过。我已经在stackoverflow上进行了搜索，但没有找到解决问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:26:10.207

您需要更改所提供文档的背景。由于 webview 将文档加载到其背景之上

# ruby-on-rails-3 - Rails RESTfull API 文档

> ID：15903102
> 
> 赞同：1
> 
> 时间：2013-04-09T13:20:43.593
> 
> 标签：ruby-on-rails-3, api, documentation, yard

我正在寻找支持以下功能的文档框架：

*   从代码注释生成
*   可搜索
*   造型可定制
*   NTH：链接引用（如果我在某处引用某个类，则类名应链接到类文档）

我想用它来记录我正在处理的 RESTfull API

我知道 YARDoc，但很高兴收集一些替代品

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:06:13.417

Matt Silverman 创建了一个非常全面的列表，列出了现在可以从代码中生成文档的内容。

[http://www.mattsilverman.com/2013/02/tools-to-generate-beautiful-api-documentation.html](http://www.mattsilverman.com/2013/02/tools-to-generate-beautiful-api-documentation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:17:08.867

除了 YARD，您还可以使用以下 rake 任务生成 RDOC 项目文档：

```
rake doc:app 
```

之后，您的文档将位于`doc/app`文件夹中，可以通过`index.html`在浏览器中打开文件来查看。它将包括（目前可能是通用的）`doc/README_FOR_APP`文件。

希望这可以帮助 ：）

# c# - C# 和 MySQL 连接器

> ID：15903104
> 
> 赞同：0
> 
> 时间：2013-04-09T13:20:44.957
> 
> 标签：c#, mysql, database-connection, database-permissions

为客户端开发一个应用程序，当用户注销时，它会运行该程序。

到目前为止，该程序会抓取所有用户的互联网浏览历史并将其放入一个 html 文件，但他们想切换到 MySQL 方法

让所有 MySQL 工作，但在注销时，应用程序运行。

在我的 PC 上，我可以使用凭据直接连接到 MySQL 服务器，并且它都在本地网络上，所以没有问题。

但是我们发现了这个问题......

```
 Problem signature:
  Problem Event Name:   CLR20r3
  Problem Signature 01: historylog.exe
  Problem Signature 02: 2.0.0.0
  Problem Signature 03: 516410a9
  Problem Signature 04: MySql.Data
  Problem Signature 05: 6.0.7.0
  Problem Signature 06: 4c75af83
  Problem Signature 07: fc
  Problem Signature 08: 64
  Problem Signature 09: MySql.Data.MySqlClient.MySql
  OS Version:   6.1.7601.2.1.0.256.48
  Locale ID:    2057
  Additional Information 1: 0a9e
  Additional Information 2: 0a9e372d3b4ad19135b953a78882e789
  Additional Information 3: 0a9e
  Additional Information 4: 0a9e372d3b4ad19135b953a78882e789 
```

根据网上的人说，0a9e 表示没有访问服务器的权限，但它是对它需要的表的完全权限，实际上是对服务器本身的完全权限

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:25:48.740

你应该跑

```
mysql> SHOW GRANTS FOR 'youruser'@'yourdomain'; 
```

以确保您的用户拥有正确的权限。您还应该确保从授权域进行连接。可以为特定子网授予/拒绝授权。见[拨款文件](http://dev.mysql.com/doc/refman/5.1/en/grant.html#grant-accounts-passwords)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-23T12:58:30.653

您需要在 mysql 服务器上创建数据库模式，程序无法创建它（就像在您的开发环境中所做的那样）。该错误是由数据库模式的生成引起的。

# elasticsearch - 来自弹性搜索的太多打开文件警告

> ID：15903105
> 
> 赞同：17
> 
> 时间：2013-04-09T13:20:44.890
> 
> 标签：elasticsearch

不断收到以下警告消息。不知道应该怎么做。看到一些相关的帖子要求增加文件描述符的数量。

如何做同样的事情？

即使我现在增加，我是否会在添加新索引时遇到同样的问题。（目前使用大约 400 个索引、6 个分片和 1 个副本）。指数的数量往往会增加更多。

```
[03:58:24,165][WARN ][cluster.action.shard     ] [node1] received shard failed for [index9][2], node[node_hash3], [P], s[INITIALIZING], reason [Failed to start shard, message [IndexShardGatewayRecoveryException[[index9][2] failed recovery]; nested: EngineCreationFailureException[[index9][2] failed to open reader on writer]; nested: FileNotFoundException[/data/elasticsearch/whatever/nodes/0/indices/index9/2/index/segments_1 (Too many open files)]; ]] 
[03:58:24,166][WARN ][cluster.action.shard     ] [node1] received shard failed for [index15][0], node[node_hash2], [P], s[INITIALIZING], reason [Failed to create shard, message [IndexShardCreationException[[index15][0] failed to create shard]; nested: IOException[directory '/data/elasticsearch/whatever/nodes/0/indices/index15/0/index' exists and is a directory, but cannot be listed: list() returned null]; ]] 
[03:58:24,195][WARN ][cluster.action.shard     ] [node1] received shard failed for [index16][3], node[node_hash3], [P], s[INITIALIZING], reason [Failed to start shard, message [IndexShardGatewayRecoveryException[[index16][3] failed recovery]; nested: EngineCreationFailureException[[index16][3] failed to open reader on writer]; nested: FileNotFoundException[/data/elasticsearch/whatever/nodes/0/indices/index16/3/index/segments_1 (Too many open files)]; ]] 
[03:58:24,196][WARN ][cluster.action.shard     ] [node1] received shard failed for [index17][0], node[node_hash3], [P], s[INITIALIZING], reason [Failed to start shard, message [IndexShardGatewayRecoveryException[[index17][0] failed recovery]; nested: EngineCreationFailureException[[index17][0] failed to open reader on writer]; nested: FileNotFoundException[/data/elasticsearch/whatever/nodes/0/indices/index17/0/index/segments_1 (Too many open files)]; ]] 
[03:58:24,198][WARN ][cluster.action.shard     ] [node1] received shard failed for [index21][4], node[node_hash3], [P], s[INITIALIZING], reason [Failed to start shard, message [IndexShardGatewayRecoveryException[[index21][4] failed recovery]; nested: EngineCreationFailureException[[index21][4] failed to create engine]; nested: LockReleaseFailedException[Cannot forcefully unlock a NativeFSLock which is held by another indexer component: /data/elasticsearch/whatever/nodes/0/indices/index21/4/index/write.lock]; ]] 
```

节点api的输出

```
curl -XGET 'http://localhost:9200/_nodes?os=true&process=true&pretty=true'

{ 
  "ok" : true, 
  "cluster_name" : "whatever", 
  "nodes" : { 
    "node_hash1" : { 
      "name" : "node1", 
      "transport_address" : "transportip1", 
      "hostname" : "myhostip1", 
      "version" : "0.20.4", 
      "http_address" : "httpip1", 
      "attributes" : { 
        "data" : "false", 
        "master" : "true" 
      }, 
      "os" : { 
        "refresh_interval" : 1000, 
        "available_processors" : 8, 
        "cpu" : { 
          "vendor" : "Intel", 
          "model" : "Xeon", 
          "mhz" : 2133, 
          "total_cores" : 8, 
          "total_sockets" : 8, 
          "cores_per_socket" : 16, 
          "cache_size" : "4kb", 
          "cache_size_in_bytes" : 4096 
        }, 
        "mem" : { 
          "total" : "7gb", 
          "total_in_bytes" : 7516336128 
        }, 
        "swap" : { 
          "total" : "30gb", 
          "total_in_bytes" : 32218378240 
        } 
      }, 
      "process" : { 
        "refresh_interval" : 1000, 
        "id" : 26188, 
        "max_file_descriptors" : 16384 
      } 
    }, 
    "node_hash2" : { 
      "name" : "node2", 
      "transport_address" : "transportip2", 
      "hostname" : "myhostip2", 
      "version" : "0.20.4", 
      "attributes" : { 
        "master" : "false" 
      }, 
      "os" : { 
        "refresh_interval" : 1000, 
        "available_processors" : 4, 
        "cpu" : { 
          "vendor" : "Intel", 
          "model" : "Xeon", 
          "mhz" : 2400, 
          "total_cores" : 4, 
          "total_sockets" : 4, 
          "cores_per_socket" : 32, 
          "cache_size" : "20kb", 
          "cache_size_in_bytes" : 20480 
        }, 
        "mem" : { 
          "total" : "34.1gb", 
          "total_in_bytes" : 36700303360 
        }, 
        "swap" : { 
          "total" : "0b", 
          "total_in_bytes" : 0 
        } 
      }, 
      "process" : { 
        "refresh_interval" : 1000, 
        "id" : 24883, 
        "max_file_descriptors" : 16384 
      } 
    }, 
    "node_hash3" : { 
      "name" : "node3", 
      "transport_address" : "transportip3", 
      "hostname" : "myhostip3", 
      "version" : "0.20.4", 
      "attributes" : { 
        "master" : "false" 
      }, 
      "os" : { 
        "refresh_interval" : 1000, 
        "available_processors" : 4, 
        "cpu" : { 
          "vendor" : "Intel", 
          "model" : "Xeon", 
          "mhz" : 2666, 
          "total_cores" : 4, 
          "total_sockets" : 4, 
          "cores_per_socket" : 16, 
          "cache_size" : "8kb", 
          "cache_size_in_bytes" : 8192 
        }, 
        "mem" : { 
          "total" : "34.1gb", 
          "total_in_bytes" : 36700303360 
        }, 
        "swap" : { 
          "total" : "0b", 
          "total_in_bytes" : 0 
        } 
      }, 
      "process" : { 
        "refresh_interval" : 1000, 
        "id" : 25328, 
        "max_file_descriptors" : 16384 
      } 
    } 
  } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-09T15:35:27.517

如何增加允许打开文件的最大数量取决于您的 Linux 发行版。以下是 ubuntu 和 centos 的一些说明：

[http://posidev.com/blog/2009/06/04/set-ulimit-parameters-on-ubuntu/](http://posidev.com/blog/2009/06/04/set-ulimit-parameters-on-ubuntu/) [http://pro.benjaminste.in/post/318453669/increase-the-number-of-file- centos 上的描述符和](http://pro.benjaminste.in/post/318453669/increase-the-number-of-file-descriptors-on-centos-and)

elasticsearch 文档建议将最大文件限制设置为 32k 或 64k。既然你是 16k 并且已经达到了极限，我可能会把它设置得更高；像128k这样的东西。请参阅：[http ://www.elasticsearch.org/guide/reference/setup/installation/](http://www.elasticsearch.org/guide/reference/setup/installation/)

增加打开文件的数量并重新启动 elasticsearch 后，您将需要通过重新运行您提到的 curl 命令来验证它是否有效：

```
curl -XGET 'http://localhost:9200/_nodes?os=true&process=true&pretty=true' 
```

随着您添加更多索引（以及更多文档），您还将看到 elasticsearch 跟踪的文件数量增加。如果您注意到所有指标和文档的性能下降，您可以尝试向集群添加一个新节点：[http](http://www.elasticsearch.org/guide/reference/setup/configuration/) ://www.elasticsearch.org/guide/reference/setup/configuration/ - 因为您已经有一个分片，复制配置，这应该是一个相对无痛的过程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-08T20:53:58.063

1.  停止弹性搜索。如果您从 (bin/elasticsearch) 之类的命令开始，请在启动时指定此设置以设置堆。例如，我使用一个 16GB 的盒子，所以我的命令是

    一种。**bin/elasticsearch -Xmx8g -Xms8g**

    湾。转到配置（elasticsearch/config/elasticsearch.yml）并确保

    **bootstrap.mlockall：真**

    C。**将ulimits -Hn**和ulimits **-Sn**增加到**200000 以上**

2.  如果您作为服务启动，请执行以下操作

    一种。出口 ES_HEAP_SIZE=10g b. 转到配置（/etc/elasticsearch/elasticsearch.yml）并确保

    **bootstrap.mlockall: 真的** c. **将ulimits -Hn**和ulimits **-Sn**增加到**200000 以上**

*确保输入的大小不超过堆的 50%，无论是作为服务启动还是从命令行启动*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-13T17:25:05.710

请注意，如果 elasticsearch 是一项服务，则通过更改 ulimit`/etc/security/limits.conf`不会产生任何影响。`systemd`

要[增加 systemd 下的 elasticsearch 限制，](https://www.elastic.co/guide/en/elasticsearch/reference/current/setting-system-settings.html#systemd)请创建一个`/etc/systemd/system/elasticsearch.service.d/override.conf`包含以下内容的文件：

> [服务]
> LimitNOFILE=infinity

然后运行`systemctl daemon-reload && systemctl restart elasticsearch`。

# vba - 无法从 VBA (Word) 实例化 NotesUIWorkspace

> ID：15903107
> 
> 赞同：0
> 
> 时间：2013-04-09T13:21:02.590
> 
> 标签：vba, lotus-notes, ms-word, lotusscript

源情况：我有一个Notes 应用程序，它在Windows XP 下使用MS Office 2000。新情况必须是Windows 7下的MS Office 2010。IBM Notes是8.5.3FP3。旧的使用 VBA 模板与正常工作的 Notes 进行通信。一次创建 Notes.NotesUiWorkSpace 对象以打开文档、导航到富文本项目、选择所有内容（格式化）并复制到剪贴板。然后通过 VBA 将剪贴板内容粘贴到 Word 文档中。这很好用。第二个环境中的相同代码不再起作用。我注意到 Notes.NotesUIWorkSpace 对象无法在 VBA 中实例化。没有错误，没有提示。当我稍后引用工作区对象时，只有运行时错误。

这是一段代码摘录：

```
' this is a profile document which is filled correctly
Call prof.Save(True, True)
Call prof.replaceItemValue("Form", "Profile")
' setting up the ui
dim WS as Object
set WS = CreateObject("Notes.NotesUiWorkSpace")
Set uiprof = WS.EditDocument(True, prof)

' Set uiprof = WS.currentDocument
If uiprof.editMode Then Call uiprof.gotofield("RT")
Call uiprof.SelectAll
Call uiprof.Copy
Call uiprof.Close
' later on the clipboard will be pasted into the word document 
```

有什么想法可能是这里的原因吗？我今晚正在使用 XP、MS Office 2010 和 Notes 设置环境，以检查它不是由 Windows 7 引起的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:45:18.037

如果 Windows 7 机器是 64 位，请在[此处](https://stackoverflow.com/questions/2416308/is-a-comexception-of-0x80040154-always-class-not-registered)查看答案。请注意，这些是指 COM 类（lotus. *），而您正在使用 OLE 类（notes.*），但我相信 64/32 位问题适用于两者。

# c# - 在过滤结果之前返回整个数据集的实体框架 5

> ID：15903113
> 
> 赞同：1
> 
> 时间：2013-04-09T13:21:17.190
> 
> 标签：c#, entity-framework-5

我有一个为我的所有存储库实现的抽象类 - 在其中我有一个返回集合的属性：

```
protected readonly IDbSet<T> _dbSet;

public virtual IEnumerable<T> GetSelection(Func<T, bool> where)
{
    return _dbSet.Where(where);
} 
```

回购：

```
public class PostcodeDataRepository : EntityRepositoryBase<PostcodeData>, IPostcodeDataRepository
{
    // Constructor in here
} 
```

现在这很好用：

```
var postcodeData = postcodeRespoistory.GetSelection(x=>x.Postcode == "SW1A 2TT"); 
```

（是的，它是英国邮政编码数据，是的，表中有近 2m 行）

这很好用，但我的问题是只为应用程序返回所有数据，然后过滤它会导致一些性能问题（如您所料！）。我使用 MiniProfiler 和 EFProf 来确认它正在有效地做一个`select * from PostcodeData`不是我想要做的事情。

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:30:09.443

您需要使用`Expression<Func<TSource, bool>>`谓词：

```
public IEnumerable<T> GetSelection(Expression<Func<T, Boolean>> predicate)
{
    return _dbSet.Where(where);
} 
```

# java - JComboBox.remove 不起作用

> ID：15903116
> 
> 赞同：2
> 
> 时间：2013-04-09T13:21:22.050
> 
> 标签：java, swing, jcombobox

我正在尝试删除 JComboBox 中的选定项目（我已添加设计时间）但未执行删除功能。我究竟做错了什么

```
// jComboBox1.removeAllItems(); working
// jComboBox1.removeItem(jComboBox1.getSelectedItem()); working
jComboBox1.remove(jComboBox1.getSelectedIndex()); not working 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T13:25:00.420

中没有这种方法`remove`。`Class JComboBox`

您想使用[public void removeItemAt(int anIndex)](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/JComboBox.html#removeItemAt%28int%29)：

> 删除 anIndex 处的项目 此方法仅在 JComboBox 使用可变数据模型时有效。

```
jComboBox1.removeItemAt(jComboBox1.getSelectedIndex()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:28:30.957

来自 JavaDoc

```
public void remove(int index)

    Removes the component, specified by index, from this container. This method also notifies the layout manager to remove the component from this container's layout via the removeLayoutComponent method.

    Parameters:
        index - the index of the component to be removed 
```

但正如上面的答案中提到的，你需要做

```
jComboBox1.removeItemAt(jComboBox1.getSelectedIndex()); 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T13:24:23.887

看起来你想要`jComboBox1.removeItemAt(...)`

请参阅[http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html#removeItemAt(int)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html#removeItemAt(int))

# html - 溢出：隐藏的问题

> ID：15903119
> 
> 赞同：-2
> 
> 时间：2013-04-09T13:21:34.227
> 
> 标签：html, css, facebook-like, overflow

我在幻灯片 div 的标题部分有一个类似 facebook 的按钮，它位于最右下角。显然，幻灯片容器有`overflow: hidden`，并且当您单击喜欢时，“post to wall”位会弹出，位于like 按钮下方。正如预期的那样，这被切断了..但我需要它是可见的。我已经尝试过 z-index 和 position: absolute 没有运气..有什么建议吗？

您可以在此处查看该网站：`http://65.39.128.45/~apretty/category/habitat/`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:23:39.530

您需要将like按钮放在元素之外，`overflow: hidden`因为元素的子元素不会`overflow: hidden`溢出父元素......

# flash - 如何调节 Chromium Embedded 中的闪存量？

> ID：15903124
> 
> 赞同：1
> 
> 时间：2013-04-09T13:21:41.653
> 
> 标签：flash, visual-c++, volume, audio, chromium-embedded

如何在 Windows 7 上调节 Chromium Embedded 中的闪存量？我尝试过 Mixer API、EndPointVolume API、Mmdevice API、音频会话等。但它总是调节错误的轨道（创建不播放声音的新轨道）。

# wget - 如何在具有许多文件夹和子文件夹的站点上使用 wget

> ID：15903125
> 
> 赞同：1
> 
> 时间：2013-04-09T13:21:45.100
> 
> 标签：wget

我尝试使用以下代码下载[此站点](http://tenshi.spb.ru/anime-ost/)：

wget -r -l1 -H -t1 -nd -N -np -A.mp3 -erobots=off tenshi.spb.ru/anime-ost/

但我只得到索引并进入第一个文件夹，而不是子文件夹，帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:16:54.383

我使用此命令下载站点，包括其子文件夹：

wget --mirror -p --convert-links -P 。[网站地址]

一点解释：

--mirror 是 -N -r -l inf --no-remove-listing 的快捷方式。--convert-links 使下载的 HTML 或 CSS 中的链接指向本地文件 -p 允许您获取显示 HTML 页面所需的所有图像等 -P 指定下一个参数是文件将保存到的目录

我在以下位置找到了命令： [http ://www.thegeekstuff.com/2009/09/the-ultimate-wget-download-guide-with-15-awesome-examples/](http://www.thegeekstuff.com/2009/09/the-ultimate-wget-download-guide-with-15-awesome-examples/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:24:50.270

您使用`-l 1`也称为`--level=1`which 将递归限制在一个级别。将其设置为更高级别以下载更多页面。顺便说一句，我喜欢像 --level 这样的长选项，因为它更容易看到你在做什么而无需返回手册页。

# c# - 在主线程中设置线程局部值并进入另一个线程

> ID：15903126
> 
> 赞同：1
> 
> 时间：2013-04-09T13:21:46.983
> 
> 标签：c#, .net, multithreading, thread-local

我一直在使用[ThreadLocal](http://msdn.microsoft.com/en-us/library/dd642243.aspx)在一端设置值并在另一端使用 get 方法检索值下面的代码是

```
public class sample()
{    
        public  ThreadLocal<Object> tl1 = new ThreadLocal<Object>();
        protected void Page_Load(object sender, EventArgs e)
        {
            Thread thread = new Thread(new ThreadStart(Myfunction));
            setname("myval");   
            thread.Start();
        }

        public void setname(String name)
        {
            tl1.Value = name;
        }
        public  String getname()
        {
            return (String)tl1.Value;
        }

        public void Myfunction()
        {
            String value=getname();
        }
} 
```

我在**setname 方法**中正确设置了值..

但它发生的事情是，当我尝试在单独的线程中获取它的值时，即使设置值名称更改为 null。

```
ex: "myval" changed to "null" 
```

我怎么解决这个问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T13:24:18.583

根据定义，如果您从另一个线程访问它，您将获得一个不相关的值 - 即第二个线程的“本地”值。最好将数据存储在与它相关的上下文中，而不是在线程的上下文中 -*特别是*如果这实际上类似于 ASP.NET（它不**保证**在整个持续时间内使用相同的线程的请求）。例如，（回到 ASP.NET）请求具有允许存储任意键值对的上下文。

# git - 如何使用一个遥控器推送到一个 URL 并从另一个 URL 拉取？

> ID：15903129
> 
> 赞同：6
> 
> 时间：2013-04-09T13:21:52.740
> 
> 标签：git, github

我已经创建了[这个存储库](https://github.com/cavneb/airbrake-grails)的克隆。如果我运行以下命令，我会看到我的本地存储库已配置为使用我的克隆来获取/拉取，正如预期的那样。

```
$ git remote show origin
* remote origin
  Fetch URL: https://github.com/domurtag/airbrake-grails.git
  Push  URL: https://github.com/domurtag/airbrake-grails.git 
```

我希望我的本地存储库改为从主存储库（我克隆的那个）获取并推送到我的克隆。我做的第一件事是将主仓库添加为远程：

```
$ git remote add cavneb https://github.com/cavneb/airbrake-grails.git 
```

如果我再次运行，`git remote show origin`我会看到相同的输出，所以显然我需要做其他事情来表明`cavneb`应该使用 repo 来获取，但我不确定这是什么。

如果它是相关的，我已经展示了我`.git/config`下面的内容：

```
[core]
    repositoryformatversion = 0
    filemode = true
    logallrefupdates = true
[remote "origin"]
    url = https://github.com/domurtag/airbrake-grails.git
    fetch = +refs/heads/*:refs/remotes/origin/*
[branch "master"]
    remote = origin
    merge = refs/heads/master
[remote "cavneb"]
    url = https://github.com/cavneb/airbrake-grails.git
    fetch = +refs/heads/*:refs/remotes/cavneb/* 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T13:39:12.603

# 直接回答

您正在寻找的命令是：

```
git remote set-url origin https://github.com/cavneb/airbrake-grails.git
git remote set-url origin --push https://github.com/domurtag/airbrake-grails.git 
```

# 然而

但我**强烈建议不**要这样做。

即使我不完全确定，对于上述行为，`git`会/可能会很困惑。

像上面那样完成后，`git`假设这是*同一个*repo。所以当你 push 时，下一次 fetch 的结果应该改变——它显然不会改变。

# 最佳实践

处理您的情况的**正确方法**`master`是将存储库添加为额外的遥控器。同样，作为另一个最佳实践，我将其称为 repo `upstream`。

当你想从那个额外的 repo( `upstream`) 中提取时：

```
git fetch upstream
git merge upstream/master 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-01T20:24:53.770

[Git 1.8.3](https://git-htmldocs.googlecode.com/git/RelNotes/1.8.3.txt)引入了有助于三角工作流的设置。

**`remote.pushdefault`**：将更改推送到的遥控器。可以通过设置在特定分支上覆盖`branch.<branch>.pushremote`。

无论使用哪种设置，`git push`（没有其他参数）都会推送到您首选的远程，而不是分支的上游远程。有关详细信息，请参阅[1.8.3-rc2 公告](http://git-blame.blogspot.com/2013/05/git-183-rc2.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-17T15:53:46.240

除非我弄错了，否则没有这样的`--pull`选择`git remote set-url`：[https ://git-scm.com/docs/git-remote#git-remote-emset-urlem](https://git-scm.com/docs/git-remote#git-remote-emset-urlem)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T13:44:48.880

尝试将 set-url 与 pull 和 push 一起使用：

```
git remote set-url --pull origin https://github.com/domurtag/airbrake-grails.git
git remote set-url --push origin https://github.com/cavneb/airbrake-grails.git 
```

# ios - 使用默认的 iOS 相机按钮作为 UIButton

> ID：15903135
> 
> 赞同：5
> 
> 时间：2013-04-09T13:22:06.787
> 
> 标签：ios, camera

我是iOS开发的新手，所以请善待。

我想将默认相机按钮用作 UIButton。（我希望相机按钮显示在我的表单中的字段上，并希望使用默认图形，因为用户熟悉它）我看不到任何将它作为简单 UIButton 插入的选项，我不想要它在工具栏中。

如果无法以这种方式包含它，我可以将它的图像用作 UIButton 吗？或者它会引起应用审查中的任何异议？

![在此处输入图像描述](https://i.stack.imgur.com/PYXUc.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:53:56.593

您可以使用[UIKit Artwork Extractor](https://github.com/0xced/UIKit-Artwork-Extractor)项目从模拟器获取内部 iOS 图像，但我不确定使用这些图像是否合法。

有一些例子：

![在此处输入图像描述](https://i.stack.imgur.com/0ivKt.png)

![在此处输入图像描述](https://i.stack.imgur.com/Zk3GS.png)

PS：您也可以根据需要获取第三方图标，例如从[http://www.glyphish.com/](http://www.glyphish.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-28T18:59:42.993

您可以使用`UIBarButtonSystemItemCamera`来自[`UIBarButtonItem`](https://developer.apple.com/library/ios/documentation/uikit/reference/UIBarButtonItem_Class/Reference/Reference.html). 这是一个`UIBarButtonItem`，不是一个`UIButton`，但它是真正的交易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T11:36:14.597

我最终使用了我们拥有的自定义图形，以避免任何法律问题或应用被拒绝的可能性。

# batch-file - 如果 Notepad.exe 正在运行，则 taskkill 如果未运行，则转到下一条语句

> ID：15903139
> 
> 赞同：9
> 
> 时间：2013-04-09T13:22:18.387
> 
> 标签：batch-file, batch-processing, taskkill

我需要帮助编写批处理代码。

在我的批处理脚本的初始状态中，我需要检查它是否`notepad.exe`正在运行，如果它正在运行，那么
`taskkill /im notepad.exe`elsif`notepad.exe`没有运行，然后转到下一个批处理语句/代码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T13:23:39.710

您可以简单地`taskkill /im notepad.exe`在所有情况下执行。如果它没有运行，那么`taskill`将没有什么可杀的，只会返回。

在那种情况下，`taskkill`会报错并设置错误级别。您可以通过重定向标准错误来禁止报告错误：

```
taskkill /im notepad.exe 2> nul 
```

至于错误级别，您可以忽略它，它将被您执行的下一个命令清除。或者，如果需要，您可以[自行清除](https://stackoverflow.com/questions/1113727/what-is-the-easiest-way-to-reset-errorlevel-to-zero)。

在我看来，这种方法比试图预测是否`taskkill`会成功要好。您将无法预测所有可能的故障模式，并且由于`taskkill`它本身执行您所询问的检查，我认为您不妨将该检查留给`taskkill`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-09T13:38:58.557

尝试`taskkill /fi "IMAGENAME eq notepad.exe"` 找不到 notepad.exe 只会抛出信息而不是错误。

# java - For循环改变背景颜色

> ID：15903140
> 
> 赞同：0
> 
> 时间：2013-04-09T13:22:20.460
> 
> 标签：java, for-loop, background-color

嗨，我正在为我的 Java 类创建一个 Battleship 程序。现在，我正在尝试制作一个射击类。要开火，我正在尝试将背景颜色从蓝色（这意味着它只是一个空单元格）更改为黄色（以表明我已经在该单元格中开火但那里什么都没有）。

这是 Fire 类的代码。如果您认为有必要，我可以包含它继承的其他类。我遇到的主要问题是试图让我的“for”循环通过并真正将背景从蓝色更改为黄色，以获得我想要的迭代次数。100 是用于测试目的的任意数字。

```
public class Fire extends Ship{

    public Fire() throws InterruptedException{
        super.setShipV();
    }
    public void Shoot() throws InterruptedException {

        Random random= new Random();

        int a = random.nextInt(100);
        int b = random.nextInt(100);

        for (int i = 0; i< 100; i++){
           //for(int j = 0; j< 50; i++){
           grid[a][b].setBackground(Color.yellow);
        }
    }
} 
```

谢谢你的帮助。

汉娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:25:58.047

访问网格时需要使用迭代器变量。

尝试这样的事情：

```
for (int i = 0; i< 100; i++){
   for(int j = 0; j< 50; i++){
      grid[i][j].setBackground(Color.yellow);
} 
```

或者，如果您想更改 100 个随机字段，请将其`random.nextInt`放入循环中`a`并`b`在每次迭代中更改（随机值可以达到与先前迭代相同的值）

```
for (int i = 0; i< 100; i++){
   int a = random.nextInt(100);
   int b = random.nextInt(100);
   grid[a][b].setBackground(Color.yellow);
} 
```

在每次迭代中执行的唯一代码是`{`(after `for(..)`) 和`}`. 这意味着在您的代码`a`中`b`设置一次，然后您将相同的网格字段标记为黄色一百次。如果你这样做，你会在每次迭代中给出一个新值`a`。`b`

# ios - UIViewAnimationOptionBeginFromCurrentState 如何与 -[UIScrollView zoomToRect:animated:] 配合使用？

> ID：15903141
> 
> 赞同：1
> 
> 时间：2013-04-09T13:22:21.650
> 
> 标签：ios, uiscrollview, uiviewanimation

我有`UIScrollView`哪个可以放大`UIView`. 有一次我想缩小到默认状态。

这是我的代码。

```
[UIView animateWithDuration:0.3
                 animations:^{
    [scroll zoomToRect:self.view.bounds animated:NO];
} completion:nil]; 
```

哇。它像地狱一样跳跃。似乎它设置`zoomScale = 1`然后动画帧。

我会添加一行。

```
[UIView animateWithDuration:0.3
                      delay:0 options:UIViewAnimationOptionBeginFromCurrentState
                 animations:^{
    [scroll zoomToRect:self.view.bounds animated:NO];
} completion:nil]; 
```

工作得很好。那么`UIViewAnimationOptionBeginFromCurrentState`在这种情况下有什么帮助呢？从帮助我知道

> 从与已经进行中的动画关联的当前设置开始动画。

但是没有飞行动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T05:59:32.447

我找到了答案，它看起来很方便，但工作正常。

在其他地方编写动画代码使用方法，如'performSelector：'

然后它识别正确的当前状态

# hangout - 如何从我的环聊 API 中删除添加朋友和开始环聊页面？

> ID：15903145
> 
> 赞同：0
> 
> 时间：2013-04-09T13:22:30.533
> 
> 标签：hangout

我在我的站点中使用环聊 api，因为某些组需要参与环聊，因为该组的第一个人来到该站点时正在从环聊 API 创建一个环聊 URL，而该组的其他人成员将直接获得他们不需要创建环聊的环聊的链接。这个想法有效，但有两个问题：

1.  当组中的第一个人创建环聊 URL 时，他会得到页面 START THE HANGOUT 页​​面，关闭它后，用户可以访问我的 API。
2.  用户将无法在环聊中添加成员拥有链接的人只能加入环聊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T17:35:43.583

请参阅有关类似内容的[讨论](https://groups.google.com/forum/#!topic/google-plus-developers/r_f7iweZ7c8)。它链接到一个可能是正确方向的 Youtube 视频。

我认为谷歌并没有让你的要求变得非常容易（还）。

# c++ - 从向量中获取选定的数据，然后存储为变量

> ID：15903149
> 
> 赞同：0
> 
> 时间：2013-04-09T13:22:38.517
> 
> 标签：c++, variables, vector, integer, double

我目前将所有数据作为变量存储到向量中。我试图从该向量中获取选定的数据，然后将其存储为变量，以便我可以进行计算，将答案保存为变量，然后存储回我的原始向量中？

数据文件格式如下；

```
 a     b       c        d      e
    1    7.3     0.8      14    74.6     
    2    6.5     0.1      13     3.3     
    3   10.8     1.4      12    75.8     
    4   13.2     3.5       6    32.4 
```

到目前为止，我的代码如下；

```
struct Weather
{
  int a_data;
  double b_data;
  double c_data;
  int d_data;
  double e_data;
  double ans_data;
};

int main () 
{
  using std::vector;
  using std::string;
  using std::getline;
  using std::cout;

  vector<Weather> data_weather;
  string line;
  ifstream myfile ("weatherdata.txt");

  if (myfile.is_open())
  {
    int count = 0;
    while (getline(myfile, line)) 
    {
      if (count > 6) 
      {
            int a, d; 
            double b, c, e;
            std::istringstream buffer(line); 
            std::string sun_as_string;
            if (buffer >> a >> b >> c >> d >>e_as_string) 
            {
                if (e_as_string == "---")
                {
                    e = 0.0;
                }
                else
                {
                    std::istringstream buffer2(e_as_string);
                    if (!(buffer2 >> e))
                    {
                        e = 0.0;
                    }
                }
                Weather objName = {a, b, c, d, e};
                data_weather.push_back(objName);  
            }
      }
      count++;
    }
    myfile.close();

    double temp_b, temp_c, temp_ans; //declaring my new variables
    for (auto it = data_weather.begin(); it != data_weather.end(); ++it)
    { 
        std::cout << it->b_data << " " << it->c_data << std::endl;

    }
 }

   }
   else 

   cout << "unable to open file";

   scat::pause("\nPress <ENTER> to end the program.");

   return 0;
} 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:35:44.773

遗漏了一些明显的东西，还是您只需要这样做？

```
for (auto it = data_weather.begin(); it != data_weather.end(); ++it)
{ 
    it->ans_data = it->b_data * it->c_data;
} 
```

取消引用迭代器可为您提供对向量内现有对象的引用。您实际上并不需要临时变量。

更好的 C++11 替代方案是基于范围的 for 循环：

```
for (Weather& w : data_weather)
{
    w.ans_data = w.b_data * w.c_data;
} 
```

给定您要使用的行索引列表，您可以执行以下操作：

```
Weather& w = data_weather[i]; // shortcut so you don't need to
                              // write data_waether[i] each time
w.ans_data = (w.b_data * w.c_data)/2; 
```

其中 i 是您感兴趣的行的索引。您可能希望将其设为某种循环。我把它留给你作为练习:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:46:55.953

我的结构会有所不同。我将编写用于读取数据的代码作为`operator>>`结构的代码`Weather`：

```
std::istream &operator>>(std::istream &is, Weather &w) { 
    std::string line;
    std::getline(is, line);
    std::istringstream buffer(line); 

    buffer >> w.a >> w.b >> w.c >> w.d;
    if (!buffer >> w.e) // conversion will fail for "---" or not-present
        w.e = 0.0;
    return is;
} 
```

这可以简化读取数据：

```
std::ifstream myfile("Weather.txt");

std::string ign;
std::getline(myfile, ign);   // skip that pesky first line

// Now we can initialize the vector directly from the data in the file:
std::vector<Weather> weather_data((std::istream_iterator<Weather>(myfile)),
                                  std::istream_iterator<Weather>()); 
```

使用相当新的编译器，打印数据也可以简化：

```
for (auto &w : weather_data)
    std::cout << w.b_data << " " << w.c_data << "\n"; 
```

如果您想进行计算，并将结果放回`ans`结构的字段中，那也相当容易。`b`例如，假设`c`和`d`是温度，我们想要`ans`包含三个的平均值：

```
for (auto &w : weather_data)
     w.ans = (w.b_data + w.c_data + w.d_data)/3.0; 
```

# asp.net-mvc - 使用动态消息进行流畅的验证

> ID：15903152
> 
> 赞同：6
> 
> 时间：2013-04-09T13:22:46.680
> 
> 标签：asp.net-mvc, asp.net-mvc-4, fluentvalidation, fluentvalidation-2.0

我正在尝试在流利的验证库中使用动态消息构建自定义验证。

例如 ：

```
public class CreateProcessValidator : AbstractValidator<CreateProcessVM>
{
    public CreateProcessValidator()
    {
        RuleFor(x => x.ProcessFile).Must((x,e) => IsProcessFileValid(x.ProcessFile))).WithMessage("Parse failed with error : {0}");        
    }

    public bool IsProcessFileValid(HttpPostedFileBase file)
    {
        var errorMessage = "..."  // pass result to validaton message ?
        // logic
        return false;
    }
} 
```

这里有任何解决方法如何通过验证结果吗？

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-09T14:22:59.777

你有没有尝试过这样的事情？

```
public class IsProcessFileValid : PropertyValidator
{
    public IsProcessFileValid(): base("{ValidationMessage}") {}

    protected override IsValid(PropertyValidatorContext context)
    {
        if (!IsProcessFileValid1(context))
            context.MessageFormatter.AppendArgument("ValidationMessage",
                "Custom validation message #1");

        if (!IsProcessFileValid2(context))
            context.MessageFormatter.AppendArgument("ValidationMessage",
                "Custom validation message #2");

        // ...etc

        return true;
    }

    private bool IsProcessFileValid1(PropertyValidatorContext context)
    {
        // logic
        return false;
    }

    private bool IsProcessFileValid2(PropertyValidatorContext context)
    {
        // logic
        return false;
    }

    // ...etc
} 
```

使用扩展方法：

```
public static class IsProcessFileValidExtensions
{
    public static IRuleBuilderOptions<T, object> MustBeValidProcessFile<T>
        (this IRuleBuilder<T, object> ruleBuilder)
    {
        return ruleBuilder.SetValidator(new IsProcessFileValid());
    }

} 
```

...然后在没有自定义的情况下使用它`WithMessage`：

```
public CreateProcessValidator()
{
    RuleFor(x => x.ProcessFile).MustBeValidProcessFile();        
} 
```

通过创建 custom `PropertyValidator`，您可以将默认验证消息封装在该类中并使其动态化。但是，在声明 . 时不得使用`.WithMessage`扩展名`RuleFor`，因为这会覆盖您直接在`PropertyValidator`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T13:31:33.683

没有办法做到这一点。我会将您当前拥有的复杂验证方法拆分为较小的方法（IsProcessFileValid1、IsProcessFileValid2、IsProcessFileValid3，...），以便您可以对错误消息进行更细粒度的控制。此外，每种方法将只负责验证一次，使它们更可重用（单一责任）：

```
RuleFor(x => x.ProcessFile)
    .Must(IsProcessFileValid1)
    .WithMessage("Message 1")
    .Must(IsProcessFileValid2)
    .WithMessage("Message 2")
    .Must(IsProcessFileValid3)
    .WithMessage("Message 3"); 
```

还要注意我是如何简化 lambda 的，因为该方法可以直接`Must`作为参数传递。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-17T20:42:51.667

这是我解决它的方法。使用 FluentValidation v8.5.0 测试

```
class EmptyValidationMessage : IStringSource
{
    public string ResourceName => null;

    public Type ResourceType => null;

    public string GetString(IValidationContext context)
    {
        return string.Empty;
    }

    public static readonly EmptyValidationMessage Instance = new EmptyValidationMessage();
}

public class MyPropValidator : PropertyValidator
{
    public MyPropValidator() : base(EmptyValidationMessage.Instance)
    {
    }

    protected override bool IsValid(PropertyValidatorContext context)
    {
        // if not valid

        Options.ErrorMessageSource = new StaticStringSource("my message");

        // you can do LanguageStringSource, LazyStringSource, LocalizedStringSource, etc

        // example with localized string (https://github.com/clearwaterstream/LocalizedString.FluentValidation)

        Options.ErrorMessageSource = new LocalizedStringSource("my message").InFrench("moi message");

        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-18T08:30:58.963

在尝试将异常消息插入`WithMessage()`. 它与`Func<T, string> messageProvider`作为参数的方法重载一起使用。

这是海报示例中提出的解决方案（工作代码，FluentValidation v 9.1）：

```
public class CreateProcessVM
{
    public object ProcessFile { get; set; }
}

public class CreateProcessValidator : AbstractValidator<CreateProcessVM>
{
    public CreateProcessValidator()
    {
        var message = "Something went wrong.";
        RuleFor(x => x.ProcessFile)
            .Must((x, e) => IsProcessFileValid(x.ProcessFile, out message))
            // .WithMessage(message); will NOT work
            .WithMessage(x => message); //Func<CreateProcessVM, string> as parameter
    }

    public bool IsProcessFileValid(object file, out string errorMessage)
    {
        errorMessage = string.Empty;
        try
        {
            Validate(file);
            return true;
        }
        catch (InvalidOperationException e)
        {
            errorMessage = e.Message;
            return false;
        }
    }

    private void Validate(object file)
    {
        throw new InvalidOperationException("File of type .custom is not allowed.");
    }
} 
```

还有一个测试表明我们确实在错误消息中得到了异常消息：

```
[Fact]
public void Test()
{
    var validator = new CreateProcessValidator();
    var result = validator.Validate(new CreateProcessVM());
    Assert.False(result.IsValid);
    Assert.Equal("File of type .custom is not allowed.", result.Errors[0].ErrorMessage);
} 
```

# java - 在 BasicGameState 中未调用渲染

> ID：15903158
> 
> 赞同：0
> 
> 时间：2013-04-09T13:23:01.337
> 
> 标签：java

我正在用java开始一个非常简单的游戏，但我已经卡在第一步了。我创建了一个 StateBasedGame 类 (Kreations)，它成功添加并进入并初始化了我的 BasicGameState (MenuGameState)。但是没有调用 MenuGameState 的 update() 和 render() 方法 - 我很难弄清楚原因。你能帮我吗？下面是代码：

基于状态的游戏：

```
import gamestates.MenuGameState;

import org.newdawn.slick.*;
import org.newdawn.slick.state.StateBasedGame;

public class Kreations extends StateBasedGame
{

  public Kreations() {
        super("Kreations");
    }

  @Override
  public void update(GameContainer gc, int delta) throws SlickException
  {

  }

  @Override
  public void render(GameContainer gc, Graphics g) throws SlickException
  {

  }

  public static void main(String[] args) throws SlickException
  {
      try { 
           AppGameContainer container = new AppGameContainer(new Kreations()); 

           container.setDisplayMode(800,600,false); 

         //Make sure the logic updates consistently
           container.setMinimumLogicUpdateInterval(20);
           container.setMaximumLogicUpdateInterval(20);

           container.start();
         } catch (SlickException e) { 
           e.printStackTrace(); 
         }
  }

    @Override
    public void initStatesList(GameContainer gc) throws SlickException {
        this.addState(new MenuGameState());
    }
} 
```

基本游戏状态：

```
package gamestates;

import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.SlickException;
import org.newdawn.slick.state.BasicGameState;
import org.newdawn.slick.state.StateBasedGame;

public class MenuGameState extends BasicGameState {

    public static final int ID = GameStates.MAIN_MENU.ordinal();

    @Override
    public void init(GameContainer gc, StateBasedGame sbg)
            throws SlickException {

    }

    @Override
    public void render(GameContainer gc, StateBasedGame sbg, Graphics g)
            throws SlickException {
        g.drawString("Hello World", 100, 100);
    }

    @Override
    public void update(GameContainer gc, StateBasedGame sbg, int delta)
            throws SlickException {

    }

    @Override
    final public int getID() {
        // TODO Auto-generated method stub
        return GameStates.MAIN_MENU.ordinal();
    }

    public void enter(GameContainer container, StateBasedGame game) throws SlickException {
          System.out.print("MenuGameState.enter() is called");
       }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T17:57:18.603

除非其他地方有代码应该调用这些方法，否则不会调用 MenuGameState 的 update() 和 render() 方法，因为没有对它们的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T18:01:45.137

我还没有找到`StateBasedGame`该类的javadoc，但我的猜测是当前状态是由StateBaseGame 的render() 方法渲染的。而且由于您覆盖了该方法以使其不执行任何操作，因此您的状态的 render() 方法永远不会被任何对象调用。尝试删除主类中的覆盖`render()`和`update()`方法。

[顺便说一句，在我在 github 上](https://github.com/ariejan/slick2d/blob/master/src/org/newdawn/slick/state/StateBasedGame.java)找到的源文件中，这两个方法是最终的，因此无法覆盖它们，这可能表明这些方法不应该被覆盖。

# java - 读取和拆分文本文件（java）

> ID：15903170
> 
> 赞同：-2
> 
> 时间：2013-04-09T13:23:22.950
> 
> 标签：java, parsing, file-io, split, readfile

我有一些带有时间信息的文本文件，例如：

```
46321882696937;46322241663603;358966666
46325844895266;46326074026933;229131667
46417974251902;46418206896898;232644996
46422760835237;46423223321897;462486660 
```

现在，我需要文件的第三列来计算平均值。

我怎样才能做到这一点？我需要获取每个文本行，然后获取最后一列？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T13:30:30.197

您可以使用 a`BufferedReader`或 a`Scanner`或其他一些技术逐行读取文件。使用 Scanner 非常简单，如下所示：

```
public void read(File file) throws IOException{
    Scanner scanner = new Scanner(file);

    while(scanner.hasNext()){
        System.out.println(scanner.nextLine());
    }
} 
```

要使用已定义的分隔符拆分字符串，您可以使用 split 方法，该方法接收正则表达式作为参数，并按与该表达式匹配的所有字符序列拆分字符串。在你的情况下，这很简单，只是`;`

```
String[] matches = myString.split(";"); 
```

如果您想获取数组的最后一项，您可以将其`length`用作参数。记住数组的最后一项总是在索引中`length - 1`

```
String lastItem = matches[matches.length - 1]; 
```

如果你把所有这些结合在一起，你会得到这样的东西：

```
public void read(File file) throws IOException{
    Scanner scanner = new Scanner(file);

    while(scanner.hasNext()){
        String[] tokens = scanner.nextLine().split(";");
        String last = tokens[tokens.length - 1];
        System.out.println(last);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:26:23.860

是的，您必须阅读文件的每一行并将其拆分为“；” 分隔符并读取第三个元素。

# c# - 在 C#- 从组合框中的选定项目中检索数据并填充到数据网格视图中

> ID：15903173
> 
> 赞同：1
> 
> 时间：2013-04-09T13:23:28.060
> 
> 标签：c#, winforms, datagridview, combobox

我想从组合框中检索数据并将其填充到数据网格视图中。我正在使用 Visual Studio C# Windows 窗体。我的应用程序使用 MySql 数据库检索列价格、用户和日期的数据。我尝试了这段代码，但它没有在数据网格视图中填充任何内容。起初我没有问题填充我的数据库，但是在我添加组合框以填充数据网格视图之后它不起作用。

这是代码：

```
public void loadDataGridView_Main()
{
    dgvMain.Rows.Clear();
    List<string>[] detailList = a.mysqlSelect(comboProd.SelectedItem + "Select * From sales");
    for (int i = 0; i < detailList.Length; i++)
    {
        dgvMain.Rows.Add(detailList[i][0], detailList[i][1], detailList[i][2], detailList[i][3]);
    }
} 
```

自动加载表单。

```
private void frmMain_Load(object sender, EventArgs e)
{
    a = new MyLibrary("localhost", "root", "", "cashieringdb");
    loadDataGridView_Main();
    dataLog();
    fillCombo();
} 
```

**comboProd 是我的变量名** `comboBox`

这是我的`fillCombo`方法我对此没有问题

```
public void fillCombo()
{
    string MyConString = "SERVER=localhost;" +
                             "DATABASE=cashieringdb;" +
                                 "UID=root;" +
                              "PASSWORD='';";
    MySqlConnection connection = new MySqlConnection(MyConString);
    string command = "select productAdd from settings";
    MySqlDataAdapter da = new MySqlDataAdapter(command, connection);
    DataTable dt = new DataTable();
    da.Fill(dt);

    comboProd.DataSource = dt;
    comboProd.DisplayMember = "productAdd";
    connection.Close();
} 
```

此功能仅用于添加产品并在 中检索`ComboBox`，例如，如果我添加 Apple 产品，它将保存到数据库中，然后`ComboBox`将检索要添加到列表中的产品 apple。

**编辑**

所以这是我的程序流程。

在我的数据网格视图中，我的数据中有 1`ComboBox`列和 3 列作为字段`GridView`。在`ComboBox`它将填充我在数据库端选择的项目中，它将检索数据库中的任何值。这就是我这样编码的原因。

```
List<string>[] detailList = a.mysqlSelect(comboProd.SelectedItem + "Select * 
```

但我不确定这一行。我很怀疑。我认为错误就在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:31:57.217

使用 DataGridViewComboBoxColumn 类。根据需要设置 DataSource 并分配 ValueMember 和 DisplayMember 列。将 obj 添加到 datagridview

```
DataGridViewComboBoxColumn dgc = new DataGridViewComboBoxColumn();
dgc.DataSource = ds;
dgc.ValueMember = "columnname1";
dgc.DisplayMember = "columnname2"

dataGridView1.Columns.Add(dgc); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:40:29.217

```
private void frmMain_Load(object sender, EventArgs e)
{
    a = new MyLibrary("localhost", "root", "", "cashieringdb");
    fillCombo();   //fill combo before calling loadDataGridView_Main()
    loadDataGridView_Main();
    dataLog();    
} 
```

刚换了一个说法。现在检查一下。

# android - 用于更长进程的 AsyncTask

> ID：15903180
> 
> 赞同：1
> 
> 时间：2013-04-09T13:23:40.387
> 
> 标签：android, android-asynctask

我知道**AsyncTask**不适合长过程。**他们的主要目标是减轻 UI 线程**的负担并在**后台**做一些事情。稍后完成更新相应的**UI 线程**。

我知道内存泄漏，即在**doInBackground**完成后需要更新 UI 并且活动可能被破坏时。

我的问题是我可以像简单的**线程一样使用****AsyncTask**吗？

**如果启动它的 Activity 或 Application 死亡，**AsyncTask**会发生什么？**

 ****要求**

我不需要更新任何 UI。

我不希望我的任务与 Activity（它启动它）相关联。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:51:12.717

**第一个问题：**

是的，你可以。这完全取决于你的逻辑。

**第二个问题：**

尽管应用程序被用户或系统杀死，但线程将在后台运行。

要解决第二种情况，请使用以下技术

只需确保您`AsyncTask`在应用程序或活动关闭之前完成

**`AsyncTask yourAsyncTask`**

```
 @Override
    public void onDestroy(){
        //you may call the cancel() method but if it is not handled in doInBackground() method
        if(yourAsyncTask!=null)
        if (yourAsyncTask != null && yourAsyncTask.getStatus() != AsyncTask.Status.FINISHED)
            yourAsyncTask.cancel(true);
        super.onDestroy();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T13:40:52.760

如果您只需要“doInBackground”，只需使用普通线程。

```
new Thread("threadName", new Runnable(){ @Override run(){ } }).start(); 
```

使用 AsyncTask 的全部原因是拥有 preExecute 和 postExecute 的功能，因此您不需要弄乱处理程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T13:29:08.687

即使应用程序被杀死或崩溃，它仍然在后台启动。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T15:15:55.323

首先，一般注意事项，如[Android Docs](http://developer.android.com/reference/android/os/AsyncTask.html)所述：

`AsyncTasks should ideally be used for short operations (a few seconds at the most). If you need to keep threads running for long periods of time, it is highly recommended you use the various APIs provided by the java.util.concurrent pacakge such as Executor, ThreadPoolExecutor and FutureTask.`

要回答您的问题：

1.  是的 - 您可以像使用后台线程一样使用 Async 任务 - Async 任务只是一个包装器，`Thread`它`Handler`允许线程与 UI 线程无缝通信。**警告！**如果您计划更新 UI 线程，或者在引用 UI 线程的回调（即 onProgressUpdated 和/或 onPostExecute）中引用活动或片段，则应明确检查活动或片段是否仍处于可以被引用和使用。例如 - 这是从片段启动 AsyncTask 时正确和错误的方法：

使用 Activity 的 ref 创建任务，以便在完成后执行某些操作：

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
    Fragment mFragment;

    public DownloadFilesTask(Fragment fragment){
        mFragment = fragment;
    } 
```

错误的：

```
 protected void onPostExecute(Long result) {
        // if the fragment has been detached, this will crash
        mFragment.getView().findView...
    } 
```

对：

```
 protected void onPostExecute(Long result) {
        if (mFragment !=null && mFragment.isResumed())
            ... do something on the UI thread ...
    }
} 
```

1.  如果在执行 AsyncTask 时 Activity 死亡，它将继续运行。使用上面列出的技术，您可以通过检查启动任务的上下文的生命周期来避免崩溃。

2.  最后，如果您有一个根本不需要 UI 线程的非常长时间运行的操作，您应该考虑使用[Service](http://developer.android.com/reference/android/app/Service.html)。这是一个简介：

`A Service is an application component representing either an application's desire to perform a longer-running operation while not interacting with the user or to supply functionality for other applications to use`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T13:32:25.790

> 我的问题是我可以像简单的线程一样使用 AsyncTask 吗？

是`AsyncTask`的，是android后台线程，任务会在后台完成。 `AsyncTask`自动为您创建一个新线程，因此您在 doInBackground() 中所做的一切都在另一个`thread`.

> 如果启动它的 Activity 或 Application 死亡，AsyncTask 会发生什么？

`AsyncTask`相关的，`application` 如果`application`销毁或完成，那么所有相关`AsyncTask` 的都`application` 将被终止。**

# c++ - Qt5 在多宿主网络上绑定 TCP 套接字

> ID：15903185
> 
> 赞同：1
> 
> 时间：2013-04-09T13:23:48.790
> 
> 标签：c++, qt, tcp, qt5, multihomed

我在使用 Qt5 中 QTcpSocket 类的新绑定功能时遇到了麻烦。任何解决此问题的帮助将不胜感激。

我有一个多宿主服务器，其中包含两个 NIC，每个 NIC 都有一个单独的 IP 地址。我已经在服务器上设置了路由，以便从源地址发送来自适当的 NIC，而不管目标远程地址如何。也就是说，无论数据发送给谁，从 xxx0 发送都通过 eth0 而 xxx1 通过 eth1 发送。这些 NIC 通过以太网连接到远程 Wifi 链路，然后连接到交换机。这些 wifi 链接充当透明网桥，可以看作是两条以太网电缆（但它们的带宽有限）。然后将交换机连接到计算机。目标是在服务器和计算机之间传输数据，并并行使用两个 wifi 链接来增加带宽。虽然服务器物理上是服务器，该软件将计算机作为软件服务器运行（当其他人连接到它时）。也就是说，物理服务器（软件客户端）打开 TCP 套接字并尝试连接到侦听计算机（软件服务器）。

我使用 Qt5 的绑定功能将一个 TCP 套接字绑定到 eth0 IP 地址，并将另一个 TCP 套接字绑定到 eth1 IP 地址。我已经验证这适用于其他程序，如 PING 或通过 SCP 传输文件。见[http://qt-project.org/doc/qt-5.0/qtnetwork/qabstractsocket.html#bind](http://qt-project.org/doc/qt-5.0/qtnetwork/qabstractsocket.html#bind)

当我调用 bind 时，调用成功并且对本地 IP 地址的后续请求返回正确的值。例如socket->bind(ip) 返回true，然后socket->localAddress() 等于ip。但是，当我调用 connectToHost 时，localAddress 在开始连接尝试时会丢失，并且在连接后它有一个不同的 localAddress，这不是我想要的。

任何人都可以阐明正在发生的事情吗？我试图避免重写软件来颠倒软件客户端/服务器的角色，因为这些程序非常大。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T02:23:06.763

在 Qt 项目错误跟踪器中有一个[未解决的错误。](https://bugreports.qt-project.org/browse/QTBUG-29732?page=com.atlassian.streams.streams-jira-plugin%3aactivity-stream-issue-tab)

# c# - 实体框架的集成测试以确保关联正确

> ID：15903186
> 
> 赞同：1
> 
> 时间：2013-04-09T13:23:57.430
> 
> 标签：c#, .net, entity-framework, unit-testing, integration-testing

我想这更像是一个集成测试，但是有没有人有一个关于如何测试以确保实体框架 (4) 模型中的关联按预期工作的好教程的链接？

我的想法是为此使用 sqllite 之类的东西，因为我想确保我可以保存一个实体，并添加一个子实体并保持它等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:37:11.623

如果您首先使用代码，则可以使用模拟框架来测试您的实现。

至于您可以在那里使用的 IDbSet 实例，以下内容很有用：

```
public class InMemoryDbSet<T> : IDbSet<T> where T : class
{      
    private readonly HashSet<T> _data;
    private readonly IQueryable _query;

    public Type ElementType
    {
        get
        {
            return this._query.ElementType;
        }
    }

    public Expression Expression
    {
        get
        {
            return this._query.Expression;
        }
    }

    public IQueryProvider Provider
    {
        get
        {
            return this._query.Provider;
        }
    }

    public InMemoryDbSet()
    {
        this._data = new HashSet<T>();
        this._query = _data.AsQueryable();
    }

    public T Add(T entity)
    {
        this._data.Add(entity);
        return entity;
    }

    public T Attach(T entity)
    {
        this._data.Add(entity);
        return entity;
    }

    public TDerivedEntity Create<TDerivedEntity>() where TDerivedEntity : class, T
    {
        throw new NotImplementedException();
    }

    public T Create()
    {
        return Activator.CreateInstance<T>();
    }

    public virtual T Find(params Object[] keyValues)
    {
        throw new NotImplementedException("Derive from FakeDbSet and override Find");
    }

    public System.Collections.ObjectModel.ObservableCollection<T> Local
    {
        get
        {
            return new System.Collections.ObjectModel.ObservableCollection<T>(_data);
        }
    }

    public T Remove(T entity)
    {
        this._data.Remove(entity);
        return entity;
    }

    public IEnumerator<T> GetEnumerator()
    {
        return this._data.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return this._data.GetEnumerator();
    }

} 
```

使用这种方法应该可以让您完全在内存中运行测试，而无需访问数据库，但是，正如我所说，仅在代码中优先，因为据我所知，IDbContext 仅用于那里。

# jpeg - 在不增加文件大小的情况下扩展 jpeg 文件的“像素”大小？

> ID：15903188
> 
> 赞同：1
> 
> 时间：2013-04-09T13:24:01.723
> 
> 标签：jpeg, expansion

我正在策划一个网站（joomla，碰巧），我注意到上传的每个（jpeg）图像文件都存储在一系列“大小”中，其中最大的是原始大小的 25 倍。(9k -> 240k) - 我假设只是为了支持显示到更大的“视口”。是否有任何实用的方法，无论是使用 jpeg 转换、其他常见的 Web 图像格式还是任何其他古怪的想法，来构建具有更大像素尺寸但保持与原始文件大小大致相同的图像文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:35:50.340

为什么不简单地使用 CSS/HTML 调整图像大小？如果您只是简单地调整它们的大小而没有任何质量改进，那么您会通过发送更大的图像来浪费带宽。

如果您希望从单个大图像生成较低分辨率的缩略图，请使用[JPEGMini](http://www.jpegmini.com/)。或者，Photoshop 具有出色的“为网络和设备保存”功能，可显着减小具有可自定义损失的图像大小。

# python - 我可以让 Python 在没有用户输入的情况下使用经过身份验证的代理吗？

> ID：15903189
> 
> 赞同：0
> 
> 时间：2013-04-09T13:24:02.070
> 
> 标签：python, proxy

我知道我可以使用用户/密码在代理中手动编码，但是是否可以让 Python 仅从 IE 中提取代理设置和身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:43:57.933

对于简单的身份验证（基本、摘要），是的。只需确保您系统的代理设置（例如，在 IE 中）采用以下格式：

`joe:password@proxy.example.com:3128`

如果您的代理正在使用其他更复杂的身份验证形式（例如，ntlm、kerberos），那么这并不容易。

# javascript - 给定文件扩展名，如何为 Ace Editor 自动选择“模式”

> ID：15903191
> 
> 赞同：19
> 
> 时间：2013-04-09T13:24:09.290
> 
> 标签：javascript, syntax-highlighting, ace-editor

我正在开发一个使用 java/scala 后端（确切地说是[Lift](http://liftweb.net/)，虽然这不应该影响这个问题）的项目，并且作为前端的一部分，我们使用[Ace Editor](http://ace.ajax.org/)。我已经在谷歌上搜索了一段时间，但还没有找到这个问题的答案：

给定一个文件扩展名（例如`js`, `c`, `cpp`, `h`, `java`,`rb`等），我怎样才能自动选择适当语言的 Ace“模式”？

我希望避免手动创建地图 la `js -> javascript, c -> c_cpp, java -> java`。是否有可用的 java/scala 库？或者更好的是，Ace 是否以某种方式内置了此功能？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-09T21:50:31.307

Ace 现在提供了模型扩展来做到这一点。

```
var modelist = ace.require("ace/ext/modelist")
var filePath = "blahblah/weee/some.js"
var mode = modelist.getModeForPath(filePath).mode
editor.session.setMode(mode) // mode now contains "ace/mode/javascript". 
```

请注意，如果您使用的是 ace 的[预构建](https://github.com/ajaxorg/ace-builds)版本，则需要在页面中包含`ace.js`和`ext-modelist.js`文件。
使用源版本，您需要替换`ace.require`为，`require`并且 require.js 将自动加载所有依赖项。

有关如何操作的示例，请参见[https://github.com/ajaxorg/ace/blob/master/demo/modelist.html](https://github.com/ajaxorg/ace/blob/master/demo/modelist.html)和[https://github.com/ajaxorg/ace-builds/blob/master/demo/modelist.html](https://github.com/ajaxorg/ace-builds/blob/master/demo/modelist.html)使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-15T11:16:04.750

这是我解决它的方法。这是我在 Django 项目中使用的更新版本。

```
 <script src="{% static 'ace/src-noconflict/ace.js' %}" type="text/javascript" charset="utf-8"></script>
<script src="{% static 'ace/src-noconflict/ext-modelist.js' %}"></script>
<script src="{% static 'ace/src-noconflict/ext-language_tools.js' %}"></script> 
```

```
<script>
    var modelist = ace.require("ace/ext/modelist");
    var editor = ace.edit("editor");
    editor.renderer.setScrollMargin(40, 150)
    document.getElementById('editor').style.fontSize = '15px';
    editor.setTheme("ace/theme/dracula");

    var full_path = "{{ file.directory_path }}";
    document.getElementById("demo").innerHTML = full_path
    var mode = modelist.getModeForPath(full_path);//mode
    console.log(mode);
    editor.session.setMode(mode.mode);
    //Ace editor autocompletion
    editor.setOptions({
        enableBasicAutocompletion: true,
        enableSnippets: true,
        enableLiveAutocompletion: true
    });

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-03T23:31:22.863

**关键是 editor.session.setMode(mode.mode);**

```
<!-- ace editor -->
<script src="/ace/v1_4_11/ace.js"></script>
<script src="/ace/v1_4_11/ext-modelist.js"></script>
<script src="/ace/v1_4_11/ext-language_tools.js"></script>

let editor = null;      // reference to the Ace editor
let aceModeList = null; // used by the Ace editor

function initializeAceEditor() {
    aceModeList = ace.require("ace/ext/modelist");
    editor = ace.edit("aceEditorDiv");
}

// load the file and set the file-extension specific mode
let mode = aceModeList.getModeForPath(fileName); // detects for example .xml - or any other file extebsion
console.log(`Ace: selected mode = ${mode.mode}`);
try {
    editor.session.setMode(mode.mode);
} catch (e) {
    console.log("Ace: No specific mode available for file extension");
}

editor.getSession().setValue(Base64.decode(fileContentB64)); 
```

无需在浏览器中预加载特定模式 *.js 文件，例如“mode-xml.js”。相应的模式文件会按需自动加载。

# javascript - 是否可以从服务器端更改浏览器地址栏？

> ID：15903192
> 
> 赞同：0
> 
> 时间：2013-04-09T13:24:10.087
> 
> 标签：javascript, html, node.js

想象一下，我有一个公共显示器，显示一个显示网页的浏览器。

是否可以将 GET 或 POST 从移动设备发送到 HTTP 服务器，触发一些 AJAX/pubsub/websocket JavaScript 函数来更改当前正在显示器上查看的页面，甚至只是更改 iframe 的当前域？

跨域推送状态？即使在您自己的设置中，这也可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:29:06.577

您可以在客户端使用 JavaScript 执行此操作。这个问题很好地涵盖了这一点：[Updating address bar with new URL without hash or reloading the page](https://stackoverflow.com/questions/3338642/updating-address-bar-with-new-url-without-hash-or-reloading-the-page)

不幸的是，这是一个相对较新的功能，而且大多不受支持。您的替代方法是设置主题标签并将其用于导航。

更新：

如果您尝试像电视频道一样向用户“推送”页面，那么您可以让 AJAX 请求每隔几秒轮询一次服务器以查看是否有新页面。服务器将使用新 URL 进行响应。然后，您可以将该页面放入 iFrame 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T13:30:09.830

假设您控制在公共显示器上显示的网页，是的。

网页需要通过 AJAX 定期联系服务器，或者与服务器建立长期连接（即[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)或[WebSockets](http://en.wikipedia.org/wiki/WebSocket)）。

当服务器收到来自移动设备的请求时，它要么使用 Comet 连接将新 URL 发送到网页，要么当网页下次通过 AJAX 联系它时，它发送新 URL 作为响应。

然后网页将其自己的`window.location`属性设置为这个新的 URL。

请注意，一旦完成此操作，您将无法再将有问题的浏览器发送到另一个新页面，除非您刚刚将其发送到的页面还包含与您的服务器联系的 JavaScript。

### 但是，如果您不控制正在显示的网页...

然后你需要一个浏览器扩展来启动浏览器和你的服务器之间的连接。

# php - PHP：切换与如果

> ID：15903193
> 
> 赞同：4
> 
> 时间：2013-04-09T13:24:11.037
> 
> 标签：php, if-statement, switch-statement

哪种形式更高效

这个：

```
switch($var) {
  case 1:

    break;
  case 2:

    break;
} 
```

..或这个：

```
if( $var === 1 ) {

} elseif( $var === 2 ) {

} 
```

在性能方面？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-09T13:27:40.460

性能方面完全无关紧要。

正如[PHPBench](http://www.phpbench.com/)所示，即使有 1,000 次操作，两者之间的差异也只有 188 微秒，即*百万分之 188 秒*。PHP 代码通常有更大的瓶颈：单个数据库调用通常需要数十毫秒，即数万倍。

使用您喜欢的任何一个，并且哪个对您的代码的可读性更好 - 对于许多检查，很可能是`switch`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T13:27:33.977

这种微尺度的性能根本无关紧要。使用更适合您的上下文的那个。可读性和可维护性远比性能重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T13:27:10.213

它不是关于性能，它更多关于需求！

有时你希望在你的 if 条件下发生一些事情，否则，它会去 else。

如果您有很多要比较的值，可以使用 Switch

# scala - 在我的 Play2 scala 应用程序中找不到 Java 库依赖项

> ID：15903195
> 
> 赞同：0
> 
> 时间：2013-04-09T13:24:16.907
> 
> 标签：scala, playframework, playframework-2.1, apache-commons-net

我有一个 play2 scala 应用程序，我需要在其中进行一些 ftp 操作。由于我以前曾与我合作过，`org.apache.commons.net`我想为什么不重用一些知识并在我的 play2 scala 应用程序中实现它。

我添加了依赖项：

```
val appDependencies = Seq(
    "org.reactivemongo" %% "play2-reactivemongo" % "0.8",
    "commons-net" % "commons-net" % "3.2"
  ) 
```

检查依赖关系`play dependencise`：

```
+--------------------------------------------------------+--------------------------------------------------------+-----------------------------------------+
| Module                                                 | Required by                                            | Note                                    |
+--------------------------------------------------------+--------------------------------------------------------+-----------------------------------------+
| commons-net:commons-net:3.2                            | importer:importer_2.10:1.0-SNAPSHOT                    | As commons-net-3.2.jar                  | 
```

看起来不错。`play clean compile`用然后更新了我的项目，`play idea`但它仍然找不到库。做的时候`import org.apache.commons.net.ftp.FTPClient;`，`.net`没有找到。我想我忘记了什么。但是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:39:16.500

嗯，这很奇怪。如问题中所述，我确实`play idea`重新生成了我的项目，但这没有用。所以我删除了所有的想法文件，并像魅力一样做`play idea`和中提琴！`import org.apache.commons.net.ftp.FTPClient`

# java - OAuth Java 中的经过身份验证的请求

> ID：15903199
> 
> 赞同：5
> 
> 时间：2013-04-09T13:24:20.283
> 
> 标签：java, authentication, oauth, request

如果有人在使用[http://oauth.googlecode.com/svn/code/java/core/](http://oauth.googlecode.com/svn/code/java/core/)和此代码中的示例服务器方面有经验，也许您可​​以向我解释一下 Authenticated Requests 处理是如何实现的？参考：[https ://www.rfc-editor.org/rfc/rfc5849#section-3](https://www.rfc-editor.org/rfc/rfc5849#section-3)

因此，当用户通过身份验证并且受保护的资源服务器只想针对 OAuth 提供者确认真实性时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T12:42:44.270

从 Google API 控制台创建一个新项目并获取客户端 ID 和密钥。[https://code.google.com/apis/console](https://code.google.com/apis/console)

按照此示例[https://code.google.com/p/google-api-java-client/wiki/OAuth2Draft10](https://code.google.com/p/google-api-java-client/wiki/OAuth2Draft10)作为为 Google 开发 OAUTH 客户端插件的帮助。

确保您已根据需要更改范围、回调 URL 和缩短 URL 等。

```
private static final String SCOPE = "https://www.googleapis.com/auth/urlshortener";
private static final String CALLBACK_URL = "urn:ietf:wg:oauth:2.0:oob";
...

GenericUrl shortenEndpoint = new GenericUrl("https://www.googleapis.com/urlshortener/v1/url"); 
```

此页面将帮助您了解身份验证和授权流程[https://developers.google.com/accounts/docs/OAuth2](https://developers.google.com/accounts/docs/OAuth2)

**对 Google OAUTH 有用的东西**

```
OAuth 2.0 Playground 
```

很棒的游乐场。这将使您的应用程序进行 OAuth 并获得您想要的信息。换句话说，您可以看到您的应用程序将如何为 OAUTH 运行，以及为 Google 编写 OAUTH 代码需要哪些信息。[https://developers.google.com/oauthplayground/](https://developers.google.com/oauthplayground/)

```
Verify Access Token 
```

从此 URL 验证您的访问令牌[https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=](https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=) ***** ****

# backbone.js - 在 Asp.Net MVC 中混合静态 html 和骨干数据的最佳方法？

> ID：15903201
> 
> 赞同：1
> 
> 时间：2013-04-09T13:24:26.080
> 
> 标签：backbone.js

目前我被迫使用字符转义将我的静态 html 与我的模型数据混合，但必须有更好的方法。

我目前正在使用 .aspx 视图，这就是我的某些视图看起来多么丑陋。

```
$('ul#spaceImage', this.el).append("<li id=\"" + item.get("HoverId") + "\" class=\"hover\" style=\"left:" + x + "px;top:" + y + "px\"><span class=\"newlyAdded\"></span>" + item.get("MaterialGroupName") + "<a></a></li>"); 
```

有没有办法在没有字符转义的情况下显示这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:32:40.747

我猜您在使用下划线模板时遇到问题，因为它们共享 asp.net 语法？如果是这样，您可以使用[Handlebars](http://handlebarsjs.com/)并将您的模板代码移动到您的 asp 标记中的脚本块中。

标记：

```
<script type="text/html" id="list-item-template">
  <li id="{{HoverId}}" class="{{hover}}" style="left:<%=x%>px;top:<%=y%>px">
    <span class="newlyAdded"></span>
    <a><{{MaterialGroupName}}></a>
  </li>
</script> 
```

骨干视图：

```
render: function() {
  var template = Handlebars.compile($("#list-item-template").html());
  $(this.el).html(template({this.model.toJSON()}));
  return this;
} 
```

# sql - 来自 ntext 列的 SELECT 值被截断

> ID：15903210
> 
> 赞同：0
> 
> 时间：2013-04-09T13:24:57.997
> 
> 标签：sql, sql-server-2008

我有一个包含 ntext 数据类型列的表。

我编写查询以搜索一些示例，例如：

```
SELECT 
    Id,
    NtextColumnName
FROM Table
WHERE 
    NtextColumnName LIKE N'%search_term%' 
```

并得到一定数量的行。但是，当查看此列以找到`search_term`它时，我没有看到它，似乎结果被截断了。

我还尝试在文本中显示结果并应用查找，但没有结果。

如何检查`NtextColumnName`列中是否存在某些搜索词，并使该结果可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:39:25.300

根据列数据的长度，如果您只是想在 Management Studio 中查看数据，请将列转换为 XML 数据类型：

```
declare @t1 table(c1 ntext)
insert into @t1 values(space(5000) + 'a' + space(5000))
select cast(c1 as xml) from @t1 
```

该示例将为您提供一个列，您可以单击该列以在新窗口中查看整个数据集。

返回最大数据量的设置：

*   工具 | 选项 | 查询结果 | SQL 服务器 | 结果转文本 | 每列显示的最大字符数
*   工具 | 选项 | 查询结果 | SQL 服务器 | 结果到网格 | 检索到的最大字符数

编辑：要获得完整值，对于更大的数据大小，[此答案](https://stackoverflow.com/a/2760023/55487)指向将其包装在 CDATA 列中的正确方法：

```
declare @t1 table(c1 ntext)
insert into @t1 values(space(10000) + 'a' + space(10000))
select 
  convert(xml,'<xml><![CDATA[' + cast(c1 as varchar(max)) + ']]></xml>') 
from 
  @t1 
```

# sql-server-2008 - SQL Server：关于改进磁盘空间

> ID：15903212
> 
> 赞同：0
> 
> 时间：2013-04-09T13:25:06.380
> 
> 标签：sql-server-2008, truncate, diskspace, sql-delete, sql-drop

我试图找出这个问题的答案，但我还没有找到明确和/或准确的答案。

在 MS SQL（本例中为 2008 年）中，是否有以下命令：删除、截断或删除（表），“自动”释放用于数据占用的磁盘空间量？

我有我的想法，但基于一堆评论......没有什么真正直截了当的。

我读过一些关于收缩（商品和坏品）的评论，所以我的意图是避免使用这个命令，这就是我问的原因。

预先感谢，请原谅我使用英语......（我给出的主要用途是编程和 SQL！）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:32:26.487

这些命令都没有释放磁盘空间。文件组中的文件在所有三种情况下都保持不变。对 HoBT（堆或 B 树）的分配在截断或丢弃时被清除。删除只是擦除表页面中的行，但页面仍然分配给 HoBT。除非您缩小数据文件，否则数据文件将保持相同大小，这通常不是一个好主意。

# latex - 在列表环境（knitr）中将块显示为文本

> ID：15903218
> 
> 赞同：2
> 
> 时间：2013-04-09T13:25:22.437
> 
> 标签：latex, knitr, listings

我想让块本身在列表环境中显示为文本。如果我在下面的列表中输入块，它将被评估。

```
\documentclass{article}
\usepackage{listings}

\begin{document}

\begin{lstlisting}
<<>>=
1+1
@
\end{lstlisting}

\end{document} 
```

有没有办法不包括评论`<<>>=`和`@`退出`%`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:48:58.433

合并文字代码块是[`knitr`常见问题 8](https://github.com/yihui/knitr/blob/master/FAQ.md)。对于这种情况，使用

```
\documentclass{article}
\begin{document}
<<setup, include=FALSE>>=
render_listings()
@

\begin{lstlisting}
\Sexpr{''}<<>>=
1+1
@
\end{lstlisting}

\end{document} 
```

# iphone - iPhone缩放不会放大菜单按钮中的文本

> ID：15903220
> 
> 赞同：0
> 
> 时间：2013-04-09T13:25:28.470
> 
> 标签：iphone, html, css, zooming

当我在 iPhone 上查看我的页面时，我看到该页面处于缩小模式。这很好，所有尺寸都适合盒子等。

**但不是文字。**与此缩放视图上的其他大小相比，文本大小更大。

这对于页面上的文本内容是可以的。然后在手机上阅读文字就更容易了，内容文字不是固定的而是浮动的，适合容器。

但是页面主菜单中按钮上的文本也没有按相同的百分比缩小。这里有一个问题 - 主菜单栏突然变宽，因为其他所有内容都缩小了更多。

我的菜单宽度不固定，但适合文本宽度。因此，当文本宽度突然比平时大时，菜单栏也比平时宽。

我无法提供屏幕截图，但我希望这是一个已知问题。作为一个例子，看看这个模拟器（它似乎在 iPhone 上显示问题）： [http ://transmog.net/iphone-simulator/mobile-web-browser-emulator.php?u=http://w3schools.com #](http://transmog.net/iphone-simulator/mobile-web-browser-emulator.php?u=http://w3schools.com#)

并比较正常的网站：[http ://w3schools.com/](http://w3schools.com/)

这个网站也有这个问题，例如页面右侧的菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:28:32.847

马贝`text-size-adjust`可以帮助你。

```
.css {
    -webkit-text-size-adjust: none;
    -moz-text-size-adjust:    none;
    -ms-text-size-adjust:     none;
    text-size-adjust:         none;
} 
```

这将允许您的文本小于手机浏览器允许的默认值。

注意：在真机上测试它，因为“在基于 Webkit 的桌面浏览器中存在一个错误。如果 -webkit-text-size-adjust 明确设置为无，基于 Webkit 的桌面浏览器，如 Chrome 或 Safari，而不是忽略属性，将阻止用户放大或缩小网页”

[https://developer.mozilla.org/en-US/docs/CSS/text-size-adjust](https://developer.mozilla.org/en-US/docs/CSS/text-size-adjust)

# ffmpeg - 使用 ffmpeg 加入多个 flv

> ID：15903230
> 
> 赞同：0
> 
> 时间：2013-04-09T13:26:05.673
> 
> 标签：ffmpeg, centos, red5

我正在尝试使用 ffmpeg-1.1 中的 -concat 选项加入两个 flv 文件。我创建了一个名为 mylist.txt 的列表，并将两个 flv 文件放入其中，但我面临的问题是 mylist.txt 中第一个文件的输出流完美，但当涉及到第二个文件时，视频会中断。看起来我在 -concat 中使用了错误的选项，请指导我使用 -concat 选项找到合适的命令。以下是我用于转码 .flv 文件的命令和配置：-

我的列表.txt

文件'/root/1.flv' 文件'/root/2.​​flv'

ffmpeg 命令：-

ffmpeg -re -f concat -i /root/mylist.txt -acodec 复制 -vcodec 复制 output.flv

以下链接是 ffmpeg 命令的输出：- [http://pastebin.com/P3uaUDEd](http://pastebin.com/P3uaUDEd)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:11:28.903

除非这两个文件的编码相同（即使它们仍然可能是一个问题），您需要对音频和视频进行转码，以便时间戳、比特率、分辨率和其他编解码器内部的内容在两个流中都是正确的。更改您`acodec copy`并`vcodec copy`使用您选择的编解码器（x264 和 mp3/aac 是不错的选择）。

# c - 动态扩展数组 C

> ID：15903233
> 
> 赞同：2
> 
> 时间：2013-04-09T13:26:16.660
> 
> 标签：c, malloc, realloc

我有一个程序可以计算文本文件中出现的单词并将它们存储在数组中。到目前为止，我使用的是固定数组，一切正常，但现在我想将其更改为动态数组，这样就不会浪费/需要任何内存。我知道必须使用 malloc 和 realloc 来完成此操作，但我真的不明白如何去做。

我的第一个想法是简单地计算文本文件中的单词，然后为所有这些单词分配足够的空间，但这会浪费空间，因为重复的单词会增加一个计数器，但不会再次添加到数组中。

这种方法听起来是否有意义并且是实现它的最佳方法？如果我首先 malloc 一个小数组，就足以找到一个单词及其计数器。然后，每次我找到一个需要添加到数组中的新单词时，只需 realloc 足以容纳另一个单词和计数器。如果它是重复的，则不需要 realloc，因为现有计数器只会增加。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T13:28:25.730

通常最好不要以 100% 的内存利用率为目标（就交易速度与内存使用而言）；特别是如果你的程序只运行有限的时间，使用比需要更多的内存确实不会“花费”很多，总的来说。

一种典型的方法是使动态数组具有初始大小，例如 8 或 128 或其他大小，然后在填满时将其加倍。

与在填满时将大小增加 1 相比，这减少了重新分配的次数（代价高昂）。当然，这会浪费一些内存。

# android - 仅通过 AsyncTask 加载一次 ListFragment

> ID：15903236
> 
> 赞同：2
> 
> 时间：2013-04-09T13:26:27.400
> 
> 标签：android, android-asynctask, android-fragments, android-listfragment

我正在尝试学习 Android 开发，并且仍在尝试围绕框架的工作原理以及如何正确扩展所有这些类。

我的目标是：一个`Activity`有一个`ViewPager`循环五个`ListFragment`s 的。绑定到每一个的数据`ListFragment`来自一个 Web API，该 API 使用`AsyncTask`.

我的问题是，每当我切换到新片段时，`MyListFragment.newInstance()`都会再次调用 the ，`AsyncTask`每次都会调用 the 。我试图`AsyncTask`在第一次`ListFragment`加载时调用一次，以减少网络调用并保存页面状态。最终我想做一个“下拉刷新”类型的事情，这意味着当我切换页面时不会重新加载数据。

我一直在关注Android Developers 上的[这个](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)指南来尝试实现这一点。我最终得到的是：

```
public class MainActivity extends FragmentActivity {

    MyPagerAdapter mMyPagerAdapter;
    ViewPager mViewPager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mMyPagerAdapter = new MyPagerAdapter(getSupportFragmentManager());

        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mMyPagerAdapter);
    }

    public class MyPagerAdapter extends FragmentPagerAdapter {
        public static final int NUM_PAGES = 5;

        public MyPagerAdapter(FragmentManager fm) {
            super(fm);
        }   

        @Override
        public Fragment getItem(int i) {
            return MyListFragment.newInstance(getPageTitle(i).toString());
        }

        @Override
        public int getCount() {
            return NUM_PAGES;
        }

        @Override
        public CharSequence getPageTitle(int position) { 
            String[] titles = getResources().getStringArray(R.array.thing_sort_titles);
            return titles[position];
        }

    }

    public static class MyListFragment extends ListFragment {
        public static final String ARG_CATEGORY = "category_title";
        ArrayList<HashMap<String, String>> mylist;

        public MyListFragment() {
            mylist = new ArrayList<HashMap<String, String>>();
        }

        @Override
        public void onActivityCreated(Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);

            Bundle args = getArguments();
            URI url = new URI("http://api.remotesite.com/" + args.getString(ARG_CATEGORY));
            new MyListAsyncTask().execute(url);
        }

        static MyListFragment newInstance(String category) {
            MyListFragment f = new MyListFragment();

            Bundle args = new Bundle();
            args.putString(ARG_CATEGORY, category);
            f.setArguments(args);

            return f;
        }

        private class MyListAsyncTask extends AsyncTask<URI, Integer, ArrayList<HashMap<String, String>>> {

            protected ArrayList<HashMap<String, String>> doInBackground(URI... uris) {
                try {
                    JSONArray json = JSON.getJSONfromURL(uris[0]);
                    for (int i = 0; i < json.length(); i++) {
                        HashMap<String, String> map = new HashMap<String, String>();
                        JSONObject obj = json.getJSONObject(i)
                        map.put("title", obj.getString("title"));
                        map.put("author", obj.getString("author"));
                        map.put("id", obj.getString("id"));
                        mylist.add(map);
                    }
                } catch (Exception ex) {
                }
                return mylist;
            }

            protected void onPostExecute(ArrayList<HashMap<String, String>> list) {
                ListAdapter adapter = new SimpleAdapter(
                    getActivity(), 
                    mylist,
                    R.layout.list_item, 
                    new String[] { "title", "author" }, 
                    new int[] { R.id.text_title, R.id.text_author }
                );
                MyListFragment.this.setListAdapter(adapter);
            }
        }
    }
} 
```

`ListFragment`我尝试在s 中做一个 s 数组`FragmentPagerAdapter`，并且仅`MyListFragment.newInstance`在该索引为空时调用，但它最终并没有改变任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:35:04.607

我建议您使用 Loaders ( [http://developer.android.com/guide/components/loaders.html](http://developer.android.com/guide/components/loaders.html) ) 来处理您的情况。

加载程序在这方面非常聪明，如果您使用相同的 ID，它会自动将与以前相同的数据返回给调用组件。

例如：

片段位置 0 调用`initLoader(0, null, this);`，然后片段位置 1 调用`initLoader(1, null, this);`，依此类推....

这样，每当`initLoader(1`第二次（第 3 次、第 4 次）调用 << id 时，它都不会执行 Web 调用并直接传递与第一次调用相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:37:22.440

请尝试使用[**`setOffscreenPageLimit`**](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOffscreenPageLimit%28int%29)来解决您的问题。如果您使用它，它将缓存您的片段并且不会再次调用它。

# c# - 尝试 UserPrincipal.FindByIdentity 时出现登录失败错误

> ID：15903237
> 
> 赞同：5
> 
> 时间：2013-04-09T13:26:30.707
> 
> 标签：c#, asp.net

一段时间以来，我一直在寻找解决方案，但不幸的是，每个线程都是死胡同。

我正在开发一个仅由我们公司内部使用的 C#/ASP.net Web 应用程序。在 IIS 和我的 web.config 文件中，匿名访问已被关闭，强制 IIS 使用 Windows 身份验证用户（Active Dir 用户）。

我的问题是以下代码可以完美地获得所需的（或任何）AD 用户：

```
using System.DirectoryServices.AccountManagement;

... other code ...

PrincipalContext ctx = new PrincipalContext(ContextType.Domain, "mydomain", "someADuser", "someADuserpassword");
UserPrincipal winuser = UserPrincipal.FindByIdentity(ctx, IdentityType.SamAccountName, "samaccountname"); 
```

上面 PrincipalContext 中使用的“someADuser”是当前通过 windows 登录的用户，因此经过身份验证，是一个有效的 AD 用户。使用以下代码（完全相同的用户仍然登录）给我一个“登录失败：未知用户名或密码错误”错误：

```
PrincipalContext ctx = new PrincipalContext(ContextType.Domain, "mydomain");
UserPrincipal winuser = UserPrincipal.FindByIdentity(ctx, IdentityType.SamAccountName, "samaccountname"); 
```

如果未在 PrincipalContext 对象中指定，则 UserPrincipal.FindByIdentity 似乎出于某种原因不使用已登录用户的验证凭据 - 这是我不想做的事情。

即使必要的设置（我希望）添加到 web.config 中，ctx 是否有可能由于某种原因没有获取登录的 Windows 用户：

```
<authentication mode="Windows"/>
<authorization>
  <deny users="?"/>
</authorization> 
```

并且在 IIS 中完全禁用了匿名访问？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T14:04:57.950

> 如果未在 PrincipalContext 对象中指定，则 UserPrincipal.FindByIdentity 似乎出于某种原因不使用已登录用户的验证凭据 - 这是我不想做的事情。

UserPrincipal.FindByIdentity 根本不关心用户的凭据。您只是在执行查找以查看该帐户是否存在。您收到错误的原因是因为默认用户凭据（即您的 Web 应用程序运行的身份）无权访问该目录，因此它无法执行查找。当您将客户端的凭据传递给 PrincipalContext 时，问题就消失了，因为您的客户端具有可以访问该目录的有效 AD 帐户。

您应该调查正在使用哪个身份来运行应用程序池，并确保它可以访问该目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T15:21:38.060

很烦人，尽管如果关闭匿名访问，当前主体将默认为登录到 Windows 的用户。事实证明它不像@RogerN 所指出的那样。

使用@TheKingDave 提到的以下语句，它基本上模拟了登录到 Windows 的用户并使当前线程在其主体而不是“ASP”（在我的情况下）帐户上运行。

因为我们域中的所有用户都具有对 Active Directory 的查询/读取访问权限，所以获得更多关于他们的详细信息应该不是问题，这正是我首先想要的。

结束代码（正在测试）：

```
System.Web.HttpContext.Current.Request.LogonUserIdentity.Impersonate();
ctx = new PrincipalContext(ContextType.Domain, System.Net.NetworkInformation.IPGlobalProperties.GetIPGlobalProperties().DomainName);
UserPrincipal winuser = UserPrincipal.FindByIdentity(ctx, IdentityType.SamAccountName, "whicheveraccount"); 
```

希望它对将来有所帮助！谢谢！;-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-19T06:53:34.263

我做了很多搜索/研究来解决这个问题，但没有任何效果，最后，我所做的只是添加`@`到服务器名称、容器、用户名和密码，如下所示：

```
app.CreatePerOwinContext(() => new PrincipalContext(ContextType.Domain, @"abc.net", @"OU=Customers,DC=abc,DC=net", ContextOptions.SimpleBind, @"abcnet\authuser", @"!$%MyPassword")); 
```

它奏效了。哦！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-09T15:09:38.153

所以我发现了如何传递假冒身份。我有一种情况，作为管理员，我想自动解锁用户帐户。我必须将用户名放入变量并将它们传递给函数，如下所示：

```
string accountname = @"domain\username";
string admin = "adminusername";
string domain = Environment.UserDomainName;
string password = "password";
string dc = "WIN2K8DC1";  // example host name of domain controller, could use IP

// This determines the domain automatically, no need to specify
// Use the constructor that takes the domain controller name or IP, 
// admin user name, and password
PrincipalContext ctx = new PrincipalContext(ContextType.Domain, dc, admin, password); 

UserPrincipal winuser = UserPrincipal.FindByIdentity(ctx, accountname)

if (winuser != null)
{
    WindowsImpersonationContext wic = Impersonation.doImpersonation(admin, domain, password); //class/function that does the logon of the user and returns the WIC
    if (wic != null)
    {
        winuser.UnlockAccount();
    }
} 
```

可用于返回 WIC 的模拟类功能可在 MSDN 上找到： [https ://msdn.microsoft.com/en-us/library/w070t6ka(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/w070t6ka(v=vs.110).aspx)

# spring - 通过 RedirectionAttributes 传递 BindingResult

> ID：15903238
> 
> 赞同：15
> 
> 时间：2013-04-09T13:26:31.470
> 
> 标签：spring, spring-mvc, validation

我试图通过 RedirectionAttributes 传递 BindingResult：

我已经引用了[Spring - 在 POST 之后重定向（即使有验证错误）](https://stackoverflow.com/questions/2543797/spring-redirect-after-post-even-with-validation-errors)，但仍然卡住了。

我有一个 GET 方法：

```
@RequestMapping(value = "/test", method = RequestMethod.GET)
public String test(@ModelAttribute("exampleForm") final ExampleForm exampleForm, final Model model)
{
    return "test";
} 
```

和一个 POST 方法：

```
@RequestMapping(value = "/doSomething", method = RequestMethod.POST)
public String doSomething(@Valid @ModelAttribute("exampleForm") final ExampleForm exampleForm, final BindingResult bindingResult, final RedirectAttributes redirectAttributes)
{
    if (bindingResult.hasErrors())
    {
        redirectAttributes.addFlashAttribute("org.springframework.validation.BindingResult.exampleForm", bindingResult);
        redirectAttributes.addFlashAttribute("exampleForm", exampleForm);
        return "redirect:/test";
    }
} 
```

但是，当我在 POST 方法中收到 GET 方法模型中的绑定错误（重定向后）时，它们似乎消失了。

这是 POST 方法中的 bindingResult 对象： `org.springframework.validation.BeanPropertyBindingResult: 1 errors`

这是 GET 方法中显示 0 个错误的模型条目： `org.springframework.validation.BindingResult.exampleForm=org.springframework.validation.BeanPropertyBindingResult: 0 errors`

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-09-27T13:06:45.707

这类似于 Cyril Deba 的回答，但您可以使用 flash 属性而不是 @SessionAttributes 来完成。关键是，如果您将 @ModelAttribute 用于在 GET RequestMapping 方法上制作表单，它看起来不会保留来自重定向 flash 属性的数据，但如果您将新表单对象作为它自己的方法，那么它仅在模型尚未包含它时才使用它。我还没有找到来自 Spring 的文档说明它以这种方式工作，或者为什么它们似乎工作不同，但类似以下的工作：

```
@Controller
public class MyFormController {

    @ModelAttribute("myForm")
    public MyForm newMyForm() {
        return new MyForm();
    }

    @RequestMapping(value = "/myForm/", method = RequestMethod.GET)
    public String showMyForm() {
        return "myForm";
    }

    @RequestMapping(value = "/myForm/", method = RequestMethod.POST)
    public String processMyForm(
            @Valid @ModelAttribute("myForm") final MyForm myForm,
            final BindingResult bindingResult,
            final RedirectAttributes redirectAttributes) {
        final String view;
        if (bindingResult.hasErrors()) {
            redirectAttributes.addFlashAttribute("org.springframework.validation.BindingResult.myForm", bindingResult);
            redirectAttributes.addFlashAttribute("myForm", myForm);
            view = "redirect:/myForm/";
        } else {
            // Success
            view = "redirect:/";
        }
        return view;
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T09:19:21.673

这绝不是一个好的答案，而是一种解决方法：

我必须将 flashAttribute 设置为“exampleFormBindingResult”，然后覆盖模型“org.springframework.validation.BindingResult.exampleForm”属性

```
@RequestMapping(value = "/test", method = RequestMethod.GET)
public String test(@ModelAttribute("exampleForm") final ExampleForm exampleForm, final Model model)
{
    if (model.asMap().containsKey("exampleFormBindingResult"))
    {
        model.addAttribute("org.springframework.validation.BindingResult.exampleForm",
                model.asMap().get("exampleFormBindingResult"));
    }

    return "test";
} 
```

我添加了一个带有键“exampleFormBindingResult”的 flashAttribute：

```
@RequestMapping(value = "/doSomething", method = RequestMethod.POST)
public String doSomething(@Valid @ModelAttribute("exampleForm") final ExampleForm exampleForm, final BindingResult bindingResult, final RedirectAttributes redirectAttributes)
{
    if (bindingResult.hasErrors())
    {
        redirectAttributes.addFlashAttribute("exampleFormBindingResult", bindingResult);
        redirectAttributes.addFlashAttribute("exampleForm", exampleForm);
        return "redirect:/test";
    }
} 
```

我希望其他人找到更好的答案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-06-14T13:32:37.927

你的 GET 方法应该喜欢

```
@RequestMapping(value = "/test", method = RequestMethod.GET)
public String test(final Model model)
{
    if(!model.containsAttribute("exampleForm")){
        model.addAttribute("exampleForm", new ExampleForm());
    }
    return "test";
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-12T08:50:35.980

另一种可以解决问题的方法。会话属性有助于在请求之间持久化对象，因此以下基于它

```
@Controller
@SessionAttributes(
{ "exampleForm" })
public class HomeController
{

@ModelAttribute("exampleForm")
public ExampleForm getExampleForm()
{
    return new ExampleForm();
}

@RequestMapping(value = "/myform", method = RequestMethod.POST)
public String proccessForm(@Valid @ModelAttribute("exampleForm") 
        final ExampleForm form, final BindingResult result,
        final SessionStatus sessionStatus)
{
    if (result.hasErrors())
    {
        return "redirect:/myform";
    }
    sessionStatus.setComplete();
    return "redirect:/complete";
}

@RequestMapping(value = "/myform", method = RequestMethod.GET)
public String showForm(final Model model)
{
    return "form";
}

@RequestMapping(value = "/complete", method = RequestMethod.GET)
public String showSomething(final Model model)
{
    return "complete";
}
} 
```

# java - 套接字侦听许多数据包而没有无限循环

> ID：15903240
> 
> 赞同：0
> 
> 时间：2013-04-09T13:26:34.630
> 
> 标签：java

我正在为android编写一个java套接字程序：

**DeviceManagerWindow.java**

```
public class DeviceManagerWindow extends Activity
{
    Thread sendMulticast;
    ...
    ...
    WifiManager wifi = (WifiManager)getSystemService( Context.WIFI_SERVICE );
    if(wifi != null)
    {
        WifiManager.MulticastLock lock = wifi.createMulticastLock("WifiDevices");
        lock.acquire();
    }
    public void searchDevice(View view)
    {
        sendMulticast = new Thread(new MultiCastThread());
        sendMulticast.start();
        ExecutorService executorService = Executors.newFixedThreadPool(1);
        List<Future<DeviceDetails>> deviceList = new ArrayList<Future<DeviceDetails>>();

            Callable<DeviceDetails> device = new MulticastReceiver();
            Future<DeviceDetails> submit = executorService.submit(device);
            deviceList.add(submit);

        DeviceDetails[] devices = new DeviceDetails[deviceList.size()];
        int i=0;
        for(Future<DeviceDetails> future :deviceList)
        {
            try
            {
                devices[i] = future.get();
            }
            catch(Exception e)
            {
                Log.v("future Exception: ",e.toString());
            }
        }
        listAllDevices(devices);
    }
} 
```

在接收器类中，我有以下代码：

**MultivastReceiver.java**

```
public class MulticastReceiver implements Callable<DeviceDetails>
{
    DatagramSocket socket = null;
    DatagramPacket inPacket = null;
    public MulticastReceiver()
    {
        try
        {
            socket = new DatagramSocket(5500);
        }
        catch(Exception ioe)
        {
            System.out.println(ioe);
        }
    }
    @Override
    public DeviceDetails call() throws Exception
    {
        // TODO Auto-generated method stub
        try
        {
                byte[] inBuf = new byte[WifiConstants.DGRAM_LEN];
                //System.out.println("Listening");
                inPacket = new DatagramPacket(inBuf, inBuf.length);
                socket.receive(inPacket);

                String msg = new String(inBuf, 0, inPacket.getLength());

                Log.v("Received: ","From :" + inPacket.getAddress() + " Msg : " + msg);
                DeviceDetails device = getDeviceFromString(msg);
                return device;
        }
        catch(Exception e)
        {
            Log.v("Receiving Error: ",e.toString());
            return null;
        }
    }
    public DeviceDetails getDeviceFromString(String str)
    {
        String type;
        String IP;
            type=str.substring(0,str.indexOf('`'));
            str = str.substring(str.indexOf('`')+1);
            IP=str;
        DeviceDetails device = new DeviceDetails(type,IP);
        return device;
    }
} 
```

现在，上面的代码仅在收到第一个数据包时才搜索第一个数据包，它停止搜索下一个数据包。我希望它监听传入的数据包 30 秒，然后退出，它收到的所有数据。怎么做。

如果我使用无限循环，那么它将永远不会返回值，因为 return 语句将放在循环之外，如果我将 return 语句放在循环内，它将返回值并且永远不会等待下一个数据包的到来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:42:34.253

有2种可能性。

您可以将套接字设置为 30 秒后超时。不幸的是，每次您收到新消息时都会重置。所以如果你知道所有的消息都会在 30 秒内到达，只需设置超时，套接字最终会在收到最后一个数据包后超时。

[链接到套接字超时](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/DatagramSocket.html#setSoTimeout%28int%29)

第二种选择是使用单独的 TimerTask 来唤醒您的客户端，这样它就不会在接收中无限期地被阻塞。您将需要从应该完成这项工作的计时器任务中中断客户端线程。

[链接到定时器任务](http://docs.oracle.com/javase/6/docs/api/java/util/TimerTask.html)

在这两种情况下，您都需要处理适当的异常来处理超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:37:19.190

创建一个默认为 false 的“取消”布尔属性，并让您的 while 循环运行，直到该属性设置为 true。然后我们一个[计时器](http://enos.itcollege.ee/~jpoial/docs/tutorial/essential/threads/timer.html)在三十秒后将“取消”设置为真。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T22:16:23.287

我在[这里](https://stackoverflow.com/questions/15919472/device-discovery-over-wifi-for-defined-period-of-time)给了你代码......

我猜这是同样的问题。不记号啊！！看看你是否认为这很好。

# jquery - 添加 到 在jquery mobile中使用for循环

> ID：15903241
> 
> 赞同：2
> 
> 时间：2013-04-09T13:26:37.550
> 
> 标签：jquery, jquery-mobile, markup, jquery-mobile-listview

我在我的应用程序中使用 $.get() 来检索设施名称列表。然后我想将它们作为 jquery mobile 中的列表项插入到已经存在的 . 当我在 html 中添加单个元素时，它看起来不错，但是当我使用 for 循环时，结果没有任何样式效果。

[http://jsfiddle.net/mkamyszek/YDFZ3/1/](http://jsfiddle.net/mkamyszek/YDFZ3/1/)

```
<div data-role="page">
            <div data-role="header">
                <h1>My Title</h1>
            </div><!-- /header -->

            <div data-role="content">
                <ul data-role="listview" data-inset="true" data-filter="true" id="fieldList">
                    <li>Test</li>
                </ul>
            </div><!-- /content -->

        </div><!-- /page --> 
```

循环输出正确的信息，但由于某种原因，当我使用循环时样式不适用：

```
for (i=0; i<=5; i++){
$("ul").append("<li>something" + i + "</li>"); 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T13:28:18.530

那是因为您需要在添加新内容后重新设置列表视图的样式。

像这样做：

```
$('#listviewID').listview('refresh'); 
```

有时当动态生成列表视图时，它会要求您在对其进行样式设置之前对其进行初始化，因此在这种情况下使用：

```
$('#listviewID').listview().listview('refresh'); 
```

工作示例：http: [//jsfiddle.net/Gajotres/LrAyE/](http://jsfiddle.net/Gajotres/LrAyE/)

这是您示例中的一个工作示例：http: [//jsfiddle.net/Gajotres/HuKab/](http://jsfiddle.net/Gajotres/HuKab/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T13:29:36.470

`$('.selector').listview('refresh');`在附加项目后使用。

> **[演示](http://jsfiddle.net/Palestinian/YDFZ3/2/)**

```
for (i=0; i<=5; i++){
 $("ul").append("<li>something" + i + "</li>");
 $('[data-role=listview]').listview('refresh');
} 
```

# javascript - 更多粒度闭包编译器标志？

> ID：15903242
> 
> 赞同：0
> 
> 时间：2013-04-09T13:26:37.973
> 
> 标签：javascript, performance, minify, google-closure-compiler

我正在使用闭包编译器来缩小和连接我的脚本，我想使用该`ADVANCED_OPTIMIZATIONS`标志来获得更多的缩小魔法。但是，当我使用此标志并且不起作用时，我创建的一些脚本会发出警告。我不想通过一堆较小的选项传递一个标志，然后看看哪个打破了它，也许我不会得到 100% 的尺寸减小，但更接近。

是否有任何较小的单个标志可以传递给 google 闭包编译器选项以打开`'ADVANCED_OPTIMIZATIONS'`标志的各个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:17:54.063

最简洁的答案是不”。

`SIMPLE_OPTIMIZATIONS`和之间的跳跃`ADVANCED_OPTIMIZATIONS`可能看起来很大，但实际上归结为两个主要问题：

1.  死代码消除
2.  属性重命名

对于这两个项目，编译器需要相同的信息集才能正确执行此操作。它需要：

*   对代码的每个引用的详细信息——代码本身以及编译代码之外的引用。
*   有关已编译代码使用哪些外部库、符号或代码片段的信息。

通过了解这两条信息，编译器既可以安全地重命名公共/全局属性和变量，也可以完全消除从未使用过的代码。

迁移`ADVANCED_OPTIMIZATIONS`可能需要做很多工作，但它也可以在代码大小和性能方面产生巨大的回报。帮助该过程的提示：

*   阅读并理解官方文档的[注意事项](https://developers.google.com/closure/compiler/docs/api-tutorial3#dangers)部分。
*   查看编译器项目中的[常见问题解答](https://code.google.com/p/closure-compiler/wiki/FAQ#My_code_broke_when_using_advanced_optimizations!_How_do_I_figure)以获取有关调试已编译代码的提示
*   使用`warning_level=VERBOSE`. 虽然它确实会产生更多警告，但它有助于识别诸如缺失属性之类的东西，这通常是破坏代码的罪魁祸首。
*   问很多问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T05:55:39.703

您可以使用 java api 来调整编译器优化。基本上你自定义命令行：
[http ://blog.bolinfest.com/2009/11/calling-closure-compiler-from-java.html](http://blog.bolinfest.com/2009/11/calling-closure-compiler-from-java.html)

或者，您可以创建编译器的自定义构建并使用用于高级模式的选项：

参见：applyFullCompilationOptions

在：CompilationLevel.java

[http://closure-compiler.googlecode.com/git-history/805436ff85a6975fb482aa298c8f3bce4a2a832f/src/com/google/javascript/jscomp/CompilationLevel.java](http://closure-compiler.googlecode.com/git-history/805436ff85a6975fb482aa298c8f3bce4a2a832f/src/com/google/javascript/jscomp/CompilationLevel.java)

# javascript - SVG 网格渲染 Chrome、Firefox、IE - 错误的线对齐 - 模糊的线条

> ID：15903244
> 
> 赞同：0
> 
> 时间：2013-04-09T13:26:45.180
> 
> 标签：javascript, html, google-chrome, firefox, svg

为了创建 SVG，我在 SVG 中绘制了几条线。问题是它在 Chrome 和 Firefox 中看起来不同。

Chrome：未绘制最后一行 Firefox：未绘制第一行

顺便说一句：Internet Explorer 版本看起来很模糊，但这不是主要问题。

那么现在是谁呢？

我究竟做错了什么。

给你一些背景信息：我通常从 JavaScript 动态地绘制这个网格。我是否必须编写丑陋的 hack 来处理这些不同的 SVG 浏览器渲染行为？（我不想使用任何库，除了普通的 JavScript）

在此处查看此 [codepen.io：http://codepen.io/mjost/full/kuaFH](http://codepen.io/mjost/full/kuaFH)

这是代码：

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" baseProfile="full" id="phoenix10_5" viewBox="0 0 960 768"> 
<defs>
<style type="text/css">
<![CDATA[
svg
{
    shape-rendering: crispEdges;
    stroke-linecap: butt;
}
text
{
    alignment-baseline: auto;
}
]]>
</style>
</defs>
<rect x="0" y="0" width="960" height="768" rx="0" ry="0" fill="rgb(255, 255, 255)"/>
<g>
<rect x="69" y="44" width="746" height="187" rx="0" ry="0" fill="rgb(255, 255, 255)"/>
<g>
<svg x="69" y="44" width="746" height="187" viewBox="0 0 746 187">
    <rect x="0" y="0" width="746" height="187" style="fill: #FFFFFF"/>
    <g>
        <line stroke="#000000" stroke-width="1" x1="0" y1="0" x2="746" y2="0"/>
        <line stroke="#000000" stroke-width="1" x1="0" y1="18" x2="746" y2="18"/>
        <line stroke="#000000" stroke-width="1" x1="0" y1="37" x2="746" y2="37"/>
        <line stroke="#000000" stroke-width="1" x1="0" y1="56" x2="746" y2="56"/>
        <line stroke="#000000" stroke-width="1" x1="0" y1="74" x2="746" y2="74"/>
        <line stroke="#000000" stroke-width="1" x1="0" y1="93" x2="746" y2="93"/>
        <line stroke="#000000" stroke-width="1" x1="0" y1="112" x2="746" y2="112"/>
        <line stroke="#000000" stroke-width="1" x1="0" y1="130" x2="746" y2="130"/>
        <line stroke="#000000" stroke-width="1" x1="0" y1="149" x2="746" y2="149"/>
        <line stroke="#000000" stroke-width="1" x1="0" y1="168" x2="746" y2="168"/>
        <line stroke="#000000" stroke-width="1" x1="0" y1="187" x2="746" y2="187"/>
        <line stroke="#000000" stroke-width="1" x1="0" y1="0" x2="0" y2="187"/>
        <line stroke="#000000" stroke-width="1" x1="74" y1="0" x2="74" y2="187"/>
        <line stroke="#000000" stroke-width="1" x1="149" y1="0" x2="149" y2="187"/>
        <line stroke="#000000" stroke-width="1" x1="223" y1="0" x2="223" y2="187"/>
        <line stroke="#000000" stroke-width="1" x1="298" y1="0" x2="298" y2="187"/>
        <line stroke="#000000" stroke-width="1" x1="373" y1="0" x2="373" y2="187"/>
        <line stroke="#000000" stroke-width="1" x1="447" y1="0" x2="447" y2="187"/>
        <line stroke="#000000" stroke-width="1" x1="522" y1="0" x2="522" y2="187"/>
        <line stroke="#000000" stroke-width="1" x1="596" y1="0" x2="596" y2="187"/>
        <line stroke="#000000" stroke-width="1" x1="671" y1="0" x2="671" y2="187"/>
        <line stroke="#000000" stroke-width="1" x1="746" y1="0" x2="746" y2="187"/>
    </g>
    </svg>
</g>
</g>
</svg> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:52:57.877

您的 viewBox 是“0 0 960 768”，这就是您可以看到的。当你画画

```
<line stroke="#000000" stroke-width="1" x1="0" y1="0" x2="746" y2="0"/> 
```

您是说您想要从 y=-0.5 到 y=0.5 的 1 像素宽的笔画，因为 1/2 笔画位于线条的每一侧。但是，由于 viewBox，从 -0.5 到 0 的所有笔划都被剪裁了，因此您要求查看 1/2 像素宽的清晰边缘笔划，这对于 UA 来说是不可能的。有时 UA 会在 viewBox 内显示它，你会看到它，有时它会在 viewBox 外绘制它，然后你不会。

如果您想使用带有清晰边缘的笔划，最好以 0.5 个单位绘制它们，例如

```
<line stroke="#000000" stroke-width="1" x1="0.5" y1="0.5" x2="746" y2="0.5"/> 
```

这里有[更全面的解释](http://cairographics.org/FAQ/#sharp_lines)

# java - Eclipse中用于轻松依赖管理的Java工具

> ID：15903247
> 
> 赞同：0
> 
> 时间：2013-04-09T13:26:51.513
> 
> 标签：java

是否有任何 java 工具可用于自动下载我想使用的框架的 jar 并在 Eclipse 中管理依赖项。我一直很欣赏 Visual Studio 以及做这样的事情是多么容易，我想知道 Eclipse 是否有类似的功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T13:30:04.797

使用 Maven，以及用于 Eclipse 的 m2 插件。这是在 Java 世界中自动下载依赖项的最常用方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:30:03.960

依赖管理的最佳工具是 Maven。但是，这将要求您对 eclipse 项目进行 maven-ify。

使用 maven，您可以指定顶级依赖项，Maven 将计算出该依赖项所依赖的内容。

[这](https://stackoverflow.com/questions/2449461/convert-existing-eclipse-project-to-maven-project)是一个关于将 Eclipse 项目转换为 Maven 的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T13:30:27.927

你可以试试 Ivy [http://ant.apache.org/ivy/](http://ant.apache.org/ivy/)，它的开始有点粗糙，但效果很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T13:31:00.817

如果你使用 maven 作为构建工具

您可以在 pom.xml 中定义依赖项，如下所示，它将自动从 maven 构建的指定存储库中下载 jars（在这种情况下为 junit-4.0.jar）。

```
<dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.0</version>
      <type>jar</type>
      <scope>test</scope>
      <optional>true</optional>
    </dependency>
    ...
  </dependencies> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T13:33:35.067

请参阅[Apache 构建器](http://buildr.apache.org/)。它与 maven 存储库兼容，并使用 Ruby 脚本语言而不是十分之一的 XML 文件。

其他选项是[Gradle](http://www.gradle.org/)，类似于后者和基于 Groovy。

# java - 从 WSDL 使用 jaxb2-maven-plugin 生成类

> ID：15903249
> 
> 赞同：21
> 
> 时间：2013-04-09T13:26:53.540
> 
> 标签：java, maven, jaxb, jaxb2-maven-plugin

我无法配置`jaxb2-maven-plugin`从 WSDL 和多个 XSD 文件生成 Java 类，这些文件都存在于同一个标准目录`src/main/xsd`中。

[如何使用带有内联 XSD 的 jaxb2 maven 插件？](https://stackoverflow.com/questions/14315651/how-to-use-jaxb2-maven-plugin-with-inline-xsd/)仅在答案正确建议使用`wsdl`插件配置中的参数时相关，但该问题确实与内联 XSD 相关，而我的 XSD 是外部的。

[插件目标参数在此处](http://mojo.codehaus.org/jaxb2-maven-plugin/xjc-mojo.html)列出。

我的插件配置是：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>jaxb2-maven-plugin</artifactId>
    <version>1.5</version>
    <executions>
        <execution>
            <id>xjc</id>
            <goals>
                <goal>xjc</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <packageName>com.x.y.model</packageName>
        <wsdl>true</wsdl>
    </configuration>
</plugin> 
```

我正在测试这个，`mvn -X clean jaxb2:xjc`但插件忽略`.wsdl`了调试输出中看到的

```
[DEBUG] accept false for file c:\projects\foo\src\main\xsd\service.wsdl
[DEBUG] accept true for file c:\projects\foo\src\main\xsd\datatypes.xsd
[DEBUG] accept true for file c:\projects\foo\src\main\xsd\more-datatypes.xsd 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-09T13:26:53.540

通过检查传递给 JAXB XJC 的参数的 Maven 调试输出（以及一些试验和错误），我发现我需要为插件提供另外 2 个配置参数。

这将停止插件对 XSD 文件的扫描，并仅将`.wsdl`用作源。例如，XSD 文件作为`<xsd:include schemaLocation="datatypes.xsd" />`指令包含在 WSDL 中，这些指令在本地解析，从而导致 WSDL 和 XSD 中的所有类型都生成为 Java 类。

对我有用的配置部分是：

```
<configuration>
    <packageName>com.x.y.model</packageName>
    <wsdl>true</wsdl>
    <xmlschema>false</xmlschema>
    <schemaFiles>service.wsdl</schemaFiles>
</configuration> 
```

没有`<xmlschema>false</xmlschema>`Maven 错误：

> org.apache.maven.lifecycle.LifecycleExecutionException：无法在项目 foo 上执行目标 org.codehaus.mojo:jaxb2-maven-plugin:1.5:xjc (default-cli)：无法处理架构：/c:/projects/foo /src/main/xsd/service.wsdl

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-17T18:17:03.977

如果您同时生成 wsdl 和 xsd，请尝试放入不同的执行配置：它可能不一样`schemaDirectory`，或者插件在第二次执行时不会成功运行，因为它会根据此变量缓存执行。我建议这样做

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>jaxb2-maven-plugin</artifactId>
            <version>1.6</version>
            <executions>
                <execution>
                    <id>generate-sri-facturas</id>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>xjc</goal> 
                    </goals> 
                    <configuration> 
                        <outputDirectory>target/generated-sources/sri</outputDirectory>
                        <packageName>${commonsource.packageName}</packageName> 
                        <schemaDirectory>src/main/resources/schema/xsd</schemaDirectory>
                        <schemaFiles>factura_v1.1.0.xsd</schemaFiles>
                    </configuration> 
                </execution> 
                <execution>
                    <id>generate-sri-autorizacion-comprobantes</id>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>xjc</goal> 
                    </goals> 
                    <configuration> 
                        <outputDirectory>target/generated-sources/sri/autorizacion</outputDirectory>
                        <packageName>${commonsource.packageName}.autorizacion</packageName>
                        <wsdl>true</wsdl>
                        <xmlschema>false</xmlschema>
                        <schemaDirectory>src/main/resources/schema/wsdl</schemaDirectory>
                        <schemaFiles>AutorizacionComprobantes.wsdl</schemaFiles>
                    </configuration> 
                </execution> 
            </executions> 
        </plugin> 
```

我创建了一个`xsd`和一个`wsdl`文件夹来分隔配置。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-07-06T13:13:29.827

您可以在配置中使用以下代码：

```
 <configuration>
                    <!-- Package to store the generated file -->
                    <packageName>com.example.demo.wsdl</packageName>
                    <!-- Treat the input as WSDL -->
                    <wsdl>true</wsdl>
                    <!-- Input is not XML schema -->
                    <xmlschema>false</xmlschema>
                    <!-- The WSDL file that you saved earlier -->
                    <schemaFiles>horarios.wsdl</schemaFiles>
                    <!-- The location of the WSDL file -->
                    <schemaDirectory>${project.basedir}/src/main/resources</schemaDirectory>
                    <!-- The output directory to store the generated Java files -->
                    <outputDirectory>${project.basedir}/src/main/java</outputDirectory>
                    <!-- Don't clear output directory on each run -->
                    <clearOutputDir>false</clearOutputDir>
                </configuration> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-06-09T23:19:54.857

我对 jaxb2-maven-plugin 2.5.0 有这个问题。这是我的解决方案：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>jaxb2-maven-plugin</artifactId>
    <version>2.5.0</version>
    <executions>
        <execution>
            <phase>generate-resources</phase>
            <id>xjc</id>
            <goals>
                <goal>xjc</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <sourceType>wsdl</sourceType>
        <sources>
            <source>${project.basedir}/src/main/resources/wsdl</source>
        </sources>
        <outputDirectory>${project.basedir}/src/main/java</outputDirectory>
        <clearOutputDir>false</clearOutputDir>
        <packageName>com.project.generated</packageName>
        <noPackageLevelAnnotations>true</noPackageLevelAnnotations>
    </configuration>
</plugin> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-10-10T09:17:16.857

我试过`jaxb2-maven-plugin`生成java文件

```
<plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>jaxb2-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <goals>
                            <goal>xjc</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <schemaDirectory>src/main/webapp/schemas/</schemaDirectory>
                    <wsdl>true</wsdl>
                    <outputDirectory>src/main/java</outputDirectory>
                </configuration>
            </plugin> 
```

要运行它，我使用了命令

```
mvn jaxb2:xjc 
```

试试这个，它会在你的 src 文件夹中生成 jaxb 类。希望你正在寻找这个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-15T14:55:09.850

对于 2.5 版，配置如下：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>jaxb2-maven-plugin</artifactId>
    <version>2.5.0</version>
    <executions>
        <execution>
            <id>xjc</id>
            <phase>generate-sources</phase>
            <goals>
                <goal>xjc</goal>
            </goals>
            <configuration>
                <outputDirectory>${project.basedir}/src/main/java</outputDirectory>
                <packageName>com.packagename</packageName>
                <sources>
                    <source>${project.basedir}/src/main/resources/wsdl</source>
                </sources>
                <sourceType>wsdl</sourceType>
                <clearOutputDir>false</clearOutputDir>
                <noPackageLevelAnnotations>true</noPackageLevelAnnotations>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

# html - CSS 重叠 div

> ID：15903251
> 
> 赞同：0
> 
> 时间：2013-04-09T13:26:54.153
> 
> 标签：html, css

我有 4 个 div：

```
#centered {
    position: absolute;
    top: 50%;
    left: 52%;
    width: 500px;
    height: 500px;
    margin-top: -250px; /* Half the height */
    margin-left: -250px; /* Half the width */
    }
#container{
    width:100%;
} 
```

（左右都在这个容器里）

```
 #left{
        float:left;
        width: 260px;
        height: 600px;
    }
    #right{
        float: right;
        top: 50%;
        width: 160px;
        height: 600px;
    } 
```

居中的 div 始终位于页面的中心，而另外两个位于页面的两侧。使用

```
body { min-width:1150px; } 
```

#centered 和 #right 之间总是有一个空格。但是当我缩小页面时，#centered 和#left 之间没有保留空间，导致重叠。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:29:34.187

您可以添加一个装订线`<div>`并相应地调整您的位置，或者您可以减少`#left`. 使用百分比而不是 px 作为宽度，`#left`调整`#right`大小时会使其更平滑。

# mysql - 组合结果集

> ID：15903258
> 
> 赞同：-2
> 
> 时间：2013-04-09T13:27:12.600
> 
> 标签：mysql, stored-procedures

我需要结合两个结果集：

```
--Resultset from Procedure 1
Date    Session Attendees
2013-04-09  Morning 2
2013-04-09  Noon    6

--Resultset from Procedure 2
Session Admitted
Morning 1
Noon    3 
```

我需要结合这两个过程的结果集。请提出一些方法，以便最终结果集如下所示：

```
--Date  Session Attendees   Admitted
2013-04-09  Morning 2   1
2013-04-09  Noon    6   3 
```

我正在尝试这种方式，但它不起作用。请纠正我：

创建过程 test1_test2_combine()

开始

```
 DECLARE @tmp_proc1 TABLE
 DECLARE @tmp_proc2 TABLE

  Call test1() ;
 INSERT INTO @tmp_proc1 
  Call test2() ;
 INSERT INTO @tmp_proc2

 Select @tmp_proc1.*, @tmp_proc2.Admitted from @tmp_proc1, @tmp_proc2
 Where @tmp_proc1.rownum = @tmp_proc2.rownum; 
```

结尾

基本上我要做的是，从两个过程中获取结果集并插入两个临时表并使用 rownum 组合它们。请指教。在此先感谢，克里希纳

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T13:55:15.280

要获得所需的结果集，您需要加入这些主要结果集。这意味着，您可能会想到以下内容：

```
SELECT * FROM (CALL test_select_users) AS 'result1' 
```

加入这个：

```
SELECT * FROM (CALL test_select_users) AS 'result2' 
```

但是，**这是不可能的。** 相反，您可以使用[***用户定义的函数***](http://dev.mysql.com/doc/refman/5.1/en/create-function.html)或[视图](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)而不是过程。

**一个过程可以返回多个结果集，每个结果集都有自己的模式。它不适合在 SELECT 语句中使用。**

# ajax - 如何捕获过滤primefaces中的数据表的事件

> ID：15903264
> 
> 赞同：10
> 
> 时间：2013-04-09T13:27:28.320
> 
> 标签：ajax, jsf, primefaces, datatable

如何捕获`p:dataTable`PrimeFaces 中过滤 a 的事件。我需要在过滤时计算与结果列表相关的一些值，我必须使用过滤表进行计算：

```
<p:dataTable  id="tabla_gral" rendered="#{consumoMaterial.verTabla}" var="item"
              paginator="true" rows="15" rowKey="#{item.no}"
              value="#{consumoMaterial.listadoConsumo}"
              filteredValue="#{consumoMaterial.listadoConsumoFiltered}"> 
```

但我想在每次使用滤液时进行计算。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-09T13:33:42.080

Primefaces`p:dataTable`有 AJAX 事件`filter`，您可以在以下位置定义`p:dataTable`：

```
<p:dataTable>
  <p:ajax event="filter" listener="#{myBean.filterListener}"/>
</p:dataTable> 
```

现在在您的支持 bean 定义方法中`filterListener`：

```
public void filterListener(FilterEvent filterEvent) {
  // your code here...
} 
```

现在，您的`filterListener`函数将在每个过滤器事件上被调用。

# ember.js - EmberJS：如何为控制器使用“需求”API？

> ID：15903270
> 
> 赞同：1
> 
> 时间：2013-04-09T13:27:49.213
> 
> 标签：ember.js

两周前，我发布了一个我认为与 RC2 中更新的 {{render}} 相关的问题： [EmberJS：在 RC2 中，当多次调用 {{render}} 时，如何为控制器使用“需求”？](https://stackoverflow.com/questions/15725454/emberjs-in-rc2-how-to-use-needs-for-a-controller-when-render-is-called-m)

现在，我认为它要么比这更广泛，要么我误解了如何使用“需求”API，因为在使用旧的“itemController”时也会发生这种情况。

考虑以下：

```
App.Parent = Ember.Object.extend({
    name: null,
    children: null, // An Ember array of Child objects
});

App.Child = Ember.Object.extend({
    name: null,
});

App.ParentController = Ember.ObjectController.extend({
});

App.ChildController = Ember.ObjectController.extend({
    needs: 'parent',
}); 
```

我的模板是这样的：

```
<script type="text/x-handlebars" data-template-name="application">
    {{#each parent in App.parents itemController='Parent'}}
        {{partial 'parent'}}
    {{/each}}
</script>

<script type="text/x-handlebars" data-template-name="_parent">
    In parent: {{controller}}<br>
    Name: {{name}}<br>
    <br>
    {{#each child in children itemController='Child'}}
        {{ partial 'child' }}
    {{/each}}
</script>

<script type="text/x-handlebars" data-template-name="_child">
    Child name: {{name}}<br>
    Parent Name: {{controllers.parent.name}}<br>
    <br>
</script> 
```

为什么 {{controllers.parent.name}} 总是为空？

[http://jsfiddle.net/8V9xQ/5/](http://jsfiddle.net/8V9xQ/5/)

谢谢

PJ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:01:27.280

您不必为此使用`needs`API，只需编写`{{parent.name}}`而不是`{{controllers.parent.name}}`在您的子模板中，然后`needs: 'parent'`从`App.ChildController`.

`needs`您使用API引用单例控制器，而 an`itemController`不是单例。

# mercurial - Mercurial：在开发过程中创建命名分支的影响

> ID：15903273
> 
> 赞同：0
> 
> 时间：2013-04-09T13:28:05.563
> 
> 标签：mercurial

我正在使用 Mercurial 命名分支来标记一个大的开发线程（CustomerA 分支）。

在开始处理 CustomerB 更改时（在同一个 repo 中），我忘记从一开始就开始命名分支（客户 B）。

我的回购中有以下历史记录：

```
CustomerA-1 > CustomerA-2 > CustomerA-3 > CustomerA-8 > CustomerA-9
                          |
                          > CustomerA-4 > CustomerA-5 > CustomerB-6 > CustomerB-7 
```

保持“原样”是否有任何负面影响？如果我将“4”和“5”变更集“按原样”保留，即使在逻辑上它们属于 CustomerB 分支，任何 Mercurial 工作流程（合并、在分支之间切换、克隆等）是否存在具体的实际问题？比如“5”出现在“hg head”列表中，会不会有什么不良影响？

关于如何修复它，stackoverflow 上有很好的答案，但我不想重写历史，除非这种情况将来会导致特定的痛点：

[Mercurial 将更改更改为新分支](https://stackoverflow.com/questions/4665549/mercurial-move-changes-to-a-new-branch)

[Mercurial：命名分支与多个存储库](https://stackoverflow.com/questions/890723/mercurial-named-branches-vs-multiple-repositories)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:18:58.580

你很好。我想不出由于使用命名分支而产生的任何不利影响。

# windows - git被阻塞，如何安装npm模块

> ID：15903275
> 
> 赞同：29
> 
> 时间：2013-04-09T13:28:12.167
> 
> 标签：windows, node.js, github, proxy, npm

我们通过代理连接，在这里，**git 被阻止（不是网站，而是在 git//: 上）**我们尝试使用 egit，“Windows 上的 git”，有和没有代理，但没有发生本地克隆。

现在的问题是安装 npm 模块，我尝试通过从 git 网站（通过 web）下载模块（zip）并尝试本地安装，它有效，但这里的问题是大量依赖项，**不容易拉模块一个通过一个来填充依赖项（和内部依赖项）**。

那么如何解决这个问题，我觉得可以通过三种方式来解决：

*   允许 git 隧道通过防火墙（我在 n/w 团队中没有朋友）。
*   建议我在进行 npm 安装时通过 http://（而不是 git://）提取具有依赖关系的模块。
*   从 git 网站模块 + 完整依赖项下载，单次下载。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-04-09T13:38:11.050

从这个答案复制 [https://stackoverflow.com/a/10729634/1095114](https://stackoverflow.com/a/10729634/1095114)

* * *

如果这是您的防火墙阻止 git: 协议端口 (9418) 的问题，那么您应该进行更持久的更改，这样您就不必记住为每个 git repo 发出其他帖子建议的命令。这也适用于可能也在使用该`git://`协议的子模块。

只需发出以下命令：

`git config --global url."https://".insteadOf git://`

这只是将以下两行添加到 ~/.gitconfig：

`[url "https://"] insteadOf = git://`

现在，就像变魔术一样，所有 git 命令都会执行`git://`to的替换`https://`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:25:54.170

Npm 和 git 不使用您的 Windows 代理设置。

您可以使用以下方式配置它们：

```
set HTTP_PROXY=http://user:pass@server.url:port 
```

另请参阅[https://superuser.com/questions/347476/how-to-install-npm-behind-authentication-proxy-on-windows](https://superuser.com/questions/347476/how-to-install-npm-behind-authentication-proxy-on-windows)

* * *

如果您的代理无法正常工作，您可以`npm install`在具有直接 Internet 连接的机器上运行（例如 dmz 中的服务器、托管服务提供商处、云中等），然后将`node_modules`文件夹复制到本地机器.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-20T17:18:34.320

git 代理设置对我有用，可以从 github 克隆 repos。但是，在安装/更新使用 git url 的 npm 模块时，我仍然收到超时错误。我的解决方法是`.git/config`在 repo 的文件中手动设置代理。

```
[http]
    proxy = http://proxy.company.com:8888 
```

但是等等，还有更多：这适用于某些 git url，但不适用于其他。第二个也是最后一个解决方法是确保在两个用户配置文件中都设置了 git 代理，因为我的 PC 在我的驱动器上有一个共享网络用户主目录：

```
I:\.gitconfig
C:\Users\<userid>\.gitconfig 
```

归功于[此评论](https://github.com/npm/npm/issues/5257#issuecomment-60441477)。

# javascript - Ember.js 路由器/控制器属性

> ID：15903280
> 
> 赞同：2
> 
> 时间：2013-04-09T13:28:25.823
> 
> 标签：javascript, ember.js, ember-router

我试图围绕`model`属性或路由与`content`控制器的属性进行比较。如果您`model`在路由中设置属性，这是否会自动将其设置为`content`生成的控制器中的属性。

另外，我认为`content`控制器的属性允许您访问模板中该对象的属性，这是真的吗？

我阅读了文档，但仍然无法消化其中的一些约定。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T14:40:48.107

[**正如这里**](https://stackoverflow.com/questions/15886841/ember-working-with-a-model/15887046#15887046)回答的那样，`Ember.Route`有一个`model`功能允许您将一个对象或一组对象设置为该路由的模型。处理单个对象的路由应该有一个可以扩展的控制器，`Ember.ObjectController`而处理对象集合的路由应该有一个可以扩展的控制器`Ember.ArrayController`。随后，在`Route`工作流中，来自`model`钩子的数据通过钩子设置到控制器的`content`属性中`setupController`。

路由有自己的工作流程来设置它们的控制器，因此默认情况下会调用此方法并使用模型填充内容。考虑以下：

[**小提琴**](http://jsfiddle.net/schawaska/N3Z3h/)

```
App.Email = DS.Model.extend({
    address: DS.attr('string'),
    isActive: DS.attr('boolean')
});

App.Router.map(function() {
    this.resource('emails', function() {
        this.route('email', {path: ':email_id'});
    });
});

App.EmailsRoute = Ember.Route.extend({
    model: function() {
        return App.Email.find();
    }
});
App.EmailRoute = Ember.Route.extend({
    model: function(params) {
        return App.Email.find(params.email_id);
    }
});

App.EmailsController = Ember.ArrayController.extend();
App.EmailController = Ember.ObjectController.extend(); 
```

框架应该为这些路由生成默认代码以设置控制器，如下所示（如果需要，您可以覆盖）：

```
App.EmailsRoute = Ember.Route.extend({
    ...
    setupController: function(controller, model) {
        controller.set('content', model);
    }
    ...
}); 
```

在某些情况下（请参阅上面链接的问题/答案），您可能需要/想要覆盖这些方法以执行与默认功能不同的操作，例如：

[**小提琴**](http://jsfiddle.net/schawaska/vJENg/)

```
App.EmailsRoute = Ember.Route.extend({
    model: function(params) {
        return [{id: 1, address: 'other@email.com'}];
    },
    setupController: function(controller, model) {
        // here, controller is whatever controller this route needs
        // by conventions, it knows it should be EmailsController
        // of the type ArrayController
        // model is whatever was returned by the model function above

        // the content is a "bag" which can be filled with a model or any
        // other object you need. Just keep in mind your view layer will
        // be referring to this object later on
        controller.set('content', model);

        // you can set other properties of the controller here too
        controller.set('applyFilter', true);
    }
}); 
```

现在模板将能够访问控制器中的数据。下面的示例遍历`App.Email`. `EmailsController`此集合或其子对象中的任何公共属性都可以在此处访问，一个示例是`{{email.address}}`：

```
<script type="text/x-handlebars" data-template-name="emails">
    <ul>
    {{#each email in controller}}
        <li>
            {{#linkTo emails.email email}}
                {{email.address}}
            {{/linkTo}}
        </li>    
    {{/each}}
    </ul>
    {{outlet}}
</script> 
```

请注意，模板不是直接与模型对话，而是与`content`分配有来自模型的数据的模型对话。就像我说的那样，您可以通过路由将任何对象存储在内容或模型中，因此您不会被使用束缚，`DS.Model`架构也不会强耦合。

如果此模型而不是`App.Email`类型具有具有不同属性的不同类型，那么它也可以在此处访问，但有限制。如果模型的一个属性是一个集合，它就不能通过索引访问（例如`{{email.messages[0].body}}`不能工作）。在这种情况下，最好的做法是控制器中的计算属性，它可以让您直接访问电子邮件消息集合的第一项（如果有的话）。

# jquery - 制作一棵树，突出显示父母和路径

> ID：15903286
> 
> 赞同：5
> 
> 时间：2013-04-09T13:28:34.863
> 
> 标签：jquery, html, css

我想做一些花哨的菜单显示为树，我们可以很容易地看到每个页面与其父页面之间的关系。

离工作不远，但我需要你的帮助和想法。

这是我所做的：http: [//jsfiddle.net/bXCHn/6/](http://jsfiddle.net/bXCHn/6/)

因此，例如，如果您将鼠标悬停在“第 4 - 3 - 2 页”上，它将突出显示“第 4 - 3 页”和“第 4 页”。这是基本的 HTML 和 CSS，如果您删除 jQuery 脚本，它仍然可以工作。

jQuery 允许我们添加一个类，该类将突出显示`li`树中每个先前元素的路径（边框）。它不会考虑第一级导航：

```
$(this).prevAll('li:not(.first-lvl-item)').addClass('hover-prev-item'); 
```

现在保持与上面相同的示例。您会看到从“第 4 页”开始的第一行走得太远了（实际上它使用了整个`li`元素）。我希望它停在“第 4 - 3 页”前面...

我不知道我是否必须改变我的所有结构，或者我是否应该以其他方式处理它。我尝试了很多东西，但没有任何效果......

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:02:56.000

我创建了一个小提琴，如果没有 Javascript，突出显示将无法工作。不是很好，但它有效。

如图所示，仅支持 CSS3 选项 nth-of-type，此解决方案也是如此：

```
 Feature        Chrome  Firefox (Gecko) Internet Explorer   Opera   Safari
 Basic support  1.0     3.5 (1.9.1)     9.0                 9.5     3.1 
```

我对设计进行了返工，并基于我放在前面的跨度数量来计算级别:) [http://jsfiddle.net/bXCHn/10/](http://jsfiddle.net/bXCHn/10/)

还剩下什么？重构我使用 nth-of-type 选择器的方式并尝试通过 javascript 完成它。目前，它只支持您在 CSS 文件中定义的深度级别。

# css - 我们应该并且可以缩小电子邮件中的 css

> ID：15903295
> 
> 赞同：1
> 
> 时间：2013-04-09T13:28:52.283
> 
> 标签：css, email, html-email

我在我的网站上使用[http://htmlemailboilerplate.com/发送电子邮件。](http://htmlemailboilerplate.com/)我在问自己是否可以将电子邮件中的 css 缩小为喜欢 1 行，或者是否不应该修改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:35:44.790

好吧，代码有大量的注释。由于它是用于生产的，因此至少删除评论是好的。

完全缩小它没有*害处*。也没有真正的需要，如果你愿意，你可以做到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T13:35:46.063

在这种情况下，我会使用呈现的 CSS 代码。如果样板团队这样放代码，那么他们这样做是有充分理由的*，也因为他们也测试和调试了他们的代码*。我至少会说，如果您的团队中没有其他人需要阅读过多的评论，那么删除这些评论可能是安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T17:02:43.210

您可以通过将多个内容放在单行上来压缩代码，但是您将从简单地删除多余的注释部分中获得最大的好处。这是我压缩的部分样板的示例，以缩短一点：

```
 /* Hotmail */
  .ExternalClass {width:100%;} .ExternalClass, .ExternalClass p, .ExternalClass span, .ExternalClass font, .ExternalClass td, .ExternalClass div {line-height: 100%;}
  h1, h2, h3, h4, h5, h6 {color: black !important;} h1 a, h2 a, h3 a, h4 a, h5 a, h6 a {color: blue !important;}
  h1 a:active, h2 a:active,  h3 a:active, h4 a:active, h5 a:active, h6 a:active { color: red !important; } h1 a:visited, h2 a:visited,  h3 a:visited, h4 a:visited, h5 a:visited, h6 a:visited { color: purple !important; }
  /* Outlook */
  table td {border-collapse: collapse;} #outlook a {padding:0;} #backgroundTable {margin:0; padding:0; width:100% !important; line-height: 100% !important;}
  /* Yahoo */
  p {margin: 1em 0;} 
```

# java - http post响应给出了以前的结果

> ID：15903301
> 
> 赞同：0
> 
> 时间：2013-04-09T13:29:10.140
> 
> 标签：java, android, titanium, appcelerator, titanium-modules

1.  我在 Titanium 项目的 android 模拟器中调用此服务方法。
2.  得到适当的回应
3.  然后再次使用不同的数据调用此服务方法。
4.  得到相同的响应（我在步骤 2 中得到）
5.  第二个请求未到达服务器
6.  一些位于缓存内存中并给出相同响应的先前响应
7.  这里需要设置什么参数吗？

注意：我已将此代码编写为 Titanium 模块项目并从 Titanium 项目中调用。

```
protected final void callService(final byte[] data) throws IOException {
    OutputStream outputStream = null;
    DataOutputStream output = null;
    InputStream inputStream = null;
    String stringdata = "";
    try {

    String url = "http://localhost:8080/myproject/testService.do"
    HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
    urlConnection.setRequestProperty("Cookie", sessionId);
    urlConnection.setRequestMethod("POST");
    urlConnection.setDoInput(true);
    urlConnection.setDoOutput(false);
    urlConnection.setReadTimeout(200000);
    urlConnection.setConnectTimeout(200000);
    urlConnection.connect();

        outputStream = urlConnection.getOutputStream();
        output = new DataOutputStream(outputStream);
        // write the file data
        if (data != null) {
            output.write(data);
            stringdata = new String(data);
            Log.iTimer(TAG, "Data uploded to the server stream");
        }
        inputStream = connection.getInputStream();
        String outData = inputStream.toString();
        System.out.print(outData);
    } catch (Exception exception) {
        e.printStackTrace();
    } finally {
        if (output != null) {
            output.flush();
            // Close Output stream
            output.close();
        }
        if (outputStream != null) {
            outputStream.close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:33:09.833

不确定它在这里是否有帮助，但你可以试试这个：

```
urlConnection.setUseCaches(false); 
```

# oracle - 创建前触发获取表空间查询？

> ID：15903302
> 
> 赞同：0
> 
> 时间：2013-04-09T13:29:12.067
> 
> 标签：oracle, triggers, tablespace

我想在使用触发器创建表空间之前获取查询。通过网络搜索没有提供足够的信息。因此，如果有人对此有所了解，那将是一个很大的帮助。

我有一个过程`xyz`，我想在创建表空间之前调用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:00:37.440

11.2 文档并未明确禁止在创建表空间时使用 DDL 触发器，但在创建数据库或控制文件时确实如此：http: [//docs.oracle.com/cd/E11882_01/appdev.112/e25519/create_trigger.htm#CIHGCJHC](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/create_trigger.htm#CIHGCJHC)。

因此，没有任何迹象表明它不能完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:28:48.067

最后想出了一个有效的触发器：

```
set serveroutput on;
CREATE OR REPLACE TRIGGER ddl_trig
BEFORE CREATE
ON DATABASE
DECLARE
    sql_text   DBMS_STANDARD.ora_name_list_t;
    v_stmt VARCHAR2(2000);
    n   PLS_INTEGER;
BEGIN
    IF (ora_dict_obj_type = 'TABLESPACE' ) AND (ora_sysevent = 'CREATE') THEN 
        n := ora_sql_txt(sql_text);
        FOR i IN 1..n LOOP
            v_stmt := v_stmt || sql_text(i);
        END LOOP;
        dbms_output.put_line('------------Query Used---------------');
        dbms_output.put_line(v_stmt);
    END IF;
END ddl_trig;
/

show errors; 
```

[从Oracle Doc](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/triggers.htm)获得事件列表。我衷心感谢@David @Steve 的指点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T13:46:03.367

我可能是错的，但我认为您不能专门捕获 CREATE TABLESPACE：您**可以**创建一个 DDL 触发器，该触发器将捕获所有 CREATE 事件，但您必须进行一些检查以确保它是一个表空间创建。请记住，每次事件发生时都会为每个用户执行触发器，因此要非常小心。

[这里](http://psoug.org/reference/ddl_trigger.html)有几个 DDL 触发器示例

# android - XML 线性布局垂直

> ID：15903303
> 
> 赞同：0
> 
> 时间：2013-04-09T13:29:15.430
> 
> 标签：android, xml, android-linearlayout, android-relativelayout

下面你会看到我的 xml：我有一个 <linearlayout> <relativelayout/></linearlayout> 层次结构

我唯一想要的是所有图像+文本都垂直放置在彼此下方+水平集中在屏幕上..我尝试了太多xml来达到这个结果，但没有任何效果..

第一个问题是 relativelayout 中的 textswitcher 将自身放置在 relativelayout 中的 imageswitcher 旁边。

第二个问题是 < /relativelayout> 之后的 imageswitcher + textswitcher 不会出现在屏幕上... :(

（我需要在线性布局中使用这个相对布局，因为我为相对布局设置了动画并且无法删除它）

感谢您的帮助！！

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/layoutid"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:gravity="center_horizontal"
android:background="@drawable/background_donker" >

  <ImageView
    android:id="@+id/wolkanim"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:adjustViewBounds="true"
    android:src="@anim/wolkanimation" />

    <RelativeLayout
    android:id="@+id/layoutid2"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
     android:gravity="center_horizontal"
    >

    <ImageSwitcher
        android:id="@+id/imageswitchertrein"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:inAnimation="@anim/fade_in"
        android:outAnimation="@anim/fade_out"
        />

        <TextSwitcher
        android:id="@+id/textswitcherafstandtekst"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
      android:layout_centerInParent="true"
        android:inAnimation="@anim/fadenieuw"
        android:outAnimation="@anim/fadenieuwout"
        android:textSize="40sp" />

     </RelativeLayout>

   <ImageSwitcher
     android:id="@+id/imageswitcherspoor"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:inAnimation="@anim/fade_in"
     android:outAnimation="@anim/fade_out"
     android:src="@drawable/spoor" >
    </ImageSwitcher>

     <TextSwitcher
    android:id="@+id/textswitcherstationnaam"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
    android:inAnimation="@anim/fadenieuw"
    android:outAnimation="@anim/fadenieuwout" 
       />

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:50:55.640

您的第一个问题是`RelativeLayout`正在填充`LinearLayout`，因此您的 RL 中的所有内容都在您的 LL 内容之上。此外，与`LinearLayout`将下一个孩子向下或向右推不同的是，`RelativeLayout`孩子需要定义定位，例如`android:layout_below="@+id/..."`或边距设置。

当我填充布局中每个元素的内容时，以下代码将起作用。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layoutid"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/background_donker"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/wolkanim"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:adjustViewBounds="true"
        android:src="@anim/wolkanimation" />

    <RelativeLayout
        android:id="@+id/layoutid2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal" >

        <ImageSwitcher
            android:id="@+id/imageswitchertrein"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:inAnimation="@anim/fade_in"
            android:outAnimation="@anim/fade_out" />

        <TextSwitcher
            android:id="@+id/textswitcherafstandtekst"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/imageswitchertrein"
            android:layout_centerInParent="true"
            android:inAnimation="@anim/fadenieuw"
            android:outAnimation="@anim/fadenieuwout"
            android:textSize="40sp" />
    </RelativeLayout>

    <ImageSwitcher
        android:id="@+id/imageswitcherspoor"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:inAnimation="@anim/fade_in"
        android:outAnimation="@anim/fade_out"
        android:src="@drawable/spoor" >
    </ImageSwitcher>

    <TextSwitcher
        android:id="@+id/textswitcherstationnaam"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:inAnimation="@anim/fadenieuw"
        android:outAnimation="@anim/fadenieuwout" />

</LinearLayout> 
```

# sql - SQL 游标中的动态表名

> ID：15903304
> 
> 赞同：0
> 
> 时间：2013-04-09T13:29:25.837
> 
> 标签：sql, sql-server

@Table_R nvarchar(50)

```
FETCH NEXT FROM M_cursor INTO @M_col    

PRINT 'Mandatory Feilds ' + @M_col 

Select count(*) from @Table_R where @M_col is null'    

FETCH NEXT FROM M_cursor INTO @M_col 
```

我会将表名作为参数'@Table_R'发送，但在游标中会引发错误。

1.  如何在 Sql 游标中使用动态表。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:31:50.817

您应该使用动态 sql 命令 sp_executesql ( [http://msdn.microsoft.com/en-us/library/ms188001.aspx](http://msdn.microsoft.com/en-us/library/ms188001.aspx) )。参见示例：

```
DECLARE @A numeric
EXEC SP_EXECUTESQL N'Select @a=count(*) from '+ @Table_R+ ' where ' + @M_col + ' is null',
      N'@A numeric OUTPUT', 
      @A OUTPUT; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:37:10.793

代替

```
Select count(*) from @Table_R where @M_col is null 
```

和

```
EXEC('Select count(*) from '+@Table_R+' where '+@M_col+' is null') 
```

# r - 从 R 中的出现数据创建二进制矩阵

> ID：15903305
> 
> 赞同：1
> 
> 时间：2013-04-09T13:29:26.093
> 
> 标签：r, statistics, binary-data

我正在尝试为跨时间序列的调查场合的多个人创建一个二元出现矩阵。源数据是一个数据帧，其中包含一个个人 ID 字段和一个与该个人的正面事件相对应的场合编号字段。我需要在输出矩阵中保留个人 ID。请注意，多次出现阳性的个体在源数据集中出现 >1 次。我尝试改编[上一篇文章](https://stackoverflow.com/questions/8981677/how-to-create-a-binary-matrix-of-inventory-per-row-r)中的代码，但我无法让它工作。

这是示例源数据和所需矩阵的片段：

资源：

```
ID1   1
ID1   3
ID1   7
ID2   4
ID3   2
ID3   6
ID4   8 
```

输出：

```
ID1   10100010
ID2   00010000
ID3   01000100
ID4   00000001 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:58:17.703

我给了你的数据名称：

```
names(dat) <- c("id", "num") 
```

为了解决这个问题，我做了一个快速函数，它生成一个长度为 8 的向量，并用 1 填充适当的点。

```
rep8 <- function(x){
  zeroes <- rep(0, 8)
  zeroes[x] <- 1
  zeroes
} 
```

然后将此函数应用于每个 id 并将`rbind`它们应用于矩阵

```
do.call(rbind, tapply(dat$num, dat$id, rep8))

    [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
ID1    1    0    1    0    0    0    1    0
ID2    0    0    0    1    0    0    0    0
ID3    0    1    0    0    0    1    0    0
ID4    0    0    0    0    0    0    0    1 
```

# sql-server - Visual Studio 一直提示 SQL Server 连接

> ID：15903306
> 
> 赞同：5
> 
> 时间：2013-04-09T13:29:32.750
> 
> 标签：sql-server, visual-studio-2012

Visual Studio 2012 不断提示我建立 SQL Server 连接（重复），这很烦人。当我打开我的解决方案时会发生这种情况（甚至在我运行它之前）。

我的同事没有从 TFS 源代码控制中获得相同的解决方案。

我已经尝试在所有文件中搜索显示的服务器/数据库，但没有任何回复。

这阻碍了我做任何工作的努力。

![在此处输入图像描述](https://i.stack.imgur.com/R30EH.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-23T08:15:46.053

我有类似的问题。我认为您拥有的是网络/应用程序配置中某处的存储数据连接，该连接无效，它想要不时连接。从 Visual Studio 转到服务器资源管理器。如果有您不需要的连接或旧的连接，请检查数据连接节点。删除数据连接，应该这样做。如果不检查其他无效连接

# java - 服务器/客户端 Android 程序无法在真正的 Android 设备上运行

> ID：15903308
> 
> 赞同：0
> 
> 时间：2013-04-09T13:29:34.317
> 
> 标签：java, android, sockets, client-server, wifi

我正在制作一个在它们之间发送和接收数据的服务器/客户端程序。该程序在模拟器上运行良好，但是在通过 WIFI 在真正的 android 设备上测试时，它无法连接到服务器。

服务器端

```
ServerSocket serverSocket = new ServerSocket(44444);
Socket clientSocket = serverSocket.accept(); 
```

客户端

```
Socket socket = new Socket("192.168.1.2", 44444); 
```

问题不在于发送数据，而在于建立连接。那部安卓手机看不到服务器端！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:35:18.950

您正在使用一个构造函数，它需要一个字符串*hostname*。但是，您提供的是 Internet 地址。您必须使用另一个[构造函数](http://developer.android.com/reference/java/net/Socket.html#Socket%28java.net.InetAddress,%20int%29)，它接受地址作为参数。

在客户端尝试以下代码：

```
Socket socket = new Socket (InetAddress.getByName ("192.168.1.2"), 44444); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:05:52.503

您确定您的服务器对您的智能手机可见吗？...您可以尝试将 pc 连接到 WIFI 并使用 telnet ip 端口并验证您是否可以访问服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-06T18:23:56.347

Android 设备无法检测到 Windows 的 ad-hoc 网络，您必须首先通过以下操作使您的 PC 成为热点：

第 1 步：打开 CMD（管理员权限）并运行以下命令 netsh wlan hostsnetwork mode=allow ssid=NAME key=PASSWORD

这将使 wifi ，一个热点现在运行这个来启动 wifi 热点： netsh wlan start hostsnetwork

并停止热点运行此命令：netsh wlan stop hostsnetwork

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-09T13:32:40.810

问题出在您的网络中。请确保真正的安卓设备和您的服务器（`192.168.1.2`）在同一个网络中。

如果它们仅在同一网络中，则您可以从您的客户端与服务器通信

# windows - make 不被识别为内部或外部命令

> ID：15903313
> 
> 赞同：0
> 
> 时间：2013-04-09T13:29:46.660
> 
> 标签：windows, ruby-on-rails-3, gem, bundle

我正在使用 Windows-7。我安装了**Ruby 1.9.3p327**和**Rails 3.2.9**。

现在，我创建了一个项目，然后在命令提示符下运行命令，`"rails install json -v 1.7.7"`但出现以下错误

```
make
'make' is not recognized as an internal or external command,
operable program or batch file. 
```

什么是制造以及如何解决它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:16:00.550

您可以使用 vagrant ( [http://vagrantup.com](http://vagrantup.com) )，这将允许您使用 linux vm 来运行应用程序，并且您可以在 windows 中进行所有开发。

# c# - 使用自定义 ValidationResult 处理数据注释验证

> ID：15903316
> 
> 赞同：3
> 
> 时间：2013-04-09T13:29:50.017
> 
> 标签：c#, validation, inheritance, attributes, base

我有一个像这样的自定义 ValidationAttribute ：

```
 public class ReceiverRegion : ValidationAttribute
    {
        private RegionService regionService;
        private CityService cityService;

        public ReceiverRegion() : base("Incorrect region code")
        {
            this.regionService = new RegionService();
            this.cityService = new CityService();
        }

        protected override ValidationResult IsValid(object value, ValidationContext validationContext)
        {
            int regionId = Convert.ToInt32(value);
            int plate = Convert.ToInt32((validationContext.ObjectInstance as CorporateOrderItem).ReceiverCity);

            int productGroupId = Convert.ToInt32(validationContext.Items["productGroup"].ToString());

            if (!CheckReceiverRegionExistence(regionId, plate, productGroupId))
            {
                IEnumerable regions = this.regionService.GetList(cityService.GetByPlate(plate).PKCityId);

                return new CorporateOrderValidationResult(base.ErrorMessage, regions.Select(r=>r.Name));
            }
            return **CorporateOrderValidationResult.Success**;
        }

        private bool CheckReceiverRegionExistence(int plate, int regionId, int productGroup)
        {
            return !(regionService.GetByCityAndRegionIdForProductGroup(plate, regionId, productGroup) == null);
        }
    } 

```

但正如您在 IsValid 方法中看到的那样，我试图返回一个继承自 ValidationResult 的自定义对象。我的问题是，我无法访问我的`CorporateOrderValidationResult`实例的额外成员，因为 IsValid 返回基本 ValidationResult 类型。下面是我调用 validate 并获取 ValidationResult 集合作为返回值的代码。

```
 List results = new List();
bool isValid = Validator.TryValidateObject(instance, context, results, true); 
```

我尝试将 results 对象转换为`List<CorporateOrderValidationResult>`，但无论我尝试什么（例如 -->`item as CorporateOrderValidationResult`或者我得到 InvalidCastException`results.OfType<CorporateOrderValidationResult>()`或`(CorporateOrderValidationResult)item)`null 值。有没有可能的方法将此结果列表转换为我的自定义结果类的列表？谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:49:05.880

我试图重现这种行为，但一切都按预期工作：

```
public class TestClass
{
    [TestValidation]
    public string TestProp { get; set; }
}

public class TestValidationAttribute : ValidationAttribute
{
    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        return new TestResult();
    }
}

public class TestResult : ValidationResult
{
    public TestResult()
        : base("test")
    {
    }
} 
```

验证代码：

```
var instance = new TestClass();
var context = new ValidationContext(instance, null, null);
var results = new List<ValidationResult>();
bool isValid = Validator.TryValidateObject(instance, context, results, true);
//Contains one instance of TestResult
var customResults = results.OfType<TestResult>().ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-03T09:12:22.817

我知道这是个老问题，但是当您要求自定义`ValidationResult`课程时，首先会出现在 Google 中。Vyacheslav Volkov 提出的示例作品，但为什么呢？

我今天花了几个小时试图让我的代码正常工作 - 关键是：

`public TestResult(): base ("test")`

我根本不打算使用错误消息，为此我有自己的结构，所以我这样写了我的ctor：

`public TestResult() : base("")`- 发送到基类的空字符串会产生后果，文档中没有提到。`TryValidate()`方法不会将我们的对象插入到`results`集合中，因为它是由我们的版本返回的`IsValid()`，但会为该字段构建一个带有默认错误消息的新对象，例如`"Field " + fieldName + " is Invalid"`并放置它而不是我们想要的那个。

# actionscript-3 - 三个 MovieClip 按钮中有两个在使用 ActionScript 3.0 的帧动作中工作

> ID：15903317
> 
> 赞同：0
> 
> 时间：2013-04-09T13:29:57.693
> 
> 标签：actionscript-3, flash, adobe, flash-cs6

那么问题来了：

我创建了 3 个按钮符号，它们各自位于各自的 3 个动画剪辑符号中，并具有自己的实例名称。

在第 1 帧的动作框架中，我有以下代码：

```
stop();

codebutton.addEventListener(MouseEvent.MOUSE_UP, onReleaseCode);
titlebutton.addEventListener(MouseEvent.MOUSE_UP, onReleaseTitle);
audiencebutton.addEventListener(MouseEvent.MOUSE_UP, onReleaseAudience);

function onReleaseCode(e:MouseEvent):void {
 nextFrame();
}

function onReleaseTitle(e:MouseEvent):void {
 this.gotoAndPlay(187)
}

function onReleaseAudience(e:MouseEvent):void {
 this.gotoAndPlay(416)
} 
```

就像我说的，其中 2 个有效：*Audiencebutton*和*codebutton*。*标题按钮*没有。

我对 ActionScript 3.0 并没有真正的经验，如果有人能提供一些很棒的输入的话。

不可能因为我不使用标签而被窃听，是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:51:22.467

好吧，因为过去几周我一直在做这种事情，我至少可以列出需要检查的内容，以防出现问题。当然，如果您发布一些代码或告诉我们什么“不起作用”，它会更有效率。或者更确切地说，什么仍然有效。

无论如何，请确保：

1.  您的按钮已正确声明。titlebutton 是否链接到一个类，即精灵的文档类？确保通过编辑精灵的类来查看您是否真的最终进入了正确的类。

2.  仔细检查动画/精灵/补间的时间轴上是否存在位置 187。有时，我倾向于通过删除空符号来实际删除一些仓位。

3.  你的函数实际上被调用了。到处`trace`都是 - 函数。它看起来很酷，如果你把它展示给某人，它实际上看起来就像 Matrix 之类的东西。此外，它还可以帮助您跟踪应用程序中发生的事情。

# java - 故障转移后 JSF Bean 上的 @EJB 注入

> ID：15903318
> 
> 赞同：0
> 
> 时间：2013-04-09T13:30:00.333
> 
> 标签：java, jsf, ejb-3.0, weblogic-10.x

我正在使用 Weblogic 10.3.6、Mojarra 2.0.9 和 EJB3。我们有 @ViewScoped 和 @SessionScoped JSF 托管 bean，我们要求在服务器出现故障的情况下仍然可以继续使用。我刚刚破解了它，直到在 JSF Beans 上使用 EJB 注入遇到问题。这是简化的豆子

***EJB 接口***

```
@JNDIName("our.ejb.jndiname")
@Remote
public interface OurEJBInterface {

    some methods...

} 
```

***EJB Bean***

```
@Stateless
@TransactionManagement(TransactionManagementType.CONTAINER)
public class ourBean implements OurEJBInterface {

    the methods...
} 
```

***JSF 支持 Bean***

```
@ManagedBean
@ViewScoped
public class OurBackingBean  {

    @EJB
    private OurBeanBeanInterface ourBeanBeanInterface ;

    public void submit()
    {
        ourBeanBeanInterface.doSomethingFromBean(); 
    }

} 
```

当我们模拟故障转移时，会从新服务器正确检索会话，但是对 EJB 的引用仍然指向旧服务器，我们会收到以下错误：

```
javax.ejb.EJBException: Could not establish a connection with -1977369784351278190S:MCPVMWLS01:[7030,7030,-1,-1,-1,-1,-1]:Destin8ShowCase:JVM01, java.rmi.ConnectException: Destination unreachable; nested exception is: 
    java.io.IOException: Empty server reply; No available router to destination; nested exception is: 
    java.rmi.ConnectException: Destination unreachable; nested exception is: 
    java.io.IOException: Empty server reply; No available router to destination; nested exception is: java.rmi.ConnectException: Destination unreachable; nested exception is: 
    java.io.IOException: Empty server reply; No available router to destination
java.rmi.ConnectException: Destination unreachable; nested exception is: 
    java.io.IOException: Empty server reply; No available router to destination
    at weblogic.rjvm.ConnectionManager.bootstrap(ConnectionManager.java:470)
    at weblogic.rjvm.ConnectionManager.bootstrap(ConnectionManager.java:402)
    at weblogic.rjvm.RJVMImpl.ensureConnectionEstablished(RJVMImpl.java:306)
    at weblogic.rjvm.RJVMImpl.getOutputStream(RJVMImpl.java:350)
    at weblogic.rjvm.RJVMImpl.getRequestStreamInternal(RJVMImpl.java:612)
    at weblogic.rjvm.RJVMImpl.getRequestStream(RJVMImpl.java:563)
    at weblogic.rjvm.RJVMImpl.getOutboundRequest(RJVMImpl.java:789)
    at weblogic.rmi.internal.BasicRemoteRef.getOutboundRequest(BasicRemoteRef.java:159)
    at weblogic.rmi.internal.BasicRemoteRef.invoke(BasicRemoteRef.java:211)
    at com.mcpplc.destin8.ejbs.manifestenquiry.ManifestEnquiryFacadeBean_qzni2o_ManifestEnquiryFacadeBeanInterfaceImpl_1036_WLStub.doMEQ02(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at weblogic.ejb.container.internal.RemoteBusinessIntfProxy.invoke(RemoteBusinessIntfProxy.java:85)
    at $Proxy286.doMEQ02(Unknown Source)
    at com.mcpplc.destin8.web.jsf.backingbeans.imports.Meq02BackingBean.customProcessing(Meq02BackingBean.java:49)
    at com.mcpplc.destin8.web.jsf.backingbeans.BackingBean.submit(BackingBean.java:179) 
```

有没有办法让托管 Bean 重新初始化指向新服务器的新 EJB 引用？

我知道我可以使用将 init 放在提交方法中的服务定位器，但如果可能的话，我想使用 @EJB。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:09:38.867

我来自 JBoss 世界，所以我对此并不完全确定。但是你真的可以用那种方式注入一个远程接口吗？我认为必须定义一个查找。但是，对于本地接口，您的呼叫应该可以工作。如果你使用远程接口，你应该使用

`@EJB(lookup="jnp://wholeclustername/YourBean/remote")`

并且您的 DNS 必须将您的网络指向两台机器。

另一种可能的解决方法是@Produce-method 和@Inject，您可以在其中在生产者方法中进行查找。

编辑：

是的，很不幸的。我也时不时面临这些黑客攻击:(

也许还有另一种解决方法或解决方案，我对Weblogic不够坚定。如果您想将它与源分离，您还可以使用拦截器并在每次调用时注入一个 slsb 实例，可能是因为您的故障转移，它也可以与 @PostConstruct 一起使用。我不知道：

`public class LookUpEJBInterceptor {`

 ````
@AroundInvoke
public Object around(InvocationContext ctx){
    try {
        Class<?> clazzOfEJBImplementation = ctx.getTarget().getClass();
        //look for your field, I just check for the EJB annotation but that's not enough
        for (Field f : clazzOfEJBImplementation.getDeclaredFields()){
            if(f.isAnnotationPresent(EJB.class)){
                f.setAccessible(true);
                f.set(ctx.getTarget(), lookupEJB());
            }
        }

        return ctx.proceed();
    } catch (Exception e) {
        e.printStackTrace();
        throw new EJBException();
    }

}

/**
 * get your ejb
 * 
 * @return
 * @throws NamingException
 */
private Object lookupEJB() throws NamingException{
    return new InitialContext().lookup("Your ejb lookup");
} 
````  `第二次编辑：

如果你可以使用 AspectJ，你可以像这样构建一个 hack：

 `````
pointcut checkEJB(OurEJBInterface r): call(void OurEJBInterface.yourVoid()) && target(r);

void around (OurEJBInterface r) : yourVoid(r){
    r = lookupYourEJB();
    return proceed(r);
}

private Object lookupEJB() throws NamingException{
    return new InitialContext().lookup("Your ejb lookup");
} 
````  `但两者都只是黑客

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T13:26:44.327

经过一些试验和错误后设法解决了这个问题。由于 Jan 躲避我的设置，只注入了一个本地 jndi 名称。为了确保返回的 EJB 代理是全局的，我需要`@JNDIname`从接口中删除注释并为`@stateless`和`@ejb`注释提供映射名称

```
@Stateless(mappedName = "MyFacadeBean")

@EJB(mappedName = "MyFacadeBean")
private MyFacadeBean myFacadeBean; 
``````

# android - 如何将 AnimationDrawable 设置为标记？

> ID：15903324
> 
> 赞同：0
> 
> 时间：2013-04-09T13:30:11.203
> 
> 标签：android, google-maps-markers, google-maps-android-api-2, marker, animationdrawable

我想在 Google Map v2 上将 AnimationDrawable 作为图像添加到我的标记中，但这似乎不太可能。有谁知道 MyLocation 蓝色闪烁圆圈是如何在 Android Google Maps 中实现的，或者我如何添加一个动画可绘制对象作为标记？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:18:44.610

截至 2013 年 2 月发布，您不能。

gmaps-api-issues 上有功能请求添加动画或在创建标记后更改图标的可能性。

一种解决方法是创建多个具有相同位置的标记，并一次在其中一个上设置可见，但如果您使用信息窗口，这将无法正常工作。

**编辑：**

您现在可以使用`Marker::setIcon`，但信息窗口仍然存在问题。

# oracle - oracle 中函数 TZ_OFFSET 的返回数据类型是什么？

> ID：15903325
> 
> 赞同：2
> 
> 时间：2013-04-09T13:30:12.710
> 
> 标签：oracle, timezone, timestamp, return, sqldatatypes

oracle 中函数 TZ_OFFSET 的返回数据类型是什么？

例如，

```
select tz_offset(DBTIMEZONE) from dual; 
```

-04:00

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T13:46:14.963

看起来是这样的`VARCHAR2`：

```
SQL> SELECT TZ_OFFSET('UTC'), DUMP(TZ_OFFSET('UTC')) FROM DUAL;

TZ_OFFS DUMP(TZ_OFFSET('UTC'))
------- --------------------------------
+00:00  Typ=1 Len=7: 43,48,48,58,48,48,0 
```

`Typ=1`表示`VARCHAR2`，但请注意 ASCII 转储的`,0`末尾有 。这意味着字符串具有`\0`-type 终止符。对于 a 通常不是这种情况，`VARCHAR2`但我仍然会将其视为通用字符串类型。

这可能因字符集而异；我不确定。我上面运行的查询是针对带有`NLS_CHARACTERSET`=`WE8MSWIN1252`和`NLS_NCHAR_CHARACTERSET`=的 Oracle 实例`AL16UTF16`。

* * *

**附录**- 后续问题询问如何将`TZ_OFFSET`输出转换为数字。就是这样：

1.  将小时部分转换为数字
2.  将分钟部分转换为数字并除以 60
3.  将两个值相加
4.  处理偏移量的符号（+ 或 -）

**注意**：*在意识到它不适用于包括分钟的负时区偏移后，我更新了它。例如，我的原始方程式（现在已删除）将转换`-03:30`为`-2.5`而不是`-3.5`*.

这是完整的命令：

```
SIGN(TO_NUMBER(SUBSTR(TZ_OFFSET('whatever'), 1, 3))) * (
  TO_NUMBER(SUBSTR(TZ_OFFSET('whatever'), 2, 2)) +
  TO_NUMBER(SUBSTR(TZ_OFFSET('whatever'), 5, 2)) / 60
) 
```

请注意，第三个`SUBSTR`指定“从位置 5 开始的 2 个字符”（`SUBSTR(..., 5, 2)`）。通常你会说“从位置 5 到字符串的结尾”（`SUBSTR(..., 5)`），但这将包括奇怪的尾随空字符（`\0`，如 中所示`DUMP`），这将导致错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:51:14.977

至少 JDBC 驱动程序将其报告为`VARCHAR(7)`

![在此处输入图像描述](https://i.stack.imgur.com/QCAdl.png)

而且基于价值，没有其他的可能。没有其他数据类型可以让您在不应用某些格式的情况下组合数字和前导零。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-19T20:12:46.587

关于什么：

```
SUBSTR(TZ_OFFSET('whatever'), 1, 3) + SUBSTR(TZ_OFFSET('whatever'), 5, 2) / 60 
```

将偏移量转换为数字？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-27T19:39:39.677

正如[ed-gibbs](https://stackoverflow.com/users/2091410/ed-gibbs)所说，它看起来像一个 VARCHAR2，末尾有一个 \0。以下是根据时区偏移量搜索时区名称的方法

```
SELECT distinct tzname,SUBSTR(tz_offset(tzname),1,6) FROM V$TIMEZONE_NAMES WHERE SUBSTR(tz_offset(tzname),1,6) = '-04:00' order by tzname; 
```

# linux - 是否可以在使用 netif_stop_queue 阻止网络接口时传输数据包？

> ID：15903326
> 
> 赞同：1
> 
> 时间：2013-04-09T13:30:13.490
> 
> 标签：linux, networking, network-programming, linux-kernel, linux-device-driver

我正在尝试使用可加载的内核模块为 wifi 网状网络实现时隙排队算法。在某些时隙中，允许来自较高层的数据包通过`wlan`接口，而在剩余的时隙中，它们必须排队，以便在稍后的时隙中传输。我尝试了`netif_stop_queue`和`netif_wake_queue`API 来阻止并稍后解除阻止接口，到目前为止，这一直工作正常。

现在是困难的部分：我需要在所有插槽期间通过 wlan 交换一些控制数据包，即使在那些使用 .wlan 接口被阻塞的插槽期间也是如此`netif_stop_queue`。`dev_queue_xmit`正如预期的那样，在这些插槽期间失败。我什至尝试调用 wlan 驱动程序的`ndo_start_xmit`（传统上`hard_start_xmit`）函数指针，但没有任何后果。您能否指出一些方法/链接，我可以通过这些方法/链接绕过设备的传输队列并在线发送数据包？

谢谢

# c# - EWS 托管 API：更新/保存后获取 LastModifiedTime

> ID：15903328
> 
> 赞同：3
> 
> 时间：2013-04-09T13:30:19.113
> 
> 标签：c#, exchange-server, exchangewebservices

我正在与 Excahnge-Webservices 同步一些联系人。

我必须知道是否在服务器上更改了联系人。为此，我想在更新后阅读 LastModifiedTime。

Atm 我通过将项目与特殊的属性集绑定来做到这一点。

但这会减慢我的通话速度。

有没有办法在没有新绑定的情况下读取 LastModifiedTime ON Update/Save？

```
// Save the contact.
contact.Update(ConflictResolutionMode.AlwaysOverwrite);

PropertySet ps = new PropertySet(BasePropertySet.IdOnly);
ps.Add(ItemSchema.LastModifiedTime);
contact = Contact.Bind(service, contact.Id.UniqueId, ps); // rebind the item to get the LastModifiedTime

lastServerModificationDate = contact.LastModifiedTime; 
```

# javascript - 电话间隙存储

> ID：15903329
> 
> 赞同：0
> 
> 时间：2013-04-09T13:30:20.583
> 
> 标签：javascript, android, cordova, local-storage

**介绍**

我已经度过了一整天，但我只是不明白我的 phonegap 应用程序中发生了什么。

在我的应用程序中，我使用 phonegap 的本地存储来存储从网页检索到的新闻消息。我这样做是因为我希望用户能够离线观看内容。

当他们上线时，应用程序只会将其最后更新日期发送到网站，网站只会将更改的记录发回，应用程序将其再次存储在本地数据库中。

这一切都很好，除了第一次加载数据时。

**问题**

当我第一次启动该应用程序时，它需要用网站上可用的所有记录填充数据库。（201 行）但是当我尝试加载超过 39 条消息时，它会创建一个未定义的 sql 错误。

但是，我可以更改 php 脚本，因此它只会发送 39 个结果。应用程序第一次加载后，我可以再次更改脚本，这样它就会发送所有记录，并且可以完美运行。

让问题更加复杂的是，在我的应用程序每次启动时，所有表都会被删除并重新创建（当然这仅用于开发目的，最终版本中不会包含删除）。重新启动应用程序后，它将毫无问题地加载 201 条记录。

要再次重现该问题，我必须完全卸载该应用程序，然后重新安装。

**代码**

存储结果的代码：

```
var q = 'INSERT OR REPLACE INTO NIEUWS (id, title, introtext, catid) VALUES (?, ?, ?, ?)';
var len = contents.length;
for (var i=0; i<len; i++){
    tx.executeSql(q, [contents[i].id, contents[i].title, contents[i].introtext, contents[i].catid]);
} 
```

启动代码：

```
tx.executeSql('DROP TABLE IF EXISTS NIEUWS');
tx.executeSql('CREATE TABLE IF NOT EXISTS NIEUWS (id PRIMARY KEY, title TEXT, introtext TEXT, catid INTEGER)'); 
```

我真的希望这个问题对你们中的一些人有意义，因为我现在完全迷路了。

提前致谢！

**编辑 1** 只是试图只保存 id 和 title，这没有任何问题。

```
var q = 'INSERT OR REPLACE INTO NIEUWS (id, title) VALUES (?, ?)';
var len = contents.length;
for (var i=0; i<len; i++){
    tx.executeSql(q, [contents[i].id, contents[i].title]);
} 
```

**编辑2** 重写代码等待回调，同样的错误仍然存​​在。

```
function HandleNewsQuery(tx){
    var q = 'INSERT OR REPLACE INTO NIEUWS (id, title, introtext, catid) VALUES (?, ?, ?, ?)';
    if(c < contents.length){
        tx.executeSql(q, [contents[c].id, contents[c].title, contents[c].introtext, contents[c].catid], HandleNewsQuery, errorCB);
        c++;
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:37:12.607

我认为您必须将以下 SQL 语句作为前一个 SQL 语句的回调，而不是使用“for”循环它们。

目前无法提供示例，抱歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:55:10.777

经过三天的研究，我终于找到了解决方案。我的数据库没有声明足够大：

```
var db = window.openDatabase("test", "1.0", "Test DB", 200000); 
```

大小以字节为单位，所以实际上这个数据库只有 200KB

我将其更改为：

```
var db = window.openDatabase("test", "1.0", "Test DB", 20000000); 
```

这是20MB。

我仍然不明白为什么问题只存在于第一次加载数据时。

谢谢大家的思考！

# php - 如何限制 Magento 中未登录用户对页面的访问

> ID：15903337
> 
> 赞同：1
> 
> 时间：2013-04-09T13:30:38.640
> 
> 标签：php, magento

我想限制未登录用户对 Magento 中特定静态页面的访问。有没有人有办法解决吗。我查看了一些扩展（[http://www.magentocommerce.com/magento-connect/MageParts/extension/3842/restrict_cms_pages](http://www.magentocommerce.com/magento-connect/MageParts/extension/3842/restrict_cms_pages)和[http://www.magentocommerce.com/magento-connect/advanced-permissions.html](http://www.magentocommerce.com/magento-connect/advanced-permissions.html)），但是我真正需要的要简单得多。有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T13:41:07.220

您需要创建自己的模块并重写`Mage_Cms_PageController`控制器（位于 app/code/core/Mage/Cms/controllers/PageController.php 中）。

这是有关如何执行此操作的教程：http: [//www.magentocommerce.com/wiki/5_-_modules_and_development/0__-_module_development_in_magento/how_to_overload_a_controller](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/how_to_overload_a_controller)

因此，您创建自己的模块，比方说`CustomCms/PageAccess`. 您将需要具有以下控制器：

```
class CustomCms_PageAccess_PageController extends Mage_Cms_PageController
{
    public function viewAction()
    {
        $pageId = $this->getRequest()->getParam('id', false);
        if (Mage::getSingleton('customer/session')->isLoggedIn() || $this->publiclyVisible($pageId) ) {
            parent::viewAction(); // default action
        } else {
            $this->_forward('noRoute'); // 404
        }
    }

    /*
     * this function should be in a helper
     * !!! Return false if the page should be visible only to logged in users !!!
     * @return bool
     */ 
    public function publiclyVisible($pageId) {
        return true; // here is where you check the page id
    }
} 
```

如果除此之外，您想直接从管理面板设置哪些页面是公开可见的或受保护的，您需要在编辑 cms 页面中添加一个自定义字段。

这是有关如何执行此操作的教程：http: [//blog.flexishore.com/2011/08/add-custom-field-to-cms-page/](http://blog.flexishore.com/2011/08/add-custom-field-to-cms-page/)

之后，需要修改`publiclyVisible`函数：

```
 public function publiclyVisible($pageId) {
        $page = Mage::getModel('cms/page')->load(intval($pageId));
        // I'm asuming the new field is is_publicly_visible
        return (bool)$page->getIsPubliclyVisible(); 
    } 
```

**笔记：**

我没有测试我链接的教程，但浏览了它们，似乎还不错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T17:23:20.763

我最近介绍了创建[一个新的 Magento 客户页面](http://alanstorm.com/magento_create_customer_page)（自链接）。虽然教程本身对您的需求来说有点繁重，但它确实有一段神奇的代码来检查用户是否登录。

因此，假设您的“静态页面”在 Magento 环境中运行，下面的 PHP 代码应该可以让您到达您想去的地方。

```
if(Mage::getSingleton('customer/session')->isLoggedIn())
{
    var_dump("Is Logged In");
}
else
{
    var_dump("In Not Logged in.  Exit or redirect or something.");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T17:50:13.973

Magento 中的任何页面都会有一个 MOdule 一个控制器和一个动作函数。

对于控制器操作功能中的特定页面，您应该应用一个代码来检查客户是否登录。如果未登录，则重定向到其他页面。

```
if(Mage::getSingleton('customer/session')->isLoggedIn())
{
    continue...
}
else
{
    redirect....
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-18T17:56:28.630

我不知道这个答案是否仍然相关，但是有一个免费的 Magento 扩展程序可以满足您的需求。它称为登录检查。

[http://www.magentocommerce.com/magento-connect/login-check.html](http://www.magentocommerce.com/magento-connect/login-check.html)

# java - 需要帮助来构建查询

> ID：15903341
> 
> 赞同：0
> 
> 时间：2013-04-09T13:30:49.417
> 
> 标签：java, oracle10g

我正在尝试为具有很多字段的高级搜索编写逻辑。根据用户输入，我必须动态构建查询。oracle 查询也有存在子句。

目前，我有一系列 switch case 可以帮助我形成查询。但这已成为非常复杂的过程，编辑构建查询的逻辑变得非常困难。

除了 switch case 之外，还有其他方法可以动态构建查询。请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:35:06.217

只是`1=1`在 where 子句中添加通用建议会使事情变得更容易。
这可能会有所帮助[为什么有人会在 SQL 子句中使用 WHERE 1=1 AND <conditions> ？](https://stackoverflow.com/questions/242822/why-would-someone-use-where-1-1-and-conditions-in-a-sql-clause)
PS：还要用具体问题更新您的问题，否则很可能会被关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:57:26.707

有 EasyQuery ( [http://devtools.korzh.com/easyquery/](http://devtools.korzh.com/easyquery/) ) 解决方案，但据我所知，它是为 ASP.NET 实现的。但是，他们有一个基于 jQuery 的客户端库，在您的情况下可能很有用。

# oracle - 如何优化更新语句

> ID：15903346
> 
> 赞同：0
> 
> 时间：2013-04-09T13:31:09.417
> 
> 标签：oracle

```
UPDATE UMSD_FILE_SNAPSHOT FS
         SET (data_msisdn, data_timestamp) = (SELECT msisdn, sacct_estab_dt
                                                FROM UMSD_FILE_SNAPSHOT_1D
                                               WHERE cust_acct_no =
                                                     FS.cust_acct_no
                                                 AND cust_sacct_no = '1D'
                                                 AND ROWNUM < 2),
             (fax_msisdn, fax_timestamp) = (SELECT msisdn, sacct_estab_dt
                                              FROM UMSD_FILE_SNAPSHOT_1D
                                             WHERE cust_acct_no =
                                                   FS.cust_acct_no
                                               AND cust_sacct_no = '1F'
                                               AND ROWNUM < 2),
             (video_msisdn, video_timestamp) = (SELECT msisdn, sacct_estab_dt
                                                  FROM UMSD_FILE_SNAPSHOT_1D
                                                 WHERE cust_acct_no =
                                                       FS.cust_acct_no
                                                   AND cust_sacct_no = '1V'
                                                   AND ROWNUM < 2)
       WHERE NVL(twc_status, ' ') <> 'S'
       AND cust_sacct_no = '1'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:41:16.300

Mysql 和 MsSQL 支持在更新语句中加入，但 oracle 没有这样使用以下查询

```
MERGE
INTO    table1
USING   (
        SELECT  t1.rowid AS rid, t2.code
        FROM    table1 t1
        JOIN    table2 t2
        ON      table1.value = table2.DESC
        WHERE   table1.UPDATETYPE='blah'
        )
ON      (rowid = rid)
WHEN MATCHED THEN
UPDATE
SET     value = code; 
```

PS 请在实施前检查执行计划和成本。

# android - 我应该如何处理 Android 中库项目的多个位置？

> ID：15903347
> 
> 赞同：0
> 
> 时间：2013-04-09T13:31:16.057
> 
> 标签：android, ant, adt, library-project, aide-ide

我正在开发一个[开源 Android 应用程序](https://github.com/treborrude/prayerminder)。我想使用多个开发平台。第一个是我的[Gentoo](http://www.gentoo.org/)盒子，我在其中使用`ant`和`emacs`开发（因为我已经使用`emacs`了多年，而 Gentoo 目前缺乏对足以支持 ADT 的新 Eclipse 版本的支持）。另一个是我的 Android 平板电脑上的[AIDE](https://play.google.com/store/apps/details?id=com.aide.ui)。

我目前遇到的主要问题与我将[ActionBarSherlock](http://actionbarsherlock.com/)用作库项目有关。自然，图书馆项目的位置在 Gentoo 盒子和平板电脑上是不同的。如果有人克隆了存储库，我想让他们尽可能轻松地进行设置。

现在，在我看来，这与通过`sdk.dir`在`local.properties`文件中设置解决的问题相同。所以我的第一个想法是添加一个`abs.dir=<path to ActionBarSherlock>`设置，`local.properties`然后我在`project.properties`. 这样做`ant`在 Gentoo 盒子上效果很好。

但是，它似乎不适用于平板电脑上的 AIDE。由于`local.properties`没有签入 git repo，我在平板电脑上创建了一个新的，`abs.dir`指向 ActionBarSherlock 的平板电脑位置。但是 AIDE 似乎没有使用它（即使它在`build.xml`文件中被引用）。我知道如何设置 AIDE 以使用库项目，但这会修改`project.properties`​​（已签入 git repo）以获得 ABS 平板电脑位置的完整路径，这绝对不是我想要的（我当然不每次在平板电脑和 Gentoo 盒子之间切换时都必须更新该文件）。

那么有没有一种方法可以在`ant`Eclipse / AIDE 和 Eclipse / AIDE 中进行设置，而只需要修改系统之间的单个设置？或者我是否需要更新项目的 README 以包含有关如何设置的详细说明列表？

# c++ - DirectX字体不绘图？

> ID：15903353
> 
> 赞同：0
> 
> 时间：2013-04-09T13:31:36.810
> 
> 标签：c++, text, fonts, directx, game-engine

我正在使用 DirectX、C++ 制作游戏，其中的不同部分在类中。目前我正在做一个字体类，但是当我去绘制一个字符串时，它没有显示出来，我不知道为什么。很感谢任何形式的帮助。

字体.h

```
class d2Font
{
public:
    d2Font(void);
    ~d2Font(void);

    void Create(string name, int size, LPDIRECT3DDEVICE9 device);
    void Draw(string text, int x, int y, int width, int height, DWORD format = DT_LEFT, D3DCOLOR colour = D3DCOLOR_XRGB(255, 255, 255));

private:
    LPD3DXFONT font;
}; 
```

字体.cpp

```
d2Font::d2Font(void)
{
font = NULL;
}

d2Font::~d2Font(void)
{
if(font)
    font->Release();
}

void d2Font::Create(string name, int size, LPDIRECT3DDEVICE9 device)
{
LPD3DXFONT tempFont = NULL;
D3DXFONT_DESC desc = {
    size,
    0,
    0,
    0,
    false,
    DEFAULT_CHARSET,
    OUT_TT_PRECIS,
    CLIP_DEFAULT_PRECIS,
    DEFAULT_PITCH,
    (char)name.c_str()
};
D3DXCreateFontIndirect(device, &desc, &tempFont);

font = tempFont;
}

void d2Font::Draw(string text, int x, int y, int width, int height, DWORD format, D3DCOLOR colour)
{
RECT rect = {x, y, width, height};
//SetRect(&rect, x, y, width, height);

font->DrawText(NULL, text.c_str(), -1, &rect, format, colour);
} 
```

编辑：这是 main.cpp 中的代码

```
int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{
gameHinstance = hInstance;

gameMain = new d2Main();
testFont = new d2Font();

if(!gameMain->NewWindow(hInstance, hWnd, "Test Game", 800, 400, nCmdShow, false))
{
    MessageBox(NULL, "Error! Unable to create window!", "D2EX", MB_OK | MB_ICONASTERISK);
    return 0;
}

gameMain->GameRunning = true;

testFont->Create("Arial", 12, gameMain->dx->d3ddev);

gameMain->GameLoop();

return 0;
}

void d2Main::GameUpdate()
{
gameMain->dx->d3ddev->BeginScene();
testFont->Draw("HelloWorld!", 10, 10, 200, 30, DT_LEFT, D3DCOLOR_XRGB(0, 255, 0));
gameMain->dx->d3ddev->EndScene();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:08:07.810

字体描述符中显然有一些错误的字段。一个是重量，正如 Roger Rowland 所提到的。另一个是最后一个，FaceName（字体名称）。您正在尝试将指针转换为 char，这会产生不好的结果。如果您的项目配置为使用 Unicode（Visual Studio 中大多数项目类型的默认设置），则 FaceName 成员将是一个 WCHAR 数组，因此您应该使用 wstring。另一件事是您应该检查 D3DXCreateFontIndirect 的返回值（以及返回 HRESULT 的任何其他 D3D 函数和方法）：

```
HRESULT d2Font::Create(const wstring& name, int size, LPDIRECT3DDEVICE9 device)
{
    D3DXFONT_DESC desc = {
        size,
        0,
        400,
        0,
        false,
        DEFAULT_CHARSET,
        OUT_TT_PRECIS,
        CLIP_DEFAULT_PRECIS,
        DEFAULT_PITCH
    };

    wcscpy_s(desc.FaceName, LF_FACESIZE, name.c_str());

    HRESULT hr = D3DXCreateFontIndirect(device, &desc, &font);
    if (FAILED(hr))
        return hr;

    return S_OK;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:39:32.847

看起来您为字体粗细指定了零。尝试这样的事情

```
D3DXFONT_DESC desc = {
size,
    0,
    0,
    400,
    false,
    DEFAULT_CHARSET,
    OUT_TT_PRECIS,
    CLIP_DEFAULT_PRECIS,
    DEFAULT_PITCH,
    (char)name.c_str()
}; 
```

# c# - 使用“不等于”运算符与空表连接的 SQL

> ID：15903354
> 
> 赞同：1
> 
> 时间：2013-04-09T13:31:38.690
> 
> 标签：c#, sql, sql-server, join

我有两张桌子 T1 和 T2

T1 与列 id 和数据

T2 列 id 和 T1_id

我想用 T2.T1_id 加入 T1.id

我想要 T1 的所有记录，其 id 不存在于 T2 中，即 T1.id <> T2.T1_id

因此，如果 T2 为空，则应获取 T1 的所有记录

问题是

1.  如果我使用 LEFT join den，即使 T2 中存在具有相应 T1_id 的记录，也会获取 T1 id 的所有记录。
2.  如果我不使用 Left join 一切正常，除非 T2 为空，否则不会获取任何记录

我也想要一个 linq 等价物。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:33:13.887

你已经接近你想要的了。`LEFT JOIN`就足够了，您的陈述中唯一缺少的是`WHERE`子句条件。

```
SELECT  a.*
FROM    T1 a
        LEFT JOIN T2 b
            ON a.ID = b.T1_ID
WHERE   b.T1_ID IS NULL 
```

这是`LINQ`版本：

```
var _result = from a in T1
              join b in T2 on a.ID equals b.T1_ID into b_join
              from b in b_join.DefaultIfEmpty()
              where b.T1_ID == null
              select a; 
```

# php - 如何将 laravel 会话传递给 wkhtmlltopdf

> ID：15903355
> 
> 赞同：0
> 
> 时间：2013-04-09T13:31:39.977
> 
> 标签：php, laravel, wkhtmltopdf

我正在尝试使用 wkhtmltopdf 打印受 Laravel 中的 auth 过滤器保护的页面。

我正在使用标准会话 cookie——在 config/session.php 中：

```
'driver' => 'cookie',
'cookie' => 'laravel_session', 
```

但是传递会话cookie什么都不做，即：

```
$ wkhtmltopdf  --cookie laravel_session [cookie value] http://myurl.com/protected test1.pdf 
```

只是打印登录页面。任何人都知道在将身份验证cookie传递给laravel时是否需要做一些特殊的事情，或者我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T12:31:45.273

使用 Laravel 的会话时有几件事情需要注意。

1.  它们不是 PHP 的会话，因此没有任何 PHP 会话函数适用。
2.  会话配置中的“cookie”包含任何驱动程序用来识别会话的会话标识符；它与 cookie 驱动程序无关。
3.  cookie 会话驱动程序将会话数据存储在名为 "session_payload" [1](https://github.com/laravel/laravel/blob/master/laravel/session/drivers/cookie.php#L10 "cookie会话驱动源代码")的第二个 cookie 中，并且限制为 4KB [2](http://laravel.com/docs/session/config#cookie "Laravel 文档中的 Cookie 会话")

我建议您切换到任何其他会话驱动程序，然后使用您在上面尝试过的相同方法重试。[文件会话驱动程序](http://laravel.com/docs/session/config#file)需要很少的设置（只是文件权限），或者[数据库会话驱动程序](http://laravel.com/docs/session/config#database)需要在您的数据库中创建一个表。

# javascript - Javascript getOwnPropertyNames

> ID：15903356
> 
> 赞同：2
> 
> 时间：2013-04-09T13:31:41.710
> 
> 标签：javascript

此方法返回所有可枚举和不可枚举的属性，如下所示： **Object.getOwnPropertyNames(Object)**

> > 长度，原型，defineProperty，getOwnPropertyDescriptor，defineProperties，创建，密封，冻结，preventExtensions，isSealed，isFrozen，isExtensible，getPrototypeOf，键，getOwnPropertyNames，调用者，参数

但是内部prototype和scope属性没有显示，为什么？这个方法显示了哪些属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T01:47:59.477

内部原型不是一个属性，所以它不会出现。一些浏览器将其公开为`__proto__`，但它不可枚举且非标准。

同样，'internal scope' 不是属性，例如你不能做 obj['internal scope[[scope]]']。Chrome 在控制台中显示它是有帮助的，但它是对象的属性。

# python - SQL表中的值发生变化时如何执行Python函数？

> ID：15903357
> 
> 赞同：1
> 
> 时间：2013-04-09T13:31:42.917
> 
> 标签：python, sql, sqlalchemy, raspberry-pi

我在互联网上的任何地方都找不到这个答案。我希望能够监视 MySQL 表中的一行是否发生变化，当发生这种情况时，运行 Python 函数。我要运行的这个 Python 函数与 MySQL 无关；它只是在 Raspberry Pi 上启用一个引脚。我试过研究 SQLAlchemy；但是，我不知道它是触发器还是数据映射。这样的事情甚至可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T14:31:39.043

一个 cron 作业而不是创建一个循环呢？我觉得好看一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T13:39:32.190

创建一个循环，不断检查 MySQL 表中该行的值，当值发生变化时，调用您要执行的函数。也可以参考[python：如何获取mysql数据库更改的通知？](https://stackoverflow.com/questions/5771925/python-how-to-get-notifications-for-mysql-database-changes)

# concrete5 - Concrete5：何时以及如何在块控制器中使用 duplicate() 函数？

> ID：15903362
> 
> 赞同：2
> 
> 时间：2013-04-09T13:31:52.910
> 
> 标签：concrete5

我发现很难理解控制器的 duplicate() 函数的概念。

在 C5 文档中，它说：

`Run automatically when a block is duplicated. This most likely happens when a block that is in an approved version is updated...`

当已批准版本中的块被更新时，它不只是被保存，由 save() 函数处理吗？

我也不确定这个函数里面有什么。有人可以澄清一下吗？

当从剪贴板粘贴块时，duplicate() 函数是否也能处理这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T20:29:35.027

在保存块之前，需要对其进行复制，以便保存到新版本。（然后该新版本与创建的新页面版本相关联。）

如果您查看[https://github.com/concrete5/concrete5/blob/master/web/concrete/core/libraries/block_controller.php#L197](https://github.com/concrete5/concrete5/blob/master/web/concrete/core/libraries/block_controller.php#L197)，您会发现基类有一个非常简单的复制方法。如果您的块很简单（主要是因为它只有一个 DB 表），那么这应该可以正常工作并且您不必重载它。

幻灯片块有一个需要重载 duplicate() 的示例。它不仅有“普通”表，还有图像 ID 的链接表。所以它首先调用父方法，复制正常的块表，然后自己复制。

继续并在观看`Blocks`表格的同时编辑/粘贴一些内容块，您将看到何时创建新块。请记住在两次编辑之间发布。

您会注意到，当创建新的时*，*它们会得到一个新的`bID`（这是有道理的）。现在来看看`btContentLocal`。您会注意到每个新块 ID 都有一个新条目（与`bID`s from匹配`Blocks`）。就是这样`duplicate()`做的——每次编辑块时都会创建一个新行。一切正常，它会自动运行。

但是，如果您在 a 中有一些行`MyBlock'sSecondaryTable`，那么我向您保证这些行不会被新的`bID`. 因此，如果您的块依赖于具有`bID`链接到块实例的辅助表，那么新的（更新的）块将具有新的`bID`并且无法“找到”旧记录。

这就是幻灯片的作用。你有`bID`== 1。有一堆1`btSlideshowImg`行`bID`，每个文件有一行。当您编辑幻灯片块时，您会得到`bID`== 2。现有`btSlideshowImg`行不会随新行更新`bID`——它们会被保留，以便您可以还原版本。（这就是恢复工作正常的原因……`duplicate()`处理的不是恢复，而是新版本。）

（从剪贴簿（剪贴板）粘贴块后，不会立即调用 Duplicate()。它看起来很像创建特定页面类型的新页面 - 该块最初是作为别名创建的，并且仅在您第一次编辑时它确实重复了-但确实调用了duplicate()。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T06:48:42.587

每当分配模板或复制/粘贴块时，都会调用复制函数。

复制功能对于需要保存在多个表中的附加组件来说是必需的。

附加组件只能知道一张表，并且只会自动管理那张表。

例如，幻灯片插件会将设置保存在一个表格中，并将图像列表保存在另一个表格中。数据将通过 bID 字段链接。

当你编辑你的块时，保存函数会处理这两个表。但是，当分配模板或粘贴块（例如）时，块的 bID 将在没有您编辑的情况下更改，因此它不会通过保存功能。

如果没有复制功能，将会发生的情况是新的投标 ID 将保存在主表中，但不会保存在辅助表中，这意味着幻灯片不会显示任何图像。

请记住，插件只知道主表，任何其他表都必须手动处理。

# asp.net - 在 Dev Fabric 上部署 Azure 项目时看到“发现太多 .rd 文件”错误

> ID：15903368
> 
> 赞同：1
> 
> 时间：2013-04-09T13:32:07.477
> 
> 标签：asp.net, .net, azure, azure-compute-emulator

我有一个 Windows Azure 项目，该项目已经工作并持续开发了很长时间。突然，在我的计算机上，但没有其他人在项目中，当我在开发结构中运行它时，它可以正确构建，但是当它到达“将包部署到 Windows Azure 计算模拟器”时，它会抛出“找到”错误.rd 文件太多”并停止。

我能找到的参考资料不多，但那些建议删除并重新创建 csdef 和 cscfg 文件（我已经这样做了，没有运气），或者寻找其他与配置相关的问题。我已经停止/启动了计算模拟器，重新启动，从 Git 中提取了新版本的代码等，但似乎没有任何效果。团队中没有其他人正在经历这种情况。

如果我从命令提示符手动运行 CSPack 和 CSRun，则会出现相同的错误。如果我这样做，但是在 CSPack 之后，我删除了输出目录中的 ServiceDefinition.rdsc 文件，它确实运行应用程序而没有错误，但不再知道我的配置设置，并且显然不允许在 Visual Studio 中设置断点，所以这不是一个好的选择。

我被难住了，有什么想法下一步去哪里吗？

史蒂夫

# visual-studio-2012 - 代码覆盖率 TFS2012

> ID：15903374
> 
> 赞同：1
> 
> 时间：2013-04-09T13:32:25.993
> 
> 标签：visual-studio-2012

我使用 Team Foundation Server 2012 进行了自动构建定义，并将其添加到 TFS2012 的 Web 访问中。Visual Studio Test Runner 还输出一些代码覆盖率结果。我可以在每次构建时找到这些结果，例如：覆盖了所有代码块的 80%。有没有可能在 TFS2012 的 web 访问上将这些代码覆盖结果添加到我的团队收藏夹中？我发现的唯一可能性是针对 TFS 的数据库（dbo.tbl_ModuleCoverage）编写一些自定义代码，但我希望有更好的方法来做到这一点。

# javascript - 在 Raphael 中为鼠标悬停事件添加锚点

> ID：15903381
> 
> 赞同：0
> 
> 时间：2013-04-09T13:32:41.623
> 
> 标签：javascript, raphael

我正在尝试为 Raphael 中的事件添加一个锚点，以便它在悬停时`mouseover`不会触发，`mouseout`

这是一个[小提琴](http://jsfiddle.net/3Ty7D/2/)，可以更好地表达我的意思

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:48:11.200

[这是一个有效的 jsfiddle，使用下面的最后一个示例。](http://jsfiddle.net/katowulf/pXuhp/1/)

纯粹用拉斐尔来做这件事，会很复杂。这是基本思想：

*   在 mouseout 事件中，用于`Element.isPointInside()`确定 mouseout 是由链接触发还是离开框触发
*   你可以使用 event.target; 事件被传递到 mouseout 回调中
*   如果它是由链接触发的，那么只需忽略 mouseout（当它离开实际框时你会得到另一个）
*   在 mousein 事件中，确保仅在来自框外时触发它（当用户从​​链接返回时，您将获得另一个 mousein 事件）

Raphael 中的另一种选择是在链接和背景上绘制一个透明框，并使用它来触发鼠标事件——包括点击；这将大大降低复杂性。

如果您想稍微作弊，而不是在这里重新发明任何轮子，您可以使用现有的解决方案并将其集成到 Raphael 的代码中。例如，您可以使用 jQuery 来触发事件，如下所示：

```
jQuery('#button').on('mouseenter', function() { xxd.stop().animate(...) }
jQuery('#button').on('mouseleave', function() { xxd.stop().animate(...) } 
```

在这方面更进一步，在拉斐尔身上真的没有理由去处理这个问题。只需使用 Raphael 来创建和管理背景图像，其余的留在 jQuery 或您喜欢的库中。

# python - Python中的UML模型遍历

> ID：15903382
> 
> 赞同：1
> 
> 时间：2013-04-09T13:32:47.493
> 
> 标签：python, uml

我想在 Python 中遍历一个模型。模型可以很大，有很多分支、子节点、类和属性。

Python中有没有针对UML模型遍历的特定算法？

# .net - 来自 Id 的 Umbraco 6.x .Net 控制媒体

> ID：15903387
> 
> 赞同：2
> 
> 时间：2013-04-09T13:32:58.337
> 
> 标签：.net, controls, umbraco, media

我有一个带有来自媒体库的图像属性的节点。该属性包含媒体图像的 ID。我需要从此 Id 中获取 Media 对象。在 Umbraco 4.x 中，您可以执行以下操作：

```
var image = new Media(imageId); 
```

由于某种原因，这种方法似乎在行动中消失了。我发现的唯一一个将从媒体库中获取图像的名称。但我只得到身份证。

这是我将在页面上使用的 .Net 控件。我只需要获取图像的完整路径，以便可以在图像标签的 SRC 字段中使用它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T17:55:21.333

在源头四处挖掘后，我找到了答案。要从 6.x 版的 WebControl 中通过 Id 获取 Media 对象，您必须执行以下操作：

```
var mediaObject = ApplicationContext.Current.Services.MediaService.GetById(mediaId); 
```

然后您可以从对象中获取以下属性：

```
var filePath = mediaObject.Properties["umbracoFile"].Value as string;
var width = mediaObject.Properties["umbracoWidth"].Value as int?;
var height = mediaObject.Properties["umbracoHeight"].Value as int?;
var bytes = mediaObject.Properties["umbracoBytes"].Value as int?;
var fileExtension = mediaObject.Properties["umbracoExtension"].Value as string; 
```

希望这对其他人有所帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T20:18:42.457

您现在还可以使用 Umbraco 中的 uQuery 库

```
Media mediaObject = umbraco.uQuery.GetMedia(mediaId); 
```

# ruby-on-rails - 如何为内部模型设置路径？

> ID：15903393
> 
> 赞同：1
> 
> 时间：2013-04-09T13:33:17.130
> 
> 标签：ruby-on-rails, ruby, routes

这是模型的结构`routes.rb`：

```
 resources :model_a do
    resources :model_b do
      resources :model_c do
        resources :photos do
          collection do
            get :upload_data
          end
        end
      ...
    ...
  ... 
```

在网址上

```
http://localhost:3001/model_a/1/model_b/2/model_c/3/photos/upload_data 
```

显示用于选择文件的表格。它在被调用的控制器`Photos`和 action`upload_data`中。

我收到错误消息

> #<#:...> 的未定义方法 `photos_path'

我认为这是因为这个控制器在另一个控制器里面，但是如何修复它呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:45:33.567

[通常，注意Rails Doc](http://guides.rubyonrails.org/routing.html#nested-resources)中的警告是明智的

> 资源的嵌套深度不应超过 1 级。

这是基于深度嵌套资源导致不必要的复杂性的经验的指南。

您描述的错误听起来像是由于在您的视图表单中使用了不正确的路径助手。由于它是嵌套的，因此它不是`photos_path`，而是所有嵌套资源的组合，例如：

```
model_a_model_b_model_c_upload_data_photos_path(model_a, model_b, model_c) 
```

您应该检查`rake routes`用于路径的正确且笨拙的路线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:41:42.687

可能这可以解决您的问题： http: [//guides.rubyonrails.org/routing.html#nested-resources](http://guides.rubyonrails.org/routing.html#nested-resources)

这里有一个注释：`"Resources should never be nested more than 1 level deep."`

正如您提到的代码，您已经使用了不止 1 个级别。我不认为这是一个好习惯。

希望这会对你有所帮助。

# tomcat - Tomcat方法限制问题

> ID：15903396
> 
> 赞同：2
> 
> 时间：2013-04-09T13:33:18.480
> 
> 标签：tomcat, http-method

我知道这应该是一个简单的，但我们不能让它工作。我们正在尝试将所有 Trace、Put 和 Delete 方法限制在 Tomcat 中，以便我们可以清理我们的漏洞扫描。

我们已经尝试在 /tomcat/conf/web.xml 文件以及所有 /tomcat/webapps/*/WEB-INF/web.xml 文件中添加以下内容，但我们没有看到行为发生变化。关于下一步看哪里的任何想法？

```
<security-constraint>
<web-resource-collection>
<web-resource-name>restricted methods</web-resource-name>
<url-pattern>/*</url-pattern>
<http-method>TRACE</http-method>
<http-method>PUT</http-method>
<http-method>DELETE</http-method>
</web-resource-collection>
<auth-constraint />
</security-constraint> 
```

# svn - 为我的 svn repos 寻找新家 - 需要你的建议

> ID：15903397
> 
> 赞同：-3
> 
> 时间：2013-04-09T13:33:23.437
> 
> 标签：svn, repository, hosting, provider

**在你无缘无故地给我投反对票之前，请先阅读**（半分钟内投了三个反对票 - 震惊） - 我真的不知道我的问题属于 stackexchange 的哪个位置。他们说这是一个由 101 个 QA 站点组成的网络，所以不知道，这似乎是一个混合问题，乍一看很难分类。我个人认为它属于这里。虽然我是程序员而不是管理员，但我对其他程序员的意见很感兴趣。我们都在使用某种版本控制软件，并且必须将我们的存储库存储在某个地方。这就是我要找的。

## 问题：

我正在为我的私人 svn 存储库寻找一个好的和可靠的在线主机。直到今天我都在使用我公司的服务器。好处是它是免费的。该服务器每天晚上都断开连接，这很糟糕。总是当我有时间处理我的项目时，服务器就会关闭；/。

所以我认为最好找到一个在线颠覆提供商，因为我真的更喜欢免提解决方案而不是摆弄我自己的网络服务器。到目前为止，我知道我想要什么，但我很震惊有多少供应商存在。在**[这个列表](http://www.svnhostingcomparison.com/)**中有超过一百个名字！

好的，这可以被过滤，但是（在我的情况下是每月 10 美元或更少的费用）但即便如此，列表仍然很长，我绝对不知道我应该选择哪一个。像每个人一样，我倾向于使用我之前听到的名字之一 * *Unfuddle、Beanstalk、CodeSpaces 或 CloudForge ** ...但它们真的很好吗？不知道。

在大多数情况下，只有当您已经使用该提供商一段时间以了解它的所有优点和陷阱时，您才能回答这个问题。

**请与我分享您的经验。**哪家供应商适合您，为什么？我很感谢你能给我的每一个建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:48:30.207

我没有使用您上面提到的任何 SAAS 的实际经验。但是，我知道您可以在那里购买便宜的（大约 $5/m）共享主机并在服务器上设置您自己的 svn。您仍然需要请求对服务器的 SSH 访问才能安装 svn，但这应该不是问题，因为大多数共享托管网站会在您向他们发送电子邮件后授予您访问权限，或者有时他们需要您打电话给他们以验证您'是出于安全目的的托管主要所有者。

如果您对共享托管不满意，您知道您可以在 GitHub、SourceForge 等上以每月低至 7 美元的价格托管您的私有代码。查看： [https ://github.com/features/hosting](https://github.com/features/hosting)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:54:47.857

我使用[项目储物柜](http://www.projectlocker.com/)。这对我来说是可靠的。我使用的是付费计划，但我注意到他们有一个用户/项目有限的免费计划。这对你来说可能已经足够了。

在查看提供商时，我会做的是查看他们提供的总包。源代码管理服务是商品 - 每个人都有它，所以你必须看看你会得到什么其他价值：

1.  确保您的提供商允许您备份您的回购 - 您可能希望将来移动您的回购，所以您会想要这个。
2.  一些提供程序包括一个错误跟踪器，您可能会发现它很有用。
3.  一些提供商与第三方项目管理工具集成。
4.  等等......这取决于你在寻找什么。

另一个注意事项 - 一些提供商会给您免费试用。利用这一点，看看该提供商是否会为您工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T01:14:33.483

看看汇编。它们是我个人最喜欢的 SVN。免费的私人仓库、漂亮的网络功能和可靠的。[http://www.assembla.com](http://www.assembla.com)

# c# - 使用 BinaryReader 读取/写入 Nullable 类型？

> ID：15903399
> 
> 赞同：4
> 
> 时间：2013-04-09T13:33:26.803
> 
> 标签：c#, nullable, binary-serialization

我正在重载 System.IO BinaryReader 以序列化某些类以用于文件存储目的。我在处理字典之类的项目时没有遇到任何问题，但使用可空类型并没有成功。有可能吗？具体来说，我正在尝试十进制？和字符串？，但任何类型都应该适合我的解决方案。

出于特定的业务原因，我必须进行二进制序列化，因此请将响应限制为仅适用于此的解决方案。

例如...对于读取/写入字节数组，我使用以下方法：

```
 public byte[] ReadByteArray()
    {
        int len = ReadInt32();
        if (len > 0) return ReadBytes(len);
        if (len < 0) return null;
        return new byte[0];
    }

    public override void Write(byte[] b)
    {
        int len = b.Length;
        Write(len);
        if (len > 0) base.Write(b);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-09T04:59:27.743

您将需要添加某种标志来让读者知道它是否应该读取下一个字节。

```
public decimal? ReadNullableDecimal()
{
    bool hasValue = ReadBoolean();
    if (hasValue) return ReadDecimal();
    return null;
}

public void Write(decimal? val)
{
    bool hasValue = val.HasValue;
    Write(hasValue)
    if(hasValue)
        Write(val.Value);
} 
```

但是我们可以很聪明地创建一个适用于所有基于结构的类型的通用方法

```
public Nullable<T> ReadNullable<T>(Func<T> ReadDelegate) where T : struct
{
    bool hasValue = ReadBoolean();
    if (hasValue) return ReadDelegate();
    return null;
}

public void Write<T>(Nullable<T> val) where T : struct
{
    bool hasValue = val.HasValue;
    Write(hasValue)
    if(hasValue)
        Write(val.Value);
} 
```

如果我想使用我的`ReadNullable`函数来读取 a`Int32`我会这样称呼它

```
Int32? nullableInt = customBinaryReader.ReadNullable(customBinaryReader.ReadInt32); 
```

所以它会测试该值是否存在，如果存在，它将调用传入的函数。

* * *

**编辑：**在上面睡觉后，该`Write<T>`方法可能无法像您期望的那样工作。因为`T`不是一个定义明确的类型，所以唯一可以支持它的方法是`Write(object)`Binary writer 不支持开箱即用。`ReadNullable<T>`仍然可以工作，如果你想使用仍然使用`Write<T>`，你需要制作`val.Value` [动态](http://msdn.microsoft.com/en-us/library/vstudio/dd264741.aspx)的结果。您需要进行基准测试以查看是否存在任何性能问题。

```
public void Write<T>(Nullable<T> val) where T : struct
{
    bool hasValue = val.HasValue;
    Write(hasValue)
    if(hasValue)
        Write((dynamic)val.Value);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-09T01:43:15.987

```
public decimal ReadDecimal()
{
    int len = ReadInt32();
    if (len > 0) return base.ReadDecimal();
    if (len < 0) return null;
    return new decimal;
}

public override void WriteDecimal(decimal d)
{
    if (d==null)
        WriteInt32(-1);
    else
    {
        WriteInt32(sizeof(d)); //16
        Write(d);
    }
} 
```

# dsl - Helvetia LBChange

> ID：15903400
> 
> 赞同：3
> 
> 时间：2013-04-09T13:33:28.277
> 
> 标签：dsl, pharo

Helvetia 中使用的 LBChange 是什么？我看到在每个语言框中都有一个#change：它返回一个新的 LBChange。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:50:31.637

语言更改用于封装应用于宿主语言语法的本地语法适应。在我们的例子中，语言扩展被定义为一个语法片段，以及该片段如何与宿主语言的语法组合的规范。

有关详细说明，请参阅我的[博士论文](http://scg.unibe.ch/archive/phd/renggli-phd.pdf)中的“第 5.2.1 章语言变化” 。

# mpi - 使用 MPI 指定运行程序的机器

> ID：15903408
> 
> 赞同：8
> 
> 时间：2013-04-09T13:34:12.203
> 
> 标签：mpi

我要做一些并行计算，我完全是这个领域的初学者。我将使用 MPI 进行并行工作，主从模型。我现在有四台机器，希望其中一台成为主节点。但是，我不知道如何指定运行该程序的其他机器。有没有办法指定从节点的IP地址？如何启动我的程序？我正在使用 Ubuntu 12.10。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-09T14:55:32.520

## 设置

确保每个节点上都有相同的目录/文件结构。例如，可执行文件应该`/home/yan/my_program`在每台计算机上。[例如，您可以通过NFS](https://help.ubuntu.com/community/SettingUpNFSHowTo)在每台计算机上安装相同的目录。

[设置 SSH](https://help.ubuntu.com/12.04/serverguide/openssh-server.html)以便您可以从主节点登录每个从节点，如下所示：

```
yan@master:~/$ ssh slave1
yan@slave1:~/$ 
```

这意味着用户`yan`必须存在于每台计算机上。如果您通过[SSH 密钥](https://help.ubuntu.com/12.04/serverguide/openssh-server.html#openssh-keys)设置登录，则无需输入密码。如果您通过密码登录，则必须在启动程序时输入密码。

使用安装[OpenMPI](http://www.open-mpi.org/)

```
sudo apt-get install penmpi-bin openmpi-doc libopenmpi-dev 
```

您可以安装其他 MPI 实现，例如 MPICH。

## 运行程序

现在，使用`mpicc myprogram.c -o myprogram`（如果您使用 C；对于 C++ `mpic++`，等等）编译您的程序并使用

```
yan@masternode:~/$ mpirun -n 4 -H master,slave1,slave2,slave3 myprogram 
```

除了[机器名称](http://www.robgolding.com/blog/2008/11/26/the-hosts-file-in-ubuntu/)，您还可以使用 IP 地址。`-n`指定进程数。如果省略该选项，将在每台机器上启动一个进程。您还可以在每台机器上使用多个插槽：

```
yan@masternode:~/$ mpirun -n 8 -H master,slave1,slave2,slave3,\
master,slave1,slave2,slave3 myprogram 
```

或者，您可以将每行一个计算机名称写入 a`HOSTFILE`并像这样指定它：

```
yan@masternode:~/$ mpirun -hostfile HOSTFILE 
```

这些命令通过 SSH 自动连接从机，启动程序并设置通信参数，使数据分布自动进行，`MPI_Comm_size`并`MPI_Comm_rank`给出当前计算机的数量和集群的大小。

您可以通过调用来查看这些选项`man mpirun`。

# sharepoint - 正确处理 powershell 管道对象

> ID：15903411
> 
> 赞同：1
> 
> 时间：2013-04-09T13:34:21.037
> 
> 标签：sharepoint, powershell, scope, piping

此脚本片段正在访问函数内的 SharePoint 网站 (web)。它创建了一个 SPWeb 对象，该对象应在函数结束时被释放以避免内存泄漏。通常处理对象的方式类似于`$web.dispose()`. 在这种情况下，SPWeb 对象在管道中创建和使用，但没有名称。

这是代码：

```
function foobar {
    $x = Get-SPWeb -Identity "http://mylocalsite/Sites/test1/test2" |
         ForEach-Object {$_.Lists | Where {$_.Title -EQ "someLibrary"} |  
         Select ID }
} 
```

我怀疑 SPWeb 对象没有在管道结束时自动处理并导致内存泄漏。

如何处置在管道中创建的对象？我什至需要吗？

仅供参考：`$x`没有名为“Dispose”的方法，因此`$x.Dispose()`不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:45:11.913

我不知道对象的“自动”处理，但要使用 Dispose 方法，您需要中断命令。就像现在一样，最终结果是一个不支持该方法的列表对象。：

```
function foobar {
    $x = Get-SPWeb -Identity "http://mylocalsite/Sites/test1/test2"
    $list = $x.Lists['someLibrary'].Id
    $x.Dispose()
    $list
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-05T16:30:06.580

更符合 PowerShell 白话的是通过使用`Start-SPAssignment`and来维护管道`Stop-SPAssignment`，例如

```
function foobar {
    $assig = Start-SPAssignment
    $x = Get-SPWeb -Identity "http://mylocalsite/Sites/test1/test2" -AssignmentCollection $assign |
         ForEach-Object {$_.Lists | Where {$_.Title -EQ "someLibrary"} |  
         Select ID }
    Stop-SPAssignment $assign
} 
```

这只是一个说明，而不是经过验证的代码示例，因为我目前没有方便的 SharePoint 服务器来测试它，但它为您提供了想法。如果有机会，我会对其进行测试并相应地编辑我的答案。

进一步的改进是将 ForEach 折叠到管道中

```
function foobar {
    $assig = Start-SPAssignment
    $x = Get-SPWeb -Identity "http://mylocalsite/Sites/test1/test2" -AssignmentCollection $assign |
         Select-Object -ExpandProperty Lists | 
         Where {$_.Title -EQ "someLibrary"} |  
         Select ID
    Stop-SPAssignment $assign
} 
```

再次只是一个插图而不是经过验证的代码示例。

以下博客文章提供了有关分配对象、[PowerShell、SharePoint 和内存泄漏 (Start-SPAssignment)](https://blog.ithinksharepoint.com/2014/06/02/powershell-sharepoint-and-memory-leaks-start-spassignment/)的很好的教程。

# c# - 每个页面加载随机显示三个不同的问题

> ID：15903416
> 
> 赞同：3
> 
> 时间：2013-04-09T13:34:41.130
> 
> 标签：c#, asp.net, sql, sql-server, checkbox

我不确定从哪里开始，寻找正确方向的推动力。我正在使用 C#。我需要向用户显示三个问题，但最重要的是我需要在每个页面加载时随机选择并显示这些问题。如果您的解决方案认为它是最简单的方法，我可以使用 MS SQL。

我有一个包含 10 个问题的列表，我希望一次显示三个问题，然后随机选择它们。做这个的最好方式是什么？

目前是这样设置的。。

![在此处输入图像描述](https://i.stack.imgur.com/ZSsTP.jpg)

```
 <p> <label class="checkbox"><asp:CheckBox ID="QuesChk1" Value="1" Text="What street do they live on?"
        runat="server" /></label></p>
     <p> <label class="checkbox"><asp:CheckBox ID="QuesChk2" Value="2" Text="What is their middle name?"
        runat="server" /></label></p>
     <p> <label class="checkbox"><asp:CheckBox ID="QuesChk3" Value="3" Text="What branch do they visit the most?"
        runat="server" /></label></p>
    <asp:Button ID="Button1" OnClick="Next_Click" runat="server" Text="Next" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:38:50.610

你总是可以做这样的事情：

```
SELECT TOP 3 * FROM QuestionsTable ORDER BY NEWID() 
```

有关它如何工作的解释，请参见此处：[“order by newid()” - 它是如何工作的？](https://stackoverflow.com/questions/4979799/order-by-newid-how-does-it-work)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:06:43.413

如果您对获得 3 个随机不重复的问题非常挑剔，那么您可以尝试：

在您有问题的 SQL 表中，如果没有，则必须有一个与它们关联的 ID 字段，然后创建一个，现在由于您有 10 个问题，ID 将在 1-10 之间。

现在在您的 c# 代码中，您可以创建 Method 它将获得：

```
Random random = new Random();
int randomNumber = random.Next(1, 10); 
```

现在构建一个 SQL 查询“ `Select * from tab where ID = randomNumer`”（针对第一个问题）。

将 randomNumber 存储在临时数组或列表中（用于比较目的）并再次调用相同的方法并将其与现有数字进行比较（您可以使用`Contains()`返回 bool 的方法来简单地进行操作）如果它不相似，则将其添加到数组中并继续发布这个问题。

您必须跟踪数组/列表的大小（如果 < 3 则继续，否则退出）。

这必须为您锻炼，我使用相同的算法为一家公司创建了一个入学测试，不幸的是找不到代码。

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T13:37:52.163

使用随机排序的 SQL 查询：

```
SELECT * FROM QuestionsTable ORDER BY RAND() LIMIT 3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T13:42:14.600

这听起来像[Random](http://msdn.microsoft.com/en-us/library/system.random.aspx)也许你正在寻找什么。特别是，您应该看看[Random.Next(int maxValue)](http://msdn.microsoft.com/en-us/library/zd1bc8e5.aspx)方法。

如果我必须做这样的事情，我会收集问题并使用上述功能来抓取随机问题。不过，您必须通过选择相同的问题来解决问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T13:56:40.620

如果您没有很多问题，并且它们将保持不变，那么安装整个数据库可能会过大。

您可以在字符串（或更复杂的包含 ID 和字符串的对象）上使用 ArrayList，并使用随机函数三次来选择 3 个不同的元素。

当然，您必须确认您没有选择相同的问题。

你之后做什么取决于你是否想存储答案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T13:48:21.393

如果您不想使用数据库并且您已解决所有 10 个问题，请使用 viewstate 之类的

```
ViewState["Questions"] = new List<string>(); 
```

并向其添加问题

然后再有一个视图状态来检查您收到的订单是否不是最后一个订单

```
ViewState["LastOrder"] = new List<int>(){1,2,3}; 
```

然后生成随机订单，直到不是最后一个

```
int firstIndex, secondIndex, thirdIndex;
var lastOrder = (List<int>)ViewState["LastOrder"];

Random r = new Random(lastOrder[0] + lastOrder[1] + lastOrder[2]);

while(firstIndex == lastOrder[0]) 
   firstIndex = r.Next(1, 10);

while(secondIndex == lastOrder[1] || secondIndex == firstIndex) 
   secondIndex = r.Next(1, 10);

while(thirdIndex == lastOrder[2] || thirdIndex == firstIndex || thirdIndex == secondIndex)    
   thirdIndex = r.Next(1, 10);

// update current index as last index
ViewState["LastOrder"] = new List<int>(){firstIndex, secondIndex, thirdIndex}; 
```

在此之后，您将获得随机不重复的三个问题顺序

# java - heroku 使用 Log4J 部署

> ID：15903419
> 
> 赞同：1
> 
> 时间：2013-04-09T13:34:53.730
> 
> 标签：java, logging, heroku

是否可以在启用 Log4J 的情况下将基于 Java 的应用程序部署到 Heroku？根据他们的[文档](https://devcenter.heroku.com/articles/logging#writing-to-your-log)：

> 任何写入标准输出 (stdout) 或标准错误 (stderr) 的内容都会被捕获到您的日志中。这意味着您可以使用简单的输出语句从应用程序代码中的任何位置登录。
> 
> 在 Ruby 中，你可以使用类似的东西：
> 
> ```
> puts "Hello, logs!" 
> ```
> 
> 在 Java 中：
> 
> ```
> System.err.println("Hello, logs!"); 
> System.out.println("Hello, logs!"); 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-11T21:10:36.437

这实际上取决于您想要执行哪种日志记录（或您尝试使用的附加程序）。请注意，`file`由于 Heroku 的[临时文件系统](https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem)，附加程序将毫无用处。但是，由于您给出的原因，我认为附加到`stdout`也会输出到您的 Heroku 日志。

这是一个名为 Airbrake 的附加组件上的 Heroku 文档，它充当 Log4J 的附加器： [https ://devcenter.heroku.com/articles/airbrake#java](https://devcenter.heroku.com/articles/airbrake#java)

编辑：我已经测试了记录到标准输出，它确实记录到 Heroku 日志。

我的`log4j.properties`，如果你有兴趣（很标准）：

```
log4j.rootLogger= error, stdout

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%p @ %l > %m%n 
```

# jsf-2 - 外部 facelets 模板 - 它是否被缓存？

> ID：15903420
> 
> 赞同：3
> 
> 时间：2013-04-09T13:34:54.223
> 
> 标签：jsf-2, tomcat7, java-ee-6, facelets

由于显示来自外部源的标头的给定要求，我们提出了以下设置（在 Tomcat 7 上使用 JEE6）：

我们的页面经常使用模板：

```
...
<ui:composition ... template="/WEB-INF/templates/template.xhtml">
... 
```

除了布局页面结构之外，此模板还包括另一个 XHTML 文件在其正文中：

```
...
<h:body>
  <ui:include src="./header.xhtml" />
... 
```

然后包含的文件再次使用模板，但这次指向一个外部资源，该资源返回一个`<div>`包含要使用的标头的元素：

```
...
<ui:composition ... template="http://someserver/somefile">
... 
```

我知道这个设置有点奇怪，但是为了包含`<div>`我们必须包含在页面中的外部生成元素，间接是必要的。（如果有人可以为给定的问题提供更智能的解决方案，我会很高兴。）

到目前为止，这工作正常，但似乎是这种情况，这个包含的文件被我们的 Tomcat 缓存，导致在更改后不显示当前标题。如果 Tomcat 重新启动，则会显示新的标头。

有人可以给我一些见解，这一切是如何在幕后工作的，以及它是否与 Facelets、Tomcat 或我的特定设置有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T04:18:54.163

在 JSF 2（即在 Facelets 中）中，模板是一段静态内容，其中可以包含动态内容。

如果你想使用不同的模板，首先你必须用不同的 URL 路径指向不同的页面，然后不同的页面可以使用不同的模板：

```
<ui:include src="./header{$HeaderTemplateSuffix}.xhtml" /> 
```

然后 headerABC.xml 可以有：

```
...
<ui:composition ... template="http://someserver/somefileABC">
... 
```

和 headerDEF.xml 可以有

```
...
<ui:composition ... template="http://someserver/somefileDEF">
... 
```

或者，您可以放弃对标头使用模板，并动态生成所有标头内容（甚至包括静态部分）。

注意：将 html 标头模板合并回主模板不是解决此问题的方法，因为它没有解决标头模板*动态*的核心挑战。

希望有帮助！干杯:^)

* * *

注意：可以在 web.xml 中设置以下内容：

```
<!-- Time in seconds that facelets should be checked for changes since last request. A value of -1 disables refresh checking. -->
<context-param>
    <param-name>javax.faces.FACELETS_REFRESH_PERIOD</param-name>
    <param-value>0</param-value>
</context-param>

<!-- Set the project stage to "Development", "UnitTest", "SystemTest", or "Production". -->
<!-- An optional parameter that makes troubleshooting errors much easier. -->
<!-- You should remove this context parameter before deploying to production! -->
<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
</context-param> 
```

但是，这旨在服务于完全不同的目的：允许开发人员动态更改任何静态资源，JSF 容器将动态检查更改并在开发期间加载它。您无意使用它来模拟动态模板，并且设置上述属性将对生产环境中的性能和安全行为产生负面影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T13:07:24.417

There are multiple solutions on different levels, that you might use: You could just implement a [ResourceResolver](http://docs.oracle.com/javaee/6/api/javax/faces/view/facelets/ResourceResolver.html "ResourceResolver") and include a template from a defined URL (with a defined URL like external-resource/header.xhtml). This ResourceResolver might be configured with the external reference.

The next possibility would be to have a ServletFilter that post processes your HTML and adds the header at a defined position.

And finally you could implement a simple custom component to load the header either on server or on client side using jQuery or such.

You generally don't want to disable caching on the facelets since it will decrease performance.

# javascript - 用 JS 在 HTML 中操作 SVG

> ID：15903425
> 
> 赞同：2
> 
> 时间：2013-04-09T13:35:14.510
> 
> 标签：javascript, html, svg

我在嵌入 html 的 svg 图像中使用 javascript 构建 svg 元素时遇到问题。我创建了两个应该完全相同的文件，但其中一个是用 js 构建的。

**SVG.html**

```
<!DOCTYPE HTML>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Pozadí</title>
 </head>
 <body>
  <svg
    id="pozadi"
    xmlns="http://www.w3.org/2000/svg"
    version="1.1"
    height="200"
    width="200"
   >
   <path
     d="M 0,0 L 150,150 L 100,150 L 150,150 L 150,100"
     style="stroke: #000; stroke-width: 2px; stroke-linecap: round; fill: none;"
    >
    <animate
      from="M 0,0 L 150,0 L 115,35 L 150,0 L 115,-35"
      to="M 0,0 L 150,150 L 100,150 L 150,150 L 150,100"
      dur="10s"
      begin="5s"
      attributeType="XML"
      attributeName="d"
     >
    </animate>
   </path>
  </svg>
 </body>
</html> 
```

**JS.html**

```
<!DOCTYPE HTML>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Pozadí</title>
 </head>
 <body>
  <svg
    id="pozadi"
    xmlns="http://www.w3.org/2000/svg"
    version="1.1"
    height="200"
    width="200"
   >
  </svg>
  <script>
   var svg  = document.getElementById('pozadi');
   var path = document.createElementNS('http://www.w3.org/2000/svg/','path'); //I have tried createElement(string) too
   path.setAttribute('style',"stroke: #000; stroke-width: 2px; stroke-linecap: round; fill: none;");
   path.setAttribute('d',"M 0,0 L 150,150 L 100,150 L 150,150 L 150,100");
   var anim = document.createElementNS('http://www.w3.org/2000/svg/','animate');
   anim.setAttribute('from','M 0,0 L 150,0 L 115,35 L 150,0 L 115,-35');
   anim.setAttribute('to','M 0,0 L 150,150 L 100,150 L 150,150 L 150,100');
   anim.setAttribute('dur','10s');
   anim.setAttribute('begin','5s');
   anim.setAttribute('attributeType','XML');
   anim.setAttribute('attributeName','d');
   path.appendChild(anim);
   svg .appendChild(path);
  </script>
 </body>
</html> 
```

第二个文件 JS.html 是纯白色的。
我想问，怎么改正？谢谢，m93a

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:52:32.847

您可能遇到的问题之一是您在加载页面后立即运行脚本，而不是等待所有元素加载。

所以基本上 document.getElementById('pozadi'); 运行它时可能为空，并且由于您有外部请求（[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)），因此很有可能发生这种情况。

尝试使用当前脚本添加一个调用函数的 onload 侦听器。如果你有 jQuery，这就是你正在寻找的[http://api.jquery.com/ready/](http://api.jquery.com/ready/)。如果没有...手动制作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:58:25.613

```
var path = document.createElementNS('http://www.w3.org/2000/svg/','path'); 
```

是错的。你要

```
var path = document.createElementNS('http://www.w3.org/2000/svg','path'); 
```

请注意缺少尾随 / 字符。同样的问题

```
var anim = document.createElementNS('http://www.w3.org/2000/svg/','animate'); 
```

如果您修复这两行，您应该会看到箭头（我在 Firefox 中这样做），这是一个[jsfiddle 来证明它](http://jsfiddle.net/longsonr/TuYYh/)。

# java - 如何以编程方式将 Java 中的 bean 添加到 Spring 中的 app-context.xml 中？

> ID：15903432
> 
> 赞同：0
> 
> 时间：2013-04-09T13:35:40.637
> 
> 标签：java, spring, activemq, applicationcontext

我正在关注本教程[http://java-diaries.blogspot.com/2011/03/get-started-with-spring-jms-using.html](http://java-diaries.blogspot.com/2011/03/get-started-with-spring-jms-using.html)我不明白为什么要使用 @Service 和 @Autowired 注释需要在 app-context.xml 中显式创建 bean，但对于 @Component，它会为您创建一个。有人可以解释一下吗？另外，有没有办法使用注释添加目标和连接工厂bean？或者我是否需要以[编程方式将 Bean 添加到 Spring Web App 上下文中的解决方案](https://stackoverflow.com/questions/4540713/add-bean-programatically-to-spring-web-app-context)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:02:12.800

如果您使用`context:component-scan`标签，将检测到同时使用 @Component 和 @Service 注释的类，并且不需要在您的应用程序上下文中声明。

@Autowired 不同。当您声明一个字段@Autowired 时，这意味着应用程序上下文中的bean——无论是显式声明还是由组件扫描获取——都被注入。

# php - PHP/MySQL 数组排除

> ID：15903441
> 
> 赞同：0
> 
> 时间：2013-04-09T13:35:52.597
> 
> 标签：php, html, mysql

我有一个显示所有用户照片的页面，但我希望排除默认的个人资料图片，即 thumb-default.png。我怎么做？

```
<?

$getphotos = mysql_query("SELECT ID, Link FROM images WHERE MemberID = '$vid'");
while($iph = mysql_fetch_array($getphotos))
{
$pID = $iph['ID'];
$pLINK = $iph['Link'];

echo "

<li><a href=\"members_image/$vid/$pLINK\" rel=\"prettyPhoto[gallery]\"><img src='/members_image/$vid/thumb-$pLINK' width='105'></a></li>

";

} 
```

谢谢！！:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:37:00.950

在查询末尾添加`AND Link != 'thumb-default.png'`

```
$getphotos = mysql_query("SELECT ID, Link FROM images WHERE MemberID = '$vid' AND Link != 'thumb-default.png'"); 
```

这不包括要选择的具有此链接的每个条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:56:51.060

我同意上述观点，而且最好使用它，

```
while($iph = mysql_fetch_object($getphotos))
{
$pID = $iph->ID;
$pLINK = $iph->Link;

} 
```

因为我认为mysql_fetch_array，更喜欢数组元素键作为数字。$iph[0]、$iph[1]...

我认为对于 alpha 关键元素，您使用

```
mysql_fetch_assoc 
```

# php - 如何在树枝模板 Symfony2 中显示集合字段

> ID：15903444
> 
> 赞同：1
> 
> 时间：2013-04-09T13:36:06.863
> 
> 标签：php, symfony, doctrine

我的实际实体采购和采购订单

购买有字段

*   公司 - 本身就是独立的实体
*   产品 - 本身就是独立的实体
*   大小 - 本身就是单独的实体
*   颜色 - 本身就是单独的实体
*   成本
*   联系 - - 本身就是独立的实体

PO [Purchase Order] 有一些字段加上一个Purchase的集合字段。如何显示收集实体的字段 - 购买。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:48:00.607

要打印出树枝模板中的所有标签名称，您可以使用类似于以下代码的内容。

```
{% for tag in task.tags %}
     {{ tag.name }}
{% endfor %} 
```

随心所欲的造型。我认为这就是你想要实现的目标？

# c# - 正则表达式解析方括号

> ID：15903445
> 
> 赞同：0
> 
> 时间：2013-04-09T13:36:08.453
> 
> 标签：c#, regex

我有一个字符串：

```
<?xml version="1.0" encoding="utf-8"?>
<data>
    <url>
        <![CDATA[http://site.ru/uploadImage?returnUrl=http%3A%2F%2Fwww.site.ru%2Fdk%3Fcmd%3DgrPostImageUploaded%26amp%3Btkn%3D3089&returnErrorUrl=http%3A%2F%2Fwww.site.ru%2Fdk%3Fcmd%3DgrPostImageUploaded%26amp%3Btkn%3D3916&flashLoad=on&photoId=]]>
    </url>
    <tokens>
        <token>
            <!CDATA[258xA2Z4KDWBBRo%2FBbZBLZqw%2F1adFyhFOsWKJTidWIgxfIJ8RWZYdpIsOJ3U6RevDsRBR7gKeG2V29evBOFXUaqTg%3D%3D]]>
        </token>
    </tokens>
    <maxImageSize>
        1024
    </maxImageSize>
</data> 
```

我尝试`token><![CDATA[(.*)]]`用代码解析

```
string token = Regex.Match(upload_info, @"CDATA[(.*)]]></token").Groups[1].Value; 
```

但是令牌是空的。为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T13:39:26.370

`[(.*)]`表示“以下一个字符：`(`, `.`,`*`或`)`”。

你可能的意思是`@"CDATA\[(.*?)\]\]></token"`。

请注意不情愿的量词`.*?`，否则您会匹配从第一个`[CDATA`到最后一个的所有内容`]]</token`。

但是您不应该首先使用正则表达式来解析 XML，尤其是`CDATA`部分。这就是解析器的用途。

# android - Google Map Api v2 内存不足错误 Android

> ID：15903448
> 
> 赞同：1
> 
> 时间：2013-04-09T13:36:14.193
> 
> 标签：android, google-maps, memory, memory-management, memory-leaks

我正在使用 google map api v2 for android。这是我的片段类 **mapview.xml的代码**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:mySwitch="http://schemas.android.com/apk/res-auto"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:id="@+id/rlmain"
android:background="@drawable/mainbg" >

<include
    android:id="@+id/rlheader"
    android:layout_alignParentTop="true"
    layout="@layout/header" >
</include>

<fragment
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
            android:layout_below="@+id/rlheader"       
    class="com.google.android.gms.maps.SupportMapFragment"
    /> 

 </RelativeLayout> 
```

**地图视图片段**

```
 import java.io.File;
       import java.util.ArrayList;
       import java.util.Arrays;
       import java.util.HashMap;
       import org.apache.http.NameValuePair;
       import org.json.JSONArray;
       import org.json.JSONObject;
       import android.annotation.SuppressLint;
       import android.content.Context;
       import android.location.Location;
       import android.location.LocationManager;
       import android.os.Build;
       import android.os.Bundle;
       import android.os.Handler;
       import android.os.Looper;
       import android.support.v4.app.Fragment;
       import android.support.v4.app.FragmentTransaction;
       import android.util.Log;
       import android.view.LayoutInflater;
       import android.view.View;
       import android.view.ViewGroup;
       import android.view.View.OnClickListener;
       import android.view.ViewTreeObserver.OnGlobalLayoutListener;
       import android.widget.Button;
       import android.widget.ImageButton;
       import android.widget.RelativeLayout;
       import android.widget.TextView;
       import com.google.android.gms.maps.CameraUpdate;
       import com.google.android.gms.maps.CameraUpdateFactory;
       import com.google.android.gms.maps.GoogleMap;
       import com.google.android.gms.maps.GoogleMap.InfoWindowAdapter;
       import com.google.android.gms.maps.GoogleMap.OnInfoWindowClickListener;
       import com.google.android.gms.maps.SupportMapFragment;
       import com.google.android.gms.maps.UiSettings;
       import com.google.android.gms.maps.model.BitmapDescriptorFactory;
       import com.google.android.gms.maps.model.LatLng;
       import com.google.android.gms.maps.model.LatLngBounds;
       import com.google.android.gms.maps.model.Marker;
       import com.google.android.gms.maps.model.MarkerOptions;

public class MapViewFragment extends BaseFragment{

 private RelativeLayout ll;
 ImageButton ivbtShopList,ivbtSearch;
 TextView tvHeader;
 private LocationManager locationManager;
 private String provider;
 Location location;
 ThreadPreLoader mTask;
 Handler mHandler;
 ArrayList<NameValuePair> nameValuePairs=new ArrayList<NameValuePair>();
 ArrayList<DataOfPlaceList> Placelist=new ArrayList<DataOfPlaceList>();
 HashMap<String,DataOfPlaceList> Placelistdata=new HashMap<String,DataOfPlaceList>();
 DataOfPlaceList data;
 JSONArray jsonArray;
 JSONObject jsonObject;
 String APILink,Jsonstring;
 String TAG="NearByShop";
 Button btBack;
 private GoogleMap mMap;
 Boolean Successfull=false,isDestory=false;
 TextView tv5kmRecord,tv10kmRecord,tvAllRecord;
 int maptype;
@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    PlaceListProgressHolder.initHolder(getActivity(), "Loading...");
    Jsonstring=(String) getArguments().get("jsonresponse");
    maptype=mPrefs.getInt("maptype", 0);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    if(readyToGo()){
    if (ll == null) {
        ll = (RelativeLayout)inflater.inflate(R.layout.mapview, container, false);
        tvHeader=(TextView)ll.findViewById(R.id.tvHeaderTitle);
        tvHeader.setTypeface(tf);
        btBack=(Button)ll.findViewById(R.id.btBack);
        btBack.setVisibility(View.VISIBLE);
        btBack.setOnClickListener(OnBackClickListener);
        setUpMapIfNeeded();

        if(((TABActivity)mActivity).checkConnection()){
            mTask = new ThreadPreLoader(PlaceListProgressHolder);
            mTask.execute();
            mHandler = new Handler(Looper.getMainLooper());
        }
          Log.e("remove","noremove");
     } else {
         ((ViewGroup) ll.getParent()).removeView(ll);
         Log.e("remove","yesremove");
     }
    }else{
        return null;
    }
    return ll;
}
private OnClickListener OnBackClickListener=new OnClickListener(){

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        isDestory=true;
        ((TABActivity)mActivity).onBackPressed();
    }

};
@Override
public void onResume() {
    super.onResume();
    if (ll == null) {
    tvHeader.setText(getResources().getString(R.string.search));
    btBack.setText(getActivity().getResources().getString(R.string.back));
    }
}
private void setUpMapIfNeeded() {
    // Do a null check to confirm that we have not already instantiated the map.
    if (mMap == null) {
        // Try to obtain the map from the SupportMapFragment.

        mMap = ((SupportMapFragment)getFragmentManager().findFragmentById(R.id.map)).getMap();
        switch(maptype){
        case 0:
                mMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
            break;
        case 1:
                mMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE);
            break;
        case 2:
                mMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);
            break;
        }

        mMap.setInfoWindowAdapter(new InfoWindowAdapter() {

            // Use default InfoWindow frame
            @Override
            public View getInfoWindow(Marker arg0) {
                return null;
            }

            // Defines the contents of the InfoWindow
            @Override
            public View getInfoContents(Marker arg0) {

                // Getting view from the layout file info_window_layout
                View v = getActivity().getLayoutInflater().inflate(R.layout.mapinfowindow, null);

                return v;

            }
        });
        if(location!=null){
        LatLng latLng = new LatLng(location.getLatitude(), location.getLongitude());
        CameraUpdate cameraUpdate = CameraUpdateFactory.newLatLng(latLng);
        mMap.animateCamera(cameraUpdate);

        }

        mMap.animateCamera(CameraUpdateFactory.zoomBy(8));
        mMap.setOnInfoWindowClickListener(new OnInfoWindowClickListener(){

            @Override
            public void onInfoWindowClick(Marker marker) {
                // TODO Auto-generated method stub
                PlaceDetailsFragment fragment=new PlaceDetailsFragment();
                Bundle bundle=new Bundle();
                bundle.putString("placeid",""+Placelistdata.get(marker.getId()).getPlaceid());
                fragment.setArguments(bundle);
                ((TABActivity)mActivity).pushFragments(AppConfig.TAB_B,fragment,true,true);
            }

        });

    }
  }

   private ProgressHolder PlaceListProgressHolder = new ProgressHolder() {

@Override
public boolean getMessagelist() { 
    // TODO Auto-generated method stub
        try{

            Placelist.clear();
            jsonObject=new JSONObject(Jsonstring);
            Successfull=jsonObject.getBoolean("successfull");
            if(Successfull){
                jsonArray=jsonObject.getJSONArray("Place");
                for(int i=0;i<jsonArray.length();i++){
                    jsonObject=jsonArray.getJSONObject(i);
                    data=new DataOfPlaceList();
                    data.setPlaceid(jsonObject.getString("place_id"));
                    data.setPlacename(jsonObject.getString("placename"));
                    data.setFacility(jsonObject.optString("facility"));
                    data.setLatitude(jsonObject.getDouble("latitude"));
                    data.setLongitude(jsonObject.getDouble("longitude"));
                    data.setDistance(jsonObject.optDouble("distance"));
                    Placelist.add(data);
                }
            }

        }catch(Exception e){
            Log.e(TAG,e.toString());
            return false;
        }
    return true;
}
@Override
public void updateContent() {
    // TODO Auto-generated method stub
    mHandler.post(new Runnable() {
        @Override
        public void run() {
            try{
                if(Successfull){
                    Log.i("Size",""+Placelist.size());
                    LatLngBounds.Builder builder = new LatLngBounds.Builder();
                    for(int i=0;i<Placelist.size();i++){
                        setUpMap(Placelist.get(i));
                        builder.include(new LatLng(Placelist.get(i).getLatitude(),Placelist.get(i).getLongitude()));
                    }
                    CameraUpdate cameraUpdate = CameraUpdateFactory.newLatLngBounds(builder.build(), 10);
                    mMap.moveCamera(cameraUpdate);
                }
            }catch(Exception e){
                Log.e(TAG,e.toString());
            }

  }});
}

};

   private void setUpMap(DataOfPlaceList placelistdata) {
    Marker marker=mMap.addMarker(new MarkerOptions().position(new  LatLng(placelistdata.getLatitude(),placelistdata.getLongitude())).title(""+placelistdata.getPlacename()).icon(BitmapDescriptorFactory.fromResource(R.drawable.mapicon)).snippet(placelistdata.getFacility()));    
    Placelistdata.put(marker.getId(),placelistdata);
    /*LatLng latLng = new LatLng(shoplistdata.getLatitude(), shoplistdata.getLongitude());
    CameraUpdate cameraUpdate = CameraUpdateFactory.newLatLng(latLng);
    CameraUpdateFactory.newLatLngBounds(latLng, 0);
    LatLngBounds bounds=new LatLngBounds(latLng, latLng);
    mMap.animateCamera(cameraUpdate);*/
  }

  class DataOfPlaceList{
    private String placeid;
    private String faciltiyid;
    private String placename;
    private Double distance;
    private Double latitude;
    private Double longitude;

    public String getPlaceid(){
        return placeid;
    }
    public void setPlaceid(String placeid){
        this.placeid=placeid;
    }
    public String getFacility() {
        return faciltiyid;
    }

    public void setFacility(String faciltiyid) {
        this.faciltiyid = faciltiyid;
    }
    public String getPlacename() {
        return placename;
    }
    public void setPlacename(String placename) {
        this.placename = placename;
    }
    public Double getLatitude() {
        return latitude;
    }
    public void setLatitude(Double latitude) {
        this.latitude = latitude;
    }
    public Double getLongitude() {
        return longitude;
    }
    public void setLongitude(Double longitude) {
        this.longitude = longitude;
    }
    public Double getDistance() {
        return distance;
    }
    public void setDistance(Double distance) {
        this.distance = distance;
    }

 }
   @Override
public void onDestroy() {
        super. onDestroyView(); 
        Fragment fragment = (getFragmentManager().findFragmentById(R.id.map));
        if(fragment!=null && isDestory){
        FragmentTransaction ft = getActivity().getSupportFragmentManager().beginTransaction();
        ft.remove(fragment);
        ft.commit();

        trimCache(getActivity());
        }

}
@Override
public boolean onBackPressed() {
// TODO Auto-generated method stub
    isDestory=true;
    return false;

}

 } 
```

**基本片段**

```
 import com.google.android.gms.common.ConnectionResult;
   import com.google.android.gms.common.GooglePlayServicesUtil;

   public class BaseFragment extends Fragment {
   public TABActivity mActivity;
   SharedPreferences mPrefs;
   Typeface tf;
   Boolean TABARefresh=false,TABBRefresh=false,TABCRefresh=false,TABDRefresh=false;
   protected static final String TAG_ERROR_DIALOG_FRAGMENT="errorDialog";
 /// For Email Validation////

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mActivity       =   (TABActivity) this.getActivity();
    mPrefs = PreferenceManager.getDefaultSharedPreferences(mActivity);
    tf=Typeface.createFromAsset(getActivity().getAssets(), "PORKYS.TTF");
}

public boolean onBackPressed(){
    return false;
}

public void onActivityResult(int requestCode, int resultCode, Intent data){

}

 protected boolean readyToGo() {
        int status=
            GooglePlayServicesUtil.isGooglePlayServicesAvailable(getActivity());

        if (status == ConnectionResult.SUCCESS) {
          return(true);
        }
        else if (GooglePlayServicesUtil.isUserRecoverableError(status)) {
          ErrorDialogFragment.newInstance(status)
                             .show(getActivity().getSupportFragmentManager(),
                                   TAG_ERROR_DIALOG_FRAGMENT);
        }
        else {
             AlertDialog dialog = new AlertDialog.Builder(getActivity()).create();
                dialog.setMessage(getString(R.string.no_maps)+" Please install latest google map and update google play service too.");
                dialog.setButton(AlertDialog.BUTTON_POSITIVE, "Ok", new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.dismiss();
                        ((TABActivity)mActivity).onBackPressed();
                    }
                });
                dialog.show();
        }
        return(false);
      }

      public static class ErrorDialogFragment extends DialogFragment {
        static final String ARG_STATUS="status";

        static ErrorDialogFragment newInstance(int status) {
          Bundle args=new Bundle();

          args.putInt(ARG_STATUS, status);

          ErrorDialogFragment result=new ErrorDialogFragment();

          result.setArguments(args);

          return(result);
        }

        @Override
        public Dialog onCreateDialog(Bundle savedInstanceState) {
          Bundle args=getArguments();

          return GooglePlayServicesUtil.getErrorDialog(args.getInt(ARG_STATUS),
                                                       getActivity(), 0);
        }

        @Override
        public void onDismiss(DialogInterface dlg) {
          if (getActivity() != null) {
            getActivity().finish();
          }
        }
      }

} 
```

我面临与此处发布的相同问题**[http://code.google.com/p/gmaps-api-issues/issues/detail?id=4766](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4766)**并且由于内存泄漏，加载地图时出现内存不足错误。

有时第一次地图会加载显示，但有时会崩溃。我已经在 Samsung TAB 2、Sony Erricson 和 SAMSUNG GALAXY X-Cover 型号 GT-S5690 Android 版本中进行了测试。2.3.6 在三星 XCover 中大部分时间会崩溃，在索尼爱立信中也会有一段时间崩溃。

我还在模拟器中测试了第一次地图是否会加载并且我第二次回来而不是崩溃。

正如**[https://developers.google.com/maps/documentation/android/releases](https://developers.google.com/maps/documentation/android/releases)**链接，此问题已解决，但无法获得解决方法，我也尝试使用生成新地图密钥。

任何帮助都会得到帮助。

谢谢。

# binding - JavaFX TableView 中的问题绑定复选框

> ID：15903452
> 
> 赞同：4
> 
> 时间：2013-04-09T13:36:23.603
> 
> 标签：binding, checkbox, javafx, tableview

我是 JavaFX 的新手，所以请多多包涵。我正在尝试有一个 TableView，其中一些列将是复选框。我的意图是将这些绑定到模型对象中的布尔属性。模型对象具有定义为 SimpleBooleanProperty 的属性，并具有 getter/setter 和 property 方法。我已经验证了表格“看到”了模型对象，因为我将一些布尔列绑定为表格中的文本，果然，表格按预期显示“真”或“假”。但是，我无法让复选框在任一方向绑定数据。我在下面包含了一些示例代码。

```
public class DataModel {
  private SimpleBooleanProperty prop1;
  private SimpleBooleanProperty prop2;

  public boolean getProp1() {
    return prop1.get();
  }

  public setProp1(boolean value) {
    prop1.set(value);
  }

  public prop1() {
    return prop1;
  }

  ...
} 
```

UI模型逻辑：

```
...
private ObjectProperty<ObservableList<DataModel>> listProperty;
...
List<DataModel> list = new ArrayList<DataModel>();
... add some DataModel objects to list

final ObservableList<DataModel> obsList = FXCollections.observableArrayList(list);
listProperty.set(obsList); 
```

界面逻辑：

```
...
TableView table = new TableView<DataModel>();
table.setEditable(true);

TableColumn<DataModel, String> boolAsStringCol = new TableColumn<DataModel, String>("Prop1");
boolAsStringCol.setCellValueFactory(new PropertyValueFactory<DataModel, String>("prop1"));

TableColumn<DataModel, Boolean> boolAsCbxCol = new TableColumn<DataModel, Boolean>("Prop2");
boolAsCbxCol.setCellValueFactory(new PropertyValueFactory<DataModel, Boolean>("prop2"));
boolAsCbxCol.setCellFactory(CheckBoxTableCell.forTableColumn(boolAsCbxCol));
boolAsCbxCol.setEditable(true);

table.getColumns().add(boolAsStringCol);
table.getColumns().add(boolAsCbxCol);
... 
```

我可以切换复选框，但它似乎没有将属性绑定到复选框。如果我设置了一个断点，那么当我选中或取消选中该复选框时，setter 不会被调用。此外，如果我在创建对象时将属性初始化为 true，则在呈现表时它不会显示为选中状态。

欢迎任何建议。看起来这应该有效，但事实并非如此。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-14T08:16:56.473

可能您需要将以下行添加到 DataModel 中的代码中

```
 public SimpleBooleanProperty prop1Property() {return prop1;}
    public SimpleBooleanProperty prop2Property() {return prop2;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-26T16:44:01.010

代替

```
boolAsCbxCol.setCellFactory(CheckBoxTableCell.forTableColumn(boolAsCbxCol)); 
```

采用

```
boolAsCbxCol.setCellFactory(CheckBoxTableCell.forTableColumn(boolAsCbxCol::getCellData)); 
```

因为您使用的工厂方法实际上忽略了它的参数，这是一个错误[https://bugs.openjdk.java.net/browse/JDK-8186287](https://bugs.openjdk.java.net/browse/JDK-8186287)

# javascript - chrome中节点的getComputedStyle为空

> ID：15903458
> 
> 赞同：1
> 
> 时间：2013-04-09T13:36:39.133
> 
> 标签：javascript, css, dom

我的 javascript 代码中有以下行：

```
if(document.defaultView && document.defaultView.getComputedStyle){
    strValue = document.defaultView.getComputedStyle(oElm).getPropertyValue(strCssRule);
} // ... 
```

检索我的节点的 CSS 值（例如：）`strCssRule = 'color'`。它适用于火狐。它仅适用于 Chrome 上的静态页面上的简单示例。当试图将它集成到我的复杂应用程序中时，返回的每个字段`CSSStyleDeclaration`都是空的。

`oElem`使用 jQuery ( ) 检索节点`oElem = $(my_selector).empty().get(0));`。工作示例和我的应用程序之间的区别（至少是我能想到的唯一区别）是我的节点在计算时尚未集成到 DOM 中（仍在生成完整的 HTML）。

即使在 HTML delectation 中明确设置 CSS（例如我的节点是`<div style="width:100px;"></div>`）时，我也尝试过，CSSStyleDeclaration 对象仍然为空。

**编辑**：如 CBroe 所述，问题在于该元素尚未链接到 DOM。我想这取决于浏览器的实现如何处理这种情况。我不知道 Firefox 是如何使它工作的，但我会找到别的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-27T17:32:44.727

如果你知道 CSS 规则的选择器，并且知道它是在 CSS 表单中定义的，你可以搜索它。这就是我解决这个问题的方法。

```
var page, rule, css;
var selector = ".my_selector";
var sheets = document.styleSheets;
for( page = 0; page < sheets.length; page++ ){
    // if you comment out this if-statement, you can search thru all of the page-wide stylesheets
    if( sheets[page].href.match(/.*\/filename\.css$/) ){
        for( rule = 0; rule < sheets[page].length; rule++ ){
            if( sheets[page][rule].selectorText === selector ){
                css = sheets[page][rule].style;
                break;
            }
        }
        break;
    }
}

// At this point, you have access to the CSS you're looking for.

console.log(css);
alert(css.backgroundColor);

// example from actual code:

if(css.borderTopWidth)this.speaker_default.edge._sizediff=Number(css.borderTopWidth.slice(0,-2)); 
```

# c++ - 库的多级链接导致功能缺失

> ID：15903460
> 
> 赞同：1
> 
> 时间：2013-04-09T13:36:42.707
> 
> 标签：c++, gcc, shared-libraries

我处于一个有趣的困境中。我有静态库 A，其中包含我们所有可执行文件都需要的日志记录功能。静态库 A 由共享对象 B 链接，因为。我们的一些可执行文件仅链接到共享对象 B。问题是它们不能使用 B 从静态对象 A 继承的公共日志记录功能。我收到链接器错误，即找不到功能。我假设共享对象 B 使静态库 A 中的东西无法访问。

```
For simplicity:
libA.a [logging.h] <- libB.so <- executable [wants to use logging.h] 
```

我怎样才能让它工作？

# django - Django prefetch_related 获取所有多对多对象

> ID：15903462
> 
> 赞同：1
> 
> 时间：2013-04-09T13:36:46.020
> 
> 标签：django, django-models

我正在为这件事苦苦挣扎：

我需要获取所有多对多对象并且正在考虑使用 prefetch_related

这是我的模型样本：

```
class Company(models.Model):
    companyjobs = models.ManyToManyField(CompanyJob, related_name='jobs')

class CompanyJob(models.Model):
    source = models.CharField(_('Source'), max_length=64, db_index=True) 
```

这是我尝试过的：

```
 search_results = Company.objects.prefetch_related('companyjobs') 
```

现在我想访问 companyjobs 对象。我该怎么做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-02-05T16:33:47.507

您可以直接从 Company 模型类的任何实例访问 companyjobs，而无需`prefetch_related`.

例如。

```
# .all() will get all elements and [0] will get the first
company = Company.objects.all()[0]  

company.companyjobs
# this is actually a ManyToMany Manager
# you deal with it like any other manager so

for companyjob in company.companyjobs.all():
    # all() will again get all items in company.companyjobs
    # here you iterate over all companyjobs in that company
    ... # do what you must 
```

现在，我们只有一家公司，所有公司的工作都来自那里。

我们这样做的方式 django 将对数据库进行 2 次查询。

一份给公司，一份给工作

`prefetch_related`将这些查询“合并”为一个，以便我们在从数据库中获取公司的同时获得所有相关工作

它非常方便，因为如果您不使用`prefetch_related`，您必须与更多的公司打交道，您需要进行一次额外的查询以获得该公司的工作，这会大大降低性能。

更多信息在这里：[https ://docs.djangoproject.com/en/1.7/ref/models/querysets/#prefetch-related](https://docs.djangoproject.com/en/1.7/ref/models/querysets/#prefetch-related)

# java - 计算月份变化时的时差

> ID：15903466
> 
> 赞同：1
> 
> 时间：2013-04-09T13:36:55.107
> 
> 标签：java

我一直在尝试计算两个日期之间的时间差，以分钟为单位。下面的代码是我所拥有的。但它给了我负面的价值。谁能帮我！！？

```
import java.util.Date;
import java.text.ParseException;
import java.text.SimpleDateFormat;

public class time {

/**
 * @param args
 * @throws ParseException 
 */
public static void main(String[] args) throws ParseException {
    // TODO Auto-generated method stub

    String time1 = "05/01/2010 11:59:00";
    String time2 = "04/30/2010 23:59:00";

    SimpleDateFormat sdf = new SimpleDateFormat("mm/dd/yyyy H:mm:ss");
    Date date1 = sdf.parse(time1);
    Date date2 = sdf.parse(time2);
    long difference = date1.getTime() - date2.getTime(); 
    System.out.println(difference/(3600*1000));
}

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T13:40:07.263

您必须在第一个位置使用`MM`而不是日期格式：[是分钟，](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)[是月](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)：`mm`[`mm``MM`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

```
SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy H:mm:ss"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T13:44:44.077

您使用的日期格式是混合分钟和月份。

您应该改用这种格式：`MM/dd/yyyy HH:mm:ss`

此外，计算是错误的，你得到了小时的差异，如果你想要小时，你应该使用这个：`System.out.println((difference / 1000) / 60);`

# paypal - PayPal Here沙箱

> ID：15903467
> 
> 赞同：3
> 
> 时间：2013-04-09T13:36:55.200
> 
> 标签：paypal, paypal-sandbox

有谁知道是否有在沙盒环境中测试 PayPal Here？如果可能的话，我真的宁愿不必使用实时信用卡数据进行测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:01:48.873

不幸的是，目前还没有办法在沙盒中对此进行测试。

# asp.net - 本地化 AsyncFileUpload(Ajax ControlToolkit)

> ID：15903469
> 
> 赞同：0
> 
> 时间：2013-04-09T13:36:59.087
> 
> 标签：asp.net, ajaxcontroltoolkit

在我的项目中，我使用 asyncfileupload 上传文件，但我遇到了一个问题：

我来自俄罗斯，想将此控件本地化为俄罗斯语言。

有谁知道我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:30:35.523

本教程将为您提供最佳见解。 [http://weblogs.asp.net/sreejukg/archive/2010/11/23/multi-lingual-web-applications-using-asp-net-4.aspx](http://weblogs.asp.net/sreejukg/archive/2010/11/23/multi-lingual-web-applications-using-asp-net-4.aspx)

# php - xlsx中的getHighestColumn不起作用

> ID：15903471
> 
> 赞同：6
> 
> 时间：2013-04-09T13:37:01.767
> 
> 标签：php, phpexcel

有这个代码，使用 PHPExcel

```
 public function getHighestColumn()
    {
      return $this->objPHPExcel->setActiveSheetIndex(0)->getHighestColumn();
    }

    public function getHighestRow()
    {
      return $this->objPHPExcel->setActiveSheetIndex(0)->getHighestRow();
    } 
```

我在 .xls 和 .xlsx 中保存了相同的 excel 文件它有 10 列（从 B 到 K）和 10 行

当我使用`getHighestColumn`.xls 时，我得到“K”（正确），但在 .xlsx 中，我得到 AMK（所有 excel 工作表中的最后一列） 关于行，使用 .xls 我得到 10，但是在 .xlsx 中我得到 1024。我很确定，除了表格之外，工作表的其余部分都是空白的。

任何想法为什么我会得到不同的结果？

这是我正在使用的阅读器

```
public function openReader($filePath)
    {
      //aca determinamos cual tipo es para saber que reader es
    $reader_5 = new PHPExcel_Reader_Excel5();
    $reader_07 = new PHPExcel_Reader_Excel2007();

    $inputFileType = $this->canRead(new PHPExcel_Reader_Excel5(), $filePath, self::EXCEL5);

    if($inputFileType === '')
      $inputFileType = $this->canRead(new PHPExcel_Reader_Excel2007(), $filePath, self::EXCEL2007);
    else
    {
      throw new Exception("No se puede procesar el archivo; el formato no es correcto");
    }
    return PHPExcel_IOFactory::createReader($inputFileType);
    }

private function canRead($reader, $path, $readerType)
  {
    return $reader->canRead($path) ? $readerType: '';
  }

public function persist($fileName)
    {
      $filePath = sfConfig::get('sf_upload_dir').'\\'.$fileName;

      $this->objReader = $this->openReader($filePath);
      //Set only first Sheet
      $this->setOnlyFirstSheet();

      $this->createObjPHPExcel($filePath);

      echo $this->getHighestColumn();
      echo $this->getHighestRow();
     } 
```

我已经检查过`var_dump`并且在每种情况下我都使用了正确的阅读器。

php 5.3.5、PHPExcel 1.7.8、Symfony 1.4

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-09T13:57:24.950

行和列是按是否包含任何内容（包括样式信息）而不是简单地包含内容来计算`getHighestColumn()`的`getHighestRow()`。加载电子表格时也会计算这些值，因此如果您随后向工作表添加新行或列，则可能不准确。

相反，使用`getHighestDataColumn()`and`getHighestDataRow()`方法返回实际包含单元格中数据值的最高行和列。虽然效率较低，但它们实际上在调用时会计算最高的单元格引用，虽然速度较慢，但​​始终准确

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-19T09:38:09.297

```
$highestColumn = $sheet->getHighestColumn();    
$colNumber = PHPExcel_Cell::columnIndexFromString($highestColumn); 
```

# c++ - 如何使用 CMake 为静态库（不使用源文件）创建共享库包装器？

> ID：15903473
> 
> 赞同：1
> 
> 时间：2013-04-09T13:37:10.210
> 
> 标签：c++, cmake, shared-libraries, static-libraries

我想使用 CMake 从 libfoo.a 创建一个 liboo.so。

到目前为止我有

```
include_directories(third-party/includes)
find_library(${thirdparty_LIBRARIES} foo PATHS third-party/lib)
add_library(boo SHARED empty.cpp)
target_link_libraries(boo ${thirdparty_LIBRARIES})
add_executable(runBoo main.cpp)
target_link_libraries(runBoo boo) 
```

main 从 libfoo.so 调用函数。但是会引发错误：

```
main.cpp:(.text+0x26): undefined reference to `Foo::Foo()'
main.cpp:(.text+0x50): undefined reference to `Foo::sayHello(std::basic_string<char, std::char_traits<char>, std::allocator<char> >)' 
```

我猜这些符号没有添加，因为 empty.cpp 不使用它们，但我不确定这是问题所在以及如何克服它。

我见过[CMake：如何从子项目的所有静态库中创建单个共享库？](https://stackoverflow.com/questions/11429055/cmake-how-create-a-single-shared-library-from-all-static-libraries-of-subprojec)，但我现在更愿意坚持使用较低版本的 cmake。

我还看到[了如何将静态库链接到 gcc 中的动态库，](https://stackoverflow.com/questions/2649735/how-to-link-static-library-into-dynamic-library-in-gcc)但我无法让它工作，而且我正在使用 CMake。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:34:51.093

这只是一个愚蠢的错误。更正后的代码是：

```
 include_directories(third-party/includes)

   find_library(thirdparty_LIBRARIES foo PATHS third-party/lib) //remove the ${}!

   add_library(boo SHARED empty.cpp)
   target_link_libraries(boo ${thirdparty_LIBRARIES})
   add_executable(runBoo main.cpp)
   target_link_libraries(runBoo boo) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-14T18:42:56.417

选择的答案不正确。您正在将空源文件编译到共享库中。然后，您尝试将静态库链接到此共享库。由于编译的代码中没有用到静态库，所以不会被链接，会被忽略。因此，您必须添加`-whole-archive`链接器标志以强制链接静态库，如下所示。

```
add_library(my_shared_lib SHARED src/empty.cpp)
SET(MY_LIB_LINK_LIBRARIES -Wl,--whole-archive my_static_library.a -Wl,--no-whole-archive)
target_link_libraries(my_shared_lib ${MY_LIB_LINK_LIBRARIES}) 
```

# mysql - SQL 和 Delphi：从表中创建树的递归机制

> ID：15903480
> 
> 赞同：12
> 
> 时间：2013-04-09T13:37:18.533
> 
> 标签：mysql, sql, delphi, recursion

我正在使用的 DBMS 是 MySQL，编程环境是 Delphi 7（这对于这个例子并不重要）。

我有一个名为“主题”的表，我将所有书籍主题存储在系统中。科目可以有亲子关系，就像科学可以分为数学和物理，而数学可以细分为微积分、代数、几何等等。

我想要的是创建一个填充了该表中日期的树。请帮我这样做。出于说明目的使用哪种语言甚至都无关紧要，它可以是伪代码。

Subject 表的数据库图如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/4hhej.png)

主题表定义：

```
DROP TABLE IF EXISTS subject;
CREATE TABLE IF NOT EXISTS subject (                  # Comment
    subject_id  INT UNSIGNED NOT NULL AUTO_INCREMENT, # Subject ID
    subject     VARCHAR(25)  NOT NULL,                # Subject name
    parent_id   INT UNSIGNED     NULL DEFAULT NULL,   # Parent ID as seen from
    PRIMARY KEY (subject_id),                         # the diagram refers to
    UNIQUE (subject),                                 # the subject_id field
    INDEX (parent_id),
    CONSTRAINT fk_subject_parent
    FOREIGN KEY (parent_id)
        REFERENCES subject (subject_id)
            ON DELETE RESTRICT
            ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

用一些虚拟数据填充主题表：

```
INSERT INTO subject (subject, parent_id) VALUES
                    ('Science',    NULL),
                    ('Mathematics',   1),
                    ('Calculus',      2),
                    ('Algebra',       2),
                    ('Geometry',      2),
                    ('Languages',  NULL),
                    ('English',       6),
                    ('Latin',         6); 
```

SELECT 语句返回：

```
SELECT * FROM subject;
╔════════════╦═════════════╦═══════════╗
║ subject_id ║   subject   ║ parent_id ║
╠════════════╬═════════════╬═══════════╣
║          1 ║ Science     ║      NULL ║
║          2 ║ Mathematics ║         1 ║
║          3 ║ Calculus    ║         2 ║
║          4 ║ Algebra     ║         2 ║
║          5 ║ Geometry    ║         2 ║
║          6 ║ Languages   ║      NULL ║
║          7 ║ English     ║         6 ║
║          8 ║ Latin       ║         6 ║
╚════════════╩═════════════╩═══════════╝ 
```

存储过程：

```
DELIMITER$$

DROP PROCEDURE IF EXISTS get_parent_subject_list;
CREATE PROCEDURE get_parent_subject_list ()
BEGIN
    SELECT subject_id, subject
    FROM subject
    WHERE parent_id IS NULL
    ORDER BY subject ASC;
END$$

DROP PROCEDURE IF EXISTS get_child_subject_list;
CREATE PROCEDURE get_child_subject_list (IN parentID INT)
BEGIN
    SELECT subject_id, subject
    FROM subject
    WHERE parent_id = parentID
    ORDER BY subject ASC;
END$$

DELIMITER ; 
```

接下来是我的 Delphi 程序，它试图用数据填充树视图，但可以进一步看出，它不能比第二级更深：

```
procedure TForm1.CreateSubjectTreeView(Sender: TObject);
var
    i : integer;
begin
    i := 0;

    q1.SQL.Clear;
    q1.SQL.Add('CALL get_parent_subject_list()');
    q1.Open;
    q1.First;

    while not q1.EOF do
    begin
        TreeView.Items.Add(nil, q1.Fields[1].Value);

        q2.SQL.Clear;
        q2.SQL.Add('CALL get_child_subject_list(' +
                    VarToStr(q1.Fields[0].Value) + ')');
        q2.Open;
        q2.First;

        while not q2.EOF do
        begin
            TreeView.Items.AddChild(TreeView.Items.Item[i], q2.Fields[1].Value);
            q2.Next;
        end;

        i := TreeView.Items.Count;
        q1.Next;
    end;
end; 
```

这就是这段代码的作用：

```
+- Science
|   |
|   +- Mathematics
|
+- Languages
    |
    +- English
    +- Latin 
```

但我希望它看起来像这样：

```
+- Science
|   |
|   +- Mathematics
|       |
|       +- Calculus
|       +- Algebra
|       +- Geometry
|
+- Languages
    |
    +- English
    +- Latin 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T14:25:23.880

我建议您不要一次加载整棵树，为什么要加载？目前没有人可以查看一千个项目。它可能很长，您的程序看起来会冻结。它在网络和服务器上产生了巨大的负载。

您最好使用`VirtualTreeView`方法，其中每个项目根据请求加载其子项目。这将需要一个参数化的准备查询，例如

```
 Select ID, Title, This, That from TREE where Parent_ID = :ID 
```

*   [http://code.google.com/p/virtual-treeview/](http://code.google.com/p/virtual-treeview/)
*   [http://www.lischke-online.de/index.php/controls/virtual-treeview-gallery](http://www.lischke-online.de/index.php/controls/virtual-treeview-gallery)
*   [树状数据结构（用于 VirtualTreeview）](https://stackoverflow.com/questions/5365365)
*   [VirtualStringTree 正确/推荐使用](https://stackoverflow.com/questions/7624319/)

* * *

是的，不要为每个项目都创建新的 SQL 文本。它既危险又缓慢（您需要删除为旧请求收集的所有数据并解析新请求）

您应该进行一个参数化查询，`Prepare`然后关闭/更改参数值/打开。

[请参阅http://bobby-tables.com/](http://bobby-tables.com/)上的原因和 Delphi 示例

* * *

“一次全部加载” rush 的一个示例是[从 Delphi 中的 sql server 表动态创建弹出菜单树](https://stackoverflow.com/questions/14356418)- 尽管我不认为 rush 对于或多或少的大树来说是一个好方法。

请注意这种方法：您*填充根*元素，然后找到一种或另一种*填充元素的方法，尚未填充，但已被其他人引用，*直到最后没有这样的元素。

当然，您可以递归地执行此操作，将树遍历到其末端-但这会要求许多嵌套的数据库查询。

您可以发出递归 SQL 请求，但它可能非常依赖于服务器，并且 RDBMS 引擎通常会限制递归深度。

一种方法可能在树控制上稍差，但在 RDBMS 上更干净、更容易，就是专门`TQueue`使用*刚刚添加的树项*。在加载了一些元素之后——最初是所有根元素——你在队列中记住了它。然后你从队列中一个接一个地删除并填充（加载和入队）它的孩子。直到队列变空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:59:26.877

我喜欢使用哈希表来创建由 keyID 索引的所有节点的索引，并使用它来构建树。它需要 2 次通过表。第一遍为每条记录创建一个根树节点，并针对树节点添加一个 keyID 的哈希条目。第二遍遍历表，在哈希中查找 parentId。如果找到它，则将当前节点移动到父节点下，否则忽略它。在第二遍结束时，您已经构建了完整的树。

```
 var i,imax,ikey,iParent : integer;
        aNode,aParentNode : TTreeNode;
        aData : TMyData;
        aContainer : TSparseObjectArray; // cDataStructs , delphi fundamentals
        aNodeIndex : TSparseObjectArray; // delphi 7
    begin
      try
        aContainer := TSparseObjectArray.Create(true);
        aNodeIndex := TSparseObjectArray.Create(False);
        imax := 10000;
        // create test data;
        for i := 1 to imax do
        begin
          aData := TMyData.Create;
          aData.iKey := i;
          aData.iParent := Random(imax); // random parent
          aData.Data := 'I:' + IntToStr(aData.iKey);
          aContainer.Item[i] := aData;
        end;

        tv1.Items.Clear;
        tv1.Items.BeginUpdate;
        // build tree
        // First Pass - build root tree nodes and create cross ref. index
        for i := 1 to imax do
        begin
          aData := TMYData(aContainer.Item[i]);
          aNode := tv1.Items.AddChild(nil,aData.Data);
          aNodeIndex.Item[aData.iKey] := aNode;
        end;
        // Second Pass - find parent node using index and move node
        for i := 1 to imax do
        begin
          aData := TMYData(aContainer.Item[i]);
          aNode := TTreeNode(aNodeIndex.Item[aData.iKey]);
          if aNodeIndex.HasItem(aData.iparent)
          then begin
                 aParentNode := TTreeNode(aNodeIndex.Item[aData.iparent]);
                 aNode.MoveTo(aParentNode,naAddChild);
               end;
        end;
        tv1.Items.EndUpdate;
        tv1.Select( tv1.Items.GetFirstNode);
      finally
        aContainer.Free;
        aNodeIndex.free;
      end;
  end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-17T20:25:19.997

我遇到了同样的问题，并想使用 SQL 来修复它，以避免对数据库服务器的过多调用（对于每个记录/递归步骤）。我们的嵌入式 RDBMS NexusDB 不允许像 oracle 或 MSSQL 这样的递归查询。所以这就是我想出的，内联解释。它允许在 1 遍中加载树，但仍使用提供的 rootid 作为起点加载整个树。我的数据库表被调用`OBJDAT`，有一个唯一的整数`ID`，父链接通过该字段`TechPar`

调用例程应该如下所示，您必须为 RootID 提供一个参数值。NULL 将从所有根中选择所有对象（具有 TachPar=NULL）

```
 SELECT Obj.* FROM TABLE(RECURTABLE(:RootID)) AS Obj 
```

结果将是一个首先使用根（也称为顶级）对象排序的表。然后您可以遍历结果表并将对象添加到您的树控件（或内存结构中），如下所示：

```
//pseudodelphicode
ResultSet:=SQLQueryResult

ResultSet.First
while not ResultSet.EOF do
begin
  NewNode:=TreeNode.Create;
  NewNode.ID:=ResultSet.ID;
  NewNode.Name:=ResultSet.Name
  ... load more relevant stuff
  ParentID:=ResultSet.TechPar
  if ParentID<>nil then
    Tree.FIndNode(ParentID).AddChild(NewNode)
  else Tree.AddRoot(NewNode)

  ResultSet.Next;
end 
```

实际完成工作的存储过程的实现是这样的：

-- NexusDB 的 SQL 存储过程变体，用于从 -- Asset Register 或库中返回数据。

```
DROP ROUTINE IF EXISTS RECURTABLE;

CREATE FUNCTION RECURTABLE(aRootID INTEGER)
RETURNS TABLE
MODIFIES SQL DATA
BEGIN

  -- pre-clean temporary tables
  CREATE LOCAL TEMPORARY TABLE #tmpsublayer
  (
    ID INTEGER,
    Name VARCHAR(50),
    UserID VARCHAR(50),
    ObjType INTEGER,
    TechPar INTEGER
  );
  CREATE LOCAL TEMPORARY TABLE #tmpobjparsublayer (LIKE #tmpsublayer);
  CREATE LOCAL TEMPORARY TABLE #tmpResultTable (LIKE #tmpsublayer);

--  for debugging purpose, ignore
--  DROP TABLE IF EXISTS #tmpobjparsublayer;
--  DROP TABLE IF EXISTS #tmpsublayer;
--  DROP TABLE IF EXISTS #tmpResultTable;

  DECLARE lRecursionCounter,lParentID INTEGER;
  DECLARE lRootPath TEXT;  
  START TRANSACTION;
  TRY
    IF (aRootID=0) OR (aRootID IS NULL) THEN
      --  No root provided: select all root records into the intermediate sublayer result set
      INSERT INTO #tmpsublayer
       SELECT
          ID,
          Name,
          UserID,
          ObjType,
          TechPar
        FROM OBJDAT
        WHERE (TechPar IS NULL) OR (TechPar=0); -- Match on TechPar in (Null,0)

    ELSE
       -- a root record was provided, select the root record into the result list

       SET lRootPath=NULL;
       SET lParentID=aRootID;
       SET lRecursionCounter=0;
       -- this loop resolves the path from the selected root object to the ultimate root object
       REPEAT
         SET lRecursionCounter=lRecursionCounter+1;
         -- avoid infinite loop by cyclical links here by usning a recursion counter watchdog
         IF lRecursionCounter>100 THEN
           SIGNAL 'Resolve root path for ('+ToStringLen(aRootID,10)+'): Maximum hierarchical depth reached.';
         END IF;
         SET lParentID=(SELECT TechPar FROM $AMOBJTABLENAME WHERE ID=lParentID);
         IF NullIf(lParentID,0) IS NULL THEN
            LEAVE;
         ELSE
           SET lRootPath=TOSTRINGLEN(lParentID,10)+COALESCE(';'+lRootPath,'');
         END IF;
         UNTIL FALSE
       END REPEAT;

      -- actually select the single root object into the intermediate sublayer result set
      INSERT INTO #tmpsublayer
      SELECT
        ID,
        Name,
        UserID,
        ObjType,
        TechPar
      FROM OBJDAT
      WHERE ID=aRootID;  // match on ID
     END IF;

    -- copy our rootlayer of results into out final output result set
    INSERT INTO #tmpResultTable
      SELECT
        *
      FROM #tmpsublayer;

    SET lRecursionCounter=0;
    -- this loop adds layers of sub objects to the result table
    REPEAT
      SET lRecursionCounter=lRecursionCounter+1;
      IF (SELECT TOP 1 ID FROM #tmpsublayer) IS NULL THEN
        LEAVE; -- empty result set, we are done get out of the loop
      END IF;

      -- watchdog for loop count to avoid infinite loops caused by cyclical links
      IF lRecursionCounter>100 THEN
        SIGNAL 'RecurSelect('+ToStringLen(aRootID,10)+'): Max hierarchical depth reached.';
      END IF;

      --  get a sublayer from the main table based on the current parent layer and technical parent field
      -- Not required DROP TABLE IF EXISTS #tmpobjparsublayer;
      DELETE FROM #tmpobjparsublayer;
      INSERT INTO #tmpobjparsublayer
        SELECT
          D.ID ID,
          D.Name Name,
          D.UserID UserID,
          D.ObjType TypeID,
          D.TechPar TechPar
      FROM #tmpsublayer P
      JOIN OBJDAT ON P.ID=D.TechPar;

      --  insert our sublayer of regular linked objects into the result table
      INSERT INTO #tmpResultTable
        SELECT
          *
        FROM #tmpobjparsublayer;

      -- clear current sublayer
      DELETE FROM #tmpsublayer;
      -- Move the newly selected objects layer to the sublayer set for the next iteration
      INSERT INTO #tmpsublayer
        SELECT
          *
        FROM #tmpobjparsublayer;

      UNTIL FALSE -- trust the LEAVE and SIGNAL statements
    END REPEAT;

    -- clean up temporary tables
    DELETE FROM #tmpobjparsublayer;
    DELETE FROM #tmpsublayer;
    COMMIT;
  CATCH TRUE 
    -- cleanup if something went wrong
    ROLLBACK;
    SIGNAL ERROR_MESSAGE;
  END;

  DROP TABLE IF EXISTS #tmpobjparsublayer;
  DROP TABLE IF EXISTS #tmpsublayer;

  -- return result
  RETURN SELECT * FROM #tmpResultTable;
END; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-21T22:07:34.347

```
procedure TdfmMed.Button1Click(Sender: TObject);
var
    NodePai : TTreeNode;
         procedure MontaFilho(Node : TTreeNode; Cod : integer);
         var
            qry : TFDQuery;
            node1 : TTreeNode;
         begin
            qry := TFDQuery.Create( nil );
            qry.Connection := dm1.FDConnection1;
            qry.close;
            qry.SQL.Add('SELECT cod, nome_grupo FROM teste WHERE parent_cod = :cod ORDER BY nome_grupo ASC');
            qry.ParamByName('cod').AsInteger := cod;
            qry.Open();
            qry.First;
            while not qry.EOF do
            begin
                node1 := TreeView1.Items.AddChild(NODE, qry.Fields[1].Value);
                MontaFilho(node1, qry.Fields[0].Value );

                qry.Next;
            end;
         end;
begin
    TreeView1.Items.Clear;

    qryGrupoPai.close;    qryGrupoPai.Open;

    qryGrupoPai.First;
    while not qryGrupoPai.EOF do
    begin
        NodePai := TreeView1.Items.Add(nil, qryGrupoPai.Fields[1].Value);
        MontaFilho( NodePai, qryGrupoPai.Fields[0].Value); 

        qryGrupoPai.Next;
    end;
end;
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-17T18:20:10.680

[我在 stackoverflow en español Consumir menu del sql server](https://es.stackoverflow.com/questions/132874/consumir-menu-del-sql-server-en-un-treeview-delphi/230439#230439)上写了一个示例，可能对其他人有用。

它使用几个字段：

*   元素 ID 的 ID
*   父 ID 的 PID
*   要执行的命令的名称
*   TreeNode 标题的 CAPTION
*   ISVISIBLE 以了解此元素是否对最终用户可见 (Y/N)。

它适用于任何菜单级别，并且旨在通过使用 TDataSource 作为参数与任何数据库一起使用

```
type
    tElementoMenu = Class(TObject)
      Comando : String;
      //Nombre : String;
      ID : String;
    End;
...
procedure TForm1.CrearMenuDeArbol(dsOrigen: TDataSource; CampoID, IDPadre,
  CampoComando, CampoCaption, CampoVisible: String; Raiz : TTreeNode = Nil);
var
  RamaActual, PrimeraRama : TTreeNode;
  ElementoMenu : TElementoMenu;
  iIndiceImagen : Integer;
begin
  RamaActual := Nil;
  PrimeraRama := Nil;
  if not assigned(Raiz) then
    VaciarArbol;

  with dsOrigen.DataSet do
  begin
    //For this example I use filter, however it can be use with WHERE sentence
    Filtered := False;
    IF not assigned(Raiz) then
      Filter := IdPadre + ' IS NULL '
    else
      Filter := IDPadre + ' = ' + TElementoMenu(Raiz.Data).ID;
    Filtered := True;

    First;
    while not Eof do
    begin
      if FieldByName(CampoVisible).AsString = 'Y' then
      begin
        ElementoMenu := TElementoMenu.Create;
        ElementoMenu.Comando := FieldByName(CampoComando).AsString;
        ElementoMenu.ID := FieldByName(CampoID).AsString;
        //ElementoMenu.Nombre := FieldByName(CampoName).AsString; //Otros datos para agregar al elemento del menu
        iIndiceImagen := 0;
        if Not Assigned(Raiz) then
          RamaActual := TreeView1.Items.AddObject(Nil, FieldByName(CampoCaption).AsString, ElementoMenu )
        else
        Begin
          RamaActual := TreeView1.Items.AddChildObject(Raiz, FieldByName(CampoCaption).AsString, ElementoMenu );
          iIndiceImagen := 1;
        End;

        RamaActual.ImageIndex := iIndiceImagen;
        RamaActual.SelectedIndex := iIndiceImagen;
      end;
      Next;
    end;

    if not Assigned(Raiz) then
      PrimeraRama := TreeView1.Items.GetFirstNode
    else
      PrimeraRama := Raiz.getFirstChild;

    while Assigned(PrimeraRama) do
    begin
      CrearMenuDeArbol(dsOrigen, CampoID, IDPadre, CampoComando, CampoCaption, CampoVisible, PrimeraRama);
      PrimeraRama := PrimeraRama.getNextSibling;
    end;    
  end;    
end;

procedure TForm1.FormClose(Sender: TObject; var Action: TCloseAction);
begin
  VaciarArbol;
end;

procedure TForm1.TreeView1DblClick(Sender: TObject);
begin
  if Assigned(treeView1.Selected) then
    ShowMessage(TElementoMenu(treeView1.Selected.Data).Comando);
end;

procedure TForm1.VaciarArbol;
var
  itm : TTreeNode;
begin
  while TreeView1.Items.Count > 0 do
  begin
    itm := TreeView1.Items[TreeView1.Items.Count-1];
    TElementoMenu(itm.Data).Free;
    TreeView1.Items.Delete(itm);
  end;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  CrearMenuDeArbol(ds1, 'ID', 'PID', 'NAME', 'CAPTION', 'ISVISIBLE');
  Treeview1.FullExpand;
end; 
```

# java - 从 ArrayList 计算平均值的方法 和数组列表

> ID：15903485
> 
> 赞同：1
> 
> 时间：2013-04-09T13:37:26.003
> 
> 标签：java

我有一个 Java 方法，它需要一个

```
ArrayList<Float> 
```

作为参数。它计算 ArrayList 的平均值，并返回该值。

现在我想通过一个

```
ArrayList<Integer> 
```

Java 不允许这样做，这在 C++ 中是可能的。

因此，只是想知道除了创建一个仅在类型上不同的相同类之外，还有哪些可用的替代方法，以及传递给每个方法的参数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T13:40:30.123

您的方法应该接受一个`List<? extends Number>`参数，从数字中获取浮点值并计算它们的平均值。

`List<? extends Number>`意思是：某个未知类型的列表是或扩展数字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T13:40:12.090

更改签名以接受：

```
List<? extends Number> 
```

而是像这样：

```
public Double avg(List<? extends Number> list) {
    // calculate average here
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T13:41:06.573

您可以使用这样的方法声明：

```
public Number average(Collection<? extends Number> values)
{
...    
} 
```

# php - 教义和序列化数据

> ID：15903486
> 
> 赞同：-3
> 
> 时间：2013-04-09T13:37:27.847
> 
> 标签：php, doctrine

我在数据库中的一列已经序列化了 id 数组。如何通过 id（在反序列化后）在另一个表中正确获取名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:47:34.983

无法根据序列化字段的内容编写查询。

您可能需要[多对多关系](http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html#many-to-many-unidirectional)

# javascript - 如何在 Safari 扩展程序上获取选定的文本？

> ID：15903488
> 
> 赞同：2
> 
> 时间：2013-04-09T13:37:37.897
> 
> 标签：javascript, safari, safari-extension

我想写一个翻译用户选择文本的插件。但我停在“获取选定的文本”上。我尝试了很多选项，但没有一个不起作用（可能是我的错）。

现在我的**global.html**看起来像这样：

```
<script >

// Set up Listener(s)
safari.application.addEventListener("command", performCommand, false);  

// Functions to perform when event is received
function performCommand(event) {
    if (event.command === "contextmenutranslate") {
        alert("first");
        alert(window.getSelection());
    }
}

</script> 
```

第二个警报返回空字符串。
我究竟做错了什么？
我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T17:18:41.727

出于安全原因，全局页面不能直接与任何网页交互。因此，要从页面中获取选定的文本，您需要使用注入脚本。然后，您可以使用[消息](http://developer.apple.com/library/safari/#documentation/Tools/Conceptual/SafariExtensionGuide/MessagesandProxies/MessagesandProxies.html)在全局页面和注入的脚本之间进行通信。

例如：

### global.js

```
safari.application.addEventListener('command', performCommand, false);
safari.application.addEventListener('message', handleMessage, false);

function performCommand(event) {
    if (event.command === 'contextmenutranslate') {
        safari.application.activeBrowserWindow.activeTab.page.dispatchMessage('getselection');
    }
}

function handleMessage(msg) {
    if (msg.name === 'theselection') {
        alert(msg.message);
    }
} 
```

### 注入的.js

```
safari.self.addEventListener('message', handleMessage, false);

function handleMessage(msg) {
    if (msg.name === 'getselection') {
        var sel = window.getSelection()+'';
        safari.self.tab.dispatchMessage('theselection', sel);
    }
} 
```

请记住在 Safari Extension Builder 中将 injection.js 设置为开始或结束脚本。

# haskell - 为什么类可以用作类型参数？有什么用？

> ID：15903490
> 
> 赞同：10
> 
> 时间：2013-04-09T13:37:46.577
> 
> 标签：haskell, typeclass

我无意中发现下面是一段完美的编译代码：

```
class SomeClass a

someValue :: Maybe (SomeClass a)
someValue = undefined 
```

我只习惯于在类型约束中查看类，所以我不明白为什么这段代码会进行类型检查以及以这种方式使用类的目的是什么。

我在 GHC 7.6.2 上。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T13:52:07.983

这是 ghc-7.6.2 中的一个错误。这应该是一个善意的错误。请报告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T13:43:58.440

错误。

> A.hs:3:21：类“SomeClass”用作类型
> 
> ```
> In the type signature for `someValue': 
> ```

# android - 如何在 Android 上将我们的应用程序作为系统应用程序运行

> ID：15903495
> 
> 赞同：3
> 
> 时间：2013-04-09T13:38:01.013
> 
> 标签：android, certificate, system, signature, platform

我们想在根设备上以根权限运行我们的应用程序。

我们有以下查询。

1.  每当我们的应用程序运行时，如何正确获取 root 权限？

2.  要将应用程序作为系统应用程序运行，需要使用平台证书对其进行签名。

    a) 我们如何从供应商处获得此证书？

    b) 如何跳过证书验证？

    c) 如何生成与任何设备的平台证书匹配的证书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:24:15.600

1) Jules 提供的链接不完整，您将无法通过调用 su 来以 root 身份执行命令。以下链接是回答[Execute a command with superuser permission in JNI method in Android](https://stackoverflow.com/q/12469403/950983)

2）第二个问题的答案可以在这里找到[如何使用系统权限编译Android应用程序](https://stackoverflow.com/questions/3598662/how-to-compile-android-application-with-system-permissions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:51:21.517

您的第一个问题在这里得到解答：[如何通过 Android SDK 获得 root 权限？](https://stackoverflow.com/questions/5293615/how-can-i-get-root-permissions-through-the-android-sdk)

回答你的第二个问题：供应商不会给你他们的平台证书，因为它会让你通过声称是他们的手机来破坏他们的手机的安全性。除非运行 Android 的自定义版本，否则您不能跳过证书验证。生成与现有平台匹配的证书需要您破解该平台的供应商私钥，这将需要在很长一段时间内大量消耗计算能力，并且几乎可以肯定超出您可用的资源水平。对不起。

# android - 从没有root的服务中捕获Android屏幕

> ID：15903496
> 
> 赞同：2
> 
> 时间：2013-04-09T13:38:02.017
> 
> 标签：android

嘿，我需要一个代码来从服务中捕获 android 屏幕并将其保存到 sdcard。所以我想做的是创建一个服务，当接近传感器被覆盖时捕获屏幕并将其保存到 sdcard

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:09:27.643

可以在非 root 设备上截屏。如果您使用 Android Ndk 创建一个可执行文件，然后将其连接到计算机以使用 android adb 启动它，您将能够访问 /dev/graphics/fb0 并使用该文件进行截屏。

google pkaystore 上的许多非 root 屏幕捕获应用程序都使用了该技术。

# c - 可以在返回指针的函数中保留局部变量地址吗

> ID：15903499
> 
> 赞同：3
> 
> 时间：2013-04-09T13:38:09.293
> 
> 标签：c

```
#include<stdio.h>

int* a(int* b){
 int a = 20;
 printf("\n  \n");
 if(a == 20){
  printf("\n return from if a : 0x%x \n",a);
  return &a;
 }
 else{
  printf("\n returning from else b : 0x%x\n",b);
  return b;
 }
}

int main(){
 int n = 10;
 int *k,*m;
 k = &n;
 m = a(k);
 printf("\n m ; 0x%x m : %d \n",m,*m);
 return 0;
} 
```

这里我返回函数返回指针的局部变量。在函数退出期间，所有变量都将从堆栈内存中移出，但是函数如何仍然保留地址“a”处的值并打印数据？

o/p：

```
 return from if a : 0xbfd8cf14

 m ; 0xbfd8cf14 m : 20 
```

该地址保留在指针 m 中，并正确打印该值。我尝试改变不同的不。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T13:39:03.880

这是您的程序调用未定义的行为。它可以免费打印任何东西（或崩溃，或做任何它想做的事）。

（也许这就是实际发生的情况：“从内存中删除”并不意味着保存变量的内存被破坏，着火或被魔术师消失。只是它失效了。因为它是一个自动变量在一个函数中，很可能发生的事情只是函数返回时堆栈指针发生了移位，使变量无效但完好无损。不过，不要依赖这个。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T13:40:35.577

`static int a = -1;`您可以通过声明即使在您从函数返回后仍然保持返回值来使返回值“可靠” `a`......但在许多情况下这是一个非常糟糕的主意......特别是如果你将是多线程的。

也就是说......返回指向临时（局部）变量的指针将在运行时造成严重破坏。因此，您永远都不想这样做……您需要将其设为静态本地或找到更好的方法来处理它。

编辑后扩展答案：当您分配`-1`为`a`局部变量时，您实际上存储`-1`在堆栈上的某个位置并`&a`指向该位置。当您从函数返回时，堆栈不会被破坏，但行为现在未定义，因为虽然地址是有效指针，但该地址处的内容很可能已被修改......例如，如果您调用另一个函数将数据推送到堆栈和/或声明局部变量，它们很可能已经覆盖了您期望的值。此外，谁知道优化器可能注入了什么疯狂。所以......它*可能会*工作*，如果*您碰巧在其他任何东西与它混淆之前读取了该值......但是您不能保证它会起作用，而且它通常会因一种实现而异。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-09T13:40:50.700

退出函数后返回的指针无效。这是一种未定义的行为。

保留的指针指向内存中您不再有权对其进行读/写的位置。

要保持地址有效，请使用`static`变量。

```
static int a = -1;
// ...
return &a; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T13:40:10.403

这是一种未定义的行为。当你离开函数时，堆栈没有被清理，所以变量的实际值仍然存在，但你不应该访问它。在显示变量的内容之前尝试调用另一个函数。尝试编译`-O3`可能不同的行为。

# jquery - 什么版本的 jQuery 兼容 jQuery UI 1.8.23

> ID：15903500
> 
> 赞同：0
> 
> 时间：2013-04-09T13:38:09.427
> 
> 标签：jquery

我在 jquery 博客上找不到此信息。请分享任何信息注册这个。

我正在使用 jquery1.7.2，所以只想确保 jQuery UI 1.8.23 与 jquery1.7.2 兼容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:42:03.330

[http://en.wikipedia.org/wiki/JQuery_UI](http://en.wikipedia.org/wiki/JQuery_UI)

它与 jquery 兼容`1.3.2+`

```
August 15, 2012   - 1.8.23  -   1.3.2+ 
```

# vb.net - VB.NET 形式的嵌入式视频 - 参考自 URL 在线和文件

> ID：15903504
> 
> 赞同：2
> 
> 时间：2013-04-09T13:38:20.880
> 
> 标签：vb.net, video-streaming

我正在尝试在 VB.NET 表单上实现一个视频播放器，它可以播放来自在线 URL（它可能来自 Youtube 或指向视频的任何其他 URL）或文件位置的视频。我尝试添加 Windows Media Player 并播放文件中的视频，效果很好，但我无法播放来自 Youtube 的视频。我做了一些研究，一些文章建议 Shockwave Flash Object 控件可以播放在线视频，但这将是一个表单上的两个不同控件实际上做同样的事情。

我想问是否有一个控件来显示可以处理两个引用的视频 - 在线 URL 和文件位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:05:08.653

简而言之，`Windows Media Player`如果给定的 URL 实际指向一个视频文件，则控件只会播放视频，例如，

`http://www.example.com/files/videos/MyVid.mp4`

`C:\Users\John\Videos\MyVid.mp4`.

您不能*直接*播放来自 YouTube 的视频，因为 Google*不会*显示来自 YouTube 的视频的直接 URL，因此您必须生成一个 URL 才能访问您想要流式传输的视频（尽管我不完全确定这是否合法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-19T10:38:15.077

我发现使用shockwave flash 和youtube 视频链接，在/watch 之前添加一个/v，可以让您流式传输视频。（您在 Flash 模块的电影属性上添加了链接）我认为您不能播放您目录中的视频，我一直在尝试为我们寻找如何做）

# svn - 如何将 iReport 连接到 SVN 存储库

> ID：15903505
> 
> 赞同：3
> 
> 时间：2013-04-09T13:38:21.820
> 
> 标签：svn, netbeans, version-control, jasper-reports, ireport

如何将 iReport 连接到我的 SVN 存储库以维护我的报告的版本控制？

我正在使用 iReport **v 5.0.1**

目前我正在使用 RapidSvn 来处理我的报告的版本控制，但我想在 iReport 中集成存储库连接？可能吗？

**注意**我尝试安装 subversion 客户端插件，但它是旧版本。我在我的服务器上使用 1.7 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-10T22:09:19.523

我们在使用 IReport 时在旧版本的 Jasper 中解决了这个问题，方法是通过**buildomatic**从服务器导出存储库，然后将结果作为目录树保存到 SVN 中。这不是最美丽的方式，但它确实有效。

Jasper Studio 内置了对 SVN 的支持，并且可以很好地使用它，但是我们找不到如何以上述其他方式一起使用 SVN 和 IReport 的选项。

# javascript - 在 MVC 中使用 $ 和 , 进行货币验证

> ID：15903506
> 
> 赞同：0
> 
> 时间：2013-04-09T13:38:23.363
> 
> 标签：javascript, asp.net-mvc, regex, asp.net-mvc-3, validation

我使用**jQuery 验证器**插件在下面定义了这个带有货币验证的模型对象

```
Model Item
{
       [DisplayFormat(DataFormatString = "{0:F2}")]
        [RegularExpression(@"^-?\d+(\.\d{1,2})?$", 
           ErrorMessage = "Enter a valid money value. 2 Decimals only allowed")]
        public decimal? Price{ get; set; }
} 
```

但是当我输入时，`$165,600.70`我得到`Enter a valid money value. 2 Decimals only allowed.`它是来自用户点的有效输入。

但是，如果他们进入`165640.73 it is working`.

我如何让这个正则表达式同时适用于两者？重写这个正则表达式有什么帮助吗？

**呈现的 HTML**

```
<input data-val="true" data-val-number="The field Price must be a number." 
data-val-regex="Enter a valid money value. 2 Decimals only allowed" 
data-val-regex-pattern="^\$?-?\d+(\.\d{1,2})?$" id="Price" name="Price" 
type="text" value="$165,600.70"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:13:30.310

你可以尝试这样的事情：

```
^\$-?\d{1,3}(?:(?:,\d{3})+|\d+)?(?:\.\d{1,2})?$ 
```

1-3 位数字后跟任意数量的单个数字（即没有逗号）或分组，末尾`,<three digits>`有一个可选的。`.<1-2 digits>`我同意其他人的建议，在处理货币时使用单个小数会令人困惑，因此您可能需要更改`{1,2}`为`{2}`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:40:12.840

你没有包括`$`在你的 regex 中。也许你想要这样的东西。

```
 ^\$?-?\d+(\.\d{1,2})?$
  ^^^ Add these 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T13:45:10.023

```
^\$-?\d{1,3}(?:,\d{3})*(?:\.\d{2})?$ 
```

*   您必须使用 $ （如果您希望它是可选的，请在之后添加 ?）
*   你必须使用 ,
*   我冒昧地将小数设为可选，并且只禁止使用 1 位小数（对货币没有多大意义）

**编辑：**

```
^\$-?\d{1,3}(?:(,?)\d{3}(?:\1\d{3})*)?(?:\.\d{2})?$ 
```

在这里，逗号是可选的。

# java - 注意 JTextField 变化和运行方法的变化

> ID：15903513
> 
> 赞同：0
> 
> 时间：2013-04-09T13:38:59.923
> 
> 标签：java, swing, jtextfield

我有一个带有 5 个 jTextFields 的摇摆应用程序。

有一个按钮可以调用“计算”​​方法，但为了用户方便，我想让应用程序在用户键入新数字/更改任何文本字段中的任何数字时不断尝试计算答案（运行方法）。到目前为止，我有 5 个不同的 KeyTyped 事件（每个 jtextfield 一个），我在其中调用该方法。

但是我有一个问题，那就是当我启动应用程序时，这将在大约 10 秒内不起作用 - 该方法将无法运行。大约 10 秒后，它工作得很好。

我怎样才能 a) 摆脱这 10 秒的延迟或 b) 显示一个对话框，如“正在加载应用程序”，直到它准备好？

或者也许是另一种方式，因为我所做的事情是非常错误的？

这是来源：[这里](https://drive.google.com/folderview?id=0B90Bcs3j7GZ9LURVS2k2M2U5UmM&usp=sharing)

我只在启动应用程序时出现的 LumpSum 主窗口中包含了这个新的“功能”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:50:29.863

此[示例](https://stackoverflow.com/a/8703807/230513)使用`FocusListener`, 来捕获`Tab`关键导航事件，并使用`PropertyChangeListener`, 来捕获 a 中的编辑事件`JFormattedTextField`：

![图片](https://i.stack.imgur.com/sifK1.png)

# java - 使用 java config 在 Spring 中处理多个配置文件的最佳实践是什么？

> ID：15903514
> 
> 赞同：9
> 
> 时间：2013-04-09T13:39:00.187
> 
> 标签：java, spring

在我目前正在进行的一个项目中，我们需要多个配置文件，即“默认”和“测试”。为了解决这个问题，我们实现了一个主上下文类 ApplicationContext.java，它带有 2 个公共静态内部类：其中一个定义了默认配置文件，另一个定义了测试配置文件。我们的 web.xml 设置为以 ApplicationContext.java 为目标。

代码如下：

```
@Configuration
//import common beans
public class ApplicationContext {

  @Configuration  
  @Profile("default")
  public static class DefaultContext {
    //default beans
  }  

  @Configuration
  @Profile("test")
  public static class TestContext {
    //test beans
  }

} 
```

我的问题是主上下文类 ApplicationContext.java 位于生产环境（即 src/main/java）中，并引用了测试环境中的文件。如果有更好的方法来定义这些配置文件，而不会将这种依赖性从生产代码引入测试代码，那当然会更好。

我们已经在一个测试类中使用一个码头实例测试了这些案例，从一个 main 方法开始。此实例使用以下命令运行：

```
System.setProperty("spring.profiles.active", "test"); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-25T09:40:54.663

如果所有 bean 在您的配置文件之间都是通用的（即两者都`DefaultContext`包含`TestContext`相同的 bean 定义），请为依赖项定义一个接口，例如：

```
public interface SystemConfiguration {

    public DataSource getDataSource();
    public SomeService getService();

} 
```

然后使用此接口实现每个配置文件：

```
@Profile("production")
@Configuration
public class ProductionConfiguration implements SystemConfiguration {
    public DataSource getDataSource() {
         // create and return production datasource
    }

    public SomeService getService() {
        // Create and return production service
    }
} 
```

然后做同样的测试。

```
@Profile("test")
@Configuration
public class TestConfiguration implements SystemConfiguration {
    public DataSource getDataSource() {
         // create and return dummy datasource
    }

    public SomeService getService() {
        // Create and return dummy service
    }
} 
```

然后你可以将它注入到你的主配置中：

```
@Configuration
public class ApplicationContext {
    @Autowired
    private SystemConfiguration systemConfiguration;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T07:40:22.017

我们最终得到的解决方案利用了 Spring 的 @ComponentScan 注释。各种应用程序上下文在多个 Maven 模块中定义。但是，通过共享相同的包命名（即 com.company.application.context），此注释可以跨测试和生产目录查找上下文。

结果代码：

```
@ComponentScan("com.company.application.context")
@Configuration
public class ApplicationContext { } 
```

假设 maven 依赖项和包命名正确，所有生产上下文和测试上下文都会自动找到。生产上下文如下所示：

```
@Configuration
@Profile("default")
//Import contexts from other modules
public class ProductionContext { } 
```

对于测试上下文也是如此。使用以下行从 main 方法运行 Jetty 正确加载测试上下文并忽略“默认”bean：

```
System.setProperty("spring.active.profiles", "test"); 
```

这个解决方案避免了从生产到测试代码的任何直接引用，尽管 maven 依赖项是必要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T13:46:08.037

使用 Maven 的特性来分离主应用程序上下文和测试应用程序上下文。

例如，如果您的主要应用程序上下文位于

> src/main/webapp/WEB-INF/myapp-config.xml

您可以将测试应用程序上下文放入

> src/test/webapp/WEB-INF/myapp-config.xml

# ios - ios 阻塞问题 - 当 return 采取行动时

> ID：15903523
> 
> 赞同：0
> 
> 时间：2013-04-09T13:39:17.290
> 
> 标签：ios, objective-c-blocks

我不确定是否有障碍，我无法弄清楚一点

我有一个块，例如使用著名的 XML 解析器（Rapture XML）

```
[data iterate:@"node" usingBlock: ^(RXMLElement *leaf) {

NSLog (@"Data");

}

NSLog (@"End of parse"); 
```

什么时候调用解析结束？当我完成所有迭代（看起来）或者它们是“时间问题”取决于循环的持续时间？

例如动画在调用后但在执行前返回，狂喜似乎在执行后返回

谢谢

格雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:52:20.207

这是程序性的，将块视为被调用以对每个元素执行工作的函数，它只是内联编写的。

关于动画，如果：`[data iterate:@"node" usingBlock: ^(RXMLElement *leaf){ }];`在主线程上做很多工作，它会阻塞主线程。

# ios - 集群注解覆盖非集群注解

> ID：15903525
> 
> 赞同：1
> 
> 时间：2013-04-09T13:39:24.597
> 
> 标签：ios, annotations, mkmapview, mapkit

我的 MKMapView 上有大约 500 个注释，我用[OCMapView](https://github.com/yinkou/OCMapView)将它们聚集在一起，替换了普通的 MKMapView。无论如何，我的注释是聚集的，但不是很好，这就是为什么我需要一点帮助。我看到了聚集的注释，它们相互更新得很好。如果我靠近它们，它们就会散开。到目前为止一切都很好，但是所有单个注释都被命名为 Cluster 并且它们的计数为零。也许这只是一个小问题/逻辑问题。对于一些理解这里一些代码给你：

```
#pragma mark - map delegate
- (MKAnnotationView *)mapView:(MKMapView *)aMapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    MKAnnotationView *annotationView;

    // if it's a cluster
    if ([annotation isKindOfClass:[OCAnnotation class]])
    {

        OCAnnotation *clusterAnnotation = (OCAnnotation *)annotation;

        annotationView = (MKAnnotationView *)[aMapView dequeueReusableAnnotationViewWithIdentifier:@"ClusterView"];
        if (!annotationView)
        {
            annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"ClusterView"];
            annotationView.canShowCallout = YES;
            annotationView.centerOffset = CGPointMake(0, -20);
        }
        //calculate cluster region
        CLLocationDistance clusterRadius = mapView.region.span.longitudeDelta * mapView.clusterSize * 111000 / 2.0f; //static circle size of cluster

        MKCircle *circle = [MKCircle circleWithCenterCoordinate:clusterAnnotation.coordinate radius:clusterRadius * cos([annotation coordinate].latitude * M_PI / 180.0)];
        [circle setTitle:@"background"];
        [mapView addOverlay:circle];

        MKCircle *circleLine = [MKCircle circleWithCenterCoordinate:clusterAnnotation.coordinate radius:clusterRadius * cos([annotation coordinate].latitude * M_PI / 180.0)];
        [circleLine setTitle:@"line"];
        [mapView addOverlay:circleLine];
        NSLog(@"%@", annotationArray);

        // set title
        clusterAnnotation.title = @"Cluster";
        clusterAnnotation.subtitle = [NSString stringWithFormat:@"Containing annotations: %d", [clusterAnnotation.annotationsInCluster count]];

        // set its image
        annotationView.image = [UIImage imageNamed:@"Pin.png"];

        // change pin image for group
        if (mapView.clusterByGroupTag)
        {
            if ([clusterAnnotation.groupTag isEqualToString:kTYPE1])
            {
                annotationView.image = [UIImage imageNamed:@"bananas.png"]; //OC examples for debug
            }
            else if([clusterAnnotation.groupTag isEqualToString:kTYPE2])
            {
                annotationView.image = [UIImage imageNamed:@"oranges.png"]; //OC examples for debug
            }
            clusterAnnotation.title = clusterAnnotation.groupTag;
        }
    }
    // If it's a single annotation
    else if([annotation isKindOfClass:[OCMapViewHelpAnnotation class]])
    {
        OCMapViewHelpAnnotation *singleAnnotation = (OCMapViewHelpAnnotation *)annotation;
        annotationView = (MKAnnotationView *)[aMapView dequeueReusableAnnotationViewWithIdentifier:@"singleAnnotationView"];
        if (!annotationView)
        {
            annotationView = [[MKAnnotationView alloc] initWithAnnotation:singleAnnotation reuseIdentifier:@"singleAnnotationView"];
            annotationView.canShowCallout = YES;
            annotationView.centerOffset = CGPointMake(0, -20);
        }
        singleAnnotation.title = singleAnnotation.groupTag;

        if ([singleAnnotation.groupTag isEqualToString:kTYPE1])
        {
            annotationView.image = [UIImage imageNamed:@"banana.png"];
        }
        else if([singleAnnotation.groupTag isEqualToString:kTYPE2])
        {
            annotationView.image = [UIImage imageNamed:@"orange.png"];
        }
    }
    // Error
    else
    {
        annotationView = (MKPinAnnotationView *)[aMapView dequeueReusableAnnotationViewWithIdentifier:@"errorAnnotationView"];
        if (!annotationView)
        {
            annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"errorAnnotationView"];
            annotationView.canShowCallout = NO;
            ((MKPinAnnotationView *)annotationView).pinColor = MKPinAnnotationColorRed;
        }
    }

    return annotationView;
}

- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
    MKCircle *circle = overlay;
    MKCircleView *circleView = [[MKCircleView alloc] initWithCircle:overlay];

    if ([circle.title isEqualToString:@"background"])
    {
        circleView.fillColor = [UIColor yellowColor];
        circleView.alpha = 0.25;
    }
    else if ([circle.title isEqualToString:@"helper"])
    {
        circleView.fillColor = [UIColor redColor];
        circleView.alpha = 0.25;
    }
    else
    {
        circleView.strokeColor = [UIColor blackColor];
        circleView.lineWidth = 0.5;
    }

    return circleView;
}

- (void)mapView:(MKMapView *)aMapView regionDidChangeAnimated:(BOOL)animated
{
    [mapView removeOverlays:mapView.overlays];
    [mapView doClustering];
} 
```

我注意到它`if([annotation isKindOfClass:[OCMapViewHelpAnnotation class]])`从未被调用，但如果集群之外有一些注释，它必须调用。

感谢您的关注

**编辑**

![注解](https://i.stack.imgur.com/2yYdj.png)

通常它充满了诸如“名称”和“街道”之类的信息，但在绘制后它会被“集群”和“包含注释：0”覆盖

**编辑 2**

```
- (void)loadKml:(NSURL *)url
{
    // parse the kml

    Parser *parser = [[Parser alloc] initWithContentsOfURL:url];
    parser.rowElementName = @"Placemark";
    parser.elementNames = @[@"name", @"Snippet", @"coordinates", @"description"];
    //parser.attributeNames = @[@"src"];
    [parser parse];

    // add annotations for each of the entries
    annotationArray = [[NSMutableArray alloc] init];

    for (NSDictionary *locationDetails in parser.items)
    {
        OCAnnotation *annotation = [[OCAnnotation alloc] init];
        annotation.title = locationDetails[@"name"];
        annotation.subtitle = locationDetails[@"Snippet"];
        NSArray *coordinates = [locationDetails[@"coordinates"] componentsSeparatedByString:@","];
        annotation.coordinate = CLLocationCoordinate2DMake([coordinates[1] floatValue], [coordinates[0] floatValue]);
        annotation.groupTag = annotation.title;
        [annotationArray addObject:annotation];
//        NSLog(@"%@", annotation.title);
    }
    [self.mapView addAnnotations:annotationArray];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:22:18.007

我是 OCMapView 的开发者。您能否解释一下，如何重现您的问题？
这听起来很不寻常，因为您已经发布了示例代码......

* * *

**更新：**
该错误隐藏在`loadKml:`您创建`OCAnnotation`.
`OCAnnotation`由 by`OCMapView`为集群保留。您不应该使用`OCAnnotation`或任何子类作为自己的注释。

# web-services - Grails + CAS + Web 服务

> ID：15903530
> 
> 赞同：0
> 
> 时间：2013-04-09T13:39:31.820
> 
> 标签：web-services, authentication, grails, spring-security, cas

我有 3 个使用 Spring Security 的 grails 应用程序。我们使用自定义身份验证提供程序来调用 Web 服务并验证用户而不是数据库。

现在我们需要对这些应用程序进行单点登录/注销，我们正在寻找 CAS 替代方案。

我读了这篇博文：http: [//blog.samimakela.fi/blog/2011/07/19/grails-and-single-sign-on/](http://blog.samimakela.fi/blog/2011/07/19/grails-and-single-sign-on/)

但是这种方法对用户/密码使用集中的文本文件。

*   如何配置我的应用程序以使用 CAS 和 Web 服务？
*   我需要配置集中的用户/密码吗？（我知道这听起来很罕见，但你只是想知道我是否可以像往常一样在一个应用程序中进行身份验证，并使用 cas 授予对其他 2 的访问权限）

提前致谢

# elasticsearch - 让 Logstash Web 在单播环境中工作：ClusterBlockException

> ID：15903535
> 
> 赞同：1
> 
> 时间：2013-04-09T13:39:45.967
> 
> 标签：elasticsearch, logstash

我正在尝试在 Windows 机器上运行 Logstash 和 Elasticsearch。

ElasticSearch 服务器设置为使用单播（无法使多播工作）。

Logstash 代理使用“elasticsearch_http”输出插件，因为我无法让常规的“elasticsearch”插件与 Elasticsearch 对话。

所以，我现在的问题是我不知道如何为 Logstash Web 后端设置命令行参数。我尝试了各种设置：

```
java ... -- web -- log c:/logstash/logstash_webui.log --backend elasticsearch:///?local

java ... -- web -- log c:/logstash/logstash_webui.log --backend elasticsearch://localhost

java ... -- web -- log c:/logstash/logstash_webui.log --backend elasticsearch://localhost/

java ... -- web -- log c:/logstash/logstash_webui.log --backend elasticsearch://localhost:9300

java ... -- web -- log c:/logstash/logstash_webui.log --backend elasticsearch://localhost:9300/

java ... -- web -- log c:/logstash/logstash_webui.log --backend "elasticsearch://localhost:9300/" 
```

但是我在尝试搜索时不断在浏览器中收到此错误：

```
blocked by: [SERVICE_UNAVAILABLE/1/state not recovered / initialized];[SERVICE_UNAVAILABLE/2/no master]; 
```

我在 logstash_webui.log 文件中看到了这个错误：

```
Java::OrgElasticsearchClusterBlock::ClusterBlockException - blocked by [SERVICE_UNAVAILABLE/1/state not recovered / initialized];[SERVICE_UNAVAILABLE/2/no master]; 
```

您能提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:57:28.780

很抱歉您遇到这些问题，我们正在努力让 Windows 上的人们更轻松。

我已经有一段时间没有使用 LogStash 打包的网络应用程序了，我不确定它是否得到维护。这是因为有一个更好的选择。[Kibana](http://kibana.org/)是一个由[rashidkpc](https://twitter.com/rashidkpc)构建的 ruby​​ 应用程序，它可以很好地挖掘在 elasticsearch 中索引的日志。

[您可以在此处查看](http://demo.logstash.net/)演示，但我不确定其中是否有任何数据。

# iphone - 使用调度队列在 uitableview 中平滑滚动，在数组中给出随机值

> ID：15903537
> 
> 赞同：1
> 
> 时间：2013-04-09T13:39:50.297
> 
> 标签：iphone, dispatch

我正在墙上显示帖子，等等，不喜欢按钮必须显示喜欢和不喜欢的数量。帖子的数据同时来自不同的 API。但是喜欢和不喜欢的值来自不同的 API。并且对于每个帖子的不喜欢都有一个 id，该 id 被馈送到 API 然后点击。因此，对于每个帖子，此 API 被点击意味着等于单元格的数量。所以我使用了调度队列，但它在数组中显示了洗牌的值，并且没有调度队列，它给出了正确的值，但是表格在滚动时被暂停并且非常慢。如何解决这个问题，请指导。

这是代码。

```
-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

Cell *cell = (Cell*)[self.mPublicFriendTable dequeueReusableCellWithIdentifier:nil];
if (cell == nil) {
    cell = [[Cell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}
else{
    cell = [[Cell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

cell.contentView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"text_boxbg.png"]];

cell.selectionStyle = UITableViewCellSelectionStyleNone;
cell.mLblName.frame = CGRectMake(50, 9, 150, 18);
cell.mLblTxt.frame = CGRectMake(50, 26, 218, 29);

if (indexPath.section == [self.mArrLike count])
{
     cell.textLabel.text = @"Load More...";
} else
{
strLk = [self.mArrLike objectAtIndex:indexPath.section];
strDLk = [self.mArrDislike objectAtIndex:indexPath.section];

   // NSLog(@"mARRUname:%d", [self.mArrUName count]);
cell.mLblName.text = [self.mArrUName objectAtIndex:indexPath.section];
CGSize size = [cell.mLblName.text sizeWithFont:[UIFont boldSystemFontOfSize:20.0]];
cell.mLblImg.frame = CGRectMake(size.width+20,14, 9, 14);

NSString *imageUrlString = [self.mArrProfileImg objectAtIndex:indexPath.section];
NSLog(@"counter at:%d",indexPath.section);
asyncImageView = [[AsyncImageView alloc]initWithFrame:CGRectMake(9, 9, 37, 37)];
[asyncImageView loadImageFromURL:[NSURL URLWithString:imageUrlString]];
[cell.contentView addSubview:asyncImageView];

cell.mLblTxt.text = [self.mArrText objectAtIndex:indexPath.section];
cell.mLblDate.text = [self.mArrDate objectAtIndex:indexPath.section];
cell.mLblTimeImg.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"message.png"]];
cell.mLblDate.textColor = [UIColor colorWithRed:109.0/255.0 green:218.0/255.0 blue:250.0/255.0 alpha:1.0];

[cell.mBtnLike setImage:[UIImage imageNamed:@"thumb_up.png"] forState:UIControlStateNormal];
    [cell.mBtnLike addTarget:self action:@selector(like:) forControlEvents:UIControlEventTouchUpInside];
//[cell.mBtnLike setBackgroundColor:[UIColor colorWithRed:47.0/255.0 green:200.0/255.0 blue:247.0/255.0 alpha:1.0]];
[cell.mBtnLike setTitleEdgeInsets:UIEdgeInsetsMake(0, 0, 0, -10)];
cell.mBtnLike.imageEdgeInsets = UIEdgeInsetsMake(0, -10, 0, 0);
[cell.mBtnLike setTitle:strLk forState:UIControlStateNormal];

[cell.mBtnDislike setImage:[UIImage imageNamed:@"thumb_down.png"] forState:UIControlStateNormal];
[cell.mBtnDislike addTarget:self action:@selector(dislike) forControlEvents:UIControlEventTouchUpInside];
 //[cell.mBtnDislike setBackgroundColor:[UIColor colorWithRed:47.0/255.0 green:200.0/255.0 blue:247.0/255.0 alpha:1.0]];
[cell.mBtnDislike setTitleEdgeInsets:UIEdgeInsetsMake(0, 0, 0, -10)];
cell.mBtnDislike.imageEdgeInsets = UIEdgeInsetsMake(0, -15, 0, 0);
[cell.mBtnDislike setTitle:strDLk forState:UIControlStateNormal];

[cell.mBtnShare setImage:[UIImage imageNamed:@"back_icon.png"] forState:UIControlStateNormal];
[cell.mBtnShare addTarget:self action:@selector(share) forControlEvents:UIControlEventTouchUpInside];
 //[cell.mBtnShare setBackgroundColor:[UIColor colorWithRed:47.0/255.0 green:200.0/255.0 blue:247.0/255.0 alpha:1.0]];
cell.mBtnShare.imageEdgeInsets = UIEdgeInsetsMake(0, 0, 0, -35);
[cell.mBtnShare setTitleEdgeInsets:UIEdgeInsetsMake(0, -50, 0, 0)];
[cell.mBtnShare setTitle:@"" forState:UIControlStateNormal];

[cell.mBtnComm setImage:[UIImage imageNamed:@"chat_icon.png"] forState:UIControlStateNormal];
[cell.mBtnComm addTarget:self action:@selector(comments) forControlEvents:UIControlEventTouchUpInside];
//[cell.mBtnComm setBackgroundColor:[UIColor colorWithRed:47.0/255.0 green:200.0/255.0 blue:247.0/255.0 alpha:1.0]];
[cell.mBtnComm setTitleEdgeInsets:UIEdgeInsetsMake(0, -52, 0, 0)];
cell.mBtnComm.imageEdgeInsets = UIEdgeInsetsMake(0, 0, 0, -50);
[cell.mBtnComm setTitle:@"30" forState:UIControlStateNormal];
}
return cell;
}

- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
  NSLog(@"count like:%d", [self.mArrLike count]);
NSLog(@"count uname:%d", [self.mArrUName count]);
if(indexPath.section == ([self.mArrLike count]-1))
{
[self loadData:indexPath.section];
}
}

-(void)loadData:(int)indexVal;
{
status = [NSString stringWithFormat:@"get"];
[self.mButtonsStatusDict setObject:status forKey:@"status"];

[self.mButtonsPidDict setObject:[self.mArrPid objectAtIndex:indexVal] forKey:@"pid"];

dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);

dispatch_async(queue, ^{

    self.mButtonsDict = [MyEventApi likeDislike:self.mButtonsUidDict post:self.mButtonsPidDict postStatus:self.mButtonsStatusDict];
    NSLog(@"buttons data dict:%@", self.mButtonsDict);

    dispatch_sync(dispatch_get_main_queue(), ^{

        [self.mArrLike addObject: [self.mButtonsDict valueForKey:@"like"]];
        [self.mArrDislike addObject: [self.mButtonsDict valueForKey:@"dislike"]];

        NSLog(@"arrLike count:%d", [self.mArrLike count]);
       // strLk = [self.mArrLike objectAtIndex:indexPath.section];
       // strDLk = [self.mArrDislike objectAtIndex:indexPath.section];

        [self.mPublicFriendTable reloadData];
    });
});
} 
```

也尝试了调度队列和异步 json，但没有得到正确的结果。请先指导以上谢谢。

![在此处输入图像描述](https://i.stack.imgur.com/ospUt.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:59:37.040

- 将 .h 文件中的变量声明为`int serialIndexVal;`

- 维护一个将跟踪 indexVal 的 serialIndexVal...

```
serialIndexVal++; 
indexVal=serialIndexVal; 
```

将以下代码放入 GCD 块中

```
__block NSString *status = [NSString stringWithFormat:@"get"];
 [self.mButtonsStatusDict setObject:status forKey:@"status"]; 
[self.mButtonsPidDict setObject:[self.mArrPid objectAtIndex:indexVal] forKey:@"pid"]; 
```

-On viewWillDisappear 让你的`serialIndexVal=0`; 再次。

# arrays - 验证电子邮件发件人是否有权发送到某个地址

> ID：15903550
> 
> 赞同：-5
> 
> 时间：2013-04-09T13:40:14.433
> 
> 标签：arrays, perl, policy, qmail, mail-sender

我被迫在 qmail 中实施发件人策略。

我有一个描述政策的文件：

```
User1@domain1.com:*@domain1.com,x@Domain2.COM,y@DOMAIN.com
user2@domain1.com:*@*
USER3@domain1.com: 
```

该文件描述了以下情况：

```
user1@domain1.com can send messages to anyone having the address defined on domain1.com, to x@domain2.com and to y@domain.com
user2@domain1.com can send messages to anyone
user3@domain1.com can not send messages at all 
```

字母大小写应该被忽略。

我必须使用 qmailqueue 和 PERL (Mail::Qmail::Queue::Message) 在 qmail 中实现这些限制，但我根本不了解 PERL。

真诚感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T17:48:37.430

> 但我对PERL一无所知。

那么解决方案是

*   雇用这样做的人，或
*   开始学习。请参阅[perl](/questions/tagged/perl "显示标记为“perl”的问题") [标签 wiki](https://stackoverflow.com/tags/perl/info)。

（顺便说一句，该语言称为*Perl*，用于运行 Perl 程序的解释器称为*perl*。其他大写形式有点不受欢迎）。

* * *

如果您决定尝试自己解决这个问题，这里有一些建议：

问题可以分解为子问题：

*   解析规则文件。使用该`split`功能相当容易。

    该函数接受零到三个参数：正则表达式、字符串、限制。如果省略限制，则生成的片段数是任意的。如果省略字符串，则使用`$_`特殊变量。如果省略了正则表达式，它将被视为`" "`赋予了特殊值：拆分所有空格，并删除前导空格。

    要解析一行，必须执行以下操作：

    *   `chomp`用,删除尾随换行符
    *   将行拆分`:`为发送者和规则字符串，最多两个片段，
    *   将规则字符串拆分`,`为单个规则，
    *   将每个规则拆分`@`为用户和域部分。

    然后可以将规则保存在数据库或 Perl 数据结构中。

*   给定一对发送者和接收者地址的匹配规则。在数据库的情况下，这可以通过一个很好的 SQL 查询来完成。对于 Perl 数据结构，您将：

    *   检索发件人地址的所有规则
    *   遍历所有规则：匹配用户和域部分并在两者匹配时返回 true。
    *   否则，返回 false

    将规则与地址匹配将首先检查规则部分（用户/域）是否为`*`. 否则，将测试这些部分是否相等。用户和域部分都必须匹配才能匹配整个规则。

*   选择一个好的 Perl 数据结构：为了让我们的生活更轻松，所有的电子邮件地址和规则都只以它们的规范化形式处理。这意味着例如小写。对于上述算法中的每个对象，可以定义一个单独的类。这可能是不可取的。反而，

    *   每个规则都可以表示为一个 2 值数组引用
    *   发送者的规则列表可以表示为规则的数组引用。
    *   发送者地址和接收者规则之间的关联可以通过散列进行。

* * *

## 代码示例

### 解析一行

其中行在 中给出`$_`，并且 hashref`$rules_for_sender`在范围内

```
chomp;
my ($sender, $rules) = map lc, split /:/, $_, 2;
my @rules = map [split /@/], split /,/, $rules;
$rules_for_sender->{$sender} = \@rules; 
```

### 遍历发件人的所有规则

```
for my $rule (@{ $rules->{$sender} } {
  my ($rule_user, $rule_domain) = @$rule;
  ...; # do stuff here
} 
```

### 剩下的……</h3>

…如果你记得的话，这几乎是微不足道的

*   正确规范化，
*   这`use strict; use warnings;`可以帮助您发现许多错误，并且
*   该字符串比较是由`eq`操作员完成的。

# facebook - 图搜索 api 中的不相关结果

> ID：15903554
> 
> 赞同：1
> 
> 时间：2013-04-09T13:40:23.070
> 
> 标签：facebook, facebook-graph-api

我知道有一些关于这个主题的错误报告给 Facebook，但我也会在这里问。

这个电话：

[https://graph.facebook.com/search?q=sebrae&type=post](https://graph.facebook.com/search?q=sebrae&type=post)

例如，返回许多没有关键字“sebrae”的结果。

对此我们有什么可以做的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:00:37.653

目前无法在 Facebook Graph 上进行精确搜索。最好的选择是自己过滤结果。有关更多详细信息，请参阅此相关问题：

[使用 Facebook Graph API 搜索确切的字符串](https://stackoverflow.com/questions/11547023/using-the-facebook-graph-api-to-search-for-an-exact-string)

# entity-framework-4 - 实体框架单向一对多级联删除

> ID：15903557
> 
> 赞同：1
> 
> 时间：2013-04-09T13:40:27.983
> 
> 标签：entity-framework-4, ef-code-first, cascading-deletes

我有两个实体：

```
public class Report : SimpleEntity
{
     public virtual ICollection<BaseFrequency> Frequencies
    {
        get
        {
            return _requencies ?? (_requencies = new HashSet<BaseFrequency>());
        }

        set
        {
            _requencies = value;
        }
    }
}

public class CustomReport : SimpleEntity
{
   public virtual string Name {get; set;}

   public Report Report { get; set; } 
} 
```

映射：

```
internal class BaseFrequency: EntityMappingBase<BaseFrequency>
    {
        public BaseFrequency()
        {
            Property(x => x.Name).HasMaxLength(250).IsRequired(); 
        }
    }

internal class MyReportMapping : EntityMappingBase<MyReport>
{
    public MyReportMapping()
    {
        HasMany(x => x.Frequencies).WithOptional(x => x.Report).HasForeignKey(x => x.ReportId).WillCascadeOnDelete(true);         
    }
} 
```

当我删除报告时，我得到“

> DELETE 语句与 REFERENCE 约束 \"Report_Frequencies\" 冲突。数据库 \"SamAssist\"、表 \"dbo.BaseFrequencies\"、列 'ReportId' 中发生冲突。\r\n语句已终止。"} 错误 DELETE 语句与 REFERENCE 约束 \"Report_Frequencies\" 冲突. 数据库 \"SamAssist\"、表 \"dbo.BaseFrequencies\"、列 'ReportId' 中发生冲突。\r\n语句已终止

数据库限制是![在此处输入图像描述](https://i.stack.imgur.com/1lCtj.png)

我应该怎么做才能修复这个错误？

# opencart - OpenCart - 折扣后显示价格

> ID：15903563
> 
> 赞同：2
> 
> 时间：2013-04-09T13:40:37.537
> 
> 标签：opencart, product, discount

我一直在使用默认模板并尝试更改它的一些功能。在我的产品页面 (catalog/view/theme/mytheme/template/product/product.tpl) 上，我想根据我的客户群显示应用折扣后的价格。

我知道我没有使用最好的解决方案来查询我的用户组，因为我有硬编码信息，但看起来是这样的：

```
<?php
    $customer_group_id = $this->customer->getCustomerGroupId();

    if (is_null($customer_group_id))
    {
        // not logged in
        // show full price
        echo $price;
    }
    else
    {
        if ($customer_group_id == "1")
        {
            // customer group used with full price
            echo $price;
        }
        else
        {
            // customer group with discount
            # ?????????????????????????????
        }
    }
?> 
```

我想知道如何以允许用户的折扣显示价格。在我的产品中，在“折扣”选项卡下，我为我想要的客户群输入了折扣，并包含以下详细信息：

```
Quantity : 0
Priority : 0
Price : 5.00
Date Start : 2000-01-01
Date End : 2050-12-31 
```

在“数据”选项卡下，我的价格设置为“7.00”。

我尝试了几段代码，但没有一个显示折扣代码。但是，如果我的用户未登录或以其他用户组中的用户身份登录，我确实会显示全价。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:07:25.480

可能您将**折扣**和**特价**混为一谈......如果您购买更多商品，折扣意味着销售，假设基本价格为 35 美元，但如果客户购买超过 10 件，您想给他们折扣假设一次购买 30 美元，如果他们一次购买超过 25 件商品，则为 20 美元，如果他们一次购买超过 100 件，则为 10 美元。

然后你会像这样设置折扣：

```
Customer Group | Quantity | Priority | Price | Start | End
pick one       | 10       | 1        | 35    |       |
pick one       | 25       | 2        | 20    |       |
pick one       | 100      | 3        | 10    |       | 
```

然后，这些折扣将仅适用于来自所需客户组的登录客户。

您希望设置的值是**Special** - 同样，特殊价格将立即提供给来自所需客户组的登录客户 - 因此不需要检查客户组...有关更多详细信息，请查看 SQL在模型类中的方法`getProduct()`（或`getProducts()`）中查询`catalog/model/catalog/product.php`- 折扣和特价已经加入并针对登录客户的客户组进行选择。

保持原样：

```
<div class="price"><?php echo $text_price; ?>
    <?php if (!$special) { ?>
    <?php echo $price; ?>
    <?php } else { ?>
    <span class="price-old"><?php echo $price; ?></span> <span class="price-new"><?php echo $special; ?></span>
    <?php } ?>
... 
```

如果您需要更改订单（特价优先），请将相应的行更改为

```
<span class="price-new"><?php echo $special; ?></span> <span class="price-old"><?php echo $price; ?></span> 
```

# c# - 用于继承的 C# 编译器

> ID：15903566
> 
> 赞同：-4
> 
> 时间：2013-04-09T13:40:45.687
> 
> 标签：c#, asp.net, inheritance

有谁知道我如何获得以下代码以在 C# 中编译。无论我尝试什么，我都会不断收到错误。我在下面列出了错误。谢谢你的帮助。

```
using System;

interface InterfaceA { void doA(); } 

class A : InterfaceA { public virtual void doA() {Console.WriteLine("Class A");} }

interface InterfaceB { void doB(); }

class B : InterfaceB { public virtual void doB(){ Console.WriteLine("Class B");}}

class C : InterfaceA, InterfaceB
{  
   static void doA(A x) { x.doA(); }
   static void doB(B x) { x.doB(); } 

  public static void main()
  {
    A _a = new A();
    B _b = new B();
    doA(_a);   
    doB(_b);
  }

}
//Errors:
//'C' does not implement interface member InterfaceA.doA()
//'C' does not implement interface member InterfaceB.doB() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:44:32.203

实际上，您没有在 C 类中实现接口方法。要么删除实现。

将代码更改 `class C : InterfaceA, InterfaceB`为`class C` （您最可能的意思）

或在 C 类中实现接口方法，就像在 A 和 B 中所做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:43:03.667

```
using System;

interface InterfaceA { void doA(); } 

class A : InterfaceA { public virtual void doA() {Console.WriteLine("Class A");} }

interface InterfaceB { void doB(); }

class B : InterfaceB { public virtual void doB(){ Console.WriteLine("Class B");}}

class C 
{
   static void doA(A x) { x.doA(); }
   static void doB(B x) { x.doB(); } 

  static void Main()
  {
    A _a = new A();
    B _b = new B();
    doA(_a);   
    doB(_b);
  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T13:43:52.607

```
 interface InterfaceA { void doA(); }

    class A : InterfaceA { public virtual void doA() { Console.WriteLine("Class A"); } }

    interface InterfaceB { void doB(); }

    class B : InterfaceB { public virtual void doB() { Console.WriteLine("Class B"); } }

    class C : InterfaceA, InterfaceB
    {
        public static void main()
        {
            A _a = new A();
            B _b = new B();
           _a.doA();
            _b.doB();
        }

        public void doA()
        {
            throw new NotImplementedException();
        }

        public void doB()
        {
            throw new NotImplementedException();
        }
    } 
```

您的方法签名与接口不匹配，因此出现错误。而且您使用的是静态而不是公开的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-09T13:43:09.630

您不能使用静态方法实现接口。

# actionscript-3 - 使用 XMLSocket 时响应延迟

> ID：15903568
> 
> 赞同：0
> 
> 时间：2013-04-09T13:40:49.917
> 
> 标签：actionscript-3, flash, apache-flex, sockets, flash-builder

我正在尝试将 Flash AS3 文件与基于 C# 的套接字服务器进行交互。服务器设计为在给定时间给出两个响应，第一个响应和第二个响应之间可能存在不同的延迟。但是我发现第二个响应与下一个响应一起到达。

```
var xmlsock:XMLSocket = new XMLSocket();
xmlsock.connect("127.0.0.1", 9231);

xmlsock.addEventListener(DataEvent.DATA, onDataHandler);

function onDataHandler(event:DataEvent):void {
    trace("[" + event.type + "] " + event.data);
} 
```

当我使用跟踪检查输出时，我发现下面我用虚线分隔了每个响应。响应 test 和 test2 应该是针对单个请求的，但是它们有两个不同的响应。

当前结果

```
[data] 
[data] test
--------------------------------------------------
[data] test2
[data] test
--------------------------------------------------
[data] test2
[data] test
--------------------------------------------------
[data] test2
[data] test
-------------------------------------------------- 
```

以下是我所期待的结果

```
[data] test
[data] test2
--------------------------------------------------
[data] test
[data] test2
--------------------------------------------------
[data] test
[data] test2
-------------------------------------------------- 
```

任何了解 XMLSocket 和解决问题的见解都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:39:53.833

我使用了 Socket 类来完成这项工作。谢谢大家的帮助...

```
var socket:Socket = new Socket("localhost", 2553);

socket.addEventListener(Event.CONNECT, socketConnectHandler, false, 0, true);
socket.addEventListener(ProgressEvent.SOCKET_DATA, socketDataHandler, false, 0, true);

function socketConnectHandler(event:Event):void{
    trace("Connection has been established ");
}

function socketDataHandler(event:ProgressEvent):void{   

    var stream:ByteArray = new ByteArray();
    socket.writeBytes(stream, 0, 0);

    var data:String = "";

    while(socket.bytesAvailable){
        data += socket.readUTFBytes(1);
    }   

    trace("data "+ data);   
} 
```

# java - 仅从 dynamodb 表中检索项目值？

> ID：15903569
> 
> 赞同：2
> 
> 时间：2013-04-09T13:40:50.577
> 
> 标签：java, amazon-web-services, amazon-dynamodb

我正在玩 dynamodb 并设置了一个非常简单的 5 个项目表，每个项目都有 2 个属性（用户 ID、名称）。然后我通过java访问它并将项目输出到终端。相关代码是

```
ScanRequest scanRequest = new ScanRequest(tableName);
ScanResult scanResult = dynamoDB.scan(scanRequest);
System.out.println("There are " + scanResult.getCount() + " items in this table\n");
System.out.println(scanResult.getItems().get(0).get("userId")); 
```

终端输出为

```
There are 5 items in this table

{N: 3, } 
```

我只想得到'3'，即只是值而不是值和类型。我知道这是基本的，但我不明白。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:47:16.873

您需要检索相关的[AttributeValue](http://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_AttributeValue.html)属性。在这种情况下，您的 AttributeValue 是一个数字 {N, 3}，因此您可以使用

```
scanResult.getItems().get(0).get("userId").getN() 
```

# ruby-on-rails-3 - ActionController::RoutingError (没有路由匹配 [GET] "/uniqueness"):

> ID：15903572
> 
> 赞同：1
> 
> 时间：2013-04-09T13:40:52.390
> 
> 标签：ruby-on-rails-3, routing, client-side-validation

我收到关于唯一性的错误，我正在使用[客户端验证](https://github.com/bcardarella/client_side_validations)gem

```
ActionController::RoutingError (No route matches [GET] "/uniqueness"): 
```

这是我正在使用的版本

```
client_side_validations (3.2.5)
client_side_validations-formtastic (2.2.1)
client_side_validations-simple_form (2.0.0)
simple_form (2.1.0, 2.0.4, 2.0.0, 1.5.2) 
```

我[在 github 上发现了这个问题](https://github.com/bcardarella/client_side_validations/issues/113)，它说要使用我已经在使用的 gem 的更新版本。请让我知道如何解决此问题。表单是使用简单表单创建的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:06:42.990

通过更改 rails.validations.js 解决了这个问题

首先我通过

```
rails g client_side_validations:copy_assets 
```

上线550

改变了

```
return "//" + window.location.host + "//" + ClientSideValidations.remote_validators_prefix + "/validators/" + validator; 
```

到

```
return "//" + window.location.host + ClientSideValidations.remote_validators_prefix + "/validators/" + validator; 
```

这样做是因为 ajax 请求是这样的

```
http://localhost:3000//validators/uniqueness?case_sensitive=false&user%5Blogin%5D=john&_=1365516039852 
```

你可以注意到有两个斜线

```
http://localhost:3000// 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T09:28:14.463

正如[https://github.com/bcardarella/client_side_validations/pull/532#issuecomment-17316312](https://github.com/bcardarella/client_side_validations/pull/532#issuecomment-17316312)中所建议的，我添加了以下行：

```
ClientSideValidations.remote_validators_prefix = null; 
```

# c# - 当同一个用户 ID 尝试在多台设备上登录时，如何终止另一台设备上的会话？

> ID：15903574
> 
> 赞同：39
> 
> 时间：2013-04-09T13:40:52.883
> 
> 标签：c#, asp.net-mvc-4, asp.net-membership, session-state, sqlmembershipprovider

我想要做的是将用户 ID 限制为一次只能登录一台设备。例如，用户 ID“abc”登录到他们的计算机。用户 ID“abc”现在尝试从他们的手机登录。我想要发生的是终止他们计算机上的会话。

Spotify 应用程序正是这样做的——Spotify 一次只允许一个用户 ID 在一台设备上登录。

我正在使用 ASP.NET 成员资格 (SqlMembershipProvider) 和表单身份验证。

我已经尝试过 Session 变量，但我不确定从这里去哪里。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-11T02:51:08.273

我想出了一个非常棒的解决方案。我已经实现的是当用户“Bob”从他们的 PC 登录，然后同一个用户“Bob”从另一个位置登录时，从第一个位置（他们的 PC）登录将被杀死，同时允许第二个登录生活。用户登录后，它会在我创建的名为“Logins”的自定义表中插入一条记录。成功登录后，将在此表中插入一条记录，其中包含“UserId、SessionId 和 LoggedIn”的值。UserId 是不言自明的，SessionId 是当前的 Session ID（在下面解释如何获取），LoggedIn 只是一个布尔值，在用户成功登录后最初设置为 True。我把这个“插入”

```
Logins login = new Logins();
login.UserId = model.UserName;
login.SessionId = System.Web.HttpContext.Current.Session.SessionID;;
login.LoggedIn = true;

LoginsRepository repo = new LoginsRepository();
repo.InsertOrUpdate(login);
repo.Save(); 
```

对于我的情况，我想对我的每个控制器进行检查，以查看当前登录的用户是否在其他地方登录，如果是，则终止其他会话。然后，当被终止的会话试图导航到我放置这些检查的任何位置时，它会将它们注销并将它们重定向到登录屏幕。

我有三种主要的方法来进行这些检查：

```
IsYourLoginStillTrue(UserId, SessionId);
IsUserLoggedOnElsewhere(UserId, SessionId);
LogEveryoneElseOut(UserId, SessionId); 
```

**将会话 ID 保存到 Session["..."]**

在这之前，我将 SessionID 保存到 AccountController 中的 Session 集合中，在`Login`( `[HttpPost]`) 方法中：

```
if (Membership.ValidateUser(model.UserName, model.Password))
{
     Session["sessionid"] = System.Web.HttpContext.Current.Session.SessionID;
... 
```

**控制器代码**

然后我在我的控制器中放置逻辑来控制这三个方法的执行流程。请注意，如果由于某种原因`Session["sessionid"]`是`null`，它只会简单地为其分配一个“空”值。这是以防万一由于某种原因它返回为空：

```
public ActionResult Index()
{
    if (Session["sessionid"] == null)
        Session["sessionid"] = "empty";

    // check to see if your ID in the Logins table has LoggedIn = true - if so, continue, otherwise, redirect to Login page.
    if (OperationContext.IsYourLoginStillTrue(System.Web.HttpContext.Current.User.Identity.Name, Session["sessionid"].ToString()))
    {
        // check to see if your user ID is being used elsewhere under a different session ID
        if (!OperationContext.IsUserLoggedOnElsewhere(System.Web.HttpContext.Current.User.Identity.Name, Session["sessionid"].ToString()))
        {
            return View();
        }
        else
        {
            // if it is being used elsewhere, update all their Logins records to LoggedIn = false, except for your session ID
            OperationContext.LogEveryoneElseOut(System.Web.HttpContext.Current.User.Identity.Name, Session["sessionid"].ToString());
            return View();
        }
    }
    else
    {
        FormsAuthentication.SignOut();
        return RedirectToAction("Login", "Account");
    }
} 
```

**三种方法**

这些是我用来检查您是否仍然登录的方法（即确保您没有被另一次登录尝试踢走），如果是这样，请检查您的用户 ID 是否在其他地方登录，如果是这样，只需`false`在 Logins 表中将其 LoggedIn 状态设置为即可启动它们。

```
public static bool IsYourLoginStillTrue(string userId, string sid)
{
    CapWorxQuikCapContext context = new CapWorxQuikCapContext();

    IEnumerable<Logins> logins = (from i in context.Logins
                                  where i.LoggedIn == true && i.UserId == userId && i.SessionId == sid
                                  select i).AsEnumerable();
    return logins.Any();
}

public static bool IsUserLoggedOnElsewhere(string userId, string sid)
{
    CapWorxQuikCapContext context = new CapWorxQuikCapContext();

    IEnumerable<Logins> logins = (from i in context.Logins
                                  where i.LoggedIn == true && i.UserId == userId && i.SessionId != sid
                                  select i).AsEnumerable();
    return logins.Any();
}

public static void LogEveryoneElseOut(string userId, string sid)
{
    CapWorxQuikCapContext context = new CapWorxQuikCapContext();

    IEnumerable<Logins> logins = (from i in context.Logins 
                                  where i.LoggedIn == true && i.UserId == userId && i.SessionId != sid // need to filter by user ID
                                  select i).AsEnumerable();

    foreach (Logins item in logins)
    {
        item.LoggedIn = false;
    }

    context.SaveChanges();
} 
```

**编辑**我还想补充一点，这段代码忽略了“记住我”功能的功能。我的要求没有涉及这个功能（事实上，出于安全原因，我的客户不想使用它）所以我把它省略了。不过，通过一些额外的编码，我很确定可以考虑到这一点。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-09T13:44:37.293

您必须将某人登录的信息存储到数据库中。这将允许您验证用户是否已经有一个现有会话。开箱即用的 ASP.NET 中的表单身份验证模块与 cookie 一起工作，您无法在服务器上知道用户是否在其他设备上拥有 cookie，除非您当然将此信息存储在服务器上。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-09T13:47:30.963

您可能想要做的是当用户登录时，您将他们的会话 ID 保存在数据库中的某个位置。然后在您访问的每个页面上，您必须检查当前会话 id 是否与数据库中存储的相同，如果不是，则将其注销。

您可能希望创建一个在 OnAuthorization 或 OnActionExecuting 方法中执行此操作的基本控制器。另一种选择是创建自己的授权过滤器（实际上，我更喜欢我自己，因为我不喜欢这样的通用基类）。

在该方法中，您将访问数据库并检查会话 ID。

请注意，他并非万无一失。有人可能会复制会话 cookie 并绕过这个问题，尽管这很模糊，大多数人可能不知道该怎么做，而且很烦人，以至于那些这样做的人不会打扰。

您也可以使用 IP 地址，但同样如此。代理或 nat 防火墙后面的两个人似乎是同一个用户。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-27T19:12:18.140

这是一种比接受的答案稍微简单的方法。

```
public static class SessionManager
    {
        private static List<User> _sessions = new List<User>();

        public static void RegisterLogin(User user)
        {
            if (user != null)
            {
                _sessions.RemoveAll(u => u.UserName == user.UserName);
                _sessions.Add(user);
            }
        }

        public static void DeregisterLogin(User user)
        {
            if (user != null)
                _sessions.RemoveAll(u => u.UserName == user.UserName && u.SessionId == user.SessionId);
        }

        public static bool ValidateCurrentLogin(User user)
        {
            return user != null && _sessions.Any(u => u.UserName == user.UserName && u.SessionId == user.SessionId);
        }
    }

    public class User {
        public string UserName { get; set; }
        public string SessionId { get; set; }
    } 
```

这样，在验证用户后的登录过程中，创建 User 类的实例并为其分配用户名和会话 ID，将其保存为 Session 对象，然后使用它调用 RegisterLogin 函数。

然后，在每次页面加载时，您都会获取会话对象并将其传递给 ValidateCurrentLogin 函数。

DeregisterLogin 函数不是绝对必要的，但会使 _sessions 对象尽可能小。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-27T00:35:09.887

我想指出，设置 Session["SessionID"] = "anything" 的一个关键原因是，在您实际将某些内容分配给会话对象之前，会话 ID 似乎在每次请求时都在不断变化。

我使用我编写的一些拆分测试软件遇到了这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-26T05:55:09.793

`sessionId`我将通过创建一个用户数组和一个`activeSessionId`变量来处理这种情况，该变量将存储`sessionId`最近成功请求的设备。然后在每个请求上，我都会检查：

*   如果`sessionId`发出此请求的设备存在且有效。
*   如果**不**一样的话`activeSessionId`。

如果是，那么我知道这个请求来自不同的设备，因此我将从以前的设备注销用户并`activeSessionId`使用当前设备的更新。

# scala - 替代模型scala

> ID：15903575
> 
> 赞同：4
> 
> 时间：2013-04-09T13:40:54.047
> 
> 标签：scala

我现在正在做一个scala课程。有一些关于替代模型的讨论。它指出：

```
def f(x1,...,xn) = B; ... f(v1,..., vn)
then
def f(x1,...,xn) = B; ... [v1/x1,...,vn/xn]B

Here, [v1/x1,...,vn/xn]B means:
The expression B in which all occurrences of xi have been replaced
by vi.
[v1/x1,...,vn/xn] is called a substitution 
```

我在这里有两个问题：

这里有什么大概念吗？ *对我来说，这只是`plug the values in`一种花哨的说法。* 用于替换的符号是否`[v1/x1,...,vn/xn]`在其他任何地方使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:49:49.757

你是对的，它本质上确实以一种奇特的方式说“插入值”。为其提供正式且明确的符号仍然是一个好主意，实际上这是理论计算机科学中的标准符号（而不是您的课程讲师编造的东西）。

特别是，“插入值”在您必须担心被绑定的变量应该是自由的情况下变得更加复杂，反之亦然。如果你对细节感兴趣，可以拿一本介绍 lambda 演算的教科书。

# model-view-controller - 一个项目有多个视图

> ID：15903576
> 
> 赞同：1
> 
> 时间：2013-04-09T13:41:01.203
> 
> 标签：model-view-controller, playframework-2.0

在我的游戏项目中，我将我的所有 javascript 和 css 链接到我的 main.scala.html 中。我还想为我的应用程序使用类似 JQuery mobile 的移动界面。一个项目可以有多个视图吗？我可以创建一个与 main 类似的包装器并将其用于移动 css/js 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:59:25.840

你可以做任何你想做的事，玩！视图非常灵活。

事件如果我不确定完全理解你想要什么，我可以给你一些建议。

**从视图加载脚本**

您可以将视图的特定脚本加载到您的`main.scala.html`.

`main.scala.html`

```
@(title: String, scripts: Html = Html(""))(content: Html)

<!DOCTYPE html>

<html>
    <head>
        <link rel="stylesheet" media="screen" href='@routes.Assets.at("stylesheets/main.css")'>
        @* By default, nothing but you can override from any view *@
        @scripts
    </head>
    <body>
        @content
    </body>
</html> 
```

`anyview.scala.html`

```
@(title: String)

@* Declare the script(s) you need for that view *@
@scripts = {
    <script src='@routes.Assets.at("javascripts/my-specific-script.js")' type="text/javascript"></script>
}

@main(title, scripts) {
    @* Some content *@
} 
```

如果视图中不需要额外的脚本，则不要传递`scripts`参数（它在 中具有默认的空值`main.scala.html`）。

**加载您需要的内容`main.scala.html`**

通过传递参数（基于您的设备检测）。

`main.scala.html`

```
@if(someParameter.isMobileDevice()) {
    <script src='@routes.Assets.at("javascripts/my-mobile-script.js")' type="text/javascript"></script>
} 
```

**那么响应式设计呢？**

您的样式可以根据用于查看页面的设备进行调整。您可能不需要加载额外的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:59:38.493

最简单的方法是......只是检查:) 无论如何，是的，你可以拥有尽可能多`layouts`的，没有限制。（根据[文档术语](http://www.playframework.com/documentation/2.0.4/JavaTemplateUseCases)，`layout`是一个视图，它是其他视图的某种包装器 - 例如默认`main.scala.html`文件）。

为了保持我以前总是将`main.scala.html`布局移动到新创建的包中的顺序：`app.views._layouts`. 我也在创建其他的......所以在你的观点中你可以很容易地使用：

```
@_layouts.main(params){
   ...
} 
```

或者

```
@_layouts.mobile(params){
   ...
} 
```

**PS**：正如 Alban 所写，也可以使用一种布局并向它们*推送*其他脚本。结合这两种技术，您可能可以做任何您需要的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:12:55.613

## My2c

对于这种用例，我最好的猜测是使用正确的工具。实际上，您真正想要的是您的应用程序能够**响应**它的使用方式。也就是说，您需要响应性。所以炒作不是;-)。

此外，在服务器端，窗口缩小的情况将很难处理......简单地说，因为它们纯粹是客户端操作 :-/ 。所以视口在 1200 像素（真实）屏幕上是 320 像素宽。

但是，您确实可以使用传递给布局的特定参数来调整它们的行为，但这需要您使用浏览器提供的信息来管理服务器端的案例......

* * *

## 那么为什么不让浏览器为你做所有事情呢？

**希望**稳定的库会有所帮助，例如： [**yepnopejs**](http://yepnopejs.com/)，它可以让您定义要加载的关于谓词的 js 文件（如`320 < screen.width`）。

或者为了减少设备之间的**重复**代码或**if-then-else**，您可以将 yesnope 与[**responsejs**](http://responsejs.com/)一起使用，这将使您有机会以声明方式声明一些“响应式”行为（什么没有 JS KoOl 啊？），如下所示：

```
<a 
   href=hi-fi.png
   data-min-width-320='<img src=lo-fi.png alt="image @ 320+">' 
   data-min-width-961='<img src=hi-fi.png alt="image @ 961+">'
> 
   text-only link @ <320px and no-js
</a> 
```

* * *

## 或者

事实上，@biesior 和 @Alban 的答案都是正确且有帮助的。我最后的接触是使用在[复合](http://www.playframework.com/documentation/2.1.0/ScalaActionsComposition)控制器中计算一次的**隐式参数**，从请求标头中提取信息（至少）。

# python - 在 sphinx 中包含特定的特殊方法

> ID：15903577
> 
> 赞同：20
> 
> 时间：2013-04-09T13:41:02.493
> 
> 标签：python, python-sphinx, autodoc

我有一堆使用“特殊方法”的类：

```
class Foo(object):
   "Foo docstring"

   attr1 = "Attribute!" #: first attribute
   attr2 = "Another Attribute!" #: second attribute

   def __init__(self):
       self.x = 12

   def say_hello(self):
       """
       say_hello(self) -> None

       Issue a friendly greeting.
       """
       print "Hello! x is {0}".format(self.x)

   def __contains__(self,other):
       """Implement ``other in self``"""
       return other == self.x 
```

现在我想为此使用 Sphinx 和 autodoc 生成 html 文档。我如何告诉 Sphinx 记录`__contains__`？我尝试添加

```
autodoc_default_flags = ['members', 'undoc-members', 'special-members'] 
```

to `conf.py`，但这也包括`__dict__`我绝对不想要的。

目前，`myproject.rst`文件的相关部分如下所示：

```
.. automodule:: myproject.foomodule
    :members:
    :undoc-members:
    :show-inheritance: 
```

**编辑**添加

```
.. automodule:: myproject.foomodule
    :members:
    :undoc-members:
    :show-inheritance:

.. automethod:: myproject.foomodule.Foo.__contains__ 
```

确实添加了该方法的文档，但在一个单独的部分中——不作为`Foo`类文档的一部分。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-06T13:12:57.003

你可以加：

```
:special-members:
:exclude-members: __dict__,__weakref__ 
```

到`.rst`文件中以显示特殊成员，除了`__dict__`和`__weakref__`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-02-28T05:55:23.983

对我有用的是添加“.. automethod:: **methodName** ”

类的文档字符串中的指令，而不是在 .rst 文件中执行。

因此，您可以将“Foo docstring”更改为

```
"""
Foo docstring

.. automethod:: __contains__
""" 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-02-28T08:10:59.157

[special-members](http://sphinx-doc.org/ext/autodoc.html)选项现在接受参数（这是 Sphinx 1.2 中的新功能）。

所以这应该工作：

```
.. automodule:: myproject.foomodule
    :members:
    :undoc-members:
    :special-members: __contains__
    :show-inheritance: 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-10-25T09:52:34.090

[从Sphinx](http://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html#confval-autodoc_default_options) 1.8 开始，您可以在`conf.py`. 例子：

```
autodoc_default_options = {
    'members': 'var1, var2',
    'member-order': 'bysource',
    'special-members': '__init__',
    'undoc-members': True,
    'exclude-members': '__weakref__'
} 
```

> 将 None 或 True 设置为该值相当于只为指令提供选项名称。

请注意，您可以在一个字符串中给出多个值：' `__init__,__call__`'。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-09T14:48:50.603

我目前对这个解决方案不是 100% 兴奋，所以我希望有人能改进它。但是，我解决此问题的方法是执行以下操作：

```
.. automodule:: myproject.foomodule
    :members:
    :undoc-members:
    :show-inheritance:

    .. autoclass:: myproject.foomodule.Foo
        :exclude-members: attr1,attr2

        .. autoattribute:: myproject.foomodule.Foo.attr1 

        .. autoattribute:: myproject.foomodule.Foo.attr2 

        .. automethod:: myproject.foomodule.Foo.__contains__ 
```

在这里，我实际上需要告诉`autodoc`避免（自动）记录类属性，然后我需要明确地重新添加它们。原因是因为显然当您显式嵌套命令时，显式命令[首先出现](http://sphinx-doc.org/ext/autodoc.html#confval-autodoc_default_flags)。如果我只是明确地说要添加`__contains__`，那么它会显示在我不喜欢的属性之前。

# symfony - 在 Symfony2 中构建面包屑

> ID：15903584
> 
> 赞同：2
> 
> 时间：2013-04-09T13:41:23.533
> 
> 标签：symfony, menu, breadcrumbs

我正在创建一个网站，并使用存储在数据库中的树结构成功地让我的导航菜单正常工作。

`Menu`作为属性的对象`active`，但我不知道如何将其设置为活动！如果我能做到这一点，那么我可以获取当前活动`Menu`的路径并使用 WhiteOctober 的 BreadcrumbsBundle 或类似的东西渲染面包屑。

我已经阅读了大量关于 SO 的问题，并且还查看了可用的不同捆绑包，但我仍然坚持如何做到这一点。

我将如何找出要设置为活动的菜单项？

编辑：

*   菜单类：[https ://gist.github.com/robcaw/c76426957ea6f262d217#file-gistfile1-php](https://gist.github.com/robcaw/c76426957ea6f262d217#file-gistfile1-php)
*   菜单控制器：[https ://gist.github.com/robcaw/af18e7c0e61f109e9bda#file-gistfile1-php](https://gist.github.com/robcaw/af18e7c0e61f109e9bda#file-gistfile1-php)

编辑2：

好的，我几乎做到了。我已经设法比较了当前路径，使用`$this->container->get('request')->getPathInfo();`to a`Menu`的 set `url`。

为此，我需要将菜单树结构展平为一个数组。当我使用 DoctrineExtensions 的 Tree 扩展时，我使用它的存储库`getChildren($node)`来执行此操作。所以现在遍历数组很容易，可以比较 url 和 path。

在面包屑控制器中，我可以`$current_item`从菜单控制器传递 ，然后再次使用 Tree 存储库及其`getPath()`递归获取给定节点的父节点的方法。

但是，仍然存在一个问题，因为网站上的某些页面没有菜单条目。因此，例如，如果我访问`site.com/news/tags/stuff`，则没有菜单条目，因此会破坏该站点。

至今：

*   [菜单控制器： https](https://gist.github.com/robcaw/61383e26d0a7637bb3f1#file-gistfile1-php) ://gist.github.com/robcaw/61383e26d0a7637bb3f1#file-gistfile1-php
*   面包屑控制器：[https ://gist.github.com/robcaw/62341672db576fcb2864#file-gistfile1-txt](https://gist.github.com/robcaw/62341672db576fcb2864#file-gistfile1-txt)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T09:18:21.057

我终于用了比我想象的要多得多的代码来管理它。

在我的标题模板中，我调用了一些自定义 Twig 扩展来呈现主菜单。在 MenuController 中，`setCurrentMenuItemAction`在渲染菜单期间调用以找出当前菜单项。需要知道当前菜单项，以便可以创建面包屑。本质上，此方法尝试匹配当前 url 路径（使用 `getPathInfo()`到主菜单中的菜单 url。

简单的部分是通过比较 url 和菜单 url 来找到精确匹配（我现在选择不处理多个精确匹配）。

如果没有找到完全匹配，即 url 不匹配任何菜单，那么它有点需要猜测要设置为当前项目的内容。首先将当前的url路径和菜单路径展开，然后我使用for循环比较每个数组的值：

```
$count = count($url_parts);
//echo $count;
$intersects = 0;
for($i = 0; $i < $count; $i++){
        if(array_key_exists($i, $child_parts)){
        if($child_parts[$i] == $url_parts[$i]){
            //echo $child_parts[$i];
            $intersects++;
        }
    }
}
return $intersects; 
```

返回值用于计算应选择哪个菜单项。这给出了与 类似的结果`array_intersect`。问题`array_intersect`在于它会比较数组，而不管值的顺序如何。例如，假设当前 url 是`/news/tag/sports`，这给出了以下的交集值：

菜单项网址：

1.  /新闻**相交：1**
2.  /新闻/一般**相交：1**
3.  /新闻/体育**相交：2**

因此`array_intersect`，使用 url`/news/tag/sports`将导致`/news/sports`成为选定的菜单。所需的选定菜单项将是`/news`，这就是我不得不放弃的原因`array_intersect`。

由于上面的菜单 #1 和 #2 的相交值都是 1，因此只需找到具有最少项目的菜单，其爆炸数组就会给出所需的菜单。

最后，如果仍然没有匹配项：在 url 和任何菜单项之间没有相似之处，则必须创建一个临时菜单。我想创建一个实例`Menu`来执行此操作，但是在使用 MenuRepository 时遇到了问题（我假设它需要一个菜单​​需要存储在数据库中），所以我只是创建了一个包含当前 url 和 url 的`end()`数组作为名字。有点凌乱 - 在某些时候可能需要改进。

# jquery - 另一个防止双击

> ID：15903587
> 
> 赞同：1
> 
> 时间：2013-04-09T13:41:30.703
> 
> 标签：jquery, animation, click

在这个[jsFiddle 中](http://jsfiddle.net/gWTj9/)，我有一个简单的自定义上滑/下滑动画（代码的所有功劳归功于 ebram tharwat）。问题是……你猜对了：双击。如果您在 500 毫秒（动画完成所需的时间）内多次单击向上/向下按钮，它会搞砸一切。我试过 stop(true); 和 preventDefault 但无济于事。任何帮助总是真正感激。

示例代码：

```
$("#upBtn").on('click', function () {
    // slide all optionMenu_* up by 80px
    var maxUp = ($('div.optionMenu').length - 3) * 90;
    if (parseInt($('.sliderContainerInside').css('top')) - 10 > -maxUp) {
        $('.sliderContainerInside').animate({
            top: parseInt($('.sliderContainerInside').css('top')) - 90 + 'px'
        }, 500);
    }
}); 
```

谢谢。

佩德罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:52:22.723

检查是否元素`.is(':animated')`并返回false；如果您希望动画在另一个被触发之前完成

```
if($('.sliderContainerInside').is(':animated')){
    return false;   
} 
```

同样对于您可以使用的顶级属性`'+=90px'`，而`'-=90px'`不是

```
parseInt($('.sliderContainerInside').css('top')) - 90 + 'px' 
```

[小提琴](http://jsfiddle.net/qpdVD/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:54:34.797

我认为这里最有用的方法是`stop`在新点击时播放动画，并且只听最后一次点击。此外，您需要根据动画元素的当前位置以外的其他内容计算您的位置，因为当您在动画中间单击时，这会让您感到厌烦。

类似于全局变量的东西：

```
var target = 10;

$("#upBtn").on('click', function () {
    // slide all optionMenu_* up by 80px
    var maxUp = ($('div.optionMenu').length - 3) * 90;
    if (target > maxUp * -1) {
        target -= 90;
        $('.sliderContainerInside').stop().animate({top: target }, 500);
    }
}); 
```

[演示](http://jsfiddle.net/AJrqu/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T13:55:59.710

如果可以使用按钮，请`<button id="upBtn">Up</button>`尝试以下[jsfiddle](http://jsfiddle.net/gWTj9/4/)：

```
if (parseInt($('.sliderContainerInside').css('top')) - 10 > -maxUp) {
        $("#upBtn").attr('disabled', 'disabled'); 
```

并在动画完成后删除 disabled 属性

```
$('.sliderContainerInside').animate({
            top: parseInt($('.sliderContainerInside').css('top')) - 90 + 'px'
        }, 500,function(){$("#upBtn").removeAttr('disabled');}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T14:04:05.327

这是一个有效的更新[演示](http://jsfiddle.net/gWTj9/5/)。

正如我在前面的评论中提到的，主要问题是您正在根据动画元素本身的当前位置确定动画的新位置。这意味着如果你在动画中间开始一个新的动画，你的偏移量会变得很不稳定。

解决方案是预先计算所有偏移量，这样无论当前状态如何，您都可以始终知道正确的动画偏移量。您可以在上面发布的 jsfiddle 中看到这一点，但这里是供参考的代码：

```
var $sliderInside = $('.sliderContainerInside'),
    $items = $('.optionMenu'),
    currentItem = 0,
    maxItem = $items.length - 3,
    itemOffsets = $items.map(function() {
        return $(this).position().top * -1 + 10 + 'px';
    }).get();

$("#upBtn").on('click', function () {
    if (currentItem >= maxItem) return;
    currentItem++;
    $sliderInside.stop().animate({
        top: itemOffsets[currentItem]
    }, 500);
});

$("#downBtn").on('click', function () {
    if (currentItem <= 0) return;
    currentItem--;
    $sliderInside.stop().animate({
        top: itemOffsets[currentItem]
    }, 500);
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T14:07:20.830

这是我的做法：

```
var place = 0;
var position = 10;
var limit = parseInt($('div.optionMenu').length) - 3;

$("#upBtn").click(function () {
    // slide all optionMenu_* up by 80px
    if(place > 0) {
        place--;
    }
    animate();
});

$("#downBtn").click(function () {
    // slide all optionMenu_* up by -80px
    if(place < limit) {
        place++;
    }
    animate();
});

function animate() {
    position = 10 - (place*90);
    $('.sliderContainerInside').stop().animate({
        top: position + 'px'
    }, 500);
} 
```

记住按钮被点击了多少次，并直接动画到正确的点。增加了不重复相同代码两次的好处。

## [jsFiddle](http://jsfiddle.net/gWTj9/6/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T13:44:30.010

`queue`选项`jQuery.animate()`不能解决您的问题吗？

# import - Magmi - Country_of_origin 未导入

> ID：15903588
> 
> 赞同：0
> 
> 时间：2013-04-09T13:41:35.947
> 
> 标签：import, magmi

我们最近开始使用 Magmi，它是一个很棒的工具。但是，我们确实注意到 country_of_manufacture 字段没有正确导入。我们需要为 csv 文件中的该字段使用不同的列标题吗？我们已经尝试过 country_of_origin ，但也没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:37:48.087

**编辑：**
在阅读了您[上一个问题](https://stackoverflow.com/questions/15821307/magmi-main-image-import-into-gallery-area)的评论后，我注意到 Dweeves 提到 Magmi`country_of_manufacture`目前不支持它，因为它使用不同的后端模型。他说他将更新 Magmi 以考虑其使用的后端模型。

* * *

在导入属性值之前，有一些事情需要准备好。

1.  CSV**列名称**必须是您尝试导入的数据的**属性代码。**您可以检查属性代码值`Catalog > Attributes > Manage Attributes`

2.  该属性必须分配给项目的**属性集**。您可以转到`Catalog > Attributes > Manage Attribute Sets`，在 CSV 行中选择您正在使用的属性集，并确保您的属性已分配给它（在左侧）。

# macos - MacOSX 上的 Unity3d 沙盒游戏中心

> ID：15903594
> 
> 赞同：3
> 
> 时间：2013-04-09T13:42:03.533
> 
> 标签：macos, unity3d, sandbox, game-center

由于不确定的原因，游戏中心无法识别该游戏。如果应用程序 GameCenter 用户已登录，当您尝试在启动时登录游戏 GameCenter 时，会显示

> Game Center 无法识别此游戏。

如果用户未登录，游戏中会出现登录窗口，但无法登录；日志显示：

> 本地用户验证失败 由于游戏中心无法识别程序，因此无法完成操作。

如果启用沙盒（沙盒`<Game>.entitlements`存在），游戏不会显示任何内容，而是将以下内容写入 Player.log：

> 本地用户身份验证失败 无法与帮助应用程序通信。

在所有情况下，如果您在游戏开始后调用身份验证，则会将身份验证执行写入日志，但 Unity 社交变量包含：`Social.localUser.userName == "Uninitialized"`, `Social.localUser.id == 0`. 而当你调用成就/排行榜接口时，它们是无内容显示的，日志显示：

> 不能同时满足约束
> ：(
> `<NSLayoutConstraint:0xfda3ea0 >H:[GKPanelCloseButton]-(NSSpace(8))-[GKPanelCloseButton] (Names: GKPanelCloseButton:0x3281910 )>`
> )
> 
> 将尝试通过打破约束来恢复 `<NSLayoutConstraint:0xfda3ea0 H:[GKPanelCloseButton]-(NSSpace(8))-[GKPanelCloseButton] (Names: GKPanelCloseButton:0x3281910 )>`
> 
> 设置为`NSUserDefault` `NSConstraintBasedLayoutVisualizeMutuallyExclusiveConstraints`在`YES`发生`-[NSWindow visualizeConstraints:]`这种情况时自动调用。
> 和/或，`objc_exception_throw`继续在调试器中捕获它。

如果你去应用程序GameCenter，看起来你已经登录了游戏，但它是在iOS下，它没有内容——没有图标，没有成就。

谷歌沉默了。需要你的帮助，如何解决这个问题。

谢谢，伊格纳特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-14T18:09:24.240

来自 Prime[31] 网站的简单信息：

> iOS 注意：要使用沙盒环境进行测试，您必须**先打开 Apple GameCenter.app 并注销**。注销后，您必须使用 Xcode 中的调试版本来访问沙箱。**发布版本不会使用沙箱服务器**，因此请务必在测试时使用调试版本。

来源： http: [//prime31.com/docs#iosGameCenter](http://prime31.com/docs#iosGameCenter)

# unit-testing - 使用带有 RavenDB EmbeddableDocumentStore 的 Machine.Fakes 单元测试

> ID：15903595
> 
> 赞同：1
> 
> 时间：2013-04-09T13:42:05.410
> 
> 标签：unit-testing, ravendb, mspec, machine.fakes

我通常在我的 MSpec 中使用 Machine.Fakes 模拟 IDocumentSession，RavenDB 的人不喜欢这种做法。如何将 EmbeddableDocumentStore 与 Machine.Fakes 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:45:15.430

要点：[https ://gist.github.com/JasonMore/5345697](https://gist.github.com/JasonMore/5345697)

**将 RavenDB InMemory 连接到 Machine.Fakes**

```
public class RavenInMemorySlowRunner
{
    public class NoStaleQueriesAllowed : IDocumentQueryListener
    {
        public void BeforeQueryExecuted(IDocumentQueryCustomization queryCustomization)
        {
            queryCustomization.WaitForNonStaleResults();
        }
    }

    public class AllDocumentsById : AbstractIndexCreationTask
    {
        public override IndexDefinition CreateIndexDefinition()
        {
            return new IndexDefinition
            {
                Name = "AllDocumentsById",
                Map = "from doc in docs let DocId = doc[\"@metadata\"][\"@id\"] select new {DocId};"
            };
        }
    }

    public static EmbeddableDocumentStore Store { get; set; }
    public static IDocumentSession Session { get; set; }

    OnEstablish context = fakeAccessor =>
    {
        fakeAccessor.Configure(x => x.For<IDocumentSession>().Use(() =>
        {
            if (Store == null)
            {
                Store = new EmbeddableDocumentStore { RunInMemory = true };
                Store.RegisterListener(new NoStaleQueriesAllowed());
                Store.Initialize();

                // RegisterServicesWithNinject is in the project where the indexes live
                IndexCreation.CreateIndexes(typeof(RegisterServicesWithNinject).Assembly, Store);
                IndexCreation.CreateIndexes(typeof(RavenInMemorySlowRunner).Assembly, Store);
            }

            if (Session == null)
            {
                Session = Store.OpenSession();
            }

            return Session;
        }));

    };

    OnCleanup subject = subject =>
    {
        Session.Advanced.DocumentStore.DatabaseCommands.DeleteByIndex("AllDocumentsById", new IndexQuery());
        Session.SaveChanges();
        Session.Dispose();
    };
} 
```

**考试**

```
public class CurrentSiteModelServiceSpecs : WithSubject<CurrentSiteModelService>
{
    Establish that = () =>
    {
        // use the raven in memory runner since 
        // we are using lots of raven magic in this service
        With(new RavenInMemorySlowRunner());
    };
}

/// <summary>
/// Determine Site Model for Dev
/// </summary>
public class When_Determining_SiteModel_for_dev : CurrentSiteModelServiceSpecs
{
    public static SiteViewModel _siteViewModelResult;
    public static IHttpCookie _cookie;

    Because of = () =>
        _siteViewModelResult = Subject.DetermineSiteModelForDevEnvironment();
}

public class And_Cookie_not_set : When_Determining_SiteModel_for_dev
{
    It returns_null = () =>
        _siteViewModelResult.ShouldBeNull();
}

public class And_Cookie_set : When_Determining_SiteModel_for_dev
{

    Establish that = () =>
    {
        _cookie = An<IHttpCookie>();
        _cookie.Value = "site/123";

        The<ICookieService>()
            .WhenToldTo(x => x.GetCookie(".CMS3DevSite"))
            .Return(_cookie);

        var site1 =  new SiteModel{ Id = "site/123", HostName = "foo" };
        var site2 =  new SiteModel{ Id = "site/456", HostName = "bar" };

        The<IDocumentSession>().Store(site1);
        The<IDocumentSession>().Store(site2);
        The<IDocumentSession>().SaveChanges();

    };

    It loads_site = () =>
        _siteViewModelResult.HostName.ShouldEqual("foo");
}

public class And_Cookie_set_but_site_does_not_exist : When_Determining_SiteModel_for_dev
{
    Establish that = () =>
    {
        _cookie = An<IHttpCookie>();
        _cookie.Value = "site/123";

        The<ICookieService>()
            .WhenToldTo(x => x.GetCookie(".CMS3DevSite"))
            .Return(_cookie);
    };

    It returns_null = () =>
        _siteViewModelResult.ShouldBeNull();
} 
```

**我正在测试的服务**

公共接口 ICurrentSiteModelService { RedirectToResult SetSiteModel(string path, Uri url); }

```
public class CurrentSiteModelService : ICurrentSiteModelService
{
    readonly IDocumentSession _documentSession;
    readonly ICookieService _cookieService;

    public CurrentSiteModelService(
        IDocumentSession documentSession,
        ICookieService cookieService)
    {
        _documentSession = documentSession;
        _cookieService = cookieService;
    }

// cruft removed here

    // load site in dev mode based on cookie.
    internal SiteViewModel DetermineSiteModelForDevEnvironment()
    {
        var cookie = _cookieService.GetCookie(".CMS3DevSite");
        if (cookie != null && !String.IsNullOrEmpty(cookie.Value))
        {
            SiteViewModel site = _documentSession.
                Query<SiteViewModel, SiteViewIndex>()
                .Where(s => s.Id == cookie.Value)
                .AsProjection<SiteViewModel>()
                .FirstOrDefault();

            if (site != null)
            {
                return site;
            }
        }

        return null;
    }
} 
```

# c# - 从 C++/CX 代码调用 C# 方法

> ID：15903598
> 
> 赞同：0
> 
> 时间：2013-04-09T13:42:21.710
> 
> 标签：c#, c++, visual-studio, windows-phone-8, c++-cx

我已经看过[这篇文章](https://stackoverflow.com/questions/14434874/calling-c-sharp-method-from-c-code-in-wp8)，但就我而言，我只有原生 Direct X 项目。在这种情况下，我可以从 C++/CX 调用 C# 方法吗？

# java - 将 EditText 更改为 TextView

> ID：15903599
> 
> 赞同：1
> 
> 时间：2013-04-09T13:42:29.257
> 
> 标签：java, android

我想更改`TextView`to`EditText`和`TextView`to `EditText`，因此我决定在 android 上使用该`ViewSwitcher`元素，我在[android developer website](http://developer.android.com/reference/android/widget/ViewSwitcher.html)上阅读了它。

但是我仍然有一些我不明白的观点：

1.  如何确定当前的开关？（例如，仅显示`EditText`，而使 不可见`TextView`）

这是我的代码：

```
 <ViewSwitcher
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/my_switcher"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <TextView
            android:id="@+id/clickable_text_view"
            android:clickable="true"
            android:onClick="TextViewClicked"
            android:text="@string/some_value" />

        <EditText
            android:id="@+id/hidden_edit_view"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="@string/some_value" >
        </EditText>
    </ViewSwitcher> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:45:57.683

您正在使非常简单的任务复杂化。将您的`EditText`and`TextView`放入`FrameLayout`or中`RelativeLayout`，然后`setVisibility()`在需要时隐藏一个并显示另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:50:22.063

用这个

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/my_switcher"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<TextView
        android:id="@+id/clickable_text_view"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:clickable="true"
        android:onClick="TextViewClicked"
        android:text="@string/some_value" 
        android:visibility="gone"/>

<EditText
        android:id="@+id/hidden_edit_view"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@string/some_value" >
</EditText> 
```

并随时更改代码的可见性`EditText`或`TextView`代码的可见性。

注意：默认为`TextView`不可见。

希望有帮助。

# ruby-on-rails - 后台作业的heroku postgress连接未打开错误

> ID：15903600
> 
> 赞同：0
> 
> 时间：2013-04-09T13:42:32.490
> 
> 标签：ruby-on-rails, postgresql, heroku

错误：

```
ActiveRecord::StatementInvalid: PG::Error: connection not open : UPDATE "delayed_jobs" SET locked_by = null, locked_at = null WHERE (locked_by = '...') 
```

它发生在 rake 作业中：为部署在 heroku 并使用 postgres 数据库的应用程序工作。Backtrace 没有向我提供有关哪个任务导致失败的任何信息：

```
activerecord-3.2.12/lib/active_record/connection_adapters/postgresql_adapter.rb:1153→ async_exec
activerecord-3.2.12/lib/active_record/connection_adapters/postgresql_adapter.rb:1153→ exec_no_cache
activerecord-3.2.12/lib/active_record/connection_adapters/postgresql_adapter.rb:673→ block in exec_delete
activerecord-3.2.12/lib/active_record/connection_adapters/abstract_adapter.rb:280→ block in log
activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20→ instrument
activerecord-3.2.12/lib/active_record/connection_adapters/abstract_adapter.rb:275→ log
newrelic_rpm-3.3.3/lib/new_relic/agent/instrumentation/active_record.rb:31→ block in log_with_newrelic_instrumentation
newrelic_rpm-3.3.3/lib/new_relic/agent/method_tracer.rb:242→ trace_execution_scoped
newrelic_rpm-3.3.3/lib/new_relic/agent/instrumentation/active_record.rb:28→ log_with_newrelic_instrumentation
activerecord-3.2.12/lib/active_record/connection_adapters/postgresql_adapter.rb:672→ exec_delete
activerecord-3.2.12/lib/active_record/connection_adapters/abstract/database_statements.rb:96→ update
activerecord-3.2.12/lib/active_record/connection_adapters/abstract/query_cache.rb:14→ update
activerecord-3.2.12/lib/active_record/relation.rb:294→ update_all
activerecord-3.2.12/lib/active_record/relation.rb:278→ update_all
activerecord-3.2.12/lib/active_record/querying.rb:7→ update_all
delayed_job_active_record-0.3.2/lib/delayed/backend/active_record.rb:44→ clear_locks!
delayed_job-3.0.3/lib/delayed/plugins/clear_locks.rb:9→ ensure in block (2 levels) in <class:ClearLocks>
delayed_job-3.0.3/lib/delayed/plugins/clear_locks.rb:9→ block (2 levels) in <class:ClearLocks>
delayed_job-3.0.3/lib/delayed/lifecycle.rb:78→ call
delayed_job-3.0.3/lib/delayed/lifecycle.rb:78→ block (2 levels) in add
delayed_job-3.0.3/lib/delayed/lifecycle.rb:60→ call
delayed_job-3.0.3/lib/delayed/lifecycle.rb:60→ block in initialize
delayed_job-3.0.3/lib/delayed/lifecycle.rb:78→ call
delayed_job-3.0.3/lib/delayed/lifecycle.rb:78→ block in add
delayed_job-3.0.3/lib/delayed/lifecycle.rb:65→ call
delayed_job-3.0.3/lib/delayed/lifecycle.rb:65→ execute
delayed_job-3.0.3/lib/delayed/lifecycle.rb:38→ run_callbacks
delayed_job-3.0.3/lib/delayed/worker.rb:127→ start
delayed_job-3.0.3/lib/delayed/tasks.rb:9→ block (2 levels) in <top (required)>
rake-10.0.3/lib/rake/task.rb:228→ call
rake-10.0.3/lib/rake/task.rb:228→ block in execute
rake-10.0.3/lib/rake/task.rb:223→ each
rake-10.0.3/lib/rake/task.rb:223→ execute
rake-10.0.3/lib/rake/task.rb:166→ block in invoke_with_call_chain
/usr/local/lib/ruby/1.9.1/monitor.rb:201→ mon_synchronize
rake-10.0.3/lib/rake/task.rb:159→ invoke_with_call_chain
rake-10.0.3/lib/rake/task.rb:152→ invoke
rake-10.0.3/lib/rake/application.rb:143→ invoke_task
rake-10.0.3/lib/rake/application.rb:101→ block (2 levels) in top_level
rake-10.0.3/lib/rake/application.rb:101→ each
rake-10.0.3/lib/rake/application.rb:101→ block in top_level
rake-10.0.3/lib/rake/application.rb:110→ run_with_threads
rake-10.0.3/lib/rake/application.rb:95→ top_level
rake-10.0.3/lib/rake/application.rb:73→ block in run
rake-10.0.3/lib/rake/application.rb:160→ standard_exception_handling
rake-10.0.3/lib/rake/application.rb:70→ run
rake-10.0.3/bin/rake:33→ <top (required)>
[PROJECT_ROOT]/vendor/bundle/ruby/1.9.1/bin/rake:19→ load
[PROJECT_ROOT]/vendor/bundle/ruby/1.9.1/bin/rake:19→ <main> 
```

所以我猜它发生在环境设置期间。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:37:44.983

看来您正在使用`new relic`，并且似乎存在此问题的已知问题，请[在 github 上查看](https://github.com/scottley/dj_rpm)[此处](https://github.com/collectiveidea/delayed_job/issues/473)和此处

对于解决方案，也许您可​​以使用一些替代解决方案。看看这个问题[https://stackoverflow.com/questions/4840319/cheaper-alternatives-to-new-relic](https://stackoverflow.com/questions/4840319/cheaper-alternatives-to-new-relic)它可能对你有帮助。相反，您可以尝试[https://www.scoutapp.com/](https://www.scoutapp.com/)

另请查看这篇文章[http://drewblas.com/2008/05/29/comparison-of-rails-monitoring-apps/](http://drewblas.com/2008/05/29/comparison-of-rails-monitoring-apps/)并确定最适合您的解决方案。

如果您需要任何其他帮助，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:37:10.553

你看过postgres日志吗？ [https://devcenter.heroku.com/articles/heroku-postgresql#monitoring-logging](https://devcenter.heroku.com/articles/heroku-postgresql#monitoring-logging)

# php - php 一个月内的唯一id

> ID：15903606
> 
> 赞同：1
> 
> 时间：2013-04-09T13:42:49.067
> 
> 标签：php

在一个月和一年中，我需要唯一的 ID（尽可能唯一）。代码必须简短。会计软件需要代码作为条目/记录的识别号。

如果公司在一个月内的交易不超过 10 000 次，则目标是使其独一无二。另一个目标是代码必须尽可能短，并且 php 代码尽可能短并且使用尽可能少的服务器资源。

不能使用 Mysql 自动增量，例如如果每个月有 10 000 个事务，那么几年后这个数字会很长。

目前决定使用这样的

```
 date("m"). '-' .substr(md5(uniqid(rand(), true)), -20, 4); 
```

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T13:52:25.993

我会承认你在自欺欺人。一个标准的 mysql 自动增量 (INT) 将上升到 4,294,967,296。因此，以每月 10,000 笔交易的速度计算，您只能使用 35,791 年。

当然，如果这还不够，您可以使用 BIGINT，在这种情况下，您将有 153,722,867,280,912 年的时间来解决问题。这比预测的宇宙寿命长了好几倍。

这种事情是自动增量的确切用例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T13:53:35.713

**50**年后，您的 ID 将为**50x12x10.000 = 6.000.000**。这是非常小的 ID `mysql`。

如果您不想向您的用户显示那个长 ID，您可以执行[dechex](http://php.net/manual/en/function.dechex.php)

```
$userFriendlyId = dechex($id); 
```

并使用[hexdec从用户友好的 id 进行查询](http://www.php.net/manual/en/function.hexdec.php)

```
die(dechex(6000000)); //will output 5b8d80 
```

或其他[转换](http://www.php.net/manual/en/function.base-convert.php)，感谢约翰。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-09T14:12:58.020

首先，我也会选择自动增量。即使您选择使用提到的代码（月份+随机内容），我也建议您使用数字（int/bigint）自动增量 id。您应该使用此 id '在表面之下'让您的代码与数据库进行通信（引用/查找记录）。

因此，对于“月份+随机内容”标识符，我不建议使用任何东西，`uniqid()`因为它基于微秒，如果两个事务将在同一微秒发生，则不是唯一的。另外我不鼓励使用`md5()`，因为这个函数对于散列非常有用，但是如果你只使用它来生成字符，它会大大降低你的代码速度。

此外，您自己的代码建议会生成 4 个随机字符，可能是 0-9 或 af（十六进制），为您提供 16 种可能性。16 种可能性的 4 个字符为您提供 16x16x16x16 = 65,536 个唯一字符串。很有可能在渲染 10,000 个这些字符串时，您会得到重复项。

我建议您自己从字符 0-9、az 和 AZ 生成一个随机字符串，每个字符为您提供 36 种可能性，4 个字符为您提供 36x36x36x36 = 1,679,616 个唯一字符串。更多的字符可以减少重复（碰撞）的可能性。你可以这样做：

```
function randString($length = 4) {
    $randChars = 'abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';
    $randString = ''; 
    while (strlen($randString) < abs(intval($length))) {
        $randString .= substr($randChars, rand(0, strlen($randChars)-1), 1); 
    }   
    return $randString;
}

$id = date('m') . randString(4); 
```

我还会`-`在月份和随机字符之间省略破折号（''），因为这样可以为您节省 1 个字符，并且您知道前两个字符将始终是月份的编号。

**编辑：做了一些测试**

我已经对碰撞进行了一些测试：我已经渲染了 10,000 个随机字符串一百次，并且每次都检查唯一性。使用长度 3、4（如您所做的）、5 和 6 完成此操作。结果如下：

```
-------- Length 3 ------------
Minimal duplicates: 170
Maximum duplicates: 241
Average duplicates: 207.05
-------- Length 4 ------------
Minimal duplicates: 0
Maximum duplicates: 8
Average duplicates: 3.19
-------- Length 5 ------------
Minimal duplicates: 0
Maximum duplicates: 2
Average duplicates: 0.05
-------- Length 6 ------------
Minimal duplicates: 0
Maximum duplicates: 0
Average duplicates: 0 
```

[正如Mark B](https://stackoverflow.com/questions/15903606/php-unique-id-within-a-month#comment22648410_15903739)在提到生日问题时也指出的那样，不能排除绝对 0% 的碰撞几率。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T13:52:39.723

只需使用[uniqid()](http://php.net/manual/en/function.uniqid.php)。它旨在产生全球独特的价值，而不仅仅是每个月或每年的独特价值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T13:49:17.130

```
date("m").'-'.time().rand(0,9999) 
```

我想就够了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T13:58:55.263

我会建议几个数字哈希

```
 $random_hash = substr(md5(uniqid(rand(), true)), 10, 10);
 echo date('m-Y-').$random_hash ; 
```

但我没有。出于会计原因，输出中唯一主键与 date('mY') 的组合可能会更好。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-09T13:51:22.843

怎么样使用公司ID，我相信你们有，月/年和md5，然后取前10个字符。这将永远是独一无二的。

# mysql - 使用 >= 、 < 、> 或什至在不在 mysql 存储过程中工作但在外部作为单独查询工作的日期比较

> ID：15903614
> 
> 赞同：-3
> 
> 时间：2013-04-09T13:43:20.067
> 
> 标签：mysql, date, stored-procedures, comparison

```
/*Table structure for table `testtable` */

DROP TABLE IF EXISTS `testtable`;

CREATE TABLE `testtable` (
  `tid` bigint(20) unsigned NOT NULL auto_increment,
  `tcode` bigint(20) default NULL,
  `tname` varchar(50) default NULL,
  `tdate` date default NULL,
  `ttime` timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,
  `tnumeric` decimal(10,2) default NULL,
  `tdecimal` decimal(8,2) default NULL,
  PRIMARY KEY  (`tid`)
) ENGINE=InnoDB AUTO_INCREMENT=110 DEFAULT CHARSET=latin1;

/*Data for the table `testtable` */

insert  into `testtable`(`tid`,`tcode`,`tname`,`tdate`,`ttime`,`tnumeric`,`tdecimal`) values (100,80,'test name text1','2012-11-03','2012-11-03 00:00:00','123.23','456.23'),(101,81,'test name text2','2012-11-04','2012-11-04 00:00:00','78.23','456.23'),(102,82,'test name text3','2012-11-05','2012-11-05 00:00:00','456.23','456.23'),(103,83,'test name text4','2012-11-06','2012-11-06 00:00:00','81.23','456.23'),(104,84,'test name text5','2012-11-20','2013-03-20 16:13:25','333.23','456.23'),(105,84,'test name text5','2012-11-15','2013-04-09 18:45:21','333.23','456.23'),(106,84,'test name text5','2013-03-01','2013-03-20 16:16:11','333.23','456.23'),(107,84,'test name text5','2012-11-10','2013-03-20 16:13:14','333.23','456.23'),(108,84,'test name text5','2012-11-07','2012-11-07 00:00:00','0.00','456.23'),(109,84,'test name text5','2012-11-22','2013-03-20 16:16:02','333.23','0.00');

----------------------------------------------------------------------------------------

CREATE DEFINER=`root`@`localhost` PROCEDURE `testProc`(
IN tdate VARCHAR(15)

)
BEGIN
    DECLARE a,b,c DECIMAL(10,2);

    -- SELECT * FROM `testtable` WHERE `tdate` >='2012-11-06';
    -- SELECT * FROM `testtable` WHERE `tdate` between STR_TO_DATE('06/11/2012', '%d/%m/%Y') and STR_TO_DATE('30/11/2012', '%d/%m/%Y');
    -- SELECT * FROM `testtable` WHERE `tdate` < STR_TO_DATE('2012-11-06', '%Y-%d-%m');

    SELECT * FROM `testtable` WHERE `tdate` < tdate;

    -- select STR_TO_DATE(tdate, '%d/%m/%Y');
    -- select * from `testtable`;

    END$$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:45:08.537

它不起作用，因为*在参数名称*和*列名称*之间发生了名称冲突。更改参数名称，它肯定会工作，

```
DELIMITER $$
CREATE DEFINER=`root`@`localhost` PROCEDURE `testProc`
(
     IN _tdate date
)
BEGIN
    DECLARE a,b,c DECIMAL(10,2);
    SELECT * FROM `testtable` WHERE `tdate` < _tdate;
END$$
DELIMITER ; 
```

我敢打赌，无论您在参数中传递什么值，您当前的过程都会返回一个空集。这是因为`tdate`总是等于`tdate`而不是`tdate < _tdate`。

还将参数的数据类型更改为`date`not `VARCHAR(15)`。

# java - 黑白棋游戏：如何计算 64 格网格视图中的格数

> ID：15903621
> 
> 赞同：0
> 
> 时间：2013-04-09T13:43:50.137
> 
> 标签：java, android, gridview

我正在设计一个需要 64 个单元格（8*8）的网格视图的 android 游戏。此网格视图将允许用户在每个单元格中放置白色和黑色圆盘。我已经做到了，我想知道如何计算白色和黑色分别占用的单元格数量..任何帮助将不胜感激

```
OnItemClickListener boardListener = new OnItemClickListener()    {
               @Override
               public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                   //to add toast

                   if (board[position] == 0) {

                   board[position]=playerNo;
                    if (playerNo==1) {
                        playerNo=2;

                    }
                    else{
                        playerNo=1;
                    }
             boardAdapter.notifyDataSetChanged();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:54:32.207

您需要遍历每个单元格并使用 for 循环进行检查。尝试更具体，你的问题越具体，你的答案就越具体（因此更有帮助）。

```
public int cellCount(Board board, int playernum) {
    int count = 0;
    for (int i = 0; i < board.length; i++)
        if (board[i] == playernum)
            count++;
    return count;
} 
```

# c# - 将输入值映射到复杂结构

> ID：15903629
> 
> 赞同：0
> 
> 时间：2013-04-09T13:44:28.543
> 
> 标签：c#, asp.net

假设我有以下课程：

```
[Serializable]
public class Data{
    public string Prop1 { get; set;}
    public int Prop2 { get; set; }
} 
```

我正在构建一个自定义服务器控件，它将其值存储到一个`input type=hidden`字段中，该字段包含此类的 json 序列化版本（由客户端的某种 javascript 使用）。此值可能会被 javascript 代码修改，并且在客户端和服务器端都应该始终准确。

首次启动时，预期的 Html 输出为：

```
<input type="hidden" value="{ Prop1:'zzz', Prop2: 42 }" /> 
```

为了方便开发人员使用，我想在我的服务器控件中发布一个这种类型的属性，可以直接编写，包括嵌套属性：

```
public class MyControl : WebControl {

    public Data Data {
        get; // correct implementation to be found
    }

}

// somewhere else

void foo(){
    var myControl = (MyControl)FindControl("my");
    myControl.Data.Prop1 = "some value";
    myControl.Data.Prop2 = 1234;
} 
```

**我应该如何编写自定义控件的 Data 属性？**

到目前为止，我已经编写了这段代码：

```
public class MyControl : Control
{
    protected HiddenField inputInternalValue;

    protected override void CreateChildControls()
    {
        this.inputInternalValue = new HiddenField();
        this.Controls.Add(this.inputInternalValue);
    }

    private void inputInternalValue_ValueChanged(object sender, EventArgs e)
    {
        if (!string.IsNullOrEmpty(inputInternalValue.Value))
        {
            // use of Newtonsoft's Json convert
            m_Value = JsonConvert.DeserializeObject<MyControlValue>(inputInternalValue.Value);
        }
    }

    protected override void OnPreRender(System.EventArgs e)
    {
        base.OnPreRender(e);

        inputInternalValue.Value = JsonConvert.SerializeObject(Value);

    }

    [Serializable]
    public class MyControlValue
    {
        public string Prop1 {get; set;}
        public string Prop2 {get; set;}
        public static MyControlValue Default()
        {
            return new MyControlValue
            {
                Prop1 = "some default value",
                Prop2 = "999"
            };
        }
    }

    private MyControlValue m_Value;

    public MyControlValue Value
    {
        get
        {
            EnsureChildControls();
            if (m_Value == null)
            {
                if (!string.IsNullOrEmpty(inputInternalValue.Value))
                {
                    // use of Newtonsoft's Json convert
                    m_Value = JsonConvert.DeserializeObject<MyControlValue>(
                        inputInternalValue.Value
                        );
                }
                else
                {
                    m_Value = MyControlValue.Default();
                }
            }
            return m_Value;
        }
    }        
} 
```

但是，此代码仅在第一次回发时按预期工作。如果我在页面上添加一个按钮，我尝试在其中读取值，则将保留第一个回发值，第二个则不保留。

我认为我的问题与页面生命周期有关。我不能确定回读已经完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:12:29.813

在[Msdn 的页面： IPostBackDataHandler Interface](http://msdn.microsoft.com/library/system.web.ui.ipostbackdatahandler.aspx)的帮助下，我找到了一个可行的解决方案。

我没有将存储嵌套到`<asp:hidden>`控件中，而是手动编写了回发处理。

这是结果：

```
public class MyControl : Control
{

    protected override void CreateChildControls()
    {
        // other controls
    }

    public MyControlValue Value
    {
        get
        {
            var obj = ViewState["Value"];
            return (MyControlValue )(obj != null ? obj : ViewState["Value"] = MyControlValue .Default());
        }
        set
        {
            ViewState["Value"] = value;
        }
    } 

    public bool LoadPostData(string postDataKey, System.Collections.Specialized.NameValueCollection postCollection)
    {
        var presentValue = JsonConvert.SerializeObject(Value);
        var postedValue = postCollection[postDataKey];

        if (!string.IsNullOrEmpty(presentValue) && !presentValue.Equals(postedValue))
        {
            Value = JsonConvert.DeserializeObject<MyControlValue>(postedValue);
            return true;
        }
        else
        {
            return false;
        }
    }

    public void RaisePostDataChangedEvent()
    {
        OnValueChanged(EventArgs.Empty);
    }

    #region Event

    public event EventHandler ValueChanged;

    protected virtual void OnValueChanged(EventArgs e)
    {
        if (ValueChanged != null) ValueChanged(this, e);
    }

    #endregion Event

    [Serializable]
    public class MyControlValue
    {
        public string Prop1 {get; set;}
        public string Prop2 {get; set;}
        public static MyControlValue Default()
        {
            return new MyControlValue
            {
                Prop1 = "some default value",
                Prop2 = "999"
            };
        }
    }
} 
```

# php - 将 windows 用于应用程序和 linux 用于数据库时出错

> ID：15903637
> 
> 赞同：-4
> 
> 时间：2013-04-09T13:44:41.403
> 
> 标签：php, mysql

我在 Windows 操作系统中有我的文件，在 Linux 操作系统中有数据库。当我在浏览器中点击 url 时，出现以下错误，

> 警告：mysql_connect() [function.mysql-connect]: [2002] 无法建立连接，因为目标机器在 D:\Xampp 安装文件\xampp 中主动（尝试通过 tcp://192.168.1.211:3306 连接） \htdocs\mobilewebservice\DBconnect.php 在第 3 行

请帮我，

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:01:24.193

你的mysqld开了吗？它真的在那个IP上吗？在`networking`my.cnf 中打开（默认情况下应该打开。）Colin 已经提到了防火墙的可能性。

# javascript - JavaScript 域从子域读取 cookie

> ID：15903650
> 
> 赞同：5
> 
> 时间：2013-04-09T13:45:08.783
> 
> 标签：javascript, cookies, subdomain

我有一个简单的问题 - 有没有办法通过 JavaScript 读取主域上的子域 cookie？例如：我在子域yeah.something.com 中将cookie 'hello' 设置为'2'，然后我想在something.com 上阅读它。我试图找到答案，但我只找到了如何通过在域上创建它来在子域上设置 cookie 的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-02-08T12:02:15.203

一个古老的问题，但最好回答它您可以通过在域上创建一个 cookie 来实现，该 cookie 的开头带有一个点，以支持从所有子域和主域读取：

```
document.cookie = "_id=MY_ID;domain=.example.com;expires=;SameSite=none;Secure"; 
```

希望它能帮助像我这样的其他人:)

# c# - 创建 TCPClient 给我例外

> ID：15903652
> 
> 赞同：0
> 
> 时间：2013-04-09T13:45:11.207
> 
> 标签：c#, sockets, exception, tcpclient

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Net;
using System.Net.Sockets;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
        IPEndPoint ip = new IPEndPoint(Dns.GetHostAddresses("localhost")[0],8080);
        List<TcpClient> TCPs = new List<TcpClient>();
        int i = 1;
            while (true) {
                Console.Write(i + " ");
                /* the exception's row */ TCPs.Add(new TcpClient(ip));
                i++;
            }
        }
    }
} 
```

给我这个例外：

```
 An attempt was made to access a socket in a way forbidden by its access permissions. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:52:37.850

您不能多次绑定到同一个端口。由于您的循环，您一遍又一遍地`while(true)`创建一个新的。`TcpClient`您创建的第一个将获取端口 8080，而第二个将因此异常而失败。

来自[文档](http://msdn.microsoft.com/en-us/library/3bsb3c8f.aspx)：

> 在调用此构造函数之前，您必须使用要从中发送和接收数据的 IP 地址和端口号创建一个 IPEndPoint。

通常在创建客户端时不需要设置端口。

# ios - 如何避免获取关系中的子实体

> ID：15903655
> 
> 赞同：2
> 
> 时间：2013-04-09T13:45:13.190
> 
> 标签：ios, core-data, entity, relationship, fetch

假设我有 3 个实体，X、Y、Z。

X 具有指向 Y 的一对多关系“Ys”，Z 是 Y 的子实体。

在我的情况下，我想获取给定 X 的所有“Y”，但我不想要任何 Z。

以下是我当前的代码：

```
X *anX;
NSSet *my_Ys = [anX valueForKey:@"Ys"]; 
```

但是，我发现它确实获取了所有的 Z，与集合 my_Ys 中的 Ys 混合，这不是我想要的。

但是我还没有想出专业的方法来避免这种情况，除了检查 my_Ys 中所有对象的实体名称以便逐个过滤集合，我认为这有点慢。

那么任何人都可以提供一些帮助吗？我真的很感激！

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:36:35.283

如果您使用获取请求来获取 Ys，您可以将“includesSubentities”设置为 FALSE。当您通过与 X 的关系检索 Y 时，您不能这样做，但您应该能够通过比较 Y 实例的类对返回的集合使用谓词：

```
NSPredicate *pred = [NSPredicate predicateWithFormat: @"class == %@", [Y class]];

NSSet *only_Ys = [my_Ys filteredSetUsingPredicate:pred]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:17:40.113

所以，你的对象图看起来像这样

X <--->> Y <---> Z

Core Data 的好处是您通常不必担心修剪对象图，因为它会通过一种称为故障的机制为您智能地管理它。故障减少了应用程序消耗的内存量。故障是表示尚未完全实现的托管对象的占位符对象，或表示关系的集合对象：

*   托管对象故障是适当类的实例，但其持久变量尚未初始化。
*   关系故障是表示关系的集合类的子类。

故障处理是透明的——您不必执行获取来实现故障。如果在某个阶段访问了故障对象的持久属性，那么 Core Data 会自动检索该对象的数据并初始化该对象。

有关更多信息，请查看 Apple 的核心数据编程指南的[故障和唯一部分](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFaultingUniquing.html)。

# jquery - 使用 jquery 禁用链接按钮（锚标记）

> ID：15903660
> 
> 赞同：1
> 
> 时间：2013-04-09T13:45:34.757
> 
> 标签：jquery, linkbutton, javascript

在第一次单击发生后，我的 jquery 无法从单击中禁用我的链接按钮。

点击还应该删除并添加一些 cssStyles。

问题不在于更改 cssStyles 后链接按钮（以 html 呈现的锚标记）不会被禁用。

回发（由我手动触发）后，它会被禁用。但这不是我想要的。我希望它是一个顺利的交易，没有回发。

标记代码：

```
<asp:LinkButton ID="LinkButton" runat="server" OnClientClick="" CommandName="Answer" CssClass="linkButton" >
   <asp:Panel ID="PoptionText" runat="server" CssClass="buttonStyle">
      <%# Eval("optionText") %>
      <div>
         <asp:Label ID="lbRätt" runat="server" Visible="false" CssClass="aktiv"></asp:Label>
      </div>
   </asp:Panel>
</asp:LinkButton> 
```

Javascript代码：

```
$(document).ready(function () {
    $("#LinkButton").click(function () {    
        $("#LinkButton").attr("disabled", "disabled"); //this does not happen
        Rightanswer(); // This happens. Function to add remove cssStyles
    })
    $("#LinkButton").click(function (e) {
        if ($("#LinkButton").attr("disabled") == "disabled") {
            e.preventDefault();
        }
    });    
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:51:42.273

你也可以试试这个：

```
$("#<%=LinkButton.ClientID %>").click(function (e) {
   e.preventDefault();
   $(this).attr("disabled", "disabled");
   // Whateverr your code goes here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:48:58.567

您不能将`disabled`属性与锚标记一起使用，只有`input`元素具有`disabled`属性。你可以尝试类似的东西

```
$("#LinkButton").click(function (e) {
     if ($("#LinkButton").hasClass(className)) {
        // If have class dont follow href so will work only for first time 
        e.preventDefault();
     }
     Rightanswer(); // Add / Remove class
}); 
```

这可能会有所帮助[HTML Anchor 标记是否应该尊重 Disabled 属性？](https://stackoverflow.com/questions/7000927/should-the-html-anchor-tag-honor-the-disabled-attribute)

# wpf - WPF：元素绑定

> ID：15903661
> 
> 赞同：0
> 
> 时间：2013-04-09T13:45:36.567
> 
> 标签：wpf, vb.net

我需要链接库栏项目的名称以在单独的文本框中同步以识别我在拖动什么等。

无论如何我可以从这里绑定内容文本：

```
<my:LibraryBar 
            HorizontalAlignment="Center" 
            Name="libcont" 
            VerticalAlignment="Top" 
            Background="{x:Null}"
            ItemsSource="{Binding}"  
            Width="850" 
            Height="250"

            >
            <my:LibraryBar.ItemTemplate>
                <DataTemplate>
                    <Viewbox Stretch="Fill" >
                        <Grid>
                        <Image Source="{Binding dev_img}" Height="144" Width="128" />
                            <Label Content="{Binding name}" /> 
                        </Grid>
                    </Viewbox>
                </DataTemplate>
            </my:LibraryBar.ItemTemplate>               
        </my:LibraryBar> 
```

到我的文本框：

```
 <TextBlock HorizontalAlignment="Left" Name="libcontvalue"  VerticalAlignment="Top"  /> 
```

我的VB代码：

```
Dim con As OleDbConnection = New OleDbConnection("Provider=Microsoft.Ace.Oledb.12.0; Data Source=|DataDirectory|\mvdata.accdb")
        con.Open()
        Dim cmd As OleDbCommand = New OleDbCommand("SELECT * FROM devices", con)

        Dim sdr As OleDbDataReader = cmd.ExecuteReader

        libcont.ItemsSource = sdr 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:50:25.947

为什么不将你的绑定`TextBlock.Text`到 libcont.SelectedItem？

```
TextBlock Text="{Binding ElementName=libcont,Path=SelectedItem.name,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" 
```

# android - 隐藏行表单元格android

> ID：15903664
> 
> 赞同：0
> 
> 时间：2013-04-09T13:45:51.670
> 
> 标签：android, tablelayout, tablerow

我有一个表格布局，我从数据库中按行表动态加载行表。

我想知道是否可以在行表中隐藏单元格或在表格布局中隐藏列？

还有一件事，如何从 rowtable 中的单元格获取数据？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:51:33.767

您可以使用 setColumnCollapsed(int index, boolean isCollapsed) 隐藏列...查看 api。

# c# - 类和通用对象都实现了接口

> ID：15903669
> 
> 赞同：0
> 
> 时间：2013-04-09T13:46:19.740
> 
> 标签：c#, generics, interface

我有一个使用通用对象的类。泛型对象需要实现 IDisposable 接口。类还需要实现 IDisposable。

```
public class MyGenericClass<T> where T : IDisposable 
```

现在在这个通用对象中实现了接口，但类没有。两者都有可能实现接口吗？如果是的话如何。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:47:43.063

```
public class MyGenericClass<T> : IDisposable
    where T : IDisposable
{
    public void Dispose()
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T13:49:39.930

是的，有可能：

> 公共类 MyGenericClass: IDisposable where T : IDisposable

# c# - 如何使用带有 WebMatrix 的 C#.net 网页访问单个 XML 元素的值？

> ID：15903671
> 
> 赞同：5
> 
> 时间：2013-04-09T13:46:20.653
> 
> 标签：c#, xml, razor, webmatrix, asp.net-webpages

我查看了很多资源，进行了大量研究，并尝试了许多“最佳猜测”来使用 WebMatrix 和 C#、网页一次访问单个元素，但是我没有尝试通过。

考虑一个如下所示的简单 xml 文档：

```
<root>
    <requisitionData>
        <element1>I am element 1</element1>
        <element2>I am element 2</element2>
    </requisitionData>
</root> 
```

我知道我可以使用 foreach 循环，如下所示：

```
@using System.Xml.Linq

XDocument doc = XDocument.Load(Server.MapPath("~/User_Saves/cradebaugh/testFile.xml"));

foreach (XElement element in doc.Descendants("requisitionData"))
{
    @element.Value
} 
```

当然，这很好用。但是，如果我只是想将单个元素`<element1>`的值存储在字符串变量中呢？

我看过这里（下面的链接），但我无法对这段代码做出正面或反面（在我看来，它甚至几乎不像 C#，但话又说回来，我对解析 XML 很陌生......）：

[http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/b14ce4d1-77f1-420d-ad91-0989794a1d45/](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/b14ce4d1-77f1-420d-ad91-0989794a1d45/)

我也在这里检查过：[How to Get XML Node from XDocument](https://stackoverflow.com/questions/752271/how-to-get-xml-node-from-xdocument)

但是这里显示的代码对我来说也没有任何意义。我一直认为必须有一种更简单的方法来做到这一点，希望不需要学习一种全新的查询方法。

---------------------------------我尝试过的事情------------ ---------------------

```
XDocument doc = XDocument.Load(Server.MapPath("~/User_Saves/cradebaugh/testFile.xml"));

string element = doc.Descendants("requisitionData").Descendants("element1").Value; 
```

**我收到错误：** “缺少使用指令或程序集引用

```
XDocument doc = XDocument.Load(Server.MapPath("~/User_Saves/cradebaugh/testFile.xml"));

XElement element = doc.Descendants("element1");
string val = element.Value; 
```

**我收到的错误：** 无法将类型“System.Collections.Generic.IEnumerable”隐式转换为“System.Xml.Linq.XElement”。存在显式转换（您是否缺少演员表？）

事实上，我已经尝试过其他的东西，但我得到了与上面显示的几乎相同的错误。我是不是让这件事变得更难了，还是我过于简单化了？

- - - - - - - - - - - - -更新 - - - - - - - - - - - - ------

我能够让它工作：

```
string element = doc.Element("root").Element("requisitionData").Element("element1").Value;

@element 
```

但是，我担心这种方法的一件事是`.Element`选择“第一个”匹配项，因此在一个看起来像这样的 xml 文档中：

```
<root>
    <requisitionData>
        <element1>I am element 1</element1>
        <element2>I am element 2</element2>
    </requisitionData>
    <requisitionData>
        <element1>I am element 1</element1>
        <element2>I am element 2</element2>
    </requisitionData>
</root> 
```

我怎样才能访问第二次出现的`<element1>`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T13:57:17.290

```
@using System.Xml.Linq

XDocument doc = XDocument.Load(Server.MapPath("~/User_Saves/cradebaugh/testFile.xml"));

foreach (XElement element in doc.Element("root").Element("requisitionData").Descendants())
{
    string value = element.Value;
} 
```

或使用 XPath：

```
@using System.Xml.Linq
@using System.Xml.XPath

XDocument doc = XDocument.Load(Server.MapPath("~/User_Saves/cradebaugh/testFile.xml"));

foreach (XElement element in doc.XPathSelectElement("//requisitionData").Descendants())
{
    string value = element.Value;
} 
```

* * *

更新：

如果您想`<element1>`从更新的示例中选择第二个节点：

```
string value = doc.XPathSelectElement("//requisitionData[2]/element1").Value; 
```

# java - Name 和 CanonicalName 有什么区别？

> ID：15903672
> 
> 赞同：14
> 
> 时间：2013-04-09T13:46:21.603
> 
> 标签：java, class, names, canonical-name

`Class.getName()`Java和Java 有什么区别`Class.getCanonicalName()`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-09T13:46:21.603

考虑以下程序：

```
package org.test.stackoverflow;

public class CanonicalName {

  public static void main(String[] args) {
    CanonicalName cn = new CanonicalName();
    cn.printClassNames();
  }

  private Anonymous anony;
  private MyAnony myAnony;

  public CanonicalName() {
    anony = new Anonymous() {
      public void printInterface() {
        System.out.println("Anony Name: " + getClass().getName());
        System.out.println("Anony CanonicalName: " + getClass().getCanonicalName());
      }
    };
    myAnony = new MyAnony();
  }

  public void printClassNames() {
    System.out.println("CanonicalName, Name: " + getClass().getName());
    System.out.println("CanonicalName, CanonicalName: " + getClass().getCanonicalName());
    anony.printInterface();
    myAnony.printInterface();
  }

  private static interface Anonymous {
    public void printInterface();
  }

  private static class MyAnony implements Anonymous {
    public void printInterface() {
      System.out.println("MyAnony Name: " + getClass().getName());
      System.out.println("MyAnony CanonicalName: " + getClass().getCanonicalName());
    }
  }
} 
```

输出：

```
CanonicalName, Name: org.test.stackoverflow.CanonicalName
CanonicalName, CanonicalName: org.test.stackoverflow.CanonicalName
Anony Name: org.test.stackoverflow.CanonicalName$1
Anony CanonicalName: null
MyAnony Name: org.test.stackoverflow.CanonicalName$MyAnony
MyAnony CanonicalName: org.test.stackoverflow.CanonicalName.MyAnony 
```

所以似乎对于基类，它们返回相同的东西。对于内部类，`getName()`使用`$`命名约定（即用于 .class 文件的内容），并`getCanonicalName()`返回您尝试实例化类时将使用的内容。你不能用一个（little-a）匿名类来做到这一点，所以这就是为什么`getCanonicalName()`返回 null。

# nhibernate - 使用 NHibernate.Criterion 的 JoinQueryOver 中的“或”限制？

> ID：15903674
> 
> 赞同：1
> 
> 时间：2013-04-09T13:46:22.900
> 
> 标签：nhibernate, nhibernate-criteria, queryover

如何在两个 WhereRestrictionOn 之间编写 OR 限制？

```
sessao.QueryOver<Usuario>(() => usuarioAlias)
                    .WhereRestrictionOn(usr => usr.Name).IsLike(search, MatchMode.Anywhere)
                    .Inner.JoinQueryOver(() => usuarioAlias.Funcao)
                    .WhereRestrictionOn(funcao => funcao.Name).IsLike("xpto", MatchMode.Anywhere)
                    //I want the OR here
                    .WhereRestrictionOn(funcao => funcao.Name).IsLike("abcd", MatchMode.Anywhere)
                    .List(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:58:31.507

有几个问题已经提供了这个问题的答案。

一种方法是使用[这个问题](https://stackoverflow.com/questions/4541546/queryover-and-x-like-a-or-y-like-a)的公认答案中的方法：

```
query.Where(Restrictions.On<Type>(x=> x.Foo).IsLike("xpto", MatchMode.Anywhere) ||
        Restrictions.On<Type>(x=> x.Foo).IsLike("abcd", MatchMode.Anywhere)) 
```

[另一种方法](https://stackoverflow.com/questions/6019645/where-in-or-where-in-with-nhibernate-iqueryover)是执行以下操作：

```
query.RootCriteria.Add(Restrictions.Or(
  Restrictions.On<ObjectModel.Order>(x=> x.Foo).IsLike("xpto", MatchMode.Anywhere),
  Restrictions.On<ObjectModel.Order>(x=> x.Foo).IsLike("abcd", MatchMode.Anywhere))); 
```

## 更新

而不是使用`Inner.JoinQueryOver`尝试使用 JoinAlias 代替：

```
Usuario usuarioAlias = null;
Funcao funcaoAlias = null;
var results = sessao.QueryOver<Usuario>(() => usuarioAlias)
      .JoinAlias(x => x.funcao, () => funcaoAlias)
      .WhereRestrictionOn(usr => usr.Name).IsLike(search, MatchMode.Anywhere)
      .Where(
          Restrictions.On<Funcao>(x => funcaoAlias.Name)
                                       .IsLike("xpto", MatchMode.Anywhere) ||
          Restrictions.On<Funcao>(x => funcaoAlias.Name)
                                       .IsLike("abcd", MatchMode.Anywhere))
       .List(); 
```

在我的测试项目中，这产生了 SQL 语句：

```
SELECT this_.Id as Id0_1_, this_.Name as Name0_1_, funcaoalia1_.Id as Id1_0_, 
       funcaoalia1_.Name as Name1_0_, funcaoalia1_.usuario_id as usuario3_1_0_ 
FROM [Usuario] this_ inner join [Funcao] funcaoalia1_ on this_.Id=funcaoalia1_.Id 
WHERE this_.Name like @p0 
 and (funcaoalia1_.Name like @p1 or funcaoalia1_.Name like @p2);
@p0 = '%test%' [Type: String (4000)], 
@p1 = '%xpto%' [Type: String (4000)], 
@p2 = '%abcd%' [Type: String (4000)] 
```

# c# - 通过命令行更改 chm 文件中的页面

> ID：15903678
> 
> 赞同：0
> 
> 时间：2013-04-09T13:46:37.977
> 
> 标签：c#, .net, chm

我有一个包含许多帮助按钮的 C# 项目。单击其中一个按钮时，会打开一个帮助文件 (Help.chm) 到相关页面。以下是其中一页的代码：

```
ProcessStartInfo startInfo = new ProcessStartInfo();
startInfo.FileName = "hh.exe";
startInfo.Arguments = "Help.chm::/html/97198ffa-adb2-4897-b5e4-5bba54252900.htm";//page id
Process.Start(startInfo); 
```

这很好用，但是现在当用户单击不同的帮助按钮（甚至是同一个）时，会打开一个新的帮助文件，从而可能会打开许多​​冗余的 chm 文件。如果我的帮助文件已经打开，是否有任何方法可以更改页面？如果有办法通过命令行执行此操作，那将是一个很好的起点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:25:47.130

就像之前提到的 Helen 一样，我真的推荐使用 Help.ShowHelp 方法。

```
 private void btnHelpTopic1_Click(object sender, EventArgs e)
    {
        // sHTMLHelpFileName_ShowWithNavigationPane = "CHM-example_ShowWithNavigationPane.chm"
        // This is a HelpViewer Window with navigation pane for show case only 
        // created with Microsoft HTMLHelp Workshop
        helpProvider1.HelpNamespace = Application.StartupPath + @"\" + sHTMLHelpFileName_ShowWithNavigationPane;
        Help.ShowHelp(this, helpProvider1.HelpNamespace, @"/Garden/tree.htm");
    }

    private void btnHelpTopic2_Click(object sender, EventArgs e)
    {
        helpProvider1.HelpNamespace = Application.StartupPath + @"\" + sHTMLHelpFileName_ShowWithNavigationPane;
        Help.ShowHelp(this, helpProvider1.HelpNamespace, @"/Garden/flowers.htm");
    } 
```

请查看代码和小 GUI（附上快照）。主题在用户按钮单击后刷新（例如帮助主题1）。请注意，使用 Microsoft HTMLHelp Workshop 创建的帮助文件可能需要一个自动同步参数。

![C# 代码、GUI 和打开的帮助文件。](https://i.stack.imgur.com/mhNdT.png)

为了下载，我提供了一个 C# [VS2008 项目](http://www.help-info.de/files_download/CSharp2008_CHM.zip)，包括上面的代码和具有不同帮助查看器窗口的帮助文件（不同的 CHM 文件仅用于展示案例）。

# c# - 模态弹出窗口扩展器在登录事件中不起作用

> ID：15903682
> 
> 赞同：0
> 
> 时间：2013-04-09T13:47:02.200
> 
> 标签：c#, asp.net, popup

用户成功登录后，我试图询问用户他们想查看哪个页面。

我已经用模态弹出扩展器尝试了这个，但是当我尝试从登录事件中调用它时，模态弹出扩展器没有显示。代码如下所示。代码有什么问题吗？

```
protected void Login1_LoggedIn(object sender, EventArgs e)
    {

        user_redirection_process();

        switch (validateResult)
        {
            case "M":
                ModalPopupExtender1.Show();

                break;
            case "A":                    
                Response.Redirect("~/Account/A/A.aspx");
                break;
            case "B":
                Response.Redirect("~/Account/B/B.aspx");
                break;
            default:
                //Response.Redirect("~/Account/A/A.aspx");
                break;

        }

    } 
```

我正在使用会员框架和登录控制来处理登录过程。

前端看起来像这样：

```
 <asp:Panel ID="Panel1" runat="server" style ="display:none">
    <a href="Account/A/A.aspx">dkny</a>
    <a href="Account/B/B.aspx">dko</a>

</asp:Panel>
<asp:LinkButton ID="dummy" runat="server" style="display:none">LinkButton</asp:LinkButton>
<ajaxToolkit:ModalPopupExtender ID="ModalPopupExtender1" runat="server" DropShadow="True" PopupControlID="Panel1" TargetControlID="dummy"></ajaxToolkit:ModalPopupExtender> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:15:46.957

在成功登录后使用登录控件时，您将被自动重定向到 FormsAuthentication 提供的 DefaultUrl 或 RedirectUrl。

所以我相信，您将不得不使用常规输入和按钮进行登录并相应地处理登录机制。

# javascript - 向 Hammer.js 添加手势选项的问题

> ID：15903686
> 
> 赞同：1
> 
> 时间：2013-04-09T13:47:06.007
> 
> 标签：javascript, jquery, hammer.js

我刚刚开始第一次使用 Hammer JS，并且正在浏览他们的入门页面（[https://github.com/EightMedia/hammer.js/wiki/Getting-Started](https://github.com/EightMedia/hammer.js/wiki/Getting-Started)）

这是我的代码：

```
 var el = $('#drag ul');
        var hammertime1 = Hammer(el,{
                drag_block_vertical:true,
                drag_lock_to_axis: true
            })
        .on("drag", function(ev) {
            if(ev.gesture.direction == 'left' || ev.gesture.direction == 'right') {
                $(this).css('left',ev.gesture.deltaX);
            };
            ev.gesture.preventDefault();
        }); 
```

但是，阻力锁似乎不起作用。

任何帮助将不胜感激。

谢谢。

更新

通过在两个函数上添加 lock_to_axis 让它工作

# java - Java：查找和替换一行

> ID：15903692
> 
> 赞同：0
> 
> 时间：2013-04-09T13:47:22.383
> 
> 标签：java, replace

我看过很多关于此的帖子，但我无法做到这一点。我需要做这样的事情..可以说，我有两个文件 a.txt，b.txt。我应该在 a.txt 中搜索一个字符串/行并将其替换为 b.txt 的内容。我认为它只是几行简单的代码。我尝试了下面的代码，但它不工作......

```
File func = new File("a.txt");
BufferedReader br = new BufferedReader(new FileReader(func));

String line;

while ((line = br.readLine()) != null) {
    if (line.matches("line to replace")) {
        br = new BufferedReader(
                new FileReader(func));
        StringBuffer whole = new StringBuffer();
        while ((line = br.readLine()) != null) {
            whole.append(line.toString() + "\r\n");
        }
        whole.toString().replace("line to replace",
                "b.txt content");
        br.close();

        FileWriter writer = new FileWriter(func);
        writer.write(whole.toString());
        writer.close();
        break;
    }
}
br.close(); 
```

请帮忙 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:04:19.093

嗯...也许您可以避免创建 BufferedReader 类的实例而只使用 String 类：

```
public class Sample {

public static void main(String[] args) throws Exception{
    File afile = new File("/home/mtataje/a.txt");

    String aContent = getFileContent(afile);
    System.out.println("A content: " );
    System.out.println(aContent);
    System.out.println("===================");
    if (aContent.contains("java rulez")) {
        File bfile = new File("/home/mtataje/b.txt");
        String bContent = getFileContent(bfile);
        String myString = aContent.replace("java rulez", bContent);
        System.out.println("New content: ");
        System.out.println(myString);
        afile.delete();//delete old file
        writeFile(myString);//I replace the file by writing a new one with new content
    }
}

public static void writeFile(String myString) throws IOException {
    BufferedWriter bw = new BufferedWriter(new FileWriter(new File("/home/mtataje/a.txt")));
    bw.write(myString);
    bw.close();
}

public static String getFileContent(File f) throws IOException {
    BufferedReader br = new BufferedReader(new FileReader(f));

    String line;
    StringBuffer sa = new StringBuffer();
    while ((line = br.readLine()) != null) {
       sa.append(line);
       sa.append("\n");
    }   
    br.close();
    return sa.toString();
} 
```

我刚刚分离了该方法以避免在同一代码块中两次读取文件。我希望它可以帮助您，或者至少可以帮助您满足您的要求。此致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:55:48.893

这是解决此问题的一种技术：

1.  打开 a.txt 文件进行阅读。
2.  打开 b.txt 文件进行阅读。
3.  打开一个名为 a.new.txt 的输出文件。
4.  从 a.txt 文件中读取一行。
5.  如果该行不是所需的行（要替换的行），则将该行写入输出文件，然后转到步骤 4。
6.  将 b.txt 文件的内容附加到输出文件。
7.  将 a.txt 的剩余内容附加到输出文件中。

# regex - 从第一个字符到字符串结尾的正则表达式

> ID：15903696
> 
> 赞同：3
> 
> 时间：2013-04-09T13:47:32.747
> 
> 标签：regex, r

在一篇[相关文章](https://stackoverflow.com/questions/15895050/using-gsub-to-extract-character-string-before-white-space-in-r)中，有人询问如何从字符串的开头抓取到第一次出现的字符。我想通过询问如何从字符串的某个字符抓取到结尾来扩展我自己对正则表达式的了解。

***我如何使用 regex (not `strsplit`) 和 gsub 从第一个空格的开头抓取到字符串的结尾？***

```
dob <- c("9/9/43 12:00 AM/PM", "9/17/88 12:00 AM/PM", "11/21/48 12:00 AM/PM") 
```

在这里我尝试了：`gsub(".*? ", "", dob)` 但它从最后一个空间而不是第一个空间中抓取，所以我尝试`gsub(".{1}? ", "", dob)`了，但由于时间原因它过于贪婪。

最终解决方案将与以下内容相同：

```
sapply(lapply(strsplit(dob, "\\s+"), "[", 2:3), paste, collapse=" ")
##[1] "12:00 AM/PM" "12:00 AM/PM" "12:00 AM/PM" 
```

**注意：R regex 通常与 regex 不同**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T14:06:11.487

尝试 ：

```
gsub("^(.*?) .*$", "\\1", dob)
# [1] "9/9/43"   "9/17/88"  "11/21/48" 
```

如果您想从第一个空格到字符串的末尾，请尝试：

```
gsub("^.*? (.*)$", "\\1", dob)
# [1] "12:00 AM/PM" "12:00 AM/PM" "12:00 AM/PM" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T14:13:30.120

您忘记了字符串开头的指示符：

```
gsub("^.*? ", "", dob) 
```

请注意开头的插入符号。您的第一个解决方案不是太贪心，而是找到了两个字符串并替换了它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T14:07:41.510

试试下面

> dob [1] "9/9/43 12:00 AM/PM" "9/17/88 12:00 AM/PM"
> [3] "11/21/48 12:00 AM/PM"
> gsub("( . *?) (.* $)", "\2", dob)
> [1] "12:00 AM/PM" "12:00 AM/PM" "12:00 AM/PM"

# html - 正则表达式：除标签之外的所有内容

> ID：15903699
> 
> 赞同：-2
> 
> 时间：2013-04-09T13:47:40.607
> 
> 标签：html, regex, tags

我尝试获取除 html 标签之外的所有字符串/文本。前任。

```
<html><head><title>test</title></head><body><p>hi there</p></body></html>
 -->
"test hi there" 
```

首先，我尝试创建一个查找所有 html 标签的正则表达式：`(<.*?>)`. 之后我尝试反转正则表达式`((?!<.*?>).)*`- 但这个表达式不起作用:(有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:50:20.990

除了匹配标签之外的所有内容，您应该尝试仅匹配标签并将它们从字符串中删除，以便留下您的结果。

```
var str = "<html><head><title>test</title></head><body><p>hi there</p></body></html>";
var res = str.replace(/(<[^>]+>)+/g, " "); 
```

您可能需要`.replace(/\s+/g, " ")`修剪结果以获得预期的输出。

* * *

顺便说一句，尝试将所有 HTML 语法与正则表达式匹配是一个[坏主意。](https://stackoverflow.com/a/1732454/1048572)相反，您可能希望使用[DOM 解析器](https://developer.mozilla.org/en-US/docs/DOM/DOMParser)并获取[`textContent`](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)结果文档的 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:53:10.373

这是您想要的正则表达式模式：

```
>([^<]*)< 
```

使用正则表达式匹配，您将获得一个字符串数组。如果您将所有偶数字符串放在一起（如下*所示*），您将得到您想要的。[有关更多信息，请参阅此。](http://en.wikipedia.org/wiki/Regular_expression)

```
//This is not a real language!
//Syntax based on Java and Javascript

String function getHtmlText(String html) {
 String str = "";
 String[] arr = match(html, "/>([^<]*)</");
 Int i = arr.length;

 while(i) {
  str += arr[i];
  i   -= 2; //Because we want every even value
 }

 return str;
} 
```

或者使用 DOM 元素的`textContent`属性。[看到这个。](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)

希望它有帮助，m93a :D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:13:58.760

使用下面的表达式并将所有标签替换为空字符串“”

```
(\<[A-Za-z =":/.]+\>)|(\</[A-Za-z]+\>) 
```

如果 HTML 标签是

```
<B>Bold 
<P>This is a sample text</P>
</B>
<A HREF="http://www.google.com">Click Here</A> 
```

用空字符串替换上面的表达式会产生以下结果

```
Bold 
This is a sample text

Click Here 
```

# azure - 视窗天青。在 Sysprep 之后添加管理员用户

> ID：15903703
> 
> 赞同：0
> 
> 时间：2013-04-09T13:47:45.517
> 
> 标签：azure, admin, add

我发现在 Sysprep 之后“管理员”将被禁用。如何在 syspred 之后添加管理员用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:33:28.703

你不需要。

运行 sysprep 的唯一目的是创建 IMAGE。保存为基本 VHD 的 IMAGE，每次使用它创建新 VM 时都会复制该图像。您在创建新 VM 时提供管理员密码。

# c# - 在用户控件中设置类的值

> ID：15903705
> 
> 赞同：0
> 
> 时间：2013-04-09T13:47:50.687
> 
> 标签：c#, asp.net, .net, user-controls

我正在尝试从后面的其他页面代码设置用户控件中的类的值，但无法使其正常工作。

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class itemtest : System.Web.UI.UserControl
{
public DataRowView DataRowItem { get; set; }

public class Headers 
{
    public string strItems { get; set; }
}

protected void Page_Load(object sender, EventArgs e)
{
    Headers hdrs = new Headers();
    string strItems = hdrs.strItems;

    if (strItems != null)
    {
        List<string> lstHeaders = strItems.Split(',').ToList<string>();
        DataTable dtHeaders = new DataTable();
        dtHeaders.Columns.Add("Header", typeof(String));
        dtHeaders.Columns.Add("Value", typeof(String));
        foreach (var item in lstHeaders)
        {
            DataRow drHeaders = dtHeaders.NewRow();
            drHeaders["Header"] = item.ToString();
            drHeaders["Value"] = DataRowItem[item.ToString()].ToString();
            dtHeaders.Rows.Add(drHeaders);
        }
        rptHeaders.DataSource = dtHeaders;
        rptHeaders.DataBind();
    }
}

} 
```

在我的另一个 page.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Data;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class ListViewTest : System.Web.UI.Page
{
public string strTableHeaders;
public DataRowView DataRowItem { get; set; }

protected void Page_Load(object sender, EventArgs e)
{
    strTableHeaders = "UserID,MachineName";
}

protected void lvExample_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    if (e.Item.ItemType == ListViewItemType.DataItem)
    {
        itemtest itemHeaders = (itemtest)e.Item.FindControl("itemsMain");
        if (itemHeaders != null)

            itemHeaders.Headers.strItems = strTableHeaders;

    }
}
} 
```

我收到错误 Compiler Error Message: CS0572: 'Headers': cannot reference a type through an expression; 尝试 'itemtest.Headers' 代替 line itemHeaders.Headers.strItems = strTableHeaders;

有人帮我吗？我对此很陌生，所以最好用lamen术语

谢谢

编辑：我的旧方法只是

```
public DataRowView DataRowItem { get; set; }
public string strItems { get; set; }

protected void Page_Load(object sender, EventArgs e)
{
    if (strItems != null)
    {
        List<string> lstHeaders = strItems.Split(',').ToList<string>();... 
```

但似乎正在发生的事情是我的用户控件页面加载事件在 listview_itemdatabound 事件之前触发，我看不出这是怎么可能的，因为用户控件仅在列表视图中使用......

所以 strItems 始终为空，我的页面加载失败

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:56:14.323

这些行：

```
public class Headers 
{
    public string strItems { get; set; }
} 
```

**只是声明**新类型。他们不实例化它。但是这一行：

```
itemHeaders.Headers.strItems = strTableHeaders; 
```

尝试执行以下操作：在`itemHeaders`get member `Headers`（实际上只是声明一些可以实例化 [created] 的新类型）并将其成员设置`strItem`为`strTableHeaders`.

解决方案很简单。将此行添加到您的班级`itemtest`

```
public Headers Hdrs { get; set; } 
```

它将`Headers`类实例化为名为`Hdrs`.

PS：也请重新考虑这个概念。正如和协所说，这不是正确的方法。我刚刚用评论解决了你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:58:54.763

下面这一行是不正确的：

```
itemHeaders.Headers.strItems = strTableHeaders; 
```

它试图做的是重新分配`Headers.strItems`手段。这显然不是你的本意。您需要的是对 Headers 类对象的实际实例的公共引用，而不是类本身的定义。在您的 UserControl 中，您需要

```
private Headers _hdrs;
public Headers Hdrs 
{
    get
    {
        return _hdrs ?? (_hdrs = new Headers());
    }
}
public DataRowView DataRowItem { get; set; } 
```

然后在您的页面中，您可以使用：

```
itemHeaders.Hdrs.strItems = strTableHeaders; 
```

这实际上将在实例中分配值。

# sql-server - 获取开始日期和结束日期之间一个月的开始日期

> ID：15903706
> 
> 赞同：-1
> 
> 时间：2013-04-09T13:47:51.767
> 
> 标签：sql-server

我只想获取所选日期之间月份的开始日期

前任 ：

```
开始日期 = 2012 -05-01
结束日期 = 2013-04-01
```

我想要这样

```
   日期 ：
   2012-05-01
   2012-06-01
   2012-07-01……
   2013-01-01……
   2012-05-01
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:02:05.133

CTE 会成功的

```
 Declare @beginDt SmallDatetime = '13 Jan 2012'
   Declare @endDt SmallDatetime = '2 Apr 2013';
   With MonthList(aMon)
      As
      (Select DateAdd(month, datediff(month, 0, @beginDt), 31)
         Union All
       Select DateAdd(month, 1, aMon) From MonthList
       Where DateAdd(month, 1, aMon) < @endDt)
       Select aMon from MonthList 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:54:48.217

首先，[创建一个日历表](http://web.archive.org/web/20070611150639/http://sqlserver2000.databases.aspfaq.com/why-should-i-consider-using-an-auxiliary-calendar-table.html)。然后你可以写一个简单的查询：

```
select [Date]
from dbo.Calendar
where IsFirstDayOfMonth = 1 and [Date] between '20120501' and '20130401' 
```

此查询比使用基于函数的解决方案更清晰，日历表也有许多其他用途。

# qt - 无法在 Solaris 10 上构建 Qt 5.0

> ID：15903711
> 
> 赞同：0
> 
> 时间：2013-04-09T13:48:09.077
> 
> 标签：qt, build, solaris, qt5, solaris-10

我目前正在 Qt 中从事跨平台项目。我目前正在 Linux (Mint x64) 上开发，但需要将部分项目部署到 Solaris 10 服务器。

我一直在尝试在 solaris 上构建 Qt5.0.1 大约 3 天，但收效甚微！

我已经从[这里](http://releases.qt-project.org/qt5/5.0.1/single/qt-everywhere-opensource-src-5.0.1.tar.gz)下载了源代码并成功提取了存档。

在尝试运行配置脚本时，我首先遇到了通过将 qtbase/configure 脚本更改为使用 /bin/bash 而不是 /bin/sh 来修复的语法错误。

然后我在运行配置时遇到了几个问题：

```
./configure -platform solaris-g++ 
```

*   配置无法检测架构（不是破坏性故障，而是......）
*   “未启用 QPA 平台插件！” - 我已明确安装（使用 pkgutil）libxcb 和 xcbutil
*   使用 -no-qpa-platform-guard 标志时，配置完成，然后：
    *   当我运行 gmake -j4 时，我在构建中遇到了各种各样的错误

编译错误是：

```
In file included from ../3rdparty/pcre/pcre16_compile.c:43:0:
../3rdparty/pcre/pcre_compile.c: In function 'compile_branch':
../3rdparty/pcre/pcre_compile.c:5193:18: error: 'int64_t' undeclared (first use in this function)
../3rdparty/pcre/pcre_compile.c:5193:18: note: each undeclared identifier is reported only once for each function it appears in
../3rdparty/pcre/pcre_compile.c:5194:36: error: expected ')' before 'length_prevgroup'
../3rdparty/pcre/pcre_compile.c:5264:32: error: expected ')' before 'repeat_max'gcc -c -O2 -Wall -W -D_REENTRANT -fPIC -DQT_NO_LIBUDEV -DQT_NO_EVDEV -DQT_NO_XCB -DQT_NO_USING_NAMESPACE -DQT_BUILD_CORE_LIB -DQT_BUILDING_QT -DQT_NO_CAST_TO_ASCII -DQT_ASCII_CAST_WARNINGS -DQT_MOC_COMPAT -DQT_USE_QSTRINGBUILDER -DQT_DEPRECATED_WARNINGS -DQT_DISABLE_DEPRECATED_BEFORE=0x050000 -DQT_USE_ICU -DPCRE_HAVE_CONFIG_H -DHB_EXPORT=Q_CORE_EXPORT -DQT_CORE_LIB -D_LARGEFILE64_SOURCE -D_LARGEFILE_SOURCE -DQT_NO_DEBUG -I../../mkspecs/solaris-g++ -I. -I../../include -I../../include/QtCore -I../../include/QtCore/5.0.1 -I../../include/QtCore/5.0.1/QtCore -Iglobal -I../3rdparty/pcre -I../3rdparty/md5 -I../3rdparty/md4 -I.moc/release-shared -I/usr/sfw/include -o .obj/release-shared/pcre16_dfa_exec.o ../3rdparty/pcre/pcre16_dfa_exec.c
gmake[3]: *** [.obj/release-shared/pcre16_compile.o] Error 1
gmake[3]: *** Waiting for unfinished jobs....
gmake[3]: Leaving directory `/export/home/emackenzie/Downloads/qt-everywhere-opensource-src-5.0.1/qtbase/src/corelib'
gmake[2]: *** [sub-corelib-make_first] Error 2
gmake[2]: Leaving directory `/export/home/emackenzie/Downloads/qt-everywhere-opensource-src-5.0.1/qtbase/src'
gmake[1]: *** [sub-src-make_first] Error 2
gmake[1]: Leaving directory `/export/home/emackenzie/Downloads/qt-everywhere-opensource-src-5.0.1/qtbase'
gmake: *** [module-qtbase-make_first] Error 2 
```

任何帮助将不胜感激！

**[更新]** 好的，所以我通过注释掉 pcre_internal.h:217,218,219,221 解决了这个编译错误：

```
//#if HAVE_STDINT_H
//#include <stdint.h>
//#elif HAVE_INTTYPES_H
#include <inttypes.h>
//#endif 
```

现在我收到此错误：

```
io/qtemporarydir.cpp: In member function 'void QTemporaryDirPrivate::create(const QString&)':
io/qtemporarydir.cpp:150:30: error: 'mkdtemp' was not declared in this scope
gmake[3]: *** [.obj/release-shared/qtemporarydir.o] Error 1 
```

我已经检查了源并且 stdlib.h 被包含（应该在其中声明 mkdtemp）并且它位于 /usr/include 的文件系统中

同样，任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:54:17.093

找出系统中声明的标头`int64_t`以及**pcre_compile.c**`#include`上的哪个标头。

# java - readtext = new String(buff, 0, read)......它是一个字符串、整数还是数组？

> ID：15903713
> 
> 赞同：1
> 
> 时间：2013-04-09T13:48:11.577
> 
> 标签：java, telnet

我很困惑。这是 telnet 应用程序的一部分，我希望它返回一个字符串并更新一个文本区域。我尝试从与 textArea.setText 位于同一类的方法内部更新 textarea ，但这不起作用，我知道我们应该调用该方法并返回字符串。是的，我知道我应该删除“void”，但是当我尝试时它说该方法返回一个 int？我希望它从服务器返回一个带有文本的字符串。如果我打印到控制台，它会准确打印我想要的文本....Arg !!! 我也在使用 apache commons 库。

```
public static void read() throws IOException {

   String readtext;

   byte[] buff = new byte[1024];

   int read;

   if((read = telnetClient.getInputStream().read(buff)) > 0) {

    readtext = new String(buff, 0, read);

    //return readtext;

       //System.out.println(new String(buff, 0, read));

    System.out.println(readtext);

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:51:12.750

您的答案不会返回字符串。您需要将 String 添加到方法签名并返回`readtext`变量才能获得所需的文本。

试试这个：

```
public static String read() throws IOException {
   String readtext;    
   byte[] buff = new byte[1024];    
   int read;

   if((read = telnetClient.getInputStream().read(buff)) > 0) {    
       readtext = new String(buff, 0, read);
   }
    return readtext;    
   } 
```

# ruby - 遍历 Ruby 中 pg_conn 查询的所有值

> ID：15903719
> 
> 赞同：3
> 
> 时间：2013-04-09T13:48:20.563
> 
> 标签：ruby, postgresql, pg

我有一个 ruby​​ 脚本，我需要从数据库中检索所有值，并对检索到的每个值进行处理。目前我正在对每次检索进行硬编码，但这仅在有 3 个值返回时才有效。我该如何迭代呢？下面是我的代码：

```
 require 'pg'
  pg_conn = PGconn.connect(host = "main-pg-db-super.center.com", port = 6433, options = '', tty = '', 
                        dbname = "master_data", login = "user", password = "password")

  all_children = pg_conn.exec("SELECT id FROM pt.tests WHERE parent = '1';") # will return 3 results
  puts all_children[0]['id']
  puts all_children[1]['id']
  puts all_children[2]['id'] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T14:09:25.943

```
all_children.each do |child|
  puts child['id']
end 
```

这不起作用吗？

# android - 编写由 android 应用程序创建的私有文件

> ID：15903720
> 
> 赞同：3
> 
> 时间：2013-04-09T13:48:20.923
> 
> 标签：android, file, adb

我想覆盖 Android 上的私有数据文件。 [要读取和提取文件](https://stackoverflow.com/q/5137923/1287856)，我已经有了答案。

```
adb pull data/data/com.myapplication.package/files/myfile.extension 
```

但是现在，我尝试在自制更改后将文件推回：

```
adb push myfile.extension data/data/com.myapplication.package/files/myfile.extension 
```

我得到一个“ `Permission denied`”错误。我尝试登录外壳，然后更改权限：

```
adb shell
chmod 777 data/data/com.myapplication.package/files/myfile.extension 
```

我有一个`Operation not permitted`错误。关于如何覆盖平板电脑上现有文件的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:54:09.137

试试这个：

```
adb shell
run-as com.myapplication.package
chmod 777 files
chmod 777 files/myfile.extension 
```

该`run-as`命令允许您使用应用程序的权限执行 shell 命令。您只能在可调试的应用程序上使用它，如果您正在开发它应该是您的应用程序。

# web-applications - 什么是以企业为中心的应用程序

> ID：15903722
> 
> 赞同：0
> 
> 时间：2013-04-09T13:48:23.547
> 
> 标签：web-applications, architecture, design-patterns

我正在经历[这个](https://stackoverflow.com/questions/5063117/choosing-mobile-web-html5-framework)线程

我真的不明白以企业为中心的应用程序意味着什么。

它的特点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:58:53.407

大公司通常会考虑小型的个人开发人员不会考虑的事情。

最大的因素之一通常是支持。特别是，他们是否可以购买有保障的支持合同，以便他们（理论上）可以花更少的时间修补产品，并且在遇到问题时只需提交一张票。

一个相关因素是对功能请求的控制。例如，如果企业认为某些未开发的功能对其应用程序至关重要，他们通常会希望灵活地协商“如果您在日期 Z 之前向我们提供功能 Y，我们将向您支付 X 美元”形式的合同。

最后，企业公司通常在寻求长寿。他们不想将时间和培训投入到一个将在一两年内消失的平台上。

出于这个原因，传统的企业公司通常会采用更老、更慢的技术，这些技术更成熟，并得到大公司或组织的支持。

# ios - iOS - 故事板行为很奇怪

> ID：15903724
> 
> 赞同：0
> 
> 时间：2013-04-09T13:48:28.407
> 
> 标签：ios, xcode, storyboard

因此，我在情节提要文件的主场景中添加了一个按钮，但是当我在手机上安装/运行该应用程序时，该按钮并未显示。我正在将应用程序上传到网络服务器，然后通过 Cydia 安装应用程序。我曾尝试删除/卸载该应用程序，然后重新安装它，但这似乎并没有解决任何问题。

该应用程序可以通过以下 repo 从 cydia 下载：chrisrjones.com/repo

并且可以在github上找到源代码：doing a search for KegCop

我不知道为什么该应用程序会构建、安装但不显示按钮。

如果它有所不同，我的手机运行的是 iOS 5.1.1，我刚刚卸载了该应用程序，然后我重新安装了该应用程序，但我仍然得到相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:10:36.987

尝试清理您的 Xcode（您正在使用它，对吗？）构建 - **`Cmd-Shft-K`**。

此外，设备有时会出现乱码问题。这不是我完全理解的，显然苹果也没有，但经常**从设备中删除应用程序**也有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:36:20.520

好吧，我弄清楚了为什么我的更改没有更新。我正在为 iOS 模拟器而不是 iOS 设备构建。我需要切换 Xcode 左上角的下拉菜单 (-.-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T17:17:53.703

除了清理，退出你的xcode并返回它，它可以是一个组合。

还要检查的其他内容是确保该按钮未在故事板和代码中设置为隐藏。

# java - 动态调整/增长jface treeviewer

> ID：15903726
> 
> 赞同：0
> 
> 时间：2013-04-09T13:48:31.283
> 
> 标签：java, tree, treeview, swt, jface

是否可以动态调整/增长 Jface treeviewer 的大小？

我的意思是我们有一个组合，treeviewer 有一些内容，用户点击展开按钮来展开内容，现在 treeviewer 可以并行增长吗？

谢谢，山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:37:00.600

`TreeViewer`你不应该以这种方式“成长” 。`TreeViewer`想象一下屏幕太大以适应屏幕的场景。

要走的路是使用[`ScrolledComposite`](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fcustom%2FScrolledComposite.html)托管`TreeViewer`. 此滚动合成可以设置为默认大小，并且当内容对于该大小而言太大时将显示滚动条。

[这](http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/DemonstratesScrolledComposite.htm)是一个关于如何使用的简单示例`ScrolledComposite`。它看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/0fokW.png)

# asp.net-mvc - ASP MVC 4 不处理静态文件

> ID：15903727
> 
> 赞同：2
> 
> 时间：2013-04-09T13:48:37.450
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

我在我的 ASP MVC 4 应用程序中放置了一个名为“Protected”的子目录，并在该目录中放置了一个简单的 test.html 文件，但我终生无法弄清楚如何让我的自定义全局 AuthorizeAttribute 类在何时触发我在浏览器中查看 test.html 文件。

我在集成模式下使用 IIS Express，所以我认为这会起作用。我什至在集成模式下尝试了 IIS 7，但它仍然对我不起作用。

但也许我做的事情都错了。也许是我的一些误解。

基本上，我需要以编程方式授权对该文件夹中静态文件的请求。还有另一种方法吗？

AD 于 2013 年 4 月 9 日上午 10:07:25 更新：Zidad 在下面的回答让事情朝着正确的方向发展，但我现在无法配置路线。这就是我所拥有的，但该文件仍被直接提供，而不是点击 Home/File 操作。

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

routes.MapRoute("NotFound", "protected/test.html", new { controller = "Home", action = "File" });

routes.MapRoute(
    name: "Default", 
    url: "{controller}/{action}/{id}", 
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }); 
```

由 AD 于 2013 年 4 月 9 日上午 10:20:54 更新：Ohhhhhhhhhhhhhhhhhhh，现在我明白了！绝对是我的误解。我想我还有一些东西要学。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:53:09.780

首先确保添加到您的 web.config 以确保 IIS 在提供静态文件时不会绕过 .NET：

```
<system.webServer>
...
    <modules runAllManagedModulesForAllRequests="true" />
...
</system.webServer> 
```

那么您应该能够将 web.config 文件添加到受保护的文件夹中，其中包含：

```
<authorization>
  <deny users="?" />
</authorization> 
```

如果您确实想使用“AuthorizeAttribute”，则可以将路由映射到返回受保护文件夹中文件的控制器操作，并将该属性应用于该方法，如下所示：

[ASP.NET MVC 控制器可以返回图像吗？](https://stackoverflow.com/questions/186062/can-an-asp-net-mvc-controller-return-an-image)

更新：要使受保护文件的 URL 保持不变，您可以像这样配置路由：

```
routes.MapRoute(
                name: "ProtectedFile", 
                url: "protected/{name}", 
                defaults: new { controller = "Home", action = "File", name = "index.html" }); 
```

然后像这样写下你的动作：

```
public ActionResult File(string name){
// return file
} 
```

**看哪**：通过 .NET 提供所有静态文件会降低性能，并且此操作没有考虑 IIS 在提供静态文件时会自动为您执行的所有 HTTP 最佳实践，例如静态内容压缩，返回“未修改 (304 )" HTTP 状态，添加 ETAG 等。

# r - R：存储回归模型

> ID：15903733
> 
> 赞同：1
> 
> 时间：2013-04-09T13:48:55.363
> 
> 标签：r, loess

我正在使用多个回归模型来模拟一个问题，例如一周中的每一天。我想将这些存储在 R 中的数据结构中，以便在需要时调用它们。作为问题的一个最小示例，假设我想为 的每个值构造一个`z`：

```
df = data.frame(z = rep(c('a', 'b'), each = 10),
            x = rep.int(1:10, times = 2), 
            y = rep.int(10:1, times = 2)) 
```

天真地，我尝试了以下尝试：

```
dt = data.table(df)

v.type = unique(dt$z)
v.loess = numeric(0)

for(i in v.type)
  v.loess = c(v.loess, loess(y ~ x, data = dt[z==i]))

dt.loess = data.table(type = v.type, model = v.loess) 
```

给定例如`type = a`and `x = 2.5`，然后的想法是运行这样的东西：

```
predict(dt.loess[z == 'a', 'model', with = FALSE], newdata = 2.5) 
```

这种方法彻底失败。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T17:47:47.863

`loess()`返回类的 S3 对象`loess`。在内部，这些对象表示为列表，如果您调用`str()`它们，您可以看到什么。

现在，您的解决方案失败主要有两个原因：

1.  在 for 循环中，您连接这些对象（在此处阅读列表），这些对象`c()`只是将列表元素（或对象字段）连接到一个更大的列表，从而导致 class 的无效对象`loess`。然后，您尝试将此列表另存为`data.table`.

2.  我不明白你为什么要将模型最后存储在 a 中`data.table`，但我几乎可以肯定，这是不可能的，因为列元素必须是（据我记得）原子向量或列表. 我宁愿将模型存储在命名列表中并将它们留在那里。

* * *

### 使用基础 R 的解决方案

```
model <- list()
for( i in unique(dt$z) ){
  model[[i]] <- loess(y ~ x, data = dt[ z==i ] )
} 
```

### 使用 plyr 的解决方案

```
library("plyr")
model <- dlply( df, "z", function(data){
  loess( y ~ x, data = data )
} ) 
```

甚至更短：

```
library("plyr")
model <- dlply( df, "z", loess, formula = quote(y ~ x) ) 
```

后两种解决方案可以同时应用于:`data.table`和，但在这种情况下`data.frame`你没有利用任何优势。`data.table`所以你最终必须决定什么更快，更不容易出错。

* * *

在所有三种情况下，您都可以致电

```
predict( model[["a"]], newdata = 2.5)
[1] 8.5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:55:02.610

一方面，使用`c`组合结果给出有趣的结果；最好直接填写清单。另一方面，使用`data.table`来得到结果是很棘手的；我不是`data.table`专家，所以我会直接使用列表中的结果。

```
v.type = unique(df$z)
v.loess = list()
for(i in v.type) {
  v.loess[[i]] <- loess(y ~ x, data = df[df$z==i,])
}
predict(v.loess$a, newdata=2.5)
predict(v.loess$b, newdata=2.5) 
```

# iphone - 故事板中的图像拉伸。完全没有结果

> ID：15903736
> 
> 赞同：0
> 
> 时间：2013-04-09T13:49:00.957
> 
> 标签：iphone, ios

我不确定我在这里做错了什么，或者实际上我怎么可能做错了什么。无论我进入菜单的拉伸部分什么都没有改变。

我想拉伸图像的中心，使角落看起来正确。

所以这里是按钮。（myimage.png）它的 200x200px 角是 75px 宽。中间是50px（需要拉伸的）。因此，随着 iOS 上的拉伸采用 0-1.0，我就这样给了它。

这里有什么问题？

（设置的全尺寸屏幕截图）[http://i.stack.imgur.com/rgMiQ.png](https://i.stack.imgur.com/rgMiQ.png)

![在此处输入图像描述](https://i.stack.imgur.com/gJ7SD.png)

![在此处输入图像描述](https://i.imgur.com/udD2d1ql.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:24:08.463

我相信您需要使用以下代码在代码中将图像设置为可调整大小：

```
myImage = [[UIImage imageNamed:@"myImage"] resizableImageWithCapInsets:UIEdgeInsetsMake(36,36,36,36)]; 
```

我不确定视图中的“拉伸”选项有什么用，这可能是从 OSX 移植工具时遗留下来的东西

# javascript - FB.Event.subscribe auth.login 没有被触发

> ID：15903738
> 
> 赞同：0
> 
> 时间：2013-04-09T13:49:13.977
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我正在使用 facebook javascript sdk 连接到 facebook

但 FB.Event.subscribe auth.login 没有被触发。

这是我正在使用的代码

```
 window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
      appId      : 'xxxxxxxxx',                        // App ID from the app dashboard
      channelUrl : 'MychannelUrl', // Channel file for x-domain comms
      status     : true,                                 // Check Facebook Login status
      xfbml      : true                                  // Look for social plugins on the page
    });

    // Additional initialization code such as adding Event Listeners goes here
FB.Event.subscribe('auth.login', function(response) {console.log('event fired');
    if(response.status === 'connected') { console.log('connected');  }  
});

    }

      // Load the SDK asynchronously
      (function(d, s, id){
         var js, fjs = d.getElementsByTagName(s)[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement(s); js.id = id;
         js.src = "//connect.facebook.net/en_US/all.js";
         fjs.parentNode.insertBefore(js, fjs);
       }(document, 'script', 'facebook-jssdk'));
    </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:59:30.520

好吧，而不是使用 auth.login 使用 auth.statusChange

```
FB.Event.subscribe('auth.statusChange', function(response) {
        if (response.status === 'connected') {
                      //the user is logged and has granted permissions
        } else if (response.status === 'not_authorized') {
              //ask for permissions
        } else {
              //ask the user to login to facebook
        }
    }); 
```

请记住，这仅在用户状态发生更改时才会触发，因此如果您想在第一次运行时获取用户的状态，请使用该`FB.getLoginStatus()`函数。此函数给出的响应与`auth.statusChange`事件相同，`connected`并且`not_authorized`

# c# - C#字典TryGetValue与int值，如何避免双重查找

> ID：15903744
> 
> 赞同：8
> 
> 时间：2013-04-09T13:49:32.237
> 
> 标签：c#, dictionary, out, trygetvalue

当做类似的事情时：

```
int value;
if (dict.TryGetValue(key, out value))
{
    if (condition)
    {
        //value = 0;  this copies by value so it doesn't change the existing value
        dict[key] = 0;
    }
}
else
{
    dict[key] = 0;
} 
```

有什么办法可以避免索引查找来替换现有值？我已经在使用 TryGetValue 验证密钥是否存在，因此不得不再次按索引检索值似乎是一种浪费。

在单独的注释中，就像我的代码的 else{} 部分一样，在添加新值或替换旧值时使用索引器通常被认为是一种好习惯，并添加以明确您是在添加而不是替换？还是我应该每次都使用索引器？我学习使用字典的方式是，我总是做一个 TryGetValue 查找，在 else 部分我处理不存在键的情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T13:53:05.780

> 有什么办法可以避免索引查找来替换现有值？

不是我所知道的 - 但字典访问应该*非常*`GetHashCode`快，除非你有一个被覆盖得很差的自定义类。

如果由于双重查找而没有看到性能问题，我会不理会它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T14:05:25.733

你可以试试这个

```
Object value;
if (dict.TryGetValue(key, out value))
{
    if (condition)
    {
        //value.data = 0;  this copies by value so it doesn't change the existing value
        value.data = 0;
    }
}
else
{
    value.data = 0;
} 
```

The essense of story is, the type you are fetching out is a generic type and is allocated on heap. i.e. when you fetch it out, it will come out as value. However, if you fetch out object, it will be a reference to the original allocated object and you can modify the value of a particular property of object.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T13:56:33.633

我更喜欢为这样的事情定义方便的扩展方法。例如：

```
 public static TValue GetValueOrDefault<TKey, TValue>(this IDictionary<TKey, TValue> dictionary, TKey key, TValue defaultValue)
    {
        TValue value;
        return dictionary.TryGetValue(key, out value) ? value : defaultValue;
    }

    public static TValue GetOrSet<TKey, TValue>(this IDictionary<TKey, TValue> dictionary, TKey key, TValue value)
    {
        return dictionary[key] = dictionary.GetValueOrDefault(key, value);
    } 
```

几乎不需要担心字典散列和查找的性能——我主要关心的是可读性和可维护性。有了上面的扩展方法，这种事情就单线了：

```
int value = dict.GetOrSet(key, 0); 
```

（免责声明：不执行`if (condition)`检查 - 我很少遇到这些情况）

# objective-c - 无法使用 Cocoa (IOKit) 向我的 Arduino Uno 发送数据

> ID：15903747
> 
> 赞同：5
> 
> 时间：2013-04-09T13:49:44.400
> 
> 标签：objective-c, cocoa, serial-port, arduino, iokit

我目前正在尝试通过 Mac 应用程序将数据发送到我的 Arduino。我的[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)中的代码如下所示：

```
void setup()
{
    pinMode (2, OUTPUT);
    pinMode (3, OUTPUT);
    pinMode (4, OUTPUT);

    Serial.begin (9600);
}

void loop ()
{
    digitalWrite (2, HIGH);

    if (Serial.available () > 0)
    {
        int c = Serial.read();

        if (c == 255)
        {
            digitalWrite (3, HIGH);
        }
        else
            digitalWrite (4, HIGH);
    }
} 
```

这是我在 XCode 项目中的代码：

```
// Open the serial like POSIX C
serialFileDescriptor = open(
                            "/dev/tty.usbmodemfa131",
                            O_RDWR |
                            O_NOCTTY |
                            O_NONBLOCK );

struct termios options;

// Block non-root users from using this port
ioctl(serialFileDescriptor, TIOCEXCL);

// Clear the O_NONBLOCK flag, so that read() will
//   block and wait for data.
fcntl(serialFileDescriptor, F_SETFL, 0);

// Grab the options for the serial port
tcgetattr(serialFileDescriptor, &options);

// Setting raw-mode allows the use of tcsetattr() and ioctl()
cfmakeraw(&options);

speed_t baudRate = 9600;

// Specify any arbitrary baud rate
ioctl(serialFileDescriptor, IOSSIOSPEED, &baudRate);

NSLog (@"before");
sleep (5); // Wait for the Arduino to restart
NSLog (@"after");

int val = 255;
write(serialFileDescriptor, val, 1);
NSLog (@"after2"); 
```

因此，当我运行应用程序时，它会等待五秒钟，但随后会冻结。控制台中的输出是这样的：

```
before
after 
```

那么，我在这里做错了什么？

更新：所以，当我评论这条线时

```
fcntl(serialFileDescriptor, F_SETFL, 0); 
```

程序没有冻结，但我的 Arduino 仍然没有得到任何数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:52:33.843

1) write() 调用的第二个参数不正确 - write() 需要一个指向要写入的字节的指针。要将数值变量的值写入字节，请传递变量的地址，而不是变量本身：

```
write(serialFileDescriptor, (const void *) &val, 1); 
```

有关 write() 的更多信息： [https ://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/write.2.html](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/write.2.html)

2) 更改本地 termios 变量、选项 - 例如对 cfmakeraw() 的调用 - 不会影响终端设置；为了使用更改的选项更新终端设置，请调用 tcsetattr()：

```
cfmakeraw(&options);

// ...other changes to options...

tcsetattr(serialFileDescriptor, TCSANOW, &options); 
```

有关 Mac OS X 串行通信的更多信息：http: [//developer.apple.com/library/mac/#documentation/DeviceDrivers/Conceptual/WorkingWSerial/WWSerial_SerialDevs/SerialDevices.html](http://developer.apple.com/library/mac/#documentation/DeviceDrivers/Conceptual/WorkingWSerial/WWSerial_SerialDevs/SerialDevices.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T21:02:55.463

您的 Arduino 草图应该读取`uint8_t`，而不是`int`您的 IOKit 调用 write() 也应该使用 uint8_t。

# r - R中矩阵滚动标准差的一种快速计算方法

> ID：15903754
> 
> 赞同：1
> 
> 时间：2013-04-09T13:50:09.040
> 
> 标签：r

我想找到一种快速计算矩阵滚动标准偏差的方法。为了准确解释我的意思，我在下面模拟了一些代码，以准确显示我在寻找什么。如您所知，这将非常慢

```
aaa <- matrix(1:1000,10,100)
bbb <- aaa
bbb[] <- NA
tt.n <- 5

for (i in (tt.n:dim(aaa)[2]))
    {
    bbb[,i] <- apply(aaa[,(i-tt.n+1):i],1,sd)   
    } 
```

# c++ - 卡片组的向量与数组

> ID：15903756
> 
> 赞同：0
> 
> 时间：2013-04-09T13:50:13.617
> 
> 标签：c++, arrays, vector

所以我想用 C++ 制作一副扑克牌模拟器，我想知道，我应该使用什么，向量还是数组？我知道每个人的不同能力，我只是不知道应该使用哪个来获得有凝聚力的体验。我需要这个的原因是因为我正在制作一个基于文本的游戏，并且我将在其中包含一个迷你扑克游戏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:58:04.280

在 C++ 中，“默认”选项可能应该是“我需要存储很多东西”，`vector`或者`deque`当您查看“我需要存储很多东西”时。使用普通数组没有好处，除非它对性能非常关键。

当然，您将需要多个收藏品，例如玩家的手牌、正在使用的卡片、未使用的卡片。

使用标准容器类 (`std::vector`或`std::deque`)，您的优势在于您不需要单独的“玩家 X 有多少张牌”，您可以使用它`player[x] .hand.size()`来确定。（玩家当然也是收藏类！）

# ios - 在 iOS 应用程序之间交换数据

> ID：15903764
> 
> 赞同：0
> 
> 时间：2013-04-09T13:50:31.730
> 
> 标签：ios

我知道 x-callback-url，以及如何将字符串发送到 iOS 中的应用程序。

但是是否可以反过来做，例如，iOS 应用程序是否可以获取当前在 Music.app 中播放的歌曲？应用程序可以从 Messages.app 获取具有特定呼叫者 ID 的消息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:53:42.930

我相信，您需要访问他们的 API/后端才能做到这一点。无法直接与另一个 iOS 应用程序对话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:05:43.207

> 不，我不是骗子；）我希望我的应用程序读取我的网关发送的 SMS 的内容，以进行设备授权。

为您的应用注册一个方案。在您的短信中添加与该方案的链接，注册码为 uri-path。通过单击应该打开您的应用程序，您可以处理 uri。

# python - 使用 pandas 查找数据中的“空白”

> ID：15903768
> 
> 赞同：0
> 
> 时间：2013-04-09T13:50:50.573
> 
> 标签：python, pandas, time-series

我有关于 pulications 的数据，其中包含 issn、year、volume 和 issue。所以例如

```
1234-x000, 2013, 1, 2
1234-x000, 2013, 1, 1
1234-x000, 2012, 6, 2
1234-x000, 2012, 6, 1
1234-x000, 2012, 5, 2
....
4321-yyyy, 2013, 2, 1
4321-yyyy, 2013, 1, 1
4321-yyyy, 2012, 12, 1
4321-yyyy, 2012, 11, 1
.... 
```

我想识别丢失的数据。一个问题是，数量/问题结构并不总是相同的。因此，对于一个 issn，每卷可能有 12 个问题，或者只有 6 个或……但是可以假设每年一个 issn 的数量是固定的。

我的熊猫知识还是很基础的。我有一种感觉，我应该能够用几行聪明的熊猫代码来识别缺失的值，但我不明白。任何提示如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:39:47.817

这不是一个完整的解决方案，例如它假设最后一卷始终存在。但是，当您要求指针时，这应该可以帮助您：

```
In [28]: df
Out[28]: 
        issn  year  vol  issue
0  1234-x000  2013    1      2
1  1234-x000  2013    1      1
2  1234-x000  2012    6      2
3  1234-x000  2012    6      1
4  1234-x000  2012    5      2
5  4321-yyyy  2013    2      1
6  4321-yyyy  2013    1      1
7  4321-yyyy  2012   12      1
8  4321-yyyy  2012   11      1

In [29]: vols = df.groupby('issn').vol.max()

In [30]: vols
Out[30]: 
issn
1234-x000     6
4321-yyyy    12
Name: vol

In [31]: for k, g in df.groupby(['issn','year']):
    ...:     print k
    ...:     print 'missing: ', np.setdiff1d(np.arange(1, vols[k[0]]+1),
    ...:                                                g.issue.values) 
```

输出：

```
('1234-x000', 2012)
missing:  [ 3\.  4\.  5\.  6.]
('1234-x000', 2013)
missing:  [ 3\.  4\.  5\.  6.]
('4321-yyyy', 2012)
missing:  [  2\.   3\.   4\.   5\.   6\.   7\.   8\.   9\.  10\.  11\.  12.]
('4321-yyyy', 2013)
missing:  [  2\.   3\.   4\.   5\.   6\.   7\.   8\.   9\.  10\.  11\.  12.] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:02:36.863

这是一种方法。我会添加两列“idx”和“max”

```
In [452]: df['idx'] = df.groupby(['issn']).apply(lambda sdf: (sdf.volume - 1) * sdf.issue.max() + sdf.issue)

In [453]: df
Out[453]:
        issn  year  volume  issue  idx
0  1234-x000  2013       1      2    2
1  1234-x000  2013       1      1    1
2  1234-x000  2012       6      2   12
3  1234-x000  2012       6      1   11
4  1234-x000  2012       5      2   10
5  4321-yyyy  2013       2      1    2
6  4321-yyyy  2013       1      1    1
7  4321-yyyy  2012      12      1   12
8  4321-yyyy  2012      11      1   11

In [454]: df['max'] = df.groupby(['issn']).idx.transform(lambda s: s.max())

In [455]: df
Out[455]:
        issn  year  volume  issue  idx  max
0  1234-x000  2013       1      2    2   12
1  1234-x000  2013       1      1    1   12
2  1234-x000  2012       6      2   12   12
3  1234-x000  2012       6      1   11   12
4  1234-x000  2012       5      2   10   12
5  4321-yyyy  2013       2      1    2   12
6  4321-yyyy  2013       1      1    1   12
7  4321-yyyy  2012      12      1   12   12
8  4321-yyyy  2012      11      1   11   12 
```

上一个答案提供了其余的

```
In [462]: df.groupby(['issn', 'year']).apply(lambda sdf: np.setdiff1d(range(1, sdf['max'].irow(0)), sdf.idx).tolist())
Out[462]:
issn       year
1234-x000  2012        [1, 2, 3, 4, 5, 6, 7, 8, 9]
           2013      [3, 4, 5, 6, 7, 8, 9, 10, 11]
4321-yyyy  2012    [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
           2013      [3, 4, 5, 6, 7, 8, 9, 10, 11] 
```

# javascript - 从 codeigniter 的视图中调用 javascript 验证函数

> ID：15903771
> 
> 赞同：0
> 
> 时间：2013-04-09T13:50:58.463
> 
> 标签：javascript, codeigniter, validation

我想在 codeignigter 的 clint 端验证一个表单。我有一个视图和一个 javascript 函数。我如何调用 javascript 函数来验证表单。这是我的代码

```
 function validate()
    {
var txtSchoolName=document.getElementById('name');
var address=document.getElementById('address');
var contactNo1=document.getElementById('contactNo1');

    if((name.value==null)||(name.value=="")){
    alert("Enter School Name")
    name.focus()
    return false
    }
if((address.value==null)||(address.value=="")){
    alert("Provide Address")
    address.focus()
    return false
    }
if((contactNo1.value==null)||(contactNo1.value=="")){
    alert("Provide Contact Number")
    contactNo1.focus()
    return false
    }
   return true
  }
  </script>
  echo form_open_multipart('register_school/updateSchool');
    echo '<p>';

    echo '</br>';
    echo form_label('School Name : ','username',$attributes);
    echo form_input('name');

    echo form_label('School Address : ','username',$attributes);
    echo form_input('address');

    echo form_label('Contact No 1 : ','username',$attributes);
    echo form_input('contactNo');
            echo form_submit('submit', 'Save','validate()');        
    echo form_close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:05:00.680

我相信`form_submit`第三个参数的正确用法与 form_checkbox 相同：

来自 CI 文档：

```
$js = 'onClick="some_function()"';

echo form_checkbox('newsletter', 'accept', TRUE, $js) 
```

所以你的代码应该是

```
echo form_submit('submit', 'Save', 'onClick="validate()"'); 
```

或者

```
 echo form_open_multipart('register_school/updateSchool', 'onSubmit="validate()"'); 
```

# synchronization - 将远程 MySql DB 与托管的 MySql DB 同步

> ID：15903772
> 
> 赞同：0
> 
> 时间：2013-04-09T13:50:59.997
> 
> 标签：synchronization, desktop-application, hosted

是否可以通过 Internet 连接自动将本地 MySql 数据库与托管的 MySql 数据库同步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T11:16:35.847

是的，您可以通过以下方法做到这一点：

1.  创建一个从托管数据库导出数据的 shell 脚本，然后将数据完全导入本地数据库。
2.  导出数据库的远程脚本可以直接在您的托管服务器上运行，您可以安排它在预定义的时间运行。
3.  对于本地，在本地系统上运行脚本，检查导出数据库的日期时间戳，然后在本地数据库上运行导入。

这是解决您的问题的最简单、最快速的解决方案。否则，市场上有可用的商业工具，具体取决于您必须同步的数据库，它可以执行此操作。

# c# - 如何从控制台读取连续的输入行以用于 Add() 方法？

> ID：15903773
> 
> 赞同：1
> 
> 时间：2013-04-09T13:51:01.630
> 
> 标签：c#, methods, console-application, readline

以下是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace JeffOrrisSimpleCalculator._1
{
    class Program
    {
        static void Main(string[] args)
        {

            Console.WriteLine("Simple Calculator");
            Console.WriteLine("\t1> Add");
            Console.WriteLine("\t2> Subtract");
            Console.WriteLine("\t3> Multiply");
            Console.WriteLine("\t4> Divide");
            Console.WriteLine("\t5> Quit");
            Console.WriteLine();
            Console.Write("Enter Selection:  ");

            string myValue = ValidateData();
            Console.WriteLine(myValue);

            Console.Write("Enter number one:  ");
            Console.ReadLine();
            Console.Write("Enter number two:  ");
            Console.ReadLine();

            string mySum = Add();
            Console.WriteLine(mySum);

            Console.Read();
        }//end main

        private static string ValidateData()
        {

            string temp = Console.ReadLine();
            if ((temp == "1") || (temp == "2") || (temp == "3") || (temp == "4") ||                (temp == "5"))
            {
                //string Response = "Thank You";
                //return Response;

                return null;
            }
            else
            {
                string Response = "Please enter a valid selection";
                return Response;

            }
        }//end ValidateData

        private static string Add()
        {
            string numberOne = Console.ReadLine();
            double temp1 = Convert.ToDouble(numberOne);

            string numberTwo = Console.ReadLine();
            double temp2 = Convert.ToDouble(numberTwo);

            double total = temp1 + number2;
            string myTotal = Convert.ToString(total);
            return myTotal;
        }

        }//end class
        }//end namespace 
```

*我只关心 add 方法。我提示用户输入我需要使用 add 方法添加的 2 个数字。我相信我想多了。我习惯于 Windows 窗体而不是控制台应用程序。我不知道如何从 Console.ReadLine 连续保存这些输入变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T13:55:19.953

> 我提示用户输入 2 个数字

是的，你在提示用户——但是你完全忽略了他们的输入。这：

```
Console.Write("Enter number one:  ");
Console.ReadLine();
Console.Write("Enter number two:  ");
Console.ReadLine(); 
```

应该更像：

```
Console.Write("Enter number one:  ");
string firstLine = Console.ReadLine();
Console.Write("Enter number two:  ");
string secondLine = Console.ReadLine(); 
```

接下来，您需要弄清楚如何将*字符串*转换为*数字*。该步骤的查看[`int.TryParse`](http://msdn.microsoft.com/en-gb/library/f02979c7.aspx)等。

（您可能希望在询问“第二号”之前验证“第一号” - 考虑创建一个方法，该方法采用提示字符串并不断提示用户，直到他们实际输入一个数字 - 然后从该方法返回。）

# maven - 带有多模块和战争覆盖的tomcat-maven-plugin

> ID：15903775
> 
> 赞同：2
> 
> 时间：2013-04-09T13:51:04.793
> 
> 标签：maven, war, maven-tomcat-plugin

我有一个 Maven 战争项目（称为**projectA**），它依赖于另一个 Maven 战争（称为**projectB**）。它们使用覆盖与 `maven-war-plugin`. 两个项目具有相同的父级和相同的聚合器（不同于父级）。我可以毫无问题地成功打包最后的战争。这是我正在运行的命令（运行时我处于聚合器级别`mvn`）：

```
mvn -am -pl projectA package 
```

反应堆构建顺序是**parent** ➡ **projectB** ➡ **projectA**，一切都很好。

我现在正在尝试`tomcat-maven-plugin`在此版本中使用。所以我`tomcat-maven-plugin`在 parent pom`pluginManagement`部分添加了它，并在**projectA pom.xml**中使用了它。我正在启动tomcat：

```
mvn -am -pl projectA tomcat:run 
```

反应堆建造顺序保持不变。但是 tomcat 执行是在**projectB**（这也是一场战争）上运行的，而**不是**在**projectA**上运行的。实际上，甚至没有达到**projectA**构建。

我已经尝试过 org.codehaus.mojo.tomcat-maven-plugin v1.1 和 org.apache.tomcat.maven.tomcat6-maven-plugin v2.1，我发现了相同的行为。

如何让 tomcat 运行最终的**projectA**？

**注意：**项目依赖实际上有点复杂，并且还涉及其他子项目（jar），这就是为什么我用`-am`（*也 make*）调用 maven。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:55:19.277

好的，所以我找到了解决方案。这是禁用**pojectB**`maven-tomcat-plugin`的，这个答案是基于[这个 other question](https://stackoverflow.com/questions/7800647/in-a-maven-multi-module-project-how-can-i-disable-a-plugin-in-one-child)。

 **## 将插件链接到特定阶段

首先，我必须将 链接`maven-tomcat-plugin`到我的构建周期的一个阶段，以便即使我不直接从 CLI 调用插件也会调用它，显然我选择了这个`integration-test`阶段。我现在可以运行`mvn integration-test -pl projectA`tomcat 来启动 just build 战争。

这是插件在**parent**中声明的方式：

```
<pluginManagement>
<plugins>
<plugin>
    <groupId>org.apache.tomcat.maven</groupId>
    <artifactId>tomcat6-maven-plugin</artifactId>
    <version>2.1</version>
    <executions>
       <execution>
           <id>run-war</id>
           <!-- We link this plugin to some non default phase so that we can disable it in some modules. -->
           <phase>integration-test</phase>
           <goals>
               <goal>run-war</goal>
           </goals>
       </execution>
    </executions>
</plugin>
</plugins>
</pluginManagement> 
```

在**projectA**中，我只是按照**父**级中的声明使用它：

```
<build>
<plugins>
<plugin>
    <groupId>org.apache.tomcat.maven</groupId>
    <artifactId>tomcat6-maven-plugin</artifactId>
</plugin>
</plugin>
</build> 
```

## 停用 projectB 中的插件

然后，在 中`projectB`，我将相同的插件（具有相同的`id`）链接到 null/void/empty 阶段，最终在为此`integration-test`阶段构建时禁用该项目的插件：

```
<build>
<plugins>
<plugin>
    <groupId>org.apache.tomcat.maven</groupId>
    <artifactId>tomcat6-maven-plugin</artifactId>
    <executions>
        <execution>
            <id>run-war</id>
            <!-- We don't want this plugin to be called from another module build -->
            <phase/>
        </execution>
    </executions>
</plugin>
</plugins>
</build> 
```

通过该设置，我现在可以进行完整的构建（projectB、projectA 和其他依赖项）并在一次运行中启动 tomcat 并生成战争：

```
mvn -am -pl projectA clean integration-test 
```**

# javascript - .call() / .apply() 没有参数 VS 简单地调用带有 () 括号的函数

> ID：15903782
> 
> 赞同：7
> 
> 时间：2013-04-09T13:51:14.543
> 
> 标签：javascript, function, closures

我已经看到它在代码中的表现有所不同，但是在常规**()**函数执行上执行（空白参数） **.call / .apply是否有任何好处或理由。**

 **这当然是一个过于简单的例子

```
var func = function () { /* do whatever */ };

func.call();
func.apply(); 
```

*VERSUS*只是简单的括号。

```
func(); 
```

在任何地方都没有看到任何关于此的信息，我知道为什么在传递参数时使用调用/应用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T13:53:19.947

当您使用 调用方法时`func();`，方法`this`内的变量指向`window`对象。

当您使用[call(...)](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Function/call) / [apply(...)](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)时，传递给方法调用的第一个参数变为方法`this`内部。如果您没有传递任何参数/传递 null 或 undefined，那么`this`将[成为非严格模式下的全局对象](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Function/call#Parameters)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-28T08:16:20.483

是的，在某些情况下有一个重要的区别。例如，处理回调。假设您有一个带有构造函数的类，该类接受`callback`参数并将其存储在`this.callback`. 稍后，当通过调用此回调时`this.callback()`，外部代码突然通过 获取对您的对象的引用`this`。它并不总是可取的，`this.callback.call()`在这种情况下使用会更好/更安全。

这样，外部代码将得到`undefined`as`this`并且不会尝试意外修改您的对象。并且正确编写的回调不会受到这种用法的影响`call()`，因为它们会提供定义为箭头函数或绑定函数（通过`.bind()`）的回调。在这两种情况下，回调将有自己的，正确的 this，不受 影响`call()`，因为箭头和绑定函数只是忽略由 设置的值`apply()/call()`。**

# java - 无法在 run.bat 上启动 Jboss 服务器

> ID：15903784
> 
> 赞同：2
> 
> 时间：2013-04-09T13:51:17.007
> 
> 标签：java, jboss, jboss5.x

当我使用 run.bat 运行 JBoss 服务器时，我得到了 ClassNotFoundException。

![在此处输入图像描述](https://i.stack.imgur.com/yZDEy.png) ![在此处输入图像描述](https://i.stack.imgur.com/9Ixpi.png)

**更新**：

![在此处输入图像描述](https://i.stack.imgur.com/avZze.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:02:41.197

问题似乎是您的 JAVA_HOME 环境变量未设置为`JDK`. 您的屏幕截图显示了`JRE`JAVA_HOME。将其切换到 JDK 并重新尝试启动 JBoss。

JAVA_HOME 也应该在您的 PATH 环境变量中。

`run.conf.bat`或者，您可以在文件中手动设置 JAVA_HOME

# python - Python多处理和共享变量

> ID：15903788
> 
> 赞同：5
> 
> 时间：2013-04-09T13:51:23.000
> 
> 标签：python, multiprocessing

我不是 python 专家，但我设法编写了一个多处理代码，该代码使用了我 PC 中的所有 cpu 和内核。我的代码加载了一个非常大的数组，大约 1.6 GB，我需要在每个进程中更新数组。幸运的是，更新包括在图像中添加一些人造星，并且每个过程都有一组不同的图像位置来添加人造星。

图像太大，每次调用进程时我都无法创建一个新图像。我的解决方案是在共享内存中创建一个变量，这样可以节省大量内存。出于某种原因，它适用于 90% 的图像，但有些区域是我的代码在我之前发送到进程的某些位置添加随机数。它与我创建共享变量的方式有关吗？在我的代码执行过程中，进程是否相互干扰？

奇怪的是，当使用单 cpu 和单核时，图像是 100% 完美的，并且图像中没有添加随机数。您是否建议我在多个进程之间共享一个大型数组？这是我的代码的相关部分。请在我定义变量 im_data 时阅读该行。

```
import warnings
warnings.filterwarnings("ignore")

from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm
import matplotlib.pyplot as plt
import sys,os
import subprocess
import numpy as np
import time
import cv2 as cv
import pyfits
from pyfits import getheader
import multiprocessing, Queue
import ctypes

class Worker(multiprocessing.Process):

def __init__(self, work_queue, result_queue):

    # base class initialization
    multiprocessing.Process.__init__(self)

    # job management stuff
    self.work_queue = work_queue
    self.result_queue = result_queue
    self.kill_received = False

def run(self):
    while not self.kill_received:

        # get a task
        try:
            i_range, psf_file = self.work_queue.get_nowait()
        except Queue.Empty:
            break

        # the actual processing
        print "Adding artificial stars - index range=", i_range

        radius=16
        x_c,y_c=( (psf_size[1]-1)/2, (psf_size[2]-1)/2 )
        x,y=np.meshgrid(np.arange(psf_size[1])-x_c,np.arange(psf_size[2])-y_c)
        distance = np.sqrt(x**2 + y**2)

        for i in range(i_range[0],i_range[1]):
            psf_xy=np.zeros(psf_size[1:3], dtype=float)
            j=0
            for i_order in range(psf_order+1):
                j_order=0
                while (i_order+j_order < psf_order+1):
                    psf_xy += psf_data[j,:,:] * ((mock_y[i]-psf_offset[1])/psf_scale[1])**i_order * ((mock_x[i]-psf_offset[0])/psf_scale[0])**j_order
                    j_order+=1
                    j+=1

            psf_factor=10.**( (30.-mock_mag[i])/2.5)/np.sum(psf_xy)
            psf_xy *= psf_factor

            npsf_xy=cv.resize(psf_xy,(npsf_size[0],npsf_size[1]),interpolation=cv.INTER_LANCZOS4)
            npsf_factor=10.**( (30.-mock_mag[i])/2.5)/np.sum(npsf_xy)
            npsf_xy *= npsf_factor

            im_rangex=[max(mock_x[i]-npsf_size[1]/2,0), min(mock_x[i]-npsf_size[1]/2+npsf_size[1], im_size[1])]
            im_rangey=[max(mock_y[i]-npsf_size[0]/2,0), min(mock_y[i]-npsf_size[0]/2+npsf_size[0], im_size[0])]
            npsf_rangex=[max(-1*(mock_x[i]-npsf_size[1]/2),0), min(-1*(mock_x[i]-npsf_size[1]/2-im_size[1]),npsf_size[1])]
            npsf_rangey=[max(-1*(mock_y[i]-npsf_size[0]/2),0), min(-1*(mock_y[i]-npsf_size[0]/2-im_size[0]),npsf_size[0])]

            im_data[im_rangey[0]:im_rangey[1], im_rangex[0]:im_rangex[1]] = 10.

        self.result_queue.put(id)

if __name__ == "__main__":

  n_cpu=2
  n_core=6
  n_processes=n_cpu*n_core*1
  input_mock_file=sys.argv[1]

  print "Reading file ", im_file[i]
  hdu=pyfits.open(im_file[i])
  data=hdu[0].data
  im_size=data.shape

  im_data_base = multiprocessing.Array(ctypes.c_float, im_size[0]*im_size[1])
  im_data = np.ctypeslib.as_array(im_data_base.get_obj())
  im_data = im_data.reshape(im_size[0], im_size[1])
  im_data[:] = data
  data=0
  assert im_data.base.base is im_data_base.get_obj()

  # run
  # load up work queue
  tic=time.time()
  j_step=np.int(np.ceil( mock_n*1./n_processes ))
  j_range=range(0,mock_n,j_step)
  j_range.append(mock_n)

  work_queue = multiprocessing.Queue()
  for j in range(np.size(j_range)-1):
    if work_queue.full():
      print "Oh no! Queue is full after only %d iterations" % j
    work_queue.put( (j_range[j:j+2], psf_file[i]) )

  # create a queue to pass to workers to store the results
  result_queue = multiprocessing.Queue()

  # spawn workers
  for j in range(n_processes):
    worker = Worker(work_queue, result_queue)
    worker.start()

  # collect the results off the queue
  while not work_queue.empty():
    result_queue.get()

  print "Writing file ", mock_im_file[i]
  hdu[0].data=im_data
  hdu.writeto(mock_im_file[i])
  print "%f s for parallel computation." % (time.time() - tic) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:25:31.200

我认为问题（正如您在问题中所建议的那样）来自您从多个线程在同一个数组中*写入的事实。*

```
im_data_base = multiprocessing.Array(ctypes.c_float, im_size[0]*im_size[1])
im_data = np.ctypeslib.as_array(im_data_base.get_obj())
im_data = im_data.reshape(im_size[0], im_size[1])
im_data[:] = data 
```

尽管我很确定您可以`im_data_base`以“进程安全”的方式写入（python 使用隐式锁来同步对数组的访问），但我不确定您是否可以`im_data`以进程安全的方式写入。

因此，我会（即使我不确定我是否会解决您的问题）建议您创建一个**明确**的锁定`im_data`

```
# Disable python implicit lock, we are going to use our own
im_data_base = multiprocessing.Array(ctypes.c_float, im_size[0]*im_size[1], 
    lock=False)
im_data = np.ctypeslib.as_array(im_data_base.get_obj())
im_data = im_data.reshape(im_size[0], im_size[1])
im_data[:] = data
# Create our own lock
im_data_lock = Lock() 
```

然后在进程中，每次需要修改时获取锁`im_data`

```
self.im_data_lock.acquire()
im_data[im_rangey[0]:im_rangey[1], im_rangex[0]:im_rangex[1]] = 10
self.im_data_lock.release() 
```

`self.im_data_lock`为了简洁起见，我省略了将锁传递给进程的构造函数并将其存储为成员字段 ( ) 的代码。您还应该将`im_data`数组传递给进程的构造函数并将其存储为成员字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:23:25.570

当多个线程写入图像/数组中的重叠区域时，您的示例中会出现问题。因此，实际上您要么必须为每个图像放置一个锁，要么为每个图像部分创建一组锁（以减少锁争用）。

或者，您可以在一组进程中生成图像修改，并在单独的单个线程中对图像进行实际修改。

# c# - 按属性对对象的 ListBox 进行排序

> ID：15903791
> 
> 赞同：0
> 
> 时间：2013-04-09T13:51:28.967
> 
> 标签：c#, sorting, object, listbox

我有一个由以下人员创建的列表：

```
List<Song> SongList = new List<Song>(); 
```

由一群人组成：

```
SongList.Add(new Song(songID, "Dirt", "Alice in Chains", "Rooster", "Rock", "02:32")); 
```

歌曲的详细信息通过以下方式填充到 ListBox 中：

```
private void songTitle_TextChanged(object sender, EventArgs e)
{
    i = 0;

    for (; i < songTitle.Text.Length; i++)
    {
        songResultBox.Items.Clear();
        var songResult = from song in SongList
        where song.SongTitle != null && song.SongTitle.Length >= songTitle.Text.Length
            && songTitle.Text == song.SongTitle.Substring(0, i+1)
        select new { sId = song.SongID, album = song.SongAlbum, artist = song.SongArtist, title = song.SongTitle, 
            genre = song.SongGenre, length = song.SongLength };

        foreach (var item in songResult)
        {
            songResultBox.Items.Add(new Song(item.sId, item.album, item.artist, item.title, item.genre, item.length));
                songResultBox.DisplayMember = "FullName";
                songResultBox.ValueMember = "songID";
        }
    }
} 
```

问题是：我将如何创建一个按钮（或实际上是 4 个）来获取 ListBox 'songResultBox' 的内容并按标题、专辑、艺术家、流派等对其内容进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:00:16.617

创建按钮，根据要排序的属性对其进行标记，向按钮添加单击事件，对项目进行排序（希望您已经维护了它们的列表），然后重新填充列表框：

```
private bool descendingSongTitleSort = false;
private bool descendingArtistSort = false;

// Artist button clicked event
private void artistButtonClicked(object sender, EventArgs args)
{
    Func<Song, IComparable> sortProp = (song => song.Artist);
    sortListBox(songResultBox, descendingArtistSort, sortProp);
    descendingSongTitleSort = false;
    descendingArtistSort = !descendingArtistSort;
}

// Title button clicked event
private void titleButtonClicked(object sender, EventArgs args)
{
    Func<Song, IComparable> sortProp = (song => song.Title);
    sortListBox(songResultBox, descendingSongTitleSort, sortProp);
    descendingSongTitleSort = !descendingSongTitleSort;
    descendingArtistSort = false;
}

// Sorting function
private void sortListBox(
    ListBox box, 
    bool descending, 
    Func<Song, IComparable> sortProperty)
{
    List<Song> items = new List<Song>();
    foreach (Object o in box.Items)
    {
        Song s = o as Song;
        items.Add(s);
    }
    box.Items.Clear();
    if(descending)
    {
        items = items.OrderByDescending(sortProperty).ToList(); 
    } 
    else 
    {
        items = items.OrderBy(sortProperty).ToList();
    }
    foreach(Song s in items)
    {
        box.Items.Add(s); 
    }
} 
```

如果您不想担心采用相反的方向，则不需要降序布尔值。

# c# - 动态 LINQ：比较今天和四个星期前的日期

> ID：15903798
> 
> 赞同：3
> 
> 时间：2013-04-09T13:51:42.560
> 
> 标签：c#, .net, sql, linq, datetime

```
BETWEEN CAST(GETDATE() AS DATE) AND DATEADD(WEEK, 4, CAST(GETDATE() AS DATE)) 
```

这就是您在 mssql 中的操作方式。我怎样才能使用动态 linq（或任何它被称为的东西——比如不是 C#，而是字符串）来做到这一点。

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T14:00:22.027

我假设这是 C#。

如果是这样，您可能正在寻找这样的东西：

```
var theDate = {some date};
if (theDate <= DateTime.Today && theDate >= DateTime.Today.AddDays(-4 * 7))
{
    // stuff goes here
} 
```

就 LINQ 而言，这实际上取决于您要做什么，但这应该给您一个大致的想法：

```
var foos = from foo in SomeQueryable
    where foo.Date <= DateTime.Today
    && foo.Date >= DateTime.Today.AddDays(-4 * 7)
    select foo; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:11:04.377

```
var qryResult =   (from tbl in dbcontext.Yourtable
                      where  tbl.CheckDate >= DateTime.Today  
             && tbl.CheckDate <=  System.Globalization.CultureInfo.InvariantCulture.Calendar.AddWeeks(DateTime.Today, 4) )
            select tbl 
            ).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:02:44.847

如果您只需要知道如何在 C# 中比较日期，那么：
创建扩展：

```
public static DateTime AddWeeks(this DateTime date, int weeks)
{
    return date.AddDays(7*weeks);
} 
```

所以在 Linq 中：

```
var now = DateTime.Now;
whatever.Where(d => now.AddWeeks(-4) < d && d < now) 
```

# ios - 在后台接收推送通知并在用户不知情的情况下创建本地通知

> ID：15903800
> 
> 赞同：0
> 
> 时间：2013-04-09T13:52:02.910
> 
> 标签：ios, objective-c, background, push-notification, apple-push-notifications

我收到一个远程推送通知，我需要在 30 分钟内注册一个 UILocalNotification，但即使用户没有在后台点击通知，我也需要这样做。

有任何方法可以做到这一点，例如：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{

} 
```

它在这里可以正常工作，但前提是用户单击通知，或者应用程序当前正在运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:03:27.067

如果应用程序没有运行，直到用户没有启动您的应用程序，您就无法处理远程通知。您应该处理服务器端的业务逻辑。跟踪通知的发送时间，并在超出时间范围后触发适当的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T21:52:16.480

您需要在项目设置的“功能”部分中打开“后台获取”，并在文件中使用`application:didReceiveRemoteNotification:fetchCompletionHandler`委托方法。`ApplicationDelegate`这样您就可以在后台处理远程通知。发送推送时不要忘记在`aps`字典中设置 content-available 标志。

# java - 使用 CSSDK 捕获生成的输出文件路径和名称

> ID：15903804
> 
> 赞同：0
> 
> 时间：2013-04-09T13:52:13.937
> 
> 标签：java, xslt, xslt-1.0, xalan, teamsite

我们正在转换为使用 XSLT 编译器生成页面。我有一个 Xalan Java 扩展来利用 CSSDK 并捕获我们存储在扩展属性中的一些元数据以输出到页面。将 EA 渲染到输出文件没有问题。

问题是我不知道如何动态捕获输出文件的文件路径和名称。

所以就像 POC 一样，我将 CSVPath 硬编码到我的 Java 扩展中的输出文件中。这是一个代码示例：

```
CSSimpleFile sourceFile = (CSSimpleFile)client.getFile(new CSVPath("/some-path-to-the-output.jsp")); 
```

有人可以在 CSSDK 中指出我可以捕获输出文件的位置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:36:59.127

我找到了答案。

首先，获取或创建您的`CSClient`. 您可以使用 cssdk/samples 中提供的示例。我调整了一个，以便`CSClient`在方法中捕获`getClientForCurrentUser()`。注意 SOAP 与 Java 连接。在开发中，我使用的是 SOAP 连接，而对于`make_toolkit`构建，我们需要 Java 连接。

检查以下代码段。请求`CSClient`被捕获在静态变量`client`中。

`CSSimpleFile sourceFile = (CSSimpleFile)client.getFile(new CSVPath(XSLTExtensionContext.getContext().getOutputDirectory().toString() + "/" + XSLTExtensionContext.getContext().getOutputFileName()));`

# android - 为什么 alignParentRight 不起作用？

> ID：15903805
> 
> 赞同：0
> 
> 时间：2013-04-09T13:52:14.503
> 
> 标签：android, android-layout, layout, textview, android-relativelayout

我是 android 开发的菜鸟，我在构建布局时遇到问题。我有一个包含文本视图的相对布局和一个包含两个复选框的线性布局。我希望 textView 出现在左侧，而线性布局出现在与边缘齐平的线性布局的右侧。目前，textview 和 linearlayout 出现在彼此的顶部。任何帮助是极大的赞赏。

```
<RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingLeft="5dp"
                android:text="Rotated Shelf:           " 
                android:layout_gravity="center_vertical"/>

            <LinearLayout
                android:id="@+id/rotated"
                android:layout_width="match_parent"
                android:layout_height="32dp"                   
                android:layout_alignParentRight="true">                  

                <CheckBox
                    android:id="@+id/rotatedshelfYES"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Yes"
                    android:layout_toLeftOf="@+id/rotatedshelfNO"
                     />

                <CheckBox
                    android:id="@+id/rotatedshelfNO"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:paddingRight="75dp"
                    android:text="No"
                    android:layout_alignParentRight="true" />
            </LinearLayout>
        </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:57:38.197

像这样尝试你的`textview`写入`linear-layout`并设置`android:layout_weight=""` 它工作得很好

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <LinearLayout
        android:id="@+id/rotated"
        android:layout_width="match_parent"
        android:layout_height="32dp"
        android:layout_alignParentRight="true" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_weight=".5"
            android:paddingLeft="5dp"
            android:text="Rotated Shelf:           " />

        <CheckBox
            android:id="@+id/rotatedshelfYES"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight=".25"
            android:text="Yes" />

        <CheckBox
            android:id="@+id/rotatedshelfNO"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight=".25"
            android:text="No" />
    </LinearLayout>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:58:47.683

在`LinearLayout`添加`android:layout_toRightOf="@+id/textView2"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:00:06.940

如果您想将 TextView 的右边缘与 LinearLayout 的左边缘（即 TextView 到 LinearLayout 的左侧）对齐，您应该使用

```
android:layout_toLeftOf="@+id/rotated" 
```

在您的 TextView 属性中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:15:37.297

Use you have to set android:layout_width in linear layout equal to wrap_content not match_parent since match_parent is used when we want to equal the width/height as the parent of the widget/container and wrap_content as name suggest requires space only to write the caption of view/container, no extra space required.

# html - XSL 和 JSP 显示一个 HTML。& 的问题

> ID：15903814
> 
> 赞同：0
> 
> 时间：2013-04-09T13:52:43.627
> 
> 标签：html, jsp, xslt, escaping

我正在使用 XSL 将 JSP 转换为 HTML。在转换时，我正在链接一个 CSS。当请求在**输入 type="text"**或**textarea**中显示字符 & 时，如下所示，浏览器显示一个空白页面。

我怎么能在网页上显示那个字符？

url 在 web.xml 中定义。

**我的 JSP**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<%@ page contentType="text/html; charset=ISO-8859-1"%>
<%@ page language="java" pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/xml" prefix="x"%>

<c:import var="xslt" url="${initParam.URL_XSLT}" charEncoding="ISO-8859-1"/>
<x:transform xslt="${xslt}">

<MyTag>
    <content>
        <div class="">
            <input type="text" name="aName" value="${requestScope.myString}"/>
            <textarea name="aComment">${requestScope.myString2}</textarea>
        </div>
    </content>
</MyTag> 
```

**我的 XSL**

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" omit-xml-declaration="yes" encoding="ISO-8859-1" indent="yes" />
<xsl:template match="/">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="es" lang="es">
    <head>
       <link type="text/css" rel="stylesheet" href="http://general.css"/>
    ...
    </head>
    <xsl:element name="body">
         ...
         <xsl:copy-of select="MyTag/content/div"></xsl:copy-of>
         ...
    </xsl:element>
</html> 
```

我试着改变

```
<xsl:copy-of-select> 
```

经过

```
<xsl:for-each select="//MyTag/content/*">
    <xsl:calltemplatename="node"/>
</xsl:for-each>

...

    <xsl:template name="node">
        <xsl:variable name="name" select="name()"/>
        <xsl:element name="{$name}">
            <xsl:copy-of select="@*" />
            <xsl:if test="child::*">
                <xsl:for-each select="current()/*">
                    <xsl:call-template name="node"/>
        </xsl:for-each>
            </xsl:if>
            <!-- first attempt -->
        <xsl:value-of select="translate(text(),'&','&amp;')" />
            <!-- second attempt -->
            <xsl:value-of select="concat('&lt;![CDATA[', text(),']]&gt;')" />
    </xsl:element>
    </xsl:template> 
```

为了解决这个问题，我不能修改 JSP。只是可以修改XSL。

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:59:30.613

`xsl:value-of`具有`disable-output-escaping`禁用放大器编码的属性。

```
<xsl:value-of select="..." disable-output-escaping="yes" /> 
```

# php - 如何用 JavaScript 填充 IMG src？

> ID：15903815
> 
> 赞同：1
> 
> 时间：2013-04-09T13:52:44.570
> 
> 标签：php, javascript, html, css

我有这个功能`PHP`，它来自我正在工作的一个项目：

```
 foreach ($reports["included_reports"] as $index => $report_name ) {
    if (! in_array( $report_name, $reports["excluded_reports"])) {
      $optional_reports .= 
      "<div class=\"large-12 columns\">
         <div class=\"panel\">
           <a href=\"./graph_all_periods.php?$graph_args&amp;g=". $report_name ."&amp;height=???&amp;width=???\">
             <img BORDER=0 style=\"padding:2px;\" $additional_cluster_img_html_args title=\"$cluster_url\" SRC=\"./graph.php?$graph_args&amp;g=". $report_name ."&amp;height=???&amp;width=???\" >
           </a>
         </div>
       </div>";
   }
 } 
```

我想调整图像的大小以填充我的 div，但我不能使用`width:100%`，因为我必须通知`width`和`height`PHP。但是 PHP 是先执行的，我也不知道用户监视器的分辨率。在谷歌搜索我发现[我只能通过 JavaScipt 知道用户显示器的分辨率](https://stackoverflow.com/questions/4180134/how-to-get-users-screen-resolution-with-php)。所以我想知道是否有可能做一些我可以知道用户监控并通知我`width`和标签中的`heigh`参数的事情。`img`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:25:26.187

确保图像始终填充 div 以将其设置为背景图像并使用 CSS background-size 拉伸它的最佳方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:16:35.273

在您的 js 中，对于用户监视器尝试`window.screen.width`和`window.screen.height`. 对于图像尺寸，您可以在 css 中使用 100%，然后使用 js 以 px 和`img.clientWidth`.

# jsf - 带有 p:poll/push 的通知系统

> ID：15903816
> 
> 赞同：12
> 
> 时间：2013-04-09T13:52:47.190
> 
> 标签：jsf, jsf-2, primefaces

我尝试为具有`p:poll`视图层的基本社交网络和一个简单的`NotificationService`类实现基本通知系统，该类从 DB 获取新通知并刷新`NotificationBean`每个用户的视图范围内的通知列表。流程类似这样：

```
-Poll calls NotificationBean.getNewNotifications for example every 15 sec.
--getNewNotifications calls NotificationService and DAO methods
---notificationList of user is refreshed
----DataTable on view layer shows new notifications 
```

但关注的`p:poll`是它的性能，因为它会在每个间隔到期时发送一个查询。

PrimeFaces 有基于 Atmosphere 框架的[PrimePush](http://www.primefaces.org/showcase/push/index.jsf)，它打开 web-sockets，似乎更适合创建通知系统。

但我不知道应该使用哪些组件以及它们的哪些属性。它具有具有属性的`p:socket`组件。`channel`我应该使用用户名作为`channel`值吗？下面的代码来自 PrimeFaces 展示并总结了最后几句话：

```
<p:socket onMessage="handleMessage" channel="/notifications" /> 
```

据我从[这个展示示例](http://www.primefaces.org/showcase/push/facesmessage.jsf;jsessionid=9n9hhm0k1nb11ls01of3lla91)中了解到，这是一个`p:socket`监听`notifications`频道。推送代码片段是：

```
PushContext pushContext = PushContextFactory.getDefault().getPushContext();       
pushContext.push("/notifications", new FacesMessage(summary, detail)); 
```

但这会通知所有用户页面，我需要一个通知特定用户的推送器。假设有 2 个用户并假设 User1 将 User2 添加为朋友。一定有的。像那样：

```
pushContext.push("User2/notifications", new FacesMessage("friendship request", "from User1")); 
```

但我不确定这是否是这种功能需求的正确用法。考虑到应用程序的可扩展性，每个进程打开如此多的通道可能会产生昂贵的成本。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T08:20:44.430

PrimeFaces push 支持一个或多个通道进行推送。能够出于特定原因创建私人频道；例如，在您的情况下，每个用户都可以创建多个频道。为此，我使用了唯一 ID。

基本上，我已经实现了一个托管 bean，它是应用程序范围的，它处理应该考虑的用户通道匹配。您可以通过不同的方式对其进行维护。

```
@ManagedBean
@ApplicationScoped
public class ChannelsBean {

    Map<String, String> channels = new HashMap<String, String>();

    public void addChannel(String user, String channel) {
        channels.put(user, channel);
    }

    public String getChannel(String user) {
        return channels.get(user);
    }

} 
```

然后将这个 bean 注入到发送通知的支持 bean 中。

```
@ManagedBean
@SessionScoped
public class GrowlBean {

    private String channel;

    @ManagedProperty(value = "#{channelsBean}")
    private ChannelsBean channels;

    private String sendMessageUser;

    private String user;

    @PostConstruct
    public void doPostConstruction() {
        channel = "/" + UUID.randomUUID().toString();
        channels.addChannel(user, channel);
    }

    public void send() {
        PushContext pushContext = PushContextFactory.getDefault().getPushContext();

        pushContext.push(channels.getChannel(sendMessageUser), new FacesMessage("Hi ", user));
    }

    //Getter Setters
} 
```

您应该将通道值赋予 p:socket。这是页面的启动示例；

```
<p:growl widgetVar="growl" showDetail="true" />  

<h:form>  
    <p:panel header="Growl">  
        <h:panelGrid columns="2">  
            <p:outputLabel for="user" value="User: " />   
            <p:inputText id="user" value="#{growlBean.sendMessageUser}" required="true" />  

        </h:panelGrid>  

        <p:commandButton value="Send" actionListener="#{growlBean.send}" />  
    </p:panel>  
</h:form>  

<p:socket onMessage="handleMessage" channel="#{growlBean.channel}" />  

<script type="text/javascript">  
function handleMessage(facesmessage) {  
    facesmessage.severity = 'info';  

    growl.show([facesmessage]);  
}  
</script> 
```

对于可伸缩性问题，您应该维护活动或非活动通道。您可以删除不在会话中或一段时间不活动的那个。当 bean 正在销毁时，使用 @PreDestroy 注释删除通道。在我的解决方案中，一个用户会话有一个通道。

My suggestion is; do not use usernames explicitly on the pages. It is not good for security reasons.

# c - 如何使用 C 设置 unix 命令，尤其是使用“system()”？

> ID：15903817
> 
> 赞同：0
> 
> 时间：2013-04-09T13:52:50.710
> 
> 标签：c, unix, system

我刚刚开始使用C。

我想做的是从 C 发出 Unix 命令，尤其是使用`system()`. 但是如果我有这样的代码，它只能访问同一目录中的文件。

```
system("./Test"); 
```

但我想在任何目录中使用该代码。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:54:19.767

```
system("/any/other/folder/Test"); 
```

通过调用命令`system`就像通过命令行界面调用命令所以即使你的命令的路径是`../../any/other/folder/Test`，你调用它

```
system("../../any/other/folder/Test"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:55:09.540

只需将绝对路径作为参数传递

```
system("/your/folder/Test"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:06:19.190

`system()`将其字符串参数转发到本机命令行处理程序 - 例如`/bin/sh`在 Unix 或`cmd.exe`Windows 上。您可以使用任何人愿意采取的任何命令或路径。当然，这样的代码是不可移植的。

# highcharts - 防止列高图的 xAxis 在隐藏其他系列之一时采用负标签（在 legendItemClick 事件上）

> ID：15903822
> 
> 赞同：1
> 
> 时间：2013-04-09T13:53:03.140
> 
> 标签：highcharts

使用图例隐藏两个系列，然后单击其中一个系列显示从“-1”开始的 xAxis，理想情况下它应该只显示不为空的类别。

使用 'ignoreHiddenSeries: false' 解决了目的，但再次使用图例隐藏两个系列，然后启用其他系列往往会与两个系列重叠。尽管在窗口调整大小事件中，系列会正确对齐。

```
 chart: {
            type: 'column'
           // ignoreHiddenSeries: false
        }, 
```

参考示例：http: [//jsfiddle.net/t88rc/](http://jsfiddle.net/t88rc/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:52:06.723

您可以简单地为 xAxis 设置`min:0`，请参阅：http: [//jsfiddle.net/t88rc/2/](http://jsfiddle.net/t88rc/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:43:06.633

分组柱形图在每个系列具有相同数量的数据点时效果最佳。我为此找到的最佳解决方案是用空值填充任何缺失的数据点：

[http://jsfiddle.net/jlbriggs/t88rc/1/](http://jsfiddle.net/jlbriggs/t88rc/1/)

```
 data: [49.9, 71.5,null,null,null,null,null,null] 
```

# mysql - MySQL 编号排序

> ID：15903825
> 
> 赞同：3
> 
> 时间：2013-04-09T13:53:07.097
> 
> 标签：mysql, sql, sorting, numbers

假设我有`numbers`带有字段`num`INT的表

参赛作品：

```
364
0
123
0
321
4215
12138 
```

我想对它们进行 ASC 排序。问题是我希望将零留在底部。

我想要的差不多

```
SELECT num FROM number WHERE num != 0 ORDER BY num ASC
SELECT num FROM number WHERE num = 0 
```

这有可能以某种方式在 1 个单一查询中完成吗？

我想要实现的是：

```
123
321
364
4215
12138
0
0 
```

我不知道这是否可能这就是问的原因。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T13:54:32.350

在 order by 子句中添加此条件，

```
ORDER BY (num = 0) ASC, num ASC 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/0c523/2)

或者您可以默认省略`ASC`，

```
ORDER BY (num = 0), num 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/0c523/3)

输出

```
╔═══════╗
║  NUM  ║
╠═══════╣
║   123 ║
║   321 ║
║   364 ║
║  4215 ║
║ 12138 ║
║     0 ║
║     0 ║
╚═══════╝ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T13:54:27.363

```
SELECT num FROM number ORDER BY IF(num=0,1,0),num; 
```

# database - 将逗号分隔的句子重新排序为新段落

> ID：15903828
> 
> 赞同：0
> 
> 时间：2013-04-09T13:53:13.930
> 
> 标签：database, asp-classic

[![数据库截图](https://i.stack.imgur.com/BNymL.png)](https://i.stack.imgur.com/BNymL.png)

以上是我上传到托管服务器的数据库，以使用 HTML 文件中的 .asp 代码将数据从中提取到网站。传感器字段使用从另一个表中查找来获取数据，并且可以包含多个值，但这些值使用逗号“，”分隔。我想知道在数据库中或.asp 页面上是否有办法摆脱逗号并将它们排序到新段落中，或者在每个句子之间用“<br/>”替换“，”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:26:06.913

**注意更改原始问题**

最初的问题是参考 ASP.NET。在提供了彻底的答案后，发现作者实际上是在使用 VBScript 和 Classic ASP。此答案的最终更新反映了他的变化。

我留下了我原来的答案，以防万一它可以帮助其他人解决与最初提出的问题相同的问题。

====================================

`Replace`如果您想更改任何订单，这还不够；IE 按字母顺序。

一种方法是将数据库字符串放入 a`list`中，以逗号分隔。然后，您可以按您想要的任何顺序输出此列表。

例如。

拆分成一个列表

```
List<string> myList = yourSensorsString.Split(new[] { "," }, StringSplitOptions.RemoveEmptyEntries).ToList(); 
```

然后，您可以按您认为合适的方式订购。就像是：

```
myList.Sort(); 
```

然后简单地浏览每个项目，例如 - myLbl 可能是`label`您页面上的一个控件

```
foreach ( str in myList) {
    myLbl.Text += str + "<br />";
} 
```

或者作为单独的段落，也许成一个`Literal`

```
 foreach ( str in myList) {
        myLit.Text += "<p>" + str + "</p>";
    } 
```

**更新**

上面的代码示例将放置在您的代码隐藏中。您将从`sensors`数据库中获取字符串，然后将其拆分为`list`，然后输出到 HTML。无需让您的数据库执行此类逻辑。我还假设 C#，因为您从未提及您使用的 .net 是什么风格。

**更新 2**

在看了你的小提琴之后，我稍微编辑了一下，以显示你可以在哪里使用这种代码。还将我的代码转换为VB。希望这可以帮助。不能再花时间了……[小提琴在这里](http://jsfiddle.net/xR89s/2/)

**更新 3**

最初的问题是针对 ASP.NET - 事实证明，它实际上是 OP 询问的经典 ASP。

所以像这样拆分你的字符串：

```
myList=Split(rsLogbook("FieldName"), ",")
for each str in myList
    document.write(str & "<br />")
next 
```

除此之外，我无能为力 - 很多时间都花在这上面:)

# javascript - 如何在Javascript中将对象作为参数传递

> ID：15903829
> 
> 赞同：1
> 
> 时间：2013-04-09T13:53:13.817
> 
> 标签：javascript, html, extjs4.1

我想在函数中传递对象。这是我的代码

```
var hyperLinkObj = new Object();
hyperLinkObj.path="abc";
hyperLinkObj.text="abctext";

'<li><a href="#" onclick="onItemClick(hyperLinkObj)">'+description+'</a></li>' 
```

在这里我正在创建名为“hyperLinkObj”的对象现在我正在创建“li”标签并将超链接放入 li 现在当我检查时我得到类似

```
'<li><a href="#" onclick="onItemClick([object Object])">'+description+'</a></li>' 
```

那么如何传递 hyperLinkObject ，就像在 onItemClick 中一样，我在这个对象上做了很多事情。

看到其实我想做这样的事情。

1]有一个对象有很多类别所以想循环遍历它。2] 然后在每个类别项目上单击想用 hyperLinkObj 调用 OnItemClcik 3] 然后在 Hyperlink 上单击，想要执行诸如获取 Hyperlink.path 之类的操作并显示面包屑。4]最后我使用的是Extjs所以Ext.Panel.update("Li text");

可能是我没有提到 ExtJs.update.. 它没有按照你的建议工作..

你能解释一下我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:59:27.753

放到`hyperLinkObj`全局范围内，在onclick中引用。

```
hyperLinkObj = new Object();
hyperLinkObj.path="abc";
hyperLinkObj.text="abctext";
Ext.Panel.update('<li><a href="#" onclick=\'onItemClick({path:"'+hyperLinkObj.path+'",text:"'+hyperLinkObj.text+'"})\'>'+description+'</a></li>') 
```

`[object Object]`是 的`toString()`，`Object()`并且不包含任何细节。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T13:58:45.327

为复杂的点击功能使用绑定事件：

```
document.getElementById('anchorID').onclick=function(){/* some code */} 
```

这对你来说会更容易。看看这个小提琴：http: [//jsfiddle.net/anurag/amedr/](http://jsfiddle.net/anurag/amedr/)

# ios - 如果 NSURLCache 满了怎么办？

> ID：15903832
> 
> 赞同：3
> 
> 时间：2013-04-09T13:53:27.533
> 
> 标签：ios, objective-c, nsurlcache

我正在使用默认的 NSURLCache 在我的 iPhone 应用程序中缓存图像。如果缓存已满，我会尝试缓存另一个图像，会发生什么？

它不会缓存图像吗？或者它将被缓存的最旧图像替换？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:31:37.233

初始化 initWithMemoryCapacity:... diskCapacity:... diskPath:..] 会影响最大缓存。新文件将始终被下载。（除非它大于最大内存容量，那么它只会被下载而不保存在缓存中）如果达到最大缓存大小，其他文件将被删除。未指定将删除哪些文件。创建自己的 NSUrlCache 并自己处理并不难。如果您想查看如何执行此操作的示例，请查看[https://github.com/evermeer/EVURLCache](https://github.com/evermeer/EVURLCache)

# windows - 批量合并文件

> ID：15903833
> 
> 赞同：1
> 
> 时间：2013-04-09T13:53:29.290
> 
> 标签：windows, batch-file

我有一长串要合并到几个文件中的文件。

```
part-m-00000 
part-m-00001 
part-m-00002 
part-m-00003
part-m-00004
part-m-00005
part-m-00006
part-m-00007
part-m-00008
part-m-00009
part-m-00010
part-m-00011
part-m-00012
...
part-m-01267 
```

（注意文件名末尾的数字填充）

我想将每 100 个文件合并为 10 个单独的文件，最后剩下的 67 个文件合并到第 11 个。我无法填充这些数字以合并文件。

这就是我能够得到的 -

```
@echo off
if exist merge.txt del merge.txt

echo. >merge.txt
for /l %%a in (0,1,3) do (
Set Number=00000%%a
Set Number=%Number:~-5%
copy/b merge.txt+"part-m-%number%.txt" merge.txt
) 
```

我不认为数字的填充按预期工作。`for`它只是在循环中对我不起作用。如果我一般做这样的事情 -

```
Set Number=768
Set Number=00000%Number%
Set Number=%Number:~-5%
echo %Number% 
```

它正确地填充了数字。

我无法弄清楚我做错了什么。感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:03:26.373

The variables with the `%XXX%` are expanded only once for the `for` loop, not in every iteration.

You need to use delayed expansion with the `!XXX!` syntax like this:

```
setlocal enableextensions enabledelayedexpansion

for /l %%a in (0,1,3) do (
Set Number=00000%%a
Set Number=!Number:~-5!
echo !Number!
) 
```

For more details refer to question [Batch file variables initialized in a for loop](https://stackoverflow.com/q/691047/850848).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:02:56.730

试试这个：

```
@echo off

setlocal enabledelayedexpansion

if exist merge.txt del merge.txt

echo. >merge.txt
for /l %%a in (0,1,3) do (
Set Number=00000%%a
Set Number=!Number:~-5!
copy /b merge.txt+"part-m-%number%.txt" merge.txt
) 
```

If you do not use delayed expansion, the variable `%Number:~-5%` will be expanded only once - before the whole `for` command is processed. With delayed expansion used, the variable `!Number:~-5!` will be expanded each time it is run, so the number will be different each time.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:03:06.370

Another (perhaps simpler and faster) approach is this:

```
@echo off

setlocal enabledelayedexpansion

if exist merge.txt del merge.txt

echo. >merge.txt
set Number=99999
for /l %%a in (0,1,3) do (
Set /A Number+=1
copy /b merge.txt+"part-m-!Number:~-5!.txt" merge.txt
) 
```

# ruby-on-rails - Ruby/Rails 中的类方法与常量

> ID：15903835
> 
> 赞同：37
> 
> 时间：2013-04-09T13:53:30.190
> 
> 标签：ruby-on-rails, ruby

我正在实现一个包含集合的硬编码下拉列表的表单，我想知道最好的解决方案是什么，我知道下面公开的两种方式，但我仍然执行以下操作：

```
class Example

  # Options for Example.
  self.options
    [ 'Yes', 'No', 'Not sure' ]
  end
end 
```

由 调用`Example.options`，但我知道也可以执行以下操作：

```
class Example

  # Options for Example.
  OPTIONS = [ 'Yes', 'No', 'Not sure' ]
end 
```

这将被调用`Example::OPTIONS`。

问题是，这些都是好方法还是根本不重要？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-09T13:59:35.010

后者更好。如果是方法，每次调用都会创建一个新的数组和新的字符串，很浪费资源。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-04-09T16:48:59.787

TL; DR：这取决于。这些值是要在课堂外使用的吗？他们能变得有活力吗？他们可以更改子类吗？

正如@sawa 所写，该方法（以这种方式编写）的缺点是每次都会创建一个新数组和字符串。

更好的写法是：

```
class Example
  def self.options
    @options ||= ['Yes', 'No', 'Not sure']
  end
end 
```

该数组存储在实例变量`@options`中，以避免每次都创建一个新数组。

这样写，方法和常量很相似。

一个关键的区别是，如果是子类，则细化方法会比常量`Example`更自然：`options``OPTIONS`

```
class Parent < Example
  def self.options
    @options ||= [*super, 'Extra']
  end
end 
```

用常量做类似的事情是困难的。想象一下，您的选项列表用于类方法中，如下所示：

```
class Example
  OPTIONS = ['Yes', 'No', 'Not sure']

  def self.foo(arg)
     puts "Available options:",
          self::OPTIONS  # The self:: is needed here
     # ...
  end
end

class Parent < Example
  OPTIONS = [*superclass::OPTIONS, 'Extra']
end 
```

常量的棘手之处在于`self::OPTIONS`and`OPTIONS`并不总是相同的，而`self.options`and`options`是相同的。通常在不指定范围的情况下使用常量（例如`OPTIONS`，而不是`self::OPTIONS`），并且在这种情况下继承将根本不起作用。

请注意，该方法使您有机会在不更改 API 的情况下使结果动态化（即根据其他情况返回不同的结果）。

最后说明：我建议您调用`freeze`您的阵列，以避免任何人修改它。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-10-01T08:33:42.687

我通常做的是混合使用上述技术：

```
class Player
  JURISDICTIONS = %i(de uk ru)

  def self.jurisdictions
    JURISDICTIONS
  end
end 
```

它有几个优点：

*   它提供了一个干净的接口，封装了一个常量（你调用`Player.jurisdictions`而不是`Player::JURISDICTIONS`）。
*   稍后只需更改方法即可添加其他逻辑。
*   The method can be stubbed in tests.

IMHO, performance does not matter here.

**Update**: Constant can bee hidden using `private_constant` method ([http://ruby-doc.org/core-2.3.0/Module.html#method-i-private_constant](http://ruby-doc.org/core-2.3.0/Module.html#method-i-private_constant))

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-16T19:18:28.947

To further refine Artur's suggestion I would go with a class variable in order to hide visibility of the constant.

```
class Player
  @@jurisdictions = %i(de uk ru)

  def self.jurisdictions
    @@jurisdictions
  end
end 
```

# arrays - 选择特定数组并在 MatLab 中创建并绘制一个新数组

> ID：15903839
> 
> 赞同：0
> 
> 时间：2013-04-09T13:53:35.360
> 
> 标签：arrays, matlab, plot

我创建了随机线，我想选择其中一些以将它们绘制为红色，而其余的将绘制为蓝色。

到目前为止我的代码是

```
%Initial line values

tracks=input('Give me the number of muon tracks: ');
width=20;
height=5;

Ystart=15.*ones(tracks,1);
Xstart=-80+160.*rand(tracks,1);
Xend=-80+160.*rand(tracks,1);
X=[Xstart';Xend'];
Y=[Ystart';zeros(1,tracks)];
b=(Ystart.*Xend)./(Xend-Xstart);

for i=1:tracks
    if ((Xend(i,1)<width/2 && Xend(i,1)>-width/2)||(b(i,1)<height && b(i,1)>0))
        plot(X(:, i),Y(:, i),'r');%the chosen ones!
        hold all
    else
        plot(X(i),Y(i),'b');%the rest of them
        hold all
    end
end 
```

输出是

![](https://i.imgur.com/MTBycPz.jpg)

一个想法是创建新的向量并尝试绘制它们。我的尝试如下

```
%Initial line values

tracks=input('Give me the number of muon tracks: ');
width=20;
height=5;

Ystart=15.*ones(tracks,1);
Xstart=-80+160.*rand(tracks,1);
Xend=-80+160.*rand(tracks,1);
X=[Xstart';Xend'];
Y=[Ystart';zeros(1,tracks)];
b=(Ystart.*Xend)./(Xend-Xstart);

countHot=0;
countCold=0;

for i=1:tracks
    if ((Xend(i,1)<width/2 && Xend(i,1)>-width/2)||(b(i,1)<height && b(i,1)>0))
        countHot=countHot+1;
   else
        countCold=countCold+1;
   end
end

Xhot=zeros(countHot,1);
Yhot=zeros(countHot,1);
Xcold=zeros(countCold,1);
Ycold=zeros(countCold,1);

for i=1:tracks
    if ((Xend(i,1)<width/2 && Xend(i,1)>-width/2)||(b(i,1)<height && b(i,1)>0))
        Xhotend(i)=Xend(i);
        Xhotstart(i)=Xstart(i);
        Yhotend(i)=Yend(i);
        Yhotstart(i)=Ystart(i);
     else
        Xcoldend (i)=Xend(i);
        Xcoldstart(i)=Xstart(i);
     end
end 
```

问题是它似乎不起作用。任何想法或建议都将受到欢迎！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:23:12.867

您的第一个代码几乎是正确的，您只需要从而不是简单的单点绘制`X`列`Y`：

```
%Initial line values

tracks=input('Give me the number of muon tracks: ');
width=20;
height=5;

Ystart=15.*ones(tracks,1);
Xstart=-80+160.*rand(tracks,1);
Xend=-80+160.*rand(tracks,1);
X=[Xstart';Xend'];
Y=[Ystart';zeros(1,tracks)];
b=(Ystart.*Xend)./(Xend-Xstart);

for i=1:tracks
    if ((Xend(i,1)<width/2 && Xend(i,1)>-width/2)||(b(i,1)<height && b(i,1)>0))
        plot(X(:, i),Y(:, i),'r');%the chosen ones!
        hold all
    else
        plot(X(:,i),Y(:,i),'b');%the rest of them
        hold all
    end
end 
```

`X(i)` will plot a single element from `X`, see [Matlab's linear indexing](http://www.mathworks.com/help/matlab/math/matrix-indexing.html#f1-85511) to understand why. `X(:, i)` uses [subscript indexing](http://www.mathworks.com/help/matlab/math/matrix-indexing.html#f1-85544) with the colon operator `:` meaning all the rows in this case.

# c - 比较两个匹配字符串算法 - 实用方法

> ID：15903841
> 
> 赞同：1
> 
> 时间：2013-04-09T13:53:38.373
> 
> 标签：c, algorithm, string-matching

我编写了两种不同的算法来解决字符串匹配的一些特殊情况（在 C 中实现）。我知道这个算法的理论 O 是相等的，但我认为在实践中，一个比 oder 更好。我的问题是，有人可以向我推荐一些论文或一些阅读材料，其中展示了如何将算法与实用方法进行比较？我有几个测试集，我对测量执行时间和内存大小感兴趣。我需要尽可能独立于操作系统和其他可能同时运行的程序来获取这些值。

谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:57:03.013

您可以通过生成汇编代码来比较您的算法并进行比较。

`gcc -S mycode.c`您可以使用命令生成汇编代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:23:47.723

我发现“查看代码”是一个好的开始。如果一个使用更多变量并且比另一个更复杂，它可能会更慢。

但是，当然有一些巧妙的技巧可以使更复杂的函数实际上运行得更快（例如，一次读取 8 个字节的代码 - 但当然，一旦你发现不同之处，代码就会更复杂 - 对于长字符串大体相似，有很大的胜利'）。

因此，最后，没有什么可以替代实际运行代码、使用时钟周期计时（例如 x86 处理器上的 RDTSC 指令）或运行一个大循环来多次执行代码以提供合理长度的运行时间。

如果您的代码不应该在单个嵌入式目标上运行，您可能希望在一组不同的硬件上运行代码，以确定在处理器 A 上更快的代码在 B、C 和 D 类型处理器上是否也更快. 通常这确实有效，但有时您会发现特定处理器型号对于某些操作更快，而另一种处理器型号对于另一种操作更快（例如基于缓存大小等）。

在字符串操作的情况下，尝试使用不同大小的输入、不同的差异点（例如，长字符串，但“早”不同，与“晚”不同的长字符串）也是非常重要的。有时，不同的方法会对短/长字符串或早/晚差异点（当然还有长或短的“相等”字符串）显示不同的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T04:21:25.417

In order to complete all comments, I found a book called "A guide to experimental algorithmics" by Catherine C. Mcgeoch [Amazon](https://rads.stackoverflow.com/amzn/click/com/0521173019) and a profesor recommend me a practical paper [pdf](http://www2.research.att.com/~dsj/papers/experguide.pdf).

# c++ - C++：MacOS Mountain Lion 上架构 x86_64 的未定义符号

> ID：15903854
> 
> 赞同：1
> 
> 时间：2013-04-09T13:54:23.880
> 
> 标签：c++, compiler-construction, compiler-errors

好的，我在 Windows/Linux 共存一段时间后才切换到 MacOS。我打开一个简单的文本编辑器，编写一个简单的程序来检查一切是否正常。我知道还有其他关于此错误的线索，但似乎在所有其他情况下，问题都出在他们程序的特定部分，而这又比这复杂得多。我只是想理解为什么编译器会说出它所说的话，即使是这样一个简单的事情。

```
#include <iostream>
#include "numeri.h"
int main(void)

{

  std::cout << numeri() << std::endl;

  return 0;
} 
```

和

```
//numeri.h

int numeri(void); 
```

和

```
//numeri.cpp
#include "numeri.h"
int numeri(void)
{
  return (3);
} 
```

我从 gcc helloworld.cpp -Wall 得到的是

```
Undefined symbols for architecture x86_64:
  "numeri()", referenced from:
      _main in cc6WY2MJ.o
  "std::basic_ostream<char, std::char_traits<char> >::operator<<(std::basic_ostream<char, std::char_traits<char> >& (*)(std::basic_ostream<char, std::char_traits<char> >&))", referenced from:
      _main in cc6WY2MJ.o
  "std::basic_ostream<char, std::char_traits<char> >::operator<<(int)", referenced from:
      _main in cc6WY2MJ.o
  "std::ios_base::Init::Init()", referenced from:
      __static_initialization_and_destruction_0(int, int)in cc6WY2MJ.o
  "std::ios_base::Init::~Init()", referenced from:
      ___tcf_0 in cc6WY2MJ.o
  "std::cout", referenced from:
      _main in cc6WY2MJ.o
  "std::basic_ostream<char, std::char_traits<char> >& std::endl<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&)", referenced from:
      _main in cc6WY2MJ.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

2个案例：

1 - 我忘记了如何使用简单的标题（我作为前缀，我是一名物理专业的学生，​​我可以针对物理和数值模拟进行编程[或者至少，我可以]，但我只是不太了解关于链接器编译器架构和这类东西）

2 - 出了点问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:55:57.783

C++ 编译器是 g++, . 您还需要将 numeri.cpp 添加到命令行。

`g++ helloworld.cpp numeri.cpp -Wall`

# codeigniter - Active Record插入查询以将图像保存在mysql数据库中

> ID：15903864
> 
> 赞同：0
> 
> 时间：2013-04-09T13:54:50.847
> 
> 标签：codeigniter

您好，我想将图像保存到数据库中。我编写了一些代码，但无法正常工作。我的控制器代码是

```
function UploadImageView()
    {
        $config['upload_path'] = './uploads/';
        $config['allowed_types'] = 'gif|jpg|png';
        $config['max_size'] = '2048';
        $config['max_width']  = '1024';
        $config['max_height']  = '768';
        $this->load->library('upload', $config);

        $imgdata['file']=$_FILES;
        $this->load->model('Users');
        /*$response=$this->Users->Image_upload();
        header('Content-type: application/json');
        echo json_encode($response);
   */

        foreach($_FILES as $key => $value)
        {

            $this->upload->initialize($config);

            if ( !$this->upload->do_upload($key))
            {
                //PARSE ERRORS
                $error = array('error' => $this->upload->display_errors());

                        //var_dump($error);
                        $msg = $this->upload->display_errors('<p>', '</p>');
                        echo 'errore: '.$msg;

            }
            else
            {
               $this->load->model('Users');
               $this->Users->Image_upload($key);
            }
        }
    } 
```

我的模型代码如下。

```
function Image_upload($value)
{
    $this->filedata=$value;
    $handle = fopen($this->filedata,"rb");
    $img =fread($handle, filesize('$filedata'));
    fclose($handle);
    $img = base64_encode($img);
    $data=array(
        'image'=>$img
    );
    $flag=$this->db->insert('testimage',$data);

    if($flag)
            {
                $this->db->where('image', $this->filedata);
                $query = $this->db->get('testimage');

                if ($query->num_rows() == 0)
                {
                    $response['status'] = false;
                    $response['userId'] = -1;           
                    $response['message'] = "Upload Failed!";
                }
                else
                {
                    $result = $query->result();
                    $response['status'] = true;
                    $response['file'] = $this->filedata;
                    $response['message'] = "Success!";      
                }   
            }
return $response;           
} 
```

它返回错误“fopen（Imgupload）：无法打开流：没有这样的文件或目录”

和消息：filesize(): stat failed for $filedata 和 fread() 期望参数 1 是资源、给定的布尔值等等等，所以任何人都可以帮助我将图像保存在我的数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:25:20.143

```
if ( ! $this->upload->do_upload())
{
    $error = array('error' => $this->upload->display_errors());
    $this->load->view('upload_form', $error);
}
else
{
    $data = array('upload_data' => $this->upload->data());
    $this->load->view('upload_success', $data);
} 
```

直接来自[文档](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)。

如果您注意到，他们正在将上传数据发送到视图。所以将其发送给模型：

```
$this->Users->Image_upload($this->upload->data()); 
```

然后您的数据在数组中可用，如文档中所述：

> $this->上传->数据()
> 
> 这是一个帮助函数，它返回一个数组，其中包含与您上传的文件相关的所有数据。这是数组原型：

```
Array
(
    [file_name]    => mypic.jpg
    [file_type]    => image/jpeg
    [file_path]    => /path/to/your/upload/
    [full_path]    => /path/to/your/upload/jpg.jpg
    [raw_name]     => mypic
    [orig_name]    => mypic.jpg
    [client_name]  => mypic.jpg
    [file_ext]     => .jpg
    [file_size]    => 22.2
    [is_image]     => 1
    [image_width]  => 800
    [image_height] => 600
    [image_type]   => jpeg
    [image_size_str] => width="800" height="200"
) 
```

因此，您可以像这样访问模型中的数据：

```
function Image_upload($data)
{
    $handle = fopen($data['full_path'],'rb');
    ... 
```

# c# - c# linq to xml XElement group by祖先属性以创建带有键的实体集合列表

> ID：15903865
> 
> 赞同：1
> 
> 时间：2013-04-09T13:54:52.483
> 
> 标签：c#, linq, group-by, linq-to-xml, xelement

我有以下xml。

```
<?xml version="1.0" encoding="utf-8" ?>
<MESSAGE ID="PND">
    <STORE ID="6697">
        <HEADER ID ="1" 
                LOADCLOSEDDATETIME="20130312121212" 
                DELIVERYDATE="20130312" 
                TRAILERID="" 
                TRIPROUTEID="" 
                DEPOTCODE=""/>
        <RECORD TPNB="123456666" 
                NOOFCASES="" 
                OUTERCASELENGTH="1" 
                OUTERCASEWIDTH="2" 
                OUTERCASEHEIGHT="3" 
                UNITSPERCASE="" 
                USEBYDATE="20130312121212" 
                MU="">
        </RECORD >
        <RECORD TPNB="123456666" 
                NOOFCASES="" 
                OUTERCASELENGTH ="1" 
                OUTERCASEWIDTH="2" 
                OUTERCASEHEIGHT="3" 
                UNITSPERCASE=""  
                USEBYDATE="20130312121212" 
                MU="">
        </RECORD>
    </STORE>
    <STORE ID="6647">
        <HEADER ID ="1" 
                LOADCLOSEDDATETIME="20130312121212"
                DELIVERYDATE="20130312" 
                TRAILERID="" 
                TRIPROUTEID="" 
                DEPOTCODE=""/>
        <RECORD TPNB="123456666" 
                NOOFCASES="" 
                OUTERCASELENGTH ="1" 
                OUTERCASEWIDTH="2"  
                OUTERCASEHEIGHT="3" 
                UNITSPERCASE="" 
                USEBYDATE="20130312121212" 
                MU="">
        </RECORD>        
    </STORE>
    <TRAILER ID="9" RECORDCOUNT=" 3" />
</MESSAGE> 
```

我想用这个 xml 填充一个实体，我所有属于特定的记录`storeid`都应该组合到一个列表中。

```
var _preNotifiedProduct = 
        from nlist in xDocument.Descendants("RECORD")
        group nlist by nlist.Anestors("STORE").Attributes().First().Value 
        into cust
        select new {key=cust.Key,value = ??}; 
```

这里的键是我的商店 id，值应该是属于该商店 id 的类型 (XElement) RECORD 的列表。如果我分配`value=cust`这将显示记录 xelement 列表中的所有非公共成员元素。

如何将其放入 xelement 列表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:49:00.823

`cust`implements `IEnumerable<XElement>`，所以你可以调用`ToList()`它：

```
var _preNotifiedProduct = 
              from nlist in xDocument.Descendants("RECORD")
              group nlist by nlist.Ancestors("STORE").Attributes().First().Value 
              into cust
              select new
              {
                  key = cust.Key,
                  value = cust.ToList()
              }; 
```

但是，我会将您的查询重写为：

```
var _preNotifiedProduct = from store in xDocument.Root.Elements("STORE")
                          select new
                          {
                              key = (int)store.Attribute("ID"),
                              value = store.Elements("RECORD").ToList()
                          }; 
```

应该返回相同的值，但也应该更具可读性和效率。

# android - 替换 ViewPager 中的 Fragments 位置

> ID：15903866
> 
> 赞同：4
> 
> 时间：2013-04-09T13:54:56.653
> 
> 标签：android, android-viewpager

我有`ViewPager`包含两个 Fragments `[ Fragment 1]` `[Fragment 2]`。现在基于`[Fragment 1]` 新片段中的选择将添加到`ViewPager` ，它看起来像这样

`[Fragment 1]` `[NewAddedFragment]` `[Fragment 2]`

并且还基于第一个片段中的用户选择，我可以删除`NewAddedFragment`from `ViewPager`。然后它看起来像

`[ Fragment 1]` `[Fragment 2]`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T15:10:52.117

查看实现“FragmentPagerAdapter”的“适配器”，并且某些内容将包含一个集合类型字段，例如支持适配器的 ArrayList。

根据 dataStructure 的实现，您可以通过在 fragmentpageradapter 上调用相应的 add、set、insert 方法来更改底层集合。

然后，您在 ViewPager 中获取新页面的下一次调用应该反映对基础集合的更改。如果不是，您可能必须在 FragmentManager 上调用“提交”，但我认为在这种情况下不需要这样做。

公共类 BookPagerAdapter 扩展 FragmentPagerAdapter { private int currentPage = 0; 私有 ArrayList mFragments；

```
public BookPagerAdapter(FragmentManager fm) {
    super(fm);
    mFragments = new ArrayList<Fragment>();
    mFragments.add(new PageFragment(BitmapFactory.decodeResource(getResources(),
               R.drawable.icon_construction32), "TitlePage")); 

    } 
```

更改集合的示例：

```
bpa.mFragments.add(new PageFragment(map)); 
```

# python - 使用 h5py 压缩现有文件

> ID：15903867
> 
> 赞同：7
> 
> 时间：2013-04-09T13:54:57.640
> 
> 标签：python, compression, hdf5, h5py

我目前正在研究一个关于压缩 HDF5 数据集的项目，最近开始使用 h5py。我遵循了基本教程，并且能够在创建文件时打开、创建和压缩文件。但是，在压缩现有文件时我一直没有成功（这是我工作的目标）。

我尝试使用 'r+' 打开文件，然后压缩分块数据集，但文件大小保持不变。

关于使用哪些命令或我以错误的方式处理事情的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-08-20T13:07:45.717

HDF 组提供了一[组工具](https://www.hdfgroup.org/downloads/hdf5/)来转换、显示、分析和编辑和重新打包您的 HDF5 文件。

[您可以使用h5repack](https://support.hdfgroup.org/HDF5/doc/RM/Tools.html)实用程序压缩现有的 hdf5 文件。您还可以使用相同的实用程序更改块大小。

h5repack 可以从命令行使用。

`h5repack file1 file2`//删除文件1占用的空间，保存为file2。

`h5repack -v -l CHUNK=1024 file1 file2`//将1024的分块应用于file1

`h5repack -v -l CHUNK=1024 GZIP=5 file1 file2`//制作 1024 的块并使用 GZIP 5 级压缩对其进行压缩

`h5repack --help`\获取可用的帮助文档

还提供[了详细的文档。](https://support.hdfgroup.org/HDF5/doc/RM/Tools.html#Tools-Repack)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T15:49:57.127

压缩在 h5py 中非常容易使用。查看 Wiki [HowTo](http://code.google.com/p/h5py/wiki/HowTo#Datasets)和[压缩](http://code.google.com/p/h5py/wiki/GuideToCompression)指南。基本上，它会是这样的：

```
ds = myfile.create_dataset('ds', shape, dtype, compression='lzf') 
```

如何选择块大小以优化文件大小/访问也存在一些问题，请参阅我链接到的压缩指南。

我不记得默认情况下启用了哪种压缩（如果有）。

# r - 使用 ggplot 绘制多个正方形

> ID：15903868
> 
> 赞同：12
> 
> 时间：2013-04-09T13:54:58.150
> 
> 标签：r, ggplot2

我正在尝试更改为 ggplot 的“背景”颜色。我想要实现的是下图。我已经用**geom_ribbon**试过了，但我只能定义 ymin 和 ymax。这使我只能创建两个正方形。

到目前为止我使用的代码：

```
df <- data.frame(x = rnorm(10), y = rnorm(10))

ggplot(df) +
 geom_point(aes(x, y)) +
 geom_ribbon(aes(x = x, ymin = min(y), ymax = 0), fill = "red", alpha = .5) +
 geom_ribbon(aes(x = x, ymin = min(0), ymax = max(y)), fill = "blue", alpha = .5) 
```

这是我想要得到的结果：

[![ggplot 示例](https://i.stack.imgur.com/oQ6B7.png)](https://i.stack.imgur.com/oQ6B7.png)

谢谢你的时间。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-09T19:02:34.033

您的答案的一个变体，如果您希望“背景”颜色一直到图表的边缘，而不仅仅是数据的极端：

```
ggplot(df) +
  geom_rect(xmin = -Inf, xmax = 0,   ymin = -Inf, ymax = 0,   fill = "red") +
  geom_rect(xmin = 0,    xmax = Inf, ymin = -Inf, ymax = 0,   fill = "blue") +
  geom_rect(xmin = 0,    xmax = Inf, ymin = 0,    ymax = Inf, fill = "green") +
  geom_rect(xmin = -Inf, xmax = 0,   ymin = 0,    ymax = Inf, fill = "yellow") +
  geom_point(aes(x, y), size = 5) 
```

![在此处输入图像描述](https://i.stack.imgur.com/QUw55.png)

* * *

编辑：透明度

添加`alpha=0.5`是“工作”，除了使用`geom_rect`，即使没有引用原始`df`数据框，也为每行绘制一个矩形`df`（在这种情况下为 10 次）。设置`alpha=0.01`表明存在透明度，但在预期水平的十分之一。该方法应该是用矩形进行注释；annotations 仅绘制 geom 的一个实例，而不是原始数据框的每行一个：

```
ggplot(df) +
  annotate("rect", xmin=-Inf, xmax=0, ymin=-Inf, ymax=0, fill="red", alpha=0.5) +
  annotate("rect", xmin=0, xmax=Inf, ymin=-Inf, ymax=0, fill="blue", alpha=0.5) +
  annotate("rect", xmin=0, xmax=Inf, ymin=0, ymax=Inf, fill="green", alpha=0.5) +
  annotate("rect", xmin=-Inf, xmax=0, ymin=0, ymax=Inf, fill="yellow", alpha=0.5) +
  geom_point(aes(x, y), size=5) 
```

![在此处输入图像描述](https://i.stack.imgur.com/wCyYg.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T14:26:32.510

在joran的评论之后。答案：

```
ggplot(df) +
  geom_rect(aes(xmin = min(x), xmax = 0, ymin = min(y), ymax = 0), fill = "red") +
  geom_rect(aes(xmin = min(0), xmax = max(x), ymin = min(y), ymax = 0), fill = "blue") +
  geom_rect(aes(xmin = min(0), xmax = max(x), ymin = 0, ymax = max(y)), fill = "green") +
  geom_rect(aes(xmin = min(x), xmax = 0, ymin = 0, ymax = max(y)), fill = "yellow") +
  geom_point(aes(x, y), size = 5) 
```

# c# - 无法使用 webclient 和 httpwebrequest C# 在 webdav 服务器上上传所有文件

> ID：15903869
> 
> 赞同：-2
> 
> 时间：2013-04-09T13:55:01.287
> 
> 标签：c#, httpwebrequest, webclient, webdav

```
public int UploadFile(string url, string localFile,out string a_Error)
{
WebClient webClient = new System.Net.WebClient();
webClient.Proxy = null;

webClient.Credentials = new NetworkCredential(Credential.UserName, Credential.Password);
webClient.UploadFile(url, "PUT", localFile);
webClient.Dispose();
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-26T12:55:34.730

尝试使用 HttpWebRequest 类。以下是示例： [第一](https://stackoverflow.com/questions/734404/error-using-httpwebrequest-to-upload-files-with-put) [第二](http://blogs.iis.net/robert_mcmurray/archive/2010/02/09/sending-webdav-requests-in-net.aspx)

# c# - 为 XNA C# 游戏制作带有补丁/更新的单文件可视化安装程序

> ID：15903871
> 
> 赞同：2
> 
> 时间：2013-04-09T13:55:08.803
> 
> 标签：c#, xna, installation, updates

我正在制作一个 XNA 游戏，并认为我会考虑为它制作安装程序以供它完成时使用。如果能够分发包含所有内容的单个文件并将所有内容提取到安装目录中，那就太好了。另外我想选择安装目录和其​​他选项，最好将安装程序的外观设置为我的游戏风格。更新和修补也是我想要设置的。我有一个网站，所以我希望游戏从那里检查更新。

我熟悉 ClickOnce，但我觉得它不适合这种情况，我查看了 Advanced Installer、Inno installer 和 wix。

我很想用 c# winforms 或类似工具制作自己的安装程序，但我是该领域的新手，不知道这是否可行或从哪里开始。我在网上搜寻，但只能找到第三方内容的链接，所以也许我自己的东西是不可能的？我不会为没有开始菜单条目或注册表值或其他任何东西而烦恼，只想在某处提取文件，然后在运行前检查更新。

感谢帮助新手！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:40:51.167

对于您上面列出的所有要求，WiX 是一个不错的选择。

> 能够分发包含所有内容的单个文件并将所有内容提取到安装目录会很棒

标准的 WiX 设置项目可以帮助您完成这项工作。基本安装程序有默认模板

> 另外我想选择安装目录和其​​他选项

默认模板都是可自定义的，因此您可以轻松收集其他数据，您对数据的处理取决于您。

> 最好将安装程序的外观设置为我的游戏风格

WiX 3 及以上版本（我认为）有一个“Bootstrapper”项目类型，它允许您将自己的 UI 放在安装程序的前面，例如 WPF 甚至 XNA 本身（如果您真的想要的话）。如果您使用的是 WPF 前端，您可以指定和捆绑安装程序的要求，例如 .NET 4.0。

> 我很想用 c# winforms 或类似工具制作我自己的安装程序

也是 WiX Bootstrapper 的一个选项。

安装程序比您想象的要复杂得多，此外，对于更新和补丁，保存文件版本的信息以及如何处理它们会很快变得复杂。我的建议是花时间在你的**游戏**上，并利用那些对这些问题进行了长时间和认真思考的[其他人的辛勤工作。](http://robmensching.com/blog/)

# python - 对数据库查询进行分组

> ID：15903873
> 
> 赞同：-5
> 
> 时间：2013-04-09T13:55:11.173
> 
> 标签：python

我正在尝试通过更改从列表中提取值。该列表是来自 oracle 数据库的查询，具有以下值：-

```
22  
22  
22  
22 
22
22
23
23
23
23
22
22
22 
```

您将如何对其进行编码，以便输出例如

```
22
23
22 
```

我试过循环和唯一值，肯定有一个简单的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:56:09.540

使用[`itertools.groupby()`](http://docs.python.org/2/library/itertools.html#itertools.groupby)：

```
from itertools import groupby

for key, group in groupby(inputsequence):
    print key 
```

# c++ - 将多线程类重构为单线程+多线程

> ID：15903875
> 
> 赞同：4
> 
> 时间：2013-04-09T13:55:16.397
> 
> 标签：c++, multithreading, refactoring

我有一个以这种方式实现的多线程 c++ 类：

```
class MyClass{
protected:
  somemutex mutex; 
  void _unsafeMethod(){...};
public:
  void safeMethod{
    locker lock(mutex);
    _unsafeMethod();
  }
} 
```

我对此很满意，但注意到在大多数情况下，多线程支持并不是真正必要的，所以我很想将它分成 2 个类：一个线程安全的，一个不安全的，但性能更好的一个。

问题是，有成千上万行代码使用这个类，所以我需要保持接口相同。当然，类名的定义会有所变化，这取决于它是否需要支持 MT。

我想到了以下内容：

**解决方案 A**

```
class MyClass{
protected:
  void _unsafeMethod(){...};
public:
  virtual void safeMethod{
    _unsafeMethod()
  };
};
class MyThreadSafeClass: public MyClass{
protected:
  somemutex mutex; 
public:
  virtual void safeMethod{
    locker lock(mutex);
    _unsafeMethod();
  };
} 
```

这里的问题是虚函数调用：它是否使执行速度变慢，所以我立即失去了单线程类性能改进的好处？从第一次测试开始，它看起来像

**解决方案 B**

```
class MyClass{
protected:
  somemutex * pmutex;
  void _unsafeMethod(){...};
public:
  MyClass( bool isthreadsafe ){
    if( isthreadsafe )
       pmutex = new somemutex();
    else
       pmutex = NULL;
  };
  void safeMethod{
    if( pmutex )
    {
       locker lock(*pmutex);
       _unsafeMethod();
    }
    else
      _unsafeMethod();
  };
} 
```

第二个解决方案看起来很脏，每次调用中总是有一个“如果”要解决。

您认为哪种解决方案更有效？您是否有更好/更清洁/性能更高的解决方案？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:32:30.377

一个直接的答案是`MyClass`在互斥锁类型上使用模板：

```
template <typename MutexType>
class MyClass{
protected:
  MutextType mutex; 
public:
  void safeMethod{
    locker lock(mutex);
    // stuff
  }
} 
```

然后，您可以使用真正的互斥锁或无操作互斥锁来实例化它，以获得您想要的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T14:06:36.343

您可以使用装饰器模式或包装器。.

**A** ]一个修改过的包装器，这样你就可以摆脱虚函数了：

```
class MyClass{
protected:
  void _unsafeMethod(){};

};

class MyThreadSafeClass{
protected:
  somemutex mutex; 
  MyClass& myclassRef;
public:
    MyThreadSafeClass(MyClass& myclass):myclassRef(myclass){}
  void safeMethod(){
    locker lock(mutex);
    myclassRef._unsafeMethod();
  }
}; 
```

类调用：

```
MyClass myclass;
MyThreadSafeClass mythreadsafeclass(myclass);
mythreadsafeclass.safeMethod(); 
```

**B** ] 具有虚拟接口的装饰器：

```
class MyClassInterface{
public:
  virtual void Method()=0;

};

class MyClass : public MyClassInterface{
protected:
  virtual void Method() override{};

};

class MyThreadSafeClass: public MyClassInterface{
protected:
  somemutex mutex; 
  MyClassInterface& myclassRef;
public:
    MyThreadSafeClass(MyClassInterface& myclass):myclassRef(myclass){}
   virtual void Method() override{
     locker lock(mutex);
     myclassRef.Method();
  }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T14:01:15.400

您可以将互斥锁作为参数传递给构造函数。这将允许您选择锁定机制，而无需修改或复制您希望的每种锁定类型的实现。

```
class Mutex
{
public:
    virtual void Lock() = 0;
};

class MyClass
{
protected:
    Mutex&   mutex;

public:

    MyClass(Mutex& m) : mutex(m) {}

    void Lock()
    {
        mutex.Lock();
    }
}; 
```

# android - Android：定期（每 30 秒）在后台发送位置数据并向服务器请求新数据

> ID：15903877
> 
> 赞同：4
> 
> 时间：2013-04-09T13:55:28.410
> 
> 标签：android, service, background, alarmmanager, locationmanager

设想：

长时间（即 12 小时）每 30 秒发布到服务器以在后台获取任何新数据。位置数据需要与此一起发送。

当前实施；

服务等级；

1.  间隔为 30 秒的位置侦听器，将经度和纬度值设置为两个局部变量
2.  警报管理器每 30 秒向广播接收器触发一次挂起的 Intent。
3.  广播接收器启动一个 IntentService，其中包含附加的位置变量。
4.  IntentService http 发布位置并从服务器请求任何新数据。
5.  IntentService 通过广播接收器将服务器响应发送回主服务类。

    *   服务类 starts_sticky 以确保操作系统重新启动。

我尝试了几种不同的变体；

1.  我尝试使用 Handler 和 runnable 来处理发布到服务器的计时机制，但是，当设备处于睡眠状态时，postDelay 时间从 2 分钟变为 7 分钟。

2.  此外，尝试直接从警报管理器触发 IntentService，但无法使用最新的位置变量更改 PendingIntent 额外内容。

问题;

1.  当前的实施是否可行？

2.  沿着谷歌的 GCM 路线走会更有益吗？

3.  您如何大力测试服务类，尤其是从操作系统杀死它的恢复方面？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:11:14.923

为避免操作系统终止您的服务，您必须通知用户您的服务是一项正在进行的服务，如[http://developer.android.com/guide/components/services.html#Foreground](http://developer.android.com/guide/components/services.html#Foreground)中所述。

我设法让我的服务在后台使用 AlarmManager 和 WakeLock 每 2 分钟运行一次，就像在[这个答案](https://stackoverflow.com/a/6740142/2174489)中描述的那样。即使设备处于睡眠状态，它也会每 2 分钟运行一次。只需将警报设置为重复

```
alarmMgr.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, SystemClock.elapsedRealtime()+5000, 60000 * ALARM_PERIOD_IN_MINUTES, alarmPendingIntent); 
```

而不是将其设置为时间。

# c# - 解密从 STS 发送的 RSTR

> ID：15903878
> 
> 赞同：1
> 
> 时间：2013-04-09T13:55:38.213
> 
> 标签：c#, adfs2.0, federated-identity

我开发了一个自定义服务提供者和一个 STS 的联合身份验证。STS 发送的 RSTR 的请求安全令牌中的声明是加密的。

RSTR 在 wresult 参数中发送。

令牌看起来有点像这样：

```
<t:RequestSecurityTokenResponse xmlns:t="http://schemas.xmlsoap.org/ws/2005/02/trust">...<t:RequestedSecurityToken><xenc:EncryptedData Type="http://www.w3.org/2001/04/xmlenc#Element" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">... 
```

问题是我想加密 RSTR。我看到标签负责解密收到的令牌。我添加了它，起初我在查找该标签中指定的证书时出错，但在我不再有错误之后，RSTR 仍然有那个标签......

我将该标签应用于共享点应用程序以解密，它工作正常，但在我的 web.config 中，它没有。

有什么帮助吗？

谢谢。

# mysql - 嵌套集模型中的类别和文章

> ID：15903883
> 
> 赞同：1
> 
> 时间：2013-04-09T13:55:51.300
> 
> 标签：mysql, nested

我正在设计一个使用[嵌套集模型](http://en.wikipedia.org/wiki/Nested_set_model)的数据库。我有类别，这些类别有文章（即每篇文章都属于一个类别）。

我的问题是，我应该将类别和文章放在一张表中吗？`categories`或者我应该将类别放在嵌套集合表中，并将文章放在通过外键连接到表的简单平面（非分层）表中？

# c++ - MFC 应用程序终止时运行自定义代码：d'tor 还是 WM_CLOSE？

> ID：15903887
> 
> 赞同：5
> 
> 时间：2013-04-09T13:56:04.683
> 
> 标签：c++, mfc, dialog

我有一个基于对话框的 MFC 应用程序，它需要停止 Windows Wifi 服务才能正确运行，但我想在我的应用程序退出时再次启用它。

所以我想我会把重启服务的代码放在主对话框类的析构函数中。

现在我注意到其他人将他们应该在程序终止期间运行的代码放入`WM_CLOSE`消息处理程序中。

两种方法似乎都有效，但我想知道任何一种方法是否都有缺点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:04:33.667

`InitInstance`对于基于 MFC 对话框的应用程序，您可以在主对话框`DoModal`调用之后立即将终结代码放置到应用程序类方法中。对于其他 MFC 应用程序类型（MDI、SDI），通常将完成代码放置到`ExitInstance`方法中。

基于对话框的应用程序和 SDI/MDI 应用程序之间的区别在于，`InitInstance`在基于对话框的应用程序中，应用程序返回 FALSE，并且应用程序退出 - 所有操作都在主对话框`DoModal`调用中完成。

您可以更喜欢`ExitInstance`用于所有应用程序类型，它也应该可以工作。

**编辑**. 如果您想在对话框类中制作清理代码，`WM_DESTROY`（Roger Rowland 已经提到）比`WM_CLOSE`. 有时我们可以处理`WM_CLOSE`消息并防止对话框关闭，例如，通过询问“退出程序？是 - 否”。如果您想使用某些子窗口，它们存在于消息处理程序中`WM_CLOSE`，`WM_DESTROY`而不存在于对话框析构函数中。此外，调用主对话框析构函数时消息队列不存在，因此在这种情况下不应使用 Windows 消息传递。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T14:47:21.633

旨在保持对称性：如果您在构造函数中停止 wifi 服务，则在同一个类的析构函数中重新启动它。相反，如果您在 中停止服务`InitInstance`，您将在`ExitInstance`;中重新启动它。如果作为对`WM_CREATE`或其他消息的响应，则在`WM_CLOSE`等中重新启动它。

构造函数和析构函数无法返回错误状态，因此通常它们更适合简单的任务，例如初始化和内存分配/释放。

`InitInstance`和`ExitInstance`，以及诸如 之类的 Windows 消息`WM_CLOSE`，发生在应用程序生命周期中的适当位置，以在必要时显示错误消息，或中止以响应错误条件。

# php - 如何在仅存储路径的 PHP 上向/从 mysql 上传和下载文件？

> ID：15903892
> 
> 赞同：0
> 
> 时间：2013-04-09T13:56:14.987
> 
> 标签：php, mysql, file, upload, download

我通过以这种方式将其路径存储在mysql中来上传文件：

```
if(isset($_FILES['filefield']))
    {
        $file = $_FILES['filefield'];
        $file_name = $file['name'];
        $file_size = $file['size'];
        $file_type = $file['type'];
        $file_tmpname = $file['tmp_name'];  
        $upload_dir = "C:/xampp/htdocs/intranet/www/public/uploads/";
        $ext_str = "gif,jpg,jpeg,mp3,tiff,bmp,doc,docx,ppt,pptx,txt,pdf";
        $allowed_extensions=explode(',',$ext_str);
        $max_file_size = 10485760;
        $ext = substr($file['name'], strrpos($file['name'], '.') + 1);
        if (!in_array($ext, $allowed_extensions))
            echo "only".$ext_str." files allowed to upload";
        if($file['size']>=$max_file_size)
            echo "only the file less than ".$max_file_size."mb  allowed to upload";
        $path = $upload_dir.$file_name;
        if(move_uploaded_file($file_tmpname, $upload_dir.$file_name))
            ORM::factory('files')->uploadFile($teacher_id, $file_name, $file_size, $file_type, $path);
        else
            echo "The file cant moved to target directory.";

    } 
```

然后我怎样才能通过它的路径下载这个文件？当然，如果我的上传代码是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:00:50.057

试试这个

```
 $file = 'C:/xampp/htdocs/intranet/www/public/uploads/'.$file_name;

if (file_exists($file)) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
} 
```

# flash - 是否有可能以不同的质量接收网络流

> ID：15903900
> 
> 赞同：0
> 
> 时间：2013-04-09T13:56:38.270
> 
> 标签：flash, camera, live, flash-media-server, netstream

在 Flash 中，我有一个应用程序，其中多人通过 NetStreams 以不同的比特率和不同的质量设置将实时摄像机源共享到 Flash Media Server/Adobe Media Server。

我需要移动用户以与其他用户不同的质量设置接收实时提要。

我在 Adob​​e API 文档中找到了 receiveVideoFPS，但经过大量的汗水和泪水之后，它似乎不受 H.264 支持......（去图 - [http://forums.adobe.com/message/3841837#3841837 #3841837](http://forums.adobe.com/message/3841837#3841837#3841837) )

那么有没有其他方法可以让任何人都知道？或者我需要为此做一些定制的事情吗？有任何想法吗 ？解决方法？

当前：Flash Applicaion Publisher > 通过 NetStream 共享相机 > 发布到 FMS/AMS 目标：Flash 应用程序接收者 > 以不同的 fps 和/或分辨率订阅已发布的 NetStream

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:51:51.040

我看到了两种方法来做到这一点。

如果任何流只能被 PC 或移动用户一次看到，则第一种方式是合适的。然后您必须获取输入视频分辨率，如果不合适，请通过 NetStream“发送”方法发送具有正确视频高度/宽度的消息。发布者必须接收此命令并更改其相机对象参数。

第二个更难，但它可以在任何情况下使用。您必须在服务器上转码和重新流式传输。所以每个人都会以 PC 质量流式传输，当移动用户尝试观看流式传输时，他会向媒体服务器发送重新流式传输请求，媒体服务器接收它并创建一个具有相同名称和一些后缀的新流（例如“流”->“流_移动“）。必须在该流中推送转码的视频（可以使用 FFmpeg 转码器）。完成后，您的移动设备应收听“_MOBILE”流。

一个月前我遇到了类似的问题。顺便说一句，我使用的是 Wowza 媒体服务器，而不是 FMS。我知道，Wowza 有一个原生的转码器工具，但是没钱买，所以我被迫使用 FFmpeg（它是完全免费的）。在我的情况下，解决方案非常简单：我编写了一个小的服务器端模块，它正在监听 HTTP-GET 请求，例如：

http://[adr]:[port]/restream?id=ID&w=XX&h=YY

其中 ID 是流的名称，XX/YY 是新的视频尺寸。

当收到此类请求时，将触发一个脚本，该脚本的唯一功能是启动 FFmpeg。它以这样的命令开头：

ffmpeg -i rtmp://[adr]/[appName]/[streamName] -vcodec libx264 -s 352x288 -acodec copy -f flv rtmp://[adr]/[appName]/[newStreamName]

此命令使 FFmpeg 将 -i 流转码为 -f dir，大小为 -s，编解码器为 -vcodec 和 -acodec。

如您所见，这非常容易。FFmpeg中有很多参数，比如比特率、帧率、图像质量等。

# mod-rewrite - 将 Lighttpd 重写转换为 nginx

> ID：15903901
> 
> 赞同：1
> 
> 时间：2013-04-09T13:56:38.927
> 
> 标签：mod-rewrite, nginx, converter, lighttpd

我在将 lighttpd rewrite 转换为 nginx 时遇到问题。

下一行。

```
rewrite "/torrent/([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{36}).*" => "/t/$1/$2/$3.torrent"; 
```

一些帮助？

# django - Django sql/syncdb 命令因 PostgreSQL 后端而失败

> ID：15903906
> 
> 赞同：0
> 
> 时间：2013-04-09T13:56:51.120
> 
> 标签：django, postgresql

我正在尝试将基于 MySQL 的 Django 项目迁移到 PostgreSQL。不幸的是，一旦我在 settings.py 中切换数据库后端，所有 sql/syncdb 命令都会失败。

`python manage.py sql profile`带 MySQL：

```
BEGIN;
CREATE TABLE `profile_department` (
     `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY,
     `name` varchar(100) NOT NULL UNIQUE,
     [...] 
```

`python manage.py sql profile`带 PostgreSQL (psycopg2):

```
DatabaseError: relation "profile_department" does not exist
LINE 1: ...nt"."homepage", "profile_department"."gd_id" FROM "profile_d...
                                                         ^ 
```

为什么 Django 对两个数据库后端的行为不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:52:17.917

Thomas 是对的，在 models.py 中确实有两个查询涉及到 Department 类：

```
ROOT_DEPARTMENT = Department.objects.get(pk=14)
FACULTIES = Department.objects.filter(parent=ROOT_DEPARTMENT) 
```

谢谢！

# android - 在本地网络和 Android 应用程序之间同步

> ID：15903909
> 
> 赞同：1
> 
> 时间：2013-04-09T13:56:54.133
> 
> 标签：android, sync

我在这里需要一些帮助。

我想制作一个最终同步到网络服务器以获取信息的 Android 应用程序（即用户可以通过网站写便条，它会自动同步到手机）。

我知道我需要一些网络服务器和托管，并且对此不太了解，所以我稍后会研究它。

然而，我的问题是如何通过本地网络模拟这个？例如，如果我创建一个基本网页，其中包含两个文本框（一个用于名称，一个用于内容）和一个“提交”按钮，如果我通过 localhost 运行它，我可以使用哪些方法来获取此信息以同步到我的手机？

如果有人能好心地给我一个外行术语细分，我将不胜感激，我感到很失落！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:41:12.307

当你使用时`localhost`（意味着你在你的计算机中安装了一个服务器包，例如 Apache / IIS / XAMPP / WAMP），你的机器就变成了一个服务器。因此，您可以`localhost`从同一网络中的任何设备访问。

假设您有一台连接到 WiFi 路由器的计算机。如果您设置了服务器，即`localhost`在该计算机中，一台笔记本电脑和一部手机连接到同一个 WiFi 路由器，则手机和笔记本电脑将能够从计算机获得服务。

要从其他设备（例如手机）访问存储在 MySQL 服务器中的数据，您必须编写适当的服务。否则，您可以在访问 MySQL 数据的服务器中编写一个移动 Web 应用程序，然后从设备上访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:54:11.507

你有一些替代方案来实现你想要的，这是一个传统的：

*   从安装 XAMPP 开始并运行本地服务器
*   编写您的网页，将数据存储在 mysql 中
*   编写PHP代码从mysql中提取数据
*   使用 Android HttpClient 调用你的 PHP

还有其他选择：

*   使用相同的方法，但不是 PHP 而是编写 HTML5，你有一个移动 WEB 应用程序
*   查看 GCM 演示应用程序
*   查看谷歌应用引擎
*   查看亚马逊网络服务
*   还有其他

享受 :) 亚龙

# javascript - onfocusin 不适用于 Firefox 和 chrome

> ID：15903912
> 
> 赞同：1
> 
> 时间：2013-04-09T13:57:06.353
> 
> 标签：javascript, google-chrome, firefox, keyboard-events

我有一个在页面中运行的 Javascript。以下是正在使用的代码。

```
window.document.onkeydown = keydown;
function keydown()
{ 
  alert("keydown");
}

 window.document.onfocusin = focussedin ;
 function focussedin ()
{ 
   alert("focus in");
 } 
```

在这里，如果我运行代码，我不会关注 firefox 和 chrome 的警报。window.document.onfocusin 是否不能在 IE 以外的其他浏览器中运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T13:59:53.517

`onfocusin` 仅受 `IE` [http://help.dottoro.com/ljggspvo.php支持](http://help.dottoro.com/ljggspvo.php)

您应该改用 onfocus 。

```
 function onfocusFun ()
 { 
   console.log("focus in");
 }
 window.onfocus = onfocusFun; 
```

[JSFIDDLE](http://jsfiddle.net/X5kD2/)

注意：firefox 的行为是正确的，因为一旦打开警报框，您就会从文档中失去焦点，而在关闭警报框时，您又会触发 onfocus。请改用 console.log。

# ios - 添加新设备会使旧的配置文件失效吗？

> ID：15903913
> 
> 赞同：0
> 
> 时间：2013-04-09T13:57:11.293
> 
> 标签：ios, ios-provisioning

我正在寻找将新设备添加到我正在开发的应用程序的配置文件中。我担心的是，我们办公室外已经有一些设备正在运行使用现有版本的配置文件安装的测试版本。

如果我更新配置文件以包含新设备，现有设备上的配置文件是否会失效并阻止该应用程序的现有版本正常运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:59:19.080

不，旧的配置文件将保持有效。应用程序过期的唯一方法是用于签署代码/配置文件的开发证书被撤销或过期。

# c++ - 如何在 C++ 中实现 Python 函数 exec()？

> ID：15903914
> 
> 赞同：-1
> 
> 时间：2013-04-09T13:57:14.133
> 
> 标签：c++

该`Python`函数`exec()`是一个非常好的编程工具。

例如：

```
/******************************************************
 * we have array names={"ali","hamed"}
 * goal is declare string ali="ali" and hamed="hamed"
 ******************************************************/ 
```

`Python`代码：

```
# used for command
# below line is a syntax python
# in python we dont declare variable
list=["ali","hamed"]  #python syntax
#in python we dont wite {
#python work with tab insteed of {}
for i in list:
    temp = i + ' = "' + i + '"' #temp is a string 
    exec(temp) 
```

我的问题：C++ 中是否存在类似的函数？如果没有，如何在 C++ 中实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:01:12.223

Python`exec`和其他语言（即`eval`JavaScript）中的类似功能之所以有效，是因为它们是在*运行时*定义变量的*解释性*语言。

 *您不能直接在 C++ 中执行您所要求的操作，因为它是一种编译语言，需要在*编译时*知道所有变量及其名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T14:29:46.350

你可以做到，但这并不简单，而且它只适用于安装了 C++ 编译器的系统。基本上，C++ 是编译好的，所以如果你想执行一些 C++ 字符串，你必须编译它：把它写到一个文件中（可能有一些额外的样板，比如一些包含），调用编译器（with `system`）来构建一个DLL，然后加载 DLL。

在实践中，即使您付出了所有努力，您也可能会发现它没有您想象的那么有用。因为 C++ 几乎所有东西都需要静态声明，所以编写这样的小片段并让它们可用要困难得多。（例如，您必须将其包装在一个函数中，并生成 `extern`对于它使用的所有变量。）出于软件工程的原因，C++ 不支持这种事情；正是这些特性使得像 Python 这样的语言对于小型、快速编写的程序如此灵活，但在用于大规模健壮软件时会导致严重的维护问题。不同的语言是为不同的目的而设计的。使用 Python 创建一个混合语言系统非常容易，因为顶级胶水（您需要像您描述的那样的工具），并调用 C++ 来完成繁重的工作（这样的工具将允许用户触发核心转储）随意）。

或者，您可以在 C++ 中实现一种小型语言。例如，为了保留用户定义`std::map`的变量，请使用 ，而不是声明变量。（毕竟，这就是 Python 在幕后所做的事情。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T17:09:56.083

如果您打算使用字符串作为参数，这不是一个好主意！您可以简单地使用 id 生成器函数并为要使用的每个字符串提供一个 id，或者如果您正在使用一个类，您可以将该函数放入构造函数中。根本不需要那个 exec() ！*

# java - 正则表达式匹配任何以两个修复字母开头的单词

> ID：15903922
> 
> 赞同：1
> 
> 时间：2013-04-09T13:57:34.567
> 
> 标签：java, regex

我需要匹配任何以两个固定字母开头的单词的正则表达式，例如**CO**、**CC**、**EX** 和**FR**：

1.  COYEAR/NUMBER 例如。: CO2001/123
2.  CCYEAR/NUMBER 例如。: CC2001/123
3.  EXYEAR/NUMBER 例如。: EX2001/123
4.  FRYEAR/NUMBER 例如。: FR2001/123

我创建了一种格式：`^[C,E,F][O,C,X,R][0-9]{4}(/{1})[0-9]{1,8}`

这种格式`^[C,E,F][O,C,X,R]`表示输入的值应以 C、E 或 F 开头，然后允许来自 O、C、X 和 R 的任何单词。

但我有一些规则，比如

```
1)There must be O or C after C
2)There must be X after E 
3)There must be R after F 
```

其他组合不允许。

示例测试示例：

```
public class TestRegEx {

    public static void main(String[] args) {

        String value1="CC2007/67";

        String value2="CO2001/123";
        String value3="CC2001/123";
        String value4="EX2001/123";
        String value5="FR2001/123";

        boolean value1isVerify=value5.matches("^[C,E,F][O,C,X,R][0-9]{4}(/{1})[0-9]{1,8}");
        System.out.println("isVerify--->"+value1isVerify);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:08:55.830

看看这是否适合你

```
public static void main(String[] args) {
    String str = "^(C[OC]|E[X]|F[R])[0-9]{4}(/{1})[0-9]{1,8}$";

    System.out.println("CC2007/67".matches(str));
    System.out.println("CO2001/123".matches(str));
    System.out.println("CC2001/123".matches(str));
    System.out.println("EX2001/123".matches(str));
    System.out.println("VR2001/123".matches(str));

} 
```

我如何应用你的规则：

*   C后面必须有O或C -->`^C[OC]`
*   E 后面必须有 X -->`^E[X]`
*   F后面必须有R -->`^F[R]`

由于只有第一个具有多个后续字符选项，因此可以这样重写：`"^(C[OC]|EX|FR)[0-9]{4}(/{1})[0-9]{1,8}$";`

但我决定离开这个小组，以便在你想添加其他可能的组合时更容易。您可以使用任何您觉得更舒服的版本。

而且我没有触及你的模式的其余部分，因为我不知道你到底匹配的是什么。但我相信它可以像这样缩短：

```
"^(C[OC]|EX|FR)\\d{4}/\\d{1,8}$" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:11:17.537

尝试

```
str.matches("(CO|CC|EX|FR)\\d{4}/\\d{1,8}") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T14:11:35.600

*这种格式`^[C,E,F][O,C,X,R]`表示输入的值应以 C、E 或 F 开头，然后允许来自 O、C、X 和 R 的任何单词。*

不，它没有，它说字符串应该以`C`, `E`, `F`, or开头`,`，然后是`O`, `C`, `X`, `R`or `,`。即字符串`",,"`将匹配。

尝试

```
"^(CO|CC|EX|FR)" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:01:17.793

您不必使用可以使用的正则表达式`String.startsWith()`。在这种情况下，您将根据所有有效的起始字符检查您的字符串。

# arrays - LoaderMax：将数组设置为容器（ImageLoader）

> ID：15903923
> 
> 赞同：0
> 
> 时间：2013-04-09T13:57:35.170
> 
> 标签：arrays, image, actionscript-3, gsap

所以，我有一个 LoaderMax 实例从各种 URL 加载图像。我想将所有加载的图像添加到数组中。这是我的代码：

```
var photosArray:Array = new Array(5);
var imageLoadingQueue:LoaderMax = new LoaderMax({name:"mainQueue", onComplete:completeHandler});

for (var g:uint=0; g<5; g++)
{
    imageLoadingQueue.append(new ImageLoader("/img" + g + ".jpg", {name:"photo", container:photosArray[g], noCache:false, smoothing:true, width:126, height:126, scaleMode:"proportionalOutside"}));
} 

imageLoadingQueue.load();

private function completeHandler(e:LoaderEvent):void
{
    trace("finished loading pictures!");

  //the next two lines will return an error (saying that photosArray[1] is null)
    stage.addChild(photosArray[1]);
    photosArray[1].x = 250;
} 
```

几个问题：

1.  如果我将要加载的图像的容器设置为数组，它将不起作用。我无法访问数组内的图像，因为它说它是空的。
2.  如果我将要加载的图像的容器设置为“this”（在附加新的 ImageLoader 时使用容器属性），并且在 completeHandler 上，将我的数组设置为 event.target.content，它有点工作（但它不是理想的）。问题是，通过这样做，图像在加载时出现在舞台上，我不希望他们这样做。

任何帮助将不胜感激。谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:40:53.947

David 是对的，但我还想提一下，LoaderMax 的“内容”实际上是一个包含所有子内容的数组，所以为了简单起见，您可以使用它。请记住，ImageLoaders 会自动创建一个 Sprite（技术上称为“ContentDisplay”）以将图像放入其中，因此您可能不需要创建另一个 Sprite（容器的容器）。

```
var photos:Array = imageLoadingQueue.content;
stage.addChild(photos[1]); 
```

另一个好处是它会立即创建 ContentDisplay Sprites，甚至在任何内容加载到其中之前，因此您可以在加载发生时（或之前或之后）根据需要放置它们并调整它们的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:46:16.483

容器必须是`DisplayObjectContainer`. `ImageLoader`将尝试使用 将图像添加到容器中`addChild()`，因此显然这不适用于空数组。为每个图像创建一个新`Sprite`图像并首先将其添加到数组中：

```
for (var g:uint=0; g<5; g++)
{
    photosArray[g] = new Sprite();
    imageLoadingQueue.append(new ImageLoader("/img" + g + ".jpg", {name:"photo", container:photosArray[g], noCache:false, smoothing:true, width:126, height:126, scaleMode:"proportionalOutside"}));
} 
```

# java - 如何在不知道其类型的情况下设置属性（即通过 BeanUtils）

> ID：15903926
> 
> 赞同：4
> 
> 时间：2013-04-09T13:57:42.403
> 
> 标签：java, reflection, javabeans, apache-commons-beanutils

我需要设置 JavaBean 的一些属性。我有一个泛型`Map<String, String>`，其中第一个字符串是属性的**名称**，第二个表示它的值。

现在，如果地图如下所示：

```
"greeting" : "Hello"
"cool" : "true"
"amount" : "42" 
```

我在 bean 中的设置器看起来像这样：

```
public void setGreeting(String greeting);
public void setCool(boolean cool);
public void setAmount(int amount); 
```

我需要一般地设置这些属性，如：

```
BeanUtils.setProperty(myBean, "amount", myMap.get("amount")); 
```

以便 BeanUtils 找到要使用的正确方法并将 String 转换为正确的类型。在 API 文档中的大多数地方都显示“无类型转换”，但我在 API 文档中发现了很多转换器，所以我认为必须有办法做到这一点。

如何让 BeanUtils 在不知道其类型的情况下找到正确的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:04:59.877

[javadoc](http://commons.apache.org/proper/commons-beanutils/api/org/apache/commons/beanutils/BeanUtils.html#setProperty%28java.lang.Object,%20java.lang.String,%20java.lang.Object%29)说：

> 设置指定的属性值，根据需要执行类型转换以符合目标属性的类型。

所以它应该自动转换你的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:39:52.227

根据 class 的文档[`ConvertUtilsBean`](http://commons.apache.org/proper/commons-beanutils/api/index.html)，您可以自动从目标类型转换`String`为`String[]`目标类型的类型是：

*   `java.lang.BigDecimal`（无默认值）
*   `java.lang.BigInteger`（无默认值）
*   `boolean and java.lang.Boolean`（默认为假）
*   `byte and java.lang.Byte`（默认为零）
*   `char and java.lang.Character`（默认为空格）
*   `java.lang.Class`（无默认值）
*   `double and java.lang.Double`（默认为零）
*   `float and java.lang.Float`（默认为零）
*   `int and java.lang.Integer`（默认为零）
*   `long and java.lang.Long`（默认为零）
*   `short and java.lang.Short`（默认为零）
*   `java.lang.String`（默认为空）
*   `java.io.File`（无默认值）
*   `java.net.URL`（无默认值）
*   `java.sql.Date`（无默认值）
*   `java.sql.Time`（无默认值）
*   `java.sql.Timestamp`（无默认值）

如果您需要另一个转换器或替换某人，您可以在[Convert Utils Demo](http://www.java2s.com/Code/Java/Apache-Common/ConvertUtilsDemo.htm)中找到一个很好的示例。

*   [*注册 ConvertUtils*](https://stackoverflow.com/questions/12719645/beanutils-copy-properties-registering-convertutils)

# c# - 两个 dll（服务和接口）。对各种项目使用接口方法？

> ID：15903927
> 
> 赞同：0
> 
> 时间：2013-04-09T13:57:44.440
> 
> 标签：c#, .net, web-services, web-applications, dll

我有一个相当大的网络应用程序，其中包含几个不同的项目。我必须添加一些额外的功能（帐户验证、搜索产品等）。我得到了两个`.dll`文件，比如说`Services.dll`和`Interfaces.dll`.

`Services.dll`包括三个类，其中包含多个方法`Interfaces.dll`及其接口。

例子：

```
//SERVICES.DLL
using Interfaces;

namespace Services
{
  internal class User : IUser
  {
    public Users GetUserByName (string Name)
    {
      //Implementation
    }
  }
}

//INTERFACES.DLL
namespace Interfaces
{
  public interface IUser
  {
    Users GetUserByName(string Name);
  }

  public class Users
  {
    public string FirstName {get; set;}
    public string LastName {get; set;}
  }
} 
```

为了实现额外的功能，我需要在我包含的几个项目中使用这些方法。如何使用提供的 dll 来实现这一点？使用 dll 创建 Web 服务是一种方式吗？那么服务将如何消费它们呢？

一切都在 C# 和 Net 2.0 中实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:08:44.390

我说这取决于这些 dll 的更新频率。您应该选择更方便更新的任何方法。Web 服务可能很容易更新，但可能会向您的应用程序添加不必要的层，并且可能会受到带宽限制。您可以考虑直接在您的网络应用程序中添加 dll 文件作为对文件的引用。然后用新版本更新 dll 将需要重新构建/重新发布。

# wireshark - 如何将无线加密方法添加到我的列？

> ID：15903933
> 
> 赞同：0
> 
> 时间：2013-04-09T13:58:03.123
> 
> 标签：wireshark

我知道如何创建自定义列，但是我很难生成我需要的过滤器，以确定网络数据包是否受 Open/WEP/WPA 保护。Wireshark 有这个功能，我在 WLAN 统计工具中看到过。

我会假设它会是某种 wlan_mgt.rsn。但是我只有 wlan.rsn.akms.type 来显示“PSK”。我接近我想要的只是不完全是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:34:03.840

试试 wlan_mgt.rsn.akms.type。
另请参阅 Wireshark[显示过滤器参考：wlan_mgt](http://www.wireshark.org/docs/dfref/w/wlan_mgt.html)

# ios - 取消 NSJSONSerialization - 键入时搜索，请求重叠

> ID：15903938
> 
> 赞同：2
> 
> 时间：2013-04-09T13:58:18.257
> 
> 标签：ios, xcode, nsurlconnection, nsjsonserialization

与 iPhone Facebook 应用程序搜索功能类似，我在将功能输入到我的应用程序时实现搜索，尽管在将数据解码为 JSON 格式时遇到问题。

基本上发生的情况是因为某些搜索比其他搜索花费更长的时间，它们以不同的时间间隔返回，当数据显示在屏幕上时，这会导致一些小的视觉问题。

我在每次解码后使用 NSJSONSerialization 为关键字“行业”设置了一个 NSLOG

```
2013-04-09 23:38:18.941 Project Name [42836:1d03] http://fooWebAddress/json/?method=search&limit=10&q=indus
2013-04-09 23:38:19.776 Project Name [42836:3e07] http://fooWebAddress/json/?method=search&limit=10&q=indu
2013-04-09 23:38:20.352 Project Name [42836:8803] http://fooWebAddress/json/?method=search&limit=10&q=indust
2013-04-09 23:38:21.814 Project Name [42836:4e03] http://fooWebAddress/json/?method=search&limit=10&q=industr
2013-04-09 23:38:23.434 Project Name [42836:8803] http://fooWebAddress/json/?method=search&limit=10&q=ind
2013-04-09 23:38:24.070 Project Name [42836:7503] http://fooWebAddress/json/?method=search&limit=10&q=industry 
```

如您所见，一切都乱了套。

有没有人有任何方法可以停止前一个连接的 NSJSONSerialization。或者可能有任何其他方式来解决这个问题？

* * *

升级到 NSJSONSerialization...

1.  NSURLRequest (initwithURL)
2.  NSOperationQueue
3.  NSURLConnection（异步）
4.  NSJSON序列化

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:18:49.933

当用户开始输入更多文本时，您*可以*取消之前的连接并忽略您从他们那里收到的任何进一步的委托回调。然后对当前文本发出新请求。

您可以通过维护某种`lastRequest`或`lastOperation`参考来做到这一点。当用户开始输入时，调用`[self.lastRequestOrOperation cancel]`并忽略来自该请求的任何进一步通知，并检查`if (request != self.lastRequest) { return; }`您拥有的任何回调。

然而，这有一个问题，如果用户继续输入一段时间，您会不断取消请求，并且在他们停止输入之前他们可能看不到任何结果。

更好的解决方案是添加排序，以便每个请求与递增的序列 ID 相关联。然后，您仅在响应序列高于您收到的最后一个时解析结果并更新 UI。如果您收到之前的任何带外响应，您只需忽略它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:18:07.750

这是一个比仅仅能够取消`NSJSONSerialization`. 我的建议是用来`NSFetchedResultsController`填充显示搜索结果的表格视图。`NSFetchRequest`使用搜索词作为附加到的谓词变量之一`NSFetchedResultsController`。然后，当您使用 解析结果时`NSJSONSerialization`，将结果与与该请求关联的搜索词一起存储。一旦搜索词更改（您可以检测到用户何时键入更多字符），重新创建`NSFetchedResultsController`并重新加载您的表格视图。此外，如果您使用 performSelector:withObject:afterDelay 启动它，您还可以尝试取消调用以解析先前的结果。请注意，这不能总是依赖，因为呼叫可能在您尝试取消时已启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:19:15.317

有点基本，但您始终可以维护子类 NSURLRequests 的 nsdictionary（子类以提供标签）。

开始请求 - 使用 tag = array.count - 1 向字典添加请求，带有 key 匹配标签 Connection 返回 - 是请求最近的请求，如果是，则解析 json 解析 JSON - 是请求最近的请求，如果是，显示结果，如果没有，仅在没有显示以前的结果时显示请求处理 - 从字典中删除键

最近的请求 = 字典是否包含具有更高键值的对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-22T07:13:52.913

目前你正在做的是，你输入每个字符并调用网络服务。为什么要为您键入的每个字母调用网络服务。如果用户连续输入，则会增加负载，因此只有在用户停止特定时间间隔时才调用 Web 服务。然后将该字符串传递给调用 web-service 或您正在调用的任何方法。

```
[NSObject cancelPerformSelectorsWithTarget:self]; // This will cancel your all req which is going to make when user typing without stopping 
[self performSelector:@selector(sendSearchRequest) withObject:searchText afterDelay:0.1f]; // This will pass the string to call a web-service method, on which user hold for some time. 
```

# c# - OrderBy 编译但不排序

> ID：15903939
> 
> 赞同：0
> 
> 时间：2013-04-09T13:58:21.660
> 
> 标签：c#

我正在尝试使用以下代码为排名表订购列表：

```
leagueTeamRow.OrderBy(c => c.points).ThenBy(c => c.goalDifference); 
```

代码编译，但项目没有被排序，它们仍然以默认顺序显示。

这是我的课

```
public class LeagueRow
    {
        public String teamName { get; set; }
        public String managerName { get; set; }
        public Int32 played { get; set; }
        public Int32 won { get; set; }
        public Int32 draw { get; set; }
        public Int32 lost { get; set; }
        public Int32 goalsFor { get; set; }
        public Int32 goalsAgainst { get; set; }
        public Int32 goalDifference { get; set; }
        public Int32 points { get; set; }
    } 
```

谁能建议我缺少什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T14:01:24.930

您错过了这一点`OrderBy`并且`ThenBy`没有对列表进行排序，他们会返回一个新的有序列表。

这是所有 LINQ 方法使用的相同模式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T14:00:21.367

`leagueTeamRow`您在检查订单时是否参考？您需要将结果保存`OrderBy`到变量中。

所以

```
var orderedLeagueTeamRow = leagueTeamRow.OrderBy(c => c.points).ThenBy(c => c.goalDifference); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-09T14:00:45.690

OrderBy 返回一个`IOrderedEnumerable`：一个列表或实现 IEnumerable 的东西，然后是有序的。你没有分配那个！

```
var ordered = leagueTeamRow.OrderBy(c => c.points).ThenBy(c => c.goalDifference); 
```

在有序变量中，按您设置的顺序排列

[在这里](http://msdn.microsoft.com/en-us/library/bb534966.aspx)查看更多

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-09T14:01:25.030

我认为您必须将语句的结果分配给变量

```
var ordered = leagueTeamRow.OrderBy(c => c.points).ThenBy(c => c.goalDifference); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-09T14:01:35.757

您需要将排序结果分配给变量或其他东西：

```
var ordered = leagueTeamRow.OrderBy(c => c.points).ThenBy(c => c.goalDifference); 
```

# java - Java中的意外性能损失

> ID：15903940
> 
> 赞同：11
> 
> 时间：2013-04-09T13:58:24.100
> 
> 标签：java, performance, collections

我在 Java 中实现了一个 GapBuffer 列表，但我不知道为什么它会受到这样的性能损失。用 C# 编写的类似代码的行为符合预期：插入到列表中间比 C# 的 List 实现快得多。但是 Java 版本的行为很奇怪。

以下是一些基准测试信息：

```
Adding/removing 10,000,000 items @ the end of the dynamic array...
ArrayList: 683 milliseconds
GapBufferList: 416 milliseconds

Adding/removing 100,000 items @ a random spot in the dynamic array...
  - ArrayList add: 721 milliseconds
  - ArrayList remove: 612 milliseconds
ArrayList: 1333 milliseconds
  - GapBufferList add: 1293 milliseconds
  - GapBufferList remove: 2775 milliseconds
GapBufferList: 4068 milliseconds

Adding/removing 100,000 items @ the beginning of the dynamic array...
ArrayList: 2422 milliseconds
GapBufferList: 13 milliseconds

Clearly, the GapBufferList is the better option. 
```

如您所见，当您插入到列表的开头时，间隙缓冲区的行为与预期一样：它比 ArrayList 好很多、很多、很多倍。但是，当在列表中的随机位置插入和删除时，间隙缓冲区有一个奇怪的性能损失，我无法解释。更奇怪的是，从 GapBufferList 中删除项目比添加项目要慢 - 根据我到目前为止运行的每个测试，删除项目所需的时间大约是添加项目的三倍，尽管事实上他们的代码几乎相同：

```
@Override
public void add(int index, T t)
{
    if (index < 0 || index > back.length - gapSize) throw new IndexOutOfBoundsException();
    if (gapPos > index)
    {
        int diff = gapPos - index;
        for (int q = 1; q <= diff; q++)
            back[gapPos - q + gapSize] = back[gapPos - q];
    }
    else if (index > gapPos)
    {
        int diff = gapPos - index;
        for (int q = 0; q < diff; q++)
            back[gapPos + q] = back[gapPos + gapSize + q];
    }
    gapPos = index;
    if (gapSize == 0) increaseSize();
    back[gapPos++] = t; gapSize--;
}
@Override
public T remove(int index)
{
    if (index < 0 || index >= back.length - gapSize) throw new IndexOutOfBoundsException();
    if (gapPos > index + 1)
    {
        int diff = gapPos - (index + 1);
        for (int q = 1; q <= diff; q++)
            back[gapPos - q + gapSize] = back[gapPos - q];
    }
    else
    {
        int diff = (index + 1) - gapPos;
        for (int q = 0; q < diff; q++)
            back[gapPos + q] = back[gapPos + gapSize + q];
    }
    gapSize++;
    return back[gapPos = index];
} 
```

间隙缓冲区的代码可以在[这里](http://pastebin.com/7y4f2g4R)找到，基准入口点的代码可以在[这里](http://pastebin.com/mFR7utEK)找到。（您可以用 替换任何引用`Flow.***Exception`。`RuntimeException`）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T14:10:48.853

您手动复制数组的所有内容。请改用 System.arraycopy。它比手动复制要快得多（它是本机的并使用特殊的魔法）。您还可以查看 ArrayList 源代码，它肯定会使用 System.arraycopy 而不是一个一个地移动元素。

关于添加/删除方法的不同性能。用java编写微基准并不是一件容易的事。有关详细信息，请阅读[如何在 Java 中编写正确的微基准测试？](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java)很难说，你的情况到底发生了什么。但我知道，您首先填充您的列表，然后才从中删除项目。在这种情况下，只执行 (index > gapPos) 分支。因此，如果 JIT 编译该代码，则可能会发生 CPU 分支预测，这将进一步加速该代码（因为在您的测试用例中不太可能出现第一个分支）。删除将几乎相同次数地击中两个分支，并且无法进行优化。所以真的很难说，到底发生了什么。例如，您应该尝试其他访问模式。或者里面有缝隙的特工阵列。或者其他例子。而且你应该从 JVM 输出一些调试信息，这可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:31:55.327

```
 public E remove(int index) {

     rangeCheck(index);

     modCount++;

     E oldValue = elementData(index);

     int numMoved = size - index - 1;

     if (numMoved > 0)
        System.arraycopy(elementData, index+1, elementData, index, numMoved);

     elementData[--size] = null; // Let gc do its work

     return oldValue;

 } 
```

这就是 ArrayList 的 remove 方法的来源。由于它正在使用`System.arraycopy`（非常巧妙地）并且您正在使用循环，因此 ArrayList 得分。尝试实现类似的东西，你会看到类似的性能。

# iphone - 从 NSString 到 NSDate 的转换不起作用

> ID：15903944
> 
> 赞同：0
> 
> 时间：2013-04-09T13:58:35.880
> 
> 标签：iphone, ios, objective-c, xcode

我必须将此 NSString: "12/13/1980" 转换为 NSDate 对象。我使用这样的代码：

```
NSString *birthday = @"12/13/1980"
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"MM/dd/yyyy"];
NSDate *date = [dateFormat dateFromString:dateString]; 
```

但是结果是这样的：“1980-12-12 23:00:00 +0000” 为什么？我想要相同的格式和相同的日期。非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:20:08.613

该`[dateFormat dateFromString:dateString]`方法生成一个表示单个时间点的 NSDate 对象。

当您 NSLog 日期对象时，它正在打印 NSDate 对象的系统表示。我假设您的语言环境是 GMT+1 .. 所以 NSLog 打印 12/12/1980 23:00。

如果要打印日期对象，请使用格式化程序执行`[dateFormat stringFromDate:date];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:01:09.030

格式取决于本地化，还可以选择设置日期/时间是短格式、中格式还是长格式 - 我相信您正在寻找的是短格式：

```
[dateFormatter setDateStyle:NSDateFormatterShortStyle];  
[dateFormatter setTimeStyle:NSDateFormatterNoStyle]; 
```

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T14:14:25.587

这是因为一个 NSDate 对象总是有一个时间和一个时区，所以如果你没有在你试图转换的字符串中指定 IOS 将使用你的本地时区然后猜测时间，在这种情况下会UTC 0 为 23:00

# actionscript-3 - 使用 AS3 进行数据流式传输？

> ID：15903947
> 
> 赞同：0
> 
> 时间：2013-04-09T13:58:43.347
> 
> 标签：actionscript-3, streaming

我们需要流式传输大数据，即一大组点 (x, y)，我们如何使用 actionscript 3 实现数据流式传输？

由于我们使用 Adob​​e AIR 以 android 为目标，是否可以实现数据流？

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:14:42.763

使用 flash.net.Socket 或 flash.net.XMLSocket 以面向流的方式发送和接收数据。

# r - 在数组中添加平均列

> ID：15903949
> 
> 赞同：0
> 
> 时间：2013-04-09T13:58:45.483
> 
> 标签：r, statistics, dataframe, average

我在 R 中具有 3 列和多行（1000+）的 data.frame 中每小时收集当地温度：

日 - 小时 - 温度

*   1 - 11:00 - 14
*   1 - 12:00 - 17
*   ...
*   2 - 11:00 - 10
*   2 - 12:00 - 19
*   ...
*   3 - 11:00 - 15
*   3 - 12:00 - 9

我需要添加一个新列，其中包含每小时间隔内的平均温度。在示例中：11:00 的平均温度等于 13ºC，12:00 等于 15C，所以我需要：

日 - 小时 - 温度 - 平均

*   1 - 11:00 - 14 - 13
*   1 - 12:00 - 17 - 15
*   ...
*   2 - 11:00 - 10 - 13
*   2 - 12:00 - 19 - 15
*   ...
*   3 - 11:00 - 15 - 13
*   3 - 12:00 - 9 - 15

我尝试了 cbind，聚合但我失败了。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:17:55.090

如果`df`是您的 data.frame，则以下可能有效：

```
 avgTemp <- sapply(unique(df$Hour),function(x){mean(df$Temperature[df$Hour==x])})
  names(avgTemp) <- unique(df$Hour)

  df <- cbind(df,avgTemp[df$Hour]) 
```

# javascript - 在段落之前添加带有 DOM 模型的元素

> ID：15903950
> 
> 赞同：1
> 
> 时间：2013-04-09T13:58:46.343
> 
> 标签：javascript

我想在段落之前添加新的输入文本。但它在文本后添加相反的工作。
这段代码有什么问题？
我用`document.getElementById("p1").insertBefore(node);`这个目标，但没有成功。为什么会这样？

**代码：**

```
<html>
    <head>
        <title>Adding text to a page</title>
            <script>
                function addText() {
                    var sentence=document.form1.sentence.value;
                    var node=document.createTextNode(sentence + " ");
                    document.getElementById("p1").insertBefore(node);
                }
            </script>
    </head> 
        <body>
            <h1>Create Your Own Content</h1>
            <p id="p1">Using the W3C DOM, you can dynamically
                add sentences to this paragraph. Type a sentence
                and click the Add button.</p>       
            <form name="form1">
                <input type="text" name="sentence" size="65">
                <input type="button" value="Add" onClick="addText();">
            </form>
        </body>    
</html> 
```

**问题：**

*   如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:01:49.007

该[`insertBefore`方法](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore)需要在父节点（您要插入的节点）上调用，就像`appendChild`：

```
var node=document.createTextNode(sentence + " ");
var p1 = document.getElementById("p1");
p1.parentNode.insertBefore(node, p1); 
```

* * *

如果你想在段落中添加句子*而*不是在它之前（直接进入`<body>`），你可以使用这个：

```
p1.appendChild(node); // insert at the end
// or
p1.insertBefore(node, p1.firstChild); // insert at the beginning 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:08:27.063

你可以

*   抓住新句子。
*   获取原始内容。
*   将它们放在一个变量中。
*   清除元素。
*   把它打回去。

像这样：

```
var addText = function() {
    var sentence = document.form1.sentence.value;
    var node = document.createTextNode(sentence + " ");
    var el = document.getElementById("p1");
    var original = el.innerHTML;
    var newPara = sentence + ". " + original;
    el.innerHTML = "";
    el.innerHTML = newPara;
} 
```

[jsFiddle](http://jsfiddle.net/Cwalkdawg/5jSza/1/)

请注意，这是很多步骤，但是，嘿，有一百万种剥猫皮的方法。

当然，您总是可以将所有这些代码缩短为：

```
var addText = function() {
    document.getElementById("p1").innerHTML =  document.form1.sentence.value + ". " + document.getElementById("p1").innerHTML;
} 
```

[新的 jsFiddle](http://jsfiddle.net/Cwalkdawg/5jSza/3/)

# filepicker.io - 断开文件选择器

> ID：15903952
> 
> 赞同：1
> 
> 时间：2013-04-09T13:58:50.397
> 
> 标签：filepicker.io

当我在我的 Web 应用程序中关闭会话时，我断开了文件选择器，目的是如果另一个用户在同一台​​ PC 中启动会话，他应该开始新登录文件选择器的服务（例如保管箱），但我还没有找到一种断开文件选择器的方法。

我感谢任何关于这个问题的帮助和指导。

# streaming - 从 BizTalk 业务流程流式传输消息的二进制部分

> ID：15903958
> 
> 赞同：1
> 
> 时间：2013-04-09T13:59:03.673
> 
> 标签：streaming, biztalk, mtom, biztalk-2009

我必须向期望以下模式作为输入的 WCF 服务发送 MTOM 请求：

```
<xs:complexType name="BinaryRequest">
    <xs:sequence>
      <xs:element minOccurs="0" name="requestContent" nillable="true" type="BinaryRequestContent" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="BinaryRequest" nillable="true" type="BinaryRequest" />
  <xs:complexType name="BinaryRequestContent">
    <xs:sequence>
      <xs:element minOccurs="0" name="partData" nillable="true" type="xs:base64Binary" />
      <xs:element minOccurs="0" name="partNumber" type="xs:int" />
      <xs:element minOccurs="0" name="transactionId" nillable="true" type="xs:string" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="BinaryRequestContent" nillable="true" type="BinaryRequestContent" /> 
```

如您所见，“partData”属性的类型为 byte[]，我希望能够对其进行流式传输并将其发送到单独的 MIME 部分中。

无法使用来自[http://seroter.wordpress.com/biztalk-and-wcf-part-iv-attachment-patterns/](http://seroter.wordpress.com/biztalk-and-wcf-part-iv-attachment-patterns/)的示例，因为我的二进制数据只是响应的一部分。

知道怎么做吗？我有一个测试解决方案，但二进制内容作为 base64 内联发送，而不是作为附件分隔 [https://docs.google.com/file/d/0B1M277-_UZ35Si1JWWw5Nm9ia0E/edit?usp=sharing](https://docs.google.com/file/d/0B1M277-_UZ35Si1JWWw5Nm9ia0E/edit?usp=sharing)

# cordova - 使用phonegap在googlemap上显示我的实时位置，工作但更新速度很慢

> ID：15903959
> 
> 赞同：2
> 
> 时间：2013-04-09T13:59:04.540
> 
> 标签：cordova, google-maps-api-3, geolocation, google-maps-markers, real-time-updates

基本上我想在我的位置设置一个标记（使用 navigator.geolocation 检索）并在我移动时更新他的位置以使其显示我的真实位置。这是我的代码。

```
 var map;
  var marker;
  var newLatlng;
  var i = 0;

  //here i create a map centered on 0,0
  function initialize() {
    directionsDisplay = new google.maps.DirectionsRenderer();
    var chicago = new google.maps.LatLng(0,0);
    var mapOptions = {
      zoom: 6,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: chicago
    }
    map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
    directionsDisplay.setMap(map);

    updatePos();

  }

//here I set my marker (if i==0 -> first run)
function updatePos(){

var options = {
    timeout: 500000, enableHighAccuracy: true
};
var myUpdatedPos = navigator.geolocation.watchPosition(onSuccess, onError, options);

function onSuccess(position) {

    if (i==0){
        marker = new google.maps.Marker({
                        position: new google.maps.LatLng(position.coords.latitude, position.coords.longitude),
                        map: map,
                        animation: google.maps.Animation.DROP
                    });
    }
    i++;

    //here I update the position
    newLatlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
    marker.setPosition(newLatlng);
}

// onError Callback receives a PositionError object
//
    function onError(error) {
        alert('code: '    + error.code    + '\n' +
        'message: ' + error.message + '\n');
    }
} 
```

这段代码可以工作，但更新我的位置有点慢，我认为是因为：

```
new google.maps.LatLng(position.coords.latitude, position.coords.longitude); 
```

每次我的位置改变时都会调用它。但我不确定这个构造的真正作用。它是否会调用服务器并且必须等待应答？

有人对加快此代码有什么好的建议吗？

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T14:22:17.120

使用 watchPosition，您可以指定缓存位置的持续时间。尝试使用不太短也不太长的东西。

将更新位置的简单示例：

```
navigator.geolocation.getCurrentPosition(onSuccess, onError, { maximumAge: 3000, timeout: 5000, enableHighAccuracy: true }); 
```

参考：

[http://docs.phonegap.com/en/2.5.0/cordova_geolocation_geolocation.md.html#geolocationOptions](http://docs.phonegap.com/en/2.5.0/cordova_geolocation_geolocation.md.html#geolocationOptions)

# sonarqube - 以兼容模式运行的 Sonar Ant 任务

> ID：15903960
> 
> 赞同：0
> 
> 时间：2013-04-09T13:59:08.417
> 
> 标签：sonarqube

我有以下声纳的蚂蚁项目设置：

```
<!-- list of Sonar project related properties -->
        <property name="sonar.projectName" value="bla bla" />
        <property name="sonar.projectKey" value="com.my.project" />
        <property name="sonar.projectVersion" value="7.3" />
        <property name="sonar.language" value="java" />

        <property name="sonar.modules" value="admin-api" />
        <!-- all of the sub-modules -->
        <property name="admin-api.sonar.projectName" value="admin-api" />
        <property name="admin-api.sonar.projectBaseDir" location="server/admin/admin-api"/>
        <property name="admin-api.sonar.sources" value="src" />
        <property name="admin-api.sonar.binaries" value="build" />

        <sonar:sonar xmlns:sonar="antlib:org.sonar.ant">
            <!-- path to libraries (optional). These libraries are for example used by the Java Findbugs plugin -->
            <libraries>
                <path>
                    <fileset dir="server/third-party-jars" includes="*.jar" />
                </path>
            </libraries>
        </sonar:sonar> 
```

我收到 1 个警告：

```
[sonar:sonar] *****************************************************************************************************************************************
[sonar:sonar] /!\ Sonar Ant Task running in compatibility mode: please refer to the documentation to udpate your scripts to comply with the standards.
[sonar:sonar] ***************************************************************************************************************************************** 
```

还有以下错误：

```
The following mandatory information is missing:
  - task attribute 'key'
  - task attribute 'version' 
```

我知道有迁移到新的更改，`sonar ant task 2.0`但找不到指定更改的任何地方。

另外，我知道现在必须在**父** `build.xml`模块中指定所有模块设置，而不是在子模块 build.xml 文件中指定。那么为什么我会收到错误消息？我按照[https://github.com/SonarSource/sonar-examples/tree/master/projects/multi-module/ant](https://github.com/SonarSource/sonar-examples/tree/master/projects/multi-module/ant)中的示例进行操作。我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:28:50.783

您处于兼容模式，因为您在“sonar:sonar”标签中定义了“libraries”。相反，您应该在此标记之外定义“sonar.libraries”，方法是使用逗号连接所有 JAR 文件路径。

然后多模块机制将按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-22T14:52:54.493

我面临同样的问题。就我而言，build.xml 如下所示：

```
<target depends="build" name="sonar-runner">

    <!-- Define the SonarQube properties -->
    <property name="sonar.host.url" value="http://sonar-server:9000/sonar" />
    <property name="sonar.jdbc.url" value="jdbc:jtds:sqlserver://comp-sql-db-server/sonar;SelectMethod=Cursor" />
    <property name="sonar.jdbc.username" value="XXXXXX" />
    <property name="sonar.jdbc.password" value="*******" />
    <property name="sonar.projectKey" value="asdfsaf:2550" />
    <property name="sonar.projectName" value="Proj 1" />
    <property name="sonar.projectVersion" value="4.0.1" />
    <property name="sonar.language" value="java" />
    <property name="sonar.profile" value="Sonar Way" />
    <property name="sonar.sources" value="src" />
    <property name="sonar.sourceEncoding" value="UTF-8" />

    <!-- run sonar for this project -->
    <taskdef uri="antlib:org.sonar.ant" resource="org/sonar/ant/antlib.xml">
        <!-- Update the following line, or put the "sonar-ant-task-*.jar" file 
            in your "$HOME/.ant/lib" folder -->
        <classpath path="${lib-dist}/sonar/sonar-ant-task-2.1.jar" />
    </taskdef>

    <!-- Execute Sonar -->
    <sonar:sonar />
</target> 
```

这意味着我已经为单个项目设置了 ant，但不知道为什么它需要密钥和版本，即使它在属性中定义，即使我没有在 sonar:sonar 标记内提供任何东西。

谢谢

# python - 在python的不同函数中使用列表

> ID：15903965
> 
> 赞同：0
> 
> 时间：2013-04-09T13:59:26.233
> 
> 标签：python, list, function, global-variables

我想在我正在编写的程序中使用一个列表。基本上，它是一个包含不同人信息的元组列表，每个人的信息（姓名、电话、地址等）都存储在一个元组中。我通过一个初始函数定义了这个列表，但我需要在我的交互函数以及其他函数中使用它。

我的问题是，我是否可以使用此列表而不将其定义为全局变量？

```
def load_friends(filename):
    """imports filename as a list of tuples using the import command"""
    import csv
    with open(filename, 'Ur')as filename:
        friends_list = list(tuple(x) for x in csv.reader(filename, delimiter=','))

def add_friend(friend_info, friends_list):
    """appends the friend_info tupple to the list friends_list"""
    new_list = friends_list.append(friends_info)

def interact():
    """interaction function: accepts user input commands"""
    while True:
        command = raw_input('Command: ') 
```

我还应该提到，有一个命令可以解析使用输入以执行功能。这会影响列表的使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:10:53.877

您可以`list`在调用它的第一个函数中声明并从那里返回它，后面的函数应该接收 this`list`作为参数。

```
def func1():
    my_list=[]
    """Do stuff
    """
    return list

def func2(my_list):
    """Do stuff with my_list
    """
    return

def func3(my_list):
    """Do stuff with my_list
    """
    return

def main():
    """First we retrieve the list from func1, 
    func2/3 get it passed to them as an argument
    """
    foo=func1
    func2(foo)
    func3(foo)

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:03:40.837

您可以执行以下操作：

```
# you can define the list here, it's global but doesn't require the keyword    
my_list_globally = []

def func1(the_list):
    pass

def func2(the_list):
    pass

def func3(the_list):
    pass

# you can use a hub function to pass the list into things that need it
def main():
    my_list = []
    func1(my_list)
    func2(my_list)
    func3(my_list)

if __name__ == "__main__":
    main() 
```

我不太明白你问题的最后一部分，但这两种方法中的一种就是你需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:12:02.600

是的。在函数之间来回传递“朋友列表”作为参数。

`load_friends()`会成为

```
def load_friends(filename):
    import csv

    with open(filename, 'Ur') as f:
        return map(tuple, csv.reader(f, delimiter=",")) 
```

`add_friend()`很接近，但分配给`new_list`是不必要的，因为`list.append()`改变了现有的列表：

```
def add_friend(friend_info, friend_list):
    friend_list.append(friend_info) 
```

就足够了。

`interact()`也会有`friends_list`争论。

```
def interact(friends_list):
    #interaction stuff here... 
```

你可以这样称呼它：

```
interact(load_friends("myfile.csv")) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T16:09:07.057

类对这种事情很有用，并且易于使用：

```
class PersInfo:

    def setName(self, name):
        self._name = name

    def getName(self):
        return self._name

    def setNumber(self, number):
        self._phNumber = number

    def getNumber(self):
        return self._phNumber

    def setAddr(self, address):
        self._address = address

    def getAddr(self)
        return self._address

def main():
    # Read in data from your CSV Here

    infoList = ([])
    for person in person_list: # Assuming person is a tuple here
        foo = PersInfo()
        foo.setName(person[index1])
        foo.setNumber(person[index2])
        foo.setAddr(person[index3])
        infoList.append(foo)

    # To access the info...
    for person in infoList:
        print(person.getName())
        print(person.getNumber())
        print(person.getAddr()) 
```

你最终得到的列表是“全球性的”。它在`main()`函数中，`PersInfo`对象被实例化。这可能比您想要的要多，但从长远来看，这是组织代码并保持可读性的好方法。

此外，您可以`infoList`直接在您正在创建的地方构建我制作的`person_list`.

# c# - 如何在不影响“最后写入时间”的情况下更改文件

> ID：15903972
> 
> 赞同：4
> 
> 时间：2013-04-09T13:59:37.787
> 
> 标签：c#, file-io, timestamp, filesystemwatcher

我想写一些东西来归档，比如

```
using( var fs = File.OpenWrite( file ) )
{
  fs.Write( bytes, 0, bytes.Length );
} 
```

但是，这会改变[“最后写入时间”](http://msdn.microsoft.com/en-us/library/system.io.file.getlastwritetime%28v=vs.71%29.aspx)。我可以稍后重置它，通过使用

```
File.SetLastWriteTime( file, <old last write time> ); 
```

但与此同时，[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)已经触发。

**现在我的问题**是：是否可以在不更改“最后写入时间”的情况下写入文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T14:09:15.327

您可以通过在 Kernel32.dll 中使用 P/Invoke 调用来实现它。

[这个来自 MS TechNet 的 Powershell 脚本](http://gallery.technet.microsoft.com/scriptcenter/Write-or-Clear-a-File-49b5afdf)实现了它，并明确声明 a`FileSystemWatcher`的事件不会被触发。

我简要地查看了脚本，代码非常简单，可以轻松复制到您的 C# 项目中。

宣言：

```
[DllImport("kernel32.dll", SetLastError = true)]
[return: MarshalAs(UnmanagedType.Bool)]
public static extern bool SetFileTime(IntPtr hFile, ref long lpCreationTime, ref long lpLastAccessTime, ref long lpLastWriteTime); 
```

该脚本用于`SetFileTime`在写入之前锁定文件时间。

```
private const int64 fileTimeUnchanged = 0xFFFFFFFF; 
```

此常量作为对 lpCreationTime、lpLastAccessTime 和 lpLastWriteTime 方法的引用传递：

```
// assuming fileStreamHandle is an IntPtr with the handle of the opened filestream
SetFileTime(fileStreamHandle, ref fileTimeUnchanged, ref fileTimeUnchanged, ref fileTimeUnchanged);
// Write to the file and close the stream 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T14:10:59.543

不要认为这是可能的，我也不知道。

还要考虑“最后写入时间”[不是总是更新](https://stackoverflow.com/questions/9992223/file-getlastwritetime-seems-to-be-returning-out-of-date-value)，如果您要根据该参数从文件夹中选择（例如）一些文件或以某种方式依赖该属性，这会导致一些有线结果。因此，它不是您在开发中可以依赖的参数，它只是操作系统架构不可靠。

只需创建一个标志：`boolean`，如果您将其写入并监视到同一个应用程序中，或者创建一个标志`flag`，例如某个特定的命名文件，如果您编写表单并从另一个应用程序监视。

# android - MediaRecorder 和 ParcelFileDescriptor.createPipe()

> ID：15903974
> 
> 赞同：0
> 
> 时间：2013-04-09T13:59:39.980
> 
> 标签：android, audio, pipe, android-mediarecorder, amr

我的任务是长时间录制音频并将三秒钟的文件发送到服务器以识别文本（我使用谷歌）。如果我直接写入文件，那么我需要重新初始化我的记录器以启动新文件，这需要大量时间来启动和停止 mediarecorder。这就是为什么我决定使用 ParcelFileDescriptor.createPipe() 这就是我创建和初始化我的记录器的方式：

```
ParcelFileDescriptor[] fdPair = new ParcelFileDescriptor[0];
fdPair = ParcelFileDescriptor.createPipe();

ParcelFileDescriptor readFD = fdPair[0];
ParcelFileDescriptor writeFD = fdPair[1];
mediaRecorder = new MediaRecorder();
mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.AMR_NB);
mediaRecorder.setAudioSamplingRate(8000);
mediaRecorder.setOutputFile(writeFD.getFileDescriptor());
mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB); 
```

然后，我创建输入流来读取记录数据：

```
final ParcelFileDescriptor.AutoCloseInputStream reader = new ParcelFileDescriptor.AutoCloseInputStream(readFD); 
```

从这个阅读器读取的数据我写入 FileOutputStream。

每 3 秒我创建一个新文件和新的 FileOutputStream，并将数据从以前的文件发送到服务器。

我正在根据 ARM 格式读取字节（文件头，而不是读取每个帧的头位，然后读取整个帧）。

在带有 android 2.3.3 的 Nexus One 上，它运行良好，但在 Galaxy S III、Galaxy Nexus 和 LG p990 上，它会写入设备播放器无法读取且谷歌无法识别的内容。谷歌识别器返回类似“ok ok”或“######”的东西（看起来文件包含某种噪音）。

有谁知道，为什么这对于不同的手机/平台不能以相同的方式工作？

谢谢，

PS 我不能使用 AudioRecord – 谷歌需要 AMR（或 speex，或 flac）

# php - 超过 30 秒的最大执行时间

> ID：15903975
> 
> 赞同：23
> 
> 时间：2013-04-09T13:59:41.500
> 
> 标签：php, mysql, .htaccess

请帮忙！我一直在从数据库中检索系统中的列表。但在出现此错误之前，它有数千个列表：

> 致命错误：超过 30 秒的最大执行时间

此代码来自我的 htaccess

```
php_value max_execution_time 3000
php_value upload_max_filesize 512M
php_value post_max_size 512M
php_value memory_limit 256M
php_value set_time_limit 0 
```

我该如何解决这个问题？我正在使用 PHP 和 MYSQL。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-09T14:02:18.207

您可以像这样延长最大执行时间：

```
ini_set('max_execution_time', 0); 
```

否则编辑您的 htaccess

```
php_value max_execution_time 0 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-09T14:02:02.047

将此添加到您的 php 文件顶部

```
ini_set("max_execution_time", 0); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-04T14:27:17.247

如果使用命令行界面 (CLI) 运行 php，请使用：

```
ini_set('max_execution_time', -1); 
```

否则运行：

```
ini_set('max_execution_time', 0); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-03T01:55:24.193

我们在 wordpress 网站中遇到的同样的错误

我们在 .htaccess 中进行了更改，但没有成功。

然后我们创建了一个 php.ini 文件，将这段代码嵌入并上传到根目录

```
max_execution_time = 60 
```

它解决了这个问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T14:18:21.077

在文件顶部设置超时：

```
set_time_limit(0); 
```

# sql-server-2008-r2 - 限制 Windows Server 2008 R2 可用的处理器数量

> ID：15903978
> 
> 赞同：2
> 
> 时间：2013-04-09T13:59:45.723
> 
> 标签：sql-server-2008-r2, windows-server-2008-r2, cpu-usage, performance-testing

我正在设置一个测试环境，但我需要缩减我们用于 SQL 盒的硬件，该盒运行 Windows Server 2008 R2 SP 1 和 SQL 2008。我注意到 MSConfig.exe 有用于限制可用 CPU 数量的选项，但我无法在 MSDN 上找到有关其工作原理的任何文档。

我也没有看到任何方法可以使用 Microsoft 放入的 BCDEdit 通过命令行更改此设置。

有人知道这方面的文件吗？我正在尝试决定是在启动时限制处理器的使用是最好的测试，还是在 SQL 本身中限制处理器。我倾向于启动时间，因为我试图准确地模拟一个低功耗的物理盒子，如果我在数据库级别限制功率，额外的功率可能会出现在其他区域。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T22:19:37.510

在多核、超线程 CPU 的时代，“处理器”现在是一个模棱两可的术语。处理器是指线程（来自超线程）、内核还是插槽（物理 CPU）。

Windows 将逻辑处理器 (LP) 识别为基本计算平台 - 为内核中的每个超线程提供一个 LP，然后乘以每个内核，最后乘以插槽数。

在 Windows 中减少 LP 计数的最简单方法是使用 /NUMPROC 选项。在此示例中，itc 创建的最大处理器数为 8。

> 1.  备份 bcdedit /export c:\Backup\bcd.bak
> 2.  当前条目列表 bcdedit /v
> 3.  现有配置的副本 bcdedit /copy {current} /d "Windows 2008 R2 with NumProc" 当前是一个“众所周知的”标识符。这也会返回创建的 Id。这样就可以直接使用了
> 4.  条目列表 bcdedit /v
> 5.  向新条目添加参数 设置最大处理器数
>     bcdedit /set {new_ID} NUMPROC 8
> 6.  更改默认条目 bcdedit /default {new_ID}

但是这种策略的危险在于，例如在启用了超线程的 4 核系统上，然后只使用一个处理器（插槽）。由于前 8 个 LP (0..7) 将是第一个处理器上的超线程内核。因此，您实际上并不是在模拟一个 8 路系统 - 而是一个启用了超线程的 1 路 - 4 核系统。

如果这不适合您的模型，其他选项是

*   在 BIOS 中禁用超线程 - 这会减少每个内核的 LP 数量，从而有助于将负载分配到内核和插槽上。
*   系统 BIOS 是否支持减少每个处理器的核心计数器？如果是这样，这将有助于通过套接字分配负载。
*   在虚拟环境中构建系统并从该角度限制物理资源。

如果您在 Windows 下处理超过 64 个逻辑处理器，那么这将引入处理器组并添加另一层选项。

# javascript - Javascript 数组丢失数据

> ID：15903979
> 
> 赞同：0
> 
> 时间：2013-04-09T13:59:47.747
> 
> 标签：javascript, jquery, ajax, arrays

我无法在 ajax 调用中将我的信息放入数组中，如果我在将信息插入数组后立即发出警报，它工作正常，但如果我在最后这样做，它会发出未识别的警报。我确保书籍是在外面宣布的，所以它不会干扰。

```
 var books = [];
        $.ajax({
               url: 'getFolderContents.php',
               dataType: 'json',
               success: function (data)
               {       
                    for(var i=0;i<data.length;i++) {
                        var amm = 0;
                        if(data[i].indexOf(".epub") !== -1) {
                            //$('#bTable').append("<td><a id = '" + data[i] + "' href = 'book.html'><img src = 'book.png' width = '100px'/><br/>" + data[i] + "</a></td>");
                            books.push(data[i]);
                            //alert(books[0]) Works if I call it from here, but not at the end.
                        }
                    }
               },
               error: function()
               {
                alert("error");
               }
        });
        alert(books[0]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:02:20.440

您的

```
alert(books[0]); 
```

将在 Ajax 调用运行时执行，因此在执行时还没有任何元素。Ajax 是异步的——当您向 PHP 脚本发出请求时，您的脚本会继续执行。

将所有操作都放入`books`您的`success`函数中。

另一个提示：从 jQuery 版本 1.8 开始，您不能再使用该参数`async: false`来创建同步的“A”jax 调用。您必须使用回调函数。查看[$.ajax 的文档](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T14:02:21.050

您的阵列没有丢失任何数据；数据还没有放在那里。“A”代表“异步”，这意味着在您调用警报时您的成功回调尚未运行。

将警报放在回调中：

```
 success: function (data)
           {       
                for(var i=0;i<data.length;i++) {
                    var amm = 0;
                    if(data[i].indexOf(".epub") !== -1) {
                        //$('#bTable').append("<td><a id = '" + data[i] + "' href = 'book.html'><img src = 'book.png' width = '100px'/><br/>" + data[i] + "</a></td>");
                        books.push(data[i]);
                        //alert(books[0]) Works if I call it from here, but not at the end.
                    }
                }
                alert(books[0]);
           }, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T14:20:10.040

在调用成功函数之前，您的警报正在执行。也许使用 Promise 看到相同的代码会让事情变得更清楚。

```
$.ajax( url: 'getFolderContents.php',  dataType: "json"  )
 //the then function's first argument is the success handler  
  .then(function( data ) {

       for(var i=0;i<data.length;i++) {
                        var amm = 0;
                        if(data[i].indexOf(".epub") !== -1) {
                            //$('#bTable').append("<td><a id = '" + data[i] + "' href =                     'book.html'><img src = 'book.png' width = '100px'/><br/>" + data[i] + "</a></td>");
                            books.push(data[i]);
                            //alert(books[0]) Works if I call it from here, but not at the end.
                        }

 alert(books[0]
                    });

}); 
```

我总觉得这种语法让异步的东西更有意义。否则，此代码的功能与 Blazemonger 的正确答案完全相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:01:22.747

您的 AJAX 调用是异步的，这就是它未定义的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T14:02:40.947

最后的警报发生在 ajax 成功回调之前，因为 ajax 是异步的。

# html - CSS：透明指针，就像 App Store 上的那个

> ID：15903982
> 
> 赞同：0
> 
> 时间：2013-04-09T14:00:03.727
> 
> 标签：html, css, transparency

也许我是愚蠢的atm，但我不知道该怎么做：

[http://s24.postimg.org/k9fl1y2s5/arrow.png](http://s24.postimg.org/k9fl1y2s5/arrow.png)

如您所见，导航元素内的指针/箭头是透明的，但显示的是内容而不是其父导航元素。

这是我的 HTML：

```
<nav>
   ...
   <div id="pointer></div> <!-- this is the arrow -->
</nav>
<div id="content">...</div> 
```

我怎样才能做到这一点？呃，希望你明白我的意思...... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:08:11.603

好吧，不确定我是否正确，但是：

我很确定指针/箭头是一个单独的 img 文件，在以下情况下加载和显示：鼠标悬停、活动（例如）。

这意味着，您创建一个新的 .png 文件，使背景透明并根据需要绘制它。您没有绘制的所有区域都是透明的。

让我们让它更容易理解：

您的导航未激活，您的鼠标也未悬停在其上。然后你应该看到标准加载的 img（没有指针/箭头）。

--> 我们将鼠标悬停在它上面或单击它：

您的导航现在处于活动状态，并显示新图像（例如 .png 文件）而不是旧图像。此图像绘制的某些区域未触及，因此它们是透明的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:12:23.993

您正在查看 CSS3 技术的现代应用程序，如下所示：

[http://nicolasgallagher.com/pure-css-speech-bubbles/demo/](http://nicolasgallagher.com/pure-css-speech-bubbles/demo/)

在您的示例中，边框颜色已设为半透明，`rgba`用于指定颜色。

**但是，**该参考资料不会告诉您如何准确构建屏幕截图所显示的内容。它只会解释如何创建三角形图案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:40:00.113

好的，这需要做一些事情，但我想我有一个开始：

[http://jsfiddle.net/uLDzA/2/](http://jsfiddle.net/uLDzA/2/)

这里的主要问题是您不能只将 ARROW 设置为透明，因为菜单 div 将具有某种纯色，不会让透明渗透到主背景。

我通过将菜单项分解为顶部和底部来解决这个问题。顶部有文本，底部是这样构造的，以便我们“模拟”中间部分的三角形并给它一个透明的背景。

基本上，通过像 CSS 拼图一样将箭头拼凑在一起，将箭头构建到菜单项本身中。

```
<div class="con">
    <div class="item">
        <div class="item_top">
            top
        </div> 
        <div class="item_btm">
            <div class="item_btm_lft">&nbsp;</div>
            <div class="item_btm_ptr">&nbsp;</div>
            <div class="item_btm_rgt">&nbsp;</div>                 
        </div>
    </div>
</div>

.con {
    width:100px;
    height:40px;
    padding:20px;
    background:url('http://placekitten.com/g/100/100');  
}

.item {
    width:100px;
    background:transparent;
}

.item_top {
    background:orange;
    text-align:center;
    color:#fff
}

.item_btm {
    width:100%;
    overflow:hidden;
}

.item_btm_lft {
    width:40px;
    float:left;
    background:orange;
    border-bottom:2px solid orange;

}

.item_btm_ptr {
    width: 0px;
    height: 0px;
    float:left;
    border-style: solid;
    border-width: 0 10px 20px 10px;
    border-color: transparent orange transparent orange;
}

.item_btm_rgt {
    width:40px;
    float:left;
    background:orange;
    border-bottom:2px solid orange;
} 
```

# excel - 通过分组数据减少行数

> ID：15903983
> 
> 赞同：0
> 
> 时间：2013-04-09T14:00:03.767
> 
> 标签：excel, vba

我有一组定义一组业务规则的电子表格。这些业务规则然后由我们的系统处理。

创建电子表格的用户天真地这样做，我发现通过跨行分解数据 - 从而减少规则的数量 - 大大提高了系统的性能。

其中一个“天真的”结构化电子表格可能如下所示：

```
+-----------+------------+------------+------------+------------+--------+
| Rule Name | Criteron 1 | Criteron 2 | Criteron 3 | Criteron 4 | Accept |
+-----------+------------+------------+------------+------------+--------+
| Rule 1    |      A     |      B     |      C     |            |  Yes   |
| Rule 2    |      A     |      C     |      C     |            |  Yes   |
| Rule 3    |      A     |      D     |      C     |            |  Yes   |
| Rule 4    |      A     |      E     |      C     |            |  Yes   |
| Rule 5    |      A     |      F     |      C     |            |  Yes   |
| Rule 6    |      A     |      B     |      D     |            |  Yes   |
| Rule 7    |      A     |      C     |      D     |            |  Yes   |
| Rule 8    |      A     |      D     |      D     |            |  Yes   |
| Rule 9    |      A     |      E     |      D     |            |  Yes   |
| Rule 10   |      A     |      F     |      D     |            |  Yes   |
| Rule 11   |      A     |      B     |      E     |            |  Yes   |
| Rule 12   |      A     |      C     |      E     |            |  Yes   |
| Rule 13   |      A     |      D     |      E     |            |  Yes   |
| Rule 14   |      A     |      E     |      E     |            |  Yes   |
| Rule 15   |      A     |      F     |      E     |            |  Yes   |
| Rule 16   |            |            |            |     G      |  Yes   |
| Rule 17   |            |            |            |     H      |  Yes   |
| Rule 18   |            |            |            |     I      |  Yes   |
| Rule 19   |            |            |            |     J      |  Yes   |
| Rule 20   |            |            |            |     K      |  Yes   |
| Rule 21   |            |            |            |     L      |  Yes   |
| Rule 22   |            |            |            |     M      |  Yes   |
| Rule 23   |            |            |            |     N      |  No    |
| Rule 24   |            |            |            |     O      |  No    |
| Rule 25   |            |            |            |     P      |  No    |
| Rule 26   |            |            |            |     Q      |  No    |
| Rule 27   |            |            |            |     R      |  No    |
| Rule 28   |            |            |            |     S      |  No    |
| Rule 29   |      A     |      J     |      F     |            |  No    |
| Rule 30   |      A     |      K     |      F     |            |  No    |
+-----------+------------+------------+------------+------------+--------+ 
```

例如，规则 1 将被评估为：

```
IF (Criterion 1 == A) AND (Criterion 2 == B) AND (Criterion 3 == C) THEN Accept 
```

稍加思考并假设我们可以在列中使用 OR 条件，上面的内容可以简化为：

```
+-----------+------------+------------+------------+-------------+--------+
| Rule Name | Criteron 1 | Criteron 2 | Criteron 3 | Criteron 4  | Accept |
+-----------+------------+------------+------------+-------------+--------+
| Rule 1    |      A     |  B,C,D,E,F |    C,D,E   |             |  Yes   |
| Rule 2    |            |            |            |G,H,I,J,K,L,M|  Yes   |
| Rule 3    |            |            |            |N,O,P,Q,R,S  |  No    |
| Rule 4    |      A     |     J,K    |      F     |             |  No    |
+-----------+------------+------------+------------+-------------+--------+ 
```

规则 1 现在评估如下：

```
IF (Criterion 1 == A) AND 
   (Criterion 2 == B OR Criterion 2 == C OR...) AND 
   (Criterion 3 == C OR Criterion 3 == D OR...) THEN Accept 
```

现在，我已经手动完成了。我想知道的是：Excel 是否具有内置功能来为我进行这种分组。如果没有，谁能指出我的算法方向，这将帮助我有效地实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:50:41.717

这看起来像这样一种情况，您可以使用 SQL 查询中的 GROUP BY HAVING 将使用 ADO 和 OLE DB 的表查询到 ADO 记录集中，然后使用**CopyFromRecordset将（分组的）结果转储到新工作表中**

或者，也许是数据透视表？

# haskell - haskell Network.Curl 在代理后面访问 https

> ID：15903986
> 
> 赞同：3
> 
> 时间：2013-04-09T14:00:06.257
> 
> 标签：haskell, https, proxy, libcurl

我试图用来`Network.Curl`访问 http 代理后面的 https 资源，但没有运气。

我配置了以下内容：

```
export http_proxy=myhost:post
export https_proxy=myhost:port 
```

我可以验证 curl 本身是否能够通过代理访问 https 资源（没有其他方法可以访问它）。

```
curl https://www.google.co.uk 
```

~/.curlrc 中没有任何内容。

我可以通过 Curl 绑定访问 http 资源：

```
ghci> import Network.Curl
ghci> curlGetString "http://www.google.co.uk" [] 
```

返回 google 主页的来源。但是，如果我将其更改为 https，则会收到错误消息：

```
ghci> curlGetString "https://www.google.co.uk" []
(CurlHttpReturnedError,"") 
```

通过 Curl.Opts 手动指定代理似乎没有效果。如何说服`Network.Curl`使用 https 代理？

编辑：我现在发现，如果我手动指定“CurlProxyUserPwd”，它就可以工作。但是，命令行上的 curl 似乎不需要这样做，所以现在的问题是“我如何设法不需要用户名/密码”？

# java - 设计具有枚举依赖的类的最佳方法

> ID：15903989
> 
> 赞同：3
> 
> 时间：2013-04-09T14:00:18.027
> 
> 标签：java, oop, class, object, enums

设计这个类的最好方法是什么。
标志类是一个简单的枚举

```
public enum Flag { ... };

public class Example {
  private final Set<Flag> flags;
  pubilc Example(Set<Flag> flags) {
    this.flags = flags;
  }

 public Set<Flag> getFlags() {
   return ImmutableSet.copyOf(flags);
 }

 public boolean isValid() {
   return flags.contains(Flag.VALID);
 }

 public boolean isRequired() { ... };
} 
```

一些用于创建示例对象的工厂代码。

```
Set<Flag> flags = EnumSet.allOf(Flag.class);
Example ex = new Example(flags); 
```

以下哪一项是更好的做法：

方法1：然后在客户端代码中检查

```
if (ex.isValid()) { ... }; 
```

我在这种方法中看到的缺陷是，如果我添加一个新的 Flag，我还必须在 Example 类中创建一个新的 IsX 方法，这违反了打开关闭原则？

方法 2：或者避免示例类和客户端中的所有 isX 方法，只要有这个：

```
Set<Flag> set = ex.getFlags();
if (set.contains(Flag.VALID)) { ... } 
```

这中的缺陷是所有额外的样板代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:38:37.687

为什么不做类似的事情：

```
public boolean isFlagged(Flag flag) {
    return flags.contains(flag);
} 
```

然后你的 if-s 看起来像：

```
if(ex.isFlagged(Flag.Valid)) 
```

# git - GIT：在Gerrit中将两个分支合并为一个没有依赖关系的新分支

> ID：15903990
> 
> 赞同：1
> 
> 时间：2013-04-09T14:00:18.560
> 
> 标签：git, merge, branch, gerrit

我的本地仓库中有两个分支：**branch_1**和**branch_2**，每个都基于相同的提交**A**并包含多个提交（相应的头是**A1**和**A2**）。

我将**A1**和**A2**都推送到 Gerrit**主**分支，并进行了两个单独的评论。然后，我抛弃了他们。

现在我需要基于**A创建一个新的本地分支****branch_3**并包含从**A1**和**A2**到**A3**的更改。我做了：

 ******`git checkout -b branch_3 origin/master`

`git merge branch_1 branch_2`

我有一个我需要的提交**A3**并将其推送给 Gerrit。创建了第三次审查，但它依赖于之前两次放弃的提交，因此我无法提交。

有没有办法将两个分支合并到一个提交**A3**中，以便它仅依赖于**A**而不是**A1**和**A2**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:21:41.643

方法 1：尝试将包含 A3 的分支[变基到](https://www.kernel.org/pub/software/scm/git/docs/git-rebase.html)`origin/master`

方法2：签出一个干净的分支，cherry-pick commit A3，然后再次推送：

`git checkout -b feature --track origin/master`

`git cherry-pick A3`

`git push origin HEAD:refs/for/master`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T07:05:07.393

对于每个必要的提交，应使用选项“-n”进行挑选：

```
git checkout A
git cherry-pick -n A1
git cherry-pick -n A2
git commit 
```

新创建的提交 A3 是预期的。******

# javascript - 如何使用 javascript 获取 DIV 的内部文本？

> ID：15903993
> 
> 赞同：15
> 
> 时间：2013-04-09T14:00:22.720
> 
> 标签：javascript, html

如何使用 java 脚本获取 DIV 控制器的内部文本？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-09T14:06:53.857

简短的回答：

```
document.getElementById("id-of-div").innerText 
```

鉴于您已经用 asp.net-mvc-3 标记了问题，长答案是它将在浏览器中运行，而不是在服务器（运行 ASP.NET 的地方）上。在不发送请求的情况下，无法立即将内容从浏览器获取到服务器。我猜您可能想从页面对新的控制器操作进行 ajax 调用，但这取决于文本何时更改，以及您想用它做什么。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-09T14:06:45.877

假设你有一个 div 声明为：

```
<div id="someDiv">
  some content goes here
</div> 
```

您可以通过以下方式获得其价值：

```
// javascript
document.getElementById("someDiv").innerHTML
// jquery
$("#someDiv").html() 
```

# r - *** 检测到缓冲区溢出 ***: /usr/local/lib64/R/bin/exec/R 终止

> ID：15903995
> 
> 赞同：0
> 
> 时间：2013-04-09T14:00:23.603
> 
> 标签：r

使用 Ubuntu-12.04,R-2.15.2

我在 R 提示符下输入命令`as.Date("2013-04-12")`并得到如下错误，

即使我尝试安装软件包`R CMD INSTALL twitteR_1.1.4.tar.gz`，也出现错误

```
*** buffer overflow detected ***: /usr/local/lib64/R/bin/exec/R terminated
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(__fortify_fail+0x37)[0x7fa9b2de7807]
/lib/x86_64-linux-gnu/libc.so.6(+0x109700)[0x7fa9b2de6700]
/lib/x86_64-linux-gnu/libc.so.6(+0x10ba1a)[0x7fa9b2de8a1a]
/usr/local/lib64/R/lib/libR.so(+0x97149)[0x7fa9b3350149]
/usr/local/lib64/R/lib/libR.so(+0x9921a)[0x7fa9b335221a]
/usr/local/lib64/R/lib/libR.so(+0xd7b7e)[0x7fa9b3390b7e]
/usr/local/lib64/R/lib/libR.so(Rf_eval+0x17a)[0x7fa9b339b9fa]
/usr/local/lib64/R/lib/libR.so(Rf_applyClosure+0x340)[0x7fa9b33a0210]
/usr/local/lib64/R/lib/libR.so(+0xdec04)[0x7fa9b3397c04]
/usr/local/lib64/R/lib/libR.so(Rf_eval+0x17a)[0x7fa9b339b9fa]
/usr/local/lib64/R/lib/libR.so(Rf_applyClosure+0x340)[0x7fa9b33a0210]
/usr/local/lib64/R/lib/libR.so(+0xdec04)[0x7fa9b3397c04] 
```

# php - PHP - 手动启动 cron 作业/让服务器代替用户工作

> ID：15903996
> 
> 赞同：1
> 
> 时间：2013-04-09T14:00:29.187
> 
> 标签：php, cron, jobs

我有一个非常慢的脚本，需要经常执行（每分钟大约 30 次），因此用户无法执行它并且 cron 作业最多每分钟运行一次。

那么，有没有办法（使用 PHP）让服务器而不是用户工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:07:01.097

这很简单：使用标志文件

无需用户交互即可运行的脚本（可能由 cron 或 shell 启动，包括 PHP shell 执行）：

```
<?php
while (true) {
  while (file_exists('/path/to/flagfile')) sleep(1); //Can even use microsleep
  include ('/path/to/worker/script');
  touch('/path/to/flagfile');
}
?> 
```

触发它的脚本（通过用户交互从网络服务器开始）

```
<?php
@unlink('/path/to/flagfile');
echo "Processing triggered!";
?> 
```

# java - 何时使用数据库连接池

> ID：15903997
> 
> 赞同：1
> 
> 时间：2013-04-09T14:00:29.963
> 
> 标签：java, database-connection, connection-pooling

我正在使用 Java GUI，我经常需要连接到数据库，但我只想使用一次连接语句，而不是每次使用它时都编写整个内容。我想我可能会在整个系统中连接大约 20 次。所以我想知道在什么情况下最好使用连接池？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T14:08:07.153

当有多个线程需要同时访问数据库时（例如 Web 应用程序），通常会使用连接池，每个线程都会从池中检索一个连接并在完成执行时返回它。

**通常**，GUI 应用程序不需要保证连接池的并发 DB 访问量，并且在应用程序启动时初始化的单个（静态）连接通常就足够了。

我希望这能为您指明正确的方向；如果不了解您正在创建的应用程序的性质，就很难做出更明智的决定！

# sql - 变量和表单请求 - WebMatrix

> ID：15903999
> 
> 赞同：0
> 
> 时间：2013-04-09T14:00:31.603
> 
> 标签：sql, razor, webmatrix

我正在尝试将表单中的信息添加到数据库中与登录用户相对应的行中：

更新：这是工作代码

```
@{
Layout = "~/_template1.cshtml";

var db = Database.Open("stayinflorida");
var CurrentUser = WebSecurity.CurrentUserId;
var userdetails = ("SELECT * from UserProfile WHERE UserId=@0");
var quserdetails = db.QuerySingle(userdetails, CurrentUser);

if (IsPost){
var updateuserdetails = "UPDATE UserProfile SET FirstName = @0, LastName = @1 WHERE UserID=@2";
db.Execute(updateuserdetails, Request["FirstName"], Request["LastName"]);
Response.Redirect("~/Account/MyDetails1.cshtml");
}
} 
```

我如何更改它，而不是用户 userId='8'，我实际上使用登录用户的用户 ID？我通常会使用@0 来执行此操作。但这已经被用来从表单中请求数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:17:02.670

这个怎么样：

```
var db = Database.Open("stayinflorida");
var TheUser = WebSecurity.CurrentUserId;
var userdetails = ("SELECT * from UserProfile WHERE UserId=@0");
var data = db.Query(sqlQ, TheUser); 
```

编辑：

> 每个 SQL 语句都有自己的一组变量，称为 @0、@1、@2 等等。它们仅针对那一行存在，因此您可以一遍又一遍地使用该概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-26T12:59:02.790

您的代码看起来不错，但您错过了一个条目 userid = @2

```
var updateuserdetails = "UPDATE UserProfile SET FirstName = @0, LastName = @1 WHERE UserID=@2";
db.Execute(updateuserdetails, Request["FirstName"], Request["LastName"], WebSecurity.CurrentUserId); 
```

或者

```
var updateuserdetails = "UPDATE UserProfile SET FirstName = @0, LastName = @1 WHERE UserID=@2";
db.Execute(updateuserdetails, Request["FirstName"], Request["LastName"], CurrentUser ); 
```

必须输入每个参数。@0,@1,@2 代表 Request["FirstName"], Request["LastName"], CurrentUser