# StackOverflow 问答 16200000-16200999

# css - 内容 div 100% 高度延伸太远

> ID：16200000
> 
> 赞同：0
> 
> 时间：2013-04-24T18:55:17.140
> 
> 标签：css, html

当内容本身没有时，我在让我的内容容器 div 正确扩展到页面底部时遇到了一些麻烦。如果内容很短并且没有填满页面，则容器仍会超出页面底部。

这是结构：

```
<div id="container">

    <div id="logo"></div>

    <div class="clear"></div>

<div class="spacer"></div>

<div class="content">

        <div class="post">

        <div class="right"></div>
    </div>

    <div id="centerit">/div>    
</div></body></html> 
```

这是CSS：

```
body{background:url(bg.jpg);font-family:verdana, helvetica, sans-serif;font-size:12px;line-height:18px;color:#b3b3b3;height:100%;min-height:100%;}

    a{color:#fff;text-decoration:none;font-weight:bold;outline:none;}

    /* a:hover{color:#289bc6;} */

html { height: 100%; }
    #container{width:1200px;margin:auto;height:100%;position:relative;}

    #logo{font-size:18px;line-height:37px;color:#222;float:left;display:block;clear:both;}

    #nav{margin:auto;background:#000;padding;2px 800px 0px 0px;width:800px;}

    #nav li{display:inline;background:#000;}

    #nav li a{padding:9px 40px 10px 3px;font-weight:normal;color:#fff;background:#000;text-transform:uppercase;line-height:40px;}

#nav li a:hover, #nav li .active, #nav .current_page_item a, #nav li a.current_page_item{background:#fff;color:#000;}

    /* #nav li a:active{background:#289bc6;} */

    .clear{clear:both;}

    .spacer{height:10px;}

    .content{margin:auto;width:800px;height:100%;display:block;clear:both;position:relative;}

.sidebar{margin:auto;padding:10px;width:780px;background:#000;}

.sidebar h3{padding:5px 5px 4px 5px;background:#fff;color:#000;text-transform:uppercase;font-weight:normal;}

    #categories{border-bottom:1px solid #fff;line-height:21px;}

    #categories li{display:inline;margin:0 5px 0 0;}

    #categories li a{padding:5px;color:#fff;text-transform:uppercase;font-weight:normal;}

    #categories li a:hover, #categories li b{padding:5px 5px 4px 5px;background:#fff;color:#000;text-transform:uppercase;font-weight:normal;}

    /* #categories li a:active, #categories li b:hover, #categories li b:active{background:#289bc6;} */

                .post{background:#000;position:relative;clear:both;display:block;clear:both;width:800px;min-height:100%;margin-bottom: 30px;}

    .post .left{width:100px;float:left;margin-top:-10px;height:100%;}

    .post .left h5{font-weight:normal;line-height:72px;font-size:72px;margin-top:10px;}

    .post .left b{font-weight:normal;font-size:25px;line-height:25px;margin-top:-200px;}

    .post .right h2 a{text-transform:uppercase;padding:3px;font-weight:normal;font-size:30px;line-height:32px;}
    .post-390 .right h2 a {display: none;}

    .post .right h2 a:hover{text-decoration:underline;}

    .post .right{width:760px;height:90%;float:left;margin-left:10px;}

    .sidebar ul{line-height:21px;}

    .sidebar ul li{display:inline;margin:0 5px 0 0;}

    .sidebar ul li a{padding:5px;color:#fff;text-transform:uppercase;font-weight:normal;display:block;}

    .sidebar ul li a:hover{padding:5px;background:#fff;color:#000;text-transform:uppercase;font-weight:normal;}

    .footerul{line-height:21px;background:#000;}

    .footerul li{display:inline;margin:0 5px 0 0;}

    .footerul li a{padding:5px;color:#fff;text-transform:uppercase;font-weight:normal;display:block;}

    .footerul li a:hover, .footerul li b{padding:5px 5px 4px 5px;background:#fff;color:#000;text-transform:uppercase;font-weight:normal;}

    /* .footerul li a:active, .footerul li b:hover, .footerul li b:active{background:#289bc6;} */

    /* .footerul li b{border-bottom:1px solid #fff;width:100%;}*/

    #fleft{width:100%;float:left;}

    #fright{width:48%;float:right;}

    #centerit{text-align:center;background:#000;padding:10px 0px 10px 0px;position:fixed;bottom:0;width:800px;}

.commentlist li{padding:10px;background:#eee;}

.commentlist li.alt{background:#ddd;}

.alignright {float:right;}

.alignleft {float:left;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:37:56.060

调整并将其添加到组合中：

```
html { height: 100%; min-height: 100; /* min-height is for FF */ }
#content { height: -webkit-calc-height(100% - 37px); } /* be sure to add all vendor prefixes, also change 37px to the correct height of elements above the #content */ 
```

# c# - 如何设置 asp:FileUpload 按钮的样式？

> ID：16200001
> 
> 赞同：0
> 
> 时间：2013-04-24T18:55:23.853
> 
> 标签：c#, asp.net, web-applications, file-upload

我有一种情况，需要将 Browse/SelectFile/etc 按钮的样式设置为与我们在其他任何地方的常规样式相匹配。

以前我试图只隐藏默认控件并公开我自己的浏览和保存按钮，但我发现`style="visibility:hidden;width:0px"`在 FileUpload 控件样式中这样做会破坏 IE 的控件。

那么如何设置股票 asp:FileUpload 按钮的样式呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:01:02.920

如果你尝试了 style="display:none;" 反而？

# java - Eclipse - 创建自定义“运行”

> ID：16200009
> 
> 赞同：0
> 
> 时间：2013-04-24T18:55:54.377
> 
> 标签：java, python, eclipse

我有一个关于 Eclipse 的运行菜单的问题。

我的问题：
我正在编写一个插件，该插件只能在我在命令行中键入一些命令（ei 准备所有文件，创建 jar 文件，将其复制到特定路径）并按下程序中的某个键时启动。我无法将它作为普通的 java 应用程序运行。
所以，我写了一个 python 脚本来为我做这件事。（我选择 python 作为脚本语言是因为它是跨平台的。我可以在 java 中完成，但 JVM 需要太多时间来启动）。
但是，这种方式（切换到命令行、按箭头键、按 Enter）需要太多时间。就像我习惯于使用其他 Java 应用程序一样，它只想在 eclipse 中按下运行按钮。

我还想要什么：
我只想在 eclipse 中按下运行按钮来启动那个 python 脚本。控制台的输出应该是python脚本的输出。一旦 python 脚本结束运行，应该立即终止运行。

我不打算编写一个“Eclipse 插件”来实现它。我只想要一种最多需要 5 分钟来配置我的“运行脚本”的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T19:03:48.933

![面板截图](https://i.stack.imgur.com/WOYHP.png) 在您的面板上找到这个小图标。您可以在那里添加和配置任何外部脚本以运行

# java - 哪种方法更有效 String.equals(String s) 或 String.contains(String s)

> ID：16200011
> 
> 赞同：-3
> 
> 时间：2013-04-24T18:55:55.913
> 
> 标签：java

例如，如果我有以下内容：

```
String s = "Alexander"; 
```

在这种情况下更有效，检查：

```
if(s.contains("Alexander"))
return true; 
```

或者

```
if(s.equals("Alexander"))
return true; 
```

请注意，这只是一个基本示例，我只需要了解方法的根源。哪个更有效或更快？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T19:07:06.887

只是为了笔记;-)

```
String string = "Alex";
long now = System.currentTimeMillis();
for (int n = 0; n < 100000000; n++) if (string.contains("Alexander")) ;
System.out.println("Time: " + (System.currentTimeMillis() -now));

now = System.currentTimeMillis();
for (int  n = 0; n < 100000000; n++) if (string.equals("Alexander")) ;
System.out.println("Time: " + (System.currentTimeMillis() -now)); 
```

结果：

```
Time: 1720
Time: 756 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T19:01:07.143

这个：

```
return s.equals("Alexander"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T19:09:48.907

它们是两种不同的方法，所以我不确定比较它们是否非常现实。然而，正如已经指出的那样，实际*搜索*字符串以查找目标值`contains()`的额外步骤，而只是检查两个字符串是否相同。*`equals()`*

 ** * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T19:00:45.863

`equals`更快，因为它只需要比较从两个字符串的开头开始的字符串，而`contains`必须循环`s`检查是否`"Alexander"`开始和结束在`s`.

但是忽略这个...

```
if (s.equals("Alexander")) 
```

会更有效率，因为否则你必须做

```
if (s.contains("Alexander") && "Alexander".contains(s)) 
```

以保证平等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T19:01:29.503

**Equals**更有效，它只会检查字符串是否匹配。 **包含**将在字符串中搜索该文本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-24T19:01:51.860

如果您查看 java String.java 的代码，您会发现它`Equals`比 更有效`Contains`，因为第一个代码首先检查字符串的大小，然后逐个比较每个字符。另一方面，`Contains`调用方法`indexOf`，该方法搜索字符串之间的特定重合。

两种方法的目的完全不同。您应该使用`equals`来测试字符串之间的相等性。*

# python - 列表查找性能 - 返回列表的最后一个元素是否必须扫描整个列表？

> ID：16200014
> 
> 赞同：2
> 
> 时间：2013-04-24T18:56:07.913
> 
> 标签：python, list

假设我有一本字典：

```
myDict = {
    'title': 'a nice title',
    'nice_list': [1,2,3,4,5,6,6,7,...,99999],
    'nice_lists_last_item': 99999,
} 
```

`nice_list`如果它大于最终项目，我只想附加一个项目。

什么更快：

1.  使用：`if new_element > nice_list[-1]`

或者

1.  使用：`if new_element > nice_lists_last_item`

方法 1 是否必须扫描整个列表（和/或`nice_list`每次都将所有列表放入内存）才能找到该项目？哪个更快？（记住我打算做几十亿次这样的比较？）

方法 2 会将最后一个元素存储为它自己独特的 dict 条目，这样更快吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T19:08:05.923

如有疑问，请测试：

```
>>> %timeit if 1 > myDict['nice_list'][-1]: 0
10000000 loops, best of 3: 110 ns per loop
>>> %timeit if 1 > myDict['nice_lists_last_item']: 0
10000000 loops, best of 3: 68.8 ns per loop
>>> nice_list = myDict['nice_list']
>>> %timeit if 1 > nice_list[-1]: 0
10000000 loops, best of 3: 62.6 ns per loop
>>> nice_lists_last_item = myDict['nice_lists_last_item']
>>> %timeit if 1 > nice_lists_last_item: 0                      
10000000 loops, best of 3: 43.4 ns per loop 
```

如您所见，直接访问字典值比从字典中访问列表然后访问其最后一个值要快。但是直接访问列表的最后一个值更快。这应该不足为奇；Python 列表知道自己的长度，并在内存中作为数组实现，因此查找最后一项就像从长度中减去 1 并进行指针运算一样简单。由于碰撞检测的开销，访问字典键有点慢；但它只慢了几纳秒。最后，如果您真的想再节省几纳秒，您可以将最后一个值存储在它自己的值中。

当你同时做*这两*件事时，最大的减速就出现了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T18:58:31.460

[如此处](http://wiki.python.org/moin/TimeComplexity)所述，从列表中获取项目是 O(1) 。即便如此，显式存储值仍然会更快，因为无论查找速度有多快，它仍然比不进行查找要慢。（但是，如果您明确存储该值，则必须在将新项目添加到列表时对其进行更新；如果更新并检查它的总成本是否超过每次抓取最后一个项目的成本是您必须对自己进行基准测试；这可能取决于您实际添加新项目的频率。）

请注意，不存在“将所有内容`nice_list`放入内存”的问题。如果您有一个带有列表的字典，则整个列表已经在内存中。在其中查找一个值不会导致它占用更多内存，但是如果您有数十亿个这样的列表，您甚至会在尝试查找任何内容之前耗尽内存，因为仅创建列表就会用完太多的内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T18:58:16.757

在 CPython 中，答案可能是否定的。list 是使用动态数组实现的。

# java - Java convert user input to a specific value

> ID：16200024
> 
> 赞同：-2
> 
> 时间：2013-04-24T18:56:48.043
> 
> 标签：java

I have a method that takes a user's input in this case "%YEAR%" and converts that input into the current year. The getCopyrightProperty method takes a property entered by the user and displays its output. Which works fine. But how would I take if the user input %YEAR% and display the actually year to it along with also displaying the user output.

```
private static final String COPYRIGHT_PROPERTY = "copyright-message";
private static final String SHOWYEAR = "" + Calendar.getInstance().get(Calendar.YEAR);

public String getCopyrightProperty(){                
    return (this.properties != null) ? this.properties.get(COPYRIGHT_PROPERTY, "") : null;
}

public String getSubstituteCurrYear(String in){                
    return in.replaceAll("%YEAR%", SHOWYEAR);            
} 
```

Sample input would be "**%YEAR% input some placeholder text**" and ideally the output should be "**2013 input some placeholder text**"

properties.get is a sling method that gathers user input from a specific property

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:15:01.360

If I understand your question correctly,

```
private static final String COPYRIGHT_PROPERTY  = "%YEAR% copyright-message";
private static final String SHOWYEAR            = 
        "" + Calendar.getInstance().get(Calendar.YEAR);

public String getCopyrightProperty() {
    String s = this.properties.get(COPYRIGHT_PROPERTY, "");
    if (s == null) {
        return null;
    } else {
        return getSubstituteCurrYear(s);
    }
}

public String getSubstituteCurrYear(String in) {
    return in.replaceAll("%YEAR%", SHOWYEAR);
} 
```

# android - 获取从 servlet 到 Android 的 json 响应

> ID：16200028
> 
> 赞同：0
> 
> 时间：2013-04-24T18:57:01.013
> 
> 标签：android, json, servlets

我有一个具有以下目的的 servlet：

通过 URL 接收数据（即使用 get）。然后根据这个输入返回一条消息，返回给调用者。我对这些东西很陌生，但已经了解到使用 json（实际上是 Gson）适合这个。

我现在的问题是，如何检索此 json 消息？我要定位哪个 URL？servlet 中的相关行是：

```
String json = new Gson().toJson(thelist);
response.setContentType("application/json");
response.setCharacterEncoding("UTF-8");
response.getWriter().println(json); 
```

这就是我尝试检索 json 的方式：

```
try{
            DefaultHttpClient defaultClient = new DefaultHttpClient();
            HttpGet httpGetRequest = new HttpGet("http://AnIPno:8181/sample/response?first=5&second=92866");
            HttpResponse httpResponse = defaultClient.execute(httpGetRequest);
            BufferedReader reader = new BufferedReader(new InputStreamReader(httpResponse.getEntity().getContent(), "UTF-8"));
            String json = reader.readLine();
            JSONObject jsonObject = new JSONObject(json);

} catch(Exception e){
            e.printStackTrace();
        } 
```

但显然这不起作用，因为我发现 jsonObject 的大小为 0（它应该是一个包含三个元素的数组）。

以前，我在 servlet 中有一个 write() 而不是 println()。我不确定这在这种情况下是否重要。但我假设我对如何检索 json 对象有误解。将其指向 servlet 的 URL 还不够吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:29:55.377

我有这个函数可以从请求中读取 JSON 数据到 JSON 字符串。您可以使用此函数检索 JSON，然后使用 GSON 将其解析为您喜欢的对象。它适用于我的应用程序。希望它也适合你。

```
 protected String readJson(HttpResponse resp)
        throws IOException {

        BufferedReader reader = null;  

        try {
            reader = new BufferedReader(new InputStreamReader(
                    resp.getEntity().getContent()));
            StringBuffer buffer = new StringBuffer();
            int read;
            char[] chars = new char[1024];
            while ((read = reader.read(chars)) != -1)
                buffer.append(chars, 0, read);
        } finally {
            if (reader != null)
                reader.close();
        }
        return buffer.toString();
    } 
```

所以根据你的代码。我想这应该可行：

```
String jsonData = readJson(httpResponse);
YourObject obj = new Gson().fromJson(jsonData, YourObject.class); 
```

在尝试之前，请确保您的 servlet 打印出您想要的 JSON 数据。我建议使用这些 Chrome 扩展：Postman - REST Client 和 JSON Formatter，来测试来自 servlet 的数据。这很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T22:02:01.817

`InputStream`在大多数情况下，从文件系统上的文件或 HTTP 请求中读取是相同的。

只有当您的 servlet 只写了一行时，您所拥有的才是正确的。如果`Gson`对象`toString()`方法返回多行，您将不得不从`InputStream`. 我喜欢使用`Scanner`该类从`InputStream`.

```
try {
    DefaultHttpClient defaultClient = new DefaultHttpClient();
    HttpGet httpGetRequest = new HttpGet("http://localhost:8080/cc/jsonyeah");
    HttpResponse httpResponse = defaultClient.execute(httpGetRequest);

    Scanner scanner = new Scanner(httpResponse.getEntity().getContent(), "UTF-8");       

    while(scanner.hasNextLine()) { // scanner looks ahead for an end-of-line
        json += scanner.nextLine() + "\n"; // read the full line, you can append a \n
    }               
    // do your serialization
} catch(Exception e) {
      e.printStackTrace();
} 
```

因此，如果我们从文件中读取，我们会做同样的事情。现在该`json`对象包含您从 servlet 收到的 json，作为`String`.

对于序列化，您有几个选择。

一个`Gson`对象有一个重载的方法`fromJson()`，它可以采用 a`String`或 a`Reader`等。

从我们在上面的代码中，你可以做

```
MyClass instance = new Gson().fromJson(json, MyClass.class); 
```

`MyClass`您要创建的类型在哪里。您将不得不使用`TypeToken`通用类（例如列表）。`TypeToken`是一个抽象类，所以生成一个匿名类并调用`getType()`

```
Type type = new com.google.gson.reflect.TypeToken<List<String>>(){}.getType();
List<MyClass> list = new Gson().fromJson(json, type); 
```

另一种选择是使用直接采用 Reader 的重载方法，而不是从 InputStream 中逐行读取：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(httpResponse.getEntity().getContent(), "UTF-8"));
MyClass instance = new Gson().fromJson(reader , MyClass.class); 
```

你会跳过一个步骤。

不要忘记关闭您的信息流。

# c# - 监控特定进程的网络性能

> ID：16200034
> 
> 赞同：8
> 
> 时间：2013-04-24T18:57:23.283
> 
> 标签：c#, process, process-monitoring

我正在编写一个程序，它使用 .NET 性能计数器来获取特定进程的 CPU、内存和网络使用情况。

例如，要获取 的 CPU 和内存数据`Explorer`，我创建如下性能计数器：

```
PerformanceCounter PC = new PerformanceCounter();
PC.CategoryName = "Process";
PC.CounterName = "% Processor Time";
PC.InstanceName = "Explorer";

PerformanceCounter PC = new PerformanceCounter();
PC.CategoryName = "Process";
PC.CounterName = "Working Set - Private";
PC.InstanceName = "Explorer"; 
```

不幸的是，进程没有属性`categoryName`可以让我获得该进程的网络使用情况。我可以使用网络接口`categoryName`来获取任何特定 NIC 上的整体网络使用情况，但不能将其隔离到任何给定进程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:18:53.180

我想您只能获取整个系统的网络使用情况。您可以使用以下代码：

```
GetCounterValue(_netRecvCounters[index], "Network Interface", "Bytes Received/sec",      _instanceNames[index]):

double GetCounterValue(PerformanceCounter pc, string categoryName, string counterName, string instanceName)
{
    pc.CategoryName = categoryName;
    pc.CounterName = counterName;
    pc.InstanceName = instanceName;
    return pc.NextValue();  
} 
```

使用 PerformanceCounters，您只能获取 Microsoft 希望您可以访问的值。

# matlab - 参数方法自回归移动平均（ARMA）到 AR 过程

> ID：16200039
> 
> 赞同：0
> 
> 时间：2013-04-24T18:57:44.170
> 
> 标签：matlab, signal-processing, moving-average

我想知道如何**通过参数方法将 ARMA（自回归移动平均）过程转换为 AR（自回归）过程。**

即我有一个传递函数 H(z) = (a + b*z)/(c +d*z) 例如`H(z) = (0.26 + 0.073*z^-1)/(1 - z^-1)`，即自回归 (ARMA)，我想将其转换为 AR 过程，即`H(z) = 1/(p + q*z + r*z^2 + ...)`（即只有极点系统）。请给一些提示。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:13:55.827

如果您正在寻找部分部分分数扩展命令，我建议您尝试

```
[r, p, k] = residue(b,a) 
```

[http://www.mathworks.com/help/matlab/ref/residue.html](http://www.mathworks.com/help/matlab/ref/residue.html)

# java - 如果我不调整它的大小，为什么窗口会太小？

> ID：16200040
> 
> 赞同：1
> 
> 时间：2013-04-24T18:57:45.937
> 
> 标签：java, swing, jframe, jlabel, jtextfield

我想知道为什么当我在不调整窗口大小的情况下输入此代码时，我什么也看不到：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class GolfScoresGUI 
{
    public static void main(String[] args)
    {
        JFrame frame = new JFrame("GolfScoresGUI");
        JLabel label = new JLabel("Did you score it? ");
        JTextField textField = new JTextField(10);
        frame.setVisible(true);
        frame.getContentPane().add(textField);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T08:11:40.017

将组件添加到您调用`setPreferredSize`的面板，将面板添加到框架并调用 JFrame.pack()。

JFrame.pack() 更新框架的大小以采用最小可能的大小，给定其包含元素的大小。

如果你不调用它，大小将类似于 0x0，解释为什么你什么都看不到。

```
JFrame frame = new JFrame("GolfScoresGUI");
JPanel panel=new JPanel();
panel.setPreferredSize(new Dimension(600,400)); // Not mandatory. Without this, the frame will take the size of the JLabel + JTextField
frame.add(panel);

JLabel label = new JLabel("Did you score it? ");
JTextField textField = new JTextField(10);
panel.add(label);
panel.add(textField);

frame.setVisible(true);
frame.pack(); 
```

编辑

顺便说一句，您还应该添加此行，以便您的应用程序在您关闭框架时停止：

```
frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T07:56:56.363

一切都很好，但您没有为该 JFrame 指定任何大小。那就是问题所在。尝试给予`frame.setSize(width,height)`，或`frame.pack()`。通过使用其中之一，您的问题将得到解决。

[http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)

看看这个来详细了解如何使用 JFrame。

使用时要小心`setVisible(true)`。尝试将其放在`setVisible(true)`GUI 代码的末尾，即：在将所有 GUI 组件添加到容器后使用它，因为有时当您添加更多组件时，在调整框架大小之前它不会显示某些组件。

# python - 如何使用 sizer 例程在单独的面板上找到支持多个绘图比例和 X 轴的代码？

> ID：16200043
> 
> 赞同：0
> 
> 时间：2013-04-24T18:57:49.470
> 
> 标签：python, matplotlib, toolkit

我一直使用此代码作为模型来修改应用程序，以支持覆盖在同一轴上的超过 8 个单独的图和两侧的不同比例。

到目前为止，我遇到了几个问题。

1.  一些 Y 标签在左边，一些在右边。2 或 3 在两边（不是全部）重复（错误）。它似乎在右侧覆盖重复导致乱码。一个比例具有绘制的数据的数量。

2.  当应用程序停止时，黑色窗口（DOS 提示窗口）不会消失。我有一个理论，即创建了两个“画布”块，一个通过调用创建实例，一个调用创建画布，另一个创建绘图区域（而不是画布）。调用如下：

## 设置 1

```
myLOG_Fig = m_plt.figure(figsize=(3.0, 3.0), dpi=100)
self.myLOG_PlotCanvas = FigCanvas( panel, -1, myLOG_Fig ) 
```

## 设置 2

```
self.myLOG_HostAxes = host_subplot(111, axes_class=AA.Axes) 
```

需要设置 1 来`self.myLOG_PlotCanvas`向`Sizer`放置例程呈现，该例程将图像（绘图区域画布）应用到面板（四个面板之一）上。在我开始画布上的其他情节（2 到 8）之前，这套作品效果很好。

我找到了使用 mpl Toolkit 和 AA 来允许共享 X 轴并呈现超过 2 个刻度的解决方案（第 2 组）。通过更改代码以允许设置 2 是我注意到问题的地方。这些图被正确地接受以缩放和着色。侧面比例几乎看起来不错（右侧重复出现例外）并且我无法更改 X 轴标签和 Y 轴标签的字体大小。我可以使用设置 1 控制颜色和字体大小。设置 2 对更改字符属性没有响应。还有一些其他代码必须使用 set 2 所需的代码（但我没有在这里列出）。我个人认为这两个画布绘图区域并不相同，这也是应用程序不死的原因之一（黑色 DOS 窗口徘徊）。

是否有更新版本的 matplotlib 和 mpl_toolkit 代码将例程连接到一个画布绘图区域？是否有一些代码可以满足我的要求（使用 sizer 等）来生成一个带有选项卡和每个选项卡上的绘图区域的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-07T21:30:01.913

![从此代码生成的绘图](https://i.stack.imgur.com/FoRZP.jpg)

以下是我对我的问题的解决方案（我在 2013 年发布）。在寻找答案和解决方案后，我找到了几个代码片段并将它们拼凑在一起，使它们作为一个“团队”工作......省略了一些设置代码以保持列出的代码简短。每个 y 轴的数组是省略的部分之一。

代码片段如下：

class SubFrame_L(wx.Frame): """ SubFrame_L (2169 Lines) 子框架类，用于创建一个框架，其中包括用于绘制图像的图形和画布。
包含以下方法：

```
 BtnPlot      - button to invoke select a file to plot
        BtnClear     - button to clear canvas image
        BtnClose     - button to close instance of SubFrame_L
        BtnWordDoc   - button to Export image to Word Document file
        BtnPrint     - button to Export image to Word Document file & Print
        BtnClipboard - button to Export image to Clipboard

        DoPlot_SLIK_File   - select a file to plot, then transfers to canvas
        myLOG_DrawPlot     - processes file to plot data arrays.
        RePaintL_Canvas    - re-draws canvas after a canvas "clear" 
        Display_SLIK_Parms - displays Parameters read from file
        BtnClose_EVT       - event handler to clean up and close instance
        DblClick_EVT       - 
"""

    intDPI    = 100
    #
    fltFigX = 12.0
    fltFigY =  4.28

    self.myLOG_Fig = plt.figure(num=None, figsize=( fltFigX, fltFigY ), dpi=intDPI)

    self.myLOG_Fig.subplots_adjust(right=0.85)

    # New version of axes_grid1 with axisartist is recommended
    # host_subplot returns ax which is formed using plt.
    #
    # uses matplotlib.pyplot as plt
    #                               111 = rows,cols,subplot #
    self.x_AA_Axes_L = host_subplot(111, axes_class=AA.Axes)
    #
    self.x_AA_Axes_L.axis["top"].set_visible( True )
    self.x_AA_Axes_L.set_axis_bgcolor( 'white' )    
    self.x_AA_Axes_L.set_autoscale_on( False   )      # <<< ONLY False works

    # *** ++++++++++++++++++++++++++++++++++ Set X-AXIS for all Y-Scales
    self.x_AA_Axes_L.set_xlabel("Time (min)",  fontsize=8, color='red')

    # _________________________Offsets___________________________________
    # Y Label Axis offset from X-Axis
    right_Offset1 = 0                          # Temperature
    right_Offset2  =  right_Offset1 + 50       # Accelerometer
    right_Offset3  =  right_Offset2 + 50       # 

    left_offset1   = 0                         # Motor/Batt Voltage
    left_offset2   = left_offset1 - 50         # Motor Amps
    left_offset3   = left_offset2 - 20         # TBD
    # _________________________Offsets___________________________________

    # *** INIT *** SLIKPAK ***
    # +++++++++++++++++++++++++++++ Battery Voltage  (green) [left @ 0)  #-50]
    self.x_AA_Axes_L.set_ylabel("Battery Voltage", fontsize=8, color='green')
    self.x_AA_Axes_L.set_ylim(ymin=0.0,ymax=40.0)

    # +++++++++++++++++++++++++++++ Motor Current     (red) [left @ 0]
    self.axes_1_L = self.x_AA_Axes_L.twinx()    # Use subplot Base axis

    self.newFixedAxis_1_L = self.axes_1_L.get_grid_helper().new_fixed_axis

    self.axes_1_L.axis["left"] = self.newFixedAxis_1_L(loc="left",
                                        axes=self.axes_1_L,
                                        offset=(left_offset2, 0))

    # axis is shared by Batt and Mot - left is displayed, right is off
    self.axes_1_L.axis["right"].set_visible( False )

    self.axes_1_L.set_ylabel("force (g)/Motor Current (amps)", fontsize=8, color='red')
    self.axes_1_L.set_ylim( ymin=0.0, ymax=10.0 )

    # +++++++++++++++++++++++++++++ Temperature  (blue)
    self.axes_2_L = self.x_AA_Axes_L.twinx()

    self.newFixedAxis_2_L = self.axes_2_L.get_grid_helper().new_fixed_axis

    self.axes_2_L.axis["right"] = self.newFixedAxis_2_L(loc="right",
                                        axes=self.axes_2_L,
                                        offset=(right_Offset1, 0))

    # right is displayed, left is off
    self.axes_2_L.set_ylabel("Temperature", fontsize=8, color='blue')
    self.axes_2_L.set_ylim(ymin=0.0,ymax=300.0) #, size=8) #,fontsize=8, color='green' )

    # +++++++++++++++++++++++++++++ Accelerometer
    self.axes_3_L = self.x_AA_Axes_L.twinx()    # Use subplot Base axis

    self.newFixedAxis_3 = self.axes_3_L.get_grid_helper().new_fixed_axis

    self.axes_3_L.axis["right"] = self.newFixedAxis_3(loc="right",
                                        axes=self.axes_3_L,
                                        offset=(right_Offset2, 0))

    self.axes_3_L.set_ylabel("force [X(g),Y(o),Z(m)]", fontsize=8, color='green')
    self.axes_3_L.set_ylim(ymin=0.0,ymax=10.0)

    self.myLOG_FigCanvas = FigCanvas( self, -1, self.myLOG_Fig )  

    # *** Add special action buttons - pan, zoom, etc
    #
    self.NavToolBar_L = NavigationToolbar( self.myLOG_FigCanvas )
    #
    self.NavToolBar_L.Realize()

    # Start Main Box (Verticle Box)
    self.vMainBoxSizer1 = wx.BoxSizer(wx.VERTICAL)
    # *** (v1) First, Add FigCanvas to Vertical Box
    self.vMainBoxSizer1.Add( self.myLOG_FigCanvas, proportion=1, border=5, \
                                    flag=wx.ALL | wx.EXPAND)

    # *** Start Horizontal Box
    self.hBoxSizer = wx.BoxSizer(wx.HORIZONTAL)
    # *** (h1) Add Navigation Tool along with buttons to hBoxSizer (horizontal Box)
    self.hBoxSizer.Add( self.NavToolBar_L, proportion=0, border=2, flag=wx.ALL)

    self.btnPlot  = wx.Button( self, wx.NewId(), "Plot"  )
    self.btnClear = wx.Button( self, wx.NewId(), "Clear" )
    self.btnClose = wx.Button( self, wx.NewId(), "Close" )

    self.btnWordDoc   = wx.Button( self, wx.NewId(), "WordDoc" )
    self.btnPrint     = wx.Button( self, wx.NewId(), "Print" )
    self.btnClipboard = wx.Button( self, wx.NewId(), "Clipboard" )

    # *** (h2) Now, Add buttons to hBoxSizer (horizontal Box)
    self.hBoxSizer.Add( self.btnPlot,      proportion=0, border=2, flag=wx.ALL)
    self.hBoxSizer.Add( self.btnClear,     proportion=0, border=2, flag=wx.ALL)
    self.hBoxSizer.Add( self.btnClose,     proportion=0, border=2, flag=wx.ALL)
    self.hBoxSizer.Add( self.btnWordDoc,   proportion=0, border=2, flag=wx.ALL)
    self.hBoxSizer.Add( self.btnPrint,     proportion=0, border=2, flag=wx.ALL)
    self.hBoxSizer.Add( self.btnClipboard, proportion=0, border=2, flag=wx.ALL)

    # *** (v2) Add self.hBoxSizer to Verticla Box
    self.vMainBoxSizer1.Add( self.hBoxSizer )
    # *** Finalize self.vMainBoxSizer1
    self.SetSizer( self.vMainBoxSizer1 )

    # **** BIND Buttons to Handlers
    # This Canvas supports double-click to open another canvas window
    self.myLOG_FigCanvas.Bind( wx.EVT_LEFT_DCLICK, self.DblClick_L_EVT )

    self.btnPlot.Bind(  wx.EVT_BUTTON, self.BtnPlot_L_EVT  )
    self.btnPlot.Enable( True )
    self.btnClear.Bind( wx.EVT_BUTTON, self.BtnClearPlot_L_EVT )
    self.btnClear.Enable( False )
    # *** connect to "Close Button"
    self.btnClose.Bind( wx.EVT_BUTTON, self.BtnClose_L_EVT )
    # *** Also connect to "EXIT Button" Strip
    self.Bind(wx.EVT_CLOSE, self.BtnClose_L_EVT)
    self.btnWordDoc.Bind(  wx.EVT_BUTTON, self.BtnWordDoc_L_EVT )
    self.btnWordDoc.Enable( False )
    self.btnPrint.Bind( wx.EVT_BUTTON, self.BtnPrint_L_EVT )
    self.btnPrint.Enable( False )
    self.btnClipboard.Bind( wx.EVT_BUTTON, self.BtnClipboard_L_EVT )
    self.btnClipboard.Enable( False )

    self.Layout() 
```

代码结束。绘图示例软件代码的开始：

```
 try:
        # *** Battery Voltage (30 Volts) (green)
        # Number of Time entries must match number of VBatt entries
        self.x_AA_Axes_L.plot( self.fltArray_Time_L,
                                self.fltArray_VBatt_L, 
                linewidth=1, color=('green'))[0]       # [0] required !!!
    except:
        pass
    #
    try:
        # *** Phase               (1-4) [0-10](black)
        # Number of Time entries must match number of Phase entries
        self.axes_1_L.plot( self.fltArray_Time_L,
                            self.fltArray_Phase_L, linewidth=1,
                            color=('black'))[0]            # [0] required !!!
    except:
        pass
    #
    try:
        # *** BrushLess Motor Amps (3 Amps) [0-10](red)
        # Number of Time entries must match number of BrLsAmps entries
        self.axes_1_L.plot( self.fltArray_Time_L,
                            self.fltArray_BrLsAmps_L, linewidth=1,
                            color=('red'))[0]            # [0] required !!!
    except:
        pass
    #
    #
    try:
        # *** Temperature (72 degrees) (blue)
        # Number of Time entries must match number of Temp entries
        self.axes_2_L.plot( self.fltArray_Time_L,
                            self.fltArray_Temp_L, 
                linewidth=1, color=('blue'))[0]       # [0] required !!!
    except:
        pass
    #
    #
    #
    try:
        # *** Gx  Accelerometer    (g force)(0-10) (orange)      <<<<<<<<<<<<<<<< ORANGE
        #
        self.axes_3_L.plot( self.fltArray_Time_L,
                            self.fltArray_AccX_L, linewidth=1,
                            color=('orange'))[0]          # [0] required !!!
    except:
        pass
    #
    try:
        # *** Gy  Accelerometer    (g force)(0-10) (green)
        #
        self.axes_3_L.plot( self.fltArray_Time_L,
                            self.fltArray_AccY_L, linewidth=1,
                            color=('green'))[0]          # [0] required !!!
    except:
        pass
    #
    #
    try:
        # *** Gz  Accelerometer    (g force)(0-10) (magenta)
        #
        self.axes_3_L.plot( self.fltArray_Time_L,
                            self.fltArray_AccZ_L, linewidth=1,
                            color=('magenta'))[0]          # [0] required !!!
    except:
        pass 
```

代码结束

画布窗口的有趣特性是它支持双击，这会导致出现一个新的（空白）窗口。部分代码因空间而被省略。

选择包含 4 到 7 列数据的文件。每列都呈现给一个数组[]（每个都有不同的名称）。对插入到数组中的项目的确切数量进行计数。array_of_count[] 将匹配数据数组中的每个条目。并将指示每个 x 轴步长的时间步长（在这种情况下为 0.0167）。已为感兴趣的人上传了一个绘图显示示例。

# xcode - 根据 Xcode 中的先前字符串预选 UIPickerView

> ID：16200044
> 
> 赞同：0
> 
> 时间：2013-04-24T18:57:54.513
> 
> 标签：xcode, uipickerview

我有以下代码使用先前选择的存储在变量“preValue”中的字符串值填充 UIPickerView。

```
NSUInteger currentIndex = [arrayColour indexOfObject:preValue];
        [ColourAndShadePicker selectRow:currentIndex inComponent:0 animated:YES]; 
```

问题在于，当涉及空格时，它似乎与该值不完全匹配。

例如，如果 3 个选项是

*   红色的
*   绿色 1
*   绿色 2

并且用户选择绿色 2，绿色 2 值被存储，但在重新填充时，它选择绿色 1 而不是绿色 2。

我认为这与空间有关，并选择第一个类似的选项？

任何想法如何解决？

我无法使用行号，需要完全匹配字符串。

编辑：

要首先填充数组，我使用以下内容：

```
arrayColour = [[NSMutableArray alloc] init];

for (int i = 0; i < [substrings count]; i++)
{
    //parse out each option (i)
    NSString* companyoption = [substrings objectAtIndex:i];
    //add as option to component
    [arrayColour addObject:companyoption];
} 
```

谢谢！

# html - CSS 中的全高、可变宽度图像

> ID：16200046
> 
> 赞同：2
> 
> 时间：2013-04-24T18:58:03.990
> 
> 标签：html, css

我在这个网站上工作了很长一段时间，但仍然遇到一些问题。这是布局：

*   顶部导航栏：68px 高，全宽，固定在顶部。
*   底部导航栏：42px 高，全宽，固定在底部。
*   内容：各种宽度的全高图像，向左浮动。

导航内容仅通过水平滚动完成。图像填充从顶部导航栏底部到底部导航栏顶部的整个高度非常重要，并且不会以任何方式被裁剪或遮挡。同样重要的是，调整浏览器窗口大小或旋转移动设备不会破坏这种布局。我当前的代码在 Chrome 和 Safari 中运行良好（有一个[警告](http://micho.biz/mac-osx-lion-horizontal-scroll-event/)），但在 Firefox 和 Opera 中却惨遭失败。我还没有在IE中测试过。这就是我正在做的事情：

```
#header {
  width: 100%;
  height: 68px;
}

#content {
  position: absolute;
  top: 68px;
  left: 0;
  right: 0;
  bottom: 42px;
  z-index: -10;
  width: auto;
  height: auto;
  overflow: scroll;
  -webkit-overflow-scrolling: touch;
}

#content #frame {
  max-width: 80000px; /* (To ensure that there's enough horizontal space for images) */
}

#content #frame img {
  height: 100%;
  width: auto;
  float: left;
  margin-right: 5px;
  position: relative;
  z-index: 100;
}

#footer {
  width: 100%;
  height: 42px;
  position: absolute;
  bottom: 0;
} 
```

所以我实际上在做的是在一个窗口中创建一个窗口，然后在该窗口中滚动，这就是导致我上面提到的 Safari 中的[问题的原因。](http://micho.biz/mac-osx-lion-horizontal-scroll-event/)除此之外，这完全符合我在 Chrome 和 Safari 中想要的方式。在 Firefox 和 Opera 中，图像不会缩放到窗口的高度。

要亲自查看该站点，请访问此处： http: [//peter-block.com/preface/](http://peter-block.com/preface/)。密码是“letitrain”。

我在想的最好是一起取消“窗口中的窗口”（简单并修复 Safari 问题），但我似乎找不到在所有浏览器中都能以我想要的方式工作的解决方案。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:06:50.103

很酷的设计！如果将#content`top`和设置`bottom`为0 会发生什么。然后，`position: absolute`#frame 并对其进行`top: 68px;`处理`bottom: 42px;`。这是正确的效果吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:07:19.087

**工作小提琴**，根据新输入更新：http: **[//jsfiddle.net/XkrQg/5/](http://jsfiddle.net/XkrQg/5/)**

添加`height: 100%;`到`#content #frame`

```
#content #frame {
    height: 100%;
} 
```

JS 部分：
将其添加到 loadImages() 的开头

```
var frameWidth = 0; 
```

并将其添加到 loadImage()

```
 img.onload = function () {
        frameWidth += img.width + 5; //5 is for margin-right:5px; on img in css
        $('#frame').css('width', frameWidth);
    } 
```

`#frame`该解决方案在加载图像时动态计算宽度。

添加此以在调整窗口大小时重新计算新宽度：

```
$(window).resize(function () {
    var frameNewWidth = 0;
    $('#frame img').each(function () {
        frameNewWidth += $(this).width() + 5;
    });
    $('#frame').css('width', frameNewWidth);
})
    .resize(); 
```

如果需要，您可以在图像加载期间隐藏垂直滚动条`overflow-x:hidden;`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T19:45:27.633

```
#content #frame img {

    max-height: 100%;  // for IE

} 
```

*   我同意 Arbel，你必须拉伸 #content #frame 的高度，我宁愿为 #content #frame 添加一些 clearfix

# r - 在 gplots R 包中添加图例

> ID：16200049
> 
> 赞同：0
> 
> 时间：2013-04-24T18:58:07.360
> 
> 标签：r, gplots

我正在使用此代码绘制图表，但我不知道如何添加图例？

```
library(gplots)
data1 <- as.matrix(read.table('$INPUT_FILE1', header = T))
data2 <- as.matrix(read.table('$INPUT_FILE2', header = T))
data1.experiment <- as.factor(data1[,\"$FACTORS\"])
data1.obs <- as.numeric(data1[,\"$RESPONSE_VAR\"])
data2.obs <- as.numeric(data2[,\"$RESPONSE_VAR\"])
pdf(file = 'MeanPlot.pdf', width=5, height=5)
plotmeans(data2.obs ~ data1.experiment, xlab='$FACTORS', ylab='$RESPONSE_VAR')
plotmeans(data1.obs ~ data1.experiment, xlab='$FACTORS', ylab='$RESPONSE_VAR') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:11:25.110

您是否尝试过在 R 中添加图例的常规方法？

```
legend("bottom", c("px", "y"), col=c("blue", "red"), lty = c(1), cex = 0.7) 
```

# javascript - 事件未在方法内部定义

> ID：16200066
> 
> 赞同：0
> 
> 时间：2013-04-24T18:59:06.833
> 
> 标签：javascript, javascript-events

以下对象有什么问题。

```
var events = {
    targetElem: function(e) {
        var eve = (e) ? e : window.event;
        if (eve.target)
            alert(eve.target);
        else
            alert(eve.srcElement);
    }
}; 
```

总是显示错误信息`ReferenceError: e is undefined`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T19:03:02.310

该问题与您最初发布的代码无关，它与您留下的评论中的事件处理程序有关。

```
document.onclick = function() {events.targetElem(e);};
                                                 ^
                                                 |
                                        e is not defined anywhere 
```

它应该是

```
document.onclick = function(e) {events.targetElem(e);};
                            ^
                            |
                        missing e 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:04:03.600

如果此函数正确连接到元素的事件（onclick、onkeydown、onmousemove 等），则应定义 e。

自己调用 events.targetElem() 将导致 e 具有 undefined 的值，但您不应该得到 ReferenceError。

你确定这个函数中发生了错误吗？尝试将此行放在脚本的顶部：“use strict”；

它会警告您可能遇到的愚蠢的语法问题。（他们可能会导致这种混乱）

# python - python 2.7在字典中的存在

> ID：16200067
> 
> 赞同：8
> 
> 时间：2013-04-24T18:59:07.767
> 
> 标签：python, python-2.7

我想测试字典中是否存在一个键作为“如果键不在字典中：做某事”我已经多次这样做了，但这次它的行为很奇怪。

特别：

```
termCircuit = termCircuitMap[term] 
```

返回 KeyError

当我在 Eclipse PyDev 中调试这段代码时，我得到了以下信息（使用表达式）：

```
term in termCircutiMap        # prints False
term in termCircuitMap.keys() # prints True 
```

有谁知道这怎么可能？我认为如果某些东西“在”键集中，那么它就“在”字典中。

我附上评估的截图。

![http://img836.imageshack.us/img836/1274/screenshotpython.png](https://i.stack.imgur.com/24QDx.png)

非常感谢您的解释:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T19:20:44.817

如果您的密钥`__hash__`功能未正确定义，您可能会看到此行为。例如，以下给出的行为与您描述的大致相同：

```
import random

class Evil(int):
    def __hash__(self):
        return random.randint(0, 10000)

evil_vals = [Evil(n) for n in range(10)]

dict_with_evil_keys = dict((evil_val, None)
                           for evil_val in evil_vals)

print evil_vals[0] in dict_with_evil_keys # prints False
print evil_vals[0] in dict_with_evil_keys.keys() # prints True 
```

在这种情况下，我正在生成随机哈希值，这显然是个坏主意。如果您的键值是可变的，则可能会产生相同效果的不太明显的问题。（通常，可变值不应该定义`__hash__`，也不应该用作字典中的键。）

# sql - SQL 查询比较

> ID：16200074
> 
> 赞同：3
> 
> 时间：2013-04-24T18:59:55.923
> 
> 标签：sql

```
Tables A and B in action.
A [commonfield, otherfields]
B [commonfield] 
```

查询 1

```
select
        A.otherfields
from
        A,B
where
        A.commonfield = B.commonfield
        and some filters ( A.commonfield ) 
```

查询 2

```
select
        A.otherfields
from
        A
where
        A.commonfield in ( select B.commonfield from B )
        and some filters ( A.commonfield ) 
```

查询 1 等同于查询 2。在 (a) 内存使用和 (b) 速度方面哪个更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T19:01:40.973

最好的和 ANSI 标准的做法是

查询 #3：

```
select
        A.otherfields
from
        A
inner join
        B ON A.commonfield = B.commonfield
where
        some filters ( A.commonfield ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:10:14.747

另一种可能：

```
SELECT
        A.otherfields
FROM
        A
WHERE EXISTS (SELECT * FROM B WHERE A.commonfield = B.commonfield)
        AND some filters ( A.commonfield ) 
```

Where exists 在 SQL Server 中往往最快，但不是在所有数据库中。

我会测试所有的可能性（除了使用隐式连接的那个，它本身就是一种糟糕的编程技术，除非你有一个不能使用显式连接的旧数据库，否则不应该使用））以确定最佳性能您的特定数据库和设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T21:43:24.027

查询 1*不*等于查询 2！

当 B 中有多个匹配项时，Query1 将返回多行。Query 2 将仅返回 A 中的行，没有重复。

由于这些不返回等效的结果集，我认为比较它们的性能不是一个好主意。

但是，查询 1 可能会执行得更好，因为它没有进行重复消除。另一方面，如果您有适当的索引，那么两者可能相似，或者查询 2 甚至可能更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T19:13:10.023

这两个查询将在执行前编译。

性能将取决于查询编译器的 SQL Server 供应商实现。

一个供应商可以将两者优化为要执行的相同代码。

我正在使用 SQL Server 2000，这两个表达式都产生了具有相同性能的等效代码。

# javascript - 用 cookie 的值重新填充表单

> ID：16200077
> 
> 赞同：1
> 
> 时间：2013-04-24T19:00:12.917
> 
> 标签：javascript, jquery, cookies

我有一个表单，可以将表单值保存在 cookie 中，以防用户决定不完成表单。到目前为止，这就是我创建 cookie 并读取 cookie 的内容

```
function createCookie(name,value,days) {
if (days) {
    var date = new Date();
    date.setTime(date.getTime()+(days*24*60*60*1000));
    var expires = "; expires="+date.toGMTString();
}
else var expires = "";
document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
var nameEQ = name + "=";
var ca = document.cookie.split(';');
for(var i=0;i < ca.length;i++) {
    var c = ca[i];
    while (c.charAt(0)==' ') c = c.substring(1,c.length);
    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
}
return null;
}

function string2form($form, serializedStr) {
var fields = JSON.parse(serializedStr);
for (var i = 0; i < fields.length; i++) {
    var controlName = fields[i].name;
    var controlValue = fields[i].value;
    $form.find(['name='+ controlName]).val(controlValue);
}
}

jQuery('.rsform-button').click(function() {   
    var cookie = readCookie('storyCookie');     
    if(cookie === null){
        createCookie('storyCookie',JSON.stringify(jQuery('#userForm').serializeArray()),365);
    } 
    else{
        string2form(jQuery('#userForm'), cookie);
    }
}); 
```

我要做的是检查 cookie 是否存在，以及它是否使用 cookie 中的值重新填充表单。cookie 的格式是这样的

```
[{"name":"form[story description]","value":"input value 1"},{"name":"form[star]","value":"input value 2"},{"name":"form[supporting characters]","value":"input value 3"},{"name":"form[capture your thoughts]","value":""},{"name":"form[timelines]","value":""},{"name":"form[how many settings]","value":""},{"name":"form[specific event]","value":""},{"name":"form[opportunity for growth]","value":""},{"name":"form[lessons learned]","value":""},{"name":"form[recurring themes]","value":""},{"name":"form[things done differently]","value":""},{"name":"MAX_FILE_SIZE","value":"0000"},{"name":"form[todays date]","value":""},{"name":"form[name]","value":""},{"name":"form[title]","value":""},{"name":"form[address]","value":""},{"name":"form[city]","value":""},{"name":"form[state]","value":""},{"name":"form[zip]","value":""},{"name":"form[telephone]","value":""},{"name":"form[email]","value":""},{"name":"form[signature]","value":""},{"name":"form[captcha]","value":""},{"name":"form[formId]","value":"4"}] 
```

我想知道如何将其拆分以获得表单字段的名称和该字段的值，并使用密钥对重新填充表单。好的，感谢@Barmar 为我指明了这个方向。好的，现在我无法使用从这篇文章[jQuery Storage and retrieve form state (with data)](https://stackoverflow.com/questions/6567090/jquery-storage-and-retrieval-form-state-with-data)获得的代码重新填充表单。我一直在用头撞墙试图让它发挥作用，但我仍然没有运气。我有一段时间没有做任何编码，所以我生疏了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-29T16:34:55.783

This is what I used to auto-populate a form from a saved cookie

```
var form = $('.post-610 form');
if (form.length) {
    var form_data = readCookie('saved_form');
    if (form_data != null) {
        string2form(form, form_data);
    }

    form.submit(function() {
        var form_data = form2string(form);
        createCookie('saved_form', form_data, 5);
    });
}

function createCookie(name, value, days) {
    var expires;

    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        expires = "; expires=" + date.toGMTString();
    } else {
        expires = "";
    }
    document.cookie = encodeURIComponent(name) + "=" + encodeURIComponent(value) + expires + "; path=/";
}

function readCookie(name) {
    var nameEQ = encodeURIComponent(name) + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) === ' ')
            c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) === 0)
            return decodeURIComponent(c.substring(nameEQ.length, c.length));
    }
    return null;
}

function form2string($form) {
  return JSON.stringify($form.serializeArray());
}

function string2form($form, serializedStr) {
  var fields = JSON.parse(serializedStr);
  for(var i = 0; i < fields.length; i++){
    var controlName = fields[i].name;
    var controlValue = fields[i].value;
    if (controlValue != '' && $form.find('[name=' + controlName + ']').val() == ''){
        $form.find('[name=' + controlName + ']').val(controlValue);
    }
  }
} 
```

# three.js - 在 three.js 中将材质分配给 OBJLoader 模型

> ID：16200082
> 
> 赞同：22
> 
> 时间：2013-04-24T19:00:40.327
> 
> 标签：three.js

我已经使用以下代码导入了一个 OBJ 模型：

```
var loader = new THREE.OBJLoader();
loader.addEventListener('load', function (geometry) {
    object = geometry.content;
    scene.add(object);
});
loader.load('ship.obj'); 
```

它工作得很好，但是每当我尝试向它添加材质时，它要么没有效果，要么模型消失了。我以为我可以这样做：

```
var ship = new THREE.Mesh(object, material); 
```

但这不起作用。有谁知道这样做的方法，或者是否有可能？我也尝试过使用 OBJMTLLoader，但它只是增加了复杂性，同时仍然不允许我更改材料。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-24T19:48:56.763

编辑：这个答案现在已经过时了。相反，请参阅@mightypile 的答案。

* * *

假设您已正确定义`material`，请尝试以下操作：

```
loader.addEventListener( 'load', function ( event ) {

    var object = event.content;

    object.traverse( function ( child ) {

        if ( child instanceof THREE.Mesh ) {

            child.material = material;

        }

    } );

    scene.add( object );

}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-03-22T21:28:15.577

使用@WestLangley 的回答，我不断收到错误消息

```
loader.addEventListener is not a function 
```

我的页面无法加载。根据 discourse.threejs.org 上的 Atul_Mourya 的说法，[加载](https://discourse.threejs.org/t/why-loader-addeventlistener-is-not-a-function/2607)时在回调中实现函数是一个更好的（或更最新的？）想法。我将他的建议与[文档](https://threejs.org/docs/#examples/loaders/OBJLoader.setMaterials)和@WestLangley 的[有用功能](https://stackoverflow.com/a/16200891/2846766)相结合，回答了同样的问题：

```
var ship_material = new THREE.MeshBasicMaterial( { color: 0x444444 } );
var loader = new THREE.OBJLoader();
loader.load( 'ship.obj',
    function( obj ){
        obj.traverse( function( child ) {
            if ( child instanceof THREE.Mesh ) {
                child.material = ship_material;
            }
        } );
        scene.add( obj );
    },
    function( xhr ){
        console.log( (xhr.loaded / xhr.total * 100) + "% loaded")
    },
    function( err ){
        console.error( "Error loading 'ship.obj'")
    }
); 
```

这个例子还实现了进度和错误的回调，它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-06T17:27:50.443

我使用 SketchUp 来制作我的模型。当我从 SketchUp 导出为`OBJ`文件格式时，生成的 zip 包含一个`MTL`文件；

此代码将加载`MTL`文件和`OBJ`文件；加载成功后`scene.add(object)`，纹理会自动渲染（无需分配给`child.material.map`）

```
const loader = new OBJLoader(manager);

const materialsLoader = new MTLLoader(manager);

materialsLoader.load('models/obj/sketchup_export/d2e8bc61-6dd1-4554-b874-13b5364d656e.mtl', function (materialsCreator) {

    // https://threejs.org/docs/#examples/en/loaders/OBJLoader.setMaterials
    loader.setMaterials(materialsCreator);

    loader.load('models/obj/sketchup_export/d2e8bc61-6dd1-4554-b874-13b5364d656e.obj', function (obj) {

        object = obj;

    }, onProgress, onError);

}, onProgress, onError); 
```

# c# - 返回 remoteAddress 的 Membership Provider 为 Null

> ID：16200099
> 
> 赞同：0
> 
> 时间：2013-04-24T19:01:18.143
> 
> 标签：c#, wcf, client, membership, provider

我们正在使用专有的单点登录服务远程拨打会员电话。我们通过 VPN 连接。

我们在以下位置出现错误：

```
Service.Web.Security.Membership.ValidateUser(username, password); 
```

无论 VPN 是否正常工作：

堆栈跟踪：

[ArgumentNullException：值不能为空。参数名称：remoteAddress] System.ServiceModel.ClientBase`1..ctor(String endpointConfigurationName, String remoteAddress) +3235973 ProprietaryService.Security.Membership.MembershipServiceProxy.ValidateUser(String applicationName, String username, String password, Int32 maxInvalidPasswordAttempts) +231 ProprietaryService。 Security.Membership.MembershipProvider.ValidateUser(String username, String password) +27 System.Web.Security.Membership.ValidateUser(String username, String password) +26 includes_usercontrols_LoginForm.btnLogin_Click(Object sender, EventArgs e) in LoginForm.ascx.cs ：91 System.Web.UI.WebControls.Button.OnClick（EventArgs e）+9553178 System.Web.UI.WebControls.Button.RaisePostBackEvent（字符串 eventArgument）+103 System.Web.UI。

Web.Config 的相关区域：

```
 <system.web>
        <membership defaultProvider="MembershipProvider">
            <providers>
                <clear />
                <add name="MembershipProvider"
                     type="ProprietaryMembershipAPIName1, ProprietaryMembershipAPIName2"
                     connectionStringName="ConnectionStringToRemoteDB1" enablePasswordRetrieval="false" enablePasswordReset="true"
                     requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5"
                     minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
                     applicationName="RemoteAppName" />
            </providers>
        </membership>
    </service.web>
    <system.serviceModel>
        <bindings>
    <netTcpBinding>
                <binding name="MembershipProvider_NetTcpBinding" closeTimeout="00:01:00"
            openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
            transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions"
            hostNameComparisonMode="StrongWildcard" listenBacklog="10"
            maxBufferPoolSize="524288" maxBufferSize="65536" maxConnections="10"
            maxReceivedMessageSize="65536">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <reliableSession ordered="true" inactivityTimeout="00:10:00"
              enabled="false" />
                    <security mode="None">
                        <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
                        <message clientCredentialType="Windows" />
                    </security>
                </binding>
            </netTcpBinding>
        </bindings>
<client>
            <endpoint address=""
                binding="netTcpBinding" bindingConfiguration="Membership_NetTcpBinding"
                contract="MembershipProviderService.MembershipService" name="Membership_NetTcpBinding" >

            </endpoint>
</client> 
```

我们可以通过 ConnectionStringToRemoteDB1 中的凭据远程访问数据库。我们被告知“MembershipProviderService.MembershipService”和相关的 API 旨在从数据库中获取远程地址并将其提供给成员资格提供程序。

有没有人看到这里的配置有任何问题，尖叫着说这不起作用？这感觉就像缺少一个配置部分，但是通过 VPN 跨域使用服务使得很难知道问题可能是什么。感谢您提前提出任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:10:02.787

您遇到的错误是由于您的 web.config 中的这一行：

```
<endpoint address="" 
```

在异常情况下，它确实写到它正在尝试创建 WCF 客户端：

> System.ServiceModel.ClientBase`1..ctor（字符串端点配置名称，字符串远程地址）

而且您不能传递空/空地址。

# c++ - C++ 静态变量产生致命错误 LNK1120: 1 unresolved externals in Visual Studio

> ID：16200100
> 
> 赞同：0
> 
> 时间：2013-04-24T19:01:25.397
> 
> 标签：c++, visual-studio-2012, static-variables

我是 C++ 新手，我正在尝试学习 static 关键字的不同用途，我读到其中之一是在类中定义一个静态变量并使用范围运算符调用它。我尝试使用它，但 Visual Studio 2012 产生链接错误。我的代码是：

```
class Vehicle
{
public:
    Vehicle(){};
    ~Vehicle(){};
    static int temp;
};

int _tmain(int argc, _TCHAR* argv[])
{

    Vehicle::temp=100;

    std::cout << Vehicle::temp << std::endl;

    system("Pause");
    return 0;
} 
```

错误是：

**1>LearningC++.obj : error LNK2001: unresolved external symbol "public: static int Vehicle::temp" (?temp@Vehicle@@2HA)**

**1>c:\users\avraam\documents\visual studio 2012\Projects\LearningC++\Debug\LearningC++.exe : 致命错误 LNK1120: 1 unresolved externals**

什么可能导致这个问题？

***Edit1（为了更清楚）：***

我的问题是如何访问在类中声明的静态变量？这可能不使用成员函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:03:23.483

您需要定义`temp`，在之后添加`class Vechicle`：

```
class Vehicle
{
// Left out class code for brevity
   void useTemp() { temp = 200 ; } // Adding method inside class the uses temp
};

int Vehicle::temp = 0 ; 
```

注意，定义时不需要`static`关键字`temp`。由于`static`您不需要类的实例来访问变量，因此您的代码`main`是正确的：

```
Vehicle::temp=100;

std::cout << Vehicle::temp << std::endl;

Vehicle v1 ;
v1.useTemp() ;

std::cout << Vehicle::temp << std::endl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:03:52.747

您需要`static`在类外定义成员：

```
#include <iostream>

class Vehicle
{
  public:
     Vehicle(){};
    ~Vehicle(){};
    static int temp;
};

int Vehicle::temp = 0; 

int _tmain(int argc, TCHAR* argv[])
{
    Vehicle::temp = 100;  //^^access the variable with classname plus ::
    std::cout << Vehicle::temp << std::endl;
    std::cin.get();
    return 0;
} 
```

然后使用`main`类`::`名和变量名访问它。

# android - 如何使用 ArrayList 设置我的 ListView 的内容

> ID：16200102
> 
> 赞同：0
> 
> 时间：2013-04-24T19:01:30.147
> 
> 标签：android, listview, arraylist

各位程序员，你好，我有这个代码

```
public class IdiomsCollection {

private ArrayList<Idiom> idiomsList = new ArrayList<Idiom>();

public IdiomsCollection() {
    loadIdioms();
}

private void loadIdioms() {

    //creating new items in the list
    Idiom i1 = new Idiom();
    i1.setPhrase("Piece of cake");
    i1.setMeaning("When something is easy to do");
    i1.setUsage("That test that I took was a piece of cake");
    idiomsList.add(i1);
}
} 
```

我想将我的 ArrayList 的内容添加到另一个类的 onCreate() 方法中，所以当我运行应用程序时，我会在屏幕上看到我的列表。我不知道该怎么做，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:30:11.630

利用继承。它是这样创建类

```
public class IdiomsCollection extends ArrayList<Idiom> {

public IdiomsCollection() {
    loadIdioms();
}

private void loadIdioms() {

    //creating new items in the list
    Idiom i1 = new Idiom();
    i1.setPhrase("Piece of cake");
    i1.setMeaning("When something is easy to do");
    i1.setUsage("That test that I took was a piece of cake");
    this.add(i1);
}
} 
```

并阅读[如何使用 ArrayList 中的数据填充 ListView](https://stackoverflow.com/questions/5070830/populating-a-listview-using-arraylist)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:04:29.943

我建议您使用 ArrayAdapter，如果您没有特殊需求，您可以为 ListView 中的行使用标准布局。或多或少的代码应该看起来像：

```
public class IdiomsCollection {

.....
  public List<Idioms> getIdiomsList() {
     return idiomsList;
  } 
```

}

在我们的活动中

公共无效 onCreate(..) {

```
 ListView lv = (ListView) findViewById(R.id.listView);
 List<Idiom> idiomList = ( new IdiomsCollection()).getIdiomsList();
  final ArrayAdapter<Idiom> aAdpt =
        new ArrayAdapter<Idiom>(this,                 
               android.R.layout.simple_list_item_1, idiomListList);

  lv.setAdapter(aAdpt); 
```

}

为 IdiomClass 提供一个 toString 方法，并为 Activity 提供一个布局。如果您想更好地控制如何在列表视图行中显示 Idioms 数据，您可以实现自定义适配器。[在这里](http://www.survivingwithandroid.com/2012/10/android-listviewarrayadapter-and.html)查看我的博客以了解 ArrayAdapter，您可以找到一个工作示例。如果您想创建自己的适配器[，](http://www.survivingwithandroid.com/2012/10/android-listview-custom-adapter-and.html)也可以在我的博客上。

# javascript - jquery添加和删除表行

> ID：16200104
> 
> 赞同：5
> 
> 时间：2013-04-24T19:01:34.560
> 
> 标签：javascript, jquery, html-table

我有一个使用 jQuery 动态添加和删除行的 html 表。行数受 jQuery 计数器的限制，允许用户最多添加 4 行。我的问题是，当用户创建第 4 行时，他们已经达到了限制，但是当他们删除一行时，限制仍然存在，他们不能再添加任何行。

[http://jsfiddle.net/nallad1985/sqrrt/](http://jsfiddle.net/nallad1985/sqrrt/)

**HTML**

```
<table id="myTable" class="order-list">
<thead>
    <tr>
        <td>Name</td>
        <td>Price</td>
    </tr>
</thead>
<tbody>
    <tr>
        <td>
            <input type="text" name="name" />
        </td>
        <td>
            <input type="text" name="price1" />
        </td>
        <td><a class="deleteRow"></a>
        </td>
    </tr>
</tbody>
<tfoot>
    <tr>
        <td colspan="5" style="text-align: left;">
            <input type="button" id="addrow" value="Add Row" />
        </td>
    </tr>
    <tr>
        <td colspan="">Grand Total: $<span id="grandtotal"></span>

        </td>
    </tr>
</tfoot> 
```

**查询**

```
$(document).ready(function () {
var counter = 0;
$("#addrow").on("click", function () {
    var counter = $('#myTable tr').length - 2;
    var newRow = $("<tr>");
    var cols = "";

    cols += '<td><input type="text" name="name' + counter + '"/></td>';
    cols += '<td><input type="text" name="price' + counter + '"/></td>';

    cols += '<td><input type="button" id="ibtnDel"  value="Delete"></td>';
    newRow.append(cols);
    if (counter == 4) $('#addrow').attr('disabled', true).prop('value', "You've reached the limit");
    $("table.order-list").append(newRow);
    counter++;
});

$("table.order-list").on("change", 'input[name^="price"]', function (event) {
    calculateRow($(this).closest("tr"));
    calculateGrandTotal();
});

$("table.order-list").on("click", "#ibtnDel", function (event) {
    $(this).closest("tr").remove();
    calculateGrandTotal();
});

});

function calculateRow(row) {
var price = +row.find('input[name^="price"]').val();

}

function calculateGrandTotal() {
var grandTotal = 0;
$("table.order-list").find('input[name^="price"]').each(function () {
    grandTotal += +$(this).val();
});
$("#grandtotal").text(grandTotal.toFixed(2));
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T19:09:02.050

一堆修复，

1.  删除了删除按钮的额外处理程序
2.  将按钮 ID 更改为类，因为您不应重复 ID。[阅读为什么不应该重复 ID](https://stackoverflow.com/a/15341367/297641)。
3.  添加了启用“添加行”按钮的逻辑。请参阅**[固定小提琴](http://jsfiddle.net/sqrrt/2/)**。
4.  删除了 Add Row 处理程序中的 var 声明以更新全局 var

[http://jsfiddle.net/sqrrt/2/](http://jsfiddle.net/sqrrt/2/)

```
$("table.order-list").on("click", ".ibtnDel", function (event) {
    $(this).closest("tr").remove();
    calculateGrandTotal();

    counter -= 1
    $('#addrow').attr('disabled', false).prop('value', "Add Row");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T19:06:51.477

您只需要在删除一行时重新启用按钮并减少计数器：

```
$("table.order-list").on("click", "#ibtnDel", function (event) {
    $(this).closest("tr").remove();
    calculateGrandTotal();
    counter--;
    $('#addrow').prop('disabled', false).prop('value', "Add row");
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T19:18:38.250

单击删除 btn 时，您应该减少计数器编号并启用按钮和属性值

```
$("table.order-list").on("click", "#ibtnDel", function (event) {
    $(this).closest("tr").remove();
    calculateGrandTotal();
    counter = counter-1;
    $("#addrow").attr("disabled", false).prop("value", "Add Row")

}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-24T19:38:38.820

我更新了您的 javascript 请查看小提琴上的代码：

[http://jsfiddle.net/sqrrt/3/](http://jsfiddle.net/sqrrt/3/)

```
$("table.order-list").on("click", "#ibtnDel", function (event) {
    $(this).closest("tr").remove();
    calculateGrandTotal();
    counter --;
    if (counter < 5) $('#addrow').attr("disabled", false).prop('value', "Add Row");
}); 
```

问题是，您没有正确倒数计数器，并且您的删除按钮方法没有被调用。

# vb.net - 可以使用按钮上的文本来确定当前状态吗？

> ID：16200108
> 
> 赞同：1
> 
> 时间：2013-04-24T19:01:42.420
> 
> 标签：vb.net, button, state, monitor

我一直在使用文本来确定按钮状态，想知道它是否被普遍接受？

我有一个带有项目列表和“完成”按钮的数据网格视图。当用户单击完成按钮时，单元格以绿色突出显示以标记它已完成。

然后我将按钮文本更改为“撤消”。因此，每当用户滚动“绿色”单元格时，按钮文本都会更改为撤消。

我使用该文本来确定单击按钮时要执行的操作。

这个可以吗？或者我应该使用某种状态监视器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T11:57:38.947

我认为这是勉强可以接受的，但仍然很糟糕。

将状态存储在变量中并不费力，而且会使代码更易于维护（不要混合处理和 GUI）。

当您以某种方式更改按钮的文本时，您也必须调整检查。

此外，这使得更新 GUI（多线程等）变得更加容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T16:12:42.487

在许多情况下，我喜欢的模式是具有指示控件逻辑状态的私有字段，以及导致控件本身的属性以合理及时的方式更新的属性。如果与控件本身的属性有一个交互点，并且假设字段始终表示有效状态，那么非 UI 线程代码可以更改控件的状态，而无需与 UI 线程同步；它只需要确保在下次方便时有一个未决的请求来更新控件。

尽管您的特定示例不涉及任何线程问题，因此并没有真正受益于通过将控制状态与逻辑状态分开所提供的线程易用性，但对于需要多线程支持的情况与不支持的情况使用相同的模式这将减少一个人必须处理的不同模式的数量。此外，如果您使用自己的字段来表示控件可以具有的不同状态，则可以确保它们永远不会表示模棱两可或无效的状态。例如，如果一段代码将按钮设置为“UNDO”而不是“Undo”，其他一些代码可能会决定“它不是‘Undo’，所以它应该保存”，有些代码可能会决定“它不是”吨`Save`，所以它应该撤消“`，有些可能什么都不做，有些可能会发出尖叫声。此外，可能很难添加任何其他状态或指示。例如，可能想要在“撤消”按钮中添加一个指示将被撤消。如果使用字段来跟踪状态，则可以添加此类功能而不会干扰区分“保存”和“撤消”的字段；或者添加另一个字段以跟踪应指示的特定操作显示撤消按钮，或者让“更新按钮文本”例程使用现有字段来确定。

# jquery - 加载时的砌体动画

> ID：16200110
> 
> 赞同：0
> 
> 时间：2013-04-24T19:01:53.990
> 
> 标签：jquery

嗨，我想在页面加载时在 mansonry 地方替换项目时获得动画，而不是在调整页面大小时，

这是我的代码：

```
 $(function(){
        var blogpost = $('#blogG');

         blogpost.imagesLoaded(function(){
                blogpost.masonry({
                         isAnimated: true,
                        animationOptions: {
                            duration: 750,
                            easing: 'linear',
                            queue: false
                        },
                        itemSelector:'.blogposts',
                        isResizable:true

            });
        }); 
}); 
```

和我的在线示例：www.mupiz.com/blog/

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:06:50.730

设置`isResizable: false`。它在[Masonry 文档](http://masonry.desandro.com/docs/options.html#isresizable)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T13:39:59.563

接下来我制作onload动画。1 在砌体中向我的块添加类：
代码 css：

```
.box.masonry{
    -webkit-transition-property: left, right, top;
    -moz-transition-property: left, right, top;
    -o-transition-property: left, right, top;
    transition-property: left, right, top;

    -webkit-transition-duration: 0.5s;
    -moz-transition-duration: 0.5s;
    -o-transition-duration: 0.5s;
    transition-duration: 0.5s;
} 
```

并且在初始化砌体之后，从元素中删除这个类是浏览器调整大小转换的过程两次。
代码js：

```
$('.box.masonry').parent().bind( 'transitionend', function() {
    $('.box.masonry').removeClass('masonry'); 
}); 
```

# sql - 选择不带子查询的数据

> ID：16200111
> 
> 赞同：0
> 
> 时间：2013-04-24T19:01:57.113
> 
> 标签：sql, sql-server, sql-server-2008

我有两个名为 Test 的表，TestHistory 中的 testHistory 与 Test 有 FK 关系。

![测试表数据](https://i.stack.imgur.com/DS32s.png)

![testHistory 表数据](https://i.stack.imgur.com/3LbaJ.png)

现在我想从带有测试表记录的表 TestHistory 中选择前 1 个插入的数据。

我想要的输出是：

![在此处输入图像描述](https://i.stack.imgur.com/I31fW.png)

或者我的 TestHistory 表没有必要包含与 TestId 相关的记录，那么我的输出将是：

![在此处输入图像描述](https://i.stack.imgur.com/LsUAw.png)

我已经通过子查询实现了这一点，例如：

```
Select Id,(select top(1) price from TestHistory HT Where T.Id=HT.TestId order by HT.Id desc) As Price 

From Test T 
```

但我不想为此使用子查询。我想做没有子查询的选择数据。

请建议我如何在没有子查询的情况下做到这一点，解决这个问题的最佳替代方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:05:55.317

我认为最简单的方法是使用`row_number()`来获取结果，但您仍然会有一个子查询。这将不是一个相关的子查询：

```
select id, price, testhistoryid
from
(
  select t.id,
    h.price,
    h.id testhistoryid,
    row_number() over(partition by t.id order by h.id desc) rn
  from test t
  inner join testhistory h
    on t.id = h.testid
) src
where rn = 1; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/19be3/4)。

如果要返回`test`历史记录表中不存在的行，那么您将使用 a`LEFT JOIN`而不是 a `INNER JOIN`：

```
select id, price, testhistoryid
from
(
  select t.id,
    h.price,
    h.id testhistoryid,
    row_number() over(partition by t.id order by h.id desc) rn
  from test t
  left join testhistory h
    on t.id = h.testid
) src
where rn = 1; 
```

看[演示](http://sqlfiddle.com/#!3/f989c/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:19:41.197

抱歉，如果没有某种子查询，就没有真正的方法可以做到这一点。你写的查询很好。在我看来，完成您正在寻找的最佳语法是：

```
SELECT
   T.ID,
   HT.*
FROM
   dbo.Test T
   OUTER APPLY (
      SELECT TOP 1 *
      FROM dbo.TestHistory HT
      WHERE T.ID = HT.TestID
      ORDER BY HT.ID DESC
   ) HT
; 
```

[在 SQL Fiddle 中自己尝试一下](http://sqlfiddle.com/#!3/ae068/3)。

如果您想限制它以便只显示`Test`具有匹配`TestHistory`行的那些行，则使用`CROSS APPLY`而不是`OUTER APPLY`.

`TestHistory`此外，这样的查询是可能的并且可能更容易理解，但很可能不会执行得那么好，而且它要求每行至少有`Test`一行。

```
SELECT
   T.ID,
   HT.*
FROM
   dbo.Test T
   INNER JOIN dbo.TestHistory HT
      ON T.ID = HT.TestID
WHERE
   HT.ID = (
      SELECT Max(HT2.ID)
      FROM dbo.TestHistory HT2
      WHERE T.ID = HT2.TestID
   )
; 
```

您也可以使用一个`Row_Number()`解决方案，尽管我倾向于不使用它，因为它的性能通常不如`CROSS APPLY`with `TOP`，当它可用时。

```
SELECT
   T.ID,
   HT.TestID,
   HT.Price
FROM
   dbo.Test T
   LEFT JOIN (
      SELECT
         Selector = Row_Number() OVER (
            PARTITION BY HT.TestID ORDER BY HT.ID DESC
         ),
         *
      FROM dbo.TestHistory HT
   ) HT
      ON T.ID = HT.TestID
      AND HT.Selector = 1
; 
```

[在 SQL Fiddle 中自己尝试一下](http://sqlfiddle.com/#!3/ae068/3)。

找出`TOP 1`该`Row_Number()`解决方案是否性能更好的唯一方法是使用大量具有适当代表性的数据尝试数据库中的每一个。如果您的历史条目非常少而主要条目非常多，**则**使用`Row_Number()`. 但是，如果每个主要条目都有许多历史条目，则该`TOP`方法可能会执行得最好。

表上的索引也可以产生巨大的影响。确保您有合理的索引，允许正确的表访问（例如，表上的聚集索引`TestHistory`应该是 on `TestID, ID`，即使 PK 是 on `ID`'）。如果您每次都查询整个表，索引可能没那么重要，但是当您有限制`Test`行集的条件时，索引将变得非常重要。

# c# - MonoTouch 的独立存储设置的替代方案

> ID：16200113
> 
> 赞同：1
> 
> 时间：2013-04-24T19:01:59.950
> 
> 标签：c#, .net, mono, xamarin.ios, isolatedstorage

我正在尝试重新创建我最初为 Windows Phone 7.8 制作的应用程序 - 当我们最初制作它时；我们使用了 IsolatedStorageSettings 来存储有关用户的信息。

当我们尝试使用 MonoDevelop/MonoTouch 执行此操作时，我们注意到它无法识别 IsolatedStorageSettings，因此在为 iOS 创建应用程序时给我们带来了很大的问题。

我们用于 Windows phone 来创建存储的代码：

```
public IsolatedStorageSettings settings = IsolatedStorageSettings.ApplicationSettings; 
```

我们还有哪些其他方法可以使用隔离存储在我们的应用程序中存储设置。我们已经研究过使用“IsolatedStorageFile”，但使用这种方法似乎会造成很多麻烦。

我们试图保存的信息包括：-名字 -姓氏 -导师姓名 -按下按钮的次数

我们将如何使用IsolatedStorageFile 或其他IsolatedStorage 方法来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:08:12.477

这种类型从未进入*常规*框架，但这并不意味着您不能使用它。

Moonlight 的源代码（Mono 的 Silverlight 实现）[`IsolatedStorageSettings`](https://github.com/mono/moon/blob/master/class/System.Windows/System.IO.IsolatedStorage/IsolatedStorageSettings.cs)是可用的。它很小，完全托管，可以包含在您自己的应用程序中（或构建在单独的程序集中以供跨项目重用）。

它可能需要进行一些修改，因为 Silverlight API`System.IO.IsolatedStorage`与 .NET 框架的“桌面”版本（Xamarin 产品遵循）不是 100% 兼容。OTOH 它应该是非常小的变化（源本身非常小）。

# c++ - 每个节点具有多个数据的 C++ 链表

> ID：16200114
> 
> 赞同：0
> 
> 时间：2013-04-24T19:02:00.257
> 
> 标签：c++

我有一个作业，要求我编写一个程序，该程序可以使用链表存储人员（姓名、联系电话、地址）的数据。必须使用模板。如何为模板声明多种类型？以及如何在每个节点存储多个数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:07:26.807

您不会为模板“声明”多种类型；模板适用于多种类型。就用它吧。

多个数据可以通过两种方式存储：将数据嵌入到您的节点中，或者在您的节点中有一个指向数据的指针。

第一种方法更容易；第二种可能是正确的方法，但您需要考虑谁需要分配和释放数据的问题 - 存储在节点中的数据是谁的所有权。

# android - How to finish() MainActivity from Activity3

> ID：16200115
> 
> 赞同：0
> 
> 时间：2013-04-24T19:02:06.820
> 
> 标签：android, android-intent, android-theme, activity-finish

I'm developing an application in which I have a `MainActivity`, on that I have a button which calls `Activity1`(the theme of this activity is set to dialog i.e. `android:theme="@android:style/Theme.Holo.Light.Dialog`), so I can't finish the `MainActivity`, otherwise `Activity1` will be on top of home screen.

On my `Activity1`, my other activity i.e. `Activity2` is called. This is also same as `Activity1` with dialog theme. Now from `Activity2` I have called `Activity3` which is normal activity without dialog theme.

Now, I want to finish my `MainActivity` from `Activity2`.

How can I achieve that?

Any kind of help will be appreciated.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T19:06:05.817

You can start each activity like `startActivityForResult()` and check result of activity. So, if you want to close first activity, you should set specific result of each activity and call `finish()`. In each activity, you check `result` in `onActivityResult()`, so if you see your specified result, you should close this activity (or set result if it not first activity too)

In first activity, I want to start second

```
Intent i = new Intent(Activity1.this, Activity2.class);
startActivityForResult(i, 0); 
```

In second activity, I want to start third

```
Intent i = new Intent(Activity2.this, Activity3.class);
startActivityForResult(i, 0); 
```

So, In third activity I want to start fourth and close each other

```
Intent i = new Intent(Activity3.this, Activity4.class);
startActivity(i);

setResult(RESULT_OK);
finish(); 
```

And in each activity (1, 2) I should check method `onActivityResult()`

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        setResult(RESULT_OK);
        finish();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:22:40.950

do you want to close Activity2, Activity1, and then MainActivity ?

if so, you can use the startActivityForResult and onActivityResult for each of the activities, and check if the returned result is the one that requests to close the current activity and pass it further.

if not, such a thing can be done using a service that will be bound between the activities.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T19:23:40.193

From what I understand, you want to finish `MainActivity` when `Activity 3` is started. If this is the case and it is ok to clear the other two `Activities` as well, you can us an `Intent flag`

```
Intent intent (Activity2.this, Acitivity3.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

If I understand you correctly this will accomplish what you want. `Activity 3` will be started while clearing all other `Activities` from the stack.

[Docs](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T19:26:49.147

I think its not a working flow android system would expect to occur thats why you cant shut down the whole app with one command. What you can do is to use the startActivityForResult and check the source, the status and close the activities in cascade.

Heres an example: [How to manage `startActivityForResult` on Android?](https://stackoverflow.com/questions/10407159/android-how-to-manage-start-activity-for-result)

You can create specific codes for each activity that start the next one.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T19:27:06.537

While starting an activity, send your activity to new one as an extra. For example:

in main:

```
 Intent in= new Intent("your action");
  in.putExtra("preAct",this);
  startActivity(in); 
```

Then use your preAct to finish it.

in new activity:

```
 Activity prev = (Activity)this.getIntent().getSerializableExtra("preAct"); 
```

then all you need

```
 prev.finish() 
```

to finish it whenever you want

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T19:37:11.373

Check [noHistory](http://developer.android.com/guide/topics/manifest/activity-element.html#nohist) attribute of activity. If You set it to true, user won't be able to get back to this activity after he leaves it.

# coldfusion - 通过查询在 cfloop 中更新 cfquery

> ID：16200118
> 
> 赞同：1
> 
> 时间：2013-04-24T19:02:15.537
> 
> 标签：coldfusion, cfquery, cfloop

我正在浏览 Values 表的 vals 列中的所有记录，并将任何绝对 url 转换为相对 url。我收到这个错误

```
[Macromedia][SQLServer JDBC Driver][SQLServer]Incorrect syntax near '='. 
```

在这段代码的第 3 行到最后一行：

```
<cfquery name="getVals" datasource="#dataBase#">
  Select vals
  FROM Values
</cfquery>

<cfloop 
  query = "getVals">

  <cfset val=#vals#>
    <cfset valEdited= REReplace(
      val, 
      '"(https?:\/\/)?(www\.)?(example\.com)(\/)?"', 
      "'index.php'", 
      'ALL'
      )>

    <cfquery name="update" datasource="#dataBase#">
      UPDATE   Values
      SET      vals = <cfqueryPARAM value = #valEdited#>
      WHERE    ID = <cfqueryPARAM value = #getVals.currentRow#>
    </cfquery>
</cfloop> 
```

关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:15:42.810

我要看的第一件事是你在 ValEdited 的 CFSET 末尾有一个分号。那将首先爆发。

然后检查你的代码，看看它是否给你同样的错误。

您可能要考虑的最佳实践是仅在输出值时使用 # ......所以

```
<cfset val = getVals.vals> 
```

足够了。

接下来我要看的是你在哪里声明。这假设您的所有值都有 ID，1 到表中的记录数。如果不是这样，您可能必须将其更新为

```
where ID = #getVals.ID# 
```

希望这可以帮助。到我写它的时候，其他人几乎都说了同样的话：P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:01:14.980

我个人不会直接更新查询列的值。对我来说，这让我对到底发生了什么感到困惑。我经常使用的方法是使用 QueryAddColumn() 将另一列添加到查询中。

[http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_m-r_16.html](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_m-r_16.html)

这使您不仅可以将查询中所需的更改作为新列提供，而且还可以单独保留原始列，以便您可以更轻松地进行调试。要添加新列，只需执行以下操作：

```
<cfquery name="getVals" datasource="#dataBase#">
  Select vals
  FROM Values
  order by id
</cfquery>

<cfset newVals = []>

<cfloop query="getVals">

    <cfset temp = REReplace(
      val, 
      '"(https?:\/\/)?(www\.)?(example\.com)(\/)?"', 
      "'index.php'", 
      'ALL'
      )>

    <cfset ArrayAppend(newVals, temp)>

</cfloop>

<cfset QueryAddColumn(getVals, "newVals", "Varchar", newVals)> 
```

# jquery - $.Ajax 不带“_”查询字符串参数

> ID：16200121
> 
> 赞同：5
> 
> 时间：2013-04-24T19:02:34.160
> 
> 标签：jquery, ajax, dynamics-crm-2011

我正在使用 $.ajax 方法来动态包含插件脚本文件，不幸的是，由于整个项目都托管在 Dynamics CRM 2011 中，因此无法将任何查询字符串参数传递给此请求，而不会以错误的方式破坏 CRM。

因此执行以下操作：

```
$.ajax({
    url: includeUrl, // == "Templates.js"
    dataType: "script",
    success: function (includedFile) {
        window.Includes.push(includedFile);
    }
}); 
```

将返回`500 - Internal Server Error`查看我已请求以下 URL 的 firebug 控制台：

```
http://server:5555/Organisation/WebResources/grid_/Templates.js?_=1366828753001 
```

它已经`_=1366828753001`通过 $.Ajax 方法附加了这个参数.. CRM 不太喜欢这个.. 我问这个知道我可能在一块石头和一个坚硬的地方之间但是有什么方法可以调用 $.ajax 强制它不将此ID附加到查询字符串中吗？

来自 CRM 的完整错误：

```
<description>CRM Parameter Filter - Invalid parameter '_=1366828753001' in Request.QueryString on page /Organisation/Handlers/WebResource.ashx
The raw request was 'GET /Organisation/WebResources/grid_/Templates.js?_=1366828753001' called from http://server:5555/Organisation/WebResources/grid_/EditableGrid.htm.</description> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T19:03:15.460

设置`cache: true`为 $.ajax() 调用的参数

该查询字符串由 jQuery 附加，以防止缓存所请求的资源。

# sql - 触发器只工作一次/调试

> ID：16200122
> 
> 赞同：1
> 
> 时间：2013-04-24T19:02:34.157
> 
> 标签：sql, sql-server-2012

我创建了一个触发器，当在表 T1 中插入或更新记录时，他将其镜像到表 T2 中（遵循一些条件）。

在 T1 中的第一条语句（插入）中，触发器运行良好（将 T1 中的所有内容复制到 T2）。但在第一次之后，触发器将不再运行（使用 Insert 或 update 子句）。

代码：

```
ALTER TRIGGER [dbo].[Replicacao]
   ON  [dbo].[ImportacaoXML]
   AFTER UPDATE, INSERT
AS 
BEGIN
    IF EXISTS (SELECT ProgramacaoBarcas.ViagemID, ProgramacaoBarcas.Data 
               FROM ProgramacaoBarcas, inserted 
               WHERE ProgramacaoBarcas.ViagemID = inserted.ViagemID 
                 AND ProgramacaoBarcas.Data = inserted.Data)        
    BEGIN 
      UPDATE ProgramacaoBarcas 
      SET ViagemID = inserted.ViagemID, Data = inserted.Data, 
          Extra = inserted.Extra, Modalidade = inserted.Modalidade,
          FleetID = inserted.FleetID, Partida = inserted.Partida, 
          Chegada = inserted.Chegada, Capacidade = inserted.Capacidade, 
          LocationID = inserted.LocationID, DestinoID = inserted.DestinoID, 
          CodLinha = inserted.CodLinha
      FROM inserted 
      WHERE ProgramacaoBarcas.ViagemID = inserted.ViagemID 
        AND ProgramacaoBarcas.Data = inserted.Data 
        AND ProgramacaoBarcas.Bloqueada = 0
    END
    ELSE
    BEGIN
      INSERT INTO ProgramacaoBarcas (ViagemID, Data, Extra, Modalidade, FleetID, Partida, Chegada, Capacidade, LocationID, DestinoID, CodLinha, Bloqueada)
         SELECT 
             ViagemID, Data, Extra, Modalidade, FleetID, Partida, Chegada, 
             Capacidade, LocationID, DestinoID, CodLinha, 0 
         FROM inserted      
    END 
END 
```

有人有任何线索吗？我搜索了日志，但一无所获。有什么方法可以调试触发器吗？

（新手请耐心等待）

**Obs：**我找到了解决方案。现在代码是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:18:13.130

好的，当您检查`ProgramacaoBarcas`表上是否存在数据时，您的问题就在开始。所以，你正在这样做：

```
IF EXISTS (SELECT ProgramacaoBarcas.ViagemID, ProgramacaoBarcas.Data 
           FROM ProgramacaoBarcas 
           WHERE ProgramacaoBarcas.ViagemID = ViagemID 
             AND ProgramacaoBarcas.Data = Data) 
```

看到`WHERE`条件了吗？，您正在将两列与自己进行比较：`ProgramacaoBarcas.ViagemID = ViagemID`和`ProgramacaoBarcas.Data = Data`. 所以基本上你是在做一个`SELECT`没有`WHERE`（不完全正确，因为`NULL`s 等于没有，但你明白了）。因此，在您第一次执行时，表是空的，然后转到`INSERT`触发器的部分，并填充一些数据。由于现在该表上有数据，因此触发器的所有其他执行都属于触发器的`UPDATE`一部分。因此，如果触发器因为您插入数据而被调用，则该数据不会被插入到第二个表中，并且如果不在第二个表中的新数据已经更新，则触发器似乎什么都不做，因为它不能`UPDATE`提供不存在的数据。希望这可以为您澄清事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T22:38:11.543

您可以使用[MERGE](http://msdn.microsoft.com/en-us/library/bb510625.aspx)语句同步两个表

```
CREATE TRIGGER [dbo].[Replicacao] ON [dbo].[ImportacaoXML]
FOR UPDATE, INSERT
AS
BEGIN
  MERGE ProgramacaoBarcas AS target
  USING inserted AS source
    ON target.ViagemID = source.ViagemID
      AND target.Data = source.Data      
  WHEN MATCHED AND ProgramacaoBarcas.Bloqueada = 0 THEN 
    UPDATE SET ViagemID = source.ViagemID, Data = source.Data, 
               Extra = source.Extra, Modalidade = source.Modalidade,
               FleetID = source.FleetID, Partida = source.Partida, 
               Chegada = source.Chegada, Capacidade = source.Capacidade, 
               LocationID = source.LocationID, DestinoID = source.DestinoID, 
               CodLinha = source.CodLinha
  WHEN NOT MATCHED THEN
    INSERT (ViagemID, Data, Extra, Modalidade, FleetID, Partida, 
            Chegada, Capacidade, LocationID, DestinoID, CodLinha, Bloqueada)
    VALUES (
            ViagemID,Data, Extra, Modalidade, FleetID, Partida,
            Chegada, Capacidade, LocationID, DestinoID, CodLinha, 0);
END 
```

# java - 检查相机或图像的像素大小

> ID：16200123
> 
> 赞同：1
> 
> 时间：2013-04-24T19:02:35.273
> 
> 标签：java, android, android-camera

所以我一直在关注[这个](http://www.coderzheaven.com/2011/03/15/crop-an-image-in-android/)教程，它在教程中说它假设图像是 300px x 300px。当我刚刚从手机上的摄像头获取图像时（如果重要，不是通过实例），我如何计算出我的图像以 px 为单位有多大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:33:30.693

问题中引用的示例是从应用程序的资源中打开现有`Bitmap`图像，如下所示：

```
Bitmap bitmapOrg = BitmapFactory.decodeResource(getResources(),R.drawable.image); 
```

# 如何获取 Android 图像位图大小

`Bitmap`您可以使用[getWidth()](http://developer.android.com/reference/android/graphics/Bitmap.html#getWidth%28%29)和[getHeight()](http://developer.android.com/reference/android/graphics/Bitmap.html#getHeight%28%29)确定这个或任何的宽度和高度，如下所示：

```
int width = bitmapOrg.getWidth();
int height = bitmapOrg.getHeight(); 
```

完整的文档`Bitmap`在[这里](http://developer.android.com/reference/android/graphics/Bitmap.html)。

* * *

关于 300x300 像素大小，该示例强制使用这些大小并使用硬编码值创建新`Bitmap`的，如下所示：

```
int targetWidth = 300;
int targetHeight = 300;
Bitmap targetBitmap = Bitmap.createBitmap(targetWidth, targetHeight,Bitmap.Config.ARGB_8888); 
```

# xna - XNA 4.0 - 围绕自己的轴和世界中心旋转

> ID：16200125
> 
> 赞同：0
> 
> 时间：2013-04-24T19:02:46.783
> 
> 标签：xna, rotation, xna-4.0

我有行星围绕太阳旋转。太阳在中间。

我想让行星围绕太阳和它们自己的轴旋转。

我的轮换代码是：

```
 world_.SetValue(Matrix.CreateRotationZ(-(float)
                  ((gameTime.TotalGameTime.TotalSeconds % 100) * 2 * Math.PI / 100))); 
```

在我看来，这很容易实现（因为我可以在 OpenGL、Android 等中做到这一点）但由于某种原因我卡住了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:34:34.690

你想绕着自己的轴`transalate`旋转行星。`rotate`

```
worldMatrix=scaleMatrix * rotateMatrix(around own axis) * translateMatrix(around the sun) 
```

# javascript - javascript Window 对象没有局部变量吗？

> ID：16200128
> 
> 赞同：1
> 
> 时间：2013-04-24T19:02:56.323
> 
> 标签：javascript

当我在全局命名空间下定义一个局部变量时，它会被同名的实例变量覆盖。

```
var outerVar;

outerVar = 'outerVar';
this.outerVar = 'thisOuterVar';
console.log(outerVar);            // thisOuterVar 
```

但是，在函数内部不会发生同样的情况。

```
var fun;

fun = function() {
  var innerVar;
  innerVar = 'innerVar';
  this.innerVar = 'thisInnerVar';
  return console.log(innerVar);      // innerVar
};

fun(); 
```

此代码在 Firebug 中运行。

```
this.constructor                  // Window { } 
```

如果我在 node, where `this.constructor`is下运行相同的代码`[Function: Object]`，它会返回 'outerVar' 而不是 'thisOuterVar' 这很有意义。

为什么它在 Window 下的行为不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:11:49.027

如果您像第一个示例一样从全局空间在浏览器中运行代码：

```
var outerVar;

outerVar = 'outerVar';
this.outerVar = 'thisOuterVar';
console.log(outerVar); 
```

然后一切都在基本的全局空间下运行：`window`- 这基本上是浏览器js中所有环境的基本范围。

所以当你定义价值时，`var outerVar`它基本上就像`window.outerVar`or `this.outerVar`or `window['outerVar']`。

但是，如果您在匿名函数/对象函数下运行代码，例如：

```
fun = function() {
  var innerVar;
  innerVar = 'innerVar';
  this.innerVar = 'thisInnerVar';
  return console.log(innerVar);      // innerVar
}; 
```

`this`引用函数（对象）和引用函数的`var innerVar`范围（如基本 oop 类中的私有 var） 您可以将其视为`this.somevar`公共**和**私有**-**`var othervar`它们完全是不同的东西。

 **这也回答了您的**节点**问题，因为在**节点**中，一切都在“幕后”匿名函数下运行 - 这是**commonjs**方式 - 所以在**节点**中它与您的匿名函数示例基本相同。

**编辑：** 正如@bfavaretto 正确评论我的那样——它`this.innerVar`是根据你使用它的方式定义的——这意味着如果你将它用作常规功能当然`this`将是窗口——因此是全局的——如果你把它作为一个对象（就像我想的那样——它将被定义到实例并且是“**公共**的”）：

```
function func(){
   alert(this);
}

func(); //alerts 'window'

var f = new func(); //alerts 'object' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:08:34.320

在全局命名空间中，'a = 5;' 在语义上等同于 'window.a = 5;' 或 'this.a = 5;'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T19:12:40.210

你说，“当我在全局命名空间下定义一个**局部变量时......”。**这在术语上是矛盾的。当您在全局范围内时，没有“局部变量”之类的东西。至于函数内部发生的事情，当您声明时，`var innerVar;`您正在创建一个仅存在于该函数范围内的变量。然后，当您在函数内部进行修改时，您正在修改（或声明）当时发生的任何情况`this.innerVar`的变量，在这种情况下，它是或基本上是全局范围。`innerVar``this``window`**

# c++ - 检查二维数组中的对象是否为 Null

> ID：16200131
> 
> 赞同：0
> 
> 时间：2013-04-24T19:03:07.337
> 
> 标签：c++, arrays

我有一个二维数组，它应该包含不断移动的对象。

```
class ZombieLand : public Singleton<ZombieLand>
{
   DECLARE_SINGLETON(ZombieLand);
public:
    MachineState world [19][19];
    MachineState getWorld()
    {
       std::cout<<"World";
       return world[19][19];
    }
    void setWorld(MachineState & state)
    {
    world [state.x][state.y] = state;

    }
} 
```

我尝试检查某个位置是否为 Null，但“NULL”字不起作用，0 也不起作用

```
switch (state.m_Facing)
{
 case (MachineState::UP):
    if(ZombieLand::get().world[state.x][state.y-1] != NULL )
    {
       state.m_occupied = true;
       break;
    } 
```

我的问题是，如何检查我的世界数组的位置是否已经包含一个对象？先感谢您。

我的 MachineState 类

```
struct MachineState
{

template <typename MachineTraits>
friend class Machine;

enum Facing { UP, RIGHT, DOWN, LEFT};
MachineState()
    : m_ProgramCounter(1)
    , m_ActionsTaken(0)
    , m_Facing(UP)
    , m_Test(false)
    , m_Memory(nullptr)
    ,x(0)
    ,y(0)
    ,point1(25, 10)
    ,point2(10, 40)
    ,point3(40, 40)

{ }
  int m_ProgramCounter;
  int m_ActionsTaken;
  Facing m_Facing;
  bool m_Test;
  bool m_occupied;
  int x;
  int y;
  Point point1;
  Point point2;
  Point point3;

  int GetActionsPerTurn() const throw() { return m_ActionsPerTurn; }
  int GetMaxMemory() const throw() {return m_MaxMemory; }
  bool GetInfect() const throw() { return m_InfectOnAttack; }
  void setPoint(Point p1, Point p2, Point p3)
  {
    point1=p1;
    point2=p2;
    point3=p3;
 } 
```

};

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:08:21.487

你有两种方法可以去这里。

首先：在您的构造函数中，`MachineState`您必须设置一个变量，该变量确定该字段上的内容并添加一个函数，它会告诉您这一点。如果它的返回值为'0'，你就会知道该字段是空的。

第二：声明一个二维指针数组。

```
MachineState *world[19][19];
memset(world, 0, sizeof(world)); 
```

这个小代码会将所有指针设置为 0 (NULL)，然后您可以检查它。当然，您需要手动将对象分配给这个二维数组。

作为一个小优点，你的`getWorld()`函数看起来相当有问题。

请考虑改用此功能：

```
MachineState *getField(MachineState state) {
    return world[state.x][state.y];
} 
```

或者，您当然可以使用：

```
MachineState *getField(int X, int Y) {
    return world[X][Y];
} 
```

后一个函数可以称为：

```
MachineState *Field = ZombieLand::getField(state.x, state.y - 1);
if(Field != NULL) state.m_occupied = true; 
```

当然，您需要添加边界检查，但这超出了此答案的范围。

# php - 在 Ubuntu 上从代码安装 PHP 扩展，没有 makefile

> ID：16200133
> 
> 赞同：0
> 
> 时间：2013-04-24T19:03:14.200
> 
> 标签：php, ubuntu

我正在尝试安装这个 PHP 扩展：

[https://github.com/kajidai/php-libmemcached](https://github.com/kajidai/php-libmemcached)

没有生成文件。有 .c、.h、.xml 和 .mp4 文件。

如何在 Ubuntu 上安装它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:14:43.317

从源头构建它有什么特别的原因吗？

以这里提到的更简单的方式来做呢： [https ://www.digitalocean.com/community/articles/how-to-install-and-use-memcache-on-ubuntu-12-04](https://www.digitalocean.com/community/articles/how-to-install-and-use-memcache-on-ubuntu-12-04)

要从源代码安装它，您必须执行以下操作：

```
cd memcached/
phpize
./configure && make
sudo make install 
```

注意：如果**phpize**命令不起作用，则需要安装（apt-get install php5-dev）。

# parameters - zsh：参数扩展插入引号

> ID：16200142
> 
> 赞同：2
> 
> 时间：2013-04-24T19:03:41.233
> 
> 标签：parameters, quotes, zsh, expansion

我在 zsh 中进行参数扩展时遇到了问题：它用引号将我的变量括起来。

这是我的脚本。（为噪音道歉，唯一真正重要的行是最后一行`find`，但我想确保我没有隐藏我的代码细节）

```
 #broken_links [-r|--recursive] [<path>]
    # find links whose targets don't exist and print them. If <path> is given, look
    # at that path for the links. Otherwise, the current directory is used is used.
    # If --recursive is specified, look recursively through path.
    broken_links () {
        recurse=
        search_path=$(pwd)

        while test $# != 0
        do
                case "$1" in
                        -r|--recursive)
                                recurse=t
                                ;;
                        *)
                                if test -d "$1"
                                then
                                        search_path="$1"
                                else
                                        echo "$1 not a valid path or option"
                                        return 1
                                fi
                                ;;
                esac
                shift
        done

      find $search_path ${recurse:--maxdepth 1} -type l ! -exec test -e {} \; -print
    } 
```

为了清楚起见，在这一`find`行中，我想要这样：如果`recurse`为空，则替换`-maxdepth 1`。如果`recurse`设置为`t`，则不替换任何内容（即让 find 执行它是正常的递归行为）。

看起来可能有点奇怪，因为虽然这只是`${name:-word}`形式，但`word`实际上以连字符开头。（在此处查看更多信息[http://zsh.sourceforge.net/Doc/Release/Expansion.html#Parameter-Expansion](http://zsh.sourceforge.net/Doc/Release/Expansion.html#Parameter-Expansion)）

相反，发生的事情是，如果`recurse`为空，它会替换`"-maxdepth 1"`（注意周围的引号），如果`recurse`设置，它会替换`""`.

不递归时的确切错误是 `find: unknown predicate `-maxdepth 1'`. 例如，您可以自己尝试一下`find "-maxdepth 1"`。当我们确实想要递归时，发生了一些奇怪的事情，我无法解释，但错误是`find `t': No such file or directory`.

有谁知道如何让 zsh 在这个参数扩展中不加引号？我相信这是我的问题。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T20:43:05.217

zsh 实际上并没有在其周围添加引号，它只是没有对参数扩展的结果进行分词。这就是它被记录为默认行为的方式。从**参数扩展**部分`zshexpn`开头附近的手册页：

 **```
Note  in  particular  the  fact that words of unquoted parameters are not 
automatically split on whitespace unless the option SH_WORD_SPLIT is set 
```

因此，您可以通过设置该选项来设置该选项`setopt sh_word_split`，从而为所有参数扩展完成拆分，或者您可以使用以下命令明确请求它仅用于该扩展：

```
${=recurse:--maxdepth 1} 
```

注意`=`符号是大括号内的第一个字符。这也在`zshexpn`手册页中注明，搜索`${=spec}`.**

# jquery - 使用 wrap() 后尝试 append() 时出现奇怪的 jquery 错误

> ID：16200160
> 
> 赞同：0
> 
> 时间：2013-04-24T19:04:39.703
> 
> 标签：jquery, select, append

使用 jQuery，我

1.  创建了一个容器

2.  用它包裹一个元素

3.  通过将对象传递给其 jQuery 选择器来选择容器并尝试将元素添加到容器中

为什么没有元素`append()`？

在此处查看此示例：[jsfiddle.net/Tngh4](http://jsfiddle.net/Tngh4/)

```
 var container = document.createElement("div");
    //Wrapping some random element with the container
    $("#randomElem").wrap(container);

    var elem = document.createElement("div");
    //Selecting element this way and using append results in a strange bug
    $(container).append(elem); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:08:03.373

.wrap 用传入元素的副本包装元素，而不是传入元素本身。

> **此结构的副本**将环绕匹配元素集中的每个元素。此方法返回用于链接目的的原始元素集。

[http://api.jquery.com/wrap](http://api.jquery.com/wrap)

这是您使用`.wrap` [http://jsfiddle.net/Tngh4/1/的替代品的小提琴](http://jsfiddle.net/Tngh4/1/)

# javascript - AngularJS ng-repeat 中的多个倒计时

> ID：16200166
> 
> 赞同：1
> 
> 时间：2013-04-24T19:05:07.313
> 
> 标签：javascript, angularjs

我有一个小型 AngularJS 应用程序，它使用 JSON 和 UTC 时间格式从服务器带回用户列表和他们的下一次预定会议（假设在接下来的 8 小时内安排），以便于计算到本地时间. 我编写了能够计算剩余时间的 javascript，但我没有编写或想出的是如何在 Angular 中执行此操作。

我想要完成的是能够在预定会议完成之前的剩余时间或会议开始之前的剩余时间更新 DOM。如果使用 $timeout 服务更新单个元素似乎很简单，但是我不清楚如何在一次 ng-repeat 中为多个项目完成此任务。

任何想法，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:26:34.520

duplicate question, answered here: [https://stackoverflow.com/a/16204830/2275421](https://stackoverflow.com/a/16204830/2275421)

[http://plnkr.co/edit/0JqK96irV4ETdWZYxO3P?p=preview](http://plnkr.co/edit/0JqK96irV4ETdWZYxO3P?p=preview)

changed the html to refer to a separate array that doesn't affect ng-repeat:

```
<td>in {{_timeLeft[$index]}}</td> 
```

which is updated as follows:

```
$scope._timeLeft = [];

var intervalID = window.setInterval(function() {
    for (var i=0; i<$scope.items.length; i++) {
      $scope._timeLeft[i] = $scope.timeUntil($scope.items[i]._freeBusyTime);
    }
    $scope.$apply();
}, 1000); 
```

Note that $scope.$apply() is required to let Angular know that '_timeLeft' has been modified, which updates all references to it.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T19:20:33.790

在 ng-repeat 中，您将拥有一个项目列表。

```
<li ng-repeat="items" >{{ timeUntil(currentTime) }}</li> 
```

尝试只更新 $scope.currentTime 并让每个项目都有一个 timeUntil 方法。您只需从超时中更新 $scope.currentTime。Angular 将处理剩下的事情。

这里的关键是知道你只是在输入一个“表达式”，并且在角度上，一个表达式可能很复杂，甚至涉及一个函数调用。

# asp.net-mvc-4 - MVC 4.5：使用 SmtpClient 发送带有 .pdf 附件的电子邮件-我在这里缺少什么？

> ID：16200177
> 
> 赞同：3
> 
> 时间：2013-04-24T19:05:35.417
> 
> 标签：asp.net-mvc-4, sendmail, email-attachments, smtpclient

这不应该那么复杂。

我只是想发送一封带有 .pdf 附件的电子邮件。电子邮件与附件一起发送和接收，但长度始终小于 1k。当我尝试在 Outlook 中打开它时，Adobe Reader 提示我无法打开它，因为它要么是“不受支持的文件类型”，要么是“文件已损坏（解码错误）”。这是代码：

```
function Send() {
    var attachment = new Attachment(
    input.Data.ReceiptFile.InputStream, "Receipt.pdf", "application/octet-        stream"/*MediaTypeNames.Application.Pdf*/);

    this.SendSubmitReceiptNotification(new Attachment[] { attachment });
    }

private void SendSubmitReceiptNotification(Attachment[] attachments = null)
             {
                 try
                 {
                     var submitForSamplesFromEmail = Config.GetSetting("SubmitForSamples:FromEmail");
                     var submitForSamplesToEmails = Config.GetSetting("SubmitForSamples:ToEmails");

                     if (string.IsNullOrWhiteSpace(submitForSamplesFromEmail) || string.IsNullOrWhiteSpace(submitForSamplesToEmails))
                     {
                         // From/To missing.
                         return;
                     }

                     var toEmails = submitForSamplesToEmails.Split(
                         new char[] { ';' }, StringSplitOptions.RemoveEmptyEntries);

                     var to = toEmails.ToArray();
                     var from = submitForSamplesFromEmail;
                     var subject = "Test";
                     var body = "<strong>Hi There</strong>";
                     var isHtml = true;

                     //
                     // make the email object
                     MailMessage message = new MailMessage();

                     // set whether or not it's an html message
                     message.IsBodyHtml = isHtml;

                     // add the from address
                     message.From = new MailAddress(from);

                     // add the subject
                     message.Subject = subject;

                     // add the message body
                     message.Body = body;

                     // add the attachments
                     if (attachments != null && attachments.Length > 0)
                     {
                         // there are attachments that need attaching
                         foreach (Attachment att in attachments)
                         {
                             // add each attachemnt in order
                             message.Attachments.Add(att);
                         }
                     }

                     // add the list of who to send the email to
                     foreach (string address in to)
                     {
                         message.To.Add(address);
                     }
                     //
                     //message.HeadersEncoding = System.Text.Encoding.Unicode

                     SmtpClient smtpClient = new SmtpClient();

                     smtpClient.Send(message);

                     //Email.Send(to, from, subject, body, isHtml, attachments);
                 }
                 catch (Exception e)
                 {
                     var error = e.Message;
                 }
             } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-15T01:21:18.647

我认为您的输入流指向末尾，请尝试使用以下命令重置它：

```
input.Data.ReceiptFile.InputStream.Seek(0, SeekOrigin.Begin) 
```

一些流不支持搜索，这可能很烦人。在这种情况下，您需要复制到内存中的临时流中，从头开始查找，然后发送邮件

mimetype 也应该是“application/pdf” [（来源）](http://webdesign.about.com/od/multimedia/a/mime-types-by-content-type.htm)

# opencl - 流式全局内存：以相反顺序访问时性能损失？

> ID：16200179
> 
> 赞同：1
> 
> 时间：2013-04-24T19:05:38.053
> 
> 标签：opencl, gpgpu

当处理全局数组的元素（写入或读取）时，一个工作项中的一个条目，如果我访问相邻工作项的相邻内存地址，则效率更高。这是因为内存是“流式传输的”。

当此类访问的顺序是相反的顺序时，是否存在任何性能问题，即如果工作项`X`访问类似于的地址`size - 1 - X`？

另外，在考虑性能时是否应该只考虑第一个维度？

* * *

我目前正在为我们应该旋转矩阵的 GPGPU 课程做作业评估。我们应该在工作组中逐块执行此操作以实现最佳性能。这个想法是首先将源块复制到本地内存中，在本地旋转它，然后将其写回正确的位置。我首先实现了一个转置（镜像对角线），现在想要镜像它。如果这不是性能问题（最大性能是此作业任务的要求），我现在可以简单地访问具有镜像索引的矩阵的结果数组。

# excel - 在 Excel 中比较两组三列并突出显示具体差异（包括所需结果的屏幕截图！）

> ID：16200191
> 
> 赞同：4
> 
> 时间：2013-04-24T19:06:04.290
> 
> 标签：excel

我已经阅读了很多，在任何地方都找不到这个特定的问题。基本上，我有一个电子表格，其中包含两组三列，我想比较它们的差异，并在必要时有条件地格式化。

例如：

```
Expected                           Found
Port | Protocol | Process          Port | Protocol | Process
23     tcp        telnet           23     tcp        telnet
25     tcp        smtpd            25     tcp        foo
80     tcp        httpd            80     udp        bar
161    udp        snmpd 
```

我找到了一个名为 Kaleidoscope 的工具，它在这方面做得很好，并且实际上产生了我正在寻找的结果：

![截屏](https://i.stack.imgur.com/nJIE0.png)

有没有办法使用 Excel 条件格式来复制这个结果？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:09:18.280

您可以使用自定义条件格式公式来做到这一点：

![条件格式示例](https://i.stack.imgur.com/k5iLh.png)

祝你好运。

**编辑/添加**

您应该能够直接在 excel 中使用一些简单的 vlookup 列在空间上匹配表格。您只需为每个端口/协议组合创建一个额外的 ID 列：

![示例 2](https://i.stack.imgur.com/mTLZj.png)

然后您可以使用上述条件格式设置方法来突出显示不匹配的单元格。

# java - 分数不会发布到 Facebook

> ID：16200195
> 
> 赞同：1
> 
> 时间：2013-04-24T19:06:10.790
> 
> 标签：java, android, facebook, facebook-opengraph, facebook-android-sdk

我正在阅读`Facebook`游戏教程，并在[第 5 部分 - 发布 Open Graph Story。](https://developers.facebook.com/docs/tutorials/androidsdk/3.0/games/open-graph/)这部分侧重于将分数发布到用户分数提要。我遇到的问题是它执行代码，似乎没有任何问题，但没有在 Facebook 上发布分数。这是应该发布他们的分数的代码：

```
public void postScore(int score){
    Log.d(TAG, "postScore");
    Session session = Session.getActiveSession();

    if (session == null || !session.isOpened()) {
        Log.d(TAG, "SESSION == NULL OR IS NOT OPENED");
        return;
    }

    List<String> permissions = session.getPermissions();
    if (!permissions.containsAll(PERMISSIONS)) {
        Log.d(TAG, "requestPublishPermissions");
        requestPublishPermissions(session);

    }

    Bundle fbParams = new Bundle();
    fbParams.putString("score", "" + score);
    Request postScoreRequest = new Request(Session.getActiveSession(),
        "me/scores",
        fbParams,
        HttpMethod.POST,
        new Request.Callback() {
            @Override
            public void onCompleted(Response response) {
                FacebookRequestError error = response.getError();
                if (error != null) {
                    Log.d(TAG, "error posting");
                    handleError(error, false);
                }
                Log.d(TAG, "successfully posted");
            }
        });
    Request.executeBatchAsync(postScoreRequest);
}// end of postScore() method 
```

其中 PERMISSIONS 定义为：

```
protected static final List<String> PERMISSIONS = Arrays.asList("publish_actions"); 
```

requestPublishPermissions() 定义为：

```
protected void requestPublishPermissions(Session session) {
    if (session != null) {
        Session.NewPermissionsRequest newPermissionsRequest = new Session.NewPermissionsRequest(this, PERMISSIONS)
                // demonstrate how to set an audience for the publish permissions,
                // if none are set, this defaults to FRIENDS
                .setDefaultAudience(SessionDefaultAudience.FRIENDS)
                .setRequestCode(REAUTH_ACTIVITY_CODE);
        session.requestNewPublishPermissions(newPermissionsRequest);
    }
}//end of requestPublishPermissions() method 
```

任何帮助、建议或建议将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-09T14:00:48.543

Facebook 控制哪些作为故事进入，哪些不是。当您反复发布高分时，Facebook 不太可能将每个故事都发布到您的时间线上。如果您想要这种行为，我建议将发布直接作为自定义消息实现到时间线，而不是依赖分数 API 为您推送它们。

# ruby - ruby 中的类方法和不同的编程风格

> ID：16200197
> 
> 赞同：3
> 
> 时间：2013-04-24T19:06:14.990
> 
> 标签：ruby

我很好奇调用类方法以及两者之间是否有任何区别：

```
class Jt
  class << self
    def say_hello
      puts "I want to say hello"
    end
  end
end

class Jt2
  def self.say_hello
    puts "2 want to say hello"
  end
end

Jt.say_hello
Jt2.say_hello 
```

只是风格还是红宝石处理这些有什么不同？我总是将后者用于 Rails 的东西，但倾向于在元编程或 Rails 源代码中看到前者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:25:33.760

我认为它们之间的区别只是风格。他们都向类的单例类添加了一个方法。这是我对您的代码所做的调查：

```
class Jt
  class << self
    def say_hello
      puts "I want to say hello"
    end
  end
end

class Jt2
  def self.say_hello
    puts "2 want to say hello"
  end
end

p Jt.singleton_class.instance_method(:say_hello)   # => #<UnboundMethod: #<Class:Jt>#say_hello>
p Jt2.singleton_class.instance_method(:say_hello)  # => #<UnboundMethod: #<Class:Jt2>#say_hello> 
```

以防万一，我使用了 JRuby。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:09:54.520

```
class << self
    def say_hello
      puts "I want to say hello"
    end
end 
```

*   是一个`singleton class`里面`class Jt`。

这里有更多信息[`What's the difference between a class and the singleton of that class in Ruby?`](https://stackoverflow.com/questions/12430255/whats-the-difference-between-a-class-and-the-singleton-of-that-class-in-ruby)，看这里 [`Singleton class in Ruby`](http://www.wikyblog.com/AmanKing/Singleton_class_in_Ruby)

# sqlite - SQLite：双主键和自动增量

> ID：16200202
> 
> 赞同：3
> 
> 时间：2013-04-24T19:06:26.760
> 
> 标签：sqlite, android-sqlite

我正在尝试定义一个两行主键，以便第二列针对第一行的每个单独值自动递增。

例如我们会有：

```
X Y
A 1
A 2
A 3
A 4
A 5
B 1
B 2
B 3
C 1
D 1
E 1
E 2 
```

我想做一个：

```
create table t (x text, y integer autoincrement) primary key (x, y); 
```

但我从 SQLite 收到一个错误，说我在“自动增量”附近有一个错误。我能做些什么？（只要我能让它工作，即使是一个整数值 x 也可以）。

然后我想通过以下方式获得上述值：

```
insert into t (x) values ('A');
insert into t (x) values ('A');
insert into t (x) values ('A');
insert into t (x) values ('A');
insert into t (x) values ('A');
insert into t (x) values ('B');
insert into t (x) values ('B');
insert into t (x) values ('B');
insert into t (x) values ('C');
insert into t (x) values ('D');
insert into t (x) values ('E');
insert into t (x) values ('E'); 
```

谢谢，

杰森·波西特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T21:12:18.630

如果您的表中有两次或更多次相同的数字，则无法自动递增。我知道你想做什么，但它不能用自动增量来完成。

但是您可以
创建表 t (x text not null, y integer not null) 主键 (x, y);

另请参阅：[sqlite：具有自动增量列的多列主键](https://stackoverflow.com/questions/3289898/sqlite-multi-column-primary-key-with-an-auto-increment-column)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T21:31:06.187

你不能从 sqlite 做到这一点。您需要从上层（即您的程序）执行此操作。伪代码如下：

```
char current_symbol='A';
int count=0;
for(loop all your data)
{
    if(current_symbol == same text)
    {
      count++;    
    }
    else
    {
      current_symbol = same text;
      count=1;
    }

    insert into t (x,y) values ('A', count);
} 
```

# iis-7 - 删除 www URL 站点

> ID：16200203
> 
> 赞同：0
> 
> 时间：2013-04-24T19:06:32.820
> 
> 标签：iis-7, url-rewriting, rewrite

我创建了一个规则，它工作正常（从 url 中删除 www），除了我有多个域指向同一个源。如何将此规则仅应用于特定地址，如果我现在有 2 个域 abc1.com 和 abc2.com，如果我输入 abc2.com 它会重定向到 abc1.com

我错过了什么？，谢谢

```
<rule name="Remove www">
      <match url="(.*)" />
      <conditions>
        <add input="{HTTP_HOST}" pattern="^abc1\.com$" negate="true" />
      </conditions>
      <action type="Redirect" url="http://abc1.com/{R:1}" />
    </rule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:04:24.300

要删除`www`您已绑定的所有网站，您可以使用：

```
<rule name="Remove www">
    <match url=".*" />
    <conditions>
        <add input="{HTTP_HOST}" pattern="^www\.(.*)$" />
    </conditions>
    <action type="Redirect" url="http://{C:1}/{R:0}" />
</rule> 
```

它的作用：如果 url 确实以 开头`www.`，它将请求重定向到`www.`( `http://{C:1}/{R:0}`) 之后的任何内容。

如果您只想匹配您的 2 个网站`abc1.com`和`abc2.com`，您可以使用：

```
<rule name="Remove www">
    <match url=".*" />
    <conditions>
        <add input="{HTTP_HOST}" pattern="^www\.(abc[1|2]\.com)$" />
    </conditions>
    <action type="Redirect" url="http://{C:1}/{R:0}" />
</rule> 
```

（仅匹配`abc1.com`，替换`pattern="^www\.(abc[1|2]\.com)$"`为`pattern="^www\.(abc1\.com)$"`）

# c# - 使用 c# 使用 wsdl Web 服务时出错格式化程序在尝试反序列化消息时抛出异常

> ID：16200204
> 
> 赞同：1
> 
> 时间：2013-04-24T19:06:37.117
> 
> 标签：c#, asp.net, web-services, wsdl, webservice-client

我正在尝试使用 C# 使用 wsdl Web 服务（java）。我添加了服务引用并实现了 webmethod 调用，但它返回以下错误：格式化程序在尝试反序列化消息时抛出异常：

> 尝试反序列化参数[http://services.company.companyname.com.br:methodNameResponse](http://services.company.companyname.com.br:methodNameResponse)时出错。InnerException 消息是“第 1 行位置 456 中的错误”。不应出现命名空间“ [http://services.company.companyname.com.br](http://services.company.companyname.com.br) ”中的“EndElement”“methodNameReturn”。期待元素'idSomething'。'。有关更多详细信息，请参阅 InnerException。

我已经尝试了很多东西，比如大小限制、在主机文件上添加 ip 等，但没有成功。有人有想法吗？

代码是：

```
var ws = new webService(); //invoked using the service reference
var return = ws.methodName("x", "CAY", "5454545", "XXXX", "xxx", "09/07", "A", 1,
                                               "23/04/2013", "23/04/2013", "15:00", "17:00"); 
```

ws.methodName 返回错误。

我已经尝试过请求和响应对象并得到了同样的错误。

我使用网络参考进行了测试。我有一种方法不会返回错误，但我需要更改参考文件，在调用的方法上方注释以下行：

```
[System.Xml.Serialization.XmlTypeAttribute(Namespace="http://dto.services.company.trielo.com.br")] 
```

我正在发布 wsdl：`http://177.140.208.200:8998/mdc4web/services/VisitantesSASweb?wsdl`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T18:55:30.780

我发现 Visual Studio 生成的代理类和服务 WSDL 之间可能存在两个问题

查看代理生成的文件：

第一个错误是 RetVisSRV 类中 XmlTypeAttribute 属性的命名空间参数

```
[System.Xml.Serialization.XmlTypeAttribute(Namespace="http://dto.services.mdc4web.trielo.com.br")] 
```

您需要删除“dto”。

```
[System.Xml.Serialization.XmlTypeAttribute(Namespace="http://services.mdc4web.trielo.com.br")] 
```

第二点是“lst”数组声明的 XmlArrayItemAttribute 处的 elementName 参数。

```
[System.Xml.Serialization.XmlArrayItemAttribute("item", Namespace="http://services.mdc4web.trielo.com.br", IsNullable=false)] 
```

正确的“lst”

```
[System.Xml.Serialization.XmlArrayItemAttribute("lst", Namespace="http://services.mdc4web.trielo.com.br", IsNullable=false)] 
```

在这些更改之后应该可以正常工作。

这个命名空间问题是 AXIS 和 .NET 客户端之间的一个已知问题，但我不知道为什么还没有解决

请参阅[https://issues.apache.org/jira/browse/AXIS-2449](https://issues.apache.org/jira/browse/AXIS-2449)

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T20:21:05.357

之间...

> InnerException 消息是“第 1 行位置 456 中的错误”。不应出现命名空间“ [http://services.company.companyname.com.br](http://services.company.companyname.com.br) ”中的“EndElement”“methodNameReturn”。期待元素'idSomething'。'。有关更多详细信息，请参阅 InnerException。

...和...

> InnerException 是“第 1 行位置 456 中的错误。不期望来自命名空间 ' [http://services.company.companyName.com.br](http://services.company.companyName.com.br) ' 的 'EndElement''somethingReturn'。期望元素 'idSomething'。”} 和 InnerException 消息一片空白。

*听起来*好像 Web 服务的响应内容违反了用于反序列化它的模式（基本上我认为 Barrakoda 正在得到什么）——尽管如果没有看到响应内容本身和模式定义（可能通过对[http://services.company.companyname.com.br](http://services.company.companyname.com.br)的命名空间引用）。

# matlab - 为什么在绘制补丁后，Matlab 会更改已绘制线条的 LineWidth 和 LineStyle？

> ID：16200205
> 
> 赞同：1
> 
> 时间：2013-04-24T19:06:47.217
> 
> 标签：matlab, graphics, plot

`plot3`当我使用以下格式在 Matlab 中绘制多条线时：

```
 plot3([x1 x2], [y1 y2], [z1 z2], 'LineWidth', 2, 'LineStyle','--'); 
```

然后使用`patch`这样的方法绘制一个补丁：

```
 p = patch(x, y, z, 'k');
    set(p, 'EdgeColor', 'g', 'FaceColor', 'none', 'LineWidth', 3, 'EdgeAlpha', 0.7) 
```

已经绘制的线条的“LineWidth”和“LineStyle”略有变化，如下图所示（第一张图显示绘制补丁前的线条，第二张图显示绘制补丁后的变化，绿线）。你能告诉我有什么问题吗？

![在此处输入图像描述](https://i.stack.imgur.com/89SX7.png) ![在此处输入图像描述](https://i.stack.imgur.com/1Isnk.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:06:29.560

因为您的`set`命令重置了坐标区的全局属性。您应该将属性应用于每条线，而不是轴；

```
ahs = findall(gca,'type','line')
set(ahs(1), 'LineWidth', 2, 'LineStyle','--');
set(ahs(2), 'EdgeColor', 'g', 'FaceColor', 'none', 'LineWidth', 3, 'EdgeAlpha', 0.7); 
```

# javascript - JS 对象的 Stringify 增加了额外的数据

> ID：16200215
> 
> 赞同：0
> 
> 时间：2013-04-24T19:07:07.410
> 
> 标签：javascript, jquery, ajax, json

在获得了一些很棒的帮助之后，我使用以下代码段构建了一个 JS 对象：

```
var noticeMap = $('#preExamNoticesTable tbody tr').map(function() {
    var $cells = $(this).children();
    return {
      sequence: $cells.eq(0).children('input').val(),
      noticeUID: $cells.eq(1).text()
    };
}); 
```

生成的 noticeMap 示例如下所示（来自 firebug）：

```
jQuery(Object { sequence="1", noticeUID="JP-L23013663997630352308"},
Object { sequence="3", noticeUID="JP-L22913664089460612172"}, 
Object { sequence="4", noticeUID="JP-L22913664090188631530"}, 
Object { sequence="2", noticeUID="JP-L22913664089408651799"}) 
```

当我尝试`JSON.stringify(noticeMap)`它时，它的效果很好，除了它会向字符串中添加我不想通过我的 POST 传递的额外数据。它为每个值（来自 noticeMap 的对象）生成数字键，但在最后一个所需的 k:v 对之后，我的字符串还具有*上下文 obj*、*length*和*prevObject* obj。`stringify()`这是我和POST之后的JSON ：

```
{ "0": { "sequence": "1", "noticeUID": "JP-L23013663997630352308" }, "1": { "sequence": "3", "noticeUID": "JP-L22913664089460612172" }, "2": { "sequence": "4", "noticeUID": "JP-L22913664090188631530" }, "3": { "sequence": "2", "noticeUID": "JP-L22913664089408651799" }, "length": 4, "prevObject": { "0": {}, "1": {}, "2": {}, "3": {}, "length": 4, "prevObject": { "0": { "location": {}, "jQuery19105836315711643562": 1 }, "context": { "location": {}, "jQuery19105836315711643562": 1 }, "length": 1 }, "context": { "location": {}, "jQuery19105836315711643562": 1 }, "selector": "#preExamNoticesTable tbody tr" }, "context": { "location": {}, "jQuery19105836315711643562": 1 } } 
```

我不知道是什么导致了这种情况发生。我开始假设它与 stringify 如何处理从对象的 obj 创建 JSON 字符串有关，但是我不能使用我`noticeMaps()`现在工作得很好的方法。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T19:10:39.873

您正在序列化一个 jQuery 对象，因此其中的所有可序列化属性都包含在输出中。试试这个：

```
JSON.stringify(noticeMap.get()); // .get will return an array 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:16:09.083

[http://msdn.microsoft.com/en-us/library/ie/cc836459(v=vs.94).aspx](http://msdn.microsoft.com/en-us/library/ie/cc836459(v=vs.94).aspx)

> 如果 value 具有 toJSON 方法，则 JSON.stringify 函数使用该方法的返回值。如果 toJSON 方法的返回值未定义，则不转换成员。这使对象能够确定其自己的 JSON 表示。

您正在对对象进行字符串化，这就是为什么 stringify 以自己的方式定义 json

您需要`.get()`在地图对象上使用来获取参数数组

`noticeMap.get()`

# cron - 使用存储的密码设置 rsync cron 作业

> ID：16200220
> 
> 赞同：1
> 
> 时间：2013-04-24T19:07:26.870
> 
> 标签：cron, rsync, mount

我正在编写一个“安装”脚本，它将在客户端计算机上创建一个 rsync cron 作业以与我们的网络磁盘同步。因为我想尽可能地自动化这个设置过程，所以我不想要求客户端交换 pubkey。

这两个其他问题似乎暗示没有办法将 rsync 用作具有存储密码而没有 ssh 的 cron 作业：

[如何在不要求密码提示的情况下自动执行 rsync](https://stackoverflow.com/questions/2681788/how-to-automate-rsync-without-asking-for-password-prompt) [https://superuser.com/questions/325715/rsync-cron-job-with-a-password?answertab=active#tab-top](https://superuser.com/questions/325715/rsync-cron-job-with-a-password?answertab=active#tab-top)

但是，如果为了解决这个问题，我使用存储的密码将 rsync 命令与网络磁盘的挂载/卸载一起预订，然后重新同步到挂载点，是否有可能（并且是一个不可怕的想法）？

谢谢！

# css - 填充最后一个 div 的空白空间

> ID：16200222
> 
> 赞同：1
> 
> 时间：2013-04-24T19:07:35.983
> 
> 标签：css

我在主 div 中有 4 个 div。全部都向左浮动，最后一个留下一个空白空间。我想用最后一个 div（全宽）填充那个空间。

[http://jsfiddle.net/jZpWf/26/](http://jsfiddle.net/jZpWf/26/)

```
<div id="container">
    <div class="col1">
    </div>
    <div class="col2">
    </div>
    <div class="col3">
    </div>    
    <div class="col4">
    </div>    
</div>

#container {
    width: 600px;
    height: 200px;
    background:yellow;
}
.col1 {
    float:left;
    width:90px;
    height: 200px;
    background:red;
}
.col2 {
    float:left;
    width:130px;
    background:blue;
height: 200px;    
}
.col3 {
    float:left;
    width:130px;
    background:red;
    height: 200px;
}
.col4 {
    float:left;
    width:130px;
    background:blue;
    height: 200px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T19:20:28.153

只是不要让它向左浮动并使其 100% 填满所有剩余空间。

```
.col4 {
    background:blue;
    height: 200px;
} 
```

尝试[演示](http://jsfiddle.net/RPUX6/74/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:15:35.040

```
.col4 {
    float:left;
    width: 250px;
    background:blue;
    height: 200px;
} 
```

简单的答案，很快就会更好......

更好的一个，[jfiddle](http://jsfiddle.net/jZpWf/45/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T19:17:14.730

div的宽度总和与可用的总大小不对应，因此不要占用总面积，这可以使用百分比方法或CSS3 calc来完成

调整 .col4 的大小

```
.col4 {
    float:left;
    width:250px;
    background:blue;
    height: 200px;
} 
```

或者

使用 CSS3 计算 Col4

```
.col4 {
    float:left;
    width: calc(100% - 350px);
    background:blue;
    height: 200px;
} 
```

# javascript - 实施 Fisher-Yates 洗牌循环不起作用

> ID：16200223
> 
> 赞同：-5
> 
> 时间：2013-04-24T19:07:39.843
> 
> 标签：javascript

我正在尝试实现[Fisher–Yates shuffle](https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)，但是当我仅使用警报测试下面的代码时，它似乎没有循环。我想它在第一次之后就停止了。

```
function scrambleWord() {
    var letterArray = currentWord.split("");
    var m = letterArray.length, t, i;
    while (m) {
        x = Math.floor(Math.random() * m--);
        t = letterArray[m];
        letterArray[m] = array[i];
        array[i] = t;
    }
    scrambledWord = letterArray.join("");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:23:56.263

`array`，`i`并且`currentWord`从未在任何地方定义：

```
function shuffleWord(word) {
  var array = word.split('');
  var m = array.length, t, i;

  // While there remain elements to shuffle…
  while (m) {

    // Pick a remaining element...
    i = Math.floor(Math.random() * m--);

    // And swap it with the current element.
    t = array[m];
    array[m] = array[i];
    array[i] = t;
  }

  return array.join('');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:15:18.953

因为你还没有定义`currentWord`or `array`。

故障排除从浏览器的开发者控制台开始。

# c++ - 如何使用RAII获取类资源？

> ID：16200226
> 
> 赞同：7
> 
> 时间：2013-04-24T19:07:44.000
> 
> 标签：c++, raii

有一个例子表明以这种方式使用 RAII：

```
class File_ptr{
//...
   File* p;
   int* i; 
   public:
      File_ptr(const char* n, const char* s){
         i=new int[100];
         p=fopen(n,a); // imagine fopen might throws
      }
      ~File_ptr(){fclose(p);}
}

void use_file(const char* fn){
    File_ptr(fn,"r");
} 
```

是安全的。但我的问题是：如果抛出异常，`p=fopen(n,a);`那么分配给`i`的内存不会返回。这个假设是否正确`RAII`告诉你，每次你想要`X`安全时，所有获得的资源都`X`必须在堆栈上分配？如果`X.a`正在创建，那么资源是否`a`也必须放在堆栈上？一次又一次，我的意思是最后如果有一些资源放在堆上，如何用 RAII 处理它？如果不是我的课，即

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T19:32:32.097

RAII 的全部意义在于不将任何资源（如`int`-array）分配给悬空指针。相反，使用`std::vector`或将数组指针分配给类似`std::unique_ptr`. 这样，资源将在异常发生时被销毁。

不，您不必使用 STL，但要使用 RAII，也必须使用 RAII 创建最低基本资源（如堆分配的数组），最简单的方法是使用 STL 而不是而不是编写自己的智能指针或向量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T19:15:30.130

如果在 之后发生异常`new`，则必须捕获异常并删除构造函数中的指针，然后在这种情况下重新抛出，因为永远不会构造对象，所以不会调用析构函数。

否则如果`i`是 std::vector，它将自动清理

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-24T19:47:30.720

处理此问题的一种方法是将可能因异常而无效的所有内容放入本身使用 RAII 的局部变量中，然后在安全时分配给您的成员。

```
class File_ptr{
//...
   File* p;
   int* i; 
   public:
      File_ptr(const char* n, const char* s) i(NULL), p(NULL) {
         unique_ptr<int> temp_i=new int[100];  // might throw std::bad_alloc
         p=fopen(n,a); // imagine fopen might throws
         // possibility of throwing an exception is over, safe to set members now
         i = temp_i.release();
      }
      ~File_ptr(){fclose(p);}
} 
```

有关详细信息，请参阅[异常安全](http://en.wikipedia.org/wiki/Exception_safety)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-24T19:21:33.453

如果你知道它会抛出，把它放在一个`try-catch`.

```
File_ptr(const char* n, const char* s) {
    i=new int[100];
    try {
        p=fopen(n,a); // imagine fopen might throws
    } catch(...) {
         delete[] i;
         throw;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T19:53:12.353

```
File_ptr(const char* n, const char* s)
{
  std::unique_ptr<int[]> sp(new int[100]);
  p = fopen(n, s);
  i = sp.release();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-25T11:11:15.830

将此视为您不想使用的智力练习`std::vector`，您需要将班级划分为单一职责。这是我的“整数数组”类。它的职责是管理整数数组的内存。

```
class IntArray {
public:
    IntArray() : ptr_(new int[100]) {}
    ~IntArray() { delete[] ptr_; }
    IntArray(const IntArray&) = delete; // making copyable == exercise for reader
    IntArray& operator=(const IntArray&) = delete;
    // TODO: accessor?
private:
    int* ptr_;
}; 
```

这是我的文件处理类。它的职责是管理一个`FILE*`.

```
class FileHandle {
public:
    FileHandle(const char* name, const char* mode)
     : fp_(fopen(name, mode))
    {
        if (fp_ == 0)
            throw std::runtime_error("Failed to open file");
    }
    ~FileHandle() {
        fclose(fp_); // squelch errors
    }
    FileHandle(const FileHandle&) = delete;
    FileHandle& operator=(const FileHandle&) = delete;
    // TODO: accessor?
private:
    FILE* fp_;
}; 
```

请注意，我将构造错误转换为异常；`fp_`作为一个有效的文件指针是我希望维护的不变量，因此如果我无法设置此不变量，我将中止构造。

现在，`File_ptr`使异常安全变得容易，并且类不需要复杂的资源管理。

```
class File_ptr {
private:
    FileHandle p;
    IntArray i; 
public:
    File_ptr(const char* n, const char* s)
     : p(n, s)
     , i()
    {}
}; 
```

请注意缺少任何用户声明的析构函数、复制赋值运算符或复制构造函数。我可以交换成员的顺序，无论哪种情况，抛出哪个构造函数都无关紧要。

# c# - 在 Web 浏览器控件中加载 url 时出现脚本错误？

> ID：16200233
> 
> 赞同：0
> 
> 时间：2013-04-24T19:07:54.563
> 
> 标签：c#, webbrowser-control

```
<fieldset><b>&nbsp;</b><button id="submit" class="googleCheckPosButt" 
onclick="docSubmit()">CHECK</button></fieldset>
</form> 
```

这是我试图将数据放入表单并提交的网页的源代码。我可以成功地将数据输入到页面的文本字段中，但是当网页在网络浏览器中加载时，它会显示脚本错误，并且当我单击页面上的任何按钮时，没有任何效果。我通过添加隐藏了错误消息：

```
webBrowser1.ScriptErrorsSuppressed = true;

theElementCollection = webBrowser1.Document.GetElementsByTagName("input");
foreach (HtmlElement curElement in theElementCollection)
{
    if (curElement.GetAttribute("id").Equals("submit"))
    {
        curElement.InvokeMember("click");                       
    }
} 
```

请帮助我如何在不收到脚本错误消息的情况下将数据输入网站

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:27:37.450

虽然您可以使用浏览器控件来执行这种类型的自动表单提交，但我建议使用[http://htmlagilitypack.codeplex.com之类的东西以及](http://htmlagilitypack.codeplex.com)[HtmlAgilityPack Post Login](https://stackoverflow.com/questions/6532266/htmlagilitypack-post-login)中的示例来工作。

# ruby - 切换 ruby 版本以在服务器上运行命令

> ID：16200234
> 
> 赞同：0
> 
> 时间：2013-04-24T19:07:57.620
> 
> 标签：ruby, rvm, capistrano, rvm-capistrano

我有一个使用 capistrano 部署的 Ruby 应用程序（非 Rails）。我可以 ssh 进入我的服务器，`cd`进入`/current`目录并使用命令启动它

```
ruby tweet_tracker.rb start 
```

但是，如果我 cd 升级并运行

```
ruby current/tweet_tracker.rb start 
```

我得到错误：

```
/home/deploy/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- tweetstream (LoadError)
    from /home/deploy/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/deploy/dev/tweet_tracker/current/tweet_tracker.rb:4:in `<main>' 
```

现在这显然是因为我在每个目录中使用不同的 ruby​​ 版本运行命令。

我`.ruby-version`在应用程序中有一个文件，它指定`ruby-1.9.3-p392`. 我的 capistrano 部署脚本指定`set :rvm_ruby_string, '1.9.3-p392'`并且当它`bundle install`作为部署过程的一部分运行时，它会安装 193-p392 的 gem。

问题是，当我尝试从应用程序目录之外启动应用程序时，它使用默认的 Ruby（由 RVM 设置为 193 的较小版本）。

如何确保应用程序`.ruby-version`在运行时使用它指定的 Ruby 版本？

我宁愿不更改 RVM 的默认 Ruby 版本，因为系统上正在运行其他应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:48:49.963

这是一个示例项目：

```
myproject/
├── .ruby-version
└── subproject/
    ├── .ruby-version
    └── script.rb 
```

我的项目/.ruby_version：

```
system 
```

我的项目/子项目/.ruby_version：

```
ruby-1.9.3-p392 
```

我的项目/子项目/script.rb：

```
puts RUBY_VERSION 
```

现在我想你的问题可以像这样模仿：

```
$ cd myproject
$ ruby subproject/script.rb
1.8.7
$ cd subproject
$ ruby script.rb
1.9.3 
```

解决此问题的一种方法是使用记录不佳的命令`rvm exec`：

```
$ cd myproject
$ rvm 1.9.3-p392 exec ruby subproject/script.rb
1.9.3 
```

您可以将其扩展为自动读取`.ruby-version`文件：

```
$ rvm `cat subproject/.ruby-version` exec ruby subproject/script.rb
1.9.3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:54:50.907

在编写调用 Ruby 应用程序的脚本时，RVM 通常会非常痛苦。存在许多用户迁移到的更好的[Ruby 版本包装器。](https://github.com/sstephenson/rbenv/)RVM 的主要问题之一是它非常适合[交互式 shell](http://tldp.org/LDP/abs/html/intandnonint.html)，但不适用于脚本。

主要问题是 RVM 设置了一个[`after_cd`hook](https://rvm.io/workflow/hooks/)，这是你只能在交互式 shell 中获得的东西；因此，用户需要运行一系列与此类似的命令：

```
cd $APPDIR
source /home/$APPUSER/.rvm/scripts/rvm
rvm rvmrc trust && rvm rvmrc load
bundle exec ./bin/server start 
```

您可以使用它[`rvm wrapper`](https://rvm.io/integration/init-d/)来生成一个初始化脚本。虽然，例如，与[Upstart 配置](http://techhelplist.com/index.php/tech-tutorials/43-linux-adventures/85-upstart-ruby-job-with-rvm)集成有点棘手。

# c# - C# ASP.NET 询问用户是否重复是否要继续添加用户

> ID：16200236
> 
> 赞同：0
> 
> 时间：2013-04-24T19:08:03.503
> 
> 标签：c#, asp.net, confirmation

当用户单击 modalpopup 上的添加按钮时，是否有办法检查这是否是重复用户并为用户提供确认是否要继续添加记录？

这是一个 C# asp.net 应用程序。

add 当前所做的只是将名字和姓氏添加到数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:14:40.037

如果您正在使用这些`Membership`类，则不必手动检查。当您调用[Membership.CreateUser](http://msdn.microsoft.com/en-us/library/d8t4h2es.aspx)时，如果存在现有用户（以及其他错误），它将引发异常。

```
try
{
    Membership.CreateUser(...);
}
catch (MembershipCreateUserException e)    
{
    if(e.StatusCode == MembershipCreateStatus.DuplicateUserName)
    {
        //user already exists
    }
} 
```

[您可以在此处](http://msdn.microsoft.com/en-us/library/system.web.security.membershipcreatestatus.aspx)`MembershipCreateStatus`查看枚举的所有值。

# javascript - AngularJS 可以在刷新时监听 $locationChangeSuccess 吗？

> ID：16200239
> 
> 赞同：20
> 
> 时间：2013-04-24T19:08:10.107
> 
> 标签：javascript, angularjs

我正在`locationChangeSuccess`使用以下代码在 Angular 中收听 $：

```
$scope.$on('$locationChangeSuccess', function(event) {
  console.log('Check, 1, 2!');
}); 
```

但是，它只会在我导航到新链接时登录位置已更改的控制台。自然，这是有道理的。我的问题是，**如果我刷新页面，****如何让 Angular 监听？** `$locationChangeSuccess`

 *** * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-25T00:12:27.133

您不能从控制器内注册，因为 $locationChangeSuccess 发生在路由匹配和调用控制器之前。当您注册时，该事件已经被触发。

但是，您可以在应用程序引导阶段订阅 $rootScope 上的事件：

```
var app = angular.module('app', []);
app.run(function ($rootScope) {
    $rootScope.$on('$locationChangeSuccess', function () {
        console.log('$locationChangeSuccess changed!', new Date());
    });
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-24T19:17:06.167

您可能需要一个侦听`window.onbeforeunload`器，在窗口卸载它的资源（刷新）之前调用它。**

# r - 将具有 N 个类别的分类因子重新编码为 N 个二进制列

> ID：16200241
> 
> 赞同：19
> 
> 时间：2013-04-24T19:08:15.440
> 
> 标签：r, dataframe, factors

**原始数据框：**

```
v1 = sample(letters[1:3], 10, replace=TRUE)
v2 = sample(letters[1:3], 10, replace=TRUE)
df = data.frame(v1,v2)
df 
```

```
   v1 v2
公元前 1 年
2个氨基酸
3 毫升
4巴
5 毫升
6 立方米
7个氨基酸
8抗体
9交流
10 抗体

```

**新数据框：**

```
new_df = data.frame(row.names=rownames(df))
for (i in colnames(df)) {
    for (x in letters[1:3]) {
        #new_df[x] = as.numeric(df[i] == x)
        new_df[paste0(i, "_", x)] = as.numeric(df[i] == x)
    }
} 
```

```
   v1_a v1_b v1_c v2_a v2_b v2_c
1 0 1 0 0 0 1
2 1 0 0 1 0 0
3 0 0 1 0 0 1
4 0 1 0 1 0 0
5 0 0 1 0 0 1
6 0 0 1 0 1 0
7 1 0 0 1 0 0
8 1 0 0 0 1 0
9 1 0 0 0 0 1
10 1 0 0 0 1 0

```

对于小型数据集，这很好，但对于更大的数据集，它会变得很慢。

任何人都知道不使用循环的方法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-24T19:19:10.643

在@AnandaMahto 的搜索功能的帮助下，效果会更好，

```
model.matrix(~ . + 0, data=df, contrasts.arg = lapply(df, contrasts, contrasts=FALSE))
#    v1a v1b v1c v2a v2b v2c
# 1    0   1   0   0   0   1
# 2    1   0   0   1   0   0
# 3    0   0   1   0   0   1
# 4    0   1   0   1   0   0
# 5    0   0   1   0   0   1
# 6    0   0   1   0   1   0
# 7    1   0   0   1   0   0
# 8    1   0   0   0   1   0
# 9    1   0   0   0   0   1
# 10   1   0   0   0   1   0 
```

* * *

我想这就是你要找的。如果不是这样，我很乐意删除。[**感谢@ G.Grothendieck**](https://stackoverflow.com/a/16192335/559784)（再次）对`model.matrix`!

```
cbind(with(df, model.matrix(~ v1 + 0)), with(df, model.matrix(~ v2 + 0)))
#    v1a v1b v1c v2a v2b v2c
# 1    0   1   0   0   0   1
# 2    1   0   0   1   0   0
# 3    0   0   1   0   0   1
# 4    0   1   0   1   0   0
# 5    0   0   1   0   0   1
# 6    0   0   1   0   1   0
# 7    1   0   0   1   0   0
# 8    1   0   0   0   1   0
# 9    1   0   0   0   0   1
# 10   1   0   0   0   1   0 
```

* * *

注意：您的输出只是：

```
with(df, model.matrix(~ v2 + 0)) 
```

* * *

注 2：这给出了`matrix`. 相当明显，但`as.data.frame(.)`如果你想要一个`data.frame`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-01-17T03:54:39.660

插入符号的包中有一个函数可以满足您的要求，dummyVars。这是从作者文档中获取的用法示例：http: [//topepo.github.io/caret/preprocess.html](http://topepo.github.io/caret/preprocess.html)

```
library(earth)
data(etitanic)

dummies <- caret::dummyVars(survived ~ ., data = etitanic)
head(predict(dummies, newdata = etitanic))

  pclass.1st pclass.2nd pclass.3rd sex.female sex.male     age sibsp parch
1          1          0          0          1        0 29.0000     0     0
2          1          0          0          0        1  0.9167     1     2
3          1          0          0          1        0  2.0000     1     2
4          1          0          0          0        1 30.0000     1     2
5          1          0          0          1        0 25.0000     1     2
6          1          0          0          0        1 48.0000     0     0 
```

model.matrix 选项在您有稀疏数据并想使用的情况下可能很有用`Matrix::sparse.model.matrix`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-12-18T15:58:24.283

刚刚看到一个针对这里的封闭问题，还没有人提到使用这个`dummies`包：

`dummy.data.frame()`您可以使用构建在其之上但语法更简单的函数重新编码变量`model.matrix()`，并提供一些不错的选项，并将返回一个数据框：

```
> dummy.data.frame(df, sep="_")
   v1_a v1_b v1_c v2_a v2_b v2_c
1     0    1    0    0    0    1
2     1    0    0    1    0    0
3     0    0    1    0    0    1
4     0    1    0    1    0    0
5     0    0    1    0    0    1
6     0    0    1    0    1    0
7     1    0    0    1    0    0
8     1    0    0    0    1    0
9     1    0    0    0    0    1
10    1    0    0    0    1    0 
```

此函数的一些优点是您可以轻松地为新名称指定分隔符`sep=`（`all=F``dummy.classes`

您也可以只使用该`dummy()`功能将其应用于一列。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-25T07:10:29.753

一种相当直接的方法是仅`table`在每一列上使用，将列中的值按以下行数制成表格`data.frame`：

```
allLevels <- levels(factor(unlist(df)))
do.call(cbind, 
        lapply(df, function(x) table(sequence(nrow(df)), 
                                     factor(x, levels = allLevels))))
#    a b c a b c
# 1  0 1 0 0 0 1
# 2  1 0 0 1 0 0
# 3  0 0 1 0 0 1
# 4  0 1 0 1 0 0
# 5  0 0 1 0 0 1
# 6  0 0 1 0 1 0
# 7  1 0 0 1 0 0
# 8  1 0 0 0 1 0
# 9  1 0 0 0 0 1
# 10 1 0 0 0 1 0 
```

我使用`factor`了“x”来确保即使在列中没有“c”值的情况下，输出中仍然会有一个“c”列，用零填充。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-31T21:43:37.400

我最近遇到了另一种方式。我注意到，当您使用`contrasts`set to运行任何对比函数时`FALSE`，它会为您提供一种热编码。例如，`contr.sum(5, contrasts = FALSE)`给出

```
 1 2 3 4 5
1 1 0 0 0 0
2 0 1 0 0 0
3 0 0 1 0 0
4 0 0 0 1 0
5 0 0 0 0 1 
```

要获得所有因子的这种行为，您可以创建一个新的对比度函数并将其设置为默认值。例如，

```
contr.onehot = function (n, contrasts, sparse = FALSE) {
  contr.sum(n = n, contrasts = FALSE, sparse = sparse)
}

options(contrasts = c("contr.onehot", "contr.onehot"))
model.matrix(~ . - 1, data = df) 
```

这导致

```
 v1a v1b v1c v2a v2b v2c
1    0   0   1   0   0   1
2    0   1   0   1   0   0
3    0   0   1   0   1   0
4    1   0   0   0   1   0
5    0   1   0   0   1   0
6    0   1   0   0   0   1
7    1   0   0   0   1   0
8    0   1   0   0   1   0
9    0   1   0   1   0   0
10   0   0   1   0   0   1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T20:20:42.693

这是更一般情况下的解决方案，当字母数量没有先验指定时：

```
convertABC <- function(x) {

    hold <- rep(0,max(match(as.matrix(df),letters))) # pre-format output

    codify <- function(x) {                          # define function for single char

        output <- hold                               # take empty vector
        output[match(x,letters)] <- 1                # place 1 according to letter pos
        return(output)
    }

    to.return <- t(sapply(as.character(x),codify))   # apply it to whole vector
    rownames(to.return) <- 1:nrow(to.return)         # nice rownames
    colnames(to.return) <- do.call(c,list(letters[1:max(match(as.matrix(df),letters))])) # nice columnnames
    return(to.return)
} 
```

该函数接受一个字符向量，并将其重新编码为二进制值。要处理 中的所有变量`df`：

```
do.call(cbind,lapply(df,convertABC)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-14T04:09:49.507

```
library(correlationfunnel)
library(dplyr)
v1 = sample(letters[1:3], 10, replace=TRUE)
v2 = sample(letters[1:3], 10, replace=TRUE)
df = data.frame(v1,v2)
df

   v1 v2
1   b  c
2   c  c
3   c  a
4   c  c
5   a  a
6   b  b
7   b  c
8   b  c
9   c  a
10  b  c

df$id= 1:nrow(df)
df %>%
   select(-id) %>%
   binarize()

# A tibble: 10 x 6
   v1__a v1__b v1__c v2__a v2__b v2__c
   <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>
 1     0     1     0     0     0     1
 2     0     0     1     0     0     1
 3     0     0     1     1     0     0
 4     0     0     1     0     0     1
 5     1     0     0     1     0     0
 6     0     1     0     0     1     0
 7     0     1     0     0     0     1
 8     0     1     0     0     0     1
 9     0     0     1     1     0     0
10     0     1     0     0     0     1 
```

# android - 菜单项的上下文操作栏奇怪行为

> ID：16200242
> 
> 赞同：10
> 
> 时间：2013-04-24T19:08:19.533
> 
> 标签：android, contextual-action-bar

我在上下文操作栏中有一些奇怪的行为。

首先：

每次单击溢出按钮时，才会显示一个菜单项：

![CAB的点击行为溢出按钮](https://i.stack.imgur.com/nVA74.png)

第二/第三：

有没有办法让图标不占用这么多空间？

当我将添加属性更改`android:showAsAction="always"`为所有项目时，实际上有足够的空间来显示所有图标 -*但*我的共享图标不再可点击：

![始终带有 showAsAction 的所有项目](https://i.stack.imgur.com/GHbZn.png)

*清洁项目*没有帮助。

我在我的测试设备 (Galaxy S3) 上使用 Android 4.2.2。

我什至尝试在我的[XXX](http://en.wikipedia.org/wiki/Samsung_Galaxy_S_III) GS3 上完全刷新一个新的 ROM（现在是[CyanogenMod](http://en.wikipedia.org/wiki/CyanogenMod) 10.1，在[SlimBean](http://www.slimroms.net/)之前，也删除了底部的导航栏） - 没有帮助。

我也在[Nexus 4](http://en.wikipedia.org/wiki/Nexus_4)上试过。有更多的空间，所以分享按钮和删除按钮是可见的。当我启动操作模式时，共享按钮*不可*点击，但是当我将设备切换到横向模式时它可以工作，当我将它转回纵向时它仍然可以工作。所以基本上在 Nexus 4 上，分享按钮在旋转之前不起作用。

* * *

显现：

```
<uses-sdk android:minSdkVersion="14" android:targetSdkVersion="17" /> 
```

编译`minSdkVersion=17`没有区别。

我从这样的片段启动动作模式：

```
mActionMode = activity.startActionMode(mMultipleCallback); 
```

在`ActionMode.Callback`我填充菜单：

```
@Override
public boolean onCreateActionMode(ActionMode mode, Menu menu) {
    MenuInflater inflater = mode.getMenuInflater();
    inflater.inflate(R.menu.management_cab, menu);
    MenuItem item = menu.findItem(R.id.managementCABShare);
    mShareActionProvider = (ShareActionProvider) item.getActionProvider();
    //...other stuff
    return true;
} 
```

这是 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:title="@string/checkAll"
        android:id="@+id/managementCABCheckAll"
        android:icon="@android:drawable/checkbox_on_background">
    </item>
    <item
        android:title="@string/enable"
        android:id="@+id/managementCABEnable"
        android:icon="@drawable/sphere_green">
    </item>
    <item
        android:title="@string/disable"
        android:id="@+id/managementCABDisable"
        android:icon="@drawable/sphere_red">
    </item>
    <item
        android:title="@string/delete"
        android:id="@+id/managementCABDelete"
        android:icon="@android:drawable/ic_menu_close_clear_cancel">
    </item>
    <item
        android:title="@string/share"
        android:id="@+id/managementCABShare"
        android:actionProviderClass="android.widget.ShareActionProvider"
        android:icon="@android:drawable/ic_menu_share">
    </item>
    <item
        android:title="@string/export"
        android:id="@+id/managementCABExport"
        android:icon="@drawable/explorer">
    </item>
</menu> 
```

为了完整起见，整个`callback`：

```
protected ActionMode.Callback mMultipleCallback = new ActionMode.Callback() {

    private ShareActionProvider mShareActionProvider;

    @Override
    public boolean onCreateActionMode(ActionMode mode, Menu menu) {
        MenuInflater inflater = mode.getMenuInflater();
        inflater.inflate(R.menu.management_cab, menu);
        MenuItem item = menu.findItem(R.id.managementCABShare);
        mShareActionProvider = (ShareActionProvider) item.getActionProvider();
        hideUnwantedCABItems(menu);
        return true;
    }

    @Override
    public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
        List<Integer> checkedPositions = getAllCheckedPositions();
        switch (item.getItemId()) {
        case R.id.managementCABCheckAll:
            changeCheckedOfAllItems(true);
            return true;
        case R.id.managementCABEnable:
            changeEnabled(checkedPositions, true);
            return true;
        case R.id.managementCABDisable:
            changeEnabled(checkedPositions, false);
            return true;
        case R.id.managementCABDelete:
            if (deleteAlert == null)
                createDeleteDialog(checkedPositions);
            initDeleteDialog(checkedPositions);
            return true;
        case R.id.managementCABShare:
            Intent shareIntent = new Intent();
            shareIntent.setAction(Intent.ACTION_SEND_MULTIPLE);
            shareIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, exportItemsAndGetUris(checkedPositions));
            shareIntent.setType("application/xml");
            setShareIntent(shareIntent);
            return true;
        case R.id.managementCABExport:
            String message;
            if (StorageController.copyUriListToExportFolder(exportItemsAndGetUris(checkedPositions)))
                message = getActivity().getString(R.string.export_success);
            else
                message = getActivity().getString(R.string.export_fail);

            Toast.makeText(getActivity(), message + ":\n" + StorageController.getExternalExportApplicationFolder(), Toast.LENGTH_LONG).show();
            return true;
        default:
            return false;
        }
    }

    @Override
    public void onDestroyActionMode(ActionMode mode) {
        mActionMode = null;
        changeCheckedOfAllItems(false);
    }

    @Override
    public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
        return false;
    }

    private void setShareIntent(Intent shareIntent) {
        if (mShareActionProvider != null) {
            mShareActionProvider.setShareIntent(shareIntent);
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-29T14:30:15.990

好的，无法点击的共享图标的解决方案。这是我对 API 的一种误解。

我认为您可以`SharedActionProvider-Item`像对待菜单 XML 文件中的所有其他项目一样对待。但实际上你不能。`onActionItemClicked`当它显示为操作时，甚至不会触发此图标（这就是为什么添加时它不可点击的原因`showAsAction=always`）。有趣的是，当图标未显示时触发点击事件，但在溢出菜单中可见。**这可能是上下文操作栏中的实际错误！**

现在我终于弄清楚了应该如何触发`SharedActionProvider-Item`：

您必须（！）`Intent`在`onCreateActionMode`方法中添加一个：

```
public boolean onCreateActionMode(ActionMode mode, Menu menu) {
    MenuInflater inflater = mode.getMenuInflater();
    inflater.inflate(R.menu.management_cab, menu);
    MenuItem item = menu.findItem(R.id.managementCABShare);
    initSharedActionProvider(item); //Check out this method in the next code fragment
    return false;
} 
```

现在你可能会说：“你这个白痴，这很明显，最好将意图始终设置在那里，而不是像`onActionItemClicked`以前那样在方法中设置”。

对不起，但我不同意：在这里设置它并没有什么意义。原因是：对我来说，您检查的每一个附加项目都会改变意图。它为您检查的每个项目创建一个导出 XML 文件，我真的不想在每次单击图标时创建一个 XML 文件。这是没有意义的，我希望只有在用户真正想要导出项目时才创建所有 XML 文件。

所以基本上我为此做了一个解决方法。一开始，我做一个`Intent`并添加一个空的`List<Uri>`。这个列表作为成员变量保存在我的类中，所以如果我向它添加项目，这些项目也将在意图中。然后，当用户单击共享项目时，列表将填充所有选定的项目。为了做到这一点，我覆盖了`OnShareTargetSelectedListener`. 当用户单击具体的共享目标（如电子邮件、保管箱等）时会触发此方法。

现在这是整个代码（该方法仅从 调用一次`onCreateActionMode`）：

```
private void initSharedActionProvider(MenuItem item) {
    mShareActionProvider = (ShareActionProvider) item.getActionProvider();
    mShareActionProvider.setOnShareTargetSelectedListener(new OnShareTargetSelectedListener() {
        @Override
        public boolean onShareTargetSelected(ShareActionProvider source, Intent intent) {

            //Here is the exportedFiles list populated
            exportItemsAndSetList(getAllCheckedPositions());
            return true;
        }
    });

    Intent shareIntent = new Intent();
    shareIntent.setAction(Intent.ACTION_SEND_MULTIPLE);

    //exportedFiles is a member Variable which I populate with the selected items, with the exportItemsAndSetList method
    shareIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, exportedFiles);
    shareIntent.setType("application/xml");
    mShareActionProvider.setShareIntent(shareIntent);
} 
```

我希望你明白我在那里做了什么。如果没有，请随时询问。

有了以上所有这些，我的一个问题就解决了（共享图标在显示为图标时不可点击）-但其他两个保持打开状态（图标不应该使用太多空间和第一个问题）。

* * *

问题2解决了：

似乎Android需要更高分辨率文件夹（hdpi，xhdpi）中的图标真正具有更高的分辨率 - 我的启用/禁用图标只有32x32像素的大小（我只是将它们放在所有文件夹中），因此Android不知何故弄得一团糟，所以只有三个图标适合操作栏。我刚刚删除了所有图标，但 mdpi 中的原始图标为 32x32 像素。现在 Android 升级了 32x32 像素的图标，并且可以在操作栏中显示五个项目。这有点奇怪。

* * *

问题1解决了：

看起来这与问题2直接相关，我一解决问题2，删除图标就直接放在操作栏上。

另外通过一些测试，我发现如果我添加`showAsAction=never`到删除图标，文本总是在那里。我真的认为这与问题 2 有关（图标确实在那里做了坏事）。

* * *

我的问题几乎解决了。

我想我现在遇到了一个**（新的）真正的错误**：最近使用的共享操作漂浮在溢出图标上。点击那里时，溢出菜单仍然打开，但看起来很糟糕：

![溢出图标上方的最新共享图标](https://i.stack.imgur.com/9q7Jc.png)

我是如何解决这个问题的？

好吧，我已经搞定了这个****，所以我只是将它添加`showAsAction=never` 到了共享图标中。（是的，我看到了[这个](https://stackoverflow.com/questions/10706564/how-do-you-turn-off-share-history-when-using-shareactionprovider)，但如果我这样做，我会得到一个例外，这也是正常生命周期的另一个变化......）

如果您知道比我使用的更好的解决方案，请随时发表评论：>

# c# - 带有自定义构造函数的 ServiceBehavior。需要注入依赖

> ID：16200244
> 
> 赞同：1
> 
> 时间：2013-04-24T19:08:22.340
> 
> 标签：c#, wcf, dependency-injection

我有一个以`ServiceBehavior`这种方式实现的自定义，作为装饰 WCF 服务的属性：

```
public sealed class NHibernateSessionServiceBehavior : Attribute, IServiceBehavior
{
    public Type ServiceType { get; set; }
    public IConfigurator Configurator { get; set; }

    public NHibernateSessionServiceBehavior(Type serviceType, IConfigurator configurator)
    {
        ServiceType = serviceType;
        Configurator = configurator;
    }

    #region Implementation of IServiceBehavior

    public void Validate(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
    {
    }

    public void AddBindingParameters(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase, Collection<ServiceEndpoint> endpoints, BindingParameterCollection bindingParameters)
    {
        NHibernateSessionHelper.Instance.InitializeSessionFactory(Configurator);
    }

    public void ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
    {
        foreach (ChannelDispatcher channelDispatch in serviceHostBase.ChannelDispatchers)
        {
            foreach (EndpointDispatcher endpointDispatch in channelDispatch.Endpoints)
            {
                endpointDispatch.DispatchRuntime.MessageInspectors.Add(new NHibernateMessageInspector(ServiceType));
            }
        }
    }

    #endregion
} 
```

我遇到的问题是我需要将 的实例传递给属性构造函数`IConfigurator`，但编译器显然不允许我这样做。我需要一种方法将此行为添加到注入`IConfigurator`实例的服务中。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:57:52.100

看看这篇文章：[Using Instance Provider and ServiceHostFactory to Construct the Service](http://msdn.microsoft.com/en-us/library/vstudio/hh323725%28v=vs.100%29.aspx)。

这个系列也很有帮助：

[http://weblogs.asp.net/fabio/archive/2009/03/24/inversion-of-control-with-wcf-and-unity.aspx](http://weblogs.asp.net/fabio/archive/2009/03/24/inversion-of-control-with-wcf-and-unity.aspx) [http://weblogs.asp.net/fabio/archive/2009 /03/24/inversion-of-control-with-wcf-and-unity-part-ii.aspx](http://weblogs.asp.net/fabio/archive/2009/03/24/inversion-of-control-with-wcf-and-unity-part-ii.aspx)

# deployment - Azure 网站中的自动化构建被破坏

> ID：16200245
> 
> 赞同：-1
> 
> 时间：2013-04-24T19:08:31.123
> 
> 标签：deployment, azure, tfs, tfsbuild, azure-web-app-service

我们已将 Azure 网站配置为自动从 TFS 签出并进行部署。突然部署停止工作。大多数消息说“无法连接到远程服务器”

我打开了构建定义，在“构建默认值”暂存位置上，选择的选项是“将构建输出复制到以下放置文件夹”，文本框上的选项是“/#”

这是在 TFS 和 Azure 之间建立链接时默认显示的选项，但打开此选项后，我无法保存构建定义。如果我选择“不将输出文件复制到放置文件夹”选项，则构建中断/不部署。

任何想法如何解决这一问题？我们没有改变任何东西，它只是今天停止工作。如果我删除所有构建定义并再次从 TFS 建立链接，结果是相同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T20:12:07.670

使用 Team Foundation 服务？今天托管的构建服务存在问题 - [http://tfs.visualstudio.com/en-us/support/current-service-status](http://tfs.visualstudio.com/en-us/support/current-service-status)

# php - Preg_match_all 只输出数字。我也需要信

> ID：16200246
> 
> 赞同：1
> 
> 时间：2013-04-24T19:08:34.363
> 
> 标签：php, preg-match-all

我正在修改一个脚本以从一长页文本中输出一个字符串，这就像一个魅力，唯一的问题是第二组只会输出数字。

```
<?php
$file = file_get_contents('page.htm'); 
preg_match_all('#<a.*?href="(?:http://)www.site.com/profiles/(?P<id>\d+)[^‌​&gt;]+#msi',$file, $matches); 
$f = fopen("file.txt", "w");
print_r($matches['id']);
fwrite($f, print_r($matches['id'], true));
fclose($f); 

echo "<br><br>";

preg_match_all('#<a.*?href="(?:http://)www.site.com/id/(?P<id2>\d+)[^‌​&gt;]+#msi',$file, $matches2); 
$f = fopen("file.txt", "w");
print_r($matches2['id2']);
fwrite($f, print_r($matches2['id2'], true));
fclose($f); 
?> 
```

顶部的应该这样做，但底部的需要允许所有字符，包括特殊字符，是否缺少某些内容或我需要添加的内容？万分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:36:42.783

嗯，想通了。

改变

```
'#<a.*?href="(?:http://)www.tf2items.com/id/(?P<id2>\w+)[^‌​&gt;]+#msi' 
```

至

```
'#<a.*?href="(?:http://)www.tf2items.com/id/(?P<id2>\d+)[^‌​&gt;]+#msi' 
```

显然 \w 只是字母 (wtf) 而 \d 就是一切

# git - Git - Github 推送历史

> ID：16200252
> 
> 赞同：4
> 
> 时间：2013-04-24T19:09:05.667
> 
> 标签：git, github

是否可以查看何时在存储库上执行推送操作，尤其是在 Github 上？

我们有一个构建环境（Jenkins），它可以根据各种事件自动构建我们的产品：

*   当用户在 Github 上推送新提交时
*   每晚
*   根据用户要求

我希望能够确定用于构建这些包的确切提交（构建最终会在 Jenkins 中自动删除，所以我不能依赖 Jenkins 构建），因为我知道我有构建的日期和时间。

虽然大多数时候，我可以在 git 中查找，但有时，开发人员已经进行了更改并在本地提交了它们，但没有将它们推送到 github 上。当他稍后推送他的更改时，就不可能知道使用什么源代码来构建包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-15T10:12:55.680

实际上，我发现 Jenkins Git 插件会自动设置以下可以在构建脚本中使用的环境变量：

```
GIT_COMMIT - SHA of the current
GIT_BRANCH - Name of the branch currently being used, e.g. "master" or "origin/foo"
GIT_PREVIOUS_COMMIT - SHA of the previous built commit from the same branch (the current SHA on first build in branch)
GIT_URL - Repository remote URL
GIT_URL_N - Repository remote URLs when there are more than 1 remotes, e.g. GIT_URL_1, GIT_URL_2
GIT_AUTHOR_EMAIL - Committer/Author Email
GIT_COMMITTER_EMAIL - Committer/Author Email 
```

简单地引用`GIT_COMMIT`环境变量就足以追踪编译和打包的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:17:00.080

嗯，我认为最简单的方法是使用 Jenkins。

您可以为 Jenkins 设置不同的通知方式。可以看到每个提交。我们将它与 XMPP 扩展一起使用，它非常有用。但为此，您必须运行 jenkins。

否则，您必须构建一个挂钩，当有东西推送到您的存储库时，它会向您发送一封电子邮件。

[http://git-scm.com/book/en/Customizing-Git-Git-Hooks](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)

有一个电子邮件工作流挂钩部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T19:23:13.283

似乎可以使用[Github 的 Repo Hooks API](http://developer.github.com/v3/repos/hooks/)跟踪推送，但我没有使用它们。

对于非 github git repo：

如果它不是裸露`.git/logs/refs/heads/<branch name>`的，则记录分支何时更新，可能是`git push`. （注意：文件在某些​​情况下会被修剪。）

不知道如何在裸仓库中直接检查这个，因为他们不维护 reflogs。`git hooks`如果我必须跟踪这一点，我会看看。

# php - 在程序环境中使用 PDO 的最佳方式

> ID：16200254
> 
> 赞同：0
> 
> 时间：2013-04-24T19:09:36.727
> 
> 标签：php, pdo

我刚从 MySQL 切换到 PDO，我正在使用准备好的语句。

我曾经有 MySQL 的功能，在每个页面上我都做了类似的事情

```
$Query = "UPDATE users SET f_name={$POST["first_name"]}, l_name={$_POST["last_name"]} ";
$SQL_obj->runquery($query, "update"); 
```

现在使用 PDO 和准备好的语句，是否也可以创建函数，或者只在每个查询上执行 prepare()、bindValue() 和 execute()？

我似乎无法编写好的 PDO 函数。有人可以建议吗？我的代码主要是程序性的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:22:53.313

您可以扩展 PDO 并添加一个辅助方法，它可以同时执行以下操作：

```
class MyPDO extends PDO{

  public function prepareAndExecute($sql){

    // get all arguments passed to this function as an array
    $args = func_get_args();

    // drop first argument ($sql)
    array_shift($args);

    $stm = $this->prepare($sql);
    $stm->execute($args);

    return $stm;
  }

} 
```

然后：

```
$results = $connection->prepareAndExecute(
  'UPDATE users SET f_name=?, l_name=?', 
     $POST["first_name"],
     $_POST["last_name"]
); 
```

( `$connection`= 的一个实例`MyPDO`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:12:13.857

PDO 已经是一个类，所以在它周围写一个“包装器”有点过头了。只需使用这种方式：

```
$Query = "UPDATE users SET f_name=:firstname, l_name=:lastname ";
$sth = $dbh->prepare($Query);
$sth->execute(array(':firstname' => $_POST['firstname'], ':lastname' => $_POST['lastname'])); 
```

你的例子很容易被注射。

# jasper-reports - 是否可以在页脚中控制 Jasper Reports 字段的使用？

> ID：16200258
> 
> 赞同：0
> 
> 时间：2013-04-24T19:09:53.187
> 
> 标签：jasper-reports

我正在尝试使用简单的表达式添加一个文本字段：

```
$F{foo} 
```

到页脚带。但是，似乎无论我选择什么评估时间，它总是`foo`从第一行开始显示字段的值。是否可以让它显示*最后*一行的价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T21:17:53.910

你可以试试这个示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="show_last_row_in_footer" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="106e6d12-70ca-44b4-a55d-845952f57346">
    <queryString>
        <![CDATA[]]>
    </queryString>
    <field name="name" class="java.lang.String"/>
    <field name="id" class="java.lang.String"/>
    <sortField name="name"/>
    <variable name="firstValueOnPage" class="java.lang.String" resetType="Page" calculation="First">
        <variableExpression><![CDATA[$F{id}]]></variableExpression>
    </variable>
    <columnHeader>
        <band height="20">
            <staticText>
                <reportElement uuid="5f3d2dfa-b44c-43eb-ac49-aa4ebb81b733" x="0" y="0" width="100" height="20"/>
                <box>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Center">
                    <font isBold="true" isItalic="true"/>
                </textElement>
                <text><![CDATA[Id]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="5f3d2dfa-b44c-43eb-ac49-aa4ebb81b733" x="100" y="0" width="100" height="20"/>
                <box>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Center">
                    <font isBold="true" isItalic="true"/>
                </textElement>
                <text><![CDATA[Name]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="50" splitType="Stretch">
            <textField>
                <reportElement uuid="55abd358-2770-4337-a117-3f8592ce0a34" x="100" y="0" width="100" height="50"/>
                <box leftPadding="10">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement/>
                <textFieldExpression><![CDATA[$F{name}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="55abd358-2770-4337-a117-3f8592ce0a34" x="0" y="0" width="100" height="50"/>
                <box leftPadding="10">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement/>
                <textFieldExpression><![CDATA[$F{id}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <pageFooter>
        <band height="43" splitType="Stretch">
            <textField evaluationTime="Page">
                <reportElement uuid="e147d45b-45a3-4749-829f-b648a2c7805f" x="0" y="0" width="163" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA["The last id on page: " + $F{id}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="bbf6f99a-c60c-42e9-8147-97b9f3ee4316" x="326" y="0" width="138" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA["The first id on page: " + $V{firstValueOnPage}]]></textFieldExpression>
            </textField>
            <textField evaluationTime="Report">
                <reportElement uuid="e147d45b-45a3-4749-829f-b648a2c7805f" x="163" y="0" width="163" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA["The last id for report: " + $F{id}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="9ecd61c0-98fa-4282-a0d1-cd8cd325f987" x="435" y="23" width="80" height="20"/>
                <textElement textAlignment="Right"/>
                <textFieldExpression><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></textFieldExpression>
            </textField>
            <textField evaluationTime="Report">
                <reportElement uuid="1c663c4d-1279-447a-91d6-6d03bc53a841" x="515" y="23" width="40" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
            </textField>
        </band>
    </pageFooter>
</jasperReport> 
```

我已经用这个*CSV 数据源*测试了样本：

```
Oslo,45
Berne,22
Boston,32
Chicago,39
Chicago,35
New York,44
Chicago,11
Dallas,47
Oslo,42
Dallas,43
Paris,5
San Francisco,48
Paris,18
Dallas,4
Boston,23
Dallas,0
Dallas,19
Dallas,10
Lyon,38
Lyon,2
Dallas,40
Dallas,36
Dallas,37
Lyon,28
Lyon,17
New York,46
New York,41
Paris,25
San Francisco,7
Berne,9 
```

结果报告的第一页将是（内置在*iReport v 4.8.0 中*）：

![通过 iReport 生成的第一页报告](https://i.stack.imgur.com/wyx2L.png)

结果报告的最后一页将是（内置在*iReport v 4.8.0 中*）：

![在此处输入图像描述](https://i.stack.imgur.com/9dIbf.png)

为了获取*页面*值的最后一行（蓝色），我使用了默认*评估*时间或*评估*时间等于**页面**值的表达式。

为了获得*页面值的第一行*（红色），我使用了具有以下属性的变量（ *firstValueOnPage ）：*
*resetType*：**页面**
*计算*：**First**

为了显示*整个报告*（绿色）值的最后一行，我使用了*评估*时间等于**报告**值。

* * *

我用过*iReport 4.8.0*。

我添加了按*名称*字段排序。无需排序，您将获得相同的数据行为。

# tsql - 来自单个列表的 SQL 左右部件列表（列出的所有部件）

> ID：16200260
> 
> 赞同：0
> 
> 时间：2013-04-24T19:10:00.463
> 
> 标签：tsql

例如，我有一个零件清单：

PartNo, Side, LotNo, BatchNo

边是“左”或“右”。左侧和右侧的 LotNo 和 BatchNo 将匹配。如果某个部分没有匹配项，我需要显示该部分，左侧或右侧，缺少的一侧为空白。这很容易，直到最后一部分。

```
部件侧批次 部件侧 批次
122A 左 10 501 122B 右 10 501
238A 左 10 601 238B 右 10 601
882A 左 20 801             
                            992B 右 20 802
332A 左 20 901 322B 右 20 901

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:14:22.027

尝试这个。[SQL小提琴](http://sqlfiddle.com/#!3/4c4a13/10)

```
SELECT
pl.[Part],pl.[Side], pl.[Batch], pl.[Lot],
pr.[Part] as Part_R, pr.[Side] AS Side_R, pr.[Batch] As Batch_R, pr.[Lot] AS Lot_R
FROM 
  (SELECT * FROM part WHERE Side = 'Left') pl
FULL OUTER JOIN 
  (SELECT * FROM part WHERE Side = 'Right') pr
  ON pl.Batch = pr.Batch 
  AND pl.Lot = pr.Lot 
```

# ruby - Facebook 桌面应用程序

> ID：16200263
> 
> 赞同：5
> 
> 时间：2013-04-24T19:10:12.293
> 
> 标签：ruby, login, desktop-application, facebook-login, shoes

所以我正在尝试编写一个简单的桌面应用程序来登录某人的 Facebook。现在这是我唯一的目标，只需登录 facebook。我正在用 Ruby 编写代码，并且正在使用鞋子 GUI 工具包。这是我到目前为止的代码：

```
Shoes.app do
  stack(:margin => 12) do
    para "Enter your login information"
    flow do
      para "Username: "
      @login_text = edit_line
    end
    flow do
      para "Password: "
      @pass_text = edit_line(:secret => true)
    end

    @login_button = button "Login"
    @login_button.click {
      login(@login_text.text, @pass_text.text )
    }
  end
end

def login(username, password)
  alert(username + "   " + password)
end 
```

所以它肯定会进入登录功能，因为它会在单击登录按钮后提醒我在文本框中输入的任何内容。但我不知道从哪里开始登录到 facebook 部分...我试过查看[Facebook 的说明](http://developers.facebook.com/docs/howtos/login/login-for-desktop/)，我也尝试过谷歌搜索这个主题，但所有教程都是针对 rails 的。

我见过[mechanize](https://stackoverflow.com/questions/1733829/using-a-ruby-script-to-login-to-a-website-via-https)，但我不知道它在鞋子上的效果如何，因为它看起来像是在尝试实现它自己的按钮和东西。

我对 ruby​​ 非常陌生，不知道如何从桌面应用程序登录。有什么建议或教程可以帮助我吗？我的意思是我需要从“首先包含这些文件......”开始，我是一个绝对的初学者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-02T19:17:49.523

正如评论中提到的，您最好的选择可能是使用 OAuth，但您不一定需要实现任何其他东西来使其正常工作。使用 oauth ruby​​ gem，您可以构建用户令牌并使用该令牌执行必要`get`的`put`、、和`post`请求。由于 Facebook 支持 OAuth 令牌（我相信），这可能是最好的方法。

关于 ruby​​ OAuth gem 的信息在[这里](http://oauth.rubyforge.org/)

# objective-c - 如何在协议实现的参数中强制执行 __weak 引用

> ID：16200265
> 
> 赞同：0
> 
> 时间：2013-04-24T19:10:15.590
> 
> 标签：objective-c, automatic-ref-counting

我有一个协议，我希望实现将 __weak 引用用于方法参数。我将我的协议定义为：

```
@protocol TestProtocol
-(void) op:(__weak NSObject*)x;
@end 
```

然后我创建一个实现：

```
-(void) op:(NSObject*)x
{
} 
```

x 成为强参考。如果我将 __weak 声明移动到协议实现中，'x' 是一个弱引用。

由于协议的调用者已经保留了强引用，我想确保实现不会创建另一个强引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T20:56:08.973

我有点惊讶编译器没有抱怨声明不匹配。而且，果然，它没有。我提交了雷达#13730581 以查看编译器人员所说的内容。

正如@hypercrypt 所引用的那样，在一般情况下，ARC 不会保留或释放方法的参数。性能与正确性牺牲大到足以保证这种权衡的少数情况之一。（请注意，您会在未优化的情况下看到 storeStrong，但在 -Os 情况下发布构建情况下没有这样的东西）。

这意味着您实际上是在通过暗示方法主体中的代码来防御针对对象创建的强引用（并且，根据评论，当`@throw`“越过”框架时，所述强引用不会被拆除）。

你对此无能为力——如果你传递`x`给`NSMutableArray`'s`addObject:`方法，它将创建一个强引用。

因此，在一般情况下，实际上并没有一种方法可以防止创建对对象的强引用作为变量使用的副作用。

特定于 NSException 清理，无需担心。异常应该是致命的，并且在抛出异常后应用程序的状态是未定义的（除非您可以确保没有系统代码以任何方式与异常相关，这实际上是不可行的）。

```
// code tossed in main.m to play w/compiler behavior

@protocol TestProtocol
-(void) op:(__weak NSObject*)x;
@end

@interface DogBowl:NSObject <TestProtocol>
@end
@implementation DogBowl
-(void) op:(NSObject*)x
{
}
@end 
```

# python - 如何关闭线程并退出到命令行？

> ID：16200270
> 
> 赞同：1
> 
> 时间：2013-04-24T19:10:34.013
> 
> 标签：python, multithreading

我有一个非常简单的例子，它打印出名称，但问题是，当我按 ctrl+C 时，程序没有返回到正常的命令行界面：

```
^CStopping 
```

在我只看到我的光标在闪烁之后，但我什么也做不了，所以我不得不关闭窗口并再次打开它。我正在运行 Ubuntu 12.10。

那是我的代码：

```
import threading
import random
import time
import Queue
import urllib2
import sys

queue = Queue.Queue()
keep_running = True

class MyThread(threading.Thread):
    def __init__(self, queue):
        threading.Thread.__init__(self)
        self.queue = queue
        self.names = ['Sophia', 'Irina', 'Tanya', 'Cait', 'Jess']

    def run(self):
        while keep_running:
            time.sleep(0.25)
            line = self.names[random.randint(0,len(self.names)-1)]
            queue.put(line)
            self.queue.task_done()

class Starter():
    def __init__(self):
        self.queue = queue
        t = MyThread(self.queue)
        t.start()
        self.next()

    def next(self):
        while True:
            time.sleep(0.2)
            if not self.queue.empty():
                line = self.queue.get()
                print line, self.queue.qsize()
            else:
                print 'waiting for queue'

def main():  
    try:
        Starter()     
        queue.join()
    except KeyboardInterrupt, e:
        print 'Stopping'
        keep_running = False
        sys.exit(1)

main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T19:16:35.337

你的主要问题是你没有声明`keep_running`as `global`，所以`main`只是创建一个同名的局部变量。

如果你解决了这个问题，它通常会在某些平台上退出。

如果您希望它*始终在**所有*平台上退出，您还需要做两件事：

1.  `join`您创建的线程。
2.  `Lock`使用或其他同步机制保护共享全局变量。

`keep_running`但是，无论如何，这里并不真正需要共享的全局标志。你已经有一个`queue`. 只需定义一个可以在队列上发布的特殊“关闭”消息，或者使用关闭队列作为关闭的信号。

当我们这样做时，除非您尝试模拟慢速网络或其他东西，否则您`time.sleep`的代码中不需要这样做。只要打电话`self.queue.get(timeout=0.2)`。这样，获取每个条目的时间不是总是需要 0.2 秒，而是*最多需要*0.2 秒，但如果那里已经有东西，则只需 0 秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:27:23.550

您的主线程卡在`Starter.next`. 然后在此处调用中断并传播到`try`语句的第一行并被捕获，`except`在调用 join 之前跳转到子句。尝试将`join`调用放在 finally 块中（使用`sys.exit`）或简单地将其移动到异常处理程序

# asp.net - NODE.JS 与 IIS（为什么选择节点）

> ID：16200287
> 
> 赞同：3
> 
> 时间：2013-04-24T19:11:36.120
> 
> 标签：asp.net, node.js, iis-7

node.js 创建自己的服务器并尝试侦听它的意义何在，IIS/apache 不是为我们提供了所有这些吗？我理解它基于 I/O 完成，但我们有网络服务器技术。有人可以解释通过节点可以实现什么（除了服务器端的 java 脚本，也可以通过 SignalR 实现）不能通过 ASP.NEt 完成，以及为什么当我们有一个节点时我们应该如此关注节点asp.net stack下的技术基调 有什么经典的node例子吗？通常用于企业开发人员。店铺

大多数网络编程都是用于数据显示和电子商务应用程序，这些应用程序主要是数据库密集型，尽管最近它也与网络服务混搭在一起，是的，由于硬件传感器，移动网络是一个不同的游戏，我同意，但是 Node 给我们的是什么带有 SignalR 的 ASP.NET 不能给我们吗？

TIA

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T19:26:00.563

我发现 Node 非常有趣的是，一切都是基于事件的，这与编程 ASP.NET 或 PHP 的行为更具顺序性不同。不是坏事，只是做事方式不同。

您可以对服务器本身进行编程（而不是对在服务器上运行的应用程序进行编程）来做更多的事情，而不是提供文件，Node 的典型示例是聊天室应用程序，您可以在其中向所有参与者广播消息，每个参与者都可以向服务器发送消息. 通过编写自己的服务器事件（如监听、错误、连接等），您可以很好地控制服务器端的处理方式。

当然，如果您想使用 3rd 方库，npm（节点包管理器）绝对比手动处理依赖项要好。

要托管 ASP.NET 站点/应用程序，您需要 IIS，它是一个专有系统，而 Apache 和 Node 更开放。当然，节点托管不如基于 Apache 的托管广泛。

希望这能回答你的一些问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:22:50.950

每项技术都可以实现任何目标。如果您更喜欢 ASP.NET 而不是 Node，请使用它。ASP.NET 非常强大，当您拥有运行服务的专业知识和软件/资金时，没有理由在 ASP.NET 上使用 Node。节点只是不同；它有不同的执行模型（没有任何线程），最重要的是，它是开源和免费的。在任何操作系统上都很容易上手，在任何操作系统上部署都很容易。但最终，归结为；**你**喜欢什么？

# c# - 如何在服务器端接收文件？

> ID：16200288
> 
> 赞同：0
> 
> 时间：2013-04-24T19:11:41.553
> 
> 标签：c#, asp.net, http, file-upload

我在本地 exe 中有这样的代码，可以在某个 url 中上传文件：

```
 private static void SaveTToWeb()
    {
        try {
            WebClient client = new WebClient();
            client.Credentials = CredentialCache.DefaultCredentials;
            client.UploadFile("www.something.com/uploadreceiver.aspx", "POST", "text.txt");
            client.Dispose();
            myFile = null;
            urlForUpload = null;
        }
        catch (Exception err) { Console.write("error: " + err.Message(); }
    } 
```

我的问题是，在服务器端“uploadreceiver.aspx”页面中，我应该使用什么代码来实际接收文件？谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:15:48.737

CSASPNETRemoteUploadAndDownload 示例展示了如何在 ASP.NET 应用程序中向远程服务器上传文件和从远程服务器下载文件。

您可以在此处下载示例代码或阅读更多信息[http://code.msdn.microsoft.com/CSASPNETRemoteUploadAndDown-a80b7cb5](http://code.msdn.microsoft.com/CSASPNETRemoteUploadAndDown-a80b7cb5)

# xml - XML/XSD publicId 和 systemId 之间需要空格

> ID：16200291
> 
> 赞同：13
> 
> 时间：2013-04-24T19:11:56.853
> 
> 标签：xml, eclipse, validation, xsd, doctrine

我在 Eclipse 中有一个包含大量 XML 文件的 PHP 项目。现在，我所有的 XML 文件都未通过验证，并显示以下错误消息：

```
White spaces are required between publicId and systemId 
```

我搜索了一下，publicId 和 systemId 似乎与以 DOCTYPE 开头的 XML 文件有关。我的没有。另一个[SO 帖子](https://stackoverflow.com/q/8791730/827480)表明将 XSD 添加到 Eclipse 中的 XML 目录中，但这似乎没有什么不同。

一个示例 XML 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>

<doctrine-mapping xmlns="http://doctrine-project.org/schemas/orm/doctrine-mapping"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://doctrine-project.org/schemas/orm/doctrine-mapping
                          http://www.doctrine-project.org/schemas/orm/doctrine-mapping.xsd">

    <entity name="Doctrine\Tests\Models\CMS\CmsAddress" table="cms_users">

        <named-native-queries>
            <named-native-query name="find-all" result-set-mapping="mapping-find-all">
                <query>SELECT id, country, city FROM cms_addresses</query>
            </named-native-query>

            <named-native-query name="find-by-id" result-class="CmsAddress">
                <query>SELECT * FROM cms_addresses WHERE id = ?</query>
            </named-native-query>

            <named-native-query name="count" result-set-mapping="mapping-count">
                <query>SELECT COUNT(*) AS count FROM cms_addresses</query>
            </named-native-query>
        </named-native-queries>

        <sql-result-set-mappings>
            <sql-result-set-mapping name="mapping-find-all">
                <entity-result entity-class="CmsAddress">
                    <field-result name="id" column="id"/>
                    <field-result name="city" column="city"/>
                    <field-result name="country" column="country"/>
                </entity-result>
            </sql-result-set-mapping>

            <sql-result-set-mapping name="mapping-without-fields">
                <entity-result entity-class="CmsAddress"/>
            </sql-result-set-mapping>

            <sql-result-set-mapping name="mapping-count">
                <column-result name="count"/>
            </sql-result-set-mapping>
        </sql-result-set-mappings>

        <id name="id" type="integer" column="id">
            <generator strategy="AUTO"/>
        </id>

        <field name="country" column="country" type="string" length="50"/>
        <field name="city" column="city" type="string" length="50"/>
        <field name="zip" column="zip" type="string" length="50"/>

        <one-to-one field="user" target-entity="CmsUser" inversed-by="address">
            <join-column referenced-column-name="id" />
        </one-to-one>

    </entity>
</doctrine-mapping> 
```

我对接下来要尝试什么感到有些困惑。我可以禁用 XML 验证，但我讨厌这样做来解决 Eclipse 中的错误。如果它有任何区别，我正在使用带有 PDT 的 Eclipse 3.7。失败的 XML 文件都是库的一部分，所以我认为它必须是 Eclipse 配置细节，必须修改/纠正才能解决问题，但我不知道是什么。

有什么建议我可以尝试验证我的 XML 文件吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-06-05T05:01:43.670

基本上顺序应该是这样的--property，然后跟property.xsd

```
xsi:schemaLocation="
       http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/security
       http://www.springframework.org/schema/security/spring-security-3.2.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context.xsd
       http://www.springframework.org/schema/mvc 
       http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T15:42:23.740

**在xsi:schemaLocation**属性中的每个 URL 后保留一个空格“”， 最后一个除外。

xsi:schemaLocation="http://doctrine-project.org/schemas/orm/doctrine-mapping**<1 个空格>** [http://www.doctrine-project.org/schemas/orm/doctrine-mapping .xsd](http://www.doctrine-project.org/schemas/orm/doctrine-mapping.xsd) >

# javascript - 带有自定义编号的 Google 地图标记

> ID：16200296
> 
> 赞同：0
> 
> 时间：2013-04-24T19:12:22.137
> 
> 标签：javascript, google-maps, google-maps-api-2

我有一个谷歌地图标记功能，可以成功地在这样的地图上创建标记：

```
 // A function to create the marker and set up the event window
  function createMarker(point,html) {
    var marker = new GMarker(point,{title:html});
    GEvent.addListener(marker, "click", function() {
      marker.openInfoWindowHtml(html);
    });
    return marker;
  } 
```

这是现有代码的 tinyurl：http: [//tinyurl.com/b8f9b4l](http://tinyurl.com/b8f9b4l)

使用这个解决方案：[谷歌地图：在标记中放置数字？](https://stackoverflow.com/questions/2890670/google-maps-place-number-in-marker)

我已经更新了这行代码，但它没有编号。我究竟做错了什么？

```
var marker = new GMarker(point,{title:html,icon:'icon: \'https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld='+ (position) +'|FF776B|000000',}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:13:54.030

icon 属性只需要是 url。您不需要额外的“图标：”，并且应该在末尾删除额外的逗号（IE 在发现悬空逗号时似乎会抛出异常）。此外，您不需要的括号 - 但可能不会伤害任何东西。

```
{
title:html,
icon: 'https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=' + position +'|FF776B|000000'
} 
```

我明白你的想法是从哪里来的。不知道为什么她/他对此有所了解。额外的“图标：”搞砸了。

试试这个作为测试，它应该确保你对 url 中的变量没有任何问题。

```
{
title:html,
icon: 'https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=4|FF776B|000000'
} 
```

# html - 如何传递我的下拉选项以在模板工具包中显示 UTF-8 字符

> ID：16200303
> 
> 赞同：0
> 
> 时间：2013-04-24T19:12:48.637
> 
> 标签：html, template-toolkit

我正在我的项目中实现 UTF-8 字符支持。我们使用模板工具包。在其中一个模板中，我有这个硬编码的下拉代码，它不允许我翻译文本。这是代码片段。

> `<select id="sub_select" name="sub_select">`
> `[% sub_options = [`
> `- { value => 'last', choice =>'translate.$lang.L_Submission' },`
> `- { value => 'all', choice => 'translate.$lang.A_Submissions' },`
> `];`
> `%]`
> `[% INCLUDE dropdown.tmpl`
> `options = sub_options`
> `selected = sub_select`
> `%]`
> `</select>`

其中 dropdown.tmpl 是一个集中文件，用于在整个应用程序中创建下拉菜单。
我有权创建一个新的 dropdown_UTF8.tmpl，它将支持新的选择类型，或者我可以将新逻辑容纳到这个 dropdown.tmpl 中。目前，当我使用现有的 dropdown.tmpl 尝试此操作时，我得到 translate.$lang.A_Submissions 和 translate.$lang.L_Submission 作为选择，因为我希望显示翻译后的数据。谁能帮我这个。

dropdown.tmpl：

```
[% valuekey = valuekey || 'value'; 
   choicekey = choicekey || 'choice'; 
   FOREACH opt = options;
     - value = opt.$valuekey.defined ? valuekey_prefix _ opt.$valuekey : valuekey_prefix _ opt
     - choice = opt.$choicekey or value
%]
[% value = value %]
<option value="[% value %]"[% selected="selected" IF value == selected %]>[% choice %]</option>
[% END -%] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T02:38:52.187

除非我遗漏了什么，否则我认为这里的问题只是`choice`这些散列中值的单引号。根据定义，单引号将导致它们包含的内容不被插值。

尝试：

```
[%  sub_options = [
        - { value => 'last', choice => translate.$lang.L_Submission },
        - { value => 'all',  choice => translate.$lang.A_Submissions },
    ];
%] 
```

# actionscript-3 - 使用自定义调度事件拖动游戏拼图

> ID：16200305
> 
> 赞同：0
> 
> 时间：2013-04-24T19:12:57.717
> 
> 标签：actionscript-3, flash, actionscript, adobe

我正在创建一个拖动益智游戏，我需要解决一个问题，确切地说是两个：

a) 检查***dragArray***变量中的所有对象是否与 matchArray 中的对象位于同一***位置***。b) 如果是，则显示一个按钮并播放声音文件。（按钮是***play_btn***，点击它会播放声音文件，但我也需要在解谜后播放声音。）

会添加一些视觉帮助，但论坛说我需要声誉。

期待一些帮助。游戏基于[本教程](http://theflashconnection.com/content/dispatching-custom-events-from-class)。

```
var dragArray:Array = [p1, p2, p3, p4, p5, p6, p7, p8, p9];
var matchArray:Array = [p1_n, p2_n, p3_n, p4_n, p5_n, p6_n, p7_n, p8_n, p9_n];

var currentClip:MovieClip;
var startX:Number;
var startY:Number;

for(var i:int = 0; i < dragArray.length; i++) {
    dragArray[i].buttonMode = true;
    dragArray[i].addEventListener(MouseEvent.MOUSE_DOWN, item_onMouseDown);
    matchArray[i].alpha = 0.2;
}

function item_onMouseDown(event:MouseEvent):void {
    currentClip = MovieClip(event.currentTarget);
    startX = currentClip.x;
    startY = currentClip.y;
    addChild(currentClip); //bring to the front
    currentClip.startDrag();
    stage.addEventListener(MouseEvent.MOUSE_UP, stage_onMouseUp);
}

function stage_onMouseUp(event:MouseEvent):void {
    stage.removeEventListener(MouseEvent.MOUSE_UP, stage_onMouseUp);
    currentClip.stopDrag();
    var index:int = dragArray.indexOf(currentClip);
    var matchClip:MovieClip = MovieClip(matchArray[index]);
    if(currentClip.hitTestObject(matchClip)) {
       //a match was made! position the clip on the matching clip:
       currentClip.x = matchClip.x;
       currentClip.y = matchClip.y;
       //make it not draggable anymore:
        currentClip.removeEventListener(MouseEvent.MOUSE_DOWN, item_onMouseDown);
        currentClip.buttonMode = false;
    } else {
        //match was not made, so send the clip back where it started:
        currentClip.x = startX;
        currentClip.y = startY;
    }
}

var my_sound:Sound = new Sound();
my_sound.load(new URLRequest("sounds/song.mp3"));
var my_channel:SoundChannel = new SoundChannel();

play_btn.addEventListener(MouseEvent.CLICK, playSound);

function playSound(event:MouseEvent):void{
my_channel = my_sound.play();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:12:18.023

您可以使用像这样的验证功能。如果所有掉落物品都在其目标上，它将返回 true，否则返回 false

```
function validate(drags:Array, drops:Array):Boolean {
  var found:uint = 0    
  for (var i:uint = 0;i<drags.length;i++ ) {
    var drag:MovieClip = MovieClip(drags[i]);
    var drop:MovieClip =  MovieClip(drops[i]);
    found += (drag.hitTestObject(drop)) ? 1 : 0
   }

  return found == drop.length    
} 
```

然后你可以用它来检查全局交互：

```
var result:Boolean = validate(dragArray,matchArray);
if (result) {
  // all ok
  // play sound...
} else {
  // errors
} 
```

# c# - 错误消息：模型未选择特定于语言的资源文件

> ID：16200309
> 
> 赞同：4
> 
> 时间：2013-04-24T19:13:17.613
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我想用西班牙语显示模型错误消息，我已经在资源文件中定义了这些字符串。我使用 razor 语法对页面上的其他字符串执行了相同的操作，但未选择 ViewModel 注释中的字符串。

它实际上是在选择默认值 - 英语。所以我的猜测是可能没有检测到语言/文化，但页面上的其他字符串以西班牙语显示

```
//Spanish: El campo {0} se requiere
//English: The {0} field is required  <--- this comes out always irrespective of set language

[Required(ErrorMessageResourceName = "ErrorMessage_Required", 
     ErrorMessageResourceType = typeof(GlobalResources.Resources))]
[Display(Name = "CardNumber", ResourceType = typeof(GlobalResources.Resources) )]
public string CardNumber { get; set; } 
```

我在控制器中设置语言

```
protected override void OnActionExecuting(ActionExecutingContext filterContext)
{
    base.OnActionExecuting(filterContext);

    HttpCookie cookie = Request.Cookies["lang"];

    string lang = cookie != null ? cookie.Value : "en-US";
    System.Threading.Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo(lang);
} 
```

如何将文化设置扩展到 ViewModel？

**更新** 一个类似的帖子：[MVC3 全球化：在模型绑定之前需要全局过滤器](https://stackoverflow.com/questions/7202607/mvc3-globalization-need-global-filter-before-model-binding)

**更新** 在我的浏览器设置中更改首选语言使其工作。这意味着模型属性正在使用不受`System.Threading.Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo(lang);`. *有没有办法做到这一点？- 仍在搜索中....*

**更新：**将代码移动到`Application_AcquireRequestState`似乎可以解决它。

```
protected void Application_AcquireRequestState()
{
    HttpCookie cookie = Request.Cookies["lang"];

    string lang = cookie != null ? cookie.Value : "en-US";
    System.Threading.Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo(lang);
} 
```

[我得到的解释](https://stackoverflow.com/questions/16218382/thread-currentthread-currentuiculture-vs-accept-language-in-viewmodels/16218779?noredirect=1#16218779)，也在这个问题中发布的链接中找到，模型利用在控制器覆盖方法中设置的区域性为时已晚，因为在调用方法之前已经发生了绑定。[这个链接很有帮助](http://adamyan.blogspot.ch/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T19:33:21.687

尝试使用下面的类

```
public sealed class LanguageManager
{
    /// <summary>
    /// Default CultureInfo
    /// </summary>
    public static readonly CultureInfo DefaultCulture = new CultureInfo("en-US");

    /// <summary>
    /// Available CultureInfo that according resources can be found
    /// </summary>
    public static readonly CultureInfo[] AvailableCultures;

    static LanguageManager()
    {
        List<string> availableResources = new List<string>();
        string resourcespath = Path.Combine(System.Web.HttpRuntime.AppDomainAppPath, "App_GlobalResources");
        DirectoryInfo dirInfo = new DirectoryInfo(resourcespath);
        foreach (FileInfo fi in dirInfo.GetFiles("*.*.resx", SearchOption.AllDirectories))
        {
            //Take the cultureName from resx filename, will be smt like en-US
            string cultureName = Path.GetFileNameWithoutExtension(fi.Name); //get rid of .resx
            if (cultureName.LastIndexOf(".") == cultureName.Length - 1)
                continue; //doesnt accept format FileName..resx
            cultureName = cultureName.Substring(cultureName.LastIndexOf(".") + 1);
            availableResources.Add(cultureName);
        }

        List<CultureInfo> result = new List<CultureInfo>();
        foreach (CultureInfo culture in CultureInfo.GetCultures(CultureTypes.SpecificCultures))
        {
            //If language file can be found
            if (availableResources.Contains(culture.ToString()))
            {
                result.Add(culture);
            }
        }

        AvailableCultures = result.ToArray();

        CurrentCulture = DefaultCulture;
        if (!result.Contains(DefaultCulture) && result.Count > 0)
        {
            CurrentCulture = result[0];
        }
    }

    /// <summary>
    /// Current selected culture
    /// </summary>
    public static CultureInfo CurrentCulture
    {
        get { return Thread.CurrentThread.CurrentCulture; }
        set
        {
            Thread.CurrentThread.CurrentUICulture = value;
            Thread.CurrentThread.CurrentCulture = value;
        }
    }
} 
```

* * *

最后设置如下文化。

```
LanguageManager.CurrentCulture = new CultureInfo("Your culture"); 
```

现在覆盖文化

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:28:24.707

确保**同时** `CurrentCulture`设置和`CurrentUICulture`。我怀疑`CurrentCulture`实际上是资源文件正在查看的内容：

```
 //I've taken off System.Threading, add a using to it (aids readability)

 Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo(lang);
 Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo(lang); 
```

# sphinx - Sphinx 中的每个字段排名

> ID：16200311
> 
> 赞同：0
> 
> 时间：2013-04-24T19:13:22.250
> 
> 标签：sphinx

我有一个包含三个索引字段的狮身人面像索引。我想将那些在字段 1 上匹配的文档排在字段 2 上，然后再将那些在字段 3 上的文档排名更高，例如，在字段 1 上有一个匹配的文档将超过在字段 2 中有多个匹配的文档。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:32:03.057

使用 SetFieldWeights API 函数

[http://sphinxsearch.com/docs/current.html#api-func-setfieldweights](http://sphinxsearch.com/docs/current.html#api-func-setfieldweights)

# facebook - perl - Facebook 图表 - 发布到粉丝专页

> ID：16200314
> 
> 赞同：2
> 
> 时间：2013-04-24T19:13:32.880
> 
> 标签：facebook, perl, facebook-graph-api

这并没有给我任何错误，但它没有发布到我的粉丝专页墙上。会喜欢这方面的帮助！试图自己解决这个问题就像坐过山车一样。

当然是用正确的令牌测试的。

```
#!/usr/bin/perl

use strict;
use warnings;
use open qw(:std :utf8);
use LWP::Simple;
use YAML::Tiny;
use JSON;
use URI;
use utf8;

my $access_token = 'blah';
my $profile_id = '200117706712975';

#Publish to a facebook page as admin
graph_api('/' . $profile_id . '/feed',{
        access_token => $access_token,
        message => 'this is a test!',
        link => 'http://test.com',
        method => 'post'
});

exit 0;

sub graph_api {
  my $uri = new URI('https://graph.facebook.com/' . shift);
  $uri->query_form(shift);
  my $resp = get("$uri");
  return defined $resp ? decode_json($resp) : undef;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-06T17:30:57.687

如果你转储响应对象 - $resp - 使用 Data::Dumper 类似，你会得到帖子没有出现的原因。响应对象是 JSON。

# sql - PL/SQL 存储和调用过程

> ID：16200315
> 
> 赞同：0
> 
> 时间：2013-04-24T19:13:37.707
> 
> 标签：sql, plsql

我目前正在处理一个 PL/SQL 问题，我必须在一个过程中创建一个游标，该游标将为给定的项目提供适当的折扣（价格 >= 100 美元为 10%，价格 >= 10 美元为 5%）。当我必须调用该程序时，我需要显示特定订单号的订单号、客户名字、姓氏和折扣后商品的总净成本（在这种情况下，我需要显示订单号2）。我无法让它显示此信息。

到目前为止，这是我使用光标创建过程的代码。

```
CREATE OR REPLACE PROCEDURE ComputeOrderTotal
(no_id IN orders.o_id%TYPE,
cfirst IN customer.c_first%TYPE,
clast IN customer.c_last%TYPE,
TotalNetCost OUT orders.ordertotal%TYPE) IS

CURSOR OrderCursor IS
  SELECT order_line.inv_id, inv_price, ol_quantity, inv_price*ol_quantity AS ExtPrice,
  CASE
    WHEN inv_price*ol_quantity >= 100 THEN 0.9*(inv_price*ol_quantity)
    WHEN inv_price*ol_quantity >= 10 THEN 0.95*(inv_price*ol_quantity)
    ELSE
    inv_price*ol_quantity
    END AS NetCost
  FROM inventory, order_line, orders, customer
  WHERE orders.o_id = customer.c_id;
OrderRow OrderCursor%ROWTYPE;

BEGIN
OPEN OrderCursor;
LOOP 
  FETCH OrderCursor INTO OrderRow;
  EXIT WHEN OrderCursor%NOTFOUND;
    TotalNetCost :=TotalNetCost + OrderRow.NetCost;  

END LOOP; 

DBMS_OUTPUT.PUT_LINE('Order Number:  ' || no_id || 'First Name: ' || cfirst  || 'Last Name:  ' ||
clast || 'Total Net Cost: ' || TO_CHAR(TotalNetCost, '$0999.99'));

END; 
```

这是我调用该过程的代码。

```
DECLARE
no_id orders.o_id%TYPE;
cfirst customer.c_first%TYPE;
clast customer.c_last%TYPE;
TotalNetCost orders.ordertotal%TYPE;

BEGIN
ComputeOrderTotal(2, cfirst, clast, TotalNetCost);    
END; 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T00:35:14.303

我不确定，但您的条件可能是问题，因为您的第二个条件与第一个条件相矛盾。例如 110 满足第一个条件，但它也满足第二个条件。

```
WHEN inv_price*ol_quantity >= 100 THEN 0.9*(inv_price*ol_quantity)
WHEN inv_price*ol_quantity >= 10 THEN 0.95*(inv_price*ol_quantity) 
```

我建议将第二个条件更改为 <100 和 >=10

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T01:40:08.207

将此行添加到调用该过程的代码的顶部。

更改会话设置服务器输出；

# php - 股票价格数据的数据存储，每天和每周？

> ID：16200320
> 
> 赞同：0
> 
> 时间：2013-04-24T19:13:55.690
> 
> 标签：php, mysql, sql, database-design

我正在存储从 1970 年到现在的 3500 只不同股票的价格历史数据（每天运行一个 cron 作业来更新它）。

存储这些数据的最佳方式是什么？它将用于根据每日数据和每周数据运行计算。目前我将其存储为：

```
stock_id, date, closing_price, high, low, open, volume 
```

由于我也想要每周价格，我是否应该制作一个单独的表格来存储：

```
stock_id, week_end_date, weekly_closing_price, weekly_high, weekly_low, week_open_price, average_daily_volume, total_weekly_volume 
```

既然这些数据都是从第一个表中可以计算出来的，那是不是还要重新存起来呢？我考虑它的唯一原因是有很多行数据正在运行计算.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:48:53.420

这取决于您拥有多少数据以及您是否有其他交易要求。

如果有的话，在源/OLTP 系统中复制这些数据是没有意义的。我是一名 SQL Server 程序员，而不是 MySQL，但我想他们像所有其他 RDBMS 一样具有 datepart 函数，因此从日期确定周数是微不足道的。

但是，当您使用 OLAP 或报告时，您可能希望创建另一个表，其中包含周级粒度的数据。这将使报告速度更快，特别是对于在针对函数的输出运行时通常表现不佳的聚合之类的事情。

这两者都取决于您的数据规模。如果您每天有数百行，则可能不值得为此创建一个具体化的周表。如果您每天有数万条记录，那么性能优势可能会使其成为一个合理的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:54:01.320

你问有没有必要？谁知道。这取决于你有多少磁盘空间。但是，您所描述的是“老式”聚合表，通常用于提高报告性能。在处理历史数据时，由于数据没有变化，因此无需重新计算每周总计等内容。

事实上，如果我这样做，我还会定义“月度”和“年度”汇总表以获得更大的灵活性，尤其是对于这么多的历史。您可以考虑将数据“标准化”，以使每个时期都具有可比性。日历月和周的交易日数不同，因此“平均每日交易量”之类的内容可能会产生误导。

如果您真的想花哨，请对 ROLAP 解决方案进行一些研究。这是一个非常广泛的主题，但您可能会发现它很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T03:33:13.777

> 既然这些数据都是从第一个表中可以计算出来的，那是不是还要重新存起来呢？

没有*必要*总结和存储它。您可以只创建一个执行所有汇总计算的视图，然后查询该视图。

但是，如果您要对整个数据范围运行大量报告，那么将其汇总一次并存储结果是有意义的。您将从大约 4000 万行开始。（3500只股票*43年*约265天/年）

如果我站在你的立场上，我会加载数据、编写每周价格查询并测试性能。如果太慢，请将汇总数据插入表中。

# wso2 - 使用 vfs:ftps 上传 pdf 时出错（缺少 FileURI）。可能的错误？

> ID：16200326
> 
> 赞同：1
> 
> 时间：2013-04-24T19:14:05.097
> 
> 标签：wso2

我们有一个代理服务，它从 JasperReports 服务器下载 pdf 文件，然后执行 vfs:ftps 将 pdf 上传到 FTP 服务器。下载部分工作得很好，但我们正在努力处理上传部分。这是我们的问题：

启动代理服务时，我们收到以下 WARN 消息（注意我们在配置中确实有一个参数 FileURI）：

```
WARN PollTableEntry transport.vfs.FileURI parameter is missing in the proxy service configuration 
```

并且在运行请求时，我们得到了如下异常：

```
[PassThroughMessageProcessor-2] ERROR Axis2Sender Unexpected error during sending message out
java.lang.NullPointerException
    at java.util.StringTokenizer.<init>(StringTokenizer.java:182)
    at java.util.StringTokenizer.<init>(StringTokenizer.java:204)
    at org.apache.commons.vfs2.provider.ftps.FtpsFileProvider.doCreateFileSystem(FtpsFileProvider.java:67)
    at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.getFileSystem(AbstractOriginatingFileProvider.java:104)
    at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:82)
    at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:66)
    at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:694)
    at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:650)
    at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:606)
    at org.apache.synapse.transport.vfs.VFSTransportSender.sendMessage(VFSTransportSender.java:134)
    at org.apache.axis2.transport.base.AbstractTransportSender.invoke(AbstractTransportSender.java:112)
    at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:442)
    at org.apache.axis2.description.OutOnlyAxisOperationClient.executeImpl(OutOnlyAxisOperation.java:297)
    at org.apache.axis2.client.OperationClient.execute(OperationClient.java:149)
    at org.apache.synapse.core.axis2.Axis2FlexibleMEPClient.send(Axis2FlexibleMEPClient.java:456)
    at org.apache.synapse.core.axis2.Axis2Sender.sendOn(Axis2Sender.java:57)
    at org.apache.synapse.core.axis2.Axis2SynapseEnvironment.send(Axis2SynapseEnvironment.java:269)
    at org.apache.synapse.endpoints.AbstractEndpoint.send(AbstractEndpoint.java:329)
    at org.apache.synapse.endpoints.AddressEndpoint.send(AddressEndpoint.java:59)
    at org.apache.synapse.mediators.builtin.SendMediator.mediate(SendMediator.java:95)
    at org.apache.synapse.mediators.AbstractListMediator.mediate(AbstractListMediator.java:71)
    at org.apache.synapse.mediators.base.SequenceMediator.mediate(SequenceMediator.java:114)
    at org.apache.synapse.core.axis2.Axis2SynapseEnvironment.injectMessage(Axis2SynapseEnvironment.java:230)
    at org.apache.synapse.core.axis2.SynapseCallbackReceiver.handleMessage(SynapseCallbackReceiver.java:443)
    at org.apache.synapse.core.axis2.SynapseCallbackReceiver.receive(SynapseCallbackReceiver.java:166)
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:180)
    at org.apache.synapse.transport.passthru.ClientWorker.run(ClientWorker.java:217)
    at org.apache.axis2.transport.base.threads.NativeWorkerPool$1.run(NativeWorkerPool.java:172)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

我想知道这是否是代理配置中的潜在错误或任何错误。

请帮忙，谢谢！

这是代理配置 xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<proxy xmlns="http://ws.apache.org/ns/synapse"
       name="GenerateSecurityReport"
       transports="https http vfs"
       startOnLoad="true"
       trace="enable"
       statistics="enable">
   <description/>
   <parameter name="transport.vfs.FileURI">vfs:ftps://ftpUser:ftpPassword@ftp.host/path?vfs.passive=true</parameter>
   <parameter name="transport.vfs.ContentType">application/pdf</parameter>
   <target>
      <endpoint>
         <address uri="http://jasperServerHost/path/to/report.pdf"/>
      </endpoint>
      <inSequence>
         <log/>
         <property name="Authorization"
                   expression="fn:concat('Basic ', base64Encode('jasperUser:jasperPassword'))"
                   scope="transport"
                   type="STRING"/>
         <property name="product"
                   expression="fn:substring-after(get-property('To'), 'product=')"
                   scope="default"
                   type="STRING"/>
      </inSequence>
      <outSequence>
         <log/>
         <property name="CONTENT_TYPE"
                   value="application/pdf"
                   scope="axis2"
                   type="STRING"/>
         <property name="transport.vfs.ReplyFileName"
                   expression="fn:concat(get-property('product'), '_vendor_patches.pdf')"
                   scope="transport"/>
         <property name="OUT_ONLY" value="true"/>
         <property name="HTTP_SC" value="200" scope="axis2"/>
         <send>
            <endpoint>
               <address uri="vfs:ftps://ftpUser:ftpPassword@ftp.host/path?vfs.passive=true"/>
            </endpoint>
         </send>
         <payloadFactory>
            <format>
               <html xmlns="">
                  <body>success</body>
               </html>
            </format>
         </payloadFactory>
         <property name="Content-Type"
                   value="text/html"
                   scope="transport"
                   type="STRING"/>
         <send/>
      </outSequence>
   </target>
</proxy> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:38:29.053

你定义了`transport.vfs.FileNamePattern`参数吗？

按照这个[示例](http://docs.wso2.org/wiki/pages/viewpage.action?pageId=15471427)

# java - ArrayList 和 Collection 问题

> ID：16200328
> 
> 赞同：0
> 
> 时间：2013-04-24T19:14:14.840
> 
> 标签：java, button, collections, arraylist

我希望这是有道理的，并且有一种更简洁的编程方式。

我有一个 ArrayList of Buttons 和一个 Territories 集合，我试图弄清楚如何遍历 ArrayList 并将按钮上的每个标签设置为每个 Territory 包含的 int 值，然后更改按钮背景的颜色以对应给它的主人。

漫长的方法是为每个按钮设置标签，然后使用 if-else 检查所有者并设置正确的背景颜色，但是这会导致数百行重复代码。

```
btnEgy.setLabel(Territory.EGYPT.units());
    if(Territory.EGYPT.getOwner().toString().equals("Player 1"))
    {
        btnEgy.setBackground(Color.BLUE);
    }
    else if(Territory.EGYPT.getOwner().toString().equals("Player 2"))
    {
        btnEgy.setBackground(Color.RED);
    }
    else if (Territory.EGYPT.getOwner().toString().equals("Player 3"))
    {
        btnEgy.setBackground(Color.GREEN);
    }
    else if (Territory.EGYPT.getOwner().toString().equals("Player 4"))
    {
        btnEgy.setBackground(Color.YELLOW);
    }
btnEus.setLabel(Territory.E_UNITEDSTATES.units());
    if(Territory.E_UNITEDSTATES.getOwner().toString().equals("Player 1"))
    {
        btnEus.setBackground(Color.BLUE);
    }
    else if(Territory.E_UNITEDSTATES.getOwner().toString().equals("Player 2"))
    {
        btnEus.setBackground(Color.RED);
    }
    else if (Territory.E_UNITEDSTATES.getOwner().toString().equals("Player 3"))
    {
        btnEus.setBackground(Color.GREEN);
    }
    else if (Territory.E_UNITEDSTATES.getOwner().toString().equals("Player 4"))
    {
        btnEus.setBackground(Color.YELLOW);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T19:18:03.410

```
HashMap<String, Color> playerMap = new HashMap<String, Color>();
playerMap.add("Player 1", Color.BLUE);
playerMap.add("Player 2", Color.RED); 
```

然后

```
btnEgy.setBackground(playerMap.get(Territory.EGYPT.getOwner().toString())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:27:33.097

如果您有一个按钮列表和一个等长的区域列表，其中按钮 [0] 用于区域 [0]，依此类推...

```
final Iterator<Button> buttonI = buttons.iterator();
final Iterator<Territory> territoryI = territories.iterator();
while (territoryI.hasNext() && buttonI.hasNext()) {
    final Button button = buttonI.next();
    final Territory territory = territoryI.next();
    button.setBackground(territory.getOwner().getColor());
    button.setLabel(territory.units());
} 
```

在这里，我假设您可以`getColor()`向返回的类添加一个方法`territory.getOwner()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T19:17:38.217

假设您有相同数量的按钮和区域，

```
Iterator<Button> itr1 = buttons.iterator();
Iterator<Territory> itr2 = territories.iterator();
while(itr1.hasNext() && itr2.hasNext()) {
    Button button = itr1.next();
    Territory territory = itr2.next();
    // set button data to territory data
}

If the collection sizes don't match then you'll need to figure out if you want to terminate when you reach the end of the shorter collection, or if you want to keep looping through the shorter collection until you reach the end of the longer collection. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T19:21:11.417

在java中使用函数怎么样？

主要代码

```
setValues(btnEgy,Territory.EGYPT);
setValues(btnEus,Territory.E_UNITEDSTATES); 
```

功能码

```
 public void setValues(Button btn,Territory t ){
    btn.setLabel(t.units());

    if(t.getOwner().toString().equals("Player 1"))
    {
       btn.setBackground(Color.BLUE);
    }
    else if(t.getOwner().toString().equals("Player 2"))
    {
       btn.setBackground(Color.RED);
    }
    else if (t.getOwner().toString().equals("Player 3"))
    {
        btn.setBackground(Color.GREEN);
    }
    else if (t.getOwner().toString().equals("Player 4"))
    {
       btn.setBackground(Color.YELLOW);
    }

} 
```

# iphone - 在文本中定义选项

> ID：16200331
> 
> 赞同：0
> 
> 时间：2013-04-24T19:14:24.287
> 
> 标签：iphone, ios, objective-c, ipad, cocoa-touch

所以，我似乎无法在我的（嗯，这是一种自定义视图）中获得该`define`选项。`UITextView`现在，我的`CanPerformAction`方法中有这个：

```
 - (BOOL)canPerformAction:(SEL)action withSender:(id)sender {
    if (action == @selector(copy:))
        return NO;

    if (action == @selector(delete:)) {
        return NO;
    }

    if (action == @selector(addHighlight:))
        return YES;

    if (action == @selector(showThinkFeed:))
        return YES;

    if (action == @selector(editHighlightNote:))
        return YES;

    return [super canPerformAction:action withSender:sender];
} 
```

我没有以这种方式获得定义选项。我尝试`return YES;`进行方法调用并且确实出现了定义选项，但是当单击它时，它会抛出一个异常，上面写着：

```
-[MyViewController _define:]: unrecognized selector sent to instance 0x14574200 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:40:29.470

`_define:`是 的**私有**选择器`UITextView`。我猜，您的自定义视图没有实现它。

但是，请注意：如果您将它（即实现您自己的）用于您想通过 AppStore 销售的应用程序，您的应用程序将由于私有特性而被拒绝。

# python - 运行鼻子测试时导入错误，我无法在鼻子之外重现

> ID：16200333
> 
> 赞同：15
> 
> 时间：2013-04-24T19:14:29.100
> 
> 标签：python, unit-testing, importerror, nose

在使用鼻子测试运行无法在鼻子之外重现的测试套件时，我遇到了一个神秘的导入错误。此外，当我跳过一部分测试时，导入错误消失了。

**执行摘要：** 我在 Nose 中收到一个导入错误，a) 仅在排除具有特定属性的测试时出现，并且 b) 无法在交互式 python 会话中重现，即使我确保两者的 sys.path 相同.

**细节：**

包结构如下所示：

```
project/
    module1/__init__.py
    module1/foo.py
    module1/test/__init__.py
    module1/test/foo_test.py
    module1/test/test_data/foo_test_data.txt
    module2/__init__.py
    module2/bar.py
    module2/test/__init__.py
    module2/test/bar_test.py
    module2/test/test_data/bar_test_data.txt 
```

foo_test.py 中的一些测试很慢，所以我创建了一个 @slow 装饰器，允许我使用nosetests 选项跳过它们：

```
def slow(func):
    """Decorator sets slow attribute on a test method, so 
       nosetests can skip it in quick test mode."""
    func.slow = True
    return func

class TestFoo(unittest.TestCase):

    @slow
    def test_slow_test(self):
        load_test_data_from("test_data/")
        slow_test_operations_here

    def test_fast_test(self):
        load_test_data_from("test_data/") 
```

当我只想运行快速单元测试时，我使用

```
nosetests -vv -a'!slow' 
```

从项目的根目录。当我想全部运行它们时，我删除了最后一个参数。

我怀疑这是造成这场混乱的罪魁祸首。单元测试需要从文件中加载测试数据（不是最佳实践，我知道。）文件放在每个测试包中名为“test_data”的目录中，单元测试代码通过相对路径引用它们，假设单元测试正在从 test/ 目录运行，如上面的示例代码所示。

为了让它与项目根目录中的 running nose 一起工作，我在每个测试包的**init** .py 中添加了以下代码：

```
import os
import sys

orig_wd = os.getcwd()

def setUp():
    """
    test package setup:  change working directory to the root of the test package, so that 
    relative path to test data will work.
    """
    os.chdir(os.path.dirname(os.path.abspath(__file__)))

def tearDown():
    global orig_wd
    os.chdir(orig_wd) 
```

据我了解，nose在运行该包中的测试之前和之后执行setUp和tearDown包方法，这样可以确保单元测试可以找到合适的test_data目录，并且在测试时将工作目录重置为原始值是完整的。

设置就这么多。**问题是，只有**在运行全套测试时才会出现导入错误。当我排除慢速测试时，相同的模块导入就好了。（澄清一下，引发导入错误的测试并不慢，因此它们在任何一种情况下都会执行。）

```
$ nosetests
...

ERROR: Failure: ImportError (No module named foo_test)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Library/Python/2.7/site-packages/nose/loader.py", line 413, in loadTestsFromName
    addr.filename, addr.module)
  File "/Library/Python/2.7/site-packages/nose/importer.py", line 47, in importFromPath
    return self.importFromDir(dir_path, fqname)
  File "/Library/Python/2.7/site-packages/nose/importer.py", line 80, in importFromDir
    fh, filename, desc = find_module(part, path)
ImportError: No module named foo_test 
```

如果我在没有慢速测试的情况下运行测试套件，则不会出现错误：

```
$ nosetests -a'!slow'

...

test_fast_test (module1.test.foo_test.TestFoo) ... ok 
```

在 python 交互式会话中，我可以毫无问题地导入测试模块：

```
$ python
Python 2.7.1 (r271:86832, Aug  5 2011, 03:30:24) 
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import module1.test
>>> module1.test.__path__
['/Users/USER/project/module1/test']
>>> dir(module1.test)
['__builtins__', '__doc__', '__file__', '__name__', '__package__', '__path__', 'orig_wd', 'os', 'setUp', 'sys', 'tearDown'] 
```

当我在nose/importer.py 中设置断点时，情况看起来有所不同：

```
> /Library/Python/2.7/site-packages/nose/importer.py(83)importFromDir()
-> raise
(Pdb) l
 78                               part, part_fqname, path)
 79                     try:
 80                         fh, filename, desc = find_module(part, path)
 81                     except ImportError, e:
 82                         import pdb; pdb.set_trace()
 83  ->                     raise
 84                     old = sys.modules.get(part_fqname)
 85                     if old is not None:
 86                         # test modules frequently have name overlap; make sure
 87                         # we get a fresh copy of anything we are trying to load
 88                         # from a new path

(Pdb) part
'foo_test'
(Pdb) path
['/Users/USER/project/module1/test']
(Pdb) import module1.test.foo_test
*** ImportError: No module named foo_test
#If I import module1.test, it works, but the __init__.py file is not being executed
(Pdb) import partition.test
(Pdb) del dir
(Pdb) dir(partition.test)
['__doc__', '__file__', '__name__', '__package__', '__path__'] #setUp and tearDown missing?
(Pdb) module1.test.__path__
['/Users/USER/project/module1/test']  #Module path is the same as before.
(Pdb) os.listdir(partition.test.__path__[0])  #All files are right where they should be...
['.svn', '__init__.py', '__init__.pyc', 'foo_test.py', 'foo_test.pyc','test_data'] 
```

即使我将交互式会话中的 sys.path 复制到 pdb 会话中并重复上述操作，我也会看到相同的错误结果。谁能给我任何关于可能发生的事情的见解？我意识到我正在同时做几件非标准的事情，这可能会导致奇怪的互动。我对如何简化我的架构的建议很感兴趣，就像我想得到这个错误的解释一样。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-05-11T18:37:32.133

这是跟踪错误上下文的方法。

```
nosetests --debug=nose,nose.importer --debug-log=nose_debug <your usual args> 
```

之后，检查`nose_debug`文件。搜索您的错误消息“ `No module named foo_test`”。然后查看前面几行，看看鼻子正在查看哪些文件/目录。

在我的例子中，nose 试图运行一些我已经导入到我的代码库中的代码——一个包含自己的测试的第 3 方模块，但我不打算将其包含在我的测试套件中。为了解决这个问题，我使用了[nose-exclude](https://pypi.python.org/pypi/nose-exclude)插件来排除这个目录。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-27T09:50:21.937

默认情况下，它只是调整你的路径。它会在导入模块之前更改 sys.path ，可能允许在包之外执行双重代码和导入（如您的情况）。

为避免这种情况，请`PYTHONPATH`在流鼻涕之前设置并使用`nose --no-path-adjustment`. 请参阅： http: [//nose.readthedocs.org/en/latest/usage.html#cmdoption--no-path-adjustment](http://nose.readthedocs.org/en/latest/usage.html#cmdoption--no-path-adjustment)

如果您无法添加命令行参数，您可以使用 env var ( `NOSE_NOPATH=y`) 或 this in `.noserc`：

```
[nosetests]
no-path-adjustment=1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-08T22:48:13.673

我遇到了这个问题，并将其追溯到 1）忘记激活我正在使用的[*virtualenv*](https://pypi.python.org/pypi/virtualenv)，以及 2）我的 shell [*zsh*](http://www.zsh.org/)`nosetests`显然已经缓存了我机器上错误的可执行文件实例的路径。

一旦我激活了我的 virtualenv，然后给出了 shell 命令`hash -r`，这个错误就停止了。抱歉，我没有确定是否只有其中一个就足够了。

我发现 raffienficiaud 对鼻子问题“ [nosetest 不尊重虚拟环境](https://github.com/nose-devs/nose/issues/973#issuecomment-158339248)”的回复很有帮助：

> 作为记录，这是一个`bash`缓存命令的问题。在这种情况下，`which nosetests`（确定性地）指向正确的可执行文件，同时`bash`缓存系统安装的可执行文件。使用`hash -r`清除缓存（请参阅[http://unix.stackexchange.com/questions/5609/how-do-i-clear-bashs-cache-of-paths-to-executables](http://unix.stackexchange.com/questions/5609/how-do-i-clear-bashs-cache-of-paths-to-executables)）

Unix.SE 对一个问题的回答是，“[如何清除 Bash 的可执行文件路径缓存？](https://unix.stackexchange.com/a/5610/46579) ”，由 Tobu 和 Zigg 撰写。

> `bash`确实缓存了命令的完整路径。您可以使用以下命令验证您尝试执行的命令是否经过哈希处理`type`：
> 
> `$ type svnsync svnsync is hashed (/usr/local/bin/svnsync)`
> 
> 要清除整个缓存：
> 
> `$ hash -r`
> 
> 或者只有一个条目：
> 
> `$ hash -d svnsync`
> 
> 如需更多信息，请咨询`help hash`和`man bash`。

我使用`zsh`not `bash`，并`hash -d nosetests`给了我一条错误消息。尽管如此，在我这样做之后问题就消失了`hash -r`。

# matlab - 从时间数据预测位置坐标

> ID：16200347
> 
> 赞同：0
> 
> 时间：2013-04-24T19:15:12.257
> 
> 标签：matlab, location, octave, predict

我的数据由 x 轴上的时间 (sec) 和 y 轴上的位置 (x,y,z) 组成。我希望能够使用时间（秒）预测位置（x，y，z）。我可以使用什么机器学习算法？如何在 Matlab/Octave 中实现这一点？

具体来说，我有以下数据

```
 Time            Location

`0`       `[470 491 0]`

`2`      [174 281 5]

70.29  [174 281 0]

72.29  [490 257 2] 
```

如何从时间预测位置？

我感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:19:22.220

数据点太少，你总是可以使用线性插值

# json - 这是一个什么样的Json结构？4维数组？

> ID：16200357
> 
> 赞同：1
> 
> 时间：2013-04-24T19:15:51.243
> 
> 标签：json, servicestack

```
{"filters": 
[
    [
      "Color",
      [
        [
          "Blue",
          629,
          "t12-15=blue"
        ],
        [
          "Green",
          279,
          "t12-15=green"
        ]
      ]
    ],
    [
      "Style",
      [
        [
          "Contemporary / Modern",
          331,
          "t6-11=contemporary+modern"
        ],
        [
          "Transitional",
          260,
          "t6-11=transitional"
        ],
      ]
    ]
]} 
```

这对我来说看起来像是一个 4 维数组，但是当我尝试使用 ServiceStack.Text.JsonSerializer 对其进行反序列化时，我没有得到预期的结果。

看起来值“颜色”和“样式”本身不在数组中。这是一个什么样的Json结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:27:35.407

什么样的结构？不正常，真的。一个包含一个字段的对象，该字段包含一个数组，其中第一项是字符串，第二项是一个数组，其中包含两个项，即字符串、数字和字符串项的数组....呸！

这一点都没有错！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:19:59.183

对我来说，它看起来就像一个包含 4 层深度的数组数组的对象，因此它是一个具有一个字段的对象，即[4D 数组](http://en.wiktionary.org/wiki/multidimensional_array)。如果要获取 4D 数组，则需要`filters`从返回的 json 对象中获取字段

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T19:20:45.483

它确实是一个包含在对象中的数组数组数组。这很可怕，但我不明白为什么 JsonSerializer 会窒息它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T19:25:10.170

Style 和 Color 只是它们所在数组的第一个索引。这几乎可以肯定不是预期的。如果有任何东西 Style 可能应该是下一个 Array 的标签（对象）而不是它的兄弟，不是吗？显而易见的后续问题是谁/什么在产生这个 JSON，以及谁/什么在消费它......正如 bmarguiles 所问......你在这里的期望是什么，因为 JSON 在语法上是有效的，如果它没有做你期待什么……你期待什么？

**根据您的评论进行编辑：**

好吧...因为您似乎可以依赖这些都是嵌套数组并且您要查找的标签将是任何数组的第 0 个索引，所以您可以递归到数组中查找对于该标签，然后假设它将包含您期望的数据，则处理位于第一个索引处的数组。它很丑陋，但看起来它会起作用（只要生成它的服务没有改变）。C# 有一个 JSON 反序列化器[james.newtonking.com/pages/json-net.aspx](http://james.newtonking.com/pages/json-net.aspx)。你应该只使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T19:22:14.537

当您要求 Jackson 使用数组而不是对象来表示地图时，它看起来大致类似于 Jackson 可能会产生的结果。

# git - 带有一些额外过滤器的“git clean -xdf”

> ID：16200359
> 
> 赞同：6
> 
> 时间：2013-04-24T19:15:56.160
> 
> 标签：git

是否可以使用一些额外的过滤器来做**git clean -xdf ？**我想要做的是删除所有未跟踪的文件，但保留具有特定文件扩展名的文件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T19:23:43.740

使用该`-e`选项指定排除模式。

`.txt`示例：这将删除所有未跟踪的文件，但具有扩展名的文件除外：

```
git clean -xdfe *.txt 
```

# ember.js - 如何将模型信息传递给嵌套模板中的每个语句？

> ID：16200362
> 
> 赞同：1
> 
> 时间：2013-04-24T19:15:58.403
> 
> 标签：ember.js

我有一个索引路径，我需要根据模型列表在一个插座中填充菜单。但是我无法在每个语句中表示模型。

这是**类别模型**：

```
App.Category = DS.Model.extend({
    title: DS.attr('string'),
    parent: DS.belongsTo('App.Category')
}) 
```

这是我渲染它的**indexRoute**

```
App.IndexRoute = Em.Route.extend({
renderTemplate: function(){
    this.render('index')
    this.render('categoryMenu',
        {
            outlet: 'sidebar',
            into: 'index',
            model: function() {
                return App.Category.find()
            },
            controller: App.CategoriesController
        })
    this.render('badgesList',{
        outlet: 'badgesList',
        into: 'index'
    })
}
}) 
```

**索引模板：**

```
<script type="text/x-handlebars" data-template-name="index">
    <div class="span3">
        {{outlet sidebar}}
    </div>
    <div class="span8">
       {{outlet badgesList}}
    </div>
</script> 
```

**嵌套类别模板**

```
<script type="text/x-handlebars" data-template-name="categoryMenu">
    <ul>
        {{#each model}}
            {{title}}
        {{/each}}
    </ul>
</script> 
```

我试图将每个语句更改为几个不同的东西，例如模型中的*控制器*或*项目，*但没有显示任何内容。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T21:40:58.063

首先让自己`CategoriesController`像这样：

```
App.CategoriesController = Ember.ArrayController.extend({
    content: function () {
        return App.Category.find()
    }.property()
}); 
```

将您的模板重命名为`categories`

```
<script type="text/x-handlebars" data-template-name="categories">
    <ul>
        {{#each model}}
                {{title}}
        {{/each}}
    </ul>
</script> 
```

在您的`index`模板中替换`{{outlet}}`为`{{render 'categoies'}}`

```
<script type="text/x-handlebars" data-template-name="index">
    <div class="span3">
        {{render 'categoies'}}
    </div>
    <div class="span8">
           {{outlet badgesList}}
    </div>
</script> 
```

最后一件事删除调用渲染`categoryMenu`。

# python - 删除多个元素而不更新直到最后

> ID：16200363
> 
> 赞同：3
> 
> 时间：2013-04-24T19:16:03.043
> 
> 标签：python, list

我有两个清单：

```
list_a = [1,5,8]
list_b = [12,4,2,5,7,5,3,6,8] 
```

中的元素`list_a`对应于 中元素的索引`list_b`。两个列表的大小都大于 100。

如何删除`list_b`其索引所在的元素`list_a`，所以如果您将列表放在结果列表上方`[12,2,5,7,3,6]`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T19:18:59.917

两种选择：

*   使用列表推导创建一个新列表：

    ```
    newlist = [el for i, el in enumerate(oldlist) if i not in indices_to_delete] 
    ```

    `indices_to_delete`如果是 a ，这将更快`set`：

    ```
    indices_to_delete = set(indices_to_delete)
    newlist = [el for i, el in enumerate(oldlist) if i not in indices_to_delete] 
    ```

    因为集合中的成员资格测试是 O(1) 与列表中的 O(n)。

*   就地从列表中以反向排序的顺序删除索引：

    ```
    for index in sorted(indices_to_delete, reversed=True):
        del oldlist[index] 
    ```

    如果您*不*以反向排序顺序删除项目，则具有较高索引的项目将向上移动，因为具有较低索引的项目将被删除，其余的`indices_to_delete`不再与您需要删除的项目匹配。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T19:18:23.600

这应该实现：

```
for delidx in reversed(toDelete):
  del otherList[delidx] 
```

此外，使用列表推导：

```
l2 = [elem for i, elem in enumerate(l1) if i not in toDelete] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T19:18:32.027

现在我明白了这个问题

```
a = numpy.array(list2)
mask = [True]*len(a)
mask[list1] = False
print a[mask] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T20:13:53.120

好的，这是一个稍微过度设计的解决方案，但在这里

```
def get_newl(li, index):
    index = sorted(index, reverse=True)
    i=0
    while i < (len(li)-len(index)):
        x = index.pop()
        while i < x:
            yield li[i]
            i+=1
        i+=1 
```

在此处运行代码[http://codebunk.com/bunk#-Isxeb4TZOHBCvQi4EsY](http://codebunk.com/bunk#-Isxeb4TZOHBCvQi4EsY)

# php - MySQL 错误 23000 同时请求生成自定义代码 PHP - MySQL

> ID：16200376
> 
> 赞同：0
> 
> 时间：2013-04-24T19:16:46.250
> 
> 标签：php, mysql, transactions, yii

我需要为表 A 中的每条记录生成一个代码。代码是根据表中存在的行数生成的。

因此，如果表 A 有 5 条记录，则代码应类似于 C006。如果有 6 条记录，则代码应为 C007 等。

我生成的代码没有问题，除了如果请求是由两个或更多用户同时完成的，那么生成的代码是相同的，因为在事务开始时，有 5 行，所以两个进程都生成 C006 . 我通过创建唯一索引解决了这个问题。因此，如果发生这种情况，一个人可以保存记录，而另一个用户将收到代码不唯一的错误。

现在，我担心的是：当一百或更多用户提出相同的请求时会发生什么？用户是否需要继续发出请求，直到代码唯一并保存记录？如果发生这种情况，如何避免这种情况，以便为每个请求生成并保存一个唯一的顺序代码？

顺便说一句，我正在使用 Yii，显然无法锁定表，因为 Yii 使用 t 作为默认表别名，当我尝试锁定表时，我需要指定一个唯一别名。

# symfony - symfony2 语言环境和验证信息

> ID：16200380
> 
> 赞同：2
> 
> 时间：2013-04-24T19:17:03.510
> 
> 标签：symfony, doctrine

`locale: pl`在我`parameters.yml`但我的验证消息是英文而不是波兰语，我也尝试过`locale: pl_PL`，但这也不起作用每次我清除缓存

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T19:36:19.473

您必须取消注释 config.yml 中框架组件的翻译服务才能激活翻译，对于其他 symfony 组件也是如此。更改 parameters.yml 中的参数是不够的。

```
framework:
    translator:      { fallback: %locale% } 
```

看看官方[文档](http://symfony.com/doc/current/book/translation.html)。

# ruby-on-rails-3 - 在 ActiveAdmin 的索引页面中添加顶部

> ID：16200382
> 
> 赞同：4
> 
> 时间：2013-04-24T19:17:06.510
> 
> 标签：ruby-on-rails-3, activeadmin

我想在 active_admin 顶部添加一些一般信息。

例如，我想在索引页面的顶部呈现一个部分，所以我可以显示类似

如果我像在文档中找到的那样做，它会为每个元素重复。

```
index do
  render :partial=>'foo', :layout=>false
  column :image_title
  default_actions
end 
```

我想渲染 :partial=>'foo', :layout=>false 一次。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-11-03T19:38:25.717

你完全可以做到这一点。您可能只需要将它包装在一个 arbre 组件中。

```
index do
  panel "Foo", :id => "foo-panel" do
    render :partial => "foo"
  end
  column :image_title
  default_actions
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-03T11:03:44.310

```
class ::ActiveAdmin::Views::IndexAsAdminUser < ActiveAdmin::Views::IndexAsTable

    def build(page_presenter, collection)
       para "My custom text"
       #or put _foo.html.erb to views/admin/admin_users
       # render :partial=>'help', :layout=>false 
       super
     end
end

ActiveAdmin.register AdminUser do
  config.batch_actions = false

  actions :index, :show

  index  as: :admin_user do  #<---- as: :admin_user to load class ::ActiveAdmin::Views::IndexAsAdminUser  
    column :username
    column :email
    column :current_sign_in_at        
    column :last_sign_in_at           
    column :sign_in_count             
    default_actions                   
  end                                 

  filter :username

end 
```

# visual-studio-2008 - 在最近安装的模拟器中部署 Visual Studio 应用程序

> ID：16200383
> 
> 赞同：1
> 
> 时间：2013-04-24T19:17:10.360
> 
> 标签：visual-studio-2008, emulation, windows-mobile-6.5

我正在尝试在模拟器中部署 Visual Studio 2008 应用程序。我已经从这个[页面](http://www.microsoft.com/en-us/download/details.aspx?id=5389)下载了 Windows Mobile 6.5.3 Professional DTK ，它带有一些模拟器。Visual Studio 的 Emulator Manager 识别它们，但在部署应用程序时不识别它们，当我尝试部署 mi 解决方案时，它会出现一个包含不同版本的模拟器的弹出窗口，但来自 6.5.3 DTK 的那些没有t 出现选择。如何配置 Visual Studio 以便能够选择这个新安装的模拟器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-03T11:39:23.210

项目->右键->更改目标平台

![在 Visual Studio 中更改目标平台](https://i.stack.imgur.com/7t0Gs.jpg)

从下拉列表中选择合适的平台

![选择目标平台](https://i.stack.imgur.com/w8rXR.jpg)

运行应用程序并选择要部署的环境 ![在此处输入图像描述](https://i.stack.imgur.com/xDFbI.jpg)

# c# - 重载索引器导致：“Minesweeper.Tile 是一种类型，但用作变量”错误

> ID：16200385
> 
> 赞同：0
> 
> 时间：2013-04-24T19:17:12.720
> 
> 标签：c#, indexing, operator-overloading

我在 c# 中制作一个扫雷项目是为了好玩，我想将新的 Tiles 存储在 Tile 类内的字典中，以便在启动 Tile 时将其存储并可以通过 Tile[coords] 访问但是我不断得到上面错误。这是我用于 Tile 类的代码（请不要评论我的约定，我是 C# 新手，我是 Java/Python 程序员：p）

```
class Tile
{
    private static Dictionary <Coords, Tile> tiles = new Dictionary <Coords, Tile> ();

    public int numMinesAdjacents { get; set; }
    public readonly bool isMine;
    public readonly Coords position;

    private Tile [] aAdjacents = new Tile [8];

    public Tile(int x, int y, bool isMine = false)
    {
        this.isMine = isMine;
        position = new Coords(x, y);
        Tile[position] = this;
    }

    public void init()
    {
        calculateAdjacents();
        calculateNumMinesAdjacent();
    }

    private void calculateAdjacents()
    {
        int i = 0;
        for (int y = -1; y < 1; y++)
        {
            if ((position.y - y) < 0 || (position.y + y) > Math.Sqrt(Program.MAX_TILES)) continue;
            for (int x = -1; x < 1; x++)
            {
                if ((position.x - x) < 0 || (position.x + x) > Math.Sqrt(Program.MAX_TILES)) continue;
                aAdjacents [i] = Tile[position + new Coords(x, y)];
                i++;
            }
        }
    }

    private void calculateNumMinesAdjacent()
    {
        int n = 0;
        foreach (Tile pTile in aAdjacents)
        {
            if (pTile.isMine) n++;
        }
        numMinesAdjacents = n;
    }

    /*private static void add(Tile pTile)
    {
        tiles.Add(pTile.position, pTile);
    }*/

    public /*static - if I use static nothing is different*/ Tile this [Coords coords]
    {
        get { return tiles [coords]; }
    }
} 
```

如果我打电话

平铺(0, 0); 平铺(0, 1);

接着

平铺[新坐标（0, 0）]

我得到一个错误，我在使用 Tile[] 的类中的位置（构造函数和 calculateAdjacents）也得到一个错误这里出了什么问题？

谢谢，杰米

编辑：对不起，我的意思是 Tile[position] 我把它改回来并打错了。问题是我重载了它，这应该意味着即使从另一个类调用 Tile[coords] 也是合法的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:19:19.400

目前尚不清楚您期望这意味着什么：

```
Tile[this]; 
```

不过，目前这不是一个有效的表达方式。

C# 不支持静态索引器。对于*实例*索引器，您可以使用：

```
Tile tile = this[someCoordinate]; 
```

...虽然*实例*索引器使用这样的*静态*成员很奇怪。有一个方法会更干净：

```
public static Tile GetTile(Coords coords)
{
    return tiles[coords];
} 
```

然后你就打电话`Tile.GetTile(...)`到别处了。

作为旁注，您应该开始遵循 .NET 命名约定以使您的代码更易于理解。另外，我强烈建议您避免使用公共字段，即使它们是只读的。

# android - 类路径资源被（可能）sbt 复制

> ID：16200386
> 
> 赞同：1
> 
> 时间：2013-04-24T19:17:13.300
> 
> 标签：android, scala, sbt

我正在尝试使用 sbt 和[jberkel/android-plugin](https://github.com/jberkel/android-plugin)在 Scala 和 Akka 中设置简单的 Android 项目。我成功地根据[android-plugin 的入门教程](https://github.com/jberkel/android-plugin/wiki/getting-started)创建了简单的应用程序。我还设法组装了 ProGuard 配置，使我能够将 Akka 混合到项目中。

现在我想添加 Akka 配置文件，但我无法做到。我在`src/main/resources`文件夹中创建了它，并希望它能够正常工作。不幸的是，在 APK 组装过程中，sbt 失败并出现以下错误：

```
[trace] Stack trace suppressed: run last Akkdroid/android:package-debug for the full output.
[error] (Akkdroid/android:package-debug) 
[error] Using keystore: /home/ghik/.android/debug.keystore
[error] Packaging akkdroid-0.1.apk
[error] /data/Studia/S10/Mobilne/akkdroid/target/resources.apk:
[error] => res/layout/main.xml
[error] => AndroidManifest.xml
[error] => resources.arsc
[error] /data/Studia/S10/Mobilne/akkdroid/target/classes.dex => classes.dex
[error] /data/Studia/S10/Mobilne/akkdroid/target/classes.min.jar:
[error] => akkdroid.conf
[error] => library.properties
[error] => reference.conf
[error] => org/jboss/netty/container/spring/beans.xml
[error] /data/Studia/S10/Mobilne/akkdroid/src/main/resources/akkdroid.conf => akkdroid.conf
[error] 
[error] Error packaging /data/Studia/S10/Mobilne/akkdroid/target/akkdroid-0.1.apk: Duplicate files at the same path inside the APK
[error] Total time: 20 s, completed 2013-04-24 20:32:47 
```

从这些消息中，我推断我的`akkdroid.conf`文件首先被复制（由 ProGuard？）`classes.min.jar`，然后`sbt`尝试构建包，包括来自两者的资源，`classes.min.jar`并`src/main/resources`最终看到我的文件两次。

不幸的是，我不知道为什么会发生这种情况以及如何解决它。

如果有帮助，这是我的`sbt`构建文件（主要从[jberkel 的模板](https://github.com/jberkel/android-app.g8)生成）：

```
import sbt._

import Keys._
import AndroidKeys._

object General {
  val settings = Defaults.defaultSettings ++ Seq(
    name := "Akkdroid",
    version := "0.1",
    versionCode := 0,
    scalaVersion := "2.10.1",
    platformName in Android := "android-10",
    javacOptions ++= Seq("-source", "1.6", "-target", "1.6")
  )

  val proguardSettings = Seq(
    useProguard in Android := true,
    proguardOption in Android :=
      """-keepclassmembers class * {
        |  ** MODULE$;
        | }
        |-keep public class akka.actor.LocalActorRefProvider {
        |public <init>(...);
        |}
        |-keep public class akka.remote.RemoteActorRefProvider {
        |public <init>(...);
        |}
        |-keep class akka.actor.SerializedActorRef {
        |*;
        |}
        |-keep class akka.remote.netty.NettyRemoteTransport {
        |*;
        |}
        |-keep class akka.serialization.JavaSerializer {
        |*;
        |}
        |-keep class akka.serialization.ProtobufSerializer {
        |*;
        |}
        |-keep class com.google.protobuf.GeneratedMessage {
        |*;
        |}
        |-keep class akka.event.Logging*
        |-keep class akka.event.Logging$LogExt{
        |*;
        |}
        |-keep class scala.Option
        |-keep class scala.Function1
        |-keep class scala.PartialFunction
        |-keep class scala.collection.SeqLike {
        |public protected *;
        |}
        |-keep class akka.**
        |-keepclassmembers class akka.**
        |-keep class org.omg.**
        |-keep class scala.Tuple2
        |-dontskipnonpubliclibraryclassmembers
        |-dontskipnonpubliclibraryclasses
      """.stripMargin
  )

  lazy val fullAndroidSettings =
    General.settings ++
      AndroidProject.androidSettings ++
      TypedResources.settings ++
      proguardSettings ++
      AndroidManifestGenerator.settings ++
      AndroidMarketPublish.settings ++ Seq(
      keyalias in Android := "change-me",
      libraryDependencies += "org.scalatest" %% "scalatest" % "1.9.1" % "test"
    )
}

object AndroidBuild extends Build {
  javacOptions ++= Seq("-target", "1.6")

  lazy val main = Project(
    "Akkdroid",
    file("."),
    settings = General.fullAndroidSettings ++ Seq(
      libraryDependencies += "com.typesafe.akka" % "akka-actor_2.10" % "2.1.2",
      libraryDependencies += "com.typesafe.akka" % "akka-remote_2.10" % "2.1.2"
    )
  )

  lazy val tests = Project(
    "tests",
    file("tests"),
    settings = General.settings ++
      AndroidTest.androidSettings ++
      General.proguardSettings ++ Seq(
      name := "AkkdroidTests"
    )
  ) dependsOn main
} 
```

我将非常感谢一些帮助。我几乎没有 Android 或 SBT 方面的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T00:09:23.613

这是另一种似乎可行的方法，并且避免了使用 Android`Context`将 Akka 配置加载为原始 android 资源的需要。我不确定它是否比将配置文件视为原始 Android 资源更“正确”。

`config`我在项目的顶层创建了一个名为的目录`sbt`，并将我的 Akka 配置文件命名`application.conf`为 。

```
myapp/
    config/
        application.conf
    project/
        Build.scala
        plugins.sbt
    src/
        main/
            scala/ 
```

然后我将以下设置添加到我的 Build.scala 中：

```
unmanagedClasspath in Runtime <+= (baseDirectory) map { bd => Attributed.blank(bd / "config") } 
```

我正在使用[Jan Berkel 的 Android 应用程序模板](https://github.com/jberkel/android-app.g8)，我的`Build.scala`. 上下文中的相关设置看起来像

```
object General {
  val settings = Defaults.defaultSettings ++ Seq (
    name := "AkkaWeb",
    version := "0.1",
    <other settings elided>...
    unmanagedClasspath in Runtime <+= (baseDirectory) map { bd => Attributed.blank(bd / "config") }
) 
```

我必须做一个sbt`clean`和.`reload``application.conf``.apk``reference.conf``ActorSystem`

值得注意的一点：如果我在我的主线程中构建，那么在[严格模式下](http://developer.android.com/reference/android/os/StrictMode.html)`ActorSystem`运行时读取配置文件会导致磁盘访问冲突。这是一个单独的问题，与此问题无关，但需要注意一些事项，尤其是当我在构建.`ActorSystem`

此解决方案直接从 Akka 文档[here](http://www.scala-sbt.org/release/docs/Detailed-Topics/Classpaths.html#example)复制而来，您可以在此处阅读更多详细信息以了解它到底在做什么。

## 更新

我刚刚注意到别的东西。`Build.scala`我的影响中`reference.conf`出现在`.apk`文件中的 Maven 工件的顺序。如果我希望 jar 中的文件出现在我的文件中，我必须将其放在其他具有与 Typesafe 配置库一起使用的文件的`akka-actor`工件之前。例如：`reference.conf``reference.conf``akka-actor``reference.conf``.apk`

```
libraryDependencies ++= Seq(
    "com.typesafe.akka" % "akka-actor_2.10" % "2.1.4",
    "io.spray" % "spray-util" % "1.1-M7.1-openssl-M6"
) 
```

如果这两个工件的顺序颠倒了，那么`reference.conf`结果文件中的`.apk`文件将是来自 Spray 工件而不是 Akka 工件的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T19:48:58.353

我有同样的问题。我不知道这是否是最好的处理方法，但我将我的配置文件放在了android项目的`raw`目录中。然后我将它解析为一个[`Config`](http://typesafehub.github.io/config/latest/api/index.html?com/typesafe/config/Config.html)对象并将其传递给`ActorSystem`构造函数。

```
object AkkaSystem {
  private var systemOption: Option[ActorSystem] = None

  def system(implicit context: Context): ActorSystem = synchronized {
    systemOption match {
      case None =>
        val reader = new InputStreamReader(
          context.getResources.openRawResource(R.raw.configuration)
        )
        systemOption = Option (
          ActorSystem("MySystem", ConfigFactory.parseReader(reader))
        )
        reader.close()
        systemOption.get
      case Some(existingSystem) => existingSystem
    }
  }
} 
```

然后在我的`Activity`课堂上，我可以使用该`AkkaSystem`对象来获取配置`ActorSystem`：

```
class MainActivity extends Activity {
  implicit val context = this

  private def mainActor = AkkaSystem.system.actorOf(Props[MainActor], "main")
} 
```

我同意，如果我可以避免所有这些代码并且需要通过`Context`以获取 Android 资源，那会更好。

# javascript - Javascript 对象属性是否按顺序分配？

> ID：16200387
> 
> 赞同：21
> 
> 时间：2013-04-24T19:17:14.030
> 
> 标签：javascript

假设我有一个对象，它根据函数的返回值分配属性：

```
var i = 0;

var f = function() { return ++i; }

var foo = {
            a:f(),
            b:f(),
            c:f()
          }; 
```

是否保证 foo.a 为 1， foo.b 为 2， foo.c 为 3？我知道当你迭代一个对象时，JS 不保证顺序，那么赋值呢？

它是否在某处的 JS 规范中指定？我只是出于教育原因而问。

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-24T19:37:56.207

[标准 ECMA-262 (5.1) - 第 11.1.5 节 - 对象初始化器](http://www.ecma-international.org/ecma-262/5.1/#sec-11.1.5)

> 产生式 PropertyNameAndValueList : PropertyNameAndValueList , PropertyAssignment 评估如下：
> 
> ```
> 1\. Let obj be the result of evaluating PropertyNameAndValueList.
> 2\. Let propId be the result of evaluating PropertyAssignment.
> ...
> 5\. Call the [[DefineOwnProperty]] internal method of obj with arguments propId.name, propId.descriptor, and false.
> 6\. Return obj. 
> ```

所以是的，该命令由标准强制执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:37:19.190

来自 ECMAScript 6 wiki，它将定义新版本的 JS：

> 当一个范围（Block、FunctionBody、Program、ModuleBody 等）被输入时，所有直接包含的函数和类声明所声明的变量都绑定到它们各自的函数和类。**然后所有类体都按文本顺序执行**。当评估类定义时，类主体定义并初始化类范围的属性一次。这包括构造函数（“类”本身）及其原型属性的属性。**这些初始化以文本顺序发生**。

你的资源来了！*JavaScript 对象属性以对象*的文本顺序初始化。数组（当前）并不总是遵循这个规则。

**来源**：[http ://wiki.ecmascript.org/doku.php?id=harmony:classes](http://wiki.ecmascript.org/doku.php?id=harmony:classes)

当我在 ECMAScript 5 中找到参考资料时，我将编辑这篇文章，尽管我确信它在那里。

## 编辑：找到了

ECMAScript 5 确实有它： http: [//www.ecma-international.org/ecma-262/5.1/#sec-15.2.3.7](http://www.ecma-international.org/ecma-262/5.1/#sec-15.2.3.7)。

> 如果实现为 for-in 语句定义了特定的枚举顺序，则必须使用相同的枚举顺序来对该算法的步骤 3 中的列表元素进行排序。

这定义了对内部表的调用`DefineOwnProperty`以及属性在内部表中的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T19:29:30.750

我没有官方来源可以引用，但让我们使用一点常识。

如果作业*没有*按顺序完成怎么办？您永远无法知道哪个值将分配给哪个属性，从而使对象结构无用*（至​​少在使用对象字面量语法时）*。

如果它是函数调用、原始文字或其他值，则没有区别。如果不能保证按顺序发生，那就行不通了。

* * *

在 ECMAScript 5 中快速搜索该术语`left to right`后，如果对您有帮助，以下是一些结果：

> ## 7 词汇约定
> 
> ECMAScript 程序的源文本首先被转换为一系列输入元素，这些元素是标记、行终止符、注释或空格。从左到右扫描源文本，重复将最长可能的字符序列作为下一个输入元素。
> 
> ## 11.8.5 抽象关系比较算法
> 
> ...这是必要的，因为 ECMAScript 指定表达式的从左到右求值。
> 
> ## 附录 D（资料性）第 5 版中可能对第 3 版兼容性产生影响的更正和澄清
> 
> ECMAScript 通常使用从左到右的求值顺序，但是 > 和 <= 运算符的第 3 版规范语言导致部分从右到左的顺序。该规范已针对这些运算符进行了更正，现在它指定了一个完整的从左到右的评估顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T19:19:15.387

分配总是有序的。这只是代码被发现、解释和执行的方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T19:19:28.603

是的，您可以保证 a 为 1，b 为 2，等等。每个都`f()`将按照您编写它们的顺序进行解释。

# ios - 有没有一种简单的方法可以让另一个 ViewController 知道按钮已被按下？

> ID：16200390
> 
> 赞同：0
> 
> 时间：2013-04-24T19:17:20.790
> 
> 标签：ios, objective-c, nsnotification

我有一个应用程序，当按下 2时，需要在视图控制器 1 中更改菜单`button`。`view controller`实现这一目标的最佳方法是什么？

我听过很多讨论，`NSNotification`但我认为那是为了显示警报？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T19:27:46.850

执行此操作的“正确”方法是将新状态写入应用程序的数据模型。当另一个视图控制器激活时，它应该根据模型所说的更新它的视图。这样，即使在用户进行更改时这些信息不存在，其他视图控制器也可以使用这些信息。

通知是将信息传达给其他对象的好方法，而无需具体了解它们，但只有在发送时存在关心它的对象时，通知才有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:25:41.687

你以错误的方式思考这个问题。一个视图控制器不应该关心另一个视图控制器中发生的事情。

如果点击按钮会导致菜单内容发生变化，那么听起来您正在更改数据。按下按钮应该告诉模型层可用选项已更改，另一个视图控制器应该从模型层将可用选项加载到菜单中。

> 我听过很多关于 NSNotification 的讨论，但我认为那是为了显示警报？

不，它是为了以一种不将这些部分耦合在一起的方式将有关事件的信息分发到应用程序的其余部分。这不是与用户交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T19:26:34.337

`NSNotification`是一种方法，不，它与警报无关。

它的工作原理是这样的：“生产者”可以发布（发送）通知。其他对象可以订阅通知并对通知作出反应。这是解耦对象的好方法（目标通常是让每个对象知道尽可能少的关于另一个对象的信息）。

搜索`NSNotification tutorial`一下，有不少。你应该真正熟悉它们，它们在 iOS 和 Mac OS X 开发中被*大量*使用，因为它们非常非常方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T19:57:36.343

如果您没有同时呈现两个视图控制器并且您从 viewcontroller1 转换到 viewcontroller2，您可以使用 segues 将信息从 vc1 传递到 vc2。我认为通知很棒，但我认为没有必要。

# actionscript-3 - 在 Starling 中禁用鼠标拦截器

> ID：16200395
> 
> 赞同：1
> 
> 时间：2013-04-24T19:17:53.823
> 
> 标签：actionscript-3, input, touch, starling-framework

如何阻止所有鼠标触摸输入到我的 Actionscript 3 Starling 游戏中？

基本上我需要在一段时间内忽略所有触摸事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-07T18:34:16.703

如果您不希望对象可触摸，则可以禁用“可触摸”属性。当它被禁用时，对象及其子对象都不会再收到任何触摸事件。

无需添加新的显示对象来防止触摸。

`this.touchable = false;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:17:53.823

开发了一个快速的解决方案！基本上创建一个与屏幕大小相同的 Quad，并将其添加到最前面的图层。

添加到最前面层文件的 init() 函数：

```
Starling.current.addEventListener('TOUCH_BLOCKER_ENABLE', touchBlockerEnable);
Starling.current.addEventListener('TOUCH_BLOCKER_DISABLE', touchBlockerDisable); 
```

然后定义这些函数：

```
private function touchBlockerEnable(e:Event):void
{
    if(!_quad)
    {
        _quad = new Quad(Starling.current.stage.width,Starling.current.stage.height,0xFFE6E6);
        _quad.x = 0;
        _quad.y = 0;
        _quad.alpha = 0.1;
        addChild(_quad);
    }
}

private function touchBlockerDisable(e:Event):void
{
    if(_quad)
    {
        removeChild(_quad);
        _quad = null;
    }
} 
```

调用此函数以激活 Touch Blocker：

```
Starling.current.dispatchEvent(new Event('TOUCH_BLOCKER_ENABLE')); 
```

# asp.net - 如何手动将库添加到我的网站托管服务器

> ID：16200399
> 
> 赞同：0
> 
> 时间：2013-04-24T19:18:04.857
> 
> 标签：asp.net, iis

我的网站主机服务器的系统非常旧（顺便说一句，它被称为 123-reg，如果可以的话，尽量避免像瘟疫一样）它似乎甚至没有 linq 库。是否可以将 linq.dll 库上传到我的 bin 文件夹并加载它？文件在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:42:28.473

这自然适用于运行 .net 3.5 或更高版本的站点。

但是，要回答您添加它的问题..

您可以右键单击 Visual Studio 中的站点 Bin 文件夹和“添加引用”。

选择顶部的 .Net 选项卡，您会发现它为`System.Data.Linq`

不过请注意，如果您的主机不支持 .net 3.5 或更高版本，它将无法工作。

# asp.net-mvc - 如何/何时在 Breeze 中查询“扩展”实体

> ID：16200400
> 
> 赞同：0
> 
> 时间：2013-04-24T19:18:08.560
> 
> 标签：asp.net-mvc, knockout.js, breeze, single-page-application

我有一个加载“子”实体的 ViewModel，我还想根据加载的每个子实体显示“孙子”实体。为了简化事情，我需要帮助确定如何查询这些对象并将它们显示在浏览器中适当的“树”下（为我对编码语言的屠杀表示歉意：））

我正在使用 Knockout 绑定数据并使用 Breeze 加载实体。这个问题是[何时向 Breeze 实体添加扩展其他复杂类型的扩展](https://stackoverflow.com/questions/16196861/when-to-add-extend-additional-complex-types-onto-a-breeze-entity)

另外 - 我的模型首先是 EF 代码，我有一个配置定义了子孙之间的一对多关系，我*认为*Breeze 已经知道这一点，但我正试图弄清楚如何利用这一点。

childs.js（查看模型）

```
var childs = ko.observableArray();
var grandChilds = ko.observableArray();
var parentId = ko.observable();

function refresh() {
    var parentId = (parent).parentId;  // << for ex. don't worry about this line : )
    return Q.all([getChildren(), getGrandChildren()]);
}

function getChildren() {
    return datacontext.getChildren(childs, parentId);
}

function getGrandChildren() {
    return datacontext.getGrandChildren(grandChilds);
} 
```

并在视图中（childs.html）

```
<div data-bind="foreach: childs">
    <div title="Go to Child Details">
        <div><strong data-bind="text: name"></strong></div>
        <div><strong data-bind="text: gender().description"></strong></div>
    </div>
    <div>
        <!-- ko.compose { view: grandChilds} --><!--/ko-->
    </div>
</div> 
```

和我当前的数据上下文供参考

```
 var getChilds= function (childsObservable, parentId) {

        var query = EntityQuery.from('Childs')
            .where('parentId', '==', parentId)
            .expand('grandChildren')
            .orderBy('id');

        return manager.executeQuery(query)
            .then(querySucceeded)
            .fail(queryFailed);

        function querySucceeded(data) {
            if (childsObservable) {
                childsObservable(data.results);
            }
            logger.log('Retrieved [Childs] and [Grandchilds] from remote data source', data, system.getModuleId(datacontext), true);
        }
    }; 
```

我只想加载孩子的孙子，因为有很多孩子，我只想在正确的孩子下显示孙子，而不是在一个列表中显示所有孙子。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:34:32.020

您可以通过三种基本方法来查询和“链接”相关实体。

1) 使用*EntityQuery.expand*

2）使用*EntityAspect.loadNavigationProperty*

3) 创建一个“广泛”的 EntityQuery，恰好包含整个图形，并且所有父/子关系都将自动链接。

# javascript - Ajax表单上传进度条

> ID：16200409
> 
> 赞同：2
> 
> 时间：2013-04-24T19:18:32.713
> 
> 标签：javascript

尝试为表单上传制作进度条（旧的 HTML4 表单上传，而不是新的 HTML5 API）。进度实际上跟踪文件移动后正在完成的其他工作。它的设计方式是流保持打开状态，直到完成额外的工作，然后服务器端方法最终返回，从而关闭流。

我遇到了一些特定于 Chrome 的问题。我也有一个可行的实现，但我希望能得到“更好”的东西。

对于任何可能要求提供代码的人：故意不在这里。场景解释了问题；代码本身没有“错误”，只会更加混乱。

**简而言之，第 1 次尝试失败**

1.  启动表单上传
2.  在获取某些 JSON 中的进度的 Ajax 调用上设置间隔
3.  将数据渲染到进度条

失败原因：上传流阻塞了页面上的其他活动，并且您在传输过程中无法进行额外的 Ajax 调用。

**简而言之，第 2 次尝试失败**

1.  创建一个包含相同 Ajax 调用的 iFrame
2.  将数据渲染到 iFrame 中的元素（所需的一切都是自包含的，至少不引用“顶部”文档）

结果：

*   在启动表单上传之前，我可以从 JSON 呈现“状态：等待”。渲染函数还增加了一个计数器，所以我会看到“尝试#X”。状态等待时，尝试次数会增加。

*   传输启动后，Ajax 调用成功获得 200，我可以检查响应以查看 JSON 确实存在。

*   但是，我无法更新 iFrame 中的“shadow DOM”（这是正确的术语吗？）。尝试访问 iFrame 中的节点并对其进行修改失败。甚至计数器也没有增加。

*   传输完成后，它将成功呈现“状态：完成”并且计数器会向前跳（计数器正在递增，但将其呈现到 iFrame 只是不起作用）

GRR！

**成功的尝试**

iFrame 不再请求 Ajax。iframe 的 src 属性设置为返回预渲染进度条的 URL。正在加载到 iframe 中的文档设置为重新加载自身。因此，在规定的时间间隔内，它会重新渲染一个“移动”的新进度条。

结果是一个“工作”进度条，尽管有时请求中的滞后会导致 iframe 在一瞬间变为空白，这不是我的偏好。

* * *

谁能想到更好的方法来做到这一点？是否有可能我可以让 iFrame 中的表单本身和 Ajax 在“顶部”文档中工作？

我主要想把表现层和数据层分开，但是只要我必须返回一个渲染的进度条，那是行不通的。作为奖励，如果我能找到一种通过 Ajax 更新进度条的方法，我就不会有那些“空白”光点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T19:48:45.457

要扩展我的评论并提供指导，要执行“隐藏 iframe 文件上传”，您需要一个带有名称的隐藏框架（不是很明显吗？）。

```
<html>
  <body>
    <iframe name="file-upload" src="" style="border: none; visibility: hidden; width: 0; height: 0; position: absolute; top: 0; left: 0;"></iframe>
    The iframe shouldn't be visible, just pretend I didn't use inline styles though.
    <form id="uploadForm" action="anaction.php" enctype="whatever-you-need-here" method="post">
      File: <input type="file" /><br />
      <input type="submit" value="Upload" />
    </form>
  </body>
</html> 
```

到目前为止所有非常标准的东西。接下来是Javascript：

```
var form = document.getElementById("uploadForm");
form.onsubmit = function() { 
  console.log("The form has been submitted, start progress!"); 
}
form.target = "file-upload"; // the name of the iframe
// Go about your business, when "Upload" is pressed the file will be submitted
// to the iframe so you'd start your progress requests on form submit. 
```

忽略不良做法，这是一个简单的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:24:45.650

老实说，我为一个应用程序做所有的前端开发，我一直在寻找同样的东西。首先，我尝试使用我们的 socket.io 发送回一个数字，然后将其转换为百分比。然后，我将其应用于 twitter bootstrap prog bar。

我最终做和坚持的是使用精细上传器[http://fineuploader.com/](http://fineuploader.com/)文档有点糟糕，你必须玩弄它一点，但它有一个内置事件，在上传时一遍又一遍地触发一些实际上会给你带来进步的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T19:29:45.580

我决定使用：[http](http://blueimp.github.io/jQuery-File-Upload/) ://blueimp.github.io/jQuery-File-Upload/因为它是免费的，并且给你很好的进度条。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T19:30:52.813

上次我这样做时，我只是将带有数据的表单提交到一些不可见的 iframe，然后我就可以忘记它了。

接下来，我开始轮询一些 URL/REST API 以了解进度。

一旦提交完成 - 一个事件将触发，其处理程序将停止进度轮询。

我认为这种方法没有任何问题，但是由于某种原因，您的方法似乎都不符合我所描述的，所以我将其作为答案。

* * *

如果您使用 jQuery，最好的方法是使用[jQuery Form plugin](http://jquery.malsup.com/form/)来“ajaxify”您的表单。你可以参考这个问题的例子：[File upload progress bar with jQuery](https://stackoverflow.com/questions/15410265/file-upload-progress-bar-with-jquery)。

# php - 匹配正则表达式中的 html 标记内容

> ID：16200411
> 
> 赞同：0
> 
> 时间：2013-04-24T19:18:50.063
> 
> 标签：php, html, regex

我知道“不要对 html 使用正则表达式”，但说真的，加载整个 html 解析器并不总是一种选择。

所以，这是场景

```
<script...>
    some stuff
</script>

<script...>
    var stuff = '<';
    anchortext
</script> 
```

如果你这样做：

```
<script[^>]*?>.*?anchor.*?</script> 
```

您将从第一个脚本标记捕获到第二个块中的 /script。有没有办法做一个。*？但是通过替换 . 使用匹配块，例如：

```
<script[^>]*?>(^</script>)*?anchor.*?</script> 
```

我查看了负前瞻等，但我无法让某些东西正常工作。通常我只使用 [^>]*? 为了避免跑过结束块，但在这个特定的例子中，脚本内容中有一个“<”，它在到达锚文本之前停止匹配。

为了简化，我需要类似 [^z]*? 但我需要一个捕获组来适应字符串，而不是单个字符或字符范围。

```
.*?(?!z) doesn't have the same effect as [^z]*? as I assumed it would. 
```

这是我被困在的地方：[http ://regexr.com?34llp](http://regexr.com?34llp)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T19:30:34.617

Match-anything-but 确实通常使用负前瞻来实现：

```
 ((?!exclude).)*? 
```

诀窍是不要`.`重复点。但要使其连续匹配任何字符，同时确保该字符不是排除词的开头。

在你的情况下，你会想要这个而不是最初的`.*?`

```
 <script[^>]*?>((?!</script>).)*?anchor.*?</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:46:13.037

像那样：

```
$pattern = '~<script[^>]*+>((?:[^<]+?|<++(?!/script>))*?\banchor(?:[^<]+?|<++(?!/script>))*+)</script>~'; 
```

但是 DOM 是更好的方法。

# io - DMA控制器和I/O处理器有什么区别

> ID：16200412
> 
> 赞同：6
> 
> 时间：2013-04-24T19:18:59.010
> 
> 标签：io, hardware, dma

给定起始内存地址和字数 DMA 控制器在 CPU 处理其他进程时传输数据。输入输出处理器也处理给定起始地址和字数的 I/O 进程。（如果我错了，请纠正我）

那么 IOP 和 DMA 控制器在功能上的区别是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-06-06T11:40:49.707

在内存特定的 I/O 操作的情况下（简单的示例指令，如 MIPS 处理器的 lw $r1,$r2,16），CPU 需要从内存中获取数据，以方便 I/O 操作。因此 CPU 必须暂停任何其他操作并监视内存 READ/WRITE 操作，直到它没有完成。换句话说**，只要在没有DMA的情况下进行读/写操作，CPU就会被完全占用**。如果处理器在这段时间内空闲，那么处理器可能已经执行了一些其他指令。

# 直接内存访问（DMA）：

DMA 提供了这种功能，可以以最少的 CPU 干预执行内存特定操作。当任何 I/O 设备需要内存访问时。它向 CPU 发送一个 DMA 请求（以中断的形式）。**CPU 通过向数据总线提供适当的授权信号来启动传输**。并将控制权传递给 DMA 控制器，后者控制其余的数据传输并将数据直接传输到 I/O 设备。在此期间，CPU 继续执行其他指令。一旦读/写操作完成（或发生任何异常），DMA 控制器将启动中断并通知处理器有关读/写操作的状态。

这样**，读/写操作也被执行，CPU 在此期间也执行一些其他指令。但是，DMA 的初始化仍然需要 CPU 干预。**因此，整体性能最大化。

# 输入输出处理器

您可以将 I/O 处理器视为 DMA 方法。 **通常用于大型计算机系统的 I/O 处理器是一种协处理器，除了传输数据外，它还能够执行指令。**顺便说一下，协处理器指令系统不同于中央处理器。

**CPU 可以通过初始化基本操作（如启用数据路径和设置参与操作的 I/O 设备）来执行 I/O 特定程序。**然后它将任务转移到 I/O 处理器，然后 I/O 处理器执行其余任务，并在完成后通知处理器。处理器同时执行其他重要指令。

I/O 处理器本质上是一个小型 DMA 专用处理器，可以执行有限的输入和输出指令，并且可以被多个外设共享。

**I/O 处理器解决了两个问题：**

*   输入和输出的工作由 CPU 承担。DMA虽然不需要CPU进行外设和内存之间的数据交换，但只是减轻了CPU的负担。因为在DMA中，输入输出的初始化还是由CPU来完成的。
*   大型计算机系统中高速设备的DMA接口共享问题。一个大型计算机系统的外围设备太多以至于它不得不共享有限的 DMA 接口（小型计算机系统如 PC 中的每个设备都分配了一个 DMA 高速接口）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-23T13:50:25.050

DMA 是一种硬件模块，能够在外围设备和内存（UART、SPI、DAC、ADC）或两个不同的内存地址之间传输数据，而不会消耗 CPU 处理时间。通常，配置 DMA 模块涉及设置内存目标地址和源地址，用户还可以配置选项，例如：缓冲区数据大小、自动地址递增和循环缓冲区。此外，这类模块在数据传输结束时会发出 IRQ 信号。

下面是微控制器 STM32F373 的 DMA 配置示例。该示例显示了 sigma-delta ADC 和内存缓冲区之间的 DMA 配置。

```
DMA_InitTypeDef  DMA_InitStructure;
RCC_AHBPeriphClockCmd(RCC_AHBPeriph_DMA2, ENABLE);
DMA_DeInit(DMA2_Channel3);

/* DISABLE the DMA SDADC1 channel */
DMA_Cmd(DMA2_Channel3, DISABLE);
/* DMA channel SDADC1 Configuration */
DMA_InitStructure.DMA_BufferSize = bufferSize;

DMA_InitStructure.DMA_PeripheralBaseAddr = (uint32_t)&SDADC1->JDATAR;
DMA_InitStructure.DMA_PeripheralInc = DMA_PeripheralInc_Disable;
DMA_InitStructure.DMA_PeripheralDataSize = DMA_PeripheralDataSize_HalfWord;

DMA_InitStructure.DMA_MemoryBaseAddr = (uint32_t)memoryAddress;
DMA_InitStructure.DMA_MemoryInc = DMA_MemoryInc;
DMA_InitStructure.DMA_MemoryDataSize =  DMA_MemoryDataSize_HalfWord;

DMA_InitStructure.DMA_DIR = DMA_DIR_PeripheralSRC;
DMA_InitStructure.DMA_Priority = DMA_Priority_High;
DMA_InitStructure.DMA_Mode = DMA_Mode_Circular;
DMA_InitStructure.DMA_M2M = DMA_M2M_Disable;

DMA_Init(DMA2_Channel3, &DMA_InitStructure);

/* Avoid interrupt on DMA ENABLE */
DMA_ClearITPendingBit(DMA2_FLAG_TC3);

// Enable DMA2 Channel Transfer Complete interrupt
DMA_ITConfig(DMA2_Channel3, DMA_IT_TC, ENABLE);

/* Enable the DMA channel */
DMA_Cmd(DMA2_Channel3, ENABLE); 
```

关于 I/O 处理器，我完全不明白你的意思。但是我可以说GPIO硬件模块能够将通用的数字输入/输出映射到一个内存地址，即：I/OI/o有一个内存地址，但读写操作实际上是在外设寄存器中完成的。

# jsf - 是否可以为复合组件定义默认 ID？

> ID：16200414
> 
> 赞同：2
> 
> 时间：2013-04-24T19:19:02.860
> 
> 标签：jsf, jsf-2, composite-component

可以为使用创建的复合组件定义默认 ID `<ui:component>`？

即使我在 中设置了 ID `<ui:component>`，当组件在页面中呈现时，它也不会使用定义的 ID，并且从它继承的子代具有自动生成的 ID，而不是定义的 ID。

```
<ui:component 
    id="companySearch"
    xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:cc="http://java.sun.com/jsf/composite"
    xmlns:h="http://java.sun.com/jsf/html" 
    xmlns:p="http://primefaces.org/ui" 
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core">

    <cc:interface>
    </cc:interface>

    <cc:implementation>     
    ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T19:24:47.697

您需要在`id`组件标签声明的属性中指定它。

```
<my:compositeComponent id="companySearch" ... /> 
```

复合组件即[`NamingContainer`](http://docs.oracle.com/javaee/6/api/javax/faces/component/NamingContainer.html)允许它可以在同一个视图中多次使用，而具有固定 ID 的子组件不会导致“重复组件 ID”错误。`NamingContainer`组件将其 ID 附加到孩子的 ID。

# c - 在C中的文本文件中查找字符串

> ID：16200420
> 
> 赞同：1
> 
> 时间：2013-04-24T19:19:20.403
> 
> 标签：c, string, file

我正在尝试使用 C 在文本文件中搜索始终位于特定位置的字符串。具体来说，我正在寻找三个连续的破折号。当它找到三个破折号时，它应该返回找到它的行。然后它应该继续到下一行并继续搜索三个连续的破折号，直到它到达文件的末尾。每次都是应该打印行号。

这是我到目前为止所拥有的：

```
int main() {
FILE *f;
char inName[80];
printf("Read text from: ");
scanf(" %79[^\n]s\n", inName);

f  = fopen(inName, "r");
if (f == 0) printf("ERROR: Cannot open file %s for reading.\n", inName);
int lineNumber = 0;

for(;;) {       
    char line[127]; 
    fgets(line, 127, f);
    if (!feof(f)) { 
        lineNumber++;
    } else {
        break;
    }

    double lf;  
    int d, d1;
    char s[30];
    char s1[4];

    sscanf(line, " %d, %s, %s, %s, %s, %d, %d, %lf",
                   &d, &s, &s, &s, &s, &d, &s1, &lf);
    if (s1 == "---") {
        printf("%d\n", lineNumber); // what line 
    }
}
fclose(f);

return(0);
} 
```

此代码运行但不打印任何内容。谁能展示如何完成这项工作？谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T19:21:15.963

```
if (s1 == "---") 
```

您以错误的方式比较字符串，您应该使用`strcmp()`

按照这个例子 [http://faq.cprogramming.com/cgi-bin/smartfaq.cgi?answer=1057537653&id=1043284385](http://faq.cprogramming.com/cgi-bin/smartfaq.cgi?answer=1057537653&id=1043284385)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T19:21:16.793

这不是如何在 C 中比较字符串：

```
if (s1 == "---") 
```

就像将 的地址`s1`与字符串文字的地址进行比较一样`"---"`。使用[`strcmp()`](http://en.cppreference.com/w/c/string/byte/strcmp)：

```
if (strcmp(s1, "---") == 0)
{ 
```

`sscanf()`在尝试使用变量之前，请始终检查返回值以确保变量实际上已被赋值。使用格式说明符处理时，`,`逗号字符不被视为分隔符`"%s"`，仅使用空格作为分隔符。为了防止消耗`,`使用扫描集，类似于您在程序前面所做的（注意对`sscanf()`参数的更正）：

```
if (sscanf(line,
           " %d, %29[^,], %29[^,], %29[^,], %29[^,], %d, %3[^,], %lf",
             &d, s,       s,       s,       s,       &d, s1,     &lf) == 8)
{
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T19:21:40.417

你无法与`char[]`比较`==`。请改用[strcmp](http://www.cplusplus.com/reference/cstring/strcmp/)。

```
if( strcmp(s1, "---") == 0 ) 
```

# sql - 循环查询（Oracle 10 XE 和 11 XE）

> ID：16200426
> 
> 赞同：0
> 
> 时间：2013-04-24T19:19:41.923
> 
> 标签：sql, oracle, hierarchical, hierarchical-query

有路线图（连接城市列表）：

```
drop table aaa; 
create table aaa(a varchar2(10),  b varchar2(10));
insert into aaa values ('Rome','Berlin');
insert into aaa values ('London','Rome');
insert into aaa values ('London','New-York');
insert into aaa values ('New-York','Dallas'); 
```

**我需要找到路径：柏林=>罗马=>纽约=>达拉斯**

变体 1：

```
select sys_connect_by_path(DECODE(a, PRIOR a, b, a),'=>') PATH1
from aaa
start with a = 'Berlin' or b = 'Berlin'
connect by nocycle  Prior a = b or prior b = a 
```

返回：=>罗马=>伦敦

变体 2：

```
select sys_connect_by_path(DECODE(a, PRIOR a, b, a),'=>') PATH1
from aaa
start with a = 'Berlin' or b = 'Berlin'
connect by Prior a = b or prior b = a 
```

返回：ERROR ORA-01436 CONNECT BY 用户数据循环

任何建议，如何通过**分层查询**获得预期结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:26:41.863

```
select 
  sys_connect_by_path(b,'=>') PATH1
from 
(
  select 
    least(a, b) a, 
    greatest(a, b) b
  from aaa
)
start with a = 0 
connect by prior b = a 
```

* * *

**更新：**

```
select 
  sys_connect_by_path(b, '=>') PATH1
from 
  (
    select a, b from aaa
    union all
    select b, a from aaa
    union all
    select null, 'Berlin' from dual
  )
start with a is null
connect by nocycle prior b = a 
```

# javascript - 通过 jquery 限制字符

> ID：16200428
> 
> 赞同：0
> 
> 时间：2013-04-24T19:19:51.147
> 
> 标签：javascript, jquery

我有一个显示一堆文本的 div，但我只想显示 75 个字符，其余文本被替换为 ...

```
<div class="text-info">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation</div>

$('text-info').replaceWith(this).length(75 + "..."); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T19:26:28.030

```
var text = $(".text-info").text();
var len = text.length;

if(len > 75){
  $(".text-info").text($(".text-info").text().substr(0,74)+'...  ');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:39:58.280

从字面上理解您的问题，如果您只想显示 75 个字符，那么您可以简单地按照@MohammadAdil 的建议进行操作。但是，您最终会得到 79 个字符（74 + 3 (...) + 两个空格。只需通过拉出 72 个字符并附加`"..."`. 来限制它。当然，如果您实际上需要限制为 75 个可见字符，或者如果您只是指帖子的 75 个字符，然后添加省略号。

我个人的建议是把它留给一个可以为你做的图书馆（或者如果可以的话，使用一个）。[Underscore](http://underscorejs.org/)是一个相当小的库，其中包含大量方便的实用程序，它可以确定您是否可以内置与它们的实现（例如`_.each`使用`Array#forEach`是否已定义）。话虽这么说，[underscore.string](https://github.com/epeli/underscore.string)是下划线的一个插件，它包含许多有用的字符串操作函数，比如`_.toSentence`它会接受和数组一样`["one", "two", "three"]`并返回`"one, two and three"`，但更重要的是你得到`truncate`and `prune`。

`truncate`并且`prune`仅在字符串处于其限制时才执行截断，例如，根据他们的示例：

```
// Assume the underscore.string functions have bene mixed into _
_.truncate("Hello, World", 5) // "Hello..."
_.truncate("Hello", 10) // "Hello" 
```

该`truncate`函数将剪切文本中间句子，这`prune`是一个更干净的替代方案，因为它在最接近指定长度的分词处剪切文本。根据他们的例子：

```
_.prune("Hello, cruel world", 15) // "Hello, cruel..."
// for comparison
_.truncate("Hello, cruel world", 15) // "Hello, cruel wo..." 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T19:31:12.477

你可以试试这个

```
$(".text-info").text(function(){
    return $(this).text().length > 75 ? $(this).text().substr(0, 75)+'...' : $(this).text();
}); 
```

[**演示。**](http://jsfiddle.net/heera/MgNJu)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T19:22:20.437

像这样的东西会起作用：

```
(".text-info").text($(this).text().substr(0, 75)+'...'); 
```

另外，不要忘记选择器中的类标识符。`.`

# arrays - 使用 Perl 进行检查并将 VALUE 放入数组中

> ID：16200430
> 
> 赞同：0
> 
> 时间：2013-04-24T19:19:53.470
> 
> 标签：arrays, perl, checkbox, cgi

我是 Perl 的新手，并试图检查是否选中了 HTML 页面上的一系列复选框。每个复选框都有一个不同的数值，我想添加到 Perl 中的数组中。我不断得到一个 undef 值。我已经梳理了网络，原因是这不起作用，最后崩溃寻求帮助。现在我只想显示在我的日志中检索到的值。当复选框被选中时，我希望在我的结果中看到 (1, 2)。任何人都可以看到下面的代码有什么问题，或者就我为什么得到一个“未定义”数组提供建议吗？有没有办法从 Perl 测试与相关复选框的连接？

HTML：

```
<input type="checkbox" name="Shipping" id="checkFXG" value="1" enabled />
<input type="checkbox" name="Shipping" id="checkFX2" value="2" enabled /> 
```

珀尔：

```
use CGI;
...

sub updateShipping;
    my $p;
    my $self = shift;
    my $cgi;

    my $sIDquery = CGI->new;
    my $param = $sIDquery->Vars;
    my @sID = $param->{'Shipping'};          # Grab VALUE from checkbox
    my $sID;

    foreach $sID(@sID) {                     # Loop through array displaying each Shipping ID
        warn "**** sID : [$sID]";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:44:49.640

要获取具有相同名称的多个参数，请不要使用 Vars 方法，请执行以下操作：

```
my @values = $sIDquery->param('Shipping'); 
```

很少有你想使用 Vars 的情况。对于可能不存在的参数（例如复选框）或可能具有多个值的参数，特别不可能执行您想要的操作。

# requirejs - Grunt 和 Stylus 或 RequireJS 子任务

> ID：16200432
> 
> 赞同：0
> 
> 时间：2013-04-24T19:19:55.880
> 
> 标签：requirejs, gruntjs, stylus

在我看来，我错过了一些东西。是否有可能在 Grunt 中为 Stylus 或 RequireJS 制作子任务？我的意思是这样的：

```
grunt.initConfig({
    stylus: {
      dev: {
        compile: {...}
      },
      prod: {
        compile: {...}
      }
    }
}); 
```

对我来说它不起作用。但是，当我写：

```
...
  stylus: {
    compile: {...}
  }
... 
```

它工作正常，创建文件等等......那我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T04:12:29.583

Grunt 任务以以下格式运行：

```
taskname: {
    subtaskname: {
        // options
    }
} 
```

所以为了让它工作，你不需要把`compile`对象放在你的`dev`和`prod`子任务中。

```
stylus: {
    dev: {
        // options
    },

    prod: {
        // options
    }
} 
```

此致。

# matlab - 如何在 Simulink 模型中使用通过总线编辑器创建的总线？

> ID：16200434
> 
> 赞同：0
> 
> 时间：2013-04-24T19:19:59.897
> 
> 标签：matlab, simulink

我正在阅读这篇文章： http: [//www.mathworks.nl/help/simulink/ug/using-the-bus-editor.html](http://www.mathworks.nl/help/simulink/ug/using-the-bus-editor.html)

我发现了如何将创建的总线导出到 .mat 文件或 .m 文件。但是，我想在现有 Simulink 模型中使用通过总线编辑器创建的总线。例如，使用总线编辑器创建这个总线会非常好：

[http://www.mathworks.nl/help/simulink/ug/bus_editor_nested_objects.png](http://www.mathworks.nl/help/simulink/ug/bus_editor_nested_objects.png)

并以某种方式使用它来创建这个 simulink 模型： http: [//www.mathworks.nl/help/simulink/ug/bus_editor_nested_model.png](http://www.mathworks.nl/help/simulink/ug/bus_editor_nested_model.png)

它们的含义基本相同，但没有（清楚地）解释如何将创建的总线传输到 simulink 模型。

如果您知道（另一种）使用总线的方法，在 simulink 模型中使用总线编辑器创建，这可能也会对我有所帮助。我喜欢使用总线编辑器创建的总线，但我在我的 simulink 模型中需要它而不是创建 matlab 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:27:00.923

第 1 步：在 Base Workspace 中创建总线对象。您的图像 ( [http://www.mathworks.nl/help/simulink/ug/bus_editor_nested_objects.png](http://www.mathworks.nl/help/simulink/ug/bus_editor_nested_objects.png) ) 表明您已完成此操作。

第 2 步：告诉总线创建器块，它们的输出数据类型应该是适当总线类型的对象。为此，打开总线创建者的对话框（通过双击它），然后在底部附近有一个下拉选择框，应该显示基础工作区中的所有总线对象 - 选择适当的。对您的主总线创建器块和控制总线创建器块执行此操作。

# string - 将字符串中的每个单词添加到列表中？

> ID：16200439
> 
> 赞同：-2
> 
> 时间：2013-04-24T19:20:15.880
> 
> 标签：string, list, python-3.x

给定字符串

```
string1='apple purple orange brown' 
```

我将如何把它变成一个列表

```
list1=['apple','purple','orange','brown'] 
```

我以为我能做到

```
string1='apple purple orange brown'
list1=[]
for item in string1:
     list1.append(item) 
```

但这给了我字符串中每个字符的列表，而不仅仅是单词。有没有办法将字符串按空格分开，然后将其添加到列表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:21:45.753

在 String 上使用 split() 方法。它为您提供了一个列表：

```
>>> "Foo bar".split()
['Foo', 'bar'] 
```

如果您想拆分除空格以外的其他内容，只需将其传递给拆分：

```
>>> "Pipe|separated|values".split("|")
['Pipe', 'separated', 'values'] 
```

[Split 知道更多技巧，例如限制 splits 的数量](http://docs.python.org/2/library/stdtypes.html#str.split)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:23:31.113

```
string1='apple purple orange brown'
list1=[]
list1.extend(string1.split(' ')) 
```

树叶

```
list1 == ['apple', 'purple', 'orange', 'brown'] 
```

该表达式`string1.split(' ')`本身是一个仅由空格分隔的子字符串的列表，但`extend`如果您可能在该列表中有其他内容，您可以使用该列表将结果添加到现有列表中。

* * *

如果您需要处理人类语言句子，而不仅仅是单词之间的单个空格，那么您可能需要研究正确的文本分割，如[https://stackoverflow.com/a/7188852/20394所述](https://stackoverflow.com/a/7188852/20394)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T19:27:32.723

```
string1='apple purple orange brown'
list1=string1.split() 
```

您的清单在 list1 中

编辑： split 函数返回一个列表

# c# - 下拉列表 VS。在 HTML.Beginform 上提交/搜索

> ID：16200441
> 
> 赞同：0
> 
> 时间：2013-04-24T19:20:27.233
> 
> 标签：c#, razor, asp.net-mvc-4, intranet

摘要：我正在构建一个应用程序功能来报告丢失的数据。缺少记录的不同名称填充我的下拉列表。但是，当我开始按该特定名称（或任何名称）搜索完整报告时，出现此错误以及应用程序崩溃：

错误：用户代码未处理 NullReferenceException。
你调用的对象是空的。

我的视图（错误所在的位置）：

看法：

```
@using (Html.BeginForm("Index", "Home", "POST"))
{
    <div class="searchField">
       <input type="text" class="search-query" name="heatSearch" placeholder="Search">
        <button class="btn btn-success" type="submit">Search</button>
    </div>
    <br />
   <select>
    @foreach (var item in (ViewData["MissingChem"] as IEnumerable<string>))
    {
        <option> @item </option>
    }

   </select>
} 
```

控制器：

```
public ActionResult Index()
        {
            Session["InitialLoad"] = "Yes";
            HomeModel H = new HomeModel();
            ViewData["MissingChem"] = H.MissingQueryResults();
            return View();
        } 
```

模型：

```
 public List<string> MissingQueryResults()
        {
            //HomeModel Tolerances = new HomeModel();
            List<String> nameList = new List<String>();

            SqlCommand missingQuery = new SqlCommand("SELECT heatname FROM dbo.chemistrytable WHERE heatname NOT IN (SELECT heatname FROM dbo.chemistrytable WHERE sampletype = 'AVE') AND analysistime between '01-01-2013' and Current_Timestamp AND heatname LIKE '[a,b,c,d]%' Order by heatname");// + heatName + "'");
            SqlCommand mainquery = new SqlCommand("SELECT analysisv

alue.analysisid, heatname, analysistime, sampletype, grade, productid, element, value FROM dbo.AnalysisValue INNER JOIN dbo.ChemistryAnalysis ON dbo.AnalysisValue.AnalysisID = dbo.ChemistryAnalysis.AnalysisID Where heatname = '" + "' Order By analysisvalue.analysisid Asc, element");

        using (SqlConnection conn = new SqlConnection(strSQLconnection))
        {
            missingQuery.CommandTimeout = 20000;//Dateadd(day, -1, Current_Timestamp)
            conn.Open();
            missingQuery.Connection = new SqlConnection(strSQLconnection);
            missingQuery.Connection.Open();

            using (var reader = missingQuery.ExecuteReader())
            {
                int fieldCount = reader.FieldCount;

                while (reader.Read())
                {
                    for (int i = 0; i < fieldCount; i++)
                    {
                        nameList.Add(reader[i].ToString().Trim());

                    }

                }
            }return nameList;
        }
    } 
```

任何和所有的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:25:08.693

首先，您的“主页”控制器中是否有一个名为“索引”的发布操作，它接收带有表单中字段的模型？

我会使用 DropDownListFor 方法，而不是 ViewData 方法，而不是按照你的方式。因此，在您的控制器中，`SelectList`使用您从中获得的字符串列表创建一个`MissingQueryResults()`.

注：代码未经测试，直接写在这里。

**模型** 创建一个包含您需要传递的所有数据和发布到控制器操作的视图模型：

```
public class VMHome {
 public SelectList MissingQueryResults {get; set;} // to build the dropdownList
 public string heatSearch {get; set;}
 public string MissingItem {get; set;}  //for posting selected value

} 
```

**控制器**

```
public ActionResult Index()
{
            Session["InitialLoad"] = "Yes";
            VMHome h = new VMHome();
            h.heatSearch = "";
            h.MissingQueryResults = new SelectList(H.MissingQueryResults())
            return View(h);
} 
[HttpPost]
public ActionResult Index(VMHome model)
{
            //do something with your posted data
            // may be adding search result to the viewmodel
            return View(model);
} 
```

**在您看来：**

```
@model VMHome
@using (Html.BeginForm("Index", "Home", "POST"))
{
    <div class="searchField">
       @Html.TextBoxFor(x => x.heatSearch, new {placeholder = "Search", class = "search-query"} )
        <button class="btn btn-success" type="submit">Search</button>
    </div>
    <br />
    @Html.DropDownListFor(x => x.MissingItem, Model.MissingQueryResults)
} 
```

# c# - 用于在具有列表列表作为值的字典中搜索对象的 Linq 查询

> ID：16200443
> 
> 赞同：-1
> 
> 时间：2013-04-24T19:20:29.820
> 
> 标签：c#, linq

我正在搜索带有日期时间类型键和值作为对象列表的排序字典。我需要找到字典中每个对象的最新值（基于对象的属性）。我的对象有 3 个属性：名称、值和创建日期。我的字典按最新日期降序排列。

我已经以某种方式完成了这项工作，但我确信使用 LINQ 有一个捷径。请注意，我使用的是**.NET 3.5**。能否请你帮忙？请不要被下面的大量代码推迟，因为为了清楚起见，我添加了它，我只是在寻找一个 linq 查询来查询列表对象列表。

下面的代码：

```
public void Should_link_recent_data_together()
{
    var data = TimeSeriesDataFactoryEx.GetData();

    var allAttributes = new List<string>()
    {
        TimeSeriesConstants.TOTAL_COST_CODE,
        TimeSeriesConstants.TOTAL_VALUE_CODE,
        TimeSeriesConstants.SOURCE_CODE
    };

    var latestList = new List<TimeSeries>();

    var allValues = data.Values.ToList();

    #region HOW DO I DO THIS USING LINQ?

    bool found = false;

    foreach (var attribute in allAttributes)
    {
        found = false;
        foreach (var tsData in allValues)
        {
            foreach (var ts in tsData)
            {
                if (ts.MetricName == attribute && !string.IsNullOrEmpty(ts.MetricValue))
                {
                    latestList.Add(ts);
                    found = true;
                    break;
                }
            }
            if (found)
                break;
        }
    }

    #endregion

    Assert.IsTrue(latestList.Count == 3);
    Assert.IsTrue(latestList.Where(x => x.MetricName == TimeSeriesConstants.TOTAL_COST_CODE).First().MetricValue == "1");
    Assert.IsTrue(latestList.Where(x => x.MetricName == TimeSeriesConstants.TOTAL_VALUE_CODE).First().MetricValue == "2");
    Assert.IsTrue(latestList.Where(x => x.MetricName == TimeSeriesConstants.SOURCE_CODE).First().MetricValue == "gp");
    Assert.IsTrue(latestList.Where(x => x.MetricName == TimeSeriesConstants.SOURCE_CODE).First().Quarter == DateTime.Today.AddMonths(-3));

}

internal class TimeSeriesDataFactoryEx
{
    public static SortedDictionary<DateTime?,List<TimeSeries>> GetData()
    {
        return new SortedDictionary<DateTime?, List<TimeSeries>>(new DateComparer())
        {
            {
                DateTime.Today, new List<TimeSeries>()
                {
                    new TimeSeries()
                    {
                        Quarter = DateTime.Today,
                        MetricValue = "1",
                        MetricName = TimeSeriesConstants.TOTAL_COST_CODE
                    },
                    new TimeSeries()
                    {
                        Quarter = DateTime.Today,
                        MetricValue = "2",
                        MetricName = TimeSeriesConstants.TOTAL_VALUE_CODE
                    },
                    new TimeSeries()
                    {
                        Quarter = DateTime.Today,
                        MetricValue = "",
                        MetricName = TimeSeriesConstants.SOURCE_CODE
                    }
                }
            },
            {
                DateTime.Today.AddMonths(-3), new List<TimeSeries>()
                {
                    new TimeSeries()
                    {
                        Quarter = DateTime.Today.AddMonths(-3),
                        MetricValue = "3",
                        MetricName = TimeSeriesConstants.TOTAL_COST_CODE
                    },
                    new TimeSeries()
                    {
                        Quarter = DateTime.Today.AddMonths(-3),
                        MetricValue = "4",
                        MetricName = TimeSeriesConstants.TOTAL_VALUE_CODE
                    },
                    new TimeSeries()
                    {
                        Quarter = DateTime.Today.AddMonths(-3),
                        MetricValue = "gp",
                        MetricName =TimeSeriesConstants.SOURCE_CODE
                    }
                }
                }

        };
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:25:31.107

所以，假设我理解你的问题是正确的，假设你有一本这样的字典：

```
{ Key = "1/1/1900", Value = List Of Objects, of which each has a DateTimeProperty }
...
{ Key = "1/4/1900", Value = List Of Objects, of which each has a DateTimeProperty } 
```

你正在寻找从你的字典中找到一组对象，它是每个键的最新时间，然后你可以用 linq 很简单地做到这一点：

```
var latestItems = data.SelectMany(kvp => 
    kvp.Value.OrderByDescending(value => value.Quarter).Take(1)
); 
```

此查询在每个存储桶中查找最新的对象，然后将其作为单个集合（不是可枚举的枚举）返回。`SelectMany`只要您`IEnumerable`从该回调中返回一个，您就可以根据需要更改其中的选择器以在每个集合中查找元素。

# redirect - NGINX GeoIP 和在服务器级别检测移动设备

> ID：16200448
> 
> 赞同：0
> 
> 时间：2013-04-24T19:20:47.447
> 
> 标签：redirect, mobile, nginx, geoip

我想要做的是设置 NGINX 来检测特定的国家代码。我现在可以正常工作，添加诸如 这是在我的实际站点配置文件中而不是我的 nginx.conf 文件中的行。`if ($geoip_country_code = IE) { rewrite ^(.*) [http://link.com/for/Ireland](http://link.com/for/Ireland);`

我还想做的是为此添加移动检查，例如如果它是爱尔兰和移动，它将转到第二个链接。这甚至可以在这个级别上做到吗？还是我只是在服务器级别检测国家/地区然后必须以更标准的方式处理移动设备，例如在页面加载和使用移动设备检测脚本时。我知道我可以这样做，但我希望能够将检测添加到我的 NGINX 配置中的相同捕获中。

感谢所有的帮助和信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T22:13:10.840

看看[http://detectmobilebrowsers.com](http://detectmobilebrowsers.com)。它有 nginx 的代码片段。最近我做了这样的nginx配置，工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:30:20.480

由于移动用户代理的惊人差异，使用代码重定向比使用 nginx 配置要好得多。特别是，在 nginx 上调用一系列`if`语句的成本是不小的。

[这个网站](http://www.zytrax.com/tech/web/mobile_ids.html)有一个非详尽的移动用户代理列表，旧的和不太旧的。至少可以说，您很快就会发现该列表实际上非常庞大。现在让我们只关注 iPhone、iPod 和 iPad。它们很容易区分：

> Mozilla/5.0（**设备类型**；**cpu 类型**；CPU 像 Mac OS X；en）AppleWebKit/420+（KHTML，像 Gecko）版本/3.0 Mobile/1A543a Safari/419.3

所以，这个不会造成问题。但是，该字符串与其他东西非常相似，包括 Safari 的桌面用户代理……这适用于最简单的手机。Android 没有这种简单性。以 HTC Desire 为例：

> Mozilla/5.0 (Linux; U; Android 2.1-update1; de-de; HTC Desire 1.19.161.5 Build/ERE27) AppleWebKit/530.17 (KHTML, like Gecko) Version/4.0 Mobile Safari/530.17

操作系统的标识符更改为第三个字段，这意味着您现在需要至少两个正则表达式引擎调用来匹配 iPhone 和一些 android。我说一些，因为......好吧，让我们看看摩托罗拉机器人：

> MOT-V9mm/00.62 UP.Browser/6.2.3.4.c.1.123 (GUI) MMP/2.0

……哇？

结论：如果您关心误报，您将需要一个用户代理数据库。如果不这样做，只需在用户代理上使用正则表达式对 nginx 进行广泛检查，搜索关键字 iPad、iPhone、iPod、Android、Windows Phone。这将标记大约 80-85% 的所有移动用户。如果你想匹配*每个人*，你需要使用用户代理数据库，因为制造商会重写他们的用户代理。

# google-app-engine - Plupload 无法将大文件上传到 AppEngine Blobstore

> ID：16200454
> 
> 赞同：1
> 
> 时间：2013-04-24T19:21:09.337
> 
> 标签：google-app-engine, blobstore, plupload

我正在编写一个应用程序，它使用 AppEngine 的 Blobstore API 来存储用户上传的文件。在客户端，我使用 Plupload。它适用于最大约 1.5 GB 的文件，但大约 3 GB 左右，上传请求神秘地失败。开发工具的截图：

![对 Blobstore 的 POST 请求没有响应状态； 甚至没有发送](https://i.stack.imgur.com/v7Eys.png)

如您所见，请求甚至在发送之前就完全失败了。我注意到的一些事情：

1.  上传显示了一些进度，通常是 1，一些中间数字，然后几乎立即显示 100（对于这么大的文件显然不可能）
2.  “FileUploaded”Plupload 事件触发

顺便说一句，我构建了一个[精简的应用程序](http://pluploadflash.appspot.com/)，它只有一个带有 Plupload 的页面并用它来上传文件，它似乎适用于 > 3 GB 的文件。关于如何调试此问题的任何想法？

**更新**

我尝试逐步完成上传。当“UploadProgress”事件触发时，Plupload 包含的 XHR 对象出现了一个奇怪的错误：

`Error: InvalidStateError: DOM Exception 11`

附上一系列截图显示：

***上传进度回调中的断点*** ![上传进度回调中的断点](https://i.stack.imgur.com/nD0no.png)

***XHR 对象有错误状态*** ![XHR 对象有错误状态](https://i.stack.imgur.com/32hjD.png)

***XHR 状态文本*** ![XHR 状态文本](https://i.stack.imgur.com/TWAS5.png)

# asp-classic - ASP send.mail 错误 - 无法连接到服务器（网络解决方案）

> ID：16200459
> 
> 赞同：0
> 
> 时间：2013-04-24T19:21:25.713
> 
> 标签：asp-classic

在线订单已停止工作。单击“提交”后，会收到以下错误：

```
CDO.Message.1 error '80040213'

The transport failed to connect to the server.

/send_form1.asp, line 108 
```

以下是 ASP 文件中的代码：

```
'======== Start Replacing Data ========
'(1)Create email Object.    
set mailConfiguration = server.createObject("CDO.Configuration")
set mail=server.createObject("CDO.Message")

mailConfiguration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2
mailConfiguration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") = "mail.mydomain.com"
mailConfiguration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpconnectiontimeout") = 10
mailConfiguration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25
mailConfiguration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = 1
mailConfiguration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendusername") = "order@mydomain.com"
mailConfiguration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendpassword") = "mypassword" 
mailConfiguration.Fields.Update()
mail.Configuration = mailConfiguration

with mail.Fields
    .Item("urn:schemas:mailheader:content-type")  = "text/html; charset=utf-8"
    .Update
end with

'(2)Get Ready & Send
mail.subject="Account Information"
mail.from="order@mydomain.com"

mail.to="order@mydomain.com"
mail.HTMLBody=tempString
'response.write tempString
'response.end
mail.send

set mailConfiguration=nothing
set mail=nothing
'======== Finish Replacing Data ======= 
```

有问题的第 108 行是“mail.send”命令。该网站托管在 Network Solutions，如果这告诉任何人任何事情的话。谢谢。

李

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T01:25:30.533

我知道 mail.from 和 mail.to 参数喜欢看到这种语法：

```
mail.to = "Joe Johnson <joe@shmo.com>" 
```

不确定它是否是强制性的。

如果这不起作用，也许查看我为我的 CMS 使用设置的电子邮件功能会有所帮助：

```
<!-- #INCLUDE FILE = "i_fn_dirty.asp" -->
<%
function email(s_from,s_reply_to,s_recipients,s_bcc,s_subject,s_msg,s_type,s_msg_error_add,s_remote_host)

    if (s_msg_error_add<>"") then s_msg_error_add = "<hr>" & vbCrLf & s_msg_error_add
    if (s_remote_host="default") then s_remote_host = application("s_mail_server")
    if (s_remote_host="") then s_remote_host = "localhost"
    s_remote_host=lcase(s_remote_host)

    s_from = replace(s_from,","," ",1,-1,1)
    s_from = replace(s_from,"  "," ",1,-1,1)
    s_from = replace(s_from,"[","<",1,-1,1)
    s_from = replace(s_from,"]",">",1,-1,1)

    if (s_reply_to<>"") then
        s_reply_to = replace(s_reply_to,","," ",1,-1,1)
        s_reply_to = replace(s_reply_to,"  "," ",1,-1,1)
        s_reply_to = replace(s_reply_to,"[","<",1,-1,1)
        s_reply_to = replace(s_reply_to,"]",">",1,-1,1)
    end if

    s_recipients = replace(s_recipients,",",";",1,-1,1)
    s_recipients = replace(s_recipients,"  "," ",1,-1,1)
    s_recipients = replace(s_recipients,"[","<",1,-1,1)
    s_recipients = replace(s_recipients,"]",">",1,-1,1)

    if (s_bcc<>"") then 
        s_bcc = replace(s_bcc,","," ",1,-1,1)
        s_bcc = replace(s_bcc,"  "," ",1,-1,1)
        s_bcc = replace(s_bcc,"[","<",1,-1,1)
        s_bcc = replace(s_bcc,"]",">",1,-1,1)
    end if

    err.clear

    Dim MailerConfig
    Dim Mailer
    Dim strRet
    dim sch

    strRet = ""
    sch = "http://schemas.microsoft.com/cdo/configuration/"

    Set MailerConfig = CreateObject("CDO.Configuration")
    Set Mailer = CreateObject("CDO.Message")

    With MailerConfig.Fields
        '.Item(sch & "sendusing") = 2 'send using port - if err then this is really "SendUsingMethod"
        '.Item(sch & "sendusingmethod") = 2 'send using port - if err then this is really "SendUsingMethod"
        .Item(sch & "smtpconnectiontimeout") = 900
        '.Item(sch & "smtpauthenticate") = 1 'use basic (clear-text) authentication
        .Item(sch & "smtpserver") = s_remote_host
        '.Item(sch & "smtpserverport") = 25
        '.Item(sch & "sendusername") = SMAUTHUSER
        '.Item(sch & "sendpassword") = SMAUTHPASS
        .Update
    End With
    Mailer.Configuration = MailerConfig

    'Mailer.Fields(cdoImportance) = 1
    'Mailer.Fields("urn:schemas:mailheader:X-MSMail-Priority") = 1
    'Mailer.Fields("urn:schemas:mailheader:X-Mailer") = ""
    'Mailer.Fields.Update

    '-- Set the Mail Properties

    'on error resume next

    Mailer.From = s_from
    Mailer.To = s_recipients
    if (s_reply_to<>"" and s_reply_to<>"na") then Mailer.ReplyTo = s_reply_to

    b_redirect=false

    if (err.number<>0 and err.number<>13) then
        session("msg") = "Error in i_fn_email_cdo.asp line 72, Error: " & err.number & "<br>" & err.description
        if (b_redirect) then response.redirect ("error_report.asp?send_mail=yes")
    end if

    if (s_bcc<>"" AND s_bcc<>"na" AND s_bcc<>"n/a") then Mailer.BCC = s_bcc

    if (err.number<>0 and err.number<>13) then
        session("msg") = "Error in i_fn_email_cdo.asp line 79, Error: " & err.number & "<br>" & err.description
        if (b_redirect) then response.redirect ("error_report.asp?send_mail=yes")
    end if

    Mailer.Subject = s_subject

    if (err.number<>0 and err.number<>13) then
        session("msg") = "Error in i_fn_email_cdo.asp line 86, Error: " & err.number & "<br>" & err.description
        if (b_redirect) then response.redirect ("error_report.asp?send_mail=yes")
    end if

    if (s_type="html") then
        Mailer.AutoGenerateTextBody = True
        s_msg = replace(s_msg,vbCrLf,"<br>",1,-1,1)
    else
        Mailer.AutoGenerateTextBody = False         
    end if

    if (err.number<>0 and err.number<>13) then
        session("msg") = "Error in i_fn_email_cdo.asp line 103, Error: " & err.number & "<br>" & err.description
        if (b_redirect) then response.redirect ("error_report.asp?send_mail=yes")
    end if

    Mailer.MimeFormatted = False

    if (err.number<>0 and err.number<>13) then
        session("msg") = "Error in i_fn_email_cdo.asp line 110, Error: " & err.number & "<br>" & err.description
        if (b_redirect) then response.redirect ("error_report.asp?send_mail=yes")
    end if

    if (s_type = "text") then
        Mailer.TextBody = fn_dirty(s_msg)
    else
        's_msg_html = replace(s_msg,vbCrLf,"<br>",1,-1,1)
        s_msg_html = s_msg
        Mailer.HTMLBody = fn_dirty(s_msg_html)
    end if

    if (err.number<>0 and err.number<>13) then
        session("msg") = "Error in i_fn_email_cdo.asp line 123, Error: " & err.number & "<br>" & err.description
        if (b_redirect) then response.redirect ("error_report.asp?send_mail=yes")
    end if

    '-- Fire off the email message

    Mailer.Send

    if (err.number<>0 and err.number<>13) then
        Select Case err.Number
            Case -2147220973
                strRet = " Failure to Send Report Message - Server Not Found" & vbCrLf & " Error: " & err.Number & " - " &  err.Description
            Case -2147220975
                strRet = " Failure to Send Report Message - Server Authentication Failed" & vbCrLf & " Error: " & err.Number & " - " & err.Description
            Case Else
                strRet = " Failure to Send Report Message - Error: " & err.Number & " - " & err.Description
        End Select

        msg = "<br>Error in i_fn_email_cdo.asp: " & strRet & "<br><br>"

        msg = msg & "remote host = " & s_remote_host & "<br>"
        s_from = replace(s_from,"<","[",1,-1,1)
        s_from = replace(s_from,">","]",1,-1,1)
        s_reply_to = replace(s_reply_to,"<","]",1,-1,1)
        s_reply_to = replace(s_reply_to,">","[",1,-1,1)
        s_recipients = replace(s_recipients,"<","[",1,-1,1)
        s_recipients = replace(s_recipients,">","]",1,-1,1)
        s_bcc = replace(s_bcc,"<","[",1,-1,1)
        s_bcc = replace(s_bcc,">","]",1,-1,1)

        msg = msg & "from = " & s_from & "<br>"
        msg = msg & "to = " & s_recipients & "<br>"
        msg = msg & "subject = " & s_subject & "<br>"
        msg = msg & "recipients = " & s_recipients & "<br><br>"

        if (s_type = "text") then
            msg = msg & s_msg
        else
            msg = msg & s_msg_html
        end if
        msg = msg & "<br>"      
        msg = msg & s_msg_error_add
        session("msg") = msg
        Set Mailer = Nothing
        set MailerConfig = nothing

        if (b_redirect) then response.redirect ("error_report.asp?send_mail=yes")
    end if

    Set Mailer = Nothing
    set MailerConfig = nothing

    email = true

end function
%> 
```

# jquery - 传递带有参数的函数以悬停在jQuery中

> ID：16200460
> 
> 赞同：2
> 
> 时间：2013-04-24T19:21:26.677
> 
> 标签：jquery, html, svg, hover, jquery-animate

我是 jQuery 的新手，我觉得我错过了一些非常明显和基本的东西，但我不能完全理解它。

无论如何，我有一些代码可以在对象悬停时将笔画宽度设置为更宽的量并且它可以工作：

```
$(function() {
    $("#wheel1").hover(grow1, shrink1);
});

function grow1(evt) {
    $("#wheel1").animate({'stroke-width':'100'},300);
    $("#circle1container").css({'display':'block'});
    $("#circle1container").animate({'opacity':'1'},300);
}

function shrink1(evt) {
    $("#wheel1").animate({'stroke-width':'55'},300);
    $("#circle1container").animate({'opacity':'0'},300);
} 
```

但是我还有 10 个其他对象也想这样做，所以我没有再复制和粘贴 9 次并更改数字 9 次，而是尝试合并它，但这没有用：

```
$(function() {
$("#wheel1").hover(grow("1"), shrink("1"));
$("#wheel2").hover(grow("2"), shrink("2"));
$("#wheel3").hover(grow("3"), shrink("3"));
$("#wheel4").hover(grow("4"), shrink("4"));
$("#wheel5").hover(grow("5"), shrink("5"));
$("#wheel6").hover(grow("6"), shrink("6"));
$("#wheel7").hover(grow("7"), shrink("7"));
$("#wheel8").hover(grow("8"), shrink("8"));
$("#wheel9").hover(grow("9"), shrink("9"));
$("#wheel10").hover(grow("10"), shrink("10"));

function grow(number) {
var name = "#wheel" + number;
$("#wheel" + number).animate({'stroke-width':'100'},300);
$("#circle" + number + "container").css({'display':'block'});
$("#circle" + number + "container").animate({'opacity':'1'},300);
}

function shrink(number) {
$("#wheel" + number).animate({'stroke-width':'55'},300);
$("#circle" + number + "container").animate({'opacity':'0'},300);
}

}); 
```

可能仍然不是最有效的方法，但我认为它的冗长和更容易改变。我只是不确定这里的交易是什么。欢迎任何帮助，谢谢！

[http://jsfiddle.net/F4Yjj/5/](http://jsfiddle.net/F4Yjj/5/)这显示了我试图在悬停时设置动画的对象，悬停适用于绿色形状（此消息中的第一段代码）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:26:01.607

不要使用必须唯一的 ID 来选择轮子，而是给每个轮子一个“轮子”类，以便您可以一次选择所有轮子：

```
<path id="wheel10" class="wheel" .... />
<path id="wheel9" class="wheel" ... />
etc. 
```

然后，您可以使用 jQuery 选择所有“轮子”并引用`$(this)`在您的函数中使用的悬停的轮子：

```
$(function() {
    $("path.wheel").hover(grow1, shrink1);
});

function grow1() {
    $(this).animate({'stroke-width':'100'},300);
}

function shrink1() {
    $(this).animate({'stroke-width':'55'},300);
} 
```

小提琴：http: [//jsfiddle.net/F4Yjj/1/](http://jsfiddle.net/F4Yjj/1/)

编辑：使用此方法，您的函数中不需要“evt”。 [http://jsfiddle.net/F4Yjj/3/](http://jsfiddle.net/F4Yjj/3/)

编辑：还要显示另一个元素。假设每个轮子都有不同的物理元素（如更新的 HTML 中所示），您可以确定悬停轮子的 ID 并通过其 ID 选择另一个元素：

```
function grow1() {
    var id=$(this).prop('id').split('_');
    $(this).animate({'stroke-width':'100'},300);
    $("#circlecontainer_"+id[1]).fadeIn(300);
}

function shrink1() {
    var id=$(this).prop('id').split('_');
    $(this).animate({'stroke-width':'55'},300);
    $("#circlecontainer_"+id[1]).fadeOut(100);
} 
```

这个小提琴有wheel1和wheel2的圆圈：http: [//jsfiddle.net/F4Yjj/7/](http://jsfiddle.net/F4Yjj/7/)

您也可以通过为所有车轮使用一个中心圆来浓缩这一点。悬停时，使用适当的百分比、颜色等更新圆圈的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:32:15.473

通过使用类选择器使用类而不是 ID，您的悬停将应用于所有适用的类。作为旁注，我不会使用悬停，因为我相信它在 jquery 1.9.1 或 2 中已被弃用，而是您可以只使用 mousein 和 mouseout。

就像是：

```
$(document).ready(function(){
  $('body').on('mousein','.wheel',function(){
    $(this).animate({'stroke-width':'100'},300);
  });

  $('body').on('mouseout','.wheel',function(){
    $(this).animate({'stroke-width':'55'},300);
  });
}); 
```

然后只需确保所有带有 id 的轮子都有一个额外的 .wheel 类

# kendo-ui - Kendo UI：绑定练习

> ID：16200470
> 
> 赞同：0
> 
> 时间：2013-04-24T19:21:50.607
> 
> 标签：kendo-ui

我不确定哪种方法最适合我的方案，所以我先解释一下。

我有两个数据源。Persons and Groups，每个 Person-Item 都有一个指示符，表示它属于哪个组。人员绑定到剑道网格，组绑定到<ul>。我的问题是，我想在组之外显示一个计数，这表明该组中有多少人 - 此信息是根据人员数据源计算的，而不是组本身的一部分。

很抱歉这个一般性问题 - 但我真的在努力解决这个问题......

更新：这是我现在拥有的：

```
var contactGroupsDataSource = new kendo.data.DataSource({
  transport: {
    read: {
      url: "api/contactgroups"
    }
  }
});

$('#contactGroupsList').kendoListView({
    dataSource: contactGroupsDataSource,
    template: "<li class='contactGroupListItem' data-number='${Number}'>${Number} ${Name} (<span data-bind="text: cgcount[1]"></span>) </li>"
});

viewModel = kendo.observable({
        contactsDataSource: new kendo.data.DataSource({
            transport: {
                read: {
                    url: "api/contacts"
                }
            },
            schema: {
                model: {
                    id: "Id",
                    fields: {
                        id: { type: "string" },
                        FirstName: { type: "string" },
                        LastName: { type: "string" },
                        ContactGroupNumber: { type: "integer" }
                    }
                }
            },
            change: function (e) {
                var data = this.data();

                for (var i = 0; i < data.length; i++) {
                    var cg = data[i]["ContactGroupNumber"];
                    viewModel.cgcount.splice([cg - 1], 1, viewModel.cgcount[cg - 1] + 1);
                }

                for (var i = 0; i < 7; i++) {
                    console.log(i + 1 + ': ' + viewModel.cgcount[i]);
                }
            }
        }),
        cgcount: new kendo.data.ObservableArray([0, 0, 0, 0, 0, 0, 0])
    });

    kendo.bind($("#contactsGroupContainer"), viewModel);

    contactsListView = $('#contactsList').kendoGrid({
        dataSource: viewModel.contactsDataSource,
        sortable: true,
        rowTemplate: kendo.template($("#rowTemplate").html())
    }); 
```

丹尼尔

# binding - 如何将多个输入的值传递给绑定函数？

> ID：16200472
> 
> 赞同：0
> 
> 时间：2013-04-24T19:22:11.093
> 
> 标签：binding, knockout.js

如果我有：

```
 ...
    <li>Title: <input id="name" /></li>
    <li>Author: <input id="author" /></li>
  ... 
```

`<button data-bind='click: $root.Add'>Add</button>`

我想将用户输入传递给`Add`绑定到按钮的函数（），我将如何实现呢？

我不知道如何提取值然后将它们作为参数传递。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:54:34.650

您可以绑定您的方法调用以使用视图模型（$root）作为您的方法的“this”上下文。然后像往常一样访问属性：

[http://jsfiddle.net/psteele/Wf9xj/](http://jsfiddle.net/psteele/Wf9xj/)

```
<div>Title: <input id="name" data-bind="value: name" /></div>
<div>Author: <input id="author" data-bind="value: author" />
    <input type="button" value="X" data-bind="click: show.bind($root)"></input></div>

var vm = {
    name: 'Bob',
    author: 'King',
    show: function() {
        alert(this.name + '-' + this.author);
    }
}

ko.applyBindings(vm); 
```

# java - Selenium IEServerDriver 找不到 IE9 的新窗口

> ID：16200473
> 
> 赞同：4
> 
> 时间：2013-04-24T19:22:11.257
> 
> 标签：java, internet-explorer, selenium, internet-explorer-9, webdriver

我正在使用 Selenium WebDriver 来自动化我的公司网站。在某一时刻，Web 应用程序通过以下方式打开一个新窗口：

```
<a onclick="WindowController.openWindow('quote.action?quoteProcessName=Shortform',WindowController.WINDOW_IS_TRACKED);" tabindex="1">Express Quote</a> 
```

我们正在使用 jQuery，尽管我认为这是自定义的。我在测试团队，不做任何网站的开发。无论如何，它使用 JavaScript 打开一个新窗口。脚本单击此链接后，我需要将其附加到新窗口。

问题是 WebDriver 在 IE9 中运行时似乎没有找到新窗口。这是我用来尝试切换到新窗口的代码：

```
public boolean switchTo(final WebRobot robot, final String pageTitle) {
    boolean found = false;

    int count = 0;
    while (!found && count < 20) {
        final Set<String> handles = robot.getDriver().getWindowHandles();
        final Iterator<String> itr = handles.iterator();
        while (itr.hasNext()) {
            try {
                final String current = itr.next();
                robot.getDriver().switchTo().window(current);
                if (robot.getDriver().getTitle().contains(pageTitle)) {
                    robot.getLogger().debug("Switching to " + pageTitle);
                    found = true;
                }
            } catch (final NoSuchWindowException e) {
                count++;
                try {
                    Thread.sleep(2000);
                    System.out.println("Handles: " + robot.getDriver().getWindowHandles().size());
                } catch (final InterruptedException ignored) {
                    //Nothing to do here
                }
            }
        }
    }
    return found;
} 
```

（WebRobot 是我编写的一个类，它允许我使用 WebDriver 轻松切换浏览器和执行模式。robot.getDriver() 返回 Selenium WebDriver 对象。）

新窗口打开后，robot.getDriver().getWindowHandles().size() 始终为 1。我是否缺少某些东西来拾取新窗口？

此代码在 Firefox、Chrome 和 IE8 中完美运行，但不适用于 IE9。我正在使用 IEDriverServer 的 64 位版本，版本 2.32.3.0。我正在使用 Selenium WebDriver 2.32，并且在 Windows 7 64 位上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T10:11:53.467

[http://grokbase.com/t/gg/webdriver/128hgbmcw0/getwindowhandles-return-only-1-window-in-ie](http://grokbase.com/t/gg/webdriver/128hgbmcw0/getwindowhandles-return-only-1-window-in-ie)

newSet.removeAll(oldSet); newWindow = newSet.toArray()[0];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-10T19:33:58.030

打开兼容模式解决了这个问题。

# linux - 基于 Web 浏览器的 Xpra 客户端？

> ID：16200478
> 
> 赞同：2
> 
> 时间：2013-04-24T19:22:32.657
> 
> 标签：linux, xserver

Xpra 一直是我在 Web 上流式传输 X 应用程序的绝佳工具。我正在为我当前的项目寻找基于 Web 的 Xpra 客户端。是否已经存在？实现一个将其嵌入网络浏览器有多难？请任何指点...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T08:25:45.990

[此处记录](http://xpra.org/trac/wiki/Clients/HTML5)的 html5 客户端和服务器现在包含在所有官方 xpra 版本中。请注意，某些下游发行版不包含它，或者破坏了包装。

# sublimetext2 - 为什么 Zen-Coding 插件没有出现在 SublimeText 2 Package Control 中？

> ID：16200480
> 
> 赞同：1
> 
> 时间：2013-04-24T19:22:36.797
> 
> 标签：sublimetext2

我使用的是windows 7，这是截图 ![在此处输入图像描述](https://i.stack.imgur.com/tMfxh.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:24:09.303

[现在是埃米特](https://github.com/sergeche/zen-coding/blob/master/README.md)

[链接到新网站](http://emmet.io/)

![在此处输入图像描述](https://i.stack.imgur.com/jN5l5.png)

# java - 设置字体时出现 Jasper JRFontNotFoundException

> ID：16200486
> 
> 赞同：0
> 
> 时间：2013-04-24T19:23:08.860
> 
> 标签：java, jasper-reports

我有一个用于创建 pdf 报告的可执行 jar。为了避免字体出现问题，我为报告中的所有文本设置了一个特定的字体名称（DejaVu Sans），并按照许多人所说的那样导出了字体（例如，在这个[答案](https://stackoverflow.com/questions/8985497/use-custom-fonts-when-creating-pdf-using-ireport)中）。

我将导出的 jar (myFonts.jar) 包含在可执行 jar 中，但是当我尝试执行我的 jar 时，它返回错误：

```
net.sf.jasperreports.engine.util.JRFontNotFoundException:  
                                 Font 'DejaVu Sans' is not available to the JVM. 
```

我还尝试使用 jasperreports-fonts.jar （默认的）而不是我的，但它也不起作用。

我已经查看了很多帖子、答案和论坛，但我已经被困了一段时间了。:S

有谁知道可能出了什么问题？

# facebook - FB OpenGraph og：图像仅显示 6 个图像中的 3 个作为缩略图选项

> ID：16200490
> 
> 赞同：1
> 
> 时间：2013-04-24T19:23:28.377
> 
> 标签：facebook, facebook-opengraph

我的 Wordpress 网站的 header.php 文件中有 6 个 og:image 标签，但 Facebook 在我的网站上单击“赞”或“分享”按钮时只提取 3 个图像。几周前这工作正常，我什么也没做，现在 6 张图像中只有 3 张显示为缩略图选项。

[https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.rockitpro.com](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.rockitpro.com)

当所有图像的大小超过 200x200 像素时，这会产生一个错误，即其中一个图像不够大。我在想这可能是 Facebook 的一个错误？有任何想法吗？

# gwt - GwtChosen 不能很好地与 GWT LayoutPanel 和 RootLayoutPanel 配合使用

> ID：16200492
> 
> 赞同：3
> 
> 时间：2013-04-24T19:23:32.817
> 
> 标签：gwt, gwtquery, layoutpanels

我正在使用 GwtChosen 1.1.0 和 GwtQuery 1.3.3。它似乎只适用于 RootPanel 小部件而不是 RootLayoutPanel 小部件。

无法与 RootLayoutPanel 一起使用是否是 GwtChosen 的已知限制？

下面的示例代码和屏幕截图。注意 RootLayoutPanel 示例在堆栈中隐藏了 GWTchosen 小部件的下拉菜单，因此使其无法使用。

```
public void onModuleLoad() {
    if ( !ChosenListBox.isSupported() )
    {
        $( "#browserWarning" ).show();
    }

    ChosenListBox chosen = new ChosenListBox( true );
    // init default place holder text
    chosen.setPlaceholderText( "Choose your favourite chart..." );
    chosen.setWidth( "300px" );
    chosen.setMaxSelectedOptions( 4 );
    chosen.addChosenChangeHandler( new ChosenChangeHandler()
    {
        public void onChange( ChosenChangeEvent event )
        {
        }
    } );
    chosen.addGroup( "Simple" );
    chosen.addItemToGroup( "line" );
    chosen.addItemToGroup( "bar" );
    chosen.addItemToGroup( "pie" );
    chosen.addItemToGroup( "area" );

    //StackPanel stackpanel = new StackPanel();
    //stackpanel.add(chosen, "Choose");
    //stackpanel.add(wrapper, "Charts");
    //stackpanel.setHeight("150px");
    //RootPanel.get().add(stackpanel);

    StackLayoutPanel stackLayoutPanel = new StackLayoutPanel( Unit.EM );
    stackLayoutPanel.add( chosen, "Choose", 2 );
    stackLayoutPanel.setHeight( "150px" );
    RootLayoutPanel.get().add( stackLayoutPanel );
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/V2p5D.png) ![在此处输入图像描述](https://i.stack.imgur.com/O5VTC.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T19:58:04.637

从未使用过 GwtChosen 但它绝对看起来像一个[已知问题](https://github.com/jDramaix/gwtchosen/issues/5)，尽管相对于`DockLayoutPanel`而不是`RootLayoutPanel`。还有一个附加的解决方法，可能有用。

# jquery - 无法使用 casperjs 找到现有元素

> ID：16200493
> 
> 赞同：3
> 
> 时间：2013-04-24T19:23:34.583
> 
> 标签：jquery, phantomjs, functional-testing, casperjs

我正在使用 casperjs 作为我的应用程序的测试工具。我在这里面临一个奇怪的问题。

```
casper.then(function () {
    this.click('a[href="/ui/thunder/"]')

})
casper.then(function () {

    this.test.assertUrlMatch(/ui\/thunder\/$/, 'Redirected to cloud page');
console.log(this.getHTML());
}); 
```

在编写这段代码时，我被重定向到 ui/thunder 页面，并在控制台记录 this.getHTML()，它向我显示了页面的完整 html，但仍然缺少一些信息。

在页面加载时，它会执行几个 REST api 调用，并且数据会加载到屏幕上，但 casperjs 不会显示来自服务器的数据。

例如：当页面加载时，它会调用我在`<div class="user"></div>`标签中显示的 REST 服务 /auth/users。

所以在我看到的浏览器中，它是这样填充的

```
<div class = "user">
<div class "userName">User1</div>
<div class "userName">User2</div>
</div> 
```

但是当我在casperjs中为this.getHTML（）做一个console.log时，我得到`<div class="user"></div>`（没有任何用户的空标签）

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T15:43:40.843

您可能需要等待 url 实际加载到浏览器中：

```
casper.then(function () {
    this.click('a[href="/ui/thunder/"]')
});

casper.waitFor(function() {
    return /ui\/thunder\/$/.test(this.getCurrentUrl());
}, function () {
    console.log(this.getHTML());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T23:38:16.687

Casperjs 的 webkit 无法呈现我的页面，因为存在一个小的 javascript 绑定错误，firefox/chrome/IE 从未捕获到该错误。我下载了 Konqueror，发现它也无法呈现页面，在解决绑定问题后，我的生活变得更轻松了 casperjs！

# android - 将图像从相机保存到 imageView 时质量损失

> ID：16200494
> 
> 赞同：0
> 
> 时间：2013-04-24T19:23:39.287
> 
> 标签：android, bitmap, camera, imageview, png

我正在尝试创建一个应用程序，用户可以在其中使用相机拍照并将其保存到指定文件夹。但是，当它从 imageView 转换为 PNG 文件时，质量会显着下降。

我认为使用这段代码可以确保质量保持高水平

```
bmap.compress(Bitmap.CompressFormat.PNG, 100, output); 
```

但即使我将质量从 100 更改为更低的数字，我也看不出有任何区别。

```
if (requestCode == cameraData && resultCode == RESULT_OK
            && null != data) {
        Bitmap photo = (Bitmap) data.getExtras().get("data");

        ImageView imageView = (ImageView) findViewById(R.id.imgView);
        imageView.setImageBitmap(photo);

        // convert imageview to bitm
        imageView.buildDrawingCache();
        final Bitmap bmap = imageView.getDrawingCache();

        addIt.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                OutputStream output;

                // Find the SD Card path
                File filepath = Environment.getExternalStorageDirectory();

                // Create a new folder AndroidBegin in SD Card
                File dir = new File(filepath.getAbsolutePath()
                        + "/filepath1/");
                dir.mkdirs();

                // Create a name for the saved image
                File file = new File(dir, "image.png");

                // Notify the user on successful save
                Toast.makeText(Images.this, "Image Saved to SD Card",
                        Toast.LENGTH_SHORT).show();
                try {

                    // Image starts saving
                    output = new FileOutputStream(file);

                    // Compress into png format image from 0% - 100%, using
                    // 100% for this tutorial
                    bmap.compress(Bitmap.CompressFormat.PNG, 100, output);

                    output.flush();
                    output.close();

                    Intent myIntent = new Intent(Images.this,
                            MyPreferencesActivity.class);
                    startActivity(myIntent);
                }

                // Catch exceptions
                catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:05:18.867

称呼

```
Bitmap photo = (Bitmap) data.getExtras().get("data"); 
```

仅返回图像的缩略图。按照本教程从相机保存图像：http: [//developer.android.com/training/camera/photobasics.html](http://developer.android.com/training/camera/photobasics.html)

# java - InputStream 从本地机器到 tomcat 部署的 webapp

> ID：16200496
> 
> 赞同：1
> 
> 时间：2013-04-24T19:23:42.723
> 
> 标签：java, web-applications, web, inputstream

我有一种情况，我想从本地机器（假设文件目录是 C:\Users\temp\file.txt）到具有 Windows Server 2008 的远程服务器创建一个 inputStream。

我怎样才能让网络应用程序使用文件的本地版本，因为我在编译成 WAR 文件之前尝试过这个。

```
File f = new File("C:\Users\temp\file.txt"); 
```

当我尝试使用 InputStream 时，它崩溃了。我相信它引用了服务器的 C:\Users\temp\file.txt，它不存在。

我知道这是一个“愚蠢”的问题，但任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:41:17.000

如果您尝试从另一台机器访问存储在一台机器上的文件，则必须以某种方式“共享”该文件。有几种相当简单的方法可以做到这一点：

1.  *设置网络文件系统。*一个流行的选择是[Samba](http://www.samba.org/)或[作为驱动器安装的 S3 存储桶](https://stackoverflow.com/questions/10801158/how-stable-is-s3fs-to-mount-an-amazon-s3-bucket-as-a-local-directory)。这样做的好处是，为了读取文件，所有文件都显示为“本地”，因此您可以使用`FileInputStream`普通文件。
2.  *使用 HTTP 共享。*在包含文件的主机上设置一个 HTTP 服务器（如[Apache](http://httpd.apache.org/)），将文件复制到 Web 共享目录，并使用一个[`URL`](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html)或一个 HTTP 客户端（如[Apache HTTPComponents Client](http://hc.apache.org/httpcomponents-client-ga/index.html)）通过其 URL 访问文件。（您也可以将此方法用于 FTP 或其他服务。）

共享文件一开始有点麻烦，但是一旦您设置了共享文件系统或 Web 服务器，共享大量文件就轻而易举了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T19:38:13.673

在这种情况下，使用每个主机属性文件会有所帮助。通常，您希望将环境之间的所有差异包含到您的属性文件中。

查看[PropertyPlaceholderConfigurer](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/config/PropertyPlaceholderConfigurer.html)以处理切换属性文件。

您将扩展它以处理 {ENV} 占位符并从类似于此的 Spring 执行它

```
<bean id="propertyConfigurer" class="com.yourcompany.PerHostPropertiesConfigurer">
    <property name="filename" value="appname-{ENV}.ini" />
</bean> 
```

在 appname-LOCAL.ini 中有这个

```
text.filename=C:\Users\temp\file.txt 
```

并在 appname-PROD.ini 中将其更改为已安装的驱动器或不同的本地路径，从您的服务器的角度来看可以访问这样的

```
text.filename=Z:\Users\temp\file.txt 
```

# javascript - 异步文件读取中的 EMFILE 错误

> ID：16200497
> 
> 赞同：2
> 
> 时间：2013-04-24T19:23:42.910
> 
> 标签：javascript, node.js

今天，当我尝试在 NodeJs 中实现一个使用异步/同步 I/O 方法的示例时，我遇到了一个奇怪的问题。当我尝试使用 发送请求时`ab`，我在 Async 方法中收到此错误：

```
{ [Error: EMFILE, open 'sample.txt'] errno: 20, code: 'EMFILE', path: 'sample.txt' } 
```

但同步模式下的相同功能运行良好，没有任何错误。

这是我`ab`运行测试的命令：

```
ab -n 10000 -c 1000 -vhr http://localhost:8080/ 
```

这是我的两个代码：

**异步**：

```
http.createServer(function (req, res) {
  fs.readFile('sample.txt', function (err, data) {
    if(err) {
      res.writeHead(500, {'Content-Type': 'text/plain'});
      res.end();
      console.log(err);
    } else {
      res.writeHead(200, {'Content-Type': 'text/plain'});
      res.end(data);
    }
  });
}).listen(8080, '127.0.0.1'); 
```

**同步**：

```
http.createServer(function (req, res) {
  var fileOutput = fs.readFileSync('sample.txt').toString();
  if(!fileOutput) {
      res.writeHead(500, {'Content-Type': 'text/plain'});
      res.end('Error in reading the file.');
  } else {
    res.writeHead(200, {'Content-Type': 'text/plain'});
        res.end(fileOutput);
  }
}).listen(8081, '127.0.0.1'); 
```

怎么了？使用异步方法有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T19:57:20.160

在两者中，您都执行以下操作：

1 - 打开文件。2 - 读取文件。3 - 关闭文件。4 - 发送响应。

但是，在同步时，您总是执行以下操作： (1-2-3) 在一个语句中。它们是原子的。您可能会在发送之前打开许多文件，但始终打开和关闭它。但是，在异步中，它们不是原子的，它们中的任何一个都可以在给定的时间进行处理。因此，在异步中，更有可能接收请求、打开文件，但在读取和发送它们之前，您实际上打开了更多文件。很快，在同步中，您打开-读取-关闭-发送数据，在异步中您打开-打开-打开-打开-读取-打开-打开-关闭-打开-发送-打开（这些事件顺序取决于到达时间数据和磁盘读取速度）。

# java - 在 Hibernate Spring 中添加 TransactionManager

> ID：16200500
> 
> 赞同：0
> 
> 时间：2013-04-24T19:23:52.520
> 
> 标签：java, spring, hibernate, transactionmanager

添加事务管理器时出错。怎么了？:/ 很少有可能的答案是缺少一些休眠库。但是，似乎所有这些都确实存在。如何克服这一点？另外我想在我的数据库中添加一些测试数据。在哪个类中插入它更好？谢谢你。

**错误：**

```
 org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception 
parsing XML document from ServletContext resource [/WEB-INF/dispatcher-servlet.xml]; nested
 exception is java.lang.NoClassDefFoundError: org/aopalliance/intercept/MethodInterceptor 
```

**Dispatcher-Servlet：**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/aop 
       http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
       http://www.springframework.org/schema/tx 
       http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context-3.0.xsd
       http://www.springframework.org/schema/mvc
       http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <context:annotation-config />
    <context:component-scan base-package="miniVLE.controller" />
    <context:component-scan base-package="miniVLE.service" />
    <context:component-scan base-package="miniVLE.beans" />
    <context:component-scan base-package="miniVLE.dao" />

    <tx:annotation-driven transaction-manager="hibernateTransactionManager"/>

    <!-- Declare a view resolver-->
    <bean id="viewResolver"
          class="org.springframework.web.servlet.view.InternalResourceViewResolver"
          p:prefix="/WEB-INF/jsp/"
          p:suffix=".jsp" />

    <!-- Connects to the database based on the jdbc properties information-->
    <bean id="dataSource" class ="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name ="driverClassName" value="com.mysql.jdbc.Driver"/>
        <property name ="url" value="jdbc:derby://localhost:1527/minivledb"/>
        <property name ="username" value="root"/>
        <property name ="password" value="123" />
    </bean>

     <!-- Declares hibernate object -->
    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect"> ${hibernate.dialect}</prop>
                <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
            </props>
        </property>
        <!-- A list of all the annotated bean files, which are mapped with database tables-->
        <property name="annotatedClasses">
            <list>
                <value> miniVLE.beans.Course </value>
                <value> miniVLE.beans.Student </value>
                <value> miniVLE.beans.Department </value>  
                <value> miniVLE.beans.Module </value>  
                <value> miniVLE.beans.TimeSlot </value> 
            </list>
        </property>
    </bean>

    <!-- Declare a transaction manager-->
    <bean   id="hibernateTransactionManager"
            class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

</beans> 
```

**道：**

```
@Repository
public class MiniVLEDAOImplementation implements MiniVLEDAO{

    // Used for communicating with the database
    @Autowired
    private SessionFactory sessionFactory;

@Override
public void addStudentToDB(Student student) {         
    sessionFactory.getCurrentSession().saveOrUpdate(student);        
}.... 
```

**服务：**

```
@Service
@Transactional(propagation = Propagation.SUPPORTS, readOnly = true)
public class StudentService implements IStudentService{

    @Autowired
    MiniVLEDAOImplementation dao;    

    public StudentService() {
         System.out.println("*** StudentService instantiated");
    }

    @Override
    public Student getStudent(String urn){
        Student s = dao.getStudentFromDB(urn);
        return s;
    }

    @Override
    @Transactional(propagation = Propagation.REQUIRED, readOnly = false)
    public void addStudent(Student student) {
        dao.addStudentToDB(student);
    }... 
```

**控制器：**

```
@Controller
public class miniVLEController {

    @Autowired
    StudentService studentService; 
```

添加 aopalliance-1.0.jar 后出现下一个 **错误：**

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'miniVLEController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: miniVLE.service.StudentService miniVLE.controller.miniVLEController.studentService; nested exception is java.lang.IllegalArgumentException: Can not set miniVLE.service.StudentService field miniVLE.controller.miniVLEController.studentService to sun.proxy.$Proxy536 
```

解决方案之一是添加`<aop:aspectj-autoproxy proxy-target-class="true"/>`到 dispatcher-servlet 中。下一个**错误：**

```
 org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'miniVLEController' defined in file 
[C:\Users\1\Documents\NetBeansProjects\com3014_mini_VLE\build\web\WEB-
INF\classes\miniVLE\controller\miniVLEController.class]: BeanPostProcessor before 
instantiation of bean failed; nested exception is java.lang.NoClassDefFoundError: 
org/aspectj/lang/annotation/Aspect 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:36:47.437

您需要添加 aopalliance.jar 依赖项。如果你使用 Maven：

```
<dependency>
    <groupId>aopalliance</groupId>
    <artifactId>aopalliance</artifactId>
    <version>1.0</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T21:52:01.823

问题升级后：

需要找到`aspectjrt-1.x.x.jar`缺少的东西来克服最后一个错误，然后克服你需要得到的 org.aspectj.util.PartialOrder.PartialComparable 错误`aspectjtools-1.X.X.jar`

在这里我找到了我需要的所有额外库 [http://www.jarfinder.com/index.php/java/info/org.aspectj.lang.NoAspectBoundException](http://www.jarfinder.com/index.php/java/info/org.aspectj.lang.NoAspectBoundException)

# linux - 如何在 Apache 服务器上自动将 HTTP 重定向到 HTTPS？

> ID：16200501
> 
> 赞同：222
> 
> 时间：2013-04-24T19:23:52.597
> 
> 标签：linux, apache, .htaccess, webserver, httpd.conf

*使用 apache 的环境*Centos

尝试设置从 http 到 https 的自动重定向

```
From manage.mydomain.com --- To ---> https://manage.mydomain.com 
```

我尝试将以下内容添加到我的 httpd.conf 中，但没有成功

```
 RewriteEngine on
    ReWriteCond %{SERVER_PORT} !^443$
    RewriteRule ^/(.*) https://%{HTTP_HOST}/$1 [NC,R,L] 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：263
> 
> 时间：2013-04-24T20:35:13.423

我实际上已经遵循了这个例子，它对我有用:)

```
NameVirtualHost *:80
<VirtualHost *:80>
   ServerName mysite.example.com
   Redirect permanent / https://mysite.example.com/
</VirtualHost>

<VirtualHost _default_:443>
   ServerName mysite.example.com
  DocumentRoot /usr/local/apache2/htdocs
  SSLEngine On
 # etc...
</VirtualHost> 
```

然后做：

`/etc/init.d/httpd restart`

* * *

## 回答 #2

> 赞同：174
> 
> 时间：2013-04-24T19:27:03.737

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} 
```

[http://www.sslshopper.com/apache-redirect-http-to-https.html](http://www.sslshopper.com/apache-redirect-http-to-https.html)

或者

[http://www.cyberciti.biz/tips/howto-apache-force-https-secure-connections.html](http://www.cyberciti.biz/tips/howto-apache-force-https-secure-connections.html)

* * *

## 回答 #3

> 赞同：118
> 
> 时间：2014-11-03T15:49:41.237

搜索`apache redirect http to https`并降落在这里。这是我在 ubuntu 上所做的：

### 1) 启用模块

```
sudo a2enmod rewrite
sudo a2enmod ssl 
```

### 2）编辑您的站点配置

编辑文件

```
/etc/apache2/sites-available/000-default.conf 
```

内容应该是：

```
<VirtualHost *:80>
    RewriteEngine On
    RewriteCond %{HTTPS} off
    RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}
</VirtualHost>

<VirtualHost *:443>
    SSLEngine on
    SSLCertificateFile    <path to your crt file>
    SSLCertificateKeyFile   <path to your private key file>

    # Rest of your site config
    # ...
</VirtualHost> 
```

*   请注意，SSL 模块需要证书。您将需要指定现有的（如果您购买了）或自己[生成自签名证书](https://wiki.debian.org/Self-Signed_Certificate)。

### 3）重启apache2

```
sudo service apache2 restart 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-11-15T07:59:33.457

不推荐使用 mod_rewrite，而是使用虚拟主机和重定向。

如果您倾向于使用 mod_rewrite：

```
RewriteEngine On
# This will enable the Rewrite capabilities

RewriteCond %{HTTPS} !=on
# This checks to make sure the connection is not already HTTPS

RewriteRule ^/?(.*) https://%{SERVER_NAME}/$1 [R,L]
# This rule will redirect users from their original location, to the same 
location but using HTTPS.
# i.e.  http://www.example.com/foo/ to https://www.example.com/foo/
# The leading slash is made optional so that this will work either in
# httpd.conf or .htaccess context 
```

参考：[Httpd Wiki - RewriteHTTPToHTTPS](https://wiki.apache.org/httpd/RewriteHTTPToHTTPS "Httpd Wiki - 重写HTTPToHTTPS")

如果您正在寻找 301 永久重定向，则重定向标志应为，

```
 R=301 
```

所以 RewriteRule 会像，

```
RewriteRule ^/?(.*) https://%{SERVER_NAME}/$1 [R=301,L] 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-04-24T19:34:24.023

实际上，您的主题属于[https://serverfault.com/](https://serverfault.com/)但您仍然可以尝试检查这些*.htaccess*指令：

```
RewriteEngine on
RewriteCond %{HTTPS} off
RewriteRule ^(.*) https://%{HTTP_HOST}/$1 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-01-27T22:54:22.000

如果您有 Apache2.4 检查`000-default.conf`- 删除`DocumentRoot`并添加

```
Redirect permanent / https://[your-domain]/ 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2017-04-05T01:53:32.230

这段代码对我有用。

```
# ----------port 80----------
RewriteEngine on
# redirect http non-www to https www
RewriteCond %{HTTPS} off
RewriteCond %{SERVER_NAME} =example.com
RewriteRule ^ https://www.%{SERVER_NAME}%{REQUEST_URI} [END,QSA,R=permanent]

# redirect http www to https www
RewriteCond %{HTTPS} off
RewriteCond %{SERVER_NAME} =www.example.com
RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,QSA,R=permanent] 
```

```
# ----------port 443----------
RewriteEngine on
# redirect https non-www to https www
RewriteCond %{SERVER_NAME} !^www\.(.*)$ [NC]
RewriteRule ^ https://www.%{SERVER_NAME}%{REQUEST_URI} [END,QSA,R=permanent] 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-03-28T18:44:30.953

我需要这个来做一些简单的事情，比如将所有`http`流量从我服务器上的默认 apache 主页重定向到一个服务过的`https`.

由于在配置 apache 方面我仍然很*陌生*，因此我更愿意避免`mod_rewrite`直接使用，而是选择像这样更简单的东西：

```
<VirtualHost *:80>
  <Location "/">
     Redirect permanent "https://%{HTTP_HOST}%{REQUEST_URI}"
  </Location>
</VirtualHost>

<VirtualHost *:443>
  DocumentRoot "/var/www/html"
  SSLEngine on
  ...
</VirtualHost> 
```

我喜欢这个，因为它允许我使用 apache 变量，这样我就不必指定实际的主机名，因为它只是一个没有关联域名的 IP 地址。

参考资料： [https ://stackoverflow.com/a/40291044/2089675](https://stackoverflow.com/a/40291044/2089675)

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2018-11-01T15:14:27.030

**服务器版本：Apache/2.4.29 (Ubuntu)**

在网上和 apache 的官方文档中搜索了很长时间后，唯一对我有用的解决方案来自*/usr/share/doc/apache2/README.Debian.gz*

```
To enable SSL, type (as user root):

    a2ensite default-ssl
    a2enmod ssl 
```

在文件 /etc/apache2/sites-available/000-default.conf 添加

> 重定向“ [/”“https://sub.domain.com/](https://sub.domain.com/) ”

```
<VirtualHost *:80>

    #ServerName www.example.com
    DocumentRoot /var/www/owncloud
    Redirect "/" "https://sub.domain.com/" 
```

而已。

* * *

PS：如果你想看说明书不解压：

```
gunzip -cd /usr/share/doc/apache2/README.Debian.gz 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2019-01-03T07:39:37.150

请在 apache Virtualhosting 配置中尝试这个，然后重新加载 apache 服务

```
RewriteEngine On

RewriteCond %{HTTPS} off

RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-04-05T07:41:43.130

这对我有用：

```
RewriteCond %{HTTPS} =off
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [QSA,L,R=301] 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-11-05T20:52:45.843

对我来说这有效

```
RewriteEngine on
RewriteCond %{HTTP:X-Forwarded-Proto} !https
RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [R=301,L] 
```

# javascript - 表单重置按钮与 jquery 重置冲突

> ID：16200507
> 
> 赞同：1
> 
> 时间：2013-04-24T19:24:21.673
> 
> 标签：javascript, jquery, html, knockout.js, form-submit

我遇到了一些奇怪的事情。我有以下表格：

```
<form id="addExpenseForm" name="addExpenseForm" data-bind="submit: addExpense">
    <input type="submit" value="Add" class="save" id="submit" name="submit" />
    <input type="reset" value="Reset" class="reset" id="reset" name="reset" />
</form> 
```

如您所见，里面有一个`reset`按钮可以清除所有`form`.

* * *

我用这种方式`Knockout.js`绑定`submit`和`form`它`reset`...

```
self.addExpense = function (formElement) {
  $('#addExpenseForm')[0].reset();
}; 
```

一切似乎都很好，但我收到了这个错误：

```
Uncaught TypeError: Property 'reset' of object #<HTMLFormElement> is not a function 
```

而且我不知道为什么会得到这个，因为我的代码是正确的，奇怪的是代码在删除`reset`按钮时工作正常。

我该如何解决这个问题？`reset()`方法和`reset`按钮同时使用会不会有冲突？

只是要知道，我做了这个`jsfiddle`来测试删除`reset`按钮并验证我在这里问什么。

[http://jsfiddle.net/oscarj24/vWNf7/](http://jsfiddle.net/oscarj24/vWNf7/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T20:46:34.623

是的，这里有很大的不同。使用 jQuery 时，通过 jQuery 样式调用的 DOM 元素（exp. $("addExpenseForm")）被赋予“属性”。如何编写和添加这些属性取决于元素及其使用（以及其他东西，但这是另一课）。

可以这么说，当您从没有重置按钮的情况下创建时，“属性”重置确实是一个**功能**！查询时将返回以下值：`function reset() { [native code] }`.

但是，当您手动添加按钮时（也就是将其放置在 HTML 中），reset 将变为 THAT BUTTON 而不是功能。换句话说，它将返回类似`<input type="reset" value="Reset" class="reset" id="reset" name="reset" />`.

这是你的问题...

如果按钮是通过 HTML 添加的，则使用：

```
$('#addExpenseForm')[0].reset.click(); 
```

否则，按钮不是`type="reset"`，而只是一个说“重置”的按钮，或者根本没有按钮！利用：

```
$('#addExpenseForm')[0].reset(); 
```

# 或者

将其全部包含在一个大的 if 语句中！

```
if (typeof $('#addExpenseForm')[0].reset == "function") {
    $('#addExpenseForm')[0].reset();
}
else {
    $('#addExpenseForm')[0].reset.click();
} 
```

只是为了咧嘴笑和咯咯笑，这是一行中的 IF 语句：

```
typeof $("#addExpenseForm")[0].reset == "function" ? $("#addExpenseForm")[0].reset() : $("#addExpenseForm")[0].reset.click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T08:50:57.513

Try this

```
$('#resetBtn').on('click', function(e){
    e.preventDefault();
    $("#myform")[0].reset.click();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T20:44:54.950

将重置按钮 id 属性从“重置”更改为其他任何内容。

请参阅此处了解您收到错误的原因：[https ://stackoverflow.com/a/12541054/492325](https://stackoverflow.com/a/12541054/492325)

# ios - 使用 UI 警报视图按钮关闭模态视图控制器

> ID：16200508
> 
> 赞同：0
> 
> 时间：2013-04-24T19:24:25.767
> 
> 标签：ios, objective-c, xcode, uialertview

我对**Xcode**有点陌生。现在我正在创建一个`view controller`（显示模式），它显示一个表单供用户输入信息，然后单击“提交”提交信息。

我创建了我的`IBAction`，并实现了一个`UIAlerView`通知用户信息已发送的。我希望我的警报视图中的“确定”按钮将它们带回原始视图控制器。我`Alert View delegate`在我的 .m 文件中设置并实现了以下方法：

```
- (void)alertView:(UIAlertView *)alertView willDismissWithButtonIndex:(NSInteger)buttonIndex 
```

当我测试它时，什么也没有发生。谁能告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:28:31.883

你需要实现`- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex`委托方法---

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    //dissmiss here
    //Pre iOS 6.0
    [self dismissModalViewControllerAnimated:YES];

    //From iOS 5.0
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

您还可以检查点击的按钮，

```
if(buttonIndex != [alertView cancelButtonIndex]) {
    //do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-08T10:29:03.157

你需要实现下面提到的 UIAlertView 的委托方法：

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex
{
    NSString *buttonTitle = [alertView buttonTitleAtIndex:buttonIndex];
    if ([buttonTitle isEqual:@"Ok"]) // Check for Ok button
    {
        [self dismissViewControllerAnimated:YES completion:nil];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-13T17:39:43.643

**斯威夫特 5**

自 swift 3 以来，我一直离开 Xcode，并且需要在我的新项目中执行此操作。下面的代码对我有用（它显示一个警报，并在关闭警报后，用户被带回之前的视图控制器）：

```
func displayAlert() {
    let alert = UIAlertController(title: "Your Title",
                                  message: "Your Message",
                                  preferredStyle: .alert)
    let defaultButton = UIAlertAction(title: "OK",
                                      style: .default) {(_) in
                                        // your defaultButton action goes here
                                        self.dismiss(animated: true, completion: nil)
    }

    alert.addAction(defaultButton)
    present(alert, animated: true) {
        // completion goes here
    }
} 
```

# ios - 访问自定义 UIVIew 中的属性

> ID：16200509
> 
> 赞同：0
> 
> 时间：2013-04-24T19:24:31.867
> 
> 标签：ios, objective-c, uiview, uilabel

我用一堆标签创建了自定义 UIView。标签1，标签2，

```
UIView *testContentView = [[[UINib nibWithNibName:@"testContentView" bundle:nil] instantiateWithOwner:nil options:nil] objectAtIndex:0]; 
```

如何访问标签和设置文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:30:56.610

您需要在界面上定义它们。

```
@interface TestContentView : UIView

@property (weak, nonatomic) IBOutlet UILabel *label1;
@property (weak, nonatomic) IBOutlet UILabel *label2;

@end 
```

接着...

```
testContentView.label1.text = @"foo";
testContentView.label2.text = @"bar"; 
```

**编辑**

由于您使用的是 NIB，因此添加`IBOutlet`到属性中，您还需要在 Interface Builder 中连接这些属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:52:30.287

为了访问您的自定义属性，您需要将 UIView 转换为 TestContentView。

```
TestContentView *testContentView = (TestContentView *)[[[UINib nibWithNibName:@"testContentView" bundle:nil] instantiateWithOwner:nil options:nil] objectAtIndex:0]; 
```

# model-view-controller - 需要帮助理解 MVC

> ID：16200516
> 
> 赞同：2
> 
> 时间：2013-04-24T19:25:02.820
> 
> 标签：model-view-controller

据我了解，MVC 是一种实现表示层与业务层和数据层分离的方法。我是否正确理解这一点？如果是这样，MVC 应该将业务逻辑与表示完全分离，对吗？

所以在我看来，javascript（或 jquery）似乎在某种程度上违反了 MVC 设计，因为它接管了客户端的一些逻辑，不是吗？模型 = 数据层，控制器 = 业务层，视图 = 表示层？我想我误解了整个概念。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:28:43.650

您似乎对 MVC 有很好的理解。问题在于您将两种不同的潜在 MVC 结构视为一个且相同的结构。在服务器上，您可以拥有数据模型、控制器和视图。在客户端，您还可以拥有数据模型、控制器和视图。如果您想将客户端 JavaScript 视为 MVC，那么 jQuery 只是一个实用程序，视图控制器可以使用它来操作视图（DOM）。

简单地说，客户端并不总是只有视图。例如，如果您使用像 Backbone 这样的 Web 应用程序客户端框架，那么您可以在客户端拥有模型、视图和控制器，它们与服务器上的另一个单独的 MVC 结构进行通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:29:41.360

您所描述的确实对许多实现构成了挑战。诸如 ASP.NET MVC 框架之类的框架一直在尝试根据中间层的业务逻辑（主要是表单字段的验证规则）将 JavaScript 自动呈现到 UI。但它们距离真正引人入胜的不重复逻辑的 JavaScript 用户体验还有很长的路要走。

就个人而言，我喜欢将 JavaScript 视为纯粹的 UI 问题。应用程序在内部处理所有逻辑。作为 UI 的一部分，JavaScript 可能会复制其中的一些逻辑……但仅用于严格的 UI 目的。请记住，如果用户禁用了 JavaScript，应用程序应该优雅地退回到仍在工作的状态。也就是说，它仍然应该使用服务器端（中间层）代码来完成工作。JavaScript 所做的只是为 UI 层添加了更丰富的用户体验。

JavaScript 也不是唯一的罪魁祸首。假设您在中间层中有很多验证逻辑来​​定义对象的有效或无效。当您将这些对象保存到数据库（就像 UI 一样位于应用程序的外围）时，该数据库不也包含重复的验证逻辑吗？不可为空的字段等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-23T16:28:41.453

您可以访问[http://www.asp.net/mvc](http://www.asp.net/mvc)站点并参考教程/示例以了解使用 Microsoft 技术的 MVC。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T19:42:25.270

> [**恭喜！**你对MVC的理解是完全错误的。它与 n 层架构无关（您似乎对此感到困惑）。]

MVC 的核心思想是[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)。这是通过将应用程序分为两个主要层来使用的：

*   模型层：包含所有领域的业务逻辑和规则。
*   表示层：处理用户界面

然后演示进一步分为控制器（用于处理用户输入）和视图（用于处理响应）。

当应用于 Web 应用程序时，您要么仅在服务器端使用 MVC（或类似 MVC）结构，要么对于更大、更复杂的应用程序，前端和后端都有单独的 MVC 三元组。

此外，在使用应用程序时，**MVC 的用户不是人类，而是浏览器。**

在后一种情况下，后端就像前端应用程序的一个数据源。MVC 的整个前端部分都是用 javascript 编写的。

> [**PS**如果您能够阅读 PHP 代码，您可以在[此答案](https://stackoverflow.com/a/5864000/727208)中找到模型层的非常简单的解释。是的。它是“简单版本”，因为 MVC 是一种用于在大型应用程序中强制执行结构的模式，而不是用于制作留言簿。]

# flash - moodle：如何在 SCORM 模块中保存浮点分数结果而不是整数结果？

> ID：16200517
> 
> 赞同：0
> 
> 时间：2013-04-24T19:25:05.197
> 
> 标签：flash, moodle, scorm

在moodle（scorm模块）中给出多项选择后，浮点结果在数据库中保存为四舍五入的整数。例如 48.66666666% 保存为 49%。
我检查了 DB 列，**这是一个长文本**。如何将 48.66666666 之类的值保存为 48.66？
**更新：**
似乎测验闪存文件将考试结果作为四舍五入的整数发送。所以创建的scorm有问题。**请让我知道如何更改考试以发送未更改的结果。**
我使用**Wondershare Quiz Creator**来创建 scorm 考试。

# java - 尝试导航到上一个活动时意图崩溃

> ID：16200519
> 
> 赞同：0
> 
> 时间：2013-04-24T19:25:13.497
> 
> 标签：java, android, android-intent

基本上，我不知道为什么，但是当我尝试从一个活动转到前一个活动（使用 ym 返回按钮）时，意图是空的，因此是空指针异常。

我这样做的方式是：

```
 Intent intent = new Intent(Puzzle_Activity.this, Play_Activity.class );
    startActivity(intent); 
```

据我所知，该代码没有任何问题。然而logcat给了我

```
 04-24 19:23:15.074: E/AndroidRuntime(829): FATAL EXCEPTION: main
04-24 19:23:15.074: E/AndroidRuntime(829): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.angrywordsearch/com.example.angrywordsearch.Play_Activity}: java.lang.NullPointerException
04-24 19:23:15.074: E/AndroidRuntime(829):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
04-24 19:23:15.074: E/AndroidRuntime(829):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
04-24 19:23:15.074: E/AndroidRuntime(829):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
04-24 19:23:15.074: E/AndroidRuntime(829):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
04-24 19:23:15.074: E/AndroidRuntime(829):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-24 19:23:15.074: E/AndroidRuntime(829):  at android.os.Looper.loop(Looper.java:137)
04-24 19:23:15.074: E/AndroidRuntime(829):  at android.app.ActivityThread.main(ActivityThread.java:4745)
04-24 19:23:15.074: E/AndroidRuntime(829):  at java.lang.reflect.Method.invokeNative(Native Method)
04-24 19:23:15.074: E/AndroidRuntime(829):  at java.lang.reflect.Method.invoke(Method.java:511)
04-24 19:23:15.074: E/AndroidRuntime(829):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-24 19:23:15.074: E/AndroidRuntime(829):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-24 19:23:15.074: E/AndroidRuntime(829):  at dalvik.system.NativeStart.main(Native Method)
04-24 19:23:15.074: E/AndroidRuntime(829): Caused by: java.lang.NullPointerException
04-24 19:23:15.074: E/AndroidRuntime(829):  at com.example.angrywordsearch.Play_Activity.onCreate(Play_Activity.java:60)
04-24 19:23:15.074: E/AndroidRuntime(829):  at android.app.Activity.performCreate(Activity.java:5008)
04-24 19:23:15.074: E/AndroidRuntime(829):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
04-24 19:23:15.074: E/AndroidRuntime(829):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
04-24 19:23:15.074: E/AndroidRuntime(829):  ... 11 more 
```

所以我要问的是；如果我指定要去的类，为什么它为空？

玩活动

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Intent Newintent = getParent().getIntent(); // Line 60
        Bundle extras = Newintent.getExtras();
        if(Newintent.hasExtra("userName"))
        {
            userName =  extras.getString("userName");
            Password = extras.getString("Password");
        }
            setContentView(R.layout.play_layout);       

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T19:30:15.307

您应该使用`getIntent()`而不是`getParent().getIntent()`， `getParent()`可能为空。

`getIntent()`为您提供活动开始的意图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T19:34:34.500

文档说：

`public final Activity getParent ()`自：API 级别 1

如果此视图是嵌入式子视图，则返回父 Activity。

您的 Activity 是嵌入式子项吗？

# loadrunner - InvokeMethod 失败：负载运行器中的响应不是格式正确的 XML

> ID：16200524
> 
> 赞同：1
> 
> 时间：2013-04-24T19:25:19.903
> 
> 标签：loadrunner

导入 WSDL 并调用“添加服务调用”。我得到输出但是，当脚本被执行时，得到以下错误消息。错误：InvokeMethod 失败：响应不是格式良好的 XML。错误：ExtractResultArg 失败：对象引用未设置为对象的实例。

如果有人调查这个，真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:52:28.607

我不确定如何解决您遇到的具体问题，但我可以告诉您，在测试 Web 服务时，我发现使用 WEB/HTML 协议来测试它们更加有效和有用。您可以将 web_custom_request() 直接发送到 WSDL URL。我们的开发人员使用 SOAP UI 来对 Web 服务进行单元测试，将在该工具中创建的调用（有免费版本）导入到 LR 脚本中是轻而易举的事，而无需 LR 中提供的 Web 服务协议中的很多麻烦。

这是我如何设置它的示例：

```
// first add whatever headers you need
web_add_header("x-ssl-client-cert","-----CERTIFICATE STRING-----");

// use web_custom_request to invoke web service
// hand code the request or use something like SOAPUI
// to record the request
web_custom_request("Your Web Service Call",
   "Method=POST",
   "URL=http://... ", \\ URL to the WSDL
   "Body=<soapenv:Envelope "
        "xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" "
        "xmlns:mul=\"http://www...\" "
        "xmlns=\"http://www....\"> "
            "   <soapenv:Header/>"
            "   <soapenv:Body>"
            " "                   // body of your request
            "   </soapenv:Body>"
            "</soapenv:Envelope>",
            "TargetFrame=",
    LAST); 
```

改用此方法可能会带来更好的运气。

# php - Wordpress ul 下拉菜单：仅显示一些 li 子项

> ID：16200526
> 
> 赞同：0
> 
> 时间：2013-04-24T19:25:33.277
> 
> 标签：php, wordpress, menu

我用这个 PHP 语句为我的 Wordpress 网站创建了一个下拉菜单：

```
<ul id="menu">
    <?php wp_list_pages('title_li=&depth=0&sort_column=menu_order'); ?>
</ul> 
```

在这个 jsfiddle 你可以找到 HTML 和 CSS 代码：http: [//jsfiddle.net/N5H4c/](http://jsfiddle.net/N5H4c/)

我只想显示“菜单项一”的子页面，而不是“菜单项三”的子页面（参见 jsfiddle）和任何其他菜单项。我怎样才能排除它们？我可以实施一般规则还是必须`exclude=pageid`在 PHP 语句中排除每个规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:37:33.237

使用以`child_of`父页面ID为值的参数，例如：

`wp_list_pages('title_li=&depth=0&sort_column=menu_order&child_of=3');`

[http://codex.wordpress.org/Function_Reference/wp_list_pages](http://codex.wordpress.org/Function_Reference/wp_list_pages)

# security - 高效的 OAuth2.0 服务器/提供者将如何工作？

> ID：16200528
> 
> 赞同：5
> 
> 时间：2013-04-24T19:25:40.497
> 
> 标签：security, encryption, cryptography, oauth-2.0, digital-signature

我可能需要为我正在创建的 API 实现 OAuth2.0 服务器。此 API 将允许第 3 方代表用户执行操作。

OAuth2.0 有 3 个电源调用。首先，有一个电话提示用户同意。这会返回一个`code`. 第二个是用`code`交换 的地方`access token`。最后，`access token`用于代表用户调用 API。

为了实现，我认为第一次调用会生成一个随机字符串，它充当`code`. 然后`code`将带有指向当前用户的指针和随机的 存储在数据库中`HMAC Key`，然后将随机数据作为 返回给第 3 方`code`。

当第 3 方请求 时`access token`，会生成另一条随机数据并与`code`. 此字符串使用`HMAC key`来自步骤 1 的 签名，然后此签名字符串和签名与签名一起返回以形成`access token`.

当 API 调用发生时，从数据库中检索与`hmac key`提供的对应的。`access_token`的签名`access_token`使用 hmac 密钥进行验证。

用户只需从其授权 HMAC 密钥列表中删除一个 HMAC 密钥，即可撤销第 3 方访问。此外，但只是签署随机数据，我可以避免存储每个创建的每个 access_token，而是维护一个简短的 hmac 密钥列表。

无论如何，这是我第一次尝试思考这个问题。令人惊讶的是，关于有效实现 OAuth2.0 的服务器端的信息很少。我宁愿在数据库中保留尽可能少的信息。签署随机数据然后撤销 HMAC 密钥的优点是我不必存储每个`access token`授权调用生成的每个数据。

需要思考！一定有更好的方法！

编辑：

我不是在寻找实现。不过还是谢谢！另外，我假设整个系统将通过 HTTPs 运行。另外，我说的是纯 OAuth2.0 流程，我*不是*在谈论带有签名和客户端密钥的 OAuth1.0。我在问如何设计 OAuth2.0 服务器背后的密码学，该服务器将以与（例如）Google 的 OAuth2.0 流程类似的方式工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-01T10:52:41.790

我对此没有确切的答案，但让我们尝试将这些部分组合在一起 -

i) 我不太确定您是否需要将授权码长期保存在数据库中。这就是 Facebook 所说的——

> OAuth 授权代码的新安全限制 我们只允许将授权代码交换为访问令牌一次，并要求在创建后 10 分钟内将它们交换为访问令牌。这符合 OAuth 2.0 规范，该规范从一开始就声明“授权码必须是短暂的且一次性使用”。有关更多信息，请查看我们的身份验证文档。

请参阅此链接，[https://developers.facebook.com/roadmap/completed-changes/](https://developers.facebook.com/roadmap/completed-changes/)（12 月 5 日，更改）。

ii）在第 1 步之前做什么，将授权码和 HMAC 密钥保存在数据库中。***让我们有 10 分钟的授权码（或任何你认为有必要的），然后删除授权码。***

iii) 假设您有一个单点登录服务来验证客户端的凭据。当客户端应用程序访问令牌交换端点（访问令牌的身份验证代码）时，您需要获取 HMAC 密钥并返回访问令牌。**为什么不添加（一些随机数据+时间戳+客户ID/客户名称（或可用于唯一标识用户的东西））并使用密钥对其进行签名并将所有这些数据作为访问令牌返回。**
您可以考虑使用新的 HMAC 密钥并替换旧的。

iv) 当客户端使用令牌命中任何 API 端点时，让服务内部调用**CustomerIDExtractorService 从数据库中获取 HMAC 密钥并解密访问令牌并将 customerID 返回给相关 API**。然后，独立进程可以使用客户 ID 来获取数据。所以基本上，我要求您将登录/令牌生成/令牌信息提​​取过程分离到一个单独的单元中。

**让我们尝试将其映射到 Google 如何执行此类操作**
i）您使用应用程序并登录 Google Oauth。（让谷歌的黑匣子 X 处理登录）。
ii) 您的应用程序访问令牌交换端点 -> 服务在内部检查代码是否有效。如果是，服务会结合一些数据 + customerID 并对其进行签名并将其作为访问令牌返回给应用程序。
iii) 应用程序现在点击（比如说）google+ 端点。在内部，该服务将令牌传输到黑匣子 X，后者解密令牌并将客户 ID 返回给 G+ 服务。g+ 然后将 C_ID 映射到相关的客户数据。

**另一个建议**

根据应用程序请求的范围，您可以向访问令牌添加更多信息。可能会根据应用程序选择的范围创建一个 JSON 对象并添加/删除字段。将 JSON 字符串签名为访问令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T16:15:40.617

实际上，大多数实现都是在 OAuth 2.0 中通过 https 而不是 mac 使用不记名令牌，请查看[此演示文稿第 54-56 页](http://www.slideshare.net/aaronpk/an-introduction-to-oauth2)，了解为什么更喜欢不记名，另一方面，spring 实现不支持 OAuth 2.0 的 MAC 令牌，并且存在一个未解决的问题，但是[它仍然开放](https://jira.springsource.org/browse/SECOAUTH-50)

暂时如果你正在寻找spring implementation demo你可以查看这个[source code](https://github.com/bassemZohdy/Spring_REST_OAuth_Demo)但是它使用数据库来存储令牌，并且资源服务器和授权服务器之间必须完成连接，在这个demo中使用数据库.

Spring OAuth 2.0 的开源实现之一是[cloudfoundry 的 UAA，](https://github.com/cloudfoundry/uaa)我参加了一个关于它的会议，他们也告诉他们必须在两台服务器之间进行通信。[关联](http://www.youtube.com/watch?v=8uBcpsIEz2I)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T21:42:43.043

似乎你的描述开始不错，但我必须承认我只能部分遵循你的方法。AFAIK OAuth2 严重依赖 HTTPS 而不是签名请求，尽管我猜你可以自由使用。

我不确定您提出的撤消访问权限的概念。通常这将仅依赖于访问令牌（它应该在某个时间点到期，您可以撤销它，并且可以更新它）。如果对于 API 请求，您正在提取用户 ID 的密钥，那么您的代码可能与“用户”概念而不是 OAuth 客户端（具有角色、范围、资源）紧密相关

无论如何，这不是一个简单的标准，我想讨论可能会持续很长时间，即使那样我也不确定是否可以涵盖所有内容。我相信您已经在以下位置查看了 RFC：

[https://www.rfc-editor.org/rfc/rfc6749](https://www.rfc-editor.org/rfc/rfc6749)

我还从您的个人资料中看到您可能是一名 Java 开发人员。在这种情况下，查看 Spring-security-oauth2 可能是个好主意：

[https://github.com/SpringSource/spring-security-oauth](https://github.com/SpringSource/spring-security-oauth)

如果您的解决方案不使用 Java，那么您在问题中提到的很多问题都已被此类项目处理并解决，因此它应该会给您很多想法。如果您将使用 Java，那么它可能会对您有很大帮助。

希望能帮助到你！

# python - 在同一台服务器上运行多个 celery 实例

> ID：16200532
> 
> 赞同：10
> 
> 时间：2013-04-24T19:26:01.740
> 
> 标签：python, celery

我想在同一台机器上运行两个芹菜实例。一个用于我的应用程序的“A”版本，另一个用于“B”版本。

我有两个实例，我是这样开始的：

```
(env1)/home/me/firstapp$ celery -A app.tasks worker --config celeryconfig
(env2)/home/me/secondapp$ celery -A app.tasks worker -n Carrot --config celeryconfig 
```

在每个应用程序的 tasks.py 中，我创建了一个像这样的 celery 实例：

```
 celery = Celery('tasks', backend='amqp', broker='amqp://guest@127.0.0..1.5672//')
 @celery.task
 def run_a_task():
     do_stuff() 
```

在 env2 的 task.py 中，如何指定我想使用 secondapp 中的第二个 celery 实例（名为 Carrot），而不是 firstapp 中的第一个？我怀疑我需要在第一行的 celery 的构造函数中更改某些内容，但我不知道要添加什么。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-29T18:16:40.340

我通过使用 celery 的虚拟主机解决了这个问题。

一旦 rabbitmq 服务器运行，我会发出以下命令：

```
rabbitmqctl add_user user password
rabbitmqctl add_vhost app2
rabbitmqctl set_permissions -p app2 user ".*" ".*" ".*" 
```

然后我开始芹菜：

```
celery -A tasks worker --broker=amqp://user:password@localhost/app2 
```

通过我的任务，我像这样初始化 celery 对象：

```
celery = Celery('tasks', backend='amqp', broker='amqp://user:password@localhost:5672/app2 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-24T21:06:46.960

看起来您正在使用 AMQP，所以我建议您使用不同的交易所来解决这个问题。

我建议阅读有关 AMQP 结构的博文：http: [//blogs.digitar.com/jjww/ ?s=rabbits&x=0&y=0](http://blogs.digitar.com/jjww/?s=rabbits&x=0&y=0)

有关 Celery 的特定信息，请查看此处：[http ://docs.celeryproject.org/en/latest/userguide/routing.html](http://docs.celeryproject.org/en/latest/userguide/routing.html)

您可以做的一个简短版本是为应用程序提供不同的默认队列：

```
from kombu import Exchange, Queue

CELERY_DEFAULT_QUEUE = 'app1'
CELERY_QUEUES = (
    Queue('app1', Exchange('app1'), routing_key='app1'),
) 
```

# c# - AJAX POST 不返回

> ID：16200534
> 
> 赞同：0
> 
> 时间：2013-04-24T19:26:12.593
> 
> 标签：c#, jquery, ajax, post, asp.net-mvc-4

在我的 C# MVC4 应用程序中，我执行以下 AJAX Post：

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(function () {
        $('.rowselection').click(function (e) {
            var tdata = $('#form1').serialize();
            $.ajax({
                type: "POST",
                data: tdata,
                url: "/Home/PartialAverage",
                success: function (result) { success(result); }
            });
        });

        function success(result) {
            $("#Display_Average").html(result);
        }
    });
</script> 
```

在本地主机上运行应用程序并执行测试时，从不立即，但几乎总是在经过相当长的时间后，我单击启动 POST 的复选框，POSTS 无法及时返回，甚至在某些情况下根本无法返回. 这是不可接受的，因为帖子刷新了显示快速需要的数据的局部视图。

这可能是什么原因造成的，是我可以防止的吗，以及在我发布到生产环境后我可以期待看到的东西吗？

这是我的 ActionResult：

```
[HttpPost]
public ActionResult PartialAverage(ChViewModel model, FormCollection myFcollection)
{
    HomeModel C = new HomeModel();
    System.Data.DataTable myDT = new System.Data.DataTable();
    myDT = (DataTable)Session["DT"];
    ChViewModel D = new ChViewModel();
    D = model;
    D = C.AverageCalculation(myDT, myFcollection, D);

    ViewData["SampleTypes"] = C.SampleTypeList;
    Session["Counter"] = 0;
        return PartialView(D);
    } 
```

# javascript - 如何将 var myKey = "keyP" 映射到 functionP.myKey

> ID：16200535
> 
> 赞同：0
> 
> 时间：2013-04-24T19:26:14.403
> 
> 标签：javascript, function, syntax, properties, key

据我了解，以下陈述是相等的

*   对象属性
*   对象[“属性”]

所以，我一直在做一些测试，但我不知道如何使点符号为 functionP 正确工作。

我通常在此页面的某处使用转储工具*[screendump](https://stackoverflow.com/questions/208016/how-to-list-the-properties-of-a-javascript-object)*来查看发生了什么，但它并没有显示它看起来的函数的属性。

## 为什么我可以这样做

```
alert(functionE());     // returns key and date
alert(functionE.keyE);  // returns key and date

function functionE()
{
    var myKey = "keyE";

    functionE[myKey] = myKey + " +++ " + Date();
    return functionE[myKey];
} 
```

## 但不是这个

```
alert(functionP());     // returns key and date
alert(functionP.keyP);  // RETURNS UNDEFINED

function functionP()
{
    var myKey = "keyP";

    functionP.myKey = myKey + " +++ " + Date();
    return functionP.myKey;
} 
```

## 虽然我可以做到这一点

```
alert(functionT());     // returns key and date
alert(functionT.keyT);  // returns key and date

function functionT()
{
    functionT.keyT = "keyT" + " +++ " + Date();
    return functionT.keyT;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T19:30:46.350

因为`functionP.myKey`等于`functionP['myKey']`，不是`functionP[myKey]`。

`functionE`是做你想做的事情的正确方法。

但是，您可以执行以下操作：

```
function functionX() {
    var key = 'keyP';
    var value = 'foo';

    this.__defineGetter__(key, function() {
        return value;
    });

    this.__defineSetter__(key, function(val) {
        value = val;
    });
} 
```

现在它起作用了：

```
> var o = new functionX()
> o.keyP
"foo" 
```

`__defineGetter__`并且`__defineSetter__`不是标准的 JavaScript，所以我不会使用它们。使用`functionE`.

# regex - 任何人都可以找到我以下表达式的 perl 正则表达式吗？

> ID：16200537
> 
> 赞同：-3
> 
> 时间：2013-04-24T19:26:26.570
> 
> 标签：regex, perl

我正在尝试将下面的表达式列表转换为它们的 perl 正则表达式等价物。在字符串中搜索该模式。在下面的表达式中 VARNAME 是动态的。它可以是任何字值。

```
 EXPRESSION                                     PERL REGULAR EXPRESSION
__________________                                _________________________
    ^TM1()^
    ^TM2()^
    ^TM3()^
    ^f(‘VARNAME’)^           ----------------        /\^f\(‘(\w*?)’\)\^/  
    ^f(‘VARNAME’).get()==’#’^
    ^f(‘VARNAME’)==’#’^
    ^f(‘VARNAME’).any(‘#’)^
    ^f(‘VARNAME’).toNumber()^
    ^f(‘VARNAME’).toString()^
    ^f(‘VARNAME’).toString().toLowerCase()^
    ^f(‘VARNAME’).toString().toUpperCase()^
    ^f(‘IFCONDITION’)?’THENTEXT’:’ELSETEXT’^
    <br>
    <br/>
    <br />
    &nbsp;
    ^MobileHeader()^
    ^MobileFooter()^
    <u>
    </u> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T20:01:47.227

利用[`quotemeta`](http://perldoc.perl.org/functions/quotemeta.html)

```
while (<DATA>) {
   chomp;
   print quotemeta($_), "\n";   # or:  print "\Q$_\E\n";
}

__DATA__
^TM1()^
^TM2()^
^TM3()^
^f(‘VARNAME’)^
^f(‘VARNAME’).get()==’#’^
^f(‘VARNAME’)==’#’^
^f(‘VARNAME’).any(‘#’)^
^f(‘VARNAME’).toNumber()^
^f(‘VARNAME’).toString()^
^f(‘VARNAME’).toString().toLowerCase()^
^f(‘VARNAME’).toString().toUpperCase()^
^f(‘IFCONDITION’)?’THENTEXT’:’ELSETEXT’^
<br>
<br/>
<br />
&nbsp;
^MobileHeader()^
^MobileFooter()^
<u>
</u> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:33:31.860

您可以简单地“或”它们全部，必要时转义。您可以使用“？”稍微缩短它。

这不是一个干净或优雅的解决方案，但我想它会很好地满足您的目的。

# php - RewriteBase 问题

> ID：16200540
> 
> 赞同：0
> 
> 时间：2013-04-24T19:26:46.770
> 
> 标签：php, apache, mod-rewrite

我正在开发一个 mvc cms 系统。我的 htaccess 文件中有这个

```
RewriteEngine On
RewriteBase /mymvc/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^?]*) index.php?url=$1 [QSA,L] 
```

我在内部文件夹管理员中有另一个

```
RewriteEngine On
RewriteBase /mymvc/admin/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^?]*) index.php?url=$1 [QSA,L] 
```

这个想法是，如果我来到这个文件夹，我应该能够访问我的管理文件，但它会不断地将我带到我的根文件夹的索引。该项目在我的本地系统上运行良好，但是当我在线部署 www.mylcpschoolbook.net/mymvc （我的根文件夹）时，我发现了这个问题。请问我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:30:16.100

当你把它放到网上，你需要改变`RewriteBase`

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^?]*) index.php?url=$1 [QSA,L] 
```

管理文件夹 htaccess

```
RewriteEngine On
RewriteBase /admin/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^?]*) index.php?url=$1 [QSA,L] 
```

# windows-runtime - 图像源上的 Uri 格式

> ID：16200542
> 
> 赞同：3
> 
> 时间：2013-04-24T19:26:52.767
> 
> 标签：windows-runtime, uri

以下uri有什么问题？

```
bmi.UriSource = (new Uri(@"/Assets/Image.png", UriKind.Relative)); 
```

`bmi`一个在哪里`BitmapImage`。
我将图像的构建操作设置为嵌入式资源。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T20:15:18.200

找到了;

```
bmi.UriSource = (new Uri("ms-appx:/Assets/Logo.png")); 
```

并将操作设置为内容。RT 中没有相对 URI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:36:24.120

WPF 需要使用 Resource 构建动作（或 Content 构建动作）来使用 Uris。对于二进制数据（如图像），请使用 Binary。

如果您的代码使用单个项目（单个 dll），您可以跳过 '/MYAPPLICATIONNAME;component/' 并使用“Assets/Image.png”作为相对 Uri。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-18T12:45:59.407

每个控件或页面都有一个`BaseUri`属性，您可以使用它来为资产构建正确的 uri。

这是一个例子：

```
imageIcon.Source = new BitmapImage(new Uri(this.BaseUri, "Assets/file.gif"));

// Or use the base uri from the imageIcon, same thing
imageIcon.Source = new BitmapImage(new Uri(imageIcon.BaseUri, "Assets/file.gif")); 
```

# vba - Next 使用 if else 块遍历集合时没有 For 错误

> ID：16200543
> 
> 赞同：0
> 
> 时间：2013-04-24T19:26:54.737
> 
> 标签：vba, excel

我没有线索。

我尝试在每个 If then 块之后放置一个 End If，但显然这不起作用。有任何想法吗？？

```
Private Sub putCollectionInWorksheet(ByRef ws As Excel.Worksheet, ByRef cData As Collection)
    Dim i As Long, j As Long
    Dim emp As Employee

    i = 36 ' current row

    For Each emp In cData
        If emp.City = "Dallas" And emp.Title = "Associate" Then
            ws.Cells(i, 3).Value = emp.Name
            ws.Cells(i, 3).Interior.ColorIndex = 31
            ws.Cells(i, 3).Font.Color = vbWhite
            i = i - 1
            Next emp

        Else
            If emp.City = "Denver" And emp.Title = "Associate" Then
                ws.Cells(i, 4).Value = emp.Name
                ws.Cells(i, 4).Interior.ColorIndex = 53
                ws.Cells(i, 4).Font.Color = vbWhite
                i = i - 1
                 Next emp

        Else

            If emp.City = "Houston" And emp.Title = "Associate" Then
                ws.Cells(i, 5).Value = emp.Name
                ws.Cells(i, 5).Interior.ColorIndex = 52
                ws.Cells(i, 5).Font.Color = vbWhite
                i = i - 1
                 Next emp

        Else

            If emp.City = "Kansas City (Missouri)" And emp.Title = "Associate" Then
                ws.Cells(i, 6).Value = emp.Name
                ws.Cells(i, 6).Interior.ColorIndex = 56
                ws.Cells(i, 6).Font.Color = vbWhite
                i = i - 1
                 Next emp

        Else

            If emp.City = "Oklahoma City" And emp.Title = "Associate" Then
                ws.Cells(i, 7).Value = emp.Name
                ws.Cells(i, 7).Interior.ColorIndex = 47
                ws.Cells(i, 7).Font.Color = vbWhite
                i = i - 1
                 Next emp

        Else

            If emp.City = "Tulsa" And emp.Title = "Associate" Then
                ws.Cells(i, 8).Value = emp.Name
                ws.Cells(i, 8).Interior.ColorIndex = 48
                ws.Cells(i, 8).Font.Color = vbWhite
                i = i - 1
                 Next emp

        End If

End Sub 
```

**编辑**

现在行是这样的

鲍勃 | 苏 | 艾伦 | 乔治

如果该系列遇到在达拉斯的合伙人亨利，它将被覆盖。

亨利 | 苏 | 艾伦 | 乔治

我需要它看起来像这样：

亨利 |

鲍勃 | 苏 | 艾伦 | 乔治

抱歉，由于防火墙，我无法显示屏幕截图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:32:06.703

**未经测试**

这就是我的评论的意思

```
Private Sub putCollectionInWorksheet(ByRef ws As Excel.Worksheet, ByRef cData As Collection)
    Dim i As Long, j As Long
    Dim emp As Employee

    i = 36 ' current row

    For Each emp In cData
        If emp.City = "Dallas" And emp.Title = "Associate" Then
            ws.Cells(i, 3).Value = emp.Name
            ws.Cells(i, 3).Interior.ColorIndex = 31
            ws.Cells(i, 3).Font.Color = vbWhite
            i = i - 1
        ElseIf emp.City = "Denver" And emp.Title = "Associate" Then
            ws.Cells(i, 4).Value = emp.Name
            ws.Cells(i, 4).Interior.ColorIndex = 53
            ws.Cells(i, 4).Font.Color = vbWhite
            i = i - 1
        ElseIf emp.City = "Houston" And emp.Title = "Associate" Then
            ws.Cells(i, 5).Value = emp.Name
            ws.Cells(i, 5).Interior.ColorIndex = 52
            ws.Cells(i, 5).Font.Color = vbWhite
            i = i - 1
        ElseIf emp.City = "Kansas City (Missouri)" And emp.Title = "Associate" Then
            ws.Cells(i, 6).Value = emp.Name
            ws.Cells(i, 6).Interior.ColorIndex = 56
            ws.Cells(i, 6).Font.Color = vbWhite
            i = i - 1
        ElseIf emp.City = "Oklahoma City" And emp.Title = "Associate" Then
            ws.Cells(i, 7).Value = emp.Name
            ws.Cells(i, 7).Interior.ColorIndex = 47
            ws.Cells(i, 7).Font.Color = vbWhite
            i = i - 1
        ElseIf emp.City = "Tulsa" And emp.Title = "Associate" Then
            ws.Cells(i, 8).Value = emp.Name
            ws.Cells(i, 8).Interior.ColorIndex = 48
            ws.Cells(i, 8).Font.Color = vbWhite
            i = i - 1
        End If
    Next emp
End Sub 
```

# oracle - 如何每晚将 50 亿行加载到 Oracle 中？

> ID：16200548
> 
> 赞同：1
> 
> 时间：2013-04-24T19:27:10.097
> 
> 标签：oracle, sql-loader

正在考虑的方法包括：

*   sqlldr
*   外部表
*   从头算起
*   金门。

这些方法中的任何一种都能够满足 6 小时内 50 亿行的要求吗？

传入的是管道分隔符格式的文本文件。每个表 1 个文件。10 个表，每个表有 10 到 20 列。

# c# - Windows Phone 8 设置导航 URI

> ID：16200549
> 
> 赞同：0
> 
> 时间：2013-04-24T19:27:17.237
> 
> 标签：c#, windows-phone-8

我正在设置一系列按钮，一个用于表格中的每个项目。我需要做的是为每个按钮设置 Navigate 参数，无论如何我可以从 .cs 代码中设置以下内容吗？：

```
<ec:NavigateToPageAction TargetPage="/MissionPage.xaml"/> 
```

这是我用来制作按钮的代码：

```
foreach (string i in missionQ)
        {
            Button btn = new Button() { Content = "Run", Width=120, Height=90 };
            btn.HorizontalAlignment = System.Windows.HorizontalAlignment.Right;
            btn.VerticalAlignment = System.Windows.VerticalAlignment.Top;
            btn.Margin = new Thickness(0, (100*x), 20, 0); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-23T15:52:50.053

您可以在按钮的 Click 事件中尝试此代码

```
using System.Windows.Navigation;

private void Button_Click(object sender, RoutedEventArgs e)
    {
        NavigationService.Navigate(new Uri("/MissionPage.xaml.xaml", UriKind.Relative));
    } 
```

参考：[NavigationService 类](http://msdn.microsoft.com/en-us/library/System.Windows.Navigation.NavigationService%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T08:34:08.827

我处理这个问题的方法是，为每个按钮上的点击事件创建一个新的事件处理程序。传递 i 作为对函数的引用。

```
btn.Tap += functionToHandleTap(i); 
```

在它自己的函数中，我将创建一个 switch 或 if 语句，然后根据传递给 funtionToHandleTap 的 i 参数进行导航。

```
 private void functionToHandleTap(string i)
    {
        string naviString = string.Empty;

        if (i == "something")
        {
            naviString = "some xaml here";
        }
        else
        {
            naviString = "another xaml here";
        }

        _rootFrame.Navigate(new Uri(naviString, UriKind.Relative));
    } 
```

# django-rest-framework - 有没有办法预先查找相关的字段模型？

> ID：16200552
> 
> 赞同：7
> 
> 时间：2013-04-24T19:27:31.553
> 
> 标签：django-rest-framework

我正在公开一个特定模型的 API，并希望序列化它的一些相关字段。这些相关字段通常是重复的，我不想为每个相关字段序列化做大量的数据库查询。有没有一种简单的方法来预查询所有相关实例，然后让 RelatedField 序列化程序在字典中查找它？或者可能从相关字段的 ModelSerializer 中指定？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T10:32:58.127

您可以在查询集上使用 Django 的标准[prefetch_related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)和[select_related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-related)方法。

在视图上，使用`queryset`属性，而不是`model`快捷方式。例如...

```
class ExampleView(generics.ListCreateAPIView):
    serializer_class = ExampleSerializer
    queryset = Example.objects.select_related(...) 
```

# android - 不要关闭 MyApp

> ID：16200555
> 
> 赞同：3
> 
> 时间：2013-04-24T19:27:33.380
> 
> 标签：android, crash

我为 android 制作了一个名为 MyApp 的应用程序，它在 ListView 中列出了安装在我的设备中的应用程序。当我单击 ListView 中的一行时，它会打开该行指向的应用程序。

如果我的 MyApp 打开的这个应用程序崩溃了，它会关闭 MyApp 并转到主屏幕。

有什么办法可以防止这种情况发生吗？我的意思是，如果由 MyApp 打开的应用程序崩溃，它只会崩溃并返回 MyApp，它们不会崩溃并转到主屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:59:58.910

*已编辑：*
基于注释指示`java.lang.RuntimeException`：“无法启动活动 ComponentInfo”

* * *

在您的示例中，您的`ListView`应用程序被调用`MyApp`，而正在启动的应用程序被调用`App`。

在所有情况下，如果`App`崩溃，执行将返回到`MyApp`. 因此，崩溃发生在您的启动器`MyApp`中。

为了阻止您的应用程序崩溃，请将`startActivity()`or包装`startActivityForResult()`在一个`try/catch`块中。

然后，`MyApp`在任何应用程序启动失败后，Activity 将保持可见。
此外，您必须有机会在块中显示一条`Dialog`消息`Toast`以`catch()`通知用户错误。

# ruby-on-rails - 在 Ubuntu 12.04 下尝试 gem install json 时出错

> ID：16200556
> 
> 赞同：3
> 
> 时间：2013-04-24T19:27:34.707
> 
> 标签：ruby-on-rails, ruby, json, rvm

在 Ubuntu 12.04 下捕获此错误：

```
Building native extensions. This could take a while...
ERROR: Error installing json:
ERROR: Failed to build gem native extension.

/home/allaud/.rvm/rubies/ruby-1.9.3-p392/bin/ruby extconf.rb
creating Makefile

make
compiling generator.c
linking shared-object json/ext/generator.so
gcc: error: generator.o: No such file or directory
make: *** [generator.so] Ошибка 1

Gem files will remain installed in /home/allaud/.rvm/gems/ruby-1.9.3-p392/gems/json-1.7.7 for inspection.
Results logged to /home/allaud/.rvm/gems/ruby-1.9.3-p392/gems/json-1.7.7/ext/json/ext/generator/gem_make.out 
```

我正在使用新的 rvm 和 ruby​​ 1.9.3，并且只有 json gem 有同样的问题。

当我尝试执行时发生错误：

```
gem install json 
```

如果我添加 sudo 一切正常，但我不能（也不应该）将 sudo 与 rvm 命令一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-09T18:29:32.303

```
sudo apt-get install ruby1.9.1-dev 
```

可以修复它。干杯！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-21T07:34:07.093

尝试运行以下命令（适用于 ubuntu 14.04）：

`$ sudo apt-get install libgmp3-dev`

然后安装`json`

`$ gem install json`

参考：[https ://www.digitalocean.com/community/questions/how-do-i-fix-this-error-when-deploying-rails-with-capistrano-using-nginx-and-puma](https://www.digitalocean.com/community/questions/how-do-i-fix-this-error-when-deploying-rails-with-capistrano-using-nginx-and-puma)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-13T11:01:13.400

对我来说这有效（来自@mjgpy3 的解决方案）

```
sudo apt-get install ruby-json 
```

# html - IE10 svg 指针事件

> ID：16200563
> 
> 赞同：0
> 
> 时间：2013-04-24T19:27:52.883
> 
> 标签：html, windows-8, svg, scroll, internet-explorer-10

我有一个带有可滚动内容的 div 容器。我需要为用户进行亮度设置。例如：

```
<div>
    <div style="overflow-y: auto">
        <div>some long content</div>
    </div>
    <svg:svg style="position: absolute; left:0; top:0; width:100%; height:100%;
                    opacity: 0.5" pointer-events="none">
        <svg:rect x="0" y="0" width="100%" height="100%" fill="black"></svg:rect>
    </svg:svg>
</div> 
```

结果是可以接受的。但是......当我用鼠标滚轮或键盘滚动内容时，一切都按预期工作。但是，如果我尝试使用触摸设备滚动内容，则不会发生任何事情。尝试在可滚动容器上监听指针事件表明一切都很好。引发事件。什么可以阻止内容滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-02T19:36:27.300

我修改了一点你的html，也许这解决了你的问题？[http://jsfiddle.net/krul/VZtaD/1/](http://jsfiddle.net/krul/VZtaD/1/)

```
 <svg style="position: absolute; left:0; top:0; width:100%; height:100%;
                opacity: 0.5" pointer-events="none">
    <rect x="0" y="0" width="100%" height="100%" fill="black"></rect>
</svg> 
```

# c - 在 emacs 中的复合语句上前进

> ID：16200566
> 
> 赞同：3
> 
> 时间：2013-04-24T19:28:03.927
> 
> 标签：c, emacs

是否有一个 emacs 命令可以在 C 或 C++ 文件中的复合语句上前进？

如果我有以下代码

```
^ if (foo)
{
   doSomething();
}$ 
```

并且重点是插入符号（`^`），我希望能够做类似的事情`M-x forward-compound-statement RET`并将重点移至美元符号。

`forward-sexp`似乎它应该是正确的命令，但这只会跳过一个单词，将点放在 if 之后。 `c-end-of-statement`也是错误的，因为它只到第一个右括号。

编辑：在 if-then-else-if-else 块的情况下，我理想情况下希望它经过所有 else 块。

我也希望在将来编写的 defuns 中使用它，因此与使用一个命令来完成它而不是重复一个命令直到我看到它到达正确的位置相比，击键不是一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T01:04:31.260

对于特定的主要模式，类似的东西`forward-compound-statement`很可能存在。不过，我不会费心去学习它们。

相反，我建议您习惯于使用更多可组合的命令进行导航，例如`C-s`. 您可以尝试使用 jump-char 之类的方法来一键缩短序列。

# c - 如何使用函数的参数唯一地 EXPORT_SYMBOL？

> ID：16200579
> 
> 赞同：1
> 
> 时间：2013-04-24T19:28:41.037
> 
> 标签：c, linux, gcc, linux-kernel, kernel-module

众所周知，使用时`EXPORT_SYMBOL("function name")`我们进入 System.map 中的符号列表，将函数名称作为符号。

```
c041bc90 b packet_sklist
c041bc94 b packet_sklist_lock
c041bc94 b packet_socks_nr
c041bc98 A __bss_stop
c041bc98 A _end
c041c000 A pg0
ffffe400 A __kernel_vsyscall 
```

我的问题是：世界上是否有任何编译选项、黑客攻击、宏或任何东西可以让你也包含函数的参数？

IE

```
c041bc90 b packet_sklist (list of arguments...) 
```

有两个原因：

1.  您可以导出`do_something(int a)` 和导出`do_something(int a,int b)`.

2.  在参数不匹配的内核模块中使用外部函数时，您不会遇到错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T18:05:22.530

您展示的第一个原因，即使 EXPORT_SYMBOL 支持参数，它也不支持变量参数，因为 Linux 使用 C。

# javascript - DOM 问题，不确定对象是否存在？JavaScript

> ID：16200586
> 
> 赞同：1
> 
> 时间：2013-04-24T19:29:16.483
> 
> 标签：javascript, dom

我正在用这个撕裂头发，初学者警报。

尝试使用直接 JS 而不是 JQuery 构建基本测验，但运气不佳。

我无法弄清楚如何正确循环通过单选按钮来检查用户选择。我很确定我的代码是正确的，但它不起作用。

这是否与所讨论的“名称”是由 .innerHTML 生成的事实有关，因此在页面加载时技术上不存在？

这是一个 JSFiddle：http: [//jsfiddle.net/AU2ve/](http://jsfiddle.net/AU2ve/)

这是我的循环，正如我所说，我确定没问题。

```
// Check which answer selected (Test)

function checkAnswer() {

    var answerChoices = document.getElementsByName('choices');

    for (var j = 0; j < answerChoices.length; j++) {       
         if (answerChoices[i].checked) {
             alert(answerChoices[i].value);
             break;
        }
     }
 } 
```

正如我所说，我对此仍然很陌生，希望这是一个简单的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T19:32:27.247

你用的是`j`，不是`i`。

只需替换`answerChoices[i]`为`answerChoices[j]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:45:58.190

正如其他人指出的那样，您遇到了循环错误。

您还必须`checkAnswer();`在更新选项之前。

然后你应该检查你是否有更多问题：

`if (typeof allQuestions[xNum - 1] !== "undefined") {`

更新小提琴：http: [//jsfiddle.net/AU2ve/3/](http://jsfiddle.net/AU2ve/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T19:43:35.193

更新了它。索引 i 和 j 是混合的。尝试[演示](http://jsfiddle.net/AU2ve/5/)

```
for (var j = 0; j < answerChoices.length; j++) {
    if (answerChoices[j].checked) {
        alert(answerChoices[j].value);
        break;
    }
} 
```

在渲染之前还要检查问题池的长度：

```
if (allQuestions.length > xNum - 1) { 
```

您的 HTML 格式也有错误：

```
 newHtml += '<label><input type="radio" name="choices" value="' + allQuestions[xNum - 1].choices[i] + '" />' + allQuestions[xNum - 1].choices[i] + '<label>'; 
```

您会注意到，我还用标签包围了您的输入：

```
<label><input type="radio" name="choices" value="David Cameron">David Cameron</label> 
```

这样，您可以单击名称来选择收音机。

# apache - 将域动态发送到两个文件夹之一

> ID：16200589
> 
> 赞同：0
> 
> 时间：2013-04-24T19:29:27.370
> 
> 标签：apache

是否可以在 Apache 服务器上向域发送请求到站点 A 或站点 B，其中站点 A 和站点 B 位于服务器上的不同文件夹中？理想情况下，我想动态地执行此操作，就像每十个请求都发送到 siteB 一样。缺少这一点，在某处更改配置参数以进行切换将是可用的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:39:30.167

您可以编写 Apache 配置脚本以每隔几分钟更改一次，然后重新加载。不是一个很好的解决方案，但可行。你为什么要按照你的要求去做呢？

# facebook - 如何在facebook中自动获取访问令牌

> ID：16200591
> 
> 赞同：1
> 
> 时间：2013-04-24T19:29:37.430
> 
> 标签：facebook, r, api, oauth, web-scraping

我正在尝试在 R 中制作某种我的 facebook 仪表板。一些基本的东西。我想自动化脚本，以便它可以定期自我更新。我使用 knitr 和任务管理器来生成仪表板，效果很好。

我使用[romainfrancois 博客](http://romainfrancois.blog.free.fr/index.php?post/2012/01/15/Crawling-facebook-with-R)的 facebook 代码来获取 facebook 数据：

```
facebook <-  function( path = "me", access_token = token, options){
  if( !missing(options) ){
    options <- sprintf( "?%s", paste( names(options), "=", unlist(options), collapse = "&", sep = "" ) )
  } else {
    options <- ""
  }
  url <- sprintf( "https://graph.facebook.com/%s%s&access_token=%s", path, options, access_token )
  # print(url)
  data <- getURL( url )
  fromJSON( data )
} 
```

唯一的问题是自动获取访问令牌。

我试图抓取网页的令牌：

```
library(RCurl)
FBdevPage<-browseURL("http://developers.facebook.com/tools/explorer")
FBdevPage[21] 
```

根据页面的源代码，它应该在第 21 行。然而，在 R 中它只显示一个反斜杠。有人有任何想法来获取访问令牌吗？或者，存储过程，而它允许每次检索数据？

# signalr - SSL 中的 singalR selfhost 服务器和 Web 客户端中的身份验证

> ID：16200595
> 
> 赞同：0
> 
> 时间：2013-04-24T19:29:50.970
> 
> 标签：signalr, signalr.client

我有一个 singalR 自托管服务器，它在 https 上的控制台应用程序中托管我的 singalR

我正在使用这个包来自我托管：

*   安装包 Microsoft.Owin.Hosting -pre 安装包 Microsoft.Owin.Host.HttpListener -pre 安装包 Microsoft.AspNet.SignalR.Owin

我有一个由 WebApi 支持的 Web 客户端，我可以从我的 Web 客户端连接到我的自托管 singalR 并发送消息，但是我现在想为此添加身份验证，这意味着只有登录的用户才能将消息发送到我的自托管 singalR 服务器。我在方法之前使用了 [Authorize] 属性

```
[Authorize]
public void Test(string test)
{
    Console.WriteLine(test);   
} 
```

我通过表单身份验证完成了我的 Web 客户端身份验证，但是在我的 Web 客户端成功登录后，当我调用 singalR 方法时，我收到 javascript 错误

未捕获的值不能为空。参数名称：用户

它告诉我的方法受到保护，但不知何故我的用户没有传递到我的自托管 singalR 服务器，这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T16:03:41.387

SignalR 1.0 引入了对此的支持，您可以在[David Fowlers 博客](http://weblogs.asp.net/davidfowler/archive/2012/11/11/microsoft-asp-net-signalr.aspx)上阅读一些相关信息。问题是，它太新了，文档很少。

我不确定您的应用程序目前正在发生什么，但您可以在 Stack Overflow 上找到一个类似的问题，这可能会帮助您走上正确的轨道：[Integrating SignalR with existing Authorization](https://stackoverflow.com/questions/14343531/integrating-signalr-with-existing-authorization)

基本上，您可以创建一个实现 IAuthorizeHubConnection 和 IAuthorizeHubMethodInvocation 的 SignalR 属性，然后装饰您想要授权的集线器/方法。

```
public class HubAuthorizeAttribute : Attribute, IAuthorizeHubConnection, IAuthorizeHubMethodInvocation {

    public virtual bool AuthorizeHubConnection(HubDescriptor hubDescriptor, Microsoft.AspNet.SignalR.IRequest request) {

        IAuthorizationProvider authorizationProvider = DependencyResolver.Current.GetService<IAuthorizationProvider>();

        return authorizationProvider.IsAuthorizedController(hubDescriptor.Name);
    }    

    public virtual bool AuthorizeHubMethodInvocation(IHubIncomingInvokerContext hubIncomingInvokerContext) {

        IAuthorizationProvider authorizationProvider = DependencyResolver.Current.GetService<IAuthorizationProvider>();

        return authorizationProvider.IsAuthorizedAction(hubIncomingInvokerContext.MethodDescriptor.Hub.Name, hubIncomingInvokerContext.MethodDescriptor.Name);
    }
} 
```

或者，您可以将 HubAuthorizeAttribute 添加为 HubPipeline 模块以全局要求授权。

```
var globalAuthorizer = new HubAuthorizeAttribute ();
GlobalHost.HubPipeline.AddModule(new AuthorizeModule(globalAuthorizer, globalAuthorizer)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T16:37:51.053

在过去的几天里，我在 SignalR JabbR 聊天中问了几次类似的问题，但没有得到任何答案。
当我要在这里发布我的问题时，我发现了你的问题和[另一个](https://stackoverflow.com/questions/15843849/implementing-authorization-in-a-self-hosted-signalr-server-accessed-from-web)问题。不幸的是，从几周前给出的答案来看，SignalR 本身似乎不提供身份验证支持，因此这对于许多自托管应用程序来说是一个巨大的问题（我们打算使用 SignalR 的集成 Windows 身份验证......）

# sql - 如何返回 Null 表示零的数据？

> ID：16200596
> 
> 赞同：1
> 
> 时间：2013-04-24T19:29:52.080
> 
> 标签：sql, null, counting

我有一个表格显示文本中某些数据点的单词出现次数。这是一个简化的示例：

```
Word   Chapter   Count
dog    1         3
dog    2         7
dog    3         1
cat    2         4 
```

请注意，在第 1 章和第 3 章中没有“猫”这一行，因为那里没有使用这个词。

我需要 SELECT INTO 临时表（为其他聚合等做准备）上述数据，但我需要“cat”以显示第 1 章和第 3 章，计数为 0。结果应该是：

```
Word   Chapter   Count
dog    1         3
dog    2         7
dog    3         1
cat    1         0
cat    2         4
cat    3         0 
```

任何提示将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T20:18:51.500

我不知道你的数据结构，但我认为你想要做的是：

```
create table Chapters (Chapter int);
insert Chapters values (1);
insert Chapters values (2);
insert Chapters values (3);

create table Words (Word varchar(50));
insert into Words values ('dog');
insert into Words values ('cat');

create table Chapters_Words (Word varchar(50), Chapter int, [Count] int);
insert into Chapters_Words values ('dog', 1, 3);
insert into Chapters_Words values ('dog', 2, 7);
insert into Chapters_Words values ('dog', 3, 1);
insert into Chapters_Words values ('cat', 2, 4);

select
    f.Word, 
    f.Chapter, 
    isnull(w.[Count], 0) [Count]
from
    Chapters_Words w
    right join (
        select w.Word, c.Chapter
        from Chapters c
        cross join Words w
    ) f on f.Chapter = w.Chapter and f.Word = w.Word 
```

结果：

```
Word                                               Chapter     Count
-------------------------------------------------- ----------- -----------
dog                                                1           3
dog                                                2           7
dog                                                3           1
cat                                                1           0
cat                                                2           4
cat                                                3           0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:31:42.463

Null 并不*意味着*零，“零”也不意味着 null。

叹...

话虽如此，“coalesce()”函数是一个流行的收藏夹，具体取决于您的 RDBMS 实现：[COALESCE with NULL](https://stackoverflow.com/questions/1766905/coalesce-with-null)。

另请参见[SQL ISNULL()、NVL()、IFNULL() 和 COALESCE() 函数](http://www.w3schools.com/sql/sql_isnull.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T19:34:01.050

取决于你在做什么？如果行退出，您可以使用外连接。在 Oracle 中，您可以 nvl() 将 null 更改为其他内容。例如，总和为零。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T19:32:12.490

我相信你需要`COALESCE`

```
COALESCE(Count, 0) 
```

完整示例：

```
SELECT Word, Chapter, COALESCE(Count, 0)
FROM YourTable 
```

# c++ - 我可以使用 GTest 测试一个简单的函数吗

> ID：16200606
> 
> 赞同：-1
> 
> 时间：2013-04-24T19:30:23.520
> 
> 标签：c++, unit-testing, googletest

我正在尝试熟悉 gtest，所以我想测试一个这样的函数：

```
int fun(int x=6){
return x;
} 
```

我正在编写这样的代码：

```
#include "gtest/gtest.h"

#include "iostream"

int fun(int x=6){
return x;
}

TEST(FunTest, defaultTest) {
   EXPECT_EQ(6, fun());
}

int main(int argc, char **argv) {
   ::testing::InitGoogleTest(&argc, argv);
   return RUN_ALL_TESTS();
} 
```

但是我得到了大约一百万个错误。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:43:38.727

至少，

```
#include "iostream" 
```

应该

```
#include <iostream> 
```

当您运行 Google 测试时，您需要确保 gtest 库已正确链接。引用[谷歌测试文档](https://code.google.com/p/googletest/wiki/V1_6_Primer)

> 设置新的测试项目
> 
> 要使用 Google Test 编写测试程序，您需要将 Google Test 编译成一个库并将您的测试与它链接起来。我们为一些流行的构建系统提供构建文件：msvc/ 用于 Visual Studio，xcode/ 用于 Mac Xcode，make/ 用于 GNU make，codegear/ 用于 Borland C++ Builder，以及 autotools 脚本（已弃用）和 CMakeLists.txt 用于 CMake（推荐) 在 Google 测试根目录中。如果您的构建系统不在此列表中，您可以查看 make/Makefile 以了解如何编译 Google Test（基本上您希望在头搜索中使用 GTEST_ROOT 和 GTEST_ROOT/include 编译 src/gtest-all.cc路径，其中 GTEST_ROOT 是 Google 测试根目录）。
> 
> 一旦您能够编译 Google 测试库，您应该为您的测试程序创建一个项目或构建目标。确保头文件搜索路径中有 GTEST_ROOT/include，以便编译器在编译测试时可以找到“gtest/gtest.h”。将您的测试项目设置为与 Google 测试库链接（例如，在 Visual Studio 中，这是通过添加对 gtest.vcproj 的依赖项来完成的）。

# html - 导航栏内的透明间隙

> ID：16200612
> 
> 赞同：1
> 
> 时间：2013-04-24T19:30:51.977
> 
> 标签：html, css, background, transparency

我正在尝试使其在当前选定选项卡所在的导航栏上有一个间隙（但没有将颜色设置为与背景相同）...

为了更详细地解释，我需要将“我的页面”选项卡（当前选定的选项卡）设置为透明选项卡，但是它需要显示背景颜色而不是其后面的导航栏颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T20:11:39.520

您需要添加一个空元素才能使其正常工作。确保您的 nav 元素的所有祖先都没有背景，而不是您想要显示到选项卡的背景。

[http://tinker.io/a5458](http://tinker.io/a5458)

```
body {
    background: #F58B73;
}

.nav-links {
    display: table;
    width: 100%;
    table-layout: fixed; /* could use `white-space: pre` instead */
}

.nav-button {
    display: table-cell;
    width: 140px;
    height: 30px;
    padding-top: 10px;
    padding-left: 20px;
    background: #231F20;
    color: #FFFFFF;
    text-decoration: none;
}

.spacer {
    background: #231F20;
    width: 100%;
    display: table-cell;
}

.nav-button-selected {
    background: transparent;
}

        <div class="nav-links pull-right">
            <div class="spacer"></div>
            <a href="#" class="nav-button nav-button-selected">Who I am</a>
            <a href="#" class="nav-button">What I do</a>
            <a href="#" class="nav-button">How to contact me</a>
        </div> 
```

# ruby-on-rails - 简单的表单提交按钮在 content_for 中不起作用

> ID：16200615
> 
> 赞同：1
> 
> 时间：2013-04-24T19:30:57.913
> 
> 标签：ruby-on-rails, forms, simple-form

我使用带有引导程序的简单表单在rails中创建了这个表单：

```
<%= simple_form_for @page, :html => { :class => 'page-form' } do |f| %>
<div class="row">

    <%= f.input :title, wrapper_html: { class: 'span6'}  %>
    <%= f.input :url, wrapper_html: { class: 'span3'}  %>
    <%= f.input :content, input_html: { class: 'wysihtml5 span9' }, wrapper_html: { class: 'span9 row' } %>
    <%= f.input :excerpt, input_html: { class: 'wysihtml5 span9 excerpt' }, wrapper_html: { class: 'span9 row'}  %>

</div>

<% content_for :sidebar do %>
  <div class="page-header">
    <h1>Publish</h1>
  </div>
  <div class="well">
    <%= f.input :status , collection: Page::STATUS.map { |s| [s.humanize, s] }, prompt: '- Select page status -' %>
      <div class="form-actions">
        <%= f.button :submit, :class => 'btn btn-primary' %>
        <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                    pages_path, :class => 'btn' %>
      </div>
  </div>

<% end %>

<% end %> 
```

问题是当提交按钮在`content_for`块内时，它不会在单击时更新表单。如果我在这个块之外有按钮，它就可以工作。

有什么办法可以让它在内部工作以`content_for`阻止？我需要它在边栏中。

期望结果的图片：![在此处输入图像描述](https://i.stack.imgur.com/5itnO.png)

任何提示，答案或有用的评论表示赞赏:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:54:18.717

我自己找到了答案。

通过将表单元素放入侧边栏，当然会将表单字段呈现在表单标签之外。（在页面底部，侧边栏的其余部分通过应用程序布局呈现）。

这会导致表单域未附加到表单。

我的解决方案是删除`content_for`块并在这种情况下以部分形式处理侧边栏。

# c# - MVVM 动态 DataGrid 排序 过滤

> ID：16200622
> 
> 赞同：2
> 
> 时间：2013-04-24T19:31:22.927
> 
> 标签：c#, wpf, mvvm, datagrid, filtering

我有一个`DataGrid`每隔几秒钟通过`Thread`. `DataGrid`需要提供列标题排序、分组和过滤。

我目前有一个`DataGrid`绑定到 a`ICollectionView`的来源`ICollectionView`是一个`ObservableCollection`. 从我在其他线程上阅读的内容来看，这似乎是一个好方法。

排序“有效”，但在`ICollectionView.Source`更新`ObservableCollection`. 我尝试`SortDescriptions`在更新前保存并在更新完成后将其重新添加到`ICollectionView`。但结果是一样的。

有人可以指出我所缺少的吗？

**编辑这里有一些代码......**

查看 (XAML)

```
<DataGrid ItemsSource="{Binding CollectionView, Source={StaticResource ViewModel}}> 
```

视图模型

```
public ICollectionView CollectionView
{
    get
    {
        collectionViewSource.Source = dataColl;
        if (SortDescriptions != null)
        {
            foreach (SortDescription sd in SortDescriptions)
            {
                collectionViewSource.View.SortDescriptions.Add(sd);
            }
        }
        collectionViewSource.View.Refresh();
        return collectionViewSource.View;
    }
}

public ObservableCollection<SomeObject> DataColl
{
    get { return dataColl; }
    private set 
    {
        this.dataColl= value;
        OnPropertyChanged("CollectionView");
    }
} 
```

以下是每隔几秒更新一次数据的方法...

```
private void UpdateData()
{
    while (true)
    {
        System.Threading.Thread.Sleep(mDataRefreshRate);

        // SortDescriptions is a Property of the ViewModel class.
        SortDescriptions = collectionViewSource.View.SortDescriptions;

        ObservableCollection<SomeObject> wDataColl
           = new ObservableCollection<SomeObject>();

        //... Irrelevant code that puts the data in wDataColl ...

        DataColl= wDataColl;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T20:09:03.310

```
[YourObservableCollection].ViewHandler.View.Filter
                    += new FilterEventHandler(myFilterHandler);

private void myFilterHandler(object sender, FilterEventArgs e)
{
} 
```

可用于直接添加您的过滤器处理程序，您可以`SortDescriptions`对添加/删除执行相同操作

```
[YourObservableCollection].ViewHandler.View.SortDescriptions.Add(mySortDescription); 
```

如果您正在分配排序和过滤，最好创建自己的类来封装 CollectionViewSource 并实现添加、删除`SortDescriptions`和过滤等

当你说：

> 排序“有效”但当 ICollectionView.Source 在 ObservableCollection 更新后更新时它会丢失

你说的更新是什么意思？你的意思是你正在改变源？而不是从集合中添加/删除项目？

**根据您添加的 XAML 示例进行编辑：**

```
<DataGrid ItemsSource="{Binding CollectionView, Source={StaticResource ViewModel}}> 
```

您正在将 itemsource 绑定到 CollectionViewSource，您应该将 datacontext 绑定到它：

例子：

```
<Page.Resources>
    <CollectionViewSource x:Key="myViewSource"
          Source="{Binding CollectionView, Source={StaticResource ViewModel}}"
    />
</Page.Resources> 
```

在页面中：

```
<Grid DataContext="{StaticResource myViewSource}">

        <DataGrid x:Name="myGrid"  ItemsSource="{Binding}"... 
```

或类似的规定

**再次编辑没有看到代码向下滚动：p**

```
ObservableCollection<SomeObject> wDataColl= new ObservableCollection<SomeObject>(); 
```

您每次收集时都会创建新实例，这是主要问题

还：

```
public ICollectionView CollectionView
{
    get
    {
        collectionViewSource.Source = dataColl;
        if (SortDescriptions != null)
        {
            foreach (SortDescription sd in SortDescriptions)
            {
                collectionViewSource.View.SortDescriptions.Add(sd);
            }
        }
        collectionViewSource.View.Refresh();
        return collectionViewSource.View;
    }
} 
```

在这里您返回集合，您正在设置`Source`并添加`SortDescriptions`并每次刷新视图，您只需要设置一次这些值

如果您添加/删除，您只会在视图上调用刷新`SortDescriptions`

我认为您应该掌握[CollectionViewSource的基础知识](http://msdn.microsoft.com/en-us/library/ms613527.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T21:25:15.543

问题是每次添加新数据时都会换掉整个 ObservableCollection。

```
 ObservableCollection<SomeObject> wDataColl= new ObservableCollection<SomeObject>();

    ... Unrelevant code that puts the data in wDataColl ...

    DataColl= wDataColl; 
```

确保使用 Add to the existing collection 代替（`Clear()`如果有必要，可能在第一次使用之后）...如果之后仍有问题，请发表评论，我会尽力提供帮助。

另外，尽量避免使用它，`Refresh()`因为它会重建整个视图并且不必要地昂贵。如果您进行排序、添加、删除等操作，则不需要使用 Refresh() 的正确方法。

# php - PHP - Smarty 模板 - 如何创建与上下文无关的模板

> ID：16200624
> 
> 赞同：0
> 
> 时间：2013-04-24T19:31:24.477
> 
> 标签：php, html, templates, view, smarty

我已经开始学习 Smarty 模板引擎，希望它能让我用 PHP 内置模板做我很难做的事情，但我遇到了类似的问题。

假设我想创建可重用的 HTML 代码片段，例如手风琴菜单。我的模板看起来像：

手风琴.tpl：

```
<div class="Accordion">

    {foreach from=$entries item=entry}

    <div class="AccordionEntry">
        <div class="AccordionTab">
            {$entry.tab}
        </div>
        <div class="AccordionContent">
            {$entry.content}
        </div>
    </div>

    {/foreach}

</div> 
```

该模板将检索在控制器部分分配的变量“条目”：

```
$smarty = new Smarty();

$smarty->assign('entries', [
    ['tab' => 'tab_00', 'content' => 'content_00'],
    ['tab' => 'tab_01', 'content' => 'content_01'],
    ['tab' => 'tab_02', 'content' => 'content_02']
]);

$smarty->display('Accordion.tpl'); 
```

这将正常工作。但是，如果我想在多个地方重复使用这个手风琴模板怎么办？数据可以这样分配：

```
$smarty->assign('leftMenuEntries', [
    ['tab' => 'tab_00', 'content' => 'content_00'],
    ['tab' => 'tab_01', 'content' => 'content_01'],
    ['tab' => 'tab_02', 'content' => 'content_02']
]);

$smarty->assign('rightMenuEntries', [
    ['tab' => 'tab_00', 'content' => 'content_00'],
    ['tab' => 'tab_01', 'content' => 'content_01'],
    ['tab' => 'tab_02', 'content' => 'content_02']
]); 
```

这是我的问题：模板“Accordion.tpl”将始终从变量“entries”中检索数据，但这里我使用“leftMenuEntries”和“rightMenuEntries”，所以显然它会失败。由于两个手风琴不一定有相同的条目，我被迫将这些条目分配给两个不同的变量。

请问我该怎么做才能使这项工作一起工作？

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T20:53:09.463

当您`{include}`从另一个模板中获取一个模板时，您可以“传入”变量以在该模板中使用（有点像函数参数）。因此，如果您有一个页面布局的整体模板，呈现为 eg `$smarty->display('Homepage.tpl')`，您可以在其中有多个手风琴，如下所示：

```
{* pull entries out of $entries, as nothing else specified *}
{include file=Accordion.tpl}

{* pull entries out of $leftMenuEntries, which will be named as $entries inside the included file *}
{include file=Accordion.tpl entries=$leftMenuEntries}

{* the same, but this time we "pass in" $rightMenuEntries *}
{include file=Accordion.tpl entries=$rightMenuEntries} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T20:03:41.610

不确定我是否理解正确，但是如果您想多次使用具有相同模板样式的数据，而不分配新变量并显示到新模板，您可以仅使用此 div 创建 Accordion.tpl，并将其包含在每个您想要数据的模板。

```
{include file='Accordion.tpl'} 
```

* * *

在上述情况下，它将检索具有相同名称的变量，如果它分配给主模板，则不会分配给 Accordion.tpl

但是，如果问题的核心在于覆盖数组，我在 PHP.net 的 array_merge 主题中发现：

```
<?php
// you have two arrays:

array1 = array (['0'] =>"blahblupp",
                        ['1'] => "bluppblah" );

array2 = array (['0'] =>"tirili",
                        ['1'] => "tralala" );

// and want following as a result:

result = array (['0'] =>"blahblupp",
                      ['1'] => "bluppblah",
                      ['2'] =>"tirili",
                      ['3'] => "tralala" );

// following function does the addition:

function array_add($array1, $array2)
{
    $result = $array1;
    $h = sizeof($array1);
    for ($i = 0; $i < sizeof($array2); $i++)
    {
        $result[$h] = $array2[$i];
        $h++;
    }

    return $result;
}
?> 
```

如果仍然不是您的情况，我将尝试找到另一种解决方案

# dojo - 道场 - 不要重复自己

> ID：16200626
> 
> 赞同：0
> 
> 时间：2013-04-24T19:31:30.370
> 
> 标签：dojo, hide, slideshow, show, dry

有没有一种更简单的方法可以在 dojo 中编写这样的东西（而不是为我想要显示或隐藏的每件事都提供一个函数）？我知道必须有办法避免这种重复，但我不知道该怎么做。

```
on(dom.byId("thing_toggle2"), "click", function(){
    if(thing_list2.style.display == "none") {
        thing_list2.style.display = "block";
        dom.byId("toggle2_sign").innerHTML = "(-)";
    } else {
        thing_list2.style.display = "none";  
        dom.byId("toggle2_sign").innerHTML = "(+)";   
    };
});

on(dom.byId("thing_toggle3"), "click", function(){
    if(thing_list3.style.display == "none") {
        thing_list3.style.display = "block";
        dom.byId("toggle3_sign").innerHTML = "(-)";
    } else {
        thing_list3.style.display = "none";  
        dom.byId("toggle3_sign").innerHTML = "(+)";   
    };
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:59:15.440

我没有对此进行测试，但它应该为您提供一个起点。添加一个额外的部分，只需要添加到数据数组中。

```
var fnToggle = function(nodeMap) {
    var expand = domStyle.get(dom.byId(nodeMap.contentNode), 'display') == 'none';
    domStyle.set(dom.byId(nodeMap.contentNode), 'display', expand ? 'block' : '');
    html.set(dom.byId(nodeMap.expandoNode), expand ? '+' : '-');
};

var nodes = [
  { eventNode: 'thing_toggle2', contentNode: thing_list2, expandoNode: 'toggle2_sign' },
  { eventNode: 'thing_toggle3', contentNode: thing_list3, expandoNode: 'toggle3_sign' }
];

array.forEach(nodes, function(nodeMap) {
    on(dom.byId(nodeMap.eventNode), "click", function(){ fnToggle(nodeMap); });
});

// domStyle -> dojo/dom-style
// html     -> dojo/html
// array    -> dojo/_base/array 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T21:53:09.093

您可以使用使用[dojo/_base/fx.fadeOut](https://dojotoolkit.org/reference-guide/1.8/dojo/_base/fx.html#dojo-base-fx-fadeout)和[dojo/_base/fx.fadeIn的 dojo/](https://dojotoolkit.org/reference-guide/1.8/dojo/_base/fx.html#dojo-base-fx-fadein) [fx /Toggler](https://dojotoolkit.org/reference-guide/1.8/dojo/fx/Toggler.html#dojo-fx-toggler)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T20:51:47.223

实际上，我决定将其作为一个普通的旧 javascript 函数来执行，我可以在其他地方重用它，包括可能不需要 dojo 的页面。像这样的东西：

```
<a href="#" onclick="javascript:showlayer('myName');return false;">[1]</a>
<a href="#" onclick="javascript:showlayer('anothername');return false;">[2]</a>

<div id="myName" style="display:none;">Antonio</div>
<div id="anothername" style="display:none;">Elliot</div>

<script type="text/javascript">
function showlayer(layer){
var myLayer = document.getElementById(layer).style.display;
if(myLayer=="none"){
    document.getElementById(layer).style.display="block";
    } else {
    document.getElementById(layer).style.display="none";
};

}
</script> 
```

# c# - 如何使用 MSChart 制作饼状图？

> ID：16200627
> 
> 赞同：1
> 
> 时间：2013-04-24T19:31:30.750
> 
> 标签：c#, winforms, .net-3.5, mschart

我已经下载了 MS Chart 示例，并在图库中显示了一个“3DPieInPie.png”，这是我想要的 - 但看不到任何创建它的代码！

![在此处输入图像描述](https://i.stack.imgur.com/TquO6.png)

大概是`ChartType = SeriesChartType.Pie`......但是否有另一个设置指定我想要第二个馅饼？以及如何输入第二组数据？- 我尝试添加一个新系列，但似乎被忽略了。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T20:41:25.893

看看这些答案。它们还包括一些示例代码：

[http://social.msdn.microsoft.com/Forums/en-US/MSWinWebChart/thread/54b4dbb7-1622-4798-8b6a-ef4f01e48c31/](http://social.msdn.microsoft.com/Forums/en-US/MSWinWebChart/thread/54b4dbb7-1622-4798-8b6a-ef4f01e48c31/)

[http://support2.dundas.com/default.aspx?article=1115](http://support2.dundas.com/default.aspx?article=1115)

[http://support2.dundas.com/Default.aspx?article=1114](http://support2.dundas.com/Default.aspx?article=1114)

# wordpress - API 搜索本地热门视频

> ID：16200634
> 
> 赞同：1
> 
> 时间：2013-04-24T19:31:53.390
> 
> 标签：wordpress, youtube, youtube-api, youtube-javascript-api

尝试制作一个本地热门视频的视频博客，从 Youtube 的 API 中提取并发布与休斯顿相关的热门视频。

如果我只是用休斯顿这个词来查询最近的视频，我会得到一些没有人看过的汽车视频、一些惠特尼休斯顿的视频和一些有趣的本地上传视频。

对更好的参数有什么建议吗？我可以更具体地了解 Youtube 趋势吗？Youtube 趋势博客让我可以搜索休斯顿的热门视频，但似乎没有 API……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T05:23:30.690

我不确定目前是否有一种方法可以通过最近*在*休斯顿或休斯顿地区流行的 API 获取视频，但是获取*有关*休斯顿的最新视频的一个想法是使用 API v3 中的 topicId 字段——使用 Freebase主题比简单的关键字搜索产生更多语义相关的结果。例如，此查询（您必须通过 oAuth 身份验证才能进行此调用）：

获取[https://www.googleapis.com/youtube/v3/search?part=snippet&topicId=%2Fm%2F03l2n](https://www.googleapis.com/youtube/v3/search?part=snippet&topicId=%2Fm%2F03l2n)

（/m/0312n 是休斯顿市的 Freebase 主题 ID）将返回休斯顿现场音乐会、休斯顿咖啡和汽车系列等的视频。如果您要收集一系列您认为观众会的 Freebase ID如果您对（运动队、当地美食等）感兴趣，您可以汇总您的结果并按日期或查看次数对其进行排序。

# html - 为什么有些图片在某些浏览器中不显示，而其他类似大小和文件的照片却显示？

> ID：16200640
> 
> 赞同：0
> 
> 时间：2013-04-24T19:32:07.967
> 
> 标签：html

我建立了一个网站[http://charlottemobiletrainers.com](http://charlottemobiletrainers.com)，索引页面上的主徽标使用 Chrome 显示给我，但在 Safari 中没有显示，并且在任何浏览器的笔记本电脑上都没有显示给我的朋友。照片是“.gif”，我将文件更改为“.png”，只是想看看是否有任何改变，但没有帮助。然后我尝试重命名文件，因为我最初在其中使用了“_”，但这没有帮助。我不知道还能尝试什么。

该图像当前位于我的 style.css 文件中。这可能是问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:43:03.737

一开始你的布局就很奇怪。我会这样做：

```
<div id="featured">
  <div class="left">
<h3>Mobile Personal Trainers</h3>
<p>Are you ready for summertime in Charlotte? Let Mobile Trainers help you look and  feel your best with a personalized workout program <i>JUST FOR YOU!</i> Our personal trainers will go wherever you want whenever you want. Let's get started!</p>
     <input type="button" value="Get Started!" onclick="parent.location='contact.html'">
 </div>
 <div class="right">
     <img src="logo.png" width="blah" height="blah" alt=""/>
 </div> 
```

然后将#feature 设置为您想要的宽度和高度，然后将类 .right 设置为徽标的任何宽度，并将剩余宽度设置为 .left 类。

# c# - 加载到项目集合中的所有工件必须具有相同的版本。遇到多个版本

> ID：16200644
> 
> 赞同：5
> 
> 时间：2013-04-24T19:32:20.380
> 
> 标签：c#, .net, entity-framework, c#-4.0

当我尝试访问 .edmx 中的视图时出现此错误：

```
All artifacts loaded into an ItemCollection must have the same version. Multiple versions were encountered. 
```

这是产生错误的代码：

```
private IQueryable<daDialogNotes.viewDialogNotesAll> GetAuthorizedList()
    {            
        List<int> authorizedClients = al.GetClientIds();            

        daDialogNotes.NTS2001Entities context = new daDialogNotes.NTS2001Entities();

        IQueryable<daDialogNotes.viewDialogNotesAll> m;
        m = context.viewDialogNotesAlls.Where(x => (authorizedClients.Contains(x.Client_Id))).AsQueryable(); 
        // error in line above          

        return m;
    } 
```

这是我的观点的图像：

![在此处输入图像描述](https://i.stack.imgur.com/4rpT2.jpg)

提供者的 App.config：

```
 <?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="NTS2001Entities" connectionString="metadata=res://*/DialogNotes.csdl|res://*/DialogNotes.ssdl|res://*/DialogNotes.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=NTS-UAT;initial catalog=NTS2001;persist security info=True;user id=*******;password=*********;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
</configuration> 
```

我在所有东西上运行 .net 4.5。edmx 在另一个项目文件中，我在我的应用程序中引用了 dll。谷歌搜索我发现人们在从 .net 3.5 升级到 4.0 时遇到此错误，但这一直在 4.5 上运行。

有任何想法吗？

# c# - 数据集更改未在 SQL Server 数据库中更新

> ID：16200650
> 
> 赞同：0
> 
> 时间：2013-04-24T19:32:52.787
> 
> 标签：c#, sql-server, dataset

我已经通过设计器创建了一个数据集，并且能够很好地检索数据。在对其他数据进行一些更新后，我需要更改原始行中的状态。我已经搜索了 StackOverflow 和 MSDN，我想我已经尝试了所有建议 - 没有运气。

```
AFEDataSetTableAdapters.AFE_allTableAdapter taAFEAll = new AFEDataSetTableAdapters.AFE_allTableAdapter();
AFEDataSet.AFE_allDataTable dtAFEAll = new AFEDataSet.AFE_allDataTable();
taAFEAll.Fill(dtAFEAll, sAFENumber);
if (dtAFEAll.Count != 1)
{
    // error condition - should only ever be one row
}
DataRow drAFE = dtAFEAll.Rows[0]; 
```

// ...如果一切顺利...

```
if (...successful...)
{
    drAFE.BeginEdit();
    drAFE["AFEStatus"] = "Published";
    drAFE.EndEdit();
    try
    {
        drAFE.AcceptChanges();
        int iTemp = taAFEAll.Update(dsAFE.AFE_all);
    }
    catch (Exception ex)
    {
        sMessage = ex.Message.ToString();
    }
} 
```

我在有和没有 BeginEdit、EndEdit、AcceptChanges 的情况下都试过了；没变。调用该`.Update`方法时，我可以看到（在调试中）drAFE 的 ItemArray 显示了 AFEStatus 的更改值。然而，更新返回一个零，并且数据库没有改变。

我在 DataSetDesigner 后面的代码中进行了验证，并且 AFE_all 表定义了一条更新语句。

我哪里做错了？或者，我还缺少什么步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:41:56.680

您需要删除此行

```
 drAFE.AcceptChanges(); 
```

AcceptChanges() 方法将 DataRow 的状态“更改”为未更改，因此当您调用 Update 时，没有要保存的行。

[来自 MSDN](http://msdn.microsoft.com/en-us/library/system.data.dataset.acceptchanges.aspx)

> 当您在 DataSet 上调用 AcceptChanges 时，任何仍处于编辑模式的 DataRow 对象都会成功结束其编辑。每个 DataRow 的 RowState 属性也会发生变化；添加和修改的行变为未更改，删除的行被删除

# sql - Oracle SQL 创建视图无效标识符

> ID：16200652
> 
> 赞同：0
> 
> 时间：2013-04-24T19:32:57.317
> 
> 标签：sql, oracle, view

我需要创建视图，我基本上必须组合三个表才能查看上次验证联系人的时间。这是我到目前为止的代码：

```
CREATE VIEW P_PHONECONTACT_VERIFICATION_V AS
SELECT OW.LASTNAME, OW.FIRSTNAME, OW.EMAIL, 
       OP.PHONE_CONTACTID, OP.PHONENUM, OP.PHONETYPE, 
       OC.LAST_DATE_VERIFIED AS VERIFIED_ON
  FROM P_OWNER OW 
  LEFT JOIN P_OWNERCONTACT OC 
            ON OW.OWNERID = OC.OWNERID
  LEFT JOIN P_OWNERPHONE OP
            ON OC.CONTACTID = OP.PHONE_CONTACTID
WHERE VERIFIED_ON IS NULL OR 
      VERIFIED_ON > SYSDATE-365
ORDER BY LASTNAME; 
```

我不断收到此错误，无法弄清楚原因。

```
Error at Command Line:10 Column:7
Error report:
SQL Error: ORA-00904: "VERIFIED_ON": invalid identifier
00904\. 00000 -  "%s: invalid identifier"
*Cause:    
*Action: 
```

如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:59:33.553

您`verified_on`在`where`子句中使用。我认为您需要`last_date_verified`：

```
CREATE VIEW P_PHONECONTACT_VERIFICATION_V AS
SELECT 
OW.LASTNAME, OW.FIRSTNAME, OW.EMAIL, 
OP.PHONE_CONTACTID, OP.PHONENUM, OP.PHONETYPE, 
OC.LAST_DATE_VERIFIED AS VERIFIED_ON
FROM P_OWNER OW LEFT JOIN P_OWNERCONTACT OC 
ON OW.OWNERID = OC.OWNERID
LEFT JOIN P_OWNERPHONE OP
    ON OC.CONTACTID = OP.PHONE_CONTACTID
WHERE OC.LAST_DATE_VERIFIED IS NULL OR 
OC.LAST_DATE_VERIFIED > SYSDATE-365
ORDER BY LASTNAME; 
```

您不能在子句中使用在`select`子句中定义的列别名`where`。

# google-maps-api-3 - Google Maps API V3 从数组中删除标记

> ID：16200653
> 
> 赞同：1
> 
> 时间：2013-04-24T19:33:03.483
> 
> 标签：google-maps-api-3

我正在使用下面的代码将标记添加到地图它还有一个侦听器来从地图中删除标记，但我无法弄清楚如何在从地图中删除标记的同时从标记数组中删除标记.

有人可以告诉我如何实现这一目标。

```
function createRedMarker(Lat, Lang, html, atitle) {
    var latlng = new google.maps.LatLng(Lat, Lang);
    var marker = new google.maps.Marker({
        position: latlng,
        map: map,
        title: atitle,
        icon: redmarker,
        shadow: mshadow
    });

    google.maps.event.addListener(marker, "rightclick", function() {
        if (confirm("Deselect " + marker.title + " and remove from Map?")) {
            marker.setMap(null);
            window.status = "Deselected>" + marker.title + "<";
        }
    });

    markersArray.push(marker);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T21:49:11.663

请看一下这个解决方案。希望这会有所帮助。

```
function createRedMarker(Lat, Lang, html, atitle) {
    var latlng = new google.maps.LatLng(Lat, Lang);
    var marker = new google.maps.Marker({
        position: latlng,
        map: map,
        title: atitle,
        icon: redmarker,
        shadow: mshadow
    });

    google.maps.event.addListener(marker, "rightclick", function() {
        if (confirm("Deselect " + marker.title + " and remove from Map?")) {
            marker.setMap(null);
            for (var i = 0; i < markers.length; i++) {
                if (markers[i].getPosition().equals(marker.getPosition())) {
                    var index = markers.indexOf(marker);
                    markers.splice(index, 1);
                    break;
                }
            }
            window.status = "Deselected>" + marker.title + "<";
        }
    });

    markersArray.push(marker);
} 
```

# macos - Mac App 因窗口空白而被拒绝

> ID：16200660
> 
> 赞同：0
> 
> 时间：2013-04-24T19:33:34.193
> 
> 标签：macos, cocos2d-iphone, appstore-approval

我最新的 Mac 应用程序被拒绝，原因如下：“当用户启动应用程序时，主应用程序窗口显示为空白。请参阅随附的屏幕截图。”

这是屏幕截图（基本上是一个空白的白色 mac 窗口）： http: [//freecloud.com/dl/TPBlank.png](http://freecloud.com/dl/TPBlank.png)

该应用程序（使用 Cocos2D）在我的开发机器上运行良好。我什至将我提交给 Apple 的确切二进制文件作为 Mac 安装程序包导出，并将其安装在单独的 iMac 上，并且运行良好。

我在这里真的很茫然。由于我无法重现问题，我不知道如何解决它..

是否有人对可能导致我的 Mac 应用程序显示为 Apple 审阅者但对我没有的空白窗口有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:42:54.997

我以前见过几次这种情况，通常是在 Mac 项目设置不正确的时候。由于它一般都有效，但显然不是在每个系统上都有效，所以我将关注可能导致初始化在某些情况下失败的事情。

当你在另一台机器上测试你的应用程序时，你应该验证的一件事是确保你创建了一个存档版本，而不仅仅是一个常规的调试（或发布）版本。

如果您使用 ARC，请检查所有弱属性和 ivars，因为启用优化后它们的行为可能会有所不同，即分配给弱 ivar，然后将此 ivar 作为子级或数组添加将在 Debug 中工作，但 ivar 将为 nil在发布中，因为没有强引用保持对象。

如果您在简单地捕获所有异常的情况下执行任何异常处理，这也会导致窗口静默变白，而不是使应用程序崩溃（应该是这样）。

# php - 使用 foreach 循环优化遍历数组

> ID：16200661
> 
> 赞同：0
> 
> 时间：2013-04-24T19:33:36.267
> 
> 标签：php, mysql, foreach, where

到目前为止，我一直在 foreach 循环中运行 MySQL 查询，但现在意识到先运行查询然后遍历数组更有效。我想知道我是否可以进一步优化下面的代码——它使用 3 个表中的数据来构建谷歌图表。例如，是否可以在 foreach 循环中添加 where 子句，这样我就不需要在每个循环中包含 if 子句？

```
$begin = new DateTime(date('Y-m-d', strtotime('-28 days')));
$end = new DateTime(date('Y-m-d', strtotime('+1 day')));
$interval = DateInterval::createFromDateString('1 day');
$period = new DatePeriod($begin, $interval, $end);

$sessions = $wpdb->get_results($wpdb->prepare("SELECT Due,Date from patient_sessions WHERE Type='Session'"));
$work_times = $wpdb->get_results($wpdb->prepare("SELECT Amount,Date from work_times"));
$expenses = $wpdb->get_results($wpdb->prepare("SELECT Amount,Date from expenses WHERE Client='Psychotherapy'"));

foreach ( $period as $dt ) {

    $session_total = 0;
    $work_time_total = 0;
    $expense_total = 0;

    $date = $dt->format("Y-m-d");
    $date_display = $dt->format("D j M");

    foreach ($sessions as $session) {
       if (substr($session->Date,0,10) === $date) {
          $session_total = ($session_total+$session->Due);
       }
    }

    foreach ($work_times as $work_time) {
       if ($work_time->Date === $date) {
          $work_time_total = ($work_time_total+$work_time->Amount);
       }
    }

    foreach ($expenses as $expense) {
       if ($expense->Date === $date) {
          $expense_total = ($expense_total+$expense->Amount);
       }
    }

    $balance = ($session_total + $work_time_total - $expense_total);

    $temp = array();

    $temp[] = array('v' => (string) $date_display); 
    $temp[] = array('v' => (string) $balance); 
    $rows[] = array('c' => $temp);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-28T08:30:09.433

你只需要做好 MySQL 查询。

见[这里](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-types.html)。

你可以做加法、减法和类似的事情`date BETWEEN x AND Y`，你可以`SELECT SUM()`用 a做 a[`GROUP BY`](http://dev.mysql.com/doc/refman/5.0/fr/group-by-modifiers.html)等等。

哈坎的意思（我猜）是你做错了：你应该首先做一个查询，让几乎所有的工作都为你工作。没必要开发这么复杂的东西。

以及其他三个建议：

*   尽量避免使用 PHP 中的关键字，例如`$expense->Date`. 这会导致语法高亮问题（在*最好*的情况下，在*最坏*的情况下， Php 不会理解您的代码）。
*   在您的代码中添加更多注释以解释您要执行的操作。
*   尽量避免在 PHP **AND** SQL 查询中使用关键字。您有一个名为“ `Date`”的列和一个名为“ ”的列`Type`。这是不安全的。

这只是您的 SQL 的一个开始，它几乎应该涵盖 95% 的代码。注意：这是一个建议：让所有数据库服务器为您完成这项工作，这是为此而设计的：

```
SELECT
    ps.Due,ps.Date,
    wt.Amount,wt.Date,
    ex.Amount,ex.Date

LEFT JOIN patient_sessions ps
    ON xxx
    WHERE ps.Type='Session'
    AND ps.Date
        BETWEEN DATE_ADD(NOW(), INTERVAL '-28' DAY)
        AND     DATE_ADD(NOW(), INTERVAL 1 DAY)
LEFT JOIN work_times wt
    ON xxx
LEFT JOIN expenses ex
    ON xxx
    WHERE ex.Client='Psychotherapy' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T22:04:38.800

为什么不让数据库为你做 if 呢？我的意思是，将日期标准添加到 WHERE 语句中。

# r - 如何向量化对 R 中相邻向量元素的访问？

> ID：16200667
> 
> 赞同：9
> 
> 时间：2013-04-24T19:33:56.057
> 
> 标签：r

我有以下向量

```
 v = c(F, F, F, T, F, F, F, F, F, T, F, F, F) 
```

如何使用矢量化操作更改 v 以便每个 v TRUE 元素的前 2 个元素和以下 2 个元素也设置为 TRUE？也就是说，结果应该是：

```
 F, T, T, T, T, T, F, T, T, T, T, T, F 
```

当然，这可以通过在每个 v 元素上循环来完成，但我想了解是否可以对这种操作进行矢量化。也不同于[这个问题](https://stackoverflow.com/questions/7153586/can-i-vectorize-a-calculation-which-depends-on-previous-elements)， v 中的元素是独立的，我不需要对每个元素执行计算。这是一个纯粹的索引问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T19:43:35.010

这种*事情*可能与您将要得到的一样矢量化：

```
v[unlist(sapply(which(v),function(x) {x + c(-2,-1,1,2)},simplify = FALSE))] <- TRUE
> v
 [1] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE 
```

但请注意，您尚未指定 TRUE 元素在向量末端附近应该发生什么。那将需要更多的工作。如果有两个 TRUE 元素彼此之间的距离小于两个位置，您也没有指定会发生什么。

或者：

```
v[outer(which(v),c(-2,-1,1,2),"+")] <- TRUE
> v
 [1] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE 
```

在基本层面上，我们在这里做同样的事情，但第二个选项肯定更紧凑，虽然可能更难理解。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T02:08:34.187

迟到了...你应该应用**卷积过滤器**。它会比什么都快。唯一的困难是在两端你应该预先/附加一对`FALSE`，这样过滤器就不会用`NA`s 初始化。这是一个可以为您完成的功能：

```
within.distance <- function(x, d = 2) {
    xxx  <- c(rep(FALSE, d), x, rep(FALSE, d))
    yyy  <- as.logical(filter(xxx, rep(1, 2*d+1)))
    head(tail(yyy, -d), -d)
}

within.distance(v)
#  [1] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE TRUE FALSE 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-24T20:31:01.263

这是另一个尝试。它似乎适用于您的数据，并且当第一个元素为 TRUE 时也是如此。

```
as.logical(rowSums(embed(c(FALSE, FALSE, v, FALSE, FALSE), 5)))
#  [1] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE

# another attempt with beginning and end TRUE
v = c(T, F, F, F, F, F, T, F, F, F, F, F, T)
#  [1]  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE 
```

* * *

类似于@flodel 的想法，可以在这里创建一个函数：

```
rollOR <- function(vec, dir="both", dist=2) {
    stopifnot(dir %in% c("left", "right", "both"))
    stopifnot(dist >= 0)
    stopifnot(is.logical(vec))

    cvec <- rep(FALSE, dist)
    switch(dir, 
        both = {
            vec <- c(cvec, vec, cvec)
            dist <- dist * 2 + 1
        }, 
        left = {
            vec <- c(vec, cvec)
            dist <- dist + 1
        },
        right = {
            vec <- c(cvec, vec)
            dist <- dist + 1
        })

    as.logical(rowSums(embed(vec, dist)))
}   
# direction both sides
rollOR(v, "both", 2)
# [1] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE

# left alone
rollOR(v, "left", 2)
# [1] FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE

# right alone
rollOR(v, "right", 2)
# [1] FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T03:07:43.523

还有另一种方法。创建一组滞后向量，并将`or`它们组合在一起：

```
library(Hmisc)
library(functional)
within.distance <- function(x, d=2) {
  FLag <- function(x, shift) {
    x <- Lag(x, shift)
    x[is.na(x)] <- FALSE
    return(x)
  }

  l <- lapply((-d):d, Curry(FLag, x=x))
  return(Reduce(`|`, l))
} 
```

# bash - 要在远程服务器上使用的导出变量

> ID：16200669
> 
> 赞同：0
> 
> 时间：2013-04-24T19:33:59.950
> 
> 标签：bash, unix, ssh

我正在我的主机上导出一个变量，例如：

```
export TOPICS="A B C" 
```

然后，我想通过 ssh 在远程机器上使用 TOPICS 变量，例如：

```
ssh user@remoteHost <<EOF
  for word in $TOPICS; do
  ./modify.sh $word
  done
exit
EOF 
```

一旦我 ssh 到远程主机上，就无法再看到 TOPICS 中的值。有没有办法通过 ssh 命令导出变量？我尝试在 EOF 前后加上单引号，以及在 < < EOF 之前和 EOF 之后，但都没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:49:14.510

通过在 $word 前面添加 '\' n 脚本可以正确执行，感谢@Adrian Pronk

# php - PHP计算2个不同日期之间的天数

> ID：16200671
> 
> 赞同：-3
> 
> 时间：2013-04-24T19:34:02.137
> 
> 标签：php, mysql

您好，感谢您的帮助。我在mysql中有一个表，有2列（date1），（date2）。我想找到这两天之间的日子，并通过php计算每天10美元的价格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:38:07.083

干得好：

```
$dt1 = new DateTime("@{$date1}");
$dt2 = new DateTime("@{$date2}");
$interval = $dt1->diff($dt2);
$price = 10 * $interval->d; 
```

这假设您将日期保存`$date1`为`$date2`unix 时间戳

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:39:42.530

尝试这个..

```
<?php
     $first_date = strtotime("2013-04-10");
     $last_date = strtotime("2013-04-01");
     $datediff = $first_date - $last_date;
     echo "Days : ". floor($datediff/(60*60*24))."<br>";
     echo "Price : $". (floor($datediff/(60*60*24)))*10;
?> 
```

**输出**

```
Days : 9
Price : $90 
```

# java - 如何在 Spring 3 中上传图像并将 JSON 发布到 RESTful Web 服务

> ID：16200676
> 
> 赞同：0
> 
> 时间：2013-04-24T19:34:26.917
> 
> 标签：java, spring, rest, jakarta-ee, spring-mvc

我正在尝试将 JSON 实体和图像发布到我的 Web 服务。但是我无法让它工作。最后一个错误是请求不是多部分请求。

```
@RequestMapping(method = RequestMethod.POST)
public ResponseEntity savePerson(@RequestPart("data") final PersonResource personResource, @RequestPart("image") MultipartFile imageFile) { ... } 
```

卷曲

```
$ curl -H "Content-Type: application/json" -X POST -F 'data={"name":"Tes
t"}' -F "image=@C:\Users\LuckyLuke\Downloads\test.jpg;type=image/jpg" localhost:8080/myapp/persons 
```

我误解了`@RequestPart`注释的用法吗？请求错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:32:30.317

As far as I can see you are using @RequestMapping in a proper way. My guess is that you are geting error since you are enforcing application/json content type (-H "Content-Type: application/json"). Try to run your program without that header (-F option should take care of setting multipart/form-data request).

# mysql - mySQL Force Not Null 使用 Query 或 phpMyAdmin

> ID：16200681
> 
> 赞同：1
> 
> 时间：2013-04-24T19:34:39.037
> 
> 标签：mysql, notnull

我将 XAMP 与 mySQL 和 phpMyAdmin 一起使用。

我似乎无法弄清楚如何在我的管理员的 php 中将列设置为 NOT NULL ..

我该怎么做呢？

有没有一种快速的方法可以在 mySQL 中将所有列设置为不为空？

我试过：`ALTER TABLE flights CHANGE FlightID NOT NULL;`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:41:08.970

您只需要发出这样的 ALTER TABLE 语句：

```
ALTER TABLE table_name
MODIFY column_name [data type] NOT NULL,
MODIFY column_name_2 [data type] NOT NULL,
...
MODIFY column_name_x [data type] NOT NULL 
```

请注意，`[data type]`这当然是您的列的数据类型（即`VARCHAR(255)`或其他）

只需在此单个语句中列出您要修改的所有列。

# ruby - Ruby 定义类变量

> ID：16200684
> 
> 赞同：0
> 
> 时间：2013-04-24T19:34:43.297
> 
> 标签：ruby, oop, class

我去了[这个页面](http://www.tutorialspoint.com/ruby/ruby_class_case_study.htm)来了解 Ruby 类。该页面上的代码是这样的：

```
class Customer
   @@no_of_customers=0
   def initialize(id, name, addr)
      @cust_id=id
      @cust_name=name
      @cust_addr=addr
   end
   def display_details()
      puts "Customer id #@cust_id"
      puts "Customer name #@cust_name"
      puts "Customer address #@cust_addr"
   end
   def total_no_of_customers()
      @@no_of_customers += 1
      puts "Total number of customers: #@@no_of_customers"
   end
end 
```

我理解`@@`意味着类变量，但我不明白如何在`initialize`方法（构造函数）中创建变量并在另一个方法中使用它，就好像它是类变量一样。这怎么可能？如果您可以在构造函数中定义类变量，那么定义类变量有什么意义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T19:50:36.080

如果我正确理解了您的问题（如果不是，请发表评论），您会问为什么我们通常不在构造函数中定义类变量。

在上面的代码示例中，`@@no_of_customers`类变量未在构造函数中定义，因为该类的所有成员都可以访问它，并且它会跟踪客户的数量。所以，如果我们的构造函数看起来像这样：

```
def initialize(id, name, addr)
  @@no_of_customers=0
  @cust_id=id
  @cust_name=name
  @cust_addr=addr
end 
```

`0`每次有人定义该类的新实例时，我们都会覆盖该变量。更合适的类定义如下所示：

```
class Customer
  @@no_of_customers=0
  def initialize(id, name, addr)
    @@no_of_customers += 1
    @cust_id=id
    @cust_name=name
    @cust_addr=addr
  end
  ...
end 
```

因此，在我们实例化任何对象之前，类变量`@@no_of_customers`被初始化为零。然后每次我们创建一个新对象时，我们都会增加它。

当然，在这个例子中使用类变量的原因是：

*   将客户数量与客户封装在一起而不使用某些全局变量是有意义的

*   因为它附属于客户类，所以外部世界无法修改它并使其具有与它应有的含义不同的含义，或者用它做一些意想不到的事情。

这就是说，这有点像“不要和陌生人一起玩”的规则。

**`@`对比`@@`**

在`@`ruby​​ 中用作前缀时，表示该变量是实例变量。

当`@@`被使用时，这意味着它是一个类变量。

如果您不知道，这里有一篇关于[这些之间区别](http://www.railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/)的好文章。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T19:49:36.603

我认为您混淆了类 (@@) 和实例 (@) 变量。在 Ruby 中，类变量更像是 C++ 中的静态类变量，而实例变量就像 C++ 中的常规类变量：

```
class Test
    @@cvar = 1
    def initialize
        @ivar = 0
    end
end 
```

或多或少等同于（对不起，我的 C++ 生锈了）：

```
class Test {
    public:
        Test() : ivar(0) {}
    private:
        static int cvar;
        int ivar;
};
int Test::cvar = 1; 
```

# c++ - 将 if/assign 转换为线程安全的 CAS 操作

> ID：16200685
> 
> 赞同：2
> 
> 时间：2013-04-24T19:34:44.140
> 
> 标签：c++, lock-free

我在使用 CAS 指令方面完全是新手，所以很抱歉回答这么简单的问题，但我必须了解基本的东西

那么是否有可能将此代码转换为一些 CAS 指令以使此代码线程安全？

```
if (a == 0) {
    a = 1;
    return true;
} else {
    return false;
} 
```

在现实生活中，这段代码如下所示：

```
// 0 - available, 1 - processing, 2 - ready
uint16_t status[QUEUE_LENGTH];

bool MsgQueue::Lock(uint32_t msgSeqNum)
{
    if (status[msgSeqNum] == 0) {
        status[msgSeqNum] = 1;
        return true;
    } else {
        return false;
    }
} 
```

我更喜欢便携式解决方案（可以在 Windows 和 Linux 上运行），也许我应该使用`std::atomic`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:36:55.800

这正是 CAS 正在做的事情，是的。C ++ 11 具有`std::atomic`和它的`compare_exchange_weak`和`compare_exchange_strong`为此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T19:40:27.250

```
std::atomic<uint16_t> status[QUEUE_LENGTH];

bool MsgQueue::Lock(uint32_t msgSeqNum)
{
    uint16_t expected = 0;
    return status[msgSeqNum].compare_exchange_strong(expected, 1);
} 
```

[在此处](http://en.cppreference.com/w/cpp/atomic/atomic)查看有关 std::atomic的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T19:40:01.830

你做

```
std::atomic<int> a;

int expected = 0;
return a.compare_exchange_strong(expected, 1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T19:47:05.373

如果您使用的是 gcc，那么您可能需要[__sync_val_compare_and_swap](http://gcc.gnu.org/onlinedocs/gcc-4.1.1/gcc/Atomic-Builtins.html)

```
type __sync_val_compare_and_swap (type *ptr, type oldval type newval, ...) 
```

“这些内置函数执行原子比较和交换。也就是说，如果 *ptr 的当前值为 oldval，则将 newval 写入 *ptr。”

# html - 为什么我们在 DTD 和其他地方需要“实体”

> ID：16200686
> 
> 赞同：0
> 
> 时间：2013-04-24T19:34:46.370
> 
> 标签：html, xml, entity, dtd

我不明白为什么我们需要`!Entities`DTD 以及 HTML 之类的标记。

例如，我看到一个实体定义为`<!ENTITY copy "©">`.

如果我们可以清楚地使用`©`符号，为什么我们在标记中使用它时需要使用实体？为什么不像我们在这里那样直接输入呢？

是不是每个键盘上都没有某些符号？如果是这样，那么当每个键盘都有一个＆符号时，为什么我们有一个＆符号实体。

还有一个问题 - 如何在 & 实体的定义中使用 & 符号！

如果有人能为我解决所有这些困惑，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:54:51.233

假设您想避免到处都是丑陋的 CDATA 部分，您需要一个实体 for `<`，因为它在 XML 中具有特殊含义。鉴于您首先需要实体并且它们以 开头`&`，因此您还需要一个实体。然后，您需要有一种方法将两者都`'`放入`"`属性值中，因此您至少需要一个实体用于其中一个。

除此之外，如果您需要以只能传输 Unicode 子集的编码传输数据，您可能需要实体（当然不一定要命名，数字就可以）。Unicode 编码（例如 UTF-8）在您可以使用时非常有用，但在“现实世界”中可能并不总是一种选择。

那么，实体也不一定代表单个字符。例如，您可以让您的 XML 文件包含一些您一遍又一遍地拥有的文本块，方法是在 DTD 中定义它们并在文件本身中添加`&legalBlurp;`或。`&logo;`将此类信息放在一个地方进行更改是一件好事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T20:22:06.797

浏览器实际上并不读取 DTD。理论上，它们可以，并且在处理 XML 文档时实际上可能会这样做，但 HTML 规范中的实体定义实际上只是描述浏览器应该知道的内置符号的一种方式。当然，XML 处理器可能会读取 DTD，但我想那是另一回事了。

所以这归结为一个问题，为什么我们会使用实体*引用*，如`&copy;`. 以下是可能的原因列表：

1.  使用非 Unicode 字符编码时，您需要使用实体引用或字符引用（如`&#xa9;`）来表示直接可表示范围之外的所有字符。
2.  您可能希望使用实体引用，因为您没有直接输入字符的便捷方式。很多时候，人们这样做只是因为他们懒得去学习一种输入特殊字符的方法。
3.  有些字符是不可见的或看起来像一个空格。字符串“1 234”（有一个不间断空格）大部分显示方式与“1 234”（有一个正常空格）相同，所以写作`1&nbsp;234`会更清楚地表明有一个不间断空格。
4.  有些字符很难从视觉上与其他可能更常见的字符区分开来。你看到“-”和“-”之间的区别了吗？在 HTML 源代码中使用`&minus;`和`&ndash;`使差异更加突出。
5.  至少在某些情况下，当要作为数据字符出现时，*必须*使用实体引用或字符引用来编写一些字符。这适用于`<`and`&`和（带有属性值）到`"`and `'`。

关于`&copy;`，几乎总是只有原因 2 可能适用。

& 符号有一个实体，因为它打开了一个实体或字符引用，所以当它用作数据字符时，它本身可能需要被“实体化”。在 HTML 规范中，它被正式定义为

```
<!ENTITY amp     CDATA "&#38;"> 
```

所以没有歧义或永恒的循环：实体，就像在 HTML 中定义的所有实体一样，是根据字符引用定义的，它使用数字。

# ios - 隐藏在没有任何 NavigationController 的情况下创建的导航栏

> ID：16200687
> 
> 赞同：0
> 
> 时间：2013-04-24T19:34:47.040
> 
> 标签：ios, objective-c, uinavigationcontroller, uinavigationbar

我要疯了！我需要隐藏没有创建的导航栏`navigation controller`（我不知道你如何以及为什么可以这样做）。
![在此处输入图像描述](https://i.stack.imgur.com/cqNQg.png)

我曾尝试为 uinavigationbar 创建一个出口，然后将其隐藏，但每次我这样做时，uinavigationbar 出口都是`null`.

**已解决**：

```
 controller = [self.storyboard instantiateViewControllerWithIdentifier:@"TermsStoryboard"];

            for(UIView *subView in controller.view.subviews)
            {
                if([subView isKindOfClass:[UINavigationBar class]])
                {
                    [subView setHidden:YES];

                    NSLog(@"Navigation Bar Found!");
                }
            } 
```

# php - Python 2.7：如何构建 getter/setter 函数以在不继承的情况下访问类属性？

> ID：16200690
> 
> 赞同：1
> 
> 时间：2013-04-24T19:35:01.730
> 
> 标签：php, python, oop, getter, getter-setter

这可能是一个超级小问题，抱歉。我试图在 Python 中实现我熟悉的 PHP 效果，它正在为私有属性构建 getter 和 setter 函数。

在 PHP 中，我通常会这样做：

```
<?php
class newClass() {
    private $var = null;

    function newClass($initVal) {
        //init
    }

    public function get($var) {
        if ( isset($this->$var) ) {
            return $this->$var;
        }
    }
}
?> 
```

但是，在 Python 中尝试相同的想法：

```
class newClass():
    def __init__(self, initVal):
        self.__nameOfVar1 = initVal
        self.__nameOfVar2 = initVal

    def get(self, var):
                #assuming, when called, var = nameOfVar1
        if self.__var:
            return self.__var 
```

引发错误`AttributeError:'newClass' object has no attribute '__var'`

完全正确的是，事实并非如此。如何构建 getter 和 setter 函数来访问私有属性？

* * *

**更新：**

我留下了最初的问题，因为对于 Python 的新手来说，了解他们可能不小心提出的其他语言的哪些约定似乎很有用。但实际上，我最初的问题有点不同，在试图使问题更普遍时，我混淆了我的实际需求。所以这里有一个修正：

事实上，我并没有使用私有属性。事实上，我正在处理试图通过组合环境向下传递属性。IE：

`Class A`，作为一个属性，有一个`Class B`不继承自 的对象`Class A`。几乎从来没有`Class B`需要任何信息的情况，但是在我的项目中，有`Class A`一种情况，如果用户选择不向`Class B`需要从中获取信息`Class A`，通常情况下，它永远不需要。

我可以建立`Class B`始终拥有这些信息，但这意味着我几乎总是在浪费时间和记忆（尽管它可能是微不足道的）。为了具体化，想象一下：

`toothbrush`已经`bristles`并且`bristles`可以在用户提供首选的刷牙体验的情况下，创建许多适合“软”或“硬”刷子的刷毛。但是，如果用户不提供这个，那么我想`bristles`询问`brush`它的表面积，让它猜测一个平均数应该是多少。

我想出了这个，尽管我直觉 Python 程序员会因此而讨厌我；我只是想了解原因：

```
@staticmethod
def request(self, var):
    appIndex = self.__dict__
    if appIndex[var]:
        return appIndex[var]

print Class.request(instance, var) 
```

像魅力一样工作，但我认为这是 Python 的异端。*为什么？*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T19:39:21.770

您正在寻找的是[`properties`](http://docs.python.org/3.3/library/functions.html#property)：

```
class Foo():
    def __init__(self):
        self._spam = 0

    @property
    def spam(self):
        print("in the getter: ")
        return self._spam

    @spam.setter
    def spam(self, move):
        print("in the setter: ")
        self._spam = move + self._spam

f = Foo()
f.spam = 2
print(f.spam) 
```

输出：

```
in the setter: 
in the getter: 
2 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T19:44:20.677

嗯，首先，Python 没有私有变量。您指的是名称修改。目的是在导入模块时防止名称冲突。每当您在一个类中编写一个前面有两个非下划线的变量时，该类的名称就会添加到它的前面。因此，最好将变量命名为“ `__var__`”，这是python“私有”事物的自定义。

然而，另一方面，在 python 中，如果您希望某些人能够设置和获取变量，通常只允许直接访问是最有意义的（与 Java 或其他语言不同）。

# asp-classic - 在经典asp中解压缩文件

> ID：16200691
> 
> 赞同：2
> 
> 时间：2013-04-24T19:35:19.263
> 
> 标签：asp-classic, vbscript, unzip, fso

我正在尝试使用解压缩/压缩类。上传后我需要解压缩一个 zip 文件。我修改了“睡眠”功能以检查每个 intSeconds 值的“控制器”功能，并添加了“控制器”功能来检查目标文件夹上的文件计数。您可以在下面看到代码部分。

使用此功能成功解压缩 zip 文件，但页面进度永无止境。我需要在使用此功能后重新启动 iis。

原始代码：[Class CompressedFolder](http://forums.aspfree.com/code-bank-54/class-creating-compressed-folders-natively-258394.html)

```
<%
    Set objShell = CreateObject("Shell.Application")
    Set objFso   = CreateObject("Scripting.FileSystemObject")

    Function ExtractAll(strZipFile, strFolder)
        If Not objFso.FolderExists(strFolder) Then objFso.CreateFolder(strFolder)
        intCount = objShell.NameSpace(strFolder).Items.Count
        Set colItems = objShell.NameSpace(strZipFile).Items
        objShell.NameSpace(strFolder).CopyHere colItems, 8
        Sleep 5000,strFolder,intCount + colItems.Count
    End Function        

    function controller(path,filesCountMust)
       dim stat:stat=False
       set fold = objFso.getFolder(path)
       set files = fold.files
       if filesCountMust=files.count then
          stat=True
       end if
       set files = nothing 
       set fold = nothing
       controller=stat
    end function

    Sub Sleep(intSeconds,path,filesCountMust)
        dblSeconds = intSeconds / 1000
        If dblSeconds < 1 Then dblSeconds = 1
        dteStart = Now()
        dteEnd = DateAdd("s", dblSeconds, dteStart)  
        do While dteEnd>=Now()
           if dteEnd=Now() then
              if controller(path,filesCountMust)=true then 
                 exit do
              else
                 Sleep intSeconds,path,filesCountMust
              end if
           end if
        loop
    End Sub

    Set objShell = Nothing
    Set objFso   = Nothing 
```

%>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T16:20:42.100

这条线是问题

```
if dteEnd=Now() then 
```

只有当 dteEnd与 Now()*完全相同*（到毫秒）时，它才能进入控制器部分并走向出口，它不会并进入递归循环（回到睡眠功能）

试试这个：

```
do While dteEnd>=Now()
   if dteEnd>=Now() then
      if controller(path,filesCountMust)=true then 
         exit do
      else
         Sleep intSeconds,path,filesCountMust
      end if
   end if
loop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-06T22:57:07.783

我还没有尝试过，但鉴于我在同一个搜索结果中找到了这个 Stack Overflow 问题和 github 解决方案。我认为这可能是解决您问题的好方法。

[https://github.com/rcdmk/aspZip](https://github.com/rcdmk/aspZip)

# android - 使用签名的 .apk 时无法实例化活动

> ID：16200692
> 
> 赞同：0
> 
> 时间：2013-04-24T19:35:19.710
> 
> 标签：android

如果我使用未签名的 .apk，我的应用程序运行良好但是，如果我在设备中使用已签名的 .apk（要上传到 Google Play 的那个）对其进行测试，它会抛出以下错误。这是正常的，还是我做错了什么。

```
E/AndroidRuntime( 6613): FATAL EXCEPTION: main
E/AndroidRuntime( 6613): java.lang.RuntimeException: Unable to instantiate activ
ity ComponentInfo{com.myapp/com.myapp.myappActivity}: java.lang.ClassNo
tFoundException: com.mapp.myappActivity in loader dalvik.system.PathClass
Loader[/system/framework/com.google.android.maps.jar:/data/app/com.myapp-2.ap
k]
E/AndroidRuntime( 6613):        at android.app.ActivityThread.performLaunchActiv
ity(ActivityThread.java:1573)
E/AndroidRuntime( 6613):        at android.app.ActivityThread.handleLaunchActivi
ty(ActivityThread.java:1667)
E/AndroidRuntime( 6613):        at android.app.ActivityThread.access$1500(Activi
tyThread.java:117)
E/AndroidRuntime( 6613):        at android.app.ActivityThread$H.handleMessage(Ac
tivityThread.java:935)
E/AndroidRuntime( 6613):        at android.os.Handler.dispatchMessage(Handler.ja
va:99)
E/AndroidRuntime( 6613):        at android.os.Looper.loop(Looper.java:130)
E/AndroidRuntime( 6613):        at android.app.ActivityThread.main(ActivityThrea
d.java:3687)
E/AndroidRuntime( 6613):        at java.lang.reflect.Method.invokeNative(Native
Method)
E/AndroidRuntime( 6613):        at java.lang.reflect.Method.invoke(Method.java:5
07)
E/AndroidRuntime( 6613):        at com.android.internal.os.ZygoteInit$MethodAndA
rgsCaller.run(ZygoteInit.java:867)
E/AndroidRuntime( 6613):        at com.android.internal.os.ZygoteInit.main(Zygot
eInit.java:625)
E/AndroidRuntime( 6613):        at dalvik.system.NativeStart.main(Native Method)

E/AndroidRuntime( 6613): Caused by: java.lang.ClassNotFoundException: com.castva
st.myappActivity in loader dalvik.system.PathClassLoader[/system/framework/co
m.google.android.maps.jar:/data/app/com.myapp-2.apk]
E/AndroidRuntime( 6613):        at dalvik.system.PathClassLoader.findClass(PathC
lassLoader.java:240)
E/AndroidRuntime( 6613):        at java.lang.ClassLoader.loadClass(ClassLoader.j
ava:551)
E/AndroidRuntime( 6613):        at java.lang.ClassLoader.loadClass(ClassLoader.j
ava:511)
E/AndroidRuntime( 6613):        at android.app.Instrumentation.newActivity(Instr
umentation.java:1021)
E/AndroidRuntime( 6613):        at android.app.ActivityThread.performLaunchActiv
ity(ActivityThread.java:1565)
E/AndroidRuntime( 6613):        ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:50:15.450

这个的大写看起来很奇怪`com.myapp/com.myapp.myappActivity`

您的班级名称至少应以大写字母开头：`MyappActivity`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:39:43.630

您是否在 Manifest 中注册了活动？该错误表明缺少 Manifest 注册 - 我可能会添加非常常见的错误。仅通过更改签名证书不会引发此类错误。

**编辑**

检查您的项目属性并确保您的构建路径包括：

```
system/framework/com.google.android.maps.jar 
```

# php - 下面代码的含义

> ID：16200694
> 
> 赞同：-3
> 
> 时间：2013-04-24T19:35:32.883
> 
> 标签：php

我只是想问一下这段代码是什么意思？我知道这段代码连接到数据库，它的意思是显示 `$error[count($error)]`和它在一个数组中。但由于某种原因，错误不会出现

```
function query($iquery, &$error)
    {
        $connection = get_connection($error);
        if ($connection) {
            $result =  mysql_query($iquery, $connection);
            if (!$result)
                $error[count($error)] = "Query '$iquery' failed" + mysql_error();
        }
        return $result;
    } 
```

特别是这条线的含义：

```
$error[count($error)] = "Query '$iquery' failed" + mysql_error(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:48:32.343

这是函数声明，它接受一个变量来保存一个被调用的查询`$iquery`，它通过 BY REFERENCE 传递，一个包含名为的变量的错误`$error`

```
 function query($iquery, &$error)
        { 
```

这将连接到数据库，并将连接存储在名为的变量中`$connection`

```
 $connection = get_connection($error); 
```

这将检查连接是否成功，如果是，则在其中运行代码

```
 if ($connection) { 
```

这将在运行后捕获查询的结果

**注意**`mysql_query()`不应再使用此功能。

```
 $result =  mysql_query($iquery, $connection); 
```

这部分检查查询是否成功完成，如果没有，它会向已通过引用传递的数组添加一个错误，因此它将使用 MySQL 生成的错误`$error`更新已传递给函数的原始数组。`query($iquery, &$error)`

```
 if (!$result)
                $error[count($error)] = "Query '$iquery' failed" + mysql_error();
        } 
```

然后该函数返回它从查询中收到的内容，在查询错误的情况下为 NULL。

```
 return $result;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:38:35.140

由于`&$`，错误数组是通过引用传递的。你问的那一行：

```
$error[count($error)] = "Query '$iquery' failed" + mysql_error(); 
```

`query()`...然后使用在调用where 之后可以访问的数据更新该数组

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T19:39:38.113

它只是尝试运行查询并返回查询资源。如果有错误，它会将其添加到数组中。

# java - 如何使用 arcobject (Arcgis 10) 构建 java 桌面应用程序？

> ID：16200695
> 
> 赞同：0
> 
> 时间：2013-04-24T19:35:40.390
> 
> 标签：java, swing, awt, arcgis, arcobjects

我尝试使用 Arcgis 构建 Java 独立应用程序

我已经为 java 平台安装了 Arcgis Desktop 10 和 ArcObject SDK

我只是试着开始..

所以我用这个[教程](http://edndoc.esri.com/arcobjects/9.1/ArcGISDevHelp/DevelopmentEnvs/Java/GettingStarted_Eng.htm)

然后我从我的 arcgis 安装中包含库 arcobjects.jar

C:\Program Files (x86)\ArcGIS\Desktop10.0\java\lib\arcobjects.jar

进入我的 netbeans 项目

然后我写这个（类似于教程）

```
package gis;

import com.esri.arcgis.beans.globe.GlobeBean;
import com.esri.arcgis.system.AoInitialize;
import com.esri.arcgis.system.EngineInitializer;
import com.esri.arcgis.system.esriLicenseProductCode;
import java.awt.BorderLayout;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.io.IOException;
import javax.swing.JFrame;

    public class Gis {

        public static void main(String[] args) throws IOException{
             EngineInitializer.initializeVisualBeans();
             new AoInitialize().initialize(esriLicenseProductCode.esriLicenseProductCodeEngine);
             JFrame jFrame = new JFrame("Hello, Sphere!");
             jFrame.setSize(300, 300);
             jFrame.getContentPane().add(new GlobeBean(), BorderLayout.CENTER);
             jFrame.addWindowListener(new WindowAdapter() {
                 public void windowClosing(WindowEvent e) {
                     try {
                         new AoInitialize().shutdown();
                         System.exit(0);
                     }
                     catch (IOException ex) {
                         System.out.println(ex.getMessage());
                         System.exit(1);
                     }
                 }
             });
             jFrame.setVisible(true);
        }
    } 
```

它的错误..输出是

```
Could not load native libraries. 
```

我的问题 ：

1.  如何使它正确？

2.  如何使用 arcgis 构建 java 独立应用程序？（以及我需要什么样的 arcgis 技术？）

    *   我已经凝视了 2 天，但我仍然无法弄清楚

    *   我已经去他们的论坛了.. 但是很难找到胎面帖子页面。所以我最终到了这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-06T04:24:40.377

您使用的是 64 位 JRE/JDK 吗？如果是这样，请在为 ArcGIS Engine 或 Desktop 构建 Java AO 应用程序时使用 32 位 JRE/JDK。64 位 JRE/JDK 可用于构建 ArcGIS Server 的扩展。

谢谢！阿吉特

# css - 没有背景颜色的 Bootstrap Hero 单元

> ID：16200696
> 
> 赞同：0
> 
> 时间：2013-04-24T19:35:58.760
> 
> 标签：css, twitter-bootstrap

你能告诉我如何制作一个没有背景颜色的 Bootstrap Hero 单位吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:38:20.203

**CSS**

```
.hero-unit{
    background-color: rgba(0, 0, 0, 0); // use rgba and set Opacity to 0 for transparent.
 } 
```

[工作 JSFiddle](http://jsfiddle.net/MgcDU/7879/)

# php - 根据 PHP 中输 入的字符操作单个字符串

> ID：16200697
> 
> 赞同：0
> 
> 时间：2013-04-24T19:35:58.723
> 
> 标签：php, arrays, string, character

我想知道如何在 PHP 中操作字符串中的单个字符。我已经搜索了所有内容，找不到任何可以回答此类问题的内容。我想获取一个使用输入表单提交的字符串，例如，“这是一个句子”，然后创建一个输出，该输出获取每个单词的第一个字符并将其放在该单词的末尾：“hist si一个句子”。我假设第一步是获取字符串并使用explode（）将其转换为数组，但我真的很困惑如何执行实际操作？这里的任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:38:46.317

您应该考虑`preg_match`使用正则表达式： http: [//php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

然后，您可以将匹配项存储到数组中并操作字符串。

```
$string = "this is a sentence";

$regex = '/<insert regex here>/'; // Regex expert edit here please  

preg_match($regex, $string, $matches)
// Uses regex against string and stores matches
// into $matches <-- that is optional but in your case you want to use it for manipulation

var_dump($matches); // Play with results 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T20:10:55.577

我知道正则表达式应该是要走的路，但我只是觉得这很有趣，所以这里是：

```
 $string = "this is a sentence";
    $stringArray = explode(" ", $string);

    $messedSentence = "";
    foreach($stringArray as $word)
    {
        $word = trim($word);
        $firstChar = substr($word,0,1);
        $lastChar = substr($word,strlen($word)-1,1);
        $restOfWord = substr($word,1,strlen($word)-2);

        if(trim($word)) 
        {
            $messedSentence .= (strlen($word)==1)?$firstChar." ":$lastChar.$restOfWord.$firstChar. " ";
        }
    }

    echo $string ." becomes: ".$messedSentence; 
```

# magento - Magento：捆绑未添加到购物车

> ID：16200699
> 
> 赞同：9
> 
> 时间：2013-04-24T19:36:13.370
> 
> 标签：magento, bundle, shopping-cart, checkout

我制作了一个自定义 Magento 扩展，它允许捆绑产品类型与“父”捆绑产品相关联。

例如，如果我正在销售计算机零件，并且我创建了一堆简单的产品类型（例如，键盘、鼠标、显示器等），并且我创建了一个捆绑产品，该产品捆绑了一个键盘和一个可以与 Magento 兼容的鼠标。必须提供开箱即用的服务。如果我创建了另一种捆绑产品类型，但这次我想捆绑我刚刚制作的捆绑产品（带有键盘和鼠标的产品），我不能这样做。所以我所做的是创建一个扩展，允许我将捆绑的项目与捆绑产品相关联。

`Company`我在“本地”和下创建了一个新的扩展（我称之为）

## `app/code/local/Company/etc/config.xml`

```
<?xml version="1.0"?>
<config>
    <global>
        <blocks>
            <bundle>
                <rewrite>
                    <adminhtml_catalog_product_edit_tab_bundle_option_search_grid>Company_Bundle_Block_Adminhtml_Catalog_Product_Edit_Tab_Bundle_Option_Search_Grid</adminhtml_catalog_product_edit_tab_bundle_option_search_grid>
                    <adminhtml_catalog_product_composite_fieldset_options_type_checkbox>Company_Bundle_Block_Adminhtml_Catalog_Product_Composite_Fieldset_Options_Type_Checkbox</adminhtml_catalog_product_composite_fieldset_options_type_checkbox>
                    <catalog_product_view_type_bundle_option_checkbox>Company_Bundle_Block_Catalog_Product_View_Type_Bundle_Option_Checkbox</catalog_product_view_type_bundle_option_checkbox>                
                </rewrite>
            </bundle>
        </blocks>
        <models>
            <bundle>
                <rewrite>
                    <product_type>Company_Bundle_Model_Product_Type</product_type>
                </rewrite>
            </bundle>
            <bundle_resource>
                <rewrite>
                    <option_collection>Company_Bundle_Model_Resource_Option_Collection</option_collection>
                </rewrite>
            </bundle_resource>
        </models>
        <catalog>
            <product>
                <type>
                    <bundle translate="label" module="bundle">
                        <label>Bundle Product</label>
                        <model>bundle/product_type</model>
                        <composite>1</composite>
                        <allowed_selection_types>
                            <simple/>
                            <bundle/>
                            <virtual/>
                        </allowed_selection_types>
                        <price_model>bundle/product_price</price_model>
                        <index_data_retreiver>bundle/catalogIndex_data_bundle</index_data_retreiver>
                        <index_priority>40</index_priority>
                        <price_indexer>bundle/indexer_price</price_indexer>
                        <stock_indexer>bundle/indexer_stock</stock_indexer>
                    </bundle>
                </type>
                <options>
                    <bundle>
                        <types>
                            <select translate="label" module="bundle">
                                <label>Drop-down</label>
                            </select>
                            <radio translate="label" module="bundle">
                                <label>Radio Buttons</label>
                            </radio>
                            <checkbox translate="label" module="bundle">
                                <label>Checkbox</label>
                            </checkbox>
                            <multi translate="label" module="bundle">
                                <label>Multiple Select</label>
                            </multi>
                        </types>
                    </bundle>
                </options>
            </product>
        </catalog>
    </global>
</config> 
```

## `app/code/local/Company/Bundle/Block/Adminhtml/Catalog/Product/Edit/Tab/Bundle/Option/Search/Grid.php`

```
<?php

class Company_Bundle_Block_Adminhtml_Catalog_Product_Edit_Tab_Bundle_Option_Search_Grid extends Mage_Bundle_Block_Adminhtml_Catalog_Product_Edit_Tab_Bundle_Option_Search_Grid
{
    protected function _prepareCollection()
    {
        $collection = Mage::getModel('catalog/product')->getCollection()
            ->setStore($this->getStore())
            ->addAttributeToSelect('name')
            ->addAttributeToSelect('sku')
            ->addAttributeToSelect('price')
            ->addAttributeToSelect('attribute_set_id')
            ->addAttributeToFilter('type_id', array('in' => $this->getAllowedSelectionTypes()))
            //->addFilterByRequiredOptions() OVERRIDE!
            ->addStoreFilter();

        if ($products = $this->_getProducts()) {
            $collection->addIdFilter($this->_getProducts(), true);
        }

        if ($this->getFirstShow()) {
            $collection->addIdFilter('-1');
            $this->setEmptyText($this->__('Please enter search conditions to view products.'));
        }

        Mage::getSingleton('catalog/product_status')->addSaleableFilterToCollection($collection);

        $this->setCollection($collection);

        return Mage_Adminhtml_Block_Widget_Grid::_prepareCollection();
    }

    protected function _prepareColumns()
    {
        $this->addColumn('id', array(
            'header'    => Mage::helper('sales')->__('ID'),
            'sortable'  => true,
            'width'     => '60px',
            'index'     => 'entity_id'
        ));
        $this->addColumn('name', array(
            'header'    => Mage::helper('sales')->__('Product Name'),
            'index'     => 'name',
            'column_css_class'=> 'name'
        ));

        $sets = Mage::getResourceModel('eav/entity_attribute_set_collection')
            ->setEntityTypeFilter(Mage::getModel('catalog/product')->getResource()->getTypeId())
            ->load()
            ->toOptionHash();

        $this->addColumn('set_name',
            array(
                'header'=> Mage::helper('catalog')->__('Attrib. Set Name'),
                'width' => '100px',
                'index' => 'attribute_set_id',
                'type'  => 'options',
                'options' => $sets,
        ));
        $this->addColumn('type',
            array(
                'header'=> Mage::helper('catalog')->__('Type'),
                'width' => '60px',
                'index' => 'type_id',
                'type'  => 'options',
                'options' => Mage::getSingleton('catalog/product_type')->getOptionArray(),
        ));

        $this->addColumn('sku', array(
            'header'    => Mage::helper('sales')->__('SKU'),
            'width'     => '80px',
            'index'     => 'sku',
            'column_css_class'=> 'sku'
        ));
        $this->addColumn('price', array(
            'header'    => Mage::helper('sales')->__('Price'),
            'align'     => 'center',
            'type'      => 'currency',
            'currency_code' => $this->getStore()->getCurrentCurrencyCode(),
            'rate'      => $this->getStore()->getBaseCurrency()->getRate($this->getStore()->getCurrentCurrencyCode()),
            'index'     => 'price'
        ));

        $this->addColumn('is_selected', array(
            'header_css_class' => 'a-center',
            'type'      => 'checkbox',
            'name'      => 'in_selected',
            'align'     => 'center',
            'values'    => $this->_getSelectedProducts(),
            'index'     => 'entity_id',
        ));

        $this->addColumn('qty', array(
            'filter'    => false,
            'sortable'  => false,
            'header'    => Mage::helper('sales')->__('Qty to Add'),
            'name'      => 'qty',
            'inline_css'=> 'qty',
            'align'     => 'right',
            'type'      => 'input',
            'validate_class' => 'validate-number',
            'index'     => 'qty',
            'width'     => '130px',
        ));

        return Mage_Adminhtml_Block_Widget_Grid::_prepareColumns();
    }
} 
```

## `app/code/local/Company/Bundle/Block/Adminhtml/Catalog/Product/Composite/Fieldset/Options/Type/Checkbox.php`

```
<?php

class Company_Bundle_Block_Adminhtml_Catalog_Product_Composite_Fieldset_Options_Type_Checkbox
    extends Mage_Bundle_Block_Adminhtml_Catalog_Product_Composite_Fieldset_Options_Type_Checkbox
{
    /**
     * Set template
     *
     * @return void
     */
    protected function _construct()
    {
        $this->setTemplate('Company/bundle/list.phtml');
    }

    /**
     * @param  string $elementId
     * @param  string $containerId
     * @return string
     */
    public function setValidationContainer($elementId, $containerId)
    {
        return '<script type="text/javascript">
            $(\'' . $elementId . '\').advaiceContainer = \'' . $containerId . '\';
            </script>';
    }
} 
```

## `app/code/local/Company/Bundle/Block/Catalog/Product/View/Type/Bundle/Option/Checkbox.php`

```
<?php

class Company_Bundle_Block_Catalog_Product_View_Type_Bundle_Option_Checkbox
    extends Mage_Bundle_Block_Catalog_Product_View_Type_Bundle_Option_Checkbox
{
    /**
     * Set template
     *
     * @return void
     */
    protected function _construct()
    {
        $this->setTemplate('bundle/catalog/product/view/type/bundle/option/list.phtml');
    }
} 
```

## `app/code/local/Company/Bundle/Model/Product/Type.php`

```
 <?php
class Company_Bundle_Model_Product_Type extends Mage_Bundle_Model_Product_Type
{
    /**
     * Checking if we can sale this bundle
     *
     * @param Mage_Catalog_Model_Product $product
     * @return bool
     */
    public function isSalable($product = null)
    {
        $salable = Mage_Catalog_Model_Product_Type_Abstract::isSalable($product);
        if (!is_null($salable)) {
            return true; /* OVERRIDE! */
        }

        $optionCollection = $this->getOptionsCollection($product);

        if (!count($optionCollection->getItems())) {
            return false;
        }

        $requiredOptionIds = array();

        foreach ($optionCollection->getItems() as $option) {
            if ($option->getRequired()) {
                $requiredOptionIds[$option->getId()] = 0;
            }
        }

        $selectionCollection = $this->getSelectionsCollection($optionCollection->getAllIds(), $product);

        if (!count($selectionCollection->getItems())) {
            return false;
        }
        $salableSelectionCount = 0;
        foreach ($selectionCollection as $selection) {
            if ($selection->isSalable()) {
                $requiredOptionIds[$selection->getOptionId()] = 1;
                $salableSelectionCount++;
            }

        }

        return (array_sum($requiredOptionIds) == count($requiredOptionIds) && $salableSelectionCount);
    }

    /**
     * Retrive bundle selections collection based on used options
     *
     * @param array $optionIds
     * @param Mage_Catalog_Model_Product $product
     * @return Mage_Bundle_Model_Mysql4_Selection_Collection
     */
    public function getSelectionsCollection($optionIds, $product = null)
    {
        $keyOptionIds = (is_array($optionIds) ? implode('_', $optionIds) : '');
        $key = $this->_keySelectionsCollection . $keyOptionIds;
        if (!$this->getProduct($product)->hasData($key)) {
            $storeId = $this->getProduct($product)->getStoreId();
            $selectionsCollection = Mage::getResourceModel('bundle/selection_collection')
                ->addAttributeToSelect(Mage::getSingleton('catalog/config')->getProductAttributes())
                ->addAttributeToSelect('tax_class_id') //used for calculation item taxes in Bundle with Dynamic Price
                ->setFlag('require_stock_items', true)
                ->setFlag('product_children', true)
                ->setPositionOrder()
                ->addStoreFilter($this->getStoreFilter($product))
                ->setStoreId($storeId);
                //->addFilterByRequiredOptions() OVERRIDE!
                //->setOptionIdsFilter($optionIds) OVERRIDE!
            if (!Mage::helper('catalog')->isPriceGlobal() && $storeId) {
                $websiteId = Mage::app()->getStore($storeId)->getWebsiteId();
                $selectionsCollection->joinPrices($websiteId);
            }

            $this->getProduct($product)->setData($key, $selectionsCollection);
        }
        return $this->getProduct($product)->getData($key);
    }

    /**
     * Prepare product and its configuration to be added to some products list.
     * Perform standard preparation process and then prepare of bundle selections options.
     *
     * @param Varien_Object $buyRequest
     * @param Mage_Catalog_Model_Product $product
     * @param string $processMode
     * @return array|string
     */
    protected function _prepareProduct(Varien_Object $buyRequest, $product, $processMode)
    {
        $result = Mage_Catalog_Model_Product_Type_Abstract::_prepareProduct($buyRequest, $product, $processMode);

        if (is_string($result)) {
            return $result;
        }

        $selections = array();
        $product = $this->getProduct($product);
        $isStrictProcessMode = $this->_isStrictProcessMode($processMode);

        $skipSaleableCheck = Mage::helper('catalog/product')->getSkipSaleableCheck();
        $_appendAllSelections = (bool)$product->getSkipCheckRequiredOption() || $skipSaleableCheck;

        $options = $buyRequest->getBundleOption();

        if (is_array($options)) {
            $options = array_filter($options, 'intval');
            $qtys = $buyRequest->getBundleOptionQty();
            foreach ($options as $_optionId => $_selections) {
                if (empty($_selections)) {
                    unset($options[$_optionId]);
                }
            }
            $optionIds = array_keys($options);

            if (empty($optionIds) && $isStrictProcessMode) {
                return Mage::helper('bundle')->__('Please select options for product.');
            }

            $product->getTypeInstance(true)->setStoreFilter($product->getStoreId(), $product);
            $optionsCollection = $this->getOptionsCollection($product);
            $selectionIds = array();

            foreach ($options as $optionId => $selectionId) {
                if (!is_array($selectionId)) {
                    if ($selectionId != '') {
                        $selectionIds[] = (int)$selectionId;
                    }
                } else {
                    foreach ($selectionId as $id) {
                        if ($id != '') {
                            $selectionIds[] = (int)$id;
                        }
                    }
                }
            }
            // If product has not been configured yet then $selections array should be empty
            if (!empty($selectionIds)) {
                $selections = $this->getSelectionsByIds($selectionIds, $product);

                // Check if added selections are still on sale
                foreach ($selections->getItems() as $key => $selection) {
                    if (!$selection->isSalable() && !$skipSaleableCheck) {
                        $_option = $optionsCollection->getItemById($selection->getOptionId());
                        if (is_array($options[$_option->getId()]) && count($options[$_option->getId()]) > 1) {
                            $moreSelections = true;
                        } else {
                            $moreSelections = false;
                        }
                        if ($_option->getRequired()
                            && (!$_option->isMultiSelection() || ($_option->isMultiSelection() && !$moreSelections))
                        ) {
                            return Mage::helper('bundle')->__('Selected required options are not available.');
                        }
                    }
                }

                $optionsCollection->appendSelections($selections, false, $_appendAllSelections);

                $selections = $selections->getItems();
            } else {
                $selections = array();
            }           
        } else {
            $product->setOptionsValidationFail(true);
            $product->getTypeInstance(true)->setStoreFilter($product->getStoreId(), $product);

            $optionCollection = $product->getTypeInstance(true)->getOptionsCollection($product);

            $optionIds = $product->getTypeInstance(true)->getOptionsIds($product);
            $selectionIds = array();

            $selectionCollection = $product->getTypeInstance(true)
                ->getSelectionsCollection(
                    $optionIds,
                    $product
                );

            $options = $optionCollection->appendSelections($selectionCollection, false, $_appendAllSelections);

            foreach ($options as $option) {
                if ($option->getRequired() && count($option->getSelections()) == 1) {
                    $selections = array_merge($selections, $option->getSelections());
                } else {
                    $selections = array();
                    break;
                }
            }
        }
        if (count($selections) > 0 || !$isStrictProcessMode) {
            $uniqueKey = array($product->getId());
            $selectionIds = array();

            // Shuffle selection array by option position
            usort($selections, array($this, 'shakeSelections'));

            foreach ($selections as $selection) {
                if ($selection->getSelectionCanChangeQty() && isset($qtys[$selection->getOptionId()])) {
                    $qty = (float)$qtys[$selection->getOptionId()] > 0 ? $qtys[$selection->getOptionId()] : 1;
                } else {
                    $qty = (float)$selection->getSelectionQty() ? $selection->getSelectionQty() : 1;
                }
                $qty = (float)$qty;

                $product->addCustomOption('selection_qty_' . $selection->getSelectionId(), $qty, $selection);
                $selection->addCustomOption('selection_id', $selection->getSelectionId());

                $beforeQty = 0;
                $customOption = $product->getCustomOption('product_qty_' . $selection->getId());
                if ($customOption) {
                    $beforeQty = (float)$customOption->getValue();
                }
                $product->addCustomOption('product_qty_' . $selection->getId(), $qty + $beforeQty, $selection);

                /*
                 * Create extra attributes that will be converted to product options in order item
                 * for selection (not for all bundle)
                 */
                $price = $product->getPriceModel()->getSelectionFinalTotalPrice($product, $selection, 0, $qty);
                $attributes = array(
                    'price'         => Mage::app()->getStore()->convertPrice($price),
                    'qty'           => $qty,
                    'option_label'  => $selection->getOption()->getTitle(),
                    'option_id'     => $selection->getOption()->getId()
                );

                $_result = $selection->getTypeInstance(true)->prepareForCart($buyRequest, $selection);
                if (is_string($_result) && !is_array($_result)) {
                    return $_result;
                }

                if (!isset($_result[0])) {
                    return Mage::helper('checkout')->__('Cannot add item to the shopping cart.');
                }

                $result[] = $_result[0]->setParentProductId($product->getId())
                    ->addCustomOption('bundle_option_ids', serialize(array_map('intval', $optionIds)))
                    ->addCustomOption('bundle_selection_attributes', serialize($attributes));

                if ($isStrictProcessMode) {
                    $_result[0]->setCartQty($qty);
                }

                $selectionIds[] = $_result[0]->getSelectionId();
                $uniqueKey[] = $_result[0]->getSelectionId();
                $uniqueKey[] = $qty;
            }

            // "unique" key for bundle selection and add it to selections and bundle for selections
            $uniqueKey = implode('_', $uniqueKey);
            foreach ($result as $item) {
                $item->addCustomOption('bundle_identity', $uniqueKey);
            }
            $product->addCustomOption('bundle_option_ids', serialize(array_map('intval', $optionIds)));
            $product->addCustomOption('bundle_selection_ids', serialize($selectionIds));

            return $result;
        }

        return $this->getSpecifyOptionMessage();
    }

    /**
     * Retrieve message for specify option(s)
     *
     * @return string
     */
    public function getSpecifyOptionMessage()
    {
        return Mage::helper('bundle')->__('Please specify product option(s).');
    }

} 
```

## `app/code/local/Company/Bundle/Model/Resource/Option/Collection.php`

```
<?php

class Company_Bundle_Model_Resource_Option_Collection extends Mage_Bundle_Model_Resource_Option_Collection
{
    /**
     * Append selection to options
     * stripBefore - indicates to reload
     * appendAll - indicates do we need to filter by saleable and required custom options
     *
     * @param Mage_Bundle_Model_Resource_Selection_Collection $selectionsCollection
     * @param bool $stripBefore
     * @param bool $appendAll
     * @return array
     */
    public function appendSelections($selectionsCollection, $stripBefore = false, $appendAll = true)
    {
        if ($stripBefore) {
            $this->_stripSelections();
        }

        if (!$this->_selectionsAppended) {
            foreach ($selectionsCollection->getItems() as $key => $_selection) {
                if ($_option = $this->getItemById($_selection->getOptionId())) {
                    $_selection->setOption($_option);
                    $_option->addSelection($_selection);
                }
            }
            $this->_selectionsAppended = true;
        }

        return $this->getItems();
    }
} 
```

这应该是一切。有对 LIST.phtml 的引用，但您可以根据需要将其更改为复选框。但是，如果您在捆绑包中添加捆绑包 - 在我将其添加到我的购物车之前它会起作用。任何有关如何解决此问题的帮助将不胜感激？

**更新：** 所以我能够找到为什么我不能将“父”捆绑产品添加到我的购物车中，

```
protected function _prepareProduct(Varien_Object $buyRequest, $product, $processMode) 
```

位于 Type.php 下，我发现该问题可能与

```
public function getSelectionsByIds($selectionIds, $product = null) 
```

因为它不返回“选择”（与具有简单产品类型的捆绑产品相比，不是 null 但没有选择）并且因为它为`getItems()`. 如果我删除

```
->addFilterByRequiredOptions() 
```

从函数`getSelectionsByIds`中，我可以从中取回一些东西，`getItems()`但它会崩溃

```
$_result = $selection->getTypeInstance(true)->prepareForCart($buyRequest, $selection); 
```

. 请帮忙！我只需要以某种方式将此“父”捆绑包添加到我的购物车中，就像普通捆绑产品一样。感谢您的时间！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T21:28:30.020

开箱即用的建议，无需如此复杂的解决方案。我们在 magento 中销售捆绑套件，但我将它们设置为简单产品，并简单地使用相关产品来分配任何类型的产品（在您的情况下是其他捆绑套件或任何其他类型的产品）。我们只需在产品页面中添加一个新块，该块会根据需要显示相关产品，并为其提供套件内容的标题。当用户将商品添加到购物车时，它只是简单的产品。您还可以向购物车页面添加一个块，该块在购物车列表页面上的项目下显示相关项目。从历史上看，我们在使用 magento 和捆绑套​​件时遇到过问题，有时人们如果不删除并重新添加它就无法结帐，而这个解决方案完全解决了这个问题，并为您提供了所需的功能。我们不

# ruby - Ruby File.new `initialize'：没有这样的文件或目录

> ID：16200702
> 
> 赞同：3
> 
> 时间：2013-04-24T19:36:24.497
> 
> 标签：ruby, file

我完全被这个难住了。我正在尝试调试一些创建`FirstRun`文件的代码，作为程序已经完成第一次运行设置的标记。它尝试在`absworkingdir`变量给定的指定工作目录中创建它。但是，当它尝试使用创建文件时`File.new`出现以下错误

``initialize': No such file or directory '`

以下是相关代码：

```
#First run setup
puts workingdir#debug
absworkingdir = File.expand_path(workingdir)
puts absworkingdir#debug
if File.exist?("#{absworkingdir}/FirstRun.lock") == false
    puts "This appears to be the first run of FigShare Sync. We'll setup a few things."
    print "Where would you like to store settings and files? [~./figsharesync]: "
    @input = gets.chomp
    puts @input#debug
        if @input.empty? == false
            workingdir = @input
            absworkingdir = File.expand_path(workingdir)
        end
    print "Please enter OAuth consumer key: "
    consumerkey = gets.chomp
    print "Please enter OAuth consumer key secret: "
    consumersecret = gets.chomp
    print "Please enter OAuth access token: "
    accesstoken = gets.chomp
    print "Please enter OAuth access token secret: "
    accesstokensecret = gets.chomp
    puts "Great! we'll get running now..."
puts absworkingdir#debug
File.new("#{absworkingdir}/FirstRun.lock", "r")
end 
```

这是调试行的输出：

```
~/.figsharesync/                                                                                                                                                                                                                        
/var/lib/stickshift/5165dc1e4382ec92040001a8/app-root/data/.figsharesync                                                                                                                                                                
This appears to be the first run of FigShare Sync. We'll setup a few things.                                                                                                                                                            
Where would you like to store settings and files? [~./figsharesync]:                                                                                                                                                                    

Please enter OAuth consumer key:                                                                                                                                                                                                        
Please enter OAuth consumer key secret:                                                                                                                                                                                                 
Please enter OAuth access token:                                                                                                                                                                                                        
Please enter OAuth access token secret:                                                                                                                                                                                                 
Great! we'll get running now...                                                                                                                                                                                                         
/var/lib/stickshift/5165dc1e4382ec92040001a8/app-root/data/.figsharesync                                                                                                                                                                
source/figsharesync2.rb:38:in `initialize': No such file or directory - /var/lib/stickshift/5165dc1e4382ec92040001a8/app-root/data/.figsharesync/FirstRun.lock(Errno::ENOENT)                                                          
    from source/figsharesync2.rb:38:in `new'                                                                                                                                                                                        
    from source/figsharesync2.rb:38:in `<main>' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T19:42:37.680

你想对 File.new 使用写模式，否则你说你想以读模式打开一个不存在的文件：

```
f = File.new("#{absworkingdir}/FirstRun.lock", "w")
f.close 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:42:12.333

您处于条件为“如果此文件不存在”的 if 块中，然后您尝试打开不存在的文件进行读取。那显然行不通。您可能想打开写作而不是阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T19:42:22.270

您没有`/var/lib/stickshift/5165dc1e4382ec92040001a8/app-root/data/.figsharesync/FirstRun.lock`要打开以供阅读的文件。如果您尝试创建要写入的新文件，则需要使用模式`"w"`(write)，如果文件不存在则创建文件，而不是`"r"`(read)，后者要求文件已经存在。

有关这些模式的更多信息，请参阅[文档](http://www.ruby-doc.org/core-1.9.3/IO.html)。还有[http://www.ruby-doc.org/core-1.9.3/File.html](http://www.ruby-doc.org/core-1.9.3/File.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-12T10:49:47.840

尝试使用 w+ 作为写入模式，而不仅仅是 w：

```
File.open("out.txt", "w+") { |file| file.write("boo!") } 
```

请参阅：[如何在 Ruby 中创建文件](https://stackoverflow.com/questions/7911669/create-file-in-ruby)

# xslt - 是否可以将 xslt 文件拆分为多个文件？

> ID：16200703
> 
> 赞同：1
> 
> 时间：2013-04-24T19:36:24.767
> 
> 标签：xslt, xsl-fo

我有一个*（当前）* 3000 行 XSLT 文件，其中包含一堆模板。我必须向它添加更多的*东西*，它变得非常难以管理。

那么我可以拆分它并添加某种包含吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:44:07.190

这就是它的`xsl:import`用途。（请注意，它不是一个简单的文本文件包含。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:23:25.920

我相信，“重构”是您所需要的，而不仅仅是拆分和导入。在任何时候，重构所花费的时间都是你想象的两倍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-03T09:41:21.090

您可以创建需要添加到单独 XSL 文件中的新内容，并用于`xsl:include`为模板、变量和参数提供与主文件中相同的优先级/优先级。然后，您还可以继续将现有模板重构为一些更易于管理的文件并使用`xsl:include`.

还有`xsl:import`, 与 类似`xsl:include`，但赋予被包含文件的模板、参数等的优先级低于包含它们的 xsl 文件中的优先级。

如果您使用`xsl:import`，请确保这是您的意思，因为导入的转换中的任何变量/参数都将被主 xsl 文件中定义的任何相同名称覆盖。

# php - Facebook PHP SDK Graph API 发布链接/提要未显示“通过 AppName”

> ID：16200705
> 
> 赞同：0
> 
> 时间：2013-04-24T19:36:32.013
> 
> 标签：php, facebook, facebook-graph-api

我正在使用 Facebook Graph API 发布指向页面的链接。该帖子成功发布，但我在下面的一些帖子中看到的链接`via AppName`没有出现。我需要做些什么来明确启用它吗？

```
$message = sprintf("Message test");

$link = array(  'link' => JURI::base() . 'share/' . $id,
                                        'message' => $message,
                                        'access_token' => $page->access_token
                                        );

$res = $facebook->api('/'.$page->id.'/links', 'POST', $link); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:44:20.467

通过页面上的应用程序发布的帖子不会**通过帖子中的 AppName**显示。
这是为页面上的帖子制作的一些功能。虽然如果您查询其中一个`feed`或`post_id`端点，您可以通过返回结果中是否存在 key 来知道该帖子是否由某个应用程序发出，`application`which tell`name`和of application 。`namespace``id`

# javascript - 箭头键导航到带有 jquery 的照片页面

> ID：16200706
> 
> 赞同：0
> 
> 时间：2013-04-24T19:36:33.530
> 
> 标签：javascript, jquery

我正在尝试添加左右箭头键以导航到照片页面。每个照片页面都有如下导航部分。一旦我按下该键，它就会不停地转发到下一页。谁能帮助我。提前致谢。

```
<div style="margin: 10px auto 0 auto; text-align: center; width: 650px;">
<div class="nav_section" id="navigation">

<ul>

<li> <a href="/photos/view/120"><img src="/photos/square/120-df1dppn7253nge2e929k.jpg"></a> </li>

<li> <a href="/photos/view/118"><img src="/photos/square/118-dmfpm8xtzdg3kb2k85b8.jpg"></a> </li>

<li> <a href="/photos/view/116"><img src="/photos/square/116-kfaga5w36gbhej7g641c.jpg"></a> </li>

... and so on,.... 

</ul>

</div>
</div> 
```

这是我得到的垃圾脚本：

```
<script type="text/javascript">
$(document).ready(function() {
    $(document).keyup(function(event) {
        var key = event.which;
        if(key == 37) { // Left arrow key
$('a').trigger('click');
}
if(key == 39) { //Right arrow key
        $('a').trigger('click');
}
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:39:08.987

看起来您正在单击页面上的每个锚点`$('a')`。您可能需要在此处更改选择器。

如果没有更多上下文，我无法指导您做什么 - 但您需要找出活动图片，我假设根据您的工作方式触发点击它（或某些导航元素）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:29:55.563

谢谢大家，...问题解决了，...我只是在照片链接prevP和nextP中添加了一个类

如果有人需要，这是正确的脚本：

```
<script type="text/javascript">
$(document).ready(function() {
    $(document).keyup(function(event) {
        var key = event.which;
        if(key == 37) { // Left arrow key
            $('a.prevP').trigger('click');
        }
        if(key == 39) { //Right arrow key
            $('a.nextP').trigger('click');
        }
    });
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T20:02:06.840

您的链接的点击事件一定有问题。让一个函数负责执行任何操作（后退/前进）可能是个好主意，然后在需要时调用它。

# c# - 使用 Linq 解析异常的 XML

> ID：16200710
> 
> 赞同：0
> 
> 时间：2013-04-24T19:36:57.547
> 
> 标签：c#, wcf, linq-to-xml, webclient

我从网络服务中得到了一个特殊的响应：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <soap:Body>
    <GetLemonadeResponse xmlns="http://microsoft.com/webservices/">
      <GetLemonadeResult>&lt;Response&gt;&lt;Status&gt;Error&lt;/Status&gt;&lt;Message&gt;Could not find the Lemonade for this State/Lemon&lt;/Message&gt;&lt;FileNumber /&gt;&lt;/Response&gt;</GetLemonadeResult>
    </GetLemonadeResponse>
  </soap:Body>
</soap:Envelope> 
```

2个问题：

1）我不确定为什么 GetLemonadeResult 的内容有异常内容（如“& lt;”）。

我以这种方式将字节迁移到字符串：

```
WebClientEx client = new WebClientEx();
client.Headers.Add(HttpRequestHeader.ContentType, "text/xml; charset=utf-8");
client.Encoding = Encoding.UTF8;
byte[] result = client.UploadData(_baseUri.ToString(), data);
client.Encoding.GetBytes(xml));
string resultString = client.Encoding.GetString(result); 
```

（WebClientEx 派生自带有额外 Timeout 属性的 WebClient）。

我在想如果我选择了错误的编码，响应的外部部分也会以同样的方式被破坏。

网络服务是否有错误？

2) 为什么当我尝试使用 Linq to XML 抓取“GetLemonadeResult”时，它什么也拉不出来？

```
var xdoc = XDocument.Parse(response); // returns the XML posted above
var responseAsXML = xdoc.Descendants("GetLemonadeResult"); // gets nothing 
```

我不会猜到我需要一个命名空间来捕获后代，因为 XML GetLemonadeResult 标记没有前置“标记：”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:48:43.450

**1)**一些可以使 xml 无效的字符如 <,> 等被转义

**2）**您忘记在代码中包含命名空间

```
var xdoc = XDocument.Parse(response);
XNamespace soap = "http://schemas.xmlsoap.org/soap/envelope/";
XNamespace ns = "http://microsoft.com/webservices/";
var responseAsXML = xdoc.Descendants(soap + "Body")
                        .Descendants(ns + "GetLemonadeResult")
                        .First().Value; 
```

`responseAsXML`将会

```
<Response>
<Status>Error</Status>
<Message>Could not find the Lemonade for this State/Lemon
</Message><FileNumber />
</Response> 
```

**编辑**

这是我用来测试的soap/xml

```
string response = @"<soap:Envelope xmlns:soap=""http://schemas.xmlsoap.org/soap/envelope/"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema"">
                        <soap:Body>
                        <GetLemonadeResponse xmlns=""http://microsoft.com/webservices/"">
                            <GetLemonadeResult>&lt;Response&gt;&lt;Status&gt;Error&lt;/Status&gt;&lt;Message&gt;Could not find the Lemonade for this State/Lemon&lt;/Message&gt;&lt;FileNumber /&gt;&lt;/Response&gt;</GetLemonadeResult>
                        </GetLemonadeResponse>
                        </soap:Body>
                    </soap:Envelope>"; 
```

# c# - 通过可选依赖项的属性注入解决多个实现

> ID：16200711
> 
> 赞同：1
> 
> 时间：2013-04-24T19:37:09.513
> 
> 标签：c#, .net, dependencies, unity-container, code-injection

今天我遇到了一个看似奇怪的问题，即解决一个类型的多个实现以及可选依赖项的属性注入，在我的例子中是一个记录器实例。

我正在使用 Unity 2.1 和 UnityConfiguration 来实现基于约定的配置。

我正在使用*SetAllPropertiesConvention*将 ILogger 的实现注入到我的许多类型中。

如果我正在使用例如 ILogger 的实例来解决单个实现，`container.Resolve<IProcessor>()`则该实例已正确注入。

但是，如果我使用该属性解析该类型的多个实例，则`container.ResolveAll<IProcessor>()`该属性仍然为空。

这是我的注册码：

```
container.RegisterInstance(typeof (ILogger), LoggerService.GetLogger());
container.Configure(c => c.Scan(scan =>
                    {
                        scan.AssembliesInBaseDirectory(a => a.FullName.StartsWith("My.Company"));
                        scan.InternalTypes();
                        scan.With<AddAllConvention>().TypesImplementing<IFetchDataCommand>();
                        scan.With<AddAllConvention>().TypesImplementing<IPrintConverter>();
                        scan.With<SetAllPropertiesConvention>().OfType<ILogger>();
                    })); 
```

*SetAllPropertiesConvention*本身使用以下代码来注册注入的 logger es 属性：

```
IEnumerable<PropertyInfo> properties =
                type.GetProperties().Where(p => p.CanWrite && p.PropertyType == interfaceType);

foreach (PropertyInfo property in properties)
{
    registry.Register(null, type).WithInjectionMembers(new InjectionProperty(property.Name));
} 
```

这是一个错误，还是我做错了什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:45:51.923

如果您使用`RegisterType<T, U>()`方法来注册没有任何参数的依赖项，您将不会注册不同的实现。您需要提供命名注册，如下所示：

```
RegisterType<IProcessor, MyProcessor1>("MyProcessor1")
RegisterType<IProcessor, MyProcessor2>("MyProcessor2") 
```

`ResolveAll()`不包括没有名称的映射。

编辑：

不知道为什么你不能使用约定配置属性注入，但你可以在类型建立后设置它。像这样的东西：

```
 var container = new UnityContainer();
    container.RegisterInstance(typeof (ILogger), new Logger());

    container.Configure(x => 
        {
            x.AfterBuildingUp<IFetchDataCommand>().Call((c,s) => s.Logger = c.Resolve<ILogger>());
            x.Scan(
                scan =>
                    {
                        scan.Assembly(Assembly.GetExecutingAssembly());
                        scan.InternalTypes();
                        scan.With<AddAllConvention>().TypesImplementing<IFetchDataCommand>();
                        scan.WithSetAllPropertiesConvention().OfType<ILogger>();
                    });
        });

    var dataCommand = container.ResolveAll<IFetchDataCommand>().ToArray();

    Assert.That(dataCommand[0].Logger, Is.Not.Null);
    Assert.That(dataCommand[1].Logger, Is.Not.Null); 
```

这条线很重要：

```
x.AfterBuildingUp<IFetchDataCommand>().Call((c,s) => s.Logger = c.Resolve<ILogger>()); 
```

还有我的课：

```
public interface IDataCommand
{
    ILogger Logger { get; set; }
}

public class Logger : ILogger
{
    public string Name { get; set; }
}

public class FetchDataCommand : IDataCommand
{
    public ILogger Logger { get; set; }
}

public class StoreDataCommand : IDataCommand
{
    public ILogger Logger { get; set; }
} 
```

# android - android布局边距百分比

> ID：16200716
> 
> 赞同：36
> 
> 时间：2013-04-24T19:37:23.443
> 
> 标签：android, android-linearlayout

我想按百分比设置边距。我在线性布局中有 4 个图像视图，并希望设置默认的左、右、上、下边距，为每个屏幕尺寸保持相同的百分比。

可能吗 ？

这是我想要的演示.. ![在此处输入图像描述](https://i.stack.imgur.com/SBCY5.png)

这是我尝试过但不起作用的方法

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:weightSum="10" >

        <Thumbnail
            android:id="@+id/thumb1"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="4" />

        <Thumbnail
            android:id="@+id/thumb2"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="4" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:weightSum="10" >

         <Thumbnail
             android:id="@+id/thumb3"
             android:layout_width="0dp"
             android:layout_height="match_parent"
             android:layout_weight="4" >
         </Thumbnail>

        <Thumbnail
            android:id="@+id/thumb4"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="4" />

    </LinearLayout>

</LinearLayout> 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-24T19:44:52.750

您可以在`View`s 中使用不可见的`LinearLayout`s 作为分隔符，并使用该`layout_weight`机制为它们分配相对大小。

例子：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1">

    <Thumbnail
        android:id="@+id/thumb1"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="4" />

    <View
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_weight="2"
        android:visibility="invisible"/>

    <Thumbnail
        android:id="@+id/thumb2"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="4" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-08-21T12:18:26.143

**2017 年 8 月 1 日添加：**

此答案中的两种布局现已弃用，但那里提供了有关如何使用`ConstraintLayout`. 感谢[dpg](https://stackoverflow.com/users/1623598/dpg)指出这一点。

如果您打算将百分比与资源一起使用，则[此答案](https://stackoverflow.com/questions/43345082/android-constraintlayout-percentage-using-dimens)可能很有用。

* * *

**老答案：**

现在支持库版本 23.0.0 出现了一种更好的方法（大约是时间，对吧？）。您现在可以使用[PercentFrameLayout](http://developer.android.com/reference/android/support/percent/PercentFrameLayout.html)或[PercentRelativeLayout](https://developer.android.com/reference/android/support/percent/PercentRelativeLayout.html)。它们都具有以下属性：

*   布局宽度百分比
*   布局高度百分比
*   layout_marginPercent
*   layout_marginLeftPercent
*   layout_marginTopPercent
*   layout_marginRightPercent
*   layout_marginBottomPercent
*   layout_marginStartPercent
*   layout_marginEndPercent

您还可以查看[PercentLayoutHelper.PercentLayoutParams](http://developer.android.com/reference/android/support/percent/PercentLayoutHelper.PercentLayoutParams.html)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-11-06T10:04:40.733

您可以使用[ConstraintLayout 的指南](https://medium.com/google-developers/building-interfaces-with-constraintlayout-3958fa38a9f7#4511)设置百分比边距。

假设您要为布局定义以下百分比值：

[![要求的百分比值](https://i.stack.imgur.com/CENlh.png)](https://i.stack.imgur.com/CENlh.png)

然后，您只需在布局中添加以下指南：

[![布局编辑器](https://i.stack.imgur.com/v94nt.png)](https://i.stack.imgur.com/v94nt.png)

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.constraint.ConstraintLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:scaleType="centerCrop"
        app:srcCompat="@drawable/ic_launcher_background"
        app:layout_constraintTop_toTopOf="@+id/horGuideline1"
        app:layout_constraintStart_toStartOf="@+id/verGuideline1"
        app:layout_constraintEnd_toStartOf="@+id/verGuideline2"
        app:layout_constraintBottom_toTopOf="@+id/horGuideline2" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:scaleType="centerCrop"
        app:srcCompat="@drawable/ic_launcher_background"
        app:layout_constraintTop_toTopOf="@+id/horGuideline1"
        app:layout_constraintStart_toStartOf="@+id/verGuideline3"
        app:layout_constraintEnd_toStartOf="@+id/verGuideline4"
        app:layout_constraintBottom_toTopOf="@+id/horGuideline2" />

    <ImageView
        android:id="@+id/imageView3"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:scaleType="centerCrop"
        app:srcCompat="@drawable/ic_launcher_background"
        app:layout_constraintTop_toTopOf="@+id/horGuideline3"
        app:layout_constraintStart_toStartOf="@+id/verGuideline1"
        app:layout_constraintEnd_toStartOf="@+id/verGuideline2"
        app:layout_constraintBottom_toTopOf="@+id/horGuideline4" />

    <ImageView
        android:id="@+id/imageView4"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:scaleType="centerCrop"
        app:srcCompat="@drawable/ic_launcher_background"
        app:layout_constraintTop_toTopOf="@+id/horGuideline3"
        app:layout_constraintStart_toStartOf="@+id/verGuideline3"
        app:layout_constraintEnd_toStartOf="@+id/verGuideline4"
        app:layout_constraintBottom_toTopOf="@+id/horGuideline4" />

    <android.support.constraint.Guideline
        android:id="@+id/verGuideline1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        app:layout_constraintGuide_percent="0.05" />

    <android.support.constraint.Guideline
        android:id="@+id/verGuideline2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        app:layout_constraintGuide_percent="0.35" />

    <android.support.constraint.Guideline
        android:id="@+id/verGuideline3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        app:layout_constraintGuide_percent="0.65" />

    <android.support.constraint.Guideline
        android:id="@+id/verGuideline4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        app:layout_constraintGuide_percent="0.95" />

    <android.support.constraint.Guideline
        android:id="@+id/horGuideline1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        app:layout_constraintGuide_percent="0.12" />

    <android.support.constraint.Guideline
        android:id="@+id/horGuideline2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        app:layout_constraintGuide_percent="0.47" />

    <android.support.constraint.Guideline
        android:id="@+id/horGuideline3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        app:layout_constraintGuide_percent="0.53" />

    <android.support.constraint.Guideline
        android:id="@+id/horGuideline4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        app:layout_constraintGuide_percent="0.88" />

</android.support.constraint.ConstraintLayout> 
```

因此，您的布局看起来像这样：

[![结果视图](https://i.stack.imgur.com/ubQzy.png)](https://i.stack.imgur.com/ubQzy.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T20:01:02.477

在这里查看您的图像是您可以做的，使用相对布局并将线性布局放入其中。如果要使图像视图正确适合，也可以使用 weightSum。

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginLeft="5dp"
    android:layout_marginLeft="5dp" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:orientation="vertical" >

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:orientation="vertical" >

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </LinearLayout>

</RelativeLayout> 
```

# node.js - 如何在控制台中禁用节点 mongodb-native 驱动程序连接日志记录

> ID：16200719
> 
> 赞同：1
> 
> 时间：2013-04-24T19:37:37.257
> 
> 标签：node.js, mongodb, logging, message

当我启动连接到 mongodb 的节点服务器时，我总是会收到这些消息，告诉我连接的状态。如何禁用这些消息？

```
Wed Apr 24 13:28:17 [initandlisten] connection accepted from 127.0.0.1:55221 #304 (1 connection now open)
Wed Apr 24 13:28:17 [initandlisten] connection accepted from 127.0.0.1:55222 #305 (2 connections now open)
Wed Apr 24 13:28:17 [initandlisten] connection accepted from 127.0.0.1:55223 #306 (3 connections now open)
Wed Apr 24 13:28:17 [initandlisten] connection accepted from 127.0.0.1:55224 #307 (4 connections now open)
Wed Apr 24 13:28:17 [initandlisten] connection accepted from 127.0.0.1:55225 #308 (5 connections now open)
Wed Apr 24 13:35:42 [conn308] end connection 127.0.0.1:55225 (4 connections now open)
Wed Apr 24 13:35:42 [conn307] end connection 127.0.0.1:55224 (4 connections now open)
Wed Apr 24 13:35:42 [conn306] end connection 127.0.0.1:55223 (4 connections now open)
Wed Apr 24 13:35:42 [conn305] end connection 127.0.0.1:55222 (4 connections now open)
Wed Apr 24 13:35:42 [conn304] end connection 127.0.0.1:55221 (4 connections now open) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T20:28:06.000

此消息不是来自 node.js 或 node-mongodb-native 驱动程序。它来自 mongo 守护进程。

启动 mongo 时，只需传递 --quiet 选项，此消息就会消失。

# java - 在 rhino 中运行的 csslint cli 卡住（win7）

> ID：16200726
> 
> 赞同：0
> 
> 时间：2013-04-24T19:38:01.717
> 
> 标签：java, javascript, cmd, rhino, csslint

我正在尝试让 csslint - cli ( [https://github.com/stubbornella/csslint](https://github.com/stubbornella/csslint) ) 在我的系统 (windows 7) 上运行。

输入`java -jar rhino\js.jar csslint-rhino.js styles.css`并按回车后没有任何反应。

版本号都是最新的。我以管理员身份运行 CMD。

下面你可以看到当我尝试启动 csslint 时我的 CMD 显示的内容。您还可以看到所有相关的版本号：

![命令](https://i.stack.imgur.com/U0CCR.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T10:37:48.890

似乎适用于旧版本的 rhino。rhino1_6R7 在我的情况下......

# jquery - 自定义事件 .bind('click.myclick', function(){ // }); 和 unbind() 以及

> ID：16200728
> 
> 赞同：1
> 
> 时间：2013-04-24T19:38:07.873
> 
> 标签：jquery

我最近发现看起来像这样的代码

```
$('.mybuttons').unbind('click.myclick');
$('.mybuttons').bind('click.myclick', function(){
   // do something
}); 
```

它响应单击事件执行`// do something`。我最感兴趣的是它不会干扰其他点击事件。它根本没有解除它们的绑定。

我不知道事件“click.myclick”可以用作命名的点击事件。

我查看了 api.jquery.com，但在 bind 下没有提到这一点。有人可以启发我或指向描述此内容的在线文档吗？我进行了一些测试，如果将`.`其换成另一个字符，它不再起作用，那么这些是否意味着 myclick 是事件单击的属性？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T19:43:51.527

这称为命名空间事件。通过对事件进行命名空间，您可以选择性地仅取消绑定使用任何事件或特定事件的命名空间绑定的处理程序。

[http://api.jquery.com/on/#event-names](http://api.jquery.com/on/#event-names)

```
$(element).on("click.mynamespace", handler);
$(element).on("change.mynamespace", handler);
$(element).on("mouseenter.mynamespace mouseleave.mynamespace", handler);
$(element).off(".mynamespace"); // unbind all the above events at once, without affecting others 
```

这通常用于插件中，以使事件和清理更易于管理。

# javascript - 是否有相当于 Perl 的 WWW::Mechanize 的 Node.js？

> ID：16200729
> 
> 赞同：7
> 
> 时间：2013-04-24T19:38:09.643
> 
> 标签：javascript, node.js, www-mechanize, www-mechanize-firefox

我正在为 Node 搜索一个类似于Perl的[WWW::Mechanize的模块。](http://search.cpan.org/~jesse/WWW-Mechanize-1.72/lib/WWW/Mechanize.pm)或者更适合[WWW::Mechanize::Firefox](http://search.cpan.org/~corion/WWW-Mechanize-Firefox-0.72/lib/WWW/Mechanize/Firefox.pm)。

*   主要功能是按名称、类或 ID 查找和提交表单。
*   处理cookies的能力会很棒
*   并且处理Javascript的能力将是完美的。

如果有人有类似的想法，或者我可以在哪个方向搜索，那将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-02-04T13:07:33.657

您正在寻找的是可编写脚本/无头浏览器。按照受欢迎程度的递减顺序，选项是：

*   [谷歌木偶师](https://github.com/GoogleChrome/puppeteer) -“提供高级 API 来控制 Chrome 或 Chromium 的节点库”
*   [僵尸](https://github.com/assaf/zombie)- 更轻巧；“使用 Node.js 进行快速、无头的全栈测试”
*   [纤细的](https://github.com/laurentj/slimerjs) - 可编写脚本的 Firefox。自 2018 年 3 月以来没有提交。
*   [mechanize-js](https://github.com/srveit/mechanize-js/issues/4)，它缺乏文档并且比上述任何替代方案的吸引力都小得多

## 废弃的项目

*   [幻影JS](https://github.com/ariya/phantomjs) - 无头 WebKit。
*   [嵌合体](https://github.com/deanmao/node-chimera)- 自 2013 年以来被遗弃

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T12:09:26.417

试试[mechanize-js](https://github.com/srveit/mechanize-js) - 这个名字说明了一切......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T13:46:57.777

我现在找到的最接近的工具是[僵尸](https://github.com/assaf/zombie)。

显然它还没有完全准备好生产（可能永远不会），因为它是一个测试工具。尽管如此，它似乎是最接近所需功能的匹配项（并且它支持 JS！）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-06T07:47:31.400

您可以在 node.js 中嵌入 perl 脚本，使用：

> npm install exec_perl

见：[https ://github.com/tlqtangok/exec_perl](https://github.com/tlqtangok/exec_perl)

# php - 根据需要从 php 请求中加载数据

> ID：16200731
> 
> 赞同：0
> 
> 时间：2013-04-24T19:38:16.500
> 
> 标签：php, jquery, ajax, json

我正在使用选择的 jquery 插件，它将一个多选框变成一个 facebook 样式选择器。我用英国邮政编码填充它，并显示选定的邮政编码。

由于我的 PHP 请求正在从我的邮政编码数据库中检索大量数据，因此页面运行速度显然很慢，但我希望只能在用户在输入框中输入 1 个字符后才能检索数据。

我知道我必须用 Ajax 来做这件事，我认为是 JSON，但现在确定怎么做？

这是我的代码

```
 <select name="zipcode[]" style="width:600px; height:250px;" multiple class="chzn-select" id="zipcode">

          <?php $arraypostcode = explode(",", $zipcode); ?>
    <?php
do { // begin loop
?>
    <option value="<?php echo $row_postcode['code']?>"<?php for ($i=0; $i<sizeof($arraypostcode); $i++) {if ($row_postcode['code'] == $arraypostcode[$i]) {echo " selected"; break;}}?>><?php echo $row_postcode['code']?></option>
    <?php
} while ($row_postcode = mysql_fetch_assoc($postcode)); // end loop
  $rows = mysql_num_rows($postcode);
  if($rows > 0) {
      mysql_data_seek($postcode, 0);
      $row_postcode = mysql_fetch_assoc($postcode);
  }
?>
  </select> 
```

PHP请求：

```
<?php

$postcode = mysql_query( "SELECT postcode.code FROM postcode");
$row_postcode = mysql_fetch_assoc($postcode);
$totalRows_postcode = mysql_num_rows($postcode);

?> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:11:44.903

你可以尝试这些方面的东西。

在表单页面上：

```
<input type="text" name="postcodeSearch" onChange="getPostcodes(this.value); return false;">
<div id="postcodeSelector"></div> 
```

Javascript：

```
function getPostcodes(input){
    if(input.length >= 3){
        searchPostcodes(input);
    }
}

function searchPostcodes(input){
    $.ajax({
        url:'/url/to/postcodeSearch',
        data: "input=" + input,
        dataType: 'html',
        timeout: 5000,
        success: function(data, status) {
            $("#postcodeSelector").html(data);
        }
    }
} 
```

在 /usr/to/postcodeSearch 页面上：

```
$input = $_GET["input"];

## Do database search with 'input' string
$postcodes = $somedbconnection->searchPostcodes($input);
?>
<select name="postcode">
    <? foreach($postcodes as $postcode){ ?>
        <option value='<?=$postcode["id"]?>'><?=$postcode["postcode"]?></option>
    <? } ?>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:46:26.697

使用阿贾克斯：

你可以跑

`$postcode = mysql_query( "SELECT postcode.code FROM postcode WHERE code LIKE 'YOUR_USER_VALUE%'"); $row_postcode = mysql_fetch_assoc($postcode); $totalRows_postcode = mysql_num_rows($postcode);`

每次用户输入字符时都必须运行它

LIKE 'VALUE%' this in sql 几乎意味着startsWith("VALUE") 如果您熟悉其他编程语言如java或其他东西。

如果您的值存储为数字，那么您将不得不转换： `cast(code as char)`

# java - Java FIFO队列实现

> ID：16200737
> 
> 赞同：0
> 
> 时间：2013-04-24T19:38:41.223
> 
> 标签：java, queue

有谁知道Java中是否有FIFO队列实现，或者任何其他允许用户设置最大大小并在队列满时自动拒绝任何请求的库？

我看过番石榴队列实现，但据我所知，它会在队列已满时删除队列中的第一个元素，而不是拒绝请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:41:08.753

大多数内置队列都是这样做的。我建议使用 ArrayBlockingQueue，因为它非常适合有限的大小，但您也可以使用 LinkedBlockingQueue。BlockingDeque(s) 也支持限制。

顺便说一句，如果您使用带有线程的队列，我建议您使用 ExecutorService，因为它将这些组合在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:55:41.583

在一个简单的队列上使用装饰器模式，例如：
`Queue<String> queue = new LinkedList<String>();`

您的包装器代码将确保最大大小被强制拒绝额外的添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T22:07:06.220

```
int size=500;
Queue<String> = new ArrayBlockingQueue<>(size); 
```

# ember.js - Ember.js 在插座模板中访问父控制器

> ID：16200742
> 
> 赞同：0
> 
> 时间：2013-04-24T19:39:11.777
> 
> 标签：ember.js

我对 Ember 很陌生，正在努力解决这个问题。

我有一个模型，`Huddle`以及一个关联的控制器，`HuddlesController`. 有一个模板`huddles.hbs.erb`，其中包含一个`{{outlet}}`. 下面`templates/huddles/`有两个文件，grid.hbs.erb 和 list.hbs.erb。这些被渲染到`huddles.hbs.erb`.

现在`huddles.hbs.erb`，我可以使用如下所示的 each 块：

```
{{#each huddle in controller}}
  {{huddle.name}}
{{/each}} 
```

这可以按预期工作，迭代 Huddles 的集合。

`list.hbs.erb`但是，如果我在or中调用相同的代码，则会`grid.hbs.erb`收到以下错误：

```
Uncaught Error: assertion failed: an Ember.CollectionView's content must implement Ember.Array. You passed <(generated huddles.grid controller):ember405> 
```

看来我不再在正确的范围内了！如何访问父控制器中的集合（`HuddlesController`从 扩展`Ember.ArrayController`）？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:35:57.873

根据错误消息，您应该有一个名为`HuddlesGridController`which extends的控制器`Em.ArrayController`。每条路由都有自己的控制器、视图和模板。这意味着`HuddlesController`在资源路线中使用（`HuddlesRoute`我假设），但您是子路线（`HuddlesRoute`我也在假设）。

# python - 无法通过 Python 和 pymysql 插入 MySQL

> ID：16200744
> 
> 赞同：4
> 
> 时间：2013-04-24T19:39:15.387
> 
> 标签：python, mysql, pymysql

我有一个有 9 列的表，前三列都是文本，后六列设置为 INT。

当我插入文本字段时，一切都按预期工作

```
conn = pymysql.connect(host='', port=, user='', passwd='', db='')
cur = conn.cursor()
cur.execute("INSERT INTO table(Name) VALUES ('Sample Name')") 
```

该代码运行良好，并允许我将名称插入到我的数据库中。但是，在为我的整数内容运行插入语句时，我遇到了各种各样的麻烦。

我已经尝试了以下所有方法：

```
cur.execute("INSERT INTO table(Left Avg) VALUES (5)")
cur.execute("INSERT INTO table(Left Avg) VALUES (%s)", (5))
cur.execute("INSERT INTO table(Left Avg) VALUES (%s)" % (5))
cur.execute("""INSERT INTO mlb_data(Left Avg) VALUES (%s)""" % (5)) 
```

基本上，无论我在将整数插入表时尝试什么，都会收到以下错误。

```
Traceback (most recent call last):
File "testing.py", line 12, in <module>
cur.execute("""INSERT INTO mlb_data(Left Avg) VALUES (%s)""" % (5))
File "build/bdist.macosx-10.7-intel/egg/pymysql/cursors.py", line 117, in execute
File "build/bdist.macosx-10.7-intel/egg/pymysql/connections.py", line 189, in     defaulterrorhandler
pymysql.err.ProgrammingError: (1064, u"You have an error in your SQL syntax; check the    manual that corresponds to your MySQL server version for the right syntax to use near 'Left   Avg) VALUES (5)' at line 1") 
```

我曾尝试将 MySQl 平板电脑更改为 VarChar 而不是 INT，但无论何时我尝试插入数字都会出错。

我在这里想念什么？

编辑：我不知道我之前是否没有尝试过，或者我的格式是否不正确，但我想通了。

```
num = 5.23947824987
cur.execute("INSERT INTO mlb_data(LeftAvg) VALUES (%s)", (num,)) 
```

工作顺利。这是正确的，还是我很幸运？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:41:31.407

怎么样

```
cur.execute("INSERT INTO table(`Left Avg`) VALUES (?)", (5,)) 
```

假设 'Left Avg' 是列名，您应该尽量避免列名中的空格作为一般规则

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-03T02:45:25.977

回答你的最后一个问题：你很幸运，和/或你想出了或记得 Pythonic 的 SQL 查询方式。您可以在 中看到类似的示例`site-packages/pymysql/tests/test_basic.py`，例如：

```
 v = (True, -3, 123456789012, 5.7, "hello'\" world", u"Espa\xc3\xb1ol
", "binary\x00data".encode(conn.charset), datetime.date(1988,2,2), datetime.date
time(2014, 5, 15, 7, 45, 57), datetime.timedelta(5,6), datetime.time(16,32), tim
e.localtime())
            c.execute("insert into test_datatypes (b,i,l,f,s,u,bb,d,dt,td,t,st) 
values (%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s)", v) 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2016-04-26T20:14:05.400

**在 Python 中插入**的简单方法是使用连接字符串。像这样的东西：

```
id_user = 1
username = "Tudor"
address = "Cluj-Napoca"
sql = "INSERT INTO user(id_user,username,address) VALUES (" + id_user + ",'" + username + "','" + address + "');"
cursor.execute(sql) 
```

但要注意“和”符号。我强烈建议在执行查询之前打印。

# sql - 将地理转换为几何 SQL Server 2008R2

> ID：16200746
> 
> 赞同：7
> 
> 时间：2013-04-24T19:39:22.043
> 
> 标签：sql, geometry, spatial, geography

> 您好，我在 SQL Server 中有以下代码，为什么如果我想计算 @geog 的 sTArea 失败而 @geom 成功？，如何将此多边形从几何数据类型转换为地理数据类型以获得 STArea？，谢谢你。

```
DECLARE @geom geometry;
SET @geom = geometry::STGeomFromText('POLYGON ((-99.213546752929688 19.448402404785156, -99.2157974243164 19.449802398681641, -99.2127456665039 19.450002670288086, -99.213546752929688 19.448402404785156))', 4326); 
select @geom.STArea();

DECLARE @geog geography;
SET @geog = geography::STGeomFromText('POLYGON ((-99.213546752929688 19.448402404785156, -99.2157974243164 19.449802398681641, -99.2127456665039 19.450002670288086, -99.213546752929688 19.448402404785156))', 4326); 
select @geog.STArea(); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-24T15:10:44.640

我戳了一下，这个答案[How can I convert Geometry data into a Geography data in MS SQL Server 2008?](https://stackoverflow.com/questions/279983/how-can-i-convert-geometry-data-into-a-geography-data-in-ms-sql-server-2008) 这或多或少只是指向[http://blogs.msdn.com/b/edkatibah/archive/2008/08/19/working-with-invalid-data-and-the-sql-server-2008-geography-data -type-part-1b.aspx](http://blogs.msdn.com/b/edkatibah/archive/2008/08/19/working-with-invalid-data-and-the-sql-server-2008-geography-data-type-part-1b.aspx)引导我找到合理的解释和工作代码。

症结：您必须确保您的几何首先可以转换为有效的地理。

代码（当然可以组合一些操作，但为了清楚起见，它们在此处被分解。）

```
DECLARE @geog GEOGRAPHY;
DECLARE @geom GEOMETRY;

SET @geom = GEOMETRY::STGeomFromText('POLYGON ((-99.213546752929688 19.448402404785156, -99.2157974243164 19.449802398681641, -99.2127456665039 19.450002670288086, -99.213546752929688 19.448402404785156))', 4326); 
SET @geom = @geom.MakeValid() --Force to valid geometry
SET @geom = @geom.STUnion(@geom.STStartPoint()); --Forces the correct the geometry ring orientation
SET @geog = GEOGRAPHY::STGeomFromText(@geom.STAsText(),4326) 

SELECT @geog.STArea(); 
```

对于那些不会一直阅读 Spatial Ed 博客文章的人来说，一个重要提示是，“请记住，这种方法很幼稚，因为它不能适应多种潜在的边缘条件。不过，这种方法应该在许多情况下都有效。”

# java - 删除java Derby数据库中的行

> ID：16200747
> 
> 赞同：0
> 
> 时间：2013-04-24T19:39:26.387
> 
> 标签：java, derby

我在本教程的最后一页：http: [//www.homeandlearn.co.uk/java/delete_a_record_from_a_database.html](http://www.homeandlearn.co.uk/java/delete_a_record_from_a_database.html)这是关于删除 Derby 数据库中的记录。我的删除按钮代码如下：

```
private void btnDeleteRecordActionPerformed(java.awt.event.ActionEvent evt) {                                                
   try{

    String host = "jdbc:derby://localhost:1527/Employees";
    String uName = "bjorn";
    String uPass= "";
    con = DriverManager.getConnection( host, uName, uPass );
    PreparedStatement pstmt = con.prepareStatement("SELECT * FROM  App.Workers",ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_UPDATABLE);
   con.setAutoCommit(false);
    rs = pstmt.executeQuery();
    //count++;
     if (rs.absolute(count)) {
    rs.absolute(count);
    //rs.next();
    rs.deleteRow( );

    pstmt.close( );
    rs.close( );
     }

   }
   catch (SQLException err) {
    System.out.println(err.getMessage() );
   }

} 
```

我有两个问题：为什么不起作用`rs.deleteRow( );`？
当我在方法中包含以下代码时，它给了我错误：

```
Invalid operation at current cursor position.

stmt = con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);

        String sql = "SELECT * FROM App.Workers";
        rs = stmt.executeQuery(sql);

        int id_col = rs.getInt("ID");
        String id = Integer.toString(id_col);
        String first2 = rs.getString("First_Name");
        String last2 = rs.getString("Last_Name");
        String job2 = rs.getString("Job_Title");

        textID.setText(id);
        textFirstName.setText(first2);
        textLastName.setText(last2);
        textJobTitle.setText(job2);
        stmt.close( ); 
```

此代码应该重新加载文本字段中的所有数据。什么是不给出此异常的工作代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:43:54.490

1.  ResultSet.deleteRow() 从数据库中删除行`ResultSet`，但您必须先调用`ResultSet.next()`才能到达第一行，然后才能删除或读取某些内容。此外，`deleteRow()`删除当前行，并且由于您没有设置当前行，因此没有可删除的内容。
2.  在您可以使用`ResultSet`获取项目之前，您首先必须执行`ResultSet.next()`, 才能到达第一行。

对于您的问题，在这两种情况下都在`rs.next();`do 之后添加该行`executeQuery()`。但请注意，这只是一个快速修复，您应该始终检查是否有可用的行，然后执行您的任务。

# php - php加载内容后向下滑动页面

> ID：16200748
> 
> 赞同：-1
> 
> 时间：2013-04-24T19:39:28.097
> 
> 标签：php, jquery, html, css

如何在整个页面加载后制作一个向下滑动内容的脚本。

**例如**，我单击一个链接，如`index.php?category=1`. 加载该页面后，我需要将页面向下滑动到特定`ID`的 .

怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:42:15.003

使用锚。

修改您的 URL 以包含锚点：

```
index.php?category=1#targetElement 
```

然后为页面加载时应该成为焦点的元素添加一个 ID：

```
<div id="targetElement"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:52:19.877

您是否需要为页面的向下滑动设置动画，或者您只需要该功能？

如果没有，你不能只使用`<a name="anchor"></a>`你想滚动页面的地方吗？此外，这就是它的目的吗？

现在让它向下滑动，你可以使用`index.php?category=1#anchor`

但是如果你需要动画，你需要在stackoverflow中的另一个链接上添加这些代码[简单的jQuery滚动来锚定页面上或下......？](https://stackoverflow.com/questions/8579643/simple-jquery-scroll-to-anchor-up-or-down-the-page)

```
var aTag = $("a[name='anchor']");
$('html,body').animate({scrollTop: aTag.offset().top},'slow'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T19:47:22.170

如果你的页面上有一个锚点`<div id="anchor">`，你可以使用这个脚本，在页面加载时将页面滑动到锚点位置：

```
$(function() {
    var anchorPos= $('#anchor').offset().top;
    $('html, body').animate({scrollTop:anchorPos}, 'slow');
}); 
```

编辑：这个工作解决方案的[小提琴示例](http://jsfiddle.net/CqyQx/)

# c++ - 是否可以使用 Google Mock (gmock) 捕获参数？

> ID：16200753
> 
> 赞同：11
> 
> 时间：2013-04-24T19:39:42.573
> 
> 标签：c++, unit-testing, mocking, googlemock

我打算使用 Google Mock。我需要捕获一个对象引用，以便随后可以从该对象调用一些方法。

Google Mock 是否有任何捕获能力？如果没有，C++ 单元测试的其他选择是什么？一种选择是创建我自己的模拟类来捕获对象。

我正在寻找类似于 Java 的[EasyMock](http://www.easymock.org/)的东西。示例（不是真正的代码）：

```
Capture<MyObject> capture;
EXPECT_CALL(myInterface, access(capture));
instanceUnderTest.setAccessPoint(myInterface);
instanceUnderTest.run();
MyObject &capturedObject = capture.getValue();
EXPECT_EQ(ACCESS_IN_PROGRESS, capturedObject.getState()); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-29T14:26:16.897

您可以编写自定义操作来通过引用捕获方法参数（有一个标准`SaveArg`操作来通过值捕获一个）。但是你想要的可以用更简单的方式来实现：

```
using testing::Property;
using testing::Eq;
EXPECT_CALL(myInterface,
            access(Property(&MyObject::getState, Eq(ACCESS_IN_PROGRESS)))); 
```

# ios - 如何解释从 SCNetworkReachabilityCreateWithName 返回的 null？

> ID：16200757
> 
> 赞同：1
> 
> 时间：2013-04-24T19:39:54.903
> 
> 标签：ios, reachability

我们的代码中有这个方法，它返回一个`SCNetworkReachabilityRef`using `SCNetworkReachabilityCreateWithName`：

```
- (SCNetworkReachabilityRef)cCreateReachabilityRefWithCStr:(const char *)host {
    return SCNetworkReachabilityCreateWithName(NULL, host);
} 
```

有时我们会返回 NULL 作为可达性参考。NULL 返回是什么意思？

Apple doc [SCNetworkReachability Reference](https://developer.apple.com/library/mac/#documentation/SystemConfiguration/Reference/SCNetworkReachabilityRef/Reference/reference.html)没有讨论这些方法的 NULL 返回。但是[Reachability 示例代码](https://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)`SCNetworkReachabilityCreateWithName`中的 Classes/Reachability.m 文件说明了可以返回 NULL的事实，但没有说明原因。

那么 NULL 返回是什么意思，我该如何处理呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T18:21:16.313

回应 iOS 开发者论坛上的类似查询[SCNetworkReachabilityCreateWithName 返回的 NULL 是什么意思？](https://devforums.apple.com/thread/185032)（此链接仅供 iOS 开发者计划成员访问），Apple 开发者支持人员指出，据他所知，`SCNetworkReachabilityCreateWithName`可能返回 NULL 的原因只有三个：

1.  节点名称为 NULL ( `kSCStatusInvalidArgument`);
2.  节点名为空（`kSCStatusInvalidArgument`）；或者
3.  内存分配问题（不设置 a `kSCStatusXxx`）。

他还指出，可达性 API 在 Darwin 中，并且 Darwin 的实现与 OS X 和 iOS 上的实现很接近。Darwin的代码[SCNetworkReachability.c](http://www.opensource.apple.com/source/configd/configd-453.16/SystemConfiguration.fproj/SCNetworkReachability.c)似乎证实了他的观点，即上述三个原因是`SCNetworkReachabilityCreateWithName`返回 NULL 的唯一方法。

我还了解到，[系统配置参考](https://developer.apple.com/library/mac/#documentation/SystemConfiguration/Reference/SystemConfiguration_Utilities/Reference/reference.html)包含有关检测和解释调用`SCxxx`函数产生的错误的信息，特别是`SCError()`和`SCErrorString()`.

我故意通过传递 "" 和 NULL 作为名称来导致 NULL 返回`SCNetworkReachabilityCreateWithName`，然后尝试`SCError`和`SCErrorString`（从系统配置参考中引用），你瞧，我做了一些有意义的额外信息：

```
reachtest1[9274:11303] isReachableWithName: entry: name: ""
reachtest1[9274:11303] SCNetworkReachabilityCreateWithName returned NULL!
reachtest1[9274:11303] SCError: 1002 SCErrorString: Invalid argument

reachtest1[9274:11303] isReachableWithName: entry: name: (null)
reachtest1[9274:11303] SCNetworkReachabilityCreateWithName returned NULL!
reachtest1[9274:11303] SCError: 1002 SCErrorString: Invalid argument 
```

这解释了从达尔文代码的三个案例中的两个案例中返回 NULL 的原因。

还有一种方法可以`CFErrorRef`使用`SCCopyLastError()`它实际上可能包含更多信息。除了前面提到的系统配置参考，请参阅[CFError 参考](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFErrorRef/Reference/reference.html)。

鉴于这一切，我想说前两种情况不能重试，因为传递 NULL 或零长度主机名是程序逻辑错误。第三种与内存相关的情况可能是可重试的。

# ant - Ivy - 使用 Ivy 指定编译/运行时类路径

> ID：16200763
> 
> 赞同：1
> 
> 时间：2013-04-24T19:40:08.917
> 
> 标签：ant, classpath, ivy

我有一个项目，它有两个不同的 jar，它们都包含一些相同的类。我需要的是它在 Jar “B” 之前使用 Jar “A” 中的类。在普通的 Java 编译中（以及使用 Ant），我可以指定类路径本身的顺序。这样，我可以保证 Jar “A” 中的类将在 Jar “B” 中的类之前使用。

有没有办法在 Ivy 中做到这一点？

我能想到这样做的唯一方法是在我的创建两个单独的配置`ivy.xml`：

```
<dependency org="com.vegibank" name="a.jar"
    rev="1.0" conf="foo->default"/>

<dependency org="com.vegibank" name="b.jar"
    rev="1.0" conf="compile->default"/> 
```

然后创建两个单独的路径类引用：

```
<ivy:cachepath pathid="compile.foo.classpath"
    conf="foo"/>
<ivy:cachepath pathid="compile.normal.classpath"
    conf="compile"/> 
```

然后在 中`<javac/>`，我可以指定路径：

```
<javac ...>
    <classpath refid="compile.foo.classpath"/>
    <classpath refid="compile.normal.classpath"/>
</javac> 
```

但是，我认为必须有一种方法来保证当 Ivy 进行解析时将 jar 加载到类路径中的方式。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T14:02:13.553

每个 Ivy Ant 任务甚至 IvyDE 都遵守 ivy.xml 文件中依赖项声明的顺序。因此，如果在您的 ivy.xml 中，您在 b.jar 之前声明了对 a.jar 的依赖，则生成的类路径将首先具有 a.jar，然后是 b.jar。

# wpf - 对于 VS2010 中的每个构建，将构建编号增加到 +1

> ID：16200766
> 
> 赞同：0
> 
> 时间：2013-04-24T19:40:17.027
> 
> 标签：wpf, visual-studio-2010, visual-studio, c#-4.0

每次构建应用程序时，我都在寻找自动将内部版本号增加到 +1。我对此几乎没有做任何研究，我发现的方法也很少。

1.  将 [assembly: AssemblyVersion("1.0.0.0")] 更改为 [assembly: AssemblyVersion("1.0.*")] 但它可以在几天和时间内使用一些计算来获取每个构建的值。

2.  编写一个类文件以增加每个构建的值。这用于 VS-2008/2006

3.  使用[http://autobuildversion.codeplex.com/](http://autobuildversion.codeplex.com/)

我想通过使用 option-1 来实现 option-3 的功能，这可能吗？

（或者）

有没有更好的方法来实现我的解决方案？

# mysql - 如何在 Ruby on Rails 中使用 LIKE 查询

> ID：16200771
> 
> 赞同：4
> 
> 时间：2013-04-24T19:40:34.230
> 
> 标签：mysql, ruby-on-rails, postgresql

mysql中的LIKE查询，查询数据库并忽略大小写。例如：

```
"bzupnick" = "Bzupnick" #  false
"bzupnick" LIKE "Bzupnick" # true 
```

那么如何在 Ruby on Rails 中进行 LIKE 查询。

这是一个示例查询：

```
@results = User.joins(:jobs).where(:jobs => { :job_name => job }, :users => { :zip => zip }) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T20:11:45.533

试试这个..

```
User.joins(:job).where("job_name like ? and name like ?","%Dummy%", "%Bzupnick") 
```

您还可以通过将 to_sql 放在上述语句的末尾来验证 SQL 查询

# asp.net - 当用户尝试导航到 ASP.NET 网站中的页面时重定向用户

> ID：16200773
> 
> 赞同：0
> 
> 时间：2013-04-24T19:40:43.937
> 
> 标签：asp.net, iis-7.5

是否可以在不编写任何代码的情况下将对页面“XYZ.aspx”的请求重定向到“ABC.aspx”？我们使用 ASP.Net 4.0 和 IIS 7.5。

我们的想法是我们想从我们的网站中删除 XYZ.aspx 页面，如果用户仍然使用指向 XYZ.aspx 的旧书签，那么我们希望以自动方式将它们带到 ABC.aspx。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:44:21.073

似乎有几种方法，链接应该希望能帮助你。 [http://www.trainsignal.com/blog/iis7-redirect-windows-server-2008](http://www.trainsignal.com/blog/iis7-redirect-windows-server-2008)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T20:40:54.147

您可以通过 web.config 文件转发用户，也可以通过 IIS 进行转发。但如果你是我，我会使用 web.config。在共享主机中，您无法触摸 IIS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T21:20:38.480

我找到了答案。需要在 web config 中使用以下内容，仅此而已。

```
<location path="XYZ.aspx">
<system.webServer>
  <httpRedirect enabled="true" destination="http://localhost/mysite/ABC.aspx" httpResponseStatus="Permanent" />
</system.webServer> 
```

**更新**：如果将任何查询字符串参数传递到页面 XYZ.aspx，这也将起作用。

# html - 查看某个容器使用的所有css

> ID：16200776
> 
> 赞同：3
> 
> 时间：2013-04-24T19:40:52.203
> 
> 标签：html, css, debugging

我想查看某个容器使用的css..

我经常使用 chrome 检查元素。我也偶尔使用萤火虫。

有没有办法一键查看容器中使用的所有css代码..我的意思是我也在谈论所有的孩子css

```
<div class="someclass">
    <div class="inner1">
    </div>
    <div class="inner2">
    </div>
   <div class="inner3">
    </div>
   <div class="inner4">
    </div>
</div> 
```

现在可以查看所有的 css 代码（包括孩子）`someclass`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:43:01.680

![在此处输入图像描述](https://i.stack.imgur.com/o5HhM.png)

在 Chrome 工具的最底部，会显示此内容。您可以点击父母、孩子等在侧边栏中查看相关代码。

# ruby-on-rails - 循环非活动记录模型对象的属性

> ID：16200777
> 
> 赞同：6
> 
> 时间：2013-04-24T19:40:55.040
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

使用 Active Record 时循环遍历对象的所有属性的简单方法是

```
order_item_object.attributes.each do |key,value|
....
end 
```

但这不起作用，当我们不使用 Active Record 时。那么如何遍历对象的所有属性呢？

例如-：我在 Rails 中有一个不使用活动记录的模型。模型 order_item 中的对象可以在控制器中使用，例如 order_item_object.product_id、order_item_object.quantity、order_item_object.quoted_price。但是当我尝试`order_item_object.attributes.each do |k,v|`......时，我得到`undefined method "attributes" for #<Order:0x00000005aa81b0>`

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T19:59:57.577

试试这个：

```
class Parent
  def self.attr_accessor(*vars)
    @attributes ||= []
    @attributes.concat vars
    super(*vars)
  end

  def self.attributes
    @attributes
  end

  def attributes
    self.class.attributes
  end
end

class ChildClass < Parent
  attr_accessor :id, :title, :body
end

p ChildClass.new.attributes.inspect #=> [:id, :title, :body] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T20:00:17.180

`attr_accessor`只是一个宏，它创建一些方法来设置实例变量。所以也许你想要的是`instance_variables`方法，它返回一个实例变量数组，你可以迭代

```
class Foo
  attr_accessor :bar
  attr_accessor :baz
end

foo = Foo.new
foo.bar = 123
foo.baz
foo.instance_variables.each do |ivar_name|
  ivar_value = foo.instance_variable_get ivar_name
  # do something with ivar_name and ivar_value
end 
```

* * *

但我不会真的推荐这个。ActiveRecord 将模型数据分开是有原因的。您的实例可能有很多实例变量的用途。例如，也许您想跟踪记录是否已保存。这可以保持在`@saved`变量中，它反映了实例的状态，但不反映模型的数据。

也许您想保留属性哈希值？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T10:19:14.437

这是我找到的最好方法

```
item=self.instance_values.symbolize_keys
item.each do |k,v|
  ...
  ..
end 
```

有一个代码在这里显示它的用法（查看问题本身的更新） -[通过哈希中的元素进行分组](https://stackoverflow.com/questions/16194778/grouping-via-an-element-in-hash)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-30T17:52:57.113

如果您想要实例变量的字符串表示形式，您可以执行以下操作：

```
self.instance_values.keys.each do |k|
 ..
end 
```

这应该遍历为您的类定义的所有键（实例变量名称为字符串）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T19:58:37.437

您引用的属性是 ActiveRecord 模型上的实例变量，它返回模型数据库属性的哈希值。

一个非 ActiveRecord 模型不会有你调用的属性方法，除非你明确定义它。所有对象都有一个名为 instance_variables 的方法，您可以使用该方法获取属性名称列表，然后反射性地查找属性值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T20:04:18.147

一种不太优雅的做法：

```
class Test
  attr_accessor :firstname,:lastname
  def initialize(fn,ln); @firstname = fn; @lastname = ln; end
end

o = Test.new("Fernando", "Mendez")
o.instance_variables.each {|e| p o.send e.to_s.sub("@","").to_sym}
output:
"Fernando"
"Mendez" 
```

如果要跟踪键值对：

```
r = o.instance_variables.map {|e| Hash[e,(o.send e.to_s.sub("@","").to_sym)]}

#[{:@firstname=>"Fernando"}, {:@lastname=>"Mendez"}] 
```

# cplex - 使用 ILOG 在 CPLEX 中最大化目标函数

> ID：16200784
> 
> 赞同：1
> 
> 时间：2013-04-24T19:41:25.423
> 
> 标签：cplex, ilog

我正在处理一个项目，我想知道关于 CPLEX for ILOG 的功能。例如，我为每个客户销售产品，我对 6 种产品中的每一种都有不同的概率。这意味着一个人购买产品的概率是不同的。假设我有 2 个客户和 6 个产品。对于第一个客户，第一个产品的概率是 0.5，第二个产品的概率是 0.3，等等……所以我想最大化我的利润，我知道每种产品的收入。我的问题是如何根据这些概率选择最有利可图的产品。显然，必须有一种使用这些概率的方法。在项目中，它们只是给出概率，但没有解释如何使用它们。现在，我的功能是这样的：

```
maximize
 sum (c in Customers, p in Products, ch in Channels)  (Revenue[p] * quantity[c][ch] - quantity[c][ch] * Cost[ch]); 
```

数量用于确定渠道用于销售产品的次数。4 个不同的频道需要付费。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:56:45.520

我不清楚您要为其获取值的决策变量是什么。我猜您正在尝试查找每个渠道上每个客户的数量（数量[c][ch] 是模型中的变量，而收入和成本是已知的？）。

我也有点困惑，为什么产品的数量变量没有明显的索引 - 如果这是您正在处理的模型类型，这似乎更正常，例如：

```
maximize
 sum (c in Customers, p in Products, ch in Channels)  (Revenue[p] * quantity[c][ch][p] - quantity[c][ch][p] * Cost[ch]); 
```

当然，我可能完全错了……另外，我可能对这里的术语玩得又快又松，但我想至少了解一个简单的开始方法。一旦你有你需要的东西，你就可以扩展模型或研究更复杂的不确定性处理，可能更复杂地处理条件概率，使用多个场景等。

为了包括概率，实现这一点的一个简单方法是考虑期望值，它可以简单地被认为是价值乘以它的概率，因此在此基础上，概率为 0.3 的 100 美元的销售只有 30 美元的期望值，而概率为 0.5 的 80 美元的不同销售预期为 40 美元，因此更有价值。这是你要找的那种推理吗？

如果这可以作为初始方法，那么您可以尝试以下方法：

```
maximize
 sum (c in Customers, p in Products, ch in Channels)  Probability[p] * (Revenue[p] * quantity[c][ch][p] - quantity[c][ch][p] * Cost[ch]); 
```

# java - 代理模式 - 加载到内存中

> ID：16200787
> 
> 赞同：1
> 
> 时间：2013-04-24T19:41:34.123
> 
> 标签：java, proxy-classes

我正在查看解释代理模式的代码示例。这是代码：

```
/**
* Proxy
*/
public class ImageProxy implements Image {

/**
 * Private Proxy data 
 */
private String imageFilePath;

/**
 * Reference to RealSubject
 */
private Image proxifiedImage;

public ImageProxy(String imageFilePath) {
    this.imageFilePath= imageFilePath;  
}

@Override
public void showImage() {

    // create the Image Object only when the image is required to be shown

    proxifiedImage = new HighResolutionImage(imageFilePath);

    // now call showImage on realSubject
    proxifiedImage.showImage();

}

}

/**
 * RealSubject
 */
public class HighResolutionImage implements Image {

public HighResolutionImage(String imageFilePath) {

    loadImage(imageFilePath);
}

private void loadImage(String imageFilePath) {

    // load Image from disk into memory
    // this is heavy and costly operation
}

@Override
public void showImage() {

    // Actual Image rendering logic

}

}

/**
  * Image Viewer program
 */
public class ImageViewer {

public static void main(String[] args) {

// assuming that the user selects a folder that has 3 images    
//create the 3 images   
Image highResolutionImage1 = new ImageProxy("sample/veryHighResPhoto1.jpeg");
Image highResolutionImage2 = new ImageProxy("sample/veryHighResPhoto2.jpeg");
Image highResolutionImage3 = new ImageProxy("sample/veryHighResPhoto3.jpeg");

// assume that the user clicks on Image one item in a list
// this would cause the program to call showImage() for that image only
// note that in this case only image one was loaded into memory
highResolutionImage1.showImage();

// consider using the high resolution image object directly
Image highResolutionImageNoProxy1 = new HighResolutionImage("sample/veryHighResPhoto1.jpeg");
Image highResolutionImageNoProxy2 = new HighResolutionImage("sample/veryHighResPhoto2.jpeg");
Image highResolutionImageBoProxy3 = new HighResolutionImage("sample/veryHighResPhoto3.jpeg");

// assume that the user selects image two item from images list
highResolutionImageNoProxy2.showImage();

// note that in this case all images have been loaded into memory 
// and not all have been actually displayed
// this is a waste of memory resources

} 
```

}

假设代理模式正确实现，这是程序的主要方法。这是我想知道的：代码中的注释说，当我们使用代理图像对象时，如果我们将图片加载到内存中，则仅加载该图像。但是如果我们不使用代理，直接创建真实图像，当我们加载这个类的一个实例时，我们会将这个类的所有实例加载到内存中。我不明白为什么会这样。是的，代理模式的重点就是这样做，但我不明白为什么当我们调用 highResolutionImageNoProxy2.showImage(); 时所有 3 个 highResolutionImageNoProxy 对象都加载到内存中；. 任何人都可以解释一下吗？

谢谢

**编辑：**我想我知道为什么了。因为ImageProxy类只有在尝试对对象进行操作时才会调用HighResolutionImage类的构造函数，但是如果我们直接创建一个HighResolutionImage，那么由于它的构造函数创建了对象，所以所有的对象都被加载到内存中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:50:55.937

该代码假定当您创建 的实例时`HighResolutionImage`，即使`showImage()`未调用图像，图像也会加载到内存中。

代理将确保仅在调用图像时才将图像加载到内存`showImage()`中。

```
//load veryHighResPhoto1 to memory
Image highResolutionImageNoProxy1 = new HighResolutionImage("sample/veryHighResPhoto1.jpeg");
//load veryHighResPhoto2 to memory
Image highResolutionImageNoProxy2 = new HighResolutionImage("sample/veryHighResPhoto2.jpeg");
//load veryHighResPhoto3 to memory
Image highResolutionImageBoProxy3 = new HighResolutionImage("sample/veryHighResPhoto3.jpeg"); 
```

* * *

```
//load just the proxys (image not loaded yet)
Image highResolutionImage1 = new ImageProxy("sample/veryHighResPhoto1.jpeg");
Image highResolutionImage2 = new ImageProxy("sample/veryHighResPhoto2.jpeg");
Image highResolutionImage3 = new ImageProxy("sample/veryHighResPhoto3.jpeg");
//trigger the load of the image into memory
highResolutionImage1.showImage(); 
```

# paypal - 我在延迟捕获过程中使用什么方法？

> ID：16200793
> 
> 赞同：1
> 
> 时间：2013-04-24T19:42:11.367
> 
> 标签：paypal

我看到的文档说我应该打电话并传递一个 ORIGID。但是，方法是什么？直接来自文档：

> TRXTYPE=D&TENDER=C&PWD=x1y2z3&PARTNER=PayPal&VENDOR=.SuperMerchant &USER=SuperMerchant&ORIGID=VXYZ00887892

好的，这太棒了。我该如何打这个电话？我是否使用了错误的 API？我一直在做一个 DoCapture，但这需要一个三步过程来获得一个事务 ID，这似乎与这个 ORIGID 大不相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:34:05.000

PayPal 有多种 API。您列出的 API 字符串是 Payflow Pro API 套件的一个示例，该套件通常由仅使用 PayPal 作为支付网关的商家使用。它没有 METHOD：而是 TRXTYPE=D 指定它是延迟捕获。有关 Payflow API 的更多信息，您应该参考[https://www.paypalobjects.com/webstatic/en_US/developer/docs/pdf/pp_payflowpro_guide.pdf](https://www.paypalobjects.com/webstatic/en_US/developer/docs/pdf/pp_payflowpro_guide.pdf)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-21T16:59:50.597

我为此挣扎了很长时间。PayPal 的人似乎不太了解 .NET。所以我终于让它以这种方式工作（.Net 解决方案）。此解决方案使用我在 PayPal 创建的添加用户 (test123)：

```
protected void Button1_Click(object sender, EventArgs e)
        {
            string myTokenRequest = "PARTNER=PayPal&VENDOR=kathypatrick77&USER=test123&PWD=test321&TRXTYPE=A&AMT=2.00&CREATESECURETOKEN=Y&SECURETOKENID=20128208de1413abc3d60c86v46yd+@dffg5";

            HttpWebRequest wrWebRequest = (HttpWebRequest)WebRequest.Create("https://pilot-payflowpro.paypal.com");
            wrWebRequest.Method = "POST";

            StreamWriter requestWriter = new StreamWriter(wrWebRequest.GetRequestStream());
            requestWriter.Write(myTokenRequest);
            requestWriter.Close();

            HttpWebResponse hwrWebResponse = (HttpWebResponse)wrWebRequest.GetResponse();
            StreamReader responseReader = new StreamReader(wrWebRequest.GetResponse().GetResponseStream());

            //and read the response
            string responseData = responseReader.ReadToEnd();
            TextBox1.Text = responseData.ToString();
            responseReader.Close();
        }
```

# c# - Lucene.NET - 模糊搜索 - 查找匹配请求

> ID：16200799
> 
> 赞同：2
> 
> 时间：2013-04-24T19:42:34.380
> 
> 标签：c#, .net, lucene, indexing, lucene.net

我有一个索引存储，其中包含各种短语，但有些拼写错误，例如：-

```
"Hallo World"
"Qick Brown Fox"
"Long tame no sees" 
```

我正在使用布尔查询运行模糊搜索，但如果有匹配项，我不知道如何检索匹配的短语。我不只是想要从索引存储中轻松获得的短语。

例如，如果我的搜索是（“Hello World”或“Keep it Real”或“Long Time no See”）的布尔查询，它将返回“Hallo World”和“Long tame no sees”。但是我还需要知道我原来的短语“Hello World”和“Long Time no See”是匹配的。有任何想法吗？我的搜索方法如下（当前返回短语匹配但拼写错误）：-

```
public IEnumerable<DocumentWrapper> Search(List<string> fieldsToSearch, List<string> phrases, string path)
{

    var luceneDir = FSDirectory.Open(new DirectoryInfo(path));

    if (luceneDir == null)
    {
        Logging.Error("Invalid Index Directory during Search");
        return null;
    }
    Logging.Information(string.Format("Searching for phrase(s): {0}", phrases.ToSeparatedList()));

    var analyzer = new StandardAnalyzer(Version.LUCENE_30);
    IndexReader indexReader;
    try
    {
        indexReader = IndexReader.Open(luceneDir, true);
    }
    catch (FileNotFoundException)
    {
        Logging.Error("Lucene Directory has no items");
        return null;
    }

    var matchedDocuments = new List<DocumentWrapper>();
    try
    {
        var searcher = new IndexSearcher(indexReader);
        MultiFieldQueryParser queryParser = null;
        if (fieldsToSearch != null)
        {
            queryParser = new MultiFieldQueryParser(Version.LUCENE_30, fieldsToSearch.ToArray(), analyzer);
        }
        else
        {
            queryParser = new MultiFieldQueryParser(Version.LUCENE_30,
                                                    indexReader.GetFieldNames(
                                                        IndexReader.FieldOption.INDEXED_NO_TERMVECTOR).ToArray(),
                                                    analyzer);
        }

        //Add a fuzzy search using a tilde on each word in the phrase then 'AND' them together.
        var booleanQueries = new List<BooleanQuery>();
        foreach (var phrase in phrases)
        {
            var terms = phrase.Split(new[] {" "}, StringSplitOptions.RemoveEmptyEntries);
            var booleanQuery = new BooleanQuery();
            foreach (var term in terms)
            {
                booleanQuery.Add(queryParser.Parse(term.Replace("~", "") + "~"), Occur.MUST);
                    //'AND' the words in the phrase together.
            }
            booleanQueries.Add(booleanQuery);
        }

        //combine our boolean queries with 'OR' i.e. (word1 and word2 and word3) OR (word4 and word5) OR (word 6)
        var combined = new BooleanQuery();
        foreach (var query in booleanQueries)
        {
            combined.Add(query, Occur.SHOULD);
        }

        var maxHits = 100; //TODO - configurable
        var collector = TopScoreDocCollector.Create(maxHits, true);
        searcher.Search(combined, collector);
        var hits = collector.TopDocs().ScoreDocs;

        foreach (var t in hits)
        {
            var hitDoc = searcher.Doc(t.Doc);
            var indexDoc = new DocumentWrapper();
            foreach (var field in hitDoc.GetFields())
            {
                if (field.Name == "Score")
                {
                    indexDoc.Contents.Add(field.Name, t.Score);
                }
                else
                {
                    indexDoc.Contents.Add(field.Name, hitDoc.Get(field.Name));
                }
            }
            matchedDocuments.Add(indexDoc);
        }
    }
    catch
    {
        //TODO - Logging?
    }

    return matchedDocuments;
} 
```

# rails-activerecord - 使用 params hash 在 rails 4.0 中保存记录

> ID：16200801
> 
> 赞同：1
> 
> 时间：2013-04-24T19:42:48.643
> 
> 标签：rails-activerecord, params, ruby-on-rails-4, strong-parameters

我正在尝试使用 form_for 辅助方法在 Rails 中创建新记录。我认为 params 哈希是空白的，因为我在提交表单时不断收到空白错误。

这是我的表格：

```
<% provide(:title, "Add Department") %>
<h1>Add Department</h1>

<div class="row">
    <div class="span6 offset3">
        <%= form_for(@department) do |f| %>
            <%= render 'shared/department_error_messages' %>

            <%= f.label :Full_Department_Title %>
            <%= f.text_field :full_name %>

            <%= f.label :Department_Abbreviation %>
            <%= f.text_field :abbreviation %>

            <%= f.submit "Add department", class: "btn btn-large btn-primary" %>
        <% end %>
    </div>
</div> 
```

这是我的部门控制器

```
class DepartmentsController < ApplicationController
    def show
        @department = Department.find(params[:id])
    end

    def new
        @department = Department.new
    end

    def create
        @department = Department.new(params[department_params])     # Not the final implementation!
        if @department.save
            redirect_to root_path
        else
            render 'new'
        end
    end

    private

    def department_params
        # This says that params[:department] is required, but inside that, only params[:department][:full_name] and 
        # params[:department][:abbreviation] are permitted. Unpermitted params will be stripped out         

        params.require(:department).permit(:full_name, :abbreviation)
    end
end 
```

这是模型：

```
class Department < ActiveRecord::Base
    validates :full_name, presence: true, length: { minimum: 6 }
end 
```

当我提交时，会出现错误，提示 full_name 不能为空（并且字段现在为空）。调试信息是：

```
--- !ruby/hash:ActionController::Parameters utf8: ✓ 
authenticity_token: EjfYjWAzaw7YqVZAkCPZwiEMFfb2YLIRrHbH1CpZOwA= 
department: !ruby/hash:ActionController::Parameters   
full_name: Sports Department   
abbreviation: SD 
commit: Add department 
action: create 
controller: departments 
```

我还检查了开发日志。事务开始，然后回滚。我可以在控制台中保存一条记录，所以我猜测它与 params 哈希有关，但无法弄清楚。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T20:13:56.613

这一行：

```
@department = Department.new(params[department_params]) 
```

应该：

```
@department = Department.new(department_params) 
```

而且，作为一个小问题（但不会导致此问题），您的标签标签应如下所示：

```
f.label :full_name, "Full Department Title" 
```

这样它们就可以正确地与输入相关联。

# c# - 环境.换行和替换

> ID：16200805
> 
> 赞同：1
> 
> 时间：2013-04-24T19:43:01.617
> 
> 标签：c#, string

我试图让人们将帐号放入文本框中，我试图让他们以几种不同的方式输入它们

IE：

```
1234
5678
9101
1213
```

或者：

```
1234,5678,9101,1112
```

但由于某种原因，我的 Replace 函数不想尊重 Environment.Newline 或 "\r\n"

```
public string[] getAccounts()
{
    string textLines;
    string[] accounts;

    textLines = accountsTextBox.Text;
    textLines.Replace(Environment.NewLine, ",");
    accounts = textLines.Split(Environment.NewLine.ToArray(), StringSplitOptions.RemoveEmptyEntries);

    return accounts;
} 
```

我将文本框中的所有内容都抓取到一个字符串中，然后想将所有内容强制放入一个逗号分隔的列表中，最后用逗号分割该列表。

我的替换中缺少什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T19:45:00.240

这是因为[String.Replace](http://msdn.microsoft.com/en-us/library/system.string.replace.aspx)不会修改原始字符串，而是返回一个新字符串。您应该更新该行

```
textLines.Replace(Environment.NewLine, ","); 
```

如下：

```
textLines = textLines.Replace(Environment.NewLine, ","); 
```

此外，您的电话还有另一个问题[`String.Split()`](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)：

它正试图分裂`Environment.NewLine.ToArray()`。假设您正确地进行了替换，此时它应该已经用逗号替换了您的换行符，因此字符串中不会留下换行符。

我的最终建议如下：

```
// At the class level
static char[] delimiters = new char[]{','};

// In your getAccounts() function
textLines = accountsTextBox.Text.Replace(Environment.NewLine, ",");
accounts = textLines.Split(delimiters, StringSplitOptions.RemoveEmptyEntries); 
```

或者，您可以`String.Replace()`完全放弃对 的调用，只更新您的分隔符数组，如下所示：

```
// At the class level
static char[] delimiters = ("\r\n,").ToArray(); // treat '\r' '\n' and ',' as delimiters

// In your getAccounts() function
accounts = accountsTextBox.Text.Split(delimiters, StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T19:44:53.553

```
 textLines = textLines.Replace( ... ) 
```

# javascript - 如何使用 javascript 或 jQuery 使此表格填充可用的宽度和高度？

> ID：16200807
> 
> 赞同：1
> 
> 时间：2013-04-24T19:43:11.850
> 
> 标签：javascript, jquery, html, css, fluid-layout

jsFiddle：http: [//jsfiddle.net/ZvygQ/](http://jsfiddle.net/ZvygQ/)

如何拉伸表格以使用流体宽度容器允许的整个宽度和高度，同时保留固定标题和滚动 tbody？

查看我的[jsFiddle](http://jsfiddle.net/ZvygQ/)以了解当前的工作方式。我想要相同的功能，但全宽和全高。欢迎使用 HTML、CSS、JavaScript 和 jQuery 解决方案！

![工作台流体宽度高度](https://i.stack.imgur.com/S42xy.png)

（将固定标题表滚动到[CSSBakery](http://www.cssbakery.com/2010/12/css-scrolling-tables-with-fixed.html)的原始功劳，谢谢！）

HTML：

```
<div class="fluid-width-and-height">
  <div class="scrollableContainer">
    <div class="scrollingArea">
        <table class="cruises scrollable">
          <thead>
                <tr>
              <th class="name"><div>Name</div></th>
              <th class="operator"><div>Operator</div></th>
              <th class="began"><div>Began operation</div></th>
              <th class="tonnage"><div>Tonnage</div></th>
              <th class="status"><div>Status</div></th>
                </tr>
            </thead>
            <tbody>
                      <tr>
            <td class="name"><div>Seabourne Sun</div></td>
            <td class="operator"><div>Seabourn Cruise Line</div></td>
            <td class="began"><div>1988</div></td>
            <td class="tonnage"><div></div></td>
            <td class="status"><div >Ended service in 2002, currently operating as Prinsendam</div></td>                        
          </tr>
                  <tr>
            <td class="name"><div>Adventures of the Seas</div></td>
            <td class="operator"><div>Royal Caribbean International</div></td>
            <td class="began"><div>2001</div></td>
            <td class="tonnage"><div>138,000</div></td>
            <td class="status"><div >Operating</div></td>                        
          </tr>
                  <tr>
            <td class="name"><div>Oceanic Independence</div></td>
            <td class="operator"><div>American Hawaiian Cruises / American Global Line</div></td>
            <td class="began"><div>1974</div></td>
            <td class="tonnage"><div>23,719</div></td>
            <td class="status"><div >Named formerly (1951-1974) and subsequently renamed (1982-2006) the Independence, renamed the Oceanic (2006), sold for scrap in 2008 but remains in mothballs</div></td>                        
          </tr>
                  <tr>
            <td class="name"><div>Cunard Ambassador</div></td>
            <td class="operator"><div>Cunard Line</div></td>
            <td class="began"><div>1972</div></td>
            <td class="tonnage"><div>14,160</div></td>
            <td class="status"><div >Burnt 1974, rebuilt into a livestock carrier, renamed Linda Clausen, later Procyon, Raslan. Scrapped 1984 after a second fire.</div></td>                        
          </tr>
                  <tr>
            <td class="name"><div>Aegean Beauty</div></td>
            <td class="operator"><div>Voyages to Antiquity</div></td>
            <td class="began"><div>1973</div></td>
            <td class="tonnage"><div>11,563</div></td>
            <td class="status"><div >Formerly Aegean Dolphin and Aegean I. Operating</div></td>                        
          </tr>
                  <tr>
            <td class="name"><div>Serenade of the Seas</div></td>
            <td class="operator"><div>Royal Caribbean International</div></td>
            <td class="began"><div>2003</div></td>
            <td class="tonnage"><div>90,090</div></td>
            <td class="status"><div >Operating</div></td>                        
          </tr>
                  <tr>
            <td class="name"><div>Queen Elizabeth 2</div></td>
            <td class="operator"><div>Cunard Line</div></td>
            <td class="began"><div>1969</div></td>
            <td class="tonnage"><div>70,327</div></td>
            <td class="status"><div >Left fleet in November 2008</div></td>                        
          </tr>
                  <tr>
            <td class="name"><div>Queen Elizabeth</div></td>
            <td class="operator"><div>Cunard Line</div></td>
            <td class="began"><div>2010</div></td>
            <td class="tonnage"><div>92,000</div></td>
            <td class="status"><div >Operating</div></td>                        
          </tr>
                  <tr>
            <td class="name"><div>Regent Sea</div></td>
            <td class="operator"><div>Regency Cruises</div></td>
            <td class="began"><div>1957</div></td>
            <td class="tonnage"><div></div></td>
            <td class="status"><div >Began operation in 1957 as the Gripsholm (II) for Swedish America Line. Ended operation when Regency went bankrupt in 1995\. Was to be converted to a casino ship, but later marked for scrap. Prior to scrapping, was looted by pirates, then sank in heavy seas in 2001.</div></td>                        
          </tr>
                  <tr>
            <td class="name"><div>Allure of the Seas</div></td>
            <td class="operator"><div>Royal Caribbean International</div></td>
            <td class="began"><div>2010</div></td>
            <td class="tonnage"><div>225,000</div></td>
            <td class="status"><div >Starts service in December 2010</div></td>                        
          </tr>
                  <tr>
            <td class="name"><div>Amadea</div></td>
            <td class="operator"><div>Phoenix Reisen</div></td>
            <td class="began"><div>2006</div></td>
            <td class="tonnage"><div>28,717</div></td>
            <td class="status"><div >Operating. Ex-Asuka</div></td>                        
          </tr>
                  <tr>
            <td class="name"><div>Amant</div></td>
            <td class="operator"><div>PhoenixVoyages (Vietnam)</div></td>
            <td class="began"><div>2010</div></td>
            <td class="tonnage"><div></div></td>
            <td class="status"><div >Built in 2010 by a local Vietnamese shipyard (Vuotsong), L'Amant operates on the Mekong River in Vietnam, and is without any doubt the most well constructed vessel sailing in Vietnam.</div></td>                        
          </tr>
                  <tr>
            <td class="name"><div>Oasis of the Seas</div></td>
            <td class="operator"><div>Royal Caribbean Cruise Line</div></td>
            <td class="began"><div>2009</div></td>
            <td class="tonnage"><div>225,282</div></td>
            <td class="status"><div >Operating</div></td>                        
          </tr>
                  <tr>
            <td class="name"><div>Andes</div></td>
            <td class="operator"><div>Royal Mail Lines</div></td>
            <td class="began"><div>1959</div></td>
            <td class="tonnage"><div>27,000</div></td>
            <td class="status"><div >Was liner, became cruise ship in 1959.</div></td>                        
          </tr>
                  <tr>
            <td class="name"><div>Anna Nery</div></td>
            <td class="operator"><div>Companhia de Navegacao Costeirab</div></td>
            <td class="began"><div>1962</div></td>
            <td class="tonnage"><div></div></td>
            <td class="status"><div >Ended service in 1978\. Currently operating as Salamis Glory</div></td>                        
          </tr>
                  <tr>
            <td class="name"><div>National Geographic Endeavour</div></td>
            <td class="operator"><div>Lindblad Expeditions</div></td>
            <td class="began"><div>1996</div></td>
            <td class="tonnage"><div></div></td>
            <td class="status"><div >Operating, also known as Endeavour</div></td>                        
          </tr>
                  <tr>
            <td class="name"><div>Liberty of the Seas</div></td>
            <td class="operator"><div>Royal Caribbean International</div></td>
            <td class="began"><div>2007</div></td>
            <td class="tonnage"><div>154,407</div></td>
            <td class="status"><div >Operating</div></td>                        
          </tr>
                  <tr>
            <td class="name"><div>Norwegian Epic</div></td>
            <td class="operator"><div>Norwegian Cruise Line</div></td>
            <td class="began"><div>2010</div></td>
            <td class="tonnage"><div>153,000</div></td>
            <td class="status"><div >Operating</div></td>                        
          </tr>
                  <tr>
            <td class="name"><div>Independence of the Seas</div></td>
            <td class="operator"><div>Royal Caribbean International</div></td>
            <td class="began"><div>2008</div></td>
            <td class="tonnage"><div>154,407</div></td>
            <td class="status"><div >Operating</div></td>                        
          </tr>
                  <tr>
            <td class="name"><div>Navigator of the Seas</div></td>
            <td class="operator"><div>Royal Caribbean International</div></td>
            <td class="began"><div>2002</div></td>
            <td class="tonnage"><div>  138,000</div></td>
            <td class="status"><div >Operating</div></td>                        
          </tr>
                  <tr>
            <td class="name"><div>Caribbean Princess</div></td>
            <td class="operator"><div>Princess Cruises</div></td>
            <td class="began"><div>2004</div></td>
            <td class="tonnage"><div>112,894</div></td>
            <td class="status"><div >Operating</div></td>                        
          </tr>
              </tbody>
        </table>
    </div>
  </div>
</div> 
```

CSS：

```
 * { padding: 0; margin: 0; }
body {
    background:lightgray;
    margin:10px;
}
.fluid-width-and-height {
    display:block;
    width:100%;
    height:100%;
}
  table.cruises { 
    font-family: verdana, arial, helvetica, sans-serif;
    font-size: 11px;
    cellspacing: 0; 
    border-collapse: collapse; 
    width: 535px;    
    }
  table.cruises td { 
    border-left: 1px solid #999; 
    border-top: 1px solid #999;  
    padding: 2px 4px;
    }
  table.cruises tr:first-child td {
    border-top: none;
  }
  table.cruises th { 
    border-left: 1px solid #999; 
    padding: 2px 4px;
    background: #6b6164;
    color: white;
    font-variant: small-caps;
    }
  table.cruises td { background: #eee; overflow: hidden; }

  div.scrollableContainer { 
    position: relative; 
    width: 592px; 
    padding-top: 2em; 
    margin: 40px;    
    border: 1px solid #999;
    background: #6b6164;
    }
  div.scrollingArea { 
    height: 240px; 
    overflow: auto; 
    }

  table.scrollable thead tr {
    left: -1px; top: 0;
    position: absolute;
    }

  table.cruises .name     div { width: 108px; }
  table.cruises .operator div { width: 126px; }
  table.cruises .began    div { width: 76px;  text-align:center; }
  table.cruises .tonnage  div { width: 60px;  text-align:center; }
  table.cruises .status   div { width: 160px; }

  table.cruises td.operator { background: #ebcb4d; }
  table.cruises td.tonnage  { background: white; }
  table.cruises td.name     { background: #C7E0C1; }  
  table.cruises td.began    { background: #B7C3E8; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:53:59.143

*   更好的建议...尝试使用 DataTables for JQuery ( [http://www.datatables.net](http://www.datatables.net) )

* * *

您可以使用表格上的 CSS 样式“宽度”并将其设置为 100%。

```
style="width:100%;" 
```

然后表格将是父 DIV 容器的 100% 宽度。只需将您的 DIV 设置为您想要的宽度即可。

如果您希望 DIV 拉伸浏览器窗口的宽度，您可以在 DIV 上尝试相同的技术，或者查看浏览器宽度并动态设置值。您可以使用 javascript 来获取（和设置）这些值。

[http://www.w3schools.com/jsref/prop_win_innerheight.asp](http://www.w3schools.com/jsref/prop_win_innerheight.asp)

# api - 通过 API 发布多个问题以进行 redmine

> ID：16200812
> 
> 赞同：2
> 
> 时间：2013-04-24T19:43:38.213
> 
> 标签：api, post, curl, batch-file, redmine

完成 Noob to curl、REST API 和 redmine 卡在一些可能很简单的事情上，但尽管在论坛上拖了很长时间，我还是找不到答案......

我一直在尝试将多个问题批量导入到 Redmine，但没有成功。

我现在正在使用 curl 试验 REST api。我可以单独发布问题，但无法弄清楚如何同时发布许多问题？我认为这是人们进口大量东西以进行redmine的常见问题......

这是我正在使用的 curl 命令：

```
curl -v -H "Content-Type: application/json" -X POST --data "@test2.json" \
  -u user:password localhost/redmine/issues.json 
```

这是 test2.json 文件：

```
{
    "issue": {
    "project_id": 9,
    "subject": "TEST5",
    "notes": "foobar",
    "priority_id": 2
    },

    "issue": {
    "project_id": 9,
    "subject": "TEST6",
    "notes": "barfoo",
    "priority_id": 3
    }    
} 
```

目前它只涉及第二个问题......有人可以建议我可能做错了什么或更好的选择吗？

### 环境

Windows 7 上的 Bitnami Redmine 堆栈

```
Redmine version                          2.3.0.stable
Ruby version                             1.9.3 (i386-mingw32)
Rails version                            3.2.13
Environment                              production
Database adapter                         Mysql2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-08T20:04:27.540

尝试使用名为[requests](http://docs.python-requests.org/en/latest/)的 python 模块。它将帮助您打开 URL，以便您可以从 Redmine 发布和获取信息。这是我用来将数据推送到本地 Redmine 服务器的方法。

例如，您可以通过以下格式将用户发布到 Redmine：

```
username = 'admin'
password = 'admin'
url = 'http://localhost:3000/users.json'

payload = {
        'user': {
            'login': login,
            'password': password,
            'firstname': firstname,
            'lastname': lastname,
            'mail': mail
        }
    }

parameters_json = json.dumps(payload)
headers = {'Content-Type': 'application/json'}
r = requests.post(url, auth=(username, password), data=parameters_json, headers=headers) 
```

因此，不是用户，而是通过以下方式发布问题：localhost:3000/issues.json

并遵循 Redmine 的[RESTful API 指南](http://www.redmine.org/projects/redmine/wiki/Rest_Issues)，以便您输入正确的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T22:17:20.843

我在这里找到了导入外部数据的最简单的解决方案：

[http://www.redmine.org/boards/1/topics/37725?r=38232](http://www.redmine.org/boards/1/topics/37725?r=38232)

这允许直接从 csv 导入，这对我来说非常适合！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-02T15:41:37.870

我在那里发表了评论，仍然需要记录安装，对于那些不知道作曲家的人。它是一个 CSV 导入器，如果您了解 PHP，您可以在解析器类家族中添加更多输入格式。 [https://github.com/juanmf/RedmineIssueImporter](https://github.com/juanmf/RedmineIssueImporter)

基本上，您将 csv 字段定义为 yml 中的 Issue 字段映射并运行脚本。

# javascript - Html/css/js div 拆分到块 jsfiddle 下

> ID：16200814
> 
> 赞同：0
> 
> 时间：2013-04-24T19:43:41.140
> 
> 标签：javascript, html, css

我如何获得像图像一样的中间块（它说：“你好”的块）：

它是 ![在此处输入图像描述](https://i.stack.imgur.com/rJHRs.png) 怎样的：我想要它： ![在此处输入图像描述](https://i.stack.imgur.com/IUTcS.png)

jsfiddle + 脚本：http: [//jsfiddle.net/mWmsU/](http://jsfiddle.net/mWmsU/)

html:

```
<div id="container">
<div class="overlay"></div>
    <div class="btnbar">
        <div class="btn" id="it1"><div class="btnp" id="txt"></div><h2>Knopje 1</h2></div>
        <div class="btn" id="it2"><div class="btnp"></div><h2>Knopje 2</h2></div>
        <div class="btn" id="it3"><div class="btnp"></div><h2>Knopje 3</h2></div>
        <div class="btn" id="it4"><div class="btnp"></div><h2>Knopje 4</h2></div>
        <div class="btn" id="it5"><div class="btnp"></div><h2>Knopje 5</h2></div>
        <div class="btn" id="it6"><div class="btnp"></div><h2>Knopje 6</h2></div>
        <div class="btn" id="it7"><div class="btnp"></div><h2>Knopje 7</h2></div>
    </div>
    <div class="largebar">
        <div class="pointer"></div>
        <div class="largebarcontent">
            <h1 id="title">Hallo</h1>
        </div>
    </div>
</div> 
```

它应该有点像 ios 主屏幕

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:48:26.173

使用这个...并查看演示的 HTML 和 CSS...

```
$(function(){
    var currentItem;
    var plusLeft;
    $(window).bind("resize", resizeWindow);
    resizeWindow();
//              $(".overlay.largeOpen").css("height", $("body").height());

    $(".btn").click(openItem);
    $(".overlay").click(function(){
        $(currentItem).css("z-index", 9);
        $(".row").css("padding-bottom", 0);
        $("#"+currentItem.id + " h2").css("visibility", "visible");
        $("#container, .overlay").toggleClass("largeOpen");
        $(".btn").click(openItem);
    });
    $("#txt").text(window.innerWidth);

    function openItem(){
        currentItem = this;
        $('html,body').animate({
            scrollTop: $(this).position().top
        }, 700);
        $("#container").toggleClass("largeOpen");
        $(this).parent().css("padding-bottom", 100);
        $(".pointer").css("left", $(this).position().left+plusLeft);
        $(".largebar").css("top", $(this).position().top+117);
        $(this).css("padding-button", "117px");
        $(this).css("z-index", 101);
        $("#"+currentItem.id + " h2").css("visibility", "hidden");
//                  console.log($(this).css('z-index') == 10);
        $(".btn").unbind('click');
    }

    function resizeWindow(e) {
        if(currentItem){
            $(".pointer").css("left", $("#"+currentItem.id).position().left+plusLeft);
            $(".largebar").css("top", $("#"+currentItem.id).position().top+117);
        }
        $(".overlay.largeOpen").css("height", $("body").height());
        if(window.innerWidth <= 320) plusLeft = 9;
        if(window.innerWidth > 320) plusLeft = 20;
    }
}); 
```

看看这个**[DEMO](http://jsfiddle.net/mWmsU/19/)**

# r - 用不可靠的数据总结一个 data.table

> ID：16200815
> 
> 赞同：3
> 
> 时间：2013-04-24T19:43:51.553
> 
> 标签：r, data.table

我有一个[`data.table`](http://cran.r-project.org/web/packages/data.table/)事件记录，例如用户 ID、居住国家和事件。例如，

```
dt <- data.table(user=c(rep(3, 5), rep(4, 5)),
                 country=c(rep(1,4),rep(2,6)),
                 event=1:10, key="user") 
```

如您所见，数据有些损坏：事件 5 报告用户 3 在国家 2 中（或者他可能旅行过——这对我来说无关紧要）。所以当我尝试总结数据时：

```
dt[, country[.N] , by=user]
   user V1
1:    3  2
2:    4  2 
```

我为用户 3 获取了错误的国家/地区。理想情况下，我想为用户获取最常见的国家/地区以及他在那里度过的时间百分比：

```
 user country support
1:    3       1     0.8
2:    4       2     1.0 
```

我怎么做？

实际数据有 ~10^7 行，因此解决方案必须扩展（这就是我使用的原因`data.table`，而不是`data.frame`毕竟）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T20:00:44.100

另一种方式：

已编辑。`table(.)`是罪魁祸首。将其更改为完整的`data.table`语法。

```
dt.out<- dt[, .N, by=list(user,country)][, list(country[which.max(N)], 
               max(N)/sum(N)), by=user]
setnames(dt.out, c("V1", "V2"), c("country", "support"))
#    user country support
# 1:    3       1     0.8
# 2:    4       2     1.0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T19:53:44.200

使用`plyr`的`count`功能：

```
dt[, count(country), by = user][order(-freq),
                                list(country = x[1],
                                     support = freq[1]/sum(freq)),
                                by = user]
#   user country support
#1:    4       2     1.0
#2:    3       1     0.8 
```

想法是计算每个用户的国家，按最大频率排序，然后得到你喜欢的数据。

感谢@mnel，一个更聪明的答案，它不使用额外的功能：

```
dt[, list(freq = .N),
     by = list(user, country)][order(-freq),
                               list(country = country[1],
                                    support = freq[1]/sum(freq)),
                               by = user] 
```

> ID：16200819
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200820
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200821
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200822
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200823
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200824
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200825
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200826
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# html - 内容随文字向下移动

> ID：16200827
> 
> 赞同：1
> 
> 时间：2013-04-24T19:44:09.837
> 
> 标签：html, css, twitter-bootstrap

我有一个内联元素，分为三个部分：首先是一个只有背景图像的元素。第二个用于内容，最后一个用于另一个仅带有背景图像的内容。HTML是

```
<span class="box-l"></span>
<span class="box-c">some text</span>
<span class="box-r"></span> 
```

和CSS：

```
.box-l{
    width: 7px;
    height: 20px;
    min-width: 10px;
    background:url(../img/c_box.png) 0 0;
    display: inline-block;
    border: 0px;
}
.box-r{
    width: 5px;
    height: 20px;
    min-width: 5px;
    background:url(../img/c_box.png) -42px 0;
    display: inline-block;
}
.box-c{
    height: 20px;
    min-width: 10px;
    max-width: 40px;
    display: inline-block;
    font-size: 11px;
    line-height: 20px;
    background:url(../img/c_box.png) -9px 0;
} 
```

当中心元素没有任何东西时，结果如下：![结果很好](https://i.stack.imgur.com/Mv0eH.png) 但是当我将一些文本放入第二个元素时，结果是这样的：![错误的结果](https://i.stack.imgur.com/ZxuHE.png)

为什么中间元素随着里面的文字向下移动？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T19:47:13.443

使用 display: inline-block: 时不要忘记把 vertical-align: middle; 文本并以相同的时间保持行高（行高）以确保垂直对齐

> ID：16200828
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200829
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200832
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200834
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# windows - Lazarus 项目窗口版本转换

> ID：16200836
> 
> 赞同：0
> 
> 时间：2013-04-24T19:44:48.217
> 
> 标签：windows, platform, lazarus

我在lazarus IDE上做了一个项目，我在我的机器win 7 x84_64上运行它并且执行得很好，然后我的客户在他的机器上测试它并且它也运行了（win 7 x84_64），但之后他在Windows上尝试了XP 但它没有运行。他没有发现错误，所以我不知道具体问题是什么，但我想知道它与“窗口兼容性”有关。有什么方法可以为 XP 平台编译我的项目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:05:48.667

您可能正在使用 64 位 Lazarus 创建 64 位应用程序。您还可以安装 32 位 Lazarus，它生成的应用程序将在 32 位和 64 位 Windows 上运行。您还可以从 64 位 Lazarus 交叉编译到 32 位 Windows，但这并非易事。对于 Lazarus 交叉编译，您可以从**[这里](http://wiki.lazarus.freepascal.org/Cross_compiling)**开始。如果您想轻松交叉编译，请查看 Lazarus CT 版本（也称为**[CodeTyphon](http://www.pilotlogic.com/sitejoom/)**）。它包含大量组件、8 个 OS/CPU 主机层（Win32、Win64、Linux32、Linux64、FreeBSD32、FreeBSD64、Solaris32、Solaris64）和 25 个 OS/CPU 目标层。更多信息**[在这里](http://www.pilotlogic.com/codetyphon/help/index.html?codetyphon_current_status.htm)**。

# vbscript - 如何从 HTA 中启动批处理文件

> ID：16200837
> 
> 赞同：3
> 
> 时间：2013-04-24T19:44:48.500
> 
> 标签：vbscript, batch-file, cmd, hta

我有一个基本的 HTA，我试图通过一个按钮启动一个批处理文件，但是当我尝试启动批处理文件时，它没有运行。当我按下按钮时，命令提示符窗口会启动，但不会运行脚本。

这是代码的简单示例：

```
<HTML>
  <HEAD>
    <TITLE>Fix</TITLE>
  </HEAD>
  <BODY>
    <FORM>
      <INPUT TYPE="Run" NAME="Button" VALUE="Click">

      <SCRIPT FOR="Button" EVENT="onClick" LANGUAGE="VBScript">
        Set WshShell = CreateObject("WScript.Shell")
        WshShell.Run "cmd.exe '.\example.bat'"
      </SCRIPT>

    </FORM>
  </BODY>
</HTML> 
```

如何从与我的 HTA 相同的工作目录（或子目录）启动批处理文件？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T20:35:55.663

**在任何地方启动CMD**进程时，您需要使用**/C**或**/K**参数作为第一个参数。

 **```
 /C     Run Command and then terminate

 /K     Run Command and then return to the CMD prompt. 
```

尝试：

```
WshShell.Run "cmd.exe '/C example.bat'" 
```

但这只是关于为什么您的脚本不起作用的解释，因为不需要使用 CMD，您可以直接运行批处理文件，因为**ShellExecute**。**

# html - 可下载的 W3C 文档（用于离线）？

> ID：16200841
> 
> 赞同：4
> 
> 时间：2013-04-24T19:44:55.150
> 
> 标签：html, css

有人知道我可以在哪里下载带有 W3C 网站的最新 CSS3 和 HTML5 规范更新中的存档吗？如果没有.. 我可以在哪里下载关于新 CSS3 属性的好文档？

非常感谢和抱歉英语不好；）

```
+ to answers: https://github.com/w3c 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T19:49:53.403

看看：[http ://www.w3.org/Style/CSS/specs.en.html](http://www.w3.org/Style/CSS/specs.en.html)

您可以查看每个模块的状态并阅读当前最相关的模块。此外，您可以打印单个模块，也可以通过下载它来打印整个 CSS 2.1，您有几个选项，例如

`This document is also available in these non-normative formats: plain text, gzip'ed tar file, zip file, gzip'ed PostScript, PDF. See also translations.`

[http://www.w3.org/TR/CSS2/](http://www.w3.org/TR/CSS2/)

坚持仅从[http://w3.org](http://w3.org)学习符合您的最大利益- 尽可能避免使用其他来源（这只是我的偏好，YPMV）

另请查看[http://www.w3.org/standards/techs/css#w3c_all](http://www.w3.org/standards/techs/css#w3c_all)以更轻松地查看哪些规范已通过[候选推荐](http://www.w3.org/2005/10/Process-20051014/tr)阶段。

# ms-access - 要求用户创建新表的替代解决方案

> ID：16200843
> 
> 赞同：1
> 
> 时间：2013-04-24T19:45:02.330
> 
> 标签：ms-access

我使用访问权限在我目前工作的非营利组织存储音乐会注册信息。我进行了设置，以便将所有赞助人联系信息转储到一张表中，并将所有音乐会注册信息转储到另一张表中。当我们更改演唱会季节时，我只需复制/粘贴“2012-13 演唱会注册表”并将其重命名为“2013-14”演唱会注册表”。

音乐会登记表是我所有其他信息的“中心”。我有大约六个摘要查询，显示特定音乐会的信息，我仍然需要为谁收款等，以及与每个文档相关联的许多 Word 邮件合并。这个设置效果很好，除了每个赛季我需要进入并将所有查询和 word 文档重新链接到新的注册表

我将在下个月底离开我的工作，我想让数据库对用户更加友好，特别是因为我相当肯定我的替代者对访问的熟悉度为零。我的问题是：

1) 除了创建一个新的注册表和逐年的后续查询之外，还有一种更优雅、更简单的方式来从一个季节过渡到另一个季节？

2）当我离开时，我如何为新人证明这个数据库是白痴的？我很害怕如果我创建了一个广泛的“操作指南”，它根本就不会被阅读，而这个人将被迫重新发明轮子。我正在玩弄创建一个总机，但我担心这会使数据库看起来更加难以接近。

感谢您的洞察力，如果有任何问题，很高兴澄清！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:48:01.550

只需制作一张桌子。将其称为“注册表”并添加一个名为“季节”的新字段。您的查询将包含该字段的过滤器。这样您就不需要重新链接查询、复制表等。

例如，假设您有一个查询要从该表中提取特定季节的所有信息。它可能看起来像：

```
 Select * from RegistrationTable where Season=[What Season]; 
```

运行时，查询将提示用户输入季节并仅提取该数据。

另外，我确实推荐“操作方法”指南。您可能会做很多手动操作，甚至没有考虑过。如果不出意外，你总是可以说你给了他们文件，从而为你的继任者提供了文件。

# .net - 由于 Repository Merge 还没有实现，还有其他选择吗？

> ID：16200844
> 
> 赞同：2
> 
> 时间：2013-04-24T19:45:12.280
> 
> 标签：.net, git, libgit2, libgit2sharp

我们公司有一个项目，它具有复杂的文件同步场景，自然而然地 git 作为解决方案出现了。因为它是一个 .net 项目，所以 libgit2sharp 正是我们正在寻找的 API。

从[nullpointer 对此线程的响应](https://stackoverflow.com/a/14748086)看来，merge 仍未实现，并且无法合并来自远程分支的更改可能会导致我们考虑另一种方法来解决这个问题（我们不希望因为我们已经进行了测试使用 libgit2sharp 确实很成功）。

是否有提供远程合并的可能性或替代方案？会在短期内发布吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T20:13:06.117

> 会在短期内发布吗？

合并势在必行。但是，目前还没有时间表。首先，这个**[拉取请求](https://github.com/libgit2/libgit2/pull/1389)**必须作为 ligit2 项目的一部分最终确定。也许还需要一些额外的更高级别的 API。然后它将通过 LibGit2Sharp 提供。

> 是否有提供远程合并的可能性或替代方案？

您是否考虑过暂时使用“git.exe”？

例如，这就是**[GitHub for Windows](http://windows.github.com/)**和**[Git-Tfs](http://git-tfs.com/)**所做的。

部分利用 LibGit2Sharp，部分依赖 git.exe 来处理尚不可用的所有内容。

然后，一旦将所需的功能添加到 LibGit2Sharp，请将对 git.exe 的调用替换为对 LibGit2Sharp 的调用。

如果您已经放置了一些轻量级的抽象层和一些单元测试，那么这条路应该不会太坎坷。

## 更新

**合并**功能现在在 LibGit2Sharp 中可用（请参阅**[拉取请求 #608](https://github.com/libgit2/libgit2sharp/pull/608)**）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-23T17:21:43.657

自[16/01/2014](https://github.com/libgit2/libgit2sharp/commit/cc4bb2da1de35122860993cb1f5c9fae7a724f59)以来，合并已可用，但截至 23/01/2014，[不在 NuGet 上](http://www.nuget.org/packages/LibGit2Sharp)。

无论如何要使用它，请将您的依赖项文件夹中的 LibGit2Sharp.dll 和 LibGit2Sharp.xml 文件（可能是：.../your-solution-folder/packages/LibGit2Sharp.0.15.0.0/lib/net35）替换为工件中的文件最后一次成功（绿色）的[CodeBetter CI 构建](http://teamcity.codebetter.com/viewType.html?buildTypeId=bt652)。

[从 1 月 22 日](http://teamcity.codebetter.com/repository/downloadAll/bt652/106593%3aid/artifacts.zip)开始的替换是下降的，并且仍然在程序集属性中标记为 v 0.15.0.0，因此当您手动替换 dll 时它不会混淆 NuGet 包管理器。

我应该补充一点，合并是一种享受。那些 libgit2sharp 的人非常*聪明*！

# fedora - 我在 Fedora 18 上有一个 SysV 初始化脚本。如何在网络准备好后启动它？

> ID：16200845
> 
> 赞同：2
> 
> 时间：2013-04-24T19:45:15.500
> 
> 标签：fedora, sysv, systemd

我在 Fedora 18 上有一个 SysV 初始化脚本。Fedora 18 使用 systemd（显然，没有办法切换回 SysV）。

我的脚本需要网络准备好。目前，在脚本运行时，网络还没有准备好。如何确保我的 SysV 初始化脚本在网络启动后运行？

我的脚本的开头如下所示：

```
 #!/bin/bash
   #
   # chkconfig: 345 99 01
   # description: starts the xyz boot service 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:47:57.260

好的，在尝试了几件事之后，我尝试添加一个 LSB 标头：

```
### BEGIN INIT INFO
# Required-Start: $network $local_fs $named
# Default-Start: 3 4 5
# Default-Stop: 0 1 2 6
# Short-Description: Starts/stops the foo service
# Description: Starts/stops the foo service
### END INIT INFO 
```

这行得通！该脚本现在在网络初始化后运行。我猜这个`systemd`实现会读取 LSB 标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T00:41:22.233

要在网络准备就绪时运行脚本，请在 systemd 服务文件的 [Unit] 部分中添加以下内容：

```
After=network-online.target
Wants=network-online.target 
```

当网络管理软件认为网络已启动时，网络被定义为就绪（这通常意味着 IP 地址已配置且可路由）。对于 NetWorkManager，它会查询 dbus 以获取信息。

**参考**

*   [网络启动后运行服务](http://www.freedesktop.org/wiki/Software/systemd/NetworkTarget/)
*   [systemd.unit(5)](http://www.freedesktop.org/software/systemd/man/systemd.unit.html)手册页
*   [nm-online 源代码](https://github.com/ebroder/NetworkManager/blob/master/test/nm-online.c#L77)，函数 check_online

# java - 执行器仍在运行时完成的任务数

> ID：16200846
> 
> 赞同：0
> 
> 时间：2013-04-24T19:45:15.750
> 
> 标签：java, multithreading, executorservice, executor

有什么方法可以在调用 invokeAll() 后找到完成的任务数？似乎当所有线程都完成时，它会返回已完成任务的布尔值列表。

我有一个包含 1000 个任务的池，并且想以 100 个间隔查看它们，而不必将它们分成 100 个任务批次。

出于兼容性原因，我还必须使用 Java 6，因此更新的方法无济于事。

另外，作为一个附带问题：invokeAll() 是否以 FIFO 方式处理任务？也就是说，任务是否按照它们添加到任务列表的顺序开始？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T19:47:18.183

> 我有一个包含 1000 个任务的池，并且想以 100 个间隔查看它们，而不必将它们分成 100 个任务批次。

您应该考虑使用 ，[`ExecutorCompletionService`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ExecutorCompletionService.html)它允许您在单个作业完成后收到通知，而不必等待*所有*作业完成使用`invokeAll()`. 然后，您可以将每个已完成的作业放入一个集合中，然后在获得 100 个时对它们进行操作。

也许是这样的：

```
CompletionService<Result> ecs = new ExecutorCompletionService<Result>(executor);
for (Callable<Result> s : solvers)
    ecs.submit(s);
int n = solvers.size();
List<Result> batch = new ArrayList<Result>();
for (int i = 0; i < n; ++i) {
    Result r = ecs.take().get();
    batch.add(r);
    if (batch.size() >= 100) {
       process(batch);
       batch.clear();
    }
}
if (!batch.isEmpty()) {
    process(batch);
} 
```

> invokeAll() 是否以 FIFO 方式处理任务？也就是说，任务是否按照它们添加到任务列表的顺序开始？

任务以先进先出的方式提交到线程池，并由线程也以先进先出的顺序出列。但是，一旦每个线程都有工作，就会出现竞争条件，这可能会导致实际任务“开始”并肯定完成的一些重新排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:48:18.220

任务将按照您指定的顺序添加，如果您有多个线程，则大致按该顺序启动。如果他们花费相同的时间，他们完成的顺序将大致按照该顺序。

我会建立一个`List<Future>`你可以定期轮询的，看看有多少已经完成。

# ruby-on-rails - “系统”块中的命令在控制台中有效，但在应用程序中无效

> ID：16200848
> 
> 赞同：0
> 
> 时间：2013-04-24T19:45:22.457
> 
> 标签：ruby-on-rails, rvm, capistrano, bundler, resque

自从我试图解决这个问题以来已经有 12 个小时了......这里是：

在我的控制器内部，我有一个这样的方法：

> ```
> def restart_workers
>       system("cd /var/www/sts/current && bundle exec rake RAILS_ENV=#{Rails.env.to_s} resque:restart_workers")
> 
>       redirect_to presets_path, :notice=>"Worker'lar yeniden yuklendi. Yeniden acilmalari birkac saniye surebilir."
>   end 
> ```

我想要的只是使用该 rake 任务来重新启动我的 Resque 工作人员......该任务在应用程序初始化期间完美运行。

当我在控制台中尝试时，这条线完美运行：

```
system("cd /var/www/sts/current && bundle exec rake RAILS_ENV=#{Rails.env.to_s} resque:restart_workers") 
```

但是当我通过我的应用程序调用这个方法时，我在我的下面看到了错误`unicorn.log`：

```
/home/deployer/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.3.5/lib/bundler/definition.rb:16:in `build': /var/www/sts/releases/20130422190645/Gemfile not found (Bundler::GemfileNotFound)
    from /home/deployer/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.3.5/lib/bundler.rb:148:in `definition'
    from /home/deployer/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.3.5/lib/bundler.rb:116:in `setup'
    from /home/deployer/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.3.5/lib/bundler/setup.rb:17:in `<top (required)>'
    from /home/deployer/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require'
    from /home/deployer/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require' 
```

我真的被困住了。

任何帮助表示赞赏，谢谢！

仅供参考，我正在使用：RVM、Capistrano、Unicorn、nginx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T18:16:11.077

感谢上帝，我在这篇博文中找到了我的问题的答案：http: [//blog.willj.net/2011/08/02/fixing-the-gemfile-not-found-bundlergemfilenotfound-error/](http://blog.willj.net/2011/08/02/fixing-the-gemfile-not-found-bundlergemfilenotfound-error/)

# android - Android 分享意图与实际 Facebook 集成

> ID：16200851
> 
> 赞同：0
> 
> 时间：2013-04-24T19:45:50.990
> 
> 标签：android, facebook, android-intent, sharing

我打算将“facebook分享”整合到一个应用程序中。基本上是一个带有链接、图像和文本的时间线帖子。

精心设计的 Facebook 3.0 集成与使用具有某些参数的 Android 操作系统的共享意图之间有什么区别，后者允许用户在 Facebook 等应用程序之间进行选择，并且如果应用程序配置为使用该意图，它就可以工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T19:48:54.930

唯一的区别是一行代码可以与数千个不同的应用程序（和其他社交网络）一起使用，而不是使用 Facebook SDK 使您的应用程序膨胀，工作时间、痛苦、错误，从而导致不太干净的结果。

;-)

编辑：如果人们不喜欢 Facebook，Android Intent 还将允许人们在 Twitter、Google Plus 和其他网站上分享。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T19:53:42.897

看到这个 Facebook[错误报告](https://developers.facebook.com/bugs/332619626816423/)，我猜你必须用 Facebook SDK 来做。

因为他们只允许发布具有共享意图的链接。

# c# - 如何在 Visual Studio 2012 中将 Copy Local 属性设置为 True？

> ID：16200856
> 
> 赞同：0
> 
> 时间：2013-04-24T19:46:40.193
> 
> 标签：c#, asp.net, asp.net-mvc

我正在尝试在 Visual Studio 2012 中将 Copy Local 属性设置为 True，但找不到此选项，请告知，谢谢。

# c# - c#和excel中两种不同的表达方式

> ID：16200860
> 
> 赞同：3
> 
> 时间：2013-04-24T19:47:08.870
> 
> 标签：c#, excel

我发现一些非常奇怪的东西，如果我在 excel 和 c# 中使用下面的表达式，我会得到不同的结果。

```
(1) ^ (-12) 
```

Excel 给出 1，c# 给出 -11。

哪一个是对的？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-24T19:49:56.070

在 Excel 中`^`意味着取幂。在 C# 中，它表示按位异或。它们是完全不同的操作；他们使用相同的符号只是巧合。

`Math.Pow`在 C# 中用于求幂。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-24T19:49:36.807

他们都是对的，因为`^`在不同的上下文中意味着不同的东西。

在 C# 中，它是[按位 XOR 运算符](http://msdn.microsoft.com/en-us/library/zkacc7k1.aspx)。

在 Excel 中，它是[“幂”运算符](http://www.excelfunctions.net/Excel-Operators.html)，用于将一个数字提升到另一个数字的幂 (x ^y )。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-24T19:53:16.400

嗯，数学上正确的答案是 1。

抑扬符 (^) 是 C# 中的逻辑 XOR 运算符（[请参阅文档](http://msdn.microsoft.com/en-gb/library/zkacc7k1.aspx)），结果为 11。

要在 c# 中提升`x`权力，请使用.`y``Math.Pow(x, y)`

# internet-explorer - Html.ValidationMessageFor 不适用于 Internet Explorer 8/9

> ID：16200863
> 
> 赞同：1
> 
> 时间：2013-04-24T19:47:21.777
> 
> 标签：internet-explorer, validation, asp.net-mvc-4

这是我的 .cshtml ：

```
@Html.TextBoxFor(model => model.DisplayPrice, new { id = "inputDisplayPrice", data_bind = "value: DisplayPrice" })
@Html.ValidationMessageFor(model => model.DisplayPrice, string.Empty, new { @class = "validate" }) 
```

出于某种原因，它在 Firefox 上运行良好，但在 IE 上没有显示任何验证。有解决方法吗？

编辑：

固定的。我在 .cshtml 头中添加了以下引用，现在可以在 IE 中使用：

```
<script src="http://ajax.microsoft.com/ajax/jQuery/jquery-1.4.2.min.js"></script
<script src="http://ajax.microsoft.com/ajax/jquery.validate/1.7/jquery.validate.min.js"></script> 
```

# ios - scaleX和anchorPoint是什么关系

> ID：16200867
> 
> 赞同：0
> 
> 时间：2013-04-24T19:47:48.967
> 
> 标签：ios, objective-c, cocos2d-iphone

我正在尝试水平翻转精灵，即

```
sprite.scaleX = -1; 
```

我注意到精灵在其左下角翻转。但是，由于我不想弄乱精灵的位置（我希望精灵留在原来的位置），所以我尝试将其锚点设置为 (1,0)

```
sprite.anchorPoint = ccp(1,0); 
```

我的理由是这样的：

由于精灵应该围绕 翻转`anchorPoint`，如果我将 设置`anchorPoint`为它的右下角，那么该角将成为更改后的精灵的“左下角”；并且我应该能够使用新的精灵来移动精灵，`anchorPoint`就像我使用普通精灵一样`anchorPoint (0,0)`。

但是显然它没有像我预期的那样工作。我错过了什么？

**编辑**

我真正想做的是翻转一个精灵，然后能够通过左下角控制它的位置 - 以及我看到的精灵的左下角。我不认为我完全理解 scaleX = -1 是如何与锚点相关的。如果有人可以向我解释这些参数背后的概念，那将对我有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T00:23:48.383

我必须纠正自己断言设置 anchorPoint 没有帮助。事实上，将 anchorPoint 设置为 (1,0) 正是问题的解决方案，只是不知何故，一些错误阻止了我在测试中识别它。

# performance - Haskell 等函数式语言或 Scala 等混合语言中的函数开销

> ID：16200868
> 
> 赞同：12
> 
> 时间：2013-04-24T19:47:49.117
> 
> 标签：performance, scala, haskell, functional-programming

来自 Python、Javascript 和 Java 等命令式语言，我经常阅读有关函数开销以及从性能角度避免*映射的原因。*显然，这些不是函数式语言，外来概念通常往往不太优化且不太惯用。我知道调用函数会将值从寄存器推回堆栈，这很昂贵。

因此，随着*最近*关于 FP 概念和语言的热议，我真的很想知道 Haskell 是如何解决这个问题的？仅仅是编译器内联了很多吗？除此之外，JVM 上的 FP-Languages (Clojure/Scala) 如何解决这个问题？就优化 FP 代码而言，甚至没有一个像样的 Tail-Call 优化也能很好地说明 JVM 的能力。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T20:52:16.390

我无法为 Haskell 提供全面的答案，但对于 Scala，答案非常简单：它对字节码执行转换，例如，（简单）尾调用被实现为带有变量的循环。由于计算机是可变的（RAM，而不是 WORM！），这本质上是*任何*语言都必须做的以实现良好性能。

将一个方法变成可以传递的东西涉及到创建一个对象，但是在 JVM 上创建对象的成本很低，而且 JVM 和 Scala 都有或将有技巧来避免创建该对象，除非它真的有必要。

然后是重用内存与使用新内存的问题。这很难完全解决，但是 JVM 非常擅长快速回收内存，因此您需要支付相对适度的惩罚，例如每次重新创建列表而不是改变其中的值。（如果没有对旧列表的引用，您可以更改这些值并将其称为新列表——我不知道 GHC 是否会玩这样的伎俩。）最糟糕的情况是当您需要本地更新时，您在某些情况下，可以让 log(n) 工作而不是恒定时间工作。

当您将所有这些东西加在一起时，（单线程）性能损失通常是适度的或可以忽略不计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:50:53.090

任何基于 JVM 的语言都可以从 JIT 编译中受益，因此这已经为 Scala 和 Clojure 等语言提供了巨大的优势。

此外，scala 可以从 @tailrec 优化中受益，它将递归调用转换为循环。

# requirejs - requireJS 未更新，仍引用已删除的文件

> ID：16200870
> 
> 赞同：0
> 
> 时间：2013-04-24T19:47:55.330
> 
> 标签：requirejs

我曾经引用一个名为 的文件`OptionRendererController.js`，但我删除了引用和文件。当我为 OptionRenderer grep 我的应用程序目录时，没有出现任何结果，并且我确保包含`urlArgs: "buset=" + (new Date()).getTime()`以防止浏览器缓存，并且我重新启动了运行我的应用程序的 python 服务器，但我仍然收到 404 错误删除`OptionRendererController.js`的文件。如何确保我的应用不再引用该文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:53:11.263

我重新启动 Chrome 后它工作了。

# python - Python中的内存溢出

> ID：16200881
> 
> 赞同：0
> 
> 时间：2013-04-24T19:48:33.033
> 
> 标签：python, memory-leaks

我有 67000 个文件，我需要阅读它们并提取单词之间的相似之处，但是当我运行代码时，我的笔记本电脑变得慢得多，我无法打开任何其他应用程序，然后出现内存溢出错误（即使我在大约 10 000 个文件上运行）。有没有办法在每个 for 循环之后清除内存，或者不可能在所有文件上运行代码？下面是代码：

```
def isAscii(s):
    for c in s:
        if c not in string.printable:
            return False
    return True

windowSize = 2

relationTable = {}
probabilities = {}
wordCount = {}

totalWordCount = 0

def sim(w1, w2):
    numerator = 0
    denominator = 0
    if (w1 in relationTable) and (w2 in relationTable):
        rtw1 = {}
        rtw2 = {}
        rtw1 = relationTable[w1]
        rtw2 = relationTable[w2]
        for word in rtw1:
            rtw1_PMI = rtw1[word]['pairPMI']           
            denominator += rtw1_PMI
            if(word in rtw2):
                rtw2_PMI = rtw2[word]['pairPMI']
                numerator += (rtw1_PMI + rtw2_PMI)

        for word in rtw2:
            rtw2_PMI = rtw2[word]['pairPMI'] 
            denominator += rtw2_PMI

        if(denominator != 0):
            return float(numerator)/denominator
        else:
            return 0

    else:
        return -1

AllNotes = {}
AllNotes = os.listdir("C:/Users/nerry-san/Desktop/EECE 502/MedicalNotes")

fileStopPunctuations = open('C:/Users/nerry-san/Desktop/EECE 502/stopPunctuations.txt')
stopPunctuations = nltk.word_tokenize(fileStopPunctuations.read())

for x in range (0, 10):
    fileToRead = open('C:/Users/nerry-san/Desktop/EECE 502/MedicalNotes/%s'%(AllNotes[x]))

    case1 = fileToRead.read()
    text = nltk.WordPunctTokenizer().tokenize(case1.lower())

    final_text = []
    for index in range(len(text)):
        word = text[index]
        if (word not in stopPunctuations):
            final_text.append(word)            

    for index in range (len(final_text)):
        w1 = final_text[index]
        if(isAscii(w1)):
            for index2 in range(-windowSize, windowSize+1):
                if (index2 != 0):
                    if ( index + index2 ) in range (0, len(final_text)):
                        w2 = final_text[index + index2]

                        if(isAscii(w2)):
                            totalWordCount += 1
                            if (w1 not in wordCount):
                                wordCount[w1] = {}
                                wordCount[w1]['wCount'] = 0

                            try:
                                wordCount[w1][w2]['count'] += 1
                                wordCount[w1]['wCount'] += 1
                            except KeyError:
                                wordCount[w1][w2] = {'count':1}
                                wordCount[w1]['wCount'] += 1 

for word in wordCount:
    probabilities[word]={}
    probabilities[word]['wordProb'] = float (wordCount[word]['wCount'])/ totalWordCount

for word in wordCount:
    relationTable[word] = {}
    for word2 in wordCount[word]:    
        if ( word2 != 'wCount'):          
            pairProb = float(wordCount[word][word2]['count'])/(wordCount[word]['wCount'])

            relationTable[word][word2] = {}
            relationTable[word][word2]['pairPMI'] = math.log(float(pairProb)/(probabilities[word]['wordProb'] * probabilities[word2]['wordProb']),2)

l = []
for word in relationTable:
    l.append(word)

for index in range (0, len(l)):
    word = l[index] 
    simValues = []
    for index2 in range (0, len(l)):
        word2 = l[index2]
        if(word!= word2):
            simVal = sim(word,word2)
            if(simVal > 0):
                simValues.append([word2, simVal])

    simValues.sort(key= operator.itemgetter(1), reverse = True) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:05:15.540

每次打开文件时，使用“with”语句。这将确保在循环完成时（或者更确切地说，在退出 with 块时关闭文件。

# r - 具有发展轨迹的散点图

> ID：16200884
> 
> 赞同：2
> 
> 时间：2013-04-24T19:48:43.457
> 
> 标签：r, ggplot2

我想在下图中绘制发展轨迹，即点2009和2010应该用带箭头的线连接（指向2010），点2010和2011应该用带箭头的线连接（指向2011） ） 等等 ...

这应该适用于两组。

这是我到目前为止所做的：

```
library(ggplot2)

x <- c(100, 200, 300, 200, 500, 320, 300, 50)
y <- c(100, 250, 600, 700, 60, 120, 200, 360)
t <- rep(seq(2009,2012),2)
z <- rep(c("A","B"),each=4)

d <- as.data.frame(cbind(z,t,x,y))
d <- d[order(d$z, d$t),]

ggplot(data = d, aes(x = x, y = y, colour = z, label=t)) + 
  geom_line(aes(group = z)) +
  geom_point() +
  geom_text() 
```

![在此处输入图像描述](https://i.stack.imgur.com/B49fz.png)

我的 2 个问题是：（1）“错误”点已连接，（2）箭头丢失。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T20:15:55.063

我必须添加一个额外的列`z2`才能`ggplot2`将每一行视为一个单独的段。否则，仅在每组线段的末尾绘制一个箭头。该代码解释得最好：

```
library(grid)
library(ggplot2)

x <- c(100, 200, 300, 200, 500, 320, 300, 50)
y <- c(100, 250, 600, 700, 60, 120, 200, 360)
t <- rep(seq(2009,2012),2)
z <- rep(c("A","B"),each=4)
z2 <- LETTERS[1:length(z)]

d <- as.data.frame(cbind(z,z2,t,x,y))
d <- d[order(d$z, d$t),]

ggplot(data = d, aes(x = x, y = y, colour = z2, label=t)) + 
  geom_path(aes(group = z), arrow = arrow(ends = "last")) +
  geom_point() +
  geom_text() 
```

……结果

![在此处输入图像描述](https://i.stack.imgur.com/7f5vc.png)

现在你只需要稍微调整一下色阶，或者对`z2`.

# javascript - 在 highchart 中使用 Ajax

> ID：16200894
> 
> 赞同：0
> 
> 时间：2013-04-24T19:49:07.150
> 
> 标签：javascript, jquery, highcharts

我正在尝试使用高图表。我是高图表的新手，也是 jquery 的新手。我正在尝试将类别和系列加载到折线图中。这是我使用的代码。

```
<script type="text/javascript">
$(function () {
  function getData(){
      alert('fff');
      $.ajax({
    url:"high_line_data.php",
    type:"POST",    
    success:function(resp){
      chart.series[0].setData(resp);
    }
      });
    }

        chart = new Highcharts.Chart({
            chart: {
        renderTo: 'container',
                type: 'line',
                marginRight: 130,
                marginBottom: 25,
          events: {
               load: getData
          }
            },
            title: {
                text: 'Monthly Average Temperature',
                x: -20 //center
            },
            subtitle: {
                text: 'Source: WorldClimate.com',
                x: -20
            },
            xAxis: {
                categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                    'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
            },
            yAxis: {
                title: {
                    text: 'Temperature (°C)'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },
            tooltip: {
                valueSuffix: '°C'
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                x: -10,
                y: 100,
                borderWidth: 0
            },
            series: []
        });
    }); 

        </script> 
```

和php脚本

我将系列结果呼应为

```
name:'Test',
Data : '1,3,4,5' 
```

我该如何解决这个问题。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:35:22.527

您应该用数字替换您的字符串值。显然你可以使用 JSON 格式来添加点。

有关 PHP 预处理数据的相关文章：http: [//docs.highcharts.com/#preprocessing](http://docs.highcharts.com/#preprocessing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:37:00.003

将 php 的输出从文本解析为数组。highcharts 还接受整数的直接数组作为输入来绘制数据。

希望这会有用

# jquery - 如何加载通过 AJAX 加载的 HTML 中的“立即购买”按钮？

> ID：16200895
> 
> 赞同：1
> 
> 时间：2013-04-24T19:49:11.183
> 
> 标签：jquery, ajax, paypal

我很难解决这个问题，恐怕答案比我想象的要容易。

事情是这样的：我正在使用 ajax 加载用户区域的不同部分（替换 a 的内容`<div>`）。其中一个部分是关于付款的，“立即购买”按钮将用于支付显示的项目。

我有来自[http://paypal.github.io/JavaScriptButtons/](http://paypal.github.io/JavaScriptButtons/)的代码。我对其进行了测试，它运行良好，但当我将该代码放在付款部分时，它就不行了。控制台说正在调用 .js，并且 .js 在响应中，但没有显示任何内容。

做一些研究，看起来这是出于安全原因，但这不能以某种方式被覆盖吗？

此外，更让我困惑的是，我在本节中还编写了一些其他脚本，并且运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:23:56.160

抱歉，这不是问题的正确答案，但我通过使用[https://github.com/paypal/JavaScriptButtons#javascript-api](https://github.com/paypal/JavaScriptButtons#javascript-api)`PAYPAL.apps.ButtonFactory.create();`中所示的方法解决了这个问题

不过我不开心。

# php - 来自 CSV 的 PHP JSON 编码

> ID：16200896
> 
> 赞同：-1
> 
> 时间：2013-04-24T19:49:11.897
> 
> 标签：php, json

我有一个简单的脚本，如下所示：

```
$row_to_show = 2;

$handle = fopen('myfile.csv', 'r');
if ($handle !== false) {
    $row_count = 0;
    while($csv_line = fgetcsv($handle)) {
        $row_count++;
        if ($row_count == $row_to_show) {
            $latestResults = ($csv_line);
            echo json_encode($latestResults);
        }
    }
} 
```

它抓取 CSV 文件中的第二行。然后将其编码为 json 格式并显示如下：

> ["2013 年 4 月 20 日","46","8","34","38","44","42","14","4","MERLIN"]

但是，我想做的是：

```
"Date":20-Apr-2013,"ball1":46,"ball2":8,"ball3":34,"ball4":38,"ball5":44"ball6":42,"bonusball":14,"set":4,"machine":MERLIN 
```

我如何实现这一目标？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:02:18.683

从外观上看，JSON 输出将是我对 CSV 的期望，因为 CSV 只是一个值数组。

如果要添加“列标题”信息，则需要创建一个关联数组。

有时，CSV 的第一行包含标题信息，如果是这种情况，您可以将其保存以备后用：

```
/...
$headers = null;
while($csv_line = fgetcsv($handle)) {
    $row_count++;
    // The first row contains the headers, save it
    if($row_count == 1) {
        $headers = $csv_line;
    }
//.. 
```

如果没有，您需要手动创建它...

```
$headers = array('Date', 'ball1', 'ball2',...); 
```

然后，您可以将它们合并到一个关联数组中（请参阅 SO 问题：[“PHP - 将两个数组（相同长度）合并为一个关联数组？”](https://stackoverflow.com/questions/1200885/php-merge-two-arrays-same-length-into-one-associative)）

```
if ($row_count == $row_to_show) {
    $latestResults = ($csv_line);
    $output = array_combine($headers, $latestResults);
    echo json_encode($output);
} 
```

我希望这会有所帮助！

*编辑*

感谢 Marios 的评论（我在写完这篇文章后看到的），看起来 SO 问题[“CSV to Json with header row as key”](https://stackoverflow.com/questions/10712840/csv-to-json-with-header-row-as-key?lq=1)几乎涵盖了同样的事情。

# css - JavaFX中有2种颜色的背景？

> ID：16200901
> 
> 赞同：9
> 
> 时间：2013-04-24T19:49:41.353
> 
> 标签：css, javafx-2, tableview, cell, background-color

在 JavaFX 2 中，使用 CSS，是否可以创建具有 2 种颜色的背景？考虑例如`TableCell`高度为 10 像素的 a。我希望前 2 px（垂直）为红色，其余 8 px（垂直）应保持默认背景颜色。在 JavaFX 2 中使用 CSS 是否可行？如何？

**例子：**

原始背景：

![在此处输入图像描述](https://i.stack.imgur.com/7fXS7.png)

期望的结果：

![在此处输入图像描述](https://i.stack.imgur.com/7Jb4r.png)（上面的2个像素被红色代替）

感谢您对此的任何提示！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-24T22:36:05.020

我使用了一个简单的背景颜色层来产生红色高光（类似于 Stefan 建议的解决方案）。

```
/**
 * file: table.css
 *   Place in same directory as TableViewPropertyEditorWithCSS.java.
 *   Have your build system copy this file to your build output directory.
 **/

.highlighted-cell {
  -fx-text-fill: -fx-text-inner-color;
  -fx-background-color: firebrick, gainsboro;
  -fx-background-insets: 0, 2 0 0 0;
} 
```

对于像堆栈窗格这样的标准区域，您真正需要做的就是应用上面的 css（减去`-fx-text-fill`）来获得所需的结果。

* * *

这是使用渐变定义颜色的另一种棘手方法：

```
-fx-background-color: 
  linear-gradient(
    from 0px 0px to 0px 2px, 
      firebrick, firebrick 99%, 
    gainsboro
  ); 
```

* * *

在下面的屏幕截图中，如果具有 value ，则会突出显示值单元格（通过将`highlighted-cell`css 类应用于它们）`false`。

![突出显示的单元格](https://i.stack.imgur.com/LZGxP.png)

高亮单元格样式类切换逻辑：

```
public void updateItem(Object item, boolean empty) {
  super.updateItem(item, empty);
  if (empty) {
    ....
    getStyleClass().remove("highlighted-cell");
  } else {
    if (getItem() instanceof Boolean && (Boolean.FALSE.equals((Boolean) getItem()))) {
      getStyleClass().add("highlighted-cell");
    } else {
      getStyleClass().remove("highlighted-cell");
    }
    ...
  }
} 
```

* * *

当`highlighted-cell`样式类应用于标准表格单元格时（在对自定义单元格的[updateItem](http://docs.oracle.com/javafx/2/api/javafx/scene/control/Cell.html#updateItem%28T,%20boolean%29)调用期间）看起来不错，但确实有几个缺点。表格着色方案非常微妙和复杂。它具有奇数/偶数值的突出显示、选定行的突出显示、选定悬停行的突出显示、聚焦行和单元格的突出显示等。此外，它具有上述所有内容的各种组合。直接在 highlight-cell 类中设置背景颜色是一种蛮力方式来实现你想要的，因为它没有考虑所有其他细微之处，只是覆盖它们，所以使用这个突出显示的单元格无论应用了何种临时 CSS 伪类状态，样式看起来总是一样的。

真的很好，但是更好的解决方案会根据伪类状态对突出显示的单元格进行不同的着色。不过，这是一件相当棘手的事情，您可能会浪费大量时间来玩弄各种状态和 css 选择器组合来尝试获得漂亮的变化亮点。总而言之，对于这个例子来说，对我来说似乎不值得付出额外的努力，尽管它可能适合你。

* * *

测试程序（对它的长度和复杂性表示歉意，将样式突出显示逻辑集成到现有程序中对我来说更容易）：

```
import java.lang.reflect.*;
import java.util.logging.*;
import javafx.application.Application;
import javafx.beans.property.*;
import javafx.beans.value.*;
import javafx.collections.*;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.control.TableColumn.CellEditEvent;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.scene.layout.*;
import javafx.stage.Stage;
import javafx.util.Callback;
// click in the value column (a couple of times) to edit the value in the column.
// property editors are defined only for String and Boolean properties.
// change focus to something else to commit the edit.
public class TableViewPropertyEditorWithCSS extends Application {

  public static void main(String[] args) {
    launch(args);
  }

  @Override
  public void start(Stage stage) {
    final Person aPerson = new Person("Fred", false, false, "Much Ado About Nothing");
    final Label currentObjectValue = new Label(aPerson.toString());
    TableView<NamedProperty> table = new TableView();
    table.setEditable(true);
    table.setItems(createNamedProperties(aPerson));
    TableColumn<NamedProperty, String> nameCol = new TableColumn("Name");
    nameCol.setCellValueFactory(new PropertyValueFactory<NamedProperty, String>("name"));
    TableColumn<NamedProperty, Object> valueCol = new TableColumn("Value");
    valueCol.setCellValueFactory(new PropertyValueFactory<NamedProperty, Object>("value"));
    valueCol.setCellFactory(new Callback<TableColumn<NamedProperty, Object>, TableCell<NamedProperty, Object>>() {
      @Override
      public TableCell<NamedProperty, Object> call(TableColumn<NamedProperty, Object> param) {
        return new EditingCell();
      }
    });
    valueCol.setOnEditCommit(
            new EventHandler<CellEditEvent<NamedProperty, Object>>() {
      @Override
      public void handle(CellEditEvent<NamedProperty, Object> t) {
        int row = t.getTablePosition().getRow();
        NamedProperty property = (NamedProperty) t.getTableView().getItems().get(row);
        property.setValue(t.getNewValue());
        currentObjectValue.setText(aPerson.toString());
      }
    });
    table.getColumns().setAll(nameCol, valueCol);
    table.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY);
    VBox layout = new VBox(10);
    layout.setStyle("-fx-background-color: cornsilk; -fx-padding: 10;");
    layout.getChildren().setAll(
            currentObjectValue,
            table);
    VBox.setVgrow(table, Priority.ALWAYS);

    Scene scene = new Scene(layout, 650, 600);
    scene.getStylesheets().add(getClass().getResource("table.css").toExternalForm());
    stage.setScene(scene);
    stage.show();
  }

  private ObservableList<NamedProperty> createNamedProperties(Object object) {
    ObservableList<NamedProperty> properties = FXCollections.observableArrayList();
    for (Method method : object.getClass().getMethods()) {
      String name = method.getName();
      Class type = method.getReturnType();
      if (type.getName().endsWith("Property")) {
        try {
          properties.add(new NamedProperty(name, (Property) method.invoke(object)));
        } catch (IllegalAccessException | IllegalArgumentException | InvocationTargetException ex) {
          Logger.getLogger(TableViewPropertyEditorWithCSS.class.getName()).log(Level.SEVERE, null, ex);
        }
      }
    }
    return properties;
  }

  public class NamedProperty {

    public NamedProperty(String name, Property value) {
      nameProperty.set(name);
      valueProperty = value;
    }
    private StringProperty nameProperty = new SimpleStringProperty();

    public StringProperty nameProperty() {
      return nameProperty;
    }

    public StringProperty getName() {
      return nameProperty;
    }

    public void setName(String name) {
      nameProperty.set(name);
    }
    private Property valueProperty;

    public Property valueProperty() {
      return valueProperty;
    }

    public Object getValue() {
      return valueProperty.getValue();
    }

    public void setValue(Object value) {
      valueProperty.setValue(value);
    }
  }

  public class Person {

    private final SimpleStringProperty firstName;
    private final SimpleBooleanProperty married;
    private final SimpleBooleanProperty hasChildren;
    private final SimpleStringProperty favoriteMovie;

    private Person(String firstName, Boolean isMarried, Boolean hasChildren, String favoriteMovie) {
      this.firstName = new SimpleStringProperty(firstName);
      this.married = new SimpleBooleanProperty(isMarried);
      this.hasChildren = new SimpleBooleanProperty(hasChildren);
      this.favoriteMovie = new SimpleStringProperty(favoriteMovie);
    }

    public SimpleStringProperty firstNameProperty() {
      return firstName;
    }

    public SimpleBooleanProperty marriedProperty() {
      return married;
    }

    public SimpleBooleanProperty hasChildrenProperty() {
      return hasChildren;
    }

    public SimpleStringProperty favoriteMovieProperty() {
      return favoriteMovie;
    }

    public String getFirstName() {
      return firstName.get();
    }

    public void setFirstName(String fName) {
      firstName.set(fName);
    }

    public Boolean getMarried() {
      return married.get();
    }

    public void setMarried(Boolean isMarried) {
      married.set(isMarried);
    }

    public Boolean getHasChildren() {
      return hasChildren.get();
    }

    public void setHasChildren(Boolean hasChildren) {
      this.hasChildren.set(hasChildren);
    }

    public String getFavoriteMovie() {
      return favoriteMovie.get();
    }

    public void setFavoriteMovie(String movie) {
      favoriteMovie.set(movie);
    }

    @Override
    public String toString() {
      return firstName.getValue() + ", isMarried? " + married.getValue() + ", hasChildren? " + hasChildren.getValue() + ", favoriteMovie: " + favoriteMovie.get();
    }
  }

  class EditingCell extends TableCell<NamedProperty, Object> {

    private TextField textField;
    private CheckBox checkBox;

    public EditingCell() {
    }

    @Override
    public void startEdit() {
      if (!isEmpty()) {
        super.startEdit();
        if (getItem() instanceof Boolean) {
          createCheckBox();
          setText(null);
          setGraphic(checkBox);
        } else {
          createTextField();
          setText(null);
          setGraphic(textField);
          textField.selectAll();
        }
      }
    }

    @Override
    public void cancelEdit() {
      super.cancelEdit();
      if (getItem() instanceof Boolean) {
        setText(getItem().toString());
      } else {
        setText((String) getItem());
      }
      setGraphic(null);
    }

    @Override
    public void updateItem(Object item, boolean empty) {
      super.updateItem(item, empty);
      if (empty) {
        setText(null);
        setGraphic(null);
        getStyleClass().remove("highlighted-cell");
      } else {
        if (getItem() instanceof Boolean && (Boolean.FALSE.equals((Boolean) getItem()))) {
          getStyleClass().add("highlighted-cell");
        } else {
          getStyleClass().remove("highlighted-cell");
        }
        if (isEditing()) {
          if (getItem() instanceof Boolean) {
            if (checkBox != null) {
              checkBox.setSelected(getBoolean());
            }
            setText(null);
            setGraphic(checkBox);
          } else {
            if (textField != null) {
              textField.setText(getString());
            }
            setText(null);
            setGraphic(textField);
          }
        } else {
          setText(getString());
          setGraphic(null);
        }
      }
    }

    private void createTextField() {
      textField = new TextField(getString());
      textField.setMinWidth(this.getWidth() - this.getGraphicTextGap() * 2);
      textField.focusedProperty().addListener(new ChangeListener<Boolean>() {
        @Override
        public void changed(ObservableValue<? extends Boolean> observable, Boolean oldValue, Boolean newValue) {
          if (!newValue) {
            commitEdit(textField.getText());
          }
        }
      });
    }

    private void createCheckBox() {
      checkBox = new CheckBox();
      checkBox.setSelected(getBoolean());
      checkBox.setMinWidth(this.getWidth() - this.getGraphicTextGap() * 2);
      checkBox.focusedProperty().addListener(new ChangeListener<Boolean>() {
        @Override
        public void changed(ObservableValue<? extends Boolean> observable, Boolean oldValue, Boolean newValue) {
          if (!newValue) {
            commitEdit(checkBox.isSelected());
          }
        }
      });
    }

    private String getString() {
      return getItem() == null ? "" : getItem().toString();
    }

    private Boolean getBoolean() {
      return getItem() == null ? false : (Boolean) getItem();
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T20:21:59.640

看，如何理解 CSSRef：

[http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html)

看着

-fx-背景图像：

uri [ , uri ]*

一系列以逗号分隔的图像 URI。

看着

-fx-背景重复

重复样式 [ , 重复样式 ]*

其中重复样式 = 重复-x | 重复-y | [重复| 空间 | 圆| 拉伸| 不重复]{1,2}

一系列以逗号分隔的值。系列中的每个重复样式项都适用于背景图像系列中的相应图像。

看：-fx-background-position

背景位置 [ , 背景位置 ]* 其中 = [ [ [ 大小 | 离开 | 中心 | 对] [大小| 顶部 | 中心 | 底部 ]？] | [ [ 中心 | [ 左 | 合适的尺码？] || [ 中心 | [ 顶部 | 底部] 尺寸？] ]

一系列以逗号分隔的值。系列中的每个 bg-position 项都适用于背景图像系列中的相应图像。

所以，你能看到什么：你应该描述 2 个图像，（每个 2x2 像素 - 一个红色和一个 - 灰色）两个 bg 位置，以及每个对应的两个重复样式。

如何？

例子 ：

```
{
-fx-backdround-image : "path_to_red", "path_to_grey";
-fx-background-repeat : repeat-x, stretch;
-fx-background-position : 0px 0px, 0px 2px;
} 
```

我不保证代码的工作性，但这个想法似乎是正确的。

使用插图时，可能只使用颜色而不是图像。来自原始 JavaFX CSS 的示例：

```
.table-row-cell:odd {
  -fx-background-color: -fx-table-cell-border-color, derive(-fx-control-inner-background,-5%);
  -fx-background-insets: 0, 0 0 1 0;
} 
```

[6个字符...]

# struts - Struts 验证框架不工作

> ID：16200903
> 
> 赞同：1
> 
> 时间：2013-04-24T19:49:50.107
> 
> 标签：struts, validation

我有一个日期字段，应该需要允许模式 MM/dd/yyyy 的日期。

在我的 Struts validation.xml 文件中，我有以下代码

```
<field property="newEffectiveDate"
            depends="required,date">
            <msg name="required"
                key="errors.effectiveDate.required" />
            <msg name="date" key="errors.date.format" />
            <arg0 key="property.effectiveDate" />
            <var>
                <var-name>datePattern</var-name>
                <var-value>MM/dd/yyyy</var-value>
            </var>
        </field> 
```

即使我输入正确的格式为 2013 年 4 月 24 日，它会抛出一条错误消息，指出日期格式错误，但是当我输入日期为 04-24-2013 时，它会接受它。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-19T15:04:34.623

```
<field property="pwd" depends="required,date">
       <arg position="0" key="pswd"/>
       <arg position="1" resource="false" key="5"/>
       <arg position="0" key="dt"/>
       <var>
         <var-name>date</var-name>
         <var-value>MM/dd/yyyy</var-value>
       </var>
</field> 
```

上面的代码工作正常，所以你可能想`<var-name>datePattern</var-name>`用`<var-name>date</var-name>`. 让我知道它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:13:19.947

> **date** - 验证字段是否可以转换为日期。此验证器使用 java.text.SimpleDateFormat 来解析日期，并且可以选择使用 datePattern 或 datePatternStrict 变量。如果未指定模式，则假定默认短日期格式。使用 datePatternStrict 和 datePattern 变量之间的区别在于 datePatternStrict 额外检查输入数据的长度是否与指定的模式相同（例如，2004 年 1 月 1 日将失败，模式为 MM/dd/yyyy ）。

取自：[Struts 文档](http://struts.apache.org/development/1.x/faqs/validator.html)

试试这个：

```
 <var><var-value>MM/dd/yyyy</var-value></var> 
```

这似乎是一个非常常见的问题，答案接近 0。

# java - 同一文件中两个不同键的减速器输出值

> ID：16200907
> 
> 赞同：1
> 
> 时间：2013-04-24T19:49:58.257
> 
> 标签：java, hadoop, mapreduce, hadoop-partitioning

嗨，我写了一个 mapreduce 作业，它通常解析 XML 文件。我能够解析 XML 文件并正确生成所有键值对。我有 6 个不同的键和对应的值。所以我并行运行 6 个不同的减速器。

现在我面临的问题是减速器将两个不同的键值对放在同一个文件中，并将剩余的 4 个键值对放在单个文件中。因此，简而言之，在减速器输出的 6 个文件中，我得到 4 个具有单键值对的文件和 1 个具有两个键值对的文件和 1 个什么都没有的文件。

我尝试在谷歌和各种论坛上进行研究，唯一的结论是我需要一个分区器来解决这个问题。我是新的hadoop，所以有人可以对这个问题有所了解并帮助我解决这个问题。

我正在研究一个伪节点集群并使用 Java 作为编程语言。我无法在此处共享代码，但仍尝试简要描述问题。

让我知道需要更多信息，并提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T06:07:38.240

默认情况下，Hadoop 使用默认的[Hash 分区器 - 单击此处](http://cornercases.wordpress.com/2011/05/06/an-example-configurable-partitioner/)，类似于

```
public class HashPartitioner<K2, V2> implements Partitioner<K2, V2> {

  public void configure(JobConf job) {}

  /** Use {@link Object#hashCode()} to partition. */
  public int getPartition(K2 key, V2 value,
                          int numReduceTasks) {
    return (key.hashCode() & Integer.MAX_VALUE) % numReduceTasks;
  }

} 
```

key.hashCode() & Integer.MAX_VALUE) % numReduceTasks 将返回一个介于 0 到 numReduceTasks 之间的数字，在您的情况下，范围为 0 到 5，因为 numRuduceTask=6

该行本身就存在问题 - 两个这样的语句可能会返回相同的数字。并且，因此两个不同的键可以进入同一个减速器。例如-

```
("go".hashCode() & Integer.MAX_VALUE) % 6 
```

将返回您 4 并且，

```
("hello".hashCode() & Integer.MAX_VALUE) % 6 
```

也会返回给你 4。

所以，我在这里建议的是，如果你想确保你的所有 6 个键都被 6 个不同的 reducer 处理，你需要创建自己的分区器来获得你想要的。

如果您有任何困惑，请查看[此链接](http://cornercases.wordpress.com/2011/05/06/an-example-configurable-partitioner/)以创建自定义分区器，并使用 Job 类指定您的自定义分区器，如下所示。

`job.setPartitioner(<YourPartionerHere.class>);`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T21:30:23.597

6 个减速器只有 6 个键并不是 hadoop 的最佳利用 - 虽然 6 个中的每一个都可以使用单独的减速器，但这并不能保证。

密钥不能在 reducer 之间拆分，因此如果您的密钥少于 6 个，则只有一部分 reducer 需要做任何工作。您应该考虑重新考虑您的键分配（也许输入文件对 hadoop 的适当性），并且可能使用一个系统，以便有足够的键在减速器之间均匀分布。

编辑：我相信您可能会追求的是[`MultipleOutputFormat`](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapred/lib/MultipleOutputFormat.html)，它具有方法[`generateFileNameForKeyValue(key, value, name)`](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapred/lib/MultipleOutputFormat.html#generateFileNameForKeyValue%28K,%20V,%20java.lang.String%29)，允许您生成一个文件以写入每个键，而不仅仅是每个`Reducer`.

# java - 从活动中打开 pdf

> ID：16200909
> 
> 赞同：0
> 
> 时间：2013-04-24T19:50:09.500
> 
> 标签：java, android, pdf, android-intent

我正在开发一个应用程序，它有一个包含大量文本（真的很多）的活动。我认为制作包含其中信息的 PDF 并直接从应用程序打开该文件是最佳解决方案。因此，当人们打开活动时，PDF 会在安装的支持 PDF 的查看器中打开。

你们知道我必须如何解决这个问题，因为我认为我需要使用一个 Intent，但是哪个？以及如何直接打开查看器？

感谢您提前为这个问题提供的所有帮助或任何精力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:10:44.593

> 你们知道我必须如何解决这个问题，因为我认为我需要使用一个 Intent，但是哪个？

用这个：

```
 Intent i=new Intent(Intent.ACTION_VIEW);

 i.setDataAndType(Uri.fromFile(pathToYourPdfFile), "application/pdf");
 startActivity(i); 
```

# javascript - 使用 Xlink 规范时在 Angular 中绑定元素

> ID：16200910
> 
> 赞同：2
> 
> 时间：2013-04-24T19:50:09.937
> 
> 标签：javascript, angularjs, angularjs-directive, xlink

我有一个以原始 XML 开头的页面，并使用 Angular Directives 和 CSS 将原始 XML 转换为具有可编辑字段、按钮和标签的网页。由于一部分数据本质上是关系数据，因此我使用松散的 xLink 规范来创建一个“源节点”，其中包含可能在页面上多次引用的数据。

在我的页面上，团队的名称节点是可编辑的。目前，我的团队节点指令的链接函数具有一个功能，如果它具有属性“源”，则使用该 id 为页面上已经具有该 id 属性的团队节点拉取 HTML（触发此指令时，由于在节点上运行的指令，XML 顶部的团队节点已经被处理，并且已经添加了 ng-transclude、scope 和 HTML 节点。）

目前，我的页面看起来在视觉上正确呈现；但是，我有两个问题：

1）游戏节点层次结构中的团队不可编辑（由指令强制执行）。
2) 更重要的是，当我编辑顶级球队时（将球队 1 的名称从“洋基队”更改为“纽约洋基队”，直到我刷新页面才会更新参考。

有人对如何最好地将这些元素绑定在一起有任何建议吗？

页面加载数据：

```
<all>
  <teams>
    <team id="1">
      <name>Yankees</name>
    </team>
    <team id="2">
      <name>Red Sox</name>
    </team>
  </teams>
  <games>
    <game>
      <date>
      <teams>
        <hometeam>
           <team source="1" />
        </hometeam>
        <hometeam>
           <team source="2" />
        </hometeam>
      </teams>
    </game>
  </games>
</all> 
```

# css - 下拉菜单 CSS 问题

> ID：16200911
> 
> 赞同：0
> 
> 时间：2013-04-24T19:50:13.173
> 
> 标签：css, wordpress, menu

我为我的 Wordpress 网站创建了一个下拉菜单。在这个 jsfiddle 你可以找到 HTML 和 CSS 代码：http: [//jsfiddle.net/N5H4c/](http://jsfiddle.net/N5H4c/)

```
see jsfiddle 
```

我有一个CSS问题。我创建了下拉菜单，但是当我将鼠标悬停在“菜单项 One”上时，它会伸展并获得更多宽度。那不应该。子菜单项可以更大，但菜单项本身不应改变大小。此外，当我悬停菜单时，它周围到处都是黄色背景，我想将其删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:55:42.597

你需要更新

```
#menu ul {
    position: absolute;
    background: #f7e600;
} 
```

检查jsfiddle

[http://jsfiddle.net/N5H4c/5/](http://jsfiddle.net/N5H4c/5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T19:59:54.237

添加

```
position: absolute;
top: 38px; // your menu's height
left: 0;
white-space: nowrap; 
```

至`#menu ul`：http: [//jsfiddle.net/N5H4c/2/](http://jsfiddle.net/N5H4c/2/)

# android - AlertDialog 样式 - 如何更改标题、消息等的样式（颜色）

> ID：16200914
> 
> 赞同：40
> 
> 时间：2013-04-24T19:50:18.847
> 
> 标签：android, android-alertdialog, android-theme, android-styles

我已经为此感到头疼了。我需要做的是，更改`AlertDialog`我的 android 应用程序中所有 s 的样式 - 对话框背景需要是白色的，文本需要是黑色的。我尝试从代码、清单等创建很多样式、主题和应用，但没有成功，关于`AlertDialog`. 现在，我有最简单的代码，设置如下：

显现：

> ```
> <application
>     android:icon="@drawable/ic_launcher"
>     android:label="@string/app_name"
>     android:theme="@style/AppTheme" > 
> ```

样式.xml：

> ```
> <style name="AppTheme" parent="AppBaseTheme">
>     <item name="android:alertDialogStyle">@style/DialogStyle</item>
> </style>
> 
> <style name="DialogStyle" parent="@android:style/Theme.Dialog">
>     <!-- changing these background stuff works fine -->
>     <item name="android:bottomBright">@android:color/white</item>
>     <item name="android:bottomDark">@android:color/white</item>
>     <item name="android:bottomMedium">@drawable/dialog_footer_bg</item>
>     <item name="android:centerBright">@android:color/white</item>
>     <item name="android:centerDark">@drawable/dialog_body_bg</item>
>     <item name="android:centerMedium">@android:color/white</item>
>     <item name="android:fullBright">@color/orange</item>
>     <item name="android:fullDark">@color/orange</item>
>     <item name="android:topBright">@color/green</item>
>     <item name="android:topDark">@drawable/dialog_header_bg</item> 
> ```

下面列出的项目不起作用（请阅读我在每个元素上方的评论）：

> ```
>  <!-- panelBackground is not getting set to null, there is something squarish around it -->
>     <item name="android:panelBackground">@null</item>
> 
>     <!-- Setting this textColor doesn't seem to have any effect at all. Messages, title, button text color, whatever; nothing changes. -->
>     <item name="android:textColor">#000000</item>
> 
>     <!-- Also tried with textAppearance, as follows. Didn't work -->
>     <item name="android:textAppearance">?android:attr/textColorPrimaryInverse</item>
> 
>     <!-- Also tried changing textAppearancePrimary, to no avail -->
>     <item name="android:textColorPrimary">#000000</item>
> 
>     <!-- Also need to change the dialog title text, tried it as follows, dint work: -->
>     <item name="android:windowTitleStyle">@style/DialogWindowTitle</item>
> </style> 
> ```

DialogWindowTitle 定义如下：

> ```
> <style name="DialogWindowTitle">
>     <item name="android:textAppearance">?android:attr/textAppearanceMediumInverse</item>
> </style> 
> ```

所以这些都不起作用。谁能告诉我我做错了什么，我该怎么做：

1.  更改消息的文本颜色（内容文本）
2.  更改标题文本颜色
3.  移除面板背景

注意：我需要向上支持 API 8 (2.2)。另外，我在这里和谷歌群组中讨论了大部分相关问题，但无法弄清楚，尽管我感觉它就在我的鼻子底下！

编辑：添加截图：

![AlertDialog 未按预期主题](https://i.stack.imgur.com/4ArTR.png)

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2014-07-03T17:35:05.640

您需要为您的 AlertDialog 定义一个主题并在您的活动主题中引用它。属性 is`alertDialogTheme`和 not `alertDialogStyle`。像这样：

```
<style name="Theme.YourTheme" parent="@android:style/Theme.Holo">
    ...
    <item name="android:alertDialogTheme">@style/YourAlertDialogTheme</item>
</style>

<style name="YourAlertDialogTheme">
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
    <item name="android:windowMinWidthMajor">@android:dimen/dialog_min_width_major</item>
    <item name="android:windowMinWidthMinor">@android:dimen/dialog_min_width_minor</item>
    <item name="android:windowTitleStyle">...</item>
    <item name="android:textAppearanceMedium">...</item>
    <item name="android:borderlessButtonStyle">...</item>
    <item name="android:buttonBarStyle">...</item>
</style> 
```

您将能够更改标题、消息的颜色和文本外观，并且您将对每个区域的背景进行一些控制。我写了[一篇博](https://web.archive.org/web/20200214041924/http://blog.supenta.com/2014/07/02/how-to-style-alertdialogs-like-a-pro/)文，详细介绍了设置 AlertDialog 样式的步骤。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-11-05T08:46:37.667

**移除面板背景**

```
 <item name="android:windowBackground">@color/transparent_color</item> 
 <color name="transparent_color">#00000000</color> 
```

这是我的风格：

```
 <style name="ThemeDialogCustom">
    <item name="android:windowFrame">@null</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
    <item name="android:windowBackground">@color/transparent_color</item>
    <item name="android:windowSoftInputMode">stateUnspecified|adjustPan</item>
    <item name="android:colorBackgroundCacheHint">@null</item>
</style> 
```

我已将其添加到构造函数中。

**添加 textColor ：**

```
<item name="android:textColor">#ff0000</item> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-09-27T08:36:08.057

这是我的代码来主题警报对话框：

```
<style name="alertDialog" parent="Theme.AppCompat.Dialog.Alert">
    <item name="android:background">@color/light_button_text_color</item>
    <item name="android:textColor">@android:color/black</item>
    <item name="android:textColorPrimary">@android:color/black</item>
    <item name="android:textColorSecondary">@android:color/black</item>
    <item name="android:titleTextColor" tools:targetApi="m">@android:color/black</item>
</style> 
```

将此代码放在styles.xml 中。在您的 java 中将此主题应用为：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this, R.style.alertDialog); 
```

[代码的输出](https://i.stack.imgur.com/7QMEc.png)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-11-05T08:40:15.917

您必须将样式添加到对话框的构造函数中

```
builder = new AlertDialog.Builder(this, R.style.DialogStyle); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-08-25T10:02:52.773

我以这种方式以编程方式更改颜色：

```
var builder = new AlertDialog.Builder (this);
...
...
...
var dialog = builder.Show ();
int textColorId = Resources.GetIdentifier ("alertTitle", "id", "android");
TextView textColor = dialog.FindViewById<TextView> (textColorId);
textColor?.SetTextColor (Color.DarkRed); 
```

作为 alertTitle，您可以通过这种方式更改其他数据（下一个示例是 titleDivider）：

```
int titleDividerId = Resources.GetIdentifier ("titleDivider", "id", "android");
View titleDivider = dialog.FindViewById (titleDividerId);
titleDivider?.SetBackgroundColor (Color.Red); 
```

这是在 C# 中，但在 java 中是一样的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-09-24T21:58:35.307

这取决于您想要自定义警报对话框的程度。我有不同的步骤来自定义警报对话框。请访问：[https ://stackoverflow.com/a/33439849/5475941](https://stackoverflow.com/a/33439849/5475941)

[![在此处输入图像描述](https://i.stack.imgur.com/bP4Cn.png)](https://i.stack.imgur.com/bP4Cn.png) [![在此处输入图像描述](https://i.stack.imgur.com/SXJzv.png)](https://i.stack.imgur.com/SXJzv.png) [![在此处输入图像描述](https://i.stack.imgur.com/i9z1W.png)](https://i.stack.imgur.com/i9z1W.png) [![在此处输入图像描述](https://i.stack.imgur.com/wLyhB.png)](https://i.stack.imgur.com/wLyhB.png)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-04-24T05:40:24.203

基于@general03 的回答，您可以使用Android 的内置样式快速自定义对话框。您可以在 下找到对话框主题`android.R.style.Theme_DeviceDefault_Dialogxxx`。

例如：

```
builder = new AlertDialog.Builder(this, android.R.style.Theme_DeviceDefault_Dialog_MinWidth);
builder = new AlertDialog.Builder(this, android.R.style.Theme_DeviceDefault_Dialog_NoActionBar);
builder = new AlertDialog.Builder(this, android.R.style.Theme_DeviceDefault_DialogWhenLarge); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-01-10T11:16:59.760

在你的**values-v21/style.xml的 Style 中使用它**

```
<style name="AlertDialogCustom" parent="@android:style/Theme.Material.Dialog.NoActionBar">
        <item name="android:windowBackground">@android:color/white</item>
        <item name="android:windowActionBar">false</item>
        <item name="android:colorAccent">@color/cbt_ui_primary_dark</item>
        <item name="android:windowTitleStyle">@style/DialogWindowTitle.Sphinx</item>
        <item name="android:textColorPrimary">@color/cbt_hints_color</item>
        <item name="android:backgroundDimEnabled">true</item>
        <item name="android:windowMinWidthMajor">@android:dimen/dialog_min_width_major</item>
        <item name="android:windowMinWidthMinor">@android:dimen/dialog_min_width_minor</item>
</style>
```

对于棒棒糖之前的设备，将其放入**values/style.xml**

```
<style name="AlertDialogCustom" parent="@android:style/Theme.Material.Dialog.NoActionBar">
        <item name="android:windowBackground">@android:color/white</item>
        <item name="android:windowActionBar">false</item>
        <item name="android:colorAccent">@color/cbt_ui_primary_dark</item>
        <item name="android:windowTitleStyle">@style/DialogWindowTitle.Sphinx</item>
        <item name="android:textColorPrimary">@color/cbt_hints_color</item>
        <item name="android:backgroundDimEnabled">true</item>
        <item name="android:windowMinWidthMajor">@android:dimen/dialog_min_width_major</item>
        <item name="android:windowMinWidthMinor">@android:dimen/dialog_min_width_minor</item>
</style>

<style name="DialogWindowTitle.Sphinx" parent="@style/DialogWindowTitle_Holo">
       <item name="android:textAppearance">@style/TextAppearance.Sphinx.DialogWindowTitle</item>
</style>

<style name="TextAppearance.Sphinx.DialogWindowTitle" parent="@android:style/TextAppearance.Holo.DialogWindowTitle">
        <item name="android:textColor">@color/dark</item>
        <!--<item name="android:fontFamily">sans-serif-condensed</item>-->
        <item name="android:textStyle">bold</item>
</style>
```

# python-3.x - Windows/Py3 标准输出只有 LR，没有 CRLF

> ID：16200915
> 
> 赞同：0
> 
> 时间：2013-04-24T19:50:19.430
> 
> 标签：python-3.x, newline, stdout

在 Windows 上的一些早期 Py3 版本中，我可以通过执行来确保标准输出 LF 而不是 CRLF

```
import msvcrt
msvcrt.setmode(sys.stdout.fileno(), os.O_BINARY)
print("Whatever") 
```

但这在某些 Py3.2+ 版本中停止工作。该`end='\n'`参数也不起作用，所以我猜这是由操作系统或一些低级的东西引起的。在 Py3.3+ 中首选的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:07:55.567

```
import sys,os
sys.stdout = os.fdopen(sys.stdout.fileno(), 'w', newline='')
print("Whatever") 
```

# arrays - 从两个字符串数组中返回唯一的字符串，连接在一个字符串VBA中

> ID：16200916
> 
> 赞同：1
> 
> 时间：2013-04-24T19:50:24.253
> 
> 标签：arrays, vba, for-loop, boolean, string-concatenation

我有一个接近工作但不完全的代码。我有两个数组 astrArray1 和 astrArray2 ，函数 findUniques() 应该返回两个数组中唯一的字符串（名称）。我可以让代码返回它们共同的名称，但它不会为唯一的名称返回正确的值。任何帮助，将不胜感激！

这是代码：

```
Function findUniques(astrArray1() As String, astrArray2() As String) As String

Dim blnMP5 As Boolean
blnMP5 = True

Dim counter1 As Long
Dim counter2 As Long

Dim uniquesString As String
uniquesString = " "

For counter1 = LBound(astrArray1) To UBound(astrArray1)
  For counter2 = LBound(astrArray2) To UBound(astrArray2)
    If astrArray1(counter1) <> astrArray2(counter2) Then
      blnMP5 = False
    ElseIf astrArray1(counter1) = astrArray2(counter2) Then
      blnMP5 = True
    End If
    If blnMP5 = False Then
      uniquesString = uniquesString & "," & astrArray2(counter2)
    End If
  Next counter2
Next counter1

findUniques = uniquesString
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:10:45.053

像这样？

```
Option Explicit

Sub Sample()
    Dim MyAr1(1 To 4) As String
    Dim MyAr2(1 To 2) As String

    MyAr1(1) = "aaa": MyAr1(2) = "bbb": MyAr1(3) = "ccc": MyAr1(4) = "ddd"
    MyAr2(1) = "aaa": MyAr2(2) = "bbb"

    '~~> This will give you ccc,ddd
    Debug.Print findUniques(MyAr1, MyAr2)
End Sub

Function findUniques(astrArray1() As String, astrArray2() As String) As String
    Dim i As Long, j As Long
    Dim uniquesString As String
    Dim matchFound As Boolean

    For i = LBound(astrArray1) To UBound(astrArray1)
        matchFound = False
        For j = LBound(astrArray2) To UBound(astrArray2)
            If astrArray1(i) = astrArray2(j) Then
                matchFound = True
                Exit For
            End If
        Next j

        If matchFound = False Then uniquesString = uniquesString & "," & astrArray1(i)
    Next i

    findUniques = Mid(uniquesString, 2)
End Function 
```

# kml - 谷歌地球插件的最新版本不再显示 Kml 地标

> ID：16200919
> 
> 赞同：0
> 
> 时间：2013-04-24T19:50:29.533
> 
> 标签：kml, google-earth-plugin

由于我已升级到 google-earth 插件的最新版本（2013 年 4 月 23 日），我常用的 KML 文件的地标不再显示！- 事实上，我看不到任何 KML 文件中的任何地标，即使来自 google-earth 示例/代码 - 无论是 Firefox 还是 iExplorer。有什么解决办法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T18:17:44.927

有同样的问题。我在较早的帖子中找到了解决方案！

[https://groups.google.com/forum/?fromgroups#!topic/google-earth-browser-plugin/XVx7fJBFDeI](https://groups.google.com/forum/?fromgroups#!topic/google-earth-browser-plugin/XVx7fJBFDeI)

# php - 服务器 X 带回 200 响应，服务器 Y 抛出和内部服务器错误

> ID：16200928
> 
> 赞同：0
> 
> 时间：2013-04-24T19:51:10.187
> 
> 标签：php, curl

我构建的 CURL 阅读器有问题（请参阅： [脚本头过早结束：php-cgi -- 运行 CURL 脚本时](https://stackoverflow.com/questions/16080086/premature-end-of-script-headers-php-cgi-while-running-a-curl-script)）

那家伙说要检查我的问题服务器是否会与提要对话，所以我在本地测试了以下代码并且它可以工作，在服务器上进行测试并得到内部服务器错误。我在这里迷路了，我应该如何调试它，因为主机公司根本没有太大帮助。

代码：

```
$url = 'http://www.energydigger.com/feeds/headlines.xml';
list($status) = get_headers($url);
if (strpos($status, '200') !== FALSE) {
   echo 'boom';
} 
```

**问题服务器响应：** *内部服务器错误 服务器遇到内部错误或配置错误，无法完成您的请求。请联系服务器管理员 root@localhost 并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。服务器错误日志中可能提供有关此错误的更多信息。*

我从他们提供的日志中得到的只是：

```
[Wed Apr 24 20:36:01 2013] [warn] mod_fcgid: read data timeout in 60 seconds
[Wed Apr 24 20:36:01 2013] [error] [client 151.227.255.54] Premature end of script headers: php-cgi 
```

任何建议都值得赞赏，因为我对现在该做什么有点困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:38:37.053

也许我可以重现它。但我的环境使用 mod_fcgid 而不是简单的 cgi。确保所有者和组与执行 cgi 用户的相同。或者为了简单起见，就像您的 web 目录中的所有其他文件一样。

# google-apps-script - 谷歌电子表格脚本将两个单元格添加在一起

> ID：16200931
> 
> 赞同：0
> 
> 时间：2013-04-24T19:51:32.833
> 
> 标签：google-apps-script, google-sheets

我有两列，其中有数字。我需要一个可以通过菜单调用的脚本来添加这两列，然后清除第一列中的值。我无法找到任何有关如何执行此操作的示例，因此我没有任何尝试的代码。

例子：

```
 D12  E12
 10   26 
```

我想要一个将 E12 更改为 36 的脚本，然后清除单元格 D12。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:07:10.787

您需要使用 getRange() [http://goo.gl/vDqrA](http://goo.gl/vDqrA)

我认为应该这样做。

```
var ss = SpreadsheetApp.getActiveSheet();
var num1 = ss.getRange("D12").getValue();
var num2 = ss.getRange("E12").getValue();
ss.getRange("E12").setValue(num1+num2);
ss.getRange("D12").clear(); 
```

# asp.net - ASP.NET 为 TextBox 提供样式

> ID：16200932
> 
> 赞同：0
> 
> 时间：2013-04-24T19:51:36.910
> 
> 标签：asp.net

我正在使用多行文本框，如下所示：

```
<asp:TextBox runat="server" TextMode="MultiLine" Height="200" Width="500" ReadOnly="true" Font-Names="calibri" Text="Terms and Conditions Next text will go over.. > 
```

我需要做的只是将条款和条件以粗体显示。句子的其余部分不是粗体。我尝试使用粗体样式的跨度，但这并没有影响任何东西。

如何为文本框设置样式？请记住，这是一个只读文本框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:56:09.753

如果我理解你的权利，你需要这个
[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/HTMLEditorExtender/HTMLEditorExtender.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/HTMLEditorExtender/HTMLEditorExtender.aspx)

```
 <script>
        function onContentsChange() {
            alert('contents changed');
        }
    </script>

    <asp:TextBox runat="server"
        ID="txtBox1" 
        TextMode="MultiLine" 
        Columns="50" 
        Rows="10" 
        Text="Hello <b>world!</b>" />

    <ajaxToolkit:HtmlEditorExtender 
        ID="htmlEditorExtender1" 
        TargetControlID="txtBox1" 
        OnClientChange="onContentsChange" 
        runat="server" >            
    </ajaxToolkit:HtmlEditorExtender> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:37:33.977

你需要的不仅仅是一个普通的文本框，你应该使用 devexpress 或 ajax toolikt，或其他一些 ajax 库。

您可能会考虑寻找能够为您提供丰富格式化功能的库

# c++ - 没有for或while的构造函数中的无限循环

> ID：16200933
> 
> 赞同：61
> 
> 时间：2013-04-24T19:51:49.737
> 
> 标签：c++, recursion, constructor, constants

我这里做了一个测试，但是输出的是一个没有结束的循环，我不知道为什么。

实际上，我正在做另一个测试，但是当我写这个时，我不明白循环是如何发生的。反复输出“ABC”。

```
#include <map>
#include <string>
#include <iostream>

class test
{
public:
   std::map <int, int> _b;
   test();
   test (std::map<int, int> & im);
   ~test();
   };

test::test()
{
  std::cout<<"abc";
  _b.clear();
  _b[1]=1;
  test(_b);
}

test::test(std::map <int, int>& im)
{
   std::cout<<im[1];
}

test::~test() {};

int main ()
{
   test a;  
} 
```

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-04-24T20:08:42.940

这里的问题是编译器解释

```
test(_b); 
```

不是作为创建`test`传入参数类型的临时对象的代码，而是作为名为type`_b`的变量的变量声明，使用默认构造函数。因此，看起来像使用第二个构造函数创建临时对象的一段代码是递归地创建类型的新对象并再次调用构造函数。`_b``test``test``test`

要解决此问题，您可以为变量指定一个明确的名称，例如

```
test t(_b); 
```

这只能解释为类型`test`为 named的变量`t`，使用第二个构造函数初始化。

我以前**从未**见过这种情况，而且我已经用 C++ 编程多年了。感谢您向我展示了该语言的*另一个*极端案例！

官方解释：根据 C++03 ISO 规范，§6.8：

> 在涉及表达式语句和声明的语法中存在歧义：将函数样式显式类型转换 (5.2.3) 作为其最左侧子表达式的表达式语句与第一个声明符以 (.**在这些情况下，声明就是声明。**

（我的重点）。换句话说，只要 C++ 可以将语句解释为表达式（临时对象转换）或声明（变量），它将选择声明。C++ 规范明确给出

> T（一）；

作为声明的示例，而不是`a`类型的转换`T`。

这是 C++[最令人烦恼的解析](http://en.wikipedia.org/wiki/Most_vexing_parse)- 看起来像表达式的东西却被解释为声明。我以前见过 MVP，但我从未在这种情况下见过它。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:58:52.563

问题来自构造函数，您再次调用构造函数 test(_b)

> test::test(){std::cout<<"abc";_b.clear();_b[1]=1;test(_b);}

这就是发生的事情

每次调用 test(_b) 时，它首先调用默认构造函数 test::test ，然后依次调用 test(_b) ，循环继续进行，直到堆栈溢出。

从默认构造函数中删除 test(_b)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T19:59:05.170

我不熟悉标准的特殊性，但可能是在构造函数中调用构造函数是未定义的。因此，它可能取决于编译器。在这种特殊情况下，它会导致您的默认构造函数无限递归，而无需使用 map 参数调用您的构造函数。

C++ FAQ 10.3 有一个带有两个参数的构造函数的示例。如果将 int 参数添加到第二个构造函数，例如`test(map, int)`，它会表现出一些正常的行为。

对于良好的形式，我会简单地改变`test::test(std::map <int, int>& im)`for`test::testInit(std::map <int, int>& im)`和`test(_b)`to `testInit(_b)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T20:09:20.717

我很确定您实际上并没有*“调用构造函数”*，因为它们不能直接调用 IIRC。*法律术语与未命名为函数*的构造函数有关——我手边没有标准的副本，或者我可能会引用它。我相信你正在做的`test(_b)`是创造~~一个无名的~~一个临时的，它再次调用默认构造函数。

> ID：16200934
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200935
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200936
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200937
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200939
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200940
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200941
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200942
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200943
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200944
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200945
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200946
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200947
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200948
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200949
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200950
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200951
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200952
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200953
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200954
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200955
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200956
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200957
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200958
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200959
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200960
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200961
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200962
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200963
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200964
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200965
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200966
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200967
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200968
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200969
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200970
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200971
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200972
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200973
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200974
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200975
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200976
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200977
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200978
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# ios - 写入文件不起作用

> ID：16200979
> 
> 赞同：1
> 
> 时间：2013-04-24T19:55:01.063
> 
> 标签：ios, objective-c, cocoa, nsstring, writetofile

当我尝试使用此代码写入文件时：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"default" ofType:@"txt"];
NSError *error = nil;
NSString*s = @"some text";
BOOL successful = [s writeToFile:path atomically:YES encoding:NSUTF8StringEncoding error:&error];
NSLog(@"%@",error);
NSLog(@"%d",successful); 
```

什么都没发生。NSLog 说：

```
(null)
1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T20:04:07.230

那是因为您正在编写主捆绑包，请尝试以下操作：

```
 NSString *applicationDocumentsDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *storePath = [applicationDocumentsDir stringByAppendingPathComponent:@"default.txt"]; 
```

在这里，我们试图覆盖我们的应用程序文档目录。因为你不能在主包上写

> ID：16200983
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# tfs - 构建服务器不会部署某些应用程序

> ID：16200984
> 
> 赞同：1
> 
> 时间：2013-04-24T19:55:22.087
> 
> 标签：tfs, msbuild, tfsbuild

我们最近升级到 TFS2012，现在我们有一个 MVC 应用程序和一个 WCF 服务，它们都内置在 VS2012 中，它们将编译和构建但不会部署。关于我应该研究什么的任何想法？我读到 MS 现在只允许部署某些类型的文件，而 Web 文件不属于那种类型。非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:36:23.393

标准本地 TFS2012 安装中的默认构建过程不执行任何开箱即用的部署。因此，在回答您的问题时，我会亲自查看正在发生的自定义部署步骤，并且可能会进行一些额外的登录以识别问题。

通常能够将桌面远程连接到构建服务器，然后执行构建过程将采取的步骤是检查此类事情的好方法。

由于升级过程通常涉及重新安装构建代理，我的猜测是它可能是一个权限问题，可能构建代理安装为与它在 TFS 2010 配置中的运行方式不同的用户，并且该进程/用户确实如此没有部署构建的权限。但这只是一个猜测 - 深入了解您添加到构建过程中的部署步骤应该可以帮助您追踪它。祝你好运！

> ID：16200985
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16200986
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# javascript - 从下拉菜单中选择选项时尝试将文本复制到剪贴板

> ID：16200988
> 
> 赞同：0
> 
> 时间：2013-04-24T19:55:36.257
> 
> 标签：javascript, jquery, html

我创建了一个包含选项列表的下拉菜单。我希望能够选择其中一个选项，一旦选择，我希望它执行一个功能，将文本从记事本（.txt 文件）复制到我的剪贴板并提醒我它已被复制..

这是我到目前为止所拥有的：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<title>Dropdown Test</title>

<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script>
<script type="text/javascript" language="Javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
<script>
function changeOptions(){
$('select[name="dropdown"]').change(function(){

if ($(this).val() == "option1")
    function1();
else if ($(this).val() == "option2")
    function2();
else if ($(this).val() == "option3")    
    function3();
else if ($(this).val() == "option4")
    function4();
else if ($(this).val() == "option5")    
    function5();

});

}
</script>

<script type="text/javascript"> 

function function1(){
$(function()

{
var page_name="textfile.txt";

    $.get(page_name, function(data)
    {
            if (window.clipboardData) {
    window.clipboardData.setData('text', data);
} 

            alert("The text from textfile.txt has been copied to your clipboard! ");
    });
});
}
 </script>

 <body onload ="changeOptions()">

<select name="dropdown" size=1>
<option>Select options below...</option>
<option value="option1">Text file1</option>
<option value="option2">Text file2</option>
<option value="option3">Text file3</option>
<option value="option4">Text file4</option>
<option value="option5">Text file5</option>

</select>
</body>
</html> 
```

所以这里的问题是，当您从下拉菜单中选择时，它似乎可以工作，您会收到警报说“textfile.txt 中的文本已被复制......”但是，它不会复制，我不会不知道还能做什么！我已经用一个按钮和'onclick'尝试了这个功能，它可以工作，成功地将文本复制到剪贴板！

请帮忙！

我很感激！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:08:25.573

您无法访问（复制/粘贴）客户端上的系统剪贴板。

这样做将是一个安全问题。您可以从中读取敏感数据，或将恶意内容粘贴到其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:09:54.407

请参阅：[如何在 JavaScript 中复制到剪贴板？](https://stackoverflow.com/questions/400212/how-to-copy-to-the-clipboard-in-javascript).

出于安全原因，大多数浏览器不支持直接使用 javascript 修改用户的剪贴板。有使用 Flash 的变通方法，例如[ZeroClipboard](https://github.com/jonrohan/ZeroClipboard)

# php - ORM Doctrine ManyToOne on update CASCADE (Symfony)

> ID：16200990
> 
> 赞同：9
> 
> 时间：2013-04-24T19:55:36.343
> 
> 标签：php, symfony, orm, doctrine-orm

我有两个实体

```
class Promotor
{

/**
 * @ORM\ManyToOne(targetEntity="Ciudad", inversedBy="promotor")
 * @ORM\JoinColumn(name="ciudad_id", referencedColumnName="id", nullable=false)
 */
protected $ciudad; 
```

和

```
class Ciudad
{
/**
 * @var integer
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var string
 *
 * @ORM\Column(name="nombre", type="string", length=50)
 */
private $nombre; 
```

“发起人”可以住在一个“Ciudad”（城市）中。而在一个“Ciudad”（城市）中可以住很多“Promotores”。

如果我在 JoinColumn 中添加 onDelete="CASCADE"

```
/**
 * @ORM\ManyToOne(targetEntity="Ciudad", inversedBy="promotor")
 * @ORM\JoinColumn(name="ciudad_id", referencedColumnName="id", nullable=false, onDelete="CASCADE")
 */
protected $ciudad; 
```

它生成下一个代码

```
ALTER TABLE promotor DROP FOREIGN KEY FK_BF20A37FE8608214;
ALTER TABLE promotor ADD CONSTRAINT FK_BF20A37FE8608214 FOREIGN KEY (ciudad_id)
REFERENCES Ciudad (id) ON DELETE CASCADE 
```

但我也喜欢在更新时做 CASCADE。我尝试使用 onUpdate="CASCADE" 但它不起作用

```
[Doctrine\Common\Annotations\AnnotationException]
[Creation Error] The annotation @ORM\JoinColumn declared on property     Web\PromotorBundle\Entity\Promotor::$ciudad does not have a property named
"onUpdate". Available properties: name, referencedColumnName, unique, nulla
ble, onDelete, columnDefinition, fieldName 
```

通过错误，我了解到属性 onUpdate 不存在，但是.. 有没有办法在更新时进行级联？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-25T11:11:19.623

onDelete="CASCADE" 用于数据库级别。正如你已经说过的，没有 onUpdate。另一个缺点是 ON DELETE CASCADE 仅适用于 InnoDB。它不适用于 MyISAM。

但是你可以使用 Doctrine 内存级联操作：

```
class Promotor
{

/**
* @ORM\ManyToOne(targetEntity="Ciudad", inversedBy="promotor", cascade={"persist", "remove"})
* @ORM\JoinColumn(name="ciudad_id", referencedColumnName="id", nullable=false)
*/
protected $ciudad; 
```

这一切都在文档中描述：[https ://www.doctrine-project.org/projects/doctrine-orm/en/latest/reference/working-with-associations.html#transitive-persistence-cascade-operations](https://www.doctrine-project.org/projects/doctrine-orm/en/latest/reference/working-with-associations.html#transitive-persistence-cascade-operations)

另外，您可以跳过*JoinColumn*注释，因为您编写它的方式是默认配置，并且它是隐式生成的。

所以你可以写：

```
class Promotor
{

/**
* @ORM\ManyToOne(targetEntity="Ciudad", inversedBy="promotor", cascade={"persist", "remove"})
*/
protected $ciudad; 
```

# javascript - 是否可以以编程方式确定是否可以延迟 javascript 文件？

> ID：16200994
> 
> 赞同：1
> 
> 时间：2013-04-24T19:55:49.053
> 
> 标签：javascript

我正在优化我的网站，Google PageSpeed 建议的其中一件事是“推迟解析 JavaScript”。我尝试推迟我所有的 javascript 文件，但这会破坏一些功能。我需要一些在之前和之后加载。有没有办法以编程方式确定这一点？

# c++ - 为什么不#include 工作？

> ID：16200997
> 
> 赞同：15
> 
> 时间：2013-04-24T19:56:01.380
> 
> 标签：c++, python, visual-studio-2010, wrapper

我正在尝试使用 C++ 运行 Python 模块`"#include <Python.h>"`，但是，在将项目的“附加包含依赖项”设置为“\include”后，调试时出现以下错误，

```
LINK : fatal error LNK1104: cannot open file 'python27_d.lib' 
```

我读到我应该下载 Python 的开发版本，但我没有找到该链接，另外，我不需要将文件“python27_d.lib”复制到“libs”文件夹吗？

请注意，我使用的是 Python 的 Anaconda 发行版。

提前致谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2015-09-06T16:44:04.340

我通常通过在调试版本中使用非调试 Python 库来规避这一点。通常，这会导致如下代码：

```
#ifdef _DEBUG
  #undef _DEBUG
  #include <Python.h>
  #define _DEBUG
#else
  #include <Python.h>
#endif 
```

在包含 Python.h 期间隐藏 _DEBUG 的定义。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-24T20:02:08.243

我对 python 了解不多，但该消息表明 python27_d.lib 要么不存在，要么至少在链接器正在寻找它的地方不存在。

您已经修复了编译器包含问题，现在使用 Windows 资源管理器找到 python27_d.lib 文件，并将该路径添加到 Additional Library Dependencies 路径。它位于配置 -> 链接器 -> 常规 -> 附加库目录下。

“_d”表示它是一个调试库，因此您需要一个用于调试配置，一个没有“_d”（可能）用于您的发布配置。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-09T19:19:07.047

将 Visual Studio 置于发布模式而不是调试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-13T11:46:27.753

您不一定必须使用 Python 调试版本... [即使您不使用 boost问题，以便您可以针对发布的 python dll 构建调试扩展。

[http://www.boost.org/doc/libs/1_53_0/libs/python/doc/building.html#id19](http://www.boost.org/doc/libs/1_53_0/libs/python/doc/building.html#id19) Python 调试构建

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-14T08:33:00.560

我在尝试使用 Boost.python 从 C++ 访问 Anaconda python 包时遇到了类似的错误。首先让我说，我个人对 C++ Boost 库的印象是，它们是一个很棒的想法，但文档不完整。boost.org 上有大量文档，但它似乎总是遗漏了作者认为太琐碎而无法提及的关键细节。但是，让我离开我的肥皂盒......

我 [希望，最终] 弄清楚如何让 Boost.Python 在我的系统上工作的持续动力是，Anaconda 发行版中包含了很多很棒的 Python 科学包 [SymPy、Numpy、SciPy、matplotlib 等]从使用 Qt Creator 构建的 C++ 项目中访问它们真的很棒。Boost 文档似乎确实建议 Boost.Python 应该为我做这件事。唉，这些文档似乎遗漏了作者认为太琐碎而无法提及的关键细节......

无论如何，最初，我收到一个构建错误，表明找不到 python.h。通过将这两个语句添加到我的 Qt Creator 项目的 .pro 文件中，我摆脱了这种情况，它告诉 qmake Boost 在哪里安装了它的包含文件以及 Anaconda 在我的系统上安装了它的 python.h 文件：

```
INCLUDEPATH += C:\boost_1_55_0
INCLUDEPATH += C:\Anaconda\include 
```

之后，我收到一个 LNK1104 错误，表明找不到“python27.lib”。通过将这两个语句添加到我的 .pro 文件中，我摆脱了这种情况。第一个告诉 qmake 在哪里可以找到 Anaconda 的 python27.lib 文件。第二个告诉 qmake 在哪里可以找到 boost.python 二进制文件：

```
LIBS += "C:/Anaconda/libs"
LIBS += "C:/boost_1_55_0/stage/lib/libboost_python-vc110-mt-gd-1_55.lib" 
```

但是，这就是我到目前为止所获得的。我现在收到一个错误，表明它无法打开我尚未找到修复的文件“C:/Anaconda/libs.obj”。当然，该错误是由该文件不存在引起的。挑战在于发现为什么要寻找它以及在哪里找到它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-07-02T06:40:33.740

在 Visual Studio 上，您需要为项目添加“其他包含目录”。下面的步骤。右键单击项目 -> 属性 -> c/c++ -> 附加包含目录 -> 将其指向“Python\include”文件夹（例如：c:\python\include）。