# StackOverflow 问答 13550000-13550999

# php - 类 Layout 的对象无法转换为字符串

> ID：13550000
> 
> 赞同：0
> 
> 时间：2012-11-25T10:04:36.173
> 
> 标签：php, radphp

当我通过 IDE 在本地运行应用程序时，我没有看到任何错误

*但是当转移到服务器时，我得到“第 484 行的 /文件夹位置*/rpcl/classes.inc.php中的类布局对象无法转换为字符串”

这阻止了我的部署，因此我们将不胜感激地收到任何帮助。我已将整个 RPCL 库转移到服务器上（Google / Facebook 等专业文件夹除外）

我正在运行完全修补的 RadPHP XE2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:47:16.107

这是 RadPHP 中的表单损坏 我用一个表单创建了一个新项目，然后从旧项目中复制了所有对象和代码。最后，我将新的 form.php 和 form.xml.php 放回原来的项目中，嘿，它工作了！不是真正的解决方案，但 HTML5 Builder 现在可用，无论它在 RadPHP 中不会被修复

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-05T06:04:54.793

html5 builder 仍然会出现此问题。

当您在设计时更改表单上的任何布局或字体属性时，就会出现问题。这在表单文件中给出了结构

```
<property>
  <property ..>stuff</property>
  <property ..>stuff</property>
</property> 
```

因此，痛苦的解决方法是不要在设计时更改类属性，例如布局或字体。

# c# - 文件没有被创建并且没有错误

> ID：13550007
> 
> 赞同：1
> 
> 时间：2012-11-25T10:05:54.780
> 
> 标签：c#, .net, winforms, windows-7, epplus

对，所以我有这个代码：

```
 Byte[] bin = p.GetAsByteArray();
 File.WriteAllBytes(@"C:\Report.xlsx", bin); 
```

现在`p`是一个`ExcelPackage`对象，它是一个用于操作 xlsx 文件的类。

虽然`p`有数据，但以下命令不会创建文件，也不会发生错误。

我相信这与我在 Windows 7 上运行它有关，但我只是通过 VS 进行调试。

我正在使用.Net 4.5，有人知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T10:15:27.170

您没有显示足够的代码来准确定位问题......很可能是以下情况之一：

*   安全

    在较新的 Windows 版本（如 7）中，您不再允许直接存储文件等`C:\`。

*   `p`和/或`bin`不处于允许保存的状态。

编辑 - 根据评论：

您可以在调用中使用任何`ApplicationData`/ `CommonApplicationData`/ `LocalApplicationData`from ...`Environment.SpecialFolder``Environment.GetFolderPath ()`

MSDN 参考：http: [//msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)

# android - actionBar 中的 android-seach 选项，无需创建自定义主题

> ID：13550008
> 
> 赞同：2
> 
> 时间：2012-11-25T10:06:16.620
> 
> 标签：android, eclipse

是否可以在操作栏右侧放置搜索选项而无需创建自定义操作栏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T10:21:50.027

按照此代码如果您是操作栏夏洛克，您可以在操作栏中实现搜索菜单

```
 public boolean onCreateOptionsMenu(Menu menu) {

        menu.add("Search")
         .setIcon(R.drawable.search)
         .setActionView(R.layout.search_layout)
         .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_COLLAPSE_VIEW);

       return true;
    }

    public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
         //What do i write here?
         return true;
    } 
```

## 在 search_layout.xml

放置一个足够的edittext。

[普通 Android Actionbar 搜索小部件实现](https://stackoverflow.com/questions/9556795/android-actionbar-search-widget-implementation)

# iphone - 使用 SSL 和 POST 与 PHP 脚本对话

> ID：13550010
> 
> 赞同：0
> 
> 时间：2012-11-25T10:06:47.223
> 
> 标签：iphone, ios

我有这段代码可以将一些参数发送到 PHP 脚本。理论上，脚本应该返回一个 TXT 输出，如

```
header('Content-Type: text/plain');

for ($i = 0; $i < $number; $i++) {

    echo($arrayNumbers[$i] . "\n");
} 
```

输出类似于数字，每行一个

```
13244
23123
23455
... etc. 
```

这是我拥有的 iPhone 脚本：

```
 NSString *myRequestString = [NSString stringWithFormat:@"name=%@&phone=%@&address=%@", name, phone, address];

    // encode the URL with % codes
    NSString *escapedString = (NSString *)CFBridgingRelease
        (CFURLCreateStringByAddingPercentEscapes( NULL,
                                                 (__bridge CFStringRef) myRequestString,
                                                 NULL,
                                                 (CFStringRef)@"!*'();:@&=+$,/?%#[]",
                                                 kCFStringEncodingUTF8));

    NSData *myRequestData = [NSData dataWithBytes:[escapedString UTF8String]
                                            length:[escapedString length]];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc]
                                    initWithURL:[NSURL URLWithString: @"https://myserver.com/myScript.php"]];
    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/x-www-form-urlencoded; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody: myRequestData];

   NSOperationQueue *queue = [[NSOperationQueue alloc] init];

    [NSURLConnection sendAsynchronousRequest:request
                                       queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
    {
        if ([data length] > 0 && error == nil) {
            NSString *content = [NSString stringWithUTF8String:[data bytes]];
            NSLog(@"responseData: %@", content);
        }
        else if ([data length] == 0 && error == nil)
            NSLog(@"empty");
        else 
            NSLog(@"error");
    }]; 
```

结果总是空的。没有从服务器下载任何内容。

我应该检查什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T11:40:24.540

我已将代码的开头更改为此，现在可以正常工作了。

```
NSString *myRequestString = [NSString stringWithFormat:@"name=%@&phone=%@&address=%@", name, phone, address];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc]
                                initWithURL:[NSURL URLWithString: @"https://myserver.com/myscript.php"]];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/x-www-form-urlencoded; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:[myRequestString dataUsingEncoding:NSUTF8StringEncoding]];

  NSOperationQueue *queue = [[NSOperationQueue alloc] init];

    [NSURLConnection sendAsynchronousRequest:request
                                       queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
    {
        if ([data length] > 0 && error == nil) {
            NSString *content = [NSString stringWithUTF8String:[data bytes]];
            NSLog(@"responseData: %@", content);
        }
        else if ([data length] == 0 && error == nil)
            NSLog(@"empty");
        else 
            NSLog(@"error");
    }]; 
```

# python - 在 Django 中一次读取一个块

> ID：13550011
> 
> 赞同：0
> 
> 时间：2012-11-25T10:06:47.477
> 
> 标签：python, django, nginx, gunicorn, chunked-encoding

我们的设置是 Nginx、Gunicorn 和 Django。
我正在尝试将代理分块传输编码的功能添加为 HTTP 发布请求[http://en.wikipedia.org/wiki/Chunked_transfer_encoding](http://en.wikipedia.org/wiki/Chunked_transfer_encoding) 但是即使我们能够读取分块数据（在安装 nginx_extras 之后），它还是以单个数据包（在 request.raw_post_data 中）。

如何一次读取一个块？

我不确定 Nginx、Gunicorn 或 Django 中的哪一个缓冲了整个帖子消息......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:17:56.217

遗憾的是，我刚刚发现 NginX 缓冲了整个消息。
写 Nginx 分块模块的张一春大概是这么说的。

# user-controls - 无法进入 ascx src 中的根目录

> ID：13550012
> 
> 赞同：1
> 
> 时间：2012-11-25T10:07:21.527
> 
> 标签：user-controls, dotnetnuke, ascx, taskmanager

我开始构建 DNN taskMagnager 模块，我需要使用 acsx 页面中的控件

```
C:\inetpub\wwwroot\dnndev\controls 
```

问题是我的项目文件夹路径是

```
C:\inetpub\wwwroot\dnndev\DesktopModules\TaskManager" 
```

当我试图走这样的路时：

```
<%@ Register TagPrefix="dnn" TagName="label" **Src="~/controls/lablecontrol.ascx"** %> 
```

找不到src！

不管我做什么它总是转向

```
C:\inetpub\wwwroot\dnndev\DesktopModules\TaskManager\="~/controls/lablecontrol.ascx 
```

我尝试了一切：波浪号（〜），/../..

没有任何作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T00:16:10.697

它应该是

```
<%@ Register TagPrefix="dnn" TagName="label" Src="~/controls/labelcontrol.ascx" %> 
```

我假设您指的是 Visual Studio 中的错误，对吗？运行应用程序时是否存在实际错误？

您可以在 Visual Studio 中做的一件事是在项目设置中设置根应用程序路径以帮助它减少混淆。转到项目设置中的 Web 选项卡，确保您已设置为使用 IIS，并将项目 URL 指向 TaskManager 文件夹（例如`http://dnndev/DesktopModules/TaskManager`），然后选中覆盖应用程序根 URL 复选框，并将其设置为网站（例如`http://dnndev`）。这通常会让 Visual Studio 找出标签控件的正确位置。

此外，看起来您正在使用`LableControl`而不是`LabelControl`.

# c# - 没有返回记录时的 EF Linq 产品总和

> ID：13550014
> 
> 赞同：9
> 
> 时间：2012-11-25T10:07:57.473
> 
> 标签：c#, linq, entity-framework

我到处都看到过这个问题的变体，但没有一个答案对我有用。他们中的大多数也只是试图对单个列求和 - 没有比乘积之和更复杂的了，如下所示：

```
public double Total

    {
        get
        {
            return _Context.Sales.Where(t => t.Quantity > 0)
                .DefaultIfEmpty()
                .Sum(t => t.Quantity * t.Price);                 
        }
    } 
```

如果没有返回行，我想返回零。但是，如果没有返回行，则 .Sum() 失败。有多种尝试插入 Convert.ToDouble 和使用空合并运算符的选项，但它们仍然给了我错误。

我敢肯定我错过了一种简单的方法来做到这一点——在长时间撞击谷歌砖墙后，任何帮助都非常感激！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-25T10:15:22.323

删除`DefaultIfEmpty()`运算符。将`Sum`结果转换为可为空的类型。如果查询返回，则使用 null-coalescing 运算符返回默认值`null`

```
public double Total    
{
   get
   {
       return _Context.Sales
                      .Where(t => t.Quantity > 0)
                      .Sum(t => (double?)(t.Quantity * t.Price)) ?? 0; 
   }
} 
```

生成的 SQL 将如下所示：

```
SELECT SUM([Filter1].[A1]) FROM 
(SELECT CAST(CAST([Extent1].[Quantity] AS decimal(19,0)) * 
                  [Extent1].[Price] AS float) AS [A1]
 FROM [dbo].[Sales] AS [Extent1]
 WHERE [Extent1].[Quantity] > 0) AS Filter1 
```

# xcode - Xcode：故事板中的字体看起来与代码不同

> ID：13550017
> 
> 赞同：0
> 
> 时间：2012-11-25T10:08:14.463
> 
> 标签：xcode, fonts, storyboard

我有一个带有标签的故事板。标签的字体设置为 System 25。

我想让字体大小动态化，我现在通过代码设置它。我设置了断点，所以我知道在我的代码中实际上选择了“25”，但字体大小仍然比我在情节提要设计器中设置时要小。

有没有人发现我可能出错的地方或我可能错过的任何警告？

```
//set label font size
CGFloat nFontSize;
if (bIsIPad)
{
    nFontSize=25.0;
}
else if (bIsIPhone_3GS_4_4s_Or_iPodTouch_3_4)
{
    nFontSize=12.0;
}
else if (bIsIphone_5_Or_IPodTouch_5)
{
    nFontSize=25.0;
}
UIFont *nFont = [UIFont fontWithName:@"System" size:nFontSize];

captionLabel0.font = nFont;
captionLabel1.font = nFont; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T10:58:40.800

似乎 "fontWithName:@"System"" 与 "[UIFont systemFontOfSize:nFontSize];" 不一样

故事板属性页在显示字体“System”时似乎反映了“systemFontOfSize”。

When I chose "systemFontOfSize", the results were the same as in the storyboard.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:20:39.463

您需要将标签连接到插座（故事板）。

之后，您设置此标签的字体大小。

# oracle11g - SQL*Plus 脚本挂起

> ID：13550022
> 
> 赞同：0
> 
> 时间：2012-11-25T10:08:22.390
> 
> 标签：oracle11g, sqlplus

我在 sql*plus 中运行一个脚本，它位于桌面，我的命令是：

```
@C:\users\intel\desktop\script1.sql 
```

当我按下回车键时，指针只是转到下一行并在那里闪烁，然后什么也没做。连我都写不出来。有什么问题？？

这是我的脚本的一部分：

```
CREATE TABLE ADDRESS
(
    ADDRESSID INTEGER PRIMARY KEY,
    FLAG CHAR(1),
    ID INTEGER NOT NULL,
    ADDRESS VARCHAR(100)
);

CREATE TABLE Category (
  CategoryId INTEGER   NOT NULL  ,
  CategoryName VARCHAR(100) NULL,
  PRIMARY KEY(CategoryId)
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:17:01.233

键入`/`并按回车键。这将运行命令缓冲区

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-02T11:38:37.187

您可能有一个待处理的交易。尝试提交/回滚您的事务并再次运行您的脚本。

# c# - 应用程序池在现场崩溃

> ID：13550023
> 
> 赞同：1
> 
> 时间：2012-11-25T10:08:25.493
> 
> 标签：c#, asp.net, .net, iis

因此，我一直在试图弄清楚为什么应用程序池会时不时地崩溃，并且我已经确定了~~cau~~似乎是导致问题的页面。

当我在浏览器中打开该站点，并访问运输购物车页面（将东西添加到购物车后），整个浏览器变得无响应，我打开任务管理器，看到 IE（浏览器）正在使用 99% 的 CPU，所以我右键单击 > 创建 DUMP > 尝试读取 DUMP 但 WinDBG 似乎不喜欢 DMP 文件；不会读它们。

所以我继续前进，并尝试在没有转储文件的情况下弄清楚它。我启动 Visual Studio，打开相关站点，然后按照相同的过程（将内容添加到购物车，然后访问购物车页面）。令我惊讶的是，一切都很好。

不知道现在该怎么办。有什么建议么？您将如何确定挂起的原因，当一切都在本地完美运行时 - 当一切过去都在网上完美运行，但不再在网上正常运行时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T10:35:14.930

如果浏览器变得无响应并占用 99% 的 CPU，那就是客户端问题；它很可能与 IIS 或您的服务器端代码没有任何关系。

会不会是您的页面中有一些 javascript 有问题并进入了繁忙的循环？我认为值得一试（使用 IE 的开发人员工具 (F12)、Visual Studio 的 javascript 调试功能或 FireFox 与 FireBug 结合使用）。

**编辑** 让我感到奇怪的是，您的 AppPool 崩溃了，并且这样做会导致 Web 浏览器变得无响应。没有响应，你真的是说浏览器本身停止工作（即导航页面返回或转到另一个 url，如 google.com 是不可能的？）

无论如何，如果您认为问题发生在服务器端，您可以尝试以下操作（按努力增加的顺序）：

*   AppPool 崩溃后，检查 Windows 事件日志（从命令提示符运行“eventvwr”）并查看为您提供的信息。
*   查看 IIS 日志（您可能[必须先打开它](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/d29207e8-5274-4f4b-9a00-9433b73252d6.mspx?mfr=true)），看看它是否包含任何奇怪的请求模式，例如您的页面被锤击）
*   从 IIS 运行您的网站，但将 Visual Studio 中的调试器（在工具下，附加到进程 - 仅包括托管代码）附加到 IIS 工作进程（通常是 w3wp.exe）。如果您的页面抛出异常，VS 应该能够捕获它。
*   向您的页面添加更多跟踪，[Global.asax](http://www.codeproject.com/Articles/228879/Global-asax-in-ASP-NET)的 Application_Error 似乎是一个特别好的候选者。

# django - 如何创建和处理具有多个相同字段的表单？

> ID：13550031
> 
> 赞同：0
> 
> 时间：2012-11-25T10:09:18.210
> 
> 标签：django, django-forms

我真的坚持这一点。为了展示我的问题，我创建了一个新的 Django 项目并从头开始，只关注一个表单。

我想要做的是创建一个具有多个同名字段的表单。我尝试使用`modelformset_factory`来实现这一点，但在我看来这不是我真正需要的。

下面是我的代码（也在[dpaste](http://dpaste.com/836293/)上），它目前在一个名为`name`. 如何创建和处理包含多个`name`字段的表单？有人能指出我正确的方向吗？

```
# models.py
class Category(models.Model):
    name = models.CharField(max_length=30, unique=True)
    user = models.ForeignKey(User, blank=True, null=True)

    class Meta:
        verbose_name_plural = "Ingredience Categories"

    def __unicode__(self):
        return self.name

# forms.py
class CategoryForm(ModelForm):
    class Meta:
        model = Category
        fields = ('name',)

# views.py
def home(request):
    if request.method == 'POST':
        catform = CategoryForm(request.POST)
        catformInstance = catform.save(commit = False)
        catformInstance.save()
        return HttpResponseRedirect('')
    else:
        catform = CategoryForm() 

    context = {'catform': catform}
    return render_to_response('home.html', context, context_instance=RequestContext(request))

# home.html template
<h3>Insert new Category</h3> 
<form action="/" method="post" id="ingr-cat-form">{% csrf_token %}
{{ catform.as_p }}
<input type="submit" name="ingrCatForm" value="Save" />
</form> 
```

**更新：**澄清一下，我想允许用户在一个表单中插入多个类别。我想我已经接近了，这是我的**新版本 views.py**但它仍然只存储一个类别（列表中的最后一个）：

```
def home(request):
    if request.method == 'POST':
        catform = CategoryForm(request.POST)
        names = request.POST.getlist('name')
        catformInstance = catform.save(commit = False)
        for name in names:
            catformInstance.name = name
            catformInstance.save()
        return HttpResponseRedirect('')
    else:
        catform = CategoryForm() 

    context = {'catform': catform}
    return render_to_response('home.html', context, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:16:53.897

您不能拥有具有相同名称的字段（在同一模型上）。如果只需要更改html表单中的html标签，使用

```
class Category(models.Model):
    name = models.CharField(max_length=30, unique=True)
    name2 = models.CharField(max_length=30, unique=True, verbose_name="name")
    user = models.ForeignKey(User, blank=True, null=True) 
```

或者

```
class CategoryForm(ModelForm):
    def __init__(self , *args, **kwargs):
        super(CategoryForm, self).__init__(*args, **kwargs)
        self.fields['name2'].label = "name" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:15:50.797

这是一个有效的解决方案。感谢@YardenST 为我指明了正确的方向。[通过遵循本教程](http://collingrady.wordpress.com/2008/02/18/editing-multiple-objects-in-django-with-newforms/)，我设法解决了我最初的问题。

```
# models.py
class Category(models.Model):
    name = models.CharField(max_length=30, unique=True)
    user = models.ForeignKey(User, blank=True, null=True)

    class Meta:
        verbose_name_plural = "Ingredience Categories"

    def __unicode__(self):
        return self.name

# forms.py
class CategoryForm(ModelForm):
    class Meta:
        model = Category
        fields = ('name',)

# views.py
def home(request):
if request.method == 'POST':
    catforms = [CategoryForm(request.POST, prefix=str(x), instance=Category()) for x in range(0,3)]
    if all([cf.is_valid() for cf in catforms]):
        for cf in catforms:
            catformInstance = cf.save(commit = False)
            catformInstance.save()
    return HttpResponseRedirect('')
else:
    catform = [CategoryForm(prefix=str(x), instance=Category()) for x in range(0,3)]

context = {'catform': catform}
return render_to_response('home.html', context, context_instance=RequestContext(request))

# home.html template
<h3>Insert new Category</h3>
<form action="/" method="post" id="ingr-cat-form">{% csrf_token %}
{% for catform_instance in catform %} {{ catform_instance.as_p }} {% endfor %}
<input type="submit" name="ingrCatForm" value="Save" />
</form> 
```

# python - 如何在自包含程序中使用 Python 单元测试？

> ID：13550039
> 
> 赞同：3
> 
> 时间：2012-11-25T10:10:26.497
> 
> 标签：python, unit-testing

我想在小型自包含程序中使用带有单元测试的 Python 3.3，即我不想将其拆分为命令行部分和“功能”部分，如果它在自身上启动，则可以对其进行测试命令行。

所以我有这个小程序：

```
import unittest

def stradd(a, b):
   return a + b

class test_hello(unittest.TestCase):
   def test_1(self):
      self.assertEqual(stradd("a", "b"), "ab")

unittest.main()
print(stradd("Hello, ", "world")) 
```

不幸的是， print() 永远不会到达，因为 unittest.main() 退出了程序。即使它不会退出，它也会将我在正常操作中不想看到的各种输出打印到屏幕上。

只要没有错误，有没有办法静默运行测试？当然，如果某些事情不起作用，他们应该大声抱怨。

我已经看到[Run python unit tests 作为程序的一个选项](https://stackoverflow.com/q/9831749/1045800)，但这也不能回答我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T13:12:46.350

`unittest`用一个普通的模块就可以达到你想要的效果。您只需要编写自己的简单测试运行程序。像这样：

```
import unittest

def stradd(a, b):
    return a + b

class test_hello(unittest.TestCase):
    def test_1(self):
        self.assertEqual(stradd("a", "b"), "ab")

def run_my_tests(test_case):
    case = unittest.TestLoader().loadTestsFromTestCase(test_case)
    result = unittest.TestResult()
    case(result)
    if result.wasSuccessful():
        return True
    else:
        print("Some tests failed!")
        for test, err in result.failures + result.errors:
            print(test)
            print(err)
        return False

if run_my_tests(test_hello):
    # All tests passed, so we can run our programm.
    print(stradd("Hello, ", "world")) 
```

`run_my_tests``True`如果所有测试都成功通过，函数将返回。但如果测试失败，它会将所有错误/失败打印到标准输出。例如：

```
$ python myscript.py 
Hello, world

$ # And now the test fails...
$ python myscript.py 
Some tests failed!
test_1 (__main__.test_hello)
Traceback (most recent call last):
  File "myscript.py", line 8, in test_1
    self.assertEqual(stradd("a", "c"), "ab")
AssertionError: 'ac' != 'ab' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T12:03:35.437

只需使用 python 的[nosetests](https://nose.readthedocs.org/en/latest/)或[py.test](http://pytest.org/latest/)。然后你可以完全按照你想要的方式编写代码——除了添加到程序中的函数并通过以下方式运行测试之外*什么都没有*`test_`

```
$ nosetests filename.py 
```

或者

```
$ py.test filename.py 
```

是的，也不需要上课：

```
def test():
    assert stradd("a", "b") == "ab" 
```

虽然它没有回答你“默默运行”的部分。对我来说，这个 + 命令行历史可以正常工作。对于小程序来说，基本上是片段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T23:14:33.270

其他测试框架在这里没有帮助，因为这里的问题不是测试框架。话虽如此，那`py.test`是最好的:)。

问题是`unittest.main()`函数专门设计用于以标准方式运行测试，并且不提供以任何方式自定义此过程的方法。这给我们留下了两个选择

*   用于`subprocess`在单独的进程中运行测试 using `unittest.main()`，检查输出，如果所有测试都通过，则继续运行我们的程序
*   不理会高层`unittest.main()`，使用 unittest 模块提供的其他设施

一旦我找到更多空闲时间，我会写下这两个选项。

# ruby - 数组中的 1 到 100 个奇数

> ID：13550042
> 
> 赞同：16
> 
> 时间：2012-11-25T10:10:54.017
> 
> 标签：ruby

Ruby 中是否有任何很酷的方法可以创建一个包含 1 到 100 且只有奇数条目（1、3 等）的数组。我现在有一个循环，但这显然不是一个很酷的方法！有什么建议么？

我当前的代码：

```
def create_1_to_100_odd_array
    array = [1]
    i = 3
    while i < 100
        array.push i
        i += 2
    end

    array
end 
```

提前致谢

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-25T10:14:20.500

[Range](http://ruby-doc.org/core-1.9.3/Range.html#method-i-step)类为此目的提供了一个非常酷的功能：

```
1.9.3-p286 :005 > (1..10).step(2).to_a
 => [1, 3, 5, 7, 9] 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-25T10:38:08.653

可能效率不高，但一小段代码：

```
(1..100).select(&:odd?)

# => [1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21, 23, 25, 27, 29, 31, 33, 35, 37, 39, 41, 43, 45, 47, 49, 51, 53, 55, 57, 59, 61, 63, 65, 67, 69, 71, 73, 75, 77, 79, 81, 83, 85, 87, 89, 91, 93, 95, 97, 99] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-25T12:07:16.710

只是玩...

```
(0...50).map(&:object_id)
#or
1.step(100,2).to_a 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-25T10:16:29.463

既然你需要一个函数，那么：

```
def odd_to(n)
    (1..n).step(2).to_a
end 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-25T10:25:24.247

不是很有效的解决方案，但相当优雅：

```
(1..100).select {|a| a%2 != 0} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-04T23:48:49.203

当您实例化数组时，您可以将其作为单行来执行：

```
def create_array_of_odds_to(n)
  Array.new((n + 1) / 2) {|i| 2 * i + 1}
end

create_array_of_odds_to 10   # => [1, 3, 5, 7, 9] 
```

# asp.net - ASP.net 4.0 路由不适用于主域名

> ID：13550043
> 
> 赞同：0
> 
> 时间：2012-11-25T10:11:20.123
> 
> 标签：asp.net, c#-4.0, asp.net-routing

我的网站新闻部分有一个简单的路由。路由适用于几乎所有 URL 之类的

[http://www.abc.com/Default.aspx](http://www.abc.com/Default.aspx)

[http://www.abc.com/Default.aspx?PageId=3](http://www.abc.com/Default.aspx?PageId=3)

[http://www.abc.com/Latest-News-Details.aspx?PageID=28&NewsID=39](http://www.abc.com/Latest-News-Details.aspx?PageID=28&NewsID=39)

仅当我尝试使用**http://www.abc.com**访问网站时才会出现问题，由于某种原因它将其重定向到自定义错误页面，我无法跟踪源错误并且我无法在我的本地主机上生成任何此类错误。

代码示例

全局.asx 文件

```
void Application_Start(object sender, EventArgs e)
{
    // Code that runs on application startup
    RegisterRoutes(RouteTable.Routes);
    //RouteDebug.RouteDebugger.RewriteRoutesForTesting(RouteTable.Routes);
}

public static void RegisterRoutes(RouteCollection routes)
{
    routes.Ignore("{*allaspx}", new { allaspx = @".*\.aspx(/.*)?" });
    routes.Ignore("{*allcss}", new { allcss = @".*\.css(/.*)?" });
    routes.Ignore("{*alljpg}", new { alljpg = @".*\.jpg(/.*)?" });
    routes.Ignore("{*alljs}", new { alljs = @".*\.js(/.*)?" });
    routes.Add(new System.Web.Routing.Route("{resource}.css/{*pathInfo}", new System.Web.Routing.StopRoutingHandler()));
    routes.Add(new System.Web.Routing.Route("{resource}.js/{*pathInfo}", new System.Web.Routing.StopRoutingHandler()));

    ////For News
    routes.MapPageRoute("NewsRoute", "{NewsID}/{PageID}/{NewsTitle}", "~/Latest-News-Details.aspx", false,
         new RouteValueDictionary {
                    { "NewsID", "0" },
                    { "PageID", "0"},
                    { "NewsTitle", "event-not-found" }},
         new RouteValueDictionary {   
                    { "NewsID", "[0-9]{1,8}" },
                    { "PageID", "[0-9]{1,8}" }
                }); 
} 
```

现在我已经禁用了新闻部分的路由，如果我不注释上述路由代码，它仍然会产生错误。

我不确定是什么导致了问题。

我如何处理默认域的根目录，例如[http://www.abc.com](http://www.abc.com)

我将不胜感激在这方面的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T10:54:54.007

[通过创建另一个路由来处理http://www.abc.com](http://www.abc.com)解决了问题

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.Ignore("{*allaspx}", new { allaspx = @".*\.aspx(/.*)?" });
    routes.Ignore("{*allcss}", new { allcss = @".*\.css(/.*)?" });
    routes.Ignore("{*alljpg}", new { alljpg = @".*\.jpg(/.*)?" });
    routes.Ignore("{*alljs}", new { alljs = @".*\.js(/.*)?" });
    routes.Add(new System.Web.Routing.Route("{resource}.css/{*pathInfo}", new System.Web.Routing.StopRoutingHandler()));
    routes.Add(new System.Web.Routing.Route("{resource}.js/{*pathInfo}", new System.Web.Routing.StopRoutingHandler()));

    routes.MapPageRoute(
         "HomeRoute",
         "",
         "~/Default.aspx"
     );

    ////For News
    routes.MapPageRoute("NewsRoute", "{NewsID}/{PageID}/{NewsTitle}", "~/Latest-News-Details.aspx", false,
         new RouteValueDictionary {
                    { "NewsID", "0" },
                    { "PageID", "0"},
                    { "NewsTitle", "News-not-found" }},
         new RouteValueDictionary {   
                    { "NewsID", "[0-9]{1,8}" },
                    { "PageID", "[0-9]{1,8}" }
                }); 
} 
```

对我来说很奇怪，因为相同的路由为其他网站工作，并创建了另一个回合来处理此类请求`http://www.abc.com`

# java - 线程不活动 - IllegalStateException

> ID：13550046
> 
> 赞同：0
> 
> 时间：2012-11-25T10:12:07.620
> 
> 标签：java, multithreading

这是我正在使用线程制作的一个小程序的片段。

```
JOptionPane.showMessageDialog(null, "Before: " + thread.isAlive());
if (!thread.isAlive()) {
    JOptionPane.showMessageDialog(null, "Thread is not alive.");
    thread.start();
}
JOptionPane.showMessageDialog(null, "After: " + thread.isAlive()); 
```

使用按钮激活此代码。当我第一次按下按钮时，我正确地得到“之前：假”，然后是“之后：真”。当我再次按下按钮时，我错误地得到“之前：假”，然后是“之后：真”，但期望之前：真，因为我没有破坏线程或覆盖变量。

我相信这就是导致我得到的 IllegalStateException 的原因（如果我也错了，请纠正我！）

谁能向我解释我做错了什么？

编辑：

```
public class SomeClass extends Applet
{

private ClassThatExtendsThread thread;

public void init()
{
    super.init();

    //Some UI elements are created here.

    thread = new ClassThatExtendsThread (/*there are some parameters*/);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T10:26:43.773

一旦一个线程完成运行，它就被认为是死的。此时调用`isAlive`同一线程将始终返回`false`. Thread的[JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#isAlive%28%29)确实提到了这一点：

```
公共最终布尔值 isAlive()

测试此线程是否存在。如果线程已启动但尚未启动，则该线程是活动的
还是死了。

```

如果您在调用代码片段之间没有重新实例化您的线程实例，那么您肯定会收到 IllegalStateException。这是因为你试图启动一个已经终止的线程：

```
if (!thread.isAlive()) {
    JOptionPane.showMessageDialog(null, "Thread is not alive.");
    thread.start();
} 
```

为了将来参考，请注意您可以通过该`getState`方法查询线程状态，这至少有助于分析错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:18:41.957

您必须将*线程*变量存储为类成员并且只创建一次。最有可能的是，您将其存储为局部变量并在每次按下按钮时创建它。

# linux - Dia 的附加组件或扩展 - 图表编辑器

> ID：13550053
> 
> 赞同：0
> 
> 时间：2012-11-25T10:12:52.600
> 
> 标签：linux, dia, mockup-tool

毫无疑问，Dia 是 Linux 中的一个很棒的工具。所有 linux 用户可能都遇到过它。当我想设计 UML ERD 或数据库等时，它一直是我最好的朋友。

我想知道它是否有任何附加或扩展可以帮助我进行 GUI/Web 应用程序原型设计。任何想法？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T14:58:21.590

您究竟希望这个插件做什么？也许它可以用几行 Python 代码来实现。

# django - 如何将帐户与脸书关联？（通过脸书登录）

> ID：13550054
> 
> 赞同：0
> 
> 时间：2012-11-25T10:12:53.217
> 
> 标签：django

如何将帐户与脸书关联？（通过 facebook 登录）使用 django-social-auth 还是其他？请举一个非常简单的例子。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:55:47.420

[在这里](https://stackoverflow.com/questions/5530277/how-to-make-facebook-login-possible-in-django-app)寻找脸书

对于所有社交登录，如 gmail、facebook、twitter .. 等等看[这里](http://agiliq.com/blog/2009/08/django-socialauth-login-via-twitter-facebook-openi/)，我更喜欢使用它

[这](http://www.djangopackages.com/grids/g/facebook-authentication/)可能会被完全 使用

# php - PHP 的 IDE 推荐

> ID：13550065
> 
> 赞同：-4
> 
> 时间：2012-11-25T10:14:25.303
> 
> 标签：php, ide

我是 PHP 开发新手，有推荐的 PHP IDE 吗？更好地方便阅读代码和调试代码。

提前谢谢， 林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:17:14.930

你可以试试“*世界上最强大的开源Web开发IDE* ” ——http: [//www.aptana.com/](http://www.aptana.com/)，它还有一个PHP调试器和很多来自Eclipse世界的插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:17:24.843

**Aptana Studio 3** - 很容易成为我的第一选择。对 PHP 的出色 Intellisense 支持。非常可定制的颜色。此外，一个强大的支持社区。我将它用于我编程的所有语言。

看看这里： http: [//www.aptana.com/products/studio3/download](http://www.aptana.com/products/studio3/download)

# vb.net - 以横向模式打印 vb.net

> ID：13550067
> 
> 赞同：6
> 
> 时间：2012-11-25T10:15:26.510
> 
> 标签：vb.net

我设法打印了我的数据网格视图的内容，但它不适合纵向模式。我想以横向模式打印就可以了。

**我有这个代码用于我的数据集来填充 datagridview。**

```
Private Sub print_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    Dim query As String = "SELECT * FROM TBLusers"
    Dim DA As New SqlDataAdapter(query, CN)
    Dim DS As New DataSet
    CN.Open()

    DA.Fill(DS, "Users")
    CN.Close()
    DataGridView1.DataSource = DS.Tables("Users")
    'DataGridView1.DataMember = "Users"

End Sub 
```

**这是我猜的打印功能？我从教程中得到它。**

```
Private Sub printDocument1_PrintPage(ByVal sender As Object, ByVal e As System.Drawing.Printing.PrintPageEventArgs) Handles PrintDocument1.PrintPage

    Dim dataGridViewImage As New Bitmap(Me.DataGridView1.Width, Me.DataGridView1.Height)
    DataGridView1.DrawToBitmap(dataGridViewImage, New Rectangle(0, 0, Me.DataGridView1.Width, Me.DataGridView1.Height))
    e.Graphics.DrawImage(dataGridViewImage, 0, 0)
End Sub 
```

**这是打印预览。**

```
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click

    PrintPreviewDialog2.Document = PrintDocument1
    PrintPreviewDialog2.PrintPreviewControl.Zoom = 1
    PrintPreviewDialog2.ShowDialog()
End Sub 
```

**和印刷...**

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    PrintDocument1.Print()
End Sub 
```

**我试过
PrintDocument1.PrinterSettings.DefaultPageSettings.Landscape = True**

但它似乎不起作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T10:49:00.877

您正在设置`DefaultPage`打印机的设置。尝试为文档本身设置它：

```
PrintDocument1.DefaultPageSettings.Landscape = True
PrintDocument1.Print() 
```

# c# - 如何从系统服务中自动检测代理设置

> ID：13550069
> 
> 赞同：5
> 
> 时间：2012-11-25T10:15:32.560
> 
> 标签：c#, windows, service, proxy

我的程序由系统服务运行，它应该使用代理设置，他们为用户设置的问题。有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:02:28.427

利用

```
WebRequest.GetSystemWebProxy(); 
```

这是一个链接：[MSDN](http://msdn.microsoft.com/en-us/library/system.net.webrequest.getsystemwebproxy.aspx)

# regex - awk - 在正则表达式之后插入一个新行？

> ID：13550072
> 
> 赞同：1
> 
> 时间：2012-11-25T10:16:01.160
> 
> 标签：regex, awk

文件内容：（基于主题 -> [1](https://stackoverflow.com/questions/13547392/use-sed-or-awk-or-other-text-processor-to-find-replace-a-number-in-a-range)）

```
"Shimshon A",
"(blank)",
"November 24, 2012",
"13,481",
"jonathan t",
"Laguna Niguel, CA",
"November 24, 2012",
"13,480",
"scott b",
"Sussex, NJ",
"November 24, 2012",
"13,479", 
```

如何改进命令？：

```
gawk --posix 'ORS="";{sub(/,[0-9]{3}/, "&&\n"); print }' file 
```

结果：

```
$ gawk --posix 'ORS="";{sub(/,[0-9]{3}/, "&&\n"); print }' file
"Shimshon A","(blank)","November 24, 2012","13,481,481
","jonathan t","Laguna Niguel, CA","November 24, 2012","13,480,480
","scott b","Sussex, NJ","November 24, 2012","13,479,479
",userpc@userpc-desktop:~/Pulpit$ 
```

我想打印：

```
"Shimshon A","(blank)","November 24, 2012","13,481"
"jonathan t","Laguna Niguel, CA","November 24, 2012","13,480"
"scott b","Sussex, NJ","November 24, 2012","13,479" 
```

请仅在 awk 中解决。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:44:07.607

这一个班轮将工作，

```
awk -FS="" 'BEGIN{ORS=""} {print substr($1, 1, length($1)-1) ((c%4==3)? "\n": ",");c=c+1;}' file 
```

这是一个更详细的版本。

```
awk -FS="" 'BEGIN{
    ORS="";
    c=0
} {
    print substr($1, 1, length($1)-1) ((c%4==3)? "\n": ",");
    c=c+1;
}' < file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T11:11:30.307

我想这就是你要找的：

```
awk -v ORS="" '/"[0-9]{2},[0-9]{3}"/ { sub(/,$/,""); print $0 "\n"; next }1' file 
```

结果：

```
"Shimshon A","(blank)","November 24, 2012","13,481"
"jonathan t","Laguna Niguel, CA","November 24, 2012","13,480"
"scott b","Sussex, NJ","November 24, 2012","13,479" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T14:20:13.253

我知道你说的只是awk。如果你愿意拉伸：

```
paste -d "" - - - - < file | sed 's/,$//' 
```

# python - 如何从命令行在 Python 中显示图像并提示输入短字符串

> ID：13550073
> 
> 赞同：2
> 
> 时间：2012-11-25T10:16:02.003
> 
> 标签：python, image, ubuntu, graphics, user-input

*（我编辑了整个问题更清楚）*

* * *

你好，

我从未与 Python GUI 库发生过任何事情。我知道有很多并且有据可查，但由于我只需要一个片段，我不喜欢深入研究文档来寻找一种方法来做到这一点。如果我要编写一个 GUI 程序，我肯定会这样做，但这对于我的临时脚本来说只需要几行。

对我（GUI noob）来说，在一段代码之后用 Python 编写最简单和最直接的方法是什么？更少的线条=更多的幸福。

1.  按文件名抓取 JPEG 图片。
2.  显示它的缩略图。
3.  在缩略图下方显示一个文本字段，以便用户可以输入标题。
4.  等到用户按下他/她键盘上的*ENTER键。*在这种情况下，关闭并返回输入。
5.  ...或等到用户点击*DELETE*键。在这种情况下，关闭并返回有关决定的信息（删除图片）。

依赖项或仅 Linux 的解决方案都可以。我需要在 Xubuntu 机器上运行它。请问有什么代码片段吗？我相信对于 Python GUI 领域的熟练人员来说，这只是 5 分钟的事情。我需要研究大量的图书馆文档。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:06:34.510

下面是一个或多或少符合规范的最小 python 脚本。

它需要安装 python2 和 pyqt4 包，并且它不适用于 python3（尽管如果需要，它可以很容易地适应这样做）。

如果用户输入有效的标题并按下回车，脚本将返回状态码 0 并将标题打印到标准输出；否则，如果用户输入了无效的标题（仅限空白或空格），或者只是关闭对话框而不做任何事情，脚本将返回状态码 1 并且不打印任何内容。

*示例 bash 用法*：

```
$ CAPTION=$(python imgviewer.py image.jpg)
$ [ $? -eq 0 ] && echo $CAPTION 
```

*imgviewer.py*：

```
import sys, os
from PyQt4 import QtGui, QtCore

class Dialog(QtGui.QDialog):
    def __init__(self, path):
        QtGui.QDialog.__init__(self)
        self.viewer = QtGui.QLabel(self)
        self.viewer.setMinimumSize(QtCore.QSize(400, 400))
        self.viewer.setScaledContents(True)
        self.viewer.setPixmap(QtGui.QPixmap(path))
        self.editor = QtGui.QLineEdit(self)
        self.editor.returnPressed.connect(self.handleReturnPressed)
        layout = QtGui.QVBoxLayout(self)
        layout.addWidget(self.viewer)
        layout.addWidget(self.editor)

    def handleReturnPressed(self):
        if self.editor.text().simplified().isEmpty():
            self.reject()
        else:
            self.accept()

if __name__ == '__main__':

    app = QtGui.QApplication(sys.argv)
    args = app.arguments()[1:]
    if len(args) == 1:
        dialog = Dialog(args[0])
        if dialog.exec_() == QtGui.QDialog.Accepted:
            print dialog.editor.text().simplified().toLocal8Bit().data()
            sys.exit(0)
    else:
        print 'ERROR: wrong number of arguments'
    sys.exit(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:40:33.303

Python 有几个很好的 GUI 库。python 内置的“标准”库是`tkinter`：[http](http://wiki.python.org/moin/TkInter) ://wiki.python.org/moin/TkInter 。有人说这`wxPython`更加强大和直接：[http](http://www.wxpython.org/) ://www.wxpython.org/ 。

我认为您可以从 wxPython 开始，他们有很多教程和示例可供您深入研究（只需运行 DEMO）。

他们有一个名为“ImageBrowser”的示例，这可能是一个很好的起点。

关于不同应用程序之间的通信，可以使用“管道”和“重定向”进行通信。但是如果一切都是用python编写的，我认为这是错误的方法，您可以在python脚本中显示图像形式并在内部获取结果。

# python - 替换 MainWindow 中的 CentralWidget

> ID：13550076
> 
> 赞同：7
> 
> 时间：2012-11-25T10:16:23.453
> 
> 标签：python, user-interface, pyqt, pyside

我对 PySide 有点陌生。我有一个主窗口对象，一次显示一个小部件。我一直在尝试更改`QMainWindow`类的中心小部件，以便在按下按钮时替换窗口中的可见小部件。问题是按下的按钮在 Widget 类中，而不是在主窗口类中。

说...

```
class App(QtGui.QMainWindow):

    def __init__(self):
        super(App, self).__init__()

        self.initUI()

    def initUI(self):

        self.statusBar().showMessage('Listo.') #Status Bar
        self.login_screen = LoginScreen()
        self.logged_in_screen = LoggedInScreen()

        self.setCentralWidget(self.login_screen)

        self.setGeometry(300, 300, 450, 600) #Window Size
        self.setWindowTitle('PyTransactio - Client') #Window Title
        self.setWindowIcon(QtGui.QIcon('icon.png')) #App Icon
        self.show() 
```

按下的按钮在`login_screen`实例中。单击按钮时调用的方法在`LoginScreen`类内部：

```
def login(self):
        """ Send login data to the server in order to log in """

        #Process

        self.setParent(None) 
```

将父窗口小部件设置为从主窗口中`None`移除窗口小部件 ( `login_screen`)。当按下（在小部件内部）时，我应该怎么做才能让另一个小部件（例如`logged_in_screen`）作为主窗口的中央小部件？`loginButton``login_screen`

也许登录方法应该在主窗口类中？如果是这样，我如何将按下的按钮`login_screen`与主窗口的方法连接起来？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-25T12:30:48.220

您可以使用[`QStackedWidget`](http://doc.qt.io/archives/qt-4.8/qstackedwidget.html)作为中心小部件并向其添加登录屏幕和“登录”屏幕。

一个示例用法：

```
from PyQt4 import QtCore, QtGui

class MainWindow(QtGui.QMainWindow):
    def __init__(self, parent=None):
        super(MainWindow, self).__init__(parent)
        self.central_widget = QtGui.QStackedWidget()
        self.setCentralWidget(self.central_widget)
        login_widget = LoginWidget(self)
        login_widget.button.clicked.connect(self.login)
        self.central_widget.addWidget(login_widget)
    def login(self):
        logged_in_widget = LoggedWidget(self)
        self.central_widget.addWidget(logged_in_widget)
        self.central_widget.setCurrentWidget(logged_in_widget)

class LoginWidget(QtGui.QWidget):
    def __init__(self, parent=None):
        super(LoginWidget, self).__init__(parent)
        layout = QtGui.QHBoxLayout()
        self.button = QtGui.QPushButton('Login')
        layout.addWidget(self.button)
        self.setLayout(layout)
        # you might want to do self.button.click.connect(self.parent().login) here

class LoggedWidget(QtGui.QWidget):
    def __init__(self, parent=None):
        super(LoggedWidget, self).__init__(parent)
        layout = QtGui.QHBoxLayout()
        self.label = QtGui.QLabel('logged in!')
        layout.addWidget(self.label)
        self.setLayout(layout)

if __name__ == '__main__':
    app = QtGui.QApplication([])
    window = MainWindow()
    window.show()
    app.exec_() 
```

如果您不想使用此小部件，那么我认为您`QMainWindow.setCentralWidget`每次更改中央小部件时都必须调用。

至于`login`方法应该在哪里，这取决于。可能您可以为您的主窗口定义一个简单的界面来添加/删除/显示特定的中央小部件，并`login`从`LoginScreen`. 这样，`LoginScreen`类就不必知道实现细节，例如中央小部件是否实际上是 a`QStackedWidget`或者这件事是以其他方式完成的。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-30T19:53:50.430

您可以使用 QMainWindow.setCentralWidget 来执行此操作（重复）：

```
#! /usr/bin/env python3

from PySide import QtGui
from PySide import QtCore

import sys 

app = QtGui.QApplication(sys.argv)
mw = QtGui.QMainWindow()
w2 = QtGui.QWidget()
pb = QtGui.QPushButton('push me', w2) 

l1 = QtGui.QLabel('orig')
l2 = QtGui.QLabel('changed')
mw.setCentralWidget(l1)
pb.clicked.connect(lambda: mw.setCentralWidget(l2))
mw.show()
w2.show()
sys.exit(app.exec_()) 
```

# javascript - 当点击被激活时如何找到第 N 个元素

> ID：13550079
> 
> 赞同：4
> 
> 时间：2012-11-25T10:16:30.890
> 
> 标签：javascript, jquery, html

```
 <p>some text</p>
  <p>some text</p>
  <p>some text</p>
  <p>some text</p>
  <p>some text</p>
  <p>some text</p>
  <p>some text</p> 
```

有什么方法可以识别随机单击鼠标时的情况。

反正有没有通过鼠标获得选定的第 n 个元素？

编辑：当我们点击一​​个段落时，我正在使用 jquery

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T10:35:31.650

这会记录被点击段落的索引。

```
var $elems = $('p');
$elems.on('click', function(e) {
    var indexOfElem = $elems.index(this);
    console.log("Element with index: " + indexOfElem + " was clicked.");
}); 
```

像这样的东西？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T10:35:59.463

jQuery 中的 jQuery`index`函数返回元素在 jQuery 对象中的位置。要在某个列表中查找被点击元素的位置：

```
var $elems = $("#context > p");
$elems.on("click", function() {
  var i = $elems.index(this);
  console.log(i); // use the index
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T10:38:22.127

试试这个 ：

```
 $('p').click(function () {

    alert($('p').index(this));
    }); 
```

# android - RecordVideo：java.lang.RuntimeException：启动失败

> ID：13550084
> 
> 赞同：0
> 
> 时间：2012-11-25T10:17:10.563
> 
> 标签：android, video-recording

我在使用 android 4.1.2 在 nexus 上录制视频时遇到问题。

```
 private static final String OUTPUT_FILE="/storage/sdcard0/uatestvideo1.mp4"; 
```

安卓清单：

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.CAMERA"/>
<uses-permission android:name="android.permission.RECORD_AUDIO"/>
<uses-permission android:name="android.permission.RECORD_VIDEO"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.STORAGE" />
<uses-feature android:name="android.hardware.camra"/> 
```

onCreate：在 oncreate 我有：...

```
final SurfaceHolder holder =    videoView.getHolder();
holder.addCallback(this);
holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS); 
```

...

```
private void beginRecording(SurfaceHolder holder) throws Exception{

        if(recorder!=null){
            recorder.stop();
            recorder.release();
            recorder=null;
        }
        File outFile = new File(OUTPUT_FILE);
        if(outFile.exists()){
            outFile.delete();
        }

        try{
            recorder = new MediaRecorder();
            recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
            recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
            recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
            recorder.setVideoSize(320, 240);
            recorder.setVideoFrameRate(15);
            recorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
            recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
            recorder.setMaxDuration(200000);
            recorder.setPreviewDisplay(holder.getSurface());
            recorder.setOutputFile(OUTPUT_FILE);
            recorder.prepare();
                recorder.start();
        }catch(Exception e){
            Log.e(TAG, e.toString());
            e.printStackTrace();
        }

    }

} 
```

错误：

```
11-25 10:46:07.723: E/MediaRecorder(15354): start failed: -19
11-25 10:46:07.727: E/RecordVideo(15354): java.lang.RuntimeException: start failed.
11-25 10:46:07.727: D/Blad w rekorder(15354): java.lang.RuntimeException: start failed.
11-25 10:46:07.727: W/System.err(15354): java.lang.RuntimeException: start failed.
11-25 10:46:07.727: W/System.err(15354):    at android.media.MediaRecorder.start(Native Method)
11-25 10:46:07.727: W/System.err(15354):    at com.plym.andr.UsVideoRecorder.beginRecording(UsVideoRecorder.java:198)
11-25 10:46:07.727: W/System.err(15354):    at com.plym.andr.UsVideoRecorder.access$2(UsVideoRecorder.java:168)
11-25 10:46:07.727: W/System.err(15354):    at com.plym.andr.UsVideoRecorder$1.onClick(UsVideoRecorder.java:76)
11-25 10:46:07.727: W/System.err(15354):    at android.view.View.performClick(View.java:4084)
11-25 10:46:07.727: W/System.err(15354):    at android.view.View$PerformClick.run(View.java:16966)
11-25 10:46:07.731: W/System.err(15354):    at android.os.Handler.handleCallback(Handler.java:615)
11-25 10:46:07.731: W/System.err(15354):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-25 10:46:07.731: W/System.err(15354):    at android.os.Looper.loop(Looper.java:137)
11-25 10:46:07.731: W/System.err(15354):    at android.app.ActivityThread.main(ActivityThread.java:4745)
11-25 10:46:07.731: W/System.err(15354):    at java.lang.reflect.Method.invokeNative(Native Method)
11-25 10:46:07.731: W/System.err(15354):    at java.lang.reflect.Method.invoke(Method.java:511)
11-25 10:46:07.731: W/System.err(15354):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-25 10:46:07.731: W/System.err(15354):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-25 10:46:07.731: W/System.err(15354):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T10:33:43.637

`-19`是 的错误`NO_INIT`。这意味着您`recorder`的初始化不正确。

检查[此链接](https://stackoverflow.com/q/10496969/1782481)以获取类似问题。

# c++ - 如何设置多个单选按钮组以实现正确的选项卡顺序和键盘交互（WIN32）？

> ID：13550087
> 
> 赞同：8
> 
> 时间：2012-11-25T10:17:25.730
> 
> 标签：c++, winapi, window, radio-button, win32gui

首先这不是MFC。
这是我一直在处理的 GUI 的裁剪版本：

![在此处输入图像描述](../Images/9bc23977ae18afb01190ba721a12d983.png)

如您所见，我已经（尝试）使用以下代码创建了两个不同的组，图标和按钮：

```
 index->hAddT.hwndIndex[2] = CreateWindowEx(NULL,L"BUTTON",L"Icon",WS_CHILD | WS_VISIBLE | BS_GROUPBOX,
    200,135,120,170,WINDOWHANDLE,(HMENU)IDC_RADIOGROUP,(HINSTANCE)GetWindowLong(WINDOWHANDLE,GWL_HINSTANCE),NULL); 
```

我遇到的问题以及您可能看到的问题是该窗口只有一个单选按钮。这意味着用户不可能从 Icon 组中选择一个单选按钮，从 Button 组中选择一个。我已将每个单选按钮初始化为：

```
 index->hAddT.hwndIndex[3] = CreateWindowEx(NULL,L"BUTTON",L"Information",WS_CHILD | BS_AUTORADIOBUTTON | WS_VISIBLE,
    205,155,100,20,WINDOWHANDLE,(HMENU)IDC_RADIO1,(HINSTANCE)GetWindowLong(WINDOWHANDLE,GWL_HINSTANCE),NULL); 
```

如果有意义的话，我想以某种方式将“图标”单选按钮组与“按钮”单选按钮组分开，因此每个组都可以使用一个单选按钮。这怎么可能，是否需要我创建一个新窗口和一个新的回调程序只是为了有一个额外的单选按钮。必须有另一种方法来对子项进行分组。

[2 组独立的单选按钮组，形式相同 WINAPI（无 MFC）](https://stackoverflow.com/questions/10716640/c-2-separate-groups-of-radio-buttons-in-the-same-form-winapi-no-mfc) 该链接对我的目的没有任何用处。

我有我旁边的 Charles Petzold 编写的 Programming For Windows Fifth Edition 作为参考，他在 Group Boxes 部分中指出“Group box 通常用于包围其他按钮控件”，但没有这方面的真实示例。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-25T10:33:31.167

与流行的观点相反，您不需要 groupbox 控件或任何其他此类外部“容器”（groupbox 无论如何都不是，它只是一个按钮工件）。下面描述了如何在不需要组框的情况下执行此**操作**。如果您想要一个在功能上帮助此处描述的布局的组框，请转发到此答案的**编辑** 部分，我将在其中解释如何实现 OP 的特定需求。

自动单选按钮“banks”通过使用两个关键窗口样式属性**WS_GROUP**和**WS_TABSTOP 工作**。为您的两个“银行”执行以下操作，我将它们亲切地称为 Bank1 和 Bank2：

1.  银行 1：第一个单选按钮应该*同时*具有WS_GROUP | 控件样式中的 WS_TABSTOP。其余的单选按钮不应该有**这些**，并且必须按兄弟顺序（这意味着在 DIALOG 脚本中它们立即相互跟随；在动态创建中它们是按顺序创建的）。

2.  *Bank1 中最后一个单选按钮之后*的第一个子控件应该至少具有 WS_GROUP 样式，并且 WS_GROUP | WS_TABSTOP 如果它是制表符停止的控件。

3.  银行 2：第一个单选按钮应该*同时*具有WS_GROUP | 控件样式中的 WS_TABSTOP。其余的单选按钮不应该有**这些**，并且必须按兄弟顺序（这意味着在 DIALOG 脚本中它们立即相互跟随；在动态创建中它们是按顺序创建的）。

4.  *Bank2 中最后一个单选按钮之后*的第一个子控件应该至少具有 WS_GROUP 样式，并且 WS_GROUP | WS_TABSTOP 如果它是制表符停止的控件。

像上面这样的布局允许您“选项卡”到单选按钮库，并使用箭头键切换选择。然后，您再次“制表”以离开该银行并前往下一个制表位。请记住，当您点击 Tab（或之前使用 Shift-Tab）时，对话框管理器将始终移动到下一个 WS_TABTOP 子控件。如果要跳转到的控件是自动类型，则选定的控件将是最近 WS_GROUP 中的“选定”控件。

如果有帮助，请拿一个草稿本，在纸上画出来，然后在制表位上贴上“T”，在组属性上贴上“G”，如上所述。一旦可视化，它可能会更清晰。查看对话资源脚本以了解它们如何协同工作以获得更多洞察力。

注意：如果您想使用围绕这些的分组框，您可以。对话框管理器通过将控件关联到基于使用 WS_GROUP 标记的最后一个控件的组来工作，并且此后具有 WS_TABSTOP 的第一个控件被认为是该组的制表符跳转点。首先插入一个 Groupbox（不能是制表符），然后在第一个单选按钮上插入带有 WS_TABSTOP 的单选按钮控件（这次没有 WS_GROUP），也可以。我通常发现只安排我的单选按钮而不依赖于组框更容易。

**编辑**一张图说一千个字

对于您的图片，我可能会按以下顺序创建以下子项：

1.  “图标”组框，包括 WS_GROUP 样式。
2.  “信息”自动单选按钮，包括 WS_TABSTOP
3.  所有其他“图标”组单选按钮。不要包括 WS_TABSTOP 或 WS_GROUP。
4.  “按钮”组框，包括 WS_GROUP 样式。这将关闭当前控制组并开始下一个控制组。
5.  “AbortretryIgnore”自动单选按钮，包括 WS_TABSTOP
6.  所有其他“按钮”组单选按钮。不要包括 WS_TABSTOP 或 WS_GROUP。
7.  “Button”单选按钮之后的下一个控件必须包含 WS_GROUP。这将关闭当前控制组并开始下一个控制组。

显然，所有其他子控件样式、可见性等也需要正确使用，当然，子控件都应该具有唯一的 ID。我假设您已经涵盖了其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-15T11:13:10.433

请注意，这也适用于一组复选框，这是一个有效的用例。

请注意，如果第一个单选按钮可能被禁用（例如，通过运行时条件），您必须使第一个启用的单选按钮具有 WS_TABSTOP 样式。这是一些确保这一点的代码行：

```
 // Set WS_TABSTOP to the group's first enabled item
    for (HWND hwnd = GetDlgItem(IDC_FIRSTITEM) /*the first*/; hwnd != NULL && !::IsWindowEnabled(hwnd); hwnd = ::GetWindow(hwnd, GW_HWNDNEXT))
    {
        if ((GetWindowLong(hwnd, GWL_STYLE) & WS_GROUP) != 0)
            hwnd = NULL;
    }
    if (hwnd != NULL)
        ModifyStyle(hwnd, 0, WS_TABSTOP, 0); 
```

# properties - UICollectionViewWaterfallLayout - 如何设置属性和委托

> ID：13550088
> 
> 赞同：1
> 
> 时间：2012-11-25T10:17:42.367
> 
> 标签：properties, delegates, ios6, uicollectionview

在最新一期的 iO​​S Dev Weekly 中，有一篇关于 UICollectionWaterfallLayout 的有趣文章：[https](https://github.com/chiahsien/UICollectionViewWaterfallLayout) ://github.com/chiahsien/UICollectionViewWaterfallLayout 如您所见，要运行示例应用程序需要执行 2 个步骤。但是，因为我是 Objective-C 和 iOS 开发的新手，所以我陷入了这些步骤。

尤其是：

第 1 步：设置这 3 个属性和 1 个委托是什么意思？我知道什么是属性和委托，但同样我不知道该怎么做。

第 2 步：如何在我的委托中实现该方法？

很抱歉有明显的问题。我正在研究 Big Nerd Ranch 的书，但我仍然在使用这个平台时遇到了麻烦。

提前谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T03:04:33.373

这只是一个“布局”，也就是说你还需要自己提供一个viewController和一个collectionView，然后把这3个东西包起来！

这是一个示例：在您的 WaterfallViewController.h

```
#import "UICollectionViewWaterfallLayout.h"
@interface WaterfallViewController : UIViewController <UICollectionViewDataSource, UICollectionViewDelegate, UICollecitonViewDelegateWaterfallLayout>
@property (nonatomic, strong) UICollectionView *collectionView;
@end 
```

在你的 WaterfallViewController.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UICollectionViewWaterfallLayout *layout = [[UICollectionViewWaterfallLayout alloc] init];
    layout.delegate = self;
    layout.columnCount = 2;
    layout.itemWidth = 146;
    layout.sectionInset = UIEdgeInsetsMake(9, 9, 9, 9);

    _collectionView = [[UICollectionView alloc] initWithFrame:self.view.bounds collectionViewLayout:layout];
    _collectionView.dataSource = self;
    _collectionView.delegate = self;
    _collectionView.showsVerticalScrollIndicator = NO;
    _collectionView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
    [_collectionView registerClass:[MyCell class] forCellWithReuseIdentifier:@"MyCell"];

    [self.view addSubview:self.collectionView];
}

#pragma mark - UICollecitonViewDelegateWaterfallLayout Delegate
- (CGFloat)collectionView:(UICollectionView *)collectionView
                   layout:(UICollectionViewWaterfallLayout *)collectionViewLayout
 heightForItemAtIndexPath:(NSIndexPath *)indexPath
{
    // return the height for cell at indexPath.
} 
```

很抱歉给您带来不便，我会尽快在 repo 中添加一些示例代码。

# android - Android Google Maps API 密钥及其统计信息未出现

> ID：13550090
> 
> 赞同：0
> 
> 时间：2012-11-25T10:17:54.117
> 
> 标签：android, google-maps

我通过[此页面使用](https://developers.google.com/android/maps-api-signup)[Google 的手册](https://developers.google.com/maps/documentation/android/mapkey)为 android 应用程序生成了 Maps API 密钥。地图正在运行，但在谷歌控制台中没有统计信息。你现在为什么以及如何解决它？

![在此处输入图像描述](../Images/7c834c20a124098c4e0b25dafb16d9c6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:20:14.227

已解决：事实证明，在 Andorid 上显示地图没有限制。

# javascript - casper.js 中的 setInterval 和 this.wait

> ID：13550093
> 
> 赞同：5
> 
> 时间：2012-11-25T10:18:55.663
> 
> 标签：javascript, webkit, qtwebkit, phantomjs, casperjs

我需要**在每次迭代之间循环 3 次和 2 秒**。我尝试了这 3 个选项：

**选项1**

```
var casper = require('casper').create({
    verbose: false,
    logLevel: 'debug'
});

casper.start("http://google.com");

casper.on('remote.message', function(msg) {
    this.echo('remote message caught: ' + msg);
})

casper.thenEvaluate(function() {
    var x = 0;
    var intervalID = setInterval(function () {

       console.log("Using setInternal " + x);

       if (++x === 3) {
           window.clearInterval(intervalID);
       }
    }, 2000);

});

casper.run(); 
```

*观察*：什么都没有出现，因为脚本在第一次`setInterval`被调用之前就结束了。

**选项 2**

替换`thenEvaluate()`为`then()`以下

```
for (i=0; i<3; i++) {
    this.wait(2000);
    this.echo('Using this.wait ' + i);
} 
```

*观察*：它立即输出 3 次，然后等待很长时间，因为`this.wait()`它是异步的。这不是我想要的，因为我想要两者之间的延迟。

**选项 3**用下面的这个 替换零件`then()`。我正在考虑`waitFunc()`在每次`wait()`被调用后进行递归调用。

```
var count = 0;
var waitFunc = function() {
    this.wait(2000, function() {
        if (count < 3) {
            casper.echo('Using this.wait ' + count);
            count++;
            waitFunc();
        }
    });

}; 
```

*观察*：屏幕上没有打印出来。

所以我的问题是：**如何使 this.wait 或 setInterval 像这种情况一样循环工作 3 次？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-26T09:58:02.923

这是解决您的问题的示例实现：

```
var casper = require('casper').create();
var last, list = [0, 1, 2, 3];

casper.start("http://google.fr/", function() {
    this.echo('google');
});

casper.on('remote.message', function(msg) {
    this.echo('remote message caught: ' + msg);
});

casper.thenEvaluate(function() {
    window.x = 0;
    var intervalID = setInterval(function() {
       console.log("Using setInternal " + window.x);
       if (++window.x === 3) {
           window.clearInterval(intervalID);
       }
    }, 500);
});

casper.each(list, function(self, i) {
    self.wait(500, function() {
        last = i;
        this.echo('Using this.wait ' + i);
    });
});

casper.waitFor(function() {
    return last === list[list.length - 1] && 3 === this.getGlobal('x');
}, function() {
    this.echo('All done.').exit();
});

casper.run(function() {}); 
```

样本输出：

```
$ casperjs test.js
google
remote message caught: Using setInternal 0
Using this.wait 0
remote message caught: Using setInternal 1
Using this.wait 1
remote message caught: Using setInternal 2
Using this.wait 2
Using this.wait 3
All done.
$ 
```

# css - CSS3线性渐变不起作用

> ID：13550098
> 
> 赞同：1
> 
> 时间：2012-11-25T10:19:50.897
> 
> 标签：css, linear-gradients

我观看了[这个](http://codepen.io/joshnh/pen/JCGoF)CodePen 演示，其中 CSS3`linear-gradient`用于制作颜色效果，我`linear-gradient`在 jsFiddle 尝试了相同的属性，但这个 CSS3 属性在其中不起作用。

这是[CodePen 代码](http://codepen.io/joshnh/pen/JCGoF)，这是我的[jsFiddle 代码](http://jsfiddle.net/ShzsV/)。

谁能向我解释这背后的问题是什么，或者是否有任何 jsFiddle 错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T10:26:30.963

当您`linear-gradient`使用 CodePen 编写代码时，它会**自动在代码中添加网站前缀**（*请参见截图：Firebug 中的 CodePen 代码*）。因此，您需要的前缀：

*   `-webkit`适用于 Safari、Chrome、Android 浏览器和移动 Safari
*   `-moz`火狐浏览器
*   `-o`歌剧
*   `-ms`适用于 IE 10+

见代码：**[现场演示](http://jsfiddle.net/vule/NURGn/)**

![Firebug 中的 Codepen 示例代码](../Images/92d9254ab76c130982a3eddee15afbb1.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T10:34:47.570

我建议你使用 colorzilla 渐变生成器来创建渐变。

[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

您可以获得适合所有浏览器的代码，只需复制粘贴为您的元素 css 生成的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T10:34:53.053

查看 Inspector 将帮助您快速轻松地解决此类问题。似乎 CodePen 有某种自动供应商前缀，因为应用于元素的实际样式如下所示： ![webkit 前缀](../Images/83d3991e0a56a64600b1f747d1fcd6e7.png)

在 jsFiddle 站点上执行相同操作表明没有应用前缀，因此整个属性不起作用（由警告标志和删除线指示）：

![没有前缀](../Images/0be1389d28d41d949e7124011e649fd3.png)

需要前缀： `-webkit`对于 Safari、Chrome、Android `-moz`对于 Firefox `-o`对于 Opera `-ms`对于 IE

有关浏览器兼容性，请参阅[caniuse](http://caniuse.com/#feat=css-gradients)

处理这些前缀可能是一个巨大的痛苦，所以你应该看看像[less](http://lesscss.org/)或 js 库这样的预处理器来完成这项工作：[prefixfree](http://leaverou.github.com/prefixfree/)

# java - Glu.unproject 总是归零

> ID：13550099
> 
> 赞同：0
> 
> 时间：2012-11-25T10:19:52.440
> 
> 标签：java, opengl, jogl, glu

我正在使用 Jogl2（更准确地说是 2.0-b58-20120620）和 Java7（第 9 版）。我想做一些挑选：我有一个带有 3 个彩色立方体的框架（透视投影）。

所以我试图从鼠标点击位置构建一条射线：但是当我调用 gluUnproject 时，我总是得到点（O，O，O）。

不幸的是，[这个已经存在的帖子](https://stackoverflow.com/questions/7262109/gluunproject-always-returns-zero)对我没有帮助。而[这个](https://stackoverflow.com/questions/1732117/jogl-glu-gluunproject-always-returning-0-0)似乎不适合我的情况。

这是我的 AppLauncher.java

```
package com.gmail.bernabe.laurent.java_opengl.picking_test;

import com.gmail.bernabe.laurent.java_opengl.picking_test.views.MainFrame;

public class AppLauncher {

    public static void main(String[] args) {
        new MainFrame().setVisible(true);
    }

} 
```

MainFrame.java

```
package com.gmail.bernabe.laurent.java_opengl.picking_test.views;

import java.awt.Dimension;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

import javax.media.opengl.awt.GLCanvas;
import javax.swing.JFrame;

import com.jogamp.opengl.util.FPSAnimator;

public class MainFrame extends JFrame {

    public MainFrame(){
        setTitle("A jogl picking test");
        setSize(new Dimension(640, 510));
        setLocationRelativeTo(null);

        GLCanvas glCanvas = new GLCanvas();
        add(glCanvas);
        TheGLEventListener glListener = new TheGLEventListener();
        glCanvas.addGLEventListener(glListener);
        glCanvas.addMouseListener(glListener);

        final FPSAnimator animator = new FPSAnimator(glCanvas, 120);
        addWindowListener(new WindowAdapter() {

            @Override
            public void windowClosing(WindowEvent e) {
                animator.stop();
                System.exit(0);
            }

        });
        animator.start();
    }

    private static final long serialVersionUID = 4972092015545764168L;

} 
```

TheGLEventListener.java

```
package com.gmail.bernabe.laurent.java_opengl.picking_test.views;

import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

import javax.media.opengl.GL2;
import javax.media.opengl.GLAutoDrawable;
import javax.media.opengl.GLEventListener;
import javax.media.opengl.glu.GLU;
import javax.media.opengl.glu.gl2.GLUgl2;

import com.gmail.bernabe.laurent.java_opengl.picking_test.logic.GLLittleCube;
import com.gmail.bernabe.laurent.java_opengl.picking_test.logic.Ray;

public class TheGLEventListener implements GLEventListener,MouseListener {

    @Override
    public void init(GLAutoDrawable drawable) {
        GL2 gl = drawable.getGL().getGL2();
        gl.glEnable(GL2.GL_DEPTH_TEST);
        gl.glClearColor(0.67f, 0.16f, 0.51f, 0.0f);
    }

    @Override
    public void dispose(GLAutoDrawable drawable) {
        // TODO Auto-generated method stub

    }

    @Override
    public void display(GLAutoDrawable drawable) {
        GL2 gl = drawable.getGL().getGL2();

        gl.glClear(GL2.GL_COLOR_BUFFER_BIT | GL2.GL_DEPTH_BUFFER_BIT);
        gl.glLoadIdentity();

        if (pendingEvent != null){
            if (pendingEvent.getId() == MouseEvent.MOUSE_CLICKED) {
                    Ray.fromMouseCoords(pendingEvent.getX(), pendingEvent.getY(), gl);
            pendingEvent = null;
                }
        }

        glu.gluLookAt(
                0.0f, 0.0f, 9.0f,
                0.0f, 0.0f, 0.0f,
                0.0f, 1.0f, 0.0f
        );

        drawScene(gl);
    }

    private void drawScene(GL2 gl) {
        gl.glPushMatrix();
        gl.glTranslatef(-3.0f, +1.0f, +2.0f);
        GLLittleCube.draw(gl);
        gl.glPopMatrix();

        gl.glPushMatrix();
        gl.glTranslatef(-2.0f, +3.0f, -4.0f);
        GLLittleCube.draw(gl);
        gl.glPopMatrix();

        gl.glPushMatrix();
        gl.glTranslatef(+1.0f, -2.0f, +3.0f);
        GLLittleCube.draw(gl);
        gl.glPopMatrix();
    }

    @Override
    public void reshape(GLAutoDrawable drawable, int x, int y, int width,
            int height) {
        GL2 gl = drawable.getGL().getGL2();
        gl.glViewport(0, 0, width, height);

        gl.glMatrixMode(GL2.GL_PROJECTION);
        gl.glLoadIdentity();
        glu.gluPerspective(60.0, width * 1.0f / height, 0.1, 20);
        gl.glMatrixMode(GL2.GL_MODELVIEW);
    }

    private GLU glu = new GLUgl2();

    @Override
    public void mouseClicked(MouseEvent e) {
        pendingEvent = e;
    }

    @Override
    public void mousePressed(MouseEvent e) {
        // Not used
    }

    @Override
    public void mouseReleased(MouseEvent e) {
        // Not used
    }

    @Override
    public void mouseEntered(MouseEvent e) {
        // Not used
    }

    @Override
    public void mouseExited(MouseEvent e) {
        // Not used
    }

    private MouseEvent pendingEvent;

} 
```

GLLittleCube.java

```
package com.gmail.bernabe.laurent.java_opengl.picking_test.logic;

import javax.media.opengl.GL2;

public class GLLittleCube {

    public static void draw(GL2 gl){
        gl.glBegin(GL2.GL_QUADS);

          //FRONT face (BLUE)
          gl.glColor3f(0.0f, 0.13f, 0.66f); 
          gl.glVertex3f(-1.0f, -1.0f, +1.0f);
          gl.glVertex3f(+1.0f, -1.0f, +1.0f);
          gl.glVertex3f(+1.0f, +1.0f, +1.0f);
          gl.glVertex3f(-1.0f, +1.0f, +1.0f);

          //BACK face (GREEN)
          gl.glColor3f(0.07f, 0.43f, 0.0f);
          gl.glVertex3f(-1.0f, -1.0f, -1.0f);
          gl.glVertex3f(+1.0f, -1.0f, -1.0f);
          gl.glVertex3f(+1.0f, +1.0f, -1.0f);
          gl.glVertex3f(-1.0f, +1.0f, -1.0f);

          //LEFT face (RED)
          gl.glColor3f(0.7f, 0.0f, 0.0f);
          gl.glVertex3f(-1.0f, -1.0f, -1.0f);
          gl.glVertex3f(-1.0f, +1.0f, -1.0f);
          gl.glVertex3f(-1.0f, +1.0f, +1.0f);
          gl.glVertex3f(-1.0f, -1.0f, +1.0f);

          //RIGHT face (ORANGE)
          gl.glColor3f(1.0f, 0.45f, 0.05f);
          gl.glVertex3f(+1.0f, -1.0f, -1.0f);
          gl.glVertex3f(+1.0f, +1.0f, -1.0f);
          gl.glVertex3f(+1.0f, +1.0f, +1.0f);
          gl.glVertex3f(+1.0f, -1.0f, +1.0f);

          //TOP face (WHITE)
          gl.glColor3f(0.97f, 0.90f, 0.95f);
          gl.glVertex3f(-1.0f, +1.0f, -1.0f);
          gl.glVertex3f(+1.0f, +1.0f, -1.0f);
          gl.glVertex3f(+1.0f, +1.0f, +1.0f);
          gl.glVertex3f(-1.0f, +1.0f, +1.0f);

          //BOTTOM face (YELLOW)
          gl.glColor3f(0.93f, 0.87f, 0.07f);
          gl.glVertex3f(-1.0f, -1.0f, -1.0f);
          gl.glVertex3f(+1.0f, -1.0f, -1.0f);
          gl.glVertex3f(+1.0f, -1.0f, +1.0f);
          gl.glVertex3f(-1.0f, -1.0f, +1.0f);

          gl.glEnd();
    }

} 
```

Ray.java

```
package com.gmail.bernabe.laurent.java_opengl.picking_test.logic;

import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;
import java.nio.IntBuffer;

import javax.media.opengl.GL2;
import javax.media.opengl.glu.GLU;
import javax.media.opengl.glu.gl2.GLUgl2;

public class Ray {
    private Vector3f origin, direction;

    public Ray(Vector3f origin, Vector3f direction) {
        this.origin = origin;
        this.direction = direction;
    }

    public Vector3f getOrigin() {
        return origin;
    }

    public Vector3f getDirection() {
        return direction;
    }

    public static Ray fromMouseCoords(int mouseX, int mouseY, GL2 gl){
        IntBuffer viewport;
        FloatBuffer modelViewMatrix;
        FloatBuffer projectionMatrix;
        FloatBuffer objectPos;
        FloatBuffer winZ;

        ByteBuffer tempViewport = ByteBuffer.allocateDirect(4*4);
        tempViewport.order(ByteOrder.nativeOrder());
        viewport = tempViewport.asIntBuffer();

        ByteBuffer tempModelView = ByteBuffer.allocateDirect(16*4);
        tempModelView.order(ByteOrder.nativeOrder());
        modelViewMatrix = tempModelView.asFloatBuffer();

        ByteBuffer tempProjection = ByteBuffer.allocateDirect(16*4);
        tempProjection.order(ByteOrder.nativeOrder());
        projectionMatrix = tempProjection.asFloatBuffer();

        ByteBuffer tempObjectPos = ByteBuffer.allocateDirect(3*4);
        tempObjectPos.order(ByteOrder.nativeOrder());
        objectPos = tempObjectPos.asFloatBuffer();

        ByteBuffer tempWinZ = ByteBuffer.allocateDirect(1*4);
        tempWinZ.order(ByteOrder.nativeOrder());
        winZ = tempWinZ.asFloatBuffer();

        gl.glGetIntegerv(GL2.GL_VIEWPORT, viewport);
        gl.glGetFloatv(GL2.GL_MODELVIEW, modelViewMatrix);
        gl.glGetFloatv(GL2.GL_PROJECTION, projectionMatrix);

        float winY = viewport.get(3) * 1.0f - mouseY;
        float winX = mouseX * 1.0f;
        gl.glReadPixels(mouseX, mouseY, 1, 1, GL2.GL_DEPTH_COMPONENT, GL2.GL_FLOAT, winZ);

        glu.gluUnProject(winX, winY, 0.0f, modelViewMatrix, projectionMatrix, viewport, objectPos);
        Vector3f tempOrigin = new Vector3f(objectPos.get(0), objectPos.get(1), objectPos.get(2));

        glu.gluUnProject(winX, winY, winZ.get(0), modelViewMatrix, projectionMatrix, viewport, objectPos);
        Vector3f tempDest = new Vector3f(objectPos.get(0), objectPos.get(1), objectPos.get(2));

        Vector3f tempDirection = tempDest.clone().sub(tempOrigin).normalize();

            /////////////////////////////////
        System.err.println("origin : "+tempOrigin);
        System.err.println("dest : "+tempDest);
        System.err.println("direction : "+tempDirection);
        System.err.println();
        /////////////////////////////

        return new Ray(tempOrigin, tempDirection);
    }

    private static GLU glu = new GLUgl2();
} 
```

最后，Vector3f.java

```
package com.gmail.bernabe.laurent.java_opengl.picking_test.logic;

public class Vector3f {

    private float x, y, z;

    public Vector3f(float x, float y, float z){
        this.x = x;
        this.y = y;
        this.z = z;
    }

    public Vector3f(){
        this(0.0f, 0.0f, 0.0f);
    }

    public float getX() {
        return x;
    }

    public float getY() {
        return y;
    }

    public float getZ() {
        return z;
    }

    public Vector3f clone(){
        return new Vector3f(x, y, z);
    }

    /**
     * With side effect !!!
     * @param other
     * @return
     */
    public Vector3f add(Vector3f other){
        x += other.x;
        y += other.y;
        z += other.z;
        return this;
    }

    /**
     * With side effect !!!
     * @param other
     * @return
     */
    public Vector3f sub(Vector3f other){
        x -= other.x;
        y -= other.y;
        z -= other.z;
        return this;
    }

    public double length(){
        return Math.sqrt(x*x + y*y + z*z);
    }

    /**
     * With side effect !!!
     * @return
     */
    public Vector3f normalize(){
        double norm = length();
        if (norm > 1e-12f){
            x /= norm;
            y /= norm;
            z /= norm;
        }
        return this;
    }

    public double dot(Vector3f other){
        return x*other.x + y*other.y + z*other.z;
    }

    /**
     * Without any side effect !!!
     * @param other
     * @return
     */
    public Vector3f cross(Vector3f other){
        float tempX, tempY, tempZ;
        tempX = y*other.z - z*other.y;
        tempY = z*other.x - x*other.z;
        tempZ = x*other.y - y*other.x;

        return new Vector3f(tempX, tempY, tempZ);
    }

    public String toString(){
        return String.format("Vector3f(x=%f, y=%f, z=%f)", x,y,z);
    }

} 
```

那么，怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T17:17:28.510

我发现了我的错误！

我必须打电话

```
gl.glGetFloatv(GL2.GL_MODELVIEW_MATRIX, modelview) 
```

代替

```
gl.glGetFloatv(GL2.GL_MODELVIEW, modelview) 
```

（我忘记了 MATRIX 后缀）。

GL_PROJECTION_MATRIX 也是如此。

# objective-c - iTunes 搜索 API，查找免费价格

> ID：13550102
> 
> 赞同：0
> 
> 时间：2012-11-25T10:20:07.860
> 
> 标签：objective-c, ios

在搜索 iTunes 商店时，我遇到了一个小问题。我试图在价格为 0.00 时将标签的文本更改为“免费”，而不是显示价格。问题是，我对这两个`NSDecimalNumber`s 的比较失败了。这是我目前所在的位置。

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setNumberStyle:NSNumberFormatterCurrencyStyle];
[formatter setCurrencyCode:self.searchResult.currency];
NSString *price = [formatter stringFromNumber:self.searchResult.price];

NSDecimalNumber *free = [[NSDecimalNumber alloc] initWithFloat:0.00f];

NSLog(@"Price:%@",price);
NSLog(@"Free:%@",free);
NSLog(@"self.searchResult.price: %@", self.searchResult.price);

if (self.searchResult.price == free) {
    NSString *freeText = [NSString stringWithFormat:@"FREE"];
    self.priceLabel.text = freeText;
}
else {
    self.priceLabel.text = price;
}
NSLog(@"priceLabel:%@", self.priceLabel.text); 
```

真正奇怪的是，控制台甚至说两者`free`都是`del.searchResult.price`相同的：

```
2012-11-24 20:01:16.178 StoreSearch[1987:c07] Price:$0.00
2012-11-24 20:01:16.178 StoreSearch[1987:c07] Free:0
2012-11-24 20:01:16.178 StoreSearch[1987:c07] self.searchResult.price: 0
2012-11-24 20:01:16.179 StoreSearch[1987:c07] priceLabel:$0.00 
```

坦率地说，我对此有点困惑。任何帮助，将不胜感激。如果您能解释为什么会发生这种情况，以便我学会不再这样做，那么我将更加感激！

问候，
迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:35:34.507

你有 NSNumber 和另一个 NSNumber (NSDecimalNumber) 并且你做一个指针相等检查你需要调用 isEqual 或比较原始浮点值

== 与对象不比较值，而是对象指针（内存地址）

* * *

```
if(searchResult.price.floatValue == free.floatValue) 
```

*请注意，浮点数不精确，通常不应用于任何计算或比较。不过在这种情况下没关系*

# java - 为什么java允许run()在限制Handled的时候抛出Unhanlded Exception？

> ID：13550107
> 
> 赞同：0
> 
> 时间：2012-11-25T10:20:47.293
> 
> 标签：java, multithreading, exception-handling

据说运行不会抛出处理异常。JVM 只是忽略它们。所以我抛出了 UnHandled Exception (ArithmeticException)。但同样的事情也发生了。我知道尝试从标记为 XXX 的 catch 子句启动的线程中捕获异常是荒谬的。因为执行可能已经通过了那条线。

但我想知道为什么 java 允许 run 在限制 Handled 异常的同时抛出 Unhanlded Exception 以及 run() 抛出 Unhandled Exception 时还会发生什么？

**父线程**

```
public class Parent {

    public static void main(String[] args) {

        Child   child   = new Child();
        Thread chThread = new Thread(child);

        try {
            chThread.start();

        } catch (Exception e) { // XXX mark
            System.err.println("XXX");
            e.printStackTrace();
        }

    } 
```

**子线程**

```
public class Child implements Runnable {

    @Override
    public void run() throws ArithmeticException{
            method0(); // line 8
    }

    public void method0(){
        int i = 0/0; // line 12
    }
} 
```

**java.lang.Thread**

```
public class Thread implements Runnable {
    public void run() {
    if (target != null) {
        target.run(); // line 619
    }
    }
} 
```

**堆栈跟踪**

```
Exception in thread "Thread-0" java.lang.ArithmeticException: / by zero
    at seperateStacksPerThread.Child.method0(Child.java:12)
    at seperateStacksPerThread.Child.run(Child.java:8)
    at java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:32:25.173

的签名`run()`不包括已检查的异常。因此，您无法覆盖它以引发检查异常（当您`override`永远无法进行更多限制时）。
但是允许抛出未经检查的异常，因为它不是签名的一部分（不需要任何人来捕获它）。
当您抛出算术异常时，它是*不同线程*的堆栈跟踪的一部分。
请注意，它说：

`Exception in thread "Thread-0" java.lang.ArithmeticException: / by zero`

而**不是**：`Exception in thread "main" java.lang.ArithmeticException: / by zero`

现在为什么不允许检查异常，这是一个设计决定，我认为这是因为没有人可以捕获它们，因为线程是一个*单独的执行流程*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:44:41.423

首先，*所有*方法都可能抛出未经检查的异常。

接下来，`run()`不抛出已检查异常的简单原因是没有人可以捕获它们！该方法作为其“主”方法从启动的线程中调用——它是顶级入口点。它上面没有任何东西可以处理异常，所以声明一个抛出异常的方法是没有意义的。

# c# - 自定义控件绘制事件不起作用

> ID：13550115
> 
> 赞同：0
> 
> 时间：2012-11-25T10:21:51.200
> 
> 标签：c#, custom-controls

自定义控件添加到其父级。在父窗体的`form_lord()`. 自定义控件绘制事件不起作用（自定义控件 onpaint 事件处的断点甚至无法触发）

代码是这样的（我不知道为什么）：

自定义控件：

```
public class Box : Control
{
    public Rectangle rect; 

    public Box(Rectangle rect)
    {
        this.rect = rect;
    } 

    protected override void OnPaint(PaintEventArgs e)
    {
        e.Graphics.FillRectangle(new SolidBrush(Color.Chocolate), rect);
        base.OnPaint(e);
    } 
} 

public partial class Form1 : Form
{ 
    private void Form1_Load(object sender, EventArgs e)
    {
        Box box = new Box( new Rectangle(100, 100, 100, 130) );

        this.Controls.add(box);
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:40:25.633

尝试设置控件的宽度和高度，下面的这个解决方案适合我

```
 public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            Load +=new EventHandler(Form1_Load);
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            Box box = new Box(new Rectangle(0, 0, 100, 100));
            box.Width = 200;
            box.Height = 200;
            this.Controls.Add(box);
        } 

    }

    public class Box : Control
    {
        public Rectangle rect;

        public Box(Rectangle rect)
        {
            this.rect = rect;
        }

        protected override void OnPaint(PaintEventArgs e)
        {

            e.Graphics.FillRectangle(new SolidBrush(Color.Chocolate), rect);
            base.OnPaint(e);
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:31:25.353

尝试继承`Box`自`UserControl`.

# proxy - Apache 和 Tomcat：ProxyPass 和 ProxyPassReverse

> ID：13550121
> 
> 赞同：17
> 
> 时间：2012-11-25T10:23:29.403
> 
> 标签：proxy, apache2, tomcat6, reverse-proxy, ajp

我在配置 Apache 和 Tomcat 时遇到问题，情况如下：

我有一个 Apache Web 服务器，运行正常，我只需键入以下内容即可访问该服务器：

```
http://localhost 
```

另外，在这台主机上，我有一个运行良好的 Tomcat；我创建了一个迷你网络应用程序，其中文件位于“prueba”目录中，我可以访问输入：

```
http://localhost:8080/prueba 
```

（我知道 Apache 运行在 80 端口，Tomcat 运行在 8080）

我想要做的是通过 Apache 用户可以访问“pruebas”（在 Tomcat 上运行），我的意思是：

```
http://localhost/prueba 
```

我已经阅读了很多，我认为有两种方法可以做到这一点，我决定启用代理模块（proxy 和 proxy_ajp，使用 a2enmod），我也读过我必须编辑这个文件：网站可用/默认，这是内容：

```
NameVirtualHost *:80
<VirtualHost *:80>
     ServerName 127.0.0.1
     DocumentRoot /var/www

     ProxyRequests Off
     ProxyPreserveHost On

     ProxyPass /static/ !
     ProxyPass / ajp://localhost:8009/
     ProxyPassReverse / ajp://localhost:8009/

.
.
.
     Alias /static/ "/apache/www/"

</VirtualHost> 
```

但这并没有正常工作:(

我不得不说我已经尝试了很多改变，就这两条线，比如：

```
 ProxyPass /prueba ajp://localhost:8009/prueba
     ProxyPassReverse /prueba ajp://localhost:8009/prueba 
```

或者

```
 ProxyPass / ajp://localhost:8009/prueba
     ProxyPassReverse / ajp://localhost:8009/prueba 
```

（每次我编辑文件时，我都会重新启动 apache）

但是当我访问 [http://localhost/prueba/] 时，我有： 服务暂时不可用

有谁知道为什么？提前谢谢各位。

Pd：我正在使用 apache 2.2.17 和 tomcat6。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-28T10:22:06.637

你必须把

```
 ProxyPass / ajp://localhost:8009/
 ProxyPassReverse / ajp://localhost:8009/ 
```

在你的 apache 虚拟主机上

然后你必须在tomcat中取消注释ajp监听器

```
<Connector port="8009" enableLookups="false" redirectPort="8443" protocol="AJP/1.3" /> 
```

然后你必须在 server.xml 中配置主机和上下文路径

REFF： [http ://www.ntu.edu.sg/home/ehchua/programming/howto/ApachePlusTomcat_HowTo.html](http://www.ntu.edu.sg/home/ehchua/programming/howto/ApachePlusTomcat_HowTo.html)

希望对你有帮助..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T14:27:28.847

`ProxyPassReverse`定义 URL Apache httpd 应该重写 URL，这将重定向到代理（隐藏）的 URL。因此，您应该将您的`ProxyPassReverse`行更改为以下内容：

```
ProxyPassReverse / http://localhost/prueba/ 
```

另见：[http ://httpd.apache.org/docs/2.2/mod/mod_proxy_ajp.html#usage](http://httpd.apache.org/docs/2.2/mod/mod_proxy_ajp.html#usage)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-02T17:55:41.147

尝试这个：

```
ProxyPass /prueba/ http://localhost:8009/prueba/
ProxyPassReverse /prueba/ http://localhost:8009/prueba/ 
```

然后从浏览器中点击以下 URL：http://localhost/prueba/

注意：必须添加“/prueba/”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-28T06:43:06.780

由于 SELinux 可能会出现服务不可用，请尝试禁用 SE Linux：setenforce 0

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-12T01:29:34.137

您可以尝试添加：

```
ProxyPreserveHost On 
```

[从文档中](https://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypreservehost)：

“启用后，此选项会将 Host: 行从传入请求传递到代理主机，而不是 ProxyPass 行中指定的主机名。

此选项通常应关闭。它在特殊配置中非常有用，例如基于代理的大量名称的虚拟主机，其中原始 Host 标头需要由后端服务器评估。”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-19T21:57:45.740

端口 8009 是 Tomcat 所以使用 ajp 而不是 http

```
ProxyPass /prueba/ ajp://localhost:8009/prueba/
ProxyPassReverse /prueba/ ajp://localhost:8009/prueba/ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-13T14:27:50.277

你说：我可以输入：

[http://localhost](http://localhost) : **8080** /prueba

但以下不起作用：

ProxyPass /prueba/ [http://localhost](http://localhost) : **8009** /prueba/

8080 != 8009

确保您的端口号相同

# php - drupal 7节点页面删除术语链接？

> ID：13550122
> 
> 赞同：0
> 
> 时间：2012-11-25T10:23:39.517
> 
> 标签：php, drupal, drupal-7

> **可能重复：**
> [Drupal：如何从分类术语中删除链接？](https://stackoverflow.com/questions/2943453/drupal-how-can-i-remove-the-links-from-taxonomy-terms)

我不想在帖子内容下显示该术语。当我使用

```
hide($content['field_term']);
      print render($content); 
```

但它不起作用？为什么 ？该术语仍在帖子内容下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T10:26:03.360

您不需要所有这些，只需转到`The manage display page`您的内容类型：`admin/structure/types/manage/page/display`

然后选择`<Hidden>`术语字段旁边的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:52:35.077

如果可以，通常最好使用 UI。但也有可能改变模板。试图从记忆中回答我会说您可以更改这是否是 node.tpl.php 中的输出，您的主题可能已经可用并准备好更改。

# java - 在投射时覆盖对象

> ID：13550125
> 
> 赞同：0
> 
> 时间：2012-11-25T10:24:33.380
> 
> 标签：java, android

我想重写而不创建从扩展的新类`onDraw`，这是我想要重写的行`ListView``ListView`

```
lv_booksList = (ListView) ll_container.findViewById(R.id.lv_booksList); 
```

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T10:28:57.090

您不能*在运行时修改 Java 类，也不能在创建对象后更改其类型。如果要覆盖`onDraw`，唯一的方法是创建一个子类并实例化它。

# javascript - jQuery 中的单词限制器（在 XX 字符后在最近的空格处截断并添加...'阅读更多'）

> ID：13550127
> 
> 赞同：1
> 
> 时间：2012-11-25T10:25:17.493
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何在 jQuery 中截断字符串？](https://stackoverflow.com/questions/4637942/how-can-i-truncate-a-string-in-jquery)

我正在使用 jQuery 从 Facebook 提取提要，并希望限制每个消息字符串中显示的单词/字符的数量。

即如果字符串包含超过 100 个字符，它应该停在最近的空间并放 '... 阅读更多 '

简单地说，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T11:19:57.453

```
function truncateString (string, limit, breakChar, rightPad) {
    if (string.length <= limit) return string;

    var substr = string.substr(0, limit);
    if ((breakPoint = substr.lastIndexOf(breakChar)) >= 0) {
        if (breakPoint < string.length -1) {
            return string.substr(0, breakPoint) + rightPad;
        }
    }

    return string;

} 
```

你可以在这里测试这个功能[jsfiddle](http://jsfiddle.net/chMFW/1/)

或使用此代码进行测试

var text = '万维网。当你在街上的普通人'; console.log(truncateString(text, 52, ' ', '...'));

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T10:35:14.107

您可以编写一个简单的函数来执行此操作，纯 JavaScript，例如：

```
// Function that truncates string at the 10th char and appends '... (read more)'
// if the string has more than 10 chars
var ellipsize_special = function (string) {
  if (string.length > 10) { 
      return string.substring(0,10) + "... (read more)";
  } else {
      return string;
  }
} 
```

测试它：

```
 var short_str = "apple";
 var long_str = "pineapple juice";
 ellipsize_special(short_str);
 ellipsize_special(long_str); 
```

警告：这是一种*简单*的方法。正确省略将涉及在字符限制之前的第一个空白字符处截断字符串。浏览器对此提供支持（通过 CSS 参数），但它们没有添加您想要的“阅读更多”字符串，并且试图使其正常工作是一团糟，至少我上次在 Opera 中尝试过, 火狐, 铬, IE...

# makefile - 如何在makefile中添加shell扩展？

> ID：13550130
> 
> 赞同：1
> 
> 时间：2012-11-25T10:25:25.347
> 
> 标签：makefile, gnu-make

例如：

```
SHELL=/bin/bash
ex:
    echo $RANDOM 
```

当你调用它时：

```
$ make ex
echo ANDOM
ANDOM 
```

那里发生了什么？有没有办法解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T10:28:47.500

Make 将 $ 符号解释为其自己的变量（在您的情况下为 R）。你需要逃避它：

```
SHELL=/bin/bash
ex:
    echo $$RANDOM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:29:36.530

$(RANDOM) 如果我没记错的话是正确的makefile语法

编辑： $(RANDOM) 用于 Makefile 变量。

如果你有一个导出的 shell 变量，你需要使用 ${RANDOM}

# php - 如何使用 RegEx 使用“\”转义换行符

> ID：13550131
> 
> 赞同：1
> 
> 时间：2012-11-25T10:25:30.277
> 
> 标签：php, regex

目标是将字符串拆分为行，除非前面有反斜杠。让我们想象一下。像这样的字符串：

```
Hello\
 world!
Bye, world. 
```

应该分开：

```
[0] Hello world!
[1] Bye, world! 
```

我想出了这个正则表达式（对于 PHP，`preg_split`）：

```
/(?<!\\\\)\n/ 
```

它拆分并在拆分时考虑反斜杠，但是：

*   反斜杠和换行符仍然存在。
*   它仅适用于类 UNIX 换行符 ( `\n`)。

所以，它实际上输出：

```
[0] Hello\\x10 world!
[1] Bye, world! 
```

我的正则表达式应该如何？

到目前为止，为了解决这些问题，我已经尝试过：

```
/(?<!\\\\)(?:\r\n|\n|\r)/
/(?:(?<!\\\\)\n)/ 
```

但他们都没有工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T10:31:07.373

您需要分两步完成：

1.  加入行
2.  然后分裂

```
$text = preg_replace('/(?<!\\\\)((?:\\\\\\\\)*)\\\\((?:\n|\r)+)/', "$1", $text);
$result = preg_split('/(\r|\n)+/', $text); 
```

第一个正则表达式确保它仅在换行符之前有奇数个斜杠时才拆分，因此保留了“转义斜杠”。

因此，您可能会考虑在最后用真实的反斜杠替换转义的反斜杠：

```
$text = preg_replace('/(?<!\\\\)((?:\\\\\\\\)*)\\\\((?:\n|\r)+)/', "$1", $text);
$text = preg_replace('/\\\\\\\\(?=(\\\\\\\\)*$)/m', '\\', $text);
$result = preg_split('/\r\n?|\n/', $text); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T10:30:06.873

你第一次尝试解决这个问题已经很好了。但是您不会使用与拆分相同的正则表达式来消除换行符。您可以`preg_replace`先在输入中使用它（以消除转义的换行符）：

```
$str = preg_replace('/\\\\(?:\r\n?|\n)/', '', $str); 
```

然后做一个简单`preg_split`的：

```
$result = preg_split('/\r\n?|\n/', $str); 
```

注意：您可能希望对反斜杠的位置更加宽容，以便忽略行尾的尾随空格。这将使初始替换看起来像这样：

```
$str = preg_replace('/\\\\[ \t]*(?:\r\n?|\n)/', '', $str); 
```

现在，一行末尾的意外制表符或空格（在反斜杠之后）不会破坏转义。

# meteor - Meteor：如何在 /public 文件夹之外提供图像？

> ID：13550138
> 
> 赞同：1
> 
> 时间：2012-11-25T10:26:49.507
> 
> 标签：meteor

使用 Meteor 我正在编写一个可以在 /themes 文件夹中提供自定义主题的框架。我希望每个主题的图像都保留在相应的主题文件夹中。

从流星文档：

> 最后，Meteor 服务器将提供公共目录下的任何文件，就像在 Rails 或 Django 项目中一样。这是图片、favicon.ico、robots.txt 和其他任何东西的地方。

如何从 /public 文件夹外部向客户提供图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:32:43.643

好吧，当 Meteor 提供其内容时，您必须将 /public 视为根文件夹。因此，如果您在 HTML 中引用图像时在 /public/themes/x.jpg 中有内容，则可以执行 /themes/x.jpg 之类的操作

如果我没有正确理解您的问题，请告诉我。我会尽力回答。

# model-view-controller - MVC - 除了设置/获取成员之外，模型类中应该有哪些方法？

> ID：13550143
> 
> 赞同：13
> 
> 时间：2012-11-25T10:27:54.350
> 
> 标签：model-view-controller, model, controller

**操作*Model*类成员的方法**应该在***Model*还是在*Controller*中实现？这是否取决于这种操作有多“重”？**

 **我所说的“操纵”是指：

1.  得到一个班级成员

2.  根据该类成员进行长时间计算

3.  返回与此类相关的另一个值

例如，`Board class`其中包含一个单元矩阵成员。现在我想实现一个根据特定单元格位置返回所有周围单元格的方法。

模型或视图是否负责实现上述内容？

如果此问题属于另一个 Stack Exchange QA 站点，我将欢迎将我的帖子移至该站点的建议。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-25T10:53:54.677

保持你的控制器精简，不要让它们做太多事情，这符合 SOLID 中面向对象设计的单一责任原则。如果你有胖控制器，它们就会变得难以测试和维护。

至于模型，我以前有愚蠢的模型，只是映射到数据库表，这是受您在 Web 上看到的大多数示例应用程序的启发，但现在我不这样做了。

我（尝试）遵循领域驱动设计的原则，其中模型（DDD 术语中的实体）位于应用程序的中心，它们被期望封装与实体相关的行为，它们是智能模型（所以是的，逻辑在这种情况下，与对象相关的将与它一起存在）。DDD 是一个更大的话题，它与 MVC 没有直接关系，但它背后的原理可以帮助您更好地设计应用程序，如果您在 Google 上搜索 DDD，可以找到很多材料和示例应用程序。

此外，Ruby On Rails 社区——似乎激发了大多数 MVC 框架——似乎也对拥有 Fat Models 和 Skinny Controllers 进行了炒作。

最重要的是，您可以将**视图模型**添加到您的组合中，这对我很有帮助。在这种情况下，您可以使用 ViewModel 来表示模型的一个愚蠢子集，仅用于生成视图，它使您的生活更轻松，并进一步将您的视图与模型分开，这样它们就不会影响您的设计不必要的决定。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-25T11:09:09.463

您所说的“模型”实际上是[域对象](http://c2.com/cgi/wiki?DomainObject)。MVC 中的实际模型只是一个层，而不是具体的东西。

在您的特定示例中，`Board`应该有一个返回此列表的方法。我假设，您实际上正在获得它，因为您需要与这些细胞进行进一步的交互。

这就是模型层中的[服务](https://en.wikipedia.org/wiki/Service_%28systems_architecture%29)发挥作用的地方。如果使用它们，它们是模型层的外部部分，包含应用程序逻辑——不同域对象之间的交互以及持久性（通常是[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)或[工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)）与域对象之间的交互。

> 假设您正在制作游戏，并且您和玩家执行并进行 AoE 攻击。控制器持有负责此功能的服务并发送命令：*此玩家将 AoE 朝这个方向瞄准，执行它*。
> 
> 服务实例化`Board`并询问目标位置的周围单元。然后它对它获取的集合中的每个单元格执行“损坏”。逻辑完成后，它告诉工作单元实例提交所有发生在`Board`.

控制器不关心服务做什么的细节。它不应该收到任何反馈。当执行到达视图时，它从模型层请求最新的更改并修改 UI。作为额外的好处 - 服务让您阻止业务逻辑在表示层中泄漏（主要由视图和控制器组成）。

域对象应该只包含处理其状态的方法。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-25T10:55:08.050

我认为这与 MVC 关系不大，而与常规软件工程有很大关系。

我个人会毫不犹豫地在模型中进行琐碎的计算，但会非常警惕*胖*模型。

现在，MVC 代表模型视图控制器这一事实并不一定意味着*一切都*应该是视图、模型或控制器。如果您觉得有必要将职责转移到一个不真正符合 M、V 或 C 资格的单独类，我不明白您为什么不应该这样做。

你实现它的方式取决于你。您可以将此单独的类用作“顶级”（因为没有更好的术语）对象，或者将模型的方法委托给它，以隐藏您正在使用它的事实。我可能会选择后者。

不过，一切都值得商榷。每个人和他们的妹妹似乎对如何正确地做 MVC 有不同的看法。

我，我只是把它当作一个指导方针。当然，这是一个好主意，因为它可以让您更好地分离关注点，但最终——正如它总是发生的那样——没有一种万能的方法来应用它，你不应该受到它的过度约束，以至于一切都必须是视图、模型或控制器。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-07-07T11:45:53.220

根据最佳实践，我们应该使用仅具有获取访问权限的计算字段的属性。例如 public double TotalCost { get { return this.Role.Cost * TotalHour; } }**

# php - Preg_Replace 用于适合特定模式的大 int

> ID：13550145
> 
> 赞同：0
> 
> 时间：2012-11-25T10:28:38.823
> 
> 标签：php, regex, json

在一个巨大的字符串中，我试图清理成 json。我遇到这样的事情会破坏脚本（通常来自同一来源多次）

```
{
 29646191: [bunchofjson]
} 
```

有没有我可以做的 preg_replace 来替换所有出现的

```
{
 stringofrandomlysizednumbers: [anything]
} 
```

和

```
{
 "string...numbers": [anything]
} 
```

没用的事情清单：

```
$output = preg_replace('/([^\\\])":([0-9]{10,})(,|})/', '$1":"$2"$3', $output);
$output = preg_replace('/("\w+"):(\d+)(.\d+)?/', '\\1:"\\2\\3"', $output);
$output = preg_replace('/("\w+"):(\d+)/', '\\1:"\\2"', $output);
$output = preg_replace('/(\d+):/', '"$1":', $output);
$output = preg_replace('/("\w+"):(\d+)(.\d+)?/', '\\1:"\\2\\3"', $output);
$output = preg_replace('/:\s*(\-?\d+(\.\d+)?([e|E][\-|\+]\d+)?)/', ': "$1"', $output);
$output = json_decode($output, true, 512, JSON_BIGINT_AS_STRING)); 
```

（在理想情况下，我将 json 解码为关联数组）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:31:13.650

我相信你正在寻找这个替代品：

```
$output = preg_replace('/(?<=\s)(\d+)(?=\s*:)/', '"$1"', $output); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T11:29:52.177

我猜，并没有检查我的代码，但试试这个。

```
$output = preg_replace('/^\s*[0-9]{10,}.*/', '"string...numbers": \[anything\]', $output); 
```

（我不确定 \[ 和 \] 是必需的。我不认为它们是但我把它们放在那里只是封装...... preg_replace 将替换任何具有任意数量空格的行，然后是 10 个连续的数字字符.

输入是这样的吗？

```
{
 29646191: [bunchofjson]
} 
```

输出将是这样的

```
{
 "string...numbers": [anything]
} 
```

# android - Android Socket in.ReadLine()

> ID：13550149
> 
> 赞同：0
> 
> 时间：2012-11-25T10:29:16.147
> 
> 标签：android, sockets, bufferedreader

我的客户端第一次发送到客户端并从服务器成功读取确认。当我再次点击发送按钮时，它写入服务器但无法再次读取。

这是我的代码：

注意：doit 变量表示按钮被按下，然后它会回到 0，直到用户再次点击按钮。

```
 while (connected) {
                try {
                    Log.d("ClientActivity", "C: Sending command.");

                   b.setOnClickListener(new View.OnClickListener() {

                       public void onClick(View v) {
                           // TODO Auto-generated method stub

                         doit=1;
                         Log.e("ErrorButton","NextTime "+doit);
                       }
                   });  
                  if(doit==1)
                  {
                      Log.e("ErrorButton","If");
                  ////
                      out = new PrintWriter( new BufferedWriter( new OutputStreamWriter(socket.getOutputStream())),true); 
                    in = new BufferedReader(new InputStreamReader(socket.getInputStream()));                

                    out.println("Helloo");

                    while ((text = in.readLine()) != null) {
                        finall += text;
                        Log.e("Test","Final: "+finall);
                      if(text=="quit")
                      {
                          socket.close();
                      }
                  Log.e("ClientActivity", "After Read "+doit+" "+finall);
                 // in.close();

                   doit=0;
                   Log.e("ClientActivity", "After If "+doit);
                  } 

                  }     

                } catch (Exception e) {
                    Log.e("ClientActivity", "S: Error", e);
                }

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:33:08.127

因为，我认为你的 Socket 没有关闭，

看看你的代码行，**你的 if 条件是错误**的，

```
if(text=="quit") 
```

它应该是，

```
if(text.equals("quit")) 
```

要比较一个字符串，请始终使用Java String 类中的一个`.equals()`或`equlaIgnoreCase()`方法。

**还将按钮** `onClickListener()`从`while()`循环中移出。

每次它为导致问题的每次迭代都为 Button 创建一个新的侦听器对象。

写

```
b.setOnClickListener(new View.OnClickListener() {
   public void onClick(View v) {
    doit=1;
    Log.e("ErrorButton","NextTime "+doit);
  }
}); 
```

在`onCreate()`活动中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T22:21:40.690

不要每次在循环中创建新的流。在套接字的生命周期内创建一次。您正在通过创建新数据而丢弃正在丢弃的流中的缓冲数据。

# cmake - 将 gtest 与 cmake/ctest 一起使用时未找到测试

> ID：13550153
> 
> 赞同：14
> 
> 时间：2012-11-25T10:29:40.993
> 
> 标签：cmake, googletest, ctest

我有一个具有以下结构的项目：

```
linalg
├── build
├── CMakeLists.txt
├── docs
│   └── Doxyfile
├── include
│   └── linalg
│       └── vector3.hpp
├── src
│   ├── CMakeLists.txt
│   └── linalg
│       └── vector3.cpp
└── test
    ├── CMakeLists.txt
    └── linalg
        └── test_vector3.cpp 
```

文件 test_vector3.cpp 是一个 gtest 单元测试文件，它提供了两个简单的测试。顶层 CMakeLists.txt 只是设置包含并添加 src 和 test 子目录：

```
cmake_minimum_required(VERSION 2.8)

project(linalg)

include_directories(include)
add_subdirectory(src)
add_subdirectory(test) 
```

src/CMakeLists.txt 文件将vector3.cpp 编译成静态库：

```
cmake_minimum_required(VERSION 2.8)

add_library(linalg linalg/vector3.cpp) 
```

test/CMakeLists.txt 文件基于 /usr/share/cmake-2.8/Modules/FindGTest.cmake 中提供的示例：

```
cmake_minimum_required(VERSION 2.8)

enable_testing()
find_package(GTest REQUIRED)
include_directories(${GTEST_INCLUDE_DIRS})

add_executable(test_vector3 linalg/test_vector3.cpp)
target_link_libraries(test_vector3 linalg ${GTEST_BOTH_LIBRARIES} pthread)

add_test(test_vector3 test_vector3) 
```

然后我运行以下命令：

```
cd build
cmake ..
make 
```

我将 liblinalg.a 库正确编译到 build/src 中，并将 test_vector3 可执行文件正确编译到 build/test 中。我可以运行 test_vector3 可执行文件，我从 googletest 得到输出，说所有测试都通过了，但是如果我运行，`make test`我没有任何输出，如果我运行，`ctest ..`我会收到一条消息：

```
Test project /home/ryan/GitHub/linalg/build
No tests were found!!! 
```

有什么我想念的吗？还是我只是误解了 ctest 如何与 gtest 一起工作？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-25T14:19:58.857

问题的症结在于`enable_testing`在这种情况下应该从您的顶级 CMakeLists.txt 调用。添加[`include(CTest)`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#module:CTest)到您的顶级 CMakeLists.txt 应该可以为您解决这个问题。

这将允许您删除`enable_testing`test/CMakeLists.txt 中的调用，因为 CTest 子模块在`enable_testing`内部调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-09T02:53:51.587

只是为了更新这个。

3.9 版中的 cmake 添加了对 GoogleTest 与 CTest 集成的支持。

因此，您现在可以让 CTest 抓取您的测试可执行文件中的所有测试宏，而不仅仅是整个可执行文件。

此处示例： [https ://gist.github.com/johnb003/65982fdc7a1274fdb023b0c68664ebe4](https://gist.github.com/johnb003/65982fdc7a1274fdb023b0c68664ebe4)

# php - 我想从 mysql 查询中跳过记录？

> ID：13550155
> 
> 赞同：-5
> 
> 时间：2012-11-25T10:29:44.137
> 
> 标签：php, mysql

我想跳过从 MySQL 查询中获取的记录。假设我的查询是： select * from number; 输出：1、2、3、4、5。所以我想跳过记录 2。那我该怎么做。请逐步解释，因为我是 php 和 mysql 的初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T10:31:33.387

```
select * from your_table
order by id desc 
```

`desc`代表
`asc`升序降序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:31:44.283

只需`ORDER BY id DESC`在您的查询中使用，此处有更详细的[说明](http://dev.mysql.com/doc/refman/5.1/en/select.html)。

这样你就可以颠倒结果的顺序。请以这种方式进行，而不是通过 php 或您之后使用的任何语言；）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T10:31:53.567

您应该使用`ORDER BY someattribute DESC`来获得降序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T10:32:00.990

您应该修改`ORDER BY <primary_key_column_name> DESC`您的 SQL 查询。你能输入 PHP 脚本和 SQL 查询吗？

# git - Git 管理一个内容不断变化的网站

> ID：13550157
> 
> 赞同：1
> 
> 时间：2012-11-25T10:30:17.467
> 
> 标签：git, deployment, web

我开发了一个托管在专用服务器上的网站。该网站在 PHP 下运行，有一些自己编写的 CMS，特别是允许编辑 DocumentRoot 下的文件（例如模板和配置）。现在我想使用 Git 管理这个站点。我在服务器上创建了一个裸仓库并设置了一个接收后挂钩，将推送的文件复制到 DocumentRoot。问题是上面提到的模板和配置也可以由 CMS 编辑，我的推送可能会覆盖这些更改。

如何配置 Git 以及本地和/或远程存储库以安全地将本地编辑推送到站点？

# c# - 在 .NET 中读取 PRI 文件

> ID：13550158
> 
> 赞同：1
> 
> 时间：2012-11-25T10:30:27.490
> 
> 标签：c#, .net, windows, vb.net

我有一个包含一些字符串资源的[PRI 文件。](http://msdn.microsoft.com/en-us/library/windows/apps/jj552947.aspx)我想在.NET 中阅读和显示它。

有什么办法吗？

# android - 安装新软件时是否会触发 android 系统中的意图？

> ID：13550159
> 
> 赞同：0
> 
> 时间：2012-11-25T10:30:30.890
> 
> 标签：android, android-intent, installation, broadcastreceiver

> **可能重复：**
> [android 中是否有安装事件？](https://stackoverflow.com/questions/2227604/is-there-on-install-event-in-android)

我可能会用广播接收器捕捉到的意图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:48:32.987

来自 Android 开发者网站：

```
public static final String ACTION_PACKAGE_ADDED 
```

（API 级别 1）

**广播动作：**设备上已安装新的应用程序包。数据包含包的名称。注意新安装的包没有收到这个广播。

可能包括以下附加内容：

`EXTRA_UID`包含分配给新包的整数 uid。 `EXTRA_REPLACING`如果这是`ACTION_PACKAGE_REMOVED`在同一包的广播之后设置为 true。这是一个只能由系统发送的受保护意图。

**常数值：** `"android.intent.action.PACKAGE_ADDED"`

# iphone - NSFetchedResultsController 的 GROUP BY 等效谓词

> ID：13550160
> 
> 赞同：0
> 
> 时间：2012-11-25T10:30:40.407
> 
> 标签：iphone, objective-c, core-data

我正在尝试正确`NSFetchedRequest`查询给定电视节目的下一个未观看的剧集。它应该放在**一个**请求中，因为我必须将它交给 NSFetchedResultsController。

```
My Model (CoreData):
 Show
   - Seasons:NSSet<Show>
 Season
   - Episodes:NSSet<Episode>
 Episode
   - first_aired:NSDate
   - watched:BOOL 
```

每个节目都应该返回 1（或 0）集。

我可以将它与多个请求放在一起。

例如：我将`NSFetchedResultsController`up 设置为获取每个`show`. 在`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`我迭代每一个`Show`以获得最新的`episode`

```
+(Episode *)nextAiringEpisodeForShow:(Show *)show{

    NSTimeInterval timeinterval = 0.0;
    NSDate *date = [NSDate dateWithTimeIntervalSince1970:timeinterval];

    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Episode"];
    request.predicate = [NSPredicate predicateWithFormat:@"season.show = %@ AND watched = false AND season.seasonNumber > 0 AND first_aired > %@",show,date];
    NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"first_aired" ascending:NO];
    request.sortDescriptors = [NSArray arrayWithObject:sortDescriptor];

    return  [[show.managedObjectContext executeFetchRequest:request error:nil] lastObject];
} 
```

这样做的问题是：有些节目已经看过所有剧集。这些将显示为`(null)`，`UITableView`并且无法从 中删除它们，`UITableView`因为`NSFetchedResultsController`设置为`dataSource`。此外，以这种方式进行排序`TableView`时无法排序`first_aired`。还是我在这里遗漏了什么？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:02:02.340

您可以仅获取至少有一个未观看的剧集的节目，而不是在 fetched results 控制器中获取所有节目。这应该与以下谓词一起使用（对于“Show”上的获取请求）：

```
[NSPredicate predicateWithFormat:@"SUBQUERY(seasons, $x, ANY $x.episodes.watched == FALSE).@count > 0"] 
```

# java - Android：下载 HTML 并不总是有效

> ID：13550161
> 
> 赞同：0
> 
> 时间：2012-11-25T10:30:43.680
> 
> 标签：java, android, html, download, apache-httpclient-4.x

在我的应用程序中，我使用以下代码下载了网站的 HTML 样式表：

```
private DefaultHttpClient createHttpClient() {
        HttpParams my_httpParams = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(my_httpParams, 3000);
        SchemeRegistry registry = new SchemeRegistry();
        registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
        ThreadSafeClientConnManager multiThreadedConnectionManager = new ThreadSafeClientConnManager(my_httpParams, registry);
        DefaultHttpClient httpclient = new DefaultHttpClient(multiThreadedConnectionManager, my_httpParams);
        return httpclient;
}

private class Example extends AsyncTask<Void, Void, Void> {

    int mStatusCode = 0;
    String content = "";

    @Override
    protected Void doInBackground(Void... args) {

        String url = "www.example.com";

        DefaultHttpClient httpclient = createHttpClient();

        HttpGet httpget = new HttpGet(url);

        try {
            HttpResponse response = httpclient.execute(httpget);
            StatusLine statusLine = response.getStatusLine();
            mStatusCode = statusLine.getStatusCode();

            if (mStatusCode == 200){
                content = EntityUtils.toString(response.getEntity());
            }

        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        return null;
    }

    @Override
    protected void onPostExecute(Void arg) {
        //Stuff
    }
} 
```

但是，有时，特别是当手机使用 3g 时，我得到 mStatusCode = 0，而其他互联网应用程序（例如浏览器）仍然可以工作。

你们知道我怎样才能防止这种情况发生吗？

非常感谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T11:34:05.497

对于解析 html，您可以使用[jsoup](http://jsoup.org/) - Java HTML Parser。例如：

```
String url = "http://www.google.com";
Document doc = Jsoup.connect(url).get();
Elements img = doc.select("img");
Elements js = doc.select("script");

// Save images
for (Element el : img)
{
    String imageUrl = el.attr("src");
    FileUtils.saveFile("url", "File", "Folder");
}

// Save JS
for (int j = 0; j < js.size() - 1; j++)
{
    String jsUrl = js.get(j).attr("src");
    FileUtils.saveFile("url", "File", "Folder");
}

// The same for CSS 
```

保存文件：

```
public static void saveFile(String fileUrl, String fileName,
        String folderName) throws IOException
{
    URL url = new URL(fileUrl);
    InputStream input = url.openStream();

    File extStorageDirectory = Environment.getExternalStorageDirectory();

    File folder = new File(extStorageDirectory, folderName);
    folder.mkdir();

    OutputStream output = new FileOutputStream(new File(folder, fileName));

    byte[] buffer = new byte[1024];
    int bytesRead = 0;
    while ((bytesRead = input.read(buffer, 0, buffer.length)) >= 0)
    {
        output.write(buffer, 0, bytesRead);
    }
    output.close();
    input.close();
} 
```

要检查网络可用性，您可以使用以下方法：

```
public static boolean checkIfURLExists(String host, int seconds)
{
    HttpURLConnection httpUrlConn;
    try
    {
        httpUrlConn = (HttpURLConnection) new URL(host).openConnection();

        // Set timeouts in milliseconds
        httpUrlConn.setConnectTimeout(seconds * 1000);
        httpUrlConn.setReadTimeout(seconds * 1000);

        // Print HTTP status code/message for your information.
        System.out.println("Response Code: " + httpUrlConn.getResponseCode());
        System.out.println("Response Message: "
                + httpUrlConn.getResponseMessage());

        return (httpUrlConn.getResponseCode() == HttpURLConnection.HTTP_OK);
    }
    catch (Exception e)
    {
        System.out.println("Error: " + e.getMessage());
        return false;
    }
} 
```

# c++ - FindFirstFile 问题无法让任何示例起作用。

> ID：13550162
> 
> 赞同：1
> 
> 时间：2012-11-25T10:30:53.607
> 
> 标签：c++, windows, visual-studio-2010, file

我一直遇到 FindFirstFile 和 FindNextFile 的问题，我需要让它们将所有 dll 列出到一个数组中，但我无法让它列出任何文件。我曾尝试使用和编辑 MSDN 中的示例代码，但这不起作用，要么他们将错误类型的变量传递给函数。如果它是一团糟，我现在拥有的代码很抱歉，但我正在尽一切努力让它工作。我也在使用`argv[1]`，因为我相信这给出了`.exe`我需要的目录，因为那是 dll 将被存储。我对为什么我尝试的所有示例都不起作用以及为什么我不能修改它们以使其起作用感到完全困惑。

```
WIN32_FIND_DATA FindFileData;
HANDLE hFind = INVALID_HANDLE_VALUE;

string directorySearch = "E:\\My Documents\\Visual Studio 2010\\Projects\\SEP-Asignment-One\\Debug\\*";

// Find the first file in the directory.
hFind = FindFirstFile(LPCWSTR("E:\\My Documents\\Visual Studio 2010\\Projects\\SEP-Asignment-One\\Debug\\*"), &FindFileData);

if (hFind == INVALID_HANDLE_VALUE) 
{
  printf ("Invalid file handle. Error is %u.\n", GetLastError());
} 
else
{
  printf ("First file name is %s.\n", FindFileData.cFileName);

                    // List all the other files in the directory.
  while (FindNextFile(hFind, &FindFileData) != 0) 
  {
     printf ("Next file name is %s.\n", FindFileData.cFileName);
  }
  FindClose(hFind); 
```

任何帮助都会受到欢迎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T10:41:46.903

使用`std::wstring`, 宽字符串文字，如`L"Hello"`, 并记住`UNICODE`在包含之前定义`<windows.h>`（但默认情况下在 Visual Studio 项目中完成）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:43:49.030

而不是 `hFind = FindFirstFile(LPCWSTR("...")...`，尝试 `hFind = FindFirstFile(_T("...")`

# jquery-ui - 来自mysql的jquery自动完成

> ID：13550165
> 
> 赞同：0
> 
> 时间：2012-11-25T10:31:19.123
> 
> 标签：jquery-ui, jquery-autocomplete

我对 jquery-ui 中的自动完成功能有疑问。我有

```
var availableTags = [ "ActionScript", "AppleScript", "Asp"]; 
```

我想从具有数千条记录的 mysql 表中获取。

```
$( "#find" ).autocomplete({ source: availableTags }); 
```

喜欢

```
$( "#find" ).autocomplete({ source: availableTags }, $('#find').value()); 
```

??

如何放置自动完成功能，它会在接收到 availableTags 之前发送一个搜索短语。我不想在每次按键后挖掘整个桌子。复杂度太高。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:59:21.300

如果您想使用基本的 JQuery，您可以查看远程数据源示例中的 示例[http://jqueryui.com/autocomplete/#remote](http://jqueryui.com/autocomplete/#remote)

你可以看到：

```
$( "#birds" ).autocomplete({
            source: "search.php",
            minLength: 2,
            select: function( event, ui ) {
                log( ui.item ?
                    "Selected: " + ui.item.value + " aka " + ui.item.id :
                    "Nothing selected, input was " + this.value );
            }
        }); 
```

minlenght 是您可以输入以开始研究的最小字母。

在服务器端，您必须创建类似

```
//connect to your database

$term = trim(strip_tags($_GET['term']));//retrieve the search term that autocomplete sends only when there are 2 char or more

$qstring = "SELECT description as value,id FROM test WHERE description LIKE '%".$term."%'"; //ONLY AN EXAMPLE
$result = mysql_query($qstring);//query the database for entries containing the term

while ($row = mysql_fetch_array($result,MYSQL_ASSOC))//loop through the retrieved values
{
        $row['value']=htmlentities(stripslashes($row['value']));
        $row['id']=(int)$row['id'];
        $row_set[] = $row;//build an array
}
echo json_encode($row_set);//format the array into json data 
```

如果您不在跨域上，则需要输入类似 JSON 的内容（在跨域上，您需要 JSONP，但这是另一回事）

```
[{"value":"Some Name","id":1},{"value":"Some Othername","id":2}] 
```

* * *

最糟糕的做法 另一种解决方案（但在逻辑上不可行）是在记录集上使用循环创建整个 JS 数组，生成类似的字符串。

var availableTags = [ "ActionScript", "AppleScript", "Asp",...];

所以你的表格在页面中是硬编码和不可变的，但是每个数据都暴露在页面的源代码中，这只是为了学习目的，但永远不要在生产中这样做。

* * *

如果您不想以替代模式挖掘表格，则需要指定您不会如何挖掘，但自动完成基于 2 个想法。1）每个按键都有助于做出更好的限制，因此每次按键都需要进行另一个查询

2）当按下新键时，最后一个结果并不重要，所以最后一个请求被放弃。

因此，在某些情况下，当键入的键很少时，您可以在查询中使用动态限制，您可以将结果限制为有限的记录数量，当键入的序列增长时，您可以移除限制或限制为大量记录因为当时的条件使它的工作更好。

* * *

我希望有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:34:28.053

您将需要调用一个 Web 服务，该服务会为您进行查找。然后，您可以利用服务器端语言/ORM 的任何功能或使搜索过程高效的任何功能。

# java - 我的第一个 Java 程序的问题

> ID：13550171
> 
> 赞同：3
> 
> 时间：2012-11-25T10:31:53.247
> 
> 标签：java

我正在尝试做一个简单的磅到公斤转换器。不知道我做错了什么，因为它不会打印出答案。有人可以帮帮我。

```
public class ass10 {

    public static void main(String[] args) {
    double lbs2kg(3);
    }
    public double lbs2kg(double w){
        System.out.println(w/2.2);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T10:32:52.803

删除`double`或放置变量，方法也`lbs2kg()`必须是静态的（使其也返回双精度或兼容类型）。

```
public static void main(String[] args) {
    double x = lbs2kg(3);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T10:33:20.793

使用这样的东西： -

```
 double x = lbs2kg(3); 
```

您的功能中也缺少了`return`。

还，

```
public static void lbs2kg(double w){
System.out.println(w/2.2);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T10:34:56.650

你大概想要...

```
public class ass10 {

    public static void main(String[] args) {
        lbs2kg(3);
    }

    public static void lbs2kg(double w){
        System.out.println(w/2.2);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T10:36:24.453

对于更简洁的代码，我会这样做：

```
public class ass10 {
    public static void main(String[] args) {
        System.out.println(lbs2kg(3));
    }

    public static double lbs2kg(double w){
        return w/2.2;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-25T10:37:43.940

原来我只是缺少我的方法的静态。谢谢您的帮助！

# model - Yii 模型行为整数到布尔值

> ID：13550175
> 
> 赞同：0
> 
> 时间：2012-11-25T10:32:01.967
> 
> 标签：model, yii, yii-behaviour

我有这样的模型课

```
/**
 * @property integer $is_active
 */
class User extends CActiveRecord {
....
}

$User = User::model()->findByPk(1); 
```

在 mysql`is_active`中总是返回`1`或`0`，我想每当我打电话`$User->is_active`。它不会
输出。 怎么做这种行为？`boolean``integer`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:30:26.920

将您的字段更改为 TinyInt，yii 将相应地处理它

# java - JAVA字节码优化

> ID：13550178
> 
> 赞同：1
> 
> 时间：2012-11-25T10:32:28.443
> 
> 标签：java, performance

这是一个基本问题。

我有不应在元数据 bean 上运行的代码。所有元数据 bean 都位于元数据包下。

现在，

我使用反射 API 来找出一个类是否位于元数据包中。

```
if (newEntity.getClass().getPackage().getName().contains("metadata")) 
```

我在这段代码中的几个地方使用了这个 If。

问题是：我应该这样做一次：

```
boolean isMetadata = false
if (newEntity.getClass().getPackage().getName().contains("metadata")) {
   isMetadata = true;
} 
```

C++ 进行优化并且知道该代码已经被调用并且它不会再次调用它。JAVA会做优化吗？我知道反射 API 是一个沉重的节拍，我不想失去昂贵的运行时。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T10:44:37.957

您当然应该在进行任何优化之前检查是否真的存在性能问题。`getClass()`可能已经相当快了（`instanceof`无论如何都比 快）。您可能会缓存元数据包中的一组类，因此您无需继续检查包名称。

如果您确实需要比较包，您可以使用[Package.getPackage(String name)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Package.html#getPackage%28java.lang.String%29)方法找到元数据包一次，然后针对每个对象，`getClass().getPackage()`像以前一样调用，并比较两个包对象。

这比检查包名称中的字符串更快、更优雅，但如果有多个类加载器，则可能无法正常工作，因为 Package 对象不会相等 ( `==`) 并且 Package 不会覆盖`.equals()`。考虑一下，它甚至不能保证在单个类加载器上工作，但我怀疑在实践中你得到的是相同的 Package 实例而不是另一个副本——首先检查这个是明智的！例如：

```
String.class.getPackage() == Integer.class.getPackage() // should be true 
```

**如果您检查[源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Class.java#Class.getPackage%28%29)进行**更新**`Class.getPackage()`，您可以看到它们缓存了对象`Package.getPackage()`，因此在使用单个类加载器时应该安全地比较它们`ClassLoader.getPackage()``Package`**

 **包命名约定的一个问题是您必须在整个代码库中强制执行和维护它，随着时间的推移，这可能会成为维护问题。识别类的更明确的方法可能会更好。

识别特定类别组的替代方法包括：

*   使您的元数据 bean 实现标记接口
*   使用 Java Annotations 标记元数据 bean
*   使*所有*bean 实现一个公共接口，该接口可以调用一个方法来检查它们是否属于您定义的特定类别。这很难看，因为它基本上是在复制类型系统，但会很快，因为它不需要反射。**

# c - 代码在while循环后不继续

> ID：13550189
> 
> 赞同：1
> 
> 时间：2012-11-25T10:33:34.877
> 
> 标签：c

出色地，

`printf`除了我最后一次打电话外，这里一切正常。我想在这段代码中输出删除的字符：

```
#include <stdio.h>

int del_lower_vowels(char c) {
    if(c=='a') {
        return 0;
    }
    if(c=='e') {
        return 0;
    }
    if(c=='i') {
        return 0;
    }
    if(c=='o') {
        return 0;
    }
    if(c=='u') {
        return 0;
    }
    else
        return c;
}

int main (void) {
    printf("Enter a string\n");
    int c;
    int del = 0;
    while((c=getchar()) != EOF)
    {
        c = del_lower_vowels(c);
        if(c==0)
        {
            del +=1;
        }
        putchar(c);
    }
    printf("Deleted characters: %d",del);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T10:39:56.417

当没有更多可用输入并且您没有从文件重定向标准输入时，getchar() 会阻塞。它只会永远等待，直到您进行更多输入，或者使用 CTRL+D (Linux) 或 CTRL+Z (Windows) 向终端发送 EOF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T10:41:47.570

只需按 Enter 不会关闭输入流（在这种情况下为标准输入），因此您的程序会继续运行（这是正确的）。当我按下 Ctrl+D（这会发送 EOF）时，我会得到已删除字符的数量并且程序结束。

# python - Python：覆盖基类

> ID：13550194
> 
> 赞同：7
> 
> 时间：2012-11-25T10:34:01.500
> 
> 标签：python, inheritance

我正在考虑修改一些第 3 方 Python 代码的行为。有许多类派生自基类，为了轻松实现我的目标，最简单的方法是重写用于派生所有其他类的基类。有没有一种简单的方法可以做到这一点而无需接触任何第 3 方代码？如果我未能清楚地解释这一点：

```
class Base(object):
    '...'

class One(Base)
    '...'

class Two(Base)
    '...' 
```

...我想在`Base` *不*实际修改上述代码的情况下进行修改。也许是这样的：

```
# ...code to modify Base somehow...

import third_party_code

# ...my own code 
```

Python 可能有一些可爱的内置解决方案来解决这个问题，但我还没有意识到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T11:05:42.603

也许您可以将方法修补到`Base`?

```
#---- This is the third-party module ----#

class Base(object):
  def foo(self):
    print 'original foo'

class One(Base):
  def bar(self):
    self.foo()

class Two(Base):
  def bar(self):
    self.foo()

#---- This is your module ----#

# Test the original
One().bar()
Two().bar()

# Monkey-patch and test
def Base_foo(self):
  print 'monkey-patched foo'

Base.foo = Base_foo

One().bar()
Two().bar() 
```

这打印出来

```
original foo
original foo
monkey-patched foo
monkey-patched foo 
```

# ruby-on-rails - Elastic Beanstack - Rails - git deploy 和部署钩子

> ID：13550208
> 
> 赞同：3
> 
> 时间：2012-11-25T10:35:15.960
> 
> 标签：ruby-on-rails, git, deployment, hook, amazon-elastic-beanstalk

我想为我现有的 rails 应用程序设置 Elastic Beanstalk。

我成功地完成了示例 foo 应用程序。

这些是我的问题

1.  我需要从我的 git 存储库而不是从我正在部署的本地路径进行部署。我如何为示例 foo 应用程序执行此操作。

2.  我需要一个 before_symlink 部署钩子。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T07:13:35.320

我已经解决了这些问题。

1.  git aws.push 将所有已提交的内容带到 git，然后部署它。本地更改不受影响。

2.  在 .ebextensions 下创建了一个配置文件

更多信息 - [http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/customize-containers.html](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/customize-containers.html)

# cordova - Onload 事件触发两次，并且 deviceready 根本不触发

> ID：13550209
> 
> 赞同：1
> 
> 时间：2012-11-25T10:35:18.670
> 
> 标签：cordova, onload, ripple

我正在使用 Ripple 0.9.9 来测试我的 PhoneGap 2.0 应用程序，但在设置它时遇到了麻烦。我已阅读此站点上的相关问题，但没有任何内容可以解决我的问题：

根据[phonegap deviceready 事件 - 波纹模拟器](https://stackoverflow.com/questions/5187089/phonegap-deviceready-event-ripple-emulator)- 波纹模拟器将ripple.js 注入页面，其中包含 phonegap api 模拟器。因此，在 Ripple 内部进行测试时，不要在页面中包含您的 phonegap.js/cordova.js。

用来调用我的onload`<body onload="onLoad()">`处理程序，我有以下 JavaScript：

```
var mobile=false;

function onLoad() {
console.info("inside onload...");
var uA = navigator.userAgent;
if (uA.match(/(iPhone|iPod|iPad|Android|BlackBerry)/)) {
    console.info("on phone: " + navigator.userAgent);
    document.addEventListener("deviceready", function() { mobile=true; appReady(); }, false);
} else {
    if (uA.match(/Chrome/)) {
        console.info("on browser: " + navigator.userAgent + ", do not initiate mobile app for Chrome since will be init. by Ripple");

    } else {
        /* not running on Chrome so no Ripple */
        appReady();
    }
}

} 
```

当我在 iPhone 4 上运行的 Ripple 模拟器（设置为 Phonegap/Cordova 2.0）内运行 index.html 时，我看到以下调试（init.js 是我的 js 文件）：

```
inside onload... init.js:19

on browser: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) 

Chrome/23.0.1271.64 Safari/537.11, do not initiate mobile app for Chrome since will be init. by Ripple init.js:26

Ripple :: Environment Warming Up (Tea. Earl Gray. Hot.) ripple.js:475

cordova :: Initialization Finished (Make it so.) ripple.js:475

inside onload... init.js:19

on phone: Mozilla/5.0 (iPhone; U; CPU iPhone OS 3_0 like Mac OS X; en-us) AppleWebKit/420.1 (KHTML, like Gecko) Version/3.0 Mobile/1A542a Safari/419.3 
```

我可以看到 onload 事件被触发了两次：a）对于普通浏览器，b）似乎涟漪将用户代理更改为 iPhone 4 的用户代理，然后重新加载页面。

这是正常行为吗？

永远不会调用 'deviceready' 事件。知道为什么不？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:05:28.600

对于 deviceready 事件，请确保您从 Ripple 的左侧“平台”面板启用了 phonegap 平台。如果使用的是非PhoneGap 平台，那么我会想象不会触发 deviceready 事件。

至于双页面重新加载，是的，这是 Ripple 的一种临时行为，旨在强制某些页面事件以必要的顺序发生。但是最新版本 (0.9.11) 已解决此问题。在您的内容已经加载后，您不应该看到 Ripple 强制额外的页面加载。

建议更新到 0.9.11

# php - 开发的android应用程序无法连接到phpmyadmin

> ID：13550213
> 
> 赞同：4
> 
> 时间：2012-11-25T10:35:48.643
> 
> 标签：php, android, eclipse

我正在用 eclipse 开发一个应用程序。我试图将用户键入的数据存储到 phpmyadmin 的数据库中。不幸的是，用户点击提交按钮后，没有响应，数据也没有存储在我的数据库中。

这是我的java文件：

```
import java.util.ArrayList;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONObject;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RadioButton;
import android.content.res.Configuration;

public class UserRegister extends Activity {

JSONParser jsonParser = new JSONParser();
EditText inputName;
EditText inputUsername;
EditText inputEmail;
EditText inputPassword;
RadioButton button1;
RadioButton button2;
Button button3;
int success = 0;

private static String url_register_user = "http://10.20.92.81/database/add_user.php";
private static final String TAG_SUCCESS = "success";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_user_register);

    inputName = (EditText) findViewById(R.id.nameTextBox);
    inputUsername = (EditText) findViewById(R.id.usernameTextBox);
    inputEmail = (EditText) findViewById(R.id.emailTextBox);
    inputPassword = (EditText) findViewById(R.id.pwTextBox);

    Button button3 = (Button) findViewById(R.id.regSubmitButton);

    button3.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {

            String name = inputName.getText().toString();
            String username = inputUsername.getText().toString();
            String email = inputEmail.getText().toString();
            String password = inputPassword.getText().toString();

            if (name.contentEquals("")||username.contentEquals("")||email.contentEquals("")||password.contentEquals(""))
            {
                AlertDialog.Builder builder = new AlertDialog.Builder(UserRegister.this);

                builder.setMessage(R.string.nullAlert)
                   .setTitle(R.string.alertTitle);

                builder.setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {

                   }
               });

            AlertDialog dialog = builder.show();
            }

            // creating new product in background thread
                RegisterNewUser();  
        }
    });
}

   public void RegisterNewUser()
   {
   try
   {
        String name = inputName.getText().toString();
        String username = inputUsername.getText().toString();
        String email = inputEmail.getText().toString();
        String password = inputPassword.getText().toString();

        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("name", name));
        params.add(new BasicNameValuePair("username", username));
        params.add(new BasicNameValuePair("email", email));
        params.add(new BasicNameValuePair("password", password));

        // getting JSON Object
        // Note that create product url accepts POST method
        JSONObject json = jsonParser.makeHttpRequest(url_register_user,
                "GET", params);

        // check log cat for response
        Log.d("Send Notification", json.toString());

        success = json.getInt(TAG_SUCCESS);

        if (success == 1)
        {
            // successfully created product
            Intent i = new Intent(getApplicationContext(), StudentLogin.class);
            startActivity(i);
            finish();
        }

        else
        {
            // failed to register

        }
   }

    catch (Exception e)
    {
       e.printStackTrace();
    }
   }

   @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);

    }
} 
```

我的 php 文件：

```
<?php
$response = array();

require_once __DIR__ . '/db_connect.php';

$db = new DB_CONNECT();

if (isset($_GET['name']) && isset($_GET['username']) && isset($_GET['email']) && isset($_GET['password'])) {

$name = $_GET['name'];
$username = $_GET['username'];
$email = $_GET['email'];
$password = $_GET['password'];

// mysql inserting a new row
$result = mysql_query("INSERT INTO register(name, username, email, password) VALUES('$name', '$username', '$email', '$password')");

// check if row inserted or not
if ($result) {
    // successfully inserted into database
    $response["success"] = 1;
    $response["message"] = "You are successfully registered to MEMS.";

    // echoing JSON response
    echo json_encode($response);
} 
else {
    // failed to insert row
    $response["success"] = 0;
    $response["message"] = "Oops! An error occurred.";

    // echoing JSON response
    echo json_encode($response);
}
} else {
// required field is missing
$response["success"] = 0;
$response["message"] = "Required field(s) is missing";

// echoing JSON response
echo json_encode($response);
}
?> 
```

日志猫如下：

```
11-25 10:37:46.772: I/Choreographer(638): Skipped 30 frames!  The application may be doing too much work on its main thread. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:48:22.167

首先，遵循 Java 命名约定并保持方法名称以小写字母开头。

其次，你必须得到一个`NetworkOnMainThreadException`，因为你正在你的 UI 线程上执行阻塞网络操作。你这样做，你会过得很糟糕。

将所有网络代码放在一个异步任务中，或者至少放在一个单独的线程中。

# php - 为什么这个立即调用的函数不能正常工作

> ID：13550216
> 
> 赞同：-2
> 
> 时间：2012-11-25T10:35:58.417
> 
> 标签：php, javascript

我正在使用立即调用函数模式，但这没有传递 id

1.用户点击$user时，传入id，出现聊天窗口

```
echo "<div class='boxbottom'><a href='#' onclick=chat_com_one($id);> >$user</a><br></div>"; 
```

2.函数 chatcom_load_one 继续检查，如果有任何消息从 id 传递给 chatcom_load_one 函数。

但问题是 onclick 函数确实传递了 id 但立即调用的函数没有将 id 传递给 post 函数。

发送消息也很慢？

请帮助或建议任何替代方法，我认为错误在 chat_load_one 模式中。

```
function chat_com_one(id) {

    $('#chatcom').show('fast');
    (function chatcom_load_one(id) {
        $.post('sendchat2.php', {
            option: 'chatcom_load_one',
            tocom: id
        }, function (data) {
            $('#chatcom #commid #commidwin').html(data);
            setTimeout(chatcom_load_one(id), 1000);
        });
    }());
    $('#chatcom_send').click(function () {
        var text = document.getElementById('chatcom_text').value;
        $.post('sendchat2.php', {
            option: 'chat_com_send_one',
            text: text,
            tocom: id
        }, f
        function (data) {
            document.getElementById('chatcom_text').value = '';
        });
    });
} 
```

我的服务器上的发送功能

```
 if($_REQUEST['option']=='chat_com_send_one'){
    $session=new $session;
    $text=mysqli_real_escape_string($db3->connection,$_POST['text']);
    $tocom=mysqli_real_escape_string($db3->connection,$_POST['tocom']);
    $sql=mysqli_query($db3->connection,"INSERT INTO chat_com(fro,tocom,mesg,time) VALUES ('$session->userid','$tocom','$text',CURRENT_TIMESTAMP)");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:47:07.263

首先，我注意到两个问题：

*   您在参数列表中有语法错误`$.post`
*   你可能不想这样做：`setTimeout(chatcom_load_one(id), 1000);`

这是修复了这些错误的代码的更新版本：

```
function chat_com_one(id) {

    $('#chatcom').show('fast');
    (function chatcom_load_one(id) {
        $.post('sendchat2.php', {
            option: 'chatcom_load_one',
            tocom: id
        }, function (data) {
            $('#chatcom #commid #commidwin').html(data);
            setTimeout(function () {
                chatcom_load_one(id);
            }, 1000);
        });
    }());

    $('#chatcom_send').click(function () {
        var text = document.getElementById('chatcom_text').value;
        $.post('sendchat2.php', {
            option: 'chat_com_send_one',
            text: text,
            tocom: id
        },
        function (data) {
            document.getElementById('chatcom_text').value = '';
        });
    });
} 
```

此外，由于您使用的是 jQuery，因此您可以简化`document.getElementById...`. 另一个更新版本（进行了一些更改以使其更具可读性）：

```
function chat_com_one(id) {
    $('#chatcom').show('fast');

    (function chatcom_load_one(id) {
        $.post('sendchat2.php', {
            option: 'chatcom_load_one',
            tocom: id
        }, function (data) {
            $('#commidwin').html(data);
            setTimeout(function () {
                chatcom_load_one(id);
            }, 1000);
        });
    }(id));

    $('#chatcom_send').click(function () {
        var text = $('#chatcom_text').val();
        $.post('sendchat2.php', {
            option: 'chat_com_send_one',
            text: text,
            tocom: id
        },
        function (data) {
            $('#chatcom_text').val('');
        });
    });
} 
```

这些只是一些清理工作，可能还有其他清理工作。

**编辑：**

在我最终更新的代码中添加了 devnull69 的见解。希望它有用（如果这是问题，请接受他的回答）。

**编辑：其他注释**

你为什么`$.post`在里面`chatcom_load_one`？作为 ，它会更有意义`$.get`，并且仍然会发送查询参数。这本身并不是一个真正的问题，但它的风格很糟糕。这可能应该在一个名为`getchat.php`或其他东西的文件中，而不是做我期望的寻找`text`参数。

另外，我不知道 的实现`sendchat2.php`，但您可能应该减少超时。试试 250 毫秒左右的时间。这不会使服务器超载，并且会缩短响应时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T10:51:26.337

除了前面提到的问题之外，您还可以在没有任何参数的情况下调用立即执行的函数。您必须将`(id)`参数添加到函数调用中，以便将 id 元素移交给函数内部的本地副本。

```
(function chatcom_load_one(id) {
   ...
}(id)); 
```

# php - 如何从 PHP 文件向命令提示符发出命令？

> ID：13550218
> 
> 赞同：0
> 
> 时间：2012-11-25T10:35:58.263
> 
> 标签：php, codeigniter, xampp, command-prompt

我正在做一个在线法官。这是一个学校项目。我正在使用 CodeIgniter。我也在使用xampp。现在我需要从我的控制器向命令提示符下一个命令。我尝试过使用系统功能和执行功能，但它仍然无法正常工作。我的代码是

```
 exec('my command');
    system('my command'); 
```

这些都不起作用。我使用 then 是否正确或参数有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:41:47.657

首先，如前所述：使用[mkdir](http://php.net/manual/en/function.mkdir.php)创建目录。

第二：`md`应该怎么做？这里的命令`mkdir`也是。第三，考虑`exec`，看看`exec`函数：

`string exec ( string $command [, array &$output [, int &$return_var ]] )`

所以你可以做什么（如果你想坚持`exec`出于任何原因或未来的用例）：

```
exec("your command", $output, $return_var);
echo "returned with " . $return_var;
print_r($output); 
```

这将告诉您命令执行出了什么问题。

# django - Heroku django - 搞砸了项目结构

> ID：13550219
> 
> 赞同：1
> 
> 时间：2012-11-25T10:36:11.927
> 
> 标签：django, heroku, python-2.7

我已经在heroku（雪松堆栈）上部署了我的应用程序，并且直到几天前一切正常，当我注意到我的静态文件没有被提供时（出现代码“已取消”）。接下来我注意到我的项目突然有了与 manage.py 相同级别的新文件夹：admin/、css/、img/ 和 js/。我根本没有创建管理员，使用内置的 django 管理站点并且没有以任何方式修改它。我确实在我的项目中的 static/ 下创建了 css、img 和 js 文件夹，并且它的所有内容仍然存在。就像 static/ 中的所有文件夹都被复制到 manage.py 级别。

运行`heroku run ls -l` 在 heroku 上显示相同的变化。我怀疑这些更改会导致在提供静态文件时出现问题。

```
heroku run python manage.py collectstatic --noinput 
```

显示复制的所有文件没有问题。

我的静态目录设置：

```
STATIC_ROOT = ''
STATIC_URL = '/static/'
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    os.path.join(os.path.dirname(__file__), 'static'),
)
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
) 
```

我还没有使用 S3。

如何删除这些文件？是什么导致这些目录出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:19:58.627

根据这篇[文章](https://stackoverflow.com/questions/10308985/django-on-heroku-broken-admin-static-files)，我了解到所有这些混乱都是由将 DEBUG 更改为 FALSE 造成的。按照 Ohads 的建议，我检查了我的 STATIC_ROOT 设置，如您所见，它没有设置。这些是我的固定设置：

```
SETTINGS_PATH = os.path.abspath(os.path.dirname(__file__))
STATIC_ROOT = os.path.abspath(SETTINGS_PATH+'/static/')
STATIC_URL = '/static/'
STATICFILES_DIRS = ()
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
) 
```

添加：

```
if not settings.DEBUG:
    urlpatterns += patterns('',
        (r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.STATIC_ROOT}),
    ) 
```

在 myapp/urls.py 中解决了我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T10:40:01.457

当 Django 应用程序部署到 Heroku 时，`collectstatic`会自动运行（[Heroku 文档](https://devcenter.heroku.com/articles/django-assets)）。这会从您安装的应用程序（包括 ）中收集所有静态资产`django.contrib.admin`并将它们复制到`STATIC_ROOT`.

检查您的`STATIC_ROOT`设置。它可能没有正确设置。

[这是一个使用 S3 处理静态文件的教程](http://wavesandmaps.com/utilizing-s3-for-a-heroku-django-app/)。

# php - 获取 Instagram 图片

> ID：13550221
> 
> 赞同：0
> 
> 时间：2012-11-25T10:36:31.623
> 
> 标签：php, api, photo, instagram

有人知道如何检索和 Instagram 图片吗？我的意思是像用户填写我的图片网站上的链接，例如http://instagram.com/p/RTqrWXkEme/（不存在只是示例）然后我只向他们展示图片

我确信这可以通过 Instagram 的 API 工作，但我不知道如何..

亲切的问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T12:14:31.193

您可能正在寻找这个[API 端点](http://instagram.com/developer/embedding/#media_redirect)。

鉴于您的示例，它将是：

```
http://instagr.am/p/RTqrWXkEme/media/?size=t 
```

**编辑：**因为原始照片只是一个例子，这里是一张真实的照片：

```
https://instagr.am/p/ay2uOUwYJv/media/?size=t 
```

![Instagram 图片](../Images/185e01467949e0f97f111b9c01f36484.png)

哦，顺便说一句，您可以控制图像的大小：

> t（缩略图）、m（中）、l（大）之一。默认为 m。

```
https://instagr.am/p/ay2uOUwYJv/media/ 
```

![Instagram 图片](../Images/7bdf2e08b7b42223dd9a04f2fe671f7c.png)

```
https://instagr.am/p/ay2uOUwYJv/media/?size=l 
```

![Instagram 图片](../Images/6e9bc3a6ac0972b5e135f5b9da2d8289.png)

# actionscript-3 - 如果可能的话，来自 c++ 的 cs6 类也会有所帮助

> ID：13550224
> 
> 赞同：0
> 
> 时间：2012-11-25T10:36:54.167
> 
> 标签：actionscript-3, flash-cs6

如何创建一个类似于 c++ 类的 ac3 类？我对 ac3 还很陌生，所以转换对我来说有点困难。当我这样做时，我遇到了一个嵌套问题，并且也只能是一个可见的外部类错误。任何类似的东西，所以我可以将变量添加到 product.milk、.cheese 和 .chocolate 中？

```
public class dairy
{
public int cheese;
public int milk;
public int chocolate
}product; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:36:36.747

在 actionscript 3 中，您需要将其包装到与目录结构匹配的包中。如果未定义包名称，则该文件应位于与 .fla 文件相同的文件夹中。请注意，类的名称应该与文件本身中定义的 claas 名称完全相同（区分大小写）。在 actionscript 中，以大写开头的类是很常见的。

```
package{
  public class Dairy
  {
    public var cheese:int;
    public var milk:int;
    public var chocolate:int
  } 
} 
```

顺便说一句，正确的术语是 actionscript 3，也是 AS3。没有cs6版本的actionscript，那只是IDE的版本。

# php - 使用 PHP 和 Mysql 取得银行成就

> ID：13550227
> 
> 赞同：2
> 
> 时间：2012-11-25T10:37:27.620
> 
> 标签：php, mysql, system, achievements

好吧，我为我的游戏制作了一个成就系统。我有一个银行一定数额的成就。好吧，当他们存入一定金额时，您将在用户墙上发布成就。但是，当您提取现金时，成就将消失。这是下面的编码。那么，即使在现金从用户银行账户中消失后，我如何才能将其修复到成就将保留的位置呢？

```
<?php 
if ( $userp['bank_account'] >= 100000 )
{
    echo 
    '<img src="achievements/Diamond-Bank.png"  hspace="5" width="65" height="65" title="Diamond Banker: Made a deposit of $100,000 or more!"">';
} 
elseif ( $userp['bank_account'] >= 50000  )
{
    echo 
    '<img src="achievements/Gold-Bank.png"  hspace="5" width="65" height="65" title="Golden Banker: Made a deposit of $50,000 of more."">';
}
elseif ( $userp['bank_account'] >= 1000 )
{
    echo 
    '<img src="achievements/Silver-Bank.png"  hspace="5" width="65" height="65" title="Silver Banker: Made a deposit of $1,000 or more."">';
}
elseif ( $userp['bank_account'] >= 1 )
{
    echo 
    '<img src="achievements/Bronze-Bank.png"  hspace="5" width="65" height="65" title="Bronze Banker: Opened a bank account!"">';
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T10:59:16.373

我会通过在`mysql`表中再添加 1 列来做到这一点 -`achievement`使用`DEFAULT = 0`. 然后`achievement`使用您的标准添加徽章 -

```
<?php 
if ( $userp['bank_account'] >= 100000 )
{
   "UPDATE table SET `achievement` = 4"
} 
elseif ( $userp['bank_account'] >= 50000  )
{
   "UPDATE table SET `achievement` = 3";
}
elseif ( $userp['bank_account'] >= 1000 )
{
   "UPDATE table SET `achievement` = 2";
}
elseif ( $userp['bank_account'] >= 1 )
{
   "UPDATE table SET `achievement` = 1";
}
?> 
```

然后查看`achievement`徽章 -

```
<?php 
if ( $userp['achievement'] = 4 )
{
   echo 
   '<img src="achievements/Diamond-Bank.png"  hspace="5" width="65" height="65" title="Diamond Banker: Made a deposit of $100,000 or more!"">';
} 
elseif ( $userp['achievement'] = 3  )
{
   echo 
   '<img src="achievements/Gold-Bank.png"  hspace="5" width="65" height="65" title="Golden Banker: Made a deposit of $50,000 of more."">';
}
elseif ( $userp['achievement'] = 2 )
{
   echo 
   '<img src="achievements/Silver-Bank.png"  hspace="5" width="65" height="65" title="Silver Banker: Made a deposit of $1,000 or more."">';
}
elseif ( $userp['achievement'] = 1 )
{
   echo 
   '<img src="achievements/Bronze-Bank.png"  hspace="5" width="65" height="65" title="Bronze Banker: Opened a bank account!"">';
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:55:55.583

好吧，有几种可能性可以解决这个问题。您可以将用户的所有成就存储在数据库中并插入/选择它们。这样，即使余额下降，也不会丢失任何内容。

您还可以添加“总”银行账户，如果用户提取现金，该账户不会减少。这样，您可以`$userp['bank_account_total']`用于“成就检测”。

# java - 一对多关系

> ID：13550241
> 
> 赞同：1
> 
> 时间：2012-11-25T10:39:09.193
> 
> 标签：java, one-to-many

我的问题是关于存储与数据库的一对多关系（如[编程一对多关系](https://stackoverflow.com/questions/10086529/programming-a-one-to-many-relationship)）

让我们假设这个例子：我们有父母和孩子。每个父记录可以有许多子记录。

```
// Db storage:
// id name

public class Parent {
    Set<Childs> mChilds;
    private long mId;
    private String mName;
    // etc

    public Parent(String name) {
        this.mName = name;
    }

    public static Parent load(id) {
        // query database for all Parent attributes
        Parent p = new Parent("somename");

        // now its time to load set of child (1)
        Set<Child> children = Child.loadChildren(p);
    }
}

// Db storage
// id name parent_ref

public class Child {
    private Parent mParent;
    private String mName;

    public Child(String name, Parent parent) {
        this.mName = name;
        this.mParent = parent;
    }

    // loads a child with specific Id
    public static Child load(long id) {
        // query db like 
        Cursor c = db.query("child_table", new String[] {"id", "name", "parent_ref"}, "id = ?", new String[] {String.valueOf(id)});

        // now we have a cursor, we can construct child!
        // Oh my God! I call Parent.load, that calls loadChildren(3)
        return new Child(c.getColumn("name"), Parent.load(c.getColumn("parent_ref")));
    }

    public static Set<Child> loadChildren(Parent parent){ 
        // fetch all child ids, that given parent has
        List<long> childIds = getAllIds(parent);

        // for each id load child (2)
        Child c = Child.load(childId);
    }
} 
```

如您所见，我想通过给定的 ID 加载父级。Parent的load函数调用child的loadlChildren(call **(1)** )，它调用Child.load(call **(2)** )，它调用Parent.load( **3** )，因为它需要对parent进行引用！

所以有两个主要问题，因为我是 java dev 的新手。

1）有没有解决这个问题的方法？我做错了什么？2）我对 loadChildren 的调用将创建 n 个父母（n 个对 n 个对象的引用），而不是创建对一个对象的引用。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T10:53:38.280

为什么不实现某种缓存系统（可能使用[Java HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)），您可以在其中放置父对象及其子对象，而不是加载它们，仅在它们尚未在缓存中时才加载它们？如果它们已经在缓存中，请获取对它们的引用。

我还想看看：[Flyweight 模式](http://en.wikipedia.org/wiki/Flyweight_pattern)

或者我能想到的另一种解决方案是在父类中实现另一种方法：类似于“loadOnlyParent()”，它只加载父类（如果尚未加载）而不加载子类。并且仅在必要时实现子项的[延迟加载](http://en.wikipedia.org/wiki/Lazy_initialization)（如果尚未加载）。

# objective-c - 在 Objective-c 中为每个项目创建具有属性的数组

> ID：13550243
> 
> 赞同：3
> 
> 时间：2012-11-25T10:39:36.627
> 
> 标签：objective-c, arrays, properties, nsmutablearray

请告诉我，如何创建一个数组，其中每个元素都有许多属性。例如：

```
array:
  |
  |-item 1 ( property_1-"Name1", property_2-"LastName1", property_3-"Age1");
  |-item 2 ( property_1-"Name2", property_2-"LastName2", property_3-"Age2");
  |-item 3 ( property_1-"Name3", property_2-"LastName1", property_3-"Age2");
  |-… 
```

在这种情况下，数组的不同元素可以具有相同的属性，例如在上面发布的代码中-“ **item 3** ”具有“ **property 2 ”与“** **item 1** ”中的相同，并且“ **property 3 ” 与“****第 2 项**”中的相同

请告诉我，如何最好地做到这一点，如果不难，请写一个简单的例子或一些教程的链接。

先感谢您）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T10:54:06.753

我建议有两种方法：

**1.使用一个类来存储所有的属性**

这是一个例子：

```
@interface Wrapper : NSObject

@property (nonatomic, assign) NSString* property_1;
@property (nonatomic, assign) NSString* property_2;
@property (nonatomic, assign) NSString* property_3;

@end 
```

然后您可以将其用作字典：

```
NSString* value=[myWrapperInstance valueForKey: @"property_1"]; 
```

但是这里有替代解决方案：

**1\. 使用 NSDictionary 存储所有属性**

```
NSDictionary* dict= @{ @"property_1" : @"Name1" ,@"property_2" : @"Name2",  @"property_3" : @"Name3" }; 
```

那么解决方案就很简单了：

```
NSMutableArray* objects=[NSMutableArray new];
for(int i=0; i<N; i++)
{
    NSDictionary* dict= @{ @"property_1" : @"Name1" ,@"property_2" : @"Name2",  @"property_3" : @"Name3" };
    [objects addObject: dict];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T10:50:12.610

听起来你想要一个`NSArray`对象`NSDictionary`：

```
NSDictionary *dict1 = [NSDictionary dictionaryWithObjectsAndKeys:@"Name1", @"property_1", @"LastName1", @"property_2", @"Age1", @"property_3", nil);
NSDictionary *dict2 = [NSDictionary dictionaryWithObjectsAndKeys:@"Name2", @"property_1", @"LastName2", @"property_2", @"Age2", @"property_3", nil);
NSDictionary *dict3 = [NSDictionary dictionaryWithObjectsAndKeys:@"Name3", @"property_1", @"LastName3", @"property_2", @"Age3", @"property_3", nil);

NSArray *array = [NSArray arrayWithObjects:dict1, dict2, dict3, nil]; 
```

如果您想稍后更新它，那么您应该分别使用`NSMutableDictionary`和`NSMutableArray`。

如果您**不**`release`使用 ARC，则在使用完它们时需要对象。

# php - 链接不适用于 jquery

> ID：13550245
> 
> 赞同：0
> 
> 时间：2012-11-25T10:39:57.243
> 
> 标签：php, javascript, jquery

可能是一个非常简单的答案，但我似乎找不到可行的解决方案。我正在从 php 搜索脚本创建链接，它会根据查询生成链接。我已经编写了一个示例 jQuery 脚本来基于被单击的标签打开一个 div，但是当我单击链接时，什么也没有发生。我在萤火虫中看不到任何错误，并希望得到 somke 的帮助。谢谢你。

**更新**：添加了 html 并将 mailLink 从 id 更改为 class。

jQuery

```
$("a").click(function(e) {
        e.preventDefault();

        $('.mailShow').fadeIn(1500).html('This is the mailShow div');

    }); 
```

PHP

```
<?php

    while ($row = mysql_fetch_assoc($rsd))

{?>

    <div class="each_rec"><a href="#" class="mailLink"><?php echo $row['name_usr'];?>&nbsp;&nbsp;<?php echo $row['idcode_usr'];?></a></div>

<?php

}

    if($total==0){ echo '<div class="no-rec">No Record Found !</div>';}
?> 
```

HTML

```
<div id="content">

    <div class="search-background">

        <label><img src="loader.gif" alt="" /></label>

    </div>

       <div id="sub_cont">

        <div class="mailShow"></div>

    </div>

</div> 
```

从 firebug 生成的 HTML

```
<div class="each_rec"><a href="#" class="mailLink">Demo User&nbsp;&nbsp;DEMO</a></div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T10:43:12.473

在 jquery 中你有`.mailShow`，在 PHP 中你使用`id="mailLink"`. 您应该更改`.mailShow`为`#mailLink`.

[JSFiddle](http://jsfiddle.net/pqYR5/)用于测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T10:42:33.087

[JSFIDDLE](http://jsfiddle.net/hwvh6/)

试试这个代码：

```
$(document).ready(function () {
    $(document).on("click","a",function(e) {
            e.preventDefault();

            $('.mailShow').fadeIn(1500).html('This is the mailShow div');

        });
 });

<?php

    while ($row = mysql_fetch_assoc($rsd))

{?>

<div class="each_rec"><a href="#" class="mailLink"><?php echo $row['name_usr'];?>&nbsp;&nbsp;<?php echo $row['idcode_usr'];?></a></div>

<?php

}

    if($total==0){ echo '<div class="no-rec">No Record Found !</div>';}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T10:46:06.037

我看到两个可能的问题： 1\. 你没有使用 $(document).ready(); 并将您的代码放在其中。然后你需要把上面的代码准备好。2.您从ajax查询插入链接dinamycaly。因此，您需要改用 jquery 委托。

# iphone - iPhone：TableViewController nibName 错误，带有“initWithNibName:bundle:”

> ID：13550251
> 
> 赞同：4
> 
> 时间：2012-11-25T10:41:26.130
> 
> 标签：iphone, objective-c, ios, uitableview, nib

我有一个动态单元格`UITableViewController`，当有人点击一个单元格时，我想推送一个特定的视图控制器。所以我正在尝试使用预制的方法

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

但是当我进入模拟器并点击一个单元格时，这就是我得到的：

```
"NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle [...] with name 'AffichageVotesQuestionDuMomentViewController'. 
```

在该方法中，我有这个：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.

     AffichageVotesQuestionDuMomentViewController *detailViewController = [[AffichageVotesQuestionDuMomentViewController alloc] initWithNibName:@"AffichageVotesQuestionDuMomentViewController" bundle:nil];

    // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];

} 
```

`AffichageVotesQuestionDuMomentViewController`是我自己创建的自定义视图控制器。我还尝试创建另一个随机的，我得到了相同类型的错误。如果我将 to 设置`initWithNibName:`为`nil`，它会转到顶部有导航栏的视图控制器，但那是完全黑色的。

现在，我是一名初学 iPhone 程序员，对笔尖、笔尖名称等知之甚少。任何帮助表示赞赏。此外，我没有在情节提要或任何东西中做任何事情，因为我似乎正在以编程方式创建视图控制器并以这种方式推动。如果有一个很好的方法可以用 segue 来做，我也可以接受（但我需要知道被点击的单元格的行）。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T11:10:12.590

因为您使用的是 IB 故事板，所以我认为您应该这样做：

```
UIStoryboard*  sb = [UIStoryboard storyboardWithName:@"mystoryboard" bundle:nil];
UIViewController* vc = [sb instantiateViewControllerWithIdentifier:@"AffichageVotesQuestionDuMomentViewController"]; 
```

...而不是使用用于基于 xib 的经典方法的“initWithNibName”-initializer。

# c# - 如何在 C#.Net 中为错误和调试创建日志

> ID：13550252
> 
> 赞同：-1
> 
> 时间：2012-11-25T10:41:27.910
> 
> 标签：c#, logging

我创建了一个日志文件来维护所有登录到我的应用程序的用户。

代码是`

```
string strLogText = txtLogin.Text;
StreamWriter log;

if (!File.Exists("logfile.txt"))
{
log = new StreamWriter("logfile.txt");
}
else
{
log = File.AppendText("logfile.txt");
}

log.WriteLine(DateTime.Now);
log.WriteLine(strLogText);
log.WriteLine();

log.Close();` 
```

我想在我的应用程序中维护所有错误和调试日志。我应该如何从这些日志文件开始。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T10:44:10.740

您可以使用以下免费日志记录组件之一：

*   **[Log4net](http://logging.apache.org/log4net/release/features.html)**
*   **[日志](http://nlog-project.org/wiki/.NET_Logging_API)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T10:51:54.887

NLog 和 Log4Net 是记录异常等的好工具。

如果您的应用程序是基于 Web 的，那么我还建议您研究 Elmah，它是 IIS Web 应用程序的出色日志记录工具。

# c - 动态字符串数组

> ID：13550254
> 
> 赞同：1
> 
> 时间：2012-11-25T10:41:38.550
> 
> 标签：c, string, malloc, realloc

我必须动态分配单词数组。单词存储在由可变数量的空白字符分隔的文件中。我不知道文件中有多少个单词，它们可以有可变长度。

我有这个代码：

```
void readWord(FILE* stream, char *word, char first_c) {

    word[0] = first_c;
    char val;
    int wlen = 1;
    // isWhitespac is my function - tests if char is blank or '\n'
    while ((val = fgetc(stream)) != EOF && isWhitespace(val) == 0) {
        wlen++;
        word = realloc(word, (wlen+1) * sizeof (char));

        word[wlen-1] = val;    

    }
    word[wlen] = '\0';
}

int readList(const char *file) {

    FILE* f;
    char **arr;
    char val;
    int wcount = 0;

    arr = malloc(sizeof (char*));
    f = fopen(file, "r");

    while (fscanf(f, " %c", &val) == 1) {
        wcount++;
        arr = realloc(arr, wcount * sizeof (char *));

        arr[wcount - 1] = malloc(sizeof (char));  

        readWord(f, arr[wcount-1], val); 
        printf("%s\n", arr[wcount-1]);

    }

    for (int i = 0; i < wcount; ++i) {
        free(arr[i]);
    }

    free(arr);

    fclose(f);
    return 0;
} 
```

它似乎工作正常，它读取打印所有单词。但是当我用 Valgrind 运行程序时，错误太多，我找不到。有人可以帮我吗？（我知道我必须测试 malloc 和其他人是否正常，这只是一个测试函数。）

Valgrind 日志很长，我也应该发布它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T23:38:14.647

问题之一是您在 readWord 中执行 realloc。如果 realloc 分配了一个新缓冲区并且不只是扩展当前缓冲区，那么您的代码将崩溃（您将双重释放指针），这就是 Valgrind 的选择。为了解决这个问题，我将重写代码，使其返回一个指针而不是 void。

```
char * readWord(FILE* stream, char *word, char first_c) {
    word[0] = first_c;
    char val;
    int wlen = 1;
    // isWhitespac is my function - tests if char is blank or '\n'
    while ((val = fgetc(stream)) != EOF && isWhitespace(val) == 0) {
      wlen++;
      word = realloc(word, (wlen+1) * sizeof (char));
      word[wlen-1] = val;
    }
    word[wlen] = '\0';
    return word;
} 
```

然后将 readList 中的循环更改为：

```
while (fscanf(f, " %c", &val) == 1) {
  wcount++;
  arr = realloc(arr, wcount * sizeof (char *));
  arr[wcount-1]=malloc(sizeof(char));
  arr[wcount - 1] = readWord(f, arr[wcount-1],  val);
  printf("%s\n", arr[wcount-1]);
} 
```

# ruby - 用括号括起来

> ID：13550259
> 
> 赞同：2
> 
> 时间：2012-11-25T10:41:48.623
> 
> 标签：ruby, regex

我正在尝试在 ruby​​ 中将括号包裹在字符串周围，前提是它还没有被包裹：

```
"my string (to_wrap)" => "my string (to_wrap)"
"my string to_wrap" => "my string (to_wrap)" 
```

我试过类似的东西：

```
to_wrap = 'to_wrap'
regexp = Regexp.new "(?!\()#{to_wrap}(?!\))"
string.sub(regexp, "(#{to_wrap})") 
```

但它不起作用。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T10:43:00.503

你很亲密。不过，您的第一个负面环顾是前瞻。所以它着眼于 的第一个字符`to_wrap`。只需回顾一下：

```
"(?<!\()#{to_wrap}(?!\))" 
```

并且只是为您提供一个替代选项来逃避括号（这实际上是一个品味问题，但我发现它更容易阅读）：

```
"(?<![(])#{to_wrap}(?![)])" 
```

# url - 谷歌是否曾经使用猜测来查找网页？

> ID：13550260
> 
> 赞同：0
> 
> 时间：2012-11-25T10:41:50.450
> 
> 标签：url, search-engine

如果我在已被 google 索引的网站上有一个网页 (www.example.com/very_long_random_name.htm)，如果它没有传入链接，是否会被找到？

或者谷歌可以通过其他方法找到这些未链接的页面吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T10:46:30.000

不，它不会被索引。至少在理论上是这样。关键是没有传入链接，名称长且随机的事实并不重要。

但是，很难确定它是否真的不会被索引，因为传入的链接可能来自任何地方，而且您不知道。例如，某些包含链接的电子邮件可能会被编入索引（特别是如果对话中的一个参与者使用有问题的邮件提供商），或者有人可能会在某个论坛上发布链接等。

# android - Android - 向我的 Alphabet 应用程序添加声音

> ID：13550262
> 
> 赞同：0
> 
> 时间：2012-11-25T10:42:23.260
> 
> 标签：android

我一直在尝试向我的字母 android 应用程序添加声音，但似乎没有成功。下面是我的代码。

```
public class Sound extends Activity implements OnCompletionListener {
       /** Called when the activity is first created. */

    private ImageView b;
    private ImageView t;
    private ImageView j;
    private MediaPlayer mp;

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.alphabet);

        b=(ImageView)findViewById(R.drawable.b);
        t=(ImageView)findViewById(R.drawable.t);
        j=(ImageView)findViewById(R.drawable.j);

        b.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {

                b();
            }

        });

        setup();

        t.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {

                t();
            }               
        });
        setup2();
        j.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                j();
            }
        });
        setup3();
    }
        public void onCompletion(MediaPlayer mp) {
        stop();
    }

    private void stop() {
        mp.stop();

    }

    private void b() {
        mp.stop();
        loadClip();
        mp.start();

        b.setEnabled(true);
    }
    private void t() {
        mp.stop();
        loadClip2();
        mp.start();

        t.setEnabled(true);
    }
    private void j() {
        mp.stop();
        loadClip3();
        mp.start();

        j.setEnabled(true);
    }

    private void loadClip() {

        try {
            mp=MediaPlayer.create(this, R.raw.b);
            mp.setOnCompletionListener(this);

        }
        catch (Throwable t) {
            goBlooey(t);
        }
    }
    private void loadClip2() {

        try {
            mp=MediaPlayer.create(this, R.raw.t);
            mp.setOnCompletionListener(this);

        }
        catch (Throwable t) {
            goBlooey(t);
        }
    }

    private void loadClip3() {

        try {
            mp=MediaPlayer.create(this, R.raw.j);
            mp.setOnCompletionListener(this);

        }
        catch (Throwable t) {
            goBlooey(t);
        }
    }

    private void setup() {
        loadClip();
        b.setEnabled(true);
    }
    private void setup2() {
        loadClip2();
        t.setEnabled(true);
    }

    private void setup3() {
        loadClip3();
        j.setEnabled(true);
    }

    private void goBlooey(Throwable t) {
        AlertDialog.Builder builder=new AlertDialog.Builder(this);

        builder
            .setTitle("Exception!")
            .setMessage(t.toString())
            .setPositiveButton("OK", null)
            .show();
    }
} 
```

请您看一下我的代码，并让我知道在哪里或缺少什么。所有图像都在drawable中，所有剪辑都在raw中。问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:59:58.600

快速浏览您的代码，我会说您的 mp 不存在以便在第一次运行加载另一个剪辑之前停止它。

在顶部放置私有 MediaPlayer mp=null;

然后在每行显示 mp.stop(); 将其更改为 if(mp!=null) mp.stop();

# php - 为什么函数返回后全局数组为空？(PHP)

> ID：13550265
> 
> 赞同：0
> 
> 时间：2012-11-25T10:42:44.857
> 
> 标签：php, arrays, return-value, global

我有一个递归打开 HTML 页面并提取文章的函数。执行该函数后，返回的数组为 NULL，但我的跟踪步骤表明该数组实际上包含元素。我相信在返回数组时它会被重置。

**为什么数组包含函数中的元素，但返回后为NULL？**

这是函数（简化）：

```
function get_content($id,$page=1){
    global $content; // store content in a global variable so we can use this function recursively

    // If $page > 1 : we are in recursion
    // If $page = 1 : we are just starting
    if ($page==1) {
        $content = array();
    } 

    $html = $this->open($id,$page)) {

    $content = array_merge($content, $this->extract_content($html));

    $count = count($content);
    echo("We now have {$count} articles total.");

    if($this->has_more($html)) {
        $this->get_content($id,$page+1);
    } else {
        $count = count($content);
        echo("Finished. Found {$count} articles total. Returning results.");
        return $content;
    }
} 
```

这就是我调用函数的方式：

```
$x = new Extractor();
$articles = $x->get_content(1991);
var_export($articles); 
```

此函数调用将输出如下内容：

```
We now have 15 articles total.
We now have 30 articles total.
We now have 41 articles total.
Finished. Found 41 articles total. Returning results.
NULL 
```

**为什么数组包含函数中的元素，但返回后为NULL？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T10:47:28.097

尝试使用`return $this->get_content($id,$page+1);`而不是仅调用该函数。

如果只调用函数而不返回，“初始调用”将不会返回任何内容，并且返回值将丢失，以供后续调用该函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:54:12.853

如果您还没有这样做，请尝试在第一次函数调用之前声明 $content。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T12:12:14.347

不要使用全局变量。特别是如果它只是为了递归。

```
function get_content($id,$page=1, $content = array()){

    $html = $this->open($id,$page));

    $content = array_merge($content, $this->extract_content($html));

    if($this->has_more($html)) {
        return $this->get_content($id,$page+1, $content);
    } else {
        return $content;
    }
} 
```

请注意，我剥离了所有调试输出。

# git - Git，在 2 个分支上工作，在本地服务器上切换它们

> ID：13550266
> 
> 赞同：0
> 
> 时间：2012-11-25T10:42:55.827
> 
> 标签：git, git-branch

很抱歉这是多么基本......但是远程，我有一个主分支和一个我正在处理的开发分支。我这样查看大师：

```
git clone https://github... 
```

我可以像这样查看开发分支：

```
git clone -b my-branch https://github... 
```

以前，我在同一目录中本地克隆了两个分支，我可以看到它们与

```
git branch 
```

我通过在本地构建 dev 分支然后将其推送到服务器来实现这一点。然后（进行实验）我删除了所有内容以查看是否可以重新创建设置，从而将 master 和 dev 分支都放在同一目录中，并且可以在它们之间切换。

另外，随着我​​的开发，我想检查本地服务器上的 dev 分支是什么样子，然后切换到我的本地服务器上查看 master 分支的样子。请问这个问题一般是怎么解决的？我是否需要将每个分支放在单独的目录中并在该目录中启动服务器？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:56:55.610

如果您`git clone`两次进入不同的位置，那么您并没有真正按照预期的方式使用分支。

你应该`git clone`只做一次，然后你可以`git checkout`去任何你想要的分支。默认情况下，在 之后`git clone`，您将只有一个本地分支（可能`master`），但您可以通过 探索服务器上存在哪些分支`git branch -av`。您还可以通过`git checkout --track origin/another-branch`- 这将创建本地跟踪分支结帐到服务器分支`another-branch`。

无论如何，你真的应该花一些时间阅读好的 git 书籍，例如[Progit](http://git-scm.com/book)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:55:37.513

我不知道我是否说对了:) 但是如果你克隆了一些 repo，你就会把它作为**master**分支。然后，如果您想拥有与另一个分支相同的存储库，则不必单独克隆它:) 您需要做的就是：

```
git checkout -b branch_name 
```

它会分支你的主人。然后您可以将您的**master**或**branch_name**推送到 REMOTE 分支**master**或创建新的远程分支**branch_name**，我认为这就是您想要的。但是还有另一种克隆到分支的方法，如果你想克隆，这很有用让我们说远程分支 A 到你的本地分支 B，这意味着如果你想跨越它们:) 但是如果你没有回答你的问题' t 将您的分支推送到远程仓库，不幸的是它消失了。我建议您阅读一些文档： http: [//git-scm.com/documentation](http://git-scm.com/documentation)关于分支和检查它确实有助于了解 git。

# r - 在 read.zoo 中声明年度数据

> ID：13550267
> 
> 赞同：0
> 
> 时间：2012-11-25T10:42:56.770
> 
> 标签：r, zoo

我正在尝试使用包中的`read.zoo`函数读取有间隙的年度数据`zoo`。我很难找到`FUN`声明数据为年度数据的数据。数据集位于[此处](http://data.is/U5605W)。

我正在尝试的函数调用是

```
tsGDP <- read.zoo("us-gross-domestic-product-192919.csv", sep=",", format="%Y", 
 regular=FALSE, header=TRUE, index.column=1)
plot(log(tsGDP)) 
```

这很好用，但是当我尝试绘制该系列的 ACF 时它会窒息

```
> acf(tsGDP)
Error in na.fail.default(as.ts(x)) : missing values in object 
```

[这个 R-list 帖子](https://stat.ethz.ch/pipermail/r-help/2009-January/185414.html)似乎表明这是因为我没有正确声明年度数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T13:18:20.403

没有数据，很难重现问题。但是，从**acf的文档**

*默认情况下，不允许缺失值。如果 na.action 函数通过缺失值（如 na.pass 那样），则从完整案例中计算协方差。*

为什么不尝试

```
 acf(x = tsGDP, na.fail = na.pass) 
```

# c - 将结构复制到 char 缓冲区

> ID：13550272
> 
> 赞同：0
> 
> 时间：2012-11-25T10:43:20.557
> 
> 标签：c

```
#include <stdio.h>
#include <time.h>

int main ()
{
   time_t  time_raw_format;
   struct tm * ptr_time;
   char *buff;
   time ( &time_raw_format);
   ptr_time = localtime ( &time_raw_format );
} 
```

如何将它复制到一个`*buff`，返回类型`ptr_time`是`struct tm*`，我的实际目标是将系统日期和时间复制到一个字符缓冲区以及如何计算返回的大小`localtime`，`*ptr_time`如果我这样做是一个指针`sizeof`，我得到的值为 4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:48:59.177

如果您正在寻找如何将人类可读的时间放入字符串中，这里有一个解决方案：

```
#include <time.h>

char *buff = asctime(ptr_time); 
```

的内存`buff`由`ctime`和静态分配`asctime`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:48:35.920

如果理解正确，您想转换`struct tm`为字符串，请使用[strftime()](http://linux.die.net/man/3/strftime)：

```
char buf[200];
strftime(buf, sizeof(buf), "%c", ptr_time); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T10:48:45.523

您可以将时间格式化为字符缓冲区[`strftime()`](http://linux.die.net/man/3/strftime)

```
char buff[20];
strftime(buff, sizeof(buf), "%Y-%m-%d %H:%M", ptr_time); 
```

`ptr_time`是一个指针，`*ptr_time`正在取消引用一个指针。`sizeof(ptr_time)`在 32 位系统上给出值 4\. 的大小`struct tm`是`sizeof(struct tm)`或`sizeof(*ptr_time)`，它给出了指针指向的任何内容的大小。

# css - css div定位

> ID：13550284
> 
> 赞同：0
> 
> 时间：2012-11-25T10:45:11.660
> 
> 标签：css, html, alignment

嗨，这是一个快速的 css 101，我正在与对齐作斗争，也许有人可以帮忙

![在此处输入图像描述](../Images/940818bcabaedbd07d86a074f1d3ef60.png)

另一方面，我想问：

1.  构建 html div 时正确的思维方式是什么 - 预先限制 div 的大小并覆盖：隐藏它是 contect -或者 - 让内部 div 推动父级并因此调整它的大小。

2.  div 首选哪些措施，以便最适合不同的分辨率？rems/precents？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T11:34:53.327

包装器应该是内容的容器

```
<div id="wrapper"> 
<div id="top"></div>
    <div id="content"><p>content here</p></div>
</div>
<div id="footerbg"></div> 
```

​</p>

我让页脚对齐到包装器外部的底部，如果您想将顶部移到外面也可以，但请记住，您还必须调整底部填充以补偿其高度。

在此处查看 jsFiddle：http: [//jsfiddle.net/F577v/9/](http://jsfiddle.net/F577v/9/)

回答您的 QN：

1.  根据具体情况，我将始终尝试允许内容调整 div 的大小 - 但我确保我有填充和边距来反映设计。

2.  我一直使用 px 计数来调整大小，并在 css 中使用[媒体类型](http://www.w3schools.com/css/css_mediatypes.asp)来补偿不同的分辨率

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T11:44:55.797

您可以使用 css 使其具有固定位置：

```
div {
   position: fixed;
   top: 400px;
   bottom: 0;
   left: 0;
   right: 0;
} 
```

# ruby-on-rails - ActiveRecord::Migration 辅助方法的规范

> ID：13550288
> 
> 赞同：0
> 
> 时间：2012-11-25T10:46:39.220
> 
> 标签：ruby-on-rails, activerecord, rspec, migration

我在里面添加了`monetize`和`demonetize`助手`ActiveRecord::Migration`，`ActiveRecord::ConnectionAdapters::TableDefinition`并`ActiveRecord::ConnectionAdapters::Table`通过[那个拉请求](https://github.com/RubyMoney/money-rails/pull/56/files "更改的文件")。

[该文件](https://github.com/FUT/money-rails/blob/e848a054eb16ddc4bd8531db68ca18649f6e709d/spec/dummy/db/migrate/20121123202309_test_monetize_migrations.rb "示范性迁移")显示了使用示例。因此，您将一目了然地了解发明的变化。（有用）

但我不知道如何测试我的助手。我可以用什么方式为他们编写规范？我在规范文件中编写迁移并手动运行它们的所有尝试都失败了。迁移手动运行没有更改表（或者我无法检测到更改）并且没有抛出任何异常。

我的尝试示例：

```
describe 'monetize' do
  class MonetizeMigration < ActiveRecord::Migration
    def change
      create_table :items
      monetize :items, :price
    end
  end

  class Item < ActiveRecord::Base; end

  it 'should monetize items' do
    MonetizeMigration.up    #=> nil
    Item                    #=> Item(has no table)
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:18:39.143

这在控制台中对我有用：

```
[4667]foo@bar:~/dev/ror/foo$ 导轨 c
加载开发环境（Rails 3.2.9）
irb(main):001:0> class MyMigration def change
irb(main):003:2> create_table :foo
irb(main):004:2> 结束
irb(main):005:1> 结束
=> 无
irb(main):006:0> MyMigration.new.change
-- create_table(:foo)
   (4.5ms) 选择 sqlite_version(*)
   （133.2 毫秒）创建表“foo”（“id”整数主键自动增量不为空）
   -> 0.2362s
=> []

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:15:55.653

您可以直接在数据库连接上执行任何迁移辅助方法：

```
ActiveRecord::Base.connection.create_table :items 
```

感谢@happy_user 在第一次尝试中显示我的错误。我认为将来有人可能会使用我的最新解决方案，所以我将其留在这里。

# r - 如何直接将进程从本地 R 传递到 Amazon EC-2 实例？

> ID：13550292
> 
> 赞同：1
> 
> 时间：2012-11-25T10:47:04.260
> 
> 标签：r, parallel-processing, amazon-ec2, snowfall

我一直在研究在 EC2 上运行 R，但我想知道这个设置与并行/集群计算有什么关系。我环顾四周，但找不到有关此的教程。

基本上我想做的是让 R (Rstudio) 在我的笔记本电脑上运行，并完成大部分工作，但是当我有一个大的操作要运行时，明确地将它传递给一个 AWS 从属实例来完成所有工作繁重的工作。

据我所知，降雪/降雪​​套餐似乎是答案......但我不太确定如何。

我正在使用[http://bioconductor.org/help/bioconductor-cloud-ami/（ssh](http://bioconductor.org/help/bioconductor-cloud-ami/)之一）上的教程来运行 R。本教程确实提到了并行/集群，但它似乎是在不同的 AWS 实例之间。

任何帮助都会很棒。干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T16:26:53.517

如果您只需要一个从属实例，我发现在实例上并行运行它而不是使用您的 PC 作为主实例是最简单的。

您可以在 PC 上编写脚本并将其推送到运行 R 的多核服务器，然后使用所有内核并行运行它。

例如，将此上传到 4 核 AWS 实例：

```
library(snowfall)
sfInit(parallel=TRUE,cpus=4,slaveOutfile="log.txt")

vars = c(1:100)

#send variables to all processors
sfExportAll()

#Run this in parallel
results = sfLapply(vars, exp)

#Stop parallel processing
sfStop()

#save results
save(results, file = "results.RData") 
```

# activerecord - Yii ActiveRecord 字段只返回最近添加的列的默认值

> ID：13550296
> 
> 赞同：0
> 
> 时间：2012-11-25T10:47:54.280
> 
> 标签：activerecord, yii

**Yii 1.1.12：** 当我选择用户模型的一个实例时，我得到某些属性/列的默认值。这发生在我最近（手动）添加到数据库的列中：

```
$user->locale    // returns null (= default value) 
```

如果我在数据库中设置一个新的、不同的默认值（通过 phpMyAdmin），我将收到这个新的默认值。

该表的其他列做得很好：

```
$user->email     // returns the correct value 
```

如果我运行 SQL 查询，我将收到**正确的值：**

```
SELECT locale FROM tbl_users WHERE tbl_users.id = :userID LIMIT 1 
```

由此我推断数据库很好。问题一定出在 Active Records 实现中。

我希望 Yii 的**神奇方法**只是找到每个数据库列并将它们作为（虚拟）属性添加到模型中。这似乎正在发生，但不知何故插入了数据库列的默认值。

我究竟做错了什么？

**解决方案：**正如 Sam 建议的那样，删除**defaultScope()**就可以了。显然，AR 属性必须列在**defaultScope()**中才能被识别。或者，可以完全删除**defaultScope() 。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:21:51.750

Have you cleaned up Yii cache after adding deafault values to MySQL?

# php - PHP Madlibs 麻烦

> ID：13550297
> 
> 赞同：0
> 
> 时间：2012-11-25T10:48:02.803
> 
> 标签：php, class, foreach

我无法弄清楚这段代码有什么问题。它只替换`{info}`短代码，其他一切保持原样。

这是代码：

```
class Compliment_Gen {

  public $madlib; 
  public $madlib_answers;
  public $madlib_line;
  public $new_compliment;

  //Sets up 'Madlibs' Arrays
  public function __construct()
  {
    $this->madlib = array("{great} {post}!", "{great} {post}! {thanks}!", 
                           "{great} {post}! {thanks} for this {info}!", 
                           "{great} {post}!, I've been looking for this {info}. {thanks}!", 
                           "{great} {info}.", "{great} {info}. {thanks}!", 
                           "I've been {looking for} this {info} for quite some time.", 
                           "{thanks} for this!", "{thanks} for this {great} {post}!"
                          );

    $this->madlib_answers = array('good job' => array ("good job", "nice work", "nicely done!", "excellent work!", "great job!"),
                         'post' => array ( "post", "article", "write up", "blog post", "piece"),
                         'great' => array ( "great", "amazing", "fantastic", "excellent", "solid" ),
                         'thanks' => array ( "thanks", "thank you", "thanks so much", "thank you so much"),
                         'looking for' => array ( "looking for", "looking everywhere for", 
                                                 "searching for", "searching everywhere for", "hoping for", "hoping to find"),
                         'info' => array ( "info", "information")
                         );

    $this->compliment_gen($this->madlib, $this->madlib_answers);
  }

  //One Random Compliment Produced
  public function compliment_gen($madlib, $madlib_answers)
  {
    $this->madlib_line = $this->madlib[rand(0, count($this->madlib)-1)];
    foreach( $madlib_answers as $seed => $spins)
    {
        $this->new_compliment = str_replace("{" . $seed . "}", $spins[ rand(0, count($spins)-1)], $this->madlib_line );
    }

    echo $this->new_compliment;
  }
} 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:55:00.337

尝试如下，因为`str_replace`给你替换字符串所以每次你需要替换值来替换新值。就像在您当前的代码中一样，您一次又一次地替换您的实际语句

```
$this->madlib_line = $this->madlib[rand(0, count($this->madlib)-1)];
$this->new_compliment = $this->madlib_line;

foreach( $madlib_answers as $seed => $spins)
    {
        $this->new_compliment = str_replace("{" . $seed . "}", $spins[ rand(0, count($spins)-1)], $this->new_compliment );
    } 
```

# triangulation - CrossProduct 和 DotProduct - 展开这些方程

> ID：13550298
> 
> 赞同：0
> 
> 时间：2012-11-25T10:48:15.403
> 
> 标签：triangulation, dot-product, cross-product

我正在尝试使用来自[http://www.blackpawn.com/texts/pointinpoly/default.html](http://www.blackpawn.com/texts/pointinpoly/default.html)的公式，这是两个选项中的上一个。（我已经用过较低的）。

我似乎无法理解 CrossProduct(ba, p1-a) 等。有人可以为我扩展这些。他们在下面。

```
function SameSide(p1,p2, a,b)
    cp1 = CrossProduct(b-a, p1-a)
    cp2 = CrossProduct(b-a, p2-a)
    if DotProduct(cp1, cp2) >= 0 then return true
    else return false 
```

据我了解，他们应该出来解决这个问题。

```
##  Using the following as p=x,z, a=x,z, b=x,z, c=x,z
##  p=4,1 a=2,0 b=4,3 c=0,4
function SameSide(px, pz, ax, az, bx, bz, cx, cz){
    cp1x=(cx-bx*px-bx)
    cp1z=(cz-bz*pz-bz)
    cp2x=(cx-bx*ax-bx)
    cp2z=(cz-bz*az-bz)
    DotProd=(cp1x*cp2x+cp1z*cp2z)
} 
```

但是当在 Excel 中尝试这个时，我又得到了错误的答案。

请帮忙！8-|

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T18:56:14.100

你的`DotProduct`计算是正确的。`v`但是，2 个向量和的叉积`w`是：

```
cpx = vy*wz - vz*wy
cpy = vz*wx - vx*wz
cpz = vx*wy - vy*wx 
```

在您的情况下，`vx = bx-ax`vy = `by-ay`and`vz=bz-az`和 wx= `p1x-ax`（或分别`p2x-ax`）和类似地 for `y`and `z`。

# javascript - jquery 可排序事件

> ID：13550307
> 
> 赞同：0
> 
> 时间：2012-11-25T10:49:14.853
> 
> 标签：javascript, jquery, jquery-ui-sortable

我有两个列表，一个是 Draggale，另一个是可排序的。当我将项目从可拖动项目移动到可排序项目时，将接收跨度和跨度 X 标记。但问题是，当我稍后在可排序项目中对项目进行排序时，会再收到一次。然后我有类似 Item 1 XX 的东西，每次你排序新的 x （或拖动）时都会再次出现。

我怎样才能解决这个问题 ？

```
$(function() {
 $( ".draggable" ).draggable({ 
    helper: "clone", 
    connectToSortable: ".sortable" 
  });
 $(".sortable").sortable({
        stop: function(event, ui) {
            ui.item.html(ui.item.text()+'<span class="remove">X</span>');
        }
 });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T10:55:40.620

检查`span.remove`物品里面没有吗？

```
$(function() {
    $( ".draggable" ).draggable({ 
        helper: "clone", 
        connectToSortable: ".sortable" 
    });
    $(".sortable").sortable({
        stop: function(event, ui) {
            if(!ui.item.find('span.remove').length) {
                ui.item.html(ui.item.text()+'<span class="remove">X</span>');
            }
        }
    });
}); 
```

# jquery - 延迟后替换类名

> ID：13550309
> 
> 赞同：2
> 
> 时间：2012-11-25T10:50:04.623
> 
> 标签：jquery

我会生成每个`<td>`都有**class="A" 的表**

```
<td class="A"> 
```

现在如何在使用 jquery 延迟一段时间后用**B类替换****A**类？这样延迟输出后将是

 **```
<td class="B"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T10:54:28.503

```
// Change class from A to B after 1000 ms
setTimeout(function() {
  $("td.A").removeClass("A").addClass("B");
}, 1000); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T10:52:05.970

```
$('td.A').delay(500).attr('class', 'B'); 
```

或者

```
$("td.A").delay(500).queue(function(next){
    $(this).attr("class", "B");
    next();
}); 
```**

# java - android zxing 意图集成器

> ID：13550315
> 
> 赞同：0
> 
> 时间：2012-11-25T10:50:32.247
> 
> 标签：java, android

如果您决定扫描 QR 码（使用 zxing）并将其存储在私人存储中，我编写了以下代码，但如果您决定取消扫描，它会崩溃并且之前存储的文件内容会消失。

我认为这可能是一个设计错误，不知道为什么。

下面是相关代码

```
...

/**
 * menu generation
 */
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu, menu);
    return true;
}

/**
 * menu handling
 */
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    Context context = getApplicationContext();
    Toast toast = Toast.makeText(context, "", Toast.LENGTH_LONG);
    toast.setGravity(Gravity.FILL_HORIZONTAL, 0, 0);
    switch (item.getItemId()) {
        case R.id.qrScan:
            IntentIntegrator integrator = new IntentIntegrator(this);
            integrator.initiateScan();
            return true;
        case R.id.qrReset:
            File dir = getFilesDir();
            File file = new File(dir, qrCodeFile);
            boolean deleted = file.delete();
            return true;
        case R.id.appClose:
            this.finish();
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 

...

    public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
    Context context = getApplicationContext();
    Toast toast = Toast.makeText(context, "", Toast.LENGTH_SHORT);
    if (scanResult != null) {
        FileOutputStream fos = null;
        CharSequence text = scanResult.getContents();
        try {
            fos = openFileOutput(qrCodeFile, Context.MODE_PRIVATE);
            try {
                fos.write(text.toString().getBytes());
                fos.close();
                toast.setGravity(Gravity.FILL_HORIZONTAL, 0, 0);
                toast.setText("Code saved");
                toast.show();
            } catch (IOException ex) {
                toast.setGravity(Gravity.FILL_HORIZONTAL, 0, 0);
                toast.setText("Invalid code");
                toast.show();
                Logger.getLogger(MainActivity.class.getName()).log(Level.SEVERE, null, ex);
            }
        } catch (FileNotFoundException ex) {
                toast.setGravity(Gravity.FILL_HORIZONTAL, 0, 0);
                toast.setText("Error while saving");
                toast.show();
            Logger.getLogger(MainActivity.class.getName()).log(Level.SEVERE, null, ex);
        }
    }   else {
        toast.setGravity(Gravity.FILL_HORIZONTAL, 0, 0);
        toast.setText("Invalid code");
        toast.show();           
    }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:00:55.713

您需要检查`resultCode`. 如果取消扫描，则没有关于条形码值的信息。使用`resultCode`可以检查操作是否成功。

```
if(resultCode == RESULT_OK) {
    // scan successful
} else {
    // no result
} 
```

# cxml - Heritrix：如何从镜像中排除除 pdf 之外的所有内容？

> ID：13550316
> 
> 赞同：0
> 
> 时间：2012-11-25T10:50:51.427
> 
> 标签：cxml, heritrix

我找到了这个主题[如何从 heritrix 爬网中排除除 text/html 之外的所有内容？](https://stackoverflow.com/questions/3493786/how-do-i-exclude-everything-but-text-html-from-a-heritrix-crawl)

我已经把 bean 改成了这个

```
 <property name="shouldProcessRule">
  <bean class="org.archive.modules.deciderules.ContentTypeMatchesRegexDecideRule">
    <property name="decision" value="ACCEPT" />
    <property name="regex" value="^application/pdf.*"/>
  </bean>
</property>

</bean> 
```

但是 heritrix 仍然将每个文件保存到镜像目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T22:05:05.077

我相信您在接受规则之上缺少拒绝规则。我有以下工作：

```
<property name="shouldProcessRule">
  <bean class="org.archive.modules.deciderules.DecideRuleSequence">
    <property name="rules">
      <list>
        <bean class="org.archive.modules.deciderules.RejectDecideRule">
        </bean>
        <bean class="org.archive.modules.deciderules.ContentTypeMatchesRegexDecideRule">
          <property name="decision" value="ACCEPT" />
          <property name="regex" value="^application/pdf.*"/>
        </bean>
      </list>
    </property>
  </bean>
</property> 
```

这会拒绝所有内容，然后接受以下规则中列出的所有内容。

# android - Android访问其他应用方法？

> ID：13550318
> 
> 赞同：1
> 
> 时间：2012-11-25T10:51:10.973
> 
> 标签：android, android-service

我想为我的主应用程序创建“插件”。这个插件将只公开一种方法：

```
String getData(String param1, String param2); 
```

此方法将连接到网络服务器并下载数据。我不想将此代码放在主应用程序中。

应该如何做到这一点？我应该使用远程服务（https://github.com/commonsguy/cw-advandroid/tree/master/AdvServices/）还是有其他（更好的）解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T10:55:35.903

您可以实现自己的[内容提供程序](http://developer.android.com/guide/topics/providers/content-providers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T11:04:57.733

正如@fardjad 所说，它可以是 ContentProvider，也可以是导出的服务。但为了澄清，您希望您的应用程序将此服务公开给其他应用程序，对吗？

# css - CSS 渐变未在 Windows Phone 8 WebBrowser 控件中呈现

> ID：13550327
> 
> 赞同：0
> 
> 时间：2012-11-25T03:01:51.580
> 
> 标签：css, windows-phone-8

我面临一个问题，在 Windows Phone 8 的 WebBrowser 控件中没有呈现 CSS3 背景。但是在 Windows Phone 8 的 WebBrowser 中打开相同的 HTML 时，它呈现渐变

我使用的 HTML 是：

```
<html>
<head>
<meta name="viewport" content="width=320, user-scalable=no, minimum-scale=1, maximum-scale=1"/>
</head>
<body style="margin:0px;overflow:hidden;"> 
        <div id="im_c" style="height:48px;width:100%25;  background: -ms-linear-gradient(
             bottom,                
             #432100 30%,               
             #00AAAA 70%);"> 
            <div style="margin:0 auto;width:320px;">
                Test
                </div> 

        </div> 
        <style> 
            body {margin:0px} 
        </style> 
</body> 
```

在 Windows Phone 8 中，我使用如下 HTML：

```
WebBroswer WebView = new WebBrowser();
WebView.Height = 100;
WebView.Width = 400;
WebView.NavigateToString(@"<html><head><meta name=""viewport"" content=""width=320, user-scalable=no, minimum-scale=1, maximum-scale=1""/></head><body style=""margin:0px;overflow:hidden;""> <div id=""im_c"" style=""height:48px;width:100%25; background: -ms-linear-gradient(         bottom,                 #432100 30%,                #00AAAA 70%);""> <div style=""margin:0 auto;width:320px;"">Test</div></div> <style> body {margin:0px} </style> </body></html>"); 
```

在这种情况下，CSS 渐变是不可见的。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-11T20:40:24.947

WebBrowser 控件在 IE5 Quirks 模式下运行，渐变在该模式下不可用。

# arrays - 在 MIPS 程序集中访问数组时出错

> ID：13550329
> 
> 赞同：0
> 
> 时间：2012-11-25T10:52:52.580
> 
> 标签：arrays, assembly, mips

我制作了这个代码来查找两个数字的 LCM。这是有问题的起始块。我试图找出问题所在，但无法弄清楚。当我尝试加载字或存储字时，它给了我未对齐地址和其他异常的错误。这是代码：

```
.data

user: .asciiz "enter first number\n"
user2: .asciiz "enter second number\n"

array1: .space 500
array2: .space 500
array3: .space 500

.text

main:

la $a0,user
li $v0,4
syscall

li $v0,5
syscall

move $s0,$v0

la $a0,user2
li $v0,4
syscall

li $v0,5
syscall

move $s1,$v0

li $t0,0
li $t1,0
li $t2,2    
li $t3,3
li $t4,0
li $t5,5
li $t6,7
li $t7,0
li $t8,0
li $t9,0
li $s8,0

la $t8,array1
la $t9,array2

j Loop1

Loop1:

div $s0,$t2

mflo $s2
mfhi $s3 # remainder

beq $s2,1,Loop2

xor $s5,$s3,$0

beq $s5,1,Odd3

add $t4,$t7,$t8

sw $t2,0($t4)  # error

addi $t7,$t7,4

j Loop1 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:07:42.943

如果它抱怨地址不对齐，那么你应该去看看它为什么不对齐。汇编程序通常足够聪明，可以适当地对齐数据，但是您使用的`.space`指令没有任何类型（因此对齐）信息。碰巧你的字符串使数组不对齐。您可以通过在之前手动添加`.align 2`指令来解决此问题`array1`。

# c# - 如何在 C#.net 中使用网页调度程序

> ID：13550330
> 
> 赞同：0
> 
> 时间：2012-11-25T10:53:08.750
> 
> 标签：c#, javascript, asp.net

在一个 .aspx 网页中，我在两个不同的 <div> 中有 2 个联系人详细信息，如下所示

```
<div id="primaryContact"> 
    Name - betty quay 
    Cell - 9867452389
    designation - Build 
</div>

<div id="secondryContact"> 
    Name - francesco maitire 
    Cell - 9867452389
    designation - Build 
</div> 
```

在这里，我想在一周的隔天显示每个 div。我该怎么做，使用 ASP.NET 或 Javascript？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T11:06:22.357

您可以像这样在 C# 中执行此操作：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        ShowContactAlternate();
    }

    private void ShowContactAlternate()
    {
        if ((int)DateTime.Now.DayOfWeek % 2 == 0)
            primaryContact.Visible = true;
        else
            secondaryContact.Visible = true;
    } 
```

还要确保将标记更改为类似的内容，并将属性添加`runat="server`到`Visible="False"`div"：

```
<div id="primaryContact" runat="server" Visible="False"> Name - betty quay Cell - 9867452389 designation - Build </div>
<div id="secondryContact" runat="server" Visible="False"> Name - francesco maitire Cell - 9867452389 designation - Build </div> 
```

编辑：

如果您想每周轮换一次，您可以这样做：

创建这个辅助函数：

```
private int GetWeekOfYear(DateTime date)
{
    return CultureInfo.CurrentCulture.Calendar.GetWeekOfYear(date, 
            CalendarWeekRule.FirstFourDayWeek,
            DayOfWeek.Monday);
} 
```

你可以在你的 if 语句中使用它`ShowContactAlternate`：

```
if (GetWeekOfYear(DateTime.Now) % 2 == 0) 
```

由于每年有 52 周，因此您必须确保不会在每个新年都遇到麻烦。应该不是要解决的问题。

# crossrider - 向用户提供有关新网站内容的通知的扩展程序

> ID：13550340
> 
> 赞同：0
> 
> 时间：2012-11-25T10:54:18.627
> 
> 标签：crossrider

我有一个每天更新两次的新闻网站，我想开发一些东西，让我的用户知道我的网站中有新内容时，它会弹出一个通知，每个内容只有一个通知它的声音很容易，我面临的问题是我如何在不重新加载每个页面的情况下在 crossrider 中高效地调用数据库？

我现在是怎么做的（效率不高）我在我的服务器 php 文件中有发布最新消息的 id，crossrider 读取该文件并为每个 id 它调用 crossrider db 并检查该 id 是否存在，如果是的话用户已经收到关于该内容的通知并且不应该被通知，如果它不存在则通知用户。因此，您可以看到页面的每次重新加载，扩展程序都会调用我的服务器和数据库服务器。有更好的方法来构建它吗？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:55:59.763

如果我正确理解您的查询，您可以通过使用[appAPI.db.getList](http://docs.crossrider.com/#!/api/appAPI.db-method-getList)调用 Crossrider db来获得所有数据库项的数组（而不是为每个 id 调用数据库），然后处理 id他们。

如果您提供扩展 ID，我很乐意研究其他提高算法效率的方法。

# c - 使用 ncurses 接收异步用户和外部输入

> ID：13550343
> 
> 赞同：3
> 
> 时间：2012-11-25T10:54:27.357
> 
> 标签：c, input, ncurses

我正在制作一个由键盘玩家控制的 2 人游戏，同时使用消息队列从服务器程序接收输入。最初我尝试在父进程中实现播放器控制台并让子进程对来自服务器的消息做出反应，但每次我用子进程修改屏幕时，它都会删除我在父进程中所做的所有更改 - 在其他换句话说，这些过程有单独的屏幕。看起来必须有一个进程同时管理键盘输入和服务器输入，但我不知道如何异步执行此操作。

有谁知道该怎么做？或者，我可以使用哪些其他库来制作带有 GUI 的游戏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T15:55:59.637

好的，如果有人感兴趣，我有解决方案。我使用来自 unistd.h 的 STDIN_FILENO 流和 poll 函数从键盘和管道读取数据，该管道通知来自服务器的消息。

# java - Java：使用新的模式字母扩展 SimpleDateFormat

> ID：13550347
> 
> 赞同：3
> 
> 时间：2012-11-25T10:54:44.470
> 
> 标签：java, date, simpledateformat, hebrew

Java 的[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)用于将 Date 对象格式化为字符串。格式化程序支持各种*模式字母*，它们表示日期字段的文本表示。例如，`yy`是两个字母的年份、`yyyy`四个字母的年份和`E`星期几。

例如，`SimpleDateFormat`用 初始化的A`yyyy.MM.dd G 'at' HH:mm:ss z`会将日期格式化为`2001.07.04 AD at 12:08:56 PDT`.

我想在 SimpleDateFormat 中添加一些模式字母。例如，想要`C`表示希伯来语工作日 ( `יום ראשון`, `יום שני`, ...)。

用这些新的模式字母扩展 SimpleDateFormat 的正确方法是什么？我能找到的唯一在线示例[似乎有些复杂](http://home-1.worldonline.nl/~bmc88/java/sbook/035.html)。我只能接受格式化，无需解析。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T11:02:27.300

`E`已经可以用来获取星期几。如果您希望它使用希伯来语，则[使用希伯来语语言环境初始化 SimpleDateFormat 实例](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html#SimpleDateFormat%28java.lang.String,%20java.util.Locale%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T11:02:16.103

据我所知，SDF 不是可扩展的，因此每个日历字段格式都被硬编码为一种方法：（。我要做的是创建一个包装器对象并检测特殊（由我处理的字符）和格式输出由我的拥有混合格式我会将格式划分为我的格式字符之前和之后的内容，并将它们传递给原始 SDF，然后将结果粘合在一起。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-05-08T00:15:33.087

# *java.time*

现代[`DateTimeFormatter`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/format/DateTimeFormatter.html)几年前被`SimpleDateFormat`JSR 310 取代。

研究该类 JavaDoc 以了解它的许多格式化代码。虽然与课程中使用的代码大体相似`SimpleDateFormat`，但也存在一些差异。

此类可以[自动为您本地化](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/format/DateTimeFormatter.html#ofLocalizedDateTime(java.time.format.FormatStyle))。因此，您可能不需要定义任何格式模式。

如果您只想本地化星期几的名称，请使用[`DayOfWeek::getDisplayName`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/DayOfWeek.html#getDisplayName(java.time.format.TextStyle,java.util.Locale))method.

# c# - 反转 typeof 以使用 Linq 字段

> ID：13550353
> 
> 赞同：0
> 
> 时间：2012-11-25T10:55:07.083
> 
> 标签：c#, linq, reflection, casting

我想使用 Linq 通过 ColumnName 动态选择 DataTable 列，但是要使用 Field<> 我必须显式地将它们强制转换或将所有内容装箱到一个对象中，这效率不高。

我试过了：

```
string[] colsNames = new[] { "Colum1", "Colum2" };
DataTable dt = StoredProcedure().Tables[0];

var cols = dt.Columns.Cast<DataColumn>().Where(c => cols.Contains(c.ColumnName));

if (cols.Any())
{
    dt.AsEnumerable().Select(r => string.Join(":", cols.Select(c => r.Field<c.DataType>(c.ColumnName))))
} 
```

但这给我一个错误`The type or namespace name 'c' could not be found`

我如何转换`typeof(decimal)`为`Field<decimal>("Column1")`例如？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T11:22:40.087

尝试这个：

```
DataTable dt = new DataTable();
dt.Columns.Add("id", Type.GetType("System.Int32"));
dt.Columns.Add("Colum1", Type.GetType("System.Int32"));
dt.Columns.Add("Colum2", Type.GetType("System.String"));
dt.Columns.Add("Colum3");

string[] colsNames = new[] { "Colum1", "Colum2" };
var colTypes = dt.Columns.Cast<DataColumn>()
                 .Where(c => colsNames.Contains(c.ColumnName))
                 .Select(c => new
                 {
                     c.ColumnName,
                     c.DataType
                 })
                 .ToDictionary(key => key.ColumnName, val => val.DataType);

var query = dt.AsEnumerable()
              .Where(row => (int)row["id"]==5)
              .Select(row => new
              {
                  Colum1 = Convert.ChangeType(row[colsNames[0]], colTypes[colsNames[0]]),
                  Colum2 = Convert.ChangeType(row[colsNames[1]], colTypes[colsNames[1]])
              }); 
```

这是另一个变体，但不是很有趣：

```
//define class
public class myClass
{
    public int Column1;
    public string Column2;
}
// then
var query = dt.AsEnumerable()
              .Select(row => new myClass
              {
                  Column1 = Convert.ToInt32(row[colsNames[0]]),
                  Column2 = row[colsNames[1]].ToString()
              }); 
```

还有第三种变体：您可以在数据库中创建视图或存储过程并将其添加到数据上下文中

# c - C中的素数

> ID：13550355
> 
> 赞同：-4
> 
> 时间：2012-11-25T10:55:08.247
> 
> 标签：c, loops, if-statement, primes, break

第一个程序

```
#include<stdio.h>

void main()
{
    int n,c;
    printf("enter a numb");
    scanf( "%i", &n);

    for( c = 2; c <= n; c++){
        if( n % c == 0 )
            break;
    }

    if( c == n )
        printf("\nprime\n");
    else
        printf("\nnot prime\n");
    getchar();
} 
```

第二个项目

```
#include "stdio.h>

int main()
{
    printf("Enter a Number\n");
    int in, loop, rem, chk;
    scanf("%d",&in);

    for ( loop = 1; loop <= in; loop++){
        rem = in % loop;
        if( rem == 0)
            chk = chk +1;
    }
    if ( chk == 2 )
        printf("\nPRIME NUM ENTERED\n");
    else
    printf("\nNUM ENTERED NOT PRIME\n");
    getchar();
} 
```

第二个程序可以工作，但第一个是我朋友写的，程序看起来不错，但是通过单步检查它，我们发现`if`第一个程序中的条件在每个输入下都成立，所以这里的逻辑错误是什么，请帮忙我发现了……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T11:00:58.143

如果我们谈论的是第一个程序，那么读取整数 n 的方式就有问题。你需要传递它的地址：

```
printf("enter a numb");
scanf("%i",&n); 
```

我很惊讶您的编译器没有捕捉到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T10:57:13.940

这种情况在第一个是错误的：

```
 for(c=2;c<=n;c++) 
```

你必须去到 n/2。在您的情况下，条件始终为真，因为当 c == n 时 n % c 等于 0 并且您达到了休息时间。

素数的定义是它唯一的除数是 1 和它自己。

所以正确的 for 语句是：

```
for (c = 2; c < = n / 2; c++) 
```

编辑：

事实上，在达到 trunc(sqrt(n)) 之后，应该不会再有除数了。

```
 for (c=2; c < trunc(sqrt(n)) c++) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T11:08:03.230

你的程序逻辑是正确的。问题出在您的 scanf 语句中...您需要传递变量的地址。它应该是 ：`scanf("%i",&n);`

# java - 使用AsyncTask在ListView中显示数据，但是onPostExecute没有被调用

> ID：13550361
> 
> 赞同：1
> 
> 时间：2012-11-25T10:55:41.650
> 
> 标签：java, android, json, android-listview, android-asynctask

[在这个stackoverflow question](https://stackoverflow.com/questions/10335718/using-asynctask-to-display-data-in-listview "使用 AsyncTask 显示 ListView")的帮助下，我制作了一个简单的 AsyncTask 类来在 ListView 中显示数据。但是没有调用 AsyncTask onPostExecute。

这是我的代码：

```
public class Start extends SherlockActivity {

// JSON Node names
private static final String TAG_ID = "id";
private static final String TAG_NAME = "name";

// category JSONArray
JSONArray category = null;

private ListView lv;

@Override
public void onCreate(Bundle savedInstanceState) {
    setTheme(SampleList.THEME); //Used for theme switching in samples
    super.onCreate(savedInstanceState);
    setContentView(R.layout.test);

    new MyAsyncTask().execute("http://....");

    // Launching new screen on Selecting Single ListItem
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String cost = ((TextView) view.findViewById(R.id.mail)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
            in.putExtra("categoryname", name);
            System.out.println(cost);
            in.putExtra("categoryid", cost);
            startActivity(in);

        }
    });
}

public class MyAsyncTask extends AsyncTask<String, Void, ArrayList<HashMap<String, String>> > {
    // Hashmap for ListView
    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

    @Override
    protected ArrayList<HashMap<String, String>> doInBackground(String... params) {
        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();
        // getting JSON string from URL
        category = jParser.getJSONArrayFromUrl(params[0]);
        try {

            // looping through All Contacts
            for(int i = 0; i < category.length(); i++){
                JSONObject c = category.getJSONObject(i);

                // Storing each json item in variable
                String id = c.getString(TAG_ID);
                String name = c.getString(TAG_NAME);

                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map.put(TAG_ID, id);
                map.put(TAG_NAME, name);

                // adding HashList to ArrayList
                contactList.add(map);

            }
        } catch (JSONException e) {
            Log.e("log_tag", "Error parsing data "+e.toString());
        }
        return contactList;
        }

        @Override
        protected void onPostExecute(ArrayList<HashMap<String, String>> result) {
            ListAdapter adapter = new SimpleAdapter(Start.this, result , R.layout.list_item, 
                    new String[] { TAG_NAME, TAG_ID }, 
                    new int[] { R.id.name, R.id.mail });

            // selecting single ListView item
            lv = (ListView) findViewById(R.id.ListView);
            lv.setAdapter(adapter);

        }
}
} 
```

蚀：

```
11-25 11:40:31.896: E/AndroidRuntime(917): java.lang.RuntimeException: Unable to start activity ComponentInfo{de.essentials/de.main.Start}

                                         :java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T10:56:53.130

因为，

你`ListView lv`的是**NULL**。

你忘了定义`ListView lv`之后`setContentView(R.layout.test);`

你必须做类似的事情，

```
lv = (ListView) findViewById(R.id.<lisview_id_from_test.xml>); 
```

所以 `lv = (ListView) findViewById(R.id.ListView);`从`onPostExecute()`

并将其放在代码行之前`new MyAsyncTask().execute("http://....");`。

**原因：**

实际上发生的事情是，

在去`onPostExecute()`AsyncTask 之前，代码行 `lv.setOnItemClickListener(new OnItemClickListener() {...}`被执行并且那里的 Object`Listview lv`是**NULL**。

# c# - 如何在 TabControl 的左上角添加一个按钮？

> ID：13550368
> 
> 赞同：1
> 
> 时间：2012-11-25T10:56:27.437
> 
> 标签：c#, .net, winforms, tabcontrol

我有一个 C# 2.0 WinForms 应用程序，看起来像这样

![我目前的项目](../Images/064e856f17de2cb4542fa693638913fa.png)

如何在 TabControl 的左上角添加一个按钮，看起来像这样？

![在此处输入图像描述](../Images/9dbea90eb84bad811022af50bc3829ed.png)

我非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:23:07.857

正如 Kieren Johnstone 所说，如果不创建自己的版本，这是不可能的。但实际上，您可以在控件中添加一个选项卡并捕获选项卡更改事件。获取 currentTab，如果它与应该是您的按钮的那个匹配，则执行所述代码..然后更改回上一个选项卡....它可能只是有点不同。

如果您隐藏选项卡，它会将整个选项卡控件向左移动，从而有效地占用您想要实现的空间。如果您按照我所说的那样做。只需将选项卡添加到选项卡控件即可。然后使用该选项卡作为您的按钮，它就像按钮一样工作，只需在用户单击 tabControl 中的选项卡时首先获取事件。

首先将当前选项卡索引设置为您希望用户默认使用的索引。将索引值存储在变量中。现在捕捉 tabchanged 事件。如果选择了第一个选项卡，则用户单击了您想要的按钮，这意味着您应该触发您从实际按钮触发的代码。接下来将 selectedTabIndex 更改为您之前设置的索引变量中包含的值。如果未选择第一个选项卡，请更新先前设置的索引变量的值。这是解决您的问题的最简单方法，我可以立即想到。

# sql - 插入 sqlite3 数据库时带有参数的 vb.net 出错

> ID：13550369
> 
> 赞同：1
> 
> 时间：2012-11-25T10:56:33.697
> 
> 标签：sql, vb.net, visual-studio-2010, sqlite

插入 sqlite3 数据库时出现错误“由于违反约束列 transid 不唯一而中止”。这是我的代码，有人可以帮助我吗？

```
Public Connection As SQLiteConnection
Public Function Getconnection() As SQLiteConnection
    Connection = New SQLiteConnection
    Connection.ConnectionString = "Data Source=" + Application.StartupPath + "\POS.s3db; Version=3;"
    Connection.Open()
    GetConnection = Connection
End Function

Using cmd As New SQLiteCommand(strSQL,Connection)
            cmd.CommandType = CommandType.Text
            strSQL = "insert into tbltrans2 (transid,itemcode,flddate,itemname,qty,price,total,btw,btwper) values ('@tid',@itemcode,'@date','@itemname','@qty','@price','@total','@btw',@btwper)"
            cmd.Parameters.AddWithValue("tid", txtTransId.Text)
            cmd.Parameters.AddWithValue("date", txtDate.Text)
            ''this is temp

            For Each ls As ListViewItem In ListItems.Items
                cmd.Parameters.AddWithValue("itemcode", ls.Tag)
                cmd.Parameters.AddWithValue("itemname", ls.SubItems(0).Text)
                cmd.Parameters.AddWithValue("qty", ls.SubItems(1).Text)
                cmd.Parameters.AddWithValue("price", ls.SubItems(2).Text)
                cmd.Parameters.AddWithValue("total", ls.SubItems(3).Text)
                cmd.Parameters.AddWithValue("btw", (Double.Parse(ls.SubItems(5).Text) / 100) * (Double.Parse(ls.SubItems(3).Text)).ToString("#,##0.00"))
                cmd.Parameters.AddWithValue("btwper", Double.Parse(ls.SubItems(5).Text))
                cmd.ExecuteNonQuery()
            Next ls
        End Using 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:57:48.630

看起来有一个`unique`约束`transid`。这意味着您不能插入`transid`表中已经存在的行。

尝试输入不同的`transid`，或设置`transid`为[自动增量列](http://www.sqlite.org/autoinc.html)，这样您根本不必输入它。

# python - PIL 图像到数组（numpy 数组到数组） - Python

> ID：13550376
> 
> 赞同：24
> 
> 时间：2012-11-25T10:57:52.020
> 
> 标签：python, arrays, image, numpy, python-imaging-library

我有一个 .jpg 图像，我想将其转换为 Python 数组，因为我实现了处理普通 Python 数组的处理例程。

似乎 PIL 图像支持转换为 numpy 数组，根据我写的文档：

```
from PIL import Image
im = Image.open("D:\Prototype\Bikesgray.jpg")
im.show()

print(list(np.asarray(im))) 
```

这将返回一个 numpy 数组列表。另外，我尝试过

```
list([list(x) for x in np.asarray(im)]) 
```

因为它失败了，所以什么也没有返回。

如何从 PIL 转换为数组，或者简单地从 numpy 数组转换为 Python 数组？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2017-02-04T04:42:13.727

我强烈建议您使用对象的`tobytes`功能`Image`。经过一些时间检查后，效率更高。

```
def jpg_image_to_array(image_path):
  """
  Loads JPEG image into 3D Numpy array of shape 
  (width, height, channels)
  """
  with Image.open(image_path) as image:         
    im_arr = np.fromstring(image.tobytes(), dtype=np.uint8)
    im_arr = im_arr.reshape((image.size[1], image.size[0], 3))                                   
  return im_arr 
```

我在笔记本电脑上运行的时间显示

```
In [76]: %timeit np.fromstring(im.tobytes(), dtype=np.uint8)
1000 loops, best of 3: 230 µs per loop

In [77]: %timeit np.array(im.getdata(), dtype=np.uint8)
10 loops, best of 3: 114 ms per loop 
```

```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-25T11:18:52.763

我认为您正在寻找的是：

```
list(im.getdata()) 
```

或者，如果图像太大而无法完全加载到内存中，则如下所示：

```
for pixel in iter(im.getdata()):
    print pixel 
```

来自[PIL 文档](http://effbot.org/imagingbook/image.htm#tag-Image.Image.getdata)：

> 获取数据
> 
> im.getdata() => 序列
> 
> 将图像的内容作为包含像素值的序列对象返回。序列对象被展平，因此第 1 行的值直接跟在第 0 行的值之后，依此类推。
> 
> 注意，该方法返回的序列对象是内部PIL数据类型，只支持某些序列操作，包括迭代和基本序列访问。要将其转换为普通序列（例如用于打印），请使用 list(im.getdata())。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-12-30T16:18:59.723

基于[zenpoy的回答](https://stackoverflow.com/a/13550527/3798217)：

```
import Image
import numpy

def image2pixelarray(filepath):
    """
    Parameters
    ----------
    filepath : str
        Path to an image file

    Returns
    -------
    list
        A list of lists which make it simple to access the greyscale value by
        im[y][x]
    """
    im = Image.open(filepath).convert('L')
    (width, height) = im.size
    greyscale_map = list(im.getdata())
    greyscale_map = numpy.array(greyscale_map)
    greyscale_map = greyscale_map.reshape((height, width))
    return greyscale_map 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-13T02:44:44.260

我使用 numpy.fromiter 反转 8 灰度位图，但没有副作用的迹象

```
import Image
import numpy as np

im = Image.load('foo.jpg')
im = im.convert('L')

arr = np.fromiter(iter(im.getdata()), np.uint8)
arr.resize(im.height, im.width)

arr ^= 0xFF  # invert
inverted_im = Image.fromarray(arr, mode='L')
inverted_im.show() 
```

# facebook - Facebook-like-box Safari 问题：在某些浏览器中出现，在其他浏览器中消失

> ID：13550377
> 
> 赞同：1
> 
> 时间：2012-11-25T10:57:52.603
> 
> 标签：facebook, facebook-likebox

我在我创建的网站上放了一个类似 facebook 的框，在我的电脑上一切正常（safari，chrome，firefox，ie，...）

但是当我的一些朋友在 safari 中打开网站时，de box 不会显示给所有人。（所以有些朋友可以在 safari 中看到它，而其他朋友则不会显示/出现并立即消失/...）

这是我包含的 iframe 代码

```
<iframe src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fpages%2FLuca-Barassii%2F126244157780&width=300&height=340&colorscheme=dark&show_faces=true&border_color&stream=false&header=false" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:300px; height:340px;" allowTransparency="true"></iframe> 
```

希望任何人都可以帮助我... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:03:07.150

这很可能是由于他们的 Safari 版本。此浏览器的 webkit 在解释以前版本中的 url 中的 & 符号时遇到问题，将 编码为`&`to`&#38;`而不是`&amp;`在 xhtml 页面中。这在后来的 Webkit 中得到了修复。

但要确保，您可以自己编码您的 iframe url：

```
<iframe src="//www.facebook.com/plugins/likebox.php?
    href=http%3A%2F%2Fwww.facebook.com%2Fpages%2FLuca-Barassii%2F126244157780
    &amp;width=300&amp;height=340&amp;colorscheme=dark&amp;show_faces=true
    &amp;border_color=&amp;stream=false&amp;header=false" 
    scrolling="no" 
    frameborder="0" 
    style="border:none; overflow:hidden; width:300px; height:340px;" 
    allowTransparency="true">
</iframe> 
```

但是，这不会阻止该框在特定（旧）版本的 Safari 中不显示，因为与号仍然会被错误地编码。

# java - 在日志语句中写入方法名称是否有等效的 getSimpleName()？

> ID：13550378
> 
> 赞同：2
> 
> 时间：2012-11-25T10:58:08.137
> 
> 标签：java, android

目前我这样写我的日志语句：

```
Log.i(TAG, MyClass.class.getSimpleName() + "#methodName" + someThing); 
```

有没有办法引用类似于`Class's` `getSimpleName()`不涉及硬编码的方法名称`String`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T11:01:46.343

您可以使用`Thread.currentThread().getStackTrace()[1].getMethodName();`

```
String methodName = Thread.currentThread().getStackTrace()[1].getMethodName();
Log.i(TAG, MyClass.class.getSimpleName() + methodName + someThing); 
```

# actionscript-3 - Flash 错误：SecurityError：关于套接字的错误 #2000

> ID：13550382
> 
> 赞同：1
> 
> 时间：2012-11-25T10:58:44.370
> 
> 标签：actionscript-3, flash, sockets

```
function SocketExample() 
{
   socket = new Socket();

   // Add an event listener to be notified when the connection
   // is made
   socket.addEventListener( Event.CONNECT, onConnect );

   // Connect to the server
   socket.connect( "127.0.0.1", 2901 );
}

function onConnect( event:Event ):void 
{
  tt.text = "Successful linking";
} 
```

我尝试通过 Flash as3.0 连接到 Socket。但这不起作用，它向我显示错误“SecurityError：错误＃2000”。如何避免此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:32:22.613

尝试将调用移至`connect()`构造函数之外的方法并稍后调用它。

[本文](http://www.actionscripterrors.com/?p=409)提到导致此错误的一个原因是当您尝试在 Flash 有机会设置它的“安全上下文”之前执行某项操作。

例如，您可以在启动后几（或几百）毫秒后使用`setInterval()`方法或对象连接套接字。`Timer`或者您可以在屏幕上添加一个按钮，并且仅在单击该按钮后进行连接。

# php - 需要 php 脚本，就像 mysmartprice dot com 在 Go To Store 按钮上使用的一样（URL 隐藏）

> ID：13550395
> 
> 赞同：-6
> 
> 时间：2012-11-25T10:59:58.117
> 
> 标签：php, url, cloaking

需要 php 脚本的代码，例如 mysmartprice dot com 在其“Go To Store”按钮上用于 URL 隐藏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T11:10:50.740

我不是 100% 确定我的问题是否正确，但这是我对你的猜测的意思：

像这样使用 PHP 的[header](http://php.net/manual/en/function.header.php)方法：

```
<?php
    if(!isset($_GET["p"]))
        exit("No parameter \"p\"");

    $p = $_GET["p"];
    header("LOCATION: $p");
?> 
```

将文件另存为 redir.php，然后将其用作[http://mysite.com/redir.php?p=http://google.com/](http://mysite.com/redir.php?p=http://google.com/)。

# java - 为什么我在这里得到一个 IndexOutOfBoundsException？

> ID：13550398
> 
> 赞同：0
> 
> 时间：2012-11-25T11:00:43.093
> 
> 标签：java

**在下面的 replaceValue 方法中，我得到了一个索引越界异常，我不知道为什么。**

[null, (10,4), (52,3), (39,9), (78,7), (63,8), (42,2), (50,411)]

重置值测试：411 size=7

[null, (10,4), (52,3), (39,9), (78,7), (63,8), (42,2), (50,101)]

去除测试：(10,4)

[null, (39,9), (52,3), (42,2), (78,7), (63,8), (50,101)]

大小=6

我尝试在这里再次替换该值并收到错误...

```
package heappriorityqueue;
import java.util.*;
public class HeapPriorityQueue<K,V> {
protected ArrayList<Entry<K,V>> heap;
protected Comparator<K> comp;
int size = 0;
protected static class MyEntry<K,V> implements Entry<K,V> {
    protected K key;
    protected V value;
    protected int loc;
    public MyEntry(K k, V v,int i) {key = k; value = v;loc =i;}
    public K getKey() {return key;}
    public V getValue() {return value;}
    public int getLoc(){return loc;}
    public String toString() {return "(" + key + "," + value + ")";}
    void setKey(K k1) {key = k1;}
    void setValue(V v1) {value = v1;}
    public void setLoc(int i) {loc = i;}
}
public HeapPriorityQueue() {
    heap = new ArrayList<Entry<K,V>>();
    heap.add(0,null);
    comp = new DefaultComparator<K>();
}
public HeapPriorityQueue(Comparator<K> c) {
    heap = new ArrayList<Entry<K,V>>();
    heap.add(0,null);
    comp = c;
}
public int size() {return size;}
public boolean isEmpty() {return size == 0; }
public Entry<K,V> min() throws EmptyPriorityQueueException {
    if (isEmpty())
        throw new EmptyPriorityQueueException("Priority Queue is Empty");
    return heap.get(1);
}
public Entry<K,V> insert(K k, V v) {
    size++;
    Entry<K,V> entry = new MyEntry<K,V>(k,v,size);
    heap.add(size,entry);
    upHeap(size);
    return entry;
}
public Entry<K,V> removeMin() throws EmptyPriorityQueueException {
    if (isEmpty())
        throw new EmptyPriorityQueueException("Priority Queue is Empty");
    if (size == 1)
        return heap.remove(1);
    Entry<K,V> min = heap.get(1);
    heap.set(1, heap.remove(size));
    size--;
    downHeap(1);
    return min;
}

public V replaceValue(Entry<K,V> e, V v) throws InvalidEntryException,
        EmptyPriorityQueueException {
// replace the value field of entry e in the priority
// queue with the given value v, and return the old value

This is where I am getting the IndexOutOfBounds exception, on heap.get(i);

if (isEmpty()){
        throw new EmptyPriorityQueueException("Priority Queue is Empty.");
    }
    checkEntry(e);
    int i = e.getLoc();
    Entry<K,V> entry=heap.get(((i)));
    V oldVal = entry.getValue();
    K key=entry.getKey();
    Entry<K,V> insert = new MyEntry<K,V>(key,v,i);
    heap.set(i, insert);
    return oldVal;
}

public K replaceKey(Entry<K,V> e, K k) throws InvalidEntryException,
        EmptyPriorityQueueException, InvalidKeyException {
    // replace the key field of entry e in the priority
    // queue with the given key k, and return the old key
    if (isEmpty()){
        throw new EmptyPriorityQueueException("Priority Queue is Empty.");
    }
    checkKey(k);
    checkEntry(e);
    K oldKey=e.getKey();
    int i = e.getLoc();
    Entry<K,V> entry = new MyEntry<K,V>(k,e.getValue(),i);
    heap.set(i,entry);
    downHeap(i);
    upHeap(i);
    return oldKey;
}

public Entry<K,V> remove(Entry<K,V> e) throws InvalidEntryException,
        EmptyPriorityQueueException{
    // remove entry e from priority queue and return it
    if (isEmpty()){
        throw new EmptyPriorityQueueException("Priority Queue is Empty.");
    }
    MyEntry<K,V> entry = checkEntry(e);
    if (size==1){
        return heap.remove(size--);
    }
    int i = e.getLoc();
    heap.set(i, heap.remove(size--));
    downHeap(i);
    return entry;
}

protected void upHeap(int i) {
    while (i > 1) {
        if (comp.compare(heap.get(i/2).getKey(), heap.get(i).getKey()) <= 0)
            break;
        swap(i/2,i);
        i = i/2;
    }
}
protected void downHeap(int i) {
    int smallerChild;
    while (size >= 2*i) {
        smallerChild = 2*i;
        if ( size >= 2*i + 1)
            if (comp.compare(heap.get(2*i + 1).getKey(), heap.get(2*i).getKey()) < 0)
                smallerChild = 2*i+1;
        if (comp.compare(heap.get(i).getKey(), heap.get(smallerChild).getKey()) <= 0)
            break;
        swap(i, smallerChild);
        i = smallerChild;
    }
}
protected void swap(int j, int i) {
    heap.get(j).setLoc(i);
    heap.get(i).setLoc(j);
    Entry<K,V> temp;
    temp = heap.get(j);
    heap.set(j, heap.get(i));
    heap.set(i, temp);

}
public String toString() {
    return heap.toString();
}
protected MyEntry<K,V> checkEntry(Entry<K,V> ent) 
    throws InvalidEntryException 
  {
    if(ent == null || !(ent instanceof MyEntry))
      throw new InvalidEntryException("Invalid entry.");
    return (MyEntry)ent;
  }
protected void checkKey(K key) throws InvalidKeyException{
    try{comp.compare(key,key);}
    catch(Exception e){throw new InvalidKeyException("Invalid key.");}
} 
```

}

```
HeapPriorityQueue<Integer,Integer> testPQ = new HeapPriorityQueue<Integer,Integer>();
    System.out.print("[");
    int x;
    for (int i = 0; i < 10; i++) {
        x = (int) (100 * Math.random());
        System.out.print(" " + x);
        testPQ.insert(x,i);

    }
    System.out.println("]");

    System.out.println(testPQ);
    for (int i = 0; i < 5; i++) {
        System.out.println(testPQ.removeMin());
        System.out.println(testPQ);
    }

    Entry e = testPQ.insert(10, 4);
    System.out.println("insertion of "+e);
    System.out.println(testPQ);
    System.out.println("size="+testPQ.size);
    System.out.println(e.getKey());
    Entry r = testPQ.insert(50, 411);
    System.out.println("insertion of "+r);

    System.out.println("size="+testPQ.size);
    System.out.println(testPQ);
    System.out.println("replacement value test" + 
            testPQ.replaceValue(r, 101));

    System.out.println("size="+testPQ.size);
    System.out.println(testPQ);
    System.out.println("removal test:"+testPQ.remove(e));
    System.out.println(testPQ);
    System.out.println("replacement value test" + 
            testPQ.replaceValue(r, 201));
    System.out.println("replacement value test" + 
            testPQ.replaceValue(r, 301));
    System.out.println("replacement value test" + 
            testPQ.replaceValue(r, 401));
    System.out.println("size="+testPQ.size);
    System.out.println(testPQ);

    Entry k = testPQ.min();
    System.out.println("replacement key test:"+testPQ.replaceKey(k,77)
            +" w/77");
    System.out.println(testPQ);
    Entry v = testPQ.min();
    System.out.println("replacement key test:"+testPQ.replaceKey(v,6)+
            " w/6");
    System.out.println(testPQ);
    System.out.println("removal test:"+testPQ.remove(v));
    System.out.println(testPQ);

run:
[ 17 86 13 52 98 4 9 25 6 75]
[null, (4,5), (6,8), (9,6), (25,7), (75,9), (17,0), (13,2), (86,1), (52,3), (98,4)]
(4,5)
[null, (6,8), (25,7), (9,6), (52,3), (75,9), (17,0), (13,2), (86,1), (98,4)]
(6,8)
[null, (9,6), (25,7), (13,2), (52,3), (75,9), (17,0), (98,4), (86,1)]
(9,6)
[null, (13,2), (25,7), (17,0), (52,3), (75,9), (86,1), (98,4)]
Exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 7, Size: 7
(13,2)
[null, (17,0), (25,7), (86,1), (52,3), (75,9), (98,4)]
(17,0)
[null, (25,7), (52,3), (86,1), (98,4), (75,9)]
insertion of (10,4)
[null, (10,4), (52,3), (25,7), (98,4), (75,9), (86,1)]
size=6
10
insertion of (50,411)
size=7
[null, (10,4), (52,3), (25,7), (98,4), (75,9), (86,1), (50,411)]
replacement value test411
size=7
[null, (10,4), (52,3), (25,7), (98,4), (75,9), (86,1), (50,101)]
removal test:(10,4)
[null, (25,7), (52,3), (50,101), (98,4), (75,9), (86,1)]
at java.util.ArrayList.rangeCheck(ArrayList.java:604)
at java.util.ArrayList.get(ArrayList.java:382)
at heappriorityqueue.HeapPriorityQueue.replaceValue(HeapPriorityQueue.java:283)
at heappriorityqueue.Main.main(Main.java:55) 
```

Java 结果：1 构建成功（总时间：0 秒）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:15:29.267

您将条目的数组索引保存在条目本身中。但是在你的`remove()`方法中你不会改变它。您必须更改所有更改位置的元素的索引，否则您将在进一步的删除调用中删除错误的元素。

在您的示例`(50,101)`中，最初的索引为 6。此值在删除后保留，因此如果您尝试替换它，它仍会尝试访问`int i = e.getLoc();`不再存在的索引 6（因为 ）。

# java - 简单的 Java 数学运算

> ID：13550403
> 
> 赞同：0
> 
> 时间：2012-11-25T11:01:33.313
> 
> 标签：java, math, numbers

我正在制作一个似乎不起作用的 BMI 计算器。

我一直得到 0 作为我的答案，而它应该是 15.7

有人可以告诉我我在这里做错了什么吗？

```
public class ass10 {

    public static void main(String[] args) {
    bmi(223,100);
    }
    public static bmi(int w, int h){
        double result;
        result = (w/(h*h))*703
        System.out.println(result)             
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T11:03:34.407

在 Java 中，如果你取一个 int/int，你会得到一个 int，四舍五入到较小的数字 ( `99/100=0`)。您想将其转换为浮点数，或者更好的是双精度数。

```
public static void bmi(int w, int h){
    double result;
    result = ((double)w/(h*h))*703;
    System.out.println(result);         
} 
```

我还为您修复了 2 个丢失的分号；-) 如果没有返回类型，您的函数将无法工作，因此我将其设置为 void。

# ruby-on-rails - 'elseif' 还存在吗？

> ID：13550407
> 
> 赞同：35
> 
> 时间：2012-11-25T11:01:51.850
> 
> 标签：ruby-on-rails, ruby, if-statement

我刚刚学习 ROR，我遇到了 if / else 语句。我也遇到了“elseif”，但我的文本编辑器（textmate）没有将它作为关键字，程序也没有正常运行。

```
if name == 'Chris'
  puts 'What a lovely name.'
elseif name == 'Katy'
  puts 'What a lovely name!'
end 
```

我正在使用几年前写的《学习编程》一书。我想知道“elseif”是否已更改，因为当我简单地使用“else”时，它似乎运行正常。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-11-25T11:04:52.893

是`elsif`，不是`elseif`。

当你是新手时，可能会有点混乱。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-25T11:03:45.670

尝试`elsif`（没有第二个`e`）。

[来源](http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Control_Structures#if-elsif-else_expression)

# javascript - 网站的实时异步时间源

> ID：13550416
> 
> 赞同：0
> 
> 时间：2012-11-25T11:02:54.497
> 
> 标签：javascript, jquery, html, time, timezone

我想根据用户的位置在我的网站上显示时间，假设如果浏览该网站的用户来自美国，那么时间应该是目前在美国的时间，对于中国等等等等。

我想知道是否存在适用于它的 JavaScript 插件，但我没有找到任何我想要的动态插件，我的要求包括：

*   可以根据网站主题完全风格化的东西（无 iframe）
*   我想要的模式是（HH：MM：SS）
*   它应该是异步的，就像第二个 [SS] 不断滴答，时间不断更新

这是可能的，一种实现它的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:21:05.487

这还不够吗？

html

```
<span id="time"></span> 
```

js

```
$(function() {
    var time = $("#time");

    function getTime() {
        var now = new Date(),
            hours = now.getHours(),
            minutes = now.getMinutes(),
            seconds = now.getSeconds();

        return (hours < 10 ? "0" + hours : hours) + ":" + (minutes < 10 ? "0" + minutes : minutes) + ":" + (seconds < 10 ? "0" + seconds : seconds);
    }

    setInterval(function() {
        time.text(getTime());        
    }, 1000);
});​ 
```

[例子](http://jsfiddle.net/xUKBS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T11:06:05.757

仅仅输出用户的本地系统时间还不够吗？

如果您想要基于服务器的解决方案，请[在此处查看解决方案](https://stackoverflow.com/questions/13339086/php-timestamp-date-to-user-timezone)。您必须先找出用户的时区，然后使用与时区偏移的时间来操作服务器时间`$dt->setTimezone(new DateTimeZone("Europe/Berlin"));`。

# php - 两个多维数组，需要按日期php组合起来按顺序回显

> ID：13550418
> 
> 赞同：0
> 
> 时间：2012-11-25T11:03:14.167
> 
> 标签：php, object, multidimensional-array, array-merge

我可能会以错误的方式解决这个问题，这就是我想要做的：

我有 2 个数组，都来自 Jira 错误系统，一个用于注释，另一个用于附件，从 API 中提取时两者都是不同的对象，但我想显示两者的组合并打印出结果，以便按时间顺序显示命令。

例如现在它的：

```
comment 1 - 5th April
Comment 2 - 20th April
comment 3 - 9th June

attachment 1 - 5th April
attachment 2 - 20th April

I want to dislay that as:
comment 1 - 5th April
attachment 1 - 5th April
Comment 2 - 20th April
attachment 2 - 20th April
comment 3 - 9th June 
```

好的，这是我的附件数组：

```
$attachments = $issue_json->fields->attachment;
        $result1 = array();

        foreach ($attachments as $attachment)
            {
            $result1[] = array
                (
                'attachment_date' => convert_time($attachment->created),
                'attachment_epoch' => convert_sql_time($attachment->created),
                'attachment_displayName' => $attachment->author->displayName,
                'attachment_filename' => $attachment->filename,
                'attachment_file_type' => $attachment->mimeType,
                'attachment_thumbnail' => $attachment->thumbnail,
                'attachment_url_link' => $attachment->content,
                );
            } 
```

现在结果如下：

```
Array 
( [0] => Array( 
    [attachment_date] => 13th Apr 12 07:10 
    [attachment_epoch] => 1334301000 
    [attachment_displayName] => XXX 
    [attachment_filename] => 1.txt
    [attachment_file_type] => text/plain 
    [attachment_thumbnail] =>
    [attachment_url_link] => https://xxx.atlassian.net/secure/attachment/18605/1.txt 
    )  

  [1] => Array( 
    [attachment_date] => 13th Apr 12 07:10 
    [attachment_epoch] => 1334301000 
    [attachment_displayName] => xxx 
    [attachment_filename] => 2.txt 
    [attachment_file_type] => text/plain 
    [attachment_thumbnail] =>  
    [attachment_url_link] => https://xxx.atlassian.net/secure/attachment/18606/2.txt 
    ) 
```

现在评论：

```
$comments = $issue_json->fields->comment->comments;
        $result = array();

        foreach ($comments as $comment) 
            {
            $result[] = array
                (
                'comments_date' => convert_time($comment->updated),
                'comments_epoch' => convert_sql_time($comment->updated),
                'comments_displayName' => $comment->author->displayName,
                'comments_body' => $comment->body,
                );
            } 
```

这是一个输出示例：

```
Array ( [0] => Array( 
    [comments_date] => 11th Apr 12 20:52
    [comments_epoch] => 1334177520
    [comments_displayName] => xxx
    [comments_body] => Cannot reproduce, but attempted a fix based on the log file. 
    )  

    [1] => Array( 
    [comments_date] => 13th Apr 12 07:09 
    [comments_epoch] => 1334300940 
    [comments_displayName] => xxx 
    [comments_body] => 1) tested on a bit older version it still happens with it 
    ) 
```

现在我计划做的是合并 2 个数组，但我不确定这是可能的，因为它们没有匹配的变量。

我可以将它合并成一件大事并结合我需要匹配它的那些是纪元日期因为我想按它排序，所以合并它们直到我有这样的东西：

```
 $result1[] = array
                (
                'date' => convert_time($attachment->created),
                'epoch' => convert_sql_time($attachment->created),
                'displayName' => $attachment->author->displayName,
                'attachment_filename' => $attachment->filename,
                'attachment_file_type' => $attachment->mimeType,
                'attachment_thumbnail' => $attachment->thumbnail,
                'attachment_url_link' => $attachment->content,
                'comments_date' => convert_time($comment->updated),
                'comments_epoch' => convert_sql_time($comment->updated),
                'comments_displayName' => $comment->author->displayName,
                'comments_body' => $comment->body,
                ); 
```

所以前3个将匹配，因为两个数组都有，所有其他数组都有附件或评论的值，但不是两者都有，然后一旦我有1个大数组，我可以按纪元对其进行排序并按时间顺序回显结果

那行得通吗？如果可以的话，php 中的哪种合并命令最好，array_merge 还是递归的？我可能过于复杂了，我是 php 新手，所以我有点卡在最好的方向上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T11:22:21.737

哇，我以前尝试过很多没有用的东西，但我试过了，效果很好。我只是在等待答案时胡闹，没想到会那么容易

我更新了两个数组以使用公共 jira_epoch 变量：

```
$comments = $issue_json->fields->comment->comments;
        $result = array();

        foreach ($comments as $comment) 
            {
            $result[] = array
                (
                'comments_date' => convert_time($comment->updated),
                'jira_epoch' => convert_sql_time($comment->updated),
                'comments_displayName' => $comment->author->displayName,
                'comments_body' => $comment->body,
                );
            }

        $attachments = $issue_json->fields->attachment;
        $result1 = array();

        foreach ($attachments as $attachment)
            {
            $result1[] = array
                (
                'attachment_date' => convert_time($attachment->created),
                'jira_epoch' => convert_sql_time($attachment->created),
                'attachment_displayName' => $attachment->author->displayName,
                'attachment_filename' => $attachment->filename,
                'attachment_file_type' => $attachment->mimeType,
                'attachment_thumbnail' => $attachment->thumbnail,
                'attachment_url_link' => $attachment->content,
                );
            } 
```

然后我找到了一些代码，它似乎工作得很好

```
$test = array_merge($result,$result1);
            function sortByOrder($a, $b) {
    return $a['jira_epoch'] - $b['jira_epoch'];
}

usort($test, 'sortByOrder'); 
```

# jquery - 使用模糊进行验证的 jquery datepicker 会触发意外的验证

> ID：13550421
> 
> 赞同：0
> 
> 时间：2012-11-25T11:03:26.053
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我为 jquery datepicker 添加了掩码并添加了验证。

这是[jsfiddle](http://jsfiddle.net/smdvA/189/)和代码

```
<input class="datepicker" type="text" />
<br /><br />
<input type="button" style="width:50px;" />

$( ".datepicker" ).datepicker({ dateFormat: 'dd-M-yy'});
$(".datepicker").mask("99-aaa-9999");

$(".datepicker").blur(function(){
var date1 = $(this).val(); 

    var validate = IsValidDate(date1);
    if(!validate ){
        alert("Invalid Date formart, Required Date Format : dd-mmm-yyyy");
    $(this).val("");
}
   });

function IsValidDate(myDate) {
                var filter = /^([012]?\d|3[01])-([Jj][Aa][Nn]|[Ff][Ee][bB]|[Mm][Aa][Rr]|[Aa][Pp][Rr]|[Mm][Aa][Yy]|[Jj][Uu][Nn]|[Jj][u]l|[aA][Uu][gG]|[Ss][eE][pP]|[oO][Cc]|[Nn][oO][Vv]|[Dd][Ee][Cc])-(19|20)\d\d$/
                                return filter.test(myDate);
            } 
```

现在我面临一个问题。当用户尝试从日历中选择日期时，验证会触发，这不应该发生。

谁能建议我的代码有什么问题。谢谢 ：）

好吧，我已经设法解决了这个问题，但不知道这是否是最有效的方法

这是更新的代码和链接

[http://jsfiddle.net/smdvA/191/](http://jsfiddle.net/smdvA/191/)

```
$( ".datepicker" ).datepicker({ dateFormat: 'dd-M-yy'});
$(".datepicker").mask("99-aaa-9999");

$(".datepicker").blur(function(){
    var date1 = $(this).val(); 
    if(date1 != ""){
    var validate = IsValidDate(date1);
    if(!validate ){
        alert("Invalid Date formart, Date Format : dd-MMM-yyyy");
        $(this).val("");}}
});

function IsValidDate(myDate) {
                var filter = /^([012]?\d|3[01])-([Jj][Aa][Nn]|[Ff][Ee][bB]|[Mm][Aa][Rr]|[Aa][Pp][Rr]|[Mm][Aa][Yy]|[Jj][Uu][Nn]|[Jj][u]l|[aA][Uu][gG]|[Ss][eE][pP]|[oO][Cc]|[Nn][oO][Vv]|[Dd][Ee][Cc])-(19|20)\d\d$/
                                return filter.test(myDate);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:19:57.373

使用日期选择器的“onselect”作为“模糊”的首选方式：

```
$( ".datepicker" ).datepicker({ dateFormat: 'dd-M-yy', onSelect: function(date) { 
        var validate = IsValidDate(date);

        if(!validate)
        {
            alert("Invalid Date formart, Date Format : dd-MMM-yyyy");
            $(this).val("");
        }
}}); 
```

# python - 不带逗号的 Python 打印

> ID：13550423
> 
> 赞同：9
> 
> 时间：2012-11-25T11:03:36.573
> 
> 标签：python

如何打印没有括号和逗号的列表？

我有一个这样的排列列表：

```
 [1, 2, 3]
   [1, 3, 2] etc.. 
```

我想像这样打印它们：`1 2 3`

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-25T11:04:43.397

```
blah = [ [1,2,3], [1,3,2] ]

for bla in blah:
    print ' '.join(map(str, bla)) 
```

值得注意的是，`map`这有点过时，最好根据要求编写为生成器或列表组合。这还有一个优点，它可以跨 Python 2.x 和 3.x 移植，因为它将在 2.x 上生成一个列表，而在 3.x 上保持惰性

因此，上面将被写成（使用生成器表达式）：

```
for bla in blah:
    print ' '.join(str(n) for n in bla) 
```

或使用字符串格式：

```
for bla in blah:
    print '{} {} {}'.format(*bla) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-15T04:38:11.527

如果列表是

```
l=[1,2,3,4,5] 
```

打印不带括号和逗号的列表：

```
print " ".join(map(str,l))

#1 2 3 4 5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-27T01:11:54.533

```
Number_list = [1, 2, 3, 4, 5]
Print(*Number_list, sep="") # empty quote 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-03T06:30:15.390

例如，您有一个名为名称的列表。

```
names = ["Sam", "Peter", "James", "Julian", "Ann"]
for name in range(len(names)):
    print names[name], 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-25T12:04:12.517

```
In [1]: blah = [ [1,2,3], [1,3,2] ]

In [2]: for x in blah:
   ...:     print x[0],x[1],x[2]
   ...:     
1 2 3
1 3 2

In [3]: 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-16T23:26:56.590

```
n = int(input())
i = 1
x = []
while (i <= n):
    x.append(i)
    i = i+1
print(*x, sep='') 
```

假设 n 是用户输入的数字，您可以运行一个循环并将值 i 到 n 添加到列表 x 中。最后，您可以使用空 ('') 来打印数组 (*x) 来分隔值。这会使您的值保持其原始格式，在本例中为数字。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-11T09:46:58.890

你可以这样做。

**代码：**

```
list = [[1, 2, 3], [3, 2, 1]]

for item in list:
    print("{}".format(item, end="\n") 
```

**结果：**

```
[1, 2, 3]
[3, 2, 1] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-24T03:46:03.927

```
completedWord=['s','o','m','e',' ','w','o','r','d','s']
print(*completedWords,sep=' ') 
```

output =注意***sep=' '***`s o m e w o r d s` 中有两个空格

 *** * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-11-25T13:45:28.630

```
temp = [[2,3,5],[2,5,3]]
for each_temp in temp:
    if isinstance(each_temp,list):
        for nested_temp in each_temp:
            print nested_temp 
```**

# java - 在 EJB 中注入数据源

> ID：13550427
> 
> 赞同：15
> 
> 时间：2012-11-25T11:04:42.307
> 
> 标签：java, jakarta-ee, ejb

当您在应用程序中注入数据源并通过调用`getConnection()`它来获得连接时，您应该关闭连接吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-25T15:34:18.597

即使数据源本身是容器管理的，API 确实需要程序员关闭连接。这与其他几个容器管理的资源（如实体管理器）不同，容器负责关闭。请注意，在大多数情况下，在此处关闭并不会*真正*关闭此处的连接，而是将连接返回到连接池。

根据经验，如果您使用工厂式资源来获取一个或多个其他可以关闭的资源，则必须关闭它们。否则容器会这样做。

由于[Connection](http://docs.oracle.com/javase/7/docs/api/java/sql/Connection.html)实现了[AutoCloseable](http://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html)，因此您可以为此使用 try-with-resources 块：

```
@Stateless
public class MyBean {

    @Resource(lookup = "java:/app/datasource")
    private DataSource dataSource;

    public void doStuff() {
        try (Connection connection = dataSource.getConnection()) {

            // Work with connection here

        } catch (SQLException e) {
            throw new SomeRuntimeException(e);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-25T15:09:18.517

当然，否则你会耗尽你的连接池。最好在 finally 块中执行此操作：

```
@Resource(mappedName="jndi/yourDatasource")
DataSource ds;

..

Connection conn = null;
try {
     conn = ds.getConnection();
     //PERFORM QUERY, ETC..
}
catch(SQLException ex) {
     //EXCEPTION HANDLING
}
finally {
    try {
        if(conn != null)
            conn.close();
    }
    catch(SQLException ex) {..}
} 
```

# linux - 从 Linux 上的计划任务中检测不活动状态

> ID：13550435
> 
> 赞同：2
> 
> 时间：2012-11-25T11:05:31.933
> 
> 标签：linux, user-inactivity

我需要检测我的 Linux 系统上的用户不活动状态，以关闭它（相当无头的妻子，以及相当昂贵的电费...... :-)。

我需要安排脚本（在 crontab 中），所以我想没有任何依赖于 X 的工具可以工作（没有可用的 $DISPLAY）。

有什么想法吗？

**更新**

对于“用户不活动”，我的意思是用户输入不活动（鼠标和键盘）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T14:08:23.340

[Xautolock](http://linux.die.net/man/1/xautolock)可能是适合您的工具。它允许您指定应触发命令的不活动分钟数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T15:33:59.523

您可以考虑检查屏幕保护程序运行了多长时间。

```
#!/bin/bash

screensaver="atlantis"

t=$(
    # check for the screensaver
    ps h -o start -C $screensaver          |\
    # hh:mm:ss -> seconds
    awk -F: '{print $1"*3600+"$2"*60+"$3}' |\
    bc -l  2>/dev/null  | sort -n | tail -1
)

if [ "$t" == "" ]
then
    exit 0
fi

n=$(
    date "+%T"                             |\
    awk -F: '{print $1"*3600+"$2"*60+"$3}' |\
    bc -l  2>/dev/null
)

runtime=$(( $n - $t ))

if [ $runtime -gt 3600 ] || [ $runtime -lt 0 ]
then
    echo shutdown -h now 
fi 
```

使用时间值需要从 then 中减去 now 以获得运行时间。此外，在我的情况下，出现在进程表中的屏幕保护程序将根据选择的屏幕保护程序而有所不同。因此，上面的程序假定“亚特兰蒂斯”是当前的屏幕保护程序。

# backbone.js - model.save 不更新模型值

> ID：13550437
> 
> 赞同：3
> 
> 时间：2012-11-25T11:06:02.083
> 
> 标签：backbone.js

我正在尝试学习 Backbone.js 并遇到了一个问题。model.save 没有更新我的模型值，尽管 model.fetch 可以很好地更新值。

请在下面查看我的代码，如果我在这里做错了什么，请告诉我：

**模型**

```
var Person = Backbone.Model.extend({

    url: "CreatePerson",
    defaults: {
        name: "",
        age: 0
    },
initialize: function(){

this.on("change:name",function(){

        alert("Updated value is: "+this.get("name"));
    });
    }

}); 
```

我在我的 html 页面上创建了这个模型的一个实例，下面是代码：

```
var person = new Person({name:"manish"});

person.save(person,{

        wait: true,
        success: function(){
            alert("Data saved: "+person.toJSON().name);
        },
        error: function(){
            alert("Sorry, something wrong went with the system");
        }       
    });
person.fetch({

        success: function(){
            alert("Data Fetched: "+person.get("name"));
        }
    }); 
```

在保存和获取时，我从服务器返回以下 JSON 数据：

```
{"name":"Logan","age":23} 
```

有趣的是，为了保存，change 事件没有被触发，并且警报框给了我旧的模型值（即 manish），而当 fetch 函数执行时，change 事件被触发并且 fetch 回调给了我新的值（即 logan） .

有人可以帮助我确定我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:35:38.510

来自backbonejs.org

[http://backbonejs.org/#Model-save](http://backbonejs.org/#Model-save)

> 使用新属性调用 save 将立即引发“更改”事件，并在服务器确认成功更改后引发“同步”事件。如果您想在模型上设置新属性之前等待服务器，请传递 {wait: true}。

听起来服务器还没有返回它已经完成。删除 wait:true 应该使更改的事件触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:50:32.700

您的代码中有错误：

```
person.save(person,{ 
```

您应该为您的保存调用或仅提供选项提供属性对象，而不是模型本身。删除`person,`并检查它是否有效。`wait:true`应该设置，以确保您更改为由服务器验证的正确数据。

# java - 从地图中获取密钥及其特定值

> ID：13550441
> 
> 赞同：1
> 
> 时间：2012-11-25T11:06:14.860
> 
> 标签：java, map, set

我正在使用 Map 如下

```
Map<String, String> propMap = new LinkedHashMap<String, String>(); 
```

我看到我可以使用两种方法`keySet()`（获取键列表）和值来获取值列表，但我的问题是如何在它们之间建立关联，例如 key1 的值为 2。

我想使用如下获取值

```
 Map<String, String> propMap2 = propterm.getPropMap();
    Set<String> keySet = propMap2.keySet(); 
```

但我如何将它与他各自的价值联系起来？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T11:07:42.243

如果您想使用每一对and ，您可以使用`propMap.entrySet()`返回 a `Map.Entry`of 的方法：-`key, value``key``value`

```
for (Map.Entry<String, String> entry: propMap.entrySet()) {
    System.out.println(entry.getKey() + " : " + entry.getValue());
} 
```

* * *

或者，如果您想知道如何使用 来执行此操作`propMap.keySet()`，您可以遍历`Set<Key>`获得的 ，并为每个键使用`propMap.get(key)`，以获取特定键的值：-

```
Set<String> keySet = propMap2.keySet();

for (String key: keySet) {
    System.out.println(propMap.get(key));
} 
```

* * *

从[**这篇文章**](https://stackoverflow.com/questions/3870064/performance-considerations-for-keyset-and-entryset-of-map)的答案： -

使用后一种方法，如果您定期访问该`key-value`对，则对于每个键，`map.get()`都会调用该方法，在 a 的情况下，该方法需要评估对象`HashMap`的`hashCode()`和`equals()`方法`key`以找到关联的值*。在第一种情况下`(entrySet)`，消除了额外的工作。

# java - Eclipse - 组织字段声明

> ID：13550445
> 
> 赞同：1
> 
> 时间：2012-11-25T11:07:20.993
> 
> 标签：java, eclipse

我正在 Eclipse 上使用 Google 的 WindowBuilderPro 开发桌面应用程序。

但是，它会生成很多这样的代码：

```
protected JLabel lblNewLabel_2;
protected JLabel lblNewLabel_3;
protected JLabel lblNewLabel;
protected JLabel lblNewLabel_4;
protected JLabel lblNewLabel_5; 
```

无论如何要组织它，以便它像这样合并？

```
protected JLabel lblNewLabel_2, lblNewLabel_3, lblNewLabel, lblNewLabel_4, lblNewLabel_5; 
```

仅字段声明就占用了大约 100 行...

# iphone - 当用户触摸视图中的任何位置时隐藏表格视图

> ID：13550449
> 
> 赞同：0
> 
> 时间：2012-11-25T11:07:44.847
> 
> 标签：iphone, ios5, ios4

当用户单击下拉列表之类的一个按钮时，我正在创建一个表格。我有文本字段和文本视图在同一个视图上，当用户触摸视图中的任何位置或任何文本字段或文本视图时，我想隐藏该表视图.请帮助我任何人都知道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T11:32:26.170

要检测用户是否点击了视图，您应该使用该`touchesBegan`方法。要检测用户是否在 a 内单击，`UITextField`您应该将您的视图声明为委托并实现该方法

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField; 
```

对于 UITextView，你应该实现

```
- (BOOL)textViewShouldBeginEditing:(UITextView *)textView; 
```

在这些方法中，您只需隐藏您的表格视图。

# c++ - 类构造函数中的数组

> ID：13550450
> 
> 赞同：2
> 
> 时间：2012-11-25T11:07:56.233
> 
> 标签：c++

例如，我有一个带有 ints 数组作为参数的构造函数的类：

```
A(int* array) : m_array(array) {} 
```

我可以这样使用它：

```
int array[] = { ... }
A a(array); 
```

或者像这样：

```
int* array = new int[10];
A a(array); 
```

如果对象然后使用它数组，它必须（或者可能不是？）在析构函数中删除它（如果它是动态的）。但是他怎么会知道，这个数组的内存是动态分配的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T11:11:20.200

你无法知道它是否是动态分配的，因为它毕竟`int* array`是一个`int`指针，而不是一个数组。你不妨通过：

```
int i;
A a(&i); 
```

正如你可以想象的那样，如果你尝试`delete[]`那个，或者尝试`m_array[N]`使用 N > 0 访问，就会发生不好的事情。

所以你必须依靠调用者来做正确的事情；您无法验证或强制执行它。您所拥有的只是一个`int`. 谁创造了它`int`，或者如何或是否有更多`int`的人跟随它，将是未知的。

如果您想要更安全，请使用`std::vector`. 这就是它的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T11:11:02.863

您在构造函数中初始化数组，因此它将始终被初始化。它是在代码中预定义的，它将被分配。如果有其他构造函数没有分配你的数组，你需要做这个检查。

顺便说一句，这是假设您分配的数组是该类的成员。如果您将它分配给构造函数中的新堆栈变量，您将无法在析构函数中删除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T11:12:21.233

您无法知道它是什么，因为静态数组也会衰减为指针。

基本上你只需要传递给构造函数的数组的值。您不需要知道它是动态分配的还是静态分配的数组。重要的是数据成员数组，它是您的类接口的一部分，您要将数据复制到其中。作为参数传递给构造函数的数组的责任应该由调用者负责，关于它的删除和生命周期。

`std::vector`如果您使用而不是原始数组，它将使您的生活更轻松。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T11:12:56.257

据我了解，您想问的是析构函数是否会释放您分配给数组的内存。

不，您使用 new 分配的内存必须由您在析构函数中或指针在范围内的其他地方删除，因为您的内存分配不在构造函数内部而是在外部。

# java - 两个相互连接的日期选择器同时调用两个监听器

> ID：13550451
> 
> 赞同：1
> 
> 时间：2012-11-25T11:07:57.590
> 
> 标签：java, android, datepicker, oncreate, listeners

我有两个相互连接的日期选择器，因为当我更改第一个选择器的日期时，第二个选择器的日期也会自动更改，这两个选择器有一个称为日期更改侦听器的侦听器，如下所示

```
 public class birthDate extends Activity{

    Calendar c = Calendar.getInstance();
    int currentYear = c.get(Calendar.YEAR); 
    int currentMonth = c.get(Calendar.MONTH);
    int currentDay = c.get(Calendar.DAY_OF_MONTH);

    TextView birthDatetv;
    DatePicker birthDayDatePicker,periodDatePicker;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);  

        setContentView(R.layout.birthdate);

        birthDatetv = (TextView)findViewById(R.id.textViewDateBirth);

        birthDayDatePicker = (DatePicker)findViewById(R.id.DatePickerBirthDay);
        periodDatePicker = (DatePicker)findViewById(R.id.DatePickerPeriod);

        periodDatePicker.init(currentYear, currentMonth, currentDay, new OnDateChangedListener()
        {

            @Override
            public void onDateChanged(DatePicker periodDatePicker, int currentYear, int currentMonth,int currentDay) {
                // TODO Auto-generated method stub
                birthDateCalculations();
            }
        });

        birthDayDatePicker.init(currentYear, currentMonth, currentDay, new OnDateChangedListener () {

            @Override
            public void onDateChanged(DatePicker birthDayDatePicker, int currentYear, int currentMonth, int currentDay) {
                // TODO Auto-generated method stub

                periodDateCalculations();

                }
        });

} 
```

正如我之前提到的，选择器是连接的，所以当我更改一个选择器日期时，另一个也会更改，因此将调用两个日期选择器的两个侦听器，我只想要与用户选择器相关的侦听器将其日期更改为调用，知道该怎么做吗？

如果可能有帮助，这是听众执行的方法

```
public void birthDateCalculations ()
{

    Calendar start = Calendar.getInstance();

    int periodYear = periodDatePicker.getYear();
    int periodMonth = periodDatePicker.getMonth();
    int periodDay = periodDatePicker.getDayOfMonth();

    start.set(periodYear, periodMonth, periodDay);
    birthDayDatePicker.setDescendantFocusability(DatePicker.FOCUS_BLOCK_DESCENDANTS);
    periodDatePicker.setDescendantFocusability(DatePicker.FOCUS_BLOCK_DESCENDANTS);

    Date periodDate = start.getTime();
    int daysToAdd = 280;
    Calendar cal = Calendar.getInstance();

    cal.setTime(periodDate);
    cal.add(Calendar.DAY_OF_MONTH,daysToAdd );
    System.err.println("-----" +cal.getTime());
    int birthYearAfterCalc = cal.getTime().getYear()+1900;
    System.err.println("birthYearAfterCalc-----" + birthYearAfterCalc);
    int birthMonthAfterCalc = cal.getTime().getMonth();
    System.err.println("birthMonthAfterCalc----" + birthMonthAfterCalc);
    int birthDayAfterCalc = cal.getTime().getDate();
    System.err.println("birthDayAfterCalc"+birthDayAfterCalc);

    //user edit period to get birth
    if( periodDay <= currentDay && periodMonth <= currentMonth && periodYear <= currentYear){
    //the program runs normally
    birthDayDatePicker.updateDate(birthYearAfterCalc, birthMonthAfterCalc, birthDayAfterCalc);

        }
        else {

        new AlertDialog.Builder(birthDate.this)

                        .setTitle("Wrong Data Input!")

                        .setMessage("Error in period date input")

                        .setNeutralButton("Ok",

                        new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog,

                        int which) {

                        }

                        }).show();

          periodDatePicker.updateDate(currentYear,currentMonth, currentDay);
            birthDayDatePicker.updateDate(currentYear, currentMonth, currentDay);   

                    }

}

public void periodDateCalculations ()
{
    Calendar start2 = Calendar.getInstance();

    // get the chosen date from birth date picker
    int birthYear = birthDayDatePicker.getYear();
    int birthMonth = birthDayDatePicker.getMonth();
    int birthDay = birthDayDatePicker.getDayOfMonth();

    //set the chosen date to calendar instance

    start2.set(birthYear, birthMonth, birthDay);

    birthDayDatePicker.setDescendantFocusability(DatePicker.FOCUS_BLOCK_DESCENDANTS);
    periodDatePicker.setDescendantFocusability(DatePicker.FOCUS_BLOCK_DESCENDANTS);

    //get the date 
    Date birthDate = start2.getTime();
    //int constrain = currentMonth + 9;

    int daysToAdd = -280;

    //another instance from calendar 
    Calendar cal2 = Calendar.getInstance();

    //set birth date chosen to calendar
    cal2.setTime(birthDate);

    //add -280 day to birth day to get period date
    cal2.add(Calendar.DAY_OF_MONTH,daysToAdd);
    System.err.println("-----" +cal2.getTime());
    int periodYearAfterCalc = cal2.getTime().getYear()+1900;
    System.err.println("periodYearAfterCalc-----" + periodYearAfterCalc);
    int periodMonthAfterCalc = cal2.getTime().getMonth();
    System.err.println("periodMonthAfterCalc----" + periodMonthAfterCalc);
    int periodDayAfterCalc = cal2.getTime().getDate();
    System.err.println("periodDayAfterCalc"+periodDayAfterCalc);

    //edit birth date picker from user  
        if(birthDay >= currentDay && birthMonth >= currentMonth && birthYear >= currentYear){
            //the program runs normally
            periodDatePicker.updateDate(periodYearAfterCalc, periodMonthAfterCalc, periodDayAfterCalc);     

            }
            else{

                            new AlertDialog.Builder(birthDate.this)

                            .setTitle("Wrong Data Input!")

                            .setMessage("birth day input error")

                            .setNeutralButton("Ok",

                            new DialogInterface.OnClickListener() {

                            public void onClick(DialogInterface dialog,

                            int which) {

                            }

                            }).show();

                            birthDayDatePicker.updateDate(currentYear,currentMonth, currentDay);
                            periodDatePicker.updateDate(currentYear, currentMonth, currentDay); 

                        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:24:49.707

您可以做的是在另一个侦听器执行操作时将相应的侦听器设置为 null，然后在完成任务后，您可以将其重新打开。

例如：

```
periodDatePicker.init(currentYear, currentMonth, currentDay, new OnDateChangedListener()
{

    @Override
    public void onDateChanged(DatePicker periodDatePicker, int currentYear, int currentMonth,int currentDay) {
        // TODO Auto-generated method stub
        birthDayDatePicker.init(currentYear, currentMonth, currentYear, null);
        birthDateCalculations();
        restartBirthDayDatePickerListener(); 
        // ^here you turn back on that init command that we have just set to null.
    }
}); 
```

不是一个迷人的解决方案，但也许你可以做出正面或反面。

# asp.net - MVC 3/4 HttpModule 或 ActionFilter

> ID：13550453
> 
> 赞同：7
> 
> 时间：2012-11-25T11:08:01.033
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, httpmodule

我需要为进入我的应用程序的每个请求检查一些东西（Cookie）。

在 ASP.NET 中，我们使用 HttpModule 来完成这项任务，问题应该在 MVC 中使用什么？一些 Global Filter ，或者我也可以使用 HttpModuler ， MVC 和常规 ASP.NET 之间的 Request PipeLine 有什么区别吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-25T11:24:36.950

MVC 是对 ASP.NET 的抽象，因此它们的“钩子”实际上取决于您要在哪个级别注入逻辑。动作过滤器将允许您挂钩 MVC 特定事件：

*   `OnActionExecuting`– 在执行控制器操作之前调用此方法。
*   `OnActionExecuted`– 在执行控制器操作后调用此方法。
*   `OnResultExecuting`– 在执行控制器操作结果之前调用此方法。
*   `OnResultExecuted`– 该方法在控制器动作结果执行后调用。

而 HttpModule 仅允许您挂钩到 ASP.NET（在其上构建 MVC）特定事件：

*   `BeginRequest`- 请求已开始。如果您需要在请求开始时执行某些操作（例如，在每个页面顶部显示广告横幅），请同步此事件。
*   `AuthenticateRequest`- 如果您想插入您自己的自定义身份验证方案（例如，根据数据库查找用户以验证密码），请构建一个同步此事件并以您想要的方式对用户进行身份验证的模块。
*   `AuthorizeRequest`- 此事件在内部用于实现授权机制（例如，将访问控制列表 (ACL) 存储在数据库中而不是文件系统中）。尽管您可以覆盖此事件，但这样做的充分理由并不多。
*   `PreRequestHandlerExecute`- 此事件在 HTTP 处理程序执行之前发生。
*   `PostRequestHandlerExecute`- 此事件在 HTTP 处理程序执行后发生。
*   `EndRequest`- 请求已完成。您可能想要构建一个调试模块，该模块在整个请求中收集信息，然后将信息写入页面。

所以这真的取决于你什么时候需要挂钩你的事件以及你需要哪些事件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T11:20:55.597

如果 HttpModule 之前为您工作得很好，那么它将继续使用 Mvc。

您问题的其他部分范围很广，并且认为您也可以阅读一篇关于[asp.net-mvc 管道和可扩展性](http://www.simple-talk.com/content/article.aspx?article=1358)的好文章。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T11:31:32.587

我使用全局操作过滤器做了类似的事情。它工作得很好，并使您的代码集成在您的应用程序中。

当然，HTTP 模块也可以工作，但这意味着将代码与主应用程序分开并单独维护它。除非您的代码跨越多个站点或用于多个应用程序，或者需要使用 Web 表单站点，否则我将使用全局过滤器。

# delphi - DateTimeToFileDate 不起作用

> ID：13550456
> 
> 赞同：0
> 
> 时间：2012-11-25T11:08:10.103
> 
> 标签：delphi, delphi-xe2

我有这个代码：

```
program Project1;

{$APPTYPE CONSOLE}
{$R *.res}

uses
  System.SysUtils, System.DateUtils, System.IOUtils;

var
  fFileName: TFilename;
  dtFileCreationTime, dtFileLastAccessTime, dtFileLastWriteTime: TTimeStamp;

begin
  try
    { TODO -oUser -cConsole Main : Insert code here }

    fFileName := 'myfilename.ext'; // here i insert correct path
    dtFileCreationTime := DateTimeToTimeStamp(EncodeDateTime(1981, 10, 5, 20,
      35, 40, 10));
    dtFileLastAccessTime := DateTimeToTimeStamp(EncodeDateTime(1982, 11, 6, 21,
      36, 41, 11));
    dtFileLastWriteTime := DateTimeToTimeStamp(EncodeDateTime(1983, 12, 7, 22,
      37, 42, 12));

    TFIle.SetCreationTime(fFileName,
      DateTimeToFileDate(TimeStampToDateTime(dtFileCreationTime)));
    TFIle.SetLastAccessTime(fFileName,
      DateTimeToFileDate(TimeStampToDateTime(dtFileLastAccessTime)));
    TFIle.SetLastWriteTime(fFileName,
      DateTimeToFileDate(TimeStampToDateTime(dtFileLastWriteTime)));

    Writeln('FileCreationTime   => ',
      DateTimeToStr(TFIle.GetCreationTime(fFileName)));
    Writeln('FileLastAccessTime => ',
      DateTimeToStr(TFIle.GetLastAccessTime(fFileName)));
    Writeln('FileLastWriteTime  => ',
      DateTimeToStr(TFIle.GetLastWriteTime(fFileName)));

  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
  Readln;

end. 
```

只是我想设置文件的日期，但它不起作用，我在哪里犯了错误？感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T11:19:53.100

您调用的方法需要`TFile`一个`TDateTime`. 所以删除`DateTimeToFileDate`电话。

```
TFIle.SetCreationTime(fFileName, TimeStampToDateTime(dtFileCreationTime)); 
```

当然，您可以删除时间戳间接。

```
TFIle.SetCreationTime(fFileName, EncodeDateTime(1981, 10, 5, 20, 35, 40, 10)); 
```

# c# - 在 MouseDown 事件中，更改图像的大小

> ID：13550460
> 
> 赞同：-2
> 
> 时间：2012-11-25T11:08:37.600
> 
> 标签：c#, wpf

我有一个需要在运行时更改大小的图像，我想做的是当用户按下鼠标左键并且光标位于图像的边框上时，然后当他移动鼠标光标时图像大小根据光标所在的位置而变化。

这是我到目前为止所拥有的：

```
 Point p = e.GetPosition(this);
   Image img = (Image)e.Source;
   var pos =Mouse.GetPosition(this);

   if ((p.X == 89 && (p.Y > 204 && p.Y < 252)) || (p.Y == 245 && (p.X > 89 && p.X < 138)) || (p.Y == 213 && (p.X > 89 && p.X < 138)) || p.X == 138 && p.Y > 204 && p.Y < 252)
   {
       img.Width = p.X;
       img.Height = p.Y;
   } 
```

问题是图像不会根据光标而改变。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T11:51:58.437

问题在于您的代码逻辑：图像只会在**非常特定**的坐标上发生变化。`x == 138`例如，我花了很长时间才准确地单击图像，**即便如此**，我也花了更多时间来找到匹配的像素`204 < y < 252`。

当我**确实**找到正确的位置时，图像会根据要求自行调整大小。

我建议重新检查您的语句中的逻辑，`if`至少 - 允许更大范围的坐标（例如`x <= 40 && x >= 70`，而不是 just `x == 83`）

# c++ - zlib 压缩结构中的浮点数

> ID：13550466
> 
> 赞同：2
> 
> 时间：2012-11-25T11:09:28.997
> 
> 标签：c++, compression, byte, zlib

我一直在寻找一种压缩方法，使用 zlib 库（和函数`compress`）一个包含浮点变量的结构。

我看到的每个示例都展示了如何压缩字符串，特别是`unsigned char*`.

我的结构很简单：

```
struct Particle{
    float x;
    float y;
    float z;
}; 
```

我正在调用压缩函数，如下所示：

```
uLong initSize = sizeof(Particle);
uLongf destSize = initSize * 1.1 + 12;
Bytef *dataOriginal = (Bytef*)malloc( initSize );
Bytef *dataCompressed = (Bytef*)malloc( destSize );

Particle p;
memset( &p, 0, sizeof(Particle) );

p.x = 10.24;
p.y = 23.5;
p.z = 7.4;

memcpy( dataOriginal, &p, sizeof(p) );
compress( dataCompressed, &destSize, dataOriginal, initSize ); 
```

但是当我尝试解压缩我的数据以查看里面的内容时，我无法回到我的初始浮点值：

```
Bytef *decomp = (Bytef*)malloc( initSize );
uncompress( decomp, &initSize, dataCompressed, destSize );

for( int i = 0 ; i < initSize ; i++ ){
    std::cout << (float)decomp[i] << std::endl;
} 
```

如果有人有这个问题的解决方案，我现在已经两天了......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T14:59:31.450

您需要将解压缩的数据复制回 Particle 结构，就像您首先将其复制出来一样。（或者你可以只使用演员而不是副本）。然后您将恢复结构中的原始浮点数。不管你认为你用'decomp[i]`做什么都没有任何意义。

然而，这有几个问题。首先，这只能保证在同一台机器上使用相同的编译器，甚至只能在相同版本的编译器中工作。如果不同的编译器或不同的版本选择以不同的方式对齐结构，则压缩数据将无法在两者之间传输。如果不同机器之间的浮点数表示不同，则压缩数据将不可传输。

此外，压缩三个浮点数时不会得到任何压缩。我认为这只是压缩大量此类 Particle 结构的前奏。那么也许你会得到这个。

最好先将浮点数转换为整数所需的精度。您应该知道应用程序的范围和有用的位数。这将在使用 之前进行压缩`compress()`，仅使用所需的位数，而不是每个浮点数 32。然后使用移位操作将这些整数可移植地转换为一系列字节。然后，您还可以将差分应用于连续粒子（例如 x1-x2、y1-y2、z1-z2），如果连续粒子之间存在相关性，这可能会改善压缩。

顺便说一句，`* 1.1 + 12`您应该使用代替`compressBound()`，它以 zlib 库为未来版本保证的方式完全满足您的需求。

# translation - 在 zend2 中设置错误消息的翻译

> ID：13550467
> 
> 赞同：1
> 
> 时间：2012-11-25T11:09:29.673
> 
> 标签：translation, zend-framework2

我很难在 Zend 2 中为错误消息（尝试提交无效表单时显示）设置默认语言。我已经从快速入门教程下载了代码，并将以下行添加到 ..module\Album\config\模块.config.php：

```
 //[...]
'translator' => array(
     'locale' => 'de_DE',
     'translation_patterns' => array(
        array(
            'type' => 'gettext',
            'base_dir' => __DIR__ . '/../language',
            'pattern' => '%s.mo',
        ),
    ),
), 
```

和

```
 $translator = $this->getServiceLocator()->get('translator');
    $translator->setLocale('de_DE'); 
```

在我的控制器中。两者似乎都不起作用。在...\vendor\zendframework\zendframework\resources\languages 中有一些翻译。我没有安装 Intl PHP 扩展，但我非常希望在没有这个扩展的情况下翻译也能正常工作。

谢谢你的帮助，

安德烈亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:32:22.820

经过一番研究，似乎确实需要 Intl PHP Extension。使用 Intl Extension，您可以将默认 Translator 设置为抽象验证器。从[文档](http://framework.zend.com/manual/2.0/en/modules/zend.validator.messages.html%20docs)：

```
$translator = new Zend\I18n\Translator\Translator();
$translator->addTranslationFile(
   'phpArray',
   'resources/languages/en.php',
   'default',
   'en_US'
);
Zend\Validator\AbstractValidator::setDefaultTranslator($translator); 
```

# c++ - 使用 CLI 库时程序集加载失败

> ID：13550468
> 
> 赞同：0
> 
> 时间：2012-11-25T11:09:55.287
> 
> 标签：c++, c++-cli

由于某种原因，我无法启动我的 64 位应用程序。我收到一个错误：

```
14:17:41:587 Error: The type initializer for 'Va.MBClient.Program' threw an
 exception.

Unhandled Exception: System.TypeInitializationException: The type initializer fo
r 'Va.MBClient.Program' threw an exception. ---> System.IO.FileNotFoundExce
ption: Could not load file or assembly 'CGateCliAdapter.dll' or one of its depen
dencies. The specified module could not be found.
   at Va.MBClient.Program..cctor()
   --- End of inner exception stack trace ---
   at Va.MBClient.Program.Main(String[] args) in c:\Oleg\projects\Va.M
BClient\Va.MBClient\Program.cs:line 87 
```

不知何故，这与我的 CLI DLL 文件有关，因为当我注释掉`private static CGateCliAdapterMain cliAdapter = new CGateCliAdapterMain();`引用 CLI 库的行时，我可以启动应用程序。

我确实在 Visual Studio 中看到了这一点：

```
Microsoft.VisualStudio.HostingProcess.Utilities.dll!Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
mscorlib.dll!System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool preserveSyncCtx)
mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool preserveSyncCtx)
mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state)
mscorlib.dll!System.Threading.ThreadHelper.ThreadStart()
[Native to Managed Transition] 
```

我试图用它`fuslogvw`来捕获绑定失败，但由于某种原因它无法捕获它！所以现在我不知道如何解决这个问题。

我使用了[Dependency Walker](http://en.wikipedia.org/wiki/Dependency_Walker)，发现缺少以下文件：

```
MSVCR110.DLL
GPSVC.DLL
IESHIMS.DLL
MF.DLL
MFPLAT.DLL
MFREADWRITE.DLL
WLANAPI.DLL 
```

* * *

我尝试`wlanapi.dll`使用应用程序直接复制到一个文件夹，这有帮助（DLL 文件从丢失的列表中消失了），但是为什么当我安装*Visual C++ Redistributable for Visual Studio 2012*时 DLL 文件不可见？我已尝试重新安装并修复安装。

另外，我找不到 DLL 文件`MSVCR110.DLL`和`MSVCP110.DLL`.

我不知道为什么。我曾多次尝试为 Visual Studio 2012 重新安装 Visual C++ Redistributable。

* * *

更新：

现在我又因为某种原因无法运行我的程序！一天后，Dependency Walker 再次声称缺少 DLL 文件。但是，我确实有“Visual C++ Redistributable for Visual Studio 2012”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T13:26:57.650

我找到了解决方案。需要安装[Visual C++ Redistributable for Visual Studio 2012 。](http://www.microsoft.com/en-us/download/details.aspx?id=30679)

# php - PHP从webroot外部的文件中包含webroot中的文件

> ID：13550471
> 
> 赞同：5
> 
> 时间：2012-11-25T11:10:25.387
> 
> 标签：php, include

我的 webroot 外部有一个 php 文件，我想在其中包含一个 webroot 内部的文件。

> webroot外部的文件夹
> ->我要包含
> webroot的php文件
> ->要包含的文件

所以我必须向上一个目录，但这不起作用：

```
include('../webroot/file-to-include.php'); 
```

包含完整路径也不起作用：

```
include('home/xx/xx/domains/mydomain/webroot/file-to-include.php'); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-25T11:12:35.160

完整路径应该是：

```
include('/home/xx/xx/domains/mydomain/webroot/file-to-include.php'); 
```

或者你应该像这样设置路径：

```
include(__DIR__ . '/../webroot/file-to-include.php');  // php version >= 5.3
include(dirname(__FILE__) . '/../webroot/file-to-include.php');  // php version < 5.3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T11:41:56.040

将它放在一个公共文件中，由 webroot 之外的所有 php 源共享：

```
<?php

  define('PATH_TO_WEBROOT', '/home/xx/xx/domains/mydomain/webroot'); 
```

然后使用以下内容包含文件。

```
<?php
  include (PATH_TO_WEBROOT.'/file-to-include.php'); 
```

如果您的 webroot 的位置发生变化，您只需在代码库中更改一次。

您可以通过设置指令将 php 配置为[自动](http://www.php.net/manual/fr/ini.core.php#ini.auto-prepend-file)将给定文件添加到所有脚本中。`auto_prepend_file`例如`PATH_TO_WEBROOT`，该文件可以包含常量或`require_once`包含它的文件。此设置可以在每个域或每个主机的基础上完成（请参阅[ini 部分文档](http://www.php.net/manual/en/ini.sections.php)）。

此外，如果您广泛使用类，请考虑使用[自动加载功能。](http://php.net/manual/fr/language.oop5.autoload.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T11:15:25.333

尝试在你的完整路径前加上一个斜杠，所以它看起来像

`include('/home/xx/xx/domains/mydomain/webroot/file-to-include.php');`

否则，它将被解释为相对路径。

您还可以尝试[将 dir 更改](http://php.net/manual/en/function.chdir.php)为 webroot 并查看这是否有效 - 出于调试目的：

```
chdir("/home/xx/xx/domains/mydomain/webroot");
include "your_file.php"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-22T09:15:18.393

我将受保护的数据放在名为的文件中`conn.txt`，

![来自 FileZilla 的根文件图像](../Images/28ba0313c38c113e5e415b7e3fffca65.png)

然后我使用了以下 PHP 命令：

```
$DbInfoFile = "../conn.txt"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-10T17:52:31.770

快进到今天（2021 年），另一种方法是简单地将 PHP`include_path`指令添加到您的 php.ini（或 user.ini）中，以指向包含文件夹，无论它在哪里（在公共根目录内部或外部）。这种方法融合了在您的项目中更改一行代码的便利性，而无需触及 PHP 代码。我不知道这是否适用于 Windows 机器，因为我在 CentOS 上。

**示例：（** `include_path = ".:/home/{acct-name}/{include-path}"`这将是 public_html 或任何您的公用文件夹的上一级）

这种混合方法允许您`include 'file-to-include.php';`在 PHP 代码中简单地调用，而无需经历定义根的整个麻烦，同时通过仅修改站点范围内的一行代码来保持更改包含文件的灵活性。

顺便说一句，您可以有多个包含位置。在这种情况下，您可以使用冒号分隔这两个位置，例如`include_path = ".:/home/{acct-name}/{include-path-1}:/home/{acct-name}/{include-path-2}"`.

* * *

## 回答 #6

> 赞同：-6
> 
> 时间：2012-11-25T11:13:26.647

这应该工作

```
$_SERVER['DOCUMENT_ROOT']/home/xx/xx/domains/mydomain/webroot/file-to-include.php 
```

并确保您可以访问该级别。

# javascript - Twitter Bootstrap 警报消息关闭并再次打开

> ID：13550477
> 
> 赞同：105
> 
> 时间：2012-11-25T11:10:55.823
> 
> 标签：javascript, jquery, twitter-bootstrap, alert

我对警报消息有疑问。它正常显示，当用户按下`x`（关闭）时我可以关闭它，但是当用户尝试再次显示它时（例如，单击按钮事件）则不显示。（此外，如果我将此警报消息打印到控制台，它等于`[]`。）我的代码在这里：

```
 <div class="alert" style="display: none">
   <a class="close" data-dismiss="alert">×</a>
   <strong>Warning!</strong> Best check yo self, you're not looking too good.
 </div> 
```

和事件：

```
 $(".alert").show(); 
```

**PS！**仅在发生某些事件（例如，单击按钮）后，我才需要显示警报消息。或者我做错了什么？

* * *

## 回答 #1

> 赞同：183
> 
> 时间：2012-11-25T11:22:55.760

Data-dismiss 完全删除该元素。请改用 jQuery 的 .hide() 方法。

**快速修复方法：**

使用内联 javascript 隐藏元素 onclick，如下所示：

```
<div class="alert" style="display: none"> 
    <a class="close" onclick="$('.alert').hide()">×</a>  
    <strong>Warning!</strong> Best check yo self, you're not looking too good.  
</div>

<a href="#" onclick="$('alert').show()">show</a> 
```

[http://jsfiddle.net/cQNF​​L/](http://jsfiddle.net/cQNFL/)

*然而，这应该只在你懒惰的情况下使用（如果你想要一个可维护的应用程序，这不是一件好事）。*

**做对的方法：**

创建用于隐藏元素的新数据属性。

Javascript：

```
$(function(){
    $("[data-hide]").on("click", function(){
        $("." + $(this).attr("data-hide")).hide()
        // -or-, see below
        // $(this).closest("." + $(this).attr("data-hide")).hide()
    })
}) 
```

然后在标记中将 data-dismiss 更改为 data-hide。[jsfiddle 的示例](http://jsfiddle.net/cQNFL/21/)。

```
$("." + $(this).attr("data-hide")).hide() 
```

这将隐藏具有在 data-hide 中指定的类的所有元素，即：`data-hide="alert"`将隐藏具有警报类的所有元素。

[Xeon06](https://stackoverflow.com/users/104999/xeon06)提供了另一种解决方案：

```
$(this).closest("." + $(this).attr("data-hide")).hide() 
```

这只会隐藏最近的父元素。如果您不想给每个警报一个唯一的类，这将非常有用。但是请注意，您需要在警报中放置关闭按钮。

.closest 来自[jquery doc](http://api.jquery.com/closest/)的定义：

> 对于集合中的每个元素，通过测试元素本身并向上遍历其在 DOM 树中的祖先来获取与选择器匹配的第一个元素。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-05-19T07:29:16.680

我只是使用模型变量来显示/隐藏对话框并删除了`data-dismiss="alert"`

**例子：**

```
<div data-ng-show="vm.result == 'error'" class="alert alert-danger alert-dismissable">
    <button type="button" class="close" data-ng-click="vm.result = null" aria-hidden="true">&times;</button>
    <strong>Error  !  </strong>{{vm.exception}}
</div> 
```

为我工作，不再需要外出 jquery

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-03-24T23:54:16.753

我认为解决这个问题的一个好方法是利用 Bootstrap 的`close.bs.alert`事件类型来隐藏警报而不是删除它。Bootstrap 公开此事件类型的原因是您可以覆盖从 DOM 中删除警报的默认行为。

```
$('.alert').on('close.bs.alert', function (e) {
    e.preventDefault();
    $(this).addClass('hidden');
}); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-09-19T11:49:37.580

如果您使用的是诸如 knockout.js 之类的 MVVM 库（我强烈推荐），您可以更简洁地执行此操作：

```
<div class="alert alert-info alert-dismissible" data-bind="visible:showAlert">
   <button type="button" class="close" data-bind="click:function(){showAlert(false);}>
        <span aria-hidden="true">&times;</span>
        <span class="sr-only">Close</span>
   </button>
   Warning! Better check yourself, you're not looking too good.
</div> 
```

[http://jsfiddle.net/bce9gsav/5/](http://jsfiddle.net/bce9gsav/5/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-03-06T11:17:16.810

这对我最有效：

```
$('.alert').on('close.bs.alert', function (e) {
    e.preventDefault();
    $(this).hide();
}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-12-03T11:33:45.723

因此，如果您想要一个可以处理动态 html 页面的解决方案，因为您已经包含它，您应该使用 jQuery 的 live 来为现在和将来在 dom 中或被删除的所有元素设置处理程序。

我用

```
$(document).on("click", "[data-hide-closest]", function(e) {
  e.preventDefault();
  var $this = $(this);
  $this.closest($this.attr("data-hide-closest")).hide();
});
```

```
.alert-success {
    background-color: #dff0d8;
    border-color: #d6e9c6;
    color: #3c763d;
}
.alert {
    border: 1px solid transparent;
    border-radius: 4px;
    margin-bottom: 20px;
    padding: 15px;
}
.close {
    color: #000;
    float: right;
    font-size: 21px;
    font-weight: bold;
    line-height: 1;
    opacity: 0.2;
    text-shadow: 0 1px 0 #fff;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="alert alert-success">
  <a class="close" data-hide-closest=".alert">×</a>
  <strong>Success!</strong> Your entries were saved.
</div>
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-06-29T20:53:05.427

上述所有解决方案都使用外部库，无论是 angular 还是 jQuery，以及旧版本的 Bootstrap。因此，这里是 Charles Wyke-Smith 的**纯 JavaScript**解决方案，适用于**Bootstrap 4**。是的，Bootstrap 需要 jQuery 用于其自己的模态和警报代码，但不再是每个人都使用 jQuery 编写自己的代码。

这是警报的html：

```
<div id="myAlert" style="display: none;" 
    class="alert alert-success alert-dismissible fade show">
    <button type="button" class="close" data-hide="alert">&times;</button>
    <strong>Success!</strong> You did it!
</div> 
```

请注意，最初警报是隐藏的（`style="display: none;"`），而不是标准`data-dismiss="alert"`，我们在这里使用`data-hide="alert"`。

这是显示警报并覆盖关闭按钮的 JavaScript：

```
var myAlert = document.getElementById('myAlert');
// Show the alert box
myAlert.style.display = 'block';
// Override Bootstrap's standard close action
myAlert.querySelector('button[data-hide]').addEventListener('click', function() {
    myAlert.style.display = 'none';
}); 
```

如果您希望在代码的其他地方以编程方式隐藏或显示警报，只需执行 `myAlert.style.display = 'none';`或`myAlert.style.display = 'block';`。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-05-06T11:24:45.253

我也遇到了这个问题，简单地破解关闭按钮的问题是我仍然需要访问标准引导程序警报关闭事件。

我的解决方案是编写一个[小型的、可定制的 jquery 插件](https://github.com/davesag/jquery-bs3Alert)，它可以以最少的麻烦注入一个正确形成的 Bootstrap 3 警报（根据需要可以有或没有关闭按钮），并允许您在盒子关闭后轻松地重新生成它。

有关用法、测试和示例，请参阅[https://github.com/davesag/jquery-bs3Alert 。](https://github.com/davesag/jquery-bs3Alert)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-04-20T13:10:04.667

我同意 Henrik Karlsson 发布并由 Martin Prikryl 编辑的答案。我有一个建议，基于可访问性。我会将 .attr("aria-hidden", "true") 添加到它的末尾，使其看起来像：

```
$(this).closest("." + $(this).attr("data-hide")).attr("aria-hidden", "true"); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-25T11:22:05.173

问题是由使用 引起的`style="display:none"`，您应该使用 Javascript 隐藏*警报*，或者至少在显示警报时，删除 style 属性。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-01-06T18:39:45.013

基于其他答案并将 data-dismiss 更改为 data-hide，此示例处理从链接打开警报并允许重复打开和关闭警报

```
$('a.show_alert').click(function() {
    var $theAlert = $('.my_alert'); /* class on the alert */
    $theAlert.css('display','block');
   // set up the close event when the alert opens
   $theAlert.find('a[data-hide]').click(function() {
     $(this).parent().hide(); /* hide the alert */
   });
}); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-07-22T09:11:21.797

我已经尝试了所有方法，对我来说最好的方法是使用内置的引导类 `.fade`和`.in`

例子：

```
<div class="alert alert-danger fade <?php echo ($show) ? 'in' : '' ?>" role="alert">...</div> 
```

*注意：在 jQuery 中，addClass('in') 显示警报，removeClass('in') 隐藏它。*

*有趣的事实：这适用于所有元素。不仅仅是警报。*

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-09-02T11:34:27.520

这是一个基于[Henrik Karlsson](https://stackoverflow.com/users/502126/henrik-karlsson)[回答](https://stackoverflow.com/a/13550556/1115187)的解决方案，但具有适当的**事件触发**（基于[Bootstrap 源](https://github.com/twbs/bootstrap/blob/2c2ac3356425e192f7537227508c809a14aa5850/js/alert.js#L25)）：

 **```
$(function(){
    $('[data-hide]').on('click', function ___alert_hide(e) {
        var $this = $(this)
        var selector = $this.attr('data-target')
        if (!selector) {
            selector = $this.attr('href')
            selector = selector && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7
        }

        var $parent = $(selector === '#' ? [] : selector)

        if (!$parent.length) {
            $parent = $this.closest('.alert')
        }

        $parent.trigger(e = $.Event('close.bs.alert'))

        if (e.isDefaultPrevented()) return

        $parent.hide()

        $parent.trigger($.Event('closed.bs.alert'))
    })
}); 
```

答案主要是给我的，作为一个注释。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-01-17T10:47:01.397

这不能简单地通过添加一个额外的“容器” div 并每次将删除的警报 div 添加回其中来完成。似乎对我有用？

HTML

```
<div id="alert_container"></div> 
```

JS

```
 $("#alert_container").html('<div id="alert"></div>');          
 $("#alert").addClass("alert alert-info  alert-dismissible");
 $("#alert").html('<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a><strong>Info!</strong>message'); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-12-25T19:50:17.220

**使用 JQuery 有一个非常简单的方法来做到这一点**

如果您`data-dismiss="alert"`从警报 div 中删除，您可以使用`x`按钮隐藏警报，方法是添加单击事件并与`display`警报的 css 属性交互。

```
$(".close").click(function(){
   $(this).parent().css("display", "none");
}); 
```

然后，当您再次需要它时，您可以再次切换该`display`属性。

**完整示例：**

```
<div class="alert alert-danger" role="alert" id="my_alert" style="display: none;">
   Uh Oh... Something went wrong
  <button type="button" class="close" aria-label="Close">
     <span aria-hidden="true">&times;</span>
  </button>
</div>

<script>
   $(".close").click(function(){
      $(this).parent().css("display", "none");
   });

   //Use whatever event you like
   $("#show_alert").click(function(){
      $("#my_alert).css("display", "inherit");
   });
<script> 
```**

# c# - 从 AVI 文件中提取和拆分 MP3 音频流

> ID：13550481
> 
> 赞同：2
> 
> 时间：2012-11-25T11:11:20.777
> 
> 标签：c#, .net, mp3, avi

我想通过`C#`在`.Net framework 4`. 我的应用程序的目标是从提供的文件
中提取音频流。 我从网上了解到，一个文件是一个容器，它可能包含不同的音频流。 如果提供的文件至少包含一个 MP3 音频流，那么我想将其提取并拆分。 我想将音频流拆分为用开始时间和结束时间标识的音频部分。`MP3``AVI`
`AVI`
`AVI`
`MP3``MP3`

我在 Internet 上查找了可以使用但没有成功的任何 .Net 库。
有人知道记录在案的 .Net 库会有用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T11:33:38.787

也许你可以试试这个： [**AviFile 库的简单 C# 包装器**](http://www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library)

它针对的是 AVI 视频，但可能有一些线索可以说明如何使用相同的方法仅提取音频。要么按原样使用它，要么使用示例将您需要的内容合并到您自己的代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T11:24:06.177

由于该任务的工具已经存在，我认为创建另一个工具没有任何意义，除非您对*如何*自己执行此操作并学习新东西感到好奇。

如果是这样，使用现成的库会破坏学习的整个想法，这就是为什么我强烈建议您尝试自己实现拆分器的原因。

您可以[**在线找到 AVI 文件格式的说明**](http://www.alexander-noe.com/video/documentation/avi.pdf)，这应该可以帮助您入门。

# list - 从 Scheme 中的列表中删除元素

> ID：13550482
> 
> 赞同：1
> 
> 时间：2012-11-25T11:11:29.137
> 
> 标签：list, lisp, scheme, element, removeall

这是我第一次发帖，我对计划有疑问。当输入这样的参数时，我必须从列表中删除所有出现的元素，同时作为参数传递：

```
]=> (rmobject '(1 2 3 5 0 2 3 5 3) 3) 
```

我收到一个错误：

```
The object (3 5 3 2 3 6 3) is not applicable 
```

我想这是因为第二个 lambda 不能正常工作，但为什么呢？

```
(define (rmobject list1 obj)
  (if (null? list1)
      '() 
       (if (= obj (car list1))
           ((lambda (list1) (cdr list1)) list1)
           ((lambda (list1) (list1)) list1)))
        (cons (car list1) (rmobject (cdr list1) obj))) 
```

我重写了代码，这在删除元素时可以正常工作，但正确的不能，并且两者都假设相同。提前致谢

```
(define (rmobject list1 obj)
  (if (null? list1)
     '() 
  (if (= obj (car list1))
      (rmobject (cdr list1) obj)
      (cons (car list1) (rmobject (cdr list1) obj))))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T15:05:53.100

您的代码中的第一个版本没有多大意义。为什么要`lambda`以这种方式使用 s？您应该递归调用正在定义*的相同*过程，而不是创建一次性匿名过程，这对于解决手头的问题不起作用。而这部分：`(list1)`导致错误`The object is not applicable`：您试图调用列表，就好像它是一个过程一样 - 因为它被括号包围。请记住，在 Scheme 中，像这样的语法：`(foo)`表示要调用该`foo` *过程。*

您的代码的第二个版本很好，这是实现`remove-all`过程的简单方法。不过有点吹毛求疵：当您发现自己在嵌套`if`s 时，这肯定表明 a`cond`会更合适。另请注意，使用`equal?`代替 是一个好主意`=`，这样您的程序将不仅仅适用于数字：

```
(define (rmobject list1 obj)
  (cond ((null? list1)
         '())
        ((equal? obj (car list1))
         (rmobject (cdr list1) obj))
        (else
         (cons (car list1)
               (rmobject (cdr list1) obj))))) 
```

供将来参考：您正在实施的过程通常包含在解释器中。例如，在 Racket 中，我们有`remove*`，它`equal?`用作测试相等性的默认过程：

```
(define (rmobject list1 obj)
  (remove* (list obj) list1)) 
```

此外，您可以使用`filter`@Maxwell 的答案。另一种写法：

```
(define (rmobject list1 obj)
  (filter (negate (curry equal? obj)) list1)) 
```

无论如何，这有效：

```
(rmobject '(1 2 3 5 0 2 3 5 3) 3)
=> '(1 2 5 0 2 5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T12:16:21.080

问题在于，在该行中，`((lambda (list1) (list1)) list1)))`您编写了一个接受参数 ( `list1`) 的函数，然后您尝试将其作为函数调用。因为该函数实际上是传递了一个列表，所以解释器退出并出现错误。

正如您在第二次尝试中发现的那样，使用您提出的算法通过 lambda 组合函数是不必要的，甚至是连贯的。即便如此，有许多技术比您在第二次尝试中使用的技术要简单得多。我将演示一个实际使用 lambda 的方法，以便您了解它是如何工作的。我所指的替代技术依赖于`filter`并像这样工作：

```
(define (rmobject list1 obj)
  (filter (lambda (x) (not (equal? x obj))) list1)) 
```

# xaml - 在 XAML 中获取父级

> ID：13550488
> 
> 赞同：0
> 
> 时间：2012-11-25T11:12:15.730
> 
> 标签：xaml, windows-runtime, parent-child, bing-maps, winrt-xaml

我有以下 XAML 代码：

```
<maps:Map Name="PlaygroundMap" Credentials="YOUR_BING_MAPS_KEY">
   <maps:MapItemsControl  
           x:Name="PlaygroundMapItems"
           my:MapExt.ClusteredItemsSource="{Binding Locations}" 
           ItemTemplate="{StaticResource PinTemplate}"/>
 </maps:Map> 
```

**ClusteredItemsSource**也是我自己的附加属性，带有以下代码（仅显示重要部分）：

```
private static void OnItemsReceived(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            var mapItemsControl = d as MapItemsControl;

            if(mapItemsControl == null) return;

            var map = VisualTreeHelper.GetParent(mapItemsControl); // this is always NULL
            var map2 = mapItemsControl.Parent; // this is always NULL

            var items = e.NewValue as IEnumerable<Location>;
             mapItemsControl.ItemsSource = items;
        } 
```

所以我的要求是在 OnItemsReceived 方法中有 MAP 参考。我认为这很容易，因为如果再次检查 XAML，您将看到 mapItemsControl 是 Map 的子级（或 map 是 mapItemsControl 的父级）。

但不知何故，变量 map 和 map2 始终为 NULL。这是正常行为还是？

此外，如果这种“父”方法不起作用，您能否建议我在 MapItemsControl 中获取地图参考的其他选项（准确地说，在我的自定义附加属性中获取地图参考）。

顺便说一句，我正在为 WinRT 使用 Bing Maps SDK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:30:26.630

如果您的控件不是可视化树的一部分，VisualTreeHelper 将无济于事 - 要么是因为它们尚未添加到其中（尚未引发 Loaded 事件），要么它们可能不使用标准的父/子控件关系触发器（通过一个逻辑上是 Panel、ContentControl 等的子级）

这里最好的方法实际上是忘记可视化树并使用绑定和视图模型。

# javascript - 在单页 Javascript 和 HTML 表单中显示数据

> ID：13550495
> 
> 赞同：1
> 
> 时间：2012-11-25T11:13:19.170
> 
> 标签：javascript, html

我是 Javascript 的新手。我可以在同一页面上显示来自 HTML 表单的直接数据吗？我的代码在这里：

```
<html>
  <head>
    <title></title>
  </head>
  <script>
    document.getElementById("btn").onclick = avc;
    function avc(){
      var a = document.getElementsByName("firstname").value;
      document.getElementsByName("abc").innerHTML = a;
    }
  </script>
  <body>
    <form method="post">
      First name: <input id="fname" type="text" name="firstname"><br>
      <input id="btn" type="submit">
    </form>
    <div name="abc"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:57:02.307

获取值时，也可以使用元素的 ID。

```
var a = document.getElementById('fname').value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T12:37:58.863

是的，你可以

```
<script>       
  document.getElementById('abc').innerHTML=document.getElementById('fname').value;
</script> 
```

在最后

如果您希望每次在文本框中写入内容时都会更改 div abc 中的值，请尝试以下操作：

```
<html>
  <head></head>
  <body>    
    <form method="post">
      First name: <input id="fname" type="text" name="firstname" onKeyUp="f()"><br>
      <input id="btn" type="submit">
    </form>
    <div id="abc"></div>

    <script>
      function f() {
        document.getElementById('abc').innerHTML=document.getElementById('fname').value;
      }

      f(document.getElementById('fname').value);
    </script>

  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T11:14:31.307

是的，但是您需要像这样为正确的元素下标...

```
var a = document.getElementsByName("firstname")[0].value; 
```

# c++ - 在 C++ 中的连续内存区域中存储多个结构

> ID：13550498
> 
> 赞同：0
> 
> 时间：2012-11-25T11:13:23.757
> 
> 标签：c++, memory-management, struct

我想将由多个不同类型的 POD 结构组成的状态变量存储到单个内存区域中。由于用于构成状态变量的结构组合是在运行时决定的，因此我不能将它们放入周围的结构或类中。另外我希望内存分配的数量尽可能少。最好的方法是什么？以下代码是否合法/可移植，还是会在某些平台/某些编译器上导致对齐错误？

```
struct TestA {
    int a;
    short b;
};

struct TestB {
    int c;
    float d;
    char e;
};

int main() {
    void* mem = new uint8_t[sizeof(TestA) + sizeof(TestB)];
    TestA* a1 = (TestA*) mem;
    a1->a = a1->b = 42;
    a1++;
    TestB* b = (TestB*) a1;
    b->c = 5;
    b->d = 23.f;
    b->e = 'e';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T11:56:25.250

您要做的基本上是“放置新”。因此，所有警告也适用于此。如果给定类型的内存位置没有正确对齐，那么您将陷入未定义的行为。在您的代码中：

```
a1++; 
```

不能保证给出一个正确对齐的地址`TestB`。所以你的代码不符合标准。

# r - 将平面添加到 scatterplot3d

> ID：13550501
> 
> 赞同：6
> 
> 时间：2012-11-25T11:13:53.997
> 
> 标签：r

我有一个直线方程

y=sqrt(c+x^2)

我想在 3d 散点图中添加一个平面，这样我的平面垂直于 xy 平面，上面给出的线是两个平面的交线。

我该怎么做呢？我不太明白 plane3d 是如何工作的。我读过[http://svitsrv25.epfl.ch/R-doc/library/scatterplot3d/html/scatterplot3d.html](http://svitsrv25.epfl.ch/R-doc/library/scatterplot3d/html/scatterplot3d.html)

但还是不明白。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T14:52:57.227

这可能是您正在寻找的：

```
library(scatterplot3d)
# y=sqrt(a+x^2) with x in (-0.5,0.5), z in (0,1) and a=0
a <- 0
x <- rep(seq(-0.5, 0.5, length = 200), each = 200)
y <- sqrt(a + x^2)
z <- rep(seq(0, 1, length = 200), 200)
scatterplot3d(x, y, z, highlight.3d = TRUE, pch = 20) 
```

![在此处输入图像描述](../Images/ced668b2d4c687b88f8a1384afdb23d4.png)

**编辑：**这将有助于了解您是如何添加这些其他点的，但让我们以第二个示例为例`?scatterplot3d`

```
 temp <- seq(-pi, 0, length = 50)
  x2 <- c(rep(1, 50) %*% t(cos(temp)))
  y2 <- c(cos(temp) %*% t(sin(temp)))
  z2 <- c(sin(temp) %*% t(sin(temp))) 
```

现在与其他人结合`x`并`x2`做同样的事情，我们得到：

```
scatterplot3d(c(x,x2), c(y,y2), c(z,z2), highlight.3d = TRUE, pch = 20) 
```

![在此处输入图像描述](../Images/d299eaed6127d4d9fba09cb8bee5b665.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-16T22:18:00.687

除了前面的答案，一旦你构建了一个 3-D 散点图，你可以通过创建一个模型并使用嵌套在`scatterplot3d()`容器中的函数对其进行解析来添加一个平面。它应该看起来像这样：

```
plot3d <- scatterplot3d(x, y, z, ... )
model  <- lm(y ~ sqrt(c + x^2) + z)
plot3d$plane3d(model) 
```

在这样的容器中拥有一个函数是一种非常奇怪的语法，但它可以工作，给你这样的东西（虚线平面在立方体中心附近可见）：

[![平面通过中心的 3-D 散点图](../Images/366c54be3e8e0b5418964145dbe1b24f.png)](https://i.stack.imgur.com/AxEww.jpg)

如果您想手动创建一个或多个平面，我会使用我在[此处](https://stackoverflow.com/questions/28633784/adding-a-plane-to-scatterplot3d/33181854#33181854)重新发布的 Uwe 的方法：

```
spd <- scatterplot3d(1:10, 1:10, 1:10)

# xy
spd$plane3d(0.3549896,0,0,lty="dotted")

# yz
x0 <- 5
xyz1 <- spd$xyz.convert(rep(x0, 6), rep(0, 6), seq(0, 10, by=2))
xyz2 <- spd$xyz.convert(rep(x0, 6), rep(10, 6), seq(0, 10, by=2))
segments(xyz1$x, xyz1$y, xyz2$x, xyz2$y, lty="dotted")

xyz1 <- spd$xyz.convert(rep(x0, 6), seq(0, 10, by=2), rep(0, 6))
xyz2 <- spd$xyz.convert(rep(x0, 6), seq(0, 10, by=2), rep(10, 6))
segments(xyz1$x, xyz1$y, xyz2$x, xyz2$y, lty="dotted")

# zx
y0 <- 6
xyz1 <- spd$xyz.convert(rep(0, 6), rep(y0, 6), seq(0, 10, by=2))
xyz2 <- spd$xyz.convert(rep(10, 6), rep(y0, 6), seq(0, 10, by=2))
segments(xyz1$x, xyz1$y, xyz2$x, xyz2$y, lty="dotted")

xyz1 <- spd$xyz.convert(seq(0, 10, by=2), rep(y0, 6), rep(0, 6))
xyz2 <- spd$xyz.convert(seq(0, 10, by=2), rep(y0, 6), rep(10, 6))
segments(xyz1$x, xyz1$y, xyz2$x, xyz2$y, lty="dotted") 
```

这会通过手动指定生成平面：

[![在此处输入图像描述](../Images/c90be804dc2097c614c960cb5e0f0a99.png)](https://i.stack.imgur.com/WdgFg.png)

# c# - 检测到断开的上下文 c# 剪贴板

> ID：13550502
> 
> 赞同：3
> 
> 时间：2012-11-25T11:14:01.463
> 
> 标签：c#, clipboard

> 此 RuntimeCallableWrapper 转换到 COM 上下文 0x27a7788 失败，并出现以下错误：对象未连接到服务器（来自 HRESULT 的异常：0x800401FD (CO_E_OBJNOTCONNECTED)）。这通常是因为创建此 RuntimeCallableWrapper 的 COM 上下文 0x27a7788 已断开连接，或者它正忙于做其他事情并且无法处理上下文转换。不会使用代理来为 COM 组件上的请求提供服务，而是直接调用 COM 组件。这可能会导致损坏或数据丢失。为避免此问题，请确保所有 COM 上下文/单元/线程保持活动状态并且可用于上下文转换，直到应用程序完全使用代表存在于其中的 COM 组件的 RuntimeCallableWrapper 完成。

我正在尝试在我的 C# 应用程序中访问剪贴板.. 它可以工作.. 但是每当我在剪贴板中有以下文本时，它就会停止并给我上面引用的异常..

> else if (e == Keys) { return ""; }

我的代码如下

```
private string GetClip()
        {
            string MyStr="";
            try
            {
                if(Clipboard.ContainsText())
                MyStr = Clipboard.GetText();
            }
            catch
            {
            }
            return MyStr;
        } 
```

# ruby-on-rails - 为什么使用`rails new`这么慢？

> ID：13550503
> 
> 赞同：0
> 
> 时间：2012-11-25T11:14:12.653
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

版本是：

```
bash-3.2$ rails -v
Rails 3.2.9 
```

我的 ruby​​ 是 MacOSX 上的内置 ruby​​：

```
bash-3.2$ ruby -v
ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0]
bash-3.2$ which ruby 
/usr/bin/ruby 
```

我的问题是在`rails new`（`run bundle install`）的最后一步，rails似乎需要连接互联网才能下载一些包。通常我需要 5 分钟等待`rails`使用`rails new`.

我想知道某些东西是否没有为我的计算机上的 rails 配置好。

另一个奇怪的是，在我完成后`rails new PROJECT_NAME`，它显示：

```
Using sqlite3 (1.3.6)
Using uglifier (1.3.0) 
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed. 
```

但是，当我尝试时，似乎`sqlite3`已经安装了：

```
bash-3.2$ bundle show sqlite3
 Could not locate Gemfile 
```

它仍然抱怨`sqlite3`没有安装。也许这`rails new`就是速度慢的原因（即使`sqlite3`已经安装过一次。它仍然需要下载捆绑包）

之前`bundle install`，rails 询问我的系统密码：

```
Enter your password to install the bundled RubyGems to your system 
```

但是我仍然不确定这些软件包是否已经安装到系统中，因为`bundle show sqlite3`失败了。

有没有人知道`rails new`我的电脑为什么这么慢？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:20:12.977

另一种解决方案是使用[RVM](http://rvm.io)。它类似于 rbenv。我个人使用 RVM。我不建议也不建议使用 gemsets。Bundler 无论如何都会分离 gem 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-15T04:17:56.500

1.  检查您的`bundle install`问题，即 rails new 序列中的最后一步。改为运行：

> `rails new appname -B`

该`-B`标志告诉 rails “跳过捆绑包”（[参考](https://gist.github.com/brianpetro/2c59916af11c65aac155)）。然后进入app文件夹运行：

> `bundle install --verbose`

检查输出中的潜在错误。

2.  使用不同的捆绑器版本可以给你不同的结果。所以尝试[其他版本](https://rubygems.org/gems/bundler/versions)。

> `gem uninstall bundler -v your-version-number`
> 
> `gem install bundler -v new-version-number`

3.  在 2016 年，我们获得了 bundler v1.12.x，这导致一些用户遇到[捆绑安装缓慢的问题](https://github.com/bundler/bundler/issues/4478#issuecomment-219263764)。在这种情况下，在他们修复它之前，使用 1.11.2 是更快的选择。

# java - HttpConnectionParams.setConnectionTimeout 是什么意思？

> ID：13550509
> 
> 赞同：0
> 
> 时间：2012-11-25T11:15:12.260
> 
> 标签：java, android, http, connection-timeout

我在下载网页的 HTML 时遇到了一些麻烦（请参阅这个问题：[Android: Downloading HTML not always working](https://stackoverflow.com/questions/13550161/android-downloading-html-not-always-working)）。

在我的代码中，我使用这种方法：

```
HttpConnectionParams.setConnectionTimeout(my_httpParams, 3000); 
```

我不太确定这意味着什么。这是否意味着如果下载 HTML 文件（我使用它）的时间超过 3000 毫秒，它会停止？还是有别的意思？

另外，那个方法和它有什么区别`setSoTimeout`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T11:18:32.903

这意味着如果您在 3000 毫秒内没有建立连接，它将停止尝试。

该`setSoTimeout()`方法本质上是一样的，但它会等待的不仅仅是初始连接。因此，您将检查每个数据包以查看它是否超时，而该`setConnectionTimeout()`方法只会在初始连接时超时。有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/7360916/544198)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T13:03:08.087

有关更多详细信息，请参见解释**连接超时**和**套接字超时**之间区别的答案：

[ConnectionTimout 与 SocketTimeout](https://stackoverflow.com/a/7360916/1241276)

# c++ - _wfopen 函数的 C++ C4996 错误

> ID：13550513
> 
> 赞同：3
> 
> 时间：2012-11-25T11:16:10.793
> 
> 标签：c++, file

我有 4 个头文件，它们都使用 _wfopen() 从 txt 文件中打开数据，如下所示：

```
FILE* file = _wfopen(L"data.txt",L"r,ccs=utf-8"); 
```

VC++ 给了我一个错误 C4996 但仅在一个头文件中，其他三个根本没有错误。我怎样才能解决这个问题 ？更新：我的教授给了我这个代码。我编译了它，只有 C4996 警告。由于我需要重用它，我创建了一个新项目并将他的代码中的所有内容复制到新项目中。然后它给了我一个 C4996 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T11:23:13.457

网络上的浅搜索表明您正在使用已弃用的函数，从而引发错误 C4996。如示例所示，您应该改用函数 _wfopen_s。

```
...
// Create an the xml file in text and Unicode encoding mode.
if ((fileHandle = _wfopen( L"_wfopen_test.xml",L"wt+,ccs=UNICODE")) == NULL) // C4996
// Note: _wfopen is deprecated; consider using _wfopen_s instead
{
    wprintf(L"_wfopen failed!\n");
    return(0);
}
... 
```

您在所有四个调用中只指出此错误一次的原因是编译器抑制了重复错误。

参考：http: [//msdn.microsoft.com/en-us/library/yeby3zcb.aspx](http://msdn.microsoft.com/en-us/library/yeby3zcb.aspx)

# jasper-reports - 如何在 Jaspersoft iReport Designer 中对列中的所有值求和？

> ID：13550514
> 
> 赞同：33
> 
> 时间：2012-11-25T11:16:18.703
> 
> 标签：jasper-reports, ireport

我在 Jaspersoft iReport Designer 中有以下类似报告，但无法弄清楚如何将垂直列“医生付款”中存在的所有值相加以获得总计“1601”？此列的长度是可变的（即行数根据数据库的大小及其更新频率而变化）。

是否有任何变量`$V{COLUMN_COUNT}`（实际上不给出行数，这里是 5），它给出一列中所有值的总和？如果没有，怎么做**sum**？

```
Doctor ID   Doctor Payment
 A1             123
 B1             223
 C2             234
 D3             678
 D1             343
Total          1601 
```

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-11-25T15:57:48.990

解决您的任务很容易。您应该创建并使用一个新变量来对**“医生付款”**列的值求和。

在您的情况下，可以像这样声明变量：

```
<variable name="total" class="java.lang.Integer" calculation="Sum">
    <variableExpression><![CDATA[$F{payment}]]></variableExpression>
</variable> 
```

*   计算*类型*是**Sum**；
*   *重置*类型是**报告**；
*   *变量表达式*是**$F{payment}**，其中**$F{payment}**是包含 sum ( *Doctor Payment* ) 的字段名称。

工作示例。

*CSV 数据源：*

```
医生ID，付款
A1,123
B1,223
C2,234
D3,678
D1,343

```

*模板：*

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport ...>
    <queryString>
        <![CDATA[]]>
    </queryString>
    <field name="doctor_id" class="java.lang.String"/>
    <field name="payment" class="java.lang.Integer"/>
    <variable name="total" class="java.lang.Integer" calculation="Sum">
        <variableExpression><![CDATA[$F{payment}]]></variableExpression>
    </variable>
    <columnHeader>
        <band height="20" splitType="Stretch">
            <staticText>
                <reportElement x="0" y="0" width="100" height="20"/>
                <box leftPadding="10"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="10" isBold="true" isItalic="true"/>
                </textElement>
                <text><![CDATA[Doctor ID]]></text>
            </staticText>
            <staticText>
                <reportElement x="100" y="0" width="100" height="20"/>
                <box leftPadding="10"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="10" isBold="true" isItalic="true"/>
                </textElement>
                <text><![CDATA[Doctor Payment]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="20" splitType="Stretch">
            <textField>
                <reportElement x="0" y="0" width="100" height="20"/>
                <box leftPadding="10"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{doctor_id}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="100" y="0" width="100" height="20"/>
                <box leftPadding="10"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{payment}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <summary>
        <band height="20">
            <staticText>
                <reportElement x="0" y="0" width="100" height="20"/>
                <box leftPadding="10"/>
                <textElement>
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[Total]]></text>
            </staticText>
            <textField>
                <reportElement x="100" y="0" width="100" height="20"/>
                <box leftPadding="10"/>
                <textElement>
                    <font isBold="true" isItalic="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{total}]]></textFieldExpression>
            </textField>
        </band>
    </summary>
</jasperReport> 
```

*结果将是：*

![通过 iReport 的预览生成报告](../Images/f37ec4a39459c523e1e002211cebe956.png)

* * *

[*您可以在JasperReports Ultimate Guide*](http://jasperreports.sourceforge.net/JasperReports-Ultimate-Guide-3.pdf)中找到很多信息。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-05-12T18:38:37.667

iReports 列的自定义字段（总和、平均值等）

1.  右键单击变量，然后单击创建变量

2.  点击新变量

    一种。注意右边的属性

3.  相应地重命名变量

4.  将值类名称更改为正确的数据类型

    一种。您可以通过单击 3 个点进行搜索

5.  选择正确的计算类型

6.  更改表达式

    一种。点击小图标

    湾。选择您要计算的列

    C。点击完成

7.  将初始值表达式设置为 0

8.  将增量类型设置为无

9.  将增量器工厂类名称留空
10.  设置重置类型（通常是报告）

11.  将新的文本字段拖到舞台（通常在最后一页页脚或列页脚中）

12.  双击新的文本字段
13.  清除表达式“文本字段”</li>
14.  选择新变量

15.  点击完成

16.  将新文本放在理想的位置 </li>

# django - Django 将额外字段添加到从模型生成的 ModelForm

> ID：13550515
> 
> 赞同：69
> 
> 时间：2012-11-25T11:16:21.400
> 
> 标签：django, japplet, django-forms

我必须从模型生成一个 FormSet，但我需要在每个表单中插入一个“额外值”。

具体来说，我有一个 JApplet，它在图像上生成一些标记和路径，并将其发布到服务器上。

在我的模型中，线条由两个标记组成。但是当我发布它时，因为我使用的是从 JApplet 而不是从数据库生成的 id，所以我不知道路径将由哪些标记组成。

所以我想在表单的Marker上插入一个“临时id”，并在保存路径之前在视图中做正确的排列。

我考虑过为标记定义一个自定义表单，但它似乎不是很干燥，如果我更改标记模型，我不想回到这个问题上。

这是表格：

```
 class PointForm(forms.ModelForm):
    temp_id = forms.IntegerField()
    class Meta:
            model = Point

    def clean(self):
            if any(self.errors):
                    # Don't bother validating the formset unless each form is valid on its own
                    return

            ingresso = self.cleaned_data['ingresso']
            ascensore = self.cleaned_data['ascensore']
            scala = self.cleaned_data['scala']

            if (ingresso and ascensore) or (ingresso and scala) or (ascensore and scala):
                    raise forms.ValidationError("A stair cannot be a elevator or an access!!!") 
            return self

    def save(commit=True):
    # do something with self.cleaned_data['temp_id']
            super(PointForm).save(commit=commit) 
```

和模型：

```
 class Point(models.Model):

    RFID = models.CharField(max_length=200, blank=True)

    x = models.IntegerField()
    y = models.IntegerField()

    piano = models.ForeignKey(Floor)

    ingresso = models.BooleanField() 
```

错误：

```
 ViewDoesNotExist at /admin/
  Could not import buildings.views.getFloors. View does not exist in module buildings.views.
  Request Method:   GET
  Request URL:  http://127.0.0.1:8000/admin/
  Django Version:   1.4.1
  Exception Type:   ViewDoesNotExist
  Exception Value:  
  Could not import buildings.views.getFloors. View does not exist in module buildings.views.
  Exception Location:   /usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py in get_callable, line 101 
```

当我尝试加载管理页面时生成错误，该页面根本没有与表单的引用。

**例外的解决方案**

好的，我将在这里写如何找出 Django 为何会做如此奇怪的事情。

[这](https://stackoverflow.com/questions/11393257/viewdoesnotexist-error)是找出问题所在的正确方法。

抛出异常是因为我忘记添加`forms.py`到`from django import forms`.

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-11-25T12:13:33.493

您可以将字段添加到 ModelForm。除非您在模型中添加一个名为 temp_id 的字段，否则您在更改模型时不需要更改此表单。

**示例（使用名为 Point 的模型）：**

```
class PointForm (forms.ModelForm):
    temp_id = forms.IntegerField()

    class Meta:
        model = Point

    def save(self, commit=True):
        # do something with self.cleaned_data['temp_id']
        return super(PointForm, self).save(commit=commit) 
```

**更新：**在 def save() 中忘记了 self 并将模型名称更改为 Point

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-18T09:40:05.483

为了跟进 relekang 的回答，我不得不提醒我也[返回](https://stackoverflow.com/questions/29117346/save-custom-field-in-django-modelform)最后一行，以便在提交表单时自动调用对象的 get_absolute_url() 方法：

```
return super(PointForm, self).save(commit=commit) 
```

# awk - awk 中不存在索引的数组

> ID：13550517
> 
> 赞同：0
> 
> 时间：2012-11-25T11:16:30.683
> 
> 标签：awk

抱歉这个冗长的问题，它归结为一个非常简单的问题。
假设有 n 个文本文件，每个文件包含一列字符串（表示组）和一列整数（表示这些组中实例的值）：

```
 # filename xxyz.log
  a 5  
  a 6  
  b 10  
  b 15  
  c 101  
  c 100  

  #filename xyzz.log
  a 3  
  a 5  
  c 116  
  c 128 
```

请注意，虽然任何给定文件中两列的长度始终相同，但文件之间的长度不同。此外，并非所有文件都包含相同范围的组（第一个包含组 a、b、c，而第二个仅包含组 a 和 c）。在 awk 中，可以分别计算每个文件中第 1 列中每个字符串的第 2 列的平均值，并使用以下代码输出结果：

```
 NAMES=$(ls|grep .log|awk -F'.' '{print $1}');

  for q in $NAMES;
  do
    gawk -F' ' -v y=$q 'BEGIN {print "param", y}
    {sum1[$1] += $2; N[$1]++}
    END     {for (key in sum1) {
                       avg1 = sum1[key] / N[key];
                       printf "%s %f\n", key, avg1;
                   } }' $q.log | sort > $q.mean;
  done; 
```

但是，由于上述原因，生成的 .mean 文件的长度因文件而异。对于每个 .log 文件，我想输出一个 .mean 文件，在第一列中列出整个组（广告）范围，并在第二列中列出相应的平均值或空格，具体取决于此类别是否存在于 .日志文件。我已经尝试了以下代码（为简洁起见，没有 $NAMES 给出）：

```
 awk 'BEGIN{arr[a]="a"; arr[b]="b"; arr[c]="c"; arr[d]="d"} 
  {sum[$1] += $2; N[$1]++} 
  END {for (i in arr) {
  if (i in sum) {
    avg = sum[i] / N[i]; 
    printf "%s %f\n" i, avg;} 
  else {
    printf "%s %s\n" i, "";}
  }}' xxyz.log > xxyz.mean; 
```

但它返回以下错误：

```
awk: (FILENAME=myfile FNR=7) fatal: not enough arguments to satisfy format string
        `%s %s
'
            ^ ran out for this one 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T13:48:30.737

你会在日志文件中有明确的零或负数吗？我会假设不是。

你的第二个脚本的第一行没有做你想要的：

```
awk 'BEGIN{arr[a]="a"; arr[b]="b"; arr[c]="c"; arr[d]="d"} 
```

这分配`"a"`给`arr[0]`（因为`a`是一个以前没有使用过的变量），然后`"b"`是同一个元素（因为`b`是一个以前没有使用过的变量），然后`"c"`是 ，然后是`"d"`。显然，不是你想的那样。只要您知道只有四个组，这个（未经测试的）代码就可以完成您需要的工作。如果您不先验地知道这些组，则需要一个更复杂的程序（可以完成，但更难）。

```
awk 'BEGIN { sum["a"] = 0; sum["b"] = 0; sum["c"] = 0; sum["d"] = 0 } 
     { sum[$1] += $2; N[$1]++ } 
     END {   for (i in sum) {
                 if (N[i] == 0) N[i] = 1 # Divide by zero protection
                 avg = sum[i] / N[i]; 
                 printf "%s %f\n" i, avg;
             } 
         }' xxyz.log > xxyz.mean; 
```

这将为丢失的组打印零平均值。如果你愿意，你可以这样做：

```
awk 'BEGIN { sum["a"] = 0; sum["b"] = 0; sum["c"] = 0; sum["d"] = 0 } 
     { sum[$1] += $2; N[$1]++ } 
     END {   for (i in sum) {
                 if (N[i] == 0)
                     printf("%s\n", i;
                 else {
                     avg = sum[i] / N[i]; 
                     printf "%s %f\n" i, avg;
                 }
             } 
         }' xxyz.log > xxyz.mean; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T15:44:37.740

这是我对这个问题的看法。像这样运行：

```
./script.sh 
```

内容`script.sh`：

```
array=($(awk '!a[$1]++ { print $1 }' *.log))

readarray -t sorted < <(for i in "${array[@]}"; do echo "$i"; done | sort)

for i in *.log; do
    for j in "${sorted[@]}"; do
        awk -v var=$j '
            {
                sum[$1]+=$2
                cnt[$1]++
            }
            END {
                print var, (var in cnt ? sum[var]/cnt[var] : "")
            }
        ' "$i" >> "${i/.log/.main}"
    done
done 
```

结果`grep . *.main`：

```
xxyz.main:a 5.5
xxyz.main:b 12.5
xxyz.main:c 100.5
xyzz.main:a 4
xyzz.main:b 
xyzz.main:c 122 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T12:01:14.963

> 对于每个 .log 文件，我想输出一个 .mean 文件，在第一列中列出整个组（广告）范围，并在第二列中列出相应的平均值或空格，具体取决于此类别是否存在于 .日志文件。

不是纯粹的 awk 解决方案，但您可以使用它获得所有组。

```
awk '{print $1}' *.log | sort -u > groups 
```

计算平均值后，您可以加入组文件。假设您的第二个输入文件的方法看起来像这个临时的中间文件。（我称之为 xyzz.tmp。）

```
a 4
c 122 
```

加入组，保留组文件中的所有值。

```
$ join -a1 groups xyzz.tmp > xyzz.mean
$ cat xyzz.mean
a 4
b
c 122 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T13:16:20.407

这是一个纯粹的 awk 答案：

```
find . -maxdepth 1 -name "*.log" -print0 | 
  xargs -0 awk '{SUBSEP=" ";sum[FILENAME,$1]+=$2;cnt[FILENAME,$1]+=1;next}
  END{for(i in sum)print i, sum[i], cnt[i], sum[i]/cnt[i]}' 
```

很容易将其推送到文件中-

# objective-c - 数组按日期排序但未按时间排序

> ID：13550519
> 
> 赞同：2
> 
> 时间：2012-11-25T11:16:45.067
> 
> 标签：objective-c, xcode, arrays, sorting

我在我的字段“日期”上对 NSMutableArray 进行排序，但它没有考虑时间。如果日期相同，时间仍然是随机排序的。我究竟做错了什么？“日期”字段属于 NSDate 类型。

```
 NSSortDescriptor *dateDescriptor =
[[NSSortDescriptor alloc] initWithKey:@"date" ascending:YES];
NSArray *descriptors = [NSArray arrayWithObjects:dateDescriptor, nil];

[self.player1ScoreT sortedArrayUsingDescriptors:descriptors]; 
```

我的输出是：
2012-11-25 11:01:00 +0000
2012-11-25 11:00:56 +0000
2012-11-25 11:00:54 +0000
2012-11-25 11:01:03 +0000

奇怪的.....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T11:36:25.103

您用来排序的逻辑是正确的，我刚刚尝试过，它工作正常。

我认为这是因为`[self.player1ScoreT sortedArrayUsingDescriptors:descriptors];`，这**不会**改变保存在 中的数组`self.player1ScoreT`，而是会产生一个新数组。这是因为您使用的选择器不会改变原始数组（`NSArray`它本身在设计上是不可变的，`NSMutableArray`是可变的）。

因此，你会想要使用这个：

```
self.player1ScoreT = [self.player1ScoreT sortedArrayUsingDescriptors:descriptors]; 
```

这会将其中的数组重新分配`self.player1ScoreT`为由 生成的新排序数组，`sortedArrayUsingDescriptors:`并且旧的未排序数组将被丢弃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T11:30:59.973

正如 WDUK 所说，您缺少 sortedArray 的分配：

```
id newArray = [oldArray sortedArrayUsing... 
```

我什至试过了，它可以对日期进行排序，包括时间

我试过的代码：

```
int main(int argc, char *argv[]) {
@autoreleasepool {
    id player1ScoreT = @[@{@"date":[NSDate dateWithTimeIntervalSinceNow:-100]},
                         @{@"date":[NSDate dateWithTimeIntervalSinceNow:-1000]},
                         @{@"date":[NSDate dateWithTimeIntervalSinceReferenceDate:+1000]},
                         @{@"date":[NSDate dateWithTimeIntervalSinceReferenceDate:-50]},
                         @{@"date":[NSDate dateWithTimeIntervalSinceNow:+50]},
                         @{@"date":[NSDate dateWithTimeIntervalSinceNow:+0]}];
    NSLog(@"%@", [player1ScoreT valueForKeyPath:@"date"]);
    player1ScoreT = [player1ScoreT sortedArrayUsingDescriptors:@[[[NSSortDescriptor alloc] initWithKey:@"date" ascending:YES]]];
    NSLog(@"%@", [player1ScoreT valueForKeyPath:@"date"]);
}
} 
```

# opengl - 用OpenGL旋转多少圆柱？

> ID：13550521
> 
> 赞同：1
> 
> 时间：2012-11-25T11:17:26.020
> 
> 标签：opengl, rotation, autorotate

我对**OpenGL**有疑问。以下是一些有用的数据：

*   蓝色点是圆柱体，它正在寻找屏幕上的绿色参考点。
*   绿点是第一个参考点
*   红点是第二个参考点。

我将使用键盘键*h、j、k*和*l*更改参考点——vim 也使用这些键进行导航。

其他有用信息：首先，我通过更改`centerx`、`centery`、`centerz`of将参考点从绿色更改为红色`gluLookAt`。其次，我想旋转圆柱体，以便它寻找新的参考点。

我应该旋转多少才能使圆柱体仍然看参考点？

[http://www.arefs.org/projects/images/triangle-rock.png](http://www.arefs.org/projects/images/triangle-rock.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:22:44.930

如果我理解你的问题，

设旧参考点与眼睛之间的向量为**V1**

设新参考点与眼睛之间的向量为**V2**

您可以通过以下方式找到这些向量之间的角度，也就是要旋转的角度：

```
θ = arccos( (V1 dot V2) / |V1||V2| ) 
```

![在此处输入图像描述](../Images/d4165c389d5da1bff77d63e2e44ac2ac.png)

# java - 获取图片位置 - Phonegap 相机

> ID：13550523
> 
> 赞同：7
> 
> 时间：2012-11-25T11:17:40.200
> 
> 标签：java, javascript, android, cordova

我使用了这段代码：

```
function getPicture(){
  navigator.camera.getPicture(onSuccess, onFail, {
    quality: 50,
    destinationType: Camera.DestinationType.FILE_URI,
    sourceType : Camera.PictureSourceType.SAVEDPHOTOALBUM
  });
}
function onSuccess(imageURI) {
  img_uri = imageURI;
  alert(img_uri);
  Plugin.callNativeFunction(nativePluginResultHandler, nativePluginErrorHandler, 'success', img_uri);
} 
```

我想获得这样的 URI：“/mnt/sdcard/Pictures...”，但警报给了我一个类似“content://media/external/images/media/3915”的 URI。

我能做些什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T15:48:16.200

您可以使用 window.resolveLocalFileSystemURI 来获取真实路径。您的 onSuccess 方法如下所示：

```
function onSuccess(imageURI) {
  img_uri = imageURI;
  alert(img_uri);
  window.resolveLocalFileSystemURI(img_uri, function(fileEntry) {
      alert(fileEntry.fullPath);
      Plugin.callNativeFunction(nativePluginResultHandler, nativePluginErrorHandler, 'success', fileEntry.fullPath);
  }, onError);      
} 
```

# facebook - FB.login 未授权

> ID：13550530
> 
> 赞同：1
> 
> 时间：2012-11-25T11:19:15.013
> 
> 标签：facebook, canvas

我正在画布页面上设计一个 Facebook 应用程序。单击按钮时，我调用了 Facebook_login 函数。Wnen 我访问该应用程序并单击按钮，它始终有效并显示“已连接”。但是，当使用测试人员的 Facebook 帐户时，无论测试人员是否授权了应用程序，response.status 始终是“not_authorized”。我真的很困惑。有人可以帮我弄清楚吗？任何建议将不胜感激。

函数 Facebook_login() {

```
 FB.getLoginStatus(function(response) {

    if (response.status == 'connected') {
      alert(response.status);
     var uid = response.authResponse.userID;
     var accessToken = response.authResponse.accessToken;
     var signed_request = response.authResponse.signedRequest;
    } else if (response.status == 'not_authorized') {
      alert(response.status);
      login();
    } else {
     //cancelled
    } 
```

}， 真的）; }

功能登录（）{ FB.login（功能（响应）{

```
 if (response.authResponse) {
      var uid = response.authResponse.userID;
       console.log('Welcome!  Fetching your information.... ');
        FB.api('/'+uid, function(response) {
        console.log('Good to see you, ' + response.name + '.');
        });
    } else {
        // cancelled    
    }
 },{scope:'email,publish_checkins,publish_actions,publish_stream'}); 
```

}

# java - android上用于波表合成的API

> ID：13550531
> 
> 赞同：1
> 
> 时间：2012-11-25T11:19:19.097
> 
> 标签：java, android, audio, javasound

谁能告诉我，我在哪里可以找到 android 上 waveTable syntesis 的 api？

或者，也许我可以通过 JNI 在 android 上使用 C++ waveTable 合成库之一？

MediaPlayer 和 JetPlayer 不适合此任务。我需要播放 MIDI，但要有良好的音库，并且能够根据用户要求更改音库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T11:21:40.220

AFAIR 在 SDK 中没有用于此的 API。如果您想在 android 上播放 midi，请使用 MediaPlayer 进行播放（它确实支持 midi 文件）

# functional-programming - 使用演员模型的基于时间的模拟

> ID：13550532
> 
> 赞同：6
> 
> 时间：2012-11-25T11:19:27.213
> 
> 标签：functional-programming, simulation, actor

我们有一个单线程应用程序，可以模拟数十万个对象随时间与共享内存模型的交互。
显然，它无法在多 CPU 硬件上扩展。

在阅读了一些关于基于代理的建模和函数式编程/演员模型之后，我正在考虑使用消息传递范式进行重写。

这个想法非常简单——每个对象都是一个演员，它们的交互将是消息，这样模拟就可以并行发生。在特定时间给定对象的配置 - 它的未来后果可以很容易地计算出来。

问题是如何对时间进行建模：
例如让我们假设对象 X 的行为取决于 A 和 B，因为不能保证参与者和消息的计算顺序可能是当要计算 X 时 A 已经发送它给 X 的信息，但 B 没有。如何确保计算正确发生？

我希望问题很清楚
，谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T20:26:13.583

您使用消息传递来并行化（离散事件？）模拟的方法是众所周知的，并且本身不需要功能样式（当然，这并不妨碍您像那样实现它）。

您针对事件时间描述的基本问题也称为*局部因果约束*（例如，请参见[本教科书](https://rads.stackoverflow.com/amzn/click/com/0471183830)）。基本上，您需要使用**同步协议**来确保每个对象（或代理）以正确的顺序处理其消息。在并行离散事件模拟领域，这样的对象被称为*逻辑过程*，它们通过事件（即带时间戳的消息）进行通信。

为这些事件正确实现同步协议**具有挑战性**，并且协议的正确选择是高度**特定于应用程序的**。例如，一个重要因素是每个事件所需的平均计算量：如果需要的计算量很少，则通信成本将主导整个执行时间，并且很难扩展模拟。

因此，我建议在从头开始之前在您打算使用的演员框架之上**寻找现有的解决方案/库。**

# ios - UIContainerViews 故事板

> ID：13550536
> 
> 赞同：0
> 
> 时间：2012-11-25T11:19:59.260
> 
> 标签：ios, xcode

我的 iPad 故事板中有一个普通的 UIViewController。在这个 viewcontroller 中我有另外 2 个 UIcontainerViews，每个都与另一个 UIviewController 链接（当我添加 containerView 时，Xcode 自动创建了这 2 个视图控制器）。我现在在同一个视图控制器中有 2 个视图控制器，每个视图控制器都连接到不同的类。

唯一的事情是视图加载并显示内容（按钮，UITableview）......但 UITableView 实际上并没有加载数据，当我按下按钮时没有任何反应。当我改为删除容器视图并分别测试两个 ViewController 时，它们工作得很好。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:56:40.983

我已经将内容从一个视图控制器复制并粘贴到另一个视图控制器，即使该 .h 文件仍然存在，它们也不起作用。我删除了所有内容并再次添加

# vb.net - 在 Visual Basic 中重置循环

> ID：13550537
> 
> 赞同：2
> 
> 时间：2012-11-25T11:20:06.780
> 
> 标签：vb.net, visual-studio-2010

基本上，如果有人按下`button2`，那么我希望程序重置测量。实际代码一直在测量，我只想重置该测量。对不起我的英语不好，我希望你明白我真正想要的，如果不是我会详细解释。

这是我的代码：

```
Public Class Form1

    Private MonitorWidth As Double = 51.5 'cm 
    Private MonitorHeigth As Double = 31 'cm - This must be enter by the user
    Private TotalDistance As Double
    Private PixelHeigth As Double 'cm
    Private PixelWidth As Double 'cm
    Private WithEvents TTimer As New Timers.Timer
    Private PointQueue As New Queue(Of Point)(100)
    Private Lastpoint As Point

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    End Sub

    Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick

        TTimer.Stop()

        While PointQueue.Count > 0
            Dim P As Point = PointQueue.Dequeue
            TotalDistance += Math.Sqrt(((Lastpoint.X - P.X) * PixelWidth) ^ 2 + ((Lastpoint.Y - P.Y) * PixelHeigth) ^ 2)
            Lastpoint = P

            TextBox1.Text = Format(TotalDistance, "Distance: #,##0.0 cm")
            TTimer.Start()

        End While

    End Sub

    Private Sub TTimer_Elapsed(ByVal sender As Object, ByVal e As System.Timers.ElapsedEventArgs) Handles TTimer.Elapsed
        PointQueue.Enqueue(MousePosition)
    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

        If Button1.Enabled = True Then

            Lastpoint = MousePosition
            TTimer.AutoReset = True
            TTimer.Interval = 5
            TTimer.Start()
            Dim ScreenBounds As Rectangle = Screen.GetBounds(New Point(0, 0))
            Dim Screenwidth_Pixel As Integer = ScreenBounds.Width
            Dim screenHeigth_Pixel As Integer = ScreenBounds.Height
            PixelHeigth = MonitorHeigth / screenHeigth_Pixel
            PixelWidth = MonitorWidth / Screenwidth_Pixel
            Timer1.Interval = 200
            Timer1.Start()
        End If
    End Sub

    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        If Button2.Enabled = True Then

            Timer1.Stop()
            TextBox1.Text = ""
            TextBox1.Text = Format(TotalDistance = 0)
        End If
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:26:57.973

在您的`Button2`事件处理程序 ( `Button2_Click`) 中，重置队列：

```
PointQueue = New Queue(Of Point)(100) 
```

# css - @Media 最小宽度和最大宽度

> ID：13550541
> 
> 赞同：263
> 
> 时间：2012-11-25T11:20:43.537
> 
> 标签：css, mobile, media-queries

我有这个`@media`设置：

**HTML**：

```
<head>
  <meta name="viewport" content="width=device-width, user-scalable=no" />
</head> 
```

**CSS**：

```
@media screen and (min-width: 769px) {
    /* STYLES HERE */
}

@media screen and (min-device-width: 481px) and (max-device-width: 768px) { 
    /* STYLES HERE */
}

@media only screen and (max-device-width: 480px) {
    /* STYLES HERE */
} 
```

使用此设置，它可以在 iPhone 上运行，但不能在浏览器中运行。

是因为我已经`device`在元数据中，而且可能有`max-width:480px`吗？

* * *

## 回答 #1

> 赞同：408
> 
> 时间：2012-11-25T11:47:55.520

我发现最好的方法是为旧版浏览器编写默认 CSS，因为旧版浏览器（包括 IE 5.5、6、7 和 8）无法读取`@media`. 当我使用 时`@media`，我会这样使用它：

```
<style type="text/css">
    /* default styles here for older browsers. 
       I tend to go for a 600px - 960px width max but using percentages
    */
    @media only screen and (min-width: 960px) {
        /* styles for browsers larger than 960px; */
    }
    @media only screen and (min-width: 1440px) {
        /* styles for browsers larger than 1440px; */
    }
    @media only screen and (min-width: 2000px) {
        /* for sumo sized (mac) screens */
    }
    @media only screen and (max-device-width: 480px) {
       /* styles for mobile browsers smaller than 480px; (iPhone) */
    }
    @media only screen and (device-width: 768px) {
       /* default iPad screens */
    }
    /* different techniques for iPad screening */
    @media only screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:portrait) {
      /* For portrait layouts only */
    }

    @media only screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:landscape) {
      /* For landscape layouts only */
    }
</style> 
```

但是你可以用你的`@media`. 这只是我在为所有浏览器构建样式时发现的最适合我的一个示例。

[iPad CSS 规范。](http://css-tricks.com/snippets/css/ipad-specific-css/)

还！如果您正在寻找可印刷性，您可以使用`@media print{}`.

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2014-07-08T19:24:23.623

根本问题是使用`max-device-width`vs plain old `max-width`。

使用“设备”关键字的目标是屏幕的物理尺寸，而不是浏览器窗口的宽度。

例如：

```
@media only screen and (max-device-width: 480px) {
    /* STYLES HERE for DEVICES with physical max-screen width of 480px */
} 
```

相对

```
@media only screen and (max-width: 480px) {
    /* STYLES HERE for BROWSER WINDOWS with a max-width of 480px. 
       This will work on desktops when the window is narrowed.  */
} 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2019-05-02T10:21:24.763

如果小型设备上的网站行为像桌面屏幕，那么您必须先将此元标记放入标题中

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

对于媒体查询，您可以将其设置为

这将涵盖您所有的手机/手机宽度

```
 @media only screen and (min-width: 200px) and (max-width: 767px)  {
    //Put your CSS here for 200px to 767px width devices (cover all width between 200px to 767px //

    } 
```

对于 iPad 和 iPad pro，您必须使用

```
 @media only screen and (min-width: 768px) and (max-width: 1024px)  {
        //Put your CSS here for 768px to 1024px width devices(covers all width between 768px to 1024px //   
  } 
```

如果你想为横向模式添加 css，你可以添加这个

和（方向：风景）

```
 @media only screen and (min-width: 200px) and (max-width: 767px) and (orientation : portrait) {
        //Put your CSS here for 200px to 767px width devices (cover all mobile portrait width //        
  } 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-11-11T21:06:43.383

属性的正确值`content`应包括`initial-scale`：

```
<meta name="viewport" content="width=device-width, initial-scale=1">
                                                   ^^^^^^^^^^^^^^^
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2021-08-16T12:23:21.210

如果您想在浏览器中同时包含最小和最大宽度以实现响应，那么您可以使用以下内容：

```
 @media (min-width: 768px) and (max-width: 992px){...}
 @media (min-width: 480px) and (max-width: 767px) {...} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-19T15:06:04.583

对于某些 iPhone，您必须像这样放置视口

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, shrink-to-fit=no, user-scalable=0" /> 
```

# google-chrome - Chrome 是否有与 Mozilla 的 XUL 相同的等价物？

> ID：13550547
> 
> 赞同：1
> 
> 时间：2012-11-25T11:22:03.500
> 
> 标签：google-chrome, firefox, xul

XUL 似乎是一种 API，它使您能够基于 Mozilla 框架创建 GUI。

它还能让你自动化 Firefox 的 GUI 吗？

哪个是 Chrome 的等价物，使您能够**创建**GUI 和自动化 Chrome 的 GUI？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T11:25:27.320

没有一个。

扩展是 Javascript。Chrome 使用 WebKit 进行渲染，因此您可以使用它来创建 GUI。

# c++ - thread_cond_signal() 未在范围内声明

> ID：13550549
> 
> 赞同：0
> 
> 时间：2012-11-25T11:22:06.457
> 
> 标签：c++, multithreading, compilation, g++

我正在尝试使用 thread_cond_signal () 编译程序

我的进口是

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>
#include <ctype.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <iostream>
#include <sstream>
#include <fstream>
#include <stdio.h>
#include <queue>
#include <pthread.h>
#include <sys/timeb.h>
#include <map>
#include <fstream>
#include <algorithm>
#include <math.h>

#include <unistd.h>
#include <syslog.h>

#include "parser.h"
#include "safe_queue.h"
#include "priqueue.h"
#include "base64.h"
#include "xmlhelper.h"
#include "utils.h"
#include "messagehelper.h"
#include "default_config.h"
#include "main_process_helper.h"
#include "ExcludesParameters.h"
#include "eErrors.h"
#include "s_Error.h"
#include "eMessage_Type.h"
#include "hmaps.h"
#include "cookiestatus.h"
#include "sha1.h"
#include "ExcludeFields.h"
#include "pthreadStruct.h" 
```

我的编译批处理脚本是

```
g++ -g -lpthread utils/hregex.cpp ExcludeFields.cpp utils/sha1.cpp utils/utils.cpp utils/base64.cpp utils/xmlhelper.cpp utils/messagehelper.cpp utils/safe_queue.cpp utils/parser.cpp utils/default_config.cpp ExcludesParameters.cpp main_process_helper.cpp main.cpp -Iutils -Ibusiness_objects -o telepath_sniff 
```

输出：

```
‘thread_cond_signal’ was not declared in this scope 
```

代码是：

```
thread_cond_signal( &cond_garbageQueue); 
```

知道我还应该添加什么吗？它确实在 Eclipse 上编译

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T11:27:02.083

你是说 pthread_cond_signal() 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T11:29:21.617

pthread_cond_signal(&cond) 应该只需要 -lpthread 进行链接。您能否提供有关该错误的更多详细信息？

# android - 多个小部件：在小部件单击时启动配置活动

> ID：13550555
> 
> 赞同：2
> 
> 时间：2012-11-25T11:22:54.720
> 
> 标签：android

以下场景：我的主屏幕上有 3 个相同的小部件。如果单击，则会启动小部件配置活动。

这是通过以下代码实现的：

```
Intent intent = new Intent(context, WidgetConfigurator.class);
intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId); 
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

intent.setData(Uri.parse(intent.toUri(Intent.URI_INTENT_SCHEME)));
PendingIntent pendIntent = PendingIntent.getActivity(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
remoteView.setOnClickPendingIntent(R.id.widget_linearlayout, pendIntent); 
```

启动正常，但是有一个问题：
1\. Widget A 被点击，Widget A 的配置活动被打开
2\. 用户点击“返回”键，配置活动消失
3\. Widget B 被点击，Widget B 的配置活动是打开
4\. 用户点击“返回”键
=> 现在显示 Widget A 的配置活动

我总是只希望显示“实际”配置活动（适合单击的小部件）。我必须为 Intent / PendingIntent 使用哪些设置？

谢谢任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T19:01:02.053

似乎在尝试了很多之后，我现在找到了适用于所有 android 版本的工作解决方案：

```
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

intent.setData(Uri.parse(intent.toUri(Intent.URI_INTENT_SCHEME)));
PendingIntent pendIntent = PendingIntent.getActivity(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
remoteView.setOnClickPendingIntent(R.id.widget_linearlayout, pendIntent); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T07:47:39.963

更改待处理的意图代码以包含小部件 ID，因为 android 会重用意图。我在这个问题上浪费了很多时间，点击时发送了错误的意图。

```
PendingIntent pendIntent = PendingIntent.getActivity(context, WIDGETID, intent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T14:07:07.690

确保当前活动关闭的一种方法是调用 finish()。一个 android 应用程序像堆栈一样构建，活动 A 启动，如果用户回击，则该活动不会关闭。它只是位于新启动的活动 B 下。如果用户在活动 B 中回击，则将显示活动 A。我从未尝试过，但是如果您在 onBackPressed 方法中调用完成，则当前活动将被关闭。为此，请在 Activity 中覆盖 onBackPressed。

# c# - 使用 C# System.Diagnostics.Process 运行 powershell 脚本，powershell 脚本看不到任何参数

> ID：13550559
> 
> 赞同：1
> 
> 时间：2012-11-25T11:23:50.417
> 
> 标签：c#, powershell, external-process

我决定使用 System.Diagnostics.Process 来运行一个 powershell 脚本，只是因为它看起来很简单，我不关心结果输出，我希望用户能够看到正在运行的内容

```
Process process = new Process();

Process.StartInfo.FileName = "powershell.exe"
Process.StartInfo.Arguments = String.Format("-executionpolicy unrestricted -noexit \"{0}\" -XmlConfigFile {1}",scriptname, configFile);
process.Start(); 
```

当我运行它时，脚本看不到任何参数。由于 noexit 我可以在最后测试 $args 和 $MyInvocation 。没有争论。如果我在 cmd.exe 中运行它，它可以工作，如果我离开 {1}，它会抱怨 -XmlConfigFile 缺少一个参数。

编辑：原来这是我的错我正在运行嵌套的powershell会话来处理强制powershell使用4.0并且只传递不包含$ psboundparameters中的参数的args。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:03:27.623

试试这个，因为它对我有用：

```
Process.StartInfo.Arguments = String.Format("-executionpolicy unrestricted 
-noexit -file \"{0}\" -XmlConfigFile {1}",scriptname, configFile); 
```

虽然我不知道 -XmlConfigFile 是做什么的。因为它似乎没有有效的论点： [http ://technet.microsoft.com/en-us/library/hh847736.aspx](http://technet.microsoft.com/en-us/library/hh847736.aspx)

因此，您可以先将其删除。

# xml - 如何使用 xpointer 从另一个文档链接到特定节点

> ID：13550561
> 
> 赞同：1
> 
> 时间：2012-11-25T11:24:03.810
> 
> 标签：xml, xpointer

我有两个 xml 文件。我想从另一个 xml 文件中引用节点的值。

示例：1.xml

```
<?xml version="1.0"?>
<catalog>
   <book id="bk101">
      <author>Gambardella, Matthew</author>
      <title>XML Developer's Guide</title>
      <genre>Computer</genre>
      <price>44.95</price>
      <publish_date>2000-10-01</publish_date>
      <description>An in-depth look at creating applications 
      with XML.</description>
   </book>
   <book id="bk102">
      <author>Ralls, Kim</author>
      <title>Midnight Rain</title>
      <genre>Fantasy</genre>
      <price>5.95</price>
      <publish_date>2000-12-16</publish_date>
      <description>A former architect battles corporate zombies, 
      an evil sorceress, and her own childhood to become queen 
      of the world.</description>
   </book>
   <book id="bk103">
      <author>Corets, Eva</author>
      <title>Maeve Ascendant</title>
      <genre>Fantasy</genre>
      <price>5.95</price>
      <publish_date>2000-11-17</publish_date>
      <description>After the collapse of a nanotechnology 
      society in England, the young survivors lay the 
      foundation for a new society.</description>
   </book>
</catalog> 
```

一个 2.xml 是

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<doc xmlns:xi="http://www.w3.org/2003/XInclude">
<xi:include href="1.xml" xpointer="bk101"/>
</doc> 
```

当我执行 2.xml 时，我收到一条错误消息，指出此 XML 文件似乎没有任何与之关联的样式信息。文档树如下所示。

```
<doc><xi:include href="book.xml" xpointer="bk101"/></doc> 
```

我可以得到一些帮助来解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T21:45:24.343

使用虚拟样式表解决错误：

```
<?xml-stylesheet href="http://www.w3.org/StyleSheets/TR/W3C-REC.css"?> 
```

使用 DTD 将`book`元素的 ID 属性声明为类型 ID：

```
<!ATTLIST book id ID #IMPLIED> 
```

将其另存为`ids.dtd`，然后使用 doctype in`1.xml`来引用它：

```
<?xml version="1.0"?>
<!DOCTYPE id-list SYSTEM "ids.dtd"> 
```

**参考**

*   [xml:id 版本 1.0](http://www.w3.org/TR/xml-id/)
*   [X包括：片段示例](http://www.w3.org/TR/xinclude/#fragment-example)
*   [将样式表与 XML 文档相关联](http://www.w3.org/TR/xml-stylesheet/)

# java - JScrollPane - 平滑滚动

> ID：13550569
> 
> 赞同：6
> 
> 时间：2012-11-25T11:25:10.593
> 
> 标签：java, swing, scroll, jscrollpane

我有一个块增量适中的 JScrollPane (125)。我想对其应用平滑/慢速滚动，这样滚动时它就不会跳跃（或跳过）。我怎样才能做到这一点？

我正在考虑像 Windows 8 一样滚动。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-31T20:42:59.190

您可以`javax.swing.Timer`在滚动期间使用 a 来实现平滑滚动效果。如果您从组件外部触发此操作，则类似这样的操作将起作用（其中`component`的组件在哪里`JScrollPane`）：

```
final int target = visible.y;
final Rectangle current = component.getVisibleRect();
final int start = current.y;
final int delta = target - start;
final int msBetweenIterations = 10;

Timer scrollTimer = new Timer(msBetweenIterations, new ActionListener() {
    int currentIteration = 0;
    final long animationTime = 150; // milliseconds
    final long nsBetweenIterations = msBetweenIterations * 1000000; // nanoseconds
    final long startTime = System.nanoTime() - nsBetweenIterations; // Make the animation move on the first iteration
    final long targetCompletionTime = startTime + animationTime * 1000000;
    final long targetElapsedTime = targetCompletionTime - startTime;

    @Override
    public void actionPerformed(ActionEvent e) {
        long timeSinceStart = System.nanoTime() - startTime;
        double percentComplete = Math.min(1.0, (double) timeSinceStart / targetElapsedTime);

        double factor = getFactor(percentComplete);
        current.y = (int) Math.round(start + delta * factor);
        component.scrollRectToVisible(current);
        if (timeSinceStart >= targetElapsedTime) {
            ((Timer) e.getSource()).stop();
        }
    }
});
scrollTimer.setInitialDelay(0);
scrollTimer.start(); 
```

该`getFactor`方法是从线性到缓动函数的转换，并且将根据您希望它的感觉将其实现为其中之一：

```
private double snap(double percent) {
    return 1;
}

private double linear(double percent) {
    return percent;
}

private double easeInCubic(double percent) {
    return Math.pow(percent, 3);
}

private double easeOutCubic(double percent) {
    return 1 - easeInCubic(1 - percent);
}

private double easeInOutCubic(double percent) {
    return percent < 0.5
            ? easeInCubic(percent * 2) / 2
            : easeInCubic(percent * -2 + 2) / -2 + 1;
} 
```

这也可能适用于在组件内工作，因此当用户滚动时，它会按照这些方式执行某些操作。

或者，如果可能，您可以使用对动画的支持比 Swing 更好的 JavaFX。

# database - Oracle PLSQL 函数调用到第二个函数

> ID：13550574
> 
> 赞同：0
> 
> 时间：2012-11-25T11:26:10.380
> 
> 标签：database, oracle, plsql

如何将第一个函数的返回值调用到第二个函数中？这是计算客户访问我的商店次数的第一个函数：

```
CREATE OR REPLACE  FUNCTION CALCULATE ( NUM CUSTOMER.CUST_VISIT%TYPE)
RETURN NUMBER
IS
V_CUST_VISIT NUMBER(3);
V_COUNT INTEGER;
BEGIN
SELECT CUST_VISIT
INTO V_CUST_VISIT
FROM CUSTOMER, BOOKING
WHERE CUSTOMER.CUST_ID = BOOKING.CUST_ID;
SELECT MAX(COUNT(*)) 
INTO v_count
FROM BOOKING
GROUP BY CUST_ID
HAVING count(*)>=0;

CASE v_count
WHEN 3 THEN v_cust_visit:= v_count; 
DBMS_OUTPUT.PUT_LINE('10% DISCOUNT DUE');

WHEN 6 THEN v_cust_visit:= v_count;
DBMS_OUTPUT.PUT_LINE('20% DISCOUNT DUE');

WHEN 9 THEN v_cust_visit:= v_count;
DBMS_OUTPUT.PUT_LINE('30% DISCOUNT DUE');

ELSE v_cust_visit:= v_count;
DBMS_OUTPUT.PUT_LINE('OOPS NO DISCOUNT DUE YET! AFTER THREE BOOKINGS');
END CASE;
END;
/
Where in the second function:
CREATE OR REPLACE FUNCTION CALC_BILL
(BILL_NUM TREATMENT.TREAT_COST%TYPE)

RETURN NUMBER

IS

CUST_ID VARCHAR2(4);
TREAT_COST NUMBER(10,2);
v_TREAT_cost TREATMENT.TREAT_COST%TYPE; 
DISCOUNTED_BILL NUMBER(10,2);
NO_DISCOUNT EXCEPTION;

BEGIN

SELECT TREAT_COST 
INTO v_treat_cost 

FROM CUSTOMER C, TREATMENT T, TREAT_SESSION TS
WHERE C.CUST_ID = TS.CUST_ID 
AND T.TREAT_ID = TS.TREAT_ID; 
```

IF CALCULATE() :=3 -- 这是我尝试过的方法，但没有奏效 -- THEN DISCOUNTED_BILL:= v_treat_cost-(v_treat_cost*0.1);

ELSIF CALCULATE := 6 THEN DISCOUNTED_BILL := v_treat_cost-(v_treat_cost*0.2);

ELSIF CALCULATE := 9 THEN DISCOUNTED_BILL := v_treat_cost-(v_treat_cost*0.3); ELSE 提高 NO_DISCOUNT；

```
 END IF;
 END;
 / 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:35:10.550

将函数调用分配给变量：

```
 some_number_result := calculate(some_input);

    if some_number_result = 1 then 
       -- do stuff
    end if; 
```

ETC...

# android - 小部件在旋转时崩溃，垂直到水平

> ID：13550577
> 
> 赞同：0
> 
> 时间：2012-11-25T11:26:37.317
> 
> 标签：android, crash, widget, imagebutton

再会。我有一个带有图像按钮的小部件。我正在尝试使用以下代码在按钮上设置图像，但我的小部件在旋转时崩溃！你有什么想法？

```
 @Override
      public void onReceive(Context context, Intent intent)
      {
       RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget);
       remoteViews.setImageViewResource(R.id.imageButton, MyNewimageID);

       ComponentName thisWidget = new ComponentName(context, MyWidget.class);
       AppWidgetManager manager = AppWidgetManager.getInstance(context);
       manager.updateAppWidget(thisWidget, remoteViews);
     } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-25T20:06:17.590

我找到了解决方案

```
Intent active = new Intent(context, MyWidget.class);
active.setAction(ACTION_WIDGET_RECEIVER);
PendingIntent actionPendingIntent = PendingIntent.getBroadcast(context, 0, active, 0);       remoteViews.setOnClickPendingIntent(R.id.imagebuttonButton, actionPendingIntent);
manager.updateAppWidget(thisWidget, remoteViews); 
```

# ruby - 创建模型方法

> ID：13550578
> 
> 赞同：-1
> 
> 时间：2012-11-25T11:26:50.087
> 
> 标签：ruby, ruby-on-rails-3, model

我想创建一个方法，它会给我用户的全名。

用户有一个 first_name 和一个 sur_name 属性。

我正在尝试做类似的事情

```
def fullname
  "#{self.first_name} #{self.sure_name}"
end 
```

但是当我尝试做时，它给了我一个方法丢失错误`@user.fullname`

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T11:49:26.970

您有一个错字：您的方法调用了*确定*的名称（带有“e”），并且您想要*sur*名称（没有“e”）。

# yii - 在没有 RBAC 的情况下以编程方式为用户设置角色？

> ID：13550583
> 
> 赞同：0
> 
> 时间：2012-11-25T11:27:46.897
> 
> 标签：yii, access-rules

我不使用 RBAC 来验证用户。如果可能的话，我不介意使用它，但我不认为它是。原因是，我使用 REST API 来验证用户。我的 authenticate() 函数中有这个：

```
$API = new API();
$user = $API->getAccountDetailsByEmail($this->username);
if($user->password !== md5($this->password) ) {
   // Validated
} 
```

我希望在此步骤中也为用户分配一个角色。这就是为什么我在上面尝试以下内容的原因：

```
$this->setState('roles', 'admin'); 
```

但这根本行不通。我仍然得到：

```
Error 403: You are not authorized to perform this action. 
```

当我转到该页面时，我试图让管理员可以访问。如何以编程方式将用户设置为管理员？

我是否遗漏了什么，或者是否有一种简单的方法可以将角色分配给经过身份验证的用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:56:05.400

CAccessControlFilter 依赖于 CWebUser::checkAccess() 函数。以角色名称作为参数调用此函数。如果您不想要 RBAC，那么您可以做的最简单的方法是编写您自己的 CWebUser 派生类并实现您自己的 checkAccess。

您可以通过添加“用户”组件在配置文件中激活此类：

```
'components'=> array
(
    'user' => array
    (
        'class' => 'MyWebUser',
    ),
), 
```

例如，您可以在用户会话中设置角色列表，并让函数检查用户是否具有该角色。虽然我建议不要使用会话来存储角色（数据库更好），但使用 setState 绝对是个坏主意。IIRC 这在用户端设置了一个 cookie，一些有创造力的用户可以弄清楚如何滥用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T18:28:13.783

如果你的行动规则是

```
array('allow', 
  'actions'=>array(
    'myAction',
  ),
  'users'=>array('@'),
  'roles'=>array('admin'),
), 
```

然后将它们更改为：

```
array('allow', 
  'actions'=>array(
    'myAction',
  ),
  'users'=>array('@'),
  'expression'=>'$user->getState("roles")=="admin"',
), 
```

操作规则的角色参数仅用于 RBAC。因此，如果您不使用 RBAC，则需要以不同的方式进行验证。

如果这不是您的问题，请提供有关您正在尝试的内容以及访问规则的详细信息。

# javascript - ExpressionEngine cms 中的定位问题

> ID：13550585
> 
> 赞同：0
> 
> 时间：2012-11-25T11:28:16.140
> 
> 标签：javascript, html, css, content-management-system, expressionengine

我的表达式引擎存在定位问题。[单击此处](http://thecharlesnyc.com/dev/ExpressionEngine/index.php/services)在以下链接上，我正在循环元素，`<div id="services-container">`我注意到它在第一行上循环良好，但在第二行上开始错位。我已经尝试使用`switch=""`标签为每个循环创建一个单独的类，见下文：

```
{exp:channel:entries channel="services" dynamic="no" sort="asc|desc"}
    <div id="services-container" class="{switch='1|2|3|4|5|6'}">
        <div class="service-content">
            <img src="{service_image}" alt="banner" alt="{alt}" class="service-banner">
            <p>{service_head_line}</p>
            {service_listed_items}
            <ul class="service-credentials">
                <li>{service_list_1}</li>
                <li>{service_list_2}</li>
                <li>{service_list_3}</li>
            </ul>

            <ul class="service-credentials">
                <li>{service_list_4}</li>
                <li>{service_list_5}</li>
                <li>{service_list_6}</li>
            </ul>
            <a href="#">View related projects &raquo;</a>
            {/service_listed_items}
        </div><!--service-content-->
    </div><!--SERVICES CONTAINER-->
    {/exp:channel:entries} 
```

当我尝试在我的样式表中对这些类进行分类时，什么都没有发生。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:37:07.140

这涉及到 ExpressionEngine，但也涉及 css。基本上，您正在尝试创建一个每行包含 3 个项目的网格，对吗？

这些“行”中的每一个都必须采用浮动包含策略，因为它只包含 3 个浮动项目。我使用 switch 参数的方式：

```
{exp:channel:entries channel="services" dynamic="no" orderby="date" sort="asc"}
        {if "{switch='one|two|three'}" == "one"}<div class="row">{/if}
                <div class="item">
                        ...code...          
                </div>
        {if "{switch='one|two|three'}" == "three" || count == total_results}</div>{/if}
{/exp:channel:entries} 
```

该代码将在该循环中每三个项目包含一个具有一类行的 div。

然后，如果你的项目是浮动的，你的行必须有某种浮动清除策略来包含它们，比如溢出：隐藏；或[clearfix 方法](http://nicolasgallagher.com/micro-clearfix-hack/)。

# android - 如何从 Android 的 viewPager 中安全地删除位图

> ID：13550586
> 
> 赞同：2
> 
> 时间：2012-11-25T11:28:19.960
> 
> 标签：android, bitmap, android-viewpager

我有一个 viewPager，我在其中保存片段，每个片段都有一个 GifDecoderView

```
public class GifDecoderView extends ImageView {

private boolean mIsPlayingGif = false;

private GifDecoder mGifDecoder;

private Bitmap mTmpBitmap;

final Handler mHandler = new Handler();

final Runnable mUpdateResults = new Runnable() {
    public void run() {
        if (mTmpBitmap != null && !mTmpBitmap.isRecycled()) {
            GifDecoderView.this.setImageBitmap(mTmpBitmap);
        }
    }
};

public GifDecoderView(Context context, InputStream stream) {
    super(context);
    playGif(stream);
}
public GifDecoderView(Context context, AttributeSet attrs) {
    super(context,attrs);
}
public void doNothing(){
    //do nothing
    int a = 2+2;
}
@Override
protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub
    super.onDraw(canvas);
}

public void playGif(InputStream stream) {
    mGifDecoder = new GifDecoder();
    mGifDecoder.read(stream);

    mIsPlayingGif = true;

    new Thread(new Runnable() {
        public void run() {
            final int n = mGifDecoder.getFrameCount();
            final int ntimes = mGifDecoder.getLoopCount();
            int repetitionCounter = 0;
            do {
                for (int i = 0; i < n; i++) {
                    mTmpBitmap = mGifDecoder.getFrame(i);
                    int t = mGifDecoder.getDelay(i);
                    mHandler.post(mUpdateResults);
                    try {
                        Thread.sleep(t);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
                if(ntimes != 0) {
                    repetitionCounter ++;
                }
            } while (mIsPlayingGif && (repetitionCounter <= ntimes));
            GifDecoderView.this.setImageResource(0);
            for (int i = 0; i < n; i++) {
                mGifDecoder.getFrame(i).recycle();
            }
            mGifDecoder = null;

        }
    }).start();
}

public void stopRendering() {       
    mIsPlayingGif = false;
}
} 
```

由于 gif 占用大量内存，我想在用户滑动到另一个页面后删除 gif，所以我使用

```
 @Override
        public void setUserVisibleHint(boolean isVisibleToUser) {
        super.setUserVisibleHint(isVisibleToUser);

        if (isVisibleToUser == true) { Log.i("img","visible");}
        else if (isVisibleToUser == false) { if(done){iv.stopRendering(); Log.i("img","DESTROYED");} }

        } 
```

调用

```
 public void stopRendering() {       
    mIsPlayingGif = false;
} 
```

因此线程停止循环并执行

```
 } while (mIsPlayingGif && (repetitionCounter <= ntimes));
            GifDecoderView.this.setImageResource(0);
            for (int i = 0; i < n; i++) {
                mGifDecoder.getFrame(i).recycle();
            }
            mGifDecoder = null; 
```

如果我通过向左滑动而不是看到空视图返回到上一个片段，我会收到此错误：

```
11-25 13:19:21.721: E/AndroidRuntime(697): Uncaught handler: thread main exiting due to uncaught exception
11-25 13:19:21.759: E/AndroidRuntime(697): java.lang.RuntimeException: Canvas: trying to use a recycled bitmap android.graphics.Bitmap@44d24e10
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.graphics.Canvas.throwIfRecycled(Canvas.java:955)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.graphics.Canvas.drawBitmap(Canvas.java:1044)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.graphics.drawable.BitmapDrawable.draw(BitmapDrawable.java:323)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.widget.ImageView.onDraw(ImageView.java:845)
11-25 13:19:21.759: E/AndroidRuntime(697):  at com.example.test.GifDecoderView.onDraw(GifDecoderView.java:45)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.view.View.draw(View.java:6535)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.view.ViewGroup.drawChild(ViewGroup.java:1531)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.view.View.draw(View.java:6538)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.view.ViewGroup.drawChild(ViewGroup.java:1531)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.view.ViewGroup.drawChild(ViewGroup.java:1529)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.view.View.draw(View.java:6538)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.support.v4.view.ViewPager.draw(ViewPager.java:2094)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.view.ViewGroup.drawChild(ViewGroup.java:1531)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.view.ViewGroup.drawChild(ViewGroup.java:1529)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.view.ViewGroup.drawChild(ViewGroup.java:1529)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.view.ViewGroup.drawChild(ViewGroup.java:1529)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.view.ViewGroup.drawChild(ViewGroup.java:1529)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.view.View.draw(View.java:6538)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.widget.FrameLayout.draw(FrameLayout.java:352)
11-25 13:19:21.759: E/AndroidRuntime(697):  at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1830)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.view.ViewRoot.draw(ViewRoot.java:1349)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1114)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1633)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.os.Looper.loop(Looper.java:123)
11-25 13:19:21.759: E/AndroidRuntime(697):  at android.app.ActivityThread.main(ActivityThread.java:4363)
11-25 13:19:21.759: E/AndroidRuntime(697):  at java.lang.reflect.Method.invokeNative(Native Method)
11-25 13:19:21.759: E/AndroidRuntime(697):  at java.lang.reflect.Method.invoke(Method.java:521)
11-25 13:19:21.759: E/AndroidRuntime(697):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
11-25 13:19:21.759: E/AndroidRuntime(697):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
11-25 13:19:21.759: E/AndroidRuntime(697):  at dalvik.system.NativeStart.main(Native Method) 
```

所以我不确定 viewPager 在哪里保留对位图的引用，因为

```
final Runnable mUpdateResults = new Runnable() {
public void run() {
    if (mTmpBitmap != null && !mTmpBitmap.isRecycled()) {
        GifDecoderView.this.setImageBitmap(mTmpBitmap);
    }
}
}; 
```

在此错误之前不调用。

# gcc - 手动链接和可执行，没有其他选择

> ID：13550588
> 
> 赞同：0
> 
> 时间：2012-11-25T11:28:46.477
> 
> 标签：gcc, linker, ld

我使用`gcc`的编译器比任何其他编译器都多，所以我将使用这个编译器套件来塑造我的示例，但是我在我尝试过的几乎所有套件中都遇到了这个问题，比如`gcc`,和.`mingw``clang``msvc`

`gcc`提供此标志：

*   `-l`你写名字`foo`，gcc会找到一个对应的库，名为`libfoo`
*   `-L`您附加库所在的路径，并且 gcc 尝试将所需的库与它在该路径中找到的库匹配
*   `-rpath`基本上是同一个库的不同路径池，因此可执行文件足够“智能”，可以在需要时寻找替代方案。

这个问题对我来说很大，没有一个能解决我的问题，而且每个标志都面临同样的问题：歧义。

如果我只想链接一个我知道没有办法在最好的情况下不包含一些歧义的库，我想要的是：

*   仅链接 1 个特定库，并且仅链接我使用精确名称和路径指定的 1
*   避免像给定名称那样的自动完成机制，`-l`因为我的库没有`foo.so`命名`libfoo.so`
*   链接库的相对路径
*   只考虑明确给出的一组库，不应该涉及任何其他自动化，没有库池，没有搜索路径，没有别的，我更喜欢错误列表而不是链接到随机库的可执行文件

我经常在不同的版本中处理不同的库，出于历史和兼容性的原因，它们经常使用相同的名称，使用 gcc 编译和链接是一场噩梦，因为我从来没有得到我想要链接到我的可执行文件的库。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:10:36.930

最简单的方法是简单地指定库。

`gcc -o test test.o /path/my_library.so /path/to_other_library.a`

这种方法的明显缺点当然是如果您移动该库，那么您的应用程序将不再工作，但由于您声明您在固定位置拥有库，因此它应该适用于您的情况。

# php - Linux Apache 上的 PHP MySql WebService：HTTP 错误：标头的套接字读取超时

> ID：13550590
> 
> 赞同：0
> 
> 时间：2012-11-25T11:29:10.817
> 
> 标签：php, web-services, apache

Webservice 托管在带有 apache 网络服务器的 Linux 服务器上。我用过 Nusoap v1.123。

我正在尝试使用 Nusoap 通过远程客户端 php 脚本调用 web 服务的 webmethods。我收到 HTTP 错误：标头的套接字读取超时。对于某些网络方法。一些网络方法工作正常。所有这些网络方法都会查询/更新数据库，并且需要几秒钟才能完成。

我不知道要设置哪些超时值以及在哪里设置。（无论是在 Apache conf 文件或 php.ini 文件或 nusoap 中）。

我尝试使用不同的值，例如 In Apache: timeout: Connection: 300 - Keep-Alive: 20\. In Php.ini: default_socket_timeout: 300

仍然没有成功。

任何线索都受到高度赞赏。

# android - 如何获取画布像素

> ID：13550591
> 
> 赞同：5
> 
> 时间：2012-11-25T11:29:12.723
> 
> 标签：android, colors, android-canvas

我有一个画布，在上面画线：

```
//see code upd 
```

我需要制作从我的画布上取色的移液器工具。我怎样才能做到？

* * *

代码更新：

```
private static class DrawView extends View 
{
        ...
        public DrawView(Context context) {
            super(context);
            setFocusable(true);

            mBitmap = Bitmap.createBitmap(640, 860, Bitmap.Config.ARGB_8888);
            mCanvas = new Canvas(mBitmap);
            mPath = new Path();
            mBitmapPaint = new Paint(Paint.DITHER_FLAG);

            this.setDrawingCacheEnabled(true);
        }

        @Override
        protected void onDraw(Canvas canvas) {
            canvas.drawColor(0xFFAAAAAA);
            canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
            canvas.drawPath(mPath, mPaint);
        }
        private void touch_up()
        {
            if(!drBool) //is true when I click pipette button
            {
                ...
                mCanvas.drawPath(mPath, mPaint); // lines draw
                mPath.reset();
            }else{
                this.buildDrawingCache();
                cBitmap = this.getDrawingCache(true);
                if(cBitmap != null)
                {
                    int clr = cBitmap.getPixel((int)x, (int)y);
                    Log.v("pixel", Integer.toHexString(clr));
                    mPaint.setColor(clr);
                }else{
                    Log.v("pixel", "null");
                }
            }
            drBool = false;
        }
    } 
```

我只看到“像素”-“ffaaaaaa”，或者如果我使用 mCanvas.drawColor(Color.GRAY)“像素”-“ff888888”

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-25T12:00:50.257

画布只不过是一个容器，它包含用于操作位图的绘图调用。所以没有“从画布上取色”的概念。

相反，您应该检查视图位图的像素，您可以使用`getDrawingCache`.

在您的视图的构造函数中：

```
this.setDrawingCacheEnabled(true); 
```

当你想要一个像素的颜色时：

```
this.buildDrawingCache();
this.getDrawingCache(true).getPixel(x,y); 
```

如果您多次调用它，这是非常低效的，在这种情况下，您可能需要添加一个位图字段并使用 getDrawingCache() 在 ondraw() 中设置它。

```
private Bitmap bitmap;

...

onDraw()

  ...

  bitmap = this.getDrawingCache(true); 
```

然后使用`bitmap.getPixel(x,y);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-21T12:45:19.433

上面的答案返回我空白位图。这是我的解决方案

```
@Override
protected void onDraw(Canvas canvas) {
    ...
    bitmapUpdated = true;
} 
```

然后获取位图

```
public Bitmap getBitmapImage() {
    if (bitmapUpdated) {
        this.buildDrawingCache();
        bitmapImage = Bitmap.createBitmap(this.getDrawingCache());
        this.destroyDrawingCache();
    }
    return bitmapImage;
} 
```

这对我来说很好，没有过多的开销。

也许更好的解决方案是覆盖 invalidate() 和 onDraw() 所以它使用你的画布，它与你的位图链接

```
Bitmap b = Bitmap.createBitmap(v.getWidth(), v.getHeight(), Bitmap.Config.ARGB_8888);
Canvas c = new Canvas(b);
v.draw(c);
return b; 
```

# architecture - 可扩展的存储 + 处理集群（我需要 Hadoop 吗？）

> ID：13550592
> 
> 赞同：0
> 
> 时间：2012-11-25T11:29:20.993
> 
> 标签：architecture, hadoop, backend, application-server, san

**目标**
我需要为 Web 应用程序实现文件存储和处理后端。该应用程序具有以下特征：

（#1）客户端将存储各种格式和大小的文件（可能在千兆字节范围内）
（#2）有时客户端需要自己检索文件
（#3）有时客户端需要检索输出数据（此处为“OD”），其中对先前存储的文件执行处理以生成 OD。重要提示：OD 大小通常是原始文件大小的一*小*部分——2GB 文件可能产生 1MB OD）。
(#4) 有时客户端会对文件应用转换（例如文件修补）。

**考虑解决方案**
我可以使用存储集群（例如 SAN）来实现#1 和#2，然后使用计算集群来实现#3 和#4。但是在 SAN 和计算集群之间传输大量数据（假设有 100 多个用户请求 OD 或修补文件）对我来说似乎不合适，特别是因为文件数据可能很大，而且大多数时候客户只需要小的 OD 或什么都没有（修补操作消耗客户端输入但不向客户端返回数据）。

所以我认为我需要一个节点集群，其中每个节点都是一个大数据节点和一个有能力的处理节点，以避免存储和处理集群之间的流量（因为现在它们是一个）。节点负责处理它存储的文件，从而避免网络带宽。如果一个节点碰巧处理请求超载，则该节点可能会将一些工作卸载到相邻节点（因此仍会产生带宽成本，但仅在必要时）。

**问题**
(1) Wikimedia 使用“文件服务器”和*单独的*“图像缩放器”服务器……但在我的情况下，我担心大的、不必要的带宽。我的担心是否合理，因此存储/处理节点的分离在我的情况下是否不合适？

(2) 我的方法（大存储集群+强大的处理节点）是否可取？或者我应该考虑不同的架构？

(2) 我考虑过 Hadoop，但不知道它是否适合这项任务（巨大的带宽成本，而且我并没有真正处理大数据）。此外，但如果 Hadoop 适合该任务，请说明原因。

(3) 是否有可用于管理这些服务器集群的开源/其他框架？

(4) 如果没有，我想我将不得不开发一个内部解决方案。我该如何开始？

唷。那是很多。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:16:39.357

Hadoop 并同时使用 HDFS 和 MR 对您来说可能是一个可行的解决方案。但注意事项和注意事项：

1.  您将用于创建“OD”的算法通常可并行化吗？如果它们不是，您可能不会从数据局部性中受益，并且 hadoop 会将文件的数据从保存它的数据节点复制到执行处理的单个节点。

2.  使用 mapreduce，您将无法就地修改文件。因此，您还必须考虑一个后处理步骤，将输出文件重命名为输入文件和其他类似的内务处理。

3.  管理/部署集群并不是很困难。查看 Cloudera Manager 和 Hortonworks 数据平台。这些应该为您提供从部署到管理和监控的所有内容。但是，Cloudera 产品可能会在一定数量的节点之外产生一些许可成本。HDP没有这样的限制AFAIK。

# jquery - 获取 ColorBox 中的当前项目编号

> ID：13550594
> 
> 赞同：2
> 
> 时间：2012-11-25T11:29:23.647
> 
> 标签：jquery, colorbox

默认情况下，当您为一组项目打开 ColorBox 弹出窗口时，它会显示整个组中的当前项目数以及项目总数。如何在客户端获取这些值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-01T00:31:52.407

根据您的配置，您可以（通常）获取当前显示图像的索引号（从 0 开始），如下所示：

```
var currentImageNumber = $.colorbox.element().index(); 
```

要获取当前显示在您的颜色框中的图像数量（假设您正在显示一**组**图像，如 Colorbox 网站中的[示例](http://www.jacklmoore.com/colorbox/example1/)），您可以使用以下语句：

```
var imagesGroupLength = $.colorbox.element().siblings().length + 1; 
```

请记住在某处存储（缓存）这些值以减少计算时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:31:22.170

您的问题很有趣-这些值（集合中的总数，当前显示的项目的实例编号）**已经**是客户端的-除非您在服务器上执行 ColorBox 插件。

下面的想法基于 ColorBox 网站中使用的第一个示例，这是一个非常普通、简单的案例。您的情况可能会有所不同。

获取收藏大小

如下所示轻松完成，其中“.group1”是资产的集合，console.log 包含作为验证。

```
var a = $('.group1').length;
console.log(a); 
```

获取显示实例的数量

使用与先前案例中使用的相同测试设置，可以轻松完成以下操作。

```
$('.group1').on( 'click', function () {
  var h = $(this).attr('href');
  console.log(h);
}); 
```

Var "h" 包含一个href，然后您将遍历集合以找到具有该href 的条目。

请注意，还有其他（更好的！）方法可以做到这一点。例如，如果集合中的每个项目都有一个 ID，那么你可以简单地说

```
var h = this.id 
```

请注意，这一切都是在插件之外完成的。为了让它变得超酷，只需 fork 插件并在研究了元素**current**和**index**的使用后实施更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-28T18:27:36.607

我使用`jquery-colorbox@1.6.4`此设置（请参阅`a-image`用法）：

```
<ul class="image-set">
  <li>
    <img src="img url here">
    <a href="img url here too" class="d-none a-image" title="img name"></a>
  </li>
  ... other <li> items ...
</ul> 
```

我有这段代码获取当前颜色框的当前项目编号：

```
$(window).on('resize orientationchange', () => {
    $.colorbox.close();
    console.log('current colorbox item number:\n', $('.a-image').index($.colorbox.element()));
}); 
```

我的答案是（我准确地指出了获取当前项目编号的工作代码）：

```
$('.a-image').index($.colorbox.element()) 
```

用于初始化颜色框的那个在哪里`$('.a-image')`，例如我的情况：

```
this.colorbox = $('.a-image').colorbox({
  rel: 'a-image', open: false, maxWidth: '100%', maxHeight: '100%',
  slideshow: true, slideshowAuto: false, slideshowSpeed: 2000,
}); 
```

# ruby-on-rails - (Rails) Nokogiri 从 URL 返回 nil

> ID：13550596
> 
> 赞同：3
> 
> 时间：2012-11-25T11:29:46.480
> 
> 标签：ruby-on-rails, ruby, nokogiri

```
def noko_scrape
  require 'nokogiri'
  require 'open-uri'
  url = "http://au.finance.yahoo.com/q/ta?s=ANZ.AX&t=2y"
  doc = Nokogiri::HTML(open(url))
  puts "Retrieved doc =" + doc[1..20]
  ... 
```

我收到一个错误：

```
TypeError in StocksController#noko_scrape can't convert nil into String 
```

（参考最后一行）。

Nokogiri 似乎在 HTML 中发现错误并相应地失败。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T12:07:31.527

HTML 中确实存在错误，您可以尝试一下`doc.errors`：

```
require 'nokogiri'
require 'open-uri'
url = "http://au.finance.yahoo.com/q/ta?s=ANZ.AX&t=2y"
doc = Nokogiri::HTML(open(url))
doc.errors
#=> [#<Nokogiri::XML::SyntaxError: htmlParseEntityRef: no name>, #<Nokogiri::XML::SyntaxError: htmlParseEntityRef: no name>, #<Nokogiri::XML::SyntaxError: htmlParseEntityRef: no name>, #<Nokogiri::XML::SyntaxError: htmlParseEntityRef: no name>, #<Nokogiri::XML::SyntaxError: htmlParseEntityRef: no name>, #<Nokogiri::XML::SyntaxError: htmlParseEntityRef: no name>, #<Nokogiri::XML::SyntaxError: htmlParseEntityRef: expecting ';'>, #<Nokogiri::XML::SyntaxError: htmlParseEntityRef: expecting ';'>, #<Nokogiri::XML::SyntaxError: htmlParseEntityRef: no name>, #<Nokogiri::XML::SyntaxError: htmlParseEntityRef: no name>, #<Nokogiri::XML::SyntaxError: htmlParseEntityRef: expecting ';'>, #<Nokogiri::XML::SyntaxError: htmlParseEntityRef: no name>, #<Nokogiri::XML::SyntaxError: htmlParseEntityRef: no name>, #<Nokogiri::XML::SyntaxError: htmlParseEntityRef: no name>, #<Nokogiri::XML::SyntaxError: Tag nobr invalid>, #<Nokogiri::XML::SyntaxError: Tag nobr invalid>, #<Nokogiri::XML::SyntaxError: Tag nobr invalid>, #<Nokogiri::XML::SyntaxError: Element script embeds close tag>, #<Nokogiri::XML::SyntaxError: Element script embeds close tag>, #<Nokogiri::XML::SyntaxError: Element script embeds close tag>, #<Nokogiri::XML::SyntaxError: Element script embeds close tag>, #<Nokogiri::XML::SyntaxError: Element script embeds close tag>, #<Nokogiri::XML::SyntaxError: Element script embeds close tag>, #<Nokogiri::XML::SyntaxError: Element script embeds close tag>, #<Nokogiri::XML::SyntaxError: Element script embeds close tag>, #<Nokogiri::XML::SyntaxError: Element script embeds close tag>, #<Nokogiri::XML::SyntaxError: Element script embeds close tag>] 
```

但是，这与您遇到的错误无关。您正在尝试转换`doc[1..20]`为字符串，但调用 Nokogiri 文档的元素没有任何意义，因为该文档不是数组。因此，它们都是`nil`：

```
doc[1]
#=> nil
doc[2]
#=> nil 
```

（对任何其他 URL 执行相同操作，您将获得完全相同的结果。）

如果您想要的是文档的 HTML，则可以使用以下`to_html`方法获得：

```
doc.to_html
#=> "<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\">\n<html>... 
```

# r - 聚合在这里使用正确的功能吗？

> ID：13550605
> 
> 赞同：0
> 
> 时间：2012-11-25T11:31:04.497
> 
> 标签：r, dataframe, aggregate

考虑以下数据框：

```
d <- data.frame(c1=c(rep("a",6),rep("b",6)), 
                c2=c("v1","v1","v2","v3","v3","v1", "v2","v3","v1","v2","v3","v2"), 
                c3=c(1.4,-1.2,1.5,1.6,-1.7,1.2, -1.1,-1.2,1.3,1.5,1.1,-1.9)) 
```

我想添加第 4 列 c4 来计算列 c1 中的“a”和“b”有多少个正数和负数。但是，只有 c2 等于“v1”时应考虑 c3 中的那些值。此外，如果只有正值或负值，则应打印空字符串

因此，对于我的示例，第 4 列应如下所示：

```
> d
   c1 c2   c3 c4
1   a v1  1.4 2/1
2   a v1 -1.2 2/1
3   a v2  1.5 2/1
4   a v3  1.6 2/1
5   a v3 -1.7 2/1
6   a v1  1.2 2/1
7   b v2 -1.1 " "
8   b v3 -1.2 " "
9   b v1  1.3 " "
10  b v2  1.5 " "
11  b v3  1.1 " "
12  b v2 -1.9 " " 
```

对于 a ，使用 2/1 的值，因为有两个正数和一个负数，其中 c2="v1"

目前我最接近使用聚合函数，但我仍然没有真正做到正确。不确定是否有更好的功能可用于此类问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T12:15:25.837

如果你想使用纯 R-base`aggregate`应该是你的朋友：

```
ag <- aggregate.data.frame(
  d$c3,
  by = list(d$c1, d$c2),
  FUN = function(x){ paste(sum(x < 0), sum(x>0), sep="/") }
)
> ag
  Group.1 Group.2   x
1       a      v1 1/2
2       b      v1 0/1
3       a      v2 0/1
4       b      v2 2/1
5       a      v3 1/1
6       b      v3 1/1 
```

然后，您可以`merge`将聚合数据放入原始 data.frame 中：

```
d <- merge( d, ag, by.x = c( "c1", "c2" ), by.y = c( "Group.1", "Group.2" ), all.x = TRUE ) 
```

但是，由于它的简单性，我建议使用`ddply`from package：`plyr`

```
library("plyr")
d <- ddply( d, c("c1","c2"), function(x) {
  x$c4 <- paste(sum( x$c3 < 0), sum(x$c3 > 0), sep="/")
  return(x)
}) 
```

**编辑：**

重新阅读问题后，这应该是正确的解决方案`aggregate`：

```
d.sub <- d[ d$c2 == "v1", , drop=FALSE ]
ag <- aggregate(
  d.sub$c3,
  by = list(d.sub$c1),
  FUN = function(x){ # taken from @flodel
    pos <- sum(x < 0);
    neg <- sum( x > 0 );
    ifelse( pos * neg == 0, "", paste( pos, neg, sep="/") )
  }
)
d <- merge( d, ag, by.x = "c1", by.y = "Group.1", all.x = TRUE  ) 
```

关于`ddply`@flodel 的解决方案，我也是这样做的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T12:18:40.763

对于使用多于一列的任何内容（除了您分组的列），我发现`plyr`更方便：

```
ddply(d, "c1", transform,
               c4 = { pos <- sum(c2 == "v1" & c3 >= 0)
                      neg <- sum(c2 == "v1" & c3 < 0)
                      ifelse(pos * neg == 0, ' ', paste(pos, neg, sep = '/')) })

#    c1 c2   c3  c4
# 1   a v1  1.4 2/1
# 2   a v1 -1.2 2/1
# 3   a v2  1.5 2/1
# 4   a v3  1.6 2/1
# 5   a v3 -1.7 2/1
# 6   a v1  1.2 2/1
# 7   b v2 -1.1    
# 8   b v3 -1.2    
# 9   b v1  1.3    
# 10  b v2  1.5    
# 11  b v3  1.1    
# 12  b v2 -1.9 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T12:24:01.480

这是另一种`ddply`使用稍微不同的方法的解决方案：

```
library(plyr)
ddply(d, .(c1), transform, c4 = {
                        tab <- table(factor(sign(c3[c2 == "v1"]), c(1, -1))); 
                        ifelse(any(tab == 0), " ", paste(tab, collapse = "/")) })

#    c1 c2   c3  c4
# 1   a v1  1.4 2/1
# 2   a v1 -1.2 2/1
# 3   a v2  1.5 2/1
# 4   a v3  1.6 2/1
# 5   a v3 -1.7 2/1
# 6   a v1  1.2 2/1
# 7   b v2 -1.1    
# 8   b v3 -1.2    
# 9   b v1  1.3    
# 10  b v2  1.5    
# 11  b v3  1.1    
# 12  b v2 -1.9 
```

# android - android vars 或常量中是否有颜色 sceme 的颜色？

> ID：13550606
> 
> 赞同：0
> 
> 时间：2012-11-25T11:31:17.963
> 
> 标签：android, android-layout, colors, color-scheme

其他语言我曾经使用一些命名为“BackgroundColor”或“TextColor”之类的常量。如果我想为我的组件着色，我只需使用该常量设置它的颜色，我并不关心它是什么颜色。

例如，我为 ColorText 设置了一些颜色，当用户更改主颜色场景时，我的组件将肯定可见，并且颜色将适合此颜色场景。如果我将我的颜色设置为黑色，则可能会出现不可见的情况。

android中的不同颜色场景是否有一个颜色常数会在内部发生变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:36:15.013

不，没有一个`BackgroundColor`是万能的。但是您可以通过使用样式和主题来获得相同的效果。[请在此处](http://www.vogella.com/articles/AndroidStylesThemes/article.html)查看开发人员文档和[此处](http://developer.android.com/guide/topics/ui/themes.html)的示例教程

# javascript - 如何从 getJSON 数组添加谷歌地图标记？

> ID：13550610
> 
> 赞同：1
> 
> 时间：2012-11-25T11:31:58.253
> 
> 标签：javascript, json, google-maps

我的 PHP 文件中的数组如下所示：

```
[
 {"lat":"4.174475","lon":"73.509564","datetime":"2012-11-23 16:41:40"},
 {"lat":"5.17","lon":"73.50633754680894","datetime":"2012-11-23 05:00:00"},
 {"lat":"6.17","lon":"73.50633754680894","datetime":"2012-11-01 00:00:00"}
] 
```

当我单击链接#Three 时，它​​应该使用该`threeClick()`函数生成 3 个标记。这是功能。

```
function threeClick () {
  $.getJSON('json.search.php?idcard=<?php echo $idcardno; ?>&limit=3', function(data) {
    var location;
    $.each(data, function (key, val) {
      addMarker(val.lat,val.lon);
    });
  } 
```

添加标记功能是这样的（来自：[Plotting LatLng coordinates from Json Array on Google Map --- 标记都堆叠在同一个位置](https://stackoverflow.com/questions/7366861/plotting-latlng-coordinates-from-json-array-on-google-map-the-markers-all-st)）

```
function addMarker(lat,lng) {
  marker = new google.maps.Marker({
    position: new google.maps.LatLng(lat,lng),
    map: map,
    icon: "images/mapIcons/red-dot.png"
  });
  markersArray.push(marker);
} 
```

我使用以下方法生成了地图：

```
var map;
var markersArray = [];
function initMap() {
  var latlng = new google.maps.LatLng(4.174475, 73.509564);
  var myOptions = {
    zoom: 16,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  map = new google.maps.Map(document.getElementById("mapcanvas"), myOptions);
} 
```

有人可以建议我如何在单击链接时显示标记吗？这段代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:58:40.187

你说你用过这个：

```
<a id="Three" onclick="threeClick">three</a> 
```

问题是它`threeClick`本身实际上并没有调用该函数。它只是引用它。您需要括号来调用它，如下所示：

```
<a id="Three" onclick="threeClick()">three</a> 
```

但是使用 jQuery 来附加处理程序会更好。所以像这样设置你的html：

```
<a id="Three" href="#">three</a> 
```

然后将其添加到您的 javascript 中：

```
$('#Three').click(function() {
    threeClick();
    return false;
}); 
```

请注意，`return false`这里是为了防止发生“#”单击默认操作（设置 url 哈希）。

# winforms - 我应该使用数据集类作为缓存来加速 SQLite 加载吗

> ID：13550612
> 
> 赞同：1
> 
> 时间：2012-11-25T11:32:18.647
> 
> 标签：winforms, sqlite, vb.net-2010

在我的 WinForms 应用程序中，我将大量数据从二进制文件加载到 SQLite DB 中。我在数据库上进行查找以确定是否要添加每条新数据，例如

```
If LookUpResult Then
   AddNewData
Else
   DiscardNewData
End If 
```

这很慢。插入似乎需要很长时间。我应该使用 DataTable 或 DataSet 类将数据加载到 RAM，然后作为后台任务写入 SQLite DB 吗？或者一次从 DataTable 对象中插入多行成本会更低吗？

我之前将所有数据加载到自定义类中，速度很快，但可能会达到内存限制，因此转移到数据库。我原以为 SQLite 无论如何都会将 INSERT 缓存到 RAM 中，但事实并非如此。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:54:57.550

为确保崩溃一致性，更改的数据在每个事务结束时与磁盘同步。如果不使用显式事务，则每个命令都会获得自己的自动事务，这意味着您会获得每个命令的同步开销。

对所有插入使用一个事务。（只要您通过相同的数据库连接，您自己的更改*就会可见。）*

# android - 在listview android上单击项目

> ID：13550613
> 
> 赞同：0
> 
> 时间：2012-11-25T11:32:20.037
> 
> 标签：android, android-listview

在我的应用程序上，我想单击列表项并进行一些更改，例如删除或更新项。但我无法在我的代码中实现其他代码。所以很少有帮助会很有用。这是我的代码包 com.example.todolist；

```
import java.util.ArrayList;
import java.util.Collection;

import android.os.Bundle;
import android.provider.Contacts;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.content.Intent;
import android.speech.tts.TextToSpeech;
import android.speech.tts.TextToSpeech.OnInitListener;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnKeyListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
public class MainActivity extends Activity implements            OnClickListener,OnKeyListener,OnInitListener {
EditText txtitem;
ListView listitem;
TextToSpeech talker;
ArrayList<String> todolist;
ArrayAdapter<String> arrayadapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    txtitem = (EditText) findViewById(R.id.txtitem);
    listitem = (ListView) findViewById(R.id.listitem);
    talker = new TextToSpeech(this, this);
    txtitem.setOnKeyListener(this);
    todolist = new ArrayList<String>();
    arrayadapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,todolist);
    listitem.setAdapter(arrayadapter);

    }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    getMenuInflater().inflate(R.menu.main, menu);
    MenuItem toAdd = menu.add("AddItem");
    MenuItem toDelete = menu.add("DeleteItem");
    MenuItem toSave = menu.add("SaveItem");
    MenuItem toExit = menu.add("ExitItem");
    MenuItem toUpdate = menu.add("UpdateItem");
    return true;
}

@Override
public boolean onKey(View v, int keyCode, KeyEvent event) {

    return false;
}

@Override
public void onClick(DialogInterface dialog, int which) {

}

public boolean onOptionsItemSelected(MenuItem item){
    super.onOptionsItemSelected(item);

        if(item.getTitle().equals("AddItem")){
            todolist.add(txtitem.getText().toString());
            arrayadapter.notifyDataSetChanged();
           txtitem.setText("");

        }
        if(item.getTitle().equals("DeleteItem")){
            String x = txtitem.getText().toString();
            int y = Integer.parseInt(x);
            todolist.remove(y-1);
            arrayadapter.notifyDataSetChanged();
           txtitem.setText("");

        }
        if(item.getTitle().equals("SaveItem")){
            say("Save Complete");
            arrayadapter.notifyDataSetChanged();
        }
        if (item.getTitle().equals("ExitItem")){

            talker.speak("Are you sure you want to close this activity?",TextToSpeech.QUEUE_FLUSH,null);    
            onBackPressed();

            }
        if(item.getTitle().equals("UpdateItem")){
            String x = txtitem.getText().toString();
            int y = Integer.parseInt(x);

           arrayadapter.notifyDataSetChanged();
           txtitem.setText(todolist.get(y-1));
           todolist.remove(y-1);

        }
    return true;

}

public void say(String text2say){
    talker.speak(text2say, TextToSpeech.QUEUE_FLUSH, null);
}

@Override
    public void onInit(int status) {

}
@Override
public void onDestroy() {
    if (talker != null) {
        talker.stop();
        talker.shutdown();
}

super.onDestroy();

}
    }
@Override
public void onBackPressed() 
new AlertDialog.Builder(this)
.setIcon(android.R.drawable.ic_dialog_alert)
.setTitle("Closing Activity")
.setMessage("Are you sure you want to close this activity?")
.setPositiveButton("Yes", new DialogInterface.OnClickListener()

    {
        @Override
        public void onClick(DialogInterface dialog, int which) {

              finish();
              runOnUiThread(new Runnable() {

                  @Override
                  public void run() {
                      say("Bye");
                  }
              });
        }

    })
    .setNegativeButton("No", null)
    .show();

} 
```

此代码采用列表的元素编号并删除它。但我想单击并删除或更新。小帮助将是有用的。谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T11:38:56.430

**使用**您的`ArrayAdapter`.

一种可能的方法是：

```
Object toRemove = arrayAdapter.getItem([POSITION]);
arrayAdapter.remove(toRemove); 
```

另一种方法是修改 ArrayList 并在 ArrayAdapter 上调用 notifyDataSetChanged()。

```
arrayList.remove([INDEX]);
arrayAdapter.notifyDataSetChanged(); 
```

要**添加**项目，您可以执行以下操作：单击按钮从 edittext 获取文本并将其添加为列表中的项目

```
/** Reference to the button of the layout main.xml */
        Button btn = (Button) findViewById(R.id.btnAdd);

        /** Defining the ArrayAdapter to set items to ListView */
        adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, list);

        /** Defining a click event listener for the button "Add" */
        OnClickListener listener = new OnClickListener() {
            @Override
            public void onClick(View v) {
                EditText edit = (EditText) findViewById(R.id.txtItem);
                list.add(edit.getText().toString());
                edit.setText("");
                adapter.notifyDataSetChanged();
            }
        };

        /** Setting the event listener for the add button */
        btn.setOnClickListener(listener); 
```

在此处阅读官方 android 文档[1](http://developer.android.com/guide/topics/ui/menus.html#RespondingOptionsMenu)和[2](http://developer.android.com/reference/android/view/MenuItem.html)以处理单击菜单项...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T11:39:35.327

您要做的是设置[itemClickListener()](http://developer.android.com/reference/android/widget/AdapterView.html#setOnItemClickListener%28android.widget.AdapterView.OnItemClickListener%29)。这是通过以下方式完成的：

```
list.setOnItemClickListner(new OnItemClickListener(){
    onItemClick(AdapterView<?> parent, View view, int position, long id)
    {
      //Do stuff here.
    }
}); 
```

从该块中，您只需要调用您的删除语句。或者，您可以让您的类使用 AdapterView.OnItemClickListener 接口，并将例程放在那里，然后将命令更改为`list.setOnItemClickListner(this)`;

# ios - Monotouch、Monotouch.Dialog、iPad 和定制

> ID：13550620
> 
> 赞同：2
> 
> 时间：2012-11-25T11:34:33.233
> 
> 标签：ios, user-interface, xamarin.ios, controls

我正在使用 MonoTouch 开发一个仅限 iPad 的调查应用程序。使用 monotouch.dialog (mt.d)，我发现构建这些界面可以很快完成，这太棒了。

但是...我还发现 mt.d 只完成了我想要的大约 80% 的工作。让我想知道：我应该投资于扩展 mt.d 以满足我的需求，还是应该选择与 mt.d 不同的东西？

我的一些要求：

1.  没有过渡的 Radiogroups：我喜欢立即呈现的选项（iPad 屏幕上有足够的空间）
2.  一个评级 UI 控件，例如 [http://www.cocoacontrols.com/platforms/ios/controls/dyrateview](http://www.cocoacontrols.com/platforms/ios/controls/dyrateview)
3.  混合无线电组：如 3 个预定义元素和第四个允许手动添加内容的元素

您对此有何看法？这可以轻松完成吗（我是一名训练有素的程序员，但对 C# 和 iOS 开发都很陌生）？你们知道任何带有 C#/MonoTouch 绑定的自定义 UI 组件的在线存储库吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:27:41.597

这当然是一个主观意见，但我的看法是，如果你相信你可以在 UITableView（MonoTouch.Dialog 所基于的）中完成你的 UI，那么你应该选择 MonoTouch.Dialog。如果 UITableView 不能满足您的需求，您应该寻找不同的方法。MonoTouch.Dialog 非常灵活，并且是开源的，所以如果你需要任何不同的东西，你可以直接使用源代码并随意修改它。

# android - 移动应用原型制作工具

> ID：13550621
> 
> 赞同：11
> 
> 时间：2012-11-25T11:34:33.190
> 
> 标签：android, iphone, windows-phone-7, mobile

最好的移动原型制作工具有哪些，移动原型的最佳方法是什么

我想首先创建一些免费的代码，然后开始使用相同或更高级的工具设计更多东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T11:42:51.037

尝试这个[文章](http://blog.stephengates.com/2012/06/28/best-design-tools-mobile-design/)，它描述了移动设计的最佳设计工具。

您还可以使用更强大的工具：

*   [香脂](http://www.balsamiq.com/)
*   [原型.io](http://proto.io/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-12T15:42:05.077

我是[MockingBot](https://mockingbot.com)的开发者，我们最近推出了一个全新设计的新版本，我认为你应该试一试。

![在此处输入图像描述](../Images/d69e3c512c9b53dfd38749fc33f8ab95.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T13:40:32.940

我更喜欢使用[Justinmind Prototyper](http://www.justinmind.com/prototyper/download)，UI 非常接近设备上的内容，并为最终用户提供了关于应用程序概述和流程的良好感觉。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-27T13:52:24.990

将fluidui.com添加到组合中，使用完整的iOS、Android和Win8库进行拖放，或者上传您自己的图像以及在手机上实时测试转换和交互的能力（通过二维码扫描）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-25T08:39:42.247

也许为时已晚，但我刚刚在 MIT 许可下发布了[http://www.protocoder.org](http://www.protocoder.org)，试一试！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-26T05:40:57.410

试试[http://xiffe.com](http://xiffe.com)

它具有拖放界面，并通过单击按钮链接屏幕来支持应用程序工作流模拟。支持 iOS、Android 和 Windows Phone。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-19T12:35:51.550

*   [模拟流](http://www.mockflow.com/)
*   [蒂格齐](http://appery.io/)

真的很喜欢Mockflow。为一个快速的小项目提供免费使用计划，一年只需 69 美元即可在业务中使用它。我认为有可能在一年内建立一个 GUI 设计。对于任何更改，您都有 Photoshop(Gimp) ^^。

# xcode - 如何更改 NSTextView 中的字体颜色？

> ID：13550626
> 
> 赞同：1
> 
> 时间：2012-11-25T11:34:54.700
> 
> 标签：xcode, macos, cocoa, colors, textview

我一直在到处搜索，但找不到解决方案如何更改 NSTextView 中的字体颜色？Xcode / Interface Builder中当然有一个选项，但是编译时我不会更改颜色。但是背景颜色确实发生了变化。我必须继承 TextView 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T11:37:10.507

尝试做这样的事情： -

```
(IBAction) colorTest: (id) sender{ 
[mText insertText: @"red" color: [NSColor redColor]]; 
[mText insertText: @" " color: [NSColor blackColor]]; 
[mText insertText: @"green" color: [NSColor greenColor]]; 
[mText insertText: @" " color: [NSColor blackColor]]; 
[mText insertText: @"blue" color: [NSColor blueColor]]; 
[mText insertText: @" " color: [NSColor blackColor]]; 
} 
```

或者您尝试将其设置为默认颜色，如下所示：-

```
 NSFont* font = <whatever>;
[textView setFont: font]; 
```

或者

```
 [[myNSTextView textStorage] setFont:[NSFont fontWithName:@"Menlo" size:11]]; 
```

# php - 双下拉列表值

> ID：13550630
> 
> 赞同：1
> 
> 时间：2012-11-25T11:35:25.340
> 
> 标签：php, javascript, jquery, ajax

我正在考虑两个下拉列表，一个依赖于另一个。两个下拉列表都有来自数据库的值。在这种情况下，哪一个是最好的方法。

1.  使用纯 PHP 从数据库中检索所有值，然后将它们存储在 javascript 变量中，稍后在 javascript（数组）变量中搜索第二个下拉列表值（如果第一个下拉列表的值更改）。

2.  如果第一个下拉列表的值发生更改，则使用 AJAX(jQuery) 从数据库中检索第二个下拉列表的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T11:38:48.027

这取决于很多事情。

您必须通过从数据库中获取数据来显示第一个下拉列表，

如果下拉列表中每个选定记录的数据很大，则使用 ajax 获取它，否则制作 js 变量并在选择第一个下拉列表时使用 javascript 填充它。

> 根据您的标准，最好使用 Ajax 延迟加载，这将使您的页面在加载时快速加载，并且您可以使用 ajax 获取其他下拉列表的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T11:53:41.620

您指出的两种选择各有利弊，决定取决于这种利弊如何影响您的应用程序：

> 使用纯 PHP 从数据库中检索所有值，然后将它们存储在 javascript 变量中，稍后在 javascript（数组）变量中搜索第二个下拉列表值（如果第一个下拉列表的值更改）。

优点：

*   最小化 http 请求，您只需要一个请求即可检索整个数据。
*   最大限度地减少对数据库的查询，通常您只执行一个查询。

缺点：

*   如果您有大量数据，则增加使用的内存量。
*   如果您的数据不断变化，您的访问者在刷新整个页面之前不会看到这些变化。

> 如果第一个下拉列表的值发生更改，则使用 AJAX(jQuery) 从数据库中检索第二个下拉列表的值。

优点：

*   您不需要将所有数据存储在内存中，只需将要使用的数据存储，从而减少所需的内存量。
*   您的数据每次都会更新，无需重新加载页面，只需更改选择。

缺点：

*   每次选择更改时，您都需要执行多个 http 请愿并针对数据库运行查询。

如果数据量比较大，性能不是必须的，我个人更喜欢方法二。

# c# - 内存有效SetPixel

> ID：13550634
> 
> 赞同：1
> 
> 时间：2012-11-25T11:36:21.753
> 
> 标签：c#, wpf, bitmap

我创建了一个 WPF [Audiovisualation](http://s7.directupload.net/images/121125/q469xi5y.png)。
为了绘制视觉效果，我使用了一个设置像素的位图。[你可以在这里](http://tipsandtricks.runicsoft.com/CSharp/WpfPixelDrawing.html)看到基本的想法。

问题是我必须`BitmapSource.Create`每秒调用大约 30 次。这会导致大量内存浪费。他们`GC`做得很好，但这还不够。

我能做些什么来解决这个问题？我需要一个只从基本字节数组更新的位图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:48:05.270

您将希望使用[WritableBitmap](http://msdn.microsoft.com/en-us/library/aa347331.aspx)作为您的`BitmapSource`.

# javascript - 如何在涉及搜索事件的选择事件后重新打开菜单？

> ID：13550637
> 
> 赞同：1
> 
> 时间：2012-11-25T11:36:38.190
> 
> 标签：javascript, jquery, jquery-ui, autocomplete, widget

我正在使用[jQuery Autocomplete](http://api.jqueryui.com/autocomplete)小部件，并且在一个“不满意”（至少对我而言）[之前的问题](https://stackoverflow.com/questions/13542923/how-to-prevent-closing-the-menu-after-a-select)涉及破解插件以防止关闭菜单之后，我正在寻找一种“侵入性较小”的方法来制作东西不同的方法。所以，我想知道是否有办法在涉及事件的事件之后*重新打开*菜单。也就是说，给定`select``search`

```
$(#input_field).autocomplete({
  autoFocus: true,
  select   : function(event, ui) {
    event.preventDefault();

    $(this).autocomplete('search', "Custom search string" );
  },
  ...
}); 
```

*我想让菜单打开*（*注意*：有一种方法可以[关闭](http://api.jqueryui.com/autocomplete/#method-close)菜单但不打开它）*，然后用户从该菜单中选择一个项目*。可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:22:29.743

我找到了一种方法来做到这一点。使用计时器来监听自动完成关闭事件：

```
var stop = false;
setInterval(function(){
    if(!$('.ui-autocomplete').is(':visible') && !stop)
    {
        $('.ui-autocomplete').css('display','block');
    }
},10); 
```

但这不是防止关闭菜单的好方法！！！！
当事件发生时，您可以将 'stop' 设置为 true 。

# android - AVD 模拟器启动但不加载新应用程序

> ID：13550638
> 
> 赞同：0
> 
> 时间：2012-11-25T11:36:52.323
> 
> 标签：android, eclipse, emulation, avd, ddms

我正在 Eclipse 中开发我的 android 应用程序。我曾经使用 AVD 模拟器和真机设备调试我的 android 应用程序。最近，当我尝试使用模拟器时，我遇到了以下问题：

当我发出“运行方式”或“调试方式”Android 应用程序时，AVD 模拟器会启动，但它不会加载最新版本的应用程序。它保留了以前的版本。DDMS 不会在“设备”选项卡中加载“仿真器设备”。此外，调试“Logcat”不写任何东西。

当我使用电话设备时，一切正常。有什么建议么？

更多可能有帮助的信息：来自 Manifest 文件：来自 default.properties 文件：target=Google Inc.:Google APIs:12 AVD Emulator 目标：Android 3.1 Google APIs Level 12

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:44:56.420

如果您的模拟器属性`Snapshot`启用了选项，则取消选中它并在清理后重建您的应用程序。模拟器可能会从快照中挑选您的旧副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T11:38:55.477

在你的模拟器快照中应该被禁用以及在“DEV设置”选项中USB调试模式应该被启用。它会正常工作

# android - Android sdk 21 库错误

> ID：13550640
> 
> 赞同：-1
> 
> 时间：2012-11-25T11:37:16.700
> 
> 标签：android

我安装了[Android SDK 21 捆绑 Windows x64](http://developer.android.com/sdk/index.html)，如果我尝试将任何代码添加到初始项目创建代码中，只会得到错误。我尝试通过 Hello World 运行，每个条目都给出了错误。BTW：我是 Android 和 Linux 的新手，但我做过很多 Windows 编程。谢谢...

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal">
<EditText android:id="@+id/edit_message"
    android:layout_weight="1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:hint="@string/edit_message" />
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_send" />
</LinearLayout> 
```

编辑：删除冗余。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T11:51:29.497

您的最后一个`Button(button_send)`没有任何父视图。

您应该将其放入类似`LinearLayout`或其他人的视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T11:51:07.623

尝试：1）重新加载 Eclipse 2）运行 Project Clean。

# google-maps-api-3 - 完全删除折线

> ID：13550641
> 
> 赞同：0
> 
> 时间：2012-11-25T11:37:23.980
> 
> 标签：google-maps-api-3, google-polyline

我有下一个使用 xml 文件加载路径的代码，但是当我尝试为其他车辆加载另一个路径时，它还会加载最后一个路径和新路径。在再次加载 XML 文件之前，我首先调用了一个删除函数。但它只是隐藏路径。

此致。

```
var polyline = [];

function path() {

downloadUrl("myPath.asp?vehicle=12", function(data) {
    var xml = xmlParse(data);
    var markersPath = xml.documentElement.getElementsByTagName("marker");   
    //var path = [];
    for (var i = 0; i < markersPath.length; i++) {
    var lat = parseFloat(markersPath[i].getAttribute("lat"));
    var lng = parseFloat(markersPath[i].getAttribute("lng"));
    var pointPath = new google.maps.LatLng(lat,lng);
    path.push(pointPath);
}//finish loop

 polyline = new google.maps.Polyline({
  path: path,
  strokeColor: "#FF0000",
  strokeOpacity: 1.0,
  strokeWeight: 2
});

//new polyline

polyline.setMap(map);

}); //end download url
}

function removePath() {

polyline.setMap(null);
polyline = null;
} 
```

# c# - 在 coded-ui 测试中从下拉列表中选择一个值现在是“包含”而不是 vs2012 中的“精确”

> ID：13550644
> 
> 赞同：1
> 
> 时间：2012-11-25T11:37:38.797
> 
> 标签：c#, coded-ui-tests

更加具体...

我在编码的 ui 测试期间使用它从下拉列表中选择一个值...这从 csv 中的特定行中提取值并在 DDL 中选择它。

```
 this.UIMap.MarketCodeType2Params.UIMarketsComboBoxSelectedItem = TestContext.DataRow["IFAGeneralMarketCodeType"].ToString(); 
```

值为

> ABC123

当测试运行时......它在 Application DDL 中找到的第一个值是默认值

> ABC123 222

它选择了它.. 在 VS2010 中，它寻找与它进行比较的确切值。现在在 2012 年，它正试图变得聪明，并正在选择第一个包含该值的有...

任何帮助将不胜感激。我尝试添加 if 和 do while，但它们都断言来自 CSV 的值而不是选定的值。当我设法断言所选值时，测试运行一直循环，选择错误的然后再次打开 DDL（当它意识到它不应该这样做时）并再次选择它..

VS2012中的选择功能乱七八糟...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:01:30.783

这是它的解决方法，一种非常糟糕的方式，但我在有限的时间内无法做得更好。

```
 uICcmbMarketsComboBox.SelectedItem = this.ClientCreationRecParams.UICcmbMarketsComboBoxSelectedItem;
        int x = 0;
        for (int i = 0; i < uIMarketsComboBox.Items.Count; i++)
        {

            if (uIMarketsComboBox.Items[i].Name.ToString() != "ABC123")
            {
                continue;
            }
            else x = i;

        }
        uIMarketsComboBox.SelectedIndex = x 
```

为什么他们必须打破 VS2012 中的组合框选择？！.... :(

# python - 使用 suds 从 python wsdl 客户端提取数据

> ID：13550648
> 
> 赞同：0
> 
> 时间：2012-11-25T11:38:10.680
> 
> 标签：python, web-services, wsdl, suds

我创建了以下 Python 代码，它从 Web 服务中读取方法：

```
def GetWeatherParameters():
""""""
client = Client('www.address.asmx?wsdl')
#WebServiceClient.GetWeatherParameters()

return client.service.GetWeatherParameters() 
```

它工作正常，我得到返回的数据并可以打印它，但是返回的数据包含多列，这段代码只是一次打印出所有内容。

有人知道我如何逐列提取返回的数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T11:42:31.080

这一切都取决于返回的数据 - 一个很好地显示它的方便方法是使用`pprint`：

```
from pprint import pprint
pprint(your_data) 
```

这将很好地格式化它，因此更容易看到结构。然后，如果它是一个列表或类似的，要获得第一行，你可以做 your_data[0] 来获得第一行，或者循环，逐行打印它：

```
for row in your_data:
    print row
    print row[0] # could be the first column... 
```

然后从那里走...

# c# - 是否可以通过 Silverlight 应用程序操作远程（在服务器上）xml/txt 数据库文件？

> ID：13550649
> 
> 赞同：-1
> 
> 时间：2012-11-25T11:38:12.820
> 
> 标签：c#, linux, silverlight, ssh, ftp

我没有可能使用 Microsoft SQL Server。是否可以**通过 Silverlight 应用程序操作远程（在基于 linux 的服务器上）xml/txt 数据库文件**？我可以使用 FTP 或 SSH 文件传输吗？怎么做？会安全吗？我知道 PHP + MySQL 的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:01:10.867

当然，您可以使用 SFTP（最简单的方法）或 FTP 从 Silverlight 应用程序更改远程文件。存在用于远程 FTP 和/或 SSH/SFTP 访问 Silverlight 远程文件的组件（我们的 SecureBlackbox 就是示例之一）。

您将遇到的唯一问题是失去并发性——从服务器的角度来看，您正在从远程端修改本地文件。其他客户端无法将其修改与您的客户端同步，这可能会导致麻烦。

另一个可能的限制是您访问文件结构的方式。即，如果您用来处理数据库的组件需要某种特定的方法来访问文件，那么您在模拟这种方法时可能会遇到问题。如果该组件使用 Stream 接口，那么应该没有什么大问题。

# sql - 如何按 1 个元素分组并获得其他元素的总和？

> ID：13550652
> 
> 赞同：0
> 
> 时间：2012-11-25T11:38:48.187
> 
> 标签：sql, sql-server, tsql

我有一个像这样的表： ![我的数据库](../Images/7666591eaa8196e5d2bb0f6a3253d9c4.png) 现在我正在尝试获取所有调用的列以及特定`called`var 的持续时间的总和。现在我正在尝试这个：

```
select called,SUM(duration) as dursum,time,CONVERT(VARCHAR(8), time, 4) AS Batch  
from Calls
where caller='somevalue'
group by called,time
order by called 
```

现在的问题是，我猜是因为我`time`也是按顺序排序的，所以我并没有真正通过调用得到不同的值，我多次得到相同的数字，当然总和的作用相同，只对部分行求和。

我无法删除，`group by time`因为它会导致使用该`SUM`功能时出错。

再次，我希望结果让每个被叫号码每天**一次**，并且 dursum 包含所有持续时间总和**并**以某种方式按批处理列分组......

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:47:29.843

你是对的，不按时间分组会给你带来正确的结果集。但是，随后发生的错误很容易解释：它是由在 select 子句中选择“ time,CONVERT(VARCHAR(8), time, 4) AS Batch ”引起的 -> 因此您只需要某种聚合时间字段（例如 MAX(time),CONVERT(VARCHAR(8), MAX(time), 4) AS Batch。

此致

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T11:56:04.607

好吧，这就是我最终解决的方法：

```
select called,SUM(duration) as dursum, dateadd(DAY,0, datediff(day,0, time))as Batch2 ,CONVERT(VARCHAR(8), time, 4) AS Batch  
from Calls
where caller='0502081971'
group by called, dateadd(DAY,0, datediff(day,0, time)),CONVERT(VARCHAR(8), time, 4)
order by called 
```

# android - 微调器选项在单击之前不可见

> ID：13550653
> 
> 赞同：0
> 
> 时间：2012-11-25T11:38:53.647
> 
> 标签：android, dynamic, spinner

我正在尝试使用微调器来设置另外三个微调器的选择，这些微调器使用资源中的预定义字符串数组动态更新。

虽然我已经使用了来自 stackoverflow 的其他优秀建议来达到这一点，但我不确定为什么我的 3 个更新的微调器会在单击它们之前显示不可见的选项。

这是主要代码：

```
package com.example.bush;
import com.example.bush.R;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.AdapterView.OnItemSelectedListener;

public class MainActivity extends Activity implements OnItemSelectedListener{
public final static String NAME_KEY = "com.example.bush.NAME";
int pos1, pos2;
ArrayAdapter<CharSequence> adapter1, adp0,adp1;
Spinner spinner1,spinner2,spinner3,spinner4, spinner5;
EditText editText, num3, num4, num5, num6, num7, num8;
int[] route1,route2;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    spinner1 = (Spinner) findViewById(R.id.spinner_h_route);
    spinner3 = (Spinner) findViewById(R.id.spinner_h1);
    spinner4 = (Spinner) findViewById(R.id.spinner_h2);
    spinner5 = (Spinner) findViewById(R.id.spinner_h3);
    num3 = (EditText) findViewById(R.id.num_h1);
    num4 = (EditText) findViewById(R.id.num_h2);
    num5 = (EditText) findViewById(R.id.num_h3);
    editText = (EditText) findViewById(R.id.edit_name);

    ArrayAdapter<CharSequence> adapter1 = ArrayAdapter.createFromResource(this, R.array.route_array, android.R.layout.simple_spinner_item);adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner1.setAdapter(adapter1);
    Log.i("Hostile Route Spinner", "spinner1");
    spinner1.setOnItemSelectedListener(this);

}

public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    Log.i("AAA", "OnItemSelected");
    pos1=spinner1.getSelectedItemPosition();
    Log.i("Spinner 1 Position", Integer.toString(pos1));
    switch(pos1)
        {
        case 0:
            adp0 = ArrayAdapter.createFromResource(this, R.array.first_array, android.R.layout.simple_spinner_item);
            adp0.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);
            spinner3.setAdapter(adp0);spinner4.setAdapter(adp0);spinner5.setAdapter(adp0);
            break;
        case 1:
            adp1 = ArrayAdapter.createFromResource(this, R.array.second_array, android.R.layout.simple_spinner_item);
            adp1.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);
            spinner3.setAdapter(adp1);spinner4.setAdapter(adp1);spinner5.setAdapter(adp1);
            break;
        }
    }

public void onNothingSelected(AdapterView<?> arg0) {}

} 
```

这是 .xml 表格布局：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/scrolltest.xml"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TableLayout
        android:id="@+id/TableLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/name_label"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:text="@string/label1"
                android:width="0px"
                android:gravity="center"
                android:layout_weight="1"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/edit_name"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:ems="10"
                android:width="0px"
                android:gravity="center"
                android:layout_weight="1"
                android:hint="@string/edit_message" >
            </EditText>
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/label_h_route"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:text="@string/label2"
                android:width="0px"
                android:gravity="center"
                android:layout_weight="1"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <Spinner
                android:id="@+id/spinner_h_route"
                android:width="0px"
                android:gravity="center"
                android:layout_weight="1"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:entries="@array/route_array" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Spinner
                android:id="@+id/spinner_h1"
                android:width="0px"
                android:gravity="center"
                android:layout_weight="1"
                android:layout_width="0dip"
                android:layout_height="wrap_content" />

            <EditText
                android:id="@+id/num_h1"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:ems="10"
                android:width="0px"
                android:gravity="center"
                android:layout_weight="1"
                android:inputType="number" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Spinner
                android:id="@+id/spinner_h2"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:width="0px"
                android:gravity="center"
                android:layout_weight="1" />

            <EditText
                android:id="@+id/num_h2"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:ems="10"
                android:inputType="number"
                android:width="0px"
                android:gravity="center"
                android:layout_weight="1" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Spinner
                android:id="@+id/spinner_h3"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:width="0px"
                android:gravity="center"
                android:layout_weight="1" />

            <EditText
                android:id="@+id/num_h3"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:ems="10"
                android:inputType="number"
                android:width="0px"
                android:gravity="center"
                android:layout_weight="1" />

        </TableRow>

    </TableLayout>

</ScrollView> 
```

以下是字符串资源：

```
<?xml version="1.0" encoding="utf-8"?>

<resources>

    <string name="app_name">Bush Calc</string>
    <string name="menu_settings">Settings</string>
    <string name="title_activity_main">Bush Calc</string>
    <string name="edit_message">Hi there :)</string>
    <string name="unit_prompt">Choose a unit</string>
    <string name="route_hint">Choose the route.</string>
    <string name="label1">Your name:</string>
    <string name="label2">Attacking route:</string>

    <string-array name="first_array">
        <item>Item 1</item>
        <item>Item 2</item>
        <item>Item 3</item>
        <item>Item 4</item>
        <item>Item 5</item>
    </string-array>

    <string-array name="second_array">
        <item>Item 6</item>
        <item>Item 7</item>
        <item>Item 8</item>
        <item>Item 9</item>
        <item>Item 10</item>
    </string-array>

    <string-array name="route_array">
        <item>First</item>
        <item>Second</item>
    </string-array>

</resources> 
```

感谢您提供的任何帮助，以使这些选项在微调器上可见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:42:24.637

就是这样，你可以为微调器设置适配器，试试这个

```
 Spinner spinner = (Spinner)findViewById(R.id.spinner);
spinner.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_spinner_dropdown_item, R.array.route_array));
spinner.setOnItemSelectedListener(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-12T20:24:47.697

我对其他下拉菜单、微调器等也有同样的问题。我认为有几种方法可以解决这个问题，但我认为最简单的是在清单中定义/创建主题。我已经使用了您的代码，并且可以正常工作。

例如，在我添加的清单中：

```
<activity
        android:name="com.example.invisablespinner.MainActivity"
        android:label="@string/app_name"
      => " android:theme="@style/Simple" > 
```

在 layout\values\style.xml 内的样式 xml 中。我补充说。

```
<style name="Simple">
    <item name="android:textSize">13sp</item>
    <item name="android:textColor">#000000</item> <== make the text black
     <item name="android:background">#ffffff</item> </style> 
```

定义背景颜色，或者它是否是你的文本颜色……就我通过代码测试所看到的而言。

有很多方法可以调整它以使其看起来不错。全取决于你。

〜安:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T18:20:29.203

问题是使用了不正确的适配器资源。

```
adp0.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line); 
```

应该

```
adp0.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
```

像一开始设置`adapter1`时那样做。

改变你所有的`...item_1line`. 提供的布局。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-06T08:27:41.087

我找到了解决办法！！！

在styles.xml

```
<style name="Simple" parent="@style/Theme.AppCompat">
    <item name="android:textSize">13sp</item>
    <item name="android:textColor">#000000</item>
     <item name="android:background">#ffffff</item> </style> 
```

在清单中：

```
<activity
    android:name=".Rescate"
    android:label="@string/title_activity_rescate"
    android:theme="@style/Simple" >
</activity> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-25T11:44:30.503

前段时间我有一个非常相似的问题，设备的默认样式设置非常愚蠢。使 forceground 和 backgrould 颜色相等。所以你需要手动设置背景和强制背景颜色。

# vb.net - VS2010 VB.NET XML 注释类字段未显示

> ID：13550654
> 
> 赞同：2
> 
> 时间：2012-11-25T11:38:54.697
> 
> 标签：vb.net, visual-studio-2010, comments

在 VS2010 的 VB.NET 项目中，我尝试将 XML 注释（'''）添加到类的字段中。显示注释存在问题：当我将鼠标光标放在 Main() sub 中的成员名称上时，只显示类方法的完整注释。

在项目编译选项中“生成 XML 文档文件”复选框已打开；完整的评论通常显示在智能感知列表中（当我在对象名称后键入句点时）。

这是设计使然还是可以改变偏好？

![在此处输入图像描述](../Images/cee96fb6815d74336e4cc91df588034e.png)

最小的代码示例放在下面。

```
''' <summary>
''' Test class
''' </summary>
''' <remarks></remarks>
Public Class TestClass

    ''' <summary>
    ''' Test field
    ''' </summary>
    ''' <remarks></remarks>
    Public s As String

    ''' <summary>
    ''' Test method
    ''' </summary>
    ''' <remarks></remarks>
    Public Sub Method()

    End Sub

End Class

Sub Main()
    Dim c = New TestClass() ' "Class TestClass \ Test class" displayed
    c.s = "abc"             ' Only "Public s As String" displayed!
    c.Method()              ' "Public s As String \ Test method" displayed
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:46:52.887

当您将鼠标悬停在字段上时，似乎没有显示 XML 注释。如果你改变

```
Public s As String 
```

对此：

```
Public Property s As String 
```

它会起作用的。通常，您不应该直接通过公开变量`Public`而使用属性。您将通过这种方式更好地集成到 .NET（例如 DataBinding）。

看起来这个问题是 VB 特有的，因为 C# 对应的工作没有问题：

```
/// <summary>
/// Test class
/// </summary>
/// <remarks></remarks>
class TestClass
{
    /// <summary>
    /// Test field
    /// </summary>
    /// <remarks></remarks>
    public String s;

    /// <summary>
    /// Test method
    /// </summary>
    /// <remarks></remarks>
    public void Method() {}

    static void Main(string[] args)
    {
        TestClass c = new TestClass();
        c.s = "abc"; //not a property, but help shows on hover
        c.Method();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T15:12:40.247

仅供参考：在 VS 2012 中修复；VB.Net 现在显示字段摘要。

# ruby - 通过操作而不是分配来绕过写入器访问器

> ID：13550656
> 
> 赞同：3
> 
> 时间：2012-11-25T11:38:57.200
> 
> 标签：ruby

我写了一个非常简单的 User 类。实例变量 email 有一个 reader 访问器和我自己的 writer 访问器，它们使用正则表达式验证电子邮件地址。

```
class User
    attr_reader :email

    def email=(value)
        if (value =~ /^[a-z\d\-\_\+\.]+@([a-z\d\-]+\.)+[a-z]+$/)
            @email = value
        else
            # bonus question: is ArgumentError the right error type to use here?
            raise ArgumentError, "#{value} is not a valid email address."
        end
    end
end 
```

我写了以下测试：

```
require 'test/unit'
require_relative '../lib/user'

class TC_UserTest < Test::Unit::TestCase
    def setup
        @user = User.new()
    end

    def test_email
        # using the writer accessor
        @user.email = 'user@example.com'
        # bypassing the writer accessor. evil.
        @user.email[4] = '#'
        assert_equal('user@example.com', @user.email)
    end
end 
```

通过使用 reader 访问器给我的引用，我能够在不通过 writer 访问器的情况下操作 email 实例变量。

相同的原则适用于任何允许操作而不用 = 直接分配新值的数据类型

我是不是太热心了？我只想编写健壮的代码。有没有办法确保我的电子邮件地址只能使用 writer 访问器设置？

我是该语言的新手，我正在尝试了解最佳实践。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T13:46:03.493

使测试通过（并保护`@email`变量）的一个选项是公开一个副本。

```
def email
  @email.dup
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T11:54:06.007

您可以冻结 writer 中的值，这样您就可以通过 writer 分配新的值，但已经分配的值将是不可变的：

```
class User
  attr_reader :email

  def email=(value)
    if (value =~ /^[a-z\d\-\_\+\.]+@([a-z\d\-]+\.)+[a-z]+$/)
      # make email immutable:
      @email = value.freeze
    else
      # bonus question: is ArgumentError the right error type to use here?
      raise ArgumentError, "#{value} is not a valid email address."
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T11:54:24.403

为了做你想做的事，我的建议是将正则表达式移到它自己的验证方法中。

更好的是，除非你真的想把它做对，否则不要写电子邮件正则表达式。

改用 gem：[https ://github.com/SixArm/sixarm_ruby_email_address_validation](https://github.com/SixArm/sixarm_ruby_email_address_validation)

[设置电子邮件后，使用http://ruby-doc.org/core-1.9.3/Object.html#method-i-freeze](http://ruby-doc.org/core-1.9.3/Object.html#method-i-freeze)将其冻结

奖励答案：是的，ArgumentError 通常是正确的错误类型。如果您使用的是 Rails，请考虑使用 Rails 验证方法。

# javascript - 非工作 Javascript 超时事件

> ID：13550657
> 
> 赞同：1
> 
> 时间：2012-11-25T11:39:22.663
> 
> 标签：javascript, html, css, settimeout

我创建了一个在 180 万毫秒后运行的函数（我使用 1.8 秒进行测试），但我使用的超时似乎从来没有工作过——即使它与我用于其他所有网站的超时完全相同我制作的应用程序/网站，永远。

核心代码：

```
setTimeout(Test, 10);

var Test = function(){
    alert("KEMAH");
}; 
```

jsfiddle：http: [//jsfiddle.net/zbMCC/1/](http://jsfiddle.net/zbMCC/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T11:41:28.010

将超时放在函数表达式之后。

```
var Test = function(){
    alert("KEMAH");
};
setTimeout(Test, 10); 
```

函数表达式（分配给变量的函数）在范围内没有“提升”。因此，代码按照它们出现的顺序执行。

另一方面，函数声明在作用域中被提升，所以下面的代码运行完美。注意函数是如何声明的。它被声明为具有名称的函数`Test`，而不是分配给变量的函数`Test`：

```
//because JavaScript treats function declarations as if they were declared
//UP HERE <--------------.
                       //|
setTimeout(Test, 10);  //|
                       //|
function Test(){ //------'
    alert("KEMAH");
}; 
```

JavaScript 以这种方式处理您的代码：

1.  变量声明
2.  函数声明
3.  变量分配/操作（这是其他一切按照它们出现的顺序运行的地方）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T11:42:00.580

改成：

```
setTimeout(Test, 10);

function Test(){
    alert("KEMAH");
}; 
```

或`var Test = function {...`在使用前放置。

因为`Test`在那个时候`setTimeout`。`undefined`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T11:42:56.677

或者你可以给里面的功能

```
setTimeout(function(){
    alert("KEMAH");
}, 10); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T11:43:16.120

编辑：

我正在使用（在复杂场景中）：

```
setInterval("GeneratedFunctionName()", 60000); // 60s 
```

# pthreads - pthread：一个 printf 语句在子线程中打印两次

> ID：13550662
> 
> 赞同：6
> 
> 时间：2012-11-25T11:40:35.783
> 
> 标签：pthreads, printf

这是我的第一个 pthread 程序，我不知道为什么 printf 语句会在子线程中打印两次：

```
int x = 1;

void *func(void *p)
{
    x = x + 1;
    printf("tid %ld: x is %d\n", pthread_self(), x);
    return NULL;
}

int main(void)
{
    pthread_t tid;
    pthread_create(&tid, NULL, func, NULL);

    printf("main thread: %ld\n", pthread_self());

    func(NULL);
} 
```

在我的平台上观察到的输出（Linux 3.2.0-32-generic #51-Ubuntu SMP x86_64 GNU/Linux）：

```
1.
main thread: 140144423188224
tid 140144423188224: x is 2

2.
main thread: 140144423188224
tid 140144423188224: x is 3

3.
main thread: 139716926285568
tid 139716926285568: x is 2
tid 139716918028032: x is 3
tid 139716918028032: x is 3

4.
main thread: 139923881056000
tid 139923881056000: x is 3
tid 139923872798464tid 139923872798464: x is 2 
```

对于 3，来自子线程的两条输出线

对于 4，与 3 相同，甚至输出也是交错的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T12:08:04.527

线程通常通过时分复用发生。处理器在两个线程之间均匀切换通常效率低下，因为这需要更多的努力和更高的上下文切换。通常你会发现一个线程在切换之前会执行几次（就像示例 3 和 4 的情况一样。子线程在最终终止之前执行了多次（因为主线程退出了）。

> 例2：不知道为什么x在没有输出的情况下被子线程增加了。

考虑一下。主线程执行。它调用 pthread 并创建一个新线程。新的子线程递增 x。在子线程能够完成 printf 语句之前，主线程开始执行。突然之间，它也增加了 x。然而，主线程也能够运行 printf 语句。突然 x 现在等于 3。主线程现在终止（也导致子 3 退出）。这可能是您的案例 2 中发生的情况。

示例 3 清楚地表明变量 x 已由于低效锁定和堆栈数据损坏而损坏！

有关什么是线程的更多信息。

[链接 1 - 关于线程的附加信息](http://en.wikipedia.org/wiki/Thread_%28computing%29)

[链接 2 - 关于线程的附加信息](https://computing.llnl.gov/tutorials/pthreads/)

您还会发现，因为您使用的是 x 的全局变量，所以对这个变量的访问是在线程之间共享的。这很糟糕.. 非常非常糟糕，因为访问同一变量的线程会创建竞争条件和数据损坏，因为变量 x 的同一寄存器上发生了多次读写。正是出于这个原因，使用互斥锁本质上是在更新变量时创建一个锁，以防止多个线程同时尝试修改同一个变量。互斥锁将确保 x 按顺序更新，而不是像您的情况那样偶尔更新。

有关 Pthreads in General 和 Mutex 锁定示例的更多信息，请参阅此链接。
[Pthread 和 Mutex 变量](https://computing.llnl.gov/tutorials/pthreads/#Mutexes)

干杯，
彼得

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T12:47:17.400

唔。您的示例使用来自不同线程的相同“资源”。一种资源是变量 x，另一种是标准输出文件。所以你应该使用如下所示的互斥锁。最后还有一个 pthread_join 等待另一个线程完成它的工作。（通常一个好主意也是检查所有这些 pthread... 调用的返回码）

```
#include <pthread.h>
#include <stdio.h>
int x = 1;
pthread_mutex_t mutex;

void *func(void *p)
{
    pthread_mutex_lock (&mutex);
    x = x + 1;
    printf("tid %ld: x is %d\n", pthread_self(), x);
    pthread_mutex_unlock (&mutex);
    return NULL;
}

int main(void)
{
    pthread_mutex_init(&mutex, 0);

    pthread_t tid;
    pthread_create(&tid, NULL, func, NULL);

    pthread_mutex_lock (&mutex);
    printf("main thread:  %ld\n", pthread_self());
    pthread_mutex_unlock (&mutex);

    func(NULL);
    pthread_join (tid, 0);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-16T17:31:36.733

看起来真正的答案是 Michael Burr 的评论，它引用了这个 glibc 错误：[https ://sourceware.org/bugzilla/show_bug.cgi?id=14697](https://sourceware.org/bugzilla/show_bug.cgi?id=14697)

总之，glibc 在程序退出期间没有正确处理 stdio 缓冲区。

# php - 在预约时间前 30 - 15 - 5 分钟通过电子邮件发送预约的 cron 作业

> ID：13550664
> 
> 赞同：1
> 
> 时间：2012-11-25T11:41:17.100
> 
> 标签：php, time, notifications, cron, set-difference

如何找出时间之间的差异，例如约会时间是

下午 4:30 但我想通过 cron 作业 30 分钟、15 分钟或 5 分钟发送通知

下午 4:30 之前

但我不知道如何获得时差，以便我可以做出一个 if 语句来通知 ex 如果设置为 30 分钟电子邮件将在下午 4:00 发送

前任：

```
$setting = "30 minute";//set to notify 30 min before appointment
$notiftime = "4:30 PM";//time of the appointment

$notiftime = strtotime($notiftime);
$difference = strtotime( '-' $setting , $notiftime);

$current = date('h:ia'); //gets current time
$current = strtotime($current);

if ( $current <= $difference){ 

//send email script=======

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:48:45.690

`$setting`是一个字符串，所以你不能做也不能`- $setting`期望它工作。您必须将其添加`-`到字符串本身：

```
$difference = strtotime('-' . $setting , $notiftime); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T12:02:44.783

这就是你想要的：

```
$appointment = "4:30 PM";//time of the appointment
$delay = 30 * 60; //set to notify 30 min before appointment

$appointment = strtotime($appointment);
$notifytime = date('h:ia', $appointment - $delay); 
```

# java - 从java中的xpath表达式中提取所有变量引用的最安全方法

> ID：13550673
> 
> 赞同：1
> 
> 时间：2012-11-25T11:42:01.663
> 
> 标签：java, xpath, saxon, xpath-2.0

我正在使用 java 和 saxon 处理器。

假设我有一些 XPath 表达式，其中可能包含变量 refs。我还有一些自定义的 xpath 函数，它们可以嵌套到任意深度，可以将变量 refs 作为参数。所以 xpath 表达式是相当复杂的。

我想为 xpath 表达式中的每个变量 ref 提取前缀和本地名称，而不对其进行评估。

我可以通过为我的 xpath 设置一些自定义 XPathVariableResolver 并评估它来提取它。但这可能会产生相当大的开销，因为我只想提取变量引用，而不是调用可能很耗时的自定义函数。

仅通过一些与“$”符号匹配的模式来做到这一点是否安全？可能对此进行一些 API 调用会很棒。或者如果没有可用的 API 调用，那么我应该避免使用“$”符号（可能它可以定位为字符串，我需要避免使用那个）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:36:52.653

**如果声明了每个变量（必须在单个样式表模块中声明，您可以简单地使用这个 XPath 2.0 表达式**：

```
doc(yourUri)//xsl:variable/@name/string() 
```

其中命名空间前缀`"xsl"`必须注册到命名空间`"http://www.w3.org/1999/XSL/Transform"`。

**或者来自 XSLT 样式表**：

```
document(yourUri)//xsl:variable/@name/string() 
```

**您可能还想获取所有参数名称**：

```
doc(yourUri)//xsl:param/@name/string() 
```

**或者，变量和参数名称**：

```
doc(yourUri)//*[self::xsl:variable or self::xsl:param]/@name/string() 
```

**现在，这不会为您提供在 XPath 表达式中定义的变量集**。为此，您需要一个 XPath 2.0 解析器（和词法分析器）。过去我开发了这样的（使用**[FXSL 解析框架](http://fxsl.cvs.sourceforge.net/viewvc/fxsl/fxsl-xslt2/f/func-lrParse.xsl?revision=1.7&view=markup)**），但还没有发布这个解析器。如果您有兴趣，请告诉我，我会发送给您。

**或者**，对于预定义的 XSLT 属性名称子集，您可以分析它们的值并检索可能后跟空格的美元，然后是名称。所有这些都不能在单引号或双引号内。这样的正则表达式写起来并不难。

**作为最后一步，您必须对如此获得的变量引用进行重复数据删除**——例如使用`xsl:for-each-group`

* * *

**更新**：

**这是我正在使用的 XPath 2.0 语法的一个片段**：

```
VariableReference   : '$'     QName

QName         : QNAME2 

                  |  OR
                  |  AND
                  |  EQ
                  |  NE
                  |  LT
                  |  LE
                  |  GT
                  |  GE
                  |  IS
                  |  TO
                  |  DIV
                  |  IDIV
                  |  MOD
                  |  UNION
                  |  INTERSECT
                  |  EXCEPT
                  |  THEN
                  |  ELSE
                  |  IN
                  |  RETURN
                  |  SATISFIES 
```

**并且终端符号 QNAME2 以这种方式在词法分析器中定义**：

```
([\i-[:]][\c-[:]]*:)?[\i-[:]][\c-[:]]* 
```

**当然，甚至在此之前必须确定（识别）这不是字符串文字的一部分，在我的词法分析器中，我将其定义为**：

```
 ("([^"])*")+
    |
     ('([^'])*')+ 
```

**此外，您应该跳过评论中的所有内容。我有这个正则表达式用于评论开始和评论结束**：

```
 (\(:)         <!-- Comment start --> 

 |
  (:\))         <!-- Comment end --> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T17:15:57.150

使用 s9api XPathCompiler 类编译表达式：

```
XPathCompiler c = new Processor(false).newXPathCompiler();
c.setAllowUndeclaredVariables(true);
XPathExecutable exp = c.compile(xpathExpression); 
```

表达式中的外部变量可以通过调用来获得：

```
exp.iterateExternalVariables(); 
```

顺便说一句，撒克逊人的问题是否在这里受到关注是偶然的。如果您想确定答案，请使用位于[http://saxonica.plan.io/的撒克逊论坛](http://saxonica.plan.io/)

# wpf - 将 x:Name 属性添加到在另一个 UserControl 中使用的 UserControl 会导致“无法加载文件或程序集”异常

> ID：13550677
> 
> 赞同：0
> 
> 时间：2012-11-25T11:42:38.283
> 
> 标签：wpf, user-controls

我正在开发一个 WPF 应用程序。我的应用程序包括一些项目。在其中一个项目中，我有一个用户控件，它使用来自**不同**项目的另一个用户控件。如果我不给用户控件命名，我只是通过 xaml 添加它，应用程序可以正常工作。但是，如果我将 x:Name 属性添加到用户控件，应用程序编译正常，但在实时我得到一个“无法加载文件或程序集”异常。尝试在后面的代码中添加用户控件而不是 xaml - 给出了相同的结果 - 应用程序实时崩溃。

我的 xml 看起来像这样：

```
<UserControl xmlns:my="clr-namespace:UserControls.CtrlTwo;assembly=Project1".../>

<Grid>
<my:CtrlTwo x:Name = "ctrlTwo"/>
</Grid> 
```

知道它为什么会发生，我能做些什么来避免它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:58:05.180

解决方案是从启动项目中引用用户控件。（我没有解释为什么）

# objective-c - 将按钮名称转换为字符串格式

> ID：13550680
> 
> 赞同：0
> 
> 时间：2012-11-25T11:42:53.710
> 
> 标签：objective-c

我的程序中有很多自定义按钮，我需要使用方法来获取它们的名称。我已经想出了如何通过他们的标签来获取他们的名字，但我似乎无法按照它来获得字符串格式的名字。

这是我正在使用的：

```
-(void)pickRandomToHide {
    for (int check = 1; check <=5; check++)
    {
        int eventNumber = 1 + arc4random() % 43;
        UIButton *pick;
        pick = (UIButton *)[_mapImageView viewWithTag:eventNumber];
        [pick setHidden:YES];
        NSString *buttonName;
        buttonName = [pick currentTitle];
        NSLog(@"%@",buttonName);
    }
} 
```

NSLog 只给出了 'Null' 五次。但是 5 个按钮正在消失，所以开始工作了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T11:53:05.687

您看不到任何标题的原因是按钮被隐藏和禁用，而标题可能仅在按钮的控制状态为“正常”（启用和可见）时才显示。[以下是 Apple 提供的有关 UIButton 控件状态的更多信息](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIControl_Class/Reference/Reference.html#//apple_ref/c/tdef/UIControlState)。

尝试这样做：

```
-(void)pickRandomToHide {
    for (int check = 1; check <=5; check++)
    {
        int eventNumber = 1 + arc4random() % 43;
        UIButton *pick = (UIButton *)[_mapImageView viewWithTag:eventNumber];
        if(pick)
        {
            [pick setHidden:YES];
            NSString *buttonName = [pick titleForState: UIControlStateNormal];
            NSLog(@"%@",buttonName);
        } else {
            NSLog( @"hmmm, no button with a tag corresponding to event number %d", eventNumber);
        }
    }
} 
```

# ruby-on-rails - 每当 Cron 在服务器上有多个项目时

> ID：13550682
> 
> 赞同：5
> 
> 时间：2012-11-25T11:43:08.630
> 
> 标签：ruby-on-rails, deployment, capistrano, whenever, whenever-capistrano

我在我的 Rails 应用程序中随时使用并使用 capistrano 部署它。

麻烦的是，因为我只将它用于一个项目，所以没有问题，但是当我在同一台服务器上使用更多项目时，每次我部署我的项目时，我都会销毁并重新创建 cron 文件。我需要每个项目都更新它或附加新指令，以便在同一台服务器上共存。

我只是部署

部署.rb

```
set :whenever_command, "bundle exec whenever"
require "whenever/capistrano"
...
after "deploy:create_symlink", "deploy:update_crontab"
.... 
```

有人可以教我怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T12:03:01.287

您需要命名您的项目，否则它们会在您部署时相互覆盖：

```
set :whenever_environment, defer { stage }
set :whenever_identifier, defer { "#{application}_#{stage}" }
require "whenever/capistrano" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-03T15:20:08.947

使用 capistrano V3，在您的部署文件中：

```
set :whenever_identifier, ->{ "#{fetch(:application)}_namespace" } 
```

# java - 用空格替换字符串

> ID：13550686
> 
> 赞同：1
> 
> 时间：2012-11-25T11:43:34.013
> 
> 标签：java, regex, string, replace

我有一个字符串问题，我想用空格替换所有字符串。

我有一段包含一些这样的字符串`{&#12333;}`

所以我想用空格替换它们。

我使用了这个功能：

```
{text=text.replaceAll("&#[1-9];", "");} 
```

但它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:51:09.007

您的正则表达式正好寻找一位数字。将其更改为：

```
"&#[1-9]+;" 
```

（注意添加的`+`）。

此外，这`[1-9]`可能是不正确的，应该是`[0-9]`（或者实际上`[0-9A-Fa-f]`如果数字是十六进制）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T14:02:13.087

我建议使用

```
text = text.replaceAll("&#\\d+;", " "); 
```

但是，如果`&#...`序列自动转换为字符，请使用

```
text = text.replaceAll("[^\\x20-\\x7F]", " "); 
```

# c# - 如果我想在gridview（Web应用程序）中删除它，如何获取删除行值

> ID：13550688
> 
> 赞同：1
> 
> 时间：2012-11-25T11:43:38.163
> 
> 标签：c#, asp.net

当我有一个gridview时，在用户按下删除按钮后，我想知道在这种情况下特定的行数据，我如何获取特定的行数据？

示例网格视图：

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
                    DataSourceID="SqlDataSource1" DataKeyNames="addCartID" 
                    BackColor="White" 
                    BorderColor="White" BorderStyle="Ridge" BorderWidth="2px" CellPadding="3" 
                    CellSpacing="1" GridLines="None" OnRowDeleted="Delete_Event">
                    <Columns>
                        <asp:CommandField ShowDeleteButton="True" />
                        <asp:TemplateField HeaderText="addCartID" InsertVisible="False" 
                            SortExpression="addCartID">
                            <EditItemTemplate>
                                <asp:Label ID="Label1" runat="server" Text='<%# Eval("addCartID") %>'></asp:Label>
                            </EditItemTemplate>
                            <ItemTemplate>
                                <asp:Label ID="Label1" runat="server" Text='<%# Bind("addCartID") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="productID" SortExpression="productID">
                            <EditItemTemplate>
                                <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("productID") %>'></asp:TextBox>
                            </EditItemTemplate>
                            <ItemTemplate>
                                <asp:Label ID="Label2" runat="server" Text='<%# Bind("productID") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="custID" SortExpression="custID">
                            <EditItemTemplate>
                                <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("custID") %>'></asp:TextBox>
                            </EditItemTemplate>
                            <ItemTemplate>
                                <asp:Label ID="Label3" runat="server" Text='<%# Bind("custID") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="seatOrderID" SortExpression="seatOrderID">
                            <EditItemTemplate>
                                <asp:TextBox ID="TextBox3" runat="server" Text='<%# Bind("seatOrderID") %>'></asp:TextBox>
                            </EditItemTemplate>
                            <ItemTemplate>
                                <asp:Label ID="Label4" runat="server" Text='<%# Bind("seatOrderID") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>

                    </Columns>
                    <FooterStyle BackColor="#C6C3C6" ForeColor="Black" />
                    <HeaderStyle BackColor="#4A3C8C" Font-Bold="True" ForeColor="#E7E7FF" />
                    <PagerStyle BackColor="#C6C3C6" ForeColor="Black" HorizontalAlign="Right" />
                    <RowStyle BackColor="#DEDFDE" ForeColor="Black" />
                    <SelectedRowStyle BackColor="#9471DE" Font-Bold="True" ForeColor="White" />
                    <SortedAscendingCellStyle BackColor="#F1F1F1" />
                    <SortedAscendingHeaderStyle BackColor="#594B9C" />
                    <SortedDescendingCellStyle BackColor="#CAC9C9" />
                    <SortedDescendingHeaderStyle BackColor="#33276A" />
                </asp:GridView> 
```

这是我想获取删除值的 c# 代码，在用户单击删除后，我希望根据已删除的 seatOrderID 更新某些内容，我该如何获取它？咳~~

```
 protected void updateBack()
    {
        Response.Write(I want to get the deleted seatOrderID here!!!!!);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:04:19.387

使用此代码，您可以在 RowDeleting 事件中获取 ID：

```
 protected void GridView1_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {
        GridViewRow gvr = (GridViewRow)GridView1.Rows[e.RowIndex];

        string id = String.Empty;
        Label lbl = (gvr.FindControl("Label1") as Label)

        if (lbl != null)
        {
          id = lbl.Text;
        }
    } 
```

您可以使用该`FindControl()`方法获取行中的任何控件。

# design-patterns - 数据映射器模式与存储库模式有何不同？

> ID：13550690
> 
> 赞同：31
> 
> 时间：2012-11-25T11:43:49.970
> 
> 标签：design-patterns, repository-pattern, datamapper

我发现两种模式似乎具有相同的目标 - 有什么区别？

[http://martinfowler.com/eaaCatalog/dataMapper.html](http://martinfowler.com/eaaCatalog/dataMapper.html)

[http://martinfowler.com/eaaCatalog/repository.html](http://martinfowler.com/eaaCatalog/repository.html)

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-25T12:17:24.113

> [存储库是] 映射层之上的另一抽象层，查询构造代码集中在该层。

确保栅栏的`DataMapper`数据库端不需要知道您的业务逻辑的细节以及业务对象如何将数据保存在内存中，而栅栏的业务端不需要知道数据的情况存储。

举例来说，假设您的数据作为一组行保存在数据库中，假设每一行代表您商店中的一个项目。在内存方面，您可能希望将该信息保留`StoreItem`为两个列表，而不是一个列表，一个用于库存商品，另一个用于缺货商品。`DataMapper`处理一个列表和两个列表之间的转换将是的工作。

您可以通过在栅栏的业务方面添加其他对象列表和继承来使事情复杂化。'DataMapper' 必须在该表示形式和关系数据库之间进行转换。

“存储库”为业务方提供“SELECT * FROM table WHERE 条件”功能。您提供一个过滤器，它将返回与该过滤器匹配的对象集合。

简而言之：“DataMapper”处理单个对象，“Repository”处理对象集合并扩展“DataMapper”提供的功能。

# javascript - Google 搜索上的褪色文本效果如何工作？

> ID：13550691
> 
> 赞同：6
> 
> 时间：2012-11-25T11:43:54.403
> 
> 标签：javascript, jquery, html, css

在 Google 上搜索时，自动填充结果会显示在下方，就像许多其他网站一样。

但除此之外，对于出现在**输入框中**的最可能的搜索查询，还有一个**褪色的文本自动完成**功能，而不会改变光标的位置。请参阅随附的屏幕截图。我检查了控制台，但那里没有任何用处。

 **![在此处输入图像描述](../Images/07019a95112c68a0ba3a068782ad9185.png)

这样的效果是如何实现的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T11:49:30.433

谷歌通过设置一个**单独`input`元素**的值来做到这一点，该元素直接堆叠在“活动”元素的后面。如果查看源代码，您可以看到在同一个地方有许多元素：

```
<div id="gs_lc0" style="position: relative;">
    <input id="gbqfq" class="gbqfif" name="q" type="text" autocomplete="off" value="" style="border: none; padding: 0px; margin: 0px; height: auto; width: 100%; background-image: url(data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw%3D%3D); background-color: transparent; position: absolute; z-index: 6; left: 0px; outline: none; background-position: initial initial; background-repeat: initial initial;" dir="ltr" spellcheck="false">
    <div class="gbqfif" style="background-color: transparent; color: transparent; padding: 0px; position: absolute; z-index: 2; white-space: pre; visibility: hidden; background-position: initial initial; background-repeat: initial initial;" id="gs_sc0"></div>
    <input class="gbqfif" disabled="" autocomplete="off" style="border: none; padding: 0px; margin: 0px; height: auto; width: 100%; position: absolute; z-index: 1; background-color: transparent; -webkit-text-fill-color: silver; color: silver; left: 0px;" id="gs_taif0" dir="ltr">
    <input class="gbqfif" disabled="" autocomplete="off" style="border: none; padding: 0px; margin: 0px; height: auto; width: 100%; position: absolute; z-index: 1; background-color: transparent; -webkit-text-fill-color: silver; color: silver; left: 0px; visibility: hidden;" id="gs_htif0" dir="ltr">
</div> 
```

第二个`<input>`似乎正在处理灰色的建议文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T11:50:34.837

这是通过两个输入和 CSS 属性完成的`position: absolute`。一个输入为**黑色**，包含当前用户输入，第二个输入为**灰色**，位于第一个输入的下方。

其 CSS 可能如下所示：

```
input.user-input {
    position: absolute;
    background: transparent;
    color: #000;
    z-index: 2
}
input.suggest-input {
    position: absolute;
    color: #ccc;
    z-index: 1
} 
```**

# java - mvc中spring框架的作用

> ID：13550692
> 
> 赞同：1
> 
> 时间：2012-11-25T11:43:58.703
> 
> 标签：java, spring, model-view-controller

这是一个关于 Spring Framework 及其架构的问题。我在中间层或层方案中阅读了很多关于 Spring 的内容。但是，我需要知道这个框架在 MVC 模式中的作用。

我必须澄清一下，我不是在谈论 Spring MVC，而是在谈论整个框架。

例如：

*   视图：JSP、JSF 等...
*   控制器：Servlet、Spring？等...
*   型号：Spring?、Hibernate、JPA 等...

我不知道在哪里可以找到这个框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T11:47:42.413

如果您使用 Spring Framework ( `context`, `core`, `aop`, `tx`, `jdbc`) 进行控制反转、事务、面向方面编程，那么您肯定会在`M`.

如果您将 Spring MVC 用于您的 Web 控制器，那么您肯定会在`C`.

如果你使用 Spring jsp 标签，你也可以在你的`V`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T06:24:20.263

下面的网址会对您有所帮助。

[http://www.tutorialspoint.com/spring/spring_overview.htm](http://www.tutorialspoint.com/spring/spring_overview.htm)

# java - 调试回文数字代码中的循环

> ID：13550693
> 
> 赞同：0
> 
> 时间：2012-11-25T11:44:04.203
> 
> 标签：java, debugging, palindrome

此代码获取一个整数 n 并显示所有小于 n 的回文数。但似乎 for 循环不起作用；因为当我输入除 0、1 和负数之外的数字时，什么也没有发生。我尝试调试，但找不到问题！

> 样本输入：30
> 
> 样本输出：1 2 3 4 5 6 7 8 9 11 22

```
import java.util.Scanner;

public class PalindromeNumbers {
    public static void main(String args[]) {
        Scanner input = new Scanner(System.in);
        int n = input.nextInt();
        if (n == 0 || n == 1 || n < 0)
            System.out.println("There's no Palindrome Number!");
        else {
            for (int num = 1; num < n; num++) {
                int reversedNum = 0;
                int temp = 0;
                while (num > 0) {

                    // use modulus operator to strip off the last digit
                    temp = num % 10;

                    // create the reversed number
                    reversedNum = reversedNum * 10 + temp;
                    num = num / 10;

                }
                if (reversedNum == num)
                    System.out.println(num);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T11:54:07.343

您遇到了一个无限循环：您`num`在`for`循环中用作索引，并在循环内将其重置为 0。使用不同的变量，它应该可以工作！

```
for (int i = 1; i < n; i++) {
    int num = i;

    ...

    if (reversedNum == i)
        System.out.println(i);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T11:49:54.467

您正在 for 循环中更改`num`变量。下次`num < n`执行时，值更改（为 0）。尝试这样的事情：

```
for (int num = 1; num < n; num++) {
   int reversedNum = 0;
   int temp = 0;
   int temp2 = num;
   while (temp2 > 0) {

       // use modulus operator to strip off the last digit
       temp = temp2 % 10;

       // create the reversed number
       reversedNum = reversedNum * 10 + temp;
       temp2 = temp2 / 10;

   }
   if (reversedNum == num)
       System.out.println(num);
} 
```

这样，您使用一个临时变量来计算您的 reversedNum，并且仍然为下一次循环迭代保留 num 的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T11:55:44.743

你可以用更简洁的方式做到这一点：

```
public static void main(final String args[]) {
    final Scanner input = new Scanner(System.in);
    final int max = input.nextInt();
    if (max <= 0) {
        System.out.println("There's no Palindrome Number!");
    } else {
        for (int i = 1; i < max; i++) {
            if (isPalindrome(i)) {
                System.out.println(i);
            }
        }
    }
}

private static boolean isPalindrome(final int num) {
    final String temp = "" + num;
    return new StringBuilder(temp).reverse().toString().equals(temp);
} 
```

# php - 先处理，DOM 还是 PHP？

> ID：13550697
> 
> 赞同：-1
> 
> 时间：2012-11-25T11:44:47.673
> 
> 标签：php, jquery, html, dom

不久前我曾尝试过 jQuery，它工作得还算整洁。现在我在 php 中创建了一个站点，其中包含页眉、页脚、侧边栏，你可以命名它。

但是，jQuery 似乎根本不起作用。我链接到我下载到我的硬盘驱动器的 jquery 文件。我目前正在本地主机（xampp）上运行这个站点。

由于没有任何 jQuery 代码在工作（我正在尝试非常基本的东西，比如点击处理程序来弹出警报 - 只是为了确保 jQuery 工作）我想知道是否先处理 DOM，然后再处理包含的 PHP 文件。

任何帮助表示赞赏，我只想在网站上运行一些简单的 jQuery。

谢谢

编辑：示例代码

```
 $('document').ready(function() {

$("#header-photo").click(function() {
  alert("Handler for .click() called.");
});

 }); 
```

链接 jQuery 文件：

```
<script src="jquery.js"></script> 
```

它在同一个文件夹中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T11:46:44.830

PHP 处理文本。它将文本传递给 Web 服务器。Web 服务器将其发送到浏览器。浏览器将其解释为 HTML/CSS/JS/等。并从中构建一个 DOM。

所以不行。在 PHP 运行之前，不会首先处理 DOM。

（您可以使用 PHP 构建 DOM 服务器端，但不是使用简单的包含，这需要显式使用[PHP DOM](http://php.net/manual/en/book.dom.php)之类的东西）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T11:55:31.330

尝试以这种方式使用它：

对 jquery 插件的第一个参考：

```
<script src='path of your jquery plugin' type='text/javascript'></script>

<script type='text/javascript'>
    $(document).ready(function() {
  //  ^------^-------------------I think this is your problem 
  //  just remove the quotes " '  "

        $("#header-photo").click(function() {
            alert("Handler for .click() called.");
        });
    });
</script> 
```

试试这个，看看这是否有效。

# html - 使用 CSS 控制图片下方的文字

> ID：13550702
> 
> 赞同：0
> 
> 时间：2012-11-25T11:45:09.530
> 
> 标签：html, css, image

因此，我在左侧设置了一个简单的页面，其中包含三个图像。在每张图片下方，我想添加三行：一张纯文本、一张带链接的图片和一张 javascript 输出。

第一行的绿色文本：

```
<font color="green">User69</font> 
```

然后在下一行带有链接的 gif：

```
<a href="http://google.comcom/?a=7337&c=6380&s1="><img src="online01.gif" alt="" border="0" style="float:center"></a><br> 
```

在第三行的 javascript 输出：

```
Location: 
<script language="JavaScript" src="http://j.maxmind.com/app/geoip.js"></script> 
        <script language="JavaScript">document.write(geoip_region_name());</script></span> 
</script></br> 
```

每张图片后面的那三位。

您现在可以看到文本出现在所有地方。图像在正确的位置。但是除了换行符之外，我无法控制其他东西，这很混乱。一定会有更好的办法。

这是 jsfiddle 中的所有内容：http: [//jsfiddle.net/MzSZ4/1/](http://jsfiddle.net/MzSZ4/1/)

问题应该很明显了！

非常感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:28:48.033

至少在 jsfiddle 中`float: left`删除这有帮助。`.imgleft`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:51:10.070

在我看来，您需要三个容器 div。每个都包含图像，以及您所说的三位文本。例如：

```
<div id=main-wrapper>
  <!--box 1-->
  <div class=box>
    <img class=img>
    <p class=toptext>TEXT</p>
    <img class=giflink>
    <p class=javascript-output>
  </div> <!--end of box div-->

  <!--box 2-->
  <div class=box>
    <img class=img>
    <p class=toptext>TEXT</p>
    <img class=giflink>
    <p class=javascript-output>
  </div> <!--end of box div-->

  <!--box 3-->
  <div class=box>
    <img class=img>
    <p class=toptext>TEXT</p>
    <img class=giflink>
    <p class=javascript-output>
  </div> <!--end of box div-->

</div> <!--end of main wrapper div--> 
```

CSS：

```
float .box left 
```

# asp.net-mvc - 根据浏览器接受语言自动设置 uiCulture

> ID：13550703
> 
> 赞同：12
> 
> 时间：2012-11-25T11:45:33.853
> 
> 标签：asp.net-mvc, globalization

如何根据用户的浏览器自动设置 ui 的文化？我发现的只是`Globalize.culture("pt-BR");`但它设置`pt-BR`为默认值，我不想默认设置它！如果用户是 pt-BR，我只想设置它！我怎样才能做到这一点？还有验证器方法，我如何为特定的文化设置它们？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-25T12:25:40.847

在 ASP.NET MVC 中，这`web.config`是正确的地方。`pt-BR`有一个简短的总结，第一个片段显示，例如文化如何被强迫

```
<globalization 
    enableClientBasedCulture="false" 
    uiCulture="pt-BR" 
    culture="pt-BR" /> 
```

如果应用程序准备好接受来自客户端（浏览器）的文化，设置应该是

```
<globalization 
    enableClientBasedCulture="true" 
    uiCulture="auto" 
    culture="auto" /> 
```

上述设置将采用客户端浏览器中选择的*语言*（例如`cs-CZ`在我的情况下）。如果未定义，则将使用系统设置。最后的片段显示，如何允许客户端设置和发送预期的文化，但如果没有预先选择*语言，则使用其他一些默认值***pt-BR覆盖系统设置**

```
<globalization 
    enableClientBasedCulture="true" 
    uiCulture="auto:pt-BR" 
    culture="auto:pt-BR" /> 
```

**扩展**：文化设置`jQuery` `validator`和数字输入

*注意：我绝对不是`jQuery`全球化技术方面的专家。这是我如何调整`validator`以正确处理任何数字输入的示例*

razor 查看部分*（`X()`是一个快捷方式`new HtmlString()`）*：

```
var defaultThousandSeprator = "@X(culture.NumberFormat.NumberGroupSeparator)";
var defaultDecimalSeprator = "@X(culture.NumberFormat.NumberDecimalSeparator)"; 
```

jQuery 部分（最小值和最大值的自定义方法）

```
$.validator.addMethod("min", function (value, element, param)
{
  var num = value.replace(RegExp(" ", "g"), "") // remove spaces
          .replace(RegExp('\\' + defaultThousandSeprator, "g"), "") // thousand separator
          .replace(RegExp("\\" + defaultDecimalSeprator, "g"), "."); // fix decimals
  return this.optional(element) || num >= param;
});
$.validator.addMethod("max", function (value, element, param)
{
  var num = value.replace(RegExp(" ", "g"), "") // remove spaces
          .replace(RegExp('\\' + defaultThousandSeprator, "g"), "") // thousands
          .replace(RegExp("\\" + defaultDecimalSeprator, "g"), "."); // decimals
  return this.optional(element) || num <= param;
}); 
```

然后 jQuery.validator 正确评估*cs-CZ* :`10 000,00`以及*en-US* :的输入值`10,000.00`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T20:00:40.897

您需要从网页（或母版页）写出脚本：

```
<script type="text/javascript">
    Globalize.culture("<% = CultureInfo.CurrentCulture.ToString() %>");
</script> 
```

而已。请注意，我使用`CurrentCulture`的是`CurrentUICulture`，因为这是您应该用于格式化的内容。如果您需要翻译（我不会这样做，因为这会损害本地化），您将需要您的原始`CurrentUICulture`.

# java - 从签名内容java中读取原始数据

> ID：13550712
> 
> 赞同：1
> 
> 时间：2012-11-25T11:47:21.870
> 
> 标签：java, x509

我想从签名内容中提取原始数据。

在以下代码中，签名数据为“CMSSignedData signed”

我从 StackOverflow 中找到了几个类似的答案，但所有答案都无法说明如何从签名内容中提取原始数据。

问候

```
package chapter9;

import java.security.KeyStore;
import java.security.PrivateKey;
import java.security.cert.*;
import java.util.Arrays;

import org.apache.commons.codec.binary.Base64;
import org.bouncycastle.cms.CMSProcessable;
import org.bouncycastle.cms.CMSProcessableByteArray;
import org.bouncycastle.cms.CMSSignedData;
import org.bouncycastle.cms.CMSSignedDataGenerator;

/**
 * Example of generating a detached signature.
 */
public class SignedDataExample
    extends SignedDataProcessor
{

    public static void main(String[] args)
        throws Exception
    {
        KeyStore        credentials = Utils.createCredentials();
        PrivateKey      key = (PrivateKey)credentials.getKey(Utils.END_ENTITY_ALIAS, Utils.KEY_PASSWD);
    Certificate[]   chain = credentials.getCertificateChain(Utils.END_ENTITY_ALIAS);
    CertStore       certsAndCRLs = CertStore.getInstance("Collection",
                        new CollectionCertStoreParameters(Arrays.asList(chain)), "BC");
    X509Certificate cert = (X509Certificate)chain[0];

    // set up the generator
    CMSSignedDataGenerator gen = new CMSSignedDataGenerator();

    gen.addSigner(key, cert, CMSSignedDataGenerator.DIGEST_SHA256);
    gen.addCertificatesAndCRLs(certsAndCRLs);

    // create the signed-data object

    CMSProcessable  data = new CMSProcessableByteArray("Hello World!".getBytes());
    CMSSignedData signed = gen.generate(data, "BC");

    // recreate
    signed = new CMSSignedData(data, signed.getEncoded());

    //extract public key
    CertStore cs = signed.getCertificatesAndCRLs("Collection", "BC");

    //signed.signedContent
    //signed.g
    CMSProcessable S = signed.getSignedContent();
    String aaa = S.getContent().toString();
    //byte[] K = Base64.decodeBase64((S.getContent()).toString());

    //
    //String K = Base64.decodeBase64(S.getContent());
    //BASE64Decoder.decoder.decodeBuffer()

    //
    //byte[] array = asString.getBytes("UTF8");
    //String s = new String(array, "UTF8");

    // verification step
    X509Certificate rootCert = (X509Certificate)credentials.getCertificate(Utils.ROOT_ALIAS);

    if (isValid(signed, rootCert))
    {
        System.out.println("verification succeeded");
        //System.out.println(K);
        //String asString = new String((byte[])data.getContent());
        //String asString1 = new String(cs.toString());
        //System.out.println(asString);
        //System.out.println(asString1);
        //System.out.println(aaa);
    }
    else
    {
        System.out.println("verification failed");
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T23:05:50.350

尽管您还应该指定编码，但您需要使用`String aaa = new String(s);`而不是，例如. 请为您的方法做同样的事情。`String aaa = S.getContent().toString();``String aaa = new String(s, Charset.forName("UTF-8"));``toBytes()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-21T12:34:22.903

用于`new String((byte[])S.getContent());`获取原始内容

# sql - 两个表的 SQL (Oracle) 过程

> ID：13550717
> 
> 赞同：1
> 
> 时间：2012-11-25T11:48:01.993
> 
> 标签：sql, database, oracle11g, procedure

我这里有一个棘手的小问题。我有 2 张桌子：

```
employee(id,salary,bonus) 
employee_performance(id,gain,year) . 
```

我正在尝试`employee`根据使用过程的性能更改 table 上的奖金。

这是我到目前为止所做的：

```
create or replace procedure name_of_proc 
AS
BEGIN
   update employee e
      set e.bonus = e.bonus - 900
   where e.salary >= 2000 
     and employee_performance.gain <=2000 
     and employee_performance.year = 2012 
     and e.id=employee_performance.id;
END; 
```

问题是我不知道如何将 table 放入程序中`employee_performance`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:10:14.437

尝试

```
create or replace procedure name_of_proc 
AS
BEGIN
   update employee e
      set e.bonus = e.bonus - 900
   where e.salary >= 2000 
     and e.id in 
         (select ep.id from employee_performance ep where ep.gain <=2000 
          and ep.year = 2012
          and ep.id = e.id
         );
END; 
```

# java - 是否有数据结构可以执行以下操作：

> ID：13550719
> 
> 赞同：0
> 
> 时间：2012-11-25T11:48:05.163
> 
> 标签：java, list, data-structures

当我输入某个数据项（此处为字符）时，我可以访问与之相关的元素，例如：

当我输入“A”时，它使我可以访问这些值`(2, 3, 4, 5)`，例如：

```
A - 2,3,4,5   
B - 6,7,9  
C - 10, 11, 12, 13  
D - 1,8
and so on... 
```

此外，`A`, `B`, `C`,`D`可以是任何数据项，`int`甚至是字符串。

我在想的是，我可以保留一个线性数组，然后数组中的每个项目都是链表的标题。这是对上述所需数据结构的正确和最佳解决方案吗？我们是否已经有一些数据结构可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:51:57.067

最好的解决方案是在表值中使用带有数组（或列表）的[哈希表。](http://en.wikipedia.org/wiki/Hash_table)

这是一个使用 HashMap 的 Java 示例

```
Map<String,Integer[]> theMap;
theMap = new HashMap<String,Integer[]>();
theMap.put("A",{2,3,4,5});
theMap.put("B",{6,7,9});
theMap.put("C",{10,11,12,13});
theMap.put("D",{1,8});

/* Access Values */
int two = theMap.get("A")[0]; 
```

你也可以用`ArrayList`你的整数代替数组。

代码将如下所示：

```
ArrayList<Integer> listA = new ArrayList<Integer>();
    listA.add(2);
    listA.add(3);
    listA.add(4);
    listA.add(4);

ArrayList<Integer> listB = new ArrayList<String>();
    listB.add(6);
    listB.add(7);
    listB.add(9);

ArrayList<Integer> listC = new ArrayList<Integer>();
    listC.add(10);
    listC.add(11);
    listC.add(12);
    listC.add(13);

ArrayList<Integer> listD = new ArrayList<Integer>();
    listD.add(1);
    listD.add(18);

    Map<String,List<Integer>> theMap;
    theMap = new HashMap<String,List<Integer>>();
    theMap.put("A",listA);
    theMap.put("B",listB);
    theMap.put("C",listC);
    theMap.put("D",listD);

    /* Access Values */
    int two = theMap.get("A").get(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T11:51:38.163

使用一个简单的[字典/映射/关联数组](http://en.wikipedia.org/wiki/Associative_array)，其元素是列表（或集合）。在 Python 中， a[`collections.defaultdict`](http://docs.python.org/dev/library/collections.html#collections.defaultdict)可以在这里提供帮助：

```
import collections
d = collections.defaultdict(list)
A,B,C,D = ['A', 8, 3.0, (1,2)]
d[A].extend([2, 3, 4])
d[A].append(5)
# d[A] is now [2,3,4,5] 
```

# c# - C# 中的 XSD 元素

> ID：13550722
> 
> 赞同：2
> 
> 时间：2012-11-25T11:48:50.823
> 
> 标签：c#

我有一个 XSD 文件，我需要获取其中所有元素的名称列表。

我尝试了以下方法：

```
openFileDialog1.ShowDialog();
tbSchema.Text = openFileDialog1.FileName;

cbElement.Items.Clear();

XmlSchemaSet schemaSet = new XmlSchemaSet();
schemaSet.Add("", tbSchema.Text);
schemaSet.Compile();
XmlSchema customerSchema = null;
foreach (XmlSchema schema in schemaSet.Schemas())
{
    customerSchema = schema;
}
foreach (XmlSchemaElement element in customerSchema.Elements.Values)
{
    cbElement.Items.Add(element.Name);
} 
```

但它仍然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:52:10.257

你可以尝试这样的事情： -

```
 XmlDocument doc = new XmlDocument();
 doc.Load("D:\\schema.xsd");                      // Load the document from the root of an ASP.Net website

 XmlElement schemaElement = doc.DocumentElement;  // The root element of the schema document is the <schema> element
 string elementName = schemaElement.LocalName;    // This will print "schema"
 foreach (XmlNode ele in schemaElement.ChildNodes)
 {
  if (ele.LocalName == "element")
  {
     .....
  }
 } 
```

# vba - vba中的通用集合？

> ID：13550733
> 
> 赞同：3
> 
> 时间：2012-11-25T11:50:19.067
> 
> 标签：vba, generic-collections

VBA 有通用集合吗？我对 VBA 比较陌生。我看到它有字典数据结构。vba 还有哪些其他集合或数据结构？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T14:45:24.703

还有一个集合对象类型。

在字典具有键值对系统的情况下，集合是值的列表。对于这类工作，我通常更喜欢字典，因为它有一个我经常使用的 .exists 方法。您还可以使用类模块来滚动您自己的数据结构。

您还可以使用单维或多维数组。范围数据结构是与 Excel 工作表交互的主要方式。如果查询数据库，那么 ADODB 记录集对象对此很有帮助。

我在 VBA 世界中定期使用所有这些。我没有在这里演示语法，因为您正在寻找更一般的指导。

# neo4j - 使用 Spring 数据从 neo4j 获取动态值

> ID：13550736
> 
> 赞同：0
> 
> 时间：2012-11-25T11:51:07.673
> 
> 标签：neo4j, spring-data, spring-data-neo4j

```
公共接口 WayPointRepository 扩展了 GraphRepository、NamedIndexRepository、RelationshipOperationsRepository {
    @Query( value = "start point=node:waypoints(\"name:{name1}\") return point", elementClass=WayPoint.class, type=QueryType.Cypher )
    public List getWayPointByName(@Param("name1") String name);
}

```

我有一个 Neo4j 数据库，其中存储了一些带有索引“航点”的点，我想在通过一些点后动态获取一些点。为此，我创建了占位符 {name1}，

但是在使用动态参数调用 getWayPointByName 时给了我

```
嵌套异常是 java.lang.RuntimeException: org.apache.lucene.queryParser.ParseException: Cannot parse 'name:{name1}': Encountered ""}" "}"" 在第 1 行第 11 列。
期待其中之一：
    “到” ...
     ...
     ...
    ] 有根本原因
org.apache.lucene.queryParser.ParseException：在第 1 行第 11 列遇到““}”“}”。
期待其中之一：
    “到” ...
     ...
     ...

`at org.apache.lucene.queryParser.QueryParser.generateParseException(QueryParser.java:1818)
at org.apache.lucene.queryParser.QueryParser.jj_consume_token(QueryParser.java:1700)
at org.apache.lucene.queryParser.QueryParser.Term(QueryParser.java:1507)
at org.apache.lucene.queryParser.QueryParser.Clause(QueryParser.java:1309)
at org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java:1237)
at org.apache.lucene.queryParser.QueryParser.TopLevelQuery(QueryParser.java:1226)
at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:206)` 

例外

            回答 #1

赞同：3

时间：2012-11-26T10:36:47.343

采用

```
start point=node:waypoints(name={name1}) return point 
```

在字符串中没有发生参数替换。

```

# c# - 为什么我不能在 ApplicationData 中存储 URI

> ID：13550738
> 
> 赞同：1
> 
> 时间：2012-11-25T11:51:16.430
> 
> 标签：c#, .net, windows-8, windows-store-apps

根据[`ApplicationData.LocalSettings`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localsettings)我应该能够`Uri`在本地设置中存储 a 但以下代码正在抛出：`Data of this type is not supported.`

```
ApplicationDataContainer localSettings = ApplicationData.Current.LocalSettings;
localSettings["newURI"] = new Uri("http://www.google.com"); 
```

这看起来像是他们的错误，但我想先看看是否有人有类似的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:29:51.120

这是一个文档错误，抱歉。相反，将其存储为字符串。

# list - 识别 DCG 中的模式

> ID：13550741
> 
> 赞同：2
> 
> 时间：2012-11-25T11:51:31.383
> 
> 标签：dcg, list, prolog, dcg

我目前正在编写一个[dcg](/questions/tagged/dcg "显示标记为“dcg”的问题")，它采用 [0,1]* 形式的列表，并告诉我`0`列表中 ' 的数量是否`3`大于`1`' 的数量。我似乎无法让第三部分 ( `dcg//0`) 工作。

```
 sq --> [].
 sq --> num, sq.

 num --> [0].
 num --> [1].

 dcg --> sq, dd(Count), Count > 2.

 dd(0) --> [].
 dd(Newcnt) --> [0], dd(Cnt), { Newcnt is Cnt+1 }.
 dd(Newcnt) --> [1], dd(Cnt), { Newcnt is Cnt-1 }. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:57:56.900

@Little Bobby Tables 的答案合成（计数）元素编号，并且在 DCG 之外，您需要测试结果

```
..., phrase(sq(Z,O), S), Z is O*3, ... 
```

一种更简单的方法可能是传递不平衡

```
z3o1(B) --> [1], {S is B-3}, z3o1(S).
z3o1(B) --> [0], {S is B+1}, z3o1(S).
z3o1(0) --> [].  % accept only if balanced

..., phrase(z3o1(0), S), ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-15T10:22:53.073

快到了……其实代码已经有了，我们来使用吧！

```
:- use_module(library(clpfd)). 
```

运行我们得到`dd//1`：`phrase/2`

```
?- C #>= 3, phrase(dd(C), Xs).
   C = 3, Xs = [0,0,0]
;  C = 4, Xs = [0,0,0,0]
;  C = 5, Xs = [0,0,0,0,0]
;  C = 6, Xs = [0,0,0,0,0,0]
;  C = 7, Xs = [0,0,0,0,0,0,0]
;  C = 8, Xs = [0,0,0,0,0,0,0,0]
;  C = 9, Xs = [0,0,0,0,0,0,0,0,0]
... 
```

序列包含在哪里`1`？我们知道它们*必须*存在......

```
?- Xs = [0,0,0,1,0], C #>= 3, 短语(dd(C), Xs)。
 Xs = [0,0,0,1,0]，C = 3
; 错误的。

```

...但它们*没有*出现在上述答案序列中：

```
?- C#>= 3, 短语(dd(C), Xs), Xs = [0,0,0,1,0]。
**循环**

```

为了强制对解决方案集进行公平枚举，我们可以使用[`length/2`](https://www.complang.tuwien.ac.at/ulrich/iso-prolog/prologue#length)如下目标：

```
?- C#>= 3，长度（Xs，_），短语（dd（C），Xs）。
   C = 3，Xs = [0,0,0]
; C = 4，Xs = [0,0,0,0]
; C = 5，Xs = [0,0,0,0,0]
; C = 3，Xs = [0,0,0,0,1]
;  C = 3，Xs = [0,0,0,1,0]
; C = 3，Xs = [0,0,1,0,0]
; C = 3，Xs = [0,1,0,0,0]
; C = 3，Xs = [1,0,0,0,0]
; C = 6，Xs = [0,0,0,0,0,0]
...

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T07:19:08.343

以下代码计算给定序列中零和一的数量。您可以使用它来应用您想要的任何条件。

```
sq(0, 0) --> [].
sq(Zeros, Ones) -->
    [0], 
    sq(Z, Ones), 
    {Zeros is Z + 1}.
sq(Zeros, Ones) -->
    [1], 
    sq(Zeros, O),
    {Ones is O + 1}. 
```

# mysql - 如何将 ROW INDEX 作为列添加到 SQL SELECT 查询？

> ID：13550750
> 
> 赞同：21
> 
> 时间：2012-11-25T11:53:00.247
> 
> 标签：mysql, sql

假设我有这样的 SQL 查询：

```
SELECT id, name, index(not a real column) FROM users ORDER BY rating DESC 
```

我想将列添加到将代表记录索引的选定列。

例子：

```
 id    name  rating
 1     a     4
 2     b     2
 3     c     8
 4     d     5 
```

对于这张表，我想得到：

```
 id    name  rating  index
 3     c     8       1
 4     d     5       2
 1     a     4       3
 2     b     2       4 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-25T12:03:34.110

尝试以下方法来获取 row_index：

```
set @row_num = 0; 
SELECT id,name,rating, @row_num := @row_num + 1 as row_index FROM users
ORDER BY rating desc; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T12:02:50.400

就像是 `set @cnt=0; select *, @cnt:=@cnt+1 from users order by rating desc;`

应该完成这项工作（尽管您需要在每次查询之前设置@cnt）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-02T08:19:03.283

它现在内置在 MySQL 8.0 和 MariaDB 10.2 中：

```
SELECT
  id, name, rating,
  ROW_NUMBER(ORDER BY rating DESC) AS index
FROM users ORDER BY rating DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-17T11:00:44.800

如果您没有要订购的列，您仍然可以使用`ROW_NUMBER()`：

```
SELECT 
  id, name, rating,
  ROW_NUMBER(ORDER BY (select 1)) AS index
FROM users 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-12T04:13:33.977

当您在 php admin 或 sql 代码中尝试时，@bonCodigo 的答案是正确的。但是如果你想在php中调用一个查询，你应该声明它如下：

```
$sql_query = "SELECT (@row_number:=@row_number + 1) AS 'row_index', id, name, rating FROM (SELECT @row_number:=0) AS temp, users"

$this->db->query ( $sql_query )->result (); 
```

（这段代码是针对 Code igniter 框架的）

**更新：**

但是，一起使用时将不起作用`JOIN`。在这种情况下，你需要像往常一样读取数据，然后自己添加一个列索引，你可以从这段代码中得到一个想法：

```
$list = $this->db->query ( $sql_query )->result ();

for($i = 0; $i < count($list); $i++ ){
    $list[$i]->no = $i + 1;
} 
```

（这段代码是针对 Code igniter 框架的）

# objective-c - 在自定义单元格中自定义 UILabels 颜色

> ID：13550753
> 
> 赞同：0
> 
> 时间：2012-11-25T11:53:29.963
> 
> 标签：objective-c, ios, cocoa-touch

我在我的 TableView 中使用了一个带有一些 UILabel 的自定义单元格。我需要在选择/突出显示它们时更改它们的颜色。

1）我应该使用 tableviewWillDisplayCell: 吗？2）如何区分其中选定/突出显示的单元格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:45:04.177

您无需对发现突出显示/选择做任何事情。UITableViewCell 被选中时会自动突出显示其所有子视图（*可以*突出显示的子视图）。UILabel*是*一个可以高亮的视图；也就是说，它有一个`highlighted`属性，它会自动响应突出显示。

所以你没有工作要做；你想多了这个问题。只需设置每个标签的`highlightedTextColor`属性，一切都会自动发生。正如另一个答案指出的那样，您可以在笔尖中直接执行此操作，也可以在代码中执行此操作。

如果在选择单元格时确实需要做一些特殊的事情，最简单的方法是使用 UITableViewCell 子类并覆盖`setSelected:animated:`。但在你的情况下似乎不需要这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T12:12:47.883

您可以在笔尖上设置 UILabel 的突出显示颜色。选择界面编辑器上的标签，在右侧面板上，您应该找到一个更改突出显示颜色的选项（我不在 Mac 上，因此无法提供更精确的说明）。

如果找不到，只需更改代码上的颜色即可。我假设您使用以下内容更改该标签的文本：

```
myLabel.text = @"something"; 
```

只需设置突出显示的TextColor：

```
myLabel.highlightedTextColor = [UIColor redColor]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-25T16:23:52.060

first things first, are you able to see your cell in the right way? if you did create a custom cell i would go with this:

```
 // Customize the appearance of table view cells.
    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

        static NSString *CellIdentifier = @"MyCustomCell";

        MyCustomCell *cell = (MyCustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (cell == nil) { 
            NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"MyCustomCell"
                                                 owner:self options:nil];
            for (id oneObject in nib) if ([oneObject isKindOfClass:[MyCustomCell class]])
        cell = (MyCustomCell *)oneObject;
        } 

        // Set up the cell
        //...

        return cell;
    } 
```

Now regarding your questions,

1-) I Use the method *tableviewWillDisplayCell* when i have to work the background of the uitableviewcell so this might not be what you're looking for

2-) If you select a specific tableViewCell it will be selected (by default it will leave it blue), so if you just want to select the last selected cell, you just need to use this:

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    //...

    // do your stuff 
```

}

if you want to use your highlight methods for your custom appearance you'll have to add [tableView deselectRowAtIndexPath:indexPath animated:YES]; to your *didSelectRowAtIndexPath* and then change the UI of the tableViewCell. Also if you want to save wich cell has been selected you can save the indexPath.row in a data structure such as a NSMutableArray and you would have to do that operation in the *didSelectRowAtIndexPath* method

hope this helps, if you need any further help, let me know!

Jorge

# ruby - 哪些项目文件属于 gem 包？

> ID：13550754
> 
> 赞同：0
> 
> 时间：2012-11-25T11:53:38.280
> 
> 标签：ruby

我想更具体的问题是：是否所有项目文件都属于 gem 包，以便 gem 充当项目的完整封装？还是应该只有必要的文件才能使 gem 起作用？还是介于两者之间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T17:52:16.173

您的问题有点难以回答，因为您没有具体细节。

但是，我想说以下类型的东西应该在 gem 中：

*   宝石的代码。这住在`gem/lib/gemname`.
*   测试。这些进入`gem/test`或`gem/spec`通常。
*   可执行文件，如果有的话。他们进去`gem/bin`。
*   文档。也许在代码中，也许在`gem/doc`. 至少（真的太少了）在`README`.
*   许可证和自述文件。这些通常位于 gem 的顶级目录中。
*   一个耙文件。通常在`gem/Rakefile`.

如果您特别询问 gemspec 的项目中应包含哪些文件`files`，典型的文件可能如下所示（取自[RubyGems 指南规范参考页面](http://guides.rubygems.org/specification-reference/#files)）：

```
spec.files = FileList['lib/**/*.rb',
                      'bin/*',
                      '[A-Z]*',
                      'test/**/*'].to_a 
```

[您可以从RubyGems 指南](http://guides.rubygems.org)中获得更多信息。

# jquery - 删除客户端中的文件并重写 _onChage()

> ID：13550758
> 
> 赞同：0
> 
> 时间：2012-11-25T11:54:06.567
> 
> 标签：jquery, ruby-on-rails, file-upload, client-side

我在客户端有两个问题：

1.  当文件发生变化时，如何删除文件列表中的旧文件，只上传新文件？

2.  如果我有一个“全部删除”按钮，如何删除客户端中的所有文件？

我正在使用一个基本的插件。(jquery.fileupload.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:54:09.323

恩，我用自己的方法解决了这个问题，不知道好不好。我希望有更好的想法。

1.  将 pfiles 选项添加到 blueimp.fileupload，就像在 jquery.fileupload.js 中一样：

    $.widget('blueimp.fileupload', {

    ```
    options: {
        // The drop target element(s), by the default the complete document.
        // Set to null to disable drag & drop support:
        dropZone: $(document),
        pfiles:null, // this is for marking the selected files
        // The paste target element(s), by the default the complete document.
        // Set to null to disable paste support:
        pasteZone: $(document)
      ... 
    ```

    }}

2.  在 _onAdd 函数中添加如下：

    _onAdd：函数（e，数据）{...

    ```
     that.pfiles=new Array(); // files array
        $.each(fileSet || data.files, function (index, element) {
           ...
            };
            that.pfiles.push(newData); // add to array
            return (result = that._trigger('add', e, newData));
        });
        return result;
    } 
    ```

3.  像这样使用它时：

    $(function($) {'使用严格';

    ```
     $.widget('blueimp.fileupload', $.blueimp.fileupload, {
           _onChange : function(e) {
                this._cancelHandler();
                this._super(e);
           },
           _initEventHandlers : function() {
                this._super();
                this._on($('#cancel-button'), {
                     click : this.cancel
                });
           },
           cancel : function(e) {
                $('#file-upload-info-list').hide();
                $('#upload-file-preview').html('');
                this._cancelHandler();
           },
           // here the pfiles is used...
           _cancelHandler : function(e) {
                if(this.pfiles != null) {
                     $.each(this.pfiles, function(index, element) {
                          element.submit = null;
                     });
                     this.pfiles = null;
                }
           }
      }); 
    ```

    });

这是我的方式。

# php - .htaccess mod_rewrite 没有捕获整个 URL

> ID：13550760
> 
> 赞同：1
> 
> 时间：2012-11-25T11:54:12.193
> 
> 标签：php, .htaccess, mod-rewrite

.htaccess 文件

```
RewriteEngine On
RewriteRule ^(.+)$ index.php?url=$1 [PT,L] 
```

我添加到 URL mod_rewrite 的任何内容都会捕获它并将其放入 GET 变量 url 并将后台用户重定向到我的 index.php 页面。

例子：

```
http://www.mysite.com/members/profile 
```

在我的 index.php 页面中，如果我将 url 参数输出到我得到的屏幕

```
members/profile 
```

这就是我想要的，但问题是当我在 URL 中添加类似这样的内容时：

```
members/profile## 
```

或者

```
members/profile... 
```

并且可能其他特殊字符 mod_rewrite 的负载似乎只捕捉到：

```
members/profile 
```

由于某种原因，最后省略了字符。

我不希望这样，因为我需要捕获 URL 中的每一个字符。有谁知道为什么它没有捕获整个 URL？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:02:25.107

我使用`.htaccess`包含以下内容的文件测试了您的代码：

```
RewriteEngine On
RewriteRule ^(.+)$ index.php?url=$1 [PT,L] 
```

这个php脚本叫做`index.php`：

```
<?php
echo '$_GET[\'url\'] = "' . $_GET['url'] . '"';
?> 
```

确实，它没有用。但是没有任何效果，即使是你描述的那些东西也没有效果。那为什么会这样呢？`GET`好吧，除非您添加标志，否则Apache 不会将参数传递给脚本： [QSA](http://wiki.apache.org/httpd/RewriteFlags/QSA)。因此，如果您将`.htaccess`文件更改为：

```
RewriteEngine On
RewriteRule ^(.+)$ index.php?url=$1 [PT,L,QSA] 
```

您遇到的一个问题是主题标签没有传递给 PHP 脚本。不幸的是，这是您无法解决的问题。这样做的原因是浏览器不会将第一个哈希开始的每个字符传递给网络服务器。因此，除非您使用一些花哨的 JavaScript，否则您将永远无法获得这些字符。

# android - 设置 gl_PointSize 导致的屏幕闪烁/完全黑屏

> ID：13550765
> 
> 赞同：1
> 
> 时间：2012-11-25T11:55:15.500
> 
> 标签：android, opengl-es, opengl-es-2.0

我正在创建一个小型坦克游戏（渲染器超过 1300 行代码），目前正在研究游戏中的武器。武器的工作变得非常烦人，因为`(flickering on the screen or complete black screen)`每当我设置时我都会注意到屏幕上出现意想不到的东西`gl_PointSize`。

这是如何发生的以及如何删除它`(OpenGL ES 2.0 vendor: Imagination Technologies, Device: Motorola Milestone, OS: Android 2.3.3)`。可能`z-fighting`是个问题？

调整`setLookAtM`不会影响任何东西，消除奇怪效果的唯一方法是移除`gl_PointSize`.

* * *

**[更新]**

可能`gl_PointSize`不是问题；游戏中有一个坦克、一个房间和一盏灯，并且在调用`glDrawArrays`武器的那一刻，屏幕会闪烁或完全变黑一段时间（直到我触摸并旋转坦克），因为武器是在截锥体内。

* * *

```
 Matrix.setLookAtM(GLES20Renderer._ViewMatrix, 0, 0, 0, 2, 0, 0, 0, 0, 1, 0);
    Matrix.frustumM(GLES20Renderer._ProjectionMatrix, 0, -ratio, ratio, -1, 1, 0.75f, 10); 
```

* * *

```
 float[] pointVFA = {
            3.0f,3.0f,3.0f,
            -3.0f,3.0f,3.0f,
            -3.0f,-3.0f,3.0f
    };

    ByteBuffer pointVBB = ByteBuffer.allocateDirect(pointVFA.length * 4);
    pointVBB.order(ByteOrder.nativeOrder());
    GLES20Renderer._pointVFBMissile = pointVBB.asFloatBuffer();
    GLES20Renderer._pointVFBMissile.put(pointVFA);
    GLES20Renderer._pointVFBMissile.position(0); 
```

* * *

```
private static final String _vertexShaderCodeMissiles =
        "attribute vec4 aPosition;                                                      \n"
    +   "void main() {                                                                  \n"
    +   " gl_PointSize = 15.0;                                                          \n"
    +   " gl_Position = aPosition;                                                      \n"
    +   "}                                                                              \n";
private static final String _fragmentShaderCodeMissiles =
        "#ifdef GL_FRAGMENT_PRECISION_HIGH                                              \n"
    +   "precision highp float;                                                         \n"
    +   "#else                                                                          \n"
    +   "precision mediump float;                                                       \n"
    +   "#endif                                                                         \n"
    +   "void main() {                                                                  \n"
    +   " gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);                                      \n"
    +   "}                                                                              \n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:49:34.450

尝试了所有方法来消除黑屏/闪烁的屏幕，（经过 2 周的搅拌）问题终于解决了，对我来说是一个新的教训。

似乎在 OpenGL ES 2.0 中我们不能将缓冲区对象（vbo 或 ibo）与 nio 缓冲区混合。代码应该主要使用缓冲区对象或只使用 nio。

这是错误的代码：

```
 ////////////////////////////////
    // program for missiles start //
    ////////////////////////////////
    GLES20.glUseProgram(GLES20Renderer._programMissiles);
    GLES20.glVertexAttribPointer(GLES20Renderer._aPositionLocationMissiles, 3, GLES20.GL_FLOAT, false, 12, GLES20Renderer._pointVFBMissile);
    GLES20.glEnableVertexAttribArray(GLES20Renderer._aPositionLocationMissiles);
    GLES20.glDrawArrays(GLES20.GL_POINTS, 0, 3);
    ///////////////////////////////
    // program for missiles end  //
    ///////////////////////////////

    //////////////////////////////
    // program for player start //
    //////////////////////////////
    GLES20.glUseProgram(GLES20Renderer._programBody);
    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, GLES20Renderer._bodyBuffers[0]);
    GLES20.glVertexAttribPointer(GLES20Renderer._aPositionLocationBody, 3, GLES20.GL_FLOAT, false, 12, 0);
    GLES20.glEnableVertexAttribArray(GLES20Renderer._aPositionLocationBody);
    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, GLES20Renderer._bodyBuffers[1]);
    GLES20.glVertexAttribPointer(GLES20Renderer._aColorLocationBody, 4, GLES20.GL_FLOAT, false, 16, 0);
    GLES20.glEnableVertexAttribArray(GLES20Renderer._aColorLocationBody);
    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, GLES20Renderer._bodyBuffers[2]);
    GLES20.glVertexAttribPointer(GLES20Renderer._aNormalPositionBody, 3, GLES20.GL_FLOAT, false, 0, 0);
    GLES20.glEnableVertexAttribArray(GLES20Renderer._aNormalPositionBody);
    GLES20.glUniform3f(GLES20Renderer._uLightPositionLocationBody, GLES20Renderer._LightPosInEyeSpace[0], GLES20Renderer._LightPosInEyeSpace[1], GLES20Renderer._LightPosInEyeSpace[2]);
    GLES20.glUniformMatrix4fv(GLES20Renderer._uMVPLocationBody, 1, false, GLES20Renderer._MVPMatrixBody, 0);
    GLES20.glBindBuffer(GLES20.GL_ELEMENT_ARRAY_BUFFER, GLES20Renderer._bodyBuffers[3]);
    GLES20.glDrawElements(GLES20.GL_TRIANGLES, 372, GLES20.GL_UNSIGNED_SHORT, 0);

    GLES20.glUseProgram(GLES20Renderer._programNozzle);
    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, GLES20Renderer._nozzleBuffers[0]);
    GLES20.glVertexAttribPointer(GLES20Renderer._aPositionLocationNozzle, 3, GLES20.GL_FLOAT, false, 12, 0);
    GLES20.glEnableVertexAttribArray(GLES20Renderer._aPositionLocationNozzle);
    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, GLES20Renderer._nozzleBuffers[1]);
    GLES20.glVertexAttribPointer(GLES20Renderer._aColorLocationNozzle, 4, GLES20.GL_FLOAT, false, 16, 0);
    GLES20.glEnableVertexAttribArray(GLES20Renderer._aColorLocationNozzle);
    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, GLES20Renderer._nozzleBuffers[2]);
    GLES20.glVertexAttribPointer(GLES20Renderer._aNormalPositionNozzle, 3, GLES20.GL_FLOAT, false, 0, 0);
    GLES20.glEnableVertexAttribArray(GLES20Renderer._aNormalPositionNozzle);
    GLES20.glUniform3f(GLES20Renderer._uLightPositionLocationNozzle, GLES20Renderer._LightPosInEyeSpace[0], GLES20Renderer._LightPosInEyeSpace[1], GLES20Renderer._LightPosInEyeSpace[2]);
    GLES20.glUniformMatrix4fv(GLES20Renderer._uMVPLocationNozzle, 1, false, GLES20Renderer._MVPMatrixNozzle, 0);
    GLES20.glBindBuffer(GLES20.GL_ELEMENT_ARRAY_BUFFER, GLES20Renderer._nozzleBuffers[3]);
    GLES20.glDrawElements(GLES20.GL_TRIANGLES, 144, GLES20.GL_UNSIGNED_SHORT, 0);
    /////////////////////////////
    // program for player end  //
    ///////////////////////////// 
```

这是正确的代码：

```
 ////////////////////////////////
    // program for missiles start //
    ////////////////////////////////
    GLES20.glUseProgram(GLES20Renderer._programMissile);
    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, GLES20Renderer._missileBuffers[0]);
    GLES20.glVertexAttribPointer(GLES20Renderer._aPositionLocationMissile, 3, GLES20.GL_FLOAT, false, 12, 0);
    GLES20.glEnableVertexAttribArray(GLES20Renderer._aPositionLocationMissile);
    GLES20.glBindBuffer(GLES20.GL_ELEMENT_ARRAY_BUFFER, GLES20Renderer._missileBuffers[1]);
    GLES20.glDrawElements(GLES20.GL_POINTS, 3, GLES20.GL_UNSIGNED_SHORT, 0);
    ///////////////////////////////
    // program for missiles end  //
    ///////////////////////////////

    //////////////////////////////
    // program for player start //
    //////////////////////////////
    GLES20.glUseProgram(GLES20Renderer._programBody);
    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, GLES20Renderer._bodyBuffers[0]);
    GLES20.glVertexAttribPointer(GLES20Renderer._aPositionLocationBody, 3, GLES20.GL_FLOAT, false, 12, 0);
    GLES20.glEnableVertexAttribArray(GLES20Renderer._aPositionLocationBody);
    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, GLES20Renderer._bodyBuffers[1]);
    GLES20.glVertexAttribPointer(GLES20Renderer._aColorLocationBody, 4, GLES20.GL_FLOAT, false, 16, 0);
    GLES20.glEnableVertexAttribArray(GLES20Renderer._aColorLocationBody);
    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, GLES20Renderer._bodyBuffers[2]);
    GLES20.glVertexAttribPointer(GLES20Renderer._aNormalPositionBody, 3, GLES20.GL_FLOAT, false, 0, 0);
    GLES20.glEnableVertexAttribArray(GLES20Renderer._aNormalPositionBody);
    GLES20.glUniform3f(GLES20Renderer._uLightPositionLocationBody, GLES20Renderer._LightPosInEyeSpace[0], GLES20Renderer._LightPosInEyeSpace[1], GLES20Renderer._LightPosInEyeSpace[2]);
    GLES20.glUniformMatrix4fv(GLES20Renderer._uMVPLocationBody, 1, false, GLES20Renderer._MVPMatrixBody, 0);
    GLES20.glBindBuffer(GLES20.GL_ELEMENT_ARRAY_BUFFER, GLES20Renderer._bodyBuffers[3]);
    GLES20.glDrawElements(GLES20.GL_TRIANGLES, 372, GLES20.GL_UNSIGNED_SHORT, 0);

    GLES20.glUseProgram(GLES20Renderer._programNozzle);
    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, GLES20Renderer._nozzleBuffers[0]);
    GLES20.glVertexAttribPointer(GLES20Renderer._aPositionLocationNozzle, 3, GLES20.GL_FLOAT, false, 12, 0);
    GLES20.glEnableVertexAttribArray(GLES20Renderer._aPositionLocationNozzle);
    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, GLES20Renderer._nozzleBuffers[1]);
    GLES20.glVertexAttribPointer(GLES20Renderer._aColorLocationNozzle, 4, GLES20.GL_FLOAT, false, 16, 0);
    GLES20.glEnableVertexAttribArray(GLES20Renderer._aColorLocationNozzle);
    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, GLES20Renderer._nozzleBuffers[2]);
    GLES20.glVertexAttribPointer(GLES20Renderer._aNormalPositionNozzle, 3, GLES20.GL_FLOAT, false, 0, 0);
    GLES20.glEnableVertexAttribArray(GLES20Renderer._aNormalPositionNozzle);
    GLES20.glUniform3f(GLES20Renderer._uLightPositionLocationNozzle, GLES20Renderer._LightPosInEyeSpace[0], GLES20Renderer._LightPosInEyeSpace[1], GLES20Renderer._LightPosInEyeSpace[2]);
    GLES20.glUniformMatrix4fv(GLES20Renderer._uMVPLocationNozzle, 1, false, GLES20Renderer._MVPMatrixNozzle, 0);
    GLES20.glBindBuffer(GLES20.GL_ELEMENT_ARRAY_BUFFER, GLES20Renderer._nozzleBuffers[3]);
    GLES20.glDrawElements(GLES20.GL_TRIANGLES, 144, GLES20.GL_UNSIGNED_SHORT, 0);
    /////////////////////////////
    // program for player end  //
    ///////////////////////////// 
```

# c++ - 在宿主程序中调用 main() 函数之前，如何在 DLL 模块中构造全局对象？

> ID：13550769
> 
> 赞同：1
> 
> 时间：2012-11-25T11:55:57.600
> 
> 标签：c++, dll, global-variables

首先，我将展示我的问题，然后提供更多背景细节：

## 我的问题

1.  在 DLL 模块中定义全局对象是个好主意吗？
2.  无论如何，我应该如何确保在主机程序中调用 main() 函数之前构造 DLL 模块中的全局对象？

## 背景

我在**Windows平台上的一个****Visual C++**项目中工作（但同时我们需要保证我们的源代码的跨平台能力以**支持 Linux**）。

 ****我的一位同事被要求设计和实现一些可以由其他项目共享的独立 DLL 模块。他计划开发两个不同用途的DLL：

1.  DLL#1 - 一个接口管理器模块，看起来像一个简化的 COM。该 DLL 将包含一个管理实用程序类的所有工厂的 C++ 类。
2.  DLL#2 - 所有实用程序类及其相应工厂类的容器。

他对这种设计的考虑包括：

1.  COM 不是跨平台的。此外，COM 对我们的项目环境来说有点过于复杂，所以他设计了这个 Simplified COM 库。
2.  他没有将所有东西都放在一个 DLL 中，因为他认为这个简化的 COM 库是非常独立的，不应该与诸如“XML 解析器”之类的实用程序类混合。我同意这一点。
3.  所有实用程序类都有其相应的工厂类。我的同事在 DLL#2 的 .cpp 文件中为每个工厂类定义了一个**全局对象**，并编写了一些棘手的代码让它们注册到 Simplified COM 库。他的意图是：全局对象应该在宿主程序中的main()函数被调用之前构建，并在构建过程中将它们注册到简化的COM中，这样宿主程序就可以创建实用程序类的实例。进入main()。这种行为与 COM 非常相似。我同意这一点，但正如我在“我的问题”部分中提到的那样，我的问题也会出现。

事实上，通过一些实际测试，我们发现这些全局对象无法按意图构建，可悲的是，这让他心碎;-)。但我认为他的设计看起来仍然不错，所以我们想找出一些方法让它发挥作用。我们更愿意以这种方式使用这些 DLL：这些 DLL 与库和包含一起部署在开发人员的计算机中。然后在一个具体的 VC++ 项目中，它们在链接时被合并。现在我们没有编译或链接错误，只是 DLL #2 中的这些全局对象没有按需要创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:22:41.930

不能用DLL的[`DllMain()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682583(v=vs.85).aspx)函数来初始化一切吗？只需检查`DLL_PROCESS_ATTACH`，它将让您知道 DLL 是否正在加载。同样，您可以使用它`DLL_PROCESS_DETACH`来执行任何清理。

如果你对 Linux 保持开放，你也可以使用 GCC 的[`__attribute__((constructor))`](https://stackoverflow.com/questions/2053029/how-exactly-does-attribute-constructor-work).

至于你的问题：

1.  在可执行文件中使用全局变量是一个好主意。这是否是一个“好”的想法完全是主观的。我个人尽可能避免使用全局变量，因为它可以简化事情（更少的意大利面条代码；将引用/对象作为参数传递使依赖关系清晰；更少的线程问题等）。我不能给出坚定的“是”或“否”，因为我不完全理解您的用例。一个例子会有所帮助。
2.  我不明白为什么需要在`main()`函数之前创建它们。如果您可以保证它们是在 DLL 中创建的`DllMain()`，它将在 DLL 中的任何其他函数之前被调用（并且用户不调用它；操作系统会调用它），您还真的需要它之前`main()`吗？我会感到惊讶。****

# android - java.io.IOException：写入失败：ENODEV 同时将数据从 JellyBean 设备写入 arduino

> ID：13550774
> 
> 赞同：1
> 
> 时间：2012-11-25T11:56:30.407
> 
> 标签：android, usb, arduino, adk

我得到

```
E/xx( 5508): java.io.IOException: write failed: ENODEV (No such device)
E/xxx( 5508):   at libcore.io.IoBridge.write(IoBridge.java:462)
E/xxx( 5508):   at java.io.FileOutputStream.write(FileOutputStream.java:187)
E/xxx( 5508):   at java.io.OutputStream.write(OutputStream.java:82) 
```

从我的果冻豆设备向 Arduino 写入（通过 USB）数据时。Android中用于编写的代码是

```
try {
           String buff = new String(v.getText().toString());
           buff += '\0';
           mOutputStream.write(buff.getBytes());
} catch (IOException e) {
           Log.e(TAG, "write failed", e);
} 
```

在arduino中阅读的代码是

```
 while (Serial.available()) {
    char inChar = (char)Serial.read(); 
    inputStringFromSerial += inChar;
    if (inChar == 0xd) { // inchar == '\n'
      stringComplete = true;
    } 
  } 
```

即使我的 Android 可以自动检测到配件并自动启动我的应用程序，我也无法写入或读取 Arduino。权限也正确获得

另外，我从哪里可以获得最新的 Arduino ADK 库？有些库需要 acc.powerOn() 而有些需要 acc.begin() 才能启动。哪个是最新的？

我让它工作了一次，没有任何代码更改。但只有一次，之后没有:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T05:06:36.813

错误消息表示设备不再连接。我怀疑您的应用程序的其他部分或另一个应用程序中的某些代码也在尝试连接到同一个附件。

如果您使用的是 Arduino ADK 板或 Arduino + USB Host Shield，那么您可以从[https://github.com/felis/USB_Host_Shield_2.0获取最新的库](https://github.com/felis/USB_Host_Shield_2.0)

# javascript - 如何在流星运行时编译新模板？

> ID：13550775
> 
> 赞同：3
> 
> 时间：2012-11-25T11:56:43.397
> 
> 标签：javascript, templates, meteor, handlebars.js

## 如何使用 Handlebars.js 在运行时在流星中编译新模板？

```
var source   = '<input type="text" value"{{title}}" />' ;    
var template = ***???***.compile(my_new_template, source);
var context = {title: "My New Post", body: "This is my first post!"}
Template.my_new_template.events({
  'click': function (e,sender) {
    var that=this;
  }
});
var html = Template.my_new_template(context);
$('#workspace').append(html); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T23:53:23.963

目前没有办法直接编译 Handlebars 字符串。Meteor 包装了 Handlebars，只为 ast（抽象语法树）提供了编译方法，而不是直接提供字符串。但是，您可以提供自己的不是 Handlebars 函数的函数。它不是公共 API，但您可以通过这种方式创建 Meteor 模板（暂时，除非 API 更改）：

< 0.6.5：

```
var tmpl = Meteor._def_template("templateName", function () { 
    return "some html string"; 
}); 
```

0.6.5

```
var tmpl = Meteor.__define__("templateName", function () { 
    return "some html string"; 
}); 
```

因此，这将在命名空间中创建一个模板，`Template`并为您提供模板的所有良好 Meteor 功能（例如反应性、事件、地标等）。

您还可以通过观看 Spark（Meteor 的底层渲染引擎）上的这一系列截屏视频来了解更多关于幕后发生的事情。

[http://www.eventedmind.com/posts/meteor-rendering-template-functions](http://www.eventedmind.com/posts/meteor-rendering-template-functions) [http://www.eventedmind.com/posts/meteor-introduction-to-rendering](http://www.eventedmind.com/posts/meteor-introduction-to-rendering)

# c - 用 C 编写非常简单的网络服务器 - 浏览器挂起

> ID：13550777
> 
> 赞同：3
> 
> 时间：2012-11-25T11:56:48.903
> 
> 标签：c, http, networking, webserver, request

您好我正在尝试编写一个非常简单的网络服务器。它将对任何请求响应相同的简单网页。这是代码片段：

```
while(1) {

  if ((newFd = accept(s, (struct sockaddr *) &clientAddr, &sockAddrSize)) == ERROR) {
      printf("error accept\n");
      close(s);
      return;
   }

  pid = fork();

  if(pid == 0) {
      handle_request(newFd);
      close(newFd);
      return;
  }
} 
```

句柄请求函数是：

```
void handle_request(int newFd) {

  int readBytes;
  int sendBytes;
  readBytes = recv(newFd, buffer, BUFFSIZE, 0);

  sendBytes = send(newFd, page, strlen(page), 0);
  printf("I have send %d B out of %d B\n", sendBytes, strlen(page));
} 
```

其中 page 是简单的全局变量：

```
char *page = "HTTP/1.0 200 OK\r\nContent-Type: text/html\r\n\r\n<h1>Hello</h1>\r\n";
```

发生的情况是，该浏览器正在等待（似乎正在接收数据，选项卡中的圆圈正在旋转）并且什么都不显示（尝试了 Firefox 和 Chromium）。只有在我杀死主进程（使用accept（））之后，它才会显示页面。

我不知道哪里有问题，我想我做得对。对于新进程，我发送响应并关闭接受返回的描述符并关闭子进程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:26:15.580

浏览器“挂起”，因为它仍在等待数据。它有两种方法可以知道不会有更多的数据。通过标明内容长度的标头 ( `content-length`) 或通过服务器关闭表明服务器已完成发送的套接字。

您的代码中有两个主要问题，您没有在主进程和分叉进程中关闭套接字，但您只是返回，我怀疑您在主进程中运行它，这无关紧要，但在一般来说，在分叉的孩子中调用 exit() 是一种很好的做法。如果您不这样做，它们将继续运行，并可能导致一些令人讨厌且难以发现的错误。如果您不在`newFd`while 循环中关闭，您最终将用完套接字描述符，并且您的服务器将无法接受新请求。

# windows - 创建 Windows 服务

> ID：13550781
> 
> 赞同：1
> 
> 时间：2012-11-25T11:57:06.250
> 
> 标签：windows, service, jar

我想在 Windows 中创建一个非常简单的服务。

该服务应该简单地运行一个批处理文件，该文件启动一个 Java 应用程序（从 jar 中）。

我如何为 Windows 提供此简单服务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T12:00:42.933

您可以查看[RunAsService。](http://runasservice.sourceforge.net/). 它会为你工作

# android - 具有 SQL 和 Web 服务方法的 Android 应用程序

> ID：13550783
> 
> 赞同：0
> 
> 时间：2012-11-25T11:57:21.880
> 
> 标签：android, sql, web-services

我正在开发我的第一个 Android 应用程序，它会显示我所在城市接下来几天的活动。我正在使用 PHP 解析网站，然后将这些数据发送到我的数据库，用户将从中获取事件。

我遇到的第一个问题是存储数据库的位置。我试图找出比使用服务器更好的解决方案，因为只有两个表。除了支付服务器费用之外，还有其他更简单的方法吗？

另一件事是将数据库与Android连接起来。我做了一些研究，使用 REST api 设置 Web 服务似乎是正确的方法。我也在考虑 Phonegap 框架，以便该应用程序可以在 iPhone 和其他设备上运行。这是正确的方法吗？

最后一件事是将数据存储在 Android 端，以便应用程序可以离线工作。我正在考虑创建 SQLite 数据库并在启动时只是为了处理一些查询或存储 JSON 文件并对其进行解析。有什么更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:03:06.127

几个指点。

1.  如果数据库不大，请使用 SQLlite 作为数据库。
2.  不要直接从 android 应用程序查询数据库。查询将返回结果的网站。绝不允许外部 SQL 连接。原因，请参阅[此答案](https://stackoverflow.com/a/13471874/544198)。
3.  正如您所提到的，Android 也支持 SQLite。数据库可能是最好的解决方案，除非您只有非常少量的数据（使用 JSON 解析需要时间。）

# android - Android 设备上的最大图像大小

> ID：13550785
> 
> 赞同：3
> 
> 时间：2012-11-25T11:58:08.120
> 
> 标签：android, cocos2d-iphone, textures, cocos2d-android

我正在将现有游戏从 iOS 移植到 Android，并且想知道 PNG 图像是否有大小限制？在旧 iOS 设备上，纹理图集大小不能超过 1024 x 1024 像素。Android 设备是否存在类似的限制？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T07:50:58.710

在 android 中，您可以使用更大的 atlas，但我建议您仅使用基于 2 的尺寸；1024×1024；2048 x 2048 等。有时 Android 在使用自定义尺寸时会失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T12:00:36.330

不，唯一的限制是正在使用的设备的 RAM。

# c++ - 如何组合任意谓词函子

> ID：13550786
> 
> 赞同：1
> 
> 时间：2012-11-25T11:58:24.040
> 
> 标签：c++, c++11, variadic-templates

我很难使用具有以下问题的可变参数模板。

假设所有谓词函子的形式为，

```
class Pred1 {
public:
    Pred1( Args... ); // The signature Args... can vary class to class.

    template <typename T>
    bool operator()(T t);
}; 
```

鉴于这些函子，我想制作一个可变参数模板类，如果每个谓词的所有 operator() 都返回 true，则返回 true，即，

```
template <typename... Preds>
class CombinePredAnd {
public:
    template <typename T>
    bool operator()(T t){
         // returns true if all of the Preds( Args... ).operator()(t) returns true;  
         // Args... should be passed when CombinePredAnd is constructed.
    }
}; 
```

对我来说，我不知道将参数传递给 Preds 的每个构造函数。你能给我一些提示吗？另外，如果你有更好的设计和相同的功能，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T12:22:00.913

也许是这样的：

```
#include <tuple>
#include <type_traits>

template <std::size_t N, std::size_t I, typename Tuple>
struct evaluate_all
{
    template <typename T>
    static bool eval(T const & t, Tuple const & preds)
    {
        return std::get<I>(preds)(t)
            && evaluate_all<N, I + 1, Tuple>::eval(t, preds);
    }
};

template <std::size_t N, typename Tuple>
struct evaluate_all<N, N, Tuple>
{
    template <typename T>
    static bool eval(T const &, Tuple const &)
    {
        return true;
    }
};

template <typename ...Preds>
struct conjunction
{
private:
    typedef std::tuple<Preds...> tuple_type;
    tuple_type preds;

public:
    conjunction(Preds const &... p) : preds(p...) { }

    template <typename T>
    bool operator()(T const & t) const
    {
        return evaluate_all<sizeof...(Preds), 0, tuple_type>::eval(t, preds);
    }
};

template <typename ...Preds>
conjunction<typename std::decay<Preds>::type...> make_conjunction(Preds &&... preds)
{
    return conjunction<typename std::decay<Preds>::type...>(std::forward<Preds>(preds)...);
} 
```

**用法：**

```
auto c = make_conjunction(MyPred(), YourPred(arg1, arg2, arg3));

if (c(10)) { /* ... */ } 
```

**例子：**

```
#include <iostream>

typedef int T;

struct Pred1
{
    int a;
    Pred1(int n) : a(n) { }
    bool operator()(int n) const { return n >= a; }
};
struct Pred2
{
    int a;
    Pred2(int n) : a(n) { }
    bool operator()(int n) const { return n <= a; }
};

int main()
{
    auto c = make_conjunction(Pred1(1), Pred2(3));

    std::cout << "1: " << c(1) << "\n"
              << "5: " << c(4) << "\n";
} 
```

注意：您也可以使此方法的“合取”部分参数化，因此您只需插入`std::logical_and`or即可拥有合取和析取`std::logical_or`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:11:17.990

这是 Kerrek SB 的替代解决方案：

```
#include <tuple>
#include <type_traits>
#include <cstdlib>

template <typename HeadPred, typename ...TailPreds>
struct CombinePredAnd 
{
    template<typename H, typename ...Ts>
    explicit CombinePredAnd(H const & h, Ts const &...ts)
    : _preds(h, ts...){}

    template <typename T>
    bool operator()(T t){
        return eval(t,_preds);
    }

private:

    template<typename T, size_t I = 0, typename ...Ps>
    typename std::enable_if<sizeof ...(Ps) == I,bool>::type
    static eval(T t, std::tuple<Ps...>) {
        return true;
    }

    template<typename T, size_t I = 0, typename ...Ps>
    typename std::enable_if<sizeof ...(Ps) != I,bool>::type
    static eval(T t, std::tuple<Ps...> const & preds) {
        auto const & pred = std::get<I>(preds);
        return pred(t) && eval<T,I + 1>(t,preds);
    }

    std::tuple<HeadPred, TailPreds...> _preds;
}; 
```

这可以按照 Kerrek SB 建议的任意谓词函子的通用合取或析取的方式概括如下，通过选择合取或析取来参数化。附加了一个测试程序，使用 gcc 4.7.2 和 clang 3.2 构建：

```
#include <tuple>
#include <type_traits>
#include <functional>
#include <cstdlib>

template <class AndOrOr, typename HeadPred, typename ...TailPreds>
struct dis_or_con_join 
{
    static_assert(
        std::is_same<AndOrOr,std::logical_and<bool>>::value ||
        std::is_same<AndOrOr,std::logical_or<bool>>::value,     
        "AndOrOr must be std::logical_and<bool> or std::logical_or<bool>");

    template<typename H, typename ...Ts>
    explicit dis_or_con_join(H const & h, Ts const &...ts)
    : _preds(h, ts...){}

    template <typename T>
    bool operator()(T t){
        return eval(t,_preds);
    }

private:

    static const bool conjunction = 
        std::is_same<AndOrOr,std::logical_and<bool>>::value;

    template<typename T, size_t I = 0, typename ...Ps>
    typename std::enable_if<sizeof ...(Ps) == I,bool>::type
    static eval(T t, std::tuple<Ps...>) {
        return conjunction;
    }

    template<typename T, size_t I = 0, typename ...Ps>
    typename std::enable_if<sizeof ...(Ps) != I,bool>::type
    static eval(T t, std::tuple<Ps...> const & preds) {
        auto lamb = conjunction ? 
            [](bool b){ return b; } :
            [](bool b){ return !b; };               
        auto const & pred = std::get<I>(preds);
        return lamb(lamb(pred(t)) && lamb(eval<T,I + 1>(t,preds)));
    }

    std::tuple<HeadPred, TailPreds...> _preds;
};

template<typename HeadPred, typename ...TailPreds>
using conjunction  = 
dis_or_con_join<std::logical_and<bool>,HeadPred,TailPreds...>;

template<typename HeadPred, typename ...TailPreds>
using disjunction =
dis_or_con_join<std::logical_or<bool>,HeadPred,TailPreds...>;

// Test...

#include <iostream>
#include <list>
#include <algorithm>

using namespace std;

// For various predicates with various constructors...

template<typename T>
struct is_in_list
// Stores an arbitrary sized list of its type T constructor arguments
// and then with tell us whether any given T is in its list 
{
    is_in_list(initializer_list<T> il)
    : _vals(il.begin(),il.end()){}
    bool operator()(T t) const {
        return find(_vals.begin(),_vals.end(),t) != _vals.end();
    }
    list<T> _vals;
};

int main()
{
    is_in_list<char> inl03 = {'\0','\3'};
    is_in_list<long> inl013 = {0,1,3};
    is_in_list<float> inl0123 = {0.0f,1.0f,2.0f,3.0f};

    conjunction<is_in_list<char>,is_in_list<long>,is_in_list<float>> 
    conj{inl03,inl013,inl0123};
    disjunction<is_in_list<char>,is_in_list<long>,is_in_list<float>> 
    disj{inl03,inl013,inl0123};

    cout << "conjunction..." << endl;
    cout << 1 << " is " << (conj(1) ? "" : "not ") 
        << "in all the lists" << endl;
    cout << 0 << " is " << (conj(0) ? "" : "not ") 
        << "in all the lists" << endl;
    cout << 3 << " is " << (conj(3) ? "" : "not ") 
        << "in all the lists" << endl;
    cout << "disjunction..." << endl;       
    cout << 1 << " is in " << (disj(1) ? "at least one " : "none ") 
        << "of the lists" << endl;
    cout << 2 << " is in " << (disj(2) ? "at least one " : "none ") 
        << "of the lists" << endl;
    cout << 3 << " is in " << (disj(3) ? "at least one " : "none ") 
        << "of the lists" << endl;
    cout << 4 << " is in " << (disj(4) ? "at least one " : "none ") 
        << "of the lists" << endl;
    return 0;
} 
```

可能不清楚的线：

```
return lamb(lamb(pred(t)) && lamb(eval<T,I + 1>(t,preds))); 
```

只是利用等价性：

```
P or Q = not(not(P) and not(Q)) 
```

输出：-

```
conjunction...
1 is not in all the lists
0 is in all the lists
3 is in all the lists
disjunction...
1 is in at least one of the lists
2 is in at least one of the lists
3 is in at least one of the lists
4 is in none of the lists 
```

# git - 我可以通过索引内容覆盖工作副本吗？

> ID：13550788
> 
> 赞同：16
> 
> 时间：2012-11-25T11:58:40.380
> 
> 标签：git

> **可能的重复：**
> [如何丢弃 git 中未分级的更改？](https://stackoverflow.com/questions/52704/how-do-you-discard-unstaged-changes-in-git)

我知道当我`git add`将内容跟踪到存储库时，git 复制/更新其对象存储的内容。如果我不断更改我的内容而没有`git add`再次更改，并且**我对所有这些更改感到遗憾，并且我希望索引中的最后一个快照回到我的工作副本**，我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T12:01:56.997

您可以`git-checkout`为此使用：

```
git checkout -- . 
```

# oop - 在 getter 和 setter 中应该允许什么？

> ID：13550791
> 
> 赞同：0
> 
> 时间：2012-11-25T11:59:01.793
> 
> 标签：oop, language-agnostic, encapsulation

我进入了一个关于 getter 和 setter 方法和封装的有趣的互联网争论。有人说他们应该做的只是一个赋值（setter）或一个变量访问（getter）来保持它们“纯”并确保封装。

*   我是否正确，这将完全违背首先拥有 getter 和 setter 的目的，并且应该允许验证和其他逻辑（当然没有奇怪的副作用）？
*   什么时候应该进行验证？
    *   在设置器内部设置值时（以保护对象永远不会进入无效状态 - 我的意见）
    *   在设置值之前，在设置器之外
    *   在对象内部，每次使用该值之前
*   是否允许设置器更改值（可能将有效值转换为某些规范的内部表示）？

*在您将此问题作为重复项关闭之前：*我在这里花了很多时间搜索，但没有找到这些特定问题的任何答案。如果你能告诉我一个回答他们的问题，我很乐意删除这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T12:08:08.720

我完全同意；尽管我会说验证是访问者合法业务的一部分——尤其是二传手！允许未经验证的设置器是非常糟糕的做法。

传播无效数据的对象意味着您必须担心其外部的属性，这严重破坏了封装。

如果未经检查的访问器有正当理由，请同时提供，命名`get`等`unchecked_Get`，以明确哪个是首选，按照`Unchecked_Access`我首选的面向对象语言的思路。

只是重新阅读 Fowler 的“重构”，他认为只有原始访问器的类可能应该删除并重构为没有任何价值。

具体答案：（我的看法）

是的，它会破坏访问者的目的；这几乎和公开实例变量一样糟糕......

最好在施工和设置上进行验证；那么您可以信任该对象。

设置器可以更改值吗？我认为您必须根据具体情况做出决定。在某些细节上，一般的答案是错误的。有时你希望 setter 失败并指出潜在的问题，让你修复它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T12:14:02.610

> 我是否正确，这将完全违背首先拥有 getter 和 setter 的目的，并且应该允许验证和其他逻辑（当然没有奇怪的副作用）？

是的。如果您正在获取和设置，那很好，因为您将来可以引入锁或转换例程，但如果您永远不需要它，只需将成员公开！

> 什么时候应该进行验证？设置值时，在 setter 内部（以保护对象永远不会进入无效状态 - 我的观点）在设置值之前，在 setter 外部 在对象内部，每次使用该值之前

这取决于你。预先评估和验证所有内容称为摊销，这很好，因为您知道状态始终有效。但是，如果您更愿意稍后再做，则称为延迟验证，如果您从未真正使用过数据，它可以提高性能。

> 是否允许设置器更改值（可能将有效值转换为某些规范表示）？

当然，这是使用它们的一个很好的理由。如果您突然需要支持两种类型的输入（例如，公制和标准），您可以在一处将逻辑添加到设置器，而不是在整个项目中更改其使用的每个实例。

# java - Tomcat 3.0 和 jdk1.5 的连接池 API

> ID：13550793
> 
> 赞同：0
> 
> 时间：2012-11-25T11:59:22.143
> 
> 标签：java

我需要为我的 JSP 程序做连接池。我正在使用 Tomcat 3.0 版和 jdk1.5。请向我推荐一个与两者兼容的连接池 API。

谢谢。

# emacs - 如何使用 org-mode “capture-refile” 机制来构建自己的词汇表？

> ID：13550799
> 
> 赞同：10
> 
> 时间：2012-11-25T12:00:02.480
> 
> 标签：emacs, elisp, org-mode

有机制`org-mode`。`Capture-Refile-Archive`我经常用它来做笔记和日志。我也想用它来建立我自己的词汇量。例如，当我在阅读一些英文文本时遇到一些生词，我想简单地键入`C-c c v e`将这个词记录到我的词汇文件`Word-List-EN.org`中。我还希望将单词分类为 Letters，例如`cashew`将记录到 entry 中`/C/CA`。我想输入`C-c c v E`以将我的世界语单词记录到某个文件中，例如`vortaro.org`. 如何配置`org-capture-templates`来实现这个？我阅读了组织信息，但仍然没有任何线索。手册说我可以使用类似`(function function-finding-location)`. 但我必须定义我自己的`function-finding-location`. 希望elisp高手能帮帮我！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T07:02:43.957

我认为 pmr 是正确的，因为选择文件位置作为模板的一部分的功能对于您的需要来说太早了。

与 org capture refile 工作流集成的一种方法是使用标准的 org capture 模板系统将您的新单词归档到 vocab 缓冲区中，然后使用自定义 elisp 函数作为钩子，可能进入 org-capture-before-finalize-hook，将新定义归档到正确的位置。

我编写了以下函数作为示例，它提示输入单词和定义并将其插入到正确位置的组织缓冲区中。如果它适合您的需要，您可以将其绑定到您选择的键，或将其用作挂钩方法的起点。

```
;;
;; remove extra spaces between stars and the headline text
;;
(defun tidy-headlines ()
  (interactive)
  (save-excursion
    (goto-char (point-min))
    (while (re-search-forward "^\\*+\\([[:space:]][[:space:]]+\\)" (point-max) t)
      (replace-match " " nil nil nil 1))))

;;
;; function for storing things in vocab files like cashew /C/CA/Cashew
;;
(defun insert-vocab-word (vocab-word definition)
  "prompts for a word then opens a vocab file and puts the word in place"
  (interactive "sWord: \nsDefinition: ")
  (find-file "~/org/vocab.org")
  (tidy-headlines)
  (goto-char (point-min))
  (let* ((first-char (upcase (substring vocab-word 0 1)))
         (first-two-chars (upcase (substring vocab-word 0 2))))
    (while (and (re-search-forward "^\\* " (point-max) t)
                (string< (buffer-substring-no-properties (point) (+ 1 (point))) first-char)))
    (if (string= (buffer-substring-no-properties (point) (+ 1 (point))) first-char)
        (let* ((end-of-subtree (save-excursion (org-end-of-subtree) (point))))
          (while (and (re-search-forward "^\\*\\* " end-of-subtree t)
                    (string< (buffer-substring-no-properties (point) (+ 2 (point))) first-two-chars)))
          (if (string= (buffer-substring-no-properties (point) (+ 2 (point))) first-two-chars)
              (let* ((end-of-subtree2 (save-excursion (org-end-of-subtree) (point))))
                (while (and (re-search-forward "^\\*\\*\\* " end-of-subtree2 t)
                            (string< (word-at-point) vocab-word)))
                (if (string< vocab-word (word-at-point))
                    (progn
                      (beginning-of-line)
                      (org-insert-heading t))
                  (org-insert-heading-after-current))
                (insert vocab-word)
                (org-insert-subheading t)
                (insert definition))
            (progn
              (if (string< first-two-chars (buffer-substring-no-properties (point) (+ 2 (point))))
                  (progn
                    (beginning-of-line)
                    (org-insert-heading t))
                (org-insert-heading-after-current))
              (insert first-two-chars)
              (org-insert-subheading t)
              (insert vocab-word)
              (org-insert-subheading t)
              (insert definition))))
      (progn
        (org-insert-heading-after-current)
        (insert first-char)
        (org-insert-subheading t)
        (insert first-two-chars)
        (org-insert-subheading t)
        (insert vocab-word)
        (org-insert-subheading t)
        (insert definition))))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:09:06.280

我在为类似的东西获取 org-capture 时遇到了巨大的问题，但 org-remember 运行良好。这是我的相关 .emacs 位：

```
(require 'org-install)
(setq org-directory "~/.orgfiles/")
(setq org-default-notes-file (expand-file-name "~/.orgfiles/notes.org"))
(setq remember-annotation-functions '(org-remember-annotation))
(setq remember-handler-functions '(org-remember-handler))
(add-hook 'remember-mode-hook 'org-remember-apply-template)
(setq org-agenda-files '("~/.orgfiles"))
(global-set-key "\C-cl" 'org-store-link)
(global-set-key "\C-cc" 'org-remember)
(global-set-key "\C-ca" 'org-agenda)
(global-set-key "\C-cb" 'org-iswitchb)
(setq org-remember-templates
      '(("Todo" ?t "* TODO %^{Brief Description} %^g\n%?    Added: %U" "~/.orgfiles/TODO.org" "Tasks")
    ("Idea" ?i "* %^{Brief Description} %^g\n%?    Added: %U" "~/.orgfiles/Idea.org" "Ideas")
    ("Study" ?s "* %^{Brief Description} %^g\n%?    Added: %U" "~/.orgfiles/Study.org" "Study")
    ("Receipt" ?r "** %^{Brief Description} %U %^g\n%?" "~/.orgfiles/Receipt.org")
    )
) 
```

# json - Json.NET：反序列化嵌套的 Json

> ID：13550805
> 
> 赞同：7
> 
> 时间：2012-11-25T12:00:41.410
> 
> 标签：json, json.net

如何反序列化此 Json 字符串上的“Items”类部分：

```
{
"Buddies": {
    "count": 1,
    "items": [
        {
            "id": "5099207ee4b0cfbb6a2bd4ec",
            "firstName": "Foo",
            "lastName": "Bar",
            "image": {
                  "url": "",
                    "sizes": [
                        60,
                        120,
                        180,
                        240,
                        360
                    ],
                    "name": "myphoto.png"
                }
            }
        ]
    }
} 
```

我原来的课程是：

```
public class Buddy 
{
   public IEnumerable<Item> Items { get; set; }
   public class Item {
       public string Id { get; set; }
       public string FirstName { get; set; }
       public string LastName { get; set; }
   }
} 
```

但是 json 的上半部分对我来说毫无用处，我想改用这个类：

```
public class Buddy 
{
       public string Id { get; set; }
       public string FirstName { get; set; }
       public string LastName { get; set; }       
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-08-06T21:10:46.517

这是一种使用[JSONPath](http://www.newtonsoft.com/json/help/html/SelectToken.htm)的方法，假设您的 JSON 在名为的变量中`json`：

```
var buddies = JObject.Parse(json).SelectToken("$.Buddies.items").ToObject<Buddy[]>(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T13:06:47.333

我不知道开箱即用的解决方案（如果有的话），但是是什么阻止了您编写类似于下图所示的几行代码来构建新集合：

```
var obj = JsonConvert.DeserializeObject<dynamic>(jsonstring);
var items = new List<Buddy>();
foreach (var x in obj.Buddies.items)
{
    items.Add(new Buddy
                  {
                      Id = x.id,
                      FirstName = x.firstName,
                      LastName = x.lastName
                  });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T04:38:19.177

创建`JsonConverter`一个可以循环遍历属性及其值并创建所需对象的对象。有关更多信息，请参阅在 stackoverflow 中搜索 JsonConverter，例如**http://stackoverflow.com/questions/2315570/json-net-how-to-serialize-a-class-using-custom-resolver**。我也喜欢 Jaroslaw 的方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-14T05:11:34.443

您可以使用以下代码：

```
dynamic dictionary = 
(JsonConvert.DeserializeObject <IDictionary<string, object> > (jsonstring) )["Buddies"];

            var response = dictionary.items;

            foreach (var item in response)
            {

                var firstName= item.firstName;

            } 
```

您还可以看到： [Parsing a complex JSON result with C#](https://stackoverflow.com/questions/17126323/parsing-a-complex-json-result-with-c-sharp/23052626#23052626)

# visual-studio - 在 VS 2010 中使用 Expression Blend 中的控件

> ID：13550807
> 
> 赞同：2
> 
> 时间：2012-11-25T12:00:48.213
> 
> 标签：visual-studio, expression-blend

我知道我可以同时打开我的`WPF`应用程序`VS`并`Expression Blend`运行它。
如果我在 EB 中更改颜色按钮，VS 刷新项目，这很好。

我的问题是：我可以在`Expression Blend`（不是所有应用程序都只是按钮）中制作简单的按钮并在不同的`Visual Studio WPF`项目中使用它吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-23T16:16:08.480

我相信这应该是您的答案，实际上，当您在 WPF 、 WP 或 W8 中创建控件时，最简单的方法是右键单击它并单击“MakeIntoUserControl”。当您单击该选项时，您会注意到它将创建相应的 UserControl.xaml 文件。在 Expression Blend 中，您需要构建项目以便一切顺利。当您键入 UserControl 的名称时，您创建的 UserControl 现在将出现在资产中。

再次构建项目并右键单击项目并单击“在 Visual Studio 中编辑” 现在，当您转到 Visual Studio 时，您会注意到相同的用户控件将具有相同的名称。

![Blend 中的 Cutsom 用户控件](../Images/27de608c7374b8e7f9ce3c9182e76b92.png)

![在VS中](../Images/d0abf8f1998cc4f7c45cafe5de355f0d.png)

我希望它对你有用。

问候。

# java - 服务器端 Java 错误

> ID：13550810
> 
> 赞同：0
> 
> 时间：2012-11-25T12:01:10.350
> 
> 标签：java, mobile

我制作了一个程序，它从电话（Java ME）向服务器发送“测试”消息。但是在尝试调用`closeCrap()`服务器端的方法时出现错误。

错误日志：

> 在 pagr.main(pagr.java:7) 的 server.startRunning(server.java:55)
> 的 server.closeCrap(server.java:106)的线程“main”java.lang.NullPointerException中的异常

服务器.java

```
import java.io.*;
import java.net.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
public class server extends JFrame{
  private static final long serialVersionUID = 1L;
  private JTextField userText;
  private JTextArea chatWindow;
  private ObjectOutputStream output;
  private ObjectInputStream input;
  private ServerSocket server;
  private Socket connection;
  // constructor
  public server(){
    super("CP Chat");
    userText = new JTextField();
    userText.setEditable(false);
    userText.addActionListener(
      new ActionListener(){
        public void actionPerformed(ActionEvent event){
          sendMessage(event.getActionCommand());
          // nusius teksta ivesta
          userText.setText("");
        }
      }
    );
    add(userText,BorderLayout.NORTH);
    chatWindow = new JTextArea();
    chatWindow.setEditable(false);
    add(new JScrollPane(chatWindow));
    setSize(300,150);
    setVisible(true);
  }
  // set up and run a server
  public void startRunning(){
    try{
      // 1 arg - jungiasi prie port (gali buti betkoks)
      //2 - backLog (kiek zmoniu gali prisijungti prie port)
      server = new ServerSocket(6789,100);
      while(true){
        try{
          waitForConnection();
          setupStreams();
          whileChatting();
        }catch(EOFException exc){ // end of stream
          showMessage("\n Server ended the connection!");
        }finally{
          closeCrap();
        }
      }
    }catch(IOException ex){
      ex.printStackTrace();
    }
  }
  // wait for connection, then display connection info
  private void waitForConnection() throws IOException{
    showMessage("Waiting for someone to connect... \n");
    connection = server.accept();
    showMessage("Now connected to " + connection.getInetAddress().getHostName());
  }
  // get stream to send and receive data
  private void setupStreams() throws IOException{
    //creating path way to connect to another computer.
    output = new ObjectOutputStream(connection.getOutputStream());
    // flushes any left overs to the other pc while sending messages
    output.flush();
    input = new ObjectInputStream(connection.getInputStream());
    showMessage("\n Streams are now setup!\n");
  }
  //during the chat conversation
  private void whileChatting() throws IOException{
    String message = "You are now connected!";
    sendMessage(message);
    ableToType(true);
    do{
      try{
        // gauna atsiunciama zinute
        message = (String) input.readObject();
        showMessage("\n" + message);
      }catch(ClassNotFoundException notFound){
        showMessage("\n idk wtf that user send!");
      }
    }while(!message.equals("CLIENT - END"));
  }
  //close Streams and Sockets after youre done chatting
  private void closeCrap(){
    showMessage("\n Closing connection... \n");
    ableToType(false);
    try{
      output.close();
      input.close();
      connection.close();
    }catch(IOException except){
      except.printStackTrace();
    }
  }
  private void sendMessage(String message){
    try{
      // sends a message to client
      output.writeObject("SERVER - " + message);
      // if something is left - flush those bytes to the client.
      output.flush();
      showMessage("\n SERVER - " + message);
    }catch(IOException e){
      chatWindow.append("\n ERROR: dude i cant send that message");
    }
  }
  // updates chat window
  private void showMessage(final String text){
    // creates a thread that will update a part of GUI
    SwingUtilities.invokeLater(
      new Runnable(){
        public void run(){
          //add message to the end of the document
          //and it updates the chat window
          chatWindow.append(text);
        }
      }
    );
  }
  // let the user type something in the text field
  // final type - cant be modified
  private void ableToType(final boolean tof){
    SwingUtilities.invokeLater(
      new Runnable(){
        public void run(){
          userText.setEditable(tof);
        }
      }
    );
  }
} 
```

play.java（手机端）

```
import java.util.Random;
import java.io.*;
import javax.microedition.io.*;
import javax.microedition.lcdui.Graphics;
import javax.microedition.lcdui.Image;
import javax.microedition.lcdui.game.GameCanvas;
import javax.microedition.lcdui.game.Sprite;
public class play extends GameCanvas {
  StreamConnection connection;
  PrintStream output;
  InputStream in;
  public play(){
    super(false);
    setFullScreenMode(true);
  }
  public void start(){
    try{
      connection();
      setupStreams();
    }catch(EOFException ex){
    }catch(IOException exc){
      exc.printStackTrace();
    }finally{
      closeCrapi();
    }
  }
  private void connection() throws IOException{
    StreamConnection connection = (StreamConnection)Connector.open("socket://127.0.0.1:6789");
    in = connection.openInputStream();
  }
  private void setupStreams() throws IOException{
    PrintStream output = new PrintStream(connection.openOutputStream());
    output.println("Test");
    output.flush();
  }
  private void closeCrapi(){
    try{
      output.close();
      in.close();
      connection.close();
    }catch(IOException ex){}
  }
} 
```

**编辑：**我更改了用户 Endox 告诉我的内容，但出现错误：

```
java.net.SocketException: Connection reset by peer: socket write error
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(Unknown Source)
    at java.net.SocketOutputStream.write(Unknown Source)
    at java.io.ObjectOutputStream$BlockDataOutputStream.drain(Unknown Source)
    at java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(Unknown Source)
    at java.io.ObjectOutputStream.<init>(Unknown Source)
    at server.setupStreams(server.java:75)
    at server.startRunning(server.java:50)
    at pagr.main(pagr.java:7)
Exception in thread "main" java.lang.NullPointerException
    at server.closeCrap(server.java:107)
    at server.startRunning(server.java:56)
    at pagr.main(pagr.java:7) 
```

EDIT2 我在关闭废话方法中添加了 if 语句：在关闭输出之前，它会检查此对象是否不为空。新错误：

```
java.net.SocketException: Software caused connection abort: recv failed
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(Unknown Source)
    at java.net.SocketInputStream.read(Unknown Source)
    at java.io.ObjectInputStream$PeekInputStream.read(Unknown Source)
    at java.io.ObjectInputStream$PeekInputStream.readFully(Unknown Source)
    at java.io.ObjectInputStream$BlockDataInputStream.readShort(Unknown Source)
    at java.io.ObjectInputStream.readStreamHeader(Unknown Source)
    at java.io.ObjectInputStream.<init>(Unknown Source)
    at server.setupStreams(server.java:77)
    at server.startRunning(server.java:50)
    at pagr.main(pagr.java:7) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:08:39.937

在这个循环中：

```
while(true){
        try{
                waitForConnection();
                setupStreams();
                whileChatting();
        }catch(EOFException exc){ // end of stream
                showMessage("\n Server ended the connection!");
        }finally{
                closeCrap();
        }
} 
```

如果`waitForConnection()`抛出`EOFException`你直接去`finally`阻止（在显示消息之后）。`setupStreams()`没有要调用的更改，因此`NullPointerException`在此行（内部`closeCrap()`）中导致：

```
output.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T14:49:33.250

**编辑3：**

```
output = new ObjectOutputStream(connection.getOutputStream()); 
```

从跟踪看来，那条线扔了一个`Socket Exception`，但我不知道为什么。所以你应该对这部分做点什么。`NullPointerException`是 的结果`SocketException`。

**EDIT2：**在以下位置更改此部分`server.java`：

```
try{
   waitForConnection();
   setupStreams();
   whileChatting();
}catch(EOFException exc){ // end of stream
   showMessage("\n Server ended the connection!");
}finally{
   closeCrap();
} 
```

至：

```
try{
       waitForConnection();
       setupStreams();
       whileChatting();
    }catch(IOException exc){ // end of stream
       exc.printStackTrace();  
       showMessage("\n Server ended the connection!");
    }finally{
       closeCrap();
    } 
```

并在此处粘贴堆栈跟踪，也许我们可以进行更好的调试。:)

**编辑：**这与`play.java`, 仍然是一个问题。

抛出是因为您在这些`NullPointer Exception`方法中定义了两个局部变量（连接、输出）：

```
private void connection() throws IOException{
    StreamConnection connection = (StreamConnection)Connector.open("socket://127.0.0.1:6789");
    in = connection.openInputStream();
  }
private void setupStreams() throws IOException{
    PrintStream output = new PrintStream(connection.openOutputStream());
    output.println("Test");
    output.flush();
} 
```

在该`closeCrapi()`方法中，您使用 2 个仍然是空引用的类成员：

```
 public class play extends GameCanvas {
      StreamConnection connection;
      PrintStream output;
      InputStream in;
...
private void closeCrapi(){
    try{
      output.close();
      in.close();
      connection.close();
    }catch(IOException ex){}
  } 
```

`connection()`所以不要介意和`setupStreams()`方法中发生了什么，在`closeCrapi()`您尝试调用两个`null`引用（连接，输出）的方法的方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T12:49:16.807

问题可能是由in 中的`setUpStreams`方法引起的`Server.java`。线

```
output = new ObjectOutputStream(connection.getOutputStream()); 
```

根据java规范`ObjectOutputStream`可能会抛出异常。

```
public ObjectOutputStream(OutputStream out)
                   throws IOException 
```

这可能导致您`output`为空。

# php - 如何在 Jquery 和 PHP 中连接字符串

> ID：13550812
> 
> 赞同：3
> 
> 时间：2012-11-25T12:01:50.783
> 
> 标签：php, jquery, string, concatenation

在下面的代码中，如何将变量连接`c`到字符串`name`，以便 PHP 函数`foo()`实际读取`foo('name1')`，因为`c`在这种情况下的值为`1`？

```
$(function(){

var c = 1;

$('#foo').click(function() {
    $('#bar').append('<div style="color:red">\n\
                        Name:<?=foo('name')?>\n\
                    </div>');   
    c++;
    });
}); 
```

**编辑：**

所做的只是根据的值`foo()`返回字符串（例如，`name1`或） 。我真正需要的只是这样的东西，但它不起作用。`name2``c``<?=foo('name' + c)?>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T12:06:21.157

PHP 发生在服务器端，而 javascript 发生在客户端，所以你实际上不能这样做。如果要使用在 javascript 中更新的值调用的 php 方法的结果，则必须使用 ajax。像这样的东西：

```
var c = 1;

$('#foo').click(function() {
    $.ajax({
        url: 'something.php?c=' + c,
        success: function(name) {
            $('#bar').append('<div style="color:red">\n\
                Name:' + name + '\n\
            </div>');   
        }
    });

    c++;
}); 
```

在这里，`something.php`将接受单个请求参数“c”，并且应该只输出：

```
<?= foo('name' . $_GET['c']) ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T12:05:24.270

使用连接运算符`+`，而不是

```
Name:<?=foo('name')?>\n\ 
```

写：

```
Name:<?=foo('name' + i)?>\n\ 
```

但是，这仍然无法如您所愿。因为 PHP 在服务器端，您需要从 JavaScript 向服务器发出请求。而且由于它是 PHP 使 JS 代码变质，所以你需要重新设置你的应用程序逻辑。

**编辑**

代替

```
$('#bar').append('<div style="color:red">\n\
                    Name:<?=foo('name')?>\n\
                </div>'); 
```

尝试

```
$('#bar').append('<div style="color:red">\n\
                    Name:<?=foo(\'name\'' + i + ')?>\n\
                </div>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T12:08:15.600

这是不可能的，因为 javascript 是在客户端执行的，因此不能与 php 混合。您可以做的是使用 ajax 来实现服务器 <-> 客户端通信。

```
$.ajax({
  type: 'POST',
  url: "your_php_file.php", 
  data: {"counter": c},
  success: function (val) { 
      $('#bar').append('<div style="color:red">Name:' + val + '</div>');   
  }
}); 
```

所以这样，你会在服务器端调用函数，比如`foo($_POST['counter'])`.

希望这可以帮助。

# django - 如何覆盖 AutoSlugField？

> ID：13550818
> 
> 赞同：1
> 
> 时间：2012-11-25T12:02:32.053
> 
> 标签：django, django-models, django-views

我想覆盖记录的 slug 字段。在我看来，加载 add_post 页面时，我会自动创建一条新记录。像：

```
def add_post(request):
    post=Post(owner=request.user)
    post.save()
    post_id = post.id
    if request.method == 'POST':
        form = add_form(request.POST)
        if form.is_valid():
            form_title = form.cleaned_data['title']
            #other fields

            updated_post = Post.objects.get(id=post_id)
            updated_post.title = form_title
            #save other fields...
            updated_post.save() 
```

我的models.py中有slug_field：

```
class Post(models.Model):
    owner = models.ForeignKey(User)
    title = models.CharField(max_length=100, blank=True)
    #other fields...
    slug = AutoSlugField(populate_form='title', unique=True) 
```

在我的views.py之后`post = Post(owner=request.user)`；它创建一个具有默认 slug 字段名称的记录，因为还没有标题值。

但是，如您所见，我更新了该帖子（添加标题和其他字段）。但是 slug 字段不会自行更新。它仍然是默认的 slug 名称。

我怎样才能解决这个问题？如果不可能，我将从我的项目中删除 AutoSlugField 并仅使用 post id。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T12:37:10.400

来自 AutoSlugField 文档：

> always_update – 布尔值：如果为 True，则每次保存模型实例时都会更新 slug。小心使用，因为酷 URI 不会改变（并且 slug 通常是对象 URI 的一部分）。请注意，即使该字段是可编辑的，当激活此选项时，任何手动更改都将丢失。

所以这应该工作：

```
slug = AutoSlugField(populate_form='title', always_update=True, unique=True) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-12T20:37:13.750

更好的文档是自己的代码：

[http://django-command-extensions.googlecode.com/svn/trunk/django_extensions/db/fields/init **.py** _](http://django-command-extensions.googlecode.com/svn/trunk/django_extensions/db/fields/__init__.py)

> slug = AutoSlugField(populate_from='title', overwrite=True, unique=True)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-08T17:46:27.197

使用此代码：

```
slug = AutoSlugField(max_length=500, populate_from='name', null=True, blank=True, always_update=True, unique=True) 
```

# vba - 用于验证选定非空白单元格的宏 - Excel VBA

> ID：13550819
> 
> 赞同：0
> 
> 时间：2012-11-25T12:02:35.140
> 
> 标签：vba, excel

我正在尝试在每个单元格中添加分隔符。

但是这段代码在所有单元格上添加分隔符是否为空，我只在非空单元格上需要分隔符。

你能帮我吗，tks很多

```
 Dim Range As Object, Line As Object, Cell As Object
    Dim StrTemp, chemin As String
    Dim Separateur As String

    Separateur = ","
    'WBDest.Activate
    Set Range = Worksheets(1).Columns(i)
    'Set Range = Worksheets(1).Columns(i).SpecialCells(xlCellTypeBlanks) ' Not work

    Open "C:\export\" + Str(i) + ".csv" For Output As #1
    For Each Line In Range.Rows
        StrTemp = ""
        For Each Cell In Line.Cells
            StrTemp = StrTemp & CStr _
            (Cell.Text) & Separateur
        Next
        Print #1, StrTemp '= " "
    Next
    Close 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:13:14.573

您可以尝试验证非空白的单元格值吗？

```
For Each Line In Range.Rows
    StrTemp = ""
    For Each Cell in Line.Cells
       If Cell.Text <> "" then                     'validate for non-blanks
            StrTemp = StrTemp & CStr _
            (Cell.Text) & Separateur
       End if
    Next
        Print #1, StrTemp '= " "
 Next 
```

# java - 方法中的 Java 数组

> ID：13550821
> 
> 赞同：3
> 
> 时间：2012-11-25T12:02:47.763
> 
> 标签：java

我正在制作一种采用数组列表并找到数字平均值的方法。我知道我的方法有效，因为我只是将它从我的主要方法移到了“平均”方法。我只是在让数组使用该方法时遇到问题。

我不确定通过调用该方法是否错了`average(a);`，或者是因为该方法写为`public static void average(double[] a){`

有人能指出我正确的方向吗？

```
public class Ass10{

    public static void main(String[] args) {
        System.out.println("asdf");
        int a[] = {1, 2, 3,4};
        average(a);
      }

    public static void average(double[] a){
        int sum = 0;

        for (int counter = 0; counter<a.length;counter++){
            sum += a[counter];
        }
                System.out.println(sum/a.length)

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:06:40.550

您可以尝试更改`public static void average(double[] a)`为`public static void average(int[] a)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T12:09:25.933

`int`和`double`在 Java 中是原语而不是对象。此外，它们的数组不是协变的。（数组的协方差意味着如果 A 扩展 B，则 A[] 扩展 B[]）

因此，您不能在需要的`double[]`地方`int[]`使用。这应该做`public static void average(int[] a){`

其次，`sum += a[counter];`会导致精度损失 as `sum`is type`int`和`a`is of type`double`

# android - 判断用户离开提示是否是由于单击主页按钮

> ID：13550828
> 
> 赞同：0
> 
> 时间：2012-11-25T12:03:56.673
> 
> 标签：android

有没有办法知道 onUserLeaveHint 是由于主页按钮还是一些新意图引起的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:06:41.557

正如在[此问题](https://stackoverflow.com/a/8749061/544198)中所述，如果发生以下情况之一，则会进行调用。

1.  用户按下后退按钮。
2.  用户按下主页按钮。
3.  用户点击信号器栏。

如果你想从 home 按下来区分 backpressed，你可以设置一个 onBackPressed 序列，通过向你的活动添加适当的函数：

```
void onBackPressed(){
  //Do Something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:43:55.980

您需要缓存可能使用户离开活动的所有可能事件，例如外部应用程序的新意图，并且当用户离开提示发生时检查此事件之一之前是否发生过，如果是，它不是主页按钮，如果不是，并且你跟踪后面，而不是它的主页按钮。

# django-views - 有人可以解释 Django 中 HttpResponse 和 HttpResponseRedirect 之间的区别吗？

> ID：13550829
> 
> 赞同：0
> 
> 时间：2012-11-25T12:04:06.970
> 
> 标签：django-views

我没有得到 HttpResponse n HttpResponseRedirect 之间的区别

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T12:14:24.180

`HttpResponseRedirect`旨在发送 3xx HTTP 代码并重定向到另一个 URL（即，响应是重定向标头）。它实际上是 的子类`HttpResponse`，可以用作重定向的快捷方式。

`HttpResponse`, 另一方面是主要的响应对象，您可以在其中设置标题/正文等（并且是您通常用于发送渲染模板等的东西 - 好的，render_to_response 也可以，但它是一个快捷功能）。

# c# - Process.Start(link) 省略部分链接

> ID：13550837
> 
> 赞同：2
> 
> 时间：2012-11-25T12:04:38.117
> 
> 标签：c#, hyperlink, process.start

> **可能重复：**
> [使用查询字符串打开 html 文件](https://stackoverflow.com/questions/13545871/opening-html-file-with-query-string)

我正在使用 c# 编写一个简单的控制台应用程序，并且正在尝试使用“name”参数打开一个本地 html 文件。现在我正在使用 const url (用于测试...): "file:///D:/index.html?name=bob"

代码很简单：

```
class Program
    {
        static void Main(string[] args)
        {
            string link = @"file:///D:/index.html?name=bob";
            Process.Start(link);
        }
    } 
```

但它会打开带有链接的浏览器：“file:///D:/index.html”。有谁知道为什么它省略了“名称”参数以及如何修复它？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T12:16:55.117

如果您不介意绑定到特定浏览器（而不是系统中定义的浏览器），则可以使用：

```
Process.Start("iexplore.exe", @"file:///D:/index.html?name=bob") 
```

否则我猜你可以推断出相关的程序（可能通过[注册表](http://msdn.microsoft.com/en-us/library/aa767914%28VS.85%29.aspx)）并采用相同的技术。

# jquery-mobile - jQuery移动单选按钮控制组流体宽度

> ID：13550838
> 
> 赞同：0
> 
> 时间：2012-11-25T12:04:42.167
> 
> 标签：jquery-mobile, radio-button

为了在 jquery mobile 中创建流畅的水平单选按钮，我必须覆盖哪些类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T13:14:45.243

“流体水平单选按钮”是什么意思？

也许[这](http://brooky.cc/2011/04/23/jquery-mobile-cheat-sheet/)可以帮助你，它是 JQM 正文元素的备忘单。

这是一个例子：

```
<div data-role="fieldcontain">
<fieldset data-role="controlgroup" data-type="horizontal">
    <legend>Choose:</legend>
        <input type="radio" name="radio" id="radio1" value="1" checked="checked" />
        <label for="radio1">option 1</label>
        <input type="radio" name="radio" id="radio2" id="radio2" value="2"  />
        <label for="radio2">option 3</label>
        <input type="radio" name="radio" id="radio3" id="radio3" value="3"  />
        <label for="radio3">option 4</label>
</fieldset>
</div> 
```

它看起来像这样：

![在此处输入图像描述](../Images/56a902a48ba3250ef2912aa72469b949.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T17:03:58.240

```
<fieldset data-role="controlgroup"  data-type="horizontal"  >
        <input type="radio" name="nemprunteurs" id="nemprunteurs1" value="1"  checked="checked">
        <label for="nemprunteurs1">1 emprunteur</label>
         <input type="radio" name="nemprunteurs" id="nemprunteurs2" value="1"  >
       <label for="nemprunteurs2">2 emprunteurs</label> 
</fieldset> 
```

解决

```
#blocemprunteur  .ui-controlgroup-controls { width: 100% !important; }
#blocemprunteur .ui-radio{width:50% !important;} 
```

# css - 字体系列的 Chrome 错误：“无效的属性值”

> ID：13550841
> 
> 赞同：9
> 
> 时间：2012-11-25T12:05:14.060
> 
> 标签：css, google-chrome, hebrew

以下 CSS 在 IE 和 FireFox 上运行良好，但 chrome 将其标记为“无效的属性值” -

```
TD.desc1_hp { font-family: Arial,Arial (Hebrew),David (Hebrew);  } 
```

任何提示为什么？

谢谢，

阿塔拉

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-25T12:10:16.427

字体应该用双引号括起来。带括号的字体似乎需要这样。这有效：

```
TD.desc1_hp { font-family: Arial, "Arial (Hebrew)", "David (Hebrew)";  } 
```

# java - Java - 将符号链接的目标复制到另一个目标

> ID：13550850
> 
> 赞同：0
> 
> 时间：2012-11-25T12:07:14.777
> 
> 标签：java, file, symlink

在过去的五个月里，我一直在世界旅行中拍摄照片，最后把它们都整理好了。虽然我保存了原始图片的符号链接并将它们放在一个单独的文件夹中（符号链接）。我一直在寻找不同的方法来访问符号链接的目标（真实图片）并将它们复制到另一个目录以进行进一步处理。现在由于显然没有软件支持符号链接，我在想为什么不为自己编写一个小脚本来复制目标。

我整天都在寻找不同的方法，例如使用 Files、FileUtils、file.getCanonical/Absolute Path，但它们都不起作用。类文件只是忽略符号链接目标。FileUtils 也是如此。file.getCanonical/AbsolutePath() 也看不到目标路径。当我比较两种方法的结果时，它们是相同的！没有不同！

你知道我可以访问符号链接的目标路径的方法吗？还没找到方法。在软件或编程中。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T13:53:41.100

我假设您正在谈论通过`symlink`(2) 在 API 级别或`ln -s`命令创建的 Unix 样式的符号链接。

如果您将文件 A 作为文件 B 的符号链接，并且您想访问该文件 B 的内容，只需打开文件 A 并像往常一样处理它。您将处理文件 B 的内容。文件 A 是文件 B 的符号链接这一事实对您的程序来说是透明的。

# oop - 一起使用装饰器和工厂来添加属性或专门化一个对象

> ID：13550855
> 
> 赞同：0
> 
> 时间：2012-11-25T12:08:02.153
> 
> 标签：oop, design-patterns, decorator, factory-pattern, dataabstract

我是 OOP 和设计模式的新手。

我有一个简单的应用程序来处理表、列（属于表）、行（属于列）和值（属于行）的生成。这些对象中的每一个都可以是 Property 的集合，而 Property 又被定义为枚举。

它们都是接口：我使用工厂来获取这些产品的具体实例。

现在我面临扩展这些类的问题。假设我需要另一个名为“SpecialTable”的产品，它又具有一些特殊属性或新方法，如“getSomethingSpecial”或一组扩展的属性。唯一的方法是扩展/专门化我的所有元素（即构建一个 SpecialTableFactory、一个 SpecialTable 接口和一个 SpecialTableImpl 具体）？假设我仍然想使用像 addRow(column, name) 这样不需要继承的标准方法......

我不喜欢继承工厂和接口的想法，但由于 SpecialTable 有更多方法，我猜它不能共享同一个工厂。我错了吗？

另一个问题：如果我需要在运行时定义产品属性（升级为 SpecialTable 的表），我想我应该使用装饰器。是否有可能（以及如何）结合工厂和装饰设计？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T08:07:39.810

SpecialTable 需要自己的创建机制，所以是的，它需要自己的工厂方法（或工厂类，如果您要创建一组必须相关的项目）。

或者：您可以为您的工厂使用设计模式策略。在这种情况下，您将在运行时使用所需的创建机制配置工厂。

至于剩下的问题：

向类添加功能的三种最常见方法是：

1.  子类化
2.  设计模式适配器/代理，可能与自省相结合。类别确实是这种方法的一个特例。
3.  设计模式访客

您已经考虑过子类化。

设计模式 Adaptor/Proxy 基本上是这样的：创建一个具有所需接口的新类，并通过调用现有类的实例来实现其部分（或全部）方法。

对于设计模式访问者，您在某种意义上将代理与“双重调度”结合起来。您添加的函数驻留在可以调用现有类的实例的对象中。请参阅[访客模式 - 添加新的 ConcreteElement 类很难吗？](https://stackoverflow.com/questions/11241761/visitor-pattern-adding-new-concreteelement-classes-is-hard/11243391#11243391)例如。

战略：

它是这样工作的：

```
public interface MyStrategyInterface {
  public void doWork();
}

public class MyStrategyAccessPoint implements MyStrategyInterface {

  private MyStrategyInterface current;

  public MyStrategyAccessPoint(final MyStrategyInterface initial) {
    current = initial;
  }

  public void doWork() {
    current.doWork();
  }

  public void setStrategy(final MyStrategyInterface newCurrent) {
    current = newCurrent;
  }
} 
```

如您所见，您现在可以更改在运行时使用的 MyStrategyInterface 的实际实现。这种模式通常与 Singleton 结合使用，使 MyStrategyAccessPoint 及其 doWork 方法成为静态的。

# jsf - JSF 2.0 f:ajax 提交 java.lang.IllegalStateException 错误：参数处理失败

> ID：13550858
> 
> 赞同：2
> 
> 时间：2012-11-25T12:08:10.423
> 
> 标签：jsf

我使用 JBOSS AS-7.1.1 Final 和 Seam 3.1.0 Final 开发 Web 应用程序。我刚开始工作，但遇到以下问题：我有一个带有以下代码的提交按钮：

```
 <h:commandButton action="#{projectController.create}" value="Create Project" styleClass="greyishBtn submitForm">
        <f:ajax execute="@form" event="click" render="tblObject"/>
    </h:commandButton> 
```

当我点击按钮时，出现以下错误：

```
 java.lang.IllegalStateException error: Parameters processing failed. 
```

该动作不是触发器，但如果我删除标签，一切正常，只是非 ajax。

这是后端代码：

```
 @Named
@RequestScoped
@Model
public class ProjectController implements Serializable {

/**
 * 
 */
private static final long serialVersionUID = 3572096930093985831L;

@Inject private EntityManager em;
@Inject private Logger log;
//@Inject private FacesContext facesContext;
@Inject private Event<Project> projectEventSrc;

private String projectId;

@Produces
@Named
private Project project;

private Query query;

private List<Project> projectList;
private List<ProjectDTO> projectDtoList;

public ProjectController() {
    // Default constructor.
}

@PostConstruct
public void postInit(){
    // Init project
    project = new Project();

    // Get project list.
    query = em.createQuery("select project from Project project");
    projectList = query.getResultList();
    projectDtoList = new ArrayList<ProjectDTO>();

    for(Project project : projectList){
        ProjectDTO projectDTO = new ProjectDTO();
        projectDTO.setProjectId(project.getProjectId());
        projectDTO.setProjectName(project.getProjectName());
        projectDTO.setProjectStatus(23.4d);
        // Add to list.
        projectDtoList.add(projectDTO);
    }

}

public void loadProject(){
    // Load project here based on project id.
    if(projectId == null){
        // Do nothing.
        return;
    }

    // Load from DB.
    project = em.find(Project.class, projectId);
}

/**
 * Create new project.
 * @throws Exception
 */
public void create() throws Exception{
    log.info("Creating: " + project.getProjectName());
    project.setProjectId(UUID.randomUUID().toString());
    em.persist(project);
    //facesContext.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO, "Registered!", "Registration successful"));
    projectEventSrc.fire(project);

    // Reinit.
    project = new Project();
}

public void setProjectId(String projectId) {
    this.projectId = projectId;
}

public String getProjectId(){
    return this.projectId;
}

public List<Project> getProjectList() {
    return projectList;
}

public void setProjectList(List<Project> projectList) {
    this.projectList = projectList;
}

public List<ProjectDTO> getProjectDtoList() {
    return projectDtoList;
}

public void setProjectDtoList(List<ProjectDTO> projectDtoList) {
    this.projectDtoList = projectDtoList;
} 
```

}

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:39:23.867

这是 JBoss AS 7.1.1 中的一个错误，仅在使用 IE 浏览器时才会出现。另见问题[AS7-5143](https://issues.jboss.org/browse/AS7-5143)。

到目前为止，唯一的解决方案似乎是降级到 JBoss AS 7.1.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:24:29.923

我遇到了同样的问题，作为一种解决方法，如果您愿意包含第 3 方库，您可以改用 PrimeFaces commandButton。它默认使用 ajax，这似乎有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:23:04.747

就我而言，出现问题是因为我的一个自定义组件在没有属性“名称”的情况下被渲染。在我将属性包含在编码方法中后，问题就消失了。老板。7.1.1/jsf 2.1.10/Eclipse 朱诺

# php - 从数据库中选择价格到单选按钮

> ID：13550860
> 
> 赞同：1
> 
> 时间：2012-11-25T12:08:16.820
> 
> 标签：php, mysql

我正在尝试使用此处制作表格，`php`但我被卡住了！
我制作了一个表格，将所有类型的`food`课程分配给单选按钮：

```
<form action="proberen.php" method="post">

<label>Klantnummer</label>
<input type="text" name="txtklantnr" /><br/>

<label>Voornaam</label>
<input type="text" name="txtfname" /><br/>

<label>Achternaam</label>
<input type="text" name="txtlname" /><br/>

<br/>
<br/>
---------------------
<br/>
Menu
<br/>
---------------------
<br/>
<br/>
<label>first dish</label><br/><br/>

<label>Soup</label>
<input type="radio" name="txtvoor"  checked="checked" value="soup" />
<label>8 euro</label><br/>

<label>Slaatje</label>
<input type="radio" name="txtvoor" value="sla"  />
<label>6 euro</label><br/><br/>

<label>main dish</label><br/><br/>

<label>Kip met Friet</label>
<input type="radio" name="txthoofd"  checked="checked" value="kip" />
<label>12euro</label><br/>

<label>Worst met Patat</label>
<input type="radio" name="txthoofd" value="worst" />
<label>10euro</label><br/><br/>

<label>Dessert</label><br/><br/>

<label>Ijs</label>
<input type="radio" name="txtna"  checked="checked" value="ijs" />
<label>4euro</label><br/>

<label>Taart</label>
<input type="radio" name="txtna" value="taart" />
<label>5 euro</label><br/><br/>

<input type="submit" value="Bereken Totaal" />

</form> 
```

我创建了一个包含所有收据的数据库和一个包含所有价格的数据库。
这是我的 php：

```
<?php
$fldklantnr = $_POST["txtklantnr"];

$fldvnaam = $_POST["txtfname"];
$fldanaam = $_POST["txtlname"];

$fldvoor = $_POST["txtvoor"];
$fldhoofd = $_POST["txthoofd"];
$fldna = $_POST["txtna"];

$db = MySql_connect("localhost","root","root");
Mysql_select_db("menutest",$db);

$result=("select * from tblmenu where fldvoor='$fldvoor'");
$resultb=("select * from tblmenu where fldhoofd='$fldhoofd'");
$resultc=("select * from tblmenu where fldna='$fldna'");

$fldtotaal = $resultd + $resulte+$resultf;

    echo "Beste $fldvnaam $fldanaam.<br/>U heeft het volgende besteld:<br/>";
    echo " $fldvoor <br/>"; 
    echo " $fldhoofd <br/>" ;
    echo " $fldna <br/>" ;
    echo "Het totaal bedrag is $fldtotaal euro. <br/>Bedankt voor uw bestelling.";

$sql="insert into tblmenu values('$fldklantnr','$fldvnaam','$fldanaam','$fldvoor','$fldhoofd','$fldna','$fldtotaal')";

MySql_query($sql,$db);

?> 
```

现在我想计算订购菜单的总和：价格在我的`tblprijzen`，我尝试了这样的事情：

```
if ($result==soup){
    $resultd=("select *from tblprijs where fldsoup='fldsoup'");
}
else{
    $resultd=("select *from tblprijs where fldslaatje='fldslaatje'");
}

if ($resultb==kip){
    $resulte=("select *from tblprijs where fldkip='fldkip'");
}
else{
    $resulte=("select *from tblprijs where fldworst='fldworst'");
}

if ($resultc==ijs){
    $resultf=("select from tblprijs where fldijs='fldijs'");
}
else{
    $resultf=("select from tblprijs where fldtaart='fldtaart'");
}

$totaal = $resultd + $resulte + $resultf; 
```

但它没有做任何事情:(

尝试完成这项工作超过 2 天，如果我明天通过那次考试，我会很高兴 :)

# php - 简单的 PHP 脚本创建错误

> ID：13550861
> 
> 赞同：0
> 
> 时间：2012-11-25T12:08:27.383
> 
> 标签：php, html, include, server-side-includes, error-log

让我让它变得简单明了：

可能和其他人一样，我在服务器上使用简单的包含来处理各种事情，例如顶部菜单或侧面菜单等等......

这是我的代码示例

```
<?php $number = 1; include("/var/www/vhosts/MyWebSite.com/httpdocs/trial/includes/header.php");?> 
```

$number =1 像往常一样根据页面级别定义选项卡的正确选择。

我包含的代码如下：

```
18 <?php $page[$number] = 'selected';?>
19 <!--=================== top navigation ==================-->
20 <nav>
21 <div id="menu">
22 <a href="/Page 1/" class="tab <?php echo $page[1] ?>" title="Page 1">Page 1</a>
23 <a href="/Page 2/" class="tab <?php echo $page[2] ?>" title="Page 2">Page 2</a>
24 <a href="/Page 3/" class="tab <?php echo $page[3] ?>" title="Page 3">Page 3</a>
25 <a href="/Page 4/" class="tab <?php echo $page[4] ?>" title="Page 4">Page 4</a>
26 <a href="/Page 5/" class="tab <?php echo $page[5] ?>" title="Page 5">Page 5</a>
27 <a href="/Page 6/" class="tab <?php echo $page[6] ?>" title="Page 6">Page 6</a>
28 <a href="/Page 3/" class="tab <?php echo $page[7] ?>" title="Page 7">Page 7</a>
29 </div><!-- end .menu -->
30 </nav><!-- end .navigation --> 
```

显然 .selected 的 css 会改变背景颜色以显示您在该特定页面上，因此无需解释。

现在的问题是，我刚刚检查了我的错误日志，该日志恰好下载得很大，并发现了以下错误：

```
[Sat Nov 24 17:50:50 2012] [error] [client 204.11.33.59] PHP Notice:  Undefined offset:  2 in /var/www/vhosts/MyWebSite.com/httpdocs/trial/includes/header.php on line 23
[Sat Nov 24 17:50:50 2012] [error] [client 204.11.33.59] PHP Notice:  Undefined offset:  3 in /var/www/vhosts/MyWebSite.com/httpdocs/trial/includes/header.php on line 24
[Sat Nov 24 17:50:50 2012] [error] [client 204.11.33.59] PHP Notice:  Undefined offset:  4 in /var/www/vhosts/MyWebSite.com/httpdocs/trial/includes/header.php on line 25
[Sat Nov 24 17:50:50 2012] [error] [client 204.11.33.59] PHP Notice:  Undefined offset:  5 in /var/www/vhosts/MyWebSite.com/httpdocs/trial/includes/header.php on line 26
[Sat Nov 24 17:50:50 2012] [error] [client 204.11.33.59] PHP Notice:  Undefined offset:  6 in /var/www/vhosts/MyWebSite.com/httpdocs/trial/includes/header.php on line 27
[Sat Nov 24 17:50:50 2012] [error] [client 204.11.33.59] PHP Notice:  Undefined offset:  7 in /var/www/vhosts/MyWebSite.com/httpdocs/trial/includes/header.php on line 28 
```

我无法理解它的原因。IMO 如果 $number 已经预定义，为什么会出错？

请帮助我以正确的方式做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:12:16.430

您只设置了数组的一个元素，但要检查更多。通过做这个：

```
$a = 3;
$page[$a] = 'selected'; 
```

只有一个索引为 3 的条目存在（除非你在别处设置它，但我假设你没有）。所以这段代码：

```
<?php echo $page[1]; ?> 
```

指不存在的数组元素，因此是警告。如果你的代码的唯一目的`$page`是这个，那么完全摆脱它。消除

```
<?php $page[$number] = 'selected';?> 
```

并更换

```
<?php echo $page[7] ?> 
```

和

如果您出于任何其他原因需要此数组，请替换代码

```
<?php echo $page[7] ?> 
```

和

```
<?php echo isset($page[7]) ? 'selected' : '' ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T12:12:26.087

的索引`$page`未定义。您可以像这样更改代码：

```
echo isset($page[1]) ? $page[1] : ""
//and so on 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T13:36:06.260

在你的 div#menu 中使用这个干净的代码：

```
<?php 
$count = 7;
for($link = 1; $link <= $count; $link++){
    $extraClass = ($link == $number) ? "selected" : "" ;
    echo "<a href='/Page {$link}/' class='tab {$extraClass}' 
               title='Page {$link}'>Page {$link}</a>";
}
?> 
```

# jtable - JTable 中是否有类似 getColumnClass 的方法来设置行特定的数据类型？

> ID：13550862
> 
> 赞同：0
> 
> 时间：2012-11-25T12:08:29.083
> 
> 标签：jtable

我有一个包含两列的 JTable：键名和值。在值列中允许有多种数据类型，如下图所示：

![左边是键，右边是值（一个简单的](../Images/e44a1b03e31069b486f73aed7c9a0191.png)

所以在第 1 列中，我可能在第 1 行有一个布尔值，在第 2 行有一个字符串。但该方法`getColumnClass(...)`只允许我为整个列设置数据类型。

有没有办法设置列行特定的数据类型？

问候，神话

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:02:32.953

同一列不能有两种数据类型。但是对于您的情况，我的建议是使用渲染。

1.  阅读[编辑器和渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)。

2.  将列数据类型定义为包含`JPanel`.

3.  渲染列。您的 Renderer 类将面板返回到该列。它应该有一个`constraint`，基于您应该将组件添加到面板并返回面板。

这个例子展示了如何在这些情况下使用渲染。

```
class PanelCellRenderer extends JPanel implements TableCellRenderer {
public Component getTableCellRendererComponent(final JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
       // row number is used as a constraint.
        if(row == 0) {
            this.add( new JTextField("", 20));
        } else if(row == 1) {
            this.add( new JCheckBox());
        } else if(row == 2) {
            this.add( new JButton());
        } else {
            this.add( new JLabel("Row-4"));
        }
        return this;
   }
} 
```

// 输出：

第一行是一个带有 的面板`JTextField`。同样，第 2、3 行有`JCheckBox`和`JButton`。第 4 行有一个`JLabel`带文本。

![包含差异组件的面板](../Images/da6e880f794d8c8b455637a0ec17489e.png)

**PS：**这只是一个尝试。即使我以前没有这样做过。如果我错了，请纠正我。

# c++ - 错误 C4996：“ctime”：此函数或变量可能不安全

> ID：13550864
> 
> 赞同：11
> 
> 时间：2012-11-25T12:08:58.227
> 
> 标签：c++, compiler-errors, unsafe, ctime

我有一个关于静态源代码分析的大项目，一切都编译成功，除了一件事。我在标题中提供了错误消息。让我感到困惑的一点是，它给出了一条错误消息，说不安全。我认为这应该只是警告，而不是错误。顺便说一句，我使用的是 Visual Studio 2012。这是我在 ctime 中收到错误的代码部分。如果有人可以帮助我克服这个错误，我会很高兴。

```
void CppCheckExecutor::reportProgress(const std::string &filename, const char stage[], const std::size_t value)
{
     (void)filename;

     if (!time1)
         return;

     // Report progress messages every 10 seconds
     const std::time_t time2 = std::time(NULL);
     if (time2 >= (time1 + 10)) {
         time1 = time2;

         // current time in the format "Www Mmm dd hh:mm:ss yyyy"
         const std::string str(std::ctime(&time2));

         // format a progress message
         std::ostringstream ostr;
         ostr << "progress: "
              << stage
              << ' ' << value << '%';
         if (_settings->_verbose)
             ostr << " time=" << str.substr(11, 8);

         // Report progress message
         reportOut(ostr.str());
     }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-25T12:21:23.680

如果您确定代码中没有安全问题，您可以通过`#pragma warning(disable : 4996)`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-25T14:36:39.137

如果您查看[ctime](http://en.cppreference.com/w/c/chrono/ctime)的描述，您会注意到：

> 此函数**返回指向静态数据的指针，**并且不是线程安全的。此外，它还修改了可以与 gmtime 和 localtime 共享的**静态 tm 对象。**POSIX 将此函数标记为已过时，并推荐使用 strftime。
> 
> 对于导致字符串长度超过 25 个字符（例如 10000 年）的 time_t 值，**行为可能未定义**

......有很多事情需要担心。

另一方面，如果您查看[strftime](http://en.cppreference.com/w/c/chrono/strftime)：

> size_t strftime(char* str, size_t count, const char* format, tm* time);
> 
> **返回值**
> 
> 写入 str 指向的字符数组的字节数，不包括成功时的终止 '\0'。如果在可以存储整个字符串之前达到计数，则返回​0​并且内容未定义。

所有参数都是显式的，因此您可以完全控制可能的数据竞争，并且也不存在溢出提供的缓冲区的风险。

虽然这是 C 方式，但 C++ 引入`<chrono>`了特定函数`std::put_time`也可用于将时间输出到流的方式：

```
#include <iostream>
#include <iomanip>
#include <ctime>
#include <chrono>

int main() {
    std::time_t const now_c = std::time();
    std::cout << "One day ago, the time was "
              << std::put_time(std::localtime(&now_c), "%F %T") << '\n';
} 
```

这更好，因为您不再需要担心可能的缓冲区溢出。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-01T08:51:11.317

是的，它应该只是警告，而不是错误。要获得简单的警告而不是错误，请在 VS 项目中禁用 SDL 检查（在配置属性 -> C/C++ -> 常规选项卡中）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-25T14:00:29.560

`std::ctime`不是线程安全的，原因有两个：

*   它可以修改`std::tm`由多个函数共享的类型的全局对象。
*   它修改一个全局`char`数组并返回一个指向该数组的指针。

如果您有其他线程调用`std::gmtime`、`std::localtime`或，则可能发生冲突`std::ctime`。

最好的办法是将调用转换`std::ctime`为调用`std::strftime`. 这与 POSIX 一致，后者认为`ctime`已过时并建议使用 of`strftime`代替。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-04T11:33:01.203

与 2017 年相比：

```
#include "stdafx.h"

#include <iostream>
#include <iomanip>
#include <ctime>
#include <chrono>

int main() {
    std::time_t const now_c = std::time(NULL);
    auto s = std::put_time(std::localtime(&now_c), "%F %T");
    std::cout << s << std::endl;
} 
```

但无论如何你都会收到：

....cpp(31)：警告 C4996：'localtime'：此函数或变量可能不安全。考虑改用 localtime_s。要禁用弃用，请使用 _CRT_SECURE_NO_WARNINGS。详细信息请参见在线帮助。

为了防止你可以使用：

```
errno_t err;
struct tm time_info;
time_t time_create = time(NULL);
localtime_s(&time_info, &time_create);
char timebuf[26];
err = asctime_s(timebuf, 26, &time_info); 
```

纯 C 部分取自 MSDN ......旧方式..

# ios - 使用 b2RevoluteJointDef 时如何设置旋转锚点

> ID：13550870
> 
> 赞同：1
> 
> 时间：2012-11-25T12:09:31.190
> 
> 标签：ios, cocos2d-iphone, box2d, box2d-iphone

演示程序是一次滑动屏幕。身体（在我的例子中，它是一门蓝色的大炮）将相应地旋转。所以我为炮身和地面身体定义了一个旋转关节，但似乎锚设置不正确，导致无法用鼠标关节旋转身体。《国际惯例》，接下来我会上传相关的编码/画面。请看看你是否可以帮助我。

图1：定义相关体，回转关节

图2：触摸回调函数：创建鼠标关节

图3：模拟器画面（从模拟器看，旋转锚点好像不正确）

**由于缺乏“声誉”，我无法在此处上传图片或发布 img 链接，我已在自己的评论中添加了 img 链接。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:52:15.670

首先，在创建旋转关节时，您应该使用 Initialize，如下所示：

```
cannonJointDef.Initialize(groundBody, cannonBody, cannonBody->GetPosition()); 
```

最后一个参数是世界坐标中的锚点。在这种情况下，它将是大炮的中心。

然后，尝试在没有 mouseJoint 的情况下旋转大炮，只需直接设置旋转即可：

```
CGPoint touchVec = ccpSub(touchPos, _cannon.position);
float angle = ccpToAngle(touchVec) - M_PI_2;
cannonBody->SetTransform(cannonBody->GetPosition(), angle); 
```

# java - 如何调试这个？

> ID：13550878
> 
> 赞同：2
> 
> 时间：2012-11-25T12:10:29.063
> 
> 标签：java, java-native-interface

我遇到了这个奇怪的崩溃...在我的 java 应用程序中并通过 jni 使用本地库..但是我无法正常调试它，如果 java 在本地库中崩溃，它将生成崩溃报告 hs_errXXXX.log。在我的应用程序中，它不会生成它，而是简单地崩溃并显示以下错误消息，那么有没有最好的调试方法？

![在此处输入图像描述](../Images/e8ac6cb8f0e863e9ffbdd0f1f1d9338e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:29:44.273

以下是有关如何在 Windows 上调试 JNI 代码的一些资源：

*   使用 NetBeans - [http://vilimpoc.org/research/debug-jni/](http://vilimpoc.org/research/debug-jni/)
*   使用 Eclipse（在 Visual Studio 的帮助下）[http://thisisnotaprogrammersblog.blogspot.com.au/2008/04/debugging-jni-code-using-eclipse-and.html](http://thisisnotaprogrammersblog.blogspot.com.au/2008/04/debugging-jni-code-using-eclipse-and.html)
*   在不使用 Java IDE 的情况下[在 VisualStudio 2003 中调试 JNI 代码。](https://stackoverflow.com/questions/1286536/debugging-the-jni-code-in-visualstudio-2003)

还有其他...

* * *

这个答案是“社区维基”。请随时更新！（或将更新添加为评论）

# javascript - “+变量+”是什么意思？

> ID：13550882
> 
> 赞同：-7
> 
> 时间：2012-11-25T12:11:21.223
> 
> 标签：javascript, jquery

这是什么：'+变量+'是什么意思？

我使用 jQuery append 方法添加一些 DOM 元素：

```
$('#story_pages').append('<div><button value="'+window_value+'" onclick= "reload_to_canvas(this.value)" ><img id="w'+window_value+'", src=white_data_URL, width="100px", height="100px"/> </button></div>'); 
```

实际上，我不知道为什么会这样......如果我只是写

```
value= window_value 
img id= w+window_value 
```

，并使用选择器 **$('#(w+window_value)')** 来查找元素。它必须失败。
这个运算符是什么？'+variable+'
为什么要使用奇怪的符号“'+variable+'”？
我们什么时候应该使用这个符号？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T12:14:01.120

> 这个运算符是什么？'+变量+'

那不是运营商。

`'`结束一个字符串文字

`+`是一个连接运算符。

`variable`是一个字符串变量

`+`是另一个连接运算符。

`'`开始一个新的字符串文字。

> 为什么我们要使用奇怪的符号`"'+variable+'"`？

这两个字符串文字`"`的数据中有字符。

目标是构造这个：

```
'<element attribute="value">' 
```

当值是变量时

```
var myValue = "value";
'<element attribute="' + value + '">' 
```

通过字符串连接从代码生成代码总是会产生丑陋的代码，这相对难以维护。我会用更详细的方法来解决这个问题：

```
var content = $("<div>");
var button = $("<button>");
button.val(window_value);
button.on('click', function() { reload_to_canvas(this.value); });
var img = $('<img>');
img.attr('id', 'w' + window_value);
img.attr('src', 'white_data_URL');
// width and height can be handled in CSS
button.append(img)
content.append(button)
$('#story_pages').append(content) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T12:13:27.357

这是使用变量中的数据动态构造字符串。

```
var x = "World";
var text = "Hello " + x + ", how are you?"; 
```

字符串的文字部分可以用单引号或双引号括起来。每个都做完全相同的事情，但如果字符串本身也包含引号，则两者之一更方便。

```
var text = 'Hello, "' + x + '", how are you?'; // double quotes inside
var phrase = "Hello, '" + x + "', how are you?";  // single quotes inside 
```

行情需要匹配。语法突出显示（如 Stackoverflow 上的此处）使这更容易。

如果您需要字符串中的两种引号，则必须使用反斜杠转义其中一种。

```
var lotsOfQuotes = ' "Gosh, O\'Neill, what have you done", he said. '; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T12:13:19.277

这意味着字符串与变量连接。

# objective-c - UIButton addTarget：调用另一个类的方法

> ID：13550883
> 
> 赞同：1
> 
> 时间：2012-11-25T12:11:28.013
> 
> 标签：objective-c, class, methods, uibutton

代码下面的想法是在两个类之间进行交互。按下按钮时，我想在另一个类中打印一条语句。当我按下按钮时，我无法打印“测试”。

**按钮类.m：**

```
 HjulGenkendelse *hjulRecognizer = [[HjulGenkendelse alloc] init];
    [knap addTarget:hjulRecognizer action:@selector(hjul:) forControlEvents:UIControlEventTouchUpInside]; 
```

**HjulGenkendelse.h**

```
 @interface HjulGenkendelse : UIGestureRecognizer
 - (void)hjul:(UIButton *) sender; 
```

**HjulGenkendelse.m**

```
- (void)hjul:(UIButton *) sender
{
  NSLog(@"Test!");
} 
```

有人对我的问题有任何解决方案吗？

提前感谢:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T12:49:20.753

问题很可能出在这里：

```
HjulGenkendelse *hjulRecognizer;
[knap addTarget:hjulRecognizer action:@selector(hjul:) forControlEvents:UIControlEventTouchUpInside]; 
```

在第一行中，您声明了一个对象。但是您实际上并没有创建对象。因此，如果您使用 ARC，则将其初始化为`nil`. 然后，您将添加`nil`为操作的目标。因为它没有目标，所以没有发送操作。（严格来说这并不正确，但您应该查看以 Nil 为目标的操作和响应者链以了解原因）。

解决方法是简单地将对象实例化为操作的目标。将第一行更改为

```
HjulGenkendelse *hjulRecognizer = [[HjulGenkendelse alloc] init]; 
```

如果 init 不适合 HjulGenkendelse 类，请使用任何合适的初始化程序。

# java - 计算地理点频率

> ID：13550888
> 
> 赞同：0
> 
> 时间：2012-11-25T12:12:31.257
> 
> 标签：java, android, collections, geopoints

我使用谷歌地图在 Android 上执行此操作。

我有一个 GeoPoint 的数组列表。 [GeoPoint API 在这里](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/GeoPoint)。

```
List<GeoPoint> geoPoints; 
```

现在我想检查每个 GeoPoint 的频率。如果有一些相交（因为其中两个相等），我想打印出调试日志。

`Collections.frequency(geoPoints, geoPoints.get(i));`没有返回正确的结果，它不检查两点是否相交......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:06:43.643

最有可能的是，在用手指在地图上绘图时，您永远不会在完全相同的位置上拥有两个地理点。

您可以使用的最简单的方法是测试从一个地理点投影坐标到另一个的距离，如果该距离小于阈值，则将其视为同一点。

**例子**

```
projection.toPixels(geoArrList.get(i), pointToTest);

Point p1 = new Point();
for(int i=0; i<geoArrList.size(); i++){
    projection.toPixels(geoArrList.get(i), p1);
    int squareDistance = ((pointToTest.x - p1.x) * (pointToTest.x - p1.x) +
        (pointToTest.y - p1.y) * (pointToTest.y - p1.y));
    if(squareDistance  < THRESOULD){
        //same point
    }
} 
```

问候。

# sql - 使用 INNER JOIN sqlplus 时删除

> ID：13550896
> 
> 赞同：2
> 
> 时间：2012-11-25T12:13:29.463
> 
> 标签：sql, oracle, inner-join, sqlplus

我一直在努力弄清楚如何从 RENTALLINE_1 中的 RENTALLINE_ID 中删除行，然后从 RENTAL_1 中删除 RENTAL_ID。我有 select 语句，可以找到我要删除的确切值。它会查找超过 3 年的记录。我正在使用带有命令行界面的 SQLPlus。

```
select rentalline_1.rentalline_ID,
       rentalline_1.tool_store_id,
       rentalline_1.rental_id,
       rentalline_1.qty,
       rental_1.datein
from rental_1
  inner join rentalline_1 on rental_1.rental_id = rentalline_1.rental_id
where MONTHS_BETWEEN (SYSDATE, DATEIN) > (36) 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:34:32.973

您可以向数据库添加约束吗？如果您有一个外键约束，例如：

```
ALTER TABLE rentalline_1 ADD CONSTRAINT fk_rental FOREIGN KEY (rental_id) REFERENCES rental_1 (rental_id) ON DELETE CASCADE; 
```

然后删除`rental_1`表中的行将导致相应的行`rentalline_1`被自动删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T12:26:37.743

我无法在这里测试 oracle 数据库，但我希望

```
DELETE rental_1, rentalline_1
from rental_1
  inner join rentalline_1 on rental_1.rental_id = rentalline_1.rental_id
where MONTHS_BETWEEN (SYSDATE, DATEIN) > (36) 
```

你也可以试试看

```
DELETE from
( SELECT * 
from rental_1
  inner join rentalline_1 on rental_1.rental_id = rentalline_1.rental_id
where MONTHS_BETWEEN (SYSDATE, DATEIN) > (36) ) 
```

# jquery - 在叠加作品中显示隐藏的 div 但没有样式

> ID：13550904
> 
> 赞同：1
> 
> 时间：2012-11-25T12:14:47.277
> 
> 标签：jquery, css

首先我是自学的。

我正在使用 fancybox 来显示一个隐藏的`div`，它工作正常。我的问题是我无法理解如何调用隐藏的样式表`div`。

有人可以告诉我这样做的正确方法吗？

```
<script type="text/javascript">
   $(document).ready(function(){
      $(".fancybox").fancybox({padding : 0, openEffect  : 'elastic'});       
   });
</script> 
```

我隐藏的 div：

```
<div id="contact" class="contact item"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:46:38.053

您可以使用样式表设置 div 的样式，例如

**site.css**（或任何样式表，不知道你叫什么）

```
.contact { padding: 0px; } 
```

或者，如果您想使用 Javascript 设置样式，请在应用 fancybox 之前或之后随时进行：

```
<script type="text/javascript">
   $(document).ready(function(){
      $("#contact").css("padding", "0px");
      $(".fancybox").fancybox({openEffect  : 'elastic'});
   });
</script> 
```

请注意，如果您要显示示例 div 的内容，fancybox 会获取隐藏 div 的内容并显示它，而不是外部 div 本身，这会破坏您的 css 选择器。在这种情况下，一个更好的例子是：

```
<style type="text/css">
.contact { border: 1px solid pink; }
</style>

<script type="text/javascript">
   $(document).ready(function(){
      $("#fancyBoxContents").fancybox();
   });
</script>

<div id="fancyBoxContents"><div class="contact">will be displayed</div></div> 
```

# javascript - 如何在 javascript 中检测 android mobile 或 tab？

> ID：13550911
> 
> 赞同：1
> 
> 时间：2012-11-25T12:15:26.990
> 
> 标签：javascript, android, screen

嗨，这个问题似乎很愚蠢。但目前我被困住了。

实际上我无法在 javascript 中确定“手机或平板电脑”我有两个 css 1\. 用于手机 2\. 用于平板电脑

在 ios 设备中非常容易。使用用户代理，我可以确定 iphone 或 ipad，从而能够包含所需的 css。

但在android中，我无法确定。我知道如果我知道设备的实际尺寸（英寸）是可能的。但是在javascript中这是不可能的，因为物理维度是硬件域的一部分。

可能是另一种方式可能是使用设备“纵横比”。但仍然不知道区分手机、标签和便笺的方法。

请帮帮我，有什么方法可以区分安卓手机平板电脑和笔记？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T22:24:26.757

您的问题归结为：什么是平板电脑？使用 iOS，很容易决定什么是手机，什么不是，因为 Apple 为我们划清界限。但是有这么多不同的设备运行 android，这要困难得多。

您写道，您创建了两个样式表，因此您可能最清楚在哪里划线。我的猜测是，您希望在屏幕宽度上至少有一定数量的像素才能将其称为平板电脑。所以，你可以用什么来检测：

```
if (window.outerwidth<920) {
  // phone
}
else {
  // tablet
} 
```

您要求使用 JavaScript 方法进行检测，但我认为这不是解决您问题的好方法。您可能真正想看的是“**媒体**[查询：如何定位桌面、平板电脑和移动设备？”](https://stackoverflow.com/questions/6370690/media-queries-how-to-target-desktop-tablet-and-mobile)中讨论的媒体查询。.

全面地说，这里是您如何检测 iDevice、android 或 HP 平板电脑（来自[iScroll 4](https://github.com/cubiq/iscroll/blob/master/src/iscroll.js#L33)）。

```
var isAndroid = (/android/gi).test(navigator.appVersion),
isIDevice = (/iphone|ipad/gi).test(navigator.appVersion),
isTouchPad = (/hp-tablet/gi).test(navigator.appVersion); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T12:27:22.187

与[检测小型平板电脑与大型手机有关吗？](https://stackoverflow.com/q/10080451/995926)和[优化高像素密度显示器](http://menacingcloud.com/?c=highPixelDensityDisplays)。您可以使用以下代码检查设备密度：

```
var dpr = 1;
if(window.devicePixelRatio !== undefined) dpr = window.devicePixelRatio; 
```

要检查显示是否大于或等于可变大小，您可以使用此函数：

```
/**
 * Checks if the screen size is equal or above given length
 * @param screen_size diagonal size of screen, for example 7.0 inches
 * @return True if its equal or above, else false
 */
function checkScreenSize(screen_size) {
    var dpr = 1;
    if(window.devicePixelRatio !== undefined) dpr = window.devicePixelRatio;
    var width=window.outerWidth/dpr;
    var height=window.outerHeight/dpr;
    var screenDiagonal = Math.sqrt(width * width + height * height);
    return screenDiagonal >= screen_size;
} 
```

# clojure - Clojure noir：无法在资源/img 中使用图像

> ID：13550912
> 
> 赞同：0
> 
> 时间：2012-11-25T12:15:36.070
> 
> 标签：clojure, compojure, noir

我一直在尝试黑色，尽管我现在遇到了一个烦人的问题：

我有一个背景图像存储在`project-folder/resources/public/img/bg.png`. 我的 css 文件将其引用为“/img/bg.png”。

不过，浏览器似乎无法加载此图像。

有谁知道可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:38:01.830

万一其他人有这个问题：另一个常见原因是类路径上没有资源文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T12:23:26.333

img 文件已损坏。我已经能够在浏览器上加载它。

# php - 用具体的值模拟 atLeastOnce，其余的不重要

> ID：13550914
> 
> 赞同：5
> 
> 时间：2012-11-25T12:16:04.967
> 
> 标签：php, unit-testing, mocking, phpunit, xunit

问题在 中`PHP`，但适用于使用该`xUnit`框架的任何语言。

我想要一个模拟，期望对方法进行 140 次调用`jump`。
我需要验证，**至少有一次**以 500 作为参数的调用。
我不在乎是否所有呼叫都是 500，但我至少需要一个以 500 呼叫的呼叫。

```
$mock = $this->getMock('Trampoline', ['jump']);

$mock->expects($this->atLeastOnce())
     ->method('jump')
     ->with($this->equalTo(500))
     ->will($this->returnValue(true));

$sportsman->setTramploine($mock);
$sportsman->jumpToRandomHeights($times = 140); // this calls Trampoline->jump
// I need to verify the sportsman had jumped 
// to the height of 500 at least once out of the 140 jumps he is performing 
```

在当前代码中，第一次调用后测试失败，`jump`因为第一次调用的值不同`500`，这意味着`atLestOnce`这里只表示应该调用该方法，而不是在其他调用中以特定值调用它。

* * *

# 解决方案

缺少的信息是在`with`. 感谢edorian在下面的回答，结果如下：

```
$testPassed = false;

$checkMinHeight = function ($arg) use(&$testPassed)
{
    if($arg === 500)
        $testPassed = true;

    // return true for the mock object to consider the input valid
    return true;
}

$mock = $this->getMock('Trampoline', ['jump'])
    ->expects($this->atLeastOnce())
    ->method('jump')
    ->with($checkMinHeight)
    ->will($this->returnValue(true));

$sportsman->setTramploine($mock);
$sportsman->jumpToRandomHeights($times = 1000); // this calls Trampoline->jump
// I need to verify the sportsman had jumped 
// to the height of 500 at least once out of the 1000 jumps he is performing

$this->assertTrue($testPassed, "Sportsman was expected to 
    jump 500m at least once"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T13:27:49.233

您可以使用 PHPUnits 模拟 API 的最佳实现，我可以想出的，仍然看起来很令人毛骨悚然。

解决此问题的另一种方法是更具可读性的方法是创建您自己的子类`Trampoline`并在那里实现它。

### 但对于挑战：

假设这个类：

```
<?php
class FancyMocking {
    function doThing($value) { }
} 
```

并且我们有`$x`电话，其中一个必须有`$value > 200`：

* * *

```
<?php

class FancyMockingTest extends PHPUnit_Framework_TestCase {

    public function testAtLeastOfMy200CallsShouldHaveAValueGreaterThan500() {
      $maxInvocations = 200;

      $mock = $this->getMock('FancyMocking');
      $mock->expects($this->exactly($maxInvocations))
        ->method('doThing')
        ->with($this->callback(function ($value) use ($maxInvocations) { 
            static $invocationCount = 0;
            static $maxValue = 0;

            $maxValue = max($value, $maxValue);
            /* The assertion function will be called twice by PHPUnit due to implementation details, so the *2 is a hack for now */
            if (++$invocationCount == $maxInvocations * 2) { 
                $this->assertGreaterThan(200, $maxValue, 'in 500 tries the max value didn\'t to over 200');
            } 
            return true;
        }))
        ->will($this->returnCallback(function ($value) { 
            return $value >= 200;
        }));
     for($i = $maxInvocations - 2; $i; --$i) { 
          $mock->doThing(50);
     } 
     var_dump($mock->doThing(250));
     var_dump($mock->doThing(50));
    }

} 
```

这将产生：

```
PHPUnit 3.7.9 by Sebastian Bergmann.

.bool(true)
bool(false)

Time: 0 seconds, Memory: 2.75Mb

OK (1 test, 2 assertions) 
```

这意味着带有 250 的调用返回 true 并且整个测试用例都有效。

### 如果失败：

为了使它失败，我们更改`var_dump($mock->doThing(250));`为`var_dump($mock->doThing(70));`并再次运行它：

```
PHPUnit 3.7.9 by Sebastian Bergmann.

Fbool(false)

Time: 0 seconds, Memory: 2.75Mb

There was 1 failure:

1) FancyMockingTest::testAtLeastOfMy200CallsShouldHaveAValueGreaterThan500
Expectation failed for method name is equal to <string:doThing> when invoked 200 time(s)
in 500 tries the max value didn't to over 200
Failed asserting that 70 is greater than 200.

.../FancyMockingTest.php:29

FAILURES!
Tests: 1, Assertions: 1, Failures: 1. 
```

* * *

不使用 PHPUnits 模拟 API 的解决方案类似于

`class FancyMockingFakeImplementation extends FancyMocking`，使用它而不是模拟并在那里编写自定义逻辑。

# java - 如果在 jUnit 测试中，为什么非守护线程会终止？

> ID：13550922
> 
> 赞同：5
> 
> 时间：2012-11-25T12:17:00.503
> 
> 标签：java, multithreading, spring, jvm, daemon

以下守护程序 bean 正在运行：

```
public class DaemonBean extends Thread {

    private final static Logger log = LoggerFactory.getLogger(DaemonBean.class);

    {
        setDaemon(true);
        start();
    }

    @Override
    public void run() {

        for(int i=0; i<10 && !isInterrupted(); ++i) {
            log.info("Hearbeat {}", i);
            try {
                sleep(1000);
            } catch (InterruptedException e) {
                return;
            }
        }

    }
} 
```

它是守护进程，所以如果单例会终止。

因此，下面的非守护进程 bean 正在等待他：

```
public class Waitor1 extends Thread {

    private final static Logger log = LoggerFactory.getLogger(Waitor1.class);

    private Thread joinable;

    {
        setDaemon(false);
        setUncaughtExceptionHandler(new UncaughtExceptionHandler() {

            @Override
            public void uncaughtException(Thread t, Throwable e) {
                log.error("Error in thread", e);
            }
        });
    }

    public Thread getJoinable() {
        return joinable;
    }

    public void setJoinable(Thread value) {
        this.joinable = value;
        if( this.joinable != null ) {
            start();
        }
    }

    @Override
    public void run() {

        log.info("Waiting started");

        try {
            joinable.join();
        } catch (InterruptedException e) {
            log.info("Thread interrupted");
            return;
        }

        log.info("Waiting ended");

    }

} 
```

bean 的 Spring 配置是：

```
<bean id="daemon" class="beans.DaemonBean"/>

    <bean id="waitor" class="beans.Waitor1">
        <property name="joinable" ref="daemon"/>
    </bean> 
```

问题是：为什么如果从 main 运行它可以工作，而如果从 jUnit 测试运行它却不能工作？

运行代码是

```
 public static void main(String[] args) {
        new ClassPathXmlApplicationContext("/beans/Waiting1.xml");
    } 
```

或者

```
@Test
    public void testWaiting1() {
        new ClassPathXmlApplicationContext("/beans/Waiting1.xml");
    } 
```

在 main 的情况下，我看到所有的心跳。在 jUnit 的情况下，我只看到心跳 0，然后消息“等待开始”并且程序终止，就好像没有人在这里等待非守护线程一样。

这可能是什么原因？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T12:25:04.190

当您从中运行代码时，`main`它会创建两个 bean，因此会创建两个线程 - 守护进程和非守护进程。只要非守护线程正在运行，您的应用程序就不会退出。所以它有效。

从 JUnit 运行时会有所不同。一旦 JUnit 测试方法完成（并且它在 Spring 上下文启动后立即完成），JUnit 就会假定您的测试已经完成。因此它会杀死你所有的线程，基本上是整个 JVM。

请记住，您的`Waitor1`bean 会产生一个 JUnit 不关心的后台线程。一旦你离开`@Test`方法，JUnit 就会停止一切。

# android - 如何让我的 SearchView 记住以前的搜索，例如它在 Play Market 中的情况？

> ID：13550923
> 
> 赞同：2
> 
> 时间：2012-11-25T12:17:13.563
> 
> 标签：android, searchview

单击包含以前搜索的列表时，我希望在搜索视图下显示一个下拉列表

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getSupportMenuInflater().inflate(R.menu.categories, menu);
        // Get the SearchView and set the searchable configuration
        SearchView searchView = (SearchView) menu.findItem(R.id.menu_search)
        .getActionView();
        searchView.setQueryHint("Search All Categories");

        final AppListAdapter adapterAllApps = new AppListAdapter(
                CategoryListActivity.this, R.layout.app_row, catList);
        searchView.setOnQueryTextListener(new OnQueryTextListener() {
            @Override
            public boolean onQueryTextChange(String newText) {
    .... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:57:35.590

您可能想使用

```
AutoCompleteTextView 
```

执行此操作，然后添加可搜索的内容提供程序。

看看这个：

[将 AutoCompleteTextView 改为 ActionBar 中的 SearchView](https://stackoverflow.com/questions/11491515/turn-autocompletetextview-into-a-searchview-in-actionbar-instead)

# javascript - Onclick 应用于许多元素，在第二次点击时触发

> ID：13550930
> 
> 赞同：2
> 
> 时间：2012-11-25T12:18:17.073
> 
> 标签：javascript, javascript-events, onclick

我制作了一个类似手风琴的小脚本。从技术上讲，它可以工作，但在第二次点击时。如何解决？

[http://jsfiddle.net/YcEjF/](http://jsfiddle.net/YcEjF/)

```
<ul>
    <li>chapter 1</li><span>lorem ipsum</span>
    <li>chapter 2</li><span>lorem ipsum</span>
    <li>chapter 3</li><span>lorem ipsum</span>
    <li>chapter 4</li><span>lorem ipsum</span>
    <li>chapter 5</li><span>lorem ipsum</span>
</ul>

var a = document.getElementsByTagName('li');
for (var i = 0; i < a.length; i++) {
    a[i].onclick = function() {
        var st = this.nextSibling.style;
        if (st) {
            st.display = (st.display == "none" ? "block" : "none");
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T12:23:21.507

`st.display`开始是空的，因为它是在 CSS 中设置的，而不是内联样式。有三种方法可以解决此问题。

（1）提前在javascript中显式设置样式：

```
var a = document.getElementsByTagName('li');
for (var i = 0; i < a.length; i++) {
    a[i].nextSibling.style.display = 'none';      // <-- Added this line
    a[i].onclick = function() {
        var st = this.nextSibling.style;
        if (st) {
            st.display = (st.display == "none" ? "block" : "none");
        }
    };
} 
```

小提琴：http: [//jsfiddle.net/YcEjF/1/](http://jsfiddle.net/YcEjF/1/)

(2) 测试“block”而不是“none”，颠倒比较，否则使用相同的方法：

```
var a = document.getElementsByTagName('li');
for (var i = 0; i < a.length; i++) {
    a[i].onclick = function() {
        var st = this.nextSibling.style;
        if (st) {
            st.display = (st.display == "block" ? "none" : "block");
        }
    };
} 
```

小提琴：http: [//jsfiddle.net/YcEjF/2/](http://jsfiddle.net/YcEjF/2/)

(3) 显式设置样式标签，而不是使用css。所以让你的javascript保持不变，但改变你的html，如下所示：

```
<ul>
    <li>chapter 1</li><span style="display: none;">lorem ipsum</span>
    ...
</ul> 
```

并将其`display: none;`从 css 中删除：

```
span { margin: 15px; }​ 
```

小提琴：http: [//jsfiddle.net/YcEjF/3/](http://jsfiddle.net/YcEjF/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T12:38:51.407

当您第一次单击同级元素样式为空`st.display == ""`时，您应该处理此行为：

```
var a = document.getElementsByTagName('li');
for (var i = 0; i < a.length; i++) {
    a[i].onclick = function() {
        var st = this.nextSibling.style;
        if (st) {
            // Updated condition: added st.display == ""
            st.display = (st.display == "none" || st.display == "" ? "block" : "none");
        }
    };
}​ 
```

如果您有 jQuery 库，则可以使用此[代码](http://jsfiddle.net/YcEjF/4/)使脚本更简单：

```
$('li').toggle(function(){
  $(this).next().attr('style', 'display: block;');
},function(){
  $(this).next().attr('style', 'display: none;');
})​ 
```

PS 顺便说一句，使用`<span>`元素而不是`<li>`. 更好的方法看起来像[这样](http://jsfiddle.net/YcEjF/29/)，或者您可以将`<span>`元素重命名为`<li>`.

# django - 为什么 Django 将我的页面作为下载提供？

> ID：13550934
> 
> 赞同：2
> 
> 时间：2012-11-25T12:18:42.970
> 
> 标签：django, http, fastcgi

我有一个用 Python+Django 编写的 Web 应用程序。在我的机器上，它工作正常；一旦我将它投入生产，它就会开始发挥作用。

出于某种原因，我的登录屏幕加载正常。但是，一旦我尝试登录，我就会以下载的形式获得主页（如果我打开 gzip 中间件），或者以[包含响应的纯文本页面的](http://pastebin.com/pL6REBAf)形式获得主页。

我的生产服务器运行 Python 2.6.8，我的 Django 版本是 1.4.1-final。我无权访问 mod_wsgi，所以我改用 CGI。这是我的[.htaccess](http://pastebin.com/Ypsze2Lp)和[FCGI 脚本](http://pastebin.com/dR9LsZSL)。这实际上只是一个便宜的共享托管计划，但我在那里有另一个运行良好的 Django 站点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:20:15.643

很可能是因为您将其公开为 cgi，但您使用的是 django.core.servers.fastcgi。显然 django 不应该作为普通 CGI 公开，但有些人尝试过，发现这篇博文：http: [//joemaller.com/1467/django-via-cgi-on-shared-hosting/](http://joemaller.com/1467/django-via-cgi-on-shared-hosting/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:36:38.070

这似乎不太可能，但在您的响应中设置不同的 content_type 有时会导致这种情况发生，例如

> > > response = HttpResponse(my_data, content_type='application/vnd.ms-excel') response['Content-Disposition'] = '附件; 文件名="foo.xls"'

[（Django 文档）](https://docs.djangoproject.com/en/dev/ref/request-response/#telling-the-browser-to-treat-the-response-as-a-file-attachment)

你能链接你的响应电话的一两条线吗？

# bison - 删除可选 else 块上的 shift/reduce 冲突

> ID：13550936
> 
> 赞同：0
> 
> 时间：2012-11-25T12:18:56.777
> 
> 标签：bison, yacc

我正在用 Bison 定义语法，我偶然发现了一个我想消除的 shift/reduce 冲突。冲突是由旨在匹配`if/else`语句的规则引起的：

```
state 17

   13 Stmt: IfBlock . OptionalElseBlock

    ELSE  shift, and go to state 42

    ELSE      [reduce using rule 16 (OptionalElseBlock)]
    $default  reduce using rule 16 (OptionalElseBlock)

    OptionalElseBlock  go to state 43 
```

`OptionalElseBlock`定义如下：

```
 16 OptionalElseBlock: /* empty */
   17                  | ELSE Stmt 
```

状态 42 和 43 看起来像这样，省略了 shift 和 reduce 信息：

```
state 42
   17 OptionalElseBlock: ELSE . Stmt

state 43
   13 Stmt: IfBlock OptionalElseBlock . 
```

我以前使用过可选标记，但我猜测由于解析器的前瞻缓冲区仅包含 1 个终端`OptionalElseBlock`会导致冲突。有没有简单的方法来解决这个冲突？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T17:16:52.410

这是经典的 shift/reduce 冲突。问题如下：

```
if (c1) if (c2) stmt1; else stmt2; 
```

问题是`if`属于`else`哪个。如果它不是可选的，那么就没有问题，或者如果`if`必须终止语句（比如用`fi`or `end`，选择两个流行的替代方案），但`C`语法似乎赢了，因此我们有 shift/reduce 冲突。

编写一个不存在此问题的语法是可能的，但并非易事。您可以通过玩具有优先规则的游戏或简单地“预期”转移/减少冲突来隐藏冲突。（我更喜欢后者，但有很多人会说优先破解更好，尽管它等同于恕我直言。）

重写的语法是龙书中的练习，可能还有其他解析文本，因此出于学习目的可能值得这样做，但是在语法维护方面确实很痛苦，并且如果在都是一个问题。

* * *

关于如何使用优先级和移位偏好来简化解析的经典论文是 Aho、Johnson 和 Ullman 于 1975 年左右发表的“Deterministic parsing of ambiguous grammars”。如果您无法访问一个好的图书馆，Google 可能会为您找到可以在线阅读的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:27:23.557

您可能想看看我对同一问题的回答。这是一个常见问题解答。

[改革语法以消除移位减少 if-then-else 中的冲突](https://stackoverflow.com/questions/12731922/reforming-the-grammar-to-remove-shift-reduce-conflict)

我建议不要使用`%expect n`除 0 以外的任何东西。

# web-applications - 使用 Dropbox 构建用于文件存储的 Web 应用程序

> ID：13550937
> 
> 赞同：3
> 
> 时间：2012-11-25T12:19:06.927
> 
> 标签：web-applications, oauth, dropbox, dropbox-api

我们正在构建一个网络应用程序，我们希望将 Dropbox 用作图像存储。基本思想是让用户在团队中工作。一个团队代表一个真实世界的公司。每个团队都有自己的公司拥有的 Dropbox 帐户。

用户登录我们的网络应用程序，可以看到他们团队的共享图像。我们不希望个人用户知道 Dropbox 帐户凭据 - 该帐户归公司所有。现在我们来解决技术问题——我们如何将这些图像从我们的 Web 应用程序发送到用户浏览器？

1.  如果我们能以某种方式直接将它从 Dropbox 服务器发送到用户的浏览器，我会更喜欢。这意味着以某种方式将 oauth 令牌从服务器传输到用户浏览器。不确定这是否合法 :-) 或者，我们可以为每个图像生成一个公开可用的 URL，并将该 URL 发送到用户浏览器。从隐私的角度来看，我认为这不是一个好的做法。

2.  我们可以通过我们的服务器来做到这一点——我们的服务器从 Dropbox 读取数据并将其发送到用户的浏览器。这样，我们的应用程序就有了 oauth 令牌，并从 Dropbox 中挑选出所有需要的数据并将其发送给客户端。这种方法的一个问题是通过我们的服务器产生了不必要的负载——我们从保管箱中提取图像并将其发送给用户。

有没有其他人有类似的问题？最好的方法是什么？我们不想切换图像存储提供商 - 假设我们的用户希望它是 Dropbox :-)

# javascript - Javascript数组访问

> ID：13550938
> 
> 赞同：-3
> 
> 时间：2012-11-25T12:19:12.020
> 
> 标签：javascript

我如何在 javascript 中使用 document.write() 来访问这种形式的数组？

```
({"1":{"1":1,"2":1,"3":1},
  "2":{"1":1,"2":1,"3":2},
  "3":{"1":1,"2":2,"3":1},
  "4":{"1":1,"2":2,"3":2},
  "5":{"1":2,"2":1,"3":1,"4":1},
  "6":{"1":2,"2":1,"3":1,"4":2},
  "7":{"1":2,"2":1,"3":2},
  "8":{"1":2,"2":2,"3":1},
  "9":{"1":2,"2":2,"3":2}}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:21:55.110

例如，如果你想访问第一个数组的第一个元素，你应该写：

```
theData=({"1":{"1":1,"2":1,"3":1},
  "2":{"1":1,"2":1,"3":2},
  "3":{"1":1,"2":2,"3":1},
  "4":{"1":1,"2":2,"3":2},
  "5":{"1":2,"2":1,"3":1,"4":1},
  "6":{"1":2,"2":1,"3":1,"4":2},
  "7":{"1":2,"2":1,"3":2},
  "8":{"1":2,"2":2,"3":1},
  "9":{"1":2,"2":2,"3":2}});
document.write(theData[1][1]); //1 
```

由于您显然使用了 jQuery，以下是打印元素的方法：

```
$(document).ready(function() { 
   $.getJSON('array.php?callback=?', function(data) {
     if(data) {
         $.each(data,function(key,val){
              $.each(val,function(subkey,subval){
                  document.write(subval+" ");
              });
              document.write('<br/>');
         });
     } 
     else { alert('error'); } 
   }); 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T12:21:32.257

将其分配给变量并使用方括号表示法来访问对象属性。

```
var mydata = ({...});

mydata['1']['3'] //1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T12:34:33.610

这不是一个数组，而是对象的对象。所以遍历每个对象并检查是否有嵌套对象。[示例](http://jsfiddle.net/Y8skH/1/) ***旁注：表现出一些努力，更好的是，尝试多搜索一点，谷歌是你最好的朋友。***

```
function traverse ( data )
{
    for ( var index in data )
    {
        if ( typeof data[index] === "object" )
        {
            traverse ( data[index] );
        } else {
            document.write ( data[index] );
        }
    }
    document.write ( "<br/>" );
}

traverse ( a ); 
```

# python - Python pandas插入长整数

> ID：13550940
> 
> 赞同：5
> 
> 时间：2012-11-25T12:19:50.153
> 
> 标签：python, numpy, pandas

我正在尝试在 Pandas Dataframe 中插入长整数

```
import numpy as np
from pandas import DataFrame

data_scores = [(6311132704823138710, 273), (2685045978526272070, 23), (8921811264899370420, 45), (17019687244989530680L, 270), (9930107427299601010L, 273)]
dtype = [('uid', 'u8'), ('score', 'u8')]
data = np.zeros((len(data_scores),),dtype=dtype)
data[:] = data_scores
df_crawls = DataFrame(data)
print df_crawls.head() 
```

但是当我查看数据框时，最后一个很长的值现在是负数：

```
                       uid分数
0 6311132704823138710 273
1 2685045978526272070 23
2 8921811264899370420 45
3 -1427056828720020936 270
4 -8516636646409950606 273

```

uid 是 64 位无符号整数，所以 'u8' 应该是正确的 dtype 吗？有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T18:16:52.707

是的——这是熊猫目前的限制——我们确实计划在未来增加对无符号整数数据类型的支持。错误消息会好得多：

[http://github.com/pydata/pandas/issues/2355](http://github.com/pydata/pandas/issues/2355)

现在，您可以将该列`dtype=object`作为一种解决方法。

编辑 2012-11-27

现在检测溢出，但现在将变为 dtype=object，直到 DataFrame 更好地支持无符号数据类型。

```
In [3]: df_crawls
Out[3]: 
                    uid  score
0   6311132704823138710    273
1   2685045978526272070     23
2   8921811264899370420     45
3  17019687244989530680    270
4   9930107427299601010    273

In [4]: df_crawls.dtypes
Out[4]: 
uid      object
score     int64 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T14:57:37.567

这不会告诉您该怎么做，除非在 64 位计算机上尝试或联系 pandas 开发人员（或自己修补问题......）。但无论如何，这似乎是你的问题：

问题是`DataFrame`不理解 unsigned int 64 位，至少在 32 位机器上。

我更改了您的值，`data_score`以便更好地跟踪正在发生的事情：

```
data_scores = [(2**31 + 1, 273), (2 ** 31 - 1, 23), (2 ** 32 + 1, 45), (2 ** 63 - 1, 270), (2 ** 63 + 1, 273)] 
```

然后我尝试了：

```
In [92]: data.dtype
Out[92]: dtype([('uid', '<u8'), ('score', '<u8')])

In [93]: data
Out[93]: 
array([(2147483649L, 273L), (2147483647L, 23L), (4294967297L, 45L),
       (9223372036854775807L, 270L), (9223372036854775809L, 273L)], 
      dtype=[('uid', '<u8'), ('score', '<u8')])

In [94]: df = DataFrame(data, dtype='uint64')

In [95]: df.values
Out[95]: 
array([[2147483649,                  273],
       [2147483647,                   23],
       [4294967297,                   45],
       [9223372036854775807,                  270],
       [-9223372036854775807,                  273]], dtype=int64) 
```

请注意`dtype`of`DataFrame`与第 94 行中请求的不匹配。另外，正如我在上面的评论中所写的，numpy 数组工作得很好。此外，如果您`uint32`在第 94 行中指定，它仍然为值指定 a `dtype`of 。但是它不会给你负溢出，可能是因为它适合.`int64``DataFrame``uint32``int64`

# delphi - 如何获得 TGroupBox 主题的字幕字体颜色

> ID：13550944
> 
> 赞同：3
> 
> 时间：2012-11-25T12:20:06.987
> 
> 标签：delphi, delphi-7

我想获得 TGroupBox 标题的字体颜色，所以我可以将该颜色分配给 TLabel。

我想我需要使用[`GetThemeColor`](http://msdn.microsoft.com/en-us/library/bb773397%28VS.85%29.aspx)，但我似乎无法弄清楚要使用哪些参数？

* * *

更新 - 这是我根据答案使用的代码：

```
function GetGroupBoxTextColor: TColor;
var
  C: COLORREF;
  ElementDetails: TThemedElementDetails;
begin
  Result := clWindowText;
  if ThemeServices.ThemesEnabled then
  begin
    ElementDetails := ThemeServices.GetElementDetails(tbGroupBoxNormal);
    if GetThemeColor(ThemeServices.Theme[teButton], ElementDetails.Part, ElementDetails.State, TMT_TEXTCOLOR, C) = S_OK then
      Result := C;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T12:46:47.520

我认为这有效：

```
var
  h: HTHEME;
  clr: COLORREF;
begin
  h := OpenThemeData(Handle, 'BUTTON');
  if h <> 0 then
    try
      OleCheck(GetThemeColor(h, BP_GROUPBOX, GBS_NORMAL, TMT_TEXTCOLOR, clr));
    finally
      CloseThemeData(h);
    end; 
```

（使用`OleAuto, UxTheme`）

# mysql - MySQL 复杂 SELECT 查询 - JOINS

> ID：13550945
> 
> 赞同：0
> 
> 时间：2012-11-25T12:20:09.967
> 
> 标签：mysql, select, join

请找到 SQLfiddle URL：

[http://sqlfiddle.com/#!2/c8002/1/0](http://sqlfiddle.com/#!2/c8002/1/0)

实际输出应该是：

```
region_id   status1         branches        balance     fses
    status0         discount     branch_names       telecallers
2   NULL    4       400.00  30   KOTTAKKAL  341.00  3   3
2   NULL    4       800.00  31   KALPETTA   394.00  3   3 
```

我得到的重复输出如下：

```
region_id   status1         branches        balance     fses
    status0         discount     branch_names       telecallers
2   NULL    4       400.00  30   KOTTAKKAL  341.00  3   3
2   NULL    4       400.00  30   KOTTAKKAL  394.00  3   3 
2   NULL    4       800.00  31   KALPETTA   341.00  3   3
2   NULL    4       800.00  31   KALPETTA   394.00  3   3 
```

我该如何纠正？

谢谢和问候，曼杰什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:24:11.780

尝试这个 ：：

在您的查询中，只需附加以下部分：

```
GROUP BY branch_names 
```

或者，您可以在 SELECT 部分中获得 DISTINCT：

```
Select DISTINCT(branch_names) from.... 
```

最终查询将是 ::

```
SELECT E.`region_id`,a0.status0,a1.status1,k.discount,k.branches
,k.branch_names,BAL.balance,TCLRS.telecallers,FSE.fses

FROM tbl_insurance_excel E

LEFT OUTER JOIN (Select E2.region_id, count(`id`) as status1
from tbl_insurance_excel E2 Left Join  tbl_recipt_general_details on id=insurance_excel_id
JOIN tbl_branches  on policy_closed_branch= branch_id
Where E2.`row_status` =1 AND E2.canceled_status='no' and E2.region_id=2   Group by region_id) a1 ON a1.region_id=E.region_id

LEFT OUTER JOIN (Select E2.region_id, count(`id`) as status0
from tbl_insurance_excel E2 Left Join  tbl_recipt_general_details on id=insurance_excel_id
JOIN tbl_branches  on policy_closed_branch= branch_id
Where E2.`row_status` =0 AND E2.canceled_status='no' and E2.region_id=2   Group by region_id) a0 ON a0.region_id=E.region_id

LEFT JOIN (
SELECT IEX.region_id,B.branch_name as branch_names,B.branch_id as branches, sum( DDT.discounts_amount ) as discount
FROM tbl_insurance_excel IEX
LEFT JOIN tbl_recipt_general_details RGD ON IEX.id = RGD.insurance_excel_id
LEFT JOIN tbl_discounts_details DDT ON RGD.rec_gene_id = DDT.recipt_general_id
LEFT JOIN tbl_branches B ON B.branch_id = RGD.policy_closed_branch
WHERE IEX.region_id =2
GROUP BY B.branch_id)k on k.region_id=E.region_id

LEFT JOIN (
SELECT IEX.region_id,B.branch_id as branches, sum( RGD.`recipt_bal_amount` ) AS balance
FROM tbl_insurance_excel IEX
LEFT JOIN tbl_recipt_general_details RGD ON IEX.id = RGD.insurance_excel_id
LEFT JOIN tbl_branches B ON B.branch_id = RGD.policy_closed_branch
WHERE IEX.region_id =2
GROUP BY B.branch_id)BAL ON BAL.region_id=E.region_id

LEFT JOIN (
SELECT ex.region_id, B.branch_id AS branches, count( F.`fse_id` ) AS telecallers
FROM tbl_branches B
LEFT JOIN tbl_team_leader L ON B.branch_id = L.leader_branch_id
LEFT JOIN tbl_fse F ON L.leader_id = F.leader_id
JOIN (

SELECT region_id
FROM tbl_insurance_excel
WHERE `region_id` =2
GROUP BY region_id
) AS ex ON B.region_id = ex.region_id
WHERE F.fse_category = 'Telecaller'
GROUP BY B.branch_id
) TCLRS ON  TCLRS .region_id=E.region_id

LEFT JOIN (
SELECT ex.region_id, B.branch_id AS branches, count( F.`fse_id` ) AS fses
FROM tbl_branches B
LEFT JOIN tbl_team_leader L ON B.branch_id = L.leader_branch_id
LEFT JOIN tbl_fse F ON L.leader_id = F.leader_id
JOIN (

SELECT region_id
FROM tbl_insurance_excel
WHERE `region_id` =2
GROUP BY region_id
) AS ex ON B.region_id = ex.region_id
WHERE F.fse_category = 'Fse'
GROUP BY B.branch_id
) FSE ON  FSE.region_id=E.region_id

 where E.region_id=2 group by  k.branches 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T12:33:13.420

您是否尝试用另一个选择包装您的查询并按 BRANCH_NAMES 对其进行分组

```
SELECT * FROM
(
    << your query goes here>>
) o
GROUP BY o.BRANCH_NAMES 
```

但是如果你像这样把你的结果放在一起，你肯定会在余额列中丢失数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T14:09:53.813

我猜你的查询结构本身有问题，因为它不仅仅是对`distinct`.

您的连接表，并为您拥有的每一行检索不同的值，您实际上只想为`KOTTAKKAL`和中的每一个提供一个`KALPETTA`。

请注意，在您的示例中，尽管`distinct`执行了子句的添加，但不会出现任何差异，因为您拥有的行**是**不同的。`341.00`在列平衡中，对于和`394.00`的每个条目，您都有`KOTTAKKAL`和`KALPETTA`。

如果使用 group，是的，您将丢失有关的信息`balance`，因为 a 之后返回的结果`group by`只是分组的不同元素中的第一个（如果列具有多个值）。

您要么必须确定所需的结果，要么应对对 column 进行 sum other 计算`balance`。

我猜结果，你愿意做的正确加入是这样的：

```
SELECT DISTINCT E.`region_id`,a0.status0,a1.status1,k.discount,k.branches
,k.branch_names, k.balance,TCLRS.telecallers,FSE.fses

FROM tbl_insurance_excel E

LEFT OUTER JOIN (SELECT E2.region_id, count(`id`) AS status1
FROM tbl_insurance_excel E2 LEFT JOIN  tbl_recipt_general_details ON id=insurance_excel_id
JOIN tbl_branches  ON policy_closed_branch= branch_id
WHERE E2.`row_status` =1 AND E2.canceled_status='no' AND E2.region_id=2   GROUP BY region_id) a1 ON a1.region_id=E.region_id

LEFT OUTER JOIN (SELECT E2.region_id, count(`id`) AS status0
FROM tbl_insurance_excel E2 LEFT JOIN  tbl_recipt_general_details ON id=insurance_excel_id
JOIN tbl_branches  ON policy_closed_branch= branch_id
WHERE E2.`row_status` =0 AND E2.canceled_status='no' AND E2.region_id=2   GROUP BY region_id) a0 ON a0.region_id=E.region_id

LEFT JOIN (
SELECT IEX.region_id, B.branch_name AS branch_names, B.branch_id AS branches, sum( DDT.discounts_amount ) AS discount, sum( RGD.`recipt_bal_amount` ) AS balance
FROM tbl_insurance_excel IEX
LEFT JOIN tbl_recipt_general_details RGD ON IEX.id = RGD.insurance_excel_id
LEFT JOIN tbl_discounts_details DDT ON RGD.rec_gene_id = DDT.recipt_general_id
LEFT JOIN tbl_branches B ON B.branch_id = RGD.policy_closed_branch
WHERE IEX.region_id =2
GROUP BY B.branch_id)k ON k.region_id=E.region_id

LEFT JOIN (
SELECT ex.region_id, B.branch_id AS branches, count( F.`fse_id` ) AS telecallers
FROM tbl_branches B
LEFT JOIN tbl_team_leader L ON B.branch_id = L.leader_branch_id
LEFT JOIN tbl_fse F ON L.leader_id = F.leader_id
JOIN (

SELECT region_id
FROM tbl_insurance_excel
WHERE `region_id` =2
GROUP BY region_id
) AS ex ON B.region_id = ex.region_id
WHERE F.fse_category = 'Telecaller'
GROUP BY B.branch_id
) TCLRS ON  TCLRS .region_id=E.region_id

LEFT JOIN (
SELECT ex.region_id, B.branch_id AS branches, count( F.`fse_id` ) AS fses
FROM tbl_branches B
LEFT JOIN tbl_team_leader L ON B.branch_id = L.leader_branch_id
LEFT JOIN tbl_fse F ON L.leader_id = F.leader_id
JOIN (

SELECT region_id
FROM tbl_insurance_excel
WHERE `region_id` =2
GROUP BY region_id
) AS ex ON B.region_id = ex.region_id
WHERE F.fse_category = 'Fse'
GROUP BY B.branch_id
) FSE ON  FSE.region_id=E.region_id

  WHERE E.region_id=2 GROUP BY  k.branches 
```

请注意，您正在一个接一个地进行连接，并组合查询中应该唯一的结果。您已将来自您命名的查询的数据连接起来`k`，然后将结果与您命名的查询连接起来`BAL`，除了 column 之外，该查询`balance`具有相同的条目，因此`branch_id's`它们被复制了。

你有，很快：

```
k.branch_id LEFT JOIN BAL.branch_id 
```

这导致您的行被重复，具有不同的`balance`值。

通过发布的查询获得的结果是：

```
REGION_ID   STATUS0 STATUS1 DISCOUNT    BRANCHES    BRANCH_NAMES    BALANCE TELECALLERS FSES
2   (null)  4   400 30  KOTTAKKAL   341 3   3
2   (null)  4   800 31  KALPETTA    394 3   3 
```

问候！

# python - libvlc 和 dbus 接口

> ID：13550949
> 
> 赞同：7
> 
> 时间：2012-11-25T12:21:06.110
> 
> 标签：python, linux, gtk, dbus, libvlc

我正在尝试使用 libvlc 创建一个基本的媒体播放器，它将通过 dbus 进行控制。我正在为 python 使用 gtk 和 libvlc 绑定。该代码基于来自 [vlc网站的官方示例](http://git.videolan.org/?p=vlc/bindings/python.git;a=blob_plain;f=examples/gtkvlc.py;hb=HEAD)

我唯一修改的是将dbus接口添加到vlc实例

```
# Create a single vlc.Instance() to be shared by (possible) multiple players.
instance = vlc.Instance()
print vlc.libvlc_add_intf(instance, "dbus"); // this is what i added. // returns 0 which is ok 
```

一切都很好，演示工作并播放任何视频文件。但由于某种原因，dbus 控制模块不起作用（我不敢相信我刚刚说了可怕的“不起作用”的话）：

我已经有了绑定到 MPRIS 2 接口的工作客户端 dbus 代码。我可以控制一个普通的 VLC 媒体播放器实例——它工作得很好，但是上面的例子没有任何反应。dbus 控制模块已正确加载，因为`libvlc_add_intf`没有返回错误，我可以在 D-Feet (org.mpris.MediaPlayer2.vlc) 中看到 MPRIS 2 服务。即使在 D-Feet 中，尝试调用 dbus vlc 对象的任何方法都不会返回错误，但没有任何反应。

我是否需要配置其他东西才能使 dbus 模块控制 libvlc 播放器？

谢谢

**更新**

似乎创建 vlc 实例并设置更高的详细程度表明收到了 DBus 调用，但它们对播放器本身没有任何影响。此外，将 RC 接口添加到实例而不是 DBus 也有一些问题：当我从命令行运行示例时，它会将我带到 RC 接口控制台，我可以在其中键入控制命令，但它的行为与DBus - 没有任何反应，没有错误，nada，绝对没有。它完全忽略命令。

有什么想法吗？

**更新 2**

下面是使用 libvlc 创建基本播放器的代码：

```
 from    dbus.mainloop.glib import DBusGMainLoop
    import gtk
    import  gobject

    import sys
    import vlc

    from gettext import gettext as _

    # Create a single vlc.Instance() to be shared by (possible) multiple players.
    instance = vlc.Instance("--one-instance --verbose 2")

    class VLCWidget(gtk.DrawingArea):
        """Simple VLC widget.

        Its player can be controlled through the 'player' attribute, which
        is a vlc.MediaPlayer() instance.
        """
        def __init__(self, *p):
            gtk.DrawingArea.__init__(self)
            self.player = instance.media_player_new()
            def handle_embed(*args):
                if sys.platform == 'win32':
                    self.player.set_hwnd(self.window.handle)
                else:
                    self.player.set_xwindow(self.window.xid)
                return True
            self.connect("map", handle_embed)
            self.set_size_request(640, 480)

    class VideoPlayer:
        """Example simple video player.
        """
        def __init__(self):
            self.vlc = VLCWidget()

        def main(self, fname):
            self.vlc.player.set_media(instance.media_new(fname))
            w = gtk.Window()
            w.add(self.vlc)
            w.show_all()
            w.connect("destroy", gtk.main_quit)
            self.vlc.player.play()
            DBusGMainLoop(set_as_default = True)
            gtk.gdk.threads_init()
            gobject.MainLoop().run()

    if __name__ == '__main__':
        if not sys.argv[1:]:
           print "You must provide at least 1 movie filename"
           sys.exit(1)
        if len(sys.argv[1:]) == 1:
            # Only 1 file. Simple interface
            p=VideoPlayer()
            p.main(sys.argv[1]) 
```

该脚本可以从命令行运行，例如：

```
python example_vlc.py file.avi 
```

连接到 vlc dbus 对象的客户端代码太长而无法发布，因此假装我正在使用[D-Feet](https://live.gnome.org/DFeet/)来获取总线连接并向其发布消息。示例运行后，我可以在 d-feet 中看到播放器 dbus 接口，但我无法控制它。**我还应该在上面的代码中添加什么以使其正常工作吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:00:25.213

我看不到您对事件循环的实现，因此很难说出可能导致命令无法识别或被丢弃的原因。您的线程是否有可能丢失了堆栈跟踪信息并且实际上正在抛出异常？

如果您添加了事件循环和 DBus 命令解析的伪代码版本或简化版本，您可能会得到更多响应？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:16:10.137

在 nullege.com 上找到的工作程序使用 ctypes。充当服务器的一个使用 rpyc。忽略那个。

ctypes 相对于 dbus 的优势是巨大的速度优势（调用 C 库代码，不使用 python 交互）以及不需要库来实现 dbus 接口。

没有找到任何使用 gtk 或 dbus 的示例；-(

## 值得注意的例子

[PyNuvo vlc.py](http://nullege.com/codes/show/src@p@y@PyNuvo-HEAD@pyNuvo@server.py/307/vlc.Instance.media_player_new/python#)

[Milonga Tango DJ 节目](http://nullege.com/codes/show/src%40t%40a%40tangodj-HEAD%40Milonga%40Milonga.py/96/vlc.Instance.audio_output_enumerate_devices/python)

## 使用 dbus / gtk

dbus 使用 gobject 主循环，而不是 gtk 主循环。完全不同的野兽。不要越过溪流！一些修复：

不需要这个。线程是邪恶的。

```
gtk.gdk.threads_init() 
```

gtk.main_quit() 在使用 gobject Mainloop 时不应该工作。gobject mainloop 不能存在于你的类中。

```
if __name__ == '__main__':
loop = gobject.MainLoop()
loop.run() 
```

*将循环*传递到您的课程中。然后调用退出应用程序

```
loop.quit() 
```

## dbus（通知）/ gtk 工作示例

不会为你编写你的 vlc 应用程序。但这是一个使用 dbus / gtk 的工作示例。只要适应vlc。假设你接受了我对上面 gtk 的建议。如您所知，在使用 gobject.Mainloop 时必须调用 DesktopNotify 的任何实例。但是你可以把它放在你的主类中的任何地方。

desktop_notify.py

```
from __future__ import print_function
import gobject
import time, dbus
from dbus.exceptions import DBusException
from dbus.mainloop.glib import DBusGMainLoop

class DesktopNotify(object):
    """ Notify-OSD ubuntu's implementation has a 20 message limit. U've been warned. When queue is full, delete old message before adding new messages."""
    #Static variables
    dbus_loop = None
    dbus_proxy = None
    dbus_interface = None
    loop = None

    @property
    def dbus_name(self):
        return ("org.freedesktop.Notifications")

    @property
    def dbus_path(self):
        return ("/org/freedesktop/Notifications")

    @property
    def dbus_interface(self):
        return self.dbus_name

    def __init__(self, strInit="initializing passive notification messaging")
        strProxyInterface = "<class 'dbus.proxies.Interface'>"
        """ Reinitializing dbus when making a 2nd class instance would be bad"""
        if str(type(DesktopNotify.dbus_interface)) != strProxyInterface:
            DesktopNotify.dbus_loop = DBusGMainLoop(set_as_default=True)
            bus = dbus.SessionBus(mainloop=DesktopNotify.dbus_loop)
            DesktopNotify.dbus_proxy = bus.get_object(self.dbus_name, self.dbus_path)
            DesktopNotify.dbus_interface = dbus.Interface(DesktopNotify.dbus_proxy, self.dbus_interface )
            DesktopNotify.dbus_proxy.connect_to_signal("NotificationClosed", self.handle_closed)

    def handle_closed(self, *arg, **kwargs):
        """ Notification closed by user or by code. Print message or not"""
        lngNotificationId = int(arg[0])
        lngReason = int(arg[1])

    def pop(self, lngID):
        """ ID stored in database, but i'm going to skip this and keep it simple"""
        try:
            DesktopNotify.dbus_interface.CloseNotification(lngID)
        except DBusException as why:
            print(self.__class__.__name__ + ".pop probably no message with id, lngID, why)
        finally:
            pass

    def push(self, strMsgTitle, strMsg, dictField):
        """ Create a new passive notification (took out retrying and handling full queues)"""
        now = time.localtime( time.time() )
        strMsgTime = strMsg + " " + time.asctime(now)
        del now
        strMsgTime = strMsgTime % dictField

        app_name="[your app name]"
        app_icon = ''
        actions = ''
        hint = ''
        expire_timeout = 10000 #Use seconds * 1000
        summary = strMsgTitle
        body = strMsgTime
        lngNotificationID = None
        try:
            lngNotificationID = DesktopNotify.dbus_interfacec.Notify(app_name, 0, app_icon, summary, body, actions, hint, expire_timeout)
        except DBusException as why:
            #Excellent spot to delete oldest notification and then retry
            print(self.__class__.__name__ + ".push Being lazy. Posting passive notification was unsuccessful.", why)
        finally:
            #Excellent spot to add to database upon success
            pass 
```

# python - 在 python 中使用 CSV 中的 IP 列表

> ID：13550950
> 
> 赞同：0
> 
> 时间：2012-11-25T12:21:16.830
> 
> 标签：python, csv, ip

因此，我将这个 IP 列表保存在 CSV 文件中。只有一列，如果我对文件进行分类，它们都出现在不同的行上，并且文件命令告诉我它是 ASCII 文本。

但是，当我尝试遍历文件并解析不同 IP:s 的地址时，我收到错误“socket.herror: [Errno 1] Unknown host”。

由于某种原因，单元格的值不是正确的字符串，我无法将其转换为一个字符串。

```
from string import rstrip
from socket import gethostbyaddr

csv_file = open('csv_list.csv', "r")

for line in csv_file:
    dns_name = gethostbyaddr(str(line.rstrip('\n')))
    print "IP: " + line.rstrip('\n') + "DNS Name:" + dns_name[0] 
```

有没有办法解决？到目前为止，我一直在考虑将文件转换为纯文本文件，将文件中的所有值添加到列表中，但我不确定最好的解决方案是什么。

有人有想法么？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T12:36:03.377

您的问题不在于文件的读取（也可以使用 优化`with ...`），而是无法反向查找一个 IP。在这种情况下，该`gethostbyaddr`函数会引发异常。

我已经对您的示例进行了一些修改，现在它报告的错误不是带有异常的崩溃，而是打印出一条消息。

```
from string import rstrip
from socket import gethostbyaddr

with open('csv_list.csv', 'r') as csv_file:
    for line in csv_file:
        ip = line.strip()
        try:
            dns_name = gethostbyaddr(ip)
            print "IP: %s, DNS Name: %s" % (ip, dns_name[0])
        except Exception, e:
            print "IP: %s, DNS lookup error: %s" % (ip, e) 
```

例如对于这个 IP 列表：

```
1.2.3.4
8.8.8.8
4.4.4.4
bad IP
1.2.3 
```

它打印

```
IP: 1.2.3.4, DNS lookup error: [Errno 1] Unknown host
IP: 8.8.8.8, DNS Name: google-public-dns-a.google.com
IP: 4.4.4.4, DNS lookup error: [Errno 1] Unknown host
IP: bad IP, DNS lookup error: [Errno 8] nodename nor servname provided, or not known
IP: 1.2.3, DNS lookup error: [Errno 1] Unknown host 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T15:17:25.247

您也可以尝试 numpy loadtxt 从文件创建数组。

```
 from numpy import loadtxt
    ip_list = loadtxt("filename.csv", unpack=True) 
```

# jquery - 如何正确收集数字（jquery）

> ID：13550955
> 
> 赞同：0
> 
> 时间：2012-11-25T12:21:56.903
> 
> 标签：jquery

如何正确收集数字并将其放在另一个表中

对此进行了实验，但未正确收集

```
 <script>

   // A
   $(function() {

var nums=[];
var tot=0;

 $(' .vis ').each(function(i){
var numTxt = $('.vis:eq('+i+') tr > td:eq(1)').text().match(/\d+/g)[0];

var num = (parseInt(numTxt ,10));
   nums.push(numTxt);
   tot+=num

});

  $("#ABS #A").html(tot); 

});

// B
   $(function() {

var nums=[];
var tot=0;

 $(' .vis ').each(function(i){
var numTxt = $('.vis:eq('+i+') tr > td:eq(1)').text().match(/\d+/g)[1];

var num = (parseInt(numTxt ,10));
   nums.push(numTxt);
   tot+=num

});

  $("#ABS #B").html(tot); 

});

//C
   $(function() {

var nums=[];
var tot=0;

 $(' .vis ').each(function(i){
var numTxt = $('.vis:eq('+i+') tr > td:eq(1)').text().match(/\d+/g)[2];

var num = (parseInt(numTxt ,10));
   nums.push(numTxt);
   tot+=num

});

  $("#ABS #C").html(tot); 

});

   </script> 
```

身体 ...

```
<body>
<table border='2'>
<tr>
<td>
<table class='vis' border='2'>
<tr>
<td>ABC</td>
<td>
<span class='a'></span>
88
<span class='dd'>.</span>
332&nbsp;
<span class='d'></span>
30
<span class='dd'>.</span>
665&nbsp;
<span class='f'></span>
20
<span class='dd'>.</span>
453 &nbsp;|&nbsp;44432/44432
</td>
</tr>
</table>
</td>
</tr>

<tr>
<td>
<table class='vis' border='2'>
<tr>
<td>ABC</td>
<td>
<span class='a'></span>
822
<span class='b'></span>
303
<span class='c'></span>
20&nbsp;|&nbsp;44432/44432
</td>
</tr>
</table>

</td>
</tr>

<tr>
<td>
<table class='vis' border='2'>
<tr>
<td>ABC</td>
<td>
<span class='a'></span>
88
<span class='dd'>.</span>
332&nbsp;
<span class='b'></span>
30
<span class='dd'>.</span>
665&nbsp;
<span class='c'></span>
20
<span class='dd'>.</span>
453 &nbsp;|&nbsp;44432/44432
</td>
</tr>
</table>
</td>
</tr>

<tr>
<td>
<table class='vis' border='2'>
<tr>
<td>ABC</td>
<td>
<span class='a'></span>
88
<span class='dd'>.</span>
332&nbsp;
<span class='b'></span>
30
<span class='dd'>.</span>
665&nbsp;
<span class='c'></span>
20
<span class='dd'>.</span>
453 &nbsp;|&nbsp;44432/44432
</td>
</tr>
</table>

</td>
</tr>

<tr>
<td>
<table class='vis' border='2'>
<tr>
<td>ABC</td>
<td>
<span class='a'></span>
555
<span class='b'></span>
220
<span class='c'></span>
110&nbsp;|&nbsp;44432/44432
</td>
</tr>
</table>

</td>
</tr>

</table>

<br /><br />
<table id='ABS' border='2' width="200px">
<tr>
<td>A</td>
<td>B</td>
<td>C</td>
</tr>

<tr>
<td id='A'>0</td>
<td id='B'>0</td>
<td id='C'>0</td>
</tr>

</table>
</body> 
```

[http://jsfiddle.net/Mqat4/2/](http://jsfiddle.net/Mqat4/2/)

但我想要

88.334 + 822 + 88.332 + 88.332 + 555 = 1531.666

然后把总数放在这里

```
$("#ABS #A").html(tot); 
```

和..  
30.665 + 303 + 30.665 + 30.665 + 220 = 584.33

```
$("#ABS #B").html(tot); 
```

和..

20.453 + 20 + 20.453 + 20.453 + 110 = 191.359

```
$("#ABS #C").html(tot); 
```

我只想要这个 (1531.666)

和 (584.33)

和 (191.359)

我要这个，怎么样？？！！

[http://www10.0zz0.com/2012/11/25/14/351410283.jpg](http://www10.0zz0.com/2012/11/25/14/351410283.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:38:42.707

您只获取数字并解析为整数，您需要获取句点和之后的数字，删除句点周围的空格，并将其解析为浮点数：

```
var numTxt = $('.vis:eq('+i+') tr > td:eq(1)').text().replace(/ \. /g, '.').match(/[\d.]+/g)[0];

var num = parseFloat(numTxt); 
```

# php - 如何在php中发布单选按钮值

> ID：13550957
> 
> 赞同：0
> 
> 时间：2012-11-25T12:22:09.760
> 
> 标签：php, zend-framework2

我正在使用 Zend 框架做项目。在表单中，我使用单选按钮添加字段。在表格发布之后。它不发送该单选按钮值（但其他字段（例如 -text 字段可以发布））。这是我在视图中的代码。

```
<form class="custom" method="post">

   <?php
     foreach ($answers as $answer) {
         echo '<input name="q_answer" value="'.$answer.'" type="radio" >'.$answer;
     }
   ?>
    <input class="small secondary button" type="submit" value="  Ok  ">
</form> 
```

这是我在控制器中的代码

```
if($request->isPost()){
   $ans = $_POST['q_answer'];
} 
```

所以当我发布表格时。它给出了`Undefined index: q_answer`错误。怎么了。请帮助我。（在控制器中我使用打印发布的值，`var_dump`但“q_answer”值不可用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:25:51.757

如果未选择任何选项，则此字段不会出现在 中`$_POST`。因此，您应该首先检查`isset()`它是否存在并尝试处理。当你使用 ZF 时，你应该使用`getPost()`而不是直接挖掘`$_POST`：

```
$ans = getPost( 'q_answer', 'default-value-if-no-element-is-found' ); 
```

# iphone - 在 iPhone 中一起创建日期和时间选择器

> ID：13550958
> 
> 赞同：3
> 
> 时间：2012-11-25T12:22:28.980
> 
> 标签：iphone, ios, uidatepicker

我正在使用`UIDatePickerModeDate`and创建两个日期和时间`UIDatePickerModeTime`选择器，但我想一起创建一个日期和时间选择器。我是 iOS 开发的新手。

对于日期选择，我使用以下代码：

```
datePick = [[UIDatePicker alloc]initWithFrame:CGRectMake(50, 290, 120, 0)];
datePick.datePickerMode =UIDatePickerModeDate 
```

对于时间选择，我使用这个：

```
timePick = [[UIDatePicker alloc]initWithFrame:CGRectMake(50, 200, 120, 0)];
timePick.datePickerMode =UIDatePickerModeTime; 
```

现在我的问题是如何为时间和时间创建一个选择器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T12:56:06.550

您可以选择不`datePickerMode`为您的`datePick`. 是`UIDatePickerModeDateAndTime`默认值。它与以下内容相同：

```
datePick.datePickerMode = UIDatePickerModeDateAndTime 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-08T09:15:19.143

使用以下代码希望您的问题将得到解决

```
 UIDatePicker *datePicker = [[UIDatePicker alloc]init];
        datePicker.datePickerMode = UIDatePickerModeDateAndTime;
        [datePicker setDate:[NSDate date]];
        [datePicker addTarget:self action:@selector(updateDateField:) forControlEvents:UIControlEventValueChanged];
        self.dateOfBirth.inputView = datePicker;
        self.dateOfBirth.text = [self formatDate:datePicker.date]; 
```

通过添加此方法设置日期和时间格式

```
- (NSString )formatDate:(NSDate )date
{
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateStyle:NSDateFormatterShortStyle];
    [dateFormatter setDateFormat:@"dd-MM-yyyy hh:mm a"];
    NSString *formattedDate = [dateFormatter stringFromDate:date];
    return formattedDate;
} 
```

要从日期获取更新值，请使用此

```
 -(void)updateDateField:(id)sender
    {
        UIDatePicker *picker = (UIDatePicker*)self.dateTextField.inputView;
        self.dateTextField.text = [self formatDate:picker.date];
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-25T12:25:18.577

我不太了解您的问题，但是如果您想使用相同的选择器来选择日期和时间，请使用

```
_datePicker.datePickerMode = UIDatePickerModeDateAndTime; 
```

# linux - Linux在一行上添加文本文件的文件名和路径

> ID：13550960
> 
> 赞同：1
> 
> 时间：2012-11-25T12:22:32.057
> 
> 标签：linux, shell

我正在尝试编写一个脚本来在一行中添加文件名和文本文件的目录路径。例如

```
Filename /root/folder/folder/ 
```

我试过了：

```
ls "$1" >> /root/folder/folder/file.txt
pwd >> /root/folder/folder/file.txt 
```

但它显示在单独的行上。

我确实尝试过

```
ls "$1" && pwd >> ...... 
```

但它只将密码粘贴到文本文件中。

我是 Linux 新手，因此将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:32:21.740

这个怎么样：

```
echo "$1 $(pwd)" >> outputfile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T12:31:45.127

采用：

```
p1=`ls $1`
p2=`pwd`
echo $p1 $p2 >> /root/folder/folder/file.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T12:36:07.493

尝试：

```
echo "$1$(pwd)" >> /root/folder/folder/file.txt 
```

或者您可以使用连接的字符串创建一个新变量，然后回显：

```
NewVar="$1$(pwd)"
echo "$NewVar" >> /root/folder/folder/file.txttxt 
```

在上面的第一个示例中，每个命令都插入一个换行符。在第二个示例中`&&`，您将两个命令分开，这样第一个命令的输出就不会被重定向。`&&`换句话说，您不能在 中分配重定向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T13:28:57.540

一种常见的技术是使用`printf`（或`echo -n`，但移植性较差）来避免编写换行符：

```
exec >> /root/folder/folder/file.txt
printf "%s " "$1"
pwd 
```

在您的示例中，您使用命令来生成初始数据，在这种情况下，一个好的技术是使用`tr`修剪换行符

```
ls "$1" | tr -d '\012'
printf " "  # Insert a space
pwd 
```

# android - 将数据从一个活动移动到另一个活动时出错

> ID：13550961
> 
> 赞同：1
> 
> 时间：2012-11-25T12:22:45.290
> 
> 标签：android

我正在尝试将一些数据从一个活动移动到另一个活动。使用类应用程序

项目活动：

*   主要活动。

*   Second_Activity。

* * *

主要活动代码

```
public class MainActivity extends Activity
{
    private ApplicationSettings application;
    private Button btn;
    private EditText txt1;
    private EditText txt2;
    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        txt1 = (EditText)findViewById(R.id.txt1);
        txt2 = (EditText)findViewById(R.id.txt2);
        btn = (Button)findViewById(R.id.btn);
        btn.setOnClickListener(new View.OnClickListener()
        {
            @Override
            public void onClick(View arg0)
            {
                application = (ApplicationSettings)getApplication();
                application.setUserID(txt1.getText().toString());
                application.setUserName(txt2.getText().toString());
                Intent intent = new Intent(MainActivity.this,SecondActivity.class);
                startActivity(intent);
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

============================== 第二个活动代码

```
public class SecondActivity extends Activity 
{

    private ApplicationSettings application;
    private TextView txt1,txt2;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_second);

           application = (ApplicationSettings)getApplication();

           txt1 = (TextView)findViewById(R.id.txt1);
           txt2 = (TextView)findViewById(R.id.txt2);

           txt1.setText(application.getUserID().toString());
           txt2.setText(application.getUserName().toString());
    }
} 
```

=============================== 应用程序类

```
public class ApplicationSettings extends Application
{

    String UserID;
    String UserName;

    public String getUserID()
    {
        return UserID;
    }
    public void setUserID(String userID)
    {
        UserID = userID;
    }
    public String getUserName()
    {
        return UserName;
    }
    public void setUserName(String userName)
    {
        UserName = userName;
    }

    @Override
    public void onCreate() {
        super.onCreate();

    }   
} 
```

==============================

日志猫

```
11-25 15:32:31.695: E/Trace(17282): error opening trace file: No such file or directory (2)
11-25 15:32:31.960: D/libEGL(17282): loaded /system/lib/egl/libEGL_mali.so
11-25 15:32:31.965: D/libEGL(17282): loaded /system/lib/egl/libGLESv1_CM_mali.so
11-25 15:32:31.965: D/libEGL(17282): loaded /system/lib/egl/libGLESv2_mali.so
11-25 15:32:31.975: D/(17282): Device driver API match
11-25 15:32:31.975: D/(17282): Device driver API version: 10
11-25 15:32:31.975: D/(17282): User space API version: 10 
11-25 15:32:31.975: D/(17282): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Wed Sep 12 17:53:53 KST 2012 
11-25 15:32:32.000: D/OpenGLRenderer(17282): Enabling debug mode 0
11-25 15:32:32.005: E/SensorManager(17282): thread start
11-25 15:32:32.010: D/SensorManager(17282): registerListener :: handle = 0  name= LSM330DLC Acceleration Sensor delay= 200000 Listener= android.view.OrientationEventListener$SensorEventListenerImpl@41f68078
11-25 15:32:32.075: W/IInputConnectionWrapper(17282): showStatusIcon on inactive InputConnection
11-25 15:32:37.290: D/GestureDetector(17282): [Surface Touch Event] mSweepDown False, mLRSDCnt : -1 mTouchCnt : 2 mFalseSizeCnt:0
11-25 15:32:37.295: D/SensorManager(17282): unregisterListener::  Listener= android.view.OrientationEventListener$SensorEventListenerImpl@41f68078
11-25 15:32:37.295: D/Sensors(17282): Remain listener = Sending .. normal delay 200ms
11-25 15:32:37.295: I/Sensors(17282): sendDelay --- 200000000
11-25 15:32:37.295: D/SensorManager(17282): JNI - sendDelay
11-25 15:32:37.295: I/SensorManager(17282): Set normal delay = true
11-25 15:32:37.300: D/SensorManager(17282): registerListener :: handle = 0  name= LSM330DLC Acceleration Sensor delay= 200000 Listener= android.view.OrientationEventListener$SensorEventListenerImpl@41f69650
11-25 15:32:37.315: W/IInputConnectionWrapper(17282): getSelectedText on inactive InputConnection
11-25 15:32:37.315: W/IInputConnectionWrapper(17282): setComposingText on inactive InputConnection
11-25 15:32:37.315: W/IInputConnectionWrapper(17282): getExtractedText on inactive InputConnection
11-25 15:32:41.350: D/SensorManager(17282): unregisterListener::  Listener= android.view.OrientationEventListener$SensorEventListenerImpl@41f69650
11-25 15:32:41.350: D/Sensors(17282): Remain listener = Sending .. normal delay 200ms
11-25 15:32:41.350: I/Sensors(17282): sendDelay --- 200000000
11-25 15:32:41.350: D/SensorManager(17282): JNI - sendDelay
11-25 15:32:41.350: I/SensorManager(17282): Set normal delay = true
11-25 15:32:41.620: W/IInputConnectionWrapper(17282): showStatusIcon on inactive InputConnection
11-25 15:32:46.200: D/SensorManager(17282): registerListener :: handle = 0  name= LSM330DLC Acceleration Sensor delay= 200000 Listener= android.view.OrientationEventListener$SensorEventListenerImpl@41f8b4c8
11-25 15:32:47.170: D/GestureDetector(17282): [Surface Touch Event] mSweepDown False, mLRSDCnt : -1 mTouchCnt : 2 mFalseSizeCnt:0
11-25 15:32:47.175: D/SensorManager(17282): unregisterListener::  Listener= android.view.OrientationEventListener$SensorEventListenerImpl@41f8b4c8
11-25 15:32:47.175: D/Sensors(17282): Remain listener = Sending .. normal delay 200ms
11-25 15:32:47.175: I/Sensors(17282): sendDelay --- 200000000
11-25 15:32:47.175: D/SensorManager(17282): JNI - sendDelay
11-25 15:32:47.175: I/SensorManager(17282): Set normal delay = true
11-25 15:32:47.180: D/SensorManager(17282): registerListener :: handle = 0  name= LSM330DLC Acceleration Sensor delay= 200000 Listener= android.view.OrientationEventListener$SensorEventListenerImpl@41f8c6b8
11-25 15:32:47.210: W/IInputConnectionWrapper(17282): getSelectedText on inactive InputConnection
11-25 15:32:47.210: W/IInputConnectionWrapper(17282): setComposingText on inactive InputConnection
11-25 15:32:47.210: W/IInputConnectionWrapper(17282): getExtractedText on inactive InputConnection
11-25 15:32:50.470: D/GestureDetector(17282): [Surface Touch Event] mSweepDown False, mLRSDCnt : -1 mTouchCnt : 2 mFalseSizeCnt:0
11-25 15:32:50.475: D/SensorManager(17282): unregisterListener::  Listener= android.view.OrientationEventListener$SensorEventListenerImpl@41f8c6b8
11-25 15:32:50.475: D/Sensors(17282): Remain listener = Sending .. normal delay 200ms
11-25 15:32:50.475: I/Sensors(17282): sendDelay --- 200000000
11-25 15:32:50.475: D/SensorManager(17282): JNI - sendDelay
11-25 15:32:50.475: I/SensorManager(17282): Set normal delay = true
11-25 15:32:50.480: D/SensorManager(17282): registerListener :: handle = 0  name= LSM330DLC Acceleration Sensor delay= 200000 Listener= android.view.OrientationEventListener$SensorEventListenerImpl@41f8b4c8
11-25 15:32:50.490: W/IInputConnectionWrapper(17282): getSelectedText on inactive InputConnection
11-25 15:32:50.490: W/IInputConnectionWrapper(17282): setComposingText on inactive InputConnection
11-25 15:32:50.490: W/IInputConnectionWrapper(17282): getExtractedText on inactive InputConnection
11-25 15:32:53.000: D/GestureDetector(17282): [Surface Touch Event] mSweepDown False, mLRSDCnt : -1 mTouchCnt : 3 mFalseSizeCnt:0
11-25 15:32:53.160: D/AndroidRuntime(17282): Shutting down VM
11-25 15:32:53.160: W/dalvikvm(17282): threadid=1: thread exiting with uncaught exception (group=0x412862a0)
11-25 15:32:53.175: E/AndroidRuntime(17282): FATAL EXCEPTION: main
11-25 15:32:53.175: E/AndroidRuntime(17282): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.test01/com.example.test01.SecondActivity}: java.lang.NullPointerException
11-25 15:32:53.175: E/AndroidRuntime(17282):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
11-25 15:32:53.175: E/AndroidRuntime(17282):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
11-25 15:32:53.175: E/AndroidRuntime(17282):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
11-25 15:32:53.175: E/AndroidRuntime(17282):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
11-25 15:32:53.175: E/AndroidRuntime(17282):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-25 15:32:53.175: E/AndroidRuntime(17282):    at android.os.Looper.loop(Looper.java:137)
11-25 15:32:53.175: E/AndroidRuntime(17282):    at android.app.ActivityThread.main(ActivityThread.java:4898)
11-25 15:32:53.175: E/AndroidRuntime(17282):    at java.lang.reflect.Method.invokeNative(Native Method)
11-25 15:32:53.175: E/AndroidRuntime(17282):    at java.lang.reflect.Method.invoke(Method.java:511)
11-25 15:32:53.175: E/AndroidRuntime(17282):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
11-25 15:32:53.175: E/AndroidRuntime(17282):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
11-25 15:32:53.175: E/AndroidRuntime(17282):    at dalvik.system.NativeStart.main(Native Method)
11-25 15:32:53.175: E/AndroidRuntime(17282): Caused by: java.lang.NullPointerException
11-25 15:32:53.175: E/AndroidRuntime(17282):    at com.example.test01.SecondActivity.onCreate(SecondActivity.java:26)
11-25 15:32:53.175: E/AndroidRuntime(17282):    at android.app.Activity.performCreate(Activity.java:5191)
11-25 15:32:53.175: E/AndroidRuntime(17282):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
11-25 15:32:53.175: E/AndroidRuntime(17282):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
11-25 15:32:53.175: E/AndroidRuntime(17282):    ... 11 more
11-25 15:32:53.195: D/dalvikvm(17282): GC_CONCURRENT freed 180K, 9% free 12405K/13575K, paused 12ms+2ms, total 31ms 
```

* * *

我需要将主要活动上的 DditTexts 中的数据传递到 Second_activity 中的 TextView

提前致谢

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T12:24:47.260

作为您的日志：

> 您是否在 AndroidManifest.xml 中声明了此活动？

意味着确保您已将`SecondActivity.class`AndroidManifest 中的活动声明为：

```
<Activity android:name=".SecondActivity" /> 
```

如果您已声明它，请确保它在同一个包中或与您在其中创建的名称相同`SecondActivity.java`

如果您有`SecondActivity`不同的包，则在 AndroidManifest 中将其声明为：

```
<Activity android:name="<FULL_PACKAGE_NAME>.SecondActivity" /> 
```

# cordova - PhoneGap (Cordova) + BlackBerry 10 QNX 与 Ant 的构建问题

> ID：13550962
> 
> 赞同：2
> 
> 时间：2012-11-25T12:23:05.083
> 
> 标签：cordova, blackberry-webworks, blackberry-10

我在为 BlackBerry 平台构建应用程序方面经验丰富，目前正在尝试使用**PhoneGap (Cordova)**和 BlackBerry WebWorks 为**BlackBerry 10 Beta (QNX)**部署示例应用程序，但没有取得多大成功。我正在按照[PhoneGap Getting Started Guide for BlackBerry](https://github.com/ctetreault/incubator-cordova-docs/blob/master/docs/en/edge/guide/getting-started/blackberry/index.md)指南中的说明进行操作，该指南链接自他们的[开发人员博客](http://devblog.blackberry.com/2012/11/phonegap-blackberry-10/)。

在上述指南的第六步，我遇到了一些无法找到**org.apache.cordova**功能以及所有**blackberry.***功能的问题：

```
D:\Work\Development\PhoneGap\workspace\sample>ant qnx build
Buildfile: D:\Work\Development\PhoneGap\workspace\sample\build.xml

qnx:

build:

generate-cod-name:
     [echo] Generated name: cordovaExample.bar

clean:
   [delete] Deleting directory D:\Work\Development\PhoneGap\workspace\sample\build

package-app:
    [mkdir] Created dir: D:\Work\Development\PhoneGap\workspace\sample\build\widget
     [copy] Copying 24 files to D:\Work\Development\PhoneGap\workspace\sample\build\widget
     [copy] Copying 1 file to D:\Work\Development\PhoneGap\workspace\sample\build\widget
     [copy] Copying 1 file to D:\Work\Development\PhoneGap\workspace\sample\www\js
      [zip] Building zip: D:\Work\Development\PhoneGap\workspace\sample\build\cordovaExample.zip

build:
     [exec]
     [exec] D:\Work\Development\PhoneGap\workspace\sample>"C:\Program Files\Research In Motion\BlackBerry 10 WebWorks SDK 1.0.2.9\dependencies\node\node.exe" "C
:\Program Files\Research In Motion\BlackBerry 10 WebWorks SDK 1.0.2.9\lib\bbwp.js" D:\Work\Development\PhoneGap\workspace\sample\build\cordovaExample.zip -o D:\
Work\Development\PhoneGap\workspace\sample\build
     [exec] [INFO]    Populating application source
     [exec] [INFO]    Parsing config.xml
     [exec] [WARN]    Build ID set in config.xml [version], but no signing password was provided [-g]. Bar will be unsigned
     [exec] [WARN]    Failed to find feature with id: org.apache.cordova
     [exec] [WARN]    Failed to find feature with id: blackberry.find
     [exec] [WARN]    Failed to find feature with id: blackberry.identity.phone
     [exec] [WARN]    Failed to find feature with id: blackberry.pim.Address
     [exec] [WARN]    Failed to find feature with id: blackberry.pim.Contact
     [exec] [WARN]    Failed to find feature with id: blackberry.io.file
     [exec] [WARN]    Failed to find feature with id: blackberry.utils
     [exec] [WARN]    Failed to find feature with id: blackberry.io.dir
     [exec] [WARN]    Failed to find feature with id: blackberry.app.event
     [exec] [WARN]    Failed to find feature with id: blackberry.system.event
     [exec] [WARN]    Failed to find feature with id: blackberry.widgetcache
     [exec] [WARN]    Failed to find feature with id: blackberry.media.camera
     [exec] [WARN]    Failed to find feature with id: blackberry.media.microphone
     [exec] [INFO]    Generating output files
     [exec] [INFO]    Info: Package created: D:\Work\Development\PhoneGap\workspace\sample\build\simulator\cordovaExample.bar
     [exec] [INFO]    Info: Package created: D:\Work\Development\PhoneGap\workspace\sample\build\device\cordovaExample.bar
     [exec] [INFO]    BAR packaging complete

BUILD SUCCESSFUL
Total time: 8 seconds

D:\Work\Development\PhoneGap\workspace\sample> 
```

请注意，找不到**org.apache.cordova功能以及所有****blackberry.***功能。

忽略警告并部署到 BB10 模拟器会导致此错误：i.imgur.com/aUcPM.png

需要注意的是，在部署 PlayBook 而不是 BlackBerry 10 时，不会出现上述警告或执行错误。

如果可以提供任何指导来帮助解决此问题，我们将不胜感激。

非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T02:06:39.607

似乎可以忽略这些警告，因为它成功打包了 bar 文件。找不到的 blackberry.* 功能似乎只有 BlackBerry 7.0 及以下版本才需要。如果部署仅用于 BB10，则从 config.xml 中删除那些 blackberry.* 功能应该是安全的，但如果它也将部署到较低版本，则最好保留它。

至于 org.apache.cordova 这条线，官方论坛的一张海报说：

> 我认为 WebWorks 打包程序试图在 WebWorks SDK 文件夹中找到 org.apache.cordova 以将其复制到 bar 文件中，而实际上 org.apache.cordova 已经存在于您的 www 文件夹中，该文件夹也被复制到 bar 文件中。（尽管如此，我仍然认为访问设备上的 Cordova API 仍然需要这条线）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T02:44:46.783

您看到警告的原因是因为 BlackBerry 10 不支持某些 'blackberry.*' API，所以它只是跳过它们。我相信这与您的屏幕截图无关。

您如何尝试准确访问联系人，您有任何示例代码吗？

# javascript - 将 Javascript 日期转换为 RFC 3339（谷歌日历日期）

> ID：13550965
> 
> 赞同：2
> 
> 时间：2012-11-25T12:23:19.623
> 
> 标签：javascript, datetime, calendar, utc

> **可能重复：**
> [生成类似于 Google Tasks API 的 RFC 3339 时间戳？](https://stackoverflow.com/questions/7244246/generate-an-rfc-3339-timestamp-similar-to-google-tasks-api)

我正在编写一个 javascript 代码来解析 XML 文件中的事件并将它们插入到谷歌日历中。我在将常规 UTC 日期转换为谷歌日历 DateTime 格式时遇到问题。

我的日期以这种格式显示（UTC）：

```
Mon Apr 02 2013 15:14:33 GMT+0300 (Arab Standard Time) 
```

虽然我要转换的格式是（rfc 3999）：

```
2013-1-16T10:00:00.000-07:00 
```

我尝试使用 date.format() 或 getDateTime() 之类的方法，但它从未奏效

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T12:29:36.030

请参阅[生成类似于 Google Tasks API 的 RFC 3339 时间戳？](https://stackoverflow.com/questions/7244246/generate-an-rfc-3339-timestamp-similar-to-google-tasks-api)：

```
/* use a function for the exact format desired... */
function ISODateString(d){
 function pad(n){return n<10 ? '0'+n : n}
 return d.getUTCFullYear()+'-'
      + pad(d.getUTCMonth()+1)+'-'
      + pad(d.getUTCDate())+'T'
      + pad(d.getUTCHours())+':'
      + pad(d.getUTCMinutes())+':'
      + pad(d.getUTCSeconds())+'Z'}

var d = new Date();
print(ISODateString(d)); // prints something like 2009-09-28T19:03:12Z 
```

# linux - Wine 升级到 1.4.1 版后 DLL 文件丢失

> ID：13550967
> 
> 赞同：1
> 
> 时间：2012-11-25T12:23:23.707
> 
> 标签：linux, macos, dll, wine

我曾经在 OSX Mountain Lion 上通过 Wine 1.4.0（通过自制软件安装）运行一些 Windows 应用程序，在我更新到 1.4.1（再次通过自制软件）后，每当尝试运行任何 Windows 应用程序时都会出现以下错误：

```
wine: failed to initialize: dlopen(/usr/local/Cellar/wine/1.4.1/lib/wine/ntdll.dll.so, 258): image not found 
```

关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-11T10:15:50.440

这显然是一个安装程序/包装/自制问题，与葡萄酒本身无关。

# android - 尝试使用 Zxing 读取条形码，但似乎未调用 onActivityResult

> ID：13550969
> 
> 赞同：2
> 
> 时间：2012-11-25T12:23:42.270
> 
> 标签：android, android-intent, zxing

正如标题所说，我正在尝试扫描一维条码，到目前为止我有以下代码：

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);        
    }

    public void test(View view){

        Intent intent = new Intent("com.google.zxing.client.android.SCAN");
        intent.putExtra("SCAN_MODE", "1D_CODE_MODE");
        startActivityForResult(intent, 0);
    }

    public void onActivityResult(int requestCode, int resultCode, Intent intent) {  
          switch (requestCode) {
          case IntentIntegrator.REQUEST_CODE:
             if (resultCode == Activity.RESULT_OK) {

                IntentResult intentResult = 
                   IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);

                if (intentResult != null) {

                   String contents = intentResult.getContents();
                   String format = intentResult.getFormatName();

                   TextView uno = (TextView) findViewById(R.id.textView1);
                   uno.setText(contents);
                   Toast.makeText(this, "Numero: " + contents, Toast.LENGTH_LONG).show();
                   Log.d("SEARCH_EAN", "OK, EAN: " + contents + ", FORMAT: " + format);
                } else {
                   Log.e("SEARCH_EAN", "IntentResult je NULL!");
                }
             } else if (resultCode == Activity.RESULT_CANCELED) {
                Log.e("SEARCH_EAN", "CANCEL");
             }
         }
    }   
} 
```

当然，我在项目中添加了 IntentResult 和 IntentIntegrator。

因此，当按下按钮时扫描仪被正确调用并且它似乎完美地扫描了代码（它在扫描后显示“找到文本”），但似乎没有调用 onActivityResult，因为 TextView 不是 beeing更新，吐司没有出现。

知道错误可能是什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T12:41:58.097

您的第一个错误是没有使用`IntentIntegrator.initiateScan()`，将其替换为您自己手动调用`startActivityForResult()`.

您的第二个错误是假设`IntentIntegrator.REQUEST_CODE`是`0`. 它不是。

因此，使用您当前的代码，您将发送一个请求代码为 的请求`0`，该请求代码返回`onActivityResult()`的是您忽略的请求代码`0`，因为您只是在寻找`IntentIntegrator.REQUEST_CODE`。

只需将`test()`方法的主体替换为对 的调用`initiateScan()`，您的状态就会更好。[这是一个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/Camera/ZXing)，演示了`IntentIntegrator`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T11:06:49.600

我解决了你同样的问题。

```
public class MainActivity extends Activity {

    private TextView tvStatus, tvResult;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        this.tvStatus = (TextView) findViewById(R.id.tvStatus);
        this.tvResult = (TextView) findViewById(R.id.tvResult);

        Button scanBtn = (Button) findViewById(R.id.btnScan);

        scanBtn.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                try {

                    Intent intent = new Intent(
                            "com.google.zxing.client.android.SCAN");
                    intent.putExtra("SCAN_FORMATS", "QR_CODE_MODE");
                    startActivityForResult(intent,
                            IntentIntegrator.REQUEST_CODE);
                } catch (Exception e) {

                    Log.e("BARCODE_ERROR", e.getMessage());
                }
            }
        });
    }

    public void onActivityResult(int requestCode, int resultCode, Intent intent) {

        IntentResult scanResult = IntentIntegrator.parseActivityResult(
                requestCode, resultCode, intent);

        if (scanResult != null) {

            this.tvStatus.setText(scanResult.getContents());
            this.tvResult.setText(scanResult.getFormatName());
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-26T12:21:13.490

必须重写 onActivityResault 函数。只需在函数声明之前添加一个@Override 即可解决。

# android - SharedPreference 在自定义对话框中的使用

> ID：13550973
> 
> 赞同：0
> 
> 时间：2012-11-25T12:23:59.043
> 
> 标签：android, android-listview, sharedpreferences, android-preferences, preferenceactivity

我创建了扩展preferenceActivity 的活动。在该活动中，我打开了显示项目列表的自定义对话框。每当我单击 listview 中的项目时，对话框都会关闭。那时我想将所选项目存储在 SharedPreference 中，以便在应用程序范围内获取该项目。

但我的问题是如何将所选项目存储在 SharedPreference 中？

当我下次打开我的应用程序时，我应该能够检索以前选择的项目。

这是我的 PreferenceActivity 代码：

```
public class SettingsActivity extends PreferenceActivity implements OnSharedPreferenceChangeListener 
{
    SharedPreferences myprefs;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.settings);
        addPreferencesFromResource(R.xml.prefs);

        PreferenceManager.getDefaultSharedPreferences(this).registerOnSharedPreferenceChangeListener(this);

        Preference prefereces=findPreference("alertdialog_Font_Style");
        prefereces.setOnPreferenceClickListener(new OnPreferenceClickListener() {

            public boolean onPreferenceClick(Preference preference) {
                // TODO Auto-generated method stub
                DialogFontStyle objdialog = new DialogFontStyle(SettingsActivity.this,R.style.CustomDialogTheme);
                objdialog.show();
                return true;
            }

        });
    } 
```

这是我的对话课程：

```
public class DialogFontStyle extends Dialog {

    public DialogFontStyle(Context context, int theme) {
        super(context, theme);
        // TODO Auto-generated constructor stub
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.dialog_layout);

        final String[] sizeType = new String[] {"a" , "b" , "c" , "d"};       

            final ListView lst = (ListView)findViewById(android.R.id.list);

            ArrayAdapter<String> adapter = new ArrayAdapter<String> (context,android.R.layout.simple_list_item_1,sizeType);                  
         lst.setAdapter(adapter);

             lst.setOnItemClickListener(new OnItemClickListener() {
                 public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                        long arg3) {
                    // TODO Auto-generated method stub

                    dismiss();
                }
             });
    } 
} 
```

请给我一些解决方案以将数据存储在 sharedpreference 中。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:37:58.973

你有几个选择：

*   您可以扩展[ListPreference](http://developer.android.com/reference/android/preference/ListPreference.html)类来自定义其外观或行为，而不是制作自定义对话框，但依赖于用于[设置屏幕](http://developer.android.com/guide/topics/ui/settings.html)的默认机制。然后，保存将由 ListPreference 超类管理。

*   您可以通过调用 Context.getSharedPreferences() 方法获取共享首选项来手动存储首选项，然后获取允许您将值放入共享首选项并提交这些更改的[编辑器。](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html)

取回之前存储的item，只需要再次获取SharedPreferences对象，调用想要的get..()方法获取之前存储的key即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T12:38:27.073

要编写一些东西来分享偏好，请使用以下代码：

```
SharedPreferences mPrefs = PreferenceManager.getDefaultSharedPreferences( mContext );
SharedPreferences.Editor editor = mPrefs.edit();
editor.putBoolean( KEY, VALUE );
editor.commit(); 
```

mContext should be context of your activity or application not dialog. Or if your dialog is within your activity use `SettingsActivity.this` or create class member mContext and initi in on `onCreate()`

# java - 根据存储的对象中字段的值对 ArrayList 进行排序

> ID：13550977
> 
> 赞同：0
> 
> 时间：2012-11-25T12:24:14.587
> 
> 标签：java

> **可能重复：**
> [按对象属性对对象的 ArrayList 进行排序](https://stackoverflow.com/questions/3342517/sorting-arraylist-of-objects-by-object-attribute)

基本上我有一个存储对象的 ArrayList，每个对象都有一个存储整数的字段。我想通过该整数的升序将对象存储在我的 ArrayList 中。

有没有一种简单的方法可以做到这一点，我查看了 Java API 文档，但找不到任何看起来合适的东西，如果这很简单，但听起来应该很简单，如果我能找到正确的文档.

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:25:16.243

创建您的自定义比较器类实现`java.util.Comparator`和使用`java.util.Collections.sort(list, comparator)`.

# objective-c - 如何将 uiimage 传递给另一个视图控制器？

> ID：13550979
> 
> 赞同：0
> 
> 时间：2012-11-25T12:24:30.230
> 
> 标签：objective-c, cocoa-touch, uiviewcontroller, uiimage, uiimagepickercontroller

如何将 MainViewController 中的`uiimage`选定内容传递`uiimagepickercontroller`给 SecondViewController？它确实推送到了 SecondViewController，但是它`uiimage`是空的。

我在网上搜索过，尝试了解决方案，但仍然无法正常工作。

`photoImage`是`uiimageview`我在 SecondViewController 中声明的。

```
- (void)imagePickerController:(UIImagePickerController *) picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
   [picker dismissModalViewControllerAnimated:YES];

    SecondViewController *secondVC = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    [secondVC.photoImage setImage:[info objectForKey:@"UIImagePickerControllerEditedImage"]];
    [self.navigationController pushViewController:secondVC animated:YES];
    [secondVC release];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:11:55.390

在调用该控制器的方法之前，您的第二个视图控制器中的A`UIImageView`不存在。`viewDidLoad`将一个属性放入`SecondViewController`保存 a `UIImage`，当您推送视图控制器（而不是尝试设置图像视图）时，存储对您想要使用的图像的引用，然后将您的`setImage:`调用移动到第二个视图控制器的 `viewDidLoad` `。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T13:37:22.443

创建一个共享类来存储图像，并在任何你想要的地方访问它。

在 MainViewController 中将该图像分配到该共享类的 ivar 中，然后在 SecondViewController 中访问它。

编辑 ：

下面的代码展示了如何实现共享类，这可能在语法上不正确，因为目前我没有使用 mac，所以我无法编译。

```
@interface SomeManager : NSObject
    +(id)myImage;
@end

@implementation SomeManager
    +(id)myImage{    
        static id myImage= nil; 
        @synchronized([self class]){ 
            if (myImage== nil) { 
                myImage= //put your image here; 
            } 
        }
        return myImage;
    }
 @end 
```

# android - 如何测试 NFC 应用程序？

> ID：13550981
> 
> 赞同：3
> 
> 时间：2012-11-25T12:24:45.837
> 
> 标签：android

我从 NFC Android 应用程序开始，我有点困惑。我正在使用 Mono for Android (C#)，我有一个阅读器 ACR122U 和不同的标签。我已经使用 Mono for Android 的模拟器来启动我的基本 android 应用程序（没有 NFC），但是我如何启动一个带有 NFC 的 android 应用程序？

例如，我如何测试我的应用是读取还是写入标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:15:31.873

您可以使用 junit 来测试您正在阅读和编写的内容的逻辑。诸如robotium 和roboletric 之类的东西将允许您模拟或控制您的应用程序与意图等Android 组件的交互。

# jar - 将我的项目部署到 jelestic 云

> ID：13550983
> 
> 赞同：0
> 
> 时间：2012-11-25T12:24:52.653
> 
> 标签：jar, applet, web-deployment, war

总的来说，作为 Web 技术的新手，我一直在尝试将一个项目部署到名为“jelestic”的免费云中。我需要上传 .war。

问题是我有一个文件夹，其中包含一个工作小程序、一些解释其功能的网页以及一些使小程序工作所必需的库 .jar。我看不到如何将整个文件夹包装成 .war 文件。

大多数教程告诉我如何通过 localhost:8080 部署小程序。但是在这里，我想将文件夹中的所有文件打包并将其作为 .war 文件上传。

你能告诉我怎么做这个任务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:35:16.450

如果您将您的小程序放在 war 目录下的某个目录中，它将可以公开访问。因此，如果您将您的 applet 和 lib jar 放入其中，让我们说：app.war/applet/applet.jar app.war/applet/lib.jar 您只需要一个带有 applet 标记指向的页面`http://appserver/app/applet/applet.jar`：)

# c# - ASP.NET 网站将部署在带有数据库的 Windows Azure 上

> ID：13550994
> 
> 赞同：1
> 
> 时间：2012-11-25T12:26:42.297
> 
> 标签：c#, asp.net, deployment, azure

我知道这是一个非常常见的问题，我可以找到几个[答案](https://stackoverflow.com/questions/2303401/i-need-a-walkthrough-or-steps-of-how-to-deploy-asp-net-website-on-windows-azure)，但我认为我的情况有点不同。

因此，我有一个使用“Web 表单”构建的 ASP.NET 网站（不是 Web 应用程序）。它是一个非常简单的网站，可以进行大量 REST 调用并与 SQL Server 2008 对话。您能帮我找到使用 VS 2010 在 Windows Azure 上部署相同内容的分步指南吗？截至目前，该网站在传统的网络托管服务器上运行良好。

到目前为止，我得到的是使用 MVC（并使用 ASP.NET Web 应用程序，而不是网站）的方法。我认为我根本不应该关心 MVC 吗？网站与 Web 应用程序方面是否有所不同？如果是，我是否需要将网站转换为 Web 应用程序？

网络上有很多内容，所以考虑到我的情况，我有点困惑。有人可以把我放在正确的方向吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T13:31:08.623

您需要将您的[网站项目转换为 ASP.NET Web 角色](https://stackoverflow.com/q/735054/736079)项目，[无论您是否首先将其转换为 ASP.NET Web 应用程序并不重要](http://msdn.microsoft.com/en-us/library/aa983476%28v=vs.100%29.aspx)。您已经链接到的教程的其余部分也适用。

无需查看 ASP.NET MVC，它是一种与 Web 表单不同的技术，无需迁移到它即可将您的网站托管在 Azure 上。

至于您的数据库，除非您自己将其托管在 VM-Role 或其他地方（并使用 Azure Connect 进行连接），否则您需要将其转换为 Sql Azure 或 Azure 表存储。SQL Azure 在很大程度上与 SQL Server 兼容，但有一些功能不受支持。

# ajax - chrome 桌面 HTML 通知

> ID：13550995
> 
> 赞同：0
> 
> 时间：2012-11-25T12:26:44.513
> 
> 标签：ajax, google-chrome

我已经从以下位置实现了 chrome 扩展：

[http://developer.chrome.com/extensions/notifications.html](http://developer.chrome.com/extensions/notifications.html)

如何添加可以从我的服务器 mysql 读取的 html 通知，如果有新信息，它将触发新通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:54:53.130

目前还不是很清楚您要达到的目标。看看这个插件：[http](http://athousandnodes.com/article/html5-desktop-notification) ://athousandnodes.com/article/html5-desktop-notification 。根据开发人员的说法，可在 Chrome、Safari 和 Opera 中使用。

# jquery - 按类别过滤 Wordpress 帖子而不重新加载（jquery？）

> ID：13550997
> 
> 赞同：2
> 
> 时间：2012-11-25T12:27:00.137
> 
> 标签：jquery, ajax, json, filter, categories

我一直在寻找一种方法来过滤我在[http://www.waziproject.com/wazimagazine/](http://www.waziproject.com/wazimagazine/)上的帖子，而无需重新加载页面。我看过 jquery / json & ajax 和/或这些的组合。无济于事...

Isotope 和 Quicksand 插件显然只允许使用 5 个类别。

所以我的问题是，是否有人可以帮助我将以下内容变成不需要刷新/重新加载页面的过滤器列表...

```
<div id="queryMenu">
<ul>
    <li><a href="#" id="business_work">Business & Work</a></li>
    <li><a href="#" id="development_sustainability">Development & Sustainability</a></li>
    <li><a href="#" id="education">Education</a></li>
    <li><a href="#" id="health_medecine">Health & Medecine</a></li>
    <li><a href="#" id="human_rights">Human Rights</a></li>
    <li><a href="#" id="law_order">Law & Order</a></li>
    <li><a href="#" id="media_information">Media & Information</a></li>
    <li><a href="#" id="nations">Nations</a></li>
    <li><a href="#" id="political_economy">Political Economy</a></li>
    <li><a href="#" id="research_innovation">Research & Innovation</a></li>
    <li><a href="#" id="reset">All Posts</a></li>
</ul> 
```

任何帮助将不胜感激！提前致谢！

# unit-testing - 如何仅在特定错误退出值（0以外）上将 Jenkins 构建标记为成功？

> ID：13550999
> 
> 赞同：12
> 
> 时间：2012-11-25T12:27:35.200
> 
> 标签：unit-testing, jenkins, continuous-integration, hudson

当我运行`Execute shell`构建步骤来执行脚本并且该脚本返回时`0`，`Jenkins`将构建标记为`SUCCESS`，否则将其标记为`FAILURE`预期的默认行为，因为这`0`意味着没有错误，任何其他值都表示错误。

**有没有办法将构建标记为仅当返回值与除（例如，...）`SUCCESS`以外的特定值匹配时？`0``1``2``3`**

*PS：如果您想知道我为什么要寻找它，这将允许我对 Jenkins 本身执行单元测试，因为我的脚本被编写为根据各种因素返回不同的退出值，因此我可以根据不同的情况期待某些值在某些设置错误上，并确保我的整个 Jenkins 集成都能解决这些问题。*

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-26T14:11:35.883

好吧，我继续说，没有人知道关于根据特定退出代码设置特定作业状态的插件的新功能 :( 我通过创建一个包含以下内容的步骤`IRC #jenkins`来设法做我想做的事：`Execute shell`

```
bash -c "/path/to/myscript.sh; if [ "\$?" == "$EXPECTED_EXIT_CODE" ]; then exit 0; else exit 1; fi" 
```

- 运行脚本`bash -c`允许捕获退出代码并防止`Jenkins`在退出代码不同于 0 时停止构建执行（通常是这样）。

-`\$?`被解释为`$?`在脚本执行之后并表示其退出代码。

-`$EXPECTED_EXIT_CODE`是我的工作参数之一，它定义了我期望的退出代码。

-`if`该语句简单地执行以下操作：如果我得到预期的退出代码，则以 0 退出，以便将构建标记为`SUCCESS`，否则以 1 退出，以便将构建标记为`FAILURE`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-12T15:25:09.417

```
/path/to/myscript.sh || if [ "$?" == "$EXPECTED_EXIT_CODE" ]; then continue; else exit 1; fi 
```

我会使用 continue 而不是 exit 0 以防您需要运行以下其他项目。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-26T07:51:41.563

可以通过**[Text-finder Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Text-finder+Plugin)**处理它：

*   让您的脚本打印即将退出的退出代码，例如：
    `Failed on XXX - Exiting with RC 2`

*   使用**Text-finder Plugin**捕捉该错误消息并将构建标记为“失败”或“不稳定”，
    例如，如果您决定**RC 2、3 和 4**应将构建标记为“不稳定”，请在这种模式：
    `Exiting with RC [2-4]`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T14:01:34.053

为您的 shell 脚本创建一个包装器。让该包装器执行您的测试，然后根据您想要的任何标准设置返回值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-05T16:27:47.793

我这样做：

```
set +e
./myscript.sh
rc="$?"
set -e
if [ "$rc" == "$EXPECTED_CODE_1" ]; then
    #...actions 1 (if required)
    exit 0
elif [ "$rc" == "$EXPECTED_CODE_2" ]; then
    #...actions 2 (if required)
    exit 0
else
    #...actions else (if required)
    exit "$rc"
fi
echo "End of script" #Should never happen, just to indicate there's nothing further 
```

这`+e`是为了避免默认的 Jenkins 行为在脚本执行期间报告任何打喷嚏的 FAILURE。然后回来`-e`。

这样您就可以适当地处理退出代码，否则最终会返回代码失败。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-21T12:48:37.817

```
robocopy "srcDir" "destDir" /"copyOption" if %ERRORLEVEL% LEQ 2 exit 0 
```

如果 robocopy 退出代码小于或等于 2，那么它将成功退出。

**Robocopy 退出代码：**

```
0×00   0       No errors occurred, and no copying was done.
               The source and destination directory trees are completely synchronized. 

0×01   1       One or more files were copied successfully (that is, new files have arrived).

0×02   2       Some Extra files or directories were detected. No files were copied
               Examine the output log for details. 

0×04   4       Some Mismatched files or directories were detected.
               Examine the output log. Housekeeping might be required.

0×08   8       Some files or directories could not be copied
               (copy errors occurred and the retry limit was exceeded).
               Check these errors further.

0×10  16       Serious error. Robocopy did not copy any files.
               Either a usage error or an error due to insufficient access privileges
               on the source or destination directories. 
```