# StackOverflow 问答 12676000-12676999

# cocos2d-iphone - 玩家断开连接问题 GKMatch 和 Gamekit

> ID：12676000
> 
> 赞同：3
> 
> 时间：2012-10-01T15:10:21.330
> 
> 标签：cocos2d-iphone, game-center, cocos2d-x, gamekit

我正在使用 GameKit 处理 cocos2d 游戏。我正在使用 GKMatch 与 2 名玩家创建比赛。一切对我来说都很好，但是当一个玩家进入后台状态或按下主页按钮时，玩家就会断开连接。我也想在后台运行 GKMatch 实例。请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:12:56.880

我不认为这是可能的，毕竟“背景”意味着玩家停止播放。

虽然[编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/Introduction/Introduction.html)可能没有明确提到这一点，但它做了一件事，即当应用程序进入前台时自动登录播放器，这对我来说表明当应用程序在后台时根本没有播放器 GKMatch 可以连接。

# asp.net-mvc-4 - aspnet_regiis.exe -ir 在 Windows 8 上不起作用

> ID：12676002
> 
> 赞同：45
> 
> 时间：2012-10-01T15:10:25.107
> 
> 标签：asp.net-mvc-4, iis-8

我正在尝试使用 IIS8 将 ASP.NET MVC3 应用程序部署到我的 Windows 8 机器上。当我尝试路由到该站点时，出现以下错误：

![HTTP 错误 403.14 - 禁止](../Images/7b35c99f5d6bfdae39d2f5daa0e7d7aa.png)

我在这个问题上能找到的几乎所有东西都说要运行：

```
aspnet_regiis.exe -ir 
```

当我在我的 Windows 8 机器上运行它时，我收到以下消息：

```
Microsoft Windows [Version 6.2.9200]
(c) 2012 Microsoft Corporation. All rights reserved.

C:\Users\Justin>C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe
-ir
Microsoft (R) ASP.NET RegIIS version 4.0.30319.17929
Administration utility to install and uninstall ASP.NET on the local machine.
Copyright (C) Microsoft Corporation.  All rights reserved.
Start installing ASP.NET (4.0.30319.17929) without changing existing web 
applications to use this version of ASP.Net.  This option is not supported on 
this version of the operating system.  Administrators should instead install / 
uninstall ASP.NET 4.5 with IIS8 using the "Turn Windows Features On/Off" dialog, 
the Server Manager management tool, or the dism.exe command line tool.  For more 
details please see http://go.microsoft.com/fwlink/?LinkID=216771.
Finished installing ASP.NET (4.0.30319.17929) without changing existing web 
applications to use this version of ASP.Net. 
```

我的系统上已经安装了 ASP.NET 4.5。

![Windows功能](../Images/43bc310cfa5cf25198e0dedf43087ed8.png)

我的应用程序在 Visual Studio 中正常运行，但我无法部署它来挽救我的生命。我完全不知道从这里去哪里。我也为此站点尝试了集成和经典管道模式。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-10-14T08:52:22.877

运行以下命令，它将在 IIS 中安装和注册 ASP.NET 4.5：

```
dism /online /enable-feature /featurename:IIS-ASPNET45 /all 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-02T11:43:51.977

我有同样的问题。到目前为止，我只找到了这个[论坛帖子](http://forums.asp.net/t/1811986.aspx/1)，其中一个答案表明通过 Web Platform Installer 安装解决了这个问题，尽管这对我不起作用。IIS ASP.NET 4.5 功能已被禁用，因为它已安装。

**更新：** 我终于让它工作了。

按照这个 SO question 中的说明在 IIS 中启用 wcf 服务： [WCF on IIS8; *.svc 处理程序映射不起作用](https://stackoverflow.com/questions/11116134/wcf-on-iis8-svc-handler-mapping-doesnt-work?rq=1)

这里还有一些关于[如何安装处理程序映射的信息](http://msdn.microsoft.com/en-us/library/vstudio/ms752252%28v=vs.90%29.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-11T11:08:59.240

对我有用的是： - 在删除/添加 Windows 功能中取消选中 4.5 和 3.5 - 重新启动计算机 - 在删除/添加 Windows 功能中选中 4.5 和 3.5。

从那时起，一切都再次奏效。

# javascript - Ember.js 从 .observes 获取更改值的键

> ID：12676018
> 
> 赞同：0
> 
> 时间：2012-10-01T15:10:45.590
> 
> 标签：javascript, coffeescript, ember.js

在[Ember.js](http://emberjs.com/)中，当观察具有相同闭包的多个值时，有没有办法获取对象内观察到的变化的键？

例如

```
MyItem = Ember.Object.extend
    name: null
    age: null
    height: null
    weight: null
    has_grown_or_shrunk: false
    has_grown_or_shrunk_obs: (->
        @set('has_grown_or_shrunk', true)
    ).observes('height','weight') 
```

有什么方法`has_grown_or_shrunk_obs`可以知道哪个键触发了更改？似乎没有来自[这里的文档](http://docs.emberjs.com/symbols/Ember.Observable.html)

是否有另一种更好的方法来观察具有相同逻辑的多个键，让我知道哪个键发生了变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:30:08.313

**据我所知，这是无证**的，但这是我发现的

```
has_grown_or_shrunk_obs: (->
    console.log arguments
    @set('has_grown_or_shrunk', true)
).observes('height','weight') 
```

输出：

```
[Class, "height", undefined] 
```

其中“dom_class”是我的密钥的名称。所以看起来传递的第二个参数是更改元素的键。

这个伪代码是如何完成它的。

```
((self, key) ->
    #Logic here
).observes(key1, key2, key3...) 
```

# ios - UIDevice 方向未按预期工作

> ID：12676019
> 
> 赞同：1
> 
> 时间：2012-10-01T15:11:01.047
> 
> 标签：ios, uideviceorientation

我遇到了设备方向问题。我有一个有一些视图的 iPhone 应用程序，除了一个视图之外，所有视图都不应该旋转。所以我看看里面`Info.plist`；我选择了两个设备方向，纵向和横向，在视图中我不想旋转，所以我放了这个。

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return NO;
} 
```

但所有的观点都会旋转。即使有这些线条。如果改成`Info.plist`不支持人像。它工作正常，只是我想旋转的视图，我把

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return YES;
} 
```

它不起作用。我使用 iOS 6。也尝试过

```
- (NSUInteger)supportedInterfaceOrientations
- (BOOL)shouldAutorotate 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:19:10.577

尝试准确指定您希望视图旋转到的方向。例如，如果您只想要肖像，请使用：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

对于旋转到所有视图，您仍然可以使用 YES，尽管这将允许它旋转到并不总是需要的倒置视图。要同时获得横向和正面朝上的纵向，请使用以下命令：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} 
```

# css - 大不重复背景，需要预加载器来加载其中的一部分

> ID：12676022
> 
> 赞同：0
> 
> 时间：2012-10-01T15:11:11.797
> 
> 标签：css, background, background-image

我有[背景](http://i.stack.imgur.com/zp3KJ.jpg)，图片大小是 6 MB，我不会写`background: url(...)`。

这个长页面由 6 个部分组成，我决定将背景划分为 6 张图片，我希望每个块的背景一个接一个地加载，并在背景加载之前在每个块中显示一个预加载器。

```
<div class="page" id="page_1">
   <div class="preloader"></div>
   <div class="page-content"></div>
</div>

<div class="page" id="page_2">
   <div class="preloader"></div>
   <div class="page-content"></div>
</div>

<div class="page" id="page_3">
   <div class="preloader"></div>
   <div class="page-content"></div>
</div>
....... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:30:41.493

根据@meager 的[评论](https://stackoverflow.com/questions/12676022/big-non-repeat-background-need-preloader-for-loading-parts-of-one#comment17106350_12676022 "@meager 的评论")，您最好将其中有船的部分、页脚和重复背景分开。我已经为这个做了你的功课。

看看[这个 JSFiddle](http://jsfiddle.net/YatharthROCK/MRUxf/ "测试 JSFiddle")看看我是如何测试它的。

# HTML 代码

```
<html>
  <head>
    ...
  </head>
  <body>
    <div id="top-image">
    </div>
    ...
  </body>
</html> 
```

# CSS 代码

对于顶部：

```
#top-image {
    background: url('top.jpg');
    background-repeat: no-repeat; /*to counteract the default value*/

    width: 100%; /*this may get screwed up otherwise*/
    height: 850px; /*allowing a bit more height to remain safe*/
} 
```

对于中间重复部分：

```
body {
    background: url('middle.jpg');
    background-repeat: repeat-y; /*want this one to repeat*/
    background-position: 0px 835.5px; /*so it fits perfectly with the overlayed image*/
} 
```

对于底部页脚：

> 自己想办法！不，开玩笑的。只需使用我上面用于顶部的相同原理即可。

# 图片

船顶部分： ![最佳](../Images/a790341bdfd89c94997ee02bc7d5ecd9.png)

中间重复部分： ![中间](../Images/9f449f2b2bf2a83f70aa702e601b48ec.png)

页脚： ![底部](../Images/aa93867d26cb52fd82488c304fa66bb3.png)

# javascript - CKEditor 链接对话框删除协议

> ID：12676023
> 
> 赞同：6
> 
> 时间：2012-10-01T15:11:12.577
> 
> 标签：javascript, ckeditor

在我的 CKEditor 中，我删除了链接对话框的“linkType”和“protocol”输入。

```
 CKEDITOR.on( 'dialogDefinition', function( ev )
    {
        var dialogName = ev.data.name;
        var dialogDefinition = ev.data.definition;

        if ( dialogName == 'link' )
        {
            var infoTab = dialogDefinition.getContents( 'info' );
            infoTab.remove( 'linkType' );
            infoTab.remove( 'protocol' );
        }

    }); 
```

但是，一旦我输入“g”，我就会输入类似[https://google.com](https://google.com)的内容，https:// 就会被删除。
我检查了输出，它总是说 http:// 忽略输入。

我怎样才能关闭这种愚蠢的行为？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-14T11:02:58.440

经过大量的研究、调试和调整，我终于成功了！！！

这是我的做法：

```
CKEDITOR.on('dialogDefinition', function(e) {
    // NOTE: this is an instance of CKEDITOR.dialog.definitionObject
    var dd = e.data.definition; 

    if (e.data.name === 'link') {
        dd.minHeight = 30;

        // remove the unwanted tabs
        dd.removeContents('advanced');
        dd.removeContents('target');
        dd.removeContents('upload');

        // remove all elements from the 'info' tab
        var tabInfo = dd.getContents('info');
        while (tabInfo.elements.length > 0) {
            tabInfo.remove(tabInfo.elements[0].id);
        }

        // add a simple URL text field
        tabInfo.add({
            type : 'text',
            id : 'urlNew',
            label : 'URL',
            setup : function(data) {
                var value = '';
                if (data.url) {
                    if (data.url.protocol) {
                        value += data.url.protocol;
                    }
                    if (data.url.url) {
                        value += data.url.url;
                    }
                } else if (data.email && data.email.address) {
                    value = 'mailto:' + data.email.address;
                }
                this.setValue(value);
            },
            commit : function(data) {
                data.url = { protocol: '', url: this.getValue() };
            }
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:42:31.550

恐怕没有办法改变它。您必须手动编辑[几行代码](https://github.com/ckeditor/ckeditor-dev/blob/master/plugins/link/dialogs/link.js#L396-411)以使其按您的方式工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-29T13:15:26.473

我最近找到了一种隐藏**链接类型**的方法，因此您不必完全删除它。将样式设置为`display: none`如下所示：

```
infoTab.get( 'linkType' ).style = 'display: none'; 
```

我认为它也适用于**协议**，但我还没有测试过。[我在这里](https://stackoverflow.com/questions/25025769/ckeditor-remove-link-type-option-but-set-url-as-default-link-type)回答了同样的问题

希望这对某人有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-17T21:08:37.790

这是我在 v4.5.1 中删除协议的方法：

```
CKEDITOR.on('dialogDefinition', function(ev) {
    var dialogName = ev.data.name;
    var dialogDefinition = ev.data.definition;

    if (dialogName === 'link') {
        var infoTab = dialogDefinition.getContents('info');
        infoTab.remove('protocol');

        var url = infoTab.get('url');
        url.onKeyUp = function(){};
        url.setup = function(data) {
            this.allowOnChange = false;
            if (data.url) {
                var value = '';
                if (data.url.protocol) {
                    value += data.url.protocol;
                }
                if (data.url.url) {
                    value += data.url.url;
                }
                this.setValue(value);
            }
            this.allowOnChange = true;
        };
        url.commit = function(data) {
            data.url = { protocol: '', url: this.getValue() };
        };
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-05T14:03:57.633

对于像我这样的懒人，只需做一个快速的核心文件破解：

1.  打开插件/链接/对话框/link.js
2.  在最小化版本中找到`d=/^(http|https|ftp|news):\/\/(?=.)/i.exec(b);`
3.  消除`http|https|ftp|`
4.  保存文件，上传到你的服务器

如果重新加载后它不起作用，这可能是缓存问题。以隐私模式打开浏览器，导航到您的 ckeditor 并重试。祝你好运。

# c# - 信息亭的触摸屏键盘

> ID：12676030
> 
> 赞同：1
> 
> 时间：2012-10-01T15:11:43.043
> 
> 标签：c#, .net, touchscreen, kiosk

我为用于桌面应用程序的鼠标控制键盘编写了一个简单的 c# windows 窗体应用程序（.net，在 Visual Studios 2012 中）。最终，我想要一个可以在类似信息亭的设置中的触摸屏上使用的键盘形式。

我的问题：我可以期望桌面应用程序在触摸屏上“按原样”工作吗？我特别关心的是我是否可以合理地期望鼠标点击事件拦截触摸屏上的触摸事件，或者我是否应该先验地考虑导入某些库和/或绑定“点击”以外的事件。我只是自己测试它，但我现在没有访问可以运行应用程序的触摸屏设备的权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:16:52.220

> 我可以期望桌面应用程序在触摸屏上“按原样”工作吗？

是的，将“触摸”转换为点击取决于硬件。您可以编写更高级的应用程序，专门针对触摸屏设备，例如滑动/捏合等。但是，如果您的应用程序只是一个带有按钮的基本应用程序，它应该在触摸屏上都可以正常工作。

# javascript - Twitter Bootstrap Carousel Height 变为 0px 并出现额外的 div

> ID：12676041
> 
> 赞同：1
> 
> 时间：2012-10-01T15:12:19.897
> 
> 标签：javascript, jquery, twitter-bootstrap, carousel

我对 Twitter Bootstrap Carousel 有一个奇怪的问题。请查看[http://www.bettondesignwork.co.uk/cheapbeds4u/](http://www.bettondesignwork.co.uk/cheapbeds4u/)

目前有三个相同的图像。第一个图像加载正常，但是当第二个图像在包含 div 的高度中滑动时动画到 0px。除此之外，在 carousel 周围还会生成一个额外的 div 。

实际的html：

```
<section id="top" class="container">
<div id="TopCarousel" class="moduletable carousel slide">
        <div class="carousel-inner">
            <div class="item">
                <img src="images/slideshow/homepage/01.jpg" alt="" />
                <div class="carousel-caption"></div>
            </div>
            <div class="item">
                <img src="images/slideshow/homepage/02.jpg" alt="" />
                <div class="carousel-caption"></div>
            </div>
            <div class="item">
                <img src="images/slideshow/homepage/03.jpg" alt="" />
                <div class="carousel-caption"></div>
            </div>
        </div>
    </div>
</section> 
```

呈现的 HTML：

```
<section id="top" class="container">
<div style="margin: 0px 0px 20px; position: relative; overflow: hidden; height: 0px;">
<div id="TopCarousel" class="moduletable carousel slide" style="margin: -340px 0px 0px; overflow: hidden;">
        <div class="carousel-inner">
            <div class="item active">
                <img src="images/slideshow/homepage/01.jpg" alt="" />
                <div class="carousel-caption"></div>
            </div>
            <div class="item">
                <img src="images/slideshow/homepage/02.jpg" alt="" />
                <div class="carousel-caption"></div>
            </div>
            <div class="item">
                <img src="images/slideshow/homepage/03.jpg" alt="" />
                <div class="carousel-caption"></div>
            </div>
        </div>
    </div>
</div>
</section> 
```

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T08:15:46.917

这是 Joomla 3.0 和 Bootstrap 轮播功能的问题。正如上面评论中所指出的，Mootools 和 jQuery 在 J3 安装中默认一起运行。

我的解决方法是安装并激活这个插件 - [http://extensions.joomla.org/extensions/core-enhancements/performance/mootools/15748](http://extensions.joomla.org/extensions/core-enhancements/performance/mootools/15748)

This fixes the problem for me as can be seen here:

[http://www.littledonkey.net](http://www.littledonkey.net)

Beware though that this disables mootools completely so somethings may stop working as expected...

Cheers,

Adam

# visual-studio - 如何进行代码分析以忽略资源文件中的换行符？

> ID：12676048
> 
> 赞同：0
> 
> 时间：2012-10-01T15:12:31.433
> 
> 标签：visual-studio, code-analysis, resource-files

`<br>`有没有办法让代码分析在我的资源文件中给我关于文本的拼写警告时忽略换行符？我知道我可以将它们添加到我的代码分析字典中，但我很确定有一种方法可以让它们在没有它的情况下被忽略。

警告是标准的 CA1703 警告，对于`br`标签，它给了我类似的东西：

> `<br>`更正字符串值“blah blah blah”中“br”的拼写

这是一个使用 Visual Studio 2010 的普通 winform 项目。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-01T15:26:34.693

将一个名为 CustomDictionary.xml 的文件添加到您的项目中

看起来像

```
<?xml version="1.0" encoding="utf-8" ?>
<Dictionary>
  <Words>
    <Recognized>
      <Word>br</Word>
    </Recognized>
  </Words>
</Dictionary> 
```

或者可能是 <br>，可能是，从未在标签上使用过它。

更多信息在这里[VS 代码分析和字典](http://msdn.microsoft.com/en-us/library/bb514188.aspx)

# java - 如何配置“溢出”的网格线

> ID：12676053
> 
> 赞同：2
> 
> 时间：2012-10-01T15:12:45.603
> 
> 标签：java, jfreechart

如何配置它溢出的网格？

它应该如下所示：

![示例图表](../Images/be4fe1190bf72523a3542b317af3fafe.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:32:22.203

我不知道这样的功能，但您可能会查看在[`drawString()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#drawString%28java.lang.String,%20int,%20int%29)渲染器的[`drawRangeGridline()`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/renderer/category/AbstractCategoryItemRenderer.html#drawRangeGridline%28java.awt.Graphics2D,%20org.jfree.chart.plot.CategoryPlot,%20org.jfree.chart.axis.ValueAxis,%20java.awt.geom.Rectangle2D,%20double%29)方法中调用，请参见[此处](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/renderer/category/AbstractCategoryItemRenderer.html#line.763)。[基线](http://docs.oracle.com/javase/7/docs/api/java/awt/FontMetrics.html)坐标应该是 near ，`(dataArea.getMinX(), v)`虽然我没试过。

# php - PHP登录脚本不起作用并显示错误

> ID：12676062
> 
> 赞同：-1
> 
> 时间：2012-10-01T15:13:14.903
> 
> 标签：php, html, mysql

目前我正在编写一个允许您注册和登录的脚本。注册工作正常，但我的登录显示错误（即错误 - 登录无效。不存在这样的用户（php 脚本的最后一行，即使用户存在）。我的 mysql 表是`users1.`我的登录表单及其处理的代码如下——

```
 <?php 

    include 'dbc.php';

    $err = array();

    foreach($_GET as $key => $value) {
        $get[$key] = filter($value); //get variables are filtered.
    }

    if ($_POST['doLogin']=='Login')
    {

    foreach($_POST as $key => $value) {
        $data[$key] = filter($value); // post variables are filtered
    }

    $email = $data['email'];
    $pass = $data['password'];

    if (strpos($email,'@') === false) {
        $user_cond = "username='$email'";
    } else {
          $user_cond = "email='$email'";

    }

    $result = mysql_query("SELECT `id`,`password`,`full_name`,`approved` FROM users1 WHERE 
               $user_cond
                AND `banned` = '0'
                ") or die (mysql_error()); 
    $num = mysql_num_rows($result);

      // Match row found with more than 1 results  - the user is authenticated. 
        if ( $num > 0 ) { 

        list($id,$password,$full_name,$approved) = mysql_fetch_row($result);

        if(!$approved) {
        //$msg = urlencode("Account not activated. Please check your email for activation code");
        $err[] = "Account not activated. Please check your email for activation code";

        //header("Location: login.php?msg=$msg");
         //exit();
         }

            //check against salt
        if ($password === password($pass,substr($password,0,9))) { 
        if(empty($err)){            

         // this sets session and logs user in  
           session_start();
           session_regenerate_id (true); //prevent against session fixation attacks.

           // this sets variables in the session 
            $_SESSION['user_id']= $id;  
            $_SESSION['username'] = $full_name;
            $_SESSION['HTTP_USER_AGENT'] = $_SERVER['HTTP_USER_AGENT'];

            //update the timestamp and key for cookie
            $stamp = time();
            $ckey = GenKey();
            mysql_query("update users1 set `ctime`='$stamp', `ckey` = '$ckey' where id='$id'") or die(mysql_error());

            //set a cookie 

           if(isset($_POST['remember'])){
                      setcookie("user_id", $_SESSION['user_id'], time()+60*60*24*COOKIE_TIME_OUT, "/");
                      setcookie("user_key", sha1($ckey), time()+60*60*24*COOKIE_TIME_OUT, "/");
                      setcookie("username",$_SESSION['username'], time()+60*60*24*COOKIE_TIME_OUT, "/");
                       }
              header("Location: myaccount.php");
             }
            }
            else
            {
            //$msg = urlencode("Invalid Login. Please try again with correct user email and password. ");
            $err[] = "Invalid Login. Please try again with correct user email and password.";
            //header("Location: login.php?msg=$msg");
            }
        } else {
            $err[] = "Error - Invalid login. No such user exists";
          }     
    }

    ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>

Members' Login</title>

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<script language="JavaScript" type="text/javascript" src="js/jquery-1.3.2.min.js"></script>
<script language="JavaScript" type="text/javascript" src="js/jquery.validate.js"></script>
  <script>
  $(document).ready(function(){
    $("#logForm").validate();
  });
  </script>
<link href="styles.css" rel="stylesheet" type="text/css">

</head>
<body>

<table width="100%" border="0" cellspacing="0" cellpadding="5" class="main">
  <tr> 
    <td colspan="3">&nbsp;</td>
  </tr>
  <tr> 
    <td width="160" valign="top"><p>&nbsp;</p>
      <p>&nbsp; </p>
      <p>&nbsp;</p></td>
    <td width="732" valign="top"><p>&nbsp;</p>
      <h3 class="titlehdr"><b>Login</b>
      </h3>  
      <p>
      <?php

      if(!empty($err))  {
       echo "<div class=\"msg\">";
      foreach ($err as $e) {
        echo "$e <br>";
        }
      echo "</div>";    
}     
      ?></p>
      <form action="login.php" method="post" name="logForm" id="logForm" >
        <table width="65%" border="0" cellpadding="4" cellspacing="4" class="loginform">
          <tr> 
            <td colspan="2">&nbsp;</td>
          </tr>
          <tr> 
            <td width="38%">Username / Email</td>
            <td width="62%"><input name="usr_email" type="text" class="required" id="txtbox" size="25"></td>
          </tr>
          <tr> 
            <td>Password</td>
            <td><input name="password" type="password" class="required password" id="txtbox" size="25"></td>
          </tr>
          <tr> 
            <td colspan="2"><div align="center">
                <input name="remember" type="checkbox" id="remember" value="1">
                Remember me</div></td>
          </tr>
          <tr> 
            <td colspan="2"> <div align="center"> 
                <p> 
                  <input name="doLogin" type="submit" id="doLogin3" value="Login">
                </p>
                <p><a href="register.php">Register Free</a><font color="#FF6600"> 
                  |</font> <a href="forgot.php">Forgot Password</a> <font color="#FF6600"> 
                  </font></p>

              </div></td>
          </tr>
        </table>
        <div align="center"></div>
        <p align="center">&nbsp; </p>
      </form>
      <p>&nbsp;</p>

      </td>
    <td width="196" valign="top">&nbsp;</td>
  </tr>
  <tr> 
    <td colspan="3">&nbsp;</td>
  </tr>
</table>

</body>
</html> 
```

* * *

## 如果您需要有关问题的更多详细信息，请询问我

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:17:46.983

而不是 `if(strpos($email,'@'))`try this 而是它将使您的搜索随心所欲地动态化，您将需要传递给参数`$username`，`$email`如下所示：

```
SELECT `id`,`password`,`full_name`,`approved` FROM users1 
WHERE 1 = 1
AND ($email IS NULL OR email = $email)
AND ($username IS NULL OR username = $username)
AND `banned` = '0' 
```

请注意，您必须使用[PDO](http://php.net/manual/en/book.pdo.php)或准备好的语句，而不是使用连接到 mysql 数据库的方式。

# magento - 尝试在单个域上设置多个商店或网站，magento 1.7

> ID：12676063
> 
> 赞同：1
> 
> 时间：2012-10-01T15:13:21.060
> 
> 标签：magento, web, subdomain

我想设置多个商店或网站，每个商店都有其独特的商品，并且结帐与其他商店分开。

有没有一种新方法可以做到这一点.. 我看了很多关于这个的教程和文章，但它是很久以前写的，大部分是针对多个域的。

我可以使用子域和子目录结构。

但是知道我目前使用的是共享的 Godaddy 托管帐户，没有虚拟专用专用服务器，这很重要，因为我读到如果是这种情况，我可能无法从一开始就拥有多个商店。

我正在使用 magento 1.7 版

示例：商店 www.store.com

store1 store1.store.com

store2 store2.store.com

store、store1 和 store 2 具有不同的项目和结帐，但在单个域上

谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:52:13.707

您可以使用 Go Daddy 在您的主机帐户上设置子域。主域和每个子域可以有不同的内容，例如 Magento 商店。Magento 可以在 Go Daddy 的 Linux 共享主机上运行；但是，我们确实警告说，共享主机不会为 Magento 提供最佳的用户体验。我们建议使用虚拟专用或专用服务器。

# wordpress - 如何在不按日期排序的情况下检索 WP_Query

> ID：12676064
> 
> 赞同：1
> 
> 时间：2012-10-01T15:13:26.507
> 
> 标签：wordpress

我想用

```
$ps = "9126,8955,8554,8620,8825,8912,8937,8813,9054,9022";
$recent = new WP_Query( array('post__in' => explode(',', $ps)) ); 
```

要按 ID 检索帖子，我会按发布日期排序结果，但我想在此示例中按以下顺序检索相同的 ID：

```
9126,8955,8554,8620,8825,8912,8937,8813,9054,9022 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:24:44.117

就个人而言，如果帖子的顺序以及您的 ID 号要那么严格，我可能会避免使用 WP_Query：

```
<?php
$ids = array(9126,8955,8554,8620,8825,8912,8937,8813,9054,9022);
foreach($ids as $id)
{
    $post = get_post($id);
    setup_postdata($post);
    ?>
    <!-- YOUR HTML HERE -->
    <?php
}
?> 
```

否则，由于帖子没有像页面那样的菜单顺序选项，您可能必须设置自定义字段并为其赋值（较低的数字优先于较高的数字）。然后你可以做这样的事情：

```
<?php
$ids = array(9126,8955,8554,8620,8825,8912,8937,8813,9054,9022);
$recent = new WP_Query(array('post__in' => $ids, 'orderby' => 'meta_value_num', 'meta_key' => 'postOrder', 'order' => 'ASC'));
?> 
```

第二个选项未经测试，我不能保证它会立即工作，但它应该让你开始。祝你好运。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-01T20:21:07.623

将来在 wordpress 3.5 中，您可以使用：`'orderby'=>'post__in'`

# flash - 将滚动条添加到具有固定高度的 TextArea

> ID：12676066
> 
> 赞同：0
> 
> 时间：2012-10-01T15:13:28.867
> 
> 标签：flash, apache-flex, flex3

我有一个 TextArea ，我想给它一个固定的高度，如果文本超出该高度，就会出现滚动条。

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml">
    <mx:TextArea
        height="34"
        text="Line 1&#13;Line 2&#13;Line 3&#13;Line 4&#13;Line 5&#13;Line 6&#13;Line 7"/>
</mx:Application> 
```

但是，如果我给它一个高度，则不会出现滚动条（尽管我可以使用鼠标滚轮或通过选择文本来滚动文本）。即使使用强制滚动条始终出现`verticalScrollPolicy="on"`也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:23:30.387

如果您查看 TextArea 的源代码，您可以看到如果小于或等于 40 像素，verticalScrollPolicy 被硬编码为 OFF：

```
override public function get verticalScrollPolicy():String
{
    return height <= 40 ? ScrollPolicy.OFF : _verticalScrollPolicy;
} 
```

你有几个选择：

*   将 TextArea 高度设置为 41 或更大

*   创建一个继承 mx TextArea 的自定义控件并覆盖此方法：

    ```
    override public function get verticalScrollPolicy():String
    {
        return _verticalScrollPolicy;
    } 
    ```

*   改用 Spark TextArea 并使用该属性`heightInLines`

我在以下线程中找到了答案：http: [//tech.groups.yahoo.com/group/flexcoders/message/112148](http://tech.groups.yahoo.com/group/flexcoders/message/112148)

# arduino - Arduino SNES 无线接收器代码问题

> ID：12676068
> 
> 赞同：1
> 
> 时间：2012-10-01T15:13:35.113
> 
> 标签：arduino, wireless

我正在为两个 SNES 控制器构建发射器和接收器对，因为我不喜欢使用长延长线让控制器到达沙发。我将[ATmega328Ps](http://www.atmel.com/devices/atmega328p.aspx)用于 AVR，带有 RF24l01 无线收发器（使用 ManiacBugs RF24 库）。我在发射器上使用修改后的 snesPad 库来轮询两个控制器的按钮状态并将它们作为 32 位无符号长返回，然后将其传输到接收器。所有标准库，没有问题（到目前为止）。

然而，在接收端，我必须正确响应来自 SNES 的锁存器和时钟信号，我还没有找到任何库存库。对于那些不熟悉 SNES 控制器的人来说，它们基本上是两个 8 位并行到串行移位寄存器串联。它们在锁存信号的上升沿（12 µs 脉冲高电平，通常为低电平）锁存所有按钮状态，在锁存器的下降沿驱动第一位，然后在时钟的上升沿驱动每个连续的位（6 µs 延迟从锁存器下降，通常为高，6 µs 低 - 6 µs 高周期）。

我决定使用外部中断来触发锁存脉冲和每个时钟脉冲的正确行为。不过，我是编程 Arduinos 的新手，也是 C/C++ 的新手。虽然我的代码可以编译，但我不确定它是否真的能按预期运行。如果对 AVR 有一定经验的人可以看看我的代码并告诉我它是否可以工作，如果不行，在哪里以及为什么，我将非常感激！

Arduino[草图](http://www.arduino.cc/en/Tutorial/Sketch)如下：

```
/*
   Copyright (C) 2012 John Byers <jbyers2@wgu.edu>
   This program is free software; you can redistribute it and/or
   modify it under the terms of the GNU General Public License
   version 3 as published by the Free Software Foundation
*/

/**
 * Dual Wireless Retro Controller Adapter Transmitter
 *
 * This is the reciever side code for the adapter set.
 */

#include <SPI.h>
#include <nRF24L01.h>
#include <RF24.h>
#include <RF24_config.h>

//
// Hardware Configuration
//

RF24 radio(9,10);

//
// Variable Inits
//

volatile unsigned long state2 = 0xFFFFFFFF;
volatile byte i = 0;
const uint64_t pipes[2] = { 0xF0F0F0F0E1LL, 0xF0F0F0F0D2LL };
int strobe = 2;
int clock = 3;
volatile int data1 = 5;
volatile int data2 = 6;
bool firstLoop = true;
volatile int status2 = 1;

void setup()
{
    radio.begin();
    radio.setRetries(0,15);
    radio.enableDynamicPayloads();
    Serial.begin(57600);
    pinMode(strobe, INPUT);
    pinMode(clock, INPUT);
    pinMode(data1, OUTPUT); digitalWrite(data1, LOW);
    pinMode(data2, OUTPUT); digitalWrite(data2, LOW);

    radio.openWritingPipe(pipes[1]);
    radio.openReadingPipe(1,pipes[0]);

    //
    //Dump the configuration of the RF unit for debugging
    //

    radio.printDetails();

    //
    //Setup Interupts
    //

    attachInterrupt(strobe,latch,RISING);
    attachInterrupt(clock,data,RISING);
}

void loop()
{
    if (firstLoop) {
        int status1 = 1;
        bool ok = radio.write( &status1, sizeof(int));
        firstLoop = false;
        radio.startListening();
        if (!ok) {
            Serial.println("sync packet transmission failed");
        }
        else {
            Serial.println("sync packet transmission successful");
        }
    }
    if ( radio.available() )
    {
        unsigned long state = 0;
        radio.read( &state, sizeof(unsigned long) );
        Serial.println(state, BIN);
        state2 = state;
    }
    else
    {
        Serial.println("No data recieved yet");
    }
}

//Latch interrupt routine

void latch()
{
    i = 0;
    digitalWrite(data1,HIGH);
    digitalWrite(data2,HIGH);
    digitalWrite(data1,bitRead(state2,i));
    digitalWrite(data2,bitRead(state2,(i+16)));
    Serial.println("Bit0 out");
}

//Data interrupt routine

void data()
{
    i++;
    digitalWrite(data1,bitRead(state2,i));
    digitalWrite(data2,bitRead(state2,(i+16)));
    Serial.print("Bit");
    Serial.print(i);
    Serial.println(" out");
    if(i=15)
    {
        digitalWrite(data1,LOW);
        digitalWrite(data2,LOW);
        radio.stopListening();
        int status1 = status2;
        bool ok = radio.write( &status1, sizeof(int));
        if (!ok) {
            Serial.println("sync packet transmission failed");
        }
        else {
            Serial.println("sync packet transmission successful");
        }
        radio.startListening();
    }
} 
```

# facebook - 从 Facebook 相册下载照片

> ID：12676072
> 
> 赞同：1
> 
> 时间：2012-10-01T15:13:40.347
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

网站从 Facebook 相册下载和存储照片是否可行且合法？

这是我试图从我的网站实现的过程。

*   用户浏览我的网站
*   我的网站使用 Facebook SDK 来显示用户的 Facebook 照片
*   用户选择照片
*   我的网站会实际下载这些选定的照片并将它们存储在网站托管的服务器上。

我需要下载这些照片，以便其他用户可以看到它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:33:45.760

如果您在进行身份验证时请求正确的权限，这在技术上是可行的。

Facebook 允许您出于*缓存*目的下载用户数据（包括照片） 。

能够下载用户数据会带来很多责任，而不是相信我的解释，您应该自己阅读[Facebook 政策](http://developers.facebook.com/policy/)。

# toggleclass - 我可以使用切换来水平显示图像吗

> ID：12676078
> 
> 赞同：1
> 
> 时间：2012-10-01T15:13:52.607
> 
> 标签：toggleclass, jquery

我正在使用一个按钮将图像的状态从“隐藏”切换到“显示”。我可以显示图像，但是当它们显示时，它们会以垂直对齐方式出现。我希望图像水平显示而不是垂直显示。

我的标记如下

```
<div class="left ch-ad-profile-left eleven columns">
    <button>
        <div class="boxes-212x100">
            <h4 class="blue">Parked Ads</h4>
            <div class="status-l">
                <p>Updates</p>
                <center><span>18</span></center>
            </div>
            <div class="status-r">
                <p>Removed</p>
                <center><span>3</span></center>
            </div>
            <div class="clearfix"></div>
        </div>
    </button>
    <script>
        $("button").click(function () {
            $(".boxes-112x100-1").slideToggle("slow");
        });
    </script>

    <!--end class=boxes-212x100-->
    <div class="boxes-112x100-1" style="display:none;">
        <img src="../../../images/placeholder-small.png" class="" alt="">
    </div>
    <div class="boxes-112x100-1" style="display:none;">
        <img src="../../../images/placeholder-small.png" class="" alt="">
    </div>
    <div class="boxes-112x100-1" style="display:none;">
        <img src="../../../images/placeholder-small.png" class="" alt="">
    </div>
    <div class="boxes-112x100-1" style="display:none;">
        <img src="../../../images/placeholder-small.png" class="" alt="">
    </div>
    <div class="boxes-112x100-1" style="display:none;">
        <img src="../../../images/placeholder-small.png" class="" alt="">
    </div>
    <div class="clearfix"></div>
</div> 
```

那么如何告诉切换以使图像显示在水平线而不是垂直线中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:17:04.263

您可以为此使用 jQueryUI。

[http://docs.jquery.com/UI/Effects/Slide](http://docs.jquery.com/UI/Effects/Slide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:17:41.233

恐怕你没有任何内置方法。你需要使用 animate 函数，或者你需要扩展 jQuery 方法来获得该功能。

您可以使用 jQueryUi 或[Cycle Plugin](http://jquery.malsup.com/cycle/)来实现这一点

也看看这个

[jQuery向左滑动并显示](https://stackoverflow.com/questions/521291/jquery-slide-left-and-show)

# sql - 在 Oracle DB 中创建表时出现错误“%s: invalid identifier”

> ID：12676082
> 
> 赞同：1
> 
> 时间：2012-10-01T15:14:01.293
> 
> 标签：sql, oracle

当我创建这样的表时：

```
create table DBDI_HIREDETAIL(
HireID int not null,
EquipID int not null,
Quantity int,
TotalFee float,
Comment varchar(200)
); 
```

错误发生如下：

> 命令行错误：“TotalFee float”错误报告：SQL 错误：ORA-00904: : 无效标识符 00904。00000 -“%s：无效标识符”

我不明白为什么我的代码有错误，它似乎很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T15:18:28.377

`COMMENT`是Oracle中的保留字；它用于向数据字典添加[注释。](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_4009.htm#SQLRF01109)您应该避免将其用作列名。

```
SQL> create table a ( comment number );
create table a ( comment number )
                 *
ERROR at line 1:
ORA-00904: : invalid identifier 
```

如果你*真的*想使用这个列名，你必须引用它，即`"COMMENT"`：

```
SQL> create table a ( "COMMENT" number );

Table created. 
```

我建议您不要这样做，因为您必须在任何地方引用该列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T15:18:47.400

这是因为 COMMENT 是 SQL 中的保留字 - 请改用另一个列名（如 HIREDETAIL_COMMENT）：

```
create table DBDI_HIREDETAIL(
  HireID int not null,
  EquipID int not null,
  Quantity int,
  TotalFee float,
  HireDetail_Comment varchar(200)
); 
```

# ios - iPad 构建设置

> ID：12676083
> 
> 赞同：0
> 
> 时间：2012-10-01T15:14:04.430
> 
> 标签：ios, xcode, ipad, ios6, armv7

我发现有关 iOS 应用程序的 armv 的信息相互矛盾。我正在创建一个**仅限 iPad**的应用程序。该应用程序应该能够**在所有 iPad**（所有三代）上运行。该应用程序将 5.1 作为其部署目标。

在 Xcode 4.5 出现之前，我并没有为这一切烦恼。当我的应用程序突然停止工作时，我更新了我的 Xcode（因此 iOS 模拟器也更新到了 6.0）。我发现将“仅构建活动架构”设置为“是”允许我继续编程。但是，我无法忍受在不确切知道它们在做什么的情况下更改设置的事实。这就是为什么我坚持以下问题：

1.  armv7 是否涵盖所有 iPad 代？
2.  将“仅构建活动架构”设置为“否”时，我的应用程序为何会抛出“文件是通用的（4 个切片）但不包含 (n) armv7s 切片”？（这是在 iPad 1 上进行测试时。）因为我认为将其设置为“否”意味着您正在生成一个**胖二进制文件**。
3.  我最终需要哪些设置才能在所有 iPad 上运行？是否有多种配置可能（我假设没有），那么，哪些是首选？

当前设置为：

*   架构：标准（armv7、armv7s）
*   基础 SDK：最新 iOS (iOS 6.0)
*   仅构建活动架构：是
*   有效架构：armv7 armv7s

感谢您阅读，如果您做到了这一点。

# algorithm - Prims算法中最小生成树的π[v] ←u步是什么意思？

> ID：12676084
> 
> 赞同：0
> 
> 时间：2012-10-01T15:14:10.833
> 
> 标签：algorithm, data-structures, graph-algorithm, minimum-spanning-tree

在这个[关于最小生成树的 Prims 算法的 MIT 视频中，](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-046j-introduction-to-algorithms-sma-5503-fall-2005/video-lectures/lecture-16-greedy-algorithms-minimum-spanning-trees/)教授`π[v] ←u`在 71:16 秒时解释了这一点。但我不明白为什么我们需要这一步。这个符号 `π[v] ←u`实际上是什么意思？此外，算法中的最后一行是什么意思？源码中给出的整个算法如下：

```
Q←V
key[v] ←∞for all v∈V
key[s] ←0for some arbitrary s∈V
while Q≠∅
 do u←EXTRACT-MIN(Q)
   foreach v∈Adj[u]
    do ifv∈Qand w(u, v) < key[v]
      then key[v] ←w(u, v)⊳DECREASE-KEY
           π[v] ←u

At the end, {(v, π[v])}forms the MST 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:25:20.680

`π`只是任何旧的数组变量。所以这行代码与其他任务并没有什么不同。

然而，它在算法中*所做*的是保存当前节点的*前驱*节点。`π`有时也称为*前任函数*，因为对于任何给定的节点`n`，`π[n]`都会为您提供该节点的前任（在算法完成后）。

因此`π`可用于重建 Prim 算法找到的路径（= 生成树的边缘）。

# java - 指定 Maven 扩展的依赖项

> ID：12676086
> 
> 赞同：0
> 
> 时间：2012-10-01T15:14:14.933
> 
> 标签：java, maven, maven-3, maven-extension

我正在尝试`org.springframework.build:aws-maven:jar:4.2.0.RELEASE`为一个项目进行配置，但遇到了以下问题：似乎某些插件依赖项需要`org.codehaus.jackson:jackson-core-asl`，但找不到。失败：

```
Unresolveable build extension: 
Plugin org.springframework.build:aws-maven:4.2.0.RELEASE or one of its dependencies could not be resolved: 
Failed to collect dependencies for org.springframework.build:aws-maven:jar:4.2.0.RELEASE (): 
No versions available for org.codehaus.jackson:jackson-core-asl:jar:[1.8,1.9) within specified range -> [Help 2] 
```

我添加了一个包含此工件的存储库，并且还尝试将其作为依赖项添加到主项目（顺便说一句，我实际上不需要它）。没有帮助。

它是扩展，而不仅仅是插件，所以我不能在那里添加依赖：

```
<build>
    <extensions>
        <extension>
            <groupId>org.springframework.build</groupId>
            <artifactId>aws-maven</artifactId>
            <version>4.2.0.RELEASE</version>
        </extension>
    </extensions>
</build> 
```

据我了解，构建扩展不使用主块中的依赖项。如何为扩展指定此依赖项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:50:46.243

`maven-metadata.xml`问题是因为`http://central.maven.org/maven2`存储库无效（wtf？）。

通过删除下载的文件 ( `rm -rf ~/.m2/repository/org/codehaus/jackson`) 并使用`mirrors.ibiblio.org`存储库进行修复：

```
<pluginRepositories>
    <pluginRepository>
        <id>ibiblio.mirrors</id>
        <url>http://mirrors.ibiblio.org/maven2</url>
    </pluginRepository>
</pluginRepositories> 
```

# linux - Linux 脚本：重新解释环境变量

> ID：12676092
> 
> 赞同：0
> 
> 时间：2012-10-01T15:14:25.990
> 
> 标签：linux, bash, shell, command

我正在创建一个读取其他环境变量的 Bash 脚本：

```
echo "Exporting configuration variables..."
while IFS="=" read -r k v; do
    key=$k
    value=$v

    if [[ ${#key} > 0 && ${#value} > 0 ]]; then
        export $key=$value
    fi
done < $HOME/myfile 
```

并有变量：

```
$a=$b/c/d/e 
```

并想调用`$a`如下：

```
cp myOtherFile $a 
```

副本的目标文件夹的结果是“$b/c/d/e”，并显示错误：

```
"$b/c/d/e" : No such file or directory 
```

因为它被逐字解释为文件夹路径。

`cp`在命令中使用之前可以重新解释此路径吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:25:06.880

听起来您想`$HOME/myfile`支持 Bash 表示法，例如参数扩展。我认为最好的方法是修改`$HOME/myfile`本质上是一个 Bash 脚本：

```
export a=$b/c/d/e 
```

并使用`source`内置命令将其作为当前 Bash 脚本的一部分运行：

```
source $HOME/myfile
... commands ...
cp myOtherFile "$a"
... commands ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T15:48:16.573

你需`eval`要这样做：

```
$ var=foo
$ x=var
$ eval $x=another_value
$ echo $var
another_value 
```

在使用之前，我向您推荐此文档：http `eval`: [//mywiki.wooledge.org/BashFAQ/048](http://mywiki.wooledge.org/BashFAQ/048)

更安全的方法是使用`declare`而不是`eval`：

```
declare "$x=another_value" 
```

感谢最新的 chepner 2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T15:24:24.103

试试这个

```
cp myOtherFile `echo $a` 
```

# iphone - 调试时禁用反汇编视图

> ID：12676105
> 
> 赞同：4
> 
> 时间：2012-10-01T15:15:38.440
> 
> 标签：iphone, ios6, xcode4.5

我试图弄清楚如何在调试时关闭 Xcode 中的反汇编视图。我只想继续浏览我的代码，而不是在查看所有汇编代码时走神。我相信在调试菜单下的以前版本的 Xcode 中有一个选项，但我在 Xcode 4.5（最新版本）中找不到任何选项。有任何想法吗？

### 编辑：

我仔细检查以确保我实际上是在我自己的代码中而不是在库中，当我在我自己的代码中时它仍然会这样做。这是发生了什么的图片：

[![http://i1238.photobucket.com/albums/ff487/davidohyer/ScreenShot2012-10-02at35031PM.png](../Images/197091c6a240fa0fff2ac78930dabb88.png)](https://i.stack.imgur.com/LFAN0.png)

这只是通过创建一个新项目、创建一个虚拟函数、从 viewDidLoad 调用该虚拟函数、在函数调用上设置断点并使用 F6 单步执行来实现的。有任何想法吗？没有使用外部库。我确认您提到的选项在发生这种情况时已关闭。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    [self initVals];
}

-(void)initVals
{
    self.img = [[UIImageView alloc] init];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:53:10.393

> 产品 > 调试工作流程 > 调试**时显示反汇编**

![在此处输入图像描述](../Images/5259dcb7d4cca61c9247775aec70026c.png)

请记住，您只能看到**自己的代码**。在某些库或框架内发生的断点和/或崩溃只会显示程序集，因为有简单的源代码可以显示。

**编辑**

您在编辑中显示的反汇编来自`UIViewController`. 您可以在侧边栏中看到它，也可以在反汇编的符号存根注释中看到它。

你可能会破坏你自己的代码，但是，如果你从这里开始，你将在一些框架代码中致命地结束。

在您的示例中，您从子类中断`initVals`呼叫。`viewDidLoad``UIViewController`

如果你一步一步通过了这个结尾，你将以`UIViewController`代码结束，因为它还有很多事情要做`viewDidLoad`。

所以要恢复，请注意侧边栏上的符号名称。在这里，它只是表明您不在子类中，而是在某些超类方法实现中。因此，程序集仅输出。

**编辑 2**

想象一下来自库（仅限二进制）的以下代码：

```
@interface Foo: NSObject

- ( void )test1;
- ( void )test2;
- ( void )test3;

@end 
```

然后你将它子类化：

```
@interface Bar: Foo

@end 
```

现在，`Foo`执行以下操作：

```
- ( void )test1
{
    [ self test2 ];
    [ self test3 ];
} 
```

在您的子类中，假设您只覆盖`test2`：

```
- ( void )test2
{
    ...

    /* Breakpoint here, at the end */
} 
```

如果你从断点开始，你将在超类实现中结束，它在from`test3`之后被调用。`test2``test1`

因此，您只需从自己的代码跳转到超类实现。再一次，没有人类可读的代码显示，而只有汇编。

# java - Java Web 应用程序通过 cookie 进行安全授权

> ID：12676106
> 
> 赞同：1
> 
> 时间：2012-10-01T15:15:50.793
> 
> 标签：java, security, cookies, login

我有一个 java servlet web 应用程序。在应用程序中，我有两个授权逻辑： 1\. 通过用户名和密码进行授权 - 通过 Web 表单使用用户填写的用户名和密码进行标准登录。2\. 通过cookies授权。一次，用户填写用户名和密码，并选中“记住我”复选框，此后他不应该输入用户名/密码。我对选项二（cookies）有疑问。目前的逻辑是：我检查用户是否选中了“记住我”，我得到他的用户名和密码哈希，并将其存储到 cookie 中。（两个cookie：**用户名**，**密码**) 但是，我认为这种方式并不安全。因为有人可以窃取 cookie 并访问网络应用程序。问题是：通过 cookie 访问授权用户的最佳安全方式是什么？我应该在饼干里储存什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:22:30.390

首先，您想使用 SSL/TLS 与您的服务器进行通信。您可以为您的网站购买便宜的证书，所以不要担心。即使这样，您也不应该将用户名和密码存储在 cookie 中，这不安全，因为有人可以破解他们的计算机并检索他们的密码，这不是您的问题，但甚至不要让自己陷入混乱并让它来回来咬你。

您通常会创建一个在一定时间后过期的随机 sessionid，并将其与当前时间戳一起插入到您的用户表中。该 sessionid 是您存储在 cookie 中的内容，每次他们尝试使用 cookie 登录时，您都会在数据库中检查它。如果它太旧（您检查时间戳与您决定的任何长度），那么您使 sessionid 无效并要求他们使用他们的用户名和密码登录，从而创建一个新的 sessionid。

还有更多功能可以防止 cookie 被复制到另一台计算机（您不必担心它会通过网络复制，这就是 SSL/TLS 的用途），例如将 ip 地址和浏览器添加到 cookie，和其他一些东西，但这对于你正在做的事情可能有点过头了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:18:27.660

如果您使用的是 HTTPS（应该如此），除非他们从该人的实际计算机中获取该信息，否则没有人可以“窃取” cookie。只需确保一旦用户登录，他们就不会使用正常的 HTTP 请求访问页面，否则您的 cookie 数据将被暴露。

# specflow - 如何在表格中传递空格（specflow 场景）？

> ID：12676107
> 
> 赞同：8
> 
> 时间：2012-10-01T15:15:51.233
> 
> 标签：specflow

如何在表格中传递空格？

```
Background:
    Given the following books
        |Author         |(here several spaces)Title(here several spaces)| 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T16:31:46.410

我会这样做：

```
Given the following books
| Author              | Title               |
| "J. K. Rowling"     | "Harry P     "      |
| " Isaac Asimov   "  | "Robots and Empire" | 
```

然后可以进行绑定以去除引号（如果存在），但保留空格。

我认为这比在之后添加空格的想法更可取，因为这不是人类可读的 - 引用将使阅读它们的人（利益相关者/编码人员）可以看到空格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T17:58:45.047

您可以通过添加一个额外的步骤来解决它。就像是：

```
Given the following books
|Author         | Title |
Add append <5> spaces to book title 
```

编辑：

一个完整的功能可能类似于：

```
Scenario: Adding books with spaces in the title
Given the following book
| price | title |
And <5> spaces appended to a title
When book is saved
Then the title should be equals to <title without spaces> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-07T17:25:43.850

我刚遇到同样的情况，我的解决方案是这样，在步骤中添加空格如下：

```
Scenario: Adding books with spaces in the title
Given the following book '    <title>    '
When book is saved
Then the title should be equals to '<title>'
| price | title        |
| 50.00 | Working hard | 
```

# php - 在页面加载时运行“长时间等待”脚本，使用 AJAX 检查其是否已完成

> ID：12676111
> 
> 赞同：2
> 
> 时间：2012-10-01T15:16:15.347
> 
> 标签：php, ajax, timer, loading

我有一个网页，我在其中嵌入了一个脚本，运行后端可能需要 10 分钟。

我已经尝试了许多不同版本的带有计时器的 ajax 脚本加载器。

我需要什么：在页面加载时，我需要触发主工作脚本运行。该脚本的最后一行将在文件夹中创建一个唯一的文本文件，其中包含用户的文件名，以便在脚本完成后显示该文件。

并且，然后从页面加载触发，将是一个 AJAX 函数，每 10 秒加载第二个脚本，这个秒脚本非常小，并检查用户文件（来自上面的脚本）是否在指定的目录中。

如果文件还没有（脚本仍在工作），那么它会回显

```
<img src"../loading.gif"> 
```

如果文件现在在那里（脚本已经完成），那么它会回显一个链接（或者可能是另一个页面的标题，我还没有决定）......

这意味着在页面加载时，主处理脚本启动，并触发 ajax 脚本（将立即显示加载图像），一旦主脚本完成执行，加载图像将变为链接（或者可能只是将您重定向到另一个页面）

抱歉漫无边际，只是想提供尽可能多的信息.​​.....

ps，我想我需要一个简单的加载一次 ajax 函数来调用主处理脚本，以便它在后台工作，否则主页将需要很长时间才能加载

我最近的尝试：

```
function MakeRequest()
{
  var xmlHttp = getXMLHttp();

  xmlHttp.onreadystatechange = function()
  {
    if(xmlHttp.readyState == 4)
    {
      HandleResponse(xmlHttp.responseText);
    }
  }

  xmlHttp.open("GET", "processing_script.php?user=<?php echo $_SESSION['user']; ?>", true);
  xmlHttp.send(null);
}

function HandleResponse(response)
{
  document.getElementById('ResponseDiv').innerHTML = response;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:02:50.013

要每 5 秒加载一次文件，您可以使用[setInterval](http://www.w3schools.com/js/js_timing.asp)函数每隔 xy 秒调用一次函数。

您是否考虑过使用诸如 jquery 之类的 javascript 框架？它们提供了一些非常易于使用的 ajax 方法来简化整个过程。“手动”处理 ajax 请求对我来说始终是“痛苦的”。

# c# - 通过 WCF 的 ObservableCollection

> ID：12676113
> 
> 赞同：2
> 
> 时间：2012-10-01T15:16:32.213
> 
> 标签：c#, wcf, observablecollection, propertychanged

如果服务器端的集合已更改（通过客户端操作或服务器操作），我从几天以来一直在尝试将 PropertyChanged 事件从我的 wcf 服务获取到 wcf 客户端。必须有更好的解决方案，而不是使用回调并重新加载列表......或者？

在服务器端：（几乎就像另一篇文章中的示例） [ObservableCollection 和 CollectionChanged 事件作为 WCF 数据合同](https://stackoverflow.com/questions/8612633/observablecollection-and-collectionchanged-event-as-wcf-datacontract)

```
public interface IObservableService
{
    [OperationContract(IsOneWay = false)]
    Data getData();
}
 [DataContract]
public class Data : INotifyPropertyChanged
{

    public event PropertyChangedEventHandler PropertyChanged;
    public void Notify(string propertyName)
    {
        if (this.PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            Console.WriteLine("Notify()");
        }
    }
    private ObservableCollection<string> list;

    internal Data()
    {
        list = new ObservableCollection<string>();
        list.CollectionChanged += new System.Collections.Specialized.NotifyCollectionChangedEventHandler(list_CollectionChanged);
    }

    void list_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        Console.WriteLine("list_CollectionChanged");
        Notify("DataList");
        Notify("Data");
    }

    [DataMember]
    public ObservableCollection<string> DataList
    {
        get
        {
            return list;
        }
        set {
            list = value;
            Console.WriteLine("set DataList");
            Notify("DataList");
            Notify("Data");
        }
    }
} 
```

在客户端：

```
ObservableServiceClient client = new ObservableServiceClient();
Data data = client.getData(); 
```

到目前为止它的工作......我可以在客户端查询集合，但是当服务器集合发生变化时我没有收到“propertyChanged”？

怎么了？我的错误和误解在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:31:06.293

我建议你看看[SignalR](https://github.com/SignalR)。这是一个很棒的开源项目，可以帮助您立即实现实时消息传递。有适用于不同客户的库，它们非常易于使用。

看看这个快速入门。这真的很简单：[https ://github.com/SignalR/SignalR/wiki/QuickStart-Hubs](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)

我使用了 WCF 双工回调，但取决于绑定，如果您想通过 Internet 公开您的服务，它只会让您头疼（防火墙、NAT 和 Net.Tcp IIS 要求）。我已经使用了[DuplexHttpBinding](http://archive.msdn.microsoft.com/duplexhttp)但它需要一些工作才能使其进入生产就绪状态。

# performance - MS Sync Toolkit 如何处理大量初始下载

> ID：12676115
> 
> 赞同：0
> 
> 时间：2012-10-01T15:16:37.957
> 
> 标签：performance, sync, microsoft-sync-framework

我们使用 Microsoft Sync Framework Toolkit 允许一些 iOS 设备通过 OData 服务将其 SQLite 本地存储与中央 SQL Server 数据库同步（就像示例一样）。

问题是中央数据库非常大（超过 500 MB），并且客户希望最初在他们的设备上复制他的所有内容。

因此，我们将服务配置为**同步所有表**，但它在设备第一次尝试同步时崩溃（`OutOfMemoryException`）。

我们应该如何设计/配置服务来管理这种情况？设置过滤器似乎不符合我们的需求，因为我们需要所有数据。

我应该补充一点，我们尝试配置`SetDownloadBatchSize`时没有运气。也许在客户端上也需要配置一些东西？

# c# - 如何捕获 PropertyChanged 事件期间引发的异常

> ID：12676116
> 
> 赞同：0
> 
> 时间：2012-10-01T15:16:47.230
> 
> 标签：c#, wpf, mvvm, inotifypropertychanged

我正在使用 MVC\MVVM 和 WPF。我有一个绑定到模型的表单和一个捕获 PropertyChanged 事件并评估业务规则和验证的控制器。好吧，我想在验证错误时弹出一条消息，告诉用户出了什么问题以及如何修复它。但我不确定控制器的“正确”方式。我想抛出一个可以被视图捕获的异常，但我不知道如何。我试过 Dispatcher.Invoke() 但这只是让我在应用程序级别出现未处理的异常。

如何捕获从 Controller 中的 PropertyChanged 事件处理程序生成的异常？

编辑：具体来说，我有一个组合框，其中包含折扣列表。我不能允许不适当的选择，但我必须通知用户选择不适当的原因。这不像其中包含整数的文本框那么明显。我需要告诉用户客户填写调查的日期。他们不能两次使用该折扣。我不想从列表中排除调查折扣，因为这对用户来说只是一个错误。我需要向他们展示折扣并告诉他们客户已使用该折扣并且不能再次使用它。

编辑 2：我查看了 ValidationRule 类，因为我必须使用数据库查找，所以我不知道如何将所有内容保留在模型中，并且仍然在控制器中保留业务规则。我查看了 IDataErrorInfo 但这需要我将模型包装在我的控制器中并绑定到控制器，但仅限于一个字段。我认为在这种情况下最好的做法是让控制器调用视图上的方法并弹出一条消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:30:39.800

你走错了路。

在 MVVM 中处理验证的一个好方法是在绑定上实现和设置[`IDataErrorInfo`](http://msdn.microsoft.com/en-us/library/system.componentmodel.idataerrorinfo.aspx)。您几乎肯定也希望启用完整性，以便绑定引擎触发您已将属性绑定到的控件上的附加事件。[`ValidatesOnDataErrors`](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.validatesondataerrors.aspx)`true``ValidatesOnExceptions`[`NotifyOnValidationError`](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.notifyonvalidationerror.aspx)[`Validation.Error`](http://msdn.microsoft.com/en-us/library/system.windows.controls.validation.error.aspx)

有关更多详细信息，请参阅MSDN 文档中有关WPF[中的数据绑定的验证部分。](http://msdn.microsoft.com/en-us/library/ms752347.aspx#data_validation)

一些技巧：

*   .NET 4.5 引入[`INotifyDataErrorInfo`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifydataerrorinfo.aspx)了相应的绑定属性，与;[`ValidatesOnNotifyDataErrors`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifydataerrorinfo.aspx)相比提供了增强的验证功能。`IDataErrorInfo`你可能想调查一下。
*   您实际上不需要在内部做任何有意义的事情，`IDataErrorInfo.Error`因为它由 Windows 窗体基础结构使用并且在 WPF 中被忽略。您甚至可以使用 getter throw `NotImplementedException`。
*   [这里](http://joshsmithonwpf.wordpress.com/2008/11/14/using-a-viewmodel-to-provide-meaningful-validation-error-messages/)和[这里](http://karlshifflett.wordpress.com/mvvm/input-validation-ui-exceptions-model-validation-errors/)有很好的阅读材料来说明这种方法，并附有示例和代码。

**更新：澄清和示例代码**

这个验证模型根本不涉及实现`ValidationRule`你自己；您的模型（即绑定源）只需要实现两个接口之一。如何实现接口完全取决于您；在过去的一个项目中，我实现了基本的异步验证

```
public interface IDelegatedValidation : IDataErrorInfo
{
    /// <summary>
    /// Occurs when validation is to be performed.
    /// </summary>
    event EventHandler<DelegatedValidationEventArgs> ValidationRequested;
}

public class DelegatedValidationEventArgs : EventArgs
{
    public DelegatedValidationEventArgs(string propertyName)
    {
        this.PropertyName = propertyName;
    }

    public string PropertyName { get; private set; }

    public bool Handled { get; set; }

    public string ValidationError { get; set; }
} 
```

该模型`IDelegatedValidation`通过公开一个事件并使用

```
string IDataErrorInfo.this[string columnName]
{
    get { return this.GetValidationError(columnName); }
}

private string GetValidationError(string propertyName)
{
    var args = new DelegatedValidationEventArgs(propertyName);
    this.OnValidationRequested(args);
    return args.ValidationError;
}

protected virtual void OnValidationRequested(DelegatedValidationEventArgs args)
{
    var handler = this.ValidationRequested;
    if (handler == null) {
        return;
    }

    foreach (EventHandler<DelegatedValidationEventArgs> target in handler.GetInvocationList()) {
        target.Invoke(this, args);
        if (args.Handled) {
            break;
        }
    }
} 
```

所以工作流程是这样的：

1.  当模型即将被视图模型包装时，一些可以执行验证的适当实体订阅它的`ValidationRequested`事件。
2.  视图绑定到模型；在某些时候触发验证。
3.  该模型调用`GetValidationError`.
4.  事件处理程序被一一调用；第一个产生验证错误的处理程序设置`args.ValidationError`并`args.Handled`停止`true`链。
5.  验证错误返回到视图。

如果视图模型需要知道它的模型是否有效（例如启用/禁用“保存”命令），它还需要进入这个过程。

真的没有什么是你*不能*用`IDataErrorInfo`/做的，`INotifyDataErrorInfo`因为你如何实现它们完全取决于你。一定要查看后者文档的[Silverlight 版本以获取更多示例；](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifydataerrorinfo%28v=vs.95%29.aspx)互联网上也有很多[类似的有用材料。](http://www.jonathanantoine.com/2011/09/18/wpf-4-5-asynchronous-data-validation/)

# java - hibernate - 表名定义

> ID：12676120
> 
> 赞同：0
> 
> 时间：2012-10-01T15:17:01.643
> 
> 标签：java, hibernate

我最近遇到了以下定义：

```
<class name="X" table="master..[User]" ... /> 
```

上面的定义是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:32:59.193

它是**类 X到****master**数据库中的表**User**的映射声明，可能在 SQL Server 上。

 **在 SQL Server 中，您可以使用双点来限定具有数据库的表名。名称周围的方括号确保可以正确识别保留字或带有空格的名称。

[这是](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-declaration-mapping)对映射声明的引用，第 5.1.3 节**

# php - 在 PHP 中获取会话的动态下拉值

> ID：12676123
> 
> 赞同：1
> 
> 时间：2012-10-01T15:17:26.247
> 
> 标签：php

这里是一个 PHP 新手，需要澄清一件事。

我用 SQL 数据库中的数据填充了一个下拉框。代码如下所示。

```
echo '<select id="dropMe" name="dropMe" style="width:150px; font-family:Georgia;">';
echo '<option value=""></option>';
while($rec=mysql_fetch_array($run1))
{
    $value = $rec['route'];
    echo "<option value=\"$value\">$value</option>";
}
echo '</select>'; 
```

我想知道是否可以将用户选择的值分配给 SESSION 因此这是一个动态下拉列表？（saveroute 是我的提交按钮）

```
if (isset($_POST['saveroute']))
{
    $Q = $_POST['dropMe'];
    $_SESSION['menuRoute'] = $Q;
    echo ($_SESSION['menuRoute']);
} 
```

我编写了这样的代码，但我得到了一个未定义的错误，'dropMe'。我对这种类型的错误并不熟悉，有人可以提出一些建议或指出该方法中的任何错误。

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:19:50.933

尝试打印出整个 POST 数组

> 打印_r

像这样

```
print_r($_POST); 
```

看起来您正在检查是否设置了“saveroute”而不是“dropMe”，看起来它不存在。

[http://php.net/manual/en/function.print-r.php](http://php.net/manual/en/function.print-r.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:11:42.667

我建议您检查 $_POST 数组，以确保您从 html 表单中接收到您期望的值。

```
var_dump($_POST); 
```

或者

```
print_r($_POST); 
```

如果这是正确的，那么请确保您在访问之前已经启动了会话：

```
session_start(); 
```

# xcode4.5 - 在 XCode 4.5 中查找文档

> ID：12676124
> 
> 赞同：0
> 
> 时间：2012-10-01T15:17:39.267
> 
> 标签：xcode4.5

我非常习惯于在 XCode 中选择单击某些内容，然后单击右上角的“笔记本”图标，以调出相应的文档（见下图）。

这个图标在 XCode 4.5 中去了哪里？（即如何获得 4.5 中的文档？）

![在此处输入图像描述](../Images/2a6ea12115367a0240db5a78bfa5658a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:21:22.263

如果您单击弹出窗口的参考部分中的链接，它将带您到管理器的文档部分。我不确定这是否是您正在寻找的，因为我从未使用过 4.5 之前的功能。刚刚在我的电脑上测试了它，但它确实有效。

# java - 刷新（插入新的）JTable 行

> ID：12676126
> 
> 赞同：0
> 
> 时间：2012-10-01T15:17:44.820
> 
> 标签：java, swing, arraylist, jtable, odbc

我`JTable`与 SQL 服务器有关系，当我尝试更新一行时，除了第一个单元格之外的所有单元格都会更新，因为该行不在我的构造函数中。所以我尝试手动更改它， `tableAlbum.setValueAt(artistName, tableAlbum.getSelectedRow(), 0);` 但表格没有更新。当我手动刷新框架时，单元格以正确的值正确显示。

这是我的代码：

```
else if (e.getSource() == btnConfirm) {
    String artistName = (String) tableAlbum.getValueAt(tableAlbum.getSelectedRow(), 0);              
    tableAlbum.setValueAt(artistName, tableAlbum.getSelectedRow();
    modele.editAlbum(tableAlbum.getSelectedRow(), tile, price, genre, year, home, ""); 
```

有我的 editMethod ：

```
public void modifierAlbum(int num, String title, double price, String genre,
    String year, String home, String image) {

Album album = null;

    Statement statement;
    try {
        statement = connexion.createStatement();
        String query = "USE albums UPDATE Album SET title='"+title+"', price = "+price+", genre = '"+genre+"', year = '"+year+"', home = '"+home+"' WHERE titre = '"+title+"'";
        statement.executeUpdate(query);         

        album = new Album(title, price, genre, year, home);
        getData().set(num, album);
        fireTableRowsUpdated(0, data.size());

    } catch (SQLException e) {
        e.printStackTrace();
    } 
```

# php - 将重复事件添加到非重复表

> ID：12676131
> 
> 赞同：0
> 
> 时间：2012-10-01T15:17:57.307
> 
> 标签：php, mysql

我有一个具有以下结构的表：

```
event
- id
- date_start
- number_hours
- date_end 
- specialist_id / specialist assigned to this event. 
```

用户选择活动开始的日期和持续的小时数。现在所有这些事件都是非重复的，但我想添加重复事件的可能性。

我怎样才能以精心设计的方式做到这一点？我希望能够扩展这个设计，不仅支持每周和每月的活动，还支持每周日、周六或其他重复类型的活动......谢谢

我在考虑以下问题

事件

```
- id
- date_start
- recurring / whether the event is recurring or not
- weekly / (if repeats every 1 week, this will be 1, if repeats every 2 weeks, this number will be 2)
- monthly / (if repeats every 1 month, this will be 1, if repeats every 2 months, this number will be 2)
- last_occurred_date / date the event last occurred (if non-recurring, this equals date_start, if recurring, it does not)
- next_occurred_date / date when the event is supposed to occur next.
- specialist_id / what specialist took this event 
```

因此，如果用户添加 2012 年 10 月 1 日的事件，每月重复一次，则将以下条目添加到表中：

```
date_start: 10/1/2012, recurring: 1, weekly: 0, monthly: 1 (it occurs every 1 month), last_occurred_Date: 10/1/2012, next_occurred_date: 11/1/2012) 
```

而且我有一个 cron 工作，它基本上会遍历所有重复事件（其中 event.recurring = 1 并将条目添加到事件表中以获取即将发生的新事件。）

因此，该活动的下一个日期是 2012 年 11 月 1 日。添加了以下条目：

```
id: 1 date_start: 11/1/2012 recurring: 0 
```

我为重复事件发生的每个日期添加一个条目的原因是因为我必须为每个事件分配一个专家。因此，专家会收到带有链接的电子邮件，他们可以在其中注册每个活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:00:39.857

我正在考虑为活动准备 2 张桌子，为参与者和重复准备一些其他桌子。1 个表保存事件“模板”，另一个保存实际事件实例，并且可能是第 3 个来跟踪重复。

*   event_defaults
    *   ID
    *   事件名称
    *   event_duration（INT 秒）
    *   地点
*   default_participants
    *   用户身份
    *   event_defaults_id（event_defaults.id 的外键，从不为 NULL）
    *   （user_id 和 events_default.id 之间的双主键）
*   event_recurrence
    *   event_defaults.id 的外键
    *   重复单元（日、周、月、季度、年的枚举）
    *   复发乘数（INT，表示要重复多少天、几周、几个月）
    *   开始日期
    *   recur_until
*   事件
    *   event_id
    *   defaults_id（event_defaults.id 的外键，可能为 NULL）
    *   姓名
    *   start_time（时间戳）
    *   end_time（时间戳）
    *   地点
*   参与者
    *   用户身份
    *   event_id（events.id 的外键）
    *   （user_id 和 events.id 之间的双主键）

这个想法是针对您的重复事件，您在**event_defaults**表中创建一个条目，并将重复信息创建到**event_recurrence**中。然后，您创建每个模板的*实例*作为 events 中的实际**事件**。然后，用户可以为每个事件定义他想要的一些参与者（默认情况下）。所有一次性事件都直接插入**到**event_defaults.id 的外键为 NULL 的事件中。

当事件重复发生时，您可以删除**event_defaults**中的条目并保留 events 中发生的**事件**的记录。您可以让 kron 在这么多天后将这些家伙剪掉，将它们归档到另一个表中，或者甚至可以在**事件**表上为已过期的事件维护一个分区。

好处是通过保持模板和每个事件的实际实例分开，您可以修改单个事件，同时仍然保持模板相同。例如，本周在某家餐厅而不是办公室会议室举行每周办公室会议。现在，您可以在**events**中更新相应事件实例的位置，而无需更改每周模板。

此外，您可以为每个事件分配一个默认专家，如果他们出于某种原因需要与其他专家切换，您只需编辑单个事件实例而不是模板。

此外，您的 kron 作业可以创建长达 recur_until 或 .... 10 年的新事件？无论您决定什么任意间隔。在时间结束之前为重复事件创建实例并不是一个好主意。

# c - 从服务器向客户端发送消息时出错

> ID：12676133
> 
> 赞同：0
> 
> 时间：2012-10-01T15:18:03.343
> 
> 标签：c, sockets, tcp

我在套接字编程中为计算引擎编写了一个服务器程序，它显示客户端给出的数字的平均值。我的客户代码：

```
main()
{
    //socket
    //connect
    gets(msg);
    f=sscanf(msg,"%f",&num);
    write(sockfd,msg,strlen(msg));
    while ((n1=read(sockfd,result,Z))>0) {
        write(1,result,n1);
    }
} 
```

在服务器中：

```
while((rfd=read(sockfd,buff,Z))>0) {
    sscanf(buff,"%f",&num);
    sum=sum+num;
}
sum=sum/n;
snprintf(res,Z,"%f",sum);
write(sockfd,res,strlen(res)); 
```

该程序不起作用。如果我删除服务器中的写入，那么它正在工作。如果我只是从服务器向客户端发送一个示例消息，删除所有计算，那么它就可以工作。谁能告诉我错误是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:37:12.503

1.  协议错误。客户端正在写入一个数字，但服务器正在读取无数个数字。您需要（a）将服务器更改为读取一次，（b）提前发送要读取的数字数量，或者（c）在写入数字之后和读取响应之前关闭客户端套接字以进行输出。

2.  您在另一个方向有类似的协议错误。服务器正在写一个响应，但客户端一直在循环。服务器*必须*在写完回复后关闭套接字。

3.  需要在服务器的 read() 后面加上 `buff[rfd] = 0'，否则 sscanf 不知道停在哪里。

# jquery - jquery中事件类型的条件

> ID：12676134
> 
> 赞同：0
> 
> 时间：2012-10-01T15:18:08.493
> 
> 标签：jquery

我们可以在事件类型上设置条件，例如如果事件`click`然后警报“点击”如果事件`mouseover`然后警报“结束”。但是当功能在页面上加载时，我的功能会发出警报值

```
<head>
<script type="text/javascript" src="jquery-1.7.2.js"></script>

<script type="text/javascript">
$(function() {

    if($('.wait').click()) {
        alert('click')
    }
    else if ($('.wait').mouseenter()) {
        alert('mouseenter')
    }
})
</script>

<style>
    .wait {color:#F00}
    .nowait {color:#00F}
</head>

<body>
    <div class="wait">abc.....</div>
    <div class="wait">abc.....</div>
    <div class="wait">abc.....</div>

</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T15:19:29.147

这种情况下的想法是为不同的事件类型定义不同的处理程序：

```
 $('.wait').click(function(){
        alert('click')
    });
   $('.wait').mouseenter(function(){
        alert('mouseenter')
    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T15:20:27.973

您的语法错误，请改用：

```
$(".wait")
.click(function(event) {
    alert("click");
    // do want you want with event (or without)
})
.mouseenter(function(event) {
    alert("mouseenter");
    // do want you want with event (or without)
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T15:23:29.067

试试这个

```
(document).ready(function() {
   $('.wait').bind('click dblclick mousedown mouseenter mouseleave',
               function(e){
               alert('Current Event is: ' + e.type);
                    });
                   }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T15:20:36.097

简单地尝试

```
 $('.wait').click(function(){
        alert('click')
    }); 
```

和

```
 $('.wait').mouseenter(function(){
        alert('mouseenter')
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T15:21:07.483

编写单独的事件来处理它们..

```
$('.wait').on('click',function(){
        alert('Click Event !!');
    });

   $('.wait').on('mouseenter'f,unction(){
        alert('MouseEnter Event !!')
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T15:28:25.200

如果您将多个事件处理程序绑定到相同的对象，我会亲自将事件映射（一个对象）传递给`.on()`函数，如下所示：

```
$('.wait').on({
    click: function(e) {
        alert('click');
        // handle click
    },
    mouseover: function(e) {
        alert('mouseover');
        // handle mouseover
    }
}); 
```

但是，如果*您*只想输出事件类型，则有一种更简单的方法：

```
$('.wait').on('click mouseover', function(e) {
    alert(e.type);
}); 
```

# java - 用硒查找属性

> ID：12676150
> 
> 赞同：1
> 
> 时间：2012-10-01T15:19:08.517
> 
> 标签：java, javascript, html, dom, selenium

我正在使用 selenium，我发现了这个 web 元素：

```
<td style="padding-right: 10px; " **onclick="javascript:show_me('CarDetails.php?CarID=2358912&SubCatID=1**', '2358912', 560, 'ActiveLinkVisited');stat( '../', 176, '', '' );" id="Txt_2358912">blabla</td> 
```

我想获取`"onclick"`属性信息（`javascript:show`...文本）。

我怎么能用 selenium 做到这一点（如 中的`attr`函数`DOM`）。

谢谢，
或者。

编辑：我会澄清我的问题。我有这样的事情：

```
<tr id="tr_2358912" class="ActiveLink" onmouseover="this.className='overActiveLink'" onmouseout="(document.getElementById("TxtID2358912").innerText!="bla") ? this.className="ActiveLink" : this.className="openActiveLink" ">
    <td valign="middle">
    <td width="2"/>    
    <td id="Txt_2358912" onclick="javascript:show_me('CarDetails.php?CarID=2358912&SubCatID=1', '2358912', 560, 'ActiveLinkVisited');stat( '../', 176, '', '' );" style="padding-right: 7px; ">Text Here</td>
    <td width="2"/> 
```

我有一个包含 ActiveLink 类的 WebElement：

`WebElement element = driver.findElement(By.className("ActiveLink"));`

我想从元素对象中获取 onclick 值

```
("javascript:show_me('CarDetails.php?CarID=2358912&SubCatID=1', '2358912', 560, 'ActiveLinkVisited'"). 
```

我尝试了 `element.findElement(By.xpath("//td[@onclick]")).getText()` 并且尝试了更多..但没有成功。我对此很陌生..我希望有人可以帮助我..谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:11:15.950

```
String onclick=selenium.getAttribute("//td[contains(@onclick,'CarDetails.php')]@onclick");

onclick=onclick.substring(onclick.indexOf(":")+1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T15:28:01.770

使用属性选择器试试这个：

```
selector=//selector/used/to/find/the/td/@onclick 
```

# javascript - 将脚本更改为 jquery 组合另一个函数

> ID：12676155
> 
> 赞同：0
> 
> 时间：2012-10-01T15:19:26.083
> 
> 标签：javascript, jquery

我有一个放在一起的脚本，单击一个按钮它会旋转 45 度，我也希望它可以打开和关闭一个段落。我无法访问 CSS，因为交织在一起的内容管理系统不会让我拥有访问权限，所以这就是为什么它全部使用 javascript 完成并且必须保持这种状态。脚本是：

```
var img = document.images[0];
effects_of_yoga_info.style.setProperty("-webkit-transition", "-webkit-transform 0.3s ease-in-out");

var deg = 0;
effects_of_yoga_info.addEventListener('click', function() {
deg += 45;
effects_of_yoga_info.style.setProperty('-webkit-transform', 'rotateZ('+deg+'deg)'); 
```

我想加入其中以便它们同时发生的部分是：

```
$("#effects_of_yoga_info").click(function () {
  $("p#effects_of_yoga_text").slideToggle("fast");
}); 
```

我敢肯定这很简单，但我一直很难用它，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:22:17.410

你的意思是这样的：

```
$(img).click(function () {

    deg += 45;
    $(this).css('-webkit-transform', 'rotateZ(' + deg + 'deg)');

    $('#KittenText').slideToggle("fast");

});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:39:49.333

让它工作：

```
var img = document.images[0];
effects_of_yoga_info.style.setProperty("-webkit-transition", "-webkit-transform 0.3s ease-in-out");

var deg = 0;
effects_of_yoga_info.addEventListener('click', function() {
$("p#effects_of_yoga_text").slideToggle("fast");
deg += 45;
effects_of_yoga_info.style.setProperty('-webkit-transform', 'rotateZ('+deg+'deg)');   
}); 
```

# java - 运行测试游戏！框架 - 数据源用户为空

> ID：12676160
> 
> 赞同：2
> 
> 时间：2012-10-01T15:19:37.837
> 
> 标签：java, testing, playframework, playframework-2.0

您好，我正在尝试使用 Play 在 Web 应用程序中运行一个简单的测试！框架，但我得到一个错误：

```
[info] RouteTest
[error] Test RouteTest.testRouteActivityIndex failed: DataSource user is null?
[error]     at com.avaje.ebeaninternal.server.lib.sql.DataSourcePool.<init>(DataSourcePool.java:198)
[error]     at com.avaje.ebeaninternal.server.lib.sql.DataSourceManager.getDataSource(DataSourceManager.java:210)
[error]     at com.avaje.ebeaninternal.server.lib.sql.DataSourceGlobalManager.getDataSource(DataSourceGlobalManager.java:63)
[error]     at com.avaje.ebeaninternal.server.core.DefaultServerFactory.getDataSourceFromConfig(DefaultServerFactory.java:427)
[error]     at com.avaje.ebeaninternal.server.core.DefaultServerFactory.setDataSource(DefaultServerFactory.java:388)
[error]     at com.avaje.ebeaninternal.server.core.DefaultServerFactory.createServer(DefaultServerFactory.java:168)
[error]     at com.avaje.ebeaninternal.server.core.DefaultServerFactory.createServer(DefaultServerFactory.java:125)
[error]     at com.avaje.ebeaninternal.server.core.DefaultServerFactory.createServer(DefaultServerFactory.java:64)
[error]     at com.avaje.ebean.EbeanServerFactory.create(EbeanServerFactory.java:64)
[error]     at com.avaje.ebean.Ebean$ServerManager.getWithCreate(Ebean.java:237)
[error]     at com.avaje.ebean.Ebean$ServerManager.get(Ebean.java:224)
[error]     at com.avaje.ebean.Ebean$ServerManager.access$200(Ebean.java:159)
[error]     at com.avaje.ebean.Ebean.getServer(Ebean.java:288)
[error]     at play.db.ebean.Model$Finder.server(Model.java:216)
[error]     at play.db.ebean.Model$Finder.all(Model.java:230)
[error]     at models.Activity.all(Activity.java:29)
[error]     at controllers.Application.activities(Application.java:18)
[error]     at Routes$$anonfun$routes$1$$anonfun$apply$5$$anonfun$apply$6.apply(routes_routing.scala:60)
[error]     at Routes$$anonfun$routes$1$$anonfun$apply$5$$anonfun$apply$6.apply(routes_routing.scala:60)
[error]     at play.core.Router$HandlerInvoker$$anon$4$$anon$1.invocation(Router.scala:1086)
[error]     at play.core.j.JavaAction$$anon$1.call(JavaAction.scala:33)
[error]     at play.core.j.JavaAction$class.apply(JavaAction.scala:74)
[error]     at play.core.Router$HandlerInvoker$$anon$4$$anon$1.apply(Router.scala:1085)
[error]     at play.test.Helpers.invokeHandler(Helpers.java:34)
[error]     at play.test.Helpers.routeAndCall(Helpers.java:246)
[error]     at play.test.Helpers.routeAndCall(Helpers.java:231)
[error]     at RouteTest.testRouteActivityIndex(RouteTest.java:14)
[error]     ...
[info] x RouteTest.testRouteActivityIndex 
```

测试代码如下：

```
 @Test
public void testRouteActivityIndex(){
    Result result = routeAndCall(fakeRequest(GET, "/activities"));
    Assert.assertNotNull(result);
} 
```

我试着研究这个错误，但没有发现任何对这种情况非常有用的东西，甚至是网站的 play!。有人经历过这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T15:27:38.903

您的`/activities`操作可能会调用数据库。

因此，您应该按照本文档的“在假应用程序中运行”部分中的说明在正在运行的假应用程序中进行测试：[http ://www.playframework.org/documentation/2.0.3/JavaTest](http://www.playframework.org/documentation/2.0.3/JavaTest)

并且不要忘记导入静态 Helper：

```
import static play.test.Helpers.*; 
```

# javascript - 测验和 ContentEditable 标签

> ID：12676161
> 
> 赞同：0
> 
> 时间：2012-10-01T15:19:43.463
> 
> 标签：javascript, html, contenteditable

我在一些 javascript 的帮助下进行了一个简短的简单 html 测验。问题是我不想`<input>`用来接受答案，我正在寻找替代方案。javascript 针对标签 ID 运行输入。是否可以使用另一个带有 contenteditable 的标签。我希望该框说“在此处输入答案”。如果 javascript 检查 ID1，我可以有类似的东西，

```
<p id="id1" contenteditable="true">Type answer here</p> 
```

代替

```
<input type="text" id="id1"> 
```

理论上似乎还可以，但是当我测试它时，它就像没有运行我在 javascript 上输入的内容。有什么建议么？

更新：我猜它不起作用，因为也许 contenteditable 实际上并没有改变标签中的文本。标签的任何替代方案/解决方法。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:27:01.003

如果您尝试使用其`value`属性（如输入）从 contenteditable 元素中获取键入的文本，那么您就不走运了，因为它没有。您需要`innerHTML`or`textContent`代替（取决于您是否要忽略格式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:35:14.247

`value`非表单元素在 JavaScript 中没有属性。您必须使用`innerHTML`或`textContent`（取决于您是否要保留 HTML 标记）来获取值。

↪[在 JSFiddle 查看示例](http://jsfiddle.net/TkANZ/)

# c# - 获取 DataGrid 值

> ID：12676166
> 
> 赞同：0
> 
> 时间：2012-10-01T15:20:01.143
> 
> 标签：c#, wpf, wpftoolkit

伙计们，我知道这已经被回答了一百万次，但是我如何从我从数据网格中选择的行中获取值？我已经尝试过，但完全没有运气。数据绑定到数据网格很好，我使用 selectedCellsChanged 事件，但这就是我卡住的地方。

我的代码如下： -

```
XAML

    <Window x:Class="main.results"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            Title="results" Height="500" Width="650">
        <Window.Resources>
            <DataTemplate x:Key="LocationsTemplate">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="{Binding Path=CLIENTNAME}" />
                    <TextBlock Text=" | " />
                    <TextBlock Text="{Binding Path=POSTCODE}" />
                    <TextBlock Text=" | " />
                    <TextBlock Text="{Binding Path=CONTRACT NUMBER}" />
                </StackPanel>
            </DataTemplate>
        </Window.Resources>
        <Grid>
            <DataGrid AutoGenerateColumns="False" Height="125" HorizontalAlignment="Left" Margin="16,12,0,0" Name="dataGrid1" VerticalAlignment="Top" Width="600" ItemsSource="{Binding}" HorizontalGridLinesBrush="#FF7907C1" VerticalGridLinesBrush="#FF7907C1" SelectionMode="Single" SelectedCellsChanged="dataGrid1_SelectedCellsChanged">
                <DataGrid.Columns>
                    <DataGridTextColumn Binding="{Binding CLIENTNAME}" Header="CLIENT NAME" />
                    <DataGridTextColumn Binding="{Binding CLIENTNAME}" Header="POSTCODE" />
                    <DataGridTextColumn Binding="{Binding CONTRACT NUMBER}" Header="CONTRACT NUMBER" />
                </DataGrid.Columns>
            </DataGrid>
        </Grid>
    </Window>

C#

    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Windows;
    using System.Windows.Controls;
    using System.Windows.Data;
    using System.Windows.Documents;
    using System.Windows.Input;
    using System.Windows.Media;
    using System.Windows.Media.Imaging;
    using System.Windows.Shapes;
    using System.Data;
    using System.Data.SqlClient;
    using System.Data.Linq;
    using System.Data.SqlTypes;

    namespace main
    {
        /// <summary>
        /// Interaction logic for results.xaml
        /// </summary>
        public partial class results : Window
        {
            public results()
            {
                InitializeComponent();
            }

            private void dataGrid1_SelectedCellsChanged(object sender, SelectedCellsChangedEventArgs e)
            {
               **//HOW DO I GET THE VALUES FROM SELECTED ROW?**
            }        
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:34:36.917

您可以使用`var dr = (DataRowView)dataGrid1.SelectedItem;`来获取行

然后`dr["columnName"];`获取列的值

# jdbc - jdbc - 使用提交执行多个语句

> ID：12676167
> 
> 赞同：1
> 
> 时间：2012-10-01T15:20:03.140
> 
> 标签：jdbc

我有多个准备好的陈述。我需要为每条语句执行“connection.commit”还是在最后一条语句之后只调用一次？

```
Connection connection = datasource.getConnect();
connection.setAutoCommit(false);
PreparedStatement pstmt1 = connection.prepareStatement(query1);
pstmt1.executeUpdate();
connection.commit();

PreparedStatement pstmt2 = connection.prepareStatement(query2);
pstmt2.executeUpdate();
connection.commit();

PreparedStatement pstmt3 = connection.prepareStatement(query3);
pstmt3.executeUpdate();
connection.commit();

Or

Connection connection = datasource.getConnect();
connection.setAutoCommit(false);
PreparedStatement pstmt1 = connection.prepareStatement(query1);
pstmt1.executeUpdate();

PreparedStatement pstmt2 = connection.prepareStatement(query2);
pstmt2.executeUpdate();

PreparedStatement pstmt3 = connection.prepareStatement(query3);
pstmt3.executeUpdate();

connection.commit(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T15:21:34.957

如果您设置`autocommit = false`，那么您可以选择何时提交事务。在哪里做得最好，只有你可以判断，因为它取决于原子性、事务隔离等。

这就是将 autoCommit 属性公开给您（“最终用户”）的全部意义，因此您可以控制更改如何相互关联/相互依赖。

你*不能*做的（我很确定——自从我直接在 JDBC 中编程已经有一段时间了）是发出 2 个提交命令，中间没有任何其他命令。

# java - 根据周开始获取每月的周数

> ID：12676169
> 
> 赞同：3
> 
> 时间：2012-10-01T15:20:11.770
> 
> 标签：java, android, date, calendar

我在我的应用程序中使用自定义日历。我已经给用户选项来选择一周的第一天，这可能是：`Saturday, Sunday, Monday`

我想获取一个月中的周数 - 取决于一周开始的时间，覆盖周开始的默认值 - `Sunday`。

**代码：**

```
public int getWeeksOfMonth(int year, int month) { 
    Calendar calendar = Calendar.getInstance(); 
    calendar.set(Calendar.MONTH, month-1);
    calendar.set(Calendar.YEAR, year);
    int numOfWeeksInMonth = calendar.getActualMaximum(Calendar.WEEK_OF_MONTH); 

    return numOfWeeksInMonth;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T15:26:07.800

尝试先设置一周的第一天：

[Calendar.setFirstDayOfWeek()](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Calendar.html#setFirstDayOfWeek%28int%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T15:26:54.960

尝试

```
calendar.setFirstDayOfWeek(Calendar.MONDAY); //sets first day to monday, for example. 
```

在您的情况下，您可能想要这样做：

```
public int getWeeksOfMonth(int year, int month, int weekStart) { 
    Calendar calendar = Calendar.getInstance();  
    calendar.set(Calendar.MONTH, month-1);
    calendar.set(Calendar.YEAR, year);
    calendar.setFirstDayOfWeek(weekStart);
    int numOfWeeksInMonth = calendar.getActualMaximum(Calendar.WEEK_OF_MONTH); 

    return numOfWeeksInMonth;
} 
```

并使用一行调用该方法，例如

```
int weeks = getWeeksOfMonth(2012, 5, Calendar.WEDNESDAY); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-09T22:19:21.587

# regex - 公司名称的 Vtype

> ID：12676170
> 
> 赞同：-1
> 
> 时间：2012-10-01T15:20:13.057
> 
> 标签：regex

我有一个 vtype 试图检查以下名称：

99Balls SRL

我的公司SA

SA公司

我需要 vtype 只允许一个 . 或 - 或空间一次。因此，My--Company 将返回 false。

这就是我所做的，但它不起作用：

```
var alfanumericoTest = new RegExp('^[A-Za-z0-9]*-?\.? ');
Ext.apply(Ext.form.field.VTypes, {
    //  vtype validation function
    alfanumerico: function(val, field) {
        return alfanumericoTest.test(val);
    },
    // vtype Text property: The error text to display when the validation function returns false
    alfanumericoText: 'Ingrese palabras.',
    // vtype Mask property: The keystroke filter mask
    alfanumericoMask: new RegExp('[A-Za-z0-9]|-|\.| ')
}); 
```

另外，这意味着什么？：

```
alfanumerico: function(val, field) {
      return alfanumericoTest.test(val);
}, 
```

那是一个功能吗？它以我从未见过的方式宣布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:15:02.430

我找到了解决方案，并为全局匹配添加了“g”修饰符。

```
// Alfanumerico
  var alfanumericoTest = new RegExp('^[A-Za-z0-9]+\.?\-? ?','g');
  Ext.apply(Ext.form.field.VTypes, {
    //  vtype validation function
    alfanumerico: function(val, field) {
      return alfanumericoTest.test(val);
    },
    // vtype Text property: The error text to display when the validation function returns false
    alfanumericoText: 'Ingrese palabras.',
    // vtype Mask property: The keystroke filter mask
    alfanumericoMask: new RegExp('[A-Za-z0-9\-\.\ ]')
  }); 
```

# google-drive-api - Google Drive API - 使用 .NET 列出文件夹内的文件

> ID：12676171
> 
> 赞同：3
> 
> 时间：2012-10-01T15:20:22.040
> 
> 标签：google-drive-api

我有一个访问云端硬盘的 vb.net 应用程序。除了列出文件夹内的文件外，我一切正常。我需要从 UI 传递一个文件夹 ID 并显示其中的文件。

我已经阅读了其他答案，例如（[Get a list of files by folder on Drive SDK](https://stackoverflow.com/questions/11400669/getting-a-list-of-files-by-folder-on-drive-sdk)），其中声明使用附加到 GET URL 的“q”参数，但我没有构建 GET URL。在下面运行 ListRequest 时，我看不到如何传递 Q 参数：

这会从 ROOT 返回一个文件列表，但是如何将 Q 传递给它以从指定文件夹返回文件：

```
 Dim result As New List(Of File)()
        Dim request As FilesResource.ListRequest = service.Files.List()

        Do
            Try
                Dim files As FileList = request.Fetch()
                result.AddRange(files.Items)
                request.PageToken = files.NextPageToken
            Catch e As Exception
                Console.WriteLine("An error occurred: " + e.Message)
                request.PageToken = Nothing
            End Try
        Loop While Not [String].IsNullOrEmpty(request.PageToken)
        Return result 
```

我需要传递一个像“0B_p57qQpdddyl8nR0NBT3hXQUdIRFE in parents”这样的 ID。文档中的 PHP 示例显示在 service.files.list() 方法中添加参数，但是 .NET 版本中没有重载，所以我不知道如何添加过滤器....

我可以跑：

```
 Dim request As ChildrenResource.ListRequest = service.Children.List(folderid) 
```

传入folderID，然后：

```
 Dim files As ChildList = request.Fetch() 
```

但这不会像第一个函数那样返回文件列表，而只是返回子文件的 ID，这意味着我必须为每个等等做一个单独的文件请求。

任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T23:30:26.100

该`ListRequest`对象具有`Q`您可以设置的属性：

```
Dim request As FilesResource.ListRequest = service.Files.List()
request.Q = "'0B_p57qQpdddyl8nR0NBT3hXQUdIRFE' in parents" 
```

# android - 在 Eclipse 中导入 android .zip 文件

> ID：12676173
> 
> 赞同：2
> 
> 时间：2012-10-01T15:20:25.590
> 
> 标签：android, eclipse

我已经从谷歌的 android 开发者网站下载了 CustomView.zip 文件，但是我无法将它导入到我的 eclipse ide 中，它在选择这个存档文件时显示没有找到项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:11:26.723

提取 Zip 文件，然后从 eclipse 中导入它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:29:45.160

提取 zip 文件并在 Eclipse 中从现有代码中选择 Android 应用程序项目并导入项目。这就对了。

# node.js - 检查应用程序是否使用正确版本的 node.js

> ID：12676186
> 
> 赞同：1
> 
> 时间：2012-10-01T15:21:20.640
> 
> 标签：node.js, npm

我有一个基本的 Express 应用程序，其 package.json 看起来像这样

```
{
    "name": "blog",
    "version": "0.0.1",
    "dependencies": {
        "express": "~3.0.0"
    },
    "engines": {
        "node": "0.9"
    }
} 
```

显然`node`它本身并不关心这个文件的内容。有没有办法启动一个应用程序以便`npm`读取它并报告错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T15:25:53.427

由于 package.json 只是一个 json 文件，您可以轻松加载和解析它，然后将 engine.node 值与`process.version`并报告错误。

无需在这里对 npm 做任何事情。

# r - 提取R中对应点位置的像素值

> ID：12676188
> 
> 赞同：2
> 
> 时间：2012-10-01T15:21:29.640
> 
> 标签：r, gis, raster

我有动物 gps 数据，每天都有几个位置，并且在没有记录动物位置的情况下有几天的定期间隔。此外，我每隔 16 天就有一次卫星数据。我现在想**提取**对应于**特定点**和**特定时间**的像素值。

这意味着如果动物的位置是在拍摄卫星图像前 2 天记录的，我想提取这张图像的像素值（之后），而不是从动物位置前 14 天拍摄的图像中提取记录下来。我总是想根据时间从更接近的图像中提取。

我创建了一些测试数据，希望能说明问题：

```
library(sp)
library(raster)

### Create test data
# create first raster
edc2012001_m <- raster(ncol=36, nrow=18)
edc2012001_m[] <- sample(1:ncell(edc2012001_m))

# create second raster
edc2012017_m <- raster(ncol=36, nrow=18)
edc2012017_m[] <- sample(1:ncell(edc2012017_m))

rasters<-stack(edc2012001_m,edc2012017_m)

# Create xy coordinates
time<-c("2012-01-01", "2012-01-01", "2012-01-01", "2012-01-02", "2012-01-02", "2012-01-02", "2012-01-12", "2012-01-12", "2012-01-13", "2012-01-13")
x <- rep(-50,10)
y <- sample(c(-80:80), 10)
data<-data.frame(x,y,time)

# Convert data to spatial points data frame
coordinates(data) <- c("x","y")

### Extract all data from raster stack
extract(rasters, data) 
```

第一个栅格名称中的数字字符串表示该图像是在 2012 年的第一天拍摄的，第二张图像是在今年的第 17 天拍摄的。

例如，测试数据中的第 7 个位置现在应从第二个光栅文件中提取，因为它根据时间更接近。

总而言之，我有 87 个栅格文件和 600 个观测值。我真的不知道如何编程。我想我可以用来`substr()`从栅格名称中检索日期信息。但除此之外......我很感谢我能得到的每一个提示，以及在这种情况下可能有用的功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T00:13:41.050

从你的最后一行开始

```
### Extract all data from raster stack
ex <- extract(rasters, data)

# assuming you have these names or something similar
x <- c("edc2012001_m", "edc2012017_m")
year <- as.integer(substr(x, 4, 7))
# day of year
doy <- as.integer(substr(x, 8, 10))
date <- as.Date(doy, origin=paste(year-1, "-12-31", sep=''))
time <- as.Date(time)

# time difference
dif <- t(apply(matrix(as.integer(time)), 1, function(x) x-as.integer(date)))

# smallest time difference
i <- apply(abs(dif), 1, which.min)

# combine rows and columns to select values
v <- ex[cbind(1:nrow(ex),i)] 
```

我明白了

```
> i
 [1] 1 1 1 1 1 1 2 2 2 2
> v
 [1] 582 578 303 201 201 200 461 329 445 211
> 
```

# xml - XSLT 2.0 分组

> ID：12676189
> 
> 赞同：3
> 
> 时间：2012-10-01T15:21:30.683
> 
> 标签：xml, xslt, xpath, xslt-2.0

我正在尝试在 XSLT 2.0 中使用 xsl:for-each 对元素进行分组。

这是我输入的说明：

```
<root>
     <chapter>
           <heading> heading text </heading>
           <title> title </title>
           <p> 1111 </p>
           <p> 2222 </p>
           <center> text </center>
           <p> 3333 </p>
           <title>  another title </title>
           <p> 4444 </p>
           <center> text </center>
           <p> 5555 </p>
     </chapter>
     <chapter>
          <heading> heading text </heading>
          <title>  another title </title>
          <p> 6666 </p>
          <p> 7777 </p>
          <title>  another title </title>
          <p> 8888 </p>
          <p> 9999 </p>
     </chapter>
<root> 
```

我试图通过匹配每个`<title>`元素并将每个后续元素分组到下`<title>`一个元素来分组这个文档`<section>`。这是我希望输出的样子：

```
<root>
     <chapter>
          <heading> Heading text </heading>
          <section>
               <title>  title </title>
               <p> 1111 </p>
               <p> 2222 </p>
               <center> text </center>
               <p> 3333 </p>
          </section>
          <section>
               <title>  title </title>
               <p> 4444 </p>
               <center> text </center>
               <p> 5555 </p>
          </section>
          <section>
               <title>  title </title>
               <p> 6666 </p>
               <p> 7777 </p>
               <center> text </center>
               <p> 8888 </p>
               <p> 9999 </p>
          </section>
     <chapter>
<root> 
```

我当前的模板不起作用：

```
<xsl:template match="chapter">
    <chapter>
      <xsl:for-each-group select="*" group-starting-with="title">
             <section>
                <xsl:copy-of select="current-group()" />
             </section>
      </xsl:for-each-group>
    </chapter>             
</xsl:template> 
```

上面的样式表确实对我想要的部分进行了分组，但是由于某种原因它也将每个`<heading>`元素分组到它自己的部分中。`<section>`有什么建议么？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T15:48:48.020

我会用...

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output omit-xml-declaration="yes" indent="yes" />
<xsl:strip-space elements="*" />  

<xsl:template match="/*">
  <root>
    <xsl:for-each-group select="chapter" group-by="heading">
      <chapter>
        <xsl:copy-of select="current-group()[1]/heading" />
        <xsl:for-each-group select="current-group()/(* except heading)"
                            group-starting-with="title">
          <section>
            <xsl:copy-of select="current-group()" />
          </section>
        </xsl:for-each-group>
      </chapter>
    </xsl:for-each-group>
  </root>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T19:32:49.110

我通常在 for-each-group 的主体中使用 xsl:choose 来区分真正以 group-starting-with 元素开头的组与第一个“真实组”之前的“前导臀部”。如果您知道“领先的臀部”将仅包含一个标题元素，那么您已经获得了许多其他效果很好的解决方案。另一个更通用的解决方案（因为它不对臀部里的东西做任何假设），但沿着同样的思路，是：

```
<xsl:copy-of select="title[1]/preceding-sibling::*">
<xsl:for-each-group select="title[1]/(., following-sibling::*)">
  <section>
     <xsl:copy-of select="current-group()"/>
  </section>
</xsl:for-each-group> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T15:26:30.840

你可能想要

```
<xsl:copy-of select="current-group()" /> 
```

而不是`value-of`. 对于标题，如果您知道每一章只有一个`heading`元素，那么您可以说

```
<xsl:template match="chapter">
      <xsl:copy-of select="heading" />
      <xsl:for-each-group select="*[not(self::heading)]" group-starting-with="title">
             <section>
                <xsl:copy-of select="current-group()" />
             </section>
      </xsl:for-each-group>             
</xsl:template> 
```

即单独拉出标题，然后将其从要分组的元素集中排除。

# c++ - 如何调用模板成员函数？

> ID：12676190
> 
> 赞同：35
> 
> 时间：2012-10-01T15:21:31.733
> 
> 标签：c++, templates

> **可能重复：**
> [从模板函数调用的模板类的 C++ 模板成员函数](https://stackoverflow.com/questions/1840253/c-template-member-function-of-template-class-called-from-template-function)

```
template<class T1>
class A 
{
public:
    template<class T0>
    void foo() const {}
};

template<class T0,class T1>
void bar( const A<T1>& b )
{
    b.foo<T0>();  // This throws " expected primary-expression before ‘&gt;’ token"
} 
```

我可以将其更改为

```
b->A<T1>::template foo<T0>(); 
```

编译得很好。但是我也可以将其更改为

```
b.A<T1>::template foo<T0>(); 
```

编译也很好。嗯？

在原始代码的意义上，如何正确调用模板成员函数？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-10-01T15:25:28.287

刚找到：

根据 C++'03 标准 14.2/4：

> 当成员模板特化的名称出现在后缀表达式之后`.`或 `->`之后，或在限定标识符中的嵌套名称说明符之后，并且后缀表达式或限定标识符显式依赖于模板参数（14.6.2 )，成员模板名称必须以关键字 为前缀`template`。否则，该名称被假定为命名非模板。

正确的代码是：

```
b.template foo<T0>(); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-01T15:27:07.447

你可以这样调用函数：

```
b.template foo<T0>(); 
```

# python - 如何更改特定地址的字节

> ID：12676194
> 
> 赞同：1
> 
> 时间：2012-10-01T15:21:43.840
> 
> 标签：python, file, byte, python-2.2

我需要编写程序来更改特定地址中文件中的字节。我只能使用 python 2.2 它是游戏的模块，所以......我读过一次关于 mmap 的文章，但我在 python 2.2 中找不到它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:05:31.997

您最好的选择是直接操作文件；这适用于 Python 版本，即 1.x、2.x、3.x。这里有一些粗略的大纲可以帮助您入门......如果您执行实际的伪代码，如果不是完全正确的 Python，它可能会非常接近：

1.  为 'r+b' 打开文件（读/写；对于 POSIX 系统，您也可以只使用 'r+'）
2.  转到有问题的特定字节（使用文件的`tell()`方法）
3.  写出您要更改的单个字节（使用文件的`write()`方法）
4.  关闭文件（使用文件的`close()`方法）

# java - 如何在第一次运行应用程序时捕获 SQLite 错误

> ID：12676196
> 
> 赞同：0
> 
> 时间：2012-10-01T15:21:46.813
> 
> 标签：java, android, sqlite, android-sqlite

在主要活动中，我试图检查应用程序何时打开，如果应用程序数据库存在或不存在。这是因为我想有机会创建数据库并仅在第一次运行时插入所有需要的记录。

但它不适用于我，它给了我这个错误：

..引起：android。数据库。CursorindexOutOfBoundsException: 请求索引 0，大小为 0

我的第一个想法是上面的异常/错误不是 SQLiteException 或者我不知道我到底错过了什么。

这是我的代码：

```
 DBAdapter dbCheck = new DBAdapter(this);
    boolean dbStatus;
    String strData;
    try { 
        dbCheck.open(); 
        Cursor tblCheck = dbCheck.getThis_tblData(10); //get record no 10 - random number
        strData = tblCheck.getString(5);   // get the value of a field in the table
        tblCheck.close();
        dbCheck.close();
        System.out.println("<---> Db found ");
    } catch (SQLiteException e) { 
        //database doesn't exist yet. Create it.
        System.out.println("<---> Db not found ");
    Intent MakeDB = new Intent(MainActivity.this, com.kjsoft.tre.InsertData.class);
    StartActivity(MakeDB);
    } 
```

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:32:11.573

这个特殊的异常发生在泛型`Cursor`类中，所以它不是`SQLiteException`.

您可以更改`catch`语句中的类型，就像 Nambari 所说的那样，但是创建一个 [SQLiteOpenHelper 类](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html) 来管理数据库的创建（以及更新，如果您的应用程序发生更改）是一个更好的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:20:41.713

替换代码中的以下行：

```
Cursor tblCheck = dbCheck.getThis_tblData(10); 
```

具有以下内容：

```
Cursor tblCheck = dbCheck.getThis_tblData(10);
if ((tblCheck != null) && (tblCheck.getCount() > 0)) {
    tblCheck.moveToNext();
    strData = tblCheck.getString(5);
} 
```

光标初始位置始终**在第一行之前**，因此您必须将其移动到下一步（第一行），然后访问您的数据。当然，您必须检查它是否不为空。

# asp.net - Crystal Report 2011 与 Crystal Reports for Visual Studio 2010

> ID：12676203
> 
> 赞同：1
> 
> 时间：2012-10-01T15:22:22.890
> 
> 标签：asp.net, crystal-reports

Crystal Reports 2011 和 Crystal Reports for Visual Studio 2010 之间有区别吗？

我们正在创建许多 ASP.Net 应用程序，并且一直在使用 Crystal Reports for Visual Studio 2010。我的老板最近购买了 5 个 Crystal Reports 2011 许可证，认为我们需要它们。在调查之后，我不相信我们再这样做了。

谁能告诉我应该使用哪个版本？它们之间有什么区别？

编辑：这怎么没有建设性？我想问这两种产品有什么区别。一个需要许可证，另一个不需要。不会有长时间的辩论。我在谷歌上找不到的简单答案。

注意：如果这应该移动到不同的 Stack Exchange 网站，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:56:02.537

*   SAP 水晶报表 2011：v14
*   适用于 Visual Studio 2010 的 SAP Crystal Reports：v13

来源：[已知 Crystal Reports 版本和服务包级别](http://www.softwareforces.com/FAQ/Known-Crystal-Reports-Versions-and-Service-Pack-Levels)

您必须自己调查这些功能并决定它们是否有用。

您最大的问题将是可扩展性和许可——您可能想要研究[SAP Crystal Server](http://www.sap.com/solutions/sme/business-intelligence-crystal-solutions/sap-crystal-server/index.epx)。

# c# - 无法在 wcf C# 中实现静态变量

> ID：12676205
> 
> 赞同：1
> 
> 时间：2012-10-01T15:22:25.107
> 
> 标签：c#, wcf, static

这是我的问题。我正在使用 wcf 实现一个简单的客户端服务器。服务器公开了一个“sum”函数，其中客户端发送的任何值都被添加到全局总和中，并且这个总和返回给当时连接到服务器的所有客户端。这是功能

```
 public void AddMessage(int num)
    {
        sum = sum + num;
        //Go through the list of connections and call their callback funciton
        subscribers.ForEach(delegate(IMessageCallback callback)
        {
            if (((ICommunicationObject)callback).State == CommunicationState.Opened)
            {
                Console.WriteLine("Calling OnMessageAdded on callback ({0}).", callback.GetHashCode());

                callback.OnMessageAdded(sum, DateTime.Now);
            }
            else
            {
                subscribers.Remove(callback);
            }
        });

    } 
```

这是服务器调用的回调函数

```
 public void OnMessageAdded(int sum, DateTime timestamp)
    {
        Console.WriteLine(sum+ ": " + timestamp.ToString("hh:mm:ss"));
    } 
```

直到这部分没有问题。我现在尝试在不同的端口（8001）上运行客户端和服务器。客户端最初会联系监听端口 8000 的服务器，一旦得到总和，更新监听 8001 的服务器。

这是执行此操作的代码。

```
 //This is the function that the SERVER will call
    public void OnMessageAdded(int sum, DateTime timestamp)
    {
        Console.WriteLine(sum + ": " + timestamp.ToString("hh:mm:ss"));
        WCFService.RCRServer.Sum=sum;
        Console.WriteLine("8001's sum " + WCFService.RCRServer.Sum);
    } 
```

如您所见，'sum' 是 RCRServer 中的一个静态字段。这就是它的声明方式。

```
 private static int sum =0;

    public static int Sum
    {
        get { return sum; }
        set { sum = value; }

    } 
```

此更新也很好。当与端口 8000 的连接丢失时，问题就开始了，我尝试在端口 8001 上调用相同的服务。我预计由于客户端不断更新端口 8001 上服务器的静态字段，当客户端调用时此服务器上的功能（8001）旧总和将可用。但它被重置为 0 并再次开始计数。我在哪里出错了。任何建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:03:12.190

我认为这条线是错误的：

```
 WCFService.RCRServer.Sum=sum; 
```

因为它不是标准的 WCF 调用，而是属性调用。为了通过 WCF 调用链接属性，您需要使用 Operation Contract 属性显式标记 getter 和 setter，但由于接口不能由静态构造实现，我会说实际调用的是其他东西。

尝试实现一个名为 UpdateSum(int sum) 的 WCF 方法，该方法增加静态变量并调用该方法。

# google-cloud-messaging - 如何传递android gcm注册id

> ID：12676207
> 
> 赞同：0
> 
> 时间：2012-10-01T15:22:25.917
> 
> 标签：google-cloud-messaging

我创建了一个 android gcm 客户端并从 gcm 服务器获取了 reg id。现在我想将此 id 传递给我的服务器代码，它将消息发送到 gcm 服务器。我所做的是从 logcat 手动复制 reg id 并粘贴到服务器 codeq 中。这种方法适用于模拟器，但不适用于手机，因为我不知道手机中的 reg id。有人可以分享有关如何以编程方式将 reg id 传递给服务器端方法的代码片段。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:21:44.360

简短的回答是：使用 HTTP。

较长的答案如下。首先，将一个将 RegID 作为参数之一的网页放在一起。根据您的 Web 服务器的性质，可能有不同的技术（PHP、ASP.NET、servlet）。该页面将从参数中获取 RegID 并将其存储在某个永久介质中（数据库？文件？您决定）。我所说的“参数”是指查询字符串或 POST 表单。后者更好，因为这些 RegID 可以变得相当大。

该页面需要某种公共 URL，您的 Android 应用可以访问（即不能访问`http://localhost`）。IP 地址 URL 可以工作。

最后，在您的 Android 应用程序中，在接收 RegID 的部分，`HttpClient`用于执行 Web 请求，将您刚刚获得的 RegID 作为 POST 参数传递。

至于准备使用的片段......太多的变量。一方面，一半的代码是服务器端的，我们不知道您使用的是什么服务器端技术。Android 部分 - 只需查找 Android 的 HTTP POST 示例。'网络充满了这些。

另外，请接受一些答案。这就是我们在这里滚动的方式。

# c# - 如何列出 . 当 T 是一个结构时找工作？

> ID：12676209
> 
> 赞同：15
> 
> 时间：2012-10-01T15:22:50.387
> 
> 标签：c#, .net, list, generics, struct

我有一个`List<KeyValuePair<string, othertype>>`. 我需要做一些事情

```
list.Find(x=>x.Key=="foobar") 
```

但是，如果列表中不存在该行为，那么行为会是什么？通常它会返回 null，但结构不能为 null。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-01T15:32:14.450

我的建议是`FindIndex`用于不可为空的类型

```
int index = list.FindIndex(x => x.Key == "foobar");
if (index >= 0) {
    // found!
    UseResult(list[index]);
} 
```

不成功`default(T)`则返回默认值。`Find()`对于不可为空的类型，此结果无法与具有默认值的常规条目区分开来。当列表可能包含常规`null`条目时，对于可空类型也是如此。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-01T15:26:04.833

它将返回与`default(T)`相同的`new KeyValuePair<string, othertype>>()`，即默认初始化的结构。

基本上，引用类型的默认值是 always `null`，而对于值类型（包括`struct`），它是默认值（`0`对于数字、`false`for `bool`、a `struct`，每个字段都默认用于结构等）

因此，对于 a`default(KeyValuePair<string, othertype>>)`你会得到一个 KVP ，其中`Key`是`null`（默认为`string`）和不管是什么`default(othertype)`（如上面的例子）......

从[MSDN](http://msdn.microsoft.com/en-us/library/x0b5b5bc.aspx)：

> 与指定谓词定义的条件匹配的第一个元素（如果找到）；否则，类型 T 的默认值。

使用此方法，如果您想检查是否`default`找回`yourResult.Key != null`了.`Find``FindIndex`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T15:32:44.093

结构是一种值类型。因此，在结构查找的情况下，将返回结构的默认值。

**例子：**

假设我们的结构如下，

```
public struct Test
{
   public int i;
}

List<Test> list = new List<test>() { new Test { i = 1 } };
Test result = list.Find(o => o.i == 2); 
```

在上面查找结果值，如 new Test()。您可以通过以下代码比较值。

```
if (resul.Equals(new Test()))
{

        //Do something
 }
 else
 {
                  //Do something    
 } 
```

**或者**

```
if (resul.Equals(default(Test)))
{

        //Do something
 }
 else
 {
                  //Do something    
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T15:27:49.037

通过阅读这两篇文档文章，在我看来，您应该返回结构的默认值：

默认值： http: [//msdn.microsoft.com/en-us/library/aa664475 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa664475(v=vs.71).aspx)

List(T).Find 方法：http: [//msdn.microsoft.com/en-us/library/x0b5b5bc.aspx](http://msdn.microsoft.com/en-us/library/x0b5b5bc.aspx)

# visual-studio-2010 - 如何更改 Visual Studio/Resharper 自动完成默认选择？

> ID：12676212
> 
> 赞同：0
> 
> 时间：2012-10-01T15:22:57.773
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2008, visual-studio-2012

我正在使用**Visual Studio 2010**（带有**resharper**）和 2012。

每次我使用`Console.WriteLine`时，当我输入**“。”时** 会`WriteLine()`自动选择。选择 Tap it 将光标放在“;”之后 而不是在我想要的括号内。`WriteLine(string)`当已经有一个选项完全符合我的要求时，不得不使用鼠标在方括号或退格之间移动几个字符，这很烦人。但是要选择它，我必须使用向下箭头键才能到达那里。

有什么方法可以配置默认选择应该是什么？

作为`WriteLine(string)`默认设置将节省数百次击键或鼠标点击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:28:21.240

如果它没有比它的价值更麻烦，那么您可以重置您的 Resharper 设置（假设您至少使用 Resharper 6.1）

```
Go to Resharper -> Manage Options...
Click the "Reset All Settings" button. 
```

# c# - 如何获取 API 中被调用方法的列表

> ID：12676215
> 
> 赞同：3
> 
> 时间：2012-10-01T15:23:06.693
> 
> 标签：c#, api, static-analysis

简而言之：我需要获取我们的数据库 API 的方法列表，这些方法在我们的代码库中实际调用和使用。

更长：我们有一个相当大的代码库，它基于一个（丑陋的）数据库 API。后者有很多接口和相当多的功能，我们根本不需要，我们想摆脱它。重写的第一个原型应该与现有的 API 代码有一百个兼容——因此应该实现它的接口，以便更容易地根据我们的生产代码构建它。

要定义我们使用的方法子集，我可以使用 dotCover 或其他方法进行一些覆盖分析并运行我们的单元测试，但我很确定这只会产生 80% 到 90% 的成功率。我需要的更像是对我们代码的静态分析。另一种方法可能是 api 的动态包装器，它记录每个方法调用，以便在使用后进行良好的覆盖率分析。

我很好奇这样的分析是否可以使用工具完成，或者我是否应该包装 API 以获取所需的信息（手动/自动？它真的很大，有数百或数千种方法）。

顺便提一下：我可以完全访问所有资源，但它们分布在具有自己解决方案的许多模块中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:14:22.247

正如 Chris 所说，NDepend 可以为您提供调用的 API 方法/字段/类型的列表。*免责声明：我是该工具的开发人员之一。*

一张价值千言万语的图片，下面的[NDepend 依赖结构矩阵](http://www.ndepend.com/Doc_Matrix.aspx)截图，显示在 NUnit 代码库中，只有程序集`nunit.uiexcepion` *（row/column #6）*和`nunit.core.interfaces` *（row/column #18）*在使用方法`List<T>.ToArray()`。

我们所说*的第三方代码*（你称之为*API 的*），以蓝色字体显示。*仅显示真正*使用的API 方法/字段/类型。例如，在屏幕截图中，`HashSet<T>`未显示该类，因为 NUUnit 代码库不使用它。

NDepend 的所有功能都考虑了*第三方代码*，但我在这里公开了*依赖结构矩阵*，因为它肯定是最适合**在 API 中获取调用方法列表的功能**。该工具的 14 天全功能试用版[可供下载](http://www.ndepend.com/NDependDownload.aspx)。

![NDepend 依赖结构矩阵](../Images/4b0ca49c161bd5db10adcc0202c67cac.png)

让我们注意，当您比较代码库的 2 个不同快照时，NDepend 还可以显示[哪些第三方代码不再使用，或者没有使用而现在使用。](http://www.ndepend.com/Doc_VS_Search.aspx#Change)在下面的屏幕截图中，我们可以看到 NUnit v2.5.8 使用了 NUnit v2.5.3 未使用的第三方方法。

![NDepend 搜索方法按变化](../Images/18473e8bd206a72116d271baf872c1fb.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T03:20:08.623

我会看一下用于在 .NET 之上创建面向方面编程 (AOP) 层的各种 IL-weaver 实现中的任何一种——PostSharp 是一种很容易让人想到的：

[http://www.sharpcrafters.com/solutions/logging#](http://www.sharpcrafters.com/solutions/logging#)

如果我是你，我会创建一个单一的“类似记录器”的方面，然后将该方面编织到你想要对其使用进行分类的所有方法中。然后，通过它的步伐运行一段时间。您应该能够以这种方式收集一组良好的使用数据，这应该有助于决定您可以安全地摆脱什么。

与任何数量的静态分析工具相比，这种方法的一个好处是它还可以捕获方法的任何“动态”或元调用——而不仅仅是编译时绑定的调用。

# php - 第 29 行的 helloworld.php 找不到驱动程序

> ID：12676217
> 
> 赞同：0
> 
> 时间：2012-10-01T15:23:10.473
> 
> 标签：php, forms, builder

请帮助 php

```
<?php
include("../../php-form-builder-class/class.form.php");
$form = new form("HDFC_SDM");
session_start();
$form->setAttributes(array(    
    "width" => 400
));
$form->addTextbox("SRNO  :","SrNo","");
$form->addTextbox("First Name  :","FName","");
$form->addTextbox("Middle Name :","MName","");
$form->addTextbox("Last Name   :","LName","");
$form->addTextbox("Address L1  :","AddL1","");
$form->addTextbox("Address L2  :","AddL2","");
$form->addTextbox("Address L3  :","AddL3","");
$form->addTextbox("City        :","City","");
$form->addTextbox("State       :","State","");
$form->addTextbox("Telephone   :","TFone","");
$form->addTextbox("Mobile      :","MFone","");
$form->addTextbox("Status      :","Statu","");
$form->addTextbox("Notes       :","Notes","");
$form->addRadio("Address Proof :","AProof","",array("1" => "Ration Card", "2" => "Electricity Bill", "3" => "Election Card"));
$form->addFile("Address Proof Xerox", "AProofX");
$form->addRadio("Identity Proof :","IProof","",array("1" => "Pan Card", "2" => "Nationalize Bank Identity", "3" => "Election Card"));
$form->addFile("Identity Proof Xerox", "IProofX");
$form->addRadio("DOB Proof :","DProof","",array("1" => "Pan Card", "2" => "Form No. 9", "3" => "Election Card"));
$form->addFile("DOB Proof Xerox", "DProofX");
$form->addButton();
try{
    $dbh = new PDO("odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};Dbq=$HDFCSDM", "", "");
}
catch(PDOException $e){
    echo $e->getMessage();
}
$form->render();

?> 
```

出现以下错误：

```
Undefined variable: 

HDFCSDM in C:\wamp\www\MY HDFC PROJECT\DEMO\helloworld.php on line 29
could not find driver 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:28:05.683

您尚未定义`$HDFCSDM`连接字符串中使用的变量（变量在双引号字符串中展开）。如果你先定义它，那么你不应该得到错误：

```
$HDFCSDM = "C:\\file.mdb";
try{
    $dbh = new PDO("odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};Dbq=$HDFCSDM", "", "");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:29:34.357

当您进行 DSN 连接时：

```
$db_connstr = "DRIVER={Microsoft Access Driver (*.mdb)}; DBQ=C:\DataDir\DB_NAME.mdb;DefaultDir=C:\DataDir"; 
```

您的 DBQ 参数指向一个数据库。我不认为会发生这种情况。您需要在代码中或在此声明中更早地定义它。

# php - 发送数组时出现“允许的内存大小...字节耗尽”错误

> ID：12676220
> 
> 赞同：0
> 
> 时间：2012-10-01T15:23:20.193
> 
> 标签：php, mysql

当通过 php 调用 SQL 查询时，我遇到了“允许的内存大小为......字节耗尽”的问题。我相信数组创建者不知何故陷入了循环。

我的PHP：

```
<?php
function confirm_query($result_set) {
    if (!$result_set) {
        die("DB query fail: " . mysql_error());
    }
}

$con = mysql_connect("mysql15.000webhost.com", "***_mw", "***");
if (!$con) {
        die("DB connect fail: " . mysql_error());
}

$mySqlDB = "a9414387_build";
$dbSelect = mysql_select_db($mySqlDB, $con);
if (!$dbSelect) {
    die("db select fail: " . mysql_error());
}

$sku = $_POST['serching'];
$query = "SELECT * FROM inventory1 WHERE id LIKE '{$sku}%'";
$result = mysql_query($query, $con);
$des = mysql_fetch_array($result);
$matches = mysql_num_rows($result);
$json = array();
if ($matches > 0) {
    while($des) {
        $bus = array(
            'description' => $des['description'],
            'price' => $des['price'],
            'sku' => $des['id'],
            'type' => $des['type'],
        );
        $jsonString = array_push($json, $bus);
    }

    echo json_encode($jsonString);

    } else {
        echo json_encode(NULL);
    }

die();
?> 
```

但是，如果我注释掉：

```
while($des) {
            $bus = array(
                'description' => $des['description'],
                'price' => $des['price'],
                'sku' => $des['id'],
                'type' => $des['type'],
            );
            $jsonString = array_push($json, $bus);
        } 
```

并用 $des 替换 $jasonString 我得到类似的东西：

```
{"0":"4040284","id":"4040284","1":"F","active":"F","2":"T","defaults":"T","3":"aurora,superNova","model":"aurora,superNova","4":null,"defmodel":null,"5":"mboard","type":"mboard","6":"105","price":"105","7":"Intel H67 (1155) Motherboard","description":"Intel H67 (1155) Motherboard","8":"1155","socket":"1155","9":"Not available at this time.","infoDiv":"Not available at this time.","10":"IntelH67Socket1155Motherboard.jpg","image":"IntelH67Socket1155Motherboard.jpg"} 
```

我不打算扩展内存大小，b/c 一个小数组不应该这么大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:25:26.733

```
$des = mysql_fetch_array($result);
$matches = mysql_num_rows($result);
$json = array();
if ($matches > 0) {
    while($des) { 
```

`$des`您需要在循环内重新分配；否则，您将不断检查同一数据库行。尝试这样的事情：

```
$matches = mysql_num_rows($result);
$json = array();
if ($matches > 0) {
    while($des = mysql_fetch_array($result)) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T15:25:07.837

$des 被设置为数组的下一条记录，然后你在上面。这意味着它总是正确的，因为数组有内容，这会导致你想象的无限循环。`$des = mysql_fetch_array($result)`不会再次调用以继续下一个结果。

尝试删除第一个`$des = mysql_fetch_array($result)`并替换`while($des)`为：

```
while($des = mysql_fetch_array($result)) 
```

# linq - Linq 重载 where 子句以排除特定类型

> ID：12676224
> 
> 赞同：0
> 
> 时间：2012-10-01T15:23:29.723
> 
> 标签：linq, methods, dictionary, where

我正在实现一个扩展方法，`TKey`它`IDictionary<TKey, TValue>`作为参数返回。如果`TValue`是`double`，则该方法可能会返回`TKey`具有最高值的 a。否则，它将随机返回一个`TKey`.

```
 public static TKey Sample<TKey>(this IDictionary<TKey, double> probabilityTable, Random r)
    {
        probabilityTable.Normalize();

        var roll = r.NextDouble();
        var temp = 0.0;
        foreach (var key in probabilityTable.Keys)
        {
            temp += probabilityTable[key];
            if (roll <= temp)
                return key;
        }

        return default(TKey);
    }

    public static TKey Sample<TKey, TValue>(this IDictionary<TKey, TValue> dictionary, Random r)
    {
        return dictionary.Skip(r.Next(dictionary.Count)).FirstOrDefault().Key;
    }

    public static IDictionary<TKey, double> Normalize<TKey>(this IDictionary<TKey, double> probabilityTable)
    {
        if (probabilityTable.Any(x => x.Value < 0))
            throw new ArgumentOutOfRangeException("probabilityTable", "Probability is expected to be positive.");

        var sum = probabilityTable.Sum(x => x.Value);

        if (Math.Abs(sum - 1) > 1e-8)
            return probabilityTable.ToDictionary(x => x.Key, x => x.Value / sum);

        if (Math.Abs(sum) < 1e-8)
            return probabilityTable.ToDictionary(x => x.Key, x => 1.0 / probabilityTable.Count);

        return probabilityTable;
    } 
```

问题是即使使用of`Sample<TKey, TValue>`也总是调用它。我可以用 where 子句指定类型exclude double 的任何方式吗？IE`double``TValue``TValue``where TValue: !double`

调用扩展函数的代码如下：

```
 var r = new Random();
        var pt = new Dictionary<char, double> {{'A', 0.1}, {'B', 0.2}, {'C', 0.7}};
        var ct = new Dictionary<char, char> {{'A', 'D'}, {'B','E'}, {'C', 'F'}};
        Console.WriteLine(pt.Sample(r)); // expected to return 'C' mostly but uniformly returns key
        Console.WriteLine(ct.Sample(r)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:59:35.090

约束不是签名的一部分，也许以下链接可以帮助您：

[http://blogs.msdn.com/b/ericlippert/archive/2009/12/10/constraints-are-not-part-of-the-signature.aspx](http://blogs.msdn.com/b/ericlippert/archive/2009/12/10/constraints-are-not-part-of-the-signature.aspx)

# mysql - 用于替换 Magento 中的字段值的 SQL 语句

> ID：12676227
> 
> 赞同：0
> 
> 时间：2012-10-01T15:23:43.510
> 
> 标签：mysql, sql, magento

我需要帮助替换 MySQL 中的值字段。

我使用自动脚本将优惠券上传到 Magento，但字段“ `simple_action`”将值导入为“ `by_percent`”而不是“ `cart_fixed`”。有人可以向我展示一个`by_percent`用“”替换值“”的查询`cart_fixed`吗？

这：

*   表名是：`salesrule`
*   数据库名称是：`magento`
*   字段名称是：`simple_action`
*   现有字段值为：`by_percent`
*   需要的字段值（新值）是：`cart_fixed`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:25:52.057

这是执行此操作的 mysql 查询：

```
 UPDATE salesrule
 SET simple_action = 'cart_fixed'
 WHERE simple_action = 'by_percent' 
```

# common-lisp - 类型谓词

> ID：12676228
> 
> 赞同：3
> 
> 时间：2012-10-01T15:23:55.403
> 
> 标签：common-lisp

我希望提高我收到的编译器警告的质量和数量——Common Lisp 中有没有一种方法可以在声明的类型和实例上包含类型谓词——特定于实现的答案很好，我很感兴趣看看它是如何完成的，如果有人这样做的话。

在 CCL 中编译以下内容：

```
(defun non-list (o)
  (not (listp o)))

(deftype non-list ()
  '(satisfies non-list))

(defun example (a)
  (list a))

(declaim (ftype (function (non-list) list) example))

(defun hmm ()
  (declare (optimize (debug 3) (safety 3)))
  (let ((a '(a b c))
    (b '(d e f)))
    (declare (type list a))
    (example '(g h i))
    (example a)
    (example b))) 
```

在第一次调用时，我会收到编译器警告`example`——它提供了一个可以检查的实例`satisfies`。这很好，使用调试设置我会得到一个运行时错误，这很好。我想知道我是否可以写如下内容：

```
(defun non-list-typep (type)
  (not (subtypep type 'list))) 
```

并以某种方式集成它，以便至少第二次调用 -`(example a)`会在*编译*时发出警告，因为它声明的类型`list`会使谓词失败`non-list-typep`

干杯!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T17:01:39.090

**A bit background**:

There are two different things: a standard language *Common Lisp* and widely different languages implementing and extending Common Lisp.

Common Lisp as a language does not require type warnings/errors like that at compile time. An implementation can mostly ignore type declarations. The language also does not really describe what should be done when the compiler does not ignore type declarations and how it should use them to statically check types.

Actual Common Lisp compilers fall in the following groups when it comes to statically declared types:

1.  ignore them mostly. For example the compiler of the Symbolics Lisp Machine falls into this group.

2.  uses declared types mostly for optimization purposes. I'd say CCL falls into this group. I don't think it does much type inference or propagation of type information. I would guess that's also a reason why the compiler is faster than SBCL - it does less.

3.  uses declared types mostly for optimization purposes, but can do type inference and can give type information (for optimization). For example LispWorks falls into this group.

4.  uses declared types for optimization purposes, does type inference, can give type information and regards type declarations as compile-time type assertions. The CMUCL and SBCL compilers are the main members of this group.

So, for implementation of type 2\. you best need to declare everything, if you want the compiler to recognize it. Note that Common Lisp provides `THE` and `LOCALLY` to write declarations.

**If you want to have type declarations as static type assertions and have the compiler check them, you should better use a compiler like [SBCL](http://www.sbcl.org).**

A little background on its approach to type declarations can be found in the SBCL Manual: [Handling of Types](http://www.sbcl.org/manual/#Handling-of-Types) and [Type Errors at Compile Time](http://www.sbcl.org/manual/#Type-Errors-at-Compile-Time). More background here: [The Python Compiler for CMU Common Lisp](http://www.cs.cmu.edu/~ram/pub/lfp.ps). Note that the compiler of CMU Common Lisp (and later of SBCL) is called *Python* - it has nothing to do with the programming language *Python*. The compiler already had its name (early 1980s) before the language *Python* (1991) existed.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T03:01:36.350

另一种方法是在 Common Lisp 上实现类型检查语言，比如[Qi](http://www.lambdassociates.org/doc.htm)。我想它是从 defun 周围的几个智能宏开始的，以解决您面临的问题。

# linux - Master-Worker 进程的缓存意识设计

> ID：12676230
> 
> 赞同：0
> 
> 时间：2012-10-01T15:24:00.220
> 
> 标签：linux, performance, cpu-cache, worker-process

我最近开始研究一个使用熟悉的*Master-Worker*模式设计的服务器应用程序，其中一个特权线程管理多个工作线程。我现在意识到线程真的很麻烦。

我现在正在考虑转移到进程而不是线程的可能性，因为它们解决了我遇到*的很多问题。*

然而，性能是一个主要问题，我担心由于重复数据（查找表、上下文数据等）争夺 L2/L3 缓存中的空间而导致内存使用量增加，性能会下降。这些数据需要偶尔修改，并且可能会变得非常大。

```
hash_table files; 

function serve_file(connection, path)
    file = hash_table[path]
    sendfile(connection.fd, file.fd, 0, file.size);

function on_file_added_to_server_root(which)
    files.add(which, ...) 
```

给定`N`工作进程，如果有`N`这张表的副本，那就太可惜了。但是，有些表可以完美地复制到任何地方。但是也有许多`malloc(3)`可能被共享的分配内存，但可能分散在各处，导致随机页面由于写时复制而被复制。

是否有任何技巧或一般策略可以在多进程设计中保持内存使用紧密？

谢谢！

# java - 发音不识别 JAXBElement

> ID：12676232
> 
> 赞同：2
> 
> 时间：2012-10-01T15:24:18.970
> 
> 标签：java, rest, jaxb, enunciate

我有一个完全工作且经过测试的 REST API。要创建我正在使用的文档，请说明。

请求和响应对象是使用 jaxb 从 xsd 文件生成的。在文档中，响应对象被识别，但我的请求正文的类型是**(custom)**。

请求正文封装在 JAXBElement 中

代码示例：

```
@POST
@Consumes(
{
    MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON
})
@Produces(
{
    MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON
})
public ResponseObject post(JAXBElement<CreateRequestObject> JAXBCreateRequestObject,
        @HeaderParam(value = "X") String x,
        @HeaderParam(value = "Y") String y) throws WebApplicationException 
```

是否有类似`@TypeHint`指定请求对象类型的注释？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T23:11:26.100

您应该能够将 @TypeHint 应用于参数，例如：

```
 public ResponseObject post(@TypeHint(...) JAXBElement<CreateRequestObject> JAXBCreateRequestObject,
     @HeaderParam(value = "X") String x,
     @HeaderParam(value = "Y") String y) 
```

# lucene - 使用 elasticsearch 精确搜索数组对象类型

> ID：12676234
> 
> 赞同：17
> 
> 时间：2012-10-01T15:24:25.143
> 
> 标签：lucene, elasticsearch

我正在寻找一种在弹性搜索中进行**精确数组匹配的方法。**假设这些是我的文件：

```
{"id": 1, "categories" : ["c", "d"]}
{"id": 2, "categories" : ["b", "c", "d"]}
{"id": 3, "categories" : ["c", "d", "e"]}
{"id": 4, "categories" : ["d"]}
{"id": 5, "categories" : ["c", "d"]} 
```

有没有办法搜索所有具有“c”和“d”类别（文档 1 和 5）的文档，不多也不少**？**

作为奖励：搜索“其中一个”类别应该仍然是可能的（例如，您可以搜索“c”并获得 1、2、3 和 5）

有什么聪明的方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-01T16:38:17.620

如果您有一组离散的已知类别，则可以使用 bool 查询：

```
"bool" : {
    "must" : {
        "terms" : { "categories" : ["c", "d"],
             minimum_should_match : 2
         }
    },
    "must_not" : {
        "terms" : { "categories" : ["a", "b", "e"],
             minimum_should_match : 1
         }
    }
} 
```

否则，我认为完成此任务的最简单方法可能是存储另一个字段作为类别关键字。

```
{"id": 1, "categories" : ["c", "d"], "categorieskey" : "cd"} 
```

类似的东西。然后，您可以轻松地使用术语查询精确地查询您想要的结果，例如：

```
term { "categorieskey" : "cd" } 
```

而且您仍然可以进行非排他性搜索，例如；

```
term { "categories" : "c" } 
```

查询必须同时存在的两个类别很容易，但要阻止任何其他潜在类别存在则有点困难。你可以做到，也许。您可能想要编写一个查询来查找两者的记录，然后对其应用过滤器，以消除除指定类别之外的任何记录。据我所知，这并不是 Lucene 真正设计用来处理的一种搜索。

老实说，我在想出一个在这里使用的好过滤器时遇到了一些麻烦。您可能需要一个脚本过滤器，或者您可以在检索到结果后对其进行过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:44:33.793

我为我们的用例找到了一个似乎可行的解决方案。它依赖于两个过滤器和我们想要匹配多少类别的知识。我们使用术语过滤器和脚本过滤器来检查数组的大小。在此示例中，marketBasketList 类似于您的类别条目。

```
{
  "query": {
    "bool": {
      "must": [
        {
          "match": {
            "siteId": 4
          }
        },
        {
          "match": {
            "marketBasketList": {
              "query": [
                10,
                11
              ],
              "operator": "and"
            }
          }
        }
      ]
    },
    "boost": 1,
    "filter": {
      "and": {
        "filters": [
          {
            "script": {
              "script": "doc['marketBasketList'].values.length == 2"
            }
          },
          {
            "terms": {
              "marketBasketList": [
                10,
                11
              ],
              "execution": "and"
            }
          }
        ]
      }
    }
  }
} 
```

# c# - 禁止用户选择不相邻的多行？

> ID：12676238
> 
> 赞同：4
> 
> 时间：2012-10-01T15:24:42.643
> 
> 标签：c#, datagridview

在 a`DataGridView`中，用户可以通过按住控件并选择不同的行来选择多个彼此不相邻的行。我的问题有两个部分。

首先，默认情况下保持控制是用户可以像这样选择多个彼此不相邻的行的唯一方法吗？其次，如何禁用这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T16:58:05.990

> 首先，默认情况下保持控制是用户可以像这样选择多个彼此不相邻的行的唯一方法吗？

不，您可以通过实现`Events`. 这些链接可以帮助您实现您想要的：[this](http://www.c-sharpcorner.com/UploadFile/suparba/MULTIDATAGRIDROW107282005111750AM/MULTIDATAGRIDROW1.aspx)和[this](http://netexperiments.blogspot.in/2007/02/datagridview-multiselect-without-ctrl.html)。

> 其次，如何禁用这种行为？

禁用 ctrl+click 以使用户无法选择多个彼此分开的单元格、行或列。您可以通过覆盖`OnMouseDown`事件来做到这一点。显然，为此，您必须使用自己的（继承的 datagridview）控件。在那个覆盖`OnMouseDown`事件中..

```
 protected override void OnMouseDown(MouseEventArgs e)
    {
        if ((Control.ModifierKeys & Keys.Control) == Keys.Control)
        {
        }
        else
        {
            base.OnMouseDown(e);
        }
    } 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T15:48:49.500

使用`multiSellect`这样的属性

`multiSelect=false`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T17:03:03.397

无需派生自定义数据网格，您就可以跟踪选定的行索引并在 RowStateChanged 事件中无效时取消选择行。这假设全行选择。

您还必须在行取消选择时添加一些验证逻辑，以确保不会在相邻行中产生间隙。例如，选择第 1、2、3 行，然后取消选择第 2 行，因此您需要决定是禁止此操作还是取消选择第 3 行或第 1 行。

```
public List<int> selectedIndexes = new List<int>();

private void dataGridView1_RowStateChanged(object sender, DataGridViewRowStateChangedEventArgs e)
{
     if (e.StateChanged == DataGridViewElementStates.Selected)
     {
          //selected
          if (e.Row.Selected)
          { 
              int newRowIndex = e.Row.Index;

              //if other rows selected make sure adjacent selection exists                   
              if (selectedIndexes.Count() > 0)
              {
                  if (selectedIndexes.Contains(newRowIndex - 1) || selectedIndexes.Contains(newRowIndex + 1))
                  {
                            //allow selection
                        selectedIndexes.Add(newRowIndex);
                  }
                  else
                  {
                        //cancel selection
                        e.Row.Selected = false;
                  }
               }
               else
               {
                   //first selection so allow it
                    selectedIndexes.Add(newRowIndex);
                }
           }
           else if( !e.Row.Selected)
           {
                   //row deselected (need to add logic to remove non adjacent rows to be unselected as well)
                    selectedIndexes.Remove(e.Row.Index);
           }
     } 
```

}

# javascript - 在 youtube api 中检测播放事件

> ID：12676241
> 
> 赞同：3
> 
> 时间：2012-10-01T15:24:55.507
> 
> 标签：javascript, jquery, api, youtube, event-listener

我正在寻找一种通过 Javascript 在嵌入式 Youtube 视频中检测播放事件的方法。现在我能够检测到状态变化，但我不知道如何在之后取消绑定事件并触发另一个事件，说它已经完成。我也不想使用 add/removeEventListener 因为我猜 IE8 及以下版本没有这个功能。

到目前为止我的代码，

```
 function onYouTubePlayerReady(playerId) {
    console.log('loaded');
    var ytPlayer = document.getElementById(playerId);
    ytplayer.addEventListener("onStateChange", "onytplayerStateChange");
}

function onytplayerStateChange(newState) {
    console.log("Player's new state: " + newState);
    if(newState === 1) {
        sendYtUrl();
     }
}

function sendYtUrl() {
    console.log('play detected');
    ytplayer.removeEventListener("onStateChange");
} 
```

我希望弹出到 sendYtUrl，删除侦听器，然后做我需要做的任何事情，或者更好的是，保持它更清洁并将其保留在相同的功能中。

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T16:51:29.313

您无需取消绑定[`onStateChange`事件](https://developers.google.com/youtube/js_api_reference#Events)即可知道视频何时结束或完成。`onStateChange`只需要有一个事件监听器。每次发生任何这些情况时，它将被触发并返回以下状态：

```
-1 (unstarted)
0 (ended)
1 (playing)
2 (paused)
3 (buffering)
5 (video cued) 
```

在您的函数`onytplayerStateChange`中，添加另一个`if`语句以在视频完成时捕获：

```
function onytplayerStateChange(newState) {
    console.log("Player's new state: " + newState);
    if(newState === 1) {
        sendYtUrl();
    } else if(newState === 0) {
        console.log("Video has ended!");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:00:38.740

太感谢了！这让我朝着正确的方向前进。

这就是我最终做的事情。

```
var ytPlaying = 0;
var ytPlayed = '';
var currPlaying = '';

function onYouTubePlayerReady(playerId) {
    //console.log('loaded');
    var ytPlayer = document.getElementById(playerId);
    ytPlayer.addEventListener("onStateChange", "onytplayerStateChange");
}

function onytplayerStateChange(newState) {
    currPlaying = window.location.hash;
    //console.log("Player's new state: " + newState);
    if (newState === 1) {
        console.log('playing');
        clientSideTracking();
    }   
}

function clientSideTracking() {
   // console.log('client tracking');
    //console.log(currPlaying, ytPlayed);
    if (currPlaying != ytPlayed) { // if current playing isn't the same as prior played
        //console.log('different'); // then it's different - track it.
        var event = new AnalyticsPageEvent('Youtube Analytics', currPlaying);
        event.trigger();
    }
    ytPlaying = 0; // change back to 'not played' and change to 0 so that it's logged
    ytPlayed = currPlaying;

} 
```

它的作用是在有尚未播放的新 URL 时触发 AnalyticPageEvent。:)

# .htaccess - 使用 .htaccess 将特定页面重定向到 HTTPS

> ID：12676242
> 
> 赞同：0
> 
> 时间：2012-10-01T15:24:55.830
> 
> 标签：.htaccess, redirect, https

我正在尝试使用 .htaccess 重定向：使用 .htaccess 将[http://shop.mysite.com/products/product-1](http://shop.mysite.com/products/product-1)重定向到[https://shop.mysite.com/products/product-1](https://shop.mysite.com/products/product-1)。唯一的区别是 URL 的最后一部分，即产品名称。我只希望重定向对产品页面生效，仅此而已。

有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:46:24.213

尝试将这些规则添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{HTTPS} !on
RewriteCond %{HTTP_HOST} ^shop\.mysite\.com$ [NC]
RewriteRule ^/?products/(.*)$ https://%{HTTP_HOST}/products/$1 [L,R=301] 
```

# c++ - 初始化依赖于另一个类成员的类成员

> ID：12676243
> 
> 赞同：1
> 
> 时间：2012-10-01T15:25:02.553
> 
> 标签：c++, class, constructor, initialization

```
 class TestGet : public ::testing::Test 
        {
        protected:
            TestGet() 
                : _txHandle(11)
            {
                _interface.get = mockGet;
            }

            Interface_T _interface;
            Handle_T _txHandle;
            DB _db;
        }; 
```

如果我更改`DB`为仅具有以下构造函数：

```
 explicit DB(Interface_T& _interface):
            _interface(interface)
        {
        } 
```

我现在是否需要在我的类中声明`_db`使用 a并在构造函数中对其进行初始化？`std::shared_ptr``TestGet``_interface`

更新：

问题是我有：

```
 private:
        Interface_T _interface; 
```

在 DB 类而不是引用中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:29:46.620

这应该有效：

```
TestGet()
: _interface()
, _txHandle(11)
, _db(_interface)
{
    _interface.get = mockGet;
} 
```

不过，这取决于 的构造函数是否`DB`做了任何重要的事情。只要它只存储参考，这应该没问题。也就是说，`DB`应该是这样的：

```
struct DB
{
    Interface_T & _interface;
    explicit DB(Interface_T & interface) : _interface(interface) { }
}; 
```

如果您需要进一步初始化，您可以添加一个`init()`函数到`DB`，或者为它创建一个初始化函数`Interface_T`，您可以在`TestGet`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T15:27:32.153

> 我现在是否需要在我的 TestGet 类中使用 std::shared_ptr 声明 _db

不，您可以保持原样，但您必须在所有`TestGet`构造函数的初始化列表中对其进行初始化。

```
 TestGet() :
 _txHandle(11),
 _db(someInterface)
 {
     _interface.get = mockGet;
 } 
```

# php - jquery：进度指示器无法通过 ajax 调用正确显示/隐藏

> ID：12676245
> 
> 赞同：0
> 
> 时间：2012-10-01T15:25:05.637
> 
> 标签：php, jquery, html, ajax

我有一个 html 页面，上面有不同的部分（通过 DIV 标签完成）。这些部分是使用 ajax 调用创建/更新的。其中一个 div 实际上是一个进度指示器——它只显示一个图像，告诉用户我正在后台处理他们的请求。

我的问题是这个进度指示器并不总是在请求时显示，即使每个点击事件处理程序中的前几行代码都有显示此部分的代码。（然后在每个按钮的末尾单击我隐藏 div）

这是我的代码的基本框架：

```
 <div class="row-fluid">        
  <div class="span12">

      <h2>Title for Page></h2>
          <table class="table table-bordered table-striped"  id="assignedRecords">
          <thead>
              <tr>                  
                  <th>ID</th>
                  <th>Name</th>
                  <th>Status</th>
                  <th>Voice</th>
                  <th>Jumbo</th>
                  <th>Mode</th>
                  <th>&nbsp;</th>
              </tr>
          </thead>
          <tbody>

              <?php foreach ($databaserecords as $record): ?>
                  <tr>          
                                        ...  code to create initial table
                                        <td><button class='btn deleteBtn'>Delete</button></td>
                </tr>
              <?php endforeach ?>

          </tbody>
          </table>

          <div id="progress-indicator">
                 <img src="<?php echo base_url();?>assets/img/wip.gif"> Retrieving records...</img>
          </div>    

          <button class="btn" id="getlist">Get List of Available Objects</button>
  </div>

  <div class="span12" id="availableObjectsAjaxContainer"></div> 
  <!--this is updated via ajax when the user clicks on the modify button. -->

 </div>   

  <script>

   $(document).ready(function(){

    //hide the please wait div by default.
    $('#progress-indicator').hide();

            $('#getlist').live('click', function()  {

                    $('#progress-indicator').html("<img src='" + BASEPATH + "assets/img/wip.gif' /> Retrieving...</img>");
                    $('#progress-indicator').fadeIn();      
                    .
                   // updates availableObjectsAjaxContainer section
                    .
                    .

    $('#deleteRecord').live('click', function()  {

                $('#progress-indicator').html("<img src='" + BASEPATH + "assets/img/wip.gif' /> deleting record...</img>");
                $('#progress-indicator').fadeIn();      
                .
                .
                // updates assignedRecords table section
                . 
```

单击“getlist”按钮时，它会显示。但是，当单击“deleteRecord”按钮时，它不会显示。我已确保我的 ajax 调用不会意外“清除”具有进度指示器的 div。我的 ajax 调用仅更新“assignedRecords”表部分......和“availableObjectsAjaxContainer”部分。

你能告诉我哪里出错了吗？

谢谢。

**编辑 1**

以下是 deleteRecord click 事件处理函数的完整版本：

```
 $('.deleteBtn').live('click', function()  {
                $('#progress-indicator').html("<img src='" + BASEPATH + "assets/img/wip.gif' /> deleting vlan...</img>");
                $('#progress-indicator').fadeIn();          
                //get a count of all records. only allowed to delete if you have more than one record.

                var reccount = $('#assignedRecords tbody tr').length;

                if (reccount > 1)
                {

                        var userSelectionId  = $(this).parent().siblings('.id').text(); 
                        var modeDelete = $(this).parent().siblings('.mode').text();

                        var fullpath = BASEPATH + 'index.php/switches/delete/' + userSelectionId + '/' + modeDelete;
                        console.log(fullpath);
                        $.ajax({
                                url:fullpath,
                                type:'POST',
                                dataType:'json',
                                success: function(returnDataFromController) {

                                                console.log(returnDataFromController);
                                                //build table contents 
                                                var htmlstring = '<thead>';  
                                                htmlstring = htmlstring + '<tr>';
                                                htmlstring = htmlstring + '<th>Id</th>';
                                                htmlstring = htmlstring + '<th>Name</th>';
                                                htmlstring = htmlstring + '<th>Status</th>';
                                                htmlstring = htmlstring + '<th>Voice</th>';
                                                htmlstring = htmlstring + '<th>Jumbo</th>';
                                                htmlstring = htmlstring + '<th>Mode</th>';
                                                htmlstring = htmlstring + '<th>&nbsp;</th>';
                                                htmlstring = htmlstring + '</tr>';
                                                htmlstring = htmlstring + '</thead>';
                                                htmlstring = htmlstring + '<tbody>';

                                                //loop through results from ajax call and build table.  
                                                for(i = 0; i < returnDataFromController.length; i++) {
                                                      //alert(returnDataFromController[i].Id);
                                                      htmlstring = htmlstring + "<tr>"
                                                      htmlstring = htmlstring + "<td class ='recordid'>" + returnDataFromController[i].Id + "</td>";
                                                      htmlstring = htmlstring + "<td>" + returnDataFromController[i].Name + "</td>";
                                                      htmlstring = htmlstring + "<td>" + returnDataFromController[i].Status + "</td>";
                                                      htmlstring = htmlstring + "<td>" + returnDataFromController[i].Voice +"</td>";
                                                      htmlstring = htmlstring + "<td>" + returnDataFromController[i].Jumbo + "</td>";
                                                      htmlstring = htmlstring + "<td class='mode'>" + returnDataFromController[i].Mode +"</td>";
                                                      htmlstring = htmlstring + "<td><button class='btn deleteBtn'>Delete</button></td>";
                                                      htmlstring = htmlstring + "</tr>";    

                                                }//end loop

                                               htmlstring = htmlstring + "</tbody>";
                                               htmlstring = htmlstring + "</table>";

                                             $('#assignedRecords').html(htmlstring);
                                  }//end success ajax call

                        });//end ajax.                                               
                }
                else
                {   
                    alert("Must have at least one record!");
                }
                $('#progress-indicator').hide();

  }); //end click event 
```

**编辑2：**

```
 $('#getList').click(function()  {

            $(this).attr("disabled","disabled");
            $('#progress-indicator').html("<img src='" + BASEPATH + "assets/img/wip.gif' /> Retrieving ...</img>");
            $('#progress-indicator').fadeIn();
            $.ajax({
              url:"<?php echo site_url('switches/showavailrecs/'.$ip.'/'.$hardwaremodel);?>",
              type:'POST',
              dataType:'json',
              success: function(returnDataFromController) {

                  var htmlstring;

                  htmlstring = htmlstring + "<th>Id</th><th>Name</th>";

                  //loop through results
                  for(i = 0; i < returnDataFromController.length; i++) {
                          //alert(returnDataFromController[i].Id);
                          htmlstring = htmlstring +  "<tr><td><a href=>"+returnDataFromController[i].Id+"</a></td><td>"+ returnDataFromController[i].Name+"</td></tr>"; 

                  }

                  $('#availableObjectsAjaxContainer').html(htmlstring);

                  $('#progress-indicator').hide();
                 }//end success
              }); //end ajax call
              $(this).removeAttr("disabled");
    }); 
```

**编辑 3：**

我想我知道发生了什么——尽管我不知道为什么会这样。

我已将所有 .hide 命令移到我的 ajax 调用的成功部分中......现在......它们似乎正在工作。谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:33:27.837

我不确定它是否与您的问题有关，但 ID 必须是唯一的，并且`#deleteRecord`每个对象都有一个元素。

您应该将代码更改为：

```
<td><button class='btn delete'>Delete</button></td>

...

$('.delete').live('click', function()  { 
```

**编辑：**最后如此明显（基于您的最新编辑）：您正在显示进度指示器并在它刚刚开始淡入时立即隐藏它......

# java - 如何使用 Jackson 和注释以不同的方式序列化关联对象？

> ID：12676249
> 
> 赞同：11
> 
> 时间：2012-10-01T15:25:12.417
> 
> 标签：java, json, jackson

鉴于以下类层次结构，我希望 Foo 根据它在我的类层次结构中使用的上下文进行不同的序列化。

```
public class Foo {
    public String bar;
    public String biz;
}

public class FooContainer {
    public Foo fooA;
    public Foo fooB;
} 
```

当我序列化 FooContainer 时，我希望 biz 属性不会出现在 fooB 中。所以输出看起来像下面这样。

```
{
  "fooA": {"bar": "asdf", "biz": "fdsa"},
  "fooB": {"bar": "qwer"}
} 
```

我打算使用 JsonView 的东西，但必须在映射器层为类的所有实例应用它，这取决于上下文。

* * *

在 Jackson 用户邮件列表中，Tatu 提供了最简单的解决方案（适用于 2.0），我现在可能最终会使用它。将赏金授予 jlabedo，因为答案是如何使用自定义注释扩展 Jackson 的绝佳示例。

```
public class FooContainer {
    public Foo fooA;

    @JsonIgnoreProperties({ "biz" })
    public Foo fooB;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-06T15:30:29.973

您可以使用 JsonViews 将自定义序列化程序与自定义属性过滤器结合使用。这是一些使用 Jackson 2.0 的代码

定义一个自定义注解：

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.FIELD)
public @interface FilterUsingView {
    Class<?>[] value();
} 
```

定义一些视图：

```
// Define your views here
public static class Views {
    public class Public {};
    public class Internal extends Public{};
} 
```

然后你可以这样写你的实体。请注意，您可以定义自己的注释而不是使用`@JsonView`：

```
public class Foo {
    @JsonView(Views.Public.class)
    public String bar;
    @JsonView(Views.Internal.class)
    public String biz;
}

public class FooContainer {
    public Foo fooA;
    @FilterUsingView(Views.Public.class)
    public Foo fooB;
} 
```

然后，这里是代码开始的地方:) 首先是您的自定义过滤器：

```
public static class CustomFilter extends SimpleBeanPropertyFilter {

    private Class<?>[] _nextViews;

    public void setNextViews(Class<?>[] clazz){
        _nextViews = clazz;
    }

    @Override
    public void serializeAsField(Object bean, JsonGenerator jgen,
            SerializerProvider prov, BeanPropertyWriter writer)
            throws Exception {

        Class<?>[] propViews = writer.getViews();

        if(propViews != null && _nextViews != null){
            for(Class<?> propView : propViews){
                System.out.println(propView.getName());
                for(Class<?> currentView : _nextViews){
                    if(!propView.isAssignableFrom(currentView)){
                        // Do the filtering!
                        return;
                    }
                }
            }
        }
        // The property is not filtered
        writer.serializeAsField(bean, jgen, prov);
    }
} 
```

然后一个自定义`AnnotationIntrospector`会做两件事：

1.  为任何 bean 启用您的自定义过滤器......除非在您的类上定义了另一个过滤器（所以您不能同时使用它们，如果您明白我的意思）
2.  如果他找到`@FilterUsingView`注释，请启用您的 CustomSerializer。

这是代码

```
public class CustomAnnotationIntrospector extends AnnotationIntrospector {
    @Override
    public Version version() {
        return DatabindVersion.instance.version();
    }

    @Override
    public Object findFilterId(AnnotatedClass ac) {
      // CustomFilter is used for EVERY Bean, unless another filter is defined
      Object id = super.findFilterId(ac);
      if (id == null) {
        id = "CustomFilter";
      }
      return id;
    }

    @Override
    public Object findSerializer(Annotated am) {
        FilterUsingView annotation = am.getAnnotation(FilterUsingView.class);
        if(annotation == null){
            return null;
        }
        return new CustomSerializer(annotation.value());
    }
} 
```

这是您的自定义序列化程序。它唯一要做的就是将注释的值传递给自定义过滤器，然后让默认序列化程序完成这项工作。

```
public class CustomSerializer extends JsonSerializer<Object> {

    private Class<?>[] _activeViews;

    public CustomSerializer(Class<?>[] view){
        _activeViews = view;
    }

    @Override
    public void serialize(Object value, JsonGenerator jgen,
            SerializerProvider provider) throws IOException,
            JsonProcessingException {

        BeanPropertyFilter filter = provider.getConfig().getFilterProvider().findFilter("CustomFilter");
        if(filter instanceof CustomFilter){
            CustomFilter customFilter = (CustomFilter) filter;

            // Tell the filter that we will filter our next property
            customFilter.setNextViews(_activeViews);

            provider.defaultSerializeValue(value, jgen);

            // Property has been filtered and written, do not filter anymore
            customFilter.setNextViews(null);
        }else{
            // You did not define a CustomFilter ? Well this serializer is useless...
            provider.defaultSerializeValue(value, jgen);
        }
    }
} 
```

最后 ！让我们把这一切放在一起：

```
public class CustomModule extends SimpleModule {

    public CustomModule() {
        super("custom-module", new Version(0, 1, 0, "", "", ""));
    }

    @Override
    public void setupModule(SetupContext context) {
        super.setupModule(context);
        AnnotationIntrospector ai = new CustomAnnotationIntrospector();
        context.appendAnnotationIntrospector(ai);
    }

}

@Test
public void customField() throws Exception {
    FooContainer object = new FooContainer();
    object.fooA = new Foo();
    object.fooA.bar = "asdf";
    object.fooA.biz = "fdsa";
    object.fooB = new Foo();
    object.fooB.bar = "qwer";
    object.fooB.biz = "test";

    ObjectMapper mapper = new ObjectMapper();
    mapper.registerModule(new CustomModule());

    FilterProvider fp = new SimpleFilterProvider().addFilter("CustomFilter", new CustomFilter());
    StringWriter writer = new StringWriter();

    mapper.writer(fp).writeValue(writer, object);

    String expected = "{\"fooA\":{\"bar\":\"asdf\",\"biz\":\"fdsa\"},\"fooB\":{\"bar\":\"qwer\"}}";

    Assert.assertEquals(expected, writer.toString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T15:47:05.037

我会
在这里使用谷歌代码 gson 文档[https://code.google.com/p/google-gson/](https://code.google.com/p/google-gson/)
Maven 依赖项是：

```
<dependency>
            <groupId>com.google.code.gson</groupId>
            <artifactId>gson</artifactId>
            <version>2.2.1</version>
        </dependency> 
```

注释是这样的：
公开字段用户`@Expose`注释
为解析的 json 用户`@SerializedName("fieldNameInJSON")`注释中的字段生成一个特殊名称
所以你的类看起来像这样：

```
 public class Foo {
@SerializedName("bar")
    @Expose
        public String bar;
@SerializedName("biz")
    @Expose
        public String biz;
    }

    public class FooContainer {
@SerializedName("fooA")
    @Expose
        public Foo fooA;
@SerializedName("fooB")
    @Expose
        public Foo fooB;
    } 
```

要序列化为 JSON，您将使用如下所示的代码：

```
public String convertToJSON(FooContainer fc) {
        if (fc != null) {
            GsonBuilder gson = new GsonBuilder();
            return gson.excludeFieldsWithoutExposeAnnotation().create().toJson(fc);
        }
        return "";
    } 
```

例如，列表看起来是一样的：

```
public String convertToJSON(List<FooContainer> fcs) {
            if (fcs != null) {
                GsonBuilder gson = new GsonBuilder();
                return gson.excludeFieldsWithoutExposeAnnotation().create().toJson(fcs);
            }
            return "";
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T16:21:12.867

```
import static org.junit.Assert.*;

import java.io.IOException;
import java.io.StringWriter;
import java.lang.reflect.Type;

import org.codehaus.jackson.JsonGenerationException;
import org.codehaus.jackson.JsonGenerator;
import org.codehaus.jackson.JsonNode;
import org.codehaus.jackson.map.JsonMappingException;
import org.codehaus.jackson.map.ObjectMapper;
import org.codehaus.jackson.map.SerializerProvider;
import org.codehaus.jackson.map.annotate.JsonSerialize;
import org.codehaus.jackson.map.ser.SerializerBase;
import org.junit.Test;

class Foo {
    public String bar;
    public String biz;
}

class FooContainer {
    public Foo fooA;
    @JsonSerialize(using = FooCustomSerializer.class)
    public Foo fooB;
}

class FooCustomSerializer extends SerializerBase<Foo> {

    public FooCustomSerializer() {
        super(Foo.class);
    }

    @Override
    public void serialize(Foo foo, JsonGenerator generator, SerializerProvider provider) throws IOException, JsonGenerationException {
        generator.writeStartObject();
        generator.writeObjectField("bar", foo.bar);
        generator.writeEndObject();
    }

    @Override
    public JsonNode getSchema(SerializerProvider arg0, Type arg1) throws JsonMappingException {
        return null;
    }

}

public class JacksonTest {

    @Test
    public void customField() throws Exception {
        FooContainer object = new FooContainer();
        object.fooA = new Foo();
        object.fooA.bar = "asdf";
        object.fooA.biz = "fdsa";
        object.fooB = new Foo();
        object.fooB.bar = "qwer";
        object.fooB.biz = "test";
        ObjectMapper mapper = new ObjectMapper();
        StringWriter writer = new StringWriter();
        mapper.writeValue(writer, object);
        String expected = "{\"fooA\":{\"bar\":\"asdf\",\"biz\":\"fdsa\"},\"fooB\":{\"bar\":\"qwer\"}}";
        assertEquals(expected, writer.toString());
    }

} 
```

在公共 Foo fooB 上使用 @JsonSerialize(using = FooCustomSerializer.class); 场地。

[http://jackson.codehaus.org/1.9.9/javadoc/org/codehaus/jackson/map/annotate/JsonSerialize.html](http://jackson.codehaus.org/1.9.9/javadoc/org/codehaus/jackson/map/annotate/JsonSerialize.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-12T19:35:11.320

[`@JsonIgnoreProperties`](https://javadoc.io/static/com.fasterxml.jackson.core/jackson-annotations/2.12.3/com/fasterxml/jackson/annotation/JsonIgnoreProperties.html)注释可用于`fooB`属性 in以仅在该特定上下文中`FooContainer`忽略该属性。`biz`

```
public class FooContainer {
    public Foo fooA;

    @JsonIgnoreProperties({ "biz" })
    public Foo fooB;
} 
```

注意：您在 2012 年所做的编辑中提到了这一点，但我将其写成自己的答案，因为我认为这是解决此特定问题的最佳解决方案。

# php - 从数据库中选择框自动填充

> ID：12676251
> 
> 赞同：0
> 
> 时间：2012-10-01T15:25:14.603
> 
> 标签：php, mysql

希望您能提供帮助，请原谅任何糟糕的编码或任何问题，我对此很陌生，只是想办法让事情正常进行。

也就是说，在我的一个项目中，我有这个代码，它在页面加载时成功地从数据库中填充下拉列表：

```
<select name="Region" id="Region">
    <option value="">-- Select Region --</option>
    <?php                     
       $region=$POST['Region'];    
       if ($region); {
            $regionquery = "SELECT DISTINCT REGION FROM Sales_Execs ";    
            $regionresult = mysql_query($regionquery);    
            while($row = mysql_fetch_array($regionresult)) {
                echo "<option value=\"".$row['REGION']."\">".$row['REGION']."</option>\n  ";
            }       
       }
     ?>
        <script type="text/javascript">
document.getElementById('Region').value = <?php echo json_encode(trim($_POST['Region']));?>;
        </script>
    </select> 
```

在我现在正在进行的下一个项目中，我需要做同样的事情，所以我复制了上面的代码修改，并放在我的新项目中：

```
<select name="Sales_Exec" id="Sales_Exec">    
<option value="">-- Select SE --</option>
<?php                     
   $salesexec=$POST['Sales_Exec'];    
   if ($salesexec);    
   {
       $salesexecquery = "SELECT DISTINCT Assigned FROM Data ";    
       $salesexecresult = mysql_query($salesexecquery);    
       while($row = mysql_fetch_array($salesexecresult))
       {
            echo "<option value=\"".$row['ASSIGNED']."\">".$row['ASSIGNED']."</option>\n  ";
        }       
    }
?>
<script type="text/javascript">
 document.getElementById('Sales_Exec').value = <?php echo json_encode(trim($_POST['Sales_Exec']));?>;
</script>

</select> 
```

这第二段代码不起作用......我无法弄清楚为什么我似乎已经复制了所有代码并修改了所有必要的部分，任何人都可以发现有什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:33:25.887

你不使用`$salesexec`但它应该是`$salesexec=$_POST['Sales_Exec'];`（注意`$_POST`而不是`$POST`.

数据库中的字段是`Assigned`（只有第一个字母大写），您正在回显`ASSIGNED`（全部大写），这是未设置的。

利用

```
echo "<option value=\"".$row['Assigned']."\">".$row['Assigned']."</option>\n  "; 
```

至于 XSS 漏洞，实际上甚至不需要用 JavaScript 设置值，检查`POST`你的循环内并直接在选项中设置选择的值：

```
echo "<option value=\"".$row['Assigned']."\"";
if (isset($_POST['Sales_Exec']) && $_POST['Sales_Exec'] == $row['Assigned']) { 
    echo ' SELECTED';
}
echo ">".$row['Assigned']."</option>\n  "; 
```

# google-plus - 可以在 Google Hangout 应用中呈现 HTML 内容的最大区域大小是多少？

> ID：12676258
> 
> 赞同：1
> 
> 时间：2012-10-01T15:25:45.833
> 
> 标签：google-plus, hangout

我在我的 Google Hangout 应用程序中构建了很多 HTML 内容，我想知道我的 HTML 内容应该采用的最大和推荐的像素大小，因为使用百分比隐含地考虑了屏幕底部的人员/应用程序栏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:54:44.270

[Jonathan Beri](https://plus.google.com/108249232416813189685)是 Google+ API 的开发人员支持人员之一，他发布了以下 UI 建议： [http ://blog.jonathanberi.com/2012/07/designing-for-hangout-apps-dimensions.html](http://blog.jonathanberi.com/2012/07/designing-for-hangout-apps-dimensions.html)

# java - 如何产生另一个 main()？

> ID：12676260
> 
> 赞同：2
> 
> 时间：2012-10-01T15:25:50.767
> 
> 标签：java, spawn

是否可以`main()`像从命令提示符运行一样从另一个应用程序运行一个应用程序？

我知道我可以使用`Runtime.exec()`，但是否可以从纯 java 运行？

**更新**

如果我只是`main()`通过调用它来运行，它将在同一个线程中运行，调用者将等待它完成。如果我在新线程中运行 main ，它可能会通过静态成员干扰调用者。

我的目标是运行完全独立的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T16:02:13.847

如果您真的想要一个单独的应用程序，那么就没有办法`Runtime.exec()`或等效的方法。进程生成是操作系统的一项功能，Java 必须以某种方式调用操作系统的执行方法。

但是，您可以使用类加载器和线程在同一个 JVM 中执行两个应用程序。最常见的用例是应用服务器，但您可以使用[Plexus](http://plexus.codehaus.org/)等容器来做同样的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T16:05:03.840

您可以实例化一个新`Thread`的并在其内部运行方法调用`main()`另一个类的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T15:27:16.233

Main 是静态函数，您可以从任何其他函数调用它，并且应该可以正常运行。

# xamarin - 在 MonoDevelop WinForm 中设置项目

> ID：12676263
> 
> 赞同：0
> 
> 时间：2012-10-01T15:25:53.423
> 
> 标签：xamarin

我想知道如何在 MonoDevelop 中添加安装项目（我的操作系统是 Windows 而不是 Linux），谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:42:14.480

抱歉，您的问题没有尽快引起注意。是的，在 MD 中设置项目非常容易。您所要做的就是转到“文件”菜单，然后选择“新建”，在“C#”下选择“GTK# 2.0 项目”（或者你那里的任何数字......我不知道你是哪个版本使用）。然后 MD 想知道你会给你的项目起什么名字……所以在那里输入一些东西，你也可以指出你想把它保存在哪个目录，以及你是否想要一个单独的目录来存放你的新解决方案。然后乐趣就开始了。您可能想尝试一下类似这样的[教程](http://monodevelop.com/stetic_gui_designer)。继续问你的问题，继续四处寻找教程，我想你会喜欢的！

干杯

# java - 如何控制生成的 Web 服务类型中包含哪些字段？

> ID：12676270
> 
> 赞同：0
> 
> 时间：2012-10-01T15:26:19.753
> 
> 标签：java, jax-ws, webservice-client

我正在开发一个遗留系统，其中 webservice-clients 作为打包的 .jar 文件包含在内。我们想改变这一点，改为生成客户端。但是在完成此操作之后，存在一些差异，.jar-clients 可以访问返回对象的所有字段，生成的版本中缺少一些。（它们实际上是从服务的生成 xsd 中丢失的，因此不会在客户端中生成）。我们很快注意到缺失的字段与存在的字段之间的区别在于缺失的字段没有 getter 和 setter。添加这些后，大部分字段都包含在内，但不是服务方法的返回类型是列表。

所以我的问题是，必须存在哪些方法才能将字段包含在服务的 xsd 架构中？更具体地说，必须存在哪些方法才能包含集合？

在服务类中：

```
public Organization getOrganization(final Integer id) {
    return something.getOrganization(id);
} 
```

在组织中：

```
public class Organization {
    private Integer id;
    private List<String> phoneNumbers;
    private String name;

    public Organization(final String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }

    //No setter for name, so the field is not included in the wsdl..

    public Integer getId() {
        return id;
    }

    public void setId(final Integer id) {
        this.id = id;
    }

    //Id has both setter and getter, so it is included..

    public List<String> getPhoneNumbers() {
        return phoneNumbers;
    }

    public void setPhoneNumbers(final List<String> phoneNumbers) {
        this.phoneNumbers = phoneNumbers;
    }

    //phoneNumbers has both getter and setter, but still is not included. 
    //I guess it is because it is a list. 
```

# javascript - 无法在 jquery 中获取所有菜单 > li

> ID：12676271
> 
> 赞同：0
> 
> 时间：2012-10-01T15:26:22.517
> 
> 标签：javascript, jquery

大家好，我在 1 页上有一些导航，如下所示：

```
<div class="menu">
 <ul>
  <li>link here</li>
 <li>Link Here</li>
</div> 
```

我在一页上有 2 或 3 个。

我很难让它们进入 jquery 中的选择和选项框。

如果我在一个页面上只有 1 个，它可以 100% 工作，但是因为我在一个页面上有 2 个或 3 个，有时它只会将第一个菜单输入到所有下拉选择框中。

这是jQuery：

```
jQuery("<select />").appendTo(".menu");
    jQuery("<option />", {"selected": "selected","value"   : "","text" : "Navigation Menu"}).appendTo(".menu select");
    jQuery(".menu ul li a").each(function() {

        var el = jQuery(this);
        jQuery("<option />", {"value"   : el.attr("href"),"text"    : el.text()}).appendTo(".menu select");
    });

    jQuery(".menu select").change(function() {

        window.location = jQuery(this).find("option:selected").val();
    }); 
```

我知道它看起来像这样，但它只是抛出错误。

```
jQuery("<select />").appendTo(".menu");
    jQuery("<option />", {"selected": "selected","value"   : "","text" : "Navigation Menu"}).appendTo(".menu select");

    var showlis = 'ul li a';
    jQuery(this + showlis).each(function() {

        var el = jQuery(this);
        jQuery("<option />", {"value"   : el.attr("href"),"text"    : el.text()}).appendTo(".menu select");
    });

    jQuery(".menu select").change(function() {

        window.location = jQuery(this).find("option:selected").val();
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T15:35:34.383

您需要单独引用每个`.menu`项目，而不是单独通过类来引用它。

下面的代码的作用是：

> 对于`.menu`您的 DOM（页面）中的每个
> 
> 1.  创建并附加 a`<select>`到它上面
> 2.  添加默认`<option>`元素
> 3.  循环遍历`<li>`s 和对应`<option>`的内部`<select>`

**演示：http:** [//jsfiddle.net/5dm37/](http://jsfiddle.net/5dm37/)

**代码：**

```
$('.menu').each(function() {
    var menu = $(this);
    var sel = $("<select />").appendTo(menu);
    $("<option />", {
        "selected": "selected",
        "value": "",
        "text": "Navigation Menu"
    }).appendTo(sel);
    menu.find('li').each(function() {
        $("<option />", {
            "value": $(this).attr("href"),
            "text": $(this).text()
        }).appendTo(sel);
    });
    sel.change(function() {
        alert($(this).val());    
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:36:58.767

我注意到几点：

1.  不确定这是否只是复制粘贴错误，但在您的导航菜单中，您没有结束`<ul>`标记。这是无效的 HTML。
2.  **这很可能是你的问题。**您正在将新`<select />`标签附加到使用 jQuery 选择器找到的元素上`.menu`。该选择器将所有元素与`menu`该类匹配。它不知道您尝试将其附加到菜单类的*哪个元素，因此它**可能*只是每次都将其附加到第一个元素。您需要缩小选择器的范围。做到这一点的最好方法可能是给每个导航`<div>`一个`id`属性并将其用作您的选择器。
3.  我很困惑你为什么要这样做。您已经有了导航列表，为什么还要在其中放置下拉列表？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T15:31:28.807

克隆移动元素之外的所有 jQuery 操作函数。

[http://api.jquery.com/category/Manipulation/?rdfrom=http%3A%2F%2Fdocs.jquery.com%2Fmw%2Findex.php%3Ftitle%3DManipulation%26redirect%3Dno](http://api.jquery.com/category/Manipulation/?rdfrom=http%3A%2F%2Fdocs.jquery.com%2Fmw%2Findex.php%3Ftitle%3DManipulation%26redirect%3Dno)

这意味着您需要为每个菜单类 div 创建一个新元素。创建一个元素会将其附加到第一个菜单类 div。

前任：

```
$(".menu").each( function(index, element) {
    //Create select and options here
    $(element).append(SELECT);
}); 
```

# objective-c - NSFileManager setUbiquitous:YES 把我的文件推到了边缘！为什么？

> ID：12676278
> 
> 赞同：2
> 
> 时间：2012-10-01T15:26:55.097
> 
> 标签：objective-c, ios, ipad, icloud, nsfilemanager

我有一个非常奇怪的问题。当我使用 NSFileManager setUbiquitous 函数时，我的文件被推送到 iCloud，但是当我在一秒钟后检查该文件是否存在时，该文件不再存在！看起来 iCloud 刚刚删除了我的文件，有可能吗，为什么？以前有人遇到过这个问题吗？

```
static void moveItem( CD_ICloudOperationItem *item, bool toCloud,  NSURL *srcDocumentURL, NSURL *srcThumbnailURL, NSURL *dstDocumentURL, NSURL *dstThumbnailURL)
{
  dispatch_queue_t mainQueue = dispatch_get_main_queue();
  dispatch_queue_t operationQueue = dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_DEFAULT, 0 );

  dispatch_async(operationQueue, ^(void) {    
    __block NSError *err1 = nil;
    NSFileManager * fm = [ NSFileManager defaultManager];
    __block bool success1 = true;
    NSString *message = nil;

    success1 = [fm setUbiquitous:toCloud itemAtURL:srcDocumentURL destinationURL:dstDocumentURL error:&err1];

    bool fileExits = false;
    if (toCloud) {
      fileExits = [fm isUbiquitousItemAtURL:dstDocumentURL];
      if (!fileExits) {
        NSLog(@"---> File has NOT been moved correctly!!!! [%@]", dstDocumentURL);
        NSLog(@"%@",[err1 description]);
      }
      else{
        NSLog(@"---> File has been moved correctly!!!! [%@]", dstDocumentURL);
      }
      sleep(1);
      fileExits = [fm isUbiquitousItemAtURL:dstDocumentURL];
      if (!fileExits) {
        NSLog(@"---> After 1 sec file has disappear!!!! [%@]", dstDocumentURL);
        NSLog(@"%@",[err1 description]);
      }
      else{
        NSLog(@"---> After 1 sec file still there!!!! [%@]", dstDocumentURL);
      }
    }
    else{
      fileExits = [fm fileExistsAtPath:[dstDocumentURL path]];
      if (!fileExits) {
        NSLog(@"---> File has NOT been moved correctly!!!! [%@]", dstDocumentURL);
        NSLog(@"%@",[err1 description]);
      }
      else{
        NSLog(@"---> File has been moved correctly!!!! [%@]", dstDocumentURL);
      }
    }

    if( !success1 )
    {
      success = false;
      message = meaningfulMessageFromError( err1 );
      NSLog(@"%@",[err1 description]);
    }

    dispatch_async( mainQueue, ^(void) {
      postNotification( item, success, message );
    });
  });
} 
```

查看我的痕迹：

```
 ---> File has been moved correctly!!!! [file://localhost/private/var/mobile/Library/Mobile%20Documents/U5LPYJSPQ3~com~my~container-imobile/Documents/Untitled_(2).fbdi]
---> After 1 sec file has disappear!!!! [file://localhost/private/var/mobile/Library/Mobile%20Documents/U5LPYJSPQ3~com~my~container-imobile/Documents/Untitled_(2).fbdi] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:28:32.437

> **讨论**
> 
> 使用此方法将文件从其当前位置移动到 iCloud。对于位于应用程序沙箱中的文件，这涉及从沙箱容器中物理删除文件。（系统扩展了您的应用程序的沙盒权限，使其能够访问它移动到 iCloud 的文件。）您还可以使用此方法将文件移出 iCloud 并返回到本地目录。

文件从 srcDocumentURL（沙箱）物理移动到 dstDocumentURL。尝试这个：

```
NSLog(@"[%@]", [ [ NSFileManager defaultManager ] contentsOfDirectoryAtURL:destinationURL includingPropertiesForKeys:nil options:nil error:nil ]); 
```

# python - 如何让 PostgreSQL/psycopg2 工作，Windows XP，ValueError: [u'path']

> ID：12676287
> 
> 赞同：0
> 
> 时间：2012-10-01T15:27:16.470
> 
> 标签：python, postgresql, windows-xp, psycopg2

在过去的几个月里，我一直在使用 SQLite 作为我的数据库，同时学习 django 和建立一个网站。随着我越来越接近生产，我终于决定是时候切换到 PostgreSQL 了。我被困了好几天，一个接一个地追查错误，基本上查看了所有其他帖子并试图让它工作，但我仍然没有任何运气。最近，我尝试关注[http://web.archive.org/web/20101221084639/http://nukeit.org/compile-python-2-7-packages-with-visual-studio-2010-express/](http://web.archive.org/web/20101221084639/http://nukeit.org/compile-python-2-7-packages-with-visual-studio-2010-express/)但我我仍然收到错误。运行 pip install psycopg2 时的最新回溯如下：

```
Downloading/unpacking psycopg2
    Running setup.py egg_info for package psycopg2

        no previously-included directories found matching 'doc\src\_build'
Installing collected packages: psycopg2
    Running setup.py install for psycopg2
    building 'psycopg2._psycopg' extension
        Traceback (most recent call last):
        File "<string>", line 1, in <module>
    File "C:\Documents and Settings\user\projects\xLFTV\lftv\build\psycopg2\setup.py", line 557, in <module>
        ext_modules=ext)
    File "C:\Python27\lib\distutils\core.py", line 152, in setup
        dist.run_commands()
    File "C:\Python27\lib\distutils\dist.py", line 953, in run_commands
        self.run_command(cmd)
    File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
        cmd_obj.run()
    File "C:\Python27\lib\site-packages\distribute-0.6.27-py2.7.egg\setuptools\command\install.py", line 53, in run
        return _install.run(self)
    File "C:\Python27\lib\distutils\command\install.py", line 563, in run
        self.run_command('build')
    File "C:\Python27\lib\distutils\cmd.py", line 326, in run_command
        self.distribution.run_command(command)
    File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
        cmd_obj.run()
    File "C:\Python27\lib\distutils\command\build.py", line 127, in run
        self.run_command(cmd_name)
    File "C:\Python27\lib\distutils\cmd.py", line 326, in run_command
        self.distribution.run_command(command)
    File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
        cmd_obj.run()
    File "C:\Python27\lib\distutils\command\build_ext.py", line 339, in run
        self.build_extensions()
    File "C:\Python27\lib\distutils\command\build_ext.py", line 448, in build_extensions
        self.build_extension(ext)
    File "C:\Documents and Settings\user\projects\xLFTV\lftv\build\psycopg2\setup.py", line 275, in build_extension
        build_ext.build_extension(self, extension)
    File "C:\Python27\lib\distutils\command\build_ext.py", line 498, in build_extension
        depends=ext.depends)
    File "C:\Python27\lib\distutils\msvc9compiler.py", line 474, in compile
        self.initialize()
    File "C:\Python27\lib\distutils\msvc9compiler.py", line 384, in initialize
        vc_env = query_vcvarsall(VERSION, plat_spec)
    File "C:\Python27\lib\distutils\msvc9compiler.py", line 300, in query_vcvarsall
        raise ValueError(str(list(result.keys())))
ValueError: [u'path']
Complete output from command C:\Python27\python.exe -c "import setuptools;__file__='C:\\Documents and Settings\\user
\\projects\\xLFTV\\lftv\\build\\psycopg2\\setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__,
'exec'))" install --single-version-externally-managed --record c:\docume~1\user\locals~1\temp\pip-v_thso-record\install-
record.txt:
running install

running build

running build_py

running build_ext

building 'psycopg2._psycopg' extension

Traceback (most recent call last):

    File "<string>", line 1, in <module>

    File "C:\Documents and Settings\user\projects\xLFTV\lftv\build\psycopg2\setup.py", line 557, in <module>

        ext_modules=ext)

    File "C:\Python27\lib\distutils\core.py", line 152, in setup

        dist.run_commands()

    File "C:\Python27\lib\distutils\dist.py", line 953, in run_commands

        self.run_command(cmd)

    File "C:\Python27\lib\distutils\dist.py", line 972, in run_command

        cmd_obj.run()

    File "C:\Python27\lib\site-packages\distribute-0.6.27-py2.7.egg\setuptools\command\install.py", line 53, in run

        return _install.run(self)

    File "C:\Python27\lib\distutils\command\install.py", line 563, in run

        self.run_command('build')

    File "C:\Python27\lib\distutils\cmd.py", line 326, in run_command

        self.distribution.run_command(command)

    File "C:\Python27\lib\distutils\dist.py", line 972, in run_command

        cmd_obj.run()

    File "C:\Python27\lib\distutils\command\build.py", line 127, in run

        self.run_command(cmd_name)

    File "C:\Python27\lib\distutils\cmd.py", line 326, in run_command

        self.distribution.run_command(command)

    File "C:\Python27\lib\distutils\dist.py", line 972, in run_command

        cmd_obj.run()

    File "C:\Python27\lib\distutils\command\build_ext.py", line 339, in run

        self.build_extensions()

    File "C:\Python27\lib\distutils\command\build_ext.py", line 448, in build_extensions

        self.build_extension(ext)

    File "C:\Documents and Settings\user\projects\xLFTV\lftv\build\psycopg2\setup.py", line 275, in build_extension

        build_ext.build_extension(self, extension)

    File "C:\Python27\lib\distutils\command\build_ext.py", line 498, in build_extension

        depends=ext.depends)

    File "C:\Python27\lib\distutils\msvc9compiler.py", line 474, in compile

        self.initialize()

    File "C:\Python27\lib\distutils\msvc9compiler.py", line 384, in initialize

        vc_env = query_vcvarsall(VERSION, plat_spec)

    File "C:\Python27\lib\distutils\msvc9compiler.py", line 300, in query_vcvarsall

        raise ValueError(str(list(result.keys())))

  ValueError: [u'path'] 
```

对不起，如果它有点乱。在发布之前，我尝试尽可能多地清理它。我对编程很陌生，我完全不知道我应该尝试什么。任何建议将不胜感激。在我的过程中，我已经看到了 3 条其他错误消息，并且不得不进行其他几次下载以使其正常工作。我对任何解决方案持开放态度。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:54:00.863

我有一个和你类似的故事……我把头撞在墙上好几天试图让事情顺利进行。解决问题的最简单方法是查找/下载/安装预构建的包。[您可以在此处](http://www.lfd.uci.edu/~gohlke/pythonlibs/)找到它们的列表（包括 psycopg2）。-- 非常感谢 Christoph Gohlke 维护这些。

作为参考，您可以在[此处](https://stackoverflow.com/questions/9012086/heroku-tutorial-with-pip-virtualenv-psycopg2-django-on-windows-7)查看我在相关主题上的帖子。

Finally, let me offer a piece of free advice. If you really want to work in Python/Django, it's just easier to switch to Linux. Probably 90+% of all of the blog posts or "how to's" assume you are running some flavor of Linux. I started by downloading VirtualBox from Oracle and installing Ubuntu in it. That was good enough for a long time. But, I eventually switch to a dual boot set up and I RARELY ever going into windows any more. Hope this helps.

# java - 配置安全连接的不同方法

> ID：12676291
> 
> 赞同：0
> 
> 时间：2012-10-01T15:27:38.857
> 
> 标签：java, spring, struts, web.xml

我曾经在 web.xml 中配置安全连接（安全约束）

最近我发现

*   春天（过滤链代理）
*   支柱

还在其配置文件中提供安全连接。

使用这些文件而不是 web.xml 的优缺点是什么？

# vb.net - 连接到 Web 服务时显示计时器

> ID：12676298
> 
> 赞同：0
> 
> 时间：2012-10-01T15:28:09.543
> 
> 标签：vb.net, multithreading, web-services, timer, freeze

我继承了一个经常访问 Web 服务的 VB2010 应用程序。它工作得很好，只是偶尔与 Web 服务的连接会出现问题。现在，服务的 .Timeout 设置为 100000 或 100 秒。我想做的只是更新表单上的标签，以便用户知道他必须等待多长时间才能等待超时。像“连接（10s）”或类似的东西。无论如何，我尝试了几个计时器，但它们似乎都冻结了，因为其他一切似乎都在等待连接线程完成。有没有办法在服务尝试连接时更新我的​​标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:37:09.397

它被锁定的原因可能是因为这是一个 WinForm 项目，并且您正在从 UI 线程调用 Web 服务。只要UI线程忙，屏幕就会被锁定。要解决此问题，您只需在单独的线程中调用 Web 服务。实现这一点的最简单方法是使用`BackgroundWorker`组件。当您在表单设计器中时，您会在组件工具箱中看到它。

# spring - Spring 3.1 自动装配在自定义约束验证器中不起作用

> ID：12676299
> 
> 赞同：11
> 
> 时间：2012-10-01T15:28:12.453
> 
> 标签：spring, validation, customvalidator, hibernate-validator

我在自定义约束验证器中遇到 bean 自动装配问题。没有使用 Spring 的 LocalValidatorFactoryBean 给出约束验证器实例。JSR-303 提供程序是 hibernate-validator 4.2.0.Final。

Spring配置摘录：

```
<!-- JSR 303 validation -->
<bean id="validator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean" />
<bean class="org.springframework.validation.beanvalidation.MethodValidationPostProcessor"/> 
```

自定义约束验证器：

```
import javax.validation.ConstraintValidator;
import javax.validation.ConstraintValidatorContext;

import org.springframework.beans.factory.annotation.Autowired;

import com.model.Subject;
import com.services.SomeTypeService;

public class ReadOnlyValidator implements ConstraintValidator<ReadOnly, String> {

@Autowired
private SomeTypeService someTypeService;

@Override
public void initialize(ReadOnly constraintAnnotation) { }

@Override
public boolean isValid(String type, ConstraintValidatorContext context) {
    try {
         if (null != type) {
                        return !someTypeService.isReadonly(type);
                     }
    } catch (Exception e) {
        e.printStackTrace();
    }

    return false;
}
} 
```

注解：

```
import static java.lang.annotation.ElementType.*;
import static java.lang.annotation.RetentionPolicy.*;

import java.lang.annotation.Documented;
import java.lang.annotation.Retention;
import java.lang.annotation.Target;

import javax.validation.Constraint;
import javax.validation.Payload;

@Target( { METHOD, FIELD, ANNOTATION_TYPE, CONSTRUCTOR, PARAMETER } )
@Retention(RUNTIME)
@Constraint(validatedBy = ReadOnlyValidator.class)
@Documented
public @interface ReadOnly {
String message() default "{constraints.subjecttype.readonly}";
public abstract Class<?>[] groups() default {};
public abstract Class<? extends Payload>[] payload() default {};
} 
```

一些服务：

```
 @Validated
 public interface SomeService {
    ...
    public void updateType(@ReadOnly String type) throws SomeException;
    ...
 } 
```

SomeServiceImpl ：

```
 @Service
 public class SomeServiceImpl implements SomeService {
  ...
    public void updateType(String type) throws SomeException {
     // do something
    }
  ...
 } 
```

SomeTypeService 是另一个不依赖于 SomeService 的 @Service 注释 bean ...

问题是我得到了 NPE，因为自动装配不起作用；其他人正在管理自定义验证器实例，而不是 Spring ...

提前感谢任何类型的建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T08:25:32.487

发现了问题。MethodValidationPostProcessor 和 mvc:annotation-driven 声明必须使用相同的“验证器”bean 引用：

**服务上下文.xml**

```
<!-- JSR 303 validation -->
<bean id="validator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean"/>
<bean class="org.springframework.validation.beanvalidation.MethodValidationPostProcessor">
    <property name="validator" ref="validator"/>
</bean>
    ... 
```

**调度程序-servlet.xml**

```
...
<mvc:annotation-driven validator="validator" />
... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-25T14:57:42.450

Tito，请检查您是否可以将以下内容用于 Java 配置：

```
@Configuration
public class SampleConfig {
  ...

  @Bean
  public Validator validator() {
    return new LocalValidatorFactoryBean().getValidator();
  }

  @Bean
  public MethodValidationPostProcessor mvpp() {
    MethodValidationPostProcessor mvpp = new MethodValidationPostProcessor();
    mvpp.setValidator(validator());

    return mvpp;
  }

  ...
} 
```

要在不同的配置 bean 中重用验证器 bean，可以使用 @Import 注释。

# rdp - 远程桌面协议提供程序 API

> ID：12676300
> 
> 赞同：5
> 
> 时间：2012-10-01T15:28:13.587
> 
> 标签：rdp

我正在尝试实现“远程桌面协议提供程序 API”。我看到了这个[http://msdn.microsoft.com/en-us/library/windows/desktop/dd920052(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd920052(v=vs.85).aspx) 但是，该主题中的信息似乎不完整。我试图创建自己的提供者。我已经创建了带有类的进程内 COM 服务器，它实现了 IWrdsProtocolManager 接口，按照本主题所示注册了它，重新启动了远程桌面服务，但什么也没发生！然后，我尝试将 Rdp-Tcp 键的 LoadableProtocol_Object 值重写为我的 COM 类的 CLSID。什么也没发生！当我尝试使用 CoCreateInstance 手动创建我的 ProtocolManager 时，我按预期工作，但我怎样才能让终端服务做同样的事情？事件查看器中没有错误，没有消息框显示我做错了什么。如果可能，请发布有关创建和注册协议提供者的更多详细信息。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-04-29T16:05:31.590

您需要确保要加载协议对象的机器已加入域并启用了远程桌面服务（会话/许可）——您没有收到错误消息，但 termsrv 库阻止了自定义协议处理程序无法运行，因为它不是 RDS 主机。

# xmlhttprequest - 我正在尝试运行一个脚本，该脚本将自动从 Internet 网站下载 xml 格式文件

> ID：12676303
> 
> 赞同：0
> 
> 时间：2012-10-01T15:28:33.097
> 
> 标签：xmlhttprequest

**好的，这里有一些关于我正在尝试做的信息：**

下载产品提要 有两种方法可以下载您的提要。

单击提要列表右侧的 XML 或 CSV 图标。使用提要访问密钥以编程方式下载它 对于许多用户来说，每天手动下载提要然后手动更新您的库存是不切实际的。出于这个原因，我们为您提供了一种以编程方式下载 Feed 的方法。

以编程方式下载提要

编写一个可以从网络下载文件的脚本。开发人员或程序员应该能够对此提供帮助。请参阅示例实现。

复制您的提要访问密钥。提要访问密钥是一个 32 个字符的密钥，对每个提要都是唯一的。

注意：提要访问密钥应保密。可以在上表中提要名称旁边的表格中找到该键。

决定您喜欢哪种格式。目前我们有 2 种可用格式。

xml（在新窗口中打开） csv（在新窗口中打开）将您的脚本指向下面的 url（减去括号并用您自己的变量替换）。

[https://dropship.koleimports.com/download/](https://dropship.koleimports.com/download/) {FEED ACCESS KEY}/{FORMAT}

**我的操作系统有 windows vista home basic。我根本没有程序员经验，因此非常感谢您提供非常具体的信息。我确实知道如何调出命令提示符屏幕，但我想确保我输入的任何脚本都将执行需要执行的操作，以使我的产品提要每天自动更新。如果需要任何进一步的信息来帮助我，请告诉我。感谢任何回答的人！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:17:51.837

你可以试试这样的。只需更改第一行。

```
var feed_access_key = "??????";
var format = "csv";

//////////////////////////////////////////////////////////
// Create object
var objXMLHTTP = new ActiveXObject("MSXML2.XMLHTTP")

// Get the data
objXMLHTTP.open("GET", "https://dropship.koleimports.com/download/" + feed_access_key + "/" + format, false);
objXMLHTTP.send()

if (objXMLHTTP.Status == 200) {
    // Save to disk
    var fso = new ActiveXObject("Scripting.FileSystemObject");
    var path = fso.GetSpecialFolder(2) + "\\download." + format;
    fso.DeleteFile(path);
    var f = fso.OpenTextFile(path, 2, true)
    f.Write(objXMLHTTP.responseText);
    f.Close();
    var wsh = new ActiveXObject("WScript.Shell")  
    wsh.Run(path, 1, false);
} 
```

# c - 对用户定义的函数类型转换错误生成编译器警告

> ID：12676304
> 
> 赞同：0
> 
> 时间：2012-10-01T15:28:35.797
> 
> 标签：c, casting, compiler-warnings, msp430

我想知道，如果可能的话，如何根据函数的返回值的类型转换如何对应于传递的参数之一来生成编译器警告。在我的示例中，如果函数调用的类型转换为小于“Bytes”参数定义的任何值，我想生成编译器警告。这在使用 MSP430 的 IAR 的 C 程序中使用

例如：

```
(INT16U)GetINTU(VarPtr, 2); // This is ok
(INT16U)GetINTU(VarPtr, 4); // generates warning
(INT32U)GetINTU(VarPtr, 4); // This is ok
(INT32U)GetINTU(VarPtr, 8); // generates warning
(INT64U)GetINTU(VarPtr, 4); // This is ok 
```

这是上述功能：

```
INT64U GetINTU(INT8U* Address, INT8U Bytes)
{
INT64U Value = 0;
if(Bytes<=8)
    {
    do
        {
        Value += ((INT64U)(*Address++))<<(--Bytes<<3);  
        }while(Bytes);
    }
return Value;
} 
```

编辑：我也考虑过返回一个空指针，但这意味着我需要一个静态变量。我不想这样做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:34:41.023

对此有一个简单的答案：你不能。原因是您无法确定函数返回后返回值将被类型转换为什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T15:34:49.727

不，那是不可能的。编译器不够聪明，无法在编译时确定输出值。您可以做的一件事是提供具有不同返回类型的多个函数并在其中执行断言（这会在运行时发现问题）。当然，在嵌入式环境中，这种代码重复会很糟糕。

可能最好的解决方案是：

```
#define GetINT8U(addr, bytes) assert(bytes <= 1), (INT8U)GetINTU(addr, bytes)
#define GetINT16U(addr, bytes) assert(bytes <= 2), (INT16U)GetINTU(addr, bytes)
#define GetINT32U(addr, bytes) assert(bytes <= 4), (INT32U)GetINTU(addr, bytes)
#define GetINT64U(addr, bytes) assert(bytes <= 8), (INT64U)GetINTU(addr, bytes) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T15:34:57.490

您可以使用 #warning 和 #error 但其编译时间生成自定义警告或错误。所以你不能将它应用到运行时代码。

这里有更多解释。 [http://mobiledevelopertips.com/c/using-error-and-warning-compiler-directives.html](http://mobiledevelopertips.com/c/using-error-and-warning-compiler-directives.html)

# iphone - 需要保存 NSmutableArray 的 PathDrawingInfo 对象，以便在重新加载应用程序时使用

> ID：12676305
> 
> 赞同：0
> 
> 时间：2012-10-01T15:28:36.267
> 
> 标签：iphone, objective-c, ios

在我的应用程序中，我有一个包含 PathDrawingInfo 项的 NSmutableArray。我正在寻找一种方法来保存这个数组以供以后使用。当任何事件发生时，应用程序都会绘制 PathDrawingInfo 项，因此会不断地重新绘制路径。我需要保存这个路径数组，以便以后可以与应用程序一起使用。该数组还需要与标题一起保存，以便用户可以选择以前的图形来加载、修改和重新保存。

我一直在寻找方法来做到这一点，发现很多人保存他们的数组以供其他时间在应用程序中使用——他们通常将数组转换为属性列表。我还注意到这似乎只适用于 NSArray、NSDictionary、NSString、NSData、NSNumber 和 NSDate 类型。由于我的项目是 PathDrawingInfo 类型，我不确定另一种方法可以做到这一点。感谢您的帮助，因为我是目标 c 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:49:45.470

您需要使用存档器来保存数组：

```
[NSKeyedArchiver archiveRootObject:self.myMutableArray toFile:savePath]; 
```

当你想取回它时：

```
self.myMutableArray = [NSKeyedUnarchiver unarchiveObjectWithFile:savePath]; 
```

# c# - 修改输入的方法中对象的 C# 命名约定

> ID：12676306
> 
> 赞同：0
> 
> 时间：2012-10-01T15:28:39.520
> 
> 标签：c#, mapping

对于修改或稍微更改传递的参数对象的方法，可接受的命名约定是什么？特别是，像这样的方法：

```
class Mapper {
    public PersonDTO MapPerson(tPerson p) {
        var person = new PersonDTO {
            ID = p.ID,
            Name = p.Name,
            Country = Retriever.GetCountryName(p.CountryID)
        };

        return person;
    }
} 
```

由于“人”描述符适用于返回对象和参数，我不确定这里的最佳实践是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T15:35:08.943

```
class Mapper {

    public PersonDTO MapPerson(tPerson person) 
    {
        return new PersonDTO {
             ID = person.ID,
             Name = person.Name
        };
    }
} 
```

问题解决了？您的额外变量可以描述为[代码气味](http://en.wikipedia.org/wiki/Code_smell)。如果您需要附加变量，请调用它`result`或`retval`. 如果它不是返回值，则调用它`personDto`。

对于方法，请始终描述您的工作。在这种情况下，您映射一个人，所以`MapPerson`对我来说似乎很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T15:37:34.280

您可以将其编写为构造函数：

```
class PersonDTO
{
    public PersonDTO(tPerson person)
    {
        ID = person.ID;
        Name = person.Name;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T15:51:09.970

调用你的方法

> CompleteAndMapPerson

# c# - WPF Endpoint.Address 更改丢失 cookie

> ID：12676311
> 
> 赞同：1
> 
> 时间：2012-10-01T15:29:04.780
> 
> 标签：c#, wpf, session-cookies, asp.net-session, wcf-sessions

我有一个连接到肥皂网络服务的 wpf 应用程序，我需要它连接到该网络服务的任意数量的位置，因此我允许用户在文本框中输入 URL，并将其保存在 Properties.Settings . 然后我将 Endpoint.Address 设置为 url。除了一件事之外，这一切都有效，Web 服务使用 ASP.net 会话来验证应用程序是否已登录，因此将服务设置为允许 cookies = true。我在 Binding 下的 wpf 应用程序的 app.config 中设置了它，但由于某种原因，cookie 没有在任何地方进行管理。当我使用 Fiddler 时，我可以看到 cookie 在服务返回请求中的设置位置，但客户端没有跨 Web 服务方法保存/使用该 cookie。

```
AdminWebServiceClient adminclient = new AdminWebServiceClient();
adminclient.Endpoint.Address = new EndpointAddress(MyWPFApp.Properties.Settings.Default["CurrentURL"] as string); 
```

这确实正确设置了 URL，但同样，我在某处丢失了 cookie，因为请求没有跟踪它并将“ASP.NET_Sessionid”cookie 发送到服务以识别谁在发送此服务请求。任何人都对如何在设置和管理cookie时获取cookie有任何想法？谢谢！

# visual-studio-2005 - Windows 8 上的 FreeConsole 行为

> ID：12676312
> 
> 赞同：6
> 
> 时间：2012-10-01T15:29:07.070
> 
> 标签：visual-studio-2005, windows-8, msvcrt

在 Windows 8 上，我们遇到了 FreeConsole 的问题。它似乎关闭了 stdio 句柄，而不关闭文件流。

这可能是 Windows 8 的问题，也可能是我根本不理解 Windows 控制台/GUI 应用程序子系统做事的（完全荒谬的）方式。

这是怎么回事？

下面的最小示例。使用编译器测试：VS2005、VS2013、VS2017，使用静态链接 CRT。

```
#include <windows.h>
#include <io.h>
#include <stdio.h>

static void testHandle(FILE* file) {
  HANDLE h = (HANDLE)_get_osfhandle(fileno(file));
  DWORD flags;
  if (!GetHandleInformation(h, &flags)) {
    MessageBoxA(0, "Bogus handle!!", "TITLE", MB_OK);
  }
}

int main(int argc, char** argv)
{
  freopen("NUL", "wb", stdout); // Demonstrate the issue with NUL
  // Leave stderr as it is, to demonstrate the issue with handles
  // to the console device.

  FreeConsole();

  testHandle(stdout);
  testHandle(stderr);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-30T12:57:04.927

由于以前的 Windows 8 标准（未重定向）控制台句柄（由 GetStdHandle 返回）实际上是伪句柄，其值不与其他内核对象句柄相交，因此在被 FreeConsole“关闭”后写入该伪句柄总是失败。 . 在 Win8 MS 里面改变了一些东西，所以 GetStdHandle 返回正常的内核对象句柄，它引用控制台子系统驱动程序对象（实际上该驱动程序也只出现在 Win8 中）。所以 FreeConsole 关闭了那个句柄。最有趣的是 CRT 在启动时执行 GetStdHandle 并将返回值保存在内部某处，并在任何地方使用称为访问 std::in/out/err 的 C 函数。由于 FreeConsole 关闭了该句柄，并且它不再是特殊的伪句柄值 - 相同的句柄值可以被任何其他打开的内核对象句柄重用，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-15T13:47:51.607

在不同的 Windows 版本上拆解 FreeConsole 的代码后，我找出了问题的原因。

FreeConsole 是一个非常简单的功能！我确实为您关闭了大量句柄，即使它不“拥有”这些句柄（例如，stdio 函数拥有的句柄）。

而且，Windows 7 和 8 中的行为有所不同，并在 10 中再次更改。

这是提出修复程序时的困境：

*   一旦 stdio 有一个到控制台设备的句柄，没有记录的方法可以让它放弃该句柄，而无需调用 CloseHandle。你可以调用`close(1)`or`freopen(stdout)`或者你喜欢的任何东西，但是如果有一个打开的文件描述符指向控制台，如果你想在 FreeConsole 之后将 stdout 切换到新的 NUL 句柄，则会调用 CloseHandle。
*   另一方面，由于 Windows 10 也无法避免 FreeConsole 调用 CloseHandle。
*   Visual Studio 的调试器和应用程序验证程序将应用标记为在无效 HANDLE 上调用 CloseHandle。而且，他们是对的，这真的不好。
*   因此，如果您在调用 FreeConsole 之前尝试“修复”stdio，那么 FreeConsole 将执行无效的 CloseHandle（使用其缓存的句柄，并且无法告诉它句柄已消失 - FreeConsole 不再检查`GetStdHandle(STD_OUTPUT_HANDLE)`）。而且，如果您先调用 FreeConsole，则无法修复 stdio 对象而不导致它们对 CloseHandle 进行无效调用。

通过消除，我得出结论，唯一的解决方案是使用未记录的函数，如果公共函数不起作用。

```
// The undocumented bit!
extern "C" int __cdecl _free_osfhnd(int const fh);
static HANDLE closeFdButNotHandle(int fd) {
  HANDLE h = (HANDLE)_get_osfhandle(fd);
  _free_osfhnd(fd); // Prevent CloseHandle happening in close()
  close(fd);
  return h;
}

static bool valid(HANDLE h) {
  SetLastError(0);
  return GetFileType(h) != FILE_TYPE_UNKNOWN || GetLastError() == 0;
}

static void openNull(int fd, DWORD flags) {
  int newFd;
  // Yet another Microsoft bug! (I've reported four in this code...)
  // They have confirmed a bug in dup2 in Visual Studio 2013, fixed
  // in Visual Studio 2017\.  If dup2 is called with fd == newFd, the
  // CRT lock is corrupted, hence the check here before calling dup2.
  if (!_tsopen_s(&newFd, _T("NUL"), flags, _SH_DENYNO, 0) &&
      fd != newFd)
    dup2(newFd, fd);
  if (fd != newFd) close(newFd);
}

void doFreeConsole() {
  // stderr, stdin are similar - left to the reader.  You probably
  // also want to add code (as we have) to detect when the handle
  // is FILE_TYPE_DISK/FILE_TYPE_PIPE and leave the stdio FILE
  // alone if it's actually pointing to disk/pipe.
  HANDLE stdoutHandle = closeFdButNotHandle(fileno(stdout)); 

  FreeConsole(); // error checking left to the reader

  // If FreeConsole *didn't* close the handle then do so now.
  // Has a race condition, but all of this code does so hey.
  if (valid(stdoutHandle)) CloseHandle(stdoutHandle);

  openNull(stdoutRestore, _O_BINARY | _O_RDONLY);
} 
```

# facebook-c#-sdk - 这是一个潜在的问题吗？纯文本的 Facebook accessToken

> ID：12676313
> 
> 赞同：0
> 
> 时间：2012-10-01T15:29:11.893
> 
> 标签：facebook-c#-sdk

我正在使用 Facebook SDK 对用户进行身份验证，但由于 3rd 方 cookie 问题，我无法通过 Facebook 使用会话变量，即会话状态在 iFrame 中不起作用。

为了解决这个问题，我使用 POST 在页面之间重定向，在其中创建表单并发布我在服务器上使用的 accessToken 进行身份验证。

当我重定向时，我在 ViewModel 中有 accessToken 并将其写入 javascript，即执行 viewSource 将显示 accessToken。这是不正确的做法吗？

我是否应该通过 FB.getLoginStatus / FB.Event.subscribe('auth.authResponseChange', function (response) [I currentle use a combination of both] 获取新的 accessToken 并将其发布到视图（然后我重新验证服务器边）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:03:13.057

纯文本中的访问令牌对我来说听起来像是一个很大的风险。特别是如果您使用的是 JS SDK，因为有人可以从您的 javascript 源中获取您的 APPID，以及他们开始执行图形操作所需的访问令牌。

我很确定，如果您每次使用 FB JS SDK（如您最后建议的那样）重新验证用户身份，那么无论如何您都会获得相同的访问令牌，因此无需传递它。自己测试一下，我敢打赌你会看到相同的访问令牌。

你可能想看看 Facebook 自己是如何处理这个问题的。[github 上](https://github.com/facebook/facebook-php-sdk)的Facebook PHP SDK支持客户端（JS SDK）和服务器之间的身份验证。我相信他们正在使用 cookie 和 PHP 安全会话的组合来传递访问令牌，但是您必须自己仔细查看源代码才能弄清楚他们是如何做到的。

# android - 在语音邮件之前停止通话

> ID：12676314
> 
> 赞同：1
> 
> 时间：2012-10-01T15:29:18.410
> 
> 标签：android

是否可以在 Android 中提供一项服务，当语音邮件快要到达时停止电话呼叫，从而不向用户收取移动网络上的连接费用？

我想让服务识别语音邮件，但我怎样才能让应用程序知道正常呼叫和语音邮件呼叫之间的区别？

感谢您的回答

# asp.net - Web.Config，从构建用户的环境中添加信息

> ID：12676319
> 
> 赞同：0
> 
> 时间：2012-10-01T15:29:52.910
> 
> 标签：asp.net, build, web-config

假设我有几个开发人员正在开发的 .NET Web 应用程序。此应用程序在与它交互时会发送电子邮件。我希望将电子邮件发送给部署应用程序的人。所以在网络配置中我们有：

```
 <appSettings>
    <add key="SendEmailsTo" value="@EnvironmentUserEmail"/>
  </appSettings> 
```

当他们构建和部署应用程序时，我希望将其替换为 Windows 的用户电子邮件地址，因此如果 John Smith 部署应用程序，web.config 将包含该地址。

```
 <appSettings>
    <add key="SendEmailsTo" value="jsmith@email.com"/>
  </appSettings> 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:43:28.993

检查[这](http://msdn.microsoft.com/en-us/library/dd465326.aspx)是否有助于解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:38:20.887

在构建发布时，使用预构建事件并调用可执行文件（或某些 powershell 脚本）来修改配置。

# mysql - MySql IF 存在选择 ELSE 插入

> ID：12676322
> 
> 赞同：4
> 
> 时间：2012-10-01T15:30:18.390
> 
> 标签：mysql, sql, stored-procedures

我已经为此痛苦了两个小时。我想选择或插入一条记录。如果记录存在，则选择他的 ID，否则插入它并获取新插入的 ID。现在我正在尝试运行它，但仍然出现错误

```
SELECT CASE WHEN (SELECT COUNT(*) FROM Domains WHERE Domain = @domain)>0 
THEN 
    (SELECT Domain_ID FROM Domains WHERE Domain = @domain) 
ELSE        
    INSERT INTO Domains(Domain_ID,Domain,Disabled,Description) VALUES(@Domain_ID,@Domain,@Disabled,@Description); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T15:33:40.507

您的案例缺少 End

```
Case when (something) then (Some)
else (another thing) end 
```

无论如何，你的 else 必须返回一个选择，一个插入不会返回任何东西。如果要插入（如果不存在）然后返回插入的值（或返回如果存在），请执行以下操作：

```
INSERT INTO Domains(Domain_ID,Domain,Disabled,Description) VALUES(@Domain_ID,@Domain,@Disabled,@Description) where not exists (select 1 from Domains WHERE Domain = @domain);

SELECT Domain_ID FROM Domains WHERE Domain = @domain 
```

如果不存在，这将插入，然后返回。如果已经存在，则不插入，并返回值

**编辑 2016 年 1 月**

最后一个查询不起作用`MySql`，它是一种`MSSQL`语法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-18T15:08:58.597

在不涉及对性能和缓存的影响的情况下，如果 Domain_ID 是一个`auto_increment`字段，实现您想要的特定结果的简单方法是使用语句的`ON DUPLICATE KEY`子句`INSERT`：

```
INSERT INTO Domains
    (fld1, fld2, fld3)
    VALUES(....)
ON DUPLICATE KEY UPDATE id=LAST_INSERT_ID(id); 
```

请参阅`ON DUPLICATE KEY UPDATE` [MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)的结尾部分。

# python - Minidom：获取选定节点的所有属性？

> ID：12676328
> 
> 赞同：3
> 
> 时间：2012-10-01T15:30:41.597
> 
> 标签：python, python-2.7, xmlnode, minidom

我递归地遍历 a 中的所有节点`XML`：

```
def verify_elements_children(root):
    if root.childNodes:
        for node in root.childNodes:
            if node.nodeType == node.ELEMENT_NODE:
               if node.tagName in config_elements_children[node.parentNode.tagName]:
#                  print node.toxml()
                   verify_elements_children(node) 
```

但我不知道如何获取选定的所有属性名称 selected `node`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T15:41:55.837

您可以简单地访问该[`attributes`](http://docs.python.org/library/xml.dom.html#xml.dom.Node.attributes)属性，它是一个 NamedNodeMap，您可以调用它`items`来获取字符串键和值：

```
import xml.dom.minidom
n = xml.dom.minidom.parseString('<n a="1" b="2" />').documentElement
attrs = dict(n.attributes.items())
assert attrs == {'a': '1', 'b': '2'} 
```

# php - SVG + PHP + Javascript

> ID：12676329
> 
> 赞同：4
> 
> 时间：2012-10-01T15:30:41.720
> 
> 标签：php, javascript, svg

我正在尝试创建一个 PHP 生成的 SVG，但我已经坚持显示一个带有 Javascript 的 SVG 文件。javascript是一个平移和缩放功能。

代码是：

```
<? 
header("Content-Type: image/svg+xml");
?>

    <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">
    <script xlink:href="SVGPan.js"/>
    <g id="viewport" transform="translate(200,200)">
    <polygon points="50,125 100,100 150,125 100,150" fill="green" stroke="black" stroke-width="1" />
    </g>
    </svg> 
```

在 Internet Explorer 中打开它时，我可以平移，但无法缩放。

在谷歌浏览器中打开它时，我的脚本运行正确，它显示，我可以缩放和平移，但我收到一条错误消息

> 第 10 行第 1 列的错误：文档末尾的额外内容

我在谷歌上搜索它和stackoverflow，但我找不到解决方案。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:24:11.447

我看到您正在添加分析代码，这导致文件末尾有额外的输出。通常，即使免费主机在使用正确的 MIME 类型提供服务时也不会将其放在文件中。您可能需要询问他们的支持如何让 image/svg+xml mime 类型像 text/javascript mime 类型一样提供服务（即不添加分析代码）。我从未使用过它们，但 cPanel 和其他流行的管理系统允许您出于许多其他原因管理 MIME 类型，包括这个。

# wpf - WPF ComboBox 不使用箭头键滚动

> ID：12676331
> 
> 赞同：1
> 
> 时间：2012-10-01T15:30:50.247
> 
> 标签：wpf, xaml, scroll, combobox, arrow-keys

我有一个`ComboBox`表现得很奇怪的人。它将使用鼠标滚轮滚动列表，并使用`PgUp`/`PgDown`和`Home`/向上/向下跳跃`End`，但箭头键不执行任何操作。

```
<ComboBox Name="cboBox"
          SelectionChanged="cboBox_SelectionChanged"
          Margin="5"
          VerticalAlignment="Stretch"
          HorizontalAlignment="Stretch" 
```

其他组合框在同一程序的其他部分中工作正常（尽管在不同的窗口中）。什么可能导致箭头键不滚动？我能想到的唯一一件事是按键正在被其他地方捕获和处理，但是会导致什么？

# boilerplatejs - 延迟加载样板模块

> ID：12676333
> 
> 赞同：4
> 
> 时间：2012-10-01T15:31:04.887
> 
> 标签：boilerplatejs

在boilerplatejs中，看起来模块是预加载的

**（参考下面的代码）**

```
return [
            require('./baseModule/module'),
            require('./sampleModule2/module'),
            require('./customerModule/module'),
            require('./orderSearchModule/module'),
            require('./orderListModule/module'),
            require('./mainMenuModule/module')
        ]; 
```

当涉及到大型 Web 应用程序（模块重的 Web 应用程序）时，对此有何影响。有没有办法在boilerplatejs中延迟加载模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:55:59.427

Java 脚本没有反射类型的机制来加载东西。任何需要加载的模块都必须在某处注册。这就是模块（子上下文）加载如下的原因：

```
appContext.loadChildContexts(moduleContexts); 
```

（在 src/application.js 中）

但是您上面的代码是关于 requirejs AMD 模块的。这基本上是不同 JS 脚本的导入（每个代表模块的代码）。使用 requireJS AMD，脚本（您的源代码）不是延迟加载的，而是预加载的。这是有道理的，因为您的应用程序源代码应该可以在浏览器中执行。另一方面，当您进行 JS 优化时，我们无论如何都会创建一个包含所有源代码的脚本。那么拥有单独的脚本文件或延迟加载源代码就没有任何意义了。

但是延迟加载应该应用于行为（而不是加载代码）。这就是 UI 组件 (ViewTemplate) 仅在 'activate()' 方法中创建的原因。这些仅在用户需要时创建。这是一种延迟加载行为，因此应用程序渲染时间更短。

```
 this.activate = function(parent, params) {
        // if panel is not created, lets create it and initiate bindings
        if (!panel) {
            panel = new Boiler.ViewTemplate(parent, template, nls);
            ...
        }
        vm.initialize(params.name);
        panel.show();
    } 
```

# java - JBoss AS 7 上的 JAAS 身份验证失败

> ID：12676336
> 
> 赞同：1
> 
> 时间：2012-10-01T15:31:19.530
> 
> 标签：java, jboss, jaas

我们已将应用程序从 Glassfish 移植到 JBOSS AS 7。我们使用 JDBCRealm 和基于 JAAS 表单的身份验证。问题是 AS 7 在提交表单时使用 ISO-8955-1 编码。我们的所有其他表单都遇到了这个问题，但我们通过将 servlet 过滤器转换为 UTF-8 解决了这个问题，这个解决方案是推荐的解决方法[https://bugzilla.redhat.com/show_bug.cgi?id=832235](https://bugzilla.redhat.com/show_bug.cgi?id=832235)。

在基于表单的身份验证期间，我们不能在两者之间放置过滤器，因此身份验证失败。任何已知的解决方法？

使用的用户名：user%&;/()=?`\*^ÄÅÖ_:;: -+}][{€$£@8ks6fje739ajf6 但您可以看到它包含不正确的字符。

```
17:16:59,601 DEBUG [org.apache.tomcat.util.http.Cookies] (http--127.0.0.1-9443-5) Cookies: Parsing b[]: JSESSIONID=FbiZG09BOiprQfUMTmdirSrq.undefined
17:16:59,603 DEBUG [org.apache.catalina.authenticator.AuthenticatorBase] (http--127.0.0.1-9443-5) Security checking request POST /j_security_check
17:16:59,604 DEBUG [org.apache.tomcat.util.http.Parameters] (http--127.0.0.1-9443-5) Set encoding to ISO-8859-1
17:16:59,604 DEBUG [org.apache.tomcat.util.http.Parameters] (http--127.0.0.1-9443-5) Set query string encoding to ISO-8859-1
17:16:59,604 DEBUG [org.apache.tomcat.util.http.Parameters] (http--127.0.0.1-9443-5) Start processing with input [j_username=user%25%26%2F%28%29%3D%3F%60%5C%5C*%5E%C3%84%C3%85%C3%96_%3A%3B%3A+-%2B%5C%7D%5D%5B%7B%E2%82%AC%24%C2%A3%408ks6fje739ajf6&j_password=admin]
17:16:59,605 DEBUG [org.apache.catalina.authenticator.FormAuthenticator] (http--127.0.0.1-9443-5) Authenticating username 'user%&/()=?`\\*^Ã?Ã?Ã?_:;: -+\}][{â?¬$Â£@8ks6fje739ajf6' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T13:02:24.307

最后....解决方法是在Tomcat中配置org.apache.catalina.authenticator.FormAuthenticator使用UTF-8。经过一番苦苦寻找如何在 AS 7.1.1 中配置它后，我发现您在 jboss-web.xml 中像这样配置它

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-web>
    <security-domain>MySecurityDomain</security-domain>
    <valve>
        <class-name>org.apache.catalina.authenticator.FormAuthenticator</class-name>
        <param>
            <param-name>characterEncoding</param-name>
            <param-value>UTF-8</param-value>
        </param>
    </valve>
</jboss-web> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:01:48.660

请按照此分步指南进行操作，并告诉我们它是否对您有用。 [http://amatya.net/blog/implementing-security-with-jaas-in-jboss-as-7/](http://amatya.net/blog/implementing-security-with-jaas-in-jboss-as-7/)

# javascript - 如何获取函数的字符串名称以便在 JavaScript 中调用它？

> ID：12676338
> 
> 赞同：1
> 
> 时间：2012-10-01T15:31:34.417
> 
> 标签：javascript, struts2

我有这个jsp：

```
<div id="searchGrid">
    <table id="list" class="scroll"></table>
    <div id="pager" class="scroll" style="text-align:center;"></div>
</div>
<s:hidden id="hdnFonction" value="<s:property value='fonction'/>" />
<h1><s:property value='fonction'/></h1>

<script type="text/javascript">
    $(document).ready(function(){
        var fn = window[$("#hdnFonction").val()];

        alert($("#hdnFonction").val());

        fn();
    });
</script> 
```

所以在 h1 标签之间我有正确的值（函数的字符串名称）

但是在警告框中我有struts2'property'标签，就像在文档准备好后解释struts标签......这会很奇怪吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:38:22.577

您不能像这样将 Struts2 标记嵌套在另一个标记中，因此该`<s:property>`标记被解析为文本，而不是 Struts2 标记。

您必须将 的值存储`<s:property value="fonction"/>`到脚本变量中，然后将其用作`<s:hidden>`标签中的值。

# windows-phone-7 - 从本地文件 WP7 读取

> ID：12676339
> 
> 赞同：1
> 
> 时间：2012-10-01T15:31:35.653
> 
> 标签：windows-phone-7

我正在尝试读取包含在项目文件夹本身中的单独文件夹中的文本文件。我正在尝试读取此文本文件，然后将每一行添加到列表中，每一行作为列表中的一个单独项目，然后我希望将其绑定到列表框，并且每个列表框项目（以前的每一行）将是一个超链接在列表框中。这是非常令人沮丧的，因为一旦代码在运行时开始执行，应用程序每次都会冻结。可能是什么问题呢？

我试着在这里搜索了很多。我尝试了几个类似问题的解决方案，但没有用。

代码：

```
public partial class Page2 : PhoneApplicationPage
   {
       public Page2()
       {
           InitializeComponent();

           // Will contain the names of malls added through a text file

           List<string> Mall_List = new List<string>();

           using(StreamReader reader = new StreamReader("/Mall_List/Mall_List.txt"))
           {
                   while(reader.Peek() >= 0)
                   {
                       Mall_List.Add(reader.ReadLine());
                   }

                   reader.Close();
           }

               Malllist.ItemsSource = Mall_List;
        }

   } 
```

XAML：

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <ListBox Height="426" HorizontalAlignment="Left" Margin="6,6,0,0" Name="Malllist" VerticalAlignment="Top" Width="444">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <HyperlinkButton Name="MallNameLinkButton"
                                         Content="{Binding}"/>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Grid>
    </Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:11:13.667

而不是仅仅从“本地文件”中读取，

```
 using(StreamReader reader = new StreamReader("/Mall_List/Mall_List.txt")) 
```

你应该知道 WP7 对每个应用程序都有独立存储。请通过阅读以下文章确保您熟悉它：

[http://www.windowsphonegeek.com/tips/all-about-wp7-isolated-storage--intro-to-isolated-storage](http://www.windowsphonegeek.com/tips/all-about-wp7-isolated-storage--intro-to-isolated-storage)

更准确地说，读取文件在以下文章中进行了描述：

[http://www.windowsphonegeek.com/tips/all-about-wp7-isolated-storage-read-and-save-text-files](http://www.windowsphonegeek.com/tips/all-about-wp7-isolated-storage-read-and-save-text-files)

# php - 从字符串中提取数字

> ID：12676340
> 
> 赞同：-1
> 
> 时间：2012-10-01T15:31:37.603
> 
> 标签：php, regex

> **可能重复：**
> [从字符串中提取数字](https://stackoverflow.com/questions/6278296/extract-numbers-from-a-string)

我`preg_match()`用来从字符串中提取数字。
示例字符串是：`advent_id ----------- 3163 (1 row)`，我需要提取后跟连字符的数字，而不是行数。为它编写正则表达式的正确方法是什么？
我尝试`preg_match('/^advent_id\s------------\s(.*)\s\(/', $cn, $matches);`了`$cn`该源字符串的位置，但它不起作用。请注意，该号码可以有任意位数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:41:28.963

只需提取行中的第一个整数。

```
$x = 'advent_id ----------- 3163 (1 row)';
preg_match('/\d+/', $x, $m);
echo "$m[0]\n"; 
```

产生：

```
3163 
```

**编辑**

如您所见， 的默认行为`preg_match()`是匹配第一次出现，然后停止。不同的是`preg_match_all()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:37:39.797

### 代码：

```
$s = 'advent_id ----------- 3163 (1 row)';
preg_match('~-+ (\d+)~', $s, $m);
print_r($m); 
```

### 将输出：

```
Array
(
    [0] => ----------- 3163
    [1] => 3163
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T15:37:41.367

你很亲密。您的主要问题是您`.*`正在匹配任何字符，因此您必须使正则表达式变得复杂，以确保它只是抓取数字。通过将该部分更改为`[0-9]*`它只会匹配数字，并使您的正则表达式更简单。

```
$cn = 'advent_id ----------- 3163 (1 row)';
preg_match('/^advent_id -* ([0-9]*)/', $cn, $matches);
print_r($matches[1]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T15:38:27.067

你可以试试

```
$string = "advent_id ----------- 3163 (1 row)" ;
$matches = array();
preg_match('/\d+/', $string, $matches);
print($matches[0]); 
```

输出

```
 3163 
```

# ios - MPMoviePlayerController 不会消失

> ID：12676348
> 
> 赞同：0
> 
> 时间：2012-10-01T15:32:07.657
> 
> 标签：ios, mpmovieplayercontroller, xcode4.5

我整天都在尝试，但由于某种原因，我在 IOS6 上遇到了 MPMoviePlayerController 的很多问题，似乎人们遇到了问题，但与我的不够相似：

当电影完成时，电影加载并播放正常。我可以循环播放电影。当我尝试像这样关闭并删除电影时出现问题：

如果我将控件添加到电影本身并点击“完成”按钮，电影就会暂停并且永远不会关闭！

任何提示/想法？

```
_moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];

[[NSNotificationCenter defaultCenter] addObserver:self  
                                         selector:@selector(moviePlaybackComplete:)  
                                             name:MPMoviePlayerPlaybackDidFinishNotification  
                                           object:_moviePlayerController];  

[[NSNotificationCenter defaultCenter] addObserver:self  
                                         selector:@selector(moviePlaybackLoaded:)  
                                             name:MPMoviePlayerLoadStateDidChangeNotification  
                                           object:_moviePlayerController];

[[NSNotificationCenter defaultCenter] addObserver:self  
                                         selector:@selector(moviePlaybackComplete:)  
                                             name:kMovieOverlayViewTapped
                                           object:nil];

[self.view addSubview:_moviePlayerController.view];  
_moviePlayerController.fullscreen = YES; 
```

-

现在在播放加载：

```
- (void)moviePlaybackLoaded:(NSNotification *)notification  
{   
    [[NSNotificationCenter defaultCenter] removeObserver:self  
                                                    name:MPMoviePlayerLoadStateDidChangeNotification  
                                                  object:_moviePlayerController]; 

_moviePlayerController.movieSourceType = MPMovieSourceTypeFile;
_moviePlayerController.controlStyle = MPMovieControlStyleDefault;
[_moviePlayerController prepareToPlay];
[_moviePlayerController.view setFrame:CGRectMake(38, 100, 250, 163)];
[_moviePlayerController play]; 
```

}

现在删除视频：

```
 - (void)moviePlaybackComplete:(NSNotification *)notification  
{
    [[NSNotificationCenter defaultCenter] removeObserver:self  
                                                        name:MPMoviePlayerPlaybackDidFinishNotification  
                                                      object:_moviePlayerController];  

    [[NSNotificationCenter defaultCenter] removeObserver:self  
                                                    name:MPMoviePlayerDidExitFullscreenNotification  
                                                  object:_moviePlayerController]; 

[[NSNotificationCenter defaultCenter] removeObserver:self  
                                                    name:kMovieOverlayViewTapped
                                                  object:nil]; 

[_moviePlayerController stop];
[_moviePlayerController.view removeFromSuperview];       
    _moviePlayerController = nil; 
```

# gnuplot - gnuplot - 在直方图中选择 bin 中心

> ID：12676350
> 
> 赞同：1
> 
> 时间：2012-10-01T15:32:12.877
> 
> 标签：gnuplot, histogram

我正在使用以下命令绘制直方图：

```
n=3
max=0.5
min=-2.5
width=(max-min)/n
hist(x,width)=width*floor(x/width)+width/2.0
plot "< awk '{if (\$1<3.9 && \$1>3.8) {print \$0}}' /path_to_file/" u (hist(\$2,width)):(1.0) smooth freq w boxes lc rgb "black" lt 1 lw 0.5 notitle 
```

这让我明白了：

![直方图](../Images/7fee7cf58611fbfee4a652631a13e926.png)

显然，我根据数据文件猜测，`gnuplot`它自己决定选择区间 [1.0:0.0]-[0.0:-1.0]-[-1.0:-2.0] ，这使得 bin 以 [0.5:- 为中心0.5：-1.5]

我需要这些垃圾箱使用间隔 [0.5:-0.5]-[-0.5:-1.5]-[-1.5:-2.5] 这将使垃圾箱居中 [0.0:-1.0:-2.0]

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-24T03:08:23.230

我认为你想要的[分箱](/questions/tagged/binning "显示标记为“分箱”的问题")功能是

```
hist(x,width)     = width*(floor(x/width+0.5)) 
```

这是早期答案的等效但简化版本[https://stackoverflow.com/a/13896530/834416](https://stackoverflow.com/a/13896530/834416)

```
hist(x,width)     = width*floor((x + width/2)/width) 
```

[我遇到了同样的问题，并在https://stackoverflow.com/a/24923363/834416](https://stackoverflow.com/a/24923363/834416)上发布了答案、示例代码和输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T21:47:25.883

直方图中的间隔由函数确定`hist`。`hist`函数将一系列数字缩小为单个值，因此 gnuplot 可以绘制以`hist`函数返回值为中心的条形图。

在您的原始帖子中，`hist(x,width)=width*floor(x/width)+width/2`. 因此，您将`hist(x,width)=0.5`得到`width=1`和`0 <= x < 1`。最终，您将得到一个以 为中心的条形图`0.5`。

现在，如果要将间隔设置为 [-0.5:0.5]、[-0.5:-1.5] 等，您可能需要更改`hist`函数以使其`0.0`在`width=1`和时返回`-0.5 <= x < 0.5`。

```
width=1
hist(x,width)=width*floor((x + width/2)/width)
plot "< awk '{if (\$1<3.9 && \$1>3.8) {print \$0}}' /path_to_file/" u (hist(\$2,width)):(1.0) smooth freq w boxes lc rgb "black" lt 1 lw 0.5 notitleenter code here 
```

# java - 无法导入 org.apache.log4j.Logger

> ID：12676356
> 
> 赞同：-5
> 
> 时间：2012-10-01T15:32:31.707
> 
> 标签：java, jdeveloper

我无法`org.apache.log4j.Logger`使用 JDeveloper 10.1 导入库。这样做的程序是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T11:07:40.257

项目名称（在导航器面板中）/属性/库和类路径/添加 jar 目录上的右键并选择 log4j.jar 或从 Internet 下载，按确定并在代码请求时添加正确的导入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-02T10:14:24.770

如果项目目录下没有jar文件，可以从这里下载。 [http://www.java2s.com/Code/Jar/l/Downloadlog4j1215jar.htm](http://www.java2s.com/Code/Jar/l/Downloadlog4j1215jar.htm)

下一步是将导入添加到您的 java 类文件中：

导入 org.apache.log4j.Logger；

# ipad - 更新 Xcode 后，我在链接库时遇到问题。ARCHS_STANDARD_32_BIT 和 ARMV7S

> ID：12676364
> 
> 赞同：1
> 
> 时间：2012-10-01T15:33:24.403
> 
> 标签：ipad, xcode4.5, iphone-5, armv7

更新 Xcode 后，我的 iPad 应用程序无法编译。它有一个名为 Flurry 的库，编译器说：“ld: file is universal but doesn't caontain armv7s slice...libFlurry.a”

所以，在我看来，Flurry 似乎没有被编译，包括 armv7s（或 iPhone 5）架构。但是，我的应用程序仅适用于 iPad（iPad 1、2 和 3）

据我所知，armv7s 属于 iPhone 5 架构，但目前的 iPad 都没有这种架构。我对吗？这是否意味着我可以通过“armv7”更改“$(ARCHS_STANDARD_32_BIT)”？我做到了，现在该程序在我的 iPad 上完美运行，但不确定这是否正确，因为也许并非所有 iPad 都是 armv7。只有 iPad 架构有什么常数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:25:13.867

是的，因为 Flurry lib 仅针对 armv7 编译，所以 flurry lib 不支持 armv7s。

因此，要使代码与 armv7s 一起工作，您需要更新 flurry lib。

但是，如果您只想在 armv7 中运行应用程序，请从构建设置中删除 armv7s。

谢谢

# selenium - 如何在 selenium 远程 webdriver 中禁用 Flash

> ID：12676369
> 
> 赞同：9
> 
> 时间：2012-10-01T15:33:30.487
> 
> 标签：selenium, selenium-rc, selenium-webdriver

使用 Selenium Remote WebDriver 时如何禁用 Flash 对象的加载。如果我也为普通的 webdriver 找到解决方案，那将会很有帮助。

由于在大多数情况下 Flash 对象是由 JavaScript 加载的，因此我尝试在 webdriver 和远程 webdriver 上禁用 javascript，但它不起作用。

我试图通过以下方式禁用 JavaScript：

```
WebDriver driver = new FirefoxDriver();
((DesiredCapabilities) driver.getCapabilities()).setJavascriptEnabled(false); 
```

我也试过：

```
DesiredCapabilities caps = new DesiredCapabilities();
caps.setJavascriptEnabled(false);
WebDriver driver = new FireFoxDriver(caps); 
```

对于远程 WebDriver，我尝试过：

```
final DesiredCapabilities firefoxCapability = DesiredCapabilities.firefox();
firefoxCapability.setJavascriptEnabled(false);
new RemoteWebDriver(new URL("http://" + windowsIP + ":4444/wd/hub"), firefoxCapability); 
```

执行上述语句后，远程服务器显示

```
Executing: [new session: <platform=ANY, javascriptEnabled=false, browserName=firefox, version=>] at URL:/session> 
```

但仍然所有 Javascript 都在驱动程序加载的页面上执行，并且 Flash 也在加载。

请帮帮我： 1.如何阻止闪存加载。2\. 在远程驱动上需要它，因为我需要在 IE、Firefox、Chrome 上测试页面。因此加载forefox配置文件将不起作用

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-22T13:58:30.773

我在 Linux mint 上使用了这段代码，它可以工作：

```
FirefoxProfile profile= new FirefoxProfile();
profile.setPreference("plugin.state.flash", 0);
FirefoxDriver driver = new FirefoxDriver(profile); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:04:39.753

虽然它已经回答了问题但在不同的论坛上......所以我会为你巩固......

我不确定 Flash 对象是否由 javascript 加载......但如果禁用 javascript 是问题，那么......

永远不要禁用 Firefox 驱动程序的 Javascript，如果你想使用它被禁用，请尝试使用 HTMLUNITDRIVER，它专门用于非 javascript 页面。

原因是 Firefox 驱动程序的重要部分是在 javascript 中实现的，禁用将有严重的问题。

另一方面，HtmlUnitDriver 是自动化测试的最快和最好的方法（对于没有 JS 的页面，splly）

请查看此小组讨论 [https://groups.google.com/forum/?fromgroups=#!topic/webdriver/daLOzCiU_h4%5B1-25%5D](https://groups.google.com/forum/?fromgroups=#!topic/webdriver/daLOzCiU_h4%5B1-25%5D)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-09T19:55:46.543

我有同样的问题，需要为 Chrome 解决它。这就是我让它工作的方式：

```
 ChromeOptions options = new ChromeOptions();
    options.addArguments("--disable-bundled-ppapi-flash");
    WebDriver webDriver = new org.openqa.selenium.chrome.ChromeDriver(options); 
```

# php - 如何使用 PHP 增加 Excel 单元格可以容纳的数据量

> ID：12676373
> 
> 赞同：1
> 
> 时间：2012-10-01T15:33:44.513
> 
> 标签：php, excel, export-to-excel

我需要在我的应用程序中将数据库记录导出到 excel 文件。为此，我正在使用博客[外部链接到博客的轻量级类](http://blog.leenix.co.uk/2009/04/lightweight-php-class-to-export-to.html)

它工作正常.. 但我面临一个问题.. 如果字符串长度超过 200，那么它不会向单元格插入数据。我想增加一个单元格可以容纳的数据量。有没有人知道，如何使用 PHP 正常完成

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T16:12:41.640

Excel 对单元格可以容纳的数据量有限制：对于 Excel BIFF 8 文件，该限制是 32,767 个字符，因此（理论上）200 多个字符应该不是问题。但是，对于较长的字符串，此数据在 BIFF 文件中跨多个具有连续记录的块进行维护。对于 BIFF 5 文件 (Excel 95)，限制为每块 2084 个字节；在 BIFF 8 文件（Excel 97 及更高版本）中，限制为 8228 字节。超过这些限制的记录**必须**拆分为 CONTINUE 块。

这个相对简单的编写器不是为了处理将记录拆分为多个连续记录而编写的：它甚至不使用 BIFF 8 共享字符串表，或者指示它正在编写的 BIFF 版本（这意味着 Excel 将使用最低公分母打开它参数）。它只是尝试将单元格的全部内容存储到标准标签块中（限制为 255 个字节）。要解决此问题，您需要修复用于处理使用延续块拆分字符串值的库（通过共享字符串表）；或切换到已经处理跨多个块拆分共享字符串的库。

# c# - 自定义配置部分

> ID：12676374
> 
> 赞同：1
> 
> 时间：2012-10-01T15:33:54.113
> 
> 标签：c#, winforms

我在 MSDN 上复制并粘贴了[示例](http://msdn.microsoft.com/en-us/library/2tw134k3%28v=vs.100%29.aspx)

我将部分声明从

```
<section 
    name="pageAppearance" 
    type="Samples.AspNet.PageAppearanceSection" 
    allowLocation="true" 
    allowDefinition="Everywhere"
  /> 
```

到

```
<section
    name="pageAppearance"
    type="Samples.AspNet.PageAppearanceSection, Samples.AspNet " /> 
```

除此之外，所有代码都是完全相同的。出于某种原因，来自 msdn 的源代码仅显示默认值。**有人可以帮我弄清楚为什么它不会读取配置部分，谢谢。**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <!-- Configuration section-handler declaration area. -->
    <configSections>
        <sectionGroup name="pageAppearanceGroup">
            <section
        name="pageAppearance"
        type="Samples.AspNet.PageAppearanceSection, Samples.AspNet "
                allowLocation="true"
                allowDefinition="Everywhere"/>
        </sectionGroup>
    </configSections>
    <startup>
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
    <pageAppearanceGroup>
        <pageAppearance remoteOnly="true">
            <font name="TimesNewRoman" size="18"/>
            <color background="000000" foreground="FFFFFF"/>
        </pageAppearance>
    </pageAppearanceGroup>
</configuration>

using System;
using System.Collections;
using System.Text;
using System.Configuration;
using System.Xml;

namespace Samples.AspNet
{
    public class PageAppearanceSection : ConfigurationSection
    {
        // Create a "remoteOnly" attribute.
        [ConfigurationProperty("remoteOnly")]
        public Boolean RemoteOnly
        {
            get
            {
                return (Boolean)this["remoteOnly"];
            }
            set
            {
                this["remoteOnly"] = value;
            }
        }

        // Create a "font" element.
        [ConfigurationProperty("font")]
        public FontElement Font
        {
            get
            {
                return (FontElement)this["font"];
            }
            set
            { this["font"] = value; }
        }

        // Create a "color element."
        [ConfigurationProperty("color")]
        public ColorElement Color
        {
            get
            {
                return (ColorElement)this["color"];
            }
            set
            { this["color"] = value; }
        }
    }

    // Define the "font" element
    // with "name" and "size" attributes.
    public class FontElement : ConfigurationElement
    {
        [ConfigurationProperty("name")]
        [StringValidator(InvalidCharacters = "~!@#$%^&*()[]{}/;'\"|\\", MinLength = 1, MaxLength = 60)]
        public String Name
        {
            get
            {
                return (String)this["name"];
            }
            set
            {
                this["name"] = value;
            }
        }

        [ConfigurationProperty("size", DefaultValue = "12", IsRequired = false)]
        [IntegerValidator(ExcludeRange = false, MaxValue = 24, MinValue = 6)]
        public int Size
        {
            get
            { return (int)this["size"]; }
            set
            { this["size"] = value; }
        }
    }

    // Define the "color" element 
    // with "background" and "foreground" attributes.
    public class ColorElement : ConfigurationElement
    {
        [ConfigurationProperty("background", DefaultValue = "FFFFFF", IsRequired = true)]
        [StringValidator(InvalidCharacters = "~!@#$%^&*()[]{}/;'\"|\\GHIJKLMNOPQRSTUVWXYZ", MinLength = 6, MaxLength = 6)]
        public String Background
        {
            get
            {
                return (String)this["background"];
            }
            set
            {
                this["background"] = value;
            }
        }

        [ConfigurationProperty("foreground", DefaultValue = "000000", IsRequired = true)]
        [StringValidator(InvalidCharacters = "~!@#$%^&*()[]{}/;'\"|\\GHIJKLMNOPQRSTUVWXYZ", MinLength = 6, MaxLength = 6)]
        public String Foreground
        {
            get
            {
                return (String)this["foreground"];
            }
            set
            {
                this["foreground"] = value;
            }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:37:11.350

关于您的情况，我已经对其进行了调试，并发现了问题所在。只需评论以下行：

```
[StringValidator(InvalidCharacters = "~!@#$%^&*()[]{}/;'\"|\\", MinLength = 1, MaxLength = 60)] 
```

所以类 FontElement 应该是这样的：

```
// Define the "font" element 
// with "name" and "size" attributes. 
public class FontElement : ConfigurationElement
{

    [ConfigurationProperty("name")]
    public String Name
    {
        get
        {
            return (String)this["name"];
        }
        set
        {
            this["name"] = value;
        }
    }

    [ConfigurationProperty("size", DefaultValue = "12", IsRequired = false)]
    [IntegerValidator(ExcludeRange = false, MaxValue = 24, MinValue = 6)]
    public int Size
    {
        get
        { return (int)this["size"]; }
        set
        { this["size"] = value; }
    }
} 
```

你准备好了！

# c# - c#如何刷新列表框中的项目

> ID：12676378
> 
> 赞同：0
> 
> 时间：2012-10-01T15:34:12.053
> 
> 标签：c#, listbox, updates

我有一个方法可以将项目添加到我的列表框，称为 refreshInterface，它会在程序启动后立即调用，使用 FormItems 类在列表框中添加 homeforms 的名称，这是下面的 rereshInterface 方法

```
 public void refreshInterface()
    {
        //int number = 0;
        foreach (DataSet1.xspGetAnalysisUsageTypesRow homeForms in myDataSet.xspGetAnalysisUsageTypes)
        {
            var forms = new FormItems(homeForms);
            listBox1.Items.Add(forms);
        }
    } 
```

FormItems 类如下

```
public class FormItems
{
    public DataSet1.xspGetAnalysisUsageTypesRow types { get; set; }

    public FormItems(DataSet1.xspGetAnalysisUsageTypesRow usageTypes)
    {
        types = usageTypes;
    }

    public override string ToString()
    {
        // returns the rows that are relating to types.xlib_ID
        var libtyps = types.GetxAnalysisUsageRows();
        var cnt = 0;

        foreach (DataSet1.xAnalysisUsageRow ty in libtyps)
        {
            //returns true if ty is null
            bool typeNull = ty.Isxanu_DefaultNull();

            // if its false, if xanu_Default is set
            if (!typeNull)
            {
                cnt += 1;
            }
        }

        var ret = String.Format("set {0} [Set: {1}]", types.xlib_Desc, cnt);

        //return this.types.xlib_Desc;

        return ret;
    }
} 
```

每个列表框（列表框位于主窗体的左侧）项都有许多可以添加到其中的报告，例如，我从列表框中选择一个主窗体，右侧有 12 个文本框，每个文本框有一对按钮是浏览和清除。如果我单击浏览按钮会出现一个新表单，然后从该表单中选择一个报告并将其添加到特定的文本框，则该主表单的计数应该会更新，并且我清除特定主表单的文本框，计数也应该更新。

在我调试应用程序的那一刻，它会根据添加到 homeform 的报告数量向我显示每个 Homeform 的计数，但是在程序运行时，如果我向 homeform 添加新报告，计数不会更新直到我重新启动调试会话。有人告诉我使用数据绑定方法，但不确定如何在这里使用它

我如何更新我的列表框项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:38:10.300

您应该将 List Box 组件源绑定到 Observable Collection，您对 Observable Collection 所做的每次更新都会更新 List Box 数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:10:08.380

```
Might not be exact but should give you an idea.

public void refreshInterface()
{
    Dictionary<int,string> items = new Dictionary<int,string>();

    //int number = 0;
    foreach (DataSet1.xspGetAnalysisUsageTypesRow homeForms in myDataSet.xspGetAnalysisUsageTypes)
    {
        var formitem = new FormItems(homeForms);
        items.Add(formitem.someprop, formitem.toString());

    }
    listbox.DataSource = items;
    listbox.DisplayMember = "Value";
    listbox.ValueMember = "Key";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T16:20:20.983

您可能应该研究绑定。这是一个很好的起点：

[http://www.codeproject.com/Articles/140621/WPF-Tutorial-Concept-Binding](http://www.codeproject.com/Articles/140621/WPF-Tutorial-Concept-Binding)

如果您希望 GUI 响应数据更改，那么绑定是您最好的朋友。

# linq-to-sql - 我需要学习数据集吗？

> ID：12676380
> 
> 赞同：1
> 
> 时间：2012-10-01T15:34:15.410
> 
> 标签：linq-to-sql, dataset

参考[这个](https://stackoverflow.com/questions/18533/c-what-else-do-you-use-besides-dataset)问题，我很清楚这`DataSet`是一项古老的技术。现在人们使用`Linq to SQl`. 我是数据库编程和学习这些概念的新手。我的问题是我需要先学习`DataSet`然后移动到`Linq to SQL`或者我可以直接跳到后一个。
将来我必须使用的地方可能会出现问题`DataSet`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:48:15.980

LINQ to SQL 不依赖于数据集。不要学他们。

您甚至可能想跳到实体框架，因为 L2S 已被 Microsoft 放弃（唉！）。EF 是声明的未来。

如果您真的对后继技术感兴趣，则永远不要先学习先行技术。后续技术的学习材料可确保您了解所有重要的内容。如果数据集很重要，您的学习资料会告诉您。

# tcpdf - 正在显示 MySQL 文本，就像没有 在 TCPDF 中

> ID：12676385
> 
> 赞同：0
> 
> 时间：2012-10-01T15:34:41.983
> 
> 标签：tcpdf

我想在`<pre>`标签中包围来自 MySQL 的文本。这是我的代码 -

```
$html=$html.'<pre>'.$database[$i]['response'].'</pre>'; 
```

但是在浏览器中查看时，它的行为与预期不符，因为没有新行并且没有保留间距。

有谁知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T03:37:55.860

该`<pre>`标签在 TCPDF 中可以正常工作，请试试这个，

```
$html .='<pre> '.$database[$i]['response'].' </pre>'; 
```

或者

```
$html .='<pre> echo $database[$i]['response'] </pre>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-30T11:15:10.030

请升级您的`TCPDF`库，它将开始工作。

[您可以在此处查看更多 TCPDF 中的预标记示例](https://github.com/tecnickcom/TCPDF/blob/main/examples/example_006.php)

**注意：** `<pre>`标签在标签内不起作用`<td>`。

# excel - iferror 和 isblank 在同一个表达式中

> ID：12676387
> 
> 赞同：2
> 
> 时间：2012-10-01T15:34:46.057
> 
> 标签：excel, excel-2007

如何将 isblank 和 iferror 放在同一个表达式中。如果一个单元格是空白的或者里面有错误，我应该做点什么。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T15:38:40.300

这是一个示例公式。

```
=IF(OR(ISERROR(C20),ISBLANK(C20)),"It is True", "It is False") 
```

使用 OR 允许您在同一个 IF 中使用两个逻辑检查。只要确保你的值和你的值`ISERROR`是`ISBLANK`一样的。

将 C20 替换为您正在检查的内容，如果它为空白或错误​​，则将“It is True”替换为您想要执行的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:03:52.180

如果 A1 为空白，您可以使用 IF 函数返回错误 - 然后将其包装在 ISERROR 中，即

`=IF(ISERROR(IF(A1="",NA())),TRUE,FALSE)`

如果 A1 包含由公式返回的空白 [""]，这也将返回 TRUE

# python - 使用 pep-3143 创建 python 2.7 守护进程

> ID：12676393
> 
> 赞同：8
> 
> 时间：2012-10-01T15:34:53.703
> 
> 标签：python, daemon, python-daemon

有谁知道如何将[python 2.7](http://pypi.python.org/pypi/python-daemon/)实现 为 Linux 守护进程？我正在寻找一个带有启动/停止参数的工作示例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T17:00:00.663

以下代码是如何在 linux 上使用 python 创建守护程序的示例，如果我没有回答您的问题，您应该查看此链接[http://ridingpython.blogspot.com.br/2011/08/turning-your-python-script -into-linux.html](http://ridingpython.blogspot.com.br/2011/08/turning-your-python-script-into-linux.html)

主文件

```
import sys
from daemon import Daemon

class MyDaemon(Daemon):
    def run(self):
        print 'working'

if __name__ == "__main__":
    daemon = MyDaemon('/tmp/HMTd.pid')
    if len(sys.argv) > 1:
        if 'start' == sys.argv[1]:
            daemon.start()
        elif 'stop' == sys.argv[1]:
            daemon.stop()
        elif 'restart' == sys.argv[1]:
            daemon.restart()
        else:
            print "Unknown command"
            sys.exit(2)
        sys.exit(0)
    else:
        print "usage: %s start|stop|restart" % sys.argv[0]
        sys.exit(2) 
```

类 daemon.py

```
import sys, os, time, atexit
from signal import SIGTERM 

class Daemon:
    """
    A generic daemon class.

    Usage: subclass the Daemon class and override the run() method
    """
    def __init__(self, pidfile, stdin='/dev/stdin', stdout='/dev/stdout', stderr='/dev/stderr'):
        self.stdin = stdin
        self.stdout = stdout
        self.stderr = stderr
        self.pidfile = pidfile

    def daemonize(self):
        """
        do the UNIX double-fork magic, see Stevens' "Advanced 
        Programming in the UNIX Environment" for details (ISBN 0201563177)
        http://www.erlenstar.demon.co.uk/unix/faq_2.html#SEC16
        """
        try: 
            pid = os.fork() 
            if pid > 0:
                # exit first parent
                sys.exit(0) 
        except OSError, e: 
            sys.stderr.write("fork #1 failed: %d (%s)\n" % (e.errno, e.strerror))
            sys.exit(1)

        # decouple from parent environment
        os.chdir("/") 
        os.setsid() 
        os.umask(0) 

        # do second fork
        try: 
            pid = os.fork() 
            if pid > 0:
                # exit from second parent
                sys.exit(0) 
        except OSError, e: 
            sys.stderr.write("fork #2 failed: %d (%s)\n" % (e.errno, e.strerror))
            sys.exit(1) 

        # redirect standard file descriptors
        sys.stdout.flush()
        sys.stderr.flush()
        si = file(self.stdin, 'r')
        so = file(self.stdout, 'a+')
        se = file(self.stderr, 'a+', 0)
        os.dup2(si.fileno(), sys.stdin.fileno())
        os.dup2(so.fileno(), sys.stdout.fileno())
        os.dup2(se.fileno(), sys.stderr.fileno())

        # write pidfile
        atexit.register(self.delpid)
        pid = str(os.getpid())
        file(self.pidfile,'w+').write("%s\n" % pid)

    def delpid(self):
        os.remove(self.pidfile)

    def start(self):
        """
        Start the daemon
        """
        # Check for a pidfile to see if the daemon already runs
        try:
            pf = file(self.pidfile,'r')
            pid = int(pf.read().strip())
            pf.close()
        except IOError:
            pid = None

        if pid:
            message = "pidfile %s already exist. Daemon already running?\n"
            sys.stderr.write(message % self.pidfile)
            sys.exit(1)

        # Start the daemon
        self.daemonize()
        self.run()

    def stop(self):
        """
        Stop the daemon
        """
        # Get the pid from the pidfile
        try:
            pf = file(self.pidfile,'r')
            pid = int(pf.read().strip())
            pf.close()
        except IOError:
            pid = None

        if not pid:
            message = "pidfile %s does not exist. Daemon not running?\n"
            sys.stderr.write(message % self.pidfile)
            return # not an error in a restart

        # Try killing the daemon process    
        try:
            while 1:
                os.kill(pid, SIGTERM)
                time.sleep(0.1)
        except OSError, err:
            err = str(err)
            if err.find("No such process") > 0:
                if os.path.exists(self.pidfile):
                    os.remove(self.pidfile)
            else:
                print str(err)
                sys.exit(1)

    def restart(self):
        """
        Restart the daemon
        """
        self.stop()
        self.start()

    def run(self):
        """
        You should override this method when you subclass Daemon. It will be called after the process has been
        daemonized by start() or restart().
        """ 
```

编辑：我不再使用它了。我现在更喜欢一项`systemd`服务：

```
[Unit]
Description=projectx python3 collector
After=network.target

[Service]
Type=simple
Restart=always
RestartSec=1
User=ec2-user
ExecStart=/usr/bin/env /bin/sh /home/ec2-user/projectx/run.sh
ExecStartPre=/bin/sleep 10
ExecStop=/bin/sh -c "kill -9 $(ps aux | grep -i projectx | awk '{print $2}') && killall chromedriver"

[Install]
WantedBy=multi-user.target 
```

# ruby - Ruby 返回语法

> ID：12676397
> 
> 赞同：2
> 
> 时间：2012-10-01T15:34:58.853
> 
> 标签：ruby, syntax, return

下面的代码返回`true`if`@var`是 non- `nil`。

```
class MyClass
    def a_simple_method
        not @var.nil?
    end
end 
```

当我使用这样的关键字时`return`：

```
class MyClass
    def a_simple_method
        return not @var.nil?
    end
end 
```

它返回一个语法错误：

```
syntax error, unexpected tIVAR, expecting '('
        return not @var.nil?
                       ^ 
```

我理解错了`return`什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T15:45:55.047

它告诉你使用`()`

```
class MyClass
    def a_simple_method
        return not(@var.nil?)
    end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T15:52:06.580

你需要括号 for`return`或 for`not`

```
class MyClass

    def a_simple_method
        return(not @var.nil?)
    end
end

class MyAnotherClass

    def a_simple_method
        return not(@var.nil?)
    end
end

MyClass.new.a_simple_method
MyAnotherClass.new.a_simple_method 
```

## 在此处查看[现场演示](http://cibox.org/slivu/stackoverflow?lang=ruby&file=ruby-return-syntax.rb&run=true)

# ruby-on-rails-3 - 格式化 [] 数组，如 params Rails

> ID：12676398
> 
> 赞同：2
> 
> 时间：2012-10-01T15:34:59.723
> 
> 标签：ruby-on-rails-3

这是我的视图代码：

```
- @categories.each do |c|
%li.menu-drop
= check_box_tag "categories[]", c.id
.tipo-infor
    = c.title 
```

当我提交此表单时，它会生成此 url：

```
http://0.0.0.0:3000/buscar-projetos-com?utf8=%E2%9C%93&categories%5B%5D=3&categories%5B%5D=4&commit=Pesquisar 
```

我的问题是如何更好地显示这个网址，就像：

```
http://0.0.0.0:3000/buscar-projetos-com?categories=2,3,4,5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:03:13.797

这些`%E2's`是这些 URL 的 ASCII 表示形式，在通过 Internet 发送数据时使用它们更安全。此外，逗号 ( `,`) 在 URL 中是不合法的，因此不应使用它们，因为浏览器和标准库都不喜欢它们。

如果您担心“丑陋”的 URL 字符串，您可以使用`POST`方法 vs提交您的表单`GET`，这将对用户隐藏所有参数。

# c - 为什么我不能将数组视为 C 中的指针？

> ID：12676402
> 
> 赞同：8
> 
> 时间：2012-10-01T15:35:10.843
> 
> 标签：c, arrays, pointers, dereference, memory-address

我在 SO 上经常看到这个问题。也许不是这么多话......但一次又一次地混淆了数组与指针的不同之处。所以我想我会花点时间来问答一些关于这个的问题。

出于本问答的目的，我们将假设一个 32 位系统，并声明了以下内容：

```
char * ptr = "hello";
char arr[10] = "hello";
int iarr[10] = {0}; 
```

以下是我在 SO 上看到的困惑的问题列表。当我看到新的问题时，我会添加到我的问答列表中（其他人也可以随意添加，如果您发现任何错误，请纠正我！）

1.  指针和数组基本上不是一回事吗？
2.  跟进：`*(ptr)`and `*(arr)`, or `ptr[0]`and`arr[0]`给出相同的东西，为什么？
3.  怎么会`arr`和`&arr`值一样？
4.  跟进：为什么我得到不同的值打印`arr+1`与`&arr+1`？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-01T15:35:10.843

1)**指针不是数组。数组不是指针。**不要那样想它们，因为它们是不同的。
我怎样才能证明这一点？想想它们在记忆中的样子：

我们的数组`arr`有 10 个字符长。它包含“你好”，但等等，这还不是全部！因为我们有一个静态声明的数组比我们的消息长，所以我们得到一堆 NULL 字符 ( `'\0'`) 免费抛出！另外，请注意名称`arr`在概念上是如何附加到连续字符的（它不指向任何东西）。 ![在此处输入图像描述](../Images/827d02f1b6570362803af79f1f88e351.png)

接下来考虑我们的指针在内存中的样子： ![在此处输入图像描述](../Images/e0a8897f2425a1d7184443d892ba9ab5.png) 注意这里我们指向只读内存中某个位置的字符数组。

因此，虽然两者`arr`和`ptr`都以相同的方式初始化，但每个的内容/位置实际上是不同的。

**这是关键点：**
**ptr**是一个变量，我们可以将它指向任何东西，**arr**是一个常量，它总是会引用这个 10 个字符的块。

* * *

2) The`[]`是可用于地址的“添加和引用”运算符。意思`arr[0]`和说的一样`*(arr+0)`。所以是的，这样做：

```
printf("%c %c", *(arr+1), *(ptr+1)); 
```

会给你一个“e e”的输出。这不是因为数组是指针，而是因为数组的名称`arr`和指针`ptr`都恰好给了你一个地址。

**#2 的关键点：**引用运算符`*`和加法和引用运算符`[]`并不分别特定于指针和数组。这些运算符只处理地址。

* * *

3）我没有一个非常简单的答案......所以让我们暂时忘记我们的字符数组，看看这个例子来解释一下：

```
int b;   //this is integer type
&b;      //this is the address of the int b, right?

int c[]; //this is the array of ints
&c;      //this would be the address of the array, right? 
```

所以这是可以理解的：

```
*c;   //that's the first element in the array 
```

那行代码告诉你什么？如果我尊重`c`，那么我会得到一个 int。这意味着只是一个简单`c`的地址。由于它是数组的开头，它是数组的地址，也是数组中第一个元素的地址，因此从值的角度来看：

```
c == &c; 
```

* * *

4) 让我暂时离开话题……最后一个问题是地址算术混乱的一部分。我曾经看到一个关于 SO 的问题，暗示地址只是整数值......您需要了解在 C 中地址具有类型知识。也就是说：

```
iarr+1; //We added 1 to the address, so we moved 4 bytes
arr+1;  //we added 1 to the address, so we moved 1 byte 
```

基本上`sizeof(int)`是 4 而`sizeof(char)`是 1。所以“将 1 添加到数组”并不像看起来那么简单。

那么现在，回到问题，为什么与`arr+1`不同`&arr+1`？第一个是向`1 * sizeof(char)`地址添加 =1，第二个是向`1 * sizeof(arr)`地址添加 =10。

这就是为什么即使它们都“只加 1”，它们也会给出不同的结果。

# magento - magento 状态 - 待处理、处理和信用卡订单

> ID：12676403
> 
> 赞同：1
> 
> 时间：2012-10-01T15:35:11.780
> 
> 标签：magento, status

我有一个关于 Magento 订单状态和信用卡付款的问题。

**通过支票或汇票支付的订单** 对于通过支票或汇票支付的订单，Magento 在“待处理”中启动状态订单，然后在管理员发票订单时将状态移动到“处理中”。

**信用卡支付的** 订单 对于信用卡支付的订单，信用卡模块以“处理中”状态启动订单

**问题** 我们想通过 Magento API 提取订单。为了确定要提取哪些订单，我们使用“sales_order.list”API 方法仅请求状态为“pending”的订单，然后通过“sales_order.addComment”API 方法将订单状态设置为“正在处理”。

通过信用卡流程将订单状态设置为“处理中”，我们不再能够仅通过状态来识别未处理的订单。

是否可以添加或重新调整状态或添加新状态？

例子：

待定 - 通过支票或汇票订购

PendingCC - 由信用卡处理

处理 - 仅由我们的 API 设置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:04:44.003

您是否尝试过：管理员 -> 系统 -> 订单状态

然后进入管理 -> 系统 -> 配置 -> 付款方式 -> 新订单状态

# css - 位置的“新”图片？(CSS)

> ID：12676407
> 
> 赞同：0
> 
> 时间：2012-10-01T15:35:22.207
> 
> 标签：css, html

宽屏和窄屏是个问题。。如何设置图片的位置？（网站页脚菜单栏 - 已修复）

[点击图片查看详情](http://i.stack.imgur.com/GYVsu.png)

你能帮我吗？谢谢！

*菜单条码：*

```
 div.footer{ /* main*/
        background: none repeat scroll 0 0 #000000;
        border-top: 1px solid #222;
        bottom: 0;
        left: 12%;
        line-height: 30px;
        position: fixed;
        text-align: center;
        text-decoration: none;
        width: 963px;
        z-index: 999;
        margin: 0 auto;
    }
    div.footer a {
        color: #999;
    }
    div.footer a:hover {
        color: #FFFFFF;
        text-decoration: none;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:55:04.387

我猜你希望那个“新”图像出现在你的一个链接的右上角。为此，您需要设置位置：相对于您的链接并定位图像绝对位置。像这样的东西：

```
div.footer a {
    color: #999;
}
div.footer a img {
    position: absolute;
    top: -10px;
    right: 5px;
} 
```

*   您可以根据需要设置顶部和右侧

# ruby-on-rails - 如何在 Ruby 中测试文件上传到远程服务器

> ID：12676409
> 
> 赞同：2
> 
> 时间：2012-10-01T15:35:23.777
> 
> 标签：ruby-on-rails, ruby

我正在实现将文件发布（上传）到远程服务器：

```
RestClient.post(server_url, :name_of_file_param => File.new('/myfile.txt','r')) 
```

我很好奇测试它：是否有可能以某种方式测试它？或者也许有一个在线服务允许通过 http 上传文件？

请注意，这`server_url`是一个远程服务器，它不是**我** `Rails`的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:18:01.680

一个简单的方法是进行功能测试。为此，您通常会模拟网络连接。有关想法，请查看用于模拟 HTTP 连接及其结果的 VCR gem：[https ://github.com/myronmarston/vcr](https://github.com/myronmarston/vcr)

更详细的方法是编写往返测试，在其中上传文件，然后下载文件，并比较两者以确保它们相同。这是一个集成测试。它不使用模拟。某些 API 可能会提供交付证明，例如通过在 HTTP 响应中返回文件校验和；如果可以，请使用这些。

如果您的数据价值很高，我建议您进行集成测试，并进行一些负载测试和基准测试。这是为了确保数据在您期望的时间内安全到达。当我为一个真实的应用程序这样做时，集成测试确实发现了远程服务器的问题，影响了大约 1% 的文件。

# c - C11 与 C99 中临时对象的生命周期

> ID：12676411
> 
> 赞同：19
> 
> 时间：2012-10-01T15:35:27.383
> 
> 标签：c, c99, c11

我试图破译导致 C99 和 C11 之间变化[的注释。](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1285.htm)该说明中提出的更改最终出现在 C11 的 6.2.4:8 中，即：

> 具有结构或联合类型的非左值表达式，其中结构或联合包含具有数组类型的成员（递归地，包括所有包含的结构和联合的成员）是指具有自动存储持续时间和临时生命周期的对象。它的生命周期从计算表达式时开始，它的初始值是表达式的值。当包含完整表达式或完整声明符的评估结束时，它的生命周期结束。任何修改具有临时生命周期的对象的尝试都会导致未定义的行为。

我理解为什么需要进行更改（可以在[此处](https://wiki.sei.cmu.edu/confluence/display/c/EXP35-C.+Do+not+modify+objects+with+temporary+lifetime)找到一些讨论。请注意，讨论可以追溯到 C11 之前）。然而，我不明白的是克拉克尼尔森在写他的笔记时所说的旁白：

> 请注意，这种方法另外声明了一个符合 C99 标准的示例为不符合标准：

```
struct X { int a[5]; } f();
int *p = f().a;
printf("%p\n", p); 
```

我明白为什么这个例子在 C11 下不符合标准。我特别不明白的是它是如何符合 C99 的。而且，如果它是在 C99 下定义的，那么它应该做什么，定义地打印悬空指针的值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T08:23:17.960

My understanding is that in C99, the finest grain of lifetime for an object is the block. Thus, while 6.5.2.2 (and some other § mentioned in the note you refer to) specifically says that you can't access the returned value after the next sequence point, technically its address is **not** indeterminate until after you have left the enclosing block (the reason why you should have some storage reserved for an inaccessible object is left as an exercise for the reader, though). Thus, something like

```
struct X { int a[5]; } f();
int *p;
{ p = f().a; }
printf("%p\n", p); 
```

is undefined in C99 as well as in C11\. In C11, the notion of "temporary lifetime", that does not exist in C99, allows to consider that the pointer becomes indeterminate as soon as the full expression ends.

# android - android 非平凡 findViewById NullPointerException

> ID：12676412
> 
> 赞同：0
> 
> 时间：2012-10-01T15:35:31.360
> 
> 标签：android, android-layout, button, nullpointerexception

我有日历库，其中有 CalendarViewActivity。
我的项目使用这个库并扩展 CalendarViewActivity 来设置自定义活动标题。
日历活动：

```
public class CalendarActivity extends CalendarViewActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // set custom activity title
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE,
                R.layout.window_title);
        TextView title = (TextView) getWindow().findViewById(R.id.txt_header);
        if (isGo) {
            title.setText(getResources().getString(R.string.title_date_go));
        } else {
            title.setText(getResources().getString(R.string.title_date_go_back));
        }
    } 
```

}

在某些设备中（确切地知道：asus tf101，Samsung Galaxy Gio S5660）我在这一行得到 NullPointerException：

```
super.onCreate(savedInstanceState); 
```

这引用了库中的这一行（此处出现异常）：

```
((Button) findViewById(R.id.btn_today)).setOnClickListener(this); 
```

Xml 布局（库中的 CalendarViewActivity）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/calendar_header"
        android:gravity="center_vertical"
        android:orientation="horizontal">

        <ImageView
            android:id="@+id/prevMonth"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:contentDescription="@string/descr_btn_prev_month"
            android:src="@drawable/calendar_left_arrow_selector" >
        </ImageView>

        <TextView
            android:id="@+id/currentMonth"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.6"
            android:gravity="center"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@android:color/black" >
        </TextView>

        <ImageView
            android:id="@+id/nextMonth"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:contentDescription="@string/descr_btn_next_month"
            android:src="@drawable/calendar_right_arrow_selector" >
        </ImageView>
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:layout_marginLeft="15dp"
        android:layout_marginRight="15dp" >

        <GridView
            android:id="@+id/calendarHeader"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:listSelector="@android:color/transparent"
            android:numColumns="7" >
        </GridView>

        <GridView
            android:id="@+id/calendar"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/calendar_bg"
            android:listSelector="@android:color/transparent"
            android:numColumns="7">
        </GridView>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:layout_marginTop="15dp">
            <Button
                android:id="@+id/btn_today"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@drawable/calendar_button"
                android:text="@string/btn_today"
                android:gravity="center"
                android:textColor="@android:color/white"
                android:layout_marginRight="5dp"
                android:textAppearance="?android:attr/textAppearanceMedium"/>
            <Button
                android:id="@+id/btn_tomorrow"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@drawable/calendar_button"
                android:text="@string/btn_tomorrow"
                android:gravity="center"
                android:textColor="@android:color/white"
                android:layout_marginLeft="5dp"
                android:textAppearance="?android:attr/textAppearanceMedium"/>
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

这仅出现在某些设备中，其他设备正常。
这很奇怪..
请帮助我，非常感谢！

编辑：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{net.package.package/net.package.package.ui.activities.CalendarActivity}: java.lang.NullPointerException
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
        at android.app.ActivityThread.access$1500(ActivityThread.java:117)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:130)
        at android.app.ActivityThread.main(ActivityThread.java:3687)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:507)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
        at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
        at com.metalex.calendarview.UI.Activities.CalendarViewActivity.onCreate(CalendarViewActivity.java:118)
        at net.aviascanner.aviascanner.ui.activities.CalendarActivity.onCreate(CalendarActivity.java:20)
        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
        ... 11 more
java.lang.NullPointerException
        at com.metalex.calendarview.UI.Activities.CalendarViewActivity.onCreate(CalendarViewActivity.java:118)
        at net.aviascanner.aviascanner.ui.activities.CalendarActivity.onCreate(CalendarActivity.java:20)
        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
        at android.app.ActivityThread.access$1500(ActivityThread.java:117)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:130)
        at android.app.ActivityThread.main(ActivityThread.java:3687)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:507)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
        at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-10T07:49:12.883

我在清单中移动了屏幕方向的定义，它解决了我的问题。

# ant - ant 排除 dirset 中的目录

> ID：12676415
> 
> 赞同：0
> 
> 时间：2012-10-01T15:35:46.297
> 
> 标签：ant, ant-contrib

我正在`foreach`对根目录下的所有目录进行循环。

我想排除所有名为“src”和“bin”的目录。

如何从结果中排除这些目录？

根目录中有多个子目录，子目录也可以包含子目录。我想浏览根目录下的所有目录，除了上面名字的目录。

我尝试了以下方法，但都没有奏效：

```
 <path>
            <dirset dir="../Apps/">
                <exclude name="*src*,*bin*"/>
            </dirset>
        </path> 
```

* * *

```
 <path>
            <dirset dir="../Apps/">
                <exclude name="**/src*,**/bin*"/>
            </dirset>
        </path> 
```

* * *

```
 <path>
            <dirset dir="../Apps/">
                <exclude name="**/src/**,**/bin/**"/>
            </dirset>
        </path> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:53:06.440

这似乎按预期工作（Ant 1.8.2 和 ant-contrib 1.0b3）：

```
<target name="test">
    <foreach target="echo-folder-name" param="folder">
        <path>
            <dirset dir="../Apps/">
                <exclude name="**/bin/**" />
                <exclude name="**/src/**" />
            </dirset>
        </path>
    </foreach>
</target>

<target name="echo-folder-name">
    <echo>${folder}</echo>
</target> 
```

# python - Python：根据查找在行中查找字符串

> ID：12676416
> 
> 赞同：0
> 
> 时间：2012-10-01T15:35:45.767
> 
> 标签：python, dynamic, if-statement, find

是否可以在字符串中找到一个值，其中该值是 CSV 中的任何字段值之一。例如..

```
values.csv:

field1,field2,field3
1,abc,123
2,def,456
3,ghi,789
4,jkl,012,
..,..,.. 
```

因此，使用 CSV 中的字段（不会很大），我可以找到该行（已定义）是否包含任何这些值（即'abc|def|ghi|jkl'），所以以下结果将被期望：

```
'This string is abc' = TRUE
'This is a string' = FALSE
'This def is good' = TRUE 
```

等等

所以在这里我只是在寻找一个使用动态值的 if 语句，所以我可以将它放入我的代码中......我目前打印出来`line`只是作为校对阶段，所以我已经有了这个。

更新：

@korylprince 的回答在这里有所帮助，将函数稍微更改为以下内容：

```
def checkString(text):
    for search in searches:
        #print search <--- TESTING
        if search not in text:
            #print "FALSE" <--- TESTING
            test="FALSE"
        else:
            #print "TRUE" <--- TESTING
            test="TRUE"
            break
     #print test <--- TESTING
     .... 
```

干杯，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T15:43:49.587

```
# Your parsed csv file
csv = ['abc', '123', '2', 'def', '456', '3', 'ghi', '789', '4', 'jkl', '012']
lines = ['This string is abc', 'This is a string', 'This def is good']

for line in lines:
    print line, ':', any(word in line for word in csv) 
```

输出：

```
This string is abc : True
This is a string : False
This def is good : True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T15:56:51.290

这次使用模块`DictReader`的另一个变体：`csv`

```
import csv

lines = ['This string is abc', 'This is a string', 'This def is good']

with open(r'C:\Users\BioGeek\Desktop\values.csv') as f:
    reader = csv.DictReader(f)
    for row in reader:
        word = row[reader.fieldnames[1]] # only take words from the second column
        for line in lines:
            print "Is '{0}' in '{1}': {2}".format(word, line, word in line) 
```

产生输出：

```
Is 'abc' in 'This string is abc': True
Is 'abc' in 'This is a string': False
Is 'abc' in 'This def is good': False
Is 'def' in 'This string is abc': False
Is 'def' in 'This is a string': False
Is 'def' in 'This def is good': True
Is 'ghi' in 'This string is abc': False
Is 'ghi' in 'This is a string': False
Is 'ghi' in 'This def is good': False
Is 'jkl' in 'This string is abc': False
Is 'jkl' in 'This is a string': False
Is 'jkl' in 'This def is good': False 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T15:49:23.307

很难准确地理解你想要什么。

从你所说的，我认为你的意思是你有一个 csv 文件，values.csv。

从此 csv 文件中，您想要获取第二列中的所有值并将它们放入列表中。

然后对于您提供的任何字符串，您想查看其中一个值是否在字符串中。

尝试这个：

```
# open file and parse values
with open('values.csv') as f:                                               
    searches = [x.split(',')[1] for x in f.read().splitlines()]

# function to check string
def checkString(text):
    # iterate over searches and check each one
    for search in searches:
        if search in text:
            return True
    return False 
```

会有更有效的方法来做到这一点，但如果你只有几条记录和字符串（几百甚至几千），这应该没问题。

# jquery - 将 Success 变量传递给代码

> ID：12676419
> 
> 赞同：0
> 
> 时间：2012-10-01T15:36:13.110
> 
> 标签：jquery

如何将在 ajax 函数的成功回调中计算的变量传递给 document.ready ？

我有这个代码

```
 function loadActions()
        {
            var countDiv;

            $.ajax({
                type: "POST",
                cache: false,
                url:"modules/actions/actions.php",      

                success : function (data) {

                    $("#actions-container").html(data);
                    $('.action-details').hide();
                    countDiv = $('.action-tab-odd').length + $('.action-tab-even').length ;

                }

            });

            return countDiv;
        }

   $(document).ready(function(){

        var count = loadActions();

   }); 
```

但是计数总是未定义的。我怎样才能让它工作？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:39:43.123

你不能 -`$.ajax`是异步的。这意味着`$.ajax`即使您进行的调用需要很长时间，您在调用后的代码也会被处理。

退货显然不是一件可以做到的事情。

但是，您可以在使用您的值完成后调用回调`success`函数，以便对其进行处理。或者直接在你的`success`方法中使用它。如果您直接需要数据，请不要使用`$.ajax`和创建正确的代码服务器端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T15:42:10.643

此代码是异步的，因此您会得到延迟的结果。与此同时，任务`var count = ...`已经完成。您需要一个设置变量的回调函数。

尝试这个：

```
var count;

loadActions(function(value){count = value}); 
```

和你的 loadActions 函数：

```
function loadActions(callback){
   ...

   success : function (data) {
      callback(countDiv); 
```

请参阅**[此处的示例](http://jsfiddle.net/poikl/dyVpz/)**（我用超时替换了调用，但实际上是相同的）

如果这不符合您的目的，您仍然可以将 ajax 请求切换为同步：

```
$.ajax({
    async = false
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T15:39:01.503

这是异步调用，ready 的执行可能在调用成功方法之前完成，因此创建一个新函数并将成功的值传递给该函数

```
success : function (data) {

       $("#actions-container").html(data);
       $('.action-details').hide();
       countDiv = $('.action-tab-odd').length + $('.action-tab-even').length ;
       MyCounting(countDiv);

  }

function  MyCounting(count)
{

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T15:45:11.270

`$.ajax`默认情况下对请求的 url 进行异步调用，这意味着*可能会*在调用成功回调函数之前到达该`return countDiv;`行。

 *一种解决方案是通过添加`async = false`选项使该 url 调用同步：

```
$.ajax({
    // ...
    async = false,
    // ...
}); 
```

如果这适合您，请不要忘记 url 调用不再是异步的......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T15:51:12.747

尝试这样的事情：

```
function loadActions()
    {
        var countDiv; 
```

//您要考虑返回的内容 //下面，您将 ajax 对象作为函数结果返回。在您的示例中，您在一个不返回值的函数中返回一个超出范围的变量（您的成功函数不返回值）-> 见下文。

```
 return $.ajax({
            type: "POST",
            cache: false,
            url:"modules/actions/actions.php",      

            success : function (data) {
                $("#actions-container").html(data);
                $('.action-details').hide();
                return $('.action-tab-odd').length + $('.action-tab-even').length ;
            },
            error: function (){
                return false;
            }

        });
    } 
```

//如果你不想在ajax调用中检查错误，你可以省略错误调用，并且在成功语句的return之前，你可以包含一个条件来检查$('.action-tab-奇数') 值设置正确 - 类似于：

```
if(typeof $('.action-tab-odd').length !== "undefined" || $('.action-tab-odd').length !== 0)
  {
     return false;
  } 
return $('.action-tab-odd').length + $('.action-tab-even').length 
```

//然后在document.ready上

```
$(document).ready(function(){

        if(loadActions()){
            var count=loadActions();
            console.log(count);
        }

         }) 
```

还有其他方法可以做到这一点，利用 $.Deferred （我自己一直在努力解决这个问题），但这种方式似乎最接近你想要完成的事情。*

# model-view-controller - 将数据传递给另一个控制器

> ID：12676420
> 
> 赞同：1
> 
> 时间：2012-10-01T15:36:13.333
> 
> 标签：model-view-controller, magento

我需要将产品 ID 从购物车传递到自定义控制器，例如 http:// *** */catalogsearch/filter/results?product={ID}

我不知道如何使用 magento 助手等传递数据 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:18:57.570

我从您的问题中假设您正在从一个控制器重定向到另一个控制器并希望传递查询参数？

语法是：

```
$params = array('key' => 'value');
$this->_redirect('frontname/controlller/action', array('_query' => $params)); 
```

**编辑**

要回答评论中关于如何从模板中获取这些参数的问题：

首先，我建议不要这样做，您应该在控制器中接收参数。因此，您的自定义控制器应该负责接收任何参数。

无论如何，两种情况下的代码都是相同的：

所有参数…

```
$this->getRequest()->getParams() 
```

单参数…

```
$this->getRequest()->getParam('parameter_name') 
```

# flash - 优化 Flash/RTMFP 中可用带宽的质量

> ID：12676421
> 
> 赞同：2
> 
> 时间：2012-10-01T15:36:16.790
> 
> 标签：flash, actionscript, chat, rtmfp, qos

我正在使用 ActionScript 开发一个简单的一对一 P2P 视频聊天，并且我想确保在给定带宽的情况下为同行提供最佳视频质量。这表示：

1.  在聊天开始时根据可用带宽设置最佳质量
2.  通过降低质量来应对聊天期间的网络拥塞。

该任务类似于[动态流切换](http://www.adobe.com/devnet/adobe-media-server/articles/dynstream_advanced_pt1.html)，但 P2P 有其特点，使动态流方法不起作用。例如，在动态流切换中监控的 maxBytesPerSecond 指标在 P2P 中非常无用，其中接收 NetStream 的缓冲区大小设置为 0 以最小化延迟。

到目前为止，看起来 P2P 最可靠的 QoS 指标是 SRTT。在我在本地网络上进行的模拟测试中，当引入带宽限制时，带宽拥塞会使其达到 500 毫秒甚至更多。但是，它没有提示如何最好地调整 in 的值`bandwidth`以`Camera.setQuality(0, bandwidth)`响应拥塞。

我做了很多实验，但我仍然没有看到一个清晰简单的解决问题的方法。我还想知道如何在其他 RTMFP 聊天解决方案中解决这个问题（如果有的话）。

# ios - 自定义 HTTP 标头 UIWebview

> ID：12676423
> 
> 赞同：0
> 
> 时间：2012-10-01T15:36:27.557
> 
> 标签：ios, xcode, uiwebview, http-headers

我正在 Xcode 4.5 中为 iOS 开发一个应用程序，但我遇到了 UIWebView 的问题。我想设置一个标头（BASE64 代码）来跳过登录部分。当我尝试这个时，使用[NPWebView 项目](http://www.nomadplanet.fr/2010/09/custom-http-headers-for-every-request-made-in-uiwebviews/)时，webview 总是失败并出现如下错误：
**Error Domain=NSURLErrorDomain Code=-999“操作无法完成。（NSURLErrorDomain 错误 -999。）”UserInfo=0x6ace650 { NSErrorFailingURLKey="我的 URL", NSErrorFailingURLStringKey="我的 URL"}**

我希望有一个人可以帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:35:29.690

从您的描述中我不知道到底发生了什么，但根据我的经验，-999 通常来自请求被取消。

（参见[https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/doc/c_ref/NSURLErrorCancelled](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/doc/c_ref/NSURLErrorCancelled)）

# magento - 如何在 magento 产品页面上调用自定义 php 文件

> ID：12676424
> 
> 赞同：0
> 
> 时间：2012-10-01T15:36:26.577
> 
> 标签：magento

如果 getChildHtml('product_type_data') ?> 默认情况下直接映射到 catalog/product/view/type/simple.phtml，我如何映射到我自己的文件？如果我想创建一个文件，该文件会生成一个小图像以放置在产品页面上，在“可用性”下，我将如何告诉 magento 映射到我放置文件的位置？据我了解 getChildHtml('product_type_data') ?> 默认为文件路径：catalog/product/view/type/simple.phtml 那么如何自定义magento默认值并告诉它映射到我创建的自定义文件?

我可以做类似 getChildHtml('etc/etc/my-file.phtml') 的事情吗？>

本质上，我想做的是在我的网站的“可用性”下添加一个小图像（例如：[http](http://climbhigh.com/climbing/climbing-ropes/petzl-dragonfly-rope-8-2mm.html) ://climbhigh.com/climbing/climbing-ropes/petzl-dragonfly-rope-8-2mm.html ）说免费送货。只是试图找到最好的方法来做到这一点。

我希望我已经解释得足够好，如果没有，请告诉我，我会尝试解释更多。任何帮助或指导都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:14:57.350

代码`getChildHtml('product_type_data')`并不总是直接映射到模板文件`catalog/product/view/type/simple.phtml`。如果加载了布局句柄`PRODUCT_TYPE_simple`，即当前产品是简单产品，它只会映射到该文件。为了将模板更改为不同的模板，您需要更新布局中的模板属性。最简单的是，这可以通过编辑`app/design/frontend/base/layout/catalog.xml`和更改模板属性来实现。

```
<block type="catalog/product_view_type_simple" name="product.info.simple" as="product_type_data" template="your/new/path.phtml"> 
```

当然，编辑核心文件是个坏主意，因此您应该快速搜索如何通过 local.xml 或客户布局更新文件正确添加布局更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:27:40.177

我最终弄清楚我需要做什么。我只是想在我的产品详细信息页面中添加一个小图片，突出显示免费送货选项。我所要做的就是在 magento 的管理面板中创建一个静态块，然后进入 catalog>product>view.phtml 文件并插入：

getLayout()->createBlock('cms/block')->setBlockId('your_block_id')->toHtml(); ?>

它就像一个魅力！

感谢您的帮助

# php - jQuery TypeError: example("input#autocomplete").autocomplete 不是一个函数

> ID：12676425
> 
> 赞同：0
> 
> 时间：2012-10-01T15:36:28.130
> 
> 标签：php, javascript, jquery, jquery-ui, joomla

我已经尝试了很多以消除此错误但无法成功。当我在 localhost 上运行此脚本时，它工作正常但不适用于 Joomla 框架工作。代码如下：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<?php $viewFields=array('c++', 'java', 'php', 'coldfusion', 'javascript', 'asp', 'ruby'); ?>
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

  <script>
  var example=jQuery.noConflict();
  var arrayFromPHP = <?php echo json_encode($viewFields) ?>;
  example(document).ready(function() {
   example("input#autocomplete").autocomplete({
    source: arrayFromPHP
});
  });
  </script>
</head>
<body>
<center>
<p><img src="<?php echo JURI::base(); ?>images/search_1.png" border="0" alt="" />
<img src="<?php echo JURI::base(); ?>images/business_2.png" border="0" alt="" />
<img src="<?php echo JURI::base(); ?>images/review_3.png" border="0" alt="" />
</p>
</center>
<input id="autocomplete" />
</body>
</html> 
```

它给了我这个错误： -

--

```
[08:30:24.870] Use of getAttributeNode() is deprecated. Use getAttribute() instead. @ http://50.116.97.120/~amarhost/storage/media/system/js/mootools-core.js:343
[08:30:27.853] TypeError: example("input#autocomplete").autocomplete is not a function @ http://50.116.97.120/~amarhost/storage/index.php/component/storage/?action=war&Itemid=105:210 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:30:47.960

也许 noconflict 会清除添加到 jQuery 中的所有内容。尝试在加载 jQuery 之后放置 noconflict

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script>var example=jQuery.noConflict();</script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<script>
  var arrayFromPHP = <?php echo json_encode($viewFields) ?>;
  example(document).ready(function() {
     example("input#autocomplete").autocomplete({
        source: arrayFromPHP
     });
  });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T12:14:18.767

我想补充一点，可能包含多个 jquery 文件。也许来自其他包含的 php 文件。删除此夹杂物并仅保留在一个地方。最好的方法是将此 js 文件包含在一些 php 文件中，然后使用`include_once('jquery_include.php');`.

这可能会解决您的问题。我有同样的问题。这解决了我的问题。

像这样的东西。

jquery_include.php

```
 <script src="scripts/jquery.js" type="text/javascript"></script> 
```

然后将此 php 文件包含在所需的 php 文件中。

```
 include_once('jquery_include.php'); 
```

希望这有帮助。

# javascript - 使用javascript从Web sql中的结果集中删除行

> ID：12676426
> 
> 赞同：4
> 
> 时间：2012-10-01T15:36:30.240
> 
> 标签：javascript, html, web-sql

我知道来自 web sql 的结果集不是一个数组，更像是一个对象？我正在循环浏览一个结果集并加快速度，一旦找到它，我想删除一行。我试过“删除”和“拼接”，前者什么都不做，后者抛出一个错误。这是我正在尝试做的一部分，请注意第 18 行的删除：

```
function selectFromReverse(reverseRay,suggRay){
    var reverseString = reverseRay.toString();
    db.transaction(function (tx) {  
        tx.executeSql('SELECT votecount, comboid FROM counterCombos WHERE comboid IN ('+reverseString+') AND votecount>0', [], function(tx, results){
            processSelectFromReverse(results,suggRay);
        }); 
    }, function(){onError});
}

function processSelectFromReverse(results,suggRay){
    var i = suggRay.length;
    while(i--){
        var j = results.rows.length;
        while(j--){
            console.log('searching');
            var found = 0;
            if(suggRay[i].reverse == results.rows.item(j).comboid){
                delete results.rows.item(j);
                console.log('found');
                found++;
                break;
            }
        }       
        if(found == 0){
            console.log('lost');
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T23:14:24.030

实际上，您使用 DELETE sql 命令从数据库中删除记录。例如：

```
tx.executeSql('DELETE FROM counterCombos WHERE comboid = ?', [comboid], success, error); 
```

`processSelectFromReverse`可以修改为包括`tx`作为输入

```
processSelectFromReverse(results,suggRay,tx) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:54:15.260

[Web SQL 已经从 HTML5 处理](http://www.w3.org/TR/webdatabase/)中删除了将近 2 年，并且不受支持。[Web Storage](http://www.w3.org/TR/webstorage/)和[Indexed DB](http://www.w3.org/TR/IndexedDB/)已取而代之。

您删除对象的语法：`delete object;`是正确的。它在 JavaScript 中不经常使用，但我已经使用过它，这是正确的用法。

使用 web-storage（通常称为本地存储），您将实例化一个`localStorage`带有 method 的对象，该对象`removeItem(item key)`已经内置。

您可以在上面的 webstorage 链接中查看更多信息，或前往[此处查看教程](http://mobile.tutsplus.com/tutorials/mobile-web-apps/browser-storage/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T16:11:04.737

如果您关心的是 IOS 或 Android，则制作一个原生包装的应用程序将允许您创建一个 javascript 界面。通过这个界面，您可以访问（对于 android）sqlite 并创建一个不错的、可查询的解决方案。缺点是这需要人们下载您的应用程序而不是访问站点。

[http://caniuse.com/indexeddb](http://caniuse.com/indexeddb)

indexeddb 支持的增长相当缓慢。使用适当的编码风格，您可能会以相当可观的速度使用本地存储（如上述评论中所述）。

# jquery - 重新绑定取消绑定的单击

> ID：12676427
> 
> 赞同：0
> 
> 时间：2012-10-01T15:36:31.337
> 
> 标签：jquery, unbind

我正在使用这个库，它允许您创建一个更优雅的警报框（您甚至可以使用图像！）；我将它与点击功能一起使用，它可以工作！一个漂亮的容器打开一个关闭按钮，太棒了！我注意到，如果您碰巧在分配的链接上多次单击，它会一直触发。因此，多个图像开始传播。我使用了 unbind 方法，但它永久取消了链接（直到刷新等）。

我很惊讶图书馆没有弥补这个小问题，所以我想知道你是否可以在关闭图像窗口时重新绑定点击，让它从头开始。

```
$(".shopFrag").click(function(){
  Messi.img("_images/wishlist.jpg");                              
  $(".shopFrag").unbind('click');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:41:59.367

已经有一个关于这个主题的线程打开了。如果您有兴趣，请关注并阅读给出的解决方案：

[取消绑定（'click'）后如何“重新绑定”点击事件？](https://stackoverflow.com/questions/2593195/how-do-i-rebind-the-click-event-after-unbindclick?rq=1)

# c# - 在 C# 中从数据库中获取标签文本

> ID：12676429
> 
> 赞同：0
> 
> 时间：2012-10-01T15:36:39.677
> 
> 标签：c#

```
 private void button5_Click(object sender, EventArgs e)
        {
            SqlConnection conn = new SqlConnection("Data Source=MAZI-PC\\PROJECTACC;Initial Catalog=programDB;Integrated Security=True");
            SqlCommand cmd = new SqlCommand("select label_sh from label_text where label_form='2' and label_form_labelID='1'", conn);
            conn.Open();
            label1.Text = cmd.ExecuteReader().ToString();
            conn.Close();

            SqlConnection conn1 = new SqlConnection("Data Source=MAZI-PC\\PROJECTACC;Initial Catalog=programDB;Integrated Security=True");
            SqlCommand cmd1 = new SqlCommand("select label_sh from label_text where label_form='2' and label_form_labelID='2'", conn1);
            conn1.Open();
            label2.Text = cmd1.ExecuteReader().ToString();
            conn1.Close();

            SqlConnection conn2 = new SqlConnection("Data Source=MAZI-PC\\PROJECTACC;Initial Catalog=programDB;Integrated Security=True");
            SqlCommand cmd2 = new SqlCommand("select label_sh from label_text where label_form='2' and label_form_labelID='3'", conn2);
            conn2.Open();
            label3.Text = cmd2.ExecuteReader().ToString();
            conn2.Close();
        } 
```

我正在用 C# 开发一个小项目...使用 Visiual Studio 2010...我想从数据库中获取标签文本，以便使用按钮更改用户界面语言...我编写了这段代码，但有一个问题在 SQLDATAREADER 中

在标签文本部分它显示 System.Data.SqlClient.SqlDataReader

我无法修复，你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:39:43.747

你可以使用[ExecuteScalar()](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)

```
label3.Text = (string) cmd2.ExecuteScalar(); 
```

如果要使用 ExecuteReader，则必须先存储阅读器，然后对其调用 Read 并使用 reader.GetString(0); 获取它的值；

# iphone - 变量不是字符串

> ID：12676431
> 
> 赞同：0
> 
> 时间：2012-10-01T15:36:54.397
> 
> 标签：iphone, objective-c

我在 Xcode 中创建了一个字符串，如下所示：

```
@property (nonatomic, retain) NSString *lati; 
```

我也合成了。。。

现在在我的 viewLoad 中，我通过这个函数得到了我的纬度：

```
- (void)locationManager:(CLLocationManager *)manager
didUpdateToLocation:(CLLocation *)newLocation
       fromLocation:(CLLocation *)oldLocation {
    int degrees = newLocation.coordinate.latitude;
    double decimal = fabs(newLocation.coordinate.latitude - degrees);
    int minutes = decimal * 60;
    double seconds = decimal * 3600 - minutes * 60;
    lati = [NSString stringWithFormat:@"%d° %d' %1.4f\"",
                 degrees, minutes, seconds];
    //latLabel.text = lat;
    degrees = newLocation.coordinate.longitude;
    decimal = fabs(newLocation.coordinate.longitude - degrees);
    minutes = decimal * 60;
    seconds = decimal * 3600 - minutes * 60;
    longi = [NSString stringWithFormat:@"%d° %d' %1.4f\"",
                   degrees, minutes, seconds];
} 
```

后来我想将一些字符串保存到我的 slite3 数据库中，但我得到了一个 Bad_Access，因为我的 Lati 字符串没有正确设置，但我不知道为什么......这是我的 SaveToDB 方法：

```
if (sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK) {
    NSString *insertSQL = [NSString stringWithFormat:@"INSERT INTO DATEN(download, upload, ping, comment, date, network, latitude, longitude) VALUES (\"%@\", \"%@\", \"%@\",\"%@\", \"%@\",\"%@\", \"%@\",\"%@\")",topDownloadLabel.text, topUploadLabel.text, pingLabel.text, Comment, string, WlanOrUmts, lati, longi]; 
```

我得到了 Bad_Access。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T15:54:46.610

您使用的是`iVar`而不是`property`，请尝试

```
self.lati = … 
```

而是……</p>

编辑：对不起，我在写答案和打电话的同时错过了评论；-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:36:53.313

现在一切都很好，将我的字符串保存到数据库中，但在我的下一步中，我想从我的数据库中读取字符串......一切都很好......

```
-(NSMutableArray *) daten{
daten = [[NSMutableArray alloc] initWithCapacity:100];
@try {
    NSFileManager *fileMgr = [NSFileManager defaultManager];
    NSString *dbPath = [self getDBPath];
    BOOL success = [fileMgr fileExistsAtPath:dbPath];
    if(!success)
    {
        NSLog(@"Cannot locate database file '%@'.", dbPath);
    }
    if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
    {
        NSLog(@"An error has occured: %s", sqlite3_errmsg(db));

    }

    const char *sql = "SELECT * FROM  Daten";
    if(sqlite3_prepare(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK)
    {
        NSLog(@"Problem with prepare statement:  %s", sqlite3_errmsg(db));
    }else{

        while (sqlite3_step(sqlStatement)==SQLITE_ROW) {
            Daten * infos = [[Daten alloc] init];
            infos.download = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,1)];
            infos.upload = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,2)];
            infos.ping = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,3)];
            infos.comment = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,4)];
            infos.date = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,5)];
            infos.type = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,6)];
            infos.lati = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,7)];
            infos.longi = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,8)];

            [daten addObject:infos];
        }
    }
}
@catch (NSException *exception) {
    NSLog(@"Problem with prepare statement:  %s", sqlite3_errmsg(db));
}
@finally {
    sqlite3_finalize(sqlStatement);
    sqlite3_close(db);

    return daten;
}
} 
```

但是如果我想将这些值传递给我的 prepareForSegue 方法中的下一个视图，我会得到一个 Bad_Access：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([segue.identifier isEqualToString:@"showDetails"])
{
    @try {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        int storyIndex = [indexPath indexAtPosition: [indexPath length] - 1];
        Daten *date = [[Daten alloc] init];
        date = [daten objectAtIndex: storyIndex];
        UINavigationController *navController = (UINavigationController*)[segue destinationViewController];
        DetailViewController *eventsController = [navController topViewController];
        [eventsController setDownload:date.download];
        [eventsController setUpload:date.upload];
        [eventsController setPing:date.ping];
        [eventsController setComment:date.comment];
        [eventsController setNetwork:date.type];
        //NSLog(@"The content of arry is%@",daten);
        [eventsController setDate:date.date];
        UINavigationController *navigationController = segue.destinationViewController;
        DetailViewController *DetailsViewController = [[navigationController viewControllers] objectAtIndex:0];
        DetailsViewController.delegate = self;

    }
    @catch (NSException *exception) {
        NSLog(@"%@", exception);
    }
    @finally {

    }
        }
} 
```

但仅在 date.date 或 date.type....

# sql-server - 使用 SQL Server 处理大型数据集

> ID：12676433
> 
> 赞同：2
> 
> 时间：2012-10-01T15:36:57.650
> 
> 标签：sql-server, database, logging, sql-server-2008-express, large-data

我正在寻找管理大量日志文件的数据集。我试图保持每月平均 150 万个新事件。我过去使用过访问，尽管它显然不是为了这个，并且管理数据集是一场噩梦，因为我不得不将数据集分成几个月。

在大多数情况下，我只需要过滤事件类型并计算数量。但在我在数据导入方面做大量工作之前，我想看看是否有人可以验证这个 SQL Server 是一个不错的选择。是否有我应该避免的条目限制和存档条目？有存档条目的方法吗？

另一部分是我正在从多个来源输入日志，有这么多条目，将它们全部放入同一个表中是否明智，或者每个来源都应该有自己的表，以加快查询速度？

* * *

编辑...
将没有连接，大约有 10 列。数据将通过视图过滤，我很想看看基于一个或多个列过滤的选择查询的结果是否具有合理的响应时间？创建一组视图是否会加快频繁查询的速度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T16:25:53.513

以我的经验，SQL Server 是一个很好的选择，你绝对可以期待 SQL Server 比 MS-Access 更好的性能，通常有更多的优化方法可供你使用。

正如您所说，我可能会继续将这些东西放入 SQL Server Express 中，希望安装在您可以使用的最好的机器上（尽管您确实提到了只有 2GB 的 RAM）。使用一个表，只要它只代表一件事（我认为飞行员的飞行日志和软件错误日志不会在同一个“日志”表中，作为一个荒谬的人为示例）。检查你的表现。如果这是一个问题，请继续使用适用于您的 SQL Server 版本的任意数量的优化技术。

以下是我最初可能会这样做的方式：

如果您在日志表上使用 PK，则使用非聚集主键创建表——我通常使用[标识列](http://www.simple-talk.com/sql/t-sql-programming/identity-columns/)来为我提供有保证的事件顺序（与重复的日期时间不同）并显示可能的日志插入失败（缺少标识）。在主日期时间列上设置一个[聚集索引](https://stackoverflow.com/questions/11787797/should-every-user-table-have-a-clustered-index/11835746#11835746)（您提到您已经按月拆分成单独的表，所以我假设您也会以这种方式查询）。如果您有一些经常在此表上运行的查询，请务必查看它们，但不要期望通过简单地这样做来加快速度。您很可能希望查看[索引表](http://www.simple-talk.com/sql/learn-sql-server/sql-server-index-basics/)基于这些查询中的 where 子句。在这里，您将向 SQL Server 提供有效运行这些查询所需的信息。

如果您无法通过优化查询、索引、使用尽可能小的数据类型（尤其是在索引列上）和在体面的硬件上运行来获得所需的性能，那么可能是时候尝试[分区视图](http://msdn.microsoft.com/en-us/library/ms190019(v=sql.100).aspx)（这需要某种形式的持续维护）或[分区表](https://dba.stackexchange.com/questions/6697/sql-large-table-design)。不幸的是，SQL Server Express[可能会限制您](http://blogs.msdn.com/b/john_daskalakis/archive/2010/01/05/9943818.aspx)对分区的功能，您必须决定是否需要迁移到[功能更丰富](http://msdn.microsoft.com/en-us/library/cc645993.aspx#Scalability)的 SQL Server 版本。您始终可以使用 Enterprise 评估版或 Developer Edition 测试分区。

**更新：**

> > 在大多数情况下，我只需要过滤事件类型并计算数量。

由于过去的日志不会改变（有点像过去的销售数据），因此存储过去的汇总数字是这种情况下常用的策略。您可以创建一个表，该表仅存储您每个月的计数，并每月（或每周、每天等）插入一次新的计数，其中包含某种预定的作业。使用 datetime 列上的聚集索引，SQL Server 可以更轻松地从实时表中聚合当前月份的数字，并将它们添加到存储的聚合中，以显示总计数的当前值等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:50:18.343

对我来说，这听起来像是一张表，它需要对您将过滤的列集进行索引。限制通过视图访问通常是一个好主意，并确保您的索引真正被使用。

将每个源放入自己的表中将需要 UNION 稍后在您的查询中，并且 SQL-Server 不是很好地优化 UNION 查询。

“归档”条目当然可以手动完成，方法是将日期范围内的条目移动到另一个表（可以存在于另一个磁盘或数据库上），或者使用“分区”，这意味着您可以放置​​表的一部分（例如由日期范围定义）在不同的磁盘上。在规划 SQL-Server 安装时，您必须规划分区。

请注意，Express 版本限制为 4GB，因此每月有 150 万行，这可能是个问题。

我有一个像你这样的表，有 2000 万行，如果使用索引，查询甚至连接都没有问题。

# java - 如何在 Java EE 应用程序中锁定数据库记录？

> ID：12676437
> 
> 赞同：1
> 
> 时间：2012-10-01T15:37:01.657
> 
> 标签：java, jakarta-ee, jpa, transactions

我想编写一个 Java EE Web 应用程序，其中不同的用户使用数据库。用户可以开始编辑记录，然后保存更改或取消编辑。当用户正在编辑时，应该为其他用户锁定记录。它应该被锁定在数据库级别，因为还有其他非 Java 用户正在编辑同一个数据库，锁定他们处理的记录。

我了解一些基本的 Java + 数据库，但我不擅长锁定等多用户操作。在 Internet 上寻找一些示例，在我看来，Java EE 技术的每个“hello world”示例都至少介绍了另一种技术。为了访问数据库中的对象，我使用 JPA。要锁定记录，我可能需要事务，这带来了 JTA。要使用 JTA，我需要 JNDI。要使用所有这些对象，我可能还需要 EJB 和注入......此时我想知道这是否真的是解决问题的最简单方法，或者我是否错过了一些重要的东西。我不知道是否所有这些技术都是必要的（如果是，我*会*使用它们; 我只是想在我全部学习之前确定）。我只是看到我在网上找到的例子非常慷慨地介绍它们。

我想要一个简单的 Java EE 代码示例：

*   使用 JPA；

*   连接到“persistence.xml”文件中描述的数据库；

*   有一个`MyObject`具有属性`id`和的类`name`，存储在`MYOBJECT`表中；

*   有一个方法（例如，从 JSP 页面调用），该方法在数据库级别锁定对象`id = 42`（因此有权访问同一数据库的非 Java 用户也无法修改它），或者如果记录已被另一个锁定，则显示错误用户（另一个 Java 用户或非 Java 用户）；

*   有另一个方法（例如，从另一个 JSP 调用），它要么将 更新`name`为指定值并释放锁，要么在提供空字符串时释放锁。

对于您在解决方案中引入的每项新技术，我想听听您为什么使用它的简短解释。此外，该技术是否需要我安装新库、创建或修改配置文件、编写附加代码等。（调用方法的 JSP 文件不是必需的；我对与数据库相关的部分感兴趣。）

（另一个细节：[这里](https://stackoverflow.com/questions/3078245/java-difference-betwen-usertransaction-and-entitytransaction)描述了EntityTransaction和UserTransaction之间的区别。如果我理解正确的话，只有当我使用多个数据库时才需要JTA。如果我只使用一个具有不同模式的Oracle数据库，是否也需要？如果是，请使用 JTA 编写示例代码。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T14:23:08.987

1）如果你想锁定数据库中的记录，你需要一种叫做**悲观锁**的东西。记住此关键字并将其用于进一步的谷歌搜索。简单地说，悲观锁意味着*真正*锁定数据库中的记录。这意味着如果您的 Java 应用程序进行了悲观锁定，则记录*确实*被锁定；所以即使其他一些非Java程序访问同一个数据库，记录也会被锁定，他们不能修改它。

另一方面，所谓的乐观锁多是假装锁。这大概是一种“我们*很可能*无论如何都不需要锁定这条记录，所以我们不会真正锁定它，*如果*发生了不好的事情，那么我们会在之后*尝试*解决问题”的方法。这实际上是有意义的并提高了性能，但仅在这种方法背后的假设为真的情况下；那里的冲突真的很少见，而且你以后真的可以解决问题。除非您很好地理解它（您似乎不理解），否则不要使用它。

2) JPA 是一种使用具有事务和东西的数据库的统一方法，它还为您将对象映射到表。这可能就是你想要的。

JTA 是相同的东西，加上*在许多数据库上使用事务*的统一方法，因此它比 JPA 更强大，但这意味着它具有*您*并不真正需要的附加功能。另一方面，为了使用这些超级大国，你需要付出一些代价，比如失去启动和随心所欲的交易的能力。服务器将根据服务器的需要为您管理事务。如果您完全了解它的工作原理，那么您就知道这是否符合您的需求；但如果你不这样做，那么你宁愿避免它。您的开发环境可能会为您提供 JTA 作为默认选项，但这只是因为它认为您要编写 Skynet。通过不使用 JTA，您也不必使用 JNDI、EJB 和许多其他与天网相关的技术。

3) 听完之后，现在是你做功课的时候了。因为现在你知道该做什么了。阅读“javax.persistence”API 文档。

您可以使用带注释的 Java 类来表示您的数据库表；或者你可以使用老式的 SQL 查询；或两者兼而有之，如您所愿。您可以使用它们中的任何一个来锁定和释放记录。锁必须在事务内部，因此如果要保留锁，则必须保留事务。

* * *

## 回答 #2

> 赞同：-11
> 
> 时间：2012-10-01T16:14:00.720

我们不会为您解决这个问题。你要求一切。您需要自己编写代码，但这里是 JPA 锁定的链接。

提示：使用`@Version`

阅读此处了解有关[JPA 锁定的信息](http://en.wikibooks.org/wiki/Java_Persistence/Locking)

# c# - 如何将xmldocument保存到流中

> ID：12676441
> 
> 赞同：15
> 
> 时间：2012-10-01T15:37:10.363
> 
> 标签：c#, xmldocument, xmlreader

我已经编写了代码来解析我的 xml 文件，`XmlReader`所以我不想重写它。我现在已经为程序添加了加密。我有 encrypt() 和 decrypt() 函数，它们采用 xml 文档和加密算法。我有一个使用 xml 阅读器来解析文件的函数，但现在有了 xml 文档，我不确定如何创建 xmlreader。

问题是如何将我的 xml 文档保存到流中。我敢肯定这很简单，但我对流一无所知。

```
XmlDocument doc = new XmlDocument();
        doc.PreserveWhitespace = true;
        doc.Load(filep);
        Decrypt(doc, key);

        Stream tempStream = null;
        doc.Save(tempStream);   //  <--- the problem is here I think

        using (XmlReader reader = XmlReader.Create(tempStream))  
        {
            while (reader.Read())
            { parsing code....... } } 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-01T15:40:58.573

你可以试试`MemoryStream`上课

```
XmlDocument xmlDoc = new XmlDocument( ); 
MemoryStream xmlStream = new MemoryStream( );
xmlDoc.Save( xmlStream );

xmlStream.Flush();//Adjust this if you want read your data 
xmlStream.Position = 0;

//Define here your reading 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T15:43:44.873

写入文件：

```
 static void Main(string[] args)
    {
        XmlDocument doc = new XmlDocument();
        doc.LoadXml("<FTPSessionOptionInfo><HostName>ftp.badboymedia.ca</HostName></FTPSessionOptionInfo>");

        using (StreamWriter fs = new StreamWriter("test.xml"))
        {
            fs.Write(doc.InnerXml);
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-09T15:16:08.530

我意识到这是一个老问题，但认为值得从这个[不错的小博客文章](https://blogs.msdn.microsoft.com/xmlteam/2009/03/31/converting-from-xmldocument-to-xdocument/)中添加一个方法。这排除了一些性能较差的方法。

```
private static XDocument DocumentToXDocumentReader(XmlDocument doc)
{
    return XDocument.Load(new XmlNodeReader(doc));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-31T09:15:30.333

尝试这个

```
 XmlDocument document= new XmlDocument( );
    string pathTmp = "d:\somepath";
    using( FileStream fs = new FileStream( pathTmp, FileMode.CreateNew ))
    {
      document.Save(pathTmp);
      fs.Flush();
    } 
```

# javascript - javascript：具有继承的基础对象中变量的行为

> ID：12676442
> 
> 赞同：3
> 
> 时间：2012-10-01T15:37:12.290
> 
> 标签：javascript

```
function Resource(){ 
    var id = '';

    this.getId = function(){
        return id;
    }

    this.setId = function(value){
        id = value;
    }
}

function Model(){ } 
Model.prototype = new Resource(); 
```

为了测试上面的代码，我有以下内容：

```
var m1 = new Model();
m1.setId("blah");
alert("m1 = " + m1.getId());

var m2 = new Model();
m2.setId("blahblah");
alert("m2 = " + m2.getId());

alert("m1 = " + m1.getId()); 
```

我希望收到以下警报：`m1 = blah, m2 = blahblah, m1 = blah`.

但是，正在显示以下内容：`m1 = blah, m2 = blahblah, m1 = blahblah`。

我已经编写了上面的代码作为实验，以便我可以开始理解 JavaScript 中的继承。也许我对应该显示的内容的期望是由于我的 Java/C# 背景。显然，创建的每个新模型对象共享资源中定义的相同`id`变量。为什么是这样？

我怎样才能写这个，以便每个新模型都可以拥有自己的独特`id`性（除了显而易见的 - 在模型中定义）？

顺便说一句，我故意将 id 定义为`var id`而不是`this.id`，因为我正在寻找私有变量行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T15:41:57.680

原型对象在所有实例之间共享。

因为`id`变量属于`Resource`构造函数，并且因为`prototype`of`Model`是 的单个实例`Resource`，所以所有`Model`实例都使用该单个实例，因此是同一个变量。

对于每个`Model`实例都有自己的`id`变量，您需要在构造函数以及访问器方法中创建`id`变量。`Model`

```
function Model() {
    var id = '';

    this.getId = function(){
        return id;
    }

    this.setId = function(value){
        id = value;
    }
} 
```

实现此目的的另一种方法是`Resource`使用实`Model`​​例作为上下文来调用。这是使用`.call`或`.apply`这样完成的：

```
function Model() {
    Resource.apply(this);
} 
```

这将调用该`Resource`函数，该函数将创建`id`变量及其访问器方法，但访问器将分配给`Model`实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:42:18.913

这只是一个范围问题，我指定我们正在谈论`this.id`而不是仅仅`id`在你的 get / set 方法中，它工作得很好：

```
this.getId = function(){
  return this.id;
}

this.setId = function(value){
  this.id = value;
} 
```

这是一个小提琴：http: [//jsfiddle.net/thewebguy/zHDwC/](http://jsfiddle.net/thewebguy/zHDwC/)

# java - Maven 是否记得它的状态，以便我可以轻松地重新运行上一个命令？

> ID：12676447
> 
> 赞同：2
> 
> 时间：2012-10-01T15:37:33.630
> 
> 标签：java, maven, build, maven-3

我正在使用 Maven 多模块项目。当我运行 maven 并且其中一个模块失败时，我收到错误消息，然后是以下行

```
After correcting the problems, you can resume the build with the command
    mvn <goals> -rf :my.module.name 
```

Maven有任何状态吗？是否可以运行

```
 mvn <goal> `start from where we left off` 
```

我问的原因是我的一些模块名称很长。我可以从 cmd 提示符复制，但我想要一个更快/更短的命令。通常节省几秒钟可能看起来不多，但在我使用 maven 的过程中，它可以为我节省很多。

问题是

*   Maven保持状态吗？
*   如果是这样，我可以从我离开的地方快速重新运行吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:48:23.283

不，但是您可以进入各个模块并构建它们 - 这本质上是 maven 所做的，您只需要以正确的顺序遍历它们，否则您可能会得到令人困惑的结果（即旧的依赖模块构建等）。reactor 构建摘要向您显示 maven 将运行的模块构建顺序，并在构建开始时显示。

最后，尽管您总是需要从父模块进行完整构建才能构建最终工件。无论如何，从顶部运行通常是最容易的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:18:58.643

您可以使用[Maven Shell](http://ericmiles.wordpress.com/2010/03/23/intro-to-maven-shell/)在预加载的 shell 环境中执行 Maven 目标/阶段，从而显着减少构建时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:07:20.240

不——至少根据我的经验，Maven 不会保持其状态。如果您正在跑步，这一点尤其重要`mvn package`。虽然`mvn package`在多模块项目上运行会正常工作（所有模块都将能够使用前一个模块的生成的工件），但如果构建被中断，从构建中途恢复将导致工件未找到错误参考以前成功构建的模块。

解决这个问题的两种方法。重建一切，或使用`mvn install`要求 maven 安装到您的本地仓库（如果您还没有准备好部署）。在这种情况下，恢复构建不会失败，因为它会在本地存储库中找到以前构建的模块。

就像个人的烦恼一样，您在使用`-rf`标志时需要知道模块工件名称。Maven 将显示显示名称，它可能是也可能不是工件名称。 `-rf`需要工件名称。

# csv - 如果逗号（，）在引号中，则忽略 CSV 文件中的逗号（，）的最佳方法是什么？

> ID：12676452
> 
> 赞同：1
> 
> 时间：2012-10-01T15:37:43.897
> 
> 标签：csv, datatable

我有一个小程序来读取 CSV 文件以从中构建数据表。如果逗号在引号之间，则一项要求是忽略逗号（名称中的逗号等）。例子。

```
 Name, Age, Location
          "Henderson, David", 32, London
           John Smith, 19, Belfast 
```

该程序应忽略 Henderson 之后的逗号，并将 Henderson, David 视为一个字段。我当前的代码无法在最后添加额外的列来完成这项工作。那么我该如何实现呢？解决方案不应替换引号之间的逗号。谢谢。

我当前的代码。

```
 Public Function BuildDataTable() As DataTable

    Dim myTable As DataTable = New DataTable("MyTable")
    Dim i As Integer
    Dim myRow As DataRow
    Dim fieldValues As String()        
    Dim myReader As StreamReader = New StreamReader(_fileFullPath, Encoding.GetEncoding("iso-8859-1"))

    Try           
        fieldValues = myReader.ReadLine().Split(_seperator)
        'Create data columns accordingly
        If _hasheader = False Then
            For i = 0 To fieldValues.Length() - 1
                myTable.Columns.Add(New DataColumn("Column(" & i & ")"))
            Next
        Else
            'if the file has header, take the first row as header for datatable
            For i = 0 To fieldValues.Length() - 1
                myTable.Columns.Add(New DataColumn(fieldValues(i).Replace(" ", "")))
            Next
        End If

        myRow = myTable.NewRow

        If _hasheader = False Then
            For i = 0 To fieldValues.Length() - 1
                myRow.Item(i) = fieldValues(i).ToString
            Next
            myTable.Rows.Add(myRow)
        End If

        While myReader.Peek() <> -1
            fieldValues = myReader.ReadLine().Split(_seperator)
            myRow = myTable.NewRow
            For i = 0 To fieldValues.Length() - 1
                myRow.Item(i) = fieldValues(i).Trim.ToString
            Next

            If Not csv2xml.AreAllColumnsEmpty(myRow) = True Then
                myTable.Rows.Add(myRow)
            End If

        End While
    Catch ex As Exception                   
    End Try     
End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T20:06:31.390

您希望在 CSV 中使用双引号字符作为文本限定符。如果字段包含在文本限定符字符中，则文本限定符允许您在字段值中使用字段分隔符。

你可以自己编程，但那将是一个错误。有许多免费且功能强大的 CSV 解析器可以为您执行此操作。由于您使用的是 Visual Basic，因此您可以查看[`TextFieldParser`该类](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)。

您仍然需要编写将 CSV 的内容写入 DataTable 的代码。

我发现以下似乎可行：
[http ://www.vbcode.com/asp/showsn.asp?theID=13645](http://www.vbcode.com/asp/showsn.asp?theID=13645)

另一种选择是[`GenericParser`](http://www.codeproject.com/Articles/11698/A-Portable-and-Efficient-Generic-Parser-for-Flat-F)在[codeproject.com 上](http://www.codeproject.com/)。不要让文章中的代码是用 C# 编写的事实困扰您；您仍然可以在项目中引用 DLL (GenericParsing.dll) 并在 VB 中使用它。

这个解析器的好处是它包含一个方法，您可以使用它从 CSV 为您返回一个 DataTable。这是一个适用于您的示例数据的示例：

```
Using parser As New GenericParsing.GenericParserAdapter(CSV_FILE_FULLNAME)
    parser.ColumnDelimiter = ","
    parser.TextQualifier = """"
    parser.FirstRowHasHeader = True
    Dim dt As DataTable = parser.GetDataTable()
End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:48:48.973

我不熟悉 Visual Basic，但我认为您不应该使用`Split()`函数来拆分行。

```
fieldValues = myReader.ReadLine().Split(_seperator)    ' DO NOT do this 
```

相反，编写您自己的拆分函数，它会一个一个地读取每个字符。然后有一个标志来记录你是否在双引号之间。

* * *

**更新**

很抱歉，我对 VB 或 C# 知之甚少，无法编写可运行的代码片段。请阅读此伪代码（实际上它是 JavaScript）...希望它有用。

```
function split_with_quote(string, delimiter, quotation) {
    if (delimiter == null) delimiter = ',';
    if (quotation == null) quotation = '"';
    var in_quotation = false;
    var result = [];
    var part = '';
    for (var i = 0; i < string.length; i++) {
        var ch = string[i];
        if (ch == quotation)  in_quotation = !in_quotation;
        if (ch == delimiter && !in_quotation) {
            result.push(part);
            part = '';
        } else {
            if (ch != quotation) part += ch;
        }
    }
    return result;
}

a = 'abc,def,"ghi,jkl",123';
split_with_quote(a);    // ["abc", "def", "ghi,jkl"] 
```

# javascript - 使用 Javascript 限制 Words 中文本区域的长度？

> ID：12676453
> 
> 赞同：8
> 
> 时间：2012-10-01T15:37:45.713
> 
> 标签：javascript, jquery, textarea

我在 keyup 上有以下绑定，它会在超过 150 个字符时发出警报，但是您可以按 OK 并继续输入，然后继续按 OK。

我想将它们裁剪为 150 个单词（不是字符），如果他们在上面输入，请删除额外内容。但我似乎无法弄清楚该怎么做，我可以弄清楚字符。但不是言语。

```
jQuery('textarea').keyup(function() {
      var $this, wordcount;
      $this = $(this);
      wordcount = $this.val().split(/\b[\s,\.-:;]*/).length;
      if (wordcount > 150) {
        jQuery(".word_count span").text("150");
        return alert("You've reached the maximum allowed words.");
      } else {
        return jQuery(".word_count span").text(wordcount);
      }
    }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T16:09:36.480

```
/**
 * jQuery.textareaCounter
 * Version 1.0
 * Copyright (c) 2011 c.bavota - http://bavotasan.com
 * Dual licensed under MIT and GPL.
 * Date: 10/20/2011
**/
(function($){
    $.fn.textareaCounter = function(options) {
        // setting the defaults
        // $("textarea").textareaCounter({ limit: 100 });
        var defaults = {
            limit: 100
        };  
        var options = $.extend(defaults, options);

        // and the plugin begins
        return this.each(function() {
            var obj, text, wordcount, limited;

            obj = $(this);
            obj.after('<span style="font-size: 11px; clear: both; margin-top: 3px; display: block;" id="counter-text">Max. '+options.limit+' words</span>');

            obj.keyup(function() {
                text = obj.val();
                if(text === "") {
                    wordcount = 0;
                } else {
                    wordcount = $.trim(text).split(" ").length;
                }
                if(wordcount > options.limit) {
                    $("#counter-text").html('<span style="color: #DD0000;">0 words left</span>');
                    limited = $.trim(text).split(" ", options.limit);
                    limited = limited.join(" ");
                    $(this).val(limited);
                } else {
                    $("#counter-text").html((options.limit - wordcount)+' words left');
                } 
            });
        });
    };
})(jQuery); 
```

加载它，然后您可以使用以下命令使其工作：

```
$("textarea").textareaCounter({ limit: 100 }); 
```

[http://bavotasan.com/2011/simple-textarea-word-counter-jquery-plugin/](http://bavotasan.com/2011/simple-textarea-word-counter-jquery-plugin/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T16:19:00.140

如果您想阻止输入本身（当计数> 150 时），您可以执行以下操作：

*   使用 keypress 而不是 keyup
*   而不是`return alert()`先做一个`alert()`然后`return false;`

您可能还想添加更改（或模糊）事件处理程序来处理文本粘贴。

```
var maxWords = 150;
jQuery('textarea').keypress(function() {
    var $this, wordcount;
    $this = $(this);
    wordcount = $this.val().split(/\b[\s,\.-:;]*/).length;
    if (wordcount > maxWords) {
        jQuery(".word_count span").text("" + maxWords);
        alert("You've reached the maximum allowed words.");
        return false;
    } else {
        return jQuery(".word_count span").text(wordcount);
    }
});

jQuery('textarea').change(function() {
    var words = $(this).val().split(/\b[\s,\.-:;]*/);
    if (words.length > maxWords) {
        words.splice(maxWords);
        $(this).val(words.join(""));
        alert("You've reached the maximum allowed words. Extra words removed.");
    }
});​ 
```

[在这里提琴](http://jsfiddle.net/qPvch/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T16:11:25.107

检查[jQuery：实时计算单词](https://stackoverflow.com/questions/7422192/jquery-count-words-in-real-time) 和这个例子：http: [//jsfiddle.net/gilly3/YJVPZ/1/](http://jsfiddle.net/gilly3/YJVPZ/1/)

然后，如果你想减少多余的单词......你可以这样做：

```
var maxWords = 10;
if(finalCount > maxWords){
    $("#a").val(a.value.slice(0,-2)); // the -2 is to remove the extra space at the end
}; 
```

这是一个工作示例[http://jsfiddle.net/YJVPZ/80/](http://jsfiddle.net/YJVPZ/80/)

希望对您有所帮助，祝您好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T16:04:43.310

```
$("textarea").keyup(function(){
         var obj = $(this);
         var maxLen = 150;
         var val = obj.val();
         var chars = val.length;
         if(chars > maxLen){
              obj.val(val.substring(0,maxLen));
         }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T15:51:02.067

试试这个功能。`value`参数应该是您的 textarea 值。

```
jQuery('textarea').val();

function wordcount(value)
{
    value = value.replace(/\s+/g," ");
    var andchr = value.split(" & ").length - 1;
    var char_count = value.length;
    var fullStr = value + " ";                      

    //word count for regional language
    v = value.split(' ');
    var word_count1 = v.length;                         
    var cheArr = Array('@','.','"',"'",'_','-','+','=',';','&','*','\(','\)','{','}','[','}','|','\\','\,','/');                            
    for(i=0; i<=cheArr.length; i++)
    {
        word_count1 = word_count1 + value.split(cheArr[i]).length - 1;
    } 

    //word count for all languages
    var initial_whitespace_rExp = /^[^A-Za-z0-9]+/gi;
    var left_trimmedStr = fullStr.replace(initial_whitespace_rExp, "");                     
    var non_alphanumerics_rExp = rExp = /[^A-Za-z0-9]+/gi;

    var cleanedStr = left_trimmedStr.replace(non_alphanumerics_rExp, " ");                      
    var splitString = cleanedStr.split(" ");                        
    var word_count = (splitString.length - 1) + andchr;                          
    if(word_count1 > word_count)
    {
        word_count = word_count1;
    }                       
    if(value == '' || value == null || typeof(value) == 'undefined'){
        word_count = 0;
    }

    alert(word_count);

} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-01T15:49:44.033

注册这些事件：

```
$('textarea').on('paste cut keydown', function(){...}); 
```

# facebook-graph-api - Facebook Graph 查询搜索流的链接

> ID：12676457
> 
> 赞同：0
> 
> 时间：2012-10-01T15:38:06.667
> 
> 标签：facebook-graph-api

谁能告诉我是否可以在公共 Facebook 流中搜索特定 URL？如果是，FQL 是什么，我需要设置访问令牌吗？

**更新：**使用图形 api.... 甚至搜索链接表怎么样？我尝试使用图形 api 来搜索流表，但它并没有带来很好的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:40:59.443

[您可以使用未记录的 CONTAINS() 函数](http://facebook.stackoverflow.com/questions/12630401/documentation-for-contains-in-fql)在 FQL 中搜索几乎任何内容：

```
SELECT actor_id, created_time, message, attachment FROM stream WHERE CONTAINS('stackoverflow.com`) 
```

您需要小心使用它，因为在查询运行后将过滤结果*以*仅显示当前会话用户可见的项目。即使有很多项目符合您的条件，您也可能会返回空数据集。AFAIK，没有`visible_to_me`字段可以在 FB 可见性过滤器之前过滤帖子。

您始终需要访问令牌才能使用该`stream`表。

# matlab - matlab中hist和imhist的区别

> ID：12676459
> 
> 赞同：1
> 
> 时间：2012-10-01T15:38:16.493
> 
> 标签：matlab, image-processing, histogram, entropy

Matlab中的函数`hist`和函数有什么区别？`imhist`我有一个从图像加载的颜色级别值矩阵，`imread`需要使用直方图计算图像的熵值。
当使用`imhist`生成的矩阵时，除了最后一个（右下）包含一些高值数字（几千左右）之外，所有位置都包含零。因为该输出似乎是错误的，所以我尝试使用 hist 代替，`imhist`结果值要好得多，矩阵用看起来正确的值而不是零来实现。
但是，根据文档，`imhist`在这种情况下应该会更好，并且`hist`应该给出奇怪的结果..
不幸的是，我不擅长 Matlab，所以我无法为您提供更好的问题描述。不过，我将来可以添加一些其他信息。

所以我会尝试更好地解释我的问题..我有一个图像，我应该计算熵和其他一些值（保存该图像需要多少字节，..）。我写了这个函数，它工作得很好

```
 function [entropy, bytes_image, bytes_coding] = entropy_single_pixels(im)

im = double(im);

histg = hist(im);

histg(histg==0) = [];
nzhist = histg ./ numel(im);
entropy = -sum(nzhist.*log2(nzhist));

bytes_image = (entropy*(numel(im))/8);

bytes_coding = 2*numel(unique(im));

fprintf('ENTROPY_VALUE:%s\n',num2str(entropy));
fprintf('BYTES_IMAGE:%s\n',num2str(bytes_image));
fprintf('BYTES_CODING:%s\n',num2str(bytes_coding));
end 
```

然后我必须计算相同的值，但我必须从彼此下方的像素中进行“配对”。所以我只有一半的行和相同的列数。我需要将每个唯一的像素对表示为不同的数字，因此我将第一个像素对乘以 1000 并将第二个像素对添加到其中...随后我需要实际应用与第一个示例相同的函数，但这就是时间，当我从`imhist`函数中得到奇怪的数字时。使用 hist 时，似乎还可以，但我真的不认为这种行为是正确的，所以这一定是我在某个地方的错误。我实际上非常了解我想要做什么，或者至少我希望如此，但不幸的是，Matlab 让我觉得这一切都很难:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:53:52.253

hist-计算彩色图像中的直方图（每个像素出现的计数）......

imhist- 计算二维图像中的直方图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-13T18:41:13.107

如果您想使用，请`im2double`使用. 该函数要求双精度或单精度数据在 [0,1] 数据范围内，这就是为什么您会在直方图的最后一个 bin 中看到所有内容的原因。`double``imhist``imhist`

# excel - 基于是 否 值的带有颜色的单元格的条件格式

> ID：12676460
> 
> 赞同：2
> 
> 时间：2012-10-01T15:38:16.430
> 
> 标签：excel, excel-formula, excel-2010, background-color, conditional-formatting

我有一个充满 IP 地址的电子表格（“IP LIST”）。在该工作簿中，我有第二个电子表格代表 IP 地址部分，该部分属于 IP 地址的较大部分中的打印机（“打印机”）。我已经在“IP LIST”上确定了哪些 IP 地址是活动的，哪些是离线的。有了这些信息，我想做两件事：

1.  通过条件格式设置“IP LIST”上那些离线与在线的 IP 地址的颜色代码。

2.  将此格式复制到工作簿中的“打印机”工作表，以便在更新“IP LIST”工作表时，两个工作表都会一举更新。

我花了一上午的时间试图弄清楚如何做到这一点。我以前做过，但是，那是一年半前的事了。如果我没记错的话，我相信我使用了 Yes/No 类型格式，但我不记得具体细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T21:10:39.717

假设您的 IP 地址的综合列表在 A1:A100 中，并且 ColumnB 有`active`和`offline`和空白以适应，那么使用如下公式设置的两个规则应该突出显示该`IP LIST`表：

![SO12676460 示例](../Images/1a46ba5dfdb9a57a0ff4b7386f4d95fc.png)

安排在同一工作簿中的不同工作表中进行实时更新的最简单方法可能是重新创建包含 ColumnB 的`Printers`列表`IP LIST`（用于格式化）并删除任何非打印机。不过，这需要将 ColumnB 单元格`Printers`链接到`IP LIST`.

仍然需要单元格链接的替代方法是仅重复工作`Printers`表的 CF 规则。

# xslt - Delete Foreign Keys

> ID：12676461
> 
> 赞同：2
> 
> 时间：2012-10-01T15:38:18.720
> 
> 标签：xslt, xslt-2.0

I have DB tables stored in XML format that have a FK based on two columns (Table2 has FK to Table1 based on ID and TYPE).

```
 Table1.xml
    <Table>
       <Row>
          <ID>1</ID>
          <TYPE>A</TYPE>
          <CONFIG>Y</CONFIG>
          ...
       </Row>
       <Row>
          <ID>2</ID>
          <TYPE>A</TYPE>
          <CONFIG>Z</CONFIG>
          ...
       </Row>
       <Row>
          <ID>1</ID>
          <TYPE>B</TYPE>
          <CONFIG>X</CONFIG>
          ...
       </Row>
       <Row>
          <ID>3</ID>
          <TYPE>A</TYPE>
          <CONFIG>Z</CONFIG>
          ...
       </Row>
    </Table>

    Table2.xml
    <Table>
       <Row>
          <ID>1</ID>
          <TYPE>A</TYPE>
          ...
       </Row>
       <Row>
          <ID>2</ID>
          <TYPE>A</TYPE>
          ...
       </Row>
       <Row>
          <ID>1</ID>
          <TYPE>B</TYPE>
          ...
       </Row>
       <Row>
          <ID>3</ID>
          <TYPE>A</TYPE>
          ...
       </Row>
    </Table> 

```

I will have two XSLT files to delete rows in each XML file. Table2 will be processed first. I want to delete the row in Table2 where when joined with Table1 CONFIG=Z (ie, delete rows where (ID=2 and Type=A) and (ID=3 and Type=A), but I need to figure this out only knowing I want to delete records where CONFIG=Z). Table1 will then be processed to delete rows where CONFIG=Z, which I was able to figure out.

I think the XSLT that will be applied to Table2 needs to read in Table1 XML (xsl:variable name="table1Rows" select="document('Table1.xml')/Table/Row"/>). After that I'm lost on how to delete rows in Table2 where CONFIG=Z. I've tried several things based on examples I saw, but couldn't get anything to work.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:25:47.253

With XSLT 2.0 define a key and cross-reference the elements, then simply do an identity transformation to copy nodes plus a template that suppresses the copying for those `Row` elements where the key function call finds a Row in the other document with the CONFIG being `Z`:

```
<xsl:variable name="table1" select="doc('Table1.xml')"/>

<xsl:key name="r-by-id-and-type" match="Table/Row" use="concat(ID, '|', TYPE)"/>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* , node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="Row[key('r-by-id-and-type', concat(ID, '|', TYPE), $table1)/CONFIG = 'Z']"/> 
```

[edit] For completeness, I tested the following complete sample with both Saxon 9.4 as well as AltovaXML successfully:

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">

<xsl:variable name="table1" select="doc('table1.xml')"/>

<xsl:key name="r-by-id-and-type" match="Table/Row" use="concat(ID, '|', TYPE)"/>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* , node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="Row[key('r-by-id-and-type', concat(ID, '|', TYPE), $table1)/CONFIG = 'Z']"/>

</xsl:stylesheet> 
```

On request in comment I also add an XSLT 1.0 stylesheet:

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

<xsl:variable name="table1" select="document('test2012100102.xml')"/>

<xsl:key name="r-by-id-and-type" match="Table/Row" use="concat(ID, '|', TYPE)"/>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="Row">
  <xsl:variable name="this" select="."/>
  <xsl:for-each select="$table1">
    <xsl:if test="not(key('r-by-id-and-type', concat($this/ID, '|', $this/TYPE))/CONFIG = 'Z')">
      <xsl:copy-of select="$this"/>
    </xsl:if>
  </xsl:for-each>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T03:56:06.533

Martin's solution is correct, given the original question and should be accepted.

In reference to the OP's request for an additional XSLT 1.0 solution, here is a polyglot. This style-sheet, a minor variation of Martin's solution, works on XSLT 2.0 processors and probably most XSLT 1.0 processors.

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">

<xsl:variable name="table1" select="doc('table1.xml')"/>

<xsl:key name="r-by-id-and-type" match="Table/Row" use="concat(ID, '|', TYPE)"/>

<xsl:template match="@*|node()" name="ident">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template
  match="Row"
  use-when="number(system-property('xsl:version')) &lt; 2" priority="2">
    <xsl:variable name="row" select="." />
    <xsl:variable name="id-type" select="concat(ID, '|', TYPE)" />
    <xsl:for-each select="$table1">
      <xsl:if test="not( key('r-by-id-and-type', $id-type))">
        <xsl:for-each select="$row">
          <xsl:call-template name="ident" />
        </xsl:for-each>
      </xsl:if> 
    </xsl:for-each>
</xsl:template>

<xsl:template
  match="Row"
  use-when="number(system-property('xsl:version')) &gt;= 2" priority="1">
    <xsl:if test="not( key('r-by-id-and-type', concat(ID, '|', TYPE), $table1))">
      <xsl:call-template name="ident" />
    </xsl:if> 
</xsl:template>
</xsl:stylesheet> 
```

## Caveat

This style-sheet was not tested.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:16:09.893

The answers provided by Martin work and are probably the best solutions possible. For XSLT 1.0 I had come up with the following that seems to run faster, but is not as elegant. For this solution I knew that the only possible TYPE for CONFIG=Z is 'A'. (Note there could be a typo below since I'm running the XSLT on another machine and retyped it here with the mock column names/values.)

```
 <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"> 
         <xsl:variable name="table1_Z_rows" select="document('table1.xml')/Table/Row[CONFIG='Z']"/>
             <xsl:template match="Row">
                  <xsl:choose>
                       <xsl:when test="TYPE != 'A'">
                            <xsl:copy-of select="."/>
                       </xsl:when>
                       <xsl:otherwise>
                           <xsl:if test="not(ID = $table1_Z_rows/ID)">
                                <xsl:copy-of select="."/>
                           </xsl:if>
                       </xsl:otherwise>
                  </xsl:choose>
             </xsl:template>
        </xsl:stylesheet> 

```

# html - 网站的 HTML 或 ASP

> ID：12676466
> 
> 赞同：-8
> 
> 时间：2012-10-01T15:38:29.397
> 
> 标签：html, asp.net

我是一名电气工程师，有一些空闲时间，我决定用它来免费创建一个非营利性网站。我只知道 HTML 和 CSS，我想我会从 FatCow 或 GoDaddy 购买一些空间并在那里托管一个简单的网站。但最近人们警告我 HTML 网站很容易被黑客入侵，我应该改用 ASP.NET 编写代码。有人说 Wordpress 更安全。那么 HTML 真的那么不安全吗？

请有人可以告诉我如何进行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T15:44:08.103

恐怕你被严重误导了。

ASP.NET 使用 HTML（以及 CSS 和 JavaScript）来显示网页。不使用 HTML 就无法编写网页。

此外，HTML 是一种标记语言，而不是软件。它只描述网页的布局，因此 HTML 没有什么不安全的地方。

WordPress 也使用 HTML，因为 WordPress 是一个 Web 应用程序。您在浏览器、任何网站上看到的所有内容，无论是 WordPress、ASP.NET、Java、PHP、Django 还是其他任何网站，都使用 HTML 来显示页面。

不使用 HTML 就无法制作网页，HTML 没有什么不安全的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T15:50:37.410

一个纯静态的 HTML+CSS 站点是尽可能安全的。您将面临的安全风险将与将在您将托管您的站点的服务器中使用的软件有关，而不是在 HTML 和 CSS 本身上。

关于网络应用程序的安全性（如果您选择深入编程世界），无论您使用哪种语言，程序员都必须确保其安全。可以在此处阅读一些常见的安全指南：[https ://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project](https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project)

如果您想做一些更花哨的事情，带有评论等，并且以最小的努力，我会选择 Wordpress（只要确保它始终是最新的）。它有许多模板可供使用。

同时，尝试获取有关动态站点的更多信息，以便更好地掌握网络应用程序世界。

# c# - NHibernate 不尊重创建数字列的精度和比例（对于小数）

> ID：12676471
> 
> 赞同：5
> 
> 时间：2012-10-01T15:38:50.270
> 
> 标签：c#, sql-server, nhibernate, fluent-nhibernate

我有闲置的 FluentNHibernate-Mapping：

```
this.Map(x => x.Discount).Precision(8).Scale(2).Not.Nullable(); 
```

这是折扣实体中的属性：

```
public virtual Decimal Discount { get; set; } 
```

但是 NHibernate 正在创建的 Schema (for SQL-Server) 现在包含：

```
Discount NUMERIC(19, 0) not null, 
```

有人可以帮我吗，出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:10:40.730

我们在谈论什么版本的 FNH / SQL Server？使用 Precision() 和 Scale() 有什么特殊原因吗？鉴于减少数据库大小，没有什么明显的好处...我的建议是删除两者，让 NH 处理此属性并改用 getter / Formatstring。

# excel - Excel宏：查找列单元格而不激活它

> ID：12676474
> 
> 赞同：0
> 
> 时间：2012-10-01T15:39:09.500
> 
> 标签：excel, vba

我构建了一个函数来查找列：

```
Function findColumn(NameSheet As String, ColName As String)
findColumn = 0
Worksheets(NameSheet).Select
Sheets(NameSheet).Range("A1").Select
Do Until ActiveCell.Value = ""
    searchTerm = ActiveCell.Value
    If (LCase(ActiveCell.Value) = LCase(ColName)) Then
           findColumn = Mid(ActiveCell.Address, 2, 1)
           Exit Do
    End If
    ActiveCell.Offset(0, 1).Activate
Loop 
End Function 
```

这个功能有效！但它会激活其他工作表，我必须返回上一张工作表。结果不是无缝的，因为在函数搜索列地址时存在工作表转换故障。

有没有更好的方法来做到这一点？因为我多次使用这种方法，当每次点击单元格时出现故障时，我的搭档并不满意。

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T15:53:40.567

我相信这是一个可以按照您的建议工作的功能，因为它永远不会`.Selects`或`.Activates`您正在搜索的工作表，同时带回您想要的列字母。它也不会循环每个单元格，这可能非常低效。

此函数将返回列字母，而不是数字。如果你想要这个数字，请参阅上面 Daniel 的代码。

```
Function findColumn(NameSheet As String, ColName As String)

With Worksheets(NameSheet)

    Dim myRng As Range
    Set myRng = .Rows(1).Find(ColName, lookat:=xlWhole)

    If Not myRng Is Nothing Then

        findColumn = Split(myRng.Address, "$")(1)

    Else

        findColumn = "Column Not Found"

    End If

End With

End Function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T15:50:08.683

这是一种可能的方法，重要的是它根本不会改变工作簿的重点。假设它在第一行，这将返回搜索词的列号，如果没有找到则返回 0。如果`NameSheet`无效，弹出窗口会通知您并返回 0。

```
Function findColumn(NameSheet As String, ColName As String) As Long
    'Add Error checking to see if sheet Exists
    On Error Resume Next
        Dim sheetTest As String
        'Copy sheet name, just to see if the sheet is valid
         sheetTest = Sheets(NameSheet).Name
    'Check if sheet was found.
    If Err.Number <> 0 Then
        MsgBox "Sheet does not exist"
        Exit Function
    End If
        'Search the first column in the NameSheet for the ColName, and return 
        'the column number.
        findColumn = Sheets(NameSheet).Rows(1).Find(What:=ColName, LookIn:=xlFormulas, _
            LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
            MatchCase:=False, SearchFormat:=False).Column
End Function 
```

# c# - 检索 .NET Remoting 客户端的 IP 信息

> ID：12676476
> 
> 赞同：1
> 
> 时间：2012-10-01T15:39:18.803
> 
> 标签：c#, .net-4.0, .net-remoting

我需要获取通过 .NET Remoting TcpChannel 调用函数的客户端的 IP 地址。我发现[这篇](https://stackoverflow.com/questions/527676/identifying-the-client-during-a-net-remoting-invocation/527756)文章似乎正是我所需要的，但是，我不确定如何使用 app.config 文件来实现它，这是我的项目的要求。我在 MSDN 上找不到任何关于 app.config 文件在这种情况下是如何工作的好的文档，可能是因为 .NET Remoting 是一项遗留技术。有谁知道我如何使用 app.config 文件在 Kev 的答案的第二部分中实现配置代码？

非常感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:49:58.573

[这个](https://stackoverflow.com/a/527756/584676)答案为我创造了奇迹。我能够在 app.config 文件中实现这一点，如下所示：

```
<configuration>
   <system.runtime.remoting>
      <application>
         <channels>
            <channel ref="tcp" port="1234">
               <serverProviders>
                  <provider ref="clientinfo" />
                  <formatter ref="binary" />
               </serverProviders>
            </channel>
         </channels>
      </application>
      <channelSinkProviders>
         <serverProviders>
            <provider
               id="clientinfo"
               type="MyNameSpace.ClientInfoServerSinkProvider, MyAssemblyName" />
         </serverProviders>
      </channelSinkProviders>
   </system.runtime.remoting>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup></configuration> 
```

我将整个 serverProviders 元素添加到 tcp 通道，并添加了您看到的整个 channelSinkProviders 元素。其他一切都已经作为我们已经拥有的现有配置存在。

# jsf-2 - 如何添加 URL 片段 HtmlOutcomeTargetLink？

> ID：12676481
> 
> 赞同：1
> 
> 时间：2012-10-01T15:39:27.373
> 
> 标签：jsf-2, hyperlink, fragment-identifier

我想向`#top`a添加一个 URL 片段`HtmlOutcomeTargetLink`，但不知道如何。对于`HtmlOutputLink`我只使用以下内容：

```
 HtmlOutputLink link = new HtmlOutputLink();
      String urlWithFragment = url + "#top";
      link.setValue(urlWithFragment); 
```

如何实现这一点`HtmlOutcomeTargetLink`？

不幸的是，以下方法不起作用：

```
 HtmlOutcomeTargetLink link = new HtmlOutcomeTargetLink();
      String urlWithFragment = context.getViewRoot().getViewId() + "#top";
      link.setOutcome(urlWithFragment); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:43:35.307

`outcome`of `HtmlOutcomeTargetLink`(the )`<h:link>`只接受导航案例结果，而不是 URL。导航案例结果不支持 URL 片段。这些需要设置为单独的`fragment`属性。

```
link.setFragment("top"); 
```

### 也可以看看：

*   [`<h:link>`标签文档](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/link.html)

* * *

**更新**[`UIOutcomeTarget`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIOutcomeTarget.html)：等等，父类上没有设置器。我怀疑生成的代码中存在疏忽（有趣的是，它[在 Mojarra 快照文档](http://javaserverfaces-spec-public.java.net/nonav/snapshots/jsf-spec-2.0-20090304/javadocs/javax/faces/component/html/HtmlOutcomeTargetLink.html)和[MyFaces 测试用例](http://myfaces.apache.org/core20/myfaces-impl/xref-test/org/apache/myfaces/renderkit/html/HtmlLinkRendererTest.html)中提到过）。您应该能够直接在属性映射上设置它：

```
link.getAttributes().put("fragment", "top"); 
```

# sql - 用光标+联合+枢轴查询？

> ID：12676482
> 
> 赞同：2
> 
> 时间：2012-10-01T15:39:37.023
> 
> 标签：sql, cursor, pivot, union

我一直试图弄清楚如何解决这个问题，但没有成功。我有 2 张桌子：

1）问题

```
ID (pk)
QUES
ORD 
```

2）答案

```
ID (pk)
QUES_ID (fk)
SURV_ID (fk)
ANSW 
```

现在我需要创建一个视图，其中问题是列名，对于每个 SURV_ID，如果 ANSWERS 中没有条目，则视图中有一行答案为 NULL，如果有条目，则回答 ANSW。不确定是否可以使用 JOIN 来实现。

我正在考虑使用 CURSOR，然后对结果表进行 UNION，然后使用 PIVOT，但不确定这是最好的解决方案 + 我不知道如何通过循环进行联合...

```
DECLARE @survID int
DECLARE db_cursor CURSOR FOR
SELECT DISTINCT SURV_ID FROM ANSWERS ORDER BY SURV_ID
OPEN db_cursor
FETCH NEXT FROM db_cursor INTO @survID

WHILE @@FETCH_STATUS = 0
BEGIN
SELECT QUES
,ANSW , SURV_ID
FROM QUESTIONS a
left outer JOIN ANSWERS b ON a.ID = b.QUES_ID
WHERE ( SURV_ID = @survID OR SURV_ID IS NULL)
FETCH NEXT FROM db_cursor INTO @survID
END
CLOSE db_cursor
DEALLOCATE db_cursor 
```

……

更新：我面临的问题有点复杂，因为并非所有问题都有答案（在这种情况下，我很乐意显示 NULL），并且答案按 SURV_ID 分组

```
CREATE TABLE [QUESTIONS] (
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [QUES] [varchar](250) NOT NULL,
    [ORD] [int] NOT NULL,
CONSTRAINT [PK_QUESTIONS] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

INSERT INTO [QUESTIONS] values ('First Question', 1)
INSERT INTO [QUESTIONS] values ('Second Question', 2)

GO

CREATE TABLE [ANSWERS] (
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [SURV_ID] [int] NOT NULL,
    [QUES_ID] [int] NOT NULL,
    [ANSW] [varchar](500) NOT NULL,
CONSTRAINT [PK_ANSWERS] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO

ALTER TABLE [ANSWERS]  WITH CHECK ADD  CONSTRAINT [FK_ANSWERS_QUESTIONS] FOREIGN KEY([QUES_ID])
REFERENCES [QUESTIONS] ([ID])
GO

ALTER TABLE [ANSWERS]   CHECK CONSTRAINT [FK_ANSWERS_QUESTIONS]
GO

INSERT INTO [ANSWERS] ([SURV_ID],[QUES_ID],[ANSW]) VALUES (1,1,'Y')
INSERT INTO [ANSWERS] ([SURV_ID],[QUES_ID],[ANSW]) VALUES (1,2,'N')
INSERT INTO [ANSWERS] ([SURV_ID],[QUES_ID],[ANSW]) VALUES (2,1,'N')
INSERT INTO [ANSWERS] ([SURV_ID],[QUES_ID],[ANSW]) VALUES (3,2,'Y')
INSERT INTO [ANSWERS] ([SURV_ID],[QUES_ID],[ANSW]) VALUES (4,1,'Y')
INSERT INTO [ANSWERS] ([SURV_ID],[QUES_ID],[ANSW]) VALUES (4,2,'Y')
GO 
```

我想得到的是

```
[SURV_ID]          [First Question]          [Second Question]  
1                  Y                         N  
2                  N                         null  
3                  null                      Y  
4                  Y                         Y 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:50:14.153

看起来您在 SQL-Server 中工作，所以以下应该可以工作。如果您知道要转换的项目数，则可以对这些值进行硬编码：

```
select *
from
(
  select a.surv_id,
    a.answ,
    q.ques
  from QUESTIONS q
  left join ANSWERS a
    on q.ID = a.QUES_ID
) x
pivot
(
  max(answ)
  for ques in ([First Question], [Second Question])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/1e409/10)

如果不知道列数，那么可以使用动态sql：

```
DECLARE @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX)

select @colsPivot = STUFF((SELECT distinct  ',' 
                      + quotename(ques)
                    from QUESTIONS 
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select *
     from 
     (
        select a.surv_id,
          a.answ,
          q.ques
        from QUESTIONS q
        left join ANSWERS a
          on q.ID = a.QUES_ID
      ) x
      pivot
      (
        max(answ) 
        for ques in ('+ @colspivot +')
      ) p'

exec(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/1e409/12)

# ruby - 在 Debian Squeeze 64 位上安装 Webistrano

> ID：12676485
> 
> 赞同：2
> 
> 时间：2012-10-01T15:39:42.110
> 
> 标签：ruby, debian, gemfile, webistrano

我目前正在尝试在新安装的 64 位 debian 挤压机上安装 Webistrano，但我遇到了一些我无法解决的问题。

注意：本机是在 Xen 环境下创建的，我认为这不会影响程序，但提及它似乎很重要。

* * *

**程序：**

信息：

*   红宝石版本：`ruby 1.8.7 (2010-08-16 patchlevel 302) [x86_64-linux]`
*   Rails 版本：`Rails 2.3.11
*   路径修饰符：`/usr/lib/ruby/1.8:/var/lib/gems/1.8/bin`
*   Rails 环境：开发
*   已创建数据库
*   我相信 webistrano 的数据库设置是正确的 (user/pass/path_to_sock_file)

所以，这就是我所做的：

我首先为此类安装安装了“基础”包：

```
# apt-get install build-essential ruby rubygems libmysql-ruby libmysqlclient-dev libdbd-mysql-ruby mysql-server unzip rake 
```

然后我一直在下载项目并将其解压缩到 /usr/src 中。在为电子邮件/数据库设置复制和配置文件后（如[https://github.com/peritor/webistrano](https://github.com/peritor/webistrano)建议的那样），我继续安装项目所需的所有 gem：

```
bundle install 
```

此时，命令被卡住并且一个小时没有做任何事情。

我知道如果 Gemfile 很复杂，可能会发生这种情况，但对我来说似乎并非如此。（参见下面的 Gemfile）

```
# cat Gemfile
source "http://rubygems.org"

gem 'bundler', "~>1.0.10"
gem "rails", "2.3.11"
gem "mysql"
gem "erubis"
gem "rake"
gem "syntax", "1.0.0"
gem "capistrano", "2.6.0"
gem "open4", "0.9.3"
gem "exception_notification", "2.3.3.0"

group :test do
  gem "mocha", "0.9.8"
end 
```

所以决定继续，我手动安装了宝石，一旦完成就会给出：

```
# gem list *gems of Gemfile*
bundler (1.0.10)
rails (2.3.11)
mysql (2.8.1)
erubis (2.7.0)
rake (0.9.2.2)
syntax (1.0.0)
capistrano (2.6.0)
open4 (0.9.3)
exception_notification (2.3.3.0)
mocha (0.9.8) 
```

所以我相信一切都应该工作而不必运行：`bundle install`

这就是我最终尝试使用 rake 创建数据库结构的原因：

```
# rake db:migrate --trace
(in /usr/src/peritor-webistrano-a98ba6b)
rake aborted!
Bundler couldn't find some gems.Did you run `bundle install`?
/usr/src/peritor-webistrano-a98ba6b/config/../config/preinitializer.rb:18
/usr/src/peritor-webistrano-a98ba6b/config/boot.rb:28:in `load'
/usr/src/peritor-webistrano-a98ba6b/config/boot.rb:28:in `preinitialize'
/usr/src/peritor-webistrano-a98ba6b/config/boot.rb:10:in `boot!'
/usr/src/peritor-webistrano-a98ba6b/config/boot.rb:123
/usr/src/peritor-webistrano-a98ba6b/Rakefile:4:in `require'
/usr/src/peritor-webistrano-a98ba6b/Rakefile:4
/usr/lib/ruby/1.8/rake.rb:2383:in `load'
/usr/lib/ruby/1.8/rake.rb:2383:in `raw_load_rakefile'
/usr/lib/ruby/1.8/rake.rb:2017:in `load_rakefile'
/usr/lib/ruby/1.8/rake.rb:2068:in `standard_exception_handling'
/usr/lib/ruby/1.8/rake.rb:2016:in `load_rakefile'
/usr/lib/ruby/1.8/rake.rb:2000:in `run'
/usr/lib/ruby/1.8/rake.rb:2068:in `standard_exception_handling'
/usr/lib/ruby/1.8/rake.rb:1998:in `run'
/usr/bin/rake:28 
```

根据 rake 错误消息，显然有些宝石没有正确安装，这看起来很奇怪，但我猜他找不到它。

所以我用捆绑工具仔细检查：

```
# bundle check
Your Gemfile's dependencies could not be satisfied
Install missing gems with `bundle install`
# bundle show
Could not find gem 'mocha (= 0.9.8, runtime)' in any of the gem sources listed in your Gemfile. 
```

我被困在这里，我只是不知道如何继续。我在谷歌上搜索了 mocha 或 gemfile 问题，但没有发现太多相关性。

我希望一切都清楚易懂，因为这是我的第一篇文章。

感谢您的任何回复/提示，如果我设法发展，我会尽量让您了解最新情况！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-08T19:28:40.983

检查这些说明： [http ://www.gogolek.co.uk/blog/2012/10/web-application-deployment-webistrano-capistrano/](http://www.gogolek.co.uk/blog/2012/10/web-application-deployment-webistrano-capistrano/)

此外，我在干净的 debian 6 64 位上安装 mysql gem 时遇到问题，所以我不得不运行

```
$ apt-get install libmysqlclient-dev ruby-dev 
```

我最终安装了以下宝石

```
Using rake (0.8.7) 
Using activesupport (2.3.11) 
Using rack (1.1.6) 
Using actionpack (2.3.11) 
Using actionmailer (2.3.11) 
Using activerecord (2.3.11) 
Using activeresource (2.3.11) 
Using bundler (1.0.10) 
Using highline (1.6.20) 
Using net-ssh (2.7.0) 
Using net-scp (1.1.2) 
Using net-sftp (2.1.2) 
Using net-ssh-gateway (1.2.0) 
Using capistrano (2.6.0) 
Using erubis (2.7.0) 
Using exception_notification (2.3.3.0) 
Using mocha (0.9.8) 
Installing mysql (2.9.1) with native extensions 
Installing open4 (0.9.3) 
Installing rails (2.3.11) 
Installing syntax (1.0.0) 
Your bundle is updated! Use `bundle show [gemname]` to see where a bundled gem is installed. 
```

# c# - 进度条没有进展

> ID：12676490
> 
> 赞同：0
> 
> 时间：2012-10-01T15:39:50.730
> 
> 标签：c#, multithreading, progress-bar

我有一个程序正在更新 sqlserver 中的表，我有一个表单，我想显示这个进度，进度条正在增加，但没有显示。我需要为此使用后台工作人员吗？我在做什么的例子

```
public void updateTable(string tableName)
{
  // con is an instance of my form to access progressbar
  con.progressBar1.Minimum = 1;
  con.progressBar1.Step = 1;
  string dbQuery = "select summet from someting"

  con.progressBar1.Maximum = address.Tables[0].Rows.Count;
  MessageBox.Show("progress bar max " + con.progressBar1.Maximum);

   foreach (DataRow LonLat in address.Tables[0].Rows)
   {
       con.progressBar1.PerformStep();
       MessageBox.Show(con.progressBar1.Value.ToString()); // this is incrementing
       //plus updating table 

   }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:41:56.470

**简短的回答**，是的。如果您从主线程执行此操作，您将看不到进度条更新。

**长答案：**

每当您从一段代码修改用户界面时，该代码已转换为“消息”到窗口消息队列中，窗口消息队列将获取该消息并在主线程中相应地更新 UI。

但是，由于主线程忙于处理您的代码，它没有“时间”来实际更新用户界面，只有当您的过程完成时，才可以自由地更新用户界面。这就是为什么您看到进度条从 0% 变为 100% 而没有任何中间步骤的原因。

**你应该做什么：**

您想做的是将工作放入后台工作人员中，这样主线程就可以自由地处理 UI 更新请求……顺便说一下，如果您想保持 UI 响应，这是一种标准做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:43:28.987

是的，您应该使用 Background Worker，但它可能无济于事，我们需要查看绑定和其他所有内容，要使用后台工作程序，请使用以下内容：

```
Window.Dispatcher.BeginInvoke((Action)(() =>
        {
            con.progressBar1.PerformStep();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T15:46:45.497

是的，您必须使用后台工作人员

```
BackgroundWorker worker = new BackgroundWorker();
    worker.DoWork += (o, ea) =>
    {
     // your code goes here
       }
 worker.RunWorkerCompleted += (q, ea) =>
    {
      }
 worker.RunWorkerAsync(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T07:55:12.867

如果我们不能使用 BackgroundWorker，就会发生这种情况。我有一个带有进度条的表单，它的唯一工作是从打开它的其他表单中接受到 PerformStep 的命令，并且表单必须简单地执行此操作。两种形式都在 GUI 线程中。尽管如此，我并没有从进度条中获得一致的行为。在下面的代码中，进度条总是比其 Value 属性所表示的要落后一步：

```
public partial class Form1 : Form
   {
      private readonly int m_numOfSteps;

      public Form1(int numOfSteps)
      {
         m_numOfSteps = numOfSteps;
         InitializeComponent();
      }

      private void Form1_Load( object sender, EventArgs e )
      {
         progressBar1.Step = (int)Math.Ceiling( 100.0 / m_numOfSteps );
      }

      public void DoStep(string msg)
      {
         progressBar1.PerformStep();
         label1.Text = msg;
         label2.Text = String.Format( "{0}%", progressBar1.Value  );
         label1.Refresh();
         label2.Refresh();
      }
   }

   public partial class Form2 : Form
   {
      public Form2()
      {
         InitializeComponent();
      }

      private void button1_Click( object sender, EventArgs e )
      {
         using( Form1 f = new Form1( 3 ) )
         {
            f.Show();
            f.Refresh();
            Thread.Sleep( 1000 );
            f.DoStep( "AAAA" );
            Thread.Sleep( 1000 );
            f.DoStep( "BBBB" );
            Thread.Sleep( 1000 );
            f.DoStep( "CCCC" );
            Thread.Sleep( 1000 );
         }
      }
   } 
```

# clojure - 在 Clojure 的嵌套语法引号中协调自动生成符号

> ID：12676496
> 
> 赞同：15
> 
> 时间：2012-10-01T15:40:13.000
> 
> 标签：clojure, gensym

在 Clojure 中，您需要`gensym`在宏中创建供内部使用的符号，以保持它们的卫生。但是，有时您需要在嵌套语法引号中使用相同的符号。例如，如果我想将一个值绑定到一个符号，`let`并在展开的循环中打印三次，我会这样做

```
`(let [x# 1]
   ~@(repeat 3
             `(println x#))) 
```

但这会产生

```
(clojure.core/let [x__2__auto__ 1]
                  (clojure.core/println x__1__auto__)
                  (clojure.core/println x__1__auto__)
                  (clojure.core/println x__1__auto__)) 
```

`x#``let`在表单中生成与嵌套在其中的表单不同的符号`println`- 因为它们是从不同的语法引号创建的。

为了解决它，我可以预先生成符号并将其注入到语法引号中：

```
(let [x (gensym)]
  `(let [~x 1]
     ~@(repeat 3
               `(println ~x)))
) 
```

这将产生正确的结果，在任何地方都需要相同的符号：

```
(clojure.core/let [G__7 1]
                  (clojure.core/println G__7)
                  (clojure.core/println G__7)
                  (clojure.core/println G__7)) 
```

现在，虽然它确实产生了正确的结果，但代码本身看起来既丑陋又冗长。我不喜欢必须“声明”一个符号，并且注入语法使它看起来像是来自宏外部，或者在其中某处计算。我希望能够使用 auto-gensym 语法，这清楚地表明这些是宏内部符号。

那么，有没有办法使用带有嵌套语法引号的 auto-gensym 并使它们产生相同的符号？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T16:04:00.833

自动生成符号仅在定义它们的语法引用中有效，并且它们在未引用的代码中不起作用，因为这不是语法引用的一部分。

这里符号`x#`被它的 gensym 替换，因为它在语法引用的范围内：

```
core> `(let [x# 1] x#)
(clojure.core/let [x__1942__auto__ 1] x__1942__auto__) 
```

如果你取消引用它，它就不再被翻译成它的语法引用：

```
core> `(let [x# 1] ~@x#)
CompilerException java.lang.RuntimeException: Unable to resolve symbol: x# in this context, compiling:(NO_SOURCE_PATH:1) 
```

Auto-gensyms 是语法引用中的一个非常方便的快捷方式，您显然需要`gensym`直接使用其他任何地方，就像您后面的示例一样。

还有其他方法可以构造这个宏，因此 autogensyms 可以工作，尽管在宏顶部的 let 中声明 gensymed 符号在 Clojure 和其他 lisp 中也是非常正常的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-02T09:36:34.060

您的方法（调用 gensym）是正确的方法。

但是，在某些情况下，您可以巧妙地使用`doto`,`->`或`->>`。看：

```
 `(let [x# 1]
   (doto x#
     ~@(repeat 3 `println))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-20T05:53:05.010

更一般地说，每当遇到这种情况时，您都可以执行以下操作：

```
(let [x `x#]
   `(let [~x 1]
      ~@(repeat 3
                `(println ~x)))) 
```

为了清楚起见，您创建自动生成符号并将其绑定到语法引用形式之外，然后在任何需要它的嵌套形式中，您可以使用语法取消引用。

# php - 从 php 网站的 url 中删除文件夹结构之间

> ID：12676497
> 
> 赞同：0
> 
> 时间：2012-10-01T15:40:17.803
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting, wampserver

我有一个具有以下文件夹结构（基本结构）的 php 网站。

*   项目名称
    *   应用程序
        *   控制器
        *   模型
        *   看法
    *   css
    *   js
    *   图像
    *   索引.php

所以当我在 WAMP 中查看 index.php 时，网址是`http://localhost/project_name/`

但是当我进入网站（例如，位于视图文件夹下的 login.php）时，url 是这样的。`http://localhost/project_name/app/view/login.php`

我发现使用 .htaccess 我们可以更改网址。所以我尝试了这个（在.htaccess中）。

```
RewriteEngine on
RewriteBase /
Redirect 301 /project_name/app/view/login.php /project_name/login.php
RewriteRule ^/project_name/login.php$ /project_name/app/view/login.php [L] 
```

现在 url`http://localhost/project_name/login.php`是正确的。但似乎 php 不使用原始链接来获取文件（即 from `/project_name/app/view/login.php`）而是从这里`/project_name/login.php`

所以它会抛出 404 错误。

我应该改变什么？请帮助我，我只是想`/app/view/`从 url 中隐藏一部分，这样用户就不会看到我的文件夹结构。我今天已经阅读了大约 9 小时的各种方法，但仍然无法正常工作。

希望我的问题足够清楚。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:25:10.990

通过 htaccess 文件中的重写规则传递的 URI 删除了前导斜杠，因此您的规则：

```
RewriteRule ^/project_name/login.php$ /project_name/app/view/login.php [L] 
```

永远不会匹配任何东西，因为`^/`. 此外，由于您正在重写与先前重定向匹配的 URI，因此您的浏览器将看到一个重定向循环并说它没有正确重定向。您需要匹配实际请求而不是 URI：

```
RewriteEngine on
RewriteBase /

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /project_name/app/view/login\.php
RewriteRule ^ /project_name/login.php [L,R=301]

RewriteRule ^/?project_name/login.php$ /project_name/app/view/login.php [L] 
```

# iphone - 如何检查来自 iphone 应用程序的 Web 服务请求的详细信息。？

> ID：12676500
> 
> 赞同：0
> 
> 时间：2012-10-01T15:40:24.233
> 
> 标签：iphone, ios, web-services, wcf-security

我正在开发一个 iphone 应用程序，它消耗大量的网络服务并从它们那里请求数据。我所有的网络服务链接都是“http://ipaddress/webservice”。我只是关心我的应用程序的安全方面并想知道

1) 查看从 iphone 应用程序到服务器的请求以及与之相关的数据有多容易。

2）此外，如果我实际上可以在某些拦截工具（如提琴手）中查看我的帖子请求的正文。有没有办法让我的数据不被提琴手记录。

3）最后，我如何在服务器端检查它是否是试图访问我的网络服务的 iphone 或其其他来源，如网络浏览器或 Android 手机。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:45:28.380

1：非常容易。您可以使用唯一密钥加密您的数据，并在应用程序中对其进行解密。您可能还想使用 SSL？

2：不确定。

3：您可以使用用户代理，但可以对其进行修改，但它是一种解决方案 - 但如果您使用加密，无论如何都无关紧要。因为结果不可读。

编辑，也请查看下面的链接。 [Xcode：隐藏/保护最终 iOS 应用程序中的资源文件？](https://stackoverflow.com/questions/11041899/xcode-hide-protect-resource-files-in-final-ios-app)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:56:23.290

嗅探 http(s) 流量很简单。有一个名为 mitmproxy 的工具甚至可以解密 SSL 流量。您通过 WiFi 发送的任何内容都可能被恰好在监听它的任何人截获并记录下来。

我的建议是不要将用户名和密码作为 URL 的一部分发送，即 mysite.com/auth?user&pass=12345 并使用 SSL。

如果您在标头中编码一个特殊的用户代理字符串，您可以通过这种方式识别客户端。

# coffeescript - CoffeeScript：为什么我的课没有前缀窗口就不能工作？

> ID：12676501
> 
> 赞同：1
> 
> 时间：2012-10-01T15:40:38.760
> 
> 标签：coffeescript

我有一个外部文件，我在其中定义了我的类：

```
class MyClass
  constructor: ->
    alert 'hello' 
```

当 CoffeeScript 被编译成 JavaScript 时，它会用一个闭包来包装它。因此，当我尝试在某些 JavaScript 中使用它时：

```
$(function(){
  var ob = new MyClass();
}); 
```

我得到错误：

```
Uncaught ReferenceError: MyClass is not defined 
```

但是如果我在类名前面加上 window ，它将起作用：

```
class window.MyClass
  constructor: ->
    alert 'hello' 
```

如何定义我的类而不用 window 前缀？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:56:22.983

您可以使用 编译 CoffeeScript，`--bare`但通常不建议这样做，因为您可能会污染全局命名空间。

我的建议是将类附加到`window`对象，就像您的第二个示例一样，或者更好的是，使用 CoffeeScript 文档中的这个命名空间函数将您的类附加到附加到`window`

```
namespace = (target, name, block) ->
  [target, name, block] = [(if typeof exports isnt 'undefined' then exports else window), arguments...] if arguments.length < 3
  top    = target
  target = target[item] or= {} for item in name.split '.'
  block target, top

# Usage:
#
namespace 'Hello.World', (exports) ->
  # `exports` is where you attach namespace members
  exports.hi = -> console.log 'Hi World!'

namespace 'Say.Hello', (exports, top) ->
  # `top` is a reference to the main namespace
  exports.fn = -> top.Hello.World.hi()

Say.Hello.fn()  # prints 'Hi World!' 
```

资料来源：[CoffeeScript 常见问题解答](https://github.com/jashkenas/coffee-script/wiki/FAQ)

# c# - Web API 如何处理破折号和日期时间格式

> ID：12676502
> 
> 赞同：1
> 
> 时间：2012-10-01T15:40:39.910
> 
> 标签：c#, rest, asp.net-web-api

使用.Net Web API，我必须编写一个服务来使用第三方对我们服务器的一些宁静调用。我无法控制我们发送的 XML，也无法更改它。我们只会收到 HTTP POST 调用，它们都是 XML 格式的。

这是我们将收到的 XML 消息的示例：

```
<listing-confirmation>
<account-id>123456</account-id>
<allow-bid>true</allow-bid>
<allow-both>true</allow-both>
<allow-buy>true</allow-buy>
<allow-offers>false</allow-offers>
<auction-work-order>1234</auction-work-order>
<bid-count>1</bid-count>
<bid-increment>50</bid-increment>
<buyer-group-name>og_name bg_name</buyer-group-name>
<buyer-group-type>GlobalOpen</buyer-group-type>
<buy-now-price>1000</buy-now-price>
<condition-report-url>some_url</condition-report-url>
<current-bid>700</current-bid>
<end-timestamp>Wed May 25 21:48:09 +0000 2011</end-timestamp>
<event-sale-id>1234</event-sale-id>
<event-sale-name>event_sale_name</event-sale-name>
<facilitated-auction-code>abc</facilitated-auction-code>
<floor-price>700</floor-price>
<listing-activated-timestamp>Tue May 24 21:38:09 +0000 2011</listing-activated-timestamp>
<manheim-group-code>mgc</manheim-group-code>
<physical-location>at_auction</physical-location>
<seller-id>5000000</seller-id>
<starting-bid-price>300</starting-bid-price>
<start-timestamp>Tue May 24 21:38:09 +0000 2011</start-timestamp>
<stock-number>3BBBDOC</stock-number>
<unique-bidder-count>1</unique-bidder-count>
<vehicle-detail-url>http://localhost/vdp/show/169</vehicle-detail-url>
<view-count>0</view-count>
<vin>12345678901234567</vin>
</listing-confirmation> 
```

我有几个问题：

1 - 如何处理根 XML 消息中的破折号？会是这样吗

```
[XmlRoot("listing-confirmation")]
public class Listing_confirmation 
```

2 - 如何处理 xml 元素中的破折号？我会用这个吗

```
[XmlElement("account-id")]
public int account_id { get; set; } 
```

3 - 如何处理日期时间格式？它会自动理解并将其转换为 DateTime 还是我需要做一些事情来处理它？如果是这样，我该怎么做？

谢谢！杰里米

**编辑截至 2012 年 10 月 1 日 @ 4:56 EST**

这是我的 Listing_confirmation 模型的新类文件

```
[DataContract(Name="listing-confirmation")]
public class Listing_confirmation
{
    [DataMember(Name="account-id")]
    public int account_id { get; set; }
    [DataMember(Name="allow-bid")]
    public bool allow_bid { get; set; }
    [DataMember(Name="allow-both")]
    public bool allow_both { get; set; }
    [DataMember(Name="allow-buy")]
    public bool allow_buy { get; set; }
    [DataMember(Name="allow-offers")]
    public bool allow_offers { get; set; }
    [DataMember(Name="auction-work-order")]
    public int? auction_work_order { get; set; }
    [DataMember(Name="bid-count")]
    public int? bid_count { get; set; }
    [DataMember(Name="bid-increment")]
    public int? bid_increment { get; set; }
    [DataMember(Name="buyer-group-name")]
    public string buyer_group_name { get; set; }
    [DataMember(Name="buyer-group-type")]
    public string buyer_group_type { get; set; }
    [DataMember(Name="buy-now-price")]
    public int buy_now_price { get; set; }
    [DataMember(Name="condition-report-url")]
    public string condition_report_url { get; set; }
    [DataMember(Name="current-bid")]
    public int? current_bid { get; set; }
    //[DataMember(Name="end-timestamp")]
    //public DateTime end_timestamp { get; set; }
    [DataMember(Name="event-sale-id")]
    public int? event_sale_id { get; set; }
    [DataMember(Name="event-sale-name")]
    public string event_sale_name { get; set; }
    [DataMember(Name="facilitated-auction-code")]
    public string facilitated_auction_code { get; set; }
    [DataMember(Name="floor-price")]
    public int floor_price { get; set; }
    //[DataMember(Name="listing-activated-timestamp")]
    //public DateTime listing_activated_timestamp { get; set; }
    [DataMember(Name="manheim-group-code")]
    public string manheim_group_code { get; set; }
    //[DataMember(Name="message-triggered")]
    //public DateTime message_triggered { get; set; }
    [DataMember(Name="physical-location")]
    public string physical_location { get; set; }
    [DataMember(Name="seller-id")]
    public int seller_id { get; set; }
    [DataMember(Name="starting-bid-price")]
    public int? starting_bid_price { get; set; }
    //[DataMember(Name="start-timestamp")]
    //public DateTime start_timestamp { get; set; }
    [DataMember(Name="stock-number")]
    public string stock_number { get; set; }
    [DataMember(Name="unique-bidder-count")]
    public int? unique_bidder_count { get; set; }
    [DataMember(Name="vehicle-detail-url")]
    public string vehicle_detail_url { get; set; }
    [DataMember(Name="view-count")]
    public int? view_count { get; set; }
    [DataMember(Name="vin")]
    public string vin { get; set; }
} 
```

但是，它仍然没有正确绑定数据。当我调试控制器时，它始终具有 ModelState.IsValid = false 并且 Listing_Confirmation 对象始终为空。有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:53:14.800

从[WebAPI 参数绑定如何工作](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)：

> 绑定参数有两种技术：模型绑定和格式化程序。在实践中，WebAPI 使用模型绑定从查询字符串中读取，并使用格式化程序从正文中读取。

如果您从第三方接收的 XML 在 POST 操作的主体中，那么您应该编写一个自定义 XML 媒体格式化程序来执行模型绑定，该绑定将采用 XML 并返回一个表示正在接收的数据的 .NET 对象。

有关如何编写自定义媒体类型格式化程序的示例，请参阅[媒体格式化程序。](http://www.asp.net/web-api/overview/formats-and-model-binding/media-formatters)您需要将默认的 XML 媒体类型格式化程序替换为您的自定义 XML 格式化程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:13:42.543

我终于弄清楚了问题所在。

1 - 在我的 Application_Start() 方法中，我添加了以下代码行以指定使用 XmlSerializer 而不是 DataContract Serializer：

```
var xml = GlobalConfiguration.Configuration.Formatters.XmlFormatter;
xml.UseXmlSerializer = true; 
```

2 - 我使用 XmlRoot 和 XmlElement 属性来装饰类名和每个属性。这是我的新类文件-

```
[XmlRoot("listing-confirmation")]
public class Listing_confirmation
{
    [XmlElement("account-id")]
    public int account_id { get; set; }
    [XmlElement("allow-bid")]
    public bool allow_bid { get; set; }
    [XmlElement("allow-both")]
    public bool allow_both { get; set; }
    [XmlElement("allow-buy")]
    public bool allow_buy { get; set; }
    [XmlElement("allow-offers")]
    public bool allow_offers { get; set; }
    [XmlElement("auction-work-order")]
    public int auction_work_order { get; set; }
    [XmlElement("bid-count")]
    public int bid_count { get; set; }
    [XmlElement("bid-increment")]
    public int bid_increment { get; set; }
    [XmlElement("buyer-group-name")]
    public string buyer_group_name { get; set; }
    [XmlElement("buyer-group-type")]
    public string buyer_group_type { get; set; }
    [XmlElement("buy-now-price")]
    public int buy_now_price { get; set; }
    [XmlElement("condition-report-url")]
    public string condition_report_url { get; set; }
    [XmlElement("current-bid")]
    public int current_bid { get; set; }
    //[XmlElement("end-timestamp")]
    //public DateTime end_timestamp { get; set; }
    [XmlElement("event-sale-id")]
    public int event_sale_id { get; set; }
    [XmlElement("event-sale-name")]
    public string event_sale_name { get; set; }
    [XmlElement("facilitated-auction-code")]
    public string facilitated_auction_code { get; set; }
    [XmlElement("floor-price")]
    public int floor_price { get; set; }
    //[XmlElement("listing-activated-timestamp")]
    //public DateTime listing_activated_timestamp { get; set; }
    [XmlElement("manheim-group-code")]
    public string manheim_group_code { get; set; }
    //[XmlElement("message-triggered")]
    //public DateTime message_triggered { get; set; }
    [XmlElement("physical-location")]
    public string physical_location { get; set; }
    [XmlElement("seller-id")]
    public int seller_id { get; set; }
    [XmlElement("starting-bid-price")]
    public int starting_bid_price { get; set; }
    //[XmlElement("start-timestamp")]
    //public DateTime start_timestamp { get; set; }
    [XmlElement("stock-number")]
    public string stock_number { get; set; }
    [XmlElement("unique-bidder-count")]
    public int unique_bidder_count { get; set; }
    [XmlElement("vehicle-detail-url")]
    public string vehicle_detail_url { get; set; }
    [XmlElement("view-count")]
    public int view_count { get; set; }
    [XmlElement("vin")]
    public string vin { get; set; }
} 
```

3 - 我必须注释掉我所有的 DateTime 属性，因为它无法将传递的值转换为有效的 DateTime。我仍在努力使其正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T21:30:46.107

我终于能够弄清楚 DateTime 格式问题。这是我如何处理一个 DateTime 的示例。我以同样的方式对待其他人。

```
[XmlIgnore]
    public DateTime? start_timestamp { get; set; }
    [XmlElement("start-timestamp")]
    public string start_timestampstring
    {
        get
        {
            return start_timestamp.HasValue ? start_timestamp.Value.ToString("ddd MMM dd HH:mm:ss zzz yyyy") : string.Empty;
        }
        set
        {
            if (!string.IsNullOrEmpty(value))
            {
                try
                {
                    start_timestamp = DateTime.ParseExact(value, "ddd MMM dd HH:mm:ss zzz yyyy", System.Globalization.CultureInfo.InvariantCulture);
                }
                catch
                {
                    start_timestamp = null;
                }

            }
            else
            {
                start_timestamp = null;
            }
        }
    } 
```

# objective-c - xcode 目标 x 框架代码折叠

> ID：12676503
> 
> 赞同：1
> 
> 时间：2012-10-01T15:40:40.847
> 
> 标签：objective-c, xcode, frameworks, code-folding

我正在尝试编写自己的简单 html/php 文本编辑器，其中一个功能是基于 open { 和 close } 的代码折叠/可折叠行（如果您不知道我的意思，请 wiki 查找代码折叠）

我将在 Xcode 中为 Mac OS X 平台编写这个应用程序。

我曾尝试用谷歌查找代码折叠的示例或框架，但是当我想知道如何在文本字段中实际创建代码折叠时，我一直在获取有关如何在 xcode 中对应用程序进行代码折叠的信息。

如果有人知道好的资源或框架，请告诉我。

提前致谢。

# javascript - JQuery DatePicker 关闭行为

> ID：12676504
> 
> 赞同：1
> 
> 时间：2012-10-01T15:40:44.217
> 
> 标签：javascript, jquery, datepicker

我有一个页面，上面有一个 JQuery 日期选择器，旨在以 mm/yy 格式显示日期。我没有编写最初的 JQuery，我也不是很熟悉，所以这可能是一个简单的问题，但是当用户单击“完成”按钮时，日期选择器会消失一秒钟，然后重新打开，就像用户单击了一样再次在文本框中。

用于实例化日期选择器的代码是：

```
$(function() {
    $('.datepicker').datepicker({
        changeMonth: true,
        changeYear: true,
        showButtonPanel: true,
        dateFormat: 'mm/yy',
        onClose: function(dateText, inst) {
            var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
            var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
            $(this).datepicker('setDate', new Date(year, month, 1));
        },
        beforeShow: function(input, inst) {
            if ((datestr = $(this).val()).length > 0) {
                year = datestr.substring(datestr.length - 4, datestr.length);
                //month = jQuery.inArray(datestr.substring(0, datestr.length - 5), $(this).datepicker('option', 'monthNames'));
                month = datestr.substring(0, datestr.length - 5);
                $(this).datepicker('option', 'defaultDate', new Date(year, month-1, 1));
                $(this).datepicker('setDate', new Date(year, month-1, 1));
            }
        }
    });
    $("#datepicker").mousedown(function() {
        $('#ui-datepicker-div').toggle();     
    });
}); 
```

在谷歌搜索了一段时间后，我添加了 mousedown 处理程序，这样当您单击页面上远离日期选择器的任何位置时，它会按预期关闭，但如果您单击完成按钮，它实际上并没有关闭日期选择器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:50:39.537

它按预期工作。我没有看到我设置的小提琴中的错误[http://jsfiddle.net/adrianonantua/ZQTqe/](http://jsfiddle.net/adrianonantua/ZQTqe/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:25:26.077

我会说这是问题所在：

```
$("#datepicker").mousedown(function() {
    $('#ui-datepicker-div').toggle();     
}); 
```

它在鼠标按下时显示/隐藏表单，当您单击日期或完成按钮时，您的日期选择器将自动隐藏。尝试从您的代码中删除它。

# hadoop - Hadoop reducer 未被调用

> ID：12676505
> 
> 赞同：7
> 
> 时间：2012-10-01T15:40:46.173
> 
> 标签：hadoop, mapreduce

全部

我有简单的 map/reduce 实现。调用 Mapper 并完成其工作，但从不调用 reducer。

这是映射器：

```
static public class InteractionMap extends Mapper<LongWritable, Text, Text, InteractionWritable> {

    @Override
    protected void map(LongWritable offset, Text text, Context context) throws IOException, InterruptedException {
        System.out.println("mapper");
        String[] tokens = text.toString().split(",");
        for (int idx = 0; idx < tokens.length; idx++) {
            String sourceUser = tokens[1];
            String targetUser = tokens[2];
            int points = Integer.parseInt(tokens[4]);
            context.write(new Text(sourceUser), new InteractionWritable(targetUser, points));
            }
        }
    }
} 
```

这是我的减速器：

```
static public class InteractionReduce extends Reducer<Text, InteractionWritable, Text, Text> {

    @Override
    protected void reduce(Text token, Iterable<InteractionWritable> counts, Context context) throws IOException, InterruptedException {
        System.out.println("REDUCER");
        Iterator<InteractionWritable> i = counts.iterator();
        while (i.hasNext()) {
            InteractionWritable interaction = i.next();
            context.write(token, new Text(token.toString() + " " + interaction.getTargetUser().toString() + " " + interaction.getPoints().get()));
        }
    }

} 
```

而且，这是配置部分：

```
@Override
public int run(String[] args) throws Exception {
    Configuration configuration = getConf();
    Job job = new Job(configuration, "Interaction Count");
    job.setJarByClass(InteractionMapReduce.class);
    job.setMapperClass(InteractionMap.class);
    job.setCombinerClass(InteractionReduce.class);
    job.setReducerClass(InteractionReduce.class);
    job.setInputFormatClass(TextInputFormat.class);
    job.setOutputFormatClass(TextOutputFormat.class);
    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(Text.class);
    FileInputFormat.addInputPath(job, new Path(args[0]));
    FileOutputFormat.setOutputPath(job, new Path(args[1]));
    return job.waitForCompletion(true) ? 0 : -1;
} 
```

有谁知道为什么没有调用减速器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T13:43:04.897

好吧，正如预期的那样，这是我的错。作业配置不好。它应该是这样的：

```
Configuration configuration = getConf();

Job job = new Job(configuration, "Interaction Count");
job.setJarByClass(InteractionMapReduce.class);
job.setMapperClass(InteractionMap.class);
job.setReducerClass(InteractionReduce.class);
job.setMapOutputKeyClass(Text.class);
job.setMapOutputValueClass(InteractionWritable.class);
job.setOutputKeyClass(Text.class);
job.setOutputValueClass(Text.class);

FileInputFormat.addInputPath(job, new Path(args[0]));
FileOutputFormat.setOutputPath(job, new Path(args[1]));

return job.waitForCompletion(true) ? 0 : -1; 
```

出现此问题是因为 map 和 reduce 阶段具有不同的输出类型。调用 context.write 方法后，作业静默失败。所以，我必须添加的是这些行：

```
job.setMapOutputKeyClass(Text.class);
job.setMapOutputValueClass(InteractionWritable.class);
job.setOutputKeyClass(Text.class);
job.setOutputValueClass(Text.class); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T15:51:03.580

1.  我希望`text`你的`Mapper`方法中有一些数据。
2.  你真的需要`Reducer`和`Combiner`一样`Reducer`吗？

我总是有一个主要课程`InteractionMapReduce`，在里面我有`InteractionMap`和`InteractionReduce`课程。

因此，在工作中设置`Mapper`and`Reducer`类时，我将它们设置为`InteractionMapReduce.InteractionMap.class`and `InteractionMapReduce.InteractionReduce.class`。

我不知道这是否对您有帮助，但您可以尝试一下。

# javascript - 手动设置 Google 地图路线语言

> ID：12676512
> 
> 赞同：1
> 
> 时间：2012-10-01T15:41:07.290
> 
> 标签：javascript, google-maps

我目前正在使用[GMaps.JS](http://hpneo.github.com/gmaps/examples/routes_advanced.html)，它根据用户的浏览器偏好显示方向。由于我住在拉丁美洲，那里的计算机通常使用英语设置，我想知道是否有办法强制让 Maps API 使用西班牙语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:43:14.550

> 我想知道是否有办法强制让 Maps API 使用西班牙语。

是的。

如果您希望更改 Maps API 以忽略浏览器的语言设置并强制它以特定语言显示信息，您可以在包含 Maps API javascript 代码时向标记添加可选语言参数，指定要使用的语言。

例如，要以日语显示 Maps API 应用程序，请将 &language=ja 添加到标记中，如下所示：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false&language=ja"> 
```

来源：[https ://developers.google.com/maps/documentation/javascript/basics](https://developers.google.com/maps/documentation/javascript/basics)

# android - 参考应用xml资源中的android库项目xml资源

> ID：12676513
> 
> 赞同：4
> 
> 时间：2012-10-01T15:41:08.170
> 
> 标签：android, xml, resources

我有一个定义 XML 资源的 Adnroid 库项目。

让我们以可绘制的选择器为例（但我在字符串、样式等方面存在问题）。

LibProject/res/drawable/button_selector.xml ... 定义一个选择器

LibProject/res/layout/view.xml .... 使用选择器，没有问题

```
 `<TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/sign_up_fly_buttons"
        android:background="@drawable/button_selector"/>` 
```

然后我想在我的应用程序的布局中引用它

AppProject/res/layout/view.xml ...

```
`<TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/sign_up_fly_buttons"
        android:background="@drawable/button_selector"/>` 
```

但是在应用程序中它不会编译或让我引用它。我尝试了各种命名空间咒语来尝试引用它，但没有运气......

有任何想法吗？

另外：我已经读过此类引用的完整形式是：@[packagename:]type/id，如果您省略包名，则使用该资源文件的包。

这个例子是：@com.mylibrary:drawable/button_selector

但这对我不起作用！我的库设置/导入一定有问题吗？

我的库位于一个单独的 Eclipse Android 项目中，标记为库项目，并作为“依赖项目”从我的应用程序中引用，并且代码已构建并链接良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:19:47.280

好的，找到问题了！

在 Eclipse 中，在我的项目属性 -> Java 构建路径 ->“项目”“选项卡”中，我添加了库项目。

但是，我还必须将它添加到项目属性 - > Android - > 图书馆区域作为图书馆项目。

我为别人做过这个，但在这里忘记了。

感谢所有试图找出我的错误的人。

现在资源已正确合并，我可以使用不带包名称的“短格式”格式引用它们。

# c# - 如何在 ListView 中访问 WebView 的 NavigateToString 属性

> ID：12676520
> 
> 赞同：2
> 
> 时间：2012-10-01T15:41:40.457
> 
> 标签：c#, xaml, webview, windows-runtime

我有 a`ListView`其中包含，除其他外，一个`WebView`. 选择此列表的A时`ListViewItem`，我想`WebView`通过该`NavigateToString`方法将HTML绑定到。

WebView 需要在绑定列表中（因为它绑定到项目列表），并且*必须*使用 NavigateToString（因为 HTML 内容来自代码，而不是在网络上）

有没有办法做到这一点？如果是这样，最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T21:26:48.423

当然，您可以使用附加的依赖属性或可以绑定字符串的行为来添加附加的行为[，](http://winrtbehaviors.codeplex.com)当值更改时（例如，当它首次分配时）将导航到该字符串。

另一个问题可能是它的执行方式。我会将 WebView 控件视为浏览器窗口，因此如果您的 ListView 中有一百个项目，您可能不想为所有这些项目创建一百个 IE 窗口。即使假设您使用默认的 VirtualizingStackPanel 作为 ListView 的 ItemsPanel - 这听起来像是许多问题的根源。我没有尝试过，所以我可能错了，但我宁愿尝试解析 html 并将其格式化以在常规 TextBlocks 中使用。对于非常基本的 html，如果您只有纯文本和链接，您可以使用带有 RichTextBlock 的 WinRT XAML 工具包的 LinkedHtmlFragment 扩展。对于更花哨的东西，您可能需要自己进行一些编码或使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)之类的东西（尽管我不确定它是否支持 WinRT）。

# php - 如何使用 arsort() 在 PHP 中进行稳定排序？

> ID：12676521
> 
> 赞同：7
> 
> 时间：2012-10-01T15:41:43.310
> 
> 标签：php, arrays, sorting

我需要**根据 value**在 php 中对数组进行排序，数组使用一些数字作为键和值，例如：

```
$a = array(70 => 1 ,82 => 5  ,61 => 3 ,55 => 1 ,34 => 2 ,53 => 2 ,21 => 4 ,13 => 5); 
```

**我喜欢这样排序**：

```
Array
(
    [82] => 5
    [13] => 5
    [21] => 4
    [61] => 3
    [34] => 2
    [53] => 2
    [70] => 1
    [55] => 1
) 
```

我使用`arsort`并且它有效，但是有一个问题，因为这个函数将默认排序**键**和排序数组更改为：

```
Array
(
    [13] => 5
    [82] => 5
    [21] => 4
    [61] => 3
    [53] => 2
    [34] => 2
    [55] => 1
    [70] => 1
) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T18:06:07.413

构造一个新数组，其元素是原始数组的键、值和位置：

```
$temp = array();
$i = 0;
foreach ($array as $key => $value) {
  $temp[] = array($i, $key, $value);
  $i++;
} 
```

然后使用将原始位置考虑在内的用户定义顺序进行排序：

```
uasort($temp, function($a, $b) {
 return $a[2] == $b[2] ? ($a[0] - $b[0]) : ($a[2] < $b[2] ? 1 : -1);
}); 
```

最后，将其转换回原来的关联数组：

```
$array = array();
foreach ($temp as $val) {
  $array[$val[1]] = $val[2];
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T15:44:47.323

这是因为`sort`函数族[不稳定](http://en.wikipedia.org/wiki/Sorting_algorithm#Stability)。如果您需要排序稳定，那么您要么必须自己实现它，要么遍历排序结果并使用[`array_splice`](http://php.net/manual/en/function.array-splice.php).

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-23T10:27:19.027

作为参考，我在 Github 上放置了一组内置 PHP 函数的稳定排序变体：[https](https://github.com/vanderlee/PHP-stable-sort-functions) ://github.com/vanderlee/PHP-stable-sort-functions ，基于@Barmar 的解决方案和其他一些技巧。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-10T18:53:41.407

简单的解决方案`array_multisort`。

```
$assoc = [
    70 => 1,
    82 => 5,
    61 => 3,
    55 => 1,
    34 => 2,
    53 => 2,
    21 => 4,
    13 => 5,
];

$keys = array_keys($assoc);
array_multisort($assoc, SORT_DESC, range(1, count($assoc)), $keys);
$assoc = array_combine($keys, $assoc);

print_r($assoc); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-01T16:04:21.743

这是一个很大的解决方法，但它确实有效：

```
$a = array(70 => 1 ,82 => 5  ,61 => 3 ,55 => 1 ,34 => 2 ,53 => 2 ,21 => 4 ,13 => 5);
$b = max($a);
$c = min($a);
$d = 0;
$sorted_list = array();
while($b >= $c){
    foreach($a as $key => $value){
        if($value == $b){
            $sorted_list[$key] = $value;
        }
    }
    $b--;
} 
```

vardump 输出：

```
array(8) { [82]=> string(1) "5" [13]=> string(1) "5" [21]=> string(1) "4" [61]=> string(1) "3" [34]=> string(1) "2" [53]=> string(1) "2" [70]=> string(1) "1" [55]=> string(1) "1" } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T16:06:56.083

您可以创建自己的排序函数来满足您自定义的排序条件，然后使用 usort() 使用您创建的函数对数组进行迭代以对数组进行排序。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-22T09:25:10.460

PHP 使用快速排序作为基本排序算法。你有两个选择：

1.  首先使用 usort 并定义一个比较函数，它尊重前一个顺序
2.  编写自己的稳定排序机制

我在 github 上编写了一个包 porth/avalanchesort ( [https://github.com/porthd/avalanchesort )，其中包含一个递归的 naturell-merge-sort。](https://github.com/porthd/avalanchesort)您可以使用自己的比较函数和自己的数据结构。该包包含关联数组和列表数组的示例。

# java - 如何使用 Java/Spring 将视频流式传输到浏览器？

> ID：12676530
> 
> 赞同：4
> 
> 时间：2012-10-01T15:42:02.677
> 
> 标签：java, spring, jboss, video-streaming

我们正在运行 jboss 服务器并使用 Spring 进行基本的 Web 设置，但现在我想将视频流式传输到浏览器中。我正在尝试使用[xuggle](http://www.xuggle.com/)，但后来我在他们的网站上读到您不能将其放入 Applet 或将其与 java webstart 一起使用，所以我假设这意味着我可以流式传输到浏览器，这个假设是否正确？如果是这样，其他人是否知道任何图书馆或我应该如何去做？如果您需要更多信息或有任何疑问，我将很乐意回答，尽管我对流媒体视频非常陌生，并且对 Spring 相对了解。

更新：所以我可以使用 xuggle 生成视频，然后我可以将该视频嵌入到我的 html 代码中......但我不能同时生成和流式传输。有没有人知道如何将 xuggle 推送到我的 tomcat 服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:21:19.373

你可能想看看[Red5](http://www.red5.org/)媒体服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:26:19.217

由于您正在使用 jsp，因此只需让您的代码写出[HTML 5 视频元素](https://developer.mozilla.org/en-US/docs/Using_HTML5_audio_and_video "HTML5 视频标签")。这将提供基本的视频功能。这将适用于所有符合 HTML 5 的浏览器以及所有移动设备。

# c# - 使用 Sharepoint 事件接 收器在文档库中创建文件夹

> ID：12676531
> 
> 赞同：3
> 
> 时间：2012-10-01T15:42:06.060
> 
> 标签：c#, sharepoint-2010, event-receiver

我正在使用以下代码在我的文档库中创建一个文件夹。该事件被触发并执行到我的代码的最后一行，没有任何问题。但是，该文件夹未在我的文档库中创建或列出。

```
public override void ItemAdded(SPItemEventProperties properties)
{
    base.ItemAdded(properties);        

    string strDashListRoot = "http://win-hmpjltdbh5q:37642";
    using (SPSite site = new SPSite(strDashListRoot))
    {
        using (SPWeb web = site.OpenWeb())
        {
            web.AllowUnsafeUpdates = true;                    

            SPList spl = web.Lists["client_documents"];
            spl.Items.Add("", SPFileSystemObjectType.Folder, "Helllworld");
            spl.Update();
            web.AllowUnsafeUpdates = false;
        }
    }           
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T15:46:19.703

你需要

```
var i = spl.Items.Add("", SPFileSystemObjectType.Folder, "Helllworld");
i.Update(); 
```

代替

```
spl.Items.Add("", SPFileSystemObjectType.Folder, "Helllworld");
spl.Update(); 
```

（假设你的`Add`电话没问题 - 我觉得没问题）

（另外，你确定你需要`AllowUnsafeUpdates`处理吗？当你在`ItemAdded`处理程序中时，我没想到它是必要的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T22:08:40.880

我根据 Rawling 的回答开发了以下代码：

```
private static void CreateFolder(SPWeb web, SPList spList, SPListItem currentItem, string folderName)
{
    if (currentItem.FileSystemObjectType != SPFileSystemObjectType.Folder)
    {
        string itemUrl = web.Url + "/" + currentItem.Url.Substring(0, currentItem.Url.LastIndexOf('/'));

        var folder = spList.Items.Add(itemUrl, SPFileSystemObjectType.Folder, folderName);
        string folderUrl = itemUrl + "/" + folder.Name;

        if (!FolderExists(folderUrl, web))
        {
            try
            {
                folder.Update();
            }
            catch (Exception)
            {
                throw;
            }
        }
    }
}

public static bool FolderExists(string url, SPWeb web)
{
    if (url.Equals(string.Empty))
    {
        return false;
    }

    try
    {
        return web.GetFolder(url).Exists;
    }
    catch (ArgumentException)
    {
        throw;
    }
    catch (Exception)
    {
        throw;
    }
} 
```

# php - 这个 php json 脚本有什么问题？

> ID：12676536
> 
> 赞同：-1
> 
> 时间：2012-10-01T15:42:13.157
> 
> 标签：php, json, api, twitter, scripting

> **可能重复：**
> [如何在 PHP 中获取有用的错误消息？](https://stackoverflow.com/questions/845021/how-to-get-useful-error-messages-in-php)

我无法让这个 php json 脚本工作。我正在尝试使用他们的 api 从 twitter 获取屏幕名称。

这就是我所做的。

```
$send_request = file_get_contents('https://api.twitter.com/1/users/lookup.json?screen_name=frankmeacey');

$request_contents = json_decode($send_request);

echo $request_contents->screen_name; 
```

为什么每次都返回一个空白值？我试过在这里和那里改变一些东西，但它不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:45:23.360

因为你得到的数据结构是一个对象数组，而不是一个对象。

```
echo $request_contents[0]->screen_name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:45:59.083

该数据看起来是数组中的一个对象。尝试

```
echo $request_contents[0]->screen_name; 
```

最好先检查它是一个数组并从中获取第一个用户：

```
if (is_array($request_contents)) {
    $user_info = $request_contents[0];
}

if (isset($user_info)) {
    echo $user_info->screen_name;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T15:47:28.620

它是

```
$request_contents[0]->screen_name 
```

因为 $request_contents 是一个对象数组，而不是对象本身。

做一个

```
var_dump($request_contents); 
```

查看 json 的结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T15:48:35.073

尝试使用

```
print_r($request_contents); 
```

或者

```
var_dump($request_contents); 
```

用于检查数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T15:50:29.000

你的页面不应该是空白的......你应该得到一个错误，`Notice: Trying to get property of non-object in`因为你正在调用`$request_contents->screen_name`它是无效的。

尝试告诉 PHP 输出所有错误使用

```
error_reporting(E_ALL); 
```

我也更喜欢 CURL 它更快

```
$ch = curl_init("https://api.twitter.com/1/users/lookup.json?screen_name=frankmeacey");
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$result = curl_exec($ch);
curl_close($ch);

$request_contents = json_decode($result);
var_dump($request_contents[0]->screen_name); 
```

输出

```
 string 'frankmeacey' (length=11) 
```

# android - 如何为我的 android 方法编写单元测试？

> ID：12676539
> 
> 赞同：1
> 
> 时间：2012-10-01T15:42:31.453
> 
> 标签：android, unit-testing, junit, android-testing

我写了一些代码。现在我需要为它编写单元测试。我不知道如何为这种方法编写它：

```
 public void parceAuthResult()
{
    NodeList nodeList = baseDocElement.getElementsByTagName("LoginResult");
    if(nodeList != null && nodeList.getLength() > 0)
    {
        for(int i = 0 ; i < nodeList.getLength();i++)
        {
            Element el = (Element)nodeList.item(i);
            NodeList rootResults = el.getElementsByTagName("a:RootResults");
            if (rootResults.getLength() != 0)
                authResult = true;
            else
                authResult = false;
        }
    }
} 
```

baseDocElement 和 authResult 定义为

```
private Element     baseDocElement;
private Boolean     authResult; 
```

**我使用junit**和**反射**测试的其他一些方法

 **请帮忙，我不知道如何测试。**

# linux - linux if/elif/fi 命令

> ID：12676541
> 
> 赞同：1
> 
> 时间：2012-10-01T15:42:46.903
> 
> 标签：linux, bash, if-statement, sh

我有个问题。如果我的`if`陈述是`true`，它会跳过`elif`检查并直接进入`fi`还是仍然检查`elif`陈述？

脚本示例：

```
if [ argument1 || argument2 ]  
     then  
          do something.  
elif [ argument2 || argument3 ]  
     then  
          do something.  
elif [ argument2 || argument4 ]  
     then  
          do somthing.  
else  
          do somthing else.  
fi 
```

我的问题是，如果我的第一个陈述是真的，我希望我的`elif`陈述仍然受到检查。如果我的第一个陈述是......等，`if`我还希望我的陈述得到检查。基本上我希望我的所有和陈述都被检查。 `elif``elif``true``if``elif`

注意。我意识到我可以更改我的所有`elif`to`if`语句，这可能会解决我的问题，因为所有`if`语句都会被检查。但这个问题也是出于好奇和对`if`and`elif`语句的更好了解。

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T15:50:36.847

`elif`如果先前的其中一个匹配，则不检查该语句。`elif`是“else if”的缩写；这意味着如果前一个不匹配，您应该检查其他条件。

正如您所说，您可以`if`为您的用例使用多个语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T15:51:07.220

一旦满足一个条件，`if`语句就会终止，其余的`elif`条件将不会被检查。

例子：

```
if echo foo
then
   echo "in foo"
elif echo bar
then
   echo "in bar"
fi 
```

印刷

```
foo
in foo 
```

如果您希望它们全部检查，那么您需要按照您的建议将其分解为多个 if 语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-18T00:48:31.780

虽然我知道这是一篇旧帖子，但对于 OP 最初询问的内容，最好使用 BASH >=4.0 的 case/esac 语句和`;;&`终止符。而且，由于[BASH 4.0 于 2009 年 2 月 20 日发布](https://tldp.org/LDP/abs/html/bashver4.html#NCTERM)，他们应该能够在该脚本中使用它。

像这样的东西：

```
 case $anyargument in
        [[ argument1 || argument2 ]] )
            do something
            ;;&
        [[ argument2 || argument3 ]] )
            do something
            ;;&
        [[ argument2 || argument4 ]] )
            do something
            ;;
        * ) 
            do something else.
            ;;
    esac 
```

现在，我在最后一次实际测试中使用了常规`;;`终止符，因此它不会落入 catch-all (READ: `else`) 语句。但是按照编写的方式，将检查所有测试，如果它们解决`true`了，代码将被执行。

希望这会有用。

# c++ - 以编程方式关闭对话框 - win32

> ID：12676542
> 
> 赞同：4
> 
> 时间：2012-10-01T14:15:35.430
> 
> 标签：c++, windows

我正在开发一个应用程序来检测弹出对话框，然后自动将其关闭。我将其编写为 C++/Win32 应用程序。该对话框是由 IE 7 生成的，我可以检测到该窗口，但是几种让“确定”按钮“单击”的方法都失败了。

搜索其他人的解决方案，将这些消息发送到按钮句柄似乎在很多情况下都有效：

```
PostMessage( handle, WM_LBUTTONDOWN, 0, 0 );
PostMessage( handle, WM_LBUTTONUP, 0, 0 );
PostMessage( handle, BM_SETSTATE, 1, 0 ); 
```

不过，它对我的​​测试中的按钮状态没有影响。

我可以将制表符发送到主窗口并看到 OK 按钮获得焦点，但随后发送返回字符什么也不做。

为了了解更多信息，我使用 Spy++ 来获取有关窗口层次结构的信息，以及当我手动单击“确定”按钮时传递了哪些消息。

查看消息日志并阅读有关 WM_MOUSEACTIVATE 的信息以提供解决方案。日志信息显示 0002166C 是按钮窗口。所以在我的代码中我尝试了这个：

```
GetClassNameA( handle, str, str_size );

if( strcmp( str, "Internet Explorer_Server" ) != 0 )
    return TRUE; // Not the window we're interested in.

// Send a message to activate the button window and have it process a mouse click.
PostMessage( handle, WM_MOUSEACTIVATE, (WPARAM) dialog_handle, MAKELPARAM( HTCLIENT, WM_LBUTTONDOWN ); 
```

基于窗口层次结构和消息日志，我认为类名为“Internet Explorer_Server”的窗口是按钮。也许我错了，因为它看起来确实是一个奇怪的按钮类名......

下面是窗口层次结构图像的链接，当我手动单击“确定”按钮时的消息日志。最后是在 1 秒计时器票上执行的代码，用于查找窗口。

任何见解和帮助表示赞赏！

窗口层次结构、源、窗口消息和测试对话框源的图像可在此处获得：

[https://sites.google.com/site/matthewmillersmiscellanea/Home/](https://sites.google.com/site/matthewmillersmiscellanea/Home/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T15:57:58.930

理想情况下，您应该创建一个导出全局[CBT](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644959%28v=vs.85%29.aspx#wh_cbthook)窗口挂钩的 DLL。这将允许您在将要创建对话框时获得早期通知。这将避免通过不断轮询来消耗资源。

一旦您检测到将要创建一个对话框，您有两个选择：

**1) 防止创建对话框。**

我不推荐这样做，它会导致代码出现各种问题，这些问题完全期望 CreateDialog() 返回有效的 HWND；

**2）异步控制对话框。**

我们通过使用带有注册用户消息的 PostMessage 并通过挂钩 WNDPROC 来获取它来实现这一点。当您收到此消息时，您必须决定如何终止您所在的对话框。

有多种退出对话框的方法：

a) 使用 WM_COMMAND(BN_CLICKED) 模拟按下 OK、Cancel、Abort、No 按钮（如 Chris 评论）。您可以使用 GetDlgItem()，查找 WindowText 并做出选择。但是，这不适用于非美国英语。不过，在这里利用 Accessibility API 可能还有一些距离。

b) 使用 PostMessage(WM_CLOSE, m_hWnd) 模拟关闭对话框。这并不总是按预期工作 - 一些对话框没有 [X] 关闭按钮，并且它们的客户端代码期望按下特定按钮。

[c) 使用SendInput() API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)模拟用户输入。这解决了其中包含反弹出杀手代码的对话框:)

我们的最终解决方案是一种基于规则+启发式的方法，它有一个配置文件，当应用程序/IE 对话框更改其 ID、类名或父类名时，我们可以调整该配置文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-18T12:36:46.413

在您知道窗口类名称和窗口标题的情况下不断关闭特定的弹出窗口

```
 #define UNICODE

  #include <windows.h>

  #pragma comment(lib, "user32")

  int main (int nn, char ** aa)
  {
     while (true) {
        HWND iHandle = FindWindow (L"theWindowClassName", L"theWindowCaption");
        if (iHandle > 0) SendMessage(iHandle, WM_SYSCOMMAND, SC_CLOSE, 0);
        Sleep (200); // check 5 times per second
     }
     return 0;
  } 
```

如果一个未知或太通用（例如“对话框”），您可以通过传递一个 null 来省略它

```
 HWND iHandle = FindWindow (L"theWindowClassName", 0);
 or
 HWND iHandle = FindWindow (0, L"theWindowCaption"); 
```

当然，这将关闭所有具有给定名称的窗口。

# python - 使用标准 json 和 urllib2 从网站获取 JSON 对象

> ID：12676543
> 
> 赞同：-1
> 
> 时间：2012-10-01T15:43:00.703
> 
> 标签：python, json, urllib2

我编写了一个代码，使用 json 和 requests 从 github 网站提取 JSON 对象：

```
#!/usr/bin/python

import json
import requests

r = requests.get('https://github.com/timeline.json') #Replace with your website URL

with open("a.txt", "w") as f:
    for item in r.json or []:
        try:
            f.write(item['repository']['name'] + "\n") 
        except KeyError: 
            pass 
```

这工作得很好。但是，我想使用 urllib2 和标准 json 模块做同样的事情。我怎么做？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:50:06.753

只需使用[urlopen](http://docs.python.org/library/urllib2.html#urllib2.urlopen)下载数据并使用 Python 的[`json`模块](http://docs.python.org/library/json.html)进行解析：

```
import json
import urllib2
r = urllib2.urlopen('https://github.com/timeline.json')

with open("a.txt", "w") as f:
    for item in json.load(r) or []:
        try:
            f.write(item['repository']['name'] + "\n") 
        except KeyError:
            pass 
```

# binary-search-tree - 二叉搜索树节点大小

> ID：12676544
> 
> 赞同：1
> 
> 时间：2012-10-01T15:43:05.750
> 
> 标签：binary-search-tree

我对如何在二叉搜索树中排列节点的顺序感到有些困惑。二叉搜索树左边的子树中是否存在比根节点大的节点？

例如，下面会是二叉搜索树吗？

```
 2
   / \
  1   4
 / \
    3 
```

上面让我困惑的是1（3）的右子树是否可以大于原始根节点（2）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T15:48:09.647

不，左边不能有大于根的节点。二叉搜索树具有以下属性（来自 wiki）：

1.  节点的左子树仅包含键小于节点键的节点。
2.  节点的右子树仅包含键大于或等于节点键的节点。
3.  左右子树也必须是二叉搜索树。

# c# - Windows Phone - 对背景音乐感到困惑

> ID：12676548
> 
> 赞同：0
> 
> 时间：2012-10-01T15:43:14.433
> 
> 标签：c#, windows-phone-7, background-audio

在 Windows Phone 项目中，我可以使用以下方式在后台播放音乐：

xml:

```
<MediaElement x:Name="mediaplayer"/> 
```

C＃：

```
 mediaplayer.Source = new Uri("Woodkid_IRON_AssassinsCreed.mp3", UriKind.Relative);
 mediaplayer.Play(); 
```

但在 msdn 中，微软这样说：http: [//msdn.microsoft.com/en-us/library/hh202978%28v=vs.92%29.aspx](http://msdn.microsoft.com/en-us/library/hh202978%28v=vs.92%29.aspx)

有什么区别？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:51:36.310

您的示例将播放音乐，但不会播放“背景”音乐。背景音频意味着如果您离开应用程序，音乐将继续播放。以您的示例为例，如果您离开应用程序，音乐将停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T15:54:49.750

基本区别在于，它`MediaElement`是一个可以渲染到页面的实际控件，但它不会将音乐作为后台任务播放。根据您的要求，您可以使用其中任何一种，但这`BackgroundAudioPlayer`是在后台播放音乐同时`MediaElement`可以在您位于包含`MediaElement`.

编辑：或者肖恩上面说的！:P

# tomcat - 使用gksu调用tomcat启动后直接关闭

> ID：12676557
> 
> 赞同：0
> 
> 时间：2012-10-01T15:43:42.877
> 
> 标签：tomcat, gnome, gksudo

我正在尝试在 gnome 菜单中使用启动器来启动 Tomcat 服务器。为此，我使用了以下命令“gksu sh /myhome/tomcat_starter”。脚本“tomcat_starter”在启动服务器之前定义了一些环境变量：

```
#!/bin/bash

JAVA_HOME="/myhome/java" 
export JAVA_HOME
PATH=$PATH:$JAVA_HOME/bin
export PATH

CATALINA_HOME="/myhome/tomcat"
export CATALINA_HOME

$CATALINA_HOME/bin/startup.sh 
```

当启动器启动时，它会按预期要求输入 su 密码并启动 tomcat 服务器。但是服务器在启动后直接关闭。

这是从日志文件中截取的部分

```
INFO: Deploying web application directory docs
Oct 01, 2012 11:28:06 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory ROOT
Oct 01, 2012 11:28:06 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-80"]
Oct 01, 2012 11:28:06 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Oct 01, 2012 11:28:06 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 1085 ms
Oct 01, 2012 11:28:08 AM org.apache.coyote.AbstractProtocol pause
INFO: Pausing ProtocolHandler ["http-bio-80"]
Oct 01, 2012 11:28:09 AM org.apache.coyote.AbstractProtocol pause
INFO: Pausing ProtocolHandler ["ajp-bio-8009"]
Oct 01, 2012 11:28:10 AM org.apache.catalina.core.StandardService stopInternal
INFO: Stopping service Catalina
Oct 01, 2012 11:28:10 AM org.apache.coyote.AbstractProtocol stop
INFO: Stopping ProtocolHandler ["http-bio-80"]
Oct 01, 2012 11:28:10 AM org.apache.coyote.AbstractProtocol stop
INFO: Stopping ProtocolHandler ["ajp-bio-8009"]
Oct 01, 2012 11:28:10 AM org.apache.coyote.AbstractProtocol destroy
INFO: Destroying ProtocolHandler ["http-bio-80"]
Oct 01, 2012 11:28:10 AM org.apache.coyote.AbstractProtocol destroy
INFO: Destroying ProtocolHandler ["ajp-bio-8009"]<code> 
```

有人知道为什么tomcat服务器会关闭吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:33:01.407

我发现通过使用“nohup”命令，服务器将继续在后台运行。所以启动器命令现在是“nohup gksu sh /myhome/tomcat_starter”，它运行良好。

# php - Drupal 7 - 注意：未定义的索引：und in include()

> ID：12676560
> 
> 赞同：2
> 
> 时间：2012-10-01T15:43:50.443
> 
> 标签：php, drupal

我收到此错误： **注意：未定义索引：包含（）中的 und（/home/cliffdwellerproductions/dev.cliffdwellerdigital.com/Dahl/sites/all/themes/basic/templates/node--page2.tpl 的第 24 行.php）。**

代码是：

```
if ($node->field_body_left !== NULL) : 
$text = trim($node->field_body_left['und']['0']['value']);
else:
$text = ''; 
```

请帮忙，因为我无法定义变量...

阿尔夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:49:45.790

您的 $node->field_body_left 变量存在，但它没有“und”元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T16:12:19.687

看起来您正在尝试检查一个空字段，但是`$field_body_left!==null`如果变量是字面意思，您正在使用 which 只会是 false `null`。当一个 drupal 字段存在但为空时，它通常等于`array()`. 使用`!=`而不是`!==`，然后它将正确检测空变量和空数组并继续前进。

--

额外信息：如果变量有一个值，它的结构将是：

```
$field_body_left = array(
    'und' => array(
        0 => array (
             'value' => YOURVALUE
        )
    )
) 
```

但由于它没有值，它的结构是：

```
$field_body_left = array() 
```

# python - 蟒蛇 2.7.2。如何将多个文件中的特定行附加到一个文件中。

> ID：12676566
> 
> 赞同：-2
> 
> 时间：2012-10-01T15:44:04.280
> 
> 标签：python, append, lines

我正在尝试从多个文本（nmap）文档中收集特定行，然后以表格格式创建一个新文件。我还没有进入表格部分，因为我无法让附加工作。

```
#imports
import os

#Change directories
os.chdir ("M:\\Daily Testing")

#User Input
print "What is the name of the system being scanned?"
sys = raw_input("> ")

#Subfolder selected
os.chdir (sys)
os.chdir ("RESULTS")

#variables
tag = ["/tcp", "/udp"]
fout = [sys + " Weekly Summary.csv"]

import glob
for filename in glob.glob("*.nmap"):
    with open(filename, "rU") as f:
        for line in f:
            if not line.strip():
                continue
            for t in tag:
                if t in line:
                    fout.write(line)
                else:
                   continue 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T15:47:59.753

您忽略了打开要附加到的文件（`fout`是列表，而不是文件对象，因此它没有`.write()`方法）。

换行

```
fout = [sys + " Weekly Summary.csv"] 
```

至

```
with open(sys+" Weekly Summary.csv", "w") as fout: 
```

并相应地缩进以下行。

所以，像这样：

```
<snip>
import glob
with open(sys + " Weekly Summary.csv", "w") as fout:
    for filename in glob.glob("*.nmap"):
        with open(filename, "rU") as f:
            for line in f:
                if not line.strip():
                    continue
                for t in tag:
                    if t in line:
                        fout.write(line)
                    else:
                       continue 
```

# django - 在同一个 apache 服务器中使用 SSL 运行两个 django 应用程序

> ID：12676573
> 
> 赞同：1
> 
> 时间：2012-10-01T15:44:53.620
> 
> 标签：django, ssl, apache2, mod-wsgi

我已经`apache2`安装`ubuntu lucid`并启用了。现在`ssl`我正在使用. 我已经配置了文件，如下所示。`django``myapp1``mod_wsgi``/etc/apache2/sites_enabled/ssl``/etc/apache2/sites-available/ssl`

现在我可以使用 url 运行我的应用程序

```
https://127.0.0.1/myapp1 
```

我需要`myapp2`在同一台服务器上运行另一个 django 应用程序（比如），它也使用 SSL。那么，我应该如何配置它？有人可以帮我吗？

```
<VirtualHost *:443>
    ServerAdmin webmaster@localhost

    DocumentRoot /home/me/dev/python/django/myapp1

        SSLEngine on
        SSLOptions +StrictRequire
        SSLCertificateFile /etc/ssl/certs/server.crt
        SSLCertificateKeyFile /etc/ssl/private/server.key
    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>
    <Directory /var/www/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        allow from all
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
    </Directory>

    ErrorLog /var/log/apache2/error.log
    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog /var/log/apache2/access.log combined
    WSGIScriptAlias /myapp1 /home/me/dev/python/django/myapp1/myapp1.wsgi
    Alias /site_media/ /home/me/dev/python/django/myapp1/media/
    Alias /doc/ "/usr/share/doc/"
    <Directory "/usr/share/doc/">
        Options Indexes MultiViews FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
        Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>

</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T01:07:34.130

通过增加：

```
WSGIScriptAlias /myapp2 /home/me/dev/python/django/myapp2/myapp2.wsgi 
```

如果他们不能共享相同的静态媒体文件，您将需要解决任何冲突。也就是说，让每个人在不同的位置都有媒体，并为每个 Django 项目适当地配置设置。

# c# - RedirectPermanent 在 ASP.NET MVC 3 应用程序中导致奇怪的结果

> ID：12676574
> 
> 赞同：1
> 
> 时间：2012-10-01T15:44:58.650
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, redirect

这很奇怪。可能还有其他问题，但这是交易。我正在制作一个应用程序，它只是收集信息并重定向到一个 URL，并将信息作为 URL 上的参数传递。我使用的是 ASP.NET MVC 3 (.NET 4.0) 框架，而且我以前从未需要重定向到应用程序外部的 URL。

我最初的尝试是：

```
return RedirectPermanent("http://www.google.com?" + qrystring); 
```

这重定向到谷歌，但我没有看到参数。我做了一点工作并将 URL 更改为应用程序内部的一个，但我仍将使用完整的 URL 而不是路由，因为我想确保值到达那里。现在，当我在本地调试应用程序并将鼠标悬停在断点上时，它会显示：

“当前不会命中断点。没有为此文档加载任何符号。”

此外，无论我在调用“RedirectPermanent”时将 URL 更改为什么，它总是会加载 Google 页面。

我已经清除了临时 Internet 文件历史记录并确保 ASPNET 用户可以访问该文件夹。我也关闭并重新打开了解决方案。我也尝试将“RedirectPermanent”更改为“Redirect”，但这并没有解决它。在第一次点击 RedirectPermanent 语句之前，断点在此应用程序中运行良好。

仅供参考：我正在运行 Windows XP 并且正在使用 IIS Express（ASP.NET 开发服务器）。我也在本地以调试模式运行应用程序，而不是在服务器机器上运行。想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T17:11:55.293

这最终是一件相当简单的事情。

Chrome 缓存了 RedirectPermanent 网址。当其他初始化完成时，调试符号会一直加载到应用程序中。Visual Studio 加载了我的应用程序，chrome 看到正在使用的 url 执行了重定向。

我在 chrome 中清除了我的缓存，然后，一切都恢复正常了。

# matlab - 神经网络层设计

> ID：12676579
> 
> 赞同：1
> 
> 时间：2012-10-01T15:45:22.910
> 
> 标签：matlab, neural-network

我对神经网络有点陌生。这是我在 Matlab 中尝试过的一段代码

```
P= 0 + (rand(1) * 10);
T = (P-1)/(P+1);
net = newelm(P,T,5);
net = train(net,P,T);
Y = sim(net,P); 
```

现在，当我在 matlab 的命令窗口中键入 net.B{1} 和 net.LW{1} 时，我得到了偏置权重和层权重，但我也发现这些权重值会根据输入值不断变化。

那么，对于特定函数（以及任何输入值），我是否可以有一个预定义的权重值，即不会改变的权重值，以便使用这些权重值，我可以为特定函数设计一个神经网络。就像这里我有 T ，它通过一个特定的方程与 P 相关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:47:35.120

如果您的其中一个输入与输出变量具有已知关系，请将其从网络中取出，而不是创建复杂的解决方法，例如修复网络权重。（由于网络内部的变量相互作用和非线性变换，这*将是复杂的。）*

例如

```
Y = a*X1 + 3.6*X2  # relationship between Y and X2 is known 
```

然后在这个关系上使用神经网络：

```
Y - 3.6*X2 = a*X1
^^^^^^^^^^   ^^^^
[target]     [input] 
```

# javascript - 使用来自项目依赖项的输入定义 Gradle 任务？

> ID：12676587
> 
> 赞同：4
> 
> 时间：2012-10-01T15:45:45.747
> 
> 标签：javascript, dependencies, gradle, scripting-language

**背景：**我有一个多项目 Gradle 构建，并且我定义了一个 Gradle 任务，它在 Exec 任务中运行 JavaScript 单元测试。此任务的输入是项目中的 JavaScript 文件，因此只有在修改了其中一个源文件时才会重新运行。该任务从主项目添加到所有 JavaScript 项目。

**问题：**我想扩展它，以便在项目中的 JavaScript 文件或其任何*项目依赖*项发生更改时重新运行测试。这怎么做最好？

如果将下面的代码放在每个子项目构建文件中（在依赖项声明之后），下面的代码就可以工作，但是我们有 20 多个 JavaScript 子项目，我想保持 DRY。

```
project.ext.jsSourceFiles = fileTree("src/").include("**/*.js*")

task testJavaScript(type: Exec, dependsOn: configurations.js) {
    inputs.files resolveJavascriptDependenciesFor(project)
    outputs.file "report.xml"

    // Run tests in JSTestDriver using command line call...    
}

def resolveJavascriptDependenciesFor(project) {
    def files = project.jsSourceFiles
    project.configurations.js.allDependencies.each {
        files = files + resolveJavascriptDependenciesFor(it.dependencyProject)
    }
    return files
} 
```

有更好的解决方案吗？也许我不必自己解决所有文件依赖项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:07:50.157

正如之前在答案中所写，在子项目闭包中添加 jsTest 任务将使为每个子项目添加 jstesting 支持变得非常容易。我认为您可以通过将源文件声明为依赖项来简化输入设置：

```
dependencies {
     js filetree("src/main").include("**/*.js")
} 
```

和

```
subprojects { subproj ->
    task testJavaScript(type: Exec, dependsOn: configurations.js) {
        inputs.files subproj.configurations.js
        outputs.file "report.xml"

        commandLine  ...
    }    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:06:27.633

有可能做这样的事情吗？

```
allprojects {project ->
   task testJavaScript(type: Exec, dependsOn: configurations.js) {
      inputs.files resolveJavascriptDependenciesFor(project)
     // Run tests in JSTestDriver using command line call...    
   }
}

def resolveJavascriptDependenciesFor(project) {
   def files = project.jsSourceFiles
   project.configurations.js.allDependencies.each {
      files = files + resolveJavascriptDependenciesFor(it.dependencyProject)
   }
   return files
} 
```

这样任务就在所有项目上，并且将被递归调用。不完全确定这行得通，但我认为这是要走的路

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:13:01.773

我找到了一个可行但不是很好的解决方案，使用与问题中相同的依赖规范。它是在主项目中以稍微不同的顺序加载 gradle 文件。

大师`build.gradle`：

```
subprojects {
    configurations {
        js
    }

    // Apply the subproject's build.gradle, but with another name (that isn't automatically loaded)
    if (project.file('depends.gradle').exists()) {
        apply from: project.file('depends.gradle')
    }

    apply from: project.parent.file('javaScriptProjectTasks.gradle')
} 
```

与以前的*非工作*大师相比`build.gradle`

```
subprojects {
    configurations {
        js
    }

    apply from: project.parent.file('javaScriptProjectTasks.gradle')
    // The subproject's build.gradle is automatically loaded
} 
```

# java - Java - 括号问题

> ID：12676588
> 
> 赞同：1
> 
> 时间：2012-10-01T15:45:51.700
> 
> 标签：java, brackets

我在放置括号时遇到了一些麻烦。我想在我的主要方法范围内编写一些方法，但我总是以一堆红线和错误告终，告诉我“这一行有多个标记 - 令牌“void”上的语法错误，@预期 - addVehicleBooking无法解析为类型”

我不希望我的方法返回任何东西，我只想让它们执行一些代码并在屏幕上打印一些东西。

**编辑：**

这是代码的开始，无需担心未使用的变量等。感谢大家的帮助=]。

```
import java.util.Scanner;

public class FerryMenu {

public static void main(String[] args)
{
    Scanner input = new Scanner(System.in);
    Scanner scan = new Scanner(System.in);

    public static void addVehicleBooking()
    {
        String booking_ID = "";
        System.out.print("Enter your booking ID");
        booking_ID = input.next();
        String registration = "";
        System.out.print("Enter registration number");
        registration = input.next();
        String make_model = "";
        System.out.print("Enter vehicle make/model");
        make_model = input.next();
        int number_passengers = 1;
        System.out.print("Enter number of passengers");
        number_passengers = scan.nextInt();
    }

    String menu_choice = "";
    while(!"X".equals(menu_choice)){
        System.out.println("*** Ferry Ticketing System Menu ***");
        System.out.println("A   -   Add Vehicle Booking");
        System.out.println("B   -   Display Booking Info");
        System.out.println("C   -   Update Insurance Status");
        System.out.println("D   -   Display Booking Summary");
        System.out.println("X   -   Exit");

        System.out.print("Enter your selection: ");
        menu_choice = input.next();     
    }

} 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T15:47:53.033

您不能在方法中声明方法。这与括号无关。它与语法有关。

好的，Dean，在这里我将再次描述它..

首先`throw away`，您编写的代码.. 让我们重新开始..

请按照以下步骤解决您的问题：-

*   创建一个类说`Demo`
*   向该类添加一个方法，`getUserInput()`
*   将 main 方法也添加到您的类中。
*   有一个构造函数（0-arg）
*   现在，您的程序从`main()`.. 开始执行。如果您想接受用户输入..`getUserInput()`从这里调用您的方法.. 作为第一条语句..
*   在您的`getUserInputMethod()`. 中，读取所有输入后，调用您的构造函数来初始化您的`instance variables`..

*   在此之后，您`getUserInput()`将控制权返回给您的`main()`方法..您可以从那里继续您的代码..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T15:47:22.653

您不能在方法中定义方法。在方法外部和类内部声明它。

```
public class FerryMenu {

    public static void addVehicleBooking()  
    {
         //...
    }

    public static void main(String[] args)   
    {   
         Scanner input = new Scanner(System.in);   
         Scanner scan = new Scanner(System.in);  

         // just call the method here
         addVehicleBooking();

         //...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T15:47:46.053

您正在 main 方法中编写 addvehicalBooking 方法。因此那些红线：从main中删除该方法。

```
public static void main(String[] args)
{
    Scanner input = new Scanner(System.in);
    Scanner scan = new Scanner(System.in);
}
    public static void addVehicleBooking()
    {
        String booking_ID = "";
        System.out.print("Enter your booking ID");
        booking_ID = input.next();
        String registration = "";
        System.out.print("Enter registration number");
        registration = input.next();
        String make_model = "";
        System.out.print("Enter vehicle make/model");
        make_model = input.next();
        int number_passengers = 1;
        System.out.print("Enter number of passengers");
        number_passengers = scan.nextInt();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T15:49:22.263

尝试取出`addVehicleBooking()` main 并调用它并在构造函数中声明变量

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T15:49:26.153

您的主要静态方法中有一个静态方法，这可能会导致问题。您是否尝试过将 addVehicleBooking() 方法移动到公共类 FerryMenu 和 main 方法之间的空间？（addVehicleBooking() 方法应该是 FerryMenu 类的成员，而不是 main 方法）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T15:49:49.423

为什么要在 public static void main 中创建一个静态方法。我不认为有必要做到这一点。

从“static void addVehicleBooking”中删除静态一词。我将编辑此答案并尽快添加更正的代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-01T15:53:56.117

您不能在方法中定义方法。你可以像这样在类中定义它：

```
import java.util.Scanner;

public class FerryMenu {

static Scanner input = new Scanner(System.in);
static Scanner scan = new Scanner(System.in);

public static void addVehicleBooking()
{
    String booking_ID = "";
    System.out.print("Enter your booking ID");
    booking_ID = input.next();
    String registration = "";
    System.out.print("Enter registration number");
    registration = input.next();
    String make_model = "";
    System.out.print("Enter vehicle make/model");
    make_model = input.next();
    int number_passengers = 1;
    System.out.print("Enter number of passengers");
    number_passengers = scan.nextInt();
}

public static void main(String[] args)
{

    String menu_choice = "";
    while(!"X".equals(menu_choice)){
        System.out.println("*** Ferry Ticketing System Menu ***");
        System.out.println("A   -   Add Vehicle Booking");
        System.out.println("B   -   Display Booking Info");
        System.out.println("C   -   Update Insurance Status");
        System.out.println("D   -   Display Booking Summary");
        System.out.println("X   -   Exit");

        System.out.print("Enter your selection: ");
        menu_choice = input.next();     
    }
}
} 
```

并且字段“ *input* ”和“ *scan* ”必须定义为*静态*，因为您将它们调用为静态

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-01T15:56:54.360

`addVehicleBooking`应该放在`main`外面。顺便说一句：我希望您在某处使用用于用户输入的变量，因为在发布的代码中未使用。

重构后的代码应如下所示：

```
import java.util.Scanner;

public class FerryMenu {
public static void main(String[] args) {
    addVehicleBooking();

}

public static void addVehicleBooking() {
    String menu_choice = "";
    Scanner input = new Scanner(System.in);
    Scanner scan = new Scanner(System.in);

    String booking_ID = "";
    System.out.print("Enter your booking ID");
    booking_ID = input.next();
    String registration = "";
    System.out.print("Enter registration number");
    registration = input.next();
    String make_model = "";
    System.out.print("Enter vehicle make/model");
    make_model = input.next();
    int number_passengers = 1;
    System.out.print("Enter number of passengers");
    number_passengers = scan.nextInt();

    while (!"X".equals(menu_choice)) {
        System.out.println("*** Ferry Ticketing System Menu ***");
        System.out.println("A   -   Add Vehicle Booking");
        System.out.println("B   -   Display Booking Info");
        System.out.println("C   -   Update Insurance Status");
        System.out.println("D   -   Display Booking Summary");
        System.out.println("X   -   Exit");
        System.out.print("Enter your selection: ");
        menu_choice = input.next();
    }

}

} 
```

# actionscript-3 - 在 MVC 中，模型可以利用服务将一些数据加载到视图的列表框中吗？

> ID：12676598
> 
> 赞同：0
> 
> 时间：2012-10-01T15:46:28.410
> 
> 标签：actionscript-3, model-view-controller

在MVC中是否合法，以便“模型”利用“服务”加载一些数据（来自网络），以便加载后的数据可以传递到“视图”的列表框中？

我的重点是“模型可以直接将服务用于此类目的吗？”

五。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:02:53.507

我想说的是`Controller`，使用从服务获得的数据`services`并填充它们的责任。`model`

[此链接](http://www.swinburne.edu.au/design/tutorials/P-flash/T-The-Model-View-Controller-Design-Pattern-in-Actionscript-3/ID-144/)应该更清楚地说明 Actionscript-3 中模型、视图和控制器的职责

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T01:14:17.613

我同意 Anshu 的回答，但如果我将它们计划为非常小的规模，我个人对我自己的项目中的这种事情很灵活，也就是说，创建清晰的 MVC 分离似乎并不总是值得花时间。还有基于 MVC 的 MVVM，维基百科上有一些不错的信息，你可以在其他地方找到它[http://en.wikipedia.org/wiki/Model_View_ViewModel](http://en.wikipedia.org/wiki/Model_View_ViewModel)

在设计模式的使用方面没有一成不变的规则，但是如果您设置自己的规则并在其中工作（特别是在一个或多个抽象层中遵循 MVC）可能会很有帮助，特别是在大型项目或团队所在的地方涉及。

所以关于使用服务的模型的问题的答案是肯定的，这是可能的，它是否符合严格的 MVC 模式，不。

模型应该只是以数据与其他数据相关的任何方式保存数据的结构，这就是模型的组成部分。控制器处理调用服务和更新模型的繁琐工作。视图只是在模型发生更改时绑定或更新，并使用控制器（通常在 as3 中通过使用 ui 组件上的事件处理程序）对模型进行正确的更新（或调用然后更新模型）。

您可能会有额外的辅助类，它们可能适合构成模型、视图或控制器的部分之间或之外的某个地方，这没关系，但您应该意识到这些服务的用途并很好地记录它们确保在整个设置中以某种方式更优雅地处理它们是没有意义的。

# javascript - 验证脚本是否会导致我的 javascript 显示/隐藏 DIV 出现问题？

> ID：12676599
> 
> 赞同：1
> 
> 时间：2012-10-01T15:46:31.220
> 
> 标签：javascript, validation

正在发生的事情的屏幕截图：http: [//i.imgur.com/DrGZx.png](http://i.imgur.com/DrGZx.png)

我的测试按钮：http: [//jsfiddle.net/KtrQh/8/](http://jsfiddle.net/KtrQh/8/)

我正在使用较旧的 Validatious 脚本进行验证。

我想要做的是收货地址折叠/隐藏，上面有两个按钮。一个是“与账单相同”，另一个是“添加收货地址”。单击“添加送货地址”后，将显示送货地址。

有任何想法吗？我不确定为什么当我点击“显示 DIV”（测试文本顺便说一句）时会发生验证；那应该只是隐藏/显示运输区域，而不是突然在我的所有字段上运行验证。

问题是，我正在使用一家名为 Kalio Commerce 的 SaaS 供应商。你会在 jsfiddle 中看到他们的大量 API 代码，所以我不太确定如何在 jsfiddle 中表达它。但我也想与你分享整个代码，这样你就有了大局。

请帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:22:05.950

像这样创建一个 CSS 类：

```
.invisible
{
    display: none;
} 
```

并将不可见添加到您想要消失的标签中。当您希望标签重新出现时，请删除不可见的类。如果您不想在单击按钮时发布，则应阻止该按钮发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:33:01.070

我在博客上处理这个问题的方式是，

```
<div id="box1" class="hide">Hidden Content</div>
<a onmousedown="showContent()">Show Content</a> 
```

JavaScript：

```
<script>
function showContent(){

    if(document.getElementById('box1').className == "hide"){
       document.getElementById('box1').className = "show";
    }
    else{
       document.getElementById('box1').className = "hide";
    }
}
</script> 
```

CSS：

```
div.hide
{
    display: none;
}
div.show
{
    display: block;
} 
```

对不起，如果我误解了这个问题。

# c - C printf 格式字符串

> ID：12676600
> 
> 赞同：-6
> 
> 时间：2012-10-01T15:46:38.410
> 
> 标签：c, printf

在 C 语言中，下面的程序是 %5%% ，但我不知道怎么做？

```
 printf("%6%5%%%78%"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T15:52:30.207

这是未定义的行为，并且是编译器/平台特定的。带有错误参数的 Printf 函数将开始从堆栈中提取变量，然后任何事情都可能发生。

这就是为什么编译器通常会抱怨这个

```
source.c:5:5: warning: conversion lacks type at end of format [-Wformat]
source.c:5:5: warning: conversion lacks type at end of format [-Wformat]
source.c:5:5: warning: conversion lacks type at end of format [-Wformat]
source.c:5:5: warning: spurious trailing '%' in format [-Wformat] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T16:24:03.280

Printf 格式字符串后面应该跟相等数量的参数，这里显然没有这样做。

printf 格式字符串的可能参数是：

```
%[flags][width][.precision][length]specifier 
```

其中说明符是*s*代表*string*，*c*代表*char*等。其他是可选的。

标志是左对齐或右对齐的 +、-、0 等之一，这些标志都没有在问题中传递。

精度以 . 为前缀，因此在本示例中不存在。

让我们看看

```
printf("%6%5%%%78%"); 
```

*   现在 % 之后的第一个参数被视为字段的宽度，即 6，因此不打印。但是，它需要一个说明符，而不是找到另一个 %。标准说 % 后跟 % 将其打印到标准输出。因此，您首先看到 % 打印。现在因为 % 的效果丢失了，所以 5 被当作正常数字处理和打印。

*   然后我们看到 %% 会打印一个 %。接下来是单个 %，然后是 78，它应该是宽度，因此不会打印。但是，后一个 % 否定了 78 的效果并打印了一个 %。

为了验证上述评估，这里是一个测试字符串

```
printf("%6%4%3%2"); 
```

打印 %4%2 符合上述要求。

详细参考 [printf](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T17:00:35.503

这里可能发生的是：

*   printf 实现看到“%6”，它可以是有效转换规范的开始，例如“%6d”。
*   然后它看到“%”，这不再是一个有效的转换规范。此时字符串不符合 C 标准（例如，C 1999 7.19.6.1 8 表示“完整的转换规范应为 %%。”），实现可以做任何事情。这个特定的实现似乎忽略了“6”，并且好像转换规范是“%%”而不是“%6%”。因此，它将“%”写入标准输出。
*   然后 printf 实现看到“5”，所以它写“5”。
*   然后它看到“%%”，这是一个有效的转换规范，导致“%”被写入。
*   然后它会看到“%78%”。与“%6%”一样，“%78”可以开始一个有效的规范，但第二个“%”是错误的。再一次，实现忽略“78”并写入“%”。

该行为在其他 C 实现中会有所不同。程序格式不正确；它不符合 C 标准，并且其行为未由 C 标准指定。

# sql-server - sql写入未在桌面中显示的csv文件

> ID：12676603
> 
> 赞同：0
> 
> 时间：2012-10-01T15:46:50.763
> 
> 标签：sql-server, stored-procedures, csv

我有一个创建 csv 文件的 sql 存储过程。这是以下过程。

```
SET @query = 'select * from tableName123'
SET @bcpCommand = 'bcp " ' + @query + ' "  queryout "c:\linecode.csv" -T -c -t,'''
EXEC master..xp_cmdshell @bcpCommand 
```

代码运行成功，但我在桌面上看不到 linecode.csv。这是写权限的问题还是我所做的有问题？

我正在使用 sql server 2008 和 c# 来调用存储过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:53:15.050

我不认为“桌面：\”会指向桌面。

您是否尝试过诸如“C:\folder\myfile.csv”之类的受信任位置？

它很可能在某处创建了一个“Desktop:\linecode.csv”文件。你能找到“*linecode.csv”吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T13:59:07.763

试试这个：

```
SET @query = 'select * from tableName123'
SET @bcpCommand = 'bcp " ' + @query + ' " queryout "%USERPROFILE%\Desktop\linecode.csv" -T -c -t,'''
EXEC master..xp_cmdshell @bcpCommand 
```

这取决于您定义`USERPROFILE`环境变量的 Windows 版本，该环境变量存在于所有现代版本的 Windows 中。[您可以在此处阅读有关`USERPROFILE`环境变量的更多信息。](http://environmentvariables.org/UserProfile)

# c# - 如何允许用户仅删除数据网格中的新行

> ID：12676605
> 
> 赞同：0
> 
> 时间：2012-10-01T15:46:54.700
> 
> 标签：c#, wpf, mvvm, datagrid

我正在使用 DataGrid 向用户显示数据。

我允许用户编辑数据并添加新行。是否可以使用内置的功能`CanUserDeleteRows`来允许用户仅删除他刚刚添加的行。

所以用例描述：

1) 用户打开数据网格 2) 数据网格显示其内容 3) 用户添加了几行 4) 用户删除了他添加的一个（或全部）行。5) 用户*无法*删除最初加载时数据网格中的行

...所以只有“新”行应该能够被删除。什么方法在这里最好？我现在有点没有想法......

**更新：**为了满足您的意见；）

我正在使用自定义类的 ObservableCollection 来填充数据网格。所以“问题”是我实际上不知道如何“拦截”删除事件，也不知道如何在不破坏 mvvm 模式的情况下做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:52:01.613

你有两个选择：

```
1 `Disconnected Mode` 
```

您将新行保存在缓存中，您使用`GetChanges`方法来获取添加的行。

```
//GetChanges return added rows before update datasource from caching
var newRows = YourDataTable.GetChanges(DataRowState.Added); 
```

您添加另一个数据列，每次添加新行时都设置此列的值。

```
DataColumn columnFlag = new DataColumn("FlagDelete", typeof(bool)); 
```

`Delete Button`是`visible`根据列值

‎</p>

```
2 `Connected Mode` 
```

您在数据库中创建新列，实现服务器调用以获取数据，并根据列标志的值可视化您的函数删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:38:28.977

当我使用 ObservableCollections 等时，我使用了一种工作方法，有点基于 Aghilas Yakoub 的回答。

我向 DataGrid 添加了一个 Remove-Button，其可见性绑定到一个`IsNew`-Property。

```
<DataGridTemplateColumn>
   <DataGridTemplateColumn.CellTemplate>
      <DataTemplate>
          <Button Content="Remove" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type TabControl}}, Path=DataContext.BottomDetailVM.DeleteCommand}" Visibility="{Binding IsNew, Converter={StaticResource Bool2VisibilityConverter}, FallbackValue=Collapsed}" CommandParameter="{Binding}" />
      </DataTemplate>
   </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

当用户单击按钮时，以当前对象（显示在行中）作为参数执行命令。

```
public ICommand DeleteRangfolgeCommand
{
  get
  {
     return new ActionCommand<MyOwnViewModel>(ExecuteDelete);
  }
}

private void ExecuteDelete(MyOwnViewModel viewModelToDelete)
{
    this.ItemsSourceList.Remove(viewModelToDelete);
} 
```

顺便说一句：我正在使用[MSDN-Magazine](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090030)`RelayCommand`中的-implementation（在我的例子中称为 ActionCommand）。

# iphone - ObjectId 标识一个 UILocalNotification

> ID：12676608
> 
> 赞同：0
> 
> 时间：2012-10-01T15:47:03.513
> 
> 标签：iphone, ios, uilocalnotification

我有一个简单的药丸提醒应用程序，我在 NSUserDefaults 中存储了少量数据。当用户编辑或删除提醒时，需要修改相应的 UILocalNotification。使用`userInfo`UILocalNotitification 的字典，我已经制作了`@"reminderId"`编辑/删除相应提醒的键。

首次创建提醒时，我将 设置为用户提供提醒`@"reminderId"`的初始值。`@"name"`因此，如果用户最初将 设置`@"name"`为“每日维生素”，然后将其更改`name`为“多种维生素”，则“每日维生素”将保留为`@"reminderId`.

这是一种安全的做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:12:56.533

这并不安全，因为在客户将 Daily Vitamin 重命名为 Multi-Vitamin 后，他可能会为不同的药丸创建一个新提醒，并将其命名为 Daily Vitamin。现在发生了冲突。创建一个自动递增的数字键可能会更容易，那么您不必担心名称等。无论如何，创建的每个药丸提醒都有 key = key + 1。

使用您的 UserDefaults 跟踪当前密钥，就是这样。=)

# php - 循环（while）进入循环（while）做一个查询

> ID：12676615
> 
> 赞同：0
> 
> 时间：2012-10-01T15:47:43.467
> 
> 标签：php, sql

首先是代码：

```
while($thisValue = mysql_fetch_assoc($someUnrelevantPreviousQuery)) {
    if($thisValue['thisOne']=='something') {
         $query = mysql_query("Some query");
         $result = mysql_num_rows($query);
         if($result) {
             while($result2 = mysql_fetch_assoc($query)) {
                 /* Do this */
             }
         }else echo "Error 1";
     }else
     if($thisValue['thisOne']=='something else') {
         $query = mysql_query("Some other query");
         $result = mysql_num_rows($query);
         if($result) {
             while($result2 = mysql_fetch_assoc($query)) {
                 /* Do that */
             } 
         }else echo "Error 2";
      }             
} 
```

所以我对这段代码有 1 个问题和 1 个问题。

# 问题：

如果第一个 while 返回 2 个值 where `$thisValue['thisOne']=='something' AND $thisValue['thisOne']=='something else'`，它应该执行 2 个查询。一个用于第一个“如果”，然后一个用于第二个。然而，在实践中，它会为 find 工作，`$thisValue['thisOne']=='something'`但随后循环停止并且对其他值不做任何事情。怎么会？

编辑：另外，如果第一个 while 只返回`$thisValue['thisOne']=='something else'`我得到“错误 1”回声，那么它应该继续执行下一个 if 语句。

# 问题：

这是正确的方法吗？我的意思是我应该使用另一个循环或方法吗？

**PS：**代码对我来说似乎很自我解释，这就是为什么我没有解释它。但是如果需要一些细节或任何东西来更好地理解它，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:02:59.343

查看您的 if 语句：

```
if($thisValue['thisOne']=='something') {}
else if($thisValue['thisOne']=='something else') {} 
```

如果 "something" == "something else" 它只会执行两个块

您正在使用“==”，因此这些值*可能*彼此相等......但在大多数情况下，这不太可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:07:59.223

好的，看到我的评论可能只是答案，我会在这里发布：

您正在检查相同的变量（因此是相同的值）并期望它等于`'Something'` *and* `'Something else'`。那个风筝永远，永远飞不起来……

如果从 => 更改为：

```
else
if ($thisValue['thisOne'] == 'Something else')
{}
//TO:
if ($thisValue['thisOne'] === 'Something else' || $thisValue['thisOne'] === 'Something')
{
    //do second query
} 
```

这样，第二个查询将在第一个 if 为真时运行，但在它为假时也会运行，并且`$thisValue['thisOne'] === 'Something else'`. 另外：在松散类型的语言中，`===`尽可能多地使用（类型和值检查）。养成一个好习惯。

# linux - rdiff-backup 致命错误，是否找到相关增量？

> ID：12676619
> 
> 赞同：4
> 
> 时间：2012-10-01T15:47:50.380
> 
> 标签：linux, backup, rdiff-backup

我正在运行 rdiff-backup 来备份远程系统上的一些文件夹。

```
rdiff-backup root@<REMOTESERVER>::/apps/myapp/shared/system /home/backups/system
echo "$(date): Completed... removing backup data older than 4 weeks"
rdiff-backup --remove-older-than 4W /home/backups/system
echo "$(date): Completed..." 
```

尽管在 --remove-older-than 命令期间运行它会导致错误：

```
Fatal Error: Found 81 relevant increments, dated:
Wed Aug 29 00:41:47 2012
Thu Aug 30 00:57:49 2012
Fri Aug 31 01:04:03 2012
Sat Sep  1 00:44:59 2012
Sun Sep  2 00:41:49 2012
Mon Sep  3 00:41:39 2012
If you want to delete multiple increments in this way, use the --force. 
```

所以是的，我可能只是把 --force 放在它上面，但我想了解这里发生了什么，并且在这个问题上找不到太多。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-15T20:12:47.967

它只是`rdiff-backup`确保你真的是认真的。通常的工作流程`--remove-older-than`是定期运行，只删除最旧的增量。为了避免数据丢失，`rdiff-backup`需要您在让您一次删除多个增量之前*非常确定。*

# ios5 - 当自定义 UITableViewCell 的 UITextField 中有文本时，cellForRowAtIndexPath 返回 null

> ID：12676625
> 
> 赞同：1
> 
> 时间：2012-10-01T15:48:02.630
> 
> 标签：ios5, uitableview

我已经为此困惑了好几个小时了，所以我想是时候寻求帮助了！

我正在尝试访问`UITextField`嵌入在`UITableViewCell`子类 ( `QuestionCell`) 中的文本值。

问题是每当我尝试使用该`cellForRowAtIndexPath`方法访问单元格时，它都会返回（NULL）。

```
QuestionCell *qc = (QuestionCell*)[questionsTable cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0]];
NSLog(@"qc %@",qc); // Gives "qc (NULL)" if there's text in the custom cell 
```

仅当`UITextField`在自定义单元格中输入了文本时才会发生这种情况。如果没有文本，则单元格将按预期返回。

我正在使用带有情节提要的 XCode4.2，具有自定义样式和类`UITableViewCell`

这是我的 QuestionCell.h

```
#import <UIKit/UIKit.h>

@interface QuestionCell : UITableViewCell

@property (weak, nonatomic) IBOutlet UILabel *correctionLabel;
@property (weak, nonatomic) IBOutlet UIImageView *correctionMark;
@property (weak, nonatomic) IBOutlet UILabel *pronounLabel;
@property (weak, nonatomic) IBOutlet UITextField *answerInput;

@end 
```

并且单元格是使用通常的委托方法创建的

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.section == 0)
    {
        QuestionCell *cell = nil;
        cell = [tableView dequeueReusableCellWithIdentifier:@"QuestionCell"];

        NSString *pronoun = nil;

        switch (indexPath.row) {
            case 0:
                pronoun = @"je";
                break;
            case 1:
                pronoun = @"tu";
                break;
            case 2:
                pronoun = @"il";
                break;
            case 3:
                pronoun = @"nous";
                break;
            case 4:
                pronoun = @"vous";
                break;
            case 5:
                pronoun = @"ils";
                break;
            default:
                break;
        }

        cell.pronounLabel.text = pronoun;

        return cell;
    }
    if (indexPath.section == 1)
    {
        ActionCell *cell = nil;
        cell = [tableView dequeueReusableCellWithIdentifier:@"ActionCell"];
        return cell;
    }
    return nil;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:58:22.640

上面的代码没有任何问题。我创建了一个测试项目，插入了这个`QuestionCell`（完整的`UITextField`和`UILabel`对象）和你的`tableView:cellForRowAtIndexPath`，一切都很好。

该`UITableView`方法`cellForRowAtIndexPath`仅`nil`在单元格滚动离开屏幕时返回（这是预期的行为）。但是有了这六个单元格，我遍历了表格的 `cellForRowAtIndexPath 并且一切都很好，无论我是否输入了文本。

从您随后的评论来看，您的单元格似乎已滚出屏幕。是的，那肯定会导致`cellForRowAtIndexPath`回归`nil`！

# xml - XML DTD 活动

> ID：12676626
> 
> 赞同：0
> 
> 时间：2012-10-01T15:48:03.940
> 
> 标签：xml, dtd

嗨，我是 xml 和 DTD 的新手……我 2 小时前刚从课堂上学到这个……我用 DTD 制作了一个 XML。我只是想知道我的 XML 代码的 DTD 是否正确？

**DTD：**

```
< !DOCTYPE BusinessCard[

    <!ELEMENT BusinessCard (Name?,Phone+,Email?)>
    <!ELEMENT Name (#PCDATA)>
    <!ELEMENT Phone (#PCDATA)>
    <!ATTLIST Phone type CDATA "mobile">
    <!ATTLIST Phone type CDATA "work">
    <!ATTLIST Phone type CDATA "fax">
    <!ELEMENT Email (#PCDATA)>
]> 
```

**XML:**

```
< BusinessCard>

    <Name >Jose P. Rizal</Name>

    <Phone type="mobile">(415)555-4567</Phone>

    <Phone type="work">(800)555-9876</Phone>

    <Phone type="fax">(515)555-1234</Phone>

    <Email>joserizal@email.com</Email>

</BusinessCard> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T23:53:34.290

您的 DTD 在语法上是合法的，并且文档对 DTD 有效，但是*Phone元素上**type*属性的三重声明可能并不意味着您想要它的意思。给定属性的第一个声明优先，所以你所拥有的相当于

 *```
<!ATTLIST Phone type CDATA "mobile"> 
```

这意味着*Phone*可以采用*类型*属性，其值可以是任何字符数据（因此：任何可在 XML 中表达的字符串），其默认值为“ `mobile`”。忽略以下两个对具有不同默认值的相同属性的重新声明。

如果您要说该属性可以采用值“ `mobile`”、“ `work`”或“ `fax`”而没有其他值，那么您要使用的是枚举类型：

```
<!ATTLIST Phone type (mobile | work | fax) "mobile"> 
```

如果你想说的是属性可以取任何值，但是“mobile”、“work”和“fax”这些值是众所周知的值，软件应该为它们准备好，那么你需要用散文说; 没有办法在 DTD 表示法中这么说。*你可以通过给 Phone 两个属性（ type*和*othertype* ）说类似的话，规则*type*可以在你的练习中取三个值，也可以取值“ `other`”，而*othertype*属性取任何字符串作为值，并且只有当 时才有意义`type="other"`。因此可以标记家庭电话号码`<Phone type="other" othertype="home">...</Phone>`。

```
<!ATTLIST Phone type (mobile | work | fax | other) #REQUIRED
                othertype CDATA #IMPLIED > 
```*

# sql-server - 使用已安装的命名实例重命名 SQL Server

> ID：12676627
> 
> 赞同：6
> 
> 时间：2012-10-01T15:48:07.697
> 
> 标签：sql-server, sql-server-2008-r2

我们有一个托管服务器，由托管公司命名，类似于 WinEnt99。我们想将其重命名为更有意义的名称，例如 OurMonitor1。

我们已经安装了一些 SQL Server 2008 R2 实例。

我们需要在 SQL Server / SSMS 中（重新）配置什么吗？

我有一个应用程序正在从注册表中读取数据库设置，并很好地连接数据库。现在，它不会连接到数据库。我唯一能想到的是我们上周某个时候重命名了服务器。

编辑 2012 年 10 月 2 日：- 服务器正在重命名。命名的实例不是。

我跑了

```
sp_helpserver
select @@servername 
```

其中显示了旧的服务器名称，并且

```
sp_dropserver 'Old Server Name\Instance_name'
go
sp_addserver 'New Server Name\Instance Name','local'
go 
```

然后确认详细信息

```
sp_helpserver
select @@servername 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T15:53:37.740

首先收集当前实例配置的输出。您可以获取存储在 SQL Server 元数据中的实例名称。

如果要更改生产服务器实例名称，请确保备份所有数据库。

```
sp_helpserver
select @@servername 
```

您可以使用以下查询更改实例名称。默认实例

```
sp_dropserver 'old_name'
go
sp_addserver 'new_name','local'
go 
```

~~命名实例~~

 ~~```
sp_dropserver 'Server Name\old_Instance_name'
go
sp_addserver 'ServerName\New Instance Name','local'
go 
```~~ 

~~通过运行以下查询来验证 sql server 实例配置~~

 ~~```
sp_helpserver
select @@servername 
```

重新启动 SQL Server 服务。

```
net stop MSSQLServer
net start MSSQLServer 
```

[更新]

您无法更改连接实例名称，因为不支持此操作。唯一的选择是重新安装 SQL 服务器。 [在此处查看 MSDN 中的答案](http://social.msdn.microsoft.com/Forums/en/sqlsetupandupgrade/thread/d5d297b0-2995-46ba-9d3b-d1ec8825f479)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T15:56:26.813

没有重命名实例的命令。您将需要并排创建一个新实例，通过您喜欢的任何方法移动数据库（备份和恢复都可以）并删除以前的实例。

```
sp_addserver "OurMonitor1" , local

sp_dropserver "WinEnt99" 
```~~

# python - Python：Facebook API 显示无效令牌

> ID：12676634
> 
> 赞同：1
> 
> 时间：2012-10-01T15:48:27.353
> 
> 标签：python, facebook, facebook-graph-api

我正在使用[facepy facebook graph API](https://github.com/jgorset/facepy)来访问我的邮箱/消息，我遵循以下两种方法：

**第一种方法：**

我使用`access token`了从`Graph Explorer`facebook 页面获得的并使用以下代码：

```
from facepy import GraphAPI
graph = GraphAPI(token)
print graph.get('/me')
#Rest of the code 
```

上面的代码运行良好，我能够使用`FQL Query`. 一段时间后我的 auth_token 出现了问题`expired`。

所以，经过一番谷歌搜索后，我转向**接近两个**：

现在，我所做的是创建了一个 facebook 应用程序授予它`read_mailbox`权限并获得它`id and key`，然后使用[facepy](https://facepy.readthedocs.org/en/latest/usage/utilities.html#facepy.utils.get_application_access_token)的 get_application_access_token 方法来获取令牌。

检索我使用的令牌后：

```
token = facepy.utils.get_application_access_token(app_id, key)
graph.get('/me')
## OUT: OAuthError: [2500] An active access token must be used to query information about the current user.
facepy.utils.get_extended_access_token(token, app_id, key)
# OUT: OAuthError: [1] No user access token specified 
```

现在，您可以看到`commented #`使用应用程序令牌时生成的 error()。

我相信我得到的错误是因为 facebook 需要`user_token`并且我正在为其提供`app_token`.

那么，是否可以使用 app_token 访问用户数据，如果不能，如何发布一个`extended token`可以访问用户数据的文件。

**更新：**

所以，我按照@Johannes 的建议尝试了这个但遇到了错误：

```
from facepy.utils import get_extended_access_token
from facepy import GraphAPI
token = "My user access token got from https://developers.facebook.com/tools/explorer"
long_lived_access_token = get_extended_access_token(token)
graph = GraphAPI(long_lived_access_token)
graph.get('/me') 
```

现在，当我运行上面的代码时，我得到了

```
TypeError: get_extended_access_token() takes exactly 3 arguments (1 given) 
```

所以，我把它改成`long_lived_access_token = get_extended_access_token(token, None, None)`并得到了

```
facepy.exceptions.OAuthError 
```

所以，我再次将其更改为`long_lived_access_token = get_extended_access_token(token, app_id, key)`，我得到了与上面相同的异常/错误。

那么，这是一个错误还是我做错了什么。

PS：我从 git 安装了最新版本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T16:13:18.053

您的假设是正确的，您不能使用应用程序访问令牌来读取用户的邮箱，但是您得到的错误源于您根本没有`graph`使用访问令牌进行初始化这一事实。

尽管如此，您在询问如何扩展用户的访问令牌方面是正确的。正如您已经发现的那样，Facepy HEAD（即将发布 0.9 版）具有`get_extended_access_token`接受现有短期用户访问令牌并对其进行扩展的功能。扩展的用户访问令牌持续 2 个月，您可以在 Facebook 的关于[删除 offline_access 权限](https://developers.facebook.com/roadmap/offline-access-removal/)的文档中阅读更多关于它们的信息。

如果你想立即使用`get_extended_access_token`，你必须从 git 安装 facepy：

```
$ pip install git+git://github.com/jgorset/facepy.git@b5153f460f2f52cef9a5e49a3b48b3fb8742356c 
```

安装正确版本的 Facepy 后，您可以扩展现有的短期用户访问令牌并`GraphAPI`使用它初始化一个新实例：

```
from facepy.utils import get_extended_access_token
from facepy import GraphAPI

long_lived_access_token, expires_at = get_extended_access_token(short_lived_access_token, application_id, application_secret_key)

graph = GraphAPI(long_lived_access_token)
graph.get('/me') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T08:27:01.490

API没有任何问题，您只是没有以正确的方式解释结果。如果您尝试打印它的结果，`long_lived_access_token = get_extended_access_token(token)`它不会直接给您 a`long_lived_access_token`而是会为您提供一个包含内容的元组：

```
long_lived_access_token = ('your token', datetime_object). 
```

[您可以通过查看utils.py](https://github.com/jgorset/facepy/blob/master/facepy/utils.py)的源代码来验证这一点。如果您查看`get_extended_access_token`它返回的方法`token, expires_at`。

根据[facebook docs](https://developers.facebook.com/roadmap/offline-access-removal/)要获取`extended`访问令牌，必须在以下端点发出请求

```
https://graph.facebook.com/oauth/access_token?             
    client_id=APP_ID&
    client_secret=APP_SECRET&
    grant_type=fb_exchange_token&
    fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

并且响应类似于`token=mytoken&expire=5184000`where`5184000`意味着 60 天。

因此，您的最终代码将类似于：

```
from facepy.utils import get_extended_access_token
from facepy import GraphAPI

app_id = 'id'
key = 'key'

short_lived_access_token = 'short_token'
long_token = get_extended_access_token(short_token, id, key)

graph = GraphAPI(long_token[0])
print graph.get('/me') 
```

# azure - Azure 辅助角色配置

> ID：12676637
> 
> 赞同：2
> 
> 时间：2012-10-01T15:48:42.107
> 
> 标签：azure, azure-worker-roles

我需要部署 2 个不同的工作角色实例，但每个都需要自己的配置数据（ID 代码、密码、SenderCompID 等）来连接到交易服务器。我无法跨实例共享凭据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:32:04.907

任何角色（Worker 或 Web）的每个实例在基于应用程序的配置方面都是相同的。这是因为所有实例都是从同一个应用程序创建的，它们将读取完全相同的应用程序配置数据。

如果您编写应用程序的方式是在应用程序启动时读取机器外部的数据（从 Azure 存储、Azure 表或 VM 外部的任何其他内容，主要在某些服务器上可用）然后配置自身，那么您可以实现您的目标。您还需要在服务器上提供特定于实例的数据，以便每个实例都有自己的数据。如果我选择此选项，我可能会使用 Azure 表名，即 Instance_ID#，因此每个实例都有自己的配置并自行配置。这样我就可以随时修改 Azure Table 上的数据并重新启动角色以加载更新的配置。其他人可能有其他方法来实现它。

另一种选择是在同一个 Azure 应用程序中拥有两个角色（工作人员或 Web），虽然两个或多个工作人员角色之间的应用程序代码可能相同，但您确定可以单独配置它们。上述每个选项都有自己的优点和缺点。

# java - 使用 xstream 读取列表值

> ID：12676638
> 
> 赞同：2
> 
> 时间：2012-10-01T15:48:45.193
> 
> 标签：java, xml, xml-parsing, xml-serialization, xstream

我正在使用`xstream`以下格式读取一些 xml -

```
<Objects>
  <Object Type="System.Management.Automation.Internal.Host.InternalHost">
    <Property Name="Name" Type="System.String">ConsoleHost</Property>
    <Property Name="Version" Type="System.Version">2.0</Property>
    <Property Name="InstanceId" Type="System.Guid">7e2156</Property>
  </Object>
</Objects> 
```

基本上在对象标签下可以有 n 个对象类型，每个对象类型可以有 n 个属性标签。所以我用Java类和代码来建模如下——

```
class ParentResponseObject {    
    List <ResponseObject>responseObjects = new ArrayList<ResponseObject>();

}

@XStreamAlias("Object")
@XStreamConverter(value = ToAttributedValueConverter.class, strings = { "Value" })
class ResponseObject {  
    String Type;   
    String Value; 

    List <Properties> properties = new ArrayList<Properties>(); 
}

@XStreamAlias("Property")
@XStreamConverter(value = ToAttributedValueConverter.class, strings = { "Value" })
class Properties {
    String Name;
    String Type;
    String Value;
}
public class MyAgainTest {
    public static void main (String[] args) throws Exception {
        String k1 = //collect the xml as string            
        XStream s = new XStream(new DomDriver());       
        s.alias("Objects", ParentResponseObject.class);
        s.alias("Object",  ResponseObject.class);
        s.alias("Property", Properties.class); 
        s.useAttributeFor(ResponseObject.class, "Type");
        s.addImplicitCollection(ParentResponseObject.class, "responseObjects");     
        s.addImplicitCollection(ResponseObject.class, "properties");
        s.useAttributeFor(Properties.class, "Name");
        s.useAttributeFor(Properties.class, "Type");
    s.processAnnotations(ParentResponseObject.class);       
        ParentResponseObject gh =(ParentResponseObject)s.fromXML(k1);
        System.out.println(gh.toString());
    }
} 
```

使用此代码，我可以在 ParentResponseObject 类中填充 responseObjects 列表。但是，ResponseObject 中的属性列表始终为空，即使我在这两种情况下都使用相同的技术。任何人都可以帮助解决这个问题。对此的帮助非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:11:44.763

您的 XML 格式与您的 Java 对象模型不匹配。根据 XML，`<Property>`是 的子项`<Objects>`，但根据您的代码，`Properties`列表是`ResponseObject`. 您需要修复这种不匹配。

此外，您似乎正在混合使用注释和代码。要么只使用注释（推荐），要么全部在代码中完成。否则，您的代码会变得混乱和不可读。

* * *

**更新：**

我看到你已经修复了你的 XML。问题是您的 中有一个`Value`字段`ResponseObject`，但 xml 元素中没有值，因此请将其删除。

以下代码应该可以工作：

```
@XStreamAlias("Objects")
public class ParentResponseObject {

    @XStreamImplicit
    List<ResponseObject> responseObjects = new ArrayList<ResponseObject>();
}

@XStreamAlias("Object")
public class ResponseObject {

    @XStreamAsAttribute
    String Type;   

    @XStreamImplicit
    List<Properties> properties = new ArrayList<Properties>();
}

@XStreamAlias("Property")
@XStreamConverter(value = ToAttributedValueConverter.class, strings = { "Value" })
public class Properties {
    String Name;
    String Type;
    String Value;
} 
```

主要方法：

```
XStream s = new XStream(new DomDriver());
s.processAnnotations(ParentResponseObject.class);
ParentResponseObject gh = (ParentResponseObject) s.fromXML(xml);

for (ResponseObject o : gh.responseObjects) {
     System.out.println(o.Type);
     for (Properties p : o.properties) {
         System.out.println(p.Name + ":" + p.Type + ":" + p.Value);
     }
} 
```

# android - 超慢创建自定义视图

> ID：12676643
> 
> 赞同：0
> 
> 时间：2012-10-01T15:48:50.487
> 
> 标签：android, performance, android-custom-view

我有一个扩展的自定义视图`ListView`。根据当前月份，它显示 24 或 36 个项目。

这些项目显示 6 行，每行 7 个单元格（这是一个滚动日历）。每一行都是我添加到 ScrollView 的 LinearLayout。每一行都是我添加到 LinearLayout 的视图。因此，每个 CustomCalendar 调用 7x6+6x4 = 42+24 = 66 次 addView(View)，这使得 addView 调用了 1584 次，这是一个超慢的过程。它阻塞了主线程很长时间。

有没有办法让这个过程更快？我已经尝试过 onDraw(canvas)，但它太难了，无论如何我无法让它正常工作。

编辑：人们误解了我的问题。我没有下载图像，我没有下载资源，也没有使用图像。我只有观点。我的抱怨是 ViewGroup.addView 工作缓慢，我在问是否有替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:55:15.870

是否尝试使用 AsyncTask 加载图像？

# android - 图像无法在 Android 上加载

> ID：12676644
> 
> 赞同：2
> 
> 时间：2012-10-01T15:48:52.873
> 
> 标签：android, imageview

我 100% 确定这里的问题出在实际图像上。但是我希望解决方案是图像的某些属性，它将在未来帮助其他人。

图片：

[有问题的照片 http://soundwave.robotsidekick.com/mlsphotos.jpg](http://soundwave.robotsidekick.com/mlsphotos.jpg)

我尝试以多种方式加载此图像。我已经下载并尝试将其加载到`ImageView`：

```
 final ImageView v = (ImageView) findViewById(R.id.image);
    v.setImageResource(R.drawable.photo);
    v.invalidate(); 
```

我试过从一个网址加载它：

```
 final String[] params = new String[] {
            "",
    };

    (new AsyncTask<String, Bitmap, Bitmap>()
            {
        @Override
        protected Bitmap doInBackground(final String... params)
        {
            Bitmap ret = null;
            for (final String url : params)
            {
                try
                {
                    Log.e(TAG, url);
                    ret = BitmapFactory.decodeStream((new URL(url)).openStream());
                    publishProgress(ret);
                }
                catch (final MalformedURLException e)
                {
                    Log.e(TAG, "Malformed URL", e);
                }
                catch (final IOException e)
                {
                    Log.e(TAG, "IO Exception", e);
                }
            }
            return ret;
        }

        @Override
        protected void onProgressUpdate(final Bitmap... values)
        {
            super.onProgressUpdate(values);

            for (final Bitmap result : values)
            {
                if (result != null)
                {
                    final ImageView v = (ImageView) MainActivity.this.findViewById(R.id.image);
                    v.setImageBitmap(result);
                    v.invalidate();
                }
            }
        }
    }).execute(params); 
```

我也尝试过`WebView`像这样加载图像：

```
 final WebView webview = (WebView) findViewById(R.id.webview);
    webview.loadData("<html><body><img src=\"" + url + "\"></body></html>", "text/html", "utf-8");
    webview.invalidate(); 
```

我也尝试在浏览器（应用程序）中加载图像，但这不起作用。

这些都不起作用，但是如果我将 url 加载到 Android 上的 Chrome 中，它会很好用（不是在浏览器中），如果我在桌面浏览器（Chrome、Firefox 等）上加载图像，它会很好地加载。我已经检查了 mime 类型是否与扩展名匹配，但我很茫然。

***编辑***

对于来自`InputStream`位图处理在流完成之前用完流上的数据的图像，有一种解决方法。解决方法记录在[这个问题](https://stackoverflow.com/questions/2787015/skia-decoder-fails-to-decode-remote-stream)和[这个错误](http://code.google.com/p/android/issues/detail?id=6066)中。

然而，这是一个损坏的图像，其数据过早结束。我知道这意味着我已经走下坡路了，但我希望能有更好的错误处理，而不是 Android 把我传回去`null`，我输了。iOS、Chrome（在设备和计算机上）以及大多数其他地方似乎有更好的错误处理。我可以在 Android 上做些什么来处理损坏的 jpg 文件吗？

***编辑 2***

这里必须有一个解决方案，因为我设备上的 Chrome 可以优雅地处理这种情况。然而，我能解决这个问题的最接近的是以下代码：

```
final InputStream is = (new URL(url)).openStream();
final ByteArrayOutputStream bos = new ByteArrayOutputStream();
final int size = 1024;
int len = -1;
byte[] buf = new byte[size];
while ((len = is.read(buf, 0, size)) != -1)
{
    bos.write(buf, 0, len);
}
buf = bos.toByteArray();

// buf is now filled with the corrupted bytes of the image

ret = BitmapFactory.decodeByteArray(buf, 0, buf.length);

// ret is null because it was a corrupt jpg 
```

使用该代码，我可以检查是否有字节并且图像没有被解码。然后至少我可以告诉我有一个损坏的图像（或不是图像），并且可以向用户报告一些对用户更有用的东西（嘿，我这里有一个 16K 的图像，但我肯定不知道如何处理它） .

任何人都知道 Chrome 如何在损坏之前设法解码尽可能多的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:30:40.170

这是[来自 Wikipedia 的关于 JPG](http://en.wikipedia.org/wiki/JPEG#Syntax_and_structure)的重要信息，这是[一个最终导致我找到解决方案的问题](https://stackoverflow.com/questions/4585527/detect-eof-for-jpg-images)。

我只是将图像字节的两个结束 jpeg 结尾附加到流中，以使解码器相信流是使用图像数据完成的。这种方法是有缺陷的，因为 JPG 可以在其中包含 JPG，这意味着附加一组图像结尾字节，并不能保证我们关闭了所有图像。

在下面的两个解决方案中，我假设`is`是 JPG 图像的输入流。还定义了这两个常量：

```
private static final int JPEG_EOI_1 = 0xFF;
private static final int JPEG_EOI_2 = 0xD9; 
```

这种方法我们将所有字节读入内存然后尝试解码字节：

```
final ByteArrayOutputStream bos = new ByteArrayOutputStream();
final int size = 1024;
int len = -1;
final byte[] buf = new byte[size];
try
{
    while ((len = is.read(buf, 0, size)) != -1)
    {
        bos.write(buf, 0, len);
    }
    bos.write(JPEG_EOI_1);
    bos.write(JPEG_EOI_2);

    final byte[] bytes = bos.toByteArray();

    return BitmapFactory.decodeByteArray(bytes, 0, bytes.length);
}
catch (final IOException ex)
{
    return null;
}
catch (final Exception ex)
{
    return null;
} 
```

此方法创建一个流包装器，确保最后两个字节是图像字节的 JPG 结尾：

```
return BitmapFactory.decodeStream(new JpegClosedInputStream(is));

// And here's the stream wrapper
class JpegClosedInputStream extends InputStream
{
    private final InputStream inputStream;
    private int bytesPastEnd;

    private JpegClosedInputStream(final InputStream iInputStream)
    {
        inputStream = iInputStream;
        bytesPastEnd = 0;
    }

    @Override
    public int read() throws IOException
    {
        int buffer = inputStream.read();
        if (buffer == -1)
        {
            if (bytesPastEnd > 0)
            {
                buffer = JPEG_EOI_2;
            }
            else
            {
                ++bytesPastEnd;
                buffer = JPEG_EOI_1;
            }
        }

        return buffer;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T16:10:15.117

我在 Photoshop CS6 中打开文件，它说文件可能已损坏、可能被截断或不完整。该文件可以打开。如果我将它保存在 Photoshop 中而不做任何更改，它就可以在 Android 中使用。恐怕我不知道图像到底出了什么问题。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-01T16:06:35.223

做 setcontentview 并像这样从 xml 显示它：

```
//photo.xml
  <ImageView
        android:id="@+id/picture"
        android:layout_width="250dp"
        android:layout_height="250dp"
        android:layout_gravity="center"
        android:src="@drawable/photo" />
/>
//Photo.java
setContentView(R.layout.photo); 
```

# eclipse - 在 Eclipse 中调试 Karaf 包：坚持 dev:watch URLs/IDs？

> ID：12676646
> 
> 赞同：2
> 
> 时间：2012-10-01T15:48:56.993
> 
> 标签：eclipse, apache-karaf

我希望能够从 Eclipse 轻松调试在 Apache Karaf 中运行的 OSGi 包。到目前为止，我确定的最简单的方法是创建一个启动 Karaf 的 Java 应用程序启动器。如果之前安装了包，那么我可以设置断点，即使在激活器中，一切都很好。

问题是，当对代码进行更改时，调用 mvn install，然后调用 Eclipse Karaf 启动器，我正在运行捆绑包的旧缓存版本。我玩过从命令行运行 Karaf，使用 Maven URL 安装我的包，并成功使用 dev:watch。但我发现 dev:watch URL 没有保留。因此，当从 Eclipse 启动 Karaf 时，没有观察到的 URL（以前的 URL 在 Karaf 关闭时丢失）并且没有安装新版本的包。

有没有办法让 dev:watch URL 持久化？我寻找可能包含 URL 的属性，甚至是可用于指定 URL 的 Karaf 命令行选项，但没有运气。我什至尝试将 dev:watch 命令添加到 etc/shell.init.script，但我在 Karaf 启动时收到此消息“初始化脚本错误：找不到命令：dev:watch。” 我认为这意味着该命令在 Karaf 启动序列中运行得太早（开发功能尚未启动？）。

任何帮助都将不胜感激，即使是我没有考虑过的其他方式来轻松调试在 Eclipse 中运行在 Karaf 中的包。目标是避免每次代码更改时都需要使用手动命令，例如 osgi:install。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:39:00.923

Karaf 团队现在也在努力与 EIK 更好地集成，但目前它还没有达到需要的深度集成。因此，您提供的方式基本上是进行调试的最佳方式。使用 maven 构建您的应用程序，在您的 karaf 启动并运行时执行 dev:watch。由于 dev:watch 是一个“开发时间”命令，它并不打算持久化。但是您仍然可以选择历史记录，当然您可以为命令提供多个捆绑包 ID。

# .net - .NET 错误和 Server 2008

> ID：12676647
> 
> 赞同：0
> 
> 时间：2012-10-01T15:48:59.880
> 
> 标签：.net, windows-server-2008

我们目前正在运行 2 台服务器，一台托管名为 IFCA 的应用程序，这是一种会计软件，另一台托管其数据库。如果我以管理员身份运行该应用程序，一切正常，但如果我是用户则不行。我得到的错误是

> 过程或函数...指定的参数过多

一开始我以为是权限问题。我试图给用户越来越多的权限，直到我最终将该用户设置为管理员，但仍然出现该错误。

所以我的问题是除了权限之外，Win Server 2008 上的管理员和非管理员之间还有什么区别？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:05:33.960

看起来应用程序在管理员上下文中运行时调用了不同的函数，而在用户中运行时调用了失败的函数。检查应用程序是否有任何日志（.log 文件、事件日志中的日志等）以获取有关错误的更多详细信息。

# javascript - Javascript，以编程方式触发Firefox中的文件下载

> ID：12676649
> 
> 赞同：12
> 
> 时间：2012-10-01T15:49:11.110
> 
> 标签：javascript, firefox, google-chrome, dom

我在内存中有一个希望用户下载的数据 uri。

这个小提琴适用于 chrome 但不适用于 FF：http: [//jsfiddle.net/6W2TY/](http://jsfiddle.net/6W2TY/)

当您单击运行时，它将下载 chrome 中的小图像，而在 FF 中什么也不做。谁能帮我理解为什么它在 FF 中不起作用以及我需要做什么才能使它起作用？

谢谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-12-03T20:04:11.527

我意识到这是一篇旧帖子，但是当我在 FF 中下载文件时遇到类似问题时遇到了它。在编写问题时，这可能在 FF 中不起作用，但现在可以。

```
a = document.createElement('a');
document.body.appendChild(a);
a.download = name;
a.href = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAOCAYAAAAmL5yKAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAABWSURBVDhPY0xISPh//0UOA7mAiVyNMH2jBjAwkBQGjD9KGBTEJ6OEO0kG2NvbMwCjnXwDsEU5SS5ANuDhjRCGJbPFSQsDdBfIyMhQZgDIQLK9QLWkDABPsQw5I+5qmAAAAABJRU5ErkJggg==";
a.click(); 
```

与原始小提琴的更改：

1.  添加呼叫到`document.body.appendChild(a);`
2.  更改`triggerEvent()`为`a.click()`

这是一个更新的小提琴：http: [//jsfiddle.net/70f91ao7/6/](http://jsfiddle.net/70f91ao7/6/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-01T16:03:09.187

您正在使用新的 (html5)[下载属性](http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#attr-hyperlink-download)。~~据我所知，这仅在 Chrome 中受支持，在 Firefox 中（尚不）受支持。~~

**更新 3-2018现在**[几乎所有主要浏览器都](https://www.caniuse.com/#feat=download)
支持此功能（不支持 IE）。

## 替代方案：使用 location.href

另一种强制下载的方法是将用户重定向到图像，如下所示：

```
// generate the image
var img = ""

// then call a function maybe onClick or something
downloadImage(img);

function downloadImage(data) {
    location.href = "data:application/octet-stream;base64," + data;
} 
```

或短版

```
location.href = "data:application/octet-stream;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAOCAYAAAAmL5yKAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAABWSURBVDhPY0xISPh//0UOA7mAiVyNMH2jBjAwkBQGjD9KGBTEJ6OEO0kG2NvbMwCjnXwDsEU5SS5ANuDhjRCGJbPFSQsDdBfIyMhQZgDIQLK9QLWkDABPsQw5I+5qmAAAAABJRU5ErkJggg==" 
```

## 替代方案：服务器端

作为替代方案，如果您正在处理图像服务器端，您可以通过设置 content-disposition 标头来强制下载。

**PHP 示例**

```
header('Content-Disposition: attachment; filename="image.png"'); 
```

# android - 使用 setSelection() 后 Android Spinner 不关闭

> ID：12676650
> 
> 赞同：0
> 
> 时间：2012-10-01T15:49:12.360
> 
> 标签：android

我有一个场景，我想使用 setSelection() 以编程方式更改微调器的值。这很好用，除了如果微调器打开（扩展？）时间，微调器不会关闭。例如，尽管调用了 setSelection()，但菜单仍然存在。

如何以编程方式关闭微调器？我试过 performClick() 无济于事。

* * *

编辑：更多细节：

我尝试这样做的原因是我的微调器实际上为每个选择行使用了复合布局。也就是说，我有一个包含图像、文本和按钮的线性布局。这个想法是该按钮用作“编辑”按钮（打开一个活动），同时按下图像/文本选择行（通常）。

当我添加按钮时，问题就来了。突然，图像和文字不再捕捉新闻事件来改变组合。换句话说，在行中添加一个按钮破坏了整行的触摸处理能力。所以我尝试为图像/文本手动实现一个点击处理程序，随后执行了一个 setSelection ......这就是我遇到这个问题的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:41:18.350

您说添加按钮后，您丢失了整行的点击句柄。尝试将此添加`android:descendantFocusability="blocksDescendants"`到您的行布局中，看看您是否可以让点击正常工作。

# scala - IntelliJ 11 无法在导入语句中不使用根包的情况下解析 Play/Scala 模型

> ID：12676652
> 
> 赞同：2
> 
> 时间：2012-10-01T15:49:22.433
> 
> 标签：scala, playframework, intellij-idea, playframework-2.0

我刚刚开始使用 IntelliJ 以及之前在 Scala IDE 中开发的 Play 和 Scala 插件开发一个项目。该项目编译并运行良好，但由于无法解析模型符号，IDE 在整个控制器中显示了一堆验证错误。

假设我有一个名为 User 的模型，并且我的控制器有 import 语句：

```
import models.User 
```

IntelliJ 不解析用户模型的符号。当我尝试使用“import models.User”操作自动修复错误时，IDE 会创建第二个导入语句：

```
import _root_.models.Workspace 
```

我知道根包在 Scala 中用于绝对包位置，但显然在这种情况下不需要它，我希望 IDE 与第一个导入语句一起正常工作。

我可以在 IDE 或 Play/Scala 配置中更改任何设置以允许第一个导入语句正常工作吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T16:29:49.730

看起来像一个[已知的错误](http://youtrack.jetbrains.com/issue/SCL-4664)，请加注星标/投票以跟踪进度。

# php - MySQL 选择查询中的 PHP foreach 语句

> ID：12676655
> 
> 赞同：2
> 
> 时间：2012-10-01T15:49:36.100
> 
> 标签：php, mysql, sql, foreach

这是我的数据

```
id          cost    cat         foreign     colours
--------------------------------------------------------   
385_white   99      swarovski   12          black;blue
386_white   99      swarovski   12          black;blue;green
387_white   99      swarovski   12          yellow;green
389_white   99      swarovski   12          white;silver
385_white   99      swarovski   12          silver 
```

这是我的查询

```
$checkSQL=mysql_query("SELECT * FROM `products`");
while($r = mysql_fetch_array($checkSQL)) {
    echo '
        <ul class="ColourList">
            <li class="$row">$row</li>
        </ul>
    ';
} 
```

伪代码 - 这应该将列表拆分为唯一的`li`

```
foreach ($r["colours"] as $key){
                        $key = explode(";", $r["colours"]);
                        <li class="$key"></li>
                    } 
```

我想为`li`表格行中的每种颜色创建一个列表项，所以基本上将冒号分成单独的行 - 认为是`explode`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T15:59:13.473

这应该这样做:)

```
$checkSQL=mysql_query("SELECT * FROM `products`");
while($r = mysql_fetch_assoc($checkSQL)) {

    echo '<ul class="ColourList">';
    $cols = explode( ';', $r['colours'] );
    foreach ( $cols as $col ){
        echo '<li class="' . $col . '">' . $col . '</li>';
    }
    echo '</ul>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:58:47.053

```
$this->dbo = new mysqli(
    'localhost',
    'username',
    'password',
    'name_of_database'
);

$r = $this->dbo->query( "SELECT * FROM `products`" ) or die( $this->dbo->error );

while ( $r_items = $r->fetch_assoc() )
{
    echo '<ul class="ColourList">';
    foreach( explode(";" $r_items['colours']) as $r_color) {
        echo '<li class="' . $r_color . '">' . $r_color . '</li>';
    }
    echo '</ul>';
}

$this->dbo->close(); 
```

我提供了这个代码而不是原始代码，因为其他人已经提供了一个很好的例子来说明如何修复你的代码以使其工作。然而，这是 mysqli 的一个示例，出于安全原因，您应该考虑使用 mysqli 而不是常规 mysql……我不知道确切的原因，但有人告诉我最好使用 mysqli。

如果我的代码中有任何错误，请原谅我，这还没有经过测试，但应该可以工作。

# ios - IBOutlet 链接到嵌入式容器视图控制器

> ID：12676660
> 
> 赞同：36
> 
> 时间：2012-10-01T15:49:45.463
> 
> 标签：ios, storyboard, xcode4.5

我有一个复杂的 iPad 视图，我通过多个视图控制器进行管理。我以前（在 iOS6/Xcode 4.5 之前）通过在代码中分配我的视图控制器来做到这一点，并通过到主视图的链接将各种视图连接到它们。

我想做的是使用新的 UIContainerView 容器视图将视图控制器嵌入情节提要文件中。我似乎无法将 IBOutlet 链接到嵌入式视图控制器到主控制器。

是否有可能做到这一点？或者通过代码中的标签或其他内容检索嵌入式控制器？

这个问题特别是关于使用容器视图

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-12-11T19:34:03.217

在某些情况下，另一种选择是使用`-prepareForSegue:sender:`.

例如，如果我在 a`UINavigationController`中嵌入了一个，我可以在情节提要中将`CustomContainerViewController`嵌入 segue 命名为并在via中捕获它`embedContentStack``CustomContainerViewController`

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"embedContentStack"]) {
        // can't assign the view controller from an embed segue via the storyboard, so capture here
        _contentStack = (UINavigationController *)segue.destinationViewController;
    }
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-01T15:58:53.967

我不确定“检索嵌入式控制器”是什么意思。当您想使用控制器时，您可以使用 UIStoryboard 方法 instantiateViewControllerWithIdentifier:，使用您在 IB 中提供给控制器的标识符。您还可以使用 performSegueWithIdentifier:sender: 方法（它也实例化了视图控制器）。您应该查看 Apple 文档中的“在您的应用程序中使用视图控制器”部分。它还提到了子视图控制器与容器控制器同时实例化的事实。

编辑后：如果您将容器视图嵌入到另一个视图控制器中，则可以使用 self.childViewControllers 从包含控制器中引用该嵌入式视图的控制器（这将是一个数组，因此如果只有一个，您可以使用 lastObject 获取它） .

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-04T11:17:50.203

这是关于它的另一个线程：[Access Container View Controller from Parent iOS](https://stackoverflow.com/questions/13279105/access-container-view-controller-from-parent-ios)

[他们建议在prepareForSegue](https://stackoverflow.com/a/13279703/883765%20prepareForSegue)中保留参考或在[self.childViewControllers](https://stackoverflow.com/a/13280508/883765%20%20xxx)中搜索嵌入的viewController

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-25T07:59:03.507

# 注意事项

在继续使用这个问题的答案之前，您可能希望反映嵌入式事物是否真的需要成为视图控制器。

例如，如果您要嵌入一个`UICollectionViewController`子类，您能否改为嵌入一个`UICollectionView`子类？或者，更好的是，您可以嵌入一个`UIView`隐藏`UICollectionView`在简单 ViewModel 后面的子类吗？

在我目前正在处理的代码库中，我将两个视图控制器嵌入到另一个视图控制器中。两者都可以很容易地成为普通视图，然后可以更容易地绑定到情节提要中，而无需这些杂乱的代码。

不幸的是，它们目前是视图控制器，我现在无法将它们简化为普通视图，因此必须这样做。

# 背景

[我正在使用Playful Geek](https://stackoverflow.com/a/13827172/2547229)`prepare(for segue:, sender:)`建议的方法来获取嵌入 segue 。

我想展示我为此使用的 swift，因为它看起来相当整洁......</p>

```
class EditionLandingViewController: UIViewController {
    fileprivate var titlesView: SectionTitlesViewController!
    fileprivate var sectionsView: SectionsViewController!
}

//MARK:-

extension EditionLandingViewController {
    private enum SegueId: String {
        case embedTitles
        case embedSections
    }

    override func prepare(for segue: UIStoryboardSegue, sender: Any?) {
        super.prepare(for: segue, sender: sender)

        guard
            let segueRawId = segue.identifier,
            let segueId = SegueId(rawValue: segueRawId)
            else { return }

        switch segueId {
        case .embedTitles:
            self.titlesView = segue.destination as! SectionTitlesViewController

        case .embedSections:
            self.sectionsView = segue.destination as! SectionsViewController
        }
    }
} 
```

# 讨论

我选择将[segues 命名为 action methods](https://stackoverflow.com/a/26889936/2547229)。

为 segue 标识符使用`enum`case 意味着您已经拥有了编译器和工具，因此很难弄错 segue 名称。

在这种情况下，将 segue id 保持在`private enum`范围`extension`内似乎是合适的，因为在其他任何地方都不需要这些 segue（`perform`例如，它们不能被编辑）。

我正在为嵌入式视图控制器使用隐式展开的类型，因为（在我的情况下）如果它们丢失，这是一个逻辑错误。

同样，我也很乐意强制转换目标视图控制器类型。同样，如果这些类型不相同，那将是一个逻辑错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-21T01:52:54.503

**票数最高的答案的**Swift版本。**多年后，Interface Builder 似乎仍然不支持将 IBOutlets 拖到嵌入式容器视图中。**

 **相反，将网点设置在`prepare(for:sender:)`：

```
@IBOutlet var someViewController: SomeViewController!

override func prepare(for segue: UIStoryboardSegue, sender: Any?) {
    if segue.identifier == "EmbedSomeViewController", let destination = segue.destination as? SomeViewController {
        someViewController = destination
    }
} 
```

您还必须在 Storyboard 上设置 UIContainerView。Xcode 会自动生成一个嵌入转场；设置 segue 的`Identifier`.

[![在情节提要上设置标识符](../Images/3f97d45e125d50cbb9bf032c90e3c5f5.png)](https://i.stack.imgur.com/bLrpj.png)**

# lua - 使用 package.preload 模拟一个 lua 模块

> ID：12676662
> 
> 赞同：4
> 
> 时间：2012-10-01T15:49:49.347
> 
> 标签：lua, mocking

我正在尝试针对单个模块功能编写单元测试。该模块与其他一些模块协作，因此我想模拟这些模块以隔离我的测试系统。这是一些简化的伪代码：

```
local moduleFoo={}
local moduleBaz=  require("moduleBaz") 

moduleFoo.doSomething = function (arg) 

  if moduleBaz.bar.neatMethod(arg) then
     --does something interesting  
  end

end

return moduleFoo 
```

这是moduleBaz的代码

```
local moduleBaz={}
moduleBaz.bar= {}

moduleBaz.bar.neatMethod=function(arg)
   --does something neat
end
return moduleBaz 
```

我正在尝试使用 package.preload 函数在测试运行之前注入 moduleBaz 的模拟实例，但它似乎不起作用（即在测试中使用了 moduleBaz 的真实实例，而不是我的模拟）

这是一些伪测试代码：

```
 package.loaded.moduleBaz= nil
    local moduleBaz = {}
    moduleBaz.bar = {}
    moduleBaz.bar.neatMethod= function(guid) return true end

    package.preload['moduleBaz'] = function ()
        return moduleBaz
    end

   local foo= require("moduleFoo")
   foo.doSomething('asdasdasda')--real moduleBaz is called, not my mock! 
```

任何想法我做错了什么？我对 Lua 很陌生，对语言中如何处理范围完全不满意！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T22:29:47.860

您的 moduleBaz 代码中似乎缺少 return 语句

```
return moduleBaz 
```

为什么不使用`package.loaded`它，因为它为您提供了更简单的界面？`package.loaded.moduleBaz`只需要包含您想从`moduleBaz`代码中返回的任何内容。像这样的东西应该可以工作或给你一个想法：

```
package.loaded.moduleBaz = {
  bar = {
    neatmethod = function(arg)
      -- your mock code here
    end,
  }
} 
```

然后`require('moduleBaz')`将简单地返回您刚刚创建的那个对象。

我也无法重现您的设置问题。我使用的文件如下；请注意，我添加`return moduleBaz`了如上所述的内容，但这是我所做的唯一更改：

文件`moduleBaz.lua`：

```
local moduleBaz={}
moduleBaz.bar= {}
moduleBaz.bar.neatMethod=function(arg)
  print "baz"
  return true
end
return moduleBaz 
```

文件`moduleFoo.lua`：

```
local moduleFoo={}
local moduleBaz=  require("moduleBaz") 
  moduleFoo.doSomething = function (arg) 
  if moduleBaz.bar.neatMethod(arg) then
    print "foo"
  end
end
return moduleFoo 
```

文件`testFoo.lua`

```
package.loaded.moduleBaz= nil
local moduleBaz = {}
moduleBaz.bar = {}
moduleBaz.bar.neatMethod= function(guid) print "mock" return true end

package.preload['moduleBaz'] = function ()
    return moduleBaz
end

local foo= require("moduleFoo")
foo.doSomething('asdasdasda')--real moduleBaz is called, not my mock! 
```

当我运行它时，我会`mock\nfoo\n`按预期打印。

# c# - 使用 AutoMapper 从 POCO 映射到 NHibernate 代理对象时出错

> ID：12676669
> 
> 赞同：11
> 
> 时间：2012-10-01T15:49:59.640
> 
> 标签：c#, automapper, proxy-classes

我们最近升级了 AutoMapper，在以某种方式映射项目时遇到了问题。

当我加载 NHibernate 域对象并尝试以下列方式将我的模型映射到它时：

```
var myPoco = new MyPoco();
var proxy = repository.Load<MyDomainObject>(id);
Mapper.Map(myPoco, proxy); 
```

我收到以下错误：

```
Missing type map configuration or unsupported mapping.

MyPoco-> MyDomainObjectProxy 
```

但是，如果我使用该方法的以下重载，则**不会**出现异常：

```
var myDomainObj = Mapper.Map<MyPoco, MyDomainObject>(myPoco); 
```

当您查看 AutoMapper 代码时，您可以看到这些方法在代码库中调用了不同的基本方法，这就是它们行为不同的原因。

这是 AutoMapper 较新版本的错误，还是有另一种使用 Mapper.Map(source, destination) 代理的方法？

**注意**：这是使用 AutoMapper 2.2.0。我相信这在 0.3 中运行良好。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T18:15:40.083

这是一个已知问题，已修复开发分支。在此处查看预发布版本：

[AutoMapper 2.2.1-ci8](http://nuget.org/packages/AutoMapper/2.2.1-ci8)

该修复程序将很快在 2.2.1 版本中发布。

# c# - 使用托盘中的资源调用 WPF 窗口

> ID：12676671
> 
> 赞同：0
> 
> 时间：2012-10-01T15:50:06.903
> 
> 标签：c#, wpf, resources

我有一个 Windows 托盘项目，当单击设置时会打开一个 WPF 窗口。WPF 窗口打开并正确显示一些内容，但我有两个列表绑定到另一个具有奇怪行为的类。

这些列表作为设备显示在两个不同的选项卡上。在一个选项卡上，有一个可以启动设备的图形表示，另一个选项卡显示设备的设置。当 WPF 应用程序设置为启动项目时，一切正常。但是，当我从托盘启动它时，列表会正确加载，并显示在第一个选项卡中，可以在其中启动它们，但第二个选项卡显示不存在任何设备。它们都链接到相同的数据。

起初，我认为绑定存在问题，但经过几天尝试解决此问题后，我认为问题出在 App.xaml 中，其中存在对资源的引用。我怀疑因为我没有引用 App.xaml，所以没有加载资源，并且没有正确设置列表。项目工作和不工作的唯一区别是一个有WPF作为启动项目，另一个使用托盘调用WPF。

那么，我的问题是如何引用 App.xaml 以确保加载所需的资源。

以下是我的一些代码，以防万一。

应用程序.xaml

```
<Application x:Class="Sender_Receiver.App"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
StartupUri="Shell.xaml">
<Application.Resources>
    <ResourceDictionary Source="Themes\Generic.xaml"/>
</Application.Resources> 
```

当前调用打开 WPF

```
 private void settingsEvent_Click(object sender, EventArgs e)
    {
        gui = new Sender_Receiver.mainWindow(); // mainWindow() located in Shell.xaml
        gui.Show();
    } 
```

显示设备的代码。CollapsibleSection 实现 Expander，RepeatControl 实现 ItemsControl。

```
<c:CollapsibleSection Header="Senders">
        <c:CollapsibleSection.CollapsedContent>
            <c:RepeatControl Margin="30,0,0,0" ItemsSource="{Binding SendersList}"  
                              ItemType="{x:Type m:Sender}"  List="{Binding SendersList}"  
                              ItemTemplate="{StaticResource SenderSummary}"/>
        </c:CollapsibleSection.CollapsedContent>
        <Border BorderThickness="1" BorderBrush="Chocolate" Margin="30,0,0,0">
            <c:RepeatControl  ItemsSource="{Binding SendersList}"  
                                  ItemType="{x:Type m:Sender}" 
                                  List="{Binding SendersList}"  
                                  ItemTemplate="{StaticResource SenderTemplate}"/>
        </Border>
    </c:CollapsibleSection> 
```

下图显示了应用程序在不同条件下的表现。

![从托盘调用时，WPF 不会显示所有数据。](../Images/bd2b7c4b4784697e4b222f0870626d27.png)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:18:49.663

我终于想通了这一点。必须调用整个 WPF 应用程序才能运行，而不是实例化 UI。这将导致 App.xaml 加载字典，然后其他 WPF 表单可以访问它。这是通过以下代码完成的：

```
private void settingsEvent_Click(object sender, EventArgs e)
    {
        if (gui == null)
        {
            gui = new App();
            gui.MainWindow = new mainWindow();
            gui.InitializeComponent();
        }
        else
        {
            gui.InitializeComponent();
            gui.MainWindow.Show();
            gui.MainWindow = new mainWindow();
        }
    }
    private static App app = new App(); 
```

您必须继续将 mainWindow 添加回应用程序，因为在窗口显示时它似乎设置为 null。

这是通过实验发现的，所以我确信这不是最佳实践，但它确实有效，而且现在，这正是我所需要的。

编辑

然而，就我的目的而言，这仍然行不通。我可以只打开一次“设置”窗口，或者在第一次打开它时无法让事件处理程序对其进行处理。最后，乔希想出了正确的答案：

```
Process myProcess = new Process();
myProcess.StartInfo.UseShellExecute = false;
myProcess.StartInfo.FileName = "C:\\mysettingsapp\\mysettingsapp.exe"; // replace with path to your settings app
myProcess.StartInfo.CreateNoWindow = false;
myProcess.Start();
// the process is started, now wait for it to finish
myProcess.WaitForExit();  // use WaitForExit(int) to establish a timeout 
```

他的完整解释可以在[这里](https://stackoverflow.com/questions/12734483/open-wpf-settings-window-from-forms-app)找到。

# batch-file - 批处理文件打印多个文本文件的最后一页

> ID：12676673
> 
> 赞同：2
> 
> 时间：2012-10-01T15:50:10.217
> 
> 标签：batch-file

我需要打印 50 个文本文件的最后一页。目前我每天都打开所有 50 个文本文件，一个一个地打印每个文件的最后一页 - 这是一项非常痛苦的任务。

我知道这项任务可以通过编写批处理文件来完成，但是，我对批处理编程一无所知。

将不胜感激任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:53:58.127

充实了安舒回答中的想法。这是一个脚本，它将打印当前目录中所有 .TXT 文件的最后 50 行。输出被发送到默认打印机。

```
@echo off
setlocal enableDelayedExpansion
set "tempFile=%temp%\printEnd "
set "pageSize=50"

for %%F in (*.txt) do (
  for /f %%N in ('find /c /v "" ^<"%%F"') do set /a skip=%%N-pageSize
  if !skip! lss 0 set skip=0
  >"%tempFile%%%~nxF" more +!skip! "%%F"
  notepad /p "%tempFile%%%~nxF"
)
echo "%tempFile%"
2>nul del "%tempFile%*" 
```

# wpf - 当前调度程序工作时的多线程 MVVM 更新值

> ID：12676684
> 
> 赞同：1
> 
> 时间：2012-10-01T15:50:51.013
> 
> 标签：wpf, multithreading, mvvm, binding

我在窗口中更新值有问题，它是通过`Show()`方法而不是`ShowDialog()`方法打开的。我使用`MVVM`和使用绑定，例如：

```
Value="{Binding Path=MainProgressValue, UpdateSourceTrigger=PropertyChanged}" 
```

在我的财产中，我`INotifyPropertyChanged`用于通知 UI。

它工作正常，但现在我打开新窗口

```
 window.DataContext = context;
 if (owner != null)
       window.Owner = owner;
 resultHandler = new ViewModelBaseClass.ResultHandler(context_RequestClosing);
 getDialogResultHandler = new ViewModelBaseClass.GetDialogResultHandler(context_GetDialogResultAction);
 context.RequestClosing += resultHandler;
 context.GetDialogResult += getDialogResultHandler;
 window.Show(); 
```

有进度条。显示窗口，主线程继续执行程序。但是当`DataContext`call时`RaisePropertyChanged`，进度条不会更新。带有进度条的窗口是否可能使用主线程以外的另一个线程？

如何更新这个值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:57:56.470

根据您的描述，我的猜测是您希望在主应用程序线程忙于做某事时刷新 UI。主应用程序线程是 UI 线程，因此如果是这种情况，您的 UI 线程将被阻塞。

您需要做的是移动正在执行加载等的“程序”部分并将进度值更新到工作线程（请参阅 ThreadPool）中，当您想要通知 UI 刷新时使用 Dispatcher.BeginInvolke()你找到的例子。这将在主 UI 线程上执行您的刷新代码。

# css - 可能的原因：相同的 CSS 但不同的结果

> ID：12676685
> 
> 赞同：1
> 
> 时间：2012-10-01T15:50:56.540
> 
> 标签：css

我正在尝试修改一个 WordPress 主题[http://demo.wpzoom.com/evertis/](http://demo.wpzoom.com/evertis/)并在我自己的网站上使用它。

但是，发生了一些奇怪的事情，页脚区域在**Firefox**中无法正常显示（而在 IE8 上运行良好）：

![在此处输入图像描述](../Images/f59410bc2ba34b7da0091b0edce3d0a2.png)

原始主题在 Firefox 和 IE8 上运行良好。 ![在此处输入图像描述](../Images/b7b4148294af5190e0b926e08ef7991a.png)

可能的原因是什么？

更多信息：我正在使用带有编码“UTF-8 without BOM”的 Notepad++。很多年前，我在IE6上看到一个类似的问题，将Encoding更改为“ANSI”后，一切正常。但这一次它不会起作用。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:55:49.547

尝试覆盖最后一个页脚部分的 margin-right，例如：

```
.wpzoom-flickr-photos { margin-right:0; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:14:23.917

我认为问题出在 display: inline-block ，它以有问题而闻名。这是一篇文章，您可以在其中找到您正在寻找的答案：

[http://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/](http://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/)

# jquery - Jquery 循环插件 - 悬停/鼠标悬停幻灯片

> ID：12676690
> 
> 赞同：1
> 
> 时间：2012-10-01T15:51:11.547
> 
> 标签：jquery, html, css

我在 jquery 循环幻灯片中有一个透明的 png。在翻转时，它从图像 A 淡入到 B。在鼠标移出时，它又回到 A。但是，它不会在之后的任何翻转上重复此淡入淡出。对此有什么想法吗？谢谢

```
 <script type="text/javascript">
    $(document).ready(function(){ 
          $('#picroll').cycle({                            
                timeout:.2,
                delay:  0, 
        fx: 'fade',
        continuous: false,
                speed:  300,
                autostop: 1
         }).cycle("pause").hover(function() {
                $(this).cycle('resume');
         },function(){
                $(this).cycle('pause');
         $(this).cycle('resume');
   })
     .mouseleave(function(){
        $(this).cycle(0, 'fade').cycle('play');
      });
    });
</script>

  <div id="picroll"><a href="#"><img src="images/group/PictureA.png" width="114" height="330"/>
  <img src="images/group/PictureB.png" width="114" height="330" /></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:42:47.887

改用这个：

```
$("#picroll").mouseover('
     $("#picroll:nth-child(1)").fadeOut(500);
     $("#picroll:nth-child(2)").fadeIn(500);
');
$("#picroll").mouseout('
     $("#picroll:nth-child(1)").fadeIn(500);
     $("#picroll:nth-child(2)").fadeOut(500);
'); 
```

# sql - sql查询的小例子

> ID：12676692
> 
> 赞同：-2
> 
> 时间：2012-10-01T15:51:14.563
> 
> 标签：sql

我是 sql 查询的新手。

我正在处理与数据库的事务。

我想写一个 sql 查询，它只插入那些从 101 开始的数字。

```
sql = "insert into tablex where values 101123";
sql = "insert into tablex where values 10100";  
sql = "insert into tablex where values 101125"; 
```

所有插入都应该使用仅以 101 开头的值。
数字 101123、10100、101123 来自带有某些程序的文本文件。

我只想在表格中插入那些以 101 开头的数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:52:58.767

您可以通过在查询中使用`WHERE`子句来限制插入的记录。

```
insert into yourtable (col1)
select yourColumn
from yourtable
where yourColumn >= 101 
```

根据您的评论，也许您想要这样的东西：

```
insert into yourtable (col1)
select yourColumn
from yourtable
where yourColumn LIKE '101%' 
```

# python - zeromq 同时订阅和发布

> ID：12676694
> 
> 赞同：5
> 
> 时间：2012-10-01T15:51:24.273
> 
> 标签：python, linux, zeromq, publish-subscribe

我正在尝试在使用 python 的 debian/多进程情况下使用 zeromq。我有几个进程解码来自大量传感器的原始数据，并在 zmq 中发布。到目前为止，一切都很好。我有一个计算过程，它订阅 zmq 上的原始数据，并执行一些计算。然后它需要发布它的答案以供其他进程记录和使用。因此，我的计算过程需要在同一个过程中订阅和发布。

```
import zmq
import json
context = zmq.Context()

sub = context.socket(zmq.SUB)
sub.setsockopt(zmq.SUBSCRIBE, '')
sub.setsockopt(zmq.RCVBUF, 0)
sub.bind("tcp://127.0.0.1:5000")

pub = context.socket(zmq.PUB)
pub.bind("tcp://127.0.0.1:5000") 
```

我尝试了上述方法，但没有运气。它返回一个错误...

```
File "socket.pyx", line 465, in zmq.core.socket.Socket.bind (zmq/core/socket.c:4749)
zmq.core.error.ZMQError: Address already in use 
```

我阅读了文档、谷歌等，但现在完全卡住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:54:57.637

您试图绑定到同一个端口 (5000) 两次，这会给您带来`Address already in use`错误 - 您只能将一个套接字绑定到一个端口。

但是`sub`套接字不应该`bind()`，它应该对`connect()`另一个进程正在发布到的某个主机/端口执行操作（即已经完成`bind()`）。代码应类似于：

```
sub = context.socket(zmq.SUB)
sub.setsockopt(zmq.SUBSCRIBE, '')
sub.setsockopt(zmq.RCVBUF, 0)
sub.connect("tcp://127.0.0.1:XXXX")

pub = context.socket(zmq.PUB)
pub.bind("tcp://127.0.0.1:YYYY") 
```

我猜您并不是要拥有相同的端口，`XXXX`然后`YYYY`相同的进程会监听它本身发布的消息。

# php - 如果不满足要求，是否需要销毁临时上传的文件

> ID：12676696
> 
> 赞同：3
> 
> 时间：2012-10-01T15:51:24.217
> 
> 标签：php

我正在使用 php 上传文件。该文件必须小于一定大小。如果不是，则脚本返回错误。

我注意到 php 将上传的文件存储在（我的情况） C:\Windows\Temp\filename.extension 现在，如果文件超过最大大小，脚本只会返回错误。那么上传的文件会发生什么？php会自动删除它还是我必须这样做？即使文件大小合适，我猜临时文件仍然存在。我应该在我的脚本中删除这个文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T15:56:42.393

不，来自[手册](http://www.php.net/manual/en/features.file-upload.post-method.php)：

> 如果该文件未被移走或重命名，则该文件将在请求结束时从临时目录中删除。

# javascript - 将参数传递给 XMLHttpRequest 对象

> ID：12676698
> 
> 赞同：15
> 
> 时间：2012-10-01T15:51:36.273
> 
> 标签：javascript

如何将参数传递给 XMLHttpRequest 对象？

```
function setGUID(aGUID) {

    var xhReq = new XMLHttpRequest();

    xhReq.open("POST", "ClientService.svc/REST/SetAGUID" , false);
    xhReq.send(null);
    var serverResponse = JSON.parse(xhReq.responseText);
    alert(serverResponse);
    return serverResponse;
} 
```

我需要使用 javascript 而不是 jquery，在 jquery 中我可以使用此代码，但似乎无法弄清楚直接的 javascript 方式..

```
function setGUID(aGUID) {

    var applicationData = null;

    $.ajax({
        type: "POST",
        url: "ClientService.svc/REST/SetAGUID",
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify({ aGUID: aGUID }),
        dataType: "json",
        async: false,
        success: function (msg) {

            applicationData = msg;

        },
        error: function (xhr, status, error) { ); }
    });

    return applicationData;

} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-01T15:55:55.080

网上有很多关于“xmlhttprequest post”的教程。我只是复制其中一个：

看一看：

[http://www.openjs.com/articles/ajax_xmlhttp_using_post.php](http://www.openjs.com/articles/ajax_xmlhttp_using_post.php)

[https://www.google.com/search?q=xmlhttprequest+post](https://www.google.com/search?q=xmlhttprequest+post)

```
var http = new XMLHttpRequest();
var url = "url";
var params = JSON.stringify({ appoverGUID: approverGUID });
http.open("POST", url, true);

http.setRequestHeader("Content-type", "application/json; charset=utf-8");
http.setRequestHeader("Content-length", params.length);
http.setRequestHeader("Connection", "close");

http.onreadystatechange = function() {
    if(http.readyState == 4 && http.status == 200) {
        alert(http.responseText);
    }
}
http.send(params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-03T22:31:41.653

只需删除这两行（不允许设置这些标题）：

```
http.setRequestHeader("Content-type", "application/json; charset=utf-8");
xmlHttp.setRequestHeader("Connection", "close"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-13T21:15:25.623

这种方式对我有用。

```
var data = new FormData();
data.append('parameter_1', 'value parameter 1');
data.append('parameter_2', 'value parameter 2');
...

var xhr = new XMLHttpRequest();
xhr.open('POST', 'URL', true);
xhr.onload = function () {
    console.log(this.responseText);
};
xhr.send(data); 
```

# python - 如何在 GET 或 POST 中多次使用 Django 表单字段

> ID：12676699
> 
> 赞同：1
> 
> 时间：2012-10-01T15:51:39.923
> 
> 标签：python, django, django-forms, django-templates

这是我所拥有的，一个简单的 Django 表单

```
class survey (forms.Form):
    answer = forms.ChoiceField(
                                 widget = RadioSelect(),
                                 choices = answers_select
                                ) 
```

现在，在我的 HTML 页面上，我得到的不仅仅是一个问题，而是很多问题！是否可以将上述`answer`字段用于所有问题？对于所有的问题，它只是我必须展示的相同选择！

假设我有 3 个问题：

1.  我的餐厅怎么样
2.  好不好吃
3.  服务怎么样

上述`answer`字段的选择是`1\. good, 2\. bad 3\. worst` 所以，我不想为 3 个问题创建 3 个表单字段，因为它是多余的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:19:02.497

退后一步，想清楚——你需要 3`ChoiceField`来跟踪 3 个单独问题的答案，而且没有办法绕过它。

实际重复表单域构造调用是多余的，尤其是在处理 20 个问题时。在这种情况下，您可以将问题列表存储为类不变量，并在表单构建期间动态创建表单字段，而不是静态构建这些字段。

这里有一些东西可以让你初步了解如何去做：

```
class SurveyForm(forms.Form):
    questions = _create_questions('How is my restaurant?',
                                  'How is the Food?',
                                  'How is the service?')

    def __init__(self, *args, **kwargs):
        # Create the form as usual
        super(SurveyForm, self).__init__(*args, **kwargs)

        # Add custom form fields dynamically
        for question in questions:
             self.fields[question[0]] = forms.ChoiceField(label=question[1],
                                                          widget=forms.RadioSelect(),
                                                          choices=answers_select)
    @classmethod
    def _create_questions(cls, *questions):
        return [(str(index), question) for index, question in enumerate(questions)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:12:49.797

您正在寻找[表单集](https://docs.djangoproject.com/en/dev/topics/forms/formsets/)。你可以这样做：

```
from django.forms.formsets import formset_factory
SurveyFormSet = formset_factory(survey, extra=3, max_num=3) 
```

将其添加到您的上下文中：

```
def get_context_data(self, request, *args, **kwargs):
    data = super(MyView, self).get_context_data(request, *args, **kwargs)
    data['formset'] = SurveyFormSet()
    return data 
```

然后在模板中使用它：

```
<form method="post" action="">
    {{ formset.management_form }}
    <table>
        {% for form in formset %}
        {{ form }}
        {% endfor %}
    </table>
</form> 
```

在发帖期间，您需要将 request.POST 和 request.FILES 传递给 formset 构造函数：

```
formset = SurveyFormSet(request.POST, request.FILES) 
```

该链接文档中对所有内容进行了非常详尽的描述。

# xml - 更改 CSL 文件（引文样式语言）

> ID：12676700
> 
> 赞同：1
> 
> 时间：2012-10-01T15:51:42.930
> 
> 标签：xml, citations, csl

我对引用有特定要求，因此我使用了 apa 6th CSL 文件并对其进行了调整。在 APA 中，它在最后一位作者之前添加了一个“&”，但我必须摆脱这个，我在代码中找不到这个函数。

```
 <?xml version="1.0" encoding="utf-8"?>
    <style xmlns="http://purl.org/net/xbiblio/csl" class="in-text" version="1.0" demote-non-dropping-particle="never">
  <info>
    <title>InstitutfürControllingJKU</title>
    <id>http://www.zotero.org/styles/ControllingJKU</id>
    <link href="http://www.zotero.org/styles/apa" rel="self"/>
    <link href="http://owl.english.purdue.edu/owl/resource/560/01/" rel="documentation"/>
    <author>
      <name>Nikolaus Weingartmair</name>
      <email>weinni2000@gmail.com</email>
    </author>
    <contributor>
      <name></name>
    </contributor>
    <contributor>
      <name></name>
    </contributor>
    <contributor>
      <name></name>
      <email></email>
      <uri></uri>
    </contributor>
    <contributor>
      <name></name>
    </contributor>
    <category field="psychology"/>
    <category field="generic-base"/>
    <category citation-format="author-date"/>
    <updated>2010-01-27T20:08:03+00:00</updated>
    <rights>This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License: http://creativecommons.org/licenses/by-sa/3.0/</rights>
  </info>
  <locale xml:lang="en">
    <terms>
      <term name="translator" form="short">
        <single>trans.</single>
        <multiple>trans.</multiple>
      </term>
    </terms>
  </locale>
  <macro name="container-contributors">
    <choose>
      <if type="chapter paper-conference" match="any">
        <text term="in" text-case="capitalize-first" suffix=" "/>
        <names variable="editor" delimiter=", " suffix=", ">
          <name and="symbol" initialize-with=". " delimiter=", "/>
          <label form="short" prefix=" (" text-case="capitalize-first" suffix=")"/>
          <substitute>
            <names variable="translator"/>
          </substitute>
        </names>
      </if>
    </choose>
  </macro>
  <macro name="secondary-contributors">
    <choose>
      <if type="chapter paper-conference" match="none">
        <names variable="translator" delimiter=", " prefix=" (" suffix=")">
          <name and="symbol" initialize-with=". " delimiter=", "/>
          <label form="short" prefix=", " text-case="capitalize-first" suffix=""/>
          <substitute>
            <names variable="editor"/>
          </substitute>
        </names>
      </if>
    </choose>
  </macro>
  <macro name="author">
    <names variable="author">
      <name name-as-sort-order="all" and="symbol" sort-separator=", " initialize-with=". " delimiter=", " delimiter-precedes-last="always"/>
      <label form="short" prefix=" (" suffix=".)" text-case="capitalize-first" strip-periods="true"/>
      <substitute>
        <names variable="editor"/>
        <names variable="translator"/>
        <choose>
          <if type="report">
            <text variable="publisher"/>
            <text macro="title"/>
          </if>
          <else>
            <text macro="title"/>
          </else>
        </choose>
      </substitute>
    </names>
  </macro>
  <macro name="author-short">
    <names variable="author">
      <name form="short" delimiter="/" initialize-with=". "/>
      <substitute>
        <names variable="editor"/>
        <names variable="translator"/>
        <choose>
          <if type="report">
            <text variable="publisher"/>
            <text variable="title" form="short" font-style="italic"/>
          </if>
          <else-if type="bill book graphic legal_case legislation motion_picture song" match="any">
            <text variable="title" form="short" font-style="italic"/>
          </else-if>
          <else>
            <text variable="title" form="short" quotes="true"/>
          </else>
        </choose>
      </substitute>
    </names>
  </macro>
  <macro name="access">
    <choose>
      <if type="thesis">
        <choose>
          <if variable="archive" match="any">
            <group>
              <text term="retrieved" text-case="capitalize-first" suffix=" "/>
              <text term="from" suffix=" "/>
              <text variable="archive" suffix="."/>
              <text variable="archive_location" prefix=" (" suffix=")"/>
            </group>
          </if>
          <else>
            <group>
              <text term="retrieved" text-case="capitalize-first" suffix=" "/>
              <text term="from" suffix=" "/>
              <text variable="URL"/>
            </group>
          </else>
        </choose>
      </if>
      <else>
        <choose>
          <if variable="DOI">
            <text variable="DOI" prefix="doi:"/>
          </if>
          <else>
            <choose>
              <if type="webpage">
                <group delimiter=" ">
                  <text term="retrieved" text-case="capitalize-first" suffix=" "/>
                  <group>
                    <date variable="accessed" suffix=", ">
                      <date-part name="month" suffix=" "/>
                      <date-part name="day" suffix=", "/>
                      <date-part name="year"/>
                    </date>
                  </group>
                  <text term="from"/>
                  <text variable="URL"/>
                </group>
              </if>
              <else>
                <group>
                  <text term="retrieved" text-case="capitalize-first" suffix=" "/>
                  <text term="from" suffix=" "/>
                  <text variable="URL"/>
                </group>
              </else>
            </choose>
          </else>
        </choose>
      </else>
    </choose>
  </macro>
  <macro name="title">
    <choose>
      <if type="report thesis" match="any">
        <text variable="title" font-style="italic"/>
        <group prefix=" (" suffix=")" delimiter=" ">
          <text variable="genre"/>
          <text variable="number" prefix="No. "/>
        </group>
      </if>
      <else-if type="book graphic  motion_picture report song manuscript speech" match="any">
        <text variable="title" font-style="italic"/>
      </else-if>
      <else>
        <text variable="title"/>
      </else>
    </choose>
  </macro>
  <macro name="publisher">
    <choose>
      <if type="report" match="any">
        <group delimiter=": ">
          <text variable="publisher-place"/>
          <text variable="publisher"/>
        </group>
      </if>
      <else-if type="thesis" match="any">
        <group delimiter=", ">
          <text variable="publisher"/>
          <text variable="publisher-place"/>
        </group>
      </else-if>
      <else>
        <group delimiter=", ">
          <choose>
            <if variable="event" match="none">
              <text variable="genre"/>
            </if>
          </choose>
          <choose>
            <if type="article-journal article-magazine" match="none">
              <group delimiter=": ">
                <text variable="publisher-place"/>
                <text variable="publisher"/>
              </group>
            </if>
          </choose>
        </group>
      </else>
    </choose>
  </macro>
  <macro name="event">
    <choose>
      <if variable="event">
        <choose>
          <if variable="genre" match="none">
            <text term="presented at" text-case="capitalize-first" suffix=" "/>
            <text variable="event"/>
          </if>
          <else>
            <group delimiter=" ">
              <text variable="genre" text-case="capitalize-first"/>
              <text term="presented at"/>
              <text variable="event"/>
            </group>
          </else>
        </choose>
      </if>
    </choose>
  </macro>
  <macro name="issued">
    <choose>
      <if type="bill legal_case legislation" match="none">
        <choose>
          <if variable="issued">
            <group prefix=" (" suffix=").">
              <date variable="issued">
                <date-part name="year"/>
              </date>
              <text variable="year-suffix"/>
              <choose>
                <if type="article-journal bill book chapter graphic legal_case legislation motion_picture paper-conference report song" match="none">
                  <date variable="issued">
                    <date-part prefix=", " name="month"/>
                    <date-part prefix=" " name="day"/>
                  </date>
                </if>
              </choose>
            </group>
          </if>
          <else>
            <group prefix=" (" suffix=").">
              <text term="no date" form="short"/>
              <text variable="year-suffix" prefix="-"/>
            </group>
          </else>
        </choose>
      </if>
    </choose>
  </macro>
  <macro name="issued-sort">
    <choose>
      <if type="article-journal bill book chapter graphic legal_case legislation motion_picture paper-conference report song" match="none">
        <date variable="issued">
          <date-part name="year"/>
          <date-part name="month"/>
          <date-part name="day"/>
        </date>
      </if>
      <else>
        <date variable="issued">
          <date-part name="year"/>
        </date>
      </else>
    </choose>
  </macro>
  <macro name="issued-year">
    <choose>
      <if variable="issued">
        <date variable="issued">
          <date-part name="year"/>
        </date>
        <text variable="year-suffix"/>
      </if>
      <else>
        <text term="no date" form="short"/>
        <text variable="year-suffix" prefix="-"/>
      </else>
    </choose>
  </macro>
  <macro name="edition">
    <choose>
      <if is-numeric="edition">
        <group delimiter=" ">
          <number variable="edition" form="ordinal"/>
          <text term="edition" form="short" suffix="." strip-periods="true"/>
        </group>
      </if>
      <else>
        <text variable="edition" suffix="."/>
      </else>
    </choose>
  </macro>
  <macro name="locators">
    <choose>
      <if type="article-journal article-magazine" match="any">
        <group prefix=", " delimiter=", ">
          <group>
            <text variable="volume" font-style="italic"/>
            <text variable="issue" prefix="(" suffix=")"/>
          </group>
          <text variable="page"/>
        </group>
      </if>
      <else-if type="article-newspaper">
        <group delimiter=" " prefix=", ">
          <label variable="page" form="short"/>
          <text variable="page"/>
        </group>
      </else-if>
      <else-if type="book graphic motion_picture report song chapter paper-conference" match="any">
        <group prefix=" (" suffix=")" delimiter=", ">
          <text macro="edition"/>
          <group>
            <text term="volume" form="short" plural="true" text-case="capitalize-first" suffix=". " strip-periods="true"/>
            <number variable="number-of-volumes" form="numeric" prefix="1-"/>
          </group>
          <group>
            <text term="volume" form="short" text-case="capitalize-first" suffix=". " strip-periods="true"/>
            <number variable="volume" form="numeric"/>
          </group>
          <group>
            <label variable="page" form="short" suffix=" "/>
            <text variable="page"/>
          </group>
        </group>
      </else-if>
      <else-if type="legal_case">
        <group prefix=" (" suffix=")" delimiter=" ">
          <text variable="authority"/>
          <date variable="issued" delimiter=" ">
            <date-part name="month" form="short"/>
            <date-part name="day" suffix=","/>
            <date-part name="year"/>
          </date>
        </group>
      </else-if>
      <else-if type="bill legislation">
        <date variable="issued" prefix=" (" suffix=")">
          <date-part name="year"/>
        </date>
      </else-if>
    </choose>
  </macro>
  <macro name="citation-locator">
    <group>
      <label variable="locator" form="short"/>
      <text variable="locator" prefix=" "/>
    </group>
  </macro>
  <macro name="container">
    <choose>
      <if type="bill legal_case legislation" match="none">
        <text variable="container-title" font-style="italic"/>
      </if>
      <else>
        <group delimiter=" " prefix=", ">
          <choose>
            <if variable="container-title">
              <text variable="volume"/>
              <text variable="container-title"/>
              <group delimiter=" ">
                <!--change to label variable="section" as that becomes available -->
                <text term="section" form="symbol"/>
                <text variable="section"/>
              </group>
              <text variable="page"/>
            </if>
            <else>
              <choose>
                <if type="legal_case">
                  <text variable="number" prefix="No. "/>
                </if>
                <else>
                  <text variable="number" prefix="Pub. L. No. "/>
                  <group delimiter=" ">
                    <!--change to label variable="section" as that becomes available -->
                    <text term="section" form="symbol"/>
                    <text variable="section"/>
                  </group>
                </else>
              </choose>
            </else>
          </choose>
        </group>
      </else>
    </choose>
  </macro>
  <citation et-al-min="6" et-al-use-first="1" et-al-subsequent-min="3" et-al-subsequent-use-first="1" disambiguate-add-year-suffix="true" disambiguate-add-names="true" disambiguate-add-givenname="true" collapse="year" givenname-disambiguation-rule="primary-name">
    <sort>
      <key macro="author"/>
      <key macro="issued-sort"/>
    </sort>
    <layout prefix="" suffix="" delimiter="; ">
      <group delimiter=" ">
        <text macro="author-short"/>
        <text macro="issued-year" prefix="(" suffix=")"/>
        <text macro="citation-locator"/>
      </group>
    </layout>
  </citation>
  <bibliography hanging-indent="true" et-al-min="8" et-al-use-first="7" entry-spacing="0" line-spacing="2">
    <sort>
      <key macro="author"/>
      <key macro="issued-sort" sort="ascending"/>
    </sort>
    <layout>
      <group suffix=".">
        <group delimiter=". ">
          <text macro="author"/>
          <text macro="issued"/>
        </group>
        <group delimiter=". ">
          <text macro="title" prefix=" "/>
          <group>
            <text macro="container-contributors"/>
            <text macro="secondary-contributors"/>
            <group delimiter=", ">
              <text macro="container"/>
              <text variable="collection-title"/>
            </group>
          </group>
        </group>
        <text macro="locators"/>
        <group delimiter=", " prefix=". ">
          <text macro="event"/>
          <text macro="publisher"/>
        </group>
      </group>
      <text macro="access" prefix=" "/>
    </layout>
  </bibliography>
</style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T16:49:56.663

`and="symbol"`在“作者”宏中删除。另请参阅[http://citationstyles.org/downloads/specification.html#name](http://citationstyles.org/downloads/specification.html#name)上“and”属性的描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:00:51.293

在线编辑器也可能有帮助：[http ://csl.mendeley.com/visualEditor/index.php](http://csl.mendeley.com/visualEditor/index.php)

# python - 如何在python中将名称与多个对象或值绑定

> ID：12676701
> 
> 赞同：1
> 
> 时间：2012-10-01T15:51:44.490
> 
> 标签：python, binding, python-3.x, name-binding

我在一本关于语言描述的书中看到说

```
On the other hand, a name can be bound to no object (a dangling pointer), 
one object (the usual case), or several objects (a parameter name in a 
 recursive function). 
```

我们如何将名称绑定到多个对象？例如，这不是我们所说的数组，其中所有元素都具有相同的名称但具有索引吗？对于像这里的例子这样的递归函数：

```
x = 0
def f(y):
    global x
    x += 1
    if x < 4 :
        y +=100
        f(y)

    else: return
f(100) 
```

名称是否`y`与递归创建的多个值绑定，因为名称表已经将`y`名称绑定到递归复制的初始值？

**已编辑**只需按此处[Visualizer](http://www.pythontutor.com/visualize.html#code=#single+name+bind%0Asingle_ref1+=+100%0Asingle_ref2+=+%22spam+message%22%0A%0A#Many+names+to+one+object%0Amulti_ref+=+%7B1,2,3,2,4%7D%0Amulti_ref2+=+multi_ref%0Amulti_ref3+=+multi_ref%0A%0A#one+name+to+many+objects%0Ax+=+0%0Adef+f%28y%29%3a%0A++++x++=+1%0A++++print+%28x%29%0A++++if+x+%3C+4+%3a%0A++++++++y++=100%0A++++++++f%28y%29%0A++++++++%0A++++else%3a+return%0Af%28100%29&mode=display&cumulative=false&py=3&curInstr=0)并查看它生成的内容。:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T15:58:40.400

不，名称绑定到一个对象。当我们谈论 Python 时 - 它要么绑定到给定上下文中的单个对象，要么根本不存在。

发生的情况是，内部工作*可能*具有在几个“层”中定义的名称 - 但您的代码只会看到其中一个。

如果名称是递归函数中的变量，您将只能在当前运行的上下文中看到绑定到它的内容 - 每次 Python 中有函数调用时，执行框架，它是一个包含多个属性的对象正在运行的代码（包括对局部变量的引用）被冻结。在被调用函数上，创建了一个新的执行框架，并且在那里，变量名再次绑定到它们在被调用上下文中具有的任何新值。您的代码只是“看到”这个实例。

然后，在 Python 中存在全局变量和内置对象的问题：如果名称不是函数执行上下文中的局部变量，则会在全局变量中搜索模块（同样，只有其中一个是可见的） .并且如果名称在全局变量中没有被拒绝，那么 Python 会在 `globals().__builtins__`您最后一次调用时查找它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T16:01:03.903

如果我理解正确，您是在询问 Python 在不同[范围](http://en.wikipedia.org/wiki/Scope_%28computer_science%29)内创建变量的规则。Python 在函数级别使用[词法作用域](http://en.wikipedia.org/wiki/Scope_%28computer_science%29#Lexical_scoping_and_dynamic_scoping)。

很难准确地说出您编写的代码的目的是什么，但是，虽然`y`在不同的范围内可能存在不同的值（`y`在每个递归级别定义的值），但您的代码只会一次只能看到一个（在您操作的范围内定义的值）。

要真正理解 Python 中的范围规则，我会看一下[PEP 227](http://www.python.org/dev/peps/pep-0227/)。另外，看看[这个 Stack Overflow 问题](https://stackoverflow.com/questions/291978/short-description-of-python-scoping-rules)。

最后，为了能够聪明地谈论 Python 中的“名称”是什么，我建议您阅读 Python 是如何成为“[对象调用](http://effbot.org/zone/call-by-object.htm)”语言的。

在这一点上，我们能够理解，python 不是使用“命名表”，而是使用字典来保存给定范围内可访问的内容。有关更多详细信息，请参阅[此答案。](https://stackoverflow.com/a/370380/173292)这意味着你永远不能在一个范围内拥有两个相同的名称（出于同样的原因，你不能在 python 字典中拥有两个相同的键）。因此，虽然`y`可能存在于不同范围的字典中，但您无法访问它，因为您只能访问当前范围字典中的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T16:18:03.130

关键是：

> 几个对象（递归函数中的参数名称）。

这段话几乎肯定不是指数组，而只是指在递归函数（或任何函数，但递归函数可能一次有多个激活）中，参数可能绑定到不同的值每个递归调用。

这并不意味着您可以访问每个堆栈帧中的每个此类对象；实际上，该技术的重点是确保在每个堆栈帧中只能访问一个这样的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T20:07:15.837

首先，您应该在问题中提到书中的句子与 Python 没有明确的关系（正如 jsbueno 所写，一个名称与 Python 中的一个对象完全绑定）。

无论如何，*名称绑定到没有对象*有点不准确。通常，名称与变量相关，而*与悬空指针相关*的名称就是该指针变量的名称。

在谈到*变量范围*（即使用变量的代码部分）时，一个变量名一次只能用于一个值。但是，可能还有其他代码部分，独立于我们考虑该变量的部分。其他部分代码，可以使用同名；但是，同名的两个变量是完全隔离的。局部变量也是如此，函数体也是如此。如果该语言允许递归，它必须能够创建另一个局部变量的隔离空间，即使对于同一函数的另一个调用也是如此。

在 Python 中，每个函数也可以访问外部变量，但更常见的是使用内部局部变量。每当您为名称分配某个值时，它都会在本地空间中创建。

# javascript - 尝试在正则表达式中获取数字和特殊字符的最小长度

> ID：12676702
> 
> 赞同：2
> 
> 时间：2012-10-01T15:52:00.017
> 
> 标签：javascript, regex

这里推荐新的。

这里我有 2 个表达式我想获得最小长度，如果变量在标准 [0-9] 标记内至少有 2 个数字并且至少有 2 个特殊字符。

这是我用于测试的代码。

```
var noOfNumerics = /[0-9]/g; 
var noOfSplChats = /[~\!@#\$%\^&*_\-\+=`\|\\(\)\{\}\[\]:;"'<>,\.\?\/]/g; 
```

这是进行实际测试的代码。我查看了教程，据我所知，我看到了具有最小值和最大值的要求，但我真的不想要最大值，但如果那不可能，我可以接受。

```
var numericsTest=noOfNumerics.test(Password);
var splCharTest=noOfSplChats.test(Password); 
```

这是一个输入的示例，它将被处理为错误的。

```
Password = 'test#1'; 
```

基本上就是这样。只需添加至少 2 个数字和特殊字符的长度。我将如何将该要求添加到我的脚本中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:22:16.253

这样做的好处是能够调整您将来需要的字符数。

```
function isValidPassword (p) {
    var numDigits = p.match(/\d/g).length;
    var numSpecial = p.match(/[~\!@#\$%\^&*_\-\+=`\|\\(\)\{\}\[\]:;"'<>,\.\?\/]/g).length;
    return numDigits >= 2 && numSpecial >= 2;
} 
```

如果您需要搜索非常长的字符串，您可以使用[RegExp.exec](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec)循环并在获得计数后立即退出

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T15:57:47.363

你可以这样做

```
var noOfNumerics = /.*\d.*\d.*/g; 
```

你可以为 noOfSplChats 做同样的事情

只需`\d`从上面的正则表达式替换为`[~\!@#\$%\^&*_\-\+=``\|\\(\)\{\}\[\]:;"'<>,\.\?\/]`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T16:00:09.300

使用前瞻：

```
/^(?=.*\d.*\d)(?=.*[!@#$].*[!@#$])/ 
```

# .net - 带有连接的 Oracle 上的 ExecuteReader

> ID：12676710
> 
> 赞同：0
> 
> 时间：2012-10-01T15:52:09.637
> 
> 标签：.net, c#-4.0, oracle10g

我正在使用带有 .net 连接器（oracle.dataaccess.dll）的 oracle express 10g2。

我的问题是我有 2 个可连接的 A 和 B 表；

在 sqlDeveloper 我称之为：

```
select * from A; //no problem
select * from B; // no problem
select * from A inner join B on B.id = A.bId; // no problem + joining 
```

我的 c# 类（LocalOracleDataProvider.cs）；

```
var cm1 = connection.CreateCommand();
cm1.CommandText = "select * from A;";
var cm2 = connection.CreateCommand();
cm2.CommandText = "select * from B;";
var cm3 = connection.CreateCommand();
cm3.CommandText = "select * from A inner join B on B.id = A.bId;";
...
var dt1 = cm1.ExecuteReader(); // ok
var dt2 = cm2.ExecuteReader(); // ok
var dt3 = cm3.ExecuteReader(); // crash oracle error ORA-00911 : invalid character 
```

我不明白这个问题......是我的错误请求我没有看到吗？还是有任何问题（没有找到——我一个人在这吗？）？我必须创建一个封装加入请求的 sqlview 吗？或任何其他旁路？

提前谢谢各位！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:55:18.580

尝试将第三个命令转换为：

```
cm3.CommandText = "select * from A inner join B on ( B.id = A.bId ) ;"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:23:55.660

尝试去掉 sql 语句末尾的分号。
在 SELECT 语句中不允许使用分号，但在 CALL 和 EXECUTS 等其他语句中则需要分号。

此外，这可能是多余的，但添加一个

```
cm3.CommandType = CommandType.Text; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T16:30:50.713

找到了... ExecuteReader 与“;”不兼容

# javascript - 如何在带有问号图形的 html 文本字段后添加弹出帮助？

> ID：12676711
> 
> 赞同：1
> 
> 时间：2012-10-01T15:52:18.720
> 
> 标签：javascript, html, button

这是我现在拥有的：

```
<button type="button" name="moreinfo" id="moreinfo"  onClick=" var a = findPos(this); RevLevel(a[0], a[1]); "> <img src="images/question.png" height="16" width="17" alt="more info" border="0" /> </button>` 
```

我正在使用 Firefox 15.0.1，并且我的问号图形周围有一个按钮。我只想要一个没有按钮形状的问号图形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:04:03.137

```
#moreinfo{
border-width:0;
background-color:transparent;  
} 
```

**提示 1：** 您可以将事件直接绑定到 img，因为您不需要按钮的外观。然后，您不需要按钮。

**提示 2：** 将 JS 逻辑与 HTML 代码分开。在脚本块或单独的 JS 文件中绑定您的侦听器。

**提示 3：** 按钮标签不需要类型属性，这是输入元素需要的，而不是按钮。

**提示 4：** 正如我上面提到的关于 JS 的内容，也将你的 CSS 与 HTML 分开。在样式标签或单独的样式表中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:05:46.797

就像*外星人先生*说的，你可以用 CSS 做到这一点。另一种方法是`<img>`用`<a>`标签而不是标签包围`<button>`标签：

```
 <p>Some Text 
    <a href="javascript:void(0)" onclick="alert('Some information...');">
       <img src="images/question.png"/>
     </a>
 </p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T16:06:36.543

为什么不将工具提示和点击事件附加到图像本身？

```
<img name='moreinfo' id='moreinfo' onclick=" var a = findPos(this); RevLevel(a[0], a[1]); " src="images/question.png" height="16" width="17" alt="more info" border="0"/> 
```

# c# - c#在随机时间安排任务？

> ID：12676716
> 
> 赞同：2
> 
> 时间：2012-10-01T15:52:42.140
> 
> 标签：c#, asp.net-mvc

我有许多任务（记录在具有预定时间的数据库中）需要在不同日期的不同时间**随机**运行，并且每个任务都需要很长时间才能处理。

每周都会有新的更多任务出现。在准确的时间自动执行所有这些任务的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:53:24.237

[正如 Phil Haack 在他的博客文章](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)中解释的那样，使用 ASP.NET 应用程序来执行重复的后台任务通常是一个坏主意。

因此，您可以编写一个控制台应用程序来查询您的数据库并执行必要的任务。然后只需使用 Windows 调度程序以所需的时间间隔执行此应用程序。作为替代方案，您可以在 ASP.NET 应用程序中实现该任务，并让控制台应用程序简单地向相应的控制器操作触发 HTTP 请求。

如果您无权访问您的服务器并且不能托管除 ASP.NET 应用程序之外的任何东西，那么您应该完全了解使用这种方法的后果（如上述文章中所述）。因此，一种方法是使用[Quartz.NET](http://quartznet.sourceforge.net/)之类的库来安排定期执行某些代码。

# jasper-reports - 如何避免/防止没有详细信息的列标题和列页脚

> ID：12676717
> 
> 赞同：1
> 
> 时间：2012-10-01T15:52:48.410
> 
> 标签：jasper-reports, ireport

我有一份包含几个子报告的报告。

**报告：**

```
Sub-Report 
Sub-Report 
```

为了将它们分开一点，我在子报告中的所有数据周围放置了一个框架。

**分报告：**

```
Column Header: 
- Frame (left,top,right) 
Group Header 1:
- Headings of data
Detail 1: 
- data 
- Frame (left,right) 
Group Footer 1: 
- summary of data 
- Frame (left,right) 
Column Footer: 
- Frame (left,bottom,right) 
```

所以当一侧剩余的地方不够大时，只会出现列的页眉和页脚。
-> 如何避免这种情况？

**页面情况：**

```
Column Header
Group Header 1
Detail 1 
Group Footer 1
Column Footer 

Column Header
-nothing else here-
Column Footer
-- next page --
Column Header
Group Header 1
Detail 1
Group Footer 1
Column Footer 
```

**我想要的页面：**

```
Column Header 
Group Header 1 
Detail 1 
Group Footer 1
Column Footer 

-- next page --
Column Header 
Group Header 1 
Detail 1 
Group Footer 1 
Column Footer 
```

顺便说一句：我也尝试使用*Page Header/Footer*而不是*Column*。但它也没有奏效。我也将框架放在*Group Header/Footer*中，但是在这种情况下，当数据需要超过一页时，页面底部没有框架，因为组页脚位于组的末尾。

或者换句话说：我只会看到列/页脚/页眉，如果有数据详细信息带，数据可见。

我的*jrxml*文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Subreport" pageWidth="566" pageHeight="842" columnWidth="566" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" resourceBundle="ReportResources" whenResourceMissingType="Key">
    <parameter name="JasperReportParm.FromMaster.PK" class="java.lang.Long"/>
    <parameter name="JasperReportParm.FromMaster.Name" class="java.lang.String"/>
    <parameter name="JasperReportParm.FromMaster.Datum" class="java.lang.String"/>
    <queryString>
        <![CDATA[SELECT * FROM ...]]>
    </queryString>
    <field name="PK" class="java.lang.Long">
        <fieldDescription><![CDATA[]]></fieldDescription>
    </field>
    <field name="PK1" class="java.lang.Long">
        <fieldDescription><![CDATA[]]></fieldDescription>
    </field>
    <field name="ZahlFormatted" class="java.lang.String">
        <fieldDescription><![CDATA[]]></fieldDescription>
    </field>
    <field name="zebra" class="java.lang.Boolean">
        <fieldDescription><![CDATA[false]]></fieldDescription>
    </field>
    <group name="FramesTopBottom" isReprintHeaderOnEachPage="true" minHeightToStartNewPage="79">
        <groupExpression><![CDATA[]]></groupExpression>
        <groupHeader>
            <band height="2"/>
        </groupHeader>
        <groupFooter>
            <band/>
        </groupFooter>
    </group>
    <group name="PK1" isReprintHeaderOnEachPage="true" minHeightToStartNewPage="40">
        <groupExpression><![CDATA[$F{PK1}]]></groupExpression>
        <groupHeader>
            <band height="29">
                <textField isStretchWithOverflow="true">
                    <reportElement stretchType="RelativeToTallestObject" x="487" y="6" width="74" height="10"/>
                    <textElement textAlignment="Right">
                        <font fontName="Helvetica" size="9" isItalic="false"/>
                    </textElement>
                    <textFieldExpression class="java.lang.String"><![CDATA[$P{JasperReportParm.FromMaster.Datum}]]></textFieldExpression>
                </textField>
                <rectangle>
                    <reportElement x="0" y="17" width="566" height="9" backcolor="#AFD9FF"/>
                    <graphicElement>
                        <pen lineWidth="0.0"/>
                    </graphicElement>
                </rectangle>
                <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                    <reportElement key="4" x="5" y="18" width="52" height="9"/>
                    <box>
                        <topPen lineWidth="0.0" lineColor="#000000"/>
                        <leftPen lineWidth="0.0" lineColor="#000000"/>
                        <bottomPen lineWidth="0.0" lineColor="#000000"/>
                        <rightPen lineWidth="0.0" lineColor="#000000"/>
                    </box>
                    <textElement>
                        <font fontName="Helvetica" size="7" isBold="false"/>
                    </textElement>
                    <textFieldExpression class="java.lang.String"><![CDATA[$R{Global.Datum}]]></textFieldExpression>
                </textField>
                <frame>
                    <reportElement x="0" y="0" width="566" height="29"/>
                    <box>
                        <pen lineWidth="0.1" lineColor="#000000"/>
                        <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                        <leftPen lineWidth="0.1" lineStyle="Solid" lineColor="#000000"/>
                        <bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                        <rightPen lineWidth="0.1" lineStyle="Solid" lineColor="#000000"/>
                    </box>
                </frame>
            </band>
        </groupHeader>
        <groupFooter>
            <band height="24">
                <line>
                    <reportElement x="495" y="3" width="67" height="1" forecolor="#999999"/>
                    <graphicElement>
                        <pen lineWidth="0.1" lineStyle="Solid" lineColor="#000000"/>
                    </graphicElement>
                </line>
                <textField isStretchWithOverflow="true">
                    <reportElement stretchType="RelativeToTallestObject" x="496" y="7" width="65" height="10"/>
                    <textElement textAlignment="Right">
                        <font fontName="Helvetica" size="9" isBold="true" isItalic="false" pdfFontName="Helvetica-Bold"/>
                    </textElement>
                    <textFieldExpression class="java.lang.String"><![CDATA[$F{ZahlFormatted}]]></textFieldExpression>
                </textField>
                <frame>
                    <reportElement x="0" y="0" width="566" height="24"/>
                    <box>
                        <pen lineWidth="0.1" lineColor="#000000"/>
                        <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                        <leftPen lineWidth="0.1" lineStyle="Solid" lineColor="#000000"/>
                        <bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                        <rightPen lineWidth="0.1" lineStyle="Solid" lineColor="#000000"/>
                    </box>
                </frame>
            </band>
        </groupFooter>
    </group>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band splitType="Stretch"/>
    </title>
    <pageHeader>
        <band splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band height="8" splitType="Stretch">
            <frame>
                <reportElement x="0" y="0" width="566" height="2"/>
                <box>
                    <pen lineWidth="0.1" lineColor="#000000"/>
                    <topPen lineWidth="0.1" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.1" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.1" lineStyle="Solid" lineColor="#000000"/>
                </box>
            </frame>
        </band>
    </columnHeader>
    <detail>
        <band height="11" splitType="Stretch">
            <rectangle>
                <reportElement key="2" stretchType="RelativeToBandHeight" mode="Opaque" x="0" y="0" width="566" height="11" isPrintWhenDetailOverflows="true" backcolor="#ECF4FF">
                    <printWhenExpression><![CDATA[$F{zebra}]]></printWhenExpression>
                </reportElement>
                <graphicElement>
                    <pen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </graphicElement>
            </rectangle>
            <frame>
                <reportElement x="0" y="0" width="566" height="11"/>
                <box>
                    <pen lineWidth="0.1" lineColor="#000000"/>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.1" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.1" lineStyle="Solid" lineColor="#000000"/>
                </box>
            </frame>
        </band>
    </detail>
    <columnFooter>
        <band height="8" splitType="Stretch">
            <frame>
                <reportElement x="0" y="0" width="566" height="8"/>
                <box>
                    <pen lineWidth="0.1" lineColor="#000000"/>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.1" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.1" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.1" lineStyle="Solid" lineColor="#000000"/>
                </box>
            </frame>
        </band>
    </columnFooter>
    <pageFooter>
        <band splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band splitType="Stretch"/>
    </summary>
</jasperReport> 
```

# android - 在 Android 项目中包含库项目

> ID：12676719
> 
> 赞同：0
> 
> 时间：2012-10-01T15:52:54.930
> 
> 标签：android, library-project

有没有办法在一个项目中包含一个库项目而不是一个单独的项目？理想的情况是能够对库项目进行代码更改，并将其推送到带有主引用项目的 git repo。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:55:43.860

您可以将库添加到构建路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:58:12.113

您可以将库项目导出为 jar 文件，然后可以将该 jar 文件添加到文件`libs`夹中并配置构建路径以将其添加到项目中。

# forms - 微软视觉工作室基本形式

> ID：12676723
> 
> 赞同：0
> 
> 时间：2012-10-01T15:53:04.303
> 
> 标签：forms, coding-style

嗨，我是 mirosoft Visual Studio 的新手，我想创建一个基本圆圈，但出现以下错误：无法将类型“double”隐式转换为 int。存在显式转换。（你错过了演员吗？）

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;
    using System.Windows.Forms;

    namespace WindowsFormsApplication6
    {
        public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();
            }

            private void button1_Click(object sender, EventArgs e)
            {

                int radius = Convert.ToInt32(textBox1.Text);

                int circumference = 2 * Math.PI * radius;
                int area = Math.PI * Math.Pow(radius, 2);
                int volume = (4 * Math.PI / 3) * Math.Pow(radius, 3);

                Graphics paper;
                paper = pictureBox1.CreateGraphics();
                Pen pen = new Pen(Color.Red);

                paper.DrawEllipse(pen, 0, circumference, area, volume);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:08:01.017

```
int straal = Convert.ToInt32(textBox1.Text);
double omtrek = 2 * Math.PI * straal;
        double oppervlakte = Math.PI * Math.Pow(straal, 2);
        double volume = (4 * Math.PI / 3) * Math.Pow(straal, 3);

        Graphics paper;
        paper = pictureBox1.CreateGraphics();
        Pen pen = new Pen(Color.Red);

        paper.DrawEllipse(pen, 0, Convert.ToInt32(omtrek), Convert.ToInt32(oppervlakte),   Convert.ToInt32(volume)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:00:05.737

如果你想将一个 double 转换为一个 int，你可以使用这样的括号：

```
double myDouble = 3.211;
int myInt = (int)myDouble; 
```

在您的上下文中：

```
 int circumference = (int)(2 * Math.PI * radius);
            int area = (int)(Math.PI * Math.Pow(radius, 2));
            int volume = (int)((4 * Math.PI / 3) * Math.Pow(radius, 3)); 
```

# css - 响应式 iframe（谷歌地图）和奇怪的调整大小

> ID：12676725
> 
> 赞同：48
> 
> 时间：2012-10-01T15:53:08.490
> 
> 标签：css, google-maps, iframe, responsive-design

我正在尝试在我的设计中添加一个谷歌地图，它应该是响应式的。我使用了适用于图像的相同代码......但由于某种原因，地图的 iframe 调整了我没有选择的尺寸。

HTML

```
<iframe src="http://maps.google.com/maps/ms?vpsrc=6&amp;ctz=-480&amp;ie=UTF8&amp;msa=0&amp;msid=210840796990572645528.00049770919ccd6759de3&amp;t=m&amp;ll=30.751278,68.203125&amp;spn=84.446143,175.429688&amp;z=2&amp;output=embed" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" width="635" height="300">    </iframe>​ 
```

和 CSS

```
iframe {
max-width: 100%;
height: auto;
width: auto; /*IE8 bug fix*/
vertical-align: middle;} 
```

或者你可以在这里查看并修改它：http: [//jsfiddle.net/corinne/pKUzU/](http://jsfiddle.net/corinne/pKUzU/) （如果你去掉 CSS，你会明白我的意思）。

我的问题是如何让这个 iframe/map 在不失去其想要的高度的情况下做出响应？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-10-01T17:46:44.110

这个解决方案来自 Dave Rupert / Chris Coyier（我认为）。它需要一个包装器 div，但效果很好。

**HTML**

```
 <div class="iframe-rwd">
        <iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=Seattle,+WA&amp;aq=0&amp;oq=seattle&amp;sll=37.822293,-85.76824&amp;sspn=6.628688,16.907959&amp;t=h&amp;ie=UTF8&amp;hq=&amp;hnear=Seattle,+King,+Washington&amp;z=11&amp;ll=47.60621,-122.332071&amp;output=embed"></iframe><br /><small><a href="https://maps.google.com/maps?f=q&amp;source=embed&amp;hl=en&amp;geocode=&amp;q=Seattle,+WA&amp;aq=0&amp;oq=seattle&amp;sll=37.822293,-85.76824&amp;sspn=6.628688,16.907959&amp;t=h&amp;ie=UTF8&amp;hq=&amp;hnear=Seattle,+King,+Washington&amp;z=11&amp;ll=47.60621,-122.332071" style="color:#0000FF;text-align:left">View Larger Map</a></small>
    </div> 
```

**CSS**

```
.iframe-rwd  {
position: relative;
padding-bottom: 56.25%;
height: 0;
overflow: hidden;
}
.iframe-rwd iframe {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
} 
```

# sql-server - 使用 t-sql 查询时，即使结果集中没有具有该状态的记录，也要列出状态

> ID：12676727
> 
> 赞同：0
> 
> 时间：2012-10-01T15:53:14.887
> 
> 标签：sql-server, tsql

我正在创建一个包含状态、计数和金额列的摘要报告。即使查询结果中没有与该状态匹配的记录，我如何列出该状态？下图中提供的示例数据：

![在此处输入图像描述](../Images/2728a9a7b4f780b7cd064550fe12b40c.png)

当我查询报告（计算表中与状态匹配的那些记录）时，我得到以下结果：

![在此处输入图像描述](../Images/11f84355426cea8d39ef3d09995d7be3.png)

如何获得与包含状态 C 的第一个表匹配的结果（没有状态为 C 的记录）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:56:36.177

使用左连接。您没有包含您的架构，但一个示例是：

```
SELECT S.Name AS Status, COALESCE(COUNT(T.*),0) AS [Count], 
    COALESCE(SUM(T.Amount),0) AS Amount
FROM Status S
LEFT OUTER JOIN myTable T ON S.Id = T.StatusId
GROUP BY S.ID, S.Name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:58:12.383

尝试这个

```
Select Status, Count(*) Count, Sum(Amount) Amount
From Table1 
Left Outer Join Table2 ON table1.Status = Table2.Status
Group By Table1.Status 
```

# jquery - Google Chrome：如何在元素的位置动态设置为“固定”后保留元素的 z-index？

> ID：12676729
> 
> 赞同：0
> 
> 时间：2012-10-01T15:53:24.023
> 
> 标签：jquery, html, css, google-chrome

好的，最烦人的是一周前它还在使用谷歌浏览器，然后突然停止工作。

这是我的问题：我有一些绝对定位的 div 在滚动到某个点后会变为固定位置。这部分工作正常，但我在那些 div 内的元素上设置了一些 z-indexes，当位置更改为固定时，这些元素会被覆盖。

[看到问题](https://www.dropbox.com/s/i67lj544fikdo1e/compare.jpg)

html:

```
 <div id="leftSide">
        <div id="leftSideBottom"></div>

        <div id="leftSideTop">

            <div id="nav">
                <a href="#home" class="home"></a>
                <a href="#about" class="about"></a>
                <a href="#work" class="work"></a>
                <a href="#blog" class="blog"></a>
                <a href="#connect" class="connect"></a>
            </div>

        </div> <!-- end leftSideTop -->

    </div> <!-- end leftSide -->

    <div id="rightSide">

        <div id="rightSideBottom"></div>

        <div id="rightSideTop">

        </div> <!-- end rightSideTop -->

    </div> <!-- end rightSide --> 
```

CSS：

```
 #leftSide {
       position: absolute;
       margin-top: 160px;
       top: 0;
       left: -20px;
   }

   #rightSide {
       position: absolute;
       margin-top: 160px;
       top: 0;
       left: 880px; // ie breaks if I use right: -20px
   }

   #rightSideTop, #leftSideTop {
       position: absolute;
       width: 100px;
       height: 600px;
   }

   #rightSideBottom, #leftSideBottom {
       position: absolute;
       width: 40px;
       height: 600px;
       right: 0; // leftSideBottom will have this set to left: 0, just combine code to simplify
       top: 0;
       z-index: -100;
   }

   .fixed {
       position: fixed;
       top: 150px;
   } 
```

jQuery：

```
 var aboutTop = $("#about").offset().top;
    var connectTop = $("#connect").offset().top;

    $(window).scroll(function(){
    var y = $(this).scrollTop();
    if(y >= aboutTop && y < connectTop){
        $("#greenSideLeftTop,#greenSideLeftBottom").addClass("fixed");
        $("#greenSideRightTop,#greenSideRightBottom").addClass("fixed");
    }
    else if(y >= connectTop){
        $("#greenSideLeftTop,#greenSideLeftBottom").removeClass("fixed");
        $("#greenSideRightTop,#greenSideRightBottom").removeClass("fixed");
        $("#leftSide").css("top",connectTop - 1080);
        $("#rightSide").css("top",connectTop - 1080);
    }

    else{
        $("#greenSideLeftTop,#greenSideLeftBottom").removeClass("fixed");
        $("#greenSideRightTop,#greenSideRightBottom").removeClass("fixed");
        $("#leftSide").css("top",aboutTop - 1080);
        $("#rightSide").css("top",aboutTop - 1080);
    }
}); 
```

如果我的问题听起来仍然令人困惑，请自己检查一下：[我的网站的问题](http://jakezeitz.99k.org/New%20Design/index.html)。使用chrome并向下滚动，它适用于firefox和ie。

我必须以某种方式跨浏览器完成这项工作......有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:22:29.583

当外部 div 为 时，Chrome 将内部 div 移动到同一层`position: fixed`。

我能想到的最简单的解决方法是将两个 div（greenSide...Top 和 greenSide...Bottom）分开，而不是单独嵌套和定位它们。

```
<div id="rightSide">
    <div id="greenSideRightTop"></div>
    <div id="greenSideRightBottom"></div>
</div> <!-- end rightSide --> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T17:37:16.797

Chrome 最近更改了渲染固定位置项目的方法。改用 jQuery`.css`来设置 zindex。

# drupal-7 - 可怕的警告：警告：尝试在 ctools_block_content_type_render() 中分配非对象的属性

> ID：12676739
> 
> 赞同：0
> 
> 时间：2012-10-01T15:54:13.833
> 
> 标签：drupal-7, drupal-modules, drupal-views

当我更新面板中的视图时，我不断收到此警告（我使用视图和面板模块来创建自定义主页设计）。我们正在为我们的公司构建一个 Intranet，我们的 IT 部门已使用 LDAP 将我们的 SharePoint 网络凭据链接到 Drupal 站点（如果这可以解释警告的话）。下面是截图，请指教！

![在此处输入图像描述](../Images/67e338d9ad5182729d5822a7998a9f9b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:57:03.090

快速搜索 Drupal 论坛显示您的 Drupal 版本可能只需要一个补丁：

[http://drupal.org/node/1739718](http://drupal.org/node/1739718)

你运行的是什么版本？并且此错误是否仅在 Drupal 链接到使用 LDAP/Sharepoint 凭据后出现？（即 - 触发事件是什么？这种情况已经发生了一段时间吗？你最近更新了 Drupal 吗？或者你是这个角色的新手，所以第一次看到这个？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T11:57:49.707

已接受的答案已过时 - 请参阅 dddave 对不断尝试应用已提交补丁的用户的令人沮丧的响应。

[http://drupal.org/node/1739718#comment-6613292](http://drupal.org/node/1739718#comment-6613292)

更新后的答案是下载最新的-dev 版本的 CTools，其中已经包含了适当的补丁。

# cocos2d-iphone - 如何以直角应用线性脉冲

> ID：12676742
> 
> 赞同：0
> 
> 时间：2012-10-01T15:54:16.000
> 
> 标签：cocos2d-iphone, box2d, box2d-iphone

我计算了一个角度：

```
float spriteAngle = ccpToAngle(ccpSub(rSpriteOne, rMid)); 
```

如何将 90 度添加到 spriteAngle 并在身体上的结果角度应用线性脉冲。请帮忙，我已经有一段时间了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:11:49.300

试试`ccpRotateByAngle`内联 cocos2d 函数

# ios - 单击手势识别器无法在 UIScrollView 上为 resignFirstResponder 工作？

> ID：12676744
> 
> 赞同：0
> 
> 时间：2012-10-01T15:54:20.480
> 
> 标签：ios, xcode, uiscrollview

我想使用单击来让第一响应者辞职（键盘）。当我的应用程序启动时，会出现要求输入密码的警报，当我进入应用程序时，会有一个文本框和按钮来创建文件。

当我使用 [singleTap setNumberOfTapsRequired:1]; 按钮没有响应。但是当我将水龙头用作 2 时，它就可以工作了。我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:00:05.953

我相信这次活动是一次内部活动。在这种情况下，两次点击可能会创建一个事件——第一次点击被认为是按下事件，第二次被认为是释放事件。

# python - 使用nelder-mead在python中进行数值优化的故障

> ID：12676745
> 
> 赞同：1
> 
> 时间：2012-10-01T15:54:22.110
> 
> 标签：python, scipy, mathematical-optimization, minimization

我正在尝试使用 Nelder-Mead 方法的 scipy.optimize.minimize 模块对非线性函数进行两个变量优化。优化总体上非常成功，但在这两者之间，优化变量中的值突然跳跃，然后优化参数曲线遵循相同的形状，但有直流偏移。该图像可能有助于理解我的问题。我玩过函数容差，但徒劳无功。这种跳跃对进一步的编程造成了严重破坏。这些图像是[社区编辑以内联图像] 这里：

首先，有故障的优化变量：

![有故障的优化变量](../Images/0774d9dfd57908cb156e15c73011d73a.png)

二、毛刺放大图： ![放大部分故障](../Images/0cea0020ff8632fbcfa63a67efb70e86.png)

第三，第一个优化变量在同一点之后对第二个优化变量造成的破坏：

![造成的破坏](../Images/2b2e93092a0836a9d1ac5b3779180a3c.png)

绿点是预期的优化曲线，而蓝线是获得的优化曲线。

# c# - 在 C# 中解析 Json 字符串

> ID：12676746
> 
> 赞同：59
> 
> 时间：2012-10-01T15:54:25.757
> 
> 标签：c#, json, json.net

我正在尝试在 C# 中读取 Json 字符串，但我无法弄清楚如何将字符串解析为 C#。假设我有以下 Json 字符串

```
[
    {
        "AppName": {
            "Description": "Lorem ipsum dolor sit amet",
            "Value": "1"
        },
        "AnotherAppName": {
            "Description": "consectetur adipisicing elit",
            "Value": "String"
        },
        "ThirdAppName": {
            "Description": "sed do eiusmod tempor incididunt ut labore et dolore magna aliqua",
            "Value": "Text"
        },
        "Application": {
            "Description": "Ut enim ad minim veniam",
            "Value": "100"
        },
        "LastAppName": {
            "Description": "quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat",
            "Value": "ZZZ"
        }
    }
] 
```

我想使用类似的格式将其解析为数组列表或字典

```
descriptionList["AppName"] = "Lorem ipsum dolor sit amet";
valueList["AppName"] = "1"; 
```

我一直在玩弄 Json.Net，但我看到的例子并没有让我清楚地知道我应该如何做到这一点。实现这一目标的最佳方法是什么？这不能像在 jQuery 中那样使用 foreach 语句来完成吗？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-01T16:25:52.263

我在我的项目中使用 Json.net，效果很好。在你的情况下，你可以这样做来解析你的 json：

**编辑：我更改了代码，因此它支持读取您的 json 文件（数组）**

要解析的代码：

```
void Main()
{
    var json = System.IO.File.ReadAllText(@"d:\test.json");

    var objects = JArray.Parse(json); // parse as array  
    foreach(JObject root in objects)
    {
        foreach(KeyValuePair<String, JToken> app in root)
        {
            var appName = app.Key;
            var description = (String)app.Value["Description"];
            var value = (String)app.Value["Value"];

            Console.WriteLine(appName);
            Console.WriteLine(description);
            Console.WriteLine(value);
            Console.WriteLine("\n");
        }
    }
} 
```

输出：

```
AppName
Lorem ipsum dolor sit amet
1

AnotherAppName
consectetur adipisicing elit
String

ThirdAppName
sed do eiusmod tempor incididunt ut labore et dolore magna aliqua
Text

Application
Ut enim ad minim veniam
100

LastAppName
quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat
ZZZ 
```

顺便说一句，您可以使用[LinqPad](http://www.linqpad.net/)测试您的代码，这比我认为在 Visual Studio 中创建解决方案或项目更容易。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-11-19T09:54:51.980

```
json:
[{"ew":"vehicles","hws":["car","van","bike","plane","bus"]},{"ew":"countries","hws":["America","India","France","Japan","South Africa"]}] 
```

c# 代码：只取一个值，例如单词“bike”。

```
//res=[{"ew":"vehicles","hws":["car","van","bike","plane","bus"]},{"ew":"countries","hws":["America","India","France","Japan","South Africa"]}]

         dynamic stuff1 = Newtonsoft.Json.JsonConvert.DeserializeObject(res);
         string Text = stuff1[0].hws[2];
         Console.WriteLine(Text); 
```

**输出：**

```
bike 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-10-01T15:57:22.820

你可以尝试`System.Web.Script.Serialization.JavaScriptSerializer`：

```
var json = new JavaScriptSerializer();
var data = json.Deserialize<Dictionary<string, Dictionary<string, string>>[]>(jsonStr); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T15:58:47.780

除了数组列表或字典，您还可以使用动态的。大多数时候我使用[EasyHttp 来做](https://github.com/hhariri/EasyHttp)这件事，但肯定会有其他项目做同样的事情。下面的一个例子：

```
var http = new HttpClient();
http.Request.Accept = HttpContentTypes.ApplicationJson;
var response = http.Get("url");
var body = response.DynamicBody;
Console.WriteLine("Name {0}", body.AppName.Description);
Console.WriteLine("Name {0}", body.AppName.Value); 
```

在 NuGet 上：[EasyHttp](http://nuget.org/packages/EasyHttp)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-01T16:12:39.580

您试图反序列化为 Dictionary 的实际上是一个序列化为 JSON 的 Javascript 对象。在 Javascript 中，您可以将此对象用作关联数组，但就 JSON 标准而言，它实际上是一个对象。

因此，将标准 JSON 序列化程序（如 .net 序列化程序、DataContractJsonSerializer 和 JavascriptSerializer）反序列化为对象（具有名为 AppName、AnotherAppName 等的成员）将没有问题，但实际上将其解释为字典我需要一个比 Json 规范更进一步的序列化程序，据我所知，它没有任何关于字典的内容。

一个这样的例子就是每个人都使用的例子：[JSON .net](http://json.codeplex.com/)

如果您不想使用外部库，还有另一种解决方案，即在将 Javascript 对象序列化为 JSON 之前将其转换为列表。

```
var myList = [];
$.each(myObj, function(key, value) { myList.push({Key:key, Value:value}) }); 
```

现在，如果您将 myList 序列化为 JSON 对象，您应该能够`List<KeyValuePair<string, ValueDescription>>`使用上述任何序列化程序反序列化为 a。然后，该列表很明显可以转换为字典。

注意：ValueDescription 是此类：

```
public class ValueDescription
{
    public string Description { get; set; }
    public string Value { get; set; }
} 
```

# ms-access - 如何在 VBA ADO Execute 中获取受影响的行？

> ID：12676747
> 
> 赞同：8
> 
> 时间：2012-10-01T15:54:34.547
> 
> 标签：ms-access, vba, ms-access-2007, ado

以下代码错误就`MsgBox cn.RecordsAffected`行了：

> 参数类型错误、超出可接受范围或相互冲突。

如何成功获取受影响的行数？这是针对 Access 2003 项目的。我更愿意将其保留为 2003 格式，所以如果有其他方法可以做到这一点，那就太好了。为了这个 1 功能，我不想升级整个项目。

```
Private Sub Command21_Click()
On Error GoTo Err1:
    Dim cn As ADODB.Connection
    Set cn = New ADODB.Connection
    With cn
        .Provider = "SQL Native Client"
        .ConnectionString = "Server=myserver\myinstance;Database=mydb;Uid=myuser;Pwd=mypass;]"
        .Open
    End With

On Error GoTo Err2:
    cn.Execute "SELECT * INTO someschema.sometable FROM someschema.anothertable"
    MsgBox cn.RecordsAffected
    Exit Sub

Err1:
    MsgBox "Failed to connect to database!"
    Exit Sub

Err2:
    MsgBox Err.DESCRIPTION
    cn.Close

End Sub 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T16:00:54.207

`ADODB.Connection`没有`RecordsAffected`财产。但是，该`Execute`方法将受影响的记录作为`ByRef`参数 [ [MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675023.aspx) ] 返回：

```
Dim recordsAffected As Long
cn.Execute "SELECT * INTO someschema.sometable FROM someschema.anothertable", _
           recordsAffected
MsgBox recordsAffected 
```

# json - 想用 json MVC3 发布一对多关系数据

> ID：12676749
> 
> 赞同：0
> 
> 时间：2012-10-01T15:54:40.903
> 
> 标签：json, asp.net-mvc-3, entity-framework, jquery, razor

**客户**

```
public class ClientModelData
{
    public int ClientID { get; set; }
    public string ClientName { get; set; }
    public string Phone { get; set; }
    public string Address { get; set; }
    public IList<int> LocationID { get; set; }
} 
```

**控制器**

```
[HttpPost]
    public ActionResult AddClient(ClientModelData client)
    {
        Client _client = new Client()
        {
            //ClientCode=client.ClientCode,
            ClientName = client.ClientName,
            Phone = client.Phone,
            Ext = client.Ext,
            Address = client.Address,
            CreatedBy = 1,
            CreatedDate = DateTime.Now,
            ModifiedBy = 1,
            ModifiedDate = DateTime.Now,
            ModifiedIP = Request.ServerVariables["REMOTE_ADDR"]
        };
        db.Clients.Add(_client);
        try
        {
            db.SaveChanges();
        }
        catch (DbEntityValidationException dbEx)
        {
            string error = string.Empty;
            foreach (var validationErrors in dbEx.EntityValidationErrors)
                foreach (var validationError in validationErrors.ValidationErrors)
                    error += string.Format("Property: {0} Error: {1}", validationError.PropertyName, 
                        validationError.ErrorMessage);

            return Json(new
            {
                status = false,
                message = "Unable to update information for selected client, please contact administrator. For detail <a class='errordetail'>click here</a>",
                exception = error
            });
        }
        return Json(_client);
    } 
```

我有一个复选框列表：

```
<ul class="locations">
                                @foreach (var item in Model.Locations)
                                {
                                    <li>
                                        <label>
                                            <input type="checkbox" id="chkLocations" name="chkLocations" 
                                            value="@item.LocationID" />
                                            @item.LocationTitle</label>
                                    </li>
                                }
                            </ul> 
```

** Json 对象包含以下值：**

```
var allVals = [];
            $('#chkLocations:checked').each(function () {
                allVals.push($(this).val());
            });
            var dataPacket = {
                ClientName: $("#txtClientName").val(),
                Phone: $("#txtPhone").val(),
                Ext: $("#txtExt").val(),
                Address: $("#txtAddress").val(),
                LocationID: allVals
            }; 
```

现在问题出现了，当我给出复选框：选中的项目时，它不会填充 ModelData Entity **Location**属性

图片：

> [http://tinypic.com/r/eapem9/6](http://tinypic.com/r/4l0bqr/6)

**问题出现 POSTING 表单...JQuery AJAX**

图片：

> [http://tinypic.com/r/4l0bqr/6](http://tinypic.com/r/4l0bqr/6)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:01:23.803

不幸的是，您还没有向我们展示您是如何调用控制器操作的。您可以尝试将它们作为 JSON 请求发送，该请求允许您将任意复杂的对象发布到控制器操作：

```
var allVals = [];
$('#chkLocations:checked').each(function () {
    allVals.push($(this).val());
});
var dataPacket = {
    ClientName: $("#txtClientName").val(),
    Phone: $("#txtPhone").val(),
    Ext: $("#txtExt").val(),
    Address: $("#txtAddress").val(),
    LocationID: allVals
}; 
```

接着：

```
$.ajax({
    url: '@Url.Action("AddClient", "SomeController")',
    type: 'POST',
    contentType: 'application/json',
    data: JSON.stringify({ client: dataPacket }),
    success: function(result) {
        // ... handle the result
    }
}); 
```

`JSON.stringify`请注意现代浏览器中原生内置的方法的用法，以将请求作为 JSON 字符串发送。我们还将请求内容类型标头设置为`application/json`，以便应用程序使用正确的 JSON 值提供程序并将此请求解析为您的模型。

# javascript - jQuery/CSS 问题 - 无法转换 JavaScript 参数 arg 0 [nsIDOMWindow.getComputedStyle]

> ID：12676757
> 
> 赞同：1
> 
> 时间：2012-10-01T15:54:54.753
> 
> 标签：javascript, jquery, css, firefox, firebug

我有我的相关CSS如下：

```
div.tab-container div.tab{
  min-width: 150px;
  width: auto;
  height: 25px;
  background-color:#3DCCF0;
  display:block;
  float:left;
  padding: 15px 10px 10px 20px;
  margin-right: 10px;
  cursor: pointer;
  font-size: 12px;
  color: #fff;
  font-weight:bold;
}
div.tab-content div[class^="tab-"]{
  display: none;
  width: auto;
  height: 100%;
  float: left;
  background-color: inherit;
  margin-top: 30px;
  background-color: #FFF;
}

div.tab-content div[class^="tab-"].active{
  display:block;
} 
```

和我的 jQuery：

```
$(document).ready(function(){
  $('div.tab').click(function(){
    var tab_id      = $(this).attr('id');
    var clickedTab  = $(this);

    $('.tab').removeClass('active');
    $('.' + tab_id).removeClass('active');

    $(this).addClass('active');
    $('.' + tab_id).addClass( 'active' );

  });
}); 
```

这是一个非常简单的系统，我真的很惊讶它不起作用。

> 我在萤火虫中收到错误消息：无法转换 JavaScript 参数 arg 0 [nsIDOMWindow.getComputedStyle]

但是，如果我更改我的 CSS 以使用 >（直接子）符号，它不会抛出错误（可能是因为它不再匹配）。

谁能告诉我我做错了什么？

谢谢！

编辑：

继承人它显然工作的jsfiddle：http: [//jsfiddle.net/jRtsd/](http://jsfiddle.net/jRtsd/)

# hadoop - 如何配置 Hadoop 以使每个数据节点使用不同的目录？

> ID：12676758
> 
> 赞同：1
> 
> 时间：2012-10-01T15:54:56.847
> 
> 标签：hadoop

如何配置 Hadoop 以使每个数据节点使用不同的目录进行存储？

每个数据节点共享一个存储空间。我希望datanode1 使用dir1，datanode2 使用dir2。起初，我将所有数据节点配置为使用共享存储中的同一目录，结果发现只有一个数据节点在运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:38:28.077

您需要为集群中的每个节点创建一个自定义 hdfs-site.xml 文件，并`dfs.data.dir`适当配置数据目录属性 ( )。如果您当前也在为 hadoop 配置使用共享目录，那么您也需要修改您的操作方式。

有点痛苦，我想您可以尝试使用一些 shell 脚本来生成文件，或者使用诸如 Puppet 或 Chef 之类的工具。

一个问题回馈给您-您为什么要使用 NFS，您在某种程度上违背了数据局部性的观点-Hadoop 旨在将您的代码移动到数据所在的位置，而不是（如您的情况）代码和数据。

如果您使用 NFS 是因为它由一些具有数据冗余的 SAN 阵列支持，那么您再次给自己带来困难，假设您有足够大的集群并且配置正确，HDFS 将（如果已配置）为您管理数据复制. 从理论上讲，使用商品硬件的成本也应该低于使用昂贵的 SAN 的支持（我猜取决于您的设置/情况）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T07:15:21.057

我不知道这是否是一种粗略的做法，但这就是我在namenode中自定义slaves.sh文件以实现为每个datanode实现不同目录结构的方式：

编辑在每个数据节点上执行的 ssh 远程命令`$HADOOP_HOME/bin/slaves.sh`：

```
for slave in `cat "$HOSTLIST"|sed  "s/#.*$//;/^$/d"`; do
 # If the slave node is ap1001 (first datanode),
 # Then use a different directory path for SSH command.
 if [ $slave == "ap1001" ]
 then
      input=`/bin/echo $"${@// /\\ }"` >/dev/null 2>&1
      # If the command type is start-dfs (start the datanodes)
      # Then construct the start command for remote execution on datanode through ssh
      /bin/echo $input | grep -i start
      if [ $? -eq 0 ]
      then
          inputArg="cd /app2/configdata/hdp/hadoop-1.2.1 ; /app2/configdata/hdp/hadoop-1.2.1/bin/hadoop-daemon.sh --config /app2/configdata/hdp/hadoop-1.2.1/libexec/../conf start datanode"
      else
          # If the command type is stop-dfs (stop the datanodes)
          # Then construct the stop command for remote execution on datanode through ssh
          inputArg="cd /app2/configdata/hdp/hadoop-1.2.1 ; /app2/configdata/hdp/hadoop-1.2.1/bin/hadoop-daemon.sh --config /app2/configdata/hdp/hadoop-1.2.1/libexec/../conf stop datanode"
      fi
      ssh $HADOOP_SSH_OPTS $slave $inputArg 2>&1 &
 else
      # Use default command for remaining slaves.
      ssh $HADOOP_SSH_OPTS $slave $"${@// /\\ }" \
      2>&1 | sed "s/^/$slave: /" &
 fi
 if [ "$HADOOP_SLAVE_SLEEP" != "" ]; then
   sleep $HADOOP_SLAVE_SLEEP
 fi
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-10T13:29:41.870

您可以通过创建如下软链接让数据节点和名称节点共享一个公共存储：host1：

```
lrwxrwxrwx  1 user user   39 Dec  2 17:30 /hadoop/hdfs/datanode -> /shared_storage/datanode1/
lrwxrwxrwx  1 user user   39 Dec  2 17:31 /hadoop/hdfs/namenode -> /shared_storage/namenode1/ 
```

主机2：

```
lrwxrwxrwx 1 user user   39 Dec  2 17:32 /hadoop/hdfs/datanode -> /shared_storage/datanode2/
lrwxrwxrwx 1 user user   39 Dec  2 17:32 /hadoop/hdfs/namenode -> /shared_storage/namenode2/ 
```

主机3

```
lrwxrwxrwx 1 user user   39 Dec  2 17:33 /hadoop/hdfs/datanode -> /shared_storage/datanode3/
lrwxrwxrwx 1 user user   39 Dec  2 17:32 /hadoop/hdfs/namenode -> /shared_storage/namenode3/ 
```

主机4：

```
lrwxrwxrwx 1 user user   39 Dec  2 17:33 /hadoop/hdfs/datanode -> /shared_storage/datanode4/
lrwxrwxrwx 1 user user   39 Dec  2 17:33 /hadoop/hdfs/namenode -> /shared_storage/namenode4/ 
```

## 在每个数据节点上的 hdfs-site.xml 中：

```
 <property>
   <name>dfs.namenode.name.dir</name>
      <value>file:///hadoop/hdfs/datanode</value>
  </property>

  <property>
         <name>dfs.namenode.name.dir</name>
         <value>file:///hadoop/hdfs/datanode</value>
  </property> 
```

* * *

# ruby-on-rails - Rails、Spork 和 Guard：如何并行运行多个 spork 服务器？

> ID：12676767
> 
> 赞同：2
> 
> 时间：2012-10-01T15:55:27.437
> 
> 标签：ruby-on-rails, guard, rails-engines, spork

我正在开发一个直接在我的主机应用程序中使用的引擎（部署为 gem）。当我加载它时

```
gem 'my_gem', path: 'some/local/path' 
```

引擎中的所有更改都直接反映在我的主机应用程序中，无需重新启动服务器。到现在为止还挺好。

我使用众所周知的 Spork&Guard 组合来开发和测试我的 Rails 应用程序。到目前为止，我从来不需要运行多个保护进程，因为我之前没有开发引擎。但是现在，我有一个主机应用程序和一个引擎，它们都是并行开发的，所以我需要每个的 Spork&Guard 组合同时运行。

可悲的是，这似乎不起作用，因为 Guard 为 Spork 使用标准端口。有什么方法可以告诉 Guard 在启动 spork 时应该使用哪些端口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:07:51.037

在您的保护文件中：

```
guard 'spork', :rspec_port => 12345 do
   # ...
   watch('spec/spec_helper.rb') { :rspec }
end

guard 'rspec', :cli => "--drb --drb-port 12345" do
   # ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:40:05.800

更多信息可以在这里找到：

*   [Rails 3.1 引擎：第三部分——环境](http://lsd4coders.muheimwebdesign.ch/2012/10/rails-3-1-engines-part-iii-the-environment/)

# jquery - 如何使用 CSS 或 JavaScript 防止默认标题行为

> ID：12676769
> 
> 赞同：4
> 
> 时间：2012-10-01T15:55:39.760
> 
> 标签：jquery, css

> **可能重复：**
> [禁用链接和 <abbr>s 上的浏览​​器工具提示](https://stackoverflow.com/questions/457366/disabling-browser-tooltips-on-links-and-abbrs)

```
a {
  color: #900;
  text-decoration: none;
}

a:hover {
  color: red;
  position: relative;
}

a[title]:hover:after {
  content: attr(title);
  padding: 4px 8px;
  color: #333;
  position: absolute;
  left: 0;
  top: 100%;
  white-space: nowrap;
  z-index: 20px;
  -moz-border-radius: 5px;
  -webkit-border-radius: 5px;
  border-radius: 5px;
  -moz-box-shadow: 0px 0px 4px #222;
  -webkit-box-shadow: 0px 0px 4px #222;
  box-shadow: 0px 0px 4px #222;
  background-image: -moz-linear-gradient(top, #eeeeee, #cccccc);
  background-image: -webkit-gradient(linear,left top,left bottom,color-stop(0, #eeeeee),color-stop(1, #cccccc));
  background-image: -webkit-linear-gradient(top, #eeeeee, #cccccc);
  background-image: -moz-linear-gradient(top, #eeeeee, #cccccc);
  background-image: -ms-linear-gradient(top, #eeeeee, #cccccc);
  background-image: -o-linear-gradient(top, #eeeeee, #cccccc);
} 
```

我有以下代码来更改标题标签的默认行为。这很好用，但问题是它还显示了默认样式的标题。这是我的[小提琴链接](http://jsfiddle.net/vpYWE/1/)。

有没有办法使用 jQuery 或 CSS 来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:59:03.953

我能想到的最好的事情是使用 jQuery（或纯 JS）取消设置属性

```
$('a').attr('title', ''); 
```

然后像`after`使用 JS 一样创建一个 div。据我所知，没有办法禁用`title`.

**编辑：**

只是为了向任何对此投反对票的人指出一点——这个问题得到了正确的回答。如果您因为使用 JS 而决定回答错误，请阅读帖子标题。编造自己的属性是愚蠢的，（坦率地说）一定比例的“网络开发人员”有什么问题。因为它没有按照*您*认为的方式工作而对某些东西进行黑客攻击是短视的。标题标签是 WAI-ARIA 和第 503 节的问题，因此使它们无用是愚蠢的（我们不要忘记您可能通过坚持标准获得的任何 SEO 信用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:22:50.327

^已解决

重命名`title`标签

要使用这个

```
<a href="#" atitle="this is title"> hello </a>

a {
  color: #900;
  text-decoration: none;
}

a:hover {
  color: red;
  position: relative;
}

a[atitle]:hover:after {
  content: attr(atitle);
  padding: 4px 8px;
  color: #333;
  position: absolute;
  left: 0;
  top: 100%;
  white-space: nowrap;
  z-index: 20px;
  -moz-border-radius: 5px;
  -webkit-border-radius: 5px;
  border-radius: 5px;
  -moz-box-shadow: 0px 0px 4px #222;
  -webkit-box-shadow: 0px 0px 4px #222;
  box-shadow: 0px 0px 4px #222;
  background-image: -moz-linear-gradient(top, #eeeeee, #cccccc);
  background-image: -webkit-gradient(linear,left top,left bottom,color-stop(0, #eeeeee),color-stop(1, #cccccc));
  background-image: -webkit-linear-gradient(top, #eeeeee, #cccccc);
  background-image: -moz-linear-gradient(top, #eeeeee, #cccccc);
  background-image: -ms-linear-gradient(top, #eeeeee, #cccccc);
  background-image: -o-linear-gradient(top, #eeeeee, #cccccc);
} 
```

# c# - 最佳实践以及如何在客户端的 C# 包装器中支持不同版本的 REST API

> ID：12676770
> 
> 赞同：4
> 
> 时间：2012-10-01T15:55:43.060
> 
> 标签：c#, api, rest, version, wrapper

我编写了一个 C# 包装器来支持我们公司项目的 REST API。但是，这些 API 现在正在发生变化 - 在 URL（可能会在 URL 中引入版本号）和它期望并返回的数据对象方面。

我想知道在我的 c# 包装器中支持不同版本的 REST API 的最佳实践是什么。

我应该怎么做——在代码设计和类定义方面——这样一个包装器可以与不同版本的 API 无缝工作——它也应该是可扩展的——这样将来任何新版本的 API 也可以很容易地得到支持.

我编写的 c# 包装器正在使用我们的 Web 服务 API。我已经在使用 RestSharp 客户端在 c# 包装器中使用我们的 Web 服务 API。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T18:50:34.480

你问的东西有点奇怪。让我重申你所说的：

1) 在您的组织中存在同一服务的多个版本。也许它们像 Bob 建议的那样建立，/current/api.../v1/api.../v2/api...等。或者可能是其他一些模式。

2) 您希望单个 C# 库了解每个不同的版本。

奇怪的是第二部分。通常，客户端库仅针对特定版本。服务器有责任确保服务的新版本要么向后兼容旧版本，要么隔离在新的 url 上。

问问自己这个问题——如果你继续构建这个库，它知道同一服务的多个版本，你的库的消费者会怎么看？他们是否必须明确告诉您要使用哪个版本？这不是我期望必须意识到的问题。

```
var client = new MyClient();
client.DoSomething();   // Makes sense    
client.DoSomethingV2(); // Huh? 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T16:12:47.617

设置 API 版本，将当前版本保持为版本 1，然后添加 v2 之类的

```
/current/api?id=x....
/version2/api?id=x... 
```

这允许您更新您的 api 以支持新功能，然后您可以为您过时的版本设置日落计划。

这样，您就可以让您的客户转移到您的新系统，而不会发生紧急情况。

# java - 运行代码后容器加载 - 资源加载

> ID：12676775
> 
> 赞同：1
> 
> 时间：2012-10-01T15:56:07.577
> 
> 标签：java, jersey, jax-rs

我正在尝试将以下行为添加到我的球衣服务中：

*   从 WEB-INF 文件夹加载/解析一些文件
*   将其存储在单例中，以便在应用程序的整个生命周期中快速访问。

现在我工作的解决方案是：

*   获取资源请求的 ServletContext
*   对于需要访问文件的每个请求，调用此方法 getSomething(criteria, servletContext)

我必须传递 servletContext 以便我可以使用 getRessourceAsStream() 方法使用它来加载资源，否则我无法获得正确的路径。这是我的主要痛点。

一旦服务器在应用程序服务器中准备就绪，我希望能够使服务器自动执行此操作，但我无法找到可以在哪里完成此操作。这将消除我始终传递 servletContext 的需要，并允许我在一些自定义反序列化器中使用该单例，并使使用该单例的代码更清晰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:58:28.903

每当您发现自己想要在 Servlet 应用程序的启动时做一些工作时，请使用 a [`ServletContextListener`](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletContextListener.html)，特别是该`contextInitialized(ServletContextEvent)`方法。

# javascript - 如何使用canvasxpress更改饼图中的颜色

> ID：12676776
> 
> 赞同：2
> 
> 时间：2012-10-01T15:56:18.233
> 
> 标签：javascript, html5-canvas, pie-chart

我有一个包含两种数据类型的饼图：好的和不好的。我想用绿色渲染好，而不用红色渲染好。我在文档中进行了搜索，但没有结果。到目前为止，我的代码是：

```
new CanvasXpress("orderProgressCanvas", {
  "y": {
    "vars": [
      "Ok",
      "No"
    ],
    "smps": [
      "Percentuale completamento"
    ],
    "colorRGB": [
      "rgb(0,255,0)",
      "rgb(255,0,0)"
    ],
    "data": [
      [
        progress
      ],
      [
        100-progress
      ]
    ]
  }
}, {
  "graphType": "Pie",
  "pieSegmentPrecision": 1,
  "pieSegmentSeparation": 2,
  "pieSegmentLabels": "outside",
  "pieType": "solid",
  "showLegend": false,
  "background" : "rgb(192,208,216)"
}); 
```

但是颜色定义不起作用..有什么想法吗？progress 是一个从 0 到 100 的 JavaScript 变量。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T23:29:41.643

我问主要开发人员：

> 只需将您想要的颜色放在配置中的颜色属性中即可。它们将按照您指定的顺序被选中。还要确保指定足够的颜色，否则它们将在使用时被回收。

```
'colors': ['rgb(234,234,1)', 'rgb(56,35,12)'.......etc] 
```

我的代码变成了：

```
new CanvasXpress("orderProgressCanvas", {
  "y": {
    "vars": [
      "Ok",
      "No"
    ],
    "smps": [
      "Percentuale completamento"
    ],
    "data": [
      [
        progress
      ],
      [
        100-progress
      ]
    ],
  }
}, {
  "graphType": "Pie",
  "pieSegmentPrecision": 1,
  "pieSegmentSeparation": 2,
  "pieSegmentLabels": "outside",
  "pieType": "solid",
  "showLegend": false,
  "background" : "rgb(192,208,216)",
  "colors": [
           "rgb(57,133,0)",
           "rgb(163,0,8)"
           ],
}); 
```

# javascript - 检查jQuery中是否有动画

> ID：12676785
> 
> 赞同：1
> 
> 时间：2012-10-01T15:56:36.750
> 
> 标签：javascript, animation

我正在使用 jQuery。我定义了一个名为“动画”的现有布尔值，它应该告诉我 jQuery 是否正在使用 animation() 制作动画。我有相当多的动画，在每个动画声明中实现这一点将是相当多的工作，而且很混乱。

所以我的问题是，有没有办法告诉jQuery，每当调用函数animation() 时，它都会做它通常的事情，但也会设置animating = true，当它完成时，animating = false。或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:00:37.033

为什么你需要知道它是否是一般的动画？

如果您关心特定元素，您可以使用`.is(':animated')`.

您甚至可以将其用于一般情况

```
if ($(':animated').length) {
  // something is being animated
} else {
  // nothing is being animated
} 
```

但这可能是矫枉过正..

寻找[`:animated`选择器](http://api.jquery.com/animated-selector/)

# wpf - 使用自定义 ListBox ControlTemplate 降低性能

> ID：12676788
> 
> 赞同：0
> 
> 时间：2012-10-01T15:56:45.940
> 
> 标签：wpf, mvvm, listbox, controltemplate

`ListBox`使用从导致过滤`ItemSource`变慢的自定义控件的模板。过滤是在`ItemSource`控件绑定到的 get 中完成的。使用normal 时不存在此问题`ListBox`，那么为什么对于 custom 会有任何不同`ListBox`？

过滤：

```
public IEnumerable<LibraryViewModel> Libraries {
    get {
        if (!string.IsNullOrEmpty(this.LibrarySearchString))
            return _libraries.Where(lib => IsLibraryMatch(lib, this.LibrarySearchString));
        else
            return _libraries.OrderBy(lib => !lib.IsFavourite);
    }
} 
```

使用控件：

```
<con:FilterListBox Grid.Row="1"
                   ItemsSource="{Binding Libraries}"
                   SelectedItem="{Binding SelectedLibrary}"
                   ItemTemplate="{StaticResource  
                                  LibraryItemTemplate}"                           
                   SearchString="{Binding LibrarySearchString, Mode=TwoWay}"
                   IsSearching="False"
                   Margin="4"/> 
```

控制模板：

```
<Style x:Key="{x:Type con:FilterListBox}" TargetType="{x:Type con:FilterListBox}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type con:FilterListBox}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>

                    <DockPanel Grid.Row="0">
                        <TextBlock Text="Search"
                                    VerticalAlignment="Center"/>
                        <TextBox Text="{Binding RelativeSource={RelativeSource TemplatedParent},
                                                Path=SearchString,
                                                UpdateSourceTrigger=PropertyChanged}"
                                 Margin="4,0,0,0"/>
                    </DockPanel>

                    <ScrollViewer Grid.Row="1" CanContentScroll="True">
                        <StackPanel IsItemsHost="True"
                                    HorizontalAlignment="Stretch"/>
                    </ScrollViewer>

                    <TextBlock Grid.Row="1"
                               Text="Searching..."
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               Visibility="{Binding RelativeSource={RelativeSource TemplatedParent},
                                                    Path=IsSearching,
                                                    Converter={StaticResource CollapsedIfFalseConverter}}"/>
                </Grid>

            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T16:05:30.597

您的缓慢行为`FilterListBox`可能伴随着虚拟化问题。您将 ItemsHost 替换为`ListBox`简单的`StackPanel`. 默认情况下，ListBox 使用 a `VirtualizingStackPanel`，它会尽可能虚拟化 Items。请参阅默认列表框模板作为参考。如果您有一个简单的 StackPanel 作为 ItemsPresenter，则 ListBox 必须在您的过滤器更改时重新呈现每个项目。根据项目的数量，这可能会导致您的行为缓慢。尝试改用默认的 itemshost。您还应该知道，虚拟化仅适用于“简单”项目（基本上每个项目的高度相同）。

# css - Internet Explorer superfish 问题

> ID：12676792
> 
> 赞同：0
> 
> 时间：2012-10-01T15:57:01.103
> 
> 标签：css, internet-explorer

我的网站上的下拉菜单有问题。我使用了suckerfish 菜单并稍微改变了它的css。[你可以在这里](http://addictivedomain.co.cc)看到网站。

菜单和滑块以及顶部的可扩展 div 在 Chrome 和 Firefox 上运行良好，但在 Internet Explorer 中的下拉菜单出现问题。

我将滑块向下移动以检查它是否因为它落在滑块的顶部而不是它。我相信它的 z-index 相关但无法弄清楚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:49:24.757

尝试将其添加到菜单的 ul 元素中：

```
z-index:999; 
```

# c - 在 C 中打印字符数组

> ID：12676804
> 
> 赞同：6
> 
> 时间：2012-10-01T15:57:54.217
> 
> 标签：c, arrays

我创建的一个简单函数遇到了一个特殊问题。此函数生成一个介于 0-14 之间的随机数，然后使用该随机生成的数字作为大小创建一个数组，并用 char 'x' 填充它。

我遇到的问题是，当我调用该函数时，它会在 x 之后随机显示符号或数字。

我最初将数组声明为大小 15，但认为是剩余的插槽导致了此显示问题。但是，更改功能后仍然存在。

这是我正在使用的当前功能：

```
void application()
{
    int randSize, i;

    srand((unsigned)time(NULL));
    randSize = (rand() % 15);

    char array[randSize];
    char *bar = array;

    for(i=0; i< randSize; i++)
            array[i] = 'x';

    printf("%s | ", bar);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T15:59:17.040

你不需要用`\0`C 来结束你的字符串吗？） 例如：

```
char array[randSize + 1];
for (i=0; i < randSize; i++)
   array[i] = 'x';
array[i] = '\0'; 
```

*（更新此内容是因为您确实可能想要获得* `randSize` *长度字符串的有用部分）。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T15:59:35.360

```
printf("%s | ", bar); 
```

转换需要一个指向以 0 结尾的字符数组的`%s`指针，但您的数组不是以 0 结尾的。因此行为是未定义的，但通常发生的是`printf`继续读取和打印字符，直到找到 0 字节或到达禁止的内存，从而导致分段错误，以先发生者为准。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T16:00:11.397

`%s`需要一个指向以*null 结尾的字符串*的指针。你没有提供那个，所以你有*未定义的行为*并且你的程序格式不正确。

阅读格式化[手册`printf`](http://linux.die.net/man/3/printf)以了解其工作原理和预期。事实上，对您在代码中使用的*每个库函数执行此操作。*做你不应该做的事情然后想知道为什么它不起作用是没有意义的；所有好的库都会提供对其要求的具体描述。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T15:59:29.683

您正在使用`printf`打印 C 字符串。C 字符串必须以空字符结尾。

如果要`array`用作字符串，则需要分配一个附加字符，并将 a 附加`\0`到末尾：

```
char array[randSize + 1];

// loop to fill the array

array[i] = '\0'; 
```

由于`printf`需要一个以 null 结尾的字符串，否则它将继续打印超出数组的边界，读取不属于数组的内存。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-01T17:11:20.617

除非声明为 const，否则如何使用变量进行编译？这是 C99 的一个旧功能，不被视为标准。在此之前不允许在 C 中使用，并且在 C++ 中也不起作用

```
char array[randSize]; 
```

正确的方法是

```
char *array = malloc(randSize); 
```

我在这里错过了什么吗？

# wpf - 更改报表中的数据源 Devexpress WPF Xtrareports

> ID：12676806
> 
> 赞同：0
> 
> 时间：2012-10-01T15:57:55.237
> 
> 标签：wpf, devexpress

我在 Devexpress 中有一个分配给某个数据源的报告，我需要将其更改为不同的数据源。我想这样做，而不必将所有字段放回报告中。为了帮助我解决这个问题，我将所有表和存储过程复制到新数据库中。有没有办法做到这一点？该报告将发送给多个客户，每个客户都有自己的命名约定，因此我需要能够动态更改它。预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:24:25.380

您可以轻松地更改连接字符串，一切都应该工作。这还取决于您访问数据的方式。如果您使用的是标准数据集或其他一些 ORM 工具，那么只要您在配置文件中公开了连接字符串，这应该可以工作。

# c#-4.0 - C#创建动态类并在线程池中使用

> ID：12676811
> 
> 赞同：2
> 
> 时间：2012-10-01T15:58:17.467
> 
> 标签：c#-4.0

我正在尝试使用 system.dynamic 在运行时创建类的动态实例。并将其传递给线程池以执行它。但是，我收到一个错误，说类中的方法被用作属性。下面是代码。

```
Type t = Type.GetType("clsCountrySelectInsertUpdate_TEST");
dynamic dd = Activator.CreateInstance(t, null);
dd.intMode = 203;
ThreadPool.QueueUserWorkItem(new WaitCallback(dd.CountrySelectInsertUpdate)); 
```

我也尝试在线程池中调用该方法，如下所示，但出现错误，指出无法从 CountrySelectInsertUpdate 方法转换返回类型 void。

```
ThreadPool.QueueUserWorkItem(new WaitCallback(dd.CountrySelectInsertUpdate()),null); 
```

CountrySelectInsertUpdate() 方法不带参数并返回 void。

任何帮助都会非常有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:02:23.190

[WaitCallback](http://msdn.microsoft.com/en-us/library/system.threading.waitcallback.aspx)需要状态。您可以轻松地使用 lambda 来编写：

```
ThreadPool.QueueUserWorkItem(new WaitCallback(state => dd.CountrySelectInsertUpdate()), null); 
```

话虽如此，由于您已经在使用 .NET 4，我建议您改用 TPL。它通常提供比 更好的线程模型`ThreadPool.QueueUserWorkItem`，特别是如果您以后需要获取结果（或处理异常）：

```
Task.Factory.StartNew( () => dd.CountrySelectInsertUpdate()); 
```

# php - PHP进程贴出json

> ID：12676813
> 
> 赞同：3
> 
> 时间：2012-10-01T15:58:29.713
> 
> 标签：php, json

我有一个 VB.net 桌面应用程序通过以下方式将 webrequest 发送到 PHP Web 服务器：

```
Dim result_post = SendRequest(New Uri(strURL), data, "application/json", "POST") 
```

数据使用 Newtonsoft json 编码过程进行编码

我在 PHP 端检索已发布的 json 时遇到问题。

```
$data = file_get_contents('php://input');
//$data = '[{"products_model":"2481-5-50","products_name":"2481-5-50 Desk, Maple with an extended d","products_description":"Desk, Maple with an extended description\rAnd this is line 2","products_quantity":112,"products_date_available":"2009-07-08T00:00:00","products_url":"","fc_products_id":0,"updated":"2012-04-15T00:00:00","products_price":1109.95,"ImageFile":"","products_tax_class_id":1,"products_weight":0.00}]';

$json = json_decode($data, true);
Foreach ($json as $i => $row) {
   //sql insert code goes here
} 
```

如果我将 json 文本放入 php 文件中，则 sql 插入代码有效。当我使用 file_get_contents 版本时，我没有收到任何错误，但也没有插入数据。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:08:22.107

您可以检查是否`$HTTP_RAW_POST_DATA`包含您要查找的信息。如果您 `always_populate_raw_post_data`在 ini 设置中设置为 true，则输入流可能已被读入此变量。

# android - PreviewCallback onPreviewFrame 不改变数据

> ID：12676814
> 
> 赞同：5
> 
> 时间：2012-10-01T15:58:29.653
> 
> 标签：android, camera, surfaceview

我想对来自相机的图像进行一些图像处理并将其显示在 SurfaceView 上，但我不知道如何修改相机框架。我尝试使用 setPreviewCallbackWithBuffer 和 onPreviewFrame 但它们没有按预期工作，框架没有被修改。

```
/** A basic Camera preview class */
public class CameraPreview extends SurfaceView implements
        SurfaceHolder.Callback, Camera.PreviewCallback {
    private SurfaceHolder mHolder;
    private Camera mCamera;
    private byte[] mData;
    private long prevFrameTick = System.currentTimeMillis();
    Canvas mCanvas;

    public CameraPreview(Context context, Camera camera) {
        super(context);
        mCamera = camera;

        // Install a SurfaceHolder.Callback so we get notified when the
        // underlying surface is created and destroyed.
        mHolder = getHolder();
        mHolder.addCallback(this);
        Size previewSize = mCamera.getParameters().getPreviewSize();
        mData = new byte[(int) (previewSize.height * previewSize.width * 1.5)];
        initBuffer();
        // deprecated setting, but required on Android versions prior to 3.0
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    private void initBuffer() {
        mCamera.addCallbackBuffer(mData);
        mCamera.addCallbackBuffer(mData);
        mCamera.addCallbackBuffer(mData);
        mCamera.setPreviewCallbackWithBuffer(this);
    }

    public void setCamera(Camera cam) {
        mCamera = cam;
        initBuffer();
    }

    public void surfaceCreated(SurfaceHolder holder) {
        // The Surface has been created, now tell the camera where to draw the
        // preview.
        try {
            mCamera.setPreviewDisplay(holder);
            initBuffer();
            mCamera.startPreview();
        } catch (IOException e) {
            Log.d("APP",
                    "Error setting camera preview: " + e.getMessage());
        }
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // empty. Take care of releasing the Camera preview in your activity.
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        // If your preview can change or rotate, take care of those events here.
        // Make sure to stop the preview before resizing or reformatting it.

        if (mHolder.getSurface() == null) {
            // preview surface does not exist
            return;
        }

        // stop preview before making changes
        try {
            mCamera.stopPreview();
        } catch (Exception e) {
            // ignore: tried to stop a non-existent preview
        }

        // set preview size and make any resize, rotate or
        // reformatting changes here

        // start preview with new settings
        try {
            mCamera.setPreviewDisplay(mHolder);
            initBuffer();
            mCamera.startPreview();
        } catch (Exception e) {
            Log.d("APP",
                    "Error starting camera preview: " + e.getMessage());
        }
    }

    public void onPreviewFrame(byte[] data, Camera camera) {
        // System.arraycopy(data, 0, mData, 0, data.length);
        Log.e("onPreviewFrame", data.length + " "
                + (System.currentTimeMillis() - prevFrameTick));
        prevFrameTick = System.currentTimeMillis();
        mData = new byte[data.length];
        mCamera.addCallbackBuffer(mData);
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T20:04:06.437

如果您使用 setPreviewDisplay() 调用，则无法修改发送到 SurfaceView 的预览数据。预览视频流完全在您的应用程序之外进行管理，并且无法访问。

您可以采取以下几种选择：

1.  您可以在 SurfaceView 之上放置第二个视图，例如 ImageView 或另一个 SurfaceView，并将 onPreviewFrame 回调接收到的数据绘制到此视图中。您必须从预览回调格式（通常是 NV21）进行一些颜色/像素格式转换以进行显示，显然您还必须首先对该数据运行图像处理。这不是很有效，除非您愿意编写一些 JNI 代码。

2.  在 Android 3.0 或更高版本上，您可以使用[Camera.setPreviewTexture()方法，并使用](http://developer.android.com/reference/android/hardware/Camera.html#setPreviewTexture%28android.graphics.SurfaceTexture%29)[SurfaceTexture](http://developer.android.com/reference/android/graphics/SurfaceTexture.html)对象将相机预览流通过管道传输到 OpenGL 纹理中，然后您可以在显示之前在 OpenGL 中对其进行操作。然后你根本不需要预览回调。如果 GPU 处理足够，这将更有效。如果您想以其他方式显示/处理它，您还可以使用 OpenGL readPixels 调用将处理后的预览数据返回到您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-21T13:27:39.110

也许它会对某人有所帮助。我通过使用 OpenCV 库从相机中检索帧解决了这个问题。在 OpenCv 3 中有一个方法 onCameraFrame(CvCameraViewFrame inputFrame)：

```
 public Mat onCameraFrame(CvCameraViewFrame inputFrame) {

    // here you can do something with inputFrame before it appears on the preview

    return inputFrame.rgba();
} 
```

您可以尝试从示例文件夹中的相机预览项目。

或者您可以在 ndk [https://vec.io/posts/how-to-render-image-buffer-in-android-ndk-native-code](https://vec.io/posts/how-to-render-image-buffer-in-android-ndk-native-code)中执行此操作 但我还没有尝试过这架飞机。

[或者在这里您可以使用 NDK https://github.com/youten/YUV420SP](https://github.com/youten/YUV420SP)在 C/C++ 中找到从 YUV 到 RGB 的解码

# css - 什么是网络字体，我可以依赖它们吗

> ID：12676815
> 
> 赞同：0
> 
> 时间：2012-10-01T15:58:30.260
> 
> 标签：css, webfonts, typography, google-webfonts

我想在我的 Bootstrap 网站上添加漂亮的字体。我是程序员，不是设计师。

我四处搜索并最终访问了 Google Webfonts 网站。谷歌自己的字体浏览器对我的任何浏览器（OSX Chrome、OSX Safari、Win7 Chrome、Win7 IE9）都不起作用（所有字体默认为衬线或其他东西），所有字体都显示相同。

*   为什么 google 的 webfont broswer 不适合我？[http://www.google.com/webfonts](http://www.google.com/webfonts)
*   我怎么能相信他们为其他人工作
*   使用自定义字体的防弹方法是什么？
*   我必须自己购买并托管它们吗？这是一个坏主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:42:24.187

Web 字体是***专门为 Web 使用而获得许可***的字体。除了 Google Webfonts，还有其他字体网站提供免费（和合法）字体供网络使用，如[Font Squirrel](http://www.fontsquirrel.com)（免费）和[Typekit](https://typekit.com)（主要是付费服务）。Font Squirrel 有很多带有@face 套件的字体，可以帮助结束“浏览器忧郁”，并且可以轻松地将字体托管在您自己的服务器上（我的偏好）。

有一篇关于 A List Apart 的好文章可以帮助你很多 -[阅读](http://www.alistapart.com/articles/fonts-at-the-crossing/)

顺便说一句 - 从您的计算机中获取字体并通过真实类型转换器（用于网络）运行它是违反您的字体许可证的...除非您已经购买/建立了通过该字体使用网络的许可供应商/制造商/创造者等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:07:55.590

但是我用了几次，所以想和你们分享。我只是在回答**如何使用它们？** 例如：

当您使用特定的网络字体**Archivo**时，您需要包含其样式表，如下所示

```
<link href='http://fonts.googleapis.com/css?family=Archivo+Narrow' rel='stylesheet' type='text/css'> 
```

以其他方式，您需要安装字体 API，这样您就不需要每次都进行在线请求。

大多数现代浏览器都应该支持它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T16:08:11.937

*   无法猜测第一个问题的原因。

*   Google web-fonts 将适用于所有浏览器，我确信它可以正常工作。有一些问题。

    ** 字体不流畅或在某些浏览器如IE中字体会被判断。有时字体也不清楚（某些字体）。你必须使用 CSS 阴影 ..etc 来解决这个问题。

*   您可以使用自己的网络字体。下载字体并将其转换为`.ttf, .svg, .eot and .woff`并在 CSS 中调用它们`@font-face`

*   如果您使用上述示例，则不必购买它们。但是，如果它是商业字体，您将不得不购买该字体。

** 您也可以使用 cufon.js。

# jquery - jquery-ui-map：搜索不起作用（Google Maps API）

> ID：12676816
> 
> 赞同：1
> 
> 时间：2012-10-01T15:58:31.667
> 
> 标签：jquery, google-maps-api-3, jquery-ui-map

尝试使用**jquery-ui-map**插件按地址执行搜索。

Firefox 报告：TypeError: h[b] is undefined /js/ui-map/jquery.ui.map.full.min.js Line: 2

```
$(document).ready(function() {
        $('#map_canvas').gmap('search', { 'address': 'Stockholm' }, function(isFound,results) {
            if (isFound) {
                $('#map_canvas').gmap('getMap').panTo(results[0].geometry.location);
            }
        });
}); 
```

请帮忙。

**编辑：在[http://code.google.com/p/jquery-ui-map/issues/detail?id=64向开发人员报告](http://code.google.com/p/jquery-ui-map/issues/detail?id=64)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T05:11:29.610

而不是**gmap('getMap')**应该使用**gmap('get','map')**。除了你交换了**isFound**和**results**正确的样本是：

```
$(document).ready(function() {
        $('#map_canvas').gmap('search', { 'address': 'Stockholm' }, function(results,isFound) {
            if (isFound) {
                $('#map_canvas').gmap('get','map').panTo(results[0].geometry.location);
            }
        });
}); 
```

# svn - Tortoise SVN 校验和错误

> ID：12676820
> 
> 赞同：0
> 
> 时间：2012-10-01T15:58:48.013
> 
> 标签：svn, tortoisesvn

我遇到了这个奇怪的 SVN 问题。当我尝试提交时，我有一个文件，它显示了以下错误。

```
Some resources were not updated.
svn: Checksum mismatch for 'C:\Users\xxx\workspace\Accounts1\.svn\text-base\manage_report.jsp.svn-base'; expected: 'd32ed2ae778b684ee496adc1386c2a6d', recorded: '25bb91909b02c117c206b5ad1ac5aa5b' 
```

我试图从 SVN 中删除该文件并添加一个新文件，但我仍然收到相同的错误。我也试过清理。

这是什么原因造成的？感谢您提供任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:11:27.820

我真的很讨厌复制和粘贴指向解决方案的 url，作为问题的答案，但是这个博客有很长的文章：

[http://andrew.hedges.name/blog/2009/01/25/how-to-recover-from-checksum-mismatch-errors-in-svn](http://andrew.hedges.name/blog/2009/01/25/how-to-recover-from-checksum-mismatch-errors-in-svn)

基本上，在他的博客中，他说：

```
1.Check out the latest revision of the corrupted directory into a temporary directory
2.Delete the munged SVN revision files
3.Copy the correct SVN revision files into the working directory 
```

现在，他的方向是 mac，但是...

*   替换`Terminal.app`为`cmd.exe`
*   替换`ls -la`为`dir`
*   替换`rm *`为`del *.*`
*   替换`cp *`为`copy *.*`

**就个人而言，我会在继续之前复制整个结帐目录。另外，请阅读他的警告/免责声明。**

* * *

***编辑：更新***

此外，该博客文章中的一条评论有很多优点：

> 这是一种愚蠢的方式。
> 
> 为什么不尽可能检查文件，将工作副本目录移动到某个地方，进行更新以获取新的工作副本，最后将剩余的文件复制到新的工作副本中。删除旧的工作副本。完毕。无需担心 .svn 目录。
> 
> 为什么要嫁给一个破烂的工作副本？干脆放弃吧。

# node.js - 在 Mongoose 模式上保存数组属性

> ID：12676827
> 
> 赞同：7
> 
> 时间：2012-10-01T15:59:17.717
> 
> 标签：node.js, mongodb, mongoose

我有一个类似于以下内容的 mongoose 对象架构：

```
var postSchema = new Schema({
   imagePost: {
     images: [{
        url: String,
        text: String
     }]
 }); 
```

我正在尝试使用以下内容创建新帖子：

```
var new_post = new Post();
new_post.images = [];
for (var i in req.body.post_content.images) {
  var image = req.body.post_content.images[i];
  var imageObj = { url: image['url'], text: image['text'] };
  new_post.images.push(imageObj);
}
new_post.save(); 
```

但是，一旦我保存了帖子，它就会使用 images 属性的空数组创建。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T17:17:51.363

您`imagePost`在新对象中缺少架构对象。试试这个：

```
var new_post = new Post();
new_post.imagePost = { images: [] };
for (var i in req.body.post_content.images) {
  var image = req.body.post_content.images[i];
  var imageObj = { url: image['url'], text: image['text'] };
  new_post.imagePost.images.push(imageObj);
}
new_post.save(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T16:16:02.653

我刚刚做了类似的事情，在我的情况下附加到现有集合中，请参阅此问题/答案。它可以帮助您：

[Mongoose / MongoDB - 附加到文档对象数组的简单示例，具有预定义的模式](https://stackoverflow.com/questions/12630788/mongoose-mongodb-simple-example-of-appending-to-a-document-object-array-wit/12636885#12636885)

您的问题是在 Mongoose 中您不能有嵌套对象，只有嵌套模式。所以你需要做这样的事情（对于你想要的结构）：

```
var imageSchema = new Schema({
    url: {type:String},
    text: {type:String}
});

var imagesSchema = new Schema({
    images : [imageSchema]
});

var postSchema = new Schema({
    imagePost: [imagesSchema]
}); 
```

# c# - 使用 LINQ 和 EntityFramework 内联 EnsureLoaded()

> ID：12676830
> 
> 赞同：0
> 
> 时间：2012-10-01T15:59:30.913
> 
> 标签：c#, xml, linq, entity-framework

我正在使用以下代码生成一些 XML，但是我正在使用的系统在 EntityFramework 中使用手动加载而不是延迟加载。所以实际上，我必须调用 EnsureLoaded() 来明确说明需要加载哪些元素。问题是调用带有深度嵌套字段的 EnsureLoaded() 。这是我的代码；

```
public partial class Test
{
    public XElement ReturnDetails()
    {
        Test.DriverReference.EnsureLoaded();

        return new XElement("Test",
            new XAttribute("CarNum", CarNum),
            new XAttribute("Make", Make ?? string.Empty),
            new XAttribute("Model", Model ?? string.Empty),
            new XAttribute("Colour", Colour ?? string.Empty),
            new XElement("Drivers",
            from driver in Drivers
            select new XElement("Driver",
                new XAttribute("DriverNum", driver.DriverNum),
                new XAttribute("Notes", driver.Notes),
                new XElement("Routes"),
                from route in driver.Routes
                select new XElement("Route",
                    new XAttribute("Name", route.Name),
                    new XAttribute("Notes", route.Notes)
                ))));
    }
} 
```

问题在于获取 Driver 的值，并在超出实体层次结构的三层时不断获取 NullReferenceExceptions。我想做的是以下内容；

```
public partial class Test
{
    public XElement ReturnDetails()
    {
        Test.DriverReference.EnsureLoaded();

        return new XElement("Test",
            new XAttribute("CarNum", CarNum),
            new XAttribute("Make", Make ?? string.Empty),
            new XAttribute("Model", Model ?? string.Empty),
            new XAttribute("Colour", Colour ?? string.Empty),
            new XElement("Drivers",
            from driver in Drivers.EnsureLoaded() *****
            select new XElement("Driver",
                new XAttribute("DriverNum", driver.DriverNum),
                new XAttribute("Notes", driver.Notes),
                new XElement("Routes"),
                from route in driver.Routes.EnsureLoaded() *****
                select new XElement("Route",
                    new XAttribute("Notes", route.Notes),
                    new XAttribute("Name", route.Name)
                ))));
    }
} 
```

# cloudbees - 更改 Jenkins 执行程序节点上的主机文件

> ID：12676831
> 
> 赞同：4
> 
> 时间：2012-10-01T15:59:30.680
> 
> 标签：cloudbees

我们正计划将我们的 Java Web 应用程序构建环境迁移到 Cloudbees，但目前有一个方面阻碍了我们。我们正在开发一个多租户应用程序。它使用主机子域来识别租户，我们使用通配符 dns 条目在生产中执行此操作（例如：*.example.com）。

在开发过程中，我们在 hosts 文件中硬编码了一些条目来模仿它。这些条目足以运行我们的测试：

```
...
127.0.0.1   test1.app.dev
127.0.0.1   test2.app.dev
127.0.0.1   test3.app.dev
127.0.0.1   test4.app.dev 
```

所以基本上，Jenkins 应该设置 hosts 文件，然后在本地使用我们的 Web 容器启动我们的应用程序。然后针对正在运行的 Web 应用程序执行测试套件。

我试图在 Jenkins 项目配置中添加一个预处理步骤来编辑主机文件，但正如预期的那样，Jenkins 作业没有这样做的权限。

有没有办法在我的测试套件运行之前更改主机文件？或者我们可以做些什么来模拟通配符 dns 条目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T02:44:28.750

您可以使用 37signals 的 xip.io 服务：

[http://37signals.com/svn/posts/3191-announcing-pow-040-with-xipio-support](http://37signals.com/svn/posts/3191-announcing-pow-040-with-xipio-support)

因此，您的主机名将是

*   test1.127.0.0.1.xip.io
*   test2.127.0.0.1.xip.io
*   test3.127.0.0.1.xip.io
*   test4.127.0.0.1.xip.io

我个人会尝试将它们保存在集中配置的区域，以防 xip.io 服务被停用，但它的运行成本可能相当低，因此至少应该存在一段时间。

# wcf - 配置系统初始化失败

> ID：12676837
> 
> 赞同：0
> 
> 时间：2012-10-01T15:59:49.340
> 
> 标签：wcf, app-config

我正在尝试创建一个客户端，通过 WCF 将消息放入服务器上的队列中。结合使用各种网站、论坛帖子等，我编写了利用下面的 App.config 的代码。

当我执行检索 CryptoCoordinatorQueueName 的简单操作时，我得到一个异常。如果我注释掉 system.serviceModel 和 bindings 部分，异常就会消失并正确返回字符串。异常是“Configuration system failed to initialize”，向下挖掘我看到内部异常“Unrecognized element”和标签对应的行号。System.ServiceModel 被项目引用，但看起来这不足以使配置系统接受该元素。谁能看到如何解决这个问题？我正在使用 dotnet 4 和 VS2010。

```
 <?xml version="1.0" encoding="utf-8" ?>
    <configuration>

      <configSections>
        <sectionGroup name="applicationSettings" 
                      type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
          <section name="CryptoCoordinatorServiceTest.Properties.Settings" 
                   type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
        </sectionGroup>
      </configSections>

      <appSettings>
        <add key="CryptoCoordinatorQueueName" value=".\private$\CryptoCoordinatorQueue" />
      </appSettings>

      <system.serviceModel>
          <services>
              <service behaviorConfiguration="MetadataBehavior" name="CryptoCoordinatorService.CryptoCoordinatorQueue">
                  <endpoint
                    address="net.msmq://localhost/private/CryptoCoordinatorQueue"
                    binding="netMsmqBinding"
                    contract="CryptoCoordinatorService.ICryptoCoordinatorControlQueue"
                    bindingConfiguration="CryptoCoordinatorNetMsmqBinding"/>
                  <endpoint
                    address="mex"
                    binding="mexHttpBinding"
                    contract="IMetadataExchange"/>
                  <host>
                      <baseAddresses>
                          <add baseAddress="http://localhost:8080/CryptoCoordinatorQueue/"/>

                    </baseAddresses>

                  </host>
                </service>

          </services>
      </system.serviceModel>

      <bindings>
          <netMsmqBinding>
              <binding name="CryptoCoordinatorNetMsmqBinding" deadLetterQueue="Custom">
                  <security mode="None"/>
                </binding>

          </netMsmqBinding>

      </bindings>

    </configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:48:38.830

啊。我尝试使用十六进制编辑器查看 app.config 文件，发现一些空格包含 0xA0 字符以及预期的 0x20。在网页、OneNote 和 Visual Studio 之间复制和粘贴片段的某个地方，出现了奇怪的错误。

将文件粘贴到在线清洁器（在本例中为[http://www.ubertoolz.com/demo/CleanUp.php](http://www.ubertoolz.com/demo/CleanUp.php)）并将其粘贴回来解决了问题。将其粘贴到记事本中并没有删除垃圾。格式搞砸了，因为它也去掉了制表符，但这是一个小小的刺激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:59:18.447

移动您的 bindings 元素，使其成为 system.serviceModel 的子元素：

```
<system.serviceModel>
    <bindings>
        ...
    </bindings>
</system.serviceModel> 
```

# java - 如何在 Hibernate 和/或分布式环境中订购对象？

> ID：12676842
> 
> 赞同：0
> 
> 时间：2012-10-01T16:00:05.350
> 
> 标签：java, hibernate, caching

我需要以任意顺序保留某些对象（由用户随意指定），但我不知道哪种方法是最好的。

我一直在考虑只是在我的实体中设置一个整数顺序字段并让用户订购它们，但这种方法让我感到困扰，因为我们有 3 个服务器分派请求，我相信如果我更新数据库中的订单，它会迫使我更新/每次我想根据该顺序进行计算时合并我的实体。

另一种方法是使用 IMDG 或缓存在共享位置设置订单并查询该位置以进行这些计算，但我认为这对于此类任务来说是多余的。

哪个是最好的方法？还是其他？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:19:39.943

具有整数顺序列的方法是可能的。然后你还要在数据库中添加一个版本列（可能你已经有一个），当一个用户更改订单时，必须保存所有具有新订单号的记录。由于版本列，其他用户会收到通知，因为修改了订单，他们必须重新加载数据。除了整数之外，您还可以使用小数点后带有一些数字的数字或字符串 - 两者都可以更轻松地仅更新在订单中真正具有新位置的行，而不是更新表中的所有行。

这种方法的不便之处在于，用户必须重新加载行（这意味着他必须重新进行实际修改），只是因为不同的用户更改了顺序。如果这种情况很少发生，你可以忍受它，但如果订单经常发生变化，这可能是不可接受的。

为了避免这种不便，您可以仅为订单创建一个单独的表（作为列的订单号、数据表的键和版本列）。该表与数据表具有 1:1 的关系。当订单发生变化时，只需要更新这张表，这意味着其他用户在修改任何记录的数据时都不会感到麻烦。在这种情况下，您甚至可以实现不同的顺序（例如每个用户都可以定义自己的顺序）——这会将与数据表的关系从 1:1 更改为 n:1。

共享位置的缓存只有在存在性能问题或不需要将订单保存到数据库中时才会这样做（订单仅对一个会话有效）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:44:57.513

我不确定我是否正确理解了这个问题。如果不同的用户可以定义自己的订单，那么订单应该以某种方式转到用户的个人资料，它可以是单独的表格或字段。

为什么要将特定于用户的信息添加到实体表中？还是我误解了这个问题？

# audio - 仅在主页中的音频播放器

> ID：12676845
> 
> 赞同：1
> 
> 时间：2012-10-01T16:00:19.103
> 
> 标签：audio, wordpress

我想在这个网站的主页上使用你的音频播放器： [http](http://www.piscinafrancavilla.com/wordpress/) ://www.piscinafrancavilla.com/wordpress/ 主页超大...我需要把音频放自动播放.. . 我知道我应该编辑 header.php 并把条件

```
<?php if(is_home()) {?> 
```

使用你的插件脚本的其余部分是什么？你认为这是正确的方法吗？？？请帮助我最好的问候埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:09:56.650

在您的主页上使用嵌入标签作为

```
<object width="199" height="59">
 <param name="src"
 value="song.mp3">
 <param name="autoplay" value="true">
 <param name="controller" value="true">
 <param name="bgcolor" value="#333333">
 <embed TYPE="application/x-mlayer2"
 src="song.mp3" autostart="true"
 loop="false" width="199" height="59" controller="true"
 bgcolor="#333333"></embed>
 </object> 
```

只需将 src 值（有两个）更改为您要插入的音乐文件的绝对 URL。

# jquery - 将图像链接到 jqZoom 上的灯箱

> ID：12676846
> 
> 赞同：0
> 
> 时间：2012-10-01T16:00:21.687
> 
> 标签：jquery, jqzoom

我想使用带有图像链接的 jqZoom，如下所示：[http ://www.lumas.de/pictures/christophe_jacrot/gold/](http://www.lumas.de/pictures/christophe_jacrot/gold/)

到目前为止，我只看到了 jqZoom 的示例，但图像上没有实际链接：http: [//www.mind-projects.it/projects/jqzoom/demos.php#demo1](http://www.mind-projects.it/projects/jqzoom/demos.php#demo1)。是否有我缺少的设置或选项？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:18:05.253

```
http://www.lumas.de/pictures/christophe_jacrot/gold/ 
```

在这个页面中，他们使用了一种叫做`jQuery_tools_overlay.js`

这就是单击图像时产生叠加的原因。

文档在这里：http: [//jquerytools.org/documentation/overlay/index.html](http://jquerytools.org/documentation/overlay/index.html)

并且`jqZoom`与此无关。

# objective-c - UITextInput - 返回不正确的“beginningOfDocument”和“endOfDocument”是否可以？

> ID：12676851
> 
> 赞同：0
> 
> 时间：2012-10-01T16:00:40.043
> 
> 标签：objective-c, ios, text-editor, core-text, uitextinput

我正在使用 Core Text 在 iOS 中创建自己的文本编辑器。几乎所有东西都很好，除了一个例外：当文本文档“大”时，东西真的开始变慢。我发现 iOS 在每次更改时都请求整个文档文本，包括选择更改（至少，当我通知 UITextInputDelegate 选择更改时）。部分问题是我已经优化了我的核心文本代码，将文档拆分为段落并仅呈现更改的段落。但是这样做也会将文档字符串（即 a `NSAttributedString`）拆分为单独的“段落对象”。因此，当 iOS 请求整个文本文档时，我必须将所有这些字符串组合成一个字符串，这需要时间和内存。

我的解决方案是为 iOS 提供不正确`UITextPosition`的 '`beginningOfDocument`和`endOfDocument`方法，将这些位置限制在与当前选择相交的段落中。这实际上工作得很好。iOS 现在只请求更改当前段落，这完全消除了减速。

到目前为止，一切都很好，但我有点担心这可能会破坏某些东西。我对此进行了一些测试，没有任何问题，但是文本编辑器可能很难测试（谁知道它是否会在某些边缘条件下中断）。

我有两个问题：

1.  iOS 是否应该在每次更改时请求整个文档文本？如果不是，那么可能是我的协议方法中的其他方法`UITextInput`返回了错误的值，从而导致 iOS 请求整个文档。
2.  有谁知道这是否真的会破坏任何东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:11:49.543

好吧，我已经对此进行了一段时间的测试，我终于找到了一个使用这种技术会破坏功能的地方。 `UITextInput`使用`beginningOfDocument`和`endOfDocument`确定当您按下蓝牙键盘上的箭头键时它是否有空间“移动”。仅返回当前所选段落的开头和结尾会导致它在该段落的开头或结尾处忽略“箭头”按钮，并且这些箭头表示试图移出它认为的开头/文件的结尾。很容易修复。如果当前选择从段落的开头/结尾开始，我现在也分别返回上一个/下一个段落作为文档的一部分。

# javascript - Openlayers - 使用标记 id 和 onclick 事件显示太平洋标记弹出窗口

> ID：12676852
> 
> 赞同：2
> 
> 时间：2012-10-01T16:00:42.493
> 
> 标签：javascript, openlayers, openstreetmap

我有以下代码，它在地图上添加了 3 个标记以及弹出框我想要做的是在页面底部有一个位置列表，并在单击列表中的一个位置时使用标记的 id地方弹出出现在地图上。

```
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
        <title>Open Street Map</title>
        <style type="text/css">
            body { font: normal 10pt Helvetica, Arial; }
            #map { width: 100%; height: 100%; border: 0px; padding: 0px; }
        </style>
        <script src="lib/OpenLayers.js" type="text/javascript"></script>
        <script type="text/javascript">
            var iconSize = new OpenLayers.Size(21, 25);
            var iconOffset = new OpenLayers.Pixel(-(iconSize.w / 2), -iconSize.h);
            var icon = new OpenLayers.Icon("img/fourmarker.png",
                           iconSize, iconOffset);

            var zoom, center, currentPopup, map, lyrMarkers;
            var popupClass = OpenLayers.Class(OpenLayers.Popup.FramedCloud, {
                "autoSize": true,
                "minSize": new OpenLayers.Size(300, 50),
                "maxSize": new OpenLayers.Size(500, 300),
                "keepInMap": true
            });

            var bounds = new OpenLayers.Bounds();
            function addMarker(id, lng, lat, info) {
                var pt = new OpenLayers.LonLat(lng, lat)
                                       .transform(new OpenLayers.Projection("EPSG:4326"), 
                                       map.getProjectionObject());
                bounds.extend(pt);
                var feature = new OpenLayers.Feature(lyrMarkers, pt);
                feature.closeBox = true;
                feature.popupClass = popupClass;
                feature.data.popupContentHTML = info ;
                feature.data.overflow = "auto";
                var marker = new OpenLayers.Marker(pt, icon.clone());

                var markerClick = function(evt) {
                    if (currentPopup != null && currentPopup.visible()) {
                        currentPopup.hide();
                    }

                    if (this.popup == null) {
                        this.popup = this.createPopup(this.closeBox);
                        map.addPopup(this.popup);
                        this.popup.show();
                    } else {
                        this.popup.toggle();
                    }
                    currentPopup = this.popup;
                    OpenLayers.Event.stop(evt);
                };
                marker.events.register("mousedown", feature, markerClick);
                lyrMarkers.addMarker(marker);
            }

            function initMap() {
                var options = {
                    projection: new OpenLayers.Projection("EPSG:900913"),
                    displayProjection: new OpenLayers.Projection("EPSG:4326"),
                    units: "m",
                    numZoomLevels: 19,
                    maxResolution: 156543.0339,
                    maxExtent: new OpenLayers.Bounds(-0.13011, -0.13011, 51.51039, 51.51039)
                };

                map = new OpenLayers.Map("map", options);
                map.addControl(new OpenLayers.Control.DragPan());
                var lyrOsm = new OpenLayers.Layer.OSM();
                map.addLayer(lyrOsm);
                lyrMarkers = new OpenLayers.Layer.Markers("Markers");
                map.addLayer(lyrMarkers);

                 //add marker on given coordinates
                addMarker('1',-0.12519,51.51112 , '<b>Tescos</b><br/>Covent garden');
                addMarker('2',-0.13264,51.50918 , '<b>Spar</b><br/>Leicester Square');
                addMarker('3', -0.12498,51.50807 , '<b>M & S</b><br/>Embankment');
                center = bounds.getCenterLonLat();
                map.setCenter(center, map.getZoomForExtent(bounds) - 1);
                zoom = map.getZoom();
            }

        </script>
    </head>
    <body onload="initMap()" style="margin:0; border:0; padding:0; width:1000px; height:500px;">
        <div id="map"></div>

    </body>
</html> 
```

额外的信息

我将在地图底部添加一个列表，如下所示：

```
<ul>
<li><a href="">location1</a></li>
<li><a href="">location2</a></li>
<li><a href="">location3</a></li>
</ul> 
```

我想要工作的是，当用户单击 location1 链接时，将显示该相关弹出框，而另一个将被删除。

这将如何完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:53:06.887

这个非常快的例子（修改 addMarker 函数）：

```
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
        <title>Open Street Map</title>
        <style type="text/css">
            body { font: normal 10pt Helvetica, Arial; }
            #map { width: 100%; height: 100%; border: 0px; padding: 0px; }
            #list > div { background-color: #aaa; margin-top: 10px; }
        </style>
        <script src="http://openlayers.org/api/OpenLayers.js" type="text/javascript"> </script>
    </head>
    <body onload="initMap()" style="margin:0; border:0; padding:0; width:1000px; height:500px;">
        <div id="map"></div>
        <div id="list" style="width:100%; height: 100%"></div>
    </body>
            <script type="text/javascript">
            var iconSize = new OpenLayers.Size(21, 25);
            var iconOffset = new OpenLayers.Pixel(-(iconSize.w / 2), -iconSize.h);
            var icon = new OpenLayers.Icon("img/fourmarker.png",
                           iconSize, iconOffset);
            var list = document.getElementById('list');

            var zoom, center, currentPopup, map, lyrMarkers;
            var popupClass = OpenLayers.Class(OpenLayers.Popup.FramedCloud, {
                "autoSize": true,
                "minSize": new OpenLayers.Size(300, 50),
                "maxSize": new OpenLayers.Size(500, 300),
                "keepInMap": true
            });

            var bounds = new OpenLayers.Bounds();
            function addMarker(id, lng, lat, info) {
                var pt = new OpenLayers.LonLat(lng, lat)
                                       .transform(new OpenLayers.Projection("EPSG:4326"), 
                                       map.getProjectionObject());
                bounds.extend(pt);
                var feature = new OpenLayers.Feature(lyrMarkers, pt);
                feature.closeBox = true;
                feature.popupClass = popupClass;
                feature.data.popupContentHTML = info ;
                feature.data.overflow = "auto";
                var marker = new OpenLayers.Marker(pt, icon.clone());

                var markerClick = function(evt) {
                    if (currentPopup != null && currentPopup.visible()) {
                        currentPopup.hide();
                    }

                    if (this.popup == null) {
                        this.popup = this.createPopup(this.closeBox);
                        map.addPopup(this.popup);
                        this.popup.show();
                    } else {
                        this.popup.toggle();
                    }
                    currentPopup = this.popup;
                    OpenLayers.Event.stop(evt);
                };
                marker.events.register("mousedown", feature, markerClick);
                lyrMarkers.addMarker(marker);

                // add items
                var listItem = OpenLayers.Util.createDiv(this.id, null, null, null, 'relative', null);
                listItem.innerHTML = info;
                list.appendChild(listItem);

                var callback = function(e) {
                    marker.events.triggerEvent('mousedown');
                    console.log(marker);
                    OpenLayers.Event.stop(e);
                };
                OpenLayers.Event.observe(listItem, "touchend", OpenLayers.Function.bindAsEventListener(callback, this));
                OpenLayers.Event.observe(listItem, "click", OpenLayers.Function.bindAsEventListener(callback, this));

            }

            function initMap() {
                var options = {
                    projection: new OpenLayers.Projection("EPSG:900913"),
                    displayProjection: new OpenLayers.Projection("EPSG:4326"),
                    units: "m",
                    numZoomLevels: 19,
                    maxResolution: 156543.0339,
                    maxExtent: new OpenLayers.Bounds(-0.13011, -0.13011, 51.51039, 51.51039)
                };

                map = new OpenLayers.Map("map", options);
                map.addControl(new OpenLayers.Control.DragPan());
                var lyrOsm = new OpenLayers.Layer.OSM();
                map.addLayer(lyrOsm);
                lyrMarkers = new OpenLayers.Layer.Markers("Markers");
                map.addLayer(lyrMarkers);

                 //add marker on given coordinates
                addMarker('1',-0.12519,51.51112 , '<b>Tescos</b><br/>Covent garden');
                addMarker('2',-0.13264,51.50918 , '<b>Spar</b><br/>Leicester Square');
                addMarker('3', -0.12498,51.50807 , '<b>M & S</b><br/>Embankment');
                center = bounds.getCenterLonLat();
                map.setCenter(center, map.getZoomForExtent(bounds) - 1);
                zoom = map.getZoom();
            }

        </script>
</html> 
```

# c++ - VC++ 2010：显示打开的对话框挂起

> ID：12676853
> 
> 赞同：2
> 
> 时间：2012-10-01T16:00:45.197
> 
> 标签：c++, windows, modal-dialog

嗨，我已将 VC++6 项目转换为 VC++ 2010，并且在显示模式打开文件对话框时一直遇到错误。

它显示对话框的底部但顶部丢失，过滤器也未填充。

标头具有用于存储文件信息的公共成员：

```
CString m_strFilePathName;
CString m_strFileExtName; 
```

我显示对话框的代码：

```
 static TCHAR BASED_CODE szFilter[] = _T("Open Bin File(*.abs)|")
       _T("Default DataBase File(*.ddf)|")
       _T("SatCodex File(*.sdx)|")
       _T("Format Text File(*.txt)");

// TODO: Add your command handler code here
CFileDlg fd(TRUE, NULL, "", OFN_HIDEREADONLY | OFN_OVERWRITEPROMPT, szFilter);
    //"Open Bin File(*.abs)|Default DataBase File(*.ddf)|SatCodex File(*.sdx)|Format Text File(*.txt)");

const int c_cMaxFiles = 1;
const int c_cbBuffSize = (c_cMaxFiles * (MAX_PATH + 1)) + 1;
fd.GetOFN().lpstrFile = m_strFilePathName.GetBuffer(c_cbBuffSize);
fd.GetOFN().nMaxFile = c_cbBuffSize;

    // Dialog hangs on this line:
if(fd.DoModal() != IDOK) return; 
```

诊断返回：**AliEditor.exe 中 0x006c69cc 的第一次机会异常：0xC0000005：访问冲突读取位置 0x00000020。**

在挂起模式调用堆栈中中断会返回以下信息：

```
user32.dll!_NtUserWaitMessage@0()  + 0x15 bytes <-STOPPED HERE
user32.dll!_NtUserWaitMessage@0()  + 0x15 bytes 
user32.dll!_DialogBox2@16()  + 0x109 bytes  
user32.dll!_InternalDialogBox@24()  + 0xc9 bytes    
user32.dll!_DialogBoxIndirectParamAorW@24()  + 0x36 bytes   
user32.dll!_DialogBoxIndirectParamW@20()  + 0x1b bytes  
comdlg32.dll!CFileOpenSave::Show()  + 0x146 bytes 
```

> AliEditor.exe!CFileDialog::DoModal() 第 748 行 + 0x26 字节 C++ AliEditor.exe!CMainFrame::OnFileOpen() 第 195 行 + 0xb 字节 C++ AliEditor.exe!_AfxDispatchCmdMsg(CCmdTarget * pTarget, unsigned int nID, int nCode, void (void)* pfn, void * pExtra, unsigned int nSig, AFX_CMDHANDLERINFO * pHandlerInfo) 第 82 行 C++ AliEditor.exe!CCmdTarget::OnCmdMsg(unsigned int nID, int nCode, void * pExtra, AFX_CMDHANDLERINFO * pHandlerInfo) 第 381 行 + 0x27 字节C++ AliEditor.exe!CFrameWnd::OnCmdMsg(unsigned int nID, int nCode, void * pExtra, AFX_CMDHANDLERINFO * pHandlerInfo) 第 973 行 + 0x18 字节 C++ AliEditor.exe!CWnd::OnCommand(unsigned int wParam, long lParam) 第 2729 行 C++ AliEditor.exe!CFrameWnd::OnCommand(unsigned int wParam, long lParam) 第 371 行 C++ AliEditor.exe!CWnd::OnWndMsg(unsigned int message,unsigned int wParam, long lParam, long * pResult) Line 2101 + 0x1e bytes C++ AliEditor.exe!CWnd::WindowProc(unsigned int message, unsigned int wParam, long lParam) Line 2087 + 0x20 bytes C++ AliEditor.exe!AfxCallWndProc(CWnd * pWnd, HWND__ * hWnd, unsigned int nMsg, unsigned int wParam, long lParam) 第 257 行 + 0x1c 字节 C++ AliEditor.exe!AfxWndProc(HWND__ * hWnd, unsigned int nMsg, unsigned int wParam, long lParam) 第 420 行 C++unsigned int nMsg, unsigned int wParam, long lParam) 第 420 行 C++unsigned int nMsg, unsigned int wParam, long lParam) 第 420 行 C++

我猜的声明（我不是 C++ 开发人员）覆盖（fileDlg.cpp）：

```
#include "stdafx.h"
#include "AliEditor.h"
#include "FileDlg.h"

#ifdef _DEBUG
#define new DEBUG_NEW
#undef THIS_FILE
static char THIS_FILE[] = __FILE__;
#endif

/////////////////////////////////////////////////////////////////////////////
// CFileDlg

IMPLEMENT_DYNAMIC(CFileDlg, CFileDialog)

CFileDlg::CFileDlg(BOOL bOpenFileDialog, LPCTSTR lpszDefExt, LPCTSTR lpszFileName,
        DWORD dwFlags, LPCTSTR lpszFilter, CWnd* pParentWnd) :
        CFileExportDialog(bOpenFileDialog, lpszDefExt, lpszFileName, dwFlags, lpszFilter, pParentWnd)
{
}

BEGIN_MESSAGE_MAP(CFileDlg, CFileExportDialog)
    //{{AFX_MSG_MAP(CFileDlg)
    ON_WM_CLOSE()
    //}}AFX_MSG_MAP
END_MESSAGE_MAP() 
```

文件“dlgfile.cpp”非常大，但这只是顶部：

```
// This is a part of the Microsoft Foundation Classes C++ library.
// Copyright (C) Microsoft Corporation
// All rights reserved.
//
// This source code is only intended as a supplement to the
// Microsoft Foundation Classes Reference and related
// electronic documentation provided with the library.
// See these sources for detailed information regarding the
// Microsoft Foundation Classes product.

#include "stdafx.h"
#include <dlgs.h>       // for standard control IDs for commdlg
#include "afxglobals.h"

#define new DEBUG_NEW

////////////////////////////////////////////////////////////////////////////
// FileOpen/FileSaveAs common dialog helper

CFileDialog::CFileDialog(BOOL bOpenFileDialog,
    LPCTSTR lpszDefExt, LPCTSTR lpszFileName, DWORD dwFlags,
    LPCTSTR lpszFilter, CWnd* pParentWnd, DWORD dwSize, BOOL bVistaStyle)
    : CCommonDialog(pParentWnd)
{
    OSVERSIONINFO vi;
    ZeroMemory(&vi, sizeof(OSVERSIONINFO));
    vi.dwOSVersionInfoSize = sizeof(OSVERSIONINFO);
    ::GetVersionEx(&vi);

    // if running under Vista
    if (vi.dwMajorVersion >= 6)
    {
        m_bVistaStyle = bVistaStyle;
    }
    else
    {
        m_bVistaStyle = FALSE;
    }

    m_bPickFoldersMode = FALSE;

    // determine size of OPENFILENAME struct if dwSize is zero
    if (dwSize == 0)
    {
        dwSize = sizeof(OPENFILENAME);
    }

    // size of OPENFILENAME must be at least version 5
    ASSERT(dwSize >= sizeof(OPENFILENAME));
    // allocate memory for OPENFILENAME struct based on size passed in
    m_pOFN = static_cast<LPOPENFILENAME>(malloc(dwSize));
    ASSERT(m_pOFN != NULL);
    if (m_pOFN == NULL)
        AfxThrowMemoryException();

    memset(&m_ofn, 0, dwSize); // initialize structure to 0/NULL
    m_szFileName[0] = '\0';
    m_szFileTitle[0] = '\0';
    m_pofnTemp = NULL;

    m_bOpenFileDialog = bOpenFileDialog;
    m_nIDHelp = bOpenFileDialog ? AFX_IDD_FILEOPEN : AFX_IDD_FILESAVE;

    m_ofn.lStructSize = dwSize;
    m_ofn.lpstrFile = m_szFileName;
    m_ofn.nMaxFile = _countof(m_szFileName);
    m_ofn.lpstrDefExt = lpszDefExt;
    m_ofn.lpstrFileTitle = (LPTSTR)m_szFileTitle;
    m_ofn.nMaxFileTitle = _countof(m_szFileTitle);
    m_ofn.Flags |= dwFlags | OFN_ENABLEHOOK | OFN_EXPLORER;
    if(dwFlags & OFN_ENABLETEMPLATE)
        m_ofn.Flags &= ~OFN_ENABLESIZING;
    m_ofn.hInstance = AfxGetResourceHandle();
    m_ofn.lpfnHook = (COMMDLGPROC)_AfxCommDlgProc;

    // setup initial file name
    if (lpszFileName != NULL)
        Checked::tcsncpy_s(m_szFileName, _countof(m_szFileName), lpszFileName, _TRUNCATE);

    // Translate filter into commdlg format (lots of \0)
    if (lpszFilter != NULL)
    {
        m_strFilter = lpszFilter;
        LPTSTR pch = m_strFilter.GetBuffer(0); // modify the buffer in place
        // MFC delimits with '|' not '\0'
        while ((pch = _tcschr(pch, '|')) != NULL)
            *pch++ = '\0';
        m_ofn.lpstrFilter = m_strFilter;
        // do not call ReleaseBuffer() since the string contains '\0' characters
    }

    if (m_bVistaStyle == TRUE)
    {
        if (SUCCEEDED(CoInitializeEx(NULL, COINIT_APARTMENTTHREADED)))
        { // multi-threaded is not supported
            IFileDialog* pIFileDialog;
            IFileDialogCustomize* pIFileDialogCustomize;

            HRESULT hr;

            USE_INTERFACE_PART_STD(FileDialogEvents);
            USE_INTERFACE_PART_STD(FileDialogControlEvents);

            if (m_bOpenFileDialog)
            {
                hr = CoCreateInstance(CLSID_FileOpenDialog, NULL, CLSCTX_INPROC_SERVER, 
                                      IID_PPV_ARGS(&pIFileDialog));
            }
            else
            {
                hr = CoCreateInstance(CLSID_FileSaveDialog, NULL, CLSCTX_INPROC_SERVER, 
                                      IID_PPV_ARGS(&pIFileDialog));
            }
            if (FAILED(hr))
            {
                m_bVistaStyle = FALSE;
                return;
            }

            hr = pIFileDialog->QueryInterface(IID_PPV_ARGS(&pIFileDialogCustomize));
            ENSURE(SUCCEEDED(hr));

            hr = pIFileDialog->Advise(reinterpret_cast<IFileDialogEvents*>(&m_xFileDialogEvents), &m_dwCookie);
            ENSURE(SUCCEEDED(hr));

            m_pIFileDialog = static_cast<void*>(pIFileDialog);
            m_pIFileDialogCustomize = static_cast<void*>(pIFileDialogCustomize);
        }
        else
        {
            m_bVistaStyle = FALSE;
        }
    }
}

CFileDialog::~CFileDialog()
{
    free(m_pOFN);

    if (m_bVistaStyle == TRUE)
    {
        HRESULT hr;
        hr = (static_cast<IFileDialog*>(m_pIFileDialog))->Unadvise(m_dwCookie);
        ENSURE(SUCCEEDED(hr));

        (static_cast<IFileDialogCustomize*>(m_pIFileDialogCustomize))->Release();
        (static_cast<IFileDialog*>(m_pIFileDialog))->Release();

        CoUninitialize();
    }
}

const OPENFILENAME& CFileDialog::GetOFN() const
{
    return *m_pOFN;
}

OPENFILENAME& CFileDialog::GetOFN()
{
    return *m_pOFN;
} 
```

一步一步地，我在同一个（“dlgfile.cpp”）文件中到达这一点：

```
INT_PTR CFileDialog::DoModal()
{
    ASSERT_VALID(this);
    ASSERT(m_ofn.Flags & OFN_ENABLEHOOK);
    ASSERT(m_ofn.lpfnHook != NULL); // can still be a user hook

    // zero out the file buffer for consistent parsing later
    ASSERT(AfxIsValidAddress(m_ofn.lpstrFile, m_ofn.nMaxFile));
    DWORD nOffset = lstrlen(m_ofn.lpstrFile)+1;
    ASSERT(nOffset <= m_ofn.nMaxFile);
    memset(m_ofn.lpstrFile+nOffset, 0, (m_ofn.nMaxFile-nOffset)*sizeof(TCHAR));

    //  This is a special case for the file open/save dialog,
    //  which sometimes pumps while it is coming up but before it has
    //  disabled the main window.
    HWND hWndFocus = ::GetFocus();
    BOOL bEnableParent = FALSE;
    m_ofn.hwndOwner = PreModal();
    AfxUnhookWindowCreate();
    if (m_ofn.hwndOwner != NULL && ::IsWindowEnabled(m_ofn.hwndOwner))
    {
        bEnableParent = TRUE;
        ::EnableWindow(m_ofn.hwndOwner, FALSE);
    }

    _AFX_THREAD_STATE* pThreadState = AfxGetThreadState();
    ASSERT(pThreadState->m_pAlternateWndInit == NULL);

    if (m_bVistaStyle == TRUE)
    {
        AfxHookWindowCreate(this);
    }
    else if (m_ofn.Flags & OFN_EXPLORER)
        pThreadState->m_pAlternateWndInit = this;
    else
        AfxHookWindowCreate(this);

    INT_PTR nResult = 0;

    if (m_bVistaStyle == TRUE)
    {
        ApplyOFNToShellDialog();

// HERE CALLS **OPENFILENAME& CFileDialog::GetOFN()** method and then hangs
            HRESULT hr = (static_cast<IFileDialog*>(m_pIFileDialog))->Show(m_ofn.hwndOwner);

        nResult = (hr == S_OK) ? IDOK : IDCANCEL;
    }
    else if (m_bOpenFileDialog)
        nResult = ::AfxCtxGetOpenFileName(&m_ofn);
    else
        nResult = ::AfxCtxGetSaveFileName(&m_ofn);

    if (nResult)
        ASSERT(pThreadState->m_pAlternateWndInit == NULL);
    pThreadState->m_pAlternateWndInit = NULL;

    // Second part of special case for file open/save dialog.
    if (bEnableParent)
        ::EnableWindow(m_ofn.hwndOwner, TRUE);
    if (::IsWindow(hWndFocus))
        ::SetFocus(hWndFocus);

    PostModal();
    return nResult ? nResult : IDCANCEL;
} 
```

有人可以帮我吗？

[更新] 由于现阶段没有人可以帮助我，我已将项目上传到[这里](https://www.yousendit.com/download/TEhXcXl1ZDV0d0c1eDhUQw)的公共场所。任何人都可以下载并告诉我单击打开文件时出了什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T16:25:13.913

我能看到的唯一问题是您的过滤器字符串看起来不正确。看起来您的代码基于 MSDN 示例之一。根据该示例，您的 szFilter 应如下所示：

```
static TCHAR BASED_CODE szFilter[] = _T("Open Bin File(*.abs)|*.abs|")
   _T("Default DataBase File(*.ddf)|*.ddf|")
   _T("SatCodex File(*.sdx)|*.sdx|")
   _T("Format Text File(*.txt)|*.txt||"); 
```

仅供参考，我使用[http://msdn.microsoft.com/en-US/library/wh5hz49d(v=vs.100).aspx](http://msdn.microsoft.com/en-US/library/wh5hz49d(v=vs.100).aspx)作为参考。

[更新]

我创建了一个小型 MFC 应用程序并粘贴到您的代码中。您的代码示例中有错字。该类是 CFileDialog，而不是 CFileDlg。我修复了它，然后应用上述更改来修复 szFilter 字符串。这个对我有用。显示文件对话框，我输入一些数据并关闭文件对话框。没有访问冲突，没有断言。我认为您需要在代码中的其他地方查找问题。

[更新 2]

忽略我之前所说的一切。您最初的访问冲突在 FileExportDialog.cpp 的第 174 行左右

```
void CFileExportDialog::OnTypeChange()
{
  // get current filename
  CWnd *fileNameBox = GetParent()->GetDlgItem(edt1);
  ASSERT_VALID(fileNameBox);
  CString fileName; fileNameBox->GetWindowText(fileName);

  // get current extension
  CWnd *typeNameBox = GetParent()->GetDlgItem(cmb1);
  ASSERT_VALID(typeNameBox);
  CString typeName; typeNameBox->GetWindowText(typeName);
... 
```

真正的调用栈是：

```
AliEditor.exe!CWnd::GetDlgItem(int nID)  Line 92 + 0x3 bytes    C++
AliEditor.exe!CFileExportDialog::OnTypeChange()  Line 177 + 0x14 bytes  C++
AliEditor.exe!CFileDialog::XFileDialogEvents::OnTypeChange(IFileDialog * __formal)  Line 619    C++
comdlg32.dll!76138057()     
[Frames below may be incorrect and/or missing, no symbols loaded for comdlg32.dll]  
comctl32.dll!731c7613()     
comdlg32.dll!7612bdda()     
comdlg32.dll!7612c5a0()     
KernelBase.dll!76096055()   
comctl32.dll!7458b575()     
user32.dll!767281c8()   
user32.dll!76728326()   
user32.dll!76728347()   
user32.dll!76730d27()   
user32.dll!7673794a()   
AliEditor.exe!_AfxActivationWndProc(HWND__ * hWnd, unsigned int nMsg, unsigned int wParam, long lParam)  Line 456 + 0x1a bytes  C++
user32.dll!767262fa()   
user32.dll!76726d3a()   
user32.dll!76726ce9()   
user32.dll!7672965e()   
user32.dll!7675206f()   
user32.dll!7674cf4b()   
user32.dll!7674ce8a()   
user32.dll!7674cc0e()   
comdlg32.dll!7612597b()     
AliEditor.exe!CFileDialog::DoModal()  Line 748 + 0x26 bytes C++
... 
```

程序在 CWnd::GetDlgItem 处崩溃，因为 CWnd“this”指针为 0。这是因为 CFileExportDialog::OnTypeChange 的第一行是 GetParent()，它为 NULL，因为此对话框没有父对话框。

CFileExportDialog 类不是 Visual Studio 的一部分，它似乎基于 1999 年从[http://www.codeguru.com/cpp/wd/dislog/commondialogs/article.php/c1863/CFileExportDialog-Class编写的一些公共域代码.htm](http://www.codeguru.com/cpp/w-d/dislog/commondialogs/article.php/c1863/CFileExportDialog-Class.htm)。看起来 OnTypeChange 的实现是基于原始开发人员对 Microsoft CFileDialog 类的细节进行逆向工程，因为它是在 1999 年实现的。我猜在 VS 2010 中内部结构发生了变化，因此该类不再有用。

下次运行程序时，在 FileExportDialog.cpp 的第 177 行设置断点。当您遇到断点时，单步执行代码并观察崩溃和断言，因为过时的代码会尝试做它一开始就不应该做的事情。

Recommend you dump the CFileExportDialog class and rewrite your program using the standard MFC CFileDialog class.

# parsing - Scala 解析器框架能否解析以“推”模式提供的序列？

> ID：12676855
> 
> 赞同：5
> 
> 时间：2012-10-01T16:00:55.923
> 
> 标签：parsing, scala

我可以使用 Scala 解析器框架来解析在推送模式下提供给解析器的事件流（即一系列 write() 调用）吗？还是必须使用迭代器“拉”其输入？我正在考虑使用解析器主要来验证 write() 调用的序列是否是格式良好的合法序列，但它也可能会向流中注入额外的令牌。

我知道我可以将一系列标记推送到期望通过使用线程来拉取序列的组件，但这是一个混乱的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:12:52.047

好的，答案似乎是 Scala 解析器需要“拥有控制循环”：它不能在推送模式下驱动。这是因为作为递归下降解析引擎，它需要程序栈来维护状态。通过将其作为独立线程运行，它可能会在单独的堆栈上运行，但当然必须考虑语法是否需要回溯和/或前瞻并实现任何必要的缓冲。

出于预期目的，找到一个生成简单状态机的工具似乎是一个更好的方法。

感谢导致此结论的评论。

# serial-port - 串口 - 如何安全搜索我的设备？

> ID：12676857
> 
> 赞同：2
> 
> 时间：2012-10-01T16:00:57.840
> 
> 标签：serial-port, standards, protocols, serial-communication

我正在编写与我自己设计的电子设备通信（通过串行端口）的应用程序。

当我的 PC 应用程序启动时 - 它会一一打开可用的 COM 端口并发送一些字符串（例如“你是什么？”）。

我的设备被编程，用自己的 ID 回答那个“神奇的问题”（例如：“我是监督员工的邪恶设备”）。

当我的 PC 软件收到“神奇回复”时，它开始正常工作，不再搜索其他端口。

当然我没有在数据传输中使用愚蠢的问题，这只是一个例子。

**问题是 - 我可以在所有（不忙）端口上发送字符串来发现我的设备吗？**

如果可以的话——那个“问题”字符串应该是什么样子？有没有标准化的标准？

这不是我办公桌上的第一个这样的项目，但现在我正在为小行业开发解决方案，我需要更多地关注我的应用程序在做什么，因为可能有其他设备连接到 COM 端口，我不知道它们如何做出反应。

对不起，如果我犯了一些语言错误，英语是我的第三语言。

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T17:04:48.857

在 Alvin Wong 确认了我的担忧后，我再次考虑并重新设计了我的设备发现功能，因为我不想放弃这个想法。

我将每 1-5 秒从设备发送一次唯一复杂的 ID。

当我的电脑启动时 - 它会尝试按顺序打开所有可用端口并监听该 ID 几秒钟。

如果应用程序收到该 ID - 这将是确认，该端口号/名称是正确的，并且我的连接已建立。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T16:25:07.820

不，你不想那样做。

* * *

当您使用 COM 串行端口时，您不知道端口中插入了什么。它可能什么都不是，你的设备、调制解调器、鼠标（尽管我相信没有人再使用它了……）或任何你无法想象的东西。

想象一下，如果它连接到另一台计算机（可能是 Linux/路由器），发送内容可能会导致执行“该命令”，从而产生意想不到的效果（尽管您的程序可能不会注意到）。或者，如果它是一些编程错误的设备，它可能会触发固件中的错误，从而使设备失效并使其发生故障。

简而言之，在最坏的情况下，您可能**会引发灾难性事件**。

* * *

串行（我假设是 RS232 或 UART）通信没有指定的传输协议（与 USB 相比）来识别设备，因此它不是故障安全的。用户必须确保他选择了正确的端口。这大概是硬件厂商选择 USB 的原因之一，也是 USB 如此受欢迎的原因之一，即使对于电脑白痴也是如此。

# ios - 在 ios 中构建多个电子邮件删除动画

> ID：12676859
> 
> 赞同：0
> 
> 时间：2012-10-01T16:01:04.107
> 
> 标签：ios, ipad

> **可能重复：**
> [如何复制 Mail.app 的垃圾动画](https://stackoverflow.com/questions/428110/how-can-i-replicate-the-trashing-animation-of-mail-app)

我正在尝试模仿苹果多电子邮件删除动画。用户在左侧选择多封电子邮件，并且电子邮件似乎在右侧堆叠。我想知道是否有可以使用的内置动画。

![在此处输入图像描述](../Images/b543e5f771ffe3da84cd14ad7d7f0e89.png)

# git - 将 git 别名添加到 .bash_profile 不起作用

> ID：12676864
> 
> 赞同：10
> 
> 时间：2012-10-01T16:01:34.237
> 
> 标签：git, bash, .bash-profile

我编辑了我的 $Home .bash_profile 以包含一些 git 别名命令。我对此很陌生，我无法弄清楚出了什么问题。

**.bash_profile**

```
alias gs='git status '
alias ga='git add '
alias gb='git branch '
alias gc='git commit'
alias gd='git diff'
alias go='git checkout '
alias gk='gitk --all&'
alias gx='gitx --all'

alias got='git '
alias get='git '

PS1="\u$ "
alias ll="ls -lahG"
[[ -s "$HOME/.rvm/scripts/rvm" ]] && \
. "$HOME/.rvm/scripts/rvm"
[[ -s "$HOME/.rvm/scripts/rvm" ]] && \
. "$HOME/.rvm/scripts/rvm"
[[ -s "$HOME/.rvm/scripts/rvm" ]] && \
. "$HOME/.rvm/scripts/rvm"
[[ -s "$HOME/.rvm/scripts/rvm" ]] && \
. "$HOME/.rvm/scripts/rvm"
export PATH="/usr/local/bin:/usr/local/sbin:/usr/local/mysql/bin:$PATH"

[[ -s "$HOME/.rvm/scripts/rvm" ]] && \
. "$HOME/.rvm/scripts/rvm"
[[ -s "$HOME/.rvm/scripts/rvm" ]] && \
. "$HOME/.rvm/scripts/rvm"
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # Load RVM function 
```

我似乎无法理解我做错了什么。有任何想法吗？

**[编辑]**只是想提一下，我添加的部分是从 PS1 开始的。例如`alias ll = "ls -lahG"`效果很好。上面的没有。

**[EDIT2]**我试图用户 gs(){ git status "$*"; 相反，但这似乎并没有奏效。

**[EDIT3]**问题是我必须获取 ~/.profile。我最终做的是把它放在 ~/.bashrc 文件中，并根据 Sputnick 的建议获取该文件。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-01T16:06:17.650

您应该使用`~/.bashrc`而**不是** `~/.bash_profile`别名。

`~/.bashrc`用于交互式使用，请参阅[http://mywiki.wooledge.org/DotFiles](http://mywiki.wooledge.org/DotFiles)和[http://wiki.bash-hackers.org/scripting/bashbehaviour](http://wiki.bash-hackers.org/scripting/bashbehaviour)

最重要的是，您应该使用以下方式获取修改后的文件：

```
. ~/.bashrc 
```

或者

```
source ~/.bashrc 
```

# sql - 不能将 OUTPUT 设置为从另一个存储过程返回表

> ID：12676865
> 
> 赞同：0
> 
> 时间：2012-10-01T16:01:39.247
> 
> 标签：sql, sql-server

我正在尝试创建一个存储过程，它将临时表返回到另一个存储过程。但是，我似乎无法将表设置为输出变量。例如：

```
 @t table(ID int) output 
```

作为参数不起作用。但是，以下内容不会抱怨：

```
 @t int output 
```

有没有办法让一个存储过程获得另一个存储过程生成的表？提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:04:36.653

答案是不。

您可以将创建的表的名称从一个`Stored Procedure`传递到另一个，然后在第二个中`SP`您可以使用该名称通过表进行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:05:35.930

是的，您可以通过使用用户定义的表类型来实现这一点。你需要做的就是

1.  创建用户定义的表类型。
2.  创建您的第一个存储过程以接受表类型变量。
3.  在您的第二个过程中声明一个 Table Type 变量，用您想要的数据填充它并通过传入 Table Type 变量来调用第一个过程。

这是一个示例代码。

1) 创建用户定义的表类型。在 Programmability --> Types --> User Defined Table Types --> 右击创建你的表类型

```
CREATE TYPE [schemaname].[Ttype] AS TABLE 
(
    EmployeeID int,
    EmployeeName varchar(100),
)
GO 
```

上面的类型只是一个例子，把你需要的列放在里面。这里 Ttype 是 TableType 的名称（您可以根据自己的方便命名）

2) 创建您的第一个存储过程，它将接受 Table 类型作为变量，以便您可以使用它。

```
CREATE PROCEDURE [schemaname].[StoredProcName]
@TableType Ttype READONLY
AS
BEGIN
     -- Just an example on how to use the TableType.

    INSERT INTO TableName(EmployeeId,EmployeeName)
    SELECT EmployeeID,EmployeeName FROM @TableType

END
GO 
```

上面的存储过程接受一个表类型变量。Ttype 表示@Tabletype 变量是用户定义的表类型。READONLY 表示不能对表类型参数执行任何 DML 操作。

3) 现在，创建第二个过程，将表类型参数传递给上面创建的过程。

```
CREATE PROCEDURE [schemaname].[StoredProc2Name]

AS
BEGIN

    SET NOCOUNT ON;

    DECLARE @Table as Ttype 

    INSERT INTO @Table(EmployeeID,EmployeeName)
    SELECT EmployeeID,EmployeeName FROM schemaname.Employees

    EXEC [schemaname].[StoredProcName] @Table

END
GO 
```

在上面的 SP 中，您声明了一个名为 @Table 的变量，它属于表类型 (Ttype)。现在你用你需要的数据填充它，然后通过传入@Table 变量来调用第一个过程。

# magento - 一页结帐几乎是空的

> ID：12676866
> 
> 赞同：2
> 
> 时间：2012-10-01T16:01:40.000
> 
> 标签：magento, checkout

我有一个几乎空的一页结帐。

从 minicart 或主购物车页面单击“结帐”后，我得到一个几乎空白的“结帐”页面。

该页面显示主顶部栏，包括菜单栏、迷你车、货币和底部栏。

但在中间，结帐主页面完全是空白的，只有“结帐”文本。

我检查了各种博客和论坛本身的帮助。但我无法解决它。

任何人都可以帮我解决这个问题。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:04:30.740

模板中的某些东西可能会死掉。编辑`index.php`以取消注释`ini_set('display_errors');`，您将看到错误。

或者在管理面板中启用登录，然后查看`var/log/exception.log`.

# ios - 用于 iOS 开发的 SQLite 数据库包装器库

> ID：12676868
> 
> 赞同：3
> 
> 时间：2012-10-01T16:01:44.143
> 
> 标签：ios, objective-c, sqlite, fmdb

我是一名初学者 iOS 开发人员，正在寻找一个易于使用的数据库包装库来在 iOS（Iphone、Ipad）应用程序中使用 SQLite。到目前为止，我已经找到[了 FMDB](https://github.com/ccgus/fmdb)。

你们用什么来制作企业范围的 Iphone 数据库应用程序？什么是我应该研究的易于使用且可靠的数据库包装器库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:57:03.697

是的，如果你需要/想要直接的 SQLite 交互，[FMDB](https://github.com/ccgus/fmdb)是一个很好的选择。它为 SQLite C API 提供了一个简单而健壮的接口。

您可能还想考虑[Core Data](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/CoreData/cdProgrammingGuide.html)，它是用于“对象生命周期和对象图管理，包括持久性”的 iOS 框架，它通常在幕后使用 SQLite。

正如 Core Data 文档所说，“Core Data 不是关系数据库或关系数据库管理系统 (RDBMS)”。核心数据[技术概述](https://developer.apple.com/library/ios/documentation/cocoa/conceptual/CoreData/Articles/cdTechnologyOverview.html#//apple_ref/doc/uid/TP40009296-SW1)清楚地描述了核心数据是什么，不是什么。

话虽如此，对于许多应用程序而言，与直接与 SQLite 本身交互相比，它提供了许多优势，并且在您自己深入 SQLite 编程之前考虑 Core Data 是值得的。

# svn - 如何在 Netbeans 中看到 Jenkins 失败的测试 statcktrace？

> ID：12676872
> 
> 赞同：1
> 
> 时间：2012-10-01T16:02:13.863
> 
> 标签：svn, netbeans, junit, jenkins

我在 Ubuntu 12.04 上运行 Netbeans 7.2 + Subversion 1.7 + Jenkins 1.466.2。Netbeans 中的 Hudson/Jenkins 插件说：“不支持这个颠覆工作副本”，所以我设法在 Jenkins 下的“构建一个自由风格的软件项目”下配置我的项目。我还在“服务”部分的“Hudson Builders”中添加了 Jenkins 作为 Hudson 实例，并将构建设置为与我的项目相关，并将其设置为被监视。在构建过程中，我添加了对“测试”Ant 任务的调用，因此 JUnit 测试在每个构建中运行，我可以在 Jenkins 中看到失败的测试。Netbeans 还被告知构建失败，我可以在输出窗口中看到结果以及堆栈跟踪。我想要的是“测试结果”窗口中显示的测试结果，所以我可以单击失败测试的堆栈跟踪并导航到导致问题的行。我的直觉告诉我应该有办法做到这一点，但是在整个周末配置所有东西之后，我的大脑被烧毁了。有谁知道这是否可能以及如何做到这一点？谢谢！

# c# - 迭代 FirstName、LastName 以创建用户名的技术

> ID：12676873
> 
> 赞同：1
> 
> 时间：2012-10-01T16:02:19.050
> 
> 标签：c#, asp.net, linq

我陷入了尝试为给定用户名生成密码的情况。

我通过用户的姓氏+名字的第一个字母，通过名字和姓氏的文本框从用户的输入中创建用户名。例如，如果用户的名字是“Ronald”，姓氏是“Test”，我将数据库中的用户名添加为“Testr”。但是，如果我有另一个用户的相同姓氏并且名字以与数据库中现有用户相同的名字开头，我会像这样添加名字的前 2 个字母 -

```
if (entities.Users.Any(a => a.LastName == tbLname.Text && a.FirstName.StartsWith(fname))) 
 username = (tbLname.Text + tbFname.Text.Substring(0,2)).ToLower(); 
```

现在的问题是，这仅在前 2 个字母与名字匹配时才有效。如果我有 3 个甚至 4 个匹配名字怎么办？我不知道如何检查剩余的字符是否具有唯一的用户名。

关于如何实现这一目标的任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T16:15:07.553

如果应用程序想要避免错误，则 OP 需要更多信息，但与此同时，这应该可以解决手头的问题。

```
//Store the first possible name.
var possibleUsername = string.Format("{0}{1}", tbLname.Text, tbFname.Text.Substring(0,1))

//Don't hit the database N times, instead get all the possible names in one shot.
var existingUsers = entities.Users.Where(u => u.Username.StartsWith(possibleUsername)).ToList();

//Find the first possible open username.
if (existingUsers.Count == 0) {
    //Create the user since the username is open.
} else {
    //Iterate through all the possible usernames and create it when a spot is open.
    for(var i = 1; i < existingUsers.Count; i++) {
        if (existingUsers.FirstOrDefault(u => u.Username == string.Format("{0}{1}", tbLname.Text, tbFname.Text.Substring(0, i))) == null) {
            //Create the user since the user name is open.
        }
    }
} 
```

# jquery - JQuery 花式框文本溢出

> ID：12676875
> 
> 赞同：2
> 
> 时间：2012-10-01T16:02:25.063
> 
> 标签：jquery, jquery-plugins, fancybox, scrollbar, overflow

所以这是我的情况的一个工作示例：[小提琴](http://jsfiddle.net/vkDcG/71/)

这张照片只是我从谷歌图片中抓取的第一件事。但是无论如何，当您单击图片时，它会再次显示该图片，但顶部带有标题文本。这**就是**我想要的，但我不想要的是溢出。无论如何在图片窗口中绑定该文本并在其上放置滚动条？

如果是这样，我什至可以使用名为 uscrollbar 的 jquery 插件在其上放置自定义滚动条。要使用它，您只需执行以下操作：

```
$("#div").uscrollbar(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:14:50.840

您不需要任何额外的插件来纠正这个问题。

`.fancybox-opened .fancybox-title`为CSS 类指定/覆盖以下样式将解决它。

```
.fancybox-opened .fancybox-title {

    /* new */
    height: 100%;
    overflow: auto;
    padding-bottom: 0;
    padding-top: 0;

    visibility: visible;
} 
```

**演示：http:** [//jsfiddle.net/vkDcG/73/](http://jsfiddle.net/vkDcG/73/)

# java - 在Java中转换为具体类和调用方法

> ID：12676876
> 
> 赞同：6
> 
> 时间：2012-10-01T16:02:28.713
> 
> 标签：java, inheritance, reflection, types, casting

假设我们有一个名为的基类`A`和一些子类（`B`、`C`、`D`等）。大多数子类都有方法`do()`，但基类没有。Class`AA`提供了一个名为 的方法`getObject()`，该方法将创建一个`B`or `C`or`D`等​​类型的对象，但将对象返回为 type `A`。

`do()`如果此方法可用，如何将返回的对象转换为具体类型并调用其方法？

编辑： **我不允许更改 Class `A`、子类或`AA`**的实现，因为我使用的是封闭的 Source API。是的，它确实存在一些设计问题，如您所见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T16:05:25.887

您可以测试`instanceof`并调用`do()`方法：

```
A a = aa.getObject();
if (a instanceof B) {
   B b = (B) a;
   b.do();
}
// ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T16:04:20.163

我认为更好的主意是让类将方法`A`定义`do()`为抽象方法或具体的空方法。这样你就不必做任何演员。

如果您不允许更改任何类，那么您可以定义一个`MyA extends A`定义`do()`方法的类 and `MyB`, `MyC`,... 和一个`MyAA`基本上可以做的事情`AA`，只是它返回类型为`MyB`, `MyC`...的对象。

如果这不行，那么除了检查返回的对象是否是类型`B`并进行强制转换`B`等之外，我没有看到其他方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T16:04:28.057

假设`A`定义了`do`，并且它不是私有的，那么无论`AA`返回的子类如何，您都可以在没有强制转换的情况下调用它。这是多态性的特征之一。在运行时，解释器将使用正确（即实际类的实现）版本的`do`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T16:09:01.590

在我看来，您所描述的内容就像您想调用参考`Derived Class`方法一样`Base class`。

但是为此，您还需要在您的方法中包含您的方法`base class`。
因此，您还需要`do()`在基类中声明您的方法`A`。如果您不想给出实现，让它成为抽象的，或者让它成为一个空的方法..没关系..

现在，如果你做同样的事情你正在解释..你不需要做类型转换..

因为，`Derived Class`将根据 - 调用适当的方法**`which derived class object does your base class reference point to`**

```
public abstract class A {
   public abstract void do();
}

public class B extends A {
   public void do() {
       System.out.println("In B");
   }
}

public class Test {
    public static void main(String[] args) {
        A obj = returnA();

        obj.do();  // Will invoke class B's do() method
    }

    /** Method returning BaseClass A's reference pointing to subclass instance **/
    public static A returnA() {
         A obj = new B();
         return obj;
    }
} 
```

好的，刚刚看到您的编辑，不允许您更改课程..

在这种情况下，您实际上需要`typecast`根据返回的引用的实例进行操作。

因此，在上面的`main`方法中，在`A obj = returnA();`此行之后添加以下行：-

```
if (obj instanceof B) {
    B obj1 = (B) obj;

} 
```

但是，在这种情况下，您需要检查`instanceof`每个子类。这可能是一个主要问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T16:10:14.733

首先，将其`Class A`作为抽象类和`do()`抽象方法是一种更好的方法......

此外，如果你仍然想要你想要的方式..那么

**做一个明确的演员表。**

`B b = (B) a; // a is a casted back to its concrete type.`

**此外，您应该记住 Compiler 的这一非常重要的行为**。

`The Object Reference Variable of Super Type must have the method to be called, whether the Sub Type Object has or not.`

**例如：**

```
A a = new B(); 
```

**-**要调用类型 A`do()`的方法`Object Reference Variable`，类`A` **必须具有该** `go()`方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T16:13:27.070

如果不允许更改`A`但可以更改子类，则可以使用该方法创建一个接口，`do()`并让所有子类实现该接口。

```
public interface Doer {
    public void do();
}

public class B extends A implements Doer {
    //implement do method
}

//.. same for other subclass 
```

那你就不需要演员表了。否则，您将需要一些明确的向下转换。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-01T17:03:35.757

最好的方法是使用`A`该方法。但是由于您不允许更改任何课程。我建议您使用反射围绕所有类创建一个包装器实例。

下面类中的静态方法仅用于展示如何做到这一点。您可以有单独的实例变量，可以将 A 包裹在 E 中。

```
public class E {

public static void doMethod(A a) {
    Class<?> class1 = a.getClass();
    Method method;
    try {
        method = class1.getDeclaredMethod("doMethod", null);// B, C, D has doMethod
        method.invoke(a, null);
        // I know to many exceptions
    } catch (SecurityException e) {
        e.printStackTrace();
    } catch (NoSuchMethodException e) {
        e.printStackTrace();
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    } catch (InvocationTargetException e) {
        e.printStackTrace();
    }

}
} 
```

第二个选项是`instance of`您必须检查类型然后转换它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-05T22:23:34.910

如果方法调用返回相关类的实例，您可以做一些工作，这是您的具体问题（上图）。

```
import static java.lang.System.out;

public class AATester {
   public static void main(String[] args){
      for(int x: new int[]{ 0, 1, 2 } ){
         A w = getA(x);
         Chain.a(w.setA("a")).a(
            (w instanceof C ? ((C) w).setC("c") : null );
         out.println(w);
      }
   }

   public static getA(int a){//This is whatever AA does.
      A retval;//I don't like multiple returns.
      switch(a){
         case 0:  retval = new A(); break;
         case 1:  retval = new B(); break;
         default: retval = new C(); break;
      }
      return retval;
   }
} 
```

测试A级

```
public class A {
   private String a;
   protected String getA() { return a; }
   protected A setA(String a) { this.a=a; return this; }//Fluent method
   @Override
   public String toString() {
      return "A[getA()=" + getA() + "]";
   }
} 
```

测试B级

```
public class B {
   private String b;
   protected String getB() { return b; }
   protected B setB(String b) { this.b=b; return this; }//Fluent method
   @Override
   public String toString() {
      return "B[getA()=" + getA() + ", getB()=" + getB() + "]\n  " 
      + super.toString();
  }
} 
```

测试类 C

```
public class C {
   private String c;
   protected String getC() { return c; }
   protected C setC(String c) { this.c=c; return this; }//Fluent method
   @Override
   public String toString() {
      return "C [getA()=" + getA() + ", getB()=" + getB() + ", getC()=" 
             + getC() + "]\n  " + super.toString();
   }
} 
```

链类

```
/**
 * Allows chaining with any class, even one you didn't write and don't have 
 * access to the source code for, so long as that class is fluent.
 * @author Gregory G. Bishop ggb667@gmail.com (C) 11/5/2013 all rights reserved. 
 */
public final class Chain {
   public static <K> _<K> a(K value) {//Note that this is static
      return new _<K>(value);//So the IDE names aren't nasty
   }
} 
```

Chain 的助手类。

```
/** 
 * An instance method cannot override the static method from Chain, 
 * which is why this class exists (i.e. to suppress IDE warnings, 
 * and provide fluent usage). 
 *
 * @author Gregory G. Bishop ggb667@gmail.com (C) 11/5/2013 all rights reserved.
 */
final class _<T> {
   public T a;//So we can reference the last value if desired.
   protected _(T t) { this.a = T; }//Required by Chain above
   public <K> _<K> a(K value) {
      return new _<K>(value);
   }
} 
```

输出：

```
 A [get(A)=a]
    B [get(A)=a, getB()=null]
      A [getA()=a]
    C [getA()=a, getB()=null, getC()=c)]
      B [get(A)=a, getB()=null]
      A [get(A)=a] 
```

# cmake - CMake 依赖项 - 如何在构建子目录之前构建根目录

> ID：12676877
> 
> 赞同：1
> 
> 时间：2012-10-01T16:02:29.510
> 
> 标签：cmake, build-dependencies

在 ROOT 文件夹中，我有一个 CMakeFiles.txt，其中包含：add_subdirectory(gtest)。问题是，ROOT 构建了一个名为 API 的文件，这是 gtest 正确构建所必需的。

API 依赖于 ROOT 生成的文件。我怎样才能得到它，以便 API 在执行 API 的 CMakeList 之前等到 ROOT 完全完成构建？我可以添加某种延迟吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:23:13.247

如果没有看到您的文件，很难提供详细信息，但您只需要告诉 CMake gtest 依赖于 API。有了这些信息，CMake 将以适当的顺序生成事物。

# c# - 使用 webbrowser 的 iframe 的完整 HTML 代码

> ID：12676879
> 
> 赞同：2
> 
> 时间：2012-10-01T16:02:39.433
> 
> 标签：c#, webbrowser-control, mshtml

我需要获取此站点的 html 代码（使用 C#）：

[http://urbs-web.curitiba.pr.gov.br/centro/defmapalinhas.asp?l=n](http://urbs-web.curitiba.pr.gov.br/centro/defmapalinhas.asp?l=n)（仅适用于 IE8）

使用 WebClient 类、HttpWebResquest 或任何其他库，我无法访问动态生成的 html 代码。所以我唯一的解决方案（我猜）是使用 WebBrowser Control (WPF)。

![在此处输入图像描述](../Images/948a8bc0f691f75ef1156a29726895a3.png)

我一直在尝试，使用 mshtml.HTMLDocument 和 SHDocVw.IWebBrowser2 但它一团糟，我找不到我想要的

似乎有很多“iframe”，里面有更多的“iframe”。我不知道，我试过：

```
 IHTMLElementCollection elcol = htmlDoc.getElementsByTagName("iframe");
  var test = htmlDoc.getElementsByTagName("HTML");
  var test2 = doc.all; 
```

但没有进展，有人知道如何帮助我吗？

观察/琐事：这是显示所有公共汽车在我的城市经过的站点。这个网站太可怕了，而且只在 IE8 下工作有严重的问题。我想使用这些信息来尝试创建更好的服务，使用谷歌地图或 bing 地图。

我试图获取信息的站点不再可用，获取动态 html 源代码的想法被放弃，我找不到使用 WebBrowser Control for WPF 的解决方案。

我相信今天还有其他方法可以解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:58:44.787

您需要在 WebBrowser 控件中使用“Frames”对象，如果我没记错的话，此对象集合将返回所有框架和 iframe，并且您需要查看在页面上找到的每个新发现的框架的框架集合，请告诉我? 因此，这就像一个需要运行的递归发现循环，将找到的每个帧添加到数组或集合中，并且对于每个“未搜索”帧，您必须查看该帧“.Frames”集合（它们都将具有.Count 等，只是一个典型的集合），并且您对找到的每个新发现的框架都执行此操作，直到当然，不再有任何新发现的框架尚未搜索其“.Frames”集合。

因此，如果按照上述方法完成该功能，将允许发现无限嵌套的帧，正如我在 VB6 项目中所做的那样（如果您愿意，我很乐意为您提供它的源代码）。但是，在我的示例中没有保留嵌套，但这没关系，因为嵌套结构并不重要，您应该根据添加到集合中的帧的顺序找出哪个是什么，因为顺序与添加的框架的层次结构。

一旦你这样做了，获取 html 源代码就非常简单了，我相信你知道该怎么做，可能是一个 .DocumentText，具体取决于你使用的 WB 控件的版本。

还有，你说不能用HTTP客户端直接抓取源码吗？我必须不同意，因为一旦有了框架对象，就可以从每个框架对象中获取 URL，并执行 URL2String 类型调用以获取 URL 并将其从任何类似 httpclient 的类或框架中转换为字符串。如果他们只接受来自特定推荐人的请求（即：推荐人必须来自他们的某些文件等的域名），或者如果它不是其中之一的 USER_AGENT指定的浏览器，那么从技术上讲，它们可能会拒绝并且不返回数据，这不太可能但可能。

但是，referrer 和 user_agent 都可以在您使用的 httpclient 中进行更改，因此如果他们基于此类内容施加限制，您可以很容易地欺骗他们并为他们提供他们期望的数据。再一次，这是低概率的东西，但他们可能已经以这种方式进行设置，特别是如果他们的数据是专有的。

PS：我第一次访问该站点时，IE 崩溃并重新打开该选项卡 :)，我同意这个糟糕的站点。

# c# - Mono winforms中的版权和商标符号

> ID：12676881
> 
> 赞同：3
> 
> 时间：2012-10-01T16:02:48.067
> 
> 标签：c#, winforms, mono

我正在寻找可能将 Windows .NET 应用程序移植到 linux，虽然它大部分都可以工作，但我在获取商标和版权符号以在 winform 控件中正确呈现时遇到问题。在我们的代码中，每个符号都有两个常量...

```
// <summary>
/// The copyright symbol
/// </summary>
public const string COPYRIGHT = "\u00AE";

/// <summary>
/// The trademark symbol
/// </summary>
public const string TRADEMARK = "\u2122"; 
```

关于如何将这些呈现为不仅仅是“？”的任何想法 在控制文本中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:53:20.557

经过调查，似乎在手动更改自动生成的 winforms 代码以包含常量（即：“MyProduct”+ Constants.COPYRIGHT）后，Visual Studio 已将其改回“MyProduct(C)”，无法加载版权符号. 所以我不得不将它切换回使用常量，一切都按预期工作。现在如何停止 Visual Studio 人工处理我的字符串....

# wpf - 如何从实体中删除记录 - MVVM，WPF

> ID：12676882
> 
> 赞同：1
> 
> 时间：2012-10-01T16:02:47.917
> 
> 标签：wpf, mvvm

我在 ViewModel 中有以下代码，我想从实体中删除记录，但它不起作用。有人可以解释一下吗...？

```
Usertable users = new Usertable();
users.User_ID = Entity.User_ID;
users.user_role = "Admin";
Entity.CompanyRoles.Remove(users); 
```

相反，如果我用添加替换删除，它将向实体添加一条记录。

只有删除对我来说是一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:07:54.947

首先，您需要获取要删除的实体，然后将其删除，然后将更改保存到 datacontext：

```
var userToRemove = Entity.CompanyRoles.Single(cr => cr.user_role == "Admin");
Entity.CompanyRoles.DeleteObject(userToRemove);
Entity.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:02:12.600

对象是通过引用而不是值进行比较的，因此除非`Entity.CompanyRoles`在内存中包含作为您要删除的对象的确切引用，否则它不会在集合中找到该对象并将其删除。

有两种方法可以修复它。

最好的方法是像[Paul 建议的那样获取对集合中对象的引用](https://stackoverflow.com/a/12676952/302677)

```
var userToRemove = Entity.CompanyRoles.Single(cr => 
    cr.user_role == "Admin" && cr.User_ID = Entity.User_ID);

Entity.CompanyRoles.Remove(userToRemove); 
```

或者另一种有效的方法是覆盖`.Equals()`对象的，如果数据相同，则认为它们相等，而不管内存引用如何。我通常不会推荐这个，除非在特殊情况下，因为它会影响将这个对象的一个​​副本与另一个使用进行比较的任何操作`.Equals()`

```
public override bool Equals(object obj)
{
    if (obj == null || !(obj == MyClass))
        return false; 

    var obj2 = obj as MyClass;

    return obj2.user_role == this.user_role && obj2.User_ID == this.User_ID;
} 
```

# php - 使用 PHP (bool(false)) 从 mssql 存储过程中返回选择语句

> ID：12676883
> 
> 赞同：1
> 
> 时间：2012-10-01T16:02:51.960
> 
> 标签：php, sql-server, stored-procedures

我正在使用 php 来使用 mssql 存储过程，我的代码可以与其他存储过程一起使用，但是当我尝试从这个存储过程中返回一些东西时，它只返回 bool(false) 而不是选定的值。

```
 $para = array(array($this->Forename), array($this->Surname), );  
    $result = mssqldb::query("{call usp_NewCustToOrderRemote(?,?)}", $para);  
    $userid = sqlsrv_fetch_array($result);  var_dump($userid); 
```

存储过程基本上只是插入参数然后选择新的行id

```
 set     @newID = @@IDENTITY
    select @newID 
```

我无法控制存储过程，因此无法添加返回值。当我在管理工具中运行存储过程时，它运行良好，当我在 php 中运行时，会创建行。哦，我的 db 连接器类没有使用 mssql 但 sqlsrv 它只是命名不正确。我错过了一些非常明显的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:38:25.987

由于我的存储过程更新了一行，然后返回了“选择”，我不得不使用转到下一个结果，因为第一个结果是更新的行。

```
 sqlsrv_next_result($result);
    $id = sqlsrv_fetch_array($result)[0]; 
```

我也添加了验证:)

# objective-c - Apple Mach-O 链接器错误 lxml

> ID：12676885
> 
> 赞同：9
> 
> 时间：2012-10-01T16:02:57.280
> 
> 标签：objective-c, ios, xcode

我刚刚将 xcode 升级到 4.5，现在编译时出现错误：

```
ld: library not found for -lxml2.2.7.3
cland: error: linker command failed with exit code 1 
```

升级后我没有更改我的代码......所以？

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-15T08:15:58.227

单击您的项目☞ 目标☞ 构建阶段☞ 将二进制文件与库链接
然后删除`lxml2.2.7.3.dylib`和添加`lxml2.dylib`（如果您的项目不依赖于该库的特定版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-05T15:29:47.747

对于我的 ionic 项目，我发现打开 .xcworkspace 而不是 .xcodeproj 解决了这个问题

# iphone - UIViewController Edit button status always same

> ID：12676892
> 
> 赞同：4
> 
> 时间：2012-10-01T16:03:34.887
> 
> 标签：iphone, objective-c, ios, uitableview, uiviewcontroller

I added an Edit button to Navigation bar in my app.

I have a UIViewController which implements UITableViewDataSource and UITableViewDelegate.

I added the UITableView using storyboards and made connections to data source and delegate.

I did like this in implementation file of the view controller:

```
self.navigationItem.rightBarButtonItem = self.editButtonItem;
[self.editButtonItem setAction:@selector(setEditing:animated:)]; 
```

and

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    DLog(@"Editing = %d", editing)
    NSLog(editing ? @"Yes" : @"No");

    [self.recentSearchList setEditing:editing animated:YES];
} 
```

The problem is that whenever I tap on Edit button, the BOOL variable "editing" is always "YES". And for the first it sets the UITableView to editing mode but the Edit button still shows "Edit" label instead of "Done". And the since the parameter is always YES, the table view is never set to normal mode.

I read from an Answer in here: [UITableView in edit mode - 'Edit' button doesn't change status](https://stackoverflow.com/questions/5365074/uitableview-in-edit-mode-edit-button-doesnt-change-status)

I am assuming the Edit button should change its state itself on tapping. And the parameter in the overridden method should also toggle.

I can write code of my own to set flags in the UIViewController to check the mode and toggle the tableView accordingly but I am assuming that there must be some other way.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T10:10:34.550

From the documentation

![enter image description here](../Images/1e26f3902cc5013f18de629c5557752a.png)

Also remove the line `[self.editButtonItem setAction:@selector(setEditing:animated:)];`

The `editButtonItem` gets implicitly associated with the method `- (void)setEditing:(BOOL)editing animated:(BOOL)animated`.

So you just gotta override that method and call super's implementation at the top as the documentation says.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:13:49.187

I think if you look more closely you will see that editing is actually a reference to the control itself.

When you call setAction on a UIControl ( your right button in this case ) your target can have one of the following signatures.

```
- (void)action
- (void)action:(id)sender
- (void)action:(id)sender forEvent:(UIEvent *) 
```

You have to handle edit mode within this method separately.

# selenium - selenium 验证由 AJAX 填充的 html 表中的文本

> ID：12676894
> 
> 赞同：2
> 
> 时间：2012-10-01T16:03:47.520
> 
> 标签：selenium

我正在使用 Selenium 的 FireFox WebDriver。我有一个通过 AJAX 加载的窗口，因此我的测试不一致。

我可以在线程上延迟 3 秒，它每次都有效。我所做的只是检查一行的存在。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:08:57.493

据推测，您的 Selenium 测试应该模拟使用该站点的人，因此您为规避人类会做的事情（坐着等待）所做的任何事情都可能导致错误的结果。在这种情况下，我认为在 AJAX 加载（或失败）然后报告该延迟时添加延迟没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:13:30.390

最好的方法（恕我直言）是使用流利的等待。无论如何，您都有所需元素的定位器（xpaths 或 css 选择器等）并将定位器传递给 fluentWait 函数，您将获得所需的 Web 元素进行交互。 `fluentWait`功能代码如下：

```
public WebElement fluentWait(final By locator){
        Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
                .withTimeout(30, TimeUnit.SECONDS)
                .pollingEvery(5, TimeUnit.SECONDS)
                .ignoring(NoSuchElementException.class);

        WebElement foo = wait.until(
new Function<WebDriver, WebElement>() {
            public WebElement apply(WebDriver driver) {
                        return driver.findElement(locator);
                }
                }
);
                           return  foo;              }     ; 
```

需要注意的是，*每个 FluentWait 实例都定义了等待条件的最长时间，以及检查条件的频率。此外，用户可以将等待配置为在等待时忽略特定类型的异常，例如在页面上搜索元素时的 NoSuchElementExceptions。(c)selenium API 文档*

因此，您可以设置
*.pollingEvery(1, TimeUnit.SECONDS)*
并在此间隔期间验证您的 AJAX 是否返回。

一些关于流利等待的添加信息你可以[在这里阅读](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html)

认为

```
String cssLocator=...blablabla..  // is the css of the table row 
```

你传递给函数：

```
 WebElement firstRow= fluentWait(By.cssSelector(cssLocator)); 
```

并以这种方式获得表格的第一行。

希望你现在清楚了）

# wordpress - Wordpress 标签自动关闭

> ID：12676902
> 
> 赞同：1
> 
> 时间：2012-10-01T16:04:21.447
> 
> 标签：wordpress, tags, wordpress-theming

Wordpress 更正了帖子和模板特定文件中的 html 标记。我正在开发一个模板，我想要实现的是在`<a href"#"></a>`标签中包装一个 div。

在放置 foreach 循环之前，然后再添加一些 php 和 html 标记，然后在 foreach 循环结束之前粘贴到结束标记中。wordpress 的作用是在 href 字符串标签之后自动添加结束标签，删除正确放置的结束标签，使链接为空。

他是我输入的内容：

```
 <li <?php if (get_option('square_portfolio_filter') != "true") { ?> data-id="id-<?php echo $count; ?>" data-type="<?php foreach ($terms as $term) { echo strtolower(preg_replace('/\s+/', '-', $term->name)). ' '; } ?>" <?php ; } ?>>
<a href="#">
    <div class="thumbs-animate">
        <?php
        if ( has_post_thumbnail() ) {
        the_post_thumbnail(array(255,191), array('title' => ''.get_the_title().''));
        }
        ?>  
        <div class="details">
            <h5><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h5>
            <p><?php content('15'); ?></p>
            <a href="<?php the_permalink(); ?>">
            <?php 
            if(get_option('square_view_project_link')!="") {
            echo get_option('square_view_project_link');
            }else {
            _e( 'View Project', 'square_lang' ); 
            }                                       
            ?>

        </div>
    </div>
</a>
</li> 
```

这是 Wordpress 最终保存的内容：

```
 <li <?php if (get_option('square_portfolio_filter') != "true") { ?> data-id="id-<?php echo $count; ?>" data-type="<?php foreach ($terms as $term) { echo strtolower(preg_replace('/\s+/', '-', $term->name)). ' '; } ?>" <?php ; } ?>>
<a href="#"></a>
    <div class="thumbs-animate">
        <?php
        if ( has_post_thumbnail() ) {
        the_post_thumbnail(array(255,191), array('title' => ''.get_the_title().''));
        }
        ?>  
        <div class="details">
            <h5><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h5>
            <p><?php content('15'); ?></p>
            <a href="<?php the_permalink(); ?>">
            <?php 
            if(get_option('square_view_project_link')!="") {
            echo get_option('square_view_project_link');
            }else {
            _e( 'View Project', 'square_lang' ); 
            }                                       
            ?>

        </div>
    </div>
</li> 
```

我使用一些javascript代码暂时解决了这个问题，但它既不是好的做法也不是我想要的：

```
onclick="location.href='<?php the_permalink();?>';" style="cursor:pointer;" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T00:16:23.483

只是想评论一下，在 HTML 5 中将块级元素包装在内联元素中是完全可以的。

`<a href="#"><div>...</div></a>`是有效的 html 5。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T05:03:40.853

`<a href="#"><div>...</div></a>`是无效的 HTML。`div`内联元素 ( ) 内不应该有块级元素( `a`)。WordPress 可能会试图保护您免受这种情况的影响。

我不知道使用`#`as your`href`是实际代码的一部分还是只是为了简化而做的事情，但是如果那是实际代码并且您将一个`onclick`或其他内容附加到，则`a`可以改为将其附加到`div`也可以。

# asp.net-mvc-3 - 基于小型应用项目构建大型 Web 应用程序

> ID：12676908
> 
> 赞同：0
> 
> 时间：2012-10-01T16:04:58.213
> 
> 标签：asp.net-mvc-3, visual-studio, web-services, scalability

我正在构建一个大型 Web 应用程序。我想以这样一种方式构建它，以便我可以为它编写“应用程序”，甚至可能让第三方为它编写应用程序。

我有一个整体式 Web 项目，其中包含视图、控制器和模型。我认为将这些分解为项目会很有用。

我一直在考虑采用如下结构：

*   基本网络
*   应用程序1
    *   App1.Web
    *   App1.业务
    *   应用程序1.Dal
*   应用程序2
    *   App2.Web
    *   App2.业务
    *   App2.Dal

Basic Web 将引用 App1 和 App2。目标是让 Basic Web 有一个稳固的结构，这样就不必经常构建它。

我不确定如何构建这个项目。主要问题是：

*   如何加入多个 web 项目，并将它们加入到一起，即 MasterWeb = BasicWeb + App1.Web + App2.Web。这是一个好主意吗？
*   每个应用程序都有自己的数据库和一组迁移文件吗？
*   每个应用程序都是自己的解决方案吗？（Visual Studio 中的项目组）

我知道这是一个非常笼统的问题，但是我可以阅读哪些文章来帮助我模块化我的项目？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:15:34.353

*   *如何加入多个 web 项目，并将它们加入到一起，即 MasterWeb = BasicWeb + App1.Web + App2.Web。这是一个好主意吗？*
    -- 如果你使用 Maven，它有[maven war 插件](http://maven.apache.org/plugins/maven-war-plugin/overlays.html)，其中一个 WAR 可以依赖于其他 WAR，而消耗其他 WAR 是依赖项

*   *每个应用程序都有自己的数据库和一组迁移文件吗？*
    -- 是的，可能您可以为每个需要的应用程序设置不同的数据库。但是拥有多个数据库会增加跨资源管理事务（XA 事务管理）的工作量。我建议只使用一个数据库和多个模式。

*   *每个应用程序都是自己的解决方案吗？（Visual Studio 中的项目组）*
    ——是的，保持每个应用程序独立可能会更好。

# php - PHP - 通过引用函数参数传递

> ID：12676909
> 
> 赞同：2
> 
> 时间：2012-10-01T16:05:00.507
> 
> 标签：php, function, reference, arguments

> **可能重复：**
> [具有类属性的默认方法参数？](https://stackoverflow.com/questions/3823018/default-method-argument-with-class-property)

我正在编写一个递归函数，只是为了便于使用，我希望函数的第一次调用接受默认参数。该值必须是对象成员变量的地址。请参阅下面的完整代码：

```
class Test{
    public $hierarchy = array( );
    public function addPath( $path, &$hierarchy ){
        $dirs = explode( '/', $path );
        if( count( $dirs ) == 1 ){
            if( is_dir( $path ) )
                $hierarchy[ $dirs[ 0 ] ] = '';
            else
                $hierarchy[ $path ] = '';
            return $hierarchy;
        }
        $pop = array_shift( $dirs );
        $hierarchy[ $pop ] = $this->addPath( 
            implode( '/', $dirs ), $hirearchy[ $pop ] );

        return $hierarchy;
    }
}

$t = new Test( );
$t->addPath( '_inc/test/sgsg', $t->hierarchy );
print_r( $t->hierarchy ); 
```

现在，我想在这里理想地做的是添加一个默认值：

```
public function addPath( $path, &$hierarchy = $this->hierarchy ){ 
```

所以我可以这样称呼它：

```
$t->addPath( '_inc/test/sgsg' ); 
```

但这给了我以下错误：

```
Parse error: syntax error, unexpected '$this' (T_VARIABLE) in tst.php on line 9 
```

我一直在尝试一些没有成功的事情。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:10:12.590

不幸的是，您不能这样做，解析器不（不能！）满足解析函数定义中的变量。

但是，您可以在定义中定义函数`&$hierarchy = null`并使用它`is_null`来查看是否传递了值。（除非您的引用值有时为空，否则您将需要另一种解决方法）

如果`is_null`返回 true 那么你可以分配`$hierarchy = &$this->hierarchy`

* * *

在 PHP 聊天中快速讨论之后，使用`func_num_args()`在这里可能有用。它不计算填充有默认值的参数，因此您可以安全地传递包含`null`引用的变量，并使用此函数来确定值`$hierarchy`是来自传递的参数还是默认值。（感谢@NikiC）

# computer-science - 加入计算机科学研发领域

> ID：12676916
> 
> 赞同：1
> 
> 时间：2012-10-01T16:05:28.307
> 
> 标签：computer-science

我对从事计算机科学研究有着强烈的热情。我作为 Java 软件开发人员工作了 5.2 年。我正在阅读算法和数据结构，以使我的基础在研发方面正确。现在我不知道还有什么可以阅读并使自己具备成为计算机科学家的能力？有哪些公司可以为我提供研究人员的工作？他们对我有什么期望？

我试过谷歌搜索，但它的帮助较少。

我准备好阅读和学习任何东西。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:14:08.630

1）换句话说，我可以说您想攻读博士学位，这是您为想要计算机科学家或博士学位的公司找到的信息较少的原因，因为通常这些人被认为是合格的。

2）但有些公司应聘博士

3）但如果想在学术界工作，那么我建议你去攻读博士学位。

4) 我的最终建议是考虑并在 Google 上搜索需要此类人员的公司，然后最终做出决定

# ruby-on-rails - 使用 Devise 和 token_authenticable 登录 Rails 应用程序：“401 未授权”

> ID：12676917
> 
> 赞同：5
> 
> 时间：2012-10-01T16:05:28.807
> 
> 标签：ruby-on-rails, ruby-on-rails-3, api, authentication, devise

我正在尝试构建一个 API 以使用 Devise 和一个authenticate_token 登录到我的rails 应用程序。我在我的 API 模块中创建了一个 SessionsController 并将以下代码写入 sign_in ：

```
module Api
  module V1
    class SessionsController < Devise::SessionsController

      def create  
        resource = warden.authenticate!(scope: resource_name, recall: "#{controller_path}#new")
        sign_in(resource_name, resource) 
        if current_user  
          if !current_user.authentication_token  
            current_user.reset_authentication_token! 
          end
          render json: {success: true, auth_token: resource.authentication_token, email: resource.email}
        else 
          invalid_login_attempt
        end 
      end

      protected

      def invalid_login_attempt
        warden.custom_failure!
        render json: {success: false, message: "Error with your login or password"}, status: 401
      end
    end
  end
end 
```

问题是当我使用没有任何令牌的登录时，应用程序会引发 401。

```
RestClient.post "http://localhost:3000/api/v1/users/sign_in", {user: {email: "tester@test.biz", password: "FILTERED"}}.to_json, :content_type => :json, :accept => :json 
```

但是，如果我设置了注册方法提供的令牌，它就可以工作：

```
response_json = RestClient.post "http://localhost:3000/api/v1/users/sign_in?auth_token=#{@token}", {user: {email: "tester@test.biz", password: "FILTERED"}}.to_json, :content_type => :json, :accept => :json 
```

那么为什么会这样呢？执行登录时是否可以禁用令牌身份验证过程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T16:23:25.790

当您使用 json 格式时，设计控制器不能开箱即用，您必须执行以下操作之一：

*   删除您的内容类型 => json 和接受 => json 指令
*   将 config.navigational_formats = [:html, :json] 添加到您的设计配置文件
*   重载控制器以处理该格式，因为您需要特定的响应，这很常见

你可以在那里得到一个工作示例[http://jessehowarth.com/devise](http://jessehowarth.com/devise)

# c# - 如何检查包含多个值的 CONTAINS

> ID：12676921
> 
> 赞同：3
> 
> 时间：2012-10-01T16:05:42.883
> 
> 标签：c#, linq

我正在尝试查找包含 2 个或更多区域成员的所有区域，其中搜索词是字符串值。这是我的代码。在 FindCommmonZones 方法中，当我尝试将 Intersect 的结果转换为 ObservableCollection 时，我得到了一个无效转换的运行时。问题是，有没有更好的方法来做到这一点？作为 FindCommonZones() 参数的字符串数组可以是任意数量的字符串。StackOverflow 有其他一些类似的帖子，但没有一个真正回答我的问题 - 看起来它们都与 SQL 有关。

一些代码：

```
public class Zone
{ 
    public List<ZoneMember> MembersList = new List<ZoneMember>();
    private string _ZoneName;
    public string zoneName{ get{return _ZoneName;}  set{_ZoneName=value;} }
        public Zone ContainsMember(string member)
    {
      var contained = this.MembersList.FirstOrDefault(m => m.MemberWWPN.
             Contains(member) || m.MemberAlias.Contains(member));

      if (contained != null) { return this; }
      else { return null; }

    }

}

 public class ZoneMember
    // a zone member is a member of a zone
    // zones have ports, WWPNs, aliases or all 3
{
    private string _Alias = string.Empty;
    public string MemberAlias {get{return _Alias;} set{_Alias = value; } }
    private FCPort _Port = null;
    public FCPort MemberPort { get { return _Port; } set { _Port = value; } }
    private string _WWPN = string.Empty;
    public string MemberWWPN { get { return _WWPN; } set { _WWPN = value; } }
    private bool _IsLoggedIn;
    public bool IsLoggedIn { get { return _IsLoggedIn; } set { _IsLoggedIn = value; } }
    private string _FCID;
    public string FCID {get{return _FCID;} set{ _FCID=value; } }
}

private ObservableCollection<ZoneResult> FindCommonZones(string[] searchterms)
    {

        ObservableCollection<ZoneResult> tempcollection = 
          new ObservableCollection<ZoneResult>();
        //find the zones for the first search term
        tempcollection = this.FindZones(searchterms[0]);

        //now search for the rest of the search terms and compare 
         //them to existing result
        for (int i = 1; i < searchterms.Count(); i++ )
        {  
           // this line gives an exception trying to cast
           tempcollection = (ObservableCollection<ZoneResult>)tempcollection.
             Intersect(this.FindZones(searchterms[i]));

        }

        return tempcollection;
    }
    private ObservableCollection<ZoneResult> FindZones(string searchterm)
    // we need to track the vsan where the zone member is found
    // so use a foreach to keep track
    {
        ObservableCollection<ZoneResult> zonecollection = new ObservableCollection<ZoneResult>();
        foreach (KeyValuePair<int, Dictionary<int, CiscoVSAN>> fabricpair in this.FabricDictionary)
        {
            foreach (KeyValuePair<int, CiscoVSAN> vsanpair in fabricpair.Value)
            {
                var selection = vsanpair.Value.ActiveZoneset.
                           ZoneList.Select(z => z.ContainsMember(searchterm)).
                               Where(m => m != null).OrderBy(z => z.zoneName);
                if (selection.Count() > 0)
                {

                    foreach (Zone zone in selection)
                    {
                        foreach (ZoneMember zm in zone.MembersList)
                        {
                            ZoneResult zr = new ZoneResult(zone.zoneName, 
                            zm.MemberWWPN, zm.MemberAlias, vsanpair.Key.ToString());
                            zonecollection.Add(zr);
                        }

                    }

                }
            }

        }
        return zonecollection;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:15:23.740

`Intersect`实际上是`Enumerable.Intersect`并且正在返回一个`IEnumerable<ZoneResult>`. 这不能转换为*ObservableCollection*，因为它不是一个 - 它是两个集合中相交元素的枚举。

但是，您可以从枚举中创建一个*新的 ObservableCollection：*

```
tempcollection = new ObservableCollection<ZoneResult>(tempcollection
    .Intersect(this.FindZones(searchterms[i])); 
```

根据您拥有的元素数量、`ZoneResult.Equals`实现方式以及您期望的搜索词数量，此实现可能可行，也可能不可行（`FindZones`乍一看 O(n^4) 似乎有点过于复杂）。如果它似乎是资源消耗或瓶颈，那么是时候优化了；否则，如果它有效，我会不理它。

* * *

一个建议的优化可能如下（结合@Keith 建议更改`ContainsMember`为布尔值） - 虽然它未经测试，但我的 SelectManys 可能有误，而且它实际上在很大程度上等同于同一件事，希望你能明白：

```
private ObservableCollection<ZoneResult> FindCommonZones(string[] searchterms)
{

    var query = this.FabricDictionary.SelectMany(fabricpair => 
        fabricpair.Value.SelectMany(vsanpair => 
            vsanpair.Value.ActiveZoneSet.ZoneList
            .Where(z=>searchterms.Any(term=>z.ContainsMember(term)))
            .SelectMany(zone => 
                zone.MembersList.Select(zm=>new ZoneResult(zone.zoneName, zm.MemberWWPN, zm.MemberAlias, vsanpair.Key.ToString()))
        )
    )
    .Distinct()
    .OrderBy(zr=>zr.zoneName);

    return new ObservableCollection<ZoneResult>(query);
} 
```

# asp.net-mvc - ViewData、ViewBag、Session、TempData 的正确时间是什么时候

> ID：12676924
> 
> 赞同：45
> 
> 时间：2012-10-01T16:06:03.610
> 
> 标签：asp.net-mvc, session-variables

我正在编辑一个项目，我在一个控制器方法中看到了 Session[""]，在另一个控制器方法中看到了 TempData[""]。4 之间是否有区别，或者只是 4 种方法来做同样的事情。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-10-01T16:10:01.713

*   **ViewData/ViewBag** - 仅在当前请求期间有效。
    您在控制器操作中设置它并在视图中使用它，然后它就会消失。
    不同之处在于第一个是字典，而第二个只是`dynamic`该字典的包装器。
    两者都指向相同的数据。
    ViewBag 是在 ASP.NET MVC 3 中引入的。

例子：

```
public ActionResult Index()
{
    ViewData["foo"] = "bar";
    return View();
} 
```

在视图中，您可以使用此值：

```
<div>@ViewData["foo"]</div> 
```

与 ViewBag 相同，但它是动态的：

```
public ActionResult Index()
{
    ViewBag.foo = "bar";
    return View();
} 
```

在视图中，您可以使用此值：

```
<div>@ViewBag.foo</div> 
```

如您所见，与使用视图模型的经典和推荐方式相比，ViewData/ViewBag 只是从控制器操作向视图传递信息的另一种方式：

```
public class MyViewModel
{
    public string Foo { get; set; }
} 
```

进而：

```
public ActionResult Index()
{
    var model = new MyViewModel { Foo = "bar" };
    return View(model);
} 
```

在您的强类型视图中：

```
@model MyViewModel
<div>@Html.DisplayFor(x => x.Foo)</div> 
```

正如您所看到的，使用视图模型提供了一种强类型的方法，可以将信息从控制器操作传递到视图。

*   **TempData** - 它允许在单个后续请求的持续时间内保留信息。您将某些内容存储在 TempData 中，然后重定向。在您重定向到的目标控制器操作中，您可以检索存储在 TempData 中的值。

例子：

```
public ActionResult Foo()
{
    TempData["foo"] = "bar";
    return RedirectToAction("bar");
}

public ActionResult Bar()
{
    var value = TempData["foo"] as string;
    // use the value here. If you need to pass it to the view you could
    // use ViewData/ViewBag (I can't believe I said that but I will leave it for the moment)
    return View();
} 
```

`TempData`ASP.NET MVC 将自动使您读取存储的值过期。在幕后 ASP.NET MVC 将信息保存到`Session`.

*   **会话**- 与 TempData 相同，只是它永不过期 - 它对所有请求都有效，而不是单个重定向。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-16T11:40:41.690

ASP.net MVC 引入了**ViewData、ViewBag、TempData、Session**来在控制器之间传递数据给视图。

**查看数据**

ViewData 是通过使用存储在**CurrentRequestContext中的****ViewDataDictionary**类来实现的。因此，ViewData 生命周期将在当前请求结束时结束。

 ****ViewBag**也类似于 ViewData，唯一的区别是它可以使用动态对象动态共享数据。

**TempData**是一个非常短暂的实例，你应该只在**当前**和**后续**请求期间使用它。如果你想在 ASP.net MVC 中使用 Redirections(RedirectToAction, RedirectToRoute, Redirect) 并传递一些数据，这将很方便在重定向之间。TempData 将数据存储在 Session 中，但框架会在当前和后续请求结束时处理数据。

**会话**是属于用户会话的长期（永不过期）数据。使用会话变量时需要注意，这很容易导致问题。

```
protected void Session_Start(Object sender, EventArgs e) 
{
   int userType = 1;
   HttpContext.Current.Session.Add("_SessionUserType",userType );
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-21T06:46:15.690

查看数据：

*   是继承自的特殊字典`ViewDataDictionary`。
*   用于将数据从控制器发送到视图。
*   它的生命周期是当前的请求。
*   如果你有它会被销毁`Redirect`。
*   出于安全原因，最好`null`在使用前检查它。
*   应为操作进行铸造。

查看包：

*   是动态类型（此类型在 c#4 中呈现）。

*   Like`ViewData`用于将数据从控制器发送到视图。

*   其值在当前请求中的有效期。
*   在页面之间的重定向中，其值为空。
*   使用前出于安全原因，请检查`null`.
*   **铸造不是必需**的，所以它比`ViewData`.

临时数据：

*   一种特殊的字典，源自`TempDataDictionary`.
*   它的**生命周期很短**，用于在页面之间发送信息（`Redirect`）。
*   完全渲染`View`后，其值为`null`.
*   使用前出于安全原因，请检查`null`.
*   应为操作进行铸造。

会议：

*   用于在不同请求之间发送信息。
*   它的值不是`null`非空值；除非经过一段时间（`session expire`）。
*   使用前出于安全原因，请检查`null`.
*   应为操作进行铸造。

[本文](http://www.dotnettricks.com/learn/mvc/viewdata-vs-viewbag-vs-tempdata-vs-session)解释了 ViewData、ViewBag 和 TempData 之间的区别。我希望你可以参考这篇文章来满足你的需要。**

# excel - Excel循环引用不存在的工作表？

> ID：12676925
> 
> 赞同：0
> 
> 时间：2012-10-01T16:06:08.417
> 
> 标签：excel, circular-reference, worksheet

我无法找到循环引用错误所在的工作表。循环引用工具栏显示错误位于 LOG!C$C$41。但是此工作簿中没有名为 LOG 的工作表！它不在工作表选项卡中，也没有隐藏。帮助！

# php - PHP - 单击提交按钮时，回显结果仅回显来自第一个结果的电子邮件地址

> ID：12676928
> 
> 赞同：0
> 
> 时间：2012-10-01T16:06:21.610
> 
> 标签：php, mysql, database, echo

我有一个脚本，它根据数据库查询在表格中显示广告，每个广告都有一个提交按钮，当单击提交按钮时，它会将您带到另一个页面，该页面会根据您单击的广告的用户名回显相应的详细信息，但是当有多个广告时，它只显示第一个广告的详细信息。有没有办法分配一个唯一的 ID 或其他东西，以便在单击特定广告的提交按钮时响应相应的详细信息，而不仅仅是第一个？

这是回显代码：

```
echo "<div id='expanderContent' style='display:none'>
        <div class='reasonbar'>
          <div class='prod-title1' style='width: 70%;'>" . 
            $row['lname'] . 
          "</div>
          <div class='reason1' style='width: 29%;'>
            Category:<br /> ". 
            $row['category'] . 
          "</div>
        </div>";

echo "<div class='reasonbar'>
        <div class='prod-title2' style='width: 70%;'>
          <form action='adclick.php' method='post'>
            <input type='hidden' name='username' value='" . $row['username'] . "'/>
            <input type='submit' name='submit' value='Submit'>
        </div>
        <div class='reason2' style='width: 29%;'>
        </div>
      </div
    </div>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:09:19.393

首先，你没有在那个回声中关闭你的表单标签。其次，如果检索到多个结果（多个广告），您是否有任何类型的循环来遍历多个结果？

# git - 不要将合并冲突提交包含在 git push 中

> ID：12676930
> 
> 赞同：1
> 
> 时间：2012-10-01T16:06:24.183
> 
> 标签：git

当我解决冲突时，除了我所做的“真正的提交”之外，我还有一个合并提交。它看起来如下：

```
Merge branch 'master' of http://myDomain.com/git/SIMULATOR 
```

将它压缩到我的“真正提交”中的最佳方法是什么，以便在将它推送到服务器时我只有一个提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:08:13.790

```
git fetch origin
git rebase master origin/master
git push origin master 
```

PS。读`man git-rebase`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:06:05.637

如果有一个现有的合并提交，您可以使用`git rebase`defuz 的回答，但您将不得不再次解决冲突。

否则，用于`git merge --squash`将合并引入的更改压缩到单个提交中。解决冲突（如果有），然后运行`git commit`​​.

# java - 新的 Rengine(...); 没有错误地失败

> ID：12676933
> 
> 赞同：4
> 
> 时间：2012-10-01T16:06:48.927
> 
> 标签：java, eclipse, r, rjava, jri

我正在尝试在 Windows 7 x64 系统上使用 Eclipse 设置 JRI。我在笔记本电脑上尝试过一次，它成功了。现在在我的桌面上它失败了，尽管 R、rJava 和 JRI 安装的所有内容都完全相同。

我将 JRI 和 R 路径正确设置为： `C:\Program Files\R\R-2.15.1\library\rJava\jri;C:\Program Files\R\R-2.15.1\bin\x64`

我也在 E​​clipse 中设置`R_DOC_DIR`了等。

每次我尝试运行`new Rengine(...);`它都会失败，没有任何错误或异常。调试显示：`<terminated, exit value: 10>C:\Program Files\Java\jre6\bin\javaw.exe (01.10.2012 18:00:31)`

有什么我可以尝试的吗？尽管到处都有相同的设置，但它在我的笔记本电脑上工作但在我的工作站上却不能工作，这真的让我很困扰。

编辑：用于获取 Rengine 对象的代码。

```
public static Rengine getRengine(){
    if (re == null) createRengine();
    return re;
}

public static void createRengine(){
    if (re!=null) return;
    try{
        if (!Rengine.versionCheck()) {
            System.err.println("** Version mismatch **");
            System.exit(1);
        }  
        String[] arguments = {"--save"};
        re=new Rengine(arguments, false, null);
        if (!re.waitForR()) {
            System.out.println("Cannot load R");
            return;
        }
    }
    catch (Exception e){
        e.printStackTrace();
    }
} 
```

编辑：我最后一次尝试它时收到一条错误消息（创建 REngine 工作，这以前从未发生过），R 缺少一个注册表项。再次安装 R 2.15.1 后，它突然起作用了。现在重启后就和以前一样了。程序在创建 REngine 时崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:36:15.503

我遇到了完全相同的问题。事实证明，我没有选中要求使用 R 版本号创建注册表项的框。一旦我让安装程序在选中该框的情况下运行，它似乎就可以工作了。

我会确保你的 regedit 看起来像这样： ![regedit 的截图](../Images/e287ea0ae1ccb8be4d1891174837e1be.png)

下一步：让它以便携的方式工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-15T23:26:37.543

我在 Windows 10 x64 上使用 R 3.2.2 和 eclipse Mars。

我今天遇到了所描述的问题并尝试了一些。最后，我在构建路径中找到了根本原因。请检查是否满足以下条件：

1.) 硬盘上 JIRI 文件夹中的以下 Java 库应包含为（用户）库：

*   JIRI.jar
*   REngine.jar
*   JRIEngine.jar

2.) 对于 x86，原生库**jiri.dll**位于子文件夹“i386”中，而对于 x64，它位于子文件夹“x64”中。相关的应作为单独**的本地库位置**添加到 eclipse 项目的 Java 构建路径中。否则，该文件可能不会被视为不位于主 JIRI 文件夹中。

此致

菲利普

# sql-server-2008 - 如何在sql server中获得一行的平均值

> ID：12676936
> 
> 赞同：0
> 
> 时间：2012-10-01T16:06:52.580
> 
> 标签：sql-server-2008

我在 sql 中有一个存储过程，它给了我一些列的平均值：

```
ALTER PROCEDURE [dbo].[Financial] 

AS
BEGIN
    select avg([aa ]) as 'aaa',
    avg([bb]) as 'bbb',
    avg([cc ]) as 'ccc',
    avg([dd]) as 'ddd',
    avg([ee]) as 'eee',
    avg([ ff]) as 'fff'
from [FIN]
END 
```

现在我的问题是如果我想为这个过程的结果给出平均值，我该怎么办？你知道这个过程的结果是一行，现在我想获得这一行的平均值。我应该在我目前的程序中添加什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:11:33.547

您可以使用子查询：

```
select ([aaa]+[bbb]+[ccc]+[ddd]+[eee]+[fff])/6 as avg from
(select avg([aa ]) as 'aaa',
    avg([bb]) as 'bbb',
    avg([cc ]) as 'ccc',
    avg([dd]) as 'ddd',
    avg([ee]) as 'eee',
    avg([ ff]) as 'fff'
from [FIN]) sub; 
```

# validation - JSF：在没有自定义消息的情况下从验证消息中删除客户端 ID（标签、组件 ID）

> ID：12676939
> 
> 赞同：5
> 
> 时间：2012-10-01T16:07:07.417
> 
> 标签：validation, jsf, bean-validation

我有以下代码：

```
<h:inputText id="it-date" value="#{myBean.myDate}">
    <f:convertDateTime pattern="MM/dd/yyyy"/>
</h:inputText>
<h:message for="it-date" /> 
```

当我输入 date`02/30/2012`时，我收到以下消息：

```
j_idt5:it-date: '02/30/2012' could not be understood as a date. Example: 10/01/2012 
```

是否可以删除`j_idt5:it-date:`包括冒号*并*保留 Java 的默认消息？

我已经尝试使用属性`label`，但是冒号仍然存在。我不想使用自定义消息，因为默认消息已经国际化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:39:23.303

我想你需要在消息处理之间以某种方式删除冒号，因为它是消息的固定部分。

签出消息属性文件，例如：http: [//grepcode.com/file/repo1.maven.org/maven2/com.sun.faces/jsf-api/2.1.7/javax/faces/Messages.properties](http://grepcode.com/file/repo1.maven.org/maven2/com.sun.faces/jsf-api/2.1.7/javax/faces/Messages.properties)

在这种情况下，特定的消息/属性将是：javax.faces.converter.DateTimeConverter.DATE={2}: ''{0}'' 不能被理解为日期。

检查 . 之后的固定冒号`{2}`。如果您想摆脱它但保留实际消息，则需要某种方式在消息处理之间进行。

Mabye 这个来自[BalusC](https://stackoverflow.com/users/157882/balusc)的答案是一个选项： [FacesMessage listener](https://stackoverflow.com/questions/8413908/facesmessage-listener)

# sql - 来自动态 SQL 的 SQL 输出

> ID：12676940
> 
> 赞同：0
> 
> 时间：2012-10-01T16:07:09.367
> 
> 标签：sql, sql-server

我有一个关于输出的愚蠢问题。我有一个存储过程，它内部正在执行动态 SQL 来检查表中是否有记录，这就是示例：

```
SET @sqlLog = 
    'SELECT 1 FROM MyTable 
      WHERE TableName = ''' + @TableName + '''' + '
        AND TheKey = ''' + convert(varchar(50), @LoadGuid) + ''''                                    
EXEC(@sqlLog) 
```

之后，我使用 @@RowCount 来验证结果是否为 0。

问题是在 WHILE 内，并且每一行都在 SQL Management Studio 的输出窗口中显示结果，我真的不想要这个。任何的想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:11:10.733

如果您只需要知道查询产生的行数，请尝试将选择列表更改为 only `'SELECT COUNT(*) FROM MyTable ... '`。这将为您提供单个结果的计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:11:11.530

```
declare @count int

exec sp_executeSql 
    N'set @count = (select count(*) from MyTable where TableName = ''' + @tableName + '''
    and TheKey =  ''' + convert(varchar(50), @LoadGuid) + '''',
    N'@count int output',
    @count = @count output

if @count > 0
    print 'rows exist'
else
    print 'no rows' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T16:17:54.137

我认为您需要使用 NOCOUNT 选项：

```
SET NOCOUNT ON 
```

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ms189837.aspx](http://msdn.microsoft.com/en-us/library/ms189837.aspx)。

祝你好运，

戴夫·切尔卡斯基

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T16:21:19.110

为什么你甚至需要动态 SQL？，你可以做如下的事情：

```
IF EXISTS ( SELECT 1 FROM MyTable 
            WHERE TableName = @TableName 
            AND TheKey = convert(varchar(50), @LoadGuid))
BEGIN
    -- Your logic here
END 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T16:40:50.980

没有办法让它抑制像这样的直接选择语句的结果。您实际上是在告诉它将这些结果返回给调用应用程序，这里是 SSMS，它正在这样做。SSMS 正在正确显示这些结果。您有一些关于如何显示它们的选项（结果窗格或文本等），但我不知道 SSMS 中有一个选项可以将其关闭。

您可以做的是将[sp_executesql](http://technet.microsoft.com/en-us/library/ms188001.aspx)与输出参数一起使用，这样您就无需请求任何结果，而只需将行数放入参数中即可。这看起来像：

```
declare @theCount int

SET @sqlLog =       'SELECT @theCount = count(*)  
  FROM MyTable         
  WHERE TableName = ''' + @TableName + '''' + 
  '          AND TheKey = ''' + convert(varchar(50), @LoadGuid) + ''''            

EXEC sp_executesql @sqlLog, N'@theCount int OUTPUT', @theCount=@theCount OUTPUT 
```

然后检查@theCount 的值是否为0 而不是@@Rowcount。

# java - 用于在基于 Web 的应用程序和旧版桌面应用程序之间共享数据的剪贴板替代方案

> ID：12676943
> 
> 赞同：0
> 
> 时间：2012-10-01T16:07:21.723
> 
> 标签：java, web-applications, legacy

我下午一直在思考这个问题，但还没有找到最理想的解决方案，所以我想看看其他人的想法..

有一个旧版 Win16 应用程序必须进行修改（以最少的努力）才能与基于 Web 的应用程序进行通信。

这个想法是这样的，在 Win16 应用程序中，用户将想要查找特定代码，因此他们将单击一个按钮，然后该按钮将启动浏览器并允许他们导航一组特定的页面，直到他们找到他们想要的结果欲望，然后他们可以选择按选择或取消。

按 Select 应该将一个小字符串传回应用程序（大约 10 个字符）并关闭浏览器。Cancel 也会将 Cancel 消息发送回应用程序并再次关闭浏览器窗口。

由于 Win16 应用程序无法调用 Web 服务，因此我在实现中看不到很多可用的选择，所以我正在考虑使用剪贴板，但这并非没有问题。

我希望还有其他我没有想到的替代方案，

一如既往 - 所有建议表示赞赏。

谢谢，

# c# - 在 C# 中修改 LinkedListNode 属性

> ID：12676946
> 
> 赞同：2
> 
> 时间：2012-10-01T16:07:28.443
> 
> 标签：c#, list, properties, linked-list

我正在使用 C# 中的 LinkedList。我要做的只是一个简单的代码，将 B 从列表中排除并直接将节点 A 与 B.Next 连接：

```
A.Next = B.Next;
B.Next.Previous = A; 
```

但出现错误：

> 属性或索引器 System.Collections.Generic.LinkedListNode<>.Next 不能分配给它是只读的。

是否有可能以某种方式获得为 Next 和 Previos 属性分配值的权利？或者我怎样才能避免这个错误？此致。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T16:09:46.497

您只需调用[`LinkedList<T>.Remove`](http://msdn.microsoft.com/en-us/library/43ttx77w.aspx)并传入`B`. [Remove](http://msdn.microsoft.com/en-us/library/43ttx77w.aspx)方法会为您解决这个问题。

# iphone - 如何修改核心数据索引处的特定对象

> ID：12676949
> 
> 赞同：0
> 
> 时间：2012-10-01T16:07:38.130
> 
> 标签：iphone, ios, core-data

对不起，如果这个问题很简单，但我是 coredata 世界的新手。我有当前的项目，有人已经在其中植入了 coredata。我想知道如何修改核心数据中特定索引处的特定对象？我需要遵循哪些步骤。

感谢您的帮助，并对愚蠢的问题感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:05:51.640

在最简单的形式中，它看起来像这样：

```
NSFetchRequest *fetch = [NSFetchRequest fetchRequestWithEntityName:￼@"Entity"];
fetch.predicate = [NSPredicate predicateWithFormat:@"attribute = %@"￼, value￼];
NSArray *fetchedObjects = [self.managedObjectContext executeFetchRequest:fetch 
                           error:nil];
NSManagedObject *obj = [fetchedObjects objectAtIndex:0]; 
```

这仅在至少有一个提取结果时才有效。您必须进行通常的错误检查等。

我同意其他人的观点，您应该使用[Core Data Programming Guide](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/cdProgrammingGuide.html)阅读。

# ios5 - 我如何知道点击了哪个标注？

> ID：12676958
> 
> 赞同：0
> 
> 时间：2012-10-01T16:08:00.563
> 
> 标签：ios5, xcode4.2, mkmapview, mkannotationview

我在尝试确定单击了哪个标注气泡时遇到了很多麻烦。

有没有一种方法可以识别标注气泡，因为我在这里尝试了许多示例，但是因为我对 Objective CI 很陌生，似乎无法弄清楚如何使用它们。

我一直在尝试使用以下答案，但我对它们感到困惑

[如何跟踪单击了哪个注释标注](https://stackoverflow.com/questions/11080275/how-to-track-which-annotation-callout-clicked)

我正在考虑标记注释，但这甚至让我感到困惑。:(

取自上述链接中的第二个答案：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{

if ([annotation isKindOfClass:[MKUserLocation class]]){
    return nil;

    if(annotation.tag == 111)
        //Do something
    else
        //Do some other thing
} 
```

这个片段的第一部分是如何工作的，也许如果我能更好地理解它，我就会知道我正在使用什么。

另外，当单击标注时，我将如何检索标签，以便我可以使应用程序分别响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:42:37.753

您可以将 MKPinAnnotationView 子类化，以便在何时识别它

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKPinAnnotationView *)view 
```

叫做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T07:52:51.367

您必须创建扩展 MKAnnotation 的类并创建一些属性，如标签并分配唯一值或标签并添加到 mapview 中。

```
Place* home = [[Place alloc] init] ;
home.name = [dForMap valueForKey:@"shortaddress"];
home.latitude = [[dForMap valueForKey:@"latitude"]floatValue];
home.longitude = [[dForMap valueForKey:@"longitude"]floatValue];
home.description = [dForMap valueForKey:@"shortaddress"];
home.flierid = count;
PlaceMark* from = [[PlaceMark alloc] initWithPlace:home] ;
from.flierid = count;
from.mapAnnotationType = MapAnnotationTypeProperty;    
[self addAnnotation:from]; 
```

单击标注气泡时，您可以像这样检查 didSelectAnnotationView 方法中的属性。

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{
PlaceMark *a = (PlaceMark*)view.annotation;
Place *test = a.place;
int tag = test.flierid;
} 
```

谢谢。

# android - Android Core.inRange 错误和 APP 崩溃上的 OpenCV

> ID：12676961
> 
> 赞同：0
> 
> 时间：2012-10-01T16:08:04.667
> 
> 标签：android, opencv

我在 Android 上使用 OpenCV。但功能：

```
Core.inRange(img, new Scalar(127, 127, 127), new Scalar(127, 127, 127), img); 
```

在第二次调用“致命信号 8 (SIGFPE) at 0x00002a01 (code=0)”时崩溃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:35:13.337

那次崩溃不应该发生，可能是一个错误。

但我认为用相同的值设置下限和上限没有意义，您应该选择一些有意义且在**img**维度内的值。

还要确保**img**或您在最后一个参数中使用的任何 Mat 类型为 CV_8U。

# linux - scp 从多个目录下载多个文件

> ID：12676963
> 
> 赞同：0
> 
> 时间：2012-10-01T16:08:10.103
> 
> 标签：linux, shell, scp

我第一次使用 linux 工作。我试图弄清楚如何使用 scp 在多个目录中下载具有相同扩展名的多个文件。

例如：

```
/server/directoryA/directoryA1/nameA.txt
/server/directoryA/directoryA2/contactA.txt
/server/directoryA/directoryB1/nameB.txt
/server/directoryB/directoryB2/contactB.txt 
```

我想在一个 scp 命令中下载所有 *.txt 文件。我似乎无法让它工作。

我试过类似的东西：

```
scp user@server:/server/*/*/*.txt . 
```

我也尝试过 -r 但似乎没有用。任何人都可以指出正确的命令语法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:49:47.370

您可以使用 ssh 而不是 scp 来执行此操作：

```
ssh user@server 'find /server/ -name "*.txt" -print0 | xargs -0 tar -cO' | tar -xivf - -C . 
```

这会将所有 *.txt 复制到当前目录“。”，但它也会复制目录结构，因此如果您只想要没有目录结构的 txt 文件，您需要将所有下载的 txt 文件移动到当前目录目录：

```
find -name "*.txt" -print0 | xargs -0 -I {} cp {} . 
```

然后删除空目录结构：

```
rm ./server -r 
```

# ember.js - emberjs ArrayController 在模板中不起作用

> ID：12676965
> 
> 赞同：1
> 
> 时间：2012-10-01T16:08:12.980
> 
> 标签：ember.js

我正在尝试 ember.js，我正在努力将一组项目渲染到模板：

**索引.html**

```
 <script type="text/x-handlebars">
    {{App.test}}
  </script>

  <script type="text/x-handlebars">
    {{#each App.eventsController}}
        <p>{{title}}</p>
    {{/each}}
  </script>

  <!-- le javascript -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.2.min.js"><\/script>')</script>
  <script src="js/libs/handlebars-1.0.0.beta.6.js"></script>
  <script src="js/libs/ember-1.0.pre.min.js"></script>
  <script src="js/app.js"></script>
</body> 
```

**应用程序.js**

```
var App = Em.Application.create({
    test : 'does it work?...'
});

App.Event = Ember.Object.extend({
    title: '',
    body: ''
});

App.eventsController = Ember.ArrayController.create({

    events: [],

    init: function() {

        self = this;
        self.pushObject(App.Event.create({
            title: "Event 1",
            body: "Content"
        }));
    }
}); 
```

第一个绑定 ( `App.test`) 确实可以正常工作。只有我的第二个调用除了将一个空的车把脚本标签放入我的 DOM 之外什么都不做。

那么我在这里错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:00:09.133

如果您覆盖`init`，您需要确保调用`this._super`，以便控制器可以完成其设置过程。完成此操作后，您的代码应该可以按预期工作。

```
init: function() {
    this._super();
    this.get('content').pushObject(App.Event.create({
        title: "Event 1",
        body: "Content"
    }));
} 
```

我已经为你创建了一个 jsfiddle，所以你可以看到它的工作：http: [//jsfiddle.net/qKXJt/188/](http://jsfiddle.net/qKXJt/188/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:10:14.407

您希望将 eventsController 的数据放在“内容”属性中：

```
App.eventsController = Ember.ArrayController.create({
    content: [],

    init: function() {
        this.get('content').pushObject(App.Event.create({
            title: "Event 1",
            body: "Content"
        }));
    }
}); 
```

您的模板 {{#each App.eventsController}} 应该会自动获取更改并显示您的标题。

# javascript - 可以将 JqMobi 用于桌面和移动浏览器吗？

> ID：12676970
> 
> 赞同：1
> 
> 时间：2012-10-01T16:08:22.253
> 
> 标签：javascript, mobile-website, jqmobi

我们有一个在 Jquery 和 Backbone 上运行的站点。

但它在移动设备上相当慢，但我不希望桌面和移动设备有单独的基地。

我想知道 jQmobi 是否也能在桌面上运行良好？我不关心支持IE8及以下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:04:26.713

它只是 webkit，所以如果你只关心 Chrome/Safari，它可以正常工作，但它目前不适用于 FF/Opera/IE。

*   注意（我是首席开发人员。我使用 Chrome 桌面进行开发，然后在设备上进行测试）

# c# - List 中的字符串条件

> ID：12676971
> 
> 赞同：1
> 
> 时间：2012-10-01T16:08:24.093
> 
> 标签：c#

我有一个名为`HomeInfo`

```
public class HomeInfo
{
   public int ID {get;set;}
   public string OwnerName {get;set;}
   public string Address {get;set;}
   public int EstimatedValue {get;set;}
} 
```

我从服务器获取数据并将其添加到`List<HomeInfo> listHomeInfo`

现在在我的 GUI 中，我需要允许根据用户输入过滤结果，所以我的客户想要一个用于估计值的文本框，他想在那里输入文本，如“>30k 和 <50k”或“>50k”，我解析并转换了这些类的值和创建的对象

```
public class ExpressionValue
{
    public float? FirstDigit { get; set; }
    /// <summary>
    /// >, >=, <,<=
    /// </summary>
    public string FirstExpCondition { get; set; }
    /// <summary>
    /// OR, AND
    /// </summary>
    public string ConditionOperator { get; set; }
    public float SecondDigit { get; set; }
    public string SecondExpCondition { get; set; }
} 
```

使用 ExpressionValue 对象，我能够创建适当的条件字符串。现在我可以创建一个条件字符串，例如“EstimatedValue > 30000 AND EstimatedValue < 60000”或“EstimatedValue < 50000”

我不知道如何在“List listHomeInfo”上有效地应用此条件，因为据我所知`List<T>.Where()`不支持字符串条件。我知道一种解决方法是将列表转换为 DataTable 并使用`Select(string expression)`方法然后转换`DataRow[]`为`List<HomeInfo>`，但我认为可能有更好的方法来实现这一点。

[编辑]

我创建了两种方法来帮助我，但我得到了异常“二进制运算符 GreaterThan 没有为类型 'System.Single' 和 'System.Double' 定义。” 创建 BinaryExpression 时。

```
public static Expression<Func<T, bool>> ParseExpressionCondition<T>(string expression, string fieldName)
    {
        try
        {
            string decimalNumRegex = @"\d+(\.\d{1,2})?";
            List<string> matchPatterns = new List<string>() { ">=", ">", "<=", "<" };
            ExpressionValue expValue = new ExpressionValue();
            Dictionary<string, string> conditions = new Dictionary<string, string>();
            var parameter = Expression.Parameter(typeof(T), typeof(T).ToString());
            //var lhs = Expression.GreaterThan(Expression.Property(parameter, "EstimatedValue"), Expression.Constant(30000));
            BinaryExpression lhs = null, rhs = null;
            object objectValue = null;
            string condOperator = null;
            foreach (string pattern in matchPatterns)
            {
                Match match = Regex.Match(expression, pattern + decimalNumRegex);

                if (match.Success)
                {
                    //get digit part
                    double digit = double.Parse(Regex.Match(match.Value, decimalNumRegex).Value);
                    if (!expValue.FirstDigit.HasValue)
                    {
                        objectValue = digit;
                        condOperator = match.Value.Replace(digit.ToString(), "");
                        lhs = GetBinaryExpression(parameter, fieldName, objectValue, condOperator);
                    }
                    else
                    {
                        objectValue = digit;
                        condOperator = match.Value.Replace(digit.ToString(), "");
                        rhs = GetBinaryExpression(parameter, fieldName, objectValue, condOperator);
                    }
                }
            }

            if (expression.ToLower().Contains("and"))
                return Expression.Lambda<Func<T, bool>>(Expression.And(lhs, rhs), parameter);
            else if (expression.ToLower().Contains("or"))
                return Expression.Lambda<Func<T, bool>>(Expression.Or(lhs, rhs), parameter);

            return null;
        }
        catch (Exception ex)
        {
            Logger.WriteLog(ex);
            throw ex;
        }
    }

    private static BinaryExpression GetBinaryExpression(ParameterExpression paraExp, string fieldName, object expressionValue, string conditionOperator)
    {
        try
        {
            BinaryExpression binExp = null;
            MemberExpression expressionLeft = Expression.Property(paraExp, fieldName);
            Expression expressionRight = Expression.Constant(expressionValue );
            switch (conditionOperator)
            {
                case ">":
                    binExp = Expression.GreaterThan(expressionLeft, expressionRight);
                    break;
                case ">=":
                    binExp = Expression.GreaterThanOrEqual(expressionLeft, expressionRight);
                    break;
                case "<":
                    binExp = Expression.LessThan(expressionLeft, expressionRight);
                    break;
                case "<=":
                    binExp = Expression.LessThanOrEqual(expressionLeft, expressionRight);
                    break;
            }
            return binExp;
        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:19:52.780

假设您已经在某种程度上实现了解析逻辑，我建议您生成一个表达式树（而不是使用您自己的自定义`ExpressionValue`类）。

例如 'EstimatedValue > 30000 AND EstimatedValue < 60000' 可以变成如下形式的表达式树：

```
var parameter = Expression.Parameter(typeof(HomeInfo), "homeInfo");
var lhs = Expression.GreaterThan(Expression.Property(parameter, "EstimatedValue"), Expression.Constant(30000));
var rhs = Expression.LessThan(Expression.Property(parameter, "EstimatedValue"), Expression.Constant(60000));
var expression = Expression.Lambda<Func<HomeInfo, bool>>(Expression.AndAlso(lhs, rhs), parameter); 
```

然后可以使用生成的表达式树查询该列表，如下所示：

```
var results = listHomeInfo.AsQueryable().Where(expression); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:16:06.973

不要重新发明轮子：[NCalc](http://ncalc.codeplex.com/)已经做了这种事情。

使用名为的变量`EstimatedValue`和用户定义的表达式`UserExpression`，在 NCalc 中您可以：

```
myList.Where(elem => new Expression(EstimatedValue.ToString() + UserExpression).Evaluate()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T16:16:39.487

在你的位置上，我会创建一个迷你规则引擎。

所以

```
public abstract class ExpressionBase {
 public float value {get;set;}
}

public class GreaterThanExpression : ExpressionBase {}
public class LessThanExpression : ExpressionBase {} 
```

现在，当您解析输入的字符串时，您可以构建输入表达式的列表，然后按照您想要的顺序将它们应用于 IQueryable。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T16:22:59.553

写一个LINQ扩展方法....

```
public static IEnumerable<HomeInfo> PassesExpression(this IEnumerable<HomeInfo> homes, ExpressionValue expression)
{
    foreach(HomeInfo home in homes)
    {
        bool one, two;

        if(expression.FirstExpCondition == '>')
            one = (home.EstimatedValue > expression.FirstDigit);
        else if(expression.FirstExpCondition == '>=')
            one = (home.EstimatedValue >= expression.FirstDigit);
        else if(expression.FirstExpCondition == '<')
            one = (home.EstimatedValue < expression.FirstDigit);
        else if(expression.FirstExpCondition == '<=')
            one = (home.EstimatedValue <= expression.FirstDigit);

        if(expression.SecondExpCondition == '>')
            two = (home.EstimatedValue > expression.SecondDigit);
        else if(expression.SecondExpCondition == '>=')
            two = (home.EstimatedValue >= expression.SecondDigit);
        else if(expression.SecondExpCondition == '<')
            two = (home.EstimatedValue < expression.SecondDigit);
        else if(expression.SecondExpCondition == '<=')
            two = (home.EstimatedValue <= expression.SecondDigit);

        if((expression.ConditionOperator == 'OR' && (one || two)) || (expression.ConditionOperator == 'AND' && (one && two)))
            yield return home;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T16:23:55.263

我通常有两个用于值范围的文本框。一个为最小值，一个为最大值。如果不需要限制，它们可以为空

```
int? min = null
int? max = null;
int i;

if (Int32.TryParse(txtMin.Text, out i) min = i;
if (Int32.TryParse(txtMax.Text, out i) max = i;

string name = txtName.Text; 
```

使用这些定义，您可以动态组合 where 子句

```
IEnumerable<HomeInfo> result = list;
if (min.HasValue) result = result.Where(h => h.EstimatedValue >= min.Value);
if (max.HasValue) result = result.Where(h => h.EstimatedValue <= max.Value);
if (name != "")
    result = result.Where(
        h => h.OwnerName.StartsWith(name, StringComparison.OrdinalIgnoreCase)
    ); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-01T16:15:46.443

使用 LinqToObjects

```
List<HomeInfo> homeInfos = new List<HomeInfo>();

homeInfos.Where(x => x.EstimatedValue > 1000).Where(x => x.EstimatedValue < 10000); 
```

# android - 所有在 2.3.3 sdk 上运行的 android 设备都有默认的电子邮件客户端吗？

> ID：12676972
> 
> 赞同：0
> 
> 时间：2012-10-01T16:08:23.947
> 
> 标签：android, email-client, android-2.3-gingerbread

我在我的 2.3.3 应用程序中创建了以下内容（这只是一个代码片段）。

```
 else if(intentName.contains("Email"))
        {
            System.out.println();
            System.out.println("Button["+ i + "] intent name contains : EMAIL");
            System.out.println("Button["+ i + "] intent EMAIL contains: " + parameter);

            send_email = new Intent(Intent.ACTION_SEND);
            send_email.setType("message/rfc822");
            send_email.putExtra(Intent.EXTRA_EMAIL, parameter);
            send_email.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK|Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
            send_email.putExtra(Intent.EXTRA_SUBJECT, "");
            send_email.putExtra(Intent.EXTRA_TEXT,"");

            onClick[i] = new OnClickListener()
            {
            public void onClick(View arg0)
            {
                try
                {
                    con.startActivity(send_email);
                }
                catch(ActivityNotFoundException ex)
                {
                    Toast.makeText(con,  "No Email Clients Installed", Toast.LENGTH_LONG).show();
                }
            }};
        } 
```

当我在模拟器上运行它时——我得到了祝酒词——“没有安装电子邮件客户端”，这很好，因为模拟器没有电子邮件客户端。但是，它可以在我的设备上正常运行，因为我的手机上有默认的电子邮件客户端和 gmail。

但是，由于我正在为 android 2.3.3+ 开发
所有 android 设备与 android 2.3.3。有默认的电子邮件客户端？如果他们这样做了，那么我可以保留当前的功能，而不必创建自己的客户端。

那 ^ 是我最初的问题，但现在在查看模拟器之后 - 我的意思是问：

**是否所有具有 2.3.3 sdks 的 android 设备都有设置电子邮件客户端选项？**

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:11:39.067

保证*所有*运行特定 android 版本的设备都有电子邮件客户端的方法绝对是零。它是开源构建（电子邮件应用程序）的一部分，但这并不是说有人没有定制它并删除了该应用程序。假设它在那里可能是安全的，但你真正应该做的是优雅地失败并向用户显示一个错误，要么说你的应用程序需要一个电子邮件应用程序（如果它需要的话），要么说这个功能被禁用，因为没有电子邮件应用程序是展示。另一种选择是为他们提供从市场下载应用程序的链接等。

Side note: the emulator actually does have an e-mail app, it might just not be configured to handle `message/rfc822` intents.

# wso2 - WSO2 ESB 管理功能存储库

> ID：12676974
> 
> 赞同：0
> 
> 时间：2012-10-01T16:08:30.357
> 
> 标签：wso2, wso2esb

我正在尝试从存储库[http://dist.wso2.org/p2/carbon/releases/4.0.1/获取 wso2 esb 4.5 的可用功能](http://dist.wso2.org/p2/carbon/releases/4.0.1/)

我可以通过浏览 IExplorer 中配置了代理的 URL 来查看此存储库。我已使用以下几行将示例 wrapper.conf 文件添加到 wso2 esb/repository/conf

```
wrapper.java.additional.10=-Dhttp.proxyHost=192.168.xx.xx
wrapper.java.additional.11=-Dhttp.proxyPort=8000 
```

没有成功。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:50:48.240

自 ESB 4.5 所基于的 Carbon 4.0.0 以来，包装器模式已被删除。所以这行不通。

# ember.js - 具有瞬态的 Ember 路由器

> ID：12676976
> 
> 赞同：1
> 
> 时间：2012-10-01T16:08:53.887
> 
> 标签：ember.js, ember-old-router

受到[Emberjs 的启发：路由器中的条件重定向](https://stackoverflow.com/questions/11190928/emberjs-conditional-redirect-in-router)我认为我可以在 Ember 路由器中使用瞬态，因为这就是该问题中的“索引”路由 - 它被输入并立即转换到另一个状态，而没有新的事件触发它。

我可以使用以下代码（动作触发`transitionTwice`）获得所需的效果，但是 URL 以相反的顺序更新，使其处于第一个状态，即使应用程序以正确的顺序遍历状态并以预期的最后一个状态结束。

```
App.Router = Ember.Router.extend({
    enableLogging: true,

    root: Ember.Route.extend({

        transitionTwice:  Ember.Route.transitionTo('twiceStep1'),

        index: Ember.Route.extend({
            route: '/',
        }),

        twiceStep1: Ember.Route.extend({
            route: '/twiceStep1',

            connectOutlets: function (router) {
                router.transitionTo('twiceStep2');
            }
        }),
        twiceStep2: Ember.Route.extend({
            route: '/twiceStep2',
        })
    })
}),
App.initialize(); 
```

控制台输出显示正确的状态变化：

```
STATEMANAGER: Sending event 'transitionTwice' to state root.
STATEMANAGER: Entering root.twiceStep1
STATEMANAGER: Entering root.twiceStep2 
```

但是 URL 最终出现在：

```
...test2.html#/twiceStep1 
```

谁能发现我做错了什么？

谢谢，乔恩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:17:39.847

通过将第二个`transitionTo()`调用包装在`Ember.run.next()`.

```
Ember.run.next(function () {
    router.transitionTo('twiceStep2');
}); 
```

问题是对于任何转换，调用完成*后都会更新 URL。*`connectOutlets()`这意味着对`transitionTo`from `connectOutlets`nest 和 URL 的链式调用会在调用完成时以相反的顺序更新。

虽然这解决了我的直接问题，但我不确定这是否真的构成了对该问题的最终答案，因为这意味着最终状态需要知道它将从先前的瞬态状态进入 - 这不是很好的分离. 但我想我应该记录下来，以防其他人遇到这种异常情况。

# php - php中给定日期的第一天

> ID：12676982
> 
> 赞同：0
> 
> 时间：2012-10-01T16:09:02.113
> 
> 标签：php, date, datetime

为了获得给定月份的第一天，我使用了上面的**strtotime**但它不起作用我写：

```
 $d = date_parse_from_format("d-m-Y", $date);
   $month= $d["month"];
   $year=$d["year"];
   echo date("d-m-Y", strtotime('FIRST DAY OF $month $year')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:11:24.683

这个月的第一天可以表示为

```
echo date('Y-m-01'); 
```

如果需要，您可以从中提取更多信息，例如星期几：

```
$month = '10';
$year  = '2012';
echo date('D', strtotime("{$year}-{$month}-01")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:18:01.150

我希望它有效：

```
echo date("j", strtotime('FIRST DAY OF $month $year')); 
```

# php - DOMDocument 中断编码？

> ID：12676983
> 
> 赞同：5
> 
> 时间：2012-10-01T16:09:19.270
> 
> 标签：php, encoding, domdocument

我运行以下代码：

```
$page = '<p>Ä</p>';
$DOM = new DOMDocument;
$DOM->loadHTML($page);
echo 'source:'.$page;
echo 'dom: '.$DOM->getElementsByTagName('p')->item (0)->textContent; 
```

它输出以下内容：

> 来源：Ä
> 
> dom: ×

所以，我不明白为什么当文本通过 DOMDocument 时，它的编码会被破坏？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T16:17:41.073

Here's a workaround that adds the proper encoding via meta header:

```
$DOM->loadHTML('<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />' . $page); 
```

*I'm not sure if that's the actual character set you're trying to use, but adjust where necessary*

See also: [domdocument character set issue](https://stackoverflow.com/questions/10852898/domdocument-character-set-issue/10853027#10853027)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-01T16:17:36.443

# sql - 比较两个变量行并删除 vb.net 中同一表中的重复项

> ID：12676991
> 
> 赞同：0
> 
> 时间：2012-10-01T16:09:40.703
> 
> 标签：sql, vb.net

我有一张桌子，上面有一个工作篮子的工作。如果您没有以用户身份登录，那么您的作业会从 cookie 中获取 sessionid。

如果您在之后登录，并且您的已注销购物篮和已登录购物篮中已有工作，则将它们与您的 id 一起添加并将 session_id 设置为 0。

该表如下所示：

```
vacancy_id  |  user_id  |  session_id

  10            1            0

  10            0            1636252

  4             0            1636252 
```

因此，当我运行 SQL 时，ID 为 10 和会话 ID 的空缺将被删除，ID 为 4 和会话 ID 的空缺将具有会话 ID 0 和用户 ID 1。

我确实在下面尝试过，但我收到一条错误消息

> “您不能在 FROM 子句中指定目标表 'v1' 进行更新”

代码：

```
 Dim current_sessionid As String = GetCookie("job_session_id")
            If String.IsNullOrEmpty(current_sessionid) Then
            Else

                Dim oConn3 As New MySqlConnection(DSN)
                Dim oCmd3 As New MySqlCommand
                Dim oRS3 As MySqlDataReader = Nothing

                Dim oConn4 As New MySqlConnection(DSN)
                Dim oCmd4 As New MySqlCommand
                Dim oRS4 As MySqlDataReader = Nothing

                Try

                    oConn3.Open()

                    oCmd3.Connection = oConn

                    oCmd3.CommandText = "UPDATE vacancies_basket AS v1 SET v1.user_id = @user_id, v1.session_id = '0' WHERE session_id = @currentsession AND " _
                    & "(SELECT v2.vacancy_id FROM vacancies_basket AS v2 WHERE user_id = @user_id) <> v1.vacancy_id"
                    oCmd3.Prepare()
                    oCmd3.Parameters.AddWithValue("@user_id", User.User_ID)
                    oCmd3.Parameters.AddWithValue("@currentsession", GetCookie("job_session_id"))
                    oCmd3.ExecuteNonQuery()

                    oConn3.Close()
                    oConn3.Dispose()
                    oCmd3.Dispose()
                    oRS3 = Nothing

                    oCmd4.CommandText = "DELETE FROM vacancies_basket WHERE session_id=@currentsession"
                    oCmd4.Prepare()
                    oCmd4.Parameters.AddWithValue("@currentsession", GetCookie("job_session_id"))
                    oCmd4.ExecuteNonQuery()

                Catch ex As Exception
                    SendAlertEMail("App_Code/functions.vb/LogUserId()/jobbasket", ex)
                Finally
                    oConn4.Close()
                    oConn4.Dispose()
                    oCmd4.Dispose()
                    oRS4 = Nothing
                End Try
            End If 
```

# php - 将文本区域中的 XML 保存到 xml 文件中？

> ID：12676993
> 
> 赞同：1
> 
> 时间：2012-10-01T16:09:48.753
> 
> 标签：php, xml

我有一个文本区域，我在其中打印我的所有 xml，如下所示：

```
<form method="post" action="">
<textarea id="codeTextarea" name="thisxml" cols="100" rows="36">
<?php
$xml = new DOMDocument();
$xml->formatOutput = true;
$xml->preserveWhiteSpace = false;
$xml->loadXML('<?xml version="1.0" encoding="ISO-8859-1"?>
<data>
  <game id="103478">
    <opponent>Peter</opponent>
    <oppid>4</oppid>
    <lastdraw>0</lastdraw>
  </game>
  <game id="103479">
    <opponent>Peter</opponent>
    <oppid>4</oppid>
    <lastdraw>2</lastdraw>
  </game>
  <game id="103483">
    <opponent>James</opponent>
    <oppid>47</oppid>
    <lastdraw>2</lastdraw>
  </game>
</data>');

echo htmlspecialchars($xml->saveXML()); 
?>
</textarea> 
```

然后我在提交时想用新的 xml 创建/更新文件，但我在新的 xml 文档中得到的只是：

```
<?xml version="1.0"?> 
```

我尝试使用 PHP 保存这样的 xml：

```
$myFile = 'TEST.xml';
$fh = fopen($myFile, 'w') or die("can't open file");
$stringData = htmlspecialchars($_POST['thisxml']);
fwrite($fh, $stringData);
fclose($fh); 
```

有人可以告诉我我做错了什么吗？

提前致谢 ;-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T16:17:33.430

使用`htmlspecialchars($_POST['thisxml'])`会让你`XML invalid`的回报类似于

```
&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;
&lt;data&gt;
  &lt;game id=&quot;103478&quot;&gt;
    &lt;opponent&gt;Peter&lt;/opponent&gt;
    &lt;oppid&gt;4&lt;/oppid&gt;
    &lt;lastdraw&gt;0&lt;/lastdraw&gt;
  &lt;/game&gt;
  &lt;game id=&quot;103479&quot;&gt;
    &lt;opponent&gt;Peter&lt;/opponent&gt;
    &lt;oppid&gt;4&lt;/oppid&gt;
    &lt;lastdraw&gt;2&lt;/lastdraw&gt;
  &lt;/game&gt;
  &lt;game id=&quot;103483&quot;&gt;
    &lt;opponent&gt;James&lt;/opponent&gt;
    &lt;oppid&gt;47&lt;/oppid&gt;
    &lt;lastdraw&gt;2&lt;/lastdraw&gt;
  &lt;/game&gt;
&lt;/data&gt; 
```

只需使用`file_put_contents`它结合了以下功能`fopen , fwrite , fclose`

```
file_put_contents('TEST.xml', $_POST['thisxml']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:20:42.443

您可以使用以下方法直接保存 XML 文件[`DOMDocument::save`](http://www.php.net/manual/en/domdocument.save.php)：

```
$xml = new DOMDocument();
$xml->formatOutput = true;
$xml->preserveWhiteSpace = false;

if ($xml->loadXML($_POST['thisxml']) === FALSE)
{
    die("The submitted XML is invalid");
}

if ($xml->save('TEST.xml') === FALSE)
{
    die("Can't save file");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T16:39:37.573

我找到了这个脚本并将其添加到标题中，瞧 :-)

```
function stripslashes_array(&$array, $iterations=0) {
    if ($iterations < 3) {
        foreach ($array as $key => $value) {
            if (is_array($value)) {
                stripslashes_array($array[$key], $iterations + 1);
            } else {
                $array[$key] = stripslashes($array[$key]);
            }
        }
    }
}

if (get_magic_quotes_gpc()) {
    stripslashes_array($_GET);
    stripslashes_array($_POST);
    stripslashes_array($_COOKIE);
} 
```

感谢您的输入 ;-）