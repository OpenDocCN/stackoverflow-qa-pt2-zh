# StackOverflow 问答 13501000-13501999

# macos - 如何将外部对象添加到 Max/MSP 独立应用程序

> ID：13501002
> 
> 赞同：0
> 
> 时间：2012-11-21T19:51:32.010
> 
> 标签：macos, max-msp-jitter

我正在尝试在 Max/MSP 中构建一个独立的应用程序，但我遇到了几个外部对象的问题。我已经尝试通过构建窗口中的“包含文件...”命令明确包含它们，但它们在导出的应用程序中仍然显示为灰色框。有问题的外部具有后缀 .mxo。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:51:32.010

我通过手动将外部添加到应用程序包中解决了这个问题。我右键单击导出的应用程序并选择“显示包内容”。然后我将外部组件放入`contents > support > extensions`. 这解决了问题。

# cloud - Zero Configuration cloud deployment

> ID：13501003
> 
> 赞同：8
> 
> 时间：2012-11-21T19:51:34.207
> 
> 标签：cloud

What are the options out there for "zero configuration" (meaning minimal configuration) deployment of code on an arbitrary cloud service?

I realize that there are thousands of cloud platforms, each supporting a particular set of languages, a particular set of packages, and sporting a particular workflow, often with proprietary set of commandline tools to make deployment less painful.

But what if I don't want to know anything about particular cloud platforms, and I want to write code that will be easy to deploy in a cloud for years to come?

Obviously the most concrete answer would be simply: build a virtual machine image with whatever you want and then run that on the cloud (this way is pretty much zero-configuration and we can expect a VM image I build today to still work on most VM hosts in 10 years).

So my question is: What is the next tier down from the VM image ideal? What are the most open and widely-accepted standards for encapsulating a complete description of an arbitrary software stack in machine-readable form such that I can throw my software stack at any generic cloud-like hosting service without thinking about any configuration specific to that hosting service?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:34:37.603

如果“云”是指***IaaS*** *（基础架构即服务提供商）*，例如 EC2 等，而不是*PaaS*（*Google App Engine、Heroku 等*），那么这些天的趋势似乎是[基础架构-代码](http://java.dzone.com/articles/infrastructure-code-key-devops)和[DevOps](http://en.wikipedia.org/wiki/DevOps)。这不完全是“零配置”；它更像是 configure *once*，并在 DSL 中描述整个堆栈的配置，它可用于从任何云上运行的一组新启动的 VM 构建或重建整个堆栈。

所以你有一个*配置管理*系统，以及一堆配置管理系统理解的机器可读的“食谱”。尽管确实存在语言实际上是 XML 的系统，但配方通常以某种自定义 DSL 来表达。

*这种配置管理*系统的一些众所周知的例子包括：

1.  [厨师](http://www.opscode.com/chef/)
2.  [木偶](http://puppetlabs.com/)

还有很多其他的；但我对它们没有经验（CFEngine，bcfg2（使用 XML））

这些工具是*幂等*的。这意味着，您可以根据需要多次重新运行配置，并且只执行满足配方指定的描述所需的操作。如果您已指定将某些文件放置在具有某些内容的某些目录中，那么只有在需要时才会创建（或修改）它们。仅当需要安装包或它们的版本与配方指定的不同时才会安装包。

例如，在 Chef 中，要指定用户`tomcat`必须存在、必须安装某个版本的 Java、应该运行该后缀以及某个 XML 文件必须在给定位置可用，您将有一个看起来像这样的食谱：

```
user "tomcat"

package "java" do
  version "1.6.0_u27"
end

directory "/etc/yourapp" do
  owner "tomcat"
end

package "postfix"
# Ensure that postfix is installed and running.
service "postfix" do
  action [:enable, :start]
end

tempate "/etc/yourapp/config.xml"
  source "config.xml.erb"   # This will be a template file that references variables
  variables(
    :db_server => '10.1.2.4' #just an example; there will be ways to automate this
  )
  mode "0755"
end 
```

Chef for one 提供了一堆预先编写的食谱或“食谱”，您只需下载、包含并用作基础架构的一部分。在 Chef 中，您根据您希望服务器成为什么来编写您的说明书 - 然后您定义*角色*，它指定哪些说明书将应用于构成您的堆栈的哪类服务器。您只需将角色分配给您的实例，启动它们，然后观察整个堆栈自行启动。

我想说这正在成为维护基础设施全栈可执行描述的标准方法（不必只是云 - 我在 VMWare 和/或 VirtualBox 上进行测试，但部署到具有相同配方的多个公共云供应商。 )

缺点是你需要学习 DSL。并且可能对您的工作流程进行重大更改。这些系统也有各自的优缺点。但是，以这种方式做事肯定是维护自定义 VM 映像的下一层，并且在许多方面更加灵活。例如，如果每个云提供商都为您提供一个 NTP 服务器地址以使您的实例保持同步，则必须根据提供商更改图像。使用 Chef/Puppet，这可以自动化并巧妙地抽象出来。

虽然 VM 映像是您所需“配置”的冻结副本，但它们不会捕获*每个组件（堆栈中的每个实例）*如何相互交互。例如，应用程序服务器需要知道数据库服务器、它的地址、各种连接参数——数据库服务器需要知道所有可能想要连接到它的应用程序服务器（在云环境中，应用程序服务器甚至可能数量随时间增加或减少）。这是动态的东西，很容易通过像 Chef 这样的系统实现自动化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-18T02:43:48.803

我认为您的问题的答案是[Jelastic](http://jelastic.com)。为了让您的应用程序留在云中并让其他人查看它，您将至少符合 http 协议，至少我认为 PHP 作为一种语言赢得了那里的手。如果这是真的，那么现在市场上只有一个平台可用，那就是 Jelastic。试试自己，让我知道。零配置和供应商锁定免费使用一流的 Web 控制台，这简直是最好的。我可能听起来像一个传道者，但我对他们的堆栈感到满意（我使用 Java 作为编程语言并有一家初创公司）并且真的很喜欢他们的平台.

苏里亚

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T19:30:53.883

零配置更可能是“平台即服务”中的特征，而不是“基础设施即服务”中的特征。也许我们应该说“最小配置”而不是“零”。PAAS 为您提供了一个半固定的架构，并提供了一些杠杆来配置事物。借助 IAAS，您可以完成所有工作，也许借助一些工具。

我可以谈谈我使用 Google App Engine 的经验，您可以在本地开发代码，将其与描述符文件打包，然后将其部署到 App Engine。您不应该关心底层机器，也不应该关心如何根据流量进行扩展或缩减等。平台会为您处理这些东西，无论它做得好还是坏。这个想法是你只专注于你的应用程序。尽管在现实中，您仍然必须了解一些您所掌握的底层架构，以便做出良好的设计决策。

AppEngine 支持 Java、Python 和 Go。

Heroku 和 Engine Yard 也是 PAAS，并开始支持 Ruby。Heroku 现在也支持 Java、Python 和 Node.js。

还有 Rackspace 的 Open Stack 计划，该计划旨在定义您可以生活在其中的架构，但让它“可移植”到各种 IAAS 提供商。很棒的概念，但我相信没有多少人采用它。[http://www.openstack.org/software/](http://www.openstack.org/software/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T00:51:01.000

我相信对病房应用寿命最直接的答案是抽象。

用抽象和简单的术语描述您的应用程序需求，构建或使用支持这一点的应用程序框架，并仔细隔离特定于您的应用程序需求的部分。

在 python 中，这可以转化为在 Google App Engine 上构建一些东西。摆脱这一点的核心思想是，您（或谷歌）总是有能力在不触及应用程序的情况下改进底层基础设施，因为它用不做任何假设的术语来描述它的操作。如果这种方法是定义应用程序的内容和方式的成本可以以抽象和可移植的方式描述，但如果你做对了，你唯一需要担心的是你使用的核心语言的变化。

现在，这个问题缺少的一个重要方面是*Change is good*。您永远不应该害怕废弃整个应用程序堆栈。事实上，今天的技术变化如此之快，以至于它是保持领先地位和相关性的必要条件。由于这个唯一的原因，您甚至不太可能希望在未来几年内以同样的方式编写应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-29T10:31:31.047

每个云平台都可以回答您的问题，说“我有最好的通用解决方案”，但只有开发人员选择的标准将保留。因此，当然您可以构建自己的 VM 模板并使用它多年 - 问题是，您的操作系统将失去支持，并且有一天会贬值和不安全。因此，您将被迫更新的不仅是您的模板，还有您的整个应用程序基础架构（如果您不经常这样做的话）。所以虚拟机没问题，但我认为这不是一个答案......另一方面，您有云提供商解决方案，如 Jelastic 部署脚本或 Azure 云服务部署（手动或通过 IDE）。但是到目前为止，这些解决方案将来可能会发生变化，如果不重构它，您将无法使用您的脚本。第三种方法是使用一些 devops 机制，如 Chef、Puppet、docker 或任何其他自今天或将来开发的我们不知道。他们中的大多数都非常强大和伟大。他们中的许多人将云实现作为 Amazon 或 Azure 的 Chef 插件、Azure 上的 Puppet server on demand、Amazon 或 Azure 上的 docker 等等。问题是，我们今天不知道将来会成为标准。所有这些都是一个非常年轻的解决方案，而且（说实话）不是那么流行，也不是那么容易学习。最后一个 - 标准化，深受开发人员喜爱，深受管理员和开发人员喜爱 - GIT 和持续开发/持续集成。GIT 是一个标准，并且将在未来成为标准，因为它被商业和教育很好地采用。许多公共云提供商（也包括私有云提供商）正在使使用 git 直接将应用程序部署到云平台成为可能。我正在为我的 Python 代码使用 Azure PaaS 解决方案。我需要做的就是创建部署槽并推送我的代码。Azure Web App 平台有持续的集成机制，在我提交后的几秒钟内，我的代码就被部署了。您可以在少数云中找到这样的解决方案，但并非无处不在。必须有 PaaS 才能做到这一点，而不仅仅是许多公共云中的 IaaS。

# python - How to trigger to responses from a server using python socket programming

> ID：13501007
> 
> 赞同：1
> 
> 时间：2012-11-21T19:51:45.013
> 
> 标签：python, multithreading, sockets, client

I'm trying to send a message (a string) to a server (say server A) as a response to a particular string message received from the server. I've used a client connection to send messages to the server. I've created my own server (say server B) using socket module to receive the messages from the the above mentioned server. If a certain message is received, to client should send a message to that server A. I used threads so that both my client and server can work concurrently.

Here's my client script (socket1.py).

```
import socket
import time

s = socket.socket()
s2 = socket.socket()

class MyClient():
    def __init__(self):
        self.s=socket.socket()

    def start(self):
        self.s.connect(('localhost',6000))
        self.s.settimeout(1000)
        self.s.send('JOIN#')

        while True:
            if self.s.gettimeout():
                break

    def move(self):
        self.s.send('LEFT#')

    def close(self):
        self.s.close()

def socStart():   

    global s,s2

    s.connect(('localhost',6000))
    #s2.connect(('localhost',6000))  

    s.send('JOIN#')  

    #time.sleep(10)
    #s.send('DOWN#')  

    #s.close()

def move():
    global s1    
    s1.send('DOWN#')

def close():
    global s,s2

    s.close()
    #s2.close() 
```

Here's my server script (server1.py)

```
import socket

class MyServer():
    def __init__(self):
        self.s= socket.socket()

    def serStart(self):
        self.s.bind(('localhost',7000))
        #self.s.settimeout(30)
        self.s.listen(5)
        self.started = False

        while True:
            self.c, self.addr = self.s.accept()
            self.msg = self.c.recv(1024)
            if self.msg[0] == 'S':                
                self.started = True
            print self.addr, '>>', self.msg
            self.c.close()

            if self.s.gettimeout():
                break

        self.s.close()

    def getStarted(self):
        return self.started 
```

Here's the script in which I used threads with both socket1 & server1 module.

```
import threading
import datetime
import socket1
import server1
import time

class ThreadClass(threading.Thread):

    def initialize(self,client,server):        
        self.client = client
        self.server = server

    def run(self):
        self.client.start()

        if self.server.getStarted():            
            self.client.move()

        self.client.close()

class ThreadServer(threading.Thread):

    def initialize(self, client, server):        
        self.client = client
        self.server = server

    def run(self):
        self.server.serStart()

client = socket1.MyClient()
server = server1.MyServer()

t = ThreadClass()
tS=ThreadServer()

t.initialize(client, server)
tS.initialize(client, server)

t.start()
tS.start() 
```

Though server class changes it's started varialble to True the move method doesn't work in `ThreadClass`. How do I perform such event triggering and responding accordingly with a outside server in python?

# php - Getting the rowid after adding an item with CI cart?

> ID：13501009
> 
> 赞同：0
> 
> 时间：2012-11-21T19:52:05.593
> 
> 标签：php, codeigniter, cart

On the codeigniter website it says the the insert() method will return a $rowid of the latest inserted product. However How exactly do I grab it?

```
$data = array();

$insert = $this->cart->insert($data); 
```

I tried $insert['rowid'] and $insert->rowid but neither seem to work.

Thank you!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T22:13:36.747

介绍：**insert_id()**

像这样

```
$id = $this->db->insert_id();
return $id; 
```

在你的模型中，我们称之为friend_model

```
function insertRow()
{
// Prepare data, normally you would pass this in
$data = array(
'first' => 'john',
'last' => 'smith'
);
// insert data
$this->db->insert( 'friends', $data );
// confirm insert       
if ( $this->db->affected_rows() == '1' )
// return new ID
{ $id = $this->db->insert_id();
return $id; }
// else did not insert, return false 
else {return FALSE;}
} 
```

在你的控制器中，检查你是否从模型中得到了一个 id

```
if(! $id = $this->friend_model->insertRow() )
// it no work
{ // some error method 
}
else
{ // success ! 
} 
```

# batch-file - 批量将文件从服务器复制和替换到我的文档-Windows 7（或 xp）

> ID：13501012
> 
> 赞同：2
> 
> 时间：2012-11-21T19:52:12.257
> 
> 标签：batch-file, copy

我需要自动化批处理脚本以从服务器复制项目数据并替换到 30 多个用户的“我的文档”文件夹中的每个项目文件夹中。用户将在网络中，我希望批处理文件在登录时自动运行。

如何修改我的代码：

```
@echo off
COPY \\servername\Project\Data\*.* C:\TEMP\"FileCopy Test"\*.*
Echo Done.
pause 
```

复制到每个用户的我的文档目录？我在下面的尝试失败了：

```
@echo off
COPY \\servername\Project\Data\*.* C:\Documents and Settings\user.name\My Documents\FileCopy Test\*.*
Echo Done.
pause 
```

请帮忙：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T21:01:44.393

您可以使用 Windows 的环境变量：

```
@echo off
COPY \\servername\Project\Data\*.* "%USERPROFILE%\My Documents\FileCopy Test\"
Echo Done.
pause 
```

PS：记住在文件夹中使用带有多个空格名称的双引号。

# c - C 中的 DRY 缓存

> ID：13501020
> 
> 赞同：3
> 
> 时间：2012-11-21T19:52:49.110
> 
> 标签：c, dry, memoization

我正在寻找干燥以下C代码：

```
if (i < SIZE_OF_V) {
    if (V[i])
        K = V[d];
    else
        K = V[d] = (expensive complicated call);
} else {
    K = (expensive complicated call);
} 
```

有什么建议吗？本地宏会起作用，但我更喜欢更现代的替代方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T19:56:14.053

你可以简单地做

```
if (i < SIZE_OF_V && V[i]) {
    K = V[d];
} else {
    K = (expensive complicated call);

    if (i < SIZE_OF_V)
        V[d] = K;
} 
```

您还可以将您`expensive complicated call`放入外部函数并从`if`条件内的两个位置调用：

```
int myExpensiveAndComplicatedCall() {
    // Do things
}

if (i < SIZE_OF_V) {
    if (V[i])
        K = V[d];
    else
        K = V[d] = myExpensiveAndComplicatedCall();
} else {
    K = myExpensiveAndComplicatedCall();
} 
```

# c# - Telerik RadSplitContainer SizeInfo 相对比率

> ID：13501025
> 
> 赞同：1
> 
> 时间：2012-11-21T19:53:08.283
> 
> 标签：c#, .net, winforms, telerik, splitpanel

根据 Telerik 文档，RadSplitContainer 中面板的相对大小是使用 RelativeRatio 属性设置的。我不知道如何使用这个属性。

我想要一个左面板和一个右面板，左面板是右面板宽度的 50%。

[http://www.telerik.com/help/winforms/splitcontainer-overview.html](http://www.telerik.com/help/winforms/splitcontainer-overview.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T20:39:39.443

这很容易：

*   将拆分容器内的两个面板设置为相对

*   然后设置右侧面板的RelativeRatio = 0.66, 0 和左侧面板的RelativeRatio = 0.33,0：

## 例子：

![在此处输入图像描述](../Images/f85541f298f95b978d2320761e5fed5f.png)

编辑 ：

![在此处输入图像描述](../Images/42c44eff8c9d996b42216934a827e205.png)

编辑2：

```
 splitPanel1.SizeInfo.SizeMode = Telerik.WinControls.UI.Docking.SplitPanelSizeMode.Relative;
        splitPanel2.SizeInfo.SizeMode = Telerik.WinControls.UI.Docking.SplitPanelSizeMode.Relative;

        splitPanel1.SizeInfo.RelativeRatio = new SizeF(0.33f, 0f);
        splitPanel2.SizeInfo.RelativeRatio = new SizeF(0.66f, 0f); 
```

# mysql - mysql：限制多个查询的最大相等结果

> ID：13501026
> 
> 赞同：0
> 
> 时间：2012-11-21T19:53:11.777
> 
> 标签：mysql

```
Name   Age     Work    Eyes
---------------------------
John   young  home   black

Mike  young   home   blue

Irvin   old   home   black

Marie  young  home   blue

Teddy  old   factory  green 
```

多选框形式，搜索term1=young，term2=home，term3=blue

```
 SELECT   Name 
 FROM     my_table 
 WHERE    (Age = 'young')
       OR (Work = 'home')
       OR (Eyes = 'blue') 
 ORDER BY (Age = 'young')
        + (Work = 'home')
        + (Eyes = 'blue') DESC LIMIT 1 
```

在我的情况下，两个结果具有最大相等的巧合（Mike 和 Marie），我想展示它们。
如何限制最常见的结果？可能只有一个或多个：2,3...同样的巧合
：感谢 eggyal 订购

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T21:20:51.370

子查询可以是做这种事情的一种简单方法。您真正要查找的是所有条目，其中 (Age = 'young') + (Work = 'home') + (Eyes = 'blue') 的值等于所有条目中的最大值。

```
SELECT Name
FROM my_table
WHERE
    Age = 'young'
    OR Work = 'home'
    OR Eyes = 'blue'
    AND ( (Age = 'young') + (Work = 'home') + (Eyes = 'blue') ) = (
            SELECT MAX((Age = 'young') + (Work = 'home') + (Eyes = 'blue'))
            FROM my_table
        ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T05:17:06.827

如果您想根据相似性获得结果，以下将为您提供结果，但我必须编写所有组合，因此在实际情况下您将需要有`n! + 1`* 条件。

> **嗯！**代表*“阶乘”*，例如**3!** 表示**3 * 2 * 1 = 6**
> 和**+1**是整个比赛（在你的情况下为 3）

```
SELECT
    GROUP_CONCAT(`Name` SEPARATOR ' - ') AS 'Names',
    COUNT(*) AS 'matches',
    1 AS '_Age',1 AS '_Work',1 AS '_Eyes'
FROM `my_table` WHERE
    `Age`='young' OR
    `Work`='home' OR
    `Eyes`='blue'
GROUP BY `Age`,`Work`,`Eyes`
HAVING `matches` > 1

UNION

SELECT
    GROUP_CONCAT(`Name` SEPARATOR ' - ') AS 'Names',
    COUNT(*) AS 'matches',
    1 AS '_Age',1 AS '_Work',0 AS '_Eyes'
FROM `my_table` WHERE
    `Age`='young' OR
    `Work`='home' OR
    `Eyes`='blue'
GROUP BY `Age`,`Work`
HAVING `matches` > 1

UNION

SELECT
    GROUP_CONCAT(`Name` SEPARATOR ' - ') AS 'Names',
    COUNT(*) AS 'matches',
    1 AS '_Age',0 AS '_Work',1 AS '_Eyes'
FROM `my_table` WHERE
    `Age`='young' OR
    `Work`='home' OR
    `Eyes`='blue'
GROUP BY `Age`,`Eyes`
HAVING `matches` > 1

UNION

SELECT
    GROUP_CONCAT(`Name` SEPARATOR ' - ') AS 'Names',
    COUNT(*) AS 'matches',
    0 AS '_Age',1 AS '_Work',1 AS '_Eyes'
FROM `my_table` WHERE
    `Age`='young' OR
    `Work`='home' OR
    `Eyes`='blue'
GROUP BY `Work`,`Eyes`
HAVING `matches` > 1

UNION

SELECT
    GROUP_CONCAT(`Name` SEPARATOR ' - ') AS 'Names',
    COUNT(*) AS 'matches',
    1 AS '_Age',0 AS '_Work',0 AS '_Eyes'
FROM `my_table` WHERE
    `Age`='young' OR
    `Work`='home' OR
    `Eyes`='blue'
GROUP BY `Age`
HAVING `matches` > 1

UNION

SELECT
    GROUP_CONCAT(`Name` SEPARATOR ' - ') AS 'Names',
    COUNT(*) AS 'matches',
    0 AS '_Age',1 AS '_Work',0 AS '_Eyes'
FROM `my_table` WHERE
    `Age`='young' OR
    `Work`='home' OR
    `Eyes`='blue'
GROUP BY `Work`
HAVING `matches` > 1

UNION

SELECT
    GROUP_CONCAT(`Name` SEPARATOR ' - ') AS 'Names',
    COUNT(*) AS 'matches',
    0 AS '_Age',0 AS '_Work',1 AS '_Eyes'
FROM `my_table` WHERE
    `Age`='young' OR
    `Work`='home' OR
    `Eyes`='blue'
GROUP BY `Eyes`
HAVING `matches` > 1

ORDER BY
    `_Age`+`_Work`+`_Eyes` DESC,
    `matches` DESC 
```

结果将是

```
|            Names            | matches | _Age | _Work | _Eyes |
+-----------------------------+---------+------+-------+-------+
| Mike - Marie                |    2    |   1  |   1   |   1   |
| John - Mike - Marie         |    3    |   1  |   1   |   0   |
| Mike - Marie                |    2    |   1  |   0   |   1   |
| John - Irvin                |    2    |   0  |   1   |   1   |
| Mike - Marie                |    2    |   0  |   1   |   1   |
| John - Mike - Irvin - Marie |    4    |   0  |   1   |   0   |
| John - Mike - Marie         |    3    |   1  |   0   |   0   |
| Mike - Marie                |    2    |   0  |   0   |   1   |
| John - Irvin                |    2    |   0  |   0   |   1   | 
```

这不是非常实用，但我不知道如何通过任何其他方法获得名称组合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T08:53:14.840

我认为不扫描整个表（两次）就没有解决方案。这是一个：

```
SELECT t.Name
FROM 
    my_table AS t
  JOIN
    ( SELECT MAX((Age = 'young') + (Work = 'home') + (Eyes = 'blue')) AS matching
      FROM my_table
    ) AS m
    ON  m.matching > 0  
    AND m.matching = (t.Age = 'young') + (t.Work = 'home') + (t.Eyes = 'blue')
 ; 
```

# actionscript-3 - 如何从组合框中获取值？

> ID：13501028
> 
> 赞同：1
> 
> 时间：2012-11-21T19:53:15.040
> 
> 标签：actionscript-3, combobox

```
import fl.events.*;  

const PointsStart:int=0;  

var Points:int=PointsStart;  

youChose.text=String(Points)+" points";  

comboBox.prompt='Contestants'  
comboBox.addItem({label:"John Smith",Points:10});  
comboBox.addItem({label:"Chris Tucker",Points:12});  
comboBox.addItem({label:"Paul Allen",Points:14});  

comboBox.addEventListener(Event.CHANGE, listevalg);  

function listevalg (evt:Event)  
{  
    Points=comboBox.selectedItem.Points;  
    youChose.text=String(Value)+" points";  
} 
```

我想要一个文本框来说明当前的排名。假设我在组合框中选择 Chris Tucker，我希望文本框显示“他在第二位”之类的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:25:26.217

首先，您需要知道每个人的排名。为此，您可以复制人员列表并按点数对其进行排序，然后将他们的排名注册为他们在该列表中的位置。

```
import fl.events.*;  

const PointsStart:int=0;  

var Points:int=PointsStart;  

youChose.text=String(Points)+" points";  

comboBox.prompt='Contestants'  

var people:Array = [{label:"John Smith",Points:10},
                    {label:"Chris Tucker",Points:12},
                    {label:"Paul Allen",Points:14}];

// Copy of "people", sorted by Points, descending.
var sortedPeople:Array = people.concat().sortOn("Points", Array.DESCENDING | Array.NUMERIC);

for each (var person:Object in people) {
    // Register this person's ranking as its position in the sorted array + 1
    // (because indexes start at 0)
    person.Rank = sortedPeople.indexOf(person) + 1;
    comboBox.addItem(person);
}

comboBox.addEventListener(Event.CHANGE, listevalg);  

function listevalg (evt:Event)  
{  
    Points=comboBox.selectedItem.Points;
    // The ranking is now available as "item.Rank".
    youChose.text=String(Points)+" points, rank "+String(comboBox.selectedItem.Rank);
} 
```

如果您实际上不需要将当前顺序保留在组合框中，则甚至不需要在排序之前复制数组。

# django - Django - Upload file without using form

> ID：13501030
> 
> 赞同：0
> 
> 时间：2012-11-21T19:53:29.517
> 
> 标签：django, upload, django-forms, gmail

I have a small email client. I would like to be able to upload files without having to submit a form. So, I have my email form. I would like to, whenever I use the file input button on my form, that file would be uploaded without any reload of the page. The goal is to be able to upload multiple files without a reload of the page, something similar to what happens in GMail.

Every time you click the file input and choose a file, a small progress bar appears with the upload progress, and the page is not reloaded.

I am guessing some JS/Ajax library might help me achieve this? I am using HTML5.

Thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:55:51.410

[Blueimp](http://blueimp.github.com/jQuery-File-Upload/)有一个很棒的基于 jQuery 的限制文件上传器。

# ios - 在 iOS 应用程序中嵌入 HTTP 服务器有什么好处？

> ID：13501031
> 
> 赞同：0
> 
> 时间：2012-11-21T19:53:31.903
> 
> 标签：ios, http

在实现中，他们在 iOS 应用程序中实现了 HTTP 服务器。如果 uiwebview 已经处理了 HTML 加载和渲染，那么这种架构背后的原因可能是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:13:30.550

我有几个带有嵌入式 HTTP 服务器的应用程序。这被用作向/从应用程序导入/导出数据的一种可能方法。用户从其计算机的 Web 浏览器连接到应用程序，并连接到其 iOS 设备上的服务器。然后，用户可以从应用程序下载文件或将文件上传到应用程序。我在 iOS 支持通过 iTunes 和 Documents 目录共享文件之前添加了此功能。它现在是从应用程序获取数据的几种方法之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:57:09.540

我认为他们没有嵌入 HTTP 服务器，因为他们只是*非常自由*地使用 UIWebView 和 HTML5 的功能。

这样做的好处是他们只需要在 HTML5 中编写一个相对通用的 LinkedIn 移动界面实现，并且这些更改可以传递到 iOS、Android、Windows Mobile 以及任何其他支持 HTML5 的移动平台。

# ios - 在启用 iCloud 的情况下提交应用程序：可能吗？Apple：无效的代码签名权利

> ID：13501032
> 
> 赞同：2
> 
> 时间：2012-11-21T19:53:33.400
> 
> 标签：ios, app-store, icloud, key-value-store, code-signing-entitlements

两个应用程序，比如 AppX 和 AppXLite，使用相同的 iCloud 键值存储和相同的商店标识符，在权利文件中我看到 $(TeamIdentifierPrefix)com.company.AppX

一切都在临时和调试版本中工作。但是当我尝试将 AppXLite 上传到 appstore 时，出现错误：

> 无效的代码签名权利 - 您的应用程序包的签名包含不受支持的权利值。对于 com.apple.developer.ubiquity-container-identifiers 权利，数组中的第一个值必须由 Apple 在配置文件中提供的前缀和捆绑标识符后缀组成。捆绑包标识符必须与您的一个应用程序或允许您用作 iCloud 容器标识符的另一个应用程序的捆绑包标识符匹配。具体来说，不支持 AppXLite 中键“com.apple.developer.ubiquity-container-identifiers”的值“YYXXXXXXYY.com.company.AppX”。

同意这封信，但一切正常：前缀，由 Apple 提供，捆绑标识符。如果没有，这在临时构建中将不起作用。但是为什么他们说事情不对呢？

是的，我知道这里有很多答案，我阅读了它们。人们说应该在配置门户中禁用应用程序中的 iCloud 支持以解决此类问题。如果我这样做，我的应用程序将不再看到 iCloud，但这是关键功能之一！

我有一个想法，我应该在 AppXLite 之前先上传 AppX，因为这两个应用程序都使用 AppX 的捆绑包 ID 作为商店标识符。但是我已经在配置门户上添加了这两个应用程序，所以 appstore 应该知道“我的一个应用程序的捆绑标识符”，正如 Apple 在信中所说的那样。

有没有人有将支持 iCloud 的应用程序上传到 Appstore 的经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T21:04:10.830

如果你遇到同样的情况：

1.  杀死供应门户中的所有配置文件
2.  杀死 Xcode 和设备中的所有配置文件
3.  重新创建所有需要的配置文件（我已经为每个配置文件创建了 dev、adhoc 和 appstore）
4.  手动下载它们并拖到 Xcode。
5.  清理并重建所有应用程序
6.  提交第一个应用程序，它们之间共享哪个捆绑包 id 作为 iCloud 的商店标识符。
7.  提交所有其余的应用程序。

结果：一切都处于“等待审核”状态。

# javascript - Rails Backbone 应用程序什么也没显示——包括错误

> ID：13501036
> 
> 赞同：0
> 
> 时间：2012-11-21T19:53:42.520
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, backbone.js

我一直在研究thoughtbot 在 Rails 上的 Learn Backbone.js，我什至无法让开始的测试应用程序工作，但我在控制台中也没有收到任何 Javascript 错误。

这是我的任务 index.haml 文件

```
- content_for :javascript do
  - javascript_tag do
    ExampleApp.initialize({ tasks: <%== @tasks.to_json %> }); 
```

我的初始化文件：

```
var ExampleApp = {
  Models: {},
  Collections: {},
  Views: {},
  Routers: {},
  initialize: function() {
    var tasks = new ExampleApp.Collections.Tasks(data.tasks);
    new ExampleApp.Routers.Tasks({ tasks: tasks });
    Backbone.history.start();
  }
}; 
```

模型/task.js

```
var Task = Backbone.Model.extend({}); 
```

集合/tasks.js

```
var Tasks = Backbone.Collection.extend({
    model: Task,
    url: '/tasks'
}); 
```

路由器/tasks.js

```
ExampleApp.Routers.Tasks = Backbone.Router.extend({
    routes: {
        "": "index"
    },

    index: function() {
        alert('test');
        // var view = new ExampleApp.Views.TaskIndex({ collection: ExampleApp.tasks });
        // $('body').html(view.render().$el);
    }
}); 
```

这是我正在调用所有文件的证据（我认为）：

```
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-ui.js?body=1" type="text/javascript"></script>
<script src="/assets/underscore.js?body=1" type="text/javascript"></script>
<script src="/assets/backbone.js?body=1" type="text/javascript"></script>
<script src="/assets/backbone-support/support.js?body=1" type="text/javascript"></script>
<script src="/assets/backbone-support/composite_view.js?body=1" type="text/javascript"></script>
<script src="/assets/backbone-support/swapping_router.js?body=1" type="text/javascript"></script>
<script src="/assets/backbone-support.js?body=1" type="text/javascript"></script>
<script src="/assets/example_app.js?body=1" type="text/javascript"></script>
<script src="/assets/easing.js?body=1" type="text/javascript"></script>
<script src="/assets/modernizr.js?body=1" type="text/javascript"></script>
<script src="/assets/models/task.js?body=1" type="text/javascript"></script>
<script src="/assets/collections/tasks.js?body=1" type="text/javascript"></script>
<script src="/assets/views/task_view.js?body=1" type="text/javascript"></script>
<script src="/assets/views/tasks.js?body=1" type="text/javascript"></script>
<script src="/assets/views/tasks_index.js?body=1" type="text/javascript"></script>
<script src="/assets/routers/tasks.js?body=1" type="text/javascript"></script>
<script src="/assets/tasks/index.js?body=1" type="text/javascript"></script>
<script src="/assets/tasks/task.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script> 
```

有什么想法吗？我对 Rails 和 Backbone 都很陌生，所以我不确定错误出在哪里，控制台也没有帮助我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:06:52.087

`ExampleApp.initialize`查看源代码时是否看到代码？

您需要`<%= yield :javascript %>`在布局中的某个位置才能使此示例正常工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-27T09:10:01.363

按照下面的结构让骨干工作。

```
<!DOCTYPE html>
<html>
<head>
  <title>Blog2</title>
  <%= stylesheet_link_tag    "application" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>

<%= yield %>

</body>
</html> 
```

# haskell - 在 Yesod 中重构可能堆栈

> ID：13501039
> 
> 赞同：1
> 
> 时间：2012-11-21T19:53:53.930
> 
> 标签：haskell, yesod

使用 Yesod，我想在每个页面的导航栏中显示用户的个人资料名称，并希望使用 链接`ProfileId`到用户的个人资料页面。`config/models`包含：

```
User
    ident Text
    password Text Maybe
    UniqueUser ident
Profile
    username Text
    user UserId
    UniqueProfile user
    UniqueUsername username 
```

片段来自`Foundation.hs`：

```
defaultLayout widget = do
    master <- getYesod
    mmsg <- getMessage
    maid <- maybeAuthId 
```

使用用户 ID，我可以查询配置文件，但它被埋在`Maybe`s 中。 [这个 Stack Overflow 问题](https://stackoverflow.com/questions/12130732/deep-maybe-stack-with-yesod)很好地提示了如何处理所有这些问题`Maybe`......但是，凭借我对 Haskell 的一点经验，我仍然在努力解决它。

我想出了：

```
mpid <- runMaybeT $ do
    ouid <- MaybeT maybeAuthId
    (Entity pid _) <- MaybeT . runDB . getBy $ UniqueProfile ouid
    return pid

mprofilename <- runMaybeT $ do
    ouid <- MaybeT maybeAuthId
    (Entity _ p) <- MaybeT . runDB . getBy $ UniqueProfile ouid
    return $ profileUsername p 
```

这可行，但不是最佳的 - 重复代码和双重数据库命中。如何重构此代码？

我认为这会起作用：

```
(mpid, mprofilename) <- runMaybeT $ do
    ouid <- MaybeT maybeAuthId
    (Entity pid p) <- MaybeT . runDB . getBy $ UniqueProfile ouid
    return (pid, profileUsername p) 
```

但是，唉，不行：

```
Foundation.hs:91:9:
    Couldn't match expected type `Maybe (t0, Text)'
                with actual type `(t1, t2)'
    In the pattern: (mpid, mprofilename)
    In a stmt of a 'do' block:
        (mpid, mprofilename) <- runMaybeT
            $ do { ouid <- MaybeT maybeAuthId;
                (Entity pid p) <- MaybeT . runDB . getBy $ UniqueProfile ouid;
                return (pid, profileUsername p) }
    In the expression:
        do { master <- getYesod;
             mmsg <- getMessage;
             maid <- maybeAuthId;
             (mpid, mprofilename) <- runMaybeT
                 $ do { ouid <- MaybeT maybeAuthId;
                 (Entity pid p) <- MaybeT . runDB . getBy
                     $ UniqueProfile ouid;
                                          .... };
           .... } 
```

我理解错误，但我没有解决它。

开导我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T20:04:54.523

您正在尝试将结果绑定为 a `(Maybe a, Maybe b)`，但它实际上是 a `Maybe (a, b)`。

你可以很容易地转换它：

```
unpairMaybe :: Maybe (a, b) -> (Maybe a, Maybe b)
unpairMaybe (Just (x, y)) = (Just x,  Just y)
unpairMaybe Nothing       = (Nothing, Nothing) 
```

那么这应该工作：

```
(mpid, mprofilename) <- liftM unpairMaybe $ runMaybeT $ do
                ouid <- MaybeT maybeAuthId
                (Entity pid p) <- MaybeT . runDB . getBy $ UniqueProfile ouid
                return (pid, profileUsername p) 
```

# javascript - Javascript：保险计划

> ID：13501042
> 
> 赞同：0
> 
> 时间：2012-11-21T19:54:08.233
> 
> 标签：javascript

制作一个简单的 javascript 程序，根据用户的年龄和婚姻状况将用户分类到特定的保险范围内。以下程序有效，但是当我测试程序时，我无法让程序正确区分 3 类和 4 类保险。我对javascript相当陌生，所以如果我有一些愚蠢的事情，请原谅。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

       <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
<title> Insurance Program </title>

<script type = "text/javascript">

function insurance(form)
{

var fname = form.firstname.value;
var sname = form.surname.value;
var age = form.age.value;
var insurance;

var marital = form.maritalstatus.value;

document.write(marital);

if (marital = 2 && age >= 30)
{
insurance = "Grade 1";
}

else if (marital = 1 && age > 30)
{
insurance = "Grade 2";
}

else if (marital = 2 && age < 30)
{
insurance = "Grade 3";
}

else if (marital = 1 && age < 30)
{
insurance = "Grade 4";
}

document.write("Thank you " + fname + " " + sname + "<br>");
document.write("You belong to " + insurance + " Insurance");

}

</script>

</head>

<body>

<h4> Insurance Program </h4>

<form>
Enter your first-name : <input type = "text" name="firstname"> 
Enter your surname : <input type = "text" name="surname"> <br>
Enter your age: <input type = "text" name="age"> <br>
Select your current marital status
<Select id ="maritalstatus" name = "maritalstatus">
<option value = "1"> Single </option>
<option value = "2"> Married </option>
</Select>

<input type = "submit" value = "submit" onclick="insurance(this.form)">
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:55:32.807

一方面，你`=`在应该使用的时候使用`===`。例子：

```
if (martial === 2 && age >= 30) 
```

`martial = 2`并且`martial = 1`总是正确的，所以最后两个 else if 是相同的。

参考：`=`是[赋值运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Assignment_Operators)，`==`和`===`是[比较运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)。

[JSF中](http://jsfiddle.net/KYKEQ/15/)：

```
if (parseInt(marital, 10) === 2 && parseInt(age, 10) >= 30) {
    ins = "Grade 1";
}
else if (parseInt(marital, 10) === 1 && parseInt(age, 10) >= 30) {
    ins = "Grade 2";
}
else if (parseInt(marital, 10) === 2 && parseInt(age, 10) < 30) {
    ins = "Grade 3";
}
else if (parseInt(marital, 10) === 1 && parseInt(age, 10) < 30) {
    ins = "Grade 4";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T19:56:04.977

你的问题是每一行看起来像这样：

```
martial = 1 && ... 
```

`marital = 1`设置`marital`为`1`。你想*比较* `marital`，`1`所以使用双等号：

```
martial == 1 && ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T19:56:26.607

您在操作数中误用`=`了符号`if`，如果您需要比较值，请使用`==`or with `===`（用于严格的类型检查）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T19:57:28.547

您的条件中应该有 '=='

武术 = 2 && 年龄 >= 30

武术 == 2 && 年龄 >= 30

因为 = 是赋值运算符，而 == 是比较。

# mono - Mono Keepass2 通过粘贴或使用退格键输入主密码时出现错误/错误

> ID：13501047
> 
> 赞同：1
> 
> 时间：2012-11-21T19:54:26.973
> 
> 标签：mono

1.  我使用 Ubuntu 12.04 Keepass 2.18 轻松地重现了这一点。我创建了一个新文件并保存到桌面。将主密码设置为“test”。当我关闭并重新打开同一个 kdbx 文件时，如果我输入“文本”，则工作正常。如果我在最后一个“t”之后按退格键，然后重新输入“t”，然后按“ok”，我会收到密钥文件错误，即使没有设置密钥文件并且密码应该相同。

2.  在 Ubuntu 12.04 上的 Keepass2 中，如果复制的文本包含符号，则在首次打开数据库文件时，我无法复制/粘贴到主密码字段中。当我粘贴像度数符号°这样的符号字符时，它不会粘贴。其他字符似乎粘贴得很好。粘贴功能出现在 rmb 菜单中，但是当我这样做时似乎什么也没发生？怎么了？

更新我应该注意到，在将密码粘贴到新的 Keepass2 条目时，我还看到插入了错误/虚假字符（例如小矩形）。似乎这可能是相关的。不确定它是否会影响大多数人，因为密码仍然可以粘贴（粘贴省略了文本字段中的虚假字符），但它可能会影响 Ubuntu 中使用的其他单声道密码字段。显然也可能使用户感到困惑。

创建新条目 将密码复制粘贴到密码字段 保存/关闭/重新打开条目 显示密码 在密码末尾附加小矩形

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-26T10:32:29.287

使用 Mono 时，我遇到了同样的密码字符问题。

[Keepassx](https://www.keepassx.org/screenshots/)在 Linux 上工作得更好，它是跨平台的，不需要 Mono。

```
apt-get install keepassx 
```

# java - 使用 J2ME 检测是否已按下相机按钮

> ID：13501049
> 
> 赞同：1
> 
> 时间：2012-11-21T19:54:36.517
> 
> 标签：java, java-me, camera

我正在尝试开发一个应用程序，我想知道相机按钮（如果手机有一个）何时被按下，用于使用 J2ME 的 Series60 等功能手机。我不想拍快照或拍视频。我只是想知道硬件按钮何时被按下。

我一直找不到合适的方法。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:44:45.180

创建一个画布，监听按键并将所有事件输出到屏幕。如果按下相机键时没有发生任何事件，则无法执行此操作。

# java - 如何使用递归类成员设置 Struts 表单

> ID：13501056
> 
> 赞同：-1
> 
> 时间：2012-11-21T19:55:13.307
> 
> 标签：java, struts, xdoclet

在为包含对同一类的成员引用的类设置 Struts 表单时，我发现了一个问题。

```
class ExampleBean {
  Integer id;
  String name;
  ExampleBean parent;

  // Constructors, getters, setters
} 
```

访问包含表单的网页时，该过程似乎进入了无限循环，直到它返回异常。

如果有任何帮助，我正在使用 xdoclet 生成表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:55:23.677

您没有提供足够的信息（所以我只能猜测发生了什么），但我认为这不是 Struts 的问题。

当您在 Struts 表单中使用嵌套属性时，您可以为 HTML 输入名称指定类似的内容：`parent.id`和`parent.name`.

当 Struts 在使用请求数据填充您的操作表单时发现这一点时，它会尝试在您`getParent().setId(...)`的`getParent().setName(...)`表单上执行操作。

如果`getParent()`返回 null，你会从 BeanUtils 中得到一个错误，类似于`java.lang.IllegalArgumentException: No bean specified`. 因此，为了使内部 bean 绑定起作用，您必须对其进行初始化，然后让 Struts 进行绑定。

你有没有机会做这样的事情：

```
class ExampleBean {
  Integer id;
  String name;
  ExampleBean parent = new ExampleBean();

  // Constructors, getters, setters
} 
```

因为这确实会导致无限递归以及`StackOverflowError`当 JVM 尝试创建实例时。

你真的应该展示你正在使用的完整代码！

**对于这种情况，`reset()`可以使用 Struts 表单方法。**您不在 bean 的内部属性中提供默认初始化，而是创建内部 bean 并在`reset()`方法内部的外部 bean 中对其进行初始化。

# java - JAX-RS 如何编写响应

> ID：13501057
> 
> 赞同：0
> 
> 时间：2012-11-21T19:55:20.217
> 
> 标签：java, jax-rs

我有以下代码：

```
@POST
@Path("query")
@Produces(MediaType.APPLICATION_JSON)
public MyObject myMethod(@FormParam("id") String id)
{
    //if some condition is met
    if(...)
      throw new WebApplicationException(Response.Status.SERVICE_UNAVAILABLE);
    else
      //proceed to my logic and return myObject
} 
```

所以基本上，如果我的 Web 客户端使用 AJAX 接收到 Response.Status.SERVICE_UNAVAILABLE，它将显示一个自定义网页。如果调用成功，它将显示一个不同的网页。

我的问题是：无论如何`myMethod`，我可以在`Response.Status.SERVICE_UNAVAILABLE`不抛出异常的情况下返回。就像是：

```
if(...)
   return Response.Status.SERVICE_UNAVAILABLE)
else
   //proceed my logic and return myObject 
```

我基本上希望客户知道此时无法满足其请求并显示自定义网页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:19:21.890

你的方法应该返回一个`Response`，而不是`MyObject`：

```
@POST
@Path("query")
@Produces(MediaType.APPLICATION_JSON)
public Response myMethod(@FormParam("id") String id) {
  if (/* error */) {
    return Response.status(Response.Status.SERVICE_UNAVAILABLE).build();
  }
  return Response.ok().entity(new MyObject(/* ... */)).build();
} 
```

但是，我强烈建议在`WebApplicationException`这种情况下使用，主要是为了将常规情况和异常情况进行逻辑分离。此`SERVICE_UNAVAILABLE`响应状态（HTTP 代码`503`）是错误的明确指示，而不是正常的执行流程。

# html - CSS 表格单元格大小问题

> ID：13501061
> 
> 赞同：3
> 
> 时间：2012-11-21T19:55:38.640
> 
> 标签：html, css

我创建了一个包含两行的 CSS 表格布局 - 第一个单元格包含一个图像，第二个单元格包含一个标题。在此之下，会出现内容，但这不是问题。

每当我尝试这个时，我都会为顶部表格行获得大量超大的表格单元格，我似乎无法调整其大小。任何帮助，将不胜感激。

![问题的图像](../Images/9bfbdd5a6ed6b0b22e1fa007ba352891.png)

我已经对表格单元格进行了颜色编码，橙色块是图像。下面的空白区域似乎已经创建，因为蓝色表格单元格太大了。

```
<div class="table">
        <div class="tr-header">
            <div class="image-cell">
                <img src="orange.png"/>
            </div>
            <div class="title">
            <h1>title</h1>
            </div>
        </div>
        <div></div>
        <div class="tr-content">
            <div class="content">
                <!-- Lorem Ipsum -->            
            </div>
        </div>
</div> 
```

和CSS：

```
 *
    {
    margin:0px;
    padding:0px;
    }
    #table
    {
    display: table;
    }
    .tr-header
    {
    width:100%;
    display: table-row;
    height:185px;
    }
    img
    {
    width: 285px;
    height: 185px;
    }
    .image-cell
    {
    width:285px;
    height:185px;
    display: table-cell;
    }
    .title
    {
    display: table-cell;
    background-color:blue;
    width:100%;
    height:185px;
    }
    .tr-content
    {
    display: table-row;
    }
    .content
    {
    background-color:yellow;
    display: table-cell;
    width:100%;
    } 
```

如果颜色编码没有帮助，或者我的代码不容易阅读，或者我刚刚犯了一个愚蠢的错误，我深表歉意，但我已经搜索了 W3 的网站以及以前的 stackoverflow 问题。

提前致谢。

编辑：

添加 vertical-align:top 到 .title 大大减少了问题，但我仍然剩下这个：

![编辑](../Images/66f7d546533e50200ce4940bb97b90e9.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T20:15:19.900

您需要始终担心与表格的垂直对齐 - 即使是 CSS 样式的表格。

只需在标题类中添加一个垂直对齐属性：

```
.title {
display: table-cell;
vertical-align: top;
background-color:blue;
width:100%;
height:185px;
} 
```

# vb.net - VB.NET - 关闭连接对象和命令对象

> ID：13501063
> 
> 赞同：0
> 
> 时间：2012-11-21T19:55:46.407
> 
> 标签：vb.net

请看下面的代码：

```
Public Class Form1
    Private _ConString As String
    Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim objDR As SqlDataReader
        Dim objCommand As SqlCommand
        Dim objCon As SqlConnection
        Dim id As Integer
        Try
            _ConString = ConfigurationManager.ConnectionStrings("TestConnection").ToString
            objCon = New SqlConnection(_ConString)
            objCommand = New SqlCommand("SELECT * FROM Person")
            objCommand.Connection = objCon
            objCon.Open()
            objDR = objCommand.ExecuteReader(ConnectionState.Closed)
            Do While objDR.Read
                id = objDR("URN")
            Loop
            objDR.Close() 'line 16
        Catch ex As Exception
            throw
        Finally

        End Try

    End Sub
End Class 
```

连接对象在第 16 行关闭。请看下面的代码：

```
Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim objDR As SqlDataReader
        Dim objCommand As SqlCommand
        Dim objCon As SqlConnection
        Dim id As Integer
        Try
            _ConString = ConfigurationManager.ConnectionStrings("TestConnection").ToString
            objCon = New SqlConnection(_ConString)
            objCommand = New SqlCommand("SELECT * FROM Person")
            objCommand.Connection = objCon
            objCon.Open()
            Using objCon
                Using objCommand
                    objDR = objCommand.ExecuteReader()
                    Do While objDR.Read
                        id = objDR("URN")
                    Loop
                End Using
            End Using
            objDR.Close() 'line 16
        Catch ex As Exception
           throw
        Finally

        End Try

    End Sub 
```

我注意到在这两种情况下，连接对象和命令对象在关闭后仍然具有状态（通过按照代码示例 1 关闭数据读取器或按照代码示例 2 移出 Using 语句）。这可能是内存泄漏的根源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:19:28.100

你应该做这样的事情......

```
Using Conn as new SqlConnection(_ConString)
 Dim cmd as New SqlCommand(Conn, "Select * FROM Person");
   id = Convert.ToInt32(cmd.ExecuteScalar())
End Using 
```

如果必须，请尝试将其包装起来，但前提是您要以某种方式处理它。（一个简单的“投掷”不会处理任何事情。）

您还使用 DataReader（迭代，仅转发）数据访问组件来获取单个值。您可能希望使用[ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx) () 来简化该代码。

除此之外，不要将“已处置”与“已关闭”混淆。.NET 框架为您管理垃圾收集。如果您想处理连接和命令对象，请在它们上调用 .Dispose() （但 Using 会为您处理这个！！！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:37:30.887

回复：*这可能是内存泄漏的根源吗？* 不，不应该。

还有，这个：

```
 objDR = objCommand.ExecuteReader()
            Do While objDR.Read
                id = objDR("URN")
            Loop 
```

看起来很糟糕，因为它遍历所有行并覆盖 id 值。最后一行设置以 ID 中的值结束。您正在从一组多行中获取一个结果。如果您只想要`max(URN)`from `Person`，您可以编写命令来返回该结果。

# c# - 加载一个 ObservableCollection 有一个任务

> ID：13501064
> 
> 赞同：3
> 
> 时间：2012-11-21T19:55:49.850
> 
> 标签：c#, task-parallel-library

我正在尝试加载我们活动目录中的所有用户并将它们显示在 ListBox 中。但是，如果我像往常一样这样做，我会长时间冻结 UI 线程。那么无论如何我可以使用一个任务在后台线程上填充这个集合，同时在我插入新名称时仍然让列表框更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:18:10.920

由于您无法在单独的线程（或任务，等等）中加载所有数据然后填充 ObservableCollection，因此您可以将当前 Dispatcher 传递给操作并使用其 InvokeAsync 方法将元素一一添加到 Observable 集合中用户界面线程。像这样的东西：

```
public void FetchAndLoad()
    {
        // Called from the UI, run in the ThreadPool
        Task.Factory.StartNew( () =>
        this.FetchAsync(e => this.Dispatcher.InvokeAsync(
            () => this.observableCollection.Add(e)
            )
        ));
    }

    public void Fetch(Action<string> addDelegate)
    {
                    // Dummy operation
        var list = new List<string>("Element1", "Element2");

        foreach (var item in list)
            addDelegate(item);
    } 
```

不过，我会分批执行此操作，具体取决于元素的数量。

# php - 将 HTML 变量转换为 PHP 标记

> ID：13501066
> 
> 赞同：-2
> 
> 时间：2012-11-21T19:55:51.743
> 
> 标签：php, web

我刚刚开始 PHP/Html Web 开发。我有一个带有用户名和密码字段以及提交按钮的基本页面。我想从用户名和密码框中获取数据到 php.ini 中。

这是我的代码...

```
<html>
<head>
    <title>PAGE TITLE</title>
</head>
<body>
    <h1 align = "center">Harro</h2>
    <form align = "center">
        Username: <input type="text" name="firstname"> <br>
        Password: <input type="password" name="pwd"> <br>
        <input type="submit" value="Enter"> 
        <?php

            ???

        ?>
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:58:28.260

`action`使用该属性指定表单应提交到的 PHP 程序的 URI 。

```
<form action="foo.php"> 
```

然后，*当表单提交时*，PHP 将使用数据填充`$_GET`或`$_POST` [超全局](http://php.net/manual/en/language.variables.superglobals.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:10:29.587

你想要的是从头开始学习编写 PHP Web 应用程序。

目前，您从答案中得到的只是从用户那里获取`Username`和的代码`Password`。但最重要的是在那之后。就像验证一样，从数据库中检查登录信息，然后检索它。

就个人而言，我建议您阅读 O'Reilly Media 的[Learning PHP, MySQL, JavaScript, and CSS](http://shop.oreilly.com/product/0636920023487.do)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:01:16.260

在提交按钮中添加名称属性，例如：name="submit"

和

在表单标签中添加属性 method="post"

并在顶部编写php代码

```
<?php
   if(isset($_POST['submit'])){
     echo "USERNAME ".$_POST['firstname'];
     echo "PASSWORD ". $_POST['pwd'];
  }
?> 
```

# refactoring - 在多个 mapper.xml 中重用 MyBatis ResultMap

> ID：13501069
> 
> 赞同：18
> 
> 时间：2012-11-21T19:56:03.293
> 
> 标签：refactoring, mybatis, resultset, mappers

我想重新使用来自不同 *Mapper.xml 文件的特定文件，这些文件都以某种方式读取相同的对象。

我有一个名为 Project 的数据库表，我为它创建了以下 resultMap：

```
<resultMap id="ProjectMap" type="com.model.Project">
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="client_prj_no" jdbcType="VARCHAR" property="clientPrjNo" />
    <result column="notes" jdbcType="VARCHAR" property="notes" />
    <result column="start_date" jdbcType="TIMESTAMP" property="startDate" />
    ...
<resultMap> 
```

它在 ProjectMapper.xml 中效果很好，但是，现在我想创建一个 ClientWithProjectsMapper.xml，我想在其中 SELECT * FROM CLIENT, PROJECT where PROJECT.CLIENT_ID = CLIENT.ID 并让 Client 对象返回一个 List 对象。换句话说，我想用一条 SQL 获得一个 ClientWithProjects。

在我的映射中，我想重用我在 ProjectMapper.xml 中定义的 ProjectMap（无需复制/粘贴），但我不知道如何实现这一点。

我可以将 ProjectMap 分解为一个单独的文件，但我没有在 MyBatis 中找到任何工具来#include 其他文件。

关于如何做到这一点的任何想法？（我正在使用 Maven，是否有任何插件可以过滤查找#include 等的文件，并将文件的内容直接包含到正在处理的文件中？）。

谢谢。

-AP_

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-28T05:04:31.317

在 mybatis-config.xml 文件中导入所有映射器 xml 后，您可以使用 resultMap id 和命名空间来引用在任何映射器 xml 中配置的 ResultMaps。

例如：ProjectMapper.xml

```
<mapper namespace="com.mybatisapp.mappers.ProjectMapper">
    <resultMap id="ProjectMap" type="com.model.Project">
        <id column="id" jdbcType="BIGINT" property="id" />
        <result column="name" jdbcType="VARCHAR" property="name" />     
    <resultMap>
</mapper> 
```

在 ClientWithProjectsMapper.xml

```
 <select id="selectProjectsByClient" parameterType="int" 
resultMap="com.mybatisapp.mappers.ProjectMapper.ProjectMap">
    select * from blahblah
    </select> 
```

**在这里，您可以使用完全限定名称“com.mybatisapp.mappers.ProjectMapper.ProjectMap”**在另一个 Mapper xml 文件中引用 resultMap

# c++ - C++：继承基类方法

> ID：13501071
> 
> 赞同：0
> 
> 时间：2012-11-21T19:56:07.877
> 
> 标签：c++, oop

我有这个简单的代码：

```
class A {
public:
   string toString() const { return "A"; }
};

class B : public A {
public:
   string toString() const { // some code here }
}; 
```

我想`toString()`在 B 类中从 A 类继承并获取一些额外的值。在此示例中，将为：“AB”（A：来自 A 类，B：额外字符串）。

这在 Java 中很容易，但我不知道如何在 C++ 中进行。我的第一个想法是从`toString()`A 类中获取字符串并附加额外的字符串。所以，采取这个：我使用： `static_cast<A>(const_cast(this))->toString()`但它不会工作:(

请帮我。谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T19:58:08.903

```
class A {
public:
   string toString() const { return "A"; }
};

class B : public A {
public:
   string toString() const { return A::toString() + "B"; }
}; 
```

在 MS 实现中（在 Windows 上），您可以改用 __super::toString() ，但这是一个不可移植的 MS 扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T19:57:56.293

```
string B::toString() const {
   string result = A::toString();   // calls the member method in A
                                    // on the current object
   result += "B";
   return result;
} 
```

对函数调用的限定决定了将调用哪个函数覆盖（如果函数是多态的），因此它确保动态调度不会`B::toString()`再次调度。与 Java 的主要区别在于，由于 C++ 允许多重继承，因此您必须命名基`A::`类，而不仅仅是调用`super`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T20:00:34.657

首先，您可能希望 toString 是虚拟的。其次，要完成你想要的，你可以在 B::toString 中做这样的事情：

```
class B : public A
{
    ...
    virtual string toString() const
    {
        string s = A::toString();
        s += "B";
        return s;
    }
    ... 
```

# jquery - href="mailto:" 在 jQuery 可折叠集中不起作用

> ID：13501074
> 
> 赞同：0
> 
> 时间：2012-11-21T19:56:15.643
> 
> 标签：jquery, css

知道为什么最后一个可折叠文件中的邮件链接不起作用吗？显示，但点击时链接不起作用：

```
<div data-role="page" id="info"> 

<img src="images/bb.jpg" class="background"></img>

<div data-role="header">
    <h1>Info</h1>

</div><!-- /header -->

<div data-role="content">

  <div data-role="collapsible-set">

    <div data-role="collapsible" class="colset">
         <h3>Text</h3>
         <p>text</p> 
         <p>more text</p>
    </div>

    <div data-role="collapsible" class="colset">
         <h3>Text 2</h3>
            <p>details 2</p> 
         </div>

    <div data-role="collapsible" class="colset">
        <h3>About</h3>
        <p>text 3</p>
        <p>text 4</p>
        <a href="mailto:info@example.com">Mail me</a>
    </div>
  </div>     

  </div><!-- /content-->

</div><!-- /page info --> 
```

CSS 如下所示：

```
.colset {

    background: #ddf0f8

} 
```

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:48:33.283

您使用的是什么网络浏览器？如果您碰巧使用的是 Firefox，请查看[这篇文章](https://support.mozilla.org/en-US/questions/791166)。

此外，您可能希望禁用某些附加组件，以防这些链接出于安全原因被阻止。

或者，您可能想尝试这种方法，看看它是否有帮助。

> 一个可能的解决方案可能是通过转到控制面板 --> 默认程序 --> 设置您的程序默认值，单击 Windows Live Mail 或其他一些邮件程序来重置邮件客户端，并确认它被设置为默认邮件程序. 如果 Windows Live Mail 不工作，那么检查其他人是否工作可能会很有用，以查明是否是导致问题的 Windows Live Mail。

# javascript - 在 .NET MVC3 中使用 jQuery 加载脚本

> ID：13501076
> 
> 赞同：0
> 
> 时间：2012-11-21T19:56:21.270
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3

我目前正在使用 jQuery 的 .load 加载模型。成功加载后，我想执行一些依赖于加载模型的 JavaScript。

```
buildFindOrderDialog: function () {
    workflowDialogContent.load('../../csweb/Orders/FindOrderDialog/', function () {
        $.getScript('~/Scripts/FindOrderDialogModel.js');
        workflowDialog.dialog('open');
    });
} 
```

load 方法执行 Order Controller 的 FindOrderDialog 方法，该方法返回一个 ViewModel。加载后，我想运行我的 FindOrderDialogModel javascript 来影响模型客户端。

上面的代码没有正确加载 javascript。我想知道：我的控制器是否必须提供加载 javascript 的方法？客户端没有相对路径的概念。

当然，我可以将脚本内联到 FindOrderDialog 视图中，这会导致它在加载后执行，但这似乎有点小技巧。

**更新：**我的语法有点不对劲。这有效：

```
buildFindOrderDialog: function () {
    workflowDialogContent.load('../../csweb/Orders/FindOrderDialog/', function () {
        $.getScript('../Scripts/Orders/FindOrderDialogModel.js');
        workflowDialog.dialog('open');
    });
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:08:04.173

如果我正确理解了您的问题，那么

```
$.getScript('Scripts/FindOrderDialogModel.js'); 
```

或者指定完整路径：

```
$.getScript('/My/Full/Path/Scripts/FindOrderDialogModel.js'); 
```

或者最后，通过 ASP.NET 注入相对路径：

```
$.getScript('<%= .NET CODE FOR RETRIEVING PATH USING THE ~ SIGN %>'); 
```

# glsl - GLSL中的高效双三次过滤代码？

> ID：13501081
> 
> 赞同：14
> 
> 时间：2012-11-21T19:56:39.820
> 
> 标签：glsl, fragment-shader, bicubic

我想知道是否有人拥有完整、有效且有效的代码来在 glsl 中进行双三次纹理过滤。有这个：

[http://www.codeproject.com/Articles/236394/Bi-Cubic-and-Bi-Linear-Interpolation-with-GLSL](http://www.codeproject.com/Articles/236394/Bi-Cubic-and-Bi-Linear-Interpolation-with-GLSL) 或 [https://github.com/visionworkbench/visionworkbench/blob/master/src/vw/ GPU/着色器/Interp/interpolation-bicubic.glsl](https://github.com/visionworkbench/visionworkbench/blob/master/src/vw/GPU/Shaders/Interp/interpolation-bicubic.glsl)

但两者都进行了 16 次纹理读取，其中只需要 4 次：

[https://groups.google.com/forum/#!topic/comp.graphics.api.opengl/kqrujgJfTxo](https://groups.google.com/forum/#!topic/comp.graphics.api.opengl/kqrujgJfTxo)

然而，上面的方法使用了一个我不知道它应该做什么的缺失的“cubic()”函数，并且还采用了一个无法解释的“texscale”参数。

还有 NVidia 版本：

[https://developer.nvidia.com/gpugems/gpugems2/part-iii-high-quality-rendering/chapter-20-fast-third-order-texture-filtering](https://developer.nvidia.com/gpugems/gpugems2/part-iii-high-quality-rendering/chapter-20-fast-third-order-texture-filtering)

但我相信这使用了 CUDA，这是 NVidia 显卡特有的。我需要gsl。

我可能可以将 nvidia 版本移植到 glsl，但我想我会先询问是否有人已经拥有完整的、工作的 glsl 双三次着色器。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2017-02-11T18:55:09.223

我发现这个实现可以用作 texture() 的替代品（来自[http://www.java-gaming.org/index.php?topic=35123.0](http://www.java-gaming.org/index.php?topic=35123.0)（一个错字已修复））：

```
// from http://www.java-gaming.org/index.php?topic=35123.0
vec4 cubic(float v){
    vec4 n = vec4(1.0, 2.0, 3.0, 4.0) - v;
    vec4 s = n * n * n;
    float x = s.x;
    float y = s.y - 4.0 * s.x;
    float z = s.z - 4.0 * s.y + 6.0 * s.x;
    float w = 6.0 - x - y - z;
    return vec4(x, y, z, w) * (1.0/6.0);
}

vec4 textureBicubic(sampler2D sampler, vec2 texCoords){

   vec2 texSize = textureSize(sampler, 0);
   vec2 invTexSize = 1.0 / texSize;

   texCoords = texCoords * texSize - 0.5;

    vec2 fxy = fract(texCoords);
    texCoords -= fxy;

    vec4 xcubic = cubic(fxy.x);
    vec4 ycubic = cubic(fxy.y);

    vec4 c = texCoords.xxyy + vec2 (-0.5, +1.5).xyxy;

    vec4 s = vec4(xcubic.xz + xcubic.yw, ycubic.xz + ycubic.yw);
    vec4 offset = c + vec4 (xcubic.yw, ycubic.yw) / s;

    offset *= invTexSize.xxyy;

    vec4 sample0 = texture(sampler, offset.xz);
    vec4 sample1 = texture(sampler, offset.yz);
    vec4 sample2 = texture(sampler, offset.xw);
    vec4 sample3 = texture(sampler, offset.yw);

    float sx = s.x / (s.x + s.y);
    float sy = s.z / (s.z + s.w);

    return mix(
       mix(sample3, sample2, sx), mix(sample1, sample0, sx)
    , sy);
} 
```

示例：最近的、双线性的、双三次的：

[![在此处输入图像描述](../Images/1284cdbdb3eb4c715f4d6462d6eace4d.png)](https://i.stack.imgur.com/Spbl4.png)

该图像的 ImageData 是

```
{{{0.698039, 0.996078, 0.262745}, {0., 0.266667, 1.}, {0.00392157, 
   0.25098, 0.996078}, {1., 0.65098, 0.}}, {{0.996078, 0.823529, 
   0.}, {0.498039, 0., 0.00392157}, {0.831373, 0.00392157, 
   0.00392157}, {0.956863, 0.972549, 0.00784314}}, {{0.909804, 
   0.00784314, 0.}, {0.87451, 0.996078, 0.0862745}, {0.196078, 
   0.992157, 0.760784}, {0.00392157, 0.00392157, 0.498039}}, {{1., 
   0.878431, 0.}, {0.588235, 0.00392157, 0.00392157}, {0.00392157, 
   0.0666667, 0.996078}, {0.996078, 0.517647, 0.}}} 
```

我试图重现这一点（许多其他插值技术）

[![在此处输入图像描述](../Images/5379e0807d9266bfd9268d024395f6db.png)](https://i.stack.imgur.com/Spbl4.png)

但他们有夹住填充，而我有重复（包装）边界。因此并不完全相同。

似乎这种双三次业务不是适当的**插值**，即它不会在定义数据的点处采用原始值。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-05-21T13:32:36.647

我决定花一点时间挖掘我以前的 Perforce 活动，并找到了缺失的 cube() 函数；请享用！:)

```
vec4 cubic(float v)
{
    vec4 n = vec4(1.0, 2.0, 3.0, 4.0) - v;
    vec4 s = n * n * n;
    float x = s.x;
    float y = s.y - 4.0 * s.x;
    float z = s.z - 4.0 * s.y + 6.0 * s.x;
    float w = 6.0 - x - y - z;
    return vec4(x, y, z, w);
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-09T19:47:02.277

[JAre 的答案](/a/13502446)`cubic()`中缺少的函数可能如下所示：

```
vec4 cubic(float x)
{
    float x2 = x * x;
    float x3 = x2 * x;
    vec4 w;
    w.x =   -x3 + 3*x2 - 3*x + 1;
    w.y =  3*x3 - 6*x2       + 4;
    w.z = -3*x3 + 3*x2 + 3*x + 1;
    w.w =  x3;
    return w / 6.f;
} 
```

它返回三次 B 样条的四个权重。

这一切都在[NVidia Gems](http://http.download.nvidia.com/developer/SDK/Individual_Samples/DEMOS/OpenGL/src/fast_third_order/docs/Gems2_ch20_SDK.pdf)中进行了解释。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-05-21T10:34:26.683

哇。我在 2011 年初提出了上面的代码（我无法评论声誉 < 50）。我试图解决的问题与旧的 IBM T42 （抱歉，确切的型号让我忘记了）笔记本电脑和它是 ATI 图形堆栈。我在 NV 卡上开发了代码，最初我使用了 16 个纹理提取。对于我的目的来说，这有点慢但足够快。当有人报告它在他的笔记本电脑上不起作用时，很明显他们不支持每个片段的足够纹理提取。我不得不设计一个变通方法，我能想到的最好的办法就是使用可以工作的纹理提取数量来做到这一点。

我是这样想的：好的，所以如果我用线性滤波器处理每个四边形（2x2），剩下的问题是行和列可以共享权重吗？这是我着手编写代码时唯一想到的问题。当然可以共享它们；每列和每行的权重相同；完美的！

现在我有四个样品。剩下的问题是如何正确组合样本。这是要克服的最大障碍。用铅笔和纸花了大约 10 分钟。我用颤抖的手输入了代码，它工作了，很好。然后我将二进制文件上传给承诺在他的 T42 上检查它的人（？），他报告说它有效。结束。:)

我可以保证方程检查出来并给出数学上相同的结果来单独计算样本。仅供参考：使用 CPU，分别进行水平和垂直扫描会更快。使用 GPU 多次传递并不是一个好主意，尤其是在典型用例中它可能无论如何都不可行时。

深思熟虑：可以对cubic() 函数使用纹理查找。哪个更快取决于 GPU，但一般来说，ALU 端的采样器很轻，只是做算术会平衡事情。YMMV。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-21T21:37:56.937

*（编辑）*

*   Cubic() 是[三次样条函数](http://tinyurl.com/g6yyb)

    例子：

![三次样条](../Images/17e5ae0047b9822b1f458b30ac1d320f.png)

*   Texscale 是采样窗口大小系数。您可以从 1.0 值开始。

* * *

```
vec4 filter(sampler2D texture, vec2 texcoord, vec2 texscale)
{
    float fx = fract(texcoord.x);
    float fy = fract(texcoord.y);
    texcoord.x -= fx;
    texcoord.y -= fy;

    vec4 xcubic = cubic(fx);
    vec4 ycubic = cubic(fy);

    vec4 c = vec4(texcoord.x - 0.5, texcoord.x + 1.5, texcoord.y -
0.5, texcoord.y + 1.5);
    vec4 s = vec4(xcubic.x + xcubic.y, xcubic.z + xcubic.w, ycubic.x +
ycubic.y, ycubic.z + ycubic.w);
    vec4 offset = c + vec4(xcubic.y, xcubic.w, ycubic.y, ycubic.w) /
s;

    vec4 sample0 = texture2D(texture, vec2(offset.x, offset.z) *
texscale);
    vec4 sample1 = texture2D(texture, vec2(offset.y, offset.z) *
texscale);
    vec4 sample2 = texture2D(texture, vec2(offset.x, offset.w) *
texscale);
    vec4 sample3 = texture2D(texture, vec2(offset.y, offset.w) *
texscale);

    float sx = s.x / (s.x + s.y);
    float sy = s.z / (s.z + s.w);

    return mix(
        mix(sample3, sample2, sx),
        mix(sample1, sample0, sx), sy);
} 
```

[来源](https://groups.google.com/forum/?fromgroups=#!topic/comp.graphics.api.opengl/kqrujgJfTxo)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-08-05T09:21:08.677

对于任何对 GLSL 代码进行**三次**三次插值感兴趣的人，可以在以下示例/glCubicRayCast 文件夹中找到使用三次插值的光线投射代码： [http ://www.dannyruijters.nl/cubicinterpolation/CI.zip](http://www.dannyruijters.nl/cubicinterpolation/CI.zip)

编辑：三次插值代码现在在 github 上可用：[CUDA](https://github.com/DannyRuijters/CubicInterpolationCUDA)版本和[WebGL](https://github.com/DannyRuijters/CubicInterpolationWebGL)版本，以及[GLSL](https://github.com/DannyRuijters/CubicInterpolationCUDA/tree/master/examples/glCubicRayCast)示例。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-18T18:35:55.513

我已经使用 @Maf 的三次样条配方一年多了，如果三次 B 样条满足您的需求，我推荐它。

但我最近意识到，对于我的特定应用，强度在采样点处完全匹配非常重要。所以我改用了 Catmull-Rom 样条，它使用了一个稍微不同的配方，如下所示：

```
// Catmull-Rom spline actually passes through control points
vec4 cubic(float x) // cubic_catmullrom(float x)
{
    const float s = 0.5; // potentially adjustable parameter
    float x2 = x * x;
    float x3 = x2 * x;
    vec4 w;
    w.x =    -s*x3 +     2*s*x2 - s*x + 0;
    w.y = (2-s)*x3 +   (s-3)*x2       + 1;
    w.z = (s-2)*x3 + (3-2*s)*x2 + s*x + 0;
    w.w =     s*x3 -       s*x2       + 0;
    return w;
} 
```

我在以下的讲义中找到了这些系数，以及其他一些三次样条曲线的系数： [http ://www.cs.cmu.edu/afs/cs/academic/class/15462-s10/www/lec -幻灯片/lec06.pdf](http://www.cs.cmu.edu/afs/cs/academic/class/15462-s10/www/lec-slides/lec06.pdf)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-21T10:00:39.250

我认为 Catmull 版本可以通过 4 次纹理查找来完成，方法是 (a) 将输入纹理排列为像棋盘一样，将备用槽保存为正数和负数，以及 (b) 对 textureBicubic 进行相关修改。这将取决于贡献/权重 wx/ww 始终为负，而贡献 wy/wz 始终为正。我没有仔细检查这是否属实，或者修改后的 textureBicubic 的外观。

...我已经验证 w 贡献确实满足 +ve -ve 规则。

# java - 类转换异常

> ID：13501085
> 
> 赞同：-4
> 
> 时间：2012-11-21T19:57:06.880
> 
> 标签：java, exception-handling

我写了一个有一些转换错误的方法：

```
public class Factor {
    public static int[] findFactors(ArrayList<Integer> nums){
        ArrayList<Integer> factors= new ArrayList();

        for(Integer i=new Integer(0);i<nums.size();i++) {

            System.out.println(nums.get(i));
            for(int j=0;j<nums.get(i);j++) {
                if (nums.get(i) %j==0) {
                    factors.add(j);
                }
            }
        }

        int ct=0;
        String factorString= factors.toString();
        char[] charArray= factorString.toCharArray();
        int[] factorArray= new int[(charArray.length+1)/2]; 

        for(int a=0;a<charArray.length;a++) {
            if(charArray[a]==',') {
                continue;
            } else { 
                String s= Character.toString(charArray[a]);
                factorArray[ct]=Integer.parseInt(s);
                ct++;
            }
        }
        return factorArray;
    }
} 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:28:42.553

您遇到的问题是您只能转义，`,`但是当您`toString()`在 List 上使用它时，它会被括在方括号`[]`中。当您修复它时，您会发现结果数组的大小无效，您还必须减去 2（括号）。

祝你好运。请阅读一些关于 Java 的基本手册。

# python - 具有用户定义的 cmp 函数的 python 排序函数

> ID：13501088
> 
> 赞同：8
> 
> 时间：2012-11-21T19:57:17.160
> 
> 标签：python, sorted

我想使用各种比较器功能对字典中的项目进行排序。请参阅下面的示例代码。这是使用 cmpRatio 函数和 sorted() 不起作用的最后一部分。我不确定我做错了什么。提前感谢您的任何想法！

```
mydict = { 'a1': (1,6),
          'a2': (10,2),
          'a3': (5,3),
          'a4': (1,2),
          'a5': (3,9),
          'a6': (9,7) }

# sort by first element of the value tuple: WORKS
print sorted(mydict.iteritems(), key=lambda (k,v): v[0])

# sort by second element of the value tuple: WORKS
print sorted(mydict.iteritems(), key=lambda (k,v): v[1])

# THIS is what I can't get working:
def cmpRatio(x,y):
   sx = float(x[0])/x[1]
   sy = float(y[0])/y[1]
   return sx < sy

# sort by sum of the elements in the value tuple: DOES NOT WORK
print sorted(mydict.iteritems(), key=lambda (k,v): v, cmp=cmpRatio) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T20:01:11.190

尽可能避免`cmp`使用函数，因为它们很慢。每次比较都必须重新评估它们。使用 a`key`使得密钥只需要计算一次。

```
print sorted(mydict.iteritems(), key=lambda (k,v): float(v[0])/v[1]) 
```

此外，您说您想按价值项的总和进行排序，但您正在按差异排序。总和看起来像：

```
print sorted(mydict.iteritems(), key=lambda (k,v): sum(v)) 
```

正如其他答案中所提到的，出于真正想要定义`cmp`函数的目的，您没有返回正确的值（必须是-1、0 或 1）。

```
return cmp(sx,sy) 
```

但是，如果您只是使用 lambda 来获取值，则可以将其替换为`itemgetter`应该比 python 端函数更快的值：

```
from operator import itemgetter

print sorted(mydict.iteritems(), key=itemgetter(1), cmp=cmpRatio) 
```

如果您尝试存储排序操作，最好存储关键函数：

```
key_ops = {
    'sum': lambda (k,v): sum(v),
    'ratio': lambda (k,v): float(v[0])/v[1]),
}

def print_op(aDict, opName):
    print sorted(aDict.iteritems(), key=key_ops[opName])

... # some place later in code
print_op(mydict, 'sum') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T20:01:48.740

当第一个参数是（小于/等于/大于）第二个值（与`std::sort(...)`C++ 中给出的比较器不同）时，您的比较函数应该返回一个（负/零/正）值。

即代替

```
return sx < sy 
```

做

```
return cmp(sx,sy) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T20:00:33.843

如果您想按值元组的总和进行排序（根据您的评论），您可以使用：

```
print sorted(mydict.iteritems(), key=lambda v: sum(v[1])) 
```

如果您想按比率排序（根据您的代码）：

```
print sorted(mydict.iteritems(), key=lambda v: float(v[1][0])/v[1][1]) 
```

# objective-c - NSMetaDataQuery 从不使用 NSMetadataQueryDidFinishGatheringNotification 回调

> ID：13501095
> 
> 赞同：7
> 
> 时间：2012-11-21T19:57:38.993
> 
> 标签：objective-c, ios, icloud, nsnotificationcenter, nsmetadataquery

对于我正在编写的 iCloud 插件，我将我的 iCloud 管理器类订阅到这些 iCloud NSMetaDataQuery 观察者：

```
// Add a predicate for finding the documents
NSString* filePattern = [NSString stringWithFormat:@"*.%@", @"*"];

self.metadataQuery = [[NSMetadataQuery alloc] init];

// Before starting to query, it is required to set the search scope.
arrayWithObject:NSMetadataQueryUbiquitousDocumentsScope]];

// It is also required to set a search predicate.
[self.metadataQuery setPredicate:[NSPredicate predicateWithFormat:@"%K LIKE %@", NSMetadataItemFSNameKey, filePattern]];

// Listen for the second phase live-updating
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(queryDidReceiveNotification:) name:NSMetadataQueryDidUpdateNotification object:nil];

// Listen for the first phase gathering
[[NSNotificationCenter defaultCenter] addObserver:self
                                      selector:@selector(queryIsDoneGathering:) name:NSMetadataQueryDidFinishGatheringNotification
                                           object:nil];

[self.metadataQuery startQuery]; 
```

问题是这些选择器实际上都没有被回调，甚至一次都没有，我特别需要*NSMetaDataQueryDidUpdateNotification*来跟踪云中文件的上传/下载进度。

奇怪的是，前几天我有这个工作，但不知何故它只是停止工作，我一直盲目地试图弄清楚问题到底是什么。通过订阅*NSMetadataQueryDidStartGatheringNotification*我可以看到它确实开始了，但就像它永远不会结束一样。这很奇怪。

我想知道是否有人对上述代码有什么问题有任何线索？或者我还能在哪里寻找问题。

感谢您的时间 ：）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-29T11:36:22.133

确保`NSMetadataQuery`在主线程中启动。当时没有记录此要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-07T23:14:54.567

这是一个非常值得挖掘的秘密。我不知道你现在是否已经放弃了，但最后，我也许能帮上忙。

事实证明，对于某些（全部？）C++ 应用程序配置，有一个不会自动运行的消息泵。在我的应用程序中，在我的调用之后放置这样的循环后，我终于开始获得预期的回调`[m_query startQuery]`：
`// make it look syncronous for now while( m_state != finished ) { Check_For_Interruption(); [[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:timeslice]]; //<--**this line is the key** }`
其中设置回调以正确更新`m_state`变量。

我的示例只是阻塞，使用它自己的线程时间片来运行循环（除非被达到超时中断），但这也可以以异步方式设置。

**对于那些过度支持传统支持的人来说，另一件需要注意的事情是：**
这种方法确实导致应用程序开始在 OS X 10.9 和更早版本上泄漏 mach 端口。不过，还没有看到任何比这更新的问题。

# android - 未调用自定义 EditTextPreference 和 setOnPreferenceChangeListener

> ID：13501099
> 
> 赞同：2
> 
> 时间：2012-11-21T19:57:47.260
> 
> 标签：android

我的听众由于某种原因没有被叫到？这就是我所拥有的：

在首选项文件中，我有一个自定义的 EditTextPreference：

```
 <com.xxx.yyy.preference.PreferenceEditTextDialog
        android:layout="@layout/preference_edit"
        android:title="@string/title"
        android:summary="@string/summary"
        android:defaultValue=""
        android:dialogTitle="@string/dialogTitle"
        android:key="mypref"/> 
```

我扩展了我的课程：

```
public class PreferenceEditTextDialog extends EditTextPreference { 
```

启动我的活动：

```
startActivity(new Intent(this, PrefsActivity.class)); 
```

定义：

```
public class PrefsActivity extends PreferenceActivity implements   
OnPreferenceClickListener, OnSharedPreferenceChangeListener { 
```

在这里，我注册了我的 setOnPreferenceChangeListener （未调用）。

但是将我的首选项文件从：

```
<com.xxx.yyy.preference.PreferenceEditTextDialog 
```

默认：

```
<EditTextPreference 
```

一切正常。有人可以帮我找到问题吗，不知何故，使用我的自定义首选项无法正确传播侦听器。

谢谢！

@Sam 这是我的听众定义：

```
 myfield = (EditTextPreference) getPreferenceScreen().findPreference(KEY_PREFERENCE);
    myfield.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {

        @Override
        public boolean onPreferenceChange(Preference preference, Object newValue) {
            Boolean valid = true;
        if(!validate(newValue.toString())) {
               valid = false;
            }
            return valid;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T21:32:06.913

找到了一个解决方案，在我的自定义 EditTextPreference 中我添加了对 callChangeListener(value) 的调用：

```
@Override
public void onBindDialogView(View view) {       
edittext = (EditText) view.findViewById(R.id.edittext);
edittext.setText(PreferenceManager.
        getDefaultSharedPreferences(view.getContext()).
        getString(getKey(), ""));       

ok_button = (Button) view.findViewById(R.id.ok_button);
ok_button.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        String value = edittext.getText().toString();
        if(callChangeListener(value)) {
            Editor editor = getEditor();
            editor.putString(getKey(), value);
            editor.commit();
            getDialog().dismiss();
        }
    }
}); 
```

# jakarta-ee - 当我们通过 facebook 登录时如何删除 facebook cookie

> ID：13501101
> 
> 赞同：2
> 
> 时间：2012-11-21T19:58:00.433
> 
> 标签：jakarta-ee, cookies, session-cookies, setcookie, cookiestore

我在我的网站中提供了一个社交身份验证链接，我的问题是，如果我通过 facebook 登录并从我的应用程序中注销，但仍然存在 facebook 的`c_user`cookie。如何从其他域中删除 cookie，因为它会跟踪用户。我我正在使用java。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T01:45:59.300

情况：您网站上的一项功能允许访问者使用他们的 Facebook 帐户登录。当用户退出您的应用程序时，`c_user`来自 Facebook 的 cookie 在被 Facebook 设置后仍然存在于您用户的浏览器中。

问题：您不希望 Facebook 在用户`c_user`注销后继续使用其 cookie 跟踪用户的活动。

解决方案：由于网络浏览器和 cookie 的工作原理，您的网站无法控制 Facebook 在您用户的网络浏览器中放置的 cookie。您能做的最好的事情就是告诉您的用户清除他们浏览器的`c_user`cookie。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T21:31:43.243

将 WebBrowser 重定向到`facebook.com/logout.php?confirm=1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T06:22:09.573

“如何从其他域中删除 cookie？”。

您不能从另一个域中删除 cookie。并非没有巨大的安全漏洞。

你能解释一下你为什么要这样做吗？这个cookie会导致什么样的问题？

# html - .html 页面中的 Telerik 控件

> ID：13501103
> 
> 赞同：0
> 
> 时间：2012-11-21T19:58:08.093
> 
> 标签：html, telerik

我目前正在编辑一个 .html 文件，其中 Telerik radtooltips 连接到映射图像。基本上，图像上有一些小块已设置为在鼠标悬停时触发 radtooltips。html 文件在 .aspx 文件中运行，它继承了 Telerik 命名空间。但是，我无法在 radtooltips 中设置属性，而是默认为我无法再更改的非常丑陋的默认样式。我也尝试在工具提示中设置 div 和表格，但是，工具提示容器不受影响，因此无论为表格或 div 设置什么定义，工具提示都会出现令人讨厌的黄色边框。示例： ![我无法编辑的丑陋工具提示](../Images/1d1c0a6b5dc02cc21b59763227096bf9.png) 橙色背景由工具提示内的 div 定义：

```
<div style="background-color:Orange; border-color:#b24710;"> 
```

这是我定义的当前工具提示......以及被忽略的属性：

```
<telerik:RadToolTip ID="rttGeochemTip" runat="server" TargetControlID="geochem" RelativeTo="Mouse"
                        Position="BottomCenter" BackColor="Gray" BorderColor="Black" Font="Sans-serif"> 
```

我也试过这个没有嵌套的div：

```
<telerik:RadToolTip ID="rttCharTechTip" runat="server" TargetControlID="char" RelativeTo="Mouse"
                        Position="BottomCenter" BackColor="Gray" BorderColor="Black" Font="Sans-serif"> 
```

上面没有嵌套 div 的代码与屏幕截图相同，除了橙色被默认的黄色边框颜色替换，因为我没有覆盖内部颜色。我也尝试过使用 CSS 来实现同样的失败效果。

关于什么可能导致这种行为的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:31:03.120

html 页面嵌套在 .aspx 页面中，以及一些如何应用 Telerik 皮肤日落的继承，我无法覆盖它。为了解决这个问题，我最终添加了一个 Telerik skinmanager，并为我的控件应用了更合适的皮肤，从而解决了这个问题。我假设我们的样式设置不是按照 Telerik 皮肤标准构建的。

# c# - 在 HTML 文档中选择第 N 个子节点

> ID：13501108
> 
> 赞同：3
> 
> 时间：2012-11-21T19:58:18.697
> 
> 标签：c#, html, xpath, html-agility-pack

我有一个 html 文档，我需要`table`在 5th 表深处抓取所有元素，`DOM`不要与第 5 个孩子混淆`table`。我的问题是这 5 个`table`深度结构可以包含在任意数量的`div`元素中，所以我不能使用绝对路径，例如

> /html/body/table/tbody/tr/td/table/tbody/tr/td/table/tbody/tr/td/table/tbody/tr/td/table

例如：

```
<body>    
    <table>    
        <table>
            <table>
                <table>
                   <!--Grab this one -->
                   <table>
                   </table>
                </table>
            </table>
       </table>
    </table>
</body> 
```

或这个：

```
 <body> 
    <div> <!--Could be wrapped more than just once though -->  
        <table>    
            <table>
                <table>
                    <table>
                       <!--Grab this one -->
                       <table>
                       </table>
                    </table>
                </table>
           </table>
        </table>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T20:37:31.410

**使用**：

```
(//table[count(ancestor::table) = 4])[1] 
```

这将选择`table`文档中恰好具有四个名为 的祖先的第一个`table`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T20:04:31.017

我相信你会想要`//`每个元素之间的表达式，使完整的表达式：

```
//table//table//table//table//table 
```

这将选择在其路径中任何位置有 4 个表的任何表

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-15T17:35:33.220

对于 mshtml（因为您的问题是 c# 和 html 标记）访问 html 子节点元素的方式类似于此处提到的内容： [如何在 C# 中以最快的方式检索 HTMLDocument 的所有文本节点？](https://stackoverflow.com/questions/4117186/how-can-i-retreive-all-the-text-nodes-of-a-htmldocument-in-the-fastest-way-in-c)

也许这有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T20:13:17.850

```
XElement doc = XElement.Parse(yourXml); 
var requiredTable = doc.Descendants("table").ElementAt(4); 
```

# ios - xcode 4.2 与 ios6 不兼容

> ID：13501114
> 
> 赞同：1
> 
> 时间：2012-11-21T19:59:09.073
> 
> 标签：ios, xcode, macos

我有运行 OS X 10.6 的 vmware，因此必须下载 xcode 4.2，因为 4.5 与 OS X 10.6 不兼容。现在看来我无法从我构建的应用程序创建一个 .ipa 文件，因为我的 iphone 有 iOS 6。

是否有解决所有这些问题的方法，以便我可以使用我的 ios6 设备创建一个 .ipa 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T00:37:33.213

我不认为 xCode 4.2 能够构建 iOS6 IPA。由于 iOS 6 引入了一些新功能，如自动布局，仅在 xCode 4.5 中可用

因此，我建议您升级您的操作系统以使用 xCode 4.5，Apple 也建议开发人员应使用最新的 OS X。

# jquery - JQuery 验证插件错误类

> ID：13501116
> 
> 赞同：0
> 
> 时间：2012-11-21T19:59:42.733
> 
> 标签：jquery, html, ajax, validation, jquery-validate

我想在验证函数之外编辑错误消息。所以我有一个简单的密码恢复表格。这是html：

```
<div style="position:relative; left:40%;" class="pass_recovery">
    <h2 class="title">Recover</h2>
    <form action="" method="POST" id="recover_pass">
        <span style="font-size:12px;">Email you registered with: </span><input type="text" name="recov_pass" id="recov_pass"<br>
        <input type="submit" value="Send Password">
    </form><br>
</div> 
```

这是我用于验证的 jquery：

```
var pass_rec = $('#recover_pass').validate({
    onkeyup: false,
    errorClass: "password_messages",
    rules: {
        recov_pass: {
            required: true,
            email: true
        }
    },
    messages: {
        recov_pass: {
            required: "Please enter an email address",
            email: "Please enter a valid email address"
        }
    }
}); 
```

然后是ajax调用。这只是检查输入的电子邮件是否是有效的注册电子邮件地址。

```
$('#recover_pass').submit(function() {
    if(pass_rec.form()) {
        var $this = $(this);  
        $.ajax({
            data: $this.serialize(), // get the form data
            type: "POST", // GET or POST
            url: "Private/Recover_pass.php", // the file to call
            success: function(data) { // on success..
                if(data=="pass") { 
                    $('.password_messages').text('good');
                }
                else {
                    $('.password_messages').text('bad');
                }
            },
            error: function(data) {
                $('.password_messages').text('error');
            },
            complete: function(data) {
                $('#recov_pass').val("");
            }
        });
    }
    return false; //so it doesn't refresh when submitting the page
}); 
```

这不起作用，因为当我输入未注册的虚拟电子邮件时，例如`example@ex.com`，它不会显示该`bad`消息。如何在验证功能之外显示错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:56:47.627

您正在尝试将结果字符串放入页面上具有“.password_messages”类的区域中，但我在您的 html 示例代码中看不到这一点。你确定它在你页面的某个地方吗？

你应该有一个像这样的目标：

```
<span class='.password_messages'></span> 
```

这就是您希望看到结果文本的地方，对吧？

# javascript - 创建一个类，从另一个类扩展并调用父方法

> ID：13501118
> 
> 赞同：2
> 
> 时间：2012-11-21T19:59:46.023
> 
> 标签：javascript, oop, inheritance, superclass

首先，我以咖啡脚本网站上的动物为例。

我想用javascript模拟接下来的事情：

*   课程
*   仅限公共方法
*   仅私有方法和变量
*   遗产
*   从超类调用方法

我认为这种创建方式是可以的，但是当我尝试`move`从父类获取方法时，它总是返回到自身。我做错了什么？

顺便提一句。哪些是实现我的目标的最佳实践？我在做什么对吗？

```
var Animal = (function() {
    function Animal() {}

    var _private = {};
    var _public = {
        move: function() {
            console.log('Can move');
        }
    };

    Animal.prototype = _public;
    Animal.prototype.constructor = Animal;
    return Animal;
})();

var Snake = (function(_super) {
    function Snake() {}

    var _private = {};
    var _public = {
        move: function() {
            console.log(Snake._super_.move);
            console.log('Slithering');
        }
    };

    Snake.prototype = _super.prototype;
    Snake._super_ = _super.prototype;
    for(var method in _public) {
        if(Object.prototype.toString.call(_public[method]) === '[object Function]') {
            Snake.prototype[method] = _public[method];
        }
    }
    return Snake;
})(Animal);

var s = new Snake;
s.move(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T20:42:42.893

在我看来，这是写得非常好的代码，只有一个小错误。

我认为你的指针有点交叉，试试这个：

```
<script>
var Animal = (function () {
    function Animal() { }

    var _private = {};
    var _public = {
        move: function () {
            console.log('Can move');
            //this just returns a string to show which method was called
            //inside of the child's move function's console.log
            return "super move called";
        }
    };

    Animal.prototype = _public;
    Animal.prototype.constructor = Animal;
    return Animal;
})();

var Snake = (function (_super) {
    function Snake() { }

    var _private = {};
    var _public = {
        move: function () {
            console.log(Snake._super_.move());//Now we can call super's move
            console.log('Slithering');
        }
    };

    //This created the circular reference where Snake._super_ was pointing to
    //Snake.prototype which was causing the error
    //Snake.prototype = _super.prototype;
    Snake._super_ = _super.prototype;

    for (var method in _public) {
        if (Object.prototype.toString.call(_public[method]) === '[object Function]') {
            Snake.prototype[method] = _public[method];
        }
    }
    return Snake;
})(Animal);

var s = new Snake;
s.move();//now this outputs "Can move", "super move called", "Slithering"
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T21:31:05.737

如果您要求最佳实践，我会说在网络上采取任何现成的解决方案。我更喜欢这个：[http](http://canjs.us/#can_construct) ://canjs.us/#can_construct 。

关于您的方法的一些注意事项：

1.  它不可重复使用。您必须为每个类编写相同的代码。至少您应该提取 for-loop 以使这段代码可重用。
2.  您需要检查`_public.hasOwnProperty(method)`以使您的代码更健壮。
3.  `toString`和`valueOf`方法需要特殊处理，因为它们在 IE<9 中是不可枚举的。
4.  `Snake.prototype = _super.prototype;`是一场彻底的灾难。因为你的超类将有孩子的所有方法。

    ```
    var F = function(){};
    F.prototype = _super.prototype;
    Snake.prototype = new F();
    Snake.prototype.constructor = Snake; 
    ```

# java - 调整 Apache Pivot GUI 组件的大小以适应窗口

> ID：13501123
> 
> 赞同：1
> 
> 时间：2012-11-21T20:00:14.937
> 
> 标签：java, apache-pivot

这个问题[Java Swing: Vertical Layout with fixed width and variable height](https://stackoverflow.com/questions/13476274/java-swing-vertical-layout-with-fixed-width-and-variable-height)让我有机会尝试 Apache Pivot。我对 Pivot 有一天的经验。

这是我能够创建的 GUI。

![段图形用户界面](../Images/edacca34c5ddf0c93a373c5b5acc7e2b.png)

我的问题是：

1.  如何调整, 和`TextArea`, 的一部分的大小`Expander`，以使`Expander`,`ScrollPane`和`TextArea`填充窗口的宽度，并且`TextArea`足够高以容纳任意数量的文本？

2.  如何调整 s 的高度`ScrollPane`，`Expander`以便在所有文本区域都展开时， 3 `Expander`s 适合窗口的高度？

这是创建 GUI 的源代码。我正在使用 2.0.2 版的 Apache Pivot。

```
import java.io.IOException;
import java.io.Reader;
import java.io.StringReader;
import java.util.ArrayList;
import java.util.List;

import org.apache.pivot.collections.Map;
import org.apache.pivot.wtk.Application;
import org.apache.pivot.wtk.BoxPane;
import org.apache.pivot.wtk.DesktopApplicationContext;
import org.apache.pivot.wtk.Display;
import org.apache.pivot.wtk.Expander;
import org.apache.pivot.wtk.Orientation;
import org.apache.pivot.wtk.ScrollPane;
import org.apache.pivot.wtk.TextArea;
import org.apache.pivot.wtk.Window;

public class Segments implements Application {

    protected SectionCollection collection;

    protected Window window;

    @Override
    public void startup(Display display, Map<String, String> properties) {
        collection = new SectionCollection();
        new SectionCollectionCreator(collection);

        window = new Window();
        window.setTitle("Segments");
        window.setMaximized(true);

        BoxPane boxPane = new BoxPane();
        boxPane.setOrientation(Orientation.VERTICAL);

        for (int i = 0; i < collection.size(); i++) {
            SectionText sectionText = collection.get(i);

            TextArea textArea = new TextArea();
            textArea.setEditable(false);
            textArea.setPreferredSize(400, 220);
            try {
                textArea.setText(sectionText.getTopic());
            } catch (IOException e) {
                e.printStackTrace();
            }

            ScrollPane textScrollPane = new ScrollPane();
            textScrollPane.setPreferredSize(420, 100);
            textScrollPane.setVerticalScrollBarPolicy(
                    ScrollPane.ScrollBarPolicy.AUTO);
            textScrollPane.setView(textArea);

            Expander expander = new Expander();
            expander.setTitle(sectionText.getTitle());
            expander.setContent(textScrollPane);
            expander.setExpanded(false);

            boxPane.add(expander);  
        }

        ScrollPane expanderScrollPane = new ScrollPane();
        expanderScrollPane.setHorizontalScrollBarPolicy(
                ScrollPane.ScrollBarPolicy.AUTO);
        expanderScrollPane.setVerticalScrollBarPolicy(
                ScrollPane.ScrollBarPolicy.AUTO);
        expanderScrollPane.setView(boxPane);

        window.setContent(expanderScrollPane);
        window.open(display);
    }

    @Override
    public boolean shutdown(boolean optional) {
        if (window != null) {
            window.close();
        }
        return false;
    }

    @Override
    public void suspend() {
    }

    @Override
    public void resume() {
    }

    public static void main(String[] args) {
        DesktopApplicationContext.main(Segments.class, args);
    }

    public class SectionText {
        protected String title;
        protected Reader topic;

        public SectionText(String title, Reader topic) {
            this.title = title;
            this.topic = topic;
        }

        public String getTitle() {
            return title;
        }

        public Reader getTopic() {
            return topic;
        }
    }

    public class SectionCollection {
        protected List<SectionText> collection;

        public SectionCollection() {
            this.collection = new ArrayList<SectionText>();
        }

        public void add(SectionText sectionText) {
            collection.add(sectionText);
        }

        public int size() {
            return collection.size();
        }

        public SectionText get(int index) {
            return collection.get(index);
        }
    }   

    public class SectionCollectionCreator {
        protected SectionCollection collection;

        protected static final String text = "Attributes, Styles and Style Contexts\n\n"
                + "The simple PlainDocument class that you saw in the previous "
                + "chapter is only capable of holding text. The more complex text "
                + "components use a more sophisticated model that implements the "
                + "StyledDocument interface. StyledDocument is a sub-interface of "
                + "Document that contains methods for manipulating attributes that "
                + "control the way in which the text in the document is displayed. "
                + "The Swing text package contains a concrete implementation of "
                + "StyledDocument called DefaultStyledDocument that is used as the "
                + "default model for JTextPane and is also the base class from which "
                + "more specific models, such as the HTMLDocument class that handles "
                + "input in HTML format, can be created. In order to make use of "
                + "DefaultStyledDocument and JTextPane, you need to understand how "
                + "Swing represents and uses attributes.";

        public SectionCollectionCreator(SectionCollection collection) {
            this.collection = collection;

            String title = "Title ";

            for (int i = 1; i <= 3; i++) {
                SectionText sectionText = new SectionText(title + i, 
                        new StringReader(text));
                collection.add(sectionText);
            }
        }   
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:04:00.227

我终于解决了这个难题。

通过设置文本区域的宽度，计算出适合文本的高度。

通过设置文本区域滚动窗格的高度，我可以使文本区域滚动窗格出现，并将扩展器的大小减小到标题栏加上文本区域滚动窗格。

所以现在，我所要做的就是根据窗口的宽度和高度计算出文本区域的宽度和文本区域滚动窗格的高度。

这就是组件侦听器发挥作用的地方。侦听器调整了文本区域的宽度和文本区域滚动窗格的高度。我作弊并使用魔法常数来解释滚动条和边距。如果我能在创建组件时获得这些值，那就太好了。

无论如何，这里的代码将 GUI 组件的大小调整为窗口。

```
import java.io.IOException;
import java.io.Reader;
import java.io.StringReader;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Iterator;
import java.util.List;

import org.apache.pivot.collections.Map;
import org.apache.pivot.wtk.Application;
import org.apache.pivot.wtk.Bounds;
import org.apache.pivot.wtk.BoxPane;
import org.apache.pivot.wtk.Component;
import org.apache.pivot.wtk.Component.StyleDictionary;
import org.apache.pivot.wtk.ComponentListener;
import org.apache.pivot.wtk.DesktopApplicationContext;
import org.apache.pivot.wtk.Display;
import org.apache.pivot.wtk.Expander;
import org.apache.pivot.wtk.Orientation;
import org.apache.pivot.wtk.ScrollPane;
import org.apache.pivot.wtk.TextArea;
import org.apache.pivot.wtk.Window;

public class Segments implements Application {

    protected List<SectionComponent> expanderComponents;

    protected SectionCollection collection;

    protected Window window;

    @Override
    public void startup(Display display, Map<String, String> properties) 
            throws IOException {
        getStyles(display);

        collection = new SectionCollection();
        new SectionCollectionCreator(collection);
        expanderComponents = new ArrayList<SectionComponent>();

        window = new Window();
        window.setTitle("Segments");
        window.setMaximized(true);

        ComponentSizeListener listener = new ComponentSizeListener();   
        window.getComponentListeners().add(listener.getListener());

        BoxPane boxPane = new BoxPane();
        boxPane.setOrientation(Orientation.VERTICAL);

        for (int i = 0; i < collection.size(); i++) {
            SectionComponent sectionComponent =
                    new SectionComponent(collection.get(i), 400, 100); 
            expanderComponents.add(sectionComponent);
            boxPane.add(sectionComponent.getExpander());
        }

        listener.setComponents(expanderComponents);

        ScrollPane expanderScrollPane = new ScrollPane();
        expanderScrollPane.setHorizontalScrollBarPolicy(
                ScrollPane.ScrollBarPolicy.AUTO);
        expanderScrollPane.setVerticalScrollBarPolicy(
                ScrollPane.ScrollBarPolicy.AUTO);
        expanderScrollPane.setView(boxPane);

        window.setContent(expanderScrollPane);
        window.open(display);
    }

    protected void getStyles(Component component) {
        StyleDictionary dictionary = component.getStyles();
        System.out.println(component);
        Iterator<String> iter = dictionary.iterator();
        List<String> list = new ArrayList<String>();
        while (iter.hasNext()) {
            list.add(iter.next());
        }
        Collections.sort(list);
        for (String style : list) {
            System.out.println("    " + style);
        }
    }

    @Override
    public boolean shutdown(boolean optional) {
        if (window != null) {
            window.close();
        }
        return false;
    }

    @Override
    public void suspend() {
        Bounds bounds = window.getClientArea();
        System.out.println(bounds);
    }

    @Override
    public void resume() {
    }

    public static void main(String[] args) {
        DesktopApplicationContext.main(Segments.class, args);
    }

    public class ComponentSizeListener {
        protected int newWidth;
        protected int newHeight;

        protected ComponentListener listener;

        protected List<SectionComponent> components;

        public ComponentSizeListener() {
            this.newWidth = 425;
            this.newHeight = 131;

            this.listener = new ComponentListener.Adapter() {
                @Override
                public void sizeChanged(Component component, 
                        int previousWidth, int previousHeight) {
                    newWidth = component.getWidth();
                    newHeight = component.getHeight();
                    for (SectionComponent sectionComponent : components) {
                        sectionComponent.setTextAreaWidth(newWidth - 25);
                        int paneHeight = (newHeight / components.size()) - 34;
                        sectionComponent.setTextScrollPaneHeight(paneHeight);
                    }
                }
            };
        }

        public void setComponents(List<SectionComponent> components) {
            this.components = components;
        }

        public ComponentListener getListener() {
            return listener;
        }
    }

    public class SectionComponent {
        protected int textAreaWidth;
        protected int textScrollPaneHeight;

        protected Expander expander;
        protected ScrollPane textScrollPane;
        protected SectionText sectionText;
        protected TextArea textArea;

        public SectionComponent(SectionText sectionText, 
                int textAreaWidth, int textScrollPaneHeight) 
                        throws IOException {
            this.sectionText = sectionText;
            this.textAreaWidth = textAreaWidth;
            this.textScrollPaneHeight = textScrollPaneHeight;
            createPartControl();
        }

        protected void createPartControl() throws IOException {
            textArea = new TextArea();
            textArea.setEditable(false);
            textArea.setPreferredWidth(textAreaWidth);
            textArea.setText(sectionText.getTopic());

            textScrollPane = new ScrollPane();
            textScrollPane.setPreferredHeight(textScrollPaneHeight);
            textScrollPane.setVerticalScrollBarPolicy(
                    ScrollPane.ScrollBarPolicy.AUTO);
            textScrollPane.setView(textArea);

            expander = new Expander();
            expander.setTitle(sectionText.getTitle());
            expander.setContent(textScrollPane);
            expander.setExpanded(false);
        }

        public Expander getExpander() {
            return expander;
        }

        public void setTextAreaWidth(int textAreaWidth) {
            this.textAreaWidth = textAreaWidth;
            textArea.setPreferredWidth(textAreaWidth);
        }

        public void setTextScrollPaneHeight(int textScrollPaneHeight) {
            this.textScrollPaneHeight = textScrollPaneHeight;
            textScrollPane.setPreferredHeight(textScrollPaneHeight);
        }

    }

    public class SectionText {
        protected String title;
        protected Reader topic;

        public SectionText(String title, Reader topic) {
            this.title = title;
            this.topic = topic;
        }

        public String getTitle() {
            return title;
        }

        public Reader getTopic() {
            return topic;
        }
    }

    public class SectionCollection {
        protected List<SectionText> collection;

        public SectionCollection() {
            this.collection = new ArrayList<SectionText>();
        }

        public void add(SectionText sectionText) {
            collection.add(sectionText);
        }

        public int size() {
            return collection.size();
        }

        public SectionText get(int index) {
            return collection.get(index);
        }
    }   

    public class SectionCollectionCreator {
        protected SectionCollection collection;

        protected static final String text = "Attributes, Styles and Style Contexts\n\n"
                + "The simple PlainDocument class that you saw in the previous "
                + "chapter is only capable of holding text. The more complex text "
                + "components use a more sophisticated model that implements the "
                + "StyledDocument interface. StyledDocument is a sub-interface of "
                + "Document that contains methods for manipulating attributes that "
                + "control the way in which the text in the document is displayed. "
                + "The Swing text package contains a concrete implementation of "
                + "StyledDocument called DefaultStyledDocument that is used as the "
                + "default model for JTextPane and is also the base class from which "
                + "more specific models, such as the HTMLDocument class that handles "
                + "input in HTML format, can be created. In order to make use of "
                + "DefaultStyledDocument and JTextPane, you need to understand how "
                + "Swing represents and uses attributes.";

        public SectionCollectionCreator(SectionCollection collection) {
            this.collection = collection;

            String title = "Title ";

            for (int i = 1; i <= 3; i++) {
                SectionText sectionText = new SectionText(title + i, 
                        new StringReader(text));
                collection.add(sectionText);
            }
        }   
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:32:24.607

您可能还需要考虑将组件放在 FillPane 中，这会使它们的大小调整为填充可用区域。这似乎是 Pivot 的做事方式。

# javascript - 如何判断何时使用 Youtube API 播放 youtube 视频

> ID：13501132
> 
> 赞同：1
> 
> 时间：2012-11-21T20:00:52.807
> 
> 标签：javascript, youtube, youtube-api

我目前正在使用 youtube API 调用视频：

```
<div id="ytapiplayer">
    You need Flash player 8+ and JavaScript enabled to view this video.
</div>

var params = { allowScriptAccess: "always" };
var atts = { id: "myytplayer" };
swfobject.embedSWF(
    "http://www.youtube.com/v/TEHWDA_6e3M?enablejsapi=1&playerapiid=ytplayer&version=3",
    "ytapiplayer", 
    "960", 
    "540", 
    "8", 
    null, 
    null, 
    params, 
    atts
); 
```

但是，我需要在播放视频时发生一些事情。

我一直在尝试使用这个： [https](https://developers.google.com/youtube/js_api_reference#Adding_event_listener) ://developers.google.com/youtube/js_api_reference#Adding_event_listener 像这样：

```
function onYouTubePlayerReady(playerId) {
    ytplayer = document.getElementById("myytplayer");
    ytplayer.addEventListener("onStateChange", "onytplayerStateChange");
}

function onytplayerStateChange(newState) {
    alert("Player's new state: " + newState);
} 
```

尽管我以前从未在此级别使用过 javascript，也从未使用过 API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:36:57.280

我建议使用[iframe Player API](https://developers.google.com/youtube/iframe_api_reference)进行新开发。

该页面上的[入门示例](https://developers.google.com/youtube/iframe_api_reference#Getting_Started)说明了嵌入视频和处理播放开始时触发的事件。

# ios - 无限 CABasicAnimation 停止

> ID：13501133
> 
> 赞同：19
> 
> 时间：2012-11-21T20:01:03.437
> 
> 标签：ios, uiview, calayer, cabasicanimation

`CABasicAnimation`我的UIView 中有一个无限动画（旋转图像，输入：）

```
animation.repeatCount = HUGE_VALF; 
```

当我推送一个新的 ViewController 并返回到包含 View 动画的初始 ViewController 时，旋转停止了。

即使我`viewWillAppear`在调用 ViewController 的方法时再次设置动画，它也不会再次旋转。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2016-01-18T14:06:54.107

实际上，有一种简单的方法可以解决这个问题，
将您的动画设置为：

*斯威夫特 3 版本*

```
animation.removedOnCompletion = false 
```

*斯威夫特 4 版本*

```
animation.isRemovedOnCompletion = false 
```

当 NavigationController 被推送到另一个 ViewController 的视图时，该层本身不会被破坏，因为 UINavigationController`viewControllers`具有将保留原始 viewController 的属性，因此它的视图和您的动画层。

**当视图从界面中移除时，即使您将其 repeatCount 设置为无限，**该 CABasicAnimation 对象也会被破坏。**因此将其设置`isRemovedOnCompletion`为 false 以保留它。**

 *** * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T20:05:26.147

当一个层从屏幕上移除时，它会失去它的动画。一旦图层再次出现在屏幕上，您需要重新添加它们。

`viewWillAppear:`为时过早，因为那时该图层实际上还没有出现在屏幕上。尝试将动画添加到`viewDidAppear:`.**

# node.js - 会话中的日期 mongo node.js express

> ID：13501139
> 
> 赞同：0
> 
> 时间：2012-11-21T20:01:18.647
> 
> 标签：node.js, mongodb, session, date, express

我的约会有问题，我的会议：

我有一个用户集合：

```
{ 
    "username" : "ant",
    "mail" : "aa@aa.aa",
    "password" : "7e240de74fb1ed08fa08d38063f6a6a91462a815",
    "date_register" : ISODate("2012-11-18T11:58:45.034Z"),
    "date_login" : ISODate("2012-11-18T11:58:45.034Z"),
    "_id" : ObjectId("50a8cd75494g6db815000001"), "__v" : 0 } 
```

我在会话中设置了我的用户，这是我第一次使用我拥有的日期来访问我的页面：

2012 年 11 月 18 日星期日 12:58:45 GMT+0100 (CET)

并且，当我想在其他时间获取我的页面时

2012-11-18T11:58:45.034Z（我的数据库中有什么）

我这样创建我的会话：

```
global.user.createSession = function(id, req, callback){
    models.user.findOne({
        _id: id
    },function(err, result){
        req.session.user = result
        callback();
    })
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:29:10.700

我曾经将整个用户对象存储在会话中，直到我开始看到出现此类问题。保存到会话的对象不是猫鼬对象。

我建议您只在会话中存储用户 ID，并在需要时获取用户：

```
req.session.userid = user._id;

User.findById(req.session.userid, fn); 
```

# python - Python：拆分包含双引号的路径字符串

> ID：13501140
> 
> 赞同：1
> 
> 时间：2012-11-21T20:01:26.370
> 
> 标签：python

我在 Windows 中使用包含括号的文件，它需要在外部进程中使用引号。

我正在尝试操纵该位置，但是由于字符串与引号一起传递，因此当我使用 os.path.split 时，双引号也被拆分。有没有更好的方法来做到这一点，这样我就不需要检查输入字符串并剥离和/或替换双引号？我将把文件名加入一个没有双引号的新路径。

```
fileWithPath = r'"C:\TEMP\my(file).txt"'
... do some stuff ...
sourcepath, filename = os.path.split(fileWithPath) 
```

源路径的值：'"C:\TEMP'

文件名有值：'my(file).txt"'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T20:06:56.253

首先想到的是取消windows给你的双引号：

```
firsWithPath = fileWithPath.replace('"', '') 
```

但是，如果您想保留一些引号并在末尾只删除一个引号，那么您最好使用：

```
firsWithPath = fileWithPath.strip('"') 
```

在这些操作中的任何一个之后，拆分`'\\'`应该可以正常工作

**编辑**：

正如@jdi 在评论中提到的那样，你真的应该分开`os.path.sep`而不是`'\\'`为了可移植性

# java - Java ArrayList - 我如何判断两个列表是否相等，顺序无关紧要？

> ID：13501142
> 
> 赞同：152
> 
> 时间：2012-11-21T20:01:36.853
> 
> 标签：java, arraylist

我有两个`ArrayList`s型`Answer`（自制班）。

我想比较这两个列表，看看它们是否包含相同的内容，但顺序无关紧要。

例子：

```
//These should be equal.
ArrayList<String> listA = {"a", "b", "c"}
ArrayList<String> listB = {"b", "c", "a"} 
```

`List.equals`表示如果两个列表包含相同的大小、内容和元素的顺序，则它们是相等的。我想要同样的东西，但顺序无关紧要。

有没有一种简单的方法可以做到这一点？还是我需要做一个嵌套的 for 循环，并手动检查两个列表的每个索引？

注意：我无法将它们更改`ArrayList`为另一种类型的列表，它们需要保持不变。

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-11-21T20:33:58.453

**对于任何**列表，最简单的方法可能是：

```
listA.containsAll(listB) && listB.containsAll(listA) 
```

* * *

## 回答 #2

> 赞同：139
> 
> 时间：2012-11-21T20:06:05.683

`Collections.sort()`您可以使用然后使用 equals 方法对两个列表进行排序。一个稍微好一点的解决方案是在排序之前首先检查它们的长度是否相同，如果不是，则它们不相等，然后排序，然后使用等于。例如，如果您有两个字符串列表，它将类似于：

```
public  boolean equalLists(List<String> one, List<String> two){     
    if (one == null && two == null){
        return true;
    }

    if((one == null && two != null) 
      || one != null && two == null
      || one.size() != two.size()){
        return false;
    }

    //to avoid messing the order of the lists we will use a copy
    //as noted in comments by A. R. S.
    one = new ArrayList<String>(one); 
    two = new ArrayList<String>(two);   

    Collections.sort(one);
    Collections.sort(two);      
    return one.equals(two);
} 
```

* * *

## 回答 #3

> 赞同：100
> 
> 时间：2014-03-24T19:53:12.517

**[Apache Commons](http://commons.apache.org/proper/commons-collections/)** Collections 再次救援：

```
List<String> listA = Arrays.asList("a", "b", "b", "c");
List<String> listB = Arrays.asList("b", "c", "a", "b");
System.out.println(CollectionUtils.isEqualCollection(listA, listB)); // true 
```

```
List<String> listC = Arrays.asList("a", "b", "c");
List<String> listD = Arrays.asList("a", "b", "c", "c");
System.out.println(CollectionUtils.isEqualCollection(listC, listD)); // false 
```

### 文件：

> # [`org.apache.commons.collections4.CollectionUtils`](http://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/CollectionUtils.html#isEqualCollection(java.util.Collection,%20java.util.Collection))
> 
>  ****```
> public static boolean isEqualCollection(java.util.Collection a,
>                                         java.util.Collection b) 
> ```** 
> 
> **`true`如果给定`Collection`的 s 包含具有完全相同基数的完全相同的元素，则 返回。**
> 
>  **也就是说，对于*a*或*b*中的每个元素*e*，如果 a 中的*e*的*基数*等于*b中的**e*的基数。
> 
>  *****参数：**
> 
> *   `a`- 第一次收藏，一定不能`null`
> *   `b`- 第二个集合，一定不能`null`
> 
> **返回：** **`true`如果集合包含具有相同基数的相同元素。*********

 ******** * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-11-21T21:02:55.890

```
// helper class, so we don't have to do a whole lot of autoboxing
private static class Count {
    public int count = 0;
}

public boolean haveSameElements(final List<String> list1, final List<String> list2) {
    // (list1, list1) is always true
    if (list1 == list2) return true;

    // If either list is null, or the lengths are not equal, they can't possibly match 
    if (list1 == null || list2 == null || list1.size() != list2.size())
        return false;

    // (switch the two checks above if (null, null) should return false)

    Map<String, Count> counts = new HashMap<>();

    // Count the items in list1
    for (String item : list1) {
        if (!counts.containsKey(item)) counts.put(item, new Count());
        counts.get(item).count += 1;
    }

    // Subtract the count of items in list2
    for (String item : list2) {
        // If the map doesn't contain the item here, then this item wasn't in list1
        if (!counts.containsKey(item)) return false;
        counts.get(item).count -= 1;
    }

    // If any count is nonzero at this point, then the two lists don't match
    for (Map.Entry<String, Count> entry : counts.entrySet()) {
        if (entry.getValue().count != 0) return false;
    }

    return true;
} 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2016-12-09T20:25:09.573

我会说这些答案错过了一个窍门。

Bloch 在他的基本、精彩、简洁的[Effective Java](https://www.amazon.co.uk/Effective-Java-Second-Joshua-Bloch/dp/0321356683)中，在第 47 项的标题“了解和使用库”中说，“总而言之，不要重新发明轮子”。他给出了几个非常明确的理由。

这里有一些答案建议来自`CollectionUtils`Apache Commons Collections 库中的方法，但没有人发现[回答这个问题的最漂亮、最优雅的方式](https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/CollectionUtils.html#disjunction-java.lang.Iterable-java.lang.Iterable-)：

```
Collection<Object> culprits = CollectionUtils.disjunction( list1, list2 );
if( ! culprits.isEmpty() ){
  // ... do something with the culprits, i.e. elements which are not common

} 
```

**罪魁祸首**：即两者都不相同的元素`Lists`。使用and`list1`来确定哪些罪魁祸首`list2`是相对简单的。 然而，在 { "a", "a", "b" } 和 { "a", "b", "b" } 的情况下，它往往会崩溃……除非这不是软件的失败，而是所需任务的微妙之处/模糊性的性质所固有的。`CollectionUtils.intersection( list1, culprits )``CollectionUtils.intersection( list2, culprits )`
`disjunction`

您始终可以检查由 Apache 工程师制作的此类任务的[源代码](https://commons.apache.org/proper/commons-collections/apidocs/src-html/org/apache/commons/collections4/CollectionUtils.html)(l. 287)。使用他们的代码的一个好处是它已经过彻底的试验和测试，许多边缘情况和陷阱都可以预见和处理。如果需要，您可以根据需要复制和调整此代码。

* * *

NB 一开始我很失望，没有一种`CollectionUtils`方法提供重载版本，使您能够强加自己的`Comparator`（因此您可以重新定义`equals`以适应您的目的）。

但是从 collections4 4.0 开始有一个新类，`Equator`它“确定 T 类型的对象之间的相等性”。在检查 collections4 CollectionUtils.java 的源代码时，他们似乎将其与某些方法一起使用，但据我所知，这不适用于文件顶部的方法，使用`CardinalityHelper`类...包括`disjunction`和`intersection`。

我推测 Apache 的人还没有解决这个问题，因为它不是微不足道的：你必须创建类似“AbstractEquatingCollection”类的东西，而不是使用其元素的固有方法`equals`和`hashCode`方法而是必须使用那些的`Equator`所有基本方法，例如`add`，`contains`等。注意实际上，当您查看源代码时，`AbstractCollection`并没有实现`add`，也没有实现它的抽象子类，例如`AbstractSet`...您必须等到具体的类，例如`HashSet`和`ArrayList`之前`add`被实施。很头疼。

我想，与此同时，请注意这个空间。显而易见的临时解决方案是将所有元素包装在一个定制的包装类中，该类使用`equals`并`hashCode`实现你想要的那种平等……然后操纵`Collections`这些包装对象。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2012-11-21T20:33:24.120

如果项目的基数无关紧要（意思是：重复的元素被视为一个），那么有一种方法可以做到这一点而不必排序：

`boolean result = new HashSet<>(listA).equals(new HashSet<>(listB));`

这将创建一个`Set`out of each `List`，然后使用`HashSet`'s`equals`方法，该方法（当然）忽略排序。

如果基数很重要，那么您必须将自己限制在由`List`; 在这种情况下，@jschoen 的回答会更合适。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-12-01T20:31:31.720

这是基于@cHao 解决方案。我包括了几个修复和性能改进。它的运行速度大约是 equals-ordered-copy 解决方案的两倍。适用于任何集合类型。空集合和 null 被视为相等。利用你的优势;）

```
/**
 * Returns if both {@link Collection Collections} contains the same elements, in the same quantities, regardless of order and collection type.
 * <p>
 * Empty collections and {@code null} are regarded as equal.
 */
public static <T> boolean haveSameElements(Collection<T> col1, Collection<T> col2) {
    if (col1 == col2)
        return true;

    // If either list is null, return whether the other is empty
    if (col1 == null)
        return col2.isEmpty();
    if (col2 == null)
        return col1.isEmpty();

    // If lengths are not equal, they can't possibly match
    if (col1.size() != col2.size())
        return false;

    // Helper class, so we don't have to do a whole lot of autoboxing
    class Count
    {
        // Initialize as 1, as we would increment it anyway
        public int count = 1;
    }

    final Map<T, Count> counts = new HashMap<>();

    // Count the items in col1
    for (final T item : col1) {
        final Count count = counts.get(item);
        if (count != null)
            count.count++;
        else
            // If the map doesn't contain the item, put a new count
            counts.put(item, new Count());
    }

    // Subtract the count of items in col2
    for (final T item : col2) {
        final Count count = counts.get(item);
        // If the map doesn't contain the item, or the count is already reduced to 0, the lists are unequal 
        if (count == null || count.count == 0)
            return false;
        count.count--;
    }

    // At this point, both collections are equal.
    // Both have the same length, and for any counter to be unequal to zero, there would have to be an element in col2 which is not in col1, but this is checked in the second loop, as @holger pointed out.
    return true;
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2016-05-13T12:26:01.640

将列表转换为 Guava 的[Multiset](http://google.github.io/guava/releases/19.0/api/docs/com/google/common/collect/Multiset.html)效果很好。无论它们的顺序如何，都会对它们进行比较，并且还会考虑重复元素。

```
static <T> boolean equalsIgnoreOrder(List<T> a, List<T> b) {
    return ImmutableMultiset.copyOf(a).equals(ImmutableMultiset.copyOf(b));
}

assert equalsIgnoreOrder(ImmutableList.of(3, 1, 2), ImmutableList.of(2, 1, 3));
assert !equalsIgnoreOrder(ImmutableList.of(1), ImmutableList.of(1, 1)); 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2012-11-21T20:22:46.960

想想如果没有计算机或编程语言，你将如何自己做这件事。我给你两个元素列表，你必须告诉我它们是否包含相同的元素。你会怎么做？

如上所述，一种方法是对列表进行排序，然后逐个元素地查看它们是否相等（这是什么`List.equals`）。这意味着要么你被允许修改列表，要么你被允许复制它们——在不知道分配的情况下，我不知道是否允许其中一个/两个。

另一种方法是遍历每个列表，计算每个元素出现的次数。如果两个列表最后的计数相同，则它们具有相同的元素。其代码是将每个列表转换为一个映射，`elem -> (# of times the elem appears in the list)`然后调用`equals`这两个映射。如果映射是`HashMap`，则每个转换都是 O(N) 操作，比较也是如此。这将在时间方面为您提供一个非常有效的算法，但代价是一些额外的内存。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2015-07-24T12:31:04.583

我遇到了同样的问题，并提出了不同的解决方案。当涉及重复时，这也适用：

```
public static boolean equalsWithoutOrder(List<?> fst, List<?> snd){
  if(fst != null && snd != null){
    if(fst.size() == snd.size()){
      // create copied lists so the original list is not modified
      List<?> cfst = new ArrayList<Object>(fst);
      List<?> csnd = new ArrayList<Object>(snd);

      Iterator<?> ifst = cfst.iterator();
      boolean foundEqualObject;
      while( ifst.hasNext() ){
        Iterator<?> isnd = csnd.iterator();
        foundEqualObject = false;
        while( isnd.hasNext() ){
          if( ifst.next().equals(isnd.next()) ){
            ifst.remove();
            isnd.remove();
            foundEqualObject = true;
            break;
          }
        }

        if( !foundEqualObject ){
          // fail early
          break;
        }
      }
      if(cfst.isEmpty()){ //both temporary lists have the same size
        return true;
      }
    }
  }else if( fst == null && snd == null ){
    return true;
  }
  return false;
} 
```

与其他一些解决方案相比的优势：

*   小于 O(N²) 复杂度（尽管与此处其他答案中的解决方案相比，我还没有测试过它的真实性能）；
*   提前退出；
*   检查是否为空；
*   即使涉及重复项也可以工作：如果您有一个数组`[1,2,3,3]`和另一个数组，`[1,2,2,3]`这里的大多数解决方案都会告诉您，在不考虑顺序时它们是相同的。该解决方案通过从临时列表中删除相等的元素来避免这种情况；
*   使用语义相等 ( `equals`) 而不是引用相等 ( `==`)；
*   不对itens进行排序，因此不需要对它们进行排序（按`implement Comparable`）即可使此解决方案起作用。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-02-20T08:54:25.987

如果您不希望对集合进行排序并且您需要 ["A" "B" "C"] 不等于 ["B" "B" "A" "C"] 的结果，

```
l1.containsAll(l2)&&l2.containsAll(l1) 
```

还不够，您可能还需要检查尺寸：

```
 List<String> l1 =Arrays.asList("A","A","B","C");
    List<String> l2 =Arrays.asList("A","B","C");
    List<String> l3 =Arrays.asList("A","B","C");

    System.out.println(l1.containsAll(l2)&&l2.containsAll(l1));//cautions, this will be true
    System.out.println(isListEqualsWithoutOrder(l1,l2));//false as expected

    System.out.println(l3.containsAll(l2)&&l2.containsAll(l3));//true as expected
    System.out.println(isListEqualsWithoutOrder(l2,l3));//true as expected

    public static boolean isListEqualsWithoutOrder(List<String> l1, List<String> l2) {
        return l1.size()==l2.size() && l1.containsAll(l2)&&l2.containsAll(l1);
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-01-28T11:12:04.407

Solution which leverages CollectionUtils subtract method:

```
import static org.apache.commons.collections15.CollectionUtils.subtract;

public class CollectionUtils {
  static public <T> boolean equals(Collection<? extends T> a, Collection<? extends T> b) {
    if (a == null && b == null)
      return true;
    if (a == null || b == null || a.size() != b.size())
      return false;
    return subtract(a, b).size() == 0 && subtract(a, b).size() == 0;
  }
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-11-24T13:13:10.360

如果您关心顺序，那么只需使用 equals 方法：

```
list1.equals(list2) 
```

如果您不在乎订单，请使用此

```
Collections.sort(list1);
Collections.sort(list2);      
list1.equals(list2) 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-09-16T03:46:58.963

单线法:)

1.  集合的项目没有实现接口 Comparable<? 超级T>

    ```
     static boolean isEqualCollection(Collection<?> a, Collection<?> b) {
         return a == b || (a != null && b != null && a.size() == b.size()
             && a.stream().collect(Collectors.toMap(Function.identity(), s -> 1L, Long::sum)).equals(b.stream().collect(Collectors.toMap(Function.identity(), s -> 1L, Long::sum))));
     } 
    ```

2.  集合的项目实现接口 Comparable<? 超级T>

    ```
     static <T extends Comparable<? super T>> boolean  isEqualCollection2(Collection<T> a, Collection<T> b) {
       return a == b || (a != null && b != null && a.size() == b.size() && a.stream().sorted().collect(Collectors.toList()).equals(b.stream().sorted().collect(Collectors.toList())));
     } 
    ```

3.  [通过https://github.com/retrostreams/android-retrostreams](https://github.com/retrostreams/android-retrostreams)支持 Android5 & Android6

    ```
    static boolean isEqualCollection(Collection<?> a, Collection<?> b) {
     return a == b || (a != null && b != null && a.size() == b.size()
             && StreamSupport.stream(a).collect(Collectors.toMap(Function.identity(), s->1L, Longs::sum)).equals(StreamSupport.stream(b).collect(Collectors.toMap(Function.identity(), s->1L, Longs::sum))));
    } 
    ```

////测试用例

```
 boolean isEquals1 = isEqualCollection(null, null); //true
    boolean isEquals2 = isEqualCollection(null, Arrays.asList("1", "2")); //false
    boolean isEquals3 = isEqualCollection(Arrays.asList("1", "2"), null); //false
    boolean isEquals4 = isEqualCollection(Arrays.asList("1", "2", "2"), Arrays.asList("1", "1", "2")); //false
    boolean isEquals5 = isEqualCollection(Arrays.asList("1", "2"), Arrays.asList("2", "1")); //true
    boolean isEquals6 = isEqualCollection(Arrays.asList("1", 2.0), Arrays.asList(2.0, "1")); //true
    boolean isEquals7 = isEqualCollection(Arrays.asList("1", 2.0, 100L), Arrays.asList(2.0, 100L, "1")); //true
    boolean isEquals8 = isEqualCollection(Arrays.asList("1", null, 2.0, 100L), Arrays.asList(2.0, null, 100L, "1")); //true 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-08-02T14:28:10.630

这是检查可以包含空值的数组列表是否相等的另一种方法：

```
List listA = Arrays.asList(null, "b", "c");
List listB = Arrays.asList("b", "c", null);

System.out.println(checkEquality(listA, listB)); // will return TRUE

private List<String> getSortedArrayList(List<String> arrayList)
{
    String[] array = arrayList.toArray(new String[arrayList.size()]);

    Arrays.sort(array, new Comparator<String>()
    {
        @Override
        public int compare(String o1, String o2)
        {
            if (o1 == null && o2 == null)
            {
                return 0;
            }
            if (o1 == null)
            {
                return 1;
            }
            if (o2 == null)
            {
                return -1;
            }
            return o1.compareTo(o2);
        }
    });

    return new ArrayList(Arrays.asList(array));
}

private Boolean checkEquality(List<String> listA, List<String> listB)
{
    listA = getSortedArrayList(listA);
    listB = getSortedArrayList(listB);

    String[] arrayA = listA.toArray(new String[listA.size()]);
    String[] arrayB = listB.toArray(new String[listB.size()]);

    return Arrays.deepEquals(arrayA, arrayB);
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-01-03T02:23:11.370

我的解决方案。它不是那么酷，但效果很好。

```
public static boolean isEqualCollection(List<?> a, List<?> b) {

    if (a == null || b == null) {
        throw new NullPointerException("The list a and b must be not null.");
    }

    if (a.size() != b.size()) {
        return false;
    }

    List<?> bCopy = new ArrayList<Object>(b);

    for (int i = 0; i < a.size(); i++) {

        for (int j = 0; j < bCopy.size(); j++) {
            if (a.get(i).equals(bCopy.get(j))) {
                bCopy.remove(j);
                break;
            }
        }
    }

    return bCopy.isEmpty();
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-01-08T12:00:10.967

两全其美[@DiddiZ，@Chalkos]：这个主要基于@Chalkos 方法，但修复了一个错误（ifst.next()），并改进了初始检查（取自@DiddiZ）以及消除了对复制第一个集合（只是从第二个集合的副本中删除项目）。

不需要散列函数或排序，并且在不等式上启用早期存在，这是迄今为止最有效的实现。那是除非你有一个数千或更多的集合长度，以及一个非常简单的散列函数。

```
public static <T> boolean isCollectionMatch(Collection<T> one, Collection<T> two) {
    if (one == two)
        return true;

    // If either list is null, return whether the other is empty
    if (one == null)
        return two.isEmpty();
    if (two == null)
        return one.isEmpty();

    // If lengths are not equal, they can't possibly match
    if (one.size() != two.size())
        return false;

    // copy the second list, so it can be modified
    final List<T> ctwo = new ArrayList<>(two);

    for (T itm : one) {
        Iterator<T> it = ctwo.iterator();
        boolean gotEq = false;
        while (it.hasNext()) {
            if (itm.equals(it.next())) {
                it.remove();
                gotEq = true;
                break;
            }
        }
        if (!gotEq) return false;
    }
    // All elements in one were found in two, and they're the same size.
    return true;
} 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2016-12-12T14:39:22.787

在这种情况下，列表 {"a", "b"} 和 {"b","a"} 是相等的。并且 {"a", "b"} 和 {"b","a","c"} 不相等。如果您使用复杂对象列表，请记住覆盖*equals*方法，因为*containsAll*在内部使用它。

```
if (oneList.size() == secondList.size() && oneList.containsAll(secondList)){
        areEqual = true;
} 
```*******

# mysql - 如何将新数据与mysql中列中的现有数据集成？

> ID：13501144
> 
> 赞同：2
> 
> 时间：2012-11-21T20:01:40.070
> 
> 标签：mysql, sql, phpmyadmin

我想将数据与 phpmyadmin 中的列中的现有数据集成。

例如，我有一个表，其中有一列（ticket_number）。

并且它的退出值为 234 并希望在 234 之前添加“1”，以便该值将是 1234。下面的编写代码不适用于此。

```
UPDATE ticket
SET `ticket_number`+= '1'; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T20:05:40.423

尝试使用`CONCAT`：

```
UPDATE ticket
SET ticket_number = CONCAT(1,ticket_number) 
```

因为如果你直接将“1”相加，你会得到 235 而不是 1234...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T20:04:43.817

大概是这样的：

```
UPDATE ticket
SET ticket_number = '1' + ticket_number 
```

MySQL 不明白 +=

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T20:04:03.727

因为您的数据可能存储为整数，所以您需要添加 1000 而不是 1。

您可以提供有关字段类型的更多信息。

# javascript - 如何自动关闭信息窗口？

> ID：13501148
> 
> 赞同：0
> 
> 时间：2012-11-21T20:01:52.063
> 
> 标签：javascript, google-maps

大师们，问候：

我有一个关于 javascript 的问题。我编写了一个 javascript 补丁来在 Google 地图上显示多个标记。这些标记的地理编码和相关信息是从数据库中检索的，我在 APEX 中使用 JSON 传递数据。问题是：如果用户单击另一个标记，我想关闭标记的信息窗口。我尝试只设置一个 infowindow 的全局变量，它确实达到了我的目的，当我单击另一个标记时 infowindow 会自动关闭，但是每个标记在 infowindow 中都有相同的内容。有人可以帮我解决这个问题吗？您的帮助将不胜感激。

这是我的代码

```
<img src="#WORKSPACE_IMAGES#1938.JPG"\><script type="text/javascript"           src="http://maps.googleapis.com/maps/api/js?sensor=false">     </script>
<script type="text/javascript">

var infoWindow;

function initialize() {

    //var test_geo=$v('P3016_H_RESIDENT_GEOCODING');
    //alert(test_geo);

    var myOptions = { zoom: 18, mapTypeId: google.maps.MapTypeId.ROADMAP};
    var map = new google.maps.Map(document.getElementById("map"), myOptions);

    var markerBounds = new google.maps.LatLngBounds();
    var point=new google.maps.LatLng(&P3016_H_RESIDENT_GEOCODING.);

    markerBounds.extend(point);
    map.fitBounds(markerBounds);

    var listener = google.maps.event.addListener(map, "idle", function() {
        map.setZoom(map.getZoom()-8);
        google.maps.event.removeListener(listener);
    });

    var json_obj = $v('P3016_H_JSON');
    var obj = jQuery.parseJSON(json_obj);
    var markers= new Array();
    var current_parameter;
    var my_URL;
    var test_prefix = $v('P3016_H_APEX_PREFIX');

    for (var u = 0; u < obj.Offenders.length; u++){
        var user = obj.Offenders[u];

        markers[u] = new google.maps.Marker({ position: new google.maps.LatLng(obj.Offenders[u].LA,obj.Offenders[u].LO), map: map });
        current_parameter ="&APP_ID.:216:&SESSION.::NO::O:"+user.cs;
        my_URL=my_URL=test_prefix+encodeURIComponent(current_parameter);

        my_URL='<a href='+my_URL+'>'+user.Name+'</a>'+'\n'+user.Addr;

        addInfoWindow(markers[u], my_URL);
    }

    function addInfoWindow(marker, message) {
        var info = message;

        infoWindow = new google.maps.InfoWindow({
            content: message
        });

        google.maps.event.addListener(marker, 'click', function () {
            //if (infoWindow.getMap()){
             //   infowWindow.close();
            //}

            infoWindow.open(map, marker);
        });
    }

    var radius_in_miles=$v('P3016_H_RADIUS_M');
    var circle = {
        strokeColor: "#ff0000",
        strokeOpacity: 0.8,
        strokeWeight: 1,
        fillColor: "#ff0000",
        fillOpacity: 0.20,
        map: map,
        center: point,
        radius: 1609.3*radius_in_miles   };

    var drawCirle = new google.maps.Circle(circle);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T01:20:36.367

只需在 open() 之前调用全局 infoWindow 上的 setContent() 即可。要获得正确的消息，您可以将用户 ID 存储在标记中并在需要时构造消息，即标记[u].user_id = u; 然后在点击处理程序中，您可以使用 this.user_id 从您的 offenders 数组中获取用户。

[https://developers.google.com/maps/documentation/javascript/reference#InfoWindow](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)

# javascript - pinterest 按钮在 Blogspot 网站上停止工作

> ID：13501149
> 
> 赞同：0
> 
> 时间：2012-11-21T20:02:07.897
> 
> 标签：javascript, blogger, pinterest, blogspot

我已经成功地在我的网站上实现了 pinterest pin it 按钮，但它最近停止了工作。谁能告诉我为什么？

我的网站是[http://www.lookbookcookbook.com](http://www.lookbookcookbook.com)，我正在使用以下代码

```
<div class='w2bPinitButton' expr:id='&quot;w2bPinit-&quot; + data:post.id' style='display: none;visibility: hidden;height: 0;width:0;overflow: hidden;'> 
<data:post.body/>
<script type='text/javascript'>
    w2bPinItButton({ 
        url:&quot;<data:post.url/>&quot;, 
        thumb: &quot;<data:post.thumbnailUrl/>&quot;, 
        id: &quot;<data:post.id/>&quot;, 
        defaultThumb: &quot;http://4.bp.blogspot.com/-YZe-IcKvGRA/T8op1FIjwYI/AAAAAAAABg4/j-38UjGnQ-Q/s1600/w2b-no-thumbnail.jpg&quot;, 
        pincount: &quot;horizontal&quot; 
    }); 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T05:40:35.430

看起来你已经设法解决了你的问题？

如果不是，此链接可能会有所帮助，或者对希望在其 Blogspot 站点中实施它的其他人有所帮助。

```
http://www.way2blogging.org/2012/06/add-dynamic-pinterest-pin-it-button-for-blogger-blogspot.html 
```

# javascript - 在函数中丢失变量

> ID：13501151
> 
> 赞同：0
> 
> 时间：2012-11-21T20:02:09.697
> 
> 标签：javascript

有人可以告诉我为什么在第一个`alert(items.index($(this))) = 1`和第二个`alert(items.index($(this))) = -1`。这个值是如何在另一个函数中改变的？

```
$(function () {
var items = $('#v-nav>ul>li').each(function () {
    $(this).click(function () {
        //remove previous class and add it to clicked tab
        items.removeClass('current');
        $(this).addClass('current');

        alert(items.index($(this)));

        $('#v-nav>div.tab-content').fadeOut("slow", function () { 
        alert(items.index($(this)));
        $('#v-nav>div.tab-content').eq(items.index($(this))).fadeIn("slow");
        });

      //  window.location.hash = $(this).attr('tab');
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T20:16:13.237

***`this`指当前对象。***

在第一个版本中，

`this`是`$('#v-nav>ul>li')`列表项。

在第二个版本中，

`this`被选中的 DOM 对象`$('#v-nav>div.tab-content')`

如果要保留 的先前值`this`，则将其缓存在变量中。（缓存`$(this)`是一种非常好的做法，因为您总是保存函数调用）。

当您使用时，`$(this)`您实际上会传递`this`给`$`函数。

```
$(function () {
var items = $('#v-nav>ul>li').each(function () {
    var $this = $(this);
    $this.click(function () {
        //remove previous class and add it to clicked tab
        items.removeClass('current');
        $this.addClass('current');

        alert(items.index($this));

        $('#v-nav>div.tab-content').fadeOut("slow", function () { 
        alert(items.index($this));
        $('#v-nav>div.tab-content').eq(items.index($(this))).fadeIn("slow");
        });

      //  window.location.hash = $(this).attr('tab');
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:17:25.007

在动画的回调函数里面，`this`不是你点击的元素，而是被动画的元素。

> “回调没有发送任何参数，但这被设置为正在动画的 DOM 元素。”

[http://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

（如果它没有被设置为动画元素，它就是对`window`对象的引用。）

将引用复制到动画调用之外的变量：

```
var t = this;
$('#v-nav>div.tab-content').fadeOut("slow", function () { 
  alert(items.index($(t)));
  $('#v-nav>div.tab-content').eq(items.index($(t))).fadeIn("slow");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:16:59.770

您必须考虑每个“this”的上下文，每个回调都有一个不同的“this”变量。如果您想保留原件，请执行以下操作：

```
var self = this; 
```

# objective-c - 长时间使用后应用程序和操作系统滞后

> ID：13501152
> 
> 赞同：0
> 
> 时间：2012-11-21T20:02:14.393
> 
> 标签：objective-c, ios, profiling, instruments

我有一个应用程序在使用大约 30-35 分钟后会降低整个操作系统的速度。滞后是渐进的，我可以看到它随着时间的推移而增加，因为我一遍又一遍地重复相同的操作。这是一个音乐应用程序，在播放大约 15-20 首曲目后，延迟令人难以忍受。

在 UIScrollView 中滚动项目时，帧速率下降到 10 以下。很多帧被跳过并且 UI 几乎锁定。如果我在应用程序后台运行，我会在 SpringBoard 中的操作系统中看到这种滞后，基本上无处不在。在 SpringBoard 中滚动应用程序图标变得不连贯。解锁的幻灯片变得不稳定，等等。

我将如何解决这个问题？可能是什么原因。由于代码库相当复杂，我无法削减代码以创建最小的可重现示例。我需要帮助来了解可能导致操作系统几乎锁定的原因。这不是死锁，因为 UI 仍然响应，只是需要很长时间。

哪些分析工具可以帮助阐明此问题的原因？我怀疑这可能是因为内存泄漏，但令人惊讶的是操作系统没有向应用程序发送内存警告，所以我也不完全确定。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:29:48.660

问题在于动画的建立。活动监视器在调试此问题时最有用。Springboard 的 CPU 使用率不断上升，直到达到 100%。所以时间显然没有花在我的应用程序上，而是在 Springboard 中的渲染服务器上。

我创建了两个具有大量重复次数的动画，让它们永远运行。然后我将每个动画添加到一个单独的层。为了创建动画，我使用了惰性检查，并使用给定键向图层询问任何现有动画。如果图层什么也没返回，我就创建了动画。问题是图层总是什么都不返回，所以我一直在创建这些永远重复的动画。

这是有问题的代码。

```
// This call always returned nil.
CABasicAnimation *innerRotationAnimation = (CABasicAnimation *)[self.spinnerViewInner.layer animationForKey:@"rotationAnimation"];

// So I kept on creating animations and piling them up.
if (innerRotationAnimation == nil)
{
    CATransform3D innerRotationTransform = CATransform3DMakeRotation(0.25f * M_PI * -1, 0, 0, 1.0);
    innerRotationAnimation = [CABasicAnimation animationWithKeyPath:@"transform"];
    innerRotationAnimation.toValue = [NSValue valueWithCATransform3D:innerRotationTransform];
    innerRotationAnimation.duration = 0.25f;
    innerRotationAnimation.cumulative = YES;
    innerRotationAnimation.repeatCount = HUGE_VALF;
    [self.spinnerViewInner.layer addAnimation:innerRotationAnimation forKey:@"rotationAnimation"];
} 
```

为了解决这个问题，我开始删除现有的动画。我可以在两个点上做到这一点，无论是在`animationDidStop:finished:`回调中，还是在我的`setAnimating:`方法中，都可以正常工作。这是`setAnimating:`方法的变化。

```
- (void)setAnimating:(BOOL)animating
{
    if (animating == NO) {
        // Remove all existing animations now.
        [self.layer removeAllAnimations];
    }
    else {
        CABasicAnimation *animation = // Create animation;
        [self.layer addAnimation:animation forKey:@"rotationAnimation"];
    }
} 
```

如果有人感兴趣，这是原始的**BROKEN代码。**

```
- (void)setAnimating:(BOOL)animating
{
    if (self.isAnimating == animating)
    {
        return;
    }

    _animating = animating;

    if (self.isAnimating == YES)
    {
        CABasicAnimation *innerRotationAnimation = (CABasicAnimation *)[self.spinnerViewInner.layer animationForKey:@"rotationAnimation"];
        CABasicAnimation *outerRotationAnimation = (CABasicAnimation *)[self.spinnerViewOuter.layer animationForKey:@"rotationAnimation"];

        if (innerRotationAnimation == nil)
        {
            CATransform3D innerRotationTransform = CATransform3DMakeRotation(0.25f * M_PI * -1, 0, 0, 1.0);
            innerRotationAnimation = [CABasicAnimation animationWithKeyPath:@"transform"];
            innerRotationAnimation.toValue = [NSValue valueWithCATransform3D:innerRotationTransform];
            innerRotationAnimation.duration = 0.25f;
            innerRotationAnimation.cumulative = YES;
            innerRotationAnimation.repeatCount = HUGE_VALF;
            [self.spinnerViewInner.layer addAnimation:innerRotationAnimation forKey:@"rotationAnimation"];
        }
        if (outerRotationAnimation == nil)
        {
            CATransform3D outerRotationTransform = CATransform3DMakeRotation(0.25f * M_PI * -1, 0, 0, -1.0);
            outerRotationAnimation = [CABasicAnimation animationWithKeyPath:@"transform"];
            outerRotationAnimation.toValue = [NSValue valueWithCATransform3D:outerRotationTransform];
            outerRotationAnimation.duration = 0.25f;
            outerRotationAnimation.cumulative = YES;
            outerRotationAnimation.repeatCount = HUGE_VALF;
            [self.spinnerViewOuter.layer addAnimation:outerRotationAnimation forKey:@"rotationAnimation"];
        }
    }
}

- (void)animationDidStop:(CAAnimation *)theAnimation finished:(BOOL)flag
{
    self.spinnerViewInner.layer.opacity = (self.isAnimating ? 1.0 : 0.0);
    self.spinnerViewOuter.layer.opacity = (self.isAnimating ? 1.0 : 0.0);
} 
```

不过，有一件事我仍然很好奇。由于给定键只能有一个活动动画，当我尝试添加具有相同键的新动画时，Core Animation 不应该删除我现有的动画吗？为什么又`animationForKey:`回来`nil`了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:11:06.537

使用仪器找出发生了什么。线程的失控产卵？内存泄漏？请参阅[https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html](https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html)

# c# - 嵌套 XmlReader

> ID：13501155
> 
> 赞同：0
> 
> 时间：2012-11-21T20:02:25.010
> 
> 标签：c#, xmlreader

我需要搜索一个 xml 文件，找到一个数据集，检查第二个 xml 文件，检查是否有相关数据，然后转到下一个数据集。

下面是一些示例代码来说明：

```
XmlReader XmlDoc1 = XmlReader.Create("~/data/xml/myxml1.xml",settings);
XmlReader XmlDoc2= XmlReader.Create("~/data/xml/myxml2.xml",settings);

using (XmlDoc1) {
    XmlDoc1.Open();
    //get a data node
    using(XmlDoc2){
        XmlDoc2.Open();
        //find related information... if it's there
        XmlDoc2.Close();
   }
   //do stuff
   XmlDoc1.Close();
} 
```

我很确定上面的代码会产生错误，但是读取 XmlDoc1、获取数据集、关闭它、搜索 XmlDoc2、关闭它会太费时间……清洗、冲洗、重复。所以，我正在寻找一种快速的方法来完成上述工作。

在你问之前，我不能在这个站点上运行数据库，所以 XML 就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:13:47.773

同时打开两个阅读器没有问题。`XmlDoc2`但是，在处理它（通过`using`块）后，您不能再使用它。

`XmlReader`是只向前的，所以基本上你会在`XmlDoc2`每次迭代中运行。

如果速度是您关心的问题，您可以尝试让`XmlDoc1`成为一个`XmlReader`（当您从上到下运行一次时）并为内部 xml 使用建议`XmlDocument`或`XDocument`类之一。

# javascript - Javascript编程函数

> ID：13501162
> 
> 赞同：0
> 
> 时间：2012-11-21T20:02:46.203
> 
> 标签：javascript, jquery

如果我有一个接收电话的函数

```
function car_total(y) {

final_total(y);
}

function toy_total(x) {

final_total(x);
} 
```

如果它们存在但只能接收 1 个参数而不抛出错误，我如何创建一个计算两个总数的函数，这可能吗？

```
function final_total(x,y) {
//if passed just x
sum = x ;
//if passed just y 
sum = y;
//if passed x, y 
sum = x + y ; 

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T20:06:56.460

您只能传递一个参数，但只有一个参数，该参数必须是`x`; 因为没有办法（不传递对象）来确定您“打算”传递的变量。因此，收到的第一个变量将始终是*，*`x`第二个`y`，尽管如此，我建议：

```
function final_total(x,y) {
    return y ? x + y : x;
} 
```

并且，在只有一个传入参数的情况下，此函数返回该单个值，或者，给定两个变量，返回这两个的总和。所以这确实如你所愿，即使无法确定是否`x` *传入* `y`。

但是，如果您必须显式传入*或* `x` *（* `y`出于某种原因）：

```
function final_total(values) {
    var x = values.x || 0,
        y = values.y || 0;
    return x + y;
}

var variableName1 = final_total({x : 23, y : 4});
console.log(variableName1);
// 27

var variableName2 = final_total({y : 4});
console.log(variableName2);
// 4

var variableName3 = final_total({x : 23});
console.log(variableName3);
// 23​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/xYKG2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:14:14.243

```
var final_total = function(x,y) { return x+(y||0); }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:06:35.957

您可以像拥有它一样定义函数，然后检查任何一个参数是否为空。缺点是您必须确保在调用时将 null 放在正确的位置。

```
function final_total(x,y) {

    if(x && y) sum = x + y;
    else if (x) sum = x;
    else if (y) sum = y; 

} 
```

# javascript - 使用 Firebug 控制台检查数组大小

> ID：13501163
> 
> 赞同：0
> 
> 时间：2012-11-21T20:02:49.713
> 
> 标签：javascript, html5-canvas, dynamic-arrays

我有以下 JS 文件，其中包含一个函数，用于绘制我使用 HTML5 画布和 JavaScript 编写的基于浏览器的游戏的第一级所需的元素：

```
* This function draws the elements for level 1\. */
        function drawLevelOneElements(){
            /*First, clear the canvas */ 
            context.clearRect(0, 0, myGameCanvas.width, myGameCanvas.height);
            /*This line clears all of the elements that were previously drawn on the canvas. */
            /*Then redraw the game elements */
            drawGameElements(); 

            /*Create the four description areas, and place them near the bottom of the canvas */
            /*Create boxes with rounded corners for the description areas */
            CanvasRenderingContext2D.prototype.drawDescriptionArea = function(x, y, width, height, radius, stroke){
                if(typeof stroke == "undefined" ){
                    stroke = true;
                }
                if(typeof radius === "undefined"){
                    radius = 5;
                }
                this.beginPath();
                this.moveTo(x + radius, y);
                this.lineTo(x + width - radius, y);
                this.quadraticCurveTo(x + width, y, x + width, y + radius);
                this.lineTo(x + width, y + height - radius);
                this.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
                this.lineTo(x + radius, y + height);
                this.quadraticCurveTo(x, y + height, x, y + height - radius);
                this.lineTo(x, y + radius);
                this.quadraticCurveTo(x, y, x + radius, y);
                this.closePath();
                if(stroke){
                    context.stroke();
                }
            }

            context.drawDescriptionArea(70, 400, 120, 70);
            context.font = '25pt Calibri';
            context.strokeText('Asset', 90, 440);

            context.drawDescriptionArea(300, 400, 120, 70);
            context.strokeText('Liability', 310, 440);

            context.drawDescriptionArea(540, 400, 120, 70);
            context.strokeText('Income', 550, 440);

            context.drawDescriptionArea(750, 400, 180, 70);
            context.strokeText('Expenditure', 760, 440);

            /*Now draw the images to the canvas */
            /*First, create variables for the x & y coordinates of the image that will be drawn.
                the x & y coordinates should hold random numbers, so that the images will be 
                drawn in random locations on the canvas.*/
                var imageX = Math.floor(Math.random()*100);
                var imageY = Math.floor(Math.random()*100);

            /*Draw all images from assetsImageArray */
            /*Use a while loop to loop through the array, get each item and draw it. */
            var arrayIteration = 0;
            while(arrayIteration < assetsImageArray.length){
                context.drawImage(assetsImageArray[arrayIteration], imageX, imageY, 50, 50);
                arrayIteration+1;
            }

        } 
```

目前，当我在浏览器中加载我的网页时，会显示画布以及画布上的开始按钮。单击开始按钮时，将调用上述函数。

但是，由于某种原因，执行此功能需要很长时间：当我单击按钮时，浏览器在几秒钟内根本没有做任何事情，然后它就像没有响应一样“淡出”，然后任务实际执行，函数中的元素被绘制到画布上。

我还收到有关无响应脚本的警告消息，让我可以选择继续、调试脚本或停止脚本。当我选择停止脚本时，被调用的函数被执行，所有元素都被绘制到画布上。

我想知道如何阻止显示此警告消息，并获得将元素更快地绘制到画布的功能。

我的第一个想法是它可能与此函数末尾的 while 循环有关，或者可能与我用来保存将要绘制的图像的数组有关？

At the moment, the array only holds one image- eventually I want to have three or four separate arrays that will hold a total of about 40 images between them, all of which will be drawn to the canvas using this function, but I don't think I can start adding more images to this array until I've managed to cut the loading speed by a hefty amount.

Does anyone know if what I'm doing is correct? Or if not, how I should go about it?

One thing I'm not sure about is how JavaScript determines its array sizes- are they fixed or dynamic? How would I print out the size of this array in the console to check?

I haven't specified an array size because I need it to be dynamic, as the number of images that will need to be loaded to the canvas must be changeable. Can anyone help?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:29:01.210

Your problem is that you never increment arrayIteration. "arrayIteration+1" doesn't modify it.

# mysql - 轻松查看 MySQL 日志

> ID：13501164
> 
> 赞同：0
> 
> 时间：2012-11-21T20:02:51.483
> 
> 标签：mysql, logging

我的问题是：我有一个应用程序，它与 MySQL-server 进行了深入讨论，我需要检查传入查询中的一些问题。

有什么好的工具可以查看服务器执行了哪些查询？很好，如果它是 MySQl 工作台中的一些 GUI。当然，我知道`mysqld --log=log_file_name`，但实际上直接查看文件看起来不像查看日志的套件工具。

感谢您的提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:07:46.247

你可以试试[JetProfiler——](http://www.jetprofiler.com/)我知道它会让你这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:16:13.760

如果您没有找到满足您需求的工具，您可以随时在您的应用程序中记录查询和查询错误并查看这些日志。

# primefaces - 如何在 Spring Web Flow 中处理 Primefaces p:ajax 事件

> ID：13501166
> 
> 赞同：0
> 
> 时间：2012-11-21T20:03:15.927
> 
> 标签：primefaces, spring-webflow

有没有一种“优雅”的方式让 SWF 响应 Primefaces Ajax 事件？如下所示：

```
<p:dataTable id="myDT" value="#{myList}" var="listVal">
<p:ajax event="rowToggle" update="expandedText" />  
<p:rowToggler>
<h:outputText id="expandedText" value="#{listVal.someText}"/>
</p:rowToggler>
</p:dataTable> 
```

如果我可以让它在我的视图中触发 SWF 操作并呈现适当的片段，那将是理想的：

```
<view-state id="myView" view="myview.xhtml">
<transition on="myDT:rowToggle"  to="showRowContents" >
<render fragments="expandedText"/>
</transition> 
```

现在我知道的唯一解决方法是让 Ajax 事件调用 RemoteCommand：

```
<p:dataTable id="myDT" value="#{myList}" var="listVal">
<p:remoteCommand name="rowToggleCommand" action="rowToggle"  update="expandedText"/>
<p:ajax event="rowToggle" oncomplete="rowToggleCommand()" />  
<p:rowToggler>
<h:outputText id="expandedText" value="#{listVal.someText}"/>
</p:rowToggler>
</p:dataTable> 
```

我发现这个变通方法有点难看，而且它还会导致两个 Ajax 请求而不是一个。我相信有可能修补 SWF 端以响应此类 Ajax 事件，但不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:46:24.120

经过大量研究，我明白这是不可能的。SWF 架构不容易响应此类事件。您仍然可以在 Ajax 事件上调用 bean 方法，并且任何负责自己的部分呈现的 Facelets 组件都将正确响应 Ajax 事件，如果您进行此修复：[http ://static.springsource.org/spring-webflow/docs/ 2.3.x/reference/html/ch13s10.html](http://static.springsource.org/spring-webflow/docs/2.3.x/reference/html/ch13s10.html)

另请参阅我关于同一主题的其他问题：[Primefaces RowEditor does not work with Spring Webflow](https://stackoverflow.com/questions/13422213/primefaces-roweditor-does-not-work-with-spring-webflow)

任何与 SWF 相关的操作都必须由 Primefaces RemoteCommand 组件或喜欢（CommandButton 等）调用

# wpf - TabItem 标题不响应鼠标，仅在文本上

> ID：13501169
> 
> 赞同：1
> 
> 时间：2012-11-21T20:03:34.147
> 
> 标签：wpf, header, mouse, tabcontrol, tabitem

我有一个带有四个 TabItems 的 WPF TabControl，并将自定义样式应用于 TabControl 和 TabItems，如下所示：

```
<Style TargetType="TabControl" x:Key="TabControlStyle">
    <Setter Property="Background" Value="Transparent" />
    <Setter Property="BorderThickness" Value="0" />
    <Setter Property="TabStripPlacement" Value="Left" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="TabControl">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- The container for tab item headers -->
                    <TabPanel 
                         Grid.Column="0"
                         Panel.ZIndex="1" 
                         Margin="0,0,4,-1" 
                         IsItemsHost="True"
                         Background="Transparent" />

                    <!-- Shadow to the left of the tab pages -->
                    <Border Grid.Column="0" Width="5" HorizontalAlignment="Right">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Offset="0" Color="Transparent" />
                                <GradientStop Offset="1" Color="{StaticResource ShadowGray}" /> 
                            </LinearGradientBrush>
                        </Border.Background>
                    </Border>

                    <!-- Tab page -->
                    <Border Grid.Column="1" 
                            Background="White" 
                            SnapsToDevicePixels="true"
                            BorderThickness="1" 
                            BorderBrush="{StaticResource HeaderBlueBrush}">
                        <ContentPresenter ContentSource="SelectedContent" />    
                    </Border>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<Style TargetType="{x:Type TabItem}" x:Key="TabItemStyle">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TabItem}">

                <!-- Tab item header -->
                <Border Name="border" 
                        SnapsToDevicePixels="True" 
                        BorderThickness="0" 
                        Padding="5,8,40,8"
                        Margin="0,0,-4,0">
                    <TextBlock Name="buttonText" 
                                Margin="0" 
                                FontSize="14" 
                                Foreground="{StaticResource FontDarkGrayBrush}" 
                                Text="{TemplateBinding Header}" 
                                VerticalAlignment="Center" />
                </Border>

                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Trigger.Setters>
                            <Setter TargetName="border" Property="Background" Value="{StaticResource HoverBlueBrush}" />
                       </Trigger.Setters>
                    </Trigger>
                    <Trigger Property="IsSelected" Value="True">
                        <Trigger.Setters>
                            <Setter TargetName="border" Property="Background" Value="{StaticResource SelectionBlueBrush}" />
                            <Setter TargetName="buttonText" Property="Foreground" Value="White"/>
                        </Trigger.Setters>
                    </Trigger>

                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

如您所见，选项卡项目标题由一个边框组成（当鼠标悬停在它上面或被选中时，它会获得不同的颜色），并且在该边框中有一个显示标题标题的 TextBlock。我猜很简单。

问题是标题对鼠标输入没有正确反应。基本上：在他们做出反应之前，我必须悬停/单击实际文本（我猜是 TextBlock）。如果我单击文本的右侧，则没有任何反应。悬停也是一样。但是，当我已经将鼠标悬停在一个标题的文本上时（因此它会获得“悬停颜色”），然后将鼠标移动到文本的右侧（通常不会做出反应），然后悬停颜色仍然存在并且确实在我真正离开边境之前不要离开。

这是一张图片来澄清它：

![示例截图](../Images/2439c66f948e178690fdde9cd485c45b.png)

是什么导致了这种行为？我假设这是不正常的，这很烦人，因为 TabControl 不会像人们期望的那样做出反应。

我尝试“反转”边框/文本块组合的边距/填充（通过为 TextBlock 提供边距来留出空间，而不是为边框提供任何填充），但这并没有改变任何东西。

帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T21:08:05.370

标签项模板中边框的背景必须为非空。否则边框对于鼠标交互是不可见的。透明的也可以。

```
<Border Name="border" Background="Transparent" ... 
```

# visual-studio-2012 - Visual Basic 和图形大小

> ID：13501170
> 
> 赞同：1
> 
> 时间：2012-11-21T20:03:36.470
> 
> 标签：visual-studio-2012

我是编程语言的初学者，所以我想从简单的东西开始，比如 Visual Studio（Visual Basic 语言）。目前试图弄清楚为什么使用这种代码，通过代码插入到我的表单中的图像比实际应该大...

我的第一个项目是创建可以通过 Photoshop 蒙皮的模拟时钟，但是这个带有图像大小的东西让我发疯了。

如果有人能解释我为什么会发生这种情况，那就太好了...

代码和结果如下：

```
Public Class Form1

'25x25 white rectangle image
Dim rec As Image = Image.FromFile("c:\img\rectangle.png")

Private Sub pic_Paint(sender As Object, e As PaintEventArgs) Handles pic.Paint
    'Declaring graphics
    Dim g As Graphics = e.Graphics
    'Drawing image into PictureBox called pic
    g.DrawImage(rec, 200, 200)
End Sub
End Class 
```

![结果](../Images/6d0a73761fa91184fc2f4c575649d271.png)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:17:28.850

可能您没有以 96dpi 运行（您的标题栏在我看来有点大），或者您使用的 25x25 图像有一个 DPI 元数据字段，该字段告诉 GDI（Windows 中的图形系统）以缩放尺寸绘制它。

我建议使用类的`SetResolution`方法`Bitmap`或摆弄`DrawImage`重载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:29:57.310

原来这是我的图形编辑器相关问题。使用 ms paint 创建 25x25 正方形表明它在运行程序时显示正确。谢谢！

# android - 以更好的分辨率拍摄照片

> ID：13501184
> 
> 赞同：0
> 
> 时间：2012-11-21T20:04:44.097
> 
> 标签：android, camera

我正在制作一个应用程序来拍照，但我不想使用`startActivityForResult`.

我正在使用`SurfaceView`和`PictureCallback()`

但问题是，照片​​总是与`320x240px`

这是代码：

```
PictureCallback myPictureCallback_JPG = new PictureCallback(){

    public void onPictureTaken(byte[] arg0, Camera arg1) {       

      Uri uriTarget = getContentResolver().insert(Media.EXTERNAL_CONTENT_URI, new ContentValues());

      OutputStream imageFileOS;

      try {

       imageFileOS = getContentResolver().openOutputStream(uriTarget);
       imageFileOS.write(arg0);
       imageFileOS.flush();
       imageFileOS.close();

       Toast.makeText(MainActivity.this,"Image saved: " + uriTarget.toString(),Toast.LENGTH_LONG).show();

      } catch (FileNotFoundException e) {
       // TODO Auto-generated catch block
       e.printStackTrace();
      } catch (IOException e) {
       // TODO Auto-generated catch block
       e.printStackTrace();
      }

      camera.startPreview();
     }
}; 
```

我如何“对相机说”以获得最佳分辨率？

无论如何，谢谢（：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T22:28:56.147

JpeqQuality 是关于压缩的，但相机参数似乎是正确的指针

您可以从相机获取当前参数

```
Camera.Parameters parameters = camera.getParameters(); 
```

然后强制预览/图片的大小

```
parameters.setPreviewSize(previewWidth, previewHeight);
parameters.setPictureSize(newWidth, newHeight);
// push it back to camera
camera.setParameters(parameters); 
```

注意不要忘记检查手机上的相机是否支持该尺寸，因为它是特定于设备的

[http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getSupportedPictureSizes](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getSupportedPictureSizes) ()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T21:16:42.573

在 onPictureTaken 回调方法中，图片已经拍摄完毕，所以没有什么可做的。

在实例化 Camera 对象后，通过 setParameters 方法设置参数。看看[Camera.Parameters](http://developer.android.com/reference/android/hardware/Camera.Parameters.html)类。我认为[setJpegQuality](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setJpegQuality%28int%29)方法可能会让您感兴趣。

基本上，我认为它应该是这样的：

```
Camera camera= Camera.open();
camera.getParameters().setJpegQuality(100); // being 100 the max quality and 0 the min 
```

# javascript - 有 2 个粘性标题，一个可以切换，一个没有

> ID：13501187
> 
> 赞同：1
> 
> 时间：2012-11-21T20:05:07.760
> 
> 标签：javascript, jquery, html, css

几周前我在这里问了一个关于[让粘性标题切换出来](https://stackoverflow.com/questions/13279725/getting-a-sticky-header-to-push-up-like-in-instagrams-iphone-app-using-css-a)的问题，就像他们在 iPhone Instagram 应用程序中所做的那样。当有人用我正在寻找的东西回答我的问题时，我很高兴。不幸的是，我在不同的环境中玩弄它，我似乎无法让它工作。这是有效的原件：（[http://codepen.io/chrissp26/full/gBrdo](http://codepen.io/chrissp26/full/gBrdo)）

这是发生了什么：（[http://codepen.io/anon/full/sAHuy](http://codepen.io/anon/full/sAHuy)）

基本上我需要像在第一个示例中那样切换和“向上推”子标题，同时保持主标题部分，顶部部分相同。子部分需要推到主标题下，而不是在它上面。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:36:51.450

jQuery 代码正在等待元素触摸屏幕顶部，而不是像您在 CSS 中所说的那样距离顶部 45 个像素。见第 322-337 行。

# asp.net-mvc - 我需要在我的视图中获取数据

> ID：13501192
> 
> 赞同：0
> 
> 时间：2012-11-21T20:05:26.647
> 
> 标签：asp.net-mvc, view, model, viewbag

我在我的 mvc 内网中有一个视图来创建进程。

在该视图中，我有一个需要填充数据的表。

这是我的看法

```
@model TestingTool.ViewModels.ProcessModel
@{
    ViewBag.Title = "Create";
}
<h2>
    Create</h2>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Process</legend>
        <div class="editor-label">
            @Html.LabelFor(model => model.Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Name)
            @Html.ValidationMessageFor(model => model.Name)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Code)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Code)
            @Html.ValidationMessageFor(model => model.Code)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Description)
        </div>
        <div class="editor-field">
            @Html.TextAreaFor(model => model.Description)
            @Html.ValidationMessageFor(model => model.Description)
        </div>
        <table>
            <thead>
                <tr>
                    <th>
                        Region
                    </th>
                    <th>
                        Owner
                    </th>
                </tr>
            </thead>
            <tbody>
               @if (Model != null)
               {
                   foreach (var item in ViewBag.Regions)
                   {
                       <tr>

                           <td>
                             @Html.DisplayTextFor(i => item.Name)
                           </td>

                           <td>
                               @Html.DropDownListFor(i => item.User, new SelectList(item.User, "Id", "Name"))
                           </td>

                       </tr>
                   }
               }
            </tbody>
        </table>
        <p>
            <input type="button" value="Create" />
        </p>
    </fieldset>
}
<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

这是我的控制器

```
//
        // GET: /Process/Create

        public ActionResult Create()
        {
            Collection<RegionModel> region = new Collection<RegionModel>();

            foreach (var regions in _db.Regions)
            {
                if (regions.Name != "Europe")
                {
                    RegionModel iRegion = new RegionModel
                        {
                            Name = regions.Name,
                            Id = regions.Id,
                            User = new Collection<UserModel>()
                        };

                    foreach (User user in _db.Users)
                    {
                        UserModel iUser = new UserModel { Id = user.Id, Name = user.Name };

                        iRegion.User.Add(iUser);
                    }

                    region.Add(iRegion);
                }
            }

            ViewBag.Regions = region;

            return View();
        } 
```

我认为可以迭代 ViewBag，但出现此错误

```
An expression tree may not contain a dynamic operation - mvc 
```

我想知道的另一件事是是否有可能让模型预先填充数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:09:13.827

不要将 VIEWBAG 用于模型数据。创建一个具有位置的视图模型属性。

```
class MyViewModel {
  public Collection<RegionModel> regions {get;set;}
  ...snip...
} 
```

然后在你的控制器中：

```
var viewmodel = new MyViewModel();
viewmodel.regions = region;

return View(viewmodel); 
```

**编辑：** 看起来你已经有一个视图模型：`@model TestingTool.ViewModels.ProcessModel` 你可以为区域的视图模型添加一个属性吗？

# objective-c - UIView 大小和 UIWindow rootViewController

> ID：13501197
> 
> 赞同：0
> 
> 时间：2012-11-21T20:05:53.123
> 
> 标签：objective-c, ios, cocoa-touch, uiview, uiviewcontroller

在遵循一本流行的 iOS 开发书籍的练习时，我遇到了一行我不理解也找不到解释的代码，所以我想我会在这个社区上发帖以获得洞察力......

在 UIViewController 中，视图的初始化如下：

```
-(void)loadView {
    [self setView:[[SomeView alloc] initWithFrame:CGRectZero]];
} 
```

在应用程序委托上，控制器被设置为 rootViewController，如下所示：

```
SomeController *sc = [[TouchViewController alloc] init];
[[self window] setRootViewController:sc]; 
```

视图设置为零矩形如何在应用程序运行时全屏显示？

我的猜测是 rootViewController 的视图被窗口设置为窗口的边界......但我无法在任何地方确认这一点......

任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:08:59.310

[*从UIViewController 类参考*](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)的“视图管理”部分：

> 如果视图控制器由窗口对象拥有，则它充当窗口的根视图控制器。视图控制器的根视图作为窗口的子视图添加并调整大小以填充窗口。

# javascript - jQuery timeago 用于使用 .load 生成的内容

> ID：13501201
> 
> 赞同：1
> 
> 时间：2012-11-21T20:06:08.130
> 
> 标签：javascript, jquery, ajax

我正在使用来自[https://github.com/rmm5t/jquery-timeago的 jQuery timeago 插件](https://github.com/rmm5t/jquery-timeago)

它在页面加载时工作正常，但我在模态窗口中使用它生成了一些内容，`.load`它似乎并没有影响它。

要初始化 timeago 我有：

```
$(document).ready(function() {
    $('time.timeago').timeago();
}); 
```

这是我用来在模态中加载内容的 jQuery：

```
$(document).ready(function () {

    // on click, serialize all form elements and insert/update database
    $('.comment').click(function (e) {

        e.preventDefault();
        var $this = $(this);
        var csrf = $('input[name=csrf_gpin]').val();
        var pin_id = $this.closest('.grid-box').attr('data-id');

        $('input[name=comment_pin_id]').val(pin_id);

        $("#modal-comment").reveal();

        // load all comments associated with pin
        $("#comments").load('/comment/pin', { 'csrf_gpin' : csrf, 'pin_id' : pin_id });

    });
}); 
```

加载内容中的 HTML 是：

```
<time class="timeago" datetime="2012-11-19T20:35:14+01:00" title="November 19, 2012">2 days ago</time> 
```

我怎样才能重新初始化 timeago 以便它可以处理这个生成的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:17:32.800

`timeago`加载完成后尝试初始化：

```
$("#comments").load('/comment/pin', 
           { 'csrf_gpin' : csrf, 'pin_id' : pin_id },
           function(){   //A callback function that is executed when the request completes
               $(this).find('time.timeago').timeago();   
           }); 
```

# iphone - 访问子类 Superview？

> ID：13501202
> 
> 赞同：0
> 
> 时间：2012-11-21T20:06:34.933
> 
> 标签：iphone, objective-c, subclass, subview, superview

我有一个`UITableView`由我自己的 custom 组成`UITableViewCell`的，子类为`CustomCell`. 我在`UITextField`该单元格中添加了一个方法，并且一个方法在某些事件上运行（来自文本字段）。

当这个方法运行时，我需要访问`CustomCell`文本字段是子视图的。

所以我想，我怎样才能访问文本字段的父视图（`CustomCell`）？

我试过这个，获取文本字段，方法的发送者，然后从中获取它的超级视图。

```
CustomTextField *textField = sender;
    CustomCell *cell = (CustomCell *)[textField superview]; 
```

但是这失败了，当我尝试访问我的单元格的属性时，应用程序崩溃了，我在控制台中得到了这个：`[UIView myLabel]: unrecognized selector sent to instance`. （`myLabel`是我试图在单元格上访问的属性。）

为什么这不起作用，或者是否有访问该单元格的替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:16:19.107

您不应该将您的视图添加为 a 的直接子视图`UITableViewCell`。相反，您应该将它们添加为单元格的子视图`contentView`。如果你在 xib 中布置你的单元格，Interface Builder 会自动为你处理这些。所以一般来说，你不应该期望单元格是你的文本字段的直接超级视图。

我将通过以下两种方式之一处理此问题：

1.  给出`CustomTextField`一个引用其包含的弱属性`CustomCell`。然后，您可以只向文本字段询问其单元格。如果您使用的是 xib，请将属性设置为 an`IBOutlet`并将其连接到 xib。如果您在代码中创建单元格，请在创建单元格和文本字段时在代码中设置属性。

2.  沿着视图层次结构寻找`CustomCell`祖先。

    ```
    CustomCell *cell = textField.superview;
    while (cell && ![cell isKindOfClass:[CustomCell class]]) {
        cell = [cell superview];
    } 
    ```

# bash - 使用 sed 重写文件行

> ID：13501204
> 
> 赞同：1
> 
> 时间：2012-11-21T20:06:38.283
> 
> 标签：bash, shell, sed

我希望能够确保配置文件的一行包含附加的路径。

文件中的行如下所示：

```
checkedpaths=${myapp.base}/lib 
```

如果该行没有 ${myapp.base}/bin ，我想将该行附加到以下内容：

```
checkedpaths=${myapp.base}/lib,${myapp.base}/bin 
```

线上可能有任意数量的其他路径。
${myapp.base} 已在文件中定义，无需担心它扩展为什么。

我试图使用标准的 shell 脚本命令来做到这一点。我认为使用 sed 可以更紧凑地完成它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:13:23.093

你应该能够做到：

```
sed '/checkedpaths/{ \@${myapp.base}/bin@!s@$@,${myapp.base}/bin@ }' 
```

这不会替换文件的内容：重定向或使用`-i`. 此外，这不是特别健壮，并且无法将文本附加到包含 的行`${myapp.base}/binary`，但如果这是一个问题，这很容易解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T21:01:15.397

```
awk '{print $0 (/\$\{myapp\.base\}\/bin(,|$)/ ? "" : "${myapp.base}/bin")}' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:13:48.277

不使用`sed`but only `bash`，您可以使用：

```
if [[ $myvar != *tobeappended* ]]
then
    myvar=$myvar,tobeappended
fi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T20:29:31.343

您可以使用以下`awk`脚本执行此操作：

```
#!/bin/bash

awk '{printf "%s", $0}
     !/\$\{myapp\.base\}\/bin/ {printf "%s", ",${myapp.base}/bin"}
     {print ""}' input_file > output_file 
```

**输入：**

```
checkedpaths=${myapp.base}/lib
checkedpaths=${myapp.base}/bin,someotherstuff 
```

**输出：**

```
checkedpaths=${myapp.base}/lib,${myapp.base}/bin
checkedpaths=${myapp.base}/bin,someotherstuff 
```

**解释：**

*   `awk`: 调用 awk 命令
*   `'...'`: 单引号括起来的所有内容都将由 awk 运行
*   `{printf "%s", $0}`：对于每一行，按原样打印，但不要以换行符终止
*   `!/\$\{myapp\.base\}\/bin/ {printf ",${myapp.base}/bin"}`: 如果模式`${myapp.base}/bin`在当前行的任何地方匹配，则打印`,${myapp.base}/bin`（因为我们在最后一步中没有用换行符终止该行，这会将其附加到同一行的末尾。）
*   `{print ""}`: 现在用换行符终止当前行，不管模式是否匹配。
*   `input_file > output_file`：`input_file`用作输入；将输出重定向到`output_file`

# android - 从自己的应用程序检查更新（没有市场）

> ID：13501205
> 
> 赞同：1
> 
> 时间：2012-11-21T20:06:42.400
> 
> 标签：android

慢慢地……非常缓慢地……我正在构建我的第一个应用程序……现在我想从我的网络服务器自动检查它的更新。

因此，我需要将代码添加到我的应用程序中，以检查启动应用程序时是否有任何更新。

我在互联网上进行了长时间搜索，但没有找到任何示例代码...

有人可以得到那个代码吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:21:20.563

只需在您的网络服务器上放置一个带有实际版本号的文本文件。在启动时，您通过 HttpRequest 获得值。然后你可以做这样的事情：

```
int localVersionNumber = ctx.getPackageManager().getPackageInfo(ctx.getPackageName(), 0).versionCode;
int serverVersionnumber = GetVersionNumberFromInternet();

if(serverVersionnumber > localVersionNumber)
{
 //new version is available...  ask the user if the wants to update
 // if true --->
Uri marketUri = Uri.parse("market://details?id="
+ getPackageName());
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(marketUri);
startActivity(intent);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:10:49.237

本质上，您会想要提出某种服务器请求。您应该返回您的代码的最新版本，并从您的代码中检查它的版本。我建议输出一个 JSON 数组，有很多库可以这样做。

你会想做某种 CGI，最有可能是 PHP、Python、Ruby 或 Perl 之类的语言。然后你必须找到一个地方来举办它。在这些语言中，我建议使用 Python，没有任何理由。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:16:57.320

您可以检索应用程序的当前版本（您在 AndroidManifest.xml 中设置），如下所示：

```
PackageInfo pInfo = getPackageManager().getPackageInfo(getPackageName(), 0);
version = pInfo.versionCode 
```

现在您必须将最新的应用程序版本号放在服务器上，检索它并将其与上述版本进行比较。如果服务器为您提供比本地版本号更高的版本号，则您必须执行更新（例如通过显示通知）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T20:18:38.880

字符串 currentVersion、版本、下载路径；

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.devicecontrol);
        PackageInfo pInfo = getPackageManager().getPackageInfo(getPackageName(), 0);
        currentVersion = pInfo.versionCode // Give your current version 

        if(isOnline())
         new getSettingsTask().execute();       

}

// Put an settings xml to the server which old app info    

private class getSettingsTask extends AsyncTask<String, Void, Integer> {

        @Override

        protected Integer doInBackground(String... params) {

            try {

                final Uri.Builder uri = new Uri.Builder();

                uri.scheme("http");
                uri.authority("DOMAIN or IP");
                uri.path("virtualpath/settings.xml");

                URL url = new URL(uri.toString());
                DocumentBuilderFactory dbf = DocumentBuilderFactory
                        .newInstance();
                DocumentBuilder db = dbf.newDocumentBuilder();
                Document doc = db.parse(new InputSource(url.openStream()));
                doc.getDocumentElement().normalize();

                NodeList nodeList = doc.getElementsByTagName("settings");

                Log.v("data :", "length : " + nodeList.getLength());

                for (int i = 0; i < nodeList.getLength(); i++) {
                    Node node = nodeList.item(i);
                    Element fstElmnt = (Element) node;

                    NodeList versionList = fstElmnt
                            .getElementsByTagName("androidversion");
                    Element versionElement = (Element) versionList.item(0);
                    versionList = versionElement.getChildNodes();

                    NodeList dpList = fstElmnt
                            .getElementsByTagName("androiddownloadpath");
                    Element dpElement = (Element) dpList.item(0);
                    dpList = dpElement.getChildNodes();

                    version = (versionList.item(0)).getNodeValue().toString();
                    downloadPath = (dpList.item(0)).getNodeValue().toString();

                }
            } catch (Exception e) {

            }
            return 1;
        }

        @Override
        protected void onPostExecute(Integer result) {
            try {
                if (currentVersion.equals(version)) {
                    // IT IS OK GO 
                } else {
                    AlertDialog.Builder builder = new AlertDialog.Builder(
                            devicecontrol.this);
                    builder.setCancelable(false);
                    builder.setIcon(R.drawable.icon);
                    builder.setTitle("Please download new version...");
                    builder.setInverseBackgroundForced(true);
                    builder.setPositiveButton("Yes",
                            new DialogInterface.OnClickListener() {

                                public void onClick(DialogInterface dialog,
                                        int which) {
                                    try {
                                        Intent i = new Intent(
                                                Intent.ACTION_VIEW);
                                        i.setData(Uri.parse(downloadPath));
                                        startActivity(i);
                                        dialog.dismiss();
                                        System.exit(getTaskId());
                                    } catch (Exception e) {
                                        message(e.toString());
                                    }
                                }
                            });
                    builder.setNegativeButton("No",
                            new DialogInterface.OnClickListener() {

                                public void onClick(DialogInterface dialog,
                                        int which) {
                                    dialog.dismiss();
                                    System.exit(getTaskId());
                                }
                            });

                    AlertDialog alert = builder.create();
                    alert.show();

                }
            } catch (Exception e) {

            }
            ;
            super.onPostExecute(result);
        }
    } 
```

**您在服务器上的 xml 如下所示，**

您的应用版本下载路径

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T23:34:54.457

您可以检查一些`open-source`（根据 Apache 软件许可证 2.0 许可）选项，看看它是如何工作的。

1.  [http://code.google.com/p/auto-update-apk-client/](http://code.google.com/p/auto-update-apk-client/)是自动更新服务的android客户端（我隶属于），它体积小，易于实现，并且支持rooted静默更新设备。

2.  [https://github.com/commonsguy/cwac-updater](https://github.com/commonsguy/cwac-updater)由 Mark Murphy 编写，但它可能需要您运行自己的更新服务器，我不确定静默更新。

# algorithm - 如何找到树上一组节点之间的最大距离？

> ID：13501216
> 
> 赞同：11
> 
> 时间：2012-11-21T20:07:05.370
> 
> 标签：algorithm, graph, tree

我在一棵（非二叉树）树上有一组 n 个节点。我想找到任意两个节点之间的最大距离。（我将两个节点之间的距离定义为这些节点与其最低共同祖先之间的距离之和）。

我可以通过计算每个节点到其他节点之间的距离并获得最大值来轻松地在 O(n^2) 中解决这个问题，但是我希望有更好的东西，因为这对于我的应用场景来说太慢了*。

*（额外信息：在我的应用场景中，这些节点实际上是文件，而树是目录结构。因此，树很浅（深度 < ~10），但它可能有 300,000+ 个节点。文件集可以是大小在〜3-200之间*。实际上，我试图弄清楚我的文件在每组中的分布范围。）*

**编辑：**也许我可以问一个等效的问题来提示更多答案：考虑原始树的一个子集，它只包含我的集合中的节点和连接它们所需的节点。那么问题就变成了：**如何在无向无环图中找到最长的简单路径？**

***编辑 2：**正如 didierc 所指出的，我实际上应该考虑文件夹集而不是文件。这使我的集合更小，并且详尽的方法可能足够快。尽管如此，看到一个更快的解决方案还是有好处的，我很想知道是否有一个。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T21:51:59.467

您的问题也称为查找树的直径：在节点对之间的所有最短路径中，您正在寻找最长的路径。

用 d(S) 表示树 S 的直径，用 h(S) 表示树的高度。

具有子树 S1...Sd 的树 S 中最远的两个节点可以位于其子树之一下，也可以跨越两个子树。在第一种情况下，当两个最远的节点在子树 Si 下时，d(S) 就是 d(Si)。在第二种情况下，当距离最远的两个节点跨越两个子树时，比如 Si 和 Sj，它们的距离是 h(Si) + h(Sj) + 2，因为这两个节点必须是每个子树中最深的两个节点，再加上两个更多的边加入两个子树。事实上，在这第二种情况下，Si 和 Sj 必须是 S 的最高和第二高的子树。

O(n) 算法将按如下方式进行

## 算法 d(S)

```
1\. recursively compute d(S1)...d(Sd) and h(S1)...h(Sd) of the subtrees of S.
2\. denote by Si be the deepest subtree and Sj the second deepest subtree
3\. return max(d(S1), ..., d(Sd), h(Si)+h(Sj)+2) 
```

## 分析

第 2 行和第 3 行都需要 O(d) 时间来计算。但是这些行只检查每个节点一次，因此在递归中，这总共需要 O(n)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T04:06:11.303

对于这个有趣的问题，我有一个简单的 O(n) 贪心算法。

## 算法

1.  选择任意顶点X作为树的根，然后找到与根X距离最大的顶点Y。这一步的复杂度是O(n)。
2.  将顶点 Y 作为树的新根，然后找到与根 Y 距离最大的顶点 Z。Y 和 Z 之间的距离是树中距离的最大值。这一步的复杂度也是O(n)。
3.  这个贪心算法的总复杂度是 O(n)。

## 证明

*   显然 Y 和 Z 形成了树的一个直径，我们称 Y 和 Z 为树的一对角。
*   **定理**：对于树中的每个顶点 P，Y 或 Z 将是与其具有最大距离的顶点。
*   该算法的第 1 步是基于**Theorem**，因此我们可以很容易地得到树的一个角 (Y)。
*   第二个角 Z 也是基于**定理**找到的。

## 延长

根据证明中的**定理**，我们可以解决另一个更具挑战性的问题：对于树中的每个顶点，计算谁是它的最远顶点。

*   我们可以在 O(n) 复杂度中找到树的两个角，然后我们可以再次使用**定理**。
*   从角 Y 和 Z 我们分别做 dfs，对于每个顶点 p[i] 我们可以得到到 Y 和 Z 的距离（我们称它们为 disY[i] 和 disZ[i]），所以 p[i 的最远距离] 是最大值（disY[i]，disZ[i]）。由于我们只进行了两次 dfs，因此我们可以获得 O(n) 复杂度的信息。
*   这个扩展问题也可以通过复杂度也是 O(n) 的复杂树动态规划来解决。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-21T21:13:12.517

假设两个节点之间的最大长度路径通过我们的根节点。那么这两个节点中的一个必须属于一个孩子的子树，而另一个必须属于另一个孩子的子树。那么很容易看出，这两个节点是这两个孩子的最低/最深的后代，这意味着这两个节点之间的距离是`height(child1) + height(child2) + 2`. 因此，通过我们的根的两个节点之间的最大长度路径是`max-height-of-a-child + second-to-max-height-of-a-child + 2`。

这为我们提供了一个简单的 O(n) 算法来找到整个最大长度路径：只需对每个非叶节点执行上述操作。由于每条路径都必须植根于某个非叶节点，这保证了我们将在某个时候考虑正确的路径。

找到一个子树的高度是 O(n)，但是，因为你可以递归地建立高度，所以找到*每个*子树的高度也是 O(n)。事实上，您甚至不需要将高度作为一个单独的步骤来计算；您可以同时找到最大长度路径和子树高度，这意味着该算法只需要 O(n) 时间和 O(树高度) 空间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T22:12:17.170

这是一个递归算法。这是伪代码（未经测试的ocaml代码）：

```
 type result = {n1 : node; n2 : node; d1 : int (* depth of node n1 *); d2 : int; distance: int}
(* a struct containing:
    - the couple of nodes (n1,n2),
    - the depth of the nodes, with depth(n1) >= depth(n2)
    - the distance between n1 & n2 *)

let find_max (n : node) : result =
 let max (s1 : result) (s2 : result) = if s1.distance < s2.distance then s2 else s1 in
 let cl : node list = Node.children n in
 if cl = []
 then { n1 = n; n2 = n; d1 = 0; d2 = 0; distance = 0 }
 else 
   let ml = List.map find_max cl in
   let nl = List.map (fun e -> e.n1, e.d1+1) ml in
   let (k1,d1)::(k2,d2)::nl = nl in
   let k1,d1,k2,d2 = if d1 > d2 then k1,d1,k2,d2 else k2,d2,k1,d1 in
   let s = {n1 = k1;n2 = k2; d1 = d1; d2 = d2; distance = d1+d2} in
   let m1 =  List.fold_left (fun r (e,d) -> 
                      if r.d1< d
                      then { r with n1 = e; d1 = d; distance = d+d2 }
                      else if r.d2 < d 
                               then { r with n2 = e; d2 = d; distance = d+d1 }
                               else r) s nl in
   max m1 (List.fold_left max (List.hd ml) (List.tl ml)) 
```

该`m1`值是通过保留 nl 列表的两个最深节点来构建的，其中距离是它们的深度之和。

`List.map`是将给定函数应用于列表的所有元素并返回结果列表的函数。

`List.fold_left`是一个函数，将给定函数递归地应用于累加器和列表的元素，每次都使用前一个应用程序的结果作为新的累加器值。结果是最后一个累加器值。

`List.hd`返回列表的第一个元素。

`List.tl`返回没有第一个元素的列表。

# r - ggplot2 用于灰度打印输出

> ID：13501217
> 
> 赞同：37
> 
> 时间：2012-11-21T20:07:11.040
> 
> 标签：r, ggplot2

ggplot2 为屏幕/彩色打印生成精美的图形，但灰色背景和颜色在将它们打印为灰度时会干扰。为了更好的可读性，我更喜欢禁用灰色背景并使用颜色生成器产生不同的灰色阴影或不同类型的填充笔触来区分组。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-22T07:14:01.897

** 编辑 ** 更新代码：`geom_bar`需要`stat`.

`theme_bw`可能是你所追求的。如果您正在绘制具有填充（如条形）的几何图形，该`scale_fill_grey`函数将使您能够控制灰色阴影。如果您正在绘制具有颜色（例如线或点）的几何图形，该`scale_colour_grey`函数将为您提供控制权。据我所知， ggplot 不会绘制图案填充。假设您正在绘制条形图，以下将在灰色背景上绘制彩色条形图。

```
library(ggplot2)

data <- read.table(text = 
"type Year  Value 
 A    2000  3
 B    2000  10
 C    2000  11
 A    2001  4
 B    2001  5
 C    2001  12", sep = "", header = TRUE)

(p = ggplot(data = data, aes(x = factor(Year), y = Value)) +       
  geom_bar(aes(fill = type), stat="identity", position = "dodge")) 
```

以下将彩色条更改为灰色阴影。请注意，其中一个条在背景中丢失了。

```
(p = p + scale_fill_grey(start = 0, end = .9)) 
```

以下删除灰色背景。

```
(p = p + theme_bw()) 
```

![在此处输入图像描述](../Images/1b7caa5a3b0ab7b07c6cbc54254e0927.png)

一个点有颜色，而不是填充。所以要在点上使用灰色阴影，你需要这样的东西。

```
(p = ggplot(data = data, aes(x = factor(Year), y = Value)) +       
  geom_point(aes(colour = type), size = 5) +
  scale_colour_grey(start = 0, end = .9) +
  theme_bw()) 
```

![在此处输入图像描述](../Images/28cf23620254ed1fd9cc4fc4e7218cde.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-29T11:52:09.060

其他回答者专注于自动调整线条/条形颜色。然而，在印刷出版物中，我不希望有浅灰色线条等，因为它们难以识别和区分。这是一个自动调整线型的解决方案（直到一天前我才知道这是可能的）。

```
library(ggplot2)
theme_set(theme_bw())

data <- read.table(text = 
"type Year  Value 
 A    1998  6
 A    1999  8
 A    2000  6
 A    2001  7
 B    1998  4
 B    1999  5
 B    2000  10
 B    2001  5
 C    1998  8
 C    1999  6
 C    2000  9
 C    2001  8", sep = "", header = TRUE)

p <- ggplot(data=data,
            aes(x = factor(Year),
                y = Value,
                linetype = factor(type)))
p <- p + geom_line(aes(group = factor(type)),
                   size=0.8) 
```

[![在此处输入图像描述](../Images/29f313b09bf9455a2f9022abfc4ae061.png)](https://i.stack.imgur.com/DVR03.png)

请注意，您可以[轻松自定义 ggplot 主题](http://www.noamross.net/blog/2013/11/20/formatting-plots-for-pubs.html)。[这是使用我自己的简约 ggplot 主题](https://github.com/gonike/rrelated/blob/master/ep_theme.r)的替代结果：

[![在此处输入图像描述](../Images/d41f848ff4bf3facd90471631b1755f5.png)](https://i.stack.imgur.com/q738C.png)

（当导出为 pdf 时，抗锯齿看起来比这里 [in png] 更好。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-21T20:54:03.260

这是您想要的一个简单示例

```
library(ggplot2)

data <- read.table(text = 
  "Letter      Year    Value 
 A           1998    5
                B           1999    10
                C           2000    15
                A           2000    7
                B           2001    15
                C           2002    20", sep = "", header = TRUE)
ggplot(data = data, aes(x = factor(Year), y = Value, colour = Letter)) +       
  geom_line(aes(group = Letter)) + scale_colour_grey() +
  theme(panel.background = element_rect(fill='white', colour='black')) 
```

![在此处输入图像描述](../Images/def63804e1443312945f46e85140a8e4.png)

# html - HTML5 视频无法在 Safari 上运行。

> ID：13501218
> 
> 赞同：2
> 
> 时间：2012-11-21T20:07:10.640
> 
> 标签：html, .htaccess, video, safari, mp4

有人可以帮我吗，html5 视频在 Firefox、Chrome、IE 中工作，但在 Safari 中不工作。

我已经尝试更改.htaccess。我已经下载了 quicktime，但我仍然无法在 Safari 上播放视频。这些是我使用的视频文件格式：.mp4、.webm 和 .ogv。

这是一个示例链接： http: [//kontras.ca/cs_portfolio/pitem.php ?pi=70&cat=6](http://kontras.ca/cs_portfolio/pitem.php?pi=70&cat=6)

提前致谢。

# meteor - “不能在 noYieldsAllowed 块中调用 yield！” 客户端连接时服务器上的错误

> ID：13501219
> 
> 赞同：1
> 
> 时间：2012-11-21T20:07:12.183
> 
> 标签：meteor

我在 mongohq 使用外部 mongo 实例，所以我有

```
MONGO_URL=mongodb://heroku:censored@alex.mongohq.com:10025/appCensored 
```

在我的环境中。我在“只读”模式下使用这个 mongo 实例，使用我的流星应用程序作为监控应用程序。所有集合中的 _id 都不是流星 uuid。

当我启动流星并将客户端连接到 localhost:3000 时，我在服务器上收到以下晦涩的错误消息：

`Internal exception while processing message { msg: 'sub', id: '9e11edd5-b8a5-4a67-86de-a3270ef3601f', name: 'content', params: [ 'ORG-4d9d4981-55d8-44ee-9025-32c41be679ca' ] } Error: Can't call yield in a noYieldsAllowed block! at Function.Meteor._noYieldsAllowed.Fiber.yield (app/packages/meteor/fiber_helpers.js:13:11) at Function.wait (/usr/local/meteor/lib/node_modules/fibers/future.js:111:14) at Object.Future.wait (/usr/local/meteor/lib/node_modules/fibers/future.js:321:10) at _Mongo._createSynchronousCursor (app/packages/mongo-livedata/mongo_driver.js:369:23) at _Mongo._observe (app/packages/mongo-livedata/mongo_driver.js:493:14) at Object.Meteor._noYieldsAllowed (app/packages/meteor/fiber_helpers.js:17:12) at _Mongo._observe (app/packages/mongo-livedata/mongo_driver.js:485:10) at Cursor._observeUnordered (app/packages/mongo-livedata/mongo_driver.js:344:22) at Cursor._publishCursor (app/packages/mongo-livedata/mongo_driver.js:305:28) at sub._runHandler (app/packages/livedata/livedata_server.js:378:13)`

而且我在客户端的“内容”集合中没有任何文档。当我刷新浏览器并将客户端重新连接到服务器时，一切顺利，我在“内容”中获得了文档。订阅“内容”集合似乎有问题。此集合的发布和订阅代码如下：

```
server.coffee
-------------
Content = new Meteor.Collection 'content'

Meteor.publish 'content', (org) ->
    Content.find { recipientUid: org }

client.coffee
-------------
Content = new Meteor.Collection 'content'

Meteor.autosubscribe ->
    uid = Session.get 'testUserUid'
    if uid
        Meteor.subscribe 'content', uid

Template.main.top_content = ->
    # observe won't work with limited collections, use workaround
    top = Content.find({}, { sort: { total: -1 } }).fetch()
    top.slice 0, 10 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:48:52.713

这是 0.5.1 中引入的错误。我刚刚发布了 Meteor 0.5.2 应该可以修复它（事实上，除了修复这个问题，它没有做任何改变）。尝试升级`meteor update`并让我知道这是否不能解决您的问题！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T03:12:19.380

我有同样的错误，但有观察者。正如我后来发现的那样，发生此错误比没有连接到数据库。
由于流星的异步性质。它不会等到与数据库的连接完全建立并开始执行其他代码并接受连接。

尝试像这样将您的订阅代码放入客户端的 Meteor.startup(...) 中。

```
initSubscripions = ->
  uid = Session.get 'testUserUid'
  Meteor.subscribe 'content', uid if uid

Meteor.startUp ->
  initSubscripions 
```

# javascript - 局部视图中的 Javascript 如何在页面上多次出现局部视图时使其仅出现一次

> ID：13501221
> 
> 赞同：2
> 
> 时间：2012-11-21T20:07:28.940
> 
> 标签：javascript, jquery, html, asp.net-mvc

我有一些像这样的html：

```
<input type="button" value="Show message" class="messagebtn btn" disabled="disabled" />
<img class="loader" style="display: none;" alt="Loading..." src="@Url.Content("~/Content/Images/ajax-loader.gif")" />
<div class="peopleresultsdiv">
</div>
<script type="text/javascript">
    $(document).ready(function () {
    $('.messagebtn').click(function () {
        alert("Hi");
    }
    });
</script> 
```

现在所有这些都在 PartialView 中，而这个局部视图在 DisplayFor 中。

我必须在一页上显示 DisplayFor 三次，这样你才能有效地得到：

```
<input type="button" value="Show message" class="messagebtn btn" disabled="disabled" />
<img class="loader" style="display: none;" alt="Loading..." src="@Url.Content("~/Content/Images/ajax-loader.gif")" />
<div class="peopleresultsdiv">
</div>
<script type="text/javascript">
    $(document).ready(function () {
    $('.findpersonbtn').click(function () {
        alert("Hi");
    }
    });
</script>
<input type="button" value="Show message" class="messagebtn btn" disabled="disabled" />
<img class="loader" style="display: none;" alt="Loading..." src="@Url.Content("~/Content/Images/ajax-loader.gif")" />
<div class="peopleresultsdiv">
</div>
<script type="text/javascript">
    $(document).ready(function () {
    $('.findpersonbtn').click(function () {
        alert("Hi");
    }
    });
</script>
<input type="button" value="Show message" class="messagebtn btn" disabled="disabled" />
<img class="loader" style="display: none;" alt="Loading..." src="@Url.Content("~/Content/Images/ajax-loader.gif")" />
<div class="peopleresultsdiv">
</div>
<script type="text/javascript">
    $(document).ready(function () {
    $('.findpersonbtn').click(function () {
        alert("Hi");
    }
    });
</script> 
```

因此，首先，在页面上重复 3 次 javascript 是不是这种不好的做法？

第二件事是当我单击其中一个按钮时，我收到了三次 Hi 警报。我猜是有道理的，因为脚本在屏幕上重复了三遍。

有谁知道如何解决这个问题，所以每次单击按钮我只会收到一次消息。

毕竟说三声嗨有点过头了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:16:19.533

> 因此，首先，在页面上重复 3 次 Javascript 是不是这种不好的做法

是的，这很糟糕。正如您所注意到的，除了在数据传输和加载时间方面不必要地添加到页面权重页面之外，它还会因重复而令人头疼。

解决它的一种方法是异步加载脚本。检查您的脚本是否已经加载（这在 Razor 部分视图中）：

```
// check in the global scope for "MyFunctions" object, and a "doWireup" method
if (!window.MyFunctions || !window.MyFunctions.doWireup) {

    // if it doesn't exist, load it from "myfunctions.js"
    $.getScript(@Url.Content("Scripts/myfunctions.js"), function() {

        // execute wireups
        window.MyFunctions.doWireup();
    });
} else { 
    window.MyFunctions.doWireup();
} 
```

您的脚本`myfunctions.js`应包含以下`doWireup`功能：

```
// get or create "MyFunctions" object in the global scope
var my = window.MyFunctions || (window.MyFunctions = {});

// add "doWireup" method to it
my.doWireup = function() {
    $('.findpersonbtn').click(function () {
        alert("Hi");
    });
}; 
```

[使用Require.js](http://requirejs.org/)、[Cassette](http://getcassette.net/)或类似工具可以很好地实现这种脚本管理以及依赖项管理。如果您使用的是 MVC4，可能还值得研究一下它的[脚本捆绑功能](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)。

* * *

**编辑**

我想如果你只有几行脚本，就像你的例子一样，上面的内容可能有点过头了。更好/直接的方法可能是简单地检查局部视图的脚本是否已在当前页面上运行。只需修改为添加一个全局范围的布尔值：

```
$(document).ready(function () {
    if (typeof window.HasScriptRun == "undefined")
    {
        window.HasRunScript = true;

        $('.findpersonbtn').click(function () {
            alert("Hi");
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:10:21.850

我的建议是从您的 HTML 片段中删除 javascript，并将其简单地包含在页面的页眉或页脚中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:26:11.860

您有三个相同脚本的实例，因此为每个按钮添加了三个事件侦听器。请记住，`$(document).ready(function(){})`一旦页面加载，当所有元素都已存在于 DOM 中时，函数 in 就会执行。

选择器`$('.findpersonbtn')`可能匹配多个元素（在您的情况下为 3 个），并且单击侦听器将添加到这些匹配元素中的每一个。您不必为每个实例运行代码，jQuery 已经为您完成了。

顺便说一下，选择器与您的示例中的任何内容都不匹配，但我想`findpersonbtn`是原始代码中每个按钮实例的一个类

在函数内部，`this`将引用被单击的元素。你可以通过`$(this)`. 因此，例如，如果每个按钮都有不同的消息要显示，您可以：

```
<input type="button" value="Show message 1" class="findpersonbtn messagebtn btn" data-message="hi"/>
<input type="button" value="Show message 2" class="findpersonbtn messagebtn btn" data-message="hello"/>
<input type="button" value="Show message 3" class="findpersonbtn messagebtn btn" data-message="salut"/>

<script type="text/javascript">
$(document).ready(function () {
  $('.findpersonbtn').click(function () {
    alert($(this).data('message'));
  });
});
</script> 
```

# ruby - 红宝石，'==' 不工作

> ID：13501223
> 
> 赞同：-1
> 
> 时间：2012-11-21T20:07:35.317
> 
> 标签：ruby, exit

这是我的代码：

```
@cmd == "exit" 
```

当@cmd 是字符串变量“exit”时，它不会返回 true。任何建议为什么？

-编辑-

-解决

错误：因为 @cmd 是使用 '@cmd = gets' 创建的，所以它在 @cmd 中添加了 '\n'。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T20:11:30.433

@cmd*必须*包含 exit 以外的内容。@cmd 是否可能包含某种空白字符，例如换行符或空格？也许尝试：

```
@cmd.chomp!
@cmd.strip!
@cmd == "exit" 
```

如果 @cmd 是从 $stdin.readline 设置的，那么它可能会包含换行符。剥离和咀嚼将有助于消除不确定性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:09:36.730

看看到底`@cmd`是什么：

```
p @cmd 
```

或尝试：

```
@cmd.to_s == "exit" 
```

# asp.net-mvc - 域名更改 - 如何使用 ASP MVC 4 进行重定向

> ID：13501226
> 
> 赞同：0
> 
> 时间：2012-11-21T20:07:39.220
> 
> 标签：asp.net-mvc, redirect

我们已将域名从 old.com 更改为 new.com，并在 old.com 上放置了一个新的 ASP MVC 4 网站

因为搜索引擎仍然指向 old.com，我们希望将一些 url 重定向到新的。

利用 ASP MVC 管道以重定向答案响应的可能方法是什么？

谢谢你，伊多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:09:37.497

如果唯一改变的是域名，为什么不使用 IIS 来设置从旧站点到新站点的永久站点重定向，而不是使用 MVC？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T22:49:09.890

> HTTP 响应状态码 301 Moved Permanently 用于永久重定向。
> 
> Google 建议使用 301 重定向来更改页面的 URL，因为它显示在搜索引擎结果中。

根据[这里](https://stackoverflow.com/questions/2175975/asp-net-mvc-301-redirect-from-www-domain-com-to-domain-com)的这个问题，您有两个选择：

1.  在 IIS7 中安装 HTTP 重定向功能。

2.  在应用程序级别进行重定向（使用 Global.asax 中的 Application_BeginRequest）。

# java - 在一个事务中组合 JPA 和 JDBC 操作

> ID：13501230
> 
> 赞同：5
> 
> 时间：2012-11-21T20:08:00.000
> 
> 标签：java, postgresql, jpa, jdbc, openjpa

因此，我有一个应用程序，其中包含一些遗留的 JDBC 调用，我需要使用一些额外的 JPA 操作进行更新。我需要能够将 JDBC 调用和 JPA 调用作为同一个 DB 事务的一部分。如果重要的话，我正在使用 OpenJPA 2.1.1 和 Postgres 9.1。以下代码似乎可以正常工作 - 我已经运行了一些基本测试，并且 JDBC 和 JPA 语句都执行了；任何一个错误都会导致这对语句没有发生（例如，它们是同一个数据库事务的一部分）。是否有任何我没有看到的问题 - 我违反了一些最佳实践，或者我不能以这种方式重用 Connection 对象的其他原因？

```
EntityManager em = _em; //acquired from OpenJPA
em.getTransaction().begin();
Connection conn;
try {
  OpenJPAEntityManager oem = (OpenJPAEntityManager) em.getDelegate();
  conn = oem.getConnection();
  PreparedStatement ps = conn.prepareStatement(myStatement);
  //initialize parameters in ps
  ps.executeUpdate();
  em.merge(myJpaObject);
  em.getTransaction().commit();
} finally {
    if (ps != null && !ps.isClosed()) {
      ps.close();
    }
    if (em.getTransaction().isActive()) {
    em.getTransaction().rollback();
  }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T20:18:38.213

稍微调整一下，我认为应该没问题。

值得注意的[是 OpenJPA 文档对此有何评论](http://openjpa.apache.org/builds/2.2.1/apache-openjpa/docs/ref_guide_dbsetup_sqlconn.html)：

> 如果 EntityManager 处于托管或非乐观事务中，如果 EntityManager 已在当前事务中刷新，或者如果您已使用 OpenJPAEntityManager.beginStore 方法确保返回的连接在事务上与其他 EntityManager 操作一致数据存储事务正在进行中。在尝试任何其他 EntityManager 操作之前，请始终关闭返回的连接。如果数据存储事务正在进行，OpenJPA 将确保不会释放底层本机连接。

您的交易没有得到管理，但我认为它并不乐观。此外，您在启动事务和执行 JDBC 之间没有做任何 JPA 工作，所以我认为您可能属于“如果 EntityManager 已在当前事务中刷新”的情况。

您没有做的一件事是在继续使用 JPA 之前关闭连接。我假设 OpenJPA 不会返回它正在使用的实际连接，但是围绕它的一些包装器应该在 OpenJPA 恢复工作之前关闭。

# xpath - xpath：名称中包含“-”元素的数学（ )

> ID：13501232
> 
> 赞同：2
> 
> 时间：2012-11-21T20:08:05.840
> 
> 标签：xpath, subtraction

我想对一些`-`名称中包含 a 的元素进行一些数学运算：

```
<containers>
  <container>
    <max-capacity>10</max-capacity>
    <content>5</content>
  </container>
  <container>
    <max-capacity>10</max-capacity>
    <content>8</content>
  </container>
</containers> 
```

我想执行一个 xpath 查询，计算剩余容量大于 2 的容器数量

```
count(containers/container[max-capacity-content>2]) 
```

但由于`-`节点名称中有 a ，`max-capacity`这不起作用。

我该怎么做才能完成这项工作？

（我不想将 xml 转换为`-`-free 文档。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:16:08.153

添加空格 -`containers/container[max-capacity - content > 2]`根据[http://www.xpathtester.com/test](http://www.xpathtester.com/test)工作，并且也应该在`count()`您的表达式中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:35:06.810

> 因为在节点的名称中有一个 -`max-capacity`这不起作用。
> 
> 我该怎么做才能完成这项工作？
> 
> （我不想将 xml 转换为 --free 文档。）

**您的问题不在于您有类似`max-capacity`**的名称 - 问题在于通过不`-`使用空格分隔名称和运算符，您正在创建一个新名称：`max-capacity-content`并且 XML 文档中没有具有该名称的元素。

**解决方案**：

```
 count(containers/container[max-capacity - content > 2]) 
```

# javascript - 设计数据量大的轻量级可扩展 RESTful Web 架构

> ID：13501233
> 
> 赞同：0
> 
> 时间：2012-11-21T20:08:04.960
> 
> 标签：javascript, json, rest, architecture, csv

我有大约 1000 个 .csv 文件，每天的数据可以追溯到 30 年前。我正在为自己构建一个 RESTful 应用程序，理想情况下，用户将输入感兴趣的股票代码和感兴趣的时间范围，这可能会超过 10 年的每日数据。

**设计一**

我在考虑以下流程：

```
1) user input symbol='GOOG'
2) user input startDate='01-01-1997', endDate=getTodayDate()
3) client requests location of GOOG.csv file in dropbox server or EC2
4) server returns GOOG.csv to client
5) client parses .csv file until all data is collected and plotted 
```

或者

**设计二**

```
1) user input symbol='GOOG'
2) user input startDate='01-01-1997', endDate=getSystemDate()
3) client requests location of GOOG.csv file in dropbox server or EC2
4) server-side converts GOOG.csv file to GOOG.json file 
5) server returns GOOG.json object to client side for plotting 
```

或者

**设计 3**

```
0) During maintenance time, convert all 1000 .csv files to .json objects
1) user input symbol='GOOG'
2) user input startDate='01-01-1997', endDate=getSystemDate()
3) client requests location of GOOG.json file in dropbox server or EC2 
4) server returns GOOG.json object to client side for plotting 
```

在此之后我的最终目标是在同一张图表中绘制多达 6 个不同的图表。以及绘制历史投资组合回报。

**哪种设计合适，不会吃太多内存并提供良好的性能？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:54:59.773

查看[SOLR](http://lucene.apache.org/solr/)项目。它支持 CSV 数据的索引并提供支持 REST 的搜索 API。

一个简单的例子见：

*   [创建报告并上传到服务器以供下载](https://stackoverflow.com/questions/8459619/create-report-and-upload-to-server-for-download/8462145#8462145)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:14:15.203

根据您的简短描述，我将使用设计 2 并在服务器上强制执行一些缓存或动态存储转换后的 json 项目，这样您就不必在当天晚些时候再次转换它们。如果事实证明您在服务器端有过多的负载或内存消耗，您可以稍后再转到设计 3。

# sql - 如何正确使用 UPDATE...RETURNING？

> ID：13501245
> 
> 赞同：1
> 
> 时间：2012-11-21T20:08:54.767
> 
> 标签：sql, firebird

我有一个可以设置属性的表，但它应该在一定时间后过期。如果我运行这样的查询，它会按预期工作：

```
update MY_TABLE
set PROP = :value, PROP_TIMEOUT = dateadd (7 day to CURRENT_TIMESTAMP)
where ID = :id 
```

但是，如果我尝试将计算出的超时作为同一查询的一部分进行检索，它会返回一个空结果集，并且表中不会更新任何记录：

```
update MY_TABLE
set PROP = :value, PROP_TIMEOUT = dateadd (7 day to CURRENT_TIMESTAMP)
where ID = :id
returning PROP_TIMEOUT 
```

这是 Firebird 中的错误，还是我做错了什么？使用 FBEMBED 2.5.1 版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T05:15:43.527

当您使用 RETURNING [fields] 时，您需要指定 INTO [variables]。INTO 仅在 PSQL 中可用

例子：

```
:
update MY_TABLE
set PROP = :value, PROP_TIMEOUT = dateadd (7 day to CURRENT_TIMESTAMP)
where ID = :id
returning PROP_TIMEOUT
into :ret_prop_timeout; -- variable needs to be declared
:
suspend; -- to return a output row 
```

# jquery - 将禁用的 jquery datepicker 输入从 jquery 传递到 vb。停止日期选择器在输入点击时打开

> ID：13501250
> 
> 赞同：0
> 
> 时间：2012-11-21T20:09:11.130
> 
> 标签：jquery, vb.net, jquery-ui, jquery-ui-datepicker, disabled-input

编辑：答案：我所做的只是添加一个 asp:hiddenfield。当我计算付款日期时，我将值发送到两个字段。这样我就不需要从可见的日期选择器中删除 disabled 属性，我可以在 vb.xml 中使用 hiddenfield 值。

我有一个 jquery datepicker ui 输入，它是从不同的 datepicker 自动计算的。我需要在 VB 中获取 datepicker 的值，所以我在 html 端禁用它，然后在 jquery 中的表单提交上启用它，以便该值将传递给 VB。

问题是当我提交表单并且存在导致回发的验证错误时，代码仍然通过提交函数运行并启用输入。现在用户可以选择他们想要的任何日期，当它需要保留为自动计算的日期时。

我将它从禁用更改为只读，但是虽然无法输入只读日期选择器，但仍然可以单击它们并且选择器出现。我试图移动启用输入的 jquery 代码，但无法为它找到一个更好的地方，它只在实际提交表单时运行。现在我正在尝试查看是否有办法在只读为真时阻止日期选择器打开。

有任何想法吗？

```
 $('#errorForm').submit(function () {
          $("#txtPayDate").prop("disabled", false);
          return validateExtraErrors();
        }); //jquery to enable input, validate, and submit form

<input type="text" id="txtPayDate" name="txtPayDate" value="<%=Request.Form("txtPayDate")%>" disabled="disabled"/> //input field 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:31:11.193

我所做的只是添加一个 asp:hiddenfield。当我计算付款日期时，我将值发送到两个字段。这样我就不需要从可见的日期选择器中删除 disabled 属性，我可以在 vb.xml 中使用 hiddenfield 值。

# ruby-on-rails - 链接仅在新选项卡/窗口中打开时有效

> ID：13501251
> 
> 赞同：1
> 
> 时间：2012-11-21T20:09:11.557
> 
> 标签：ruby-on-rails, ruby, routes, hyperlink

我有一个 Rails 应用程序，在我的一个页面上，链接仅在出于某种原因在新选项卡中打开时才有效。

我有一个主控制器，可以很好地打开到其他控制器的链接。当我在我的位置控制器中时，出于某种原因，链接仅在新选项卡中打开。URL 是正确的，唯一的问题是当我单击链接时没有任何反应。

这是我的链接：

```
<a id="menu_link" href="../">Menu</a> 
```

`href`基本上是说回到站点的根目录。

我也试过：

```
<%= link_to({:controller => "main", :action => "home"}, :id => 'menu_link') do %>
  <li>Menu</li>
<% end %> 
```

我的 routes.rb 文件：

```
root :to => "main#home"
match 'admin', :to => 'access#admin_index'
match 'locations', :to => 'ranch_locations#locations'
match ':controller(/:action(/:id))(.:format)' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:17:38.010

问题并不明显。在我的应用程序中，我将 Javascript 设置为滚动到一个锚点，当标题位于另一个页面上（这些锚点不存在）时，链接不会做任何事情。我只需要排除该功能。

# c++ - 无序映射的堆栈溢出

> ID：13501257
> 
> 赞同：1
> 
> 时间：2012-11-21T20:09:29.140
> 
> 标签：c++, stl, stack-overflow

对于一个项目，我有一个开放表，我决定放入一个`std::unordered_map`. 不幸的是，我仅限于对整个地图进行硬编码。因此，我决定将初始化拆分为多个文件。

```
class OpeningBook
{
public:
    OpeningBook();
private:
    std::unordered_map<std::string, int> opening_database_;
    void init1();
    void init2();
    void init3();
    void init4();
    void init5();
}; 
```

构造函数只调用`init`函数：

```
OpeningBook::OpeningBook()
{
    init1();
    init2();
    init3();
    init4();
    init5();
} 
```

所有这些看起来都是这样的：

```
void OpeningBook::init1()
{
    opening_database_.insert(std::pair<std::string, int>("0001000000-10000001000000-1000001100000-1-1000",5000));
    opening_database_.insert(std::pair<std::string, int>("0001000000-10000001000000-1000000100000-1-1100",5000));
    opening_database_.insert(std::pair<std::string, int>("0001000000-10000001000000-1000000100001-1-1000",5000));
    opening_database_.insert(std::pair<std::string, int>("0001000000-10000001000000-1000000100000-1-1010",5000));
    opening_database_.insert(std::pair<std::string, int>("0001000000-10000001000000-1000000100010-1-1000",5000));
    opening_database_.insert(std::pair<std::string, int>("0001000000-10000001000000-1000000100000-1-1001",5000));
    opening_database_.insert(std::pair<std::string, int>("0001000000-10000001000000-100000010000-11-1000",0));
    opening_database_.insert(std::pair<std::string, int>("0001000000-10000001000000-100000010000-10-1100",5000));
    // continues
} 
```

但是，只要我的代码碰到 中的左大括号`init1()`，它就会引发堆栈溢出异常。我认为不会发生堆栈溢出，因为 an`unordered_map`在堆上。这是怎么回事？我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T20:12:48.527

您在每种方法中插入了多少项`initx()`？如果它有数千个，那么编译器可能正在生成使用堆栈上大量临时对象的代码，并且只是要求更多的堆栈空间而不是可用的。

尝试进一步拆分初始化方法，看看是否能解决问题。

更好的方法可能是有一个包含初始化数据的表：

```
static const struct {
    const char *str;
    int n;
} DatabaseInitData[] = {
    {"0001000000-10000001000000-1000001100000-1-1000",5000},
    {"0001000000-10000001000000-1000000100000-1-1100",5000},
    {"0001000000-10000001000000-1000000100001-1-1000",5000},
    // etc
}; 
```

然后，在您的构造函数中：

```
OpeningBook::OpeningBook()
{
    for (int i = 0; i < sizeof(DatabaseInitData)/sizeof(DatabaseInitData[0]); i++) {
        opening_database_.insert(std::pair<std::string, int>(
            DatabaseInitData[i].str,
            DatabaseInitData[i].n));
    }
} 
```

# java - 哈希表内部索引

> ID：13501261
> 
> 赞同：3
> 
> 时间：2012-11-21T20:09:53.417
> 
> 标签：java, data-structures, hash, hashtable

如何获得 Java Hashtable 的内部数组表示？我知道哈希表只是巧妙组织的数组，我想使用每个键的索引，这样我就可以与不相交集并行工作。

我需要两件事之一：

1.  用于将我的键转换为哈希表内部数组中的索引的哈希函数
2.  键的对应索引。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T20:28:14.130

注意 1：在 90% 的情况下，您可能应该使用[`HashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)类而不是[`Hashtable`](http://docs.oracle.com/javase/6/docs/api/java/util/Hashtable.html).

注意 2：实际上大多数哈希表将*列表*与数组结合起来，以处理哈希冲突。

通常，您*不*应该能够接触到 Java 实现附带的类的内部。这将破坏 Java 提供清晰分离接口和实现的能力的全部目的。

相反，我建议您创建一个新类，例如通过从 Java 开发工具包`MyHashMap`中复制实现的源代码。`HashMap`通过拥有自己的副本，您拥有完全的控制权，并且在 JRE 更新后您不会受到意外损坏。[您可以在此处](http://www.docjar.com/html/api/java/util/HashMap.java.html)找到 OpenJDK`HashMap`实现。

PS：理论上你*可以*`HashMap`尝试使用反射访问内部，但生成的代码会很*糟糕*，性能更差......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:28:30.480

我相信您可以通过反射访问任何字段，只需查看 Hashtable 内部结构。

或者您只是在寻找代码示例？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:31:11.847

创建一个类似哈希表的类，按字母顺序将索引分配给键。出于您的目的，扩展 HashMap 或类似的东西可能甚至没有必要。应该会很好玩。

# c - 重新分配字符串数组

> ID：13501262
> 
> 赞同：1
> 
> 时间：2012-11-21T20:10:00.737
> 
> 标签：c, malloc, valgrind, realloc

所以我做了这个函数来接收未知数量的字符串并将它们添加到字符串数组中。

```
char **receiveCode(int socket){
    int line = 0;
    size_t lines = 1;
    size_t size = 1;
    char** code = malloc(sizeof(char)*size);

    while(1){
        package_struct *aPackage = receivePackage(socket);
        if(aPackage->type=='F'){break;}
        size = size + aPackage->size;
        code = realloc(code, size);
        code[line] = malloc(sizeof(char)*aPackage->size);
        strcpy(code[line],aPackage->package);
        line++;
        lines++;
        free(aPackage);
    }
    code = realloc(code, size + 2);
    code[line] = malloc(sizeof(char)*3);
    code[lines]=NULL;
    return code;
} 
```

有时当我运行此代码时，我会收到以下错误

*** 检测到 glibc****./pp: realloc(): 无效的下一个大小: 0x00007f0f88001220 ** **

 *根据 Valgrind 的说法，这发生在那个函数中。

可能我使用了太多的 malloc 和 realloc ......不过不确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T20:15:02.527

我认为问题是这样的：

```
char** code = malloc(sizeof(char)*size); 
```

它应该是`char *`而不是`char`里面`sizeof()`

```
char** code = malloc(sizeof(char*)*size); 
```

由于`code`是指向字符串的指针，因此为指针分配内存`char*`

也有同样的问题`realloc`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T20:16:31.317

我假设这是分配一个数组`char*`：

```
code = realloc(code, size); 
```

应该

```
code = realloc(code, size * sizeof(char*));
// and this one too
code = realloc(code, size + 2 * sizeof(char*)); 
```

另外，你不需要这个：

```
char** code = malloc(sizeof(char)*size); 
```

如果你调用`realloc(NULL, size)`它相当于`malloc(size)`

```
size_t size = 0;
char** code = NULL;
...
code = realloc(code, size * sizeof(char*)); 
```

注意：`lines`对我来说似乎没用，实际上在最后两行中你覆盖了你刚刚分配的内存`line==lines`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T21:21:35.247

这是一个`strdup()`用于简化每个新文本行的内存分配的版本。它还使用“x”版本的内存分配函数来简化内存不足错误处理（一个有点常见的习惯用法，即使是非标准的）。

所以真正剩下的所有复杂性（最终不会太多）在于管理字符串指针数组的增长。我认为这使得将处理每个字符串与处理指针数组分开变得更容易。原始代码混淆了这两个领域。

```
// these variants allocate memory, but abort program on failure
//  for simplified error handling - you may need different
//  error handling, but often this is enough
//
//  Also, your platform may or may not already have these functions
//      simplified versions are in the example.

void* xmalloc( size_t size);
void* xrealloc(void* ptr, size_t size);
char* xstrdup(char const* s);

char** receiveCode(int socket){
    size_t lines = 0;
    char** code = xmalloc( (lines + 1) * sizeof(*code));

    *code = NULL;

    while(1){
        package_struct *aPackage = receivePackage(socket);
        if(aPackage->type=='F') {
            free(aPackage); // not 100% sure if this should happen here or not.
                            // Is a `package_struct` with type 'F' dynamically
                            // allocated or is a pointer to a static sentinel 
                            // returned in this case?
            break;
        }

        // why use `aPackage->size` when you use `strcpy()` to
        //  copy the string anyway? Just let `strdup()` handle the details
        //
        // If the string in the `pckage_struct` isn't really null terminated, 
        // then use `xstrndup(aPackage->package, aPackage->size);` or something
        // similar.

        char* line = xstrdup(aPackage->package);
        ++lines;

        // add another pointer to the `code` array
        code = xrealloc(code, (lines + 1) * sizeof(*code));
        code[lines-1] = line;
        code[lines] = NULL;

        free(aPackage);
    }

    return code;
}

void* xmalloc(size_t size)
{
    void* tmp = malloc(size);

    if (!tmp) {
        fprintf(stderr, "%s\n", "failed to allocate memory.\n";
        exit(EXIT_FAILURE);
    }

    return tmp;
}

void* xrealloc(void *ptr, size_t size)
{
    void* tmp = realloc(ptr, size);

    if (!tmp) {
        fprintf(stderr, "%s\n", "failed to allocate memory.\n";
        exit(EXIT_FAILURE);
    }

    return tmp;
}

char* xstrdup(char const* s)
{
    char* tmp = strdup(s);

    if (!tmp) {
        fprintf(stderr, "%s\n", "failed to allocate memory.\n";
        exit(EXIT_FAILURE);
    }

    return tmp;
} 
```

另外，我认为应该澄清它`aPackage->package`是字符串指针还是`char[]`保存字符串数据的实际位置（即，应该`&aPackage->package`传递给`strcpy()`/ `xstrdup()`？）。如果它真的是一个指针，它应该在之前被释放`aPackage`吗？*

# c++ - 有没有什么方法可以在没有“输入密钥”的情况下等待并暂停程序？

> ID：13501264
> 
> 赞同：1
> 
> 时间：2012-11-21T20:10:02.610
> 
> 标签：c++, opencv, at-command

我是编程新手。我想做一个图像处理程序。我的问题是如果有东西从我的相机前面经过，我希望我的程序向我发送短信（AT COMMAND）。这是代码：

```
for( ; contour != 0; contour = contour->h_next )
{
    Sleep(10000);
    char buf[20];
    DWORD read = 0;
    DWORD CommModemStatus;
    DWORD write=1; // Number of bytes to write to serial port
    buf[0] = 72; // Decimal value to write to serial port
    char valor4[26] = ("at+cmgf=1\r");
    BOOL bWriteRC4;
           static DWORD iBytesWritten4;
             bWriteRC4 = WriteFile(hPort, &valor4, 100, &iBytesWritten4,NULL);
char valor[26] = ("at+cmgs=\"+62xxxxxxxxxx\"\r");
            BOOL bWriteRC;
           static DWORD iBytesWritten;
             bWriteRC = WriteFile(hPort, &valor, 100, &iBytesWritten,NULL);
char valor2[17] = ("SOMEONE HAS ENTERED YOU ROOM!!!");
            BOOL bWriteRC2;
           static DWORD iBytesWritten2;
             bWriteRC2 = WriteFile(hPort, &valor2, 100, &iBytesWritten2,NULL);
char valor3 = (char)0x1A;
            BOOL bWriteRC3;
           static DWORD iBytesWritten3;
                 bWriteRC3 = WriteFile(hPort, &valor3, 100, &iBytesWritten3,NULL);
} 
```

如果有东西从我的相机前面经过并且运动被捕获，那就是平均轮廓！= 0，所以我认为它就像：

```
for (contour != 0)
//sending text message.... 
```

但显然当打开时，相机会适应光线的强度，所以我让步`Sleep(10000);`意味着在发送文本前等待相机 10 秒。事实上，它只让我的相机（和程序的其余部分）等待 10 秒才能打开。

有什么不同的方法可以在不暂停程序的情况下等待吗？我已经谷歌了，尝试类似的东西`system("pause")`，等等，它不起作用。

我在 Windows 中使用 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:27:41.607

你可以尝试类似的东西

```
#include <time.h>
...
for ( ; contour != 0; contour = contour->h_next) {
    //skip to the next iteration if the program started less than 10 seconds ago
    if (((float)clock())/CLOCKS_PER_SEC) < 10.0) continue;
    ...
} 
```

time.h 中的clock() 函数返回程序启动后的时钟滴答数。时钟滴答不一定是毫秒，因此除以宏常量表达式 CLOCKS_PER_SEC，它指定时钟滴答和秒之间的关系，将得到已过去的总秒数。

您可以在此处获取有关 clock() 的更多信息：[http ://www.cplusplus.com/reference/clibrary/ctime/clock/](http://www.cplusplus.com/reference/clibrary/ctime/clock/)

# javascript - 如果存在子 div，则使用 javascript 更改背景

> ID：13501273
> 
> 赞同：2
> 
> 时间：2012-11-21T20:10:36.897
> 
> 标签：javascript, css, if-statement, joomla

当子 div (ezblog-head) 存在时，我需要更改父 div (content-indent) 的背景图像。我在网上找到了很多答案。但我似乎无法让他们中的任何一个工作。

实际的 index.php 页面如下所示：（该站点是使用 Joomla 构建的）

```
<div class="content-indent">
    <jdoc:include type="component" />
</div> 
```

在浏览器中加载为：

```
<div class="content-indent">
    <!-- bunch of other stuff -->
    <div id="ezblog-head>
        <!-- more stuff -->
    </div>
</div> 
```

这是我在索引页面上使用的 Javascript（它不起作用）

```
<script type="text/javascript">
    if ($('#ezblog-head')[0]){
      <style>
       .content-indent {background: #0f0;}
      </style>
    }
</script>` 
```

我也试过这个（无济于事）：

```
<script type="text/javascript">
    if (document.getElementById("ezblog-head")) { 
        document.getElementByClass('content-indent').style.background ='#0f0'
    }
</script> 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:22:37.910

不要使用样式标签，而是使用 jQuery `.css()`。请注意，这是使用 jQuery 而不是纯 javascript，因此您还必须在此脚本块之前引用 jQuery。

```
if ($('#ezblog-head')) {
     $('.content-indent').css({'background': '#0f0'});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:22:44.383

给定`ezblog-head`一个 ID（假设页面中只有一个），您可以使用：

```
<script type="text/javascript">
var ezblogHead = document.getElementById('ezblog-head');
if (ezblogHead){
    // ezblog-head exists on the page. Now, grab it's parent (content-indent)
    // and apply the bakground styling you prefer.
    ezblogHead.parentNode.style.backgroundColor = '#0f0';
    // alternatively, if you wanted an image:
    //ezblogHead.parentNode.style.backgroundImage = 'url(/path/to/background.jpg)';
}
</script> 
```

Just make sure this is listed *after* the element has been rendered to the page, otherwise you're going to need to get in to binding the above to a DOMReady event.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:26:51.653

Your last sans-jquery example is almost there, but you'd want to use *getElementsByClassName('content-indent')[0]* (note the plural nature)

Easier still would be to use querySelector:

```
// change background of parent div (content-indent) when child div (ezblog-head) is present
if (document.querySelector('#ezblog-head')) {
  document.querySelector('.content-indent').style.backgroundColor = '#0f0';
} 
```

As noted elsewhere, make sure you're running the code after the dom is loaded, ie:

```
window.addEventListener('load', function() {
  // do stuff here, the DOM is ready
}); 
```

# ios - iOS UiImage在app进入后台后返回不同的签名

> ID：13501275
> 
> 赞同：1
> 
> 时间：2012-11-21T20:10:37.597
> 
> 标签：ios, uiimage

```
2012-11-21 11:54:50.607 [10152:907] Current   Image: <UIImage: 0x20819ae0>
2012-11-21 11:54:50.608 [10152:907] EmptyMark Image: <UIImage: 0x20819ae0> 
```

App 进入后台后又回到前台。

```
2012-11-21 11:54:57.040 [10152:907] Current   Image: <UIImage: 0x20819ae0>
2012-11-21 11:54:57.042 [10152:907] EmptyMark Image: <UIImage: 0x208cc580> 
```

`emptymark.png`当我在后台返回应用程序时，我正在将添加到按钮“当前图像”（已记录）的相同图像“ ”与实际文件“EmptyMark 图像”（已记录）进行比较 EmptyMark 返回不同来自“当前图像”（按钮上的图像）。

我正在使用“EmptyMark Image”`[UIImage imageNamed:@"emptymark.png"]`

我应该一直引用`emptymark.png`而不是尝试从文件中进行比较吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:14:10.047

您可以将引用保留`UIImage`为，

```
self.image = [UIImage imageNamed:@"emptymark.png"]; 
```

当您使用 just 进行比较时`[UIImage imageNamed:@"emptymark.png"]`，它正在创建单独的对象。

# java - 将对象副本传递给hadoop中的所有映射器的最佳实践

> ID：13501276
> 
> 赞同：2
> 
> 时间：2012-11-21T20:10:38.143
> 
> 标签：java, hadoop, mapreduce

您好，我目前正在学习 Map Reduce，并正在尝试使用 hadoop 1.0.4 构建一个小型作业。我有一个停用词列表和一个模式列表。在我的文件被映射之前，我想将停用词加载到一个高效的数据结构中，比如地图。我还想从我的模式列表中构建一个正则表达式模式。由于这些是串行任务，我想在映射之前执行它们并为每个映射器传递一份**副本**那些他们可以读/写的对象。我想过在我的驱动程序类中简单地使用一个带有 getter 的静态变量，但是使用 java 调用对象作为指针原则这行不通。我当然可以在传递对象之前克隆它，但这似乎不是一个好习惯。我读了一些关于分布式缓存的东西，但据我了解，它只用于文件而不是对象，而且我可以让每个映射器读取停止词/模式文件。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T22:20:47.190

[一种可能的解决方案是在运行作业之前将 stopwords.txt 复制到 HDFS，然后在 Mapper 的setup](http://hadoop.apache.org/docs/stable/api/org/apache/hadoop/mapreduce/Mapper.html#setup%28org.apache.hadoop.mapreduce.Mapper.Context%29)方法中将其读入适当的数据结构。例如：

MyMapper 类：

```
...
private Map<String, Object> stopwords = null;

@Override
public void setup(Context context) {
    Configuration conf = context.getConfiguration();
    //hardcoded or set it in the jobrunner class and retrieve via this key
    String location = conf.get("job.stopwords.path");
    if (location != null) {
        BufferedReader br = null;
        try {
            FileSystem fs = FileSystem.get(conf);
            Path path = new Path(location);
            if (fs.exists(path)) {
                stopwords = new HashMap<String, Object>();
                FSDataInputStream fis = fs.open(path);
                br = new BufferedReader(new InputStreamReader(fis));
                String line = null;
                while ((line = br.readLine()) != null && line.trim().length() > 0) {
                    stopwords.put(line, null);
                }
            }
        }
        catch (IOException e) {
            //handle
        } 
        finally {
            IOUtils.closeQuietly(br);
        }
    }
}
... 
```

然后，您可以在 map 方法中使用*停用词。*

另一种选择是在 jobrunner 类中使用停用词创建映射对象，将其序列化为 Base64 编码的字符串，将其作为 Configuration 对象中某个键的值传递给映射器，并在 setup 方法中对其进行反序列化。

我会选择第一个选项，不仅因为它更容易，而且因为通过 Configuration 对象传递大量数据并不是一个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T07:25:19.713

Hadoop 分布式缓存是一种特定于将一些参考数据传递给映射器的机制。从性能的角度来看，它比从 HDFS 加载更好——因为数据将从 HDFS 传递到本地文件系统，每个节点一次，而不是每个任务一次。
您完全正确 - 它仅适用于文件和读取文件并将它们转换为您的数据结构是您的责任。
据我所知，hadoop 不支持传递对象。虽然如果您将在这些文件中使用某种序列化 - 它会接近您的要求。

# jquery - 检查是否有隐藏的div

> ID：13501277
> 
> 赞同：1
> 
> 时间：2012-11-21T20:10:38.550
> 
> 标签：jquery

如果在#main 中的其他 div 中至少隐藏了一个 div，如何检查点击？

```
$('#main div').click(function(){

});

<div id="main">
    <div style="display:block"></div>
    <div style="display:block"></div>
    <div style="display:none"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T20:12:05.583

```
if($("#main div:hidden").length > 0) {
  // atleast 1 div is hidden
} 
```

`#main > div:hidden`如果您只想检查直接后代，您可能想要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:12:02.247

```
var doesHiddenDivExist = $('#main div:hidden').length > 0; 
```

# objective-c - iOS：直播 AVPlayer

> ID：13501280
> 
> 赞同：2
> 
> 时间：2012-11-21T20:10:51.103
> 
> 标签：objective-c, ios, avplayer, http-live-streaming, live-streaming

我想从服务器流式传输一首歌曲，这似乎与我所做的方式一样工作得很好，但是这种方法似乎无法实现某些事情。

我目前已经实例化了一个 AVPlayer

```
player = [[AVPlayer alloc] initWithURL:[NSURL URLWithString:@"http://media.soundcloud.com/stream/songID?stream_token=myToken"]]; 
```

当我的应用程序认为缓冲区足够时，就调用它。

这播放的声音非常好，但我发现如果我停止指向 AVPlayer 实例，播放器会停止，如果我将应用程序推到后台，声音会消失并暂停，直到应用程序回到前台。

是否可以使用 AVPlayer 让歌曲在后台继续播放？

如果没有，我应该改用[HTTP Live Streaming吗？](https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/Introduction/Introduction.html)

我对 iOS 的这一方面非常陌生，我将非常感谢我的 SO-ers 同伴可以给我的任何指导！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T20:15:43.537

你应该明确地让你的应用在后台播放音频。将以下键插入 Info.plist 文件：

```
<key>UIBackgroundModes</key>
<array>
    <string>audio</string>
</array> 
```

（[参考](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)）

在开始播放音频之前还要添加以下行：

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:NULL]; 
```

（[参考](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioSession_ClassReference/Reference/Reference.html)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-04T13:55:28.473

技术问答 QA1668 在 iOS 上使用 AV Foundation 在后台播放媒体

问：当我的应用程序在后台使用 AV Foundation 时，如何确保我的媒体继续播放？

答：您必须声明您的应用在后台播放可听内容，并为您的音频会话分配适当的类别。另请参阅视频媒体的特殊注意事项。

声明您的应用在后台播放有声内容

首先，声明您的应用程序提供特定的后台服务，并且必须允许在后台继续运行。为此，请在应用的 Info.plist 文件中添加 UIBackgroundModes 键。它的值是一个数组，其中包含一个或多个字符串，用于标识您的应用程序支持哪些后台任务。指定字符串值 audio 以指示应用程序在后台向用户播放可听内容：

图 1 声明应用在后台播放有声内容。

重要提示：UIBackgroundModes 音频键还允许应用使用 AirPlay 在后台流式传输媒体内容（另请参阅视频媒体的特殊注意事项）。

# java - 什么是 STUN，它需要端口转发服务器吗？

> ID：13501288
> 
> 赞同：14
> 
> 时间：2012-11-21T20:11:14.303
> 
> 标签：java, tcp, udp, portforwarding, stun

我在没有基础服务器的情况下对 p2p 通信进行了一些研究，结果遇到了 STUN。根据我的阅读，STUN 是一种 NAT“打孔”方式，不需要端口转发来连接对等方。这是正确的，打孔到底是什么意思？如果不需要端口转发，这一切似乎都非常脆弱，因为它会通过防火墙，而且我不完全理解 STUN 的作用。STUN 可以在 Java 或其他语言的 p2p 程序中使用，例如聊天客户端，它通过 TCP/UDP 端口向对等方发送消息，而无需基础服务器或不需要用户进行端口转发？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-11-24T09:27:31.760

考虑两台机器想要相互通信的任务。如果两台机器直接连接到公共互联网（而不是在路由器后面），那么这两台机器只需将数据包来回发送到对方的公共 IP。通常，机器位于一个或多个路由器后面。为了简化问题，我们假设只有一层路由器。

NAT 遍历解决了路由器将数据包的传出端口号转换为其他内容的问题（例如，您从端口 X 发送请求，路由器将数据包转换为好像它从端口 Y 离开一样）。如果路由器是端口转发，那么路由器实际上不会进行任何转换（端口 X->X）。然而，大多数家庭/公司/等路由器都没有端口转发，因此 NAT 穿越开始发挥作用。请参阅[NAT 遍历](http://en.wikipedia.org/wiki/NAT_traversal)和不同类型的[NAT](http://en.wikipedia.org/wiki/Network_address_translation#Methods_of_Port_translation)。

考虑一个路由器的防火墙，它执行上述文章中的任何非端口转发转换（例如全锥）。如果路由器接收到一些数据包到端口 X，但路由器没有从端口 Y 发送任何数据包，它会丢弃数据包（毕竟，数据包是给谁的？路由器不知道！）。只有当某个私有机器发送一个数据包并且路由器进行转换以将端口 X 从该私有机器映射到外部端口 Y 时，外部数据包到端口 Y 才会被转发到私有机器。

### STUN 穿越

为了让两个客户端 A 和 B 都在 Internet 的防火墙后面直接通信，它们必须以某种方式知道路由器映射。一般的解决方案是使用 STUN 服务器来确定它们的端口映射。机器 A 从端口 X 向 STUN 发送一个数据包。路由器将端口转换为 Y，STUN 服务器看到这一点并回复 A，告诉他外部端口是什么。B 做同样的事情。然后，A 和 B 交换他们翻译的端口（通过使用其他一些中央服务器......举个简单的例子，Skype 可能有一个中央登录服务器，其中 A 和 B 告诉 Skype 服务器他们的端口翻译，Skype 分别告诉 A 和 B关于端口映射）。然后，B 使用端口 Y 而不是 X 向 A 的公共 IP 发送一个数据包。机器 A “攻击”了它的防火墙，允许它从外部端口 Y 接收数据包。

### 安全的？

您提到安全性：打孔是否会为安全违规打开网络？可能......我没有研究过这个主题，但考虑一个完整的锥形 NAT。一旦建立映射，任何外部机器都可以向机器 A 的路由器发送数据包，而 A 将获得数据包，即使 A 从未向某个恶意机器 Z 发送数据包。当然，机器 Z 必须以某种方式发现映射. 一些 Wikipedia 文章，该图仅显示具有此漏洞的完整锥形 NAT，但不要相信我的话。从使用打孔的应用程序（Skype、xbox live 等）的数量来看，除了路由器防火墙措施外，网络似乎还依赖于应用程序和系统级防火墙保护。

下面的福特文章简要提到了安全性：“与它的名字所暗示的相反，打孔不会损害专用网络的安全性。” 网络似乎比路由器防火墙更依赖系统级防火墙。

### 对称 NAT 和 TURN 遍历

STUN 并不总是有效：一些路由器“表现不佳”。机器 A 可能从端口 X 发送两个数据包，一个到 stackoverflow.com，一个到 facebook.com。路由器映射来自端口 Y 的 stackoverflow.com 数据包和来自端口 Z 的 facebook.com 数据包（即使机器 A 从内部端口 X 发送两个数据包）。这是一个对称 NAT。这些 NAT 是有问题的，因为上面的 STUN/Skype 连接不起作用。将 stackoverflow.com 替换为 STUN，将 facebook.com 替换为机器 B（您尝试使用 Skype 的人）。不幸的是，STUN 可以找出 A 发送到 STUN 的数据包的 NAT 映射，但发送到 B 的数据包使用完全不同的映射。通常，（如果您无法跟踪出站路由器数据包）确定对称 NAT 的端口映射是不可能的。因此，客户端需要一个中央路由服务器进行通信，但这违背了 p2p 的全部意义。看[转](http://en.wikipedia.org/wiki/Traversal_Using_Relays_around_NAT)。

### 我们可以在 Java 聊天程序中使用它吗？

任何支持网络库的语言（Java、C 等），您可以从任意端口发送数据包，都可以使用 STUN 来遍历 NAT（只要它不是对称 NAT 等）。一般来说，一个人*总是*需要一个中央服务器（在这种情况下是两个：STUN 和一个*登录*服务器）。*登录*服务器的使用如 Skype 示例中所述；一旦两个客户端知道他们的端口映射，他们必须在 p2p 通信开始*之前以某种方式相互通信（参见*[chicken or egg](http://en.wikipedia.org/wiki/Chicken_or_the_egg)）。但是一旦 A 和 B 知道对方的公共 IP 和 NAT 映射，他们就可以直接通信。

### 警告

虽然我不可能列出所有 NAT 穿越警告，但一个重要的概念是保持活动：一旦路由器进行了端口映射，它会持续多久？假设我连接到一个 STUN 服务器，然后等待 10 分钟让 B 在我告诉它映射后向我发送一个数据包。路由器可能会丢弃映射（路由器必须定期清除旧映射，以便为新映射腾出空间，并尽量减少安全性）。我找不到我的参考资料，我认为它因 TCP 与 UDP 数据包而异，但我熟悉的应用程序每隔约 60 秒或更短时间发送一个保持活动数据包，以确保路由器不会丢弃映射。一旦路由器丢弃映射并且机器尝试发送数据包，数据包就会被丢弃（导致我数小时的困惑......）。

### 文章

*   [RFC 5389 眩晕](https://www.rfc-editor.org/rfc/rfc5389)
*   [RFC 5766 转](https://www.rfc-editor.org/rfc/rfc5766)
*   [跨网络地址转换器的对等通信。B.福特等人。](http://www.brynosaurus.com/pub/net/p2pnat/)

上一篇文章很好地介绍了流派中关于路由器和 NAT 穿越的许多想法。我前段时间在实现一些 TURN 服务器/客户端程序时阅读了它，作者真的知道他们在说什么！

# javascript - 如何从 JS 中的侦听器函数中访问对象

> ID：13501290
> 
> 赞同：0
> 
> 时间：2012-11-21T20:11:17.723
> 
> 标签：javascript

我想从**require()**函数的**成功**侦听器中访问**foo.settings.debug**对象。我不断收到一个未定义的错误，当我引用“this”时，它最终引用了 ajax 对象。请协助。

 ****```
var foo = {

    info: {

        version: '0.0.1'

    },

    settings: {

        debug: true

    },

    require: function(script) {

        $.ajax({
            url: script,
            dataType: "script",
            async: false,
            success: function(){
                if(foo.settings.debug) console.log('loaded js file: ' + script);
            },
            error: function(){
                throw new Error("Could not load script " + script);
            }
        });

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:14:36.187

每个函数都有自己的`this`对象上下文。可以通过使用`apply`或其他此类功能来更改上下文。

在这种情况下，通过创建一个匿名函数作为成功的回调，您将进入一个新的上下文。为了访问前一个上下文，您需要在前一个上下文中定义一个变量（其名称不会被回调函数的参数名称覆盖）。

```
var foo = {

    info: {

        version: '0.0.1'

    },

    settings: {

        debug: true

    },

    require: function(script) {
        /* every function has its own 'this' context */
        var self = this;

        $.ajax({
            url: script,
            dataType: "script",
            async: false,
            success: function(){
                if(self.settings.debug) console.log('loaded js file: ' + script);
            },
            error: function(){
                throw new Error("Could not load script " + script);
            }
        });

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:16:33.233

您需要对 foo`this`内部的 foo 的引用，但是`this`在您的闭包中将是其他内容，因此您需要保留对`this`这样的引用：

```
require: function(script) {
        var self = this;
        $.ajax({
            url: script,
            dataType: "script",
            async: false,
            success: function(){
                if(self.settings.debug) console.log('loaded js file: ' + script);
            },
            error: function(){
                throw new Error("Could not load script " + script);
            }
        });

    } 
```****

# events - 第 578 行 ProductController.php 中的 Magento 错误和 Apache 分段错误 (11)

> ID：13501292
> 
> 赞同：1
> 
> 时间：2012-11-21T20:11:23.460
> 
> 标签：events, magento, logging

我正忙着为 Magento 编写一些观察者，遇到了一个问题，其中包含各种奇怪的错误消息，我无法轻易找到解决方案。

症状是：

*   在 Magento 管理页面中保存商店视图时，Apache 会因 /var/log/apache2/error.log 中的分段错误 (11) 而崩溃
*   在 Magento 管理页面中保存产品时，我会看到空白页面或（登录错误）我会看到“致命错误：在第 578 行的 ProductController.php 中调用成员函数 getId()”并且不会保存更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:11:23.460

由于我找不到答案，因此需要一些时间才能找到解决方案。在我在 Magento 中搜索正确事件时，我启用了将所有 Magento 事件记录到 Mage.php 的单独日志文件中。

在演示环境中使用了一天后，这个文件变成了大约 13Mb 大。禁用所有事件的日志记录功能可以解决上述两个问题。这对我来说仍然有点奇怪，因为其他功能仍然有效，而且我能够保存其他管理页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T16:54:43.880

您可以查看 magento 日志`tail -15 var/log/system.log`

```
ERR (3): Warning: include(): Unable to allocate memory for pool.  in /data/www/dev-store/lib/Varien/Autoload.php on line 93 
```

问题在于 /tmp 文件夹中的空间已耗尽。您可以列出具有大小的文件

```
cd /tmp
ls -lha 
```

删除大文件`sudo rm filename`

# google-maps - 自动集群地址

> ID：13501298
> 
> 赞同：2
> 
> 时间：2012-11-21T20:11:41.527
> 
> 标签：google-maps, google-maps-api-3, map, cluster-computing, routes

我在一家慈善基金会工作，该基金会为芝加哥各地的家庭提供 500 份感恩节晚餐。

我需要给 100 个司机 5 个家庭提供明年的服务。我的梦想是拥有能够自动将地址分组为彼此最接近的 5 组的东西。关于如何做到这一点的任何想法？

谢谢你，谢恩

图片 [https://www.facebook.com/media/set/?set=a.383650448381849.91573.143955182351378&type=1&l=f0e10e779c](https://www.facebook.com/media/set/?set=a.383650448381849.91573.143955182351378&type=1&l=f0e10e779c)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:41:24.683

使用此站点效果很好，因为它会自动订购和路由多达 100 个地址。试图弄清楚如何做 500 但现在可行。

[http://gebweb.net/optimap/](http://gebweb.net/optimap/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:35:33.237

这让我想起了我问的一个问题，这个[答案](https://stackoverflow.com/a/7645574/356218)提到了[K-clustering](http://en.wikipedia.org/wiki/K-means_clustering)，听起来它适用于这里

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T22:32:31.097

一个简单的解决方案是将它们沿空间填充曲线分组。空间填充曲线减小尺寸并重新排列点。它还细分了平面，并且在这样做时还保留了一些空间信息。它广泛用于地图应用。尤其是希尔伯特曲线会有很大帮助。我写了一个 php 类，可以解决你的问题。如果您想了解更多信息，请给我发送电子邮件。基本上，您还可以使用 mysql 的空间扩展并对查询进行排序。

# c# - 在 Silverlight 中删除视图

> ID：13501299
> 
> 赞同：0
> 
> 时间：2012-11-21T20:11:45.990
> 
> 标签：c#, silverlight, xaml, binding, view

我正在使用来自[http://www.divelements.co.uk/net/controls/sandribbonsl/](http://www.divelements.co.uk/net/controls/sandribbonsl/)的 SandRibbons并且我正在尝试向我的上下文选项卡添加一个视图，我已经通过使用成功地做到了这一点，

```
ribbon3.Items.Add(Activator.CreateInstance(viewModel.filterValue)); 
```

虽然这是问题所在，但如何删除视图？我试过，

```
ribbon3.Items.Remove(Activator.CreateInstance(viewModel.filterValue)); 
```

和

```
ribbon3.Items.Remove(viewModel.filterValue); 
```

尽管它似乎不起作用，但如果有人做过类似的事情或有任何意见，那将非常感激。

谢谢，
杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:16:43.480

我不得不说我不使用 Sandribbons ......但据我所知，你没有在你建议的任何删除语句中引用实际视图。可能的解决方案是在添加视图后保存视图的位置：

```
ribbon3.Items.Add(Activator.CreateInstance(viewModel.filterValue));
var posView = ribbon3.Items.Count - 1; // do it right after you added the view
// some stuff
ribbon3.Items.RemoveAt(posView); // note that it's the RemoveAt method 
```

或在添加视图之前保存视图本身并将其作为参考：

```
var theView = Activator.CreateInstance(viewModel.filterValue);
ribbon3.Items.Add(theView);
// some stuff
ribbon3.Items.Remove(theView); 
```

当然，这些只是可能的，并且可能不是解决您问题的最有效解决方案，但它可能会帮助您考虑如何以更优化的方式解决问题。

# c# - 代码隐藏中的数据绑定

> ID：13501306
> 
> 赞同：1
> 
> 时间：2012-11-21T20:12:11.883
> 
> 标签：c#, wpf, data-binding

我想在一个类实例和两个 WPF 文本框之间设置一个绑定。尽管如此，文本框并没有改变它们的状态，我不知道我做错了什么。

XAML

```
<DockPanel>
   <TextBlock Style="{StaticResource caption}">Testing System</TextBlock>
   <TextBlock DockPanel.Dock="Left" x:Name="txt1" Text="DC"/>
   <TextBlock DockPanel.Dock="Right" x:Name="txt2"  Text="PD"/>
   <Button Height="20" Width="100" Click="clickBinding">Bind</Button>
   <Button Height="20" Width="100" Click="clickChangeBinding">Change Status</Button>
</DockPanel> 
```

主窗口.xaml.cs

```
private ADSbinding myADS = new ADSbinding();
private void clickBinding(object sender, RoutedEventArgs e)
{
   Binding b1, b2;

   b1 = new Binding();
   b2 = new Binding();
   b1.Source = myADS.DeviceConfigured;
   b2.Source = myADS.ProcessingData;

   b1.UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged;
   b2.UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged;

   BindingOperations.SetBinding(txt1, TextBlock.TextProperty, b1);
   BindingOperations.SetBinding(txt2, TextBlock.TextProperty, b2); 
   }

   private void clickChangeBinding(object sender, RoutedEventArgs e)
   {
      myADS.changedata();
   } 
```

班级：

```
public class ADSbinding : INotifyPropertyChanged
{
   public event PropertyChangedEventHandler PropertyChanged;

   private string deviceConfigured = "false";
   private string processingData = "false";

   public ADSbinding()
   {
      ProcessingData = "true";
   }

   // Get-Set methods
   public string DeviceConfigured
   {
      get { return deviceConfigured; }
      set 
      { 
         deviceConfigured = value;
         Changed("DeviceConfigured");
      }
   }
   public string ProcessingData
   {
      get { return processingData; }
      set
      {
         processingData = value;
         Changed("ProcessingData");
      }
   }

   private void Changed(string propertyName)
   {
      if (PropertyChanged != null)
         PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
   }

   public void changedata()
   {
      DeviceConfigured = "change";
      ProcessingData = "change";
    }
} 
```

当按下“clickBinding”时，状态会改变，当“clickChangeBinding”它保持不变时，再次点击“clickBinding”它会改变。这是一个非常直接的尝试，我无法弄清楚问题出在哪里。任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:42:50.673

创建绑定时，您设置`Source`的是对象的属性，而不是对象本身。您应该在构造函数中指定属性名称`Binding`，然后将源设置为您的对象：

```
 b1 = new Binding("DeviceConfigured");
    b2 = new Binding("ProcessingData");
    b1.Source = myADS;
    b2.Source = myADS; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T13:42:09.843

除了 bde 答案之外，您还可以使用扩展方法，该方法允许您直接在 FrameworkElement 上设置绑定

```
public static void SetBinding(this FrameworkElement target, DependencyProperty property, TargetType source, Expression<Func<TargetType, PropertyType>> property_accessor)
{
  var binding = new Binding(source.PropertyName(property_accessor));
  binding.Source = source;
  target.SetBinding(property, binding);
}

public static string PropertyName(this TargetType obj, Expression<Func> property_accessor)
 { 
return ((MemberExpression)property_accessor.Body).Member.Name; 
} 
```

而不是打字

```
 BindingOperations.SetBinding(txt1, TextBlock.TextProperty, b1);
 BindingOperations.SetBinding(txt2, TextBlock.TextProperty, b2); 
```

您可以使用上面定义的扩展方法 SetBinding

```
txt1.SetBinding(TextBlock.TextProperty, myADS, x => x.DeviceConfigured);
txt2.SetBinding(TextBlock.TextProperty, myADS, x => x.ProcessingData); 
```

这样可以避免将属性名称作为字符串传递。

# bash - 在 shell 脚本中分组

> ID：13501311
> 
> 赞同：3
> 
> 时间：2012-11-21T20:12:16.577
> 
> 标签：bash, shell, sh

将参数传递给函数时，如何将参数分组为单个参数？例子

如果我的脚本文件“my_script.sh”具有类似的功能

```
 echo_arguments() {
    echo $1
    } 
    echo_arguments $1 
```

现在在 unix 命令行中，如何将参数指定为单个参数？

```
 ./my_spcript.sh a b c d        #these "a b c d" must fit in $1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T22:02:46.850

您可以通过多种方式将多个单词组合成一个参数：

```
./my_spcript.sh 'a b c d'
./my_spcript.sh "a b c d"
./my_spcript.sh a\ b\ c\ d 
```

基本上，它们都归结为告诉 shell 将空格视为参数的一部分，而不是参数之间的分隔符。以上所有运行脚本，$1 设置为`a b c d`，$2、$3 等未设置。

但是，当您在不带引号的情况下扩展 $1 时，如下所示：

```
echo_arguments $1 
```

shell 扩展 $1*然后重新拆分它，*将空格视为参数之间的分隔符。因此，当 my_spcript.sh`a b c d`作为单个参数获取时，echo_arguments 将每个字母作为单独的参数获取。通常，解决此问题的最佳方法是将 $1 放在双引号中以防止它被重新拆分（并防止其他一些可能不受欢迎的杂散解析）：

```
echo_arguments "$1" 
```

作为一般规则，每当你替换一个变量时，你应该用双引号把它包起来，以防止你看到的那种问题。有些情况下您*需要*额外的解析，所以您不想要双引号；但除非您有特定的理由希望 shell 进行额外的解析，否则请使用双引号来避免麻烦。

对于您的具体示例，“修复”此问题的另一种方法是让 echo_arguments 回显其*所有*参数，而不仅仅是第一个：

```
echo_arguments() {
    echo "$@"
} 
```

请注意，它`"$@"`扩展到所有当前脚本/函数的参数，每个参数都被视为它们被传递给的命令/函数的单独参数（本质上，它们被完整地传递）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:22:02.853

用引号将参数括起来将允许参数中有空格 - 即`./my_spcript.sh 'a b c d'`. 您需要在脚本中再次执行相同操作：

```
# my_script.sh
echo_arguments() {
    echo $1
}
echo_arguments "$1" 
```

正如其他人所提到的，$@（和 $*）提供了将所有命令行参数作为一个组来引用的其他方式。例如，有关 Bash 的详细信息，请参见[http://tldp.org/LDP/abs/html/internalvariables.html](http://tldp.org/LDP/abs/html/internalvariables.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:25:05.013

我不知道它是否合适，但您可以尝试在 bash 中使用“var args”：

```
echo_arguments() {
 echo ${@:1:4}
}

echo_arguments ${@:1:4} 
```

这将扩展前 4 个参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T20:27:06.793

如果您希望它们成为脚本中的单个参数，则将它们放在引号中（单引号或双引号）：

```
./my_script.sh 'a b c d' 
```

相反，如果您希望将它们作为单独的参数进行解析，但您希望将脚本的所有参数传递给其中的函数，则可以使用`$@`来一​​次引用所有这些参数。

```
echo_arguments() {
    echo "$@"
} 
echo_arguments "$@" 
```

# maven - 未找到 Maven 3.0.4 安装到 Ubuntu mvn

> ID：13501312
> 
> 赞同：5
> 
> 时间：2012-11-21T20:12:23.947
> 
> 标签：maven, ubuntu

我试图将 Maven 安装到 Ubuntu，但出现了问题。

我下载了 Maven 并将其解压缩到文件夹`/usr/local/apache-maven/apache-maven-3.0.4.` 然后我将这些行添加到 /etc/environment。

> 导出 M2_HOME=/usr/local/apache-maven/apache-maven-3.0.4
> 
> 导出 M2=$M2_HOME/bin
> 
> PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:$JAVA_HOME:$JRE_HOME:$M2:$PATH"

但是当我尝试验证我的安装时，`mvn --version`我收到了这条消息

> '程序'mvn'可以在以下包中找到：* maven * maven2 尝试：sudo apt-get install '

**解决了。**抱歉，如果忘记回复此问题。我将导出行添加到 ~/.bashrc，然后它开始工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-10T11:10:22.093

有同样的问题，这就是我解决它的方法。

1- 从 Synaptic 安装 Maven2，而不是从网站下载。

2-`gedit ~/.bashrc`检查是否定义了 M2_HOME 和 M2 环境变量，如果有，请删除它们，如果有对它们的引用，也将它们从 PATH 中删除。

3-重新加载bash并重试`mvn --version`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T20:15:12.650

请检查`mvn`$M2 中是否可执行。如果不是，您需要通过运行使其可执行

```
chmod +x mvn 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-01T10:33:31.070

从 Ubuntu 16.04.3 LTS 版本开始，可以通过运行以下命令从官方存储库安装 Maven：

*   sudo apt 更新
*   sudo apt install maven

每次点击`sudo apt update`它都会更新到最新版本。

更新：安装完成后，在终端运行`mvn -v`查看是否安装了包。

# android - Appengine 上的 Oauth 与 Google Play 服务

> ID：13501317
> 
> 赞同：3
> 
> 时间：2012-11-21T20:12:52.897
> 
> 标签：android, google-app-engine, oauth-2.0, google-play-services, google-cloud-endpoints

我在 Android 上使用 Google Play 服务来访问 Google APIs 和 Google Cloud Endpoints。我还可以使用来自 Google Play 服务的令牌访问 appengine User api。这可能吗？[此链接](https://developers.google.com/appengine/docs/java/oauth/overview)中有一些 OAuth 的示例代码，但有点模糊。我可以在标头中传递 oauth 令牌并使用以下代码获取用户吗？

```
 User user = null;
    try {
        OAuthService oauth = OAuthServiceFactory.getOAuthService();
        user = oauth.getCurrentUser();

    } catch (OAuthRequestException e) {
        // The consumer made an invalid OAuth request, used an access token that was
        // revoked, or did not provide OAuth information.
        // ...
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T21:08:23.127

您可以，但这种方法不会像您所处的场景那样安全：

*   为 Google API 使用特定于服务的范围
*   直接访问 Endpoints API

您可以使用 Google Play 服务来获取您想要使用的范围[的令牌。](https://developers.google.com/android/google-play-services/authentication#obtain)由于您对在`Users`App Engine 上使用 API 感兴趣，因此您需要以下`userinfo.email`范围：

```
String mScope = "https://www.googleapis.com/auth/userinfo.email";
try {
    token = GoogleAuthUtil.getToken(mActivity, mEmail, mScope);
} catch {
    ...
} 
```

通过 Authorization 标头将其发送到 App Engine：

```
Authorization: Bearer your_token 
```

然后，使用`OAuth`API，您可以获得一个`User`对象：

```
String mScope = "https://www.googleapis.com/auth/userinfo.email";
User user = null;
try {
  OAuthService oauth = OAuthServiceFactory.getOAuthService();
  user = oauth.getCurrentUser(mScope);
} catch (OAuthRequestException e) {
  // The consumer made an invalid OAuth request, used an access token that was
  // revoked, or did not provide OAuth information.
  // ...
} 
```

**但是，一般来说你不想这样做！**`userinfo.email`如果您以这种方式保护您的应用程序，另一个用户可以编写一个应用程序，请求您对您的范围授予权限。一旦授予，他们需要做的就是获取令牌并将其传递给*您的*应用程序，它们就会像您一样出现。端点和其他 Google API 有额外的逻辑来防止这种行为，这就是为什么你最好使用其中一种方法。

# mysql - 基于可能返回多个结果的“或”子句仅更新一行

> ID：13501318
> 
> 赞同：0
> 
> 时间：2012-11-21T20:12:53.833
> 
> 标签：mysql

有没有更有效的方法来做到这一点？我不想更新多个记录，并且两个初始查询可能会匹配两个不同的记录。

```
SET @AppID = (SELECT appID FROM employees WHERE ssn = vSSN);

IF @AppID IS NULL THEN
    SET @AppID = (SELECT appID from applications WHERE appDate = vDate);
END IF;

UPDATE applications
SET status = vStatus
WHERE appID = @AppID; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:55:30.183

您可以使用 COALESCE 运算符和 UPDATE/REPLACE 语句。更准确地说，COALESCE 从逗号分隔的列表中挑选出第一个非空值。

[http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_coalesce](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_coalesce)

[http://dev.mysql.com/doc/refman/5.5/en/update.html](http://dev.mysql.com/doc/refman/5.5/en/update.html)

[http://dev.mysql.com/doc/refman/5.5/en/replace.html](http://dev.mysql.com/doc/refman/5.5/en/replace.html)

首先， UPDATE 替代方案：

```
UPDATE applications AS app
INNER JOIN (
SELECT COALESCE(employees.appID, applications.appID) AS appID
FROM applications
LEFT OUTER JOIN employees
ON employees.ssn = vSSN
WHERE applications.appDate = vDate
-- do some ordering or filtering if the date is not unique 
LIMIT 1) AS app2
ON app.appID = app2.appID
SET app.status = vStatus 
```

二、REPLACE替代。请注意，REPLACE 首先删除旧条目，然后重新插入新条目。因此，employees.appID 可能不是applications.appID 的外键。

```
REPLACE INTO applications (appID, status)
SELECT COALESCE(employees.appID, app2.appID) AS appIdToModify, vStatus
FROM applications AS app2
LEFT OUTER JOIN employees
ON ssn = vSSN
WHERE app2.appDate = vDate 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T20:13:35.830

```
UPDATE applications SET status = vStatus WHERE appID = @AppID LIMIT 1; 
```

# python - 如何在python中重新创建指向全局数组的指针

> ID：13501324
> 
> 赞同：0
> 
> 时间：2012-11-21T20:13:19.550
> 
> 标签：python

我想要 2 个全局数组作为结果

```
global_array1 = []
global_array2 = [] 
```

在我的函数中，我将根据条件为不同的数组添加值：

```
def myfunc():
  global global_array1:
  global global_array2:

  result =[]

  for a in anArray:
      if some_condition == True:
          result = global global_array1
      else 
          result = global_array2

      # do something hhere
      result.append(aResult) 
```

但是当我尝试它时，我没有看到 myFunction 正在将结果保存到全局数组中。如何将“结果”作为指向 global_array1 或 global_array2 的指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T20:15:56.387

这很容易：

```
>>> def add(v,which):
...    c = a if which else b
...    c.append(v)
... 
>>> a = []
>>> b = []
>>> add(1,True)
>>> add(2,True)
>>> add(3,False)
>>> a
[1, 2]
>>> b
[3] 
```

然而，这似乎是一个非常脆弱的代码设计。具有副作用的函数通常是不可取的（除非它们被用作类或其他东西的实例方法——然后它们应该只修改它们绑定到的实例......即`self`）。

修改全局数据的函数更可怕。通常最好将数据作为参数传递到函数中，并让函数返回修改后的版本。就地修改参数也是可以的，但前提是您的函数返回`None`并且文档清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T21:25:31.050

以下与您的代码类似，但实际运行，似乎工作得很好：

```
global_array1 = []
global_array2 = []

def myfunc(aResult, anArray):
  global global_array1
  global global_array2

  for a in anArray:
      if a:
          result = global_array1
      else:
          result = global_array2

      # do something hhere
      result.append(aResult)

anArray = [True, True, False]

myfunc(1, anArray)
myfunc(2, anArray)
myfunc(3, anArray)

print 'global_array1:', global_array1
print 'global_array2:', global_array2 
```

输出：

```
global_array1: [1, 1, 2, 2, 3, 3]
global_array2: [1, 2, 3] 
```

# git - 如何在 Git Tower 中使用 Kaleidoscope 2？

> ID：13501329
> 
> 赞同：15
> 
> 时间：2012-11-21T20:13:32.033
> 
> 标签：git, git-tower

Kaleidoscope 2 公测版于本周发布，并获得了合并功能。耶！但是，命令行的用法对用法有些模糊。我想将 Kaleidoscope 和 Git Tower 一起使用，我该怎么做？

```
$ ksdiff --help
usage: ksdiff - send files to Kaleidoscope
command options:                        
  [--wait, -w | --no-wait]              whether to wait for the document to be
                                        closed in Kaleidoscope before exiting

FILE options:
  [--snapshot | --no-snapshot]          whether the file is temporary. this
                                        option will override the heuristics
                                        ksdiff would otherwise use to determine
                                        this state.

commands:
  --merge                               send a merge
                                        implies --wait
    --output OUTPUT                     use OUTPUT as the destination path for
                                        this merge. creates OUTPUT if it does
                                        not exist.
    [--base BASE]                       use BASE as the base content for this
                                        merge. can improve the quality of the
                                        default selections for some merges.
    FILE FILE                           the files to merge 
```

[Git Tower 的外部合并工具的支持文档](http://www.git-tower.com/files/applicationHelp/pgs/Integration_DiffTools.html)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T02:22:57.230

如果您使用的是 MAS 版本的 Kaleidoscope，则必须手动安装 ksdiff 工具，以便 Tower 能够启动 Kaleidoscope。

在此处下载[http://www.kaleidoscopeapp.com/ksdiff2](http://www.kaleidoscopeapp.com/ksdiff2)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-12-01T19:17:27.173

对我来说缺少的链接是：[http](http://www.kaleidoscopeapp.com/ksdiff2) : //www.kaleidoscopeapp.com/ksdiff2 并安装 Kaleidosope 命令行工具（ksdiff），目前我在“Kaleidoscope > 集成..”中的“阅读更多”按钮没有链接，所以我希望这可以帮助其他可能不成功的人。另一个可能缺少的步骤是在“Tower > Preferences > Integration”中安装 Tower Command Line Utility，从那里您可以转到“Git Config”选项卡并选择 Kaleidoscope 作为您的 Diff/Merge 工具。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-21T20:13:32.033

**从 Git Tower 1.4.14 开始更新**

Git Tower（版本 1.4.14 及更高版本）现在附带 Kaleidoscope 2 集成。下面显示的启动器脚本不应再使用，因为它们不能在 Kaleidoscope 2 最终版本中正常工作。

* * *

选择集成 > Git 合并时，万花筒提供正确的命令行用法。Git Tower 的正确启动器脚本如下所示：

**~/Library/Application Support/Tower/CompareScripts/kaleidoscope2.sh**

```
#!/bin/sh

LOCAL="$1"
REMOTE="$2"
BASE="$3"
MERGED="$4"

APPLICATION_PATH=/Applications/Kaleidoscope.app
CMD="$APPLICATION_PATH/Contents/MacOS/ksdiff"

"$CMD" --merge --output "$MERGED" --base "$BASE" -- "$LOCAL" --snapshot "$REMOTE" --snapshot 
```

**~/Library/Application Support/Tower/CompareTools.plist**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <dict>
        <key>ApplicationIdentifier</key>
        <string>com.blackpixel.kaleidoscope</string>
        <key>ApplicationName</key>
        <string>Kaleidoscope</string>
        <key>DisplayName</key>
        <string>Kaleidoscope</string>
        <key>LaunchScript</key>
        <string>kaleidoscope2.sh</string>
        <key>Identifier</key>
        <string>kaleidoscope2</string>
        <key>SupportsMergeTool</key>
        <true/>
    </dict>
</array>
</plist> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-12T13:38:45.937

我们最新的 Tower 版本（版本 1.4.14）现在正式支持 Kaleidoscope 2 作为 MergeTool。您现在可以从[Tower 网站](http://www.git-tower.com)下载它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T00:18:58.270

如果您**添加**了 .sh 和对 .plist 的更改，则在将 Tower 升级到 1.4.14 或更高版本时**必须将**其删除，否则 Kaleidoscope 将无法启动。我手动添加了更改，并且我有 Tower 版本 1.4.15，并且 Kaleidoscope 在删除更改之前不想启动。

我还有 MAS 版本的 Kaleidoscope 2.0 并安装了 ksdiff 工具。

# jquery - jQuery DataTables 显示所有记录作为选项

> ID：13501332
> 
> 赞同：5
> 
> 时间：2012-11-21T20:13:35.353
> 
> 标签：jquery, sorting, datatables

我正在为我正在构建的 Web 应用程序使用购买的 Admin 主题。该主题带有 jQ​​uery 数据表的样式。我试图弄清楚如何在每页记录下拉列表中添加查看所有记录选项，但是由于主题是预先设置好的，所以已经编写了很多代码，而且我不知道如何添加我需要的内容. 这是我所拥有的：

页脚代码：

```
 <!-- jQuery DataTable -->
    <script src="<?php echo base_url(); ?>assets/js/plugins/dataTables/jquery.datatables.min.js"></script>
    <script>
        /* Default class modification */
        $.extend( $.fn.dataTableExt.oStdClasses, {
            "sWrapper": "dataTables_wrapper form-inline"
        } );

        /* API method to get paging information */
        $.fn.dataTableExt.oApi.fnPagingInfo = function ( oSettings )
        {
            return {
                "iStart":         oSettings._iDisplayStart,
                "iEnd":           oSettings.fnDisplayEnd(),
                "iLength":        oSettings._iDisplayLength,
                "iTotal":         oSettings.fnRecordsTotal(),
                "iFilteredTotal": oSettings.fnRecordsDisplay(),
                "iPage":          Math.ceil( oSettings._iDisplayStart / oSettings._iDisplayLength ),
                "iTotalPages":    Math.ceil( oSettings.fnRecordsDisplay() / oSettings._iDisplayLength )
            };
        }

        /* Bootstrap style pagination control */
        $.extend( $.fn.dataTableExt.oPagination, {
            "bootstrap": {
                "fnInit": function( oSettings, nPaging, fnDraw ) {
                    var oLang = oSettings.oLanguage.oPaginate;
                    var fnClickHandler = function ( e ) {
                        e.preventDefault();
                        if ( oSettings.oApi._fnPageChange(oSettings, e.data.action) ) {
                            fnDraw( oSettings );
                        }
                    };

                    $(nPaging).addClass('pagination').append(
                        '<ul>'+
                            '<li class="prev btn-small disabled"><a href="#"><span class="awe-caret-left"></span> '+oLang.sPrevious+'</a></li>'+
                            '<li class="next btn-small disabled"><a href="#">'+oLang.sNext+' <span class="awe-caret-right"></span></a></li>'+
                        '</ul>'
                    );
                    var els = $('a', nPaging);
                    $(els[0]).bind( 'click.DT', { action: "previous" }, fnClickHandler );
                    $(els[1]).bind( 'click.DT', { action: "next" }, fnClickHandler );
                },

                "fnUpdate": function ( oSettings, fnDraw ) {
                    var iListLength = 0;
                    var oPaging = oSettings.oInstance.fnPagingInfo();
                    var an = oSettings.aanFeatures.p;
                    var i, j, sClass, iStart, iEnd, iHalf=Math.floor(iListLength/2);

                    if ( oPaging.iTotalPages < iListLength) {
                        iStart = 1;
                        iEnd = oPaging.iTotalPages;
                    }
                    else if ( oPaging.iPage <= iHalf ) {
                        iStart = 1;
                        iEnd = iListLength;
                    } else if ( oPaging.iPage >= (oPaging.iTotalPages-iHalf) ) {
                        iStart = oPaging.iTotalPages - iListLength + 1;
                        iEnd = oPaging.iTotalPages;
                    } else {
                        iStart = oPaging.iPage - iHalf + 1;
                        iEnd = iStart + iListLength - 1;
                    }

                    for ( i=0, iLen=an.length ; i<iLen ; i++ ) {

                        // Add / remove disabled classes from the static elements
                        if ( oPaging.iPage === 0 ) {
                            $('li:first', an[i]).addClass('disabled');
                        } else {
                            $('li:first', an[i]).removeClass('disabled');
                        }

                        if ( oPaging.iPage === oPaging.iTotalPages-1 || oPaging.iTotalPages === 0 ) {
                            $('li:last', an[i]).addClass('disabled');
                        } else {
                            $('li:last', an[i]).removeClass('disabled');
                        }
                    }
                }
            }
        });

    </script> 
```

我要添加的内容（我认为，基于另一个 Stack Overflow 问题）：

```
oTable = $('#example').dataTable({ "aLengthMenu": [
        [25, 50, 100, 200, -1],
        [25, 50, 100, 200, "All"]
    ], 

"iDisplayLength" : -1 }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-23T16:08:02.877

由于您`oTable`是您的 dataTable 实例，请尝试：

```
var oSettings = oTable.fnSettings();
oSettings._iDisplayLength = 500;
oTable.fnDraw(); 
```

你也可以把它放在一个`onClick`：

```
var oSettings = oTable.fnSettings();

$('.changeLength').click(function(e){
   oSettings._iDisplayLength = 500;
   oTable.fnDraw(); 
}); 
```

这样，当您单击按钮时，它会更改表格长度。

# objective-c - objC 检查空字符串，isEqualToString:@"" vs 长度

> ID：13501335
> 
> 赞同：1
> 
> 时间：2012-11-21T20:13:42.547
> 
> 标签：objective-c, syntax, compare, string

我有一个字符串

```
NSString hi; 
```

而且我不知道将初始化哪些值。可以是 nil，可以是空字符串，可以是任何东西。

使用有什么好处吗

```
if (![hi length]) 
```

对比

```
if (![hi isEqualToString:@""]) 
```

似乎这两种情况都为空字符串、nil 和任何其他类型的字符串返回相同的值。我猜长度更好，因为它更有效。它只返回一个变量，其中 isEqualToString 必须进行比较。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T20:19:03.883

他们不做同样的事情。

`[hi length]`将为 nil 或空字符串返回 0，为任何其他字符串返回非零。

`[hi isEqualToString:@""]`当为空字符串时将返回 1，当为 nil 或任何非空字符串时将返回`hi`0 。`hi`

换句话说，`hi`两行代码给出相同结果的唯一值是`nil`.

您可能想要选项 #1 的行为（将 nil 或空字符串视为“空白”，将任何其他值视为“非空白”），所以这就是要使用的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T20:19:38.040

> 使用有什么好处吗`if (![hi length])`

是的。它可以同时检查空字符串**和**a `nil`。您不能使用 来执行此操作`isEqualToString:`，因为如果字符串是`nil`，那么发送给它的任何消息都将返回零，因此它看起来不等于空字符串，因此需要再次检查。

顺便说一下，为了清楚起见，您应该考虑使用`if (hi.length != 0)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T20:26:02.533

我会做以下事情

```
if (hi && ![hi isEqualToString:@""]) {

} 
```

`![hi isEqualToString:@""]``hi`如果是的话，独自一人会让你得到一个真实的`nil`。

# asp.net - asp sqldatasource 文本

> ID：13501348
> 
> 赞同：0
> 
> 时间：2012-11-21T20:14:26.107
> 
> 标签：asp.net, sql

我需要一个包含以下 sql 的 sqldatasource。

```
if @filter = 'departments'
begin

SELECT ISNULL(DocTitle,'') as Name, DocNumber as id, DocUrl+DocName AS link,LastModBy,LastModDate, IsLink 
FROM cmc.CMC_Docs d 
INNER JOIN CMC.CMC_Doc_Locations as l on l.FamilyID = d.FamilyID 
INNER JOIN CMC.CMC_DocFamilies df on df.FamilyID = d.FamilyId 
WHERE IsEnabled=1 
AND ISNULL(DocName,'') <> '' 
AND d.FamilyID IN @dep  
ORDER by DocTitle

end 
```

其中@dep 类似于 (2,3)

但是，当我尝试测试查询时，我收到一个错误，提示 @dep 附近的语法不正确。

任何想法我需要如何在数据源中编写它才能使其工作？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:17:57.247

你需要把它放在（）中吗？

例如：从 (1,2,3) 中的 productid 起作用
的产品中选择 * 例如：从 1,2,3 中的 productid 中的产品中选择 * - 不起作用

# haskell - 使用haskell中的递归检查交替的0和1

> ID：13501351
> 
> 赞同：-4
> 
> 时间：2012-11-21T20:14:44.797
> 
> 标签：haskell, recursion

我想编写一个递归函数来检查字符串（0 和 1）是否交替。

例如：

```
In:  101010
Out: True

In:  110010
Out: False 
```

我该如何编写这样的函数，我该如何理解它的逻辑？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T21:21:08.520

我认为您要求一个函数来检查列表是否在 0 和 1 之间交替。

我认为这是用递归解决这个问题的好方法：

```
alternates ('1':'1':_) = False   -- always false if it repeats
alternates ('0':'0':_) = False   -- always false if it repeats
alternates [] = True
alternates (x:xs) = alternates xs 
```

最后一行是这样工作的：
我们知道 if`xs`里面有一个元素，它`x`和前两种情况检查的不一样，所以我们可以继续从`xs`.

我们需要`""`, and `"1"`or`"0"`给 True 以保持一致性；交替意味着没有重复。

# ruby - MiniMagick：使 png 部分不透明/如何使用“-评估”

> ID：13501353
> 
> 赞同：2
> 
> 时间：2012-11-21T20:14:47.607
> 
> 标签：ruby, image-processing, imagemagick, minimagick

我正在尝试使用 MiniMagick 制作一个部分不透明的 png，但我猜它真正归结为使用“-evaluate”的语法

这适用于终端：

```
convert input.jpg -alpha on -channel a -evaluate set 25% output.png 
```

但我不太明白如何把它变成 minimagick 代码

这是我正在尝试的（最新排列）：

```
require 'mini_magick'

img = MiniMagick::Image.open('input.jpg')
img.combine_options do |mogrify|
    mogrify.alpha 'on'
    mogrify.channel 'a'
    mogrify.evaluate 'set', '25%'

    puts mogrify.inspect
end
img.write('output.png') 
```

`inspect`输出显示`@args`是`@args=["-alpha", "\"on\"", "-channel", "\"a\"", "-evaluate", "\"set\"", "\"25%\""]`

没有错误消息，但我得到的只是 input.jpg 的相同副本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-21T01:02:09.487

除了您还需要让 minimagick 知道您正在以 PNG 格式输出时，您几乎已经完成了：

```
 img.format('png') 
```

试试这个：

```
 require 'mini_magick'

    img = MiniMagick::Image.open('input.jpg')
    img.format('png')
    img.combine_options do |mogrify|
        mogrify.alpha 'on'
        mogrify.channel 'a'
        mogrify.evaluate 'set', '25%'
    end
    img.write('output.png') 
```

# php - 如何在 Yahoo Media Player 播放列表中显示曲目位置

> ID：13501354
> 
> 赞同：1
> 
> 时间：2012-11-21T20:14:58.930
> 
> 标签：php

我在我的网站上使用 YahooMediaPlayer，但想知道是否可以获取曲目位置（在加载的播放列表中）。目前，我通过 YMP 拾取的 href 标签将 mp3 文件添加到页面。我尝试使用 FireBug 来查找 track-ID，但似乎无法在任何地方看到它。

请问你能帮忙吗？

# python - 如何在 Python 脚本中暂停和等待命令输入

> ID：13501363
> 
> 赞同：22
> 
> 时间：2012-11-21T20:15:25.530
> 
> 标签：python

是否可以在 Python 中有如下脚本？

```
...
Pause
->
Wait for the user to execute some commands in the terminal (e.g.
  to print the value of a variable, to import a library, or whatever).
The script will keep waiting if the user does not input anything.
->
Continue execution of the remaining part of the script 
```

本质上，脚本暂时将控制权交给了 Python 命令行解释器，并在用户以某种方式完成该部分后恢复。

* * *

我想出的（受答案启发）类似于以下内容：

```
x = 1

i_cmd = 1
while True:
  s = raw_input('Input [{0:d}] '.format(i_cmd))
  i_cmd += 1
  n = len(s)
  if n > 0 and s.lower() == 'break'[0:n]:
    break
  exec(s)

print 'x = ', x
print 'I am out of the loop.' 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-21T20:16:11.640

如果您使用的是 Python 2.x：`raw_input()`

Python 3.x：`input()`

例子：

```
# Do some stuff in script
variable = raw_input('input something!: ')
# Do stuff with variable 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-12-01T21:44:00.133

我知道做到这一点的最好方法是使用 pdb 调试器。所以放

```
import pdb 
```

在程序的顶部，然后使用

```
pdb.set_trace() 
```

为你的“暂停”。

在 (Pdb) 提示符下，您可以输入命令，例如

```
(Pdb) print 'x = ', x 
```

你也可以单步执行代码，尽管这不是你的目标。完成后只需键入

```
(Pdb) c 
```

或单词“继续”的任何子集，代码将恢复执行。

截至 2015 年 11 月，调试器的一个很好的简单介绍是*[Debugging in Python](https://pythonconquerstheuniverse.wordpress.com/2009/09/10/debugging-in-python/)*，但如果你用谷歌搜索“python debugger”或“python pdb”，当然有很多这样的来源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-16T19:39:49.447

我想你正在寻找这样的东西：

```
import re

# Get user's name
name = raw_input("Please enter name: ")

# While name has incorrect characters
while re.search('[^a-zA-Z\n]',name):

    # Print out an error
    print("illegal name - Please use only letters")

    # Ask for the name again (if it's incorrect, while loop starts again)
    name = raw_input("Please enter name: ") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-07-22T21:54:50.263

### 等待用户输入“继续”：

输入函数确实会停止脚本的执行，直到用户执行某些操作。这是一个示例，显示了在查看预先确定的感兴趣变量后如何手动继续执行：

```
var1 = "Interesting value to see"
print("My variable of interest is {}".format(var1))
key_pressed = input('Press ENTER to continue: ') 
```

### 等待预定时间后继续：

我发现另一个有用的情况是延迟，以便我可以读取以前的输出并决定`Ctrl`+`C`如果我希望脚本在一个不错的点终止，但如果我什么都不做则继续。

```
import time.sleep
var2 = "Some value I want to see"
print("My variable of interest is {}".format(var2))
print("Sleeping for 5 seconds")
time.sleep(5) # Delay for 5 seconds 
```

### 可执行命令行的实际调试器：

请参阅上面有关`pdb`用于单步执行代码的答案

参考：*[Python 的 time.sleep() – 暂停、停止、等待或睡眠您的 Python 代码](https://www.pythoncentral.io/pythons-time-sleep-pause-wait-sleep-stop-your-code/)*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-04T02:37:55.153

只需使用 input() 函数，如下所示：

```
# Code to be run before pause
input() # Waits for user to type any character and
        # press Enter or just press Enter twice

# Code to be run after pause 
```

# php - 为什么这个查询脚本返回一个致命错误？

> ID：13501364
> 
> 赞同：0
> 
> 时间：2012-11-21T20:15:32.770
> 
> 标签：php, pdo, fatal-error

执行以下查询时出现致命错误：

```
$stmt = $db->query('SELECT * FROM comments LIMIT 50');
    while ($result = $stmt->fetch(PDO::FETCH_ASSOC)) {
        echo $result['name'] . ':' . strip_tags($result['message']);
    } 
```

回报：

```
 Fatal error: Call to a member function query() on a non-object 
```

我这样设置我的 $db ：

```
try {$db = new PDO('mysql:host=localhost;dbname=database', 'username', 'password');}
catch(PDOException $e) {echo $e->getMessage();} 
```

有谁知道是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:18:33.780

由于执行查询，您没有收到错误。查询实际上永远不会尝试执行

这个错误 -

```
Fatal error: Call to a member function query() on a non-object 
```

告诉你那`$db`不是一个对象。

要么它从未实例化，要么它在不同的范围内实例化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:18:02.730

$db 尚未在您使用它的范围内正确初始化。

您可能想尝试`global $db;`在他们两个之前放置一个，看看它是否是一个范围问题。

```
global $db;
try {$db = new PDO('mysql:host=localhost;dbname=database', 'username', 'password');}
catch(PDOException $e) {echo $e->getMessage();}

global $db;
$stmt = $db->query('SELECT * FROM comments LIMIT 50');
    while ($result = $stmt->fetch(PDO::FETCH_ASSOC)) {
        echo $result['name'] . ':' . strip_tags($result['message']);
    } 
```

# java - 仅显示 4 条记录并在 JList 中添加滚动条

> ID：13501365
> 
> 赞同：-1
> 
> 时间：2012-11-21T20:15:36.537
> 
> 标签：java, swing, jlist

我添加了一个 JList，并使其一次只显示 4 条记录。如果有超过 4 条记录，用户应该能够滚动和查看其他记录。但就我而言，我可以看到我添加的所有 8-10 条记录。该代码未显示前 4 条记录和滚动条。有人能告诉我我错过了什么吗？

```
import java.awt.BorderLayout;

public class FrameTest {

    private JPanel panel;
    private JFrame frame;
    private FrameTest ft;
    private JList list;

    public FrameTest() {
        initComponents();
        ft = this;
    }

    private void initComponents() {
        frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setExtendedState(JFrame.MAXIMIZED_BOTH);

        panel = new JPanel();
        panel.setBorder(new EmptyBorder(5, 5, 5, 5));
        panel.setLayout(new BorderLayout(0, 0));

        frame.getContentPane().add(panel);

        list = new JList();
        list.setVisibleRowCount(4);
        list.setModel(new AbstractListModel() {
            String[] values = new String[] {"adf", "gr", "rg", "g", "tg", "gt", "tg", "tg", "t", "gt", "gt"};
            public int getSize() {
                return values.length;
            }
            public Object getElementAt(int index) {
                return values[index];
            }
        });
        list.setSelectedIndex(1);
        panel.add(list, BorderLayout.SOUTH);

        frame.setLocationByPlatform(true);
        frame.pack();
        frame.setVisible(true);
    }

} 
```

注意：上面是我的代码的简化版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:21:38.113

尝试添加`JList`to`JScrollPane`并将滚动窗格添加到您的框架。

```
 panel.add(new JScrollPane(list), BorderLayout.SOUTH); 
```

`visibleRowCount`用于`getPreferredScrollableViewportSize`确定应在滚动窗格中显示的行数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:29:35.663

使用`JScrollPane`来实现滚动条。

```
 JScrollPane scrollPane = new JScrollPane(list);
    panel.add(scrollPane, BorderLayout.SOUTH); 
```

教程中的详细信息：[**使用 JScrollPane**](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T20:27:24.377

`setVisibleRowCount()`更改 JList 的大小*首选项*，但实际大小由布局 JList 的 Layout Manager 确定。一些布局会注意首选尺寸，而另一些则不会。

文档说：

> 对于 VERTICAL 布局方向，这将设置或获取要显示的首选行数，而无需滚动。对于 HORIZONTAL_WRAP 或 VERTICAL_WRAP 布局方向，它定义了单元格的换行方式。

[JavaDoc](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html#setVisibleRowCount%28int%29)中的更多详细信息。

# java - 如何以用户友好的方式使用 GoogleDocs 查看 ACRA 异常？

> ID：13501371
> 
> 赞同：0
> 
> 时间：2012-11-21T20:15:56.200
> 
> 标签：java, android, exception-handling, google-docs, acra

我将 ACRA 与 GoogleDocs 一起使用。一切正常，但我认为输出没有以用户友好的方式显示。一个例外是占用整个显示器的大小。我想看到一个类似于“表单/显示摘要”视图的异常。我错过了 GoogleDrive 中的设置选项吗？

或者.... 如果有免费的替代方法来查看 ACRA 用户友好的消息，请告诉我。

谢谢qd0r

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:21:03.493

如果您只想为您提供错误跟踪帐户，您可以尝试[http://www.bugsense.com/](http://www.bugsense.com/)您可以创建一个免费帐户并尝试它，我对此非常满意.. 它也适用于 iOS 和 windows phone ...我以前使用过 ACRA，但不幸的是，从我的角度来看，谷歌文档并不是一种真正用户友好的体验..

# mysql - 将多个查询与计数和组结合起来

> ID：13501382
> 
> 赞同：0
> 
> 时间：2012-11-21T20:16:42.267
> 
> 标签：mysql

如何将下面的两个 mysql 查询组合成一个查询？

```
SELECT R12NC,  COUNT(*) AS `count1` FROM alink where Option_a = 1 GROUP BY  R12NC
SELECT R12NC,  COUNT(*) AS `count2` FROM alink where Option_x = 1 GROUP BY  R12NC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:18:06.470

通过使用`case`嵌套在聚合函数中的语句：

```
SELECT R12NC,
       sum(case when Option_a = 1 then 1 else 0 end) as `count1`,
       sum(case when Option_x = 1 then 1 else 0 end) as `count2`
FROM alink
GROUP BY  R12NC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:20:12.690

两种方式。如果您只想要两列，请使用 UNION

```
SELECT R12NC,  COUNT(*) AS `count1` FROM alink where Option_a = 1 GROUP BY  R12NC
UNION
SELECT R12NC,  COUNT(*) AS `count2` FROM alink where Option_x = 1 GROUP BY  R12NC 
```

如果您想要 3 列，则类似于：

```
SELECT R12NC, SUM(CASE WHEN Option_a = 1 THEN 1 ELSE 0 END) as `count1`, 
    SUM(CASE WHEN Option_x = 1 THEN 1 ELSE 0 END) as `count2`
FROM alink
GROUP BY  R12NC 
```

# android - 制作图表 - 需要在自己的线程中计算 x 和 y

> ID：13501392
> 
> 赞同：0
> 
> 时间：2012-11-21T20:17:04.763
> 
> 标签：android

所以，我正在制作一个图表。计算 x 和 y 正在完成宽度从 0 到 5000 的 for 循环。加载需要很长时间，所以我想在计算数字时放入它自己的线程和 maby 绘图，而不是绘制何时一切都完成了吗？

我必须归档，Graph.java 接受一个方程并将其发送到 GraphDrawer.java 进行绘图。

图表：[http](http://pastebin.com/tBvr1d03) : //pastebin.com/tBvr1d03图表：http: [//pastebin.com/8ZwUS75u](http://pastebin.com/8ZwUS75u)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:24:06.987

继续阅读`AsyncTask`，它可以满足您的需求。

在 中运行您的计算`doInBackground()`，调用以`publishProgress()`将您的更新发送到 UI 线程，并实施`onProgressUpdate()`以接收这些更新并绘制它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:29:32.587

是的，通常建议在自己的线程中执行慢速操作。主线程被长时间阻塞（很多秒）既不利于用户体验，也可能导致 Android 判定进程遇到问题并提供强制关闭。

但是，您可以/绝对不应该使用在非 UI 线程中生成的图形持续更新 UI，因为从多个线程操作 UI 可能会产生未定义的结果。[有关更多信息，请参见此处](http://developer.android.com/guide/components/processes-and-threads.html)，特别是在“工作线程”下。

# css - 我应该使用哪些 CSS 选择器来设置我的 JSP 的样式。ID 还是类？

> ID：13501393
> 
> 赞同：0
> 
> 时间：2012-11-21T20:17:20.037
> 
> 标签：css, web-services, jsp, coding-style, css-selectors

我想知道的基本问题是在可读性、重用、编码风格等方面首选什么。需要注意的一点是，这个 JSP 可以在页面的多个部分中使用，对于这个天真的例子，让我们说它只是一个 div 需要以某种方式设置样式并多次不同地放置在页面上。

我意识到我可以将这个类外部化为一个共享的 CSS 文件，但是这个类只会被页面的这一部分使用，例如这个盒子是整个产品中唯一需要紫色的盒子，在我认为为了清理我的 JSP 而弄脏共享 CSS 是没有意义的。那么什么更好

## 选项 1（使用 ID 选择器）

```
<% String contextName = request.getParameter("myContext"); %>

<style type="text/css">
    #<%=contextName %>_myDiv
    {
        font-weight: bold;
        background-color: purple;
        height: 20px;
    }
</style>

<div id="<%=contextName %>_myDiv">
    <div>Blah Blah Blah!</div>
</div> 
```

## 选项 2（使用类选择器）

```
<% String contextName = request.getParameter("myContext"); %>

<style type="text/css">
    .<%=contextName %>_myDiv
    {
        font-weight: bold;
        background-color: purple;
        height: 20px;
    }
</style>

<div class="<%=contextName %>_myDiv">
    <div>Blah Blah Blah!</div>
</div> 
```

在我看来，选项 2 会使事情更容易调试，因为它们使用共享类，但是如果页面上有（例如）50 个这样的框，那么它将导致这个类被声明 50 次。这是否会为浏览器带来额外的工作量。或者，如果我使用 ID 选择器方法，那么我会创建 50 个独特的样式，它们执行完全相同的操作，导致浏览器需要额外的工作来匹配所有 ID。

那么什么更好呢？注意：这两种方法都有效，我只是在寻找每种方法的优缺点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:27:03.923

无论如何，您不应该有`style`元素`body`，因此您应该将样式放在样式表中。由于 id 在页面中应该是唯一的，因此您将使用一个类。

如果您不想这样做，那么也没有理由拥有`style`标签。只需将样式放入元素中：

```
<div style="font-weight:bold;background-color:purple;height:20px;">
  <div>Blah Blah Blah!</div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:22:09.907

如果一个样式被使用一次，使用一个`ID`.

如果一个样式被多次使用，请使用`class name`. 该类只需要声明一次，但在使用该类名的任何元素中都可以引用。

多个类名可用于处理“基”类的变体。

通常，您应该使用外部样式表来允许浏览器缓存文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T20:25:36.903

你会想要使用**类**。这是因为您可能在该对象的页面上有多个实例。

***但是***，对于您正在做的事情，最好还是硬编码您的不同样式选项并将它们放在一个 css 文件中。

它不必与其他页面共享，只需将其直接链接到您的给定视图。这也将防止您拥有 50 个重复的一种样式参考。然后只需为该特定对象生成类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T20:45:27.233

您应该检查层次结构。

“ID 是唯一的，Class 不是唯一的”

查看这篇文章 [http://css-tricks.com/the-difference-between-id-and-class/](http://css-tricks.com/the-difference-between-id-and-class/)

# python - 如何正确使用 django 静态文件

> ID：13501394
> 
> 赞同：0
> 
> 时间：2012-11-21T20:17:19.617
> 
> 标签：python, django, stylesheet

我在处理 django 静态文件时遇到问题。

我对如何使用 MEDIA_ROOT、STATIC_ROOT、MEDIA_URL 和 STATIC_URL 感到困惑

我有这样的文件结构（对不起，我不知道如何正确缩进：S）：

```
static/
    css/
    img/
    js/ 
```

例如，如果我的 css 目录中有一个 .css 文件，我该如何访问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:21:21.980

MEDIA_ROOT 和 MEDIA_URL 已弃用。使用 STATIC_ROOT 和 STATIC_URL。

```
STATIC_ROOT = "Absolute path to your static directory" (Example: /home/your_app/static)
STATIC_URL = "/static/" (Could be anything you would like to use) 
```

当您想提供静态内容时，请传递 context_instance 并在您的模板中使用，

```
{{STATIC_URL}}/file_path_from_static_directory/ 
```

编辑：

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns

urlpatterns += staticfiles_urlpatterns() 
```

# android - 请问为什么我会收到错误“SQLiteException：没有这样的表：tabella（code1）？

> ID：13501399
> 
> 赞同：1
> 
> 时间：2012-11-21T20:17:30.133
> 
> 标签：android, sql, database, sqlite, android-sqlite

请问为什么我会收到错误“SQLiteException：没有这样的表：tabella（code1）？？？

当我尝试从活动访问数据库时，从 LogCat 我得到：“SQLiteException：没有这样的表：tabella (code1)”。

这是 SQLiteOpenHelper 代码：

```
public class DatabaseHelper extends SQLiteOpenHelper {
    private static final String CREATE_DB_SQL = "CREATE TABLE tabella (_id INTEGER     PRIMARY KEY AUTOINCREMENT, colonna1 TEXT, colonna2 TEXT, colonna3 TEXT);";
    public DatabaseHelper(Context context) {
    super(context, "basedati", null, 1);
    }

    @Override
public void onCreate(SQLiteDatabase db) {

        db.execSQL(CREATE_DB_SQL);
        ContentValues cv = new ContentValues (3);
        cv.put("colonna1", "valore colonna 1");
        cv.put("colonna2", "valore colonna 3");
        cv.put("colonna3", "valore colonna 3");
        db.insert("tabella", "colonna1", cv);
}

@Override
    public void onUpgrade(SQLiteDatabase db, int arg1, int arg2) {
        db.execSQL("DROP TABLE IF EXISTS tabella");
        onCreate(db);   
    }
} 
```

这是我尝试打开数据库的活动代码：

```
public class MainActivity extends Activity {
    private DatabaseHelper db=null;
    private Cursor constantsCursor=null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        db = new DatabaseHelper(this);

        constantsCursor=db.getReadableDatabase().rawQuery("SELECT colonna1 FROM  tabella ORDER BY colonna1", null);
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:19:14.767

很可能您在运行应用程序至少一次后更改了表格。您不能简单地更改 Java String `CREATE_DB_SQL`，还必须更新 SQL 模式。最简单的方法是增加版本号：

```
public DatabaseHelper(Context context) {
    super(context, "basedati", null, 2); // Change the number to two 
} 
```

# c# - 在 .NET（非 MVC）中访问数据的最佳实践

> ID：13501408
> 
> 赞同：5
> 
> 时间：2012-11-21T20:18:02.473
> 
> 标签：c#, asp.net, .net

我正在使用 .NET 3.5，并查看其他人完成的旧代码并尝试添加安全性并对其进行更新。

在 Web 表单项目中访问数据的最佳实践是什么？

目前我正在更改代码以使用 SQL 参数化，如下所示：

```
using (SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings[ConfigurationManager.AppSettings["defaultConnection"]].ConnectionString))
{
    using (SqlCommand myCommand = new SqlCommand(sql.ToString(), conn))
    {
        myCommand.Parameters.AddWithValue("search1", mySearchVar);
        ... 
```

我知道 SQL 参数化很重要，但我看到其他人使用存储过程？他们是其他方式，最佳实践吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T20:27:09.377

如果它不仅仅是小型重构，并且您有时间重写数据访问层，请使用一些[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)：

[休眠](http://nhforge.org/)

[实体框架](http://msdn.microsoft.com/en-us/data/ef.aspx)

[Dapper.NET](http://code.google.com/p/dapper-dot-net/) (Stackoverflow ORM)

[BL工具包](http://bltoolkit.net/default.aspx?AspxAutoDetectCookieSupport=1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T21:23:51.257

使用 ADO.NET 没有任何问题。它是 .NET 中所有 ORM 解决方案的驱动力。

然而，.NET 开发人员似乎正在成群结队地加入 ORM 潮流。ORM 只是数据访问工具箱中的众多工具之一。

在 2000 年代初期，ORM 席卷了 Java 世界。避免了存储程序。要么是 ORM，要么什么都没有。五年后，Java 开发人员意识到最好的解决方案同时使用 ORM 和存储过程，两者各有千秋。

使用最好的工具来完成这项工作。ORM 可以自动化应用程序中的大部分 CRUD。存储过程有利于添加抽象、添加安全层和优化需要高性能的区域。

选择最适合工作的工具。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-21T20:25:11.330

实体框架是一种“最佳实践”，也是微软最推崇的一种。但是没有最好的数据访问方法。

在对 EF 和其他 ORM 的性能进行了一些糟糕的体验之后，我通常会完全避开它们，而只是手工制作数据访问代码或使用代码生成工具来输出为特定应用程序制作的代码。

另一方面，有很多不好的做法，你通过转向参数化来避免一个关键的做法。

就个人而言，我现在在存储过程中看不到任何意义，除非您要完全使用它们 - 即防止在存储过程之外进行任何数据修改。如果是这种情况，它可以让您对可能对您的数据进行的修改类型感到满意。

所以这并不是一个真正的答案——因为真的没有答案——你的问题引发了一个巨大的讨论话题。是时候买些书了，或者忙于 Google。

# ios - 无法检索 Shoutcast .pls 流

> ID：13501412
> 
> 赞同：4
> 
> 时间：2012-11-21T20:18:21.327
> 
> 标签：ios, objective-c, shoutcast

我正在尝试从广播服务器获取 .pls 流以在我的 ios 应用程序中播放。到目前为止，我一直没有成功。我在 stackoverflow 上发布了很多帖子，但这些帖子都没有任何帮助。

任何人都可以向我解释，如果可能的话，如何让 .pls 流式传输？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T21:10:38.170

您只需要列出收音机的端口，这是一个工作示例：in - (void)viewDidLoad

```
NSURL *vibes = [NSURL URLWithString:@"http://website.com:8002"];
vPlayer = [[AVPlayer alloc] initWithURL:vibes];
self.myViewVolume = [[MPVolumeView alloc] initWithFrame:CGRectMake(20, 330, 280, 50)];
[self.myViewVolume sizeToFit];
[self.view addSubview:self.myViewVolume]; 
```

你需要在你的 .m 文件中创建一个 AVPlayer 的实例，这里是 vPlayer 不要忘记将 AVFoundation 框架添加到你的项目中，你可以使用 [player play] 和 [player stop] 播放和停止流

AVPlayer 的一个问题是缺乏简单的音量控制，您可以使用 mpViewVolume 添加一个。我也在开发广播应用程序，到目前为止，AVPlayer 是播放广播流的最佳选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-18T21:30:21.207

@Walid Hussain 它使用 AVPlayer 对我有用

与**AVFoundation.framework链接**

```
//import needed
#import <AVFoundation/AVFoundation.h>

// declaration for the player  
AVPlayer * radioPlayer;

// play
NSURL * url = [NSURL URLWithString:@"http://energy10.egihosting.com:9636"];
radioPlayer = [[AVPlayer playerWithURL:url] retain];
[radioPlayer play]; 
```

# c++ - 此代码会导致内存泄漏问题吗？

> ID：13501415
> 
> 赞同：2
> 
> 时间：2012-11-21T20:18:31.630
> 
> 标签：c++, visual-c++

考虑下面的代码，如果我使用这样的`Die`类实例会发生什么：

```
Die d;
d.Roll(20);
d.Roll(15);
d.Roll(30); 
```

在再次为其分配内存之前，我应该还是不应该释放值占用的内存？`delete[ ]`以前`new`？

**死.h**

```
#ifndef DIE_H
#define DIE_H
#include<iostream>
#include<time.h>
using namespace std;

class Die
{
private:
    int number;
    int* values;
    int count;
    void roll();
public:
    Die(){srand(static_cast<int>(time(NULL)));number=0;values=NULL;count=0;}
    void Roll(int n);
    int getNumber()const{return number;}
    void printLastValue();
    void printValues();
    ~Die(){delete [] values;}

};

#endif 
```

**死.cpp**

```
#include"die.h"
#include<iostream>
#include<time.h>
using namespace std;

void Die::roll()
{

    number=1+rand()%6;
}

void Die::printLastValue()
{
    cout<<number<<endl;
}

void Die::Roll(int n)
{
    count=n;
    values=new int[count];
    for(int i=0;i<count;i++)
    {
        roll();
        values[i]=number;
    }

}
void Die::printValues()
{
    for(int i=0;i<count;i++)
    {
        cout<<values[i]<<endl;
    }
} 
```

**主文件**

```
#include"die.h"
#include<iostream>
using namespace std;

int main()
{
    Die d;
    d.Roll(25);
    d.printValues();
    d.Roll(40);
    d.printValues();
    d.Roll(100);
    d.printValues();
    d.printLastValue();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T20:21:22.467

是的，如果您`Roll`多次调用，这将导致内存泄漏。您应该检查值是否存在，如果不是则`NULL`调用。`delete []`

编辑：
如下所述，您不必检查 null，您可以安全地在空指针上调用 delete。这只是我过去工作的公司标准中根深蒂固的习惯。

您应该考虑使用 a`std::vector`而不是数组。通过这样做，您将消除内存泄漏的危险，并且不再需要显式定义析构函数。你可以`values`用这个替换你的：

```
std::vector<int> values; 
```

然后在你的 Roll 代码中你可以这样做：

```
void Die::Roll(int n) {
    count=n;
    values.clear();
    for(int i=0;i<count;i++)
    {
        roll();
        values.push_back(number);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T20:21:32.120

您肯定需要删除它们，因为您正在重新分配 Die::values，从而导致内存泄漏。

编辑：在这种情况下，使用 std::vector 比使用原始数组更好。然后你不需要删除任何东西，只需在 Die::Roll 的开头调用 std::vector::clear 即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T20:23:52.777

是的，它会泄漏内存。当你这样做

值 = 新的 int [len];

它使用数组分配新内存并将值指向新的内存位置。旧内存位置仍然包含旧数据，在分配新数据之前需要删除这些旧数据。

# html - HTML：设置 4 作为背景

> ID：13501419
> 
> 赞同：2
> 
> 时间：2012-11-21T20:18:50.570
> 
> 标签：html, css

我有一个布局，这是我的 css：

```
body {
    background-color: #16193B; /* Old browsers */
    margin: 0;
    padding: 0;
    color: white;
    background-attachment: fixed;
    overflow: hidden; 
}

html {
    min-height: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    background-attachment: fixed;
}

#content {
    width: 80%;
    height: 1000px;
    margin: 0 auto;
    background-color: #ADD5F7;
    overflow : hidden;
}

#wrap div{
    height:100%;
    width:100%;
}

#b1 {
    width: 80%;
    height: 1000px;
    margin: 0 auto;
    background-color: #35478C;
    position:relative;
}

#b2 {
    width: 90%;
    height: 1000px;
    margin: 0 auto;
    background-color: #4E7AC7;
    position:relative;
}

#b3 {
    width: 90%;
    height: 1000px;
    margin: 0 auto;
    background-color: #7FB2F0;
    position:relative;
}

#b4 {
    width: 90%;
    height: 1000px;
    margin: 0 auto;
    background-color: #ADD5F7;
    overflow : auto;
    position:relative;
} 
```

这就是 HTML 文件的正文：

```
 <div id="b1">

        <div id="b2">
            <div id="b3">
                <div id="b4">
                    <div id="content">

                    </div>
                </div>
            </div>
        </div>

    </div> 
```

这是我的布局，但它应该只是页面的背景......不幸的是，如果我将文本添加到其他一些 div 然后“内容”矩形覆盖其他。我怎样才能解决这个问题？实际上我想要一个菜单​​栏，它是顶部的“层”并覆盖在它下面......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T20:44:23.063

好的，在您查看我的 jsFiddle-Solution 之前：

1.  请注意，将 div 用于此类背景并不是一个很好的解决方案。最好在您的身体标签上使用背景图像，您可以使用背景尺寸进行拉伸。所有现代浏览器都支持它。唯一的问题是 IE8 及以下版本。

2.  你的 CSS 是一团糟。当对具有相似属性的元素进行样式设置时，请使用类而不是单独设置每个 ID 的样式。

我基本上用你的自定义内容和你的背景 div 上的一个类创建了一个新的 div。我还必须清理你的 CSS 并删除不必要的语句：

-> **[jsFiddle](http://jsfiddle.net/fymyQ/)** <-

HTML：

```
<div  class="centerIt" id="b1">
    <div  class="centerIt" id="b2">
        <div  class="centerIt" id="b3">
            <div  class="centerIt" id="b4">
                <div id="content"></div>
            </div>
        </div>
    </div>
</div>
<div id="contentContainer">
    <div>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quisquam excepturi laboriosam illum esse voluptas libero aperiam voluptate omnis dolor odio natus tempore sunt doloribus. Suscipit iure vel totam eius reprehenderit.</div>
</div> 
```

​ CSS：

```
.centerIt {
    position: relative;
    margin-left: auto;
    margin-right: auto;    
} 
```

# java - Java Lucene 停用词过滤器

> ID：13501421
> 
> 赞同：0
> 
> 时间：2012-11-21T20:18:57.887
> 
> 标签：java, filter, lucene, words

我有大约 500 个句子，我想在其中编译一组 ngram。我无法删除停用词。我尝试添加 lucene StandardFilter 和 StopFilter 但我仍然遇到同样的问题。这是我的代码：

```
for(String curS: Sentences)
{
          reader = new StringReader(curS);
          tokenizer = new StandardTokenizer(Version.LUCENE_36, reader);
          tokenizer = new StandardFilter(Version.LUCENE_36, tokenizer);
          tokenizer = new StopFilter(Version.LUCENE_36, tokenizer, stopWords);
          tokenizer = new ShingleFilter(tokenizer, 2, 3);
          charTermAttribute = tokenizer.addAttribute(CharTermAttribute.class);

    while(tokenizer.incrementToken())
    {
        curNGram = charTermAttribute.toString().toString();
        nGrams.add(curNGram);                   //store each token into an ArrayList
    }
} 
```

例如，我要测试的第一个短语是：“对于每个倾听的人”。在此示例中，curNgram 设置为“For”，这是我的列表 stopWords 中的停用词。此外，在此示例中，“every”是停用词，因此“person”应该是第一个 ngram。

1.  当我使用 StopFiler 时，为什么停用词会添加到我的列表中？

感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T22:28:53.107

你发布的内容对我来说看起来不错，所以我怀疑 stopWords 没有向过滤器提供你想要的信息。

尝试类似：

```
//Let's say we read the stop words into an array list (A simple array, or any list implementation should be fine)
List<String> words = new ArrayList();
//Read the file into words.
Set stopWords = StopFilter.makeStopSet(Version.LUCENE_36, words, true); 
```

假设您生成的停用词列表（我将其命名为“单词”）看起来像您认为的那样，这应该将它们放入 StopFilter 可用的格式。

你已经在生成这样的 stopWords 了吗？

# android - FragmentPagerAdapter 仅存在于 Android.Support.V4.App（而不是 Android.App）中

> ID：13501424
> 
> 赞同：164
> 
> 时间：2012-11-21T20:19:11.350
> 
> 标签：android, android-fragments, xamarin.android, fragmentpageradapter

我在 Android.App 中找不到 FragmentPagerAdapter。

我不想使用 Android.Support.V4.App 中的 Fragment，因为我的目标 API 是 14 及更高版本（Android 4.0 及更高版本）。所以，我只想使用普通的 Android.App.Fragments，以及相关的类。

我只在 Android.Support.V4.App 中找到了它，但这对我来说还不够 b/c 我正在尝试使用 Android.App.Fragment 的（不是 Android.Support.V4.App.Fragment 的）并且在那里Android.App（不是Android.Support.V4.App）中的相关类，如果我从支持库中派生我的分页器，我的代码将无法编译，因为Android.App和Android.Support之间的类型不匹配.V4.App。

就像这里的情况[不能转换为 android.app.Fragment](https://stackoverflow.com/questions/10383247/cannot-be-cast-to-android-app-fragment)一样，是否有一个“普通”寻呼机（PagerAdapter）类我应该用来代替 FragmentPagerAdapter 或其他东西（就像你从普通 Activity 派生，而不是从 FragmentActivity 派生一样，面向 API 11 或更高版本时）。

这是我正在使用的示例代码（它是来自[https://github.com/xamarin/monodroid-samples/tree/master/Support4](https://github.com/xamarin/monodroid-samples/tree/master/Support4)的 MonoDroid 示例的 Support4.sln 解决方案中的 FragmentPagerSupport.cs 文件）。

我已经注释掉了引用 Android.Support.V4.App 的行并将它们替换为引用 Android.App 的代码。Android.Support.V4.App 之外没有我能找到的 FramePagerAdapter，我真的需要它）。

谢谢。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using Android.App;
using Android.Content;
using Android.OS;
using Android.Runtime;
using Android.Views;
using Android.Widget;
//using Android.Support.V4.App;
//using Android.Support.V4.View;

namespace Support4
{
    [Activity (Label = "@string/fragment_pager_support")]
    [IntentFilter (new[]{Intent.ActionMain}, Categories = new[]{ "mono.support4demo.sample" })]
    //public class FragmentPagerSupport : FragmentActivity
        public class FragmentPagerSupport : Activity
    {
        const int NUM_ITEMS = 10;
        MyAdapter adapter;
        ViewPager pager;

        protected override void OnCreate (Bundle bundle)
        {
            base.OnCreate (bundle);

            SetContentView(Resource.Layout.fragment_pager);

            //adapter = new MyAdapter(SupportFragmentManager);
                        adapter = new MyAdapter(FragmentManager);

            pager = FindViewById<ViewPager>(Resource.Id.pager);
            pager.Adapter = adapter;

            var button = FindViewById<Button>(Resource.Id.goto_first);
            button.Click += (sender, e) => {
                pager.CurrentItem = 0;  
            };
            button = FindViewById<Button>(Resource.Id.goto_last);
            button.Click += (sender, e) => {
                pager.CurrentItem = NUM_ITEMS - 1;
            };
        }

                // ?????????????????????????????????????????????????
                // - where is FragmentPagerAdapter 
                // ?????????????????????????????????????????????????

        protected class MyAdapter : FragmentPagerAdapter 
        {
            public MyAdapter(FragmentManager fm) : base(fm)
            {
            }

            public override int Count {
                get {
                    return NUM_ITEMS;
                }
            }

            public override Fragment GetItem (int position)
            {
                return new ArrayListFragment(position);
            }

        }

        protected class ArrayListFragment : ListFragment
        {
            int num;

            public ArrayListFragment()
            {
            }

            public ArrayListFragment(int num)
            {
                var args = new Bundle();
                args.PutInt("num", num);
                Arguments = args;
            }

            public override void OnCreate (Bundle p0)
            {
                base.OnCreate (p0);

                num = Arguments != null ? Arguments.GetInt("num") : 1;
            }

            public override View OnCreateView (LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
            {
                var v = inflater.Inflate(Resource.Layout.fragment_pager_list, container, false);
                var tv = v.FindViewById<TextView>(Resource.Id.text);
                tv.Text = "Fragment #" + num;
                return v;
            }

            public override void OnActivityCreated (Bundle p0)
            {
                base.OnActivityCreated (p0);

                ListAdapter = new ArrayAdapter<string>(Activity, Android.Resource.Layout.SimpleListItem1, Cheeses.cheeseStrings);
            }

            public override void OnListItemClick(ListView l, View v, int position, long id) {
                Console.WriteLine ( "Item clicked: " + id);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2012-11-21T20:25:11.407

里面有一个[`android.support.v13.app.FragmentPagerAdapter`](http://developer.android.com/reference/android/support/v13/app/FragmentPagerAdapter.html)，它应该做你想做的事。它是不支持 Fragment 的 FragmentPagerAdapter。

**安卓工作室安装**

请添加关注 Gradle 依赖项

```
dependencies {
    compile 'com.android.support:support-v13:+'
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-26T14:53:09.343

呃，你只需要使用 V13 支持库中的 FragmentPagerAdapter

```
Android.Support.V13.App.FragmentPagerAdapter 
```

然后可以从“普通”库/命名空间中使用所有其他与 Fragment 相关的类，ViewPager 除外，但这没什么大不了的。

* * *

这是一个完整性示例（来自[https://github.com/xamarin/monodroid-samples/](https://github.com/xamarin/monodroid-samples/)的修改“Support4”示例）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using Android.App;
using Android.Content;
using Android.OS;
using Android.Runtime;
using Android.Util;
using Android.Views;
using Android.Widget;

using Java.Lang;

using Android.Support.V4.View;
using Fragment = Android.App.Fragment;

namespace Support4
{
    [Activity (Label = "@string/fragment_pager_support")]
    [IntentFilter (new[]{Intent.ActionMain}, Categories = new[]{ "mono.support4demo.sample" })]
    public class FragmentPagerSupport : Activity
    //public class FragmentPagerSupport : FragmentActivity
    {
        const int NUM_ITEMS = 4;

        protected MyAdapter _pagerAdapter;
        protected ViewPager _viewPager;

        protected override void OnCreate (Bundle bundle)
        {
            base.OnCreate (bundle);

            SetContentView(Resource.Layout.fragment_pager);

            List<Fragment> fragments = new List<Fragment>();

            // *** MonoDroid 4.2.7 letter case bug *** make's first letter lower.

            //string typeName = typeof(Fragment1).FullName;
            string typeName = "support4." + typeof(Fragment1).Name;

            fragments.Add(Fragment.Instantiate(this, typeName));
            fragments.Add(Fragment.Instantiate(this, typeName));
            fragments.Add(Fragment.Instantiate(this, typeName));
            fragments.Add(Fragment.Instantiate(this, typeName));

            //adapter = new MyAdapter(SupportFragmentManager);
            _pagerAdapter = new MyAdapter(FragmentManager, fragments);

            _viewPager = FindViewById<ViewPager>(Resource.Id.view_pager);
            _viewPager.Adapter = _pagerAdapter;
        }

        public override bool OnTouchEvent(MotionEvent e)
        {
            return base.OnTouchEvent(e);
        }

        protected class MyAdapter : Android.Support.V13.App.FragmentPagerAdapter
        {
            private List<Fragment> _fragments;

            public override Java.Lang.Object  InstantiateItem(View p0, int p1)
            {
                return base.InstantiateItem(p0, p1);
            }

            public MyAdapter(Android.App.FragmentManager fm)
                : base(fm)
            {

            }

            //public MyAdapter(Android.Support.V4.App.FragmentManager fm, List<Android.Support.V4.App.Fragment> fragments)
            //    : base(fm)
            public MyAdapter(FragmentManager fm, List<Fragment> fragments)
                : base(fm)
            {
                _fragments = fragments;
            }

            public override int Count {
                get {
                    return NUM_ITEMS;
                }
            }

            //public override Android.Support.V4.App.Fragment GetItem(int p0)
            public override Fragment GetItem(int p0)
            {
                return _fragments[p0];
            }

            public override float GetPageWidth(int p0)
            {
                //return base.GetPageWidth(p0);
                //base.GetPageWidth(p0);

                return (float)(0.5f);
            }
        }
    }

    //public class Fragment1 : Android.Support.V4.App.Fragment
    public class Fragment1 : Fragment
    {
        int num;

        private static int _colorIndex = 0;
        private static Android.Graphics.Color[] _colors = new[] { Android.Graphics.Color.Aqua, Android.Graphics.Color.DarkViolet,
        Android.Graphics.Color.Coral, Android.Graphics.Color.Bisque};

        public Fragment1()
        {
        }

        public Fragment1(int num)
        {
            var args = new Bundle();
            args.PutInt("num", num);
            Arguments = args;
        }

        public override void OnCreate(Bundle p0)
        {
            base.OnCreate(p0);

            num = Arguments != null ? Arguments.GetInt("num") : 1;
        }

        public override View OnCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
        {
            View v = inflater.Inflate(Resource.Layout.aaaaa, container, false);

            TextView tv = v.FindViewById<TextView>(Resource.Id.text);
            tv.Text = "# " + _colorIndex;
            tv.SetBackgroundColor(_colors[_colorIndex++]);

            return v;
        }

        public override void OnActivityCreated(Bundle p0)
        {
            base.OnActivityCreated(p0);
        }
    }
} 
```

* * *

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (C) 2010 The Android Open Source Project

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->

<!-- Top-level content view for the simple fragment sample. -->

<LinearLayout 
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="horizontal" android:padding="4dip"
  android:layout_width="match_parent" android:layout_height="match_parent">
  <!--android:gravity="center_horizontal"-->

  <android.support.v4.view.ViewPager
    android:id="@+id/view_pager"
    android:layout_width="700dip"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:background="#FFCCFFFF">

    <!--android:layout_width="match_parent"-->
  </android.support.v4.view.ViewPager>

</LinearLayout> 
```

* * *

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/screen_container"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

  <TextView android:id="@+id/text"
      android:layout_width="match_parent" android:layout_height="match_parent"
      android:gravity="center_vertical|center_horizontal"
      android:textAppearance="?android:attr/textAppearanceMedium"
      android:text="@string/hello_world"
      android:background="#FF335555"/>

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-25T12:04:32.303

将此依赖项添加到 gradle 依赖项中：

```
compile 'com.android.support:support-v13:+' 
```

并且[`android.support.v13.app.FragmentPagerAdapter`](http://developer.android.com/reference/android/support/v13/app/FragmentPagerAdapter.html)这样使用（我只是在android studio中修改了官方demo项目：文件→新建→新建项目→下一个→下一个→选项卡式活动→下一个→完成）：

```
import android.app.Fragment;
import android.app.FragmentManager;
import android.support.v13.app.FragmentPagerAdapter;
import com.google.android.gms.maps.MapFragment;

/** A simple FragmentPagerAdapter that returns a MapFragment and a PreferenceFragment. */
public class MainActivityAdapter extends FragmentPagerAdapter {

    private MapFragment mapFragment;
    private PreferencesFragment preferencesFragment;

    public MainActivityAdapter(FragmentManager fm) {
        super(fm);
        mapFragment = MapFragment.newInstance();
        preferencesFragment = new PreferencesFragment();
    }

    @Override
    public int getCount() {
        return 2;
    }

    @Override
    public Fragment getItem(int position) {
        switch (position) {
            case 0:
                return mapFragment;
            case 1:
                return preferencesFragment;
            default:
                return null;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-14T13:16:16.083

根据 2019 年使用 AndroidX

```
implementation 'androidx.legacy:legacy-support-v13:1.0.0'
implementation 'androidx.viewpager:viewpager:1.0.0' 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-09-20T10:14:39.583

有同样的问题。我的解决方案是从android.support.v4.app.FragmentPagerAdapter 中复制代码，然后将导入的Fragment 类更改为android.app.Fragment。然后做其他小的修改以消除所有错误。令我惊讶的是，它完美地工作。IMO 这比添加您并不真正需要的支持库更简单。

```
import android.app.Fragment;
import android.app.FragmentManager;
import android.app.FragmentTransaction;
import android.os.Parcelable;
import android.support.v4.view.PagerAdapter;
import android.view.View;
import android.view.ViewGroup;

/**
 * PagerAdapter for ViewPager that is compatible with android.app.Fragment.
 */
abstract class FragmentPagerAdapter extends PagerAdapter {

    private final FragmentManager mFragmentManager;
    private FragmentTransaction mCurTransaction = null;
    private Fragment mCurrentPrimaryItem = null;

    /**
     * Returns a unique id for the fragment on the given position.
     * For example this can be the view id that is used on the page's fragment.
     * @param position The page index
     * @return An id that is unique with respect to the pages in the adapter.
     */
    abstract long getItemId(int position);

    /**
     * Returns the fragment for the given page index.
     * @param position The page index
     * @return The fragment
     */
    abstract Fragment getItem(int position);

    public FragmentPagerAdapter(FragmentManager fragmentManager) {
        super();
        mFragmentManager = fragmentManager;
    }

    @Override
    public Object instantiateItem(ViewGroup container, int position) {
        if (mCurTransaction == null) {
            mCurTransaction = mFragmentManager.beginTransaction();
        }

        final long itemId = getItemId(position);

        // Do we already have this fragment?
        String name = makeFragmentName(container.getId(), itemId);
        Fragment fragment = mFragmentManager.findFragmentByTag(name);
        if (fragment != null) {
            mCurTransaction.attach(fragment);
        } else {
            fragment = getItem(position);
            mCurTransaction.add(container.getId(), fragment,
                    makeFragmentName(container.getId(), itemId));
        }
        if (fragment != mCurrentPrimaryItem) {
            fragment.setMenuVisibility(false);
        }

        return fragment;
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        if (mCurTransaction == null) {
            mCurTransaction = mFragmentManager.beginTransaction();
        }
        mCurTransaction.detach((Fragment) object);
    }

    @SuppressWarnings("ReferenceEquality")
    @Override
    public void setPrimaryItem(ViewGroup container, int position, Object object) {
        Fragment fragment = (Fragment)object;
        if (fragment != mCurrentPrimaryItem) {
            if (mCurrentPrimaryItem != null) {
                mCurrentPrimaryItem.setMenuVisibility(false);
            }
            if (fragment != null) {
                fragment.setMenuVisibility(true);
            }
            mCurrentPrimaryItem = fragment;
        }
    }

    @Override
    public void finishUpdate(ViewGroup container) {
        if (mCurTransaction != null) {
            mCurTransaction.commitAllowingStateLoss();
            mCurTransaction = null;
        }
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return ((Fragment)object).getView() == view;
    }

    @Override
    public Parcelable saveState() {
        return null;
    }

    @Override
    public void restoreState(Parcelable state, ClassLoader loader) {
    }

    private static String makeFragmentName(int viewId, long id) {
        return "android:switcher:" + viewId + ":" + id;
    }
} 
```

# cloud - AngularJS：gapi 客户端获取的数据未显示在 UI 上

> ID：13501429
> 
> 赞同：1
> 
> 时间：2012-11-21T20:19:26.433
> 
> 标签：cloud, angularjs, endpoints

我有一个角度 js 应用程序。我正在使用 gapi 登录，然后调用我的谷歌云端点来获取数据。登录的东西工作正常，它也可以从端点获取数据。

但是在它获取数据之后，如果我将数据分配给一个`$scope`变量（绑定到 UI），它不会更新 UI。甚至没有错误。下面是我的代码片段。有任何想法吗？

```
function TestCtrl($scope){
   $scope.contactsList = [];//UI template is bound to this list
//Assuming the gapi client is already loaded
gapi.client.contactendpoint.list().execute(function(resp) {
            if (!resp.code) {
                $scope.contactsList = resp.items;//Does not update ui list
            } else {
                alert("Error, response is: "
                    + angular.toJson(resp));
            }
        });
} 
```

问候， 纳迪姆·乌拉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T20:30:33.720

如果您希望从 Angular 框架之外（例如从浏览器 DOM 事件、setTimeout、XHR 或第三方库）更新范围，则需要使用 $apply()。更多信息可在[http://docs.angularjs.org/api/ng.$ro​​otScope.Scope 获得](http://docs.angularjs.org/api/ng.%24rootScope.Scope)。

```
function TestCtrl($scope){
   $scope.contactsList = [];//UI template is bound to this list
   //Assuming the gapi client is already loaded
   gapi.client.contactendpoint.list().execute(function(resp) {
     if (!resp.code) {

       $scope.$apply(function(scope) {
         scope.contactsList = resp.items;
       });

     } else {
       alert("Error, response is: " + angular.toJson(resp));
     }
  });
} 
```

# node.js - 为续集自动生成模型

> ID：13501431
> 
> 赞同：24
> 
> 时间：2012-11-21T20:19:28.287
> 
> 标签：node.js, sequelize.js

我想开始使用 Sequelize，这是一个允许在 node.js 中为 mysql 进行 ORM 的模块。我想知道是否可以像 CakePHP 那样自动生成模型。在 CakePHP 中，它将读取表的信息，并自动在模型中创建关联和字段及其类型。我真的很讨厌必须手工完全绘制出我所有的表格，因为有些表格相对较大。有什么东西可以为我做这件事吗？还是我一个人将所有模型都手动打出来？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-08-04T18:18:16.680

您可以通过 sequelize-auto 自动生成模型。只需点击以下链接 [https://github.com/sequelize/sequelize-auto](https://github.com/sequelize/sequelize-auto)

它将生成您的表格模型。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-12-23T03:02:25.007

现在您可以使用[sequelize-automate 自动](https://www.npmjs.com/package/sequelize-automate)生成模型。`sequelize-auto`好像很久没维护了，包已经过时了。

```
$ npm install sequelize-automate
$ ./node_modules/.bin/sequelize-automate --help 
```

例如：

```
$ ./node_modules/.bin/sequelize-automate -t js -h localhost -d test -u root -p root -o models 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-06-12T19:21:44.753

Sequelizer - 一个桌面应用程序，用于自动和可视地导出续集模型。

使用 ElectronJS 制作的令人印象深刻的 GUI 客户端，请点击此处：来源：[https ://github.com/andyforever/sequelizer](https://github.com/andyforever/sequelizer)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-09-19T18:03:25.113

您可以为每个模型使用[同步](http://docs.sequelizejs.com/class/lib/model.js~Model.html#static-method-sync)方法

例子：

```
Object.keys(db).forEach((modelName) => {
    db[modelName].sync().then(result => {
       // some logic
    }).catch(err => {
       // some logic
    })
}); 
```

如果表不存在，逻辑将创建一个新表

完整脚本`index.js`

```
'use strict';
const fs        = require("fs");
const path      = require("path");
const Sequelize = require("sequelize");

const sequelize = new Sequelize(process.env.DB_DATEBASE, process.env.DB_USER, process.env.DB_PASS, {
    host: process.env.DB_HOST,
    port: process.env.DB_PORT,
    dialect: 'mysql',
    operatorsAliases: false
});

const db = {};

fs
  .readdirSync(__dirname)
  .filter((file) => {
    return (file.indexOf(".") !== 0) && (file !== "index.js") && (file !== "migrations") && (file !== "redshift-migrations");
  })
  .forEach((file) => {
    const model = sequelize.import(path.join(__dirname, file));
    db[model.name] = model;
  });

Object.keys(db).forEach((modelName) => {
  if ("associate" in db[modelName]) {
    db[modelName].associate(db);
  }

  db[modelName].sync().then(result => {
    // some logic
  }).catch(err => {
    // some logic
  })
});

db.sequelize = sequelize;
db.Sequelize = Sequelize;

module.exports = db; 
```

该脚本获取给定目录中的所有文件（模型），您将在其中放置 index.js 文件

结构如下所示：

[![结构体](../Images/3714e572012a0f29932d1068a0b01de9.png)](https://i.stack.imgur.com/MnUtn.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T07:05:06.533

见[https://github.com/sequelize/sequelize/issues/339](https://github.com/sequelize/sequelize/issues/339)

Sequelize 提供了读取数据库现有表名的方法。此外，还有一种读取表结构的方法。结合起来，应该可以自动创建模型。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-25T10:06:04.783

使用 npm install --save-dev sequelize-cli

使用 npm install --save-dev sequelize-auto

npx sequelize-auto -o "./database/models" -d -h localhost -u root -p 3306 -x '' -e mysql

# python - 展开 url django 模式

> ID：13501432
> 
> 赞同：0
> 
> 时间：2012-11-21T20:19:35.157
> 
> 标签：python, django, sitemap, url-pattern

我有标准的 django 1.4 url​​ 模式：

```
urlpatterns = patterns('',  
    url('^',include('events.urls')),
    url(r'^$', home, {'template_name':'index.html','mod':None}, name='home'),
    url(r'^contact$',contact, {'template_name':'index.html',
        'mod':'contacto'},name='contact'),
    url('^task/(?P<task_id>[\w+-]+)',celery_tasks,name='tasks'),
) 
```

我想构建我的 sitemap.xml 忽略一些 url，例如 /task url 不应该出现（这对网络蜘蛛没有意义）。我的策略是将所有 url 模式传递给我的 Sitemap 类，就像这样

```
from sitemaps import EventsSitemap, StaticSitemap

sitemaps = {
    'Events': CandidateSiteMap,
    'static': StaticSitemap(urlpatterns),
} 
```

如您所见，我正在将模式传递给班级，因此我以后可以像这样过滤网址

```
class StaticSitemap(Sitemap):

    def __init__(self, patterns):
        self.patterns = patterns
        self._items = {}
        self._initialize()

    def _initialize(self):
        do_not_show = ['tasks']
        for p in self.patterns:
            # no dynamic urls in this class (we handle those separately)
            if not p.regex.groups:
                if getattr(p,'name',False) and p.name not in do_not_show:
                   self._items[p.name] = self._get_modification_date(p) 
```

所以我保留了这个 do_not_show url 名称列表，这就是我过滤掉 url 的方式，到目前为止一切都很好，问题在于包含的 url，例如：

```
url('^',include('events.urls')), 
```

我不能只迭代 self.patterns 并获取包含的 url，我必须先扩展它们，这是我的问题，我该怎么做？我怎样才能获得一个平面的 url 列表，就好像没有包含的一样，所有这些都在一个 urls 模块上。

任何在 sitemaps.xml 中过滤掉 url 的建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:11:41.290

好的，我必须回答我自己的问题，因为我解决了它，我所做的是一个小功能来扩展这样的模式

```
def expand_patterns(patterns):
    new_patterns = []
    def recursive_expand(patterns):
        for p in patterns:
            if getattr(p,'url_patterns',False):
                recursive_expand(p.url_patterns)
            else:
                new_patterns.append(p)
    recursive_expand(patterns)
    return new_patterns 
```

这会将 urlpatterns 扁平化为一个列表。所以现在我可以使用 self.patterns 过滤掉我的站点地图类中的任何内容:)

# c# - LINQ 实体在运行时构建查询“参数不在范围内。” LinqKit

> ID：13501437
> 
> 赞同：2
> 
> 时间：2012-11-21T20:19:51.243
> 
> 标签：c#, linq, linqkit

我正在使用 LinqKit (http://www.albahari.com/nutshell/linqkit.aspx)

**有没有办法让下面的代码工作而不必定义一个具体的类？**

尝试使用 LINQ to Entities 构建强类型动态查询。

我收到`The parameter 'o' is not in scope.`错误。

在某些情况下。

```
void Main()
{   
    var lquery = from a in Foo select new { Bar = a.Baz }; // <-- error like this
    //var lquery = from a in Foo select new stuff { Bar = a.Baz }; // <-- here no error
    test("Case", lquery, o => o.Bar).Dump();
}

class stuff { public string Bar {get; set;} }

IQueryable<T> test<T>(string val, IQueryable<T> qry, Expression<Func<T, string>> selector){
    var ex = selector.Expand();
    var b = from c in qry.AsExpandable()
            where ex.Invoke(c).Contains(val)
            select c;
    return b;
} 
```

似乎当使用匿名类`test()`时会抛出此错误，而使用具体类时`stuff`则不会出现错误。是否有一种解决方法允许在这种情况下使用匿名类？

我意识到这个错误可能与 LinkKit 相关，但我没有足够的技术知识来深入了解......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T17:09:55.500

在**LinqKit 中**，我向 ExpressionExpander.VisitMemberAccess() 添加了对匿名类的检查，以使匿名类正常工作。

更换

```
if (m.Member.DeclaringType.Name.StartsWith ("<>"))
    return TransformExpr (m); 
```

和

```
string typeName = m.Member.DeclaringType.Name;
bool isAnonymous = typeName.StartsWith("<>f__AnonymousType"),
     isOuter = !isAnonymous && typeName.StartsWith("<>");
if (isOuter)
    return TransformExpr (m); 
```

# php - 如何使用 PHP 检测 abc.domain.com 或 abc.sub.domain.com 中的“abc”？

> ID：13501438
> 
> 赞同：1
> 
> 时间：2012-11-21T20:19:56.570
> 
> 标签：php, subdomain, hostname

我需要检测用户是否从某个子域访问我的网站。如何检测以下示例并使用 PHP 对其进行标记？我只想检测“abc”是否是子域，仅此而已，但它必须与“abc”之后的各种其他域一起使用。

*   [http://abc.domain.com/](http://abc.domain.com/)
*   [http://abc.domain/](http://abc.domain/)
*   [http://abc.sub.domain.com/](http://abc.sub.domain.com/)

是的，它们位于“abc”子域中。

*   [http://domain.com/](http://domain.com/)
*   [http://xyz.domain.com/](http://xyz.domain.com/)
*   [http://www.domain/](http://www.domain/)
*   [http://sub.domain.com/](http://sub.domain.com/)
*   [http://xyz.sub.domain.com/](http://xyz.sub.domain.com/)

不，他们不是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:22:50.520

您可以检查**$_SERVER**变量中的**HTTP_HOST**或**SERVER_NAME 。**

 **```
<?php
if(strpos($_SERVER['SERVER_NAME'], 'abc.domain.com') !== false) {
    //do something
}
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T20:23:34.763

这将返回子域：

```
array_shift(explode(".",$_SERVER['HTTP_HOST'])); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T20:27:07.277

您可以像这样从`$_SERVER`超全局中访问主机名：

```
$domain = $_SERVER['HTTP_HOST'] 
```

然后有多种方法可以确定该值是否以 开头`abc`。最简单的可能就是`stripos`

```
if(stripos('abc', $domain) === 0) {
    // you found it
} 
```

请注意，在这里使用`===`代替`==`非常重要。如果您使用`==`并且未在 中找到子字符串`$domain`，`stripos`则会返回`false`，其中 with将在您的条件中`== 0`进行评估。`true`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T20:33:13.413

```
<?php

if( explode( '.', $_SERVER['SERVER_NAME'] )[0] === 'abc' ) {
    //do something
}
?> 
```

这会将服务器名称分解为除以 的部分`.`，因此它将域名的第一部分与字符串 abc 进行比较。

explode(x,x) **[N]**只有在 PHP 5.4+（或 5.3+，我记错了）中才有可能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T20:36:33.813

您可以配置您的 Web 服务器以将所有子域重定向到单个 PHP 文件，您可以在其中弥补错误或通过`header()`函数重定向用户，例如...

```
header('Location: http://domain.com'); 
```

此外，因为您确定特定的 PHP 文件是因为子域而被访问的，所以您可以执行类似...

```
$url = $_SERVER['SERVER_NAME'];
list($subdomain) = explode('.', $url, 2);
$subdomain = trim(strtolower($subdomain)); 
```

然后`$subdomain`以你喜欢的方式使用变量（例如打印它）......

```
echo $subdomain; 
```

以防万一。对于 Apache 配置，您需要修改`VirtualHost`以将子域重定向到 PHP 文件进行处理。

```
<VirtualHost *:80>
ServerAlias *.domain.com
DocumentRoot /website/directory/page.php
</VirtualHost> 
```

**笔记**

1.) 重新启动 Apache。
2.) Apache 会警告您该目录不存在。这是真的，因为您提供的是文件路径而不是目录路径。但这会起作用。**

# c# - 使用 iTextSharp 链接到 PDF

> ID：13501443
> 
> 赞同：2
> 
> 时间：2012-11-21T20:20:02.907
> 
> 标签：c#, asp.net-mvc

这个问题可能有一个简单的答案，但我似乎无法找到解决方案。

因此，我目前正在使用 iTextSharp 生成 PDF，并在提交表单时将此 PDF 发送回用户。但是，我不想在响应流中发送此 PDF，而是呈现一个指向该文件的链接，即“感谢您提交，单击此处下载 PDF”。

查看了 Stack 上的大多数 iTextSharp 问题，但都与通过响应流发送它有关。

谢谢

```
 [HttpPost]
    public ActionResult Index(FormCollection formCollection)
    {

        // Create PDF
        var doc = new Document();
        MemoryStream memoryStream = new MemoryStream();

        PdfWriter writer = PdfWriter.GetInstance(doc, memoryStream);

        doc.Open();
        doc.Add(new Paragraph("First Paragraph"));
        doc.Add(new Paragraph("Second Paragraph"));
        doc.Close();

        byte[] docData = memoryStream.GetBuffer(); // get the generated PDF as raw data

        // write the data to response stream and set appropriate headers:

        Response.AppendHeader("Content-Disposition", "attachment; filename=test.pdf");
        Response.ContentType = "application/pdf";
        Response.BinaryWrite(docData);

        Response.End();

        return View();

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T20:28:53.957

这完全独立于 iTextSharp。

您必须将创建的字节数组存储在服务器上的某个位置并创建另一个操作，以便稍后通过某种 ID 获取生成的数据并将其提供给用户。

您可以存储在文件系统中，也可以只存储在会话或 TempData 中。

```
public ActionResult Index(FormCollection formCollection)
{
    // Create PDF ...
    byte[] docData = memoryStream.GetBuffer(); 
    // create id and store data in Session
    string id = Guid.NewGuid().ToString();
    Session[id] = docData;
    return View("Index", id);
} 
```

在视图`Index.cshtml`中，您将字符串设置为模型类型并生成下载链接：

```
@model string
@Html.ActionLink("Download pdf", "Download", "Controller", new { id = Model }) 
```

以及您的新下载操作：

```
public ActionResult Download(string id) {
    var docData = (byte[])Session[id];

    if (docData == null) 
      return HttpNotFound();

    // clear data from session
    Session[id] = null;
    // a simpler way of returning binary data with mvc
    return File(docData, "application/pdf", "test.pdf");
} 
```

# java - 泛型和原始类型

> ID：13501444
> 
> 赞同：3
> 
> 时间：2012-11-21T20:20:11.973
> 
> 标签：java, generics

我使用泛型编写了一些代码，但遇到了以下我无法理解的情况：

我有接口 IpRange 和以下类：

```
public class Scope<IpRange<T extends IP>> {
     List<IpRange<T>> rangesList;
     public List<IpRange<T>> getRangesList() {return rangesList;}
} 
```

如果我写以下内容，现在从一些测试类：

```
Scope<Ipv4> myScope = new Scope<Ipv4>(); 
scope.getRangesList().get(0) 
```

我得到了 IpRange 类型的对象，但是如果我使用原始类型并这样做：

```
Scope myScope = new Scope();
scope.getRangesList().get(0) 
```

我得到了对象，除非我明确地将它转换为范围，否则我不能使用 ipRange 方法。

如果是`List<T>`我明白了，因为我使用原始类型，编译器无法知道列表项的实际类型是什么，但在这种情况下，它将始终是 IpRange 类型，所以为什么我没有得到 Object ?

问题是，当我创建范围时，我不一定知道实际的范围类型。考虑这个构造函数： public Sc​​ope(String rangeStringList); 据我所知，字符串可能是“16.59.60.80”或“fe80::10d9:159:f:fffa%”。但我所知道的是，我将一些 IpRange 对象传递给编译器，我希望能够使用这个接口，无论是 ipv4 还是 ipv6。而且由于即使我使用行类型，编译器也可以确定这是 ipRange，我想知道为什么 java 选择这样做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:24:28.213

人们指出，在使用原始类型时，所有泛型类型信息都会被剥离，并暗示这与向后兼容性有关。我想如果没有解释，这可能不会令人满意，所以我将尝试解释像您这样的代码如何遇到这样的问题。

首先，假设您在那里编写的代码是旧库的一部分，并且您正在通过添加泛型来升级库。也许它是一个流行的库，很多人都使用过旧代码。

有人可能使用您库中的类做了类似的事情：

```
private void someMethod(Scope scope, Object object) {
  scope.getRangesList().add(object);
} 
```

现在，看这个我们知道 Object 可能不是 IpRange 类型，但这是一个私有方法，所以让我们假设类型检查是由调用 someMethod 的任何方法有效执行的。这可能不是好的代码，但如果没有泛型，它确实可以编译并且它可能工作得很好。

想象一下，写这篇文章的人升级到你的库的新版本以获得一些新功能或未实现的错误修复，与此同时，他们现在可以使用你的泛型类获得更多的类型安全性。但是，他们可能不想使用它，例如使用原始类型提取上述代码的太多遗留问题。

您实际上建议的是，即使“范围”是原始类型，从 getRangesList() 返回的列表也必须始终是 List<IpRange<? 扩展 IP>>，所以编译器应该注意到这一点。

If this were the case though, the legacy code above which adds an Object to the list will no longer compile without being edited. This is one way backwards compatibility would be broken without disregarding all available generic type information for raw types.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T01:02:40.257

是的，如果您使用原始类型，则在该方法的其余部分中所有泛型都将“关闭”，并且所有泛型类型都将变为原始类型，即使它们不会受到原始类型缺少的泛型参数的影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T01:38:32.663

如果使用原始类型，则*所有*泛型类型信息都会从类中剥离，包括在实例上调用的静态方法。

这样做的原因是为了向后兼容 java 1.4。

# javascript - 使用 JavaScript/jQuery 的数值的非线性“动画”

> ID：13501446
> 
> 赞同：3
> 
> 时间：2012-11-21T20:20:23.677
> 
> 标签：javascript, jquery, animation

我想在 Google Analytics 中针对活跃用户制作这样的动画。

![分析计数器](../Images/6802c0e0507efcd2480d633fbd8d5df3.png)

* * *

我看到一些做动画的脚本，但是他们是在线性模式下做的，比如，从 0 到 XXX 的速度是一样的，我想让它慢慢开始，加快速度，然后再慢慢结束。

我将如何在 javascript/jquery 中执行此操作？

* * *

根据要求，我尝试了什么：

```
<span id="counter">0</span>    

$(function ()
{
    var $counter = $('#counter'),
        startVal = $counter.text(),
        currentVal,
        endVal = 250;

    currentVal = startVal;
    var i = setInterval(function ()
    {
        if (currentVal === endVal)
        {
            clearInterval(i);
        }
        else
        {
            currentVal++;
            $counter.text(currentVal);
        }
    }, 100);

}); 
```

但我不认为这是要走的路...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T20:27:53.893

我会为此使用 jQuery 的内置动画。

如果您将一个函数传递给 的`step`选项`.animate()`，它将在动画期间的每个滴答声中被触发。这样，jQuery 将处理所有的缓动以及不适合你的。你只需要处理数据。

```
$({countValue:0}).animate(
    {countValue:346},
    {
        duration: 5000, /* time for animation in milliseconds */
        step: function (value) { /* fired every "frame" */
            console.log(value);
        }
    }
); 
```

在控制台中，您将看到 0 到 346 之间的值，并带有缓动。

# c# - 比较从不同程序集加载的对象

> ID：13501458
> 
> 赞同：3
> 
> 时间：2012-11-21T20:20:55.337
> 
> 标签：c#, .net, reflection

我有一些对象类，这些对象在设计上应该源自远程程序集。我希望能够比较这些类的实例是否相等，即使这些实例是从不同的程序集加载的。在现实生活中，这些将从网络位置或网络加载，我想与本地缓存进行比较。我从使用序列化和自定义序列化绑定器的解决方案中获得了一些好的结果。

我用来进行比较的示例客户端代码是：

```
 Assembly a = Assembly.LoadFile(@"c:\work\abc1\abc.dll");
    Type t1 = a.GetType("Abc.Def");
    Assembly b = Assembly.LoadFile(@"c:\work\abc2\abc.dll");
    Type t2 = b.GetType("Abc.Def");
    Object o1 = t1.GetConstructors()[0].Invoke(null);
    Object o2 = t2.GetConstructors()[0].Invoke(null);
    Console.WriteLine(o1.Equals(o2)); 
```

我在程序集中使用的模式是：

```
namespace Abc
{
    internal sealed class DefBinder : SerializationBinder
    {
        public override Type BindToType(string assemblyName, string typeName)
        {
            Type ttd = null;
            try
            {
                ttd = this.GetType().Assembly.GetType(typeName);
            }
            catch (Exception any)
            {
                Debug.WriteLine(any.Message);
            }
            return ttd;
        }
    }

    [Serializable]
    public class Def
    {
        public Def()
        {
            Data = "This is the data";
        }
        public String Data { set; get; }
        public override bool Equals(object obj)
        {
            if (obj.GetType().FullName.Equals(this.GetType().FullName))
            {
                try
                {
                    BinaryFormatter bf = new BinaryFormatter();
                    System.IO.MemoryStream ms = new System.IO.MemoryStream();
                    bf.Serialize(ms, obj);
                    ms.Seek(0, System.IO.SeekOrigin.Begin);
                    bf.Binder = new Abc.DefBinder();
                    Abc.Def that = (Abc.Def)bf.Deserialize(ms);
                    if (this.Data.Equals(that.Data))
                    {
                        return true;
                    }
                }
                catch (Exception any) {
                    Debug.WriteLine(any.Message);
                }
            }
            return false;
        }
    }
} 
```

**我的问题是**：这似乎可行，但感觉很hacky，所以有没有更直接的方法来比较可能从不同程序集中加载的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:29:01.167

这有点笨拙，但它是完成工作的一种快速简便的方法。您可以做的另一件事是使用大量反射为两个给定类型编写相等方法。就像是：

```
public bool Equals(Type t1, Type t2)
{
    var t1Constructors = t1.GetConstructors();
    var t2Constructors = t2.GetConstructors();
    //compare constructors
    var t1Methods = t1.GetMethods();
    var t2Methods = t2.GetMethods();
    //compare methods
    //etc.
} 
```

等等，使用 BindingFlags 来获取属性/方法/等。您关心并检查每个人是否平等。当然不是很容易，但它会给您很大的灵活性来确定“平等”在您的特定用例中的真正含义。

# mysql - 十进制数据类型正在四舍五入值

> ID：13501459
> 
> 赞同：4
> 
> 时间：2012-11-21T20:20:56.320
> 
> 标签：mysql, decimal, sqldatatypes

我已将我的`MySQL`字段表数据类型设置为，`decimal`因为从我所阅读的内容来看，我可以在`decimal`数据类型字段中使用逗号/点存储价格......问题是每当我使用逗号或点，MySQL 会自动向上或向下舍入。例如。当我执行以下查询时：

`UPDATE table SET field = 114.21 WHERE id = 1;`

然后设置字段，但值四舍五入为 114，而不是显示我在查询 ( `114.21`) 中设置的数据 - 有什么解决方案吗？或者我应该只使用其他数据类型？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-21T20:23:24.060

1.  AFAIK 点是十进制值的标准表示法。使用逗号可能会触发 SQL 解析错误，或者如果句法上下文允许逗号存在，则可能会被忽视。

2.  你是如何定义`DECIMAL`列的精度的？

    如果是`DECIMAL(10, 2)`，则总共有 10 个数字，其中 2 个是十进制值（有 2 个十进制舍入意味着`10.215`保存为`10.22`并`10.214`变为`10.21`）。

    如果是`DECIMAL(10)`，它将没有任何十进制值并四舍五入为整数。

3.  如果您使用`FLOAT`或`DOUBLE PRECISION`不必指定十进制值的个数，但它有其自身的缺陷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-18T00:23:47.730

正如 Mihai 提到的，您需要为小数类型定义正确的精度，例如 DECIMAL(10,2) 为两位小数。

当插入一个十进制值时，mySQL 将四舍五入。

从文档：

对于向 DECIMAL 或整数列中的插入，目标是精确数据类型，因此舍入使用“从零取整的一半”，而不管要插入的值是精确的还是近似的。

有关详细信息，请参阅[http://dev.mysql.com/doc/refman/5.0/en/precision-math-rounding.html](http://dev.mysql.com/doc/refman/5.0/en/precision-math-rounding.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-06T09:01:16.280

早在我还有一个关于在我的带小数点的数字上使用什么的问题之前。但是通过使用**DOUBLE** (10,2) 作为我的**DATATYPE**解决了问题，当你保存它时它会显示数据库上的确切数字。希望它会有所帮助。

# excel - 多个公式的Excel函数

> ID：13501463
> 
> 赞同：1
> 
> 时间：2012-11-21T20:21:05.223
> 
> 标签：excel

我怎样才能在excel中做这个等式

```
If text "t" then goto cell x if not goto cell y 
```

并执行功能即

```
If cell has letter t do (28.5%*cell) if not do (15%*cell) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:36:37.150

> 如果文本“t”然后转到单元格 x 如果不​​是转到单元格 y

假设您通过 goto 表示“解决”，这可能是您正在寻找的内容：

```
=IF(S1="t",X1,Y1) 
```

当单元格 S1 的值为“t”时，公式所在单元格的值将是单元格 X1 的值，否则为 Y1 的值。

> 如果单元格有字母 t 则执行 (28.5%*cell) 如果没有则执行 (15%*cell)

这将是公式：

```
=IF(IFERROR(SEARCH("*t*",A1)), 28.5% * B1, 15% * C1) 
```

一些测试数据：

```
 A      | B    | C  
1  mytest | 100  | 200 
```

**在那里错过了编辑** '，'。我将它弹出到Excel中，但它没有用。

应该 `=IF(IFERROR(SEARCH("*t*",A1),), 28.5% * B1, 15% * C1)`

那行得通

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:40:08.080

所以我理解的方式是，你有 3 列，1 列是字母，2 列是数字。第 1 列是 t 或其他内容，然后第 2 列和第 3 列是各种答案。所以我的解决方案假设字母是a列，数字是b和c列，函数进入d。如果列不同，您可以进行相应调整。然后您可以将函数向下拖动（如果将其放在顶部的单元格中，则向上拖动），它将调整行号。

`=IF(A1 = "t",B1 * 0.285,C1 * 0.15)`

所以基本上它需要单元格 A1 并检查它是否是字母 t。如果是，则将 b1` 中的数字乘以 28.5%，否则，将 c1 中的数字乘以 15%。

# python - 访问python模块中的全局变量

> ID：13501464
> 
> 赞同：1
> 
> 时间：2012-11-21T20:21:07.537
> 
> 标签：python, module, global-variables

如何访问模块内的所有全局变量（我不知道他们是谁）？

例如

文件 m.py：

```
def a(s):
    exec('print '+s) 
```

主要代码：

```
import m
x=2
m.a('x*2') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:24:04.210

你想在这里使用 eval() 而不是 exec()。

但是您实际上要做什么.... eval() 和 exec() 的使用通常是不好的风格，通常不需要（在安全考虑方面尤其可怕）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:35:53.703

为什么你不能直接使用（好吧，如果你真的有字符串，但是因为它几乎都在代码中，看起来你因为某种原因有字符串）

（重写代码）：

文件 m.py：

```
def a(s):
    print s 
```

主要代码：

```
import m
x=2
m.a(x * 2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:31:27.843

您可以通过直接导入特殊`__main__`模块来破解它。在`m.py`：

```
def print_global(name):
  import __main__
  print getattr(__main__, name) 
```

在主模块中：

```
import m
x = 2
m.print_global('x')  # prints 2 
```

虽然此示例说明了如何以编程方式使用命名空间，但如果有的话，这种事情应该尽量少做。

# c# - 通过局部视图 MVC3 传递模型

> ID：13501469
> 
> 赞同：1
> 
> 时间：2012-11-21T20:21:31.047
> 
> 标签：c#, asp.net, asp.net-mvc-3, partial-views

我有一个像这样的部分视图：

```
@model IEnumerable<NutricionApp.Models.Ingrediente>

<table>
<tr>
    <th>
        NombreIngrediente
    </th>
    <th>
        CantidadPorPorcion
    </th>
    <th>
        UnidadPorPorcion
    </th>
    <th></th>
</tr>

@foreach (var item in Model) {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.NombreIngrediente)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.CantidadPorPorcion)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.UnidadPorPorcion)
    </td>

</tr>
}

</table> 
```

我想在这个视图中呈现所说的部分视图，它是强类型的：

```
@model NutricionApp.Models.Platillo

@{
    ViewBag.Title = "Create";
    Model.ListadeIngredientes = new List<NutricionApp.Models.ListaIngredientes>();
}

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Platillo</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.NombrePlatillo)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.NombrePlatillo)
            @Html.ValidationMessageFor(model => model.NombrePlatillo)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.idRestaurante)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.idRestaurante)
            @Html.ValidationMessageFor(model => model.idRestaurante)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.DescripcionPlatillo)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.DescripcionPlatillo)
            @Html.ValidationMessageFor(model => model.DescripcionPlatillo)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.esAprobado)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.esAprobado)
            @Html.ValidationMessageFor(model => model.esAprobado)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.esDisponible)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.esDisponible)
            @Html.ValidationMessageFor(model => model.esDisponible)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.precio)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.precio)
            @Html.ValidationMessageFor(model => model.precio)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.VigenciaPlatillo)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.VigenciaPlatillo)
            @Html.ValidationMessageFor(model => model.VigenciaPlatillo)
        </div>
        <!--<table>
        <tr><th>Nombre</th></tr>
        @@foreach (var item in (List<NutricionApp.Models.ListaIngredientes>)Session["Lista"])
                {
            <tr>
            <p>
                <td>@@item.ingrediente.NombreIngrediente</td>
            </p>
            </tr>
        }
        </table>-->
        @Html.Partial("_Ingredientes", Model.);
        <br />
        @Html.Partial("_ListaIngredientes", Model.ListadeIngredientes)

        <p>
            <input type="submit" value="Create" />
        </p>

    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

在我的控制器中，我有这个：

```
//....
 public ActionResult _ListaIngredientes()
    {
        IEnumerable<ListaIngredientes> ListaDemo = new List<ListaIngredientes>();
        return View(ListaDemo);
    }

    public ActionResult _Ingredientes()
    {
        return View(db.Ingredientes.ToList());
    } 
```

在这种情况下，db.Ingredients.ToList()); 返回我需要在局部视图上显示的数据。问题是，当我尝试在视图中显示所述列表时，它告诉我必须传递与我的视图相对应的 IEnumerable 模型......

如果我从 URL 访问 PartialView，它会正确显示数据。但是，如果我尝试从视图内部执行此操作，它会传递它当前使用的模型，因为它是强类型的。如何传递我需要的模型（我的成分表列表，db.Ingredientes.ToList()）；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:42:37.667

您可以从局部视图中引用父视图的模型，以便将它们全部打包到顶层视图中。您还可以通过 Html.Partial 重载显式（或任何您想要的）传递模型。如果您决定从 View 访问模型，请确保在 View 和 PartialView 中都包含 @model 指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:35:44.497

您的视图期望模型的 IEnumerable (NutricionApp.Models.Ingrediente)。您正在向它传递一个实体 (ListaIngredientes) 的 IEnumerable。这就是为什么它在呕吐。

假设您的 Ingrediente 模型的构造函数接受 ListaIngredientes 作为参数，您可以更改此行：

```
@Html.Partial("_ListaIngredientes", Model.ListadeIngredientes) 
```

至

```
@Html.Partial("_ListaIngredientes", Model.ListadeIngredientes.Select(i => new Ingrediente(i))) 
```

这应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T23:24:27.777

您是否尝试根据传递给父视图的数据呈现动态局部视图？如果是，请使用 Html.RenderAction() 方法并在您的控制器上进行一些修改，以便每次调用它时返回不同的数据并将部分视图返回到父视图。假设 Platillo 和成分实体与一对多关系相关，您可以尝试以下操作：

在父视图中：

```
@{ Html.RenderAction("_Ingredientes", "YourControllerName", new {platilloId=Model.PlatilloId}); } 
```

更改您的控制器方法：

```
public ActionResult _Ingredientes(int platilloId )
    {
return PartialView( "_IngredientView", db.Platillos.where(p=>p.PlatilloId==platilloId ).Ingredients.ToList();

    } 
```

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T07:20:34.763

我是如何解决的：我刚刚创建了一个新方法，它既包含我最初使用的方法，也包含我想用于 PartialView 的方法 其余的只是使用列表来跟踪我的数据 =D

# jquery - 使用 jQuery Mobile Ajax Navigation 防止重复表单提交（不禁用 ajax）

> ID：13501475
> 
> 赞同：0
> 
> 时间：2012-11-21T20:21:49.873
> 
> 标签：jquery, ajax, forms, post, jquery-mobile

在我的表单中，如果您足够快地单击两次提交，我将获得两个成功的表单 ajax 帖子。我怎样才能停止重复的帖子？

据我所知

1.  用户点击提交
2.  阿贾克斯帖子已发送
3.  用户点击提交（填写完整且有效的表格）
4.  阿贾克斯帖子已发送
5.  收到 Ajax 响应
6.  页面刷新为空（新的空表单 - 需要值）
7.  收到 Ajax 响应
8.  页面刷新为空（新的空表单 - 需要值）

表单发送了两次，我创建了两个项目。

有类似名称的问题，但它们与禁用验证或禁用 ajax 有关。Ajax、jquery 验证和服务器端验证（MVC 中的 Post-Redirect-Get）对我来说工作得很好。

为了清楚起见，我正在使用[jQuery Mobile 的 Ajax 导航](http://jquerymobile.com/demos/1.2.0/docs/pages/page-navmodel.html)，所以*我没有编写任何 ajax*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:33:16.143

这是我现在的解决方案是：

```
$(document).on('submit', "form", null, function (e) {
    $(this).find("input:submit")
    .attr('disabled', 'disabled')
    // the following is optional, arguably unnecessary
    .delay(2000)
    .queue(function (next) { $(this).removeAttr('disabled'); next(); });
}); 
```

（更新为在 webkit 中工作）

延迟是为了以防万一出现问题。实际上，表单应该被替换并且替换不会被禁用。

欢迎提出更好的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:31:49.930

```
$(document.body)
.on("input:submit", "click", function () {
  var $this = $(this);

  if ( !$this.is(".submitting") ) {
    $this.addClass("submitting");

    $.ajax({ url: "etc..."})
    .done(function () {
      // success callback;
    })
    .fail(function () {
      // error callback;
    })
    .always(function () {
      $this.removeClass("submitting");
    })
  }
}); 
```

这有一个很好的副作用，您可以使用`submitting`CSS 类修改提交按钮的样式。`always`您可以另外/替代地禁用它并在回调中重新启用它。

# css - 我可以乱序选择 CSS 兄弟吗？

> ID：13501476
> 
> 赞同：1
> 
> 时间：2012-11-21T20:21:50.563
> 
> 标签：css, css-selectors

我正在尝试编写 css 以根据页面上的元素自动设置我的列的样式。列有几种组合：

`aside`- `article`-`aside`

`aside`-`article`

`article`-`aside`

`article`

每个`aside`都有左或右的类别，具体取决于它在屏幕的哪一侧。`aside`无论布局如何， s 始终是恒定宽度，但'`article`宽度会根据布局而变化。

我想使用 CSS（最好没有任何 javascript）来设置`article`. 我一直在玩 CSS 兄弟姐妹，但我不能让它工作。这就是我理论上希望代码工作的方式：

```
article{
   /* just article */
   width: some width;
   }
.left~article{
   /* aside-article */
   width: some width;
   }
.right~article{
   /* article-aside */
   width: some width; /* (this can be the same as the previous;
                         I don't know if it's easier to define
                         them together or separately) */
   }
.left~.right~article{
   /* aside-article-aside */
   width: some-width;
   } 
```

前两种布局有效，但后两种无效。问题是我总是想为`article`. 分别使用选择器`article~.right`和`.left~.article~.right`最后两个布局找到正确的布局组合（即 an `article`then an`aside`或 an `article`between two `aside`s），但它针对最右边`aside`，我无法更改`article`.

有没有办法考虑所有兄弟姐妹是否在 DOM 中的目标元素之前使用 CSS 中的兄弟姐妹选择器？或者任何人都可以想到任何“创造性”的方法，我可以在不使用 javascript 的情况下解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T21:08:01.783

## CSS3 解决方案

`aside`假设这些的包含元素只有or的直接子元素`article`，那么就有一个 CSS3 解决方案（所以 IE9+）。[对于我在这里的示例](http://jsfiddle.net/4pZe9/5/)，我假设元素的总体`width`宽度`400px`和标准宽度`aside`（尽管可能不同）。

```
aside {
    width: 100px;
}

aside.left + article,
article:first-child {
    width: 300px;
}

article:only-child {
    width: 400px; /* overrides article:first-child if it is only-child */
}

aside.left:nth-last-of-type(2) + article {
    width: 200px; /* only engages if there are two asides */
} 
```

# asp.net-mvc - 使用子集合 NHibernate 自动映射对象

> ID：13501478
> 
> 赞同：3
> 
> 时间：2012-11-21T20:21:52.340
> 
> 标签：asp.net-mvc, nhibernate, fluent-nhibernate, automapper

我最近刚从 EF5 切换到 NHibernate，因为我希望在我的 ORM 中有一些功能，但在 EF 中没有。所以，我是 NHibernate 的新手。我在 ASP.Net MVC 中工作。

我正在使用 Automapper 将 FNH 对象映射到我的视图模型，但是我在将之前在 EF 中的操作方式转换为 FNH 时遇到了问题。例如，我有一个自引用表，它是一个菜单系统。

这是模型：

```
public partial class Menu {

    private int _Id;

    private string _Title;

    private string _Link;

    private int _SortOrder;

    private System.Nullable<int> _ParentMenuId;

    private Iesi.Collections.ISet _ChildMenus;

    private Menu _ParentMenu;

    #region Extensibility Method Definitions

    partial void OnCreated();

    #endregion

    public Menu()
    {
        this._ChildMenus = new Iesi.Collections.HashedSet();
        OnCreated();
    }

    /// <summary>
    /// There are no comments for Id in the schema.
    /// </summary>
    public virtual int Id
    {
        get
        {
            return this._Id;
        }
        set
        {
            this._Id = value;
        }
    }

    /// <summary>
    /// There are no comments for Title in the schema.
    /// </summary>
    public virtual string Title
    {
        get
        {
            return this._Title;
        }
        set
        {
            this._Title = value;
        }
    }

    /// <summary>
    /// There are no comments for Link in the schema.
    /// </summary>
    public virtual string Link
    {
        get
        {
            return this._Link;
        }
        set
        {
            this._Link = value;
        }
    }

    /// <summary>
    /// There are no comments for SortOrder in the schema.
    /// </summary>
    public virtual int SortOrder
    {
        get
        {
            return this._SortOrder;
        }
        set
        {
            this._SortOrder = value;
        }
    }

    /// <summary>
    /// There are no comments for ParentMenuId in the schema.
    /// </summary>
    public virtual System.Nullable<int> ParentMenuId
    {
        get
        {
            return this._ParentMenuId;
        }
        set
        {
            this._ParentMenuId = value;
        }
    }

    /// <summary>
    /// There are no comments for ChildMenus in the schema.
    /// </summary>
    public virtual Iesi.Collections.ISet ChildMenus
    {
        get
        {
            return this._ChildMenus;
        }
        set
        {
            this._ChildMenus = value;
        }
    }

    /// <summary>
    /// There are no comments for ParentMenu in the schema.
    /// </summary>
    public virtual Menu ParentMenu
    {
        get
        {
            return this._ParentMenu;
        }
        set
        {
            this._ParentMenu = value;
        }
    }
} 
```

这是映射：

```
public class MenuMap : ClassMap<Menu>
{
    public MenuMap()
    {
          Schema(@"dbo");
          Table(@"Menus");
          LazyLoad();
          Id(x => x.Id)
            .Column("Id")
            .CustomType("Int32")
            .Access.Property()
            .CustomSqlType("int")
            .Not.Nullable()
            .Precision(10)                
            .GeneratedBy.Identity();
          Map(x => x.Title)    
            .Column("Title")
            .CustomType("String")
            .Access.Property()
            .Generated.Never()
            .CustomSqlType("varchar");
          Map(x => x.Link)    
            .Column("Link")
            .CustomType("String")
            .Access.Property()
            .Generated.Never()
            .CustomSqlType("varchar")
            .Not.Nullable()
            .Length(50);
          Map(x => x.SortOrder)    
            .Column("SortOrder")
            .CustomType("Int32")
            .Access.Property()
            .Generated.Never()
            .Not.Nullable()
            .UniqueKey("KEY1");
          Map(x => x.ParentMenuId)    
            .Column("ParentMenuId")
            .CustomType("Int32")
            .Access.Property()
            .Generated.Never()
            .UniqueKey("KEY1");
          HasMany<Menu>(x => x.ChildMenus)
            .Access.Property()
            .AsSet()
            .Cascade.None()
            .LazyLoad()
            .Inverse()
            .Not.Generic()
            .KeyColumns.Add("ParentMenuId", mapping => mapping.Name("ParentMenuId")
                                                                 .SqlType("int")
                                                                 .Nullable());
          References(x => x.ParentMenu)
            .Class<Menu>()
            .Access.Property()
            .Cascade.None()
            .LazyLoad()
            .Columns("ParentMenuId");
    }
} 
```

这是我的视图模型或 DTO：

```
 public class MainMenuItemViewModel
{
    public Int32 Id { get; set; }
    public string Title { get; set; }
    public string Link { get; set; }
    public Int32 SortOrder { get; set; }
    public Int32? ParentMenuId { get; set; }
    public IList<MainMenuItemViewModel> ChildMenus { get; set; }
} 
```

当我尝试将域对象映射到视图模型时，使用：

```
Mapper.CreateMap<Menu, MainMenuItemViewModel>(); 
```

我在检查配置是否在运行时有效时收到以下错误：

```
 The following property on WinStream.WebUI.Models.MainMenuItemViewModel cannot be mapped: ChildMenus
Add a custom mapping expression, ignore, add a custom resolver, or modify the destination type WinStream.WebUI.Models.MainMenuItemViewModel.
Context:
    Mapping to property ChildMenus from System.Object to WinStream.WebUI.Models.MainMenuItemViewModel
    Mapping to property ChildMenus from Iesi.Collections.ISet to System.Collections.Generic.IList`1[[WinStream.WebUI.Models.MainMenuItemViewModel, WinStream.WebUI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
    Mapping from type WinStream.Services.Entities.Menu to WinStream.WebUI.Models.MainMenuItemViewModel
Exception of type 'AutoMapper.AutoMapperConfigurationException' was thrown. 
```

我认为这可能与将 ISet 转换为 IList 有关，所以我在我的视图模型中放入了一个 ISet，但仍然有问题。

感谢您的帮助 - 我意识到这可能是一个完整的新手问题，但我无法通过 Google 找到太多帮助。我已经为此苦苦挣扎了好几天了。

谢谢！

**编辑：**

我已经克服了上面的错误，但是现在当我查询数据库时，根对象的 ChildMenus 集合包括数据库中每个子对象的空对象，包括关联的子对象，而不仅仅是实际的相关子对象对象。

例如：

1.  根菜单
    *   ChildMenus 集合应该有 3 个子对象，但它有 8 个（5 个 null 和 3 个填充）
2.  项目清单
    *   ChildMenus 集合应该有 1 个子对象，但它有 8 个（7 个 null 和 1 个填充）
3.  项目清单
    *   ChildMenus 集合应该有 0 个子对象，并且它没有子对象。

这是代码：

```
IList<Menu> menus = session.Query<Menu>().Where(x => x.ParentMenuId== null).ToList() 
```

对此有任何想法，还是我需要将其放入另一个问题中？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:52:42.353

NHibernate 不需要很多来自 EF 的解决方法。您基本上有一个菜单，其中包含具有父参考的有序子菜单。

```
public class Menu
{
    public int Id { get; protected set; }

    public string Title { get; set; }
    public string Link { get; set; }

    public IList<Menu> ChildMenus { get; protected set; }
    public Menu ParentMenu { get; set; }

    public Menu()
    {
        ChildMenus = new List<Menu>();
    }
}

public class MenuMap : ClassMap<Menu>
{
    public MenuMap()
    {
          Table(@"Menus");
          Id(x => x.Id).GeneratedBy.Identity();
          Map(x => x.Title).Length(100);
          Map(x => x.Link).Length(50);
          HasMany<Menu>(x => x.ChildMenus)
              .AsList("SortOrder")
              .Inverse()
              .KeyColumn("ParentMenuId");
          References(x => x.ParentMenu).Column("ParentMenuId");
    }
} 
```

笔记：

*   架构应按约定定义或作为配置对象中的默认架构/目录
*   从映射中删除所有不必要的声明，因为它经常引入可移植性问题（例如 customsqltypes），使代码复杂化并妨碍约定
*   customsqltype() 使 length() 无用
*   Sortorder 并不是真正需要的，因为列表已经定义了顺序
*   parentId 与 Parent.Id 重复，如果需要可以实现`ParentId { get { return ParentMenu == null ? null : (int?)ParentMenu.Id } }`，无需映射或存储在字段中

*   如果不需要父引用，请将其`.Inverse()`从集合映射中删除

# javascript - 检查是否未选中 n 个复选框

> ID：13501479
> 
> 赞同：1
> 
> 时间：2012-11-21T20:21:56.800
> 
> 标签：javascript, jquery, checkbox

我有以下 HTML 元素：

```
<input type="checkbox" id="dog_pop_123">
<input type="checkbox" id="cat_pop_123">
<input type="checkbox" id="parrot_pop_123"> 
```

我想检查一下，如果三个复选框都没有选中，我需要返回 false。但是，我需要考虑到第三个复选框可能不存在。

现在我有这个：

```
var id = 123;

if ( !$('#dog_pop_'+id+':checked').length
    && !$('#cat_pop_'+id+':checked').length
    && !$('#parrot_pop_'+id+':checked').length ) {
  return false;
} 
```

但是，如果最后一个输入不存在，而前两个输入确实存在并被检查，这将返回 false，它不应该。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:29:33.630

我建议将复选框分组在一个共同的父项中：

```
<fieldset id="group1">
    <input type="checkbox" id="dog_pop_123">
    <input type="checkbox" id="cat_pop_123">
    <input type="checkbox" id="parrot_pop_123">
</fieldset> 
```

并使用以下内容：

```
return !($('#group1 input:checkbox').length == $('#group1 input:checkbox:not(":checked")').length); 
```

实际上，如果复选框的数量等于未选中的复选框的数量，则返回 false（使用`!`运算符），否则返回 true。

参考：

*   [`:checkbox`选择器](http://api.jquery.com/checkbox-selector/)。
*   [`:checked`选择器](http://api.jquery.com/checked-selector/)。
*   [`:not()`选择器](http://api.jquery.com/not-selector/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:24:51.513

试试下面的代码：

```
var id = 123, 
    checkboxes = $('#dog_pop_' + id + ', #cat_pop_' + id + ', #parrot_pop_' + id);
if(checkboxes.filter(function() {return this.checked !== true;}).length !== checkboxes.length) {
    //Not all checkboxes are checked
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:29:19.133

```
if($('input[id$="pop_123"]').length != $('input[id$="pop_123"]:checked').length ) {
  return false;
} 
```

除非您有许多以 pop_123 结尾的 id，否则应该可以解决问题。在这种情况下，您也可以添加`[type=checkbox]`过滤器。

在选择器中使用`$=`以结束。查看[文档](http://api.jquery.com/attribute-ends-with-selector/)

# batch-file - 如何使用批处理脚本重命名一组 pdf 文件

> ID：13501482
> 
> 赞同：2
> 
> 时间：2012-11-21T20:22:11.300
> 
> 标签：batch-file, rename

我知道已经有几个帖子解决了这个问题。但是我无法让我的小批处理脚本工作，而且我是一个新手，所以如果你能帮助我解决这个问题，我会非常高兴。

我有一堆用随机数和“_text”命名的pdf文件，例如174098_text.pdf。现在我想重命名文件，使我只剩下 174098.pdf（删除 _text）。

这是我的文件“Rename.cmd”的最新版本：

```
@echo off
@setlocal
REM +++++++++++++++++++++++++++++++++++++++++++++++++
REM ++++++++ Umbenennen von Dateien ++++++++++++++++
REM +++++++++++++++++++++++++++++++++++++++++++++++++

REM +++ Dateinamen und Pfad ermitteln
FOR /f "delims=" %%D in ('Dir /b %Path%\*_*.pdf') do (
FOR /f "delims=_ tokens=1-2" %%I in ('%%D') do (
    ren %%D %%I.pdf
    )
)

Endlocal 
```

我希望你能帮助我并解释我做错了什么。运行代码它会打开所有文件，但不会重命名其中的一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:55:03.937

/F 参数用于 OPENING 命令和/或获取命令的输出，因此当您使用 /F 的第二个参数时，您是在告诉 CMD 执行“%%D”文件，所以不能这样做。

如果您需要递归文件夹，则可以使用不带参数的 FOR 或 /R 参数。

而且您不需要为这项工作启动 setlocal

```
@echo off

FOR %%# in ("C:\Folder\*.pdf") DO (

    :: Set the "filename.extension"
    Set "File=%%~nx#"

    :: Rename it
    Call Rename "%%#" "%%FILE:_TEXT=%%"
    REM Explanation:
    REM Rename "filename_text.pdf" with "Filename(_Text=NOTHING).pdf"
    REM (That removes the "_TEXT" pattern in each filename)
)
pause&Exit 
```

请记住，如果您需要递归：

```
FOR /R "C:\Folder\" %%@ in (*.pdf) 
```

# java - 如何检测java进程退出？

> ID：13501483
> 
> 赞同：0
> 
> 时间：2012-11-21T20:22:14.570
> 
> 标签：java, bash, process, io, centos

在一个 java 程序中，我正在生成一个用于 centOS 机器的 sh 脚本，它将使用 sox 和 lame 来解码 MP3 音频文件，然后分别对文件应用一些增益。我有一些问题让 Process.waitFor() 方法做任何事情，而不是无限期地挂起。这是代码：

```
 try
    {
    // TODO code application logic here
        String reviewPath = "/SomeDirectory/";
        String fileName = "FileName";
        String extension = ".mp3";
        StringBuilder sb = new StringBuilder();
        sb.append("#!/bin/bash\n");
        sb.append("cd " + reviewPath + "\n");
        sb.append("lame --decode " + fileName + extension + "\n"); 
        File script = new File(reviewPath + fileName + ".sh");
        script.createNewFile();
        script.setExecutable(true);
        FileWriter writer = new FileWriter(script);
        writer.write(sb.toString());
        writer.close();
        Process p = Runtime.getRuntime().exec(script.getAbsolutePath());
        String line;
        BufferedReader bri = new BufferedReader
            (new InputStreamReader(p.getInputStream()));
        BufferedReader bre = new BufferedReader
            (new InputStreamReader(p.getErrorStream()));
        while ((line = bri.readLine()) != null) {
            System.out.println(line);
        }
        bri.close();
        while ((line = bre.readLine()) != null) {
            System.out.println(line);
        }
        bre.close();
        p.waitFor();
        System.out.println("Done.");

    }
    catch (Exception e)
    {
        System.out.println(e.getMessage());
    } 
```

奇怪的是，当我运行它手动生成的 .sh 文件时，它会很好地运行并退出，但是当我从 java 中的进程对象执行它时，它永远不会退出。进程的 exitValue 始终为“进程尚未退出”。我尝试将 set -e 添加到脚本中，然后退出到脚本的末尾。没有使用 kill 命令（我真的不认为我可以在这里做）我不知道这里发生了什么。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:29:39.437

`while(p.getInputStream().read() != -1);`在开始该过程后添加类似的内容。缓冲区将被填满，进程将停止等待某些内容（在本例中为您的程序）从中读取以释放空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T21:09:53.897

我想到了！这里的问题确实是需要刷新输出流以使应用程序退出，但仅从流中读取是不够的。我使用了 Suresh Koya 的建议并使用了 processBuilder api，并在启动之前重定向了进程上的错误流，并从流中读取。这解决了我遇到的问题：D

# android - 如何在远程 Android 设备上启动/停止自定义构建的应用程序

> ID：13501487
> 
> 赞同：0
> 
> 时间：2012-11-21T20:22:29.440
> 
> 标签：android, eclipse, service, sms, system

我已经在 Eclipse 中编写了一个应用程序，现在我只需要添加一个额外的方法，但我想知道该怎么做。

方法应该以某种方式收听传入的消息，并且当 SMS 到达设备时，它应该启动/停止我当前在后台运行的应用程序。

因此，我将带有特定内容的 SMS 发送到设备（例如`START123`），当设备接收到它时，内容应用程序将自动启动并在其上执行所有进一步的任务。

欢迎任何关于如何实现这一点的想法/编码。：） 谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T01:23:23.177

[https://stackoverflow.com/a/8720582](https://stackoverflow.com/a/8720582)通过服务完成您的工作。

如果您的应用程序应该在重新启动后运行，请不要忘记启动。

# android - 如何将 setBackground 与 Android Widget 一起使用

> ID：13501498
> 
> 赞同：5
> 
> 时间：2012-11-21T20:23:05.840
> 
> 标签：android, android-layout, android-widget

我之前问过类似的问题，但我的要求太含糊了。下面的代码绘制了一个漂亮的风格化按钮。当您单击按钮时，您可以输入一个数字，并根据该数字，使用更改背景颜色

remoteViews.setInt(R.id.nmcButton, "setBackgroundColor", 颜色);

不幸的是，当我尝试通过使用来保留样式时

remoteViews.setInt(R.id.nmcButton, "setBackground", 颜色);

小部件不会加载。有没有解决的办法？有没有办法在更改背景颜色的同时保留样式？

以下是一些相关文件

```
 package test.widget;

    import android.os.Bundle;
    import android.app.PendingIntent;
    import android.appwidget.AppWidgetManager;
    import android.appwidget.AppWidgetProvider;
    import android.content.ComponentName;
    import android.content.Context;
    import android.content.Intent;
    import android.util.Log;
    import android.widget.RemoteViews;
    import android.graphics.Color;

    public class MyWidget extends AppWidgetProvider {

        private final static String TEST_ACTIVITY = "test.widget.action.TEST_ACTIVITY";
        private final static int INTENT_NO_REQUEST = 0; /* no requestCode */
        private final static int INTENT_NO_FLAGS = 0; /* code for no Flags */
        private int count = 9;

        @Override
        public void onReceive(Context context, Intent intent) {
            super.onReceive(context, intent);
            Bundle b = intent.getExtras();
            if (b != null) {
                count = b.getInt("nmcCount");
                callOnUpdate(context);
            }
        }

        private void callOnUpdate(Context context) {
            AppWidgetManager appWidgetManager = AppWidgetManager
                    .getInstance(context);
            ComponentName thisAppWidget = new ComponentName(
                    context.getPackageName(), MyWidget.class.getName());
            int[] appWidgetIds = appWidgetManager.getAppWidgetIds(thisAppWidget);
            onUpdate(context, appWidgetManager, appWidgetIds);
        }

        @Override
        public void onUpdate(Context context, AppWidgetManager appWidgetManager,
                int[] appWidgetIds) {
            super.onUpdate(context, appWidgetManager, appWidgetIds);
            buildUpdate(context, appWidgetManager, appWidgetIds);
        }

        private void buildUpdate(Context context,
                AppWidgetManager appWidgetManager, int[] appWidgetIds) {
            final int N = appWidgetIds.length;
            for (int i = 0; i < N; i++) {
                int appWidgetId = appWidgetIds[i];

                RemoteViews remoteViews = new RemoteViews(context.getPackageName(),
                        R.layout.widget);

                Intent intent = new Intent(TEST_ACTIVITY);
                PendingIntent pendingIntent = PendingIntent.getActivity(context,
                        INTENT_NO_REQUEST, intent, INTENT_NO_FLAGS);
                remoteViews.setOnClickPendingIntent(R.id.nmcButton, pendingIntent);
                remoteViews.setTextViewText(R.id.nmcButton, String.valueOf(count));

                // the code below works, but the button does not have nice styling
                // int color = (count >= 5) ? Color.GREEN : Color.RED;
                // remoteViews.setInt(R.id.nmcButton, "setBackgroundColor", color);

                // this code doesn't work, you get "problem loading widget"
                int color = (count >= 5) ? R.drawable.btn_green
                        : R.drawable.btn_red;
                remoteViews.setInt(R.id.nmcButton, "setBackground", color);

                appWidgetManager.updateAppWidget(appWidgetId, remoteViews);
            }
        }
    } 
```

btn_red.xml

```
 <?xml version="2.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">

        <item android:state_pressed="true"><shape>
       <solid android:color="#ef4444" />

       <stroke android:width="1dp" android:color="#992f2f" />

       <corners android:radius="3dp" />

       <padding android:bottom="10dp" android:left="10dp" android:right="10dp" android:top="10dp" />
    </shape></item>
        <item><shape>
       <gradient android:angle="270" android:endColor="#992f2f" android:startColor="#ef4444" />

       <stroke android:width="1dp" android:color="#992f2f" />

       <corners android:radius="3dp" />

       <padding android:bottom="11dp" android:left="10dp" android:right="10dp" android:top="10dp" />
    </shape></item>

    </selector> 
```

样式.xml

```
 <resources>
        <style name="ButtonText">
            <item name="android:layout_width">wrap_content</item>
            <item name="android:layout_height">wrap_content</item>
            <item name="android:gravity">center</item>
            <item name="android:layout_margin">1dp</item>
            <item name="android:textSize">10dp</item>
            <item name="android:textStyle">normal</item>
            <item name="android:shadowColor">#000000</item>
            <item name="android:shadowDx">1</item>
            <item name="android:shadowDy">1</item>
            <item name="android:shadowRadius">2</item>
            <item name="android:textColor">#ffffff</item>  
        </style>
        <style name="AppTheme" parent="android:Theme.Light" />
    </resources> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-21T22:09:20.970

一位同事给出了答案，我应该使用：

```
remoteViews.setInt(R.id.nmcButton, "setBackgroundResource", color); 
```

代替：

```
remoteViews.setInt(R.id.nmcButton, "setBackground", color); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-04T15:47:51.450

I tried this but that didn't work for me.

If you want to set a color in your widget you should do this:

```
remoteViews.setInt(R.id.nmcButton, "setBackgroundColor", color); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-01T08:46:45.493

这对我的小部件中的 ListView 不起作用，所以我想出了一个解决方法：

首先，我将我的布局定义为 FrameLayout，其中有一个 ImageView 来绘制我的背景：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ImageView
        android:id="@+id/iv_widget_background"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:scaleType="fitXY" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@android:color/transparent"
        android:orientation="vertical"
        android:padding="@dimen/widget_listview_padding">

        <ListView
            android:id="@+id/lv_widget"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:divider="@null"
            android:dividerHeight="0dp" />
    </LinearLayout>

</FrameLayout> 
```

然后我在 R.drawable 中定义了drawables，如下所示：

红色.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid android:color="#F44336" />
</shape> 
```

当用户通过 SharedPrefs 更改背景时，我必须执行以下操作：

```
 Intent intent = new Intent(context, WidgetProvider.class);
        intent.setAction("android.appwidget.action.APPWIDGET_UPDATE");
        intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);
        context.sendBroadcast(intent); 
```

然后在 AppWidgetProvider 的 onUpdate() 函数中，我执行以下操作：

```
@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWdgetIds) {
    try {
        RemoteViews remoteViews;
        for (int appWdgetId : appWdgetIds) {
            remoteViews = updateWidgetListView(context, appWdgetId);
            appWidgetManager.updateAppWidget(appWdgetId, remoteViews);
        }
        super.onUpdate(context, appWidgetManager, appWdgetIds);
    } catch (Exception e) {
        e.printStackTrace();
    }
}

private RemoteViews updateWidgetListView(Context context, int appWidgetId) {
    //which layout to show on widget
    RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
    Intent svcIntent = new Intent(context, WidgetService.class);
    svcIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);        svcIntent.setData(Uri.parse(svcIntent.toUri(Intent.URI_INTENT_SCHEME)));
    remoteViews.setRemoteAdapter(appWidgetId, R.id.lv_widget, svcIntent);

    setBackground(context, remoteViews);

    return remoteViews;
}

private void setBackground(Context context, RemoteViews remoteViews) {
    String background = Utils.getStringValue(context, R.string.pref_widget_backgroundcolor_key,
            R.string.pref_widget_backgroundcolor_default);

    if (!TextUtils.isEmpty(background)) {
        int identifier = context.getResources().getIdentifier(
                background, "drawable", context.getPackageName());
        remoteViews.setImageViewResource(R.id.iv_widget_background, identifier);
    }
} 
```

结果：

[![在此处输入图像描述](../Images/9936945013f78898fcb2816860f9ff87.png)](https://i.stack.imgur.com/Gh9i7.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-25T22:06:04.377

一种简单可靠的方法是创建一个 imageview 并用我们想要的颜色填充位图：

```
 Bitmap image = Bitmap.createBitmap(10, 10, Bitmap.Config.ARGB_8888);
  Canvas canvas=new Canvas (image);
  canvas.drawColor (Color.parseColor(color));
  contentView_big.setImageViewBitmap(R.id.ntp_colorhint, image); 
```

# jquery - 为什么 .remove() 在我的设置中不起作用？

> ID：13501499
> 
> 赞同：1
> 
> 时间：2012-11-21T20:23:09.127
> 
> 标签：jquery, html, css

我目前正在 jQuery 中做我的第一步，并且在[`.remove()`](http://api.jquery.com/remove/). 已经有很多有类似问题的人提出了问题，但他们没有帮助我。

在 HTML 文件中，我有一个表单和以下内容`div`，用作警报框并显示表单是否正确验证。在其原始状态中，`div`包含一个用于关闭它的按钮。

```
<div id="my-form-alert-box">
    <button id="my-form-alert-button" type="button" class="close">x</button>
</div> 
```

首次加载 HTML 页面时，不应显示警告框。这就是我添加以下 CSS 的原因：

```
<style type="text/css">
    #my-form-alert-box {display: none;}
</style> 
```

当表单被提交和验证时，我附加`<p>some text</p>`到这个`div`，然后显示警告框。当我使用按钮关闭警报框时，它会消失但`<p>some text</p>`不会被删除。为什么会这样？

这是我的 jQuery 代码：

```
$(document).ready(function() {

    var $myFormAlertBox = $('#my-form-alert-box');
    var $myFormAlertBoxParagraph = $('#my-form-alert-box p');

    $('#my-form-alert-button').on('click', function(event) {

        $myFormAlertBoxParagraph.remove();
        $myFormAlertBox.hide();

    });

    $('#my-form').on('submit', function(event) {

        $.ajax({
            // ...
            success: function(data) {

                // The content of the alert box should be removed
                // and the alert box itself should be hidden also when
                // the form gets submitted again and not only when the
                // button is clicked
                $myFormAlertBoxParagraph.remove();
                $myFormAlertBox.hide();

                // data contains <p>some text</p>
                $myFormAlertBox.append(data).show(); 
            }

        });

        event.preventDefault();

    });        

}); 
```

附加数据工作正常，但删除它不会。你能帮助我吗？非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:36:01.067

我认为您的选择器在您更新内容之前正在运行。选择器只有在最初运行时才能看到其中的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:25:54.470

您对 $myFormAlertBoxParagraph 的初始分配将失败，因为在调用它时您的标记中没有段落。在您的标记中添加一个“占位符”段落应该可以解决它。这解释了为什么 .remove() 会失败。

对于您的 ajax，请尝试这样的操作来保持分配给变量的新值：

```
//...
$.ajax({
    // ...
    success: function(data) {
        // Remove the existing paragraph.
        $myFormAlertBoxParagraph.remove();

        // This updates the paragraph object with the new one.
        $myFormAlertBoxParagraph = $(data);

        // Add the new paragraph and ensure the alert box is visible.
        $myFormAlertBox.append($myFormAlertBoxParagraph).show();
    }
});
//... 
```

这将从警告框中删除段落标记，并添加新的。无需 .hide() 它，然后立即 .show() 它。但是，如果单击事件将其隐藏，则在 .append() 之后添加 .show() 将覆盖您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T20:35:54.883

jQuery 对象不存在。在附加`<p>`. 所以这个对象是空的，并且“永远”是空的，因为你永远不会重新分配它。

# javascript - 无法获得 9GAG 提要

> ID：13501500
> 
> 赞同：1
> 
> 时间：2012-11-21T20:23:11.087
> 
> 标签：javascript, windows-8, rss, winjs, feedburner

我正在使用 RSS Feeds 和 WinJS 为 Windows 8 创建一个 9GAG 阅读器应用程序。

代码：

```
function downloadBlogFeed() {
    WinJS.xhr({ url: "http://feeds.feedburner.com/9GAG" }).then(function (rss) {
        var items = rss.responseXML.querySelectorAll("item");

        for (var n = 0; n < items.length; n++) {
            var article = {};
            article.title = items[n].querySelector("title").textContent;
            var thumbs = items[n].querySelectorAll("thumbnail");
            if (thumbs.length > 1) {
                article.thumbnail = thumbs[1].attributes.getNamedItem("url").textContent;
                article.content = items[n].textContent;
                articlesList.push(article);
            }
        }
    });
} 
```

问题是我无法从 FeedBurner 获得 9GAG Feed。我收到此错误：

```
Can't load http://feeds.feedburner.com/~d/styles/itemcontent.css. An app can’t load remote web content in the local context. 
```

我也试过改变

```
WinJS.xhr({ url: "http://feeds.feedburner.com/9GAG" }) 
```

和

```
WinJS.xhr({ url: "http://9gag.com/?feed=rss" }) 
```

但我收到此错误：

```
Exception is about to be caught by JavaScript library code at line 50, column 13 in ms-appx://7df7a30e-2f19-4f36-b368-c456fde8aabd/js/default.js
0x800a138f - JavaScript runtime error: Unable to get property 'querySelectorAll' of undefined or null reference
File: default.js 
```

它指向这一行：

```
var items = rss.responseXML.querySelectorAll("item"); 
```

你能帮我，做对吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:08:03.737

干得好：

不幸的是，有一些黑客来获取图像，但可惜它可以工作，这就是使用 3rd 方 RSS 提要的生活。

```
WinJS.xhr({ url: "http://feeds.feedburner.com/9GAG", responseType: 'responseXML' }).then(function (rss) {
    var items = rss.responseXML.querySelectorAll("item");

    for (var n = 0; n < items.length; n++) {
        var article = {};
        article.title = items[n].querySelector("title").textContent;
        var imageStart = items[n].textContent.indexOf('<img src="') + 11;
        var imageEnd = items[n].textContent.indexOf('"', imageStart);

        article.thumbnail = items[n].textContent.substring(imageStart, imageEnd);
        article.content = items[n].textContent;
        articlesList.push(article);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T16:49:12.057

9GAG RSS feed 现在已经死了，尝试使用像[http://9gagrss.com/这样的镜像](http://9gagrss.com/)

# html - 我想让我的内容区域在我的固定导航栏上滚动，而不是在下面。如何？

> ID：13501501
> 
> 赞同：3
> 
> 时间：2012-11-21T20:23:12.777
> 
> 标签：html, css, navigationbar

我正在构建的网站有一个大的背景标题图像，顶部有一个透明的固定导航栏。在此处查看：www.bedriftsdesign.no

现在，当您滚动内容时，按计划滚动标题图像，但是当它到达导航栏时，我希望它消失在内容下方，就像标题背景一样，但它保持在顶部。要查看我想要获得的效果，请查看此处：[http ://www.googleventures.com/](http://www.googleventures.com/)

关于如何解决这个问题的任何想法？我试过弄乱 z-indexes，但还没有结果。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:41:42.840

将以下 CSS添加到`<feature>`包含所有内容的标签中：

```
feature{
  position:relative;
  z-index:10;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T15:26:43.743

如果它对您有用，您可能应该将其作为答案:)。

# matlab - Matlab padarray 函数

> ID：13501502
> 
> 赞同：2
> 
> 时间：2012-11-21T20:23:17.253
> 
> 标签：matlab, image-processing

我有一个 size 的图像`350X450`。我正在尝试用零填充表示图像的矩阵，使原始矩阵位于新填充矩阵的中心，新维度为`700X900`. 这是我想做的事情：

![原始图像和所需图像](../Images/fefab953b0e36f80142c2b0bf8563a89.png)

我正在尝试使用`padarray`函数来实现它：

（假设**w**是所需的宽度，**h**是所需的高度，**im**是图像（矩阵））

```
new_image=paddarray(im, [0.5*w 0.5*h]); 
```

我没有得到想要的结果。我错过了什么？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T20:30:14.427

你的语法是正确的，你应该设置`w = ceil((700-350)/2)`and `h = ceil((900-450)/2)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:29:31.567

正如帮助条目所说：

```
B = padarray(A,PADSIZE) 
```

> 沿 A 的第 k 维用 PADSIZE(k) 个零填充数组 A。

```
padarray([1 2; 3 4],[1 1]) %makes a 4x4 matrix 
```

你不想用 w 和 h 填充，你想用

`(wDesired - wCurrent)/2 %floor or ceil`，取决于你的心情。

# java - 会话 bean 和实体 bean 以及有状态会话 bean 和无状态会话 bean 之间的区别

> ID：13501503
> 
> 赞同：1
> 
> 时间：2012-11-21T20:23:17.070
> 
> 标签：java, ejb

我用SSH有一段时间了，有朋友问我什么是bean，session bean和entity bean的区别，stateful session bean和stateless session bean的区别，这些概念是不是只有EJB才有（我也想问EJB 与 SSH 有什么关系），还是它们是一般概念？它们是什么？

我的意思是 SSH 是 Spring Struts 和 Hibernate，其实我不知道他们三个和 EJB 有什么关系？

我想知道bean是EJB上下文中的概念吗？而当我们谈论其他框架如 SSH 时，我们从来没有提到过 bean？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-21T20:33:53.743

> 什么是豆

在 EJB 的上下文中，bean 是由容器管理的类。

> 会话 bean 和实体 bean 之间

会话 bean 表示逻辑，而实体 bean 表示持久对象。这些天来，不再使用实体 bean 来支持 JPA 实体。

> 有状态会话 bean 和无状态会话 bean 之间的区别

一旦获得对有状态会话 bean 的引用，您将始终使用该特定实例。无状态会话 bean 被随机收集并返回给客户端。

> 这些概念只存在于 EJB 中

是的，虽然 bean 也存在于 Spring 框架中，但含义相似，但设计概念不同。

> EJB 与 SSH 有什么关系吗

您可以使用 SCP 通过 SSH 部署 EJB。但说真的，您似乎将 SSH 与...混淆了？

# json - 使用 document.image 将 JSON 图像元素打印到浏览器

> ID：13501504
> 
> 赞同：0
> 
> 时间：2012-11-21T20:23:17.627
> 
> 标签：json, document.write

我有一个 JSON，我已将字符串和图像加载到其中，但无法弄清楚如何将图像打印到浏览器。

如果“document.write(diary_1938[pageRef].date_1);” 将字符串打印到浏览器，图像的等效代码是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:53:16.537

你到底想做什么？有许多 JavaScript 库使这件事在客户端变得更加容易，因为它们允许轻松地直接进行 DOM 操作。我使用道场；jQuery 非常流行。

听起来您想要做的是生成一个图像标签来引用图像。

例如，类似于

```
document.write("<img src='img.png' height='10' width='20'>"); 
```

当然，document.write 不是一种可靠的做法——直接的 DOM 操作，有或没有您选择的实用程序库通常是更好的方法。

# dependencies - 使用 CassandraUnit 和 Astyanax 的依赖问题

> ID：13501506
> 
> 赞同：3
> 
> 时间：2012-11-21T20:23:24.697
> 
> 标签：dependencies, cassandra, google-code, astyanax

我有一个 SessionDaoCassandraImpl 类，它使用 Astyanax 从 Cassandra 读取数据，我想用嵌入式 Cassandra 服务器进行测试。[CassandraUnit](https://github.com/jsevellec/cassandra-unit)似乎很完美，但我遇到了一个例外

```
ERROR - 2012-11-21 14:54:34,754 - AbstractCassandraDaemon.activate(370) | Exception encountered during startup
java.lang.NoSuchMethodError: com.googlecode.concurrentlinkedhashmap.ConcurrentLinkedHashMap$Builder.maximumWeightedCapacity(I)Lcom/googlecode/concurrentlinkedhashmap/ConcurrentLinkedHashMap$Builder;
    at org.apache.cassandra.cache.ConcurrentLinkedHashCache.create(ConcurrentLinkedHashCache.java:70) 
```

该异常记录[在这里，](http://mail-archives.apache.org/mod_mbox/cassandra-commits/201206.mbox/%3C1754923128.8168.1339517923307.JavaMail.jiratomcat@issues-vm%3E) 但我不明白我今天能做些什么来解决它。

以下是我使用的 pom 依赖项：

```
 ...

      <dependency>
        <groupId>org.cassandraunit</groupId>
        <artifactId>cassandra-unit</artifactId>
        <version>1.1.1.1</version>  
        <!-- <version>1.1.0.1</version> --> 
        <!-- version 1.1.0.1 leads to java.lang.NoSuchMethodError:  
        com.googlecode.concurrentlinkedhashmap.ConcurrentLinkedHashMap$Builder.maximumWeightedCapacity -->      
        <!-- <version>0.8.0.2.4</version> -->
        <!-- version 0.8.0.2.4 leads to ERROR - 2012-11-21 14:28:45,774 - 
        DatabaseDescriptor.loadYaml(479) | Fatal configuration error error -->      
        <scope>test</scope>
    </dependency>

  ... 
```

无论我使用 1.1.1.1 还是 1.1.0.1，我都会遇到同样的异常。

* * *

**我尝试过的事情我**

还尝试添加对负责异常的类的排除，重新添加最新版本 1.3.1 作为另一个依赖项：

```
 ...  

    <dependency>
        <groupId>org.cassandraunit</groupId>
        <artifactId>cassandra-unit</artifactId>
        <version>1.1.1.1</version>
        <scope>test</scope>
        <exclusions>
            <exclusion>
                <groupId>com.googlecode.concurrentlinkedhashmap</groupId>
                <artifactId>concurrentlinkedhashmap-lru</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>com.googlecode.concurrentlinkedhashmap</groupId>
        <artifactId>concurrentlinkedhashmap-lru</artifactId>
        <version>1.3.1</version>
    </dependency>
   ... 
```

除了例外，这也无济于事。

这是在我运行 EmbeddedCassandraServerHelper.startEmbeddedCassandra() 后立即生成异常的代码；

```
import java.io.IOException;

import org.apache.cassandra.config.ConfigurationException;
import org.apache.thrift.transport.TTransportException;
import org.cassandraunit.DataLoader;
import org.cassandraunit.dataset.xml.ClassPathXmlDataSet;
import org.cassandraunit.utils.EmbeddedCassandraServerHelper;
import org.junit.Before;
import org.junit.Test;

import com.netflix.astyanax.AstyanaxContext;
import com.netflix.astyanax.Keyspace;
import com.netflix.astyanax.connectionpool.NodeDiscoveryType;
import com.netflix.astyanax.connectionpool.impl.ConnectionPoolConfigurationImpl;
import com.netflix.astyanax.connectionpool.impl.CountingConnectionPoolMonitor;
import com.netflix.astyanax.impl.AstyanaxConfigurationImpl;
import com.netflix.astyanax.thrift.ThriftFamilyFactory;

public class SessionDaoCassandraTestIT {

  private SessionDaoCassandraImpl sessionDao;

  @Before
  public void init() throws TTransportException, IOException,
  InterruptedException, ConfigurationException {

    EmbeddedCassandraServerHelper.startEmbeddedCassandra();
    final DataLoader dataLoader = new DataLoader("Test Cluster", "localhost:9171");
    dataLoader.load(new ClassPathXmlDataSet("cassandraDataSet.xml"));

    /* Doing this below instead of extending AbstractCassandraUnit4TestCase because
     * getDataSet.getKeySpace() returns a Hector keyspace but we want to use Astyanax
     * instead */

    /* Code below inspired from
     * http://pio-tech.blogspot.com/2012/07/unitintegration-testing-with-maven-and.html */
    final AstyanaxContext<Keyspace> context = new AstyanaxContext.Builder()
    .forCluster("Test Cluster")
    .forKeyspace("sessiondata")
    .withAstyanaxConfiguration(
            new AstyanaxConfigurationImpl()
            .setDiscoveryType(NodeDiscoveryType.NONE))
            .withConnectionPoolConfiguration(
                    new ConnectionPoolConfigurationImpl("testConnectionPool")
                    .setPort(9171).setMaxConnsPerHost(1)
                    .setSeeds("localhost:9171"))
                    .withConnectionPoolMonitor(new CountingConnectionPoolMonitor())
                    .buildKeyspace(ThriftFamilyFactory.getInstance());
    context.start();
    final Keyspace keyspace = context.getEntity();
    sessionDao = new SessionDaoCassandraImpl(keyspace);

  }

  @Test
  public void shouldDisplayAccountFromSessionCreatedByDataLoader() {
    System.out.println(sessionDao.getSession("72b97796-b1b3-4220-ba03-ba7e9ecfe946").get().getAccount());
  }

} 
```

最后，这是我的 cassandraDataTest.xml 的开头：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<keyspace xmlns="http://xml.dataset.cassandraunit.org">
    <name>sessiondata</name>
    <columnFamilies>
        <columnFamily>
            <name>session</name>
            <keyType>UTF8Type</keyType>
            <comparatorType>UTF8Type</comparatorType>
            <defaultColumnValueType>UTF8Type</defaultColumnValueType>
            <row>
                <key>72b97796-b1b3-4220-ba03-ba7e9ecfe946</key>
                <column>
                    <name>account</name>
                    <value>account</value>
                </column>
 ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:59:23.133

原来我的项目使用的 astyanax 库调用了比 1.1.1 更旧的 cassandra 版本。在 pom 中添加排除解决了我的问题：

```
 <dependency>
        <groupId>com.netflix.astyanax</groupId>
        <artifactId>astyanax</artifactId>
        <version>1.0.4</version>
        <exclusions>
            <exclusion>
                <groupId>org.apache.cassandra</groupId>
                <artifactId>cassandra-all</artifactId>
            </exclusion>
        </exclusions>
    </dependency> 
```

# android - 如何设置android接近警报的准确性

> ID：13501509
> 
> 赞同：1
> 
> 时间：2012-11-21T20:23:28.843
> 
> 标签：android, proximity

我想知道每个触发的接近警报的准确性。有什么方法可以获取这些信息吗？我可以使用 locationManager.getLastKnownLocation() 吗？如果准确性不好，有什么方法可以告诉系统不要发出警报？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:29:32.183

> 我想知道每个触发的接近警报的准确性。有什么方法可以获取这些信息吗？

您调用的每个更新`LocationListener`都会传递一个`Location`新事件的对象。此对象具有`getAccuracy()`可用于获取该信息的方法。

> 如果准确性不好，有什么方法可以告诉系统不要发出警报？

`LocationManager.requestLocationUpdates()`，仅允许您根据每次更新之间的时间或距离来控制更新频率。它不允许您根据准确性控制从管理器获取更新；您将需要使用更新中的信息来决定是否保留每个报告。

# php - 使用 txt 文件的 PHP 注释框

> ID：13501510
> 
> 赞同：2
> 
> 时间：2012-11-21T20:23:33.353
> 
> 标签：php, web-applications

我需要使用 txt 文件或其他任何可以被动查询的内容来创建评论框，而无需使用数据库服务器。由于我对 PHP 编程相当陌生，所以第一个想法是使用文本文件。就我在逻辑上能想到的而言，一般而言，完成此操作的代码是：

```
 <html>
<head></head>
<body>
<form method = "post">
<textarea name = "txt" cols = "25" rows = "5">
Place your comment here ...
</textarea><br><br>
<input type = "submit" value = "Submit" onclick = "<?php
    $com = $_POST["txt"];
    $file = fopen("inrg.txt", "a");
    fwrite($file, "<br>");
    for($i=0; $i <= strlen($com) - 1; $i++)
        {
        fwrite($file, $com[$i]);
        if($i % 37 == 0 && $i != 0)
            fwrite($file, "<br/>");
        }
    fwrite($file, "<br>------------------------------------------");
    fclose($file);
?>">
<br>
</form>
<font face = "Times New Roman"><b><p>Textul introdus este: </p></b></font>
<font face = "Comic Sans MS" color = "red" size = "2" >
<?php
$file = fopen("inrg.txt", "r");
echo fread($file, filesize("inrg.txt"));
fclose($file);
?>
</font>
</body>
</html> 
```

还没有什么花哨的，它确实需要在美学方面进行一些改进。问题是在我在评论框中提交内容后，它会正确显示，但如果我在网络浏览器中重新加载，最后发布的评论会再次发布，就像我重新加载页面一样多次。此外，如果 PHP 有办法使最初的“将您的评论放在这里...”消失

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:56:04.350

```
 <!doctype html>
    <html>
      <head>
        <meta charset="UTF-8">
        <title>Example document</title>
      </head>
      <body>
<?php
// the relative path to the file
$fname = "theFile.txt";
// read in the file if present
if(file_exists($fname)) $txt = file_get_contents($fname);

// if the user pushes the submit button
if(isset($_POST["txt"])){
    $txt = $_POST["txt"];   // get the entered content
    file_put_contents($fname,$txt);    // write the content to the file
}
?>
<form method="post" action="#">
<textarea name = "txt" cols = "25" rows = "5">
<?php echo $txt; ?>
</textarea><br />
<input type="submit" name="submit" value="submit" />
</form>
      </body>
    </html> 
```

脚本所在的文件夹必须可由 PHP (=WebServer) 写入。这个脚本很关键，没有安全措施防止跨端脚本黑客攻击。可能有关于换行的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:42:58.787

这是将页面重定向到自身的一种方法：

```
<html>
<head></head>
<body>
<form method="post">
  <textarea name="txt" cols="25" rows="5"></textarea>
  <br><br> <input type="submit" value="Submit" name="submit" />

  <?php
  if ( isset( $_POST[ 'submit' ] ) ) {
    $com  = $_POST[ "txt" ];
    $file = fopen( "inrg.txt", "a" );
    fwrite( $file, "<br>" );
    for ( $i = 0; $i <= strlen( $com ) - 1; $i++ ) {
      fwrite( $file, $com[ $i ] );
      if ( $i % 37 == 0 && $i != 0 ) fwrite( $file, "<br/>" );
    }
    fwrite( $file, "<br>------------------------------------------" );
    fclose( $file );
   echo '<script type="text/javascript">window.location ="";</script>'; // Add here
  }
  ?>

  <br>
</form>
<font face="Times New Roman"><b><p>Textul introdus este: </p></b></font>
<font face="Comic Sans MS" color="red" size="2">
  <?php
  if (file_exists("inrg.txt")) {
  $file = fopen( "inrg.txt", "r" );
  echo fread( $file, filesize( "inrg.txt" ) );
  fclose( $file );
  }
  ?>
</font>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:49:59.753

试试这个：

另一个页面.php

```
<?php
        if($_POST){ // is a message has been posted

            $fp = fopen('inrg.txt', 'a'); // open the text file and append using the 'a'
            fwrite($fp, $_POST['txt']."\n");
            fclose($fp);
            $message_message_to_user = "Message added to file. Wait a sec and you will be redirected.";
        }

            header("Location: theformpage.php"); // regardless of if there is a post - send the user back to the original page
            exit();
?> 
```

表单页面.php

```
<html>
<head>
</head>
<body>
<form method="post" action="anotherpage.php">
    <textarea name = "txt" cols = "25" rows = "5">Place your comment here ...</textarea><br><br>
    <input type = "submit" value="Submit">
    <br>
</form>
<hr />
<?php
    // this reads all of the lines of the file and spits them out on the screen
    $fh = fopen('inrg.txt','r');
    while ($line = fgets($fh)){
        echo nl2br($line); // nl2br() converts new lines to <br>'s
    }
    fclose($fh);

?>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T20:50:13.380

让我们分部分来：

1）评论被一遍又一遍地发布，因为您在重新加载时重新提交表单。为避免这种情况，您需要在发布后重定向页面。这种技术称为`Redirect after Post`. 你应该搜索它，它很有趣。

2) PHP 没有办法使文本消失，因为当页面加载完成时，PHP 将完成执行。为此，您需要学习 Javascript。我也在学习 JavaScript，我认为这很困难，但是阅读《Simply Javascript》这本书，它会很好地向您介绍 JS。

只是为了让你知道，你必须在你的评论框上听“onClick”事件，然后调用一个 JS 函数来清除评论框。

会是这样的：

```
... id="thisBoxId" onclick="cleartext('thisBoxID')" >Enter a comment here...<... 
```

和JS：

```
function cleartext( myitem ) {
   myitem.text.value = "";
} 
```

当然，一旦完成，文本将永远不会回来，直到您重新加载页面。为了让它回来，你应该使用`onLostFocus`事件来重新填充文本。

# html - 如何将 iframe 放在前面

> ID：13501512
> 
> 赞同：4
> 
> 时间：2012-11-21T20:23:35.617
> 
> 标签：html, css, z-index

我在由页眉和页脚包围的页面上遇到 iframe 问题。

标题中有一个与 iframe 重叠的 div（下面为蓝色）。
![在此处输入图像描述](../Images/350d0cc216b7725a3a7b6944698ccabc.png)

带有 id 徽标的 div 如下所示：

```
 #logo {
      z-index: 9998;
      position: absolute;
      top: 10px;
      left: 0px;
  } 
```

页面的白色部分是 iframe。

```
 <iframe src="somepage" scrolling="auto" class="study-iframe" style="height:700px;"></iframe> 
```

“课程属性是什么意思？” 是一个链接。

```
 <div id="Attr1View1">
         <p>
         <a href="javascript:Toggle2Views('Attr1View2', 'Attr1View1')">
         <font class="LinkNoUnderline">+ </font>
         <font class="LinkNoUnderlineText">What does a course attribute mean?</font>
         </a>
         </p>
     </div> 
```

当我单击蓝色矩形覆盖的区域时，什么也没有发生。

当我单击蓝色矩形外的区域时，链接有效。

我怎样才能将此页面上的链接强制放在前面，以便您可以随时点击它们？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-03T20:14:08.450

**布局** 与布局确保您不使用位置，因为它会使网页在其他浏览器和屏幕分辨率上迷失方向。

**IFrame** 如果您要使用 Positions 保留布局，那么一个简单的方法是......

```
iframe{
    width:100px;
    height:100px;
    position:absolute;
    z-index: 9999;
} 
```

请克制定位您的布局。

# php - AJAX 调用在没有明显原因的情况下破坏会话

> ID：13501520
> 
> 赞同：6
> 
> 时间：2012-11-21T20:24:11.993
> 
> 标签：php, javascript, ajax, session

我知道这看起来像是一个平庸的问题，但请阅读整篇文章，我对此感到困惑。

我的一个页面上有一个 AJAX 调用，它是一个动态消息传递系统：

```
function validateMessage(){

  var recipient = document.getElementById("send_to").value;
  var subject = document.getElementById("popup_subject").value;
  var message = document.getElementById("popup_message").value;

  var parameters="message="+message+"&recipient="+recipient+"&subject="+subject;

   if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
   }
   else
   {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }

   xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        document.getElementById("error_mess").innerHTML = xmlhttp.responseText;
    }
  }

  xmlhttp.open("POST","include/send_message.php",false);
  xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
  xmlhttp.send(parameters);

  } 
```

它被实现为同步是有原因的，这不是这里的问题。我尝试切换到异步，但问题仍然存在。

这是 send_message.php 文件，它只是抓取 POST 变量并将它们保存到数据库中：

```
<?php
session_start();
include('db.php');
dbConnect();

$message=$_POST['message'];
$subject=$_POST['subject'];
$recipient=$_POST['recipient'];

$result=mysql_query("select * from korisnici where username='$recipient' ") or die(mysql_error());
$row=mysql_fetch_array($result);
$num=mysql_num_rows($result);

if($recipient=="Poruka za..." || $subject=="Naslov..." || $message=="Poruka" || $recipient=="" || $subject=="" || $message=="")
    echo "<p style='color:red;'>Morate popuniti sva polja.</p>";
elseif($num==0)
    echo "<p style='color:red;'>Korisnik ne postoji.</p>";
else{
    $prima=$row['id_user'];
    $salje=$_SESSION['id_user'];
    mysql_query("insert into poruke (salje, prima, naslov, poruka)
        values ('$salje', '$prima', '$subject', '$message') ") or die(mysql_error());
    echo "<p style='color:green;'>Poruka uspješno poslata!</p>";
}

?> 
```

但是，当我尝试保存 $_SESSION['id_user'] 变量（作为发件人）时，我发现了一个问题 - 每次运行此 AJAX 调用时会话都会被破坏！所以在打印一个空数组`print_r($_SESSION)`之后立即执行。`session_start()`

会话在原始页面本身上处于活动状态，刷新该页面使会话保持活动状态。只有当我单击按钮进行 AJAX 调用时，会话才会消失。有人可以发现问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:58:59.200

请检查表格的开始和结束，非常重要的是，请检查您是否将按钮设置为 onclick 并返回 false。如果没有，它将重定向并且在那里没有会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:19:58.450

这是我的托管服务提供商的技术支持团队给我的解决方案：

在 /home/username/public_html 中设置 suhosin.session.encrypt=Off

在 .htaccess 中设置 suPHP_ConfigPath /home/username/public_html。

就是这样，现在可以工作了。目前没有时间研究这些设置，但我希望这会对处于相同情况的人有所帮助。

# javascript - 替代文本区域？

> ID：13501521
> 
> 赞同：0
> 
> 时间：2012-11-21T20:24:28.220
> 
> 标签：javascript, asp.net, html, textarea, text-editor

HTML 标记很枯燥，`<TEXTAREA>`没有提供任何编辑选项。问题是：是否有一个替代的、易于集成的控制器，客户端可以在其中编辑代码并返回一个具有相同书写的字符串，编码为 HTML？如果有，我怎样才能将它整合到我的网站中？（在我的情况下，它是基于 C# ASP.NET 的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:33:41.243

您可以使用 HTML5 中的 contenteditable 属性，它可以让您编辑标签，例如`<p>`或`<h1>` 示例：

```
<p contenteditable="contenteditable">hello!</p> 
```

# jquery - 用于将 Facebook 提要 (RSS) 拉入网页的 jQuery 插件？

> ID：13501524
> 
> 赞同：0
> 
> 时间：2012-11-21T20:24:47.193
> 
> 标签：jquery, facebook, facebook-graph-api

我想要一种快速而肮脏的方式，在网站上包含来自 Facebook 的提要（帖子或/和评论，如果可能的话，图片），但不想使用 FB 的标准“喜欢框”。

所以，我发现了这个：http: [//jquery-plugins.net/FeedEk/FeedEk.html](http://jquery-plugins.net/FeedEk/FeedEk.html)

还有其他更好的吗？我见过其他 jQuery RSS 阅读器，但它们似乎需要额外的服务器端脚本才能真正获取数据。上面的这个插件是纯 JS 虽然我不能确切地知道它是如何获取信息的（没有产生某种安全警告？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T21:15:31.097

FeedEk 仅用于常规 RSS 提要。如果您想提取 facebook 提要，您必须创建一个应用程序，因为这需要访问令牌。所以，要么有一个插件已经使用了一个应用程序，而你正在将洞察力/统计数据的机会交给另一个程序员，要么你自己使用 PHP SDK 来做：

> [https://developers.facebook.com/docs/reference/php/](https://developers.facebook.com/docs/reference/php/)

这很简单，您只需要一个应用访问令牌，无需用户登录。

```
$app_accesstoken = APP-ID . '|' . APP-SECRET; 
```

（你真的不需要这个，如果你使用 PHP SDK，没有用户登录应该已经设置）

这是 PHP SDK 的下载，如果您向下滚动，还有一个使用小教程：

> [https://github.com/facebook/facebook-php-sdk](https://github.com/facebook/facebook-php-sdk)

# .net - 每个序列化程序都支持 OnDeserializedAttribute 吗？

> ID：13501525
> 
> 赞同：2
> 
> 时间：2012-11-21T20:24:48.673
> 
> 标签：.net, serialization, deserialization

我刚刚在 MSDN 上偶然发现了[OnDeserializedAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.ondeserializedattribute.aspx)。描述说

> 应用于方法时，指定在对象图中的对象反序列化后立即调用该方法。相对于图中其他对象的反序列化顺序是不确定的。

问题

1.  *是否为任何*序列化程序调用具有此属性的方法？
2.  如果是这样，.NET 如何确保为任意序列化程序调用该方法？
3.  如果不支持，是否所有“通用”序列化器（BinaryFormatter、XmlSerializer、JSON 序列化器、DataContractSerializer）都支持？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T20:35:27.460

1.  不[，它不适用于 XmlSerializer](https://stackoverflow.com/questions/2897166/why-does-the-ondeserialization-not-fire-for-xml-deserialization)。
2.  它不做任何强制执行。这是序列化程序的“选择加入”功能。
3.  它确实适用于 BinaryFormatter 和 DataContractSerializer。

# php - 新手的 simple_html_dom 示例帮助

> ID：13501527
> 
> 赞同：1
> 
> 时间：2012-11-21T20:24:52.393
> 
> 标签：php, screen-scraping, simple-html-dom

我正在尝试学习 simple_html_dom 语法，但我运气不佳。有人可以给我看一个例子吗：

```
<div id="container">
  <span>Apples</span>
  <span>Oranges</span>
  <span>Bananas</span>
</div> 
```

如果我只想返回值 Apples、Oranges 和 Bananas。

我可以简单地使用 php simple_html_dom 类还是我还必须使用 xcode、curl 等？

更新：我能够让它工作，但不相信这是获得我需要的最有效的方式：

```
foreach ($html->find('div[id=cont]') as $div);
foreach($div->find('span') as $element) 
echo $element->innertext . '<br>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:27:08.103

```
// Create DOM from URL or file
$html = file_get_html('http://www.google.com/');

// Find all images 
foreach($html->find('img') as $element) 
       echo $element->src . '<br>';

// Find all links 
foreach($html->find('a') as $element) 
       echo $element->href . '<br>'; 
```

你的建议是正确的：

```
foreach ($html->find('div[id=cont]') as $div);
foreach($div->find('span') as $element) 
echo $element->innertext . '<br>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T03:20:04.663

更简单地说：

```
foreach($html->find('div#container span') as $element)
  echo $element->innerText(); 
```

这意味着任何从具有 id: 容器的 div 下降的跨度

# sql-server - 连接失败：SQLState：'01000' SQL Server 错误：10061

> ID：13501528
> 
> 赞同：5
> 
> 时间：2012-11-21T20:24:58.067
> 
> 标签：sql-server, sql-server-2008-r2, database-connection

我正在尝试将我的访问前端连接到 SQL Server 后端。

当 SQL Server 在我的计算机上时它正在工作，但现在我正在尝试连接到服务器

所以当我创建具有访问权限的 DSN 文件时

1.  我选择了 SQL-Server 驱动程序（我也尝试过使用 SQL-Server native 10.0）
2.  我输入了从 SQL Management Studio 复制的服务器名称，所以那里没有错字
3.  我选择了NT认证

然后我有这个错误

![在此处输入图像描述](../Images/b48179928617b3d148069b3f0f5edf25.png)

在属性中，我尝试使用`TCP/IP`默认端口 1433，也尝试使用名称管道

我确保选中了允许远程连接的复选框

如果我尝试与管理工作室连接，我会收到此错误

![在此处输入图像描述](../Images/cd388040f2dc49da4edd66464f5191eb.png)

我在网络上浏览时可以看到服务器

我正在尝试解决[此](http://blogs.msdn.com/b/sql_protocols/archive/2007/07/19/tcp-provider-no-connection-could-be-made-because-the-target-machine-actively-refused-it.aspx)问题，但我坚持使用 telnet 命令。它说`Could not open connection to host on 1433`

我也试过没有端口，我在端口 23 上遇到了同样的错误

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-08T08:05:29.477

1.  Windows 防火墙阻止了 sql 服务器。即使您从异常中打开 1433 端口，在客户端计算机中它也会将连接点设置为动态端口。还将 sql server 添加到异常中。

"C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\Binn\Sqlservr.exe"

[更多信息](https://technet.microsoft.com/en-us/library/ms175043(v=sql.110).aspx)

2.  [这个](https://blogs.msdn.microsoft.com/spike/2008/11/07/sql-server-error-10060-sql-server-error-10061/)页面帮助我解决了这个问题。尤其

> 或者，如果您觉得勇敢，请在注册表中找到别名并将其删除。
> 
> HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\MSSQLServer\Client\ConnectTo\

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-25T07:45:55.287

## **要为 SQL Server 创建新的数据源，请执行以下步骤：**

1.  在主机/服务器中，转到 Sql server management studio --> 打开左侧的安全部分 --> 右键单击​​登录，选择新登录，然后为要连接的数据库创建一个新帐户。

2.  检查 TCP/IP 协议是否启用。转到所有程序 --> Microsoft SQL server 2008 --> 配置工具 --> 打开 Sql server 配置管理器。在左侧选择客户端协议（基于您的操作系统 32/64 位）。在右侧，选中 TCP/IP 协议已启用。

3.  在远程计算机/服务器中，打开数据源管理员。控制面板 --> 管理工具 --> 数据源 (ODBC)。

4.  在 User DSN 或 System DSN 中，单击 Add 按钮并选择 Sql Server driver 然后按 Finish。

5.  输入名字。

6.  输入服务器，注意：如果要输入主机地址，则应输入该IP地址，不带“\\”。例如。192.168.1.5，然后按下一步。

7.  选择使用用户输入的登录 ID 和密码进行 SQL Server 身份验证。

8.  在下面输入您在第一步创建的登录 ID 和密码。然后单击下一步。

9.  如果显示的数据库是您的数据库，请单击下一步，然后单击完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-26T06:56:30.873

我遇到了同样的错误，不需要担心这个错误，只需重新启动服务器并重新启动 SQL 服务。这个问题出现在磁盘空间不足的情况下，系统会进入挂起状态，然后sql服务会自动停止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-26T07:41:26.040

在以下错误消息中收到 SQLSTATE 01000：

> SQL 代理 - 作业失败：SQL 代理作业“LiteSpeed Backup Full”失败，并显示消息“作业失败。作业由用户 X 调用。运行的最后一步是步骤 1（步骤 1）。注意：通知失败- 以用户身份执行：X. LiteSpeed(R) for SQL Server Version 6.5.0.1460 版权所有 2011 Quest Software, Inc. [SQLSTATE 01000]（消息 1）LiteSpeed for SQL Server 无法打开备份文件：（N:\ BACKUP2\filename.BAK)。之前的系统消息是失败的原因。[SQLSTATE 42000]（错误 60405）。步骤失败。”

在我的情况下，这与主动/被动 SQL 群集上的 SQL Server 故障转移后驱动器 N 上的权限有关。

维护后故障转移到辅助资源并返回首选节点的所有 SQL 资源。当 Quest LiteSpeed 作业随后在首选节点上执行时，很明显 SQL 服务器用户 X 以前在驱动器 N 上的权限已丢失，并且报告了 SQLSTATE 10100。

只需将权限再次添加到备份目标驱动器即可解决问题。

希望对某人有所帮助。

视窗 2008 企业版

SQL Server 2008 主动/被动群集。

# java - 如何将单个字符分配给 TextView

> ID：13501540
> 
> 赞同：3
> 
> 时间：2012-11-21T20:25:32.430
> 
> 标签：java, android

我正在尝试将单个字符分配给 Android Java 中的 TextView。
使用字符串有效：

```
textView.setText("X"); 
```

但是在运行时使用 char 中止：

```
textView.setText('X'); 
```

和：

```
char Key5 = 'X';  
textView.setText(Key5); 
```

使用 Character 也会在运行时中止：

```
Character Key5 = 'X';  
textView.setText(Key5); 
```

将字符类型转换为字符串确实有效：

```
Character Key5 = 'X';  
textView.setText(Key5.toString()); 
```

如何将纯字符变量分配给 TextView？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T20:29:42.497

您可以使用 String.valueOf(char) 方法将字符“转换”为字符串：

```
char key = 'X';
textView.setText(String.valueOf(key)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T20:33:44.617

简短的回答：

你不能，你必须使用 CharSequence。（谢谢[山姆](https://stackoverflow.com/users/1267661/sam)）

长答案：

问题是[TextView.setText](http://developer.android.com/reference/android/widget/TextView.html#setText%28java.lang.CharSequence%29)没有重载以将字符作为唯一参数。它只能采用 CharSequence。

来自[CharSequence](http://developer.android.com/reference/java/lang/CharSequence.html)文档

> 该接口表示一组有序的字符并定义了探测它们的方法。

String 之所以有效，是因为它实现了 CharSequence 接口。拥有一个只包含一个字符的 CharSequence 是没有意义的

# jquery - ajax 列表填充

> ID：13501548
> 
> 赞同：3
> 
> 时间：2012-11-21T20:25:55.000
> 
> 标签：jquery

我有 4 个选择列表。页面加载时加载的第一个内容。彼此的内容取决于上一个列表中的所选项目。

我有一个函数，它从列表中的 url 地址加载数据。当用户在每个列表中选择一个值时，这可以正常工作。有时需要从代码中设置所有值，这是一个问题。

现在，我有这样的功能：

```
var c = $('#container');
var f1 = c.find('.myval1').val();
var f2 = c.find('.myval2').val();
var f3 = c.find('.myval3').val();
var f4 = c.find('.myval4').val();

if(f1.length > 0){
c.find('.form').find('.s1').children('option').filter(function() {
   return $(this).text().toLowerCase() == f1.toLowerCase();
}).attr('selected', 'selected');
parent.find('.search-form').find('.s1').change();
}

if(f2.length > 0){
c.find('.form').find('.s2').children('option').filter(function() {
   return $(this).text().toLowerCase() == f2.toLowerCase();
}).attr('selected', 'selected');
parent.find('.form').find('.s2').change();
}

if(f3.length > 0){
c.find('.form').find('.s3').children('option').filter(function() {
   return $(this).text().toLowerCase() == f3.toLowerCase();
}).attr('selected', 'selected');
parent.find('.form').find('.s3').change();
}

if(f4.length > 0){
c.find('.form').find('.s4').children('option').filter(function() {
   return $(this).text().toLowerCase() == f4.toLowerCase();
}).attr('selected', 'selected');
parent.find('.form').find('.s4').change();
} 
```

s1,s2,s3,s4 是选择列表

问题是当我们需要从第二个列表中选择一个项目时，它仍然是空的，因为 Ajax 功能还没有完成。

**必须等待事件 change() 完成的主要问题，它在我们过滤其中的内容之前加载 select 中的内容**

我知道 $.Deferred() 但不知道如何将其应用于此代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:15:44.010

首先，我认为`myval1`, `myval2`, ... 应该是 ids 而不是类（因为它似乎唯一地标识一个元素），其次，你应该重构你的代码以提高可读性，因为你为你的 4 个元素做了同样的事情：

```
var c = $('#container');

function init() {

    for(var i = 0; i < 4; i++) {
        updateList(c, c.find('#myval' + i).val(), i);

        // I guess it is here that you have to update your lists
        bindChange(i);
    }
}

function updateList(c, f, i) {
    if(f.length > 0) {
        c.find('.form').find('.s' + i).children('option').filter(function() {
            return $(this).text().toLowerCase() == f.toLowerCase();
        }).attr('selected', 'selected');

        // -> Here, is parent really different from c? And for the 1st element, 
        // is it filtered by the class .search-form instead of .form?
        parent.find('.form').find('.s' + i).change();
    }
}

// New functions in order to trigger an update of the lists
// and to update subsequent list
function bindChange(i) {
    parent.find('.form').find('.s' + i).on('change', updateContent(i));
}

function updateContent(i) {
    return function() {
        $.ajax({
            url: 'yoursite.html',
            data: yourdata,
            success : updateSubsequentList(i)
        });
    }
}

function updateSubsequentList(i) {
    return function() {
        var j = i + 1;
        updateList(c, c.find('#myval' + j).val(), j);
    }
} 
```

这里我给出了不同函数的索引，但是你可以直接使用关键字来获取我们当前正在处理的对象`this`...

因此，总而言之，**您应该`ajax`在 key 内的`success`**函数中使用回调函数。

希望对你有帮助...

# php - ExactTarget 订阅表单也发送表单详细信息

> ID：13501549
> 
> 赞同：1
> 
> 时间：2012-11-21T20:25:56.077
> 
> 标签：php, forms, email, exacttarget

目前有一个时事通讯订阅表单，可将​​信息提交到 ExactTarget 帐户。是否可以让相同的表单发送电子邮件，类似于 PHP 联系表单？曾经这是一种 PHP 表单。

我确实查看了丹佛的 MailChimp 在联系表中订阅选项： [Mail Chimp 在联系表中订阅](https://stackoverflow.com/questions/12792645/mail-chimp-subscribe-in-contact-form)

此表单不需要复选框即可订阅时事通讯。

```
<form action="http://cl.exct.net/subscribe.aspx?lid=hidden" name="subscribeForm" method="post">  
<input type="hidden" name="thx" value="enewsletter-thank-you.php" />  
<input type="hidden" name="err" value="enewsletter-error.php" />  
<input type="hidden" name="MID" value="hidden" />

<ul class="contactForm">    
<li class="contactForm">
<label class="formFieldQuestion">E-mail Address:&nbsp;<span class="redrequired">*</span></label>
<input class="field-text" type="text" name="Email Address" size="20" value=""></li> 

<li class="contactForm">
<label class="formFieldQuestion">Full Name:</label>
<input class="field-text" type="text" name="Full Name" size="20" value=""></li>

<li class="contactForm">
<label class="formFieldQuestion">Company:</label>
<input class="field-text" type="text" name="Company or Organization" size="20" value=""></li>

<li style="padding-left:10px;">
<input id="saveForm" class="button_form" type="submit" value="Subscribe" name="submit"> </li>

</ul>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:41:14.853

是的，您可以将其作为 curl 请求发送。将您的表单操作更改为类似`mail_and_submit.php`.

然后，在`mail_and_submit.php`：

```
//extract data from the post
extract($_POST);

//set POST variables
$url = 'http://cl.exct.net/subscribe.aspx?lid=hidden';
$fields = array(
            'thx' => urlencode($thx),
            'error' => urlencode($error),
            'MID' => urlencode($MID),
... (etc)
);

//url-ify the data for the POST
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string, '&');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST, count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch); 
```

然后，使用这些相同的字段构建电子邮件，然后发送，例如：

```
$message = 'A post was submitted:<br/>';
$message .= 'thx: ' . $thx;
$message .= 'error: ' . $error;
$message .= 'MID: ' . $mid; 
```

...等，然后邮寄：

```
mail('some-email@address.com', 'Your Entry', $message); 
```

# fractals - 应用于 IFS 分形的线性几何变换

> ID：13501557
> 
> 赞同：4
> 
> 时间：2012-11-21T20:26:12.723
> 
> 标签：fractals

我是 Perceptron [http://perceptron.sourceforge.net](http://perceptron.sourceforge.net)的开发人员之一- 用 Ja​​va 编写的独特的视频反馈分形生成器。我想提请您注意这个开源项目，以便您也可以参加 SourceForge 网站上的论坛。

特别是，我有兴趣改进当前的线性几何变换。

Perceptron 生成的始终是由 Julia 分形的片段组成的 IFS 分形。这种组合是在图像转换的两步循环（递归、无限）过程中创建的：

根据 z_new = f(z_old) + constant_c 和线性映射进行变形。

在文件 DoubleBuffer.java 中，我们在 z_new = (x,y) 给出的坐标处从“屏幕”读取像素颜色。

自然，复数 z_new 可以在复平面中的任何位置，但“屏幕”具有严格的物理尺寸。所需的坐标已适当地缩放到屏幕 - 这不是问题。

但是，我们应用了一些看似不必要的规则，例如“取 z_new 的绝对值”，或者“如果 z_new 很大，将其包装起来！”。我们应用这些规则来防止读取不存在的屏幕外像素。相反，我们重新读取了一些像素。这导致了惊人的 IFS 分形。

我想知道在哪里可以学习更多类似的“线性几何变换”，它们以有趣的方式包装数组（矩阵）、创建切片、旋转、通过赋予它们各种形状的边缘、模拟镜子的变换等来塑造矩阵中的数据。

为了说明，请参阅此代码。

```
public int interface_getColor(int x, int y) {
 /**
  * Only positive x and y at the screen can be read to obtain
  * the color.  */

 x ^= x >> 31;   // absolute values only; no choice but to disregard negative z_new
 y ^= y >> 31;

 x >>= 8;    //divide by 256
 y >>= 8;

 /**
  * The reflection transformation to put the off-screen z_new
  * points back within the screen. Although x = x % W and y =
  * y % H would suffice, it is more interesting like this...        */

  x = (x / W & 1) == 0 ? x % W : W_ONE - x % W;   // if x/W is even then x =... else x=...
  y = (y / H & 1) == 0 ? y % H : H_ONE - y % H;   

 /**
  * Since the screen is a one-dimensional array of length
  * W*H, the index of any element is i(x,y) = x + W * y.  */

  return buffer.getElem(x + W * y);
} 
```

正如您所看到的，按位运算符是速度所必需的，而经典的数组包装提供了比任何人都希望从 IFS 分形中看到的更多奇迹。用定义文件中的方程式替换这个硬编码块会很好，并且需要模板建议。

# haskell - isAlpha 和 isLetter 有什么区别？

> ID：13501559
> 
> 赞同：12
> 
> 时间：2012-11-21T20:26:17.617
> 
> 标签：haskell, char

在 Haskell 中，该函数`Data.Char.isAlpha`检查字符是否为字母，但`Data.Char.isLetter`. 这些功能之间有什么真正的区别，或者它们可以互换吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-21T20:32:30.417

查看[来源](http://hackage.haskell.org/packages/archive/base/4.3.1.0/doc/html/src/Data-Char.html)，它们似乎是等效的。

这是`isLetter`4.3.1.0 中定义的定义

```
-- derived character classifiers

-- | Selects alphabetic Unicode characters (lower-case, upper-case and
-- title-case letters, plus letters of caseless scripts and modifiers letters).
-- This function is equivalent to 'Data.Char.isAlpha'.
isLetter :: Char -> Bool
isLetter c = case generalCategory c of
        UppercaseLetter         -> True
        LowercaseLetter         -> True
        TitlecaseLetter         -> True
        ModifierLetter          -> True
        OtherLetter             -> True
        _                       -> False 
```

以及的[定义](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/GHC-Unicode.html#isAlpha)：`isAlpha`

```
-- | Selects alphabetic Unicode characters (lower-case, upper-case and
-- title-case letters, plus letters of caseless scripts and modifiers letters).
-- This function is equivalent to 'Data.Char.isLetter'.
isAlpha                 :: Char -> Bool
isAlpha    c = iswalpha (fromIntegral (ord c)) /= 0 
```

它们似乎具有不同的实现，但它们被记录为具有相同的效果。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-21T20:29:02.363

现在没有真正的区别。从[文档](http://www.haskell.org/ghc/docs/6.12.2/html/libraries/base-4.2.0.1/Data-Char.html#v%3AisAlpha)：

> `isAlpha :: Char -> Bool`
> 选择字母 Unicode 字符（小写、大写和标题大小写字母，加上无大小写脚本的字母和修饰符字母）。此函数等效于 Data.Char.isLetter。

# javascript - 正则表达式美化缩小的 CSS

> ID：13501565
> 
> 赞同：4
> 
> 时间：2012-11-21T20:26:58.987
> 
> 标签：javascript, regex

我正在尝试使用 JavaScript 美化 CSS 代码。

缩小的 CSS 代码如下所示：

`str = 'body{margin:0;padding:0;}section,article,.class{font-size:2em;}'`

到目前为止，我可以通过使用多个替换来美化代码：

```
str.replace(/{/g, " {\n")
    .replace(/}/g, "}\n")
    .replace(/;/g,";\n")
    .replace(/,/g, ",\n") 
```

这很有效，但我想改进它

*   如何在每个属性之前添加一个选项卡？
*   是否可以在一个 RegEx 中汇总所有替换调用？
*   是否可以检测到最后没有分号的属性？（这是有效的 CSS）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T21:08:12.433

我认为减少正则表达式的数量很难，因为有时您只需要换行符，有时您也需要一个制表符。有时您需要写回一个字符，有时是两个字符。但这里有一个使 CSS 看起来相当不错的替换列表：

```
str.replace(/\{/g, " {\n\t")        // Line-break and tab after opening {
   .replace(/;([^}])/g, ";\n\t$1")  // Line-break and tab after every ; except
                                    // for the last one
   .replace(/;\}/g, ";\n}\n\n")     // Line-break only after the last ; then two
                                    // line-breaks after the }
   .replace(/([^\n])\}/g, "$1;\n}") // Line-break before and two after } that
                                    // have not been affected yet
   .replace(/,/g, ",\n")            // line break after comma
   .trim()                          // remove leading and trailing whitespace 
```

使这个：

```
 str = 'body{margin:0;padding:0}section,article,.class{font-size:2em;}' 
```

看起来像这样：

```
body {
    margin:0;
    padding:0;
}

section,
article,
.class {
    font-size:2em;
} 
```

如果您不关心那些省略的分号被放回原处，您可以通过更改顺序来缩短它：

```
str.replace(/\{/g, " {\n\t")
   .replace(/\}/g, "\n}\n\n")    // 1 \n before and 2 \n after each }
   .replace(/;(?!\n)/g, ";\n\t") // \n\t after each ; that was not affected
   .replace(/,/g, ",\n")
   .trim() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:52:56.620

我不知道 CSS 是否是一种常规语言（我的猜测是肯定的），但无论如何，这应该可以使用正则表达式。

不需要匹配最后一个属性，无论它是否包含分号。首先匹配所有右花括号，就像你所做的那样，除了在每个之前和之后添加一个换行符：

`.replace(/}/g, "\n}\n")`

**然后匹配除**换行符之前的所有分号（由上面的正则表达式插入）并使用每个后的字符添加换行符和**制表**`\t`符：

`.replace(/;([^\n])/g, ";\n\t$1")`

* * *

不幸的是，这只是冰山一角。不要忘记查找所有不同类型的选择器，例如包含`:`or的选择器`>`，如果您打算在它们周围添加空格。你可能还需要考虑很多其他的东西。

# android - 破碎的画廊动画

> ID：13501566
> 
> 赞同：0
> 
> 时间：2012-11-21T20:27:03.150
> 
> 标签：android, animation, gallery

我在我的布局中使用画廊。当我尝试从 OnItemSelected 函数更改任何视图（不是图库项目）时，它会影响损坏的图库动画（出现混蛋并且停止看起来很平滑）。我的意思是在画廊中选择另一个视图后出现的标准画廊动画。

```
mGallery.setOnItemSelectedListener(new OnItemSelectedListener() {

    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, int pos, long arg3) {
        mTextView1.setText("asda");
    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {

    }

}); 
```

这是布局：

```
<RelativeLayout
    android:id="@+id/rl1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" 
    android:background="@drawable/p2_bg_nav">

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="10dp"
        android:background="@drawable/p2_btn_nav_xml"
        android:text="Настр."
        android:textColor="#ffffff" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="Мои карты"
        android:textStyle="bold"
        android:textColor="#ffffff"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout>

<Gallery
    android:id="@+id/gallery"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:spacing="20dp"
    android:padding="20dp"
    android:unselectedAlpha="1.0"
    android:background="#fa0000" />

<ListView
    android:id="@+id/listView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/rl1"
    android:layout_above="@id/gallery"
    android:background="#d8d8d8" >

</ListView> 
```

也许有一种方法可以在动画停止事件上设置监听器？

另一件事是我的画廊项目上有 TextView。TextColor 设置为黑色，但仅对画廊中的选定项目为黑色。如何避免更改未选择项目的文本颜色？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:08:42.193

看起来原因是所有视图和画廊都以相对布局链接。更改一个视图后，所有布局重绘和画廊本身也是如此。

# python - 导入文本文件以在 Python 3.x 中创建列表？

> ID：13501573
> 
> 赞同：0
> 
> 时间：2012-11-21T20:27:39.167
> 
> 标签：python, list, python-3.x, quickdraw

我似乎无法弄清楚如何使用文本文件中给出的值并将它们导入 python 来创建一个列表。我在这里想要完成的是创建一个游戏板，然后将数字作为样本集放在上面。我必须使用 Quickdraw 来完成此操作 - 我有点知道如何在 Quickdraw 上获取数字，但我似乎无法从文本文件中导入数字。以前的任务涉及让用户输入值或使用 I/O 重定向，这有点不同。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T22:31:22.470

取决于你要读取的文件的内容，并在你要获取的列表中输出。

```
# assuming you have values each on separate line
values = []
for line in open('path-to-the-file'):
    values.append(line)
    # might want to implement stripping newlines and such in here
    # by using line.strip() or .rstrip()

# or perhaps more than one value in a line, with some separator
values = []
for line in open('path-to-the-file'):
    # e.g. ':' as a separator
    separator = ':'
    line = line.split(separator)
    for value in line:
        values.append(value)

# or all in one line with separators
values = open('path-to-the-file').read().split(separator)
# might want to use .strip() on this one too, before split method 
```

如果我们知道输入和输出要求，它可能会更准确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:40:44.803

这里有两个步骤：

*   [打开](http://docs.python.org/3.2/library/functions.html#open)文件

*   读行

此页面可能会对您有所帮助：http: [//docs.python.org/3/tutorial/inputoutput.html#methods-of-file-objects](http://docs.python.org/3/tutorial/inputoutput.html#methods-of-file-objects)

# javascript - CoffeeScript - 通过循环应用一个类？

> ID：13501575
> 
> 赞同：0
> 
> 时间：2012-11-21T20:27:43.337
> 
> 标签：javascript, coffeescript

我一直在进行一些试验，并且遇到过几次通过循环应用 CS“类”似乎是有意义的情况。

例如：

```
if ($areas = $('.itemParent')).length >= 1
    class SomeClass
        constructor: (el) ->
            @$parent = el
            @$overflow = el.find('.overflow')
            @$items = @$overflow.find('.item')

            @max = @$items.length - 1
            @current = 0

        # Gets us to an area
        goToItem: (i) ->
            @$overflow.animate
                scrollLeft: @$items.eq(i).position().left
            , 450, 'easeInOutQuad'

        # Binds each item
        bindItems: ->
            @$parent.find('.item').bind 'click tap', (e) =>
                el = $(e.target).parents('.item')

                @$items.removeClass('active')
                el.addClass('active')

                @goToItem(el.index())
            @

    # Iterate and apply the structure to all areas
    $areas.each -> 
        area = new SomeClass($(@))
        area.bindItems() 
```

它似乎比“全局”绑定它们更有条理。这是一种糟糕的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T03:00:24.630

类背后的想法`Coffeescript`是在全局或模块中定义它们。

在另一种类型的范围内定义一个类有点忽略了这一点。

`Coffeescript`类鼓励将`ruby`类视为与实例分离的更加式的视图，同时保留您从能够以您认为合适的方式应用它们而获得的权力。

简而言之，最好`Coffeescript`在顶层使用类，或者从模块中导出和请求它们。

# sql - 如何正确地将多行字符串保存到数据库中

> ID：13501578
> 
> 赞同：0
> 
> 时间：2012-11-21T20:27:53.243
> 
> 标签：sql, database, string, text

我想知道如何正确地将多行字符串保存到数据库中。

并且保存的文本应该是独立于操作系统的。例如，如果我从数据库读取的 Java 程序，它应该在 UNIX 系统上获得 UNIX 行结尾，在 Windows 中获得 WINDOWS 行结尾。

这样的事情甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:30:50.843

当然有可能，但是数据库不知道行尾需要采用什么格式，也不应该在意。如果/需要时，由程序检索数据以重新格式化行尾。

# c - 使用字符串的二维数组

> ID：13501579
> 
> 赞同：7
> 
> 时间：2012-11-21T20:28:06.613
> 
> 标签：c, arrays, string

我被困在一些没有评分的作业上（它意味着练习）。

我必须创建一个`find_name`需要 2 个参数的函数。第一个参数是一个二维名称数组（字符串），第二个参数是一个字符串，用于在二维数组中查找名称，如果找到则函数必须返回 1，否则返回 0。

当我调用该函数（现在为空）时，我得到了这个`warning: passing argument 1 of 'find_name' from incompatible pointer type`

这是重要的部分。

**在主要**

```
 char strNameList[][2] = { { "Luca","Daniel"} ,{"Vivan","Desmond"},{"Abdul","Justin"}, {"Nina","Marlene"},{"Donny","Kathlene"} };

char strFindName[] = "\0";
    printf("Please enter a name to look for: ");
    gets(strFindName);
    nSearch = find_name(strNameList, strFindName); 
```

**功能**

```
int find_name(char strNameList[][2], char strLookUp[]) 
```

我是 C 新手（我是学生），我对字符串（字符串数组等）完全感到困惑。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-21T20:43:19.087

我假设你想要一个 char 指针的二维数组。您对 strNameList 的声明在程序的*两个*位置都不正确。你有：

```
char strNameList[][2] = { { "Luca","Daniel"} ,{"Vivan","Desmond"},{"Abdul","Justin"}, {"Nina","Marlene"},{"Donny","Kathlene"} }; 
```

但是`char[][N]`声明了一个 2D 数组*`chars`*，而不是`char*`因此编译器警告您将大量指针值分配给类型的项目`char`

*将*您的声明（您的变量*和*函数参数）更改为：

```
const char *strNameList[][2] 
```

它声明了一个长度未知的数组 two `char*`，它现在与您的初始化列表匹配。此外，`const`添加 是因为（a）我假设您不打算在函数中修改该名称列表，并且（b）`char*`通过初始化程序分配给的可写字符串文字声明在 C 中是未定义的行为，并且在 C++ 中正式弃用，所以无论如何你都不应该使用它。同样，您的查找名称也可能没有被修改，因此也要声明它`const`。

结果：

```
const char * strNameList[][2] = { 
    {"Luca","Daniel"} ,
    {"Vivan","Desmond"},
    {"Abdul","Justin"}, 
    {"Nina","Marlene"},
    {"Donny","Kathlene"} 
}; 
```

并在您的功能中：

```
int find_name(const char * strNameList[][2], const char strLookUp[]) 
```

最后但同样重要的是，除非您有一个水晶球，否则您的`find_name()`函数无法通过给定的信息*知道正在传递的名称列表中有多少个名称*。我宁愿你现在看到这一点，而不是想知道后来发生了什么。您需要 (a) 使用`find_name()`知道的令牌值终止列表，或者 (b) 将列表中的名称数量传递给`find_name()`. 每个人都有自己的，但我更喜欢后者：

```
int find_name(const char * strNameList[][2], size_t nNameListSize, const char strLookUp[]) 
```

并通过以下方式在您的调用方调用它：

```
find_name(strNameList, sizeof(strNameList)/sizeof(strNameList[0]), strFindName) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T20:43:57.170

这样做：

```
#define STOPPER_NAMELIST NULL

char * strNameList[][2] = { 
  { "Luca","Daniel"},
  {"Vivan","Desmond"},
  {"Abdul","Justin"}, 
  {"Nina","Marlene"}, 
  {"Donny","Kathlene"} 
  {STOPPER_NAMELIST, STOPPER_NAMELIST}
};

size_t sizeNameList(const char * strNameList[][2])
{
  size_t size = 0;

  while ((strNameList[size][0] != STOPPER_NAMELIST) && 
         (strNameList[size][0] != STOPPER_NAMELIST))
    ++ size;

  return size;
}

int find_name(char * strNameList[][2], char strLookUp[])
{
   size_t size = sizeNameList(strNameList);

   ...
}

...

nSearch = find_name(strNameList, strFindName); 
```

此方法使用带有条目的数组的开放数组 ( `[]`) 。`char *``2`

* * *

**更新：**

您可以将停止器元素添加到带有名称的数组中，然后不需要传递数组的大小以及数组本身，因为始终可以通过扫描数组成员来确定大小，直到找到停止器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T20:47:00.123

您的函数`find_name()`正在寻找一个二维字符数组，即：

```
char arr[][2] = { { 'a', 'b'}, ... 
```

如果你想让它们成为你需要的*字符串*：

```
char *arr[][2] = { {"John", "Smith"}, ... 
```

然后在你需要的函数参数列表中：

```
void find_name(char *something[][2])
{
   printf("first name: %s, second name: %s\n", something[0][0], something[0][1]); 
```

在您的`main()`函数中，只需通过以下方式调用它：

```
find_name(arr); 
```

# asp.net - NMath IIS 访问被拒绝

> ID：13501580
> 
> 赞同：0
> 
> 时间：2012-11-21T20:28:09.793
> 
> 标签：asp.net, iis, nmath

我曾尝试在 IIS 中托管的 ASP.NET 4 Web 应用程序上使用 NMath 库。虽然它在开发机器上完美运行，但在服务器上它抛出了这个异常：

> 无法加载 DLL 'nmath_native_x86.dll'：访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.DllNotFoundException：无法加载 DLL 'nmath_native_x86.dll'：访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [DllNotFoundException：无法加载 DLL 'nmath_native_x86.dll'：访问被拒绝。(Exception from HRESULT: 0x80070005 (E_ACCESSDENIED))]
> CenterSpace.NMath.Kernel.DotNetBlas.ca985db1fb290841a533a3547ace1ae2b(Int32* ca9e3f1c0641beace93cb8eb4a27060d6, Double* cf339080161dff75cfd1b46a10c2eec70, Int32* c757a2154665e6da4d820f8c504ec2601, Double* c00a69c4fa5b6d809b68a96ca184dcf79, Int32* c1565590bf448d2c630952a0391360cc3) +0
> CenterSpace.NMath.Kernel.DotNetBlas .copy(Int32 n, DoubleDataBlock x, Int32 xOffset, Int32 incx, DoubleDataBlock y, Int32 yOffset, Int32 incy) +149 CenterSpace.NMath.Core.DoubleVector.set_Item(Slice slice, DoubleVector value) +165

虽然我在这里读到它可能与[AppPool](https://stackoverflow.com/questions/7109299/iis-7-unable-to-load-dll-access-denied)的权限或类似的东西有关，但我似乎无法指出问题所在。会是什么呢？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-07T22:13:20.580

这可能是几个选择。

1) 是否安装了 C++ 运行时？没有它，NMath 无法加载本机 dll。请参阅此处的部署部分：http: [//centerspace.net/doc/NMath/user/overview-83427.htm#Xoverview-83427](http://centerspace.net/doc/NMath/user/overview-83427.htm#Xoverview-83427)

2) 也许你没有正确配置 NMath？你可以做 NMathConfiguration.NativeLocation 指向一个位置。更多在这里：

[http://centerspace.net/doc/NMathSuite/ref/html/T_CenterSpace_NMath_Core_NMathConfiguration.htm](http://centerspace.net/doc/NMathSuite/ref/html/T_CenterSpace_NMath_Core_NMathConfiguration.htm)

最后，请使用 NMathConfiguration.LogLocation 生成日志文件。生成的日志文件会告诉您出了什么问题。

*   特雷弗

# jquery - 在一个js文件中重复使用$(document).ready(function()

> ID：13501583
> 
> 赞同：2
> 
> 时间：2012-11-21T20:28:22.143
> 
> 标签：jquery

我有一个名为“app.js”的 js 文件，我将大部分 javascript 存储在其中，以便可以轻松地将其最小化。

我注意到我一直在包装每个独特的功能：

```
$(document).ready(function () { ... }); 
```

文件中大约有 10 个以这种方式包装的函数。将整个 app.js 文件包装在 $(document).ready 而不是每个单独的函数中对我来说会更好吗？

我觉得我可能已经阅读以避免滥用文档，但我可能只是在考虑 $(this)?

我正在做的事情有任何性能问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:50:32.017

这种方法不应该有任何性能问题，但在我看来，它看起来很难看且难以阅读。

我的建议是只使用一个`ready`函数充当您的`init`函数，然后将函数存储在外部`ready`，例如：

```
$(document).ready(function () { 

//check some stuff once document is ready
check_if_user_is_loggedin();

//check if user got new message
setInterval(function(){
   check_user_inbox();
}, 5000);

});

//now here store your functions like:
function check_if_user_is_loggedin(){
  if(loggedIn) return true; else return false;
}

check_user_inbox(){
  //ajax call etc...
  return messages;
} 
```

# javascript - 三元运算符不起作用，我可以将（这个或那个）作为表达式吗？

> ID：13501584
> 
> 赞同：-1
> 
> 时间：2012-11-21T20:28:26.620
> 
> 标签：javascript, ternary-operator

我很难找到为什么这不起作用：

```
value = ( (value == undefined) || (typeof(value) !=== "number") ) ? 1 : value; 
```

据我了解，这应该设置`value`为要么`1`或`value`（变量），具体取决于是否`value`不是数字。

如果 value 不是数字，则将其更改为`1`，如果是，则保留它。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:30:41.510

如果您将`!===`（实际上并不存在）更改为`!==`（这是 的逻辑逆`===`），这将很好用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T20:31:12.927

您使用了太多的等号。正确的语法是`!==`.

只需使用`value = (typeof(value) !== "number") ? 1 : value;`

这个`(value == undefined)`条件是多余的，因为当前者为真时后者总是为真。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T20:31:23.397

快速浏览：

!=== （带有三个等号）是一个错字。正确的运算符是 !== （带有两个等号）。

每当您遇到 Javascript 问题时，我强烈建议您在[http://www.jslint.com/](http://www.jslint.com/)上解决所有警告和问题——它有助于捕捉很多肉眼看不到的东西。

# d - 我应该在 Linux 上为 windows 编译 D 程序吗？

> ID：13501595
> 
> 赞同：4
> 
> 时间：2012-11-21T20:29:25.660
> 
> 标签：d

有没有办法在linux下为windows操作系统编译一个D程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T21:23:40.950

最简单的方法可能是在[wine](http://www.winehq.org/)下运行 dmd 的 windows 版本。您可以设置一个交叉编译器，但要获得相同的效果，这将是很多额外的麻烦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T15:41:16.577

*回答您的第一个问题（“我应该……”）*：这主要取决于您的开发环境。如果您只在 Linux 上工作，那么最好在 Linux 上设置交叉编译器并构建 Windows 应用程序。

*回答第二个问题（“有没有……”）*：是的，有——通过使用能够针对 Windows 平台的[交叉编译器。](http://en.wikipedia.org/wiki/Cross_compiler)

GDC 和 LDC 都可以构建，因此它们可以直接从您的 Linux 机器中针对 Windows 32 位或 64 位。您可以在 Internet 上找到数百个有关此主题的资源。编写如何构建 GDC 交叉编译器的指南非常耗时，但是如果您自己无法做到这一点，我将编写一个简单的分步指南如何做到这一点。

# c++ - c++：模板中非限定名称查找的上下文

> ID：13501598
> 
> 赞同：3
> 
> 时间：2012-11-21T20:29:31.553
> 
> 标签：c++, templates, namespaces, argument-dependent-lookup

我尝试查阅有关do_run的解析的标准，发现“对于使用非限定名查找（3.4.1）或限定名查找（3.4.3）的部分查找，仅找到模板定义上下文中的函数声明”。上下文到底是什么？

在下面的示例中，`do_run(int)`以某种方式“隐藏” `do_run(domain::mystruct)`，编译器抱怨`o can't be converted to int`. 如果我注释掉`do_run(int)`，`do_run(domain::mystruct)`对 可见`run`，并且代码被编译。这种行为是否与标准中提到的“上下文”有关？在我看来，两者都`do_run(int)`应该`do_run(domain::mystruct)`对（可解析的）运行可见。

```
namespace domain {
    struct mystruct { };
}

void do_run(domain::mystruct) { cout << "do_run(domain::mystruct)" << endl; } 

namespace lib { namespace details {

    template <class T>
    class runner { 
    public:
        void run(T t) { do_run(t); }
    };

    void do_run(int) { cout << "do_run(int)" << endl; } 
}}

int main() {
    domain::mystruct o;
    lib::details::runner<domain::mystruct> r;
    r.run(o);
    return 0;
} 
```

在存在的情况下`do_run(int)`，我需要一个额外的步骤来`do_run(domain::mystruct)`进入“上下文”。有三种方式：

1.  放入`do_run(domain::mystruct)`命名空间域。
2.  放入`do_run(domain::mystruct)`命名空间 lib::details。
3.  `using ::do_run`在命名空间 lib::details 中添加。

所以我推断上下文是命名空间 lib::details 和命名空间域？

编译器VS2010

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:52:55.453

查找取决于它是否是从属名称。由于您的函数调用取决于模板参数类型`T`（通过使用`t`此类型的对象调用），因此它是一个依赖名称。

仅在定义模板的上下文中查找非依赖名称。与实际实例化相关的任何内容都不会被考虑在内：由于名称被确定为不依赖于模板参数，因此将实例化考虑在内是没有意义的。这是第一阶段的查找。

在考虑实例化的情况下查找从属函数名称。这使用所有参数并确定关联的名称空间以仅在这些关联的名称空间中查找函数。对于内置类型，添加的关联命名空间是全局命名空间。对于其他类型，添加的关联命名空间是它们所在的命名空间加上所有封闭的命名空间。此外，添加了从类定义中可见的事物的关联名称空间：基类的关联名称空间，对于模板，模板参数的名称空间等。这是第二阶段查找，也称为*参数相关查找*（我认为这些术语并不完全相同，当然细节也没有上面描述的那么简单）。

在您引用的代码`do_run()`中，显然`lib::details::runner<domain::mystruct>`可以在全局名称空间中找到全局范围内的函数。如果将其移至`domain`. 但是，在实例化中找不到**命名**空间中的`do_run()`方法：关联的命名空间只是全局命名空间，但该函数不存在，并且在实例化之前不会查找它，因为它是一个依赖名称。`lib::details`**`lib::details::runner<int>``int`**

 **也就是说，我的理解是 MSVC++ 没有按照指定的方式实现两阶段名称查找，但我不知道它偏离了哪些方式。**

# google-analytics - 集合抽样如何影响 Google Analytics 的“实时”统计数据？

> ID：13501602
> 
> 赞同：0
> 
> 时间：2012-11-21T20:29:33.550
> 
> 标签：google-analytics

我们最近注意到，随着我们网站的发展，我们在 Google Analytics 中的数据变得越来越不可靠。

我们最强烈地注意到这一点的地方之一是“实时仪表板”。

当我们每天有 30k 用户时，它会一次显示大约 500-600 人在线。现在我们每天有 50k 用户，它一次显示 200-300 人在线。

（我们产品中的其他自定义指标显示用户行为没有太大变化；如果有的话，用户目前在网站上花费的时间比以往任何时候都长！）

分析中的每日总数仍在上升，所以它并不是只是错过了点击或其他什么......有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T05:41:26.637

我唯一能想到的是，对什么构成用户在线的解释可能存在差异。

如何判断用户是否在线？

除非有明确的登录/注销跟踪，否则如果在 X 秒的时间间隔内没有用户生成的事件或来自浏览器的请求，是否有可能假定用户已经离开？

如果是这种情况，那么添加一个隐藏的 iframe 和一些 Javascript 代码可能是值得的，它会每隔 t 秒发送一个请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T14:07:21.660

您无法将唯一并发用户的即时测量值与不同时间片的唯一用户进行比较。

例如，您可能有少量并发唯一用户（例如 10 个）和更高的每日唯一用户数（例如 1000），因为一天中有 1000 个不同的人在那里，但在任何给定时间只有 10 个。并发用户的数量与每日唯一身份总数无关，一天中的分布可能不均匀，几乎是苹果和橘子。

这与无法组合每月唯一身份和每日唯一身份的方式相同，但平均每日唯一身份是每月唯一身份的下限。

# batch-file - 如果 else 不能在循环中工作并且在我看到任何错误之前关闭 dos 框

> ID：13501607
> 
> 赞同：1
> 
> 时间：2012-11-21T20:29:44.037
> 
> 标签：batch-file

我对批处理文件的经验很少，并且是从我编写的其他文件中拼凑而成的。

批处理文件将在图标上放置一个图像文件夹，并应根据照片方向进行不同的调整大小。

在我读取任何错误之前，dos 窗口关闭。

如果我在循环中只有转换或识别行（一次一个），它可以工作，但如果它失败了。使用 IF ELSE 激活 DO 后的左括号不会在我的文本编辑器中突出显示右括号。

任何帮助，将不胜感激。

```
REM @echo off

REM Read all the png images from the directory
FOR %%f IN (%1\*.png) DO (

REM Set the variable width to the image width
SET width=identify -format "%%[fx:w]" %%f

REM Set the variable height to the image height
SET height=identify -format "%%[fx:h]" %%f

REM Check if the photo is portrate or landscape and run the relavant code
IF %width% LSS %height% (
convert "%%f" -trim -resize x740 "modified/%%~nf.jpg" 
) ELSE (
convert "%%f" -trim -resize x740 -background blue -gravity center -extent 740x740 "modified/%%~nf.jpg" 
)
)

PAUSE 
```

错误：

```
C:\>REM @echo off

C:\>REM Read all the png images from the directory
( was unexpected at this time.

C:\>IF  LSS  ( 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:35:35.490

首先，扩展参数并使用黑引号来规避空间名称中的错误。

其次，您不能以您尝试执行的方式将命令的输出设置为变量。您需要使用 FOR /F 获取命令的输出，没有其他方法。

试试这个：

（更新）

1.  确保使用 \ 斜杠而不是 / 将正确的参数传递给脚本

.

```
 @echo off

    Setlocal enabledelayedexpansion

    :: Removes the last slash if given in argument %1
    Set "Dir=%~1"
    IF "%DIR:~-1%" EQU "\" (Set "Dir=%DIR:~0,-1%")

    :: Read all the png images from the directory

    FOR %%f IN ("%dir%\*.png") DO (

        :: Set the variable width to the image width
        For /F %%# in ('identify -format "%%[fx:w]" "%%f"') Do (SET /A "width=%%#")

        :: Set the variable height to the image height
        For /F %%# in ('identify -format "%%[fx:h]" "%%f"') Do (SET /A "height=%%#")

        :: Create the output folder if don't exist
        MKDIR ".\modified" 2>NUL

        :: Check if the photo is portrate or landscape and run the relavant code
        IF !width! LSS !height! (
            convert "%%f" -trim -resize x740 "modified\%%~nf.jpg" 
        ) ELSE (
            convert "%%f" -trim -resize x740 -background blue -gravity center -extent 740x740 "modified\%%~nf.jpg" 
            )
        )

    PAUSE&EXIT 
```

# sql - Oracle 创建触发器语句失败，内部错误代码 ORA-00600

> ID：13501609
> 
> 赞同：6
> 
> 时间：2012-11-21T20:29:54.293
> 
> 标签：sql, oracle, triggers

试图执行从 Oracle 创建的转储文件。在此块之前，一切都会被创建和更改：

```
CREATE OR REPLACE TRIGGER "LABS"."CHANNEL_CHANNEL_ID_TRG" BEFORE INSERT ON channel
FOR EACH ROW
DECLARE 
v_newVal NUMBER(12) := 0;
v_incval NUMBER(12) := 0;
BEGIN
IF INSERTING AND :new.CHANNEL_ID IS NULL THEN
SELECT  channel_CHANNEL_ID_SEQ.NEXTVAL INTO v_newVal FROM DUAL;
-- If this is the first time this table have been inserted into (sequence == 1)
IF v_newVal = 1 THEN 
  --get the max indentity value from the table
  SELECT NVL(max(CHANNEL_ID),0) INTO v_newVal FROM channel;
  v_newVal := v_newVal + 1;
  --set the sequence to that value
  LOOP
       EXIT WHEN v_incval>=v_newVal;
       SELECT channel_CHANNEL_ID_SEQ.nextval INTO v_incval FROM dual;
  END LOOP;
END IF;
--used to emulate LAST_INSERT_ID()
--mysql_utilities.identity := v_newVal; 
-- assign the value from the sequence to emulate the identity column
:new.CHANNEL_ID := v_newVal;
END IF;
END; 
```

这失败并切断连接，给出以下相当神秘的错误：

```
ORA-00603: ORACLE server session terminated by fatal error
ORA-00600: internal error code, arguments: [kqlidchg1], [], [], [], [], [], [], [], [], [], [], []
ORA-00604: error occurred at recursive SQL level 1
ORA-00001: unique constraint (SYS.I_PLSCOPE_SIG_IDENTIFIER$) violated
00603\. 00000 -  "ORACLE server session terminated by fatal error"
*Cause:    An ORACLE server session is in an unrecoverable state.
*Action:   Login to ORACLE again so a new server session will be create 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T20:38:15.310

找到了一个有效的解决方案。用以下 ALTER 语句包围代码块：

```
ALTER SESSION SET PLSCOPE_SETTINGS = 'IDENTIFIERS:NONE'; 
```

...这里的sql语句...

```
ALTER SESSION SET PLSCOPE_SETTINGS = 'IDENTIFIERS:ALL'; 
```

出于某种原因，Oracle 数据库转储不包含这些命令，但这解决了问题。

# java - 如何让 jersey web 服务类实现接口并具有事务性

> ID：13501616
> 
> 赞同：0
> 
> 时间：2012-11-21T20:30:17.740
> 
> 标签：java, jersey, spring-transactions

我想使用 Jersey 和 Spring 编写一个 java 类，它既是 web 服务服务器端类，又是 spring-tx 事务（这样每个 web 服务请求要么完全完成它在数据库中的工作，要么完全回滚它的在数据库中工作）。

但是，当我这样做时......

```
package com.test.rest

import org.springframework.stereotype.Component;
import org.springframework.transaction.annotation.Transactional;

@Component 
@Transactional
public class TestRestService implements TestRestServiceInterface {
    ...
} 
```

TestRestService 类没有被 Spring 注册为 Web 服务类。

我`<context:component-scan base-package="com.test.rest"/>`在我的 spring 配置文件中使用在 com.test.rest 包中注册 Web 服务类（示例中的包名称已更改）。

如果我删除 @Transactional 或让 TestRestService 未实现接口，则 Spring 将类注册为 Web 服务类并且代码有效。

有没有办法让我两者兼得？

我目前正在使用 sprint-tx、spring-jersey 和 spring-context 3.0.7 和 jersey 1.0.3.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T23:58:16.613

在看了很多之后，我得出的结论是它不起作用（也许没有 AspectJ）。

我相信它不会因为 jersey-server-1.0.3.1:com.sun.jersey.api.core.ResourceConfig.java 中的代码而工作

```
438  /**
439   * Determine if a class is a root resource class.
440   *
441   * @param c the class.
442   * @return true if the class is a root resource class, otherwise false
443   *         (including if the class is null).
444   */
445  public static boolean isRootResourceClass(Class<?> c) {
446      if (c == null)
447          return false;
448      
449      if (c.isAnnotationPresent(Path.class)) return true;
450  
451      for (Class i : c.getInterfaces())
452          if (i.isAnnotationPresent(Path.class)) return true;
453  
454      return false;
455  } 
```

出于某种原因，当我们在实现接口的类上使用 @Transactional 时，spring-tx 生成的代理类（无论是基于 CGLIB 还是基于 JDK 动态代理）没有 @Path 注释，因此 isRootResourceClass 返回 false 并且该类不是注册为 Web 服务类。我在调试代码时验证了这一点。

我想我将不得不在实现接口或使我的 Web 服务类事务性之间做出选择（除非我使用 AspectJ）。

# jquery-mobile - Font Awesome 图标与 jQuery UI 图标冲突

> ID：13501619
> 
> 赞同：5
> 
> 时间：2012-11-21T20:30:28.817
> 
> 标签：jquery-mobile, font-awesome

当我将 jqm-icon-pack-2.1.2-fa.css 添加到我的网站时，jQuery UI 字体不显示。如果我删除参考，它们会显示。我正在使用 Visual Studio 2012 创建一个 MVC4 移动应用程序。这是我引用 css 文件的方式：

```
<link rel="stylesheet" href="@Url.StaticStylesheet("jquery.mobile-1.2.0.css")" type="text/css">
<link rel="stylesheet" href="@Url.StaticStylesheet("jquery.mobile.structure-1.2.0.css")" type="text/css">
<link rel="stylesheet" href="@Url.StaticStylesheet("jquery.mobile.theme-1.2.0.css")" type="text/css"> 
<link rel="stylesheet" href="@Url.StaticStylesheet("jqm-icon-pack-2.1.2-fa.css")" type="text/css"> 
```

如果我删除最后一个引用，jQuery 图标可以工作，但 Font Awesome 图标不工作。我试图重新排序参考文献，但没有奏效。我已经用 Firebug 检查了该页面，但看不出有什么不同。我已经确保路径也是正确的。我想发布一个指向我的网站的链接，但它位于外联网中，因此无法访问。我能提供的最好的方法是我将输入设置为 type="search" 并且搜索图标和明文图标不会出现。任何帮助将不胜感激！！

回答：我解决了这个问题，希望可以像我一样为其他人节省一些悲伤和数小时的敲击键盘的时间！当您使用 NuGet 包管理器获取 jQuery Mobile 时，它​​会添加一些名为 icons-18-black.png、icons-18-white.png、icons-36-black.png 和 icons-36-white.png 的图像文件。如果你不小心，你可能会错过这样一个事实，即 github 网站上有一些稍微不同的图像文件需要包含在 Font Awesome 中，称为 icons-18-black-pack.png、icons-18-white-pack.png 、icons-36-black-pack.png 和 icons-36-white-pack.png。请注意，这些文件的名称中包含“pack”一词，它们与 jQuery mobile 中包含的原始文件略有不同。只需确保添加丢失的文件以及与 ajax-loader 不同的 ajax-loader.png 文件即可。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T22:49:14.073

我解决了这个问题，希望可以像我一样为其他人节省一些悲伤和数小时的敲击键盘的时间！当您使用 NuGet 包管理器获取 jQuery Mobile 时，它​​会添加一些名为 icons-18-black.png、icons-18-white.png、icons-36-black.png 和 icons-36-white.png 的图像文件。如果你不小心，你可能会错过这样一个事实，即 github 网站上有一些稍微不同的图像文件需要包含在 Font Awesome 中，称为 icons-18-black-pack.png、icons-18-white-pack.png 、icons-36-black-pack.png 和 icons-36-white-pack.png。请注意，这些文件的名称中包含“pack”一词，它们与 jQuery mobile 中包含的原始文件略有不同。只需确保添加丢失的文件以及与 ajax-loader 不同的 ajax-loader.png 文件即可。

# c# - MVC3 razor 返回当前视图

> ID：13501645
> 
> 赞同：0
> 
> 时间：2012-11-21T20:33:10.467
> 
> 标签：c#, asp.net, html, asp.net-mvc-3, razor

我的母版页中有一个操作链接`_Layout`，按下时会更改菜单的布局。但我不希望我页面的当前内容发生变化。

如何在*不*使用 javascript 的情况下使用 MVC3 razor 完成此操作？

我猜它会是这样的：

*   按钮被点击回发发生
*   设置一些值，使更改的菜单状态持续存在
*   返回上一个视图

特别是“返回以前的视图”部分让我感到困惑，有人能解释一下如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T21:05:48.200

在您的控制器中覆盖 OnActionExecuting：

```
 protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (filterContext.RequestContext.HttpContext.Request.QueryString["MenuLayoutName"] != null && IsValidMenuLayoutName(filterContext.RequestContext.HttpContext.Request.QueryString["MenuLayoutName"] != null))
            ViewBag.MenuLayoutName = filterContext.RequestContext.HttpContext.Request.QueryString["MenuLayoutName"];
    } 
```

在渲染菜单时的 _Layout.cshtml 中，查看 ViewBag.MenuLayoutName 以决定使用哪个菜单。最有效的方法是简单地创建局部视图，以便您可以按如下方式呈现菜单：

```
@{ Html.RenderPartial(ViewBag.MenuLayoutName); } 
```

但是，请注意对 IsValidMenuLayoutName 的调用！否则，人们可以将任何有效的局部视图的名称放在那里，并将其呈现在您希望菜单出现的位置。

在您希望允许用户选择各种菜单布局的链接中，更改指向页面的链接以指定要使用的布局的名称。

```
<a href="/Index?MenuLayoutName=RedLayout">Use Red Menu</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T21:05:27.520

使用非常原始的方法，您可以创建本质上链接到自身的按钮：

```
<a href="@(Request.RawUrl)?menu=foo">Foo Menu</a>
<a href="@(Request.RawUrl)?menu=bar">Bar Menu</a> 
```

（或使用逻辑来显示/或基于可见内容）然后修改您`_Layout.cshtml`以呈现所提供的内容：

```
@{
  String menu = (String)Request.Params["menu"] ?? "foo";
  if (menu == "foo"){
    /* Foo menu render */
  } else {
    /* bar menu render */
  }
} 
```

然后它只是到同一个 URL 的往返。同样，如果他们通过发布的信息登陆页面，您将失去它。另外，我没有添加逻辑来测试`menu`请求中是否已经存在，但你应该这样做。

# javascript - 检查 youtube 视频 ID 是否存在 Javascript

> ID：13501647
> 
> 赞同：1
> 
> 时间：2012-11-21T20:33:13.460
> 
> 标签：javascript, ajax, api, youtube, response

我有以下代码，其中 realurl = 'TOwd30wXc-0'（youtube 视频 ID）：

```
$.ajax({
        url: "http://gdata.youtube.com/feeds/api/videos/"+realurl+"?v=2&alt=json-in-script",
        dataType: "jsonp",
        contentType: "application/json; charset=utf-8",
        success: function (data) { PreviewVideo(data) }
    }); 
```

PreviewVideo(data) 是解析 json 响应并用它做其他事情的函数。

我的问题是，如果视频 ID 不正确（不存在），我不会收到任何通知。我尝试添加`error: function() { alert('error occured') }`到 $.ajax 中，但它什么也没做。

有人知道如何确定视频是否可以吗？如果视频存在，调用 PreviewVideo(data)，否则 - 调用 VideoError() ？

**编辑：**如果我输入无效 ID，我会得到

```
GET http://gdata.youtube.com/feeds/api/videos/TOwd30wXc-?v=2&alt=json-in-script&callback=jQuery17205096300751902163_1353530502856&_=1353530692237 400 (Bad Request) 
```

在 javascript 控制台 (Chrome)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:46:17.870

根据[jQuery 论坛](http://forum.jquery.com/topic/catching-a-jsonp-error)，您无法捕获错误请求。也就是说，`statusCode`或者`error`参数将无济于事（这是有道理的，因为它确实应该在成功时调用每个确定的函数名称）。

~~但是，使用延迟对象接口可以解决此问题，[例如此处](http://jsfiddle.net/DEfbL/) *（由[Kevin B](http://forum.jquery.com/user/kevin-b)在 jQuery 论坛上提供）*~~

我收回它，认为它可以使用超时来解决，这似乎是上一个[SO question的](https://stackoverflow.com/questions/4924434/catching-a-jsonp-error-on-a-cross-domain-request)[最佳解决方案](https://stackoverflow.com/a/4924957/298053)。

# mysql - 正则表达式全部大写，带有特殊字符

> ID：13501652
> 
> 赞同：1
> 
> 时间：2012-11-21T20:33:23.663
> 
> 标签：mysql, regex

我有一个正则表达式 '^[A0-Z9]+$' 一直有效，直到它到达带有句点或破折号等“特殊”字符的字符串。

列表：

```
UPPER
lower
UPPER lower
lower UPPER
TEST
test
UPPER2.2-1
UPPER2 
```

给出：

```
UPPER
TEST
UPPER2 
```

如何让正则表达式也忽略非字母数字字符，因此它也包括 UPPER2.2-1？

我在这里有一个链接可以“实时”显示它：[http ://www.rubular.com/r/ev23M7G1O3](http://www.rubular.com/r/ev23M7G1O3)

这是 MySQL 正则表达式

编辑：我没有指定我想要所有非字母数字字符（包括空格），但在其他人的帮助下，它导致我这样做：'^[AZ-0-9[:punct:][:space:] ]+$' 这有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T20:37:44.423

尝试

```
'^[A-Z0-9.-]+$' 
```

您只需要将特殊字符添加到组中，可选择转义它们。

此外，如果您选择不转义`-`，请注意它应该放在分组表达式的开头或结尾以避免它可能被解释为分隔范围的机会。

* * *

对于您更新的问题，如果您想要所有非空白，请尝试使用以下组：

```
^[^ ]+$ 
```

它将匹配除空格之外的所有内容。

相反，如果您想要的是所有非空白和非小写字母，您可能会想要使用：

```
^[^ a-z]+$ 
```

`[`这里使用的“技巧”是在组表达式的开头之后添加一个插入符号。这表明我们想要匹配的*否定*。

按照该模式，我们还可以应用这个“技巧”来获取*除*小写字母之外的所有内容，如下所示：

```
^[^a-z]+$ 
```

我不确定您想要以上 3 个中的哪一个，但如果不出意外，这应该是您可以使用字符类做什么的一个很好的例子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T21:04:35.543

我相信您正在寻找（一个？）大写单词匹配，其中单词几乎是任何东西。

```
^[^a-z\s]+$ 
```

...或者如果您想允许更多带有空格的单词，那么可能只是

```
^[^a-z]+$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T20:35:31.703

你只需要放入`.`and `-`。理论上，你不需要逃跑，因为它们在括号内，但我想提醒自己在必须逃跑的时候逃跑。

```
'^[A-Z0-9\.\-]+$' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T20:42:38.837

尝试如下正则表达式：

```
 '^[A0-Z0\\.\\-]+$' 
```

# php - sqlsrv 驱动程序出现在 phpmyinfo 但连接仍然失败

> ID：13501657
> 
> 赞同：1
> 
> 时间：2012-11-21T20:33:48.497
> 
> 标签：php, sql-server, driver

我已经使用我正在运行的 ts 和 vc9 和 php 5.4 成功加载了适合我的 sqlsrv_pdo_54 驱动程序，它显示在 phpmyinfo 中。我已经下载了 Windows 本机客户端，将我的端口切换到 8080，并在我的计算机上运行了 wamp 32 位。但是，每当我运行以下脚本

```
<?php
require_once 'trunk\global.inc.php';

              $conn = sqlsrv_connect( $serverName, $connectionInfo);
               if($conn === false)
              {
                  die(print_r(sqlsrv_errors(), true));
              }
?> 
```

我收到以下错误消息：

```
 Fatal error: Call to undefined function sqlsrv_connect() in C:\wamp\www\test.php on line 11 
```

显然该功能仍未定义。为什么在加载驱动程序时会发生这种情况？我尝试重新启动我的服务器，但它没有工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:38:43.270

sqlsrv_pdo 不使用标准`sqlsrv_*`函数。它使用 PDO。尝试更改您的代码以使用 PDO。

```
<?php
require_once 'trunk\global.inc.php';

              $conn = new PDO("sqlsrv:Server=MY_SERVER;Database=MY_DATABASE", MY_USERNAME, MY_PASSWORD);
               if($conn === false)
              {
                  die('Unable to connect to DB');
              }
?> 
```

# java - Java中的合并队列

> ID：13501660
> 
> 赞同：0
> 
> 时间：2012-11-21T20:33:54.897
> 
> 标签：java, queue

我想知道在不从传递的 q 中删除任何元素的情况下，编写将 ArrayQueue 与另一个 Queue 合并的方法的最佳方法是什么。

```
eg. queue1 = [1,2,3,4] and queue2 = [5,6,7,8,9,10]. 
```

当`queue1.mergeQs(queue2)`被调用时，它将创建`queue1 = [1,5,2,6,3,7,4,8,9,10]`而`queue2`将保持`[5,6,7,8,9,10]`

```
 public void mergeQs(ArrayQmerge q){} 
```

与传递两个队列并返回一个新的合并队列相比，这种方式似乎更难实现。谢谢。

只是为了澄清，我正在寻找一种方法来交错来自两个队列的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:38:31.063

可能对您有所帮助的一个细节是，私有字段在 Java*中同一*类的不同对象之间*是可见的。*这意味着只要您只打算合并自己类的队列，您的代码就可以完全访问所有内部字段，例如用于存储元素的数组。

 *对于最简单的情况，所有元素都存储在一个线性数组中，队列头的索引为零，这样的事情可能是一个开始：

```
public void mergeQs(ArrayQmerge q) {
    Object[] array = new Object[this.size() + q.size()];

    int i;
    int o;

    // Interleave elements
    for (i = 0, o = 0; i < this.size() && i < q.size(); ++i) {
        array[o++] = this.array[i];
        array[o++] = q.array[i];
    }

    // Copy the remaining elements
    while (i < this.size()) {
        array[o++] = this.array[i++];
    }

    while (i < q.size()) {
        array[o++] = q.array[i++];
    }

    this.array = array;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:36:29.023

你可以在merge方法中在本地新建一个Queue，然后将你的类的队列分配给本地版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T21:39:42.933

由于您使用的是自己的自制软件`ArrayQueue`，因此这是猜想。

创建一个新队列并返回正如我认为您已经说过的那样更容易，更有效，因为将元素插入到支持数组的结构中将涉及为每个插入操作将其余元素向下移动一个位置。

An alternative is to implement `public void mergeQs(ArrayQmerge q)` by swapping out the underlying array you have backing it. So you get the same easy implementation as returning a new Queue but with the same in place side effect.*

# windows-server-2008-r2 - 如何在单线程应用程序中使用 FileStream 提高吞吐量

> ID：13501664
> 
> 赞同：2
> 
> 时间：2012-11-21T20:34:05.227
> 
> 标签：windows-server-2008-r2, .net-4.5, ntfs, c#-5.0

我正在尝试在具有 RAID-5 中的八个 SSD 的数据流应用程序中获得顶级 I/O 性能（每个 SSD 宣传并提供 500 MB/秒的读取）。

我使用 64KB 缓冲区创建 FileStream 并以阻塞方式读取许多块（双关语不是故意的）。这是我现在拥有的 80GB 的 20K 文件，没有碎片：传统阻塞读取速度为 1270 MB/秒，单线程，1556 MB/秒，6 个线程。

我注意到单线程是单个内核的 CPU 时间花费在内核中（在具有 12 个内核的 Process Explorer 中，8.3% 为红色）。使用 6 个线程，大约 5 倍 CPU 时间花费在内核中（41% 的红色在具有 12 个内核的 Process Explorer 中）。

我真的很想避免 I/O 绑定场景中多线程应用程序的复杂性。

是否有可能在单线程应用程序中实现这些传输速率？也就是说，什么是减少内核模式时间的好方法？

如果有的话，C# 中的新 Async 特性将如何提供帮助？

作为比较，[ATTO 磁盘基准测试](http://www.attotech.com/products/product.php?sku=Disk_Benchmark)显示在此硬件上的这些块大小和低 CPU 利用率下为 2500 MB/秒。但是，ATTO 数据集大小仅为 2GB。

使用[LSI 9265-8i](http://www.lsi.com/products/storagecomponents/Pages/MegaRAIDSAS9265-8i.aspx) RAID 控制器，具有 64k 条带大小，64k 集群大小。

![图像1](../Images/3e0e0c378eb83971e579d67bbbdf3bec.png)

![摘要图像](../Images/e9f58f5a3fd2ce072e7623dbea07ed40.png)

![i/o 计数](../Images/f2821d7828af43eb7ad65e9a34f71779.png)

![QD10](../Images/1f3e10deecb20cc4358bb193b2487684.png)

![ATTO 单一请求](../Images/70761e6649f9ad320a4d5734c72558f2.png)

这是正在使用的代码的草图。我不会以这种方式编写生产代码，它只是一个概念证明。

```
 volatile bool _somethingLeftToRead = false;
   long _totalReadInSize = 0;
   void ProcessReadThread(object obj)
   {
      TestThreadJob job = obj as TestThreadJob;
      var dirInfo = new DirectoryInfo(job.InFilePath);
      int chunk = job.DataBatchSize * 1024;

      //var tile = new List<byte[]>();

      var sw = new Stopwatch();

      var allFiles = dirInfo.GetFiles();

      var fileStreams = new List<FileStream>();
      long totalSize = 0;
      _totalReadInSize = 0;

      foreach (var fileInfo in allFiles)
      {
         totalSize += fileInfo.Length;
         var fileStream = new FileStream(fileInfo.FullName,
             FileMode.Open, FileAccess.Read, FileShare.None, job.FileBufferSize * 1024);

         fileStreams.Add(fileStream);
      }

      var partial = new byte[chunk];
      var taskParam = new TaskParam(null, partial);
      var tasks = new List<Task>();
      int numTasks = (int)Math.Ceiling(fileStreams.Count * 1.0 / job.NumThreads);
      sw.Start();

      do
      {
         _somethingLeftToRead = false;

         for (int taskIndex = 0; taskIndex < numTasks; taskIndex++)
         {
            if (_threadCanceled)
               break;
            tasks.Clear();
            for (int thread = 0; thread < job.NumThreads; thread++)
            {
               if (_threadCanceled)
                  break;
               int fileIndex = taskIndex * job.NumThreads + thread;
               if (fileIndex >= fileStreams.Count)
                  break;
               var fileStream = fileStreams[fileIndex];

               taskParam.File = fileStream;
               if (job.NumThreads == 1)
                  ProcessFileRead(taskParam);
               else
                  tasks.Add(Task.Factory.StartNew(ProcessFileRead, taskParam));

               //tile.Add(partial);
            }
            if (_threadCanceled)
               break;
            if (job.NumThreads > 1)
               Task.WaitAll(tasks.ToArray());
         }

         //tile = new List<byte[]>();
      }
      while (_somethingLeftToRead);

      sw.Stop();

      foreach (var fileStream in fileStreams)
         fileStream.Close();

      totalSize = (long)Math.Round(totalSize / 1024.0 / 1024.0);
      UpdateUIRead(false, totalSize, sw.Elapsed.TotalSeconds);
   }

   void ProcessFileRead(object taskParam)
   {
      TaskParam param = taskParam as TaskParam;
      int readInSize;
      if ((readInSize = param.File.Read(param.Bytes, 0, param.Bytes.Length)) != 0)
      {
         _somethingLeftToRead = true;
         _totalReadInSize += readInSize;
      }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:42:13.797

这里有很多问题。

首先，我看到您没有尝试使用非缓存 I/O。这意味着系统将尝试将您的数据缓存在 RAM 中并从中读取服务。因此，您可以从事物中获得额外的数据传输。执行非缓存 I/O。

接下来，您似乎正在循环内创建/销毁线程。这是低效的。

最后，您需要调查数据的对齐方式。跨越读取块边界会增加您的成本。

我会提倡使用非缓存的异步 I/O。我不确定如何在 C# 中完成此操作（但应该很容易）。

编辑：另外，你为什么使用 RAID 5？除非数据是一次性写入的，否则这可能会在 SSD 上产生可怕的性能。值得注意的是，擦除块大小通常为 512K，这意味着当您写入较小的内容时，SSD 将需要读取其固件中的 512K，更改数据，然后将其写入其他位置。您可能想让条带大小 = 擦除块的大小。此外，您还应该检查写入的对齐方式。

# c++ - Visual Studio 2010 Watch - 错误的值

> ID：13501665
> 
> 赞同：0
> 
> 时间：2012-11-21T20:34:06.013
> 
> 标签：c++, visual-studio-2010, watch

我有以下代码片段

```
fscanf( fSettings, "%s", szLine );  
bool x = separateBool   ( szLine );
gSettings.useBE = x; 
```

`szLine`包含`useBE=1`. `x`设置为`true`VS2010 Pro 手表可以看到。然而，在`gSettings.useBE`最后一行赋值后， 的值`gSettings.useBE`仍然可见为假！我不知道这是怎么发生的。已安装 VS2010 SP1。非常感谢您的任何意见。

![观看 VS 2010](../Images/864f1134958bab30d690796b3654ef2b.png)

编辑：separateBool 是以下函数：

```
 inline 
  bool separateBool( const char * szStr )   
  {
       std::vector<std::string> res = split(szStr, '=');
       if ( res.size() < 2 )
          ;  /* error */
       return (str2int( res[1] ) == 1 );        
  }; 
```

“算法”的玩具版

```
bool a = false;
bool b = false;
b = separateBool    ( szLine );
a = b;
a = separateBool    ( szLine ); 
```

一切都做对了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T23:52:35.067

您的程序分配了`gSettings.useBE`两次，因此没有理由报警，因为它具有两个不同的值。

由于我们不知道是什么`separateBool`，我们必须猜测。

如果我不得不猜测，`separateBool`有类似的签名`bool *(char**)`和这些语义——从字符串中读取一个参数并更新参数以指向下一个参数。

如果我的假设是正确的，那么结果将是第二次调用要么找到一个评估为的参数，`false`要么找到没有参数或其他导致`separateBool`return的条件`false`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:02:34.257

`Struct Member Alignment`将in从原来的**8 个**字节更改`Properties->C/C++->CodeGeneration`为**4 个**字节就可以了。但我仍然不知道为什么...

# iphone - 使用 iOS 5 Containment API 并将滑动手势向下反映到子视图控制器

> ID：13501667
> 
> 赞同：0
> 
> 时间：2012-11-21T20:34:33.650
> 
> 标签：iphone, ios, uiviewcontroller, containment

我正在尝试开发一些可重用的 ViewController 类。

在我的旧视图控制器（iOS5 之前）中，我通常在视图控制器上有两个表视图。

我正在计划重写，并且正在考虑使用新的 iOS 5 包含 API，请考虑以下示例：

理想情况下，我会使用两个视图控制器，每个视图控制器有 2 个表视图。在任何时候，任何一个 ViewController 都会显示 2 个 tableView。

我想知道我是否应该：使用 4 个 ViewController，每个都有一个 tableView，将它们添加到 ParentContainerView。按照我之前的顺序排列它们。

问题是，为了能够以分开的方式同时显示两个 ViewController，**当滑动手势为 IN PROGRESS 时改变 A viewController 的行为**。

反映滑动手势：

我似乎真的无法弄清楚如何将滑动手势反映到子视图控制器并影响视图控制器的滑动行为。任何例子都会很棒。例如，当右滑动手势正在进行时，索引 0 处的 ViewController 会减小宽度，然后消失到左侧，而索引 2 处的新 ViewController 会出现，而中间的 ViewController（索引 1）会更改其 y 位置而不是其宽度。

任何建议都会很棒，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:11:16.473

我不知道这是否是您想要的，但我已经使用滚动视图在滚动视图的内容视图中有四个容器视图实现了类似的功能。这些容器视图中的每一个都有一个嵌入到视图控制器的 segue（在您的情况下将是一个 tableViewController）。

所以这就是我的做法：

1.  我在视图控制器中添加了一个滚动视图
2.  我将 UIView 拖到滚动视图上并将其框架设置为 {{0,0},{640,548}}
3.  在第 2 步的视图下方添加了 4 个容器视图（在下方，我的意思是在屏幕左侧对象列表中的视图下方。这样做更容易，因为视图不会显示其全宽画布）。我将它们的帧设置为 {{0,0},{160,548}} {{160,0},{160,548}} {{320,0},{160,548}} 和 {{480,0},{160,548}} . 这给了你四个视图控制器，每个都是屏幕宽度的一半。
4.  在滚动视图下添加了另一个全尺寸视图（在列表中，但这意味着在视图层次结构的顶部）并使其背景颜色清晰。此视图位于顶部并拦截所有触摸。
5.  在第 4 步的视图中添加了 2 个滑动手势识别器（一个左在右）。

在视图控制器中，我为滚动视图（scroller）和大型（640 x 548 one）视图（内容）创建了 IBOutlets，并在 .m 文件中添加了以下代码：

```
@implementation ViewController

-(void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    self.scroller.contentSize = self.content.frame.size;
}

-(IBAction)moveLeft:(id) sender {
    if (self.scroller.contentOffset.x < 320)
        [self.scroller setContentOffset:CGPointMake(self.scroller.contentOffset.x + 160, 0) animated:YES];
}

-(IBAction)moveRight:(id) sender {
    if (self.scroller.contentOffset.x > 0)
        [self.scroller setContentOffset:CGPointMake(self.scroller.contentOffset.x - 160, 0) animated:YES];
}

@end 
```

2 个手势识别器在 IB 中连接到 moveLeft: 和 moveRight: 方法。因此，这使我能够同时在屏幕上显示控制器 1&2、2&3 或 3&4。

# apache - 特定于语言环境的页面的 apache 重写规则

> ID：13501670
> 
> 赞同：0
> 
> 时间：2012-11-21T20:34:45.873
> 
> 标签：apache, rewrite

如果他们在 URL 中没有区域设置，我想将用户重定向到通用注册页面，如果他们带有区域设置，我想重定向到特定注册页面。由于某种原因，以下不起作用，让我知道如何解决：

```
RewriteCond %{QUERY_STRING} source=actp
RewriteRule ^/(en|de|fr|zh|ja|jp|ko|kr)/web/login/registration $1/web/login/registration? [R=301,L]

RewriteCond %{QUERY_STRING} source=actp
RewriteRule /web/login/registration /web/login/registration? [R=301,L] 
```

例子：

```
Before: website.com/web/login/registration
after: website.com/web/login/registration?source=actp 
before: website.com/kr/web/login/registration 
after: website.com/kr/web/login/registration?source=actp 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:49:14.727

根据您之前/之后的 URL，您在这里使用了错误的 RewriteCond。`source=actp`在评估 RewriteRule 之前，它会期望查询字符串匹配。由于您之前的 URL 没有这样的查询字符串，因此 RewriteRule 甚至不会被评估。你根本不需要 RewriteCond 。

尝试这个：

```
RewriteRule ^/?((en|de|fr|zh|ja|jp|ko|kr)/)?web/login/registration$ /$2web/login/registration?source=actp [R=301,L] 
```

# java - 在运行时在属性文件中设置值

> ID：13501675
> 
> 赞同：2
> 
> 时间：2012-11-21T20:35:06.997
> 
> 标签：java, properties

是否可以在运行时在属性文件中设置值。

我试过这个，它在读回属性时发生了变化，但是当我签入文件时，没有反映更改。

```
 try {
            Properties props = new Properties();
            props.setProperty("ServerAddress", "ee");
            props.setProperty("ServerPort", "123");
            props.setProperty("ThreadCount", "456");
            File f = new File("myApp.properties");

            OutputStream out = new FileOutputStream( f );
            props.store(out, "This is an optional header comment string");

            System.out.println(props.get("ServerPort"));
            out.close();
       }
        catch (Exception e ) {
            e.printStackTrace();
        } 
```

输出：123。

我的需要是在应用程序范围内拥有一个属性文件，并通过 GUI 网页可以更改配置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T19:08:29.120

我认为部分问题是每次运行该代码时都会覆盖当前存在的文件。您需要做的是将当前存在的属性加载到 Properties 对象中，然后更改需要更改的属性的值，最后存储这些属性。像这样的东西：

```
OutputStream out = null;
        try {

            Properties props = new Properties();

            File f = new File("myApp.properties");
            if(f.exists()){

                props.load(new FileReader(f));
                //Change your values here
                props.setProperty("ServerAddress", "ThatNewCoolValue");
            }
            else{

                //Set default values?
                props.setProperty("ServerAddress", "DullDefault");
                props.setProperty("ServerPort", "8080");
                props.setProperty("ThreadCount", "456");

                f.createNewFile();
            }

            out = new FileOutputStream( f );
            props.store(out, "This is an optional header comment string");

            System.out.println(props.get("ServerPort"));

       }
        catch (Exception e ) {
            e.printStackTrace();
        }
        finally{

            if(out != null){

                try {

                    out.close();
                } 
                catch (IOException ex) {

                    System.out.println("IOException: Could not close myApp.properties output stream; " + ex.getMessage());
                    ex.printStackTrace();
                }
            }
        } 
```

首次运行后的结果：

```
 #This is an optional header comment string
  #Thu Feb 28 13:04:11 CST 2013
  ServerPort=8080
  ServerAddress=DullDefault
  ThreadCount=456 
```

第二次运行（以及每次后续运行）后的结果：

```
 #This is an optional header comment string
  #Thu Feb 28 13:04:49 CST 2013
  ServerPort=8080
  ServerAddress=ThatNewCoolValue
  ThreadCount=456 
```

# php - 仅使用一个字符的 4 到 12 个字符的随机字符串

> ID：13501678
> 
> 赞同：1
> 
> 时间：2012-11-21T20:35:24.620
> 
> 标签：php

我需要使用 PHP 生成这样的东西：

```
******
*********
****
***********
******
********
*******
*********
*******
**********
********
******
******** 
```

使用 PHP。

所以，如果我到目前为止有这个代码：

```
<?php 

$character = "*"; //character that will be used in generated strings

$min = "4"; //minimum characters for a generated string

$max = "12"; //maximum characters for a generated string

?> 
```

为 rand() 和字符串的 echo 编写下一部分代码的有效方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T20:36:27.497

您可以使用这些变量[`str_repeat()`](http://php.net/str_repeat)与[`mt_rand()`](http://php.net/mt_rand)（或普通的 old ）结合使用。[`rand()`](http://php.net/rand)

```
echo str_repeat($character, mt_rand($min, $max)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T20:36:44.913

```
<?php 
$character = "*"; //character that will be used in generated strings
$min = "4"; //minimum characters for a generated string
$max = "12"; //maximum characters for a generated string

echo str_repeat($character, mt_rand($min, $max);
?> 
```

# c# - 在 C# 中使用空值或空值初始化元组

> ID：13501684
> 
> 赞同：7
> 
> 时间：2012-11-21T20:35:54.357
> 
> 标签：c#, dictionary, tuples, trygetvalue

我在 SetValue() 中设置了这个字典和元组，如下所示：-

```
var myDict = new Dictionary<string, Tuple<string, string>>();

private void SetValue() 
{
  var myTuple1= Tuple.Create("ABC", "123");
  var myTuple2= Tuple.Create("DEF", "456");
  myDict.Add("One", myTuple1)
  myDict.Add("Two", myTuple2)
} 
```

我正在尝试检索 GetValue() 中的元组，如下所示：-

```
private void GetValue()
{
  var myTuple = new Tuple<string, string>("",""); //Is this correct way to initialize   tuple
  if (myDict.TryGetValue(sdsId, out myTuple))
  {
    var x = myTuple.Item1;
    var y = myTuple.Item2;
   }
} 
```

我的问题是这是否是在从字典中检索元组时初始化元组的正确方法？有更好的代码吗？

```
 var myTuple = new Tuple<string, string>("",""); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-21T20:38:12.877

您不需要为 out 参数创建实例。只需将局部变量声明为元组，但不要赋值。

```
Tuple<string, string> myTyple; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-21T20:38:45.397

如果它是一个输出参数，则该对象在使用前不需要初始化。你应该能够做到：

```
Tuple<string,string> myTuple;
if (myDict.TryGetValue(sdsId, out myTuple))
{
    var x = myTuple.Item1;
    var y = myTuple.Item2;
} 
```

# asp.net - 使用 R 从 RSS 提要中提取更多帖子到 CSV

> ID：13501688
> 
> 赞同：4
> 
> 时间：2012-11-21T20:36:17.097
> 
> 标签：asp.net, r, parsing, rss

我正在尝试从以下网址[http://live.reuters.com/Event/rss.aspx?id=70335](http://live.reuters.com/Event/rss.aspx?id=70335)的 RSS 提要中提取数据。本质上，我想使用这篇文章中概述的代码提取每篇文章的标题和日期：[Parse RSS feed using XML packagin R](https://stackoverflow.com/questions/13467783/parse-rss-feed-using-xml-packagin-r)

代码本身是

```
 library(XML)
library(RCurl)

###Extracting Data from Reuters
xml.url <- "http://live.reuters.com/Event/rss.aspx?id=70335"
script  <- getURL(xml.url)
doc     <- xmlParse(script)
titles    <- xpathSApply(doc,'//item/title',xmlValue)
pubdates <- xpathSApply(doc,'//item/pubDate',xmlValue)
reuters<-cbind(titles, pubdates)
reuters_data<-data.frame(reuters)

 #Exporting as a csv
write.csv(reuters_data, file = "reuters_post.csv") 
```

该代码几乎完全符合我的要求。但是，我遇到的问题是它只提取了前 45 个帖子。我知道有接近 1000 个帖子。这是否与 rss.aspx 格式有关？有没有一种解决方法可以让我获得 RSS 提要中的所有帖子，而不仅仅是前 45 个？任何帮助将不胜感激，因为我是数据抓取的新手。

谢谢，托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:50:34.747

它解决了不允许检索历史信息的 RSS/Atom 提要的问题，请参阅[如何获取 RSS 提要上的所有旧项目？](https://stackoverflow.com/questions/576552/how-do-i-fetch-all-old-items-on-an-rss-feed)

但是，我们可以使用非官方的 Google Reader API [GoogleReaderAPI Wiki](https://code.google.com/p/pyrfeed/wiki/GoogleReaderAPI)。

```
library(RCurl)
library(RJSONIO)

N <- 100 # Number of items to fetch
url <- paste("http://www.google.com/reader/api/0/stream/contents/feed/http://live.reuters.com/Event/rss.aspx%3Fid=70335?n=", N, sep="")

json <- getURL(url)                               # Fetches data
list <- fromJSON(json)                            # JSON to list
df   <- as.data.frame(do.call(rbind, list$items)) # list to data.frame

title    <- unlist(df$title)                                                # Title
datetime <- as.POSIXlt(unlist(df$published), origin="1970-01-01", tz="GMT") # Publication date

reuters <- data.frame(title, datetime)        # Output data.frame
write.csv(reuters, file = "reuters_post.csv") # Writes CSV 
```

# jquery - JQuery 背景动画 - 这是正确的方法吗？

> ID：13501699
> 
> 赞同：2
> 
> 时间：2012-11-21T20:36:45.560
> 
> 标签：jquery, animation, background, jquery-animate

我正在尝试根据菜单 LI 使菜单的背景动画化

到目前为止我的脚本是[http://jsfiddle.net/d9LHV/70/](http://jsfiddle.net/d9LHV/70/)

```
$(function() {
    $('.top-nav ul li').mouseenter(function() {
        var position = $(this).position()
        $(this).parent().animate({
            'backgroundPosition': position.left}, {duration: 150})
    })
    .mouseout(function() {
        $(this).parent().animate({})
    })
}); 
```

似乎可以工作，但对 jQuery 感觉有些不对劲，但我没有任何 jQuery 经验并且想要一些输入。

如果我使用 .hover 或取出 .mouseout 部分，动画会变得跳跃和断断续续。

有没有更好的方法来获得结果？或者我的逻辑有些不对劲，因为我不明白为什么我需要空鼠标来使其顺利运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:55:17.187

好吧，它变得跳跃和波涛汹涌的原因是因为在相同元素上触发了多个动画事件，因此它将所有这些事件排成队列并一个接一个地运行它们。

您可以做的是`.stop()`在开始另一个动画之前使用函数，如下所示：

```
$(function() {
    $('.top-nav ul li').mouseenter(function() {
        var position = $(this).position();
        $(this).parent().stop().animate({'backgroundPosition': position.left}, 150);
    });
});​ 
```

在这里工作演示：http: [//jsfiddle.net/pulkitm/d9LHV/71/](http://jsfiddle.net/pulkitm/d9LHV/71/)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:50:41.140

我会像这样构造它（包括分号）：

```
$(function() {
    $('.top-nav ul li').mouseenter(function() {
        var position = $(this).position();
        $(this).parent().animate({
            'backgroundPosition': position.left
        }, 150);
    })
    .mouseout(function() {
        $(this).parent().animate();
    })
});​ 
```

# c# - 这是 AutoMapper 2.0.0 和 2.2.0 之间的重大变化吗？

> ID：13501702
> 
> 赞同：32
> 
> 时间：2012-11-21T20:36:55.503
> 
> 标签：c#, collections, ienumerable, automapper, automapper-2

我今天从 AutoMapper 2.0.0 更新到 2.2.0 并意识到更新破坏了一些代码。在作为问题发布在 automapper github 站点上之前，想在这里询问一下。

我的目标类型之一初始化集合属性，如下所示：

```
public class PageOf<TModel>
{
    public PageOf()
    {
        Items = Enumerable.Empty<TModel>();
    }

    public IEnumerable<TModel> Items { get; set; }
} 
```

使用 automapper 2.0.0，这很好。当我更新到 2.2.0 时，映射到此目标类型会导致 NotSupportedException 并显示消息“集合具有固定大小”。（该异常被包装在 AutoMapperMappingException 中。）

我可以通过将上面的构造函数代码更改为此来解决这个问题：

```
public PageOf()
{
    Items = new List<TModel>();
} 
```

似乎 AutoMapper 2.0.0 正在丢弃 Items 属性中的任何值并使用`set`属性访问器，而 AutoMapper 2.2.0 只是使用`get`属性访问器并尝试修改现有的 IEnumerable。看起来`Enumerable.Empty<TModel>()`只是替换一个长度为零的数组，这可以解释异常。

这是一个错误吗？AutoMapper 在 2.0.0 和 2.2.0 之间发生了什么变化，会导致它忽略目标属性设置器，而是尝试修改现有集合？

**更新：**

根据要求，这里是 CreateMap 调用：

```
public class PagedQueryResultToPageOfItemsProfiler : Profile
{
    protected override void Configure()
    {
        CreateMap<PagedQueryResult<EstablishmentView>, PageOfEstablishmentApiModel>();
    }
} 
```

该类`PageOfEstablishmentApiModel`继承自`PageOf<EstablishmentApiModel>`.

这是 Mapper.Map 代码：

```
var query = Mapper.Map<EstablishmentViewsByKeyword>(input);
var results = _queryProcessor.Execute(query);
var model = Mapper.Map<PageOfEstablishmentApiModel>(results); // exception here 
```

如果 AutoMapper 从 2.0.0 到 2.2.0 需要特殊的映射配置[（例如 .ConvertUsing(x => x)）](https://github.com/AutoMapper/AutoMapper/issues/274)，我们可能不得不挂在旧版本上。我一直很喜欢 AM 如何自动转换集合属性，没有它，AM 看起来更像是 ValueInjecter。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:47:48.507

您是否尝试过这样使用 Map 方法： `Mapper.Map<DestinationClass, SourceClass>(object to convert)`

?

使用 2.2 版本的 AutoMapper，这就是我们使用它的方式，它对我们来说很好用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T19:30:11.917

我猜它正在尝试添加到您的集合中，但由于您的集合是只读实例 ( `Enumerable.Empty<T>`)，因此它实际上无法修改它。我假设您是正确的，AutoMapper 更改了有关它们如何实例化新类型的代码。使用可变实例代替，例如`new List<T>()`or `T[]`。

# mysql - SQL重复查询在MySQL中不起作用

> ID：13501704
> 
> 赞同：1
> 
> 时间：2012-11-21T20:37:03.117
> 
> 标签：mysql

我在这里发现了一个非常相似的问题，复制了根据需要更改的代码，它不会在 MySQL 下运行：

```
SELECT 
  id_manufacturer,
  id_partname,
  id_model,
  cnumber,
  COUNT (*)
FROM 
  rpi_consumables
GROUP BY 
  id_manufacturer, id_partname, id_model, cnumber
HAVING COUNT(*) > 1 
```

任何人对为什么语法失败有任何想法？

> 错误代码：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以
> 在第 6 行的 rpi_consumables 组的 id_manufacturer、id_partname、id_mode 的'*) 附近使用正确的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:38:29.823

`COUNT`和之间不应有空格`(*)`。

```
SELECT 
  id_manufacturer,
  id_partname,
  id_model,
  cnumber,
  COUNT(*) /* This is where the space needs to be removed */
FROM 
  rpi_consumables
GROUP BY 
  id_manufacturer, id_partname, id_model, cnumber
HAVING COUNT(*) > 1 
```

# jquery - 如何在 JQuery 中使用回调？

> ID：13501706
> 
> 赞同：4
> 
> 时间：2012-11-21T20:37:15.510
> 
> 标签：jquery, callback

我是 JQuery 的超级初学者，但我真的很喜欢玩它。我正在制作一个页面，它开始变慢/出现故障，我还不知道如何使用回调，我认为这会很有帮助。

我正在使用的代码如下所示：

```
$(".navHome").click(function(){
    var div=$(".navHome");
    div.animate({left:'190px'},"fast");

    var div=$(".content");
    div.animate({width:'700px'},"slow");
    div.animate({height:'250px'},"slow");

    $(".content").load("home.html");

    var div=$(".xIcon");
    div.animate({width:'20px'},"slow");
    div.animate({height:'20px'},"slow");
}); 
```

所以我点击一个div“navHome”，它移动并且“内容”div展开/加载。但它开始看起来波涛汹涌。我认为回调是我需要的，但不确定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T20:44:57.463

您不应该在同一范围内多次定义一个变量，这是您使用回调函数的代码，请注意，您可以使用一种动画方法为多个属性设置动画。

> .animate（**属性**[，持续时间] [，缓动] [，**完成**]）

```
$(".navHome").click(function(event){
    // event.preventDefault(); // prevents the default action of the event
    $(this).animate({left:'190px'},"fast", function(){
        $(".content").animate({width:'700px', height:'250px'},"slow", function(){
            $(this).load("home.html", function(){
                $(".xIcon").animate({width:'20px', height:'20px'},"slow");
            })
        })
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:44:44.110

回调可能不是您想要的，因为您的动画会“排队”，一个接一个。

它可能会变得不稳定，因为你有太多的事情要做...... javascript css 动画并不是特别快，并且由于 javascript 引擎的差异，很大程度上依赖于浏览器。如果您正在寻找更流畅的动画，我建议您添加和删除应用了 CSS 转换的类，因为 CSS 是硬件加速的，并且不会占用宝贵的 javascript 资源，让您的应用程序的其余部分运行得更流畅。

作为旁注，您不需要`div`每次使用`var`关键字都重新声明，您还可以通过逗号分隔对象属性并链接您的 jQuery 方法来为多个属性设置动画，这样您就不必重新查询 DOM，例如这：

```
$(".navHome").click(function(){

  $(this).animate({left:'190px'},"fast");

  $(".content").animate({width:'700px', height:'250px'},"slow")
               .load("home.html");

  $(".xIcon").animate({width:'20px', height:'20px'},"slow");

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:47:59.697

试试这个：

```
$(".navHome").click(function(){

$(this).animate({left:'190px'},"fast");

$(".content")
.animate({width:'700px'},"slow");
.animate({height:'250px'},"slow");

$(this).load("home.html");

$(".xIcon")
.animate({width:'20px'},"slow");
.animate({height:'20px'},"slow");
}); 
```

查看语法 - 您应该重构代码并使其更容易！

# string - BlackBerry Cascades 中的 QML 字符串

> ID：13501710
> 
> 赞同：1
> 
> 时间：2012-11-21T20:37:25.420
> 
> 标签：string, qml, blackberry-10

我正在尝试在最新的 BlackBerry 10 平台中构建自定义按钮。

**该按钮应在单击时更改背景图像，然后在第二次单击时将其更改回**。

*按钮逻辑相当简单：单击后，我检查按钮中当前图像的类型并更改图像源。*

我从一个基本的 QML 自定义控件开始，它看起来像这样（去掉了标签和其他不重要的东西）：

```
import bb.cascades 1.0

Container
{

    id: root
    layout: DockLayout
    {
    }

    function clickMe()
    {
        var source = myImage.defaultImageSource.toString();

        console.log(source);

        if (source.endsWith("image.png"))
        {
            myImage.defaultImageSource = "asset:///images/image_pushed.png";
        }
        else
        {
            myImage.defaultImageSource = "asset:///images/image.png";
        }
    }

    ImageButton
    {
        id: myImage
        defaultImageSource: "asset:///images/image.png"
    }

    onCreationCompleted: 
    {
        myImage.clicked.connect(root.clickMe);
    }
} 
```

ImageButton 点击​​事件连接到 JavaScript 函数**clickMe**。该函数触发并且 URL 被正确记录到控制台。

**问题是 IF 子句，因为 image_pushed.png 从未设置。为什么会出现这个问题，我该如何实现这个按钮？**

我正在寻找解决此问题的**唯一 QML 解决方案**，并找到了以下信息：

*   defaultImageSource 属性是 QUrl 类型，它包含 toString() 方法。
*   toString() 方法返回QString，它确实有函数endsWith。
*   我的 QML 参考：http: [//qt-project.org/doc/qt-4.8/qstring.html#endsWith](http://qt-project.org/doc/qt-4.8/qstring.html#endsWith)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T08:03:07.133

在 QML 中，QString 实例似乎是一个普通的 JavaScript 字符串。此映射是自动完成的。并且 Javascript 字符串没有`endsWith`方法。您可以使用`search`带有正则表达式的方法来实现相同的目的。

```
if (source.search(/image\.png$/ !== -1) { /* ... */ } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:03:39.047

我认为您可以使用属性创建更简单的方法

例如：

```
Control{
 id : myControl
 property bool state
 ImageButton{
  defaultImageSource : state ? "firstImageAsset.png" : "secondImageAsset.png"
  onClick :{
    myControl.state = !myControl.state
  } 
 }
} 
```

# magento - Magento - 重写层次结构

> ID：13501722
> 
> 赞同：1
> 
> 时间：2012-11-21T20:38:30.567
> 
> 标签：magento

重写一个已经在magento中重写另一个类的类需要什么配置？

例如，有一个社区模块执行以下操作：

```
<models>
    <modulea>
        <adminhtml>
            <rewrite>
                <session>CompanyA_ModuleA_Model_Adminhtml_Session</session>
            </rewrite>
        </adminhtml>
    </modulea>
</models> 
```

我想重写社区模块，我正在尝试以下不起作用的代码：

```
<models>
    <moduleb>
        <class>CompanyB_ModuleB_Model</class>
    </moduleb>
    <modulea>
            <rewrite>
                <adminhtml_session>CompanyB_ModuleB_Model_Adminhtml_Session</adminhtml_session>
            </rewrite>
    </modulea>
</models> 
```

这有什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:49:55.777

小心你重写 XML 语法，你有一个错误。它应该像：

```
<modulea>
        <adminhtml>
            <rewrite>
                <adminhtml_session>CompanyA_ModuleA_Model_Adminhtml_Session</session>
            </rewrite>
        </adminhtml>
    </modulea> 
```

和

```
<moduleb>
        <adminhtml>
            <rewrite>
                <adminhtml_session>CompanyB_ModuleB_Model_Adminhtml_Session</session>
            </rewrite>
        </adminhtml>
    </moduleb> 
```

接下来，您需要以良好的顺序扩展 Good PHP 类。例如，如果您希望 CompanyA 扩展/重写 CompanyB ：

公司档案：

```
class CompanyA_ModuleA_Model_Adminhtml_Session extends Mage_Adminhtml_Model_Session { 
```

CompanyB 模型 php 文件：

```
class CompanyB_ModuleB_Model_Adminhtml_Session extends CompanyA_ModuleA_Model_Adminhtml_Session { 
```

最后一件事，为了确保重写以良好的顺序完成（当`Mage::getModel('adminhtml/session')`您想要检索 CompanyB 类而不是 COmpanyA 类时），您需要定义哪个模块取决于哪个模块。你在`app/etc/modules/Company_Module.xml`文件中这样做。

为 A 公司添加：

```
<depends>
    <Mage_Adminhtml />
</depends> 
```

为 B 公司添加：

```
<depends>
    <CompanyA_ModuleA />
</depends> 
```

# java - 在java中将两个数组中的数字相乘

> ID：13501724
> 
> 赞同：-3
> 
> 时间：2012-11-21T20:38:32.177
> 
> 标签：java, arrays

我想将java中两个数组的数量相乘。我声明了两个数组对象。a 用于获取 xValue，b 用于获取 yValue。在将 x 和 y 的值放入 n 个程序后，每次 x 和 y 的值都应该相乘。请给我看代码.. import java.util.*;

```
public class DataSetTesterN {   
   public static void main(String[] args)   
   {   
       DataSet a = new DataSet();
       // Object "a" for xValue"
       DataSet b = new DataSet();
       // Object "b" for yValue"
       Scanner input=new Scanner(System.in);
       System.out.println("enter the total number of Programs");
       int m =input.nextInt();
              for(int i =1; i <=m; i++)
                  // Entering total number of tested program.
                                 {
           System.out.println("enter x value for the program no. "+i+"");
           a.add(input.nextInt()); 
           // Getting an input for xValue.

           System.out.println("enter y value for the program no. "+i+"");
           b.add(input.nextInt());  
           // Getting an input for yValue.

           }

      System.out.println("count x: " + a.getCount());
      System.out.println("count y: " + b.getCount());  

      System.out.println("Mean x: " + a.getMean());
      System.out.println("Mean y: " + b.getMean()); 

      System.out.println("Sum x: " + a.getSum());
      System.out.println("Sum y: " + b.getSum()); 

      System.out.println("standard deviation: " + a.getStandardDeviation());  
      System.out.println("standard deviation: " + b.getStandardDeviation()); 

}  
} 
```

/////////////////////////

数据集类

```
import java.util.ArrayList;   
import java.util.List;   

public class DataSet {   

    private List<Double> inputList = new ArrayList();   
    double x = 0;   

    public DataSet() {   
    }   

    public void add(double x) {   

        inputList.add(x);   

    }   

    public double getMean() {   

        double sum = getSum();   
        double count = getCount();   
        double mean = sum / count;   

        return mean;   

    }   

    public double getSum() {   
        double sum = 0;   

        for (double d : inputList) {   
            sum += d;   
        }   
        return sum;   
    }   

    public double getStandardDeviation() {   

        double sum = getSum();

        double mean = getMean();   
        double calc1 = 0;   
        double calc2 = 0;   
        double count = getCount();   
        double stdDeviation = 0;   

        //System.out.println("Sum = " + sum);   

        for (int i = 0; i < count; i++) {   
            calc1 = inputList.get(i) - mean;   
            calc1 = Math.pow(calc1, 2);   
            calc2 = calc2 + calc1;   
        }   

            calc2 = calc2 / (count-1);   
            stdDeviation = Math.sqrt(calc2);   
        return stdDeviation;   
    }   

    public int getCount() {   
        return inputList.size();   

    }   
} 
```

其实我想做formula。我想得到 x*y 、 x^2 和 y^2 的值。很抱歉，我是 JAVA 语言的新手，不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T01:47:11.977

对java如此陌生，您使用arraylist来做简单的算术吗？这是干什么用的？

# sharepoint-2010 - 从 Sharepoint 2010 中的人员选取器中提取数据

> ID：13501725
> 
> 赞同：1
> 
> 时间：2012-11-21T20:38:32.303
> 
> 标签：sharepoint-2010

我正在尝试构建一个自定义列表，其中在两个不同的列中包含人员姓名和电子邮件地址。由于我连接了活动目录，因此我想从 AD 中选择此人的姓名，然后让他们的电子邮件地址自动填充到另一列中。

我想出的唯一方法是在活动目录中查找此人的姓名两次，第一次在“姓名”列中，第二次在“电子邮件”列中（格式化为显示此人的电子邮件）。我只需输入一次数据就可以做到这一点。这会容易得多，因为我必须在列表中添加数百个名字。

另外，这可能有点难，行的标题是人名，现在我必须手动输入它，但它可以根据从 AD 中选择的人员选择器名称自动填充吗？

戴夫

# dom - 在 SASS 中访问 HTML 属性值

> ID：13501726
> 
> 赞同：12
> 
> 时间：2012-11-21T20:38:32.797
> 
> 标签：dom, sass, html

是否可以在 SASS 中访问 HTML 属性值？我有一行代码说

```
<ul id="my_id" data-count="3"> 
```

这`3`是一些jQuery东西的结果。我需要`3`计算一些 CSS。如何将其保存为 SASS 变量？

或者，有没有办法计算某个父元素的子元素数量？说我有这个代码：

```
<ul id="my_id" data-count="3">
    <li>First list item</li>
    <li>Second list item</li>
    <li>Third list item</li>
</ul> 
```

（您可能已经猜到了， 的值`data-count`与列表项的数量相匹配。） SASS 可以计算列表项并将该数字保存为变量吗？

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-21T20:47:42.400

Sass 只是一个 CSS 生成器。它不会真正与您的 HTML 交互，因此您不能将 HTML 属性用作 Sass 变量。

但是，CSS 可以根据属性进行选择。所以它会比你想要的更冗长，但你可以做类似的事情

```
ul[data-count="3"]:after
  content: "There were three items in that list!" 
```

而且我*认为*，如果您愿意将自己仅限于最新浏览器的子集^(†</sup>，您可以使用 CSS`calc()`函数以及`attr()`在基于 CSS 的计算中使用属性。但这是非常前沿的。)

^(† 老实说，我不知道哪些浏览器的版本已经完全实现了这一点。我很确定 Firefox 有它，虽然我没有使用过它，而且我不知道其他浏览器。无论如何，它肯定没有得到很好的支持。)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T14:46:26.187

似乎您正试图在 CSS 中获取无序列表中的项目数量（也许根据兄弟姐妹的数量来改变它们的大小？）。

实际上，您不能将数据属性用作 Sass 变量。但是**，给定 parent 中的项目数，有一种纯 CSS 方法可以应用条件样式**。另外，它很容易用 Sass 编写。

假设列表中的最大项目数为 10，并且您想根据列表中 li 标签的数量计算 li 标签的大小。

```
@for $i from 1 through 10 {
    li:first-child:nth-last-child(#{$i}),
    li:first-child:nth-last-child(#{$i}) ~ li {
        width: (100%/$i);
    }
} 
```

这将输出以下 CSS：

```
li:first-child:nth-last-child(1),
li:first-child:nth-last-child(1) ~ li {
    width: 100%;
}
li:first-child:nth-last-child(2),
li:first-child:nth-last-child(2) ~ li {
    width: 50%;
}
li:first-child:nth-last-child(3),
li:first-child:nth-last-child(3) ~ li {
  width: 33.33333%;
}
li:first-child:nth-last-child(4),
li:first-child:nth-last-child(4) ~ li {
    width: 25%;
}
li:first-child:nth-last-child(5),
li:first-child:nth-last-child(5) ~ li {
    width: 20%;
}
li:first-child:nth-last-child(6),
li:first-child:nth-last-child(6) ~ li {
    width: 16.66667%;
}
li:first-child:nth-last-child(7),
li:first-child:nth-last-child(7) ~ li {
    width: 14.28571%;
}
li:first-child:nth-last-child(8),
li:first-child:nth-last-child(8) ~ li {
    width: 12.5%;
}
li:first-child:nth-last-child(9),
li:first-child:nth-last-child(9) ~ li {
    width: 11.11111%;
}
li:first-child:nth-last-child(10),
li:first-child:nth-last-child(10) ~ li {
    width: 10%;
} 
```

基本上，这使 li 标签的宽度为：

*   `100.0%`当只有一个 li 标签时
*   `50.00%`当有 2 个 li 标签时
*   `33.33%`当有 3 个 li 标签时
*   `25.00%`当有 4 个 li 标签时
*   `20.00%`当有 5 个 li 标签时
*   `16.66%`当有 6 个 li 标签时
*   `14.28%`当有 7 个 li 标签时
*   `12.50%`当有 8 个 li 标签时
*   `11.11%`当有 9 个 li 标签时
*   `10.00%`当有 10 li 标签时

对于一个活生生的例子，请参考我使用相同技巧做的[这个演示。](http://codepen.io/HugoGiraudel/pen/c3518482726229adc292de834df4e2c2)我希望它有所帮助。

# ruby-on-rails-3 - 如何在 Rails 中缓存每个用户的发票

> ID：13501728
> 
> 赞同：0
> 
> 时间：2012-11-21T20:38:40.647
> 
> 标签：ruby-on-rails-3, caching

我有一个应用程序，用户可以在其中注册、创建客户，然后为该客户创建发票。发票附有订单项和图片。

现在我想在发票上使用动作缓存和片段缓存。我应该如何命名片段缓存，以便它们仅用于该特定用户？（使用设计）。我正在考虑将发票 ID 和用户 ID 放在缓存的片段名称中，这是“Rails”的做法吗？

# javascript - 只在计算器上工作的平方

> ID：13501733
> 
> 赞同：1
> 
> 时间：2012-11-21T20:39:06.187
> 
> 标签：javascript

这应该是一个 JavaScript 计算器，但除了奇怪的 square 之外，似乎没有进行任何计算。例如，即使我插入数字，加、减、除和乘也不会给我答案。我不知道它有什么问题。

谢谢你的帮助！

```
 </style>

    <script type="text/javascript">
        <!-- JAVASCRIPT FUNCTIONS GO HERE -->
        var numberOne="", symbol="", numberTwo=""
        function equation (number){
            if(symbol==""){
                numberOne+=number
                document.getElementById('equation').value = numberOne;
            }
            else if(symbol!=""){
                numberTwo+=number
                document.getElementById('equation').value = numberTwo;
            }   
        }
        function getSymbol(operator){
            symbol=operator
            document.getElementById('equation').value = symbol;
        }

        function clear_equation () {
            document.getElementById('equation').value = "";
            numberOne=""
            numberTwo=""
            symbol=""
        }

        function remove () {
            Current = "0";{
            document.Calculator.Display.value = Current;
            }
        }

        function add(num1, num2) {
            output=Number(num1)+Number(num2)
            document.getElementById('equation').value = output;
        }
        function subtract(num1, num2) {
            output=Number(num1)-Number(num2)
            document.getElementById('equation').value = output;
        }
        function multiply(num1, num2) {
            output=Number(num1)*Number(num2)
            document.getElementById('equation').value = output;
        }
        function divide(num1, num2) {
            output=Number(num1)/Number(num2)
            document.getElementById('equation').value = output;
        }
        function sqrt(num1) {
            output=Number(num1)*Number(num1)
            document.getElementById('equation').value = output;
        }
        function sin(num1) {
            output=Math.sin(num1)
            document.getElementById('equation').value = output;
        }
        function solve (add) {
            if(symbol=="+"){
                add(numberOne, numberTwo)
            }
        }
        function solve (subtract) {
            if(symbol=="-"){
                subtract(numberOne, numberTwo)
            }
        }
        function solve (mutiply){
            if(symbol=="*"){
                mutiply(numberOne, numberTwo)
            }
        }
        function solve (divide) {
            if(symbol=="/"){
                divide(numberOne, numberTwo)
            }
        }
        function solve (sqrt) {
            if(symbol=="sqrt"){
                multiply(numberOne, numberOne)
            }
        }

    </script>
</head>
<body>
    <div class="container">
        <table cellspacing="0">
            <tr>
                <td colspan="5"><input class="equ" type="input" disabled="disabled" id="equation" value=""/></td>
            </tr>
            <tr>
                <td><input class="buttons" type="button" value="sin" onclick="getSymbol (this.value)" /></td>
                <td><input class="buttons" type="button" value="cos" onclick="getSymbol (this.value)" /></td>
                <td><input class="buttons" type="button" value="tan" onclick="getSymbol (this.value)" /></td>
                <td><input class="buttons" type="button" value="sqrt" onclick="getSymbol (this.value)" /></td>
            </tr>
            <tr>
                <td><input class="buttons" type="button" value="&larr;" onclick="remove ();"/></td>
                <td colspan="2"><input class="buttons" type="button" value="C" onclick="clear_equation (this.value)" /></td>
                <td><input class="buttons" type="button" value="/" onclick="getSymbol (this.value)"/></td>
            </tr>
            <tr>
                <td><input class="buttons" type="button" value="7" onclick="equation (this.value)"/></td>
                <td><input class="buttons" type="button" value="8" onclick="equation (this.value)"/></td>
                <td><input class="buttons" type="button" value="9" onclick="equation (this.value)"/></td>
                <td><input class="buttons" type="button" value="*" onclick="getSymbol (this.value)"/></td>
            </tr>
            <tr>
                <td><input class="buttons" type="button" value="4" onclick="equation (this.value)"/></td>
                <td><input class="buttons" type="button" value="5" onclick="equation (this.value)"/></td>
                <td><input class="buttons" type="button" value="6" onclick="equation (this.value)"/></td>
                <td><input class="buttons" type="button" value="-" onclick="getSymbol (this.value)"/></td>
            </tr>
            <tr>
                <td><input class="buttons" type="button" value="1" onclick="equation (this.value)"/></td>
                <td><input class="buttons" type="button" value="2" onclick="equation (this.value)"/></td>
                <td><input class="buttons" type="button" value="3" onclick="equation (this.value)"/></td>
                <td><input class="buttons" type="button" value="+" onclick="getSymbol (this.value)"/></td>
            </tr>
            <tr>
                <td colspan="2"><input class="buttons" type="button" value="0" onclick="equation (this.value)"/></td>
                <td><input class="buttons" type="button" value="." onclick="equation (this.value)"/></td>
                <td><input class="buttons" type="button" value="=" onclick="solve ();"/></td>
            </tr>
        </table>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:46:49.253

多个定义`solve()`只是相互覆盖，只有最后一个平方根生效。将它们组合成一个函数。

```
function solve() {
    if(symbol=="+"){
        add(numberOne, numberTwo)
    }
    else if(symbol=="-"){
        subtract(numberOne, numberTwo)
    }
    else if(symbol=="*"){
        mutiply(numberOne, numberTwo)
    }
    else if(symbol=="/"){
        divide(numberOne, numberTwo)
    }
    else if(symbol=="sqrt"){
        sqrt(numberOne, numberOne)
    }
} 
```

顺便说一句，您的“sqrt”函数实际上是平方函数 (x ² )，而不是平方根 (√x)。

# java - 用于嵌套表格布局的布局管理器

> ID：13501735
> 
> 赞同：3
> 
> 时间：2012-11-21T20:39:12.630
> 
> 标签：java, swing, layout-manager

我正在寻找一些关于如何实现某种 Swing 布局的指导。

我想要实现的是一开始有一个两行的布局。在用户命令中，我希望将第二行拆分为几列，并为这些列单元格中的每一个进行递归拆分，如上所示。

比如开头：

```
 -------------------
| Some stuff here   |
 -------------------
|                   |
 ------------------- 
```

变成：

```
 -------------------
| Some stuff here   |
 -------------------
|  stuff  | stuff   |
|---------|---------|
|         |         |
 ------------------- 
```

等等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T20:55:05.250

我会说 GridBagLayout，因为它可以为您提供您想要的东西，而无需在面板等中组合不同的布局管理器

另请参阅[LayoutManagers 的 Java 视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

# java - 列删除会增加 Cassandra 中的读取延迟吗？

> ID：13501741
> 
> 赞同：3
> 
> 时间：2012-11-21T20:39:48.353
> 
> 标签：java, timeout, cassandra, latency, hector

在我们的集群中，我们有一个 columnfamiliy，它的键是静态的，并且它的列有许多插入和删除，就像一个反向索引。随着时间的推移，具有多列的键的读取延迟会增加，现在，它会因超时而中断。

我们使用默认计数为 100 个的 ColumnSliceIterator，从 Min 到 Max Characters 进行切片。只有在分页数小于 5 时才有效。

我们认为 tumbstones 列可能会导致问题，因此，我们减少了 gc_grace_seconds 并执行了许多修复，但没有任何变化。

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T22:20:05.493

是的，墓碑绝对会导致这种情况。

您在减少 gcgs 方面走在正确的轨道上，但丢弃墓碑的关键是压实。您应该考虑切换到 Leveled Compaction，它更积极地将行合并在一起：[http ://www.datastax.com/dev/blog/when-to-use-leveled-compaction](http://www.datastax.com/dev/blog/when-to-use-leveled-compaction)

顺便说一句，我们在 Cassandra 1.2 中添加了请求跟踪，以使这种事情更容易诊断：[http ://www.datastax.com/dev/blog/tracing-in-cassandra-1-2](http://www.datastax.com/dev/blog/tracing-in-cassandra-1-2)

# c# - 在 Paypal 中创建灵活的定期付款资料

> ID：13501746
> 
> 赞同：1
> 
> 时间：2012-11-21T20:40:07.947
> 
> 标签：c#, asp.net, paypal

无论如何要在 Paypal 上创建灵活的定期付款资料吗？

像这样的东西：

在第一个月，用户无需支付任何费用。从第二个月到第五个月，收取 5.9 美元的费用。从第 6 个月到第 7 个月，收费 7.9 美元。从第 9 个月等开始，收取 9.9 美元的费用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:29:04.117

根据文档，在应用“常规”期间之前，您可以有两个“试用”期：

[订阅和定期付款变量](https://www.paypal.com/cgi-bin/webscr?cmd=p/acc/ipn-subscriptions-outside)

[订阅介绍](https://www.paypal.com/cgi-bin/webscr?cmd=p/xcl/rec/subscr-intro-outside)

因此，您可以拥有初始免费试用期 (" `period1`")，然后是 5.9 美元的试用期 (" `period2`")，然后是常规试用期 (" `period3`")。根据文档，我认为您必须像这样组织您的付款。换句话说，您可以拥有的试用期数量是有限的。

# c++ - OpenGL 渲染大量动态 2D 圆

> ID：13501752
> 
> 赞同：3
> 
> 时间：2012-11-21T20:40:27.150
> 
> 标签：c++, opengl

我在[这里](https://stackoverflow.com/questions/5669154/opengl-drawing-thousands-of-2d-circles)看到过关于这个主题的类似帖子，但是，我的问题有点不同。

我有一个 2D 图，它将由不同位置的不同大小的圆圈组成。目前，我的渲染方案使用一个显示列表来存储一个预先绘制的圆圈，用户可以使用 glScalef/glTranslatef 主动调整大小和翻译。但是，因为我正在渲染数千个圆圈，所以调整大小和绘制变得非常缓慢。每个圆可以有不同的半径和颜色，所以这些事情必须在循环内完成。

当用户改变圆圈的大小时，我可以尝试哪些事情来提高圆圈渲染的速度？我已经像上面的链接所说的那样研究了 VBO，但是对于我的对象大小不断变化的这种类型的应用程序，我会获得多少性能提升是模棱两可的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T00:57:41.523

> 因为我正在渲染**数千个圆圈**，所以调整大小和绘图变得**非常缓慢**

仅使用顶点数组，在具有 10,000 个圆圈的 Intel HD Graphics 3000 上每帧大约需要 60 毫秒：

```
// g++ -O3 circles.cpp -o circles -lglut -lGL
#include <GL/glut.h>
#include <vector>
#include <iostream>
#include <cmath>
using namespace std;

// returns a GL_TRIANGLE_FAN-able buffer containing a unit circle
vector< float > glCircle( unsigned int subdivs = 20 )
{
    vector< float > buf;

    buf.push_back( 0 );
    buf.push_back( 0 );
    for( unsigned int i = 0; i <= subdivs; ++i )
    {
        float angle = i * ((2.0f * 3.14159f) / subdivs);
        buf.push_back( cos(angle) );
        buf.push_back( sin(angle) );
    }

    return buf;
}

struct Circle
{
    Circle()
    {
        x = ( rand() % 200 ) - 100;
        y = ( rand() % 200 ) - 100;
        scale = ( rand() % 10 ) + 4;
        r = rand() % 255;
        g = rand() % 255;
        b = rand() % 255;
        a = 1;
    }

    float x, y;
    float scale;
    unsigned char r, g, b, a;
};

vector< Circle > circles;
vector< float > circleGeom;
void init()
{
    srand( 0 );
    for( size_t i = 0; i < 10000; ++i )
        circles.push_back( Circle() );
    circleGeom = glCircle( 100 );
}

void display()
{
    int beg = glutGet( GLUT_ELAPSED_TIME );

    glClear( GL_COLOR_BUFFER_BIT );

    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    double w = glutGet( GLUT_WINDOW_WIDTH );
    double h = glutGet( GLUT_WINDOW_HEIGHT );
    double ar = w / h;
    glOrtho( -100 * ar, 100 * ar, -100, 100, -1, 1);

    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();

    glEnableClientState( GL_VERTEX_ARRAY );
    glVertexPointer( 2, GL_FLOAT, 0, &circleGeom[0] );

    for( size_t i = 0; i < circles.size(); ++i )
    {
        Circle& c = circles[i];
        c.scale = ( rand() % 10 ) + 4;

        glPushMatrix();
        glTranslatef( c.x, c.y, 0 );
        glScalef( c.scale, c.scale, 0 );
        glColor3ub( c.r, c.g, c.b );
        glDrawArrays( GL_TRIANGLE_FAN, 0, circleGeom.size() / 2 );
        glPopMatrix();
    }

    glDisableClientState( GL_VERTEX_ARRAY );

    glutSwapBuffers();

    int end = glutGet( GLUT_ELAPSED_TIME );
    double elapsed = (double)( end - beg );
    cout << elapsed << "ms" << endl;
}

void timer(int extra)
{
    glutPostRedisplay();
    glutTimerFunc(16, timer, 0);
}

int main( int argc, char **argv )
{
    glutInit( &argc, argv );
    glutInitDisplayMode( GLUT_RGBA | GLUT_DOUBLE );
    glutInitWindowSize( 600, 600 );
    glutCreateWindow( "Circles" );

    init();

    glutDisplayFunc( display );
    glutTimerFunc(0, timer, 0);
    glutMainLoop();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:54:27.383

[`ARB_instanced_arrays`](http://sol.gfxile.net/instancing.html)基于实例化可能是最干净的。

您将有一个带有 M 个顶点的圆，您将绘制 N 次，将每个圆的 x/y 位置、半径和颜色存储为顶点属性并`glVertexAttribDivisor()`适当地使用。

如果你想要半径自适应 LOD，会变得更棘手。为此，您可能不得不深入研究几何着色器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T23:07:20.167

其次，使用带有 glDrawElementsInstanced 或 glDrawArraysInstanced 的实例化数组作为一种干净的解决方案，可以很好地转移到其他类型的几何体。

如果您想要/需要坚持使用 OpenGL 2（例如，必须在 iThing 上运行）并且您只需要圆形，也可以考虑点精灵。每个圆的原点是点顶点值。将半径存储为纹理坐标的 S 值、表面法线的 X 值等等。启用混合，GL_PROGRAM_POINT_SIZE，也许是点平滑；并编写一个顶点着色器，它将 gl_PointSize 设置为您想要的半径。即时圈子。

# javascript - 使用数组切换不同的图像

> ID：13501753
> 
> 赞同：0
> 
> 时间：2012-11-21T20:40:29.713
> 
> 标签：javascript, arrays, button

首先，我无法让 morscreens[i] 从我想要的数组中生成图像。当我拥有它时，它实际上是一个 [<] 按钮，字面意思是“morscreens [i]”，然后是 [>] 按钮。当我用引号包围 morscreens[i] （退出然后重新输入引用的文本）时，我得到错误 morshots() is not defined。

其次，如果我想让按钮循环显示，我应该使用子程序 morPrev() 和 morNext() 这样做吗？我担心的是让我想要返回的值超出范围并放置在适当的位置。我担心仅使用 i++ 和 i-- 不足以使其正常工作，即使使用 2 个 if 语句也是如此。

```
var mordorscreens = new Array();
mordorscreens[0] = '<img src=\"http://i.imgur.com/83HCt.png\" alt=\"scrns1\">';
mordorscreens[1] = '<img src=\"http://i.imgur.com/5mWIy.png\" alt=\"scrns1\">';
mordorscreens[2] = '<img src=\"http://i.imgur.com/pPafl.png\" alt=\"scrns1\">';

function morshots()
{
var i = 0;
    var mordor = document.getElementById("ss1");
        mordor.innerHTML = '<button onClick="morPrev();"> < </button>    mordorscreens[i]    <button onClick="morNext();"> > </button> ';

if (i<0) {i=2};
if (i>2) {i=0};
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:44:16.263

这条线

```
'<button onClick="morPrev();"> < </button>    
                mordorscreens[i]    <button onClick="morNext();"> > </button> '; 
```

应该看起来像

```
'<button onClick="morPrev();"> &lt; </button>' 
             + mordorscreens[i] + '<button onClick="morNext();"> &gt; </button>'; 
```

我认为公开变量 i 以迭代图像是一个坏主意。最好用 Javascript 而不是 HTML 分配事件处理程序。

试试这个代码

**HTML**

```
<div id="ss1">
   <button id="previous"> &lt; </button>
   <span id="imageSpan"></span>
   <button id="next"> &gt; </button>
</div> 
```

**Javascript**

```
var mordorscreens = [];
mordorscreens[0] = '<img src="http://i.imgur.com/83HCt.png" alt="scrns1">';
mordorscreens[1] = '<img src="http://i.imgur.com/5mWIy.png" alt="scrns1">';
mordorscreens[2] = '<img src="http://i.imgur.com/pPafl.png" alt="scrns1">';

function morshots() {
    var i = 0;
    var elem = document.getElementById('imageSpan');
    elem.innerHTML = mordorscreens[i];
    // Data Attribute that holds the initial 
    // image number
    elem.setAttribute('data-number', i);
}
// Call The function
morshots();

// Assign Event handlers
var buttons = document.getElementsByTagName('button');

for (var j = 0; j < buttons.length; j++) {
    // Add Click events to the button
    buttons[j].addEventListener('click', clickHandler);
}

function clickHandler() {
    var elem = document.getElementById('imageSpan');
    // Store the current Image Number in a HTML5 data-attribute
    var currImage = parseInt(elem.getAttribute('data-number'), 10);
    if (this.id === 'previous') {
        currImage--;
        currImage = currImage < 0 ? 2 : currImage;
    }
    else if (this.id === 'next') {
        currImage++;
        currImage = currImage > 2 ? 0 : currImage;
    }
    // Set the current Image Number 
    elem.setAttribute('data-number', currImage);
    elem.innerHTML = mordorscreens[currImage];
} 
```

**[检查 JSBin 演示](http://jsbin.com/uxasew/1/edit)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:44:45.953

这是一个没有变量的字符串：

```
mordor.innerHTML = '<button onClick="morPrev();"> < </button>    mordorscreens[i]    <button onClick="morNext();"> > </button> '; 
```

你需要打破你的价值：

```
mordor.innerHTML = '<button onClick="morPrev();"> < </button>'  +  mordorscreens[i]  +  '<button onClick="morNext();"> > </button> '; 
```

# java - 在完成 Android 日历意图后执行操作

> ID：13501759
> 
> 赞同：0
> 
> 时间：2012-11-21T20:40:53.417
> 
> 标签：java, android, android-intent, google-calendar-api

我正在调用以下函数来添加日历事件（主要取自[roman10](http://www.roman10.net/)）：

```
private void addEvent() {
    Intent l_intent = new Intent(Intent.ACTION_EDIT);
    l_intent.setType("vnd.android.cursor.item/event");
    l_intent.putExtra("title", "roman10 calendar tutorial test");
    l_intent.putExtra("description", "This is a simple test for calendar api");
    l_intent.putExtra("eventLocation", "@home");
    l_intent.putExtra("beginTime", System.currentTimeMillis());
    l_intent.putExtra("endTime", System.currentTimeMillis() + 1800*1000);
    l_intent.putExtra("allDay", 0);
    l_intent.putExtra("eventStatus", 1);
    l_intent.putExtra("visibility", 0);
    l_intent.putExtra("transparency", 0);
    l_intent.putExtra("hasAlarm", 1);

    try {
        startActivity(l_intent);
    } catch (Exception e) {
        Toast.makeText(this.getApplicationContext(), "Sorry, no compatible calendar is found!", Toast.LENGTH_LONG).show();
    }
} 
```

完成此意图后，我想手动刷新我的列表活动，它只是保存所有用户事件的列表（我希望它立即反映更改）。有谁知道这样做的方法？是否有任何特定功能在我可以修改的这个意图完成时被调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T20:52:49.560

你最好的选择是使用 startActivityForResults(Intent, id)

```
static private final int CALENDAR_DONE 101;
startActivityForResults(l_intent, CALENDAR_DONE); 
```

然后将此功能添加到您的活动中：

```
public void onActivityResult(int reqCode, int resultCode, Intent data) {
    super.onActivityResult(reqCode, resultCode, data);

    switch (reqCode) {
      case (CALENDAR_DONE) :
        if (resultCode == Activity.RESULT_OK) {
          //Do stuff here
        }       
      break;
    }
  } 
```

# python - 在 pytest 中，如何访问传递给测试的参数？

> ID：13501761
> 
> 赞同：5
> 
> 时间：2012-11-21T20:41:24.693
> 
> 标签：python, testing, pytest

在 pytest 中，我可以传递参数进行测试（使用固定装置或装饰器`@pytest.fixture(params=list-of-params)`）。

测试完成后，如果测试失败，则通过的参数会显示在结果中，如`TestCheckoutPage.test_address_edit[True]`或`False`如果它为假。

如何访问这些参数并将它们添加到终结器？`request.param`似乎不起作用，即使这是制作夹具时获取参数的方式：

```
@pytest.fixture(params=[True, False])
def user(request):
    return request.param 
```

这样可行。但是，如果我尝试将其传递给测试：

```
class TestClass:
    def test_something(self, user):
        pass 
```

然后，使用 autouse 固定装置收集有关它的信息：

```
@pytest.fixture(autouse=True)
def set_driver(self, request):
    print request.param 
```

这会引发一个错误，说没有`param`in `FixtureRequest`。

有没有办法可以取回该参数？我试图让 Selenium 在测试失败时截取屏幕截图，但是因为带有参数的测试具有相同的名称和类名等等，它正在为第一次执行编写一个文件，然后在第二次、第三次、... ，时间。所以我想将参数添加到文件名中以避免这种情况。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T09:23:24.400

实际上，`request.param`仅在定义了参数化的夹具功能中可用。如果你需要`user`在`set_driver`夹具中，你可以试试这个：

```
import pytest

@pytest.fixture(params=[True, False])
def user(request):
    return request.param

class TestHello:
    @pytest.fixture(autouse=True)
    def set_driver(self, user):
        print "set_driver sees", user

    def test_method(self):
        assert 0 
```

如果您只想在实际参与测试时做某事，那么您可以执行以下操作`set_driver`：`user`

```
import pytest

@pytest.fixture(params=[True, False], scope="module")
def user(request):
    return request.param

@pytest.fixture(autouse=True)
def set_driver(request):
    if "user" in request.fixturenames:
        user = request.getfuncargvalue("user")
        print "set_driver sees", user

def test_function(user):
    assert 0

def test_function_nouser():
    assert 0 
```

# android - 如何让应用响应特定事件（按钮）

> ID：13501762
> 
> 赞同：0
> 
> 时间：2012-11-21T20:41:28.183
> 
> 标签：android, onclicklistener

我正在尝试通过（逐个）复制（并稍微修改）Android 2.1 sdk 中的特定代码示例来开始编写 android 2.1 / Java 应用程序：C:\Program Files\Java\android-2.1_r03-windows \samples\android-7\ApiDemos\src\com\example\android\apis\view\RadioGroup1.java

可以选择单选按钮，从而取消选择组中的其他单选按钮。到现在为止还挺好。但与原始程序不同的是，单击 Clear ('C') 不会执行任何操作，并且“选定的”TextView 不会显示选定的 id。显示初始文本“您已选择：（无）”（修改为“C:-”），单击其中一个单选按钮后不会更新）。

谁能告诉我出了什么问题/在哪里继续？

我还在过程中修改/部分复制/添加了几个.xml文件：AndroidManifest.xml、layout/activity_main.xml、values/drawables.xml、values/ids.xml、values/strings.xml、values/styles.xml、 drawable/filled_box.xml （并在可绘制目录中添加了一些 .png 文件）。android-support-v4.jar 位于项目的 lib 目录中以实现向后兼容性（目标 15，最低 7）。

这是 RadioGroup1.java：

```
package nl.computerhuys.simplescore;

import nl.computerhuys.simplescore.R;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.TextView;
import android.widget.RadioGroup;
import android.widget.Button;
import android.widget.RadioButton;
import android.widget.LinearLayout;

public class RadioGroup1 extends Activity implements RadioGroup.OnCheckedChangeListener,
        View.OnClickListener {

    private TextView mChoice;
    private RadioGroup mRadioGroup;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);
        mRadioGroup = (RadioGroup) findViewById(R.id.menu);

        // test adding a radio button programmatically
        RadioButton newRadioButton = new RadioButton(this);
        newRadioButton.setText(R.string.radio_group_s1);
        newRadioButton.setId(R.id.s1);
        LinearLayout.LayoutParams layoutParams = new RadioGroup.LayoutParams(
                RadioGroup.LayoutParams.WRAP_CONTENT,
                RadioGroup.LayoutParams.WRAP_CONTENT);
        mRadioGroup.addView(newRadioButton, 0, layoutParams);

        // test listening to checked change events
        String selection = getString(R.string.radio_group_selection);
        mRadioGroup.setOnCheckedChangeListener(this);
        mChoice = (TextView) findViewById(R.id.choice);
        mChoice.setText(selection + mRadioGroup.getCheckedRadioButtonId());

        // test clearing the selection
        Button clearButton = (Button) findViewById(R.id.clear);
        clearButton.setOnClickListener(this);
    }

    public void onCheckedChanged(RadioGroup group, int checkedId) {
        String selection = getString(R.string.radio_group_selection);
        String none = getString(R.string.radio_group_none);
        mChoice.setText(selection +
                (checkedId == View.NO_ID ? none : checkedId));
    }

    public void onClick(View v) {
        mRadioGroup.clearCheck();
    }
} 
```

这是 MainActivity.java：

```
package nl.computerhuys.simplescore;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

这是activity_main.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:android1="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android1:background="@drawable/screen_background_black"
    tools:context=".MainActivity" >

    <RadioGroup
        android:id="@+id/menu"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:checkedButton="@+id/s1"
        android:orientation="horizontal" >

        <RadioButton
            android:id="@+id/s1"
            android:text="@string/radio_group_1_s1" />

        <RadioButton
            android:id="@+id/s2"
            android:text="@string/radio_group_1_s2" />

        <RadioButton
            android:id="@+id/s3"
            android:text="@string/radio_group_1_s3" />

        <TextView
            android:id="@+id/choice"
            android:text="@string/radio_group_1_selection" />

        <Button
            android1:id="@+id/clear"
            android1:layout_width="wrap_content"
            android1:layout_height="wrap_content"
            android1:text="@string/radio_group_1_clear" />

    </RadioGroup>

</RelativeLayout> 
```

和 AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="nl.computerhuys.simplescore"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <uses-library android:name="nl.computerhuys.mylibrary" android:required="false" />

        <activity
            android:name="nl.computerhuys.simplescore.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

      <activity android:name="view.RadioGroup1" android:label="Views/Radio Group" android:exported="false">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.SAMPLE_CODE" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

修改后的 logCat 文件（除了编辑原始帖子之外，无法找到如何发布该文件：（

```
09-16 16:18:01.377: D/AndroidRuntime(1476): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
09-16 16:18:01.377: D/AndroidRuntime(1476): CheckJNI is ON
09-16 16:18:01.884: D/AndroidRuntime(1476): --- registering native functions ---
09-16 16:18:02.714: D/ddm-heap(1476): Got feature list request
09-16 16:18:03.804: D/PackageParser(412): Scanning package: /data/app/vmdl47668.tmp
09-16 16:18:04.514: I/PackageManager(412): Removing non-system package:nl.computerhuys.simplescore
09-16 16:18:04.524: D/PackageManager(412): Removing package nl.computerhuys.simplescore
09-16 16:18:04.534: D/PackageManager(412):   Activities: nl.computerhuys.simplescore.MainActivity
09-16 16:18:04.784: D/PackageManager(412): Scanning package nl.computerhuys.simplescore
09-16 16:18:04.795: I/PackageManager(412): /data/app/vmdl47668.tmp changed; unpacking
09-16 16:18:04.826: D/installd(31): DexInv: --- BEGIN '/data/app/vmdl47668.tmp' ---
09-16 16:18:07.805: D/dalvikvm(1482): DexOpt: load 365ms, verify 1635ms, opt 71ms
09-16 16:18:08.005: D/installd(31): DexInv: --- END '/data/app/vmdl47668.tmp' (success) ---
09-16 16:18:08.005: D/PackageManager(412):   Activities: nl.computerhuys.simplescore.MainActivity
09-16 16:18:08.025: D/ActivityManager(412): Uninstalling process nl.computerhuys.simplescore
09-16 16:18:08.035: D/ActivityManager(412): Force removing process ProcessRecord{44f15ef0 1468:nl.computerhuys.simplescore/10028} (nl.computerhuys.simplescore/10028)
09-16 16:18:08.055: I/Process(412): Sending signal. PID: 1468 SIG: 9
09-16 16:18:08.195: I/UsageStats(412): Unexpected resume of com.android.launcher while already resumed in nl.computerhuys.simplescore
09-16 16:18:08.295: I/WindowManager(412): WIN DEATH: Window{44d60a30 nl.computerhuys.simplescore/nl.computerhuys.simplescore.MainActivity paused=false}
09-16 16:18:08.435: D/ActivityManager(412): Received spurious death notification for thread android.os.BinderProxy@44d89e10
09-16 16:18:08.795: W/InputManagerService(412): Got RemoteException sending setActive(false) notification to pid 1468 uid 10028
09-16 16:18:09.787: I/installd(31): move /data/dalvik-cache/data@app@vmdl47668.tmp@classes.dex -> /data/dalvik-cache/data@app@nl.computerhuys.simplescore.apk@classes.dex
09-16 16:18:09.825: D/PackageManager(412): New package installed in /data/app/nl.computerhuys.simplescore.apk
09-16 16:18:10.075: D/AndroidRuntime(1476): Shutting down VM
09-16 16:18:10.085: D/dalvikvm(1476): DestroyJavaVM waiting for non-daemon threads to exit
09-16 16:18:10.104: D/dalvikvm(1476): DestroyJavaVM shutting VM down
09-16 16:18:10.104: D/dalvikvm(1476): HeapWorker thread shutting down
09-16 16:18:10.104: D/dalvikvm(1476): HeapWorker thread has shut down
09-16 16:18:10.104: D/jdwp(1476): JDWP shutting down net...
09-16 16:18:10.115: I/dalvikvm(1476): Debugger has detached; object registry had 1 entries
09-16 16:18:10.128: D/dalvikvm(1476): VM cleaning up
09-16 16:18:10.155: E/AndroidRuntime(1476): ERROR: thread attach failed
09-16 16:18:10.187: D/ActivityManager(412): Uninstalling process nl.computerhuys.simplescore
09-16 16:18:10.225: D/dalvikvm(1476): LinearAlloc 0x0 used 623916 of 5242880 (11%)
09-16 16:18:11.376: D/dalvikvm(412): GC freed 9687 objects / 641216 bytes in 666ms
09-16 16:18:11.414: W/ResourceType(412): Resources don't contain package for resource number 0x7f0700e5
09-16 16:18:11.425: W/ResourceType(412): Resources don't contain package for resource number 0x7f020031
09-16 16:18:11.425: W/ResourceType(412): Resources don't contain package for resource number 0x7f020030
09-16 16:18:11.425: W/ResourceType(412): Resources don't contain package for resource number 0x7f050000
09-16 16:18:11.725: W/ResourceType(412): Resources don't contain package for resource number 0x7f060000
09-16 16:18:11.745: W/ResourceType(412): Resources don't contain package for resource number 0x7f060001
09-16 16:18:12.217: D/dalvikvm(458): GC freed 149 objects / 5952 bytes in 756ms
09-16 16:18:12.276: W/ResourceType(412): Resources don't contain package for resource number 0x7f0700e5
09-16 16:18:12.276: W/ResourceType(412): Resources don't contain package for resource number 0x7f020031
09-16 16:18:12.276: W/ResourceType(412): Resources don't contain package for resource number 0x7f020030
09-16 16:18:12.276: W/ResourceType(412): Resources don't contain package for resource number 0x7f050000
09-16 16:18:12.475: W/ResourceType(412): Resources don't contain package for resource number 0x7f060000
09-16 16:18:12.485: W/ResourceType(412): Resources don't contain package for resource number 0x7f060001
09-16 16:18:12.894: D/AndroidRuntime(1487): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
09-16 16:18:12.904: D/AndroidRuntime(1487): CheckJNI is ON
09-16 16:18:14.004: D/AndroidRuntime(1487): --- registering native functions ---
09-16 16:18:14.924: D/ddm-heap(1487): Got feature list request
09-16 16:18:15.854: I/ActivityManager(412): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=nl.computerhuys.simplescore/.MainActivity }
09-16 16:18:15.944: D/AndroidRuntime(1487): Shutting down VM
09-16 16:18:15.944: D/dalvikvm(1487): DestroyJavaVM waiting for non-daemon threads to exit
09-16 16:18:15.954: D/dalvikvm(1487): DestroyJavaVM shutting VM down
09-16 16:18:15.964: D/dalvikvm(1487): HeapWorker thread shutting down
09-16 16:18:15.964: D/dalvikvm(1487): HeapWorker thread has shut down
09-16 16:18:15.964: D/jdwp(1487): JDWP shutting down net...
09-16 16:18:15.964: I/dalvikvm(1487): Debugger has detached; object registry had 1 entries
09-16 16:18:15.974: D/dalvikvm(1487): VM cleaning up
09-16 16:18:16.044: E/AndroidRuntime(1487): ERROR: thread attach failed
09-16 16:18:16.134: D/dalvikvm(1487): LinearAlloc 0x0 used 639500 of 5242880 (12%)
09-16 16:18:16.644: I/ActivityManager(412): Start proc nl.computerhuys.simplescore for activity nl.computerhuys.simplescore/.MainActivity: pid=1494 uid=10028 gids={}
09-16 16:18:17.224: D/ddm-heap(1494): Got feature list request
09-16 16:18:18.604: I/ActivityManager(412): Displayed activity nl.computerhuys.simplescore/.MainActivity: 2599 ms (total 2599 ms)
09-16 16:18:23.915: D/dalvikvm(458): GC freed 2339 objects / 135960 bytes in 262ms
09-16 16:18:29.025: D/dalvikvm(568): GC freed 43 objects / 2016 bytes in 307ms 
```

修改后的MainActivity.java：

```
 package nl.computerhuys.simplescore;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.RadioButton;
import android.widget.RadioGroup;
import android.widget.TextView;

import nl.computerhuys.simplescore.R;

public class MainActivity extends Activity implements RadioGroup.OnCheckedChangeListener,
View.OnClickListener {

    private TextView mChoice;
    private RadioGroup mRadioGroup;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);
        mRadioGroup = (RadioGroup) findViewById(R.id.menu);

        // test adding a radio button programmatically
        RadioButton newRadioButton = new RadioButton(this);
        newRadioButton.setText(R.string.radio_group_s1);
        newRadioButton.setId(R.id.s1);
        LinearLayout.LayoutParams layoutParams = new RadioGroup.LayoutParams(
                RadioGroup.LayoutParams.WRAP_CONTENT,
                RadioGroup.LayoutParams.WRAP_CONTENT);
        mRadioGroup.addView(newRadioButton, 0, layoutParams);

        // test listening to checked change events
        String selection = getString(R.string.radio_group_selection);
        mRadioGroup.setOnCheckedChangeListener(this);
        mChoice = (TextView) findViewById(R.id.choice);
        mChoice.setText(selection + mRadioGroup.getCheckedRadioButtonId());

        // test clearing the selection
        Button clearButton = (Button) findViewById(R.id.clear);
        clearButton.setOnClickListener(this);
    }

    public void onCheckedChanged(RadioGroup group, int checkedId) {
        String selection = getString(R.string.radio_group_selection);
        String none = getString(R.string.radio_group_none);
        mChoice.setText(selection +
                (checkedId == View.NO_ID ? none : checkedId));
    }

    public void onClick(View v) {
        mRadioGroup.clearCheck();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

修改后的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="nl.computerhuys.simplescore" android:versionCode="1"
    android:versionName="1.0">

    <uses-sdk android:minSdkVersion="7"
        android:targetSdkVersion="16" />

    <application android:allowBackup="true" android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" android:theme="@style/AppTheme">

        <activity android:name="nl.computerhuys.simplescore.MainActivity"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

     </application>

</manifest> 
```

修改后的activity_main.xml：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/screen_background_black" >

    <RadioGroup
        android:id="@+id/menu"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <RadioButton
            android:id="@+id/s1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/radio_group_1_s1" />

        <RadioButton
            android:id="@+id/s2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/radio_group_1_s2" />

        <RadioButton
            android:id="@+id/s3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/radio_group_1_s3" />

        <TextView
            android:id="@+id/choice"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/radio_group_1_selection" />
    </RadioGroup>

    <Button
        android:id="@+id/clear"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/menu"
        android:text="@string/radio_group_1_clear" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:50:34.367

你只是在运行`MainActivity`，而不是`RadioGroup1`.

任何一个：

*   `RadioGroup1`通过将所有一个代码剪切并粘贴到`MainActivity`.
*   或者保留两个活动`startActivity(new Intent(this, RadioGroup1.class));`并`MainAcitivity`调用`onCreate()`

如果您保留这两个活动，则必须调整您的清单。这不太对：

```
 <activity android:name="view.RadioGroup1" android:label="Views/Radio Group" android:exported="false">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.SAMPLE_CODE" />
        </intent-filter>
  </activity> 
```

名称不正确，我相信您只能将一个 Activity 设置为`MAIN`：

```
<activity android:name=".RadioGroup1" android:label="Views/Radio Group" android:exported="false" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:51:55.197

从清单中删除使用库。

将不是 RadioButton 的所有内容移出 ButtonGroup。将它们放在您的组下方并添加 xml 语句以将它们放在 RadioGroup 下方的相对布局（根级别）中。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/screen_background_black" >

      <RadioGroup
        android:id="@+id/menu"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:checkedButton="@+id/s1"
        android:orientation="horizontal" >

        <RadioButton
            android:id="@+id/s1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/radio_group_1_s1" />

        <RadioButton
            android:id="@+id/s2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
                android:text="@string/radio_group_1_s2" />

        <RadioButton
            android:id="@+id/s3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/radio_group_1_s3" />
        </RadioGroup>

        <TextView
              android:id="@+id/choice"
              android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_below="@id/menu"
              android:text="@string/radio_group_1_selection" />

         <Button
              android:id="@+id/clear"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_below="@id/choice"
          android:text="@string/radio_group_1_clear" />
</RelativeLayout> 
```

您的布局文件中有几个错误：

*   android1 前缀无用且令人困惑
*   单选组应该只包含单选按钮
*   每个视图必须同时具有 android:layout_width 和 android:layout_height 属性
*   工具命名空间和工具：上下文是无用的
*   请配置您的 IDE 以不使用制表符而是使用空格。***修改缩进非常痛苦。

此外，您的清单中还有一个问题：您必须仅使用意图过滤器声明一个活动来捕获启动器意图。那是您的程序入口点，实际上您声明了两个...

暂时将这两项活动合二为一。不要以编程方式创建新的小部件，首先使用 findViewById 获取您在布局中声明的小部件。此外，您创建的视图的 id 与清单中的一个视图冲突。

如果您决定稍后声明更多活动，请仔细检查您是否在清单中使用了它们的完全限定名称，您在 RadioGroup1 活动声明声明中关于该问题的错误。

# jpa - 如何使用来自 JPA 的数据填充 JCombobox

> ID：13501769
> 
> 赞同：0
> 
> 时间：2012-11-21T20:41:49.737
> 
> 标签：jpa, jcombobox

如何使用我的 jpa 列表中的数据填充 Jcombobox？急需帮助

 `public static MyNames myNames() { EntityManagerFactory emf = Persistence.createEntityManagerFactory("JavaTrialsPU"); EntityManager em = emf.createEntityManager(); em.getTransaction().begin(); Query q = em.createNamedQuery("MyNames.findAll"); MyNames n = (MyNames) q.getResultList(); return n; }`

 ````
public static void myCombo() {        
    comboBox = new JComboBox(????--how can i make the jcombobox display my myNames() list--?????);
    frame.add(comboBox, BorderLayout.PAGE_START);
} 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:06:01.200

你可以使用 jcombox 方法

```
comboBox.addItems(); 
````

# apache - 将 ssl 证书从一个 apache 服务器移动到另一个，但是站点不适用于 www

> ID：13501770
> 
> 赞同：2
> 
> 时间：2012-11-21T20:41:57.117
> 
> 标签：apache, openssl, ssl-certificate, virtualhost, ubuntu-10.04

我最近将我的网站从一个 VPS 移动到另一个 VPS。除了 ssl 的一个问题外，一切都做得很好并且工作正常。

我的网站使用 ssl。（使用rapidssl证书）

我按照此处的说明将证书从一台服务器移动到另一台服务器。 [http://www.sslshopper.com/apache-server-ssl-installation-instructions.html](http://www.sslshopper.com/apache-server-ssl-installation-instructions.html)

我面临的问题对我来说很奇怪。在 HTTPS 模式下，我的网站可以正常使用类似 url [http://stackoverflow.com](http://stackoverflow.com)、[https://stackoverflow.com](https://stackoverflow.com)但它不适用于[https://www.stackoverflow.com](https://www.stackoverflow.com)（注意 www）。

这个问题对我来说很奇怪，因为它确实适用于旧服务器。

提前致谢。普拉斯

这是我的虚拟主机

```
<VirtualHost *:80>
ServerAdmin webmaster@@localhost
DocumentRoot /var/www/webroot/
ServerName stackoverflow.com
ServerAlias www.stackoverflow.com
<Directory //var/www/webroot/>
    Options Indexes FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory>
</VirtualHost>

<IfModule mod_ssl.c>
<VirtualHost ***.***.***.***:443>
    ServerAdmin webmaster@localhost
    ServerName stackoverflow.com
    ServerAlias www.stackoverflow.com

    DocumentRoot /var/www/webroot/
    <Directory /var/www/webroot/>
            Options -Indexes
            AllowOverride All
            Order allow,deny
            allow from all
    </Directory>
    SSLEngine on
    SSLCertificateFile    /etc/apache2/ssl/thirdparty.crt
    SSLCertificateKeyFile /etc/apache2/ssl/thirdparty.key
    SSLCACertificateFile  /etc/apache2/ssl/thirdpartyssl.ca
    BrowserMatch "MSIE [2-6]" \
            nokeepalive ssl-unclean-shutdown \
            downgrade-1.0 force-response-1.0
    BrowserMatch "MSIE [17-9]" ssl-unclean-shutdown
</VirtualHost>
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:02:10.153

我找到了解决方案。

首先，有问题的 url 模式也不能在旧服务器上运行。这已得到证书人员的证实。

因此，我决定将所有“https://www.stackoverflow.com”url 请求转发到[https://stackoverflow.com](https://stackoverflow.com)。为此，我添加了一些 .htaccess 规则：

```
RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

RewriteCond %{HTTPS} on
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ https://%1/$1 [R=301,L] 
```

这些规则是通用的，适用于所有网站。

希望这将节省其他人的时间。

# c# - 关闭 Windows 资源管理器的特定实例

> ID：13501771
> 
> 赞同：3
> 
> 时间：2012-11-21T20:42:25.833
> 
> 标签：c#, .net, windows, windows-7, explorer

我在尝试`WM_CLOSE`窗口资源管理器进程时遇到问题，因为发送该消息将尝试关闭 Windows Shell 资源管理器进程并提示用户关闭窗口。这不是预期的行为，我想知道如何解决它？

如何优雅地关闭单个资源管理器窗口，而不同时关闭整个 PC？目标是具有与用户自己单击 X 按钮相同的行为。

编辑：我发现我能够获取资源管理器进程的所有子窗口，但从那时起，我不确定如何识别哪些窗口是实际的、用户可见/可交互的资源管理器窗口。

```
11/21/2012 16:27:49 [12]  DEBUG - Closing process with PID: 2680
11/21/2012 16:27:49 [12]  DEBUG - Window has 11 descendant windows
11/21/2012 16:27:49 [12]  DEBUG - Found child window:  hWnd: 590746 Window State: Normal
11/21/2012 16:27:49 [12]  DEBUG - Found child window: 4:27 PM hWnd: 656010 Window State: Normal
11/21/2012 16:27:49 [12]  DEBUG - Found child window:  hWnd: 2294392 Window State: Normal
11/21/2012 16:27:49 [12]  DEBUG - Found child window:  hWnd: 1245586 Window State: Normal
11/21/2012 16:27:49 [12]  DEBUG - Found child window: User Promoted Notification Area hWnd: 2949496 Window State: Normal
11/21/2012 16:27:49 [12]  DEBUG - Found child window: System Promoted Notification Area hWnd: 1245548 Window State: Normal
11/21/2012 16:27:49 [12]  DEBUG - Found child window:  hWnd: 852646 Window State: Normal
11/21/2012 16:27:49 [12]  DEBUG - Found child window:  hWnd: 918356 Window State: Normal
11/21/2012 16:27:49 [12]  DEBUG - Found child window: Running applications hWnd: 1769950 Window State: Normal
11/21/2012 16:27:49 [12]  DEBUG - Found child window: Running applications hWnd: 1179980 Window State: Normal
11/21/2012 16:27:49 [12]  DEBUG - Found child window: TF_FloatingLangBar_WndTitle hWnd: 458926 Window State: Normal 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:54:20.550

你怎么弄到窗户的？您可以通过文本获取带有 winapi 调用的句柄，因此桌面资源管理器可能没有标题。[http://msdn.microsoft.com/en-us/library/windows/desktop/ms633499(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633499(v=vs.85).aspx)查看lpWindowName参数。

另外，我只是在这里猜测，您可能会查看桌面资源管理器和其他资源管理器实例之间的关系，以及它们与 GetDesktopWindow() 返回的手柄的关系[http://msdn.microsoft.com/en -us/library/windows/desktop/ms633504(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633504(v=vs.85).aspx)

# php - 如何从具有特殊编码的单词中获取每个字符

> ID：13501772
> 
> 赞同：8
> 
> 时间：2012-11-21T20:42:26.113
> 
> 标签：php, encoding, character-encoding, tokenize

我需要从一个单词中获取一个包含所有字符的数组，但是当我执行以下代码时，该单词具有特殊编码的字母，例如á：

```
$word = 'withá';

$word_arr = array();
for ($i=0;$i<strlen($word);$i++) {
    $word_arr[] = $word[$i];
} 
```

或者

```
$word_arr = str_split($word); 
```

我得到：

> 数组(6) { [0]=> 字符串(1) "w" [1]=> 字符串(1) "i" [2]=> 字符串(1) "t" [3]=> 字符串(1) "h" [4]=> 字符串(1) "Ã" [5]=> 字符串(1) "¡" }

我怎样才能获得每个字符如下？

> 数组(5) { [0]=> 字符串(1) "w" [1]=> 字符串(1) "i" [2]=> 字符串(1) "t" [3]=> 字符串(1) "h" [4]=> 字符串(1) "á" }

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T20:52:45.857

因为它是一个 UTF-8 字符串，所以只做

```
$word = 'withá';
$word = utf8_decode($word);
$word_arr = array();
for ($i=0;$i<strlen($word);$i++) {
    $word_arr[] = $word[$i];
} 
```

这样做的原因是，即使它在您的脚本中看起来正确，解释器也会将其转换为多字节字符（为什么`mb_split()`也可以）。要将其转换为正确的 UTF-8 格式，您可以使用 mb 函数或仅指定`utf8_decode()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T20:46:16.593

~~我认为 mb_split 会为你做的：[http ://www.php.net/manual/en/function.mb-split.php](http://www.php.net/manual/en/function.mb-split.php)~~

如果您使用特殊编码，您可能想了解 PHP 通常如何处理多字节编码...

编辑：不，不知道如何让 mb_split 自己做，但是环顾四周，有一些其他问题得到了 preg_split 的回答。我对此进行了测试，它似乎完全符合您的要求：

```
preg_split('//',$word,-1,PREG_SPLIT_NO_EMPTY); 
```

不过，我仍然强烈建议您阅读 PHP 中的多字节字符。恕我直言，这有点乱。

这里有一些很好的链接： [http](http://www.joelonsoftware.com/articles/Unicode.html) ://www.joelonsoftware.com/articles/Unicode.html 和 [http://akrabat.com/php/utf8-php-and-mysql/](http://akrabat.com/php/utf8-php-and-mysql/) 还有更多可以找到...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:51:00.487

您应该对所有多字节字符集使用多字节函数！我猜 mb_split 是吊坠：

[http://php.net/manual/en/function.mb-split.php](http://php.net/manual/en/function.mb-split.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T20:52:46.553

如发现：[http ://www.php.net/manual/en/function.str-split.php#107658](http://www.php.net/manual/en/function.str-split.php#107658)

```
 function str_split_unicode($str, $l = 0) {
        if ($l > 0) {
            $ret = array();
            $len = mb_strlen($str, "UTF-8");
            for ($i = 0; $i < $len; $i += $l) {
                $ret[] = mb_substr($str, $i, $l, "UTF-8");
            }
            return $ret;
        }
        return preg_split("//u", $str, -1, PREG_SPLIT_NO_EMPTY);
    }

   $word = 'withá';
   $word = str_split_unicode($word);
   var_dump($word); 
```

# c# - 使用 ismouseover 更改对象组的背景颜色

> ID：13501783
> 
> 赞同：0
> 
> 时间：2012-11-21T20:43:02.573
> 
> 标签：c#, wpf, xaml

我对 WPF+C# 真的很陌生，并试图在 msdn 和 stack 上赶上很多教程。**我目前正在尝试更改ismouseover**上所有对象（同时）的颜色（绘制房子）。我可以一次用一个对象（下面的代码中的触发器）执行此操作，但无法找出同时更改所有颜色的方法，这是我的 xaml 代码，我没有在 xaml.cs 中添加任何内容我猜我需要创建一些 for 循环，但我不明白如何将 xaml 中绘制的对象链接到 xaml.cs 中的代码

```
<Window x:Class="LAB2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="400" Width="600">
<Canvas>

    <Rectangle Canvas.Left="86" Canvas.Top="190" Height="171" Name="body" Stroke="Black" Width="387"/>
    <Rectangle Canvas.Left="118" Canvas.Top="229" Height="82"  Name="window" Stroke="Black" Width="89"/>
    <Rectangle Canvas.Left="346" Canvas.Top="229" Height="132"  Name="door" Stroke="Black" Width="83"/>
    <Polygon Points="10,110 230,10 500,110" Fill="Blue" Stroke="Black" Name="triangle" Canvas.Left="35" Canvas.Top="86" />
    <Rectangle Canvas.Left="156" Canvas.Top="109" Height="61" Name="chimney" Stroke="Black" Width="36">
        <Rectangle.Style>
            <Style TargetType="{x:Type Rectangle}">
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Fill" Value="Red" />
                    </Trigger>
                    <Trigger Property="IsMouseOver" Value="False">
                        <Setter Property="Fill" Value="Blue" />
                    </Trigger>
                </Style.Triggers>
            </Style>
        </Rectangle.Style>
    </Rectangle>
</Canvas>
<Window.Resources>

</Window.Resources> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T22:35:19.630

您需要将触发器移得更高......因为您只能在 ControlTemplate 或 Style 中使用触发器，所以我的解决方案有点棘手。

```
 <Control>
        <Control.Template>
            <ControlTemplate>
                <Canvas>
                    <Rectangle Canvas.Left="86" Canvas.Top="190" Height="171" Fill="Blue" Name="body" Stroke="Black" Width="387"/>
                    <Rectangle Canvas.Left="118" Canvas.Top="229" Height="82" Fill="Blue"  Name="window" Stroke="Black" Width="89"/>
                    <Rectangle Canvas.Left="346" Canvas.Top="229" Fill="Blue" Height="132"  Name="door" Stroke="Black" Width="83"/>
                    <Polygon Points="10,110 230,10 500,110" Fill="Blue" Stroke="Black" Name="triangle" Canvas.Left="35" Canvas.Top="86" />
                    <Rectangle Canvas.Left="156" Canvas.Top="109" Height="61" Fill="Blue" Name="chimney" Stroke="Black" Width="36">
                    </Rectangle>
                </Canvas>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="body" Property="Fill" Value="Red" />
                        <Setter TargetName="window" Property="Fill" Value="Red" />
                        <Setter TargetName="door" Property="Fill" Value="Red" />
                        <Setter TargetName="triangle" Property="Fill" Value="Red" />
                    </Trigger>
                    <!--<Trigger Property="IsMouseOver" Value="False">
                        <Setter TargetName="body" Property="Fill" Value="Green" />
                        <Setter TargetName="window" Property="Fill" Value="Green" />
                        <Setter TargetName="door" Property="Fill" Value="Green" />
                        <Setter TargetName="triangle" Property="Fill" Value="Green" />
                    </Trigger>-->
                </ControlTemplate.Triggers>     
            </ControlTemplate>
        </Control.Template>
    </Control> 
```

当您不在 Canvas 中设置 Background 属性时，您会获得更好的行为，因为 canvas 将忽略 IsMouseOver 并且 Trigger 仅在您将光标移动到 Canvas 中的对象之一上时才会起作用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T21:25:18.283

您可以删除样式触发器，并将方法附加到 .xaml.cs 文件中的`MouseEnter`和`MouseLeave`事件：

```
 private void body_MouseEnter(object sender, MouseEventArgs e)
    {
        foreach(var c in canvas.Children)
        {
            if(c is Shape) (c as Shape).Fill = Brushes.Red;
        }
    }

    private void body_MouseLeave(object sender, MouseEventArgs e)
    {
        foreach (var c in canvas.Children)
        {
            if (c is Shape) (c as Shape).Fill = Brushes.Blue;
        }
    } 
```

这似乎是蛮力方法，但它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T07:28:47.010

此外，您可以为 Shape 定义基本样式，然后为 Polygon 和 rectangle 派生它。

```
 <Window.Resources>
    <Style x:Key="ShapeMouseOverStyle" TargetType="{x:Type Shape}">
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Fill" Value="Red" />
            </Trigger>
            <Trigger Property="IsMouseOver" Value="False">
                <Setter Property="Fill" Value="Blue" />
            </Trigger>
        </Style.Triggers>
    </Style>
    <Style TargetType="{x:Type Rectangle}" BasedOn="{StaticResource ShapeMouseOverStyle}"/>
    <Style TargetType="{x:Type Polygon}" BasedOn="{StaticResource ShapeMouseOverStyle}"/>
</Window.Resources>

<Grid>
    <Canvas>
        <Rectangle Canvas.Left="86" Canvas.Top="190" Height="171" Name="body" Stroke="Black" Width="387"/>
        <Rectangle Canvas.Left="118" Canvas.Top="229" Height="82"  Name="window" Stroke="Black" Width="89"/>
        <Rectangle Canvas.Left="346" Canvas.Top="229" Height="132"  Name="door" Stroke="Black" Width="83"/>
        <Polygon Points="10,110 230,10 500,110" Fill="Blue" Stroke="Black" Name="triangle" Canvas.Left="35" Canvas.Top="86" />
        <Rectangle Canvas.Left="156" Canvas.Top="109" Height="61" Name="chimney" Stroke="Black" Width="36"/>
    </Canvas>

</Grid> 
```

干杯...

# javascript - 简单的图书搜索应用程序：如何在第二次搜索时替换搜索结果？

> ID：13501791
> 
> 赞同：0
> 
> 时间：2012-11-21T20:43:37.207
> 
> 标签：javascript, json, api

我有一个简单的应用程序，可以搜索 Google Books API 并返回公共领域书籍的列表。然后用户可以打开免费书籍并阅读它。

问题是，如果您搜索不止一次，它会将下一个搜索结果附加到页面上。

有没有办法让第二次搜索的结果“替换”第一个结果？

小提琴：http: [//jsbin.com/welcome/52020](http://jsbin.com/welcome/52020)

```
 <form name="inputForm"
                  onsubmit="beginSearch(this.query.value); return false;"
                  method="get">
                <input type="text" size="30" name="query" value="Romeo and Juliet" id="textfield"/>
                <input type="submit">
        </form>

        <div id="lister">
        </div>

//for list
function beginSearch(query) {

    var script = document.createElement("script");

    script.src = 'https://www.googleapis.com/books/v1/volumes?q='
            + encodeURIComponent(query) + '&filter=free-ebooks'
            + '&callback=handleResultsList';
    script.type = "text/javascript";
    document.getElementsByTagName("head")[0].appendChild(script);
}

//structure results
    function handleResultsList(response) {

    for (var i = 0; i < response.items.length; i++) {
        var item = response.items[i];
        var title = item.volumeInfo.title;
        var thumb = item.volumeInfo.imageLinks.thumbnail;
        link = item.accessInfo.webReaderLink + '&amp;output=embed'; // cache value
        var img = $("<img/>").attr("src", thumb);
        var booklink = "booklink";
        var bookframe = "bookframe";

            $("<a/>").attr({class: booklink, href: link, title: title}).append(img).appendTo("#lister");

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:49:07.233

由于您使用的是 jQuery，它应该像这样简单：

```
 //structure results
    function handleResultsList(response) {

    $('#lister').find('a').remove(); // Remove all existing links before adding new

    for (var i = 0; i < response.items.length; i++) {
        var item = response.items[i];
        var title = item.volumeInfo.title;
        var thumb = item.volumeInfo.imageLinks.thumbnail;
        link = item.accessInfo.webReaderLink + '&amp;output=embed'; // cache value
        var img = $("<img/>").attr("src", thumb);
        var booklink = "booklink";
        var bookframe = "bookframe";

            $("<a/>").attr({class: booklink, href: link, title: title}).append(img).appendTo("#lister");

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:50:15.813

将 onsubmit 更改为

```
$("#lister").html(""); beginSearch(this.query.value); return false; 
```

# java - 如何在发送到 servlet 之前操作变量

> ID：13501795
> 
> 赞同：0
> 
> 时间：2012-11-21T20:43:54.670
> 
> 标签：java, html, jsp, jakarta-ee, servlets

我有一个 JSP 页面，其中包含一个包含在表单中的文本框。此表单的操作设置为 servlet。

我想在将字符串发送到 servlet 之前对字符串（来自用户在文本框中的输入）进行操作，从而基本上执行`request.setParameter`从 JSP 到 servlet 的简单调用。这可以做到吗？如果是这样，我怎样才能在 JSP 中获取文本框的值？

```
<form action="MyServlet" method="post">
            <input type="text" name="txtUsername"/><br/>
            <input type="submit" value="Submit"/>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:46:21.167

您不能使用 JSP 代码执行此操作。请记住，处理一个 JSP，将其内容输出到浏览器；这就是 JSP 的请求/响应周期结束的地方。

您的选择是：

1.  使用 JavaScript。
2.  使用过滤器： http: [//docs.oracle.com/javaee/5/api/javax/servlet/Filter.html](http://docs.oracle.com/javaee/5/api/javax/servlet/Filter.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:47:40.480

`submit`在下面调用 Javascript 函数：

```
 function fnSubmit(){
     document.getElementById("txtUsername").value = "new Value";
     document.forms[0].submit();
  } 
```

# c# - 是否可以在网站中使用使用 IKVM 编译的 Gephi？

> ID：13501798
> 
> 赞同：4
> 
> 时间：2012-11-21T20:44:15.467
> 
> 标签：c#, java, ikvm, gephi

我目前正在尝试从 .Net 4 C# 网站中加载和使用[Gephi 工具包。](https://wiki.gephi.org/index.php/Toolkit_portal)

我有一个针对 IKVM 虚拟机编译的工具包 jar 文件版本，它使用以下代码在命令行应用程序中按预期工作：

```
var controller = (ProjectController)Lookup.getDefault().lookup(typeof(ProjectController));
controller.closeCurrentProject();
controller.newProject();
var project = controller.getCurrentProject();
var workspace = controller.getCurrentWorkspace(); 
```

这三个实例以类似于 的形式正确实例化`org.gephi.project.impl.ProjectControllerImpl@8ddb93`。

但是，如果我使用完全相同的 using 语句和引用运行完全相同的代码，则加载`ProjectController`实例的第一行将返回 null。

我尝试了几个解决方案

首先，我尝试忽略 Lookup.getDefault().lookup(type) 调用，而是尝试创建自己的实例：

```
var controller = new ProjectControllerImpl();
controller.closeCurrentProject();
controller.newProject();
var project = controller.getCurrentProject();
var workspace = controller.getCurrentWorkspace(); 
```

这在 controller.newProject(); 行失败，我认为是因为在内部（使用反射器）在构造函数中使用了相同的 Lookup.getDefault().lookup(type)，返回 null 然后引发异常。

其次，从这里开始：[在 Jython（和 Gephi）中查找](https://stackoverflow.com/questions/5954852/lookup-in-jython-and-gephi)我尝试将 %CLASSPATH% 设置为工具包 JAR 和 DLL 文件的位置。

Lookup.getDefault().lookup(type) 在 Web 环境中不起作用是否有原因？我不是 Java 开发人员，所以我对这方面的 Java 有点不了解。

我原以为可以自己创建所有实例，但一直找不到这样做的方法。

我也找不到查看为什么 ProjectController 加载返回 null 的方法。不会抛出异常，除非我非常愚蠢，否则似乎没有一种方法可以查看尝试加载的结果。

**更新 - 答案**

根据 Jeroen Frijters 的回答，我解决了这样的问题：

```
public class Global : System.Web.HttpApplication
{
    public Global()
    {
        var assembly = Assembly.LoadFrom(Path.Combine(root, "gephi-toolkit.dll"));
        var acl = new AssemblyClassLoader(assembly);
        java.lang.Thread.currentThread().setContextClassLoader(new MySystemClassLoader(acl));
    }
}

internal class MySystemClassLoader : ClassLoader
{
    public MySystemClassLoader(ClassLoader parent)
        : base(new AppDomainAssemblyClassLoader(typeof(MySystemClassLoader).Assembly))
    { }
} 
```

该代码`ikvm.runtime.Startup.addBootClassPathAssemby()`似乎对我不起作用，但从提供的链接中，我能够找到似乎在所有情况下都有效的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:44:14.617

这是一个 Java 类加载器问题。在命令行应用程序中，您的主要可执行文件充当系统类加载器并知道如何加载程序集依赖项，但在 Web 进程中没有主要可执行文件，因此系统类加载器不知道如何加载任何有用的东西。

One of the solutions is to call ikvm.runtime.Startup.addBootClassPathAssemby() to add the relevant assemblies to the boot class loader.

For more on IKVM class loading issues see [http://sourceforge.net/apps/mediawiki/ikvm/index.php?title=ClassLoader](http://sourceforge.net/apps/mediawiki/ikvm/index.php?title=ClassLoader)

# java - 有没有办法在Java中将方法声明为新线程

> ID：13501802
> 
> 赞同：3
> 
> 时间：2012-11-21T20:44:37.933
> 
> 标签：java, multithreading, countdownlatch

我有一个正在监听随机数的程序。它连接到一个发布者，它给了我一个数字和一个新的计数，每次我得到更新时，我都会将该数字的当前计数存储在 HashMap 中。

我还有一个监听请求的 SSL 服务器。当一个请求询问“我们有多少个 7”时，我只返回我的 HashMap 中的值。

现在我想添加一个逻辑，如果我们有 0 次出现该数字，请等到我们得到 1 次，然后返回该点的计数。但是，由于 Thread 的 run 方法的限制，我正在挣扎，它必须是一个 void。我想知道是否有任何方法可以将我的方法声明为始终启动新线程的方法，或者可能是比我正在做的更好的处理方法。这是我所拥有的：

```
private static volatile HashMap<Integer, Integer> occurenceMap= new HashMap<Integer, Integer>();

public synchronized static int getNumOccurrences(final Integer number) {

    try { 
    (new Thread() {

        public void run() {

            Integer occurrences = occurenceMap.get(number); 
            if ( occurrences != null && occurrences > 0 ) {
              // here I would like to just return occurences;
            } else {
                CountDownLatch latch = new CountDownLatch(1); 
                pendingList.put(number, latch);
                latch.await();  
                // elsewhere in the code, I call countdown when I get a hit
                pendingList.remove(number);

                // once we've counted down, I would like to return the value
             }
           }
       }).start();
   } catch ( Throwable t ) { }
} 
```

但是，我不能将 return 语句放在 run 方法中。那么如何做到最好呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:46:46.947

你需要某种外部结构来存储数字，像这样

```
// declared outside your runnable
final AtomicInteger result = new AtomicInteger(0);

// in your run method
// return value; // doesn't work, can't return
result.set(value); 
```

所以把它添加到你的，你得到这个

请注意，我的评论以`// C:`

```
private static volatile HashMap<Integer, Integer> occurenceMap= new HashMap<Integer, Integer>();

    public synchronized static int getNumOccurrences(final Integer number) {
        // C: here's a container to use inside the runnable
        // C: must be final to use inside the runnable below
        final AtomicInteger result = new AtomicInteger(0);
        try { 
        // C: keep a rerefence to the thread we create
        Thread thread = new Thread() {

            public void run() {

                Integer occurrences = occurenceMap.get(number); 
                if ( occurrences != null && occurrences > 0 ) {
                    result.set(occurences); // C: we found what we're looking for
                    return; // C: so get out of the run method
                } else {
                    CountDownLatch latch = new CountDownLatch(1); 
                    pendingList.put(number, latch);
                    latch.await();  
                    // elsewhere in the code, I call countdown when I get a hit
                    pendingList.remove(number);

                    // once we've counted down, I would like to return the value
                    result.set(1); // C: I'm not sure what you want to return here
                    return; // C: but I'm sure you can figure that out...
                 }
               }
           });
           thread.start(); // C: now start the thread
           thread.join(); // C: join the thread, waiting for it to finish
       } catch ( Throwable t ) { }
       return result.get(); // C: now return the int from the container
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T21:25:37.487

`Thread`从执行中产生值的另一种方法是使用`Executors`允许您提交的线程池`Callable`：

```
// create a thread pool with 10 workers
ExecutorService threadPool = Executors.newFixedThreadPool(10);
List<Future<Integer>> futures = new ArrayList<Future<Integer>>();
for (Job job : jobsToDo) {
    futures.add(threadPool.submit(new Callable<Integer>() {
       public Integer call() {
          ...
       }
     }));
}
// after submitting the jobs, you need to shutdown the queue
threadPool.shutdown();
// then you can get the results
for (Future<Integer> future : futures) {
    // this will throw if your call method throws
    int value = future.get();
} 
```

# iphone - iPhone - 在应用程序启动期间，应用程序进入后台

> ID：13501805
> 
> 赞同：1
> 
> 时间：2012-11-21T20:44:56.763
> 
> 标签：iphone, ios, xcode, ios6, iphone-4

最近我遇到了一个问题，我的应用程序在初始启动时进入后台，但这仅发生在带有 iOS6 的 iPhone 4S 上。我已经测试过：

*   模拟器，具有不同的硬件/软件配置
*   iPhone 5 (iOS 6)
*   iPhone 4S (iOS 5.1)
*   iPad2 (iOS 6)

它对所有这些都有效，但在带有 iOS6 的 iPhone 4S 上，应用程序的启动大约需要 20 秒才能进入后台，如果你在几秒钟后“重新启动”应用程序，你会看到它仍在运行并且工作没有任何问题。

iPhone4S（iOS6）是否有任何已知问题导致此问题或此型号有什么特别之处？[我已经在不同的 iPhone4s (iOS6) 上对其进行了测试，并且所有这些都发生了]

**编辑**

我注意到一些奇怪的东西会做更多的测试，iPhone 4s（iOS6）是唯一不显示加载屏幕（第一个视图控制器）的，它只显示启动图像..无论如何，这是 AppDelegate 的代码和第一个视图控制器：

**AppDelegate.m**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    // Optional: automatically track uncaught exceptions with Google Analytics.
    [GAI sharedInstance].trackUncaughtExceptions = YES;
    // Optional: set Google Analytics dispatch interval to e.g. 20 seconds.
    [GAI sharedInstance].dispatchInterval = 20;
    // Optional: set debug to YES for extra debugging information.
    [GAI sharedInstance].debug = NO;
    // Create tracker instance.
    __unused id<GAITracker> tracker = [[GAI sharedInstance] trackerWithTrackingId:@"UA-APP-ID"];
   return YES;
} 
```

**EcraPrincipalViewController.m**

```
#import "EcraPrincipalViewController.h"
#import "ListaPercursosTableViewController.h"
#import "GlobalVars.h"
#import "AppDelegate.h"

@interface EcraPrincipalViewController ()

@end

@implementation EcraPrincipalViewController
{
    int progresso;
    int sizePercursos;
}

@synthesize lbl_versao;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.trackedViewName = @"iPhone - EcrãPrincipal";
    // Do any additional setup after loading the view.

    NSMutableArray *views = [[NSMutableArray alloc] initWithArray:[self.navigationController viewControllers]];
    UIStoryboard *story = [UIStoryboard storyboardWithName:@"WalkMeStoryBoard" bundle:nil];
    ListaPercursosTableViewController *listaV = [story instantiateViewControllerWithIdentifier:@"view_lista"];
    [views replaceObjectAtIndex:0 withObject:listaV];
    [self.navigationController setViewControllers:views];

    lbl_info.text = NSLocalizedString(@"downloading", NULL);
    lbl_versao.text = NSLocalizedString(@"walkme_versao", NULL);

    dispatch_queue_t queue = dispatch_queue_create("com.WalkMe.downloadPercursos", NULL);
    dispatch_async(queue, ^{
        [[GlobalVars Instance] getLevadas:self];
    });
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (BOOL)shouldAutorotate
{
    return [[GlobalVars Instance] podeRodar];
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(void)novaAtualizacao
{
   NSLog(@"Atualização encontrada");
   lbl_info.text = NSLocalizedString(@"atualizacao_encontrada", NULL);
}
-(void)atualizarPercursosInternos
{
    NSLog(@"VERIFICAÇAO Interna");
    lbl_info.text = NSLocalizedString(@"a_atualizar_percursos", NULL);
}
-(void)setNewDownload:(NSNumber*)size
{
    NSLog(@"Iniciou VERIFICAÇAO");
    progresso = 0;
    sizePercursos = [size intValue];
    lbl_info.text = [NSString stringWithFormat:@"%@ 0/%d", NSLocalizedString(@"novos_percursos", NULL), sizePercursos];
}
-(void)setProgress
{
    NSLog(@"Progresso");
    progresso++;
    lbl_info.text = [NSString stringWithFormat:@"%@ %d/%d", NSLocalizedString(@"novos_percursos", NULL), progresso, sizePercursos];
}
-(void)goToLista
{
    NSLog(@"ACABOU VERIFICAÇAO");

    UIStoryboard *story = [UIStoryboard storyboardWithName:@"WalkMeStoryBoard" bundle:nil];
    [[GlobalVars Instance] getLevadas];
    [self.navigationController pushViewController:[story instantiateViewControllerWithIdentifier:@"view_lista"] animated:NO];
}

- (void)viewDidUnload {
    [self setLbl_versao:nil];
    [super viewDidUnload];
}
@end 
```

非常感谢您的关注和帮助：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:03:52.707

在试图弄清楚发生了什么时，对问题的评论中提出的建议让我意识到，由于某种原因，该应用程序两次调用相同的方法，并且由于某种原因导致该应用程序进入后台。

要解决此问题，只需从 viewDidLoad 中删除此行

```
NSMutableArray *views = [[NSMutableArray alloc] initWithArray:[self.navigationController viewControllers]];
    UIStoryboard *story = [UIStoryboard storyboardWithName:@"WalkMeStoryBoard" bundle:nil];
    ListaPercursosTableViewController *listaV = [story instantiateViewControllerWithIdentifier:@"view_lista"];
    [views replaceObjectAtIndex:0 withObject:listaV];
    [self.navigationController setViewControllers:views]; 
```

并将它们添加到 goToLista（在初始加载完成后调用）。

我最终得到：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.trackedViewName = @"iPhone - EcrãPrincipal";
    // Do any additional setup after loading the view.

    lbl_info.text = NSLocalizedString(@"downloading", NULL);
    lbl_versao.text = NSLocalizedString(@"walkme_versao", NULL);

    dispatch_queue_t queue = dispatch_queue_create("com.WalkMe.downloadPercursos", NULL);
    dispatch_async(queue, ^{
        [[GlobalVars Instance] getLevadas:self];
    });
}

-(void)goToLista
{
    NSLog(@"ACABOU VERIFICAÇAO");

    [[GlobalVars Instance] getLevadas];

    NSMutableArray *views = [[NSMutableArray alloc] initWithArray:[self.navigationController viewControllers]];
    UIStoryboard *story = [UIStoryboard storyboardWithName:@"WalkMeStoryBoard" bundle:nil];
    ListaPercursosTableViewController *listaV = [story instantiateViewControllerWithIdentifier:@"view_lista"];
    [views replaceObjectAtIndex:0 withObject:listaV];
    [self.navigationController setViewControllers:views];
    [self.navigationController pushViewController:[story instantiateViewControllerWithIdentifier:@"view_lista"] animated:NO];
} 
```

这解决了问题，但我不知道为什么。如果有人知道请告诉我，因为我真的很想知道。

谢谢 ：）

# javascript - Javascript 在 windows phone 7.5 中拖放

> ID：13501808
> 
> 赞同：1
> 
> 时间：2012-11-21T20:45:13.910
> 
> 标签：javascript, html, windows-phone-7

我正在尝试让拖放功能在 Windows 7.5 手机中工作。最初我尝试使用可在除 Windows 7.5 之外的所有浏览器中使用的 jquery ui 可拖动。后来进一步探索，我发现windows中没有touchstart、touchend和touchmove事件。所以我尝试使用mousedown，mousemove事件让它工作，这些事件令人震惊地触发了。但它们没有按正确的顺序开火。（mousemove 在 mousedown 之前触发）。dragstart 和 dragend 事件也不起作用。我需要让它工作。你有什么建议吗 ？

```
/*Eg1:does not work*/
$("#draggable").draggable(); 

/*Eg2:This event does not fire*/
 $("#draggable").bind("touchstart touchmove touchend", function(){
alert("touch events supported");})

/*Eg3: In this case, mousemove fires before mousedown.*/
$("#draggable").bind("mousedown", function(){
alert("mousedown");});

$("#draggable").bind("mousemove", function(){
alert("mousemove");}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T21:47:37.520

我只有在使用 IE 10（与 WP7.5 和 WP7.8 中的 IE 9 不同）的 Windows Phone 8 中使用 Javascript 的经验，但您可以尝试我的方法。

在 WP8 (IE10) 中，Microsoft 支持`pointer`事件`MSPointerUp` `MSPointerMove` `MSPointerDown`而不是`touchstart`,`touchmove`和`touchend`事件。尝试使用这些来查看它们是否有效。

然而，在我创建的示例中，我什至*不需要*使用那些专有事件，因为 IE 10 愉快地使用了标准鼠标事件 ( `mouseup` `mousemove` `mousedown`) 并且在*一定程度上*运行良好。我对事件的顺序没有任何问题（就像你在问题中所说的那样）。拖动时出现的主要问题是`mousemove`事件停止被触发（由浏览器），而浏览器开始平移页面，使我拖动的元素处于不确定状态（无`mousemove`或`mouseup`触发）。使用`event.preventDefault()`也无济于事，因为它不会阻止页面平移。为了克服这个问题，我浏览了微软关于他们的触摸事件的文档并遇到了这个 CSS 行。

```
-ms-touch-action: none; 
```

我将它应用到要*拖动*的元素上，我的问题就解决了。[您可以在此处](http://msdn.microsoft.com/en-in/library/windows/apps/hh767313.aspx)阅读有关上述专有 CSS 属性的所有信息。注意不要将此属性应用于整个`body`页面（我之前已经这样做过），因为它会阻止页面平移和缩放的默认浏览器行为。正如我所说，仅将它应用于要*拖动*的元素并且它可以工作。

这又是我对 WP 8 的体验。我*不*知道它是否适用于以前版本的 Windows Phone。

# variables - 如何使用“使用”资源另一个.cs文件中的变量

> ID：13501810
> 
> 赞同：1
> 
> 时间：2012-11-21T20:45:13.580
> 
> 标签：variables, namespaces, using, c#

我想知道如何使用“using”语句从另一个 .cs 文件中获取等效变量。喜欢

```
using (namespace here)
Output(A, 8); 
```

并且带有（此处的命名空间）的文件将具有

```
A = 3 
```

我可以直接引用该变量，还是需要以其他方式定位它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T20:51:47.577

如果您只想在一个位置定义一组可以在其他地方使用的常量值，这是您将遵循的标准模式：

```
namespace MyNameSpace
{
    public static class Constants
    {
        public const int MyFavoriteNumber = 3;
    }
} 
```

然后在其他地方你可以拥有：

```
using MyNameSpace;
namespace MyOtherNameSpace
{
    public class MyClass
    {
        public void Method()
        {
            Console.WriteLine(Constants.MyFavoriteNumber);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:53:36.860

您不能像这样动态更改代码的范围。标识符是什么，是在编译时确定的，因此您无法在运行时更改它的含义。

从不同的文件中创建一个指定要使用的类或接口，然后继承该类或实现接口以在不同的文件中进行不同的实现。当您使用其中一种实现时，您会从该文件中获取值。

例子：

```
public interface ICommon {
  int A { get; }
}

public class File1 : ICommon {
  public int A { get { return 42; } }
}

public class File2 : ICommon {
  private int _value = 1;
  public int A { get { return _value; } }
} 
```

现在您可以使用不同的对象：

```
ICommon x;
if (something) {
  x = new File1();
} else {
  x = new File2();
}

Output(x.A, 8); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:50:22.123

.CS 文件包含*类*，而不是*变量*。如果 .CS 文件包含具有静态属性 A 的*类*，您只需引用该静态属性：

```
Output(ClassName.A, 8); 
```

否则，您需要提供更多关于您*拥有*什么以及您正在尝试*做什么*的背景信息。

# ios - RemoteIO 录制的音频文件为静音或 4KB

> ID：13501815
> 
> 赞同：1
> 
> 时间：2012-11-21T20:45:30.990
> 
> 标签：ios, audio-recording, remoteio

我正在成功使用 RemoteIO 对来自麦克风的传入音频流进行分析。不过，我似乎无法将文件写入磁盘。我已经阅读了一些问题：

*   [从 RemoteIO 保存音频的示例？](https://stackoverflow.com/questions/10045369/example-of-saving-audio-from-remoteio),
*   [remoteIO 音频单元播放回调中的 AudioBufferList 内容](https://stackoverflow.com/questions/8145353/audiobufferlist-contents-in-remoteio-audio-unit-playback-callback)，
*   [从 RemoteIO 录制到 AAC：正在写入数据但文件无法播放](https://stackoverflow.com/questions/10113977/recording-to-aac-from-remoteio-data-is-getting-written-but-file-unplayable)
*   [从 RemoteIO 录制：生成的 .caf 音调变慢 + 失真](https://stackoverflow.com/questions/10067117/recording-from-remoteio-resulting-caf-is-pitch-shifted-slower-distorted)

并试图在那里实施这些建议：除非它们不起作用。调用 ExtAudioFileWriteAsync 的正确位置在哪里，如何设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T20:45:30.990

除了 RemoteIO 本身的设置过程（相当艰巨但由[Apple 的示例代码](http://developer.apple.com/library/ios/#samplecode/aurioTouch/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007770)更好地涵盖）之外，洞察的关键点是：

1.  使用与我最初设置流相同的`AudioStreamBasicDescription`( )。`*audioFormat`根据其他问题和帖子，我不知道我花了多长时间尝试设置一个参数略有不同的新参数。只需从我的 ivar 中引用流属性就足够了。
2.  设置一个“isRecording”布尔值，这样您就可以打开和关闭写入文件，而无需拆除并重新设置您的 RemoteIO 会话
3.  在，嗯，回调中写入文件是可以的`recordingCallback`，但是异步执行。很多信息都在谈论在playbackCallback 中执行此操作或设置第三个audioFileWriteCallback。这导致了无声文件或 4KB（即空）文件。不要这样做。
4.  此外，请务必使用传递给回调的 ioData的*副本*

在`recordingCallback`之后`AudioUnitRender`进入`bufferList`：

```
 AudioDeviceManager* THIS = (__bridge AudioDeviceManager *)inRefCon;
    if (THIS->isRecording) {
      ExtAudioFileWriteAsync(THIS->extAudioFileRef, inNumberFrames, bufferList);
    } 
```

1.  开始和停止录音功能，供参考：

`-(void)startRecording {`

 ````
 NSArray  *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
  NSString *documentsDirectory = [paths objectAtIndex:0];
  NSString *destinationFilePath = [documentsDirectory stringByAppendingPathComponent:kAudioFileName];
  CFURLRef destinationURL = CFURLCreateWithFileSystemPath(kCFAllocatorDefault, (CFStringRef)destinationFilePath, kCFURLPOSIXPathStyle, false);

  OSStatus status;

  // create the capture file
  status = ExtAudioFileCreateWithURL(destinationURL, kAudioFileWAVEType, &audioFormat, NULL, kAudioFileFlags_EraseFile, &extAudioFileRef);
  if (status) NSLog(@"Error creating file with URL: %ld", status);

 // use the same "audioFormat" AudioStreamBasicDescription we used to set up RemoteIO in the first place
  status = ExtAudioFileSetProperty(extAudioFileRef, kExtAudioFileProperty_ClientDataFormat, sizeof(AudioStreamBasicDescription), &audioFormat);

  ExtAudioFileSeek(extAudioFileRef, 0);
  ExtAudioFileWrite(extAudioFileRef, 0, NULL);

  isRecording = YES;
} 
````  ````
- (void)stopRecording {

  isRecording = NO;
  OSStatus status = ExtAudioFileDispose(extAudioFileRef);
  if (status) printf("ExtAudioFileDispose %ld \n", status);
} 
```

就是这样！`

# php - 简单的类方法不起作用

> ID：13501819
> 
> 赞同：0
> 
> 时间：2012-11-21T20:46:12.380
> 
> 标签：php, function

这是一个超级基本的问题，但我的课程并没有按照我期望的方式工作。我是第二年的 CS 学生，所以放轻松！我知道的唯一其他语言是Java。这是我的类，叫做class.Team.php（代表一个团队）。

```
<?php
class Team
{
  private $teamId='';
  private $teamName='Tyler';
  private $teamCity='';
  private $homeField='';
  private $headCoach='';
  private $mascot='';
  private $wins=0;
  private $losses=0;
  private $roster;

  function display(){
    return $teamName;
  }
}
?> 
```

因此，当我调用 display() 方法时，它应该返回一个字符串（硬编码为“tyler”）。这是我的测试脚本。它只是什么都不显示。一个空白页。我错过了什么吗？

```
<?php
include ('class.Team.php');
$um = new Team;
$string = $um->display();
print ($string);
?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T20:49:00.830

您需要使用`$this`关键字。

```
function display(){
    return $this->teamName;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:50:09.413

这不是Java。您必须使用`$this`引用自己的实例。

```
return $this->teamName; 
```

# ruby-on-rails - 未定义的方法 rails 3.2.9 和 devise 1.0.11

> ID：13501826
> 
> 赞同：0
> 
> 时间：2012-11-21T20:46:35.297
> 
> 标签：ruby-on-rails, devise

错误：C:/Ruby193/lib/ruby/gems/1.9.1/gems/devise-1.0.11/lib/devise.rb:89:in '': undefined method 'weeks' for 2:Fixnum (NoMethodError)

每当我尝试在我一直在从事的 Rails 项目中运行“rails g devise:install”时，都会引发该错误。

有任何想法吗？

PS 需要 Gemfile 中的 gem 'devise' 并运行 bundle install 来获取设计 gem

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:55:31.943

这个问题已经在[这里](https://github.com/plataformatec/devise/issues/184)处理过了。尝试更新到更高的设计版本来修复。

# iphone - 启动应用程序时出现 iCloud 错误消息

> ID：13501830
> 
> 赞同：0
> 
> 时间：2012-11-21T20:46:52.393
> 
> 标签：iphone, objective-c, icloud

我有时会在启动后立即收到以下消息，当我这样做时，我的数据库中的所有内容都会出现两次。有人遇到过类似的问题吗？

```
-[_PFUbiquityRecordsImporter rollResponseOperation:encounteredAnError:whileTryingToAdoptBaseline:](1509): CoreData: Ubiquity:  <PFUbiquityBaselineRollResponseOperation: 0x1f04b5e0> localPeerID: mobile.10F7B7AF-41F5-547A-8D05-AD22C7A527B4, storeName: iCloudStore, modelVersionHash: oCxAtFI41bNZlKPPrX91oHYeaXwl_1Bdzlu4QIui2wQ=
    ubiquityRootLocation: <PFUbiquityLocation: 0x1ddf5910>: /private/var/mobile/Library/Mobile Documents/Y5CSSRAZ49~com~myappname/iCloudData

Encountered an error while trying to respond to the roll of baseline: <PFUbiquityBaseline: 0x2022ee70>(0)
    permanentLocation: <PFUbiquityLocation: 0x1dde1c50>: /private/var/mobile/Library/Mobile Documents/Y5CSSRAZ49~com~myappname/iCloudData/.baseline/iCloudStore/oCxAtFI41bNZlKPPrX91oHYeaXwl_1Bdzlu4QIui2wQ=/baseline.zip
    safeLocation: <PFUbiquityLocation: 0x20231cd0>: /private/var/mobile/Library/Mobile Documents/Y5CSSRAZ49~com~myappname/iCloudData/.baseline/iCloudStore/oCxAtFI41bNZlKPPrX91oHYeaXwl_1Bdzlu4QIui2wQ=/mobile.10F7B7AF-41F5-547A-8D05-AD22C7A527B4
    currentLocation: <PFUbiquityLocation: 0x1dde1c50>: /private/var/mobile/Library/Mobile Documents/Y5CSSRAZ49~com~myappname/iCloudData/.baseline/iCloudStore/oCxAtFI41bNZlKPPrX91oHYeaXwl_1Bdzlu4QIui2wQ=/baseline.zip

    storeName: iCloudStore
    modelVersionHash: oCxAtFI41bNZlKPPrX91oHYeaXwl_1Bdzlu4QIui2wQ=
    baselineArchiveLocation: <PFUbiquityLocation: 0x1dde1c50>: /private/var/mobile/Library/Mobile Documents/Y5CSSRAZ49~com~myappname/iCloudData/.baseline/iCloudStore/oCxAtFI41bNZlKPPrX91oHYeaXwl_1Bdzlu4QIui2wQ=/baseline.zip

Error: Error Domain=NSCocoaErrorDomain Code=134310 "The operation couldn’t be completed. (Cocoa error 134310.)" UserInfo=0x1f192f70 {baseline=<PFUbiquityBaseline: 0x2022ee70>(0)
    permanentLocation: <PFUbiquityLocation: 0x1dde1c50>: /private/var/mobile/Library/Mobile Documents/Y5CSSRAZ49~com~myappname/iCloudData/.baseline/iCloudStore/oCxAtFI41bNZlKPPrX91oHYeaXwl_1Bdzlu4QIui2wQ=/baseline.zip
    safeLocation: <PFUbiquityLocation: 0x20231cd0>: /private/var/mobile/Library/Mobile Documents/Y5CSSRAZ49~com~myappname/iCloudData/.baseline/iCloudStore/oCxAtFI41bNZlKPPrX91oHYeaXwl_1Bdzlu4QIui2wQ=/mobile.10F7B7AF-41F5-547A-8D05-AD22C7A527B4
    currentLocation: <PFUbiquityLocation: 0x1dde1c50>: /private/var/mobile/Library/Mobile Documents/Y5CSSRAZ49~com~myappname/iCloudData/.baseline/iCloudStore/oCxAtFI41bNZlKPPrX91oHYeaXwl_1Bdzlu4QIui2wQ=/baseline.zip

    storeName: iCloudStore
    modelVersionHash: oCxAtFI41bNZlKPPrX91oHYeaXwl_1Bdzlu4QIui2wQ=
    baselineArchiveLocation: <PFUbiquityLocation: 0x1dde1c50>: /private/var/mobile/Library/Mobile Documents/Y5CSSRAZ49~com~myappname/iCloudData/.baseline/iCloudStore/oCxAtFI41bNZlKPPrX91oHYeaXwl_1Bdzlu4QIui2wQ=/baseline.zip
, localStoreKV=<PFUbiquityKnowledgeVector: 0x1f193460> ()}
userInfo: {
    baseline = "<PFUbiquityBaseline: 0x2022ee70>(0)
    permanentLocation: <PFUbiquityLocation: 0x1dde1c50>: /private/var/mobile/Library/Mobile Documents/Y5CSSRAZ49~com~myappname/iCloudData/.baseline/iCloudStore/oCxAtFI41bNZlKPPrX91oHYeaXwl_1Bdzlu4QIui2wQ=/baseline.zip
    safeLocation: <PFUbiquityLocation: 0x20231cd0>: /private/var/mobile/Library/Mobile Documents/Y5CSSRAZ49~com~myappname/iCloudData/.baseline/iCloudStore/oCxAtFI41bNZlKPPrX91oHYeaXwl_1Bdzlu4QIui2wQ=/mobile.10F7B7AF-41F5-547A-8D05-AD22C7A527B4
    currentLocation: <PFUbiquityLocation: 0x1dde1c50>: /private/var/mobile/Library/Mobile Documents/Y5CSSRAZ49~com~myappname/iCloudData/.baseline/iCloudStore/oCxAtFI41bNZlKPPrX91oHYeaXwl_1Bdzlu4QIui2wQ=/baseline.zip\n
    storeName: iCloudStore
    modelVersionHash: oCxAtFI41bNZlKPPrX91oHYeaXwl_1Bdzlu4QIui2wQ=
    baselineArchiveLocation: <PFUbiquityLocation: 0x1dde1c50>: /private/var/mobile/Library/Mobile Documents/Y5CSSRAZ49~com~myappname/iCloudData/.baseline/iCloudStore/oCxAtFI41bNZlKPPrX91oHYeaXwl_1Bdzlu4QIui2wQ=/baseline.zip\n";
    localStoreKV = "<PFUbiquityKnowledgeVector: 0x1f193460> ()";
} 
```

# visual-studio-2010 - 关闭 AssemblyInfo.cs 上的自动增量？

> ID：13501831
> 
> 赞同：0
> 
> 时间：2012-11-21T20:46:57.440
> 
> 标签：visual-studio-2010, svn, version-control, assemblies, assemblyinfo

我们有一个管理版本号的构建服务器。当我们调试时，我们创建一个本地构建，它也尝试管理版本号。结果是需要解决的 AssemblyInfo.cs 中的永久版本控制 (SVN) 冲突。

注意：我们使用的是`[assembly: AssemblyVersion("w.x.y.z")]`，而不是下面@estebane 提到的通配符。

如何关闭 Visual Studio 2010 的自动增量功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:31:22.240

好像你有另一个非默认软件/插件/扩展更新你的版本号。因为不使用通配符时 Visual Studio 不会这样做。

检查您的 Visual Studio 插件列表和扩展列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:02:01.597

您是否有任何构建前或构建后的步骤正在改变它？也许查看构建的输出窗口，看看是否有任何迹象表明哪个进程可能正在改变它。

如果您最初`[assembly: AssemblyVersion("1.0.0.0")]`在您的 AssemblyInfo.cs 文件中，并且它在构建后更改，则 VS.NET 以外的其他东西正在修改该文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:32:14.103

尝试使用以下设置固定程序集版本 1.0.0.0 和固定文件版本 1.0.*。

```
[assembly: AssemblyVersion("1.0")]
[assembly: AssemblyFileVersion("1.0.*")] 
```

希望这将停止增加您的程序集版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T20:56:16.043

在您的 AssemblyInfo 文件中，您可以设置版本并避免使用自动递增

```
[assembly: AssemblyVersion("1.0.0.0")] 
```

如果自动增量处于活动状态，它看起来像

```
[assembly: AssemblyVersion("1.0.*")] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T20:32:16.963

尝试这个：

*   在 VS 中打开项目属性
*   单击应用程序选项卡
*   点击“装配信息”按钮
*   设置程序集和文件版本
*   清洁解决方案并重建
*   清理并重建使用您的 dll 作为参考的项目

如果这不起作用，您的问题在其他地方。

您可以通过在 Windows 资源管理器中找到 dll，右键单击，选择“属性”，单击“详细信息”选项卡并检查文件版本和产品版本字段来检查这些设置的效果。如果这些行为符合预期，请尝试追踪您实际加载的过期副本在哪里。

# ruby-on-rails-3 - 在黄瓜步骤定义中向控制器发送删除请求

> ID：13501832
> 
> 赞同：2
> 
> 时间：2012-11-21T20:46:59.860
> 
> 标签：ruby-on-rails-3, authentication, rspec, devise, cucumber

你们有谁知道如何做（实施）这样的事情：

**样本特征**

```
...
scenario: unauthorized user cannot delete event
  Given list of events
  When event is deleted
  Then nothing happen
... 
```

**sample_steps.rb**

```
...
When /^event is deleted$/ do
  delete (_path_to_controller_ + "/%d" % @events.first().id)
... 
```

当然，在这一步中，我想根据*rake routes*的结果发送一个请求，大概是这样的（我已经在*admin*路径下移动了资源）：

**耙路线**

```
...
DELETE /admin/controller_name/:id(.:format)         controller_name#destroy
... 
```

我一直在尝试和搜索互联网这么久，但我不知道该怎么做:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:09:28.833

我过去曾使用[Rack::Test](https://github.com/brynary/rack-test)向 API 发送 DELETE 请求：

```
When /^event is deleted$/ do
  header 'Accept', 'application/json'
  header 'Content-Type', 'application/json'

  authorize "username", "password"
  url = _path_to_controller_ + "/%d" % @events.first().id)

  delete url
end 
```

话虽如此，我不确定我是否会在您的情况下推荐它。是否会从界面中的某些操作（例如单击按钮）中删除事件？如果是这样，您应该使用 capybara 登录并单击按钮。这为您提供了完全集成覆盖的好处，并且您不必处理 Rack::Test（不是说它是一个坏工具，而是另一个工具）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T01:14:37.173

我已经解决了这个问题。非常感谢比灵顿

所以在这篇文章中，我将总结我在这个问题及其解决方案上的时间。

**相关主题和文档**

*   [StackOverflow：Capybara 的 HTTP 基本身份验证](https://stackoverflow.com/questions/4329985/http-basic-auth-for-capybara)
*   [设计：如何：使用 HTTP 基本身份验证](https://github.com/plataformatec/devise/wiki/How-To:-Use-HTTP-Basic-Authentication)

**背景**

我正在使用*设计 gem*进行身份验证。我的目标是检查是否可以手动破解资源管理功能，如删除。

**问题**

以上;D

**解决方案**

> ```
> When /^event is deleted$/ do
>   header 'Accept', 'application/json'
>   header 'Content-Type', 'application/json'
> 
>   authorize "username", "password"
>   url = _path_to_controller_ + "/%d" % @events.first().id)
> 
>   delete url
> end 
> ```

不适用于默认*设计*配置。因为它使用默认禁用的 HTTP 身份验证。

**配置/初始化程序/devise.rb**

```
# Tell if authentication through HTTP Basic Auth is enabled. False by default.
# It can be set to an array that will enable http authentication only for the
# given strategies, for example, `config.http_authenticatable = [:token]` will
# enable it only for token authentication.
# config.http_authenticatable = false 
```

因此，如果我们想让上述测试正常工作，我们需要将最后一行更改为：

```
config.http_authenticatable = true 
```

但问题是我们真的想做吗？

最后一点：*标头*调用是可选的。有或没有它们的记录都会被删除。

*   与他们一起*删除*返回状态码：*204 No Content*
*   没有他们*删除*返回状态码：*302 Found*

# java - 可能的 Java 编译器错误！某些编译器无法编译程序

> ID：13501836
> 
> 赞同：5
> 
> 时间：2012-11-21T20:47:06.943
> 
> 标签：java, generics, openjdk, eclipse-jdt, compiler-bug

首先，一些背景知识（如果不感兴趣，请略略略过）。我很生气和困惑！这应该是一个非常简单的用例，实际上我的代码*已经*用 Eclipse JDT 编译器编译得很好，所以直到现在我一直在配置 Maven 以确保这样做。尽管它不能与 Oracle JDK 和 OpenJDK 一起编译，但它一直困扰着我，因为我认为这实际上可能是我的代码有问题，所以我再次调查了它。

我认为这个错误可能是在 JDT 编译器中允许它编译，而不是 Oracle JDK 和 OpenJDK 不允许它，我也测试过这两者。有问题的原始代码要复杂得多，因此我更难看出问题出在哪里，事实上，我很惊讶地看到在仍未编译的情况下可以将其减少到何种程度。

Eclipse JDT 编译器或 Oracle JDK 和 OpenJDK 都有一个相当大的（恕我直言）错误。

### TL;博士

这是有问题的代码的一个相当小的表示。（anything 的类型绑定可以被任何接口替换，编译器行为不会改变）：

```
public class Bug<X extends Property<?, ?> & Anything> {
}

interface Property<C, S extends C> extends PropertyConst<C> {
    @Override
    public S get();
}

interface PropertyConst<C> {
    public C get();
}

interface Anything {
} 
```

总而言之，我认为这应该编译得很好，但是 Oracle JDK 7 & 8 和 OpenJDK 7 不同意。它确实使用 Eclipse Juno 为我编译。

当使用这些编译器中的任何一个进行编译时，上面的代码会出现类似以下错误，但使用 JDT 编译器可以正常工作：

```
Bug.java:3: error: types PropertyConst<?> and Property<?,?> are incompatible; both define get(), but with unrelated return types
public class Bug<X extends Property<?, ?> & Anything> {
                 ^
1 error 
```

这是没有意义的。返回类型显然是相关的，因为引用的两种方法之一必然会*覆盖*另一个。我几乎 99% 相信这应该会起作用，事实上，最后 1% 缺失的唯一原因是泛型的使用太基本了，以至于没有被发现，但我没有发现相关的错误报告给它。（诚​​然，我并没有努力，因为[http://bugs.sun.com/](http://bugs.sun.com/)是最糟糕的。你甚至可以通过错误报告是否仍然打开来过滤关键字搜索结果吗？呃。）

对我来说最令人困惑的部分是，当您删除 X 上任何东西的类型边界时，它编译得很好，即使额外的接口与错误无关。

谁能让我放心？任何人都知道为此存在的错误报告，或者以前有过相关经验并且可以告诉我问题是什么？如果我没有得到任何确凿的答案，我会提交一些错误报告。

### 编辑：

有几个人指出我在使用 <S extends C, C> 时遇到了前向引用错误。不知道为什么我没有收到这个错误，它甚至在 Eclipse 中用 JDT 编译...

无论如何，它仍然无法使用 OpenJDK 7 或 Oracle JDK 7 / 8 为我编译，因此我修改了问题以消除该问题。

### 编辑2：

快速检查确认这种前向引用现在在 Java 7 中是合法的。应该如此！

### 编辑3：

[我已经在http://bugs.sun.com/](http://bugs.sun.com/)上发布了错误报告。如果/当它们被接受时，我会在这里发布链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T21:29:14.400

这显然是您应该报告的 javac 错误。在开放的 jdk 邮件列表之一上询问您可能会有更好的运气。但是今天是感恩节，所以...

虽然这不是泛型的基本用法，但它相当复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T21:05:03.723

我已将您的示例输入到我的 Eclipse Indigo (3.7.1) 中，它立即抱怨`Property`接口声明。

> 对类型参数 C 的非法前向引用

而对于线`public S get();`

> 返回类型与 PropertyConst.get() 不兼容

将声明更改`Property`为此

```
interface Property<C, S extends C > extends PropertyConst<C> {
    @Override
    public S get();
} 
```

修复了这两个错误，并在 JDT 和 Sun 的 1.6 编译器中编译

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T22:53:41.000

没试过，但在

```
public class Bug<X extends Property<?, ?> & Anything> { 
```

两者都没有限制`?`。需要类似的东西：

```
public class Bug<C, X extends Property<C, ? extends C> & Anything> { 
```

# ruby-on-rails - 仅通过 ajax 加载的视图的最佳实践

> ID：13501839
> 
> 赞同：0
> 
> 时间：2012-11-21T20:47:22.810
> 
> 标签：ruby-on-rails, ajax, view, seo

我在 Rails 3.2 应用程序中通过 ajax 将表单加载到页面上。谷歌正在获取这些视图，而网址只是呈现空白页面。尝试从我的应用程序外部（http 引荐来源网址或类似的东西）查看时，我应该以某种方式阻止访问这些页面，还是只使用 robots.txt 文件？

因此我的问题是：当您有一个仅通过 ajax 加载的视图时，最好的做法是什么。这是一个编程问题，因为我很乐意为我的控制器文件等编写任何最佳实践。但是，这也是从 SEO 和我的应用程序性能的角度来看的。

我不希望 Google 将这些页面编入索引 - 但是 - 我不知道直接阻止访问是否是最佳选择（例如在这个问题中：[如何拒绝访问我的部分视图的直接 URL？](https://stackoverflow.com/questions/10409618/how-deny-access-direct-url-to-my-partial-views) <- 错误的环境，或者这个一个[https://stackoverflow.com/questions/11522307/prevent-direct-access-to-certain-urls-only-rails-app-can-load-them](https://stackoverflow.com/questions/11522307/prevent-direct-access-to-certain-urls-only-rails-app-can-load-them) <- 相关但未答复。）

当然，我可以在我的 robots.txt 中定义这些页面并阻止它们被索引，但是，也许有更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:44:28.587

如果您不希望 Google 出于 Ajax 或非 Ajax 的原因将您的任何应用程序页面编入索引，我建议您只需使用 robots.txt 文件向 Google 不编入索引。

我不知道阻止特定部分的方法，只有整个页面。

这将被视为 SEO 最佳实践。

您是否有任何理由认为这可能不是解决方案？用户体验？谷歌服务条款？

# linq - LINQ - 如何在提交数据后读取自动编号的 ID

> ID：13501845
> 
> 赞同：0
> 
> 时间：2012-11-21T20:48:19.890
> 
> 标签：linq

我正在研究 LINQ。在一个事务中，我必须更新三个不同的表。

例如 A(A1,A2,A3) B(B1,B2) AB(A1,B1)

这里 B1 是我数据库中的自动编号。我想一起提交所有更改。所以在一个数据上下文中我写了

```
using (BBBDataContext DC= new BBBDataContext())
 {
                A tba = new A()
                {
                    A1 = this.A1,
                    A2 = this.A2,
                    A3 = this.A3,
                };

                    DC.A.InsertOnSubmit(tba);
                    B tbb= new B()
                    {
                        B2 = this.B2,
                    };
                    DC.B.InsertOnSubmit(tbb);

        // NOW i WONT B1(WHICH IS AUTONUMBER) FROM B SO THAT I USE IT IN MY NEXT TABLE.

                AB tbab = new AB()
                {
                    A1 = this.A1,
                    B1 = ??????,
                };
              DC.AB.InsertOnSubmit(tbab);
      //FINALLY I WILL WRITE SUBMIT CHANGES SO MY ALL TABLES GET CHANGES SAME TIME

               DC.SubmitChanges();
} 
```

缺：我应该写什么@ ?????的地方。AB表中的B1？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:55:56.617

简答：B

更长一点的答案：当您创建对象并添加它时，您在提交之前不会获得 ID。所以你所做的是引用对象而不是对象的 ID 属性。

```
class A {
    public int Id  { get;set;}
    public ICollection <B> Bees { get;set;}
}

class B {
    public int Id { get;set;}
    public int InstanceOfAId { get;set;}
    public A InstanceOfA { get;set;}
}

var a = new A();
var b = new B();

b.InstanceOfA = a; 
```

根据您的模型，您将定义一个关系。在代码中，你可以这样做：

```
 EntityTypeConfiguration<B> cfgB = new EntityTypeConfiguration<B>();
        cfgB.HasRequired(p => p.InstanceOfA).WithMany(p => p.Bees)
.HasForeignKey(p => p.InstanceOfAId); 
```

在 EDMX 中，您可以在设计器中执行相同的操作。

插入时您将使用`InstanceOfA`分配给，之后`InstanceOfAId`将始终保留 Id 值。检索数据`InstanceOfA`时只会在请求时填充。

你可以像这样使用它：

```
var x = DC.B.Include(p=>p.A); 
```

或者

```
var x = DC.B.Select(p=> new { Id = p.Id, A_Id = p.A.Id}); 
```

或者

```
var x = DC.A.Select(p=> new { Id = p.Id, BeeCount = p.Bees.Count()}); 
```

# php - php内置计数器，用于当前foreach循环的迭代

> ID：13501846
> 
> 赞同：2
> 
> 时间：2012-11-21T20:48:21.540
> 
> 标签：php, foreach, indexing, iterator

我有一个关联数组。我这样迭代的两个维度

```
foreach ( $order_information as $sector_index => $sector_value ){
echo 'sector : ' . current($order_information) ;
echo '<br>';
    foreach ( $sector_value as $line_index => $line_value ){

    }
} 
```

这`current()`是试图获得循环所在的迭代。[看起来这](https://stackoverflow.com/questions/141108/how-to-find-the-foreach-index)应该给我那个。但是，该页面的其他地方有您喜欢的建议

```
$index = 0
foreach ( $array as $key => $val ) {
    echo $index;
    $index++;
} 
```

我想知道我是否使用不正确的电流，因为`echo 'sector : ' . current($order_information);`只是打印`sector : Array`

$index++ 语法不好？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T20:53:02.253

## 回答

`foreach`据我所知，PHP 的循环中没有内置数字计数器。

所以你需要你自己的计数器变量。您的示例代码看起来很不错。

```
$index = 0;
foreach($array as $key => $val) {
    $index++;
} 
```

顺便说一句，`$index++;`很好。

## 例子

这是一个示例，说明哪个变量存储哪个值。

```
$array = array(
    "first"  => 100,
    "secnd" => 200,
    "third"  => 300,
);

$index = 0;
foreach($array as $key => $val) {
    echo "index: " . $index . ", ";
    echo "key: "   . $key   . ", ";
    echo "value: " . $val   . "\n";
    $index++;
} 
```

输出将是那个。

```
index: 0, key: first, value: 100
index: 1, key: secnd, value: 200
index: 2, key: third, value: 300 
```

## 电流函数

我想你误会了`current($array)`。它为您提供由内部数组指针指向的值，可以使用`next($array)`,`prev($array)`和移动该值`end($array)`。

看看[手册](http://php.net/manual/en/function.current.php)，让思路清晰。

# iphone - 设置子视图控制器属性

> ID：13501850
> 
> 赞同：2
> 
> 时间：2012-11-21T20:49:06.460
> 
> 标签：iphone, ios, xcode, uiviewcontroller, uilabel

好的，我知道之前有人问过这个问题，我尝试了许多不同的方法来完成这项工作，但由于某种原因它不会。我正在尝试将字符串保存到标签的文本属性中。标签位于容器视图中调用的子视图控制器中，当 UIDatePicker 的值发生更改时`tableVC`，我在 IBAction 中从 parentViewController 设置它。我努力了：`ViewController``datePicker`

```
tableVC *tVC = [[tableVC alloc] init];
tVC.timeLabel.text = [formatter stringFromDate:self.datePicker.date]; 
```

并且还尝试过创建一个属性`@property (strong, nonatomic) tableVC *tVC;`然后做：

```
_tVC = [tableVC alloc] init];
_tVC.timeLabel.text = [formatter stringFromDate:self.datePicker.date]; 
```

但这也不起作用。顺便说一句，我有`#import "tableVC"`。我不想要一个复杂的委托或协议方式，因为我认为我只是犯了一个菜鸟错误。另外，我已经确认`[formatter stringFromDate:self.datePicker.date]`确实从 datePicker 返回了正确的、非零、格式化的值，使用`NSLog(@"%@", [formatter stringFromDate:self.datePicker.date]);`.

**编辑**

这是更多信息以及整个文件。该表是 Storyboard 中定义的静态表。我认为这可能是问题的原因，但即使我用只有一个标签`tableVC`的子类`UIViewController`替换它也不起作用。我认为问题在于我如何设置子视图控制器属性。`prepareForSeque`但是，在其他项目中使用该方法时，我没有这个问题。我可以为目标控制器的属性设置值没问题，但不能为不是目标控制器的视图控制器的属性设置值。我认为这两个问题是一致的。所有连接都是通过 Storyboard 正确建立的。

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

@end 
```

视图控制器.m

```
#import "ViewController.h"
#import "tableVC.h"

@interface ViewController ()

@property (weak, nonatomic) IBOutlet UIView *containerView;
@property (weak, nonatomic) IBOutlet UILabel *testLabel;
@property (weak, nonatomic) IBOutlet UIDatePicker *datePicker;

- (IBAction)changedDatePickerSelection:(id)sender;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    tableVC *tVC = [[tableVC alloc] init];
    [self addChildViewController:tVC];
    [tVC didMoveToParentViewController:self];

    NSLog(@"parent");
}

- (IBAction)changedDatePickerSelection:(id)sender
{
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    formatter.timeZone = [NSTimeZone defaultTimeZone];
    formatter.timeStyle = NSDateFormatterShortStyle;
    formatter.dateStyle = NSDateFormatterMediumStyle;

    tableVC *tVC = (tableVC *)self.childViewControllers.lastObject;
    tVC.timeLabel.text = [formatter stringFromDate:self.datePicker.date];

    _testLabel.text = [formatter stringFromDate:self.datePicker.date];

    NSLog(@"%@", [formatter stringFromDate:_datePicker.date]);
    NSLog(@"%@", tVC.timeLabel.text);
}

@end 
```

表VC.h

```
#import <UIKit/UIKit.h>

@interface tableVC : UITableViewController

@property (weak, nonatomic) IBOutlet UILabel *timeLabel;

@end 
```

表VC.m

```
#import "tableVC.h"
#import "ViewController.h"

@interface tableVC ()

@property (weak, nonatomic) IBOutlet UITextField *titleTextField;
@property (weak, nonatomic) IBOutlet UISwitch *onOffSwitch;
@property (weak, nonatomic) IBOutlet UIButton *saveButton;

- (IBAction)saveAlarm;

@end

@implementation tableVC

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    formatter.timeZone = [NSTimeZone defaultTimeZone];
    formatter.timeStyle = NSDateFormatterShortStyle;

    _timeLabel.text = [formatter stringFromDate:[NSDate date]];
    NSLog(@"%@", _timeLabel.text);
}

- (BOOL)textFieldShouldReturn:(UITextField*)aTextField
{
    [aTextField resignFirstResponder];
    return YES;
}

- (IBAction)saveAlarm
{
    // do something
}

@end 
```

另外，这是我的两张图像，以显示在更改S选择时如何更新的`testLabel`图像，但不是从中使用。第一个图像是在选择更改之前，第二个是之后。为澄清起见， 是第三个单元格右侧的标签，而是 正上方的标签。`ViewController``datePicker``timeLabel``tableVC``timeLabel``testLabel``datePicker`

[http://cl.ly/image/2Q301v0d2m00](http://cl.ly/image/2Q301v0d2m00)

[http://cl.ly/image/0223183E1t2m](http://cl.ly/image/0223183E1t2m)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T23:06:39.213

如果你只有一个子视图控制器，你可以这样做：

```
tableVC *tVC = (tableVC *)self.childViewControllers.lastObject;
tVC.timeLabel.text = ....; 
```

如果你有多个孩子，那么你必须弄清楚哪个是你想要的，并使用 objectAtIndex: 而不是 lastObject。

编辑后：这就是我所做的。我添加了几个属性并将一些代码移到 viewDidLoad 中，因为每次更改日期选择器时都不需要分配初始化一个新的格式化程序：

```
#import "ViewController.h"
#import "TableVC.h"

@interface ViewController ()

@property (weak, nonatomic) IBOutlet UIView *containerView;
@property (weak, nonatomic) IBOutlet UILabel *testLabel;
@property (weak, nonatomic) IBOutlet UIDatePicker *datePicker;
@property (strong,nonatomic) NSDateFormatter *formatter;
@property (strong,nonatomic) TableVC *tVC;

- (IBAction)changedDatePickerSelection:(id)sender;

@end

@implementation ViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    self.formatter = [[NSDateFormatter alloc] init];
    self.formatter.timeZone = [NSTimeZone defaultTimeZone];
    self.formatter.timeStyle = NSDateFormatterShortStyle;
    self.formatter.dateStyle = NSDateFormatterMediumStyle;

    self.tVC = (TableVC *)self.childViewControllers.lastObject;
}

- (IBAction)changedDatePickerSelection:(id)sender {

    self.tVC.timeLabel.text = [self.formatter stringFromDate:self.datePicker.date];
    _testLabel.text = [self.formatter stringFromDate:self.datePicker.date];
} 
```

除了将名称大写（您确实应该将您的类名大写）之外，我没有更改 TableVC 中的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T21:02:01.663

每次您执行 alloc/init 时，都会创建视图控制器的*新*实例。您需要一个指向已经在屏幕上的现有实例的指针，可能是通过使用一个插座（如果这是在界面构建器中设置的）。

# android - 更改字符串中的文本颜色？

> ID：13501856
> 
> 赞同：2
> 
> 时间：2012-11-21T20:49:37.350
> 
> 标签：android, android-layout

> **可能重复：**
> [在 XML 中定义的 TextView 中的不同颜色](https://stackoverflow.com/questions/8784422/different-colors-in-textview-defined-in-xml)

这可能是一个非常愚蠢的问题，但我无法弄清楚。我想要做的是改变字符串中文本的颜色，比如：“嗨，你好吗”+colorRed“你？”

^ 试图将“你”这个词改成红色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T05:51:47.487

我知道的最简单的方法就是使用 html。

```
String color = "Hi, how are <font color='#EE0000'>you</font>";
**YOUR_TEXTVIEW**.setText(Html.fromHtml(color)); 
```

有关更多[详细信息，请参阅此](http://glorious-arvind.blogspot.in/2012/11/change-text-color-within-string-android.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T21:33:39.750

```
String s = "Hi, how are <font color='red'>you</font>?";
textView.setText(Html.fromHtml(s), TextView.BufferType.SPANNABLE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T06:13:04.600

我认为最好（且耗时更少）的方法是 - 使用[Spannable](http://developer.android.com/reference/android/text/Spannable.html)。例如：

```
final String text = "Hi, how are ";
final Spannable spanYou = new SpannableString("you");
spanYou.setSpan(new ForegroundColorSpan(Color.RED), 0, spanYou.length, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
textView.setText(text);
textView.append(spanYou); 
```

[Html.fromHtml()](http://developer.android.com/reference/android/text/Html.html#fromHtml%28java.lang.String%29)首先将您的文本解析为 html，然后使用 Spannable。

# c++ - 如何正确使用 cin.peek()

> ID：13501862
> 
> 赞同：8
> 
> 时间：2012-11-21T20:50:00.143
> 
> 标签：c++, struct, cin, peek

该函数应该读取分数并将其放入数组中。如果用户输入“0”，则该函数应该退出。我正在尝试使用 cin.peek() 函数执行此操作，但执行始终进入 if 语句并且不允许用户退出。

我应该如何正确编码（我愿意不使用 peek()，我认为这是最简单的方法。）

谢谢！

```
void enterFrac(Fraction* fracs[], int& index)
    {
        int n, d;
        char c, slash;
        cout << "Enter fractions (end by entering a 0): ";
        c = cin.peek();

        if ( c != '0')
        {
            cin >> n >> slash >> d;
            Fraction* f = new Fraction();
            f->num = n;
            f->den = d;
            fracs[index] = f;
            index++;
        }
    } 
```

然而，这个 peek() 测试有效：

```
#include <iostream>
using namespace std;

int main () {
  char c;
  int n;
  char str[256];

  cout << "Enter a number or a word: ";
  c=cin.peek();

  if ( (c >= '0') && (c <= '9') )
  {
    cin >> n;
    cout << "You have entered number " << n << endl;
  }
  else
  {
    cin >> str;
    cout << " You have entered word " << str << endl;
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-21T21:04:08.120

您使用 有两个问题`std::istream::peek()`：

1.  此函数访问下一个字符并且不**跳过**前导空格。您可能希望在确定下一个字符是什么之前跳过前导空格，例如，使用操纵器`std::ws`: `(std::cin >> std::ws).peek()`。
2.  的结果`std::istream::peek()`不是`char`. 相反，它是一个`std::char_traits<char>::int_type`（这是一个花哨的拼写`int`）。结果可能是，例如，`std::char_traits<char>::eof()`如果 的值`'0'`恰好为负（我不知道它所在的任何平台；但是，例如，我名字中的有趣字符在签名`'ü'`的平台上是负值）你`char`也不会得到正确的结果。也就是说，您通常将 的结果`std::istream::peek()`与 的结果进行比较`std::char_traits<char>::to_int_type()`，即，您会使用如下内容：`std::cin.peek() == std::char_traits<char>::to_int_type('0')`

也就是说，您的程序不会检查它是否可以成功读取由斜线分隔的提名者和分母。您**总是**想验证读取是否成功，例如，使用类似

```
if ((std::cin >> nominator >> slash >> denominator) && slash == '/') {
    ...
} 
```

只是为了娱乐，您可以创建一个操纵器来测试字符是否是斜线，实际上：

```
std::istream& slash(std::istream& in) {
    if ((in >> std::ws).peek() != std::char_traits<char>::to_int_type('/')) {
        in.setstate(std::ios_base::failbit);
    }
    return in;
} 
```

这样，您将封装斜线测试。如果您需要在多个地方使用它，这非常方便。

# c++ - 静态 QStack top() 让我在运行一分钟后出现第一次机会异常

> ID：13501863
> 
> 赞同：1
> 
> 时间：2012-11-21T20:50:01.617
> 
> 标签：c++, qt, exception-handling

我可以从 Visual Studio 2008 捕获异常，我在发布模式下运行它并启用调试信息，所有异常 Debug->Exceptions 菜单和
SEH Exceptions (/EHa) 在 IDE 中打开
：调用方法的 QTimer：

```
m_NotificationTimer = new QTimer();
connect(m_NotificationTimer, SIGNAL(timeout()),
            this,SLOT(CheckOuterLinks()/*,Qt::DirectConnection*/)); 
```

这个bean每3秒调用一次的函数：

```
void CollectorWorker2::CheckOuterLinks()
{

            while(!rpm_urlStack->isEmptyO())
            {

                        QMutexLocker locker(m_pMutex1);

                        std::map<std::string,std::string > m = rpm_urlStack->topO();

                        locker.unlock();
            }

} 
```

top0() 方法是从 QStack 获取顶部元素的函数，成员函数，看起来像这样它在其他地方用 pop() 删除了元素：

```
std::map<std::string,std::string >  UrlStack::topO()
{

    std::map<std::string,std::string > m;
    try
    {

        static QMutex mutex;
        QMutexLocker locker(&mutex);
            m = m_OuterLinksToProcessOutStack.top();

        return m;

    }

    catch (std::exception const & e)
    {
      std::cout << "Standard exception: " << e.what() << std::endl;

    }
    catch (...)
    {
       std::cout << "Unknown exception." << std::endl;      
    }

} 
```

m_OuterLinksToProcessOutStack 是静态成员，并被来自代码中其他地方的元素填充，也受互斥锁保护。
m_OuterLinksToProcessOutStack 充满了成员，它留下了 2000 个元素，我确实在其他地方检查过，所以它不是空堆栈的问题。
我在运行应用程序一分钟后遇到的问题是在运行时出现此错误：

```
First-chance exception at 0x00403fc2 in app.exe: 0xC0000005: Access violation reading location 0x00000004. 
```

在 QStack 的 top() 方法上

# c - printf 的输出未显示在 cygwin 终端中？

> ID：13501869
> 
> 赞同：4
> 
> 时间：2012-11-21T20:50:13.353
> 
> 标签：c, terminal, printf

我写了一个非常小的程序，叫做cow.c。当我在编译后尝试从 cygwin 终端运行它时，我没有得到任何输出。编译时没有错误。

```
#include <stdio.h>
int main() {
    printf("%s\n", "COW?");
    return(0);
} 
```

编辑：我觉得问题出在 cygwin 上……我需要采取什么步骤来确保将输出打印到 cygwin 终端而不是丢失在 void 中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T20:54:40.847

跑：

`gcc cow.c -o app`

然后输入：

`./app`

这应该有效。

# php - MySQL (PDO) exec 什么都不返回，没有错误，没有添加行

> ID：13501872
> 
> 赞同：2
> 
> 时间：2012-11-21T20:50:22.580
> 
> 标签：php, mysql, insert, pdo

好吧，我在 SO 上发现了类似的问题，但它仍然无法正常工作。

我运行以下代码，然后......什么都没有！没有错误，没有插入任何内容。

这是php代码：

```
 try
    {
        $obj_sqlsvr = new PDO('mysql:host=localhost;dbname=svmsys', 'root', '');
    }
    catch(Exception $e)
    {
        echo 'Erreur : '.$e->getMessage();
    }

    $servcatid = $_POST["servcatid"];
$sysname = $_POST["sysname"];
$sortorder = 1;
$friendlyname_fr = $_POST["friendlyname_fr"];
$friendlyname_en = $_POST["friendlyname_en"];

$fee_billtime = $_POST["fee_billtime"];
$fee_ot = isset($_POST["fee_ot"]) ? $_POST["fee_ot"] : 0;
$fee_1m = isset($_POST["fee_1m"]) ? $_POST["fee_1m"] : 0;
$fee_3m = isset($_POST["fee_3m"]) ? $_POST["fee_3m"] : 0;
$fee_6m = isset($_POST["fee_6m"]) ? $_POST["fee_6m"] : 0;
$fee_12m = isset($_POST["fee_12m"]) ? $_POST["fee_12m"] : 0;
$fee_24m = isset($_POST["fee_24m"]) ? $_POST["fee_24m"] : 0;
$fee_36m = isset($_POST["fee_36m"]) ? $_POST["fee_36m"] : 0;
$fee_other = isset($_POST["fee_other"]) ? $_POST["fee_other"] : 0;

$adm_timeadded = time();
$adm_addedby = 1;
$adm_active = $_POST["adm_active"];
$adm_start = $_POST["adm_start"];
$adm_expires = $_POST["adm_expires"];
$adm_soldlmt = $_POST["adm_soldlmt"];

    try
    {
        $req = $obj_sqlsvr->prepare("INSERT INTO pricelist(id, servcatid, sortorder, sysname, friendlyname_fr, friendlyname_en, fee_ot, fee_1m, fee_3m, fee_6m, fee_12m, fee_24m, fee_36m, fee_other, fee_billtime, adm_timeadded, adm_addedby, adm_active, adm_start, adm_expires, adm_soldlmt)
                VALUES(NULL, :servcatid,:sortorder,:sysname,:friendlyname_fr,:friendlyname_en,:fee_ot,:fee_1m,:fee_3m,:fee_6m,:fee_12m,
:fee_24m,:fee_36m,:fee_other,:fee_billtime,:adm_timeadded,:adm_addedby,:adm_active,:adm_start,:adm_expires,:adm_soldlmt)");
        $req->bindParam(':servcatid', $servcatid);
        $req->bindParam(':sortorder', $sortorder);
        $req->bindParam(':sysname', $sysname);
        $req->bindParam(':friendlyname_fr', $friendlyname_fr);
        $req->bindParam(':friendlyname_en', $friendlyname_en);
        $req->bindParam(':fee_ot', $fee_ot);
        $req->bindParam(':fee_1m', $fee_1m);
        $req->bindParam(':fee_3m', $fee_3m);
        $req->bindParam(':fee_6m', $fee_6m);
        $req->bindParam(':fee_12m', $fee_12m);
        $req->bindParam(':fee_24m', $fee_24m);
        $req->bindParam(':fee_36m', $fee_36m);
        $req->bindParam(':fee_other', $fee_other);
        $req->bindParam(':fee_billtime', $fee_billtime);
        $req->bindParam(':adm_timeadded', $adm_timeadded);
        $req->bindParam(':adm_addedby', $adm_addedby);
        $req->bindParam(':adm_active', $adm_active);
        $req->bindParam(':adm_start', $adm_start);
        $req->bindParam(':adm_expires', $adm_expires);
        $req->bindParam(':adm_soldlmt', $adm_soldlmt);
        $res = $req->execute();
    }
    catch(Exception $e)
    {
        echo 'Erreur : '.$e->getMessage();
    } 
```

表结构：![表结构](../Images/f82bb2154eea94a1d23491a7eeb81746.png)

SQL格式的表结构（再次）：

```
SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";
CREATE TABLE IF NOT EXISTS `pricelist` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `servcatid` int(11) NOT NULL,
  `order` int(11) DEFAULT NULL,
  `sysname` varchar(100) NOT NULL,
  `friendlyname_fr` varchar(100) NOT NULL,
  `friendlyname_en` varchar(100) NOT NULL,
  `fee_ot` decimal(10,2) DEFAULT NULL,
  `fee_1m` decimal(10,2) DEFAULT NULL,
  `fee_3m` decimal(10,2) DEFAULT NULL,
  `fee_6m` decimal(10,2) DEFAULT NULL,
  `fee_12m` decimal(10,2) DEFAULT NULL,
  `fee_24m` decimal(10,2) DEFAULT NULL,
  `fee_36m` decimal(10,2) DEFAULT NULL,
  `fee_other` decimal(10,4) DEFAULT NULL,
  `fee_billtime` int(2) NOT NULL DEFAULT '0',
  `adm_timeadded` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `adm_addedby` int(11) NOT NULL,
  `adm_active` tinyint(1) NOT NULL DEFAULT '1',
  `adm_start` datetime DEFAULT NULL,
  `adm_expires` datetime DEFAULT NULL,
  `adm_soldlmt` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ; 
```

你看到任何错误吗？如果是这样，你能告诉我它在哪里吗？

非常感谢你，杰里米

**编辑** 我在我的代码和表结构中都将字段“order”重命名为“sortorder”（感谢Pekka），因为它是一个保留字。还是行不通。

**编辑** 在准备和执行命令周围添加 Try/Catch。/ 使用 echo 命令代替 die 命令来显示错误。（感谢大卫斯特拉坎）

**编辑** 查询中缺少 ' （感谢 Drew Pierce）

**EDIT** PDO 查询现在已参数化（感谢 Andy Lester），仍然没有错误消息并且表中没有行。

**示例查询（使用 phpMyAdmin）**

```
INSERT INTO pricelist(id, servcatid, sysname, sortorder, friendlyname_fr, friendlyname_en, fee_ot, fee_1m, fee_3m, fee_6m, fee_12m, fee_24m, fee_36m, fee_other, fee_billtime, adm_timeadded, adm_addedby, adm_active, adm_start, adm_expires, adm_soldlmt)
VALUES(NULL, '2','demo',NULL,'DEMO','DEMO', '12','','','','','','','','1', '1353533266','1','1','','','1') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T20:56:17.110

请参阅[这篇文章](https://stackoverflow.com/questions/3726505/how-to-squeeze-error-message-out-of-pdo)，了解如何使 PDO 输出错误消息。

您的具体错误是`order`mySQL 中的保留字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T21:17:47.753

**问题是单引号基本上围绕插入 stmt 右侧的所有值变量，它们只属于字符串、时间戳和日期时间，但不属于整数、小数、小整数。**

```
<?php

    $host="localhost"; // Host name 
    $username="jonah"; // Mysql username 
    $passw="password123"; // Mysql password 
    $db_name="main"; // Database name 

try
{
    $obj_sqlsvr = new PDO('mysql:host=localhost;dbname=main;charset=UTF-8', $username, $passw);

}
catch(Exception $e)
{
    echo 'Erreur : '.$e->getMessage();
}

$servcatid = 11;//$_POST["servcatid"];
$sysname = 'ssss';//$_POST["sysname"];
$friendlyname_fr = 'ff';//$_POST["friendlyname_fr"];
$friendlyname_en = 'ffe';//$_POST["friendlyname_en"];

$fee_billtime = 11;//$_POST["fee_billtime"];
$fee_ot = isset($_POST["fee_ot"]) ? $_POST["fee_ot"] : 0;
$fee_1m = isset($_POST["fee_1m"]) ? $_POST["fee_1m"] : 0;
$fee_3m = isset($_POST["fee_3m"]) ? $_POST["fee_3m"] : 0;
$fee_6m = isset($_POST["fee_6m"]) ? $_POST["fee_6m"] : 0;
$fee_12m = isset($_POST["fee_12m"]) ? $_POST["fee_12m"] : 0;
$fee_24m = isset($_POST["fee_24m"]) ? $_POST["fee_24m"] : 0;
$fee_36m = isset($_POST["fee_36m"]) ? $_POST["fee_36m"] : 0;
$fee_other = isset($_POST["fee_other"]) ? $_POST["fee_other"] : 0;

$adm_timeadded = '2012-12-01';
$adm_addedby = 1;
$adm_active = 2;//$_POST["adm_active"];
$adm_start = '2012-12-01';//time();//$_POST["adm_start"];
$adm_expires = '2012-12-01';//time();//$_POST["adm_expires"];
$adm_soldlmt = 12;//$_POST["adm_soldlmt"];

try
{
    $req = $obj_sqlsvr->prepare("INSERT INTO pricelist(servcatid, sysname, sortorder, friendlyname_fr, friendlyname_en, fee_ot, fee_1m, fee_3m, fee_6m, fee_12m, fee_24m, fee_36m, fee_other, fee_billtime, adm_timeadded, adm_addedby, adm_active, adm_start, adm_expires, adm_soldlmt) VALUES($servcatid,'$sysname',NULL,'$friendlyname_fr','$friendlyname_en', $fee_ot,$fee_1m,$fee_3m,$fee_6m,$fee_12m,$fee_24m,$fee_36m,$fee_other,$fee_billtime, '$adm_timeadded',$adm_addedby,$adm_active,'$adm_start','$adm_expires',$adm_soldlmt)");
    $res = $req->execute();
}
catch(Exception $e)
{
    echo 'Erreur : '.$e->getMessage();
}
?> 
```

+----+------------+-----------+---------+---------- --------+-----+--------+--------+------ --+--------+---------+---------+---------+-------- ---+--------------+---------+---------- ----+------------+---------------------+---------- ------------+-------------+ | 编号 | 服务卡ID | 排序 | 系统名 | 友好名称_fr | 友好名称_zh | 费用 | 费用_1m | 费用_3m | 费用_6m | 费用_12m | 费用_24m | 费用_36m | 费用_其他 | fee_billtime | adm_time 已添加 | adm_addby | adm_active | adm_start | adm_expires | adm_soldlmt | +----+------------+-----------+---------+---------- --------+-----+--------+--------+------ --+--------+---------+---------+---------+-------- ---+--------------+---------+---------- ----+------------+---------------------+---------- ------------+-------------+ | 1 | 11 | 空 | ssss | ff | 菲| 0.00 | 0.00 | 0.00 | 0.00 | 0.00 | 0.00 | 0.00 | 0.0000 | 11 | 2012-12-01 00:00:00 | 1 | 2 | 2012-12-01 00:00:00 | 2012-12-01 00:00:00 | 12 | +----+------------+-----------+---------+---------- --------+-----+--------+--------+------ --+--------+---------+---------+---------+-------- ---+--------------+---------+---------- ----+------------+---------------------+---------- ------------+-------------+ 00 | 12 | +----+------------+-----------+---------+---------- --------+-----+--------+--------+------ --+--------+---------+---------+---------+-------- ---+--------------+---------+---------- ----+------------+---------------------+---------- ------------+-------------+ 00 | 12 | +----+------------+-----------+---------+---------- --------+-----+--------+--------+------ --+--------+---------+---------+---------+-------- ---+--------------+---------+---------- ----+------------+---------------------+---------- ------------+-------------+

# objective-c - 应用内购买崩溃应用

> ID：13501876
> 
> 赞同：4
> 
> 时间：2012-11-21T20:50:38.443
> 
> 标签：objective-c, iphone, in-app-purchase, app-store

我有一个刚刚提交更新的 iOS 应用程序。该应用程序的开发版本（模拟器和我的 4S）从未崩溃，并且运行良好。该应用程序今天和 IAP 一样获得批准，但今天早上我意识到 iAP 并未“批准购买”。我刚刚清除它以进行购买，但应用程序仍然崩溃。iPhone给出的错误（运行应用商店版本）给出了错误：

`<Error>: *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 0 beyond bounds for empty array'`

这是发生这种情况的代码：

```
- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:
(SKProductsResponse *)response
{
    NSArray *myProduct = response.products;
    //this line is where the error occurs
    noAdProduct = [myProduct objectAtIndex:0];
    if (![[[NSUserDefaults standardUserDefaults] objectForKey:@"the id here"] boolValue]) {
        adCell.detailTextLabel.text = [NSString stringWithFormat:@"$%@", noAdProduct.price];
        adCell.userInteractionEnabled = YES;
        adCell.accessoryType = UITableViewCellAccessoryNone;
        adCell.accessoryView = nil;
        [self.tableView reloadData];
    }
} 
```

在请求可用产品列表时会发生这种情况，这显然会在模拟器中返回产品，而不是在应用程序中。我刚刚添加了一个防范措施，但我需要再次将其提交到 App Store。

有谁知道为什么 iAP 没有出现在 App Store 版本中？我是否需要等待“已批准出售”选项才能访问 Apple 的服务器？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T23:51:46.300

显然`myProduct`数组是空的。为什么会发生这种情况是另一个问题，但您不应该在没有`objectAtIndex`确保请求的索引存在的情况下调用。

```
if ([myProduct count] > 0)
    noAdProduct = [myProduct objectAtIndex:0];
else
   // Deal with the situation when the array is empty. 
```

# javascript - 根据表格中其他的文本添加倒数计时器

> ID：13501879
> 
> 赞同：4
> 
> 时间：2012-11-21T20:50:45.967
> 
> 标签：javascript, jquery, html

我正在尝试使用 jQuery 根据同一个表中另一个 td 的文本向 td添加一个倒数计时器（使用这个[http://keith-wood.name/countdown.html ）。](http://keith-wood.name/countdown.html)

例如，我的表如下所示，如果状态 td 包含文本“已接收”，我想将计时器添加到 time_remaining td。

```
<table>
    <tr>
        <td class="status">Completed</td>
       <td class="time_received"></td>
       <td class="time_remaining"></td>
    </tr>
    <tr>
        <td class="status">Received</td>
        <td class="time_received"></td>
        <td class="time_remaining"></td>
    </tr>        
</table> 
```

我的 jQuery 目前看起来像下面这样，但我正在使用`$(this).next()`它只会将计时器添加到 time_received td，但我需要将它添加到 time_remaining td，我可以使用什么来代替`.next()`？任何帮助，将不胜感激。

```
 var newCount = new Date(); 
 newCount.setMinutes(newCount.getMinutes() + 30);
 $('td.status:contains(Received)').each(function() {
   $(this).next().countdown({
        until: newCount, 
        format: 'M',
        layout: "{mn} min"
        });
​});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:57:36.837

`.next()`有一个带选择器的重载，因此您可以使用：

```
var newCount = new Date(); 
newCount.setMinutes(newCount.getMinutes() + 30);
$('td.status:contains(Received)').each(function() {
    $(this).next(".time_remaining").countdown({
        until: newCount, 
        format: 'M',
        layout: "{mn} min"
    });
}); 
```

见这里：[JQuery .next()](http://api.jquery.com/next/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T20:57:48.470

您可以将选择器传递给 next 并使用索引来指定哪个 - 在您的情况下，只有一个具有 time_remaining 类的兄弟，所以它是相同的

```
.next(".time_remaining")[0] 
```

或者，如果你总是想要第二个兄弟姐妹，你可以这样做

```
.nextAll()[1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:57:56.713

你仍然可以使用 .next()，只需传入你想要的 td 的选择器。

```
$(this).next('.time_remaining').countdown({}); 
```

查看文档以获取更多信息： [http ://api.jquery.com/next/](http://api.jquery.com/next/)

# php - SQL 调用中变量的转义引号

> ID：13501883
> 
> 赞同：0
> 
> 时间：2012-11-21T20:50:59.820
> 
> 标签：php, sql

如何在 SQL 语句中为变量添加单引号？如果我用 'jeremy' 代替 '\$user'\ 变量，它会完美运行。我不知道如何转义 SQL 语句中变量的引号。谢谢您的帮助。

```
 $resultArticles = mysql_query("SELECT COUNT(id) FROM articleList WHERE user = '\$user'\ ");
  $totalArticlesLeaderboard = mysql_result($resultArticles, 0);
  echo "<strong>Total Articles: </strong>" . $totalArticlesLeaderboard; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T21:08:04.500

我试图找到您问题的合适副本，但我只找到了基于古老`mysql_*`功能的真正骗子。`mysql_*`PHP 社区不再维护这些函数（就像您正在使用的函数一样）（现在已经有一段时间了），并且[弃用过程](http://j.mp/Rj2iVR)已经开始。看到[**红框**](http://j.mp/Te9zIL)了吗？

您真的应该尝试选择更好的[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。这两个选项都应该没问题。恕我直言 PDO 有更好的 API，但`mysqli`更倾向于 mysql（在大多数情况下，PDO 会做任何你想做的事情）。

有了这两个“新”API，还可以使用[*准备好的语句*](http://j.mp/T9hLWi)。使用准备好的语句，您不必担心在将值插入查询之前手动转义值。

使用 PDO API 的示例如下：

```
$db = new PDO('mysql:dbname=dbtest;host=127.0.0.1;charset=utf8', 'user', 'pass');

$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$stmt = $db->prepare('SELECT COUNT(id) FROM articleList WHERE user = :user');
$stmt->execute(array('user' => $user)); 
```

如您所见，这些值并未直接插入到查询中，而是使用占位符。此代码将使人们无法将任意 SQL 注入到您的查询中。而且您不再需要进行任何转义。

如果您在决定 PDO 还是 mysql 时需要更多帮助，请查看[文档](http://php.net/manual/en/mysqlinfo.api.choosing.php)以获取更多信息。如果您选择 PDO，您可以在[此处](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)找到有关该主题的优秀教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:56:43.500

测试这个

```
$resultArticles = sprintf("SELECT COUNT(id) FROM articleList WHERE user='%s", 
mysql_real_escape_string($user)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T21:04:30.563

如果变量 $user 包含任何特殊字符，则需要对这些字符进行转义，如第一个答案所示。如果您没有可用的 mysql_real_escape_string() 函数，请使用 addlashes()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T20:53:45.707

您应该能够删除转义字符：

```
$user = mysql_real_escape_string($user);
$resultArticles = mysql_query("SELECT COUNT(id) FROM articleList WHERE user = '$user'"); 
```

如果您遇到变量问题，您可以随时结束字符串并连接。我经常这样做是为了避免混淆：

```
$user = mysql_real_escape_string($user);
$resultArticles = mysql_query("SELECT COUNT(id) FROM articleList WHERE user = '".$user."'"); 
```

正如 PeeHaa 所说，请确保您尝试使用[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)。

不要忘记转义所有用户输入，否则它们可能会破坏您的数据库。如果你使用 MySQLi，你可以使用[mysqli::real_escape_string](http://php.net/manual/en/mysqli.real-escape-string.php)。清理所有用户数据是绝对必要的。不要跳过这个！

# udp - 溢出的 UDP 缓冲区

> ID：13501886
> 
> 赞同：0
> 
> 时间：2012-11-21T20:51:08.943
> 
> 标签：udp, overflow, buffer, packet

在 Linux 中，UDP 是否对传入和传出数据包使用相同的缓冲区？

如果我想溢出这个缓冲区，我用 C 还是 Python 编码都没有关系，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:05:48.883

linux内核没有为每个数据包定义单个或一组缓冲区，而是在数据向上和向下传递到/从更高层（2及更高层）时动态创建和销毁许多缓冲区。

请参阅有关 linux 网络的这篇非常详细的文章，尤其是第 4 页，了解如何将缓冲区连接到 nic 进行传输，然后在传输完成后立即销毁：[http ://www.linuxjournal.com/article/ 1312?页=0,0](http://www.linuxjournal.com/article/1312?page=0,0)

至于溢出缓冲区，显然你需要一个能够手动内存操作的语言，但是 linux 缓冲区是一个与控制结构相关联的内存位置，所以你可能无法在没有控制系统干扰的情况下溢出它。

# c++ - 错误 C2248：无法访问在类中声明的受保护成员

> ID：13501889
> 
> 赞同：2
> 
> 时间：2012-11-21T20:51:25.637
> 
> 标签：c++, boost

```
class TClass
{
    class EmbeddClass
    {
        public:
        ....

        protected:
            virtual ~EmbeddClass() {}

    }   

    boost::scoped_ptr<EmbeddClass> scpEmbeddClass;
} 
```

vs2010 抱怨上面的代码。我可以通过将 定义`~EmbeddClass`为公共函数来解决问题。

问题> 这个问题的原因是什么？是因为 scoped_ptr 的析构函数无法访问 protected `~EmbeddClass`吗？在我看来 shared_ptr 没有这样的问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:55:30.487

> 问题> 这个问题的原因是什么？是因为 scoped_ptr 的析构函数无法访问受保护的 ~EmbeddClass 吗？

是的，这正是问题所在。

> 在我看来 shared_ptr 没有这样的问题。

我只能假设您不是在存储`EmbeddClass`对象，而是在`shared_ptr`. 在这种情况下，共享指针的构造函数将创建一个*删除器*，该删除器将调用最派生类型的析构函数（如`shared_ptr`构造函数 / `reset()`/.. 所示）。因为`shared_ptr`即使类型提到了基类，派生最多的类型也会被销毁，所以它不会调用基类析构函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T21:22:32.873

> 是因为 scoped_ptr 的析构函数无法访问受保护的 ~EmbeddClass 吗？

是的。

> 在我看来 shared_ptr 没有这样的问题。

注意你可以有多个`shared_ptr`拥有一个资源，如果你不初始化它或者使用次数超过1，它永远不需要调用删除器。但是，`scoped_ptr`它更像是`unique_ptr`，它对资源拥有*唯一的所有权*，并确保即使您不初始化它也可以删除指针。

基本上，`shared_ptr`不拥有资源的 a 不需要访问受保护的析构函数，`scoped_ptr`而`unique_ptr`确实需要访问。

# android - 如何按中心对齐按钮并进行偏移

> ID：13501891
> 
> 赞同：4
> 
> 时间：2012-11-21T20:51:41.983
> 
> 标签：android, layout, android-view, android-button

我想在中心对齐按钮并进行偏移我尝试过这样的方法[有没有办法在Android中从中心偏移视图？](https://stackoverflow.com/questions/11690274/is-there-a-way-to-offset-a-view-from-center-in-android)但它不起作用。例如：

```
<View
android:id="@+id/fakeView"
android:layout_width="10dp"
android:layout_height="10dp"
android:layout_centerInParent="true"
android:paddingTop="80dp"
android:background="#FFAABB" /> 
```

仍然保持中心位置

有没有办法像这样完成：

![在此处输入图像描述](../Images/671651341c9bad371f7a7622adfa55d3.png)

更新：

我的完整布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
     <ImageButton 
         android:layout_width="100dp"
         android:layout_height="100dp"
         android:layout_centerHorizontal="true"
         android:layout_marginLeft="100dp"
         />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T21:12:48.920

一种方法是使用在相对布局内居中的锚视图，将按钮设置在其右侧并设置边距。

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <View
            android:id="@+id/anchor"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_centerInParent="true" />

         <ImageButton 
             android:layout_width="100dp"
             android:layout_height="100dp"
             android:layout_marginRight="50dp"
             android:layout_toRightOf="@+id/anchor"
             />

    </RelativeLayout> 
```

或尝试：

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"  >

         <ImageButton 
             android:layout_width="100dp"
             android:layout_height="100dp"
             android:layout_marginRight="50dp"
             />

    </RelativeLayout> 
```

# python - 如何编写 Python 装饰器来增加堆栈深度？

> ID：13501896
> 
> 赞同：12
> 
> 时间：2012-11-21T20:52:00.240
> 
> 标签：python, decorator

## 背景

在玩耍时，我经常编写简单的递归函数，如下所示：

```
def f(a,b):
    if a>=0 and b>=0:
        return min( f(a-1,b) , f(b,a-1) ) # + some cost that depends on a,b
    else:
        return 0 
```

（例如，在计算加权编辑距离或评估递归定义的数学公式时。）

然后我使用记忆装饰器自动缓存结果。

## 问题

当我尝试类似 f(200,10) 的东西时，我得到：

```
RuntimeError: maximum recursion depth exceeded 
```

这是预期的，因为递归实现耗尽了 Python 的堆栈空间/递归限制。

## 解决方法

我通常通过以下方法之一解决此问题：

*   使用 sys.setrecursionlimit 增加递归限制（仅适用于大约 1000 深度）
*   使用 for 循环为较小的值填充缓存
*   更改函数以将列表用作手动堆栈（通过追加和弹出调用）（换句话说，从递归实现移动到迭代实现）
*   使用另一种编程语言

但我发现所有这些都很容易出错。

## 问题

有没有办法编写一个@Bigstack 装饰器来模拟拥有一个非常大的堆栈的效果？

请注意，我的函数通常会进行多次递归函数调用，因此这与尾递归不同 - 我确实希望将每个函数的所有内部状态保存在堆栈中。

## 我试过的

我一直在考虑使用生成器表达式列表作为我的堆栈。通过探测堆栈帧，我可以确定函数何时被递归调用，然后触发异常以返回装饰器代码。但是，我无法想出一种方法将这些想法粘合在一起以制造出真正有效的东西。

或者，我可以尝试访问函数的抽象语法树，并尝试将调用转换为递归函数以产生语句，但这似乎是朝着错误的方向前进。

有什么建议么？

编辑

看起来我确实在滥用 Python，但我一直在考虑的另一种方法是为每个块（例如 500 个堆栈帧）使用不同的线程，然后在每对连续的线程之间插入队列——一个用于参数的队列，另一个用于返回值的队列。（每个队列最多有一个条目。）我认为这可能由于某种原因不起作用 - 但我可能只会在我尝试实现它之后才能弄清楚为什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T06:31:53.770

要绕过递归限制，您可以捕获`RuntimeError`异常以检测堆栈空间何时用完，然后返回一个连续函数，当调用该函数时，在空间用完的级别重新启动递归。调用它（及其返回值，等等），直到你得到一个值，然后从顶部重试。一旦你记住了较低的级别，较高的级别就不会遇到递归限制，所以最终这会起作用。将重复调用直到它工作在包装函数中。基本上，这是您预热缓存想法的懒惰版本。

这是一个简单的递归“将数字从 1 添加到 n”函数的示例。

```
import functools

def memoize(func):
    cache = {}
    @functools.wraps(func)
    def wrapper(*args, **kwargs):
        key = args, tuple(sorted(kwargs.items()))
        if key in cache:
            return cache[key]
        else:
            result = func(*args, **kwargs)
            if not callable(result):
                cache[key] = result
            return result
    return wrapper

@memoize
def _addup(n):
    if n < 2:
        return n
    else:
        try:
            result = _addup(n - 1)
        except RuntimeError:
            return lambda: _addup(n)
        else:
            return result if callable(result) else result + n

def addup(n):
    result = _addup(n)
    while callable(result):
        while callable(result):
            result = result()
        result = _addup(n)
    return result

assert addup(5000) == sum(xrange(5001)) 
```

与其在调用链中一直返回 lambda 函数，我们可以引发一个异常来短路它，这既提高了性能又简化了代码：

```
# memoize function as above, or you can probably use functools.lru_cache

class UnwindStack(Exception):
    pass

@memoize
def _addup(n):
    if n < 2:
        return n
    else:
        try:
            return _addup(n - 1) + n
        except RuntimeError:
            raise UnwindStack(lambda: _addup(n))

def _try(func, *args, **kwargs):
    try:
        return func(*args, **kwargs)
    except UnwindStack as e:
        return e[0]

def addup(n):
    result = _try(_addup, n)
    while callable(result):
        while callable(result):
            result = _try(result)
        result = _try(_addup, n)
    return result 
```

不过，这仍然很不优雅，并且仍然有相当多的开销，我无法想象你会如何制作一个装饰器。我猜 Python 并不适合这种事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T17:51:05.590

这是一个使用生成器表达式列表作为堆栈的实现：

```
def run_stackless(frame):
    stack, return_stack = [(False, frame)], []
    while stack:
        active, frame = stack.pop()
        action, res = frame.send(return_stack.pop() if active else None)
        if action == 'call':
            stack.extend([(True, frame), (False, res)])
        elif action == 'tail':
            stack.append((False, res))
        elif action == 'return':
            return_stack.append(res)
        else:
            raise ValueError('Unknown action', action)
    return return_stack.pop() 
```

要使用它，您需要根据以下规则转换递归函数：

```
 return expr                    -> yield 'return', expr
 recursive_call(args...)        -> (yield 'call', recursive_call(args...))
 return recursive_call(args...) -> yield 'tail', recursive_call(args...) 
```

例如，成本函数为`a * b`，您的函数变为：

```
def f(a,b):
    if a>=0 and b>=0:
        yield 'return', min((yield 'call', f(a-1,b)),
                            (yield 'call', f(b,a-1))) + (a * b)
    else:
        yield 'return', 0 
```

测试：

```
In [140]: run_stackless(g(30, 4))
Out[140]: 410 
```

在 Python 2.6.2 中，与直接调用相比，它似乎提供了约 8-10 倍的性能损失。

该`tail`动作用于尾递归：

```
def factorial(n):
    acc = [1]
    def fact(n):
        if n == 0:
            yield 'return', 0
        else:
            acc[0] *= n
            yield 'tail', fact(n - 1)
    run_stackless(fact(n))
    return acc[0] 
```

向生成器递归样式的转换相当容易，并且可以作为字节码破解来完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T19:44:35.583

这种方法将记忆和增加的堆栈深度结合到单个装饰器中。

我生成了一个线程池，每个线程负责 64 层堆栈。
线程只创建一次并重新使用（但目前从未删除）。

队列用于在线程之间传递信息，但请注意，只有与当前堆栈深度对应的线程才会真正有工作要做。

我的实验表明，这为简单的递归函数增加了大约 10% 的开销（对于更复杂的函数应该更少）。

```
import threading,Queue

class BigstackThread(threading.Thread):

    def __init__(self,send,recv,func):
        threading.Thread.__init__( self )
        self.daemon = True
        self.send = send
        self.recv = recv
        self.func = func

    def run(self):
        while 1:
            args = self.send.get()
            v = self.func(*args)
            self.recv.put(v)

class Bigstack(object):

    def __init__(self,func):
        self.func = func
        self.cache = {}
        self.depth = 0
        self.threadpool = {}

    def __call__(self,*args):
        if args in self.cache:
            return self.cache[args]
        self.depth+=1
        if self.depth&63:
            v = self.func(*args)
        else:
            T=self.threadpool
            if self.depth not in T:
                send = Queue.Queue(1)
                recv = Queue.Queue(1)
                t = BigstackThread(send,recv,self)
                T[self.depth] = send,recv,t
                t.start()
            else:
                send,recv,_ = T[self.depth]
            send.put(args)
            v = recv.get()

        self.depth-=1
        self.cache[args]=v
        return v

@Bigstack
def f(a,b):
    if a>=0 and b>=0:
        return min(f(a-1,b),f(b-1,a))+1
    return 0 
```

# c++ - 无法使用 Eigen 库编译 ChibiOS

> ID：13501898
> 
> 赞同：1
> 
> 时间：2012-11-21T20:52:12.180
> 
> 标签：c++, compiler-errors, cross-compiling, eigen, chibios

我想在 Raspberry Pi 上使用带有 Eigen 的 ChibiOS，但是当我包含 Eigen 库时出现错误：

```
Linking build/ch.elf
/opt/arm_gcc/bin/../lib/gcc/arm-none-eabi/4.7.2/../../../../arm-none-eabi/lib/libc.a(lib_a-sbrkr.o): In function `_sbrk_r':
sbrkr.c:(.text+0x18): undefined reference to `_sbrk'
collect2: error: ld returned 1 exit status
make: *** [build/ch.elf] Error 1 
```

我正在使用 Sourcery CodeBench Lite 4.7.2 交叉编译器，这是 make 命令：

```
arm-none-eabi-gcc -c -mcpu=arm7tdmi -O2 -ggdb -fomit-frame-pointer -falign-functions=16 -ffunction-sections -fdata-sections -Wall -Wextra -Wstrict-prototypes -Wa,-alms=build/lst/ -mno-thumb-interwork -MD -MP -MF .dep/build.d -I. -I../../os/ports/GCC/ARM -I../../os/ports/GCC/ARM/BCM2835 -I../../os/kernel/include -I../../os/hal/include -I../../os/hal/platforms/BCM2835 -I../../boards/RASPBERRYPI_MODB -I../../os/various -I../../os/contrib -I../../Eigen main.c -o main.o 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T22:23:11.563

该函数`_sbrk`听起来很像用于内存分配的系统调用。你确定你的目标系统支持`sbrk(2)`系统调用吗？无论如何，询问`_sbrk`Raspberry Pi 可能会获得更好的结果。您可能想检查[这个问题](https://stackoverflow.com/questions/5764414/undefined-reference-to-sbrk)，这似乎是一个类似的问题。

# php - 如何使用 PHP/MySQL/FPDF 从数据库中生成查询特定数据集的 PDF 报告？

> ID：13501899
> 
> 赞同：-3
> 
> 时间：2012-11-21T20:52:22.053
> 
> 标签：php, mysql, report, fpdf

我的项目包括根据用户查询生成复杂的报告，并以特定设计将其打印在 A4 大小的纸张上。它还要求用户进行多数据查询，或分组数据查询。例如 - 用户可能会选择标准 3 以上的所有学生，因此应选择此类别下的所有学生数据并根据预定义的报告设计转换为多页 PDF 报告。

用户不希望逐页打印，因为当需要大量数据时会变得乏味。

请指导我应该如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:55:30.200

[http://html2pdf.fr/de/default](http://html2pdf.fr/de/default)

这是易于使用的 Html2PDF，它还提供了如何使用它的好例子 =)

只需定义类似表格的内容，然后将其以 css 格式输出到 PDF 文件。

# javascript - 如何允许鼠标移动图像并防止图像拖动

> ID：13501900
> 
> 赞同：2
> 
> 时间：2012-11-21T20:52:41.270
> 
> 标签：javascript, jquery, image

我有一个非常简单的图像大小调整脚本。我想弄清楚的是如何防止重影图像拖动，同时仍然允许用户在 mousedown /mousemove 上拖动光标并调整图像大小。这是我到目前为止所拥有的，这可能吗？目前，我将其设置为双击以允许使用 mousemove 调整大小，但我想将其设置为在 mousedown 允许 mousemove 调整图像大小的位置，然后在 mouseup 时取消调整大小。

提前致谢。

代码：

```
$(".grid_content > img").live('mousedown',function(e){
    $(this).attr('id','image');
    $(this).css('cursor','se-resize');
    var positionX;
    var startWidth;
    var image = document.getElementById('image');
    if(!e){e = window.event};
    positionX = (e.clientX);
    startWidth = image.width;
    image.onmousemove = function(e) {
        if(!e){e = window.event};
        image.style.width = (startWidth + (e.clientX - positionX)) + 'px';
    };
    image.onmousedown = function() {
        image.onmousemove = null;
        positionX = null;
        startWidth = null;
    };
}); 
```

试过这个但没有运气，禁用整个拖动的东西：

```
$('.grid_content > img').bind("dragstart",function(e){
    e.preventDefault();
}); 
```

# .net - 常规站点和移动站点的 OAuth 登录获取不同的提供者用户 ID

> ID：13501902
> 
> 赞同：2
> 
> 时间：2012-11-21T20:52:45.640
> 
> 标签：.net, oauth, asp.net-mvc-4

我的网站允许用户使用用户名和密码或使用 OAuth 使用他们的 facebook、twitter、microsoft 或 google 帐户进行注册。现在我正在构建一个移动网站，我想提供相同的注册/登录方式。

我遇到的问题是 OAuth 根据请求身份验证的 url 为相同的用户返回不同的 id。由于我的移动网站位于不同的子域上，因此返回的 id 不同，因此无法检测用户是否已经在常规网站上注册。

有没有一种通用的方法来处理这种情况？

# objective-c - 错误：缺少@end 错误：预期标识符或

> ID：13501904
> 
> 赞同：0
> 
> 时间：2012-11-21T20:52:47.237
> 
> 标签：objective-c, ios

我知道有类似的问题，但我仍然无法解决。

```
 error: missing @end [1]
    error: expected identifier or '(' [1]
    error: expected a type [1] 
```

（在头文件中获取）

我用同名的新空文件替换了这个文件 - 仍然得到这个错误？

```
#import "Storage.h"

@implementation Storage

@end

#import <Foundation/Foundation.h>

@interface Storage : NSObject

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T20:58:12.363

**PREVIOUS**头文件可能不完整。类接口中缺少 @end。请参阅[https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocDefiningClasses.html#//apple_ref/doc/uid/TP30001163-CH12-SW1](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocDefiningClasses.html#//apple_ref/doc/uid/TP30001163-CH12-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:57:18.003

您是在导入 .m 文件而不是 .h 吗？

像这样，*显然是错误的，但是自动完成很容易发生*

```
#import "myHeader.m" 
```

# java - 检测线程是否排队/过度工作

> ID：13501906
> 
> 赞同：1
> 
> 时间：2012-11-21T20:52:53.693
> 
> 标签：java, multithreading, performance

在 Java 中，我遇到许多 TCP 连接 (MINA) 正在为给定线程创建工作的情况，有时该线程会过度工作，排队等待。我想知道一种在进程中监控这一点的好方法，以便应用程序在其线程陷入困境时可以减少其工作量。基本上我知道这样做的唯一方法是在线程上删除监视任务并偶尔轮询以查看它们是否已完成，但我觉得应该有更直接的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T21:20:10.623

我认为诀窍是*不要*为线程排队作业，而是拥有一个可以处理您的任务的线程池。然后，您可以更好地平衡处理您的任务的线程数。

您可能希望设置初始线程数，但如果阻塞队列已满，则增加它。重要的是要意识到队列必须在分配超过初始大小的第一个线程*之前填充。*我知道这是违反直觉的，但这就是它的工作方式。

```
BlockingQueue<Runnable> queue = new LinkedBlockingQueue<Runnable>(QUEUE_SIZE);
ExecutorService threadPool = new ThreadPoolExecutor(NUM_INITIAL_THREADSs,
            MAX_NUM_THREADS, 0L, TimeUnit.MILLISECONDS, queue);
...
// submit the jobs...
// after submitting the jobs, you need to shutdown the queue
threadPool.shutdown(); 
```

正如@Cratylus 提到的，您可以绑定队列，以便除非有空间，否则不会将其他作业放入队列中。这会减慢工作生产者的速度，但不会使事情运行得更快。定义线程池后，您可以设置一个拒绝处理程序，它将阻止生产者而不是抛出异常。

```
threadPool.setRejectedExecutionHandler(new RejectedExecutionHandler() {
    public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {
       // this will block if the queue is full
       executor.getQueue().put(r);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T21:03:55.653

如果我理解正确，任务排队等待由线程处理，并且您需要一种方法来确保队列不会随着工作负载的增加而无限增长而线程无法赶上。

您可以使用有界队列，这样一旦队列达到容量，您就知道线程无法处理并等待/减少工作量（您的 OP 非常抽象，所以我的回答也是从鸟瞰的角度）直到队列开始清除

# java - 使用 XML DOM 添加命名空间前缀 XML 字符串

> ID：13501907
> 
> 赞同：1
> 
> 时间：2012-11-21T20:52:54.610
> 
> 标签：java, xml, dom, namespaces, xml-namespaces

我想使用 XML DOM 为 XML 字符串中的所有元素添加命名空间前缀。例如，我的字符串是这样来的：

```
<root> 
       <operation>test string</operation> 
       <data> 
              <parameter> 
                     <name>test string</name> 
                     <value>test string</value> 
                 </parameter> 
              <parameter> 
                     <name>test string</name> 
                     <value>test string</value> 
                 </parameter> 
              <parameter> 
                     <name>test string</name> 
                     <value>test string</value> 
                 </parameter> 
          </data> 
   </root> 
```

我想要一个输出 XML 为：

```
<ns0:root xmlns:ns0 = "http://www.tibco.com/schemas/BWStatistics-hawk/Schema.xsd2"> 
       <ns0:operation>test string</ns0:operation> 
       <ns0:data> 
              <ns0:parameter> 
                     <ns0:name>test string</ns0:name> 
                     <ns0:value>test string</ns0:value> 
                 </ns0:parameter> 
              <ns0:parameter> 
                     <ns0:name>test string</ns0:ns0:name> 
                     <ns0:value>test string</ns0:value> 
                 </ns0:parameter> 
              <ns0:parameter> 
                     <ns0:name>test string</ns0:name> 
                     <ns0:value>test string</ns0:value> 
                 </ns0:parameter> 
          </ns0:data> 
   </ns0:root> 
```

我怎样才能在Java中以最佳方式实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:58:29.967

我们可以用 Transformer + SAX 做到这一点。尝试这个：

```
 import java.io.StringWriter;

    import javax.xml.transform.Transformer;
    import javax.xml.transform.TransformerFactory;
    import javax.xml.transform.sax.SAXSource;
    import javax.xml.transform.stream.StreamResult;

    import org.xml.sax.Attributes;
    import org.xml.sax.InputSource;
    import org.xml.sax.SAXException;
    import org.xml.sax.XMLReader;
    import org.xml.sax.helpers.XMLFilterImpl;
    import org.xml.sax.helpers.XMLReaderFactory;

    public class Test {

        public static void main(String args[]) throws Exception {
            XMLReader xmlReader = new XMLFilterImpl(XMLReaderFactory.createXMLReader()) {
                String namespace = "http://www.tibco.com/schemas/BWStatistics-hawk/Schema.xsd2";
                String pref = "ns0:";

                @Override
                public void startElement(String uri, String localName, String qName, Attributes atts)
                        throws SAXException {
                    super.startElement(namespace, localName, pref + qName, atts);
                }

                @Override
                public void endElement(String uri, String localName, String qName) throws SAXException {
                    super.endElement(namespace, localName, pref + qName);
                }
            };
            TransformerFactory tf = TransformerFactory.newInstance();
            Transformer t = tf.newTransformer();
            StringWriter s = new StringWriter();
            t.transform(new SAXSource(xmlReader, new InputSource("test.xml")), new StreamResult(s));
            System.out.println(s);
        }
    } 
```

# google-maps - PanTo 多个标记

> ID：13501915
> 
> 赞同：1
> 
> 时间：2012-11-21T20:53:25.803
> 
> 标签：google-maps, google-maps-api-3

假设我从外部源加载新标记，它看起来像这样：

```
var markersArray = [];

downloadUrl("eventsxml.php", function(data) {
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
          var name = markers[i].getAttribute("id");
          var address = markers[i].getAttribute("id");
          var type = markers[i].getAttribute("venue_type");
          var point = new google.maps.LatLng(
              parseFloat(markers[i].getAttribute("lat")),
              parseFloat(markers[i].getAttribute("lng")));
          var html = "<b>" + name + "</b> <br/>" + address;
          var icon = customIcons[type] || {};
          var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: icon.icon,
            shadow: icon.shadow

          });
          markersArray.push(marker);
          bindInfoWindow(marker, map, infoWindow, html);
        }
      }); 
```

我将如何收集标记的边界，然后在加载后将它们全部平移到视图中？我在谷歌上做了很多搜索，但这些解决方案都不适合我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T21:17:08.820

1.  创建一个空的边界对象（一个[google.maps.LatLngBounds](https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds)）
2.  将所有标记添加到它
3.  用它来居中和缩放你的地图

像这样的东西：

```
var markersArray = [];
// create an empty bounds object
var bounds = new google.maps.LatLngBounds();

downloadUrl("eventsxml.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("id");
      var address = markers[i].getAttribute("id");
      var type = markers[i].getAttribute("venue_type");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));

      // add each marker's location to the bounds
      bounds.extend(point);
      var html = "<b>" + name + "</b> <br/>" + address;
      var icon = customIcons[type] || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon,
        shadow: icon.shadow

      });
      markersArray.push(marker);
      bindInfoWindow(marker, map, infoWindow, html);
    }
    // center and zoom the map to fit the bounds
    map.fitBounds(bounds);
  }); 
```

要平移到该边界的中心，而不是 fitBounds，请使用：

```
map.panTo(bounds.getCenter()); 
```

请注意，这不会更改地图的缩放级别。

[概念证明小提琴](https://jsfiddle.net/geocodezip/xdhyv3ae/)

**代码片段：**

```
// The following example creates complex markers to indicate beaches near
// Sydney, NSW, Australia. 
function initMap() {
  const map = new google.maps.Map(document.getElementById("map"), {
    zoom: 10,
    center: {
      lat: -33.9,
      lng: 151.2
    },
  });
  const infoWindow = new google.maps.InfoWindow();
  var markersArray = [];
  // create an empty bounds object
  var bounds = new google.maps.LatLngBounds();

  // downloadUrl("eventsxml.php", function(data) {
  // var xml = data.responseXML;
  var xml = parseXml(xmlString);
  var markers = xml.documentElement.getElementsByTagName("marker");
  for (var i = 0; i < markers.length; i++) {
    var name = markers[i].getAttribute("id");
    var address = markers[i].getAttribute("id");
    var type = markers[i].getAttribute("venue_type");
    var point = new google.maps.LatLng(
      parseFloat(markers[i].getAttribute("lat")),
      parseFloat(markers[i].getAttribute("lng")));

    // add each marker's location to the bounds
    bounds.extend(point);
    var html = "<b>" + name + "</b> <br/>" + address;
    var icon = customIcons[type] || {};
    var marker = new google.maps.Marker({
      map: map,
      position: point,
      icon: icon.icon,
      title: name
    });
    markersArray.push(marker);
    bindInfoWindow(marker, map, infoWindow, html);
  }
  // center and zoom the map to fit the bounds
  map.fitBounds(bounds);
  // });
}
// Data for the markers consisting of a name, a LatLng and a venue_type.
const xmlString = '<markers><marker id="Bondi Beach" lat="-33.890542" lng="151.274856" venue_type="beach"/><marker id="Coogee Beach" lat="-33.923036" lng="151.259052" venue_type="beach"/><marker id="Cronulla Beach" lat="-34.028249" lng="151.157507" venue_type="beach"/><marker id="Manly Beach" lat="-33.80010128657071" lng="151.28747820854187" venue_type="beach"/><marker id="Maroubra Beach" lat="-33.950198" lng="151.259302" venue_type="beach"/><marker id="Sydney" lat="-33.8688197" lng="151.2092955" venue_type="town"/><marker id="Wagga Wagga" lat="-35.1081689" lng="147.3598323" venue_type="town"/></markers>';

var customIcons = {
  beach: {
    icon: "https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png",
  },
  town: {
    icon: "http://maps.google.com/mapfiles/ms/micons/blue.png",
  }
};

function parseXml(str) {
  if (window.ActiveXObject) {
    var doc = new ActiveXObject('MicrosoftXMLDOM');
    doc.loadXML(str);
    return doc;
  } else if (window.DOMParser) {
    return (new DOMParser).parseFromString(str, 'text/xml');
  }
}

function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
}
```

```
/* Always set the map height explicitly to define the size of the div
       * element that contains the map. */

#map {
  height: 100%;
}

/* Optional: Makes the sample page fill the window. */

html,
body {
  height: 100%;
  margin: 0;
  padding: 0;
}
```

```
<!DOCTYPE html>
<html>

<head>
  <title>Complex Marker Icons</title>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk&callback=initMap&libraries=&v=weekly" defer></script>
  <!-- jsFiddle will insert css and js -->
</head>

<body>
  <div id="map"></div>
</body>

</html>
```

# php - Laravel 很好地从控制器定义默认布局

> ID：13501922
> 
> 赞同：6
> 
> 时间：2012-11-21T20:53:53.530
> 
> 标签：php, laravel

我用谷歌搜索了两个小时，但没有找到答案。也许你可以帮忙。

当我在**MyController**中定义时：

```
class MyController extends Base_Controller {
    public $layout = 'layouts.default';

    public function get_index() {
        $entries = Entry::all();
        return View::make('entries.index')
            ->with('entries', $entries);
        }
    }
} 
```

在**entry\index.blade.php 中**：

```
@section('content')
    <h1>Test</h1>
@endsection 
```

在**layouts\default.blade.php**中：

```
<!DOCTYPE html>
<html>
<body>
    @yield('content')
</body>
</html> 
```

什么都没有显示。我不明白为什么。当我在**MyController**中替换返回部分时：

```
$this->layout->nest('content', 'entries.index', array(
    'entries' => $entries
)); 
```

然后一切正常，但是..它看起来不干净，我不喜欢它。在每个视图中添加时，一切`@layout('layouts.default')`都很好，但它不是 DRY。例如，在 RoR 中，我不需要在 Controller 中做这些事情。

如何在`MyController`一个布局中定义和使用`return View::make`（我认为这是正确的方法）或者如何做得更好？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-21T20:59:28.683

要在控制器中使用布局，您必须指定：

```
public $layout = 'layouts.default'; 
```

您也不能在该方法中返回，因为它会覆盖 $layout 的使用。相反，要将您的内容嵌入您使用的布局中：

```
$this->layout->nest('content', 'entries.index', array('entries' => $entries)); 
```

现在无需在您的方法中返回任何内容。这将解决它。

* * *

编辑：

“美丽的方式？”

```
$this->layout->nest('content', 'entries.index')->with('entries', $entries);

$this->layout->content = View::make('entries.index')->with('entries', $entries);

$this->layout->entries = $entries;
$this->layout->nest('content', 'entries.index'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:56:44.643

它应该是

```
public $layout = 'layouts.default'; 
```

这是链接[模板 - 基础知识](http://laravel.com/docs/views/templating#the-basics)

现在你可以像这样返回你的布局

```
$view = View::make('entries.index')->with('entries', $entries);
$this->layout->content = $view->render(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-29T17:32:13.880

```
 class BaseController extends Controller {

/**
 * Setup the layout used by the controller.
 *
 * @return void
 */

/*Set a layout properties here, so you can globally
  call it in all of your Controllers*/
protected $layout = 'layouts.default';

protected function setupLayout()
{
    if ( ! is_null($this->layout))
    {
        $this->layout = View::make($this->layout);
    }
} 
```

}

类 HomeController 扩展 BaseController {

```
public function showHome()
{   
    /*now you can control your Layout it here */
     $this->layout->title= "Hi I am a title"; //add a dynamic title 
     $this->layout->content = View::make('home');
} 
```

}

参考： [http ://teknosains.com/i/tutorial-dynamic-layout-in-laravel-4](http://teknosains.com/i/tutorial-dynamic-layout-in-laravel-4)

# wcf - 消息大小配额问题

> ID：13501923
> 
> 赞同：0
> 
> 时间：2012-11-21T20:54:02.430
> 
> 标签：wcf, .net-4.0, asp.net-4.0

我有一个 WCF 服务，它返回一个包含几个 int 数组的结构，所有这些数组的组合都不会超过 2500 个值。当我去测试此服务时，我收到以下错误：

**已超出传入邮件 (65536) 的最大邮件大小配额。要增加配额，请在适当的绑定元素上使用 MaxReceivedMessageSize 属性。**

我认为首先不应该出现。我在这里错过了什么吗？也许它可以帮助您知道我正在从 WCF 库执行此服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:11:59.457

您需要处理的地方是web config，您需要添加可以设置数据大小的服务行为。比如像这样，

```
 <behaviors>
      <serviceBehaviors>
        <behavior name="SilverlightWCFLargeDataApplication">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>

      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="SilverlightWCFLargeDataApplication">
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>
      </endpointBehaviors>
    </behaviors> 
```

如果这不起作用，请在此处发布您的网络配置。希望对您有所帮助。

# iphone - 带有情节提要的向导/NSUserDefaults

> ID：13501927
> 
> 赞同：0
> 
> 时间：2012-11-21T20:54:11.117
> 
> 标签：iphone, objective-c, cocoa-touch, ios6

我正在尝试制作一个应用程序，该应用程序的设置具有表格视图，并且如果您想确认信息是否正确并且如果信息正确，则每个表格单元格都将使用按钮重定向到另一个视图，并且如果正确保存数据，那么向导赢了不会再出现。

我很难做到这一点，我尝试了以下方法：

*   [本](http://www.techotopia.com/index.php/An_iOS_6_iPhone_State_Preservation_and_Restoration_Tutorial)教程的状态保存和恢复，但问题是每当用户通过 iOS 多任务栏停止应用程序时，应用程序都不会恢复..
*   将字符串保存到 NSUserDefaults 存储并在应用程序启动时再次读取它，最大的问题是我正在使用故事板来处理启动部分，因此我无法编写代码来启动另一个视图。

所以我现在卡住了，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:27:39.790

使用表视图委托方法：

(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath

您将知道使用 indexPath 选择了哪个单元格。从那里使用 NSUserDefaults 保存您的工作

# html - 带有css的多个背景按钮

> ID：13501932
> 
> 赞同：1
> 
> 时间：2012-11-21T20:54:21.720
> 
> 标签：html, css, sass

我有这个代码（sass）：

```
.orange-button{
  padding: 6px;
  @include gradient-background(bottom, $or1, #fbb752); 
  @include border-radius(5px, 5px, 5px, 5px);
  border: 1px solid #d27d00;
  font-family: “Myriad Pro”, Arial, Helvetica, Tahoma, sans-serif;
  font-weight: bold;
  font-size: 16px;
  color: $or3;
  text-align: center;
  text-shadow: 0 1px 0 rgba(255, 255, 255, .70);
  font-style: normal
} 
```

如您所见，我的按钮有一个橙色渐变背景。但我想在我的橙色上放一个更透明的背景，这样按钮是橙色的，带有透明的“碳”风格。我怎样才能做到这一点？

如果我写：

```
.orange-button{
  padding: 6px;
  @include gradient-background(bottom, $or1, #fbb752); 
  @include border-radius(5px, 5px, 5px, 5px);
  background: transparent url('button-carbon-bg.png') no-repeat;
  border: 1px solid #d27d00;
  font-family: “Myriad Pro”, Arial, Helvetica, Tahoma, sans-serif;
  font-weight: bold;
  font-size: 16px;
  color: $or3;
  text-align: center;
  text-shadow: 0 1px 0 rgba(255, 255, 255, .70);
  font-style: normal
} 
```

我只能得到一个透明的碳背景，但我想要橙色和碳**。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:15:43.763

您必须编辑 mixin/自己制作以支持多种背景。这是您的外观的简单调整：

```
@mixin gradient-background-with-img( $dir,$from, $to, $img) {
  background: #{$img}, -webkit-linear-gradient(to $dir, $from, $to);
  background: #{$img}, -moz-linear-gradient(to $dir, $from, $to);
  background: #{$img}, -ms-linear-gradient(to $dir, $from, $to);
  background: #{$img}, -o-linear-gradient(to $dir, $from, $to);
  background: #{$img}, linear-gradient(to $dir, $from, $to);
} 
```

那么你可以像这样使用它：

```
div {
 @include gradient-background-with-img(bottom,$or1,#fbb752,'url(image.png) no-repeat left top'); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T21:19:14.817

您可能要考虑使用 Compass。它有一个 mixin 可以为你做到这一点（最多支持 10 个图像/渐变）：

[http://compass-style.org/reference/compass/css3/images/](http://compass-style.org/reference/compass/css3/images/)

萨斯：

```
#linear-gradient {
    @include background(linear-gradient(left top, white, #dddddd), url('some-image.png'));
} 
```

生成的 CSS：

```
#linear-gradient {
  background: -webkit-gradient(linear, 0% 0%, 100% 100%, color-stop(0%, #ffffff), color-stop(100%, #dddddd)), url("some-image.png");
  background: -webkit-linear-gradient(left top, #ffffff, #dddddd), url("some-image.png");
  background: -moz-linear-gradient(left top, #ffffff, #dddddd), url("some-image.png");
  background: -o-linear-gradient(left top, #ffffff, #dddddd), url("some-image.png");
  background: linear-gradient(left top, #ffffff, #dddddd), url("some-image.png");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T21:02:21.927

我不确定是否有一个 SASS 快捷方式，但必须在同一个`background:`属性中指定多个背景，用逗号分隔。写入两个单独的属性会导致后一个属性覆盖前一个。

例如：

```
background: url('button-carbon-bg.png') no-repeat, url('another-image.png') no-repeat; 
```

另请注意，它们按规范顺序呈现，第一个作为最高层。

# android - 使用手指将活动移动到另一个活动

> ID：13501935
> 
> 赞同：0
> 
> 时间：2012-11-21T20:54:28.977
> 
> 标签：android, gesture

在我的应用程序中，我希望在 Activity A 中使用从左到右的手指移动应该调用 Activity B。同样，如果我从右到左移动它，它应该返回到上一个 Activity，即 Activity A。

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T21:04:28.087

您必须使用 android 手势工具定义您的手势，然后您必须实现一个手势侦听器来侦听手势事件

[基本手势检测](https://stackoverflow.com/questions/937313/android-basic-gesture-detection)- stackoverflow

[手势介绍](http://mobile.tutsplus.com/tutorials/android/android-gesture/)- 移动 tuts

* * *

来源：[Android：用于在标签之间切换的滑动手势和动画](https://stackoverflow.com/questions/3797734/android-slide-gesture-and-animation-for-switching-between-tabs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T21:00:50.107

那么有几种方法可以实现你所说的。

您可以使用手势生成器来监听滑动，然后触发您的意图来启动活动。

在不了解更多信息的情况下，您可能还想查看页面查看器。

# dart - 尝试使用 Rikulo，但 dart:coreimpl 导入失败

> ID：13501941
> 
> 赞同：3
> 
> 时间：2012-11-21T20:55:05.437
> 
> 标签：dart, rikulo

我刚开始接触飞镖，想试试 rikulo。但是在导入它时，我得到一个错误

```
Failed to load resource
  dart:coreimpl 
```

据此： [http](http://news.dartlang.org/2012/10/coreimpl-finally-waves-goodbye-and-more.html) : //news.dartlang.org/2012/10/coreimpl-finally-waves-goodbye-and-more.html coreimpl 已于 10 月消失。

我应该如何开始使用它？我应该使用特定版本的 dart SDK 吗？还是有更新的 rikulo？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T21:00:43.447

啊哈，想通了。

您在 pubspec 中获得的版本不起作用

```
dependencies:
  rikulo: 
```

但是这个可以：

```
dependencies:
  rikulo:
    git: git://github.com/rikulo/rikulo.git 
```

# java - 在 Java 中实例化对象时产生奇怪的垃圾

> ID：13501942
> 
> 赞同：2
> 
> 时间：2012-11-21T20:55:10.057
> 
> 标签：java, garbage-collection, real-time, low-latency

我正在分析垃圾行为，`java.lang.String`看起来每次你**在任何类中第一次**实例化一个字符串时，它总是会产生垃圾。有人会知道为什么吗？

```
public abstract class AbstractTest {

    protected static String SERGIO = "sergio";

    private String someValue;

    public void init() {
        this.someValue = new String(SERGIO);
    }
}

public class Test extends AbstractTest {

    private static String JULIA = "julia";

    private Runtime runtime = Runtime.getRuntime();
    private String anotherValue;
    private String yetAnother;

    private void gc() throws InterruptedException {
        System.gc();
        Thread.sleep(100);
    }

    private long usedMemory() {
        return runtime.maxMemory() - runtime.freeMemory();
    }

    public void test() throws Exception {
        gc();
        this.anotherValue = new String(SERGIO); // a bunch of garbage is created!
        long usedMemory = usedMemory();
        gc();
        long usedMemoryAfterGC = usedMemory();
        System.out.println("Collected: " + (usedMemory - usedMemoryAfterGC));
        gc();
        this.yetAnother = new String(JULIA); // no more garbage
        usedMemory = usedMemory();
        gc();
        usedMemoryAfterGC = usedMemory();
        System.out.println("Collected: " + (usedMemory - usedMemoryAfterGC));
    }

    public static void main(String[] args) throws Exception {
        Test t = new Test();
        t.test();
    } 
```

**输出：**

已收集：704336 已
收集：0

没关系。第一次它创建垃圾，然后后续实例化不产生垃圾。

奇怪的是，当您在超类中强制创建字符串时，它仍然会在您第一次在子类中实例化 String 时在子类中创建垃圾：

```
public void test() throws Exception {
    gc();
    init(); // creates a String in the superclass
    gc();
    this.yetAnother = new String(JULIA);
    long usedMemory = usedMemory();
    gc();
    long usedMemoryAfterGC = usedMemory();
    System.out.println("Collected: " + (usedMemory - usedMemoryAfterGC));
} 
```

**输出：**

收藏：348648

知道为什么吗？

（顺便说一下，我在 MAC 和 JDK 1.6.0_37 上运行它）

**EDIT1：**我稍微更改了代码以明确字符串内部化不是这里的罪魁祸首，至少看起来不像。

**EDIT2：**如果在整个代码中将 String 更改为 Object，则会得到相同的垃圾，所以我想这与Java 中如何通过*new进行对象分配有关。*第一次在类中分配对象时，您会得到垃圾。第二次你没有。奇怪的是*每个班级*。

**EDIT3：**我写了[一篇博客文章](http://mentablog.soliveirajr.com/2012/11/real-time-java-programming-without-gc/)，其中讨论了如何强制 GC 分析您的应用程序以进行垃圾创建，就像我在上面的代码中所做的那样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T21:16:35.043

类中的文字字符串将在第一次引用时被“实习”（如果不是之前的话）。Interning 通常会涉及丢弃 String 的原始版本并使用 interned 版本，并且在此过程中可能会创建和丢弃更多的对象。

（当然，如果没有特殊的内部钩子，实际上没有可靠的方法来检测在任何单个操作中产生了多少垃圾，因此您的测量结果充其量是可疑的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T18:50:52.903

[在这里](https://stackoverflow.com/questions/12246533/where-to-find-the-evidence-of-how-to-calculate-the-size-of-a-java-object)阅读彼得的回答后，很明显 TLAB 是罪魁祸首。如果您使用该选项`-XX:-UseTLAB`禁用 TLAB，问题就会消失。根据我从[这里](https://blogs.oracle.com/daviddetlefs/entry/tlab_sizing_an_annoying_little)的理解，看起来对于 TLAB，一个线程最初分配了一大块内存以避免以后出现竞争条件。我能够通过为它设置更大的大小来证明 TLAB 是罪魁祸首，`-XX:TLABSize=64m`并看到这个数量被分配了。

# ruby - 如何在运行时使用字符串访问变量集？

> ID：13501950
> 
> 赞同：2
> 
> 时间：2012-11-21T20:55:31.147
> 
> 标签：ruby, string

我在启动时设置了一个变量：

```
INFO = {:email => "foo@bar.com, :first_name => "foo", :last_name => "bar"} 
```

然后我设置`param[:type] = "info"`。

当我`INFO`在控制台中输入时，我得到了这个：

```
 => {:email=>"foo@bar.com", :first_name=>"foo", :last_name=>"bar"} 
```

我想从打字`param[:type]`或“ `info`”中得到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T21:00:58.343

`INFO`是一个常量，如果它在全局范围内声明，您可以使用以下命令检索它：

```
Object.const_get "info".upcase 
Object.const_get param[:type].upcase 
```

# plone - 如何将硬编码的页面模板引用转换为 plone.app.z3cform 中的类属性以允许 z3c.jbot 覆盖

> ID：13501953
> 
> 赞同：1
> 
> 时间：2012-11-21T20:55:41.557
> 
> 标签：plone, z3c.form

该文件`plone/app/z3cform/templates.py`包含以下对页面模板文件的引用`plone/app/z3cform/templates/widget.pt`

```
# The widget rendering templates need to be Zope 3 templates
class RenderWidget(ViewMixinForTemplates, BrowserView):
    index = ViewPageTemplateFile('templates/widget.pt')
class RenderSingleCheckboxWidget(ViewMixinForTemplates, BrowserView):
    index = ViewPageTemplateFile('templates/singlecheckbox.pt') 
```

我希望这可以解释为什么`plone/app/z3cform/templates/widget.pt`不选择覆盖的原因`z3c.jbot`，这取决于页面模板是类属性。

如果是这样，我很高兴尝试进行并提交所需的更改以允许`widget.pt`通过覆盖`z3c.jbot`，但我不知道从哪里开始查看需要做什么来制作这两个文件名类属性，尤其是 Zopish/Plonish 方式。所以有几个问题。首先，这确实是问题吗？而且，如果是这样，如何正确地将这些硬编码引用转换为类属性（类`RenderWidget`和`RenderSingleCheckboxWidget`？）

# php - 使用 PHP 执行多个系统命令

> ID：13501956
> 
> 赞同：1
> 
> 时间：2012-11-21T20:55:53.227
> 
> 标签：php, shell, command-line, exec

我正在使用 SageMath，我正在尝试通过 exec() 或 system() 在 php 中使用它。除了多个命令之外，我从其他问题中对此的理解是，但我将如何执行：

```
 sage
 sage: m = matrix(ZZ,2, range(4))
 sage: m[0,0] = m[0,0] - 3
 sage: m 
```

所以它可以返回解决方案：

```
 [-3  1]
 [ 2  3] 
```

# jquery - 拖出时，我可以让可拖动元素的溢出出现在其容器的另一边吗？

> ID：13501958
> 
> 赞同：0
> 
> 时间：2012-11-21T20:56:01.713
> 
> 标签：jquery, overflow, draggable

我有一个当前包含在包含 div 中的可拖动元素（使用 jquery）。我想让它当它被拖到它的容器之外时，溢出出现在相反的框架边缘，虽然被分割了，100% 的对象仍然显示在容器中。我已经包含了一个图表来更具体地解决我的问题。如果您知道任何解决方案，请告诉我。

![图表](../Images/066ea704f0c1dbfa431fd10447c168c0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T21:18:55.470

如果您制作元素的第二个副本并将它们都拖动到容器中，则可以执行此操作，这样左边的元素开始出现，而右边的元素移出屏幕。

# glassfish-3 - 在 Glassfish 3.x 中使用 DataNucleus

> ID：13501960
> 
> 赞同：3
> 
> 时间：2012-11-21T20:56:03.787
> 
> 标签：glassfish-3, datanucleus

我在使用 DataNucleus 作为 Glassfish AS 上的 ORM 框架时遇到了麻烦。实际上我正在尝试使用连接到 MongoDb。我预计这里会出现问题，因为每个人都知道 nosql 数据库不是标准的一部分，但是我在使用 DataNucleus 时遇到了问题。那是我没想到的。我对 DataNucleus 和 MongoDB 都不熟悉，不幸的是我在 WEB 上找不到任何相关信息，所以我决定一步一步地移动。

我创建了一个使用 DataNucleus 和 MongoDB 并使用 Maven 构建的小型命令行应用程序。相关代码如下

持久化.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0"
             xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
      http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
    <persistence-unit name="just_test">
        <provider>org.datanucleus.api.jpa.PersistenceProviderImpl</provider>

        <properties>
            <property name="datanucleus.ConnectionURL" value="mongodb:/justtest"/>
            <property name="datanucleus.autoCreateSchema" value="true"/>
            <property name="datanucleus.validateTables" value="false"/>
            <property name="datanucleus.validateConstraints" value="false"/>
        </properties>
    </persistence-unit>
</persistence> 
```

持久化实体的代码

```
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityTransaction;
import javax.persistence.Persistence;

public class App {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("just_test");

        // Create entity manager
        EntityManager em = null;
        String id;
        try {
            em = emf.createEntityManager();
            EntityTransaction tx = em.getTransaction();
            TestEntity testEntity = new TestEntity();
            tx.begin();
            em.persist(testEntity);
            em.flush();
            tx.commit();
            id = testEntity.getId();
        } finally {
            if (null != em) {
                em.close();
            }
        }

        try {
            em = emf.createEntityManager();
            TestEntity testEntity = em.find(TestEntity.class, id);
            System.out.println(testEntity);
        } finally {
            if (null != em) {
                em.close();
            }
        }
    } 
```

pom.xml

```
...
<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.mongodb</groupId>
        <artifactId>mongo-java-driver</artifactId>
        <version>[2.9.3, )</version>
        <!--<scope>provided</scope>-->
    </dependency>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-core</artifactId>
        <version>[2.9, )</version>
    </dependency>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-mongodb</artifactId>
        <version>[2.9, )</version>
    </dependency>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-api-jpa</artifactId>
        <version>[3.0, )</version>
    </dependency>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-api-jdo</artifactId>
        <version>[3.0, )</version>
    </dependency>
    <dependency>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-jpa_2.0_spec</artifactId>
        <version>[1.0, )</version>
    </dependency>
    <dependency>
        <groupId>javax.jdo</groupId>
        <artifactId>jdo2-api</artifactId>
        <version>2.2</version>
    </dependency>
    <dependency>
        <groupId>javax.transaction</groupId>
        <artifactId>transaction-api</artifactId>
        <version>[1.1-rev-1, )</version>
    </dependency>
    <dependency>
        <groupId>javax.persistence</groupId>
        <artifactId>persistence-api</artifactId>
        <version>1.0b</version>
    </dependency>

</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.datanucleus</groupId>
            <artifactId>maven-datanucleus-plugin</artifactId>
            <version>3.1.0-m3</version>
            <configuration>
                <log4jConfiguration>${basedir}/log4j.properties</log4jConfiguration>
                <verbose>true</verbose>
            </configuration>
            <executions>
                <execution>
                    <phase>process-classes</phase>
                    <goals>
                        <goal>enhance</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
... 
```

这段代码工作正常。

一旦我尝试部署使用相同代码的应用程序，首先发生的事情是 GF 无法找到某些类。这些类虽然在一个 .ear 文件中。我不得不将几个类放到 GF_HOME/glassfish/domains//lib 目录中，以使 GF 能够找到这些类，但最后我以异常结束

```
Caused by: javax.persistence.PersistenceException: No Persistence provider for EntityManager named just_test 
```

值得一提的是，org.datanucleus.api.jpa.PersistenceProviderImpl 类在我也放在域的 lib 目录中的 datanucleus-api-jpa 文件中。

我也试过用 CDI 做它，如下所示

```
@PersistenceContext(unitName = "just_test")
protected EntityManager entityManager;

@Override
public void persist(TestEntity testEntity) {
    entityManager.persist(testEntity);
} 
```

这种方法也没有成功。我有一个例外

```
java.lang.ClassCastException: Cannot cast org.datanucleus.api.jpa.PersistenceProviderImpl to javax.persistence.spi.PersistenceProvider 
```

任何想法或文章和/或文档的链接将不胜感激。谢谢

下面是我尝试在 Glassfish 上部署的应用程序的依赖项列表。我必须将所有“提供”范围的依赖项放入 Glassfish 的 lib 目录中

```
<dependency>
    <groupId>org.datanucleus</groupId>
    <artifactId>datanucleus-core</artifactId>
    <version>[2.9, )</version>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>org.datanucleus</groupId>
    <artifactId>datanucleus-mongodb</artifactId>
    <version>[2.9, )</version>
</dependency>
<dependency>
    <groupId>org.datanucleus</groupId>
    <artifactId>datanucleus-api-jpa</artifactId>
    <version>[3.0, )</version>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>org.apache.geronimo.specs</groupId>
    <artifactId>geronimo-jpa_2.0_spec</artifactId>
    <version>[1.0, )</version>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>org.datanucleus</groupId>
    <artifactId>datanucleus-api-jdo</artifactId>
    <version>[3.0, )</version>
</dependency>
<dependency>
    <groupId>javax.jdo</groupId>
    <artifactId>jdo2-api</artifactId>
    <version>2.2</version>
</dependency> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:37:06.727

我设法解决了它。我必须修改依赖项，如下所示

```
<properties>
    <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <datanucleus.version>3.1.3</datanucleus.version>
</properties>

<dependencies>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-core</artifactId>
        <version>${datanucleus.version}</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-mongodb</artifactId>
        <version>${datanucleus.version}</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-api-jpa</artifactId>
        <version>${datanucleus.version}</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-api-jdo</artifactId>
        <version>${datanucleus.version}</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.jdo</groupId>
        <artifactId>jdo2-api</artifactId>
        <version>2.2</version>
        <scope>provided</scope>
    </dependency>
</dependencies> 
```

我还必须将所有具有“提供”范围的 jar 放入 GF_HOME/glassfish/domains//lib 目录。我不知道为什么我必须这样做。很高兴对此有答案。希望这可以为想要将 Datanucleus 与 Glassfish 一起使用的人节省时间

# php - 选择使用 jquery 使用单选按钮查询多个表

> ID：13501964
> 
> 赞同：0
> 
> 时间：2012-11-21T20:56:17.620
> 
> 标签：php, jquery, mysql

我正在建立一个漫画网站，它有两个子网站：漫画和艺术品。Comics 和 Artwork 存储在两个单独的表中。

我有一个搜索功能，允许用户搜索图像。

我想给他们一个选项来选择只搜索漫画、只搜索艺术品或两者兼而有之。

![在此处输入图像描述](../Images/66a6eded525bd7d6000dbd1f8dee5d0c.png)

我有以下我认为应该可以工作的**javascript ：**

```
 <script type="text/javascript">

        function search(searchString) {     
           var site = $("#site").val();
           $.get("./scripts/search.php", {_input : searchString, _site : site},
                function(returned_data) {
                    $("#output").html(returned_data);
                }
            );
        }

        function searchChoice(choice) {     
           $.get("./scripts/search.php", {_choice : choice}
           );
        }

</script> 
```

以及以下 HTML：

```
 <!--Search filtering for comics, artwork, or both-->
<span class="search"><b>Search for: </b> </span>

<div class="btn-group" data-toggle="buttons-radio">
<span class="search">
    <button type="button" class="btn" id="comics" onclick="searchChoice(this.id)">Comics</button> 
    <button type="button" class="btn" id="artwork" onclick="searchChoice(this.id)">Artwork</button> 
    <button type="button" class="btn" id="all" onclick="searchChoice(this.id)">All</button> 
</span>
</div>

<br/>
<br/>

<!--Search functionality-->
<span class="search">
    <input type="text" onkeyup="search(this.value)" name="input" value="" />
    <input id="site" type="hidden" value="<?php echo $site; ?>">
</span>

<br />
<span id="output"><span class="sidebarimages">  </span></span> 
```

我的问题是**PHP**查询两个表：

**我正确地做 JOIN 吗？**

```
$input = (isset($_GET['_input']) ? ($_GET['_input']) : 0); 
$choice = (isset($_GET['_choice']) ? ($_GET['_choice']) : "all");
$site = (isset($_GET['site']) ? ($_GET['site']) : null);

if ($choice == "artwork") {
    $sql = "SELECT id, title, thumb FROM artwork";
    $thumbpath = "./images/Artwork/ArtThumbnails/";
}
else if ($choice == "comics") {
    $sql = "SELECT id, title, thumb FROM comics";
    $thumbpath = "./images/Comics/ComicThumbnails/";
}
else {
    $sql = "SELECT id, title, thumb FROM comics 
            UNION 
            SELECT id, title, thumb FROM artwork";
    $thumbpath = "./images/AllThumbnails/";
}

$imgpaths = $mysqli->query($sql);
mysqli_close($mysqli); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T21:01:41.763

要使用 JOIN 功能，您需要表之间的关系（连接一个到另一个的外键）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T21:01:01.730

不，您没有说明加入 2 个表的任何条件，同样在查看两个表的情况下，您可能需要考虑`UNION`改用，如下所示：

```
SELECT * FROM comics
UNION
SELECT * FROM artwork 
```

# ffmpeg - 用ffmpeg提取帧 - 为什么它们是三个维度？

> ID：13501965
> 
> 赞同：1
> 
> 时间：2012-11-21T20:56:20.087
> 
> 标签：ffmpeg, extract, tiff, frames, idl

在我的研究中，我一直使用 ffmpeg 作为视频处理中非常有用的工具。我遇到的一个问题：当从视频中提取帧为 Tiff 格式时，它会保存每个 Tiff 的**三个**维度，而不是预期的两个维度（视频帧的宽度 x 高度）。

当将它读入我的 IDL 代码时，它当然会拒绝 Tiff 图像是一个三维数组。第三个维度的大小为 3，我想是因为我以 3 Hz（？）的帧速率进行了提取。有谁知道为什么 ffmpeg 不创建一个简单的二维 Tiff 图像？有办法强制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T22:03:25.200

第三个维度是由于颜色系统被分成不同的通道。所以你得到了图像的二维和红色、绿色和蓝色通道的一维。

对于二维图像，您需要将其转换为灰度，以便每个 2d 像素单元仅包含一个亮度值。

# javascript - 如何通过循环获取元素，html？

> ID：13501985
> 
> 赞同：0
> 
> 时间：2012-11-21T20:58:27.840
> 
> 标签：javascript, jquery, css, html

我想做类似的事情：

```
var i=0;

while(i<20)
{
  var temp= document.getElementById(''+20);
  $(temp).hide();
  i++;
} 
```

我可以这样做吗？我试过了，但没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:00:29.020

是的，例如：

```
for (var i=0; i < 20; i++) {
  var temp = document.getElementById(i);
  console.log(temp);
} 
```

一个工作示例：http: [//jsfiddle.net/bqF9T/](http://jsfiddle.net/bqF9T/)

但正如评论中所指出的，请[务必使用有效的 ID](https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html)，因为如果 HTML 无效，则在 Chrome 中发生的情况可能无法在其他浏览器中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T21:04:42.640

[ID不能以数字开头](http://www.w3.org/TR/html4/types.html#type-id)，因此您必须在计数之前有一些东西。

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

所以在它前面加上其他东西使它有效，我选择了“ `example_`”。

另一个问题是您总是试图获取 ID 中带有“20”的元素。你想得到所有这些，所以你必须使用你的循环计数器，`i`.

另请注意，计数器从 0 变为 19（当`i = 20`,`i<20`为 FALSE 时），因此请记住这一点，以便它与您的标记匹配。

JS：

```
var i=0;

while(i<20)
{
  var temp= document.getElementById('element_' + i);
  $(temp).hide();
  i++;
} 
```

您的标记看起来像：

```
<div id="element_0">first</div>
<div id="element_1">second</div>
<div id="element_2">foo</div>
...
<div id="element_19">bar</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T21:05:02.993

如果您有一组 id="htmlID1-20" 的元素，您可以将代码更改为如下所示：

```
var i = 20
  , elems = [] // empty array to keep the elements
while(i--){  //this trick reduces the variable i by 1 each time the loop runs, stopping at 0
    elems.push(document.getElementById("htmlID"+i)) //collect the dom elements and push a refrance to it in the array
}
console.log(elems) 
```

不建议在循环内创建变量或函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T21:00:38.733

尝试这个：

```
var i = 0;

while(i < 20){
    var temp = document.getElementById('Elid_'+i);
    // DO STUFF
    i++;
} 
```

你有一个无限循环（我总是小于 20）你也使用静态数字 20 而不是 i。或多或少的动态数字，正如在其他地方所提到的，ID 不能仅以数字开头...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T21:01:18.127

您实际上已经创建了一个无限循环。由于您不更改 i 的值，因此它将永远为 0，因此始终 < 20。

您还应该为元素提供不仅仅是数字的 id（因为这不起作用）。

```
<div id='something1'></div> 
```

尝试一个 for 循环，如下所示：

```
// Wait for the page to finish loading.
window.onload = function() {
    // Run your loop.
    for(var i = 0; i < 20; i++) {
        var temp = document.getElementById('something' + i);

        // Do stuff with temp.
    }
}

// Or, with jQuery
$(document).ready(function() {
    // Run your loop.
    for(var i = 0; i < 20; i++) {
        var $temp = $('#something' + i);

        $temp.hide();

        // Or, if you're only hiding...
        $('#something' + 1).hide();
    }
}); 
```

# windows - 使用 CUDA 构建 OpenCV 的问题

> ID：13501986
> 
> 赞同：0
> 
> 时间：2012-11-21T20:58:32.807
> 
> 标签：windows, opencv, visual-studio-2008

我有 CUDA 4.2，我下载了 OpenCV 2.4.3。我的目的是与 cuda 一起使用 openCV。下载后，我将C目录中的内容解压缩，然后使用CMake软件生成openCV解决方案文件。当我尝试在 Visual Studio 2008 中构建由 CMake 生成的解决方案时，会弹出一个框。在框中有一条消息，表明 CMake 已重新生成 2 个 .sln 和/或 .vcproj 文件，并且框中有 3 个选项。一个要求重新加载整个解决方案并发出新的构建命令，另一个要求重新加载整个解决方案并停止构建，最后一个是取消什么都不做。我必须提一下，尽管出现了这个框，但构建仍在继续并且没有停止，也许不会产生任何错误。但是在构建 row_filter.cu 时卡住了（没有任何响应）。因此，当建筑物此时卡住时，我尝试了出现的框中的所有选项，例如我重新加载了项目以及其他选项，每次我做任何事情重新加载甚至单击取消时，我都会看到某种重新构建项目时发生错误。所以我不知道该怎么做以及如何使用 openCV 和 Cuda。我应该就这样离开对话框还是有适当的建立方法？我必须尽快开始使用 OpenCV 和 cuda。谢谢你的帮助。不知道该做什么以及如何使用 openCV 和 Cuda。我应该就这样离开对话框还是有适当的建立方法？我必须尽快开始使用 OpenCV 和 cuda。谢谢你的帮助。不知道该做什么以及如何使用 openCV 和 Cuda。我应该就这样离开对话框还是有适当的建立方法？我必须尽快开始使用 OpenCV 和 cuda。谢谢你的帮助。

# google-app-engine - 仅包含文件的表单上传文件名

> ID：13501988
> 
> 赞同：2
> 
> 时间：2012-11-21T20:58:44.317
> 
> 标签：google-app-engine

所以基本上我正在尝试接收文件并将其存储在数据存储中。现在，我知道您通常会为此使用 blobstore，但这是一个相对较小（可能 40-50 kb）的文本文件，因此使用 blobstore 将是多余的。

问题是，我似乎找不到任何方法从文件中获取数据。self.request.get("data") 和 self.request.POST.get("data")，应该包含文件内容（据我所知）只是一个带有文件名的字符串，没有数据.

这是python 2.7代码：

```
class SubmitHandler(webapp2.RequestHandler):
    def get(self):
        user = users.get_current_user()
        if not user:
            self.redirect(users.create_login_url(self.request.uri))
        else:
            template = jinja_environment.get_template('templates/submit.html')
            self.response.out.write(template.render())

    def post(self):
        user = users.get_current_user()
        if not user:
            self.error(401)
        craft = Craft(submitter = user,
                      title = self.request.get('title'), 
                      description = self.request.get('description'), 
                      data = self.request.get("data"))
        self.redirect('view/' + (hex(craft.put().id()))[2:-1]) 
```

以及相应的 HTML 文档：

```
<!DOCTYPE html>
<html>
    <body>
        <form action="/submit" method="post">
        <div><textarea name="title" rows="1" cols="40" placeholder="Title"></textarea></div>
        <div><textarea name="description" rows="3" cols="40" placeholder="Description"></textarea></div>
        <div><input type="file" name="data"/></div>
        <div><input type="submit" value="Upload"></div>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T22:05:30.567

您的表单缺少必要的`enctype="multipart/form-data"`属性

# timezone - Teradata：如何将 TIMESTAMP(6) 字段值转换为 GMT？

> ID：13501989
> 
> 赞同：1
> 
> 时间：2012-11-21T20:58:44.280
> 
> 标签：timezone, teradata, gmt

我有一个表，其列定义为`TIMESTAMP(6)`. 我需要将此列中的所有时间值从 EST 转换为 GMT。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T21:56:03.533

```
/* EST is GMT -5:00:00 - To convert add 5 Hours to each timestamp */ 

select timestamp '2012-11-21 18:50:00' + interval '5:00:00' hour to second; 
```

您如何将其应用于您的数据部分取决于您正在谈论的数据量。在空表中使用 MERGE INTO SQL 语句然后重命名表可能更容易。如果仅用于显示目的，您可以只使用视图来完成转换。

您是否需要考虑夏令时？那么转换可能会有点棘手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-01T17:21:23.587

我做了一些工作来补偿 DST，但效果很好。我正在从 UTC 转换为太平洋并在 Teradata SQL Assist 中工作。

```
select
cast( a.strt_dt_tm as date) as BaseDt,
case 
when BaseDt <   '2018-03-11' then a.strt_dt_tm - interval '8:00:00' hour to second
when BaseDt>=  '2018-03-11' then a.strt_dt_tm - interval '7:00:00' hour to second
end as Offsetz,
cast(offsetz as date) as OffSt_Dt,
from Time_Table 
```

# forms - Wicket - 使用 CompoundPropertyModel 将默认值设置为 Textfield

> ID：13501990
> 
> 赞同：0
> 
> 时间：2012-11-21T20:58:45.860
> 
> 标签：forms, null, wicket, textfield, default-value

我有一个映射到我的对象的 CompoundPropertyModel。

例如

```
final TextField<String> adresseName = new TextField<String>("Adresse"); 
```

映射到

```
public class Invoice implements Serializable{

   private String adresse;

   public String getAdresse() {
       return adresse;
   }
   public void setAdresse(String adresse) {
       this.adresse = adresse;
   }
} 
```

但如果对象地址为空或未设置，我希望在文本字段中设置一个默认值，例如“”。

我怎么能那样做？

问候，戴夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T06:01:03.297

setConvertEmptyInputStringToNull(false) 应该这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T22:44:40.177

最简单的事情是确保`Invoice.getAdresse()`返回一个空字符串而不是`null`.

```
public String getAdresse() {
   return addresse != null ? adresse : "";
} 
```

毕竟，如果`null`不是有效值，则执行该规则不是 UI 层的工作。

**更新：**如果您必须为此使用 Wicket，您的另一个选择是使用模型链接。首先，您需要创建一个在查询时设置默认值的模型。

```
class HackyModel extends Model {

    public Object getObject() {
        Invoice ret = (Invoice)super.getObject();
        if( ret != null && ret.getAddresse() == null ) {
           ret.setAddresse( "" );
        }
        return ret;
    }
 } 
```

然后将此模型传递给`CompoundPropertyModel`. 当 Wicket 尝试通过 设置/获取任何字段时`CompoundPropertyModel`，您的模型将首先被调用以检索支持`Invoice`对象，该对象充当一种过滤器。

这不是一个很好的解决方案，因为`Model.getObject()`不应该修改支持对象，但它可能是您必须采用的最干净的技巧来绕过考虑不周的 POJO。

# verilog - 如何在verilog中设计一个16位进位超前加法器

> ID：13501993
> 
> 赞同：3
> 
> 时间：2012-11-21T20:58:55.613
> 
> 标签：verilog

我在verilog中设计一个16位进位超前加法器时遇到了一些复杂情况。我这里有代码：

```
 module fulladder(a, b, c, s, cout);
    input a, b, c;
    output s, cout;

   xor  #0
    g1(w1, a, b),
    g2(s, w1, c);
   and  #0
    g3(w2, c, b),
    g4(w3, c, a),
    g5(w4, a, b);
   or   #0
    g6(cout, w2, w3, w4);
  endmodule 
```

我了解端口的工作原理，但我是否使用向量？

ps它在结构verilog中。请不要给我完整的代码。只是需要一些了解。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T22:25:18.463

我们的朋友[Wikipedia 有一点关于 Carry Look-Ahead 的内容](http://en.wikipedia.org/wiki/Carry-lookahead_adder)。这些通常以 4 位阶段组合在一起。4 个全加法器，带有额外的逻辑来计算进位。

假设问题中指定了一个 fulladder，加上生成`g`和传播`p`输出，一个 4 位块可能看起来像：

```
module four_bit_carry_lookahead (
  input  [3:0] a,
  input  [3:0] b,
  input        c,    //Carry in
  output [3:0] s,    //Sum
  output       cout  //Carry
);

  wire [3:1] carry; // 3:1 to align numbers with wikipedia article
  wire [3:0] p;
  wire [3:0] g;

  fulladder add0(.a(a[0]), .b(b[0]), .c(c),        .s(s[0]), .cout() .g(g[0]), .p([0]) );
  fulladder add1(.a(a[1]), .b(b[1]), .c(carry[1]), .s(s[1]), .cout() .g(g[1]), .p([1]) );
  fulladder add2(.a(a[2]), .b(b[2]), .c(carry[2]), .s(s[2]), .cout() .g(g[2]), .p([2]) );
  fulladder add3(.a(a[3]), .b(b[3]), .c(carry[3]), .s(s[3]), .cout() .g(g[3]), .p([3]) );

  carry_lookahead(
   .p    (p    ), //input  [3:0] 
   .g    (g    ), //input  [3:0]
   .c    (carry), //output [3:1]
   .cout (cout )  //output
  );

endmodule 
```

所需的附加输出是`g = a & b;` `p = a | b;`.

仍然需要实现 carry_lookahead 的逻辑，[维基百科文章](http://en.wikipedia.org/wiki/Carry-lookahead_adder)应该告诉你需要什么。在这段代码中，它们是 C1、C2、C3 和 C4，分别是进位 [1]、进位 [2]、进位 [3] 和 cout。

要创建 16 位加法器，您可以使用这 4 位部分中的 4 个。

# mysql - 优化 MySQL 查询 - 运行时间长

> ID：13501994
> 
> 赞同：0
> 
> 时间：2012-11-21T20:59:00.743
> 
> 标签：mysql

有什么想法可以优化以下 SQL 查询吗？运行需要相当长的时间。通常大约 3-8 秒，具体取决于它是哪种产品。

```
SELECT 
`serviceid` 

FROM 
`services` 

INNER JOIN `products` ON `serviceid`=products.`id` 

WHERE 
`orderid` IN 
(
    SELECT `orderid` FROM `orders_items`,`orders` 

    WHERE 
    `orderid`=orders.`id` AND
    `status` > '2' AND 
    `serviceid`='___SYSTEM_VARIABLE___'
) 

AND NOT 
`serviceid`='___SYSTEM_VARIABLE___' AND 
products.`state`='1' AND
products.`stock` > 0 

GROUP BY 
`serviceid` 

ORDER BY 
COUNT(`serviceid`) DESC LIMIT 15 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T23:18:10.100

Remove the in(select ...) and roll it into the main query as more joins. Here's my guess, since I don't know your table structures:

```
SELECT 
  `serviceid` 
FROM
  `services` 
  INNER JOIN `products` 
    ON `serviceid` = products.`id` 
  INNER JOIN `orders` 
    ON `products`.`orderid` = `orders`.`id` 
  INNER JOIN `orders_items` 
    ON `orderid` = `orders`.`id` 
WHERE services.`serviceid` = '___SYSTEM_VARIABLE___' 
  AND products.`state` = '1' 
  AND products.`stock` > 0 
  AND `orders`.`status` > '2' 
  AND `orders`.`serviceid` = '___SYSTEM_VARIABLE___' 
GROUP BY `serviceid` 
ORDER BY COUNT(`serviceid`) DESC 
LIMIT 15 
```

# php - MySQL查询选择不同的位置

> ID：13501996
> 
> 赞同：1
> 
> 时间：2012-11-21T20:59:12.743
> 
> 标签：php, mysql

我正在编写一个 php 脚本来查询我的数据库中标记为已删除的产品，获取图像参考号并删除该图像。问题是我有一些图像被多个产品使用，只有其中一些被删除。因此，我需要一个查询来查找已删除产品的所有唯一图像编号，但前提是它们也未被未删除产品使用。

每个产品都有一个 unquieID、ImageID 和 Deleted（如果未删除则为 null，如果已删除则包含 7 或 8 位数字）列。

这是我提出的从已删除产品中获取图像的查询。我只是不确定如何让查询检查该产品是否被任何注释删除的产品使用。我宁愿不必对该检查进行另一个查询，因为我在数据库中有超过 750000 种产品。

```
SELECT DISTINCT ImageId 
FROM productdata 
WHERE ImageId != 0 
    AND Deleted IS NOT NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T21:09:03.390

这样的事情怎么样？计算图像的总数，并计算它被删除的次数。如果删除计数与图像计数匹配，则图像产品的所有实例都已被删除。

```
SELECT 
  ImageID, 
  COUNT(ImageID) AS total_images, 
  SUM(Deleted IS not NULL) AS deleted_images
FROM productData
GROUP BY ImageID
HAVING total_images = deleted_images 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T21:16:35.960

尝试使用此查询：

```
SELECT ImageId
FROM productdata 
WHERE ImageId != 0 
GROUP BY ImageId
HAVING sum(CASE WHEN Deleted is null THEN 1 ELSE 0 end) = 0 
```

你可以在这里在线测试：[http ://www.sqlfiddle.com/#!2/15229/2](http://www.sqlfiddle.com/#!2/15229/2)

这个怎么运作：

*   `GROUP BY ImageId`确保我们得到不同的`ImageId`值
*   `sum(CASE WHEN Deleted is null THEN 1 ELSE 0 end)`是具有给定`ImageId`但未被删除的记录的计数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T21:06:19.897

这行得通吗？

```
SELECT DISTINCT ImageId 
FROM productdata pd
WHERE (
    SELECT COUNT(*) FROM productdata 
    WHERE pd.ImageId != ImageId AND Deleted IS NOT NULL
) = 0 
```

# c++ - 列表迭代器不可递增？- 运行时错误

> ID：13501997
> 
> 赞同：2
> 
> 时间：2012-11-21T20:59:12.810
> 
> 标签：c++, debugging, stl, runtime

我试图在一个类中创建列表，但遇到了这个运行时错误，称为：

> 调试断言失败！表达式：列表迭代器不可递增

我无法弄清楚问题是什么。这是代码：

```
// Core.cpp //

#include "Core.h"

class List {
private:
    int Size;
    int Values;
    list<int> Data;
    list<int>::iterator IT;
public:
    List(int S, int V) {Size = S; Values = V;}
    void MakeList();
    void TargetElement(int Element);
    void ChangeElement(int Value);
    void DisplayList();
};

void List::MakeList() {
    list<int> Data(Size, Values);
    list<int>::iterator IT = Data.begin();
}

void List::TargetElement(int Element) {
    advance(IT, Element);
}

void List::ChangeElement(int Value) {
    list<int>::iterator INSERT = Data.begin();
    Data.insert(INSERT, Value);
}

void List::DisplayList() {
    list<int>::iterator OUTPUT;
    for(OUTPUT = Data.begin(); OUTPUT != Data.end(); OUTPUT++) {
        //cout << *OUTPUT << endl;
    }
}

int main() {

    List Container(10, 0);
    Container.MakeList();
    Container.TargetElement(3);
    Container.ChangeElement(20);
    Container.DisplayList();

    cin.get();
    return 0;
} 
```

关于如何解决此问题的任何建议？

编辑：我到处寻找答案，但似乎仍然找不到解决方案。调试和找到断点也无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:07:05.623

`IT`在内部无效，`TargetElement()`因为它是从as重新声明`IT`的局部变量获得的迭代器：`Data``MakeList()``Data`

```
void List::MakeList() {
    list<int> Data(Size, Values);          // 'Data' is destructed when
    list<int>::iterator IT = Data.begin(); // this method returns.
} 
```

我不确定为什么`MakeList()`甚至存在，在构造函数中执行初始化：

```
List(int S, int V) : Size(S), Values(V), Data(S, V) {} 
```

并删除`MakeList()`. 如果您选择这种方法，请注意`Size`并且`Values`可以从类中删除，因为它们在构造之外不需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T21:08:06.000

对于初学者，这会产生一个局部`list<int>`调用`Data`，然后将局部迭代器调用`IT`分配给它的第一个元素。这对您的成员变量`Data`没有`IT`任何作用。

```
void List::MakeList() {
    list<int> Data(Size, Values);
    list<int>::iterator IT = Data.begin();
} 
```

应该是：

```
void List::MakeList() {
    Data.resize(Size, Values);
    IT = Data.begin();
} 
```

带着它跑，看看它会把你带到哪里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T21:13:15.490

问题在这里：

```
void List::MakeList() {
    list<int> Data(Size, Values);
    list<int>::iterator IT = Data.begin();
} 
```

这不会初始化类的 Data 和 IT 成员，它只是创建称为 Data 和 IT 的局部变量，一旦 MakeList 返回，它们就会消失。要初始化这些成员，请将构造函数更改为：

```
List(int S, int V) : Data(S, V), IT(Data.begin()), Size(S), Values(V)
{
} 
```

顺便说一句，您不需要 Size 成员，因为 std::list 已经存储了它的大小（您可以通过调用 std::list::size 来获取它）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T21:07:59.053

```
void List::MakeList() {
    list<int> Data(Size, Values);
    list<int>::iterator IT = Data.begin();
} 
```

这是创建两个局部变量来隐藏类的成员变量。您收到运行时错误，因为`IT`您的类的成员变量从未设置为实际列表对象的迭代器。你想要的是合并`MakeList`和你的构造函数。这就是构造函数的用途。