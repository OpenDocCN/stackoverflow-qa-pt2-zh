# StackOverflow 问答 14827000-14827999

# android - 如何在所有版本的 android 中使用 omxcodec

> ID：14827002
> 
> 赞同：4
> 
> 时间：2013-02-12T06:48:50.110
> 
> 标签：android

我想在我的屏幕上解码和显示 h264 帧。现在我想做的就是使用 omx 编解码器来解码我的帧，因为它在硬件中解码，这有助于实现高分辨率的 fps。到目前为止，我所知道的是有不同的方式来访问硬件解码器。我遇到了一些名字，比如 stagefright、omxcodec、openmax。所有这些都是不同的东西。我想逐帧解码。据我所知，android 库只接受媒体的文件路径或 url。但在这里我的要求是不同的。我需要逐帧解码。那么有人能告诉我从哪里开始挖掘吗？我知道在最新版本的android中，他们已经发布了api来解码。但我想支持所有版本的android。因此，任何建议或指导都会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-24T17:25:30.323

你是对的，确实在顶层 libstagefright 库有一个“流”接口。也就是说，您创建音频或视频源，配置编解码器，然后开始编码或解码过程。

但是，使用 OMXCodec 接口，您可以获得对各个帧的访问。不幸的是，我不知道任何官方 OMXCodec 文档的来源。

唯一来源 - 这些是 Android 存储库中的代码示例。

如果您想了解更多关于如何使用 OMXCodec，可以查看 AwesomePlayer.cpp 文件（[http://gitorious.org/rowboat/frameworks-base/blobs/rowboat-ics/media/libstagefright/AwesomePlayer.cpp](http://gitorious.org/rowboat/frameworks-base/blobs/rowboat-ics/media/libstagefright/AwesomePlayer.cpp)）

从 StagefrightRecorder.cpp（在同一个存储库中）中可以清楚地看到使用库 libstagefright

[这里](http://vec.io/posts/use-android-hardware-decoder-with-omxcodec-in-ndk)还有关于 OMXCodec 架构的有用信息

PS 请记住，OMXCodec API 不稳定，可能因版本而异...

# php - PHP - 字符串在 nbsp 字符后被截断

> ID：14827007
> 
> 赞同：0
> 
> 时间：2013-02-12T06:49:26.187
> 
> 标签：php, javascript, post

我很难将 TinyMCE、Ajax 和 PHP Post 组合使用到 ExpressionEngine 数据库。TinyMCE 区域在网站加载时从我的数据库中收集数据，我可以使用富文本对其进行编辑。

但是，当我使用 ajax 和 POST 将这些更改保存到 PHP 时，只要字符串包含`&nbsp;`. 我没有尝试任何其他特殊字符，但它接受`<p>`并`<h1>`

PHP 代码如下所示：

```
$tinyMCEData = $_POST['tinyMCEData']; 
```

而当我回应这一点时，它在这一点上被切断了。我试图在通过 Ajax 发送之前更换 nbsp，但我还没有运气。我也不在乎那里是否有 nbsp，只要它被接受即可。

我也试过htmlentities，像这样：

```
$tinyMCEData = htmlentities($_POST['tinyMCEData']); 
```

那里也没有运气。那么为什么会这样呢？我猜这是有原因的。非常感谢任何帮助！

编辑：我的案例看起来与这个问题的示例完全一样： [TinyMCE + Jquery + PHP + AJAX Special chars issue](https://stackoverflow.com/questions/8863560/tinymce-jquery-php-ajax-special-chars-issue)

只有警报框的底部两个屏幕截图。我在 tinyMCE 编辑器中的所有内容不止一次在文本中出现空格。

Edit2：这是 javascript 的样子：

```
var tinyMCEData = tinyMCE.activeEditor.getContent();
var pars = 'tinyMCEData=' + tinyMCEData;

var myAjax = new Ajax.Request(url, {
   method: 'post',
   postBody: 'pars,
   onSuccess: success,
   onFailure: failure
}); 
```

此时，正在发送的数据如下所示：

```
<p>One two &nbsp;three &nbsp; four</p> 
```

php post后的值是什么：

```
<p>One two 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:15:34.710

你有一个语法错误：

```
var myAjax = new Ajax.Request(url, {
   method: 'post',
   postBody: 'pars,
   onSuccess: success,
   onFailure: failure
}); 
```

应该是

```
var myAjax = new Ajax.Request(url, {
   method: 'post',
   postBody: pars,
   onSuccess: success,
   onFailure: failure
}); 
```

另外，成功和失败是否定义为功能？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T08:07:25.077

complex857 是对的！我只需要在将字符串发送到 POST 之前对其进行转义。像这样：

```
var tinyMCEData = escape(tinyMCEData); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-09T09:43:29.213

对于那些对此仍有疑问的人的另一种解决方案（特别是如果您想提交更多详细信息）......

我将文本数据与其他变量分开，而不是使用数据字符串。然后确保其中一个变量包含您的文本

```
data: {var1: var1,
       var2: var2,
       var3: var3} 
```

# iphone - 尝试在 cocos2d iphone 中停止精灵动作时出现断言失败错误

> ID：14827008
> 
> 赞同：0
> 
> 时间：2013-02-12T06:49:41.513
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone

我在停止操作时遇到问题。我有 2 个精灵动画 1 是蚂蚁，第二个是蚱蜢。当我只是调用蚂蚁动画时，它工作正常，但是当我尝试同时运行蚂蚁和蚱蜢动画时，它给了我错误。 ***断言失败 -[CCSpriteBatchNode addChild:z:tag:], /Users/zohaib/Downloads/zohaibgame/zohaibgame/libs/cocos2d/CCSpriteBatchNode.m:183 调用 antMoveEnded 时会出错。

**蚂蚁动画代码**

```
-(void) walk_Ants
{

    // 1) Cache the sprite frames and texture
    [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:
     @"ant-animation.plist"];

    /// 2) Create a sprite batch node
    CCSpriteBatchNode *spriteSheet_ant = [CCSpriteBatchNode
                                          batchNodeWithFile:@"ant-animation.png"];
    [self addChild:spriteSheet_ant];

    // 3rd Step
    // 3) Gather the list of frames
    NSMutableArray *walkAnimFrames = [NSMutableArray array];
    for(int i = 1; i <= 24; ++i) {
        [walkAnimFrames addObject:
         [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:
          [NSString stringWithFormat:@"%d.png", i]]];

    }

    // 4th Step
    // 4) Create the animation object
    CCAnimation *walkAnim = [CCAnimation
                             animationWithSpriteFrames:walkAnimFrames delay:0.05f];

    // 5th Step
    // 5) Create the sprite and run the animation action
    self.ants = [CCSprite spriteWithSpriteFrameName:@"1.png"];
    _ants.position = ccp(winSize.width, winSize.height/6);
    //_ants.position = ccp(459, 16);
    self.walkActionAnt = [CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation:walkAnim]];
    [_ants runAction:_walkActionAnt];
    [spriteSheet_ant addChild:_ants];
    CCLOG(@"Position %@",NSStringFromCGPoint(_ants.position));
    [self walkingAnts];

}

-(void) walkingAnts
{
    // 2) Set the desired velocity
    float antVelocity = 480.0/10.0;

    // 3) Figure out the amount moved in X and Y
    CGPoint waking_Path = CGPointMake(X_AXIS_ENDINGPATH, _ants.position.y);
    CGPoint moveDifference = ccpSub(waking_Path, _ants.position);

    // 4) Figure out the actual length moved
    float distanceToMove = ccpLength(moveDifference);

    // 5) Figure out how long it will take to move
    float moveDuration = distanceToMove / antVelocity;

    // 7) Run the appropriate actions
    //[_ants stopAction:_moveAction];

    id restartAntWalk = [CCCallFuncN actionWithTarget:self selector:@selector(antMoveEnded:)];

    self.moveActionAnt = [CCSequence actions:
                       [CCMoveTo actionWithDuration:moveDuration position:waking_Path],
                       restartAntWalk,
                       nil];
    //self.moveActionAnt.tag = 121;
    [_ants runAction:_moveActionAnt];
    _movingAnt = TRUE;

}

- (void) antMoveEnded: (ccTime) dt
{
    if(_ants.position.x == -50)
    {
        [_ants stopAction:_moveActionAnt];
        //[self stopActionByTag:121];
        _movingAnt = FALSE;
        [self walk_Ants];
    }
} 
```

**GrassHopper 代码（螳螂）**

```
-(void) mantisCome
{
    float w_index = arc4random() % 480;
    //float h_index = arc4random() % 320;

    self.moveActionMantis = [CCSequence actions:
                             [CCMoveTo actionWithDuration:2 position:ccp(w_index, 63)],

                             nil];

    [_mantis runAction:_moveActionMantis];
    [self schedule:@selector(timer:) interval:5];

}

-(void) mantisGo
{
    self.moveActionMantis = [CCSequence actions:
                             [CCMoveTo actionWithDuration:2 position:ccp(-50, 280)],

                             nil];

    [_mantis runAction:_moveActionMantis];
    [self unschedule:@selector(timer:)];
    [self mantisAnimation];
}

#pragma -mark Mantis Animation
-(void) mantisAnimation
{

    // 1) Cache the sprite frames and texture
    [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:
     @"mantis-animation.plist"];

    /// 2) Create a sprite batch node
    CCSpriteBatchNode *spriteSheet_mantis = [CCSpriteBatchNode
                                             batchNodeWithFile:@"mantis-animation.png"];
    [self addChild:spriteSheet_mantis];

    // 3rd Step
    // 3) Gather the list of frames
    NSMutableArray *walkAnimFrames_mantis = [NSMutableArray array];
    for(int i = 1; i <= 14; ++i) {
        [walkAnimFrames_mantis addObject:
         [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:
          [NSString stringWithFormat:@"%d.png", i]]];

    }

    // 4th Step
    // 4) Create the animation object
    CCAnimation *walkAnim_mantis = [CCAnimation
                                    animationWithSpriteFrames:walkAnimFrames_mantis delay:0.05f];

    // 5th Step
    // 5) Create the sprite and run the animation action
    self.mantis = [CCSprite spriteWithSpriteFrameName:@"1.png"];
    _mantis.position = ccp(winSize.width+100, winSize.height+100);
    _mantis.flipX=YES;
    //_mantis.position = ccp(459, 16);
    self.walkActionMantis = [CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation:walkAnim_mantis]];
    walkAnim_mantis.restoreOriginalFrame = NO;
    [_mantis runAction:_walkActionMantis];
    [spriteSheet_mantis addChild:_mantis];
    //CCLOG(@"Position %@",NSStringFromCGPoint(_mantis.position));
    [self mantisCome]; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:27:10.947

我弄清楚了问题所在。当我为蚂蚁创建动画时，我正在使用这段代码

```
NSMutableArray *walkAnimFrames = [NSMutableArray array];
    for(int i = 1; i <= 24; ++i) {
        [walkAnimFrames addObject:
         [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:
          [NSString stringWithFormat:@"%d.png", i]]];

    }

self.ants = [CCSprite spriteWithSpriteFrameName:@"1.png"]; 
```

在为螳螂创建动画时

```
NSMutableArray *walkAnimFrames_mantis = [NSMutableArray array];
    for(int i = 1; i <= 14; ++i) {
        [walkAnimFrames_mantis addObject:
         [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:
          [NSString stringWithFormat:@"%d.png", i]]];

    }

self.mantis = [CCSprite spriteWithSpriteFrameName:@"1.png"]; 
```

我对两者都使用了 1.png。self.ant 和 self.mantis。我创建了一个新的 plist 文件并将 png 名称从 1.png 更改为 ant1.png 。现在可以了。

# java - 如何使用 PDFBOX 为 PDF 表单中存在的每个字段设置定义值

> ID：14827013
> 
> 赞同：0
> 
> 时间：2013-02-12T06:50:12.080
> 
> 标签：java, pdf, pdfbox

如何为 PDF 表单中存在的每个字段设置定义值，考虑到我的 PDF 表单中有 5 个字段，例如 2 个文本框（名字和姓氏）两个复选框（Check_1，Check_2），2 个单选按钮（男,Female) 然后最后我有另一个文本框（地址），现在我必须为每个字段定义或设置一个值，比如 1 代表名字，2 代表姓氏，3 代表 Check_1，直到 7 代表地址下面是定义每个字段值的一段代码，但是在为男性和女性字段设置单选按钮字段的值时，我遇到了一些问题，它使男性和女性的其他字段显示为“1”显示正确的值

谁能帮帮我请...

谢谢

```
List FieldTypes = form.getFields();
    PDField pdfFields;
        for (int i = 0; i < FieldTypes.size(); i++) {

            pdfFields = (PDField) FieldTypes.get(i);
            String type = null;

            if (pdfFields instanceof PDTextbox) {
                type = "TextBox";
                String iAsString = Integer.toString(i);
                pdfFields.setValue(iAsString);
                System.out.println("Text" + "   "+ pdfFields.getFullyQualifiedName());
             } else if (pdfFields instanceof PDCheckbox) {
                type = "CheckBox";
                String iAsString = Integer.toString(i);
                System.out.println(iAsString);
                System.out.println("CheckBox" + "   "+ pdfFields.getFullyQualifiedName());
            } else if (pdfFields instanceof PDRadioCollection) {

                List kids = pdfFields.getKids();
                for (Object kid : kids) {
                      if (kid instanceof PDCheckbox) {
                      PDCheckbox checkbox = (PDCheckbox) kid;
                      String Name = checkbox.getOnValue();
                      String iAsString = Integer.toString(i);
                      System.out.println(iAsString);
                      type = "RadioButton";
                      System.out.println("RadioButton"+"  "+checkbox.getOnValue());
                      }

                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:37:54.177

基于文档，我认为 getOnValue() 方法仅返回已检查或未检查的状态。您可以尝试 getPartialName()、getValue()、getFullyQualifiedName()、getAlternateFieldName() 或任何其他方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-12T20:43:05.517

使用单选按钮，您必须弄清楚“On Values”是什么，类似于复选框。但是，单选按钮有多个 On 值，因此它是一种不同的方法。

例如，如果我对一个单选按钮组运行此命令，您必须从检查储蓄或货币市场中进行选择，我们将看到打印：

**帐户类型 (org.apache.pdfbox.pdmodel.interactive.form.PDRadioButton)**

**单选按钮**

**[储蓄、支票、货币市场]**

```
public void list(PDField field)
{
    System.out.println(field.getFullyQualifiedName() + " (" + field.getClass().getName() +")");

    if(field instanceof PDRadioButton){
        System.out.println("Radio Button");
        System.out.println(((PDRadioButton) field).getOnValues());
    }
} 
```

如果我想选中“Checking”按钮，我会将字段的值设置为“Checking”。

希望这会有所帮助。

# iphone - UIView 子视图不显示

> ID：14827017
> 
> 赞同：0
> 
> 时间：2013-02-12T06:50:33.377
> 
> 标签：iphone, objective-c

在我的 UIView 子类（我在 Interface Builder 中实例化）中，有几个按钮作为子视图，我在 initWithCoder 方法中添加到我的视图中，如下所示：

```
theButton = [UIButton buttonWithType:UIButtonTypeCustom];
            [theButton setFrame:CGRectMake([UIScreen mainScreen].bounds.size.height-150-10, 289, 150, 21)];
            [theButton.titleLabel setTextAlignment:UITextAlignmentRight];
            [theButton setOpaque:YES];
            [theButton.titleLabel setFont:[UIFont fontWithName:@"MyFont" size:32.0]];
            [theButton.titleLabel setTextColor:[UIColor redColor]];
            [theButton.titleLabel setText:@"text"];
            [self addSubview:theButton];
            [theButton addTarget:myTarget action:@selector(pause) forControlEvents:UIControlEventTouchUpInside]; 
```

但是按钮不会按预期绘制。`drawRect:`如果我在和`po [self subviews]`llvm中设置断点，我会得到这个输出。

```
$0 = 0x0c93e860 <__NSArrayM 0xc93e860>(
<UIButton: 0xc93d910; frame = (10 289; 150 21); alpha = 0.5; layer = <CALayer: 0xc93d4a0>>,
<UIButton: 0xc93e2d0; frame = (408 289; 150 21); layer = <CALayer: 0xc93e390>>
) 
```

那么为什么我的按钮不显示呢？

编辑：我的超级视图的递归描述：

```
<UIView: 0xa46b220; frame = (0 0; 320 568); transform = [0, -1, 1, 0, 0, 0]; autoresize = RM+BM; layer = <CALayer: 0xa46b280>>
   | <MyView: 0xa168710; frame = (0 0; 568 320); autoresize = W+H; layer = <CALayer: 0xa1687d0>>
   |    | <UIButton: 0xa16c160; frame = (10 289; 150 21); alpha = 0.5; layer = <CALayer: 0xa16bcc0>>
   |    |    | <UIButtonLabel: 0xa16c3e0; frame = (0 0; 0 0); clipsToBounds = YES; hidden = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0xa16c480>>
   |    | <UIButton: 0xa16cb00; frame = (408 289; 150 21); layer = <CALayer: 0xa16cbc0>>
   |    |    | <UIButtonLabel: 0xa16c7e0; frame = (0 0; 0 0); clipsToBounds = YES; hidden = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0xa16c880>> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:01:51.077

好吧，我的猜测是您的按钮正在显示，但是您将其设置为自定义按钮，没有正常状态的文本（并且因为您没有使用任何背景图像或颜色，它似乎不可见）。

```
UIButton* button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setTitle:@"Text" forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:01:42.530

不要调用`setText`按钮的标签，而是尝试发送`setTitle:forState`到按钮（不是它的标题标签）：

```
[theButton setTitle:@"text" forState:UIControlStateNormal] 
```

# c - libgmp.so 的哈希值会自动改变

> ID：14827018
> 
> 赞同：1
> 
> 时间：2013-02-12T06:50:35.850
> 
> 标签：c, linux, hash, shared-libraries, gmp

我在 RHEL 5.3 上的应用程序中使用 libgmp.so.3.3.3。从我的应用程序中，我通过 sha512sum 实用程序获取 /usr/lib64/libgmp.so.3.3.3 的哈希值。我的要求是 gmp 的哈希值应该与 gmp 首次安装时的哈希值匹配，否则会出现错误退出。

当我几次运行我的应用程序时，突然发现 libgmp.so.3.3.3 的哈希值发生了变化，我的应用程序退出了。当我重新安装 gmp 时，它再次开始正常工作，因为哈希与我的应用程序中硬编码的哈希匹配。

我想知道这是否是一个已知问题？硬盘驱动器上 .so 文件的哈希值是否会自动更改，或者我是否正在处理一些未定义的行为？

问候

# jquery - 使用jquery从数据属性访问数据

> ID：14827030
> 
> 赞同：-1
> 
> 时间：2013-02-12T06:51:39.453
> 
> 标签：jquery, css-selectors

在数据属性被识别后，我一直在尝试访问数据和嵌套元素，但我没有运气，这里是代码：

```
 $('#item-prize-location').find('[data-region]').each(function(){

  //want to access data-region value
      //want to access nested divs with        

 }); 
```

当我做一个console.log(this) 是给我所有的嵌套元素，但我不知道如何访问它们或数据区域的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:55:59.903

```
 $('#item-prize-location').find('[data-region]').each(function(){

mydata=$(this).attr('data-region') //or mydata=$(this).data('region') 
//do stuff with mydata-- that is the data in the selected element
//for example:
console.log(mydata)
//You can access the element itself using `this` or $(this)

 }); 
```

`$.each`总是返回元素。您需要重新访问函数内部的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:56:09.157

试试这个：[**试试小提琴**](http://jsfiddle.net/WU27r/)

```
$('#item-prize-location').find('[data-region]').each(function(){
   console.log($(this).data('region'));       
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T06:54:39.097

您可以使用[`dataset`](https://developer.mozilla.org/en-US/docs/DOM/element.dataset)属性或 jQuery[`data`](http://api.jquery.com/data/)方法：

```
$('#item-prize-location').find('[data-region]').each(function(){
      var region = this.dataset.region;
      // var region = $(this).data('region');
}); 
```

您还可以使用[`map`](http://api.jquery.com/data/)方法并将值存储在数组中。

```
var regions = $('#item-prize-location div[data-region]').map(function(){
      return this.dataset.region;
}).get(); 
```

# android - 如何在状态栏中显示/隐藏 GPS 图标？

> ID：14827033
> 
> 赞同：0
> 
> 时间：2013-02-12T06:51:46.680
> 
> 标签：android

每当我调用 get lat long 函数时，我都需要在状态栏上显示 GPS 图标。

但是现在，gps 图标显示在整个应用程序中。

如何在状态栏中显示/隐藏 GPS 图标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T06:55:35.633

不，使用公共 API 是不可能的。

要做到这一点，你不仅需要一个有根电话，而且你需要修改`services.jar`（也许`framework.jar`还有）才能隐藏它。简而言之，除非您正在编译自己的 Android ROM 版本，否则您无法真正做到这一点。

或者，[正如 Somewhere 所建议的](https://stackoverflow.com/questions/5747875/how-to-programmatically-remove-gps-blinking-icon-from-status-bar-in-android-or-m/5748596#5748596)，您可以完全隐藏状态栏。

但是，如果您想确保在不使用 GPS 图标时不显示它，则意味着您还没有打电话`removeUpdates()`，因此系统会让用户知道他们的位置正在被应用程序。要删除图标，只需调用`removeUpdates()`.`LocationManager`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:03:52.670

如果您愿意仅在一个屏幕中获取 GPS 数据，您可以删除/取消注册 Listener，`onPause()`这将删除状态栏中的 GPS 图标。`onResume()`此外，当您再次切换到同一屏幕/活动时，您可以再次在内部注册侦听器以获取 GPS 图标。

您可以查看[`this`](http://hejp.co.uk/android/android-gps-example/)示例它是如何完成的。

此外，当您完成 GPS 工作后，取消注册 LocationListener 总是一件好事，因为它可能会过快耗尽电池，这是用户根本不喜欢的。

# php - PHPUnit 模拟父方法

> ID：14827040
> 
> 赞同：7
> 
> 时间：2013-02-12T06:52:02.263
> 
> 标签：php, unit-testing, mocking, phpunit

我在模拟父方法时遇到问题，这是示例：

```
class PathProvider
{
    public function getPath()
    {
        return isset($_SERVER['REQUEST_URI']) ? $_SERVER['REQUEST_URI'] : '/';
    }
}

class Uri extends PathProvider
{
    public function getParam($param)
    {
        $path = $this->getPath();

        if ($path == $param)
            return 'OK';
        else
            return 'Bad';
    }
} 
```

现在我想要模拟方法 getPath()，并调用方法 getParam() 来接收模拟值。

```
$mock = $this->getMock('PathProvider');

$mock->expects($this->any())
->method('getPath')
->will($this->returnValue('/panel2.0/user/index/id/5')); 
```

我正在写这部分，但我不知道如何将这个模拟值传递给测试方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T07:25:49.457

你只需要模拟`Uri`课。您只能模拟一种方法 ( `getPath`)，如下所示：

```
$sut = $this->getMock('Appropriate\Namespace\Uri', array('getPath'));

$sut->expects($this->any())
    ->method('getPath')
    ->will($this->returnValue('/panel2.0/user/index/id/5')); 
```

然后你可以像往常一样测试你的对象：

```
$this->assertEquals($expectedParam, $sut->getParam('someParam')); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-07T17:41:44.957

我和我的朋友们写 mockito 就像嘲笑图书馆一样。[ouzo-goddies#嘲笑](http://ouzo.readthedocs.org/en/latest/documentation/tests.html#mocking)

```
$mock = Mock::create('\Appropriate\Namespace\Uri');
Mock::when($mock)->getPath()->thenReturn(result); 
```

# php - 从嵌套在包含的表中选择一个字段

> ID：14827043
> 
> 赞同：0
> 
> 时间：2013-02-12T06:52:07.227
> 
> 标签：php, cakephp, cakephp-2.0

![我的用例](../Images/fa4594d59b0d4b33779e2e24663ae226.png)

我有一个如上所述的用例。在我的`CategoriesController.php`中，我进行`Category`如下查询：

```
$category = $this->Category->Transaction->find("first", array(
    "fields" => array("Category.*", "COUNT(*) AS TOTAL", "AVG(Transaction.debit) AS AVERAGE_COST"),
    "conditions" => array("not" => array("Transaction.debit" => null)),
    "contain" => array("Category" => array("CategoryType")),
    "group" => "Transaction.category_id",
    "order" => array("TOTAL" => "desc"),
)); 
```

这就是我得到的回报：

```
Array
(
    [Category] => Array
        (
            [id] => 2
            [name] => FOOD
            [category_type_id] => 2
        )

    [0] => Array
        (
            [TOTAL] => 4596
            [AVERAGE_COST] => 7.668451
        )

) 
```

**问题**：如何`CategoryType`在返回字段中指定？

我尝试过`Category.CategoryType.*`并且`CategoryType.*`没有工作。但是如果我完全取出`fields`数组，让cakephp默认处理，cakephp设法返回数组中的CategoryType。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:26:48.350

有几件事要在这里寻找：

1.  您是否将可包含行为附加到您的`category_type`模型？从书中：*当使用“字段”和“包含”选项时 - 小心包含您的查询直接或间接需要的所有外键。还请注意，因为 Containable 必须附加到容器中使用的所有模型，您可以考虑将其附加到您的 AppModel。*

2.  由于您正在分配`fields`可包含参数的外部，因此这可能会覆盖您的可包含行为。考虑移动`"fields" => array("Category.*", "COUNT(*) AS TOTAL", "AVG(Transaction.debit) AS AVERAGE_COST"),`到您的 contains 数组中。

# javascript - IE 显示错误 - 对象不支持此属性或方法

> ID：14827047
> 
> 赞同：2
> 
> 时间：2013-02-12T06:52:19.670
> 
> 标签：javascript, jquery, internet-explorer

当我要使用 AJAX 提交数据时，IE 显示错误，例如`object doesn't support this property or method`

```
 $("#savebasicInfo").live("click",function()
  {

    var lookingfor='';
    var interestedIn='';
    $(".lookingfor").each(function(i)
    {
      if(this.checked == true)
      {
        lookingfor= lookingfor+","+$(this).val().trim();  // error found here
      }
      i++;
    });
    $(".interestedIn").each(function(j)
    {
      if(this.checked == true)
      {
        interestedIn= interestedIn+","+$(this).val().trim(); // error found here
      }
      j++;
    });
    $.ajax(
    {

      type: "POST",
      url: $("#cfgRoot").val()+'/accounts/basicInfoPost.php',
      data:
      {
        city:$("#city").val().trim(),
        hometown:$("#hometown").val().trim(),
        interestedIn:interestedIn,
        relationship:$("#relationship").val().trim(),
        lookingfor:lookingfor,
        political:$("#political").val().trim(),
        religious:$("#religious").val().trim()
      },
      success: function(responce)
      {
        if(responce == 1)
        {
            $("#basicProfileMain").load("basicInfoMain.php");
            $("#basicProfileMain").css({"height":"auto"});

        }
      }
    });
  }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T06:57:42.243

您不能在 JavaScript 中“修剪”字符串，因为核心 js 中没有修剪方法。但是，您可以使用 jQuery 的修剪功能。

```
$.trim($(this).val()) 
```

# jquery - 对 jQuery UI 自动完成功能感到困惑

> ID：14827049
> 
> 赞同：1
> 
> 时间：2013-02-12T06:52:23.387
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui, jquery-ui-autocomplete

我正在尝试在文本框中实现 jQuery UI 自动完成行为。我遵循了一个示例，它工作正常。但是一些语法让我感到困惑。这是代码片段：

```
<div>
    @Html.LabelFor(a => a.name)
    @Html.TextBoxFor(a => a.name, new { data_autocomplete_url = Url.Action("Autocomplete") })
</div>

<script type="text/javascript">

    $(document).ready(function () {
        $('[data-autocomplete-url]')
        .each(function () {
            $(this).autocomplete({
                source: $(this).data("autocomplete-url")
            });
        });
    });

</script> 
```

我声明 TextBox 有一个属性`data-autocomplete-url`。但在 jQuery UI 自动完成功能中，我只使用`autocomplete-url`不带`data-`前缀的功能。这是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:55:11.653

该[`.data()`](http://api.jquery.com/data/)方法已经知道您正在调用`data-*`属性的值。并且调用时不需要`data-`在属性名称前加前缀。

# assembly - 使用方括号读取 NASM 中的值时，默认的段寄存器是什么？

> ID：14827050
> 
> 赞同：1
> 
> 时间：2013-02-12T06:52:26.300
> 
> 标签：assembly, x86, nasm

众所周知，我们可以在 NASM 中使用方括号来读取地址的值，例如：

```
mov esi,  [ebp +8]
mov edi, [var]   -->  (var is a variable) 
```

方括号中的值表示偏移地址，但是当我们使用该格式读取值时，我们绝对需要一个段，无论我们处于实模式还是受保护模式，那么 NASM 使用的默认段寄存器是什么？我知道 Windows 使用平面模式，但如果我为不同的段寄存器（cs、ss、ds、es、fs、gs）设置不同的值，NASM 将使用哪个段寄存器？我想是`ds`吧？在方括号中使用不同的表达式时，段寄存器是否不同？实模式和保护模式下的默认段寄存器是否相同？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T06:59:17.873

对于所有“基址寄存器”，默认段寄存器是 ds，除了

```
 mov esi, [ebp + 542] ; // uses ss:
 mov esi, [esp + 123] ; // uses ss: too
 mov eax, [eax + esp] ; // uses ds, because eax is the base 
                        // and esp is the scalable register (with scale==1)

 stosb   ;; uses es: 
```

这不是汇编程序的属性，而是处理器的属性。要覆盖它，在指令之前有一个字节段覆盖前缀。

# javascript - Windows 8 JavaScript 中的 ListView 以获取单击项目

> ID：14827052
> 
> 赞同：3
> 
> 时间：2013-02-12T06:52:36.010
> 
> 标签：javascript, mobile, windows-8, winjs

我正在使用以下代码获取 ListView，假设我想点击任何需要进入详细页面的特定项目，我该怎么做？

```
 <div id="basicListView" data-win-control="WinJS.UI.ListView"
        data-win-options="{itemDataSource : RenttheRooRental.itemList.dataSource, 
            itemTemplate: mediumListIconTextTemplate, layout: {type: WinJS.UI.GridLayout}, oniteminvoked : handler}">
    </div>

 <div id="mediumListIconTextTemplate" data-win-control="WinJS.Binding.Template" class="">
        <div id="menu" style="width: 150px; height: 100px;">

            <!-- Displays the "picture" field. -->
            <a href="URL:url">
                <img src="#"
                    data-win-bind="alt: title; src: picture" />
            </a>
            <div>

                <!-- Displays the "title" field. -->
                <h2 data-win-bind="innerText: title"></h2>

            </div>
        </div>
    </div> 
```

任何人都可以指导我吗？如果你知道这个问题请评论我会再次解释谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T07:17:51.350

查看 MSDN 上的[HTML ListView Essentials 示例](http://code.msdn.microsoft.com/windowsapps/ListView-basic-usage-sample-fcc451db)。

`handler`您的 ListView 已经定义了一个在其`data-win-options`属性中调用的处理程序。

在后面的代码中，您需要创建该事件处理程序：

```
function handler(eventObject) { 
    eventObject.detail.itemPromise.done(function (invokedItem) { 
        // In here, you can use invokedItem.index and invokedItem.data
    }); 
} 
```

# ios - SKPaymentTransaction 的 originalTransaction.transactionReceipt nil 用于恢复非消耗品

> ID：14827059
> 
> 赞同：4
> 
> 时间：2013-02-12T06:53:14.743
> 
> 标签：ios, in-app-purchase

在调用 restoreCompletedTransactions 后，对于非消耗品，返回的 SKPaymentTransactions 的 originalTransaction.transactionReceipt 属性似乎为零。这是文档说我们应该找到原始交易收据的地方：

[https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/MakingaPurchase/MakingaPurchase.html#//apple_ref/doc/uid/TP40008267-CH3-SW2](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/MakingaPurchase/MakingaPurchase.html#//apple_ref/doc/uid/TP40008267-CH3-SW2)

有没有人真的让这不是零 - 如果是这样，怎么办？

在返回的 SKPaymentTransactions 中，看起来实际正确的 transactionReceipt 在他们的 transactionReceipt 属性中（而不是他们的 originalTransaction.transactionReceipt 属性）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-17T15:45:06.547

它也发生在我身上。

这很奇怪，但即使 Apple 在其文档中声明 位于`transactionReceipt`中`originalTransaction`，我还是`transactionReceipt`在原始`SKPaymentTransaction`类中找到了 。

因此，在选择要继续传递的交易之前，我设置了一个小检查：

```
SKPaymentTransaction *passedTransaction = nil;
if (transaction.transactionReceipt) {
    passedTransaction = transaction;
} else if (transaction.originalTransaction.transactionReceipt) {
    passedTransaction = transaction.originalTransaction;
}
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-17T18:26:51.253

我也遇到了同样的问题。似乎`transactionReceipt`on the`originalTransaction`将在恢复购买时始终返回 nil。从苹果文档中的讨论中`transactionReceipt`：

[讨论](https://developer.apple.com/library/ios/documentation/StoreKit/Reference/SKPaymentTransaction_Class/Reference/Reference.html#//apple_ref/occ/instp/SKPaymentTransaction/originalTransaction)
此属性的内容是未定义的，除非`transactionState`设置为`SKPaymentTransactionStateRestored`。

由于在恢复（消耗品）期间，`transactionState`总是设置为`SKPaymentTransactionStatePurchased`，所以该`originalTransaction.transactionReceipt`属性将始终为零。

# c# - 如何在 wpf DataGrid 中更改选定行背景图像

> ID：14827060
> 
> 赞同：2
> 
> 时间：2013-02-12T06:53:16.740
> 
> 标签：c#, wpf, wpf-controls, wpfdatagrid

我有带有以下代码的 DataGrid 。

在替代原生行背景中有我自己的图像。所以有可能然后我也想更改所选行上的行背景图像。

```
 <DataGrid x:Name="dtstandardview" BorderThickness="0" Height="429"  Width="688" BorderBrush="Aqua" MouseLeftButtonDown="dtstandardview_MouseRightButtonUp_1"
                     GridLinesVisibility="None" MouseRightButtonUp="dtstandardview_MouseRightButtonUp_1" 
                     VerticalScrollBarVisibility="Visible" AutoGenerateColumns="False" IsReadOnly="True" 
                      CanUserDeleteRows="False"  AlternationCount="2" CanUserResizeRows="False" Sorting="dtstandardview_Sorting_1"
                     Background="#DCDCDC" HeadersVisibility="Column" CanUserResizeColumns="False"
                      RowHeight="27" SelectionUnit="FullRow" CanUserAddRows="False" MinRowHeight="27" LoadingRow="dtstandardview_LoadingRow" LoadingRowDetails="dtstandardview_LoadingRowDetails" Loaded="dtstandardview_Loaded" Initialized="dtstandardview_Initialized" CellEditEnding="dtstandardview_CellEditEnding" AutoGeneratingColumn="dtstandardview_AutoGeneratingColumn" UnloadingRow="dtstandardview_UnloadingRow" UnloadingRowDetails="dtstandardview_UnloadingRowDetails"    >

                <DataGrid.Resources>
                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="#FF0000"/>
                </DataGrid.Resources>

                <DataGrid.CellStyle>
                    <Style TargetType="{x:Type DataGridCell}">
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="FontSize" Value="12"/>
                        <Setter Property="FontFamily" Value="Arial"/>
                        <Setter Property="Foreground" Value="#404040"/>
                        <Setter Property="BorderBrush" Value="Transparent"/>
                        <Setter Property="BorderThickness" Value="0"/>

                        <Setter Property="Effect">
                            <Setter.Value>
                                <DropShadowEffect BlurRadius="0" Color="#FF000000" Direction="-60" Opacity="0.32" ShadowDepth="1"/>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Margin" Value="10,5" />
                        <Setter Property="VerticalContentAlignment" Value="Bottom"/>
                        <Style.Triggers>
                            <Trigger Property="IsSelected"  Value="True">
                                <Setter Property="Background" Value="#cde0e5"/>
                                <Setter Property="FontSize" Value="12"/>
                                <Setter Property="FontFamily" Value="Arial"/>
                                <Setter Property="Foreground" Value="#404040"/>
                                <Setter Property="BorderBrush" Value="Transparent"/>
                                <Setter Property="BorderThickness" Value="0"/>
                                <Setter Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect BlurRadius="0" Color="#FF000000" Direction="-60" Opacity="0.32" ShadowDepth="1"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="Margin" Value="10,5" />
                                <Setter Property="VerticalContentAlignment" Value="Bottom"/>
                            </Trigger>
                        </Style.Triggers>

                    </Style>
                </DataGrid.CellStyle>
                <DataGrid.RowStyle>
                    <Style TargetType="{x:Type DataGridRow}">
                        <Setter Property="FontSize" Value="12"/>
                        <Setter Property="FontFamily" Value="Arial"/>
                        <Setter Property="Foreground" Value="#404040"/>
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="DataContext">
                            <Setter.Value>
                                <TextBlock Margin="10,0,0,0" TextWrapping="Wrap" Text="{Binding}">
                                    <TextBlock.Effect>
                                        <DropShadowEffect BlurRadius="0" Color="#FF000000" Direction="-60" Opacity="0.32" ShadowDepth="1"/>
                                    </TextBlock.Effect>
                                </TextBlock>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Background" >
                                    <Setter.Value>
                                        <ImageBrush ImageSource="/ClientApplication;component/Images/bonus_progress_bg.png"/>

                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.RowStyle>
                <DataGrid.RowBackground >
                    <ImageBrush ImageSource="/ClientApplication;component/Images/second_row_bg.png"/>
                </DataGrid.RowBackground>
                <DataGrid.AlternatingRowBackground>
                    <ImageBrush ImageSource="/ClientApplication;component/Images/bonus_progress_bg.png"/>
                </DataGrid.AlternatingRowBackground>

                <DataGrid.ColumnHeaderStyle>
                    <Style TargetType="{x:Type DataGridColumnHeader}">
                        <Setter Property="VerticalContentAlignment" Value="Center" />
                        <Setter Property="ContentTemplate" >
                            <Setter.Value>
                                <DataTemplate>
                                    <TextBlock Foreground="#404040" FontWeight="Bold" Margin="10,0,0,0" TextWrapping="Wrap" Text="{Binding}" TextOptions.TextFormattingMode="Display">
                                        <TextBlock.Effect>
                                            <DropShadowEffect BlurRadius="0" Color="#FFFFFF" Direction="-90" Opacity="0.40" ShadowDepth="1"  RenderOptions.ClearTypeHint="Auto" />
                                        </TextBlock.Effect>
                                    </TextBlock>

                                </DataTemplate>
                            </Setter.Value>
                        </Setter>

                        <Setter Property="Background">
                            <Setter.Value>
                                <ImageBrush ImageSource="/ClientApplication;component/Images/table_bg_header.png"/>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="BorderBrush">
                            <Setter.Value>
                                <ImageBrush   ImageSource="/ClientApplication;component/Images/titel_bg.png"/>
                            </Setter.Value>
                        </Setter>

                        <Setter Property="Foreground" Value="#404040" />
                        <Setter Property="BorderThickness" Value="0, 0, 1, 0"/>
                        <Setter Property="Height" Value="26" />
                        <Setter Property="FontSize" Value="14"/>
                        <Setter Property="FontFamily" Value="Arial"/>

                    </Style>
                </DataGrid.ColumnHeaderStyle>

            </DataGrid> 
```

当我选择行时，我在网格上获得了以下效果。

![在此处输入图像描述](../Images/706eac026fcf7494684ca456edf830aa.png)

我想要浅蓝色的整行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:04:20.637

您可以使用`TemplateBinding`

```
<Border Name="DataGridCellBorder"
        Background="{TemplateBinding Background}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T14:51:33.697

以前我遇到过同样的问题，所以我遵循了以下方法，它对我来说效果很好。一旦尝试...

您正在为网格顶部右行指定一些宽度（**您正在使用按钮**）？只需为绑定元素提供相同的宽度，**即，**如果您使用**Textblock** ，则将该宽度与其标题相同。

# c++ - XML - SelectNodes - 如何获取具有某些值的属性的节点（MFC）

> ID：14827061
> 
> 赞同：0
> 
> 时间：2013-02-12T06:53:26.603
> 
> 标签：c++, xml, visual-c++, mfc, msxml

我在 MFC 工作

我想从 XML 获取所有节点，属性具有一些值但值不应为空，如果不存在属性，则不应选择节点

```
<node att="sss"> - should be selected
<node att="sd342ss"> - should be selected
<node att=""> - empty value should not be selected
<node > - not having attribute should not be selected 
```

**如何为此创建 XPATH？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:38:37.107

给定如下结构：

```
<root>
    <node att="sss" />
    <node att="sd342ss" /> 
    <node att="" />
    <node />
</root> 
```

仅选择具有属性且属性值不为空的节点的 XPath 如下所示：

```
"//node[@att and string-length(@att) > 0]" 
```

# java - 需要将 c 中的结构数组从 jni 返回到 java（作为对象数组）

> ID：14827063
> 
> 赞同：0
> 
> 时间：2013-02-12T06:53:37.787
> 
> 标签：java, c++, object, java-native-interface

我必须将一组结构值从 c++ (jni) 返回到 java。我的c ++结构如下

```
MyCStructure
{

byte *Data;
int dataLength;
int width;
int height;
}mycstr; 
```

我有我的java结构

```
public class MyJavaStructure
{
    public byte[] Data;
    public int dataLength;
    public int width;
    public int height;
} 
```

我的**JavaMainClass.java**是

```
 MyJavaStructure[] mystr =  MyJavaStructure[4]; 
public native int Process();
public LSImage getValues()
{
     return this.mystr ;
}
public void setValues(MyJavaStructure bDetails)
{
     this.mystr = bDetails; 
} 
```

我尝试使用 setValues 的 GetMethodId 直接从 JNI 传递对象数组（MyJavaStructure）。

我的 JNI 代码是

```
JNIEXPORT jint JNICALL Java_TestJNI_Process(JNIEnv *jEnv, jobject jObj)
{

    MyCStructure* mycstr = new MyCStructure[4];

    iRet = Process(&mycstr);

    jclass jClass = jEnv->GetObjectClass(jObj);
    jmethodID constructor;

    jmethodID jObjectID = jEnv->GetMethodID (jLegendClass, "setValues", "(LMyCStructure;)V");
    if (jObjectID == NULL)
    {
        throwJavaException(jEnv, "Unable to find the method setValues");
        return NULL;
    }
    jEnv->CallObjectMethod(jObj, jObjectID, (jobject *) mycstr);

    printf ("After setting the output data value\n");

    jEnv->DeleteLocalRef(jClass);

    return iRet;
} 
```

mycstr 中返回的值包含 4 个结构 (MyCStructure) 值数组，我尝试在 MyJavaStructure 类对象中分配，但它返回 null。

我做得对还是我必须改变什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:22:16.697

```
jEnv->CallObjectMethod(jObj, jObjectID, (jobject *) mycstr); 
```

你显然不能那样做。`mycstr`不是`jobject`，也不是指向 的指针`jobject`。`jobject`它本身已经是一个指向不透明结构的指针，你不应该对它与特定 JNI 实现的依赖解耦感兴趣。

由于可从 C 中调用的一组 JNI 函数，C 中的本机代码可以理解 Java 类和对象。Java 方面没有什么互惠的来理解本机对象。**所以答案是否定的，你没有做对。**

如果你想要一个在 Java 和 native 之间同步的结构（一个简单的类），请将类实例作为 jobject 传递给 native 调用，并使用`GetFieldID`后跟 (例如) `Get/SetIntField`。

# wordpress - 如何在 WordPress 插件中实现 ajax？

> ID：14827067
> 
> 赞同：0
> 
> 时间：2013-02-12T06:53:44.010
> 
> 标签：wordpress

我是 wp 开发插件的新手...

```
 <td><img class="dele" src="<?php echo plugins_url( 'images/delete.png' , __FILE__ )?> " onClick="getsize1(<?php echo $Opportunitiy->ID; ?>)"/></td>
            </tr>

  <?php } ?>
  <script type="text/javascript">
 function getsize1(id){
alert (id);
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{

if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
if(xmlhttp.responseText)
{
alert(xmlhttp.responseText);
//window.location.reload();
}
}
}

xmlhttp.open("GET","<?php echo plugins_url( 'delete.php' , __FILE__ )?>?id="+<?php echo $Opportunitiy->ID; ?>,true);
xmlhttp.send();
}

  </script> 
```

我已经在主插件文件中这样写了..我这样调用了delete.php..

```
<?php 

global $wpdb;

var_dump($wpdb);
if (is_object($wpdb) && is_a($wpdb, 'wpdb')) {
echo "DELETE FROM `syn_account` WHERE ID = ".$_GET['id'];
 $sql=$wpdb->prepare("DELETE FROM `syn_account` WHERE ID = ".$_GET['id']);
 $wpdb->query($sql);

//$wpdb->delete("syn_account",  array('ID' =>$_GET['id']));
}
?> 
```

当我打印 var_dump 时，我没有连接其他文件，它的显示错误比我得到一个空值请帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:21:17.513

why not using jquery ?

wordpress has native support for jquery and it's mych more easy then javascript.

i recommend reading om action and hooks, you can develop nothing without know them. on your specific request read here: [http://www.garyc40.com/2010/03/5-tips-for-using-ajax-in-wordpress/](http://www.garyc40.com/2010/03/5-tips-for-using-ajax-in-wordpress/)

good luck.

# .net - 通过 ODBC 驱动程序从 dotnet 连接 sql server

> ID：14827068
> 
> 赞同：0
> 
> 时间：2013-02-12T06:53:46.177
> 
> 标签：.net, sql-server, sql-server-2008-r2

让我们考虑以下通过 odbc 驱动程序连接 sql server 的连接字符串为

```
"Driver={SQL Server Native Client 10.0};Server=xxx.xx.xx.xx,xxxx;Database=mydata;Uid=xx;Pwd=xxxxxx;" 
```

运行此命令时出现错误

```
ERROR [08001] [Microsoft][SQL Server Native Client 10.0]Registry information is corrupt or missing. Make sure the provider installed and registered correctly.

ERROR [08001] [Microsoft][SQL Server Native Client 10.0]Client unable to establish connection

ERROR [08001] [Microsoft][SQL Server Native Client 10.0]A network-related or instance-specific error has occurred while establishing a connection to SQL Server. Server is not found or not accessible. Check if instance name is correct and if SQL Server is configured to allow remote connections. For more information see SQL Server Books Online.
2013-02-12 12:17:00,247 

ERROR    
Error at Executenonquery:ExecuteNonQuery: CommandText property has not been initialized 
```

我也在那台机器上启用了远程连接。

在当前机器上：visual studio 已过期，未安装 sql server 2008 r2。

我现在必须做什么才能解决问题

等待您的回复。。

更新：

当我在系统的管理数据源 [odbc] 中注册驱动程序时，我得到的响应为

```
Connection failed 

sqlsatte:'08001'

Sql Server Error:27

Registry information is corrupt or missing. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:04:59.720

在我看来，您的 SQL Native Client 安装可能存在问题。查看有关安装/卸载 SQL Server Native Client 的[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms131321%28v=sql.105%29.aspx)以及您应该能够在哪里找到已安装的文件。卸载并重新安装它可能是值得的。

一旦您确定它安装正常，使用 ODBC 管理器工具（假设您使用的是 XP）来设置和测试 ODBC 连接。

![显示 SQL Native Client 10 安装的 ODBC 管理窗口](../Images/69345495e83ecaea70fc97f283f7d136.png)

# regex - 如何在 JSON 字段上应用正则表达式以从中提取某些值并将其存储到 Mule Studio 的 PostgreSQL Dataabse 中？

> ID：14827077
> 
> 赞同：1
> 
> 时间：2013-02-12T06:54:16.773
> 
> 标签：regex, json, mule, postgresql-9.2, mule-studio

假设我有一个基于 REST 的服务，它返回一个 JSON 对象，如下所示

```
{
    "AlertDetails":
        {
            "start":0,
            "left":0,
            "_itemList":
                [   
                    {
                        "id":"badntp",
                        "text":"The time cannot be synchronized to the configured time server.",
                        "click":{
                                    "text":"Click here to modify your time settings.",
                                    "url":"datetime.html"
                                },
                        "severity":"warning",
                        "occurred":"20121031T10:18:54",
                        "args":null
                    },
                    {
                        "id":"updatesitefail",
                        "text":"The update site cannot be contacted to determine if software updates are available.",
                        "click":{
                                    "text":"Click here to manually check for updates.",
                                    "url":"http:\\\/\\\/xyz.com\\\/support\\\/xyz.html"
                                },
                        "severity":"info",
                        "occurred":"20121105T17:23:24",
                        "args":"[http:\\\/\\\/xyz.com\\\/support\\\/xyz.html]"
                    }
                ]
        }
} 
```

现在我在 PostgreSQL 中有一个表（比如*testTable*），其结构如下

```
ID       (string)
Severity (string)
Occurred (string) 
```

如何从可用的 JSON 字段中解析这些值，以将其插入 Mule ESB 工作室的 PostgreSQL 数据库中。

testTable 中的最终结果应该是

```
ID                  Severity        Occured
---------           ---------       --------
"badntp"            "warning"       "20121031T10:18:54"
"updatesitefail"    "info"          "20121105T17:23:24" 
```

我的配置文件如下

```
<jdbc:postgresql-data-source name="PostgreSQL_Data_Source"
    user="username" password="pwd" url="jdbc:postgresql://localhost:5432/TestDB"
    transactionIsolation="UNSPECIFIED" doc:name="PostgreSQL Data Source" />

<jdbc:connector name="PostgreSQL_Connector" dataSource-ref="PostgreSQL_Data_Source"
    validateConnections="true" queryTimeout="-1" pollingFrequency="0"
    doc:name="Database">
    <jdbc:query key="InsertRecord"
        value="INSERT INTO &quot;testTable&quot;(&quot;ID&quot;,&quot;Severity&quot;,&quot;Occured&quot;) VALUES (?,?,?)" />
</jdbc:connector>

<flow name="testRestFlow1" doc:name="testRestFlow1">
    <http:inbound-endpoint exchange-pattern="request-response"
        address="http://localhost:8082/index.html" doc:name="HTTP" />
    <http:rest-service-component httpMethod="GET"
        serviceUrl="http://localhost:35798/RestServiceImpl.svc/json/567" />
    <object-to-string-transformer />
    <jdbc:outbound-endpoint exchange-pattern="one-way"
        queryKey="InsertRecord" queryTimeout="-1" connector-ref="PostgreSQL_Connector"
        doc:name="Database" />
</flow> 
```

#[message.payload] 将包含整个 JSON 字符串。`VALUES (?,?,?)`解析 会出现什么（正则表达式或其他内容）`#[message.payload]`？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:59:28.893

您无法使用正则表达式获取数据，因为 JSON 文件的语言不规则（它与上下文无关）。我建议您解析它（为此使用一些库），然后遍历它并读取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:17:06.993

来自[MEL 备忘](http://www.mulesoft.org/documentation/display/current/MEL+Cheat+Sheet#MELCheatSheet-JSONProcessing)单：

> MEL 不直接支持 JSON。json-to-object-transformer 可以将 JSON 有效负载转换为易于使用 MEL 解析的简单数据结构的层次结构。

因此，首先使用将 JSON 转换为数据结构（地图、列表）：

```
<json:json-to-object-transformer returnClass="java.lang.Object" /> 
```

然后我们提取`_itemList`数组：

```
<expression-transformer
    expression='#[message.payload['AlertDetails']['_itemList']]" /> 
```

然后我们将该数组拆分为单独的消息：

```
<collection-splitter /> 
```

从那里，以下表达式将评估为所需的值，以便它们可以在插入查询中使用：

```
#[message.payload.id]
#[message.payload.severity]
#[message.payload.occurred] 
```

# hibernate - 使用动态查询从 3 个表中获取数据

> ID：14827082
> 
> 赞同：3
> 
> 时间：2013-02-12T06:54:22.513
> 
> 标签：hibernate, liferay, liferay-6, dynamicquery

我有 3 个表 user_、userTracker、userTrackerPath

user_ 有 userId 作为 Pk。这是 userTracker 中的 Fk userTracker 有 UserTrackerId 作为 pk 这是 userTrackerPath 中的 Fk 和 userTrackerPath 有 userTrackerPathId 作为 Pk。

user_tables 有字段 firstName、LastName、loginIp、lastLoginIp userTracker 有字段 remoteAddr、remoteHost userTrackerPath 有字段 path_、pathDate

所有这些都是我想要的文件。

我已经编写了一个 sql 查询，它对我来说运行成功，但我想要使用 Dynamic query 的结果。

这是我的 sql 查询。

```
select concat(U.firstName," ",U.lastName) as     FullName,U.loginIp,U.lastLoginIp,UT.remoteAddr,substring(UT.modifiedDate,1,10) as Date,UTP.path_ from demo.User_ U, demo.UserTracker UT, demo.UserTrackerPath UTP where ((U.userId=UT.userId) and (UT.userTrackerId=UTP.userTrackerId)); 
```

我写了带有预测的动态查询，我很困惑我将如何加入它们。

```
//Dynamic Query For User Class

        DynamicQuery dynamicQuery_user = DynamicQueryFactoryUtil.forClass(User.class,PortalClassLoaderUtil.getClassLoader())
                .setProjection(ProjectionFactoryUtil.property("userId"))
                .setProjection(ProjectionFactoryUtil.property("firstName"))
                .setProjection(ProjectionFactoryUtil.property("lastName"))
                .setProjection(ProjectionFactoryUtil.property("loginIp"))
                .setProjection(ProjectionFactoryUtil.property("lastLoginIp"));

        //Dynamic Query For User and UserTracker Class

        DynamicQuery dynamicQuery_userTracker  = DynamicQueryFactoryUtil.forClass(UserTracker.class,PortalClassLoaderUtil.getClassLoader())
                .setProjection(ProjectionFactoryUtil.property("modifiedDate"))
                .setProjection(ProjectionFactoryUtil.property("remoteAddr"));

        //Dynamic Query for UserTracker and UserTrackerPath

        DynamicQuery dynamicQuery_userTrackerPath  = DynamicQueryFactoryUtil.forClass(UserTrackerPath.class,PortalClassLoaderUtil.getClassLoader())
                .setProjection(ProjectionFactoryUtil.property("path_"))
                .setProjection(ProjectionFactoryUtil.property("pathDate")); 
```

我也试过了。。

```
 dynamicQuery_userTracker.add(PropertyFactoryUtil.forName("userId").in(dynamicQuery_user));

        dynamicQuery_userTrackerPath.add(PropertyFactoryUtil.forName("userTrackerId").in(dynamicQuery_userTracker)); 
```

我知道我的方法不正确。任何意见或建议。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-18T15:02:41.073

Jay 我认为您[不能](https://www.liferay.com/community/forums/-/message_boards/message/10926083)使用 DynamicQuery API 进行连接。您可以使用 in 和 notin 方法进行[子查询。](http://www.liferay.com/community/forums/-/message_boards/message/6729269)

# teamcity - TeamCity 中的快照依赖项中的覆盖参数

> ID：14827093
> 
> 赞同：6
> 
> 时间：2013-02-12T06:55:12.543
> 
> 标签：teamcity

我真的无法理解 teamcity (7.1) 中快照依赖项的概念。

我们有一个构建项目，它根据构建参数（数据库名称和文件）部署数据库，我有一个构建项目，用于构建和部署我们的 Web 应用程序。

我现在想做的是链接这两个构建但覆盖构建参数。我找到了手册如何访问依赖构建参数 (%dep.btXX.yyy%) 但我不想访问它们，我想覆盖它们！

我怎样才能做到这一点？我创建了一个新版本，在其中触发了构建和部署，然后触发了数据库构建，但它完全忽略了我的依赖参数，而且我也无法更改构建的顺序。

感谢帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-06-10T16:57:24.190

根据[文档](https://confluence.jetbrains.com/display/TCD9/Predefined+Build+Parameters#PredefinedBuildParameters-OverridingDependenciesProperties)，现在可以在 Teamcity 9 中使用：

> 覆盖依赖属性
> 
> 从 TeamCity 9.0 开始，可以通过在依赖构建中重新定义依赖参数来覆盖依赖参数。比如构建配置A依赖B，B依赖C；A 可以使用以下格式更改其任何依赖项中的参数：reverse.dep..
> 
> 也可以一次更改所有依赖项中的参数：reverse.dep.*。
> 
> 要覆盖的依赖属性可以在依赖构建 A 的参数名称中指定，可以在自定义构建对话框中或通过构建配置参数。
> 
> 将新参数推送到构建中将取代“如果有合适的则不运行新构建”快照依赖项选项，并且如果参数设置为非默认值，则可能会触发新构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T23:14:49.850

**更新：此答案仅与 TeamCity v8 或更早版本有关**

我自己尝试过，但遗憾的是我怀疑目前不可能。

[Build Dependencies Setup](http://confluence.jetbrains.com/display/TCD7/Build+Dependencies+Setup#BuildDependenciesSetup-Reusingbuilds)文档支持这一点：

> 当构建 A 依赖于构建 B 时，您可以将构建 B 的属性传递给构建 A，即属性**只能在构建链流的方向上传递，反之则不行**。

我认为这样的（通常是明智的）原因是由于以下原因：

*   依赖的构建配置可以是多个其他构建配置的依赖关系。

想一想：如果两个父母想将他们的（不同的）参数传递给依赖的构建，那么“最后一次成功的构建”他们会得到什么？从理论上讲，TeamCity 可以检查最后一次构建的属性是否与需要的匹配（否则重新构建）。但即便如此，你最终会得到一个针对所有不同环境的构建的丑陋构建历史。这确实不符合构建配置的概念。

重用构建配置的最佳方法是将它们模板化，然后在项目级别创建多个项目设置属性，以便它们可用于所有包含的构建配置。

最终，最好的建议可能是重新考虑您是否真的需要为您的项目使用两种构建配置。最佳实践是尽量减少构建配置和构建步骤的数量 - 将尽可能多的构建逻辑放入您自己的脚本中。

# c - 如何使用按位运算将 1 添加到 unsigned int 中的浮点数？

> ID：14827099
> 
> 赞同：4
> 
> 时间：2013-02-12T06:55:23.277
> 
> 标签：c

我正在尝试使用按位运算来实现我自己的楼层函数。我让它为正数工作，所以我得到

```
 roundDown(5.4) = 5\. 
```

我也想舍入负数。例如，我想要

```
roundDown(-5.4)= -6 
```

我的策略是取负数，清除有符号位使其为正数，加 1，像我对正数所做的那样向下舍入，然后将有符号位设置回 1 以使数字再次为负数。

我的问题是我不知道如何将 1 添加到 unsigned int。我想使用按位运算来做到这一点，我已经做了几个小时，真的很想弄清楚这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-23T19:46:23.540

由于您使用 roundDown() 处理正数，因此将其用于负数。

```
double roundDownAll(double x) {
  if (x >= 0.0) {
    return roundDown(x);
  }
  else {
    double y;
    y = -roundDown(-x);
    // If no rounding occurred (e.g. -5 == -roundDown(- -5);
    if (x == y) {
      // We are done.
      return y;
      }
    else {
      // rounding occurred in the wrong direction, so compensate.
      return y-1;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T22:43:14.350

这篇[博客文章](http://blog.frama-c.com/index.php?post/2013/05/03/nearbyintf2)展示了如何将一个正数舍`float`入到最接近的整数，只对表示进行位操作。对于正数和负数，向下舍入涉及类似的操作（当将正浮点数舍入到最接近的整数时，有时需要向上舍入）。关键步骤是提取指数：

```
int exp = ((u>>23) & 255) - 127; 
```

`1.0`计算应在与输入对齐的浮点数表示中设置什么位：

```
if (23 - exp < 0) return f;
unsigned int one = 1U << (23 - exp); 
```

并`one`用作参考以了解应如何更改重要位：

```
unsigned int mask = one - 1;
unsigned int frac = u & mask;
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-23T22:26:30.850

这是通过位操作实现的增量。Unsigned int 会比 int 更好。

```
int bitincr(int a)
{
    int b = 1;
    do
    {
        int c = a & b;
        a = a ^ b;
        b = c << 1;
    } 
    while (b != 0);
    return a;
} 
```

# c++ - 隐藏项目类

> ID：14827105
> 
> 赞同：0
> 
> 时间：2013-02-12T06:55:39.143
> 
> 标签：c++, .net

我在将不同的项目管理成一个大项目方面有点菜鸟，但我有 3 个项目是库（是的，它们都做非常不同的事情）。这 3 个库由另一个项目使用，并且该项目由“用户”项目使用。

问题是这三个库需要对第四个项目可见，而不是由“用户”管理的第五个项目。怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:24:36.153

.lib 文件包含具有库实现的 .obj 文件集。您需要将 .lib 文件中的所有符号保持公开，以便链接器可以解析所有库间依赖关系。

当您想要定义库内容的两组可见性时，您应该使用两个发布所需界面的头文件。对于“公共”接口，您显然会在头文件中减少类型和原型。

# c++ - 我可以在 IDL 函数定义中使用 const 修饰符吗？

> ID：14827109
> 
> 赞同：3
> 
> 时间：2013-02-12T06:55:57.690
> 
> 标签：c++, idl

我可以在由 MIDL 解析的 IDL 函数定义中使用 const 修饰符吗？

例如

```
 HRESULT TestFunctionCall(
        [in,string] const char *szParameter); 
```

或者这会导致赛道某处的破损？就生成的 _c.c 和 _s.c 文件而言，它似乎可以很好地通过 MIDL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T07:20:08.453

`const`修饰符是[MIDL 语言](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367088%28v=vs.85%29.aspx)的一部分。因此，您可以在接口定义中使用它。

# android - Android：警报对话框验证正确方法

> ID：14827111
> 
> 赞同：3
> 
> 时间：2013-02-12T06:56:00.907
> 
> 标签：android

我们可以通过添加一个带有实现的肯定按钮来执行验证

```
final EditText urlEditText = new EditText(this);

DialogInterface.OnClickListener event = new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {

                try
                {
                    // Validate URL
                    new URL(urlEditText.getText().toString());
                    Toast.makeText(getBaseContext(), "URL Accepted", 1).show();
                }
                catch (MalformedURLException e) {
                    Toast.makeText(getBaseContext(), "Invalid URL", 1).show();
                }
            }
        };

AlertDialog dialog = new AlertDialog.Builder(this)
                    .setTitle("Enter the server URL here")
                    .setNegativeButton("Cancel", null)
                    .setPositiveButton("Ok",event)
                    .setView(urlEditText)
                    .create();
        dialog.show(); 
```

如果我们输入了错误的 URL，它将被验证并显示错误的 URL `Toast`。但是，对话框被关闭，它应该仍然显示，直到用户按下“取消”或输入正确的 URL。这里有一些解决方案，例如重新创建对话框并将其再次显示给用户，但这是一个好主意。

有没有办法如果我们输入错误的 URL`AlertDialog`仍然存在？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T07:03:13.420

我们可以使用`AlertDialog.getButton()`，所以我们可以获得`AlertDialog`. 如果对话框显示给用户，则应该调用它。

```
final EditText urlEditText = new EditText(this);

final AlertDialog dialog = new AlertDialog.Builder(this)
                    .setTitle("Enter the server URL here")
                    .setNegativeButton("Cancel", null)
                    .setPositiveButton("Ok",null)
                    .setView(urlEditText)
                    .create();
        dialog.setOnShowListener(new OnShowListener() {

            @Override
            public void onShow(DialogInterface arg0) {

                Button okButton = dialog.getButton(AlertDialog.BUTTON_POSITIVE);
                okButton.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View arg0) {

                        try
                        {
                            new URL(urlEditText.getText().toString());
                            Toast.makeText(getBaseContext(), "URL Accepted", 1).show();
                            dialog.dismiss();
                        }
                        catch (MalformedURLException e) {
                            Toast.makeText(getBaseContext(), "Invalid URL", 1).show();
                        }
                    }
                });
            }
        }); 
```

**更新 1：**我们可以使用`AlertDialog.BUTTON1`，但现在已弃用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:01:56.583

`URLUtil`提供有用的方法，例如

```
isHttpUrl();
isValidUrl(); 
```

尝试使用其中之一来验证您输入的 URL `EditText`。如果`URL`无效，请再显示一次警报或不`dismiss`对话。

# boost - boost::iterator_facade 上的编译错误

> ID：14827127
> 
> 赞同：0
> 
> 时间：2013-02-12T06:56:54.257
> 
> 标签：boost, compiler-errors, iterator-facade

我正在学习 boost::iterator_facade。这是一本书的示例代码：

```
#include <iostream>
#include <boost/iterator/iterator_facade.hpp>

   template<typename I,std::ptrdiff_t N = 2>   
    class step_iterator:
            public boost::iterator_facade<
            step_iterator<I>,   
            typename boost::iterator_value<I>::type const,  
            boost::single_pass_traversal_tag>   
    {
    private:
        I m_iter;   
    public:
        step_iterator(I x) :    
            m_iter(x){}
        step_iterator(step_iterator const& other):  
            m_iter(other.m_iter){}
        void operator=(step_iterator const& other)  
        {   m_iter = other.m_iter;  }
    private:
        friend class boost::iterator_core_access;   
        reference dereference() const  
        {   return *m_iter; }
        void increment()
        {   std::advance(m_iter,N); }   
        bool equal(step_iterator const& other) const    
        {   return m_iter == other.m_iter;}
    }; 
```

这是测试代码：

```
int main()
{
    char s[] = "12345678";  
    std::copy(s,s+8,    
              std::ostream_iterator<char>(cout));   
    cout<<endl;
    step_iterator<char*> first(s),last(s+8);
    std::copy(first,last,   
              std::ostream_iterator<char>(cout));   
    return 0;
} 
```

但是，我收到以下编译错误：

```
 'reference' does not name a type
 (perhaps 'typename boost::iterator_facade<step_iterator<I, 2>, const typename boost::iterator_value<Iterator>::type, boost::single_pass_traversal_tag, const typename boost::iterator_value<Iterator>::type&, int>::reference' was intended) 
```

所以我尝试用 step_iterator::reference 替换 'reference'，这次我得到以下错误：

```
type 'step_iterator<I, 2>' is not derived from type 'step_iterator<I, N>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:34:29.503

您的取消引用函数需要返回对基础序列元素的引用。

我会使用`std::iterator_traits<I>::reference`，所以代码看起来像：

```
 typename std::iterator_traits<I>::reference dereference() const  
    {   return *m_iter; } 
```

# python - urllib2.HTTPError Python

> ID：14827131
> 
> 赞同：1
> 
> 时间：2013-02-12T06:57:19.043
> 
> 标签：python, urllib2, biopython, ncbi

我有一个带有 GI 编号的文件，想`FASTA`从 ncbi 获取序列。

```
from Bio import Entrez
import time
Entrez.email ="eigtw59tyjrt403@gmail.com"
f = open("C:\\bioinformatics\\gilist.txt")
for line in iter(f):
    handle = Entrez.efetch(db="nucleotide", id=line, retmode="xml")
    records = Entrez.read(handle)
    print ">GI "+line.rstrip()+" "+records[0]["GBSeq_primary-accession"]+" "+records[0]["GBSeq_definition"]+"\n"+records[0]["GBSeq_sequence"]
    time.sleep(1) # to make sure not many requests go per second to ncbi
f.close() 
```

该脚本运行良好，但在几个序列后我突然收到此错误消息。

```
Traceback (most recent call last):
  File "C:/Users/Ankur/PycharmProjects/ncbiseq/getncbiSeq.py", line 7, in <module>
    handle = Entrez.efetch(db="nucleotide", id=line, retmode="xml")
  File "C:\Python27\lib\site-packages\Bio\Entrez\__init__.py", line 139, in efetch
    return _open(cgi, variables)
  File "C:\Python27\lib\site-packages\Bio\Entrez\__init__.py", line 455, in _open
    raise exception
urllib2.HTTPError: HTTP Error 500: Internal Server Error 
```

当然我可以使用`http://www.ncbi.nlm.nih.gov/sites/batchentrez`，但我正在尝试创建一个管道并且想要一些自动化的东西。

如何防止 ncbi “踢我”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:33:51.640

我不熟悉 ncbi API，但我的猜测是您违反了某种速率限制规则（即使使用 "sleep(1)" ），所以您之前的请求有效，但在几次请求之后服务器看到你经常打它并阻止你。这对您来说是有问题的，因为您的代码中没有错误处理。

我建议将您的数据获取包装在 try/except 块中，以使您的脚本等待更长时间，然后在遇到问题时重试。如果一切都失败了，将导致错误的 id 写入文件并继续（如果 id 是罪魁祸首，可能导致 Entrez 库生成错误的 URL）。

尝试将您的代码更改为这样的内容（未经测试）：

```
from urllib2 import HTTPError
from Bio import Entrez
import time

def get_record(_id):
    handle = Entrez.efetch(db="nucleotide", id=_id, retmode="xml")
    records = Entrez.read(handle)
    print ">GI "+line.rstrip()+" "+records[0]["GBSeq_primary-accession"]+" "+records[0]["GBSeq_definition"]+"\n"+records[0]["GBSeq_sequence"]
    time.sleep(1) # to make sure not many requests go per second to ncbi

Entrez.email ="eigtw59tyjrt403@gmail.com"
f = open("C:\\bioinformatics\\gilist.txt")
for id in iter(f):
    try:
        get_record(id)
    except HTTPError:
        print "Error fetching", id
        time.sleep(5) # we have angered the API! Try waiting longer?
        try:
            get_record(id)
        except:
            with open('error_records.bad','a') as f:
                f.write(str(id)+'\n')
            continue # 
f.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-20T21:49:50.297

有一个名为 efetch 的解决方法。您可以将您的列表分成 200 个批次（直觉认为这是一个可以的批次大小）并使用[efetch](http://www.ncbi.nlm.nih.gov/books/NBK25499/)一次发送所有这些 id。

首先，这比发送 200 个单独的查询要快得多。其次，它也有效地遵守了“每秒 3 次查询”的规则，因为每次查询的处理时间长于 0.33 秒，但不会太长。

但是，您确实需要一种机制来捕捉“坏苹果”。即使您的 200 个 id 中有一个是坏的，NCBI 也会返回 0 结果。换句话说，只有当且仅当所有 200 个 id 都有效时，NCBI 才会返回结果。

如果是坏苹果，我会一一遍历 200 个 id 而忽略坏苹果。这个“如果坏苹果怎么办”场景也告诉你不要让批次太大，以防坏苹果。如果它很大，首先，有一个坏苹果的机会就更大，也就是说，你需要更频繁地迭代整个事情。其次，批次越大，您需要迭代的单个项目就越多。

我使用以下代码下载 CAZy 蛋白，它运行良好：

```
import urllib2

prefix = "http://www.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=protein&rettype=fasta&id="
id_per_request = 200

def getSeq (id_list):
    url = prefix + id_list[:len(id_list)-1]

    temp_content = ""
    try:
        temp_content += urllib2.urlopen(url).read()

### if there is a bad apple, try one by one
    except:
        for id in id_list[:len(id_list)-1].split(","):
            url = prefix + id
    #print url
            try:
                temp_content += urllib2.urlopen(url).read()
            except:
            #print id
                pass
    return temp_content

content = ""
counter = 0
id_list = ""

#define your accession numbers first, here it is just an example!!

accs = ["ADL19140.1","ABW01768.1","CCQ33656.1"]
for acc in accs:

    id_list += acc + ","
    counter += 1

    if counter == id_per_request:
        counter = 0
        content += getSeq(id_list)
        id_list = ""

if id_list != "":
    content += getSeq(id_list)
    id_list = ""

print content 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-14T13:54:19.043

这是一个“正常”的 Entrez API 临时故障，即使您已经应用了所有 Entrez API 规则，它也可能发生。[Biopython 文档在本节](https://biopython.readthedocs.io/en/latest/Tutorial/chapter_entrez.html#searching-for-and-downloading-sequences-using-the-history)中解释了处理它的方法。

> 有时您会收到来自 Entrez 的间歇性错误，HTTPError 5XX，我们使用 try except pause 重试块来解决这个问题。例如，
> 
> ```
> # This assumes you have already run a search as shown above,
> # and set the variables count, webenv, query_key
> 
> try:
>     from urllib.error import HTTPError  # for Python 3
> except ImportError:
>     from urllib2 import HTTPError  # for Python 2
> 
> batch_size = 3
> out_handle = open("orchid_rpl16.fasta", "w")
> for start in range(0, count, batch_size):
>     end = min(count, start+batch_size)
>     print("Going to download record %i to %i" % (start+1, end))
>     attempt = 0
>     while attempt < 3:
>         attempt += 1
>         try:
>             fetch_handle = Entrez.efetch(db="nucleotide",
>                                          rettype="fasta", retmode="text",
>                                          retstart=start, retmax=batch_size,
>                                          webenv=webenv, query_key=query_key,
>                                          idtype="acc")
>         except HTTPError as err:
>             if 500 <= err.code <= 599:
>                 print("Received error from server %s" % err)
>                 print("Attempt %i of 3" % attempt)
>                 time.sleep(15)
>             else:
>                 raise
>     data = fetch_handle.read()
>     fetch_handle.close()
>     out_handle.write(data)
> out_handle.close() 
> ```

因此，您不必对这个错误感到内疚，只需抓住它。

# ajax - jquery ajax 获取数组 cakephp 中的数据

> ID：14827134
> 
> 赞同：1
> 
> 时间：2013-02-12T06:57:35.697
> 
> 标签：ajax, jquery, cakephp

我是 jquery ajax 的新手。我在 cakephp 工作，我有以下事情要做：我有 7 个链接：`sun, mon, tue, wed, ...`

现在单击每个链接，我希望将该链接的文本存储到一个可以在控制器中访问的数组中。我希望使用 jquery ajax 来做到这一点。

以下是我的代码不起作用（jquery ajax 测试代码）：

```
<?php
    echo $this->Html->link('sun', 
    array('onclick' => 'callAjax();'), 
    array('class' => 'dayss'));
?>
<script>
function callAjax() {

        $.ajax({ 
            url: "rideoffers/ride_offer",
            type: "POST",
            success: function() {
            console.log("hi");
            },
            error: function() {
            console.log("error");
            }
        });
return true;
}
</script> 
```

上面的代码不会打印 hi 或错误。我哪里错了？我该如何解决？

**编辑：迪佩什帕尔马**

```
 <pre>CakeRequest Object
(
    [params] => Array
        (
            [plugin] => 
            [controller] => Rideoffers
            [action] => ride_array
            [named] => Array
                (
                )

            [pass] => Array
                (
                )

        )

    [data] => Array
        (
        )

    [query] => Array
        (
        )

    [url] => Rideoffers/ride_array
    [base] => /carpooling
    [webroot] => /carpooling/
    [here] => /carpooling/Rideoffers/ride_array
    [_detectors:protected] => Array
        (
            [get] => Array
                (
                    [env] => REQUEST_METHOD
                    [value] => GET
                )

            [post] => Array
                (
                    [env] => REQUEST_METHOD
                    [value] => POST
                )

            [put] => Array
                (
                    [env] => REQUEST_METHOD
                    [value] => PUT
                )

            [delete] => Array
                (
                    [env] => REQUEST_METHOD
                    [value] => DELETE
                )

            [head] => Array
                (
                    [env] => REQUEST_METHOD
                    [value] => HEAD
                )

            [options] => Array
                (
                    [env] => REQUEST_METHOD
                    [value] => OPTIONS
                )

            [ssl] => Array
                (
                    [env] => HTTPS
                    [value] => 1
                )

            [ajax] => Array
                (
                    [env] => HTTP_X_REQUESTED_WITH
                    [value] => XMLHttpRequest
                )

            [flash] => Array
                (
                    [env] => HTTP_USER_AGENT
                    [pattern] => /^(Shockwave|Adobe) Flash/
                )

            [mobile] => Array
                (
                    [env] => HTTP_USER_AGENT
                    [options] => Array
                        (
                            [0] => Android
                            [1] => AvantGo
                            [2] => BlackBerry
                            [3] => DoCoMo
                            [4] => Fennec
                            [5] => iPod
                            [6] => iPhone
                            [7] => iPad
                            [8] => J2ME
                            [9] => MIDP
                            [10] => NetFront
                            [11] => Nokia
                            [12] => Opera Mini
                            [13] => Opera Mobi
                            [14] => PalmOS
                            [15] => PalmSource
                            [16] => portalmmm
                            [17] => Plucker
                            [18] => ReqwirelessWeb
                            [19] => SonyEricsson
                            [20] => Symbian
                            [21] => UP\.Browser
                            [22] => webOS
                            [23] => Windows CE
                            [24] => Windows Phone OS
                            [25] => Xiino
                        )

                )

            [requested] => Array
                (
                    [param] => requested
                    [value] => 1
                )

        )

    [_input:protected] => 
)
</pre> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:06:22.860

添加`return false;`事件`onclick`并尝试返回 ajax 本身。

```
<?php
   echo $this->Html->link('sun',  
   array('class' => 'dayss'));
?>
<script>
 $(function(){
   $('.dayss').on('click', callAjax);
 });

 function callAjax() {
    return $.ajax({ 
        url: "rideoffers/ride_offer",
        type: "POST",
        success: function(data) {
        console.log("hi");
        console.log(data);
        },
        error: function() {
        console.log("error");
        }
    });
  }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:04:09.973

我不确定您的`url`参数是否正确：

```
url: "rideoffers/ride_offer" 
```

是吗？您能否复制不使用 ajax 的请求并获得所需的结果（例如，让您的 ajax 目标 url 使用 GET 接受相同的请求并测试它的输出）？

如果没有，也许你的控制台搞砸了？尝试使用警报而不是控制台转储调试行：

例如

```
alert("hi") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T07:58:25.563

这是解决方案。

代码必须如下。

```
echo $this->Html->link('sun', array(),array('onclick' => 'callAjax();','class' => 'dayss'));
```

第二个参数`Html->link`是 for`href`并且您在其中分配`onclick`事件。

**回应评论**

```
<script type="text/javascript">
function callAjax()
{
    var textString = $(this).text();
    $.ajax(
    {
        url: "rideoffers/ride_offer",
        type: "POST",
        data : textString,
        success: function()
        {
            console.log("hi");
        },
        error: function()
        {
            console.log("error");
        }
    });
}
</script>
```

**控制器**

```
<?php

    function ride_offer()
    {
        //to test data is passed as needed.
        pr($this->params);
        exit;
    }
```

# linq - Linq groupby 与特定列的计数

> ID：14827140
> 
> 赞同：0
> 
> 时间：2013-02-12T06:58:11.157
> 
> 标签：linq

我正在使用 c# 从 sql 查询中填充数据表。它有两列

```
env  issud
Dit    x
Dit   x
Sit   y 
```

linq 查询的输出应分组 env 和 issue Dit 2 Sit 1 的计数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:03:03.607

听起来你想要：

```
var query = table.GroupBy(x => x.env)
                 .Select(g => new { Env = g.Key, Count = g.Count() }; 
```

或作为查询表达式：

```
var query = from row in table
            group row by row.env into g
            select new { Env = g.Key, Count = g.Count() }; 
```

# java - 那么有没有能够重用Given的BDD java框架呢？（随着不同的时间步骤）

> ID：14827145
> 
> 赞同：6
> 
> 时间：2013-02-12T06:58:40.703
> 
> 标签：java, unit-testing, integration-testing, bdd

我正在寻找可以重用 Given & Then 进行单元和集成测试的 BDD java 框架。

换句话说 1.**给定**一些先决条件。2.When - 取决于环境 3.**然后**验证**When的****结果**

 ****我希望能够通过更改何时，并保持**Given**和**Then**不变，更改测试的类型，例如在简单的 REST 服务中：

1.  **单元测试**
    *   **给定**
        *   生成一些 POJO 对象
    *   **什么时候**
        *   从**Given接收 POJO**
        *   **用这个 POJO 调用内部服务**
        *   **从服务接收 POJO 形式的结果**
        *   将收到的 POJO 转发到**Then**
    *   **然后**
        *   **从何时**验证 POJO

***   **整合测试**
    *   **给定**
        *   生成一些 POJO 对象
    *   **什么时候**
        *   从**Given接收 POJO**
        *   **以外部服务格式加密 POJO**
        *   **调用外部服务**
        *   **从暴露的服务接收外部服务格式的结果**
        *   **将接收到的结果转换为 POJO**
        *   将收到的 POJO 转发到**Then**
    *   **然后**
        *   **从何时**验证 POJO** 

 ****因此，在示例中，对于集成和单元测试，**Given**和**Then**的行为方式相同，只需**将测试范围从 UNIT 更改为 INTEGRATION 即可**。

**有人可以指出我正确的方向吗？**

我不想重新发明轮子

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-18T14:30:36.300

免责声明：我是 JGiven 的作者。

[JGiven](http://github.com/TNG/JGiven)正好提供了这一点。它是 Java 的 BDD 框架，其中场景由所谓的阶段类构建。对于您的示例，您需要四个阶段类：GivenInput、WhenInternalService、WhenExternalService 和 ThenOutput。然后你可以写两个测试：

**内部服务的单元测试：**

```
public class InternalServiceTest extends 
       ScenarioTest<GivenInput, WhenInternalService, ThenOutput> {

    @Test
    public void internal_service_works_as_expected() {
       given().some_input();
       when().the_internal_service_is_called();
       then().the_result_is_correct();
    } 
} 
```

**外部服务的集成测试：**

```
public class ExternalServiceTest extends 
       ScenarioTest<GivenInput, WhenExternalService, ThenOutput> {

    @Test
    public void external_service_works_as_expected() {
       given().some_input();
       when().the_external_service_is_called();
       then().the_result_is_correct();
    } 
} 
```

**然后舞台类看起来像这样：**

```
public class GivenInput extends Stage<GivenInput> {
    @ProvidedScenarioState
    InputPojo input;

    public GivenInput some_input() {
       input = new InputPojo();
       return self();
    }
}

public class WhenInternalService extends Stage<WhenInternalService> {
    @ExpectedScenarioState
    InputPojo input;

    @ProvidedScenarioState
    OutputPojo output;

    public WhenInternalService the_internal_service_is_called() {
        output = new InternalService().invoke(input);
        return self();
    }
}

public class WhenExternalService extends Stage<WhenExternalService> {
    @ExpectedScenarioState
    InputPojo input;

    @ProvidedScenarioState
    OutputPojo output;

    public WhenExternalService the_external_service_is_called() {
        ExternalInput externalInput = transformToExternal(input);
        ExternalOutput externalOutput = new ExternalService().invoke(external);
        output = transformToInternal(externalOutput);
        return self();
    }
}

public class ThenOutput extends Stage<ThenOutput> {
    @ExpectedScenarioState
    OutputPojo output;

    public ThenOutput the_result_is_correct() {
        assertThat(output).isNotNull();
        return self();
    }
} 
```

请注意，步骤方法以流利的界面样式编写，以便能够链接多个条件（尽管在您的示例中不需要）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-30T00:34:39.030

如果您使用的是 Java 8，那么您应该看看[这个](https://github.com/gabriel-deliu/given-when-then)github 项目。

使用它，您可以实现您想要的，而无需创建类。这是由于使用了泛型 + Java 8 Lambda。

以下是一些基本的测试样本：

```
@Test
public void basicFlowTest() {
 given(1)
  .when("multiplying by 2", givenValue -> 2 * givenValue)
  .then("value should be even", whenValue -> whenValue % 2 == 0);
}

public void multiTypeFlowTest() {
 LocalDateTime localDateTime = LocalDateTime.now();
 DayOfWeek expectedDay = localDateTime.getDayOfWeek();

 given(localDateTime)
  .when("retrieving current day", date -> date.getDayOfWeek())
  .then("days should match", day -> expectedDay == day);
}

@Test
public void assertFlowTest() {
 Integer primeNumber = 17;
 given("a prime number", primeNumber)
  .when("finding dividers naively", number -> IntStream.rangeClosed(1, number)
   .boxed().filter(value -> number % value == 0).collect(Collectors.toList()))
  .then(dividers -> {
   assertEquals("should have two dividers", 2, dividers.size());
   assertEquals("first divider should be 1", 1, (int) dividers.get(0));
   assertEquals(String.format("first divider should be %d", primeNumber), primeNumber, dividers.get(1));
  });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T08:19:28.000

JUnit？

很可能有一个带有`@Before`方法的抽象基类（即“Given”）和一个带有断言的通用方法（即“Then”）。********

# ruby-on-rails - 忘记密码 Devise gem API

> ID：14827146
> 
> 赞同：12
> 
> 时间：2013-02-12T06:59:01.743
> 
> 标签：ruby-on-rails, devise

我一直在我的应用程序中使用 Devise gem。我可以配置设计 session_controller 来响应来自网络和移动 API 调用的请求。

但现在我想看看如何使用 Devise gem 的 Forgot Password 选项进行移动 API 调用。我可以使用 API 登录，如下所示

```
curl -X POST 'http://localhost:3002/users/sign_in.json' -d 'user[email]=balan@test.com&user[password]=123456' 
```

我可以对忘记密码做同样的事情吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-11T12:46:29.560

得到了答案。

1）创建一个接收`email`作为输入的自定义操作

2）添加以下代码

```
@user = User.find_by_email("email@email.com")
if @user.present?
 @user.send_reset_password_instructions
 render :text => "updated"
else
     render :text => "no such email"
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-01-10T17:28:07.523

设计现在支持它。检查下面的链接 [https://github.com/plataformatec/devise/wiki/API-Mode-Compatibility-Guide](https://github.com/plataformatec/devise/wiki/API-Mode-Compatibility-Guide)

**密码重置请求（帖子）**

```
curl -X POST \
'http://{{protocol}}{{host}}:{{port}}/{{resource_plural}}/password' \
-H 'Accept: application/json' \
-H 'Content-Type: application/json' \
-H 'Postman-Token: 406d7e49-7da5-460d-8cc2-1009da8fcb73' \
-H 'cache-control: no-cache' \
-d '{
  "user": {
      "email": "user@example.com"
  }
}' 
```

**密码重置确认（补丁）**

```
 curl -X PATCH \
'http://{{protocol}}{{host}}:{{port}}/{{resource_plural}}/password' \
-H 'Accept: application/json' \
-H 'Content-Type: application/json' \
-H 'Postman-Token: f68be2db-1b90-4443-be93-3f012ca4c7dc' \
-H 'cache-control: no-cache' \
-d '{
  "user": {
      "reset_password_token": "-96mB4zMSjL4t5N6ozGC",
      "password": "newpassword",
      "password_confirmation": "newpassword"
  }
}' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-17T23:12:23.013

我这样做了：

在`config/routes.rb`：

```
namespace :api do
  namespace :v1 do 
     resources :reset_passwords, only: [:index, :create]
  end
end 
```

并在`app/controllers/api/v1/reset_passwords_controller.rb`：

```
class Api::V1::ResetPasswordsController < Api::V1::BaseController
   def index
    user = User.find_by_email(user_params)
    if user.present?
     user.send_reset_password_instructions
     render(
          json: "{ \"result\": \"Email already exists\"}",
          status: 201
        )
    else
      render(
          json: "{ \"error\": \"Not found\"}",
          status: 404
        )
    end
  end

  private

  def user_params
    params.require(:email)
  end

end 
```

# tfs - TFS - 分支项目是否意味着项目的副本？

> ID：14827150
> 
> 赞同：0
> 
> 时间：2013-02-12T06:59:31.387
> 
> 标签：tfs, branching-and-merging

我学到了很多东西，但我不明白分支是做什么的？

我在 TFS 中有一个项目，想复制并更改它。我可以使用分支吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:02:36.043

是的，它是项目的副本。

假设您正在处理一个大项目，并且您对客户进行部署。您采用该版本并将其分支。

每当您需要修复任何错误时，您都可以在分支中执行此操作并将其再次合并到您的主项目中。

所有未来的开发都可以在主版本中完成，而不会影响您与客户的版本。

但是在您的情况下，如果只是为自己制作一些修改或测试的副本。您可以在文件夹级别进行复制。

# c# - 如何打开 Facebook 页面选项卡上的“转到应用程序”弹出的复选框单击

> ID：14827155
> 
> 赞同：1
> 
> 时间：2013-02-12T06:59:56.083
> 
> 标签：c#, javascript, facebook, c#-4.0, facebook-c#-sdk

这是我的[脸书页面](https://www.facebook.com/pages/Test-app-Community/133744630126713?ref=hl)

当用户单击 Fitbook Contest 第二个选项卡时，它将首先强制用户喜欢一个页面，然后允许使用我的应用程序。但是要访问我的应用程序，首先用户需要允许一个应用程序，然后用户才能访问我的应用程序。

我正在 ac#.net 中进行此编码。这是我的代码。

TestFB.aspx.cs 代码：

```
 public partial class TestFB : System.Web.UI.Page
    {
        private static string access_token = "";
        protected string form_url = "";

        public static string FacebookID = "";

        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                GetItemsList();

                if (string.IsNullOrEmpty(Convert.ToString(Session["access_token"])))
                {
                    string app_id = "139295982898884";
                    string app_secret = "b5d2a88b56898610d54da2af498e3220";
                    string post_login_url = "http://dev.fitbook.com.asp1-23.ord1-1.websitetestlink.com/v4/FitbookContest.aspx";
                    //string post_login_url = "http://localhost:4327/FitbookContest.aspx";
                    string scope = "publish_stream,manage_pages";

                    string code = HttpContext.Current.Request["code"] ?? "";

                    if (code == "")
                    {
                        string dialog_url = "http://www.facebook.com/dialog/oauth?" + "client_id=" + app_id + "&redirect_uri=" + HttpContext.Current.Server.UrlEncode(post_login_url) + "&scope=publish_stream&display=popup";
                        HttpContext.Current.Response.Redirect(dialog_url);
                        Response.Write(dialog_url);
                    }
                    else
                    {
                        Dictionary<string, string> tokens = new Dictionary<string, string>();

                        string url = string.Format("https://graph.facebook.com/oauth/access_token?client_id={0}&redirect_uri={1}&scope={2}&code={3}&client_secret={4}",
                            app_id, HttpContext.Current.Request.Url.AbsoluteUri, scope, HttpContext.Current.Request["code"].ToString(), app_secret);

                        HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;

                        using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
                        {
                            StreamReader reader = new StreamReader(response.GetResponseStream());

                            string vals = reader.ReadToEnd();

                            foreach (string token in vals.Split('&'))
                            {
                                //meh.aspx?token1=steve&token2=jake&...
                                tokens.Add(token.Substring(0, token.IndexOf("=")),
                                    token.Substring(token.IndexOf("=") + 1, token.Length - token.IndexOf("=") - 1));
                            }
                        }
                        access_token = tokens["access_token"];
                        Session["access_token"] = access_token;
                        GetProfilePic(code);
                    }
                    //Session["ProfileImage"] = imgProfilePicture;
                }
            }
        }

        private void GetProfilePic(string code)
        {
            string accesstoken = Convert.ToString(Session["access_token"]);
            var app = new FacebookClient(accesstoken);
            var me = (IDictionary<string, object>)app.Get("me");
            TestFB.FacebookID = (string)me["id"];
            string firstName = (string)me["first_name"];
            string lastName = (string)me["last_name"];
            string gender = (string)me["gender"];
            //Response.Write(me);

            string url = "http://graph.facebook.com/" + TestFB.FacebookID + "/picture";
            // Response.Write(url);
            //Image imgProfilePicture = new Image();
            //imgProfilePicture = (Image)HttpContext.Current.Session["ProfileImage"];
            imgProfilePicture.ImageUrl = url;
        }
} 
```

当我直接访问我的页面时，它与 localhost 和我的服务器一起工作正常。但是当我将服务器路径与“Facebook 页面选项卡”集成时，它不会打开一个弹出窗口并显示空白屏幕。这是我的页面标签应用程序的[链接](https://www.facebook.com/pages/Test-app-Community/133744630126713?sk=app_190322544333196)。我正在寻找这样的[东西](http://facebook.com/kerishnifar/app_555904617770779)

欢迎提出建议。谢谢你的帮助。

# android - 如何销毁我之前创建的视图对象

> ID：14827156
> 
> 赞同：0
> 
> 时间：2013-02-12T06:59:59.190
> 
> 标签：android, android-view

我想销毁我在中创建的类的对象**popupView**对象。`View``OnClickListener`

我想要这样的机制，每次它都应该创建新的`View`. 我创建`View`对象的方式有问题。

我的完整代码：

```
package com.addictioncounterapp;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.DatePickerDialog;
import android.app.Dialog;
import android.app.AlertDialog.Builder;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.LinearLayout.LayoutParams;
import android.widget.PopupWindow;
import android.widget.TextView;

public class AddictionDetails extends Activity 
{
TextView tv_addiction_name, tv_today, tv_yesterday, tv_this_week, tv_this_month, tv_total;
ImageView iv_back, iv_filter;
int year, month, day;
int placeData;
Boolean state = false;
DatePickerDialog.OnDateSetListener dateListener;
SQLiteDatabase database;
int cat_id = 0;

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_addiction_details);

    Intent intent = getIntent();
    final String cat_name = intent.getStringExtra("cat_name");
    tv_addiction_name = (TextView) findViewById(R.id.textViewAddictionDetails);
    tv_addiction_name.setText(cat_name);

    tv_total = (TextView) findViewById(R.id.textview_total);
    tv_today = (TextView) findViewById(R.id.textview_today);
    tv_yesterday = (TextView) findViewById(R.id.textview_yesterday);
    tv_this_week = (TextView) findViewById(R.id.textview_this_week);
    tv_this_month = (TextView) findViewById(R.id.textview_this_month);

    iv_back = (ImageView) findViewById(R.id.imageViewAddictionDetailsBack);
    iv_back.setClickable(true);
    iv_back.setOnClickListener(new OnClickListener()
                                    {
                                        @Override
                                        public void onClick(View v)
                                        {
                                            Intent intent = new Intent(AddictionDetails.this, StartActivity.class);
                                            startActivity(intent);
                                        }
                                    }
                                );

    iv_filter = (ImageView) findViewById(R.id.imageViewAddictionDetailsFilter);
    iv_filter.setClickable(true);
    iv_filter.setOnClickListener(new OnClickListener()
                                    {
                                        @Override
                                        public void onClick(View v)
                                        {   
                                            if(state == false)
                                            {
                                                state = true;
                                                LayoutInflater layoutInflater = (LayoutInflater)getBaseContext().getSystemService(LAYOUT_INFLATER_SERVICE);
                                                final View popupView = layoutInflater.inflate(R.layout.activity_filter_addiction_form, null);

                                                final PopupWindow popupWindow = new PopupWindow(popupView, LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
                                                popupWindow.setWidth(300);
                                                popupWindow.setHeight(300);

                                                final Calendar cal = Calendar.getInstance();
                                                year = cal.get(Calendar.YEAR);
                                                month = cal.get(Calendar.MONTH);
                                                day = cal.get(Calendar.DAY_OF_MONTH);

                                                final EditText etStartDate = (EditText)popupView.findViewById(R.id.editTextFilterStartDate);
                                                etStartDate.setOnClickListener(new OnClickListener()
                                                                                    {   
                                                                                        @Override
                                                                                        public void onClick(View v)
                                                                                        {
                                                                                            showDialog(1);
                                                                                            placeData = 1;
                                                                                        }
                                                                                    }
                                                                                );

                                                final EditText etEndDate = (EditText)popupView.findViewById(R.id.editTextFilterEndDate);
                                                etEndDate.setOnClickListener(new OnClickListener()
                                                                                    {   
                                                                                        @Override
                                                                                        public void onClick(View v)
                                                                                        {
                                                                                            showDialog(1);
                                                                                            placeData = 2;
                                                                                        }
                                                                                    }
                                                                            );

                                                Button btn_done = (Button) popupView.findViewById(R.id.buttonDone);
                                                btn_done.setOnClickListener(new OnClickListener()
                                                                            {
                                                                                 @Override
                                                                                 public void onClick(View v)
                                                                                 {
                                                                                     if(etStartDate.getText()+""=="" || etEndDate.getText()+""=="")
                                                                                     {
                                                                                         AlertDialog.Builder adb = new Builder(AddictionDetails.this);
                                                                                         adb.setTitle("Error");
                                                                                         adb.setMessage("Fields can't be blank.");
                                                                                         adb.setIcon(R.drawable.ic_launcher);
                                                                                         adb.setPositiveButton("Ok",new DialogInterface.OnClickListener()
                                                                                                                         {
                                                                                                                             public void onClick(DialogInterface dialog, int which)
                                                                                                                             {
                                                                                                                                 dialog.dismiss();
                                                                                                                             }
                                                                                                                         }
                                                                                                                );
                                                                                         AlertDialog ad = adb.create();
                                                                                         ad.show();
                                                                                     }
                                                                                     else
                                                                                     {
                                                                                        SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");

                                                                                        Date date1 = null;
                                                                                        try
                                                                                        {
                                                                                            date1 = sdf.parse(etStartDate.getText()+"");
                                                                                        }
                                                                                        catch (ParseException e)
                                                                                        {
                                                                                            e.printStackTrace();
                                                                                        }

                                                                                        Date date2 = null;
                                                                                        try
                                                                                        {
                                                                                            date2 = sdf.parse(etEndDate.getText()+"");
                                                                                        }
                                                                                        catch (ParseException e)
                                                                                        {
                                                                                            e.printStackTrace();
                                                                                        }

                                                                                        System.out.println(sdf.format(date1));
                                                                                        System.out.println(sdf.format(date2));

                                                                                        if(date1.compareTo(date2)>0)
                                                                                        {
                                                                                            AlertDialog.Builder adb = new Builder(AddictionDetails.this);
                                                                                            adb.setTitle("Error");
                                                                                            adb.setMessage("Start date cannot be greater than End date.");
                                                                                            adb.setIcon(R.drawable.ic_launcher);
                                                                                            adb.setPositiveButton("Ok",new DialogInterface.OnClickListener()
                                                                                                                         {
                                                                                                                                 public void onClick(DialogInterface dialog, int which)
                                                                                                                                 {
                                                                                                                                     dialog.dismiss();
                                                                                                                                 }
                                                                                                                             }
                                                                                                                    );
                                                                                             AlertDialog ad = adb.create();
                                                                                             ad.show();
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            Intent intent = new Intent(AddictionDetails.this, FilteredData.class);
                                                                                            intent.putExtra("start_date", etStartDate.getText()+"");
                                                                                            intent.putExtra("end_date", etEndDate.getText()+"");
                                                                                            intent.putExtra("cat_id", cat_id);
                                                                                            intent.putExtra("cat_name", cat_name);
                                                                                            startActivity(intent);
                                                                                        }
                                                                                     } 
                                                                                 }
                                                                             }
                                                                        );

                                                Button btn_cancel = (Button) popupView.findViewById(R.id.buttonCancel);
                                                btn_cancel.setOnClickListener(new OnClickListener()
                                                                                {
                                                                                     @Override
                                                                                     public void onClick(View v)
                                                                                     {

                                                                                         popupWindow.dismiss();

                                                                                         state = false;
                                                                                     }
                                                                                 }
                                                                            );

                                                dateListener = new DatePickerDialog.OnDateSetListener()
                                                                    {
                                                                        @Override
                                                                        public void onDateSet(DatePicker view, int yr, int monthOfYear, int dayOfMonth)
                                                                        {
                                                                            SimpleDateFormat tmpDateFormat = new SimpleDateFormat("dd/MM/yyyy");
                                                                            Calendar tmpC1 = Calendar.getInstance();
                                                                            tmpC1.set(yr, monthOfYear, dayOfMonth);
                                                                            Date tmpD1 = tmpC1.getTime();
                                                                            String tmpDateString = tmpDateFormat.format(tmpD1);                                                                             
                                                                            update(placeData, tmpDateString);
                                                                        }

                                                                        private void update(int position, String strDate)
                                                                        {
                                                                            switch(position)
                                                                            {
                                                                                case 1:
                                                                                    Log.e("In Addiction details In startDate", strDate);

                                                                                    etStartDate.setText(strDate);
                                                                                    break;

                                                                                case 2:
                                                                                    Log.e("In Addiction details In endDate", strDate);

                                                                                    etEndDate.setText(strDate);
                                                                                    break;
                                                                            }
                                                                        }
                                                                    };

                                                popupWindow.showAsDropDown(iv_filter, 0, 0);
                                            }                                               
                                        }
                                    }
                                );

    loadDB();

    Cursor cursor = database.query("category", new String[]{"cat_id"}, "cat_name=?", new String[]{cat_name}, null, null, null);

    //----------------------fetching id-------------------

    if(cursor.getCount() > 0)
        while(cursor.moveToNext())
            cat_id = cursor.getInt(0);
    cursor.close();

    //----------------------fetching total-------------------

    int totalCounter;
    Cursor totalCursor = database.rawQuery("select sum(cat_attribute_unit) from counter where cat_id ="+cat_id+";", null);
    if(totalCursor.moveToNext())
        totalCounter = totalCursor.getInt(0);
    else
        totalCounter = 0;
    totalCursor.close();
    tv_total.setText(totalCounter+"");

    //----------------------fetching today's count---------------

    Calendar cal1 = Calendar.getInstance();
    SimpleDateFormat dateFormat1 = new SimpleDateFormat("dd/MM/yyyy");

    String todays_date = dateFormat1.format(cal1.getTime());
    int todayCounter;

    Cursor todayCursor = database.rawQuery("select sum(cat_attribute_unit) from counter where cat_id ="+cat_id+" AND counter_entry_date = '"+todays_date+"';", null);
    if(todayCursor.moveToNext())
        todayCounter = todayCursor.getInt(0);
    else
        todayCounter = 0;
    todayCursor.close();

    tv_today.setText(todayCounter+"");

    //----------------------fetching yesterdays count------------------

    Calendar cal2 = Calendar.getInstance();
    SimpleDateFormat dateFormat2 = new SimpleDateFormat("dd/MM/yyyy");
    cal2.add(Calendar.DATE, -1);

    String yesterdays_date = dateFormat2.format(cal2.getTime());

    int yesterdayCounter = 0;

    Cursor yesterdayCursor = database.rawQuery("select sum(cat_attribute_unit) from counter where cat_id ="+cat_id+" AND counter_entry_date = '"+yesterdays_date+"';", null);

    if(yesterdayCursor.moveToFirst())
        yesterdayCounter = yesterdayCursor.getInt(0);
    else
        yesterdayCounter = 0;

    yesterdayCursor.close();

    tv_yesterday.setText(yesterdayCounter+"");

    //-------------------------fetching current week count--------------------

    SimpleDateFormat weekDateFormat = new SimpleDateFormat("dd/MM/yyyy");
    Calendar c1 = Calendar.getInstance();
    c1.set(Calendar.DAY_OF_WEEK, 1);
    Date weekFirstDate = c1.getTime();
    String strWeekFirstDay = weekDateFormat.format(weekFirstDate);

    Cursor weekCursor = database.rawQuery("select sum(cat_attribute_unit) from counter where cat_id ="+cat_id+" AND counter_entry_date BETWEEN '"+strWeekFirstDay+"' AND '"+todays_date+"';", null);

    int weekCounter = 0;
    if(weekCursor.moveToFirst())
        weekCounter = weekCursor.getInt(0);
    else
        weekCounter = 0;
    weekCursor.close();

    tv_this_week.setText(weekCounter+"");

    //----------------------fetching current month count--------------------

    SimpleDateFormat monthDateFormat = new SimpleDateFormat("dd/MM/yyyy");
    Calendar c2 = Calendar.getInstance();
    c2.set(Calendar.DAY_OF_MONTH, 1);
    Date monthFirstDate = c2.getTime();
    String strMonthFirstDay = monthDateFormat.format(monthFirstDate);

    Cursor monthCursor = database.rawQuery("select sum(cat_attribute_unit) from counter where cat_id ="+cat_id+" AND counter_entry_date BETWEEN '"+strMonthFirstDay+"' AND '"+todays_date+"';", null);
    int monthCounter = 0;
    if(monthCursor.moveToFirst())
        monthCounter = monthCursor.getInt(0);
    else
        monthCounter = 0;
    monthCursor.close();

    tv_this_month.setText(monthCounter+"");

    database.close();
}

private void loadDB() 
{
    database = openOrCreateDatabase("AddictionCounter.db", SQLiteDatabase.OPEN_READWRITE, null);
}

protected Dialog onCreateDialog(int id)
{
    return new DatePickerDialog(this, dateListener, year, month, day);
}
} 
```

我也无法在我的 IF 循环中引用任何类`OnClickListener`。给出**Ctrl+space**时会出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:26:46.890

销毁 popupView 在

```
popupWindow.setOnDismissListener 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:33:50.860

第一次尝试回答，如果我必须重新阅读，请纠正我。

我认为正常的做法是创建一个成员 popupWindow 然后使用 setContentView 和dismiss来显示或不显示它。但是如果你真的需要在每次 onClick 时销毁它并创建它：

*   不要宣布它是最终的。GC 将在调用 onClick 之间正常清理它
*   更改完成后调用dismiss()

你是什​​么意思你不能在监听器中引用任何类？你的意思是你不能调用诸如 onPause() 方法之类的东西？以防万一，请考虑当您在侦听器中执行 this.SOMETHING 时，您不再从 Activity 执行此操作。如果您需要参考 onCreateDialog 或其他内容，您可以通过 getParent 来完成

# ruby-on-rails - 连接表和外键

> ID：14827159
> 
> 赞同：1
> 
> 时间：2013-02-12T07:00:14.090
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我对连接表中的外键感到相当困惑。我正在尝试建立一个连接表，将我的用户和指南模型链接起来以形成一个 FavoriteGuideline 表（即用户可以选择一个最喜欢的指南）。

我的错误是：

> '期望 FavoriteGuideline 有一个名为 favorite 的 belongs_to 关联（FavoriteGuideline 没有 favorite_id 外键）'

我最喜欢的_guideline.rb 是

```
class FavoriteGuideline < ActiveRecord::Base
belongs_to :user
belongs_to :guideline
belongs_to :favorite, class_name: 'User', foreign_key: 'favorite_id'

attr_accessible :user, :favorite, :guideline
end 
```

我最喜欢的_guideline_test.rb 是

```
require 'test_helper'

class FavoriteGuidelineTest < ActiveSupport::TestCase
  should belong_to(:user)
  should belong_to(:favorite)

  test "that creating a favorite works without raising an exception" do

    assert_nothing_raised do 
    FavoriteGuideline.create user: users(:eve), guideline: guidelines(:three)

  end
end
end 
```

我的数据库迁移是

```
class CreateFavoriteGuidelines < ActiveRecord::Migration
def change
create_table :favorite_guidelines do |t|
        t.integer :user_id
        t.integer :favorite_id
        t.integer :guideline_id
  t.timestamps
end

add_index :favorite_guidelines, [:user_id]
add_index :favorite_guidelines, [:favorite_id]
add_index :favorite_guidelines, [:guideline_id]
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:14:17.687

如果我理解正确，FavoriteGuideline 就是关联表。Favorite 只是 FavoriteGuideline 的别名。

所以你的模型应该是：

```
class FavoriteGuideline < ActiveRecord::Base
set_primary_key 'favorite_id'
belongs_to :user
belongs_to :guideline

attr_accessible :user, :favorite, :guideline
end 
```

你的测试应该有这条​​线

```
should belong_to(:guideline) 
```

代替

```
should belong_to(:favorite) 
```

并且您的迁移可能应该将 favorite_id 作为主键：

```
def change
create_table :favorite_guidelines, :primary_key => :favorite_id do |t|
        t.integer :user_id
        t.integer :guideline_id
  t.timestamps
end 
```

然后您还需要完成与`has_many`in`user.rb`和`guideline.rb`

# visual-studio - 如何在 Visual Studio 2010 中启用 CUDA .cu 文件的语法突出显示？

> ID：14827160
> 
> 赞同：15
> 
> 时间：2013-02-12T07:00:19.610
> 
> 标签：visual-studio, cuda, editor

当我在 Microsoft Visual Studio 2010 中编辑文件时，编辑器将其视为常规文本文件（诸如等`.cu`关键字没有颜色。右括号未突出显示）。`int``float`

如何`.cu`在 Visual Studio 中启用文件的语法突出显示，以便编辑`.cu`文件就像编辑常规 C/C++ 文件？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-12T14:12:24.623

在 Visual Studio 设置中的 c++ 扩展名下添加“.cu”将仅启用 c++ 关键字的语法突出显示。编辑：`Tools -> Options -> Text Editor -> File Extension`输入 cu 并选择 Microsoft Visual C++ 作为编辑器，然后单击添加

要添加 CUDA 关键字语法突出显示，您可以`usertype.dat`在 CUDA 安装文件夹中搜索（确保在 Program Files 文件夹中找不到它以在您的`home folder -> AppData-> Local -> NVIDIA Corporation`（抱歉，我没有提供详细信息，因为我没有Windows 现在），然后将其复制到`Program Files\Microsoft Visual Studio 10.0\Common7\IDE`并重新启动 Visual Studio

但是，但是！仍然可能无法正常工作，因此您最终会使用 AFAIK，您可以使用 Visual Assistant x，然后您必须按如下方式更改它的设置：

对于 VS2010、VS2008、VS2005 和 VS.NET：

将您的扩展添加到：

`Tools | Options | Projects | VC++ Build | C/C++ File Extensions (VS.NET)`

`Tools | Options | Projects and Solutions | VC++ Project Settings | C/C++ File Extensions (VS2005, VS2008)`

`Tools | Options | Projects and Solutions | VC++ Project Settings | Extensions To Include (VS2010)`

退出 IDE 并使用 regedit 将以下条目克隆到以您的扩展名结尾的类似条目：

`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VisualStudio\8.0\Languages\File Extensions\.cpp`

如果您使用的是 64 位操作系统，则克隆注册表项：

`HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\VisualStudio\8.0\Languages\File Extensions\.cpp`

如果您的扩展名表示标题，请使用`regedit`将扩展名添加到`ExtHeader`以下位置。请记住包括点和终止分号：

`HKEY_CURRENT_USER\Software\Whole Tomato\Visual Assist X\VANet8`

如果您的扩展名表示不是标题的源文件，请将扩展名添加到`ExtSource`以下位置。

`HKEY_CURRENT_USER\Software\Whole Tomato\Visual Assist X\VANet8`

按 Visual Assist X 选项对话框的性能选项卡上的重建并重新启动 IDE。

如果您使用 VS 2010，请替换为`8.0`。如果您使用 VS 2008，请替换为。如果您使用 VS.NET 2003，请替换为。如果您使用 VS.NET 2002，请替换为。`10.0``8.0``9.0``8.0``7.1``8.0``7.0`

替换`VANet8`为`VANet10`Visual Studio 2010。如果您使用 VS2008 ，请替换`VANet8`为。如果您使用 VS.NET 2003 ，请`VSNet9`替换`VANet8`为。如果您使用 VS.NET 2002，请替换为.0。`VSNet``VANet8``VANet7`

对于 VC++ 6.0：

退出 IDE 并使用`regedit`将扩展添加到：

`HKEY_CURRENT_USER\Software\Microsoft\DevStudio\6.0\Text Editor\Tabs/Language Settings\C/C++\FileExtensions`.

如果您的扩展名表示标题，请使用`regedit`将扩展名添加到`ExtHeader`以下位置。请记住包括点和终止分号：

`HKEY_CURRENT_USER\Software\Whole Tomato\Visual Assist X\VA6`

如果您的扩展名表示不是标题的源文件，请将扩展名添加到`ExtSource`以下位置。请记住包含点和终止分号：

`HKEY_CURRENT_USER\Software\Whole Tomato\Visual Assist X\VA6`

按 Visual Assist X 选项对话框的性能选项卡上的重建并重新启动 IDE。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-26T07:00:55.610

除了其他人已经说过的（在工具 -> 选项 -> 文本编辑器 -> 文件扩展名和 Microsoft Visual C++ 作为编辑器中添加 cu 扩展名），我还推荐你，以避免突出显示 CUDA 关键字（如threadIdx.x 等），包括：

```
#include<device_launch_parameters.h> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T07:47:22.723

右键单击您的项目，选择 Build Customizations，然后选择 CUDA 构建自定义文件之一。如果没有可用的 CUDA 构建自定义文件，您必须首先安装 Nsight Visual Studio Edition 或捆绑它的 CUDA 发行版。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-24T07:47:47.913

```
#include "cuda_runtime.h"
#include "device_launch_parameters.h" 
```

在我的 VS 中，我添加了这两行，之后所有的语法高亮显示。

# jquery - 单个弹出窗口可以为多个按钮添加文本

> ID：14827164
> 
> 赞同：-1
> 
> 时间：2013-02-12T07:00:33.837
> 
> 标签：jquery, ajax, cakephp

我的应用程序中有多个用户。在用户列表中，每个用户都有一个提交数据的按钮。数据将在弹出窗口中提交。我必须使用 jquery 生成弹出窗口和 jquery-json 组合以将数据保存在数据库中。我可以使用单个弹出单击多个按钮吗？请给我建议。

例如

```
 <table width="98%" border="0" cellspacing="2" cellpadding="2" bgcolor="#efead8" style="border:#FFCC00 1px solid;">
      <tr><th bgcolor="#cccccc" align="right">&nbsp;S.No.&nbsp;</th><th bgcolor="#cccccc" align="left">&nbsp;Client&nbsp;</th><th bgcolor="#cccccc" align="center">&nbsp;Cost List&nbsp;</th><th bgcolor="#cccccc" align="center">&nbsp;Action&nbsp;</th><tr>';
        foreach($arrclient as $k => $v)
             $strPrint.='<tr><td align="right">&nbsp;'.++$i.'&nbsp;</td><td align="left">&nbsp;'.$v.'&nbsp;</td><td align="center">&nbsp;Cost List&nbsp;</td><td align="center">&nbsp;<input type="button" name="new_ci" id="new_ci" value="New cost list" />&nbsp;</td><tr>';

        $strPrint.='</table>'; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:13:45.067

```
 $strPrint.='<tr><td align="right">&nbsp;'.++$i.'&nbsp;</td><td align="left">&nbsp;'.$v.'&nbsp;</td><td align="center">&nbsp;Cost List&nbsp;</td><td align="center">&nbsp;<input type="button" name="new_ci" id="new_ci" value="New cost list" onclick="OpenPopup(this)" />&nbsp;</td><tr>';

function(obj)
{
 // do wat ever u want
} 
```

# javascript - 使用javascript动态添加选择框的选项值

> ID：14827176
> 
> 赞同：6
> 
> 时间：2013-02-12T07:01:28.407
> 
> 标签：javascript

我想在选择的 javascript 中填充年份。我做了以下代码。

```
<html>
<head>
    <script type="text/javascript">         
        $(document).ready(function(){   
            var cur_year=new Date().getFullYear();
            var obj=document.getElementById("yr");  
            alert(obj);         
            for (var i = 2000; i <= 2020; i++)     {                
                opt = document.createElement("option");
                opt.appendChild(document.createTextNode(value));
                opt.selected = selected;
                opt.value = i;
                opt.text=i;
                obj.appendChild(opt);
            }
        });
    </script>
</head>
<body>
    <select id="yr">
<option>year</option>
</select>
</body>
</html> 
```

我不知道这有什么问题。我想填充年份并希望在用户打开浏览器时在选择框中选择当前年份。任何人都可以帮忙吗？请！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T07:06:32.823

```
$(document).ready( function() { 
            var cur_year=new Date().getFullYear();
            var obj=document.getElementById("yr");         
            for (var i = 2000; i <= 2020; i++)     {                
                opt = document.createElement("option");
                opt.value = i;
                opt.text=i;
                obj.appendChild(opt);
            }
            document.getElementById("yr").value = cur_year;
        }); 
```

1.  只需使用`.value`并分配`cur_year`给它。

[**工作小提琴**](http://jsfiddle.net/5pYkW/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-05T10:55:46.107

```
<?php 
$current_year = date('Y');
$end_year = date('Y', strtotime('+10 years'));
?>
<label>Year</label><select name="year">
    <?php
for($i=$current_year; $i<=$end_year; $i++)
{
    ?>
    <option value="<?php echo $i; ?>"><?php echo $i; ?></option>
    <?php
}
?>
</select> 
```

# visual-c++ - WinPRT 中的错误“公共成员的签名包含本机类型”

> ID：14827179
> 
> 赞同：4
> 
> 时间：2013-02-12T07:01:33.523
> 
> 标签：visual-c++, windows-phone-8, windows-phone, winprt

我正在尝试创建一个支持 windows phone 8 的运行时组件。我有一个 c++ 源代码，目前它不支持 windows phone 8，所以我将它们转换为 windows phone 运行时组件以使其与窗户电话。

现在的问题是我创建了它们，但在下面显示错误，

```
 #pragma once
    #include "Encoder.h"

    namespace YakPRT
    {
     public ref class YakPRTComponent sealed
    {
      public:
        YakPRTComponent();
        void yakEncode(paTestData *yakData, uint8_t *rawData, int rawDataSize);
        void EncodeData(paTestData *yakData, uint8_t *rawData, int rawDataSize);
        void signalHandler( int signum );
                int yakRecordCallback( const void *inputBuffer, void *outputBuffer,
                           unsigned long framesPerBuffer,
                           const StreamCallbackTimeInfo* timeInfo,
                           StreamCallbackFlags statusFlags,
                           void *userData );
        PaError yakAudioStreamOpen(paTestData *yakData);
        PaError yakAudioStreamStart(paTestData *yakData);
        PaError isYakAudioStreamNotStopped(paTestData *yakData);
        PaError yakCloseAudioStream(paTestData *yakData);
    private:
        Encoder *_encoder;
      };
      } 
```

来自上述代码的以下错误，

错误 C3987：“yakEncode”：公共成员的签名包含本机类型“paTestData *”

错误 C3992：“getYakCodec”：公共成员的签名包含无效类型

注意：paTestData 是一个结构体，

```
 typedef struct
    {
         int          frameIndex;  /* Index into sample array. */
   FILE        *recFileStream; /* Record the stream into File */
   uint8_t     *encoderOutput;
   int         allocOutputSize; /* memory size allocated */
   int         encoderOutputSize;
   PaStream    *recordStream;   /* PaStream opened to record Audio callback. */
   AVContext *c;
    } paTestData; 
```

我不擅长 c++，有人可以告诉我这个错误是什么，以及如何纠正这个错误。.

# android - 识别在android中使用库的应用程序

> ID：14827182
> 
> 赞同：0
> 
> 时间：2013-02-12T07:01:43.947
> 
> 标签：android, shared-libraries, java

好吧，在我的 android 项目中，我使用一个通用库来开发不同的应用程序

**让我详细说明：**

我得到了名为的库包`com.example.library`

我有两个基于这个库的应用程序

`com.example.app.english` 和`com.example.app.german`

我的问题是。

有什么方法可以识别在我的库包`application_name/package_name`中使用我的应用程序或任何详细信息`library`

* *NB:* *抱歉我的英语不好希望大家理解我的需要

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-12T09:40:16.107

您可以将项目用作库，而不是右键单击项目并选择属性并选中库。

之后将此库项目用于任何项目，而不是右键单击并选择属性，然后单击添加到库。

# javascript - KnockoutJS 数组和保留空格

> ID：14827188
> 
> 赞同：0
> 
> 时间：2013-02-12T07:02:09.563
> 
> 标签：javascript, knockout.js

在使用 knockout.js 并通过 foreach 创建元素时，我遇到了一些意外的白色间距行为：我正在创建的元素之间出现意外的大而不规则的间距。

这是 JSFiddle 的代码：http: [//jsfiddle.net/upnD8/](http://jsfiddle.net/upnD8/)

如果我注释掉`white-space: pre-wrap`，我会得到我想要的：一个紧挨着不同行的元素列表，一个接一个。但是，这样做的代价是无法保留我可能故意插入的文本中任何重复出现的空格。

关于为什么会发生这种情况以及我该如何解决这个问题的任何想法？

我才刚刚开始使用 knockout.js；任何其他关于 javascript 等的相关评论也非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:27:29.450

您看到的空白是 DIV 之间的空白。我能想到的两个解决方案：

*   移动`pre-wrap`到生成的 DIV（[http://jsfiddle.net/upnD8/2/](http://jsfiddle.net/upnD8/2/)）
*   通过将元素“折叠”在一起来删除 DIV 之间的空格（[http://jsfiddle.net/upnD8/1](http://jsfiddle.net/upnD8/1)）

# java - java中基于大写的拆分

> ID：14827189
> 
> 赞同：5
> 
> 时间：2013-02-12T07:02:18.843
> 
> 标签：java, uppercase

任何人都知道如何隐藏`FirstName`到`First Name`。

必须根据大写字母进行拆分**，**但应排除第一个字母。

我知道如何使用拆分来做到这一点。除了拆分功能之外，还有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T07:04:32.493

不是真的`split`，只是`replaceAll`：

```
str.replaceAll("(?!^)([A-Z])", " $1") 
```

此解决方案假定您不想在大写英文字母之前添加空格，如果它是字符串中的第一个字符。因此，`" FirstName"`将成为`"  First Name"`（注意 2 个空格）。

`(?!^)`是负前瞻`(?!pattern)`，只是检查这不是字符串的开头`^`。我捕获`(pattern)`大写英文字母，并在替换中使用捕获的文本`$1`（`$1`意味着捕获组**1**中捕获的任何内容都放入替换字符串中 - 在这种情况下只有 1 个捕获组）。

另一种在大写英文字母之前添加空格的解决方案，前提是它前面是小写英文字母：

```
str.replaceAll("(?<=[a-z])([A-Z])", " $1") 
```

`(?<=[a-z])`是一个积极的后`(?<=pattern)`向检查，检查大写字符`[A-Z]`前面是否有小写英文字母`[a-z]`。其余的已经在上面解释过了。

模式可以根据要求变化很大。你只给出一个例子而不是具体要求，所以我会大胆猜测并为你挑选一个模式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T07:06:32.437

比 replaceAll 快 6 到 11 倍：

```
 StringBuilder s = new StringBuilder( "FirstName" );
  for( int i = 1; i < s.length(); ++i ) {
     if( Character.isUpperCase( s.charAt( i ))) {
        s.insert( i++, ' ' );
     }
  } 
```

长椅 ：

```
 long atStart = System.currentTimeMillis();
  for( int j = 0; j < 1000000; ++j ) {
     StringBuilder s = new StringBuilder( "FirstName" );
     for( int i = 1; i < s.length(); ++i ) {
        if( Character.isUpperCase( s.charAt( i ))) {
           s.insert( i++, ' ' );
        }
     }
  }
  long elapsed1 = System.currentTimeMillis() - atStart;

  atStart = System.currentTimeMillis();
  for( int j = 0; j < 1000000; ++j ) {
     String s = "FirstName";
     s = s.replaceAll("(?!^)([A-Z])", " $1");
  }
  long elapsed2 = System.currentTimeMillis() - atStart;

  System.err.println( "Ratio: " + elapsed2 / (double)elapsed1 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-30T06:26:47.393

您可以使用以下代码快照

```
 String array[]= "FirstMiddleLast".replaceAll("(?!^)([A-Z])", " $1").split(" ");
   for(String name:array){
      System.out.println(name);
   } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-12T07:07:46.800

您可以创建自己的，如下所示：

```
private String split(String string) {
    StringBuffer sb = new StringBuffer();
    for (Character character: string.toCharArray()) {
        if (Character.isUpperCase(character)) {
            sb.append(" ");
        }
        sb.append(character);
    }
    return sb.toString().trim();
} 
```

# cocoa - 如何判断捕获的窗口是否在视网膜显示器中显示为视网膜？

> ID：14827192
> 
> 赞同：3
> 
> 时间：2013-02-12T07:02:29.547
> 
> 标签：cocoa, retina-display

如果我使用类似的东西捕获一个窗口......

```
CGImageRef imageRef = CGWindowListCreateImage(CGRectNull, kCGWindowListOptionIncludingWindow, windowID, kCGWindowImageBoundsIgnoreFraming); 
```

并说窗口边界类似于......

```
kCGWindowBounds = {
    Height = 150;
    Width = 490;
    X = 395;
    Y = 174;
}; 
```

如果窗口在视网膜显示器上，kCGWindowBounds 高度会报告为 300 还是 150，但最终捕获的图像是 300？

在此先感谢，其中一件没有视网膜显示的事情我不确定，并且认为这对开发人员也有帮助......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T00:12:54.177

好的，通过使用 Quartz-Debug 启用 hidp 模式找到了答案，并将一个窗口拖到启用了 hidp 的屏幕上。

答案是无论是否视网膜，窗口边界的高度/宽度都是相同的。但是如果在视网膜屏幕上显示，捕获的图像会大 2 倍。

我预计会是这样，但不想做出任何假设。

# activerecord - 使用rails 2.3.15提交表单后如何在灯箱中显示活动记录验证

> ID：14827197
> 
> 赞同：0
> 
> 时间：2013-02-12T07:02:43.923
> 
> 标签：activerecord, lightbox, ruby-on-rails-2

我有 rails 2.3.15 应用程序并使用 ibox 在灯箱中显示内容。

我有一个在灯箱中显示的表单。在提交内容时，我需要在同一个灯箱中显示活动记录错误（如果有）。

但是，截至目前，在提交表单后，它会在新页面中显示表单以及错误，而不是在灯箱中显示。

任何人都可以建议我，如何将内容放入灯箱。

提前致谢。

K. Subrahmanyam。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:50:04.520

我尝试了各种方法来完成上述要求。但是，最后我收到了一个提交表单内容的 ajax 请求。

# ios - 计算请求和响应执行时间

> ID：14827201
> 
> 赞同：2
> 
> 时间：2013-02-12T07:03:04.240
> 
> 标签：ios, objective-c, rest

是否可以计算对服务器的请求和响应时间？

例如请求是 1 秒。响应 2 秒。?

一般来说，发送/接收请求或服务器返回响应需要更多？

也许他们总是花同样的时间，如果它持续了 3 秒。要将数据返回到应用程序，我可以 3/2 = 1.5 并认为请求和响应持续了 1.5 秒。?

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:25:34.620

对于请求和获得响应，我假设您已经创建了一些方法

所以这可能会有所帮助

```
NSDate *Start_Time_OF_Method = [NSDate date];

/* ... Do whatever you need to do. for example Your Request/Response kind of coading ... */

NSDate *Finish_Time_OF_Method = [NSDate date];

NSTimeInterval executionTime = [Finish_Time_OF_Method timeIntervalSinceDate:Start_Time_OF_Method];

NSLog(@"executionTime = %f", executionTime); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:20:17.233

假设您使用 a`NSURLConnection`向服务器发出请求，则`NSURLConnectionDelegate`支持相当多的委托方法，可以在这里为您提供帮助。

看看文档： [https ://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html)

当您覆盖这些委托方法时，我认为您可以获得所需的信息。只要确保你在正确的时刻启动和停止计时器，你就会一切就绪。

# c# - 如果输入为空白，如何转换为 DateTime 但具有默认值？

> ID：14827204
> 
> 赞同：5
> 
> 时间：2013-02-12T07:03:26.027
> 
> 标签：c#, .net, datetime, tryparse

如果输入为空白，什么`.NET`函数将转换为 a`DateTime`但具有默认值？

例如。

```
DateTime dtTest = Convert.ToDateTime(getDateString()); 
```

如果`getDateString()`返回空字符串`Convert.ToDateTime`会引发异常。

我怎样才能使用默认值`"9:00AM"`而不是空字符串？这是`TryParse`可以使用的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T07:07:38.163

使用[`DateTime.TryParse`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparse.aspx)，如果解析失败，您可以指定使用最小日期`DateTime.MinValue.AddHours(9)`获取`(9:00AM)`时间。

```
string str = "";
DateTime temp;
DateTime dt = DateTime.TryParse(str, out temp) ? temp : DateTime.MinValue.AddHours(9); 
```

对于上面的代码，您的`dt`对象将持有`{01/01/0001 9:00:00 AM}`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T07:08:07.377

我使用了一种叫做三元语句的东西。您可以在此处查看示例：[MSDN](http://msdn.microsoft.com/en-US/library/ty67wk28%28v=VS.80%29.aspx)

```
 string myDate = getDateString();
    DateTime dtTest = Convert.ToDateTime(String.IsNullOrEmpty(myDate) ? "my default value" : myDate); 
```

三元语句如下：

```
String.IsNullOrEmpty(myDate) ? "my default value" : myDate 
```

它可以读作如下：

> 如果字符串为 null 或为空，则使用“我的默认值”，否则使用 myDate。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T07:08:21.340

你应该把它分成两部分：

*   找出你要解析的字符串
*   *如果无法*解析该字符串，请计算出您想要的结果

例如：

```
string text = GetDateString(); // Name converted to follow .NET conventions
if (string.IsNullOrEmpty(text))
{
    text = "9:00AM"; // Or whatever
}

DateTime parsed;
if (!DateTime.TryParse(text, out parsed))
{
    parsed = // some default here
} 
```

如果您知道您期望的格式以及您想要将其解析为哪种文化，还可以考虑使用`TryParseExact`而不是。`TryParse`

具有默认*字符串*值的另一种方法是仅具有默认`DateTime`值并且如果文本为空则无需解析：

```
string text = GetDateString(); // Name converted to follow .NET conventions
DateTime parsed;

// This will only try to parse if text is non-null and non-empty
if (string.IsNullOrEmpty(text) || !DateTime.TryParse(text, out parsed))
{
    parsed = // some default here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-19T13:46:34.767

这样做：

```
DateTime MyDate;
DateTime ParsedDate;

if (DateTime.TryParse(txtNotificationDate.Text.Trim(), out ParsedDate))
{
    MyDate= ParsedDate;
}
else
{
    MyDate = DateTime.Now;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T07:10:36.990

只需编写一个包装函数，当验证失败时返回默认值，如下所示，

```
public DateTime Validate(string dateString)
{
        DateTime dt;
        if(DateTime.TryParse(dateString, out dt))
            return dt;
        else
            return DateTime.Now; //default value

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T07:11:29.213

```
 DateTime ToDateTime(string sourceValue){
    DateTime result;
    if(DateTime.TryParse(sourceValue, out result)
    return result
    else{
    result=new DateTime(2013,1,1) //default value, whatever you want
return result
    }
    } 
```

# c++ - QNetworkAccessManager 的替代方案

> ID：14827212
> 
> 赞同：2
> 
> 时间：2013-02-12T07:04:03.717
> 
> 标签：c++, qt, httprequest, blackberry-10, qnetworkaccessmanager

我正在BB10中绘制地图。地图被分成瓷砖。开始时，用户给出经度、纬度和缩放级别，地图显示在该坐标处。通过使用 QNetworkAccessManager 执行 http 请求，我得到了一个图块。首先下载 7x5 块。但问题是当用户开始非常快速地在屏幕上平移并继续这样做时，有时在用户停止平移后，瓷砖的下载延迟很大。每次用户平移时，都会下载一些新图块以显示在屏幕上。现在因为用户继续平移一段时间，所以使用 QNetworkAccessManager 有很多不必要的网络请求。我的猜测是这就是为什么瓷砖下载很慢。对于不必要的请求，我尝试使用 abort() 方法中止 QNetworkAccessManager 的 QNetoworkReply。但它仍然很慢。有没有其他方法可以实现我正在尝试的目标？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:59:58.900

我个人认为问题在于您进行了太多不必要的连接。

通常，HTTP 被认为是一种重量级的协议。它建立在 TCP 之上，因此需要 3 次握手来建立和 4 次握手来终止，而不考虑生成和解析这些 HTTP 标头的时间。

还要考虑服务器的负载。一个小型普通 Web 服务器每秒处理约 100 个请求。如果您的客户端执行如此频繁的请求，恐怕服务器不会太高兴地欢迎您的应用程序。

所以考虑手动限制请求密度，要么只在平移速度低于阈值时发送请求，要么保持一个固定大小的挂起请求队列，仅当队列未满时才发出新请求。只是避免请求泛滥。无论您有什么优化，它对低带宽客户端或任何不太空闲的服务器都没有好处。

# java - 处理 JAX-RS REST API URI 版本控制的最佳方式

> ID：14827222
> 
> 赞同：48
> 
> 时间：2013-02-12T07:04:45.030
> 
> 标签：java, rest, jax-rs, resteasy

我首先在 stackoverflow 中进行了搜索，但找不到与我的问题相关的任何答案。我只能找到与 REST uri 设计相关的问题。

我的问题在后端。假设我们有两个不同版本的 REST uri

[http://api.abc.com/rest/v1/products](http://api.abc.com/rest/v1/products)

[http://api.abc.com/rest/v2/products](http://api.abc.com/rest/v2/products)

在后端（服务器端代码）上遵循基于版本的这两组 api 的现有类的正确路由、可管理性和重用的最佳方法是什么？

我已经想到了用不同的@Path 注释定义资源类的方法，例如，分别有一个 v1 和 v2 的包，并且在该包的 ProductsResource 类中，定义

```
 package com.abc.api.rest.v1.products;
    @Path("/rest/v1/products")
    public class ProductsResource {...}

    package com.abc.api.rest.v2.products;
    @Path("/rest/v2/products")
    public class ProductsResource {...} 
```

＆然后有基于版本的实现逻辑。这种方法的问题是，当我们只从一组 api 中更改一个特定的资源 api 时，我们还必须将其他类复制到 v2 包中。我们能避免吗？

如何编写一个自定义注释说@Version & 具有它支持的版本的值？现在无论是 v1 还是 v2，两个请求都将转到同一个资源类。

例如说

```
 package com.abc.api.rest.products;
    @Path("/rest/{version: [0-9]+}/products")
    @Version(1,2)
    public class ProductsResource {...} 
```

**更新：**

Jarrod 有一个 API 版本控制建议来处理标头中的版本。这也是一种方法，但是，我期待在我们遵循基于 URI 的版本控制时使用最佳实践

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-14T18:28:31.693

将它放在 URL 中的问题是 URL 应该按位置表示资源。API 版本不是位置，也不是资源标识符的一部分。

插入`/v2/`URL 会破坏之前的所有现有链接。

有一种指定 API 版本控制的正确方法：

`Accept:`将其放入所需标题的 mime 类型中。就像是`Accept: application/myapp.2.0.1+json`

[*责任链*](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)模式在这里运行良好，特别是如果有大量不同的 API 版本必须拥有自己的处理程序，这样方法就不会失控。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-08-13T15:37:34.053

此博客文章有一个示例，说明某些人认为正确的方法，即在 URI 中没有版本：http: [//codebias.blogspot.ca/2014/03/versioning-rest-apis-with- custom-accept.html](http://codebias.blogspot.ca/2014/03/versioning-rest-apis-with-custom-accept.html)

简而言之，它利用 JAX-RS`@Consume`注释将特定版本的请求与特定实现相关联，例如：

```
@Consumes({"application/vnd.blog.v1+xml", "application/vnd.blog.v1+json"}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-06T20:56:08.770

我只是想知道为什么没有一个名为 ProductService 的子类

```
@Path(/v2/ProductService)
ProductServiceV2 extends ProductService {

}

@Path(/v1/ProductService)
 class ProductService{

} 
```

并且只覆盖 v2 中更改的任何内容。所有未更改的内容都将与 v1/ProductService 中的相同。

这肯定会导致更多的类，但这是一种更简单的编码方式，只针对新版本 api 中发生的任何变化并在不复制代码的情况下恢复到旧版本。

# gwt - 从 gwt 中的 url 下载文件

> ID：14827223
> 
> 赞同：1
> 
> 时间：2013-02-12T07:04:46.010
> 
> 标签：gwt, download

我想从互联网上下载一个文件，我有那个文件的 url。所以我写了一个下载servlet：

```
public class DownloadServlet extends HttpServlet {
    public void doGet(HttpServletRequest request, HttpServletResponse response)
            throws IOException {
        String pathToDownload = request.getParameter("url");

        URL url = new URL(pathToDownload);
        URLConnection uc = url.openConnection();
        String contentType = uc.getContentType();
        int contentLength = uc.getContentLength();
        InputStream is = uc.getInputStream();

        response.setContentType(contentType);
        // resp.setHeader("Content-Disposition", "attachment; filename*=\"utf-8''" + filename + "");
        ServletOutputStream os = response.getOutputStream();
        byte[] b = new byte[2048];
        int length;

        while ((length = is.read(b)) != -1) {
            os.write(b, 0, length);
        }
        is.close();
        os.close();
    }
} 
```

在此我想在用户单击文件时显示弹出窗口是否保存所以有

```
resp.setHeader("Content-Disposition", "attachment; filename*=\"utf-8''" + filename + ""); 
```

但我希望文件名与 internate 上的文件名相同，所以上面的代码片段还需要什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:15:37.787

将子字符串从最后一个“/”剪切到 URL 字符串的末尾 - 这是您的文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-10T13:15:17.777

```
String disposition = httpConn.getHeaderField("Content-Disposition");
            if (disposition != null) {
                // extracts file name from header field

                int index = disposition.indexOf("filename=");
                if (index != 0) {
                    fileName = disposition.substring(index + 9,
                            disposition.length());
                }
            } else {
                // extracts file name from URL

                fileName = link.substring(link.lastIndexOf("/") + 1,
                        link.length());
            } 
```

# html5-canvas - 将图像添加到 HTML5 画布时淡入图像 - 处理时间问题

> ID：14827225
> 
> 赞同：1
> 
> 时间：2013-02-12T07:04:55.187
> 
> 标签：html5-canvas

我正在使用 HTML5 画布绘制组织结构。每个节点包括一个图像，其 URL 是从数据库中获得的。我有一个处理图像加载的小函数，一旦加载，它就会将其添加到画布中。它看起来像这样（请注意，重要的是添加到图像的 onload 侦听器）：

```
(function (i, ctx, DrawId) {
    var img = new Image();
    img.src = REPORT.Structures[i].Managers[j].Employee.PhotoUrl; //get URL from object constructed elsewhere      
    img.onload = function () { //attach onload event          
            ctx.drawImage(img, x, y, width, height);//draw image on the canvas. x, y width and height are calculated inside the onload, but I have removed the calculations to improve readability
        }
    }
})(i, ctx, REPORT.DrawId); 
```

这很好用，只是图像在完成加载时都会随机出现。它看起来很不整洁。

我正在寻找一种方法来使它看起来更平滑。我的第一直觉是尝试创建淡入淡出效果，但如果不一遍又一遍地重绘画布，我想不出如何做到这一点。

我曾想过尝试这样的事情：

```
img.onload = function () {
    var counter = 1;
    var width = 30 * REPORT.ZoomLevel;
    var height = 30 * REPORT.ZoomLevel;
    function fadeInImage(ctx, img, x, y, width, height) {
        ctx.globalAlpha = 0.1 * counter;
        ctx.drawImage(img, x, y, width, height);
        counter++;
        if (counter == 10)
            clearTimeout(fadeInImageTimeout);
        console.log(counter);
    }
    var fadeInImageTimeout = setInterval(function () { fadeInImage(ctx, img, x, y, width, height); }, 100);
} 
```

这行得通，但我也担心如果这样做，它的处理量会太大。

有没有人试过做这样的事情？任何建议将不胜感激。

PS：我目前正在考虑只使用一个间隔来绘制所有图像。每个图像将被推入一个数组，一旦加载所有图像，就会绘制数组中的所有元素。会及时更新。

PPS：正如我在上面的 PS 中提到的那样，我已经设法让它工作。不过好像不影响性能。我想我仍然遇到的延迟与图像加载时间有关。我会尝试将代码剥离成一个简单的版本并稍后在此处发布，但如果有人能看到我的方法中的缺陷，请毫不犹豫地指出它。再次，任何建议将不胜感激。

# php - PHP函数实现发送短信

> ID：14827229
> 
> 赞同：0
> 
> 时间：2013-02-12T07:05:00.507
> 
> 标签：php

我正在尝试为我正在使用 PHP 开发的这个项目实现发送 SMS。注意：我不是说通过运营商发送免费短信和其他东西，我实际上是联系了一家提供链接的短信公司 `www.smssender.com?username=myusername&pass=mypass&message=mymessage&recipient=phonenumber`。

PHP 中的什么函数可以用来向服务器 API 发送这样的请求，并得到响应？这是我想要的（伪代码）：

```
function Sendsms(){
  add details to sting
  send url to sms server with the parameters
  get response and display
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:07:51.433

你想做如下的事情（这是一个 POST 请求的例子）我正在使用 PHP 的 curl [http://www.php.net/manual/en/function.curl-init.php](http://www.php.net/manual/en/function.curl-init.php) ：

```
$url = 'http://domain.com/get-post.php';
$fields = array(
            'lname' => urlencode($last_name),
            'fname' => urlencode($first_name),
            'title' => urlencode($title),
            'company' => urlencode($institution),
            'age' => urlencode($age),
            'email' => urlencode($email),
            'phone' => urlencode($phone)
        );

//url-ify the data for the POST
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string, '&');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST, count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch); 
```

对请求的响应在变量中`$result`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T07:09:58.183

看起来你正在做一个 GET 请求。你看过 php http_get 函数吗？

```
<?php
$response = http_get("http://www.example.com/", array("timeout"=>1), $info);
print_r($info);
?> 
```

来源：[http ://us2.php.net/manual/en/function.http-get.php](http://us2.php.net/manual/en/function.http-get.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T07:20:09.150

```
function Sendsms()
{
   //add details to sting
     $url="www.smssender.comusername=myusername&pass=mypass&message=
      mymessage&recipient=phonenumber";

   //send url to sms server with the parameters
   $rsp = file_get_contents($url);

   //get response and display
   if( $res )
   {
        echo "sms successfully send";
   }
} 
```

# entity-framework - 如何在 MVC4 项目中 Razor 文件的 foreach 循环中访问相关表数据？

> ID：14827232
> 
> 赞同：1
> 
> 时间：2013-02-12T07:05:34.643
> 
> 标签：entity-framework, asp.net-mvc-4

我无法使用以下内容访问“ApplicationStatusId”，

```
var applicationStatus = applicationItem.ApplicationDetermination.ApplicationStatusId; 
```

但我可以使用以下命令访问同一个剃须刀文件中的“ApplicationStatusId”，

```
@Html.DisplayFor(modelItem => applicationItem.ApplicationDetermination.ApplicationStatusId) 
```

![在此处输入图像描述](../Images/9096738a9af6a9cea49cb2fa4bf996bc.png)

![在此处输入图像描述](../Images/3307f2ab82f43d4e0fcd0ada7a58c484.png)

请看下面的错误，

![在此处输入图像描述](../Images/537ef9799b0a7088a90bebbe7fd7dc70.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T02:49:11.553

我通过对“ApplicationDetermination”对象进行空检查来解决这个问题。它试图从空对象中获取 ApplicationStatusId。

![在此处输入图像描述](../Images/43bc475cedef976e40e79c961d1a267d.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T18:36:06.530

用这个

```
 var applicationStatus = @applicationItem.ApplicationDetermination.ApplicationStatusId; 
```

# javascript - 通过传递参数从 html.actionlink 调用 JS

> ID：14827236
> 
> 赞同：1
> 
> 时间：2013-02-12T07:05:54.907
> 
> 标签：javascript, asp.net-mvc-3

我有这一行：

```
<%: Html.ActionLink(item.Name, "Group", "Recommend", new { area = "User" , groupId = item.GroupId, onclick = "Approve(<% groupId %>)" } ) %> 
```

并且需要将 groupId 传递给 JS 函数 Approve(<% groupId %>) 该行给出错误：NewLine in constant。第二个 %> 在 Approve(<% groupId %>) 中以黄色突出显示，但不是第一个。我是否缺少标签或缺少报价？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:14:02.483

尝试这样的事情：

```
<%: Html.ActionLink(item.Name, "Group", "Recommend", new %>
<%: { %>
        area = "User" , 
        groupId = item.GroupId, 
        onclick = "Approve(" + item.GroupId + ")" 
<%: } ) %> 
```

# windows-8 - 如何在 Windows Phone 8 模拟器中部署应用程序进行测试，而无需在 Windows 8 机器上安装 vs2012？

> ID：14827237
> 
> 赞同：1
> 
> 时间：2013-02-12T07:05:57.083
> 
> 标签：windows-8, microsoft-metro, windows-phone-8, windows-phone-8-emulator

嗨，我正在开发一个 windows phone 8 应用程序，我有以下疑问：-

如何在 Windows Phone 8 模拟器中部署应用程序进行测试，而无需在 Windows 8 机器上安装 vs2012，

因为我不能在我的测试机器中拥有 vs2012 的许可版本，因为我想将它用于下降时间，即超过 1 个月或 3 个月（不是试用版）

1）我可以通过命令行打开 Windows Phone 8 模拟器并安装 vs2012 我的测试仪 windows 8 机器。

2）应用程序部署工具将可用于在模拟器中部署应用程序，而无需在我的测试仪 windows 8 机器上安装 vs2012。

3）在没有安装vs2012的机器上部署应用程序到windows phone 8模拟器的任何替代方法。??/

感谢 Adavnce。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:08:34.007

你不能。为 Windows Phone 安装 Visual Studio Express 2012 - 它是免费的

[http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-windows-phone](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-windows-phone)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:44:48.017

1）您可以使用以下命令行启动模拟器：

```
"C:\Program Files (x86)\Microsoft XDE\8.0\xde.exe" /name "Emulator WVGA 512MB.username" 
```

`username`您的 Windows 用户名在哪里。

[2 & 3) 您可以使用 JustinAngel 的回答https://stackoverflow.com/a/13429709/2087252](https://stackoverflow.com/a/13429709/2087252)中描述的解决方案部署/运行/删除应用程序。

要使其正常工作，您需要从项目中引用以下 dll：

```
Microsoft.Smartdevice.Connectivity.Interface.dll
Microsoft.Smartdevice.Connectivity.dll
Microsoft.Smartdevice.MultiTargeting.Connectivity.dll 
```

# vim - 病原体不生成帮助标签 Vim Windows

> ID：14827242
> 
> 赞同：1
> 
> 时间：2013-02-12T07:06:30.947
> 
> 标签：vim, pathogen

如果您已经尝试过类似[Vim + Pathogen 的解决方案，但不会加载](https://stackoverflow.com/questions/6970334/vim-pathogen-not-loading-help-docs)您仅`filetype off`在调用病原体感染之前添加的帮助文档，并且您仍然**无法**生成帮助标签，那么此提示可能会对您有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T07:06:30.947

Pathogen 正在搜索下的 bundle 文件夹`~/.vim/bundle`，并为每个 doc 文件夹生成帮助标签，`~`您的运行时路径在哪里。在 Windows 上，vim 的默认运行时路径会`~/Vim/vim73`以某种方式混淆 Pathogen，如果您将运行时路径更改为上一个文件夹，`~/Vim`一切都会修复！

Vim 中的运行时路径变量使用以下命令更改：

```
:let $VIMRUNTIME = "puth_path_here/Vim" 
```

在 Vim 中输入 :h $VIMRUNTIME 以获得更详细的解释。

# javascript - JQuery 验证多个文件

> ID：14827243
> 
> 赞同：0
> 
> 时间：2013-02-12T07:06:32.100
> 
> 标签：javascript, jquery, file-upload

您好我有多个文件要上传，我需要在提交表单之前验证所有这些文件

```
<form onsubmit="return validate()">
<input type="file" name="File" class="multi" />
<input type="file" name="File" class="multi" />
<input type="file" name="File" class="multi" />
<input type="file" name="File" class="multi" />
<input type="submit" name="BtnSubmit" value="save" />
</form> 
```

和 j 查询部分

```
function validate()
{
$(".multi").each(function(){
   var files = $(this).val(); 

   if(files=='')
   { 
      alert("No document file selected");
       return false; 
   }

});
} 
```

问题是它显示警报但仍然提交表单。如何防止这种情况。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:25:51.347

`false`从表单的 onsubmit 处理程序返回会停止提交过程，但在您的代码中，您是`false`从您提供给的匿名函数`$.each`而不是`validate`函数返回的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:30:29.077

试试这个小提琴[http://jsfiddle.net/6cU74/3/](http://jsfiddle.net/6cU74/3/)

HTML:-

```
<form id="form1" method="post">
    <input type="file" name="File" class="multi" />
    <input type="file" name="File" class="multi" />
    <input type="file" name="File" class="multi" />
    <input type="file" name="File" class="multi" />
    <input type="submit" id="BtnSubmit" value="save" />
</form> 
```

JS（使用 jQuery）：-

```
$(function () {
    $("#BtnSubmit").click(function (event) {
        event.preventDefault();
        var flag = true;
        $(".multi").each(function () {
            var files = $(this).val();

            if (files == '') {
                alert("No document file selected");
                flag=false;
            }

        });
        if (true==flag){
            $("#form1").submit();
            }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T07:35:55.170

validate 函数不会返回 false，但 .each() 函数会。所以添加验证以检查是否所有验证都通过了 .each() 函数，否则返回 false

```
function validate() {
    var count = $(".multi").length;
    var index = 0;
    $(".multi").each(function () {
        var files = $(this).val();

        if (files == '') {
            alert("No document file selected");
            return false;
        }

        index += 1;
    });

    if (index != count) { //If the validation in .each() looping has returned false
        return false;
    }
} 
```

# macos - 是否可以在 Applescript 的对话框中设置文本颜色？

> ID：14827248
> 
> 赞同：0
> 
> 时间：2013-02-12T07:06:37.873
> 
> 标签：macos, osx-lion, applescript

有什么办法可以改变Apple脚本对话框中的文本颜色？？？

请回复

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:24:11.537

不，没有办法更改 AppleScript 对话框中的文本颜色。但是，您可以更改其他方面，例如显示图标、使文本字段将字母显示为项目符号（用于密码等）等。有关更多信息，请参阅[AppleScript Wiki](http://applescript.wikia.com/wiki/Display_Dialog#Parameters)。

# java - 休眠查询执行时将空值分配给原始类型的属性？

> ID：14827249
> 
> 赞同：3
> 
> 时间：2013-02-12T07:06:47.523
> 
> 标签：java, sql, hibernate

我在 dao 中有以下代码片段

```
 String GET_CUSTOMER="SELECT * from customer where custName=:custName"
  Session session = getHibernateUtil().getSession();
  SQLQuery query = session.createSQLQuery(GET_CUSTOMER);

    query.setParameter("custName", custName);
    query.setResultTransformer(Transformers
        .aliasToBean(Customer.class));

    Customer custData = (Customer) query
        .uniqueResult();//line 
```

客户表有一些 int 列，其中一些值为 null。现在在 line1 我得到错误 Null value was assigned to a property of original type setter of Customer.Address

hibernate/query/Transformer 有没有办法自动将空值转换为 0？我刚刚提到了一个表，即客户，但是有各种联接表，其中在各个列中包含 int 值作为 null，所以我不想在查询中处理每个表。

**更新：-**客户不是休眠实体。它带有 int 类型的实例字段

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T07:11:12.097

> 客户表有一些 int 列，其中一些值为 null。

在这种情况下，我建议`Integer`改为将它们设为字段。虽然您*可能可以*让 Hibernate 合并（尽管可能不是`NULL`以`0`一种简单的全局方式），但它并没有真正有效地映射您的数据——您为什么要丢失这样的信息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:39:13.583

我不知道 Hibernate 转换器，但我有不同的想法。可以改数据库吗？您可以使该列不可为空并使用默认值 0。这样，您可以存储在数据库中的所有可能值都可以映射到 int 原语。

# javascript - HTML中同一个按钮的多个功能

> ID：14827256
> 
> 赞同：0
> 
> 时间：2013-02-12T07:07:25.737
> 
> 标签：javascript, html

我是 HTML 和 javascript 的初学者，所以寻求帮助。我有一个表单，它有一个提交按钮。当我点击提交按钮时，按钮的名称会改变，它会做一些动作。当我再次点击按钮时，我必须做不同的动作。这是我的代码。

HTML：

```
 <form name="myform" method="post" onsubmit="return false">

        <input type="submit" id="reschedule" value="reschedule" onclick="changeContent()"/> 
```

Javascript是：

```
 function changeContent(ref){
        alert(id)
        document.getElementById("reschedule").value="Submit"
        var editables = document.getElementsByClassName('editableText');
        for (var i = 1; i < editables.length; i++) {
            var newstate = !editables[i].isContentEditable;
            editables[i].contentEditable = newstate;
            editables[i].bgcolor='#FF0000'
        }
        if (document.getElementById("Submit").click) {
            alert("submit")
        }
    } 
```

因此，当我单击重新安排时，按钮名称将更改为提交。现在，当我需要单击提交功能时，我需要执行一些操作。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:12:56.320

你应该`return false;`在函数结束时，这样你的页面就不会刷新，你可以在同一页面上做任何事情。使用以下 javascript 代码

```
 function changeContent(ref){
        alert(id)
        document.getElementById("reschedule").value="Submit"
        var editables = document.getElementsByClassName('editableText');
        for (var i = 1; i < editables.length; i++) {
            var newstate = !editables[i].isContentEditable;
            editables[i].contentEditable = newstate;
            editables[i].bgcolor='#FF0000'
        }
        if (document.getElementById("Submit").click) {
            alert("submit")
        }
        return false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:13:50.533

我想到的第一个解决方案是检查按钮的名称并根据该值执行一些操作。例如：

```
function changeContent(ref){
    if(document.getElementById("reschedule").value == "reschedule") {
        alert(id)
        document.getElementById("reschedule").value="Submit"
        var editables = document.getElementsByClassName('editableText');
        for (var i = 1; i < editables.length; i++) {
            var newstate = !editables[i].isContentEditable;
            editables[i].contentEditable = newstate;
            editables[i].bgcolor='#FF0000'
        }
    }
    else if(document.getElementById("reschedule").value == "Submit") {
        // do something else
    }
} 
```

这是你想要的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T07:17:49.513

尝试使用按钮，一旦您通过点击提交按钮提交，页面将随着您的操作刷新尝试使用**按钮**

**更新您的按钮**

```
 <input type="button" id="reschedule" value="reschedule" onclick="changeContent()"/> 
```

然后像这样改变你的java脚本函数

```
 function changeContent(ref){
        alert(id)
        document.getElementById("reschedule").value="Submit"
        var editables = document.getElementsByClassName('editableText');
        for (var i = 1; i < editables.length; i++) {
            var newstate = !editables[i].isContentEditable;
            editables[i].contentEditable = newstate;
            editables[i].bgcolor='#FF0000'
        }

        if (document.getElementById("Submit").click) {
            alert("submit");
             return true;
        }
        return false;
    } 
```

**更新设置：**

您可以在 javascript 函数中使用**Button**调用您的操作，如下所示：

```
 document.your_form_name.action = "your_action_name";
 document.your_form_name.submit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T07:20:56.283

应该 ：

```
function changeContent()
{
    document.getElementById("reschedule").value = "Submit";
    var editables = document.getElementsByClassName('editableText');
    for (var i = 1; i < editables.length; i++) 
    {
        var newstate = !editables[i].isContentEditable;
        editables[i].contentEditable = newstate;
        editables[i].bgcolor='#FF0000'
    }
    if (document.getElementById("reschedule").value = "Submit") 
    {
       document.getElementById("reschedule").onclick=function(){
            alert('Hello this submit button click event');
       };
    }
} 
```

# glsl - 从内部着色器写入变量以供外部使用

> ID：14827261
> 
> 赞同：1
> 
> 时间：2013-02-12T07:07:47.470
> 
> 标签：glsl, three.js, webgl, shader

从着色器内部我无法修改制服或属性。有没有办法可以编写一个可以在着色器之外使用的变量？

我的目标是确定 z 轴上的最低和最高顶点。我当然可以在 for 循环中遍历所有顶点，但是着色器无论如何都会遍历它们并且速度更快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:15:27.390

并不真地。着色器的输出始终是像素。除此之外的任何事情都会违反 GPU 的流处理特性。您可以读取结果像素值...

# java - 将文件转换为短数组，反之亦然

> ID：14827266
> 
> 赞同：0
> 
> 时间：2013-02-12T07:08:01.673
> 
> 标签：java, android, arrays, file

如何`short`从文件（例如音频或视频文件）中读取数组？我怎样才能把它写回文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:15:18.483

如果可能的话，我真的怀疑是否**SHORT**。不过，您可以查看[Apache Commons File Utils](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)以读取文件`byte[]`，反之亦然。

```
public static byte[] readFileToByteArray(File file) throws IOException 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:29:43.300

这是更好的例子：

```
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

/**  
 Converting binary data into different forms.

 <P>Reads binary data into memory, and writes it back out.
 (If your're actually copying a file, there are better ways to do this.)

 <P>Buffering is used when reading and writing files, to minimize the number 
 of interactions with the disk.
*/
public final class BytesStreamsAndFiles {

  /** Change these settings before running this class. */
  private static final String INPUT_FILE_NAME = "C:\\TEMP\\cottage.jpg";
  private static final String OUTPUT_FILE_NAME = "C:\\TEMP\\cottage_copy.jpg";

  /** Run the example. */
  public static void main(String... aArgs) {
    BytesStreamsAndFiles test = new BytesStreamsAndFiles();
    //read in the bytes
    byte[] fileContents = test.read(INPUT_FILE_NAME);
    //test.readAlternateImpl(INPUT_FILE_NAME);
    //write it back out to a different file name
    test.write(fileContents, OUTPUT_FILE_NAME);
  }

  /** Read the given binary file, and return its contents as a byte array.*/ 
  byte[] read(String aInputFileName){
    log("Reading in binary file named : " + aInputFileName);
    File file = new File(aInputFileName);
    log("File size: " + file.length());
    byte[] result = new byte[(int)file.length()];
    try {
      InputStream input = null;
      try {
        int totalBytesRead = 0;
        input = new BufferedInputStream(new FileInputStream(file));
        while(totalBytesRead < result.length){
          int bytesRemaining = result.length - totalBytesRead;
          //input.read() returns -1, 0, or more :
          int bytesRead = input.read(result, totalBytesRead, bytesRemaining); 
          if (bytesRead > 0){
            totalBytesRead = totalBytesRead + bytesRead;
          }
        }
        /*
         the above style is a bit tricky: it places bytes into the 'result' array; 
         'result' is an output parameter;
         the while loop usually has a single iteration only.
        */
        log("Num bytes read: " + totalBytesRead);
      }
      finally {
        log("Closing input stream.");
        input.close();
      }
    }
    catch (FileNotFoundException ex) {
      log("File not found.");
    }
    catch (IOException ex) {
      log(ex);
    }
    return result;
  }

  /**
   Write a byte array to the given file. 
   Writing binary data is significantly simpler than reading it. 
  */
  void write(byte[] aInput, String aOutputFileName){
    log("Writing binary file...");
    try {
      OutputStream output = null;
      try {
        output = new BufferedOutputStream(new FileOutputStream(aOutputFileName));
        output.write(aInput);
      }
      finally {
        output.close();
      }
    }
    catch(FileNotFoundException ex){
      log("File not found.");
    }
    catch(IOException ex){
      log(ex);
    }
  }

  /** Read the given binary file, and return its contents as a byte array.*/ 
  byte[] readAlternateImpl(String aInputFileName){
    log("Reading in binary file named : " + aInputFileName);
    File file = new File(aInputFileName);
    log("File size: " + file.length());
    byte[] result = null;
    try {
      InputStream input =  new BufferedInputStream(new FileInputStream(file));
      result = readAndClose(input);
    }
    catch (FileNotFoundException ex){
      log(ex);
    }
    return result;
  }

  /**
   Read an input stream, and return it as a byte array.  
   Sometimes the source of bytes is an input stream instead of a file. 
   This implementation closes aInput after it's read.
  */
  byte[] readAndClose(InputStream aInput){
    //carries the data from input to output :    
    byte[] bucket = new byte[32*1024]; 
    ByteArrayOutputStream result = null; 
    try  {
      try {
        //Use buffering? No. Buffering avoids costly access to disk or network;
        //buffering to an in-memory stream makes no sense.
        result = new ByteArrayOutputStream(bucket.length);
        int bytesRead = 0;
        while(bytesRead != -1){
          //aInput.read() returns -1, 0, or more :
          bytesRead = aInput.read(bucket);
          if(bytesRead > 0){
            result.write(bucket, 0, bytesRead);
          }
        }
      }
      finally {
        aInput.close();
        //result.close(); this is a no-operation for ByteArrayOutputStream
      }
    }
    catch (IOException ex){
      log(ex);
    }
    return result.toByteArray();
  }

  private static void log(Object aThing){
    System.out.println(String.valueOf(aThing));
  }
} 
```

有关更多详细信息，请访问：[读取和写入二进制文件](http://www.javapractices.com/topic/TopicAction.do?Id=245)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-12T07:26:08.760

下面的代码片段使用 FileInputStream 读取文件，并使用 FileOutputStream 将文件写入给定路径。

Java 代码：

```
byte[] fileBArray = new byte[(int)file.length()];
FileInputStream fis = new FileInputStream(file);
fis.read(fileBArray);

FileOutputStream fos = new FileOutputStream("C:\\abc.jpg");
fos.write(fileBArray); 
```

# c# - 带有 ANY 的实体框架子查询

> ID：14827268
> 
> 赞同：2
> 
> 时间：2013-02-12T07:08:06.323
> 
> 标签：c#, entity-framework

请帮助我尝试使用实体框架执行此操作，但我不知道该怎么做。

```
SELECT * FROM PJT.Notifications
WHERE ProjectProgrssID = ANY(
SELECT ProjectProgressID FROM PJT.ProjectProgress
WHERE ProjectID = ANY(
SELECT ProjectID FROM PJT.Projects WHERE UniversityID = 1)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:12:48.327

试试这个：

```
Projects.Where(p => p.UniversityId = 1)
    .SelectMany(pp => pp.ProjectProgress)
    .SelectMany(pr => pr.Notifications); 
```

# javascript - 使用 jQuery Ajax 的 SEO 友好链接

> ID：14827270
> 
> 赞同：0
> 
> 时间：2013-02-12T07:08:07.267
> 
> 标签：javascript, ajax, jquery

我正在使用 Ajax jQuery 加载数据，如下所示：

```
<div id=result></div>
  $.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    url: "/co.aspx/getdata",
    success: function(r) {
      var dt = JSON.parse(r.d);
      var str='<a href='+ dt[i].Link+'>'+ dt[i].Name +'</a><br/>';
      $("#result").html(str);
    }
  }): 
```

但这些链接不会在 Google 中列出，因为它们不是由任何站点地图生成器生成的。

我怎样才能使它对 SEO 友好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:17:16.373

遵循[渐进增强](http://en.wikipedia.org/wiki/Progressive_enhancement)和[不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)原则。

1.  建立一个无需 JS 的网站
2.  用 JS 增强它
3.  当您使用 Ajax 操作视图时，使用[历史 API](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)将地址更新为页面的非 Ajax 地址

# vba - 终止宏在验证时进一步执行

> ID：14827273
> 
> 赞同：18
> 
> 时间：2013-02-12T07:08:25.957
> 
> 标签：vba, excel

我有一个`method-A()`从多种方法调用的，

在方法 A 中的一个条件下，我必须终止宏。

我看到了一个选项，`Exit sub`但这只会退出当前`sub ie:method-A()`程序，其余程序继续。

如何处理。

```
Sub mainMethod()
    method-A()
end Sub

Sub method-A()
    if (true) Then
         'Terminate the macro. that is exit method-A() and also mainMethod()
end Sub 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-12T07:53:06.717

评论后编辑：只需使用`end`您要终止所有代码的位置。

```
Sub mainMethod()
    method_A()
end Sub

Sub method-A()
    if (true) Then End
         'Terminate the macro. that is exit method-A() and also mainMethod()
end Sub 
```

原始答案：您需要做的就是使 methodA 成为一个函数，如果您想按照以下代码退出 main 方法，则将此函数返回为 FALSE：

```
Sub mainMethod()

    'Run the custom function and if it returns false exit the main method
    If Not method_A Then Exit Sub

    'If method_A returns TRUE then the code keeps going
    MsgBox "Method_A was TRUE!"

End Sub

Function method_A() As Boolean
    Dim bSomeBool As Boolean

   'Code does stuff
   bSomeBool = True

   'Check your condition
   If bSomeBool Then
       'Set this function as false and exit
       method_A = False
       Exit Function
   End If

    'If bSomeBool = False then keep going
End Function 
```

# php - 使用 HTML 5 和 PHP 上传多个文件

> ID：14827275
> 
> 赞同：0
> 
> 时间：2013-02-12T07:08:32.670
> 
> 标签：php, upload

我正在尝试上传多个文件并将它们附加到 Wordpress 帖子中。此代码适用于单个图像：

**PHP**

```
function insert_attachment($file_handler,$post_id,$setthumb='false') {
    // check to make sure its a successful upload
    if ($_FILES[$file_handler]['error'] !== UPLOAD_ERR_OK) __return_false();

    require_once(ABSPATH . "wp-admin" . '/includes/image.php');
    require_once(ABSPATH . "wp-admin" . '/includes/file.php');
    require_once(ABSPATH . "wp-admin" . '/includes/media.php');

    $attach_id = media_handle_upload( $file_handler, $post_id );

    if ($setthumb) update_post_meta($post_id,'_thumbnail_id',$attach_id);
        return $attach_id;
}

if ($_FILES) {
    foreach ($_FILES as $file => $array) {
    $newupload = insert_attachment($file,$pid);
} 
```

**HTML**

```
<fieldset class="images">
    <label for="images">Images</label>
    <input type="file" name="images" id="images" tabindex="25"/>
</fieldset> 
```

但是我怎样才能让它与多个图像一起工作呢？

我知道我必须添加`multiple="multiple"`到输入中，输入的名称应该是`images[]`. 但我肯定有 PHP 脚本的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:10:43.510

万一将来有人需要这个：我在[这里](https://wordpress.stackexchange.com/questions/50379/uploading-multiple-attachments-from-front-end-with-a-description)找到了解决方案：

```
// If we have files
if ( $_FILES )
{
    // Get the upload attachment files
    $files = $_FILES['upload_attachment'];

    foreach ($files['name'] as $key => $value)
    {
        if ($files['name'][$key])
        {
            $file = array(
                'name' => $files['name'][$key],
                'type' => $files['type'][$key],
                'tmp_name' => $files['tmp_name'][$key],
                'error' => $files['error'][$key],
                'size' => $files['size'][$key]
            );

            $_FILES = array("upload_attachment" => $file);

            foreach ($_FILES as $file => $array)
            {
                $newupload = insert_attachment($file,$post->ID);
            }
        }
    }
} 
```

# php - PHP使用ajax刷新表格内容

> ID：14827278
> 
> 赞同：5
> 
> 时间：2013-02-12T07:08:58.223
> 
> 标签：php, codeigniter, jquery, partial-page-refresh

我有一个表格，其中包含一个表格，该表格根据下拉列表中的选定选项动态填充数据。

下拉列表包含 2 个值“启用”和“禁用”。表格中每一行的第一列包含一个复选框。表结构如下。

```
[checkbox ]| user | status

[checkbox1]| jim  | enabled

[checkbox2]| sam  | disabled 
```

复选框值等于用户 ID。

有一个用于更改所选用户状态的按钮。

在按钮上单击选定的复选框值使用 ajax 发布，选定用户的状态发生更改，但数据仅在页面重新加载时刷新。

状态更改时如何刷新表格。这是我的脚本。

```
 function Status(){
    var checked = []
    $("input[name='select[]']:checked").each(function ()
    {
        checked.push(parseInt($(this).val()));
    });
    if(checked!=''){

                    $.ajax({
                        type:'post',
                        url:site_url()+'/common/changeStatus',
                        data:{'checked':checked},
                        dataType:'json',
                        async:false,
                        success:function(result){

                            if(result!= "false"){
                                $.msgBox({
                                    title:"Success",
                                    content:"Status change successful"
                                });
                                $(function () {
                                    $('.msgButton').click(function (event) {
                                        event.preventDefault();
                                        $("#table").load($(this).attr("#table"));

                                    });
                                });                                
                            } 
```

这`#table`是包含数据的表的 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:21:49.460

您必须在 PHP 文件本身中构建具有当前状态的表。然后您可以将其作为响应发送。在 Jquery AJAX 响应中，您必须像这样添加，

```
$(".table").html(resultTable); 
```

resultTable 是您从 PHP 文件传递​​的响应。如果您只这样做，您可以获得具有更新状态的表格。

# python - sqlalchemy 基类引发“在旧样式类上使用属性”错误

> ID：14827284
> 
> 赞同：0
> 
> 时间：2013-02-12T07:09:39.050
> 
> 标签：python, sqlalchemy

想知道 sqlalchemy中的**Base**是否继承自**Object**。详见下文。

目前使用 Python3 和 SQLAlchemy 0.8

在我的项目中，我用 (object) 声明了一个新的样式类，然后我继续使用“属性”在我的类中定义属性。该类工作正常“下面的示例代码”

```
class LoadFile(object):

    def _set_year(self, value): 
        '''set the year'''    
        value = value[6:10]
        if valid_integer(value) != True:
            raise Exception ("File Name Error: The year value should be a numeral")
        self._year = value
    def _get_year(self):
        '''get the year'''
        return self._year

    year = property(_get_year, _set_year) 
```

随着我的项目的增长，我开始使用 SQLAlchemy 并运行了这个类，它抛出了错误

```
class LoadFile(object):
    __tablename__ = "load_file"
    id = Column(Integer(10), primary_key = True)
    file_name = Column(String(250), nullable = False, unique = True)
    file_path = Column(String(500), nullable = False)
    date_submitted = Column(DateTime, nullable = False)
    submitted_by = Column(String, nullable = False)

    def _set_year(self, value): 
        '''set the year'''    
        value = value[6:10]
        if valid_integer(value) != True:
            raise Exception ("File Name Error: The year value should be a numeral")
        self._year = value
    def _get_year(self):
        '''get the year'''
        return self._year

    year = property(_get_year, _set_year) 
```

它抛出的错误是：

```
AttributeError: 'LoadFile' object has no attribute '_sa_instance_state'

File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/orm/session.py", line 1369, in add
raise exc.UnmappedInstanceError(instance)
sqlalchemy.orm.exc.UnmappedInstanceError: Class '__main__.LoadFile' is not mapped 
```

所以我注意到我没有从“ **Base** ”继承，所以我将我的课程改为：

```
class LoadFile(Base): 
```

这样，sqlalchemy 工作正常，表创建成功。但是，我现在注意到我收到关于 eclipse 的警告说明

```
Use of "property" on an old style class" 
```

**所以我想知道， Base**不是继承自 Object 吗？以为我之前读过它确实如此。否则，为什么我现在会收到这个“警告”。我知道我可以忽略它，但只是想找出确切的原因以及如何纠正它。

谢谢。

**更新**

我到处使用装饰器，如下所示。这样，上面的“警告”就消失了

```
@property
def year(self):
    '''get the year'''
    return self._year
@year.setter
def year(self, value): 
    '''set the year'''
    if valid_integer(value) != True:
        raise Exception ("File Name Error: The year value should be a numeral")
    self._year = value 
```

这样就可以处理警告。但我仍然不明白为什么以前的方法有警告....另外，我不太确定哪个是使用装饰器的最佳方法还是以前的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:39:24.233

Python 3 中不存在旧式类，因此警告是虚假的。检查 Eclipse 中的 Preferences 和 Project Properties，也许有对 Python 2.x 的引用。

# java - 在实体类中创建其他公共方法

> ID：14827285
> 
> 赞同：1
> 
> 时间：2013-02-12T07:09:43.953
> 
> 标签：java, hibernate, jpa, entity

我有一个实体类

```
 @Entity
    @Table(name = "rule")
    public class Rule implements Cloneable, Serializable, IPojoGenEntity, IRule, SequencedEntity {

    private String name;

    private Service service;

    //getter .. setter for service and name

      public String getServiceName() {
        return (this.service.getName());
      }

     public void setServiceName(String servicename) {
       this.service.setName(servicename);
     }

    } 
```

我通过 RulClass 对象获取服务名称时遇到异常

```
public String getServiceName() {
        return (this.service.getName());
      } 
```

堆栈跟踪

```
Caused by: com.ibm.db2.jcc.b.SqlException: "RULE0_.SERVICENAME" is not valid in the context where it is used.
    at com.ibm.db2.jcc.b.fg.e(fg.java:1596)
    at com.ibm.db2.jcc.b.fg.a(fg.java:1206)
    at com.ibm.db2.jcc.a.gb.g(gb.java:140)
    at com.ibm.db2.jcc.a.gb.a(gb.java:39)
    at com.ibm.db2.jcc.a.w.a(w.java:34)
    at com.ibm.db2.jcc.a.vb.g(vb.java:139) 
```

我们可以在实体类中使用这样的 getter 和 setter 吗？

我正在使用**休眠、弹簧、DB2、IBM WebSphere**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:31:16.617

`@Transient`如果您不想存储它，您应该按照提到的方式制作它

或者

为 getter 定义 @javax.persistence.Column(name = "service_id") 字段注释，让 hibernate 知道要使用哪个列。

或者

重命名 DB 以使服务字段“SERVICENAME”使用默认列名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:32:36.830

有`Transient`注释告诉 Hibernate 忽略一个字段。所以：

```
@Transient
private Service service; 
```

来自非常相似的 SO 问题：[Make hibernate ignore class variables that is not mapped](https://stackoverflow.com/questions/4662582/how-to-make-hibernate-ignore-class-variables-that-are-not-mapped)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T05:47:21.150

由于**serviceName**不是 Rule 类的成员，因此方法名称存在问题。名字不能像

```
getServiceName
setServiceName 
```

相反，它应该**不是** `get`或`set` `prefix`

```
fetchServiceName
addServiceName 
```

# haskell - Haskell，解析错误

> ID：14827286
> 
> 赞同：1
> 
> 时间：2013-02-12T07:09:47.150
> 
> 标签：haskell

每个人。我对 Haskell 相当陌生。

我收到了这个缩进错误，但我不知道我为什么会收到它。我通过评论指出了我从哪一行收到此错误。

如果您能帮我纠正我的“func”和“call”，我将不胜感激。

```
import Data.Maybe 

data Operator = Add | Sub | Mul | Div | And | Or | Not | Eq | Less | Great
  deriving (Eq, Show)
data Expression = Literal Val
            | Prim Operator [Expression]
            | Variable String
            | If Expression Expression Expression
            | Let [(String, Expression)] Expression
        | Func [String] Expression
        | Call Expression [Expression]
  deriving (Show, Eq)

data Val = Num Int
           | Bool Bool
       | Closure [String] Expression Environment
  deriving (Eq, Show)

type Environment = [(String, Val)]
--20
primitive :: Operator -> [Val] -> Val
primitive Add [Num a, Num b] = Num (a+b)
primitive Mul [Num a, Num b] = Num (a*b)
primitive Sub [Num a, Num b] = Num (a-b)
primitive Div [Num a, Num b] = Num (a `div` b)
primitive And [Bool a, Bool b] = Bool (a && b)
primitive Or [Bool a, Bool b] = Bool (a || b)
primitive Not [Bool a] = Bool (not a)
primitive Eq [a, b] = Bool (a == b)
primitive Less [Num a, Num b] = Bool (a < b)
primitive Great [Num a, Num b] = Bool (a > b)
--32
evaluate :: Environment -> Expression -> Val
evaluate e (Literal v)  = v
evaluate e (Prim op as) = primitive op (map (evaluate e) as)
evaluate e (Variable x) = fromJust (lookup x e)
evaluate e (If a b c)   = evaluate e (if fromBool (evaluate e a) then b else c)
evaluate e (Let bp b)   = evaluate ([(x, evaluate e d) | (x,d) <- bp ] ++ e) b

evaluate e (Func str ex) = str ex e
evaluate e (Call ex exl) = [[a, b, c ++ (map (evaluate e) exl)] | (a, b, c)<-(evaluate e ex)] --41
--42
fromBool (Bool b) = b

main = do
   let x = Variable "x"
       func1 = x*2 -- this is where I am getting a "parse error (possibly incorrect indentation)"
       func2 = x*5
    in print(evaluate [("r",Num 7)] (Call (If (Bool True) func1 func2) [Num 5])) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T08:22:17.340

您的代码有几个问题。首先，`let Int x`是错误的。的语法`let`是`let value = expression in expression`（或列表`value = expression`）。您的`Int x`语法不匹配。这使编译器感到困惑，使其报告缩进错误。

此外，您在最后一行使用了`fun1`and `fun2`，即使它们不在范围内。

# python - 如果我独立运行程序，Urllib2 运行良好，但是当我将它添加到 cronjob 时会抛出错误

> ID：14827296
> 
> 赞同：1
> 
> 时间：2013-02-12T07:10:30.280
> 
> 标签：python, urllib2, python-2.6

```
url = "www.someurl.com"

request = urllib2.Request(url,header={"User-agent" : "Mozilla/5.0"})

contentString = urllib2.url(request).read()

contentFile = StringIO.StringIO(contentString)

对于范围内的 i (0,2)：
    html = contentFile.readline()

打印html

```

上面的代码从命令行运行良好，但如果我将它添加到 cron 作业中，它会引发以下错误：

```
  _open 中的文件“/usr/lib64/python2.6/urllib2.py”，第 409 行
    '_open'，请求）
  _call_chain 中的文件“/usr/lib64/python2.6/urllib2.py”，第 369 行
    结果 = 函数（*args）
  http_open 中的文件“/usr/lib64/python2.6/urllib2.py”，第 1186 行
    返回 self.do_open(httplib.HTTPConnection, req)
  文件“/usr/lib64/python2.6/urllib2.py”，第 1161 行，在 do_open
    引发 URLError(err)
urllib2.URL错误：

```

我确实在其他论坛上查看了一些提示并尝试过，但它没有用。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:04:21.520

## crontab 和命令行使用的环境变量不同。

**我通过添加 */15 * * * * 来解决这个问题。$HOME/.profile; /路径/到/命令。**

这使得 crontab 能够获取为系统指定的环境变量。

# css - 如何摆脱这个滚动条？

> ID：14827301
> 
> 赞同：0
> 
> 时间：2013-02-12T07:11:05.403
> 
> 标签：css

从我这里的例子： [http](http://www.singaporeswimming.com.sg/button-problem) ://www.singaporeswimming.com.sg/button-problem 我想摆脱水平滚动条，但无法这样做。

我可以很容易地使用overflow-x:hidden，但我不想碰模态插件的css。我只想从源头更改元素。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:39:38.677

检查这个问题 -[删除 div 中的水平滚动条](https://stackoverflow.com/questions/4405954/remove-horizontal-scrollbar-in-div)答案与@Connor Miles 的答案相同另外注意 - 使用 CSS 的全部功能（通过在外部文件中添加样式来使用*级联*样式表。很难正确调试现在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T08:29:22.280

添加`overflow-x:hidde`n; 在灯箱中显示的注册页面的顶部，这样您就不会触摸灯箱

# visual-studio-2010 - 将 ADO.NET 的 Entity Framework 与 Visual Studio 2010 和 NuGet 结合使用 - 实际情况

> ID：14827302
> 
> 赞同：0
> 
> 时间：2013-02-12T07:11:07.477
> 
> 标签：visual-studio-2010, ado.net, nuget

我需要`ADO.NET EF`用于我的下一个项目，所以我开始了一个教程，但最终`Entity Framework`在我的项目打开时安装`Project -> Manage NuGet Packages`，然后决定使用另一个项目来完成教程，所以我关闭了当前的项目，第二天我创建了新`Console Project`的，以满足本教程的需要。但是，当我尝试添加时`using System.Data.Entity;`，`Program.cs`它无法识别，`Entity`所以我不得不再次安装`Entity Framework`，`NuGet`这对我来说似乎有点奇怪。

这应该是这样 -`Entity Framework`为每个将使用它的项目安装它，或者我可以安装它一次，然后在需要的地方添加它作为参考，或者像.NET中的许多其他包一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:33:30.873

不，您不需要为每个项目安装实体框架。您是否尝试添加对丢失 DLL 的引用？为此，请在解决方案资源管理器中右键单击您的项目，然后从菜单中选择添加引用。您应该能够从 .NET 选项卡中选择 System.Data.Entity： ![添加参考对话框](../Images/9f9a0588edbe3a8ad29ebdf9e35a109f.png)

# facebook - Facebook Live feeds display inside my website

> ID：14827303
> 
> 赞同：0
> 
> 时间：2013-02-12T07:11:07.580
> 
> 标签：facebook, facebook-graph-api, user-interface

Facebook live Feeds display inside my website as FBML is deprecated instead of using that, is there any simplify method to do same task in java script, display feeds and comments to that feeds. URL [http://developers.facebook.com/docs/reference/javascript/](http://developers.facebook.com/docs/reference/javascript/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:03:34.050

Fetching Current Logged in User's News Feed through JS:

```
FB.api('/me/home', function (response) { 
       console.log(response) 
}); 
```

Corresponding HTTP GET
`http://graph.facebook.com/me/home?access_token=UserAccessToken`

**EDIT** (Simple Example)

Assuming you have extended `permission read_stream`

```
<input type="button" value="test" onclick="GetFeeds()" />

function GetFeeds() {
FB.api('/me/home', function (response) { 
   for (var i = 0, l = response.data.length; i < l; i++) {
    var post = response.data[i];
    var name = post.from.name;
    var msg = post.message;
    alert("Posted By: " + name + " Message: " + msg);
});
} 
```

# bash - 用于在命令行开头添加注释字符 (#) 的 Bash 键盘快捷键

> ID：14827306
> 
> 赞同：2
> 
> 时间：2013-02-12T07:11:13.873
> 
> 标签：bash, keyboard, shortcut

当使用包括 iTerm 的 Mac OS X 时，我可以简单地按 `Shift`+`$`并且我当前提示的 bash 中的行将被`#`添加到开头并返回。我非常喜欢这个，因为它阻止了在编辑它的同时实际执行该命令，而且我不必跳到行首来插入那个`#`字符。但是，当我登录到我们的集群时，此功能将丢失。我尝试搜索此功能，但只找到有关使用 sed 等的帖子，因此建议不针对我所指的使用 bash 的交互式类型。

有人可以向我指出一个解释此功能的资源（bash-guide？），以便我可以查看如何在登录其他机器时使其工作？或者这是特定于 Mac/iTerm 的东西？但是，我希望它也能在我们的集群上工作，当然只要我使用我的机器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T11:22:16.317

[这可能对你有用](http://www.gnu.org/software/bash/manual/bashref.html#Miscellaneous-Commands)

看`insert-comment (M-#)`

# c# - 找不到类型或命名空间名称“Class1”（您是否缺少 using 指令或程序集引用？）

> ID：14827307
> 
> 赞同：2
> 
> 时间：2013-02-12T07:11:15.553
> 
> 标签：c#, asp.net

使用 VS2012 , asp/c#

*   创建了新网站空项目
*   创建了新的asp文件
*   创建了新的 c# 类文件，出现对话框说我需要在 App_Code 文件夹中有这个类，我说是的。

    ```
    Website
      Default.aspx
        Default.aspx.cs
    App_Code
      Class1.cs 
    ```

我的 default.aspx.cs 文件调用（创建实例）Class1.cs。当我将此网站放入远程服务器时，会发生以下错误。我的本地主机服务器网站即将出现。

编译器错误消息：CS0246：找不到类型或命名空间名称“Class1”（您是否缺少 using 指令或程序集引用？）

源错误：

```
Line 11: protected void Page_Load(object sender, EventArgs e)
Line 12:     { 
Line 13:         Class1 cls = new Class1(); 
Line 14:         cls.getValue(); 
Line 15:     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:12:33.233

尝试

Class1.Class1 cls = new Class1.Class1();

代替

Class1 cls = new Class1();

# blackberry-playbook - 在 BB10 虚拟机中安装 .bar 文件

> ID：14827308
> 
> 赞同：0
> 
> 时间：2013-02-12T07:11:26.400
> 
> 标签：blackberry-playbook, blackberry-10

大家好，我正在研究应用程序移植概念。将 Android 应用程序移植到 BB 10 并从 Android apk 成功生成 BAR（BB10 OS 中的可执行文件）文件。我正在使用在线重新打包工具进行转换。这是链接：- [https://bdsc.webapps.blackberry.com/android/bpaa/](https://bdsc.webapps.blackberry.com/android/bpaa/) 按照流程并从给定的 APK 获取 bar 文件。

现在我的问题是如何将这个 .bar 文件运行到 BB 10 虚拟机中。
我从链接中得到了答案。 [在 Blackberry Playbook Simulator 中打开一个 .bar 文件](https://stackoverflow.com/questions/6320657/open-a-bar-file-in-blackberry-playbook-simulator)

但无法正确实施。请让我知道如何在虚拟机中运行 .bar 文件格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:50:53.157

如果您尚未下载，则需要下载[适用于 Android 应用程序的命令行工具](http://developer.blackberry.com/android/tools/)。

如果您将命令行工具解压缩到已知位置，则该`blackberry-deploy`命令位于；

`<unzip location>\blackberry.tools.SDK\bin`（视窗）

或者

`<unzip location>/blackberry.tools.SDK/bin`（苹果电脑）

（命令本身包含在多个 SDK 中，但您目前似乎正在使用 Android）

# android - Android listview imageview 和 textview，如果图像为空，则 textview 向左

> ID：14827311
> 
> 赞同：2
> 
> 时间：2013-02-12T07:11:44.760
> 
> 标签：android, android-layout

如果该项目有图片，在我下面的代码中会很好。但如果它是空的，则项目图片看起来是 70dp 大小的空框。我想如果item不包含图片，那么空框会自动填充TextView，所以如果是空的那么图片就好像没有ImageView，只有TextView。我试图设置 ImageView 宽度大小 andoid:layout_width="wrap_content" 它与我想要的一样，但是图片的大小是凌乱的。有宽的和小的。因此我将其设置为 70 以使其看起来平坦。

这是我的代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:padding="6dip" >

    <ImageView
        android:id="@+id/logo_article"
        android:layout_width="70dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="6dip" />

    <TextView
        android:id="@+id/title_article"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignWithParentIfMissing="true"
        android:layout_centerVertical="true"
        android:layout_toRightOf="@id/logo_article"
        android:gravity="center_vertical"
        android:text="Title Article" />

</RelativeLayout> 
```

我从数据库中获取项目并将其存储到简单的适配器，java中的代码：

```
String[] from = { "title", "logo" };
int[] to = { R.id.title_article, R.id.logo_article };
SimpleAdapter adapter = new SimpleAdapter(getBaseContext(),listkatdb,R.layout.per_item_list, from, to);
kategoriListView.setAdapter(adapter);
adapter.notifyDataSetChanged(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:36:48.453

不要固定您的图像视图大小。将图像宽度更改为`wrap_content`. 如果图像有意味着显示图像的测试权。没有图像意味着图像宽度 0dip 文本自动出现在左侧。尝试这个

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="?android:attr/listPreferredItemHeight"
android:padding="6dip" >

<ImageView
    android:id="@+id/logo_article"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentTop="true"
    android:layout_marginRight="6dip" />

<TextView
    android:id="@+id/title_article"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignWithParentIfMissing="true"
    android:layout_centerVertical="true"
    android:layout_toRightOf="@id/logo_article"
    android:gravity="center_vertical"
    android:text="Title Article" />

    </RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:15:14.477

如果为空，则将 ImageView 的可见性设置为 GONE

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T07:16:14.613

`logo_article.setVisibility(View.GONE);`如果没有要显示的内容，请使用 。而已。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T07:16:29.497

如果没有图像，则需要将 ImageView 的 setVisibility 设置为 GONE，然后 TextView 将填充整个宽度。

```
if(isImageAvailable)
{
    iv.setVisibility(View.VISIBLE);
}
else
{
    iv.setVisibility(View.GONE);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T07:16:42.413

当您发现 ImageView 没有图像集可见性时，以编程方式 GONE

```
 ImageView img = (ImageView)findViewById(R.id.logo_article);
 // logic here to find image
 //if no img
 img.setVisibility(View.GONE); 
```

# java - 在列表中分配 ASCII 字符 AZ

> ID：14827322
> 
> 赞同：4
> 
> 时间：2013-02-12T07:12:50.677
> 
> 标签：java

我需要从 AZ 中获取 ASCII 字符并将其分配给字符串数组或列表并循环遍历它。关于如何获取 ASCII 字符并将其分配给除`String[] Asci= {"A","B","C","D","E","F".....etc)`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T07:33:44.180

```
List <String> ascii = new ArrayList <String> (26);

for (char c = 'A'; c <= 'Z'; c++)
    ascii.add (String.valueOf (c)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:20:00.147

在 Unicode（与 Java 字符串一起使用）中，从 A 到 Z 的字符构成一个连续序列，因此可以使用循环。然而，'A' 不是第一个 Unicode 字符。可以在不假设字符代码的情况下以通用方式执行此操作，并且只假设 A 到 Z 是一个序列，中间没有其他代码。

```
char values[] = new char['Z'-'A'];

int i = 0;
for (char c='A'; c<='Z'; c++)
  values[i++] = c; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T07:17:27.763

尝试这样的事情：

它将存储前 256 个 ascii 字符

```
for (int i=0; i<256; i++){
  char temp = i;
  values[i] = temp;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T07:20:02.330

```
public static void main(String[] args)
{
    String alpha[] = new String[26];
    for (char c = 65; c <= 90; c++)
    {
        alpha[c - 65] = String.valueOf(c);
    }

    for (String s : alpha)
    {
        System.out.println(s);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T07:21:32.203

看到这个……

```
public class Alphabet {
public Alphabet() {
for ( int i = 65; i < 91; i ++ ) {
System.out.println("Upper Case\n"+(char)i + " " + (char)(i+32));
}
}
public static void main(String [] args) {
new Alphabet();
}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-05T01:17:50.937

使用 Java 8 的流 -

```
List<String> alphas = IntStream.range((int) 'A', (int) 'Z').boxed()
            .map(i -> Character.toString ((char) i.intValue()))
            .collect(Collectors.toList()); 
```

# ruby-on-rails - OpenTok 对象的存根实例方法

> ID：14827328
> 
> 赞同：0
> 
> 时间：2013-02-12T07:13:19.227
> 
> 标签：ruby-on-rails, rspec, stub

我用来在 Rails 应用程序中集成 OpenTok 的 gem 位于：[https](https://github.com/opentok/Opentok-Ruby-SDK) ://github.com/opentok/Opentok-Ruby-SDK 。我将应用程序的核心基于此示例：[http](http://www.tokbox.com/blog/building-a-video-party-app-with-ruby-on-rails) ://www.tokbox.com/blog/building-a-video-party-app-with-ruby-on-rails 。

在代码的相关部分，我在 config_opentok 方法中创建了一个 @opentok 对象：

```
 def config_opentok
        if @api_key.nil? or @api_secret.nil?
            if Rails.env.development?
                @api_key = API_KEY
                @api_secret = API_SECRET
            else
                @api_key = ENV['API_KEY']
                @api_secret = ENV['API_SECRET']
            end
        end
        if @opentok.nil?
            @opentok = OpenTok::OpenTokSDK.new(@api_key, @api_secret)
        end
    end 
```

我正在使用以下代码创建一个会话：

```
 config_opentok

    if Rails.env.development?
        session = @opentok.create_session('localhost')
    else
        session = @opentok.create_session(request.remote_addr)
    end 
```

麻烦的是，create_session 似乎抛出了一个错误

```
SocketError: getaddrinfo: nodename nor servname provided, or not known 
```

每当我在没有互联网连接的情况下运行我的 Rspec 测试时。所以我想对该方法进行存根，以便它只返回一个哈希 {:sessionId => 1}。但我无法弄清楚如何存根该方法。我不能只存根 OpenTok 模块或 OpenTok::OpenTokSDK 类。我将如何对 create_session 方法进行存根？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:00:25.157

这是我一直在做的工作：

首先，我倾向于在应用加载时初始化 OpenTok 对象，因此我不会在每个请求上创建 OpenTok 对象。为此，我在我的 config/initializers 文件夹中创建了一个 ruby​​ 文件 (apis.rb)。

我的 apis.rb 看起来像这样：

```
TB_KEY = ENV['TB_KEY']
TB_SECRET = ENV['TB_SECRET']
OTSDK = OpenTok::OpenTokSDK.new TB_KEY, TB_SECRET 
```

在我的控制器中，要生成一个会话，我将简单地调用`OTSDK.createSession`，类似于您已经拥有的。

要使用 rspec 进行测试，您只需在测试文件中写入：

```
OTSDK.stub(:createSession).and_return( {:sessionId => "1MX_2A3453095J0TJ30..."} ) 
```

如果您在关闭 wifi 的情况下运行 rspec，则调用 createSession 不应再引发错误。

这是 rspec 存根的文档：[http ://rubydoc.info/gems/rspec-mocks/frames](http://rubydoc.info/gems/rspec-mocks/frames)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T21:25:08.177

> 问题是，每当我在没有互联网连接的情况下运行我的 Rspec 测试时，create_session 似乎都会引发错误。

与其尝试存根，不如给您的测试提供一个与[VCR](https://github.com/vcr/vcr)的模拟 Internet 连接？

初始设置后，VCR 可让您运行所有测试，就像您主动连接到 Internet 一样。这允许您离线运行测试，加速所有需要活动连接的测试，并为您提供一致的结果集。

如果你订阅了[RailsCasts ，Ryan 在](http://railscasts.com)[第 291 集中](http://railscasts.com/episodes/291-testing-with-vcr)制作了一个关于 VCR 的视频

# java - IDREF 属性可以只有本地 ID 值吗？

> ID：14827334
> 
> 赞同：1
> 
> 时间：2013-02-12T07:13:34.387
> 
> 标签：java, spring, import, xsd

我有这样的元素

```
<xsd:element name="Car" type="carType"/>

<xsd:complexType name="carType">
    <xsd:complexContent>
        <xsd:extension base="basicType">
            <xsd:attribute name="motor" type="xsd:IDREF" use="required"/>
        </xsd:extension>
    </xsd:complexContent>
</xsd:complexType> 
```

当当前文档中的电机元素时，它工作正常。

```
<Car id="car1" motor="motor1"/>
<Motor id="motor1"/> 
```

但是当我想`import`从另一个文件中移动元素时

```
<beans:bean:import resource="motors.conf.xml"/> 
```

Intellij Idea 说`Invalid id reference`，当我运行程序时出现异常

```
There is no ID/IDREF binding for IDREF 
```

可能是我做错了什么？或者可能是`xsd:IDREF`equals `ref local`，所以我不能将它与 import 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:36:05.257

我是对的，`xsd:IDREF`等于 ref local。

关于`xsd:IDREF` [MSDN 创建有效 ID、IDREF...](http://msdn.microsoft.com/en-us/library/aa258661%28v=sql.80%29.aspx)

你可以看到为什么它在这里等于 -

```
<xsd:element name="ref">
        <xsd:annotation>
            <xsd:documentation><![CDATA[
    Defines a reference to another bean in this factory or an external
    factory (parent or included factory).
            ]]></xsd:documentation>
        </xsd:annotation>
        <xsd:complexType>
            <xsd:complexContent>
                <xsd:restriction base="xsd:anyType">
                    <xsd:attribute name="bean" type="xsd:string">
                        <xsd:annotation>
                            <xsd:documentation><![CDATA[
    The name of the referenced bean.
                            ]]></xsd:documentation>
                        </xsd:annotation>
                    </xsd:attribute>
                    **<xsd:attribute name="local" type="xsd:IDREF">**
                        <xsd:annotation>
                            <xsd:documentation><![CDATA[
    The name of the referenced bean. The value must be a bean ID and thus can 
    be checked by the XML parser. This is therefore the preferred technique 
    for referencing beans within the same bean factory XML file.
                            ]]></xsd:documentation>
                        </xsd:annotation>
                    </xsd:attribute>
                    <xsd:attribute name="parent" type="xsd:string">
                        <xsd:annotation>
                            <xsd:documentation><![CDATA[
    The name of the referenced bean in a parent factory.
                        ]]></xsd:documentation>
                        </xsd:annotation>
                    </xsd:attribute>
                </xsd:restriction>
            </xsd:complexContent>
        </xsd:complexType>
    </xsd:element> 
```

它是 element bean element 的描述`ref`。正如我们所知，我们只能使用`<ref local>`当前 XML 文档中的元素。

# codeigniter - 找不到 codeigniter 的 mod_rewrite

> ID：14827335
> 
> 赞同：-1
> 
> 时间：2013-02-12T07:13:38.097
> 
> 标签：codeigniter, mod-rewrite, codeigniter-2

我在 codeigniter wiki 中找不到 mod_rewrite 了吗？它去哪儿了？我试着查看这个[链接](https://github.com/EllisLab/CodeIgniter/wiki/_pages)，但它不再在这里了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:48:29.697

mod_rewrite 是 apache web 服务器的一部分，它不是 codeigniter 的一部分，这个扩展用于编写 SEO 友好的 url

看看这个链接，这将帮助您编写搜索引擎友好的网址

[SEO友好的网址](http://ellislab.com/codeigniter/user-guide/general/urls.html)

检查 mod_rewrite 是否已加载或不只是放入空的 php 文件 phpinfo() 在浏览器中调用该文件并搜索 mod_rewrite 以启用它 在您的 apache Web 服务器 conf 目录中搜索 apache httpd.conf 如果它被注释为 # 只需删除它并在再次加载服务器调用 phpinofo 并搜索 mod_rewrite 后重新启动您的 Web 服务器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T08:31:38.590

你`.htaccess`应该看起来像这样：

```
<IfModule mod_rewrite.c>
RewriteEngine On
#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ index.php?/$1 [L]

#When your application folder isn't in the system folder
#This snippet prevents user access to the application folder
#Submitted by: Fabdrol
#Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?$1 [L]
</IfModule>
<IfModule !mod_rewrite.c>
 ErrorDocument 404 index.php
</IfModule> 
```

# iphone - 使用具有可编辑功能的实体数组在核心数据中添加记录

> ID：14827337
> 
> 赞同：0
> 
> 时间：2013-02-12T07:13:38.910
> 
> 标签：iphone, core-data, entity-relationship

请看看我面临的问题。

我有一项活动要执行以下功能。

`CoreData`我喜欢添加员工记录。具有以下属性的记录：

1.  员工姓名( `NSString`)
2.  雇员编号( `NSString`)
3.  电话号码（数组类型）
4.  出勤（数组类型）。

在我保存这些记录之后，如果我想编辑电话号码 ao 出席情况，我可以这样做并保存回 CoreData。

请帮帮我。这样做的好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:57:54.533

如果我理解你的问题是正确的，那么你没有对项目中的核心数据做任何事情吗？我真的认为学习如何使用核心数据的最佳方法是阅读并遵循在谷歌上找到的众多优秀教程之一。

遵循本教程[http://timroadley.com/2012/02/09/core-data-basics-part-1-storyboards-delegation/](http://timroadley.com/2012/02/09/core-data-basics-part-1-storyboards-delegation/)之类的内容，我相信您将能够开始您的项目。

# iphone - 捕获卡在 DrawRect 方法中的 UIView 的 UIImage

> ID：14827338
> 
> 赞同：0
> 
> 时间：2013-02-12T07:13:43.387
> 
> 标签：iphone, ios, uiview, uiimage, drawrect

我正在尝试捕获我的 UIView 的图像，但是当我调用此方法时

```
- (UIImage *) imageWithView:(UIView *)view
{
    UIGraphicsBeginImageContext(view.bounds.size);
    [view.layer renderInContext:UIGraphicsGetCurrentContext()];

    UIImage * img = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return img;
} 
```

我的应用程序进入我的视图的 DrawRect 方法并卡在这些行的循环中

```
[super drawRect:rect];
[curImage drawAtPoint:CGPointMake(0, 0)];
mid1 = midPoint(previousPoint1, previousPoint2);
mid2 = midPoint(currentPoint, previousPoint1);

context = UIGraphicsGetCurrentContext();

[self.layer renderInContext:context]; 
```

这是我的`drawRect`方法

```
- (void)drawRect:(CGRect)rect
{

    [super drawRect:rect];
    [curImage drawAtPoint:CGPointMake(0, 0)];
    mid1 = midPoint(previousPoint1, previousPoint2);
    mid2 = midPoint(currentPoint, previousPoint1);

    context = UIGraphicsGetCurrentContext();

    [self.layer renderInContext:context];

    CGContextMoveToPoint(context, mid1.x, mid1.y);
    CGContextAddQuadCurveToPoint(context, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y);

    CGContextSetLineCap(context, kCGLineCapRound);
    CGContextSetLineWidth(context, self.lineWidth);
    CGContextSetStrokeColorWithColor(context, self.lineColor.CGColor);

    CGContextStrokePath(context);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T07:32:29.077

要捕获 UIView 图像，只需运行这些行并检查：

```
 CGRect screenRect = [[UIScreen mainScreen] bounds];
    UIGraphicsBeginImageContextWithOptions(screenRect.size, NO, 0.0);
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:45:09.800

您还将图像保存在 docement 目录中并捕获 UIView 图像

```
 UIGraphicsBeginImageContext(self.view.bounds.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *saveImage = UIGraphicsGetImageFromCurrentImageContext();
//inserttrue=TRUE;
UIGraphicsEndImageContext();
imagdata = UIImagePNGRepresentation(saveImage);
NSFileManager *fileMan = [NSFileManager defaultManager];
[self.view setContentStretch:CGRectMake(0, 0, 320, 480)];
NSString *fileName = [NSString stringWithFormat:@"%@.png",@"XYZ"];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *pdfFileName = [documentsDirectory stringByAppendingPathComponent:fileName];

[fileMan createFileAtPath:pdfFileName contents:imagdata attributes:nil]; 
```

# c# - 强制 .NET 编写本机波斯数字而不是美国格式

> ID：14827345
> 
> 赞同：5
> 
> 时间：2013-02-12T07:14:12.813
> 
> 标签：c#, asp.net, .net, vb.net, cultureinfo

我试图设置 ASP.NET 应用程序的 Culture 和 UICulture 没有成功。还在 C# Windows 应用程序中尝试过。

```
System.Globalization.CultureInfo a = new System.Globalization.CultureInfo("fa-IR");
a.NumberFormat.DigitSubstitution = System.Globalization.DigitShapes.NativeNational;
string Q = string.Format(a, "{0}", 1234567890); // Output 1234567890 instead of ٠١٢٣٤٥٦٧٨٩ 
```

代码中有没有我遗漏的部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T07:41:34.247

C#/ .Net 框架不支持输出 0-9 以外的数字（也不支持解析）。

您需要自己输出数字。您应该能够首先使用内置代码格式化数字（以获得正确的分组/小数分隔符/货币），然后使用国家数字替换 0-9`String.Replace`或将数字映射到您需要的字符并使用`String.Join`.

```
 var converted = String.Join("", 123490.ToString().Select(c => "٠١٢٣٤٥٦٧٨٩"[c-'0'])); 
```

# php - magento 没有发送联系我们的电子邮件，没有显示错误

> ID：14827347
> 
> 赞同：0
> 
> 时间：2013-02-12T07:14:16.850
> 
> 标签：php, email, magento, contact-form

我第一次使用magento。我只是将网站中的联系我们表格放入我的页脚块中。表单正在提交，但没有显示错误。我没有收到来自该表格的任何电子邮件。

我已经进行了必要的设置

启用联系我们：是

发送电子邮件至：myemail。

但仍然没有运气..请指导我找到解决方案以及哪里出了问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:15:30.333

你在 localhost 上工作吗？如果是，你需要一个 SMTP 服务器来监听 25 号端口才能发送电子邮件。

# c# - 在文本文件中搜索字符串的更快方法

> ID：14827350
> 
> 赞同：15
> 
> 时间：2013-02-12T07:14:54.417
> 
> 标签：c#, string, search, full-text-search

我需要使用 C# 在一组文本文件中搜索大约 13 个字符的字符串。文本文件的数量在变化，范围在 100-1000 之间。文件的大小可以在 1KB 到 10MB 之间。

我尝试了打开每个文件的幼稚方式，逐行读取并查看字符串是否存在（使用index.of），但这太慢了。我还尝试使用 Boyer-Moore 算法，该算法确实将时间缩短了 5 秒，但这仍然感觉很慢。

关于如何加快搜索速度的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T07:57:41.353

根据您要进行“搜索”的次数，您是否要使用搜索引擎。如果您想搜索很多次，请使用搜索引擎，否则：不要。我将在这里描述如何实现这两种场景。

使用搜索引擎时：听起来您正在寻找子字符串，这意味着您应该使用您最喜欢的搜索引擎来索引您的文件，最好是您可以自定义的搜索引擎（lucene、terrier 等）。您在这里需要的技术是索引三元组，即：所有 3 字符组合都必须被索引。F.ex.: 'foobar' 将生成 'foo','oob','oba' 和 'bar'。搜索时，您希望对查询执行相同操作，并使用所有这些三元组的 AND 发出搜索引擎查询。（这将在文档的发布列表上运行合并连接，这将返回他们的 ID 或您在发布列表中放置的任何内容）。

或者，您可以实现后缀数组并索引您的文件一次。如果您想搜索短（1-2 个字符）子字符串，这将提供更多的灵活性，但就索引而言更难维护。（在 CWI/Amsterdam 有一些关于快速索引后缀数组的研究）

当您只想搜索几次时，要使用的算法是 Boyer-Moore（我通常使用 Boyer-moore-sunday，如 [Graham A. Stephen，String Search] 中所述）或编译后的 DFA（您可以构造它们）来自 NFA，更容易制作）。然而，这只会给你带来一点速度提升，原因很简单，磁盘 IO 可能是你的瓶颈，并且比较你需要解码的一堆字节非常快。

您可以做出的最大改进不是逐行读取文件，而是分块读取。如果可以的话，您应该将 NTFS 配置为使用 64 KB 的块大小，并以 64 KB 的倍数读取文件 - 考虑一次读取 4 MB 或更多。我什至建议使用异步 IO，以便您可以同时读取和处理（以前读取的数据）。如果你做得正确，那应该已经在大多数现代硬件上为你提供了 10 MB 的瞬间实现。

最后但同样重要的是，在整个信息检索中使用的一个巧妙技巧也是使用快速压缩算法压缩数据。由于磁盘 IO 比内存/cpu 操作慢，这可能也会有所帮助。Google 的 Snappy 压缩器是快速压缩算法的一个很好的例子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T07:17:51.160

您应该考虑对内容使用操作系统文件搜索。查看[Microsoft Windows Search 3.x SDK](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=7388)

或者您可以利用 PLINQ 在文件数组中进行搜索。请参阅此链接：

[使用 Directory.GetFiles 和 PLINQ 进行文件内容和目录搜索](http://blog.csharplearners.com/2012/01/19/file-content-directory-search-directory-getfiles-plinq/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T07:26:22.233

想到两个选择：

读取内存中的文本文件，然后一次搜索整个字符串。

如果这被证明太慢或太占用内存，请使用像 Apache Lucene 这样的索引器。有一个可用于 .NET 的好用且简单的 SDK，称为 Lucene.net

这里对其做一个小介绍：http: [//www.codeproject.com/Articles/29755/Introducing-Lucene-Net](http://www.codeproject.com/Articles/29755/Introducing-Lucene-Net)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T09:00:11.010

您可以使用 Microsoft 的索引服务来搜索要添加到目录中的文件夹中的文档。[这](http://www.codeproject.com/Articles/19540/Microsoft-Indexing-Service-How-To)是一篇非常好的文章，您可以使用它来搜索您的文本文件

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-12T07:29:41.887

如果您的计算机可以处理它，请尝试将所有文​​本文件加载到内存中（使用[此处显示的技术](https://stackoverflow.com/a/3987255/51)，然后评估内存中的文本。

如果您不能一次处理所有文件，那么对最小的文件执行此操作。文件 I/O 将是您最大的开销，因此您希望尽可能地减少它。

# javascript - 尝试保持输入参数不变

> ID：14827355
> 
> 赞同：0
> 
> 时间：2013-02-12T07:15:13.550
> 
> 标签：javascript, scope

我正在尝试编写一个对数组执行操作并返回数组的**不同**副本并使原始副本保持不变的函数。我想我可以通过声明`var array2 = array`然后进行数组操作来做到这一点。我究竟做错了什么？

这是我的示例函数：

```
var partition = function(array, p){
    var pivot = array[p];
    var length = array.length;
    // make a copy and move pivot to the front
    var array2 = array;
    array2[p] = array2[0];
    array2[0] = pivot;
    // partition the array
    var i = 1;
    for (var j = 1; j < length; j++){
        //console.log('i='+i+', j='+j)
        if (array2[j] < pivot) {
            var temp = array2[j];
            array2[j] = array2[i];
            array2[i] = temp;
            i++;
        }
    }
    //console.log('array after partitioning: ' + array)
    // swap pivot
    array2[0] = array2[i-1];
    array2[i-1] = pivot;
    var answer = {array: array2, p: i-1}
    return answer;
}; 
```

我的示例电话：

```
var a = [3, 2, 1];
partition(a, 0);
console.log(a); // prints [1,2,3] but I want [3,2,1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:19:27.217

`var array2 = array.slice(0)`或者只是`array.slice()`克隆你的阵列

[在这里](http://www.w3schools.com/jsref/jsref_slice_array.asp)你有参考

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:21:26.653

添加这一行，而不是`array2=array`因为它只创建`array`对新数组2 的引用。

```
 var array2 =array.slice(0); //it will create a new array not the reference. 
```

小提琴[http://jsfiddle.net/N64w3/](http://jsfiddle.net/N64w3/)

# c# - 如何在gridview的右侧移动自动生成删除按钮

> ID：14827357
> 
> 赞同：3
> 
> 时间：2013-02-12T07:15:14.563
> 
> 标签：c#, asp.net, gridview

我有一个具有以下列的gridview

```
Delete | Name | ContactNo | EmailID | CreateDate | 
```

删除列是自动生成的，我想将它移动到右侧

```
 | Name | ContactNo | EmailID | CreateDate | Delete 
```

我怎样才能做到这一点？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T07:19:54.953

**AutoGenerateDeleteButton**在设计时将不可见，因为 VS 会在运行时自动添加它，据我所知，这将自动添加到网格的最左侧，基本上这是默认设置。

您可以尝试在设计视图中添加以下命令字段。

```
<asp:CommandField ShowDeleteButton="True" /> 
```

否则，您必须创建一个按钮模板列以进行删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T07:25:04.713

1.  首先，您不能使用自动生成的删除按钮执行此操作，因此您必须设置`AutoGenerateDeleteButton="false"`
2.  为删除按钮创建一个`CommandField`并将其放在所有其他列下方，这将使其显示在右侧：

**ASPX：**

```
<asp:GridView ID="gvEmployees" runat="server" AutoGenerateDeleteButton="false" AutoGenerateColumns="false">
    <Columns>
        <asp:BoundField DataField="Id" />
        <asp:BoundField DataField="Name" />
        <asp:CommandField DeleteText="Delete" ShowDeleteButton="true" />
    </Columns>
</asp:GridView> 
```

**后面的代码：**

```
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            var employees = new List<Employee>{new Employee{Id="1",Name="Employee 1"}};
            gvEmployees.DataSource = employees;
            gvEmployees.DataBind();
        }
    }
}

public class Employee
{
    public string Id { get; set; }
    public string Name { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-18T07:16:04.257

```
create a RowCreated Event on your grid... easy as that (this will swap the row to end,, no need to turn off auto generate... 100% worked for me)

 protected void GridView1_RowCreated(object sender, GridViewRowEventArgs e)
        {
            GridViewRow row = e.Row;
            // Intitialize TableCell list
            List<TableCell> columns = new List<TableCell>();
            foreach (DataControlField column in GridView1.Columns)
            {
                //Get the first Cell /Column
                TableCell cell = row.Cells[0];
                // Then Remove it after
                row.Cells.Remove(cell);
                //And Add it to the List Collections
                columns.Add(cell);
            }
            // Add cells
            row.Cells.AddRange(columns.ToArray());
        } 
```

# javascript - 如何找到与 javascript 相关的实际链接

> ID：14827363
> 
> 赞同：1
> 
> 时间：2013-02-12T07:15:53.400
> 
> 标签：javascript, hyperlink

我是一名学习生物信息学的学生。

我正在尝试制作一个爬虫，我可以在其中放置查询列表并自动获取结果。

我感兴趣的站点是 GEO DataSet 站点。

www.ncbi.nlm.nih.gov/gds/

如果我想发送“肺癌”之类的查询，我可以使用以下地址。

[http://www.ncbi.nlm.nih.gov/gds/?term=lung+cancer](http://www.ncbi.nlm.nih.gov/gds/?term=lung+cancer)。

并且显示了 549 页。

我可以得到第一页的结果，但我不知道如何移动到下一页。

我的意思是，如何通过更改 URL 移动到下一页？

下一步按钮链接为“www.ncbi.nlm.nih.gov/gds/?term=lung+cancer#”，我认为这不是该按钮链接到的实际 URL。

我是 JavaScript 新手，但我听说井号 (#) 是在 JavaScript 中处理的

我想知道是否有什么我可以做的，比如“ [http://www.ncbi.nlm.nih.gov/gds/?term=lung+cancer&page=2](http://www.ncbi.nlm.nih.gov/gds/?term=lung+cancer&page=2) ”，这样我就可以转到第二页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:09:20.953

如果您使用任何调试器工具（Firefox 的 Firebug，Chrome 的 WebDeveloper），您应该能够监控网络流量。如果你这样做，你会看到，通过点击下一步按钮，一个表单被提交，通过 post 方法发送数据。但是，将发布数据连接到获取字符串时，您也可以进入下一页。以下 url 允许您访问结果集的第二页（警告：真的，真的很长！）：

```
http://www.ncbi.nlm.nih.gov/gds/?term=lung+cancer?term=lung+cancer&EntrezSystem2.PEntrez.Gds.Entrez_PageController.PreviousPageName=results&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_DisplayBar.sPresentation=docsum&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_DisplayBar.sPageSize=20&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_DisplayBar.sSort=none&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_DisplayBar.FFormat=docsum&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_DisplayBar.FSort=&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_DisplayBar.FileFormat=docsum&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_DisplayBar.LastPresentation=docsum&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_DisplayBar.Presentation=docsum&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_DisplayBar.PageSize=20&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_DisplayBar.LastPageSize=20&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_DisplayBar.Sort=&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_DisplayBar.LastSort=&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_DisplayBar.FileSort=&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_DisplayBar.Format=&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_DisplayBar.LastFormat=&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Entrez_Pager.cPage=1&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Entrez_Pager.CurrPage=2&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_ResultsController.ResultCount=10973&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_ResultsController.RunLastQuery=&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Entrez_Pager.cPage=1&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_DisplayBar.sPresentation2=docsum&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_DisplayBar.sPageSize2=20&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_DisplayBar.sSort2=none&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_DisplayBar.FFormat2=docsum&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_DisplayBar.FSort2=&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Entrez_Filters.CurrFilter=all&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Entrez_Filters.LastFilter=all&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_MultiItemSupl.Taxport.TxView=list&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_MultiItemSupl.Taxport.TxListSize=5&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_MultiItemSupl.RelatedDataLinks.rdDatabase=rddbto&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Gds_MultiItemSupl.RelatedDataLinks.DbName=gds&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Discovery_SearchDetails.SearchDetailsTerm=%22lung+neoplasms%22%5BMeSH+Terms%5D+OR+lung+cancer%5BAll+Fields%5D&EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.HistoryDisplay.Cmd=PageChanged&EntrezSystem2.PEntrez.DbConnector.Db=gds&EntrezSystem2.PEntrez.DbConnector.LastDb=gds&EntrezSystem2.PEntrez.DbConnector.Term=lung+cancer&EntrezSystem2.PEntrez.DbConnector.LastTabCmd=&EntrezSystem2.PEntrez.DbConnector.LastQueryKey=1&EntrezSystem2.PEntrez.DbConnector.IdsFromResult=&EntrezSystem2.PEntrez.DbConnector.LastIdsFromResult=&EntrezSystem2.PEntrez.DbConnector.LinkName=&EntrezSystem2.PEntrez.DbConnector.LinkReadableName=&EntrezSystem2.PEntrez.DbConnector.LinkSrcDb=&EntrezSystem2.PEntrez.DbConnector.Cmd=PageChanged&EntrezSystem2.PEntrez.DbConnector.TabCmd=&EntrezSystem2.PEntrez.DbConnector.QueryKey=&p%24a=EntrezSystem2.PEntrez.Gds.Gds_ResultsPanel.Entrez_Pager.Page&p%24l=EntrezSystem2&p%24st=gds 
```

这个完整的 GET 字符串包含所有搜索参数，例如每页项目、搜索词、显示等等。您应该能够弄清楚偏移使用哪个参数（cPage 和 CurrPage 是您的朋友），然后根据您的需要进行更改。

编辑：顺便说一句，要查找绑定到 HTML 元素的 javascript 事件，您可以使用位于[http://www.sprymedia.co.uk/article/Visual+Event+2的书签](http://www.sprymedia.co.uk/article/Visual+Event+2)

# ios - 如何以编程方式获取 iOS 设备 MAC 地址

> ID：14827365
> 
> 赞同：17
> 
> 时间：2013-02-12T07:15:58.763
> 
> 标签：ios, mac-address

如何在我的应用程序中以编程方式获取 iOS 设备的 MAC 代码？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-09-20T07:52:03.517

现在 iOS 7 设备 - 总是**返回 02:00:00:00:00:00 的 MAC 地址。**

所以更好用`[UIDevice identifierForVendor]`

所以最好调用这个**方法**来获取**应用程序特定的唯一键**

类别会更合适

```
#import "UIDevice+Identifier.h"

- (NSString *) identifierForVendor1
{
    if ([[UIDevice currentDevice] respondsToSelector:@selector(identifierForVendor)]) {
        return [[[UIDevice currentDevice] identifierForVendor] UUIDString];
    }
    return @"";
} 
```

**现在调用上面的方法来获取唯一的地址**

```
NSString *like_UDID=[NSString stringWithFormat:@"%@",
                [[UIDevice currentDevice] identifierForVendor1]];

NSLog(@"%@",like_UDID); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-06-24T06:46:21.717

您可以使用以下函数获取 MAC 地址：

```
+(NSString *)getMacAddress
{
    int                 mgmtInfoBase[6];
    char                *msgBuffer = NULL;
    NSString            *errorFlag = NULL;
    size_t              length;

    // Setup the management Information Base (mib)
    mgmtInfoBase[0] = CTL_NET;        // Request network subsystem
    mgmtInfoBase[1] = AF_ROUTE;       // Routing table info
    mgmtInfoBase[2] = 0;              
    mgmtInfoBase[3] = AF_LINK;        // Request link layer information
    mgmtInfoBase[4] = NET_RT_IFLIST;  // Request all configured interfaces

    // With all configured interfaces requested, get handle index
    if ((mgmtInfoBase[5] = if_nametoindex("en0")) == 0) 
        errorFlag = @"if_nametoindex failure";
    // Get the size of the data available (store in len)
    else if (sysctl(mgmtInfoBase, 6, NULL, &length, NULL, 0) < 0) 
        errorFlag = @"sysctl mgmtInfoBase failure";
    // Alloc memory based on above call
    else if ((msgBuffer = malloc(length)) == NULL)
        errorFlag = @"buffer allocation failure";
    // Get system information, store in buffer
    else if (sysctl(mgmtInfoBase, 6, msgBuffer, &length, NULL, 0) < 0)
    {
        free(msgBuffer);
        errorFlag = @"sysctl msgBuffer failure";
    }
    else
    {
        // Map msgbuffer to interface message structure
        struct if_msghdr *interfaceMsgStruct = (struct if_msghdr *) msgBuffer;

        // Map to link-level socket structure
        struct sockaddr_dl *socketStruct = (struct sockaddr_dl *) (interfaceMsgStruct + 1);

        // Copy link layer address data in socket structure to an array
        unsigned char macAddress[6];
        memcpy(&macAddress, socketStruct->sdl_data + socketStruct->sdl_nlen, 6);

        // Read from char array into a string object, into traditional Mac address format
        NSString *macAddressString = [NSString stringWithFormat:@"%02X:%02X:%02X:%02X:%02X:%02X",
                                      macAddress[0], macAddress[1], macAddress[2], macAddress[3], macAddress[4], macAddress[5]];
        if(IsDEBUG) NSLog(@"Mac Address: %@", macAddressString);

        // Release the buffer memory
        free(msgBuffer);

        return macAddressString;
    }

    // Error...
    if(IsDEBUG) NSLog(@"Error: %@", errorFlag);

    return errorFlag;
} 
```

但正如他所说#Randomclik，mac地址在ios 7及更高版本中不可用。

形成苹果：

在 iOS 7 及更高版本中，如果您询问 iOS 设备的 MAC 地址，系统将返回值 02:00:00:00:00:00。如果需要识别设备，请改用 UIDevice 的 identifierForVendor 属性。（需要标识符用于自己的广告目的的应用程序应考虑改用 ASIdentifierManager 的 adsIdentifier 属性。）

链接： [https ://developer.apple.com/library/prerelease/ios/releasenotes/General/WhatsNewIniOS/Articles/iOS7.html#//apple_ref/doc/uid/TP40013162-SW1](https://developer.apple.com/library/prerelease/ios/releasenotes/General/WhatsNewIniOS/Articles/iOS7.html#//apple_ref/doc/uid/TP40013162-SW1)

关于MAC地址的对话：

[如何以编程方式获取 iphone 的 MAC 地址](https://stackoverflow.com/questions/677530/how-can-i-programmatically-get-the-mac-address-of-an-iphone)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-12T06:24:23.833

似乎在 iOS 7 及更高版本中获取 MAC 地址将不起作用。查看来自 Apple 的 iOS 文档的新增功能。（已弃用的 API 部分。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-31T11:57:44.183

建议大家使用官方的 ios 7 方式并使用 [UIDevice identifierForVendor]

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html)

还要考虑一些旧假设的迁移。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-22T07:38:56.173

我猜你可以通过结合以下两个答案来得到它。

首先，使用以下命令找到设备的 ip：

[https://stackoverflow.com/a/30754194/1089206](https://stackoverflow.com/a/30754194/1089206)

其次，使用以下命令找到该地址的 MAC：

[https://stackoverflow.com/a/31246085/1089206](https://stackoverflow.com/a/31246085/1089206)

我现在就试一试，然后告诉你进展如何。

# django - Django 1.4.3 继续使用虚拟数据库引擎设置值

> ID：14827369
> 
> 赞同：2
> 
> 时间：2013-02-12T07:16:22.340
> 
> 标签：django

我不明白为什么 Django 不使用我在 settings.py 文件中指定的数据库引擎，而是使用 value `django.db.backends.dummy`。

这是位于 /project/app/settings.py的**settings.py**文件的 DB 部分：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'my_db_name',
        'USER': 'my_user',
        'PASSWORD': 'my_pass',
        'HOST': '',
        'PORT': '',
    }
} 
```

这是 Django**调试日志**显示的内容：

```
DATABASES   
{'default': {'ENGINE': 'django.db.backends.dummy',
             'HOST': '',
             'NAME': 'my_db_name',
             'OPTIONS': {},
             'PASSWORD': u'********************',
             'PORT': '',
             'TEST_CHARSET': None,
             'TEST_COLLATION': None,
             'TEST_MIRROR': None,
             'TEST_NAME': None,
             'TIME_ZONE': 'UTC',
             'USER': 'my_user'}} 
```

我正在使用 gunicorn 和 nginx 在生产环境中运行这个站点。该站点当前已将调试模式设置为 True。

**更新 1：**当我运行时，`python manage.py diffsettings`我得到以下信息（引擎是正确的）：

`DATABASES = {'default': {'ENGINE': 'django.db.backends.mysql', 'TEST_MIRROR': None, 'NAME': 'my_db_name', 'TEST_CHARSET': None, 'TIME_ZONE': 'UTC', 'TEST_COLLATION': None, 'OPTIONS': {}, 'HOST': '', 'USER': 'my_user', 'TEST_NAME': None, 'PASSWORD': 'my_pass', 'PORT': ''}}`

**更新 2：**我也在 shell 中尝试过，按预期工作，我可以访问我的数据库：

```
# python manage.py shell

>>> from myapp.models import MyModel
>>> test = MyModel.objects.all()
>>> test
# Outputs all objects from MyModel. 
```

**更新3：**发生了一些奇怪的事情。为了调试这个问题，我在 settings.py 中注释掉了所有`INSTALLED APPS`内容，重新启动了 nginx，但 Django 仍然在调试日志中显示它们：

```
INSTALLED_APPS  

('django.contrib.auth',
 'django.contrib.humanize',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'grappelli',
 'django.contrib.admin',
 'foureggs',
 'registration',
 'massadmin') 
```

**看起来 Django 正在使用我的 settings.py**文件的某种缓存版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:03:23.257

这最终解决了我的问题。我不确定真正的原因是什么，但看起来它与运行 supervisord 有关。

我在我的域下定义了 2 个虚拟环境（即 /home/mydomain/www/env1 和 /home/mydomain/www/env2）。我在原始问题中描述的问题与 env2.

我首先认为是 env1 导致了问题，并且不知何故使用了它的 settings.py 而不是来自 env2 的 settings.py。但是 env1 中的 settings.py 看起来完全不同，所以这可能不是问题。

无论如何，这是我采取的步骤，它可能会为其他遇到相同问题的人提供一些指示：

1.  我删除了 env1 (/home/mydomain/www/env1) <--这可能与问题无关，但我还是删除了环境，因为我不需要它

2.  我杀死了这些进程：supervisord、nginx、gunicorn_django（即`pkill supervisord`）

3.  我启动了 supervisord（它运行 bash 脚本来启动 gunicorn_django 进程）和 nginx

网站现在按预期工作。

# android - 获取java.lang.RuntimeException：在android中使用kso ap2将字节数组列表传递给Web服务时无法序列化

> ID：14827370
> 
> 赞同：1
> 
> 时间：2013-02-12T07:16:23.227
> 
> 标签：android, ksoap2, android-ksoap2

我有大小约为 5 mb 的 db 文件，我已转换为字节数组列表，并希望将其传递给我的 Web 服务以保存在服务器上，但我得到无法序列化错误。我在下面附上我的代码......

```
 SoapObject soap_request = new SoapObject(NAMESPACE, METHOD_NAME1);
            fileName = "DB"+UserID+"_"+backupDateTime+".db";

            PropertyInfo pi1 = new PropertyInfo();
            pi1.setName("_FileName");
            pi1.setType(String.class);
            pi1.setValue(fileName);
            soap_request.addProperty(pi1);

            PropertyInfo pi2 = new PropertyInfo();
            pi2.setName("_ByteArray");
            pi2.setType(ArrayList.class);
            pi2.setValue(data);
            soap_request.addProperty(pi2);

            PropertyInfo pi3 = new PropertyInfo();
            pi3.setName("UserID");
            pi3.setType(Integer.class);
            pi3.setValue(UserID);
            soap_request.addProperty(pi3);

            Log.v(TAG, "soap_request _FileName= >>"+soap_request.getProperty(0));
            Log.v(TAG, "soap_request _ByteArray= >>"+soap_request.getProperty(1));
            Log.v(TAG, "soap_request UserID= >>"+soap_request.getProperty(2));

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            //new MarshalBase64().register(envelope);
            envelope.setOutputSoapObject(soap_request);
            envelope.dotNet = true;

            Log.v(TAG,"Calling webservice....");
            androidHttpTransportSE = new HttpTransportSE(URL);
            androidHttpTransportSE.debug = true;
            androidHttpTransportSE.call(SOAP_ACTION1, envelope);

            Log.v(TAG,"Getting result from webservice....");
            SoapObject result = (SoapObject) envelope.bodyIn;
            JSONObject response = new JSONObject(result.getProperty(0).toString());
            Log.v(TAG, "Web Response...." + response.get(" Result "));

            if (response.get(" Result ").equals("Uploading DataBase Backup To Server successfully"))
            {
                flag = true;
                Log.v(TAG, "Database is uploaded .........");
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:36:28.920

尝试改变这个

```
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
//new MarshalBase64().register(envelope); 
```

至

```
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
new MarshalBase64().register(envelope); // this line is for serialization 
```

我猜你也会从这个[链接](https://stackoverflow.com/questions/12389105/runtimeexceptioncannot-serialize-error-to-send-byte-array-from-android-to-java)中更好地了解你的问题。

希望它会帮助你。

# iphone - 由于异常 0xdeadfeed 导致 iOS 应用程序崩溃！！0xdeadfeed 的原因是什么？

> ID：14827374
> 
> 赞同：5
> 
> 时间：2013-02-12T07:16:46.913
> 
> 标签：iphone, ios5, xcode4.5

```
Incident Identifier: 59F8A919-279A-4C9E-9B58-FFFE9C01F9E9
CrashReporter Key:   73755578964009d66f989a2277500f68dc02d973
Hardware Model:      iPod4,1
OS Version:          iPhone OS 5.1.1 (9B206)
Kernel version:      Darwin Kernel Version 11.0.0: Sun Apr  8 21:51:26 PDT 2012; 
root:xnu-1878.11.10~1/RELEASE_ARM_S5L8930X
Date:                2013-02-12 11:47:12 +0500
Exception Code:      0xdeadfeed
Reason:              Timeout waiting for service to spawn
Thermal Level:       -1
Thermal Sensors:    failed to load sensor values

Frontmost process PID:    7751
Frontmost process PID:    51
Jetsam Level:             28
Free Pages:             1642
Active Pages:           9820
Inactive Pages:         5087
Purgeable Pages:        4327
Wired Pages:           14299
Speculative Pages:       297
Throttled Pages:       32563
Busy Buffer Count:         0

Process 0 info:
resident memory bytes:  32129024
page faults:                694
page-ins:                     0
copy-on-write faults:         0
user   time in task: 136936.597192 seconds
system time in task:     0.000000 seconds 
```

//这是什么原因：-

```
 Exception Code:      0xdeadfeed 
```

# solr - Solr 4.1 DataImportHandler ClassNotFoundException

> ID：14827375
> 
> 赞同：11
> 
> 时间：2013-02-12T07:17:06.090
> 
> 标签：solr, dataimporthandler

我一直在尝试按照[本](http://wiki.apache.org/solr/DataImportHandler)教程设置数据导入处理程序（Solr 4.1），并尝试了以前帖子中建议的解决方案，例如[在多核 solr 中配置 DIH，](https://stackoverflow.com/questions/8225650/configure-dih-in-multicore-solr)并将数据导入 jar 添加到类路径，但错误仍然存​​在。有什么方法可以解决这个问题？

这是整个异常堆栈跟踪：

```
SEVERE: Unable to create core: collection1
org.apache.solr.common.SolrException: RequestHandler init failure
at org.apache.solr.core.SolrCore.<init>(SolrCore.java:794)
at org.apache.solr.core.SolrCore.<init>(SolrCore.java:607)
at org.apache.solr.core.CoreContainer.createFromLocal(CoreContainer.java:1003)
at org.apache.solr.core.CoreContainer.create(CoreContainer.java:1033)
at org.apache.solr.core.CoreContainer$3.call(CoreContainer.java:629)
at org.apache.solr.core.CoreContainer$3.call(CoreContainer.java:624)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680)
Caused by: org.apache.solr.common.SolrException: RequestHandler init failure
at org.apache.solr.core.RequestHandlers.initHandlersFromConfig(RequestHandlers.java:168)
at org.apache.solr.core.SolrCore.<init>(SolrCore.java:731)
... 13 more
Caused by: org.apache.solr.common.SolrException: Error loading class 'org.apache.solr.handler.dataimport.DataImportHandler'
at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:438)
at org.apache.solr.core.SolrCore.createInstance(SolrCore.java:507)
at org.apache.solr.core.SolrCore.createRequestHandler(SolrCore.java:581)
at    org.apache.solr.core.RequestHandlers.initHandlersFromConfig(RequestHandlers.java:154)
... 14 more
 Caused by: java.lang.ClassNotFoundException: org.apache.solr.handler.dataimport.DataImportHandler
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at java.net.FactoryURLClassLoader.loadClass(URLClassLoader.java:627)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:247)
at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:422)
... 17 more
Feb 12, 2013 12:37:47 PM org.apache.solr.common.SolrException log
SEVERE: null:org.apache.solr.common.SolrException: Unable to create core: collection1
at org.apache.solr.core.CoreContainer.recordAndThrow(CoreContainer.java:1654)
at org.apache.solr.core.CoreContainer.create(CoreContainer.java:1039)
at org.apache.solr.core.CoreContainer$3.call(CoreContainer.java:629)
at org.apache.solr.core.CoreContainer$3.call(CoreContainer.java:624)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680)
Caused by: org.apache.solr.common.SolrException: RequestHandler init failure
at org.apache.solr.core.SolrCore.<init>(SolrCore.java:794)
at org.apache.solr.core.SolrCore.<init>(SolrCore.java:607)
at org.apache.solr.core.CoreContainer.createFromLocal(CoreContainer.java:1003)
at org.apache.solr.core.CoreContainer.create(CoreContainer.java:1033)
... 10 more
Caused by: org.apache.solr.common.SolrException: RequestHandler init failure
at      org.apache.solr.core.RequestHandlers.initHandlersFromConfig(RequestHandlers.java:168)
at org.apache.solr.core.SolrCore.<init>(SolrCore.java:731)
... 13 more
Caused by: org.apache.solr.common.SolrException: Error loading class 'org.apache.solr.handler.dataimport.DataImportHandler'
at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:438)
at org.apache.solr.core.SolrCore.createInstance(SolrCore.java:507)
at org.apache.solr.core.SolrCore.createRequestHandler(SolrCore.java:581)
at org.apache.solr.core.RequestHandlers.initHandlersFromConfig(RequestHandlers.java:154)
... 14 more
Caused by: java.lang.ClassNotFoundException: org.apache.solr.handler.dataimport.DataImportHandler
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at java.net.FactoryURLClassLoader.loadClass(URLClassLoader.java:627)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:247)
at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:422)
... 17 more 
```

Solrconfig.xml：

```
 <?xml version="1.0" encoding="UTF-8" ?>
    <config>
    <luceneMatchVersion>LUCENE_41</luceneMatchVersion>
    <lib dir="../../../contrib/extraction/lib" regex=".*\.jar" />
    <lib dir="../../../dist/" regex="solr-cell-\d.*\.jar" />
    <lib dir="../../../contrib/clustering/lib/" regex=".*\.jar" />
    <lib dir="../../../dist/" regex="solr-clustering-\d.*\.jar" />
    <lib dir="../../../contrib/langid/lib/" regex=".*\.jar" />
    <lib dir="../../../dist/" regex="solr-langid-\d.*\.jar" />
    <lib dir="../../../contrib/velocity/lib" regex=".*\.jar" />
    <lib dir="../../../dist/" regex="solr-velocity-\d.*\.jar" />
    <lib dir="../../../dist/" regex="solr-dataimporthandler-4.1.0.jar\d.*\.jar" />
    <lib dir="../../lib/" regex=".*\.jar" /> 
    <dataDir>${solr.data.dir:}</dataDir>
    <directoryFactory name="DirectoryFactory" 
        class="${solr.directoryFactory:solr.NRTCachingDirectoryFactory}"/> 
    <indexConfig>
    </indexConfig>
    <jmx />
    <updateHandler class="solr.DirectUpdateHandler2">
        <updateLog>
            <str name="dir">${solr.ulog.dir:}</str>
        </updateLog>
        <autoCommit> 
            <maxTime>15000</maxTime> 
            <openSearcher>false</openSearcher> 
        </autoCommit>
    </updateHandler>
    <query>
        <maxBooleanClauses>1024</maxBooleanClauses>
        <filterCache class="solr.FastLRUCache"
            size="512"
            initialSize="512"
            autowarmCount="0"/>
        <queryResultCache class="solr.LRUCache"
            size="512"
            initialSize="512"
            autowarmCount="0"/>
        <documentCache class="solr.LRUCache"
            size="512"
            initialSize="512"
            autowarmCount="0"/>
        <enableLazyFieldLoading>true</enableLazyFieldLoading>
        <queryResultWindowSize>20</queryResultWindowSize>
        <queryResultMaxDocsCached>200</queryResultMaxDocsCached>
        <listener event="newSearcher" class="solr.QuerySenderListener">
            <arr name="queries">
            </arr>
        </listener>
        <listener event="firstSearcher" class="solr.QuerySenderListener">
            <arr name="queries">
                <lst>
                    <str name="q">static firstSearcher warming in solrconfig.xml</str>
                </lst>
            </arr>
        </listener>
        <useColdSearcher>false</useColdSearcher>
        <maxWarmingSearchers>2</maxWarmingSearchers>
    </query>
    <requestDispatcher handleSelect="false" >
        <requestParsers enableRemoteStreaming="true" 
            multipartUploadLimitInKB="2048000"
            formdataUploadLimitInKB="2048"/>
        <httpCaching never304="true" />
    </requestDispatcher>
    <requestHandler name="/select" class="solr.SearchHandler">
        <lst name="defaults">
            <str name="echoParams">explicit</str>
            <int name="rows">10</int>
            <str name="df">app_data</str>
        </lst>
    </requestHandler>
    <requestHandler name="/query" class="solr.SearchHandler">
        <lst name="defaults">
            <str name="echoParams">all</str>
            <str name="wt">xml</str>
            <str name="indent">true</str>
            <str name="df">app_data</str>
            <str name="spellcheck.dictionary">default</str>
            <str name="spellcheck.dictionary">wordbreak</str>
            <str name="spellcheck">on</str>
            <str name="spellcheck.extendedResults">true</str>       
            <str name="spellcheck.count">10</str>
            <str name="spellcheck.alternativeTermCount">5</str>
            <str name="spellcheck.maxResultsForSuggest">5</str>       
            <str name="spellcheck.collate">true</str>
            <str name="spellcheck.collateExtendedResults">true</str>  
            <str name="spellcheck.maxCollationTries">10</str>
            <str name="spellcheck.maxCollations">5</str>         
        </lst>
        <arr name="last-components">
            <str>spellcheck</str>
        </arr>
    </requestHandler>
    <requestHandler name="/get" class="solr.RealTimeGetHandler">
        <lst name="defaults">
            <str name="omitHeader">true</str>
            <str name="wt">json</str>
            <str name="indent">true</str>
        </lst>
    </requestHandler>
    <requestHandler name="/browse" class="solr.SearchHandler">
    </requestHandler>
    <requestHandler name="/update" class="solr.UpdateRequestHandler">
    </requestHandler>
    <requestHandler name="/update/json" class="solr.JsonUpdateRequestHandler">
        <lst name="defaults">
            <str name="stream.contentType">application/json</str>
        </lst>
    </requestHandler>
    <requestHandler name="/update/csv" class="solr.CSVRequestHandler">
        <lst name="defaults">
            <str name="stream.contentType">application/csv</str>
        </lst>
    </requestHandler>
    <requestHandler name="/update/extract" 
        startup="lazy"
        class="solr.extraction.ExtractingRequestHandler" >
        <lst name="defaults">
            <str name="lowernames">true</str>
            <str name="uprefix">ignored_</str>
            <str name="captureAttr">true</str>
            <str name="fmap.a">links</str>
            <str name="fmap.div">ignored_</str>
        </lst>
    </requestHandler>
    <requestHandler name="/analysis/field" 
        startup="lazy"
        class="solr.FieldAnalysisRequestHandler" />
    <requestHandler name="/analysis/document" 
        class="solr.DocumentAnalysisRequestHandler" 
        startup="lazy" />
    <requestHandler name="/admin/" 
        class="solr.admin.AdminHandlers" />
    <requestHandler name="/admin/ping" class="solr.PingRequestHandler">
        <lst name="invariants">
            <str name="q">solrpingquery</str>
        </lst>
        <lst name="defaults">
            <str name="echoParams">all</str>
        </lst>
    </requestHandler>
    <requestHandler name="/debug/dump" class="solr.DumpRequestHandler" >
        <lst name="defaults">
            <str name="echoParams">explicit</str> 
            <str name="echoHandler">true</str>
        </lst>
    </requestHandler>
    <requestHandler name="/replication" class="solr.ReplicationHandler" > 
    </requestHandler>
    <searchComponent name="spellcheck" class="solr.SpellCheckComponent">
        <str name="queryAnalyzerFieldType">text_general</str>
        <lst name="spellchecker">
            <str name="name">default</str>
            <str name="field">keyword</str>
            <str name="classname">solr.DirectSolrSpellChecker</str>
            <str name="distanceMeasure">internal</str>
            <float name="accuracy">0.5</float>
            <int name="maxEdits">2</int>
            <int name="minPrefix">0</int>
            <int name="maxInspections">10</int>
            <int name="minQueryLength">4</int>
            <float name="maxQueryFrequency">0.02</float><!--appears in more than 2% of the documents its assumed to be correct, and no suggestions are given, I don't think use of this parameter makes any sense since dictionary is based on keyword field which is unique. Not sure if frequency is also based on that column only.-->
        </lst>
        <lst name="spellchecker">
            <str name="name">wordbreak</str>
            <str name="classname">solr.WordBreakSolrSpellChecker</str>      
            <str name="field">keyword</str>
            <str name="combineWords">true</str>
            <str name="breakWords">true</str>
            <int name="maxChanges">10</int>
        </lst>
    </searchComponent>
    <requestHandler name="/spell" class="solr.SearchHandler" startup="lazy">
        <lst name="defaults">
            <str name="df">app_data</str>
            <str name="spellcheck.dictionary">default</str>
            <str name="spellcheck.dictionary">wordbreak</str>
            <str name="spellcheck">on</str>
            <str name="spellcheck.extendedResults">true</str>       
            <str name="spellcheck.count">10</str>
            <str name="spellcheck.alternativeTermCount">5</str>
            <str name="spellcheck.maxResultsForSuggest">5</str>       
            <str name="spellcheck.collate">true</str>
            <str name="spellcheck.collateExtendedResults">true</str>  
            <str name="spellcheck.maxCollationTries">10</str>
            <str name="spellcheck.maxCollations">5</str>         
        </lst>
        <arr name="last-components">
            <str>spellcheck</str>
        </arr>
    </requestHandler>
    <searchComponent name="tvComponent" class="solr.TermVectorComponent"/>
    <requestHandler name="/tvrh" class="solr.SearchHandler" startup="lazy">
        <lst name="defaults">
            <str name="df">app_data</str>
            <bool name="tv">true</bool>
        </lst>
        <arr name="last-components">
            <str>tvComponent</str>
        </arr>
    </requestHandler>
    <searchComponent name="clustering"
        enable="${solr.clustering.enabled:false}"
        class="solr.clustering.ClusteringComponent" >
        <lst name="engine">
            <str name="name">default</str>
            <str name="carrot.algorithm">org.carrot2.clustering.lingo.LingoClusteringAlgorithm</str>
            <str name="LingoClusteringAlgorithm.desiredClusterCountBase">20</str>
            <str name="carrot.lexicalResourcesDir">clustering/carrot2</str>
            <str name="MultilingualClustering.defaultLanguage">ENGLISH</str>
        </lst>
        <lst name="engine">
            <str name="name">stc</str>
            <str name="carrot.algorithm">org.carrot2.clustering.stc.STCClusteringAlgorithm</str>
        </lst>
    </searchComponent>
    <requestHandler name="/clustering"
        startup="lazy"
        enable="${solr.clustering.enabled:false}"
        class="solr.SearchHandler">
        <lst name="defaults">
            <bool name="clustering">true</bool>
            <str name="clustering.engine">default</str>
            <bool name="clustering.results">true</bool>
            <str name="carrot.title">name</str>
            <str name="carrot.url">id</str>
            <str name="carrot.snippet">features</str>
            <bool name="carrot.produceSummary">true</bool>
            <bool name="carrot.outputSubClusters">false</bool>
            <str name="defType">edismax</str>
            <str name="qf">
                app_data
            </str>
            <str name="q.alt">*:*</str>
            <str name="rows">10</str>
            <str name="fl">*</str>
        </lst>     
        <arr name="last-components">
            <str>clustering</str>
        </arr>
    </requestHandler>
    <searchComponent name="terms" class="solr.TermsComponent"/>
    <requestHandler name="/terms" class="solr.SearchHandler" startup="lazy">
        <lst name="defaults">
            <bool name="terms">true</bool>
            <bool name="distrib">false</bool>
        </lst>     
        <arr name="components">
            <str>terms</str>
        </arr>
    </requestHandler>
    <searchComponent name="elevator" class="solr.QueryElevationComponent" >
        <str name="queryFieldType">string</str>
        <str name="config-file">elevate.xml</str>
    </searchComponent>
    <requestHandler name="/elevate" class="solr.SearchHandler" startup="lazy">
        <lst name="defaults">
            <str name="echoParams">explicit</str>
            <str name="df">app_data</str>
        </lst>
        <arr name="last-components">
            <str>elevator</str>
        </arr>
    </requestHandler>
      <requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
    <lst name="defaults">
      <str name="config">/Users/username/data-config.xml</str>
    </lst>
  </requestHandler>
    <searchComponent class="solr.HighlightComponent" name="highlight">
        <highlighting>
            <fragmenter name="gap" 
                default="true"
                class="solr.highlight.GapFragmenter">
                <lst name="defaults">
                    <int name="hl.fragsize">100</int>
                </lst>
            </fragmenter>
            <fragmenter name="regex" 
                class="solr.highlight.RegexFragmenter">
                <lst name="defaults">
                    <int name="hl.fragsize">70</int>
                    <float name="hl.regex.slop">0.5</float>
                    <str name="hl.regex.pattern">[-\w ,/\n\&quot;&apos;]{20,200}</str>
                </lst>
            </fragmenter>
            <formatter name="html" 
                default="true"
                class="solr.highlight.HtmlFormatter">
                <lst name="defaults">
                    <str name="hl.simple.pre"><![CDATA[<em>]]></str>
                        <str name="hl.simple.post"><![CDATA[</em>]]></str>
                </lst>
            </formatter>
            <encoder name="html" 
                class="solr.highlight.HtmlEncoder" />
            <fragListBuilder name="simple" 
                class="solr.highlight.SimpleFragListBuilder"/>
            <fragListBuilder name="single" 
                class="solr.highlight.SingleFragListBuilder"/>
            <fragListBuilder name="weighted" 
                default="true"
                class="solr.highlight.WeightedFragListBuilder"/>
            <fragmentsBuilder name="default" 
                default="true"
                class="solr.highlight.ScoreOrderFragmentsBuilder">
            </fragmentsBuilder>
            <fragmentsBuilder name="colored" 
                class="solr.highlight.ScoreOrderFragmentsBuilder">
                <lst name="defaults">
                    <str name="hl.tag.pre"><![CDATA[
                        <b style="background:yellow">,<b style="background:lawgreen">,
                                <b style="background:aquamarine">,<b style="background:magenta">,
                                        <b style="background:palegreen">,<b style="background:coral">,
                                                <b style="background:wheat">,<b style="background:khaki">,
                                                        <b style="background:lime">,<b style="background:deepskyblue">]]></str>
                                                            <str name="hl.tag.post"><![CDATA[</b>]]></str>
                                                    </lst>
                                                </fragmentsBuilder>
                                                <boundaryScanner name="default" 
                                                    default="true"
                                                    class="solr.highlight.SimpleBoundaryScanner">
                                                    <lst name="defaults">
                                                        <str name="hl.bs.maxScan">10</str>
                                                        <str name="hl.bs.chars">.,!? &#9;&#10;&#13;</str>
                                                    </lst>
                                                </boundaryScanner>
                                                <boundaryScanner name="breakIterator" 
                                                    class="solr.highlight.BreakIteratorBoundaryScanner">
                                                    <lst name="defaults">
                                                        <str name="hl.bs.type">WORD</str>
                                                        <str name="hl.bs.language">en</str>
                                                        <str name="hl.bs.country">US</str>
                                                    </lst>
                                                </boundaryScanner>
                                            </highlighting>
                                        </searchComponent>
                                        <queryResponseWriter name="json" class="solr.JSONResponseWriter">
                                            <str name="content-type">text/plain; charset=UTF-8</str>
                                        </queryResponseWriter>
                                        <queryResponseWriter name="velocity" class="solr.VelocityResponseWriter" startup="lazy"/>
                                        <queryResponseWriter name="xslt" class="solr.XSLTResponseWriter">
                                            <int name="xsltCacheLifetimeSeconds">5</int>
                                        </queryResponseWriter>
                                        <admin>
                                            <defaultQuery>*:*</defaultQuery>
                                        </admin>
                                    </config> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-13T07:09:08.147

处理任何类未找到问题的最佳方法是获取所需的 jar 并将它们放在`solr/lib`dir 中，其中 solr dir 与包含用于配置 solr 核心的 solr.xml 相同，您还需要将以下行添加到 solrconfig.xml

```
<lib dir="../lib" /> 
```

这将为您的 solr 安装中的所有内核加载所有必需的库。

如果您需要将 jar 限制为核心，则将其放入 int

`instanceDir/lib`，在这种情况下不需要对 solrconfig.xml 进行任何配置。

为了使数据导入处理程序正常工作，您还需要 JDBC jar`dist/solr-dataimporthandler-*.jar`并将其放入您配置的 lib 目录中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-09T13:09:26.933

在 Solr Core 目录中添加 lib 文件夹，并将所需的 lib jar 文件添加到其中。在这种情况下，您不需要在 solrconfig.xml 文件中指定 lib 路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T03:19:33.857

我今天刚开始尝试让 Solr 4.1 与 MySQL 一起工作，并遇到了与您完全相同的问题。

我设法通过执行以下操作来解决它：

1.  注释掉除一个以外的所有默认 LIB 目录：

    `<lib dir="../../../contrib/extraction/lib" regex=".*\.jar" /> <!-- <lib dir="../../../dist/" regex="solr-cell-\d.*\.jar" /> <lib dir="../../../contrib/clustering/lib/" regex=".*\.jar" /> <lib dir="../../../dist/" regex="solr-clustering-\d.*\.jar" /> <lib dir="../../../contrib/langid/lib/" regex=".*\.jar" /> <lib dir="../../../dist/" regex="solr-langid-\d.*\.jar" /> <lib dir="../../../contrib/velocity/lib" regex=".*\.jar" /> <lib dir="../../../dist/" regex="solr-velocity-\d.*\.jar" /> -->`

2.  抓到最新的[mysql连接器jar](http://dev.mysql.com/downloads/mirror.php?id=412054) r文件和[solr dataimporthandler jar](http://mvnrepository.com/artifact/org.apache.solr/solr-dataimporthandler/4.1.0)

3.  将它们放在剩余的目录中。

再次启动服务器，它工作。

这是在 Windows 8 X86_64 上。

希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T09:50:55.203

在 solr 4.1.0 中，在项目中添加以下 jar 文件。
solr-dataimporthandler-4.1.0，solr-dataimporthandler-extras-4.1.0

再次执行它。它会工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-13T16:14:06.490

选择的答案当然有效（这几乎可以归结为“将所有内容复制到`$instancedir/lib`”）但是 solr 配置提供了一种方法来分离 solr 和“扩展”库（即自定义 solr 处理程序/解析器）附带的“标准/全局”库/etc) 特定于实例。

至少有两个目录需要 solr 来加载类需要加载：`${solr.install.dir}`这几乎是 solr 的安装位置。使用脚本（在 v4.10.x 中可用）默认设置`bin/solr`为运行脚本的目录。 `solrconfig.xml`使用此目录作为加载`solrconfig.xml`文件中指定的 jar 的基础；它可以被 java`-D`参数覆盖或在文件本身中完全覆盖，如所选答案中指定的那样。这是我认为必须加载“全局”库。

现在，有一个第二个 solr 变量`${solr.solr.home}`，它是创建所有索引工件/文件的实例主页，这里我们有`solr.xml`. 您分别为每个 solr 实例（在不同的端口中运行）拥有此目录。在该`solr.xml`文件中，您可以有一个[`sharedLib`](https://wiki.apache.org/solr/Solr.xml%204.4%20and%20beyond)元素，它是一个文件夹 relative `${solr.solr.home}`。这是我认为将加载特定于 solr 实例的任何“扩展”库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-19T16:29:06.670

我有同样的例外 .add solr-dataimporthandler-extras-4.7.2.jar 和 solr-dataimporthandler-4.7.2.jar 在你的核心的 lib 文件夹中。这对我有用。

# c++ - 如何将静态类成员放在命名空间中？

> ID：14827377
> 
> 赞同：2
> 
> 时间：2013-02-12T07:17:07.200
> 
> 标签：c++, namespaces, static-members

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:27:19.897

You declared class `api` in global namespace you can't define member in another namespace. What you need to do is to define `api::message` in a cpp file

api.h

```
class api
{
private:
    void psParser ()
    {
        std::stringstream psOutput;
        psOutput << "ps --no-headers -f -p " << getpid() << " > .txt";

        system (psOutput.str().c_str());

        std::stringstream processInfo;
        processInfo << ":"__FILE__ << ":" << __DATE__ << ":" << __TIME__ << ":";
    }

public:
    static std::stringstream message;
}; 
```

api.cpp

```
std::stringstream api::message; 
```

main.cpp

```
#include "api.h"

int main ()
{
    api::message << "zxzx";

    return 0;
} 
```

But it's not the best practice to make `std::stringstream` static, you may want to make it a local variable if you could.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:35:50.513

I am guessing that you want to have the *same* instance of `api::message` accessible across all translation units that have access to `api`. Unlike plain, non-class `static` data, which have internal linkage, `static` class members have external linkage. This means the same instance is seen everywhere. So you do not have to play any games with namespaces. A namespace wouldn't change anything here, but it would have to enclose the whole `api` class anyway.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T09:15:21.790

One way to achieve this is to use singleton design pattern. Define a public static accessor function to access the instance.

```
class api
{
 private:
 static bool instanceFlag;
 static api* inst;
 ....
  ....
 public:
 static api* getInstance();
 inline void display(std::string msg)
 { 
       std::cout<<msg;
 }
};
bool api::instanceFlag = false;
api* api::inst = NULL;

api* api::getInstance()
{
 if(! instanceFlag)
 {
    inst = new api();
    instanceFlag = true;
    return inst;
 }
 else
 {
    return inst;
 }
}
int main()
{
  // Access the static instance. Same instance available everywhere
  api::getInstance()->display("zxzx");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T07:20:54.770

Your code doesn't compile because you're trying to put `api::message` into a different namespace from `api` itself.

> I want that `static std::stringstream message` should be accessible at a global scope

If you want it accessible at the global scope, don't put it in a namespace.

# php - 这段使用 mysql 扩展从 PHP 数据库中获取数据的代码有什么问题？

> ID：14827380
> 
> 赞同：-1
> 
> 时间：2013-02-12T07:17:22.673
> 
> 标签：php, mysql

我想使用 php 从 mysql 表中获取数据。拜托，谁能告诉我这段代码有什么问题？从 mysql 数据库中获取数据的正确代码是什么：

```
 <?php
    $dbhost = 'localhost';
    $dbuser = 'root';
    $dbpass = '';
    $connect=mysql_connect("localhost","root","");

    // connect to databsase 

    mysql_select_db("form1",);

        enter code here

    // query the database 

    $query = mysql_query("SELECT * FROM users WHERE name = 'Admin' ");

    // fetch the result / convert resulte in to array 

    while ($rows = mysql_fetch_array($query)):

       $rows = $rows['Name'];
       $address = $rows['Address'];
       $email = $rows['Email'];
       $subject = $rows['Subject'];
       $comment = $rows['Comment'];

       echo "$Name<br>$Address<br>$Email<br>$Subject<br>$Comment<br><br>";

       endwhile;

       ?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T07:21:47.627

php 中的变量区分大小写。请将您的 while 循环替换为以下内容：

```
while ($rows = mysql_fetch_array($query)):

           $name = $rows['Name'];
           $address = $rows['Address'];
           $email = $rows['Email'];
           $subject = $rows['Subject'];
           $comment = $rows['Comment']

           echo "$name<br>$address<br>$email<br>$subject<br>$comment<br><br>";

           endwhile; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:39:22.277

尝试这个

```
<?php
// 1\. Enter Database details
$dbhost = 'localhost';
$dbuser = 'root';
$dbpass = 'password';
$dbname = 'database name';

// 2\. Create a database connection
$connection = mysql_connect($dbhost,$dbuser,$dbpass);
if (!$connection) {
    die("Database connection failed: " . mysql_error());
}

// 3\. Select a database to use 
$db_select = mysql_select_db($dbname,$connection);
if (!$db_select) {
    die("Database selection failed: " . mysql_error());
}

$query = mysql_query("SELECT * FROM users WHERE name = 'Admin' ");

while ($rows = mysql_fetch_array($query)) { 
   $name = $rows['Name'];
   $address = $rows['Address'];
   $email = $rows['Email'];
   $subject = $rows['Subject'];
   $comment = $rows['Comment']

   echo "$name<br>$address<br>$email<br>$subject<br>$comment<br><br>";      
} 

?> 
```

没测试！！*更新！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-12T03:12:15.953

将“WHILE”更改为“while”。因为 php 像 c/c++ 一样区分大小写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T07:26:12.437

1.  选择标识符为 mysql_select_db("form1",$connect); 的数据库

2.  您是否收到语法错误？如果请放一个; 在 $comment = $rows['Comment'] 旁边。

3.  这里的变量也应该区分大小写

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-12T10:10:22.660

你的语法是错误的......正确的编码是：

```
 <?php
mysql_connect("localhost","root","");
mysql_select_db("form1");
$query = mysql_query("SELECT * FROM users WHERE name = 'Admin' ");
while($rows = mysql_fetch_array($query))
{

   $rows = $rows['Name'];
   $address = $rows['Address'];
   $email = $rows['Email'];
   $subject = $rows['Subject'];
   $comment = $rows['Comment']
   echo $rows.'</br>'.$address.'</br>'.$email.'</br>'.$subject.'</br>'.$comment;
}
   ?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T04:24:11.583

如果这是您拥有的代码，那么您将收到一个错误，因为您在循环中重新分配 $row，因此您将永远无法迭代结果。代替

```
$rows = $rows['Name']; 
```

和

```
$name = $rows['Name']' 
```

所以你的代码看起来像

```
WHILE ($rows = mysql_fetch_array($query)):

   $name = $rows['Name'];
   $address = $rows['Address'];
   $email = $rows['Email'];
   $subject = $rows['Subject'];
   $comment = $rows['Comment']; 
```

另外我假设表用户中的列名称是名称、地址、电子邮件等，而不是名称、地址、电子邮件。请记住，每个变量名/字段名都区分大小写。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-21T05:11:56.893

```
<table border="1px">

    <tr>
        <th>Student Name</th>
        <th>Email</th>
        <th>password</th>
    </tr>

        <?php

            If(mysql_num_rows($result)>0)
            {
                while($rows=mysql_fetch_array($result))
                {  

        ?>
    <?php echo "<tr>";?>
                    <td><?php echo $rows['userName'];?> </td>
                    <td><?php echo $rows['email'];?></td>
                    <td><?php echo $rows['password'];?></td>

    <?php echo "</tr>";?>
        <?php
                }
            }

    ?>
</table>
    <?php
        }
    ?> 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-02-12T07:20:03.477

尝试

```
$query = mysql_query("SELECT * FROM users WHERE name = 'Admin' ")or die(mysql_error());
```

并检查这是否会引发任何错误。

然后使用`while($rows = mysql_fetch_assoc($query)):`

最后显示为

```
echo $name . "<br/>" . $address . "<br/>" . $email . "<br/>" . $subject . "<br/>" . $comment . "<br/><br/>" . ;
```

不要使用`mysql_*`它已弃用。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-02-12T07:23:10.820

使用此代码

```
 while ($rows = mysql_fetch_array($query)):

   $name = $rows['Name'];
   $address = $rows['Address'];
   $email = $rows['Email'];
   $subject = $rows['Subject'];
   $comment = $rows['Comment'];

   echo "$name<br>$address<br>$email<br>$subject<br>$comment<br><br>";

   endwhile;

   ?> 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-06-22T09:51:54.413

**代码：**

```
while ($rows = mysql_fetch_array($query)):
       $name = $rows['Name'];
       $address = $rows['Address'];
       $email = $rows['Email'];
       $subject = $rows['Subject'];
       $comment = $rows['Comment']
       echo "$name<br>$address<br>$email<br>$subject<br>$comment<br><br>";
endwhile; 
```

# vim - vim localleader 和空格

> ID：14827383
> 
> 赞同：1
> 
> 时间：2013-02-12T07:17:34.080
> 
> 标签：vim

我刚刚绑定`localleader`到“”（空格键），现在每次按空格键时 vim 都会变慢。我想它会等待某种组合，但我在插入模式下没有任何使用`localleader`键的绑定。有没有办法告诉vim`localleader`在插入模式下不要等待键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T08:08:10.950

只有在实际定义了（插入模式）映射时才会有延迟。采用

```
:verbose imap <Space> 
```

寻找映射以及哪个插件定义了它。

# mysql - 一个请求中多个表的mysql计数

> ID：14827384
> 
> 赞同：0
> 
> 时间：2013-02-12T07:17:34.097
> 
> 标签：mysql, bash

我有以下输出：

```
 root@localhost [~]# mysql -e "SELECT TABLE_ROWS from information_schema.Tables where TABLE_SCHEMA= 'testdb' && TABLE_NAME = 'requests';"
    +------------+
    | TABLE_ROWS |
    +------------+
    |    9566846 |
    +------------+

    root@localhost [~]# mysql -e "select count(*) from testdb.requests where created_at like '2012%';"
    +----------+
    | count(*) |
    +----------+
    |   301438 |
    +----------+
    root@localhost [~]# mysql -e "select count(*) from testdb.requests where created_at like '2013%';"
    +----------+
    | count(*) |
    +----------+
    |    24917 |
    +----------+ 
```

如何更好，使用 mysql 请求对一个请求执行相同的操作以获得新的输出，例如

```
 +------------------+-----------------------+
    | year             | count(*)              |
    +------------------+-----------------------+
    | 2009             | 1066268               |
    | 2010             | 6799553               |
    | 2011             | 1374685               |
    | 2012             | 301438                |
    | 2013             | 24917                 |
    | total            | 9566846               |
    +------------------+-----------------------+ 
```

提前谢谢你， Evgheni

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:27:18.647

您可以尝试使用 group 语句

```
select 
    DATE_FORMAT(created_at, '%d') as year, 
    count(*) as count
from
    testdb.requests
group by year; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:32:02.040

尝试使用聚合函数 -

```
SELECT
  YEAR(created_at) yesr,
  COUNT(*) cnt
FROM
  testdb.requests
GROUP BY year; 
```

计算总使用 WITH ROLLUP 修饰符 -

```
SELECT
  YEAR(created_at) yesr,
  COUNT(*) cnt
FROM
  testdb.requests
GROUP BY year WITH ROLLUP; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T07:34:08.660

试试这个

```
SELECT YEAR(created_at) AS `year`,
       COUNT(*) AS `count` 
  FROM testdb.requests 
 GROUP BY YEAR(created_at)
 UNION ALL
SELECT 'total' AS `year`, 
       TABLE_ROWS AS `count`
  FROM information_schema.Tables 
 WHERE TABLE_SCHEMA= 'testdb' AND 
       TABLE_NAME = 'requests' 
```

或者

```
SELECT YEAR(created_at) AS `year`,
       COUNT(*) AS `count` 
  FROM testdb.requests 
 GROUP BY YEAR(created_at)
 UNION ALL
SELECT 'total' AS `year`, 
       COUNT(*) AS `year`
  FROM testdb.requests 
```

它产生如下输出：

```
+-------+-------+
| year  | count |
+-------+-------+
| 2012  |     6 |
| 2013  |     7 |
| total |    13 |
+-------+-------+ 
```

这是[sqlfiddle](http://sqlfiddle.com/#!2/79c42/5)

# mysql - MYSQL 中的数组

> ID：14827392
> 
> 赞同：0
> 
> 时间：2013-02-12T07:17:53.023
> 
> 标签：mysql

谁能解释如何在 datadase 中存储数组？

```
ID       NAME        ARRAY_FIELD
1        John        (CRICKET DANCE)
2        Wright      (BOOKS HOCKEY) 
```

我如何以上述方式存储在表格中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:26:05.977

您可以使用逗号分隔值插入字段，同时再次使这些值爆炸，然后用逗号进一步处理它们

插入（ARRAY_FIELD）表值（'CRICKET，DANCE'）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:23:05.543

数组不能存储在数据库中。这就是为什么许多程序员使用 serialize() 函数以便将数组转换为字符串的原因。

# javascript - 如何通过局部变量调用 ID

> ID：14827396
> 
> 赞同：-3
> 
> 时间：2013-02-12T07:18:05.457
> 
> 标签：javascript, jquery, html, variables

如果我有 html

```
<TableView id=img1></TableView>
<TableView id=img2></TableView> 
```

一般

```
 $.img1.backgroundImage = "/Picture1.jpeg" 
```

但我想知道如何存储`id`局部变量并调用相同的函数，而不是`img1`我必须使用局部变量。这有什么可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:20:25.300

是的，但需要相应地调整代码以设置背景图像

```
var img1 = $("#img1")
img1.css("background-image","/Picture1.jpeg"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T07:26:52.850

通常`$.img1.backgroundImage = "/Picture1.jpeg"`是无稽之谈，因为 jQuery 不会使用引用页面上所有具有 id 的元素的属性来填充自身。

将其转换为使用变量而不是标识符（假设`var foo = 'img1';`为以下所有示例的利益）将是

```
$[foo].backgroundImage = "/Picture1.jpeg"; 
```

（这等效于原始代码，但是由于我不希望原始代码可以工作，因此也不会）。

`backgroundImage`要在 JS 中实际设置属性，您将：

```
document.getElementById(foo).style.backgroundImage = "url(/Picture1.jpeg)"; 
```

或者如果你是一个 jQuery 迷：

```
jQuery('#' + foo).css('background-image', 'url(/Picture1.jpeg)'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T07:22:59.003

```
var images = $("#img1"); 
```

或者你也可以使用

```
var images_obj=form_name.element_name; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T07:24:35.833

```
var yourVar= $("#img1").attr("id"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-12T07:29:10.630

我想你想改变一个由 id 选择的元素的背景图像 css 属性，谁在局部变量中？

```
var yourid = "img1";
$('#' + yourid ).css('background-image', '/Picture1.jpeg'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T07:19:40.887

您最好保存对象而不是 id，因为您需要一次又一次地通过 id 获取元素。

```
var img1Obj1 = $('#img1');  //jQuery object
var img1Obj2 = $('#img1')[0]; // DOM javascript object 
```

# java - 将字节数组值以小端顺序转换为短值

> ID：14827398
> 
> 赞同：25
> 
> 时间：2013-02-12T07:18:10.583
> 
> 标签：java, arrays, byte, endianness

我有一个字节数组，其中数组中的数据实际上是短数据。字节以小端序排列：

3, 1, -48, 0, -15, 0, 36, 1

当转换为短值时会导致：

259、208、241、292

Java中是否有一种简单的方法可以将字节值转换为相应的短值？我可以编写一个循环，只获取每个高字节并将其移动 8 位，然后将其与低字节进行 OR，但这会影响性能。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-02-12T07:22:02.203

使用[java.nio.ByteBuffer](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html)你可以指定你想要的字节顺序：[order()](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html#order%28java.nio.ByteOrder%29)。

ByteBuffer 具有将数据提取为 byte、char、[getShort()](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html#getShort%28%29)、[getInt()](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html#getInt%28%29)、long、double 的方法...

这是一个如何使用它的示例：

```
ByteBuffer bb = ByteBuffer.wrap(byteArray);
bb.order( ByteOrder.LITTLE_ENDIAN);
while( bb.hasRemaining()) {
   short v = bb.getShort();
   /* Do something with v... */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-18T18:41:44.357

```
 /* Try this: */
public static short byteArrayToShortLE(final byte[] b, final int offset) 
{
        short value = 0;
        for (int i = 0; i < 2; i++) 
        {
            value |= (b[i + offset] & 0x000000FF) << (i * 8);
        }            

        return value;
 }

 /* if you prefer... */
 public static int byteArrayToIntLE(final byte[] b, final int offset) 
 {
        int value = 0;

        for (int i = 0; i < 4; i++) 
        {
           value |= ((int)b[i + offset] & 0x000000FF) << (i * 8);
        }

       return value;
 } 
```

# objective-c - 用两指手势滚动

> ID：14827401
> 
> 赞同：0
> 
> 时间：2013-02-12T07:18:30.060
> 
> 标签：objective-c, uiscrollview, uigesturerecognizer, drawrect

我在 UIScrollView 上有一个绘图视图。

我想做的是用一根手指画线，用两根手指滚动。

绘图视图是通过 touchesMoved 画线如下。

```
- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch;
    CGPoint lastTouch, currentTouch;

    for (touch in touches)
    {
        lastTouch = [touch previousLocationInView:self];
        currentTouch = [touch locationInView:self];

        CGContextRef ctx = CGLayerGetContext(drawLayer);
        CGContextBeginPath(ctx);
        CGContextMoveToPoint(ctx, lastTouch.x, lastTouch.y);
        CGContextAddLineToPoint(ctx, currentTouch.x, currentTouch.y);
        CGContextStrokePath(ctx);
    }

    [self setNeedsDisplay];
}

- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    CGContextDrawLayerInRect(drawContext, self.bounds, drawLayer);
    CGContextClearRect(CGLayerGetContext(drawLayer), self.bounds);
    [self setNeedsDisplay];
} 
```

在视图控制器上，

```
 _scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
    [_scrollView setContentSize:CGSizeMake(320, 800)];
    [self.view addSubview:_scrollView];

    _drawingView = [[DrawingView alloc] initWithFrame:CGRectMake(0, 0, 320, 800)];
    [_scrollView addSubview:_drawingView];

    for (UIGestureRecognizer *gestureRecognizer in _scrollView.gestureRecognizers)
    {
        if ([gestureRecognizer  isKindOfClass:[UIPanGestureRecognizer class]])
        {
            UIPanGestureRecognizer *panGR = (UIPanGestureRecognizer *) gestureRecognizer;
            panGR.minimumNumberOfTouches = 2;
        }
    } 
```

它在模拟器上工作正常，但在真实设备上绘图太慢。有什么问题和任何建议？

泰！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:10:25.303

我解决了。

1.  不应使用 [self setNeedsDisplay] 绘制整个屏幕。应该用 [self setNeedsDisplay withRect:] 绘制一个需要重绘的区域

2.  最好使用 panGesture 识别器而不是 touchesBegin~End。touchesBegin 和 touchesEnd 之间有延迟。

# javascript - 从后面的代码在地图上显示标记

> ID：14827404
> 
> 赞同：0
> 
> 时间：2013-02-12T07:18:45.613
> 
> 标签：javascript, jquery, asp.net, google-maps-api-3, jquery-gmap3

我正在尝试实现谷歌地图 Jquery 版本，即[GMAP3](http://gmap3.net/)

我从以下 c# 代码调用脚本

**编辑：**

```
void drawMap(List<beatWithCurrentStatus> mapList, bool IsMap)
{       
    ScriptManager.RegisterStartupScript(this, this.GetType(), "functiona", "designMap(" + ConvertToJSON(mapList) + ");", true);
} 
```

以下是我的脚本

```
function designMap(JSONData) {
var ll = [];
var address = [];

for (var i = 0; i < JSONData.length; i++) {
    //        ll[i] = '{latLng:\'[' + data[i].lastlatitude + ',' + data[i].lastlongitude + ']\',data:\'' + data[i].lastaddress + '\'}';
    ll[i] = { latLng: [JSONData[i].lastlatitude, JSONData[i].lastlongitude], data: JSONData[i].lastaddress };
}
alert(ll);
$('#mapDiv').gmap3({
    map:
{
    options: {
        center: [JSONData[5].latitude, JSONData[5].longitude],
        zoom: 7,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        mapTypeControl: true,
        mapTypeControlOptions: {
            style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
        },
        navigationControl: true,
        scrollwheel: true,
        streetViewControl: true
    }

},
    marker: {
        values: ll,
        options: {
            draggable: false
        }
    }

});
} 
```

编辑：这是我从 ConvertToJSON(mapList) 函数得到的 JSON

```
[{"number":1,"accountID":"primecomforts","deviceID":"911227400024706","place":"Noida Region","status":1,"statusString":null,"requestTimestamp":"\/Date(1346265000000)\/","mobileNumber":null,"latitude":28.535516,"longitude":77.391026,"distance":13.64,"summary":null,"url":"Image/default-location-image.png","charrgingStatus":0,"lasttimestamp":"\/Date(1360653137000)\/","laststatusCode":61715,"lastlatitude":47.787773,"lastlongitude":-2.449187,"lastspeedKPH":0,"lastheading":0,"lastaddress":"D151,56140 Bohal,,France","lastodometerKM":null,"stringDateTime":null,"lastVDOP":"1","lastCharrgingStatus":0,"smsType":null,"pointsource":0,"sno":null,"cellTowerId":null,"data":null,"latLng":null},{"number":2,"accountID":"primecomforts","deviceID":"911227400024706","place":"Delhi Region","status":1,"statusString":null,"requestTimestamp":"\/Date(1346265000000)\/","mobileNumber":null,"latitude":28.635308,"longitude":77.22496,"distance":13.64,"summary":null,"url":"Image/default-location-image.png","charrgingStatus":0,"lasttimestamp":"\/Date(-62135596800000)\/","laststatusCode":0,"lastlatitude":0,"lastlongitude":0,"lastspeedKPH":0,"lastheading":0,"lastaddress":null,"lastodometerKM":null,"stringDateTime":null,"lastVDOP":null,"lastCharrgingStatus":0,"smsType":null,"pointsource":0,"sno":null,"cellTowerId":null,"data":null,"latLng":null},{"number":3,"accountID":"primecomforts","deviceID":"911227400024706","place":"Noida","status":1,"statusString":null,"requestTimestamp":"\/Date(1347474600000)\/","mobileNumber":null,"latitude":28.535516,"longitude":77.391026,"distance":13.64,"summary":null,"url":"Image/default-location-image.png","charrgingStatus":0,"lasttimestamp":"\/Date(-62135596800000)\/","laststatusCode":0,"lastlatitude":0,"lastlongitude":0,"lastspeedKPH":0,"lastheading":0,"lastaddress":null,"lastodometerKM":null,"stringDateTime":null,"lastVDOP":null,"lastCharrgingStatus":0,"smsType":null,"pointsource":0,"sno":null,"cellTowerId":null,"data":null,"latLng":null},{"number":4,"accountID":"primecomforts","deviceID":"911227400023872","place":"State Highway 264, Maharashtra, India","status":1,"statusString":null,"requestTimestamp":"\/Date(1347906600000)\/","mobileNumber":null,"latitude":20.593684,"longitude":78.96288,"distance":1,"summary":null,"url":"Image/default-location-image.png","charrgingStatus":0,"lasttimestamp":"\/Date(1349955039000)\/","laststatusCode":61715,"lastlatitude":27.22787287,"lastlongitude":77.99955692,"lastspeedKPH":0,"lastheading":0,"lastaddress":"Agra, Uttar Pradesh,India","lastodometerKM":null,"stringDateTime":null,"lastVDOP":"21","lastCharrgingStatus":0,"smsType":null,"pointsource":0,"sno":null,"cellTowerId":null,"data":null,"latLng":null},{"number":5,"accountID":"primecomforts","deviceID":"911227400023872","place":"State Highway 264, Maharashtra, India","status":1,"statusString":null,"requestTimestamp":"\/Date(1347993000000)\/","mobileNumber":null,"latitude":20.593685,"longitude":78.96288,"distance":1,"summary":null,"url":"Image/default-location-image.png","charrgingStatus":0,"lasttimestamp":"\/Date(-62135596800000)\/","laststatusCode":0,"lastlatitude":0,"lastlongitude":0,"lastspeedKPH":0,"lastheading":0,"lastaddress":null,"lastodometerKM":null,"stringDateTime":null,"lastVDOP":null,"lastCharrgingStatus":0,"smsType":null,"pointsource":0,"sno":null,"cellTowerId":null,"data":null,"latLng":null},{"number":6,"accountID":"primecomforts","deviceID":"911227400023872","place":"233-277324079","status":1,"statusString":null,"requestTimestamp":"\/Date(1348425000000)\/","mobileNumber":null,"latitude":20.593684,"longitude":78.96288,"distance":1,"summary":null,"url":"Image/default-location-image.png","charrgingStatus":0,"lasttimestamp":"\/Date(-62135596800000)\/","laststatusCode":0,"lastlatitude":0,"lastlongitude":0,"lastspeedKPH":0,"lastheading":0,"lastaddress":null,"lastodometerKM":null,"stringDateTime":null,"lastVDOP":null,"lastCharrgingStatus":0,"smsType":null,"pointsource":0,"sno":null,"cellTowerId":null,"data":null,"latLng":null},{"number":7,"accountID":"primecomforts","deviceID":"911227400077050","place":"B-89,TEACHERS COLONY ,SAMAYPUR BADLI,DELHI","status":1,"statusString":null,"requestTimestamp":"\/Date(1348597800000)\/","mobileNumber":null,"latitude":20.593684,"longitude":78.96288,"distance":1,"summary":null,"url":"Image/default-location-image.png","charrgingStatus":0,"lasttimestamp":"\/Date(1360642473000)\/","laststatusCode":61715,"lastlatitude":28.63164532,"lastlongitude":77.34991008,"lastspeedKPH":0,"lastheading":-42.464634,"lastaddress":"National Highway 24 Bypass, Vaishali, Ghaziabad, Ghaziabad, Ghaziabad, Uttar Pradesh, 201010, India","lastodometerKM":null,"stringDateTime":null,"lastVDOP":"62","lastCharrgingStatus":0,"smsType":null,"pointsource":0,"sno":null,"cellTowerId":null,"data":null,"latLng":null}] 
```

**编辑2：**

```
string ConvertToJSON(List<beatWithCurrentStatus> receivePoints)
{
    JavaScriptSerializer jss1 = new JavaScriptSerializer();
    return jss1.Serialize(receivePoints);
} 
```

我应该如何通过地图中的标记？？？请帮忙..！我已经尝试了所有方法，但没有一个有效。但是，如果我对这些值进行硬编码，它会显示在地图上。

请帮忙.. ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:18:36.993

1.  的项目`ll`不是对象，您创建字符串（不能像对象一样访问）使用它来代替：

    ```
    ll[i] = {latLng:[JSONData[i].lat,JSONData[i].lng],data:JSONData[i].address};
    ```

2.  直接传递`ll`给标记的值属性，而不是作为数组的一项（`ll`已经是一个数组）

```
    标记：{
        值：ll，
        选项： {
            可拖动：假
        }
    }
```

这些是 2 个必需的修改，当它仍然不起作用时，您必须至少发布 JSONData

# sql - 这是为此报告编写 SQL 的最佳方式吗？

> ID：14827405
> 
> 赞同：5
> 
> 时间：2013-02-12T07:18:46.810
> 
> 标签：sql, sql-server-2008, count, group-by

我们有`orders`数据，我们需要`Weekly - Custom date Range of 7 Days`使用`SQL`. 该报告将显示每周`count`的订单。用户将选择一个`End Date`，我们需要根据该日期创建 12 个 DateRange 单位。例如，用户选择`1/24/2013`我们需要 12 点/单位为：

```
Point12 = End Date - 7 Days
Point11 = End Date - 14 Days
Point10 = End Date - 21 Days
Point9  = End Date - 28 Days
.
.
Point1  = End Date - X Days 
```

**我们的解决方案**：

我们计划创建一个临时表，该表将有 12 行。每行都会有类似的数据（我们将计算每个点的开始日期和结束日期）：

```
Point   StartDate           EndDate      TotalOrders
Point12  2013-01-24          2013-01-30   
Point11  2013-01-17          2013-01-23 
```

在此之后，我们将获得`count`每一行的订单。

**这是解决这个问题的好方法还是可以优化？**

**编辑：**

每周的 DateRange 将是一个`Custom date Range of 7 Days`.

![在此处输入图像描述](../Images/4ef7e28c282b2855523a12a53446c5fa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:22:07.193

鉴于这是 SQLServer，我建议使用表变量，而不是临时表。

另一种方法是在 CTE 中生成 12 行作为主查询的一部分，而不是在主查询之前生成所需的行（在表变量/临时表中）作为单独的步骤。这将减少所需的步骤总数，但会使主查询稍微复杂一些。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T07:25:20.597

为什么不只使用周作为分组因素？

```
SELECT
 WEEKOFYEAR(`date`) AS point,
 SUM(orders) AS order
FROM `tablename`
WHERE `date` BETWEEN `startdate` AND `enddate`
GROUP BY point 
```

# javascript - Javascript ForEach 函数在 IE 中不起作用

> ID：14827406
> 
> 赞同：2
> 
> 时间：2013-02-12T07:18:52.087
> 
> 标签：javascript, jquery, function, internet-explorer-8, foreach

我如何编写以下所有浏览器都支持的代码？因为似乎 IE8 不支持 forEach-Function ......

```
 digits.forEach( function( value, index ) {
    // create a span with initial conditions
    var span = $( '<span>', {
        'class': 'digit0',
        'data': {
            'current': 0,
            'goal' : value
        }
    } );
    // append span to the div#number
    span.appendTo( $( 'div#number' ) );
    // call countUp after interval multiplied by the index of this span
    setTimeout( function() { countUp.call( span ); }, index * interval );
} ); 
```

**在此处查看完整的代码**：http : [//jsfiddle.net/bBadM/](http://jsfiddle.net/bBadM/)（它不适用于所有浏览器）提前致谢。

问候，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T07:22:11.193

[MDN 文档`forEach`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)包括两个用于在实现早期 JS 版本的浏览器中使用的方法的实现。

我将在这里复制快速的（请参阅完整的链接）：

```
if ( !Array.prototype.forEach ) {
  Array.prototype.forEach = function(fn, scope) {
    for(var i = 0, len = this.length; i < len; ++i) {
      fn.call(scope, this[i], i, this);
    }
  }
} 
```

# magento - 将自定义 phtml /block 添加到注册页面 magento

> ID：14827409
> 
> 赞同：0
> 
> 时间：2013-02-12T07:19:19.467
> 
> 标签：magento, magento-1.7

嗨，我想使用 magento 将我的自定义 phtml 文件或代码添加到注册页面。我找到了注册代码，但不知道在哪里可以更新它。从 customer.xml 我得到了这个代码

```
<customer_account_create translate="label">
        <label>Customer Account Registration Form</label>
        <!-- Mage_Customer -->
        <remove name="right"/>
        <remove name="left"/>

        <reference name="root">
            <action method="setTemplate"><template>page/1column.phtml</template></action>
        </reference>
        <reference name="content">
            <block type="customer/form_register" name="customer_form_register" template="customer/form/register.phtml">
                <block type="page/html_wrapper" name="customer.form.register.fields.before" as="form_fields_before" translate="label">
                    <label>Form Fields Before</label>
                </block>
            </block>
        </reference>
</customer_account_create> 
```

我的块代码是

```
 <module_index_index>
        <reference name="content">
            <block type="module/module" name="module" template="module/module.phtml" />
        </reference>
    </module_index_index> 
```

我想在我网站的注册页面末尾显示我的页面。谢谢 adanace

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:55:06.800

我建议为您的模块创建一个 layout.xml 文件。

首先，您需要在模块的 config.xml 中定义此文件：

```
<frontend>
    <layout>
        <updates>
            <your_module>
                <file>your_module.xml</file>
            </your_module>
        </updates>
    </layout>
</frontend> 
```

然后在下面创建这个布局文件：design/frontend/base/defualt/layout

```
<?xml version="1.0" encoding="UTF-8"?>
<layout>
    <customer_account_create>
        <reference name="content">
            <block type="module/module" name="module" template="module/module.phtml" />
        </reference>
    </customer_account_create>
</layout> 
```

然后，这应该在注册页面的末尾添加您的模块。

# iphone - 从 nsmutablearray 中删除对象

> ID：14827411
> 
> 赞同：0
> 
> 时间：2013-02-12T07:19:30.807
> 
> 标签：iphone, nsmutablearray, xcode4.5

我正在做一个测验应用程序，其中我已将正确答案及其问题 ID 存储在 NSMutableArray 中。我将其显示在部分 tableView 中。现在如果我在同一部分中标记另一个答案，则必须删除 prevoius 和这个必须附加到阵列。但我无法得到它。

```
 NSMutableArray *cellSection = [self.finalarray objectAtIndex:indexPath.section];
    int n=[cellSection count];
    NSString *questionId=[[cellSection objectAtIndex:n-1]objectForKey:@"QId"];
 for (NSDictionary *dict in selectedOptionandQIdArray) {

        NSString *str=[dict valueForKey:@"QId"];

        [arr1 addObject:str];

    }

    BOOL isTheObjectThere = [arr1 containsObject:questionId];

    if(isTheObjectThere==YES)
    {
         //remove the prevoius answer and replace by the new answer for the same question id 
    }
 [selectedOptionsArray addObject:dictionary1];

    NSDictionary *dictinary2 =[[NSDictionary alloc] initWithObjectsAndKeys:questionId, @"QId",  nil];
    [selectedOptionsArray addObject:dictinary2];

    [selectedOptionandQIdArray addObject:selectedOptionsArray]; 
```

但`isTheObjectThere`总是' `NO`'，即使有相同的问题 ID。

如何删除以前的一个并用新的替换

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:21:08.773

```
id object = [[array objectAtIndex:0] retain];
[array removeObjectAtIndex:0];
[array insertObject:object atIndex:2]; 
```

使用这些行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:33:20.853

使用`replaceObjectAtIndex:withObject:`. 只需替换您的答案。就像这样

```
[selectedOptionsArray replaceObjectAtIndex:indexofrepacingElement withObject:@"newAnswer"]; 
```

# asp.net - 需要将多个 Fusion Chart 从后面的代码转换为图像

> ID：14827412
> 
> 赞同：0
> 
> 时间：2013-02-12T07:19:40.217
> 
> 标签：asp.net, fusioncharts

问题是，我需要按计划生成融合图并将其发送到邮件 ID。但就我的研发而言，融合图表具有在页面中呈现图形后导出为图像的功能。
我在 stackoverflow 中找到的另一个解决方案是[this](https://stackoverflow.com/questions/5003472/how-to-export-a-fusionchart-to-image-in-asp-net)。即使用`SWFToImage`来自bytescout 的dll。这个 dll 完成了我想要的工作。但问题是 dll 是一个仅在 32 位机器上工作的 activex 库。所以这个 dll 在我们的 64 位服务器上不起作用。甚至 bytescout 也没有解决方案。
我正在绘制这样的融合图表，

```
<asp:Literal ID="ltlChart" runat="server"></asp:Literal> 
```

并且像这样从后面的代码传递 XML 数据源，

```
ltlChart.Text = FusionCharts.RenderChartHTML("../fusionCharts/MSLine.swf", "", xmlData, "ChartTitle", "100%", "250", false, true, true); 
```

请任何人帮助我实现我的目标。任何帮助将非常感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:28:00.197

FusionCharts Labs 开发了一个 .NET 程序集，允许将 Flash 图表导出为图像，而无需在浏览器中呈现它们，现在它已经扩展了对 64 位应用程序的支持。

请注意，您必须安装 64 位 Flash Player。

要接收相同的内容，请在 support[@]fusioncharts.com 上给我们发送一封请求此程序集的邮件。

# oracle - Oracle 11.2 to_number 多个逗号

> ID：14827415
> 
> 赞同：1
> 
> 时间：2013-02-12T07:19:57.887
> 
> 标签：oracle, oracle11gr2, number-formatting

在 Oracle 11.2 中，是否有某种数字格式 nf 可以与 to_number 一起使用来解析包含数字和逗号的任意长度的 varchar2？

通过使用 regexp_replace，我可以在没有数字格式的情况下实现这一点，但我更喜欢仅使用数字格式来实现相同的目标。

例如，以下 2 个语句有效：

```
select to_number(regexp_replace('12,345', ',', '')) from dual;

select to_number(regexp_replace('1,234,567', ',', '')) from dual; 
```

但我更喜欢：

```
select to_number('12,345', nf) from dual;

select to_number('1,234,567', nf) from dual; 
```

其中`nf`是一个适用于两种语句的数字格式字符串。

如果我尝试`nf = '99,999'`，第一个语句有效，但第二个语句失败。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:04:23.187

如果数字格式太长，Oracle 不会抱怨，因此您可以使用具有足够位数的模型来处理您可以接收的最大数字：

```
SQL> select to_number('12,345',
  2  '999G999G999G999G999G999G999G999G999G999G999G999G999') from dual;

TO_NUMBER('12,345','999G999G999G999G999G999G999G999G999G999G999G999G999')
-------------------------------------------------------------------------
                                                                    12345

SQL> select to_number('1,234,567',
  2  '999G999G999G999G999G999G999G999G999G999G999G999G999') from dual;

TO_NUMBER('1,234,567','999G999G999G999G999G999G999G999G999G999G999G999G999')
----------------------------------------------------------------------------
                                                                     1234567

SQL> select to_number('999,999,999,999,999,999,999,999,999,999,999,999,999',
  2  '999G999G999G999G999G999G999G999G999G999G999G999G999') from dual;

TO_NUMBER('999,999,999,999,999,999,999,999,999,999,999,999,999','999G999G999G999
--------------------------------------------------------------------------------
                                                                      1.0000E+39 
```

我使用`G` [组分隔符](http://docs.oracle.com/cd/E11882_01/server.112/e10592/sql_elements004.htm#BABIGFBA)而不是固定逗号来支持全球化，但效果是一样的。

唯一需要注意的是，源编号必须具有正确的分组，以便它与它所具有的数字的格式完全匹配：

```
SQL> select to_number('1,2345',
  2  '999G999G999G999G999G999G999G999G999G999G999G999G999') from dual;

select to_number('1,2345',
                 *
ERROR at line 1:
ORA-01722: invalid number 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:30:43.357

为了这 ：

```
select to_number('1,234,567', nf) from dual; 
```

使用 nf = 9,999,999 将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T22:13:02.043

尽管我支持 Alex Poole 的回答，但这是解决问题的另一种粗略但有效的方法，它应该比执行正则表达式更好。

[SQL小提琴](http://sqlfiddle.com/#!4/f90e8/15)

**Oracle 11g R2 模式设置**：

```
CREATE TABLE table_of_numbers (
  example_num VARCHAR2(50)
)
/

INSERT INTO table_of_numbers (example_num)
VALUES ('12,345')
/

INSERT INTO table_of_numbers (example_num)
VALUES ('1,234,567')
/ 
```

**查询 1**：

```
SELECT TO_NUMBER(example_num, RPAD('9', LENGTH(example_num) - 1, '9')) fudge
FROM table_of_numbers 
```

**[结果](http://sqlfiddle.com/#!4/f90e8/15/0)**：

```
|   FUDGE |
-----------
|   12345 |
| 1234567 | 
```

如果您需要匹配逗号，那么您可以使用 INSTR 和 LPAD 做一些稍微复杂的操作，以确保生成正确的掩码。

# extjs - FF 10.0 版本中的 HtmlEditor 问题

> ID：14827423
> 
> 赞同：1
> 
> 时间：2013-02-12T07:20:10.600
> 
> 标签：extjs

我在我们的应用程序中使用 EXTJS 3.0。我在窗口内显示一个表单面板。我在表单面板中使用 HTML 编辑器。在 FF 3.6 中将光标放在编辑器中工作正常。但在 FF 10.0 中，它的抛出错误说

未捕获的异常：[异常...“组件返回失败代码：0x80004003 (NS_ERROR_INVALID_POINTER) [nsIDOMHTMLDocument.queryCommandState]”nsresult:“0x80004003 (NS_ERROR_INVALID_POINTER)”位置：“JS 框架 :: ext-all-debug.js :: ::第 58124 行“数据：无]

并且光标没有放在编辑器中。

版本可能有什么问题？

这是我在我的 java 脚本文件中编写的代码

**var test = new Ext.form.HtmlEditor({

```
 id:'testing',
    name:'tests',
    fieldLabel:'Test',
    width:200,
    height:150,
    allowBlank:false,
    enableColors : true,
        enableFont : false,
        enableFontSize: true,
        enableFormat: true,
        enableLists: true,
        enableSourceEdit: false,
        listeners: {
       sync: function(f){

     }
    } 
```

});** 请帮我摆脱这个浏览器问题

感谢和问候

宾杜

高半径

# css - 删除 ASP.NET MVC3 中的下拉列表向下箭头符号

> ID：14827427
> 
> 赞同：3
> 
> 时间：2013-02-12T07:20:26.527
> 
> 标签：css, asp.net-mvc-3, jquery-ui, jquery-plugins

我想将向下箭头符号隐藏在`@Html.DropDownList`. 如何覆盖默认的下拉列表样式。

请看下图。

![在此处输入图像描述](../Images/9ebc9866c10192bb6c572940e1e8fbdc.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T07:54:39.617

您可以使用 css 为您的下拉菜单设置自定义外观：

```
.customDropDown { -webkit-appearance: none; -moz-appearance: none; 
// add background image what you like
} 
```

并将此类添加到您的下拉列表中：

```
@Html.DropDownList("DropDownID", String.Empty, new {@class="customDropDown "} ) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T07:38:08.437

您可以从原生 CSS 覆盖默认样式，但它只支持 web-kit borwsers

```
.dropDown{
webkit-appearance:none
//and change style whatever you want
} 
```

# facebook - 链接的 FQL 查询现在仅返回公共链接

> ID：14827436
> 
> 赞同：1
> 
> 时间：2013-02-12T07:21:41.677
> 
> 标签：facebook, facebook-fql

在测试我正在构建的应用程序时，我注意到在使用 FQL 查询链接表后（通过简单调用[https://graph.facebook.com/fql?q=SELECT+url,+title+FROM+link+WHERE +owner=me()](https://graph.facebook.com/fql?q=SELECT+url,+title+FROM+link+WHERE+owner=me()) ) - 查询只返回公共链接。

我最近（今天）通过从批准的应用程序列表中删除我的应用程序并再次添加它来更新我的访问令牌。

有人能告诉我如何使用 FQL 访问用户共享的所有链接，而不仅仅是公共链接吗？我在哪里以及如何编辑我的应用程序的权限以实现此目的？

提前致谢

# html - 如何在 Web 应用中查找未使用的 CSS 规则？

> ID：14827444
> 
> 赞同：10
> 
> 时间：2013-02-12T07:22:13.110
> 
> 标签：html, css, windows

我有 10 多个 CSS 文件和大约 30 多个 HTML/JSP 文件。我想在所有 HTML/JSP 文件中逐个搜索 CSS 文件中的每个类/ID，以便可以删除未使用的规则。

有什么工具可以帮助解决这个问题吗？

我知道有 Chrome/FF 插件可以消除无用的 CSS 规则，但它们仅适用于单页。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T07:24:01.750

你可以使用[这个 Firefox 插件](https://addons.mozilla.org/en-US/firefox/addon/css-usage/)和[这个 Chrome 插件](http://meeech.amihod.com/very-useful-find-unused-css-rules-with-google)

他们似乎正是这样做的。

# syntax-highlighting - Jade 语法突出显示 Sublime Text 2 中的错误/错误

> ID：14827445
> 
> 赞同：4
> 
> 时间：2013-02-12T07:22:13.487
> 
> 标签：syntax-highlighting, sublimetext2, pug

此屏幕截图是在 Ubuntu 12.10 上拍摄的，但我的一个朋友在他的 MacBook Air 上也发生了这种情况。

看起来好像程序认为第一个单引号是字符串的结尾，而第二个单引号是新字符串的开头。奇怪的是：我在第 26 行之前没有单引号。

如果我删除第 26 行上的单词`chatbox`，则突出显示效果很好，直到第 27 行`'chatinput'`。将单引号更改为双引号也无济于事。

![玉语法高亮](../Images/70b89f0dddfc624743aff833d27e8eec.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T23:15:41.803

看来您正在使用包控制中的语法版本。

解决方案是从 GitHub 获取 Syntax Bundle 的[最新版本](https://github.com/miksago/jade-tmbundle/network)之一，我选择[了这个 fork](https://github.com/davidrios/jade-tmbundle/)，现在一切正常。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-20T15:10:26.530

我的意思是，在jade中声明一个javascript函数，它的形式是

```
script(type="text/javascript"). // a point at the end of the line
   var chatbox = document.getElementById("chatbox');
   var BASE_URL = '#{BASE_URL}' //Pass some environment variable
   var socket = io.connect(BASE_URL) 
```

# grid - 使用 selenium webdriver Grid 运行脚本时，脚本未按预期运行

> ID：14827448
> 
> 赞同：0
> 
> 时间：2013-02-12T07:22:41.087
> 
> 标签：grid, webdriver

我想一次在三个浏览器 IE、Chrome 和 Firefox 上运行相同的脚本（即并行）。我在`Testng.xml`文件中使用以下代码

```
 <test name="RunTests-1">
    <parameter name="browser" value="firefox" />     
    <parameter name="port" value="http://localhost:4444/wd/hub" />
    <classes>
        <class name="Com.TestSuite.class1"/>
    </classes>
</test>  
<test name="RunTests-2">
    <parameter name="browser" value="chrome" />     
    <parameter name="port" value="http://localhost:4444/wd/hub" />
    <classes>
        <class name="Com.TestSuite.class1"/>
    </classes>
</test>
<test name="RunTests-3">
    <parameter name="browser" value="internet explorer" />     
    <parameter name="port" value="http://localhost:4444/wd/hub" />
    <classes>
        <class name="Com.TestSuite.class1"/>
    </classes>
</test> 
```

在使用 TestNG 运行它时，它正在打开 3 个浏览器并执行脚本。但问题是在执行脚本时，它在一个浏览器中执行了两次脚本中的一些操作（如在文本字段中输入文本、单击按钮等），而在其他浏览器中根本不执行。请让我知道这可能是什么原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T12:34:06.157

当您将变量声明为`Static`. 它将被视为服务器端变量。在您启动三个浏览器时。它将`single driver instance`用于所有三个浏览器会话。仅出于这个原因，该操作就在同一个浏览器中重复执行。要解决此问题，请`Static keyword`从 Web 驱动程序定义中删除。

例如：

私有 WebDriver 驱动程序 = null;

# iphone - 如何将 UIControl 从 iPhone xib 重用到 iPad xib

> ID：14827452
> 
> 赞同：0
> 
> 时间：2013-02-12T07:22:53.323
> 
> 标签：iphone, ios, xcode, ipad, xib

我正在将我的应用程序转换为 Universal，所以我创建了带有 ~ipad.xib 扩展名的 iPad xib。现在我想在 iPad.xib 中使用 iPhone.xib 中使用的所有旧 UIControls 而无需重新创建和连接，有没有办法重用它？我已经检查了他提到的一个 SO 问题，他在 iPad 中复制并使用了它。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:49:30.023

首先备份您的应用程序。转到您的应用程序目标部分，然后右键单击那里，您将获得三个选项，例如**Duplicate**，**Delete**，**Project Editor Help** ....现在选择 Duplicate 它将显示如下图所示的警报。![在此处输入图像描述](../Images/ad97447b9d69d1209253d60914065328.png)现在选择**“复制并转换到 iPad”**。Xcode 将为 iPad 生成所有带有连接的 xib。将 iPad 的所有 xib 复制到原始应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:28:42.853

只需选择所有控件在新的 .Xib 中进行复制和粘贴。

# python - 如何在 django 视图的变量中使用 xml？

> ID：14827453
> 
> 赞同：0
> 
> 时间：2013-02-12T07:22:54.387
> 
> 标签：python, django

我在 PHP 中有以下内容，但需要在 django 视图中使用它。基本上这是针对 USAepay xml。我需要通过 HTTP 帖子发送它，如下所示：

`$result=$this->httpPost($url, array('xml'=>$data));`

我正在尝试在 django 的视图中获得以下替代方案。

```
$data = '<?xml version="1.0" encoding="UTF-8"?>' .
            '<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="urn:usaepay" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">' . 
            '<SOAP-ENV:Body>' .
            '<ns1:runCustomerTransaction>'.
            '<Token xsi:type="ns1:ueSecurityToken">' .
            '<ClientIP xsi:type="xsd:string">' . $_SERVER['REMOTE_ADDR'] . '</ClientIP>' .
            '<PinHash xsi:type="ns1:ueHash">' .
            '<HashValue xsi:type="xsd:string">' . $hash . '</HashValue>' .
            '<Seed xsi:type="xsd:string">' . $seed . '</Seed>' . 
            '<Type xsi:type="xsd:string">sha1</Type>' .
            '</PinHash>' .
            '<SourceKey xsi:type="xsd:string">' . $this->key . '</SourceKey>' .
            '</Token>' .
            '<CustNum xsi:type="xsd:integer">' . $CustNum . '</CustNum>'.
            '<PaymentMethodID xsi:type="xsd:integer">0</PaymentMethodID>'.
            '<Parameters xsi:type="ns1:CustomerTransactionRequest">'.
            '<Command xsi:type="xsd:string">Sale</Command>'.
            '<Details xsi:type="ns1:TransactionDetail">' . 
            '<Amount xsi:type="xsd:double">' . $this->xmlentities($this->amount) . '</Amount>' . 
            '<Description xsi:type="xsd:string">' . $this->xmlentities($this->description) . '</Description>'.
            '<Invoice xsi:type="xsd:string">' . $this->xmlentities($this->invoice) . '</Invoice>' .
            '<Currency xsi:type="xsd:string">484</Currency>'.
            '</Details>' .
            '</Parameters>'.
            '</ns1:runCustomerTransaction>'.
            '</SOAP-ENV:Body>' .
            '</SOAP-ENV:Envelope>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T05:57:54.863

我通过使用做到了

```
dataquick = '<?xml version="10" encoding="UTF-8"?>'+
    '<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemasxmlsoaporg/soap/envelope/" xmlns:ns1="urn:usaepay" xmlns:xsd="http://wwww3org/2001/XMLSchema" xmlns:xsi="http://wwww3org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemasxmlsoaporg/soap/encoding/" SOAP-ENV:encodingStyle="http://schemasxmlsoaporg/soap/encoding/">' +
    '<SOAP-ENV:Body>' +
    '<ns1:runCustomerTransaction>' +
    '<Token xsi:type="ns1:ueSecurityToken">' +
    '<ClientIP xsi:type="xsd:string">'+str(os.environ.get('REMOTE_ADDR'))+'</ClientIP>' +
    '<PinHash xsi:type="ns1:ueHash">' +
    '<HashValue xsi:type="xsd:string">'+str(UMhash)+'</HashValue>' + 
    '<Seed xsi:type="xsd:string">'+str(umSend)+'</Seed>' +
    '<Type xsi:type="xsd:string">sha1</Type>' +
    '</PinHash>' +
    '<SourceKey xsi:type="xsd:string">*******************</SourceKey>' +
    '</Token>' +
    '<CustNum xsi:type="xsd:integer">'+str(request.user.id)+'</CustNum>' +
    '<PaymentMethodID xsi:type="xsd:integer">0</PaymentMethodID>' +
    '<Parameters xsi:type="ns1:CustomerTransactionRequest">' +
    '<Command xsi:type="xsd:string">Sale</Command>' +
    '<Details xsi:type="ns1:TransactionDetail">'  +
    '<Amount xsi:type="xsd:double">499</Amount>'  +
    '<Description xsi:type="xsd:string"></Description>' +
    '<Invoice xsi:type="xsd:string"></Invoice>' +
    '<Currency xsi:type="xsd:string">484</Currency>' +
    '</Details>' +
    '</Parameters>' +
    '</ns1:runCustomerTransaction>' +
    '</SOAP-ENV:Body>' +
    '</SOAP-ENV:Envelope>'  
    #cursor.execute("INSERT INTO payments(customerNbr,transactionID,transactionType,authorizationID,cardHolderID,methodID,accountNumber,exchangeRate,transactionStatus,transactionResult,paymentDate,orderNumber,orderAmount,isRefunded,refundDate,refundStatus,RefundAmount,kountID,paymentGateway) VALUES (%s,%s,'Recurring',%s,%s,'0',%s,'',%s,%s,'','','',0,'','',0,0,'USAepay')",[request.user.id,parsed_results['UMrefNum'],parsed_results['UMauthCode'],parsed_results['UMcustnum'],UMcardinsert,parsed_results['UMstatus'],parsed_results['UMstatus']])
    headers = { 
    "xml": dataquick
    } 
```

# python-3.x - python3中的排列

> ID：14827455
> 
> 赞同：2
> 
> 时间：2013-02-12T07:22:56.120
> 
> 标签：python-3.x, itertools

我不知道如何获得排列以返回实际排列，而不是我尝试了很多不同的东西都无济于事。我使用的代码来自 itertools import permutations，然后是 permutations([1,2,3])。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:46:13.557

这可能无法回答您的问题（它似乎缺少“而不是”之后的部分），但从您的代码中，您可能看到的是`repr`迭代`itertools.permutations`器。您可以像访问普通列表一样遍历此对象以访问所有项目。如果要将其转换为列表，可以将其包装在`list`：

```
>>> from itertools import permutations
>>> permutations([1, 2, 3])
<itertools.permutations object at 0x1e67890>
>>> list(permutations([1, 2, 3]))
[(1, 2, 3), (1, 3, 2), (2, 1, 3), (2, 3, 1), (3, 1, 2), (3, 2, 1)] 
```

然而，如上所述，迭代器可以像普通列表一样被迭代（返回迭代器的好处是整个序列不会立即加载到内存中——而是“根据需要”加载）：

```
>>> for perm in permutations([1, 2, 3]):
...     print(perm)
... 
(1, 2, 3)
(1, 3, 2)
(2, 1, 3)
(2, 3, 1)
(3, 1, 2)
(3, 2, 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:48:32.997

`itertools.permutations`是一个生成器，这意味着您必须像这样使用它来从中检索结果：

```
for permutation in itertools.permutations([1,2,3]):
   do_stuff_with(permutation) 
```

或者将它们全部放在一个列表中：

```
list(itertools.permutations([1,2,3])) 
```

或者，不太方便：

```
generator = itertools.permutations([1,2,3])
generator.__next__() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-27T07:45:02.083

```
from itertools import permutations

#iteration
for p in permutations([1,2,3]):
    print(p) 
```

这应该可以完美地工作。

# php - 过滤查询结果

> ID：14827462
> 
> 赞同：0
> 
> 时间：2013-02-12T07:23:28.230
> 
> 标签：php, mysql

我使用类似这样的查询来获取导师和机构。

```
SELECT 
  t.tutor_id member_id,
  t.tutor_name member_name,
  t.tutor_code member_code,
  'tutor' AS TYPE 
FROM
  tutors t 
WHERE t.tutor_name LIKE '%jaya%' 
UNION
SELECT 
  t.institute_id,
  t.institute_name,
  t.institute_code,
  'institute' AS TYPE 
FROM
  institute i 
WHERE i.institute_name LIKE '%jaya%' 
```

此查询根据给定的关键字返回两个记录（导师和机构）。它为我工作。我的问题是，在从查询中选择所有记录后，我需要作为导师和机构单独保存记录。我在我的页面上使用了 2 个名为“tutors”和“institute”的按钮来过滤查询结果。所以现在我需要知道我是否需要为每个按钮使用 2 个不同的查询，或者如果不需要，我可以使用单个查询来执行此操作吗？

任何评论都非常感谢。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:56:11.890

如果您只想运行单个查询，则可以有单独的视图。

```
$type=$_POST['submit'];

if($type=='tutor')
{
  // show only columns from tutor table
}
else
{
 // show only columns from institute table
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:37:34.427

当一个按钮让假设导师被点击时，将两个参数发送到 php 函数

```
function searchTutors($type , $keyword)
{
    if($type == 'tutors')
    {
        //tutors query here
    }else{
        //institutions query here
    }
    return $your_query_result;
} 
```

# javascript - 在我的 ajax 方法中的属性列表之后缺少 }///

> ID：14827463
> 
> 赞同：0
> 
> 时间：2013-02-12T07:23:33.110
> 
> 标签：javascript, ajax, jquery

```
function LoadAdvListPage() {

    $.ajax({
        type: 'post',
        url: <%= generatecharts %> ,
        data: {

        },
        success: function (data) {
            alert("success");
        }
    });
}

$(document).ready(function () {
    LoadAdvListPage();
}); 
```

以上是我的调用 Ajax 方法的 java 脚本函数，但不知道它的抛出错误是怎样的`missing } after property list`

任何人都可以指导我这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T07:25:10.350

我不知道您发布的代码上方是否有某些内容，但这里有一个额外的}

```
$.ajax({
    type : 'post',
    url : <%=generatecharts%>,
    data : {

    },
    success : function(data) {
        alert("success");
    }
});
}   <------ this one you don't need if you don't have opening { somewhere up 
```

编辑：

所以上面有开口`{`。尝试像@Yuriy Rozhovetskiy 在评论中写的那样做，它是 url 参数，所以肯定它不应该是 json，但`""`仍然需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:26:25.903

你应该试试这个L

```
$(document).ready(function(){
    LoadAdvListPage();
    function LoadAdvListPage() {
        $.ajax({
            type : 'post',
            url : <%=generatecharts%>,
            data : {

            },
            success : function(data) {
                alert("success");
            }
        });
    };

}); 
```

# asp.net-mvc-3 - 在 MVC3 中使用“OnlyShowFivePagesAtATime”时如何更改分页列表的链接名称？

> ID：14827464
> 
> 赞同：0
> 
> 时间：2013-02-12T07:23:37.393
> 
> 标签：asp.net-mvc-3

大家好，我正在尝试更改名称“LinkToFirstPageFormat”或“LinkToPreviousPageFormat”并尝试使用“OnlyShowFivePagesAtATime”

这是我的 PagedListPager

```
@Html.PagedListPager(Model.video, page => Url.Action("video_play", new { page = page }), new PagedListRenderOptions { LinkToFirstPageFormat = "<< Next", LinkToPreviousPageFormat = "<", LinkToNextPageFormat = ">", LinkToLastPageFormat = "Last >>" }) 
```

好吧，此时一切都很好，但是当我在这里尝试使用渲染选项的“OnlyShowFivePagesAtATime”属性时，如下所示，我得到“没有重载方法 PagedlistPager 需要 4 个参数”

`@Html.PagedListPager(Model.video, page => Url.Action("video_play", new { page = page }), new PagedListRenderOptions { LinkToFirstPageFormat = "<< Next", LinkToPreviousPageFormat = "<", LinkToNextPageFormat = ">", LinkToLastPageFormat = "Last >>" },PagedListRenderOptions.OnlyShowFivePagesAtATime)`

那么如何使用 PagedListRenderOptions.OnlyShowFivePagesAtATime 更改链接名称？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T08:08:02.677

好吧，如果有人遇到同样的问题，我已经找到了解决方案，您可以使用“MaximumPageNumbersToDisplay=5”属性，如下所示

```
@Html.PagedListPager(Model.video, page => Url.Action("video_play", new { page = page }), new PagedListRenderOptions { LinkToFirstPageFormat = String.Format("<< Next"), LinkToPreviousPageFormat = String.Format("<"), LinkToNextPageFormat = String.Format(">"), LinkToLastPageFormat = String.Format("Last >>"),MaximumPageNumbersToDisplay=5 }) 
```

# delphi - Delphi 中的泛型会导致性能瓶颈吗？

> ID：14827475
> 
> 赞同：9
> 
> 时间：2013-02-12T07:24:42.560
> 
> 标签：delphi, generics, delphi-xe3

最近我一直在开发一个应用程序，并希望拥有几种类型的集合。我不想为它的类型声明和实现一个新的集合类。所以，我想使用泛型，但不确定泛型与普通类型实例相比的性能。性能是我关注的主要问题。我的应用程序是时间紧迫的，甚至失去 100 毫秒也是不可取的。

我正在使用德尔福 XE3

例如：

```
ICollectionItem = interface
  function GetID : string;
  property ID : string read GetId;
end;

TGenericCollection<T: ICollectionItem> = class
  function Add(T) : Integer;
end; 
```

相比

```
TSomeClass = class(TInterfacedObject, ICollectionItem)
  function GetId : string;
end;

TSomeClassList = class
  function Add(item : TSomeClass) : Integer;
end; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T07:42:36.687

# 无性能瓶颈

Delphi 泛型已*编译*。*编译器在编译*时就知道具体的类型，它会尽力为您提供最好的代码。在运行时检查生成的代码时，通用代码和非通用代码之间应该没有区别。

使用泛型获得更好的代码的机会很大，因为您更有可能使用现成的、高效的、类型安全的数据结构。当你自己滚动时，你可能会偷工减料，因为老实说，编写排序算法、高效分配等*很难*。

# javascript - 按钮上的坐标单击javascript

> ID：14827477
> 
> 赞同：0
> 
> 时间：2013-02-12T07:24:52.053
> 
> 标签：javascript, jquery, html

谁能告诉我哪里错了。我想在点击时获取按钮的坐标，但它给了我错误

**js/main.js (1) :ReferenceError: 找不到变量: $**

按钮：

```
 <input type="button" style="margin-left: 80px;margin-top: 80px;"  id="theButton"  value="A button" /> 
```

J查询

```
 var jq = $('#theButton');
 var position = jq.offset();
 alert('x: ' + position.left + ', y: ' + position.top); 
```

它没有向我展示任何东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:27:14.700

试试这个代码：

```
$(document).ready(function(){
    var jq = $('#theButton');
    var position = jq.offset();
    alert('x: ' + position.left + ', y: ' + position.top);
}); 
```

`jquery`在添加您的喜欢之前，在头部部分添加任何版本的first `main.js` ：

`<script src="http://code.jquery.com/jquery-1.8.3.js"></script>`

检查小提琴[http://jsfiddle.net/PSpvT/](http://jsfiddle.net/PSpvT/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:28:11.913

而不是下面的：

```
var jq = $('#theButton'); 
```

尝试

```
var jq = document.getElementById("theButton"); 
```

**jQuery 解决方案：**

```
$(function() {
  var jq = $('#theButton');
 var position = jq.offset();
 alert('x: ' + position.left + ', y: ' + position.top);
}); 
```

# ruby-on-rails - 寻找将 Ruby 1.8.7 Web 应用程序迁移到 Ruby 1.9.3 的步骤

> ID：14827478
> 
> 赞同：0
> 
> 时间：2013-02-12T07:24:54.277
> 
> 标签：ruby-on-rails, ruby, migration, ruby-on-rails-2, ruby-1.9.3

我在 Rails 应用程序上有一个很大的旧红宝石

```
ruby version -  1.8.7 (2011-06-30 patchlevel 352)

rails version - 2.3.16 
```

**目前没有迁移 rails 版本的计划**

据我所知，ruby 1.9.x 的性能比 1.8.7 快 2 倍

**问题：**

1) 我想知道 rails 2.3.16 是否与 ruby​​ 1.9.3-p385 完全兼容？

2）我正在寻找仅将 ruby​​ 1.8.7 迁移到 ruby​​ 1.9.3 而不将 rails 2.3.x 升级到 rails 3.xx 的基本通用步骤

3) 我想知道迁移的复杂程度和问题？

**笔记：**

我正在寻找那些真正参与 ruby​​ 应用程序从 1.8.7 迁移到 1.9.3 并坚持使用 rails 2.3.x 的人的答案、建议、评论和评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:30:04.190

我找到了这个迁移指南，也许它会给你答案。[http://developer.uservoice.com/blog/2012/03/04/how-to-upgrade-a-rails-2-3-app-to-ruby-1-9-3/](http://developer.uservoice.com/blog/2012/03/04/how-to-upgrade-a-rails-2-3-app-to-ruby-1-9-3/)

从我读到的内容来看，这可能会让人很头疼，因为 rails 2.3 不支持 ruby​​ 1.9。

如果你能做到，我建议无论如何迁移你的rails，至少3.0（在资产管道之前）：它仍然会让人头疼（就像任何大型迁移一样），但是有像rails_upgrade这样的工具意味着促进这一过程。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-12T15:32:22.810

[使用 Rbenv 将 Rails 应用程序更新](http://a-developer-life.blogspot.in/2012/01/migrate-rails-application-to-latest.html)到最新的 Ruby 版本。

# java - 以流形式获取 map-reduce 作业的结果

> ID：14827485
> 
> 赞同：1
> 
> 时间：2013-02-12T07:25:16.293
> 
> 标签：java, hadoop, stream, mapreduce, reduce

我正在用 Java 编写 map-reduce 作业我想知道是否可以将作业的输出作为流（可能是输出流）而不是物理输出文件来获取。我的目标是将流用于另一个应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:17:30.093

您可以编写自定义输出格式并将该写入用于您想要的任何流。不一定是文件。请参阅[本](http://developer.yahoo.com/hadoop/tutorial/module5.html#outputformat)教程，了解如何编写自定义输出格式。

否则，您可以使用 Hadoop Streaming API。看看[这里](http://www.igvita.com/2009/06/01/easy-map-reduce-with-hadoop-streaming/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:34:18.377

我不认为你可以使用 Apache-Hadoop 做到这一点。它被设计为在分布式系统中工作，而 AFAIK 提供了发出的方式`output stream`将违背目的，因为系统将如何决定要发出的*流*，即哪个减速器！您可以写入 flat-file/DB/amazon-s3 等，但也许您不会得到*stream*。

# ios - iOS 中的 KMLViewer

> ID：14827488
> 
> 赞同：0
> 
> 时间：2013-02-12T07:25:26.463
> 
> 标签：ios, coordinates, kml, polygon

我正在测试 Apple 的 KMLViewer 软件，我想知道是否可以使用它来查找 x,y 坐标所属的国家/地区。我的 KML 文件包含所有国家/地区的所有数据。（多边形，覆盖......）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:16:41.677

如果您已经创建了`MKPolygon`叠加层，并且您`MKMapView`已经在 中创建了`MKPolygonView`视图`mapView:viewForOverlay:`，并且您只是想查看特定的点击手势`MKPolygonView`，我认为您可以执行以下操作：

```
- (void)handleTap:(UITapGestureRecognizer *)gesture
{
    BOOL success = NO;

    CGPoint location = [gesture locationInView:self.mapView];
    CLLocationCoordinate2D coordinate = [self.mapView convertPoint:location toCoordinateFromView:self.mapView];
    MKMapPoint mapPoint = MKMapPointForCoordinate(coordinate);

    for (id<MKOverlay> overlay in self.mapView.overlays)
    {
        MKOverlayView *overlayView = [self.mapView viewForOverlay:overlay];
        if ([overlayView isKindOfClass:[MKPolygonView class]])
        {
            MKPolygon *polygon = (MKPolygon *)overlay;
            MKPolygonView *polygonView = (MKPolygonView *)overlayView;
            CGPoint polygonViewPoint = [polygonView pointForMapPoint:mapPoint];
            if (CGPathContainsPoint([polygonView path], NULL, polygonViewPoint, NO))
            {
                NSLog(@"Overlay '%@' contains point %@", polygon.title, NSStringFromCGPoint(location));
                success = YES;
                break;
            }
        }
    }

    if (!success)
        NSLog(@"No overlays contained point %@", NSStringFromCGPoint(location));
} 
```

# java - 地图 - 固定迭代顺序

> ID：14827489
> 
> 赞同：2
> 
> 时间：2013-02-12T07:25:29.317
> 
> 标签：java, dictionary, iteration

我们可以从Java**中每次都固定的**`Map`某种顺序或顺序中获取数据吗？

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T07:27:16.343

好吧，在*某些*地图中，您可以。例如，[`SortedMap`](http://docs.oracle.com/javase/7/docs/api/java/util/SortedMap.html)(eg [`TreeMap`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)) 的任何实现都将返回按键顺序排序的条目（可能根据自定义比较器）——当然，这对添加和获取条目的复杂性有影响。

然后[`LinkedHashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html)将始终按插入顺序返回条目。

但是，如果您说的是普通话[`HashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)-不，您不能依赖订购。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:26:40.007

您可以使用`LinkedHashMap`这是`Map`接口的有序实现。**

# php - 无法从贝宝 IPN 沙箱获得响应

> ID：14827497
> 
> 赞同：3
> 
> 时间：2013-02-12T07:26:01.390
> 
> 标签：php, paypal, paypal-ipn

几天前突然停止接收来自贝宝的IPN消息。我写了下面的代码

```
$url_parsed=parse_url('https://www.sandbox.paypal.com/cgi-bin/webscr');
$post_string = '';    
foreach ($_POST as $field=>$value) { 
    $post_string .= $field.'='.urlencode(stripslashes($value)).'&'; 
}
$post_string.="cmd=_notify-validate";
$fp = fsockopen($url_parsed['host'],"80",$err_num,$err_str,30);

$myFile = "testpaypal.txt";

$fh = fopen($myFile, 'w') or die("can't open file");
$stringData = $post_string;
fwrite($fh, $stringData);
fwrite($fh, "------------");

if(!$fp){
    return false;
} else {

    fputs($fp, "POST $url_parsed[path] HTTP/1.0\r\n"); 
    fputs($fp, "Host: $url_parsed[host]\r\n"); 
    fputs($fp, "Content-type: application/x-www-form-urlencoded\r\n"); 
    fputs($fp, "Content-length: ".strlen($post_string)."\r\n"); 
    fputs($fp, "Connection: close\r\n\r\n"); 
    fputs($fp, $post_string . "\r\n\r\n");      
    while(!feof($fp)) 
    { 
        $ipn_response .= fgets($fp, 1024); 
    } 
    fclose($fp);
    if (eregi("VERIFIED",$ipn_response)) {
        fwrite($fh, "VERIFIED");
        return true;
    } else {
        fwrite($fh, "UNVERIFIED");
        return false;
    }
}
    fclose($fh); 
```

此代码将 err_num 返回到“ **0** ”以及当我在“fclose($fp);”之后打印 $ipn_response 时 它打印的行“ **HTTP/1.0 302 Found Location: [https://www.sandbox.paypal.com](https://www.sandbox.paypal.com) Server: BigIP Connection: close Content-Length: 0** ”

但无法在 $ipn_respnse 中获得“VERIFIED”。

我已经尝试了所有可能的方法，例如使用“ssl://sandbox.paypal.com”更改解析 url 以及网络上建议的所有其他解决方案。

自从过去三天以来，我一直被困在这个问题上。所以，请帮帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T15:16:12.097

您应该通过 SSL 连接。尝试改变这个：

```
$fp = fsockopen($url_parsed['host'],"80",$err_num,$err_str,30); 
```

对此：

```
$fp = fsockopen("tls://" . $url_parsed['host'],"443",$err_num,$err_str,30); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:37:41.197

我也曾为这个问题而苦苦挣扎。它完全让我发疯！！！问题是 Hetzner（主机所在的位置）由于某种原因阻止了 PayPal IP。在这种情况下，当您查看 PayPal 帐户中的 IPN 历史记录时，您应该会看到 IPN 已停止从某个日期发送通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T08:12:51.750

尝试将 parse_url ( [https://www.paypal.com/cgi-bin/webscr](https://www.paypal.com/cgi-bin/webscr) ) 更改为沙盒 url ( [https://sandbox.paypal.com/cgi-bin/webscr](https://sandbox.paypal.com/cgi-bin/webscr) )。

接下来，检查您的服务器是否已启用 openssl 以使用 phpinfo() 函数接收来自 HTTPS 的响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T23:28:05.707

在来自 PayPal 的消息中：

> 为了提高我们网站的性能、可扩展性和可用性，我们将扩大 www.paypal.com 的 IP 地址数量。我们在 2011 年 10 月 18 日的公告中宣布了这一点。作为此次扩展的一部分，我们将于 2013 年 2 月 1 日停止对 HTTP 1.0 协议的支持...

据说可以在[http://www.paypal.com/pdt](http://www.paypal.com/pdt)和[http://www.paypal.com/ipn找到更多信息](http://www.paypal.com/ipn)

我在您的代码中注意到：

```
fputs($fp, "POST $url_parsed[path] HTTP/1.0\r\n"); 
```

您仍在使用 HTTP 1.0

我不知道这是否会解决您的问题，但如果您仍然遇到问题，希望它会有所帮助。

# php - Paypal 无效商户配置错误

> ID：14827506
> 
> 赞同：0
> 
> 时间：2013-02-12T07:26:34.963
> 
> 标签：php, paypal-sandbox

我正在使用 PayPal 沙盒环境来测试我的网站的付款。目前我正在使用 PayPal pro (dodirectpayment) 方法。我使用 PayPal pro 选项在 PayPal 发送箱上创建了一个帐户，即使我收到了无效的服务器配置错误。

我得到的错误是：

```
 10501 invalid merchant configuration. 
```

直到现在我还没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-11T06:53:02.680

只需登录到您的 developer.paypal.com 帐户

1.  转到应用程序 -> 沙盒帐户
2.  单击要升级到 Pro 的任何业务类型帐户，然后单击“个人资料”
3.  应该有一个升级到专业选项，单击它并启用贝宝专业付款。

![在此处输入图像描述](../Images/f6b70f2e3f66e2eec694bd921d57adbc.png)

它将帐户类型更改为 Business-Pro。现在您可以获取测试 API 凭据并进行测试。

它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:16:43.510

此错误通常意味着您没有在您尝试测试的帐户上启用网站付款专业版。在某些情况下，您可以登录特定帐户，然后尝试添加/注册它。您可以尝试创建另一个预配置帐户，看看它是否在新帐户上启用。另一种选择是联系 PayPal MTS，看看他们是否也可以在您的帐户上为您启用此功能。目前，沙盒存在一些问题，导致无法在某些帐户上正确设置。

# linux - 当 pthread_create() 返回时，新线程是否存在？

> ID：14827509
> 
> 赞同：1
> 
> 时间：2013-02-12T07:26:43.123
> 
> 标签：linux, pthreads

我的应用程序使用 pthread_create() 创建了多个线程，然后尝试使用 pthread_kill(threadId, 0) 验证它们的存在。pthread_kill 每隔一段时间就会失败，并显示“没有这样的进程”......

会不会，我在 pthread_create之后*太早*调用 pthread_kill 了？我以为 pthread_create() 返回的 threadId 立即有效，但似乎并非总是如此......

我确实检查了 pthread_create() 本身的返回值——它没有失败......这是代码片段：

```
 if (pthread_create(&title->thread, NULL,
        process_title, title)) {
        ERR("Could not spawn thread for `%s': %m",
            title->name);
        continue;
    }
    if (pthread_kill(title->thread, 0)) {
        ERR("Thread of %s could not be signaled.",
            title->name);
        continue;
    } 
```

有时我会收到有关线程的消息，但无法发出信号...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:37:13.560

这确实是一个实施问题。该线程*可能*存在，或者它可能仍处于初始化状态，`pthread_kill`尚未生效。

如果您*真的*想验证线程是否已启动并正在运行，请将某种形式的线程间通信放在线程函数本身中，而不是依赖于底层细节。

这可以像一个数组一样简单，主线程将其初始化为某个对象，线程函数将其设置为其他对象作为其第一个操作。类似的东西（显然是伪代码）：

```
array running[10]

def threadFn(index):
    running[index] = stateBorn
    while running[index] != stateDying:
        weaveYourMagic()
    running[index] = stateDead
    exitThread()

def main():
    for i = 1 to 10:
        running[i] = statePrenatal
        startThread (threadFn, i)
    for i = 1 to 10:
        while running[i] != stateBorn:
            sleepABit()

    // All threads are now running, do stuff until shutdown required.

    for i = 1 to 10:
        running[i] = stateDying

    for i = 1 to 10:
        while running[i] != stateDead:
            sleepABit()

    // All threads have now exited, though you could have
    // also used pthread_join for that final loop if you
    // had the thread IDs. 
```

从上面的代码中，您实际上使用`running`状态来控制主线程何时知道所有其他线程正在做某事，*并*在必要时关闭线程。

# android - SD 卡已插入或设备安装为磁盘

> ID：14827513
> 
> 赞同：0
> 
> 时间：2013-02-12T07:27:02.083
> 
> 标签：android, android-sdcard

在我的应用程序中，我正在录制语音然后播放，但是当我的设备没有 SD 卡或我的设备连接到我的计算机（仅安装为磁盘驱动器）时似乎出现了一些问题。每当我尝试在这两种情况下记录某些内容时，我的应用程序就会关闭。

**第一种情况**（即没有 SD 卡时）：-

```
Boolean isSDPresent = android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED); 
```

**使用此处理**案例 1 。****但是当我的设备安装为 disk 时**，我该如何处理**第二种情况**（即）。**

 ****我浏览了各种链接，但没有得到我想要的。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:40:02.597

试试这个：

```
String s = "";
try {
Process process = new ProcessBuilder().command("mount")
        .redirectErrorStream(true).start();

process.waitFor();

InputStream is = process.getInputStream();
byte[] buffer = new byte[1024];
while (is.read(buffer) != -1) {
    s = s + new String(buffer);
}
is.close();
} catch (Exception e) {
e.printStackTrace();
}

String[] lines = s.split("\n");
for(int i=0; i<lines.length; i++) {
if(-1 != lines[i].indexOf(path[0]) && -1 != lines[i].indexOf("vfat")) {
    String[] blocks = lines[i].split("\\s");
    for(int j=0; j<blocks.length; j++) {
        if(-1 != blocks[j].indexOf(path[0])) {
            //Test if it is the external sd card.
        }
    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:07:41.990

嘿，我刚刚得到了答案：我们可以将这些常量用于第二种情况，也可以用于第一种情况。解决方案的链接。 [http://developer.android.com/reference/android/os/Environment.html](http://developer.android.com/reference/android/os/Environment.html) 谢谢****

# c - 我将如何合并这两个数组？C

> ID：14827514
> 
> 赞同：0
> 
> 时间：2013-02-12T07:27:05.707
> 
> 标签：c, arrays, merge

我正在做一个学校作业，我无法弄清楚如何合并这两个数组。我必须将每个数组的一半合并到第三个数组中。我正在转动轮胎，我想我在想我必须做什么。我不想浪费你的时间来解释我尝试过的所有事情。任何帮助将不胜感激，如果您发布任何代码，您能否向我解释它在做什么，因为我想了解正在发生的事情（尽可能）提前谢谢！

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#define SIZE 254    

int main()
{ 
```

使用用户输入在此处捕获字符串

```
 char string_1[SIZE];
    printf( "Please enter a long string: " );
    fgets ( string_1, SIZE, stdin ); 
```

获取字符串长度以计算字节大小

```
 size_t ln = strlen(string_1) - 1;
    if (string_1[ln] == '\n')
        string_1[ln] = '\0'; 
```

重复...

```
 char string_2[SIZE];
    printf( "Please enter a long string: " );
    fgets ( string_2, SIZE, stdin );
    size_t ln2 = strlen(string_2) - 1;
    if (string_1[ln2] == '\n')
        string_1[ln2] = '\0'; 
```

打印两个字符串的字节大小。

```
 printf("String 1 is %zu bytes long, and String 2 is %zu bytes long", ln, ln2); 
```

我想连接

```
 return 0;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:46:00.967

检查这个使用 strncpy 的代码

```
char string_3[2*SIZE + 1];    
strncpy(string_3, string_1, strlen(string_1)/2);
string_3[strlen(string_1)/2] = '\0';
strncpy((string_3 + strlen(string_3)), string_2, strlen(string_2)/2);
string_3[strlen(string_1)/2 + strlen(string_2)/2] = '\0'; 
```

# javascript - 如何在 jQuery Raty 中获取选定的星值

> ID：14827519
> 
> 赞同：3
> 
> 时间：2013-02-12T07:27:15.770
> 
> 标签：javascript, jquery

我正在使用[jQuery Raty](http://wbotelhos.com/raty/)插件，它是一个星级插件，它运行良好。

这是我的代码

```
 $('#star').raty({
            path: '/Content/RatingPlugin/',
            numberMax: 5,
            score: function () {
                return $(this).attr('data-score');
            }
        }); 
```

**HTML**

```
<div id="star" data-score="@Model.Company.Rating"></div> 
```

现在有两个问题，假设当我的页面加载`@Model.Company.Rating`值是`4`它会显示 4 颗星，哪个是正确的，但是如果有人点击第三颗星，它将关闭第 4 颗星，然后只有 3 颗星会亮。我希望如果用户单击任何星，然后在 javascript 中我得到该星的值并将其存储在数据库中，但它不应该对用户产生影响，我的意思是在单击用户数量`on stars`后将保持不变。

如果您需要任何其他详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-06-03T15:07:33.780

初始化对象后，您可以调用`.raty('score')`以获取分数的值。如果未设置，则该值将是未定义的。

```
var currentScore = $('#star').raty('score'); 
```

文档：[http ://wbotelhos.com/raty#functions](http://wbotelhos.com/raty#functions)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T07:45:00.217

[http://jsfiddle.net/DerekL/bp2mW/18/](http://jsfiddle.net/DerekL/bp2mW/18/)

```
$('#star').raty({
    score: 3,                                                    //default score
    starOn: "http://wbotelhos.com/raty/lib/img/star-on.png",
    starOff: "http://wbotelhos.com/raty/lib/img/star-off.png",
    readOnly: true                                               //read only
});

$("#star > img").click(function(){
    var score = $(this).attr("alt");                             //record clicked
    alert(score);                                                // value of the
    //save to database                                              star
}); 
```

了解有关`readonly`插件[文档的](http://wbotelhos.com/raty/#readOnly)更多信息。

# java - 在 android 应用程序中阅读 pdf

> ID：14827525
> 
> 赞同：0
> 
> 时间：2013-02-12T07:27:46.577
> 
> 标签：java, android

我正在制作一个应用程序，它需要在不使用任何第三方应用程序的情况下在 android 应用程序中打开 pdf。我也不想在 webview 中查看我的 pdf。为此，我使用 PdfViewer.jar 并制作了如下代码。

爪哇：

```
 public class MainActivity extends ListActivity{

        public class First extends ListActivity {

            String[] pdflist;
            File[] imagelist;
            @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                //setContentView(R.layout.main);

                File images = Environment.getExternalStorageDirectory();
                imagelist = images.listFiles(new FilenameFilter() {
                    public boolean accept(File dir, String name) {
                        return ((name.endsWith(".pdf")));
                    }
                });
                pdflist = new String[imagelist.length];
                for (int i = 0; i < imagelist.length; i++) {
                    pdflist[i] = imagelist[i].getName();
                }
                this.setListAdapter(new ArrayAdapter<String>(this,
                        android.R.layout.simple_list_item_1, pdflist));
            }

            protected void onListItemClick(ListView l, View v, int position, long id) {
                super.onListItemClick(l, v, position, id);
                String path = imagelist[(int) id].getAbsolutePath();
                openPdfIntent(path);
            }

            private void openPdfIntent(String path) {
                try {
                    final Intent intent = new Intent(First.this, Second.class);
                    intent.putExtra(PdfViewerActivity.EXTRA_PDFFILENAME, path);
                    startActivity(intent);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }}

Second.java

public class Second extends PdfViewerActivity 
{

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
}

public int getPreviousPageImageResource() {
    return R.drawable.left_arrow;
}

public int getNextPageImageResource() {
    return R.drawable.right_arrow;
}

public int getZoomInImageResource() {
    return R.drawable.zoom_in;
}

public int getZoomOutImageResource() {
    return R.drawable.zoom_out;
}

public int getPdfPasswordLayoutResource() {
    return R.layout.pdf_file_password;
}

public int getPdfPageNumberResource() {
    return R.layout.dialog_pagenumber;
}

public int getPdfPasswordEditField() {
    return R.id.etPassword;
}

public int getPdfPasswordOkButton() {
    return R.id.btOK;
}

public int getPdfPasswordExitButton() {
    return R.id.btExit;
}

public int getPdfPageNumberEditField() {
    return R.id.pagenum_edit;
}
} 
```

我也在 android 清单中添加了我的 second.java。但我的 logcat 显示以下错误。M 没有收到错误

日志猫：

```
02-12 09:23:50.408: E/ActivityThread(713): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d8b368 that was originally bound here
02-12 09:23:50.408: E/ActivityThread(713):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
02-12 09:23:50.408: E/ActivityThread(713):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
02-12 09:23:50.408: E/ActivityThread(713):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
02-12 09:23:50.408: E/ActivityThread(713):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
02-12 09:23:50.408: E/ActivityThread(713):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
02-12 09:23:50.408: E/ActivityThread(713):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
02-12 09:23:50.408: E/ActivityThread(713):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
02-12 09:23:50.408: E/ActivityThread(713):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
02-12 09:23:50.408: E/ActivityThread(713):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
02-12 09:23:50.408: E/ActivityThread(713):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
02-12 09:23:50.408: E/ActivityThread(713):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
02-12 09:23:50.408: E/ActivityThread(713):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
02-12 09:23:50.408: E/ActivityThread(713):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
02-12 09:23:50.408: E/ActivityThread(713):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
02-12 09:23:50.408: E/ActivityThread(713):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
02-12 09:23:50.408: E/ActivityThread(713):  at java.lang.Thread.run(Thread.java:856)
02-12 09:23:50.455: E/StrictMode(713): null 
```

有帮助吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:48:57.233

在处理 pdf 逻辑的应用程序中使用适当的库。在您自己的应用程序中使用库时，不会启动其他应用程序来查看/修改 pdf。

查看[https://stackoverflow.com/questions/4665957/pdf-parsing-library-for-android](https://stackoverflow.com/questions/4665957/pdf-parsing-library-for-android)以获取可用 pdf 库的摘要。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-12T09:56:26.647

```
Use following code. But PDF viewer application must present on device.

 File pdfFile = new File(Environment.getExternalStorageDirectory()+ "/video/"+filePath); 
            if(pdfFile.exists()) 
            {
                Uri path = Uri.fromFile(pdfFile); 
                Intent pdfIntent = new Intent(Intent.ACTION_VIEW);
                pdfIntent.setDataAndType(path, "application/pdf");
                pdfIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

                try
                {
                    startActivity(pdfIntent);
                }
                catch(ActivityNotFoundException e)
                {
                    Toast.makeText(this, "No Application available to view pdf", Toast.LENGTH_LONG).show(); 
                } 
```

# ios - TableViewController 调用 Parser 消息但不起作用

> ID：14827526
> 
> 赞同：1
> 
> 时间：2013-02-12T07:27:49.153
> 
> 标签：ios, objective-c, rss-reader

我正在编写一个 XML 提要阅读器，而我的 viewController 没有正确地向解析器发送消息。

我在 parseFeedWithResults 消息中有一个未打印的打印语句，并且项目在调用后仍然为空。

我什至在我制作的解析器类中制作了一条虚拟消息，它只会在调用时打印一些东西，而且也不打印。

有什么问题？

```
- (void)viewDidLoad
    {
        NSLog(@"at viewDidLoad");
        [super viewDidLoad];
        self.title = @"Feeds";
        [self loadItems];
        [parser testMessage: kFeedURL];
    }

    - (void)loadItems
    {
        NSLog(@"At loadItems");
        self.items= [parser parseFeedWithResults:[NSURL URLWithString:kFeedURL]];
        NSLog(@"Passed parser initialization, parse: %@", self.items);
    } 
```

# objective-c - -[__NSCFConstantString allKeys]：无法识别的选择器发送到实例 0xf9ac8

> ID：14827527
> 
> 赞同：0
> 
> 时间：2013-02-12T07:27:48.680
> 
> 标签：objective-c, xcode

当我在手机上运行我的应用程序时，我收到此错误：

我只是试图解析一个 json 并尝试在自定义单元格的两列中使用图像，但是我在滚动上的图像放错了位置。

```
int index=indexPath.row*2;
int newindex=index+1;

NSDictionary *u = [[results objectAtIndex:index]mutableCopy ];    
NSLog(@"NSDictionary *u = [results objectAtIndex:index] %@",u);

NSDictionary *u1 = [[results objectAtIndex:newindex]mutableCopy];
NSLog(@"NSDictionary *u1 = [results objectAtIndex:newindex] %@",u1); 
```

但是，如果我同时使用 index 和 newindex 相同的值，它就可以工作。

:-![我要显示的输出](../Images/68fa22db07c01f61f54d47c21ab119ca.png)

:-![我的自定义结果单元](../Images/184906c7dcdc1a51b71178bf359f5f46.png)

代码 ：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil suffix:(NSString *)_suffix{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.suffix = _suffix;
    }
    return self;
}

#pragma mark Table view methods
- (NSInteger)numberOfSectionsInTableView:(UITableView *)_tableView{
    return 1;
}

//my new
- (NSInteger)tableView:(UITableView *)_tableView numberOfRowsInSection:(NSInteger)section{
    int resultCount = [results count];
    labelResultsCount.text = [NSString stringWithFormat:@"%d",resultCount];
    return resultCount/2;
}
- (UITableViewCell *)tableView:(UITableView *)_tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
   // NSString* CellIdentifier = [NSString stringWithFormat:@"ident_%d",indexPath.row];

    static NSString *CellIdentifier = @"ResultCell";
    ResultCell *cell = (ResultCell *)[_tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil){
        NSArray *a = [[NSBundle mainBundle] loadNibNamed:@"ResultCell" owner:self options:nil];
        cell = (ResultCell *)[a objectAtIndex:0];
        [cell setSelectionStyle:UITableViewCellSelectionStyleNone];
    }   

    int index=[(indexPath.row*2) copy];
    int newindex=[(index+1) copy];

    // save badge in dictionaory and get here and show in lable

    NSDictionary *u = [[results objectAtIndex:index]mutableCopy ];

    NSLog(@"NSDictionary *u = [results objectAtIndex:newindex] %@",u);

   NSDictionary *u1 = [[results objectAtIndex:newindex]mutableCopy];

    NSLog(@"NSDictionary *u1 = [results objectAtIndex:indexPath.row*2+1 newindex] %@",u1);

    @try {
        /* fullName */
        NSString *nickName = [u objectForKey:@"nickName"];
        cell.labelName.text = nickName;

        NSString *nickName1 = [u1 objectForKey:@"nickName"];
        cell.labelName1.text = nickName1;

        /* chat notification*/

        cell.imageViewNotification.hidden=0;
        cell.imageViewNotification1.hidden=0;

        NSString *badge = [u objectForKey:@"badge"];
        NSString *badge1 = [u1 objectForKey:@"badge"];

        if([badge intValue]>0)
        {
            cell.imageViewNotification.hidden=0;
            cell.labelNotification.text = badge;
            NSLog(@"inside > 0 %@",badge);

        }
        else if([badge intValue]<=0) 
        {
            cell.imageViewNotification.hidden=1;
            cell.labelNotification.text=@"";
            NSLog(@"%@",badge);

        }

        if([badge1 intValue]>0)
        {
            cell.imageViewNotification1.hidden=0;
            cell.labelNotification1.text = badge1;
            NSLog(@"inside > 0 %@",badge1);

        }
        else if([badge1 intValue]<=0) 
        {
            cell.imageViewNotification1.hidden=1;
            cell.labelNotification1.text=@"";
            NSLog(@"%@",badge1);

        }

        /*..................*/

        /* distance */
        id distance = [u objectForKey:@"distance"];
        if([distance isKindOfClass:[NSString class]]){
            cell.labelDistance.text = distance;
            cell.imageViewDistance.hidden = 0;
        }else{
            cell.imageViewDistance.hidden = 1;
            cell.labelDistance.text = @"";
        }

        id distance1 = [u1 objectForKey:@"distance"];
        if([distance1 isKindOfClass:[NSString class]]){
            cell.labelDistance1.text = distance1;
            cell.imageViewDistance1.hidden = 0;
        }else{
            cell.imageViewDistance1.hidden = 1;
            cell.labelDistance1.text = @"";
        }
        /* online */
        NSNumber *online = [u objectForKey:@"online"];
        cell.imageViewOnline.image = [online intValue] ? [UIImage imageNamed:@"circle_online.png"] : [UIImage imageNamed:@"circle_offline_red.png"];

        NSNumber *online1 = [u1 objectForKey:@"online"];
        cell.imageViewOnline1.image = [online1 intValue] ? [UIImage imageNamed:@"circle_online.png"] : [UIImage imageNamed:@"circle_offline_red.png"];

        /* buttonProfile */

        id d = [u objectForKey:@"thumbnails"];
        id d1 = [u1 objectForKey:@"thumbnails"];

        if([d isKindOfClass:[NSDictionary class]] ||[d1 isKindOfClass:[NSDictionary class]]){
            if([[d allKeys] count]>0 ||[[d1 allKeys] count]>0){
                NSString *imageSuffix = [d objectForKey:@"icon"];
                NSString *imageSuffix1 = [d1 objectForKey:@"icon"];
                NSLog(@"[d allKeys] count]%@", d);
                NSLog(@"[d1 allKeys] count]%@", d1);

                UIImage *image = [[SharingCenter sharedManager] imageFromCache:imageSuffix];
                UIImage *image1 = [[SharingCenter sharedManager] imageFromCache:imageSuffix1];
                if(image||image1)
                {
                    [cell.buttonUserProfile setBackgroundImage:image forState:UIControlStateNormal];
                    [cell.buttonUserProfile1 setBackgroundImage:image1 forState:UIControlStateNormal];
                }
                else{
                    NSString *gender = [u objectForKey:@"gender"]; 
                    NSString *gender1 = [u1 objectForKey:@"gender"]; 

                    UIImage *profileDefualtImage = [gender isEqualToString:@"M"] ? [UIImage imageNamed:@"no_photo_male.png"] : [UIImage imageNamed:@"no_photo_female.png"];

                    UIImage *profileDefualtImage1 = [gender1 isEqualToString:@"M"] ? [UIImage imageNamed:@"no_photo_male.png"] : [UIImage imageNamed:@"no_photo_female.png"];

                    [cell.buttonUserProfile setBackgroundImage:profileDefualtImage forState:UIControlStateNormal];
                    [cell.buttonUserProfile1 setBackgroundImage:profileDefualtImage1 forState:UIControlStateNormal];

                    /* downlowd Image */
                    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@%@",WebServicePrefix,imageSuffix]];
                    __block
                    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
                    request.delegate = self;
                    [request setPostValue:[NSString stringWithFormat:@"%f",[[SharingCenter sharedManager] currentCoordinate].latitude] forKey:@"lat"];
                    [request setPostValue:[NSString stringWithFormat:@"%f",[[SharingCenter sharedManager] currentCoordinate].longitude] forKey:@"lon"];
                    //  [[[SharingCenter sharedManager] imagesCache] removeAllObjects];

                    [request setCompletionBlock:^{
                        NSData *imageData = [request responseData];
                        if(imageData){
                            UIImage *image = [UIImage imageWithData:imageData];
                            if(image){

                                [[[SharingCenter sharedManager] imagesCache] setObject:image forKey:imageSuffix];

                                if([[self.tableView indexPathsForVisibleRows] containsObject:indexPath]){
                                    ResultCell *cell = (ResultCell *)[self.tableView cellForRowAtIndexPath:indexPath];
                                    [cell.buttonUserProfile setBackgroundImage:image forState:UIControlStateNormal]; 
                                }
                            }
                        }
                    }];
                    [request setFailedBlock:^{
                        NSError *error = request.error;
                        NSLog(@"%@",error);
                    }];

            /* downlowd Image */
            NSURL *url1 = [NSURL URLWithString:[NSString stringWithFormat:@"%@%@",WebServicePrefix,imageSuffix1]];
            __block
            ASIFormDataRequest *request1 = [ASIFormDataRequest requestWithURL:url1];
            request1.delegate = self;
            [request1 setPostValue:[NSString stringWithFormat:@"%f",[[SharingCenter sharedManager] currentCoordinate].latitude] forKey:@"lat"];
            [request1 setPostValue:[NSString stringWithFormat:@"%f",[[SharingCenter sharedManager] currentCoordinate].longitude] forKey:@"lon"];
            //  [[[SharingCenter sharedManager] imagesCache] removeAllObjects];

            [request1 setCompletionBlock:^{
                NSData *imageData1 = [request1 responseData];
                if(imageData1){
                    UIImage *image1 = [UIImage imageWithData:imageData1];
                    if(image1){

                        [[[SharingCenter sharedManager] imagesCache] setObject:image1 forKey:imageSuffix1];

                        if([[self.tableView indexPathsForVisibleRows] containsObject:indexPath]){
                            ResultCell *cell = (ResultCell *)[self.tableView cellForRowAtIndexPath:indexPath];
                            [cell.buttonUserProfile1 setBackgroundImage:image1 forState:UIControlStateNormal]; 
                        }
                    }
                }
            }];
            [request1 setFailedBlock:^{
                NSError *error = request1.error;
                NSLog(@"%@",error);
            }];
                    [[self networkQueue] addOperation:request];
                    [[self networkQueue] addOperation:request1];

        }
     }
    }

    else{
            NSString *gender = [u objectForKey:@"gender"];
        NSString *gender1 = [u1 objectForKey:@"gender"];

            UIImage *profileDefualtImage = [gender isEqualToString:@"M"] ? [UIImage imageNamed:@"no_photo_male.png"] : [UIImage imageNamed:@"no_photo_female.png"];
            [cell.buttonUserProfile setBackgroundImage:profileDefualtImage forState:UIControlStateNormal];

        UIImage *profileDefualtImage1 = [gender1 isEqualToString:@"M"] ? [UIImage imageNamed:@"no_photo_male.png"] : [UIImage imageNamed:@"no_photo_female.png"];
        [cell.buttonUserProfile1 setBackgroundImage:profileDefualtImage1 forState:UIControlStateNormal];
        }       

        /* pickStatus */
        NSNumber *pickStatus = [u objectForKey:@"pick_status"];
        NSNumber *pickStatus1 = [u1 objectForKey:@"pick_status"];

        switch ([pickStatus intValue]) {
            case 0:
                cell.imageViewBorder.image = [UIImage imageNamed:@"border_yellow_transperent.png"];
                cell.buttonUserPick.enabled = 1;
                [cell.buttonUserPick setBackgroundImage:[UIImage imageNamed:@"button_circle_pick.png"] forState:UIControlStateNormal];

                break;
            case 1:
                cell.imageViewBorder.image = [UIImage imageNamed:@"border_red_transperent.png"];
                cell.buttonUserPick.enabled = 0;
                [cell.buttonUserPick setBackgroundImage:[UIImage imageNamed:@"button_circle_wait.png"] forState:UIControlStateDisabled];

                break;
            case 2:
                cell.imageViewBorder.image = [UIImage imageNamed:@"border_red_transperent.png"];
                cell.buttonUserPick.enabled = 1;
                [cell.buttonUserPick setBackgroundImage:[UIImage imageNamed:@"button_circle_pick.png"] forState:UIControlStateNormal];
                break;
            case 3:
                cell.imageViewBorder.image = [UIImage imageNamed:@"border_red_transperent.png"];
                cell.buttonUserPick.enabled = 0;
                [cell.buttonUserPick setBackgroundImage:[UIImage imageNamed:@"button_circle_date.png"] forState:UIControlStateDisabled];

                break;
            default:
                break;
        }

        switch ([pickStatus1 intValue]) {
            case 0:
                cell.imageViewBorder1.image = [UIImage imageNamed:@"border_yellow_transperent.png"];
                cell.buttonUserPick1.enabled = 1;
                [cell.buttonUserPick1 setBackgroundImage:[UIImage imageNamed:@"button_circle_pick.png"] forState:UIControlStateNormal];

                break;
            case 1:
                cell.imageViewBorder1.image = [UIImage imageNamed:@"border_red_transperent.png"];
                cell.buttonUserPick1.enabled = 0;
                [cell.buttonUserPick1 setBackgroundImage:[UIImage imageNamed:@"button_circle_wait.png"] forState:UIControlStateDisabled];

                break;
            case 2:
                cell.imageViewBorder1.image = [UIImage imageNamed:@"border_red_transperent.png"];
                cell.buttonUserPick1.enabled = 1;
                [cell.buttonUserPick1 setBackgroundImage:[UIImage imageNamed:@"button_circle_pick.png"] forState:UIControlStateNormal];
                break;
            case 3:
                cell.imageViewBorder1.image = [UIImage imageNamed:@"border_red_transperent.png"];
                cell.buttonUserPick1.enabled = 0;
                [cell.buttonUserPick1 setBackgroundImage:[UIImage imageNamed:@"button_circle_date.png"] forState:UIControlStateDisabled];

                break;
            default:
                break;
        }
    }
    @catch (NSException * e) {
        NSLog(@"%@",e);
    }
    @finally {
        return cell;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:43:32.257

`NSDictionary`您可能正在某处对这些对象做某事，阅读它们的`allKeys`. 但我的猜测是，您尝试从该`results`数组中获取的对象不是`NSDictionary`对象，而是`NSString`对象。

尝试记录他们的`class`属性以查看您正在处理的内容（当然，您也可以通过查看 JSON 来发现这一点）。

```
NSDictionary *u = [[results objectAtIndex:index]mutableCopy ];
NSLog(@"u Class: %@", [u class]); 
```

另外，您为什么要将`mutableCopy`对象权授予非可变`NSDictionary`对象。

使用以下应该可以正常工作：

```
NSDictionary* u = [results objectAtIndex:index];
NSLog(@"u Class: %@", [u class]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:55:22.917

有很多代码需要查看，但我认为这可能是问题所在：

```
if([d isKindOfClass:[NSDictionary class]] ||[d1 isKindOfClass:[NSDictionary class]]){
            if([[d allKeys] count]>0 ||[[d1 allKeys] count]>0){ 
```

如果 d 或 d1 是字典，则此 if 语句将通过。如果不是，则会导致您在第二行看到的错误。记录 d 和 d1 的类以查看它们是否都是字典。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T07:55:57.117

有根据的猜测：

此行会导致您的问题：

```
if([d isKindOfClass:[NSDictionary class]] ||[d1 isKindOfClass:[NSDictionary class]]){
    if([[d allKeys] count]>0 ||[[d1 allKeys] count]>0){ 
```

第一个 if 的结果有 4 种不同的可能性：

1.  d 和 d1 都是 NSStrings。不会调用第 2 行
2.  d 是 NSDictionary，d1 是 NSString。将调用第 2 行
3.  d 是 NSString，d1 是 NSDictionary。将调用第 2 行
4.  d 和 d1 都是 NSDictionaries。将调用第 2 行。

第一种情况完全没有问题。最后一个案例也没有。如果 2 和 3 allKeys 将在不是 NSDictionary 的对象上调用。

您可能应该将其替换为需要两个测试都为真的“如果”。

```
if([d isKindOfClass:[NSDictionary class]] && [d1 isKindOfClass:[NSDictionary class]]){
                                          ^^ 
```

另一种选择是单独检查。

```
if([d isKindOfClass:[NSDictionary class]]) {
   x = [d allKeys];
}
if([d1 isKindOfClass:[NSDictionary class]]) {
   x = [d1 allKeys];
} 
```

# android - 关于蓝牙协议

> ID：14827531
> 
> 赞同：3
> 
> 时间：2013-02-12T07:28:16.600
> 
> 标签：android, bluetooth, bluetooth-lowenergy, headset

安装在平板电脑中的 Android 应用程序是否可以通过蓝牙配对任何其他设备（诺基亚、iPhone、Window）的来电或短信提醒？

我能做什么 - 我可以通过蓝牙协议将安卓设备与任何其他设备（诺基亚、iPhone、Window）配对。现在如何检测配对的设备上有来电或短信？

有人对android中的类似功能有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:59:50.263

实现它的一种方法是为每个将通过蓝牙通信的设备编写两个应用程序。您必须在两个设备之间定义和实施协议。手机上的应用程序将注册以侦听来电和来电短信的意图。例如看看[http://www.krvarma.com/2010/08/detecting-incoming-and-outgoing-calls-in-android/](http://www.krvarma.com/2010/08/detecting-incoming-and-outgoing-calls-in-android/)

和

一旦您在设备上收到这些意图，然后使用蓝牙通过定义的协议将信息发送到其他设备。例如，您可以使用 XML 进行通信。

然后在另一个设备应用程序上，您将使用 Activity 显示通知。

我希望这有帮助

# android - 等到异步任务完成它的工作

> ID：14827532
> 
> 赞同：89
> 
> 时间：2013-02-12T07:28:20.783
> 
> 标签：android

我对编程很陌生，我有一些疑问。

我有一个`AsyncTask`我称之为`RunInBackGround`.

我开始这个过程，如：

```
new RunInBackGround().execute(); 
```

但我希望等到此调用完成执行，然后再继续执行其他代码语句。

我怎样才能做到这一点？

有什么办法吗？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2013-02-12T07:35:23.560

> 等到这个调用完成它的执行

您将需要调用[AsyncTask.get()](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29)方法来获取结果并等待直到`doInBackground`执行未完成。但是*如果您不在 Thread 中调用 get 方法，这将冻结 Main UI 线程*。

要在**UI 线程**中返回结果，请以以下方式开始`AsyncTask`：

```
String str_result= new RunInBackGround().execute().get(); 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-02-12T07:36:12.447

尽管如果您的代码可以并行运行最好，但您可能只是使用一个线程，因此您不会阻塞 UI 线程，即使您的应用程序的使用流程必须等待它。

您在这里有很多选择；

1.  您可以在 AsyncTask 本身中执行您想要等待的代码。如果它与更新 UI（线程）有关，您可以使用 onPostExecute 方法。当您的后台工作完成时，它会自动调用。

2.  如果您由于某种原因被迫在 Activity/Fragment/Whatever 中执行此操作，您也可以让自己成为一个自定义侦听器，从 AsyncTask 广播。通过使用它，您可以在 Activity/Fragment/Whatever 中有一个回调方法，该方法仅在您需要时调用：也就是当您的 AsyncTask 完成您必须等待的任何内容时。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-02-12T07:36:56.500

在您`AsyncTask`添加一个 ProgressDialog，例如：

```
private final ProgressDialog dialog = new ProgressDialog(YourActivity.this); 
```

您可以在`onPreExecute()`方法中设置消息，例如：

```
this.dialog.setMessage("Processing..."); 
this.dialog.show(); 
```

并在您的`onPostExecute(Void result)`方法中关闭您的`ProgressDialog`.

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2015-02-28T18:57:08.647

**AsyncTask 有四种方法..**

```
onPreExecute  -- for doing something before calling background task in Async

doInBackground  -- operation/Task to do in Background

onProgressUpdate  -- it is for progress Update

onPostExecute  -- this method calls after asyncTask return from doInBackground. 
```

你可以在`onPostExecute()`它回来后打电话给你的工作`doInBackground()`

**onPostExecute 是您需要实现的。**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-29T13:17:20.480

我认为最简单的方法是创建一个接口来从 onpostexecute 获取数据并从接口运行 Ui：

创建一个接口：

```
public interface AsyncResponse {
    void processFinish(String output);
} 
```

然后在异步任务中

```
@Override
protected void onPostExecute(String data) {
    delegate.processFinish(data);
} 
```

然后在你的主要活动中

```
@Override
public void processFinish(String data) {
     // do things

} 
```

# android - 从 Assests 文件夹中读取 pdf 文件

> ID：14827534
> 
> 赞同：0
> 
> 时间：2013-02-12T07:28:31.967
> 
> 标签：android, pdf

我有用于从 sdcard 获取文件并使用名为 PDFViewer.jar 的 jar 显示 pdf 文件的代码，并且工作起来就像一个魅力，现在我在 assests 文件夹中有我的 pdf 文件如何获取文件并显示？

这是我从 sdcard 读取 pdf 的代码：

```
public class First extends ListActivity {

    String[] pdflist;
    File[] imagelist;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.main);

        File images = Environment.getExternalStorageDirectory();
        imagelist = images.listFiles(new FilenameFilter() {
            public boolean accept(File dir, String name) {
                return ((name.endsWith(".pdf")));
            }
        });
        pdflist = new String[imagelist.length];
        for (int i = 0; i < imagelist.length; i++) {
            pdflist[i] = imagelist[i].getName();
        }
        this.setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, pdflist));
    }

    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        String path = imagelist[(int) id].getAbsolutePath();
        openPdfIntent(path);
    }

    private void openPdfIntent(String path) {
        try {
            final Intent intent = new Intent(First.this, Second.class);
            intent.putExtra(PdfViewerActivity.EXTRA_PDFFILENAME, path);
            startActivity(intent);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}

package android.pdf.reader;

import net.sf.andpdf.pdfviewer.PdfViewerActivity;
import android.os.Bundle;

public class Second extends PdfViewerActivity 
{

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
}

public int getPreviousPageImageResource() {
    return R.drawable.left_arrow;
}

public int getNextPageImageResource() {
    return R.drawable.right_arrow;
}

public int getZoomInImageResource() {
    return R.drawable.zoom_in;
}

public int getZoomOutImageResource() {
    return R.drawable.zoom_out;
}

public int getPdfPasswordLayoutResource() {
    return R.layout.pdf_file_password;
}

public int getPdfPageNumberResource() {
    return R.layout.dialog_pagenumber;
}

public int getPdfPasswordEditField() {
    return R.id.etPassword;
}

public int getPdfPasswordOkButton() {
    return R.id.btOK;
}

public int getPdfPasswordExitButton() {
    return R.id.btExit;
}

public int getPdfPageNumberEditField() {
    return R.id.pagenum_edit;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:32:17.463

```
AssetManager assetManager = getAssets();
InputStream ims assetManager.open("pdf_name.pdf"); 
```

# android - 滚动时在自定义 listView 中显示数据时出错

> ID：14827536
> 
> 赞同：1
> 
> 时间：2013-02-12T07:28:38.753
> 
> 标签：android, android-listview

我向学者们致敬。我对自定义列表视图有点尴尬。滚动时，我在列表视图中显示的值会发生变化。在点击任何列表项时，它会显示当前可见的第一条记录的数据。请帮帮我。我不知道如何处理**getView()**方法来纠正这个错误。

我的java代码：

```
package com.addictioncounterapp;

import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Calendar;
import java.util.List;
import java.util.Locale;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.content.ContentValues;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
 import android.view.ViewGroup;
 import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class StartActivity extends Activity
{
ListView listview1;
static SQLiteDatabase database;
private Addiction[] addictions;
private ArrayAdapter<Addiction> listAdapter ;
ArrayList<Addiction> addictionList;
ImageView iv_settings;
static int limit;
static String attribute;

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_start);

    createDB();
    loadDB();

    iv_settings = (ImageView) findViewById(R.id.imageViewStart);
    iv_settings.setOnClickListener(new OnClickListener()
                                        {
                                            @Override
                                            public void onClick(View v)
                                            {
                                                Intent intent = new Intent(StartActivity.this, Settings.class);
                                                startActivity(intent);
                                            }
                                        }
                                    );

    manageList();

    listview1 = (ListView) findViewById(R.id.listViewStart);
    if(addictionList.isEmpty())
    {
        Toast.makeText(getBaseContext(), "No records of Addiction found...Go to 'Settings > Manage Addictions > Add' to create new addiction.", Toast.LENGTH_LONG).show();
    }
    else
    {
        listview1.setAdapter(listAdapter);
    }

    listview1.setOnItemClickListener(new OnItemClickListener()
                                        {
                                            @Override
                                            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3)
                                            {
                                                View parentView = (View) arg1.getParent();
                                                String textview1 = ((TextView) parentView.findViewById(R.id.textViewStartAddictionName)).getText().toString();

                                                Intent intent = new Intent(StartActivity.this, AddictionDetails.class);
                                                intent.putExtra("cat_name", textview1);
                                                startActivity(intent);
                                            }
                                        }
                                    );
}

private void createDB()
{
    database = openOrCreateDatabase("AddictionCounter.db", SQLiteDatabase.CREATE_IF_NECESSARY, null);
    database.setLocale(Locale.getDefault());
    database.setVersion(1);

    try
    {
        String create_table_1 = "create table if not exists category (cat_id INTEGER PRIMARY KEY AUTOINCREMENT," +
                                                                    " cat_server_id INTEGER," +
                                                                    " cat_name TEXT UNIQUE," +
                                                                    " parent_cat_id INTEGER," +
                                                                    " is_delete INTEGER," +
                                                                    " is_sync INTEGER," +
                                                                    " creation_date TEXT," +
                                                                    " update_date TEXT)";
        database.execSQL(create_table_1);

        String create_table_2 = "create table if not exists category_attribute (cat_attribute_id INTEGER PRIMARY KEY AUTOINCREMENT," +
                                                                                " cat_attribute_server_id INTEGER," +
                                                                                " cat_server_id INTEGER," +
                                                                                " cat_id INTEGER," +
                                                                                " cat_attribute_name TEXT," +
                                                                                " cat_attribute_unit INTEGER," +
                                                                                " cat_limit INTEGER," +
                                                                                " is_delete INTEGER," +
                                                                                " is_sync INTEGER," +
                                                                                " creation_date TEXT," +
                                                                                " update_date TEXT)";
        database.execSQL(create_table_2);

        String create_table_3 = "create table if not exists category_limit (limit_id INTEGER PRIMARY KEY AUTOINCREMENT," +
                                                                            " limit_server_id INTEGER," +
                                                                            " cat_id INTEGER," +
                                                                            " limit_count INTEGER," +
                                                                            " is_delete INTEGER," +
                                                                            " is_sync INTEGER," +
                                                                            " creation_date TEXT," +
                                                                            " update_date TEXT)";
        database.execSQL(create_table_3);

        String create_table_4 = "create table if not exists counter (counter_id INTEGER PRIMARY KEY AUTOINCREMENT," +
                                                                    " counter_server_id INTEGER," +
                                                                    " cat_id INTEGER," +
                                                                    " cat_attribute_id INTEGER," +
                                                                    " cat_attribute_unit INTEGER," +
                                                                    " counter_entry_date TEXT," +
                                                                    " counter_entry_date_time TEXT," +
                                                                    " is_delete INTEGER," +
                                                                    " is_sync INTEGER)";
        database.execSQL(create_table_4);
    }
    catch(SQLException e)
    {
        Log.e("SQLException","The SQL string is invalid. ");
        Toast.makeText(getBaseContext(), "SQLException: The SQL string is invalid.", Toast.LENGTH_SHORT).show();
    }
    database.close();
}

private void loadDB() 
{
    database = openOrCreateDatabase("AddictionCounter.db", SQLiteDatabase.OPEN_READWRITE, null);
}

private void manageList()
{
    String addictionName="", todaysCount="", dailyLimit="", unit="";
    addictionList = new ArrayList<Addiction>();

    AddictionsData objAddictionsData = new AddictionsData();
    Cursor cursor = database.query("category", new String[]{"cat_id"}, null, null, null, null, null);
    if(cursor.getCount() > 0)
    {
        while(cursor.moveToNext())
        {
            int tmp_cat_id = cursor.getInt(0);

            addictionName = objAddictionsData.getAddictionName(tmp_cat_id);
            todaysCount = objAddictionsData.getTodaysCount(tmp_cat_id);
            dailyLimit = objAddictionsData.getDailyLimit(tmp_cat_id);
            unit = objAddictionsData.getUnit(tmp_cat_id);

            addictions = new Addiction[]{new Addiction(tmp_cat_id, addictionName, todaysCount, dailyLimit, unit)};
            addictionList.addAll( Arrays.asList(addictions) );
        }
        cursor.close();
    }
    listAdapter = new AddictionArrayAdapter(this, addictionList);
    database.close();//---------------------------
}

public int insertIntoCounter(int id)
{
    loadDB();//------------------------------------
    //---------------------insert the record-------------------

    ContentValues values = new ContentValues(); 
    int cat_attribute_id = 0;
    int cat_attribute_unit = 0;

    Cursor cursor1 = database.query("category_attribute", new String[]{"cat_attribute_id", "cat_attribute_unit"}, "cat_id=?", new String[]{id+""}, null, null, null);
    if(cursor1.getCount() > 0)
    {   
        while(cursor1.moveToNext())
        {
            cat_attribute_id = cursor1.getInt(0);
            cat_attribute_unit = cursor1.getInt(1);
        }
        cursor1.close();
    }

    Calendar c = Calendar.getInstance();
    SimpleDateFormat dtf = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss");
    String currentTimeAndDate = dtf.format(c.getTime());
    SimpleDateFormat df = new SimpleDateFormat("dd/MM/yyyy");
    String currentDate = df.format(c.getTime());

    values.put("counter_server_id", 0);
    values.put("cat_id", id);
    values.put("cat_attribute_id", cat_attribute_id);
    values.put("cat_attribute_unit", cat_attribute_unit);
    values.put("counter_entry_date", currentDate);
    values.put("counter_entry_date_time", currentTimeAndDate);
    values.put("is_delete", 0);
    values.put("is_sync", 0);

    try
    { 
        database.insert("counter", null, values);
    }
    catch(Exception e)
    {
        Log.e("Exception", e+"");
    }

    //------------------------LIMIT FUNCTIONSLITY---------------------

    //------------------------fetching attribute name

    cursor1 = database.query("category_attribute", new String[]{"cat_attribute_name"}, "cat_id=?", new String[]{id+""}, null, null, null);

    if(cursor1.getCount() > 0)
    {
        while(cursor1.moveToNext())
            attribute = cursor1.getString(0);
        cursor1.close();
    }

    //------------------------fetching limit

    cursor1 = database.query("category_limit", new String[]{"limit_count"}, "cat_id=?", new String[]{id+""}, null, null, null);
    if(cursor1.getCount() > 0)
    {
        while(cursor1.moveToNext())
            limit = cursor1.getInt(0);
        cursor1.close();
    }

    //--------------------------fetching todays count

    int todays_count = 0;

    Calendar cal1 = Calendar.getInstance();
    SimpleDateFormat dateFormat1 = new SimpleDateFormat("dd/MM/yyyy");
    String todays_date = dateFormat1.format(cal1.getTime());

    cursor1 = database.rawQuery("select sum(cat_attribute_unit) from counter where cat_id ="+id+" AND counter_entry_date = '"+todays_date+"';", null);

    while(cursor1.moveToNext())
        todays_count = cursor1.getInt(0);

    //---------------------sending acknowledgement

    int ack;

    if(todays_count < limit)
        ack = 0;
    else if(todays_count == limit)
        ack = 1;
    else
        ack = 2;

    return ack;
}

public static class Addiction
{
    private String cat_name = "", cat_todays_count="", cat_daily_limit="", cat_attribute_unit="";
    private int cat_id = 0;
    public Addiction(int id, String catName, String catTodaysCount, String catDailyLimit, String catAttributeUnit)
    {
        cat_id = id;
        cat_name = catName ;
        cat_todays_count = catTodaysCount;
        cat_daily_limit = catDailyLimit;
        cat_attribute_unit = catAttributeUnit;
    }
    public int getId()
    {
        return cat_id;
    }
    public String getCatName()
    {
        return cat_name;
    }
    public String getCatTodaysCount()
    {
        return cat_todays_count;
    }
    public String getCatDailyLimit()
    {
        return cat_daily_limit;
    }
    public String getCatAttributeUnit()
    {
        return cat_attribute_unit;
    }
}

private static class AddictionViewHolder
{
    private ImageView imageViewAddictionLog ;
    private TextView textViewAddictionName, textViewTodaysCount, textViewDailyLimit, textViewAttributeUnit ;

    public AddictionViewHolder( ImageView iv_log, TextView tv_addiction_name, TextView tv_todays_count, TextView tv_daily_limit, TextView tv_attribute_count)
    {
        imageViewAddictionLog = iv_log;
        textViewAddictionName = tv_addiction_name;
        textViewTodaysCount = tv_todays_count;
        textViewDailyLimit = tv_daily_limit;
        textViewAttributeUnit = tv_attribute_count;
    }
    public ImageView getImageViewAddLog()
    {
        return imageViewAddictionLog;
    }
    public TextView getTextViewAddictionName()
    {
        return textViewAddictionName;
    }
    public TextView getTextViewTodaysCount()
    {
        return textViewTodaysCount;
    } 
    public TextView getTextViewDailyLimit()
    {
        return textViewDailyLimit;
    } 
    public TextView getTextViewAttributeUnit()
    {
        return textViewAttributeUnit;
    } 
}

private static class AddictionArrayAdapter extends ArrayAdapter<Addiction>
{
    private LayoutInflater inflater;
    StartActivity objStartActivity = new StartActivity();

    public AddictionArrayAdapter( Context context, List<Addiction> addictionList )
    {
        super( context, R.layout.single_row_start, R.id.textViewStartAddictionName, addictionList );
        inflater = LayoutInflater.from(context);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        Addiction addiction = (Addiction) this.getItem( position );

        ImageView imageViewAddLog ; 
        TextView textViewAN ;
        final TextView textViewTC;
        final TextView textViewDL;
        final TextView textViewU;

        if(convertView == null)
        { 
            convertView = inflater.inflate(R.layout.single_row_start, null);

            imageViewAddLog = (ImageView) convertView.findViewById(R.id.imageViewStartAdd);
            textViewAN = (TextView) convertView.findViewById(R.id.textViewStartAddictionName);
            textViewTC = (TextView) convertView.findViewById(R.id.textViewStartTodaysCountValue);
            textViewDL = (TextView) convertView.findViewById(R.id.textViewStartDailyLimitCount);
            textViewU = (TextView) convertView.findViewById(R.id.textViewStartAddictionUnit);

            imageViewAddLog.setFocusable(false);
            imageViewAddLog.setFocusableInTouchMode(false);
            imageViewAddLog.setClickable(true);

            convertView.setTag( new AddictionViewHolder(imageViewAddLog, textViewAN, textViewTC, textViewDL, textViewU) );

            imageViewAddLog.setOnClickListener( new View.OnClickListener()
                                                {
                                                    public void onClick(View v)
                                                    {
                                                        ImageView ib = (ImageView) v ;
                                                        Addiction addiction = (Addiction) ib.getTag();

                                                        int tmp_cat_id = addiction.getId();

                                                        int ack = objStartActivity.insertIntoCounter(tmp_cat_id);

                                                        String cat_name = addiction.getCatName();
                                                        switch(ack)
                                                        {
                                                            case 0:
                                                                String message0 = "Record added Successfully.";
                                                                customShowDialog(message0, tmp_cat_id);
                                                                break;

                                                            case 1:
                                                                String message1 = "Please stop "+cat_name+". Today you have already added "+limit+" "+ attribute+". Your daily limit is "+limit+" "+attribute+".";
                                                                customShowDialog(message1, tmp_cat_id);
                                                                break;

                                                            case 2:
                                                                String message2 = "Please stop "+cat_name+". Today you have already added "+limit+" "+ attribute+". You have crossed your daily limit of "+limit+" "+attribute+".";
                                                                customShowDialog(message2, tmp_cat_id);
                                                                break;
                                                        }
                                                    }

                                                    private void customShowDialog(String message, final int cat_id)
                                                    {
                                                        AlertDialog.Builder adb = new Builder(getContext());
                                                        adb.setTitle("Success !!!");
                                                        adb.setMessage(message);
                                                        adb.setIcon(R.drawable.ic_launcher);
                                                        adb.setPositiveButton("Ok",new DialogInterface.OnClickListener()
                                                                                    {
                                                                                        public void onClick(DialogInterface arg0, int arg1)
                                                                                        {
                                                                                            arg0.cancel();
                                                                                            AddictionsData ad = new AddictionsData();
                                                                                            textViewTC.setText( ad.getTodaysCount(cat_id));
                                                                                            textViewDL.setText( ad.getDailyLimit(cat_id));
                                                                                            textViewU.setText( ad.getUnit(cat_id));
                                                                                        }
                                                                                    }
                                                                            );

                                                        AlertDialog ad = adb.create();
                                                        ad.show();
                                                    }
                                                }
                                            );
        }

        else
        {
            AddictionViewHolder viewHolder = (AddictionViewHolder) convertView.getTag();    
            imageViewAddLog = viewHolder.getImageViewAddLog();

            textViewAN = viewHolder.getTextViewAddictionName();

            textViewTC = viewHolder.getTextViewTodaysCount();

            textViewDL = viewHolder.getTextViewDailyLimit();

            textViewU = viewHolder.getTextViewAttributeUnit();

        }

        imageViewAddLog.setTag( addiction );
        textViewAN.setText( addiction.getCatName());
        textViewTC.setText( addiction.getCatTodaysCount());
        textViewDL.setText( addiction.getCatDailyLimit());
        textViewU.setText( addiction.getCatAttributeUnit());

        return convertView;
    }  
}

public static class AddictionsData
{
    Cursor cursor;

    String getAddictionName(int cat_id)
    {
        String tmp_name = null;
        cursor = database.query("category", new String[]{"cat_name"}, "cat_id=?", new String[]{cat_id+""}, null, null, null);
        if(cursor.getCount() > 0)
        {
            while(cursor.moveToNext())
            {
                tmp_name = cursor.getString(0);
            }
            cursor.close();
        }
        return tmp_name;
    }
    String getTodaysCount(int cat_id)
    {
        String todaysCount = null;

        int todays_count = 0;

        Calendar cal1 = Calendar.getInstance();
        SimpleDateFormat dateFormat1 = new SimpleDateFormat("dd/MM/yyyy");
        String todays_date = dateFormat1.format(cal1.getTime());

        cursor = database.rawQuery("select sum(cat_attribute_unit) from counter where cat_id ="+cat_id+" AND counter_entry_date = '"+todays_date+"';", null);
        if(cursor.getCount() > 0)
        {
            while(cursor.moveToNext())
            {
                todays_count = cursor.getInt(0);
            }
            cursor.close();
        }

        String attribute = null;
        cursor = database.query("category_attribute", new String[]{"cat_attribute_name"}, "cat_id=?", new String[]{cat_id+""}, null, null, null);
        if(cursor.getCount() > 0)
        {
            while(cursor.moveToNext())
            {
                attribute = cursor.getString(0);
            }
            cursor.close();
        }

        todaysCount = todays_count+" "+attribute;
        return todaysCount;
    }

    String getDailyLimit(int cat_id)
    {
        String dailyLimit;

        int daily_limit = 0;
        cursor = database.query("category_limit", new String[]{"limit_count"}, "cat_id=?", new String[]{cat_id+""}, null, null, null);
        if(cursor.getCount() > 0)
        {
            while(cursor.moveToNext())
                daily_limit = cursor.getInt(0);
            cursor.close();
        }

        String attribute = null;
        cursor = database.query("category_attribute", new String[]{"cat_attribute_name"}, "cat_id=?", new String[]{cat_id+""}, null, null, null);
        if(cursor.getCount() > 0)
        {
            while(cursor.moveToNext())
            {
                attribute = cursor.getString(0);
            }
            cursor.close();
        }
        dailyLimit = daily_limit+ " "+attribute;
        return dailyLimit;
    }

    String getUnit(int cat_id)
    {
        String unit;

        int _unit = 0;
        cursor = database.query("category_attribute", new String[]{"cat_attribute_unit"}, "cat_id=?", new String[]{cat_id+""}, null, null, null);
        if(cursor.getCount() > 0)
        {
            while(cursor.moveToNext())
                _unit = cursor.getInt(0);
            cursor.close();
        }

        String attribute = null;
        cursor = database.query("category_attribute", new String[]{"cat_attribute_name"}, "cat_id=?", new String[]{cat_id+""}, null, null, null);
        if(cursor.getCount() > 0)
        {
            while(cursor.moveToNext())
            {
                attribute = cursor.getString(0);
            }
            cursor.close();
        }
        unit = _unit+ " "+attribute;
        return unit;
    }
}
} 
```

我的主要布局文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/main_bg_edited" >

    <ImageView
        android:id="@+id/imageViewStart"
        android:layout_width="25dp"
        android:layout_height="25dp"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/setting_icon"
        android:layout_marginRight="7dp" />

    <ListView
        android:id="@+id/listViewStart"
        android:layout_width="290dp"
        android:layout_height="wrap_content"
        android:layout_below="@+id/imageViewStart"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="20dp"
        android:divider="@android:color/transparent"
        android:dividerHeight="10dp"
        android:drawSelectorOnTop="true" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/imageViewStart"
        android:layout_centerHorizontal="true"
        android:text="Addictions"
        style="@style/header_style" />

</RelativeLayout> 
```

我从中膨胀视图的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/box_midbg" >

    <TextView
        android:id="@+id/textViewStartTodaysCountValue"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textViewStartAddictionName"
        android:layout_toRightOf="@+id/textViewTodaysCount"
        android:text=" TextView"
        android:textSize="10sp"
        android:textColor="#ffffff" />

    <TextView
        android:id="@+id/textViewStartDailyLimitCount"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/textViewStartTodaysCountValue"
        android:layout_alignTop="@+id/textViewDailyLimit"
        android:text="TextView"
        android:textSize="10sp"
        android:textColor="#ffffff" />

    <TextView
        android:id="@+id/textViewStartAddictionUnit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/textViewStartTodaysCountValue"
        android:layout_marginRight="15dp"
        android:text="TextView"
        android:textColor="#ffffff"
        android:textSize="10sp" />

    <TextView
        android:id="@+id/textViewStartAddictionName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/imageViewStartAdd"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="15dp"
        android:text="TextView"
        android:textColor="#ffffff"
        android:textSize="20sp" />

    <TextView
        android:id="@+id/textViewTodaysCount"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/textViewStartAddictionUnit"
        android:layout_alignLeft="@+id/textViewStartAddictionName"
        android:text="Today&apos;s Counts : "
        android:textColor="#ffffff"
        android:textSize="10sp" />

    <TextView
        android:id="@+id/textViewDailyLimit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textViewTodaysCount"
        android:layout_below="@+id/textViewTodaysCount"
        android:text="Daily Limit :"
        android:textColor="#ffffff"
        android:textSize="10sp" />

    <ImageView
        android:id="@+id/imageViewStartAdd"
        android:layout_width="25sp"
        android:layout_height="25sp"
        android:layout_alignRight="@+id/textViewStartAddictionUnit"
        android:layout_centerVertical="true"
        android:clickable="true"
        android:src="@drawable/add_btn" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:58:28.920

您不应该将数据存储在视图中，因为视图会被回收，并且几乎可以肯定会发生您没有预料到的事情。以下

```
Addiction addiction = (Addiction) ib.getTag();
....
imageViewAddLog.setTag( addiction ); 
```

不可取。更好的方法是让列表视图处理点击，这样您就可以知道哪个视图被点击了，以及`Addiction`对应于视图位置的正确对象。

```
myList.setOnItemClickListener(
    new OnItemClickListener()
    {
        @Override
        public void onItemClick(AdapterView<?> arg0, View view,
                int position, long id) {
               Addiction addiction = (Addiction) myList.getItemAtPosition(position);
               ...rest of code...

             }
        }
 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:45:19.277

请把所有其他代码放在后面

```
convertView.setTag( new AddictionViewHolder(imageViewAddLog, textViewAN, textViewTC, textViewDL, textViewU) ); 
```

在外面`if`并尝试`else`从代码中删除。

之后的其余代码`else`将相同`if`。请记住，当`convertview`为空时，创建一个新的`holder`并设置在`Tag`. 然后从不为空`Tag`时检索该对象。`convertview`并在之后编写所有其他代码，例如将值设置为视图等

```
AddictionViewHolder viewHolder = (AddictionViewHolder) convertView.getTag(); 
```

# java - 带有 Web 前端通信的 Java 守护程序

> ID：14827547
> 
> 赞同：-2
> 
> 时间：2013-02-12T07:29:45.377
> 
> 标签：java, linux, communication, daemon, frontend

我正在开始一个新的 Java 项目，并被困在架构阶段。

这个想法是创建一个 Java 守护进程（我正在为 Linux 设计这个），它将有一个在 Tomcat 中运行的 Web 前端（jsp？，php？，...）。守护进程会定期轮询 mysql 数据并执行外部脚本和程序。

Web 前端将用于查看来自 mysql 的数据并向守护进程发出信号以启动新任务（例如，每 x 秒轮询一次 Windows 客户端上的 tasklist 命令），然后将其呈现给浏览器。

我的问题是：

1.) 这个守护进程 + Web 前端是一个很好的组合吗？我读到它可以用两个 servlet 来完成，只要 tomcat 启动就加载一个，但这限制了我与外部程序的通信和使用其他系统调用，还是我错了？

2.) 哪种网络框架最适合这种情况？（GWT，春天，？）

3.）如果使用守护程序+ Web前端组合，两者将如何通信（UNIX套接字或HTTP套接字或???）因为经常轮询mysql不是我想做的？

4.) JavaServerPages 是否适合这种情况，或者这种情况会很复杂？

我早期的经验是制作一些 Java swing 应用程序、一个 webstart 应用程序和一些 php 网页。

我将不胜感激任何关于我应该如何设计它的建议。

谢谢！

彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:48:59.013

我对这个问题不太清楚，但我会尝试回答你的问题，不确定这是否有意义，因为我不清楚上下文。

1）是的，您可以使用该组合，所有服务器都是线程。不知道为什么你需要 2 个 servlet，但你可以在 ServletContextLister 中启动你的守护进程。不建议在 Servlet 中使用守护程序。它如何限制与外部程序的通信或使用其他系统调用？

2）任何框架或根本没有框架。你给出的两个例子是完全不同的事情。

3）为什么2需要沟通？前端从 mysql 或守护进程获取数据。从问题看来，它似乎从数据库中获取数据。

4）你可以用框架做的所有事情，你也可以自己做。唯一的事情是框架有帮助。

# python - python中的线程不起作用

> ID：14827549
> 
> 赞同：0
> 
> 时间：2013-02-12T07:29:51.793
> 
> 标签：python, multithreading

我需要做的是一次又一次地对多个设备运行同一组命令。但我需要同时进行。将命令集发送到其他设备之前的 1-3 秒间隔是可以的。所以我想到了使用线程。

这是代码的运行方式。

```
class UseThread(threading.Thread):

    def __init__(self, devID):
        super(UseThread, self).__init__()
        ... other commands ....
        ... other commands ....
        ... other commands ....

   file = open(os.path.dirname(os.path.realpath(__file__)) + '\Samples.txt','r')

   while 1:
       line = file.readline()
       if not line:
           print 'Done!'
           break
       for Code in cp.options('code'):
           line = cp.get('product',Code)
           line = line.split(',')
           for devID in line:
               t=UseThread(devID)
               t.start() 
```

它能够在所有设备上运行并记录第一次试验的结果，但对于第二次试验，它挂在代码中的某个地方，上面写着“猴子命令：唤醒”

使它以这种方式运行的线程有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:24:17.687

线程代码必须在`run()`方法中。

方法中的任何内容都`__init__()`将在设置线程之前被调用，当创建新对象时（因此它是调用线程的一部分）。

```
class UseThread(threading.Thread):
    def __init__(self, devID):
        super(UseThread, self).__init__()
        self.devID = devID
    def run(self):
        ## threaded stuff ....
        ## threaded stuff ....
        pass

## ...
for devID in line:
   t=UseThread(devID) # this calls UseThread.__init__()
   t.start()          # this creates a new thread that will run UseThread.run() 
```

# android - 从 adb shell 在后台启动一个进程，而不将该进程附加到 Android 中的终端

> ID：14827551
> 
> 赞同：3
> 
> 时间：2013-02-12T07:30:00.443
> 
> 标签：android, shell, adb

我有一个简单的问题。我想使用 adb shell 在安卓手机上启动/运行程序文件。
我的程序位于 /system/bin 文件夹中，并具有 root 权限。

我想从我的命令提示符运行这个程序，`adb shell runme 3000000 > logs.txt`但它不应该阻塞终端，它应该在后台运行。

我不能使用***screen/disown/nohup***来解决我的问题，因为 android 没有这一切。
我试过 `adb shell "runme >logs.txt &"`但没有用。

当我发出命令
`adb shell`
`# runme 3000000 > logs.txt &`
运行良好时，当我退出终端/断开设备然后再次连接到系统时。
Do`adb shell ps | grep runme`显示该进程仍在后台运行。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:06:19.280

Busybox 有`nohup`在 Android 中运行良好的小程序

# apache - htaccess 的 RewriteCond 无法正常工作

> ID：14827552
> 
> 赞同：0
> 
> 时间：2013-02-12T07:30:02.167
> 
> 标签：apache, .htaccess

下面是我的 .htaccess 文件：

```
Options -Indexes
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^api/(.*)$ api/index.php/api/$1 [L]
RewriteRule ^lib/(.*) lib/$1 [QSA,L]
RewriteRule ^applications/(.*) applications/$1 [QSA,L]
RewriteRule ^([^\/]*)/index.php /lib/vt-index.php?clientid=$1 [QSA,L]
RewriteRule ^([^\/]*)/([^?]*) /lib/vt/$2?clientid=$1 [QSA] 
```

我有一些问题：

1.  lib 和 applications 是文件夹，但`RewriteCond %{REQUEST_FILENAME} !-d`没有效果，我必须分别为 lib 和 application 编写条件。
2.  主要问题是我的 api 调用没有给我结果。我将我的 api 称为`www.myweb.com/api/User/xyz%40gmail.com`重定向到`www.myweb.com/api/index.php/api/User/xyz%40gmail.com`，这是正确的。但是对此的调用是空白的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T14:38:57.987

A`RewriteCond`仅适用于紧随其后的`RewriteRule`. 条件不是全局设置的，也不会应用于多个规则。您需要为每个规则重复条件：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^api/(.*)$ api/index.php/api/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^lib/(.*) lib/$1 [QSA,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^applications/(.*) applications/$1 [QSA,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^\/]*)/index.php /lib/vt-index.php?clientid=$1 [QSA,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^\/]*)/([^?]*) /lib/vt/$2?clientid=$1 [QSA] 
```

或者您可以否定条件并让它先通过：

```
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

RewriteRule ^api/(.*)$ api/index.php/api/$1 [L]
RewriteRule ^lib/(.*) lib/$1 [QSA,L]
RewriteRule ^applications/(.*) applications/$1 [QSA,L]
RewriteRule ^([^\/]*)/index.php /lib/vt-index.php?clientid=$1 [QSA,L]
RewriteRule ^([^\/]*)/([^?]*) /lib/vt/$2?clientid=$1 [QSA] 
```

This way, the opposite of your conditions get applied to a rule that simply says "do nothing, and no more rewriting". In order for any of the bottom 5 rules to get applied, the conditions at the top would *not have been met*.

# filepicker.io - Filepicker.io — 如何获取 S3 URL onSuccess？

> ID：14827554
> 
> 赞同：1
> 
> 时间：2013-02-12T07:30:06.173
> 
> 标签：filepicker.io

我将如何让 Filepicker.io 返回 S3 URL 而不是 www.filpicker.io/app/api/... 默认值？

我的文件上传到 S3 很好（实际上超级简单），但 fpfiles 对象包含的 URL 不是我的 S3 URL。

我想我可以自己把弗兰肯斯坦放在一起，这样我就可以把它插入我的数据库，但这似乎很乱。

这是我正在使用的代码：

```
$('#BTN_upload').click(function(){
    filepicker.setKey('MY_FILEPICKER.IO_KEY');
    filepicker.pickAndStore(
         //Picker Options
         { extensions: ['.png'], container: 'modal', multiple: true },

         //Store Options
         {location: 'S3', path: '/filepicker/', filename:'my_filename.png'},

         //On Success
         function(fpfiles){
             console.log(JSON.stringify(fpfiles));

         },

         //On Error
         function(fperror){
             console.log(JSON.stringify(fperror));
         }
    );
}); 
```

**奖励问题** 我如何根据需要设置文件名，而不是 Filepicker.io 默认为 uniqueid_originalFilename.png。我想自己处理我的文件名，但似乎没有任何方法可以覆盖默认值。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T02:11:10.687

它返回 S3 密钥。您的 s3 网址“ [https://s3.amazonaws.com/your_own_bucket/](https://s3.amazonaws.com/your_own_bucket/) ” + s3key 的简单串联就可以了。

关于您的另一个问题，如果您设置“路径”选项，它将告诉文件选择器将文件存储在哪里。

# c# - 会员提供者 - 如何以编程方式更改重定向的默认页面

> ID：14827556
> 
> 赞同：0
> 
> 时间：2013-02-12T07:30:25.183
> 
> 标签：c#, asp.net, .net, asp.net-membership

我正在使用 C# 和 .Net 当身份验证（使用成员资格提供程序）失败时，我需要将用户重定向到特定的 URL。

我在想用

```
RedirectToLoginPage(String) 
```

从 MSDN：使用指定的查询字符串将浏览器重定向到登录 URL

但我需要更改网址。

使用示例：

```
 if (!Membership.ValidateUser(userName, password))
    {// do smt here} 
```

任何其他想法如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:43:05.323

对我来说，这真的有效

aspx：

```
Username: <br />
<asp:TextBox runat="server" ID="txtUserName"></asp:TextBox>
<br />
Password: <br />
<asp:TextBox runat="server" ID="txtPassword" TextMode="Password"></asp:TextBox>
<br />
<asp:Button runat="server" ID="btnLogin" Text="Login" onclick="btnLogin_Click" 
    style="height: 26px" /> 
```

后面的代码：

```
protected void btnLogin_Click(object sender, EventArgs e)
{
   string username = txtUserName.Text.Trim();
   string password = txtPassword.Text.Trim();

   if (Membership.ValidateUser(username, password))
   {
     //...             
   }
   else
   {
       Response.Redirect("Hello.aspx");
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:34:42.273

在发布用于检查用户有效性的凭据时，还要传递“return-to-url”查询参数或其他内容。在背后的逻辑中，以编程方式检查用户的有效性，如果用户成功通过身份验证，则重定向到给定的 URL，或者在您的情况下，如果身份验证失败，则重定向到某个页面。

您可以做的另一件事是，如果身份验证失败，您想要重定向，那么您可以处理由于身份验证客户端失败而导致的 401 http 状态，并从那里重定向到您想要的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T07:52:03.963

根据这个[https://stackoverflow.com/a/749257/1495554](https://stackoverflow.com/a/749257/1495554)没有办法使用标准方法来做你想做的事，@ZedBee 写了正确的解决方案

# python - 如何在 Apache 服务器上运行 web2py 项目？

> ID：14827559
> 
> 赞同：3
> 
> 时间：2013-02-12T07:30:31.790
> 
> 标签：python, apache, web2py

我想用**web2py**开发我的项目。在此之前，我使用**python cherrypy**制作它。现在要切换到 web2py。但我想使用 Apache 服务器而不是 WSGI 和 web2py 服务器！

你能指导我怎么做吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T13:36:21.103

进入脚本文件夹（web2py/scripts）是一些使用 apache 部署 web2py 环境的一步设置脚本：

*   Fedora Linux：setup-web2py-fedora.sh
*   Ubuntu Linux：setup-web2py-ubuntu.sh

如果您有其他操作系统，您可以检查它以获得详细的分步安装指南。

正如 Calvin 所说，部署方法位于：[http ://web2py.com/books/default/chapter/29/13](http://web2py.com/books/default/chapter/29/13)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:33:13.580

此处提供了非常详细的解释 - [http://web2py.com/book/default/chapter/13#Apache-setup](http://web2py.com/book/default/chapter/13#Apache-setup) - 包括 apache2/mod_wsgi 配置文件。

也许您可以先尝试一下，遇到麻烦时再问问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-15T22:41:22.640

如果尝试在**Ubuntu 14.04上运行****setup-web2py-ubuntu.sh**版本**2.9.5**和之前的版本，则存在问题。罪魁祸首是 Ubuntu 14.04 使用的是 Apache 2.4，这与 2.2 版本有一些不同。

 **我已经修改了安装脚本，以便它可以在 Ubuntu 14.04 上运行。现在只需运行三个命令即可让 web2py 在新服务器上运行。

```
wget https://raw.githubusercontent.com/ivandigiusto/web2py-install/master/setup-web2py-ubuntu-14.04.sh
chmod +x setup-web2py-ubuntu-14.04.sh
sudo ./setup-web2py-ubuntu-14.04.sh 
```

请注意，如果您在已经配置了 Apache 和网站的服务器上运行此脚本，它将：

*   擦除 /etc/apache2/sites-available/ 中的当前 default.conf
*   删除 /etc/apache2/sites-enabled/ 中的所有链接

为了解决这个问题，您可能需要在运行之前手动修改设置脚本，或者只是启动一个新服务器并在上面尝试一下。**

# iphone - 如何让 CILinearGradient 等 Core Image 过滤器工作？

> ID：14827564
> 
> 赞同：5
> 
> 时间：2013-02-12T07:31:11.753
> 
> 标签：iphone, ios, objective-c, image

我是 Core Image 的新手，正在尝试一些过滤器。我可以让一些过滤器工作，但其他人只是拒绝工作。

例如，我可以使用如下代码让 CIGaussianGradient 过滤器工作：

```
CIVector *centerVector = [CIVector vectorWithX:150 Y:150];
CIColor *color0 = [CIColor colorWithRed:1.0 green:0.0 blue:1.0 alpha:1.0];
CIColor *color1 = [CIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.0];
NSNumber *radius = [NSNumber numberWithFloat:300.0];

CIImage *theCIImage = [CIFilter filterWithName:@"CIGaussianGradient" keysAndValues:@"inputCenter", centerVector, @"inputColor0", color0, @"inputColor1", color1, @"inputRadius", radius, nil].outputImage;  

 UIImage *newImage = [UIImage imageWithCIImage: theCIImage];
self.ImgView.image = newImage; 
```

但我无法使用类似的代码让 CILinearGradient 工作，例如：

```
CIVector *point0 =[CIVector vectorWithX:0 Y:0];
CIVector *point1 =[CIVector vectorWithX:200 Y:200];
CIColor *color0 = [CIColor colorWithRed:1.0 green:0.0 blue:1.0 alpha:1.0];
CIColor *color1 = [CIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.0];

CIImage *theCIImage = [CIFilter filterWithName:@"CILinearGradient" keysAndValues:@"inputPoint0", point0, @"inputPoint1", point1, @"inputColor0", color0, @"inputColor1", color1, nil].outputImage;
 UIImage *newImage = [UIImage imageWithCIImage: theCIImage];
self.ImgView.image = newImage; 
```

我错过了什么？

我正在 iOS 6.0 上测试它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-09T02:38:02.933

这个在 iOS 7 上对我有用。

```
CIContext *coreImageContext = [CIContext contextWithOptions:nil];
CIFilter *gradientFilter = [CIFilter filterWithName:@"CILinearGradient"];
[gradientFilter setDefaults];
CIColor *startColor = [CIColor colorWithCGColor:[UIColor yellowColor].CGColor];
CIColor *endColor = [CIColor colorWithCGColor:[UIColor redColor].CGColor];
CIVector *startVector = [CIVector vectorWithX:0 Y:0];
CIVector *endVector = [CIVector vectorWithX:100 Y:100];
[gradientFilter setValue:startVector forKey:@"inputPoint0"];
[gradientFilter setValue:endVector forKey:@"inputPoint1"];
[gradientFilter setValue:startColor forKey:@"inputColor0"];
[gradientFilter setValue:endColor forKey:@"inputColor1"];
CIImage *outputImage = [gradientFilter outputImage];
CGImageRef cgimg = [coreImageContext createCGImage:outputImage fromRect:CGRectMake(0, 0, 100, 100)];
UIImage *newImage = [UIImage imageWithCGImage:cgimg];
self.ImgView.image = newImage; 
```

# android - 如何与 Android 应用程序通信 Loxone-Miniserver

> ID：14827565
> 
> 赞同：0
> 
> 时间：2013-02-12T07:31:20.277
> 
> 标签：android, json, hmacsha1

`loxone-miniserver`我们正在为使用 Android 的客户开发基于 的内部家庭自动化应用程序。我收集了一些关于这方面的信息。即我必须遵循下面给出的一些步骤

1.  我们通过 http 请求获取密钥：`http://myMiniserver/dev/sys/getkey` `(Done)`
2.  我们使用 HEX 类型以字节为单位将 key 转换为“HEX”。 `(Done)`
3.  我们将 user:pass 转换为 ASCII 码。`(Done)`

4.  我们使用上述密钥和消息创建 hmac-SHA1 算法。`(Done)`

我首先做了。现在下一步是什么。我如何与`Loxone-Miniserver`设备握手。如果需要，我可以粘贴代码。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:41:38.317

我想我会在我们的论坛上发布一个链接到文档和由上述问题产生的线程。

*   [关于 API 的 Loxone 文档](http://www.loxone.com/Pages/en/service/DOCUMENTATION/Remote-control/Kommunikationslogik/UebersichtFernsteuerung.aspx)
*   [关于 websockets 的表单线程](http://www.loxone.com/Pages/forum/default.aspx?g=posts&t=3089)

# sql - 在 Postgresql 中删除子查询

> ID：14827567
> 
> 赞同：3
> 
> 时间：2013-02-12T07:31:28.030
> 
> 标签：sql, postgresql, join, subquery

```
WITH Dept(DName) AS (
   VALUES ('D1'), ('D2'), ('D3')
) ,
Emp(DName, EName, Age, Loc) AS (
     VALUES ('D1','E11',20,'L1'), ('D1','E12',25,'L2'),('D2','E21',28,'L1')
) 
SELECT DName,

  (SELECT avg(Age)
   FROM Emp
   WHERE Loc = 'L1'
     AND DName = d.DName) AS "L1 Avg",

  (SELECT avg(Age)
   FROM Emp
   WHERE Loc = 'L2'
     AND DName = d.DName) AS "L2 Avg"
FROM Dept d
LEFT JOIN Emp USING (DName)
GROUP BY DName 
```

此查询的输出是：

```
"D1";20.0000000000000000;25.0000000000000000
"D2";28.0000000000000000;
"D3";; 
```

有没有办法通过删除子查询并用 Postgresql 中更好的构造替换它来重构查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T08:15:26.937

```
SELECT DName,
       avg(case when loc = 'L1' then age else null end) as "L1 Avg",
       avg(case when loc = 'L2' then age else null end) as "L2 Avg"
FROM Dept d
LEFT JOIN Emp USING (DName)
GROUP BY DName 
```

# node.js - Node.js 的权限和组

> ID：14827571
> 
> 赞同：6
> 
> 时间：2013-02-12T07:31:56.660
> 
> 标签：node.js, ubuntu, permissions, directory

我正在寻找在 Ubuntu 中设置 Node.js 应用程序的最佳方式。我已经设置 /var/node/ 来存储各种 Node 应用程序，就像 /var/www/ 一样。

我想要达到的目标，但似乎失败了：

NodeAdmins（组）对 /var/node/ 具有读写权限。

NodeUser（用户）对 /var/node/ 具有只读访问权限。

NodeUser 是运行 Node 应用程序的用户帐户。

这样，FTP 用户可以更改 /var/node/ 中的任何文件，而由 NodeUser 运行的 Node 应用程序可以访问所有文件。

我的问题：

1）这是正确/安全的方式吗？

2）如何允许多个组对文件夹具有不同的权限？我使用 chown 将 NodeUser 设置为组的所有者。我不相信这是正确的方法。

# asp.net-mvc-3 - MVC 3 App 总是在寻找 SQL Express

> ID：14827574
> 
> 赞同：0
> 
> 时间：2013-02-12T07:32:08.423
> 
> 标签：asp.net-mvc-3, entity-framework, web-config

当我尝试在服务器上部署我的 MVC 3 应用程序时，我遇到了一个奇怪的问题。

我使用 VS2010 发布功能来获取服务器的构建包。当我尝试浏览我的应用程序时，我收到了错误

```
 A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified) 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

SQLExpress database file auto-creation error: 

The connection string specifies a local Sql Server Express instance using a database location within the application's App_Data directory. The provider attempted to automatically create the application services database because the provider determined that the database does not exist. The following configuration requirements are necessary to successfully check for existence of the application services database and automatically create the application services database:

If the application is running on either Windows 7 or Windows Server 2008R2, special configuration steps are necessary to enable automatic creation of the provider database. Additional information is available at: http://go.microsoft.com/fwlink/?LinkId=160102\. If the application's App_Data directory does not already exist, the web server account must have read and write access to the application's directory. This is necessary because the web server account will automatically create the App_Data directory if it does not already exist. 
If the application's App_Data directory already exists, the web server account only requires read and write access to the application's App_Data directory. This is necessary because the web server account will attempt to verify that the Sql Server Express database already exists within the application's App_Data directory. Revoking read access on the App_Data directory from the web server account will prevent the provider from correctly determining if the Sql Server Express database already exists. This will cause an error when the provider attempts to create a duplicate of an already existing database. Write access is required because the web server account's credentials are used when creating the new database. 
Sql Server Express must be installed on the machine. 
The process identity for the web server account must have a local user profile. See the readme document for details on how to create a local user profile for both machine and domain accounts. 
```

我查看了我的配置文件，发现存在默认连接字符串

```
<add name="ApplicationServices"
         connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true"
         providerName="System.Data.SqlClient" /> 
```

因此，使用此连接字符串是有道理的。我删除了此连接字符串以及 ASP.NET 成员资格和提供程序的所有默认配置。

但是，现在当我尝试浏览我的应用程序时，它仍然显示相同的 SQLExpress 数据库创建错误。

下面是我的配置文件。

```
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=152368
  -->

<configuration>
  <connectionStrings>
    <!--Home Connection String-->
    <add name="DBEntities" 
         connectionString="metadata=res://*/EDMX.HostelBookNowDB.csdl|res://*/EDMX.HostelBookNowDB.ssdl|res://*/EDMX.HostelBookNowDB.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=<Server Name>;initial catalog=DB;persist security info=True;Integrated Security=SSPI;multipleactiveresultsets=True;App=EntityFramework&quot;" 
         providerName="System.Data.EntityClient" />

  </connectionStrings>

  <appSettings>
    <add key="webpages:Version" value="1.0.0.0"/>
    <add key="ClientValidationEnabled" value="true"/>
    <add key="UnobtrusiveJavaScriptEnabled" value="true"/>
    <add key="HotelManagerHomePage" value="~/HotelManager"/>
  </appSettings>

  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
    </compilation>

    <authentication mode="Forms">
      <forms loginUrl="~/Home" timeout="2880" />
    </authentication>

    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages"/>
        <add namespace="HostelBookNow.Web.Helpers"/>
      </namespaces>
    </pages>
  </system.web>

  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

知道我可能做错了什么，应用程序仍在寻找 SQLExpress 而不是我的服务器。

我正在使用带有 Entity Framework 4.1 的 ASP.NET MVC 3 应用程序。

# cross-browser - IE9 显示网站的扭曲版本

> ID：14827575
> 
> 赞同：0
> 
> 时间：2013-02-12T07:32:09.377
> 
> 标签：cross-browser, internet-explorer-9

[该网站](http://www.kiddlewinks.com.au/)在 Chrome 和 Firefox 中显示良好，但在 IE9 中显示为左对齐，并且图片库也倾斜。

我不明白为什么 IE9 会显示如此不同的显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:55:02.783

一家第 3 方网络公司更改了 Opencart 模板，在 head 元素之前包含一个 script 元素，这显然使 IE 进入了怪癖模式。

感谢[CodingForums.com 上的 Frankie](http://www.codingforums.com/showthread.php?t=287491)为我解决了这个问题。

他的帖子：

> 通过把它放在 doctype 之前，你命令 IE 进入 quirks 模式：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
        $.noConflict();
                jQuery(document).ready(function() {
                  jQuery(".the-content").hide();
                  jQuery(".the-head").click(function()       {
                    jQuery(this).next(".the-content").slideToggle(500);
                  });
                });
</script>
<?xml version="1.0" encoding="UTF-8"?> 
```

> 把它放在头里面。您可以删除最后一行。你不需要它，它会启动 IE6。

# javascript - Twitter Bootstrap Typeahead 强制选择

> ID：14827576
> 
> 赞同：8
> 
> 时间：2013-02-12T07:32:10.800
> 
> 标签：javascript, jquery, twitter-bootstrap, bootstrap-typeahead

我在我的应用程序中使用 Bootstrap Typeahead 插件，这是我的代码（这是一个示例）。我正在寻找一种方法来验证用户的选择（基本上，如果输入与任何结果都不匹配 -> 清空模糊框）。结果必须匹配。我到处寻找，找不到任何东西。您的帮助将不胜感激。

```
$('#search').typeahead({
    source: function (query, process) {
        var states = [];
        var map = {};

        var data = [
            { "stateCode": "CA", "stateName": "California" },
            { "stateCode": "AZ", "stateName": "Arizona" },
            { "stateCode": "NY", "stateName": "New York" },
            { "stateCode": "NV", "stateName": "Nevada" },
            { "stateCode": "OH", "stateName": "Ohio" }
        ];

        $.each(data, function (i, state) {
            map[state.stateName] = state;
            states.push(state.stateName);
        });

        process(states);
    }
}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-12T11:20:22.090

如果提取出数据、状态和地图，则可以在`.blur`函数中使用它们进行查找：

```
 var data = [
            { "stateCode": "CA", "stateName": "California" },
            { "stateCode": "AZ", "stateName": "Arizona" },
            { "stateCode": "NY", "stateName": "New York" },
            { "stateCode": "NV", "stateName": "Nevada" },
            { "stateCode": "OH", "stateName": "Ohio" }
        ];
 var states = [];
 var map = {};

 $.each(data, function (i, state) {
    map[state.stateName] = state;
    states.push(state.stateName);
 });

 $('#search').typeahead({
    source: function (query, process) {
        process(states);
    }
}).blur(function(){
    if(states[$(this).val()] == null) {
      $('#search').val('');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-12T19:49:48.053

mccannf 的解决方案有效，但在我的情况下是`if(parents.indexOf($(this).val()) === -1) {`on blur 事件。

# ios - 通过代码禁用 RoundedRect 类型的 UIButton 的用户交互

> ID：14827577
> 
> 赞同：1
> 
> 时间：2013-02-12T07:32:14.167
> 
> 标签：ios, objective-c, uibutton

我想禁用 RoundedRect 类型的 UIButton 的用户交互。我试过

```
[previousAudio userInteractionEnabled:NO]; 
```

但是由于未捕获的异常而导致异常终止应用程序`NSInvalidArgumentException`，原因：`-[UIRoundedRectButton userInteractionEnabled:]:`无法识别的选择器已发送到实例

我能做些什么来禁用用户交互？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T07:35:17.907

你可以使用 `previousAudio.enabled = NO OR YES`instad of`[previousAudio userInteractionEnabled:NO];`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T07:36:30.083

它应该是：

```
[previousAudio setUserInteractionEnabled:NO]; 
```

或者

```
previousAudio.userInteractionEnabled = NO; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T07:36:48.667

因为没有`userInteractionEnabled:`选择器。`userInteractionEnabled`是吸气剂。为了设置属性，您应该使用`button.userInteractionEnabled = NO`或`[button setUserInteractionEnabled:NO]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-21T12:20:36.293

使用**setUserInteractionEnabled:NO**代替**userInteractionEnabled:NO**

```
[previousAudio setUserInteractionEnabled:NO]; 
```

您的按钮是 roundedRect 或具有其他属性都没有关系。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-12T08:24:09.893

您可以将其设置为 desiabled `previousAudio.enabled = NO`，也可以在 iBAction 方法中设置条件

```
-(IBAction)previousAudioPressed:(id)sender{

    if (condition ){
            //do something
    }

} 
```

# hadoop - 如何通过类 org.apache.hadoop.conf.Configuration 或其他方式在 java 客户端中设置 hadoop dfs.replication？

> ID：14827578
> 
> 赞同：1
> 
> 时间：2013-02-12T07:32:14.847
> 
> 标签：hadoop

如何通过类 org.apache.hadoop.conf.Configuration 或其他方式在 java 客户端中设置 hadoop dfs.replication？

我使用java Api作为客户端上传文件，但它总是将dfs.replication设置为3，因此当我使用命令（hadoop dfsadmin -report）检查情况时，所有块都在复制因子下，因为我只是有两个数据节点要测试。

我只想知道如何通过 org.apache.hadoop.conf.Configuration 类或其他方式在 java 客户端中设置 hadoop dfs.replication？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:37:10.400

您可以在终端键入此命令以单独设置文件的复制因子。

> hadoop fs -D dfs.replication=3 -copyFromLocal file.txt /user/myFolder

至于将由 hadoop 本身处理的复制不足，您会观察到复制不足的块的数量不断变化。

对于用于编写具有复制因子的文件的 JAVA API，请参阅以下代码：

```
 public class Write{
        public static void main(String[] args) throws IOException {
        Path pt = new Path("hdfspath:/user/abc");
        FileSystem fs = FileSystem.get(new Configuration());
        BufferedWriter br = new BufferedWriter(new OutputStreamWriter(
                fs.create(pt, true)));
        // TO append data to a file, use fs.append(Path f)
        fs.setReplication(new Path("hdfspath:/user/abc"), (short)3);
        String line;
        line = "This is Written to the File";
        System.out.println(line);
        br.write(line);
        br.close();

    }
    } 
```

请检查语法，因为我刚刚在这里输入了代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:42:26.220

我相信复制不是由客户端连接配置而是由集群配置（???）设置的。不确定是否有办法配置特定于文件的复制，这就是我认为您要问的问题

顺便说一句，有多少百分比的块被复制不足？你能提供你的 dfs admin -report 命令的输出吗？那会很有帮助

# sql-server - 在 SQL Server 中使用 Dense_Rank 对具有排名的列进行排名组合

> ID：14827579
> 
> 赞同：2
> 
> 时间：2013-02-12T07:32:16.237
> 
> 标签：sql-server, dense-rank

我有一个要求，我有数据

```
StageID         Department Number       UserEmail

732                60012                user1@testing.com
733                60012                user1@testing.com
734                60012                user1@testing.com
735                60012                user2@testing.com
736                60012                user2@testing.com
737                60013                user3@testing.com   
738                60013                user3@testing.com 
```

我想得到这样的输出

```
StageID         Department Number       UserEmail       DRank

732              60012              user1@testing.com   1
733              60012              user1@testing.com   1
734              60012              user1@testing.com   1
735              60012              user2@testing.com   2
736              60012              user2@testing.com   2
737              60013              user3@testing.com   1
738              60013              user3@testing.com   1 
```

我希望在对记录进行排名时考虑**DepartmentNumber**和**UserEmail的组合。**我在分区上使用**DENSE_RANK()**来实现这一点，但不知何故我无法获得我想要的输出。我不确定我哪里出错了。有人可以帮我吗

这是我使用的查询

```
SELECT StageID, DepartmentNumber, UserEmail
        ,DENSE_RANK() OVER (PARTITION BY DepartmentNumber, UserEmail
         ORDER BY DepartmentNumber, UserEmail ASC) AS DRANK 
   FROM mytable 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T07:35:23.923

我想你想要这个（ JW 提供的[SQLFiddle](http://www.sqlfiddle.com/#!3/94c3a/3)）：

```
SELECT StageID, DepartmentNumber, UserEmail
        ,DENSE_RANK() OVER (PARTITION BY DepartmentNumber
         ORDER BY UserEmail ASC) AS DRANK 
   FROM mytable 
```

Protip - 你永远不想在`PARTITION BY`and`ORDER BY`子句中使用相同的列。

这是如果我了解您的要求。我认为您希望每个部门的行独立排名，并选择列作为电子邮件排名。如果这不是你的要求，你需要比

> 我希望在对记录进行排名时考虑`DepartmentNumber`和的组合。`UserEmail`

# javascript - 提交表单时检索表中选中的所有复选框

> ID：14827583
> 
> 赞同：0
> 
> 时间：2013-02-12T07:32:28.627
> 
> 标签：javascript, checkbox, html-table, submit

我的表单中有一个`<table>`包含从数据库中检索到的一些行，并且在每一行上我放置了一个复选框，并且

复选框标签的名称是行记录的id

并且值根据复选框 1 的状态变化：选中，0：未选中

我想在用户提交表单时发送选定的行 ID：我不知道如何实现：

```
 <table border=1 id="mondiv" class="hidden" >
            <th></th>
            <th>Numero</th>
            <th>Nom</th>
            <th>Prenom</th>
            <th>Spécialité</th>
{% for item in users %}
            <tr>
                <td><input type="checkbox" name="{{ item.id }}" onchange="changeetat(this)" /></td>
                <td>{{ item.id }}</td>
                <td>{{ item.name }}</td>
                <td>{{ item.lastname }}</td>
                <td>{{ item.specialty }}</td>
            </tr>
{% else %}
            <h2>Aucun organisateur trouvé</h2>
 {% endfor %}
        </table> 
```

这是Javascript方法：

```
 function changeetat(element){
    if(element.checked){
       element.value = '1';
   }
   else{
       element.value = '0';
   }

} 
```

我在 Symfony 中使用树枝模板

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:56:03.343

如果您不使用 jQuery，则：

```
var inputs = document.getElementsByTagName("input"); //or
document.forms[0].elements;  
var cbs = []; //will contain all checkboxes  
var checked = []; //will contain all checked checkboxes  
for (var i = 0; i < inputs.length; i++) {  
    if (inputs[i].type == "checkbox") {  
        cbs.push(inputs[i]);  
        if (inputs[i].checked) {  
            checked.push(inputs[i]);  
        }  
    }  
}  
var nbCbs = cbs.length; //number of checkboxes  
var nbChecked = checked.length; //number of checked checkboxes 
```

使用 jQuery：

```
var cbs = $("input:checkbox:checked"); 
```

# java - 带有源代码操作的 Java 注释处理

> ID：14827587
> 
> 赞同：15
> 
> 时间：2013-02-12T07:32:41.123
> 
> 标签：java, annotations, apt, java-compiler-api

我一直在寻找以下要求的解决方案 -

*   源文件是在方法上使用自定义注释编写的
*   方法主体需要根据注释进行一些变化。
*   源文件不应更改，但编译器的输入应修改源文件

我查看了以下 API -

*   javax.annotation.processing - 注释处理。
*   javax.lang.model.* - 用于注释处理和编译器树 API 的语言模型
*   com.sun.source.* - 编译器树 API。

我想通过以下方式设计这个：

1.  编写注释处理器
2.  生成编译器树
3.  在运行时编辑编译器树而不影响原始源文件
4.  将树提供给编译器

编译器树 API 似乎很有希望，它可以访问 com.sun.source.tree.MethodTree

但是编译器树 API 似乎是只读的。我不知道如何完成步骤 3 和 4

有没有我可以采用的 API 来完成任务

注意：我只寻找源代码操作技术。无运行时字节码操作/AOP

环境：Java 6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:13:41.630

标准注解处理 API 不*支持*直接修改源代码。但是，修改源代码的一些效果可以通过生成带注释类型的超类或子类来实现。下面的博客条目展示了这种技术的一个例子：

[“通过注释处理的属性”](https://blogs.oracle.com/darcy/entry/properties_via_annotation_processing)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-26T18:58:25.303

您可以按照以下方式执行此操作，这将使您完成 3) 和 4)。

取自[java 注释处理器示例的示例](https://www.javacodegeeks.com/2015/09/java-annotation-processors.html)

```
@SupportedAnnotationTypes( "com.javacodegeeks.advanced.processor.Immutable" )
@SupportedSourceVersion( SourceVersion.RELEASE_7 )
public class SimpleAnnotationProcessor extends AbstractProcessor {
  @Override
  public boolean process(final Set< ? extends TypeElement > annotations, 
      final RoundEnvironment roundEnv) {

    for( final Element element: roundEnv.getElementsAnnotatedWith( Immutable.class ) ) {
      if( element instanceof TypeElement ) {
        final TypeElement typeElement = ( TypeElement )element;

        for( final Element eclosedElement: typeElement.getEnclosedElements() ) {
       if( eclosedElement instanceof VariableElement ) {
           final VariableElement variableElement = ( VariableElement )eclosedElement;

           if( !variableElement.getModifiers().contains( Modifier.FINAL ) ) {
             processingEnv.getMessager().printMessage( Diagnostic.Kind.ERROR,
               String.format( "Class '%s' is annotated as @Immutable, 
                 but field '%s' is not declared as final", 
                 typeElement.getSimpleName(), variableElement.getSimpleName()            
               ) 
             );                     
           }
         }
       }
    }

    // Claiming that annotations have been processed by this processor 
    return true;
  }
} 
```

另一种使用带有自定义处理程序的[projectlombok的方法。](http://projectlombok.org/)

来自 GitHub Project Lombok 的内置处理程序示例。这个注解添加了 try catch 块

```
public class SneakyThrowsExample implements Runnable {
    @SneakyThrows(UnsupportedEncodingException.class)
    public String utf8ToString(byte[] bytes) {
        return new String(bytes, "UTF-8");
    }

    @SneakyThrows
    public void run() {
        throw new Throwable();
    }
} 
```

这被处理为

```
public String utf8ToString(byte[] bytes) {
    try {
        return new String(bytes, "UTF-8");
    } catch (UnsupportedEncodingException e) {
        throw Lombok.sneakyThrow(e);
    }
}

public void run() {
    try {
        throw new Throwable();
    } catch (Throwable t) {
        throw Lombok.sneakyThrow(t);
    }
} 
```

您可以在同一个 Github/lombok 站点上找到处理程序代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T19:23:11.523

我建议您将所有源代码复制到一个单独的目录，在那里修改代码并从临时路径构建。

# android - 使用更新的 Google 地图 v2 实施 Google Places API

> ID：14827589
> 
> 赞同：0
> 
> 时间：2013-02-12T07:33:02.580
> 
> 标签：android, google-places-api

在过去的几天里，我试图找到一个分步教程来使用更新版本的谷歌地图（在 Android 的 Eclipse 中）实现谷歌地方，但没有成功。

在我发现的旧教程中，地图没有出现，因为它没有在 v2.1 中更新。

任何人都可以建议一种方法吗？我对我得到的所有分散的信息感到迷茫，而且我没有经验自己改变旧的例子。

我想制作一个简单的应用程序，它可以找到我当前的位置并显示 3Km 距离内的咖啡馆和餐馆。此时，我有一张显示我所在位置的地图，我需要一个教程来指导我从头开始实施 Google 地方信息。

**请帮忙！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:07:18.970

我实际上正在制作一个与您的非常相似的应用程序！我还没有更新到 v2，但据我所知，实现的唯一主要区别是使用 MapFragment 而不是 MapActivity。

所以你有地图，是吗？然后，您应该能够像使用 v1 地图一样调用 Google 地方信息（因为它们是独立的组件并且不相互依赖）。如果 Places 给您带来了麻烦，我建议您遵循本教程：[http](http://ddewaele.blogspot.com/2011/05/introducing-google-places-api.html) ://ddewaele.blogspot.com/2011/05/introducing-google-places-api.html 。它非常好，只需要进行一些调整即可启动并运行。

如果您仍然遇到问题，请回帖，我也许可以帮助您提供一些代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T08:19:56.287

我发现这篇文章很有帮助，我希望你也能找到它，

[http://mobile.tutsplus.com/tutorials/android/android-sdk-working-with-google-maps-map-setup/](http://mobile.tutsplus.com/tutorials/android/android-sdk-working-with-google-maps-map-setup/)

# wpf - 计算 WPF 中 DATAGRID 的 DataGridTemplateColumn 中“金额”列的总和

> ID：14827597
> 
> 赞同：1
> 
> 时间：2013-02-12T07:33:40.173
> 
> 标签：wpf, wpf-controls, wpfdatagrid, wpftoolkit

我们有 WPF 应用程序，其中我们在一个表单上使用 DataGrid。现在我们要在 Window_Loaded 事件上计算该数据网格的“AMOUNT”列的总数，那么当表单加载时，它能否在一个 TextBox 中显示 AMOUNT 列的总数。那么如何遍历 DATAGRID 中的所有行并计算“AMOUNT”列的总计。

如何在 WPF Datagrid 的页脚中显示此总数。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T08:40:07.377

[绑定](https://stackoverflow.com/questions/9284026/bind-datatable-with-datagrid-in-wpf-mvvm) `DataGrid`到`DataTable`。之后，您可以遍历所有行：

```
 double sum = 0;
        foreach (var row in myTable)
        {
            sum += double.Parse(row["AMOUNT"].ToString());
        }
        myTextBox.Text = sum.ToString() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T09:45:59.317

将 DataGrid 转换为 DataSet 的函数：

```
namespace WpfApplication1
{
    static class ExtClass
    {
     public static DataSet ToDataSet<T>(this IList<T> list)
     {
         Type elementType = typeof(T);
         DataSet ds = new DataSet();
         DataTable t = new DataTable();
         ds.Tables.Add(t);

         //add a column to table for each public property on T
         foreach (var propInfo in elementType.GetProperties())
         {
             Type ColType = Nullable.GetUnderlyingType(propInfo.PropertyType) ?? propInfo.PropertyType;

             t.Columns.Add(propInfo.Name, ColType);
         }

         //go through each property on T and add each value to the table
         foreach (T item in list)
         {
             DataRow row = t.NewRow();

             foreach (var propInfo in elementType.GetProperties())
             {
                 row[propInfo.Name] = propInfo.GetValue(item, null) ?? DBNull.Value;
             }

             t.Rows.Add(row);
         }

         return ds;
     }

    }
} 
```

编辑：格式化间距以使所有代码显示在代码块中

# django - 管理员登录表单 django

> ID：14827599
> 
> 赞同：2
> 
> 时间：2013-02-12T07:33:49.933
> 
> 标签：django

其中`django / django / contrib / admin / templates / admin / login.html`，表单的动作路径为`{{ app_path }}`。这是什么意思？此外，在 中`change_password_form`，根本没有动作路径。表格如何仍然有效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T07:41:33.290

`{{ app_path }}`是一个模板变量，将替换为从视图传递给它的上下文。在这种情况下，视图位于[`django/contrib/admin/sites.py`](https://github.com/django/django/blob/master/django/contrib/admin/sites.py)：

```
@never_cache
def login(self, request, extra_context=None):
    """
    Displays the login form for the given HttpRequest.
    """
    from django.contrib.auth.views import login
    context = {
        'title': _('Log in'),
        'app_path': request.get_full_path(),
        REDIRECT_FIELD_NAME: request.get_full_path(),
    }
    context.update(extra_context or {})

    defaults = {
        'extra_context': context,
        'current_app': self.name,
        'authentication_form': self.login_form or AdminAuthenticationForm,
        'template_name': self.login_template or 'admin/login.html',
    }
    return login(request, **defaults) 
```

so`{{ app_path }}`将替换为返回的值`request.get_full_path()`，即请求来自的路径。在这种情况下，它只是您首先从中加载表单的 URL。

* * *

对于第二个问题，空字符串的操作将表单指向浏览器当前已加载的 URL。

# iphone - 发出 URL 请求 iPhone 时出错

> ID：14827606
> 
> 赞同：-1
> 
> 时间：2013-02-12T07:34:28.437
> 
> 标签：iphone, ios, objective-c, url

我问了一个问题并遵循以下方式（Jaybit 建议）： [在 URL 中传递用户名和密码进行身份验证](https://stackoverflow.com/questions/14812865/pass-username-and-password-in-url-for-authentication/14814152#14814152)

现在，我收到此错误（堆栈跟踪）：

```
2013-02-12 11:56:11.734 Calendar[4074:c07] didReceiveData
2013-02-12 11:56:19.519 Calendar[4074:c07] receivedString:<?xml version="1.0"      encoding="utf-8"?><soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><soap:Fault><soap:Code><soap:Value>soap:Receiver</soap:Value></soap:Code><soap:Reason><soap:Text xml:lang="en">System.Web.Services.Protocols.SoapException: Server was unable to process request. ---&gt; System.Xml.XmlException: Data at the root level is invalid. Line 1, position 1.
   at System.Xml.XmlTextReaderImpl.Throw(Exception e)
   at System.Xml.XmlTextReaderImpl.ParseRootLevelWhitespace()
   at System.Xml.XmlTextReaderImpl.ParseDocumentContent()
   at System.Web.Services.Protocols.SoapServerProtocol.SoapEnvelopeReader.Read()
   at System.Xml.XmlReader.MoveToContent()
   at  System.Web.Services.Protocols.SoapServerProtocol.SoapEnvelopeReader.MoveToContent()
   at System.Web.Services.Protocols.SoapServerProtocolHelper.GetRequestElement()
   at System.Web.Services.Protocols.Soap12ServerProtocolHelper.RouteRequest()
   at System.Web.Services.Protocols.SoapServerProtocol.Initialize()
   at System.Web.Services.Protocols.ServerProtocol.SetContext(Type type, HttpContext  context, HttpRequest request, HttpResponse response)
   at System.Web.Services.Protocols.ServerProtocolFactory.Create(Type type, HttpContext context, HttpRequest request, HttpResponse response, Boolean&amp; abortProcessing)
   --- End of inner exception stack trace ---</soap:Text></soap:Reason><soap:Detail /> </soap:Fault></soap:Body></soap:Envelope>
(lldb) 
```

这是我的代码：

```
- (IBAction)btnLoginClick:(id)sender
 {
//Call Calendar View
if(self.viewController == nil) {
    CalendarViewController *detailView = [[CalendarViewController alloc] initWithNibName:@"CalendarViewController" bundle:nil];
    self.viewController = detailView;

}
NSString *userName = [NSString stringWithFormat:@"parameterUser=%@",txtUserName];
NSString *passWord = [NSString stringWithFormat:@"parameterPass=%@",txtPassword];

NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://URL/service1.asmx?"]];

NSString *postString = [NSString stringWithFormat:@"username=%@&password=%@",userName, passWord];
NSLog(@"%@",userName);
NSLog(@"%@",passWord);

NSData *postData = [NSData dataWithBytes: [postString UTF8String] length: [postString length]];

//URL Requst Object
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:600];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody: postData];
appConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
[self.appConnection start]; 
```

//尝试使用异步...

```
 /* NSOperationQueue *queue = [[NSOperationQueue alloc] init];

[NSURLConnection sendAsynchronousRequest:request queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
{
    NSString *receivedString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    NSLog(@"receivedString:%@",receivedString);

}];*/

[self.navigationController pushViewController:self.viewController animated:YES]; 
```

}

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
tempdata = data;
NSLog(@"didReceiveData");
if (!self.receivedData){
    self.receivedData = [NSMutableData data];
}
[self.receivedData appendData:data];
    }

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
 {

    NSLog(@"connectionDidFinishLoading");
NSString *receivedString = [[NSString alloc] initWithData:tempdata encoding:NSUTF8StringEncoding];
NSLog(@"receivedString:%@",receivedString); 
```

}

请帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:42:30.530

我之前曾使用过请求肥皂 URL，以下代码对我有用：

```
NSString *soapMessage = [NSString stringWithFormat:
                         @"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
                         "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n"
                         "<soap:Body>\n"
                         "<YourServiceName xmlns=\"http://tempuri.org/\">\n"
                         "<username>%@</username>\n"
                         "<passowrd>%@</passowrd>\n"
                         "</YourServiceName>\n"
                         "</soap:Body>\n"
                         "</soap:Envelope>\n", userName, passWord
                         ];

NSURL *url = [NSURL URLWithString:@"http://URL/service1.asmx"];
NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMessage length]];
[theRequest addValue: @"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[theRequest addValue: [NSString stringWithFormat:@"http://tempuri.org/%@",service] forHTTPHeaderField:@"SOAPAction"];
[theRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];
[theRequest setHTTPMethod:@"POST"];
[theRequest setHTTPBody: [soapMessage dataUsingEncoding:NSUTF8StringEncoding]];
[theRequest setTimeoutInterval:10];
NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

if( theConnection )
{
    responseData = [[NSMutableData data] retain];
}
else
{
    NSLog(@"theConnection is NULL");
} 
```

# php - while (double?) foreach 或 join?

> ID：14827609
> 
> 赞同：0
> 
> 时间：2013-02-12T07:34:43.173
> 
> 标签：php, mysql, join, foreach, while-loop

我有一个转换为 csv 的 Excel 表，然后代码将其导入 mysql。在 Excel 中，我在第一行有 A 和 B

我得到了输出，它可以工作，但我无法正确显示数据。

> **我试图显示的是 AB 然后 break 再 AB 等等**。它是按contact_id 排序的，但如果我尝试加倍，我只会得到AAAAAA 和1 B。

这是我试图实现这一目标的代码。尝试了 double while 并且我已经用谷歌搜索了，我注意到 double while 不起作用，也无法让它与 mysql JOIN 一起使用，并且从未与 foreach 函数一起使用。

```
$data = dbquery("SELECT contact_id, contact_first, contact_last, contact_email FROM contact_info WHERE contact_first='A)' ORDER BY contact_id ASC");
$data2 = dbquery("SELECT contact_id, contact_first, contact_last, contact_email FROM contact_info WHERE contact_first='B)' ORDER BY contact_id ASC");

    while ($userdata = dbarray($data)) {

   echo "<li><ul class='ulcla'>";
   echo "<h1>".$userdata['contact_first']."</h1>"; 
   echo "<li>".$userdata['contact_last']."</li>";
   echo "</ul><br>";
   while ($userdata = dbarray($data2)) {
   echo "".$userdata['contact_id']." - ".$userdata2['contact_first']." - ".$userdata2['contact_last']." - ".$userdata2['contact_email']."";
   echo "<br>"; 
    }
    echo "</ol></div>";   

      } 
```

我怎么能像这样循环数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:59:23.233

如果每个 A 和 B 的数量相同，那么您可以从输出创建两个数组并使用简单的 for 循环来遍历键。所以它可以回显 $userdata[$x] 和 $userdata2[$x] 其中 $x 是循环迭代器。

尽量避免使用多个循环，尤其是嵌套循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T08:03:15.900

```
while ($userdata = dbarray($data)) {
    //your stuff
    while ($other_userdata = dbarray($data2)) {
        //your other stuff
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T08:26:50.987

更改 `while ($userdata = dbarray($data2)) {`为 `while ($userdata2 = dbarray($data2)) {`for 内部 while 循环

```
$data = dbquery("SELECT contact_id, contact_first, contact_last, contact_email FROM contact_info WHERE contact_first='B)' ORDER BY contact_id ASC");
$data2 = dbquery("SELECT contact_id, contact_first, contact_last, contact_email FROM contact_info WHERE contact_first='B)' ORDER BY contact_id ASC");

    while ($userdata = dbarray($data)) {

   echo "<li><ul class='ulcla'>";
   echo "<h1>".$userdata['contact_first']."</h1>"; 
   echo "<li>".$userdata['contact_last']."</li>";
   echo "</ul><br>";
   while ($userdata2 = dbarray($data2)) {
   echo "".$userdata2['contact_id']." - ".$userdata2['contact_first']." - ".$userdata2['contact_last']." - ".$userdata2['contact_email']."";
   echo "<br>"; 
    }
    echo "</ol></div>";   

      } 
```

# php - 正则表达式有点太贪心了

> ID：14827611
> 
> 赞同：0
> 
> 时间：2013-02-12T07:34:49.263
> 
> 标签：php, regex, regex-greedy

我正在尝试使用此 RegEx 捕获文档的一小部分：

```
preg_match('/href="(.+?)".+?>Keyword/s', $a, $b); 
```

但是，它不是直接抓取 .`href=`之前的`Keyword`，而是从`href=`文档的第一个开始，*一直*到`Keyword`

我怎样才能使它回溯并只保留`href=`之前的内容`Keyword`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:38:09.497

如果在输入中，锚标记包围的文本与标记在同一行，则可以删除该`s`标志。

否则，您需要更具体的正则表达式：

```
'/href="[^"]*"[^<>]*>Keyword/' 
```

这假设里面的链接`href`不包含`"`. `[^<>]`防止其他标签成为匹配的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:37:55.597

假设 no`"`可以在`href`属性内，您可以开始调整您的正则表达式：

```
preg_match('/href="([^"]+?)".+?>Keyword/s', $a, $b); 
```

# cakephp - 如何从模型 cakephp 中检索数据

> ID：14827614
> 
> 赞同：1
> 
> 时间：2013-02-12T07:35:08.873
> 
> 标签：cakephp, date, model

我有一个名为 的控制器函数`updateoos()`、该函数的模型`Outofserviceday`和一个名为 的表`outofservicedays`。该表有 3 个字段 - `id`、`userid`、`outofservicedays`。

我想从今天到月底的最后一天停止服务，如何在`Outofserviceday`模型中编写一个带有两个参数`today`等的函数`monthedDday`。

```
function ($today $monthedDday) { } 
```

在我的控制器中，我得到了两个日期

```
$today = date("Ymd");
$monthend=date("ymd", strtotime($today)); 
```

**我编辑了我所有的错误**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:14:10.977

只需将您的时间转换为 unix 时间戳并根据您的目标日期检查值。

例子：

```
$no_service_days = $this-> Outofserviceday->find('all');

$nsd_array = array();

$end_date = strtotime($monthend); // or strtotime('31-01-12');

foreach ($no_service_days as $key => $day) : 
   $record_u_time = strtotime($day['Outofserviceday']['outofservicedays']);
   if($record_u_time < $end_date){
      $nsd_array[] = $day;
   }
endforeach;

pr($nsd_array); 
```

这是您应该使用的技术的一种松散方法，因为您的代码和命名约定确实非常令人困惑。

`date`我在您的表格中没有看到任何字段，所以我认为它是`outofservicedays`并且您`$monthend=date("ymd", strtotime($today));`似乎不是未来或过去的日期。

# firefox - 如何在 Firefox 中编辑锁定的属性 about:config

> ID：14827615
> 
> 赞同：4
> 
> 时间：2013-02-12T07:35:15.313
> 
> 标签：firefox, firefox-10

我想阻止 Firefox 手动更新

```
 1\. Tried to make the app.update.url as empty string, but it doesn't work. 
 2\. Tried installing in some other folder rather than C:/ProgramFiles so that
    Automatically Install Updates option is not greyed out in Options>Advanced, but no success.
 3\. Tried looking at prefs.js but the options which are locked in about:config don't 
    even appear in that file. 
```

厌倦了一次又一次地卸载和重新安装firefox。有谁知道如何在**about:config中编辑锁定属性，如****app.update.auto**和**app.update.enable**？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-14T01:45:12.117

I met same problem when I was trying to toggle App.update.enabled which was locked. There are two places you need to search. 1\. Firefox [Profile_folder](http://kb.mozillazine.org/Profile_folder)

2.  Firefox installation folder, like %PROGRAMFILES%\Mozilla Firefox

To me, I found below string in one .cfg file, and after modify it, the lock flag gone.

```
"app.update.auto": {
  "value": false,
  "locked": true
}, 
```

I think it also applies to your problem.

Ref: [http://www.updatefreezer.org/index.php?id=22](http://www.updatefreezer.org/index.php?id=22) [http://kb.mozillazine.org/Locking_preferences](http://kb.mozillazine.org/Locking_preferences) [https://www.jamf.com/jamf-nation/discussions/13484/deploying-firefox-with-updates-disabled](https://www.jamf.com/jamf-nation/discussions/13484/deploying-firefox-with-updates-disabled)**

# php - 动态 mysqli 准备语句失败

> ID：14827617
> 
> 赞同：0
> 
> 时间：2013-02-12T07:35:19.080
> 
> 标签：php, join, mysqli, prepared-statement

我正在尝试为我的 mysqli 连接编写一个非常小的抽象层并且遇到了问题。由于我正在维护旧代码，我需要从我的查询中获取一个关联数组，因为这是代码的设置方式，因此一旦它工作对我来说工作量就会减少......这个函数适用于所有类型的查询（不是只需选择）...

我写的函数是这样的：

```
function connectDB($query,$v=array()) {
    $mysqli = new mysqli(HOST,USER,PW,DATABASE);

    if($res=$mysqli->prepare($query)) {
            //dynamically bind all $v
            if($v) {
            $values=array($v[0]);
            for($i=1; $i<count($v); $i++) {
                ${'bind'.$i}=$v[$i];
                $values[]=&${'bind'.$i};
            }
            call_user_func_array(array($res,'bind_param'),$values);
        }
        $res->execute();

        //bind all table rows to result
        if(strtolower(substr($query,0,6))=="select") {
            $fields=array();
            $meta=$res->result_metadata();
            while($field=$meta->fetch_field()) { 
                ${$field->name}=null;
                $fields[$field->name]=&${$field->name};
            }
            call_user_func_array(array($res,"bind_result"),$fields);

            //return associative array
            $results = array();
            $i=0;
            while($res->fetch()) {
                $results[$i]=array();
                foreach($fields as $k => $v) $results[$i][$k] = $v;
                $i++;
            }
        }
        else {
            $results=$mysqli->affected_rows;
            if($mysqli->affected_rows<1) $results=$mysqli->info;
        }

        $res->close();
    }
    $mysqli->close();

    return $results;
} 
```

所以如果我打电话：

```
$MySqlres=connectDB("select * from `modx_events` events  limit 1");
var_dump($MySqlres); 
```

我得到了一个很好的关联数组，其中包含我选择的内容。

现在不幸的是，以下 mysql 查询将返回 NULL 作为其所有数组键的值：

```
$MySqlres=connectDB("select *, events.`id` as `ID`,venues.`name` as `venueName`,
venues.`suburb` as `venueSuburb`,venues.`advertiser` as `venueAdvertiser`
from `modx_events` events left join `modx_venues` venues on events.`venue`=venues.`id`
where events.`id`!='e' order by events.`start_date` asc, venues.`name` limit 1"); 
```

（相同的查询作为纯 SQL 运行，并将返回正确的值）知道这可能是什么吗？我的关联数组函数是否失败？我实现查询的方式有问题吗？

ps：PDO不是一个选项，也没有安装mysqlnd ... :(

附加问题

*   仅仅是为了保留关联数组的返回，这是否会产生过多的开销？我应该去`$res->fetch_object()`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:48:02.380

Mysqli 在动态准备语句方面很差，这使得小型抽象层的创建成为一场噩梦。
我强烈建议您切换到 PDO 或摆脱准备好的语句并根据手动处理的占位符创建常规查询（首选）。

作为姑息补丁，您可以尝试使用`get_result()`将返回常规结果变量的函数，您可以使用通常的方式遍历该变量，`fetch_assoc()`
但它仅适用于 mysqlnd 构建。

另请注意，为每个查询创建 mysqli 对象是一个很大的禁忌。
创建一次，然后在查询函数中使用`global $mysqli;`

> 这是不是太多的开销

我不明白你在说什么开销

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:32:52.140

我刚刚修复了这个功能。也许这对其他人来说很有趣：

```
function connectDB($mysqli,$query,$v=array()) {

    if($mysqli->connect_errno) {
        return array('error'=>'Connect failed: '.$mysqli->connect_error); //error handling here
        exit();
    }

    if(substr_count($query,"?")!=strlen($v[0])) {
        return array('error'=>'placeholders and replacements are not equal! placeholders:'.substr_count($query,"?").' replacements:'.strlen($v[0]).' ('.$v[0].')'); //error handling here...
        exit();
    }

    if($res=$mysqli->prepare($query)) {
            //dynamically bind all $v
            if($v) {
            $values=array($v[0]);
            for($i=1; $i<count($v); $i++) {
                ${'bind'.$i}=$v[$i];
                $values[]=&${'bind'.$i};
            }
            call_user_func_array(array($res,'bind_param'),$values);
        }
        $res->execute();

        //bind all table rows to result
        if(strtolower(substr($query,0,6))=="select") {
            $field=$fields=$tempRow=array();
            $meta=$res->result_metadata();
            while($field=$meta->fetch_field()) {
                $fieldName=$field->name;
                $fields[]=&$tempRow[$fieldName];
            }
            $meta->free_result();
            call_user_func_array(array($res,"bind_result"),$fields);

            //return associative array
            $results=array();
            $i=0;
            while($res->fetch()) {
                $results[$i]=array();
                foreach($tempRow as $k=>$v) $results[$i][$k] = $v;
                $i++;
            }
            $res->free_result();

        }
        else { //return infos about the query
            $results["affectedRows"]=$mysqli->affected_rows;
            $results["info"]=$mysqli->info;
            $results["insertID"]=$mysqli->insert_id;
        }

        $res->close();
    }

    return $results;
} 
```

干杯

# android - 为什么我们必须手动保留；[分号] after ) [roundbracket] 每次在 autostub 之后

> ID：14827620
> 
> 赞同：0
> 
> 时间：2013-02-12T07:35:25.053
> 
> 标签：android, stub

一个愚蠢的问题出现在我的脑海中。

在 Android 中，每次生成 OnClickListener 或事件时，即在事件之后生成自动存根，

我们必须手动保留 ) 之后的分号。

这背后的原因是什么？为什么Android SDK不直接保留分号？

```
 texthome.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

    }
}***);*** 
```

只是问清楚概念。提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:33:56.627

嗯，我有一个模糊的想法。分号将出现在某些方法中，例如生成的方法，`Intent`因为在该方法的末尾不会有任何后续代码的可能性。

然而，

在其他自动生成的存根中，逗号不会出现在有可能`show()`继承它的代码的地方。

我不确定。我的考虑是否正确？

# php - FancyUpload 到不同的文件夹

> ID：14827623
> 
> 赞同：0
> 
> 时间：2013-02-12T07:35:28.663
> 
> 标签：php, ajax, file-upload, upload, fancyupload

我有一个在线插件（fancyupload），试图将多个文件上传到不同的文件夹。首先我使用 mkdir() 创建文件夹，然后将文件夹名称传递给 index.php 文件和 script.php 文件中的会话 ID，但我发现 script.php 文件看不到会话并且它将文件直接上传到uploadedfiles 文件夹。任何人都可以提供帮助，因为我已经尝试了所有可能的方法。我是stackoverflow的新手（虽然在这里阅读了一段时间的问题）所以真的不知道这里的规则。

先感谢您

```
index.php

<?php
 session_start();
 mkdir("C:/softwares/wamp/www/Emma/uploadedfiles/".$_POST['directory']."/");
$_SESSION['directory'] = $_POST['directory']; 
```

脚本.php

```
move_uploaded_file($_FILES['photoupload']['tmp_name'], "uploadedfiles/".$_SESSION['directory']."/".$_FILES['photoupload']['name']);
chmod("uploadedfiles/".$_SESSION['directory']."/".$_FILES['photoupload']['name'], 0777); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:26:00.067

抱歉这个问题，我已经解决了这个问题，很容易只是想一个方向！！！无论如何感谢观众

# php - .htaccess url 重写查询字符串

> ID：14827625
> 
> 赞同：2
> 
> 时间：2013-02-12T07:35:36.393
> 
> 标签：php, .htaccess, url-rewriting

好的，我已经阅读并在这里搜索了一些内容，但还没有找到我的问题的答案，或者我对 url 重写太新了，只是想不通。这是我想要完成的事情：

我有一个包含频道描述和 ID 的表，ID 用于知道要显示的内容，所以我的 URL 中有这样的内容

```
http://www.mysite.com/page?channel=1 
```

现在我想做的是显示这个：

```
http://www.mysite.com/page/description 
```

并且仍然能够以某种方式获取该描述的 id 以显示适当的内容。希望这是有道理的。我唯一想到的是在页面顶部，执行以下操作：

```
select * from channels where description = $_GET['description'] 
```

并让它返回 id，然后使用它。那会是唯一的出路吗？还是 .htaccess 足够好？这样的菜鸟:(

编辑：这现在在我的 htaccess 中：

```
AddType x-mapp-php5 .php
Options +FollowSymLinks -MultiViews 
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

## hide .php extension
# To externally redirect /dir/foo.php to /dir/foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R,L,NC]

## To internally redirect /dir/foo to /dir/foo.php
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^ %{REQUEST_URI}.php [L]
##This is to redirect just stream page only
RewriteRule ^stream/(.+)/([0-9]+)$ /stream.php?channel=$1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:54:16.733

如果要获取 ID，请执行以下操作：

1.  启用 mod_rewrite apache 模块
2.  在 DocumentRoot 目录中创建 .htaccess
3.  接下来粘贴：

    ```
    RewriteEngine On
    RewriteRule ^([0-9]+)$ /page.php?channel=$1 
    ```

4.  当您关注 URL 时：

[http://www.mysite.com/1](http://www.mysite.com/1)

您从 URL 中获取内容：

[http://www.mysite.com/page?channel=1](http://www.mysite.com/page?channel=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:53:54.657

有很多方法可以做到这一点。

在您的应用程序中使用[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)架构将迫使您以一种或[另一种](http://ellislab.com/codeigniter/user-guide/general/routing.html)[形式](http://symfony.com/doc/current/book/routing.html)使用路由逻辑。

您特别想要的可以通过多种方式完成，包括 apache [RewriteMap](http://httpd.apache.org/docs/trunk/rewrite/rewritemap.html#dbm)。

我会亲自设计我的应用程序，使其接收 URI 并将它们路由到控制器/页面。这可确保 PHP 继续完全控制请求最终显示的内容。

假设您的任务是在不影响大部分应用程序的情况下美化您的链接，您需要找到一种映射`/page/description`到`/page?channel=1`.

对于这种独特的情况，我会使用类似于[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)的东西，因为本质上你的任务不需要修改现有的代码库：

## .htaccess

```
RewriteEngine On
RewriteRule ^.*$ router.php [NC,L] 
```

## 路由器.php

```
include'config.php';// remove your config loading from index.php

$request = $_SERVER['REQUEST_URI'];
$request = explode('/', $_request);
    # in $request you will have all the uri segments now

/* complex logic to find out what page you're on */

   # assuming we found out it's page/description
$_GET['channel'] = 1;// or getIdFromDescription($request[2])
   # this forces the environment to believe it got a request with ?channel=1

# revert to your old request with injected environment
include'index.php'; 
```

这里的前提是 index.php 可以加载你的旧页面。你只需要改变它们的访问方式。因此，您使用路由器将新请求映射到旧请求。

它并不完美，但适用于设计不佳的应用程序。

**请注意：**我当前的实现不处理静态资源（图像、css、js 等）

# ruby-on-rails - Ruby URI - 匹配 URL 的一部分

> ID：14827626
> 
> 赞同：1
> 
> 时间：2013-02-12T07:35:42.463
> 
> 标签：ruby-on-rails, ruby, uri

我在 ruby​​ 中使用 URI 模块来匹配 URL。

```
require 'uri'
url = URI"http://matchme.projects.foo.com" 
```

需要匹配url的matchme部分，放入变量中。url 的 matchme 部分将始终位于 http:// 之后和下一个“.projects”之前。

我正在尝试`url.scheme`给我“http”，如何从那里开始并匹配我的字符串。matchme部分一直在变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:49:01.863

你可以使用正则表达式

```
 "http://matchme.projects.foo.com"[/http:\/\/([a-z0-9\-]*).*/,1]
  => matchme 
```

或者

如果请求对象可用，则

```
 request.subdomains[0] 
```

会给你最深的子域。

# c# - Teradata 和 Asp.Net

> ID：14827628
> 
> 赞同：0
> 
> 时间：2013-02-12T07:35:52.743
> 
> 标签：c#, asp.net, teradata

可能了解 asp.net 和 teradata 应用程序的基本要求。

如何使用 asp.net（c# 代码）连接到 Teradata。我对 Teradata 的了解为零。我知道我们需要一个数据库连接提供者。我们怎样才能得到所有这些东西。

如何使用 teradata。它是否像带有查询、过程和所有数据库事物的 SQL Server 一样工作。

SQL Server 和 Teradata 有什么区别。我们能找到 teradata 的跟踪版本吗

安装后如何从 asp.net 应用程序连接和使用 teradata（对我来说最重要）

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:40:09.310

> 如何从 asp.net 应用程序连接和使用 teradata（对我来说最重要）

您可以从以下位置下载 Teradata .Net 提供程序：

[用于 Teradata 的 .NET 数据提供程序](http://downloads.teradata.com/download/connectivity/dot-net-data-provider)

要下载 Teradata express 和其他工具，您可以查看[下载中心](http://downloads.teradata.com/download)

# ckeditor - CKeditor 彩盒集成

> ID：14827629
> 
> 赞同：2
> 
> 时间：2013-02-12T07:35:52.883
> 
> 标签：ckeditor, integration, colorbox

我想使用颜色框内联图像，可以使用[http://website-design.operationenterprise.com/articles/website-development/colorbox-ckeditor-drupal-7](http://website-design.operationenterprise.com/articles/website-development/colorbox-ckeditor-drupal-7)来完成，但我想自动化它的过程对用户友好。

我使用的代码

```
 CKEDITOR.on( 'dialogDefinition', function( ev )
{

var dialogName = ev.data.name;
var dialogDefinition = ev.data.definition;

if ( dialogName == 'image' )
{
var linkTab = dialogDefinition.getContents( 'info' );
var link = linkTab.get( 'txtUrl' );

link['onChange'] = function(evt){
var dialog = CKEDITOR.dialog.getCurrent();
dialog.getContentElement('Link', 'txtUrl').setValue(dialog.getContentElement('info', 'txtUrl').getValue());
  }

if ( dialogName == 'link' )
    {

        var infoTab = dialogDefinition.getContents( 'advanced' );

        var cssField = infoTab.get( 'advCSSClasses' );
        cssField['default'] = 'colorbox-load';
    }
}
}); 
```

在图像链接选项卡选项卡中复制 url 工作正常，但在链接对话框中设置默认 css 没有。

我不是 Java 开发人员，所以我做错了什么

请帮忙

# java - IText 在导出 java swing 组件时忽略 UTF-8 字符

> ID：14827634
> 
> 赞同：0
> 
> 时间：2013-02-12T07:36:19.000
> 
> 标签：java, swing, itext

我正在使用此示例将 java swing JFrame 转换为 pdf：[export jcomponent to pdf with itext](https://stackoverflow.com/questions/10516633/export-jcomponent-to-pdf-with-itext)。问题是当我的框架包含像 čěř... 这样的 UTF-8 字符时。导出的文档中缺少这些字符。如何在我的 PDF 中打开这些字符？

更新：

我尝试您的示例，但出现异常：

```
ExceptionConverter: com.itextpdf.text.DocumentException: Font 'fonts/verdana.ttf,1' with 'Identity-H' is not recognized.
 at com.itextpdf.text.pdf.BaseFont.createFont(BaseFont.java:699)
 at com.itextpdf.text.pdf.BaseFont.createFont(BaseFont.java:606)
 at com.itextpdf.text.pdf.BaseFont.createFont(BaseFont.java:549)
 at com.itextpdf.text.pdf.DefaultFontMapper.awtToPdf(DefaultFontMapper.java:107)
 at com.itextpdf.text.pdf.PdfGraphics2D.getCachedBaseFont(PdfGraphics2D.java:1082)
 at com.itextpdf.text.pdf.PdfGraphics2D.setFont(PdfGraphics2D.java:1075)
 at javax.swing.JComponent.paintChildren(JComponent.java:855)
 at javax.swing.JComponent.printChildren(JComponent.java:1214)
 at javax.swing.JComponent.paint(JComponent.java:1049)
 at javax.swing.JComponent.print(JComponent.java:1183)
 at javax.swing.JComponent.paintChildren(JComponent.java:874)
 at javax.swing.JComponent.printChildren(JComponent.java:1214)
 at javax.swing.JComponent.paint(JComponent.java:1049)
 at javax.swing.JComponent.print(JComponent.java:1183)
 at javax.swing.JComponent.paintChildren(JComponent.java:874)
 at javax.swing.JComponent.printChildren(JComponent.java:1214)
 at javax.swing.JComponent.paint(JComponent.java:1049)
 at javax.swing.JComponent.print(JComponent.java:1183)
 at javax.swing.JComponent.paintChildren(JComponent.java:874)
 at javax.swing.JComponent.printChildren(JComponent.java:1214)
 at javax.swing.JComponent.paint(JComponent.java:1049)
 at javax.swing.JComponent.print(JComponent.java:1183)
 at javax.swing.JComponent.paintChildren(JComponent.java:874)
 at javax.swing.JComponent.printChildren(JComponent.java:1214)
 at javax.swing.JComponent.paint(JComponent.java:1049)
 at javax.swing.JComponent.print(JComponent.java:1183)
 at javax.swing.JComponent.paintChildren(JComponent.java:874)
 at javax.swing.JComponent.printChildren(JComponent.java:1214)
 at javax.swing.JComponent.paint(JComponent.java:1049)
 at javax.swing.JComponent.print(JComponent.java:1183)
 at javax.swing.JComponent.paintChildren(JComponent.java:874)
 at javax.swing.JComponent.printChildren(JComponent.java:1214)
 at javax.swing.JComponent.paint(JComponent.java:1049)
 at javax.swing.JComponent.print(JComponent.java:1183)
 at javax.swing.JComponent.paintChildren(JComponent.java:874)
 at javax.swing.JComponent.printChildren(JComponent.java:1214)
 at javax.swing.JComponent.paint(JComponent.java:1049)
 at javax.swing.JComponent.print(JComponent.java:1183)
 at javax.swing.JComponent.paintChildren(JComponent.java:874)
 at javax.swing.JComponent.printChildren(JComponent.java:1214)
 at javax.swing.JComponent.paint(JComponent.java:1049)
 at javax.swing.JComponent.print(JComponent.java:1183)
 at GUI.PlayOffPanel.export(PlayOffPanel.java:322) 
```

看起来导入 .ttf 字体（如 verdana 或 times）存在一些问题，但举例来说，您添加的字体是有效的。但我真的很想使用 Verdana 字体所以还在寻找答案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:44:40.687

由于您没有显示自己的任何代码，我认为您使用了从[export jcomponent 到 PDF 的代码和 itext](https://stackoverflow.com/questions/10516633/export-jcomponent-to-pdf-with-itext)（您提到的问题）。因此，您检索`Graphics2D`实例的代码是：

```
Graphics2D g2d = tp.createGraphics(bill.getWidth(), bill.getHeight(), new DefaultFontMapper()); 
```

如[iText in Action — 2nd Edition](http://itextpdf.com/book/)中的第 14.5.2 节*将文本绘制到 PdfGraphics2D 中*所述，`DefaultFontMapper`您使用的*假设每种字体都使用编码 Cp1252 (WinAnsi)。*（不幸的是，JavaDoc 标头中**没有**记录，`DefaultFontMapper,`仅在其方法的 JavaDoc 中`insertDirectory`。）这将解释您丢失的字符。

*您可以通过向映射器添加自定义`BaseFontParameters`对象来*解决此问题，就像在示例[Text1ToPdf2.java](http://itextpdf.com/examples/iia.php?id=252)中所做的那样`c:/windows/fonts/msgothic.ttc:`

```
// create a font mapper
DefaultFontMapper mapper = new DefaultFontMapper();
// map MS Gothic to the corresponding font program
BaseFontParameters parameters = new BaseFontParameters("c:/windows/fonts/msgothic.ttc,1");
parameters.encoding = BaseFont.IDENTITY_H;
mapper.putName("MS PGothic", parameters );
// Create a Graphics2D object
Graphics2D g2 = new PdfGraphics2D(canvas, 600, 60, mapper); 
```

根据您的用例，对所有使用的字体（可能）执行此操作可能太乏味了，但本书的同一部分解释了替代方案：您可以

*   创建`FontMapper`您自己的实现（例如，通过子类化`DefaultFontMapper`），
*   使用`AsianFontMapper`（如果缺少某些亚洲字符集），或
*   将字形添加为形状，而不是存储在字体中的字符。

这些选项涵盖了书中的多个页面，在这里无法给出一个答案。您可以通过查看示例[Text2ToPdf1.java](http://itextpdf.com/examples/iia.php?id=254)、[Text2ToPdf2.java](http://itextpdf.com/examples/iia.php?id=255)和[Text2ToPdf3.java](http://itextpdf.com/examples/iia.php?id=256)来获得第一印象。

# django - 美味的资源路径

> ID：14827646
> 
> 赞同：0
> 
> 时间：2013-02-12T07:37:17.063
> 
> 标签：django, api, django-models, tastypie

我正在我的 sweetpie api 中设置相关字段。

我的 api.py 文件中有这个：

```
class PeopleResource(ModelResource):
event_id = fields.ForeignKey(EventResource,'event', full=True)
answer_link = fields.ForeignKey(DatePeopleResource,'datepeople', full=True, related_name='datepeople')
class Meta:
    queryset = EventPeople.objects.all()
    resource_name = 'people'
    filtering = {
        'event_id' : ALL,
        'phone_number' : ALL,
        'name' : ALL,
        'answer' : ALL,
    }
    authorization = Authorization()

class DatePeopleResource(ModelResource):
event = fields.ForeignKey(EventResource,'event')
event_date = fields.ForeignKey(DateResource,'event_date')
event_person = fields.ForeignKey(PeopleResource,'event_person', related_name='people')
class Meta:
    queryset = DatePeople.objects.all()
    resource_name = 'datepeople'
    filtering = {
        'event' : ALL,
        'event_person' : ALL,
        'event_date' : ALL,
    }
    authorization = Authorization() 
```

我的问题是与 PeopleResource 相关的 DatePeopleResource 字段有效，但第一个无效。（PeopleResource中与DatePeopleResource相关的一项）

我猜这是因为 DatePeopleResource 尚未定义。在美味的文档中，看起来我必须在调用 DatePeopleResource 之前添加 path.to.api.resource，如下所示：

```
answer_link = fields.ForeignKey(path.to.resource.DatePeopleResource,'datepeople', full=True, related_name='datepeople') 
```

但我不知道路径是什么！我试过'resources'，'api'......我不太明白这条路是什么。

谢谢你的帮助，我卡住了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T09:29:08.233

资源的路径类似于

```
"appname.api.classname" 
```

并且不要忘记把它放在引号中，因为是的，当你想使用它时它还没有定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:08:16.710

您还可以导入 DatePeopleResource 然后使用它来定义与它的关系。例如：

```
from ..api import DatePeopleResource

class EventResource(ModelResource):
     event = fields.ForeignKey(DatePeopleResource, 'event') 
```

这样代码就更干净了。

# matplotlib - pyplot 散点图标记大小

> ID：14827650
> 
> 赞同：526
> 
> 时间：2013-02-12T07:37:29.047
> 
> 标签：matplotlib, marker, scatter

在散点图的 pyplot 文档中：

```
matplotlib.pyplot.scatter(x, y, s=20, c='b', marker='o', cmap=None, norm=None,
                          vmin=None, vmax=None, alpha=None, linewidths=None,
                          faceted=True, verts=None, hold=None, **kwargs) 
```

标记大小

> s：以点^2为单位的大小。它是与 x 和 y 长度相同的标量或数组。

是什么样的单位`points^2`？这是什么意思？是什么`s=100`意思`10 pixel x 10 pixel`？

基本上我正在尝试制作具有不同标记大小的散点图，我想弄清楚这个`s`数字是什么意思。

* * *

## 回答 #1

> 赞同：568
> 
> 时间：2013-02-13T18:59:40.663

这可能是定义大小的一种有点混乱的方式，但您基本上是在指定标记的*区域*。这意味着，要将标记的宽度（或高度）加倍，您需要增加`s`4 倍。 [因为 A = W *H => (2W)* (2H)=4A]

但是，以这种方式定义标记的大小是有原因的。由于面积缩放为宽度的平方，因此将宽度加倍实际上似乎将尺寸增加了 2 倍以上（实际上它增加了 4 倍）。要了解这一点，请考虑以下两个示例及其产生的输出。

```
# doubling the width of markers
x = [0,2,4,6,8,10]
y = [0]*len(x)
s = [20*4**n for n in range(len(x))]
plt.scatter(x,y,s=s)
plt.show() 
```

给

![在此处输入图像描述](../Images/460962f7bfc9fc40c5377ab63596e7ef.png)

请注意大小如何迅速增加。如果相反，我们有

```
# doubling the area of markers
x = [0,2,4,6,8,10]
y = [0]*len(x)
s = [20*2**n for n in range(len(x))]
plt.scatter(x,y,s=s)
plt.show() 
```

给

![在此处输入图像描述](../Images/14b0f5e206030755ea3b6ddfbe8c04be.png)

现在，标记的表观大小以直观的方式大致线性增加。

至于“点”的确切含义，出于绘图目的，它是相当随意的，您可以将所有尺寸按一个常数缩放，直到它们看起来合理为止。

希望这可以帮助！

**编辑：（**回应@Emma的评论）

我的措辞可能令人困惑。问题是关于将圆的宽度加倍，所以在第一张图片中每个圆（当我们从左到右移动时）它的宽度是前一个的两倍，所以对于该区域，这是一个以 4 为底的指数。类似地，第二个例子每个圆圈的*面积*是最后一个圆圈的两倍，它给出了以 2 为底的指数。

然而，在第二个例子中（我们正在缩放区域），加倍区域似乎使圆对眼睛来说大了一倍。因此，如果我们想让一个圆看起来`n`更大，我们将把面积增加一个因子`n`而不是半径，这样表观尺寸就与面积成线性关系。

**编辑**以可视化@TomaszGandor 的评论：

这是标记大小的不同功能的样子：

[![指数、正方形或线性大小](../Images/eb901294e2dff8ad485713b2ec74d1bd.png)](https://i.stack.imgur.com/3H1BQ.png)

```
x = [0,2,4,6,8,10,12,14,16,18]
s_exp = [20*2**n for n in range(len(x))]
s_square = [20*n**2 for n in range(len(x))]
s_linear = [20*n for n in range(len(x))]
plt.scatter(x,[1]*len(x),s=s_exp, label='$s=2^n$', lw=1)
plt.scatter(x,[0]*len(x),s=s_square, label='$s=n^2$')
plt.scatter(x,[-1]*len(x),s=s_linear, label='$s=n$')
plt.ylim(-1.5,1.5)
plt.legend(loc='center left', bbox_to_anchor=(1.1, 0.5), labelspacing=3)
plt.show() 
```

* * *

## 回答 #2

> 赞同：302
> 
> 时间：2017-11-21T00:49:20.717

*因为这里的其他答案声称`s`表示标记的区域，所以我添加了这个答案以澄清情况不一定如此。*

### 以点为单位的大小^2

`s`中的参数`plt.scatter`表示`markersize**2`. 正如文件所说

> `s`：标量或类似数组，形状（n，），可选
> 大小，以点^2为单位。默认为 rcParams['lines.markersize'] ** 2。

这可以从字面上理解。为了获得一个 x 点大的标记，您需要将该数字平方并将其提供给`s`参数。

所以线图的标记大小和散点大小参数之间的关系是正方形。为了生成与大小为 10 点的绘图标记相同大小的散点标记，您可以调用`scatter( .., s=100)`.

[![在此处输入图像描述](../Images/532cffda86eb786774723e57fb2e8f7b.png)](https://i.stack.imgur.com/vxlWd.png)

```
import matplotlib.pyplot as plt

fig,ax = plt.subplots()

ax.plot([0],[0], marker="o",  markersize=10)
ax.plot([0.07,0.93],[0,0],    linewidth=10)
ax.scatter([1],[0],           s=100)

ax.plot([0],[1], marker="o",  markersize=22)
ax.plot([0.14,0.86],[1,1],    linewidth=22)
ax.scatter([1],[1],           s=22**2)

plt.show() 
```

### 连接到“区域”

那么为什么其他答案甚至文档在涉及参数时都谈到“区域” `s`？

当然点**2的单位是面积单位。

*   对于方形标记的特殊情况，标记`marker="s"`的面积确实直接是`s`参数的值。
*   对于一个圆，圆的面积是`area = pi/4*s`。
*   对于其他标记，甚至可能与标记的区域没有任何明显的关系。

[![在此处输入图像描述](../Images/7b83e1d9703e62201f5b9c8eba0cff43.png)](https://i.stack.imgur.com/RcDoA.png)

**`s`然而，在所有情况下，标记的面积都与参数成比例**。这就是将其称为“区域”的动机，尽管在大多数情况下并非如此。

到目前为止，根据与标记面积成比例的某个量来指定散射标记的大小是有意义的，因为当比较不同的斑块而不是其边长或直径时，感知到的是标记的面积。即，将基础数量加倍应该使标记的面积加倍。

[![在此处输入图像描述](../Images/f90d35d588a438253a8ff23850f1b770.png)](https://i.stack.imgur.com/HanbD.png)

### 什么是积分？

到目前为止，散布标记的大小意味着什么的答案是以点为单位给出的。点通常用于排版，其中字体以点指定。线宽通常以点为单位指定。matplotlib 中点的标准大小是每英寸 72 点 (ppi) - 1 点因此是 1/72 英寸。

能够以像素而不是点为单位指定大小可能很有用。如果图形 dpi 也是 72，则 1 点是 1 个像素。如果图形dpi不同（matplotlib默认为`fig.dpi=100`），

```
1 point == fig.dpi/72\. pixels 
```

虽然散点标记的点大小因此对于不同的图形 dpi 看起来会有所不同，但可以生成一个 10 x 10 像素^2 的标记，它总是覆盖相同数量的像素：

[![在此处输入图像描述](../Images/dc930b3f4d49a63b2f441dd632297e76.png)](https://i.stack.imgur.com/SHlDG.png) [![在此处输入图像描述](../Images/d9a3787f7a6584122d076e1cc618a206.png)](https://i.stack.imgur.com/EfEmQ.png) [![在此处输入图像描述](../Images/7b50c1c9e3196c7eed79b33861408e3b.png)](https://i.stack.imgur.com/tO2zx.png)

```
import matplotlib.pyplot as plt

for dpi in [72,100,144]:

    fig,ax = plt.subplots(figsize=(1.5,2), dpi=dpi)
    ax.set_title("fig.dpi={}".format(dpi))

    ax.set_ylim(-3,3)
    ax.set_xlim(-2,2)

    ax.scatter([0],[1], s=10**2, 
               marker="s", linewidth=0, label="100 points^2")
    ax.scatter([1],[1], s=(10*72./fig.dpi)**2, 
               marker="s", linewidth=0, label="100 pixels^2")

    ax.legend(loc=8,framealpha=1, fontsize=8)

    fig.savefig("fig{}.png".format(dpi), bbox_inches="tight")

plt.show() 
```

* * *

如果您对数据单元的分散感兴趣，请查看[此答案](https://stackoverflow.com/a/48174228/4124317)。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2016-04-20T19:24:33.900

它是标记的*区域*。我的意思是，如果你有`s1 = 1000`，那么`s2 = 4000`每个圆的半径之间的关系是：`r_s2 = 2 * r_s1`。见下图：

```
plt.scatter(2, 1, s=4000, c='r')
plt.scatter(2, 1, s=1000 ,c='b')
plt.scatter(2, 1, s=10, c='g') 
```

![在此处输入图像描述](../Images/df6b6aa50dd75d3ad4f4201ec62b80c2.png)

当我看到这个帖子时，我也有同样的疑问，所以我做了这个例子，然后我在屏幕上用尺子测量了半径。

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2017-04-13T06:54:20.497

您可以使用**标记**大小在绘图方法中指定圆的大小

```
import numpy as np
import matplotlib.pyplot as plt

x1 = np.random.randn(20)
x2 = np.random.randn(20)
plt.figure(1)
# you can specify the marker size two ways directly:
plt.plot(x1, 'bo', markersize=20)  # blue circle with size 10 
plt.plot(x2, 'ro', ms=10,)  # ms is just an alias for markersize
plt.show() 
```

从[这里](http://matplotlib.1069221.n5.nabble.com/Change-the-size-of-the-plotted-o-s-td149.html)

[![在此处输入图像描述](../Images/c6ecbf2be79b8f7a86ed0b8341ff5d23.png)](https://i.stack.imgur.com/GjAH1.png)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-06-05T18:20:46.407

为此，我最初也尝试使用“分散”。在浪费了相当多的时间之后 - 我选择了以下解决方案。

```
import matplotlib.pyplot as plt
input_list = [{'x':100,'y':200,'radius':50, 'color':(0.1,0.2,0.3)}]    
output_list = []   
for point in input_list:
    output_list.append(plt.Circle((point['x'], point['y']), point['radius'], color=point['color'], fill=False))
ax = plt.gca(aspect='equal')
ax.cla()
ax.set_xlim((0, 1000))
ax.set_ylim((0, 1000))
for circle in output_list:    
   ax.add_artist(circle) 
```

[![在此处输入图像描述](../Images/7e6bd188d3052ce73ff42e0d967bb6cc.png)](https://i.stack.imgur.com/CkNei.png)

这是基于对 [这个问题的回答](https://stackoverflow.com/questions/9215658/plot-a-circle-with-pyplot)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-26T20:47:22.723

如果圆的大小对应于参数的`s=parameter`平方，则为附加到大小数组的每个元素分配一个平方根，如下所示：`s=[1, 1.414, 1.73, 2.0, 2.24]`这样当它获取这些值并返回它们时，它们的相对大小增加将是平方级数的平方根，返回线性级数。

如果我要在输出到绘图时对每一个进行平方：`output=[1, 2, 3, 4, 5]`. 尝试列表解释：`s=[numpy.sqrt(i) for i in s]`

# jsp - 如何使用 Jsp 页面检查驻留在 ArrayList 中的类中的属性值

> ID：14827652
> 
> 赞同：0
> 
> 时间：2013-02-12T07:37:37.070
> 
> 标签：jsp, struts, jstl

我有`Arraylist`，`Request scope`其中包含所有`Students`对象..我正在显示该数据`JSP page`

```
class Student 
  {

   int sno;
   String name;
   String type; // here type can be either R or D
    .
    .
    .
  } 
```

当我显示`Student obj`数据时我想检查`student type` `if type=D`然后我想添加`<select>`框怎么做？？？

我正在使用`struts 1.3`和`JDBC`

我的代码是

```
 <logic:iterate id="student" name="allstudents" scope="request">

   <bean:write name="student"   property="sno" format="#"/><br>
   <bean:write name="student"   property="name" /><br>
   <bean:write name="student"   property="type" /><br>

   // here i want to display <select> if type =D
    .
    .
    .
 </logic:iterate> 
```

请帮我

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:59:38.430

帮自己一个忙，学习 JSTL。完成后，使用`<c:forEach>`、和 标签：`<c:out>``<fmt:formatNumber>``<c:if>`

```
<c:forEach var="student" items="${allstudents}">

    <fmt:formatNumber value="${student.sno}" pattern="#"/>
    <c:out value="${student.name}"/>
    <c:out value="${student.type}"/>
    <c:if test="${student.type == 'D'}>
        ...
    </c:if>

</c:forEach> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T08:57:17.443

```
i tried like this this is working fine...
thank you JB Nizet....

 <logic:iterate id="student" name="allstudents" scope="request">

       <bean:write name="student"   property="sno" format="#"/><br>
       <bean:write name="student"   property="name" /><br>
       <bean:write name="student"   property="type" /><br>

       <c:if test="${student.type == 'D'}>
       ......
       </c:if>

     </logic:iterate> 
```

# ssas - 选择多个时间段时 MDX 计算度量的聚合

> ID：14827654
> 
> 赞同：3
> 
> 时间：2013-02-12T07:37:45.397
> 
> 标签：ssas, mdx

在我的 SSAS 多维数据集中，我在 MDX 中定义了几个度量，除了跨时间段的一种聚合类型之外，它们工作正常。有些人不聚合（也不打算），但一个人确实聚合但给出了错误的答案。我可以看到原因，但不知道该怎么做才能防止它。

下面的 Excel 屏幕截图中突出显示的总数（该死，不允许包含图像，恢复到老式表格）是最简单的错误情况。在该示例中，23,621*不是*5,713 和 6,837 的总和。

```
 Active Commitments    Acquisitions    Net Lost Commitments    Growth in Commitments
2009   88,526                13,185          5,713                   7,472
2010   92,125                10,436          6,837                   3,599
Total                        23,621          23,621 
```

1.  主动承诺工作正常。它是针对某个时间点计算的，不应跨时间段汇总。
2.  收购工作正常。
3.  `[Measures].[Growth in Commitments] = ([Measures].[Active Commitments],[Date Dimension].[Fiscal Year Hierarchy].currentMember) - ([Measures].[Active Commitments],[Date Dimension].[Fiscal Year Hierarchy].prevMember)`
4.  `[Measures].[Net Lost Commitments] = ([Measures].[Acquisitions] - [Measures].[Growth in Commitments])`

屏幕截图中发生的情况是，净损失承诺总额是根据收购总额 (23,621) 减去承诺增长总额（为空）计算得出的。

净损失承诺的聚合是有意义的，适用于非时间维度。但是我希望它在选择多个时间段而不是错误值时显示为空。请注意，这与简单地禁用时间维度上的所有聚合不同。Net Lost Commitment 的聚合在时间层次结构上工作得很好——屏幕截图显示了 2009 年和 2010 年的正确值，如果扩展到季度或月，您仍然会得到正确的值。只有选择多个时间段时，聚合才会失败。

所以我的问题是如何更改净损失承诺的定义，以便在选择多个时间段时不会聚合，而是继续在所有其他维度上聚合？例如，有没有一种在 MDX 中编写的方法：

```
CREATE MEMBER CURRENTCUBE.[Measures].[Net Lost Commitments]
 AS (iif([Date Dimension].[Fiscal Year Hierarchy].**MultipleMembersSelected**
        , null
        , [Measures].[Acquisitions] - [Measures].[Growth in Commitments])) 
```

高级感谢，

马特。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:47:56.933

来自另一个来源的建议为我解决了这个问题。我可以用 -

```
iif(iserror([Date Dimension].[Fiscal Year Hierarchy].CurrentMember), 
   , null
   , [Measures].[Acquisitions] - [Measures].[Growth in Commitments])) 
```

CurrentMember 将在选择多个成员时返回错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:35:39.510

我对问题的第一部分不太了解，抱歉......但最后我想你问如何检测来自特定维度的多个成员是否在 MDX 中使用。

您可以检查两个轴中的任何一个作为字符串，并使用它来形成真/假测试。请记住，您可以在 MDX 的 Microsoft 实现中使用 VBA 函数。

我建议`InStr(1, SetToStr(StrToSet("Axis(1)")), "whatever") = 0`作为一种方法来制作你的第一个参数`IIF`。

这将获取第一个轴上的成员集，将其转换为字符串，并查看是否存在某个字符串（它返回该字符串在另一个字符串中的位置）。零表示未找到（因此返回 true）。您可能需要改用零轴，或者可能同时检查两者。

要查看是否使用了来自同一维度的多个成员，上面的测试字符串必须更复杂。您想知道是否`whatever`发生一次或两次。您可以测试字符串的第一次出现是否与最后一次出现在同一位置（通过向后搜索）；虽然这也可能意味着根本找不到字符串：

```
IIF(
   InStr(1, bigstring, littlestring) = InStrRev(bigstring, littlestring), 
   'used once', 
   'used twice or not at all'
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-24T17:00:31.890

我在研究我自己的问题的解决方案时遇到了这篇文章，当涉及过滤器时，随着时间的推移计算测量的总数。我认为您可以修复计算，而不是通过使用动态集来抑制它们。[这对我有用](https://stackoverflow.com/questions/17820202/calculating-the-number-of-days-in-a-time-dimension-node-with-grand-total)。

# c++ - Linux/Windows 睡眠时间

> ID：14827660
> 
> 赞同：2
> 
> 时间：2013-02-12T07:38:03.930
> 
> 标签：c++, python, linux, windows, bash

是否可以检查（在 bash/python/C++ 中）在系统（Linux/Windows）中还剩多少睡眠时间 - 我需要它来创建在 linux 和 windows 上工作的双重程序，防止工作时进入睡眠模式在另一个上（通过 TCP）。

不，我不能只是增加系统进入睡眠的时间——因为如果我离开桌面计算机必须进入睡眠（或者更确切地说是阻止模式——或者任何它被称为的——它们只需要被密码阻止——安全问题）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:21:18.673

对于 Windows：

[SetThreadExecutionState](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373208%28v=vs.85%29.aspx)会告诉系统不要进入睡眠模式，它也可以重置空闲计时器。

如果您知道时间限制，您可以使用[GetLastInputInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646302%28v=vs.85%29.aspx)和一个简单的减法来了解您在系统进入睡眠之前还剩下多少时间。

# sql - 如何在 Netezza SQL 中编写派生查询？

> ID：14827664
> 
> 赞同：1
> 
> 时间：2013-02-12T07:38:10.947
> 
> 标签：sql, netezza

我需要查询基于邀请ID的数据。对于每个被邀请人，我需要有前 5 个 ID 和 ID 描述。

我看到我写的查询花费了全世界所有的时间来获取。我没有注意到错误或任何错误。

代码是：

```
SELECT count(distinct ID),
  IDdesc,
  inviteid,
  A
FROM (
  SELECT
    ID,
    IDdesc,
    inviteid,
    RANK() OVER(order by  invtypeid asc ) A
  FROM Fact_s
    --WHERE dateid ='26012013'
  GROUP BY invteid,IDdesc,ID
  ORDER BY invteid,IDdesc,ID
) B
WHERE A <=5
GROUP BY A, IDDESC, inviteid
ORDER BY A 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:57:49.787

我不确定我是否完全理解您的要求，但据我所知`group by`，派生表中的 没有必要（`order by`正如 Mark 提到的那样），因为您使用的是窗口函数。

你可能想要`row_number()`而不是`rank()`在那里。

在外部查询中包含的结果`rank()`似乎也很可疑。

因此，这导致以下语句：

```
SELECT count(distinct ID),
       IDdesc,
       inviteid
FROM (
  SELECT ID,
         IDdesc,
         inviteid,
         row_number() OVER (order by invtypeid asc ) as rn
  FROM Fact_s
) B
WHERE rn <= 5
GROUP BY IDDESC, inviteid; 
```

# c - 为什么static和extern变量的值都赋值为0？

> ID：14827665
> 
> 赞同：0
> 
> 时间：2013-02-12T07:38:14.707
> 
> 标签：c

为什么静态变量被赋值为0？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:39:01.347

因为标准要求这是真的。

C99 标准的 §6.7.8.10 说：

> 如果具有自动存储持续时间的对象未显式初始化，则其值是不确定的。如果具有静态存储持续时间的对象未显式初始化，则：
> 
> — 如果它具有指针类型，则将其初始化为空指针；
> 
> — 如果它具有算术类型，则将其初始化为（正或无符号）零；
> 
> — 如果是聚合，则每个成员都根据这些规则（递归地）初始化；
> 
> — 如果是联合，则根据这些规则（递归地）初始化第一个命名成员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T07:42:31.240

初始化为 0 是有意义的——它使事情变得更可预测。问题可能应该是“为什么堆栈变量**没有**初始化？”

这个问题的答案可能是性能 - 每次进入函数时都需要初始化堆栈变量，如果实际上不需要初始化，这可能会浪费时间。静态变量是在加载程序的时候初始化的，所以开销不大。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T07:53:17.550

因为它们是唯一可以初始化而不会导致运行时性能损失的变量存储类。

自动存储类变量（默认值）未初始化，因为它们可能不会被使用。在第一次调用函数之前，不能保证函数*内*的静态变量被初始化。

零是一个合理的通用默认初始化器，原因如下：在 char 数组上，它产生一个空字符串，它启动一个数组索引计数，并产生一个 NULL 指针，等等。

就我个人而言，我总是明确地初始化静态，甚至为零。这部分是纪录片，换句话说“我真的想要零，不要改变它”。

# java - 用于存储大量长值列表的数据结构

> ID：14827669
> 
> 赞同：0
> 
> 时间：2013-02-12T07:38:35.300
> 
> 标签：java, performance, caching, data-structures

我在我的 Java 程序中缓存长索引列表，它导致内存溢出。因此，决定只缓存所有连续索引的开始和结束索引，并重写 ArrayList 所需的 API。现在，什么数据结构最适合实现起始索引缓存？使用 TreeMap 并将开始索引作为键并将结束索引作为值是否更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:09:15.840

最紧凑的表示将在很大程度上取决于您的特定应用程序中的索引分布。

如果您的索引密集聚集，则 mvp 建议的基于范围的表示可能会很好地工作（您可能会查看光栅图形的行程编码的实现，因为它们是类似的问题）。

如果您的索引未在密集运行中聚集，则该编码实际上会增加内存消耗。对于稀疏的列表，您可以查看原始数据结构，例如 FastUtil 中的 LongArrayList 或[LongOpenHashSet ，或](http://fastutil.di.unimi.it/)[Gnu Trove](http://trove.starlight-systems.com/)或[Colt](http://acs.lbl.gov/software/colt/)中的类似结构。在大多数 VM 中，ArrayList 中的每个 Long 对象消耗 20 多个字节，而原始 long 仅消耗 8 个字节。因此，您通常可以使用特定于类型的原始集合而不是标准集合框架来实现显着的内存节省。

我对 FastUtil 非常满意，但您可能会发现另一种更适合您的解决方案。一点模拟和内存分析应该可以帮助您确定您自己的数据的最有效表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:27:12.443

如果我是你，我会使用位串存储的一些变体。

在 Java 中，位字符串由[BitSet](http://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html)实现。

例如，要表示唯一的 32 位整数的任意列表，您可以将其存储为 40 亿位长的单个位字符串，因此这将占用 4 bln / 8 位 = 512MB 的内存。这是很多，但这是*最坏的情况*。

但是，你可以比这聪明得多。例如，您可以将其存储为一些较小的固定（或动态）大小的位字符串的列表或二叉树，例如 65536 位或更少（或 8KB 或更少）。换句话说，这棵树中的每个叶子对象都有一个小标题，表示起始偏移量和长度（为简单起见，可能是 2 的幂，但不一定是），以及存储实际数组成员的位串。为了提高效率，您可以选择使用 gzip 或类似算法压缩此位字符串 - 它会使访问速度变慢，但可以将内存效率提高 10 倍或更多。

如果您的 2000 万个索引元素几乎是连续的（不是很稀疏），那么在内存中表示它应该只需要大约 2000 万/8 位 ~= 200 万位 = 2 MB。如果你对它进行 gzip，它的总大小可能低于 1MB。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T07:09:35.510

大多数 BitSet（压缩或未压缩）实现都是针对整数的。这是一个长期的：[http](http://www.censhare.com/en/aktuelles/censhare-labs/yet-another-compressed-bitset) ://www.censhare.com/en/aktuelles/censhare-labs/yet-another-compressed-bitset ，它的工作方式类似于有序的原始长散列集或长到长散列映射。

# facebook - Facebook 搜索操纵关键词

> ID：14827671
> 
> 赞同：0
> 
> 时间：2013-02-12T07:38:43.773
> 
> 标签：facebook, api, search

当使用 Facebook Graph API 搜索公共帖子时，Facebook 似乎以不明显的方式对搜索词进行了畸形处理。例如，搜索“咖啡”将只返回包含“咖啡”的帖子（注意 e）。当搜索某些以“s”结尾的复数词时，Facebook 会删除“s”。现在的问题是搜索某些非英语术语，例如“Wilders”（人名），将返回英语单词“wilder”的结果。

这已被要求 Facebook 开发支持，但他们声称这是“设计使然”。但是，如果这是设计使然，我想知道如何才能真正搜索“咖啡”、“胡萝卜”或“野蛮人”，而不会使我的搜索词格式错误。

另请参阅[http://developers.facebook.com/bugs/336651873112920](http://developers.facebook.com/bugs/336651873112920)和[http://developers.facebook.com/bugs/591586327522090](http://developers.facebook.com/bugs/591586327522090)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-12T07:43:54.663

如果每个搜索词的最后一个字母会被截断，那么请尝试在每个词的末尾始终添加一个字母。

# jsf - 如何通过primefaces中的bean设置selectOneRadio / selectCheckboxMenu中的默认选定项目

> ID：14827677
> 
> 赞同：2
> 
> 时间：2013-02-12T07:39:13.180
> 
> 标签：jsf, primefaces

我想创建`selectOneRadio`列表以及`selectCheckboxMenu`哪些项目来自相关的 bean 对象。对于未选择的列表，它运行良好。但是我如何为这些列表提供默认选择的某些项目。我现在的`selectCheckboxMenu`代码是这样的。

```
<p:selectCheckboxMenu id="trdays" 
             value="#{mybean.selectedDay}"
             label="Select Days">
      <f:selectItems value="#{mybean.dayList}" var="day"
       itemValue="#{day.value}" itemLabel="#{day.name}"/>
</p:selectCheckboxMenu> 
```

当页面加载并且用户还没有做任何事情时，它应该看起来像这样。

![默认页面显示](../Images/75ba5ca98173631349d8a1481ff8a66d.png)

**编辑** 日课：-

```
public class Day{

  private String name;
  private String value;

  //getters and setters

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T08:13:30.340

selectCheckboxMenu 组件的 Value 属性应该获取您的默认值。**在 bean 方面，您应该为selectedDayList**和 all **daylist**编写一个 getter 。

例子：

```
@PostConstruct
public void init() {
            dayList= new ArrayList<String>();
            dayList.add("Mon");
            dayList.add("Tue");
            dayList.add("Wed");
            dayList.add("Thu");
            dayList.add("Fri");
            dayList.add("Sat");
            dayList.add("Sun");

            selectedDayList= new ArrayList<String>();
            selectedDayList.add("Tue");
            selectedDayList.add("Wed");
}

public List<String> getDayList()
    {
        return dayList;
    }

public List<String> getSelectedDaylist()
    {
        return selectedDayList;
    } 
```

.xhtml 页面应该是这样的。

```
<p:selectCheckboxMenu id="trdays" 
             value="#{mybean.selectedDaylist}"
             label="Select Days">
      <f:selectItems value="#{mybean.dayList}" var="day"
       itemValue="#{day.value}" itemLabel="#{day.name}"/>
</p:selectCheckboxMenu> 
```

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T08:08:52.970

只需`selectedDay`在 init 方法中的列表（或数组）中添加默认值（带`@PostConstruct`注释）。这些值应与相应属性具有相同的值`itemValue`（在您的情况下为`day.value`）。

# ruby-on-rails - 什么是 Rails 应用程序中的可修剪自重？

> ID：14827680
> 
> 赞同：1
> 
> 时间：2013-02-12T07:39:21.410
> 
> 标签：ruby-on-rails, ruby-on-rails-3

是否有任何理由（不）删除 Rails 应用程序中未使用的自动生成的 .css/.js/_helper.rb 文件？为了简单的清洁目的，我将摆脱一些，并想确保我没有破坏任何东西或违反我不知道的 Rails 最佳实践。

各种[谷](https://www.google.com/#hl=en&tbo=d&sclient=psy-ab&q=removing+rails+deadweight&oq=removing+rails+deadweight&gs_l=serp.3..33i21.560333.565471.0.565538.27.23.1.3.3.0.162.2061.15j7.22.0.les;..0.0...1c.1.2.serp.ktl5g9dqNWk&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=cecfd734039d8d45&biw=1281&bih=592)[歌搜索](https://www.google.com/#hl=en&tbo=d&sclient=psy-ab&q=rails+remove+unused+js&oq=rails+remove+unused+js&gs_l=serp.3...5475.7342.2.8147.3.3.0.0.0.0.116.295.1j2.3.0.les;..0.0...1c.1.2.serp.yliZ0l47iOk&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=cecfd734039d8d45&biw=1281&bih=592)在这个问题上并不是特别有成果（结果倾向于用于发现哪些 js 函数/css 类没有被使用的工具），所以我希望你们原谅这个问题有点自以为是[。](https://www.google.com/#hl=en&tbo=d&sclient=psy-ab&q=cleaning+up+a+rails+app&oq=cleaning+up+a+rails+app&gs_l=hp.3...132.4355.0.4555.31.24.0.4.4.0.174.2431.14j10.24.0.les;..0.0...1c.1.2.hp.Tk9q5Ts8rPI&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.42261806,d.cGE&fp=cecfd734039d8d45&biw=916&bih=592)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T08:03:17.723

据我所知，你没有理由不能，如果有一个自动生成的 css/js 文件并且我没有使用它，那么我将其删除。有时我会得到像这样生成的文件夹.css.scss 的文件，不要使用它，所以我摆脱它。

至于帮助文件，如果你不使用，那么你可以删除。

这都是我的观点和经验，当然如果有人有不同的看法，请分享

# linux - 所有文件夹和子文件夹的列表

> ID：14827686
> 
> 赞同：19
> 
> 时间：2013-02-12T07:40:03.320
> 
> 标签：linux, ls

在 Linux 中，我想找出所有文件夹/子文件夹名称并重定向到文本文件

我试过 `ls -alR > list.txt`了，但它提供了所有文件+文件夹

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-02-12T07:42:58.200

您可以使用`find`

```
find . -type d > output.txt 
```

或者`tree`

```
tree -d > output.txt 
```

`tree`, 如果您的系统上没有安装。

如果您正在使用`ubuntu`

```
sudo apt-get install tree 
```

如果您正在使用`mac os`.

```
brew install tree 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-12T07:42:50.380

```
find . -type d > list.txt 
```

将列出当前路径下的所有目录和子目录。如果要列出当前路径以外的路径下的所有目录，请将 更改`.`为该其他路径。

如果要排除某些目录，可以用否定条件过滤掉它们：

```
find . -type d ! -name "~snapshot" > list.txt 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T08:53:44.703

除了`find`在其他答案中列出的那样，更好的外壳允许递归 glob 和过滤 glob 匹配，`zsh`例如......

```
ls -lad **/*(/) 
```

...列出所有目录，同时保留您想要的所有“-l”详细信息，否则您需要使用类似...的东西重新创建这些详细信息

```
find . -type d -exec ls -ld {} \; 
```

（不像其他答案建议的那么容易）

find 的好处是它更独立于 shell - 更便携，甚至对于`system()`来自 C/C++ 程序等的调用也是如此。

# javascript - 如果我们在 Node.js 中扩展任何对象的原型，会有什么问题？

> ID：14827688
> 
> 赞同：1
> 
> 时间：2013-02-12T07:40:06.543
> 
> 标签：javascript, node.js, coding-style, standards

考虑以下代码：

```
var AryUser = new Array();
AryUser.prototype.HasUser = function() {
  if(this.length > 0)
    return true;
  else
    return false;
} 
```

我已经在我的 Node.js 项目中的一些对象上使用原型扩展。我遇到了[一篇文章](http://nodeguide.com/style.html#extending-prototypes)，其中指出这是不好的做法。在执行此类功能期间是否会在服务器上产生开销？

谁能告诉我是什么原因？（任何官方文件推荐都会有很大帮助）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T07:50:54.013

您没有在上面提供的示例中扩展任何原型。该`prototype`属性仅存在于函数上 -`AryUser`是一个数组。上面的代码会抛出一个`ReferenceError`.

您可能希望了解原型继承在 JavaScript 中的工作原理。阅读以下答案：[https ://stackoverflow.com/a/8096017/783743](https://stackoverflow.com/a/8096017/783743)

话虽如此，扩展**原生**函数的原型（如`Function`,`Object`和`Array`. 这是因为您可能会覆盖其他人的函数，可能会破坏他们的代码。

扩展本机函数原型仅推荐用于[猴子补丁](http://en.wikipedia.org/wiki/Monkey_patch "猴子补丁 - 维基百科，免费的百科全书")。阅读以下文章，了解[扩展原生函数原型的优缺点](http://perfectionkills.com/extending-built-in-native-objects-evil-or-not/ "完美扼杀 » 扩展内置的原生对象。 恶不恶？")。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-09T08:45:25.233

我知道，我迟到了。我有东西要分享。这是实现您想要做的事情的一种方法。

```
function UserArray() {
  Array.call(this);
}

UserArray.prototype = Object.create(Array.prototype);
UserArray.prototype.constructor = UserArray;
UserArray.prototype.hasUser = function() {
    return this.length > 0;
};

var userArray = new UserArray();

userArray.hasUser();//false;
userArray.push({name: 'foo'});
userArray.hasUser();//true;
userArray instanceof UserArray;//true
userArray instanceof Array;//true
typeof Array.prototype.hasUser === 'undefined'//true 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-12T07:57:19.103

也许这些文章提供了一些见解：

*   [http://javascriptweblog.wordpress.com/2011/12/05/extending-javascript-natives/](http://javascriptweblog.wordpress.com/2011/12/05/extending-javascript-natives/)
*   [http://www.nczonline.net/blog/2010/03/02/maintainable-javascript-dont-modify-objects-you-down-own/](http://www.nczonline.net/blog/2010/03/02/maintainable-javascript-dont-modify-objects-you-down-own/)
*   [http://perfectkills.com/extending-built-in-native-objects-evil-or-not/](http://perfectionkills.com/extending-built-in-native-objects-evil-or-not/)

底线是：扩展你不拥有的对象的原型如果浏览器发生变化，它就不是面向未来的，并且你会遇到其他人做同样事情的库的问题。

# hadoop - cassandra 数据库上的 Hadoop

> ID：14827693
> 
> 赞同：10
> 
> 时间：2013-02-12T07:40:34.880
> 
> 标签：hadoop, cassandra, hive

我正在使用 Cassandra 来存储我的数据并使用 hive 来处理我的数据。我有 5 台机器，我在其上设置了 cassandra，2 台机器用作分析节点（运行 hive 的地方）所以我想问一下 hive 是否只在两台机器（分析节点）上进行 map reduce 并将数据带到那里或它移动处理/计算到 5 个 cassandra 节点以及处理/计算这些机器上的数据。（我知道在 hadoop 中，进程移动到数据而不是要处理的数据）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-12T08:52:10.580

如果你有兴趣将 Hadoop 和 Cassandra 结合起来——第一个链接应该是围绕这个概念构建的 DataStax 公司。[http://www.datastax.com/](http://www.datastax.com/) 他们用 cassandra 代替 HDFS 构建并支持 hadoop。据我所知 - 他们确实有数据局部性：[http ://blog.octo.com/en/introduction-to-datastax-brisk-an-hadoop-and-cassandra-distribution/](http://blog.octo.com/en/introduction-to-datastax-brisk-an-hadoop-and-cassandra-distribution/)

如果您针对 cassandra Cassandra 和 MapReduce 运行 MapReduce，那么关于 Hadoop 和 Cassandra 数据局部性有一个很好的答案 [- 最低设置要求](https://stackoverflow.com/questions/12583834/cassandra-and-mapreduce-minimal-setup-requirements)

关于您的问题 - 有一个权衡：a）如果您在单独的节点上运行 Hadoop / Hive，您会失去数据局部性，并且您的数据吞吐量受到网络带宽的限制。
b）如果您在与 cassandra 运行相同的节点上运行 hadoop / Hive - 您可以获得数据局部性，但 Hive 查询背后的 MapReduce 处理可能会阻塞您的网络（和其他资源），从而影响您从 cassandra 获得的服务质量。

如果您的 cassandra 集群的性能至关重要，我的建议是使用单独的配置单元节点。
如果您的 cassandra 主要用作数据存储并且不处理实时请求 - 那么在每个节点上运行 hive 将提高性能和硬件利用率。

# xcode4.6 - 升级到 OSX Lion 和 XCode 4.6 后缺少音频单元模板

> ID：14827694
> 
> 赞同：1
> 
> 时间：2013-02-12T07:40:34.570
> 
> 标签：xcode4.6

在以前的 XCode 版本中，我可以选择在 XCode 的 New Project 设置中选择开发 New Audio Unit Effect Plugin 和 New Audio Unit Instrument。

更新到 OSX Lion 并更新到 XCode 4.6 后，这些选项均不可用。如何恢复这些选项或获取模板？我还在另一台 Mac 上安装了 XCode 4.6，结果相同。

# java - GWT 中事件总线的动机

> ID：14827707
> 
> 赞同：6
> 
> 时间：2013-02-12T07:42:15.550
> 
> 标签：java, gwt, web-applications

我正在 GWT 中创建一个类似 MVP 的应用程序。

*   有多个面板，每个面板始终可见。
*   每个面板都有一个 Presenter，并且有一个 AppController 位于所有 Presenter 之上。
*   有一些应用程序级别的事件发生在一个 Presenter 中，但对其他 Presenter 有影响。
*   为此建议的架构似乎涉及事件总线。但是，我不确定我是否看到了与更简单的东西相比的优势。
*   特别是，简单地允许 AppController（并且只有 AppController）订阅来自任何 Presenter 的事件不是更干净吗？AppController 然后可以告诉每个 Presenter 做什么，给定事件。
*   “事件总线”似乎是一个准全局变量。但是，如果您可以使用更精确定义的方法（即 AppController 在每个 Presenter 上调用的方法）来完成同样的事情，那不是更可取吗？

更准确地说，为什么要引入事件总线，而不是简单地让事件“冒泡”到适当的决策级别？对我来说，这似乎是 MVP 概念最直接的扩展，它不需要事件总线的新想法。我不明白引入事件总线是为了解决什么问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T07:52:19.407

事件总线的优点是代码分离。

您可以将自定义事件发送到总线，而不再需要关心您的事件。每个演示者都只订阅它真正需要知道的事件。这将导致代码更简洁，因为您不必创建一个必须知道所有演示者才能将事件委托给它们的调度程序。

在我看来，eventbus 是一个非常好的东西，它可以让代码简洁易懂。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T09:26:02.307

您提出的方法很好，但有一个很大的缺点：当您的应用程序增长时，它需要意大利面条式代码。

[此演示文稿](http://www.infoq.com/presentations/Android-Design)是关于 Android 的，但 GWT 的论点也成立。

另请参阅Google I/O 2009 上的[这个著名演示文稿](http://www.google.com/events/io/2009/sessions/GoogleWebToolkitBestPractices.html)，其中明确讨论了*使用事件总线来对抗意大利面条代码*（如果您还没有*的话，请务必观看）。*

最后，[这篇博](http://freshbrewedcode.com/jimcowart/2013/02/07/client-side-messaging-essentials/)文讨论了 JS 中的*观察者*与*中介*者模式：在 GWT 中，*观察者模式*由事件处理程序实现，而*中介者模式*由事件总线实现。这是*tl;dr*：« 在组件内部“本地”使用观察者，在组件之间“远程”使用调解器。»

# javascript - javascript: 交换 DOM 节点

> ID：14827708
> 
> 赞同：1
> 
> 时间：2013-02-12T07:42:19.520
> 
> 标签：javascript, dom

我想要做的是交换两个 HTML DOM 节点。

让我们看看下面的 HTML 列表和下面的交换按钮：

```
 <ul class="center-text">
        <li>0</li>
        <li>1</li>
        <li>2</li>
    </ul>

    <form class="center-text">
        <button id="swapButton">Swap</button>
    </form> 
```

这是我的 JS 代码：

```
// the "ready" method is the only jQuery method used in the code
$(document).ready(function(){
    document.getElementById("swapButton").onclick = function() {
        var ul = document.getElementsByTagName("ul")[0];

        // pseudo-swapping: insert "child2" before "child0"
        // (indexes are 1 and 5 because of the TextNodes between list nodes)
        ul.insertBefore(ul.childNodes.item(5), ul.childNodes.item(1));                      
    }
}); 
```

因此，单击交换按钮时会发生以下情况：
项目确实交换了。但不知何故（比如说1/4）秒后，它们又恢复到原来的位置，即自动换回。我的问题是：为什么？

PS：代码仅用于教育目的，我只是试图了解门后发生的事情，所以请不要发布任何替代 jQuery 方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T07:49:05.640

```
$(document).ready(function(){
    document.getElementById("swapButton").onclick = function(e) {
        e.preventDefault();
        var ul = document.getElementsByTagName("ul")[0];
        ul.insertBefore(ul.childNodes.item(5), ul.childNodes.item(1));                      
    }
}); 
```

这是因为按钮将页面重定向到同一页面。并恢复所有。您需要防止按钮的默认行为。

# powershell - 使用 System.IO.Compression.FileSystem 将完整目录添加到现有 zip 文件

> ID：14827716
> 
> 赞同：2
> 
> 时间：2013-02-12T07:42:45.203
> 
> 标签：powershell, powershell-3.0

以下示例可在 Internet 和本网站上追溯，作为使用 .NET Framework 4.5 压缩文件的解决方案。它可以工作，但是当存档已经存在时，它会报错，因为它似乎只能压缩文件夹并创建一个新的 zip 文件：

```
[Reflection.Assembly]::LoadWithPartialName( "System.IO.Compression.FileSystem" )
$src_folder = "D:\stuff"
$destfile = "D:\stuff.zip"
$compressionLevel = [System.IO.Compression.CompressionLevel]::Optimal
$includebasedir = $false
[System.IO.Compression.ZipFile]::CreateFromDirectory($src_folder,$destfile,$compressionLevel, $includebasedir ) 
```

我已经尝试过 [System.IO.Compression.ZipFileExtensions]，但是您可以将文件添加到现有存档中，但只能通过单独添加它们，不允许使用文件夹或通配符：

```
[Reflection.Assembly]::LoadWithPartialName( "System.IO.Compression.FileSystem" )
$src_folder = "D:\stuff" #also tried D:\stuff\ or D:stuff\*
$destfile = "D:\stuff.zip"
$destfile2=[System.IO.Compression.ZipFile]::Open($destfile, "Update")
$compressionLevel = [System.IO.Compression.CompressionLevel]::Optimal
[System.IO.Compression.ZipFileExtensions]::CreateEntryFromFile($destfile2,$src_folder,"\",$compressionlevel)
$archiver.Dispose() 
```

我已经创建了单独处理文件的脚本，但是处理同一个存档中的几千个文件需要很长时间，所以我的问题是：有没有办法将完整的文件夹添加到现有的 zip 存档中立刻？

顺便说一句，我很惊讶 System.IO.Compression.ZipFile 的速度有多快，非常好。

看了 Noam 的回答后，我意识到这很容易，我这样解决了我的问题：

```
[Reflection.Assembly]::LoadWithPartialName( "System.IO.Compression.FileSystem" )
$src_folder = "D:\stuff\" 
$destfile = "D:\stuff.zip"
$destfile2=[System.IO.Compression.ZipFile]::Open($destfile, "Update")
$compressionLevel = [System.IO.Compression.CompressionLevel]::Optimal
$in = Get-ChildItem $src_folder -Recurse | where {!$_.PsisContainer}| select -expand fullName
[array]$files = $in
ForEach ($file In $files) 
{
        $file2 = $file #whatever you want to call it in the zip
        $null = [System.IO.Compression.ZipFileExtensions]::CreateEntryFromFile($destfile2,$file,$file2,$compressionlevel)
}
$archiver.Dispose() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-11T10:54:51.417

Noam 的回答和 Jurjen：

```
[Reflection.Assembly]::LoadWithPartialName( "System.IO.Compression.FileSystem" )
$src_folder = "D:\stuff\" 
$destfile = "D:\stuff.zip"
$destfile2=[System.IO.Compression.ZipFile]::Open($destfile, "Update")
$compressionLevel = [System.IO.Compression.CompressionLevel]::Optimal
$in = Get-ChildItem $src_folder -Recurse | where {!$_.PsisContainer}| select -expand fullName
[array]$files = $in
ForEach ($file In $files) 
{
        $file2 = $file #whatever you want to call it in the zip
        $null = [System.IO.Compression.ZipFileExtensions]::CreateEntryFromFile($destfile2,$file,$file2,$compressionlevel)
}
$archiver.Dispose() 
```

# ruby-on-rails - 未初始化的常量邮件程序 DEFAULT_FROM

> ID：14827718
> 
> 赞同：0
> 
> 时间：2013-02-12T07:42:48.843
> 
> 标签：ruby-on-rails, actionmailer

似乎当我在生产模式下运行我的应用程序时，我在控制台中得到以下信息：

```
 /home/Desktop/Portal/app/mailers/holiday_mailer.rb:2:in 
`<class:HolidayMailer>': uninitialized constant HolidayMailer::DEFAULT_FROM (NameError) 
```

我查看了以下 SO 问题[Rails 3 Action Mailer uninitialized constant](https://stackoverflow.com/questions/9269306/rails-3-action-mailer-uninitialized-constant)。看来我没有犯这个错误，因为我的设置如下：

**环境.rb**

```
require File.expand_path('../application', __FILE__)

# Initialize the rails application
Portal::Application.initialize!
ActionMailer::Base.delivery_method = :smtp
DEFAULT_FROM = "portal@gmail.com" 
```

**假日邮递员**

```
class HolidayMailer < ActionMailer::Base
  default :from => DEFAULT_FROM

  def holiday_confirmation(holiday)
    @holiday = holiday
    mail(:to => holiday.user.email, :subject => "Your Absence Request")
  end
end 
```

**假日控制器**

```
 def update()
    admin = User.find(current_user.role? :administrator)
    holiday = Holiday.find(params[:id])
    user = User.find(id = holiday.user_id)

    if holiday.update_attributes(params[:holiday])
      if holiday.state == "approved"
        user.absentdays = user.absentdays - (holiday.days_used).to_i
        user.save
      end
      redirect_to absence_path, :notice => "request updated!"
      #email the user to tell them the state of their holiday
      HolidayMailer.holiday_confirmation(holiday).deliver
    else
      render 'edit'
    end
  end 
```

似乎这是错误的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:05:58.167

我不知道为什么它会在生产中引发错误，但我可以告诉你如何解决这个问题。

我在我的 rails 3.2.11 应用程序中复制了这个场景，并且在生产中遇到了同样的错误。有两种可能的修复方法。

1.  将变量 DEFAULT_FROM 移动到 environment/production.rb
2.  为邮件设置创建一个初始化文件 (config/initializers/mail_settings.rb) 并将此变量 DEFAULT_FROM 放入该文件中。

    第二种方法很简洁，因为它是邮件程序的配置，并且该变量将在开发和生产环境中都可用。这两种方法都需要您重新启动开发/部署服务器。

    希望这可以帮助。

# c++ - 安装 vs2008 和 vs2010 时的 qmake

> ID：14827727
> 
> 赞同：1
> 
> 时间：2013-02-12T07:43:41.547
> 
> 标签：c++, visual-studio-2010, qt

我无法使用**qmake qt5 生成****vs2010**解决方案，生成的项目是 vs2008 我安装了两个 vs2008,2010，我添加了

 **> 路径 = C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies；C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE;C:\Program Files\Microsoft Visual Studio 10.0;

但是 qmake 仍然会生成旧的 vs 项目 qmake 发出此警告

> 警告：生成器：MSVC.NET：找到多个版本的 Visual Studio，但在您的路径中没有！回退到最低版本（M .NET 2010 (10.0)、MSVC.NET 2008 (9.0)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T04:47:24.400

正确的路径是：path = C:\Program Files\Microsoft Visual Studio 10.0\VC\bin**

# android - android中的Editext和RadioButton

> ID：14827729
> 
> 赞同：0
> 
> 时间：2013-02-12T07:43:48.377
> 
> 标签：android, radio-button, android-edittext, radio-group

我有两个 EditText 框和一个 RadioGroup，其中包含两个单选按钮。当我开始在任何编辑文本框中输入输入时，必须自动检查所有单选按钮（如果已检查任何一个按钮），并且还应清除另一个编辑文本。如果我选中两个单选按钮中的任何一个，则应清除所有编辑文本框（如果它们有任何输入数据）。这是我到目前为止所做的。

在 oncreate() 内部：

```
 et1 = (EditText)findViewById(R.id.editText1);
    et1.setOnFocusChangeListener(this);
    et1.addTextChangedListener(this);

    et2 = (EditText)findViewById(R.id.editText2);
    et2.setOnFocusChangeListener(this);
    et2.addTextChangedListener(this); 

    radioButton1 = (RadioButton)findViewById(R.id.rb1);
    radioButton2 = (RadioButton)findViewById(R.id.rb2);
    RadioGroup radioGroup = (RadioGroup) findViewById(R.id.radioGroup);        
    radioGroup.setOnCheckedChangeListener(new OnCheckedChangeListener(){
        public void onCheckedChanged(RadioGroup group, int checkedId) {

             et1.setText("");
            et2.setText("");

        }

    }); 
```

和 ...

```
 @Override
public void onFocusChange(View v, boolean hasFocus) {

    switch (v.getId()) {
    case R.id.editText1:
        whoHasFocus = 1;

        break;
    case R.id.editText2 :
        whoHasFocus = 2;

        break;

    }

} 
```

和

```
 @Override
public void afterTextChanged(Editable edt) {

    if(whoHasFocus == 1){
        String enteredName1 = edt.toString().trim();

        if(enteredName1.length() == 1){
            if(et2.getText().toString().trim().length() >= 1)
                et2.setText("");

            radioButton1.setChecked(false);
            radioButton2.setChecked(false);

        } 

    }else if(whoHasFocus == 2){

        String enteredName2 = edt.toString().trim();
        if(enteredName2.length() == 1){
            if(et1.getText().toString().trim().length() >= 1)
                et1.setText("");

            radioButton1.setChecked(false);
            radioButton2.setChecked(false);
        } 
    }
} 
```

当我检查任何单选按钮并开始输入edittext时，单选按钮未选中，但第一次没有任何内容进入edittext。如果我输入下一个字母，那么它正在输入第二个字母，然后工作正常。但是，当检查半径时，未进入endittext。请帮我。我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:33:04.293

解决了

```
 radioGroup.setOnCheckedChangeListener(null);
            radioButton1.setChecked(false);
            radioButton2.setChecked(false);
            radioGroup.setOnCheckedChangeListener(this); 
```

和

```
 et1.removeTextChangedListener(MyActivity.this);
    et2.removeTextChangedListener(MyActivity.this);
    et1.setText(""); 
    et2.setText("");
    et1.addTextChangedListener(MyActivity.this);
    et2.addTextChangedListener(MyActivity.this); 
```

# php - 使用 php print 删除部分 url

> ID：14827736
> 
> 赞同：2
> 
> 时间：2013-02-12T07:44:34.113
> 
> 标签：php

我想使用 php 撤销页面 url，但我想删除一些部分

```
<?php print("http://" . $_SERVER["HTTP_HOST"] . $_SERVER["REQUEST_URI"]); ?>

Example: http://url.com/questions/page/112/
Result: http://url.com/page/112/ 
```

我想`questions/`在 url 中删除。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:53:05.610

```
$url="http://" . $_SERVER["HTTP_HOST"] . $_SERVER["REQUEST_URI"];
$url=str_replace('/questions','',$url);
echo $url; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T08:00:48.027

您将需要使用 mod_rewrite，这是 apache 中可用的一个模块。这将由您的 Web 目录中的 .htaccess 文件管理。AdditionalBytes 为初学者提供了一个很好的 url 重写教程。

[检查这个网站的详细信息](https://web.archive.org/web/20170606191430/http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T07:47:44.517

我会使用php的explode函数将示例拆分为一个由“/”分隔的数组，然后循环遍历数组，其中数组值=问题，取消设置或从数组中删除它。

// 示例 1

```
$pizza  = "piece1 piece2 piece3 piece4 piece5 piece6";
$pieces = explode(" ", $pizza);
echo $pieces[0]; // piece1
echo $pieces[1]; // piece2 
```

这是一个例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T07:48:21.997

如果您只是想将其作为字符串删除，您可以使用

```
$url = str_replace('/questions', '', $_SERVER["REQUEST_URI"]); 
```

如果您想将用户重定向到该页面，您需要发送一个标头（在任何输出之前）：

```
header('Location: http://' . $_SERVER["HTTP_HOST"] . $url);
exit; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T07:49:29.327

试试这个;

```
$str = "http://" . $_SERVER["HTTP_HOST"] . $_SERVER["REQUEST_URI"];

$parts = explode("/",$str);

$tmp = array();
for($i = 0; $i<count($parts)-2;$i++){
   $tmp[$i] = $parts[$i];
}

$output = implode("/",$tmp); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T07:50:21.657

你可以使用这样的东西

```
$sentence = str_replace('questions/', '', 'http://url.com/questions/page/112/'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-12T07:52:39.673

```
//This splits the uri into an array
$uri = explode("/",$_SERVER["REQUEST_URI"]);

//Then Remove the first part of the uri (ie questions)
$first_uri = array_shift($uri);

//Recreate the string from the array
$uri = implode("/", $uri);

//Print like in your example
print("http://" . $_SERVER["HTTP_HOST"] . $uri);

//You can also access the remove string (questions) in the $first_uri variable
print($first_uri); //returns questions 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-12T08:03:36.110

```
$url='http://'.$_SERVER['HTTP_HOST'].preg_replace('/^\/questions/i','',$_SERVER['REQUEST_URI']);
echo $url; 
```

# c - 将图像保存在 C 中

> ID：14827742
> 
> 赞同：-1
> 
> 时间：2013-02-12T07:45:09.103
> 
> 标签：c

我只是在学习 C 语言，所以如果我的问题不清楚或者我问了错误的问题（或虚拟问题），我会提前道歉。

我用 C 语言编写了一个生成分形蕨类植物点的代码，然后使用 openGL 绘制它们。我的代码与此处的代码相似（[http://www.cs.csubak.edu/~marc/code/opengl/fern.c](http://www.cs.csubak.edu/~marc/code/opengl/fern.c)）。

现在我想将获得的图像保存到文件中。我一直在搜索这个，大多数答案都建议为此使用库，但我想编写自己的函数。我知道第一步是使用 glreadpixels 读取像素，但我不确定下一步应该是什么。

感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:28:56.723

libbmp 是一个非常好的选择。

[http://code.google.com/p/libbmp/](http://code.google.com/p/libbmp/)

# php - GNUPLOT 不使用 PHP 保存输出

> ID：14827743
> 
> 赞同：0
> 
> 时间：2013-02-12T07:45:10.970
> 
> 标签：php, gnuplot

我有 PHP 文件，我使用 gnuplot 绘制正弦图并保存输出，但是在 localhost 中运行 php 文件后，输出不会保存在任何地方。这是代码：

```
<?php

    `echo "set term png;set xrange[-2*pi:2*pi]; 
    set output 'output.png'; plot sin(x)" | gnuplot`;

?> 
```

我`exec()`也使用而不是上面的代码，但没有区别：

```
exec('echo "set term png;set xrange[-2*pi:2*pi]; 
set output \'output.png\'; plot sin(x)" | gnuplot'); 
```

但是我在终端中运行了上面的代码，输出保存在我的主目录中。当我使用 PHP 运行代码时，输​​出应该保存在 localhost 目录中，但是在运行代码之后似乎什么也没发生。我给出了不同的路径来保存输出（如桌面），但仍然没有输出。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:55:18.580

（评论没有足够的信用，所以我会发布这个作为答案）

我猜你的 PHP 可能正在某个服务器上运行？服务器是否具有适当的权限来写入您希望它写入的目录？

# javascript - 用于检测 IE9 64 位中的谷歌工具栏的 Javascript

> ID：14827745
> 
> 赞同：1
> 
> 时间：2013-02-12T07:45:13.240
> 
> 标签：javascript, internet-explorer, 64-bit

寻找一种在 IE 中检测 Google 工具栏存在的方法，我注意到在 64 位环境中，并且使用 IE9，http_user_agent 不显示有关它的信息。

例如，在 IE8

> `Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Trident/4.0; BTRS31753;`**`GTB7.4`**`)`

但在 IE9 中没有

任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T07:49:55.217

```
<html>
    <head>
        <title>Google Toolbar Detection</title>
        <object id="detection" classid="clsid:00EF2092-6AC5-47c0-BD25-CF2D5D657FEB"></object>
    </head>
    <body>
        <script language="javascript" type="text/javascript">
            if (typeof (detection) != "undefined") {
                if (typeof (detection.Search) != "undefined") {
                    document.write("Google Toolbar Installed");
                } else {
                    document.write("Google Toolbar Not Installed");
                }
            } else {
                document.write("This is not MSIE");
            }
        </script>
    </body>
</html> 
```

# facebook - facebook 的 user_groups 权限

> ID：14827748
> 
> 赞同：-1
> 
> 时间：2013-02-12T07:45:29.033
> 
> 标签：facebook, permissions, facebook-group

我在 facebook 授权方面有一个问题。我的应用程序需要 user_groups 权限。我在我的应用程序的设置中进行了此设置，但在对话框中仅存在标准权限“您的基本信息”。在我的应用程序的设置中，在选项卡权限中，我单击“预览登​​录对话框”->，在此预览中我的权限存在！我的错在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:53:55.770

如果您使用的是 Facebook PHP SDK，请在获取登录 url 时更新您的代码：

```
$loginUrl = $facebook->getLoginUrl(array('scope' => 'user_groups')); 
```

# c# - 匹配任何子域的正则表达式

> ID：14827755
> 
> 赞同：0
> 
> 时间：2013-02-12T07:45:51.163
> 
> 标签：c#, regex

我正在寻找正则表达式，它将匹配任何以“http”或“https”开头并包含特定域的 URL。如果域是“stackoverflow.com”，我应该能够从字符串中提取所有域和子域匹配项（仅限 .com，因此不应匹配 .net、.org 等），然后将它们添加到列表中循环遍历所有匹配项。我怎么做？

到目前为止，这是我找到的最佳解决方法（搜索名为“somestring”的字符串并将结果添加到列表“myList”）

```
 Regex r = new Regex(@"(?<Protocol>\w+):\/\/(?<Domain>[\w@][\w.:@]+)\/?[\w\.?=%&=\-@/$,]*");
       Match m = r.Match(somestring);
       while (m.Success) 
       {
           if ((m.Value).Contains("stackoverflow.com"))
           {
           myList.Add(m.Value);
           }
        m = m.NextMatch();
       } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T12:17:38.483

你的意思是 - 你想测试一个 url 是否指向 stackoverflow.com 上的页面或其任何子域（例如 m.stackoverflow.com ）？

解析网址怎么样

```
new Uri("http://stackoverflow.com/questions/14827755/regex-which-matches-any-subdomain").Host 
```

然后测试 Host 属性是否以 '.stackoverflow.com' 结尾或完全等于 'stackoverflow.com'。

请参阅[http://msdn.microsoft.com/en-us/library/system.uri.aspx](http://msdn.microsoft.com/en-us/library/system.uri.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T08:05:25.960

这可能会让你开始做什么：

`https?://(www\.)?([^.]+)\.([^.]+.)+`

解释：

`https?://`

匹配 http 或 https。

`(www\.)?`

如果万维网。存在，匹配它。

`([^\s.]+)`

匹配网站名称（由一个或多个非点非空白字符组成）。

`(\.[^\s.]+)+`

匹配一个或多个域/子域（由一个点组成，然后是一个或多个非点非空白字符）。

# javascript - Require.js 与 jQueryMobile-Router

> ID：14827757
> 
> 赞同：1
> 
> 时间：2013-02-12T07:46:00.267
> 
> 标签：javascript, jquery, jquery-mobile, requirejs

我在我的 html 中加载了带有 jQ​​uery 的 require.js：

```
<script data-main="requires" src="lib/require-jquery.js"></script> 
```

我的 requires.js 的内容：

```
require.config( {
      paths: {
            "jquery.mobile": "lib/jquery.mobile",
            "jquery.mobile.router": "lib/jquery.mobile.router"

      },
      shim: {
            "jquery.mobile" : {
                "exports": "$.mobile"
            },
            "jquery.mobile.router": {
                  "deps": [ "jquery.mobile" ],
                  "exports": "$.mobile.Router"
            }

      }

} );

require(["jquery.mobile.router" ], function() {
    require(["router"]);
} ); 
```

在我的 router.js 中，我创建了一个新的[jquery 移动路由器插件](https://github.com/azicchetti/jquerymobile-router)实例：

```
router = new $.mobile.Router(...); 
```

这给了我这个错误：

> 未捕获的类型错误：未定义不是函数

当我输出 $ 和 $.mobile 时，它​​们都已定义，只是 $.mobile.Router 未定义。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T08:40:47.923

我的问题是我添加了 jquery.mobile 作为 jquery.mobile.router 的依赖项，因此 jQuery mobile 将首先加载，正如路由器的文档所述：

> jQuery Mobile 路由器 javascript 文件必须在 jQuery Mobile 之前加载。

这就是我更改 requires.js 以解决问题的方式：

```
require.config( {

    paths: {
        "jquery.mobile": "lib/jquery.mobile",
        "jquery.mobile.router": "lib/jquery.mobile.router"
    },

    shim: {
        "router": {
            "deps" : ["jquery.mobile"]
        },
        "jquery.mobile" : {
            "deps" : [ "jquery.mobile.router"],
            "exports": "$.mobile" 
        },

        "jquery.mobile.router": {
          "exports": "$.mobile.Router"
        }
    }
});

require(["router"]); 
```

现在我只需要我的 router.js 并将 jquery.mobile 和 jquery.mobile.router 作为依赖项加载。现在加载顺序是这样的：

1.  jquery.mobile.router
2.  jQuery.mobile
3.  路由器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:52:55.887

`router.js`在你的文件中试试这个： -

```
define(["jquery", "jquery.mobile.router"], function($) {
    // your js code in router.js
} ); 
```

通过`jquery`在您的定义调用中指定并`$`作为参数传入，jquery 对象`$`和其中定义的关联函数`jquery.mobile.router`现在可以在您的代码范围内使用（完整包含在文件`router.js`中）。

# c# - 使用文件选择器将选择的照片保存到本地文件

> ID：14827759
> 
> 赞同：0
> 
> 时间：2013-02-12T07:46:00.800
> 
> 标签：c#, windows-8, windows-runtime, winrt-xaml

我正在开发一个 Windows 8 商店应用程序，我需要让用户选择一张照片并将其保存到本地文件夹，我已经在 J​​SON 文件中管理了保存方法，并且我知道如何使用选择器

```
 FileOpenPicker openPicker = new FileOpenPicker();
            openPicker.ViewMode = PickerViewMode.Thumbnail;
            openPicker.SuggestedStartLocation = PickerLocationId.PicturesLibrary;
            openPicker.FileTypeFilter.Add(".jpg");
            openPicker.FileTypeFilter.Add(".jpeg");
            openPicker.FileTypeFilter.Add(".png");
            StorageFile file = await openPicker.PickSingleFileAsync(); 
```

是否可以将挑选的照片添加到 Assets 文件夹中以永久存在？如果是，请帮忙，如果不是，请帮忙 :D 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T08:26:36.657

不，Assets 文件夹（假设您指的是通常通过 Windows 应用商店项目获得的默认文件夹）是应用程序包的一部分并且是只读的。本质上，您只能从 URLS 前面读取`ms-appx://`

您可以保存到本地存储 ( `ms-appdata:///local/`)，它也将在那里永久保存（除非您明确删除它）。

您的代码后的以下行将保存到本地存储的顶层

```
await file.CopyAsync(ApplicationData.Current.LocalFolder) 
```

如果要存储到不直接位于应用程序数据根目录的文件夹，请使用[CreateFolderAsync](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefolder.createfolderasync.aspx)或[GetFolderAsync 。](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefolder.getfolderasync.aspx)

# jasper-reports - 连接而不丢失千位分隔符

> ID：14827762
> 
> 赞同：0
> 
> 时间：2013-02-12T07:46:17.473
> 
> 标签：jasper-reports, ireport, jasperserver

我有一份报告，其中包含总销售额和总概率销售额。请求是在一个表中显示为`"R"{totalamount}"` `(R"{totprobamount")"`。

所以我把它加到一个变量中，变量表达式为

```
"R" + $F{Totalt} +" (R" + $F{Totalp} +")" 
```

但是通过这样做，千位分隔符不再显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:29:07.030

*   如果您可以为每个值添加一个字段，那么您不会使用字符串连接而是通过在文本字段上使用模式来执行此操作。为属性面板中的每个字段添加一个模式，例如`R #,##0.00`.

*   如果它必须在单个字段中，您需要添加一个表达式以实际以所需方式格式化数字，例如： `"R" + new DecimalFormat("#,##.00").format($F{Totalt}) + " (R" + new DecimalFormat("#,##.00").format($F{Totalp}) + ")"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:32:21.213

您可以使用 FORMAT 函数来设置千位分隔符。

```
 FORMAT({totalamount} +{totprobamount},2) 
```

此列成为字符串列，因此您必须单独添加此列，您不能将同一列用于整数值。其中 2 表示最多 2 个十进制值。

# mysql - 如何从两个表中获取不匹配的记录

> ID：14827767
> 
> 赞同：8
> 
> 时间：2013-02-12T07:46:59.703
> 
> 标签：mysql

请参阅这两个示例表：

表格1：

```
id    acc_no    name
------------------------
1     14        aaaa
2     16        bbbb
3     18        ccccc
4     25        wwww
5     27        xxxxxxx
6     28        zzzzzzz 
```

表 2：

```
sr no   acc_no  amount
----------------------
1       14      2000
2       16      2344
3       18      3200 
```

我需要根据 acc_no 获取表 1 中不匹配的记录，例如：

输出：

```
id   acc_no   name
---------------------
4    25       wwww
5    27       xxxxxxx
6    28       zzzzzzz 
```

当我尝试使用以下查询时，结果不可靠：

```
SELECT t1.* 
FROM table1 t1
     LEFT OUTER JOIN table2 t2 ON t1.acc_no = t2.acc_no
WHERE t2.acc_no IS NULL 
```

提出你的建议。什么是正确的 SQL 查询得到高于输出？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-12T08:01:13.663

尝试：

```
SELECT * 
FROM table1 t1
WHERE t1.acc_no NOT IN (SELECT acc_no FROM table2) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-12T08:07:18.630

应该 ：

```
select t1.id,t1.acc_no,t1.name from table1 t1
     left outer join table2 t2 on t1.acc_no = t2.acc_no
       where
     t2.id is null 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T08:10:42.290

也试试这个：

```
select t1.* from table1 t1 where 
    not exists (
    select 1 from table2 t2 
    where t1.acc_no=t2.acc_no
    ) 
```

# cakephp - CakePHP 在一个模型中从多个表中检索结果

> ID：14827768
> 
> 赞同：0
> 
> 时间：2013-02-12T07:47:11.007
> 
> 标签：cakephp

CakePHP 版本：2.X

我已经完全编辑了这篇文章，以便将我的问题重新表述得更清楚。
我正在创建一个包含 5 个表格的专业提案系统：

提案.........> id - 名称 - 内容 - 创建的
客户.......> id - 名称 - 内容 - 已创建 - proposal_id
产品...... ....> id - 名称 - 内容 - 创建 - client_id
规范..> id - 名称 - 内容 - 创建 - product_id
附录.....> id - 名称 - 内容 - 创建 - product_id

出于本示例的目的，我已经简化了列。

所以关联如下：

提案 > HasMany > 客户
客户 > BelongsTo > 提案 / 客户 > HasMany > 产品
产品 > BelongsTo > 客户 / 产品 > HasMany > 规格
产品 > BelongsTo > 客户 / 产品 > HasMany > 附录
规格 > BelongsTo > 产品 BelongsTo > 产品

然后我创建了 5 个具有上述关联的模型。

它看起来像这样：

提案 1
....客户 1
....产品 1
....规格 1
....规格 2
.... ............规格3
............附录1
............附录2
............产品2
.. …………规格 4
…………规格 5
…………附录 3
………………………………………………………………………………………………………………………………………………………… ..附录4

提案 2
....客户 2
....产品 3
....规格 6
....规格 7
.... ............规格 8
............附录 5
............附录 6
............产品 4
.. .......... 规格 9
........ 规格 10
........ 附录 7
....... ..附录 8

等等...

我的问题是如何获得一个看起来像这样的数组并在我的 ProposalController.php 操作的视图 index.ctp 中检索所有这些信息？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:19:47.680

我终于成功地使用可包含的行为构建了我想要的东西，但是我遇到了一个我无法解决的问题。我想检索提案 ID 并显示其附加的客户、产品、规格和附录。

为此，我在我的 ProposalsController.php 中进行了视图操作，如下所示：

```
function admin_view($id){
        $this->loadModel('Client');
        // $d = $this->Proposal->find('all', array(
        $d['proposals'] = $this->Proposal->find('all', array(
            'conditions' => array('Proposal.id' => $id),
            //'contain' => array() Tableau vide pour supprimer les liaisons
            'contain' => array('Client' => array(
                'fields' => array('id','name'),
                'Product' => array(
                    'Specification', 'fields'=>array('id','name'),
                    'Appendice', 'fields'=>array('id','name')
                    )
                ))
            ));
        $this->set($d);
        // debug($d);
    } 
```

在我的情况下，我正在通过它的 id 检索特定的提案。然后我将 ma 查询发送到我的 admin_view.ctp：

```
<h1>VIEW</h1>

<?php
// debug($proposals);
?>

<p>
    Proposition : <strong><?php echo $proposals[0]['Proposal']['name']; ?></strong>
    pour le client <strong><?php echo $proposals[0]['Client']['name']; ?></strong>
    ayant le produit <strong><?php echo $proposals[0]['Client']['Product'][0]['name']; ?></strong>
    avec la spec <strong><?php echo $proposals[0]['Client']['Product'][0]['Specification'][0]['name']; ?></strong>
    et l'annexe <strong><?php echo $proposals[0]['Client']['Product'][0]['Appendice'][0]['name']; ?></strong>
</p> 
```

它有效，但似乎很混乱，尤其是我必须使用 [0] 的方式，这在我看来是不够的。此外，如果提案没有任何产品、规格或附录，它会给我一个错误，因为它们当然不存在。

我如何重新排列我的代码以简化我的视图以使其更有意义？

以下是我的 debug($d) 从我的控制器的视图操作中取消注释：

```
array(

        (int) 0 => array(
            'Proposal' => array(
                'id' => '1',
                'name' => 'Proposal 1',
                'created' => '2013-02-15 00:00:00',
                'modified' => '2013-02-16 03:00:47',
                'due' => '2013-02-28 00:00:00',
                'content' => 'Terms and conditions of the proposal 1.'
            ),
            'Client' => array(
                'id' => '1',
                'name' => 'Client 1',
                'Product' => array(
                    (int) 0 => array(
                        'id' => '7',
                        'name' => 'produit 1',
                        'client_id' => '1',
                        'Specification' => array(
                            (int) 0 => array(
                                'id' => '8',
                                'name' => 'spec 1 produit 1',
                                'value' => 'value 1 produit 1',
                                'product_id' => '7'
                            ),
                            (int) 1 => array(
                                'id' => '9',
                                'name' => 'spec 2 produit 1',
                                'value' => 'value 2 produit 1',
                                'product_id' => '7'
                            )
                        ),
                        'Appendice' => array(
                            (int) 0 => array(
                                'id' => '12',
                                'name' => 'Annexe 1 produit 1',
                                'content' => 'content annexe 1 produit 1',
                                'product_id' => '7'
                            )
                        )
                    ),
                    (int) 1 => array(
                        'id' => '8',
                        'name' => 'produit 2',
                        'client_id' => '1',
                        'Specification' => array(
                            (int) 0 => array(
                                'id' => '10',
                                'name' => 'spec 1 produit 2',
                                'value' => 'value 1 produit 2',
                                'product_id' => '8'
                            ),
                            (int) 1 => array(
                                'id' => '11',
                                'name' => 'spec 2 produit 2',
                                'value' => 'value 2 produit 2',
                                'product_id' => '8'
                            ),
                            (int) 2 => array(
                                'id' => '12',
                                'name' => 'spec 3 produit 2',
                                'value' => 'value 3 produit 2',
                                'product_id' => '8'
                            )
                        ),
                        'Appendice' => array(
                            (int) 0 => array(
                                'id' => '13',
                                'name' => 'Annexe 1 produit 2',
                                'content' => 'content annexe 1 produit 2',
                                'product_id' => '8'
                            )
                        )
                    )
                )
            )
        ),
        (int) 1 => array(
            'Proposal' => array(
                'id' => '1',
                'name' => 'Proposal 1',
                'created' => '2013-02-15 00:00:00',
                'modified' => '2013-02-16 03:00:47',
                'due' => '2013-02-28 00:00:00',
                'content' => 'Terms and conditions of the proposal 1.'
            ),
            'Client' => array(
                'id' => '2',
                'name' => 'Client 2',
                'Product' => array()
            )
        )
    ) 
```

我得到了我需要的意思，即 id 为 1 的提案，但下面有另一个数组显示我不需要的 2 个模型提案和客户端的关联，因为我已经在第一个数组（int）0 中拥有它。

我究竟做错了什么？

非常感谢你的帮助！

# java - 在 Android 中显示 GCM 消息

> ID：14827772
> 
> 赞同：2
> 
> 时间：2013-02-12T07:47:18.520
> 
> 标签：java, android, google-cloud-messaging

我为 android 编写应用程序，它将与 GCM 通信。我可以收到消息，但我想在屏幕上显示它并得到错误。
有我的代码，我在 Activity act = (Activity) context; 行有问题
我收到错误“此类文件的 JAR 属于容器‘Android 依赖项’，它不允许修改其条目上的源附件”

```
@Override
protected void onMessage(Context context, Intent indent) {

    String message = indent.getExtras().getString("message").toString();

    Log.i(TAG, "new message= " + message);

    Activity act = (Activity) context;  
    if(act != null)
    {
        TextView pushNotification = (TextView) act.findViewById(R.id.txtPushNotify);    
        pushNotification.setText(message);
    }
} 
```

我做错了什么？？这个方法在课堂上

```
public class GCMIntentService extends GCMBaseIntentService {...} 
```

有我的 LogCat

致命异常：IntentService[GCMIntentService-19193409722-1] java.lang.ClassCastException：
com.sagar.gcma.GCMIntentService.onMessage(GCMIntentService.java:41)
上 com.google.android.gcm.GCMBaseIntentService 上的 android.app.Application。 onHandleIntent(GCMBaseIntentService.java:223)
at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:59)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper .java:123)
在 android.os.HandlerThread.run(HandlerThread.java:60)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T08:40:34.247

试试下面的代码。

```
Intent myIntent = new Intent(context.getApplicationContext(), YourActivity.class);
Bundle bundle = new Bundle();
bundle.putString("message", message);
myIntent.putExtras(bundle);
context.getApplicationContext().startActivity(myIntent); 
```

然后在其中编写消息显示代码`activity`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:52:10.787

错误消息“此类文件的 JAT 属于容器'Android 依赖项'，它不允许修改其条目上的源附件”似乎（不知何故）与我无关，因为它是由 IDE 生成的错误消息，与您的实际代码无关。

我会小心代码中的演员表：

```
Activity act = (Activity) context; 
```

您确定传递的上下文实际上（无论如何）是您的活动吗？

编辑：

阅读您的编辑，我可以确认您收到的上下文是您的应用程序，而不是活动。

而且您需要以某种方式将该消息（您的服务收到）中继到前台活动（如果处于活动状态）。如果没有前台活动，请使用通知或类似的东西。

# c# - Autofac InstancePerHttpRequest 使用 Ninject

> ID：14827774
> 
> 赞同：2
> 
> 时间：2013-02-12T07:47:25.420
> 
> 标签：c#, ninject, autofac

以下**autofac**代码的**Ninject**等效项是什么：

 **```
builder.RegisterType<WebWorkContext>().As<IWorkContext>().InstancePerHttpRequest(); 
```

基本上我想为应用程序中的特定用户共享一些设置，例如当前工作语言、用户名、货币格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T08:21:18.753

**绑定到 ninject 内核（例如 in `global.asax`）**

```
kernel.Bind<IWorkContext>().To<WebWorkContext>().InRequestScope(); 
```**

# python - 如何确定由网格单元组成的任意形状的角/顶点单元

> ID：14827775
> 
> 赞同：3
> 
> 时间：2013-02-12T07:47:30.457
> 
> 标签：python, algorithm, geometry

我正在处理由二维网格上的方形瓷砖组成的多边形。一个多边形简单地存储为一个元组列表，每个元组代表一个图块的坐标。多边形始终是连续的并且没有孔。

我想要做的是确定哪些图块代表多边形边界的顶点，以便稍后我可以在每个图块之间进行追踪以生成多边形的边界，或者确定两个连续顶点之间的距离以找到长度一方等

这是一个多边形示例（一个 5x4 矩形，左上角减去一个 3x2 矩形，产生一个向后的“L”）：

```
polygon_tiles = [(3, 0), (4, 0), (3, 1), (4, 1), (0, 2), (1, 2), (2, 2), (3, 2),
    (4, 2), (0, 3), (1, 3), (2, 3), (3, 3), (4, 3)] 
```

理想情况下，我正在寻找的算法会产生如下所示的结果：

```
polygon_verts = [(3, 0), (4, 0), (4, 3), (0, 3), (0, 2), (3, 2)] 
```

列出的顶点按顺时针方向跟踪边界。

只是[摆弄](http://i.imgur.com/TrTjzkh.jpeg "摆弄")一些测试用例，这个问题似乎比我想象的要复杂得多，特别是在奇怪的情况下，比如当多边形有 1 瓦宽的挤压时（在这种情况下，其中一个瓦片可能必须是存储为顶点两次？？）。

我正在使用 Python，但任何见解都值得赞赏，即使它是伪代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T08:07:58.487

假设您的形状没有内部孔。

找到最上面一行。选择这一行最左边的瓷砖。这保证了我们从一个角落开始。

从这个板块，尝试向右直走 如果你不能，直直直下，直下等，直到你选择了一个方向。这保证了我们可以追踪多边形的顺时针周长

继续朝着您选择的方向迈出步伐。每一步之后：

*   如果下一步是在瓷砖上，逆时针旋转并再次查看。
*   如果下一步将进入空白空间，请顺时针旋转并再次查看。

一旦您移动到空白空间并再次回到瓷砖上，请停止旋转。

如果我们从初始方向旋转，我们必须站在一个顶点上。标记为这样。

将您遍历的所有其他图块标记为边缘的一部分。

继续走边缘，直到你到达你的初始瓷砖。在 1 个瓷砖挤压的情况下，您可以不止一次地走过瓷砖。

如果此算法在您的脑海中没有意义，请尝试拿出一些纸并手动进行操作：)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-04T11:17:06.977

这个问题是一个[凸包](https://en.wikipedia.org/wiki/Convex_hull)变化，例如可以应用[礼品包装算法。](https://en.wikipedia.org/wiki/Gift_wrapping_algorithm)离散坐标和线方向的约束导致简化。这是一些给出所需答案的python代码（Patashu的答案是相同的）：

```
#!/usr/bin/python                                                                                                                                                              

import math

def neighbors(coord):
    for dir in (1,0):
        for delta in (-1,1):
            yield (coord[0]+dir*delta, coord[1]+(1-dir)*delta)

def get_angle(dir1, dir2):
    angle = math.acos(dir1[0] * dir2[0] + dir1[1] * dir2[1])
    cross = dir1[1] * dir2[0] - dir1[0] * dir2[1]
    if cross > 0:
        angle = -angle
    return angle

def trace(p):
    if len(p) <= 1:
        return p

    # start at top left-most point                                                                                                                                             
    pt0 = min(p, key = lambda t: (t[1],t[0]))
    dir = (0,-1)
    pt = pt0
    outline = [pt0]
    while True:
        pt_next = None
        angle_next = 10 # dummy value to be replaced                                                                                                                           
        dir_next = None

        # find leftmost neighbor                                                                                                                                               
        for n in neighbors(pt):
            if n in p:
                dir2 = (n[0]-pt[0], n[1]-pt[1])
                angle = get_angle(dir, dir2)
                if angle < angle_next:
                    pt_next = n
                    angle_next = angle
                    dir_next = dir2
        if angle_next != 0:
           outline.append(pt_next)
        else:
            # previous point was unnecessary                                                                                                                                   
            outline[-1]=pt_next
        if pt_next == pt0:
            return outline[:-1]
        pt = pt_next
        dir = dir_next

polygon_tiles = [(3, 0), (4, 0), (3, 1), (4, 1), (0, 2), (1, 2), (2, 2), (3, 2),
                 (4, 2), (0, 3), (1, 3), (2, 3), (3, 3), (4, 3)]
outline = trace(polygon_tiles)
print(outline) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T08:11:59.663

我只会计算顶点之间的线的斜率

```
# Do sort stuff

vertices = []
for position, polygon in enumerate(polygon_tiles):
    # look for IndexErrors
    try:
         polygon_tiles[position+1]
    except IndexError:
         break

    try:
        polygon_tiles[position+2]
    except IndexError:
        # Bad practice
        position = position - 1

    # calculate the slope of the line between of vertex 1 and vertex 2  
    s1 = (polygon_tiles[position+1][1] - polygon[1]) / (polygon_tiles[position+1][0] - polygon[0])
    # calculate the slope of vertex 2 and vertex 3
    s2 = (polygon_tiles[position+2][1] - polygon_tiles[position+1][1]) / (polygon_tiles[position+2][0] - polygon_tiles[position+1][0])
    # if the slopes differ then you have a vertex
    if d1 != d2:
        vertices.append(polygon_tiles[position+1]) 
```

# javascript - 使用 Titanium SDK 动态加载字体

> ID：14827780
> 
> 赞同：0
> 
> 时间：2013-02-12T07:47:52.223
> 
> 标签：javascript, sdk, fonts, titanium, appcelerator

好的，所以我的 Titanium 应用程序的设置相当复杂，但基本上我是通过读取将从服务器加载的 JSON 清单文件的属性来动态创建页面。

该应用程序读取不同的属性，其中一个是描述页面视图的对象数组。对于该数组中的每个对象，将使用该对象中指定的属性创建一个视图。

**我希望能够轻松更改页面的设计，以便 JSON 清单也指定页面应使用的字体。**服务器上字体文件的位置将显示在清单中，应用程序将保存该文件以供以后访问。如何使用这个字体文件？我已经在 TutsPlus 上看到了有关如何合并自定义字体的示例，但该方法是静态的。如何动态加载字体以在视图中使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:34:08.393

[看起来你必须使用自定义扩展。没问题，有人让这变得非常简单！](https://github.com/dbankier/TiDynamicFont)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:25:53.010

我会尝试创建一个 webview 来动态使用远程字体。

当您想使用自定义字体分配给标签时，您必须将它们打包到应用程序资源中。据我所知，该目录在运行时是只读的，因此很难先将字体下载为文件，然后在使用之前将其集成到应用程序资源中，即使使用 TiDynamicFont 模块也是如此。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-12T12:21:51.900

与您的问题相关：

[在 Tatanium 中显示自定义字体](http://mobile.tutsplus.com/tutorials/appcelerator/titanium-mobile-custom-font/)

希望，对你有帮助。

# symfony - Symfony2 试图写入之前运行的服务器？

> ID：14827782
> 
> 赞同：0
> 
> 时间：2013-02-12T07:48:03.690
> 
> 标签：symfony, web-deployment

我一直在本地开发一个 Symfony2 应用程序，现在我想将它部署在服务器上的生产环境中。

我已经上传了所有文件并尝试运行：

```
php app/console cache:clear --env=prod 
```

这给出了以下错误：

![在此处输入图像描述](../Images/9b9ce71edc7de86d3875cf51f1c7f70c.png)

如您所见，出于某种原因，它正试图写入我的 C:/ 驱动器。进行常规缓存：清除工作正常，但我无法将其交换到生产环境。

此时，尝试使用 app.php 版本只会加载一个空白页面。我无法弄清楚为什么我的应用程序会尝试写入以前服务器上的目录。

帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:58:46.520

尝试清空缓存文件夹
`rm -rf app/cache/*`
在此之后 cache:clear --env=prod 命令正常工作。

# mysql - AUTO_INCREMENT 和 LAST_INSERT_ID

> ID：14827783
> 
> 赞同：12
> 
> 时间：2013-02-12T07:48:10.803
> 
> 标签：mysql

我正在使用`AUTO_INCREMENT`并且我想获取插入行的 ID，以便我可以使用`ID`两个表之间的公共字段来更新另一个表。

我明白那`LAST_INSERT_ID`将是最后`ID`的。但是，我担心的是，许多用户同时访问数据库。因此，可能有另一个进程访问了该表并同时插入了一个新行。

`LAST_INSERT_ID`无论使用的*连接*如何，都只返回最后一个 ID，还是只返回我正在使用的*连接的最后一个 ID？*

注意，我正在使用 Tomcat 服务器中的连接池访问 MySQL 数据库。

总之，我需要在表 A 中插入一行并自动递增，而不是在表 B 中插入行，这需要使用该`AUTO_INCREMENT`值链接到表 A。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-12T08:01:41.093

```
SELECT max(employeeid) FROM Employee; 
```

上面的查询返回`employeeid`Employee 表中最后插入的记录的值，因为`employeeid`它是一个自增列。这似乎没问题，但是假设两个*线程*同时执行插入操作，您可能会得到错误的最后插入记录的 id！

别担心，MySQL 提供了一个函数，它返回最后插入记录的自增列的值。

```
SELECT LAST_INSERT_ID(); 
```

[`LAST_INSERT_ID()`](https://dev.mysql.com/doc/refman/8.0/en/information-functions.html#function_last-insert-id)始终是**特定于连接的**，这意味着即使从不同的连接同时执行插入操作，它也始终返回当前特定于连接的操作的值。

因此，您必须首先在 Employee 表中插入记录，运行上述查询以获取 id 值并使用它来插入第二个表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T07:53:36.037

`LAST_INSERT_ID()`在 **上下文中**工作，它应该在事务中或在用户定义的存储过程或用户定义的函数中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-30T19:45:02.170

`LAST_INSERT_ID`是连接特定的。确实如此，但如果使用连接池，则应小心。`INSERT IGNORE`当您在循环中执行连续语句并且池在每次迭代时为您提供相同的连接时，这可能会出现问题。

例如; 假设您收到以下各项的相同（打开）连接：

`INSERT IGNORE ... some-new-id` >>>`LAST_INSERT_ID`返回`100`

`INSERT IGNORE ... some-existing-id` >>>`LAST_INSERT_ID`仍然返回`100`（之前操作的结果）

`INSERT`在调用之前检查操作是否实际上插入了任何行总是好的`LAST_INSERT_ID`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T07:51:01.997

`LAST_INSERT_ID`返回当前会话的最后一个插入 ID。只要您在当前连接中插入的条目不超过一个，它就有效。

此处提供更多信息：[https ://dba.stackexchange.com/questions/21181/is-mysqls-last-insert-id-function-guaranteed-to-be-correct](https://dba.stackexchange.com/questions/21181/is-mysqls-last-insert-id-function-guaranteed-to-be-correct)

（我会链接到 mysql.com，但它目前不适合我）

# delphi - 检查编辑框是否使用此格式

> ID：14827791
> 
> 赞同：2
> 
> 时间：2013-02-12T07:48:52.067
> 
> 标签：delphi

我想检查一下 TEdit.text 是否采用这种格式 123/45/678 输入文本时因此 ###/##/###

有什么简单的方法可以做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T08:09:03.937

假设您的掩码非常简单，只有 # 和 / 很容易编写测试函数：

```
function MatchesMask(const Text, Mask: string): Boolean;
var
  i: Integer;
begin
  Result := False;

  if Length(Text)<>Length(Mask) then
    exit;

  for i := 1 to Length(Text) do
    case Mask[i] of
    '#':
      if (Text[i]<'0') or (Text[i]>'9') then
        exit;
    else
      if Text[i]<>Mask[i] then
        exit;
    end;

  Result := True;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T08:09:19.837

```
Function CheckStringWithMask(const Str,Mask:String):Boolean;
var
 i:Integer;
begin
  Result := true;
  if length(str)=length(Mask) then
    begin
    i := 0;
    While Result and  (I < Length(Str)) do
      begin
      inc(i);
      Result := Result and (Str[i] <> '#')
                and ((Mask[i] ='#') and (CharInSet(Str[i],['0'..'9']))
                or (Str[i]=Mask[i]));
      end;
    end
  else Result := false;
end; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T09:21:22.423

[@David Heffernan 的建议的](https://stackoverflow.com/a/14828107/297408)一个变体：

```
function MatchesMask(const Text, Mask: string): Boolean;
var
  i: Integer;
begin
  Result := (Length(Text) = Length(Mask));

  if not Result then Exit;

  i := 0;
  while Result and (i < Length(Text)) do begin
    Inc(i);
    case Mask[i] of
    '#':
       Result := (Text[i] >= '0') and (Text[i] <= '9');
    else
       Result := (Text[i] = Mask[i]);
    end;
  end;    
end; 
```

# java - 如何确定 Windows 和 Linux 中的默认浏览器？

> ID：14827792
> 
> 赞同：-1
> 
> 时间：2013-02-12T07:48:52.170
> 
> 标签：java, browser

我正在设计小型 Java 应用程序，其中有一个 webDriver。该应用程序将从 Web 服务收集信息。

此应用程序的要求之一是没有特定的浏览器依赖性。也就是说，我不知道最终用户 PC 上安装了哪个浏览器。因此，我需要使用默认浏览器。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:16:09.050

在 Windows 中：您可以`browse(URI uri)` 在类中使用函数`Desktop`，它会启动默认浏览器以显示`uri`

```
Desktop.getDesktop().browse("/////URI"); 
```

# ruby - View 中的变量始终为零

> ID：14827798
> 
> 赞同：1
> 
> 时间：2013-02-12T07:49:15.053
> 
> 标签：ruby, variables, view, controller, null

我是红宝石新手。我在控制器中创建了一个新动作，我在其中设置了变量 test1

```
def tsload
   @test1 = '00:00'
   respond_to do |format|
     format.html {
        render :template => 'tsload'
     }
   end
end 
```

但在我的视图中，变量 test1 的值始终为零。似乎它是未定义的。

```
<p>Test</p>
<% if @test1.nil? %>
<p>nil</p>
<% end %> 
```

我不明白出了什么问题。在我的控制器中的旧操作中，一切正常。谁能帮帮我吗？这是来自我的 routes.rb 的线路

```
match 'wktime/tsload', :to => 'wktime#tsload', :via => [:get] 
```

# sql - 为动态表执行即时 iNSERT 问题

> ID：14827799
> 
> 赞同：1
> 
> 时间：2013-02-12T07:49:16.630
> 
> 标签：sql, oracle, plsql, insert

我正在研究oracle sql

我正在尝试创建动态表，我想在动态表中插入一些值（“s”是变量名）

我试图用...

```
 execute immediate 'INSERT INTO t'||tbcounter||'(column1, column2) VALUES (s, s)'; 
```

但是，我收到错误

```
ORA-00926: missing VALUES keyword 
```

我猜有语法错误..

但我不确定代码中的错误..

有人知道代码中的错误吗？

谢谢

编辑：

我刚刚解决了问题。插入应该是

```
 sql_stmt := 'INSERT INTO t'||tbcounter||' VALUES (:1, :2)';
       EXECUTE IMMEDIATE sql_stmt USING s, s; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:53:25.310

试试这个：

```
execute immediate 'INSERT INTO t'||tbcounter||' (column1, column2) VALUES (' || s || ' , ' s || ' )'  ; 
```

IS tbcounter 是表名。

# css - CSS 仅针对评论中的第一行

> ID：14827800
> 
> 赞同：0
> 
> 时间：2013-02-12T07:49:19.523
> 
> 标签：css, ruby-on-rails

所以我在我的应用程序中有评论，问题是一旦评论中的内容变成三行，它会包裹在用户图片下方，而不是从其他行开始。我对 CSS 很陌生，但似乎我应用的任何边距都只会移动第一行。

![在此处输入图像描述](../Images/0574d2db16166cd04a1ce70814b87af8.png)

CSS：

```
#comment_border {
  border: 1px solid $grayLighter;
  border-radius: 3px;
  background-color: #d6e5f1;
  margin-left: 90px;
  padding: 2px;
}

.comment_info {
  display: block;
  margin-left: -20px;
  color: #767676;
}

#comment_content {
  /* dont know what to put here */
} 
```

查看/评论：

```
<div class="row" id="comment_border">

<span class="comment_info">
  <aside class="span2">
    <%= link_to gravatar_for((comment.user), size: 35), comment.user %>
    <%= link_to comment.user.name, comment.user, id: "feedusername" %>
  </aside>
  <span id="comment_content"> <%= comment.content %> </span>
</span>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:19:09.187

问题描述不完整（缺少基本的 CSS 等），但主要问题似乎是您正在为内联元素设置左边距。使用给定的标记，以下 CSS 修改以大致意思的方式呈现它：

```
.comment_info {
  display: block;
  margin-left: 0px;
  color: #767676;
  /* margin-left:-20px; NOT set here */
}
#comment_content {
  margin-left: 90px;
  display: block;
}
.span2 { 
  width: 80px; 
  height: 35px; 
  float: left;
  border: solid 1px red;
 } 
```

`div`使用元素而不是`span`评论内容会更合乎逻辑；这样做，您可以放弃`display: block`声明。

PS你不应该`aside`在这里使用；它不是为了这样的目的，它只会让一些旧浏览器感到困惑；改为使用`div`。

# android - 如何使用 Webview 打开 Google 地图应用

> ID：14827801
> 
> 赞同：1
> 
> 时间：2013-02-12T07:49:20.730
> 
> 标签：android, google-maps, webview

所以我有这个应用程序，它直接在应用程序中加载一个 Webview（这意味着它不会在应用程序之外打开浏览器，而是嵌入）

现在在网页上我有一个指向 googlemaps 的链接。我想单击该链接并使该链接打开安装在手机上的原始 Google 地图应用程序，而不是在嵌入式 Web 视图中打开该链接。

这可能吗？

我的实际 webview 设置：

```
webView=(WebView)findViewById(R.id.webview);
webView.getSettings().setAppCacheMaxSize( 10 * 1024 * 1024 );
webView.getSettings().setAppCachePath( getApplicationContext().getCacheDir().getAbsolutePath()+ "/cache" );
webView.getSettings().setAllowFileAccess( true );
webView.getSettings().setAppCacheEnabled( true );
webView.getSettings().setJavaScriptEnabled( true );
webView.getSettings().setDomStorageEnabled( true );
webView.getSettings().setCacheMode( WebSettings.LOAD_DEFAULT );
webView.setWebChromeClient(new WebChromeClient()); 
webView.setWebViewClient(new WebViewClient());
webView.setBackgroundColor(0x00000000); 
```

# c++ - C++ DLL 的宿主进程

> ID：14827804
> 
> 赞同：0
> 
> 时间：2013-02-12T07:49:29.010
> 
> 标签：c++, dll, code-injection

我有一个我编写的 C++ DLL，它有时需要另一个自身实例来执行某些操作。如果我不必将它分成两个不同的部分，那就太好了，特别是因为我不希望其中一个应该是“可运行”的任何类型的混淆。

我一直在研究可以启动和注入的 Windows 上的一些系统进程。svchost 和 dllhost 都引起了我的注意；但他们不是我想的那样。Windows 肯定有某种我可以使用的通用 DLL 主机吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:58:31.720

看起来 rundll32 就是为此目的而设计的，这正是我想要的。

命令行文档： http: [//support.microsoft.com/kb/164787](http://support.microsoft.com/kb/164787)

用法参考（SO）： [如何使用 Rundll32 执行 DLL 函数？](https://stackoverflow.com/questions/3207365/how-to-use-rundll32-to-execute-dll-function)

# ruby-on-rails - 仅在 Rails 中搭建视图文件。可能的？

> ID：14827807
> 
> 赞同：24
> 
> 时间：2013-02-12T07:49:44.810
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在初始构建之后，我在我的`Books`数据库表中添加了几列。因为我实际上希望我的视图能够反映和显示与所有这些新添加的列相关的字段，所以我认为删除`views/books/`文件夹内的所有内容并让一些脚手架代码从头开始重新生成它会更便宜。我不想删除控制器或模型文件，因为它们都已经包含一些我想保留的逻辑。我可以根据需要自己编辑这些文件。

如何完成任务？

从[https://stackoverflow.com/a/4333530/130758](https://stackoverflow.com/a/4333530/130758)我可以看到`scaffold`控制器和模型似乎都有选项，但不幸的是，没有视图。我必须自己完成这项繁重的工作吗？我知道我可以创建一个新的 git 分支，删除 + 模型 + 视图并重新生成所有它们，将视图复制粘贴回原始分支，我准备好了，但我更喜欢尽可能科学的方法。

谢谢

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-07-30T13:28:07.420

我知道这个问题可能太老了，无法帮助最初提出问题的人，但我想指出默认`scaffold`生成器调用`erb:scaffold`生成器来生成 ERB 文件。所以，你可以这样做：

```
rails g erb:scaffold Book 
```

这将返回：

```
create  app/views/books
create  app/views/books/index.html.erb
create  app/views/books/edit.html.erb
create  app/views/books/show.html.erb
create  app/views/books/new.html.erb
create  app/views/books/_form.html.erb 
```

# git-svn - git-flow 是否与 git-svn 一起工作

> ID：14827811
> 
> 赞同：2
> 
> 时间：2013-02-12T07:50:08.173
> 
> 标签：git-svn, git-flow

由于我目前绑定到一个颠覆存储库，但使用 git-svn 很好，我想知道这个设置是否也可以与 git-flow 一起使用？git-flow 会带来什么好处？会出现什么缺点或问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:17:02.413

使用 git-svn 时，最好：

*   尽量减少必须同步回 svn 存储库的分支数量
*   不要指望看到在 git 中完成的分支之间的合并在 svn 中发布：它们不会出现。只有在您提交到 svn 的 git 分支上进行的提交才会存在。

这就是问题所在，因为[git-flow（一个*分支*模型）](http://nvie.com/posts/a-successful-git-branching-model/)非常擅长创建代表应用程序开发生命周期的分支（功能、修补程序、产品分支......），这可能是同步回 svn 的拖累（通常，git-svn 是为了让*一个*分支保持同步，只是为了让旧版 SVN 存储库跟上 git 存储库的最新信息）。

# perl - 如何在 Perl 中读取和替换配置数据

> ID：14827815
> 
> 赞同：0
> 
> 时间：2013-02-12T07:50:30.673
> 
> 标签：perl

这是下面的 config.pm 文件。

```
$AHost = '10.226.33.233';
$APort = '33002';
$ADBUser = "enacct";
$ADBPassword = "enacct"; 
```

我使用 sysread 在 some.pl 文件中读取此文件，并将整个文件数据作为字符串获取（修改后我们将整个字符串作为参数传递给写入。它会将其写回文件）。

假设我想将 $AHost 的值替换为“10.226.33.234”并将 $ADBUser 替换为“pwd”；。我们该怎么做？

我的意思是我们应该替换检索到的字符串中相应的更改值，并通过发回这个更新的字符串，我们可以将数据正确地写回文件中。

如何在这种情况下更新字符串？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:40:20.750

1：您可以使用 Getopt::Euclid 将默认配置值存储在脚本中，它可以让您从命令行覆盖其中的任何一个。它也是自我记录的。

2：使用 YAML 存储配置数据，你可以使用 YAML::Tiny 来读取它

例子：

```
file.yaml (there should be an empty line at the end of the file!)

    ---
    AHost: blah
    APort: bah

    use YAML::Tiny;

    # Create a YAML file
    my $yaml = YAML::Tiny->new;

    # Open the config
    $yaml = YAML::Tiny->read( 'file.yml' );

    # Reading properties
    my $AHost = $yaml->[0]->{AHost}; 
```

# javascript - 如何通过对象添加 z-index？

> ID：14827819
> 
> 赞同：1
> 
> 时间：2013-02-12T07:50:48.753
> 
> 标签：javascript, jquery

是否可以`z-index`通过[css](http://api.jquery.com/css/)方法添加思想对象：

```
jQuery('<div/>').css({
        z-index: 1000, 
        opacity: 0.7, 
        width: jQuery(window).width(), 
        height: jQuery(document).height(), 
        top:0, 
        left:0, 
        position: 'absolute'}).appendTo('body'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T07:52:34.197

```
$("<div>").css({
    zIndex: 123
}).appendTo("body"); 
```

或者

```
$("<div>").css({
    "z-index": 123
}).appendTo("body"); 
```

* * *

[***`.css()`***文档](http://api.jquery.com/css/#entry-longdesc-1)：

> ... 此外，jQuery 可以同样解释多词属性的 CSS 和 DOM 格式。例如，jQuery 理解并返回正确的值**`.css({'background-color': ...})`**和**`.css({backgroundColor: ...})`**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:52:33.053

```
jQuery('div').css('z-index',1000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T07:53:05.237

是的，但你必须使用撇号/引号`'z-index` ：

```
jQuery('<div/>').css({
    "z-index": 1000, 
    opacity: 0.7, 
    width: jQuery(window).width(), 
    height: jQuery(document).height(), 
    top:0, 
    left:0, 
    position: 'absolute'}).appendTo('body'); 
```

# c - 64 位系统结构大小

> ID：14827824
> 
> 赞同：1
> 
> 时间：2013-02-12T07:51:08.720
> 
> 标签：c, struct, 64-bit

我有以下结构：

```
struct test                                                                                                                     
{                                                                                                                               
  long long a;                                                                                                                
  int b;                                                                                                                         
}; 
```

为什么在 64 位系统中 sizeof 测试将是 16 而不是 12？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T08:10:15.457

您的结构需要 8 字节对齐，因为成员`a`需要 8 字节对齐（这是在您的系统上，其他系统可能有不同的对齐要求和大小`int`）`long long`。这包括结构数组的每个成员。因此，为了确保结构的数组元素正确对齐，填充大小以提供 8 字节对齐。

符合标准的答案是：“因为编译器可以”。上面的答案是“这可能是发生了什么以及为什么”。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-12T08:14:14.500

在 64 位系统上，内存总是以 8 字节的块分配，以便更好（更容易）进行内存管理。`int`1和 1的严格最小尺寸`long long`是 12，但由于较高侧最接近的 8 倍数是 16，所以使用这个数字。还分配了 4 个额外的字节；这不会杀死您的系统，但会使内存管理更加容易。尝试`char`在您的`struct`. 大小仍将保持 16 字节。

这是因为数据总线在 64 位机器上也是 64 位宽的，因此需要传输 8 字节的块来有效地填充高速缓存存储器。仍然可以访问单个内存位置（当然），它唯一的分配和传输必须在更大的块中执行。如果在您的情况下分配了 14 个字节，那么每当系统尝试获取该结构时，将获取 4 个额外的字节。为什么？因为由于系统的数据总线大小，所有传输总是 64 位（8 字节）。要获取 12 个字节，将使用 4 次传输，这实际上会带来 16 个字节。如果不处理这些额外的字节，可能会导致内存问题。想象一下，有一个结构数组、提取的额外字节及其管理。

由于系统设计无论如何都会获取这些字节，因此避免此类问题的最简单解决方案是始终分配 8 字节（64 位）的块，这正是您观察到的情况。

# asp.net-mvc - Dotnet highcharts 不工作（缺少程序集）

> ID：14827828
> 
> 赞同：0
> 
> 时间：2013-02-12T07:51:29.180
> 
> 标签：asp.net-mvc, visual-studio, highcharts, dotnethighcharts

你好，我正在使用 MVC3（Visual Studio Express 2012）

我按照这边的说明进行操作； [http://dotnethighcharts.codeplex.com/](http://dotnethighcharts.codeplex.com/)

我制作了一个名为 TestHSController 的新控制器，并带有相应的视图。

问题是当我尝试运行代码时；

```
 public ActionResult Index()
    {
        DotNet.Highcharts.Highcharts chart = new DotNet.Highcharts.Highcharts("chart")
            .SetXAxis(new XAxis
            {
                Categories = new[] { "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" }
            })
            .SetSeries(new Series
            {
                Data = new Data(new object[] { 29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4 })
            });

        return View(chart);
    } 
```

Xaxis、Series 和 Data 标记为蓝色，就好像我缺少一个程序集一样，我添加了 DotNet.Highcharts 作为参考，并且在我的 _Layout 中添加了线条；

```
 <script src="~/Scripts/jquery-1.7.1.min.js"></script>
    <script src="~/Scripts/highcharts.js"></script> 
```

这些文件位于相应的位置。

任何输入都会被应用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T08:02:21.857

将以下内容添加到您的控制器类

```
using DotNet.Highcharts;
using DotNet.Highcharts.Options; // for XAxis and Series
using DotNet.Highcharts.Helpers; // for Data 
```

如果它仍然没有构建，那么您的项目还有另一个问题。

# unix - 如何比较具有相似文件夹/文件的两个目录

> ID：14827829
> 
> 赞同：1
> 
> 时间：2013-02-12T07:51:38.237
> 
> 标签：unix

如何比较具有相似文件夹/文件的两个目录。我想在各个文件夹中找到文件（二进制，ascii）之间的差异。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T08:07:31.800

尝试使用`diff -arq folder1 folder2`或`diff -r folder1 folder2`

# c - 打印不常见的字符？

> ID：14827830
> 
> 赞同：1
> 
> 时间：2013-02-12T07:51:40.907
> 
> 标签：c, ascii, printf

基本上我有一个程序可以从 Acsii 表中找到最常见的字符。然后打印字符出现的次数、Ascii 编号和“字符”。但我想知道最简单和最计算机科学的打印字符的方法，例如 NEWLINE "\n" 或 "\t"。如果可能的话，我想避免输入所有类似的字符。

如果您需要任何代码，请告诉我！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:59:08.487

您始终可以使用[Caret Notation](http://en.wikipedia.org/wiki/Caret_notation)，它具有将不可打印的 ASCII 代码相当简单的映射到插入符号 '^' 以及可打印的 ASCII 字符。

# excel - 范围类的自动过滤方法失败

> ID：14827833
> 
> 赞同：0
> 
> 时间：2013-02-12T07:52:07.787
> 
> 标签：excel, vba, sorting, autofilter

ActiveSheet.Range("a1:b1").AutoFilter

上面的代码工作正常，但有时会给出错误“范围类的自动过滤方法失败”。我的意图是在没有任何条件的情况下启用对某些列的过滤。有没有更好的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T16:32:25.810

作为一项规则，我总是关闭所有先前的过滤器，以防万一。

```
ActiveSheet.AutoFilterMode = False      'turn off prior filters
ActiveSheet.Range("A1:B1").AutoFilter   'turn on new clean filter 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-25T16:06:35.523

我只是在处理类似的情况，无论我做什么，Range 都不会执行 AutoFilter()。我能够通过完全从方程中删除 Range 来解决它，使用如下选择：

```
ActiveSheet.Range("a1:b1").Select()
Application.Selection.AutoFilter() 
```

不管问题是什么，选择完全绕过了它。

# php - SQL 类型字段未更新 joomla 模块中的列表

> ID：14827840
> 
> 赞同：0
> 
> 时间：2013-02-12T07:52:30.030
> 
> 标签：php, joomla

我创建并安装了一个 joomla 模块，我在其中添加了一个 sql 类型参数字段并从数据库中获取数据。所以数据库表的数据逐渐更新和添加，但模块中的列表中的数据没有更新。

请帮助如何在不重新安装模块的情况下更新列表。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:00:22.373

看起来像缓存问题，请尝试清除缓存或管理缓存。这能解决问题吗？

Joomla 默认在所有扩展上启用缓存，因此您必须根据需要在模块配置或代码中显式禁用它。

# ios - 为什么访问 self 的属性不会在 self 拥有的块中引发编译器警告

> ID：14827842
> 
> 赞同：3
> 
> 时间：2013-02-12T07:52:34.137
> 
> 标签：ios, objective-c, cocoa-touch

我对内存管理/保留周期有点困惑。这是一个简单的类：

```
@interface Test : NSObject {
    NSObject *objectA;
}
@property (nonatomic, strong) NSObject *objectB;

- (void)methodA;
@end 
```

假设我有一个 Test 实例拥有的块。在这个块中，我做：

```
 objectA = nil; 
```

我得到一个编译器，说它正在这个块中捕获自我，这将导致保留周期。为什么？我在这里看不到自己。

然后，如果我这样做：

```
self.objectB = nil; 
```

没有警告！如果有的话，我应该在这里收到警告。

另外，如果我这样做：

```
[self methodA]; 
```

我在这里得到一个警告。所以我不确定幕后到底发生了什么。我希望第一个不给我警告，最后两个给我一个警告（因为我保持对自我的强指针），但实际上恰恰相反。

这是一个例子：

```
@interface ListVC () {
    NSObject *objectA;
}
@property (nonatomic, strong) NSObject *objectB;
- (void)methodA;
@end 
```

在 viewDidLoad 中：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    [self.tableView addPullToRefreshWithActionHandler:^{
        self.objectB = nil; //no warning here
        objectA = nil; //warning here
        [self methodA]; //warning here (if i place this above previous warning
    }];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T08:06:55.477

第一个警告是正确的。访问块内的实例变量将隐式保留 self。您没有收到第二条语句的警告这一事实几乎看起来像是一个编译器错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T08:16:24.250

在我看来，编译器只是不想为同一个块多次警告你。我不确定这算不算一个功能，但我看不出还有什么可能发生。

假设我们使用相同的编译器版本（我的是 Apple LLVM 4.2），试试这个：

```
@interface Jubilee : NSObject

@property (copy, nonatomic) NSData * d;

@end

@implementation Jubilee
{
    NSString * s;
    dispatch_block_t block;
}

@synthesize d;

- (void)erase
{
    block = ^{
        s = @"Agamemnon";
    };

    block = ^{
        self.d = [NSData data];
    };

    block = ^{
        [self prevaricate];
    };

}

- (void)assemble
{
    block = ^{
        s = @"Agamemnon";
        self.d = [NSData data];
        [self prevaricate];
    };
}

- (void)prevaricate
{
}

@end 
```

我在每个 Block inside 收到警告`erase`，但仅针对 Block in 的第一行`assemble`。警告在这些行中的任何一行都是正确的。当您对 ivar 进行裸引用时，它是隐式`self->ivar;`的，并且 Block 将保留`self`而不是 ivar 中的对象。

# backbone.js - marionettejs 中的下划线模板属性未定义

> ID：14827847
> 
> 赞同：0
> 
> 时间：2013-02-12T07:52:52.730
> 
> 标签：backbone.js, underscore.js, marionette, backbone-views

我遇到了下划线模板的问题。

我在应用程序启动时获取当前用户。所以我通过传递我从cookie中获取的id来创建一个实例。我将此模型传递给视图并在那里获取它（无论我在哪里执行它都是异步的）。

我有一些由 require.js 插件（var msg）提供的 i18n，所以我使用了这个函数`serializeData`：

```
if (this.model.attributes.name) {
    msg.model = this.model.toJSON();
}

return msg; 
```

在我的下划线模板中，如果可能的话，我想显示用户名，所以我这样做了

```
<% var model = model; if (model) { %>
    <%= model.name.givenName %>
<% } %> 
```

我发现如果我不打电话，`var model = model`我什至无法检查它的存在，`if (model)`因为它会抛出一个`undefined error`.

我对此感到有点不好，因为我不知道如何做得更好。也许我应该使用车把或小胡子而不是微模板。我该如何解决这个丑陋的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:36:56.600

你应该像这样检查

```
if (typeof model != "undefined" && model.name != undefined && model.name.givenName != undefined ) {
    ...
} 
```

它与 Javascript 的怪异语法有关。

# windows - LaTeX 到 png 的转换

> ID：14827853
> 
> 赞同：0
> 
> 时间：2013-02-12T07:53:08.040
> 
> 标签：windows, r, latex, png, converter

按照[上一个问题](https://stackoverflow.com/questions/14797440/include-apsrtable-or-stargazer-output-in-an-rmd-file)，我想我可以首先将[stargazer](http://www.r-statistics.com/2013/01/stargazer-package-for-beautiful-latex-tables-from-r-statistical-models-output/)（汇总统计表的乳胶代码）的输出转换为png，在R块中使用R命令（如dvi，dvips，...），或者在最坏的情况下，调用系统命令（参见这篇[文章](http://mazack.org/unix/tex2png.php)），然后使用类似的命令将生成的 png 导入我的 Rmd 文件

```
![alt text](summary_lm.png) 
```

你认为这可能吗？你能告诉我怎么做吗，因为我没有运气？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T23:01:47.773

您可以使用`object`标签将 PDF 文件嵌入 HTML 文件（但并非所有 Web 浏览器都支持）。

一个棘手的问题是 LaTeX 生成的 PDF 文件的大小必须提前设置；但是，要显示表格，您可能更喜欢 PDF 文件的大小与表格的大小完全相同，以避免出现较大的空白边距和/或滚动条。您可以使用 GhostScript 裁剪 PDF 文件。

这是一个例子。

```
# Sample data
library(stargazer)
example(stargazer)
code <- .Last.value$value

# Generate the LaTeX file
file <- tempfile("latex_", fileext = "")
tex_file  <- paste( file, "tex",  sep="." )
pdf_file  <- paste( file, "pdf",  sep="." )
pdf_file2 <- paste( file, "_cropped.pdf",  sep="" )
png_file  <- paste( file, "png",  sep="." )
html_file <- paste( file, "html", sep="." )
cat( 
  "\\documentclass{report}",
  # Unreasonably tall page size: we want everything on the same page
  "\\usepackage[paperwidth=10cm,paperheight=100cm,noheadfoot,margin=0in]{geometry}",
  "\\begin{document}",
  "\\pagestyle{empty}", 
  paste(code, collapse="\n"),
  "\\end{document}\n", 
  sep="\n",
  file = tex_file
)

# Generate the PDF file
old_wd <- getwd()
setwd( tempdir() )
system(paste( "pdflatex --interaction=nonstopmode", shQuote(tex_file) ))

# We need to crop the file.
# I will use Ghostscript, but you could also use
#   http://pdfcrop.sourceforge.net/
# or
#   http://www.ctan.org/tex-archive/support/pdfcrop
# First, find the dimensions 
bbox <- system(paste( "gs -sDEVICE=bbox -dNOPAUSE -dBATCH -f", pdf_file, "2>&1" ), intern=TRUE)
bbox <- bbox[ grep("%%BoundingBox", bbox) ]
bbox <- as.numeric( strsplit(bbox, " ")[[1]][-1] )
# Then, crop the file
cmd <- paste( 
  "gs -sDEVICE=pdfwrite",
  "-o", pdf_file2, 
  "-c \"[/CropBox [", paste(bbox, collapse=" "), "] /PAGES pdfmark\"",
  "-f", pdf_file 
)
system(cmd)

# Convert it to PNG, in case the browser cannot display inline PDF files.
# This assumes that ImageMagick is installed.
# You may want to play with the options to have a better quality and/or larger file.
system(paste( "convert", "-trim", "-density 400", pdf_file2, "-resize 50%", png_file ))

# You can now include it in an HTML file 
# (or a Markdown file, since you can include raw HTML).
cat(
  "<html><body><p>Here is an embedded PDF file.</p>\n",
  "<object width='100%' height='100%' type='application/pdf' data='", pdf_file2, "'>",
  "<img src='", png_file, "'/>",
  "</object>\n",
  "</body></html>",
  sep="",
  file=html_file
)

# Check that the result can be displayed in your browser
# (Chrome should be fine, but I have not had any success with the others.)
browseURL( html_file ) 
```

# php - 使用IP地址查找纬度和经度

> ID：14827858
> 
> 赞同：1
> 
> 时间：2013-02-12T07:53:13.207
> 
> 标签：php, javascript, bing-maps

在我的页面中，我使用 bingmap API 来查找给定地址的纬度和经度。这是脚本。

但我需要在这里做的是，如何通过输入 IP 地址来获取邮政编码。任何人都可以帮助我实现此功能。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#btnSearch").click(function () {
                //check user has entered something first
                if ($("#txtAddress").val().length > 0) {
                    //send location query to bing maps REST api
                    $.getJSON('http://dev.virtualearth.net/REST/v1/Locations?query=' + $("#txtAddress").val() + '&key=mykey&jsonp=?', function (result) {
                        if (result.resourceSets[0].estimatedTotal > 0) {
                            var loc = result.resourceSets[0].resources[0].point.coordinates;
                            $("#results").html('latitude:' + loc[0] + ', longitude:' + loc[1]);
                        }
                        else {
                            $("#results").html("sorry that address cannot be found");
                        }
                    });
                }
                else {
                    $("#results").html("please enter an address");
                }
            });
        });
    </script>
    <label for="myaddress">Type an address:</label>
    <input type="text" id="txtAddress" />
    <input type="button" id="btnSearch" value="Find Location" />
    <p id="results"></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:09:29.237

尝试

```
$ip = "YOUR_IP_ADDRESS";

$_API = "API_KEY";
$_URL = "http://api.ipinfodb.com/v3/ip-city/?key=$_API&ip=$ip&format=json";
```

**输出**

`{ "statusCode" : "OK", "statusMessage" : "", "ipAddress" : "YOUR_IP_ADDRESS", "countryCode" : "IN", "countryName" : "INDIA", "regionName" : "GUJARAT", "cityName" : "AHMEDABAD", "zipCode" : "ZIPCODE", "latitude" : "23.0333", "longitude" : "72.6167", "timeZone" : "+05:30" }`

`API_KEY`将在[**Ipinfodb**](http://www.ipinfodb.com)上提供。

# c#-4.0 - 扩展和枚举类型

> ID：14827861
> 
> 赞同：0
> 
> 时间：2013-02-12T07:53:31.467
> 
> 标签：c#-4.0, enums, extension-methods

我正在尝试将扩展方法添加到 Enum 类型，但下面的代码失败。编译器在线给出错误`StoreType.GetAllItems`如何将扩展方法添加到 Enum 类型？

```
namespace ConsoleApplication1
{

    public static class EnumExtensions
    {
        public static IEnumerable<T> GetAllItems<T>(this Enum value)
        {
            foreach (object item in Enum.GetValues(typeof(T)))
            {
                yield return (T)item;
            }
        }

    }

    class Program
    {

        [Flags]
        public enum StoreType
        {
            Paypal = 1,
            Plimus = 2,
            Other = 3
        };

        static void Main(string[] args)
        {            
           StoreType.GetAllItems //Fail here
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:05:58.067

您会看到编译器错误，因为您*无法*覆盖默认的 c# **enum**，根据[本文](https://stackoverflow.com/questions/4704201/what-is-the-best-way-to-override-enums)尝试通过将您的方法添加到自定义类来以这种方式覆盖您的枚举：

```
public class MyEnum
{
    public static readonly MyEnum A = new MyEnum("A");
    public static readonly MyEnum B = new MyEnum("B");
    public static readonly MyEnum C = new MyEnum("C");
    public static IEnumerable<T> GetAllItems<T>(this Enum value)
    {
        foreach (object item in Enum.GetValues(typeof(T)))
        {
            yield return (T)item;
        }
    }

    public override string ToString()
    {
        return Value;
    }

    protected MyEnum(string value)
    {
        this.Value = value;
    }

    public string Value { get; private set; }
}

public sealed class MyDerivedEnum : MyEnum
{
    public static readonly MyDerivedEnum D = new MyDerivedEnum("D");

    private MyDerivedEnum(string value)
        : base(value)
    {
    }
}

class Program
{
    static void Main(string[] args)
    {
        MyEnum blah = MyEnum.A;
        System.Console.WriteLine(blah);
        blah = MyDerivedEnum.D;
        System.Console.WriteLine(blah);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T08:02:25.480

您必须在一个值上调用 GetAllItems，而不是一个类型：

```
StoreType.Paypal.GetAllItems() 
```

但是不让它成为扩展方法并声明它不是更好：

```
public static class EnumExtensions
{
    public static IEnumerable<T> GetAllItems<T>()
    {
        foreach (object item in Enum.GetValues(typeof(T)))
        {
            yield return (T)item;
        }
    }
}
static void Main(string[] args)
{            
    var allEnumItems = EnumExtensions.GetAllItems<StoreType>()
} 
```

甚至：

```
Enum.GetValues(typeof (StoreType));
Enum.GetNames(typeof (StoreType)); 
```

之后您可以使用 Enum.TryParse(...) 将名称解析回枚举，我认为这是您想要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-07T18:04:24.693

我会说那将是一个带有伪扩展的类。它可能看起来像这样：

用法：

```
List<HttpStatusCode> list = EnumUtils<HttpStatusCode>.ToList();

Dictionary<int, HttpStatusCode> map = EnumUtils<HttpStatusCode>.ToDictionary(); 
```

伪扩展类：

```
/// <summary>Pseudo extension class for enumerations</summary>
/// <typeparam name="TEnum">Enumeration type</typeparam>
public class EnumUtils<TEnum> where TEnum : struct, IConvertible
{
    public static List<TEnum> ToList()
    {
        var enumType = typeof(TEnum);

        return enumType.IsEnum
            ? enumType.GetEnumValues().OfType<TEnum>().ToList()
            : throw new ArgumentException($"{enumType.Name} is not enum");
    }

    public static Dictionary<int, TEnum> ToDictionary()
    {
        Type enumType = typeof(TEnum);

        return enumType.IsEnum
            ? enumType.GetEnumValues().OfType<TEnum>().ToDictionary(
                e => Convert.ToInt32(Enum.Parse(typeof(TEnum), e.ToString()) as Enum), 
                e => e)
            : throw new ArgumentException($"{enumType.Name} is not enum");
    }
} 
```

享受！

# mysql - 恢复数据库转储但不想更改表的字段

> ID：14827865
> 
> 赞同：0
> 
> 时间：2013-02-12T07:53:40.563
> 
> 标签：mysql, ruby-on-rails, database, mysqldump

我想在本地恢复当前应用程序的数据库转储。

问题是我想将站点的第一个版本的数据存储到站点的第二个版本，但问题是在第二个版本中添加了新的表和字段，而在第一个版本中没有。

因此，当我在第二个版本上恢复第一个版本转储时，新创建的字段将被删除。

我正在使用 mysql 查询浏览。

你能建议我在本地和现场做什么吗？

**编辑**

例如

在第二个版本中，我有 10 个字段，在第一个版本中，我在用户表中有 8 个字段。

现在我想在第二个版本中使用第一个版本的记录，所以我在第二个版本数据库上运行第一个版本的 sql 转储，但第一个版本只有 8 个字段，所以删除了 2 个新的 ceated 字段。

我想要与版本一的记录相同数量的字段。

谢谢。

# ios - 从 plist 中获取选定的图像以显示在另一个视图中

> ID：14827877
> 
> 赞同：0
> 
> 时间：2013-02-12T07:54:26.830
> 
> 标签：ios, objective-c, uiimage, plist

从我的上一个问题中，我修改了我的代码以从 plist 中获取图像。我的上一个问题在此链接中（[从数组中获取选定图像以显示在另一个视图中](https://stackoverflow.com/questions/14812709/fetching-selected-image-from-an-array-to-be-displayed-in-another-view)）

我的代码是：

```
- (void)viewDidLoad
{

 [super viewDidLoad];

    NSDictionary *dictionary = [NSDictionary dictionaryWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"ImageList" ofType:@"plist"] ];
self.arrayImages = [dictionary objectForKey:@"Images"];

selectedTag = 0;
images = [[NSMutableArray alloc]init];
lists = [[NSMutableArray alloc]init];
imageScroll.delegate = self;
imageScroll.scrollEnabled = YES;
int scrollWidth = 768;
imageScroll.contentSize = CGSizeMake(scrollWidth,605);
int xOffset = 0;
int total = self.arrayImages.count;

for(index=0; index < total; index++)
{
    dict = [self.arrayImages objectAtIndex:index];

    UIButton *img = [UIButton buttonWithType:UIButtonTypeCustom];
    UILabel *lab = [[UILabel alloc] init];
    img.tag = index;
    selectedTag = img.tag;
    img.bounds = CGRectMake(10, 10, 50, 50);
    img.frame = CGRectMake(50+xOffset, 120, 270, 350);
    lab.bounds = CGRectMake(20, 20, 150, 150);
    lab.frame = CGRectMake(160+xOffset, 500, 90, 50);
    lab.font = [UIFont systemFontOfSize:24];
    [img setImage:[UIImage imageNamed:[dict objectForKey:@"imagesName"]] forState:UIControlStateNormal];
    lab.text = [NSString stringWithFormat:[dict objectForKey:@"listName"]];
    [images insertObject:img atIndex:index];
    [lists insertObject:lab atIndex:index];
    imageScroll.contentSize = CGSizeMake(scrollWidth+xOffset,510);
    [imageScroll addSubview:[images objectAtIndex:index]];
    [imageScroll addSubview:[lists objectAtIndex:index]];
    xOffset += 370;

    [img addTarget:self action:@selector(newView:) forControlEvents:UIControlEventTouchUpInside];
    selectedTag = img.tag;
}    
}

-(void)newView:(id)sender{

NSLog(@"%@",sender);
int newIndex;
newIndex = [sender tag];
NSLog(@"Selected Tag :%d",newIndex);
CGRect rec = CGRectMake(0, 0, 250, 250);
[self setView:[[[UIView alloc] initWithFrame:rec] autorelease]];
[[self view] setBackgroundColor:[UIColor whiteColor]];
UIImage *img = [UIImage imageNamed:[[dict objectForKey:@"imagesName"]objectAtIndex:newIndex]];

UIImageView *im = [[UIImageView alloc] initWithImage:img];
UILabel *lab1 = [[UILabel alloc] init];
lab1.text = [NSString stringWithFormat:[[dict objectForKey:@"listName"] objectAtIndex:newIndex]];

lab1.bounds = CGRectMake(20, 20, 150, 150);
lab1.frame = CGRectMake(360, 600, 90, 50);
lab1.font = [UIFont systemFontOfSize:24];
im.bounds = CGRectMake(10, 10, 50, 50);
im.frame = CGRectMake(200, 120, 370, 450);
[[self view] addSubview:im];
[[self view] addSubview:lab1];
} 
```

我的 Plist 输出：

```
 Images =     (
            {
        Contents = "Sea While Tsunami";
        imagesName = "sea1.jpg";
        listName = Sea1;
    },
            {
        Contents = "Sea While Tsunami";
        imagesName = "sea2.jpg";
        listName = Sea2;
    },
            {
        Contents = "Sea While Tsunami";
        imagesName = "sea3.jpg";
        listName = Sea3;
    },
            {
        Contents = "Sea While Tsunami";
        imagesName = "sea4.jpg";
        listName = Sea4;
    },
            {
        contents = "Sea While Tsunami";
        imagesName = "sea5.png";
        listName = Sea5;
    },

 ), 
```

我收到错误：

```
<UIButton: 0x714f3a0; frame = (420 120; 270 350); opaque = NO; tag = 1; layer = <CALayer: 0x4f460>>
2013-02-12 12:58:46.973 image[2546:11303] Selected Tag :1
2013-02-12 12:58:46.975 image[2546:11303] -[__NSCFString objectAtIndex:]: unrecognized selector sent to instance 0x714bd60
2013-02-12 12:58:46.976 image[2546:11303] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString objectAtIndex:]: unrecognized selector sent to instance 0x714bd'
***First throw call stack:
(0x8f012 0xcce7e 0x1a4bd 0x7ebbc 0x7e94e 0x3584 0xe0705 0xe97e3 0xe9668 0x1465c 0x26a2 0x25d5)
libc++abi.dylib: terminate called throwing an exception 
```

plist 工作正常..它在第一个视图上显示得很好..但是在将选定的图像提取到另一个视图时我收到了这个错误..我在初始化获取的图像时弄错了`newView:`..有人可以帮我解决这个问题吗？提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:02:47.273

声明它在`YurSecondViewController.h`

```
UIImage *img;
@property(nonatomic,retain)UIImage *img; 
```

确保你 make`property`和`synthesize` **img**。

在`FirstViewController`你拥有的地方`image`： -

```
YurSecondViewController *View=[[[YurSecondViewController alloc]init];
View.img=[UIImage imageNamed:@"Default.png"];
[self.navigationController pushViewController:View animated:YES]; 
```

在您必须显示图像的 YurSecondViewController.m 中：-

```
UIImageView *imgView=[[UIImageView alloc]initWithFrame:CGRectMake(50, 50, 100, 100)];
[imgView setImage:self.img];
[self.view addSubview:imgView]; 
```

# silverlight - 工作表名称异常？

> ID：14827878
> 
> 赞同：0
> 
> 时间：2013-02-12T07:54:27.607
> 
> 标签：silverlight, silverlight-4.0

我正在使用 infragestics.document.excel dll。

所以我为工作簿创建了一个工作表。

例如：

```
 Workbook workbook = new Workbook();

    Worksheet worksheet = workbook.Worksheets.Add("My Analysis is Detailed Page Level Details");

    workbook.SetCurrentFormat(WorkbookFormat.Excel2007); 
```

所以在这个我得到异常调用工作表名称应该在 1 到 31 之间。

但是我必须像在数据库中一样实现名称，所以任何人都可以为此提供一些解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:00:10.853

31 个字符是工作表名称的最大限制。这是一个硬限制，所以没有办法绕过它。选择较短的工作表名称。

# unix - 如何比较具有相似内容的两个文件

> ID：14827880
> 
> 赞同：1
> 
> 时间：2013-02-12T07:54:30.200
> 
> 标签：unix

我有两个可能具有相似内容的文件（即相似的行，但存在于不同的行中）。我试过`diff`了，但它会比较每一行，但我希望他们将它视为平等，即使它存在于文件的任何行中。下面是一个语义相等的文件。

```
fileA

one
two
three
four

fileB

two
three
four
one 
```

# jakarta-ee - Java EE - 搜索 web.xml 通用规范

> ID：14827883
> 
> 赞同：3
> 
> 时间：2013-02-12T07:54:43.323
> 
> 标签：jakarta-ee, web.xml, specifications

我是 Java EE 新手。我发现 web.xml 是许多 servlet 容器/应用程序服务器（如 tomcat、glassfish 等）使用的标准文件（部署描述符）。在许多教程中，我可以找到各种 XML 标记，我应该将自定义值放在某处以实现给定功能（在教程的上下文中）。但这很混乱——我不知道我是否可以在 spring/tomcat 中重复使用最初在 glassfish/jsf 中使用的标签（这只是一个示例问题）。web.xml 是否有一个主要的 Java EE 规范，以便我知道我可以在其中放置哪些标签，独立于使用的 Web 服务器和框架？

我读到，例如 tomcat 为 web.xml 文件提供了一些特定选项，所以我猜每个服务器的行为都会有所不同（就像 Web 浏览器可以不同地解释 HTML/CSS） - 但是某处是否有主要文档（独立于框架）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T08:14:54.740

通常在java世界中通用的规范叫做JSR。例如，Servlet 规范包含 web.xml 的定义（以及如何解释它）。有多个 Servlet 版本，它们由不同的 JSR-s 指定。例如，可以在此处找到 Servlet 2.4 规范：http: [//jcp.org/en/jsr/detail](http://jcp.org/en/jsr/detail?id=154) ? id=154（称为 JSR-154）

我认为规范不允许不同的供应商使用不同的web.xml-s。相反，他们建议使用带有 web.xml 的其他文件。因为 Tomcat 曾经是 Servlet 的参考实现（但不再是），所以我认为 Tomcat 对 JSR 非常严格。

目前最新的 servlet 规范是 3.0（3.1 即将推出）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-27T06:37:46.027

当然，官方规范在上面提到的各种 JSR 中。

但一个方便的技巧是查看 xml 文件顶部的“schemaLocation”属性。把它放在网络浏览器中，您将获得包含所有标签和注释的 XSD 文档。

在这些规范中，您还将找到有关问题第二部分的信息。注释提供配置，这些配置可以被部署描述符 (web.xml) 中的值覆盖，每个应用程序服务器品牌还可以在自己的部署描述符中包含额外的配置信息。IE。WEB-INF/jboss-web.xml

这些供应商特定的部署描述符可能具有与 web.xml 同名的标签并覆盖 web.xml 值。

web.xml（和其他标准部署描述符）是标准化的。供应商特定的部署描述符取决于每个应用程序服务器供应商。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T11:28:02.927

我认为您应该始终查看与您正在使用的应用程序服务器相关的文档。

例如，如果您使用 WebSphere，[请参阅此](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/rweb_webxf.html)

对于 WebLogic[看到这个](http://docs.oracle.com/cd/E13222_01/wls/docs81/webapp/web_xml.html)

有趣的是，在 Servlet 3.0 中，您可以通过使用注解创建一个可能根本不使用部署描述符的应用程序。这并不意味着不再使用 WEB.xml。[这](http://today.java.net/pub/a/today/2008/10/14/introduction-to-servlet-3.html)是一篇关于 servlet 3.0 的好文章。

# linux - 适用于 64 位的 Linux futex

> ID：14827885
> 
> 赞同：3
> 
> 时间：2013-02-12T07:55:03.500
> 
> 标签：linux, futex

我在 64 位 Linux 机器上：

> Linux illin793 2.6.32-279.5.2.el6.x86_64 #1 SMP 2012 年 8 月 14 日星期二 11:36:39 EDT x86_64 x86_64 x86_64 GNU/Linux

来自 man futex：

> int futex(int *uaddr, int op, int val, const struct timespec *timeout, int *uaddr2, int val3);

因此，这里 futex 使用 32 位值。

Linux 上是否有适用于 64 位值的 futex？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T08:33:57.200

目前在 Linux 上不支持 64 位 futexes。早在 2007 年就有补丁可以添加支持，但我不知道为什么它们没有被集成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-09T03:47:00.123

Linux 上没有 64 位 futex 支持，可能是因为 Linus Torvalds 似乎对这个想法死心塌地。引用Ulrich Drepper 提交[的 64 位 futex 补丁：](https://lkml.org/lkml/2008/5/31/2)

```
How about you post your code. 

Because your questions seem to be total and utter crap.

> - How do you know when there is no more writer waiting?  You cannot
>   reset a "writer waiting" bit after you wake up one writer without
>   waking every single thread waiting for the rwlock and letting them
>   fight for it

Sure you can. By looking at the *other*data* that isn't atomic.

So when doing a "write_unlock()" (or whatever you call it - for the kernel 
calls it "up_write()") you can look at the non-atomic write counts to 
decide whether there are others.

Also note how you can use 64-bit atomic ops to do that all in user space, 
without actually requiring 64-bit futex support - as long as the bits that 
matter for waking (like "was there more than one pending writer") fit in 
the one 32-bit word.

> - - How do you handle the difference between reader-preferred rwlocks
>   and writer-preferred rwlocks?  In the latter, if a rwlock is locked
>   for reading, future readers must be delayed until all writers are
>   gone

Again, that's not something that needs to be in the *atomic* part.

It's unquestionable that a rwlock is more than 32 bits, but what I 
question is whether you need all those extra bits to be under futex

> - How do you do the accounting for the *timedlock variants?  In the
>   case of those a functions, if the threads wake due to a timeout,
>   you have the decrement the waiter count.  But you have only one bit...

Uli, you're not even trying any more.

NO, you don't have just one bit. You have as many bits as you want. It's 
just that only 32 of the bits will be relevant for FUTEX_WAIT_OP etc. 
```

值得一读之前和之后的其他消息，因为对使用 32 位 futexes 实现快速读写锁所固有的权衡进行了一些很好的讨论。

Linus 上面的想法是，即使您需要超过 32 个“原子位”来实现您的算法，您也可以通过将附加数据保留在 32 位 futex 值之外来解决 64 位 futex 的不足。后来他详细阐述了该方案的一个变体，建议使用两个相邻的 32 位字，并确保任何给定`futex`调用需要保护的任何状态都适合 32 位半部分中的一个。*您仍然可以在用户空间*中同时对两半执行 64 位原子操作，但您只需将自己限制为 32 位子集以进行实际的块/唤醒决策。

# c++ - 简单的小型 c++ IDE

> ID：14827891
> 
> 赞同：11
> 
> 时间：2013-02-12T07:55:31.523
> 
> 标签：c++, ide

我正在寻找一个小而简单的环境来运行小型 C++ 示例。我讨厌打开 Visual Studio 并仅为一个包含 50 行代码的源文件创建一个项目。唯一的要求是要有 stl 支持（像这样的[http://www.compileonline.com/compile_cpp_online.php](http://www.compileonline.com/compile_cpp_online.php)在桌面上会很棒）。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T08:12:15.957

C++ IDE 列表。

*   [代码块](http://www.codeblocks.org/downloads/26)
*   [日食 CDT](http://www.eclipse.org/cdt/downloads.php)
*   [Dev C++](http://www.bloodshed.net/devcpp.html)（[严重过时](http://clicktobegin.net/programming/why-you-shouldnt-use-dev-c/)）（[新的积极更新的版本](http://sourceforge.net/projects/orwelldevcpp/)）

在线 C++ 编译器列表。

*   [Ideone](http://ideone.com/) (GCC 5.1.1)
*   [Coliru 编辑器](http://stacked-crooked.com/)(GCC 5.3.0)
*   [在线编译](http://www.tutorialspoint.com/compile_cpp11_online.php)(GCC 4.9.2)
*   [键盘](http://codepad.org/)(GCC 4.1.2)

* * *

我将推荐eclipse cdt。尽管在 eclipse cdt 中创建项目并不比 Visual Studio 快，但您始终可以创建一个每次都可以重复用于小片段的项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T08:00:14.623

您拥有的机会之一是[Devcpp](http://www.bloodshed.net/devcpp.html)

你也可以看看这个[维护的 Dev-c++ 版本](http://sourceforge.net/projects/orwelldevcpp/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T08:07:23.520

您可能想看看这个（相当全面的）[概述](http://en.wikipedia.org/wiki/Comparison_of_integrated_development_environments#C.2FC.2B.2B)。[Code::Blocks](http://www.codeblocks.org)、[CodeLite](http://codelite.org)、[Dev-C++](http://www.bloodshed.net/devcpp.html)和[QtCreator](http://qt.digia.com/Product/Developer-Tools/)（尽管后者又是相当重量级的）是 AFAIK 流行的开源选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T08:30:16.937

[SciTE](http://www.scintilla.org/SciTE.html)是我以前使用的一个编辑器。如果我没记错的话，它有构建和运行的捷径。

# php - 删除客户表单属性

> ID：14827892
> 
> 赞同：0
> 
> 时间：2013-02-12T07:55:31.583
> 
> 标签：php, attributes, magento-1.7

我已经使用添加了自定义属性

```
$setup->addAttribute('customer','default_business',array(
      'type'               => 'int',
        'label'              => 'Default Business Address',
       'input'              => 'text',
       'backend'            => 'orancustomer/customer_attribute_backend_business',
        'required'           => false,
       'sort_order'         => 200,
      'visible'            => 0,
      'global' =>1,
        'user_defined' => 1,));

$attr = $eavConfig->getAttribute('customer', 'default_business');
$attr->setData(  'used_in_forms', array('customer_account_create', 'customer_account_edit', 'checkout_register')///*'adminhtml_customer',*/
)->save(); 
```

它按预期工作。但是当我试图删除它时，

```
$installer->removeAttribute('customer', 'default_business'); 
```

它已成功从 eav_attribute 表中删除。但在管理部分我收到以下错误致命错误：调用 D:\xampp\htdocs\magoran\app\code\core\Mage\Eav\Model\Entity 中的非对象上的成员函数 getBackend() \Collection\Abstract.php 在第 515 行

当我尝试调试时，我发现它仍在搜索 default_business 属性。它仍在管理客户页面中搜索属性。这是我在调试过程中发现的查询

```
 SELECT `eav_attribute`.* FROM `eav_attribute` WHERE (`eav_attribute`.`attribute_code`='oran_company') AND (entity_type_id = :entity_type_id)
 BIND: array (
 ':entity_type_id' => '1', 
 ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:55:07.317

我发现这是由于 config.xml 中的字段集。在我从自定义模块的 config.xml 的字段集中将其删除后，该错误已修复，另外还有一件事我发现在字段集中添加新添加的属性不是强制性的。

# assembly - 使用内联汇编启动 shell

> ID：14827894
> 
> 赞同：4
> 
> 时间：2013-02-12T07:55:39.910
> 
> 标签：assembly, buffer-overflow, shellcode, stack-smash

我正在完成一项学校作业，我完全被难住了。教授和助教没有任何帮助，因为他们提供给任何学生的每一个答案都是“继续寻找，答案就在那里”的某种变体。我正在尝试使用以下代码创建一个外壳：

```
#include <stdio.h>
#include <stdlib.h>

const char code[] =
"\x31\xc0"
"\x50"
"\x68""//sh"
"\x68""/bin"
"\x89\xe3"
"\x50"
"\x53"
"\x89\xe1"
"\x99"
"\xb0\x0b"
"\xcd\x80"
;

int main(int argc, char **argv)
{
printf("running...\n");

char buf[sizeof(code)];
strcpy(buf, code);
((void(*)( ))buf)( );
} 
```

我试图用`code[]`在网上找到的其他一些例子（包括这个网站）以及教授提供的附加 pdf 中的一个例子来替换。这些都没有用。我使用 gdb 反汇编并尝试构建自己的`code[]`，但也失败了。对于它的价值，我可以说，在普通用户中，我的应用程序在该`((void(*)( ))buf)( );`行出现段错误，然后在同一行的 root 用户中退出（没有段错误通知）。

我不知道在哪里可以完成这项任务，并且在我理解这个简单的第一步之前，我无法处理任何以后的缓冲区溢出任务。任何帮助将*不胜*感激。

编辑：我忘了提，我在 OSX 10.8.2 和通过 VirtualBox 的 Ubuntu VM 上都试过这个。我假设它在 OSX 上不起作用，但我很绝望。ha 对于 Ubuntu，我们被要求做：

sudo #sysctl -w kernel.randomize_va_space=0

sudo apt-get install zsh cd/bin sudo rm sh sudo ln -s /bin/zsh /bin/sh

这些命令应该禁用地址空间随机化，安装 zsh 并将其链接到 /bin/sh。我在虚拟机中完成了所有这些任务，没有任何错误

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-12T21:36:53.127

你的代码反汇编成这样的：

```
00000000  31C0              xor eax,eax
00000002  50                push eax
00000003  682F2F7368        push dword 0x68732f2f
00000008  682F62696E        push dword 0x6e69622f
0000000D  89E3              mov ebx,esp
0000000F  50                push eax
00000010  53                push ebx
00000011  89E1              mov ecx,esp
00000013  99                cdq
00000014  B00B              mov al,0xb
00000016  CD80              int 0x80 
```

礼貌`ndisasm`。让我们一步一步地看一遍这些指令，并在途中分析堆栈帧。

`xor eax,eax`将`eax`寄存器清零，因为操作数与自身的 XOR 操作将始终产生零作为结果。`push eax`然后将值压入堆栈。因此，堆栈当前或多或少看起来像这样（相对于`esp`代码开头的值显示的偏移量，`esp`表示`esp`当前指向的堆栈单元）：

```
 +----------+
     0 | 00000000 |
esp -4 | xxxxxxxx |
       +----------+ 
```

接下来，我们有两条`push dword`指令，它们将一些立即值压入堆栈，在执行它们之后 - 看起来像这样：

```
 +----------+
     0 | 00000000 |
    -4 | 68732f2f |
    -8 | 6e69622f |
esp -12| xxxxxxxx |
       +----------+ 
```

`esp`当前指向被压入堆栈的第二个立即数的最后一个字节。让我们尝试将推送的值解释为 ASCII，如果我们从`esp`. 我们得到 的字节序列`2f62696e2f2f7368`，在 ASCII 中等于`/bin//sh`。另外，该序列以 0 结尾，因此它是一个有效的 C 字符串。

`esp`这是将当前值保存到寄存器中的主要原因`ebx`。它包含将要运行的可执行文件的路径。双斜杠对操作系统来说不是问题，因为 POSIX 只是忽略了多次出现的斜杠并将它们视为一个斜杠。

接下来，我们将 的当前值`eax`推`ebx`入堆栈。我们知道`eax`包含零，并且`ebx`包含指向 C-string 的指针`"/bin//sh"`。堆栈当前看起来像这样：

```
 +----------+
         0 | 00000000 |
        -4 | 68732f2f |
        -8 | 6e69622f |
    ebx -12| 00000000 |
        -16| (ebxVal) |
ecx esp -20| xxxxxxxx |
           +----------+ 
```

将寄存器的值压入堆栈后，当前指向的指针`esp`保存在`ecx`.

`cdq`是在这种情况下执行一个非常巧妙的技巧的指令：它将当前值符号扩展`eax`到`edx:eax`寄存器对中。因此，在这种情况下，它会将 中的值`edx`清零，因为零的符号扩展为零。当然，我们可以清除`edx`with中的值`xor edx, edx`，但是该指令用两个字节编码 - 并且`cdq`只占用一个字节。

下一条指令将值`0xb`(11) 放入 的低字节寄存器`eax`。与前一种情况类似，我们可以这样做`mov eax, 0xb`，但这将导致 5 字节指令，因为立即数必须编码为完整的 32 位值。

`int 0x80`在 Linux 上调用系统调用调用程序。它需要系统调用的数量`eax`（现在等于`0xb`，因此将调用该函数），以及, , , ,和`sys_execve`中的附加参数。`ebx``ecx``edx``esi``edi``ebp`

现在，让我们看一下该系统调用的原型：

```
int execve(const char *filename, char *const argv[], char *const envp[]); 
```

因此，`filename`参数放在`ebx`- 它指向`/bin//sh`。`argv`，放置在 中`ecx`，是要执行的可执行文件的参数数组，必须以一个`NULL`值终止。在 Intel 架构上，`NULL`等于`0`，并且`ecx`仅指向 ：一个指向 的指针`/bin//sh`，然后是一个`NULL`值。`envp`，即`NULL`指向一个环境值数组，它必须表示为`char*`形式的值`key=value`。

成功执行`execve`导致当前进程映像替换为指向的可执行文件的映像，并使用提供的参数执行。在这种情况下，`/bin/sh`将使用 的参数执行（如果存在）`/bin//sh`。

Michael 对于为什么这不起作用可能是正确的：最近的 Linux 内核将数据页标记为不可执行，并且尝试执行它们将导致分段错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-03T07:22:01.070

您是否尝试使用以下 gcc 标志编译您的 c 程序？

```
-fno-stack-protector -z execstack 
```

如果您的 shellcode 没有错误，那么您可以使用

```
((void(*)( ))buf)( ); 
```

如果您未能包含编译标志，您可能会遇到段错误

# spring - RESTful Web 服务、Spring-WS 有效负载或 Spring 3 MVC REST 控制器采用哪种方式？

> ID：14827895
> 
> 赞同：4
> 
> 时间：2013-02-12T07:55:40.683
> 
> 标签：spring, rest, spring-mvc, payload

我是初学者`Spring Webservices`。我正在尝试使用`spring-ws 2.0`. 我已经完成了`web.xml`（MessageDispatcherServlet）配置、我的合同设计（XSD）、生成的`JAXB`类和服务实现。我对端点感到困惑。以下哪一项，mvc 休息控制器或端点，在哪种情况下使用是正确的，为什么？提前致谢。

```
@Endpoint
public class PersonEndpoint {

    @Autowired
    private PersonServiceImpl personService;

    @PayloadRoot(localPart = "PersonRequest", namespace = Constants.PERSON_NAMESPACE)
    public @ResponsePayload
    PersonResponseType personReadMethod(@RequestPayload PersonReadRequestType requestElement) {
        return personService.isBiometricNeeded(requestElement);
    }
} 
```

或者

```
@Controller
public class PersonController {

    @Autowired
    private PersonServiceImpl personService;

    @RequestMapping(value = "/person", method = RequestMethod.GET)
    public @ResponseBody
    PersonResponseType personReadMethod(@RequestBody PersonReadRequestType requestElement) {
        return personService.isBiometricNeeded(requestElement);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T17:09:58.367

前者用于肥皂电话，后者用于休息（我假设您还包括杰克逊）

您在前者中所做的是声明一个端点，该端点将在具有适当名称空间和 localPart 的传入soap调用时被调用。在您的情况下，PersonRequest。

我建议看一下参考指南的第 3 章，它解释了一个简单的例子：[http ://static.springsource.org/spring-ws/sites/2.0/reference/html/tutorial.html](http://static.springsource.org/spring-ws/sites/2.0/reference/html/tutorial.html)

后者仅用于对 url 的休息调用，并将传入参数转换为 PersonReadRequestType 实例。

# django - Django 复杂查询从 groupby 和有子句中获取数据

> ID：14827899
> 
> 赞同：2
> 
> 时间：2013-02-12T07:55:52.100
> 
> 标签：django, group-by, django-queryset, annotate

我想在具有 CNT.Status 的 MyUser 表上执行 group by 子句，原始查询如下所示。

```
SELECT user_id from user_table GROUP BY user_id HAVING COUNT(status)=1 
```

我尝试了使用 Django 模型 API 的各种选项，但它也在 group by 子句中添加了“id”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T08:16:23.170

看来您正在寻找[对注释的过滤](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#filtering-on-annotations)：

```
qs = ( MyUser
      .objects
      .annotate(num_status=Count('status'))
      .filter(num_status__gt=1)
     ) 
```

注意：我假设状态是 1:N 相关模型。

# c# - 如何测试 POST 调用？

> ID：14827902
> 
> 赞同：1
> 
> 时间：2013-02-12T07:56:06.640
> 
> 标签：c#, post, soap

鉴于我们知道服务器、服务和参数列表（从 WSDL 文件中获取），进行 POST 调用的最简单方法是什么（即需要尽可能少地编写代码）？

最坏的情况是，我必须自己编写这样的设施。
最好的情况是，已经有一项免费的在线服务可以做到这一点。

是的，我用谷歌搜索过，但显然没有这样的网站**，或者**我在谷歌上搜索。我想在测试期间用它来调用 SOAP 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:48:13.130

Fiddler 是一个非常棒的小工具：

[http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)

Pluralsight 上有一个视频解释了它的使用，您会发现它已成为您工具集的常规部分：

[http://pluralsight.com/training/Courses#debugging](http://pluralsight.com/training/Courses#debugging)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T08:21:42.543

您可以使用 Firefox 插件 - Postman 和 Rest 客户端

请参阅[Firefox Add-on RESTclient - 如何输入 POST 参数？](https://stackoverflow.com/questions/13132794/firefox-add-on-restclient-how-to-input-post-parameters)

# iphone - FPPopover 的远程通知应用程序问题

> ID：14827903
> 
> 赞同：0
> 
> 时间：2013-02-12T07:56:07.313
> 
> 标签：iphone, objective-c

我在我的项目中使用 FPPopover，并且我成功地在我的一个视图控制器 uibutton 中显示了弹出窗口。我也在我的应用程序中使用远程通知。当我通过收到的通知打开应用程序并尝试单击 uibutton 弹出窗口时，我无法获得弹出窗口。你能帮帮我吗？

由湿婆米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T14:14:35.917

我猜你的 UIButton 还不存在。如果您仍然有代码，应该很容易调试。

# php - 如何更改 php get_included_files 数组？

> ID：14827904
> 
> 赞同：0
> 
> 时间：2013-02-12T07:56:09.727
> 
> 标签：php, .htaccess

[http://php.net/manual/en/function.get-included-files.php](http://php.net/manual/en/function.get-included-files.php)

get_included_files — 返回一个包含文件名或所需文件名的数组

我需要能够更改该数组以停止包含某些文件。我知道这是一个可怕的设计缺陷，但是当我们完成一个更永久的解决方案时，我遇到了更新一些只读文件作为临时解决方案的问题。我能够制作第二组文件并使用 .htaccess 将 Web 请求重定向到我被黑的文件，但我想使用不需要修改的原始文件。

长话短说，如果我可以将文件添加到已包含的文件数组中，我的问题将得到解决。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:22:25.480

**通过从get_included_files()**函数将返回的数组中删除内容，对您没有帮助。您需要从正在使用它的特定文件中手动删除该 require 或 include 行。如果您使用任何调试工具，这将非常有帮助。即使是日食也会有帮助

# mysql - 将 Access Pivot 查询转换为 Mysql

> ID：14827906
> 
> 赞同：1
> 
> 时间：2013-02-12T07:56:12.323
> 
> 标签：mysql, pivot, crosstab

我试图弄清楚如何将此交叉表查询转换为 mysql 中的等效查询。任何帮助将不胜感激。

```
TRANSFORM Sum(QryMainCrosstab.Bene_Act) AS SumOfBene_Act
SELECT QryMainCrosstab.DistrictCode, QryMainCrosstab.District_Name AS District
FROM QryMainCrosstab
WHERE (((QryMainCrosstab.Month)=[Forms]![frmResponseReport]![txtMonth]))
GROUP BY QryMainCrosstab.DistrictCode, QryMainCrosstab.District_Name
PIVOT QryMainCrosstab.StrategicResponse; 
```

QryMainCrossTab 是另一个 sql 查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:26:40.323

MySQL 没有*数据透视*函数，但可以使用带有`CASE`表达式的聚合函数来复制它。

代码将类似于以下内容：

```
SELECT q.DistrictCode, 
  q.District_Name AS District,
  sum(case when q.StrategicResponse = 'yourResponse1' then q. Bene_Act end) SumResponse1,
  sum(case when q.StrategicResponse = 'yourResponse2' then q. Bene_Act end) SumResponse2,
  sum(case when q.StrategicResponse = 'yourResponse3' then q. Bene_Act end) SumResponse3,
  sum(case when q.StrategicResponse = 'yourResponse4' then q. Bene_Act end) SumResponse4
FROM QryMainCrosstab q
WHERE q.Month = yourValue
GROUP BY q.DistrictCode, q.District_Name 
```

您将`StrategicResponse`用每个`'yourResponse1'`等替换您的实际值。您还需要将要在`WHERE`子句中过滤的月份传递到此查询中。

# ruby-on-rails - 如何表达有时在rails中有一种关系

> ID：14827907
> 
> 赞同：2
> 
> 时间：2013-02-12T07:56:15.397
> 
> 标签：ruby-on-rails, ruby, model

当我们在stackoverflow中提问，有人回答你的问题，那么模型关系就是

```
class Question < ActiveRecord::Base
  has_many :answers
end

class Answer < ActiveRecord::Base
  belongs_to :question
end 
```

你会把一个答案作为你问题的最佳答案，那么关系是

```
class Question
  has_one answer (the best one)
end 
```

但有时，问题没有最佳答案（例如：未提供答案）

我的问题是如何表达问题和**最佳**答案之间的关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T08:03:10.480

```
$> rails g migration add_best_to_answers best:boolean

> a = Answer.first
> a.best = true
> a.save
> q = a.question 
> q.a.best? # => true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T08:27:17.380

有点多余的解决方案，但是如果您需要`(0..1)`使用标准 Rails 关系 DSL 实现多重性，您可以使用`through`关系：

```
class Question < ActiveRecord::Base
  has_many :answers
  has_one  :answer, :through => :bestanswers
end

class Answer < ActiveRecord::Base
  belongs_to :question
  has_one :bestanswer
end

class BestAnswer < Answer
  belongs_to :answer
  belongs_to :question
end 
```

# sql - 如何使一列表两列？

> ID：14827909
> 
> 赞同：3
> 
> 时间：2013-02-12T07:56:23.927
> 
> 标签：sql, tsql, select

我希望将表格从一列变为两列。例如，我有一个路径表。我有 4 行，我希望像 PATH2 表中那样将其拆分为两列。我该怎么做？我希望这样做是为了计算每个路径值

```
╔══════╗
║ PATH ║
╠══════╣
║    1 ║
║    2 ║
║    3 ║
║    4 ║
╚══════╝ 
```

进入

```
╔══════╦═══════╗
║ PATH ║ PATH2 ║
╠══════╬═══════╣
║    1 ║     2 ║
║    2 ║     3 ║
║    3 ║     4 ║
╚══════╩═══════╝ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T08:08:25.103

[SQL小提琴](http://sqlfiddle.com/#!3/52983/1)

**MS SQL Server 2008 架构设置**：

```
create table YourTable
(
  PATH int
)

insert into YourTable values (1),(2),(3),(4) 
```

**查询 1**：

```
select T1.PATH,
       Lead.PATH as PATH2
from YourTable as T1
  cross apply (
              select top(1) PATH
              from YourTable as T2
              where T2.PATH > T1.PATH
              order by T2.PATH
              ) as Lead 
```

**[结果](http://sqlfiddle.com/#!3/52983/1/0)**：

```
| PATH | PATH2 |
----------------
|    1 |     2 |
|    2 |     3 |
|    3 |     4 | 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T08:02:19.130

如果你正在研究`SQL Server 2012`，你可以使用`LEAD`解析函数。

```
WITH records
AS
(
    SELECT  PATH,
            LEAD(Path) OVER (ORDER BY PATH) Path2
    FROM    TableName
)
SELECT  Path, Path2
FROM    records 
WHERE   Path2 IS NOT NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!6/094f4/2)

或者如果打开`SQL SERVER 2005+`

```
WITH records
AS
(
    SELECT  PATH,
            ROW_NUMBER() OVER (ORDER BY PATH) rn
    FROM    TableName
)
SELECT  a.Path, b.Path AS Path2
FROM    records a
        INNER JOIN records b
          ON a.rn+1 = b.rn 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!6/094f4/4)

# sql - SQL查询中的内连接和比较运算符有什么区别

> ID：14827911
> 
> 赞同：1
> 
> 时间：2013-02-12T07:56:26.267
> 
> 标签：sql, sql-server-2008

我必须用两种不同的方式编写 sql 查询，两者都给出相同的输出。但是还是不明白

1.  两个查询有什么不同？

2.  哪一个访问速度快？

3.  哪个更推荐？

查询 #1

```
SELECT PageControlDet.PageId, PageMaster.PageName, PageMaster.PageURL, 
       PageMaster.PageTitle, PageMaster.PageDescription
FROM AgentRoleAccessDet 
INNER JOIN PageControlDet ON AgentRoleAccessDet.ControlId = PageControlDet.ControlId
INNER JOIN PageMaster ON PageControlDet.PageId = PageMaster.PageId 
```

和

查询 #2

```
SELECT PageControlDet.PageId, PageMaster.PageName, PageMaster.PageURL, 
       PageMaster.PageTitle, PageMaster.PageDescription
FROM   AgentRoleAccessDet,  PageControlDet, PageMaster
WHERE  AgentRoleAccessDet.ControlId = PageControlDet.ControlId and
    PageControlDet.PageId = PageMaster.PageId 
ORDER BY PageControlDet.PageId 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:06:19.373

> 1.  两个查询有什么不同？

一个用`INNER JOIN`，另一个不用。仅列出`FROM`子句中的所有表，用逗号分隔是一种较旧的样式/语法，这些天大多已弃用。这是在`JOIN`语法被引入标准之前。

> 1.  哪一个访问速度快？

他们应该表现同样出色。您必须生成执行计划才能确定，但​​优化器应该平等地对待它们。

> 1.  哪个更推荐？

首先。使联接显式且有别于任何过滤可以帮助其他人在将来理解查询。此外，一旦您引入`OUTER`连接，您就需要使用不推荐使用的语法来使用第二种样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T08:04:14.387

您绝对应该使用内部联接。

在该部分中指定多个表`From`已被弃用，并且可能导致查询解释不明确。有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/894659/51)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T08:19:01.363

在第二个示例中，您的查询等效于：

```
SELECT PageControlDet.PageId, PageMaster.PageName, PageMaster.PageURL, 
       PageMaster.PageTitle, PageMaster.PageDescription
FROM   AgentRoleAccessDet
CROSS JOIN PageControlDet 
CROSS JOIN PageMaster
WHERE  AgentRoleAccessDet.ControlId = PageControlDet.ControlId and
       PageControlDet.PageId = PageMaster.PageId 
ORDER BY PageControlDet.PageId 
```

使用不带此关键字的交叉连接（以逗号分隔的表列表）**是旧语法**，TSQL 支持两者（带有 CROSS 连接关键字的旧和新）。交叉连接**将产生笛卡尔积**。由于您的示例，我更喜欢第一个查询 - 因为根据查询逻辑，它更具可读性、可理解性和格式良好。关于性能：我认为 MSSQL Optimizer 会将您的第二个查询更改为第一个。

# c++ - 是否有任何设计模式可以避免嵌套的 switch case？

> ID：14827914
> 
> 赞同：3
> 
> 时间：2013-02-12T07:56:42.787
> 
> 标签：c++, design-patterns, switch-statement

我见过类似的线程，但是，不确定如何将解决方案准确地应用于我的案例。我的问题是我有一组用例让我们说'A'，'B'，'C'，当输入通过时我需要执行某些命令（2个用例是输入）是列出的用例中的任何2个. 例如：

```
switch(input1)
{
case A:
break;
case B:
break;
case C:
break;
} 
```

在每种情况下，我都必须检查输入 2，因此，最终代码可能看起来像

```
switch(input1)
{
case A:
{
switch(input2):
case B:
break;
case c:
break;
}
case B:
{
switch(input2):
case A:
break;
case c:
break;
}
....

} 
```

我正在考虑使用 (pair,command) 的映射并删除此开关盒，但是是否有任何替代更好的解决方案或设计问题来解决此问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T08:12:30.650

如果性能*不是*一个大问题，那么函数指针映射可能是一种解决方案。

假设标签`A`, `B`, `C`... 是小于的*小*`255`整数值。

*   首先设置地图

    ```
    #define KEY(a,b)  ( (a<<8) | b )

    std::map<int, function_pointer_type>  dispatcher =
    {
        { KEY(A,B), ab_handler},
        { KEY(A,C), ac_handler},
        { KEY(B,C), bc_handler},
        //etc
    }; 
    ```

*   使用映射为每组输入调用适当的处理程序：

    ```
     dispatcher[KEY(input1,input2)] (/* args */); 
    ```

请注意，您必须使用每对可能的输入来设置调度程序。此外，如果对`KEY(A,B)`和`KEY(B,A)`是相同的情况，那么您可以编写一个调用`invoke`来处理这种情况的函数，以便为其余代码提供统一的用法。

```
 void invoke(int input1, int input2, /* args */)
 {
     if (dispatcher.find(KEY(input1, input2)) != dispatcher.end() )
           dispatcher[KEY(input1,input2)] (/* args */);
     else
           dispatcher[KEY(input2,input1)] (/* args */);
 } 
```

然后将其用作：

```
 invoke(input1, input2, /* args */);
 invoke(input2, input1, /* args */);  //still okay! 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T08:05:52.530

在您的情况下，如何将两个开关分成两个功能

```
bool processInput2(char input2)
{
  switch(input2)
  {
   case 'A':
   {  
      // blah
   }
    break;
}

bool processInput1(char input1)
{
  switch(input1)
  {
   case 'A':
      processInput2(input2);
      break;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T08:21:09.657

一种可能性是将代码拆分为每个嵌套案例的一个函数，因此您的示例将具有 6 个函数：

```
void process_A_A() { ... }
void process_A_B() { ... }
void process_B_A() { ... }
void process_B_B() { ... }
void process_C_A() { ... }
void process_C_B() { ... } 
```

然后，在初始化时将它们放入一个数组中，以便在运行时非常快速（恒定时间）查找：

```
typedef std::function<void(void)> Function;  // or: void (*)(void)
Function f[Input1Count][Input2Count];
f[A][A] = &process_A_A;
f[A][B] = &process_A_B;
... 
```

要调用适当的函数，请编写：

```
f[input1][input2](); 
```

请注意，通过使用 C++11`std::function`类型，函数不必是经典函数指针；它们也可以是 lambda 函数或仿函数对象。

您还可以将某些部分保留为空或多次分配相同的功能。当您决定将某些条目保留为空时（因此在这种情况下不应该做任何事情），请在调用之前检查函数对象：

```
if (f[input1][input2])
    f[input1][input2](); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T08:45:31.867

你总是可以做类似的事情：

```
switch ( 256 * input1 + input2 ) {
case 256 * 'A' + 'B':
    //  ...
    break;
//  ...
}; 
```

但坦率地说，在这种情况下，我会发现嵌套开关更容易理解，*假设*这`switch`是您问题的正确答案。对于字符输入，通常是这样，但还有其他选择，例如 a `std::map<std::pair<char, char>, Action const*>`，其中`Action`是虚拟基类，并且映射中的每个动作都是派生类的静态实例。这具有使每个动作成为不同对象的优点（这可能不是优势，取决于您在动作中执行的操作），并且如果地图是动态填充的（例如在 的构造函数中`Action`），您可以添加动作而不修改解析器的源代码（但您可能不需要这种灵活性）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-09T16:31:12.483

使用地图或指针表来处理函数的建议答案是可以的。但我看到两个缺点：1）与手动嵌套开关相比，性能略有下降。2) 案件处理方法不是完全自描述的。我的意思是你必须两次提到每个句柄方法——在它的定义和你初始化地图的地方。

我看到两个替代选项：1）源代码生成。从某种表示中自动生成嵌套开关。嗯......如果不介意为这样一个小任务添加代码生成，那么创建最佳代码是一个很好的选择。2）使用预处理器黑客。不是最优雅但非常有趣的让它工作的方式。

首先，我们为我们的枚举声明[X-Macro ：](http://www.drdobbs.com/cpp/the-x-macro/228700289)

```
#define ELEMENTS(processor) \
processor(firstElement)     \
processor(secondElement)    \
processor(thirdElement) 
```

我们可以使用它来声明枚举本身：

```
#define ENUM_PROCESSOR(arg) arg,

enum class
{
    ELEMENTS(ENUM_PROCESSOR)
};

#undef ENUM_PROCESSOR
Now we can add method that uses macros to generate nested switches:

void processElements(const Elements element1,
                     const Elements element2)
{
    // These macros are useful to trick the preprocessor to allow recursive macro calls
    // https://github.com/pfultz2/Cloak/wiki/C-Preprocessor-tricks,-tips,-and-idioms
    #define EMPTY(...)
    #define DEFER(...) __VA_ARGS__ EMPTY()
    #define EXPAND(...) __VA_ARGS__
    #define ELEMENTS_INT() ELEMENTS

    #define PROCESS_NESTED_ENUM_VALUE(value)                                         \
    case Elements::value:                                                            \
    {                                                                                \
        process<Value1, Elements::value>();                                          \
        break;                                                                       \
    }

    #define PROCESS_ENUM_VALUE(value)                                                \
    case Elements::value:                                                            \
    {                                                                                \
        constexpr Elements Value1 = Elements::value;                                 \
        switch (element2)                                                            \
        {                                                                            \
            DEFER(ELEMENTS_INT)()(PROCESS_NESTED_ENUM_VALUE)                         \
        };                                                                           \
                                                                                     \
        break;                                                                       \
    }

    switch (element1)
    {
        EXPAND(ELEMENTS(PROCESS_ENUM_VALUE));
    };

    #undef EMPTY
    #undef DEFER
    #undef EXPAND

    #undef ELEMENT_TYPES_INT
    #undef PROCESS_ENUM_VALUE
    #undef PROCESS_NESTED_ENUM_VALUE
} 
```

这里做了很多努力来“欺骗”预处理器以递归方式扩展 ELEMENTS。主要思想[在这里](https://stackoverflow.com/questions/12447557/can-we-have-recursive-macros)得到了很好的描述。

现在我们将处理程序声明为模板函数特化：

```
template <Elements Element1, Elements Element2>
void process();

template<>
void process<Elements::firstElement, Elements::firstElement>()
{
    //some code 1;
}

... 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-12T08:09:19.990

为什么不使用 if 分支？

```
if (input1 == A && input2 == B) {
} else if (input1==A && input2 = C) {
} ... 
```

这是一种写你的意思。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-11-22T17:13:48.293

不是有一个数组或一个映射，参数列表可能会做（扔掉返回值，如果你不想要它）？

```
constexpr auto dispatch(auto const i, auto&& ...f)
  noexcept(noexcept((f(), ...)))
  requires(std::is_enum_v<std::remove_const_t<decltype(i)>>)
{
  using int_t = std::underlying_type_t<std::remove_cvref_t<decltype(i)>>;

  using tuple_t = std::tuple<decltype(f)...>;
  using R = decltype(std::declval<std::tuple_element_t<0, tuple_t>>()());

  return [&]<auto ...I>(std::integer_sequence<int_t, I...>)
    noexcept(noexcept((f(), ...)))
  {
    if constexpr(std::is_void_v<R>)
    {
      ((I == int_t(i) ? (f(), 0) : 0), ...);
    }
    else
    {
      R r{};

      ((I == int_t(i) ? (r = f(), 0) : 0), ...);

      return r;
    }
  }(std::make_integer_sequence<int_t, sizeof...(f)>());
} 
```

# primefaces - 需要 primefaces layoutunit 充当叠加层

> ID：14827917
> 
> 赞同：0
> 
> 时间：2013-02-12T07:57:06.783
> 
> 标签：primefaces, primefaces-extensions

![点击这里](../Images/c2627adcdfc9735fe902eefb099b245e.png)

大家好，

请检查附件图像。我需要使右侧布局单元充当中心布局的叠加层。默认情况下，当我们展开右侧布局单元时，中心布局会缩小。我想将中心布局单元保持为静态，这样当我们展开右侧布局单元时，它应该表现为覆盖中心内容。

任何建议都会很有帮助。

![图片链接](../Images/1680c4f0dfece527a8b59c0ea37eaea0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:45:05.743

尝试`<p:layoutUnit collapsible="true" .../>`

# drupal - 以编程方式将图像添加到 drupal 节点

> ID：14827922
> 
> 赞同：-2
> 
> 时间：2013-02-12T07:57:28.027
> 
> 标签：drupal, drupal-6

我有一个要添加的图像的 url 和一个节点对象。

如何以编程方式将图像添加到点滴 6 中的节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:09:29.757

```
function image_style_add_form($form, &$form_state) {                                       
  $form['name'] = array(                                           
    '#type' => 'textfield',                    
    '#size' => '64',                               
    '#title' => t('Style name'),                                
    '#default_value' => '',                                                
    '#description' => t('The name is used in URLs for generated images. Use only lowercase alphanumeric characters, underscores (_), and hyphens (-).'),                      
    '#element_validate' => array('image_style_name_validate'),                       
    '#required' => TRUE,                                                         
  );                                                                  

  $form['submit'] = array(                         
    '#type' => 'submit',                         
    '#value' => t('Create new style'),                      
  );                                        

  return $form;                               
}

/**                       
 * Submit handler for adding a new image style.                     
 */                                
function image_style_add_form_submit($form, &$form_state) {              
  $style = array('name' => $form_state['values']['name']);              
  $style = image_style_save($style);           
  drupal_set_message(t('Style %name was created.', array('%name' => $style['name'])));  
  $form_state['redirect'] = 'admin/config/media/image-styles/edit/' . $style['name'];
} 
```

# git - 如何解决 GitHub 消息，该消息说我当前分支的尖端位于其远程分支后面？

> ID：14827930
> 
> 赞同：11
> 
> 时间：2013-02-12T07:58:15.687
> 
> 标签：git, version-control, github, bitbucket

我正在尝试学习如何使用 GitHub 对我的工作进行版本控制。（我一个人工作，没有合作者，没有不同的分支机构，只是我在工作时备份我的工作。）我在 BitBucket.org 上建立了私有 Git 存储库。我使用 GitHub for OSX 作为我的 Git GUI。

但是，当我在硬盘驱动器上对本地 Git 存储库中的文件进行编辑时，然后使用 GitHub for OSX 尝试“提交和同步”，我收到此错误：

```
git: 'credential-osxkeychain' is not a git command. See 'git --help'.
git: 'credential-osxkeychain' is not a git command. See 'git --help'.
2013-02-12 02:49:07.409 GitHub for Mac Login[44516:707] AskPass with arguments: (
    "/Applications/GitHub.app/Contents/MacOS/GitHub for Mac Login",
    "Password for 'https://username@bitbucket.org': "
)
git: 'credential-osxkeychain' is not a git command. See 'git --help'.
git: 'credential-osxkeychain' is not a git command. See 'git --help'.
To https://username@bitbucket.org/username/data.git
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'https://username@bitbucket.org/username/data.git'
hint: Updates were rejected because the tip of your current branch is behind its remote counterpart. Merge the remote changes (e.g. 'git pull') before pushing again. See the 'Note about fast-forwards' in 'git push --help' for details.
 (256) 
```

（我编辑了上面的内容以隐藏我的实际用户名。）

这是什么意思，我该如何解决它，以及如何避免将来得到它？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-12T08:04:25.253

有人（或您）更新了远程分支。这会导致您的远程分支领先于您当前的分支。（那是您当地的分支机构）

我建议你在`git pull --rebase origin master`那`push`之后。

# iphone - 从 JSON 数组中提取 MKAnnotation 字幕

> ID：14827932
> 
> 赞同：0
> 
> 时间：2013-02-12T07:58:28.317
> 
> 标签：iphone, ios, objective-c, mkmapview, mapkit

我正在尝试通过从 JSON 数组中拉取字幕来为我的 MKAnnotation 添加字幕。我能够获得标题，并与我的视图控制器进行协调，如下所示，但我无法弄清楚如何才能从 JSON 键“cityName”中提取字幕。任何帮助都会很棒！谢谢！

**MapViewController.m**

```
location.latitude = [dictionary[@"placeLatitude"] doubleValue];
location.longitude = [dictionary[@"placeLongitude"] doubleValue];  

newAnnotation = [[MapViewAnnotation alloc] initWithTitle:dictionary[@"placeName"]
                                               andCoordinate:location]; 
```

**MapViewAnnotation.h**

```
@interface MapViewAnnotation : NSObject <MKAnnotation> {
NSString *title;
CLLocationCoordinate2D coordinate; 
}

@property (nonatomic, copy) NSString *title;
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;
@property (nonatomic, copy) NSString *subtitle;
- (id)initWithTitle:(NSString *)ttl andCoordinate:(CLLocationCoordinate2D)c2d;
@end 
```

**MapViewAnnotation.m**

```
#import "MapViewAnnotation.h"
@implementation MapViewAnnotation
@synthesize title, coordinate, subtitle;

- (id)initWithTitle:(NSString *)ttl andCoordinate:(CLLocationCoordinate2D)c2d {
title = ttl;
coordinate = c2d;
subtitle = [SUBTITLE PULLED FROM JSON]
return self;
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:14:06.670

这里有什么问题？只需完全按照您对`title`房产所做的操作即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T20:16:13.300

由于可能存在您没有初始化注释的每个属性的情况，因此我建议您不要将它们全部放入 init 方法中。

只需这样做，您就不需要更改 MapViewAnnotation.m 或 h

```
location.latitude = [dictionary[@"placeLatitude"] doubleValue];
location.longitude = [dictionary[@"placeLongitude"] doubleValue];  

newAnnotation = [[MapViewAnnotation alloc] initWithTitle:dictionary[@"placeName"]
                                           andCoordinate:location];
newAnnotation.subtitle = dictionary[@"cityName"]; 
```

# c++ - 难以将 yaml 节点作为数组访问

> ID：14827942
> 
> 赞同：1
> 
> 时间：2013-02-12T07:59:02.960
> 
> 标签：c++, yaml-cpp

我试图使用 yaml 访问具有 X 和 Y 坐标的框架。`&frame_node`当我有而不是，事情工作正常`*frame_node`，但是为了使用`FindValue`我必须使用的功能`*frame_node`。但是`frame_node[0]`，，，`frame_node[1]`等等，现在给我一个错误。你能帮我解决这个问题吗？

```
if (const YAML::Node *frame_node = config_node.FindValue("frame")) {
   //const YAML::Node &frame_node = config_node["frame"];
   std::cout << "Hello" << std::endl;
   hasCard = 1 ; 
   // X-coordinates.
   frame_node[0] >> x[0];
   frame_node[1] >> x[1];
   frame_node[2] >> x[2];
   frame_node[3] >> x[3];
   // Y-coordinates.
   frame_node[4] >> y[0];
   frame_node[5] >> y[1];
   frame_node[6] >> y[2];
   frame_node[7] >> y[3];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:07:02.683

`frame_node` is a pointer, so `frame_node[1]` will give you pointer arithmetic. You want `(*frame_node)[1]`.

# c - 使用 C 进行插入排序的指针表示法

> ID：14827944
> 
> 赞同：1
> 
> 时间：2013-02-12T07:59:08.233
> 
> 标签：c

目标：我正在使用指针，但遇到了很多问题。上周的任务是编写一个插入排序函数来对一个参差不齐的数组进行降序排序。本周我的教授希望我更改所有索引并仅使用指针。

```
void insert(int **table, int row)
{

    //  Local Declaration
    int **ptr = table;
    int **walkPlus, *walk, temp;

    //  Statement
    for(ptr = (table + 1); *ptr != NULL; ptr++)
    {
        temp = **ptr;
        walk = *(ptr - 1);
        while(*walk >= diff && temp > *walk)
        {
            walkPlus = ptr;
            **walkPlus = *walk;
            *walk--;
        }
        **walkPlus = temp;
        printf("\n");
    }
    return;

} 
```

我觉得 *walk--; 是我的问题的原因。当我使用 printf 语句检查它的值时，但我得到了一个奇怪的地址。我知道指针非常重要，我想确保我理解这个概念，所以任何帮助都将不胜感激。谢谢你。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <ctype.h>
#ifdef _MSC_VER
#include <crtdbg.h>  // needed to check for memory leaks (Windows only!)
#endif

#define MEM_ERROR printf("Not enough memory\n")

int** getRow(int *row);
void valiRow(int *row);
void getSize(int **table, int row);
void  valiSize(int *size);
void fillTable(int **table, int row);
void bubble(int **table, int row);
void insert(int **table, int row);
void freeAlo(int **table);

int main (void)
{
//  Local Declaration
int **table;
int row, i;
char answer;
int **pTable;
FILE* fpOutPut;

//  Statement

fpOutPut = fopen("Output.txt", "w");
if(fpOutPut == NULL)
{
    printf("Error, writing failed.\n");
    exit(103);
}

do
{
    table = getRow(&row);
    getSize(table, row);
    fillTable(table, row);
    bubble(table, row);
    insert(table, row);
    freeAlo(table);

    printf("\nDo you want to create a new ragged table? ");
    printf("[y] to continue: ");
    scanf(" %c", &answer);
    printf("\n");

}
while(toupper(answer) == 'Y');
fclose(fpOutPut);

#ifdef _MSC_VER
printf( _CrtDumpMemoryLeaks() ? "Memory Leak\n" : "No Memory Leak\n");
#endif
return 0;

}// main

/* getRow */
int** getRow(int *row)
{
//  Local Declaration
int **table;

//  Statement
printf("Please enter the number of rows (1-10): ");
scanf("%d", &*row);

valiRow(&*row);

table =(int**)calloc(*row + 1, sizeof(int));
if(table == NULL)
    MEM_ERROR, exit(100);

return table;
}

/* valiRow */
void valiRow(int *row)
{
//  Statement
while(*row > 10 || *row < 1)
{
    while(getchar() != '\n')
    ;
    printf("Please enter a number between (1-10): ");
    scanf("%d", &*row);
}

return;
}
/* getSize */
void getSize(int **table, int row)
{
//  Local Declaration
int size;
int **ptr = table;
int **pLast = table + row;

//  Statement
ptr = table;
for( ; ptr < pLast; ptr++)
{
    printf("Please enter a size (1-15): ");
    scanf("%d", &size);

    valiSize(&size);

    *ptr = (int*)calloc(size + 1, sizeof(int));
    **ptr = size;
}

if(table == NULL)
    MEM_ERROR, exit(101);

return;
}

/* valiSize */
void valiSize(int *size)
{
//  Statement
while(*size > 15 || *size < 1)
{
    while(getchar() != '\n')
    ;
    printf("Please enter a valid size (1-15): ");
    scanf("%d", &*size);
}

return;
}

/* fillTable */
void fillTable(int **table, int row)
{
//  Local Declaration
int random;
int **ptr = table;
int *pCurr, *pWalk;

//  Statement
srand(time(NULL));
for(pCurr = *ptr ; *ptr != NULL; ptr++)
{
    for(pWalk = (pCurr + 1); *pWalk < *pCurr; pWalk++)
    {
        random = -99 + rand() % 199;
        *pWalk = random;
    }
    pCurr = *(ptr + 1);
}

return;
}

/* bubble */
void bubble(int **table, int row)
{
//  Local Declaration
int **ptr;
int *pWalk;
int temp, target;

//  Statment
for(ptr = table; *ptr != NULL; ptr++)
{
    for(target = **ptr; target > 0; target--)
    {
        for(pWalk = *ptr + target; pWalk != *ptr + 1; pWalk--)
        {
            if(*pWalk > *(pWalk - 1))
            {
                temp = *pWalk;
                *pWalk = *(pWalk - 1);
                *(pWalk - 1) = temp;
            }
        }
    }
}

return;
}

/* insert */
void insert(int **table, int row)
{
//  Local Declaration
int **ptr = table;
int temp, *walk, **walkPlus;

//  Statement
for(ptr = (table + 1); *ptr != NULL; ptr++)
{
    temp = **ptr;
    walk = *(ptr - 1);
    while(*walk >= 0 && temp > *walk)
    {
        walkPlus = ptr;
        **walkPlus = *walk;
        *walk--;
    }
    **walkPlus = temp;
}
return;
}

/* freeAlo */
void freeAlo(int **table)
{
//  Local Declaration
int ** ptr;

//  Statement
for(ptr = table; *ptr != NULL; ptr++)
{
    free(*ptr);
}
free(ptr);

return;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:02:53.323

感谢您发布其余代码

我看过了，首先我建议您激活编译器可以显示的所有警告`-Wall`等。

现在，实际的想法：

在中间嵌套的 for 循环中检查`target = **ptr; target > 0`. 这意味着您的代码只有在您的数组中没有 0 时才能工作！您可以将条目数作为参数传递（除了指向数组的指针之外），而不是尝试 0 终止。

关于三重嵌套的for循环等：代码建议您只想对行进行独立排序（即*不是*按照另一行给出的顺序排列一行），因此您应该做的第一件事是创建一个对单个数组进行排序的函数，如果你有，那么你可以在单个数组上调用它。

**编辑**：对于您的评论，好的，请确保您删除 main() 对bubble() 的调用，否则您无法真正分辨出哪个排序函数（bubble vs insert）做了什么。

现在启用警告（-Wall 等，取决于编译器），您会看到：

```
a.c: In function 'fillTable':
a.c:138:33: error: unused parameter 'row' [-Werror=unused-parameter]
a.c: In function 'insert':
a.c:175:4: error: value computed is not used [-Werror=unused-value]
a.c:160:30: error: unused parameter 'row' [-Werror=unused-parameter] 
```

例如，第 175 行中的内容讲述了 Kranthi Kumar 在他的回答中提到的内容。明确一点：`*walk--`什么都不做，试试`--*walk`. 未使用的参数警告表明可能忘记了某些东西。此外，当您修复这些时，可能会出现其他需要修复的错误。

**编辑 2**：我提到的其他排序函数对于 insert() 也是正确的：您正在使用`while(*walk >= 0...`，这意味着您的函数仅适用于以下数组：

*   不包含负值
*   **在索引(-1)**处有一个负值， 这被打破了！

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:33:04.637

后修复运算符 -- 比一元运算符 * 具有更高的优先级。你需要照顾好它。你忽略了吗？请查看以下链接中的优先级表

[记住 C 中运算符的评估顺序和优先级的快捷方式](https://stackoverflow.com/questions/4204973/shortcut-to-remember-the-order-of-evaluation-and-precedence-of-operators-in-c)

# three.js - 在 Three.js 中相对于对象旋转向前移动

> ID：14827946
> 
> 赞同：4
> 
> 时间：2013-02-12T07:59:18.367
> 
> 标签：three.js

我刚刚开始查看 Three.js 并且对对象移动有疑问。在 XNA/ShparDX 中，您可以执行类似以下代码的操作，其中对象可以相对于其方向向前移动。因此，如果对象向下看，这会将其向下移动。如果它向右看，它会向右移动。可以在[这里](http://stevehazen.wordpress.com/2010/02/15/matrix-basics-how-to-step-away-from-storing-an-orientation-as-3-angles/)看到一个视频示例，并且是页面上的最后一个视频。

```
float speed = 0.15f;
Vector3 velocity = objectMatrix.Forward * speed;
objectMatrix *= Matrix.CreateTranslation(velocity); 
```

根据[这个答案](https://stackoverflow.com/a/11127627/1138263)，我尝试了以下方法。当我按下按键触发它时，它什么也没做。

```
var STEP = 10;
object.matrixWorld.identity();
object.matrixWorld.multiplySelf(three.Matrix4.translationMatrix(object.position.x, object.position.y, object.position.z + STEP));
object.updateMatrixWorld(); 
```

我在使用 Three.js 中可用的成员和函数复制它时没有成功。如果可能的话，有人可以告诉我吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T09:39:14.567

```
mesh.translateX( delta );
mesh.translateY( delta );
mesh.translateZ( delta ); 
```

要前进，请使用`translateZ( delta )`.

如果你只是学习，最好不要乱来`object.matrix`，除非你真的知道自己在做什么。设置`position`, `rotation`, 和`scale`代替。

# android - 后退键很慢

> ID：14827949
> 
> 赞同：2
> 
> 时间：2013-02-12T07:59:24.080
> 
> 标签：android, android-tabhost, android-support-library, android-maps-v2

我有一个带有 TabActivity 的 android 应用程序，其中包含 4 个选项卡 - 一个列表视图、一个地图视图、另一个列表和一个 web 视图。从列表视图中，我可以点击一个项目并启动另一个活动，按下返回返回选项卡活动。

但是，一旦访问了地图视图选项卡，从列表视图导航到第二个活动，然后按后退按钮会导致大约 3-4 秒的挂起。一旦访问了地图视图，这个问题就永远不会消失，直到应用程序退出。

还有一些注意事项：

*   地图视图还可以启动另一个活动 - 在这种情况下，后退按钮可以正常工作 - 只有在启动第二个活动时地图视图选项卡处于非活动状态时才会出现问题。
*   在两台设备上进行测试 - Galaxy S 上出现问题，Nexys 7 上没有出现问题。
*   我可以看到 logcat 中没有任何明显的东西。
*   应用程序使用 Maps API V2，并支持库以支持片段。
*   应用程序是用 Mono 编写的。

更多信息。我在地图活动中为它的生命周期事件添加了一些日志消息：

从地图选项卡切换：

```
02-12 18:53:43.841 I/MAPTEST ( 5031): OnSaveInstanceState
02-12 18:53:43.857 I/MAPTEST ( 5031): OnPause 
```

从列表视图选项卡启动第二个活动：

```
02-12 18:54:06.900 I/MAPTEST ( 5031): OnSaveInstanceState
virtual void WebCore::Widget::show()
virtual void WebCore::Widget::show()
void WebCore::ScriptController::updatePlatformScriptObjects()
virtual void WebCore::Widget::show()
static bool WebCore::ResourceHandle::supportsBufferedData()
static bool WebCore::ResourceHandle::supportsBufferedData()
02-12 18:54:07.353 I/MAPTEST ( 5031): OnStop 
```

从第二个活动按下后退按钮（即：暂停发生时）：

```
-- Absolutely nothing in log cat -- 
```

切换回地图选项卡：

```
02-12 18:54:59.056 I/MAPTEST ( 5031): OnRestart
02-12 18:54:59.060 I/MAPTEST ( 5031): OnStart
02-12 18:54:59.064 I/MAPTEST ( 5031): OnResume 
```

什么可能导致返回活动阻塞 3-4 秒？

或者，我还能做些什么来诊断这个？

* * *

更多信息：

根据 michal-z 的评论，在 DDMS 下对其进行了分析，并且大部分时间都花在了消息发送、布局和绘图上……所以我怀疑某种递归布局或绘图问题……

另外，我尝试在地图活动停止时删除地图片段，并在地图活动开始时将其添加回来，这解决了延迟问题，但地图不记得它的状态，丢失所有标记并且重新出现很慢。

* * *

另一个跟进：

我能找到的*唯一*解决方案是在活动停止时删除片段并在恢复时将其添加回来 - 并保存相机位置。我还尝试通过片段管理器和直接在地图视图上隐藏和重新显示片段 - 不走运。

# c# - NetworkError：WCF 中不允许使用 405 方法

> ID：14827951
> 
> 赞同：2
> 
> 时间：2013-02-12T07:59:31.487
> 
> 标签：c#, wcf, rest, jquery

我正在尝试使用 Jquery ajax 调用来调用 WCF REST 服务方法并收到类似的错误

```
"NetworkError: 405 Method Not Allowed - http://localhost:55911/Service1.svc/Testing" 
```

这是我的代码

```
 $(document).ready(function () {
            $("#Button2").click(function () {
                 var Input = {
                     UserId: "11111"
                             };
                $.ajax({
                    type: "POST",
                    url: " http://localhost:55911/Service1.svc/Testing",
                    data: JSON.stringify(Input),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (response) {
                        alert("Success");
                    },
                    error: function (xhr, status, error) {
                        alert("failure");
                        alert(stattus.toString);
                    }
                });

            });
        }); 
```

和

```
[OperationContract]
[WebInvoke(Method = "POST", UriTemplate = "/Testing", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
string Testing(int UserId); 
```

和

```
 public string Testing(int UserId)
        {
            sqlConn = new SqlConnection(connectionString);
            sqlConn.Open();
            sqlCmd = new SqlCommand("TestInsertion", sqlConn);
            sqlCmd.CommandType = CommandType.StoredProcedure;
            sqlCmd.Parameters.Add("@id",UserId);
            sqlCmd.ExecuteNonQuery();
            sqlConn.Close();
            return "true";
        } 
```

我在这里做错了什么？有什么建议吗？

编辑：评论后 `//contentType: "application/json"`发布和投掷

```
"NetworkError: 400 Bad Request - http://localhost:55911/Service1.svc/Testing" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T06:19:19.587

您定义的`UriTemplate`错误，请尝试像这样使用它：

```
[OperationContract]
[WebInvoke(Method = "POST", UriTemplate = "/Testing?U={UserId}", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
string Testing(string UserId); 
```

然后在实现中根据`UserId`需要将其转换为 int 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:22:24.497

*   请检查 HTTP 请求方法是否`POST`在客户端 ( `html`) 和服务器 ( `WCF service`) 上
*   因为 NetworkError 405 状态表明调用代码 ( `html`) 使用了错误的 HTTP 方法，`WCF service`所以工作正常。

请参考：[WCF 中的 405 Method Not Allowed Error](https://stackoverflow.com/questions/2436182/405-method-not-allowed-error-in-wcf)

## 更新

**我相信**保留其余的东西（也是内容类型`contentType: "application/json"`），因为它只是将参数类型更改为`string`from `int`in`WCF service`

```
 public string Testing(string UserId)
    {
        sqlConn = new SqlConnection(connectionString);
        sqlConn.Open();
        sqlCmd = new SqlCommand("TestInsertion", sqlConn);
        sqlCmd.CommandType = CommandType.StoredProcedure;
        sqlCmd.Parameters.Add("@id",UserId);
        sqlCmd.ExecuteNonQuery();
        sqlConn.Close();
        return "true";
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:29:07.073

您是否同时运行 WCF 服务项目和消费项目（AJAX 调用）（在 Visual Studio 的同一实例中）？如果是这样，请尝试两个不同的 VS 实例并先运行 WCF 项目，然后再运行消费项目。另外，尝试使用`dataType`as`jsonp`而不是`json`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-04T16:30:21.623

我认为您需要使用 JSONP 进行跨域调用以绕过浏览器限制

这个答案很有帮助：[WCF 错误：405 Method Not Allowed](https://stackoverflow.com/questions/13228995/wcf-error-405-method-not-allowed)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T12:26:53.973

检查 HTTP 请求方法是 POST 还是 OPTIONS。此[链接](http://blog.weareon.net/calling-wcf-rest-service-from-jquery-causes-405-method-not-allowed/)将很有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T11:09:03.207

通常，当您的方法引发异常时会发生此错误，因此我建议调试

它可以通过在开头编写这行代码将其附加到处理

功能

```
Debugger.launch(); 
```

# security - 通过 javascript 将 authResponse 发送到服务器是否安全？

> ID：14827957
> 
> 赞同：0
> 
> 时间：2013-02-12T07:59:49.120
> 
> 标签：security, authentication, facebook-javascript-sdk, facebook-login, facebook-oauth

我已经在stackoverflow上看到了一些问题：

*   [如何通过 javascript 验证 facebook 用户的安全性？](http://facebook.stackoverflow.com/questions/14187355/how-authenticate-a-facebook-user-secure-via-javascript)
*   [具有服务器端访问用户数据的 Facebook 登录插件](http://facebook.stackoverflow.com/questions/12215709/facebook-login-plugin-with-server-side-access-to-users-data)
*   [如何通过 Facebook 的 Javascript SDK 安全地授权用户](http://facebook.stackoverflow.com/questions/14186146/how-to-securely-authorize-a-user-via-facebooks-javascript-sdk)

尤其是最后一个似乎很有帮助。

因此，如果我调用`FB.getLoginStatus()`它并返回了signed_request 和issued_at 时间，我只需将这两个参数传递给服务器，解析它并通过调用服务器端的Facebook API 来检查它，以检查传递的参数是否正确？

我计划编写的应用程序将无法使用 cookie 将这些内容发送到服务器。相反，我需要通过 websockets(secure) 将它发送到服务器。因此，传输基本上是通过 TLS 保护的，但我不知道仅检查 signed_request 和 issue_at 时间是否足够。

# iphone - 应用更新后我放入钥匙串的值可以保存吗？

> ID：14827963
> 
> 赞同：7
> 
> 时间：2013-02-12T08:00:23.397
> 
> 标签：iphone, ios, objective-c, keychain

我在应用商店有一个应用程序。在我的应用程序中，我使用钥匙串将一些值（例如：姓名和姓氏）保存为加密。如果我使用 xCode 更新我的应用程序，则值没有问题。它们都按我的意愿保存在钥匙串中。但是，如果我将新版本放入应用商店并使用应用商店中的版本更新我的应用，我的值都消失了 :( 如果应用更新，iOS 是否会删除钥匙串中的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T11:10:12.470

**注意**：在 iPhone 上，钥匙串权限取决于`provisioning profile`用于签署您的应用程序。确保始终如一地使用`same provisioning profile`跨不同版本的应用程序。

查看更多信息[钥匙串服务编程指南](https://developer.apple.com/library/mac/#documentation/security/conceptual/keychainServConcepts/02concepts/concepts.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T08:34:56.300

在更新期间不得以任何方式删除或更改应用程序的钥匙串。如果您遇到这种情况，那么您一定是做错了什么（请参阅上面的 Joachim 的问题）。

（实际上，在 iOS 4.x 中删除该应用程序并没有删除它的钥匙串，这通常不会发生。不过，我还没有检查过后来的 iOS 版本是否对此进行了改进。）

此外，钥匙串不是应用程序文件系统的一部分，因此更新不会影响其内容。钥匙串属于一个中央的、安全的数据库（实际上它是一个特殊的 sqlite3 数据库）。有关更多详细信息，请查看 Apple iOS 安全文档中的“钥匙串数据保护”一章：http: [//www.apple.com/ipad/business/docs/iOS_Security_Oct12.pdf](http://www.apple.com/ipad/business/docs/iOS_Security_Oct12.pdf)。

结论：应用程序更新后，您的应用程序的钥匙串应保持不变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T09:14:46.503

简单的答案是否定的。当您的应用程序更新时，您存储在 KeyChain 中的数据不会被删除。您可以使用 KeyChain 的键值对从 KeyChain 获取数据。

希望，这个简单的答案可以帮助你。

# css - 如何让浮动的 div 填满剩余的宽度？

> ID：14827964
> 
> 赞同：2
> 
> 时间：2013-02-12T08:00:26.197
> 
> 标签：css, html, css-float

我有一个 div`float: left`和一个 div `float: right`。`float: left`具有宽度的div `50px`，而具有 的 div`float: right`应该占用父 div 中剩余的水平空间。

我怎样才能用 CSS 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T08:03:48.353

尝试使用`margin-left:60px`（或您的左 div 可能的任何宽度）而不`float`在右 div 中使用。在此处查看相关小提琴：http: [//jsfiddle.net/CKcQH/](http://jsfiddle.net/CKcQH/)

CSS：

```
.leftDiv
{
    width:50px;
    float:left;
    border:1px solid red;
}
.rightDiv
{
    margin-left:55px; /* Compute total width of leftDiv */
    border:1px solid blue;
} 
```

html:

```
<div>
    <div class="leftDiv">
        My content on left
    </div>
    <div class="rightDiv">
        My content on right should take all the space the parent has (after excluding the space on the left)
    </div>
</div> 
```

# java - Android 多可绘制（资产）

> ID：14827966
> 
> 赞同：1
> 
> 时间：2013-02-12T08:00:36.780
> 
> 标签：java, android, drawable, assets, android-assets

我正在寻找一个好主意或解决多可绘制（资产）问题的正确方法。

从基本代码，我想拥有/生成一个多应用程序，其中资产相同但颜色不同。

这些资产具有相同的大小和相同的名称。正因为如此，我不能不把它们放在一起。让我们采用两种设计，我称第一种为狗设计，第二种为猫设计。我不想将狗设计和猫设计的资产存储在同一个应用程序中，但在我的项目中（但是）仅通过生成 APK 它将决定将使用狗或猫设计中的哪一个。

我希望有些人已经面临这个问题。每一个建议、想法或方法都将受到欢迎

# regex - 带有路径的正则表达式站点地址

> ID：14827967
> 
> 赞同：0
> 
> 时间：2013-02-12T08:00:42.750
> 
> 标签：regex

请帮助对有或没有路径的站点进行正则表达式，例如：

```
http://www.sitename.domain/dir/dir2/file.jpg
www.sitename.domain/dir/file.jpg
sub.sitename.domain/dir/dir2/file.jpg
site.do/file.pjg
https://go.do/dir/file.png
ftp://site.dom/file.blah_blah 
```

确切的域并不重要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:09:05.247

如果你想使用正则表达式匹配一个 URL，你可以使用这个：

```
^(((https?)|(ftp)):\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$ 
```

[您可以在http://net.tutsplus.com/tutorials/other/8-regular-expressions-you-should-know/](http://net.tutsplus.com/tutorials/other/8-regular-expressions-you-should-know/)上找到一些描述

# asp.net - 使用 Razor 代替的下拉列表使用 HTML 我有一个类似的选择列表 <select id="select-product"><option>Select a Product</option></select> 我在运行时使用 Ajax 填写此列表，现在我想转换它到剃刀视图，我将在重定向到页面之前将数据包含在 Viewbag 中。我怎样才能做到这一点 ？makefile 在循环中解释变量我试图在 for 循环中将一个变量解释为另一个变量

> ID：14827973
> 
> 赞同：0
> 
> 时间：2013-02-12T08:01:07.617
> 
> 标签：asp.net, asp.net-mvc, razor

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:05:39.593

> 在重定向到页面之前，我会将数据包含在 Viewbag 中。

一个常见的（也是好的）方法是使用`@Html.DropDownList()`or `@Html.DropDownListFor<>()`in your view。但是，您应该更喜欢强类型模型而不是`ViewBag`.

也可以看看：

*   [如何编写一个简单的 Html.DropDownListFor()？](https://stackoverflow.com/questions/3057873/how-to-write-a-simple-html-dropdownlistfor)
*   [何时在 Mvc3 中使用 ViewBag、ViewData 或 TempData](https://stackoverflow.com/questions/8046637/when-to-use-viewbag-viewdata-or-tempdata-in-mvc3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T08:08:33.050

```
$(document).ready(function () {
    $.get('/Home/GetProducts/' + $(this).val(), function (response) {
        var products = $.evalJSON(response);
        var ddlSelectedProduct = $("#SelectedProduct");

        // clear all previous options 
        $("#SelectedProduct > option").remove();

        // populate the products 
        for (i = 0; i < products.length; i++) {
            ddlSelectedProduct.append($("<option />").val(products[i].Value).text(products[i].Text));
        }
    });
}); 
```

或者

```
@Html.DropDownListFor(
    x => x.SelectedProductId, 
    new SelectList(ViewBag.Products as SelectList, "Value", "Text"),
    "-- Select Product--"
) 
```

# unix - makefile 在循环中解释变量

> ID：14827974
> 
> 赞同：0
> 
> 时间：2013-02-12T08:01:07.953
> 
> 标签：unix, makefile, gnu-make

我试图让一个变量被解释为 for 循环中的另一个变量，但我不知道应该如何完成。我的测试是：

```
TEST= one two three

one := one1
two := two2
three := three3

all:
    @echo $(TEST)
    @for NUM in $(TEST) ; do \
        echo $($$NUM) ; \
    done ; exit 0

foo:
    echo 
```

最终结果：我有许多 Makefile，其中包含指向一个中央 makefile。我希望这些单独的 makefile 包含要连接在一起的文件变量 - 但不同的目录有不同的文件。因此，./1/ 中的 makefile 可能是：一个：=“file0 file1 file2”两个：=“other0 other1 other2”三个：=“boo.txt blah.txt”包括../main.mk

和 ./2/ 可能是一 := "file0 file5 file6" 二 := "foo bar baz" 三:= "blah.txt" include ../main.mk

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:57:23.257

这不能像你写的那样工作。你正在跨越边界。

当你的 shell 循环运行时，make 变量已经被扩展，所以你的循环体最终包含的是'echo;'。

如果要获得预期的输出，则需要在 make 级别执行循环。

就像是：

```
TEST= one two three

one := one1
two := two2
three := three3

define loop
        $(foreach n,$(TEST),@echo $($n)
)
endef

all:
        @echo $(TEST)
        $(loop) 
```

虽然我觉得应该有一个稍微简单的方法，但我现在还没有看到。

# vb6 - 单个 VB6 ActiveReport 中的多个“Page N of M”

> ID：14827975
> 
> 赞同：0
> 
> 时间：2013-02-12T08:01:08.603
> 
> 标签：vb6, activereports

我有一个生成多页报告的活动报告。我需要它根据详细信息部分中存在的字段“COID”多次显示 M 的第 N 页。例如，如果有 10 页（COID 1001 为 2，COID 1002 为 1，COID 1003 为 7）所以，我想要“第 1 页，共 2 页”，“第 2 页，共 2 页”，“第 1 页，共 1 页” "、"第 1 页，共 7 页"、"第 2 页，共 7 页"...."第 7 页，共 7 页"。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:33:45.707

我只在病房中使用 AR 3.00 版。在这些中，使用子报告可以非常快速轻松地实现。

我对此进行了快速研究，发现早期版本 [支持子报告](http://www.datadynamics.com/forums/302/ShowPost.aspx)

如何使用子报告按照链接中的文章执行此操作并创建父报告和子报告。对于父报表数据，您只需按 COID 运行 SQL 查询组并将每个 COID 传递给子报表。我会设想一个几乎空白的父报表，在该详细信息部分中有一个详细信息部分插入一个子报表控件。将现有报表分配给子报表控件。

只要我们保持父子报表通信简单，子报表就有自己的问题。并且在父报表中只创建一个子报表实例对象。使用相同的实例从父数据集中的每一行传递参数，即 COID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T20:03:24.283

有两种方法可以做到这一点。运行单个报表并重置每个组的页码并多次运行报表并将页面合并到一个报表中。

**重置每个组的页码**

请参阅ActiveReports for ActiveX/COM[文档中的](http://www.datadynamics.com/Help/AR2Std/AR2Std_start.htm)[此主题](http://www.datadynamics.com/Help/AR2Std/HX_Page_N_of_M_in_the_Group_Header.html)。只需在文本框控件上设置正确的属性即可。

**合并报表**

在这种方法中，您可以为每个 COID 组单独运行报告（例如，使用 WHERE 子句获取正确的数据）。这将在每个 COID 报告中以您想要的方式获取页码。然后，您可以将每个页面中的页面合并到一个报告中。所以类似于以下内容：

```
For iRpt = 0 to myReports.Count - 1
    rpt = myReports[iRpt]
    For iPage = 0 to rpt.Pages.Count – 1
        mainReport.Pages.Insert(rpt.Pages(iPage))
    Next iPage
Next iRpt 
```

在此处查找有关[Pages 集合](http://www.datadynamics.com/Help/AR2Std/HX_Pages.html)的更多信息。

# c# - automatic close not used form?

> ID：14827979
> 
> 赞同：0
> 
> 时间：2013-02-12T08:01:20.507
> 
> 标签：c#

how can i catch when the form not used by the user i need to make form that will closed after 5 minutes if the user don't make any action on this form with C# Code Please help me

I make this code for closing system after 5 minutes

```
 Timer.Interval = (1000) * (300); 
        Timer.Enabled = true;
        Timer.Start();  

 private void Timer_Tick(object sender, EventArgs e)
        {
            Close(); 
        } 
```

But i need to make this code active if the form not used .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:20:32.357

write this.

```
 private void Form1_Activated(object sender, EventArgs e)
    {
        Timer.Enabled = false;
    }

    private void Form1_Deactivate(object sender, EventArgs e)
    {
        Timer.Enabled = true;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T08:23:25.280

Use the "Leave" event to manage your exit logic, like say trigger the timer.. The leave event gets fired on loosing focus.

# ruby-on-rails - 从 Rails 表单中提取参数

> ID：14827980
> 
> 赞同：1
> 
> 时间：2013-02-12T08:01:21.507
> 
> 标签：ruby-on-rails, forms, jquery

嗨，我正在尝试从远程 rails 表单中提取一些参数。有问题的参数是 event_id。

在我的控制器中，我做了以下事情：

```
def create
  @availability = Availability.new(params[:availability])
  @exclude = Availability.where(:event_id => params[:event_id]).select(:user_id).pluck(:user_id)
  @players = User.where('team_id = ? and id NOT IN (?)', current_user[:team_id], @exclude).all
  @event = Event.where('id = ?', params[:event_id])

  respond_to do |format|
    if @availability.save
      format.html { redirect_to @availability, :notice => 'Availability was successfully created.' }
      format.js { @availabilities = Availability.all }
    else
      format.html { render :action => "new" }
      format.json { render :json => @availability.errors, :status => :unprocessable_entity }
    end
  end
end 
```

触发此请求的操作是：

```
%li= button_to 'Add', availabilities_path(:availability => {:team_id => @event.team_id, :user_id => user, :event_id => @event.id }), :remote => true, :method => :post, :class => 'button tiny success', :disable_with => 'Add' 
```

问题是为什么模型没有检测到 event_id？

```
 Started POST "/availabilities?availability%5Bevent_id%5D=75&availability%5Bteam_id%5D=1&availability%5Buser_id%5D=54" for 124.168.81.54 at 2013-02-12 08:48:42 +0100
Processing by AvailabilitiesController#create as JS
  Parameters: {"authenticity_token"=>"sebpDgAPPmK8q9024vrhN4eEQT7vZLr+pa5XdSicAMc=", "availability"=>{"event_id"=>"75", "team_id"=>"1", "user_id"=>"54"}}
  User Load (1.5ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 38 LIMIT 1
   (0.8ms)  SELECT user_id, user_id FROM "availabilities" WHERE "availabilities"."event_id" IS NULL
  User Load (1.3ms)  SELECT "users".* FROM "users" WHERE (team_id = 1 and id NOT IN (NULL))
   (0.4ms)  BEGIN
  Availability Exists (0.9ms)  SELECT 1 AS one FROM "availabilities" WHERE ("availabilities"."user_id" = 54 AND "availabilities"."event_id" = 75) LIMIT 1
  SQL (1.8ms)  INSERT INTO "availabilities" ("available", "comment", "created_at", "event_id", "team_id", "unique_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["available", nil], ["comment", nil], ["created_at", Tue, 12 Feb 2013 18:48:42 EST +11:00], ["event_id", 75], ["team_id", 1], ["unique_id", nil], ["updated_at", Tue, 12 Feb 2013 18:48:42 EST +11:00], ["user_id", 54]]
   (19.4ms)  COMMIT
  Availability Load (0.9ms)  SELECT "availabilities".* FROM "availabilities" 
  Event Load (0.9ms)  SELECT "events".* FROM "events" WHERE (id = NULL)
  Rendered events/_progress_bar.html.haml (8.6ms)
  Rendered availabilities/create.js.erb (11.1ms)
Completed 500 Internal Server Error in 100ms 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T08:05:55.727

因为`event_id`是在`params[:availability][:event_id]`，不是`params[:event_id]`

# wordpress - Wordpress 自动限制用户只能编辑一页

> ID：14827981
> 
> 赞同：1
> 
> 时间：2013-02-12T08:01:29.587
> 
> 标签：wordpress

当用户注册时，我想创建一个带有用户名标题的页面，然后设置权限，以便用户只能从后端查看和编辑该页面。

我进行了很多搜索以试图弄清楚我唯一能找到的是这段代码，它适用于创建页面，但我如何设置权限？所有这些都将在用户注册时自动发生。如果有更好的方法或解决方案，我很想听听

```
function my_create_page($user_id){
  $the_user = get_userdata($user_id);
  $new_user_name = $the_user->user_login;
  $my_post = array();
  $my_post['post_title'] = $new_user_name;
  $my_post['post_type'] = 'page';
  $my_post['post_content'] = '';
  $my_post['post_status'] = 'publish';
  wp_insert_post( $my_post );
}
add_action('user_register', 'my_create_page'); 
```

谢谢

# python - 线程调用套接字库两次python

> ID：14827983
> 
> 赞同：0
> 
> 时间：2013-02-12T08:01:32.560
> 
> 标签：python

我的服务器代码是这样的：

```
import SocketServer
import json

class MyTCPServer(SocketServer.ThreadingTCPServer):
    allow_reuse_address = True

class MyTCPServerHandler(SocketServer.BaseRequestHandler):
    def handle(self):
        try:
            data = json.loads(self.request.recv(1024).strip())
            # process the data, i.e. print it:
            print data
            # send some 'ok' back
            self.request.sendall(json.dumps({'return': 'ok'}))
        except Exception, e:
            print "Exception wile receiving message: ", e

def socket_server(host,port):
    print host,port
    server = MyTCPServer((host, port), MyTCPServerHandler)
    server.serve_forever() 
```

我试图从这样的脚本中调用它

```
import threading
server_thread = threading.Thread(target=socket_server, args=('127.0.0.1', 13373))
server_thread.start()
#after this i have other code.. 
```

因此，当它启动服务器时……一切都很好，但不知何故……它试图再次启动相同的代码……

因为我看到这个错误：

```
 Exception in thread Thread-1:
Traceback (most recent call last):

127.0.0.1 13373   <---- THIS IS THE PORT WHICH IS CONNECTED
Exception in thread Thread-1:
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py", line 530, in __bootstrap_inner
    self.run()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py", line 483, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/Users/mohitdeepsingh/Desktop/project/flaskapp/app/sock_lib/sock_server.py", line 21, in socket_server
    server = MyTCPServer((host, port), MyTCPServerHandler)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 408, in __init__
    self.server_bind()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 419, in server_bind
    self.socket.bind(self.server_address)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 222, in meth
    return getattr(self._sock,name)(*args)
error: [Errno 48] Address already in use 
```

所以基本上我想做的是在后台调用 socket_server(host,port) 并继续我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:01:26.073

服务器关闭（或关闭）后您是否正在关闭（整理）？在运行服务器之前扫描并关闭您机器上的开放端口，即**您打算用于**服务器的端口。

如果您不关闭端口，则该端口将无法使用，直到关闭或明确关闭端口！

# javascript - jquery 代码工作正常，但其他单选按钮干扰其工作

> ID：14827984
> 
> 赞同：0
> 
> 时间：2013-02-12T08:01:33.100
> 
> 标签：javascript, jquery

这是两个jquery代码

代码 1

```
$(document).ready(function() { 
    $("div.imgDisp").hide();
    $('[id="' + $(":radio:checked").val()+'"]').show();
    $(":radio").click(function() {      
        $("div.imgDisp").fadeOut('slow');
        $('[id="' + $(this).val()+'"]').fadeIn('slow');
    });
}); 
```

此代码在选择单选按钮时隐藏 div 检查此小提琴[http://jsfiddle.net/nanoquantumtech/qudT2/3/](http://jsfiddle.net/nanoquantumtech/qudT2/3/)

在这个小提琴中，您可以在 name = "type" 下看到一组收音机。一切都很好，直到这里..

还有其他一组不同名称的单选按钮..现在的问题是，当我单击不同名称下的任何单选按钮时，尽管它们与此小提琴代码无关，但单击它们会使此小提琴的效果无效这个小提琴的预期效果就消失了。即，如果我单击小提琴中显示的以外的任何其他单选按钮，它们会使显示的结果隐藏，而小提琴中的结果将保留在屏幕上。我很惊讶..

同样的问题是我用来显示/隐藏文本文件的另一个 jquery 代码。

什么是错的家伙？提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T08:07:09.710

这里的问题是您正在为所有收音机调用点击事件，即`$(":radio").click(function() { ..`仅将点击事件指定给那些只有`name="type"`..

```
$('input[name="type"]:radio').click(function() {.... }); 
```

尝试这个

```
$('input[name="type"]:radio').click(function() {
    $("div.imgDisp").fadeOut('slow');
    $('[id="' + $(this).val()+'"]').fadeIn('slow');
}); 
```

这只会为 name="type" 和 radio 的输入调用 click 事件。

[在这里](http://jsfiddle.net/bipen/qudT2/4/)摆弄

# c# - 如何从第三方代码中获取用户的客户端 IP

> ID：14827985
> 
> 赞同：1
> 
> 时间：2013-02-12T08:01:36.533
> 
> 标签：c#, javascript, asp.net

我正在使用此脚本来获取用户的客户端 IP：

```
<script type="text/javascript" src="http://geoiplookup.wikimedia.org/"></script> 
```

我可以使用 JavaScript as 来获取 IP `Geo.IP`，但我需要在按钮单击后的代码中获取它。

就像是：

```
protected void Button1_Click(object sender, EventArgs e)
{
    string IP = string.Empty;

    // IP = ???

    // Validation code

} 
```

有任何想法吗？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:08:12.877

为什么是客户端脚本？[Request.UserHostAddress](http://msdn.microsoft.com/en-us/library/system.web.httprequest.userhostaddress.aspx)听起来像您正在寻找的东西。:)

```
protected void Button1_Click(object sender, EventArgs e)
{
    string IP = Request.UserHostAddress;

    // Validation code

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T08:25:17.810

如果您*真的*不能使用服务器变量，或者如果您需要地理信息以及 IP，您将需要以下内容：

```
<!-- Get geo information -->
<script type="text/javascript"
    src="http://geoiplookup.wikimedia.org/">
</script>
<!-- JavaScript object-to-JSON -->
<!-- Don't actually hotlink this; host it yourself -->
<script type="text/javascript" 
    src="https://github.com/douglascrockford/JSON-js/blob/master/json2.js">
</script>
<!-- Hidden field to hold result -->
<asp:HiddenField id="hdnGeo" runat="server"></asp:HiddenField>
<!-- Script to populate field -->
<script type="text/javascript">
    document.getElementById('<%= hdnGeo.ClientID %>').value =
        JSON.stringify(Geo);
</script> 
```

这会将 Geo 对象的 JSON 等效项放在您的 geoiplookup 参考中

```
{"city":"London","country":"GB","lat":"51.514198","lon":"-0.093100",
 "IP":"193.129.26.250","netmask":"24"} 
```

进入 ASP.NET 隐藏字段。

然后，在服务器上，您可以像这样访问它：

```
protected void Button1_Click(object sender, EventArgs e)
{
    string json = hdnGeo.Value;
    var dictionary = new JavaScriptSerializer()
        .Deserialize<Dictionary<string, string>>(json);
    string city = dictionary["city"];
    string lat = dictionary["lat"];
    string lon = dictionary["lon"];
    string IP = dictionary["IP"];
    string netmask = dictionary["netmask"];
} 
```

# c - C：EOF检测和fgetc

> ID：14827986
> 
> 赞同：1
> 
> 时间：2013-02-12T08:01:39.587
> 
> 标签：c, eof, fgetc

目标：如何成功实现EOF来停止无限循环？

**调用函数的部分：**

```
do {
    pId = readInputField(fptr, DELIMITER_SPACE);
    pName = readInputField(fptr, DELIMITER_SEMICOLON);
    pDob = readInputField(fptr, DELIMITER_SPACE);
    pHobbyList = readInputField(fptr, DELIMITER_NEWLINE);
} while (NULL != pId
         && NULL != pName
         && NULL != pDob
         && NULL != pHobbyList); 
```

**函数定义：**

```
char* readInputField(FILE* fPtr, const char delimiter) {
    int numCharRead;
    char bufferString[MAX_LENGTH_INPUT];
    char *pBufferString;

    numCharRead = 0;

    // flush: if spaces are found
    ' ' == (bufferString[numCharRead] = fgetc(fPtr)) ? 0 : numCharRead++;

    // get chracter array before delimiter
    while (delimiter != bufferString[numCharRead - 1]
            && numCharRead < MAX_LENGTH_INPUT) {
        bufferString[numCharRead++] = fgetc(fPtr);
    }

    // exclude delimiter from the string
    bufferString[numCharRead - 1] = '\0';

    printf("numCharRead=  \"%d\"\n", numCharRead);

    printf("delimiter:    \"%c\"\n", delimiter);
    printf("bufferString: \"%s\"\n", bufferString);

    pBufferString = malloc(sizeof(char*) * strlen(bufferString));

    /* deleted:
    pBufferString = bufferString;
    return EOF == bufferString[numCharRead - 1] ? NULL : pBufferString;
    */
} 
```

**样本输入：**

```
VIC Lee, Victoria; 02/25/90 Knitting;Photography;Dance; 
```

**样本输出：**

```
numCharRead=  "4"
delimiter:    " "
bufferString: "VIC"
numCharRead=  "14"
delimiter:    ";"
bufferString: "Lee, Victoria"
numCharRead=  "9"
delimiter:    " "
bufferString: "02/25/90"
numCharRead=  "28"
delimiter:    "
"
bufferString: "Knitting;Photography;Dance;"

// after this, infinite loop begins with garbage data 
```

我的电话是查看上面的 return 语句。由于某种原因，它不会检测它是否是 EOF。

任何帮助表示赞赏！谢谢！

* * *

**更新：** 感谢@JoachimPileborg！我在下面更新了我的代码：

```
 // check for EOF
    if(bufferString[numCharRead-1] == EOF) {
        return NULL;
    } else {
        pBufferString = malloc(sizeof(char*));
        strcpy(pBufferString, bufferString);
        return pBufferString;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T08:23:34.030

检查`EOF`您从文件中读取的位置，如

```
// flush: if spaces are found
' ' == (bufferString[numCharRead] = fgetc(fPtr)) ? 0 : numCharRead++;
if(bufferString[numCharRead-1] == EOF)
    return NULL;

while (delimiter != bufferString[numCharRead - 1]
            && numCharRead < MAX_LENGTH_INPUT) {
    bufferString[numCharRead++] = fgetc(fPtr);
    /* check for EOF */
    if(bufferString[numCharRead-1] == EOF)
        return NULL;
} 
```

您还遇到@Joachim Pileborg 评论中提到的问题

*   `fgetc``int`不返回`char`
*   您正在返回`bufferString`本地功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T09:13:03.287

无法在评论中编写代码，因此我将其发布为答案。

您在问题中有（或至少有）此代码：

```
pBufferString = malloc(sizeof(char*) * strlen(bufferString));
pBufferString = bufferString;
return EOF == bufferString[numCharRead - 1] ? NULL : pBufferString; 
```

在上面的第一行中，您分配内存并`pBufferString`指向该内存。

然后在第二行中，您`pBufferString`指向本地数组`bufferString`，因此您不再有指向您分配的内存的指针`malloc`，从而导致内存泄漏（并且当您稍后尝试指向`free`该指针时可能会崩溃）。

然后你 return `pBufferString`，它现在指向本地数组，导致未定义的行为，因为本地数组占用的堆栈内存在函数返回后不再有效。

除了上述问题之外，您分配的内存几乎是所需内存的四到八倍。指针的大小为 4 或 8 个字节（取决于您是在 32 位还是 64 位平台上），但 a`char`只有一个字节。`strlen(bufferString) + 1`用作分配的大小就足够了：

```
pBufferString = malloc(strlen(bufferString) + 1); 
```

您需要 ，`+ 1`因为字符串终止符不包含在字符串长度中。

# java - Restlet com.google.appengine.api.datastore.GeoPt 的类型签名无效

> ID：14827990
> 
> 赞同：0
> 
> 时间：2013-02-12T08:02:13.287
> 
> 标签：java, google-app-engine, gwt, restlet, objectify

再会。我在这个应用程序中结合使用了 restlet 2.1.1 和 objectify-appengine。自从升级到 objectify 端（3.1 到 4.0b）以来，我一直在持久化任何包含非空 GeoPt 对象的实体，它以前工作过。使用的版本：* appengine-java-1.7.4 * Restlet-2.1.1 * Objectify-appengine-4.0b

启动托管模式后出现的错误似乎是一个提示：

```
Invoking generator org.restlet.rebind.ClientProxyGenerator
...
private com.google.appengine.api.datastore.GeoPt geoPt
com.google.appengine.api.datastore.GeoPt
Verifying instantiability
Analyzing the fields of type 'com.google.appengine.api.datastore.GeoPt' that qualify for serialization
Field 'private final float latitude' will not be serialized because it is final
Field 'private final float longitude' will not be serialized because it is final 
```

只要它们的 GeoPt 变量为 null，我就可以保留任何实体，只要我在数据对象中保留非 null GeoPt，我就会在 appengine 控制台上报告以下错误：

```
12 Feb 2013 7:51:35 AM org.restlet.service.ConverterService toObject
WARNING: Unable to convert a [application/x-java-serialized-object+gwt,UTF-8] representation into an object of class
java.io.IOException: Couldn't read the GWT object representation: Invalid type signature for com.google.appengine.api.datastore.GeoPt
at org.restlet.ext.gwt.ObjectRepresentation.getObject(ObjectRepresentation.java:126)
at org.restlet.ext.gwt.GwtConverter.toObject(GwtConverter.java:149)
at org.restlet.service.ConverterService.toObject(ConverterService.java:167)
at org.restlet.resource.Resource.toObject(Resource.java:784)
at org.restlet.resource.ServerResource.doHandle(ServerResource.java:481)
at org.restlet.resource.ServerResource.doHandle(ServerResource.java:545)
at org.restlet.resource.ServerResource.put(ServerResource.java:1234)
at org.restlet.resource.ServerResource.doHandle(ServerResource.java:425)
at org.restlet.resource.ServerResource.doNegotiatedHandle(ServerResource.java:646)
at org.restlet.resource.ServerResource.doConditionalHandle(ServerResource.java:341)
at org.restlet.resource.ServerResource.handle(ServerResource.java:942)
at org.restlet.resource.Finder.handle(Finder.java:246)
at org.restlet.routing.Filter.doHandle(Filter.java:159)
at org.restlet.routing.Filter.handle(Filter.java:206)
at org.restlet.routing.Router.doHandle(Router.java:431)
at org.restlet.routing.Router.handle(Router.java:648)
at org.restlet.routing.Filter.doHandle(Filter.java:159)
at org.restlet.routing.Filter.handle(Filter.java:206)
at org.restlet.routing.Filter.doHandle(Filter.java:159)
at org.restlet.routing.Filter.handle(Filter.java:206)
at org.restlet.routing.Filter.doHandle(Filter.java:159)
at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:154)
at org.restlet.routing.Filter.handle(Filter.java:206)
at org.restlet.routing.Filter.doHandle(Filter.java:159)
at org.restlet.routing.Filter.handle(Filter.java:206)
at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:211)
at org.restlet.engine.application.ApplicationHelper.handle(ApplicationHelper.java:84)
at org.restlet.Application.handle(Application.java:377)
at org.restlet.routing.Filter.doHandle(Filter.java:159)
at org.restlet.routing.Filter.handle(Filter.java:206)
at org.restlet.routing.Router.doHandle(Router.java:431)
at org.restlet.routing.Router.handle(Router.java:648)
at org.restlet.routing.Filter.doHandle(Filter.java:159)
at org.restlet.routing.Filter.handle(Filter.java:206)
at org.restlet.routing.Router.doHandle(Router.java:431)
at org.restlet.routing.Router.handle(Router.java:648)
at org.restlet.routing.Filter.doHandle(Filter.java:159)
at org.restlet.routing.Filter.handle(Filter.java:206)
at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:211)
at org.restlet.Component.handle(Component.java:392)
at org.restlet.Server.handle(Server.java:516)
at org.restlet.engine.ServerHelper.handle(ServerHelper.java:72)
at org.restlet.engine.adapter.HttpServerHelper.handle(HttpServerHelper.java:152)
at org.restlet.ext.servlet.ServerServlet.service(ServerServlet.java:1089)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.googlecode.objectify.cache.AsyncCacheFilter.doFilter(AsyncCacheFilter.java:59)
at com.googlecode.objectify.ObjectifyFilter.doFilter(ObjectifyFilter.java:49)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:383)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: com.google.gwt.user.client.rpc.SerializationException: Invalid type signature for com.google.appengine.api.datastore.GeoPt
at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader.validateTypeVersions(ServerSerializationStreamReader.java:1116)
at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader.deserialize(ServerSerializationStreamReader.java:610)
at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader.readObject(ServerSerializationStreamReader.java:567)
at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader$ValueReader$8.readValue(ServerSerializationStreamReader.java:140)
at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader.deserializeValue(ServerSerializationStreamReader.java:425)
at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader.deserializeClass(ServerSerializationStreamReader.java:807)
at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader.deserializeImpl(ServerSerializationStreamReader.java:878)
at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader.deserialize(ServerSerializationStreamReader.java:662)
at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader.deserialize(ServerSerializationStreamReader.java:587)
at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader$ValueReader$8.readValue(ServerSerializationStreamReader.java:134)
at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader.deserializeValue(ServerSerializationStreamReader.java:414)
at org.restlet.ext.gwt.ObjectRepresentation.getObject(ObjectRepresentation.java:122)
... 80 more 
```

注意：在有人建议我使用 DTO 或其他框架而不是 Restlet 或 Objectify 之前，我特意选择了这种组合来实现 Restful 服务，它可以在客户端重用数据对象，而无需繁琐的 DTO 和转换。

谢谢皮埃尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:48:32.500

看起来这是一个已知的错误：[https ://code.google.com/p/objectify-appengine/issues/detail?id=135](https://code.google.com/p/objectify-appengine/issues/detail?id=135)

# c# - 泛型 - 我可以根据变量编写 T 吗？

> ID：14827992
> 
> 赞同：1
> 
> 时间：2013-02-12T08:02:20.480
> 
> 标签：c#, generics

我正在编写一个游戏，并且我有一个 Crate 类，其中包含 T 类型的 Item-s 因板条箱而异。我已经使用这样的泛型进行了设置：

```
public class Crate<I> : Item 
    where I : Item
{
    private List<I> contents = new List<I>();
    //...
} 
```

我目前正在编写一个“购买”屏幕，您可以在其中选择物品，然后交付这些物品的板条箱。根据玩家在游戏中所处的阶段，某些物品可用/不可用。因此，我有一个数组中当前可用项目的列表。

我想要做的是基于该数组创建板条箱。

例如，我的数组可能是

```
 public static List<Item> CurrentlyAvailableItems= new List<Item>() { new Linen(), new Food() }; 
```

从这里，我想创建按钮来生成这些物品的箱子。目前我能想到的唯一方法是使用一个巨大的 IF 循环，每次我创建这样的新项目时都需要更新它：

```
for (int i = 0; i < GV.CurrentlyAvailableItems.Count; i++)
{
    Item item = null;
    if (GV.CurrentlyAvailableItems[i] is Linen) item = new Crate<Linen>();
    else if (GV.CurrentlyAvailableItems[i] is Food) item = new Crate<Food>();
    Add(new BuyButton(item));
} 
```

我想要做的是：

```
for (int i = 0; i < GV.CurrentlyAvailableItems.Count; i++)
{
    Type t = GV.CurrentlyAvailableItems[i].GetType();
    Crate<t> crate = new Crate<t>();
    Add(new BuyButton(crateToBuy ));
} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T08:06:50.180

您可以通过反射来做到这一点：

```
// TODO: Consider using a foreach loop over GC.CurrentlyAvailableItems
Type itemType = GV.CurrentlyAvailableItems[i].GetType();
Type crateType = typeof(Crate<>).MakeGenericType(t);
Item crate = (Item) Activator.CreateInstance(crateType);
Add(new BuyButton(crate)); 
```

请注意，这*不会*非常有效 - 但它可能已经足够好了。如果不是，您可能想要一个`Dictionary<Type, Func<Item>>`或类似的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T08:17:05.860

如果您只有几个派生类型，您可以使用动态关键字和函数重载来执行此操作，或者使用反射（请参阅 Jon Skeet 的回答）：

```
BuyButton CreateButton(MyDerivedItem foo) 
{
    return new BuyButton(Crate<MyDerivedItem>());
}

// ... and in your code:

Add(CreateButton((dynamic)(GV.CurrentlyAvailableItems[i]))); 
```

# magento - MAGENTO：以编程方式重新索引价格

> ID：14827996
> 
> 赞同：15
> 
> 时间：2013-02-12T08:02:36.117
> 
> 标签：magento, reindex

我以编程方式更新 magento 中的价格。在此更新后如何重新索引价格。现在我使用了 SSH 命令：

```
php indexer.php --reindex catalog_product_price 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-02-12T08:27:22.417

以下将重新索引每个索引。

```
for ($i = 1; $i <= 9; $i++) {
    $process = Mage::getModel('index/process')->load($i);
    $process->reindexAll();
} 
```

您还可以使用 Magento 集合模型来加载每个索引，而不是在 for 循环中对 id 进行硬编码。

```
/* @var $indexCollection Mage_Index_Model_Resource_Process_Collection */
$indexCollection = Mage::getModel('index/process')->getCollection();
foreach ($indexCollection as $index) {
    /* @var $index Mage_Index_Model_Process */
    $index->reindexAll();
} 
```

但是，如果您只想重新索引 id 为 2 的价格

```
$process = Mage::getModel('index/process')->load(2);
$process->reindexAll(); 
```

您还可以按如下方式调用函数 getProcessByCode：

```
$process = Mage::getModel('index/indexer')->getProcessByCode('catalog_product_price');
$process->reindexAll(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T10:25:07.890

通过使用以下 SSH 命令，您可以重新索引所有索引。

```
php shell/indexer.php reindexall 
```

但是，如果您只想重新索引 catalog_product_price，那么您可以使用下面的代码。

```
php shell/indexer.php --reindex catalog_product_price 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-23T18:51:54.470

```
php -f indexer.php help 
```

您可以将此命令用于所有与通过 SSH 重新索引相关的命令。

```
php indexer.php -- reindex [process_code]

  e.g: php indexer.php --reindex catalog_product_price 
```

如果您喜欢代码方式，那么这些是通过 SSH 的，那么您必须通过以下代码：

```
 $indexer = Mage::getModel('index/indexer')->getProcessByCode('catalog_product_price')
 $indexer->reindexEverything(); 
```

或这样做：

```
 for ($i = 0; $i <= 8; $i++) {  
       $process = Mage::getModel('index/process')->load($i);  
      $process->reindexAll();  
  } 
```

[欲了解更多信息](http://www.jyotiranjan.in/blog/reindexing-magento-programmatically/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-22T19:34:01.080

如果您有平面表并且想知道为什么（就像我今天所做的那样）无论您重新索引多少次，前端都不会显示以编程方式更新的价格，那么您很可能需要在重新索引价格之后重新索引产品平面：

```
php shell/indexer.php -reindex catalog_product_price
php shell/indexer.php -reindex catalog_product_flat 
```

如果你做一个正常的：

```
php shell/indexer.php reindexall 
```

注意重新索引的顺序：

```
Category Flat Data index was rebuilt successfully in 00:00:00
Product Flat Data index was rebuilt successfully in 00:00:00
Stock Status index was rebuilt successfully in 00:00:00
Catalog product price index was rebuilt successfully in 00:00:00
... 
```

产品平面在价格之前被索引，因此价格更新没有在平面表中更新（即catalog_product_flat_2）。查看平面表以确保设置了以编程方式更新的价格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-06T07:45:45.310

```
 <?php
   namespace Webizon\ApiConnector\Controller\Index;
   class Reindex extends \Magento\Framework\App\Action\Action {     
/**
 * @var \Magento\Indexer\Model\IndexerFactory
 */
protected $indexerFactory;
/**
 * @var \Magento\Framework\Indexer\ConfigInterface
 */
protected $config;
/**
 * @param Context $context
 * @param \Magento\Indexer\Model\IndexerFactory $resultLayoutFactory    
 * @SuppressWarnings(PHPMD.ExcessiveParameterList)
 */
public function __construct(
    \Magento\Framework\App\Action\Context $context,
    \Magento\Indexer\Model\IndexerFactory $indexerFactory,
    \Magento\Framework\Indexer\ConfigInterface $config
) {     
    $this->indexerFactory = $indexerFactory;
    $this->config = $config;
    parent::__construct($context);
}
/**
 * Regenerate full index
 *
 * @return void
 * @throws \Exception
 */
public function execute()
{           
    $params = $this->getRequest()->getParams();
    if(isset($params['run'])){
        if($params['run'] == 'all'){
            $this->reindexAll(); 
        }else{
            $this->reindexOne($params['run']);
        }   
    }           
}
/**
 * Regenerate single index
 *
 * @return void
 * @throws \Exception
 */
private function reindexOne($indexId){
    $indexer = $this->indexerFactory->create()->load($indexId);
    $indexer->reindexAll();
}
/**
 * Regenerate all index
 *
 * @return void
 * @throws \Exception
 */
private function reindexAll(){
    foreach (array_keys($this->config->getIndexers()) as $indexerId) {          
        $indexer = $this->indexerFactory->create()->load($indexerId);
        $indexer->reindexAll();            
    }
}
  } 
```

[http://www.webizon.in/apiconnector/index/reindex/all](http://www.webizon.in/apiconnector/index/reindex/all) => 运行 reindex all

[http://www.webizon.in/apiconnector/index/reindex/indexer_id](http://www.webizon.in/apiconnector/index/reindex/indexer_id) => 运行单独的重新索引

（例如：[http](http://www.webizon.in/apiconnector/index/reindex/catalog_product_price) ://www.webizon.in/apiconnector/index/reindex/catalog_product_price ） - 运行价格索引