# StackOverflow 问答 14144000-14144999

# licensing - 我可以在商业软件开发中使用获得 GPL 许可的软件工具吗？

> ID：14144000
> 
> 赞同：2
> 
> 时间：2013-01-03T17:27:20.197
> 
> 标签：licensing

问题是特定于**使用这些工具开发**商业软件的。

GPL 许可工具的源代码或二进制文件无论如何**都不会**成为商业软件的一部分。

我不想修改 GPL 许可的工具。

例如，根据 GPL 许可的 C/C++ 开发 IDE。我可以使用这个 IDE 开发商业软件吗？

我想使用的其他具体工具示例是：Doxygen、Eclipse 等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T17:32:49.903

简短的回答：是的。

来自 Gnu 常见问题[1](http://www.gnu.org/licenses/gpl-faq.html#CanIUseGPLToolsForNF)

> 我可以使用 GPL 涵盖的编辑器（例如 GNU Emacs）来开发非自由程序吗？
> 
> ```
> Yes, because the copyright on the editors and tools 
> ```
> 
> 不涵盖您编写的代码。使用它们不会合法地对您用于代码的许可证施加任何限制。
> 
> ```
> Some programs copy parts of themselves into the output for technical reasons 
> ```
> 
> ——例如，Bison 将标准解析器程序复制到其输出文件中。在这种情况下，输出中的复制文本由与源代码中涵盖的相同许可证涵盖。同时，源自程序输入的输出部分继承了输入的版权状态。
> 
> ```
> As it happens, Bison can also be used to develop non-free programs. 
> ```
> 
> 这是因为我们决定明确允许在 Bison 输出文件中不受限制地使用 Bison 标准解析器程序。我们之所以做出这个决定，是因为有其他与 Bison 相当的工具已经允许用于非自由程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T17:47:04.880

GPL 允许这样做。但是，某些程序或库可能包含其他限制。所以，我认为你不能对所有 GPL 下的程序普遍回答这个问题。

不过，Doxygen 和 Eclipse 都可以。

# .net - 使用 WCF 使用 SOAP：将回复正文作为原始 XML 接收

> ID：14144002
> 
> 赞同：2
> 
> 时间：2013-01-03T17:27:25.597
> 
> 标签：.net, wcf, soap

我正在使用提供的 WSDL 文件为第三方 SOAP 服务编写客户端。使用 WCF 执行此操作的默认方法是使用 svcutil 生成本地代理类，并让 WCF 自动反序列化对服务调用的回复到代理对象中。

但是 - 由于我已经建立了可以很好地与 XML 和 XPath 配合使用的代码，因此我对使用代理对象并不感兴趣，我宁愿只接收原始形式的主体，而不必重新序列化它们。另一方面，我不希望自己编写 SOAP 请求的麻烦，并希望 WCF 继续处理它。

我知道 svcutil 的 /importXmlTypes 标志几乎可以让我到达那里，只有顶级回复对象，其中包含 XmlNode 数组，但最好是我想要

```
XmlDocument SomeServiceMethod(...) 
```

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:40:22.763

好吧，你可以这样做，但这不是很好。您可以创建一个消息检查器并将其附加到您的代理（使用[`IClientMessageInspector`](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.iclientmessageinspector.aspx)）。示例：[这里](http://blogs.msdn.com/b/carlosfigueira/archive/2011/04/19/wcf-extensibility-message-inspectors.aspx)。因此，您可以以裸露的形式拦截回复，但在响应到达代理时仍会发生反序列化。

但是，请考虑一下这将如何工作。您的代理已经可以完成这项工作，但您**只能**针对手动解析的回复（响应）解决此问题。

此外，请考虑更新/更改服务时会发生什么。您必须更改解析代码，而不仅仅是更新代理，然后使用更新的合约。

无论如何，[这里](http://msdn.microsoft.com/en-us/magazine/cc163302.aspx#S6)有一些关于自定义 WCF 行为的额外阅读。

# java - java异常处理这里粘贴的两种样式有什么区别？

> ID：14144005
> 
> 赞同：0
> 
> 时间：2013-01-03T17:27:35.153
> 
> 标签：java, exception, exception-handling

第一个来自一本对我来说非常神秘/复杂的书，第二个是我看到我周围的人写的方式，包括我:)，对于第一个风格的 eclipse 也显示了 catch "IOException openx" 块是处理发生读写的部分的异常，即

```
while ((len = is.read(buf)) >= 0)
out.write(buf, 0, len); 
```

.这是否意味着捕获“IOException iox”是无用的代码？

第一种风格。

```
File file = new File("hsjdhsaj");
        InputStream is = null;
        try {
            URL url = new URL("");
            is = url.openStream();
            OutputStream out = new FileOutputStream(file);
            try {
                byte[] buf = new byte[4096];
                int len;
                while ((len = is.read(buf)) >= 0)
                    out.write(buf, 0, len);
            } catch (IOException iox) {
            } finally {
                try {
                    out.close();
                } catch (IOException closeOutx) {
                }
            }
        } catch (FileNotFoundException fnfx) {
        } catch (IOException openx) {
        } finally {
            try {
                if (is != null)
                    is.close();
            } catch (IOException closeInx) {
            }
        } 
```

第二种风格。

```
 File file = new File("hsjdhsaj");
        InputStream is = null;
        OutputStream out = null;
        try {
            URL url = new URL("");
            is = url.openStream();
            out = new FileOutputStream(file);

            byte[] buf = new byte[4096];
            int len;
            while ((len = is.read(buf)) >= 0)
                out.write(buf, 0, len);

        } catch (FileNotFoundException fnfx) {
        } catch (IOException openx) {
        } finally {
            try {
                if (out != null)
                out.close();
                if (is != null)
                    is.close();
            } catch (IOException closeInx) {
            }
        } 
```

如果我把

```
try { 
if (is != null) is.close();
} catch (IOException closeInx) { }
try {
if (out != null) out.close(); 
} catch (IOException closeInx) { } 
```

在 finally 块中选择第二种样式，那么它们是否都相同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:32:24.447

用第二种风格`is`不关闭时`out.close()`抛出异常。第一种风格没有这个问题。

在这两个代码片段中，异常经常被默默地吞下。这可能会导致维护噩梦。有些东西不起作用，你不知道为什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T17:32:35.690

第一种方法更正确。如果调用时抛出异常，您的第二种方法会出现错误`out.close`，因为您永远不会调用`is.close()`.

当然，他们俩都很丑。您应该使用[IOUtils.closeQuietly() 之](http://commons.apache.org/io/apidocs/org/apache/commons/io/IOUtils.html#closeQuietly%28java.io.Closeable%29)类的实用方法来关闭您的流。而且你不应该吞下异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T17:39:44.120

是的，第一个更正确，但也很丑陋。这就是 Java 7 改进了很多异常处理的原因。在您的情况下，您可以使用**Try-with-Resources**：

> 新语法允许您声明属于 try 块的资源。这意味着您提前定义资源，运行时会在执行 try 块后自动关闭这些资源（如果它们尚未关闭）。

```
 try (BufferedReader reader = new BufferedReader(
    new InputStreamReader(
    new URL("http://www.yoursimpledate.server/").openStream())))
   {
    String line = reader.readLine();
    SimpleDateFormat format = new SimpleDateFormat("MM/DD/YY");
    Date date = format.parse(line);
   } catch (ParseException | IOException exception) {
    // handle I/O problems.
   } 
```

查看[使用 Java SE 7 异常更改](http://www.oracle.com/technetwork/articles/java/java7exceptions-486908.html)

# javascript - 在模糊的 iFrame 中使用 jQuery 热键

> ID：14144006
> 
> 赞同：2
> 
> 时间：2013-01-03T17:27:34.730
> 
> 标签：javascript, jquery, iframe, focus, hotkeys

我在具有两个 iFrame（A 和 B）的页面上的 iframe（iFrame A）中使用 jQuery Hotkeys。当焦点在 A 上时，热键效果很好。但在使用应用程序期间，我必须定期在 iFrame B 内单击。

即使 iFrame A 不在焦点上，如何使热键正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-17T10:39:01.267

我广泛使用带有热键的 iframe。我让热键调用一个名为“keyPressed”的函数，该函数根据组合键确定要做什么。如果我在一个通常在 iframe 中加载的页面上，我会让 iframe 的父级在 iframe 加载时绑定额外的热键。如果 iframe 页面的 keyPressed 函数没有特定用途，它将尝试将热键传递给父级。但是，这仅在您可以控制 iframe（它们是您网站的一部分）时才有效。

```
//handles all key pressed events
function keyPressed(keyname) {
    if (keyname == 'alt+s') {
        SaveStdPage();        
    }
    else if (keyname == 'alt+d') {
        ClickButton('TrashBtn');
    }
    else {
        //Pass hotkey to parent 
        try{
            parent.keyPressed(keyname);
        }
        catch (ex) {
            console.log(keyname);
        }
    }
} 
```

# sql-server-2012 - SQL Server 2012 是否支持 ProClarity？

> ID：14144007
> 
> 赞同：0
> 
> 时间：2013-01-03T17:27:44.623
> 
> 标签：sql-server-2012, proclarity

我目前正在制定从 SQL Server 2005 迁移到 SQL Server 2012 的升级计划，我们的一些业务部门仍在使用 ProClarity。

我知道这本质上是一个“死”的应用程序；微软不再对其进行升级，并且计划在未来停产。

在微软的论坛上搜索和挖掘之后，我仍然无法给出关于 2012 升级是否与 Proclarity 不兼容的明确答案。（商业用户使用的是 6.2；这是后面的一个小修订）

有没有人试过这个并且成功了？我们是否需要在 SQL Server 2008 上保留这部分 BI 工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:13:36.100

升级成功，用户可以使用 ProClarity 连接到 2012 Analysis Services

# sql - SQL Server 排序规则：小写首选项

> ID：14144008
> 
> 赞同：1
> 
> 时间：2013-01-03T17:27:49.880
> 
> 标签：sql, sql-server-2008, collation

我有 SQL Server 2008，正在寻找区分大小写字符的小写首选项排序规则，但找不到任何！

[http://msdn.microsoft.com/en-us/library/ms144250(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms144250(v=sql.105).aspx)

那么，是否有任何具有小写偏好的 CS 排序规则？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T17:35:25.313

这是不可能的。

排序规则区分大小写 (CS) 或不区分大小写 (CI)。

没有大写/小写排序规则。

我什至不明白优先考虑小写的区分大小写的排序规则意味着什么，除非你在谈论排序顺序（大写之前的小写字母），但即便如此，现有的排序规则也是不可能的。

# c# - 在静态类中引用 ContentManager？（C#，XNA）

> ID：14144010
> 
> 赞同：0
> 
> 时间：2013-01-03T17:27:56.027
> 
> 标签：c#, xna, sprite

我创建了一个静态类，它需要能够更改对象中使用的精灵。但是，在非静态类中，我可以将对象中的 ContentManager 称为`this.Content`，但在静态类中，它说“this”不能使用。

对于如何从静态类引用此对象中的内容管理器，我有点迷茫。我尝试使用对象而不是`this`( `enemies[i].`)，但这不起作用。我也尝试使用 just `ContentManager.`，但它告诉我也不存在。

我仍然不完全理解 ContentManager 以及为什么它需要在每个对象中，但我很难找到关于它是什么以及它做什么的真正详细信息（大多数教程似乎掩盖了它，只是说它必要的）

这是我到目前为止的代码片段。它简化了一点（还有很多），但只有`this.Content`一部分给我带来了麻烦：

```
public static void fight(List<enemy> enemies)
    {
        for (int i = 0; i < enemies.Count; i++)
            {
                if (enemies[i].hp <= 0)
                                {
                                    enemies[i].LoadContent(this.Content, "spr_enemy_dead");
                                } 
```

`enemy`这是在对象内包含内容管理器的方法：

```
public void LoadContent(ContentManager theContentManager, string AssetName)
    {
        spr_enemy = theContentManager.Load<Texture2D>(AssetName);
    } 
```

可能有更好的方法来做到这一点，但我在搜索中没有找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T20:01:57.290

如果 ContentManager 是静态的，可能声明如下：

```
class YourObject
{
    static public ContentManager Content; 
```

您已经在此对象的静态函数中，因此您可以像这样简单地访问它：

```
enemies[i].LoadContent(Content, ... 
```

或者：

```
enemies[i].LoadContent(YourObject.Content, ... 
```

如果您的 Content 对象未静态声明，则无法在静态调用中访问它，除非您对 YourObject 有引用...

# java - 通过 telnet 使用 java 发送转义键字符

> ID：14144012
> 
> 赞同：0
> 
> 时间：2013-01-03T17:28:04.333
> 
> 标签：java, ascii, telnet

我有通过 telnet 协议与路由器通信的类。我可以发送文本字符串：

```
 s = new Socket("201.20.2.3",23);
inputStream = s.getInputStream();
outputStream = s.getOutputStream();
outputStream.write( ("admin\n") .getBytes());
Thread.sleep(100);
outputStream.write("24\n".getBytes()); 
```

所以 \n 就像一个 Enter 按钮。但是如何在那里发送一个 Escape 按钮呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T17:30:24.603

发送 ASCII 码进行转义：`0x1b`。

# javascript - 在 xpath 中使用动态变量

> ID：14144016
> 
> 赞同：2
> 
> 时间：2013-01-03T17:28:15.703
> 
> 标签：javascript, variables, xpath, greasemonkey

我需要这个脚本的一些帮助：

```
var xpathResult = document.evaluate("(//text()[contains(., 'TEXT GOES HERE')])[1]", document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null);
var node=xpathResult.singleNodeValue;
if (node==null) 
```

我也有一个这样的字符串列表：

```
var mycars = new Array();
mycars[0] = "Saab";
mycars[1] = "Volvo";
mycars[2] = "BMW"; 
```

我可以用变量 mycars 替换第一个脚本中的 TEXT GOES HERE 吗？我这样做是因为我有一个动态生成的页面，我想根据存在的数组使用greasemonkey 对其进行操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:27:20.410

这个问题有点不清楚，但总的来说，你会使用`for()`循环。像这样的东西：

```
var foundSomething  = false;

for (var J in mycars) {
    var xpathResult     = document.evaluate (
        "(//text()[contains(., '" + mycars[J] + "')])[1]",
        document,
        null,
        XPathResult.FIRST_ORDERED_NODE_TYPE,
        null
    );
    var node            = xpathResult.singleNodeValue;
    if (node) {
        foundSomething  = true;
        // DO WHATEVER WITH THE FOUND NODE HERE.
        // break;  // Un-comment this statement to stop on the first match.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:51:42.140

您必须修改包含 XPath 表达式的字符串以在 xpath 中表达您的要求。因此，在您的示例中，您必须创建一个字符串，其中多个条件由 分隔`or`，或者您可以使用 . 分隔多个 XPath 表达式`|`。请参阅以下示例：

```
(//text()[contains(., 'Saab') or contains(., 'Volvo') or contains(., 'BMW')])[1]

(//text()[contains(., 'Saab')]|//text()[contains(., 'Volvo')]|//text()[contains(., 'BMW')])[1] 
```

# groovy - 在 Groovy 控制台中使用 Geb

> ID：14144017
> 
> 赞同：2
> 
> 时间：2013-01-03T17:28:23.303
> 
> 标签：groovy, geb

我正在学习 GEB，我想在 Groovy 控制台中使用它。我要跑：

```
import geb.Browser

Browser.drive {
 go "http://googel.com/"
 assert title == "Google"
} 
```

但这给出了一个错误

```
unable to resolve class geb.Browser
 at line: 1, column: 1 
```

我已经下载了 Geb 核心 jar (http://search.maven.org/#artifactdetails%7Corg.codehaus.geb%7Cgeb-core%7C0.7.2%7Cjar) 并将其放在 PATH 中，但没有在 groovy 中导入安慰。我在做什么错以及如何运行简单的 Geb 内联脚本？

谢谢

ps mac 10.7，geb 0.7.2

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T18:01:46.760

尝试将其放在文件的顶部：

```
@Grapes([
    @Grab("org.codehaus.geb:geb-core:0.7.2"),//always use latest version of geb and selenium drivers
    @Grab("org.seleniumhq.selenium:selenium-firefox-driver:2.46.0"),
    @Grab("org.seleniumhq.selenium:selenium-support:2.46.0")
]) 
```

然后，您将不必处理类路径问题，并且您可以轻松地在 groovy 控制台中获得 geb

# authentication - 如何使用 Mule 配置身份验证？

> ID：14144018
> 
> 赞同：1
> 
> 时间：2013-01-03T17:28:24.223
> 
> 标签：authentication, mule, mule-studio

基本上它是我之前的问题的扩展 [如何使用 Mule ESB、Mule Studio 读取返回 JSON 对象并将其存储到 PostgreSQL 中的 REST 服务](https://stackoverflow.com/questions/14003046/how-to-read-rest-service-that-returns-json-object-and-store-the-same-into-postgr/14024632#comment19412046_14024632)

我有一些 REST 服务正在“ [http://localhost:35798/RestServiceImpl.svc/json/567](http://localhost:35798/RestServiceImpl.svc/json/567) ”上运行

现在为了访问这些服务，我需要以管理员身份进行身份验证。凭据是

**用户名**：管理员

**密码：** pwd

流程（现有）应该能够通过 REST 处理身份验证和建立会话。

如何使用 Mule 进行身份验证？如果身份验证失败，流程将停止。否则在身份验证成功后，它将读取 REST 服务并将数据插入 PostgreSQL。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:30:14.790

将凭据放在出站端点 URI 中：

```
http://admin:pwd@localhost:35798/RestServiceImpl.svc/json/567 
```

您当然可以使用属性来避免在 Mule 配置中对它们进行硬编码：

```
http://${rest.admin.username}:${rest.admin.password}@localhost:35798/RestServiceImpl.svc/json/567 
```

# javascript - 为什么 Object.toString 会抛出 SyntaxError 而 Array.slice 不会？

> ID：14144021
> 
> 赞同：1
> 
> 时间：2013-01-03T17:28:55.177
> 
> 标签：javascript, object, syntax-error, prototype

为什么在控制台中输入这个：

```
{}.toString
{}.hasOwnProperty
{}.... 
```

抛出一个 SyntaxError，然后输入：

```
[].slice
[].filter
({}).toString
({}.toString) 
```

不是吗？

数组和对象有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T17:30:32.677

问题是`{`符号的歧义。试试这个：

```
({}.toString()) 
```

当解析器`{}`在新语句的开头看到时，它必须在

*   这是一个对象文字吗？
*   这是一个语句块吗？

它总是选择第二个，一个语句块。因此`{}`是一个空的语句块，然后`.toString()`就没有意义了。

没有歧义`[]`-`[`语句开头的 a 只能是数组文字的开头（作为表达式语句的一部分）。然而，关键字也有类似的问题`function`，它作为函数声明语句的开始和函数实例化表达式的开始具有双重作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:30:49.340

因为~~在控制台~~ `{}`中被视为[块语句](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/block)，而不是对象。为了让它认为它是一个对象，请使用`({})`：

```
({}).toString 
```

# objective-c - UIViewController viewDidLoad

> ID：14144033
> 
> 赞同：3
> 
> 时间：2013-01-03T17:29:54.063
> 
> 标签：objective-c, ios, uiviewcontroller, ios6, autolayout

我有一个新项目，可以使用 iOS 5+ 功能，所以我选择同时使用`AutoLayout`UIViewController`childControllers`功能。

我要创建的屏幕很简单： 1\. 顶部区域有很多“复杂”控件。2\. 底部区域是一个表格视图，用于可视化结果。

**我想要的是**

我希望控件区域占据所有必要的位置（即我给 Interface Builder 的位置）。TableView 将根据需要缩小。

**问题**

从 XIB 加载时，`UIViewController.view`帧的大小始终为 0x568。我预期为 0x200（如果 200 是我在 Interface Builder 中配置的大小）。

**什么有效：与`AutoLayout`**

我用我所有的元素创建了一个 XIB。我在“根视图”上做了插座，我做了插座和所有*视图容器。*

然后在我的 viewDidLoad 方法中，我添加了容器并配置了约束。

```
-(void) setupConstraints
{
    NSMutableArray *constraints = [NSMutableArray arrayWithCapacity:1];

    // Views dictionary.
    UIView *topView = self.topView;
    UIView *table   = self.tableTracks;
    NSDictionary *views = NSDictionaryOfVariableBindings(topView, table);

    // Views metrics.
    NSNumber *topViewHeight = [NSNumber numberWithFloat:self.topView.frame.size.height];
    NSDictionary *metrics = NSDictionaryOfVariableBindings(topViewHeight);

    // Pin the topView to the top edge of the container.
    [constraints addObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[topView(==topViewHeight)][table]|" options:0 metrics:metrics views:views]];

    // Pin the topView edges to both sides of the container.
    [constraints addObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[topView]|" options:0 metrics:nil views:views]];

    // Pin the table edges to both sides of the container.
    [constraints addObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[table]|" options:0 metrics:nil views:views]];

    [self.view addConstraints:constraints];
} 
```

有了这个，我可以`topView`使用 Interface Builder 简单地调整视图的大小，然后`TableView`根据需要调整视图的大小（没有压缩阻力，我不在乎我们看不到表格）。

**什么不工作：使用`AutoLayout`和`ChildControllers`**

然后为了简单起见，我选择使用`ChildControllers`（执行自定义 UIFont 设置需要很多插座，太糟糕了 XCode 还不能处理它们！）。我做了以下修改：

1.  创建 HomeTopViewController 类 + XIB。创建 HomeTableViewController 类 + XIB。
2.  将所有视图从原点复制到正确的 XIB。添加 UIViewController 引用 + 连接插座。
3.  的根容器`HomeTopViewController`配置为**200px**高度。
4.  将我的容器连接到 **`view`**我孩子控制器的插座。

然后我将我的设置代码更新为以下内容：

```
-(void) _addChildViewControllersAndSetupConstraints {
    // Get required metrics variables
    NSNumber *topViewHeight = [NSNumber numberWithFloat:self.topViewController.view.frame.size.height];

    CFShow(self.topViewController.view);
    // log is : <UIView: 0xa209c20; frame = (0 0; 320 568); autoresize = W+H; layer = <CALayer: 0xa2097e0>>
    NSLog(@"self.topViewController.view.frame.size.height = %f", self.topViewController.view.frame.size.height);

    // Informs controllers the ADD operation started
    [self addChildViewController:self.topViewController];
    [self addChildViewController:self.tableViewController];

    // Add view to the view's hierarchy
    self.topViewController.view.translatesAutoresizingMaskIntoConstraints = NO;
    self.tableViewController.view.translatesAutoresizingMaskIntoConstraints = NO;

    [self.view addSubview:self.topViewController.view];
    [self.view addSubview:self.tableViewController.view];

    // Setup constraints
    NSMutableArray *constraints = [NSMutableArray arrayWithCapacity:1];

    // Views dictionary
    UIView *topView = self.topViewController.view;
    UIView *table   = self.tableViewController.view;

    NSDictionary *views = NSDictionaryOfVariableBindings(topView, table);

    // Views metrics dictionary
    NSDictionary *metrics = NSDictionaryOfVariableBindings(topViewHeight);

    // Pin the topView to the top edge of the container.
    [constraints addObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[topView(==topViewHeight)][table]|" options:0 metrics:metrics views:views]];

    // Pin the topView edges to both sides of the container.
    [constraints addObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[topView]|" options:0 metrics:nil views:views]];

    // Pin the table edges to both sides of the container.
    [constraints addObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[table]|" options:0 metrics:nil views:views]];

    // Adds constraints
    [self.view addConstraints:constraints];

    // Informs controllers the ADD operation ended
    [self.topViewController didMoveToParentViewController:self];
    [self.tableViewController didMoveToParentViewController:self];
} 
```

**问题**

无论我如何调整 UIView 容器的大小，`HomeTopViewController`当我期望 200px 时，它`CFShow(self.topViewController.view);`总是会给我。`frame = (0 0; 320 568)`

我确实将布局大小配置为“自由格式”或“无”。

**我想尽可能避免的**

我讨厌必须创建其他插座，然后`View`将`HomeTopViewController`初始`HomeTableViewController`帧/高度存储到 UIViewController 属性中。

**问题**

1.  在加载时，所有 controller.view.frame 属性是否都在屏幕上调整大小？（无论是 3,5 还是 4 英寸）
2.  我怎样才能解决这个问题而不在某处硬编码大小//创建额外的出口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T20:45:39.600

如果您使用故事板，这会更容易。您可以将容器视图添加到主控制器的视图中，并根据需要调整它们的大小，并且您会自动将视图控制器嵌入到这些容器视图中，并设置为正确的大小。这些容器视图（在对象列表中的常规 UIView 旁边）只能从情节提要中获得，而不是 xibs。这几乎不需要任何代码，而且您可能不必手动添加任何约束。

# python - 迭代字典时出现奇怪的运行时错误

> ID：14144043
> 
> 赞同：1
> 
> 时间：2013-01-03T17:30:06.087
> 
> 标签：python, runtime-error

我运行了这段代码并得到如下错误：

```
Traceback (most recent call last):
  File "urllister.py", line 26, in <module>
    for k in l: print k,"points to",l[k],"\n"
RuntimeError: dictionary changed size during iteration 
```

我唯一要做的就是在第 27 行的 for 循环中打印

```
from sgmllib import SGMLParser

class URLLister(SGMLParser):
    def reset(self):
        SGMLParser.reset(self)
        self.data = []
    def start_a(self, attrs):
        href = [v for k , v in attrs if k == 'href']
        if href:
            self.data.extend(href)

if __name__ == '__main__':
    import urllib
    sock = urllib.urlopen("http://diveintopython.org")

    parser = URLLister()
    html = sock.read()

    parser.feed(html)

    sock.close()
    parser.close()
    for url in parser.data: print url
    l = locals()

    for k in l:
        print k,"points to",l[k],"\n" 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T17:32:42.507

这样做的原因是您循环引入了一个新的局部变量 ，`k`这意味着您的局部变量字典在循环中发生了更改。

最简单的解决方案（如果你真的需要这样做，尽管通常这是一个坏主意的标志）是复制字典 - 例如：`l = dict(locals())`. 这样，被更新的原始文件不会引起问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:48:48.577

错误的原因是 Python 认为，既然你通过 key 访问 dict，你可以改变 dict，这里是限制的。为避免此错误，您可以使用`get`方法，然后您的语句将如下所示：

```
for k in l:
    print k,"points to",l.get(k),"\n" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-25T09:31:42.607

这样做的原因是您循环引入了一个新的局部变量 k，这意味着您的局部变量字典在循环中发生了更改。

最简单的解决方案是在循环之前定义 k ，这样 locals() 在循环开始后就不会改变。

```
k = 0
l = locals()

for k in l:
    print k,"points to",l[k],"\n" 
```

# android - Android AMR-WB 录音

> ID：14144046
> 
> 赞同：0
> 
> 时间：2013-01-03T17:30:16.693
> 
> 标签：android, audio-recording, android-2.3-gingerbread, amr

我正在尝试以这种方式进行录音：

```
mRecorder = new MediaRecorder();    
mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);  
mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_WB);
mRecorder.prepare();
mRecorder.start();
... 
```

在三星 Galaxy SII (4.0.4) 和三星 Galaxy Nexus (4.2) 上运行完美。但在 SonyEricsson Xperia Pro (4.0.4) 上，它会创建无效的 3gp 文件。在 Android 2.3.* 上，它以错误的速度录制（效果，就像正常录制加速到 3-4 倍）。据我了解，我不能对 AMR 使用`setAudioEncodingBitRate`和`setAudioSamplingRate`方法（实际上是对的吗？）。也许有人知道 AMR-WB 的正确 MediaRecorder 曲调（或解决方法），或者我以错误的方式制作了一些东西？

提前致谢

迈克尔

# ruby - 跨浏览器共享 sinatra 应用程序中的会话

> ID：14144047
> 
> 赞同：2
> 
> 时间：2013-01-03T17:30:17.430
> 
> 标签：ruby, session, web-applications, sinatra

我正在使用 Sinatra 框架制作一个非常简单的 Web 应用程序，该应用程序需要登录会话。

我可以正常登录，但是当我的朋友访问该站点时，他们以我的身份登录。我有一个朋友注册。当我重新访问该网站时，我以她的身份登录！我们在不同的设备上相距 3000 英里。

这是我的登录代码的要点..

```
require 'rubygems'
require 'sinatra'

# I have tried enabling/disabling the :session_secret
# set :session_secret, 'my_secret' 
enable :sessions

before '*' do
  begin
    User.login(User.find(session[:me])) if session[:me]
  end
end

post '/login' do
  user = User.find_by_email!(params[:email]).authenticate!(params[:password])
  session[:me] = user.id
  User.login user
  200
end 
```

我还尝试将其添加到我的机架文件中

```
use Rack::Session::Cookie, 
    :key => 'my_app_key',
    :path => '/',
    :expire_after => 14400, # seconds
    :secret => 'secret_stuff' 
```

问题在于生产和开发环境。

Sinatra 文档不推荐任何超出`enable :sessions` [http://www.sinatrarb.com/faq.html#sessions的配置](http://www.sinatrarb.com/faq.html#sessions)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T20:18:46.647

```
User.login(User.find(session[:me])) if session[:me]

class User
  def self.login(user)
    @@me = user
  end
end 
```

这是你的问题。类变量持续存在，即使在请求之间也是如此。

1.  你登录
2.  `User` `@@me`设置为您的用户
3.  其他人访问该站点。
4.  `session[:me]`是`nil`因为还没有会话
5.  `User.login`不被调用，它要么设置`User` `@@me`为用户，要么设置为 nil。

所以当没有时`session[:me]`，`User` `@@me`不会改变。

简而言之，*不要*使用类变量来存储应该只为单个请求保留的信息。

# javascript - 设置输入的t abIndex，我仍然无法在ie9中使用标签

> ID：14144048
> 
> 赞同：2
> 
> 时间：2013-01-03T17:30:19.267
> 
> 标签：javascript, internet-explorer-9, tabindex

使用 ruby​​ on rails 表单生成器创建大量输入字段。

您可以在 Chrome/Firefox 中很好地使用标签，但在 IE9 中，标签已损坏。

所以我做了一些研究并决定`tabIndex`像这样设置输入：

```
<script>
$(document).ready(function(){
    var isIE = /*@cc_on!@*/false;
    if(isIE){
        var inputs = document.getElementsByTagName("input");
        for (var i = 0; i < inputs.length; i++){
            inputs[i].setAttribute("tabIndex", ""+i+"");
        }
    }
})
</script> 
```

无论如何，相当快速的修复，我测试了它，现在`inputs`有一个`tabIndex`，但他们仍然没有正确地标记。**为什么这不起作用？有没有人有更好的解决方案？**

**编辑：**被破坏的标签是指这种行为：

我单击第一个输入字段点击选项卡，输入失去焦点，但下一个输入没有获得焦点。如果我再次点击制表符，那么我最终会再次将注意力集中在第一个输入上。这在一个永无止境的循环中重复。

我也知道`text-areas`并且`selects`不是输入，我现在要做的只是让某种标签功能正常工作。即使它跳过了这些元素。

链接到站点：[在](http://staging.fliprogram.com/policies/new)IE9 中打开以查看错误的选项卡行为。链接到验证插件代码：[就在这里](http://pastie.org/5617729)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:42:07.243

可能尝试做

```
inputs[i].tabIndex = i 
```

而不是 setAttribute，根据此处的 MS 示例：http: [//msdn.microsoft.com/en-us/library/ie/ms534654 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms534654(v=vs.85).aspx)

# c# - 从 IsolatedStorage 反序列化对象时不要调用对象构造函数

> ID：14144054
> 
> 赞同：0
> 
> 时间：2013-01-03T17:30:38.830
> 
> 标签：c#, constructor, deserialization, windows-phone-8, isolatedstorage

在我的 WP8 应用程序中，我有一种特殊类型的“设置”对象，它们存储在`IsolatedStorageSettings.ApplicationSettings`. 这些对象在其构造函数中设置了一些初始状态，并且该状态可能会在以后更改。

现在的问题是，显然当对象被反序列化时，它的构造函数被再次调用，从而重置状态的变化，这不是我想要的。

基本上是这样的：

```
class Test
{
    public int a { get; set; }
    public Test() { a = 1; }
}

Test x = new Test();
x.a = 2;

IsolatedStorageSettings.ApplicationSettings["test"] = x;
IsolatedStorageSettings.ApplicationSettings.Save();

// on next app launch
Test x = IsolatedStorageSettings.ApplicationSettings["test"] as Test;
Debug.writeLine(x.a) // 1, I want 2 
```

我可以以某种方式更改过程，以便在反序列化时不会调用对象的构造函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:59:05.553

当然，反序列化器必须调用类型的构造函数，因为它需要首先创建一个类型（对象）的实例，然后用序列化输入中的数据填充对象的属性。

因此，一个快速的解决方法是将默认的无参数构造函数留空，并在带有参数的构造函数中执行特殊的初始化操作，或者使用对方法的专用调用来初始化对象。

或者，使用专用类型进行序列化/反序列化，即 DTO（数据传输对象），然后从该对象中使用您需要的任何信息。

* * *

但无论如何，有些东西是可疑的，在您的代码示例中，它应该按您的预期工作，因为首先反序列化程序会调用构造函数，并且只有在设置属性之后，您才能通过在类构造函数和设置器中设置断点来测试它各个属性以查看流程工作流。

# php - 使用 PDO 返回执行

> ID：14144055
> 
> 赞同：0
> 
> 时间：2013-01-03T17:30:41.413
> 
> 标签：php, pdo

我有一个返回这个的函数：

```
function some(){
  ...
  return $this->query->execute();
} 
```

然后我有这个：

```
$var = some(); 
```

但是，当我尝试获取 $var 时，页面将无法加载。希望任何人都可以帮助我，我知道执行不是空的，因为我会在 some() 中获取（）结果。

当我对 $var 执行 var_dump 时，它返回 bool(true)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T17:34:17.473

[`PDOStatement::execute`](http://php.net/manual/en/pdostatement.execute.php)返回`bool`它是否成功，所以这是正确的功能，它让您知道查询已成功执行。

您需要返回的是结果集：

```
$this->query->execute();
return $this->query->fetchAll(); 
```

或者[`PDOStatement`](http://php.net/manual/en/pdostatement.php)对象本身：

```
return $this->query; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:35:29.970

你说的“获取 $var”到底是什么意思？[PDOStatement::execute()](http://php.net/pdostatement.execute)方法返回一个布尔值。`true`如果成功或`false`失败。从 PDOStatement::execute() 的返回值中没有可取的东西。您在 PDOStatement 对象上调用 fetch。

如果在此代码中 $this->query 是您的 PDOStatement 对象，那么您可以...

```
$this->query->execute();
return $this->query 
```

从您的函数中，这将返回您可以调用 fetch 方法的 PDOStatement 对象。或者只是从你的函数内部获取它，如果你想要的话，直接返回结果。

# c# - DataGrid问题内Repeater内的复选框列表（C＃）

> ID：14144058
> 
> 赞同：0
> 
> 时间：2013-01-03T17:30:45.187
> 
> 标签：c#, datagrid, repeater, checkboxlist

我知道这有点奇怪，但这是有充分理由的。

我有一个DataGrid，在Datagrid里面有一个Repeater，在Repeater里面有一个CheckBoxList

```
<asp:DataGrid ID="dg" runat="server">
   <Columns>
      <asp:TemplateColumn>
          <ItemTemplate>
              <asp:Repeater ID="rep" runat="server">
                 <ItemTemplate>
                     <asp:CheckBoxList ID="cbl" runat="server" DataTextField="Name" DataValueField="ID"></asp:CheckBoxList>                                
                 </ItemTemplate>
              </asp:Repeater>
          </ItemTemplate>
      </asp:TemplateColumn>
   </Columns>
</Components:ExtendedDataGrid> 
```

这导致了一个相当奇怪的问题。单击第一个中继器项目中的标签可以正常工作。但是，在第二个中继器项目中，标签脱落。

*   如果单击第 2 组中的第 2 项，则选择第 2 组中的第 1 项。
*   如果单击第 3 组中的第 1 项，则选择第 2 组中的最后一项。
*   如果单击第 3 组中的第 3 项，则选择第 3 组中的第 1 项。

因此，它在第二组中跳过 1，在第三组中跳过 2，等等。非常奇怪。

当我查看源代码时，我可以看到标签上的“for”属性确实是错误的。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:27:10.517

好的...我终于回到了这个问题上并弄清楚了。实际上，我没有提到的复选框列表旁边有一个隐藏字段。出于某种原因，当我把它拿出来时，其他一切都开始正常工作了。

# oracle - mybatis中批量插入多张表

> ID：14144063
> 
> 赞同：2
> 
> 时间：2013-01-03T17:30:53.410
> 
> 标签：oracle, batch-file, mybatis

当我通过引用 mybatis 映射器的 DAO 插入数据时，会影响多个表。

```
public void insertStuff(Collection<Stuff> data) {
   for (Stuff item : data) {
      mapper.insertT1(item.getT1Stuff());
      mapper.insertT2(item.getT2Stuff());
      Collection<MainStuff> mainData = item.getMainStuff();
      for (MainStuff mainItem : mainData) {
         mapper.insertMainData(mainItem);
      }
   }
} 
```

我正在使用 mybatis 的 BATCH 执行器类型，但我很快就达到了 Oracle 的 MAX_CURSOR 限制，因为在通过主循环的每次迭代中为三个映射器语句中的每一个创建了一个新的 PreparedStatement（和一个新的连接）。我可以通过循环多次迭代来避免这种情况：

```
public void insertStuff(Collection<Stuff> data) {
   for (Stuff item : data) {
      mapper.insertT1(item.getT1Stuff());
   }
   for (Stuff item : data) {
      mapper.insertT2(item.getT2Stuff());
   }
   for (Stuff item : data) {
      Collection<MainStuff> mainData = item.getMainStuff();
      for (MainStuff mainItem : mainData) {
         mapper.insertMainData(mainItem);
      }
   }
} 
```

然而，后一种代码的可读性较差，在性能方面有点成本，并且破坏了模块化。

有一个更好的方法吗？是否需要直接使用 SqlSession 并在一定数量排队后刷新语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:38:03.877

如果要使用批处理，则应使用第二种方式。在第一个代码中，您实际上没有任何批次。真正的批次有 N 个相同的语句。如果您执行了 3 个不同的查询并将它们封装成批处理，那么您的 jdbc 驱动程序会将它们分成 3 个批处理，一个查询。在第二个代码中，如果您有大量数据，将有三个批次，这是最快的。

# delphi - 在 Delphi 2006 中编译的 COM 对象：如何启用 DEP？

> ID：14144067
> 
> 赞同：0
> 
> 时间：2013-01-03T17:30:59.570
> 
> 标签：delphi, ocx

> **可能重复：**
> [如何在 Delphi 2006 或更早的可执行文件上启用 DEP/NX 和 ASLR？](https://stackoverflow.com/questions/8066266/how-can-i-enable-dep-nx-and-aslr-on-a-delphi-2006-or-earlier-executable)

我们有一个非常大的 Delphi 2006 项目，我们不想迁移到当前的 delphi（因为这需要一个月的工作......）。该项目编译为进程中的 COM 二进制文件 (ocx)。

DEP 引起了很多麻烦，因为 .NET 和 VC 开发人员都默认为 DEP=True。

**问题：**我们可以使 OCX DEP 化吗？

**背景：** DEP 是一个进程级别的属性。非 DEP 进程将加载 DEP 或非 DEP 的 DLL 和 OCX。但是，DEP 进程将拒绝加载具有丑陋的“无法访问的内存位置”错误的非 DEP dll 和 OCX。这就是为什么在创建本机 dll 和进程中的 OCX 以供其他开发人员使用时，DEP 是生活中非常重要的事实。

我在这里看到了线程： [如何在 Delphi 2006 或更早的可执行文件上启用 DEP/NX 和 ASLR？](https://stackoverflow.com/questions/8066266/how-can-i-enable-dep-nx-and-aslr-on-a-delphi-2006-or-earlier-executable)

但它似乎是在谈论在进程级别启用 DEP（例如，在 Delphi 2006 创建的 exe 中）。

我们如何处理由 Delphi 编译的 DLL 和 OCX，它们将在进程内运行，即将加载到 DEP=true 进程中？

谢谢！

# javascript - Word 文档的 pdf.js 模拟

> ID：14144069
> 
> 赞同：7
> 
> 时间：2013-01-03T17:31:03.697
> 
> 标签：javascript, html, canvas

我正在寻找一个类似于`pdf.js`但允许查看 Word 文档（.doc 和 .docx）的 JavaScript 库

有吗？

**更新：**

有一个有趣的库叫做[DOCX.js](https://github.com/stephen-hardy/DOCX.js)

但我正在寻找更高级的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:49:12.403

我对此表示怀疑。pdf.js 的背后是Mozilla，所以它不是一个周末项目。

有一些[选项可以让 LibreOffice 在浏览器中运行](https://www.libreoffice.org/download/libreoffice-online/)，但我没有第一手经验。显然，一些像[NextCloud](https://nextcloud.com/collaboraonline/)这样的云项目使用它。

然后你有谷歌文档来导入 Word 文件并让它在那里显示，但没有办法轻松嵌入甚至自己托管代码。（另外，据我了解，所涉及的服务器上的 Word 文件也有转换。）

毕竟，如果您将[PDF 规范](http://www.adobe.com/devnet/pdf/pdf_reference.html)与[OpenXML](http://www.ecma-international.org/publications/standards/Ecma-376.htm)（又名 .docx）规范进行比较，就会很清楚，一个*完全兼容*的查看器将是一个复杂的野兽，至少可以这么说。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-17T14:32:38.417

我刚刚发现[ViewerJS](http://viewerjs.org/)，但它只支持 OpenDocument 格式。这不是您想要的，但可能值得一试，特别是如果您能找到将 odt 转换为 doc 的方法（[这个问题可能会有所帮助](https://stackoverflow.com/questions/18333397/convert-doc-docx-documents-to-odt-open-document-text-and-vice-versa-using-j)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T17:53:44.947

乍一看，似乎可以使用[Flexpaper](http://www.devaldi.com/?p=616)来实现这种效果，但它实际上是在使用服务器端版本的开放式办公室将文档转换为可以在 Web 上查看的图像。这将在紧要关头工作，但肯定缺乏 pdf.js 的质量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-08T07:11:59.023

您可以同时使用 ViewerJS 和 JOD Converter ( [http://www.artofsolving.com/opensource/jodconverter.html](http://www.artofsolving.com/opensource/jodconverter.html) ) 来实现需求。首先，您可以使用上述转换器将办公文档转换为开放式办公或 pdf 格式。然后您可以在 pdf.js 或 ViewerJS 的帮助下显示这些文档

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-22T21:35:50.103

Native Documents（我对此感兴趣）为 Word 文档制作了一个可嵌入的查看器/编辑器。有一个[在线演示](https://nativedocuments.com/test_drive.html)，您可以在其中尝试自己的文档。

# xml - 使用 RESTTEmplate 调用 url 并使用 JAXB 绑定响应

> ID：14144070
> 
> 赞同：0
> 
> 时间：2013-01-03T17:31:10.890
> 
> 标签：xml, rest, xml-parsing, jaxb, resttemplate

使用此代码，当我使用导航器调用此 url 时，我有一个要调用的 url，我有一个 xml 响应，我想在一个名为 Response 的对象中检索它，该对象由 JAXB 注释

```
@Test
public void testRestTemplate()
{
    List<MediaType> acceptableMediaTypes = new ArrayList<MediaType>();
    acceptableMediaTypes.add(new MediaType("application", "xml"));
    HttpHeaders requestHeaders = new HttpHeaders();
    requestHeaders.setAccept(acceptableMediaTypes);
    HttpEntity<?> requestEntity = new HttpEntity<Object>(requestHeaders);
    RestTemplate restTemplate = new RestTemplate();
    restTemplate.setRequestFactory(new HttpComponentsClientHttpRequestFactory());
      String url= "http://1.......bf93af6" ; 

      ResponseEntity<ListResponse> responseEntity = restTemplate.exchange(url ,HttpMethod.GET, requestEntity, ListResponse.class);
      ListBigBlueButtonResponse listResponses = responseEntity.getBody(); 

} 
```

所以 ihava 这个失败跟踪：

```
org.springframework.web.client.RestClientException: Could not extract response: no suitable HttpMessageConverter found for response type [class com.alpha.vconf.test.ListResponse] and content type [text/xml;charset=utf-8]
at org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:107)
at org.springframework.web.client.RestTemplate$ResponseEntityResponseExtractor.extractData(RestTemplate.java:688)
at org.springframework.web.client.RestTemplate$ResponseEntityResponseExtractor.extractData(RestTemplate.java:674)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:492)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:447)
at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:394)
at com.alpha.vconf.test.VisioConfMangerTest.testRestTemplate(VisioConfMangerTest.java:43)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

我可以在使用 JAXB R 映射的对象中有任何 xml 响应吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:28:05.713

您收到此异常是因为您没有为`Content-Type` `application/xml`休息模板添加合适的 Http 消息转换器，该模板可用于序列化/反序列化对象。默认情况下，rest 模板中有一些消息转换器，但有时需要显式添加一个/多个，如下所示。这里有一些对我有用的东西，可以将 XML 响应反序列化为对象。

```
XStreamMarshaller marshaller = new XStreamMarshaller();
Map<String, Class> aliases = new HashMap<String, Class>();
aliases.put("person", Person.class); //"person" is root element.This is case sensitive
marshaller.setAliases(aliases);
MarshallingHttpMessageConverter converter = new MarshallingHttpMessageConverter(
            marshaller, marshaller);
List<HttpMessageConverter<?>> converters = new ArrayList<HttpMessageConverter<?>>();
    converters.add(converter);
template.setMessageConverters(converters);
HttpEntity request = new HttpEntity(null, headers);
ResponseEntity<Person> response = template.exchange(url,
            HttpMethod.GET, request, Person.class); 
```

# algorithm - 在未加权无向图中查找两个节点之间的所有最短路径

> ID：14144071
> 
> 赞同：35
> 
> 时间：2013-01-03T17:31:14.067
> 
> 标签：algorithm, graph, shortest-path, breadth-first-search

*我需要帮助找到未加权无向图*中两个节点之间的所有最短路径。

我能够使用 BFS 找到最短路径之一，但到目前为止，我不知道如何找到并打印出所有这些路径。

我可以使用的算法/伪代码的任何想法？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-03T19:15:04.050

需要注意的是，请记住，图中两个节点之间的最短路径可能呈指数级增长。任何用于此的算法都可能需要指数级的时间。

也就是说，有一些相对简单的算法可以找到所有路径。这里有两个。

# BFS + 反向 DFS

在图上运行广度优先搜索时，您可以标记每个节点与起始节点的距离。起始节点的距离为 0，然后，每当第一次发现一个新节点时，它的距离就是发现它的节点距离的 1 加。因此，首先在图上运行 BFS，记下到每个节点的距离。

一旦你有了这个，你可以找到*一条*从源到目的地的最短路径，如下所示。从目的地开始，目的地距离起始节点有一段距离。现在，查看所有有边进入目标节点的节点。从源到目的地的最短路径必须通过从距离 d-1 的节点到距离 d 的目的地的一条边结束。因此，从目标节点开始，沿着某个边缘向后走，到达距离 d-1 处您想要的任何节点。从那里步行到距离 d-2 的节点、距离 d-3 的节点等，直到回到距离 0 的起始节点。

此过程将以相反的顺序为您提供一条返回路径，您可以在最后翻转它以获得整体路径。

然后，您可以通过从结束节点回到起始节点运行深度优先搜索来找到从源到目的地的*所有*路径，在每个点尝试所有可能的方式从当前节点向后走到前一个节点的距离正好比当前节点的距离小一。

（我个人认为这是找到所有可能路径的最简单和最干净的方法，但这只是我的意见。）

# 有多个父母的 BFS

下一个算法是对 BFS 的修改，您可以将其用作预处理步骤来加速所有可能路径的生成。请记住，当 BFS 运行时，它以“层”的形式向外进行，在距离 0、距离 1、距离 2 等处获得一条最短路径到所有节点。BFS 背后的动机是距离 k + 1 处的任何节点从起始节点必须通过一条边连接到距起始节点距离为 k 的某个节点。BFS 通过找到一条长度为 k 的路径到距离 k 处的节点，然后将其延伸到某个边，从而在距离 k + 1 处发现该节点。

如果您的目标是找到*所有*最短路径，那么您可以通过扩展*每个*到距离为 k 的节点的路径到它们连接到的距离为 k + 1 的所有节点，而不是选择一条边。为此，请按以下方式修改 BFS：每当您通过在处理队列中添加其端点来处理边缘时，不要立即将该节点标记为已完成。相反，将该节点插入到队列中，该队列标有您跟随哪个边到达它。如果有多个节点链接到队列，这可能会让您将同一节点多次插入队列。当您从队列中删除一个节点时，您将其标记为已完成，并且不再将其插入队列中。类似地，您将存储多个父指针，而不是存储单个父指针，每个指针用于链接到该节点的每个节点。

如果你做这个修改过的 BFS，你最终会得到一个 DAG，其中每个节点要么是起始节点并且没有出边，要么与起始节点的距离为 k + 1，并且将有一个指向每个节点的指针它连接到的距离k。从那里，您可以通过列出从您选择的节点返回到 DAG 中的起始节点的所有可能路径来重建从某个节点到起始节点的所有最短路径。这可以递归地完成：

*   从起始节点到自身只有一条路径，即空路径。
*   对于任何其他节点，可以通过跟随每个传出边找到路径，然后递归地扩展这些路径以产生返回起始节点的路径。

这种方法比上面列出的方法需要更多的时间和空间，因为以这种方式找到的许多路径不会朝着目标节点的方向移动。但是，它只需要对 BFS 进行修改，而不是在 BFS 后进行反向搜索。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-17T14:23:27.453

@templatetypedef 是正确的，但他忘了提到在将任何父链接添加到节点之前必须进行的距离检查。这意味着 se 在每个节点中保持与源的距离，并将子节点的距离增加一。如果孩子已经被访问过并且距离更短，我们必须跳过这个增量和父添加。

```
public void addParent(Node n) {
    // forbidding the parent it its level is equal to ours
    if (n.level == level) {
        return;
    }
    parents.add(n);

    level = n.level + 1;
} 
```

完整的 java 实现可以通过以下链接找到。

[http://ideone.com/UluCBb](http://ideone.com/UluCBb)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-11T02:38:51.280

[我在解决这个https://oj.leetcode.com/problems/word-ladder-ii/](https://oj.leetcode.com/problems/word-ladder-ii/)时遇到了类似的问题

我尝试处理的方法是首先使用 BFS 找到最短距离，假设最短距离为 d。现在应用 DFS 并且在 DFS 递归调用中不要超出递归级别 d。

然而，这最终可能会探索@templatetypedef 提到的所有路径。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T19:24:08.797

首先，使用广度优先搜索找到所有节点的距离。

^(*（如果有很多节点，您可以使用 A* 并在队列顶部有 时停止`distance-to-start > distance-to-start(end-node)`。这将为您提供属于某个最短路径的所有节点）*)

然后从端节点回溯。每当一个节点连接到两个（或更多）具有较短起始距离的节点时，您就会分支到两个（或更多）路径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-02T16:41:51.420

templatetypedef 您的回答非常好，非常感谢您的回答（！！），但它错过了一点：

如果你有这样的图表：

```
ABCEF
  | |
  D-----

```

现在让我们想象一下我想要这条路：

```
A -> E。
```

它将像这样扩展：

```
A-> B-> D-> C-> F-> E。
```

存在的问题是，您将 F 作为 E 的父级，但是

```
A->B->D->FE
```

长于

```
A->B->C->E。
```

您将不得不跟踪您很高兴添加的父母的距离。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-12T06:22:03.487

步骤 1：通过 BFS 从源遍历图，并为每个节点分配到源的最小距离

步骤2：分配给目标节点的距离是最短的长度

第三步：从源头开始，沿着最小距离一一增加的所有路径进行DFS搜索，直到到达目标节点或到达最短长度。每当到达目标节点时打印路径。

# .net - Cocoa 有没有类似于 .NET 的 String.IsNullOrEmpty 的功能？

> ID：14144074
> 
> 赞同：2
> 
> 时间：2013-01-03T17:31:23.133
> 
> 标签：.net, string, cocoa, isnullorempty

> **可能重复：**
> [如何在 Objective C 中测试字符串是否为空？](https://stackoverflow.com/questions/899209/how-do-i-test-if-a-string-is-empty-in-objective-c)

我一直在查看 Apple 的文档以寻找一个相对基本的功能，我无法想象他们不会有一个功能来查看一个字符串是空/nil 还是空空格。我也用谷歌搜索过这个。我发现的唯一事情是人们就如何创建自己的函数来测试空字符串提供建议。

在 .NET 中，我要说的是

```
If (String.IsNullOrEmpty(txtTextBox.Text)) {
// Action
} 
```

Cocoa 是否与 .NET 的 String 类中的 IsNullOrEmpty 等效？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T17:42:24.077

> 您可以检查是否`[string length] == 0`. 这将检查它是否是一个有效但为空的字符串 (@"") 以及它是否为 nil，因为在 nil 上调用 length 也将返回 0。

编辑：在阅读了您上面的评论后，我意识到我错过了您对空/零以及空格（技术上不是空的）的担忧之一。我不知道检查所有这三个条件的内置方法，但一个简单的解决方案是在测试期间从字符串中删除空格。例如：

```
NSString *str = @"   ";    //3 white spaces
if([str stringByTrimmingCharacterInSet: [NSCharacterSet whitespaceCharacterSet]] length] == 0)
{
        NSLog(@"String is empty, nil or full of whitespace!");
} 
```

**结果**：`String is empty, nil or full of whitespace`！

`whitespaceAndNewlineCharacterSet`如果更适合您的需求，您也可以使用。我建议创建一个单独的方法，例如`StringIsNullOrEmpty`接受字符串并执行上述测试。

资料来源：[如何在 Objective C 中测试字符串是否为空？](https://stackoverflow.com/questions/899209/how-do-i-test-if-a-string-is-empty-in-objective-c)

# qt - 使用 QT5 库部署的应用程序无法在 Windows 7 上启动

> ID：14144075
> 
> 赞同：32
> 
> 时间：2013-01-03T17:31:23.767
> 
> 标签：qt, qt5

最近，我们一直在将 Windows 上基于 QT 的应用程序从 QT 4.8 迁移到 QT 5，但我们遇到了部署问题。请注意，我们的应用程序没有改变，我们只是使用新的 QT5 框架构建它。经过一番努力，我们用基于 VS2010 的 QT5 库构建了它；我成功地从 Qt Creator 运行了该应用程序。

正如我们对 QT4 所做的那样，我们在安装程序中包含了一组必需的 QT 库。

在我们的测试阶段，当我们在干净的机器上安装我们的 QT5 应用程序时；它不会启动。应用程序不仅没有启动，而且没有输出任何错误。

我们通过依赖检查器运行应用程序；并且根本没有缺少库依赖项。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-03T17:31:23.767

经过几天的搜索没有任何进展，我们偶然发现了一个 QT 错误：

[https://bugreports.qt.io/browse/QTBUG-28766](https://bugreports.qt.io/browse/QTBUG-28766)

对于 QT5，除了预期的 QT 库之外，还有 msvcr100.dll 和 msvcp100.dll；事实证明，您必须通过以下方式发送您的应用程序：

```
platforms/qminimal.dll
platforms/qwindows.dll 
```

也是。在您的本地 QT5 库 install @: \Qt5.0.0\5.0.0\msvc2010\plugins\platforms 中找到了我到处搜索的内容，但我无法在他们的文档中找到此信息。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-01T10:00:22.770

让我运行独立的“Hello World”gui 应用程序（Qt sdk 5.0.1 mingw，Win7 x64）。我需要将下一个文件添加到程序目录：

1.  平台/qwindows.dll
2.  D3DCompiler_43.dll
3.  icudt49.dll
4.  icuin49.dll
5.  icuuc49.dll
6.  libEGL.dll
7.  libgcc_s_sjlj-1.dll
8.  libGLESv2.dll
9.  libstdc++-6.dll
10.  libwinpthread-1.dll
11.  Qt5Core.dll
12.  Qt5Gui.dll
13.  Qt5Widgets.dll

[qt 5.5 doc](http://doc.qt.io/qt-5/windows-deployment.html)中提供的 windows 完整部署信息

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-06-30T23:33:35.617

更好的选择是使用：[windeployqt.exe](http://doc.qt.io/qt-5/windows-deployment.html)。此工具可解决您的 application.exe 的所有依赖项。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-12T17:45:45.780

是的，很好看。我在使用 qt 5.0.2 时遇到了同样的部署问题。

同样在应用程序文件夹中安装了带有这两个 dll 的平台文件夹，现在可以在 vista 和 win7 上进行部署。

Dependency walker 在这里没有帮助，因为它不会将 qwindows.dll 或 qminimal.dll 通知为所需的 dll。

我的 Qt 安装中的平台 dll 位于 \Qt\5.0.2\mingw47_32\plugins\platforms。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-01T21:25:08.677

Qt 平台 dll 位于“qtbase”的“plugins”文件夹中：C:\Qt\5.0.0\qtbase\plugins\platforms

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-12-04T15:09:49.917

记事本教程，win7 & qt5.1.1

部署步骤是：

```
* 将构建模式更改为发布，而不是调试，
* 建造，
* 在某处创建一个输出文件夹
    例如桌面/记事本/
*
* 复制文件到输出文件夹
    文件清单：
    * 来自“workspace_home/build-notepad-xxx-Release/release”
        *记事本.exe
    * 来自“qt_home/5.1.1/msvc2010/bin”
        * icudt51.dll
        * icuin51.dll
        * icuuc51.dll
        * libEGL.dll
        * libGLESv2.dll
        * Qt5Core.dll
        * Qt5Gui.dll
        * Qt5Widgets.dll
        *
    * 来自“qt_home/5.1.1/msvc2010/plugins/platforms”
        *platforms/（需要在输出文件夹中创建这个子文件夹）
            * qwindows.dll
        *
    *
*
* 运行 .exe 文件，确保它工作正常，
*
* 好的
*

```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-22T23:45:54.060

与应用程序位于同一目录中的空*qt.conf*似乎导致在 Windows 7 上启动 Qt5 应用程序时出现问题。尝试将其删除。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-08-03T22:31:05.023

我使用了 QMediaPlayer 和 QMediaPlaylist 的实例，但我的应用程序将不再启动，并出现以下错误：此应用程序无法启动，因为它无法找到或加载 Qt 平台插件“windows”。重新安装应用程序可能会解决此问题。

在花了 4 天试图弄清楚发生了什么之后，我们发现 Qt5Core.dll 中有一个硬编码的路径来加载插件，尤其是文件`wmfengine.dll`. 确保你编译 Qt5Core 时没有这个硬编码路径 (:\Qt\5.5\msvc2010)。

![WinDiff 的屏幕截图](../Images/443d7007b6b4912cab40e9dd26949cc0.png)

插件加载`Qt5Core.dll`失败的硬编码路径`wmfengine.dll`

# c# - 如何在 C# 中使 AxShockwaveFlash 静音

> ID：14144076
> 
> 赞同：0
> 
> 时间：2013-01-03T17:31:25.867
> 
> 标签：c#, axshockwaveflash

我`AxShockwaveFlash`在 Windows 窗体应用程序中使用。我能够管理上下文菜单。我可以管理闪光灯播放的声音`AxShockwaveFlash`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-18T18:24:02.723

Flash ActiveX 本身没有这样的属性或功能，您必须使用 f-in-box 之类的包装器：[f-in-box: how to enable / disable flash sound](http://f-in-box.com/dotnet/features.html#feature_enable_disable_flash_sounds)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T18:15:58.907

我不熟悉那门课，但我快速搜索得到了

`AxShockwaveFlash axShockwaveFlash1 = new AxShockwaveFlash(); axShockwaveFlash1.FlashVars = "auto_play=true&channel=adventuretimed&start_volume=25";`

看起来您可以在 FlashVars 属性中设置音量。

# vb.net - VB.NET | 阅读二进制关闭注册表？

> ID：14144080
> 
> 赞同：0
> 
> 时间：2013-01-03T17:31:35.503
> 
> 标签：vb.net, binary

我正在尝试从我的注册表中读取一个值，但它是 REG_BINARY。它只能从我测试的内容中读取 REG_SZ。

```
MsgBox(My.Computer.Registry.GetValue("PATH", "Name", Nothing)) 
```

如何从注册表中读取二进制文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:37:06.690

[`GetValue()`](http://msdn.microsoft.com/en-US/library/wzw8xe3w.aspx)被宣布返回`Object`。要读取二进制值，您应该只转换结果：

```
Dim value as Object = My.Computer.Registry.GetValue("PATH", "Name", Nothing)
Dim bytes as Byte() = CType(value, Byte()) 
```

# maven - Maven 无法解决依赖关系 - javax.activation

> ID：14144085
> 
> 赞同：9
> 
> 时间：2013-01-03T17:31:53.507
> 
> 标签：maven, maven-2

我有一个使用许多 jars 的工作 maven web 应用程序。尝试添加 javax.activation 并执行 mvn clean install 失败。

我收到“无法在项目 xxx 上执行目标：无法解决中央项目 javax.activation:activation:jar:1.0.2 的依赖项 (http://build02.efollett.com:8081/artifactory/libs-release)

当我检查我的 Maven 存储库时，我在那里看到了激活 jar。例如，导航到 C:\Users\me.m2\repository\javax\activation\activation\1.0.2 我看到以下内容。

```
activation-1.0.2.jar.lastUpdated
activation-1.0.2.pom
activation-1.0.2.pom.sha1
activation-1.0.2.pom.tmp.sha1.tmp 
```

我的同事正在使用相同的 settings.xml，我将本地 pom.xml 与 cvs 中的版本进行了比较。他们都是一样的！对我所缺少的有什么想法吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-05-03T19:37:35.483

Sun 将不允许 Maven 重新分发其二进制文件，包括 JavaMail JAR 和 Activation JAR。相反，所有用户都必须手动安装 Sun 二进制文件，方法是从 Sun 的网站下载它们并运行 mvn install 命令。

**1.下载Java激活框架**

[http://www.oracle.com/technetwork/java/javase/jaf-136260.html](http://www.oracle.com/technetwork/java/javase/jaf-136260.html)

进而

[http://download.oracle.com/otn-pub/java/jaf/1.0.2-fcs/jaf-1_0_2-upd2.zip](http://download.oracle.com/otn-pub/java/jaf/1.0.2-fcs/jaf-1_0_2-upd2.zip)

**2.提取“jaf-1.0.2”**

**3.在文件夹“jaf-1.0.2”运行**

`mvn install:install-file -Dfile=activation.jar -DgroupId=javax.activation -DartifactId=activation -Dversion=1.0.2 -Dpackaging=jar`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T21:37:15.910

您需要的工件是`javax.activation:activation:jar:1.0.2`（注意`jar`部分），而您在仓库中拥有的工件是`javax.activation:activation:pom:1.0.2`. 将`jar`一个放入您的存储库或添加`<classifier>pom</classifier>`到您的`<dependency>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-01T08:14:12.323

将依赖项添加到您的 pop.xml 文件

```
<dependency>
<groupId>javax.activation</groupId>
<artifactId>activation</artifactId>
<version>1.1.1</version> 
```

# eclipse - 无法从 Eclipse 部署 JavaFX 2 jar

> ID：14144090
> 
> 赞同：2
> 
> 时间：2013-01-03T17:32:05.177
> 
> 标签：eclipse, jar, javafx

我有一个使用 JavaFX 2 的 Eclipse 项目。FXML 文件是使用 Scene Builder 生成的。我的目标是创建一个可运行的 Jar。无论我尝试哪种方式，在运行 jar 文件时，我总是会收到 JavAFX 启动器错误“运行应用程序时出现异常”/。堆栈跟踪如下。

如果我使用 JavaFX ant 任务或 javafxpackager 实用程序，结果相同。

```
Exception in Application start method
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.javafx.main.Main.launchApp(Main.java:642)
    at com.javafx.main.Main.main(Main.java:805)
Caused by: java.lang.RuntimeException: Exception in Application start method
    at     com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:403)
    at com.sun.javafx.application.LauncherImpl.access$000(LauncherImpl.java:47)
    at com.sun.javafx.application.LauncherImpl$1.run(LauncherImpl.java:115)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NullPointerException
    at controllers.Main.start(Unknown Source)
    at com.sun.javafx.application.LauncherImpl$5.run(LauncherImpl.java:319)
    at com.sun.javafx.application.PlatformImpl$5.run(PlatformImpl.java:206)
    at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:173)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
    at com.sun.glass.ui.win.WinApplication$3$1.run(WinApplication.java:73)
    ... 1 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T18:37:32.617

问题是代码中的相对路径。在引用图像或 FXML 文件时，我会使用相对路径。这在直接从 Eclipse 运行时工作正常，但不能作为可运行的 jar 工作。将路径更改为绝对解决了问题。

编辑：对于任何偶然发现此错误并使用 Scene Builder 制作 FXML 文件的人，请注意，我必须使用文本编辑器从 Scene Builder 编辑生成的 FXML 文件，以将相对路径转换为绝对路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T01:10:32.797

如果您可以使用 maven ，请按照 [本教程](http://www.zenjava.com/2012/11/24/from-zero-to-javafx-in-5-minutes/)创建可执行的 jar、exe .. 等。

> 适用于 JavaFX 的 Maven 插件：使用此插件可以更轻松地快速启动和运行以及构建复杂的分发包（例如可执行 JAR 文件、本机安装程序和 webstart 包）。

# objective-c - connectionDidFinishLoading 后其他功能不运行？

> ID：14144091
> 
> 赞同：0
> 
> 时间：2013-01-03T17:32:08.280
> 
> 标签：objective-c, ios, uitableview, nsurlconnection

我正在使用 NSUrlConnection 转到 .ashx 文件以执行 MYSQL 语句并返回结果。然后放在桌子上。

在这个特定的一个中，我得到了类别，这一切都很好，并且得到了它应该得到的细节，但是在 connectionDidFinishLoading 函数之后没有其他任何事情发生。

我在它之后和其中的任何地方都放置了断点，但什么也没发生，它只是在它进入桌子之前结束。

以下是我的代码，如果您需要我错过的任何信息，请询问。

.h 文件

```
 #import <UIKit/UIKit.h>

    @interface Category_TableView : UIViewController <NSURLConnectionDelegate>
    {
        sqlite3 *database;
    }
    @property (retain, nonatomic) NSMutableArray *Category_Array;
    @property (strong, nonatomic) IBOutlet UITableView *Category_Table;
    @property (retain, nonatomic) NSString *type;
    @property (retain, nonatomic) NSString *Category;

    @property (retain, nonatomic) NSMutableData *CatData;

    @end 
```

.m 文件

```
 #import "Category_TableView.h"
            #import "Cateogry_Cell.h"
            #import "JobList_Table.h"
            #import "JobList_Cell.h"
            #import <QuartzCore/QuartzCore.h>

            @interface Category_TableView ()

            @end

            @implementation Category_TableView

            - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
            {
                self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
                if (self) {
                    // Custom initialization

                }
                return self;
            }

            - (void)viewDidLoad
            {
                [super viewDidLoad];
                self.navigationController.navigationBar.hidden = YES;
                // Do any additional setup after loading the view.

                NSString *requestURL = [NSString stringWithFormat:@"http://"URL"/forms/AppForms/app_latest.ashx"];
                NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString: requestURL]];
                NSURLConnection *con =[[NSURLConnection alloc] initWithRequest:request delegate:self];

                if(con)
                {
                    self.CatData = [[NSMutableData alloc] init];
                    self.Category_Array = [[NSMutableArray alloc] init];
                }
                else
                {
                    [[[UIAlertView alloc] initWithTitle:@"Error" message:@"Failed to get connection. Please try again later" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil] show];
                }

            }
            - (void)didReceiveMemoryWarning
            {
                [super didReceiveMemoryWarning];
                // Dispose of any resources that can be recreated.
            }
            - (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
            {
                [self.CatData setLength:0];
            }

            - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
            {
                [self.CatData appendData:data];
            }
            - (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
            {

                [[[UIAlertView alloc] initWithTitle:@"Error" message:@"Failed to get connection. Please try again later"  delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil] show];

            }
            - (void)connectionDidFinishLoading:(NSURLConnection *)connection
            {
                NSString *temp = [[NSString alloc] initWithData:self.CatData encoding:NSUTF8StringEncoding];
                NSArray *jobs = [temp componentsSeparatedByString:@"||||"];
                NSMutableDictionary *temp_dict = [[NSMutableDictionary alloc] init];
                NSArray *jobInfo = [[NSArray alloc] init];
                int count = 0;
                for(int i = 1; i < [jobs count]; i++)
                {
                    jobInfo = [[jobs objectAtIndex:i] componentsSeparatedByString:@"||"];
                    @try {

                        temp_dict = [[NSMutableDictionary alloc]init];
                        [temp_dict setObject:[jobInfo objectAtIndex:0] forKey:@"Category"];
                        [self.Category_Array addObject:temp_dict];
                        count++;
                    }
                    @catch (NSException *exception) {

                        [[[UIAlertView alloc] initWithTitle:@"Exception Thrown" message:exception.reason delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil] show];
                    }
                }
            }

            //#pragma mark - Table view data source

            - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
            {

                // Return the number of sections.
                return 1;
            }

            - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
            {
                // Return the number of rows in the section.
                return [self.Category_Array count];
            }

            - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
            {
                static NSString *CellIdentifier = @"Cateogry_Cell";
                Cateogry_Cell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
                // Configure the cell...

                [[[UIAlertView alloc] initWithTitle:@"In Table Function" message:@"Failed to try again later" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil] show];

                if(cell == nil) {
                    cell = [[Cateogry_Cell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cateogry_Cell"];
                }

                NSDictionary *temp = [self.Category_Array objectAtIndex:[indexPath row]];
                cell.Category_Cell_Label.text = [temp objectForKey:@"Category"];

                return cell;
            }

            -(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
            {
                if ([[segue identifier] isEqualToString:@"Cat_Cell_Push"])
                {
                    JobList_Table *DetailController = [segue destinationViewController];
                    NSIndexPath *MyIndexPath = [_Category_Table indexPathForSelectedRow];
                    int row = [MyIndexPath row];
                    DetailController.JobList_Array = @[_Category_Array[row]];

                }
            }

            @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:15:04.760

问题是`NSURLConnection`将异步工作。因此，当您获取数据时，您的 tableview 将已经没有数据填充。所以你需要重新加载你的tableview，只需添加以下代码作为最后一行`connectionDidFinishLoading:`

```
[Category_Table reloadData]; 
```

# r - 使用两个条件更改面板的标签

> ID：14144093
> 
> 赞同：1
> 
> 时间：2013-01-03T17:32:11.690
> 
> 标签：r, lattice

我有一个带有两个条件的格子图：一个条件 (x1) 有 4 个级别，一个条件有 2 个级别 (x2)。该图对每个变量 x1 和 x2 都有一个条纹：

```
df <- data.frame(y = runif(100,0,10)
                 , x1 = rep(c("A","B","C","D"),25)
                 , x2 = as.numeric(c(runif(100)<0.5))
                 )
histogram( ~y | x1 + as.factor(x2), data=df) 
```

我想更改 x1 的级别。

我试过：

```
histogram( ~y | x1 + as.factor(x2)      
          , data=df
          , strip = strip.custom(
                     , factor.levels = c("no","yes"))
                     )
) 
```

但我不知道如何分配级别条件 x2。我很感激任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:05:23.377

[在网上](https://stat.ethz.ch/pipermail/r-help/2006-September/113648.html)搜索找到定义自己的剥离功能的解决方案。

```
my.strip <- function(which.given, ..., factor.levels) {
             levs <- if (which.given == 2) c("no","yes") #levels for your second factor (x2)
                      else c("AAA", "BBB", "CCC", "DDD") #levels for your first factor (x1)
              strip.default(which.given, ..., factor.levels = levs)
           }

histogram( ~y | x1 + as.factor(x2) , data=df, strip = my.strip) 
```

![在此处输入图像描述](../Images/88c40327926c0a4737fe4dbc6f2d3c9b.png)

### 编辑 - 使用 useOuterStrips() 定义自己的条带

```
library(latticeExtra)
useOuterStrips(histogram( ~y | x1 + as.factor(x2) , data=df), 
               strip =strip.custom(factor.levels = c("AAA","BBB","CCC","DDD")),
               strip.left=strip.custom(factor.levels = c("no","yes"))) 
```

![在此处输入图像描述](../Images/e826c590e1ba6e8900d5ffa1ae985fbd.png)

# sql - 如何通过 SQL 向单元格添加值

> ID：14144099
> 
> 赞同：-2
> 
> 时间：2013-01-03T17:32:37.047
> 
> 标签：sql

我只是被要求更新 SQL 中的一个表，该表有一列包含一系列数字。我需要为每个值添加 10，除非它是 0 或 65。

我是 SQL 新手...谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:34:40.130

不再是“新”的最好方法是阅读/练习：[http ://en.wikipedia.org/wiki/Update_%28SQL%29](http://en.wikipedia.org/wiki/Update_%28SQL%29)

话虽如此：

```
UPDATE yourtable
SET yourfield = yourfield + 10
WHERE (yourfield NOT IN (10, 65)) 
```

或者

```
...
WHERE (yourfield <> 10) AND (yourfield <> 65) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:34:39.043

您应该能够使用它`UPDATE`在您的列上执行 a 但排除带有 a`0`或的记录`65`：

```
UPDATE yourtable
SET yourCol = yourCol+10
WHERE yourCol NOT IN (0, 65) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!6/924e4/1)

# delphi - TortoiseSVN 与多个用户

> ID：14144106
> 
> 赞同：0
> 
> 时间：2013-01-03T17:33:03.457
> 
> 标签：delphi, tortoisesvn, delphi-2010

我有一台可供多个用户 RD 使用的服务器。安装的是tortoiseSVN 如果在一个帐户下更改设置会影响另一个用户的设置吗？到目前为止，对于 SVN 客户端来说，Tortoise 看起来是最好的选择，我看到的其他所有东西都只有 OSX、付费软件、英国媒体报道软件，或者有糟糕的文档。关于什么可能是最好的使用的任何建议。开发人员正在使用 Embarcadero 的 Delphi 2010 RAD。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T01:46:34.227

每个操作系统用户帐户都有自己的 Subversion 用户凭据缓存和配置文件`%APPDATA%\Subversion`。所以只要每个人在服务器上都有自己的账号，他们的设置就不会影响其他用户的。

确保每个人都有自己的工作副本——出于多种原因，永远不应该在用户之间共享 WC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:42:57.183

您可以设置 TortoiseSVN 在输入用户凭据后记住它们，或者您可以忽略该选项并让 TortoiseSVN 在每次操作时提示输入凭据。不过，我不知道这是否会影响 IDE 集成，因为我在 Windows 资源管理器中使用 TortoiseSVN，在 IDE 中没有。

# jquery - 无法在单个图像上显示多个工具提示

> ID：14144109
> 
> 赞同：0
> 
> 时间：2013-01-03T17:33:26.830
> 
> 标签：jquery, html, imagemap

请原谅我的冗余代码...我试图创建弹出图像，其中包含使用 jquery 的一些按钮控件。

这是我到目前为止所尝试的： CSS 代码：

> button.button { 颜色：#fff; 背景：#000；字体大小：.8em；字体粗细：粗体；字体系列：Verdana、Arial、Helvetica、sans-serif；边框：实心 1px #ffcf31; }
> .tooltip{
> 背景：透明 url(~/Box.png); 显示：无；
> 高度：180px；
> 填充：0px 0px 10px 30px；宽度：320px；
> 字体大小：14px；
> 颜色：#000; 溢出：自动；边框：2px纯黑色；}

Javascript代码：

```
 $(document).ready(function () {
        $("#Harmful_id").tooltip({
            offset: [10, 2],
            effect: 'slide'
        });
    });
    function replyclick(a) {
        var e = document.getElementById(a);
        if (!e) return true;
        if (e.style.display == "none") {
            e.style.display = "block";
        } else {
            e.style.display = "none"
        }
        return true;
    } 
```

HTML 代码：

```
<img id="continuum" src= "~/abc.png" alt="" usemap="#JQTooltip" style="width: 766px; height: 397px; border:0px"/>
    <map id="JQTooltip_map" name="JQTooltip">
    <area shape="rect" id="Harmful_id" coords="98,158,189,215" href="#" alt="" title=""/></map><div class="tooltip">
     <button type="button" class="button" id="btn1" onclick="replyclick('view1');"><b>1.</b></button><b onclick="replyclick('view1');"><u>Definition</u></b><div id="view1" style="display:none">Bla bla bla</div> 
```

这仅适用于图像映射的 1 部分，即 coords="98,158,189,215"。我想在同一图像上映射其他坐标。

我想知道我应该做些什么改变来适应映射其他坐标！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:47:03.777

你可能想看看这个答案：

[使用带有 HTML 图像映射的 JQuery 悬停](https://stackoverflow.com/questions/745110/using-jquery-hover-with-html-image-map)

具体来说，这个插件看起来非常健壮并且有很多很酷的功能：

[图像映射器](http://www.outsharked.com/imagemapster/)

# excel - MS Office VBA 从 2003 到 2010 的变化

> ID：14144111
> 
> 赞同：3
> 
> 时间：2013-01-03T17:33:32.107
> 
> 标签：excel, ms-access, vba, ms-office

在我公司，IT 部门最终决定从 MS Office 2003 切换到 2010。在我的部门，我们开发了许多在 VBA 上运行的小型应用程序。特别是所有这些都是在 MS Excel 和 MS Access 中编程的。现在几周前，我们收到了一台用于测试我们的应用程序的 PC -> 当然，没有任何应用程序真正按照预期的方式运行。

所以我的问题是，是否有任何信息来源可以告知从 Office 2003 到 2007 以及从 2007 到 2010 所做的所有更改 - 特别是关于 VBA 语法和功能。我读了一些关于单个更改的内容，但找不到摘要。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T17:48:56.350

VBA 本身几乎没有变化。VBA 从版本 6 升级到版本 7，但唯一真正的变化是包含了对 64 位 API 调用的支持。请参阅[VBA 6.0 和 VBA 7.0 之间有什么区别？](https://stackoverflow.com/q/3072356/154439)更多细节。

但是，Excel、Access、Word、Outlook 等的库（及其关联的对象模型）将发生重大变化。对象模型变化的最佳资源是每个项目的官方 MS 开发人员参考。每个参考文献的开头都包含一个标题为“有什么新内容？”的部分。

为方便起见，我将提供您特别提到的链接：

*   [Excel 2007 - 有什么新功能？](http://msdn.microsoft.com/en-us/library/office/bb149069(v=office.12).aspx)
*   [Excel 2010 - 有什么新功能？](http://msdn.microsoft.com/en-us/library/office/ff846371(v=office.14).aspx)
*   [Access 2007 - 有什么新功能？](http://msdn.microsoft.com/en-us/library/office/bb245502(v=office.12).aspx)
*   [Access 2010 - 有什么新功能？](http://msdn.microsoft.com/en-us/library/office/ff841287%28v=office.14%29.aspx)

# java - Spring Security 数据库授权

> ID：14144112
> 
> 赞同：2
> 
> 时间：2013-01-03T17:33:32.793
> 
> 标签：java, forms, spring, security, login

我正在尝试使用 Spring Security 3.1.3 来保护 Web 应用程序。

目前我已经设置了一个简单的登录表单，它与在 security-app-context.xml 上硬编码的用户一起使用。现在我正试图继续让 spring 验证数据库中的用户，这就是我遇到的问题。
从我目前得到的信息来看，我需要在 applicationContext.xml 上为数据源放置一个 bean，然后在 security-app-context.xml 文件中引用该数据源：

应用contex.xml：

```
<bean id="dataSource"
  class="org.springframework.jdbc.datasource.DriverManagerDataSource">

  <property name="driverClassName" value="com.mysql.jdbc.Driver" />
  <property name="url" value="jdbc:mysql://localhost:3306/webproject" />
  <property name="username" value="root" />
  <property name="password" value="root" />
</bean> 
```

安全应用上下文.xml

```
<authentication-manager>
    <authentication-provider>            
        <jdbc-user-service data-source-ref="dataSource" />
    </authentication-provider>
</authentication-manager> 
```

但是当我这样做时，从数据库对用户进行身份验证不起作用。没有提出任何例外。

数据库上有两个表，用户（用户名，密码，启用）和权限（用户名，角色名）。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:58:02.133

我没有足够的声誉来发表评论。无论如何我都不打算给出准确的答案。

我有几个猜测：

*   您确定角色的数据库列名称是*角色*名称吗？没有权威？如果没有明确提供，也许 Spring 会寻找一些默认名称。此行将定义您希望它运行的确切查询：

    ```
    <authentication-manager>
                <authentication-provider>
                            <jdbc-user-service data-source-ref="dataSource" 
                   users-by-username-query="
                      select username,password, enabled 
                      from users where username=?" 
                   authorities-by-username-query="
                      select u.username, ur.authority from users u, user_roles ur 
                      where u.user_id = ur.user_id and u.username=?" 
                     />
                </authentication-provider>
    </authentication-manager> 
    ```

*   您是否在 web.xml 中添加了安全过滤器？

*   或者你的表应该有一些默认名称，比如**用户**？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T21:48:55.133

您的数据库架构是错误的，`authorities`没有一`roleName`列，而是一`authority`列。根据[文档](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/appendix-schema.html)，所需的 SQL 语句是：

```
create table users(
    username varchar_ignorecase(50) not null primary key,
    password varchar_ignorecase(50) not null,
    enabled boolean not null);

create table authorities (
    username varchar_ignorecase(50) not null,
    authority varchar_ignorecase(50) not null,
    constraint fk_authorities_users foreign key(username) references users(username));
    create unique index ix_auth_username on authorities (username,authority); 
```

哦，每当您遇到 Spring Security 问题时，我建议您[启用调试日志记录](http://static.springsource.org/spring-security/site/start-here.html)——那里有很多有价值的信息。

# wordpress - Gravity Forms Salesforce API 插件 - 字段映射未保存

> ID：14144115
> 
> 赞同：0
> 
> 时间：2013-01-03T17:33:45.733
> 
> 标签：wordpress, salesforce

我正在使用 WP 3.5、Gravity Forms 1.6.11 和 Gravity Forms Salesforce API Add-On 2.2.3（未激活 Web-to-Leads 插件）和无限 Salesforce 帐户。

在我保存提要并返回其中然后刷新对象和字段之前，我遇到了字段列表不显示的问题。一旦字段显示，我映射它们并单击更新提要，所有字段，包括映射，再次消失。

我已停用甚至删除并重新安装了 Gravity Forms Salesforce API 插件，但行为没有改变。有什么建议么？

# ember.js - Ember.js - 路由到第一项的更好方法

> ID：14144119
> 
> 赞同：1
> 
> 时间：2013-01-03T17:33:54.720
> 
> 标签：ember.js

我有一个 ArrayController ，我想在第一次访问视图时显示第一项的内容，目前我正在这样做：

```
App.SomeController = Em.ArrayController.extend
  content: Ember.A()
  active: null

  contentDidLoad: ( ->
    return unless @get('content.isLoaded') || @get('content.length') == 0 || @get('active')

    @set('active', @get('firstObject'))
    App.get('router').transitionTo('root.inbox.email', @get('active'))
  ).observes('content.isLoaded') 
```

我不喜欢从控制器这样调用路由器。

通常显示内容的方式是通过单击这样的操作助手来实现的：

```
<div {{action showEmail view.content href="true"}}> 
```

但显然页面首次加载时不会发生点击。

有没有更好的办法？

# c++ - 如何为类模板生成别名？

> ID：14144122
> 
> 赞同：1
> 
> 时间：2013-01-03T17:34:03.190
> 
> 标签：c++, templates, alias

我希望 MyVector 可以选择 std::vector 或 boost::container::vector。如何实施？我可以使用宏，但有人告诉我它们不是很安全。谢谢。

```
#define MyVector std::vector
// #define MyVector boost::container::vector 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T17:35:30.333

C++11 有别名模板。你可以做：

```
template <typename T>
using MyVector = std::vector<T>;
//using MyVector = boost::container::vector<T>; 
```

然后像这样使用它：

```
MyVector<int> x; 
```

在 C++03 中，您可以使用宏或元函数。

```
template <typename T>
struct MyVector {
    typedef std::vector<T> type;
    //typedef boost::container::vector<T> type;
};
// usage is a bit tricky
MyVector<int>::type x;
// ... or when used in a template
typename MyVector<T>::type x; 
```

# ms-access - 在 Access 2010 中删除相反的值

> ID：14144123
> 
> 赞同：0
> 
> 时间：2013-01-03T17:34:08.290
> 
> 标签：ms-access, duplicates, ms-access-2010

我有一个数据库，其中包含几个月的数据，需要在报告之前对其进行清理。但是，在尝试清理它时，我了解到有些问题会使事情变得非常复杂。首先，背景。

1.  我必须查看三个状态代码：1（已批准）、3（已撤销）和 4（已撤销）。

2.  每个状态 4 都可以归因于状态 1 或状态 3。在理想情况下，状态 1 会在输入 4 后立即更改为状态 3，但这并不总是发生在报告的时间范围内我们得到然后将其导入数据库。

3.  状态 4s 有一个负数，是一个反转。这个数量抵消了 1 或 3 的数量。

4.  每条记录都有两个单独的识别号，并且 4 状态记录不会匹配 1 或 3 记录，除非它的数量为负数，并且在几乎所有情况下服务日期都会匹配。

5.  每条记录还有一个识别客户 ID，这有助于我手动将 4s 与 1s 和 3s 匹配。

现在，问题：

如何编写基本上执行以下操作的查询：

如果两条记录之间的服务日期和客户 ID 匹配，并且记录 1 的数量抵消了记录 2 的数量（qtyR1+qtyR2=0），则删除两条记录。或者至少删除状态 1 或状态 3 记录，因为这样我可以轻松地为状态 4 记录编写删除查询。

我很乐意回答任何问题，因为我不确定我是否完全清楚背景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:14:10.100

这确实会删除 qtyR1+qtyR2=0 开头的记录：

```
DELETE *
FROM myTable A
WHERE
    EXISTS (
        SELECT * FROM myTable B
        WHERE
            B.CustID = A.CustID AND
            B.Date = A.Date AND
            ((A.Status = 1 AND B.Status = 2) OR (A.Status = 2 AND B.Status = 1)) AND
            A.Quantity + B.Quantity = 0
    ) 
```

# .net - WPF - 从按钮事件添加控件

> ID：14144127
> 
> 赞同：0
> 
> 时间：2013-01-03T17:34:19.207
> 
> 标签：.net, wpf, vb.net

我目前正在后面的代码中添加控件，然后遍历可视化树以检索值。

```
<StackPanel Name="StackPanel1/>

Dim _TextBox As New TextBox()
StackPanel1.children.insert(index, _TextBox) 
```

有一个按钮单击事件，用户可以向堆栈面板添加一个额外的文本框。

我认为 itemscontrol 会更有说服力，并且更适合 MVVM 模式。我不确定设置它的最佳方法是允许用户删除面板中任何给定索引处的文本框。您是否还需要遍历树以获得他们选择删除的控件的适当索引？目前，随着控件的添加，控件旁边会添加一个删除按钮。然后我可以遍历树并获取索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:24:46.557

一种方法是使用 a `DataTemplate`on an `ItemsControl`（就像你说的那样），`DataTemplate`可以附加删除按钮以从`ItemsControl`. 这只是一个简单的示例，您应该实现`CommandBindings`而不是我添加的事件处理程序

示例代码在 c# 中，但它非常简单，我相信你可以很容易地转换它

xml:

```
 <Window x:Class="WpfApplication4.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="300" Width="400" Name="UI" >

    <Window.Resources>
        <DataTemplate x:Key="itemTemplate" >
            <StackPanel Orientation="Horizontal">
                <TextBox x:Name="txtbx" Text="{Binding Value}" HorizontalAlignment="Left" Width="175"  />
                <Button Content="X" Width="{Binding ElementName=txtbx, Path=ActualHeight}"  HorizontalAlignment="Right" Click="Button_Click" Tag="{Binding}" />
            </StackPanel>
        </DataTemplate>
    </Window.Resources>

    <Grid>
        <ItemsControl ItemTemplate="{StaticResource itemTemplate}" Name="itemsControl" ItemsSource="{Binding ElementName=UI, Path=Models}" Margin="0,40,0,0" />
        <Button Content="Add" Height="23" HorizontalAlignment="Left" Margin="3,8,0,0" Name="Button_Add" VerticalAlignment="Top" Width="75" Click="Button_Add_Click" />
    </Grid>
</Window> 
```

代码：

```
public partial class MainWindow : Window
{
    private ObservableCollection<MyModel> _models = new ObservableCollection<MyModel>();

    public MainWindow()
    {
        InitializeComponent();
    }

    public ObservableCollection<MyModel> Models
    {
        get { return _models; }
        set { _models = value; }
    }

    private void Button_Add_Click(object sender, RoutedEventArgs e)
    {
        Models.Add(new MyModel());
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        Models.Remove((sender as Button).Tag as MyModel);
    }
}

public  class MyModel : INotifyPropertyChanged
{
    private string _value;

    public string Value 
    {
        get { return _value; }
        set { _value = value; NotifyPropertyChanged("Value"); } 
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

# sql - 多源一张表（一对一） - 数据库设计

> ID：14144130
> 
> 赞同：-1
> 
> 时间：2013-01-03T17:34:21.630
> 
> 标签：sql, database, postgresql, database-design

我有一个“文本”表，文本表可能来自不同的来源，如 Tweet、SMS、电子邮件等，每个来源都有自己的日志，文本来自来源。所以我提出了一些解决方案，但我不知道哪个是最好的。

**解决方案 1：**

```
Text(
text_id PK
content
source_type (tweet, sms, email, etc)
source_id (can't be FK since it may contain sms_id, tweet_id, or email_id)
)

Tweet(
tweet_id PK
tweet_text
tweet_username
etc...
)

Sms(
sms_id PK
sms_text
sender_number
etc...
)

Email(
email_id PK
email_text
email_sender
etc...
) 
```

**解决方案 2：**

```
Text(
text_id PK
content
sms_id FK
tweet_id FK
email_id FK
)

Tweet(
tweet_id PK
tweet_text
tweet_username
etc...
)

Sms(
sms_id PK
sms_text
sender_number
etc...
)

Email(
email_id PK
email_text
email_sender
etc...
) 
```

请注意，一个“文本”仅来自一个来源。

所以如果我使用解决方案 2，假设来源来自短信，那么数据将如下所示

```
Text(
12
'the text'
333
null
null
)

Sms(
333
'the text'
0818833733664
etc...
) 
```

那么哪个是最好的方法？

**更新 ：**

我错过了我的问题的很大一部分，这可能是错的，对此感到抱歉。在我的情况下，文本也可能来自 csv(excell) 文件。这意味着一个文件可能有很多文本，因为该文件是许多文本（逗号或行分隔）的转储。SMS、Tweet 和 Email 与 Text 的关系是一对一的，但 File with Text 是一对多的，所以我的问题中最大的缺失部分是 File Table

```
File(
file_id PK
file_name
etc..
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:48:41.847

尝试创建一个名为的附加表`text_source`，然后让每个源（即 SMS、电子邮件等）通过 FK 引用它`text_source_id`。这样，你可以让你的`text`桌子只有一个`text_source_id`.

IE

`Text`表 --FK-->`text_source`表 <--FK-- `SMS`, `Email`,`Tweet`

# c# - 使用三元运算符了解 C# 编译错误

> ID：14144131
> 
> 赞同：3
> 
> 时间：2013-01-03T17:34:28.333
> 
> 标签：c#, inheritance, if-statement, ternary-operator

我从`Wrox Professional ASP.NET 4.0 MVC 4`本书第 179 页（“了解 Web 应用程序中的安全向量”一章）中复制了以下代码，`protected`并在我的抽象应用程序范围内将其制作并存储为实用方法进行了少许修改`Controller`

```
protected ActionResult RedirectToLocal(string returnUrl)
{
    if (Url.IsLocalUrl(returnUrl))
    {
        return Redirect(returnUrl);
    }
    else
    {
        return RedirectToAction("Index", "Home");
    }
} 
```

上面的代码旨在保护 MVC 应用程序免受开放重定向攻击，这不是问题的主题。

代码显然格式正确，可以编译，我相信它可以工作。

当“巧妙地”将上面的代码更改为以下单行代码时，就会出现问题

```
return (Url.IsLocalUrl(returnUrl)) ? Redirect(returnUrl) : RedirectToAction("Index", "Home"); 
```

上面的单行代码应该与扩展代码完全相同（不，ReSharper 没有建议我替换，这是我的倡议）。

编译错误如下：`there is no implicit conversion between System.Web.Mvc.RedirectResult and System.Web.Mvc.RedirectToRouteResult`.

然后 ReSharper 提供帮助并建议进行以下修改

```
return (Url.IsLocalUrl(returnUrl)) ? (ActionResult) Redirect(returnUrl) : RedirectToAction("Index", "Home"); 
```

### 问题是“为什么我必须强制转换重定向方法”？

由于两者都`Redirect`返回`RedirectToAction`一个子类`ActionResult`（通过 F12 验证）并且该子类是函数的返回值，因此它应该是自动兼容的。或者至少，根据我对 C# 的了解，两种代码都可以编译，或者它们都不能编译。

更笼统地说，这个问题可以重新表述如下：

假设我有 A、B 和 C 类

```
abstract class A {}
class B: A{}
class C: A{} 
```

并假设以下功能有效

```
private A Function(){
    if (condition) return new B();
    else return new C();
} 
```

为什么以下单行代码无法编译？

```
private A Function(){
    return (condition) ? new B(): new C();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T17:37:32.150

它不会编译，因为编译器根据两个返回值之一决定单行器的返回类型是什么。由于类型 B 不是从类型 C 派生的，或者相反，这两种类型不是互斥的，并且 if （作为一个整体）的返回类型不能以这种方式派生。

如果您想在单行中执行此操作，则必须将返回值强制转换为您要返回的类型，即类型 A。

```
private A Function(){
    return (condition) ? ((A)new B()): ((A)new C());
} 
```

更新：我没有看到你已经在你的问题中做了演员，我很抱歉。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T17:38:47.017

编译器期望条件语句中的返回类型相同，因此它期望这两个是相同的类型。如果您将选项转换为 ActionResult，它将起作用。您可以通过只转换最后一个来与编译器相处。

```
return (Url.IsLocalUrl(returnUrl)) ? (ActionResult)Redirect(returnUrl) : (ActionResult)RedirectToAction("Index", "Home"); 
```

# javascript - 为什么 Firefox 和 Chrome 会为 iframe 的长度返回不同的值？

> ID：14144132
> 
> 赞同：0
> 
> 时间：2013-01-03T17:34:34.067
> 
> 标签：javascript, google-chrome, firefox, iframe

为什么 Firefox 可以获取“iframe”长度，但 Chrome 无法获取长度？

Firefox 获取“2”。Chrome 获取“0”。

Javascript：

```
$(document).ready(function(e) {
    var frames = window.parent.frames; 
    for (var i = 0; i < frames.length; i++) { 
          alert(frames[i].window.document.getElementsByTagName('body')[0].getElementsByTagName('iframe').length);
    }
} 
```

HTML：

```
<frameset name="topFrame" id="topFrame" rows="112px,42px,7px,*" cols="*" border="0" framespacing="0">   
<frame src="top_1.html" name="topFrame" frameborder="no" scrolling="No" noresize="noresize" id="topFrame" title="topFrame"></frame>
<frame src="top_2.html" name="mainFrame" frameborder="no" scrolling="No" noresize="noresize" id="mainFrame" title="mainFrame"></frame>
<frame src="top_3.html" name="switch2Frame" frameborder="no" scrolling="No" noresize="noresize" id="switch2Frame" title="switch2Frame"></frame>
<frameset rows="40px,*" cols="*" border="0" framespacing="0">
    <frame src="tag.html" name="tagFrame" frameborder="no" id="tagFrame" title="tagFrame" scrolling="no"></frame>
        <frameset name="myFrame" id="myFrame" cols="200px,7px,*" rows="*" border="0" framespacing="0">          
            <frame src="left.html" name="leftFrame" frameborder="no" scrolling="No" noresize="noresize" id="leftFrame" title="leftFrame"></frame>       
            <frame src="switch.html" name="switchFrame" frameborder="no" scrolling="No" noresize="noresize" id="switchFrame" title="switchFrame"></frame>       
            <frame src="main.html" name="manFrame" class="manFrame" frameborder="no" scrolling="No" noresize="noresize" id="manFrame" title="test">
               <html xmlns="http://www.w3.org/1999/xhtml"><head>
               <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
               <title>Untitled Document</title>
               </head>
               <body>

              <iframe src="show.html" title="test" mid="105" frameborder="0" class="show" style="display: block;">
              </iframe>
              <iframe src="show_1.html" title="test" mid="200" frameborder="0" style="display: none;">
              </iframe>

              </body></html>
               </frame> 

        </frameset> 
    </frameset> 
</frameset><noframes></noframes> 
```

# apache - 在访问日志中禁用查询字符串

> ID：14144133
> 
> 赞同：9
> 
> 时间：2013-01-03T17:34:36.873
> 
> 标签：apache, logging

长话短说，用户密码是通过 url 传递纯文本的（可怕，是的，但不是我的想法），并且这个查询字符串被存储在访问日志中，我们显然不希望如此明显。

有没有办法在不禁用 CustomLog 的情况下防止查询字符串存储在访问日志中？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-03T19:23:08.173

您的`common`日志格式包括`%r`（请求的第一行）中的查询字符串

您可以做的是添加新的日志格式（保留旧的以供参考，无需删除）

```
LogFormat "%h %l %u %t \"%m %U %H\" %>s %b" common_no_querystring 
```

其中`%m`是方法 (GET/POST)，`%U`是不带查询字符串的请求 URL ，是请求`%H`的 HTTP 版本。这将输出与 相同的行`%r`，但查询字符串除外。

然后您需要做的就是将 customlog 行更改为；

```
CustomLog "logs/access.log" common_no_querystring 
```

并且您将不再在日志中获得查询字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T18:19:23.287

看看[自定义日志格式](http://httpd.apache.org/docs/2.2/mod/mod_log_config.html#formats)，特别是

```
%U  The URL path requested, not including any query string. 
```

# php - 我可以在 PHP 中使用 filemtime('style.css') 来强制浏览器重新加载 CSS 吗？

> ID：14144137
> 
> 赞同：1
> 
> 时间：2013-01-03T17:34:47.707
> 
> 标签：php, css, caching, browser-cache

我可以在 PHP 中使用 filemtime 来强制浏览器重新加载 CSS 吗？

```
 $mtime = filemtime('style.css');
 echo "\style.css?mod=" . $mtime; 
```

文件时间太慢了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T17:35:59.363

`filemtime`*正常情况下*应该没问题。

您还可以查看 E-Tags，让 Apache 为您完成这项工作。

# asp.net-mvc - 通过 mvc 3 页面上的 ajax 调用保存问题（内容）的答案？

> ID：14144142
> 
> 赞同：0
> 
> 时间：2013-01-03T17:35:09.513
> 
> 标签：asp.net-mvc, asp.net-ajax

我有一个问题列表，我想通过 ajax 调用保存用户答案。例如，我有 50 个问题，不确定是否需要遍历所有 50 个问题并将每个答案发送到控制器（保存），或者是否可以将结果作为大数据发送到控制器。

我的观点：

```
@using COPSGMIS;
@model IEnumerable<COPSGMIS.Models.Quiz>

@{
    ViewBag.Title = "Questionaire";
}
<h2>Questionaire</h2>
  <input type="hidden" id="currentstep" name="currentstep" />
   @using (Html.BeginForm("Questionaire", "Question", FormMethod.Post, new { id = "SignupForm" }))
   {
       <div id="wizardtemplate">       
            @foreach (var step in Model)       
            {
              <fieldset class="wizard">
                <div class="page_Title"> @Html.DisplayFor(modelItem => step.Title)</div>               
                @foreach (var question in step.Results)
                {
                ... code removed ....
                <label for="question">@Html.DisplayFor(modelItem => question.NumberedQuestion)</label>  
                 @Html.Raw(Html.DisplayControl(question.QuestionID, question.Choices, question.AnswerValue,question.ControlType)) 
                 </div>                               
                 @Html.Partial("_Comment", question)
               <hr />
                }
              </fieldset>
            } 
```

呈现的 HTML：

```
<label for="question">3\. This is a sample question (2) for the questionare?</label>  
                 <div class='answer'><input type='date' id='3' name='3' value='2012-12-10' /></div> 
                 </div>                               
 ... code removed ....

 <label for="question">4\. This is a sample question (3) for the questionare?</label>  
                 <div class='answer'><input type='text' id='4' name='4' value='999' /></div> 
                 </div> 
```

模型：

```
 public class Quiz
    {
        public int ReviewID { get; set; }
        public int StepID { get; set; }
        public string Title { get; set; }
        public virtual IEnumerable<Result> Results { get; set; }
    } 
```

阿贾克斯调用：

```
function SaveAnswer(//not sure what needs to be passed) {

    $.ajax({
        url: '/Question/SaveQuestionaire',
        type: 'POST',
        cache: false,
        dataType: 'json',
        data: ({
            // not sure what this will look like?
        }),
        error: function (jqXHR, textStatus, errorThrown) {
            alert(errorThrown);
        },
        success: function (json) {
            // Message to confirm save
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:42:53.360

为了便于使用，很容易为每个问题发送一个 AJAX 请求。但是，您应该能够将一组条目推送到服务器，并将其解释为一组对象。

您可以像这样构建一个数组：

```
var array = [];

for (var i = 0; ...)
   array.push(items[i]); 
```

然后将阵列推送到服务器。

由于您正在构建一个大型表单，您还可以尝试执行以下操作：

```
 $.ajax({
        url: '/Question/SaveQuestionaire',
        type: 'POST',
        cache: false,
        dataType: 'json',
        data: $("#SignupForm").serialize(), // creates an object for you 
```

但要让它工作，你必须小心它生成的 ID，因为它用于重新创建对象数组。不确定您采用的方法是否适合这一点。

# google-app-engine - 将参数传递给 python 中的 webapp2.RequestHandler 对象

> ID：14144150
> 
> 赞同：7
> 
> 时间：2013-01-03T17:35:38.667
> 
> 标签：google-app-engine, python-2.7, webapp2

创建 WSGIApplication 实例时，有什么方法可以将参数传递给 RequestHandler 对象？

我是说

```
app = webapp2.WSGIApplication([
    ('/', MainHandler),
    ('/route1', Handler1),
    ('/route2', Handler2)
], debug=True) 
```

是否可以将一些参数传递给`MainHandler`,`Handler1`或`Handler2`？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T17:40:18.380

本质上，您在 URL 中传递“参数”。

```
class BlogArchiveHandler(webapp2.RequestHandler):
    def get(self, year=None, month=None):
        self.response.write('Hello, keyword arguments world!')

app = webapp2.WSGIApplication([
    webapp2.Route('/<year:\d{4}>/<month:\d{2}>', handler=BlogArchiveHandler, name='blog-archive'),
])` 
```

从这里开始：[功能](http://webapp-improved.appspot.com/features.html)

上面链接的页面不再存在。可以在[此处](http://webapp2.readthedocs.io/en/latest/guide/routing.html#extended-routes "webapp2 扩展路由")找到等效文档。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-10T10:25:26.280

您还可以通过配置字典传递参数。

首先定义一个配置：

```
import webapp2

config = {'foo': 'bar'}

app = webapp2.WSGIApplication(routes=[
    (r'/', 'handlers.MyHandler'),
], config=config) 
```

然后根据需要访问它。在 RequestHandler 中，例如：

```
import webapp2

class MyHandler(webapp2.RequestHandler):
    def get(self):
        foo = self.app.config.get('foo')
        self.response.write('foo value is %s' % foo) 
```

从这里开始：[webapp2 文档](http://webapp2.readthedocs.io/en/latest/guide/app.html#config)

# multithreading - 使用 XML::Writer 编写 XML 时的线程问题

> ID：14144151
> 
> 赞同：0
> 
> 时间：2013-01-03T17:35:41.643
> 
> 标签：multithreading, perl

我是 Perl 的新手，并尝试使用 XML::Writer 将并行进程的输出写入 XML 文件，并看到生成的 XML 中缺少某些进程输出。

请帮助我使 $xmlWriter 是线程安全的，这样在编写输出时不会有任何问题。

我正在使用 ForkManager 生成并行处理

```
 my $xmlWriter = XML::Writer->new( OUTPUT => output.xml )
    ...
    $pm = new ForkManager(50);
    $xmlWriter->startTag("report");
    foreach $cmd(@cmdList) {
        $pid = $pm->start($cmd) and next;
        timeout 300 => sub {
            $status= system($cmd);
            ....
            $xmlWriter->startTag("task","command"=>"$cmd");
            $xmlWriter->startTag("status");
            $xmlWriter->characters("$status");
            $xmlWriter->endTag("status");
            $xmlWriter->endTag("task");
        }
    }
    $xmlWriter->endTag("report");
... 
```

我也尝试将 $xmlWriter 作为`thread::shared`变量并`lock($xmlWriter)`在写入 XML 之前，但面临同样的问题。

感谢您对此的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T17:50:04.280

不知道要开始。

1.  您获得了 XML::Writer 对象的多个独立副本，它们都构建了同一个 XML 文档。那不适合工作。
2.  您有多个进程都使用相同的文件句柄。
3.  共享一个非共享变量以便您可以锁定它绝对没有意义。如果不共享，锁定有什么帮助？

您需要将自己限制为一个 XML::Writer 对象。让所有工作人员将其输出发送回父级，并让父级根据发送的数据创建 XML。

[如果您使用Parallel::ForkManager](http://search.cpan.org/perldoc?Parallel%3a%3aForkManager)，将按照文档的“数据结构检索”中的示例发回输出。

# perl - 有没有办法使用 Perl 的 DBIx::Class 中的 SQL 函数来过滤列？

> ID：14144155
> 
> 赞同：0
> 
> 时间：2013-01-03T17:35:55.270
> 
> 标签：perl, postgis, dbix-class

我正在使用带有 PostGIS 几何列的 PostgreSQL 数据库。

我想配置 Result 类，以便几何列使用 ST_AsEWKT 函数膨胀并使用 ST_GeomFromEWKT 函数放气。

Is there a way to do this so that the "find" method works as normal, and so that the "update" and "create" methods also work as normal. I'd rather not have to write specialized queries for each table, if I can avoid it.

I can use a hack for inflating the column, e.g.

```
__PACKAGE__->inflate_column( 'geo', {
  inflate => sub {
    my ($raw_value, $result) = @_;
    my $col = $result->result_source->resultset->get_column("geo")->func("ST_AsEWKT");
  },
}); 
```

but I am unsure how to implement deflation.

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:42:44.900

我有一个使用 DBIx::Class::InflateColumn 的工作解决方案。这并不理想，因为它为每个几何列对数据库进行单独的查询。（理想情况下，应该有一种方法告诉 DBIC 只使用适当的函数来查询该字段，如果这甚至可以在不更改 DBIC 的情况下完成的话。）

答案如下。

```
__PACKAGE__->load_components("InflateColumn");

__PACKAGE__->inflate_column( 'geo', {

  inflate => sub {
    my ($value, $result) = @_;

    my $dbh = $result->result_source->storage->dbh;
    my $sth = $dbh->prepare( q{SELECT ST_AsEWKT(?)} );
    $sth->execute( $value );
    my @row = $sth->fetchrow;

    return $row[0];
  },

  deflate => sub {
    my ($value, $result) = @_;

    my $dbh = $result->result_source->storage->dbh;
    my $sth = $dbh->prepare( q{SELECT ST_GeomFromEWKT(?)} );
    $sth->execute( $value );
    my @row = $sth->fetchrow;

    return $row[0];
  },

}); 
```

# sql - 任何想法为什么我在这个 Sql 字符串中收到“数据类型不匹配”错误？

> ID：14144167
> 
> 赞同：0
> 
> 时间：2013-01-03T17:36:45.107
> 
> 标签：sql, vb.net, ms-access

我正在使用 Visual Basic Express 2010 并且正在使用 Access 数据库

`Dim count as Integer`

`SQL = "SELECT * FROM transac WHERE transac_id = " & "'" & count & "'"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T17:41:37.100

我会假设您`transac_id`是一种`INT`数据类型，并且您将单引号放在`count`使其成为字符串的周围。

尝试：

```
SQL = "SELECT * FROM transac WHERE transac_id = " & count 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T17:41:33.063

```
"select * from transac where transac_id = " & count; 
```

# matlab - 如果 RAM 使用量超过指定量，请立即停止 MATLAB。有办法吗？

> ID：14144168
> 
> 赞同：12
> 
> 时间：2013-01-03T17:36:46.633
> 
> 标签：matlab, memory-management, error-handling, ram

标题说明了一切。

基本上，每次我错误地让 MATLAB 使用大量 RAM 进行具有许多我正在创建的参数的模拟时，我都厌倦了必须重置我的 comp。

如果 RAM 使用量开始超过我的总 RAM 的指定百分比，有没有办法让它停止/出错？

我知道我在分配内存的每个地方都放置了 try/catch，但这是针对已经编写好的程序，而且，为了将来参考，我希望能够在开始时设置一个参数并完成它。

有办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T18:12:24.617

您可以为进程组设置虚拟内存配额。在 Windows 上使用 Job 对象。在 *nix 上使用`ulimit`. 这适用于任何过程，而不仅仅是 MatLab。

看

*   [设置 Windows 进程（或用户）内存限制](https://stackoverflow.com/q/192876/103167)
*   [这个答案显示它适用于 Linux](https://stackoverflow.com/a/1016640/103167)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-03T17:52:16.790

您看到的问题发生在 Matlab 开始使用虚拟内存时。您通常应该能够通过任务管理器终止 Matlab 进程，但这并不总是可取的。不幸的是，没有简单的 Matlab 内部开关可以全局限制最大数组大小。

你可以做的是让交换文件的大小非常小，这样Matlab就不能真正写太多，但这可能反过来影响其他程序的性能。[其他非 Matlab 解决方案是切换到 Linux（您可以在其中更轻松地为程序设置内存限制，有关在 Windows 和 Linux](https://stackoverflow.com/a/14144675/232610)上设置限制的详细信息，请参阅@BenVoigt 的答案），或者在虚拟机中运行所有内容。

为了将来参考，在我的模拟中，我在我的预分配开始时有一个方法（子函数，如果你不想这样做，OOP），它计算给定模拟参数的估计总内存使用量（# of elements我将使用乘以 8 作为双精度的所有大型数组都是以字节为单位的内存），并且在使用太多 RAM 时会引发错误。

这是一个快速内存检查的示例。我知道我将分配 3 个 m×3×t 数组和 5 个 m×t 数组，它们都是双倍的。

```
maxMemFrac = 0.8; %# I want to use at most 80% of the available memory

numElements = 3 * (m * 3 * t) + 5 * (m * t);
numBytesNeeded = numElements * 8; %# I use double

%# read available memory
[~,memStats] = memory;

if numBytesNeeded > memStats.PhysicalMemory.Available * maxMemFrac
   error('MYSIM:OUTOFMEMORY','too much memory would be needed')
end 
```

# php - 将值从 Javascript 传递到 PHP

> ID：14144172
> 
> 赞同：-7
> 
> 时间：2013-01-03T17:37:07.223
> 
> 标签：php, javascript

> **可能重复：**
> [如何将 JS 变量传递给 php？](https://stackoverflow.com/questions/3920209/how-to-pass-js-variable-to-php)

如何将值从 Javascript 代码传递给 PHP 变量。

假设我们有这个：

```
aa = $("#amount").text($("#progressbar").progressbar("option", "value")+"%"); 
```

在 Javascript 的标签中声明`<script>`，我希望在 PHP 代码中获取或调用它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T17:38:12.940

您需要使用 AJAX 或表单向服务器提交信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T18:11:54.243

JS 是客户端，PHP 是服务器端。所以没有直接的方法来做传递，但你可以通过另一种方法做你需要做的事情，AJAX 是最好的选择。除此之外，作为一个例子，以下是我将屏幕宽度分配给我的 php 变量的技巧，我可以通过回显它的宽度，`echo $width`但实际上 javascript 代码正在回显上执行，变量 $width 不包含screensize它实际上保存了在 echo 上执行`i.e in my case 1366`的 javascript 代码。`(<script> document.write(window.screen.width); </script>)`

```
$width = '<script> document.write(window.screen.width); </script>';
echo $width; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T17:45:11.857

```
$.ajax({ url: 'test.php',
     data: {action: 'aa'},
     type: 'POST',
     success: function(output) {
                         alert(output);
                    }
     }); 
```

# clojure - 返回以特定频率出现的第一个元素

> ID：14144173
> 
> 赞同：2
> 
> 时间：2013-01-03T17:37:12.357
> 
> 标签：clojure

为了好玩，我使用 Peter Norvig 的 Udacity CS212 课程（用 python 授课）作为学习 Clojure 的工具。

在所述课程中，他有一个函数可以返回以指定频率出现的序列的第一个元素：

```
def kind(n, ranks):
    """Return the first rank that this hand has
    exactly n-of-a-kind of. Return None if there
    is no n-of-a-kind in the hand."""
    for r in ranks:
        if ranks.count(r) == n: return r
    return None 
```

我已经想出了如何在 clojure 中作为单行来做到这一点，但它是多么可怕的单行：

```
(defn n-of-kind
  [n ranks]
  "Detect whether a hand rank contains n of a kind, returning first
  rank that contains exactly n elements"
  (first (keys (into {} (filter #(= (second %) n) (frequencies ranks))))))

(n-of-kind 3 [5 5 5 3 3]) ;; correctly returns 5 
```

我的直觉是必须有更好的方法。频率函数非常有用，但此代码的其余部分只是搜索一个值并返回其键。如果频率函数返回了一个以频率作为键而不是值的映射，我可以执行类似 ((frequencies ranks) n) 的操作。

任何人都可以提出一种更易读/更简洁的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:49:56.187

另一个版本

```
(defn n-of-kind [n ranks]
  (first (filter #(= n (count (filter #{%} ranks)))
                 ranks))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:56:03.803

您可以通过使用值作为键和键作为值来构建新映射来反转映射：

```
(zipmap (vals my-map) (keys my-map)) 
```

使用从频率到键的映射很容易，并且解决了最初的问题，尽管它遇到了出现相同次数的项目消失的问题，因为它们的第二个计数破坏了第一个：

```
user> (def data (take 20 (repeatedly #(rand-nth [:a :b :c :d :e :f]))))
#'user/data
user> (let [f (frequencies data)] (zipmap (vals f) (keys f)))
{1 :f, 3 :d, 4 :c}
user> (frequencies data)
{:e 4, :b 4, :a 4, :d 3, :c 4, :f 1} 
```

如果您改为从频率到具有该频率的键集的映射列表开始，然后将其减少到单个集合映射，那么尽管代码有点大，但不会丢失任何数据：

```
user> (reduce (partial merge-with clojure.set/union) 
        (let [f (frequencies data)] 
          (map hash-map (vals f) (map hash-set (keys f)))))

{1 #{:f}, 3 #{:d}, 4 #{:a :c :b :e}} 
```

# api - HTTP API：CRUD 一个集合的许多关系

> ID：14144175
> 
> 赞同：0
> 
> 时间：2013-01-03T17:37:15.107
> 
> 标签：api, http, rest, many-to-many

我正在寻找一种将 CRUD 操作应用于关系集合的约定（其中每个关系都没有元数据）。

在以下场景中，我已经对“alphas”和“betas”进行了基本的 CRUD 操作。每个 PUT/GET/HEAD/DELETE 对中的第一个包含相当简单的 CRUD，用于特定“alpha”和“beta”之间的关系。我想扩展这种模式来管理大量的关系集，并尽量减少喋喋不休。

*   `PUT /alphas/{alpha_id}/betas/{beta_id}`

    创建 alpha 和 beta 之间的关系

*   `PUT /alphas/{alpha_id}/betas?attribute={value}`

    **使用任意属性值在 alpha 和*所有*beta之间创建关系**

*   `GET /alphas/{alpha_id}/betas`

    列出与 alpha 相关的 beta 对象集合

*   `GET /alphas/{alpha_id}/betas?attribute={value}`

    列出与 alpha 相关的 beta 对象集合，其中 beta.attribute=value

*   `HEAD /alphas/{alpha_id}/betas/{beta_id}`

    检查 alpha 和 beta 之间的关系

*   `HEAD /alphas/{alpha_id}/betas?attribute={value}`

    使用任意属性值对检查 alpha 和 beta 之间的至少一个关系

*   `DELETE /alphas/{alpha_id}/betas/{beta_id}`

    删除 alpha 和 beta 之间的关系

*   `DELETE /alphas/{alpha_id}/betas?attribute={value}`

    删除具有任意属性=值的 alpha 和所有 beta 之间的所有关系

我的问题是关于第二个 PUT 操作的语义，这对我来说有点奇怪。它实际上是在所有 beta 集上运行的，而不是与alpha*存在*关系的 beta 子集，如 GET/HEAD/DELETE 中所见......有没有更好的方法来表达这个 PUT 操作？我对这一切都错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:08:29.227

我最终确定了一个由两部分组成的电话，从检索一组所需的 beta 开始：

```
GET /alphas/{alpha_id}/betas?attribute={value} 
```

...然后将`beta_id`s 列表发布到：

```
POST /alphas/{alpha_id}/betas 
```

# php - PHP添加到带有按钮的会话

> ID：14144179
> 
> 赞同：-1
> 
> 时间：2013-01-03T17:37:27.113
> 
> 标签：php, session, button, session-variables, shopping-cart

我正在创建一个基本的购物车脚本，位于 php/cart.php，带有一个用于“操作”的 GET 和一个用于从 $_SESSION 添加或删除变量或完全取消设置的开关。创建一个按钮的最简单方法是什么，当单击该按钮时，它使用此脚本来管理会话项？

尝试刷新包含会话信息的 div 还是只刷新整个页面会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:52:53.397

这个答案可能不合适，因为您没有在问题中列出 ajax 或 jQuery，但我会按以下方式进行：

首先，我会制作一个调用函数的按钮：

```
<button onClick="add_to_session('a_value')">Name</button> 
```

然后在 javascript 中，借助 jQuery：

```
function add_to_session(val){
    $.post("phpPage.php",{
        passedValue:val
    },function(ret){
        // maybe do something here...
    });
} 
```

然后在php页面上我会：

```
$_SESSION['new_val'] = $_POST['passedVal']; 
```

这是一个非常简单的例子。这只是为了说明一种简单技术的基础知识。希望能帮助到你。

# sql - GROUP BY 和 COUNT 未产生预期结果

> ID：14144183
> 
> 赞同：10
> 
> 时间：2013-01-03T17:37:54.867
> 
> 标签：sql, group-by

我正在做一些 SQL 练习，但我被困在我将要描述的那个。

有一个名为 product 的表，它有 3 列：制造商、型号和类型。

这是结果`select * from product`

![在此处输入图像描述](../Images/ce4ab7e18948c700b67d35df527cf803.png)

练习是这样说的：找出只生产同类型模型的制造商，并且这些模型的数量超过1。推断：制造商，类型。

正确的查询应该返回：

![在此处输入图像描述](../Images/0fd18351c9a15aa657275f6937666efd.png)

我的方法是首先查看哪些制造商只生产一种产品，然后排除那些只有一种型号的制造商。为此，我使用了以下查询，它返回了正确的结果，除了我只能设法显示制造商，而不能显示类型和练习要求两者。

这是我的查询：

```
SELECT
DISTINCT maker
FROM product
GROUP BY maker
HAVING COUNT(distinct type) = 1 
AND
COUNT(model)> 1 
```

它返回这个：

![在此处输入图像描述](../Images/6910034ba5f575823577f8baa1b634d0.png)

然后，当我尝试通过这样做来显示类型时：

```
SELECT
DISTINCT maker,type
FROM product
GROUP BY maker,type
HAVING COUNT(distinct type) = 1 
AND
COUNT(model)> 1 
```

这就是我得到的：

![在此处输入图像描述](../Images/d72188c72d9e454ea10f7c21c5af4b64.png)

您知道为什么这没有按预期工作吗？你会怎么做来解决这个问题？我一直在尝试解决这个问题超过 3 个小时，但没有成功。：（ 请帮帮我。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-03T17:40:39.267

如果您只返回那些只包含一种类型的组，您可以使用`MAX`/`MIN`来找出`type`该组中的内容。

```
SELECT maker,
       MAX(type) AS type
FROM   product
GROUP  BY maker
HAVING COUNT(DISTINCT type) = 1
       AND COUNT(model) > 1 
```

当您添加`type`到`GROUP BY`列表中时，它会为您提供每个组合的结果行，`maker,type`这就是您的第二次尝试不起作用的原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-23T12:33:33.783

```
SELECT DISTINCT maker, type 
FROM product 
WHERE maker IN 
   (SELECT DISTINCT maker 
    FROM product 
    GROUP BY maker HAVING COUNT(distinct type) = 1
    AND count(model) > 1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T17:50:17.007

```
SELECT
DISTINCT maker, type
FROM makertype
GROUP BY maker
HAVING COUNT(distinct type) = 1 
AND
COUNT(ident)> 1 
```

您正在尝试按制造商分组并在第二个查询中键入，这将隔离制造商和类型的任何组合只有一种类型（这将始终正确，因为每个组都包含一对不同的制造商和类型）和两个或更多型号。您只想按制造商分组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T17:40:22.163

```
 select distinct product.maker, product.type from product, (SELECT maker

    FROM product

    GROUP BY maker

    HAVING COUNT(distinct type) = 1 

           AND

           COUNT(model)> 1) as x

    where x.maker=product.maker 
```

尝试这个。它对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-03T12:25:02.827

```
SELECT MAKER,MAX(TYPE)
 FROM PRODUCT
 GROUP  BY MAKER
 HAVING  COUNT(*)>1  AND  MAX(TYPE)=MIN(TYPE) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-30T08:25:50.197

尝试这个：

```
select maker, max(type) as type from Product
Group by maker
Having count (Distinct type) = 1 and Count(maker)>1 
```

# gxt - 将布尔列呈现为是/否而不是真/假的最佳方法

> ID：14144187
> 
> 赞同：0
> 
> 时间：2013-01-03T17:38:14.697
> 
> 标签：gxt

我有一个 ColumnConfig，我想将其呈现为是/否，而不是默认的真/假。

我尝试将 ColumnConfig 从 <M, Boolean> 转换为 <M, String> 和 ValueProvider 以返回 Y/N 字符串。这会触发 BooleanFilter.validateModel()。

有没有更好的方法来保持布尔类型但改变渲染？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T20:53:08.167

深入研究 GXT 源代码，我注意到 ColumnConfig 有一个 Cell 引用。

使用修改后的 AbstactCell<Boolean> 添加对 setCell() 的调用可以解决问题。

```
columnConfig.setCell( new AbstractCell<Boolean>() {

    @Override
    public void render(Context context, Boolean value,
        SafeHtmlBuilder sb) {
        if (value) {
            sb.append(SafeHtmlUtils.fromSafeConstant("Yes"));
        } else {
            sb.append(SafeHtmlUtils.fromSafeConstant("No"));
        }
    }
}); 
```

# javascript - 如何使用关键字搜索抓取 youtube 视频链接

> ID：14144195
> 
> 赞同：2
> 
> 时间：2013-01-03T17:38:42.853
> 
> 标签：javascript, google-chrome, web-crawler

我正在做一些研究，我想抓取 youtube 视频链接（然后获取视频 ID）

例如，如果我在 youtube 搜索栏中输入关键字“obama”，那么 youtube.com 将返回结果页面

[http://www.youtube.com/results?search_query=htc&page=2](http://www.youtube.com/results?search_query=htc&page=2) 将页面向下滚动到底部我们可以看到页码 1 2 3 4 5 6 7 点击页码从 2 到 3 到 4 到 5 ....然后我们可以达到最大页码：50

所以我想下载从 1 到 50 的所有页面有一个 url 技巧，比如

```
http://www.youtube.com/results?search_query=obama&page=5 
```

但是，如果我使用wget下载每个页面，有时会阻止下载，或者有时当页码很大时，返回的页面不是异常页面。

所以正确的方法是手动单击页码按钮并使用网络浏览器下载每个页面，是否可以自动化手动程序？我在互联网上搜索，有人提到chrome javascript扩展，无论如何，有没有办法编写一些自动化脚本来模仿手动操作？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:39:59.713

为什么不直接使用他们的 API？爬行通常是不好的做法。

[https://developers.google.com/youtube/2.0/developers_guide_protocol](https://developers.google.com/youtube/2.0/developers_guide_protocol)

[https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters)

> ```
> https://gdata.youtube.com/feeds/api/videos?
>     q=football+-soccer
>     &orderby=published
>     &start-index=11
>     &max-results=10
>     &v=2 
> ```

# perl - 使用 colspan 从 perl 哈希构建表

> ID：14144196
> 
> 赞同：1
> 
> 时间：2013-01-03T17:38:45.470
> 
> 标签：perl

我有一个类似于

```
 $hash{$kayA}{$keyB}{val=>$value}; 
```

我需要将其放入一个 html 表中，包含 $keyA 的 TD 需要基于 $keyB 处的键数的行跨度

所以输出可能看起来像

```
<html>
<body>
<table border='1'>
  <tr><th colspan='2' >Col A</th><th>Col B</th><th>Value</th></tr>
  <tr>
  <td rowspan='2'><input name='myButton' type= "radio" id ="R1"></td>
  <td rowspan='2'> this is first kay</td>
  <td> this is second key 1</td><td>Value 1</td>
  </tr>
  <tr>
  <td>this is second key 2</td><td>Value 2</td>
  </tr>
</table>
</body>
</html> 
```

就我的 perl 脚本而言，我正在努力解决如何将 tr 放在正确的位置

```
#!/usr/bin/perl

$hash{$kayA}{$keyB}{val=>$value};
my $TabPrt = "<table><tr><th>Col A></th><th>Col B</th><th>Value</th></tr>";
for my $keyA (sort keys %hash)
  {
   my $Row = scaler keys %{$hash}{kayA};
   $Row = "rowspan='$Row'";

   $TabPrt = $TabPrt. "<tr>  <td><input name='myButton' type= "radio" id ="R1"></td><td $Row></td>";
   for my $keyB (sort keys %{$hash}{$keyA}
    {
      my $val = hash{$kayA}{$keyB}{val};
      $TabPrt = $TabPrt . " <td>$keyB</td><td>$val</td>"
    }
  }

 $TabPrt = $TabPrt . "</tr></table>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:59:52.343

我不太了解您的数据结构和代码。

这可以`$hash{$kayA}{$keyB}{val=>$value};`编译，但在 Perl 中没有实际意义。

另外，这条线有问题：

```
$TabPrt = $TabPrt. "<tr>  <td><input name='myButton' type= "radio" id ="R1"></td><td $Row></td>"; 
```

它不会编译，因为字符串`"<tr> <td><input name='myButton' type= "`在`radio`. 我想你的意思是

```
$TabPrt .= q(<tr><td><input name="myButton" type="radio" id ="R1"></td><td>$Row</td>); 
```

使用`q()`or `qq()`（内插）引号运算符来引用包含`'`or`"`字符的字符串。

我假设您希望您的表格呈现为

```
+----------------------------------+------------------------+---------+
| Col A                            | Col B                  | Value   |
+==========+=======================+========================+=========+
| o Button | this is the first key | this is the second key | Value 1 |
|          |                       +------------------------+---------+
|          |                       | this is the second key | Value 2 |
+----------+-----------------------+------------------------+---------+ 
```

现在让我们假设你的哈希看起来像

```
my %hash = (
    key1 => { A => "val1", B => "val2" },
    key2 => { C => "val1", D => "val2" },
); 
```

然后我们可以遍历这个哈希并构造 HTML：

```
sub make_table_corpus {
    my ($hash) = @_;
    my $html = "";
    for my $key (sort keys %$hash) {
        my $sub_hash = $hash->{$key};
        # first: how many rows will this key span?
        my $rowspan = keys %$sub_hash;
        # then: prepare all the secondary keys. Will return HTML fragments:
        my @secondary = prep_secondary_keys($sub_hash);
        $html .= html("tr", {},
            html("td", {rowspan => $rowspan}, " o Button "),
            html("td", {rowspan => $rowspan}, $key),
            # put the first secondary key here
            shift @secondary,
        );
        # append the other secondary keys:
        $html .= html("tr", {}, $_) for @secondary;
    }
    return $html;
}

# emits html fragments of key-value pairs, as <td> cells.
sub prep_secondary_keys {
    my ($hash) = @_;
    map { html("td", {}, $_) . html("td", {}, $hash->{$_}) }
        sort keys %$hash;
}

# creates a html fragment
sub html {
    my ($name, $attr, @childs) = @_;
    my $attrstring = "";
    while (my ($attname, $value) = each %$attr) {
        $value =~ s/"/&quot;/g;
        $attrstring .= qq( $attname="$value");
    }
    return join "", qq(<$name$attrstring>), @childs, qq(</$name>);
} 
```

然后：

```
print make_table_corpus(\%hash); 
```

使用上面的哈希，这将产生类似的输出

```
<tr>
  <td rowspan="2"> o Button </td>
  <td rowspan="2">key1</td>
  <td>A</td>
  <td>val1</td>
</tr>
<tr>
  <td>B</td>
  <td>val2</td>
</tr>
<tr>
  <td rowspan="2"> o Button </td>
  <td rowspan="2">key2</td>
  <td>C</td>
  <td>val1</td>
</tr>
<tr>
  <td>D</td>
  <td>val2</td>
</tr> 
```

（当然是无意的）

### 我做的不一样

1.  我没有犯语法错误（`use strict; use warnings`收到有关错误和错误的警告）
2.  辅助密钥由外部子程序处理。这样，我们就可以简单地将第一个 HTML 片段放入第一行。
3.  我编写了`html`sub 以避免在我的源代码中出现过多的引用问题。虽然这不能替代模板系统，但它让生活变得更轻松，并为错误引入了单点故障，这使得问题更容易解决。

扩展解决方案以打印出表格标题并生成有效的 HTML 表格是从这里开始的简单步骤。

# postgresql - Postgresql 复制监控计算

> ID：14144198
> 
> 赞同：4
> 
> 时间：2013-01-03T17:39:03.727
> 
> 标签：postgresql, postgresql-9.1

我已成功运行流复制，并希望在主从之间监视它。我知道我可以得到两个值：

```
 master:    select pg_current_xlog_location()
 standby:   select pg_last_xlog_receive_location() 
```

但是我不确定如何处理两者返回的十六进制值。这是以字节为单位的大小吗？我如何计算差异？这种差异告诉我什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T19:03:06.313

如果`pg_current_xlog_location()`给你一个类似的值`64/A8EB6C20`，这意味着你的 xlog 位置是 64A8EB6C20 十六进制，这实际上是一个字节数。要计算差异，您可以减去这两个值。（由于奇怪的历史原因，该序列中的某些值被跳过，但只要你只比较相等，你就可以了。）

在 PostgreSQL 9.2 中，您可以使用该函数`pg_xlog_location_diff`为您完成所有这些工作。

这些数字是什么意思？它们是预写日志流量。实际上，它大约是您写入数据库的数据量。您需要运行您的应用程序并了解您的设置可以保持哪些值以及什么是适当的延迟。

# svn - Windows的svnx替代品

> ID：14144201
> 
> 赞同：2
> 
> 时间：2013-01-03T17:39:05.560
> 
> 标签：svn, svnx

我只需要从 mac 换成 windows 笔记本电脑，因为我的 mac ATM 坏了。所以现在我需要一个 svnx 的替代品，在 windows 上运行，真的很快！所以我需要一个独立的客户端，通过它我可以从服务器获取我的存储库，查看旧版本的代表并将文件更新到服务器，到目前为止我还没有找到任何远程类似的东西。我将非常感谢任何提示！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:41:40.003

我发现[TortoiseSVN](http://tortoisesvn.net/)是在 windows 环境中使用 SVN 的一个很好的 GUI。

正如您的评论所示，您已经评估了 TortoiseSVN，并且更喜欢独立客户端而不是集成到 Windows 资源管理器中的客户端，我的下一个搜索结果`svn client windows -tortoise`，产生[RapidSVN](http://rapidsvn.tigris.org/) [RapidSVN screenshots](http://rapidsvn.tigris.org/screenshots.html) vs [svnx screenshot](http://svnx.googlecode.com/svn/wiki/svnX-1.3-big.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T19:31:16.220

[SmartSVN](http://www.smartsvn.com/)好（跨平台）SVN-client

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T17:41:23.620

Tortoisesvn 很棒。我不熟悉 svnx，但它应该提供类似的功能： [http ://tortoisesvn.net/](http://tortoisesvn.net/)

# ios - 如何为 iPhone 4 英寸和 iPhone 3.5 英寸加载单独的 NIB 文件？

> ID：14144202
> 
> 赞同：1
> 
> 时间：2013-01-03T17:39:10.667
> 
> 标签：ios, layout, ios6, nib

如何为我的 iPhone 应用程序加载单独的 nib 文件，以检查用户是否拥有 iPhone 5/iPod Touch 4 英寸屏幕和 3.5 英寸屏幕？

这是在init方法中完成的吗？

**详细信息** - 我没有为整个应用程序使用故事板。在某一时刻，我确实使用了故事板并从其中一个视图控制器中调用它。（有没有办法区分故事板？）

*   我正在寻找一个在每个单独的 viewController 中初始化的解决方案......而不是我会放在只运行一次的 appdelegate 中的东西。

*   对我来说，自动布局在很多情况下都不起作用。这些设计非常图形化，太多的空白使事情看起来很糟糕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:25:02.360

我找到了办法！

*   我制作了单独的笔尖文件，一个用于 3.5" / iPhone 非视网膜，一个用于 iPhone5
*   我使用宏来检查当前手机是否为 iPhone 5 格式。(1)
*   对于普通的 initWithNibName:bundle: 我写了一个异常，以便他们不使用普通的初始化程序。我把它命名为@“错误的初始化程序”
*   我为 viewController 创建了一个新的指定初始化程序，将其命名为 initForFormat：
*   我使用我的宏检查设备是否是 iPhone 5。如果是 iphone5，那么我使用 nib 名称 ViewControllerIphone5 进行初始化

**宏** 我从 RayOfHope的[https://stackoverflow.com/a/13068238/1492368获得了这个宏](https://stackoverflow.com/a/13068238/1492368)

```
 #define HEIGHT_IPHONE_5 568
#define IS_IPHONE   ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
#define IS_IPHONE_5 ([[UIScreen mainScreen] bounds ].size.height == HEIGHT_IPHONE_5 ) 
```

所以在新指定的初始化器initForLayout中：我写

```
if(IS_IPHONE_5)
    {
        self=[super initWithNibName:@"DetailViewControlleriPhone5" bundle:nil];
    }
    else
    {
        self=[super initWithNibName:@"DetailViewController" bundle:nil];
    } 
```

**旧初始化程序**

我从 Big Nerd Ranch 学到了这一点：使用标准初始化程序时抛出异常

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{

    @throw [NSException exceptionWithName:@"Wrong initializer"
                                   reason:@"Use initForLayout:"
                                 userInfo:nil];
    return nil;
} 
```

**从另一个 ViewController/AppDelegate 调用 View Controller** 所以当我从另一个 View Controller 或 appdelegate 调用这个 DetailViewController 时，我会写：

```
DetailViewController *detailViewController = [[DetailViewController alloc] initForLayout]; 
```

# c++ - Qt中的图像转换器，彩色图像到黑白

> ID：14144204
> 
> 赞同：3
> 
> 时间：2013-01-03T17:39:38.180
> 
> 标签：c++, qt

我正在尝试制作一个将彩色图像转换为黑白图像的简单程序。

到目前为止，我已经做到了。

```
void ObradaSlike::convert_picture_to_bw()
{
    QImage image;
    image.load(fileModel->fileInfo(listView->currentIndex()).absoluteFilePath());

    QSize sizeImage = image.size();
    int width = sizeImage.width(), height = sizeImage.height();

    QRgb color;
    int value;

    for (int f1=0; f1<width; f1++) {
        for (int f2=0; f2<height; f2++) {
            color = image.pixel(f1, f2);
            image.setPixel(f1, f2, QColor((qRed(color) + qGreen(color) + qBlue(color))/3).rgb());
        }
    }
    sceneGraphics->clear();
    sceneGraphics->addPixmap(QPixmap::fromImage(image));
} 
```

我认为代码应该可以工作，但是有一个问题。

这段代码的问题是我总是得到蓝黑色图像和黑白图像。你知道如何解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T17:43:00.517

试试这个：

```
int gray = qGray(color);
image.setPixel(f1, f2, qRgb(gray, gray, gray)); 
```

请注意，`qGray()`实际上使用公式计算[亮度](http://www.johndcook.com/blog/2009/08/24/algorithms-convert-color-grayscale/)`(r*11 + g*16 + b*5)/32`。

如果你想像现在这样得到一个正常的平均值：

```
int gray = (qRed(color) + qGreen(color) + qBlue(color))/3;
image.setPixel(f1, f2, qRgb(gray, gray, gray)); 
```

# java - JSF 在新窗口/选项卡中显示 PDF

> ID：14144207
> 
> 赞同：0
> 
> 时间：2013-01-03T17:39:50.047
> 
> 标签：java, jsf, pdf

我正在尝试首先从具有基本身份验证的服务器 A 下载 PDF，然后将 PDF 下载到服务器后，在浏览器插件可以读取的新窗口/选项卡中将其显示给用户。我正在尝试这样做，以便我不只是以纯文本形式发送用户名和密码。我想如果我先下载到服务器，我可以隐藏用户名和密码，然后将文件显示给用户。到目前为止，这是我的代码，它不起作用。什么都没发生。

```
//Get URL For The PDF File
    StringBuilder parameters = new StringBuilder();
    parameters.append("api=getDocument");
    parameters.append("&documentType=report");
    parameters.append("&documentID=").append(selectedReport);

    URL url;
    HttpURLConnection connection = null;
    try {
        //Create connection
        url = new URL(apiURL);

        //Create connection
        connection = (HttpURLConnection) url.openConnection();
        connection.setRequestMethod("GET");
        BASE64Encoder enc = new sun.misc.BASE64Encoder();
        String userpassword = userName + ":" + password;
        String encodedAuthorization = enc.encode(userpassword.getBytes());
        connection.setRequestProperty("Authorization", "Basic " + encodedAuthorization);
        connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
        connection.setRequestProperty("Content-Length", "" + Integer.toString(URLEncoder.encode(parameters.toString(), "UTF-8").getBytes().length));
        connection.setRequestProperty("Content-Language", "en-US");
        connection.setUseCaches(false);
        connection.setDoInput(true);
        connection.setDoOutput(true);

        //Send request
        DataOutputStream wr = new DataOutputStream(connection.getOutputStream());
        wr.writeBytes(parameters.toString());
        wr.flush();
        wr.close();

        //Get Response  
        InputStream is = connection.getInputStream();
        BufferedReader rd = new BufferedReader(new InputStreamReader(is));

        //Convert to Byte Array
        ByteArrayOutputStream buffer = new ByteArrayOutputStream();
        int nRead;
        byte[] data = new byte[16384];
        while ((nRead = is.read(data, 0, data.length)) != -1) {
            buffer.write(data, 0, nRead);
        }
        buffer.flush();

        // Prepare.
        FacesContext facesContext = FacesContext.getCurrentInstance();
        ExternalContext externalContext = facesContext.getExternalContext();
        HttpServletResponse response = (HttpServletResponse) externalContext.getResponse();
        BufferedOutputStream output = null;
        int DEFAULT_BUFFER_SIZE = 10240;

        // Init servlet response.            
        response.reset();
        response.setHeader("Content-Type", "application/pdf");
        response.setHeader("Content-Disposition", "inline; filename=\"" + "report.pdf" + "\"");
        output = new BufferedOutputStream(response.getOutputStream(), DEFAULT_BUFFER_SIZE);

        // Write file contents to response.
        byte[] buff = buffer.toByteArray();
        int length;
        while ((length = is.read(buff)) > 0) {
            output.write(buff, 0, length);
        }

        // Finalize task.
        output.flush();

        //Keep The Below         
        rd.close();

        facesContext.responseComplete();

    } catch (Exception e) {
        e.printStackTrace();

    } finally {
        if (connection != null) {
            connection.disconnect();
        }
    } 
```

# android - 带有淡入淡出的文本切换器

> ID：14144212
> 
> 赞同：0
> 
> 时间：2013-01-03T17:40:09.503
> 
> 标签：android

我使用 R.anim.fade_in 和 out 设置了 TextSwitcher。当我点击按钮时，我看到了文字，下一次点击我看不到任何文字（如淡出），下一次点击文字没问题，再次下一次，测试不可见。我的错误在哪里？

```
mSwitcher = (TextSwitcher) findViewById(R.id.switcher);
      mSwitcher.setFactory(this);

      Animation in = AnimationUtils.loadAnimation(this,android.R.anim.fade_in);
      Animation out = AnimationUtils.loadAnimation(this,android.R.anim.fade_out);
      mSwitcher.setInAnimation(in);
      mSwitcher.setOutAnimation(out);

mSwitcher.setText(""+prog[x]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:39:28.183

这只是一个简单的示例，`fix`用于实现 ViewFactory 和安全递增计数器以从字符串数组中获取正确的元素。

主要的：

```
public class MainActivity extends Activity implements OnClickListener, ViewFactory {

    private TextSwitcher mSwitcher;
    private int counter = 0;
    private String[] words = new String[]{"one","two","three"};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mSwitcher = (TextSwitcher) findViewById(R.id.textswitcher);
        mSwitcher.setFactory(this);

        Animation in = AnimationUtils.loadAnimation(this,
                android.R.anim.fade_in);

        Animation out = AnimationUtils.loadAnimation(this,
                android.R.anim.fade_out);
        mSwitcher.setInAnimation(in);
        mSwitcher.setOutAnimation(out);

        Button nextButton = (Button) findViewById(R.id.next);
        nextButton.setOnClickListener(this);

        updateCounter();
    }

    public void onClick(View v) {
        counter++;
        updateCounter();
    }

    private void updateCounter() {
        int index = counter % words.length;
        mSwitcher.setText(String.valueOf(words[index]));
    }

    public View makeView() {
        TextView t = new TextView(this);
        t.setGravity(Gravity.TOP | Gravity.CENTER_HORIZONTAL);
        t.setTextSize(36);
        return t;
    }
} 
```

和xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextSwitcher
        android:id="@+id/textswitcher"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />

    <Button
        android:id="@+id/next"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="next" />

</LinearLayout> 
```

如果您想调用元素数组中超出范围的元素，则显示效果不佳...请注意。

# c - 缓冲区溢出不起作用

> ID：14144216
> 
> 赞同：7
> 
> 时间：2013-01-03T17:40:20.197
> 
> 标签：c, buffer-overflow

我试图在一个需要密码的简单程序上进行缓冲区溢出（我使用的是 Linux）。这是程序代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int check_authentication(char *password){

int auth_flag = 0;
char password_buffer[16];

strcpy(password_buffer, password);

if(strcmp(password_buffer, "pass1") == 0)
    auth_flag = 1;
if(strcmp(password_buffer, "pass2") == 0)
    auth_flag = 1;

return auth_flag;

}

int main(int argc, char **argv)
{

if(argc < 2){

    printf("\t[!] Correct usage: %s <password>\n", argv[0]);
    exit(0);

}

if(check_authentication(argv[1])){

    printf("\n-=-=-=-=-=-=-=-=\n");
    printf("  Access granted.\n");
    printf("-=-=-=-=-=-=-=-=\n");

} else {

    printf("\nAccess Denied.\n");

}

   return 0;

} 
```

OK，现在我编译好了，没有错误，保存为overflow.c。

现在我打开终端，进入文件目录（桌面），然后写道：

```
./overflow.c AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 
```

终端说：“检测到堆栈粉碎”（或类似的东西）然后退出程序执行。

现在，我正在阅读 Jon Erickson 的一本书，名为“Hacking - The Art Of Exploitation”。在一个章节中，他解释了这种类型的利用（我从书中获取了代码）并执行了与我相同的命令。内存溢出，程序打印“Access grant.”。现在，为什么我的操作系统检测到我正在尝试利用该程序？我做错了什么？

我还在 Mac OS X 上尝试了该漏洞利用。同样的事情也发生了。请问，有人可以帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T17:43:45.850

在现代 linux 发行版中，检测到缓冲区溢出并终止进程。为了禁用该模式，只需使用此类标志 (gcc) 编译您的应用程序：

`-fno-stack-protector -fno-stack-protector-all`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T17:45:30.007

如果使用 gcc 编译，请添加`-fno-stack-protector`标志。您收到的消息旨在保护您免受错误代码的影响：)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T17:46:48.500

原因是堆栈粉碎实际上是一些编译器用来检测缓冲区溢出攻击的保护机制。您正试图将 29 个 A 放入一个较短的字符数组（16 个字节）中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T17:44:54.997

大多数现代操作系统都内置了保护机制。几乎所有好的操作系统都不允许直接访问任何程序的低级内存。它只允许程序访问分配给它们的地址空间。基于 Linux 的操作系统会自动终止尝试访问超出其分配的内存空间的进程。

除此之外，操作系统还具有保护机制，通过分配大量内存来防止程序崩溃，以试图严重耗尽操作系统可用的资源。

# java - 调整 jTabbedpane 中的选项卡

> ID：14144224
> 
> 赞同：2
> 
> 时间：2013-01-03T17:40:56.463
> 
> 标签：java, swing, jtabbedpane

我为我的应用程序使用了 jTabbedpane。在正常的窗口大小下，它是这样的。

![在此处输入图像描述](../Images/b40dd645730ba5fc8e786dc7ea2c7414.png)

但是当它最大化时，它是这样的。（标签不会改变它们的大小）。

![在此处输入图像描述](../Images/b6b067d427571657dd59f43b3f7e7737.png) 我想调整标签以均匀分布在任何窗口大小。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T19:11:22.937

I found a code.

```
 int wid = (tp_main.getSize().width)/6;
        for(int i=0; i<6;i++){
            String name= tp_main.getTitleAt(i);
            tp_main.setTitleAt(i,"<html><div style=\"width: "+new Integer(wid)+"px\">"+new String(name)+"</div></html>");
        } 
```

tp_main is the `jTabbedpane`

```
int wid = (tp_main.getSize().width)/6; 
```

here devided by 6 as i have 6 tabs.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-03T02:11:29.973

this is worked for me. change your tab sizes went to remove this space

```
 JLabel lab = new JLabel();
        lab.setPreferredSize(new Dimension(200, 30));
        jTabbedPane1.setTabComponentAt(0, lab);  // tab index, jLabel 
```

or try this change to all tab component in same sizes (called in main method)

`UIManager.getLookAndFeelDefaults().put("TabbedPane:TabbedPaneTab.contentMargins", new Insets(10, 100, 0, 0));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T18:02:28.520

我唯一能想到的是当窗口大小发生变化时，动态调整选项卡的填充。[这是一个很好的起点](http://weblogs.java.net/blog/xuanyun/archive/2009/01/change_the_tab.html)。

# silverlight-4.0 - TFS 构建 Xap 打包失败，因为它正被另一个进程使用

> ID：14144228
> 
> 赞同：6
> 
> 时间：2013-01-03T17:41:15.010
> 
> 标签：silverlight-4.0, visual-studio-2012, tfsbuild, xap

我负责管理我们的自动化构建，最近我们将两个基于 Silverlight 的 Web 应用程序移动到同一个解决方案中。现在，当我们通过构建服务器构建时，大约有一半时间构建随机失败，两个 xap 文件之一带有以下错误消息。

> **Xap 打包失败。该进程无法访问文件** “ **G:\Builds\2\Application Suite\Main\Binaries\silverlight app1.xap** ” **，因为它正被另一个进程使用。**

结构如下：

> web app1 构建 silverlight app1
> 
> web app2 构建 silverlight app2

有人可以帮我解决这个让我很头疼的问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-16T12:19:24.093

For TFS 2013, where *MSBuild Multi-Proc* parameter is no longer present, try to set *MSBuild Arguments* to `/m:1`

See:

*   [http://msdn.microsoft.com/en-us/library/bb651793.aspx](http://msdn.microsoft.com/en-us/library/bb651793.aspx)
*   [http://social.msdn.microsoft.com/Forums/vstudio/en-US/0b856b65-37de-4256-8a09-e233911985f1/tfs2013-msbuild-problems-with-parallel-build?forum=tfsbuild](http://social.msdn.microsoft.com/Forums/vstudio/en-US/0b856b65-37de-4256-8a09-e233911985f1/tfs2013-msbuild-problems-with-parallel-build?forum=tfsbuild)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T23:52:31.223

事实证明，我必须更改 msbuild 的 tfs 构建设置才能一次构建每个项目。

以下是要采取的步骤：
转到**构建**->**编辑构建定义**->**进程选项卡**->**将“MSBuild Multi-Proc”编辑为 False**

![TFS 构建的屏幕截图](../Images/79b4d372e42ea2244152d0c2a538f188.png)

不是最好的解决方案，因为它会减慢整个构建过程，因为项目无法并行构建，但它确实有效

# java - 在 Windows/Mac 和 32bit/64bit 上支持 SWT

> ID：14144232
> 
> 赞同：2
> 
> 时间：2013-01-03T17:41:24.303
> 
> 标签：java, cross-platform, swt

我目前正在使用[DJProject](http://djproject.sourceforge.net/ns/index.html)将浏览器放入我的 Java Swing 应用程序中。DJProject 使用 SWT 运行，我对 SWT 的经验很少。

我想同时支持 32 位和 64 位的 Windows 和 Mac。我知道每个平台都有一个 swt.jar 文件。我已将所有 4 个 swt.jar 库作为主应用程序的库添加到我的类路径中。

我的问题是当我尝试在 Mac 上运行应用程序时，例如我收到错误：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: Cannot load 32-bit SWT libraries on 64-bit JVM 
```

我将如何在运行时自动告诉 Java 加载 SWT 库的正确变体。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-02T16:57:39.747

您可以检测操作系统和 Java 版本并动态加载相应的 jar：

```
private void loadSwtJar() {
    try {
        Class.forName (ORG_ECLIPSE_SWT_WIDGETS_SHELL);
        return;
    } catch (ClassNotFoundException e) {
        System.out.println (" ! Need to add the proper swt jar: "+e.getMessage());
    }

    String osName = System.getProperty("os.name").toLowerCase();
    String osArch = System.getProperty("os.arch").toLowerCase();

    //NOTE - I have not added the mac and *nix swt jars.
    String osPart = 
        osName.contains("win") ? "win" :
        osName.contains("mac") ? "cocoa" :
        osName.contains("linux") || osName.contains("nix") ? "gtk" :
        null;

    if (null == osPart)
        throw new RuntimeException ("Cannot determine correct swt jar from os.name [" + osName + "] and os.arch [" + osArch + "]");

    String archPart = osArch.contains ("64") ? "64" : "32";

    System.out.println ("Architecture and OS == "+archPart+"bit "+osPart);

    String swtFileName = "swt_" +osPart + archPart +".jar";
    String workingDir = System.getProperty("user.dir");
    String libDir = "\\lib\\";
    File file = new File(workingDir.concat(libDir), swtFileName);
    if (!file.exists ())
        System.out.println("Can't locate SWT Jar " + file.getAbsolutePath());

    try {
        URLClassLoader classLoader = (URLClassLoader) getClass().getClassLoader ();
        Method addUrlMethod = URLClassLoader.class.getDeclaredMethod ("addURL", URL.class);
        addUrlMethod.setAccessible (true);

        URL swtFileUrl = file.toURI().toURL();
        //System.out.println("Adding to classpath: " + swtFileUrl);
        addUrlMethod.invoke (classLoader, swtFileUrl);
    }
    catch (Exception e) {
        throw new RuntimeException ("Unable to add the swt jar to the class path: " + file.getAbsoluteFile (), e);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:35:22.507

> 我将如何在运行时自动告诉 Java 加载 SWT 库的正确变体？

你没有。您创建 4 个 jar 文件，每个机器（Windows 和 Mac）和操作系统（32 位和 64 位）一个。

每个 jar 文件都包含适用于一台机器和一个操作系统的 SWT jar 库

# performance - three.js：从 1024 像素开始在 iPad 上的性能下降

> ID：14144238
> 
> 赞同：4
> 
> 时间：2013-01-03T17:41:44.970
> 
> 标签：performance, ipad, three.js, webkit

我有一个使用`three.js`with的网站`CanvasRenderer`。渲染器的大小取决于窗口大小。在 iPad 上，大小是`1024 x 672`像素。使用这种尺寸，我的性能非常差（~1 FPS）。如果我将宽度减小到`1023`像素，我会得到大约 60 FPS。

为什么在达到 1024 像素时性能会显着下降，有什么具体原因吗？我对 Firefox 中的此分辨率没有任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-17T14:56:05.637

我听说某些浏览器中的 HTML5 画布元素在渲染一定数量的像素后会失去大量性能。这似乎是浏览器本身的缓存问题。虽然这个问题仍然没有答案。

[为什么大于 65776 像素画布源的 drawImage 性能差异很大](https://stackoverflow.com/questions/19038058/why-does-drawimage-performance-differ-greatly-with-larger-than-65776-pixel-canva)

以较低的分辨率渲染画布并使用 CSS 将其放大到全高清。

# ios - 无法将 UINavigationController 添加到 ModalViewController？

> ID：14144239
> 
> 赞同：0
> 
> 时间：2013-01-03T17:41:54.490
> 
> 标签：ios, uinavigationcontroller, uinavigationbar, modalviewcontroller, uinavigationitem

我在我的项目中使用 UIModalViewController 无法在顶部添加 UINavigationBar。我还在我的项目中使用其他 UIModalViewControllers，我成功地添加了 UINavigationBar。无法使用的 UIModalViewController 和其他的唯一区别是，它链接到其他几个 ViewController（都使用模式“推送”到它），而其他 ModalViewController 只是链接到其他 1 个 ViewController。

当我尝试向其中添加 UINavigationController 时，我正在使用以下代码：

```
ShowTaskViewController *detailViewController = [[ShowTaskViewController alloc] init];
UINavigationController *navController = [[UINavigationController alloc]        initWithRootViewController:detailViewController];

navController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self.navigationController presentModalViewController:navController animated:YES  completion:nil];
[navController release];
[detailViewController release]; 
```

但是没有添加任何栏。我没有收到任何错误或任何东西。知道这里可能发生了什么吗？

# c++ - 避免在直接派生类中在 C++ 中定义纯虚函数？

> ID：14144244
> 
> 赞同：2
> 
> 时间：2013-01-03T17:42:22.300
> 
> 标签：c++, oop, visual-c++

我们是否必须在直接派生类中强制定义 C++ 中的纯虚函数？还是我们可以避免它，以便我们只能在具体类中定义它？这是如何实现的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:43:49.880

没有人强迫你实现纯`virtual`函数，所以你不必这样做。您的课程将是抽象的。在派生类中，只需保留声明或将其重新声明为虚拟纯。

```
struct Base
{
   virtual void foo() = 0;
};

//this is OK, X is abstract
struct X : Base
{
};

//this is also OK, redundant, and Y is abstract
struct Y : Base
{
   virtual void foo() = 0;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:44:52.497

*在您开始创建该类的实际对象*之前，绝对不需要在该类中定义任何纯虚函数。

抽象类旨在用作其他类的基础。抽象类层次结构可以任意深，这意味着您不需要在直接后代中定义纯虚方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T17:45:32.277

如果有一些虚拟纯方法没有实现，那么派生类是抽象的。如果要实例化该方法，则必须在某个派生类中实现该方法。

# c# - 在 c# 控制台上加载内容文件夹

> ID：14144249
> 
> 赞同：1
> 
> 时间：2013-01-03T17:42:38.390
> 
> 标签：c#, xna, console

我是新来的，我的项目有问题。
我的项目是ac#主机游戏，混合xna游戏。
我的项目的问题是，我在其中添加了一个内容文件夹来加载 xna 精灵等，但是每次我让它运行时，它都会显示，在纹理加载时找不到文件。
我试图查看问题是否出在路径上，但不是。它似乎无法识别内容文件夹，或者换句话说，它威胁到它不存在，在我看来。
我试图在谷歌上搜索，但它一直给我奇怪的结果，
我在这个网站上搜索了解决方案，但没有一个是我不想要的。
我怎样才能让它识别我的内容文件夹，以便能够在上面加载精灵和其他东西？

```
public class Game : Microsoft.Xna.Framework.Game
{
    public GraphicsDeviceManager graphics;
    public SpriteBatch spriteBatch;

    public Game()
    {
        graphics = new GraphicsDeviceManager(this);
        graphics.PreferredBackBufferWidth = 640;
        graphics.PreferredBackBufferHeight = 480;
        graphics.IsFullScreen = false;
        Content.RootDirectory = "Content"; 
    }

    protected override void Initialize()
    {
        base.Initialize();
    }

    protected override void LoadContent()
    {
        spriteBatch = new SpriteBatch(GraphicsDevice);
        Program.TestPlayer = Content.Load<Texture2D>("characters/blue"); //Here is where gives the error
        Program.Tiles = Content.Load<Texture2D>("tiles"); //this gives error if the above script is commented.
    }

    protected override void UnloadContent()
    {

    }

    protected override void Update(GameTime gameTime)
    {
        switch (Procedures.gmode)
        {
            case GameMode.ExplorationMode:
                Exploration.ExplorationMode();
                break;

            default:
                this.EndRun();
                return;
        }
        base.Update(gameTime);
    }

    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.White);
        spriteBatch.Begin();
        switch (Procedures.gmode)
        {
            case GameMode.ExplorationMode:
                Exploration.DrawMap();
                Procedures.player.DrawTamer(spriteBatch);
                break;
        }
        spriteBatch.End();
        base.Draw(gameTime);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:58:05.113

我不得不做一些不同的事情来解决这个问题，除了……不推荐而且有点烦人。
我必须在 xna 上创建另一个项目，并将内容文件传递给 xna 文件，然后将内容文件夹移动到我的项目文件夹。
除了烦人之外，它至少是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:54:08.180

听起来问题是某些设置不正确。

确保在主项目的“内容引用”中引用了内容项目。

并确保内容项目中的“内容根目录”设置为“内容”（或与“Content.RootDirectory = 'Content';”设置为相同）。

并且通过“我的项目的问题，是我添加了一个内容文件夹”听起来您向 xna 项目添加了一个普通文件夹，但是您需要使用一个内容项目，以便您的资源将被编译和引用。

* * *

**编辑**

根据您的图像，您似乎没有***xna 游戏项目***，而是一个***普通项目***。尝试制作一个***xna 项目***并将您的游戏文件放在那里，然后从***xna 游戏项目中******引用***您的***内容项目***（在制作 xna 游戏项目时，您将自动获得一个新的内容项目，该项目在 xna 游戏项目中被引用，因此您可以使用它来代替旧的，因此您不必弄乱设置，只需移动文件即可）。

# php - 如何将 SQL 查询的结果转换为 XML？

> ID：14144255
> 
> 赞同：1
> 
> 时间：2013-01-03T17:43:12.597
> 
> 标签：php, mysql, xml, dom, foreach

基本上，我采用 SQL 查询并将其转换为动态 XML。我正在尝试为从查询中获得的元素创建自定义 XML 标记，并且我想从我的查询中挑选出哪些结果用作 XML 元素。

在一个完美的世界中，我希望能够获取从查询中获得的每一行并确定 XML 属性。我希望这是一个循环，但我似乎无法让它工作。

```
$sql = "SELECT 
COUNT( l.log_id ) AS id, 
l.status AS 'requestStatus',
d.firmname AS 'name',
DAY (FROM_UNIXTIME( l.time ) ) AS DAY, 
WEEK( FROM_UNIXTIME( l.time ) ) AS week, 
YEAR( FROM_UNIXTIME( l.time ) ) AS year

FROM $table_id1, $table_id2 
WHERE 
l.client = 'XXXXX' AND 
l.time > 1 AND 
l.work_id = d.subid AND 
d.deleted = 0 AND
d.user_id = l.user_id

GROUP BY 
YEAR( FROM_UNIXTIME( l.time ) ), 
WEEK( FROM_UNIXTIME( l.time ) ) 

ORDER BY 
week DESC";

$dbresult = mysql_query($sql);

// create a new XML document
$doc = new DomDocument('1.0', 'UTF-8');
$doc->formatOutput = true;

// create root node
$root = $doc->createElement('workResponse');
$root = $doc->appendChild($root);
$occ2 = $doc->createElement('contentResponses');
$occ2 = $root->appendChild($occ2);

// process one row at a time
while($row = mysql_fetch_assoc($dbresult)) {

// add node for each row
$occ = $doc->createElement("contentResponse");
$occ = $root->appendChild($occ);

// add a child node for each field
foreach ($row as $fieldname => $fieldvalue) {
  $child = $doc->createElement($fieldname);
  $child = $occ->appendChild($child);
    $value = $doc->createTextNode($fieldvalue);
    $value = $child->appendChild($value);

    } // foreach

}// while

// get completed xml document
$xml_string = $doc->saveXML();

echo $xml_string;

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T20:41:52.220

首先，我建议不要使用`mysql_*`函数。 [它们已被弃用并消失](http://us2.php.net/manual/en/intro.mysql.php)。

[在这种情况下， Dom 扩展](http://php.net/manual/en/intro.dom.php)似乎是矫枉过正。如果可以，我更喜欢使用[SimpleXML](http://php.net/manual/en/book.simplexml.php)。

```
<?php

$dbh = new PDO('mysql:host=localhost;dbname=test','username','password');

$sxe = new SimpleXMLElement('<workResponse></workResponse>');
$sxe_crs = $sxe->addChild('contentResponses');

function array_walk_simplexml(&$value, $key, &$sx) {
    $sx->addChild($key, $value);
}

$stmt = $dbh->query('SELECT * FROM sometable');

while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
    $sx_cr = $sxe_crs->addChild('contentResponse');
    array_walk($row, 'array_walk_simplexml', $sx_cr);
}

echo $sxe->asXML(); 
```

如果您想“漂亮地打印” XML（欣赏您的工作？），那么您需要使用 Dom 扩展。

```
$dom_sxe = dom_import_simplexml($sxe);
$dom = new DOMDocument('1.0');
$dom->formatOutput = true;
$dom_sxe = $dom->importNode($dom_sxe, true);
$dom_sxe = $dom->appendChild($dom_sxe);

echo $dom->saveXML(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:26:16.057

XML_Serializer 对于 php pear 用户非常有用

# forms - dojo 表单验证清除

> ID：14144258
> 
> 赞同：1
> 
> 时间：2013-01-03T17:43:28.913
> 
> 标签：forms, validation, dojo, dijit.form

我正在为我的表单使用 dijit.form.ValidationTextBox。问题是我正在使用客户端代码重新填充数据，并且我没有为新表单进行回发。当我动态设置表单数据时，错误消息仍然存在。我曾尝试调用重置，但没有任何效果，所以我认为这不是我想要做的......

dijit.byId("MyForm").reset();

当我用新数据填充表单时，我只想清除所有验证消息，即使该数据无效。我不希望消息显示，直到我再次点击提交..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T17:48:29.187

看起来您需要自己对单个表单小部件执行 reset() 。

registry.byId(textBoxId).reset();

这应该从上次提交中清除输入的错误验证消息。

# javascript - 在 SharePoint 中加载 JavaScript API - 时间问题

> ID：14144266
> 
> 赞同：2
> 
> 时间：2013-01-03T17:44:34.037
> 
> 标签：javascript, api, sharepoint, simile

我在 SharePoint 2007 中有一个内容编辑器 Web 部件，它包含一个在具有不同 JavaScript 源的页面上插入多个标签的功能。

出于某种原因，加载我的 JavaScript 源（API）之一需要大约 4-5 分钟和几次刷新。通常，这只会在早上我第一次访问我的 SharePoint 网站时发生。

这个问题过去经常发生，但我已经放置了一系列按钮来触发重新加载页面上包含脚本源代码的函数（参见下面的代码块：感谢 Herve Tourpe）

有人可以告诉我为什么会这样吗？

有关更多信息，我正在使用 MIT Simile Timeline API。通常，一旦我早上登录该站点，页面上的错误是“时间轴”未定义（显然，这是 API 文件中最完整的类）。

对我来说，这要么意味着执行时间线的函数没有等待足够长的时间来加载 API，要么是以下函数存在某种问题：

```
function includeJSScript(p_file) {
  // before we insert this script, we need to check if it already exists
  var bAlreadyExists = false;
  var scripts = document.getElementsByTagName('script');

  for (var i = 0; i < scripts.length; i++) {
    if (scripts[i].src == p_file) {
    bAlreadyExists = true;
    break;
    }
  }

  if (!bAlreadyExists) {
    var v_script = document.createElement('script');
    v_script.type = 'text/javascript';
    v_script.src = p_file;
    document.getElementsByTagName('head')[0].appendChild(v_script);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:08:36.423

我认为您的问题是时间问题，通常是内容编辑器 Web 部件。

问题是该部分最后呈现并且在 SharePoint 中使用重载的 DOM，这意味着它有时加载速度不够快（我在使用 jQuery 的 Chrome 中经常遇到这个问题）。早上更频繁地体验它是由于 SharePoint 的缓存。

有几种方法可以解决它，您可以逐一解决，直到解决：

首先：为了速度慢，请务必在 Codeplex 上使用 SPWakeUp3 - 这将“唤醒”（即缓存）您的站点和脚本；SP 每 24 小时转储一次缓存 - 这将解决这个问题。

对于脚本本身：

试试这个：将代码从部件中取出，放入文本文件并上传到文档库 - 将 CEWP 指向该文件。

如果没有变化，请尝试使用 CodePlex 中的 HTML/JS Render Web 部件 - 这可以避免 CEWP 的一般问题：http: [//davidmsterling.blogspot.com/2012/12/htmljavascript-rendering-web-part.html](http://davidmsterling.blogspot.com/2012/12/htmljavascript-rendering-web-part.html)

如果仍然无法正常工作，您可以尝试 -

将脚本嵌入页面布局并使用 CEWP 或 HTML/JS 渲染（再次使用文件来保存脚本调用）或

将脚本嵌入母版页（但这是您可能不需要的开销）

我很确定上述之一应该可以解决问题。

大卫·M·斯特林

[http://davidmsterling.blogspot.com](http://davidmsterling.blogspot.com)

[http://www.sterling-consulting.com](http://www.sterling-consulting.com)

[http://www.sharepoint-blog.com](http://www.sharepoint-blog.com)

# android - Android 静态数组列表

> ID：14144272
> 
> 赞同：0
> 
> 时间：2013-01-03T17:45:08.033
> 
> 标签：android, static, arraylist

我正在构建一个 Android 应用程序，我正在使用在 Splash Activity 期间填充的静态数组列表，以便我可以在整个应用程序中使用它。但是当我退出并重新进入应用程序时，这个数组仍然充满了它以前的内容。请问这是怎么回事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T17:47:41.780

如果它是静态的，则只有在持有它的类完全从内存中卸载时才会将其删除。这可能不会立即发生，但会在未来的某个时候发生。当您知道不再需要它时，您应该手动清除它。或者将数据存储在其他地方。

如果你真的要通过 ADB 杀死你的进程（不仅仅是退出你的活动），你会注意到数据将会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:52:05.667

没有更多细节很难确定，但我的猜测是您可能在某处引用了您的上下文，因此您的应用程序永远不会被关闭，因此当您重新运行它时，您会在那里看到相同的数据，因为它正在使用相同的对象。

您可以通过进入手机上正在运行的进程部分或通过 adb 查看该进程是否仍然存在来确认这一点。通常的原因是有一个drawable并且在退出之前没有清除它的回调，它保留了对上下文的引用，因此将保留到您的应用程序的链接。如果您的静态变量在您的活动中声明，则意味着它仍然存在。

# javascript - Jade 条件（if/else）将类添加到 div 内联

> ID：14144274
> 
> 赞同：76
> 
> 时间：2013-01-03T17:45:13.837
> 
> 标签：javascript, node.js, express, pug

有没有办法在玉模板中内联？

```
if(typeof fromEdit != 'undefined')
   div#demo.collapse.in
else
   div#demo.collapse 
```

想要执行此条件检查“内联”，如果 fromEdit 存在，结果会将 .in 添加到 div 的末尾。

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-01-03T17:48:28.520

这有效：

```
div#demo.collapse(class=typeof fromEdit === "undefined" ? "" : "in") 
```

[在这里](http://naltatis.github.com/jade-syntax-docs/)试试。

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2013-06-09T22:34:30.773

如果您不希望在没有值的情况下添加类属性，则可以将其分配为 undefined 而不是空字符串。这是前面的示例，稍作修改：

```
div#demo.collapse(class=typeof fromEdit === "undefined" ? undefined : "in") 
```

更新：此外，如果您使用的是[pug](https://pugjs.org/)，您现在可以添加任意数量的`class=`声明，使用不同的条件，它们将在生成的类属性中连接起来。例如：

```
#demo.collapse(class=cond1 && 'class1' class=cond2 && 'class2') 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-15T14:06:35.097

如[http://jade-lang.com/reference/attributes/](http://jade-lang.com/reference/attributes/)中所述：

> 类属性 [...] 它也可以是将类名映射到真或假值的对象，这对于应用条件类很有用

该任务也可以通过以下方式完成：

```
div#demo.collapse(class={ in: typeof fromEdit != 'undefined' }) 
```

虽然它在这里不起作用[http://naltatis.github.com/jade-syntax-docs/](http://naltatis.github.com/jade-syntax-docs/)（我认为他们需要更新一些东西），但它适用于jade@1.11.0。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-25T23:06:09.243

使用 pug 2 您可以使用以下语法：

```
div#demo(class="collapse", class={"in": typeof fromEdit !== 'undefined'}) Home page 
```

更多信息：[https ://pugjs.org/language/attributes.html](https://pugjs.org/language/attributes.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-13T09:27:02.383

虽然是一个老问题，但我发现以下工作，因为 Pug 包含内置的对象存在检测：

```
div#demo.collapse(class=fromEdit? 'in':undefined) 
```

如果不明显，则检查是否`fromEdit`存在以及是否确实`in`作为类输入，否则将类留空。

# android - android客户端-服务器UDP或TCP？

> ID：14144276
> 
> 赞同：-1
> 
> 时间：2013-01-03T17:45:20.780
> 
> 标签：android, tcp, udp, client-server

我想创建一个 android 应用程序（客户端），可以长距离访问笔记本电脑（服务器）上的特定文件（不使用 wi-fi 或蓝牙）。最好的方法是什么？UDP还是TCP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:51:18.380

我建议阅读 Wiki 文章：[TCP](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)和[UDP](http://en.wikipedia.org/wiki/User_Datagram_Protocol)。

非常高级的描述。

TCP 用于保证交付（当您需要确保将收到 100% 的数据时）。将其用于文件传输是有意义的。

UDP 不保证交付。因此，它本身对文件传输不是很好。您可能需要构建/重用一些基于 UDP 的更高级别的协议来实现文件传输。

还有一个注意事项。使用位于 TCP/IP 之上的现有更高级别协议（例如 FTP）进行文件传输是有意义的。

# wpf - WPF MVVM 将 ComboBox 绑定到 Datagrid 选定项

> ID：14144277
> 
> 赞同：2
> 
> 时间：2013-01-03T17:45:23.417
> 
> 标签：wpf, mvvm, datagrid, combobox

有没有人有将 ComboBox 绑定到 DataGrid 的选定项的示例？我已经尝试了很多方法，但我似乎无法让它发挥作用。我对 MVVM 相当陌生，所以我做错了。任何帮助，将不胜感激。我将组合框所在的网格的数据上下文设置为数据网格，但是当我从数据网格中选择一行时，组合框不会改变。所有文本框都使用来自数据网格的数据填充，但组合框不会更改。有问题的组合框是 cmbRoles。

谢谢，

RG

这是 XAML：

```
<UserControl x:Class="Compliance.Views.UserAdministrationView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:local="clr-namespace:Compliance"
         xmlns:views="clr-namespace:Compliance.Views"
         xmlns:helpers="clr-namespace:Compliance.Helpers"
         xmlns:vm="clr-namespace:Compliance.ViewModels"
         xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
         mc:Ignorable="d" 
         d:DesignHeight="1000" d:DesignWidth="800">
<UserControl.Resources>
    <helpers:ActiveStatusConverter x:Key="ActiveStatusConverter"/>
</UserControl.Resources>
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <StackPanel Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center" Grid.Row="0" Margin="15">
        <Label Content="User" Height="25" FontSize="14" HorizontalContentAlignment="Center" />
        <Grid HorizontalAlignment="Center" VerticalAlignment="Top" DataContext="{Binding ElementName=usersDG, Path=SelectedItem}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" MinHeight="35" />
            </Grid.RowDefinitions>
            <telerik:Label Content="User Name: " Grid.Column="0" Grid.Row="0" HorizontalAlignment="Right" VerticalAlignment="Center" />
            <TextBox Grid.Column="1" Grid.Row="0" MinHeight="23" HorizontalAlignment="Left" VerticalAlignment="Center" MinWidth="180" MaxWidth="180" >
                <TextBox.Text>
                    <Binding Path="UserName" Mode="TwoWay" ValidatesOnDataErrors="True" NotifyOnValidationError="True"/>
                </TextBox.Text>                    
            </TextBox> 
            <telerik:Label Content="First Name: " Grid.Column="2" Grid.Row="0" HorizontalAlignment="Right" VerticalAlignment="Center" />
            <TextBox Grid.Column="3" Grid.Row="0" MinHeight="23" HorizontalAlignment="Left" VerticalAlignment="Center" MinWidth="180" MaxWidth="180">
            <TextBox.Text>
                <Binding Path="FirstName" Mode="TwoWay" ValidatesOnDataErrors="True" NotifyOnValidationError="True"/>
            </TextBox.Text>
            </TextBox>
            <telerik:Label Content="Last Name: " Grid.Column="4" Grid.Row="0" HorizontalAlignment="Right" VerticalAlignment="Center" />
            <TextBox Grid.Column="5" Grid.Row="0" MinHeight="23" HorizontalAlignment="Left" VerticalAlignment="Center" MinWidth="180" MaxWidth="180">
            <TextBox.Text>
                <Binding Path="LastName" Mode="TwoWay" ValidatesOnDataErrors="True" NotifyOnValidationError="True"/>
            </TextBox.Text>
            </TextBox>
            <telerik:Label Content="Email: " Grid.Column="0" Grid.Row="1" HorizontalAlignment="Right" VerticalAlignment="Center" />
            <TextBox Grid.Column="1" Grid.Row="1" MinHeight="23" HorizontalAlignment="Left" VerticalAlignment="Center" MinWidth="180" MaxWidth="180">
                <TextBox.Text>
                    <Binding Path="Email" Mode="TwoWay" ValidatesOnDataErrors="True" NotifyOnValidationError="True"/>
                </TextBox.Text>
            </TextBox>
            <telerik:Label Content="Active Status: " Grid.Column="2" Grid.Row="1" HorizontalAlignment="Right" VerticalAlignment="Center" />
            <telerik:RadComboBox x:Name="comBoxActiveStatus" Grid.Column="3" Grid.Row="1" MinHeight="23" MinWidth="180" HorizontalAlignment="Left" VerticalAlignment="Center"
                    SelectedItem="{Binding Path=ActiveStatus, 
                                    Converter={StaticResource ResourceKey=ActiveStatusConverter}, 
                                    Mode=TwoWay, 
                                    ValidatesOnExceptions=True, 
                                    NotifyOnValidationError=True}">
            </telerik:RadComboBox>
            <telerik:Label Content="Role: " Grid.Column="4" Grid.Row="1" HorizontalAlignment="Right" VerticalAlignment="Center" />
            <telerik:RadComboBox x:Name="cmbRoles" DisplayMemberPath="RoleName" 
                        Grid.Column="5" 
                        Grid.ColumnSpan="3"
                        Grid.Row="1" 
                        MinHeight="23" 
                        HorizontalAlignment="Left" 
                        ItemsSource="{Binding}" 
                        Margin="5" 
                        VerticalAlignment="Center" 
                        MinWidth="180" 
                        SelectedItem="{Binding RoleName}"
                        IsSynchronizedWithCurrentItem="True">
            </telerik:RadComboBox>
            <Button Grid.Column="0" Grid.Row="2" Grid.ColumnSpan="3" Content="Save User" Width="100"  />
            <Button Grid.Column="4" Grid.Row="2" Grid.ColumnSpan="3" Content="Add User"  Width="100"  />
        </Grid>
    </StackPanel>
    <Border CornerRadius="10" BorderThickness="5" Grid.Row="1" VerticalAlignment="Top" HorizontalAlignment="Center">
        <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Label Content="Users" Grid.Row="0" Height="25" FontSize="14" HorizontalContentAlignment="Center" />
            <telerik:RadGridView x:Name="usersDG" ItemsSource="{Binding Users}" AutoGenerateColumns="False" ShowGroupPanel="False" IsReadOnly="True">
                <telerik:RadGridView.Columns>
                    <telerik:GridViewDataColumn DataMemberBinding="{Binding UserName}" Header="User Name" />
                    <telerik:GridViewDataColumn DataMemberBinding="{Binding FirstName}" Header="First Name" />
                    <telerik:GridViewDataColumn DataMemberBinding="{Binding LastName}" Header="Last Name" />
                    <telerik:GridViewDataColumn DataMemberBinding="{Binding Email}" Header="Email" />
                    <telerik:GridViewDataColumn DataMemberBinding="{Binding Role.RoleName}" Header="Role Name" />
                    <telerik:GridViewDataColumn DataMemberBinding="{Binding ActiveStatus, Converter={StaticResource ActiveStatusConverter}}" Header="Active Status" />
                </telerik:RadGridView.Columns>
            </telerik:RadGridView>
        </Grid>
    </Border>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T20:07:19.627

扩展并对上面的 Hannish 的回答采取不同的看法，我也假设您使用的是 Master Details 类型排列，您希望将 Details DataContext 设置为 DataGrid Selected Row。

在这个设置中，我也遇到了很多关于 ComboBox Binding 的问题。

我的应用程序不使用 Telerik 控件，但我倾向于为 DataGrid 选定行创建一个属性，并将我的详细信息绑定到此。

DataGrid XAML 类似于；

```
<DataGrid x:Name="grdResults" 
    DataContext="{Binding DataGridDataContextCollection}" 
    ItemsSource="{Binding}"
    SelectedItem="{Binding DataContext.SelectedRow, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"> 
```

我这样做是因为我已经为运行 DataGrid DataContext 中的项目的行设置了行为。

然后我也有一个选定的组合框项目的属性，并将组合框绑定到这个。

对于 ComboBox ItemSource，问题在于，您需要将 ComboBox 绑定到的项目的 ObservableCollection，但这些当然不会是您的 DataGrid 选定行的成员，而反过来您的详细信息 DataContext。

所以要绑定ComboBox ItemSource 和SelectedItem，必须引用View 的DataContext，而不是Details 的DataContext。

如果您在 DataGrid DataContext 中有它可用，还将 ComboBox Text 属性绑定到 DataGrid SelectedRow Name 值，假设两者相同！这有助于更新 DataGrid 也已更新。

我用于 ComboBox 的 XAML 类似于；

```
<ComboBox x:Name="cmbRoles" 
    SelectedItem="{Binding DataContext.SelectedRole, Mode=TwoWay, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True, NotifyOnValidationError=True}" 
    SelectedValuePath="Role_ID" 
    SelectedValue="{Binding Role_ID, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True, NotifyOnValidationError=True}"
    ItemsSource="{Binding DataContext.RoleItems, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}" 
    Text="{Binding RoleName, Mode=TwoWay}"
    DisplayMemberPath="RoleName" 
    IsSynchronizedWithCurrentItem="True" 
    HorizontalAlignment="Left"/> 
```

为了 100% 确定，然后我通过在 ComboBox SelectedItem Setter 中设置 DataGrid SelectedRow ID 值将 ComboBox SelectedItem 同步到 DataGrid SelectedRow。这当然不是绝对必要的。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T19:02:03.390

如果我理解正确，您有一个包含所有用户的 RadGridView，以及某种详细信息表单，您可以在其中编辑所选行的值。

所以，你必须修改几件事：

1：combobox中的ItemsSource设置为{Binding}，所以它只会绑定到其父元素的datacontext来获取items列表。在这种情况下，父级是 Grid，其 DataContext 设置（正确）到 RadGrid 的选定项（这里：DataContext="{Binding ElementName=usersDG, Path=SelectedItem}"，没关系）。

问题是您必须使用可能的角色列表填充 ComboBox 的 ItemsSource。我通常对此类列表使用静态 ObservableCollection（因此我确保它们在整个应用程序中都是相同的）。像这样的东西：

ItemsSource="{x:静态本地:Lists.RolesList}"

您可能有一个枚举或其他东西，但重要的是您使用所有可能选择的选项填充 ItemsSource 属性。

2：由于您将使用 Role 对象填充组合框中的列表，因此 SelectedItem 必须绑定到此类对象，该对象必须作为公共属性（使用 INPC 或 DependecyProperty）存在于 User 对象中。您需要像这样设置它：

SelectedItem="{绑定角色，模式=TwoWay}"

请记住，您的组合的数据上下文是一个用户对象，如在 RadGrid 中选择的那样。用户类必须具有属性 Role。

我想这样就可以了，如果你还有什么问题，请告诉我。最好的祝福！

# algorithm - Prim 算法和 Dijkstra 算法的区别？

> ID：14144279
> 
> 赞同：116
> 
> 时间：2013-01-03T17:45:29.467
> 
> 标签：algorithm, graph, dijkstra, minimum-spanning-tree, prims-algorithm

Dijkstra 和 Prim 算法之间的确切区别是什么？我知道 Prim 会给出一个 MST，但 Dijkstra 生成的树也将是一个 MST。那么具体的区别是什么？

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2013-01-03T18:41:11.657

Prim的算法为图构造一棵[最小生成树](http://en.wikipedia.org/wiki/Minimum_spanning_tree)，它是连接图中所有节点的树，在连接所有节点的所有树中总成本最小。但是，MST 中任意两个节点之间的路径长度可能不是原始图中这两个节点之间的最短路径。MST 很有用，例如，如果您想以物理方式连接图表中的节点，以最低的总成本为它们提供电力。两个节点之间的路径长度可能不是最优的并不重要，因为您关心的只是它们已连接的事实。

Dijkstra 算法从某个源节点开始构造[最短路径树。](http://en.wikipedia.org/wiki/Shortest_path_tree)最短路径树是将图中的所有节点连接回源节点的树，并且具有使从源节点到图中的任何其他节点的任何路径的长度最小化的特性。这很有用，例如，如果您想构建一个道路网络，让每个人尽可能高效地到达某个重要的重要地标。但是，最短路径树不能保证是最小生成树，最短路径树边缘的成本总和可能远大于 MST 的成本。

另一个重要的区别在于算法工作的图形类型。Prim 的算法仅适用于无向图，因为 MST 的概念假定图本质上是无向的。（有向图有一种叫做“最小跨越树状结构”的东西，但是找到它们的算法要复杂得多）。Dijkstra 的算法可以在有向图上正常工作，因为最短路径树确实可以被定向。此外，Dijkstra 的算法[不一定会在包含负边权重的图中产生正确的解决方案](https://stackoverflow.com/questions/6799172/negative-weights-using-dijkstra-algorithm/6799344#6799344)，而 Prim 的算法可以处理这个问题。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2013-01-03T17:52:35.523

Dijkstra 的算法不会创建 MST，它会找到最短路径。

考虑这张图

```
 5     5
  s *-----*-----* t
     \         /
       -------
         9 
```

最短路径是 9，而 MST 是 10 处的不同“路径”。

* * *

## 回答 #3

> 赞同：87
> 
> 时间：2014-09-12T03:20:33.970

Prim 和 Dijkstra 算法几乎相同，除了“松弛函数”。

普里姆：

```
MST-PRIM (G, w, r) {
    for each key ∈ G.V
        u.key = ∞
        u.parent = NIL
    r.key = 0
    Q = G.V

    while (Q ≠ ø)
        u = Extract-Min(Q)
        for each v ∈ G.Adj[u]
            if (v ∈ Q)
                alt = w(u,v)    <== relax function, Pay attention here
                if alt < v.key
                    v.parent = u
                    v.key = alt
} 
```

迪杰斯特拉：

```
Dijkstra (G, w, r) {
    for each key ∈ G.V
        u.key = ∞
        u.parent = NIL
    r.key = 0
    Q = G.V

    while (Q ≠ ø)
        u = Extract-Min(Q)
        for each v ∈ G.Adj[u]
            if (v ∈ Q)
                alt = w(u,v) + u.key  <== relax function, Pay attention here
                if alt < v.key
                    v.parent = u
                    v.key = alt
} 
```

唯一的区别由箭头指出，即松弛函数。

*   Prim 搜索最小生成树，只关心覆盖所有顶点的总边中的最小值。松弛函数是`alt = w(u,v)`
*   Dijkstra，它搜索最小路径长度，因此它关心边缘累积。松弛函数是`alt = w(u,v) + u.key`

* * *

## 回答 #4

> 赞同：56
> 
> 时间：2012-12-10T04:27:02.193

Dijsktra 的算法找到**从节点 i 到所有节点**（您指定 i）的最小距离。因此，作为回报，您可以从节点 i 获得最小距离树。

Prims 算法为您**提供给定图形**的最小生成树。一棵连接所有节点的树，而所有成本的总和是最小的。

因此，使用 Dijkstra **，您可以以最低的成本从选定的节点转到任何其他节点，**而 Prim 无法做到这一点

* * *

## 回答 #5

> 赞同：33
> 
> 时间：2012-12-10T04:27:24.397

我看到的唯一区别是 Prim 算法存储最小成本边，而 Dijkstra 算法存储从源顶点到当前顶点的总成本。

Dijkstra 为您提供了一种从源节点到目标节点的方式，从而使成本最小。然而，Prim 的算法为您提供了一个最小生成树，这样所有节点都连接起来并且总成本最小。

简单来说：

所以，如果你想部署一列火车连接几个城市，你会使用 Prim 的算法。但是，如果您想从一个城市到另一个城市尽可能节省时间，您会使用 Dijkstra 的算法。

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2014-12-30T05:40:17.657

两者都可以使用完全相同的通用算​​法来实现，如下所示：

```
Inputs:
  G: Graph
  s: Starting vertex (any for Prim, source for Dijkstra)
  f: a function that takes vertices u and v, returns a number

Generic(G, s, f)
    Q = Enqueue all V with key = infinity, parent = null
    s.key = 0
    While Q is not empty
        u = dequeue Q
        For each v in adj(u)
            if v is in Q and v.key > f(u,v)
                v.key = f(u,v)
                v.parent = u 
```

对于 Prim, pass`f = w(u, v)`和对于 Dijkstra pass `f = u.key + w(u, v)`。

另一个有趣的事情是，上面的 Generic 也可以实现广度优先搜索（BFS），尽管它会有点过分，因为昂贵的优先级队列并不是真正需要的。要将上述通用算法转换为 BFS，传递`f = u.key + 1`这与强制所有权重为 1 相同（即 BFS 给出从点 A 遍历到 B 所需的最小边数）。

**直觉**

这是考虑上述通用算法的一种好方法：我们从两个桶 A 和 B 开始。最初，将所有顶点放在 B 中，因此桶 A 是空的。然后我们将一个顶点从 B 移动到 A。现在查看从 A 中的顶点交叉到 B 中的顶点的所有边。我们使用这些交叉边中的一些标准选择一条边，并将相应的顶点从 B 移动到A. 重复此过程，直到 B 为空。

实现这个想法的一个蛮力方法是为 A 中的顶点维护一个优先级队列，该队列跨越到 B。显然，如果图形不是稀疏的，这将是麻烦的。所以问题是我们可以改为维护顶点的优先级队列吗？事实上，我们可以最终决定从 B 中选择哪个顶点。

**历史背景**

有趣的是，这两种算法背后的技术的通用版本在概念上与 1930 年一样古老，即使当时还没有电子计算机。

故事从 Otakar Borůvka 开始，他需要一种算法，让一位家庭朋友试图弄清楚如何用最低成本的电线连接摩拉维亚国家（现为捷克共和国的一部分）的城市。他于 1926 年在与数学相关的期刊上发表了他的算法，因为当时还没有计算机科学。这引起了 Vojtěch Jarník 的注意，他想到了对 Borůvka 算法的改进，并于 1930 年发表了该算法。事实上，他发现了与我们现在所知的 Prim 算法相同的算法，并在 1957 年重新发现了它。

除了所有这些之外，1956 年，Dijkstra 需要编写一个程序来展示他的研究所开发的一台新计算机的能力。他认为让计算机找到在荷兰两个城市之间旅行的连接会很酷。他在 20 分钟内设计了算法。他创建了一个包含 64 个城市的图表并进行了一些简化（因为他的计算机是 6 位的），并为这台 1956 年的计算机编写了代码。但是他没有发表他的算法，因为主要是没有计算机科学期刊，他认为这可能不是很重要。第二年，他了解到连接新计算机终端的问题，以使电线的长度最小化。他思考了这个问题并重新发现了 Jarník/Prim' s 算法再次使用了与他一年前发现的最短路径算法相同的技术。他[提到](https://www.cs.utexas.edu/users/EWD/ewd08xx/EWD841a.PDF)他的两种算法都是在不使用笔或纸的情况下设计的。1959 年，他在一篇只有 2 页半长的[论文中发表了这两种算法。](http://www-m3.ma.tum.de/foswiki/pub/MN0506/WebHome/dijkstra.pdf)

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2013-01-04T06:04:19.110

> Dijkstra 找到它的开始节点和所有其他节点之间的最短路径。因此，作为回报，您可以从起始节点获得最小距离树，即您可以尽可能高效地到达每个其他节点。
> 
> Prims 算法为您提供给定图的 MST，即连接所有节点的树，而所有成本的总和是可能的最小值。

用一个现实的例子来做一个简短的故事：

1.  Dijkstra 想通过节省旅行时间和燃料来了解到每个目的地的最短路径。
2.  Prim 想知道如何有效地部署火车轨道系统，即节省材料成本。

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2013-01-03T17:50:25.477

直接来自[Dijkstra 算法的](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)维基百科文章：

> Dijkstra 算法的基础过程类似于 Prim 算法中使用的贪心过程。Prim 的目的是找到连接图中所有节点的最小生成树；Dijkstra 只关心两个节点。Prim's 不评估从起始节点开始的路径的总权重，仅评估单个路径。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2016-10-19T13:39:38.423

我最近被同样的问题困扰，我想我可能会分享我的理解......

我认为这两种算法（Dijkstra 和 Prim）之间的主要区别在于它们旨在解决的问题，即两个节点之间的最短路径和最小生成树 (MST)。*形式是找到节点s*和*t*之间的最短路径，合理的要求是最多访问图的每条边一次。但是，它*不需要*我们访问所有节点。后者（MST）是让我们访问*所有*节点（最多一次），并且同样的合理要求也是最多访问每条边一次。

话虽如此，Dijkstra 允许我们“走捷径”只要我可以从*s*到*t*，而不必担心后果——一旦我到达*t*，我就完成了！虽然在 MST中也有一条从*s*到*t的路径，但是这**条 s* - *t*路径是考虑到所有其余节点而创建的，因此，这条路径可以比Dijstra 算法找到的*s* - *t路径更长。*下面是一个包含 3 个节点的快速示例：

```
 2       2  
                          (s) o ----- o ----- o (t)     
                              |               |
                              -----------------
                                      3 
```

假设每个顶部边缘的成本为 2，底部边缘的成本为 3，那么 Dijktra 将告诉我们走底部路径，因为我们不关心中间节点。另一方面，Prim 将返回给我们一个顶部 2 个边缘的 MST，丢弃底部边缘。

这种差异也反映在实现的细微差别上：在 Dijkstra 算法中，在吸收一个新节点后，需要有一个记账步骤（对于每个节点）来更新从*s*开始的最短路径，而在 Prim 算法中，有没有这种需要。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2018-07-31T05:25:39.247

最简单的解释是**在 Prims 中你没有指定起始节点**，但在 dijsktra 中你（需要有一个起始节点）必须找到从给定节点到所有其他节点的最短路径。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2021-08-02T13:36:41.903

这对我来说很重要：考虑一下**算法接下来需要哪个顶点：**

Prim 的算法采用最接近树的下一个顶点**，**即最接近*树上任何位置的某个顶点*。

Dijkstra 算法接下来采用**最接近源的顶点。**

资料来源：R. Sedgewick 关于 Dijkstra 算法的讲座，算法，第二部分：[https ://coursera.org/share/a551af98e24292b6445c82a2a5f16b18](https://coursera.org/share/a551af98e24292b6445c82a2a5f16b18)

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2012-12-10T04:22:55.450

Dijkstra 算法是节点 i 和 j 之间的单源最短路径问题，而 Prim 算法是最小生成树问题。这些算法使用名为“贪婪算法”的编程概念

如果您检查这些概念，请访问

1.  贪心算法讲义：http: [//jeffe.cs.illinois.edu/teaching/algorithms/notes/07-greedy.pdf](http://jeffe.cs.illinois.edu/teaching/algorithms/notes/07-greedy.pdf)
2.  最小生成树：http: [//jeffe.cs.illinois.edu/teaching/algorithms/notes/20-mst.pdf](http://jeffe.cs.illinois.edu/teaching/algorithms/notes/20-mst.pdf)
3.  单源最短路径：http: [//jeffe.cs.illinois.edu/teaching/algorithms/notes/21-sssp.pdf](http://jeffe.cs.illinois.edu/teaching/algorithms/notes/21-sssp.pdf)

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2014-06-28T23:34:38.080

基本算法之间的关键区别在于它们不同的边缘选择标准。通常，它们都使用优先级队列来选择下一个节点，但是选择当前处理节点的相邻节点的标准不同：Prim 算法要求下一个相邻节点也必须保留在队列中，而 Dijkstra 算法则没有：

```
def dijkstra(g, s):
    q <- make_priority_queue(VERTEX.distance)
    for each vertex v in g.vertex:
        v.distance <- infinite
        v.predecessor ~> nil
        q.add(v)
    s.distance <- 0
    while not q.is_empty:
        u <- q.extract_min()
        for each adjacent vertex v of u:
            ...

def prim(g, s):
    q <- make_priority_queue(VERTEX.distance)
    for each vertex v in g.vertex:
        v.distance <- infinite
        v.predecessor ~> nil
        q.add(v)
    s.distance <- 0
    while not q.is_empty:
        u <- q.extract_min()
        for each adjacent vertex v of u:
            if v in q and weight(u, v) < v.distance:// <-------selection--------
            ... 
```

**vertex.distance**的计算是第二个不同点。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2017-12-06T18:36:09.263

**Dijkstras 算法**仅用于寻找最短路径。

在**最小生成树（Prim 或 Kruskal 算法）**中，您会得到具有最小边值的最小边值。

例如：-考虑一种情况，您不想创建一个庞大的网络，您将需要大量的电线，因此这些电线的计数可以使用**最小生成树（Prim 或 Kruskal 算法）来完成** **（即它将为您提供最少的电线数量，以最低的成本创建巨大的有线网络连接）。**

而**“Dijkstras 算法”**将用于获得两个节点之间的最短路径，同时将任何节点相互连接。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-12-30T04:07:34.233

@templatetypedef 涵盖了 MST 和最短路径之间的差异。我已经在[另一个 So 答案](https://stackoverflow.com/a/27700144/207661)中介绍了算法差异，通过证明两者都可以使用相同的通用算​​法来实现，该算法需要一个参数作为输入： function `f(u,v)`。Prim 和 Dijkstra 算法之间的区别仅仅是`f(u,v)`你使用的。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-04-24T05:38:17.007

在代码级别，另一个区别是 API。

*您使用源顶点s*初始化 Prim ，即`Prim.new(s)`; *s*可以是任何顶点，无论*s*是什么，最终结果，即最小生成树 (MST) 的边都是相同的。要获得 MST 边，我们调用方法`edges()`。

*您使用源顶点s*初始化 Dijkstra ，即`Dijkstra.new(s)`您希望获得到所有其他顶点的最短路径/距离。*最终结果，即从s*到所有其他顶点的最短路径/距离；因*s*不同而不同。*为了获得从s*到任何顶点*v*的最短路径/距离，我们分别调用方法`distanceTo(v)`和`pathTo(v)`。

# jquery - jQuery：像砌体这样的插件来克服 dom-order 和 3 个项目大小

> ID：14144281
> 
> 赞同：16
> 
> 时间：2013-01-03T17:45:31.247
> 
> 标签：jquery, responsive-design, media-queries, jquery-masonry

这可能很难解释。是否有类似 jQuery masonry 的插件能够检测预定义网格中的空间并移动和定位适合该空间的元素？

由于解释我的问题的所有其他方式都会变得复杂，所以我画了一个简单的图像来说明我的意思。

注意：这是一个流畅的响应式网页设计。

![在此处输入图像描述](../Images/5f8955352a4af306598dfe044baa4bc8.png)

所以我的dom-order是1,2,3。但是，当在某个范围内折叠我的布局时，`media-query`我想动态切换 dom 顺序或以不同方式定位元素。就像您在我的示例中看到的那样。

我知道有[jQuery Masonry](http://masonry.desandro.com/)或[jQuery Isotope](http://isotope.metafizzy.co/)之类的东西，但是这两个插件都不能填充网格的所有空白区域。例如，看看这个同位素截图……</p>

![在此处输入图像描述](../Images/37f554b715390cc77b587d076f67a425.png)

缺少一个元素。当然，在大多数情况下，这就是您想要保持元素顺序的原因。就我而言，我不关心订单，我只想填补所有空间和空白。所以就像你在上面看到的我的草图一样，`item-nr-3`应该向上移动以适应空白的间隙（因为它会适合）。如果有另一个`item`相同尺寸的，它会适合下面的间隙`item-nr-3`。

这有可能吗？是否有一些 jQuery 插件可以做到这一点？或者你有其他科吗？

* * *

**一些附加信息：**`items`和 我正在谈论 的框都设置为`box-sizing:border-box`所以我不必担心填充或边距。

* * *

**更新：** 这是问题的实时示例：http: [//jsfiddle.net/r79u2/1/](http://jsfiddle.net/r79u2/1/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-07T17:37:34.847

> **编辑**
> 
> 自发布此消息以来，我添加了对“Gutters”和回调的支持

我写了一个插件，可以满足您的需求。不完全是，但你可以用它来为你指明正确的方向......

插件 - [https://github.com/DrewDahlman/Mason](https://github.com/DrewDahlman/Mason)

关于理论的博客文章 - [http://www.drewdahlman.com/meusLabs/?p=218](http://www.drewdahlman.com/meusLabs/?p=218)

想法是这样的——我们知道我们有很多元素——梅森的工作是用这些向左浮动的元素填充一个定义的空间——这会导致“间隙”，所以我们需要检测这些间隙并以某种方式填充它们. 为了做到这一点，我们可以复制一个已经存在的元素，或者 - 我们可以拥有一桶“填充”元素，我们可以填充该空间。

OP - 如果你正在寻找一个带有一些控制的随机大小的网格，这将完成工作。我做了这个小提琴 - [http://jsfiddle.net/bdGVr/](http://jsfiddle.net/bdGVr/)

每次运行它或调整网格重新绘制的窗口大小时，您都会注意到。这将导致任何空白都被红色块填充。

使用选项，`mason.js`您可以调整相对于容器大小的比率，以及可能的大小组合。

示例 - 1.8 的比率和 1x3 的大小意味着 1.8 x 1 = 高度，1.8 x 3 = 宽度。

# sql - 根据tableB上的数据从tableA中批量删除

> ID：14144283
> 
> 赞同：1
> 
> 时间：2013-01-03T17:45:33.760
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

我正在尝试实现批量删除。我在网上找到了这段代码：

```
DECLARE @rowcount int = 1
WHILE (@rowcount != 0 ) BEGIN
    DELETE T1
    FROM (SELECT TOP (50) * FROM Orders WHERE OrderCity = @city) T1

    SELECT @rowcount = @@ROWCOUNT
END 
```

这个想法是从@city删除所有订单

它似乎工作正常，但在我的现实中，我需要`delete from Orders where OrderCity in (select ID from SomeOtherTable)`

如果我尝试做同样的事情，它会起作用，但需要很长时间，因为 SomeOtherTable 将包含大约 150 万行，并且正在从主表中删除数据，所以它不会变得更小（它不包含城市，它的另一件事）。

我也不能加入两个表，因为它不会运行说不止一个表会受到影响。

所以基本上我的问题是：无论如何要从tableA中批量删除tableA.ID IN（从tableB中选择ID）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:06:10.007

是的，您无需加入即可：

```
DELETE tableA
FROM tableB 
WHERE tableA.ID = tableB.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:03:15.643

```
Delete Order
FROM
Order INNER JOIN SomeOtherTable ON Order.OrderCity = SomeOtherTable.ID 
```

这可以解决你的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T18:03:45.487

您应该能够基于连接进行删除。尝试

```
DELETE FROM tableA
FROM tableA A
JOIN tableB B ON A.ID = B.ID 
```

此外，如果 tableB 有大约一百万行，那么如果您在 ID 列上有一个索引，那将真的很有帮助。

# api - 从friend_request FQL 表中检索发送的好友请求列表

> ID：14144284
> 
> 赞同：2
> 
> 时间：2013-01-03T17:45:42.807
> 
> 标签：api, facebook-graph-api, facebook-fql

我需要显示我已发送的好友请求列表。我尝试使用 FQL：

> 选择时间，来自朋友请求的消息，其中 uid_from = me()

但是，这总是会返回一条错误消息：

> uid_from 字段未编入索引

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:59:52.900

这是不可能[的——friend_request FQL 表的文档](https://developers.facebook.com/docs/reference/fql/friend_request/)清楚地表明，表中唯一的可索引字段是`uid_to`

您可以阅读发送给当前用户的好友请求列表，或检查当前用户发送的任何好友请求的状态，前提是您知道它发送给了哪个用户。

IE

> 选择时间，来自朋友请求的消息 WHERE uid_to = me()

或者

> SELECT time, message FROM friend_request WHERE uid_from = me() and uid_to = [USER ID HERE]

您无法检索当前用户发送的所有好友请求。

# java - 有没有更好的方法在 Matcher 中使用 group() 提取名称值？

> ID：14144288
> 
> 赞同：0
> 
> 时间：2013-01-03T17:45:48.823
> 
> 标签：java

从输入字符串中提取命名数据时，使用 Matcher.group(String groupname) [http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html)

在下面的代码中， receivedData 是一个包含组名称的哈希图。我必须遍历它以获取每个名称，然后调用 group(name)。hashmap 必须单独维护，并且可能会输入错误的名称或与正则表达式中的名称不同步，因为它们的数量很大。

```
String patternOfData = "On (day) I ate (mealName) at (restaurant) where they had a deal (entree) for only (price)"; 
```

编译 Pattern 后，

```
Pattern dataExtractionPattern = Pattern.compile(patternOfData);

Matcher matcher = dataExtractionPattern.matcher(receivedDataString);
                boolean b = matcher.matches();
                if (!b) {
                    return false;
                }
                for (String key : receivedData.keySet()) {
                    String dataValue;
                    dataValue = matcher.group(key);
                    receivedData.put(key, dataValue);
                }
                return true; 
```

如果我们同时返回 name 和 value 会更好吗？像 Map.entry group();

还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:59:41.313

首先，Java 7 中新提供的命名捕获组看起来像 (?< *NAME* > *PATTERN* )，其中*NAME*是组的名称，*PATTERN*是要匹配的模式。所以你的示例正则表达式就像`On (?<day>\S+) I ate (?<mealName>\S+)...`

如果模式是固定的，那么没有理由不能拥有固定的组名列表。然后，您可以`receivedData`从头开始迭代这些组名，而不是需要已经使用正确的键进行设置。

# ios - 有没有办法在应用程序处于前台时显示本地通知

> ID：14144289
> 
> 赞同：2
> 
> 时间：2013-01-03T17:45:53.197
> 
> 标签：ios, iphone-privateapi

我知道当应用程序处于前台时处理本地通知的标准方法：

*   接收应用程序：didReceiveRemoteNotification：
*   在其中显示一个 UIAlertView（或任何其他 UI）

我的问题是，当应用程序处于前台时，是否有可能（甚至使用私有 api）在状态栏区域显示通知消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T19:40:31.870

In my knowledge NO.

### My suggestion

The best option will be, you need to add a banner on top of your application to show the effect of UILocalNotification. It'll be better than relying on private API's (if any).

# firefox - 如何在firefox中创建一个带有指定字符集的新iframe？

> ID：14144290
> 
> 赞同：1
> 
> 时间：2013-01-03T17:46:18.023
> 
> 标签：firefox, iframe, utf-8

火狐

父页面：charset是utf8

现在想创建一个iframe页面：charset is gbk

但火狐似乎无法设置字符集

```
var doc = window.content.document;
var iframe=doc.createElement("iframe");  
iframe.src="about:blank";  
iframe.setAttribute("style","display:none;visibility:hidden;");  
doc.body.appendChild(iframe);  

var d; 

if(iframe.contentDocument) { 
        d = iframe.contentDocument; 
} else {
        d = iframe.contentWindow.document; 
}
d.charset=d.characterSet="GBK";  
d.documentElement.innerHTML="<body><span>some GBK</span></body>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:56:19.763

...“ IE 具有`document.charset`正式读/写的脚本属性。

基于 Gecko 的浏览器确实具有只读`document.characterSet`属性。” ...

**参考：** [http ://forums.asp.net/t/1772657.aspx/1](http://forums.asp.net/t/1772657.aspx/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T19:26:24.250

Iframe 的编码是什么并不重要，因为当您直接将 iframe 内容设置为某个字符串时，不会发生解码。如果有问题，那么包含的*javascript 文件*

```
d.documentElement.innerHTML="<body><span>some GBK</span></body>"; 
```

已被错误编码或以错误的编码声明。

# batch-file - BAT 文件的问题：IF/ELSE 未按预期工作

> ID：14144292
> 
> 赞同：1
> 
> 时间：2013-01-03T17:46:34.303
> 
> 标签：batch-file

我正在尝试制作一个简短的 BAT 文件，但我在使用它的一个功能时遇到了问题。我已经尝试了许多不同的方法来做到这一点，但它们似乎都不起作用，但作为一个初学者，我无法弄清楚问题所在。基本上，脚本在运行时应该检查某个 .BAT 文件是否存在，如果存在，脚本会询问用户是否要运行它。如果用户指示 Y，则调用另一个 BAT，然后继续执行原始脚本。如果用户指示 N，则脚本应该在不调用其他 BAT 的情况下继续执行。到目前为止，脚本总是注意到并询问该文件，但在提示符处选择 Y 永远不起作用。我确信解决方案是显而易见的，但它正在逃避我。这是代码：

```
SET /P kmname=Enter database name:

:kmstart

IF EXIST C:\Visual\area\%kmname%\%kmname%.flt (
        ECHO %kmname%.flt found, will now create %kmname%.ive.
        CD C:\Visual\area\%kmname%\
        IF EXIST Preprocess.bat (
            SET /P kmpreproc=Found Preprocess.bat. Do you want to run it now?
            IF /I "%kmpreproc%" EQU "Y" (
                GOTO PREPROC
            ) ELSE (
                GOTO CONTINUE
            )
        )
        GOTO CONTINUE   
    ) ELSE (
        ECHO C:\Visual\area\%kmname%\%kmname%.flt does not exist. Try again.
        SET /P kmname=Enter database name: 
        GOTO kmstart
    )
:PREPROC
ECHO Running Preprocess.bat.
:CONTINUE
ECHO Continuing process.
PAUSE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T08:40:48.587

问题是您的变量在进入 's 之前正在被评估`if`，这意味着 cmd 在它们结束之前不会看到任何更改。

作为变量，这会给您带来问题，`kmpreproc`并且根据第一个`if`结果，在块`kmname`内发生变化。`if`

修复（假设您的代码的其余部分正在工作）是通过将`%`'s更改为`!`变量来启用延迟扩展并使用延迟扩展而不是正常扩展。

```
setlocal enabledelayedexpansion
SET /P kmname=Enter database name:

:kmstart

IF EXIST C:\Visual\area\!kmname!\!kmname!.flt (
        ECHO !kmname!.flt found, will now create !kmname!.ive.
        CD C:\Visual\area\!kmname!\
        IF EXIST Preprocess.bat (
            SET /P kmpreproc=Found Preprocess.bat. Do you want to run it now?
            IF /I "!kmpreproc!" EQU "Y" (
                GOTO PREPROC
            ) ELSE (
                GOTO CONTINUE
            )
        )
        GOTO CONTINUE   
    ) ELSE (
        ECHO C:\Visual\area\!kmname!\!kmname!.flt does not exist. Try again.
        SET /P kmname=Enter database name: 
        GOTO kmstart
    )
:PREPROC
ECHO Running Preprocess.bat.
:CONTINUE
ECHO Continuing process.
PAUSE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T02:42:49.613

下面是我更正和整理的代码：

```
@echo off
SET /P kmname=Enter database name:

:kmstart

IF EXIST C:\Visual\area\%kmname%\%kmname%.flt (
        ECHO %kmname%.flt found, will now create %kmname%.ive.
        CD C:\Visual\area\%kmname%\
        IF EXIST Preprocess.bat (
            SET /P kmpreproc=Found Preprocess.bat. Do you want to run it now?
            IF /I "%kmpreproc%"=="Y" (
                GOTO PREPROC
                ) 
        GOTO CONTINUE  
        )       
)
        ECHO C:\Visual\area\%kmname%\%kmname%.flt does not exist. Try again.
        SET /P kmname=Enter database name: 
        GOTO kmstart

:PREPROC
ECHO Running Preprocess.bat.
call "cmd /c start Preprocess.bat"
pause

:CONTINUE
ECHO Continuing process.
PAUSE 
```

如果它不起作用，请尝试`setlocal EnableDelayedExpansion`在下面写入`@echo off`并将所有内容替换`%`为`!`.

# java - 分页数据表在下一页中不显示任何记录

> ID：14144294
> 
> 赞同：0
> 
> 时间：2013-01-03T17:46:48.910
> 
> 标签：java, jsf, primefaces, datatable, spring-security

我有一个带分页`rows = 7`的数据表：前 7 个项目已正确加载和显示；但是当我们单击链接查看下一组元素时，会显示“未找到记录”。

对于表格页脚模板，我们使用了

```
 In total there are #{fn:length(deviceBean.devices)} devices. 
```

这向我们展示了（找到了 11 项），其中有更多要显示的项目

我究竟做错了什么 ？

这里的xhtml文件代码：

```
 <f:view xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions">

    <h:head />

    <h:form>
        <p:growl id="messages">
            <p:toolbarGroup align="right">
                <p:commandButton type="button" value="Summary" />
                <p:separator />
            </p:toolbarGroup>
        </p:growl>
    </h:form>

    <h:form>

        <p:dataTable id="tbl1" var="searchvalue"
            value="#{searchBean.searchmodel}" rows="1">
            <p:column>

                <f:facet name="header">
                    <h:outputText value="Search Criteria" />
                </f:facet>
                <h:outputText value="By State Name" />
            </p:column>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="Search Input" />
                </f:facet>
                <h:outputText value="#{searchvalue.criteria}" />
            </p:column>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="Selected Model" />
                </f:facet>
                <h:outputText value="#{searchvalue.model}" />
            </p:column>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="Start date" />
                </f:facet>
                <h:outputText value="#{searchvalue.startdate}" />
            </p:column>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="End date" />
                </f:facet>
                <h:outputText value="#{searchvalue.enddate}" />
            </p:column>
            <!-- <p:column>
                <f:facet name="header">
                    <h:outputText value="Age Range" />
                </f:facet>
                <h:outputText value="#{searchvalue.agerange}" />
            </p:column> -->

        </p:dataTable>
    </h:form>
<p:spacer width="100" height="10" /> and <p:spacer width="20" height="20" />
<h:outputText value="&#160;" />
    <h:form>

        <h:form>
            <p:growl id="messages">
                <p:toolbarGroup align="right">
                    <p:commandButton type="button" value="Detail:" />
                    <p:separator />
                </p:toolbarGroup>
            </p:growl>
        </h:form>

        <p:dataTable id="tbl" var="device" value="#{deviceBean.devices}"
            paginator="true" rows="7">
            <p:column>
                <f:facet name="header">
                    <h:outputText value="Name" />
                </f:facet>
                <h:outputText value="#{device.name}" />
            </p:column>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="Email" />
                </f:facet>
                <h:outputText value="#{device.email}" />
            </p:column>

            <f:facet name="footer">  
            In total there are #{fn:length(deviceBean.devices)} devices.  
          </f:facet>

        </p:dataTable>

        <br />

    </h:form>

</f:view> 
```

这是托管 bean 类：

```
@ManagedBean
@ViewScoped
public class SearchBean implements Serializable {

    HttpServletRequest request = (HttpServletRequest) (FacesContext.getCurrentInstance().getExternalContext().getRequest());
    private List<SearchModel> searchmodel = (List) request.getAttribute("search_attributes");

    public List<SearchModel> getSearchmodel() {
        return searchmodel;
    }

} 
```

@BalusC：不，我没有使用过 Spring Security 之外的任何东西，我没有通过 Spring 管理 bean，我可以解释它是如何工作的：在 Spring security 进行安全身份验证后，控件进入 welcom.jsp 页面，在这个页面中我有used `<jsp:forward page="/faces/index.xhtml"></jsp:forward`，这是我的表单，提交表单时，我调用一个包含表单数据的类，该类（Showsummary.java）进行数据查询并将数据放入键值对中，如 req.setAttribute("search_attributes", searchattributes) ; ，然后控制权再次进入我的托管 bean，它返回“成功”，这被映射到我上面在我的 faces-config 中显示的 xhtml 文件，summary.xhtml 的托管 bean 我上面编写的代码访问数据这边走 ：

```
HttpServletRequest request = (HttpServletRequest) (FacesContext.getCurrentInstance().getExternalContext().getRequest());
    private List<SearchModel> searchmodel = (List) request.getAttribute("search_attributes");

    public List<SearchModel> getSearchmodel() {
        return searchmodel;
    } 
```

# sql - 如何根据结束日期运行年初至今的查询

> ID：14144295
> 
> 赞同：0
> 
> 时间：2013-01-03T17:46:51.000
> 
> 标签：sql, datetime, sql-server-2000

我有一个基于选择的“结束日期”运行的查询。本质上，用户选择结束日期，查询将根据结束日期运行整个 YTD 的报告。因此，例如，如果我选择“12/3/12”，它应该从 1/1/12 - 12/3/12 运行报告。如果您在当天运行它，这将起作用......今天我尝试在结束日期“12/31/12”运行它但是我没有返回任何结果，因为我认为它试图根据今天的日期获取开始日期？以下是我的查询：

```
SELECT        Store_Number, COUNT(DISTINCT Customer_Email_Address) AS Customer_email_address, COUNT(DISTINCT Invoice_Number) AS [Total Cars], 
                         @enddate AS End_Date, DATEADD(yy, DATEDIFF(yy, 0, GETDATE()), 0) AS Start_Date
FROM            Invoice_Tb
WHERE        (Invoice_Date BETWEEN DATEADD(yy, DATEDIFF(yy, 0, GETDATE()), 0) AND CONVERT(Datetime, @enddate, 102))
GROUP BY Store_Number 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T17:51:06.433

`GetDate()`用参数替换`@enddate`它应该可以工作：

```
SELECT        
    Store_Number, 
    COUNT(DISTINCT Customer_Email_Address) AS Customer_email_address, 
    COUNT(DISTINCT Invoice_Number) AS [Total Cars], 
    @enddate AS End_Date, 
    DATEADD(yy, DATEDIFF(yy, 0, @enddate), 0) AS Start_Date
FROM Invoice_Tb
WHERE (Invoice_Date BETWEEN DATEADD(yy, DATEDIFF(yy, 0, @enddate), 0) 
                    AND CONVERT(Datetime, @enddate, 102))
GROUP BY Store_Number 
```

如果您查询：

```
declare @enddate datetime = '12/31/2012'

select DATEADD(yy, DATEDIFF(yy, 0, @enddate), 0) 
```

它会返回`2012-01-01`你想要的。

# jquery - 在页面加载时直观地计数

> ID：14144297
> 
> 赞同：5
> 
> 时间：2013-01-03T17:46:57.753
> 
> 标签：jquery, animation, timer

我的页面上有一些编号的统计数据，我想让它们更具视觉吸引力。我认为使用 jQuery 来模拟计数到该数字可能很酷。

所以在页面加载时，假设这个数字是 32。这个数字将从 0 开始，最多计数 32，每个数字之间有一些延迟间隔。

![在此处输入图像描述](../Images/9783be09808661b47de23a5e3885d5ff.png)

我将如何做到这一点？这是我尝试过的代码，但它不起作用。它捕获页面上的数字（有 3 个 statRibbons），但它并没有在视觉上进行计数，我可以看到每个数字 0、1、2、3 等。理想情况下，它会在一个time 而不是同时，但如果它需要大量的额外代码，那没关系。.each 无论如何都应该处理这个问题，我想。

```
$(function() {
  $(".statRibbon .bigStat span").each(function() {
      var tmp = this.innerHTML;
      var i = 0;
      while(i != tmp) {
          $(".statRibbon .bigStat span").innerHTML(i++);
          alert(i);
      }
  });
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T17:57:48.967

这对你有什么作用？

[http://jsfiddle.net/WpJxn/1/](http://jsfiddle.net/WpJxn/1/)

更改`50`setTimeout 函数末尾的 以更改以毫秒为单位的速度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T18:03:30.843

我会用 setInteval 替换 while

```
$(function() {
    $(".statRibbon .bigStat span").each(function() {
        var that = $(this),
            tmp = that.html(),
            i = 0,
            interval;

        that.html(0);
        interval = setInterval(function() {
            that.html(++i);
            if (i === +tmp) clearInterval(interval);
        }, 50);
    });
});​ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-22T15:33:55.117

如果有人想以一定的增量增加计数器，请使用，

// HTML

```
<span class="stat-count">10000</span> 
```

// JS

```
$(function() {
    function count($this){
        var current = parseInt($this.html(), 10);
        current = current + 50; /* Where 50 is increment */

    $this.html(++current);
    if(current > $this.data('count')){
        $this.html($this.data('count'));
    } else {    
        setTimeout(function(){count($this)}, 5);
    }
}        

$(".stat-count").each(function() {
  $(this).data('count', parseInt($(this).html(), 10));
  $(this).html('0');
  count($(this));
 });

}); 
```

Jquery 对页面加载的计数有一定的限制、计数时间和计数增量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T17:53:45.440

在我看来，在您提醒号码之前或之后，您需要在循环中进行某种睡眠或延迟。试试`setTimeout`方法。

您可以在此问题中找到更多信息：[Jquery：如何睡眠或延迟？](https://stackoverflow.com/questions/2939980/jquery-how-to-sleep-or-delay)

# c# - WPF 中的依赖属性——如何绑定到它？

> ID：14144299
> 
> 赞同：1
> 
> 时间：2013-01-03T17:47:00.513
> 
> 标签：c#, wpf, data-binding

假设我在 WPF UserControl 中有以下代码。我想绑定到`Asset.ChildProperty`. 它目前不起作用，因为 Asset 属性更改时我没有收到通知。如何安排事情，以便在 AssetID 更改时触发 Asset 属性的通知？

```
public static readonly DependencyProperty AssetIdProperty = DependencyProperty.Register("AssetId", typeof(string), typeof(GaugeBaseControl));

[Browsable(false), DataMember]
public string AssetId
{
    get { return (string)GetValue(AssetIdProperty); }
    set { SetValue(AssetIdProperty, value); }
}

[DisplayName("Asset Item"), Category("Value Binding")]
public AssetViewModel Asset
{
    get { return Manager.Models.FirstOrDefault(m => m.Model.UniqueId == AssetId); }
    set
    {
        if (value == null)
            AssetId = string.Empty;
        else
            AssetId = value.Model.UniqueId;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:04:44.710

`PropertyMetadata`您可以在 a的`DependencyProperty`值更改时调用的回调方法中指定一个回调方法，`DependencyProperty`并从该回调方法引发`PropertyChanged`事件。

```
public class MyClass : DependencyObject, INotifyPropertyChanged
{

    public MyClass ()
    {
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public bool State
    {
        get { return (bool)this.GetValue(StateProperty); }
        set { this.SetValue(StateProperty, value); } 
    }

    public static readonly DependencyProperty StateProperty =
        DependencyProperty.Register(
            "State", 
            typeof(bool), 
            typeof(MyClass),
            new PropertyMetadata(
                false, // Default value
                new PropertyChangedCallback(OnDependencyPropertyChange)));

    private static void OnDependencyPropertyChange(
        DependencyObject d, 
        DependencyPropertyChangedEventArgs e)
    {
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged(d, 
                new PropertyChangedEventArgs(e.Property.Name);
        }
    }
} 
```

如果您`PropertyChanged`从`State`属性的 setter 引发事件，那么在绑定属性时它们不会触发，因为绑定`StateProperty`直接调用，而不是`State`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:49:41.537

实现`INotifyPropertyChanged`并在更改时引发`PropertyChanged`事件`Asset`（在 setter 方法中）。

# c++ - MiniMax 到 Alpha-Beta 搜索转换的问题

> ID：14144301
> 
> 赞同：0
> 
> 时间：2013-01-03T17:47:02.830
> 
> 标签：c++, artificial-intelligence, minimax, alpha-beta-pruning

好的，我的问题对于玩过棋盘游戏编程的人来说应该很熟悉，所以这里是：

*   我已经实现了 MiniMax 算法的一个变体（返回移动而不是最小/最大值）。
*   我也尝试将其设置为 alpha-beta，尽管它最终完全失败了。

所以，这是我的 MiniMax 代码：

```
Move* Board::miniMax(int depth)
{
    return this->maxMove(1, depth);
}

Move* Board::maxMove(int ply, int depth)
{
    vector<Move*> moves = this->possibleMoves();
    int movesSize = moves.size();

    Move* maxMove = new Move(MINUS_INF);

    for (int i=0; i<movesSize; i++)
    {
        Move* move = moves[i];
        HASHMAKE(move,this);

        move->value = (ply<depth) ? (this->minMove(ply+1, depth))->value 
                                  : this->eval();

        maxMove = MAXMOVE(maxMove,move);

        UNHASHMAKE(move,this);
    }

    return maxMove;
}

Move* Board::minMove(int ply, int depth)
{
    vector<Move*> moves = this->possibleMoves();
    int movesSize = moves.size();

    Move* minMove = new Move(PLUS_INF);

    for (int i=0; i<movesSize; i++)
    {
        Move* move = moves[i];
        HASHMAKE(move,this);

        move->value = (ply<depth) ? (this->maxMove(ply+1, depth))->value 
                                  : this->eval();

        minMove = MINMOVE(minMove,move);

        UNHASHMAKE(move,this);
    }

    return minMove;
} 
```

有什么想法可以调整上述内容以使其成为 Alpha-Beta 搜索吗？

* * *

这是我对 Alpha-Beta 转换的尝试（失败得很惨）：

```
Move* Board::alphaBeta(int depth)
{
    return this->alphaMax(1,depth,MINUS_INF,PLUS_INF);
}

Move* Board::alphaMax(int ply, int depth, int a, int b)
{
    vector<Move*> moves = this->possibleMoves();
    int movesSize = moves.size();

    Move* maxMove = new Move(MINUS_INF);

    for (int i=0; i<movesSize; i++)
    {
        Move* move = moves[i];
        HASHMAKE(move,this);

        move->value = (ply<depth) ? (this->alphaMin(ply+1, depth,a,b))->value 
                                  : this->eval();

        maxMove = MAXMOVE(maxMove,move);
        if (maxMove->value>=b) return maxMove;
        a = MAXVAL(a,maxMove->value);

        UNHASHMAKE(move,this);
    }

    return maxMove;
}

Move* Board::alphaMin(int ply, int depth, int a, int b)
{
    vector<Move*> moves = this->possibleMoves();
    int movesSize = moves.size();

    Move* minMove = new Move(PLUS_INF);

    for (int i=0; i<movesSize; i++)
    {
        Move* move = moves[i];
        HASHMAKE(move,this);

        move->value = (ply<depth) ? (this->alphaMax(ply+1, depth,a,b))->value 
                                  : this->eval();

        minMove = MINMOVE(minMove,move);
        if (minMove->value<=a) return minMove;
        b = MINVAL(b,minMove->value);

        UNHASHMAKE(move,this);
    }

    return minMove;
} 
```

* * *

**提示*（避免任何误解）*：**

*   该`this->eval()`函数从玩家 A 的角度返回一个分数。例如，+100 分表示该位置有利于玩家 A，而 -100 分表示该位置有利于玩家 B。

*   `MINUS_INF`并`PLUS_INF`分别被定义为一些任意小的和大的值。

*   这不像家庭作业或任何东西（如果是的话，我很可能永远不会有兴趣玩这些东西......哈哈）

*   `Move`是一个简单的类，包含有关移动的详细信息，以及它的相应值（由`eval`函数分配。

*   `HASHMAKE`并且`UNHASHMAKE`只是 2 个 move-(un)making 和 move-(un)hashing 宏，应该没什么区别。

*   `MAXMOVE`定义如下：`#define MAXMOVE(A,B) (((A)->value>=(B)->value)?(A):(B))`

*   `MINMOVE`定义如下：`#define MINMOVE(A,B) (((A)->value<=(B)->value)?(A):(B))`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T01:19:04.840

不知道是不是这样，但我认为`alphaMin`

```
if (minMove->value<=a) return minMove;
b = MINVAL(b,minMove->value);
UNHASHMAKE(move,this); 
```

应该

```
UNHASHMAKE(move,this);
if (minMove->value<=a) return minMove;
b = MINVAL(b,minMove->value); 
```

也有类似的变化`alphaMax`。

# java - Primefaces p:fileDownload with datatable

> ID：14144306
> 
> 赞同：3
> 
> 时间：2013-01-03T17:47:09.563
> 
> 标签：java, primefaces

我有一个数据表，它返回一个文件夹的所有文件，并且可以使用 primefaces p:filedownload 资源下载该文件。

它工作正常，但是当加载代码时，我无法修改文件，因为 FileInputStream 已打开。如果我在数据表加载期间关闭 FileInputStream，p:filedownload 不起作用

任何人？

（如果我取消注释注释部分，文件下载不起作用，如果我保留它，我无法通过 Windows 编辑文件）

爪哇：

```
public List<StreamedContent> getAnexosQuestionarios() {
List<StreamedContent> resultado = new ArrayList<StreamedContent>();
File[] arquivos = FileHelper.listarArquivos(selected.getEmpresa().getDiretorio(), FileHelper.QUESTIONARIOS);

if (arquivos != null) {
    for (File arquivo : arquivos) {
    InputStream stream = null;
    try {
        stream = new FileInputStream(arquivo.getAbsolutePath());
        String extensao = arquivo.getName().substring(arquivo.getName().lastIndexOf(".") + 1);

        StreamedContent file = new DefaultStreamedContent(stream,
        MimeTypes.valueOf(extensao).getMimeType(),
        arquivo.getName());
        resultado.add(file);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
    }
    // try {
    // stream.close();
    // } catch (IOException e) {
    // // TODO Auto-generated catch block
    // e.printStackTrace();
    // }
}
return resultado;
} 
```

HTML：

```
<p:panel header="Questionários">
                    <p:dataTable id="dtAnexosQuestionarios"
                        value="#{tecnologiaEmpresaController.anexosQuestionarios}"
                        var="arquivo" widgetVar="dtAnexosQuestionarios"
                        emptyMessage="Nenhum anexo disponível"
                        style="width:50%; border:2 !important; border-color:white !important;">
                        <p:column headerText="" style="width:20px;">
                            <h:graphicImage
                                value="../resources/images/#{tecnologiaEmpresaController.getExtensao(arquivo.name)}.png" />
                        </p:column>
                        <p:column headerText="Arquivo">
                            <p:commandLink id="downloadLink" value="#{arquivo.name}"
                                ajax="false">
                                <p:fileDownload value="#{arquivo}" />
                            </p:commandLink>
                        </p:column>
                    </p:dataTable>
                </p:panel> 
```

谢谢 ！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T17:21:30.123

感谢 sabrina.bettini，问题得到了解决

这是我修复的代码：

填充数据表的代码：

```
 public List<StreamedContent> getAnexosInformacoes() {
List<StreamedContent> resultado = new ArrayList<StreamedContent>();
File[] arquivos = FileHelper.listarArquivos(selected.getEmpresa().getDiretorio(), FileHelper.INFORMACOES);

if (arquivos != null) {
    for (File arquivo : arquivos) {
    InputStream stream = null;
    try {
        stream = new FileInputStream(arquivo.getAbsolutePath());
        String extensao = arquivo.getName().substring(arquivo.getName().lastIndexOf(".") + 1);

        StreamedContent file = new DefaultStreamedContent(stream,MimeTypes.valueOf(extensao).getMimeType(),arquivo.getName());
        resultado.add(file);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
    try {
        stream.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    }
}

return resultado;
} 
```

使用 actionlistener 打开文件的代码：

```
StreamedContent arquivo;

public void prepararArquivoInformacoes(final StreamedContent arq) {
InputStream stream = null;
String caminho = FileHelper.retornarCaminhoPasta(selected.getEmpresa().getDiretorio(), FileHelper.INFORMACOES);
try {
    stream = new FileInputStream(caminho + File.separator + arq.getName());
    this.arquivo = new DefaultStreamedContent(stream, MimeTypes.valueOf("pdf").getMimeType(), arq.getName());
} catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
}

public StreamedContent getArquivo() {
return arquivo;
} 
```

HTML：

```
 <p:panel header="Informações">
                <p:dataTable id="dtAnexosInformacoes"
                    value="#{tecnologiaEmpresaController.anexosInformacoes}"
                    var="arquivo" widgetVar="dtAnexosInformacoes"
                    emptyMessage="Nenhum anexo disponível"
                    style="width:50%; border:2 !important; border-color:white !important;">
                    <p:column headerText="" style="width:20px;">
                        <h:graphicImage
                            value="../resources/images/#{tecnologiaEmpresaController.getExtensao(arquivo.name)}.png" />
                    </p:column>
                    <p:column headerText="Arquivo">
                        <p:commandLink id="downloadLink" value="#{arquivo.name}" 
                            ajax="false" actionListener="#{tecnologiaEmpresaController.prepararArquivoInformacoes(arquivo)}">
                            <p:fileDownload value="#{tecnologiaEmpresaController.arquivo}" />
                        </p:commandLink>
                    </p:column>
                </p:dataTable>
            </p:panel>
        </p:panel> 
```

文件助手：

```
static FileService fileService;

public static final String PASTA_RAIZ = "P:\\";
public static final String INFORMACOES = "1\. Informacoes";
public static final String QUESTIONARIOS = "2\. Questionarios";
public static final String RELATORIOS = "3_Relatorio";

public static File[] listarArquivos(final String empresa, final String tipo) {
File file = new File(PASTA_RAIZ + empresa + File.separator + tipo + File.separator);
return file.listFiles();
}

public static String retornarCaminhoPasta(final String empresa, final String tipo) {
File file = new File(PASTA_RAIZ + empresa + File.separator + tipo + File.separator);
return file.getAbsolutePath();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T18:07:47.860

尝试使用 StreamedContent file = new DefaultStreamedContent(stream,"application/octet-stream", arquivo.getName());

* * *

这就是我在我的应用程序中的做法：

我不使用数据表。我使用 ui:repeat 遍历 ArquivoAnexo 列表。

```
<ui:repeat value="#{lista}" var="arquivo" varStatus="status">

<h:commandLink actionListener="#{cadastrarBean.prepararDownloadArquivo(arquivo)}" styleClass="downloadArquivoAnexo">
    <p:fileDownload value="#{cadastrarBean.arquivoParaDownload}"/>
</h:commandLink>

public void prepararDownloadArquivo(ArquivoAnexo arquivo) {
    byte[] conteudo = arquivo.getArquivo();
    String nome = arquivo.getNomeArquivo();
    this.arquivoParaDownload = new DefaultStreamedContent(new ByteArrayInputStream(conteudo), "application/octet-stream", nome);
}

public StreamedContent getArquivoParaDownload() {
    return arquivoParaDownload;
}

public interface ArquivoAnexo {    
    byte[] getArquivo();    
    String getNomeArquivo();
    String getDescricao();    
    void setDescricao(String descricao);
    void setArquivo(byte[] conteudo);    
    void setNomeArquivo(String nome);
} 
```

# jsf-2 - 定义一组 taglib 定义 xmlns

> ID：14144310
> 
> 赞同：2
> 
> 时间：2013-01-03T17:47:20.000
> 
> 标签：jsf-2, namespaces, facelets, taglib

我的大多数 .xhtml facelets 都以这样的开头

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui"
xmlns:of="http://omnifaces.org/functions"
xmlns:comps="http://java.sun.com/jsf/composite/comps"> 
```

是否可以将其定义为一个公共位置的组并让所有文件都指向它？

这样当我决定开始使用新库时，可以在任何文件中轻松访问它。

# grails - 服务回调的 grails 约束 - 属性需要大写首字母

> ID：14144312
> 
> 赞同：2
> 
> 时间：2013-01-03T17:47:20.247
> 
> 标签：grails

我已经升级了一个 grails 项目 1.3.9 -> 2.2，现在我收到一个关于回调到具有大写首字母的外部服务的约束的错误。我已经删除了此属性的约束要求，但想找到一种方法来保留约束功能，但我需要一个带有大写字母的属性。我不控制发送回大写参数的外部 API。

回调闭包如下所示：

```
class CallbackCommand{                                                                                                                                                       
   String token                                                                                                                                                                    
   String ID                                                                                                                                                                  

   static constraints = {                                                                                                                                                          
      token nullable: false                                                                                                                                                        
      //ID nullable: false                                                                                                                                                    
   }                                                                                                                                                                               
} 
```

我已经评论了 ID 约束，因为它由于首字母大写而失败。如何强制执行此约束但保持参数命名与外部 API 一致？

# linux - LInux 用进程状态检查替换睡眠调用

> ID：14144313
> 
> 赞同：0
> 
> 时间：2013-01-03T17:47:20.907
> 
> 标签：linux, command-line

Linux bash 推荐：

我有如下的 .sh 脚本，其中有几个睡眠调用，有没有办法可以替换睡眠调用 b/c 睡眠时间可能不准确，我想检查进程运行时间并在前一个进程完成后继续。

```
./deploy.sh
sleep 60
./stop-tomcat.sh
sleep 60
./start-tomcat.sh stop 
```

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:38:02.600

-- 查找 PID

```
$ pgrep gcalctool
15435 
```

等待非子进程等待

```
while [ -e /proc/15435 ]; do sleep 0.1; done 
```

# python - 使用 Python 从 CSV 中删除不需要的逗号

> ID：14144315
> 
> 赞同：5
> 
> 时间：2013-01-03T17:47:32.270
> 
> 标签：python, csv

我需要一些帮助，我有一个包含地址字段的 CSV 文件，无论谁将数据输入原始数据库，都使用逗号分隔地址的不同部分 - 例如：

柏街5号室

当我尝试使用 CSV 文件时，它会将这个条目视为两个单独的字段，而实际上它是一个字段。我使用 Python 将逗号从逗号之间的位置去掉，因为很容易将它们与实际应该存在的逗号区分开来，但是这个问题让我很难过。

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:54:22.840

[您可以使用Python 的 CSV reader](http://docs.python.org/2/library/csv.html)定义分隔符和引号字符。例如：

使用此 CSV：

```
1,`Flat 5, Park Street` 
```

而这个 Python：

```
import csv

with open('14144315.csv', 'rb') as csvfile:
    rowreader = csv.reader(csvfile, delimiter=',', quotechar='`')
    for row in rowreader:
        print row 
```

您将看到以下输出：

```
['1', 'Flat 5, Park Street'] 
```

这将使用逗号分隔值，但使用引号括起来的逗号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:53:56.873

CSV 文件未正确生成。CSV 文件应该有某种形式的文本转义，通常使用双引号：

```
1,John Doe,"City, State, Country",12345 
```

某些 CSV 导出对所有字段执行此操作（这是从 Excel/LibreOffice 导出时的一个选项），但必须转义不明确的字段（例如包含逗号的字段）。

手动修复此问题或正确重新生成 CSV。当然，这不能以编程方式修复。

**编辑：**我刚刚注意到一些关于“反逗号”被用于转义的东西——如果是这种情况，请参阅 Jason Sperske 的回答，这是正确的。

# jquery - jQuery切换后如何调整对象的大小？

> ID：14144317
> 
> 赞同：0
> 
> 时间：2013-01-03T17:48:06.063
> 
> 标签：jquery, callback, jquery-animate, toggle

提前谢谢。我是 jQuery 新手，这是我在 Stack 上的第一个问题：

我有一个切换功能，它可以为左右两个 div 设置动画：#B 和 #C：

```
$("#toggleNav").toggle(
  function() {
    $("#B").stop(true).animate({
      left: 0
    }, 130)
    $("#C").stop(true).animate({
      left: 0
    }, 130)
  }, function() {
    $("#B").stop(true).animate({
      left: 80
    }, 130)
    $("#C").stop(true).animate({
      left: 300
    }, 130)
}); 
```

div #C 的宽度是窗口的剩余宽度。因此，随着窗口大小的调整，div #C 变得越来越小。

在 div #C 中，我有一个[Wijmo 折线图](http://wijmo.com/widgets/wijmo-complete/charts-line-chart/)小部件，每当调整窗口大小时，它都会重新绘制以适合 div #C：

```
$(window).resize(function(){
    $("#wijlinechart").wijlinechart("redraw");
}); 
```

我希望图表在切换完成后重新绘制为 div #C 的结果大小。我试过这个，除其他外：

```
$("#toggleNav").toggle(
  function() {
    $("#B").stop(true).animate({
      left: 0
    }, 130)
    $("#C").stop(true).animate({
      left: 0
    }, 130)
    $("#wijlinechart").wijlinechart("redraw");
  }, function() {
    $("#B").stop(true).animate({
      left: 80
    }, 130)
    $("#C").stop(true).animate({
      left: 300
    }, 130)
    $("#wijlinechart").wijlinechart("redraw");
}); 
```

此时，当div#C调整大小时，折线图被重绘，但被重绘为调整大小前的div#C的大小。因此，随着 div #C 变小，图表会变大，而随着 div #C 变大，图表会变小。

如何将重绘延迟到切换完成后？或者在切换完成后调用重绘函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:52:29.893

查看[`.animate`](http://api.jquery.com/animate/)的回调（完成）参数。

```
$("#C").stop(true).animate({
    left: 0
}, 130, function(){//pass a function callback to be executed when animation ends
    $("#wijlinechart").wijlinechart("redraw");
}); 
```

将两个`redraw`调用都移至`.animate`回调，它将按预期工作。

# fortran - Fortran 从实数中获取复数。

> ID：14144318
> 
> 赞同：0
> 
> 时间：2013-01-03T17:48:07.747
> 
> 标签：fortran

我正在编写一个必须求解平方根并导致得到一个复数的 Fortran，但 Fortran 不会打印它或将它传递给另一个变量。它给出（NaN，0.000）。

这是一个虚拟代码，表示我正在处理的实际代码中遇到的问题。如果你们能给我任何有用的信息。谢谢你。

```
 program test
       IMPLICIT NONE
       COMPLEX X
       REAL a, b, c
       a = 1
       b = 1
       c = 1
       X = sqrt(b - 4*a*c)
       print *, REAL(X), ' - j',-AIMAG(X)
   end program test 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:54:55.317

由于 a、b 和 c 都是实数，因此赋值右侧的表达式将以实数算术计算。将其分配给左侧的复杂变量不会改变这一点。如果您希望以复数形式完成计算，最简单的方法是将 a、b 和 c 声明为复数。

# fortran90 - sqrt函数fortran 90错误

> ID：14144319
> 
> 赞同：0
> 
> 时间：2013-01-03T17:48:11.267
> 
> 标签：fortran90, sqrt

我正在尝试处理 sqrt 但不知何故我无法理解为什么在编译该程序时会出现分段错误错误。我检测到这是因为 sqrt。但是我怎样才能在这些类型的配方中正确使用 sqrt 呢？

```
SUBROUTINE constructImages(image,w,w_b,x_w)
    USE cellConst
    USE simParam, ONLY: xDim, yDim, obstX, obstY, obstR,L_max
    USE D2Q9Const, ONLY: v

implicit none
integer, INTENT(INOUT):: image(yDim,xDim),w_b(yDim,xDim),w(yDim,xDim)
double precision, dimension(L_max,0:1),     INTENT(INOUT):: x_w
integer:: x,y,i,cont_L
double precision::x2,y2
!Disk Shape
do x = 1, xDim
    do y = 1, yDim
        if (((x-obstX)**2.0d0 + (y-obstY)**2.0d0) <= (obstR**2.0d0) ) then
    image(y,x) = wall
    w(y,x) = wall
    end if
    end do
end do
do x = 1, xDim
    do y = 3, yDim-2
    do i= 1,8
    if ((w(y,x) == fluid) .and. (w(y+v(i,1),x+v(i,0)) == wall)) then
        w_b(y,x) = 2
    end if
    end do
end do
end do
do x = 1,xDim
do y = 3, yDim-2
    if (w_b(y,x) == 2) then
    w_b(y,x) = wall
    w(y,x) = wall
    image(y,x) = wall
    end if
end do
end do

x_w = 0.0d0     !Lagrangian vector for boundary exact position
cont_L = 0

do x = 1, xDim
    do y = 1, yDim
        do i = 1, 8
        if ((w(y+v(i,1),x+v(i,0)) == fluid) .and. (w_b(y,x) == wall)) then 
        cont_L = cont_L +1 
```

. x_w(cont_L,0) = x2 - ((x-obstX)^2.0d0 + (y-obstY)^2.0d0) **^0.5d0** - obstR

. x_w(cont_L,1) = y2 - ((x-obstX)^2.0d0 + (y-obstY)^2.0d0) **^0.5d0** - obstR

```
 !          write(*,*) x2,y2
 !          write(*,*) x_w(cont_L,0),x_w(cont_L,1)
        end if
        end do
    end do
end do
 END SUBROUTINE constructImages 
```

如果需要更多信息，请告诉我，

真挚地，

阿尔伯特 P

PD，3 个整数欧拉网格是 0 / 1 2D 网格，其中 1 分配给由圆盘分隔的墙，w_b(y,x) 是边界点，w(y,x) 是整个圆盘点和 x_w 我想为障碍物设置离散精确位置的朗朗日向量。真的不需要明白这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:23:08.307

问题实际上是一个数组索引，它在 w 中小于 1，并且在设置 sqrt 时有多个问题以某种方式导致该错误。

```
do x = 1, xDim
    do y = 1, yDim
        do i = 1, 8
if ((w(y,x) == fluid) .and. (w(y+v(i,1),x+v(i,0)) == wall))
..... 
```

在这里我声明 w > 1，然后它超出了界限。我已经解决了不让整数低于 1 和超过 yDim 的问题，并且在所有例程中都解决了这个问题，并且我在执行代码时通过检查弹跳检测到了该问题。

无论如何，谢谢大家。那是一个艰难的！

阿尔伯特 P

# php - 本地主机上基于 php/mysql 的安全应用程序

> ID：14144321
> 
> 赞同：4
> 
> 时间：2013-01-03T17:48:11.857
> 
> 标签：php, mysql

我有一个基于 php 和 mysql 的应用程序，它将为我的一些客户托管在他们组织的本地主机上，并为其他客户托管在 Web 服务器上。我关心的是如何保护和保护本地主机上的代码？我只是不希望任何具有一点编程知识的人能够查看我的应用程序代码。代码将位于作为本地服务器的组织机器之一的 www/public_html 文件夹中的本地主机上，这一事实使我对我的代码被盗感到偏执。

谁能建议一些技术来实现这一目标？密码保护？或其他最佳实践？

我会要求社区成员不要立即关闭这个问题，因为它认为它模棱两可或断章取义。我非常需要一些专家的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T18:52:09.497

我遇到了和你一样的问题。我知道，这是您项目中的设计缺陷。如果您将软件设计为可在线访问，则您不应该在客户的计算机中“安装”您的软件。

但有时我们不得不这样做。我们有这个很棒的 web 应用程序，有点贵，而且客户不多。每当一个新客户端坚持“即使互联网中断也需要运行”时，我的老板还是把它卖掉了，我们被告知只需将客户端的电脑配置为既作为服务器又作为客户端运行。从事该项目的人应该考虑到这种可能性，并且应该选择一些可以创建可执行文件而不是纯文本代码的技术。

我们选择使用[Zend Guard](http://www.zend.com/en/products/guard/)来保护我们的代码。它为您预编译您的代码，但它仅适用于 PHP。您的 xml/txt/ini/css/js 文件仍然是可读的。我们有一些想要混淆的 xml 配置文件，但不能。

还有一些其他软件也可以做到这一点，只需搜索[PHP Code Obfuscator](https://www.google.com.br/search?q=php%20code%20obfuscator)

它们不是免费的（你自己开发它有点贵），但对你的公司来说不应该太贵。

请记住，您正在做的只是一种解决方法。这并不完全安全，也不推荐。PHP 旨在用于服务器，而不是在您的客户端机器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:51:19.287

`localhost`始终是您当前使用的机器。我发现您几乎无法保护存储在那里的文件。任何形式的保护都可能削弱 PC 和您正在制作的应用程序的正常运行。

PHP 应该在**服务器**上运行，您的源代码会自动受到保护。

专家建议：*你做错了*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T17:55:59.497

“查看我的应用程序代码”和“我的代码被盗”是两个不同的东西。

由于 php 是一种脚本语言，因此代码需要在将要运行它的服务器中，与 localhost 的事实无关。如果您想保护您的代码不被“查看”，您可以：

*   混淆它。但是，如果有人真的感兴趣，那只是时间问题。
*   加密它。您可以在启动服务器解密时请求密码，但这需要进行大量更改并影响性能。

但是，如果有人想窃取它，并且不关心它的外观，因为它不打算修改它，也许是为了节省许可证成本，那么他们只需要复制粘贴代码，无论多么混淆或加密它是，并让它运行。我猜，反复制技术超出了问题的范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T17:55:04.083

查看一些代码加密/混淆软件，例如[Zend Guard。](http://www.zend.com/en/products/guard/)不过，他们是有报酬的。

# intuit-partner-platform - 带有迭代器的 Quickbooks CustomerQuery 返回重复记录

> ID：14144323
> 
> 赞同：1
> 
> 时间：2013-01-03T17:48:14.447
> 
> 标签：intuit-partner-platform

我有一个奇怪的问题，我不确定错误在哪里

我正在使用 C#，在对 Customer 对象运行带有过滤器的查询时，我得到了一系列奇怪的结果

如果我设置的过滤器应该返回 8 条记录，那么我的实现将返回 8、8、3、1、1、1 条记录（按此顺序，在每个后续调用中，所有这些都是重复的）......

这就是我实现迭代器的方式

```
var customerQuery = new CustomerQuery()
            {
                ChunkSize = "8",
                Item = Guid.NewGuid().ToString("N"),

                IncludeFinancialIndicator = false,
                IncludeFinancialIndicatorSpecified = true,
                MinimumBalanceSpecified = true,
                MinimumBalance = 92,
                SynchronizedFilterSpecified = true,
                SynchronizedFilter = SynchronizedFilterEnumType.Synchronized,

             };
        var results = new List<Customer>();
        int count;
        //Loop until find all the results.
        do
        {
            IEnumerable<Customer> partialResult = customerQuery.ExecuteQuery<Customer>(context);
            count = partialResult.Count();
            //First pass here returns 8 records
            //Second pass returns same 8 records again
            //third pass returns 3 records
            //Three more passes with 1 record each

            results.AddRange(partialResult);
        } while (count > 0); 
```

我做错了什么或遗漏了什么吗？

谢谢！

编辑：

这是实现分页选项的代码....

```
var customerSet = new List<Customer>();
        List<Customer> customerQueryResult = null;
        int startPage = 1;
        var qbdCustomerQuery = new CustomerQuery();
        do
        {
            qbdCustomerQuery.ChunkSize = "10";
            qbdCustomerQuery.MinimumBalanceSpecified = true;
            qbdCustomerQuery.MinimumBalance = 92;
            qbdCustomerQuery.ItemElementName = ItemChoiceType4.StartPage;
            qbdCustomerQuery.Item = startPage.ToString();
            customerQueryResult = qbdCustomerQuery.ExecuteQuery<Customer>(context).ToList();
            if (customerQueryResult.Count > 0) { customerSet.AddRange(customerQueryResult); }
            startPage++;
        } while (customerQueryResult.Count > 0); 
```

如果我将 ChunkSize 设置为“100”，我会得到 8 条预期记录，但是当尝试使用 ChunkSize =“10”运行它时，我会得到 8,8,1（重复记录）

# cakephp - 在 cakephp 中为模型上的所有查找调用指定返回字段

> ID：14144342
> 
> 赞同：1
> 
> 时间：2013-01-03T17:49:12.037
> 
> 标签：cakephp, model

我不敢相信我不记得如何做到这一点，但是如何在我的模型中指定`find()`方法返回的默认字段？我在谷歌上找不到如何做到这一点，或者至少我不知道要搜索的措辞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:56:44.753

您最有可能需要做的是检查模型中的方法中是否`fields`存在密钥。`beforeFind()`

如果`fields`未设置键，您可以在本机模型中将其设置为 $this->fields，并`beforeFind()`在 AppModel 中创建，然后您可以指示该方法使用`$this->fields`模型中的数组。

**更新**

// AppModel.php

```
parent function beforeFind($queryData = array()) {
    if (empty($queryData['fields']) && !empty($this->fields)) {
        $queryData['fields'] = $this->fields;
    }
    return $queryData;
} 
```

// 在你的模型中：

```
public $fields = array(
    'Alert.id'
); 
```

这将检查`fields`数组是否存在，然后检查`$this->fields`属性是否存在。如果确实存在，它会将其应用于查询数据并将修改后的查询数据返回给`beforeFind()`- 这将更改您的查找。

调整它以满足您的需求，祝您好运！

# c++ - GLSL 330 矩阵计算错误{无编译错误}

> ID：14144344
> 
> 赞同：0
> 
> 时间：2013-01-03T17:49:23.283
> 
> 标签：c++, math, opengl, matrix, glsl

编辑：好的，现在知道了：D 问题：完全忘记 glm 使用列主矩阵。只需将 GL_TRUE 更改为 GL_FALSE，一切正常。

* * *

我尝试用我的 ProjectionMatrix 计算我的 ModelMatrix。像这样：

```
#version 330

layout(location = 0) in vec4 position;
layout(location = 1) in vec4 color;

uniform mat4 projectionMatrix;   //This are the Matrixes from my cpp-app
uniform mat4 modelMatrix;        //With a debugger that can show all active uniforms i checked their values: They're right!

uniform mat4 testUni;            //Here I checked if its working when I precompute the model and perspective matrices in my source: works
mat4 viewMatrix = mat4(1.0f);

noperspective out vec4 vertColor;

mat4 MVP = projectionMatrix * modelMatrix ; //Should actually have the same value like testUni

void main() 
{

gl_Position = testUni * position ;    //Well... :) Works
gl_Position = MVP * position ;    //Well... :) Doesn't work [Just the perspective Transforn]

vertColor = position;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:46:17.323

移动语句

> ```
> mat4 MVP = projectionMatrix * modelMatrix ; //Should actually have the same value like testUni 
> ```

进入`main()`. 着色器执行从 main 开始。如果要避免按顶点计算，请在外部预先计算矩阵并将其作为统一矩阵提供。

# design-patterns - 设计帮助：testng dataprovider中的Hashmap

> ID：14144347
> 
> 赞同：2
> 
> 时间：2013-01-03T17:49:33.673
> 
> 标签：design-patterns, testng

我一直在使用 TestNG 的 DataProvider 功能编写测试脚本。到目前为止，我对自己的做法感到满意，因为我传递的参数数量少于 10 个，但是我正在测试的一些新页面有超过 30-35 个参数，将这些参数添加到测试方法中它看起来真的很难看，所以我开始使用 varArgs 'Object ...'。

它是动态传递参数的好方法，但是使用它们很困难，因为您必须非常小心索引，并且如果必须对很多方法执行此操作，则容易出错。

我尝试将测试数据作为 ArrayList> 传递，其中 HashMap 是列名-值对，但 TestNG 不会接受这个，因为 HashMap 不能转换为 Object[]。我想到使用 HashMap 的原因是因为您可以查询一个键并获取它的值，并且我知道该键。我本可以编写一个通用方法来获取该值并将其分配给表示页面上字段名称的变量。

数据源 (XLS) 仅存储在页面上输入的测试数据，因此它纯粹是数据驱动的，而不是基于关键字的。我正在测试的所有页面都是数据输入页面。

在测试数据上获得某种身份并让 TestNG 接受它的最佳方式是什么。

非常感谢这方面的任何帮助。

谢谢你，约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T05:34:28.787

为什么不使用 Map 作为测试方法的参数，并让 dataprovider 返回一个参数数组，该数组仅包含每个数据集的地图：

```
public class MyTest {

  @Test(...)
  public void testThis(Map<String,Object> args) {
    String arg1 = (String) args1.get("args1");
    ...
  }

  @Dataprovider(...)
  public Object[][] dataprovider() {
    return new Object[][]{
      { map("arg1", "foo") },
      { map("arg1", "bar", "arg2", new Object() }
    };
  }

  private Map<String,Object> map(Object... kv) {
    //helper that creates Map from Array for brevity.
  }

} 
```

这应该通过模拟其他名为参数传递的语言来简化变量参数的使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T20:32:46.453

为什么不编写自己的转换函数，将 Map 转换为 Object[]，然后将其传递给 TestNG 方法？

# ruby-on-rails - gmaps4rails 回调未触发

> ID：14144350
> 
> 赞同：1
> 
> 时间：2013-01-03T17:49:46.350
> 
> 标签：ruby-on-rails, gmaps4rails

```
 = gmaps(markers: { data: @json, options: @marker_options }, map_options: @map_options )

    - content_for :map_scripts do
      :javascript
        Gmaps.map.callback = function() {
          alert('asdf') // <-- I never see this alert
        } 
```

使用 gmaps4rails gem (v1.5.2)，我将上面的代码放在我的视图中。我的地图在我的标记上看起来很好。但是使用我的javascript，我不应该收到警报吗（我不是）？我不确定我是否完全理解回调。

仅供参考，javascript 在我的源代码中看起来很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:53:10.720

它应该`content_for :scripts`如文档中所述

另外，根据您的浏览器，您最好有：`alert('asdf');`而不是`alert('asdf')`

# html - 由于定位的导航栏，引导模式被涂黑

> ID：14144358
> 
> 赞同：12
> 
> 时间：2013-01-03T17:50:05.327
> 
> 标签：html, css, twitter-bootstrap, positioning

当我的 Bootstrap 模态显示时，它看起来像是在黑色背景后面。单击屏幕上的任意位置会导致模式消失。

该问题似乎是由定位我的导航栏引起的 - 删除`position: absolute;`或`position: relative;`修复它。不幸的是，由于我需要在导航栏上使用 z-index，所以我无法摆脱定位。

为什么导航栏的定位会导致模态框变黑？有没有办法让模式出现在背景前面，同时保持导航栏上的定位？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-03T21:46:51.237

这是因为您的模态在您的内部`#nav_inner` `<div>`，所以它将继承一些您不希望它的样式。

它不需要在那里。

尝试将其移入身体，如下所示：

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html"; charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet">
</head>
<body>
    <div class="gutter" id="left_gutter"></div>
    <div class="gutter" id="right_gutter"></div>
    <div id="container">
        <div class="navbar">
            <div id="nav_inner">
                <div class="page" id="nav_page">
                    <div class="content_wrapper">
                        <div class="content">
                    <a href="#add_topic_modal" role="button" data-toggle="modal" id="teach">Teach</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="footer">
        <div id="footer_inner">
        </div>
    </div>
                    <div class="modal hide fade" id="add_topic_modal" tabindex="-1" role="dialog" aria-labelledby="add_lesson_label" aria-hidden="true">
                        <div class="modal-header">
                             <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                             <h3 id="add_lesson_label">Teach</h3>
                        </div>
                        <div class="modal-body">
                        </div>
                        <div class="modal-footer">
                            <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
                        </div>
                     </div>
</body>
</html> 
```

**更新：** 这是其中一个问题，我知道更改 DOM 中的元素位置可以解决它，但了解原因完全是另一个问题。

`position: relative; z-index: 2;`从两者`#navbar`中删除`#nav_inner`也解决了问题，因此即使模式具有`position: fixed; z-index: 1050;`z-index 仅适用于位置并且固定位置将元素放置在相对于浏览器窗口的位置，这仍然无法正常工作，因为父元素具有相对位置和 z-index... 魔术。

上面出现褪色背景的原因是因为这是使用 javascript 添加到 body 中的，因此应用正确的 z-index 1040 没有问题，并放置在 modal 上方。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-16T21:31:16.177

我遇到了同样的问题。但是由于我的内容是由 ajax 加载的，所以在关闭之前我无法创建“模态”

所以我这样做了：

```
$(function(){
  $("#add_topic_modal").appendTo("body");
}); 
```

现在“模态”按预期工作。

# actionscript-3 - Flash CS6 AS3，重置声道

> ID：14144362
> 
> 赞同：1
> 
> 时间：2013-01-03T17:50:17.473
> 
> 标签：actionscript-3, loops, audio, reset, channel

当我使用从官方帮助论坛获得的这段代码加载到 Actionscript 时，尝试将音频循环重置为开头时，我遇到了一段时间的问题

```
var alreadyExecuted:Boolean;
if(!alreadyExecuted){
alreadyExecuted=true;

var s:Sound=new SkaianSpirit();
var sc:SoundChannel=s.play(0,1);
} 
```

我想要它做的是，在动画播放时无限循环，无论定位如何，以及是否使用按钮等跳过了帧，但是当动画结束时，轨道需要结束。此时，如果单击按钮将其发送回动画的开头，我希望它开始与以前相同的循环。目前，它将执行第一部分，但不会重播。

几个警告：

我没有通过 url 加载它。

我没有使用按钮来控制音量等。它是在动画开始时自动播放。

我是一个完整的 Actionscript 新手。如果你用我听不懂的行话猛烈抨击我，我就不知道你在说什么。

我非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:57:52.650

我总是使用`addFrameScript`函数将外部声音与动画同步：

UPD：mc 是您的动画的名称。将此代码放在创建动画的位置（例如，保存动画的父 Sprite 的第一帧）。

```
var s:Sound=new SkaianSpirit();
var sc:SoundChannel;

mc.addFrameScript(1, startSound); 
mc.addFrameScript(mc.totalFrames - 1, stopSound);

function startSound():void
{
    sc = s.play();
}
function stopSound():void
{
    sc.stop();
} 
```

# c# - linq 查询如何绑定到 stimulsoft 报告

> ID：14144363
> 
> 赞同：0
> 
> 时间：2013-01-03T17:50:17.947
> 
> 标签：c#

我使用 stimulsoft 获取报告。首先我设计了一个带有stilleport1 名称的报告。但我单击报告显示按钮，我的报告显示为空。为什么？我的代码是：

```
private void radButton1_Click(object sender, EventArgs e)
    {

           // stiReport1.RegData("query", query);
           // stiReport2.RegBusinessObject("PUBS", "pub_info", query);
            //stiReport2.RegData("pub_info", query);
          //  stiReport2.RegReportDataSources() = query;
           // stiReport2.Dictionary.Databases.Add(query);
           // stiReport2.Render();
            StiReport st = GetReport();
            st.Show();

    }

private StiReport GetReport()
    {
        StiReport report = new StiReport();
        if (File.Exists("D:\\stiReport1"))
        {
            report.Load("D:\\stiReport1");
        }
        PUBSEntities db = new PUBSEntities();
        var query = (from p in db.pub_info
                         select p).ToList();
        db.Dispose();
      //  report.RegBusinessObject("PUBS", "pub_info", query);

        report.RegData("mypub",query);
        return report;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:54:14.090

尝试使用下一个代码：

```
 if (File.Exists("D:\\stiReport1.mrt"))
    {
        report.Load("D:\\stiReport1.mrt");
    } 
```

# c# - 我可以一次运行“相同”的 Windows 应用商店应用程序的多个实例吗？

> ID：14144367
> 
> 赞同：1
> 
> 时间：2013-01-03T17:50:24.477
> 
> 标签：c#, windows-8, windows-store-apps, multiple-instances

是否可以同时运行几个 Windows 应用商店应用程序？我已经编写了一个聊天应用程序（在 C# 中），并想在一台 PC 上对其进行测试，但我无法使其工作。

有什么选择吗？或者任何想法如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:06:16.940

不，Windows 应用商店应用程序是严格单实例的，请参阅这篇文章：
[http ://social.msdn.microsoft.com/Forums/en-US/windowsdeveloperpreviewgeneral/thread/daf6f12f-b54d-4550-a70d-d92e6e06bfdc](http://social.msdn.microsoft.com/Forums/en-US/windowsdeveloperpreviewgeneral/thread/daf6f12f-b54d-4550-a70d-d92e6e06bfdc)

但是可能有一个解决方案，如果您是该应用程序的所有者并且您可以访问源代码和项目，只需构建和部署应用程序，更改清单文件中的应用程序名称和 ID 并再次部署它 - 然后应该显示作为开始屏幕中的另一个应用程序。注意我没有对此进行测试，但它适用于 Windows Phone 应用程序，所以我想它也应该适用于 Windows 8？

# php - 编辑表单jquery网格中的错误代码0

> ID：14144368
> 
> 赞同：0
> 
> 时间：2013-01-03T17:50:31.187
> 
> 标签：php, jquery, mysql, jqgrid

我是 php 的新手，我正在尝试使用 jquery 网格，表单编辑和删除。我正在实施编辑，它正在出现 - 错误状态：'错误'。错误代码：0，当我按下提交按钮时，出现错误但进行了更改......我的网格......

```
<script>
var lastsel;
    $(function() {
        $("#toolbar").jqGrid({
            mtype: 'POST',
            editurl: 'http://www.onetag.pt/eulen/edit.php', 
            caption:"Tags",
            colNames:['TagID','Nome', 'Descricao', 'Tipo'],
            colModel:[
            {name:'tagID',index:'tagID',hidden:true},
                {name:'name',index:'name',editable:true},
                {name:'description',index:'description',editable:true},
                {name:'type',index:'type'}
            ],
            datatype:"json",
            height:421, 
            rownumWidth:40,
            pager:'#ptoolbar',
            rowList:[10,20,30],
            rowNum:10,
            sortname:'tagID',
            sortorder:'desc',
            url:'/tags/list/',
            viewrecords:true,
            width:740
        });
        $("#toolbar").jqGrid('navGrid','#ptoolbar',{del:true,add:false,edit:true,search:true});
        $("#toolbar").jqGrid('filterToolbar',{stringResult:true,searchOnEnter:false});

    });
</script> 
```

和editurl.php

```
<?php

// connect to the database
$dbhost = "localhost";
$dbuser = "blah";
$dbpassword = "blah";
$database = "blah";
$tablename = "tags";
$db = mysql_connect($dbhost, $dbuser, $dbpassword)
or die("Connection Error: " . mysql_error());

 mysql_select_db($database) or die("Error conecting to db.");
//mysql_set_charset('utf8',$database);
mysql_query("SET NAMES 'utf8'");

 if($_POST['oper']=='add')
 {

 }
 if($_POST['oper']=='edit')
  {
$id     =   mysql_real_escape_string($_POST['id']);
$name     =   mysql_real_escape_string($_POST['name']);
$description   =   mysql_real_escape_string($_POST['description']);

$sql = "UPDATE ".$tablename." SET name ='".$name."', description ='".$description."' WHERE    tagID = ".$id;

 $result=mysql_query($sql) or die(mysql_error());

 mysql_close($db);

 }
 if($_POST['oper']=='del')
 {

 } 
?> 
```

我选择第一行，然后按编辑按钮，然后出现编辑表单...然后我进行了所需的更改...然后按提交按钮并出现错误...

我关闭编辑表单，然后按 f5 刷新，数据字段已更改...

# jmeter - 如何进行 json-rpc 调用？

> ID：14144370
> 
> 赞同：2
> 
> 时间：2013-01-03T17:50:36.013
> 
> 标签：jmeter, json-rpc

我已经查看了有关此问题的先前问题，但没有明确的答案，因此希望有人可以在这里帮助我。

我想使用 Jmeter 采样器进行**JSON RPC**调用，但我不确定使用哪一个。

请求采用以下形式：

`https://servicename.bla.com.service.dosomething({pass in JSON params})`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:18:24.180

如果这是你在说的：

*   [http://www.simple-is-better.org/rpc/#differences-between-1-0-and-2-0](http://www.simple-is-better.org/rpc/#differences-between-1-0-and-2-0)

如果您的服务使用 POST 方法（如示例所示），您可以将常规[HTTP 采样器与 Raw Post Body 一起使用。](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request)

您可以添加一个[Http Header Manager](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Header_Manager)来设置 Content Type

# git - 尝试更新 git，但出现错误 /usr/bin/ld: cannot open output file git: Is a directory

> ID：14144371
> 
> 赞同：0
> 
> 时间：2013-01-03T17:50:47.753
> 
> 标签：git, version-control

最初，我尝试使用 Bitbucket，这是一种托管代码等的好方法。这使用`'git'`版本控制软件，您可以从 linux 命令行向其中添加代码。但是，当我尝试这样做时，却遇到了一堆错误。

所以我做了一些搜索，得出的结论`git`是过时的（它是版本 1.5.4.3，而最新版本是 1.8.1），所以我尝试使用更新`sudo apt-get`，它说它是最新的。我尝试了一些方法，例如提前跑步`sudo apt-get update`，但运气不佳。所以我现在正在尝试手动安装它。我成功下载了 tar.gz 并将其解压缩，但现在它不会安装并在我尝试时出现`make`（这是在 git-1.8.1 文件夹内）：

```
 GEN perl/PM.stamp
    SUBDIR gitweb
    SUBDIR ../
make[2]: `GIT-VERSION-FILE' is up to date.
    GEN git-instaweb
    LINK git
/usr/bin/ld: cannot open output file git: Is a directory
collect2: ld returned 1 exit status
make: *** [git] Error 1 
```

找了一篇类似情况的博文，但不是很懂： [usrbinld-cannot-open-output-file](http://kmaiti.blogspot.co.uk/2011/02/usrbinld-cannot-open-output-file.html)

所以我真的很感激一些帮助！

编辑：刚试过`make clean`，现在想出了这个：

```
 GEN perl/PM.stamp
    SUBDIR gitweb
    SUBDIR ../
make[2]: `GIT-VERSION-FILE' is up to date.
    GEN git-instaweb
    SUBDIR git-gui
    MSGFMT    po/de.msg make[1]: *** [po/de.msg] Error 127
make: *** [all] Error 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:15:09.257

检查是否安装了所有依赖项，例如执行`apt-get build-dep git-core`.

但是对我来说安装一个如此过时的版本似乎很奇怪，`apt-get`你使用哪个版本的 Debian，在 Debian 测试中我安装了 1.7.10。

顺便说一句，我使用[脚本](https://github.com/gipi/dotfiles/blob/master/bin/update-git-installation.sh)从官方存储库更新和安装最新版本的 git。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T12:35:18.340

在 CentOS 6.5 x64 上：

```
export GIT_VERSION=1.8.5.2   # ie. the GIT version you would like to install
yum -y install openssl-devel.x86_64 libcurl-devel.x86_64 expat-devel.x86_64 perl-ExtUtils-MakeMaker.x86_64 gettext.x86_64
wget https://git-core.googlecode.com/files/git-${GIT_VERSION}.tar.gz
tar -zxvf ./git-${GIT_VERSION}.tar.gz
cd git-${GIT_VERSION}
make prefix=/usr/local install  # to install in /usr/local 
```

# drupal - 如何在 Drupal 规则中使用 PHP 调度组件

> ID：14144373
> 
> 赞同：0
> 
> 时间：2013-01-03T17:51:00.157
> 
> 标签：drupal, drupal-7, drupal-modules, schedule, drupal-rules

我正在使用一些 PHP 在规则中“调度组件”。我可以使用“strtotime() 函数已知的值。就像 +1 天一样。”，但我真的很想使用 PHP 来设置值（我想将预定日期设置为另一个字段中的值）。我知道当我切换到“数据选择”模式时有一个“PHP 评估”区域，但我无法编写任何可以使用它的 PHP。

你有什么主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:45:52.057

预定评估日期的 PHP 评估希望您返回没有 PHP 分隔符的时间戳。例如：

```
return strtotime('2001-03-10 17:16:18'); 
```

请注意，过去的任何时间都会在下一次 cron 运行时触发规则。

# wordpress - 以 2 种语言显示页眉和页脚

> ID：14144380
> 
> 赞同：1
> 
> 时间：2013-01-03T17:51:27.303
> 
> 标签：wordpress

[我已经解决了在博客](https://stackoverflow.com/q/14124059/1871419)（在 wordpress 中开发）中包含网站的页眉和页脚的问题

现在页眉（精灵菜单部分）和页脚（有三列：产品、菜单和联系我们）以一种语言显示。

我可以有 2 种语言（英语和法语）的 header.php 和 footer.php 吗？

我已经为多语言使用了多语言插件。但我没有使用仪表板或小部件来显示主菜单和页脚。我已将代码包含在 header.php 和 footer.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:01:58.860

答案将取决于 WordPress 实现多语言界面的方式。但是，实现多语言的常用方法是提供一个 url 参数来指示当前的活动语言，例如[这个例子](http://umcuqu.com)。你会发现类似的东西：

```
mysite.com/fr/ for French section 
```

因此，通过使用 AJAX，您可以获得另一种语言的页脚并将其与您当前的语言页脚放在一起。换句话说，这个解决方案依赖于 AJAX。

# eclipse - 在 Eclipse 中隐藏 JSP 错误图标

> ID：14144387
> 
> 赞同：5
> 
> 时间：2013-01-03T17:52:01.257
> 
> 标签：eclipse

使用 Eclipse（或者更确切地说，一个构建在 Eclipse 之上的 IDE，但所有 Eclipse 事实都适用于它）在 Web 上进行 Java 开发，其中少数 EAR 包含大量 Web 应用程序。问题是，JSP 和 Web 代码中的问题与我整天研究的类和 servlet 无关；我想知道是否可以将每个项目的红旗图标配置为仅在 Java 代码而不是 WebContent 出现错误时显示。任何人都知道如何将图标配置为仅显示 Java 问题而不显示 JSP 问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T22:01:10.577

可以在工作区级别进行配置，也可以在 Web 项目级别进行覆盖。

**工作区**

窗口 -> 首选项 -> 验证 -> 禁用 JSP 内容验证器和 JSP 语法验证器

窗口 -> 首选项 -> Web -> JSP 文件 -> 禁用验证 JSP 片段

**网络项目**

属性 -> 验证 -> 禁用 JSP 内容验证器和 JSP 语法验证器

属性 -> 验证 -> JSP 语法 -> 禁用验证 JSP 片段

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T18:08:41.563

转到 Window -> Preferences 搜索 jsp，

![JSP 首选项页面](../Images/e7fe661f31b230b6bf67dcfb546ec47d.png)

您甚至可以配置要在项目级别上执行的验证级别。希望能帮助到你。

# gwt - *.ui.xml 中的自定义复合小部件

> ID：14144391
> 
> 赞同：3
> 
> 时间：2013-01-03T17:52:09.457
> 
> 标签：gwt, uibinder

我想创建一个自定义 GWT 复合小部件，稍后我可以使用 uiBinder 在 *.ui.xml 中以这种方式使用它（cw 是我的自定义小部件包的前缀）：

```
<cw:CustomPanel>  
  <cw:header><g:Label>test</g:Label></cw:header>  
  <cw:content><g:Label>test</g:Label></cw:content>  
</cw:CustomPanel> 
```

简而言之，我希望框架以某种方式调用我的自定义小部件上的方法`setHeader`和方法。`setContent`

这有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T19:01:07.693

这就是目的，请参阅[http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/uibinder/client/UiChild.html](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/uibinder/client/UiChild.html)`@UiChild`上的 JavaDoc

如果要保留方法名称`setHeader`and `setContent`（而不是`addHeader`and `addContent`），则必须使用

```
@UiChild(tagname = "header")
void setHeader(Widget headerWidget) {
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:54:45.583

在小部件的 Java 类中创建`setHeader(String title)`和`setContent(String content)`方法。在这些方法中，分别将文本添加到您的标题和内容面板。然后你可以通过这种方式在 Ui:Binder 中使用这个小部件：

```
<cw:CustomPanel header="test" content=test" /> 
```

# c++ - 如何在 C++ 中重构 gui 和业务逻辑

> ID：14144393
> 
> 赞同：2
> 
> 时间：2013-01-03T17:52:25.697
> 
> 标签：c++, user-interface, refactoring

我想重构一些用 C++ 和一些 GUI 框架编写的 GUI 应用程序。

有一些对话框类：

```
Class MyDialogX : public LibraryBaseDialog { };
Class MyDialogY : public LibraryBaseDialog { };
X, Y – some name, there are several such similar classes 
```

这些类用于 gui 的东西，也用于一些业务逻辑——这违反了 SRP 原则。

我想将这两个职责分开，我决定创建另一个处理业务逻辑的类。

现在我们有这样的东西：

```
Class MyDialogX : public LibraryBaseDialog
{
    BusinesLogic *pLogic;   // used to handle logic, called as a response to gui
    //    change, there is only one such object for all MyDialogX(Y) objects

    // ... some other code...

    // this method could be moved to constructor as well, only for 
    // short example here...
    void setLogic(BusinesLogic *p) { pLogic = p; }
} 
```

这是进行这种重构的好方法吗？

也许有一些更好的选择？

假设：我不想将“businessLogic”对象作为单例。我无法更改 LibraryBaseDialog 类。

这个重构应该很小，所以我不想重新设计整个系统 J

我什至可以更进一步，创建一些其他类：

```
Class LogicHolder  // basic features related
{
    BusinesLogic *pLogic;  
} 
```

现在 MyDialogX 也将从这个类继承：

```
Class MyDialogX : public LibraryBaseDialog, public LogocHolder
{ } 
```

这样，在几个类似的 Dialog 类之间管理 pLogic 会更容易。

# nginx - nginx 代理：connect() 到 ip:80 失败（99：无法分配请求的地址）

> ID：14144396
> 
> 赞同：9
> 
> 时间：2013-01-03T17:52:34.120
> 
> 标签：nginx

在 Debian 6.0.1 上作为代理运行的 nginx/1.0.12 在运行一小段时间后开始抛出以下错误：

```
connect() 到 upstreamip:80 失败（99：无法分配请求的地址）
连接上游时，客户端：xxx.xxx.xxx.xxx，服务器：localhost，
请求：“GET / HTTP/1.1”，上游：“http://upstreamip:80/”，
主机：“requesteddomain.com”

```

并不是所有的请求都会产生这个错误，所以我怀疑它与服务器的负载和它所达到的某种限制有关。

我尝试将 ulimit -n 提高到 50k 并将 worker_rlimit_nofile 提高到 50k，但这似乎没有帮助。lsof -n 显示 nginx 总共 1200 行。传出连接是否存在系统限制，可能会阻止 nginx 打开与其上游服务器的更多连接？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-03T18:32:07.683

好像我刚刚找到了我自己的问题的解决方案：通过分配更多传出端口

```
echo "10240 65535" > /proc/sys/net/ipv4/ip_local_port_range 
```

解决了这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-12T15:30:36.793

每个 TCP 连接必须有一个唯一的四元组 source_ip:source_port:dest_ip:dest_port

source_ip 很难更改，source_port 是从 ip_local_port_range 中选择的，但不能超过 16 位。剩下要调整的另一件事是 dest_ip 和/或 dest_port。因此，为您的上游服务器添加一些 IP 别名：

`upstream foo { server ip1:80; server ip2:80; server ip3:80; }`

其中 ip1、ip2 和 ip3 是同一服务器的不同 IP 地址。

或者让上游监听更多端口可能更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-03T05:41:56.067

# 修改/etc/sysctl.conf：

```
net.ipv4.tcp_timestamps=1
net.ipv4.tcp_tw_recycle=0
net.ipv4.tcp_tw_reuse=1
net.ipv4.tcp_max_tw_buckets=10000     #after done this: local ports decrease from 26000 to 6000(netstat -tuwanp | awk '{print $4}' | sort | uniq -c | wc -l) 
```

# 跑：

```
sysctl -p 
```

# html - Div 悬停规则在 IE10 中不起作用

> ID：14144398
> 
> 赞同：3
> 
> 时间：2013-01-03T17:52:36.270
> 
> 标签：html, css, internet-explorer, internet-explorer-10

这是我的第一篇文章。我仍在学习 CSS，非常感谢您的帮助。

我一直在尝试创建一个 Div，其中包含一个带有透明叠加层的图像，底部有一个半透明的边框。悬停时，会添加第二个透明叠加层，使底部边框变暗。然后我有另一个包含一些标题文本的 div，标题文本应该在父 div 中的任何位置悬停时改变颜色，并且整个内容在点击时被链接。

最接近它的是这里的 Vimeo：

[http://vimeo.com/categories](http://vimeo.com/categories)

我已经设法实现了所有这一切，它在 IE 和 Firefox 和 safari 等中运行良好。但是在 IE10 中，文本在悬停时不再改变颜色，div 也不能点击。

这是我的CSS：

```
.videoCatThumbImg {
    position:relative;
    background:#FFFFFF;
    width: 178px;
    height: 178px;
    padding: 5px 5px 5px 5px;
    margin: 10px 0px 0px 0px;
    border: 1px solid #CCCCCC;
    line-height:normal;
    float:left;
}   

.videoCatTskin {
    position: absolute; top: 5px; left: 5px;
}

.videoCatThumbHover {
    position: absolute; top: 5px; left: 5px; display: none;
}

.videoCatThumbImg:hover .videoCatThumbHover{
    display: block;
}

.videoCatTitle {
    position:absolute;
    top:5px; left:5px;
    display:block;
    width:173px;
    height:26px;
    padding:152px 0px 0px 5px;
    Font-size:18px;
    font-weight:bold;
    color: #ffffff;
}

.videoCatTitle:hover {
    color: #5798ca;
} 
```

这是我的 HTML：

```
<div class="videoCatThumbImg">
    <img src="http://www.mydomain.com/images/vcat/image_thumb.gif" alt=""/>
    <img class="videoCatTskin" src="http://www.mydomain.com/images/vcat/thumb_hover.png" alt=""/>
    <img class="videoCatThumbHover" src="http://www.mydomain.com/images/vcat/thumb_hover.png" alt=""/>
    <a href="http://www.mydomain.com/category/356"><div class="videoCatTitle">Some Text Here</div></a>
</div> 
```

任何关于我做错了什么的建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:28:22.547

刚遇到问题。没有一个解决方案有效（边框、背景、hasLayout）。

最后，我切换到 XHTML 1 Strict doctype 并且它工作，如果它可以帮助......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:07:35.760

与[此答案](https://stackoverflow.com/questions/2158921/empty-div-hover-event-not-firing-in-ie)类似，尝试将背景（透明图像或相同颜色都可以）添加到没有它的悬停类（`.videoCatThumbImg:hover`）。

# html - 将 Gist 嵌入 Blogger 不起作用

> ID：14144401
> 
> 赞同：1
> 
> 时间：2013-01-03T17:52:51.470
> 
> 标签：html, blogger, gist

我有以下要点...

```
https://gist.github.com/4445255 
```

我尝试将其添加到我的 Blogger 条目（根据[此处](http://blog.moski.me/2012/01/gist-with-bloggers-dynamic-views.html)），并将其添加到我的帖子中...

```
<script src="https://raw.github.com/moski/gist-Blogger/master/public/gistLoader.js" type="text/javascript"></script> 
```

终于在我添加的位置

```
<div class="gistLoad" data-id="4445255" id="gist-GistID">Loading ....</div> 
```

但它只是显示加载...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:11:24.197

您刚刚引用的脚本 (gistLoader.js) 包含对函数 initGist() 的调用，我在任何地方都看不到它。

当您创建的元素的 id 为“gist-GistID”时，它还会通过 id “gistPrinter”查找 DOM 元素。

我对要点不熟悉，也许其他人可以纠正我。

编辑：我在这里找到了 initGist()： [https ://raw.github.com/moski/gist-Blogger/master/public/gistBlogger.js](https://raw.github.com/moski/gist-Blogger/master/public/gistBlogger.js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T19:47:56.730

我还没有将我的项目转换为动态视图。所以我去了模板>动态视图。

有一个小问题，保存格式似乎只能在 IE 中用于动态视图...

[http://productforums.google.com/forum/#!topic/blogger/S_uVwRQQrOY%5B1-25-false%5D](http://productforums.google.com/forum/#!topic/blogger/S_uVwRQQrOY%5B1-25-false%5D)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-02T07:28:40.613

您忘记设置属性。它应该看起来像这样。

`<div class="gistLoad" data-id="4445255" id="gist-4445255">Loading ....</div>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-01T06:36:07.310

我最近发现了这个问题，其中在放置嵌入 URL 后没有加载要点，例如

```
<script src="https://gist.github.com/dishabhatt123/43e98122304000687293b4c3ef3dc474.js"></script> 
```

直接进入我博客的 HTML 视图。这是在烧烤之后终于帮助我的东西。

基本上浏览器不支持随机包含的脚本，因此使用 rawgist。将以下脚本放在页面底部的顶部。

```
<script src="https://rawgit.com/moski/gist-Blogger/master/public/gistLoader.js" type="text/javascript"></script> 
```

然后，添加 div 如下：

```
<div class="gistLoad" data-id="43e98122304000687293b4c3ef3dc474" id="gist-43e98122304000687293b4c3ef3dc474">Loading or something, this is just text to display while the browser pulls the gist....</div> 
```

在这里，在上面的 div 中，data-id =" **whereyourgistidis** " 和 id="gist - **whereyourgistidis** "

在上面的嵌入 url 示例中，我的 gist Id 是 '43e98122304000687293b4c3ef3dc474'。您可以将其替换为嵌入 url 中的 gist id。

**请注意**：您不会在“撰写视图”中看到要点。但是当你预览你的博客时，你可以看到它！

# jquery - 如何将值放入挂毯的html代码中？

> ID：14144403
> 
> 赞同：0
> 
> 时间：2013-01-03T17:52:53.247
> 
> 标签：jquery, tapestry

在客户端：

```
$('#hidden-medium-id').val( $(this).data('medium-id')); 
```

tml挂毯：

```
<t:textfield t:id="hidden-medium-id value="value-required"></t:textfield> 
```

任何想法？该值必须在`<t:from>`

问候

* * *

它的工作：

tml 部分：

```
<t:hidden t:id="hiddenMediumId" id="hidden-medium-id" value="hidden"/> 
```

java部分：

```
@Property
private String hidden; 
```

java脚本部分：

```
 $('#hidden-medium-id').val( $(this).data('medium-id')); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:55:08.113

您似乎有语法错误 '. **. 缺少报价**

```
<t:textfield t:id="hidden-medium-id" value=" 
                                   ^---  Missing here 
```

如果这不起作用，请更改选择器并查看是否有效

```
$('[id*="hidden-medium-id"]') 
```

# sql - 在 Django 中的大表上的内存效率（常量）和速度优化迭代

> ID：14144408
> 
> 赞同：42
> 
> 时间：2013-01-03T17:53:38.673
> 
> 标签：sql, database, django

我有一张很大的桌子。它目前在 MySQL 数据库中。我用django。

我需要遍历表的**每个**元素以预先计算一些特定的数据（也许如果我做得更好，我可以这样做，但这不是重点）。

我想通过不断使用内存来尽可能快地保持迭代。

正如[在 *Large* Django QuerySet 中限制内存使用](https://stackoverflow.com/questions/4856882/limiting-memory-use-in-a-large-django-queryset)以及[为什么迭代大型 Django QuerySet 会消耗大量内存中已经明确指出的那样？](https://stackoverflow.com/questions/4222176/why-is-iterating-through-a-large-django-queryset-consuming-massive-amounts-of-me)，对 django 中所有对象的简单迭代将杀死机器，因为它将从数据库中检索所有对象。

## 寻求解决方案

首先，为了减少你的内存消耗，你应该确保 DEBUG 是 False （或者猴子补丁游标：[在保持 settings.DEBUG 的同时关闭 SQL 日志记录？](https://stackoverflow.com/questions/7768027/turn-off-sql-logging-while-keeping-settings-debug)）以确保 django 没有存储东西`connections`进行调试。

但即便如此，

```
for model in Model.objects.all() 
```

是不行的。

即使是稍微改进的形式：

```
for model in Model.objects.all().iterator() 
```

Using[`iterator()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.iterator)将通过不在内部存储缓存结果来节省一些内存（尽管不一定在 PostgreSQL 上！）；但显然仍会从数据库中检索整个对象。

## 一个天真的解决方案

第[一个问题的解决方案](https://stackoverflow.com/a/5188179/422670)是根据计数器将结果切片 a `chunk_size`。有几种编写方法，但基本上它们都归结为`OFFSET + LIMIT`SQL 中的查询。

就像是：

```
qs = Model.objects.all()
counter = 0
count = qs.count()
while counter < count:     
    for model in qs[counter:counter+count].iterator()
        yield model
    counter += chunk_size 
```

虽然这是高效的内存（与 成比例的恒定内存使用`chunk_size`），但它在速度方面确实很差：随着 OFFSET 的增长，MySQL 和 PostgreSQL（可能还有大多数 DB）都将开始阻塞和减速。

## 更好的解决方案

Thierry Schellenbach在[这篇文章](http://www.mellowmorning.com/2010/03/03/django-query-set-iterator-for-really-large-querysets/)中提供了一个更好的解决方案。它在 PK 上进行过滤，这比偏移快得多（多快可能取决于数据库）

```
pk = 0
last_pk = qs.order_by('-pk')[0].pk
queryset = qs.order_by('pk')
while pk < last_pk:
    for row in qs.filter(pk__gt=pk)[:chunksize]:
        pk = row.pk
        yield row
    gc.collect() 
```

这开始变得令人满意。现在内存 = O(C)，速度 ~= O(N)

## “更好”解决方案的问题

只有当 PK 在 QuerySet 中可用时，更好的解决方案才有效。不幸的是，情况并非总是如此，特别是当 QuerySet 包含不同 (group_by) 和/或值 (ValueQuerySet) 的组合时。

对于这种情况，不能使用“更好的解决方案”。

## 我们能做得更好吗？

现在我想知道我们是否可以更快地避免关于没有 PK 的 QuerySets 的问题。也许使用我在其他答案中找到的东西，但仅限于纯 SQL：使用**cursors**。

由于我对原始 SQL 非常不满意，尤其是在 Django 中，所以真正的问题来了：

**我们如何为大表构建更好的 Django QuerySet 迭代器**

我从我读过的内容中得出的结论是，我们应该使用服务器端游标（显然（请参阅参考资料）使用标准 Django 游标不会达到相同的结果，因为默认情况下 python-MySQL 和 psycopg 连接器都会缓存结果）。

这真的会是一个更快（和/或更有效）的解决方案吗？

这可以在 django 中使用原始 SQL 来完成吗？还是我们应该根据数据库连接器编写特定的 python 代码？

[PostgreSQL](http://initd.org/psycopg/docs/usage.html#server-side-cursors)和[MySQL](http://mysql-python.sourceforge.net/MySQLdb.html#using-and-extending)中的服务器端游标

这就是我目前所能得到的……

## 一个姜戈`chunked_iterator()`

现在，当然最好的方法是让这种方法作为`queryset.iterator()`，而不是`iterate(queryset)`，并成为 django 核心的一部分，或者至少是一个可插入的应用程序。

**更新**感谢评论中的“T”找到带有一些附加信息的[django 票。](https://code.djangoproject.com/ticket/16614)连接器行为的差异使得最好的解决方案可能是创建一个特定的`chunked`方法，而不是透明地扩展`iterator`（听起来对我来说是个好方法）。[存在](https://github.com/akaariai/django-old/commit/8990e20df50ce110fe6ddbbdfed7a98987bb5835)一个实现存根，但一年内没有任何工作，而且看起来作者还没有准备好跳上它。

## 附加参考：

1.  [为什么 MYSQL 更高的 LIMIT 偏移量会减慢查询速度？](https://stackoverflow.com/questions/4481388/why-does-mysql-higher-limit-offset-slow-the-query-down)
2.  [如何加快 LIMIT 子句中偏移量较大的 MySQL 查询？](https://stackoverflow.com/questions/1243952/how-can-i-speed-up-a-mysql-query-with-a-large-offset-in-the-limit-clause)
3.  [http://explainextended.com/2009/10/23/mysql-order-by-limit-performance-late-row-lookups/](http://explainextended.com/2009/10/23/mysql-order-by-limit-performance-late-row-lookups/)
4.  [postgresql：offset + limit 变得非常慢](https://stackoverflow.com/questions/7974155/postgresql-offset-limit-gets-to-be-very-slow)
5.  [提高 PostgreSQL 中的 OFFSET 性能](https://stackoverflow.com/questions/6618366/improving-offset-performance-in-postgresql)
6.  [http://www.depesz.com/2011/05/20/pagination-with-fixed-order/](http://www.depesz.com/2011/05/20/pagination-with-fixed-order/)
7.  如何在 MySQL 中的 python服务器端游标中[获取逐行 MySQL ResultSet](https://stackoverflow.com/questions/337479/how-to-get-a-row-by-row-mysql-resultset-in-python)

## 编辑：

**Django 1.6 正在添加持久数据库连接**

[Django 数据库持久连接](https://docs.djangoproject.com/en/dev/ref/databases/#persistent-connections)

在某些情况下，这应该有助于使用游标。仍然超出了我目前的技能（和学习时间）如何实施这样的解决方案..

此外，“更好的解决方案”绝对不适用于所有情况，不能用作通用方法，只能根据具体情况调整存根......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-29T09:09:16.333

基本答案：**将原始 SQL 与服务器端游标一起使用**。

遗憾的是，在 Django 1.5.2 之前，没有正式的方法可以创建服务器端 MySQL 游标（不确定其他数据库引擎）。所以我写了一些神奇的代码来解决这个问题。

对于 Django 1.5.2 和 MySQLdb 1.2.4，以下代码将起作用。此外，它的评论很好。

**注意：**这不是基于公共 API，因此它可能会在未来的 Django 版本中中断。

```
# This script should be tested under a Django shell, e.g., ./manage.py shell

from types import MethodType

import MySQLdb.cursors
import MySQLdb.connections
from django.db import connection
from django.db.backends.util import CursorDebugWrapper

def close_sscursor(self):
    """An instance method which replace close() method of the old cursor.

    Closing the server-side cursor with the original close() method will be
    quite slow and memory-intensive if the large result set was not exhausted,
    because fetchall() will be called internally to get the remaining records.
    Notice that the close() method is also called when the cursor is garbage 
    collected.

    This method is more efficient on closing the cursor, but if the result set
    is not fully iterated, the next cursor created from the same connection
    won't work properly. You can avoid this by either (1) close the connection 
    before creating a new cursor, (2) iterate the result set before closing 
    the server-side cursor.
    """
    if isinstance(self, CursorDebugWrapper):
        self.cursor.cursor.connection = None
    else:
        # This is for CursorWrapper object
        self.cursor.connection = None

def get_sscursor(connection, cursorclass=MySQLdb.cursors.SSCursor):
    """Get a server-side MySQL cursor."""
    if connection.settings_dict['ENGINE'] != 'django.db.backends.mysql':
        raise NotImplementedError('Only MySQL engine is supported')
    cursor = connection.cursor()
    if isinstance(cursor, CursorDebugWrapper):
        # Get the real MySQLdb.connections.Connection object
        conn = cursor.cursor.cursor.connection
        # Replace the internal client-side cursor with a sever-side cursor
        cursor.cursor.cursor = conn.cursor(cursorclass=cursorclass)
    else:
        # This is for CursorWrapper object
        conn = cursor.cursor.connection
        cursor.cursor = conn.cursor(cursorclass=cursorclass)
    # Replace the old close() method
    cursor.close = MethodType(close_sscursor, cursor)
    return cursor

# Get the server-side cursor
cursor = get_sscursor(connection)

# Run a query with a large result set. Notice that the memory consumption is low.
cursor.execute('SELECT * FROM million_record_table')

# Fetch a single row, fetchmany() rows or iterate it via "for row in cursor:"
cursor.fetchone()

# You can interrupt the iteration at any time. This calls the new close() method,
# so no warning is shown.
cursor.close()

# Connection must be close to let new cursors work properly. see comments of
# close_sscursor().
connection.close() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-12T21:24:36.540

# 简单的答案

如果你只需要迭代表本身而不做任何花哨的事情，Django 带有一个[内置的迭代器](https://docs.djangoproject.com/en/dev/ref/models/querysets/#iterator)：

```
queryset.iterator() 
```

这会导致 Django 清理它自己的缓存以减少内存使用。请注意，对于真正的大表，这可能还不够。

* * *

# 复杂的答案

如果您要对每个对象执行更复杂的操作或拥有大量数据，则必须编写自己的。以下是一个查询集迭代器，它将查询集拆分为块，并且不会比基本迭代器慢多少（它将是数据库查询的线性数量，而不是 1，但每 1,000 行只有一个查询）。该函数按主键分页，这是高效实现所必需的，因为偏移量在大多数 SQL 数据库中是线性时间操作。

```
def queryset_iterator(queryset, page_size=1000):
    if not queryset:
        return
    max_pk = queryset.order_by("-pk")[0].pk
    # Scale the page size up by the average density of primary keys in the queryset
    adjusted_page_size = int(page_size * max_pk / queryset.count())

    pages = int(max_pk / adjusted_page_size) + 1
    for page_num in range(pages):
        lower = page_num * adjusted_page_size
        page = queryset.filter(pk__gte=lower, pk__lt=lower+page_size)
        for obj in page:
            yield obj 
```

使用看起来像：

```
for obj in queryset_iterator(Model.objects.all()):
    # do stuff 
```

这段代码有三个假设：

1.  您的主键是整数（这不适用于 UUID 主键）。
2.  查询集的主键至少在某种程度上是均匀分布的。如果这不是真的，那么`adjusted_page_size`最终可能会太大，并且您可能会在迭代过程中获得一个或几个大页面。

为了了解开销，我在一个包含 40,000 个条目的 Postgres 表上进行了测试。与原始迭代相比，queryset_iterator 增加了大约 80% 的迭代时间（2.2 秒对 1.2 秒）。对于 200 到 10,000 之间的页面大小，这种开销并没有太大变化，尽管它开始上升到 200 以下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T18:25:24.940

还有另一种选择。它不会使迭代*更快*（实际上它可能会减慢它的速度），但它会使其使用更少的内存。根据您的需要，这可能是合适的。

```
large_qs = MyModel.objects.all().values_list("id", flat=True)
for model_id in large_qs:
    model_object = MyModel.objects.get(id=model_id)
    # do whatever you need to do with the model here 
```

仅将 id 加载到内存中，并根据需要检索和丢弃对象。请注意增加的数据库负载和较慢的运行时间，这都是减少内存使用量的权衡。

我在工作实例上运行异步计划任务时使用了它，如果它们很慢并不重要，但是如果它们尝试使用太多内存，它们可能会使实例崩溃并因此中止进程。

# gwt - 缓存活动映射器使用示例

> ID：14144414
> 
> 赞同：0
> 
> 时间：2013-01-03T17:53:55.943
> 
> 标签：gwt, history

我们使用 MVP 模式实现了一个 GWT 应用程序。现在我们想在该应用程序中使用缓存活动映射器。

我在网上搜索了如何使用它。我什么也得不到。

谁能给我提供使用缓存活动映射器的示例。

谢谢， 斯里

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-03T18:39:58.927

您可以通过 Spring Roo 轻松设置一个示例（如果您没有被与 spring roo 相关的错误绊倒）。参考 - [http://gwtsts.blogspot.in/2011/03/part-iii-exploring-roo-generated-gwt.html](http://gwtsts.blogspot.in/2011/03/part-iii-exploring-roo-generated-gwt.html)

其他一些示例 GitHub 项目 -

```
https://github.com/ashtonthomas/beans
https://github.com/ashtonthomas/gwt-seminar 
```

# c++ - 断开并稍后重新连接 Qt 信号

> ID：14144415
> 
> 赞同：4
> 
> 时间：2013-01-03T17:53:56.173
> 
> 标签：c++, qt, signals-slots, qt-signals

有没有办法暂时断开 Qt 信号，但存储连接到它的对象列表，以便稍后可以重新连接信号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:53:44.643

[http://qt-project.org/forums/viewthread/6820](http://qt-project.org/forums/viewthread/6820)

这篇文章讨论了跟踪特定信号的连接列表的方法，该信号可用于在调用断开连接后重新连接它。

# http - HTTP MIME 类型中 +xml 的用途

> ID：14144418
> 
> 赞同：0
> 
> 时间：2013-01-03T17:54:01.943
> 
> 标签：http, mime-types

`+xml`以下 HTTP Accept Header 中的意义是什么：

`application/vnd.google-earth.kml+xml`

这只是表示它是一种基于 XML 的格式，还是它适用于 XML 编辑器，或者完全不同的东西？

[http://www.iana.org/assignments/media-types/application/vnd.google-earth.kml+xml](http://www.iana.org/assignments/media-types/application/vnd.google-earth.kml+xml "参考")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:56:07.213

检查[RFC](https://www.rfc-editor.org/rfc/rfc3023#page-32)：

> 附录 A. 为什么对基于 XML 的 MIME 类型使用“+xml”后缀？

> 尽管后缀的使用不被认为是原始 MIME 体系结构的一部分，但这种选择被认为可以提供最多的功能，同时减少互操作性问题或缺乏未来可扩展性的可能性。'+xml' 后缀的替代方案及其选择原因如下所述。

下面列出了一整套原因，但我不认为逐字复制它们属于合理使用。因此，请查看 RFC 以了解其完整（很长！）的故事。

# gwt - 多项目列表网格过滤

> ID：14144420
> 
> 赞同：1
> 
> 时间：2013-01-03T17:54:19.470
> 
> 标签：gwt, smartgwt, gwt-rpc, listgrid

我目前正在设置一个`ListGrid`带有过滤器的过滤器，但是在为具有多个项目选择的字段实现过滤器时遇到问题。

这是我想要实现的示例：

我有`ListGrid`这些价值观：

```
_________________
|Fruits Selected|
|_______________|
|Apple          |
|Apple,Orange   |
|Orange         |
|_______________| 
```

当我尝试在我的“多项目过滤器”中过滤并选择橙色时，我希望在我的网格上看到这个：

```
_________________
|Fruits Selected|
|_______________|
|Apple,Orange   |
|Orange         |
|_______________| 
```

但相反，我只看到这个：

```
_________________
|Fruits Selected|
|_______________|
|Orange         |
|_______________| 
```

我是否解释了预期的输出错误？如果是这样，有没有办法可以自定义处理多个项目过滤器的方式？

另一件事，我正在使用`GenericGwtRpcDataSource`这个论坛。希望这不是问题。

以下是要求的示例代码： **DataSource**

```
public class FruitLocalDS extends DataSource {

private static FruitLocalDS instance = null;

public static FruitLocalDS getInstance() {
    if (instance == null) {
        instance = new FruitLocalDS("supplyItemLocalDS");
    }
    return instance;
}

public FruitLocalDS(String id) {
    setID(id);

    DataSourceEnumField fruitNameField = new DataSourceEnumField(
            "fruitNames", "Fruit Name");
    fruitNameField.setMultiple(true);
    fruitNameField.setValueMap("Apple", "Guyabano", "Pineapple", "Orange",
            "Grapes");

    setFields(fruitNameField);
    setClientOnly(true);
    setTestData(Fruit.getDummyRecords());
}} 
```

**列表网格记录**：

```
public class Fruit  extends ListGridRecord {

public Fruit(String[] fruitNames) {
    setFruitNames(fruitNames);
}

public void setFruitNames(String[] fruitNames) {
    setAttribute("fruitNames", fruitNames);
}

public String getFruitName() {
    return getAttribute("fruitNames");
}

public static Fruit[] getDummyRecords() {
    return new Fruit[] {
            new Fruit(new String[]{"Orange"}), 
            new Fruit(new String[]{"Apple", "Orange"}),
            new Fruit(new String[]{"Guyabano","Orange"}),
            new Fruit(new String[]{"Pineapple","Orange"}),
    };
}} 
```

**入口点**：

```
public class MultiItemTest implements EntryPoint {
public void onModuleLoad() {
    final DataSource dataSource = FruitLocalDS.getInstance();

    ListGrid listGrid = new ListGrid();
    listGrid.setWidth(1000);
    // listGrid.setAutoFitData(Autofit.VERTICAL);
    listGrid.setHeight(224);
    listGrid.setDataPageSize(50);
    listGrid.setDataSource(dataSource);
    listGrid.setShowFilterEditor(true);
    listGrid.setCanEdit(true);
    listGrid.setAutoFetchData(true);
    listGrid.setEditEvent(ListGridEditEvent.DOUBLECLICK);

    listGrid.setShowRowNumbers(true);
    listGrid.setFilterOnKeypress(true);
    listGrid.setFetchDelay(1);

    listGrid.draw();
}} 
```

当您尝试在过滤器中选择“橙色”时，它只会显示：

```
Orange 
```

我期望的是：

```
Apple,Orange
Guyabano,Orange
Orange
Pineapple, Orange 
```

# c++ - MySQL C++ 连接器 setBigInt

> ID：14144424
> 
> 赞同：1
> 
> 时间：2013-01-03T17:54:28.457
> 
> 标签：c++, mysql

那么 PreparedStatement::setBigInt() 将 SQLString 作为值参数？C++ 中是否没有足够大的值来容纳 BigInt 可以容纳的值？如果我在 C++ 中使用 unsigned long long 怎么办？我需要做什么才能将此 unsigned long long 存储在 BigInt 字段中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-24T18:03:15.963

`setUInt64`与 uint64_t 一起使用：

```
void sql::PreparedStatement::setUInt64(unsigned int parameterIndex, uint64_t value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:13:36.433

bigint 是一个 64 位整数，那么为什么不能将 an`unsigned long long`用于`UNSIGNED BIGINT`列呢？

这可能取决于您使用的适配器。你有参考文档的链接吗？

# spring-batch - 无法将属性绑定到自定义 ItemWriter

> ID：14144425
> 
> 赞同：1
> 
> 时间：2013-01-03T17:54:33.237
> 
> 标签：spring-batch

我有一个简单的项目编写器，如下所示：

```
public class EntityItemWriter<T> implements ItemWriter<T>, InitializingBean {

  private String name;

  @Override
  public void write(List<? extends T> items) throws Exception {
    //writes to db
  }

  @Override
  public void afterPropertiesSet() throws Exception {
    Assert.hasLength(name);   //assertion fails
  }

  public void setName(String name) {
    this.name = name;
  }
} 
```

我的 job-definition.xml 有一个这样的 bean：

```
<bean id="EntityItemWriter" class="com.example.EntityItemWriter" scope="step">
    <property name="name" value="someRandomString" />
</bean> 
```

当批处理作业处于写入步骤时，EntityItemWriter 的 name 属性未设置为“someRandomString”并保持为空。有什么我想念的吗？

spring-batch 版本：2.1.0.M3
spring 版本：3.1.0.RELEASE

# css - 从活动的 jQuery UI 选项卡中删除大纲？

> ID：14144426
> 
> 赞同：16
> 
> 时间：2013-01-03T17:54:38.393
> 
> 标签：css, jquery-ui, jquery-ui-tabs

我想删除活动 jQuery UI 选项卡上的轮廓（或至少更改颜色）。

从[这个例子开始，](http://jqueryui.com/tabs/#default)我尝试了这个没有成功：

```
<style>
    #tabs .ui-state-focus
    {
        outline: none;
    }
</style> 
```

（基于this [question and answer](https://stackoverflow.com/questions/2086657/how-do-i-remove-an-active-outline-from-jquery-accordion)的提示）。

从活动选项卡中删除轮廓的技巧是什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-04T04:52:28.190

我不相信这`focus`是你需要定位的类，它是 CSS psuedo-class`:focus`

`.ui-state-focus:focus { outline:1px dotted red !important }`

如果可行，请`{outline:none}`删除它。不过，您有点担心它来提高您的可访问性，仅供参考。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-01-03T18:33:45.150

有很多方法可以做到这一点。这里有两个例子（我建议选项 2）：

**选项1**

`.ui-widget`从使用该类的所有元素中删除轮廓：

```
.ui-widget * { outline: none; }​ 
```

这是[一个工作小提琴](http://jsfiddle.net/zjmQT/1/)。

**选项 2**

使轮廓颜色透明：

```
#tabs li a
{
    outline-color: none;
}​ 
```

这是[一个工作小提琴](http://jsfiddle.net/zcEGK/)。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-02-10T03:24:45.637

我设法将其删除

```
.ui-tabs-anchor:active, .ui-tabs-anchor:focus{
     outline:none;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-17T07:01:27.090

如果您只想删除特定选项卡上的大纲，那么我建议您使用以下内容：

```
$("#tabs ul li").css({'outline': 'none'}); // where #tabs can be any specific tab group 
```

在你的 html 的 script 标签内。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-03T18:44:01.263

您可以通过指定禁用大纲`outline-width: 0;`

```
#tabs li a
{
    outline-width: 0;
}​ 
```

* * *

不使用 ID 的更通用的解决方案是：

```
.ui-tabs ul li a
{
    outline-width: 0;
}​ 
```

**演示**：http: [//jsfiddle.net/ebCpQ/](http://jsfiddle.net/ebCpQ/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-01-16T02:21:51.580

我也必须这样做以防止可能的初始标签顺序焦点：

```
.ui-state-active a, .ui-state-hover a, .ui-state-visited a, .ui-state-focus a, .ui-state-focus:focus {
    outline:none;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-03T18:58:18.870

你可以试试这个

```
a:focus { outline: none; } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-08T18:20:50.307

为了更清楚，轮廓出现在 ul.ui-tabs li.ui-tabs-nav 内部的元素上。上面的大多数例子都忘了提到这一点：所以这是原始问题的有效答案：

```
.ui-tabs-nav .ui-state-focus a {
    outline: none;
} 
```

[http://jsfiddle.net/xJ9Zr/5/](http://jsfiddle.net/xJ9Zr/5/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-23T14:37:09.983

奇怪的是，这些都不适合我。我必须添加一个边框才能使轮廓（或者它可能是一个蓝色边框）消失：

```
.ui-state-hover, .ui-state-focus, .ui-state-active
{
    border: 1px solid #ccc !important; /*Or any other color*/
    border-bottom: 0 !important;
} 
```

# ruby-on-rails - 恢复 mongodb 数据库 .bson 和 .json 文件

> ID：14144428
> 
> 赞同：12
> 
> 时间：2013-01-03T17:54:44.150
> 
> 标签：ruby-on-rails, mongodb, mongoid, database

在这个名为我的文件夹中，`my_backup`我有一个**mongodb 数据库转储**，其中包含我的所有**模型/集合**，例如：

```
admins.bson
admins.metadata.json
categories.bson
categories.metadata.json
pages.bson
pages.metadata.json
.
.
. 
```

我有一个名为`ubuntu_development`mongodb 的数据库。我正在与`rails 3 + mongoid`

**如何将文件夹中的所有模型/集合导入/恢复`my_backup`到我的数据库`ubuntu_development`**

非常感谢你！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-03T18:24:57.910

从控制台执行此命令（在本例中）：

```
mongorestore my_backup --db ubuntu_development 
```

1.  `mongodbrestore`后面是`my_backup`，这是保存数据库先前转储的文件夹名称。
2.  `--db ubuntu_development`指定我们要恢复数据的数据库名称。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-27T04:51:25.837

导入 .bson 文件

```
mongorestore -d db_name -c collection_name path/file.bson 
```

仅用于单个集合。试试这个：

```
mongorestore --drop -d db_name -c collection_name path/file.bson 
```

导入 .json 文件

```
mongoimport --db db_name --collection collection_name --file name.json 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-02T10:43:01.990

您必须通过 cmd 而不是在 Mongo Shell 上运行这个 mongorestore 命令...看看下面的命令...

在 cmd 上运行此命令（不在 Mongo shell 上）

```
>path\to\mongorestore.exe -d dbname -c collection_name path\to\same\collection.bson 
```

这`path\to\mongorestore.exe`是 mongodb 的 bin 文件夹中 mongorestore.exe 的路径。dbname 是数据库的名称。`collection_name`是 collection.bson 的名称。`path\to\same\collection.bson`是到达该集合的路径。

现在从 mongo shell 您可以验证是否创建了数据库（如果它不存在，将使用集合创建具有相同名称的数据库）。

# android - 如何在其他项目中重用包中的代码？

> ID：14144434
> 
> 赞同：1
> 
> 时间：2013-01-03T17:55:05.830
> 
> 标签：android, eclipse

目前我有一个在 Eclipse 中开发的工作 android project1，它包含 2 个包，比如包 A 和包 B。我正在开发一个新的 android 应用程序，我可以重用包 B 源代码而无需任何修改。我试过直接将包B的src目录复制到project2的src代码目录下。当我启动应用程序时，出现“包 B prject1 中的类链接失败”错误。这是重用现有代码的正确方法，还是有更好的方法来完成这项任务？提前致谢...

总结一下：

项目1：包A和包B。

项目2：包C和包B。

需要将包 B 的源代码移动到项目 2 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T18:10:30.063

如果您需要在项目 1 和项目 2 之间共享包 B。我建议您创建一个库项目。

创建库项目。

*   创建新项目
*   去属性
*   右键项目名称
*   将其标记为库

    ![在此处输入图像描述](../Images/2dfb961b963fcea1d3f388aa78d28ba4.png)

    创建库项目后，您可以将它们添加到您的项目 1 和 2

*   右键项目名称

*   去属性
*   添加库项目

    如下图所示，universal-image-loader 是一个库，我可以将它添加到我的项目中

    ![在此处输入图像描述](../Images/cb3c78d630654429e777df2c5108a594.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:01:46.057

在 Eclipse 的 Project Explorer 中（如果未启用，请选择 Window > Show View > Show Project Explorer），您应该能够右键单击您的项目并选择 Import。导入对话框将使您能够选择根目录。在这里你可以选择你的包 B 源代码的根目录。

我相信（我可能会弄错）这实际上会导致源代码被复制并放置在新的工作区中。虽然这不是世界末日，但它并不完全节省空间。我相信其他人可能有更实际的解决方案。

或者（只需在 stackoverlfow 上搜索您的问题是否有重复项），您可以将现有项目导入新项目的构建路径：[从 eclipse 中的另一个 java 项目导入](https://stackoverflow.com/questions/3487585/import-from-another-java-project-in-eclipse)。

# asp.net-mvc-4 - mvc4 网络 API 404

> ID：14144436
> 
> 赞同：2
> 
> 时间：2013-01-03T17:55:12.507
> 
> 标签：asp.net-mvc-4

任何人都可以看到我的路线配置有什么问题吗？我正在尝试通过以下方式调用我的 Web api 控制器：

```
localhost/Attribution/api/Client

localhost/Attribution/api/Fund 
```

我有几个扩展 ApiController 的控制器，称为 ClientController 和 FundController。

这是我的路线配置。我总是得到 HTTP 404 `The resource cannot be found`。

```
GlobalConfiguration.Configuration.Routes.MapRoute(
    "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional }
);

GlobalConfiguration.Configuration.Routes.MapHttpRoute(
    name: "test",
        routeTemplate: "api/{controller}/{id}/{action}",
        defaults: new
    {
            id = RouteParameter.Optional,
                action = RouteParameter.Optional
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:24:12.683

您需要包含一个动作，并且该动作应该在您的控制器中。如所写，url /api/Client 不知道要调用什么操作。相反，请尝试：

```
GlobalConfiguration.Configuration.Routes.MapHttpRoute(
    name: "test",
        routeTemplate: "api/{controller}/{action}/{id}",
        defaults: new
    {
            action = "Index",
            id = RouteParameter.Optional
    }); 
```

然后 URL /api/Client 应该在控制器“客户端”中调用操作“索引”。

# javascript - jquery mobile多个html文件与多个页面

> ID：14144437
> 
> 赞同：8
> 
> 时间：2013-01-03T17:55:12.363
> 
> 标签：javascript, jquery, jquery-mobile

在我的 phonegap/jquery 移动应用程序中，使用了多页面模型。index.html 有我的应用程序的所有页面，到目前为止 6 pages 。如果这个应用程序增长太多，变成一个 html 文件中的 19 页，会不会很糟糕？我创建了其他应用程序来测试并为每个页面使用一个 html 文件。但是看起来每次页面改变时，整个 DOM 都会重新加载，是吗？

请告诉我哪种结构更适合大型应用程序

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-03T22:50:38.380

使用 jQuery Mobile 时首先要考虑的是我应该使用什么样的页面模板。我已经在我之前的一篇**[文章](http://www.gajotres.net/secrets-of-a-good-jquery-mobile-page-architecture/)**中谈到了这个话题，现在我需要再澄清一下这个故事的这一部分。

简而言之（我不打算谈论页面架构，您需要了解的所有内容都可以在之前的链接中找到）。这个答案也可以在**[这个](http://www.gajotres.net/multipage-template-vs-multi-html-template-in-jquery-mobile/)**位置找到，为了透明，这是我的个人博客。

# 多 HTML 页面模板：

这是一个模板，其中一个 jQuery Mobile 页面被放置在一个 HTML 页面中。

### 好的

*   更小更轻，每个**data-role="page"**都在一个单独的 HTML 文件中，并且页面结构更加模块化。
*   如果从 HEAD 内容或任何不是**data-role="pšage"** div 的内容中删除每个后续 HTML 页面，则可以变得更小。不幸的是，在这种情况下，如果不支持 JavaScript，则回退是不可能的。
*   DOM 体积比较小，只有第一个页面被永久加载到 DOM 中，其他页面也会被加载到 DOM 中，但同时在不主动使用时也会被移除，基本上每次移出时都会被移除。
*   如果不支持 JavaScript，则更好的回退。页面刷新后在桌面浏览器中效果很好，主要是因为每个 HTML 页面都有一个现有的 HEAD 内容。这也允许您的应用程序表现得像普通的网络应用程序，主要是因为可以关闭 AJAX。

### ...与坏的

*   由于每个页面导航都会生成一个新请求，因此会消耗更多带宽。当从每个页面移动时，将从 DOM 中永久删除，除非打开兑现。
*   导航回先前加载的页面将再次生成新请求。
*   初始页面加载速度很快，但随后的页面加载速度比多页模板中的慢。这可能会在页面转换期间导致问题，在移动设备上更是如此。桌面浏览器没有这个问题。
*   比移动浏览器更适合桌面浏览器。也适用于更大的应用程序，这也是移动设备的问题。
*   每次访问页面时都会触发 Pageinit 事件（对于那些不知道此事件的人，该事件会替换 jQuery Mobile 中的文档就绪，因此它应该只运行一次），从而导致多个事件绑定出现问题。
*   不能在任何后续的 HTML 页面中使用多于一个 data-role="page"，只有初始的可以有多于一页。

# 多页模板

这是一个模板，其中一个或多个 jQuery Mobile 页面是单个 HTML 文件的一部分。

### 好的

*   由于所有页面都已加载，因此不会生成用于在页面之间导航的额外请求。
*   由于文件较大，首次加载速度较慢，但​​随后的页面导航速度较快，因此过渡更加流畅。几乎原生喜欢平滑，强调几乎。
*   适用于相对较小的应用程序和您了解目标平台功能（包括是否存在 JavaScript 支持）的情况，因此使其成为混合应用程序的绝佳解决方案。它作为 Phonegap 应用程序比多 HTML 模板效果要好得多。
*   “页面”数据角色元素是必需的。

### ...与坏的

*   较重。所有页面都在一个 html 文件中。具有许多页面的大型应用程序会增加 DOM 大小。
*   由于使用了 Ajax 导航，因此需要 JavaScript 支持。
*   存在多个页面容器，并且在页面加载时仅显示第一个。
*   对内部页面使用 data-ajax="false" 会忽略 data-transition 属性，默认使用幻灯片
*   重样式的页面在移动设备上可能会变得迟缓。

最后，一个好的 jQuery Mobile 页面架构的秘诀就在中间的某个地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T18:01:45.073

如果您将每个页面分解为自己的 html 文件，您的代码将更易于维护和更新。

有时你想在每个页面之间制作动画，或者有一个输入表单，它有多个页面的错觉，但实际上是同一页面上的多个 div。在这些和许多其他情况下，使用一页具有明显的优势。但是，如果您并不真正需要这种功能，请拆分您的网站。

# mongodb - mapReduce 在升级的 2.2.0 中给出不同的结果

> ID：14144438
> 
> 赞同：0
> 
> 时间：2013-01-03T17:55:21.183
> 
> 标签：mongodb, mapreduce

我一直在开发中使用 mongodb 2.0.4，在部署到生产环境时我没有意识到它们正在运行 2.2.0。我使用的 mapReduce 函数不再像 2.0.4 下那​​样运行，我不知道为什么。

mongodb 2.0.4（注意：M、F、T、I、C、H、R、D 总共应为 144，在此示例中为）：

```
{
"_id" : "",
"value" : {
    "tag" : "",
    "networth" : 43558505,
    "land" : 201837,
    "alive" : 144,
    "M" : 86,
    "F" : 6,
    "T" : 5,
    "I" : 10,
    "C" : 17,
    "H" : 4,
    "R" : 12,
    "D" : 4,
    "gdi" : 15
    }
} 
```

mongo 2.2.0（m+f+t+i+c+h+r+d 总计达 108，当它应该总计 144）

```
{
"_id" : "",
"value" : {
    "tag" : "",
    "networth" : 43558505,
    "land" : 201837,
    "alive" : 144,
    "M" : 67,
    "F" : 5,
    "T" : 3,
    "I" : 6,
    "C" : 13,
    "H" : 3,
    "R" : 9,
    "D" : 2,
    "gdi" : 15
    }
} 
```

这是我正在使用的 map/reduce 函数：

```
// Map function
var map = function() { 
    var key = this.tag;
    var value = 
    {
        tag: this.tag,
        networth: this.networth,
        land: this.land,
        alive: this.alive,
        gdi: this.gdi,
        gov: this.gov
    };
    emit(key, value);
}; 
```

减少功能

```
var reduce = function(k,vals) {
    reducedVals = { tag: k, networth: 0, land: 0, alive: 0, M: 0, F: 0, T: 0, I: 0, C: 0, H: 0, R: 0, D: 0, gdi: 0 };

    for (var i = 0; i < vals.length; i++){

        reducedVals.networth += vals[i].networth;
        reducedVals.land += vals[i].land;
        reducedVals.alive += vals[i].alive;
        reducedVals.gdi += vals[i].gdi;     
        if (vals[i].gov == "M") reducedVals.M = reducedVals.M + 1;
        if (vals[i].gov == "F") reducedVals.F = reducedVals.F + 1;
        if (vals[i].gov == "T") reducedVals.T = reducedVals.T + 1;
        if (vals[i].gov == "I") reducedVals.I = reducedVals.I + 1;
        if (vals[i].gov == "C") reducedVals.C = reducedVals.C + 1;
        if (vals[i].gov == "H") reducedVals.H = reducedVals.H + 1;
        if (vals[i].gov == "R") reducedVals.R = reducedVals.R + 1;
        if (vals[i].gov == "D") reducedVals.D = reducedVals.D + 1;
    }
    return reducedVals;
}; 
```

执行地图缩减

```
collection.mapReduce(map, reduce, {out: {replace : 'alliances'}, query: {"alive":1}}, function(err, collection) {
    // Mapreduce returns the temporary collection with the results
            db.close();
     }); 
```

如此简短的概要..该集合有一堆分数，格式如下：

```
 "alive" : 1,
"countryNumber" : 47,
"deleted" : 0,
"gdi" : 0,
"gov" : "C",
"land" : 20111,
"name" : "AtheistCelebratingXmas",
"networth" : 9793082,
"protection" : 0,
"rank" : 1,
"resetid" : 407,
"serverid" : 9,
"tag" : "Evolve",
"vacation" : 0 
```

我基本上是按、和列`tag`进行分组。然后检查列的值并总结 D、R 等的总数。有没有什么特别的原因我错过了为什么这在 2.2 和 2.0.4 中不能正常工作？无论哪种方式，新的聚合命令会更容易做到这一点吗？我给了它一个简短的查看，并且可以得到 group by ， sums for和columns 工作——但不知道从哪里开始 gov 列。`networth``land``alive``gov``tag``networth``alive`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:31:07.857

`emit`您从函数中返回的对象的形状`map`必须与从`reduce`函数返回的对象相同。这是因为当 MongoDB 决定并行化 map-reduce 时，`reduce`可以将调用的结果反馈到。`reduce`

所以你需要改变你`map`的组装值，`emit`使它们具有与从返回的相同的结构`reduce`：

```
var value = {
    "tag" : this.tag,
    "networth" : this.networth,
    "land" : this.land,
    "alive" : this.alive,
    "gdi" : this.gdi
};
value[this.gov] = 1; 
```

然后`reduce`相应地更新您的功能。

顺便说一句，如果有足够的文档，这在 2.0.4 中也会失败。只是 2.2 对何时并行化使用了不同的阈值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T05:18:01.673

我接受了 JohnnyHK 的回答，因为他回答了为什么我的代码不能从一个版本转换到另一个版本；但是，我觉得我应该发布我在代码中修改的内容来解决问题。

地图功能：

```
var map = function() { 
     var key = this.tag;
     var fields = {
        tag: this.tag,
        networth: this.networth,
        land: this.land,
        alive: this.alive,
        gdi: this.gdi,
        M: 0,
        F: 0,
        T: 0,
        I: 0,
        C: 0,
        H: 0,
        R: 0,
        D: 0
      };
    if (this.gov == "M") fields["M"] = 1
    else fields["M"] = 0
    if (this.gov == "F") fields["F"] = 1
    else fields["F"] = 0
    if (this.gov == "T") fields["T"] = 1
    else fields["T"] = 0
    if (this.gov == "I") fields["I"] = 1
    else fields["I"] = 0
    if (this.gov == "C") fields["C"] = 1
    else fields["C"] = 0
    if (this.gov == "H") fields["H"] = 1
    else fields["H"] = 0
    if (this.gov == "R") fields["R"] = 1
    else fields["R"] = 0
    if (this.gov == "D") fields["D"] = 1
    else fields["D"] = 0

emit(key, fields);
}; 
```

减少功能：

```
var reduce = function(k,vals) {
    reducedVals = { tag: k, networth: 0, land: 0,  alive: 0, M: 0, F: 0, T: 0, I: 0, C: 0, H: 0, R: 0, D: 0, gdi: 0}; 

    for (var i = 0; i < vals.length; i++){
        reducedVals.networth += vals[i].networth;
        reducedVals.land += vals[i].land;
        reducedVals.alive += vals[i].alive;
        reducedVals.gdi += vals[i].gdi;     
        reducedVals.M += vals[i].M;
        reducedVals.F += vals[i].F;
        reducedVals.T += vals[i].T;
        reducedVals.I += vals[i].I;
        reducedVals.C += vals[i].C;
        reducedVals.H += vals[i].H;
        reducedVals.R += vals[i].R;
        reducedVals.D += vals[i].D;

    }
    return reducedVals;

}; 
```

# tridion - 无法查看发布队列中的项目

> ID：14144440
> 
> 赞同：0
> 
> 时间：2013-01-03T17:55:22.120
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我们正在使用 Tridion 2011 SP1。我们有一个用户可以访问 2 个出版物，他可以发布这些出版物的页面，但是当他检查发布队列中的已发布项目时，他看不到发布队列中的任何项目（尽管他发布了项目数量）。谁能告诉我们出了什么问题？

附上运输日志的一小部分。

```
2013-01-03 12:34:43,221 DEBUG DestinationController - Transports in progress: 1
2013-01-03 12:34:43,237 DEBUG ParallelDestinationWorker - Waiting for transport result for: tcm:0-283176-66560
2013-01-03 12:34:43,252 DEBUG TransportPoolManager - Returning a freely available and alive TransportConnector
2013-01-03 12:34:43,252 DEBUG TransportSender - Starting sending transportPackage: D:\Tridion\bin\transactions\tcm_0-283176-66560.Content.zip
2013-01-03 12:34:43,689 DEBUG HTTPSTransportConnector - Successfully transport content to destination: http://10.97.12.24:20000/httpupload.aspx
2013-01-03 12:34:43,689 DEBUG TransportSender - Sending D:\Tridion\bin\transactions\tcm_0-283176-66560.Content.zip to destination: iH1DJ7u5t1piMKRZi9OS0Q== completed.
2013-01-03 12:34:43,705 DEBUG TransportPoolManager - Connector is registered for reuse: HTTPS[Password[******], UserName[TridionAppUser], URL[http://10.97.12.24:20000/httpupload.aspx]] available: 1
2013-01-03 12:34:43,705 DEBUG ParallelDestinationWorker - Received item from transport destination: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:34:43,736 DEBUG DestinationControllerFactory - Returning existing destination controller.
2013-01-03 12:34:43,736 DEBUG DestinationController - Finalizing transport for transaction: tcm:0-283176-66560 on destination: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:34:43,736 DEBUG DestinationController - Transports in progress: 0
2013-01-03 12:34:43,736 DEBUG StepTransport - Transport was succesfully completed for transaction:tcm:0-283176-66560
2013-01-03 12:34:43,736 INFO  StepPhaseOneCommit - Transport has no transaction control, not sending commit/rollback commands for transaction: tcm:0-283176-66560
2013-01-03 12:34:43,736 INFO  StepPrepare - Finalizing/cleaning transaction: tcm:0-283176-66560
2013-01-03 12:34:47,449 DEBUG DestinationController - Checking destination for transport metadata
2013-01-03 12:34:47,449 DEBUG TransportPoolManager - Returning a freely available and alive TransportConnector
2013-01-03 12:34:47,480 DEBUG TransportPoolManager - Connector is registered for reuse: HTTPS[Password[******], UserName[TridionAppUser], URL[http://10.97.12.24:20000/httpupload.aspx]] available: 1
2013-01-03 12:34:47,480 DEBUG DestinationController - Starting polling on destination: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:34:47,480 DEBUG TransportPoolManager - Returning a freely available and alive TransportConnector
2013-01-03 12:34:47,979 DEBUG DestinationController - Found notification for transaction: tcm:0-283176-66560
2013-01-03 12:34:47,979 DEBUG DestinationController - New deployer endpoint information received for transaction: tcm:0-283176-66560 and destination: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:34:48,010 DEBUG DestinationController - Polling attempt 1 for transaction: tcm:0-283176-66560 on destination: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:34:48,010 DEBUG TransportPoolManager - Connector is registered for reuse: HTTPS[Password[******], UserName[TridionAppUser], URL[http://10.97.12.24:20000/httpupload.aspx]] available: 1
2013-01-03 12:34:53,018 DEBUG DestinationController - Checking destination for transport metadata
2013-01-03 12:34:53,018 DEBUG TransportPoolManager - Returning a freely available and alive TransportConnector
2013-01-03 12:34:53,034 DEBUG TransportPoolManager - Connector is registered for reuse: HTTPS[Password[******], UserName[TridionAppUser], URL[http://10.97.12.24:20000/httpupload.aspx]] available: 1
2013-01-03 12:34:53,034 DEBUG DestinationController - Starting polling on destination: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:34:53,049 DEBUG TransportPoolManager - Returning a freely available and alive TransportConnector
2013-01-03 12:34:53,065 DEBUG DestinationController - Found notification for transaction: tcm:0-283176-66560
2013-01-03 12:34:53,065 DEBUG DestinationController - New deployer endpoint information received for transaction: tcm:0-283176-66560 and destination: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:34:53,081 DEBUG DestinationController - Polling attempt 2 for transaction: tcm:0-283176-66560 on destination: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:34:53,081 DEBUG TransportPoolManager - Connector is registered for reuse: HTTPS[Password[******], UserName[TridionAppUser], URL[http://10.97.12.24:20000/httpupload.aspx]] available: 1
2013-01-03 12:34:58,104 DEBUG DestinationController - Checking destination for transport metadata
2013-01-03 12:34:58,104 DEBUG TransportPoolManager - Returning a freely available and alive TransportConnector
2013-01-03 12:34:58,119 DEBUG TransportPoolManager - Connector is registered for reuse: HTTPS[Password[******], UserName[TridionAppUser], URL[http://10.97.12.24:20000/httpupload.aspx]] available: 1
2013-01-03 12:34:58,119 DEBUG DestinationController - Starting polling on destination: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:34:58,119 DEBUG TransportPoolManager - Returning a freely available and alive TransportConnector
2013-01-03 12:34:58,135 DEBUG DestinationController - Found notification for transaction: tcm:0-283176-66560
2013-01-03 12:34:58,135 DEBUG DestinationController - New deployer endpoint information received for transaction: tcm:0-283176-66560 and destination: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:34:58,151 INFO  DestinationController - All Deployer endpoints have completed, setting transaction to completed for: tcm:0-283176-66560
2013-01-03 12:34:58,151 DEBUG RollingStateRetriever - Unable to read transport state file, not adding to summary batch
2013-01-03 12:34:58,166 DEBUG DestinationController - Removing notification task for destination iH1DJ7u5t1piMKRZi9OS0Q== for transaction: tcm:0-283176-66560
2013-01-03 12:34:58,166 DEBUG DestinationController - Polling attempt 3 for transaction: tcm:0-283176-66560 on destination: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:34:58,166 INFO  DestinationController - RemoteEndpoint: iH1DJ7u5t1piMKRZi9OS0Q== completed deployment handling, deleting state file: tcm_0-283176-66560.state.xml
2013-01-03 12:34:58,166 DEBUG HTTPSTransportConnector - Doing remove operation on remote HTTP(s) destination: http://10.97.12.24:20000/httpupload.aspx?fileName=tcm_0-283176-66560.state.xml&action=remove
2013-01-03 12:34:58,182 INFO  HTTPSTransportConnector - Deleted file at remote HTTP(s) destination: tcm_0-283176-66560.state.xml was success: true
2013-01-03 12:34:58,182 DEBUG TransportPoolManager - Connector is registered for reuse: HTTPS[Password[******], UserName[TridionAppUser], URL[http://10.97.12.24:20000/httpupload.aspx]] available: 1
2013-01-03 12:36:02,939 DEBUG TransportPoolManager - Purging connector: HTTPS[Password[******], UserName[TridionAppUser], URL[http://10.97.12.24:20000/httpupload.aspx]] idle for: 64757
2013-01-03 12:39:37,131 DEBUG DestinationControllerMonitor - Cleaning up destination controllers.
2013-01-03 12:39:37,131 DEBUG DestinationController - Idle(ms): 278965, Transports: 0, Notifications: true
2013-01-03 12:40:23,526 DEBUG TransportService - Starting handing of a transaction
2013-01-03 12:40:23,541 INFO  TransactionProcessor - No existing transport transaction information for: tcm:0-283177-66560 creating new transaction state
2013-01-03 12:40:23,541 DEBUG TransactionHeader - Writing[TransactionHeader transactionId=tcm:0-283177-66560 control=COMMIT] to C:\temp\tcm_0-283177-66560.Content\transaction.xml
2013-01-03 12:40:23,541 DEBUG DestinationControllerFactory - Returning existing destination controller.
2013-01-03 12:40:23,572 INFO  TransportService - Starting transport handling of transaction: tcm:0-283177-66560
2013-01-03 12:40:23,572 DEBUG DestinationControllerFactory - Returning existing destination controller.
2013-01-03 12:40:23,572 INFO  TransportPoolManager - Creating a new TransportPoolConnector, because no available connectors in connection pool
2013-01-03 12:40:23,572 DEBUG TransportPoolConnector - Configuring TransportPoolConnector.
2013-01-03 12:40:23,572 DEBUG HTTPSTransportConnector - Authentication information supplied, setting basic credentials
2013-01-03 12:40:23,572 DEBUG DestinationProgressWorker - Starting retrieving active transactions at destination: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:40:23,604 DEBUG DestinationProgressWorker - Found 0 transactions in progress and 0 waiting transactions.
2013-01-03 12:40:23,604 DEBUG TransportPoolManager - Connector is registered for reuse: HTTPS[Password[******], UserName[TridionAppUser], URL[http://10.97.12.24:20000/httpupload.aspx]] available: 1
2013-01-03 12:40:23,604 INFO  DestinationController - Transaction fits inside current window, proceeding transaction: tcm:0-283177-66560
2013-01-03 12:40:23,604 DEBUG TransactionManager - Destination is available for transport: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:40:23,604 DEBUG TransactionManager - All destinations are available for transport of transaction: tcm:0-283177-66560
2013-01-03 12:40:23,619 INFO  ZipWorker - Preparing TransportPackage for id: tcm:0-283177-66560
2013-01-03 12:40:23,619 DEBUG ZipWorker - Zipping Transportpackage: c:\Temp\tcm_0-283177-66560.Content
2013-01-03 12:40:24,087 DEBUG ZipWorker - Zipping has been completed for transaction: tcm:0-283177-66560
2013-01-03 12:40:24,087 DEBUG StepPrepare - Zipping has been completed successfully for transaction: tcm:0-283177-66560
2013-01-03 12:40:24,087 DEBUG DestinationControllerFactory - Returning existing destination controller.
2013-01-03 12:40:24,118 DEBUG DestinationControllerFactory - Returning existing destination controller.
2013-01-03 12:40:24,134 DEBUG DestinationController - Transports in progress: 1
2013-01-03 12:40:24,134 DEBUG ParallelDestinationWorker - Waiting for transport result for: tcm:0-283177-66560
2013-01-03 12:40:24,150 DEBUG TransportPoolManager - Returning a freely available and alive TransportConnector
2013-01-03 12:40:24,150 DEBUG TransportSender - Starting sending transportPackage: D:\Tridion\bin\transactions\tcm_0-283177-66560.Content.zip
2013-01-03 12:40:24,508 DEBUG HTTPSTransportConnector - Successfully transport content to destination: http://10.97.12.24:20000/httpupload.aspx
2013-01-03 12:40:24,508 DEBUG TransportSender - Sending D:\Tridion\bin\transactions\tcm_0-283177-66560.Content.zip to destination: iH1DJ7u5t1piMKRZi9OS0Q== completed.
2013-01-03 12:40:24,540 DEBUG TransportPoolManager - Connector is registered for reuse: HTTPS[Password[******], UserName[TridionAppUser], URL[http://10.97.12.24:20000/httpupload.aspx]] available: 1
2013-01-03 12:40:24,540 DEBUG ParallelDestinationWorker - Received item from transport destination: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:40:24,555 DEBUG DestinationControllerFactory - Returning existing destination controller.
2013-01-03 12:40:24,555 DEBUG DestinationController - Finalizing transport for transaction: tcm:0-283177-66560 on destination: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:40:24,555 DEBUG DestinationController - Transports in progress: 0
2013-01-03 12:40:24,555 DEBUG StepTransport - Transport was succesfully completed for transaction:tcm:0-283177-66560
2013-01-03 12:40:24,555 INFO  StepPhaseOneCommit - Transport has no transaction control, not sending commit/rollback commands for transaction: tcm:0-283177-66560
2013-01-03 12:40:24,555 INFO  StepPrepare - Finalizing/cleaning transaction: tcm:0-283177-66560
2013-01-03 12:40:28,720 DEBUG DestinationController - Checking destination for transport metadata
2013-01-03 12:40:28,720 DEBUG TransportPoolManager - Returning a freely available and alive TransportConnector
2013-01-03 12:40:28,736 DEBUG TransportPoolManager - Connector is registered for reuse: HTTPS[Password[******], UserName[TridionAppUser], URL[http://10.97.12.24:20000/httpupload.aspx]] available: 1
2013-01-03 12:40:28,736 DEBUG DestinationController - Starting polling on destination: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:40:28,736 DEBUG TransportPoolManager - Returning a freely available and alive TransportConnector
2013-01-03 12:40:28,752 DEBUG DestinationController - Found notification for transaction: tcm:0-283177-66560
2013-01-03 12:40:28,752 DEBUG DestinationController - New deployer endpoint information received for transaction: tcm:0-283177-66560 and destination: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:40:28,767 INFO  DestinationController - All Deployer endpoints have completed, setting transaction to completed for: tcm:0-283177-66560
2013-01-03 12:40:28,798 DEBUG DestinationController - Removing notification task for destination iH1DJ7u5t1piMKRZi9OS0Q== for transaction: tcm:0-283177-66560
2013-01-03 12:40:28,798 DEBUG DestinationController - Polling attempt 1 for transaction: tcm:0-283177-66560 on destination: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:40:28,814 INFO  DestinationController - RemoteEndpoint: iH1DJ7u5t1piMKRZi9OS0Q== completed deployment handling, deleting state file: tcm_0-283177-66560.state.xml
2013-01-03 12:40:28,814 DEBUG HTTPSTransportConnector - Doing remove operation on remote HTTP(s) destination: http://10.97.12.24:20000/httpupload.aspx?fileName=tcm_0-283177-66560.state.xml&action=remove
2013-01-03 12:40:28,830 INFO  HTTPSTransportConnector - Deleted file at remote HTTP(s) destination: tcm_0-283177-66560.state.xml was success: true
2013-01-03 12:40:28,830 DEBUG TransportPoolManager - Connector is registered for reuse: HTTPS[Password[******], UserName[TridionAppUser], URL[http://10.97.12.24:20000/httpupload.aspx]] available: 1
2013-01-03 12:41:33,461 DEBUG TransportPoolManager - Purging connector: HTTPS[Password[******], UserName[TridionAppUser], URL[http://10.97.12.24:20000/httpupload.aspx]] idle for: 64631
2013-01-03 12:42:14,645 DEBUG TransportService - Starting handing of a transaction
2013-01-03 12:42:14,645 INFO  TransactionProcessor - No existing transport transaction information for: tcm:0-283178-66560 creating new transaction state
2013-01-03 12:42:14,661 DEBUG TransactionHeader - Writing[TransactionHeader transactionId=tcm:0-283178-66560 control=COMMIT] to C:\temp\tcm_0-283178-66560.Content\transaction.xml
2013-01-03 12:42:14,661 DEBUG DestinationControllerFactory - Returning existing destination controller.
2013-01-03 12:42:14,723 INFO  TransportService - Starting transport handling of transaction: tcm:0-283178-66560
2013-01-03 12:42:14,723 DEBUG DestinationControllerFactory - Returning existing destination controller.
2013-01-03 12:42:14,723 INFO  TransportPoolManager - Creating a new TransportPoolConnector, because no available connectors in connection pool
2013-01-03 12:42:14,723 DEBUG TransportPoolConnector - Configuring TransportPoolConnector.
2013-01-03 12:42:14,723 DEBUG HTTPSTransportConnector - Authentication information supplied, setting basic credentials
2013-01-03 12:42:14,723 DEBUG DestinationProgressWorker - Starting retrieving active transactions at destination: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:42:14,754 DEBUG DestinationProgressWorker - Found 0 transactions in progress and 0 waiting transactions.
2013-01-03 12:42:14,754 DEBUG TransportPoolManager - Connector is registered for reuse: HTTPS[Password[******], UserName[TridionAppUser], URL[http://10.97.12.24:20000/httpupload.aspx]] available: 1
2013-01-03 12:42:14,754 INFO  DestinationController - Transaction fits inside current window, proceeding transaction: tcm:0-283178-66560
2013-01-03 12:42:14,754 DEBUG TransactionManager - Destination is available for transport: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:42:14,754 DEBUG TransactionManager - All destinations are available for transport of transaction: tcm:0-283178-66560
2013-01-03 12:42:14,770 INFO  ZipWorker - Preparing TransportPackage for id: tcm:0-283178-66560
2013-01-03 12:42:14,770 DEBUG ZipWorker - Zipping Transportpackage: c:\Temp\tcm_0-283178-66560.Content
2013-01-03 12:42:14,973 DEBUG ZipWorker - Zipping has been completed for transaction: tcm:0-283178-66560
2013-01-03 12:42:14,973 DEBUG StepPrepare - Zipping has been completed successfully for transaction: tcm:0-283178-66560
2013-01-03 12:42:14,973 DEBUG DestinationControllerFactory - Returning existing destination controller.
2013-01-03 12:42:15,020 DEBUG DestinationControllerFactory - Returning existing destination controller.
2013-01-03 12:42:15,035 DEBUG DestinationController - Transports in progress: 1
2013-01-03 12:42:15,035 DEBUG ParallelDestinationWorker - Waiting for transport result for: tcm:0-283178-66560
2013-01-03 12:42:15,051 DEBUG TransportPoolManager - Returning a freely available and alive TransportConnector
2013-01-03 12:42:15,051 DEBUG TransportSender - Starting sending transportPackage: D:\Tridion\bin\transactions\tcm_0-283178-66560.Content.zip
2013-01-03 12:42:15,191 DEBUG HTTPSTransportConnector - Successfully transport content to destination: http://10.97.12.24:20000/httpupload.aspx
2013-01-03 12:42:15,191 DEBUG TransportSender - Sending D:\Tridion\bin\transactions\tcm_0-283178-66560.Content.zip to destination: iH1DJ7u5t1piMKRZi9OS0Q== completed.
2013-01-03 12:42:15,207 DEBUG TransportPoolManager - Connector is registered for reuse: HTTPS[Password[******], UserName[TridionAppUser], URL[http://10.97.12.24:20000/httpupload.aspx]] available: 1
2013-01-03 12:42:15,207 DEBUG ParallelDestinationWorker - Received item from transport destination: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:42:15,222 DEBUG DestinationControllerFactory - Returning existing destination controller.
2013-01-03 12:42:15,222 DEBUG DestinationController - Finalizing transport for transaction: tcm:0-283178-66560 on destination: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:42:15,222 DEBUG DestinationController - Transports in progress: 0
2013-01-03 12:42:15,222 DEBUG StepTransport - Transport was succesfully completed for transaction:tcm:0-283178-66560
2013-01-03 12:42:15,222 INFO  StepPhaseOneCommit - Transport has no transaction control, not sending commit/rollback commands for transaction: tcm:0-283178-66560
2013-01-03 12:42:15,222 INFO  StepPrepare - Finalizing/cleaning transaction: tcm:0-283178-66560
2013-01-03 12:42:18,998 DEBUG DestinationController - Checking destination for transport metadata
2013-01-03 12:42:18,998 DEBUG TransportPoolManager - Returning a freely available and alive TransportConnector
2013-01-03 12:42:19,013 DEBUG TransportPoolManager - Connector is registered for reuse: HTTPS[Password[******], UserName[TridionAppUser], URL[http://10.97.12.24:20000/httpupload.aspx]] available: 1
2013-01-03 12:42:19,013 DEBUG DestinationController - Starting polling on destination: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:42:19,013 DEBUG TransportPoolManager - Returning a freely available and alive TransportConnector
2013-01-03 12:42:19,044 DEBUG DestinationController - Found notification for transaction: tcm:0-283178-66560
2013-01-03 12:42:19,044 DEBUG DestinationController - New deployer endpoint information received for transaction: tcm:0-283178-66560 and destination: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:42:19,060 INFO  DestinationController - All Deployer endpoints have completed, setting transaction to completed for: tcm:0-283178-66560
2013-01-03 12:42:19,107 DEBUG DestinationController - Removing notification task for destination iH1DJ7u5t1piMKRZi9OS0Q== for transaction: tcm:0-283178-66560
2013-01-03 12:42:19,107 DEBUG DestinationController - Polling attempt 1 for transaction: tcm:0-283178-66560 on destination: iH1DJ7u5t1piMKRZi9OS0Q==
2013-01-03 12:42:19,107 INFO  DestinationController - RemoteEndpoint: iH1DJ7u5t1piMKRZi9OS0Q== completed deployment handling, deleting state file: tcm_0-283178-66560.state.xml
2013-01-03 12:42:19,107 DEBUG HTTPSTransportConnector - Doing remove operation on remote HTTP(s) destination: http://10.97.12.24:20000/httpupload.aspx?fileName=tcm_0-283178-66560.state.xml&action=remove
2013-01-03 12:42:19,122 INFO  HTTPSTransportConnector - Deleted file at remote HTTP(s) destination: tcm_0-283178-66560.state.xml was success: true
2013-01-03 12:42:19,122 DEBUG TransportPoolManager - Connector is registered for reuse: HTTPS[Password[******], UserName[TridionAppUser], URL[http://10.97.12.24:20000/httpupload.aspx]] available: 1
2013-01-03 12:43:23,629 DEBUG TransportPoolManager - Purging connector: HTTPS[Password[******], UserName[TridionAppUser], URL[http://10.97.12.24:20000/httpupload.aspx]] idle for: 64507
2013-01-03 12:44:37,136 DEBUG DestinationControllerMonitor - Cleaning up destination controllers.
2013-01-03 12:44:37,136 DEBUG DestinationController - Idle(ms): 138029, Transports: 0, Notifications: true
2013-01-03 12:49:37,140 DEBUG DestinationControllerMonitor - Cleaning up destination controllers.
2013-01-03 12:49:37,140 DEBUG DestinationController - Idle(ms): 438033, Transports: 0, Notifications: true
2013-01-03 12:54:37,144 DEBUG DestinationControllerMonitor - Cleaning up destination controllers.
2013-01-03 12:54:37,144 DEBUG DestinationController - Idle(ms): 738037, Transports: 0, Notifications: true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:58:14.483

它真的发布了什么吗？您可以将不需要发布操作的内容发送到队列（例如，选择没有页面的结构组，发布 = 没有要发布的内容）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T18:32:36.047

如果管理用户登录并设置发布队列以显示所有事务，他们是否会看到非管理员用户的发布作业？

如果来自非管理员用户的事务对管理员用户不可见，则遵循 Nuno 关于在调试/日志记录中运行发布者的建议 - 很可能实际上没有发送任何内容进行发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T19:21:27.363

看起来包正在到达部署者，然后回滚操作。

我猜这可能是由于http上传的大小限制造成的。

# c++ - 是否可以在 XCode 的 .cpp 文件中使用 lambda 表达式？

> ID：14144443
> 
> 赞同：1
> 
> 时间：2013-01-03T17:55:36.190
> 
> 标签：c++, xcode, lambda

所以[XCode 4.4 声称支持 lambdas](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_4.html)，我已经在一些我试图在 XCode 中编译的跨平台代码中使用了它们。我没有运气，但[在这里](http://comments.gmane.org/gmane.comp.compilers.clang.devel/23922)他们提到了必须使用来自 Grand Central Dispatch 的 dispatch_async 或 dispatch_once 之类的要求。这表明它只适用于 Objective-C++，而不是普通的 C++，这在 XCode 4.4 新特性列表中有所暗示。

是否可以在传统的 C++ 意义上使用它们，例如 within `for_each`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T18:19:56.767

关于的讨论`dispatch_*`是有人问如何将 lambdas 与 GCD 一起使用。这并不意味着 GCD 是必需的或与 lambdas 有任何关系。

是的，Xcode 支持纯 C++ 代码中的 lambda。您只需在项目设置中启用 C++11。有一个“C++ 语言方言”设置，您可以在不同版本的 C++ 之间进行选择，有或没有一些额外的 GNU 扩展。

![在此处输入图像描述](../Images/476550f1eabcfcfbb505489c3e18f1b6.png) （[图片来源](http://www.google.com/imgres?q=xcode+c%2B%2B+language+dialect&hl=en&sa=X&tbo=d&rlz=1C1CHFX_enUS392US393&biw=1658&bih=1120&tbm=isch&tbnid=w5qrQLPlsLtqhM:&imgrefurl=http://www.futuresvision.net/&docid=R_frBk_I4E0CdM&imgurl=http://www.futuresvision.net/wp-content/uploads/8123a9b1792dfc92a929baf6ce6d3118.png&w=642&h=223&ei=mMrlUIOYCMHUkwWC44CwAg&zoom=1&iact=hc&vpx=640&vpy=774&dur=1562&hovh=132&hovw=381&tx=137&ty=66&sig=109020586284217681329&page=1&tbnh=105&tbnw=297&start=0&ndsp=60&ved=1t:429,r:39,s:0,i:212)）

# javascript - 自定义 Backbone.View undelegateEvents()，它是如何工作的？

> ID：14144445
> 
> 赞同：2
> 
> 时间：2013-01-03T17:56:02.240
> 
> 标签：javascript, backbone.js

您可以在 Backbone 视图中`delegateEvents()`实现自定义。`undelegateEvents()`

Backbone.View 构造函数自动调用delegateEvents。我认为当您使用 Backbone.View.prototype.remove 删除视图时调用了 undelegateEvents，但事实并非如此。

那么，手动执行此操作的最佳方法是什么？我已经`remove()`用这段代码覆盖了视图方法：

```
Backbone.View.prototype.remove = function() {
    var remove = Backbone.View.prototype.remove;

    if (this.undelegateEvents) {
      this.undelegateEvents();
    }

    return remove.apply(this, arguments);
}; 
```

它有效，但我不知道是否是最佳选择。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T20:29:28.643

由于 mu 建议太短，问题的真正答案

> 手动执行此操作的最佳方法是什么？

是不要。事件绑定到 DOM 元素，如果这些元素消失，绑定也会消失。 `undelegateEvents`设计用于您*不*删除 DOM 元素，但仍希望从中删除事件绑定的情况（例如，当您为视图设置新元素时）。

# python - 在 python 中使用递归计算斐波那契数时的问题

> ID：14144451
> 
> 赞同：2
> 
> 时间：2013-01-03T17:56:15.887
> 
> 标签：python

我有这段代码用于使用缓存（字典）计算斐波那契数。

```
cache = {} 
def dynamic_fib(n):
    print n
    if n == 0 or n == 1:
        return 1
    if not (n in cache):
        print "caching %d" % n
        cache[n] = dynamic_fib(n-1) + dynamic_fib(n-2)

    return cache[n]

if __name__ == "__main__":
    start = time.time()
    print "DYNAMIC: ", dynamic_fib(2000)
    print (time.time() - start) 
```

我对小数字工作得很好，但是输入超过 1000 个时，它似乎停止了。

这是以 2000 作为输入的结果。

```
....
caching 1008
1007
caching 1007
1006
caching 1006
1005
caching 1005 
```

这是以 1000 作为输入的结果。

```
....
8
caching 8
7
caching 7
6
caching 6
5
caching 5 
```

看起来像995存储到字典后，它只是挂起。这可能有什么问题？我可以使用什么调试技术来查看 python 出了什么问题？

我在 Mac OS X 10.7.5 上运行 python，我有 4G 字节的 RAM，所以我认为一些 KB（甚至 MB）的内存使用并不重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:59:12.180

Python 的默认递归限制设置为 1000。您需要在程序中增加它。

```
import sys

sys.setrecursionlimit(5000) 
```

来自：[http ://docs.python.org/2/library/sys.html#sys.setrecursionlimit](http://docs.python.org/2/library/sys.html#sys.setrecursionlimit)

> sys.setrecursionlimit（限制）
> 
> ```
> Set the maximum depth of the Python interpreter stack to limit. 
> This limit prevents infinite recursion from causing an overflow of the C 
> stack and crashing Python.
> The highest possible limit is platform-dependent. A user may need to set the
> limit higher when she  has a program that requires deep recursion and a 
> platform that supports a higher limit. This should bedone with care, because
> a too-high limit can lead to a crash. 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T18:16:05.820

通过将缓存存储为字典，您并没有真正获得任何收益，因为为了计算`f(n)`您需要知道`f(n-1)`(and `f(n-2)`)。换句话说，你的字典总是有来自 2-n 的键。您也可以只使用一个列表（它只是一个额外的 2 个元素）。这是一个正确缓存并且没有达到递归限制（永远）的版本：

```
import time
cache = [1,1]

def dynamic_fib(n):
    #print n
    if n >= len(cache):
        for i in range(len(cache),n):
            dynamic_fib(i)

        cache.append(dynamic_fib(n-1) + dynamic_fib(n-2))
        print "caching %d" % n

    return cache[n]

if __name__ == "__main__":
    start = time.time()
    a = dynamic_fib(4000)
    print "Dynamic",a
    print (time.time() - start) 
```

请注意，您可以用 dict 做同样的事情，但我几乎肯定列表会更快。

* * *

只是为了好玩，这里有一堆选项（和时间安排！）：

```
def fib_iter(n):
    a, b = 1, 1
    for i in xrange(n):
        a, b = b, a + b
    return a

memo_iter = [1,1]
def fib_iter_memo(n):
    if n == 0:
        return 1
    else:
        try:
            return memo_iter[n+1]
        except IndexError:
            a,b = memo_iter[-2:]
            for i in xrange(len(memo_iter),n+2):
                a, b = b, a + b
                memo_iter.append(a)
            return memo_iter[-1]

dyn_cache = [1,1]
def dynamic_fib(n):
    if n >= len(dyn_cache):
        for i in xrange(len(dyn_cache),n):
            dynamic_fib(i)

        dyn_cache.append(dynamic_fib(n-1) + dynamic_fib(n-2))

    return dyn_cache[n]

dyn_cache2 = [1,1]
def dynamic_fib2(n):
    if n >= len(dyn_cache2):
        for i in xrange(len(dyn_cache2),n):
            dynamic_fib2(i)

        dyn_cache2.append(dyn_cache2[-1] + dyn_cache2[-2])

    return dyn_cache2[n]

cache_fibo = [1,1]
def dyn_fib_simple(n):
   while len(cache_fibo) <= n:
        cache_fibo.append(cache_fibo[-1]+cache_fibo[-2])
   return cache_fibo[n]

import timeit
for func in ('dyn_fib_simple','dynamic_fib2','dynamic_fib','fib_iter_memo','fib_iter'):
    print timeit.timeit('%s(100)'%func,setup='from __main__ import %s'%func),func

print fib_iter(100)
print fib_iter_memo(100)
print fib_iter_memo(100)
print dynamic_fib(100)
print dynamic_fib2(100)
print dyn_fib_simple(100) 
```

结果：

```
0.269892930984 dyn_fib_simple
0.256865024567 dynamic_fib2
0.241492033005 dynamic_fib
0.222282171249 fib_iter_memo
7.23831701279 fib_iter
573147844013817084101
573147844013817084101
573147844013817084101
573147844013817084101
573147844013817084101
573147844013817084101 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T18:30:45.723

无递归版本：

```
def fibo(n):
   cache=[1,1]
   while len(cache) < n:
       cache.append(cache[-1]+cache[-2])
   return cache 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T18:01:47.920

可能是由于堆栈深度的限制，导致了RuntimeError。您可以通过调用增加堆栈的递归限制

```
sys.setrecursionlimit(<number>) 
```

*sys*模块。

# ruby-on-rails - 如何挂钩销毁属于另一个模型的模型？

> ID：14144454
> 
> 赞同：4
> 
> 时间：2013-01-03T17:56:21.673
> 
> 标签：ruby-on-rails, activerecord, devise, ruby-on-rails-3.2, paperclip

我有一个有很多实验的用户模型：

```
class User < ActiveRecord::Base

has_many :experiments, :dependent => :destroy 
```

和实验模型：

```
class Experiment < ActiveRecord::Base

belongs_to :user
has_attached_file :thumbnail 
```

在所有者用户被销毁后，我想在实验模型上挂钩销毁时刻。（前用户取消他的帐户）

我需要这样做以删除存储在亚马逊的 Experiment 模型的附件图像。像`experiment.thumbnail.destroy`

完成此操作的推荐方法是什么？

**编辑**

虽然我已经毫无错误地销毁了缩略图，但是文件仍然没有被删除！我仍然可以在亚马逊桶上看到它

```
class Experiment < ActiveRecord::Base
before_destroy :remove_attachment

def remove_attachment
    self.thumbnail.destroy
    puts self.errors.full_messages.join("\n")
    true
end 
```

我销毁实验后，调用了remove_attachment，但是errors.full_messages 是空的！所以没有错误，但是，文件仍然没有被删除

任何的想法 ？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T18:04:04.970

> 在所有者用户被销毁后，我想在实验模型上挂钩销毁时刻。

```
has_many :experiments, :dependent => :destroy 
```

已经这样做了。

要删除附件，我建议使用回调

```
class Experiment < ActiveRecord::Base

    before_destroy { |experiment| experiment.thumbnail.destroy }
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:00:16.183

我认为您正在寻找如下[回调](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)：

`before_destroy :delete_attachment_image`

# objective-c - 在 glkView DrawInRect 中调用方法导致 EXC BAD ACCESS 错误

> ID：14144455
> 
> 赞同：0
> 
> 时间：2013-01-03T17:56:25.113
> 
> 标签：objective-c, ios, opengl-es

```
#pragma mark - GLKViewDelegate

- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect {

    glClearColor(1.0, 1.0, 1.0, 1.0);
    glClear(GL_COLOR_BUFFER_BIT);

    [self.effect prepareToDraw];
    [self.model Render];
} 
```

每当我`[self.model Render]`在里面调用（到目前为止什么都不做的自定义方法）

```
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect 
```

它会导致**线程 1 exc_bad_access (code=1 address=0x10)**错误，我很乐意分享更多我的源代码，但如果这么多信息可以解决简单的事情，我不会。

# javascript - if(...) 的 IE7 语法错误 return false

> ID：14144456
> 
> 赞同：0
> 
> 时间：2013-01-03T17:56:35.560
> 
> 标签：javascript, internet-explorer-7

我们的一位广告客户的着陆页包含以下 Javascript 函数：

```
sfHover = function() {
    if (!document.getElementsByTagName) return false;
    var sfEls1 = document.getElementById("catmenu").getElementsByTagName("li");
    for (var i=0; i<sfEls1.length; i++) {
        sfEls1[i].onmouseover=function() {
            this.className+=" sfhover1";
        }
        sfEls1[i].onmouseout=function() {
            this.className=this.className.replace(new RegExp(" sfhover1\\b"), "");
        }
    }
        var sfEls1 = document.getElementById("menu").getElementsByTagName("li");
    for (var i=0; i<sfEls1.length; i++) {
        sfEls1[i].onmouseover=function() {
            this.className+=" sfhover";
        }
        sfEls1[i].onmouseout=function() {
            this.className=this.className.replace(new RegExp(" sfhover\\b"), "");
        }
    }
} 
```

在IE7中进入页面时，就`if`行报语法错误。据我所知，这是非常好的语法。IE8 不抱怨，Chrome 也不抱怨。我能看到的唯一潜在问题是该`return false;`语句不在大括号中，但它们是可选的；我尝试添加它们，但没有解决错误。

这是IE7中的错误吗？

更新：

我从页面中删除了除此函数定义之外的所有内容，以确保它与它加载的许多其他脚本之一无关。错误仍然发生。

我删除了除该`if`行之外的所有内容，错误消失了。我添加了下一行，错误返回。有趣的是第二行得到了一个预期的错误：页面上没有`catmenu`元素（甚至在我删除所有 HTML 之前），所以它正确地抱怨`document.getElementById(...) is null or not an object`. 我已经要求我们的营销人员让广告商知道这个问题。

那么这个逻辑错误是否会导致 IE7 认为前一行存在语法错误？我`catmenu`在页面中添加了一个元素，语法错误也消失了。

然后我添加了其余的功能。第二个`sfEls1`分配也引用了一个不存在的 ID。这导致它将前`}`一行报告为语法错误！我认为这证实了这是一个奇怪的 IE7 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:45:21.537

这似乎是 IE7 中的错误报告错误。当它报告错误时：

```
'document.getElementById(...)' is null or not an object 
```

因为`getElementById()`在页面上没有找到ID，所以它还在前一行报告了一个无关的语法错误。

所以函数中存在*错误*，而不是该错误消息所抱怨的语法错误。MS 似乎已经修复了 IE8 中的这个错误报告错误——兼容模式甚至没有复制错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:08:33.020

在我看来，您声明变量`sfEls1`两次。

# python - 以编程方式更改 PDF 作者

> ID：14144460
> 
> 赞同：0
> 
> 时间：2013-01-03T17:56:50.033
> 
> 标签：python, pdf

在我的办公室里，我们有大约 1000 个具有任意标题和作者信息的 PDF。我的老板用 PDF 文件名和适当的标题和适当的作者信息创建了一个电子表格。

我想找到一种编程方式将数据从 Excel 工作表移动到 PDF 属性？

我的首选语言是 Python，所以我寻找一个 Python 库来执行此操作，我查看的每个库的作者和标题字段都是只读的。

如果 Python 没有可以工作的库，我可以使用 VBA、VB.NET、JavaScript... 我会借此机会学习一门新语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:16:44.937

如果你想学习 java，你可以使用[Apache PDFBox](http://pdfbox.apache.org/userguide/metadata.html)

[这](http://kickjava.com/src/org/pdfbox/examples/pdmodel/AddMetadataFromDocInfo.java.htm)是一个实现示例。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T18:20:02.813

使用 Acrobat X Pro 中的动作向导。

创建新动作。

设置*开始于*和*保存到*步骤。

设置复选框*覆盖现有文件*。

选择*内容*。选择*添加文档描述*。

鼠标左键点击选项。取消选中*Autor*复选框*Leave As Is*并输入新的 Autor 名称。

按*保存*按钮，设置名称动作**Your Action Name**。

运行动作：

*文件*-*操作向导*-**您的操作名称**。

我测试它 - 工作）。

# php - sql while 函数

> ID：14144462
> 
> 赞同：-1
> 
> 时间：2013-01-03T17:57:05.207
> 
> 标签：php, sql

```
function timeago($ptime) {
    $etime = time() - $ptime;

    if ($etime < 1) {
        return '0 seconds';
    }

    $a = array( 12 * 30 * 24 * 60 * 60  =>  'year',
                    30 * 24 * 60 * 60       =>  'month',
                    24 * 60 * 60            =>  'day',
                    60 * 60                 =>  'hour',
                    60                      =>  'minute',
                    1                       =>  'second'
                    );

    foreach ($a as $secs => $str) {
        $d = $etime / $secs;
        if ($d >= 1) {
            $r = round($d);
            return $r . ' ' . $str . ($r > 1 ? 's' : '');
        }
    }
} 
```

假设我有那个功能，并且我有一个 sql 结果，它给了我一个具有 UNIX 形式的多个时间戳的数组。使用 while 循环，我如何为每个时间戳使用此函数，以便每个循环结果将包含每个 sql UNIX 时间戳的时间之前？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:19:08.527

您可以使用 DateTime 类。

```
function timeAgo($ptime){
   $date1 = DateTime::createFromFormat("s", $ptime);//HOPE THIS WILL WORK
   $date2 = new DateTime("now");
   $interval = $date1->diff($date2);
   $diff = $interval->format('%y-%m-%d');
   return $diff; 
} 
```

在每次迭代中调用此方法并从数据库中传递时间戳。

# javascript - 使用 jquery.validate 实时触发验证

> ID：14144465
> 
> 赞同：-1
> 
> 时间：2013-01-03T17:57:14.217
> 
> 标签：javascript, jquery-validate

我正在使用[jquery.validate](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)来验证我的表单。

首次验证仅在我`focusout`输入时发生。 *如果我回到已经验证过一次的相同输入，它会实时验证为写入。*

我必须`focusout`输入或提交一次才能获得实时验证。**这是错误还是配置问题？**

我的 validate.js 文件：

[https://gist.github.com/4445364](https://gist.github.com/4445364)

有没有办法让这种行为成为默认行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:15:43.473

> “这是错误还是配置问题？”

是配置问题。见下文。

> “我必须‘关注’输入或提交一次以获得实时验证。有没有办法让这种行为成为默认行为？”

这已经是默认行为。请参阅这个简单的 jsFiddle 演示。只需开始在任何字段中输入，您就会在输入时立即看到一条实时消息。

[http://jsfiddle.net/RXrKU/](http://jsfiddle.net/RXrKU/)

**jQuery：**

```
$(document).ready(function() {
    $('form').validate({
        rules: {
            field: {
                required: true,
                minlength: 5
            }
        }
    });
});​ 
```

**HTML：**

```
<form> 
     <input type="text" name="field" />
     <input type="submit" />
</form> ​ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T18:30:02.217

我认为你可以调用 $('form').validate().form() 来获得这种行为

# java - 游标 RawQuery 上的 NullPointerException - Android

> ID：14144468
> 
> 赞同：0
> 
> 时间：2013-01-03T17:57:23.410
> 
> 标签：java, android, sqlite, cursor, nullpointerexception

我正在尝试创建一个数据库，插入数据库，从数据库中提取并将内容（长）显示到 TextView。

我想我正在正确地创建并插入数据库。在我的`getScore()`方法中，我得到了 NullPointerException。

任何有关代码结构的帮助也非常感谢！先感谢您。

数据库助手.java

```
public class DatabaseHelper extends SQLiteOpenHelper { 

    SQLiteDatabase db;

    // Table columns names. 
    private static final String SCORE = "score"; 

    public DatabaseHelper(Context context) { 
        super(context, DB_NAME, null, DATABASE_VERSION); 
    }

    public SQLiteDatabase openDB() {
        db = this.getWritableDatabase();
        return db;
    }

    public long getScore(SQLiteDatabase db) {
        //Cursor c = db.rawQuery("SELECT " + SCORE + " FROM " + TABLE + " WHERE " + SCORE + " = " + 11 + ";", null);  //Line 45
        Cursor c = db.rawQuery("SELECT " + SCORE + " FROM " + TABLE + ";", null);  //Line 39
        long i = 0;
        if(c.getCount() == 0) {
            i = 333;
        } else if (c.getCount() == 1) {
            i = 444;
        } else {
            i = 888;
               /*c.moveToFirst();
               int columnIndex = c.getInt(c.getColumnIndex("SCORE"));
               if(columnIndex != -1) {
                   i = c.getLong(columnIndex);
               } else { 
                   i = 999; 
               }*/
        }
        c.close();
        return i;
    }

    //Insert new record.
    public long insert(long score, int percentage) {
        ContentValues values = new ContentValues();
        values.put(SCORE, score);
        values.put(PERCENTAGE, percentage);

        return db.insert(TABLE, null, values);
    }

    public synchronized void closeDB(SQLiteDatabase db) {
        if(db != null) {
            db.close();
        }
        super.close();
    }

    public void onCreate(SQLiteDatabase db) {
        db.execSQL("CREATE TABLE " + TABLE + " ("
                + RANK + " INTEGER PRIMARY KEY AUTOINCREMENT,"
                + SCORE + " LONG,"
                + PERCENTAGE + " INTEGER"
                + ");");
    }
} 
```

高分.java

```
public class Highscores extends Activity {

    DatabaseHelper dh;
    SQLiteDatabase db;
    long scores;

    TextView score;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.highscoresmain);

        dh = new DatabaseHelper(this);
        dh.openDB();
        long x = 11;
        int y = 22;

        TextView score = (TextView)findViewById(R.id.score);        
        TextView r1s = (TextView)findViewById(R.id.r1s);

        dh.insert(x, y);
        scores = dh.getScore(db);  //Line 56            
        score.setText("Score Column - TEST");
        r1s.setText("" + score);

        dh.closeDB(db);
    }
} 
```

LogCat 输出

```
01-03 17:36:01.172: E/AndroidRuntime(1941): FATAL EXCEPTION: main
01-03 17:36:01.172: E/AndroidRuntime(1941): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.test/com.example.test.Highscores}: java.lang.NullPointerException
01-03 17:36:01.172: E/AndroidRuntime(1941):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-03 17:36:01.172: E/AndroidRuntime(1941):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-03 17:36:01.172: E/AndroidRuntime(1941):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-03 17:36:01.172: E/AndroidRuntime(1941):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-03 17:36:01.172: E/AndroidRuntime(1941):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-03 17:36:01.172: E/AndroidRuntime(1941):     at android.os.Looper.loop(Looper.java:137)
01-03 17:36:01.172: E/AndroidRuntime(1941):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-03 17:36:01.172: E/AndroidRuntime(1941):     at java.lang.reflect.Method.invokeNative(Native Method)
01-03 17:36:01.172: E/AndroidRuntime(1941):     at java.lang.reflect.Method.invoke(Method.java:511)
01-03 17:36:01.172: E/AndroidRuntime(1941):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-03 17:36:01.172: E/AndroidRuntime(1941):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-03 17:36:01.172: E/AndroidRuntime(1941):     at dalvik.system.NativeStart.main(Native Method)
01-03 17:36:01.172: E/AndroidRuntime(1941): Caused by: java.lang.NullPointerException
01-03 17:36:01.172: E/AndroidRuntime(1941):     at com.example.test.DatabaseHelper.getScore(DatabaseHelper.java:39)
01-03 17:36:01.172: E/AndroidRuntime(1941):     at com.example.test.Highscores.onCreate(Highscores.java:56)
01-03 17:36:01.172: E/AndroidRuntime(1941):     at android.app.Activity.performCreate(Activity.java:5104)
01-03 17:36:01.172: E/AndroidRuntime(1941):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-03 17:36:01.172: E/AndroidRuntime(1941):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-03 17:36:01.172: E/AndroidRuntime(1941):     ... 11 more 
```

编辑：新`getScore()`方法。

```
public long getScore() {
    Cursor c = db.rawQuery("SELECT " + SCORE + " FROM " + TABLE + " WHERE " + SCORE + " = " + 11 + ";", null);
    //Cursor c = db.rawQuery("SELECT " + SCORE + " FROM " + TABLE + ";", null);
    long i = 0;
    if(c.getCount() == 0) {
        i = 333;
    } else if (c.getCount() == 1) {
        i = 444;
    } else if (c.getCount() == 2) {
        i = 555;
    } else {
        i = 666;
           /*c.moveToFirst();
           int columnIndex = c.getInt(c.getColumnIndex("SCORE"));
           if(columnIndex != -1) {
               i = c.getLong(columnIndex);
           } else { 
               i = 999; 
           }*/
    }
    c.close();
    return i;
} 
```

这仍然返回值为 666 的 i。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T18:02:09.517

您在`db`这里覆盖了您的本地价值：`public long getScore(SQLiteDatabase db) { ...`. 删除该参数，它应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T18:01:00.233

您传递给数据库类的数据库从未初始化并且为空。`scores = dh.getScore(db); //Line 56`这里的 db 变量是一个成员变量，您应该在将其传递给此方法之前对其进行初始化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T18:02:51.440

查看[文档](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#rawQuery%28java.lang.String,%20java.lang.String%5B%5D%29)，也许这是您的问题。

> SQL 字符串不能是 ; 终止

# .net - 客户端计算机上的应用程序崩溃

> ID：14144470
> 
> 赞同：0
> 
> 时间：2013-01-03T17:57:38.290
> 
> 标签：.net, wpf, vb.net, debugging

我已经向我的客户发送了一份申请。当他单击一个特殊按钮时，整个应用程序崩溃。我已将所有 *.pdb 文件上传到 *.exe 文件的同一文件夹中，并且他安装了 Visual Studio Express 2010。

没有任何解决方案有助于获取崩溃的任何信息。没有“详细信息”按钮或堆栈情况。我无法调试应用程序。只有消息“程序现在将关闭”，没有任何附加说明“故障可能在哪里”。

![错误信息](../Images/e0d88ef89d67c0ef65e36cbfc3e52173.png) 在 Windows 错误报告中记录了文件“应用程序错误 - 我的应用程序 - 模块 MSVCR100_CLR0400.dll。但这个 dll 不是问题。我重新安装了框架，但看不到任何改进。和以前一样的崩溃。

**如何在客户端计算机上安装应用程序时对其进行调试？**

*

> 在当前状态下，没有一个答案可以在客户端计算机上使用。我现在在办公室有它并安装了视觉工作室。以这种方式编译时，它可以工作。问题是为什么。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:26:59.663

[ProcDump](http://technet.microsoft.com/en-us/sysinternals/dd996900.aspx)可以启动一个进程，然后监视它是否有异常：`C:\>procdump -e 1 -f "" -x c:\dumps consume.exe`. 您可以[自动启动调试器](http://msdn.microsoft.com/en-us/library/a329t4ed%28v=vs.110%29.aspx)，也可以使用[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)在应用程序崩溃之前捕获最后一次操作和相关堆栈跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:52:14.237

如果您可以访问客户端的机器，那么您可以从 Microsoft 免费安装“Windows 调试工具”。它包括几个调试器，包括 WinDbg。您可以使用它的 GFlags 工具来设置客户端系统以在应用程序启动时启动您选择的调试器（我推荐 WinDbg，因为它的功能比 Visual Studio 大得多），或者在应用程序退出或崩溃时捕获转储文件。如果您与客户端计算机具有网络连接，则可以使用其调试器远程调试客户端计算机。

使用 GFlags，您可以将客户端的系统设置为捕获任何类型的崩溃或线程退出，从而自动为您创建转储到您为任何应用程序或进程指定的任何文件夹。因此，即使您不能使用客户端机器进行直接调试，您仍然可以轻松地从应用程序崩溃中捕获转储。只需在客户端机器上安装“Windows 调试工具”，使用 GFlags 设置您需要的选项（查看“静默进程退出”选项卡以设置转储文件创建选项），然后收集您的转储文件（如果这是您所追求的）。

[您可以在http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)获得“Windows 调试工具”

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-03T18:34:36.617

如果由于某种原因您无法在工作站上重现错误并且您想要调试在客户端计算机上运行的应用程序，那么您最好的工具是 Visual Studio 远程调试器。您需要保留`.pdb`文件才能使其正常工作。

更多信息在这里：

[http://msdn.microsoft.com/en-us/library/bt727f1t%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/bt727f1t%28v=vs.100%29.aspx)

# c# - 如何转换日期时间？到日期时间

> ID：14144473
> 
> 赞同：4
> 
> 时间：2013-01-03T17:57:45.670
> 
> 标签：c#, asp.net

我已经提交`txtb_dateOfService`了填写表格但是如果`txtb_dateOfService`是 emapty 返回 null 如果不是 TryParse`>`我有这个错误的日期我不知道如何解决它

> 'System.DateTime.TryParse(string, out System.DateTime)' 的最佳重载方法匹配有一些无效参数

```
 DateTime? dateOfService= null;
    if (string.IsNullOrEmpty(txtb_dateOfService.Text))
    {
        dateOfService = null;

    }
    else
        if (DateTime.TryParse(txtb_dateOfService.Text, out dateOfService))
        {

        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T17:59:47.010

您不能将引用传递给`DateTime?`期望的方法`DateTime`。您可以通过引入一个临时变量来解决此问题，如下所示：

```
else { // <<=== This is the final "else" from your code
    DateTime tmp;
    if (DateTime.TryParse(txtb_dateOfService.Text, out tmp))
    {
        dateOfService = tmp;
    } else {
        dateOfService = null;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:00:48.793

您的问题是转换`DateTime?`为`DateTime`，反之亦然。该`DateTime.TryParse`方法的`out`参数不可为空；如果事件`TryParse`失败，out 参数将被分配`DateTime.MinValue`为其值。没有理由`dateOfService`从此代码段中将您的变量声明为可为空的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T18:01:57.700

如果解析失败，您可以抛出异常：

```
DateTime? dateOfService= null;
if (string.IsNullOrEmpty(txtb_dateOfService.Text))
{
    dateOfService = null;
}
else
{
    // will throw an exception if the text is not parseable
    dateOfService = DateTime.Parse(txtb_dateOfService.Text);  
} 
```

或使用中间 DateTime 来存储解析结果：

```
DateTime? dateOfService= null;
if (string.IsNullOrEmpty(txtb_dateOfService.Text))
{
    dateOfService = null;

}
else
{
    DateTime temp;
    if (DateTime.TryParse(txtb_dateOfService.Text, out temp))
    {
        dateOfService = temp;
    } 
    else 
    {
        dateOfService = null;
    }
} 
```

这些中的任何一个都可以在逻辑上简化；我正在展示完整的突破来传达逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T18:02:45.060

您可以尝试将您`string`的转换为`DateTime`

```
DateTime? dataOfService = null;
DateTime output;

if (DateTime.TryParse(txtb_dateOfService.Text, out output))
   dataOfService = output; 
```

现在您可以`dataOfService`用作 a`Nullable<DateTime>`并检查它是否具有使用`HasValue`和`Value`属性转换的有效数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T18:02:51.833

您需要创建一个临时值来保存 out 参数`TryParse`：

```
DateTime tmp;
if (DateTime.TryParse(txtb_dateOfService.Text, out tmp)) {
    dateOfService = tmp;
} else{
    dateOfService = null;
} 
```

一个更简洁的例子

```
DateTime tmp;
DateTime? dateOfService = DateTime.TryParse(txtb_dateOfService.Text, out tmp)
   ? tmp
   : (DateTime?)null; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T18:19:10.733

试试 dateOfService.Value，这应该可行（我认为）

# ios - iOS 应用程序因“未能及时启动”而崩溃

> ID：14144474
> 
> 赞同：2
> 
> 时间：2013-01-03T17:57:48.383
> 
> 标签：ios, crash-reports

我的一位 Beta 测试人员报告说我的应用在她的手机上反复崩溃，当然当我过去查看它时没有任何问题。但我拉出了崩溃日志，并试图弄清楚如何阅读这些东西。其中两个看起来非常相似（一个发布在下面）。当我盯着这些看时，我只需要有人握住我的手。我最初怀疑内存问题，但后来有人说内存泄漏不会导致崩溃，除非你淹没自己，而且这个日志没有提到任何关于内存的内容。谁能给我任何关于可能发生的事情的提示？

```
Date/Time:       2012-12-19 10:09:05.852 -0700
OS Version:      iOS 6.0.1 (10A523)
Report Version:  104

Exception Type:  00000020
Exception Codes: 0x000000008badf00d
Highlighted Thread:  0

Application Specific Information:
com.graphiteGames.Capture-This failed to launch in time

Elapsed total CPU time (seconds): 2.730 (user 2.730, system 0.000), 14% CPU 
Elapsed application CPU time (seconds): 0.930, 5% CPU

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0:
0   libsystem_kernel.dylib          0x33fc40fc __psynch_mutexwait + 24
1   libsystem_c.dylib               0x35438124 pthread_mutex_lock + 388
2   Capture This                    0x000a1a7a -[PFObject objectForKey:] (PFObject.m:1572)
3   Capture This                    0x00092c06 -[RootTableView tableView:cellForRowAtIndexPath:] (RootTableView.m:228)
4   UIKit                           0x37f49540 -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:withIndexPath:] + 408
5   UIKit                           0x37f2e306 -[UITableView(_UITableViewPrivate) _updateVisibleCellsNow:] + 1306
6   UIKit                           0x37f457c2 -[UITableView layoutSubviews] + 202
7   UIKit                           0x37f017fe -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 254
8   QuartzCore                      0x30db5d5e -[CALayer layoutSublayers] + 210
9   QuartzCore                      0x30db58fc CA::Layer::layout_if_needed(CA::Transaction*) + 456
10  QuartzCore                      0x30de47a2 -[CALayer layoutIfNeeded] + 138
11  UIKit                           0x37fab0c4 -[UIViewController window:setupWithInterfaceOrientation:] + 204
12  UIKit                           0x37faa2b0 -[UIWindow _setRotatableClient:toOrientation:updateStatusBar:duration:force:isRotating:] + 3616
13  UIKit                           0x37fa9482 -[UIWindow _setRotatableClient:toOrientation:updateStatusBar:duration:force:] + 42
14  UIKit                           0x37fa940c -[UIWindow _setRotatableViewOrientation:duration:force:] + 64
15  UIKit                           0x380df17c __57-[UIWindow _updateToInterfaceOrientation:duration:force:]_block_invoke_0 + 100
16  UIKit                           0x37f67676 -[UIWindow _updateToInterfaceOrientation:duration:force:] + 214
17  UIKit                           0x37f673b8 -[UIWindow setAutorotates:forceUpdateInterfaceOrientation:] + 688
18  UIKit                           0x37f66d26 -[UIViewController _tryBecomeRootViewControllerInWindow:] + 154
19  UIKit                           0x37f5de9e -[UIWindow addRootViewControllerViewIfPossible] + 366
20  UIKit                           0x37f59ae0 -[UIWindow _setHidden:forced:] + 360
21  UIKit                           0x37f9b1c4 -[UIWindow makeKeyAndVisible] + 56
22  UIKit                           0x37f5e832 -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1662
23  UIKit                           0x37f5683e -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 694
24  UIKit                           0x37efec34 -[UIApplication handleEvent:withNewEvent:] + 1000
25  UIKit                           0x37efe6c8 -[UIApplication sendEvent:] + 68
26  UIKit                           0x37efe116 _UIApplicationHandleEvent + 6150
27  GraphicsServices                0x34b1e5a0 _PurpleEventCallback + 588
28  GraphicsServices                0x34b1e1ce PurpleEventCallback + 30
29  CoreFoundation                  0x35e34170 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
30  CoreFoundation                  0x35e34112 __CFRunLoopDoSource1 + 134
31  CoreFoundation                  0x35e32f94 __CFRunLoopRun + 1380
32  CoreFoundation                  0x35da5eb8 CFRunLoopRunSpecific + 352
33  CoreFoundation                  0x35da5d44 CFRunLoopRunInMode + 100
34  UIKit                           0x37f55478 -[UIApplication _run] + 664
35  UIKit                           0x37f522f4 UIApplicationMain + 1116
36  Capture This                    0x0008b8ba main (main.m:16)
37  libdyld.dylib                   0x34a94b1c start + 0

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x33fb4648 kevent64 + 24
1   libdispatch.dylib               0x34a7d4ec _dispatch_mgr_invoke + 792
2   libdispatch.dylib               0x34a6fdf4 _dispatch_mgr_thread$VARIANT$up + 32

Thread 2 name:  Dispatch queue: com.apple.root.default-priority
Thread 2:
0   libsystem_kernel.dylib          0x33fc408c __psynch_cvwait + 24
1   libsystem_c.dylib               0x35440d2a _pthread_cond_wait + 642
2   libsystem_c.dylib               0x3544af14 pthread_cond_wait + 36
3   Foundation                      0x3592aa4c -[__NSOperationInternal waitUntilFinished] + 144
4   Capture This                    0x000e4710 -[PFNetworkCommandRunner runInOperation:callback:] (PFNetworkCommandRunner.m:84)
5   Capture This                    0x000e4f1e -[PFRetryingCommandRunner runInOperation:callback:] (PFRetryingCommandRunner.m:52)
6   Capture This                    0x000e5cba -[PFOperation runInThisThread:] (PFOperation.m:32)
7   Capture This                    0x0009dbb2 -[PFObject(Private) fetchWithLocking:error:] (PFObject.m:942)
8   Capture This                    0x000ae44e -[PFUser fetchWithLocking:error:] (PFUser.m:1001)
9   Capture This                    0x000a1520 __39-[PFObject fetchInBackgroundWithBlock:]_block_invoke_0 (PFObject.m:1500)
10  Capture This                    0x000d3db6 __25-[PFBackgroundTask start]_block_invoke_0 (PFBackgroundTask.m:59)
11  libdispatch.dylib               0x34a6e11c _dispatch_call_block_and_release + 8
12  libdispatch.dylib               0x34a7c254 _dispatch_root_queue_drain + 256
13  libdispatch.dylib               0x34a7c3b4 _dispatch_worker_thread2 + 80
14  libsystem_c.dylib               0x3543da0e _pthread_wqthread + 358
15  libsystem_c.dylib               0x3543d8a0 start_wqthread + 4

Thread 3 name:  WebThread
Thread 3:
0   libsystem_kernel.dylib          0x33fb3eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x33fb4048 mach_msg + 36
2   CoreFoundation                  0x35e34040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x35e32d9e __CFRunLoopRun + 878
4   CoreFoundation                  0x35da5eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x35da5d44 CFRunLoopRunInMode + 100
6   WebCore                         0x31a8aa40 _ZL12RunWebThreadPv + 440
7   libsystem_c.dylib               0x3544830e _pthread_start + 306
8   libsystem_c.dylib               0x354481d4 thread_start + 4

Thread 4:
0   libsystem_kernel.dylib          0x33fb3eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x33fb4048 mach_msg + 36
2   CoreFoundation                  0x35e34040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x35e32d9e __CFRunLoopRun + 878
4   CoreFoundation                  0x35da5eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x35da5d44 CFRunLoopRunInMode + 100
6   Foundation                      0x358df78a -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
7   Foundation                      0x35983058 -[NSRunLoop(NSRunLoop) run] + 76
8   Capture This                    0x000d7c9a +[PFNetworkingUtils networkThreadMain] (PFNetworkingUtils.m:32)
9   Foundation                      0x3598c678 __NSThread__main__ + 968
10  libsystem_c.dylib               0x3544830e _pthread_start + 306
11  libsystem_c.dylib               0x354481d4 thread_start + 4

Thread 5:
0   libsystem_kernel.dylib          0x33fc4d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3543dcf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3543da12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3543d8a0 start_wqthread + 4

Thread 6:
0   libsystem_kernel.dylib          0x33fc408c __psynch_cvwait + 24
1   libsystem_c.dylib               0x35440d2a _pthread_cond_wait + 642
2   libsystem_c.dylib               0x3544af14 pthread_cond_wait + 36
3   Foundation                      0x35908cca -[NSCondition wait] + 190
4   Capture This                    0x000c89a8 -[PFCommandCache runLoop] (PFCommandCache.m:491)
5   Foundation                      0x3598c678 __NSThread__main__ + 968
6   libsystem_c.dylib               0x3544830e _pthread_start + 306
7   libsystem_c.dylib               0x354481d4 thread_start + 4

Thread 7:
0   libsystem_kernel.dylib          0x33fb3eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x33fb4048 mach_msg + 36
2   CoreFoundation                  0x35e34040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x35e32d9e __CFRunLoopRun + 878
4   CoreFoundation                  0x35da5eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x35da5d44 CFRunLoopRunInMode + 100
6   Foundation                      0x358df78a -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
7   Foundation                      0x35983058 -[NSRunLoop(NSRunLoop) run] + 76
8   Capture This                    0x000eb5f0 +[PF_AFURLConnectionOperation networkRequestThreadEntryPoint:] (PF_AFURLConnectionOperation.m:151)
9   Foundation                      0x3598c678 __NSThread__main__ + 968
10  libsystem_c.dylib               0x3544830e _pthread_start + 306
11  libsystem_c.dylib               0x354481d4 thread_start + 4

Thread 8 name:  com.apple.NSURLConnectionLoader
Thread 8:
0   libsystem_kernel.dylib          0x33fb3eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x33fb4048 mach_msg + 36
2   CoreFoundation                  0x35e34040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x35e32d9e __CFRunLoopRun + 878
4   CoreFoundation                  0x35da5eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x35da5d44 CFRunLoopRunInMode + 100
6   Foundation                      0x35908bc8 +[NSURLConnection(Loader) _resourceLoadLoop:] + 304
7   Foundation                      0x3598c678 __NSThread__main__ + 968
8   libsystem_c.dylib               0x3544830e _pthread_start + 306
9   libsystem_c.dylib               0x354481d4 thread_start + 4

Thread 9 name:  com.apple.CFSocket.private
Thread 9:
0   libsystem_kernel.dylib          0x33fc4594 __select + 20
1   CoreFoundation                  0x35e381f2 __CFSocketManager + 674
2   libsystem_c.dylib               0x3544830e _pthread_start + 306
3   libsystem_c.dylib               0x354481d4 thread_start + 4

Unknown thread crashed with unknown flavor: 5, state_count: 1 
```

该应用程序确实按要求完成了启动方法：

*   (BOOL)应用程序:(UIApplication *)应用程序 didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    ```
    [Parse setApplicationId:@"key"
                  clientKey:@"key"];
    [PFFacebookUtils initializeWithApplicationId:@"id"];
    [application registerForRemoteNotificationTypes:UIRemoteNotificationTypeBadge|
     UIRemoteNotificationTypeAlert|
     UIRemoteNotificationTypeSound];

    //--set background and camera images
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if (![defaults objectForKey:BACKGROUND_IMAGE]){
        [[NSUserDefaults standardUserDefaults] setObject:@"background0.png" forKey:BACKGROUND_IMAGE];
    }
    if (![defaults objectForKey:CAMERA_BUTTON]){
        [defaults setObject:@"cameraButton0.png" forKey:CAMERA_BUTTON];
    }
    if (![defaults objectForKey:PURCHASED_CAMERAS]){
        NSMutableArray *cameras = [[NSMutableArray alloc] init];
        [cameras addObject:@"cameraButton0.png"];
        [defaults setObject:cameras forKey:PURCHASED_CAMERAS];
    }
    if (![defaults objectForKey:PURCHASED_BACKGROUNDS]){
        NSMutableArray *back = [[NSMutableArray alloc] init];
        [back addObject:@"background0.png"];
        [defaults setObject:back forKey:PURCHASED_BACKGROUNDS];
    }
    if ([PFUser currentUser]){
        [[PFUser currentUser] refreshInBackgroundWithBlock:^(PFObject *object, NSError *error) {
            if (error){
                [[[UIAlertView alloc] initWithTitle:@"Couldn't refresh user data" message:@"Please try again later" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil] show];
            }
            [Utilities refreshCurrentUser];
        }];
    }
    [[UIApplication sharedApplication] cancelAllLocalNotifications];

    return YES; 
    ```

    }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:02:16.867

据我了解，iOS 有一个看门狗随时检查正在运行的应用程序。当应用程序超过 20 秒没有响应时，应用程序将被自动终止。不确定这是否是这里发生的事情，但可能是这样。

我将开始查看在应用程序启动时运行的进程。有些人可能会在后台加载并运行大量应用程序时遇到此类问题，从而减慢处理速度，这可能表现为应用程序无响应。

# ajax - 页面渲染后使用 Ajax 获取数据到 Datatable

> ID：14144478
> 
> 赞同：0
> 
> 时间：2013-01-03T17:57:49.500
> 
> 标签：ajax, jsf, jsf-2, primefaces, spring-webflow

解决这个想法很简单，但是我以前从未做过，需要建议。我将 Spring、Spring Webflow 和 JSF 与 Primefaces 一起使用。

我使用外部网络服务来获取表中的一些数据。有时它的工作速度比网站调用慢，我想避免“等待”加载。我的想法（这不是什么新鲜事）是加载包含所有静态（或本地服务器）内容的页面，然后调用外部 Web 服务来获取数据。比完成时显示它。

到目前为止，它看起来像这样：

网站：

```
<p:dataTable id="table" var="item" value="#{lastfm.topArtists}">
                    <p:column headerText="Model" sortBy="#{item.name}">
                        <h:outputText value="#{item.name}" />
                    </p:column>
</p:dataTable> 
```

而 Bean 本身就是这样：

```
private List<Artist> topArtists = new ArrayList<Artist>();
public void init(String u) {
    topArtists = (List<Artist>) User.getTopArtists(u, StaticContent.api_key);
} 
```

用户 - 是 Web 服务 API。

ATM 初始化加载`on-render`网站，但我想避免它，在页面加载后以某种方式调用它，并在成功时显示。

我认为它可能是一些带有 jquery 的 javascript 函数，使用 `onDocumentReady()`和`onSuccess`用于 ajax，但我真的不知道如何连接它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:05:06.743

主要面孔的轮询组件可能会帮助您实现这一目标。

[http://www.primefaces.org/showcase-labs/ui/poll.jsf](http://www.primefaces.org/showcase-labs/ui/poll.jsf)

```
<h:form id="form">  
<p:poll interval="3"   
        listener="#{lastfm.topArtistsRetrieved}" update="table" />  

<p:dataTable id="table" var="item" value="#{lastfm.topArtists}">
                <p:column headerText="Model" sortBy="#{item.name}">
                    <h:outputText value="#{item.name}" />
                </p:column>
</p:dataTable>
</h:form> 
```

我假设 User.getTopArists 会在完成时通知您。基本上你需要一个标志来指示你的进程是否结束。并且通过主要面孔轮询，您应该检查标志是否被提升，并且通过 ajax 更新您应该在结果准备好时打印结果。您甚至可以通过此流程显示流程的进度。

# sql-server - 如果作业花费的时间超过特定作业执行的规定时间间隔，我可以让 SQL Server 重置作业吗？

> ID：14144485
> 
> 赞同：0
> 
> 时间：2013-01-03T17:58:16.407
> 
> 标签：sql-server, jobs

我有一份每 5 分钟运行一次的工作。每隔一段时间，如果我们的数据库负载很大，那么这项工作将花费更长的时间。然后该作业将不再运行，因为下一个计划时间已经过去。有没有办法让 SQL Server 解决这个问题，以便即使在其中一次长时间运行之后它也能再次运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:44:21.460

如果您有一个连续运行的脚本，您可以每 5 分钟[从脚本中生成第二个脚本](https://stackoverflow.com/questions/649634/how-do-i-run-a-bat-file-in-the-background-from-another-bat-file)（无需等待它退出）。在涉及自定义应用程序的 Windows 中，有许多替代（更好的）方法可以进行调度。

但是，如果超过 5 分钟，您将运行重叠的脚本，这可能不是您想要的。一种解决方法是在第二个脚本启动时创建一个临时文件，并在完成后将其删除，并在脚本的开头检查它是否存在，如果存在，则退出。

# ios - 如何保护为 iPhone 等开发的应用程序不被转售

> ID：14144489
> 
> 赞同：1
> 
> 时间：2013-01-03T17:58:39.493
> 
> 标签：ios, iphone

我为 iPhone 开发了一个应用程序。在某些国家/地区，您可以去一些地方，给您的 iDevice，他们会在上面安装任何应用程序/应用程序，而且便宜得多（任何应用程序只需 1 美元）。他们是怎么做到的？- 他们只需合法地购买一次应用程序，然后将“客户的”iDevice 与那里的帐户同步。我认为这是非法的，转售...

所以我的问题是：作为开发人员，我可以采取哪些步骤来保护我的应用程序被非法共享？苹果对此有什么反对吗？因为苹果购买是与账户相关的。

编辑：我忘了提到，该应用程序是免费的，产品必须在应用程序（应用程序内购买）中购买，该应用程序将在从其他服务器购买后下载。

一种解决方案可能是，如果可以获得设备的 UDID 和“帐户 ID”，我可以限制下载，比如说，5 个设备。我读到，从 iOS5 开始，不可能获得 UDID，或者是吗？这种限制是否违反了 Apple 规则？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T19:24:41.197

> 我可以限制下载，比方说，5 台设备 [...] 这样的限制违反 Apple 规则吗？

请参阅 Fernando 对您的 UDID 问题的回答，但这绝对违反开发者协议。您的应用内购买需要可在用户拥有的任何设备上恢复。当然，用户拥有超过 5 台 iDevice 的可能性不大，所以如果你想抓住机会，你可以。也就是说，我知道苹果公司曾对试图限制“每台设备”应用程序的人进行过攻击。

> 如果可以获取设备的 UDID 和“帐户 ID”，我可以限制下载，比如说 5 个设备

如果“account-id”是指下载/购买您的应用程序的 iTunes 用户名，那么不，这是不可能的。恐怕您无权访问有关购买者的任何信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T18:55:51.740

到目前为止，我工作过的公司都没有进行这种限制性的 DRM，因为你错误地伤害客户的可能性比你得到任何东西的可能性更大。不要浪费你的时间来实现这个。你不只是通过惹恼他们来让人们购买你的东西。通常无法说服以这种方式获取您的应用程序的人购买

但是如果你必须这样做，这里有一个在 iOS5 之后拥有唯一设备标识符的解决方法：

[https://github.com/gekitz/UIDevice-with-UniqueIdentifier-for-iOS-5](https://github.com/gekitz/UIDevice-with-UniqueIdentifier-for-iOS-5)

# hadoop - 如何在 Hadoop 中两次通过 OutputFormat.RecordWriter write(key,value)

> ID：14144490
> 
> 赞同：0
> 
> 时间：2013-01-03T17:58:39.860
> 
> 标签：hadoop

我有一种情况，我需要两次检查我的 OutputFormat 的键/值对。在本质上：

```
 OutputFormat.getRecordWriter() // returns RecordWriteType1
 ... and when all those are complete across all machines
 OutputFormat.getRecordWriter() // return RecordWriterType2 
```

RecordWriterType1/2 的类型相同。有没有办法做到这一点？

谢谢你，马尔科。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T03:11:51.633

不幸的是，您不能简单地运行 reducer 数据两次。

您确实有一些可能的解决方法：

*   使用身份归约器将排序后的数据输出到 HDFS，然后使用身份映射器在数据上运行两个作业 - 如果您没有那么多数据，这很浪费但很简单
*   如上所述，但是您可以使用仅映射作业和键比较器来模拟减速器功能，因为您知道输入已经排序（您需要确保拆分大小设置得足够大以确保来自第一个减速器的所有数据输出文件在单个映射器中处理，而不是拆分超过 2 个映射器实例
*   您可以将减速器键/值写入减速器中的本地磁盘，然后在减速器的清理方法中，打开本地文件并按照第二个选项中的详细说明进行处理（使用组比较器来确定键边界）。
*   如果你挖掘 ReduceTask 的源代码，你甚至可以“滥用”本地磁盘上合并的排序段并再次运行数据，但这个选项是纯粹的黑客行为......

# php - 在 PHP 中正确使用变量范围

> ID：14144491
> 
> 赞同：4
> 
> 时间：2013-01-03T17:58:42.270
> 
> 标签：php, variables, global-variables, scope

我有一些变量需要在比我最初想象的更多的函数中访问。

将它们包含在我不断增长的功能列表中的最佳方式是什么？

我有类似的东西

```
$site = 'a';
$admin = 'b';
$dir = 'c';
$ma_plug = 'd';
$base = 'e';
//Etc. 
```

在我的大量功能中，我几乎需要所有这些功能。我最初在做

```
function a(){
    global  $site, $admin, $dir, $ma_plug, $base;
    //Write the A function
}
function b(){
    global  $site, $admin, $dir, $ma_plug, $base;
    //Write the B function
} 
```

太好了，直到我意识到我要编写的函数比我最初想象的要多。

将所有这些变量纳入（几乎）每个函数的范围的最佳方法是什么？就像我做过的那样？或者类似使用常量的东西？`session()`如果可能的话，我想避免使用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T18:00:39.970

如果这些函数是唯一使用这些变量的函数，最好创建一个类，其中这些变量是本地的。

这样您就不会污染全局命名空间，并且需要`global`在每个函数中使用关键字。

例如：

```
class MySite {
    private $site;
    private $admin;
    private $dir;
    private $ma_plug;
    private $base;

    function __construct($site, $admin, $dir, $ma, $base) {
       $this->site = $site;
       $this->admin = $admin;
       //...
    }
} 
```

# regex - 允许 https 到站点上的单个文件，并将 https 重定向到 http（通过 web.config）

> ID：14144497
> 
> 赞同：0
> 
> 时间：2013-01-03T17:59:15.603
> 
> 标签：regex, web-config

我的网站可以通过 HTTP 和 HTTPS 访问，直到 SEO 绅士说我们应该使用其中一个（以避免重复内容）。我们已经为网站上的所有内容实现了 HTTPS -> HTTP 重定向，这是通过 web.config 文件设置的。

但是，现在我需要打开对 HTTPS 的一个文件的访问权限，以便在 HTTPS 环境中正确加载它。任何帮助都会很棒。

这是重定向代码：

```
<rule name="Redirect HTTPS to HTTP" stopProcessing="true">
  <match url="(.*)" />
  <conditions>
    <add input="{HTTPS}" pattern="^on$" ignoreCase="true"/>
  </conditions>
  <action type="Redirect" url="http://{HTTP_HOST}/{R:1}" redirectType="Found" />
</rule> 
```

**编辑**：再想一想，如果我只想允许通过 HTTPS 访问图像（.jpg、.gif、.png）怎么办？我想我需要的是一个逆正则表达式。比如：匹配 url="!((.jpg)(.gif)(.png))"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:13:17.050

通过为 .jpg 文件添加不重定向到 HTTP 的规则来解决：

```
<rule name="allow jpg to use https" stopProcessing="true">
    <match url="(.*)(jpg)" />
    <conditions>
        <add input="{HTTPS}" pattern="^on$" ignoreCase="true"/>
    </conditions>
</rule> 
```

# search - 是否可以将搜索索引器配置为在typo3 中对fileadmin 下的子目录进行索引？

> ID：14144498
> 
> 赞同：-1
> 
> 时间：2013-01-03T17:59:24.237
> 
> 标签：search, indexing, typo3

我将文件存储在错字 3 中 fileadmin 树下的子目录中的表中。我想知道是否有办法让搜索索引器索引这个子目录，并可能索引 pdf 文件在所述子目录中。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-04T01:01:21.563

经过一个小时左右的搜索......[是的。如此处所述](http://xavier.perseguers.ch/tutoriels/typo3/articles/indexed-search-crawler.html)

# sql - 如何设计一个 SQL 数据库，其中表中的某些属性仅与某些行相关？

> ID：14144499
> 
> 赞同：0
> 
> 时间：2013-01-03T17:59:33.117
> 
> 标签：sql, database, database-design

我有一个名为 Type_of_installations 的表；它包含几种类型，每种类型都有常见的字段，如`cost`, `guarantee_end`, `manufacturer`...

但是，有些功能仅与某些类型相关，例如

```
voltage, capacity, hours_per_week, lifting_power, weight, ... 
```

这些可能仅具有某些功能。我记得的一种方法是在每个不规则特征之后添加一个***位字段***，但我认为有更有效的技术来处理这个问题。我觉得每次都检查每一个不规则的特征位会很累；这是编程时间，而不是更多的处理时间。

设计一组表的最佳方法是什么，其中某些属性仅与主表中的某些行相关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T18:10:42.113

位域会起作用。另一种涉及更多的方法可能是采用 EAV 风格：

“installations”表字段：id、guarantee_end、manufacurer
“options”表字段：install_id、option_name、option_value

因此，如果您有一个包含必填字段的“安装”表，其中：

```
id guarentee_end 制造商
 1 20140101 IBM
 2 20140701 联想

```

您的“选项”表可能有：

```
install_id option_name option_value
 1 成本 1000.00
 1 颜色 绿色
 2 富吧

```

您存储的内容不超过每条记录所需的内容，而无需严格定义这些可能的选项是什么。您只需根据需要添加它们，并加入 install_id 字段以查询它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T18:15:11.483

如果您可以定义这些始终一起出现的可选列的子集，您可以创建子表，每个子表都包含一个子集并使用外键链接到主表。

就像是：

```
MainTable(id int, guarantee_end int, manufacturer int)
Electric(id int, voltage float, watts float, mainTableID int foreign key) 
```

**编辑：**否则，在不使用字段时只需将字段设置为 NULL，就不需要位字段（在大多数情况下）。您可以将 NULL 字段与上述内容结合起来，以获得一些合理有效且体面的结构化组合。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T18:15:44.593

NoSQL 可能是处理这类数据的更好途径。

如果您对单个属性不感兴趣，例如从Things Wherelifting_power > 400 中选择*，那么xml 或序列化将是一个不错的选择。

除了经常使用但愚蠢的将所有可能的列放在表中之外，最好的选择是经典的财产包

Thingy（ThingyID、ThingyName 等）属性（PropertyID、PropertyName、PropertyType 等），在这里看到默认、最小和最大各种东西

PropertiesOfThingys(ThingyID, PropertyID, PropertyValue) PropertyValue 将是一个字符串，您将使用 PropertyType 进行翻译

那类的东西

# php - 如何将内容放置在codeigniter中的正确位置？

> ID：14144502
> 
> 赞同：0
> 
> 时间：2013-01-03T17:59:38.267
> 
> 标签：php, codeigniter

我有这段代码，当我使用 mydomain/index.php/blog 调用该函数时，一切正常，但在这种情况下，内容（即“索引”）显示在页面顶部。我希望它显示在我在我的 CSS 中定义的内容区域中。有什么问题？

```
<?php
    class Blog extends CI_Controller{

        public function __construct(){
            parent::__construct();
        }

        public function index(){

            $this->load->view('template/header');
            echo "index";
            $this->load->view('template/footer');
        }

    }
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:06:44.230

在 CodeIgniter 中有两种方法可以向浏览器显示输出。使用 CI 视图并回显数据。该`echo`命令会立即执行，因此它位于页面顶部。该`load->view`方法在输出库的 CI 中执行 - 因此它不会完全按照您的 echo 语句的顺序执行。

我想说为您的内容创建另一个视图，然后像这样调用所有视图：

```
$data = array('content_html' => 'index');
$this->load->view('template/header');
$this->load->view('template/content', $data);
$this->load->view('template/footer'); 
```

您的内容视图可能只是回显`content_html`变量：

```
// views/template/content.php
echo $content_html; 
```

或者，您可以控制控制器中的内容（尽管这不是最好的想法）：

```
$header = $this->load->view('template/header', array(), TRUE);
$footer = $this->load->view('template/footer', array(), TRUE);

echo $header;
echo "index";
echo $footer; 
```

`TRUE`作为第三个参数传递给该`load->view`方法将视图作为字符串返回，而不是将其输出到浏览器 - 允许您控制输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:11:18.983

如果您想在内容区域中显示数据

```
<?php
    class Blog extends CI_Controller{

        public function __construct(){
            parent::__construct();
        }

        public function index(){
            $data['content'] ='Your content';   
            $this->load->view('template/header');
            $this->load->view('template/content_template',$data);                
            $this->load->view('template/footer');
        }

    }
    ?> 
```

并为内容创建一个单独的模板文件，并将此代码粘贴到您的内容文件中。

```
<?php
print $content; 
?> 
```

另请参阅此网址 [http://ellislab.com/codeigniter/user-guide/general/views.html](http://ellislab.com/codeigniter/user-guide/general/views.html)

# c# - ExpressionTree Compile() 方法生成 stackoverflow 异常

> ID：14144510
> 
> 赞同：4
> 
> 时间：2013-01-03T18:00:17.740
> 
> 标签：c#, expression-trees

我有一个网格视图，我们可以在其中按不同的标准进行过滤。每个条件都是一个表达式。我有一个场景，我可以有超过一千个条件，这些条件会导致我的表达式在调用 Compile 方法时抛出 StackOverflow。

顺便说一句，我仍然是使用表达式树的初学者。

这是我为重现 stackoverflow 所做的示例。

```
var param = Expression.Parameter(typeof(SomeEntity), "SomeEntity");

        Expression finalExpression = Expression.Default(typeof(bool));

        for (int i = 0; i < 20000; i++) // Create 20000 expressions
        {
            var left = Expression.Property(param, "OrderID");
            var right = Expression.Constant(42.ToString());

            var expression = BinaryExpression.Equal(left, right);

            finalExpression = Expression.OrElse(finalExpression, expression);
        }

        var hello = Expression.Lambda(finalExpression, param);
        hello.Compile(); 
```

我的问题是：有没有办法“减少”这个表达式或任何其他防止 stackoverflow 的解决方案？

谢谢

注意：这是表达式在调试器中的样子：

```
(SomeEntity.OrderID == "42")) 
OrElse (SomeEntity.OrderID == "42")) 
OrElse (SomeEntity.OrderID == "42")) 
OrElse (SomeEntity.OrderID == "42")) 
OrElse (SomeEntity.OrderID == "42")) 
x20000 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T19:07:06.130

我刚刚成功地测试了这段代码多达 1,000,000 个条件而没有堆栈溢出 - 我怀疑它可以处理你想要的尽可能多的条件。

当`Compile`在 lambda 表达式上调用时，表达式树会递归地向下遍历以编译它；极深的树（像这样）需要大量的堆栈帧来完成 - 因此`StackOverflowException`.

我在下面所做的是`MaxPredicateConditionCount`在编译表达式并将其推送到已经生成的条件集合之前只接受固定数量的条件（由 设置）。如果该预生成表达式的集合达到该最大值，则将它们组合成一个新的表达式，依此类推。通过这种方式，我们可以限制编译表达式所需的递归深度（通过分段执行）。

```
public class PredicateBuilder<TParameter>
{
    private const int MaxPredicateConditionCount = 500;
    private readonly List<Expression<Func<TParameter, bool>>> _existingPredicates = new List<Expression<Func<TParameter, bool>>>(MaxPredicateConditionCount);
    private readonly ParameterExpression _parameter = Expression.Parameter(typeof(TParameter));
    private Expression<Func<TParameter, bool>> _expression;
    private Expression _workingPredicate;
    private int _workingPredicateConditionCount;
    public bool Built { get; private set; }

    public Expression<Func<TParameter, bool>> LambdaExpression
    {
        get
        {
            if (!Built)
            {
                return null;
            }

            return _expression;
        }
    }

    public void AddCondition<TValue>(string propertyName, TValue value)
    {
        if (Built)
        {
            throw new InvalidOperationException("Predicate has already been built");
        }

        var property = Expression.Property(_parameter, propertyName);
        var constant = Expression.Constant(value, typeof(TValue));
        var equality = Expression.Equal(property, constant);

        if (_workingPredicate == null)
        {
            _workingPredicate = equality;
        }
        else
        {
            if (MaxPredicateConditionCount < ++_workingPredicateConditionCount)
            {
                var compiledWorking = Expression.Lambda<Func<TParameter, bool>>(_workingPredicate, _parameter).Compile();
                _existingPredicates.Add(p => compiledWorking(p));

                if (_existingPredicates.Count + 1 > MaxPredicateConditionCount)
                {
                    var compiled = BuildExistingPredicates().Compile();
                    _existingPredicates.Clear();
                    _existingPredicates.Add(p => compiled(p));
                }

                _workingPredicate = equality;
                _workingPredicateConditionCount = 0;
            }
            else
            {
                _workingPredicate = Expression.OrElse(_workingPredicate, equality);
            }
        }
    }

    private Expression<Func<TParameter, bool>> BuildExistingPredicates()
    {
        Expression compileTemp = Expression.Invoke(_existingPredicates[0], _parameter);

        for (var i = 1; i < _existingPredicates.Count; ++i)
        {
            var nextCall = Expression.Invoke(_existingPredicates[i], _parameter);
            compileTemp = Expression.OrElse(compileTemp, nextCall);
        }

        return Expression.Lambda<Func<TParameter, bool>>(compileTemp, _parameter);
    }

    public void Build()
    {
        Built = true;
        //There were no conditions, assume true
        if (_workingPredicate == null)
        {
            _expression = x => true;
            return;
        }

        _existingPredicates.Add(Expression.Lambda<Func<TParameter, bool>>(_workingPredicate, _parameter));

        _expression = BuildExistingPredicates();

        _existingPredicates.Clear();
        _workingPredicate = null;
        _workingPredicateConditionCount = 0;
    }

    public Func<TParameter, bool> Compile()
    {
        if (!Built)
        {
            Build();
        }

        return _expression.Compile();
    }
} 
```

示例实体

```
public class SomeEntity
{
    public string OrderID { get; set; }
} 
```

用法

```
class Program
{
    static void Main()
    {
        var builder = new PredicateBuilder<SomeEntity>();

        for (int i = 0; i < 1000000; i++) // Create 1,000,000 expressions
        {
            builder.AddCondition("OrderID", "42");
            Console.Title = i.ToString();
        }

        builder.Compile();
    }
} 
```

# cakephp - Cakephp 2.x 不手动登录

> ID：14144511
> 
> 赞同：1
> 
> 时间：2013-01-03T18:00:17.673
> 
> 标签：cakephp, cakephp-2.0

我正在尝试将 facebook 身份验证集成到我的 Cakephp 2.2.4 应用程序中，一旦 facebook 身份验证完成，我正在尝试创建用户并手动登录用户，我看到虽然下面的代码正在创建一个身份验证会话，即$this->Auth->user() 包含所有数据，它没有将用户登录到应用程序，即我无法访问应用程序的其他功能

```
$user = $this->User->findById($user_id);
        $this->Auth->login($user); 
```

这是我用来手动登录的，保存的用户不包含用户名和密码

这是在我的 AppController.php

```
class AppController extends Controller {
public $components = array(
'Session',
'Auth'=>array(
     'loginRedirect'=>array('controller'=>'Users','action'=>'dashboard'),
     'logoutRedirect'=>array('controller'=>'Users','action'=>'login'),
     'authError'=>'You can\'t access that page',
     'authenticate' => array(
        'Form' => array(
            'fields' => array('username' => 'email')
        ),'Basic'),
     'authorize'=>array('controller')
    ),
'RequestHandler'    
);

public $helpers = array('Js' => array('Jquery'),'Html','Form');

public function isAuthorized($user){
    return TRUE ;
}

public function beforeFilter(){

    // $this->Auth->allow('index','view');
    // $this->set('logged_in',$this->Auth->loggedIn());
    // $this->set('current_user',$this->Auth->user());
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T01:41:55.787

尝试：

```
$this->Auth->login($user['User']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:20:54.187

也许 Auth 组件仍然引用用户名字段而不是电子邮件进行身份验证。您可以尝试更改用户名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:22:59.880

这与 cakephp 应用程序无关，而是我用于 facebook 的插件，它没有发布数据

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T21:18:51.553

我正在开发一个使用 Facebook oAuth 作为身份验证组件的身份验证对象的插件。如果您想要使用服务器端 Facebook 登录的已构建解决方案，请查看我的网站： http: [//marianofino.github.com/Facebook-Plugin-for-CakePHP/](http://marianofino.github.com/Facebook-Plugin-for-CakePHP/)

# jquery - 在 Fancybox 2 中使用 Google 地图

> ID：14144513
> 
> 赞同：1
> 
> 时间：2013-01-03T18:00:28.190
> 
> 标签：jquery, google-maps, fancybox, fancybox-2

我正在尝试将 Google Maps v3 与 Fancybox2 集成，但它似乎不太奏效。

我在这里初始化了地图：http: [//vejstrup.dk.nt15.unoeuro-server.com/da/kort.aspx](http://vejstrup.dk.nt15.unoeuro-server.com/da/kort.aspx) 然后我将使用 ajax 从此处的链接“Vis adresse på kort”调用地图：[http:// /vejstrup.dk.nt15.unoeuro-server.com/da/kontakt.aspx](http://vejstrup.dk.nt15.unoeuro-server.com/da/kontakt.aspx)

有时地图似乎加载正确，但缺少缩放控件、地图控件和 Google 徽标。

链接如下所示：

```
<a href="/da/kort.aspx?alttemplate=map" target="_blank" class="open_ajax fancybox.ajax" data-fancybox-type="ajax">
    Vis adresse på kort
</a> 
```

和 Fancybox 脚本：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="/scripts/map.js"></script>
<script>
                $(".open_ajax").fancybox({
                    width     : '90%',
                    height    : '90%',
                    fixed: false,
                    autoSize : false,
                    autoCenter : true,
                    afterLoad  :  function() {
                        loadMap();
                    },
                    tpl: { 
                      closeBtn: '<div title="' + fbCloseTitle + '" class="fancybox-item fancybox-close"></div>',
                      next: '<a title="' + fbNextTitle + '" class="fancybox-item fancybox-next"><span></span></a>',
                      prev: '<a title="' + fbPrevTitle + '" class="fancybox-item fancybox-prev"><span></span></a>'
                    }
                });
            </script> 
```

map.js：http: [//vejstrup.dk.nt15.unoeuro-server.com/scripts/map.js](http://vejstrup.dk.nt15.unoeuro-server.com/scripts/map.js)

我缺少什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:01:49.320

你为什么不用这个`iframe`方法？直接链接到您的地图页面，例如：

```
<a class="fancybox fancybox.iframe" href="http://vejstrup.dk.nt15.unoeuro-server.com/da/kort.aspx?alttemplate=map">Open Google Map</a> 
```

...**注意**特殊课程`fancybox.iframe`。然后你的脚本：

```
$(".fancybox").fancybox({
    width: '90%',
    height: '90%',
    fixed: false,
    autoSize: false,
    autoCenter: true,
    tpl: {
        closeBtn: '<div title="' + fbCloseTitle + '" class="fancybox-item fancybox-close"></div>',
        next: '<a title="' + fbNextTitle + '" class="fancybox-item fancybox-next"><span></span></a>',
        prev: '<a title="' + fbPrevTitle + '" class="fancybox-item fancybox-prev"><span></span></a>'
    }
}); 
```

见**[演示](http://jsfiddle.net/uj2La/)**

# nginx - 我可以使用 Nginx 重定向来自 SSL 端口的非 SSL 流量吗

> ID：14144514
> 
> 赞同：16
> 
> 时间：2013-01-03T18:00:27.923
> 
> 标签：nginx

我有一个相当标准的设置，nginx 面向 django 应用程序。我希望 django 应用程序仅是 SSL，因此我的 nginx conf 中有两个监听块，来自端口 80（HTTP）的流量被重定向到端口 443（SSL）。这按预期工作。

我在打开了端口转发的 VM 中运行此设置，这样我就可以通过访问端口 8080 (HTTP) 或 8081 (SSL) 从主机浏览站点。同样，正如预期的那样，这项工作正常。

当我在注册工作流程期间从 Django 应用程序内部重定向时，问题就出现了。因为 Django 从来没有看到 SSL 状态（SSL 在 nginx 处终止，并且应用程序的流量通过 HTTP 在端口 5000 上转发），但确实看到了端口，所以重定向被破坏了**。

**所有这一切的最终结果是我将流量定向到 SSL 端口上的 nginx，而不是 SSL，例如`http://127.0.0.1:443/`. 有没有办法配置 nginx 来处理这个问题？**

** 注意我在 Nginx 中设置 X-Forwarded-Proto 标头，而 Django 正在获取正确的 .is_secure() 值，这是外部库未检查 is_secure 并且仅重定向传入 URL 方案的特定问题。

**[更新 1]**

附件是相关的配置设置。这是来自 Vagrantfile 本身，显示了端口转发：

```
config.vm.forward_port 80, 8080     # website, via nginx (redirects to SSL:8081)
config.vm.forward_port 443, 8081    # website, via nginx (accepts SSL)
config.vm.forward_port 5000, 8180   # website, via gunicorn (direct) 
```

使用上面的端口转发配置，如果我在 HTTP 端口（8080）上浏览到主机上的站点，则请求被接受，并且 nginx（见下文）将此请求重定向到 HTTPS（在端口 8081 上运行）。一旦我使用 HTTPS，网站本身就可以正常工作：

```
(host) http://127.0.0.1:8080  -> forwarded to -> (guest vm) http://127.0.0.1:80  
(host) https://127.0.0.1:8081 -> forwarded to -> (guest vm) https://127.0.0.1:443 
```

当我从 Django 内部获得混合方案和协议的重定向时，会出现问题，并以请求`http:\\127.0.0.1:8081\...`失败告终，因为 nginx 期望 8081 上的流量是 SSL。

我真正想要的是一条规则，上面写着“在 443 上监听 SSL 和非 SSL 并重定向非 SSL”。

这是相关的nginx配置：

```
# Django app is served by Gunicorn, running under port 5000 (via Foreman)
upstream gunicorn {
    server 127.0.0.1:5000 fail_timeout=0;
}

server {
    listen 80;
    # 8081 is the port I am forwarding to on the host machine
    rewrite ^ https://127.0.0.1:8081$request_uri? permanent;
}

server {
    listen 443;

    ssl on;
    ssl_protocols       SSLv3 TLSv1;
    ssl_ciphers         HIGH:!ADH:!MD5;
    ssl_prefer_server_ciphers on;
    ssl_certificate     /etc/nginx/ssl/self-signed.crt;
    ssl_certificate_key /etc/nginx/ssl/self-signed.key;

    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;

    location /static/ {
        alias /app/static/;
    }
    location /media/ {
        alias /app/media/;
    }
    location / {
        # everything else is to be served by the django app (upstream 'gunicorn')
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        # this is set to ensure that django is_secure returns True
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header Host $http_host;
        proxy_pass http://gunicorn;
    }
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-09T15:54:54.700

您应该查看本文档的“错误处理”部分：

[http://nginx.org/en/docs/http/ngx_http_ssl_module.html](http://nginx.org/en/docs/http/ngx_http_ssl_module.html)

非标准错误代码 497 可用于处理已发送到 HTTPS 端口的纯 HTTP 请求。

像这样的东西应该可以工作（未经测试）：

```
error_page 497 https://$host$request_uri; 
```

命名位置也可以在 error_page 中使用，有关详细信息，请参阅[http://nginx.org/r/error_page](http://nginx.org/r/error_page)。

# python - 通过两个元素的集合合并两个数组

> ID：14144516
> 
> 赞同：2
> 
> 时间：2013-01-03T18:00:36.177
> 
> 标签：python, arrays

我有一个包含偶数个整数的数组。该数组表示标识符和计数的配对。元组已经按标识符排序。我想将其中一些数组合并在一起。我已经想到了几种方法来做到这一点，但它们相当复杂，我觉得可能有一种简单的方法可以用 python 来做到这一点。

IE：

```
[<id>, <count>, <id>, <count>] 
```

输入：

```
[14, 1, 16, 4, 153, 21]
[14, 2, 16, 3, 18, 9] 
```

输出：

```
[14, 3, 16, 7, 18, 9, 153, 21] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T18:05:40.083

将这些存储为字典而不是列表会更好（不仅出于此目的，还用于其他用例，例如提取单个 ID 的值）：

```
x1 = [14, 1, 16, 4, 153, 21]
x2 = [14, 2, 16, 3, 18, 9]

# turn into dictionaries (could write a function to convert)
d1 = dict([(x1[i], x1[i + 1]) for i in range(0, len(x1), 2)])
d2 = dict([(x2[i], x2[i + 1]) for i in range(0, len(x2), 2)])

print d1
# {16: 4, 153: 21, 14: 1} 
```

之后，您可以使用[此问题](https://stackoverflow.com/questions/877295/python-dict-add-by-valuedict-2)中的任何解决方案将它们加在一起。例如（取自[第一个答案](https://stackoverflow.com/a/878168/712603)）：

```
import collections

def d_sum(a, b):
    d = collections.defaultdict(int, a)
    for k, v in b.items():
        d[k] += v
    return dict(d)

print d_sum(d1, d2)
# {16: 7, 153: 21, 18: 9, 14: 3} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T18:03:27.277

使用[`collections.Counter`](http://docs.python.org/2/library/collections.html#counter-objects)：

```
import itertools
import collections

def grouper(n, iterable, fillvalue=None):
    args = [iter(iterable)] * n
    return itertools.izip_longest(fillvalue=fillvalue, *args)

count1 = collections.Counter(dict(grouper(2, lst1)))
count2 = collections.Counter(dict(grouper(2, lst2)))
result = count1 + count2 
```

我在这里使用了[`itertools`库`grouper`配方](http://docs.python.org/2/library/itertools.html)将您的数据转换为字典，但正如其他答案向您显示的那样，有更多方法可以给特定猫剥皮。

`result`是一个`Counter`，每个 id 都指向一个总数：

```
Counter({153: 21, 18: 9, 16: 7, 14: 3}) 
```

`Counter`s 是多组，将轻松跟踪每个键的计数。对于您的数据来说，这感觉像是一个更好的数据结构。例如，它们支持求和，如上所述。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-03T18:11:43.397

[`collections.Counter()`](http://docs.python.org/2/library/collections.html#counter-objects)是你在这里需要的：

```
In [21]: lis1=[14, 1, 16, 4, 153, 21]

In [22]: lis2=[14, 2, 16, 3, 18, 9]

In [23]: from collections import Counter

In [24]: dic1=Counter(dict(zip(lis1[0::2],lis1[1::2])))

In [25]: dic2=Counter(dict(zip(lis2[0::2],lis2[1::2])))

In [26]: dic1+dic2
Out[26]: Counter({153: 21, 18: 9, 16: 7, 14: 3}) 
```

或者 ：

```
In [51]: it1=iter(lis1)

In [52]: it2=iter(lis2)

In [53]: dic1=Counter(dict((next(it1),next(it1)) for _ in xrange(len(lis1)/2))) 
In [54]: dic2=Counter(dict((next(it2),next(it2)) for _ in xrange(len(lis2)/2))) 
In [55]: dic1+dic2
Out[55]: Counter({153: 21, 18: 9, 16: 7, 14: 3}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T19:59:00.550

以前的所有答案看起来都不错，但我认为 JSON blob 应该从一开始就正确形成，否则（根据我的经验）它可能会在调试等过程中导致一些严重的问题。在这种情况下，id 和 count 为字段，JSON 应该看起来像

```
[{"id":1, "count":10}, {"id":2, "count":10}, {"id":1, "count":5}, ...] 
```

像这样正确形成的 JSON 更容易处理，并且可能与您输入的内容相似。

这个类有点通用，但肯定是可扩展的

```
 from itertools import groupby
class ListOfDicts():
    def **init_**(self, listofD=None):
        self.list = []
        if listofD is not None:
            self.list = listofD

```
 def key_total(self, group_by_key, aggregate_key):
        """ Aggregate a list of dicts by a specific key, and aggregation key"""
        out_dict = {}
        for k, g in groupby(self.list, key=lambda r: r[group_by_key]):
            print k
            total=0
            for record in g:
                print "   ", record
                total += record[aggregate_key]
            out_dict[k] = total
        return out_dict

if __name__ == "__main__":
    z = ListOfDicts([ {'id':1, 'count':2, 'junk':2}, 
                   {'id':1, 'count':4, 'junk':2},
                   {'id':1, 'count':6, 'junk':2},
                   {'id':2, 'count':2, 'junk':2}, 
                   {'id':2, 'count':3, 'junk':2},
                   {'id':2, 'count':3, 'junk':2},
                   {'id':3, 'count':10, 'junk':2},
                   ])

    totals = z.key_total("id", "count")
    print totals 
``` 这使

```
 1
    {'count': 2, 'junk': 2, 'id': 1}
    {'count': 4, 'junk': 2, 'id': 1}
    {'count': 6, 'junk': 2, 'id': 1}
2
    {'count': 2, 'junk': 2, 'id': 2}
    {'count': 3, 'junk': 2, 'id': 2}
    {'count': 3, 'junk': 2, 'id': 2}
3
    {'count': 10, 'junk': 2, 'id': 3}

{1: 12, 2: 8, 3: 10} 
```

```

# c++ - 检查文件是由进程创建还是由用户使用 C++ 创建

> ID：14144522
> 
> 赞同：0
> 
> 时间：2013-01-03T18:01:10.877
> 
> 标签：c++, windows, visual-studio-2010, winapi, filesystems

我正在查看我的系统根驱动器 (C:\) 中的所有文件和文件夹更改通知。我正在使用 ReadDirectoryChangesW() WIN API 使用 VC++ 来实现这一点，现在，我能够监视文件的所有类型的更改通知，即重命名、删除、创建......

但是，我的问题是我只想监视文件和文件夹的更改，这些更改是由用户手动完成的，而不是进程或程序。

因为，如果我使用 ReadDirectoryChangesW() WIN API 观看根文件夹，我会在短短几分钟内收到数千条更改通知，因为大多数临时文件和数据文件都是由操作系统或第三方安装的应用程序创建的......

我怎样才能只监视用户手动完成的文件更改（即仅由用户在鼠标或键盘的帮助下发起的更改）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T18:05:23.293

没有办法区分用户启动的活动和应用程序启动的活动。如果您考虑一下，用户启动的活动是通过程序完成的，无论是 Windows 资源管理器本身、DOS 提示符、记事本等等。从操作系统的角度来看，一切最终都通过同一个文件系统 API，这是监控发生的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:51:03.013

线索最终在文件的位置。用户文档正确属于我的文档；属于应用程序的文件属于 CommonAppData，单个用户的临时文件属于他的 AppData。

当然，如果用户“手动”使用记事本打开 AppData 中的日志文件，则无法发现这一点。

# ruby-on-rails - 存储 map/reduce 结果并稍后访问？

> ID：14144524
> 
> 赞同：1
> 
> 时间：2013-01-03T18:01:12.477
> 
> 标签：ruby-on-rails, mongodb, mongoid

我有一个包含大量数据的集合。我运行 map/reduce 并将结果存储（合并）在一个新集合中。map/reduce 返回结果，然后我可以访问它。但是，如果我想稍后访问这些结果，或者在不同的控制器中访问这些结果怎么办？结果在另一个集合中，但不是我的 rails 应用程序中任何模型的一部分。有没有办法在 mongoid 之后访问它们？我想出的唯一方法是降到 Moped 驱动程序级别并手动提取结果，但这似乎并不干净。

```
Graph.mongo_session[:mr_results].find() 
```

这可行，但我希望它可以以某种方式从我的模型中引用，例如：

```
@my_graph.mr_results 
```

这可能是 1:1 的参考关系，但我不知道这是否可能，或者我将如何在我的模型中设置它。

# python - django regroup grouper name as options 详细名称

> ID：14144526
> 
> 赞同：2
> 
> 时间：2013-01-03T18:01:31.230
> 
> 标签：python, django, django-models, django-templates

以 Django 文档中的简单重组示例为例：

```
{% regroup cities by country as country_list %}

<ul>
{% for country in country_list %}
    <li>{{ country.grouper }}
    <ul>
        {% for item in country.list %}
          <li>{{ item.name }}: {{ item.population }}</li>
        {% endfor %}
    </ul>
    </li>
{% endfor %} 
```

如果country.grouper 是在model 中声明的Char 字段，choices=CHOICES_FIELD，我如何在**模板**中显示它的详细名称？通常我会使用[Model.get_FOO_display](https://docs.djangoproject.com/en/dev/ref/models/instances/?from=olddocs#django.db.models.Model.get_FOO_display)但 country.grouper.get_country_list_display 当然不会工作。
自定义模板标签是唯一的选择吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-23T17:08:40.190

你只需要反过来看它！

用作`get_FOO_display`分组字段。

> {% 通过 get_country_display 将城市重新组合为 country_list %}
> 
> {{ country.grouper }} 现在将显示选项集中的值字段而不是键。

（逐字取自[djangodocs](http://docs.djangoproject.com/en/1.5/ref/templates/builtins/)）

# asp.net-mvc-4 - 将复杂的视图模型发布到控制器

> ID：14144527
> 
> 赞同：5
> 
> 时间：2013-01-03T18:01:34.980
> 
> 标签：asp.net-mvc-4, knockout.js, knockout-mapping-plugin

我试图掌握**Knockout (2.2.0)**背后的概念。
由于我正在使用**ASP.NET MVC 4**，我想我可以遵循一个具有“复杂”视图模型（主细节）的示例。

我唯一能找到的是[MvcMusicStore](https://github.com/tekpub/mvcmusic)。

该代码易于阅读，我已经弄清楚如何从服务器读取视图模型并在客户端上构建视图模型。

这是我的 C# **ViewModel**：

```
public class Person
{
    public Person()
    {
        this.Phones = new List<Phone>();
    }
    public string Name { get; set; }
    public string Surname { get; set; }
    public int Age { get; set; }

    public IList<Phone> Phones { get; set; }
}

public class Phone
{
    public string Model { get; set; }
    public string Number { get; set; }
} 
```

我的控制器将填充模型返回给视图，视图将其转换为淘汰视图模型：

```
var data = @Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model));
var model = ko.mapping.fromJS(data);
ko.applyBindings(model); 
```

*我使用了与 Rob Conery 相同的模式，上面的代码是一个简化版本。*

这是我的看法：

```
@using (@Html.BeginForm("Index", "Home", FormMethod.Post))
{
    <input id="Name" name="Name" type="text" data-bind="value: Name" value="" />
    <br />
    <input id="Surname" name="Surname" type="text" data-bind="value: Surname" value="" />
    <br />
    <table>
    <tbody data-bind="foreach: Phones">
        <tr>
            <td><input type="text" data-bind='value: Model' /></td>
            <td><input type="text" data-bind='value: Number' /></td>
        </tr>
    </tbody>
    </table>
    <input type="submit" value="Send" />  
} 
```

现在，我想提交我的 FORM 并在我的控制器上阅读更新的视图模型。

为了实现这一点，我使用了在 MvcMusicStore 中找到的相同解决方案。
如果您查看[第 49 行](https://github.com/tekpub/mvcmusic/blob/master/MvcMusicStore/assets/js/order_editor.js#L49)Rob 尝试序列化 FORM：

```
var data = $("#orderForm").serialize(); 
```

并发布到控制器：

```
$.post("/orders/edit", data, callback); 
```

我似乎无法使此代码与我的视图模型一起使用。我的控制器：

```
[HttpPost]
public JsonResult Index(Models.Person viewModel)
{
...
} 
```

似乎无法反序列化孩子，如果调试客户端，我可以看到该`seralize`方法也无法序列化它们。

实际上，我不明白他为什么要序列化 ​​FORM。因为我们有一个由淘汰赛管理的视图模型。没有其他方法可以序列化这样的“复杂”模型并将其发布到控制器吗？

您认为该解决方案（**MvcMusicStore**）是否正确地做事，还是我应该遵循其他模式？

任何帮助，将不胜感激。

**更新**

我想我已经找到了解决方案，但我必须做更多的测试。
如果我使用**toJSON** KO 方法：

```
var data = ko.toJSON(model); 
```

我可以正确序列化整个视图模型；然后我必须使用 $.ajax 发布数据

```
$.ajax({
    type: 'POST',
    dataType: 'json',
    contentType: 'application/json; charset=utf-8',
    url: "/Home/Index",
    data: dataToSave,
    success: callback,
    error: function (req, status, error) {
       alert("Status: " + status + " Error: " + error);
      }
}); 
```

这样，一切似乎都很好，但是，我仍然想知道是否有任何推荐的方法。

**解决方案**

Michael Berkompas 和 nemesv 为我提供了有用的信息，我还编写了一个简单的[应用程序](https://skydrive.live.com/embed?cid=669ADF1AF64DF389&resid=669ADF1AF64DF389!235&authkey=APF8yjn8HrXkaU0)，以防其他人感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T18:36:06.927

问题是在表格内您的`input`元素没有`name`属性。

您可以使用[attr 绑定设置名称，因为 MVC 在](http://knockoutjs.com/documentation/attr-binding.html)[模型绑定集合](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)时需要特殊的名称格式，您需要编写：

```
<tbody data-bind="foreach: Phones">
        <tr>
            <td><input type="text" data-bind="value: Model, attr: { name: 'Phones[' + $Index() + '].Model' }" /></td>
            <td><input type="text" data-bind="value: Number, attr: { name: 'Phones[' + $Index() + '].Number' }" /></td>
        </tr>
</tbody> 
```

或者，因为您无论如何都有您的视图模型，您可以直接将其发送到您的控制器：

```
var model = ko.mapping.fromJS(data);

//...

$.ajax({
    type: 'POST',
    url: "/orders/edit",
    contentType: "application/json",
    data: ko.mapping.toJSON(model),
    success: callback
}); 
```

请注意，在这种情况下您不能使用`$.post`，因为您需要将其指定`contentType`为“application/json”。

但我认为没有推荐的方法来做到这一点。`$("#orderForm").serialize()`（使用我提到的正确输入名称）和作品都`ko.toJSON(model)`有效，因为区别仅在于如何为 ajax 请求准备/编码数据。

我认为这更像是个人喜好使用哪个。在这种特殊情况下，这样做`ko.toJSON(model)`似乎更好，因为您不必处理 ASP.NET MVC 的特殊输入名称的生成。您可以将视图模型原样发送到服务器。并且在使用淘汰赛时感觉更自然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T19:52:21.560

我会选择 nemesv 的第二个选项。发布序列化的视图模型，而不是尝试使用 jQuery 序列化表单。

因为您的数据类型很复杂，并且 Asp.net MVC 无法将其转换为视图模型，所以您还需要使用[此页面](http://erraticdev.blogspot.com/2010/12/sending-complex-json-objects-to-aspnet.html)`$.toDictionary()`上解释的插件。

```
var model = ko.mapping.fromJS(data);

//...

$.post("/orders/edit", $.toDictionary(ko.toJS(model)), callback, "json"); 
```

# android - ArrayAdapter getView()：我在 ListView 中看到的内容与链接到适配器的数据下的内容不匹配

> ID：14144549
> 
> 赞同：2
> 
> 时间：2013-01-03T18:03:18.863
> 
> 标签：android, android-listview, android-arrayadapter

我的所有，我有一个问题，不允许我在 ListView 中的一行显示图标，只有当该行的一个数据与来自另一个来源的参数匹配时。在我的示例中，我将强制此参数为静态。

我有这个基本上运行良好的代码：

```
public class CustomListViewAdapter extends ArrayAdapter<User> {

Context context;
List<User> items;

public CustomListViewAdapter(Context context, int resourceId, List<User> items) {
    super(context, resourceId, items);
    this.context = context;
    this.items = items;
}

public int getCount() {
    return this.items.size();
}

/* private view holder class */
private class ViewHolder {
    ImageView rubrPhoto;
    TextView rubrNick;
    TextView rubrEmail;
    ImageView provaImg;
}

public View getView(int position, View convertView, ViewGroup parent) {
    Log.d("CustomListViewAdapter", "position = "+position);
    ViewHolder holder = null;
    User user = getItem(position);

    LayoutInflater mInflater = (LayoutInflater) context.getSystemService(Activity.LAYOUT_INFLATER_SERVICE);

    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.rubrica_list_view, null);

        holder = new ViewHolder();
        holder.rubrPhoto = (ImageView) convertView.findViewById(R.id.rubrPhoto);
        holder.rubrNick = (TextView) convertView.findViewById(R.id.rubrNick);
        holder.rubrEmail = (TextView) convertView.findViewById(R.id.rubrEmail);
        holder.provaImg = (ImageView) convertView.findViewById(R.id.rubrNewMess);

        //extra logic
        String email = user.getEmail();
        Log.d("CustomListViewAdapter", "FIRST TIME CREATED---> "+email);
        if(email.equals("giada@email.com")){
            Log.d("CustomListViewAdapter", "##############IN THE IF ... ");
            holder.provaImg.setVisibility(View.VISIBLE);
        }
        //end

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();

        //extra logic
        Log.d("CustomListViewAdapter", "CACHED---> email user ---->"+user.getEmail());
        CharSequence email = user.getEmail();

        if(email.equals("giada@email.com")){
            Log.d("CustomListViewAdapter", "IN THE IF.. ");
            holder.provaImg.setVisibility(View.VISIBLE);
        }
    //end
    }
    holder.rubrPhoto.setImageResource(user.getPhoto());
    holder.rubrNick.setText(user.getNick());
    holder.rubrEmail.setText(user.getEmail());
    holder.provaImg.setImageResource(user.getNewMess());

    return convertView;
} 
```

最初，所有 holder.provaImg 都通过 XML 布局将 VISIBILITY 设置为 GONE。但是，适配器的缓存机制似乎不能很好地工作，至少从我必须做的事情来看。

编码

```
User user = getItem (position); 
```

和

```
String email = user.getEmail (); 
```

是正确的并且与我所看到的相符。最初只显示正确的图标，但是当我开始滚动某些东西时崩溃并且 getView 将图标的可见性设置在错误的行中，好像缓存机制的工作方式与逻辑不同。

最后**getView()**设置电子邮件不匹配的行中图标的可见性。

也许我接近解决方案，但帮助肯定会挽救我的生命。非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:18:30.623

您错误地设置了*provaImg* `ImageView`的可见性。它应该是这样的：

```
if (convertView == null) {
//...
    convertView.setTag(holder);
}else{
    holder = (ViewHolder) convertView.getTag();
}
holder.rubrPhoto.setImageResource(user.getPhoto());
holder.rubrNick.setText(user.getNick());
holder.rubrEmail.setText(user.getEmail());
holder.provaImg.setImageResource(user.getNewMess());
CharSequence email = user.getEmail();
// if the email is the right one, show the ImageView
if(email.equals("giada@email.com")){
    Log.d("CustomListViewAdapter", "##############IN THE IF ... ");
    holder.provaImg.setVisibility(View.VISIBLE);
} else {
    // hide the ImageView so we don't end up with row problems
    // as the convertView could be non-null and the row from where that convertView
    // is coming could have the ImageView set to visible we need to make sure
    // we revert the row to the correct state
    holder.provaImg.setVisibility(View.INVISIBLE); // or GONE
} 
```

# java - 将 ArrayList 转换为数组

> ID：14144552
> 
> 赞同：-1
> 
> 时间：2013-01-03T18:03:35.350
> 
> 标签：java, collections, arraylist

我有以下问题...我想从输入中读取未知数量的字符串。因此，我创建了一个 arraylist 'words' 并添加了输入中的所有字符串。然后我想把这个数组列表转换成更简单的字符串数组'wordsarray'（String []）......正如我所做的那样，我想检查一切是否正常（如果单词保存在'wordsarray'中）所以我试图打印出来整个数组......但它没有给我我想要的东西......我的代码似乎不起作用。问题出在哪里？谢谢你的帮助

```
public static void main(String[] args) {
    Scanner sc = new Scanner(System.in);

    List<String> words = new ArrayList<String>();

    while(sc.hasNextLine()) {
         words.add(sc.nextLine());
    }

    String[] wordsarray = new String[words.size()];

    for(int i = 0; i < words.size(); i++) {
        wordsarray[i] = words.get(i);
    }

    for(int i = 0; i < words.size(); i++) {
        System.out.println(wordsarray[i]);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T18:06:58.587

有一种预先准备好的方法可以做你想做的事情：

```
ArrayList<String> words = new ArrayList<String>();
String[] array = words.toArray(new String[words.size()]); 
```

但是您的代码似乎是正确的，您确定在`ArrayList`?

根据您的评论，我猜问题在于您没有将所有内容都放在循环中。这段代码：

```
while(sc.hasNextLine()) {
  words.add(sc.nextLine());
} 
```

只工作一次。如果您继续插入单词并按 Enter，则您已经在循环之外，因为`Scanner`已经达到了没有更多行可取的点。

您应该执行以下操作：

```
boolean finished = false;

while (!finished) {
  while(sc.hasNextLine()) {
      String line = sc.nextLine();
      if (line.equals(""))
        finished = true;
      else
        words.add(sc.nextLine());
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:32:03.167

这对我来说很好：

```
import java.util.*;

public class a
{
  public static void main (String [] args) throws Exception
  {
    Scanner sc = new Scanner(System.in);

    List<String> words = new ArrayList<String>();

    while(words.size () < 3 && sc.hasNextLine ()) {
        String s = sc.nextLine();
        System.out.println ("Adding " + s);
        words.add(s);
    }

    String[] wordsarray = words.toArray(new String [] {});

    for(int i = 0; i < words.size(); i++) {
       System.out.println("Printing ..." + wordsarray[i]);
    }
  }
} 
```

输出：

```
java a
1
Adding 1
2
Adding 2
3
Adding 3
Printing ...1
Printing ...2
Printing ...3 
```

# elasticsearch - 基于字段值的 ElasticSearch 过滤器提升

> ID：14144561
> 
> 赞同：0
> 
> 时间：2013-01-03T18:04:04.117
> 
> 标签：elasticsearch

我有以下查询：

```
{
"from": 0, 
"query": {
    "custom_filters_score": {
        "filters": [
            {
                "boost": 1.5, 
                "filter": {
                    "term": {
                        "format": "test1"
                    }
                }
            }, 
            {
                "boost": 1.5, 
                "filter": {
                    "term": {
                        "format": "test2"
                    }
                }
            }
        ], 
        "query": {
            "bool": {
                "must": {
                    "query_string": {
                        "analyzer": "query_default", 
                        "fields": [
                            "title^5", 
                            "description^2", 
                            "indexable_content"
                        ], 
                        "query": "blah"
                    }
                }, 
                "should": []
            }
        }
    }
}, 
"size": 50
} 
```

`{"format":"test1"}`如果我正确阅读文档，这应该会提升其中的内容。

但是， using`explain`告诉我这`"custom score, no filter match, product of:"`是结果，并且与过滤器匹配的返回文档的分数不会被此过滤器更改。

我究竟做错了什么？

编辑：这是架构：

```
mapping:
  edition:
    _all: { enabled: true }
    properties:
      title:       { type: string, index: analyzed }
      description: { type: string, index: analyzed }
      format:      { type: string, index: not_analyzed, include_in_all: false }
      section:     { type: string, index: not_analyzed, include_in_all: false }
      subsection:  { type: string, index: not_analyzed, include_in_all: false }
      subsubsection:  { type: string, index: not_analyzed, include_in_all: false }
      link:        { type: string, index: not_analyzed, include_in_all: false }
      indexable_content: { type: string, index: analyzed } 
```

让我们假设一个典型的文件是这样的：

```
{
    "format": "test1",
    "title": "blah",
    "description": "blah",
    "indexable_content": "keywords here",
    "section": "section",
    "subsection": "child-section",
    "link":"/section/child-section/blah"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:52:10.193

如果它说“没有过滤器匹配”，则表示它不匹配您查询中的任何过滤器。最可能的原因是与您的查询匹配的记录中没有术语“test1”。不幸的是，您没有提供映射和测试数据，因此很难确定那里发生了什么。

尝试运行此查询，看看您是否真的可以找到任何符合您的搜索条件并且应该被提升的记录：

```
{
    "from": 0,
    "query": {
        "bool": {
            "must": [{
                "query_string": {
                    "analyzer": "query_default",
                    "fields": ["title^5", "description^2", "indexable_content"],
                    "query": "blah"
                }
            }, {
                "term": {
                    "format": "test1"
                }
            }]
        }
    },
    "size": 50
} 
```

您的查询看起来不错，根据提供的信息，它应该可以工作：[https ://gist.github.com/4448954](https://gist.github.com/4448954)

# c# - 在 autoGenColumnsArray 中更改数据网格的日期时间字符串格式

> ID：14144567
> 
> 赞同：0
> 
> 时间：2013-01-03T18:04:39.530
> 
> 标签：c#, asp.net, datagrid, string-formatting

我的 Datagrid (dg) 有几列，其中一列（最右边的列）包含日期。其余列不包含日期。我希望日期列中的字符串向用户显示为 DD/MM/YYYY（没有时间。）但是，一旦绑定了网格并加载了页面，它就会显示为 DD/MM/YYYY 12:00 AM。

通过搜索，我想我会尝试做这样的事情：

```
foreach (DataControlField field in dg.Columns)
    {
        if (field is BoundField)
        {
            BoundField boundField = field as BoundField;
            boundField.DataFormatString = "{0:dd/MM/yyyy}";
            boundField.HtmlEncode = false;             
        }
    } 
```

但是，数据不在 dg.Columns 中，它实际上在 dg.autoGenColumnsArray[0-10] 中，其中 10 是我要格式化的日期的列索引。我该怎么做才能格式化此列？

编辑：我正在使用一个面板：

```
<asp:Panel runat="server" ID="labelSqlDefaults"> 
```

另外，在我的代码隐藏中（其中 dg 是我的数据网格）：

```
dg.DataBind();
this.labelSqlDefaults.Controls.Add(dg); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:08:05.137

格式化它，因为它限制在您的 aspx 端

```
<asp:BoundField HeaderText="Date" DataField="Date" DataFormatString="{0:dd/MM/yyyy}" HtmlEncode="false" > 
```

# ios - 如何在 iOS 上的弧形路径中移动图形...如仪表或钟面

> ID：14144571
> 
> 赞同：-1
> 
> 时间：2013-01-03T18:04:53.827
> 
> 标签：ios, image, animation, sdk, caanimation

这是我想要实现的结果：

[![](../Images/7914a29092ab9c655b5d0b5a206c1e10.png)](https://i.stack.imgur.com/KphX4.png)
[（来源：[mouseaddict.com](http://mouseaddict.com/images/sample-meter.png)）]

我的应用程序有静态图像，但我想为它们添加动作。

想象一米。它有一根锁定在底部的针（在 6:00 在圆形时钟式面），其针顶以弧形从左到右旋转。弧线（零）从指针指向（大致）圆形时钟样式面上的 9:30 位置开始，该弧的最顶部应在圆形时钟上大约 2:30 结束-风格脸。

我有几个图形元素 1) 圆形仪表面 (png) 和 2) 仪表针的垂直方向 png 文件。我需要使针以弧形图案在圆面内移动。

那么，假设上述两个要求，使用动画在仪表内旋转指针的最佳方法是什么？

我看过这个：[车速](https://mobisoftinfotech.com/resources/blog/iphone/ios-tutorial-custom-speedometer-control/)表——但这是最好的方法吗？我的主要问题是我希望将针锁定在底部并且只从左到右移动少量......以及事实上几乎没有（实际上没有）文档的事实。诸如“ `calculateDeviationAngle`”之类的东西无法解释。

此外，车速表似乎移动了很多，并且该示例上的枢轴点不起作用......（我不认为）

我想用这样的命令来调用它：

`[self moveNeedleToPosition:degreeOrClockFaceNumber]`并让它从当前位置移动到一点点过去`degreeOrClockFaceNumber`并反弹回来休息`degreeOrClockFaceNumber`。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:37:07.310

我做了以下事情：我把图像分成几块。轮廓（黑色）部分、背景和针。每件作品都具有完全相同的“足迹”（形状）。

假设`theImageView`是针的 imageView（位于其他两个 imageView 之上），我创建了以下函数：

```
-(void) rotateNeedle:(UIImageView *)theImageView toAngle:(float) theAngle
{
    [UIView animateWithDuration:0.5
                          delay: 0.0
                        options: UIViewAnimationOptionCurveEaseInOut
                     animations:^{
                         theImageView.transform =CGAffineTransformMakeRotation((M_PI / 180) * (theAngle + 10));
                     }
                     completion:^(BOOL finished){
                         //
                         [UIView animateWithDuration:0.5
                                          animations:^{
                                              theImageView.transform = CGAffineTransformMakeRotation((M_PI / 180) * theAngle);
                                          }];

                     }];

} 
```

块中的第一个动画执行动画的“拍摄过去”部分......即：移动超过实际值 10 度。完成块中的第二个动画然后将针“反弹”回正确的值。这些动画的速度创造了物理效果。它对我来说效果很好。

# javascript - 如何在使用 JavaScript 从外部文件加载广告列表的页面上旋转广告？

> ID：14144572
> 
> 赞同：1
> 
> 时间：2013-01-03T18:04:56.840
> 
> 标签：javascript, xmlhttprequest, image-rotation

我正在尝试使用 javascript 从文件中加载变量。我找到了一些例子，但我似乎无法让它发挥作用，并且真的可以使用一些帮助来让我的语法正确。

基本上，我想在页面上加载随机广告图片，但我希望从文件中提取广告列表。目前我正在使用我在互联网上找到的以下脚本加载图像：

```
 <script type="text/javascript">
     var picPaths = [
      '/images/ad-1.jpg',
      '/images/ad-2.jpg',
      '/images/ad-3.jpg',
      '/images/ad-4.jpg'
     ]
     var oPics = [];
     for(i=0; i < picPaths.length; i++){
      oPics[i] = new Image();
      oPics[i].src = picPaths[i];
     }
     curPic = Math.floor(Math.random()*oPics.length);
     window.onload=function(){
      document.getElementById('imgRotator').src = oPics[curPic].src;
     }
    </script> 
```

我一直在尝试从文件中加载 picPath 变量值（而不是在代码中说明它）。我在stackoverflow上找到了一些代码，并尝试将其调整为以下内容：

```
 var picPaths = new XMLHttpRequest();
    picPaths.open('GET', '/images/liveimages.inc');
    picPaths.send(); 
```

我还创建了 /images/liveimages.inc 文件，其中包含以下内容：

```
 '/images/ad-1.jpg',
     '/images/ad-2.jpg',
     '/images/ad-3.jpg',
     '/images/ad-4.jpg' 
```

但是，唉，它不起作用，而且我的程序员还不足以修复它。:-( 我认为我的语法已经关闭，但我的代码也可能关闭，因为我不是 JavaScript 人。

任何帮助将不胜感激，并感谢您花时间阅读（并回复）我的问题！:-D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:08:10.813

如果您将数据文件存储为 JSON，您可以使用 AJAX/XMLHTTPRequest 来获取它，并且`JSON.parse`（在所有现代浏览器中都可用）来读取它。

* * *

一种更简单的方法可能是拥有一个仅包含数据的脚本，例如：

```
var picPaths = [
 '/images/ad-1.jpg',
 '/images/ad-2.jpg',
 '/images/ad-3.jpg',
 '/images/ad-4.jpg'
]; 
```

然后以正确的顺序包含您的脚本：

```
<script type="text/javascript" src="picpaths.js"></script>
<script type="text/javascript" src="ad_script.js"></script> 
```

ad_script.js 将能够访问`picPaths`.

您可以让一些服务器端脚本为您生成 picpaths.js，例如通过查看文件夹或数据库的内容并从中提取广告信息。

# c++ - 在c++11中获取函数的结果类型

> ID：14144573
> 
> 赞同：4
> 
> 时间：2013-01-03T18:05:03.093
> 
> 标签：c++, templates, c++11, typetraits

考虑 C++11 中的以下函数：

```
template<class Function, class... Args, typename ReturnType = /*SOMETHING*/> 
inline ReturnType apply(Function&& f, const Args&... args); 
```

我想`ReturnType`等于`f(args...)` 我必须写什么而不是`/*SOMETHING*/`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-03T18:07:32.703

**我认为你应该使用trailing-return-type**重写你的函数模板：

```
template<class Function, class... Args> 
inline auto apply(Function&& f, const Args&... args) -> decltype(f(args...))
{
    typedef decltype(f(args...)) ReturnType;

    //your code; you can use the above typedef.
} 
```

请注意，如果您传递`args`as`Args&&...`而不是 `const Args&...`，那么最好使用`std::forward`as `f`：

```
decltype(f(std::forward<Args>(args)...)) 
```

当你使用`const Args&...`, then`std::forward`没有多大意义（至少对我来说）。

最好通过`args`称为*通用参考*并`Args&&...`与之一起使用。*`std::forward`*

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T18:07:34.830

它不需要是模板参数，因为它不用于重载解析。尝试

```
template<class Function, class... Args> 
inline auto apply(Function&& f, const Args&... args) -> decltype(f(std::forward<const Args &>(args)...)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-03T14:32:57.550

在某些情况下**std::result_of**更有用。例如，假设您要传递此函数：

```
int ff(int& out, int in); 
```

并在 apply() 内部这样称呼它

```
int res;
f(res, args...); 
```

那么我就不知道如何使用 decltype，因为我手头没有 int lvalue 引用。使用 result_of，您不需要变量：

```
template<class Function, class... Args> 
typename std::result_of<Function(const Args&...)>::type apply(Function&& f, const Args&... args)
{
  typedef typename std::result_of<F(const Args&...)>::type ReturnType;

  // your code
} 
```*

# c++ - 为 C++ 编写 Web 前端脚本的建议

> ID：14144575
> 
> 赞同：1
> 
> 时间：2013-01-03T18:05:14.110
> 
> 标签：c++, frontend

我目前正在学习 C++，并且我对可以作为其 C++ 后端部分快速的 Web 前端感兴趣。哪些前端可以很好地组合？

不寻找最好的，只寻找那些可以在不使用 cgi 的情况下加入 cpp 的。所以请不要投反对票。

- -更新 - - -

我实际上是用 Java 开发我的 Web 应用程序，而且很好。我正在看 C++ 方面，因为我想尝试一下。3 年前，我在大学课堂上学习了一点 C++，现在我正在阅读 Deitel 第 8 版书，以涵盖我错过的内容并回顾我以前学到的内容。我会阅读您的所有建议，并在生产力和速度之间选择一个平衡点。我承认我是一个表演成瘾者，这就是我对此感兴趣的原因。在问这个之前，我认为 Python 可以用作 Web 前端。但也许它不接近 C++ 性能，这就是你没有提到它的原因。

------更新#2-----

将 python web 框架或 java servlet 用于 web 引擎然后将其连接到 C++ 会有什么行为？tomcat 或 python 服务器会成为瓶颈吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:08:26.640

I think it's hard to find a web front end in C++ (probably what you are looking for is a C++ equivalent of [GWT](https://developers.google.com/web-toolkit/)). Back ends are more common and there're some frameworks to create web apps in C++. Facebook has [Hiphop](https://developers.facebook.com/blog/post/2010/02/02/hiphop-for-php--move-fast/) for converting PHP code to C++ to speed up. But everything mostly boils down to HTML(5)/JavaScript/CSS. However, Qt framework has integration with WebKit and you can build applications using this framework which leverages HTML5/JavaScript/CSS3 in a C++ app (I'm not too familiar with it, so may be wrong). Take a look at [this](http://www.codeproject.com/Articles/336018/Building-C-Applications-with-HTML5) by the way.

EDIT: On further googling, found [Wt](http://www.webtoolkit.eu/wt), this might look interesting. :)

# r - Mahout 是否有 R 接口？

> ID：14144576
> 
> 赞同：0
> 
> 时间：2013-01-03T18:05:19.223
> 
> 标签：r, machine-learning, mahout, recommendation-engine

是否有任何可以将 R 和 Mahout 完全或部分链接在一起的包或包装器（类似于 Rweka）？

我知道我们总是可以`system()`从 R 调用 Mahout，但在详细介绍之前，我想确保没有更有效的方法可以做到这一点。

# spring - jsf-spring：未调用 managedbean postconstruct

> ID：14144581
> 
> 赞同：1
> 
> 时间：2013-01-03T18:05:29.910
> 
> 标签：spring, jsf, primefaces, postconstruct

我宁愿通过这样做来学习，这可能是一个愚蠢的问题，但我找不到任何答案。

我有一个与简单 JDBC 一起使用的 JSF 应用程序。

以“domain.xhtml”为例，它有一个表格，列出了来自“DomainController”bean 的元素。一切都很好，然后我们切换到 JPA。该控制器必须使用服务，因此它被声明为@Component 并从那里包含（@Autowired）服务。**除了不再注入我的所有 JSF 注入 (@ManagedProperty)，也不再调用我的 @PostConstruct 之外，**它也运行良好。

有什么我错过的，或者这种方式有问题吗？

```
@ManagedBean
@Component
public class DomainController implements Serializable {
    private static Logger log = Logger.getLogger(DomainController.class);

    private static final long serialVersionUID = -2862060884914941992L;
    private List<Domain> allItems;
    private Domain[] selectedItem;
    private SelectItem[] yesNoNull;
    private DomainFilter filter = new DomainFilter();

    @Autowired
    private DomainService domainService;

    @Autowired
    private ValidationLookUpService validationLookUpService;

    @Autowired
    private ValidationService validationService;

    @ManagedProperty("#{workspace.on}")
    private boolean wsOn;

    //  @ManagedProperty("#{libraryVersionController.selectedItem.id}")
    //  private Integer selectedLibVersionID;

    @ManagedProperty("#{libraryVersionController.selectedItem}")
    private LibraryVersion selectedLibVersion;

    @ManagedProperty("#{obsoleteEntry}")
    private PObsoleteEntry pObsoleteEntry;

    @ManagedProperty("#{validationFailedItemsController}")
    private ValidationFailedItemsController validationFailedCont;

    private Domain itemEdited;

    private boolean persisted = false;

    public DomainController() {
        log.info("Creating metadata controller");

        allItems = new ArrayList<Domain>();

        // model for a yes/no/null column filtering
        yesNoNull = new SelectItem[4];
        yesNoNull[0] = new SelectItem("", "All");
        yesNoNull[1] = new SelectItem("true", "yes");
        yesNoNull[2] = new SelectItem("false", "no");
        yesNoNull[3] = new SelectItem("null", "not yet validated");

    }

    @PostConstruct
    public void test() 
    {
        log.info("!!!");
        log.info("WS is ... "+wsOn);
        // NOT CALLED ANYMORE
    }

... 
```

**我的 web.xml ：**

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <!-- The definition of the Root Spring Container shared by all Servlets 
        and Filters -->

    <context-param>
        <param-name>contextConfigLocation</param-name> <!-- indique le fichier de configuration pour Spring -->
        <param-value>/WEB-INF/spring/root-context.xml</param-value>
    </context-param>

    <context-param>
        <param-name>facelets.DEVELOPMENT</param-name>
        <param-value>true</param-value>
    </context-param>

    <context-param> <!-- to really skip comments in xhtml pages -->
        <param-name>javax.faces.FACELETS_SKIP_COMMENTS</param-name>
        <param-value>true</param-value>
    </context-param>

    <context-param>
        <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
        <param-value>.xhtml</param-value>
    </context-param>

    <context-param>
        <param-name>javax.faces.CONFIG_FILES</param-name>
        <param-value>/WEB-INF/faces-config.xml</param-value>
    </context-param>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/app/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/spring/</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>

    <listener> <!-- Creates the Spring Container shared by all Servlets and Filters -->
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <listener> <!-- links JSF with spring -->
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>

    <listener> <!-- parses JSF configuration -->
        <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
    </listener>

    <listener> <!-- vide le cache d’introspection Spring à l’arrêt du serveur. Ce listener n’est pas obligatoire mais conseillé -->
        <listener-class>org.springframework.web.util.IntrospectorCleanupListener</listener-class>
    </listener>

    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

    <filter>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <servlet-name>Faces Servlet</servlet-name>
    </filter-mapping>

</web-app> 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T20:15:25.907

如果我错了，请纠正我，但我不知道如何选择一个，因为 Spring 管理后端，JSF(+primefaces) 管理前端。

我认为控制器“可能”是两者之间的接口，这就是我天真地混合它们的原因。

在对您的评论进行了一些测试之后，我让我的控制器只使用 JSF 并使用 @ManagedBean 注入服务（我也不知道使用 @ManagedBean 它可以注入 @Service Spring-managed bean），这样就回答了我的问题： )

以下是更正后的代码工作。

也感谢您将我重定向到正确的方向！

## 控制器

```
/**
 * This is the controller for a Domain
 * 
 */
@ManagedBean
public class DomainController implements Serializable {
    private static Logger log = Logger.getLogger(DomainController.class);

    private static final long serialVersionUID = -2862060884914941992L;
    private List<Domain> allItems;
    private Domain[] selectedItem;
    private SelectItem[] yesNoNull;
    private DomainFilter filter = new DomainFilter();

    @ManagedProperty(value="#{domainService}")
    private DomainService domainService;

    @ManagedProperty("#{workspace.on}")
    private boolean wsOn;

    @ManagedProperty("#{libraryVersionController.selectedItem}")
    private LibraryVersion selectedLibVersion;

    private Domain itemEdited;

    private boolean persisted = false;

    /**
     * creates a list populated from the database
     */
    public DomainController() {
        log.info("Creating metadata controller");

        allItems = new ArrayList<Domain>();

        // model for a yes/no/null column filtering
        yesNoNull = new SelectItem[4];
        yesNoNull[0] = new SelectItem("", "All");
        yesNoNull[1] = new SelectItem("true", "yes");
        yesNoNull[2] = new SelectItem("false", "no");
        yesNoNull[3] = new SelectItem("null", "not yet validated");

    }

    @PostConstruct
    public void test()
    {
        Domain d = new Domain();
        d.setDataset("will it work ?"); // yes
        try {
            domainService.saveOrUpdate(d);
        } catch (DataModelConsistencyException e) {
            e.printStackTrace();
        }
    }

    // all functions 

    public DomainService getDomainService() {
        return domainService;
    }

    public void setDomainService(DomainService domainService) {
        this.domainService = domainService;
    }

} 
```

## 服务

```
public interface DomainService extends IVersionedServiceBase<Domain> {
    public Domain saveOrUpdate(Domain d) throws DataModelConsistencyException;

    public Domain getRelatedVariables(Domain d, VersionedObjectFilter versionedObjectFilter) throws DataModelConsistencyException;

    StringAndError getVarNameAndKeyOrderForDomain(Domain d, VersionedObjectFilter versionedObjectFilter) throws DataModelConsistencyException;

} 
```

## 服务实施

```
@Service("domainService")
@Transactional(readOnly = true)
public class DomainServiceImpl extends VersionedServiceBase<Domain> implements DomainService {
    /**
     * Private logger for this class
     */
    @SuppressWarnings("unused")
    private static final Logger log = Logger.getLogger(DomainServiceImpl.class.getName());

    @Autowired
    private DomainDao domainDao;

    @Autowired
    private VariableDao variableDao;

    @Autowired
    private DomainPurposeDao domainPurposeDao;

    @Autowired
    private DomainClassDao domainClassDao;

etc. 
```

# ssis - 64 位 windows server 2008 中的 32 位 informix 驱动程序不可用

> ID：14144584
> 
> 赞同：3
> 
> 时间：2013-01-03T18:05:56.080
> 
> 标签：ssis, odbc, windows-server-2008, informix

我有一个需要使用**ODBC**连接到**Informix**数据源的**SSIS包。**它在我的 64 位 Win7 开发盒上运行良好，但在 64 位 Windows Server 2008 上运行良好，并显示以下错误消息： ****`The specified DSN contains an architecture mismatch between the Driver and Application.`****

 ****当我在**%windir%/SysWOW64/中使用****odbcad32.exe**并在那里创建了 ODBC 连接时，我可以看到 informix 驱动程序。我在 %windir%/System32 中使用 odbcad32.exe 时看不到它们。谷歌机器说当我使用错误的 ODBC 管理员引擎创建 ODBC 连接时出现了我看到的错误消息。我正在使用**IBM Informix SDK 3.70。**

 ****也许我的 Google-fu 很弱，但我找不到任何有用的信息来帮助我从 System32 获取 Windows Server 2008 以允许我在 ODBC 管理员引擎中查看 32 位 Informix 驱动程序。
有人有任何想法/见解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T18:49:15.200

要记住两件事，您在 32/64 位空间中有 ODBC 驱动程序/配置 (odbcad32.exe)，但在 32/64 位空间中也有 SSIS (dtexec.exe)。

当我读到它时，您已经在服务器上安装了 32 位驱动程序并创建了 32 位 DSN（尽管名称听起来倒退，但在**中**找到`%windir%/SysWOW64/`）。

现在的诀窍是在 32 位模式下运行你的包。如果您使用的是 SQL 代理，则 SQL Server Integration Services 作业步骤有一个用于 32 位模式的复选框。但这仅适用于 SQL 代理。如果您从命令行运行它，或者通过 gui 单击它，您需要从正确的 exe 开始。

32 位

```
C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn\DTExec.exe
C:\Program Files (x86)\Microsoft SQL Server\110\DTS\Binn\DTExec.exe
C:\Program Files (x86)\Microsoft SQL Server\90\DTS\Binn\DTExec.exe 
```

64 位

```
C:\Program Files\Microsoft SQL Server\100\DTS\Binn\DTExec.exe
C:\Program Files\Microsoft SQL Server\110\DTS\Binn\DTExec.exe
C:\Program Files\Microsoft SQL Server\90\DTS\Binn\DTExec.exe 
```********

# apache-flex - Flex中模态窗口处于活动状态时覆盖区域中的事件

> ID：14144589
> 
> 赞同：0
> 
> 时间：2013-01-03T18:06:14.140
> 
> 标签：apache-flex, actionscript, event-handling, overlay, modal-window

我想知道如何在模态窗口处于活动状态时管理或收听覆盖区域中的事件，但我遇到了问题；当我的模态窗口打开时，我仍然可以在覆盖层后面的非模态窗口上收听事件。

有人可以建议如何获取有关叠加层和叠加层事件的更多信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:11:02.233

你有没有尝试过

```
event.stopImmediatePropagation(); 
```

和/或

```
event.stopPropagation(); 
```

如果您在响应覆盖区域中的事件时使用它，您很可能可以防止在显示列表中冒泡到其下方的 UI 对象。

# java - Java注释：无法通过反射找到方法

> ID：14144590
> 
> 赞同：1
> 
> 时间：2013-01-03T18:06:16.963
> 
> 标签：java, annotations

我无法打印出方法阶乘的注释。当我不让阶乘返回任何值并在方法本身中打印结果时，它就会起作用。我不明白这里的问题。

```
import java.io.*;
import java.lang.annotation.Annotation;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.reflect.Method;

@Retention(RetentionPolicy.RUNTIME)

@interface Store
{
int id();
String developerName();
String createdDate();
String Copyrightmessage();
}

public class Ch10LU1Ex2 
{
@Store(id = 1, developerName = "Robin", createdDate = "03/Jan/2013", Copyrightmessage =     "Cannot copy anything")
public static int factorial(int n)
{
    int result;
    if(n==1)
    return 1;
    result = factorial(n-1) * n ;
    return result;

}

public static void main(String[] args) 
{
    try
     {

      Ch10LU1Ex2 ch = new Ch10LU1Ex2();
      System.out.println("Enter any number from 0 to 10 to find factorial:");
      BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
      int ch1 = Integer.parseInt(br.readLine());
      int x = ch.factorial(ch1);
      System.out.println("The factorial is:"+x);
      Method method = ch.getClass().getMethod("factorial");
      Annotation[] annos = method.getAnnotations();
      for(int i=0; i<annos.length;i++)
      {
        System.out.println(annos[i]);
      }
     }
    catch(Exception e)
    {
        e.printStackTrace();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T18:16:03.570

您必须指明参数的类型：

```
Method method = Ch10LU1Ex2.class.getMethod("factorial", Integer.TYPE); 
```

否则你只会得到一个`NoSuchMethodException`.

这是我为“1”得到的输出：

> ```
> Enter any number from 0 to 10 to find factorial:
> 1
> The factorial is:1
> @Store(id=1, developerName=Robin, createdDate=03/Jan/2013, 
> Copyrightmessage=Cannot copy anything) 
> ```

# android - 如何从过滤器中获取意图数据？(IntentFilter Mono for Android)

> ID：14144592
> 
> 赞同：0
> 
> 时间：2013-01-03T18:06:26.557
> 
> 标签：android, mono, xamarin.android

我为 url 创建了一个意图过滤器作为一些 url，但我不知道在查看午餐时如何获取数据，我搜索论坛、xamarin 站点和 google andorid dev。在它使用的android示例代码中：

```
Get the intent that started this activity
Intent intent = getIntent();
Uri data = intent.getData(); 
```

但在 android 的单声道中，我找不到我使用 Intent.HasExtra(Intent.ExtraText).ToString() 测试的这种方法，但它总是返回“False”

```
[Activity(Label = "View App")]
[IntentFilter(new[] { Intent.ActionView }, 
Categories = new[] { Intent.CategoryDefault, Intent.CategoryBrowsable }, 
DataHost = "search", DataScheme = "market", Priority = 100)]
public class ViewApp : Activity
{
    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);
        SetContentView(Resource.Layout.ViewApp);
        TextView mainText = FindViewById<TextView>(Resource.Id.mainText);

        mainText.Text = Intent.HasExtra(Intent.ExtraText).ToString() + "\r\n";
        mainText.Text += Intent.HasExtra(Intent.ExtraStream).ToString() + "\r\n";
    }
} 
```

android 午餐我的活动，但我找不到如何从意图过滤器中获取数据，如 android 中的原始 Uri 数据有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T18:27:56.060

`setFoo()`Java ( / ) 中的Setter/Getter 在`getFoo()`Mono for Android 中作为属性公开，以保持 C# 样式。

因此，`getIntent().getData()`Java 中的公开方式与Android 的 Mono 中一样。[`Intent`](http://androidapi.xamarin.com/?link=P%3aAndroid.App.Activity.Intent)`.`[`Data`](http://androidapi.xamarin.com/?link=P%3aAndroid.Content.Intent.Data)

# spring - Spring MVC 中的请求映射 - 返回上一个 URL

> ID：14144594
> 
> 赞同：0
> 
> 时间：2013-01-03T18:06:41.653
> 
> 标签：spring, redirect, model-view-controller, request-mapping

我在 Spring MVC 中遇到重定向问题。我有一个控制器，方法很少：

```
 //PRINT ALL WORKERS
@RequestMapping("/print")
public String listWorkers(Model model)
{
    model.addAttribute("workerList", workerService.getAllWorkers());
    return "print";
}

//EDIT WORKER DATA
@RequestMapping("/edit")
public String redirectWorker(HttpServletRequest request)
{
    String parameter = request.getParameter("workers");
    String path = "redirect:/edit/" + parameter;
    return path;
}

@RequestMapping("/edit/{worker}")
public String editWorker(@PathVariable("worker")
String login, Model model)
{
    model.addAttribute("worker", workerService.getWorker(login));
    return "edition";
} 
```

当我在我的程序中使用请求映射中带有“print”的示例方法时，我的 URL 是：

```
http://localhost:8080/WWP/print 
```

但是当我在请求映射中使用带有“edit/{worker}”的方法时，然后我使用带有“print”的方法，我得到了一个 URL：

```
http://localhost:8080/WWP/edit/print 
```

因为我的“打印”是在“编辑”之后添加的，这不是必需的。如何返回上一个网址：

```
http://localhost:8080/WWP/print 
```

我想我必须更改我的 RequestMapping 注释。但我不知道该怎么做。

编辑：好的，这是我的 web.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-context.xml, /WEB-INF/spring/appServlet/security.xml</param-value>
    </context-param>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <!-- Filtry -->
    <filter>
        <filter-name>encodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>encodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 

</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T09:03:45.417

我在 JSP 中使用了“c:url”，它起作用了。

例如：

它会记住以前的 URL（这是错误的）：

```
<a href="/events/my">My Events</a> 
```

这会很好：

```
<c:url var="myEventsUrl" value="/events/my" />
<a href="${myEventsUrl}">My Events</a> 
```

URL 始终链接到：_http://localhost:8080/WWP/events/my

# php - 如何使用 jquery 或 php 打印月份中的特定日期

> ID：14144597
> 
> 赞同：2
> 
> 时间：2013-01-03T18:06:44.813
> 
> 标签：php, javascript, jquery

例如，我选择 2013 年 3 月月份，我想打印本月星期日的所有日期。如何使用 jquery 或 php 打印月份中特定日期的日期？

```
jQuery(function () {
jQuery("#datepicker").datepicker({
    dateFormat: 'dd-mm-yy'
});
var day = new Date();
var month = day.getMonth() + 1;
var date = day.getDate() + '-' + month + '-' + day.getFullYear();
jQuery("#datepicker").val(da`enter code here`te);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:55:05.733

就您使用 datepicker 而言，您可以尝试检查表中的每个最后一个框，显示为日历。当你确定你在 javascript/php 和屏幕上拥有相同的数据时，这将是一种方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:13:37.070

为此，我会找到该月的第一个工作日，然后从中找到第一个星期日，然后增加 7 以找到其余的星期日。

PHP中的一个例子：

```
$start = \DateTime::createFromFormat('d. m. Y', '01\. 03\. 2013');
$end = clone $start;
$end->add(new \DateInterval('P1M'));

// output all sundays between $start and $end
$periodInterval = \DateInterval::createFromDateString('first sunday');
$periodIterator = new \DatePeriod($start, $periodInterval, $end, \DatePeriod::EXCLUDE_START_DATE);

foreach ($periodIterator as $date) {
    // output each date in the period
    echo $date->format('d/m/Y') . ' ';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T18:13:56.853

我不完全明白你的意思，这是你想要的吗？

[http://jqueryui.com/datepicker/](http://jqueryui.com/datepicker/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T18:23:36.777

尝试这个：

```
var date= new Date();
var month = date.getMonth() + 1;
var tmp;
var day = 1000 * 3600 * 24;
while(true) {
    date = new Date(date.getTime() + day);
    tmp = date.getMonth() + 1;
    if(tmp!= month) {
        break;
    }    
    if(date.getDay() == 0)
        document.write(date+"</br>");        
} 
```

[在这里](http://jsfiddle.net/7HQUH/)看看它的工作原理 </p>

# c# - Open XML Word C# - 分成两列

> ID：14144599
> 
> 赞同：2
> 
> 时间：2013-01-03T18:06:54.233
> 
> 标签：c#, ms-word, openxml

我想知道如何将word文档分成两列。我之所以要这样做是因为我希望能够将所有信息都放在一页上。

非常感谢您的帮助和时间！

**我的代码**

```
using (WordprocessingDocument wordDoc = WordprocessingDocument.Create(filepath,   WordprocessingDocumentType.Document))
            {

                MainDocumentPart mainPart = wordDoc.AddMainDocumentPart();
                mainPart.Document = new Document();

                var margin_size = 100;

                PageMargin pargeMargins = new PageMargin();
                pargeMargins.Top = margin_size;
                pargeMargins.Bottom = margin_size;

                SectionProperties sectionProps = new SectionProperties();
                sectionProps.Append(pargeMargins);

                Body body = mainPart.Document.AppendChild(new Body());
                body.Append(sectionProps);
                ParagraphProperties paragraphProperties = new ParagraphProperties
                   (
                       //new ParagraphStyleId() { Val = "No Spacing" },
                       new SpacingBetweenLines() { After = "0" }
                   );

                Paragraph para_main = body.AppendChild(new Paragraph(paragraphProperties));

                // Creating the Header where the Serial Number will exist

                // Serial Number
                Run run_mainHeader = para_main.AppendChild(new Run());
                RunProperties runProp_mainHeader = new RunProperties();    // Create run properties.
                FontSize size_mainHeader = new FontSize();
                size_mainHeader.Val = new StringValue("48");                     
                runProp_mainHeader.Append(size_mainHeader);
                run_mainHeader.Append(runProp_mainHeader);                              // Append all of the properties
                run_mainHeader.Append(new Text("S/N: " + sn));

                // Serial Barcode
                Run run_barcode = para_main.AppendChild(new Run());
                RunProperties runProp_barcode = new RunProperties();                    // Create run properties.
                RunFonts runFontMain_barcode = new RunFonts();                          // Create font
                runFontMain_barcode.Ascii = "Code39AzaleaNarrow1";                      // Specify font family
                FontSize size_barcode = new FontSize();
                size_barcode.Val = new StringValue("48");

                runProp_barcode.Append(runFontMain_barcode);
                runProp_barcode.Append(size_barcode);

                run_barcode.PrependChild<RunProperties>(runProp_barcode);
                sn = sn.ToUpper();                                                      // Sets all the values to uppercase to be a barcode format
                run_barcode.AppendChild(new Text("*" + sn + "*"));
                run_barcode.AppendChild(new Break());

                // Tube Type
                Run run_tubetype = para_main.AppendChild(new Run());
                RunProperties runProp_tubetype = new RunProperties();                   // Create run properties.
                FontSize size_tubetype = new FontSize();
                size_tubetype.Val = new StringValue("38");
                runProp_tubetype.Append(size_tubetype);
                run_tubetype.Append(runProp_tubetype);                                  // Append all of the properties
                run_tubetype.Append(new Text("Tube Type: " + forms[0].TubeType + " "));
                //run_tubetype.Append(new Break());

                // Tube Barcode
                Run run_barcode_tube = para_main.AppendChild(new Run());
                RunProperties runProp_barcode_tube = new RunProperties();               // Create run properties.
                RunFonts runFontMain_barcode_tube = new RunFonts();                     // Create font
                runFontMain_barcode_tube.Ascii = "Code39AzaleaNarrow1";                 // Specify font family
                FontSize size_barcode_tube = new FontSize();
                size_barcode_tube.Val = new StringValue("48");

                runProp_barcode_tube.Append(runFontMain_barcode_tube);
                runProp_barcode_tube.Append(size_barcode_tube);

                run_barcode_tube.PrependChild<RunProperties>(runProp_barcode_tube);
                sn = sn.ToUpper();                                                       // Sets all the values to uppercase to be a barcode format
                run_barcode_tube.AppendChild(new Text("*" + forms[0].TubeType + "*"));
                run_barcode_tube.AppendChild(new Break());

                // Goes through all of the forms
                foreach (var form in forms)
                {

                    // Set up a header per form
                    Run run_header = para_main.AppendChild(new Run());
                    RunProperties runProp_formHeader = new RunProperties();
                    Bold bold = new Bold();
                    Underline ul = new Underline() { Val = DocumentFormat.OpenXml.Wordprocessing.UnderlineValues.Single };
                    FontSize size_formHeader = new FontSize();
                    size_formHeader.Val = new StringValue("24");
                    runProp_formHeader.Append(size_formHeader);
                    runProp_formHeader.Append(bold);
                    runProp_formHeader.Append(ul);
                    run_header.AppendChild(new RunProperties(runProp_formHeader));
                    //run_header.AppendChild(new RunProperties(new Bold(), new Underline()));

                    string username = form.Username;
                    string proces_header = form.HeaderTitle;

                    run_header.AppendChild(new Text(proces_header));
                    run_header.AppendChild(new Break());

                    // Goes through all of the fields that each form contains.
                    for (int i = 0; i < form.FieldList.Count; i++)
                    {
                        // Do not need to print out user or serial for each form.
                        if (!(form.FieldList[i].Token == "SNT"))
                        {

                            Run run_data = para_main.AppendChild(new Run());
                            if (form.FieldList[i].Default)
                            {
                                run_data.AppendChild(new Text(form.FieldList[i].Label));
                            }
                            else
                            {
                                run_data.AppendChild(new Text(form.FieldList[i].Label + " " + form.FieldList[i].Spec + form.FieldList[i].Value));
                            }
                            run_data.AppendChild(new Break());
                        }
                    }

                }

                mainPart.Document.Save();
                wordDoc.Close();
                return "Success";
            } 
```

目前，代码在一列上自上而下打印出所有内容。我想要它有两列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:05:17.100

您可以使用 SectionProperties 和 ParagraphProperties 类的 Columns 类来创建两列或多少列

[http://msdn.microsoft.com/en-us/library/documentformat.openxml.wordprocessing.columns(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/documentformat.openxml.wordprocessing.columns(v=office.14).aspx) http://msdn.microsoft.com/en-us/library/documentformat。 openxml.wordprocessing.paragraphproperties(v=office.14).aspx [http://msdn.microsoft.com/en-us/library/documentformat.openxml.wordprocessing.sectionproperties(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/documentformat.openxml.wordprocessing.sectionproperties(v=office.14).aspx)

这应该这样做：

```
 // Add a new main document part. 
            package.AddMainDocumentPart();

            // Create the Document DOM. 
            package.MainDocumentPart.Document = new Document();
            Body bd = package.MainDocumentPart.Document.Body = new Body();

            //write a first paragraph on two columns
            var paragrap1 = new Paragraph();
            var paragraphSectionProperties = new ParagraphProperties(new SectionProperties());
            var paragraphColumns = new Columns();
            paragraphColumns.EqualWidth = true;
            paragraphColumns.ColumnCount = 2;

            paragraphSectionProperties.Append(paragraphColumns);
            paragrap1.Append(paragraphSectionProperties);

            paragrap1.Append(new Run(new Text(str)));
            bd.AppendChild(paragrap1);

            //write another paragraph without paragraph properties
            bd.Append(new Paragraph(new Run(new Text(str))));

            //set the body properties default three columns
            var sectionProperties = new SectionProperties();
            var columns = new Columns();
            columns.EqualWidth = true;
            columns.ColumnCount = 3;

            sectionProperties.Append(columns);
            bd.Append(sectionProperties);

            package.MainDocumentPart.Document.Save(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-23T12:40:16.880

您可以使用以下代码对完整文档执行此操作：

```
var sectionProperty = document.Body.Descendants<SectionProperties>().First();
var paragraphColumns = new Columns {EqualWidth = true, ColumnCount = 2};
sectionProperty.Append(paragraphColumns); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-03T18:32:37.000

尝试与..

```
 Word.Application WordApp = new Word.Application();
    Word.Document BaseDoc = default(Word.Document);
    Word.Document DestDoc = default(Word.Document);
    int intNumberOfPages = 0;
    string intNumberOfChars = null;    
    int intPage = 0;

    //Word Constants
     const var wdGoToPage = 1;
    const var wdStory = 6;
     const var wdExtend = 1;
     const var wdCharacter = 1;

     //Show WordApp
     WordApp.ShowMe();

    //Load Base Document
     BaseDoc = WordApp.Documents.Open(Filename);
     BaseDoc.Repaginate();

    //Loop through pages
   intNumberOfPages = BaseDoc.BuiltInDocumentProperties("Number of Pages").value;
     intNumberOfChars = BaseDoc.BuiltInDocumentProperties("Number of Characters").value;

     for (intPage = 1; intPage <= intNumberOfPages; intPage++) {
         if (intPage == intNumberOfPages) {
             WordApp.Selection.EndKey(wdStory);         }
         else {
            WordApp.Selection.GoTo(wdGoToPage, 2);
            Application.DoEvents();

             WordApp.Selection.MoveLeft(Unit = wdCharacter, Count = 1);
         }

       Application.DoEvents();

         WordApp.Selection.HomeKey(wdStory, wdExtend);
        Application.DoEvents();
                 WordApp.Selection.Copy();
         Application.DoEvents();        
        //Create New Document
        DestDoc = WordApp.Documents.Add;
        DestDoc.Activate();
        WordApp.Selection.Paste();
        DestDoc.SaveAs(NewFileName + intPage.ToString + ".doc");
        DestDoc.Close();
        DestDoc = null;

         WordApp.Selection.GoTo(wdGoToPage, 2);
         Application.DoEvents();
                 WordApp.Selection.HomeKey(wdStory, wdExtend);
        Application.DoEvents();

        WordApp.Selection.Delete();
        Application.DoEvents();
    }

     BaseDoc.Close(false);
     BaseDoc = null;

    WordApp.Quit();
     WordApp = null; 
```

# magento - Magento：类别产品设计更新不适用于搜索结果产品

> ID：14144603
> 
> 赞同：2
> 
> 时间：2013-01-03T18:07:09.687
> 
> 标签：magento, magento-1.7

我正在使用适用于特定类别下所有产品的设计更新 XML。当从这些类别中浏览到这些产品时，更新会成功应用于这些产品，但在从搜索结果中打开这些产品时不会。从搜索结果打开时，如何使设计更新影响这些产品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:59:02.050

您需要添加一个布局句柄，您可以为这些产品中的每一个“抓取”它，并通过布局 xml 文件修改布局。

这个过程的关键在于`initProductLayout`方法`Mage_Catalog_Helper_Product_View`。此方法是根据产品模型添加自定义布局句柄的地方。您可以从控制器中获取布局更新对象并`addHandle()`使用字符串调用它以添加该句柄。因此，您需要重写此方法并执行以下操作：

```
$update = $controller->getLayout()->getUpdate();
foreach ($product->getCategoryIds() as $categoryId) {
    $update->addHandle('PRODUCT_IN_CATEGORY_' . $categoryId);
} 
```

现在，在一个布局 xml 文件中，您可以针对`<PRODUCT_IN_CATEGORY_##>`您的类别 ID 的句柄，并且您在此处放置的任何布局更新都将应用于产品视图页面，无论它是如何访问的。

根据安装的具体情况，使用其他类别标识符（如名称或 URL 键）而不是数字 ID 来键入句柄可能更有意义。为此，使用`$product->getCategoryCollection()`并遍历集合以获取您需要的内容。`$product->getAvailableinCategories()`如果您只想包含产品直接属于的类别 ID（而不是包含更高父级的类别），您可能还想使用。

# scala - 为什么使用默认参数调用方法时需要括号？

> ID：14144610
> 
> 赞同：5
> 
> 时间：2013-01-03T18:07:41.847
> 
> 标签：scala

我有一个带有默认参数的无副作用方法，我想在没有括号的情况下调用它，例如：

```
scala> def foo(x: Int = 1) = 42
foo: (x: Int)Int

scala> foo
<console>:9: error: missing arguments for method foo in object $iw;
follow this method with `_' if you want to treat it as a partially applied function
              foo
              ^

scala> foo()
res3: Int = 42 
```

这是故意的，还是只是暂时的限制？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T18:16:31.527

这可能是故意的，因此您不会让参数块消失在您身上：

```
def foo(x: Int = 2)(y: Int = 4) = x*y

foo(3)    // What does this mean??? 
```

# xml - mp3 文件的 XML 格式

> ID：14144611
> 
> 赞同：3
> 
> 时间：2013-01-03T18:07:44.517
> 
> 标签：xml, mp3

我正在开发一个桌面应用程序，它将扫描用户系统中的 mp3 文件并将他们的整个收藏发送到网站。我假设将此数据发送到服务器的最佳文件格式是 XML——尽管如果我错了，请纠正我。

有人可以评论以下示例 XML 文件的格式是否正常吗？谢谢！

```
<?xml version="1.0" encoding="utf-8"?>
<collection>
    <artist name="Michael Jackson">
        <track>Beat It</track>
        <track>Thriller</track>
    </artist>
    <artist name="The Beatles">
        <track>Hey Jude</track>
        <track>Yellow Submarine</track>
    </artist>
    <artist name="Eminem">
        <track>Lose Yourself</track>
        <track>Without Me</track>
    </artist>
</collection> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T10:40:40.430

> XML 是一种合适的格式吗？

是的，但是如果服务器理解 Json，那将是一个更好的选择。XML 只是意味着更多的决定（我应该让它成为一个节点、一个标签还是一个属性......惊喜！没有正确的答案）和不必要的编码（你真的想使用 UTF8 以外的任何东西来存储数据）和版本标签（Json 很简单，以至于我们多年来一直使用相同的版本）。

> 文件看起来好吗？

好吧，它看起来结构良好，因为有一个父标签包含您的所有数据，并且您记住了版本/编码声明。

在设计方面，我会建议一些更具体的东西，你应该给 echo 文件一个唯一的 id，或者包含文件的本地路径。您应该这样做的原因是大多数库至少包含两首具有相同名称和艺术家的歌曲。有时这可能是重复的，但有时它可能是有意义的——比如现场版本和工作室版本。

如果您需要研究 XML 音乐库，您总是可以从现有的音乐应用程序中查看 XML 文件，例如 iTunes 库文件（没有比这更全面的文件）或更理智的东西，例如 Songbird。

# java - Java 如何将字符串存储/表示为长字符串。然后从 long 到 String

> ID：14144612
> 
> 赞同：2
> 
> 时间：2013-01-03T18:07:44.923
> 
> 标签：java, bit-manipulation

您将如何将字符串存储/表示为长字符串？然后把它塞进一个 8 字节的数组中？

我尝试过/使用过的东西

```
 String eidString = "Awesome!";
    ByteBuffer buf = ByteBuffer.allocate(8);
    CharBuffer cbuf = buf.asCharBuffer();
    cbuf.put(eidString);

    byte[] eid = ByteBuffer.allocate(8).putLong(cbuf ??); 
```

尝试 2

```
 Long l = Long.valueOf("Awesome!");

    byte[] eid = ByteBuffer.allocate(8).putLong(l).array();

    long p = ByteBuffer.wrap(eid).getLong();

    System.out.println(p); 
```

尝试 3

```
String input = "hello long world";

byte[] bytes = input.getBytes();
LongBuffer tmpBuf = ByteBuffer.wrap(bytes).asLongBuffer();

long[] lArr = new long[tmpBuf.remaining()];
for (int i = 0; i < lArr.length; i++)
    lArr[i] = tmpBuf.get();

System.out.println(input);
System.out.println(Arrays.toString(lArr));
// store longs...

// ...load longs
long[] longs = { 7522537965568945263L, 7955362964116237412L };
byte[] inputBytes = new byte[longs.length * 8];
ByteBuffer bbuf = ByteBuffer.wrap(inputBytes);
for (long l : longs)
    bbuf.putLong(l);
System.out.println(new String(inputBytes)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T19:49:20.343

您需要将字符串编码为数字并将其反转。

*   你必须确定你需要的符号数量。例如，64 个符号需要 6 位。32 个符号需要 5 位。
*   这将确定字符串的最大长度。例如，对于 6 位 => 64/6 = 10 个符号，对于 8 位 => 64/8 = 8 个符号。例如，“hello long world”将不适合，除非您假设并非所有 az 都可用。

完成此操作后，您可以像解析 10 或 36 基数一样对符号进行编码。要变回字符串，您可以执行相反的操作（例如打印以 10 或 36 为基数的数字）

可能的字符/符号的范围是多少？（您需要包含一个终止符号，因为字符串的长度可能会有所不同）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T21:32:08.123

如果您接受以下有限字符集：

```
 a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,
 A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,
 0,1,2,3,4,5,6,7,8,9, , <-- space character 
```

那么您的简化字母表中将有 63 个符号***`R`***。每个符号都可以映射到 6 位表示（64 位组合的唯一组合）。有一个隐含的第 64 个符号，它是用于标记字符串终止的空符号，应该用 表示`0x00`。这给我们留下了一个***`R`***映射到 6 位的字母表作为双射。

A`long`有 64 位信息。因为`64/6 = 10`，这意味着我们可以***`R`***在 Java`long`变量中存储一个长度最多为 10 个字符的字符串。

值得注意的是，即使***`R`***是简化的字母表并且我们的字符串长度限制为 10，我们仍然可以表达有意义的英语短语，将它们转换为 a `long`，然后再返回！

**Java 代码（64 位映射）：**

```
public static long stringToLong(String s) {
  if(s.length() >10) { throw new IllegalArgumentException("String is too long: "+s); }
  long out = 0L;
  for(int i=0; i<s.length(); ++i) {
    long m = reducedMapping(s.codePointAt(i));
    if (m==-1) { throw new IllegalArgumentException("Unmapped Character in String: "+s); }
    m <<= ((9-i)*6)+4;
    out |= m;
  }
  return out;
}

public static String longToString(long l) {
  String out = "";
  long m = 0xFC00000000000000L;
  for(int i=0; i<10; ++i,m>>>=6) {
    int x =(int)( (l&m) >>> (((9-i)*6)+4));
    if(x==0) { break; }
    out += mapping[x];
  }
  return out;
}

public static long reducedMapping(int x) {
  long out=-1;
       if(x >= 97 && x <= 122) { out = (long)(x-96); } //  'a' =>  1 : 0x01
  else if(x >= 65 && x <=  90) { out = (long)(x-37); } //  'A' => 27 : 0x1B
  else if(x >= 48 && x <=  57) { out = (long)(x-+5); } //  '0' => 53 : 0x35
  else if(x == 32 )            { out = 63L;          } //  ' ' => 63 : 0x3F
  return out;
}
public static char[] mapping = {
'\n', //<-- unused/empty character
'a','b','c','d','e','f','g','h','i','j','k','l','m',
'n','o','p','q','r','s','t','u','v','w','x','y','z',
'A','B','C','D','E','F','G','H','I','J','K','L','M',
'N','O','P','Q','R','S','T','U','V','W','X','Y','Z',
'0','1','2','3','4','5','6','7','8','9',' '
}; 
```

**Java 代码（32 位映射）：**

```
public static long stringToLong32(String s) {
      if(s.length() >12) { throw new IllegalArgumentException("String is too long: "+s); }
      long out = 0L;
      for(int i=0; i<s.length(); ++i) {
        long m = reducedMapping32(s.codePointAt(i));
        if (m==-1) { throw new IllegalArgumentException("Unmapped Character in String: "+s); }
        m <<= ((11-i)*5)+4;
        out |= m;
      }
      return out;
    }

public static String longToString32(long l) {
      String out = "";
      long m = 0xF800000000000000L;
      for(int i=0; i<12; ++i,m>>>=5) {
        int x =(int)( (l&m) >>> (((11-i)*5)+4));
        if(x==0) { break; }
        out += mapping32[x];
      }
      return out;
    }

public static long reducedMapping32(int x) {
      long out=-1;
           if(x >= 97 && x <= 122) { out = (long)(x-96); } //  'a' =>  1 : 0x01
      else if(x >= 65 && x <=  90) { out = (long)(x-64); } //  'A' =>  1 : 0x01
      else if(x >= 32 && x <= 34)  { out = (long)(x-5);  } //  ' ','!','"' => 27,28,29
      else if(x == 44 )            { out = 30L;          } //  ',' => 30 : 0x1E
      else if(x == 46 )            { out = 31L;          } //  '.' => 31 : 0x1F
      return out;
    }
public static char[] mapping32 = {
    '\n', //<-- unused/empty character
    'a','b','c','d','e','f','g','h','i','j','k','l','m',
    'n','o','p','q','r','s','t','u','v','w','x','y','z',
    ' ','!','"',',','.' 
    };
} 
```

* * *

* * *

**编辑：**

使用此类进行更通用的转换。它允许`Strings`任何*非空*字符集唯一地映射到 a`long`并再次转换回原始字符`String`。只需通过构造函数定义任何字符集 ( )，然后使用生成的对象使用&`char[]`来回转换。`str2long``long2str`

**Java`StringAndLongConverter`类：**

```
import java.util.Arrays;
import java.util.regex.Pattern;

public class StringAndLongConveter {

  /* .,.,.,.,.,.,.,.,.,.,.,.,.,.,.,.,., */
  /*   String <--> long ID Conversion   */
  /* `'`'`'`'`'`'`'`'`'`'`'`'`'`'`'`'`' */

  /* --<[ Class Members ]>-- */
  // Don't re-arrange, order-dependent initializations

  private final char[]  CHAR_MAP;
  public  final int     NUM_ACTUAL_CHARS;
  public  final int     NUM_MAPPED_CHARS;
  public  final int     BIT_COUNT;
  public  final int     MAX_NUM_CHARS;
  public  final long    ROLLING_MASK;
  public  final long    FORMAT_MASK;
  public  final long    MIN_VALUE;
  public  final long    MAX_VALUE;
  public  final Pattern REGEX_CHAR_VALIDATOR;

  public StringAndLongConveter(char[] chars) {
    if(chars == null  ) { throw new IllegalArgumentException("Cannot Pass in null reference"); }
    if(chars.length==0) { throw new IllegalArgumentException("Cannot Pass in empty set"     ); }
    CHAR_MAP             = setCharMap(chars);
    NUM_ACTUAL_CHARS     = CHAR_MAP.length;
    NUM_MAPPED_CHARS     = NUM_ACTUAL_CHARS+1;
    BIT_COUNT            = calcMinBitsNeeded();
    MAX_NUM_CHARS        = calcMaxPossibleChars();
    ROLLING_MASK         = calcRollingMask();
    FORMAT_MASK          = calcFormatMask();
    MIN_VALUE            = calcIDMinVal();
    MAX_VALUE            = calcIDMaxVal();
    REGEX_CHAR_VALIDATOR = createRegExValidator();
  }

  /* --<[ Dynamic Initialization Calculation Helper Methods ]>-- */

  //Remove duplicates
  private final char[] setCharMap(final char[] chars) {
    char[] tmp = new char[chars.length];    
    int dupes = 0;
    for(int i=0; i<chars.length; ++i) {
      boolean dupeFound = false;
      for(int j=0; !dupeFound && j<i; ++j) {
        if(chars[i]==chars[j]) {
          ++dupes;
          dupeFound = true;   
        }
      }
      if(!dupeFound) { tmp[i-dupes] = chars[i]; }
    }
    char[] out = new char[chars.length-dupes];
    if(dupes==0) { out = chars; }
    else {
      for(int i=0; i<out.length; ++i) out[i] = tmp[i];
    }
    return out;
  } 
  // calculate minimum bits necessary to encode characters uniquely
  private final int calcMinBitsNeeded() {
    if(NUM_MAPPED_CHARS==0) { return 0; }
    int val,tmp,log;
    val = NUM_MAPPED_CHARS;
    tmp = Integer.highestOneBit(val); // returns only the highest set bit
    tmp = tmp | (tmp-1);              // propagate left bits
    log = Integer.bitCount(tmp);      // count bits (logarithm base 2)
    return ((val&(val-1))==0) ? log-1 : log;
    //return one less then bit count if even power of two
  }
  //Calculate maximum number of characters that can be encoded in long
  private final int calcMaxPossibleChars() {
    return Long.SIZE/BIT_COUNT;
  }
  //Calculate rolling mask for str <--> long conversion loops
  private final long calcRollingMask() {
    long   mask = 0x0000000000000001L;
    for(int i=1; i<BIT_COUNT;     ++i) { mask  |= mask << 1; }
    for(int i=1; i<MAX_NUM_CHARS; ++i) { mask <<= BIT_COUNT; }
    return mask;
  }
  //Calculate format mask for long input format validation
  private final long calcFormatMask() {
    //propagate lest significant set bit in rolling mask & negate resulting value
    return ~(ROLLING_MASK | (ROLLING_MASK-1));
  }
  //Calculate min value of long encoding
  //doubles as format specification for unused bits
  private final long calcIDMinVal() {
    return 0xAAAAAAAAAAAAAAAAL & FORMAT_MASK;
  }
  //Calculate max value of long encoding
  private final long calcIDMaxVal(){
    char   maxChar    = CHAR_MAP[CHAR_MAP.length-1];
    char[] maxCharArr = new char[MAX_NUM_CHARS];
    Arrays.fill(maxCharArr, maxChar);
    return str2long(new String(maxCharArr));
  }

  //Dynamically create RegEx validation string for invalid characters
  private final Pattern createRegExValidator() {
    return Pattern.compile("^["+Pattern.quote(new String(CHAR_MAP))+"]+?$");
  }

  /* --<[ Internal Helper Methods ]>-- */

  private static boolean ulongLessThen(long lh, long rh) {
    return (((lh ^ rh) >> 63) == 0) ? lh < rh : (0x8000000000000000L & lh)==0;
  }

  private long charMapping(final char c) {
    for(int i=0; i<CHAR_MAP.length; ++i)
      if(CHAR_MAP[i]==c)
        return i+1;
    return -1;
  }

  /* --<[ String <--> long Conversion Methods ]>-- */

  public  final String long2str(final long n) {
    String out = "";
    if (ulongLessThen(n,MIN_VALUE) || ulongLessThen(MAX_VALUE,n)) { throw new IllegalArgumentException("Long Outside of Formatted Range: "+Long.toHexString(n)); }
    if ((FORMAT_MASK & n) != MIN_VALUE)                           { throw new IllegalArgumentException("Improperly Formatted long"); }
    long m = ROLLING_MASK;
    for(int i=0; i<MAX_NUM_CHARS; ++i,m>>>=BIT_COUNT) {
      int x =(int)( (n&m) >>> ((MAX_NUM_CHARS-i-1)*BIT_COUNT));//10|10 0111
      if(x >= NUM_MAPPED_CHARS) { throw new IllegalArgumentException("Invalid Formatted bit mapping: \nlong="+Long.toHexString(n)+"\n masked="+Long.toHexString(n&m)+"\n i="+i+" x="+x); }
      if(x==0) { break; }
      out += CHAR_MAP[x-1];
    }
    return out;
  }

  public  final long str2long(String str) {
    if(str.length() > MAX_NUM_CHARS) { throw new IllegalArgumentException("String is too long: "+str); }
    long out = MIN_VALUE;
    for(int i=0; i<str.length(); ++i) {
      long m = charMapping(str.charAt(i));
      if (m==-1) { throw new IllegalArgumentException("Unmapped Character in String: "+str); }
      m <<= ((MAX_NUM_CHARS-i-1)*BIT_COUNT);
      out += m; // += is more destructive then |= allowing errors to be more readily detected 
    }
    return out;
  }

  public  final boolean isValidString(String str) {
    return str != null && !str.equals("")               //null or empty String
       &&  str.length() <= MAX_NUM_CHARS                //too long
       &&  REGEX_CHAR_VALIDATOR.matcher(str).matches(); //only valid chars in string
  }

  public final char[] getMappedChars() { return Arrays.copyOf(CHAR_MAP,CHAR_MAP.length); }

} 
```

玩得开心`String`编`long`解码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T18:43:22.003

要将 String 解析为 Long，可以使用 Long 包装类。

```
String myString = "1500000";
Long myLong = Long.parseLong(myString); 
```

要将其填充到一个 8 字节数组中...

```
long value = myLong.longValue();
byte[] bytes = new byte[8];
for (int i = 0; i < bytes.length; i++) {
   long mask = 0xFF00000000000000 >> (i * 8);
   bytes[i] = (byte) (value & mask);   
} 
```

这个例子是大端。

如果要将字符串*编码*为长字符串，则可以执行以下操作：

```
String myString = "HELLO";
long toLong = 0;
for (int i = 0; i < myString.length(); i++) {
   long c = (long) myString.charAt(i);
   int shift = (myString.length() - 1 - i) * 8;
   toLong += c << shift;
} 
```

这还没有经过测试。它可能有一些问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T19:58:08.973

你不需要这样做。String 有一个名为 getBytes() 的方法。它直接为您进行转换。使用参数“哈利路亚”调用以下方法

```
public static void strToLong(String s) throws IOException
{
    byte[] bArr = s.getBytes();
    for( byte b : bArr)
    {
        System.out.print(" " + b);
    }
    System.out.println();

    System.out.write(bArr);
} 
```

结果是

```
 72 97 108 108 101 108 117 106 97 104
Hallelujah 
```

# php - 在简单的添加功能中使用会话

> ID：14144617
> 
> 赞同：0
> 
> 时间：2013-01-03T18:08:04.060
> 
> 标签：php, mysql, session, shopping-cart

我目前正在 youtube 上关注 PHP 学院的 PHP 教程[，](http://www.youtube.com/watch?feature=fvwp&NR=1&v=QOKNQDClDg4)我们正在创建一个购物车。到目前为止，我们正在使用会话来说明添加的产品。当我尝试回显会话时，它会产生`Notice: Undefined index: cart_1 in C:\Program Files\wamp\www\Formula One\script\cart.php on line 28`错误。为什么会这样？在教程视频中，它会在下一页添加 1，然后再次单击它会转到 2。在他们的论坛上查看`ISSET`之前有一些建议可以使用。非常感谢。

```
 <?php
session_start();

include("../script/dbconnect.php");

$page1 = 'index.php'; //page reference

if (isset($_GET['add'])) { // cart add button
    $_SESSION['cart_'.$_GET['add']]+='1';
}

function products() {
    $get = mysql_query('SELECT id, name, description, price FROM products WHERE quantity > 0 ORDER BY id DESC');
    if (mysql_num_rows($get) ==0) {
    echo"There are no products to display!";
    }
else {
  while ($get_row = mysql_fetch_assoc($get)) {
        echo '<p>'.$get_row['name'].'<br />'.$get_row['description'].'<br />'.$get_row['price'].' <a href="cart.php?add='.$get_row['id'].'">Add Here</a></p>';
        }
    }
}

echo $_SESSION['cart_1'];

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:20:42.903

您应该在使用可能未定义的 var 之前添加检查

```
if(!isset($_SESSION['cart_'.$_GET['add']])) 
       $_SESSION['cart_'.$_GET['add']] = 0;

$_SESSION['cart_'.$_GET['add']]+='1'; 
```

和

```
if(isset($_SESSION['cart_1']))
    echo $_SESSION['cart_1'];
else
    echo "session cart_1 not defined"; 
```

在链接的视频中没有显示错误，因为作者的[error_reporting](http://php.net/manual/en/errorfunc.configuration.php#ini.error-reporting) ini php.ini 可能设置为`E_ALL & ~E_NOTICE`.

编辑：我现在看到了视频。请尝试找到另一个教程，其中：

*   error_reporting 设置为`E_ALL`
*   使用[pdo_*](http://php.net/manual/en/class.pdo.php)函数代替 mysql_*

# java - Java - 以编程方式从 SIGTERM 设置退出代码

> ID：14144619
> 
> 赞同：4
> 
> 时间：2013-01-03T18:08:04.560
> 
> 标签：java, shutdown

情况：我有一个保持活动状态的 shell 脚本，它会在应用程序关闭时重新启动它。`SIGTERM`但是，如果应用程序通过或`SIGINT`( `kill`,`Ctrl+C`等) （即关闭挂钩）关闭，我不希望它这样做。但是，我无法设置退出代码，因此在从关闭挂钩退出时与保持活动脚本通信，因为调用`exit`是非法的。

从 Javadocs 获取`exit`：

> 如果在虚拟机开始其关闭序列之后调用此方法，则如果正在运行关闭挂钩，则此方法将无限期阻塞。如果已经运行了关闭挂钩并且已启用退出终止，则此方法会在状态非零时使用给定的状态代码暂停虚拟机；否则，它会无限期地阻塞。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T18:13:12.607

如果进程已被信号终止，则`$?`变量[将设置为`128 + signal`](http://www.thegeekstuff.com/2010/03/bash-shell-exit-status/)：

```
bash$ sleep 3;echo $?
0

bash$ sleep 3;echo $?
^C
130 
```

这里，`130`是`128 + SIGINT`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:15:56.377

在变量中获取进程的 PID 并使用`wait`内置函数：如果进程已被信号终止，则返回码`wait`将为 128 + 信号编号。

```
#
# Note: output from shell trimmed
#
# Launch cat in the background, capture the PID
$ cat & PIDTOCHECK=$!
$ echo $PIDTOCHECK
27764
#
# Call wait a first time: the program is halted waiting for input (SIGTTIN)
#
$ wait $PIDTOCHECK ; echo $?
149
#
# Now kill cat, and call wait again
#
$ kill %1
$ wait $PIDTOCHECK ; echo $?
143 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-30T08:06:02.430

这就是我所做的：

```
Runtime.getRuntime().halt(0); 
```

请注意，这将立即退出程序，因此您需要在最后一个关闭挂钩完成后执行此操作。

# html - Chrome 中的 Shockwave-flash 会破坏页面的背景

> ID：14144622
> 
> 赞同：0
> 
> 时间：2013-01-03T18:08:13.167
> 
> 标签：html, flash, google-chrome

我注意到我网站的行为最近在 Chrome 中发生了变化。它来自此处显示的一段代码。使用该代码，页面工作正常，一切似乎都很好（flash 横幅也可以）。但是，当我滚动页面时，我注意到背景是白色的（页面最初加载时没有显示的所有内容）。就像背景没有从原始显示的页面视线中加载一样。如果我删除强调的那段代码，则横幅不会加载动画，但背景会正确加载。

是什么阻止我页面的背景正确加载？请注意，这是我整个网站上唯一的 Flash 代码/对象。

```
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="994" height="250"
                            id="art-flash-object">
                            <param name="movie" value="images/container.swf" />
                            <param name="quality" value="high" />
                            <param name="scale" value="default" />
                            <param name="wmode" value="transparent" />
                            <param name="flashvars" value="color1=0xFFFFFF&amp;alpha1=.50&amp;framerate1=24&amp;loop=true&amp;wmode=transparent&amp;clip=../../Content/images/flash.swf&amp;radius=5&amp;clipx=-3&amp;clipy=0&amp;initalclipw=1000&amp;initalcliph=250&amp;clipw=1000&amp;cliph=250&amp;width=994&amp;height=250&amp;textblock_width=0&amp;textblock_align=no&amp;hasTopCorners=true&amp;hasBottomCorners=true" />
                            <param name="swfliveconnect" value="true" /> 
```

### 此处的 Shockwave 代码会导致错误

```
 <object type="application/x-shockwave-flash" data="../../Content/Images/container.swf"
                                width="994" height="250">
                                <param name="quality" value="high" />
                                <param name="scale" value="default" />
                                <param name="wmode" value="transparent" />
                                <param name="flashvars" value="color1=0xFFFFFF&amp;alpha1=.50&amp;framerate1=24&amp;loop=true&amp;wmode=transparent&amp;clip=../../Content/images/flash.swf&amp;radius=5&amp;clipx=-3&amp;clipy=0&amp;initalclipw=1000&amp;initalcliph=250&amp;clipw=1000&amp;cliph=250&amp;width=994&amp;height=250&amp;textblock_width=0&amp;textblock_align=no&amp;hasTopCorners=true&amp;hasBottomCorners=true" />
                                <param name="swfliveconnect" value="true" />
                                <div class="art-flash-alt">
                                    <a href="http://www.adobe.com/go/getflashplayer">
                                        <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif"
                                            alt="Get Adobe Flash player" />
                                    </a>
                                </div>
                            </object> 
```

### 错误代码结束

```
</object> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:26:22.447

我不知道这是否是问题的原因，但在第一段代码中没有`</object>`结束标记。

此外，我遇到了一些相对路径的闪存加载问题（就像你对`value="images/container.swf" />`and所做的那样`data="../../Content/Images/container.swf"`）。从来不知道那里究竟是什么问题，但尝试从您的 .html 文件所在的同一文件夹中加载 Flash 文件。

我自己有时会使用 Flash 生成的 html 代码（在 Publish.. 下），因为有时这似乎是正确显示 Flash 的唯一有效代码。

Ps 我不明白这两个`<object>`标签及其内容到底是怎么回事，你是同时使用它们，分别使用，还是......？

# openam - 获取 OpenAM 中所有领域的列表

> ID：14144623
> 
> 赞同：0
> 
> 时间：2013-01-03T18:08:15.533
> 
> 标签：openam

如何使用 OpenAM API 调用获取具有名称和描述的所有领域的列表？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-06T22:49:11.310

如果您使用的是 ClientSDK，那么您可以在此处查看示例实现，例如：http: [//sources.forgerock.org/browse/openam/trunk/openam/openam-cli/openam-cli-impl/src/main/java /com/sun/identity/cli/realm/SearchRealms.java?hb=true](http://sources.forgerock.org/browse/openam/trunk/openam/openam-cli/openam-cli-impl/src/main/java/com/sun/identity/cli/realm/SearchRealms.java?hb=true)

# mysql - 无法以新创建的 MySQL 用户身份登录

> ID：14144625
> 
> 赞同：0
> 
> 时间：2013-01-03T18:08:26.377
> 
> 标签：mysql, sql, phpmyadmin

我正在为客户开发一个项目，我需要创建一个具有特定访问权限的新用户/密码，而不是使用我通常的“root”SQL 密码。我查找了如何做到这一点，发现我应该使用以下内容：

```
CREATE USER 'AppSrv'@'%' IDENTIFIED BY 'some_pass';
GRANT ALL PRIVILEGES ON some_db.* TO 'AppSrv'@'%' WITH GRANT OPTION; 
```

当我运行时，`select * from mysql.user;`我可以看到用户已添加到表中，但是在使用 PDO 或 PHPMyAdmin 时，我收到一条错误消息：`Access denied for user 'AppSrv'@'localhost'`

我过去创建用户没有问题，但不知道为什么它现在不起作用。我也尝试重新启动 SQL 服务器，但无济于事。

跑步：

> Linux 版本 3.2.0-24-virtual (buildd@crested) (gcc 版本 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5))
> MySQL v5.5.28-0ubuntu0.12.04.3 - (Ubuntu)

为我的 SQL Server 创建新用户的可能解决方法是什么？

**编辑**

我也尝试过使用 PHPMyAdmin 创建用户，即使在尝试登录时也失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:10:19.180

使用@'localhost' 创建帐户：

```
CREATE USER 'AppSrv'@'localhost' IDENTIFIED BY 'some_pass';
GRANT ALL PRIVILEGES ON some_db.* TO 'AppSrv'@'localhost' WITH GRANT OPTION; 
```

否则，由 mysql_install_db 创建的 localhost 的匿名用户帐户将优先 - 请参阅 mysql doc[添加用户](https://dev.mysql.com/doc/refman/5.1/en/adding-users.html)或[拒绝访问](https://dev.mysql.com/doc/refman/5.1/en/access-denied.html)

# javascript - KineticJS：setFill 不起作用

> ID：14144630
> 
> 赞同：1
> 
> 时间：2013-01-03T18:08:51.140
> 
> 标签：javascript, kineticjs

这是它的要点：我有一个 getColor 方法和一个 setColor 方法。

1.  getColor 更新指向`color_obj`当前对象的全局指针。
2.  setColor 使用该指针来更改对象的颜色。

问题是，它只将其绘制为黑色。

这是小提琴：http: [//jsfiddle.net/EbvH7/3/](http://jsfiddle.net/EbvH7/3/)

和来源 - html：

```
<html>
<!--- Click the square box to get its color. 
    Then change the color and hit set.
    For some reason it draws the color black only....   -->

<head>
<script src="http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/v4.2.0/kinetic-v4.2.0.min.js"></script>
<script src="http://jscolor.com/jscolor/jscolor.js"></script>

<script>
var stage;                              //canvas
var layer_frame = new Kinetic.Layer();  //Blue frame holder
var color_obj;     //global pointer to object to be colored. 

function getColor(obj) {
    color_obj = obj;    //set global pointer

    var fill = '"'+color_obj.getFill()+'"';
    var name = color_obj.getName();

    document.getElementById('color_pick').color.fromString(fill);
    document.getElementById('colorname_obj').innerHTML = name;

}

function setColor(){
    //Use global pointer
    var fill = document.getElementById('color_pick').color;
    var name = document.getElementById('colorname_obj').innerHTML;

    color_obj.setFill('"'+fill+'"'); 
    color_obj.setName(name);

    stage.draw()
}    

function setup() {
    stage = new Kinetic.Stage({
        container: 'container',
        width: 400, height: 400
    });

    var frame_area = new Kinetic.Rect({
        x: 100, y: 100, opacity: 1,
        width: 30, height: 30,
        fill: 'a7cccb', stroke: 'black', strokeWidth: 2,
        name: 'blue_box'
    });

    frame_area.on('click', function() {
        getColor(this)
    });

    // add the layer to the stage
    layer_frame.add(frame_area);
    stage.add(layer_frame);

    stage.draw();    

};

</script>
</head>

<body onload="setup()">
<!--Canvas--->
<div id="container"></div>

<!--Panels-->
<div id="panel_left">
<!--- C O L O R   B O X -->
    <div id="colorbox">
        <h7 id="colorname_obj" >None</h7><br/>
        <input class="color" id="color_pick" style="width:50%" value="000000" >
        <input type="button" id="color_set" value="Set" onclick="setColor()" >
    </div>
</div>
</body>
</html>​ 
```

和CSS：

```
#panel_left {
   position:absolute;
   top:30px; left:30px;
   width:100px; background-color:red;
}

#container {
    position:absolute;
    top:30px; left:130px;
    background-color:blue;
    width:50%; height:50%;    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:22:50.570

此外，4.3.0 中的新功能

Kinetic.Text 形状的重大变化。矩形组件已被移除以简化 API。textFill 现在是填充，textStroke 现在是描边，textStrokeWidth 现在是 strokeWidth，textShadow 现在是阴影。如果要在文本后面有一个矩形，则需要使用 Kinetic.Rect 形状对文本进行分组。文本 fontSize 单位现在以像素为单位（以前以点为单位）。lineHeight attr 现在默认为 1（过去默认为 1.2）。

# c# - Convert.ToDateTime“字符串未被识别为有效日期时间”错误

> ID：14144632
> 
> 赞同：-2
> 
> 时间：2013-01-03T18:08:55.690
> 
> 标签：c#, string, parsing, datetime

我试图从日期时间变量中获取日期部分。

阅读[currentculture 的文档](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.currentculture%28v=vs.100%29.aspx)，我尝试了：

```
currentThread.CurrentCulture = new CultureInfo(currentThread.CurrentCulture.Name);
currentThread.CurrentUICulture = new CultureInfo(currentThread.CurrentCulture.Name);

Convert.ToDateTime(myDT.ToShortDateString(), System.Threading.Thread.CurrentThread.CurrentUICulture); 
```

但是我得到了一个“..notrecognized as a valid datetime string”异常。

我的问题是，如果我要设置特定的当前文化（在本例中为“es-MX”），Parse() 方法怎么可能失败？？？我错过了什么？

我可以通过执行 myDT.ToString("yyyy-MM-dd") 来解决问题。但我想了解这种行为。

[看到这张图片](http://www.flickr.com/photos/luferogoonline/8342329081/)，是我的观察窗口的截图。同样，我的问题不是关于如何获取日期部分，而是关于为什么我会得到例外。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:15:06.927

> 我试图从日期时间变量中获取日期部分。

```
myDateTime.Date 
```

正如[@Rune FS 评论](https://stackoverflow.com/questions/14144632/convert-todatetime-string-was-not-recognized-as-a-valid-datetime-error#comment19588306_14144632)的那样。

该属性是在`DateTime`结构上定义的 - 绝对不需要转换为字符串并返回。

# r - 将行重新整形为列，有两个条件（a ~ b，per c，per d）

> ID：14144634
> 
> 赞同：1
> 
> 时间：2013-01-03T18:09:06.900
> 
> 标签：r, reshape

我有一个像这样的数据框：

```
item   price source   day
book   5     shop     2012-01-01
car    100   shop     2012-01-01
desk   10    shop     2012-01-01
book   4     internet 2012-01-01
car    99    internet 2012-01-01
desk   9     internet 2012-01-01
book   6     shop     2012-01-02
car    101   shop     2012-01-02
desk   11    shop     2012-01-02
book   4     internet 2012-01-02
car    100   internet 2012-01-02
desk   10    internet 2012-01-02 
```

我希望每天每件商品的每个价格，例如：

```
item price.shop price.internet day
book 5          4              2012-01-01
car  100        99             2012-01-01
desk 10         9              2012-01-01
book 6          5              2012-01-02
car  101        100            2012-01-02
desk 11         10             2012-01-02 
```

我一直在努力

`melt`'ing 然后

```
cast(df, item ~ source + variable) 
```

却得不到想要的结果。我认为问题在于我本质上有两个“每件事”条件（每`day`，每`source`），所以没有正确的等式。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T18:15:54.073

不是 plyr.reshape2 答案，而是使用 base:reshape()：

```
> reshape(dat, idvar=c("item", "day"),  timevar="source", direction="wide")
  item        day price.shop price.internet
1 book 2012-01-01          5              4
2  car 2012-01-01        100             99
3 desk 2012-01-01         10              9
7 book 2012-01-02          6              4
8  car 2012-01-02        101            100
9 desk 2012-01-02         11             10 
```

我想人们也可以尝试一种`merge(subset_shop, subset_internet, 1:2, all=TRUE)`策略。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T18:13:32.257

可能是这样的：

```
dat <- read.table(text = "item   price source   day
book   5     shop     2012-01-01
car    100   shop     2012-01-01
desk   10    shop     2012-01-01
book   4     internet 2012-01-01
car    99    internet 2012-01-01
desk   9     internet 2012-01-01
book   6     shop     2012-01-02
car    101   shop     2012-01-02
desk   11    shop     2012-01-02
book   4     internet 2012-01-02
car    100   internet 2012-01-02
desk   10    internet 2012-01-02",header = TRUE,sep = "")

> library(reshape2)
> dcast(dat,item + day ~ source,fun.aggregate = sum,value.var = "price")

  item        day internet shop
1 book 2012-01-01        4    5
2 book 2012-01-02        4    6
3  car 2012-01-01       99  100
4  car 2012-01-02      100  101
5 desk 2012-01-01        9   10
6 desk 2012-01-02       10   11 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T18:26:04.723

一种可能出人意料的方法（因为 Joran 和 DWin 很快就提出了重塑替代方案）：`ftable`并`xtabs`一起工作。假设一个`data.frame`名为“dat”：

```
ftable(xtabs(price ~ item + day + source, dat))
#                 source internet shop
# item day                            
# book 2012-01-01               4    5
#      2012-01-02               4    6
# car  2012-01-01              99  100
#      2012-01-02             100  101
# desk 2012-01-01               9   10
#      2012-01-02              10   11 
```

# php - android中的json错误

> ID：14144635
> 
> 赞同：0
> 
> 时间：2013-01-03T18:09:07.390
> 
> 标签：php, android, json

我有一个 android 移动应用程序，它将使用一个名为 " `login.php`" 的 php 文件连接到包含用户名和密码的数据库，php 文件的结果是`JSON`格式，这就是它`{"username":"mounzer","password":"yaghi"}` 的外观：至于移动应用程序，这是代码 ：

```
public void onClick(View v) { 
    // TODO Auto-generated method stub    
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);         
    httpclient = new DefaultHttpClient();
    // defaultHttpClient
    httpclient = new DefaultHttpClient();
    httppost = new HttpPost("http://192.168.1.38/mobileappd/Login.php");

    username=user.getText().toString();
    password=pass.getText().toString();

    try {
        nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("username",username));
        nameValuePairs.add(new BasicNameValuePair("password",username));

        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        response = httpclient.execute(httppost);

        if(response.getStatusLine().getStatusCode()==200) {
            entity=response.getEntity();    

            if(entity !=null) {
                InputStream instream=entity.getContent();
                JSONObject jsonResponse = new JSONObject(convertStreamToString(instream));
                String retUser=jsonResponse.getString("username");
                String retPass=jsonResponse.getString("password");

                if(username.equals(retUser) && password.equals(retPass)) {

                    SharedPreferences sp=getSharedPreferences("logindetails",0);
                    SharedPreferences.Editor spedit=sp.edit();
                    spedit.putString("user",username);
                    spedit.putString("pass", password);
                    spedit.commit();

                    Toast.makeText(getBaseContext(), "Succesfully connected",Toast.LENGTH_LONG).show();
                }
            }
        }
    } catch(Exception e) {  
        e.printStackTrace();
        Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_LONG).show();
    }
} 
```

好吧，它给了我以下错误：“ `org.json.JSONException:value DOCTYPE of type java.lang.string cannot be converted to JSONobject`”有人可以告诉我代码中的错误在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:15:06.880

**这里错误消息说**：

```
Value `<!DOCTYPE` of type java.lang.String cannot be converted to JSONObject 
```

如果是`<!DOCTYPE`那么不是`{"username":….`

您需要准确了解正在发出的请求以及服务器返回 HTML 文档的原因。

检查您的服务器日志。它可能是一个错误文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:15:36.107

检查从您正在调用的链接返回的结果，我认为它正在返回 html 页面，因为它说“值 DOCTYPE 无法转换为 JSONOBject”。因此，请检查您通过调用该链接得到的响应

# javascript - 在 Windows 8 应用程序中显示和隐藏项目

> ID：14144636
> 
> 赞同：0
> 
> 时间：2013-01-03T18:09:14.447
> 
> 标签：javascript, windows-8, winjs

我正在编写我的第一个 Windows 8 应用程序，但我已经被卡住了。

我想要做的是显示一个 html/winjs 元素，这取决于在列表视图中单击了哪个索引。我编写的当前代码在某种程度上有效。它将显示第一个元素（albumListView），但之后不会显示其他项目。我已经阅读了 WinJS 文档，但我仍然无法弄清楚我做错了什么。

我究竟做错了什么？有没有更简单的方法来做我想要实现的目标？

这是我写的代码：

我的html：

```
<div id="albumListView" class="hidden" data-win-control="WinJS.UI.ListView" data-win-options="{itemTemplate:select('#albumTemplate'), layout:{type:WinJS.UI.GridLayout}, selectionMode:'none'}"></div>
<div id="songsListView" class="hidden" data-win-control="WinJS.UI.ListView" data-win-options="{itemTemplate:select('#songsTemplate'), layout:{type:WinJS.UI.ListLayout}}"></div> 
```

我的 CSS：

```
.hidden {
    display:none;
} 
```

我的 JS：

```
function hidePanelViewItems() { //hide all panel items

    var items = [albumListView, songsListView];

    for (var i = 0; i < items.length; i++) {
        WinJS.Utilities.addClass(items[i], "hidden");
    }

    return true;
}

function showItem(item) { //show a single item in the panel
    hidePanelViewItems();
    WinJS.Utilities.toggleClass(item, "hidden");

    return true;
}

args.setPromise(WinJS.UI.processAll().done(function () {
    //hide all panel listviews
    hidePanelViewItems();
    //show the album view as a default
    showItem(albumListView);

    //deal with menu item clicks
    menuListView.addEventListener("iteminvoked", function (eventInfo) {
        switch (eventInfo.detail.itemIndex)
        {
            case 0:
                showItem(albumListView);
                break;
            case 1:
                showItem(songsListView);
                break;
        }
    });
})) 
```

提前感谢您的任何回复:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-11T04:19:06.023

我遇到了类似的事情。如果将列表视图的样式设置为 display:none，则需要调用 forceLayout() 使其再次可见。[http://msdn.microsoft.com/en-us/library/windows/apps/hh758352.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh758352.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T19:24:04.303

解决了！经过数小时的修改这段代码，我现在发现它一直都很好！问题是数据实际上并没有绑定到我的列表视图，因为它们被隐藏了！

# wcf - 无法反序列化 WCF 发送的肥皂消息中的 CSLA 请求（C#）

> ID：14144639
> 
> 赞同：0
> 
> 时间：2013-01-03T18:09:20.383
> 
> 标签：wcf, deserialization, csla

我正在学习 WCF，所以如果我的术语在这里和那里不正确，我深表歉意。

我正在尝试反序列化使用 WCF 发送并由 Fiddler 捕获的肥皂消息，但我不断收到此错误消息：“根级别的数据无效。第 1 行，位置 1。”

使用以下代码设置 WCF 服务：

```
// Set up WcfProxy DataPortal service url
Csla.DataPortalClient.WcfProxy.DefaultUrl = appRootUrl + "WcfSilverlightPortal.svc";

// Set up WcfProxy Binding
System.ServiceModel.BasicHttpBinding largeBinding = new System.ServiceModel.BasicHttpBinding();
largeBinding.MaxReceivedMessageSize = 20000000;
largeBinding.MaxBufferSize = 20000000;
largeBinding.OpenTimeout = new TimeSpan(0, 10, 0);
largeBinding.ReceiveTimeout = new TimeSpan(0, 10, 0);
largeBinding.CloseTimeout = new TimeSpan(0, 10, 0);
largeBinding.SendTimeout = new TimeSpan(0, 10, 0);
largeBinding.Name = "BasicHttpBinding_IWcfPortal";
Csla.DataPortalClient.WcfProxy.DefaultBinding = largeBinding; 
```

Fiddler中捕获的soap消息如下：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
   <s:Body>
      <Fetch xmlns="http://ws.lhotka.net/WcfDataPortal">
         <request xmlns:d4p1="http://schemas.datacontract.org/2004/07/Csla.Server.Hosts.Silverlight" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
            <d4p1:ClientContext>QBhBcnJheU9mU2VyaWFsaXphdGlvbkluZm8IQWh0dHA6Ly9zY2hlbWFzLmRhdGFjb250cmFjdC5vcmcvMjAwNC8wNy9Dc2xhLlNlcmlhbGl6YXRpb24uTW9iaWxlCQFpKWh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlQBFTZXJpYWxpemF0aW9uSW5mb0AIQ2hpbGRyZW4JAWE5aHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS8yMDAzLzEwL1NlcmlhbGl6YXRpb24vQXJyYXlzAUALUmVmZXJlbmNlSWSDQAhUeXBlTmFtZZhlQ3NsYS5Db3JlLkNvbnRleHREaWN0aW9uYXJ5LCBDc2xhLCBWZXJzaW9uPTQuMy4xMy4wLCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPTkzYmU1ZmRjMDkzZTRjMzABQAZWYWx1ZXMJAWE5aHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS8yMDAzLzEwL1NlcmlhbGl6YXRpb24vQXJyYXlzAQEB</d4p1:ClientContext>
            <d4p1:ClientCulture>en-US</d4p1:ClientCulture>
            <d4p1:ClientUICulture>en-US</d4p1:ClientUICulture>
            <d4p1:CriteriaData i:nil="true" />
            <d4p1:GlobalContext>QBhBcnJheU9mU2VyaWFsaXphdGlvbkluZm8IQWh0dHA6Ly9zY2hlbWFzLmRhdGFjb250cmFjdC5vcmcvMjAwNC8wNy9Dc2xhLlNlcmlhbGl6YXRpb24uTW9iaWxlCQFpKWh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlQBFTZXJpYWxpemF0aW9uSW5mb0AIQ2hpbGRyZW4JAWE5aHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS8yMDAzLzEwL1NlcmlhbGl6YXRpb24vQXJyYXlzAUALUmVmZXJlbmNlSWSDQAhUeXBlTmFtZZhlQ3NsYS5Db3JlLkNvbnRleHREaWN0aW9uYXJ5LCBDc2xhLCBWZXJzaW9uPTQuMy4xMy4wLCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPTkzYmU1ZmRjMDkzZTRjMzABQAZWYWx1ZXMJAWE5aHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS8yMDAzLzEwL1NlcmlhbGl6YXRpb24vQXJyYXlzAQEB</d4p1:GlobalContext>
            <d4p1:Principal>QBhBcnJheU9mU2VyaWFsaXphdGlvbkluZm8IQWh0dHA6Ly9zY2hlbWFzLmRhdGFjb250cmFjdC5vcmcvMjAwNC8wNy9Dc2xhLlNlcmlhbGl6YXRpb24uTW9iaWxlCQFpKWh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlQBFTZXJpYWxpemF0aW9uSW5mb0AIQ2hpbGRyZW4JAWE5aHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS8yMDAzLzEwL1NlcmlhbGl6YXRpb24vQXJyYXlzAUALUmVmZXJlbmNlSWSDQAhUeXBlTmFtZZhwQ3NsYS5TZWN1cml0eS5VbmF1dGhlbnRpY2F0ZWRQcmluY2lwYWwsIENzbGEsIFZlcnNpb249NC4zLjEzLjAsIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49OTNiZTVmZGMwOTNlNGMzMAFABlZhbHVlcwkBYTlodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tLzIwMDMvMTAvU2VyaWFsaXphdGlvbi9BcnJheXNeM0tleVZhbHVlT2ZzdHJpbmdTZXJpYWxpemF0aW9uSW5mby5GaWVsZERhdGFPem9adkxybV4DS2V5mRZDc2xhUHJpbmNpcGFsLklkZW50aXR5XgVWYWx1ZUAMRW51bVR5cGVOYW1lLgNuaWyGAUAHSXNEaXJ0eYVABVZhbHVlLgR0eXBlmA5iOmJhc2U2NEJpbmFyeQkBYiBodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYaCNCUAYQXJyYXlPZlNlcmlhbGl6YXRpb25JbmZvCEFodHRwOi8vc2NoZW1hcy5kYXRhY29udHJhY3Qub3JnLzIwMDQvMDcvQ3NsYS5TZXJpYWxpemF0aW9uLk1vYmlsZQkBaSlodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZUARU2VyaWFsaXphdGlvbkluZm9ACENoaWxkcmVuCQFhOWh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vMjAwMy8xMC9TZXJpYWxpemF0aW9uL0FycmF5c14zS2V5VmFsdWVPZnN0cmluZ1NlcmlhbGl6YXRpb25JbmZvLkNoaWxkRGF0YU96b1p2THJtXgNLZXmZDV9maWVsZE1hbmFnZXJeBVZhbHVlQAdJc0RpcnR5hUALUmVmZXJlbmNlSWSJAgEBAUALUmVmZXJlbmNlSWSDQAhUeXBlTmFtZZhvQ3NsYS5TZWN1cml0eS5VbmF1dGhlbnRpY2F0ZWRJZGVudGl0eSwgQ3NsYSwgVmVyc2lvbj00LjMuMTMuMCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj05M2JlNWZkYzA5M2U0YzMwAUAGVmFsdWVzCQFhOWh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vMjAwMy8xMC9TZXJpYWxpemF0aW9uL0FycmF5cwEBQBFTZXJpYWxpemF0aW9uSW5mb0AIQ2hpbGRyZW4JAWE5aHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS8yMDAzLzEwL1NlcmlhbGl6YXRpb24vQXJyYXlzXjNLZXlWYWx1ZU9mc3RyaW5nU2VyaWFsaXphdGlvbkluZm8uQ2hpbGREYXRhT3pvWnZMcm1eA0tleZkFUm9sZXNeBVZhbHVlQAdJc0RpcnR5hUALUmVmZXJlbmNlSWSJAwEBAUALUmVmZXJlbmNlSWSJAkAIVHlwZU5hbWWYcUNzbGEuQ29yZS5GaWVsZE1hbmFnZXIuRmllbGREYXRhTWFuYWdlciwgQ3NsYSwgVmVyc2lvbj00LjMuMTMuMCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj05M2JlNWZkYzA5M2U0YzMwAUAGVmFsdWVzCQFhOWh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vMjAwMy8xMC9TZXJpYWxpemF0aW9uL0FycmF5c14zS2V5VmFsdWVPZnN0cmluZ1NlcmlhbGl6YXRpb25JbmZvLkZpZWxkRGF0YU96b1p2THJtXgNLZXmZE19idXNpbmVzc09iamVjdFR5cGVeBVZhbHVlQAxFbnVtVHlwZU5hbWUuA25pbIYBQAdJc0RpcnR5hUAFVmFsdWUuBHR5cGWYCGI6c3RyaW5nCQFiIGh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hmG9Dc2xhLlNlY3VyaXR5LlVuYXV0aGVudGljYXRlZElkZW50aXR5LCBDc2xhLCBWZXJzaW9uPTQuMy4xMy4wLCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPTkzYmU1ZmRjMDkzZTRjMzABAQFeM0tleVZhbHVlT2ZzdHJpbmdTZXJpYWxpemF0aW9uSW5mby5GaWVsZERhdGFPem9adkxybV4DS2V5mRJBdXRoZW50aWNhdGlvblR5cGVeBVZhbHVlQAxFbnVtVHlwZU5hbWUuA25pbIYBQAdJc0RpcnR5hUAFVmFsdWUuBHR5cGWYCGI6c3RyaW5nCQFiIGh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hAQEBXjNLZXlWYWx1ZU9mc3RyaW5nU2VyaWFsaXphdGlvbkluZm8uRmllbGREYXRhT3pvWnZMcm1eA0tleZkPSXNBdXRoZW50aWNhdGVkXgVWYWx1ZUAMRW51bVR5cGVOYW1lLgNuaWyGAUAHSXNEaXJ0eYVABVZhbHVlLgR0eXBlmAliOmJvb2xlYW4JAWIgaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWGFAQFeM0tleVZhbHVlT2ZzdHJpbmdTZXJpYWxpemF0aW9uSW5mby5GaWVsZERhdGFPem9adkxybV4DS2V5mQROYW1lXgVWYWx1ZUAMRW51bVR5cGVOYW1lLgNuaWyGAUAHSXNEaXJ0eYVABVZhbHVlLgR0eXBlmAhiOnN0cmluZwkBYiBodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYQEBAQEBQBFTZXJpYWxpemF0aW9uSW5mb0AIQ2hpbGRyZW4JAWE5aHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS8yMDAzLzEwL1NlcmlhbGl6YXRpb24vQXJyYXlzAUALUmVmZXJlbmNlSWSJA0AIVHlwZU5hbWWYvkNzbGEuQ29yZS5Nb2JpbGVMaXN0YDFbW1N5c3RlbS5TdHJpbmcsIG1zY29ybGliLCBWZXJzaW9uPTUuMC41LjAsIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49N2NlYzg1ZDdiZWE3Nzk4ZV1dLCBDc2xhLCBWZXJzaW9uPTQuMy4xMy4wLCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPTkzYmU1ZmRjMDkzZTRjMzABQAZWYWx1ZXMJAWE5aHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS8yMDAzLzEwL1NlcmlhbGl6YXRpb24vQXJyYXlzXjNLZXlWYWx1ZU9mc3RyaW5nU2VyaWFsaXphdGlvbkluZm8uRmllbGREYXRhT3pvWnZMcm1eA0tleZkFJGxpc3ReBVZhbHVlQAxFbnVtVHlwZU5hbWUuA25pbIYBQAdJc0RpcnR5hUAFVmFsdWUuBHR5cGWYDmI6YmFzZTY0QmluYXJ5CQFiIGh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hnoc8QXJyYXlPZnN0cmluZyB4bWxuczppPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSIgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vMjAwMy8xMC9TZXJpYWxpemF0aW9uL0FycmF5cyIgLz4BAQEBAZ8BAQEBAQEB</d4p1:Principal>
            <d4p1:TypeName>Competition.Domain.Entities.SchoolSummaryList, Competition.Domain.Csla, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</d4p1:TypeName>
         </request>
      </Fetch>
   </s:Body>
</s:Envelope> 
```

我正在尝试将其反序列化为 Csla.Server.Hosts.Silverlight.CriteriaRequest 类型的对象

这个类的代码如下所示：

```
//-----------------------------------------------------------------------
// <copyright file="CriteriaRequest.cs" company="Marimer LLC">
//     Copyright (c) Marimer LLC. All rights reserved.
//     Website: http://www.lhotka.net/cslanet/
// </copyright>
// <summary>Message sent to the Silverlight</summary>
//-----------------------------------------------------------------------
using System;
using System.Runtime.Serialization;
using System.Security.Principal;
using Csla.Core;

namespace Csla.Server.Hosts.Silverlight
{
  /// <summary>
  /// Message sent to the Silverlight
  /// WCF data portal.
  /// </summary>
  [DataContract]
  public class CriteriaRequest
  {
    /// <summary>
    /// Assembly qualified name of the 
    /// business object type to create.
    /// </summary>
    [DataMember]
    public string TypeName { get; set; }

    /// <summary>
    /// Serialized data for the criteria object.
    /// </summary>
    [DataMember]
    public byte[] CriteriaData { get; set; }

    /// <summary>
    /// Serialized data for the principal object.
    /// </summary>
    [DataMember]
    public byte[] Principal { get; set; }

    /// <summary>
    /// Serialized data for the global context object.
    /// </summary>
    [DataMember]
    public byte[] GlobalContext { get; set; }

    /// <summary>
    /// Serialized data for the client context object.
    /// </summary>
    [DataMember]
    public byte[] ClientContext { get; set; }

    /// <summary>
    /// Serialized client culture.
    /// </summary>
    /// <value>The client culture.</value>
    [DataMember]
    public string ClientCulture { get; set; }

    /// <summary>
    /// Serialized client UI culture.
    /// </summary>
    /// <value>The client UI culture.</value>
    [DataMember]
    public string ClientUICulture { get; set; }
  }
} 
```

我尝试从soap消息中获取三个xml元素'Body'、'Fetch'和'request'中的每一个，并将它们存储为一个名为'element'的XElement变量并运行以下代码：

```
DataContractSerializer dcs = new DataContractSerializer(typeof(CriteriaRequest));
MemoryStream ms = new MemoryStream(System.Text.Encoding.UTF8.GetBytes(element.Value));
ms.Seek(0, SeekOrigin.Begin);
XmlDictionaryReader reader = XmlDictionaryReader.CreateTextReader(ms, Encoding.UTF8, new XmlDictionaryReaderQuotas(), null);
CriteriaRequest fr = (CriteriaRequest)dcs.ReadObject(reader); 
```

在每种情况下，它都未能反序列化对象，我没有想法。

我想我已经提供了所有相关的信息，但如果还有什么可以帮助的，请告诉我，我会提供的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T06:42:01.617

您不能使用更简单的序列化程序来直接序列化 CSLA .NET 对象图。XmlSerializer、JsonSerializer 等序列化程序和各种 DataContractSerializer 变体不够复杂，无法完全克隆和对象图，因此 CSLA 不支持它们。

仅支持 BinaryFormatter、NetDataContractSerializer 和 MobileFormatter。

您可能会尝试将业务对象直接公开为服务接口。这是一个糟糕的架构选择，我永远不会选择支持或鼓励任何人这样做。您可能会发现[XML Services FAQ](http://www.lhotka.net/cslanet/faq/XmlServicesFaq.ashx)页面很有用。

# ios - 通话状态栏更改时查看调整大小

> ID：14144642
> 
> 赞同：4
> 
> 时间：2013-01-03T18:09:42.487
> 
> 标签：ios, resize, interface-builder, xib

我试图了解对视图调整大小的期望。

我目前让我的 iOS 应用程序使用动态视图大小。也就是说，当通话状态栏可见和不可见时，它们的布局都是正确的。

我遇到的问题是当这个状态栏发生变化，并且视图已经被绘制时，它仍然保持当前大小。如果栏隐藏，则视图太小。如果栏出现，则视图太大，顶部被隐藏。如果我使用底部的导航切换到新屏幕，一切都会正确绘制。问题仅出在栏改变大小时可见的屏幕上。

这里有一些图片说明正在发生的事情。这是我在正常启动后看到的，然后显示栏。

![正常启动](../Images/32afee11ba371b623bdb81813d286740.png) ![然后显示栏](../Images/564beb700534ca34d4a9a6ea2d1f5f69.png)

这就是我在启动时看到的显示栏然后它被隐藏了。

![显示栏启动](../Images/0fa4a53f88033213ed3b083539e9d2db.png) ![然后栏被隐藏](../Images/330fb5d6faaf9810484a684d61fb1944.png)

正确处理这些场景的期望是什么？IB中是否有一些应该被选择但不是的东西，或者我必须以编程方式做一些事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T06:50:53.157

我在 IB 的 uiwindow 上检查了“启动时全屏”，这解决了类似的问题。

# python - 将 Python (PyKinect) 骨架数据转换为点 (X,Y)

> ID：14144644
> 
> 赞同：1
> 
> 时间：2013-01-03T18:09:53.917
> 
> 标签：python, kinect, point, pykinect

这是一个非常简单的问题，但我是 Python 新手，我似乎无法完成它。

我想将 Python (PyKinect) 中的骨架数据坐标转换为点 (X,Y)。我知道类似的任务可以在 C#（使用`Microsoft.Kinect`库）中实现，如下面的代码：

```
var p = new Point[6];
Point shoulderRight = new Point(), shoulderLeft = new Point();

foreach (Joint j in data.Joints)
{
    switch (j.ID)
    {
        case JointID.HandLeft:
            p[0] = new Point(j.Position.X, j.Position.Y);

            // ... 
```

不过，在 Python（使用 PyKinect）中，我能够获取数据对象：

```
for index, data in enumerate(skeletons):
p2 = data.SkeletonPositions[JointId.wrist_left] #test left wrist joint data object
print ('p2', p2) 
```

输出是：

```
('p2', <x=-0.5478253364562988, y=-0.5376561880111694, z=1.7154035568237305, w=1.0>) 
```

但是，我似乎无法将其转换为`Point(X,Y)`格式。我需要为此使用 NumPy 或其他一些外部 Python 库吗？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:55:26.367

您可以使用`regex`来提取值，我不确定这是否是您正在寻找的，但试试这个：

```
import re

p2 = "<x=-0.5478253364562988, y=-0.5376561880111694, z=1.7154035568237305, w=1.0>"
p2 = re.findall("-?\d+.\d+",p2)
p2_xy = p2[0],p2[1]
print ("p2",p2_xy) 
```

输出：

```
('ps', ('-0.5478253364562988', '-0.5376561880111694')) 
```

或者，如果您想要更简洁的版本：

```
import re

p2 = "<x=-0.5478253364562988, y=-0.5376561880111694, z=1.7154035568237305, w=1.0>"
p2 = re.findall("-?\d+.\d+",p2)
print ("p2",p2[0],p2[1]) 
```

输出：

```
('p2', '-0.5478253364562988', '-0.5376561880111694') 
```

# java - Java VLCJ 画布和在透明背景上绘图

> ID：14144645
> 
> 赞同：1
> 
> 时间：2013-01-03T18:09:58.697
> 
> 标签：java, linux, windows, ffmpeg, vlcj

我花了一些时间研究是否可以在 Java 应用程序中绘制 VLCJ 电影。我发现了一些相互矛盾的建议，有些人说这是不可能的，有些参考文章已经转移到 oracle.com。

有人可以澄清是否可以绘制 java2d 图形，例如也具有透明背景的矩形/线条，以便在屏幕上显示形状时可以查看下面的视频流？

如果 vlcj 无法做到这一点，那么对于 linux 和 windows 兼容的媒体播放器，允许对正在播放的视频流进行注释的好选择是什么？请注意，我不必局限于 java，但我可以从为多个平台开发的绘图例程中重复使用的东西将是理想的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:07:58.973

是的，你可以做到。对于普通的硬件渲染视频播放器，您至少需要有 Java 6u10（最好是 7）并通过在 VLC 画布上覆盖一个透明的 JWindow 来实现这一点（向画布添加事件以检查更新并不难）位置/大小，然后相应地移动覆盖的窗口。）

不涉及使用覆盖窗口的另一种方法是使用 a `DirectMediaPlayer`，您可以在其中直接访问帧缓冲区（因此可以对像素做您喜欢的事情，包括将它们包装为围绕 3D 对象的纹理等等。）所以使用这种方法，您可以简单地将您想要的内容绘制到帧缓冲区上，然后以您选择的方式将其渲染到屏幕上。这是最灵活的方法，但也有不利的一面，即如果您对实施不十分小心，您将失去所有 GPU 加速并最终削弱 CPU，尤其是对于高清视频。

如果一个简单的叠加层可以解决问题，我会先尝试，`DirectMediaPlayer`如果必须的话就求助于。

# c# - 如何将记录的用户名与 DataTrigger 进行比较

> ID：14144646
> 
> 赞同：0
> 
> 时间：2013-01-03T18:10:10.827
> 
> 标签：c#, wpf, xaml, data-binding, code-behind

我正在尝试比较 XAML 中记录的用户名的名称。我将它设置在代码隐藏中的变量中，`"System.Threading.Thread.CurrentPrincipal.Identity.Name"`并尝试将其设置为 DataTrigger 中的值，但 Visual Studio 告诉我不能`Binding`在`DataTrigger`Value 中使用，只能在 a`DependencyProperty`或中使用`DependencyObject`。

我已经尝试了一千种方法，但我总是得到同样的错误。任何想法？

```
public string usuarioactual;

public Amigos()
{
    InitializeComponent();
    presenter = new PresenterAmigos(this);
    presenter.ObtenerAmistades();
    presenter.ObtenerUsuarioActual();
    usuarioactual = System.Threading.Thread.CurrentPrincipal.Identity.Name;

}

<Style.Triggers>
    <DataTrigger Binding="{Binding Recibida.Email}" Value="{Binding usuarioactual}">
        <Setter Property="Content" Value="{Binding Enviada.Email}"/>
    </DataTrigger>
    <DataTrigger Binding="{Binding Enviada.Email}" Value="{Binding usuarioactual}">
        <Setter Property="Content" Value="{Binding Recibida.Email}"/>
    </DataTrigger>
</Style.Triggers> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:05:34.903

你可以让你的`usuarioactual`变量`DependencyProperty`

```
public Amigos()
{
    InitializeComponent();
    presenter = new PresenterAmigos(this);
    presenter.ObtenerAmistades();
    presenter.ObtenerUsuarioActual();
    usuarioactual = System.Threading.Thread.CurrentPrincipal.Identity.Name;
}

public string usuarioactual
{
    get { return (string)GetValue(usuarioactualProperty); }
    set { SetValue(usuarioactualProperty, value); }
}

// Using a DependencyProperty as the backing store for usuarioactual.  This enables animation, styling, binding, etc...
public static readonly DependencyProperty usuarioactualProperty =
    DependencyProperty.Register("usuarioactual", typeof(string), typeof(Amigos), new UIPropertyMetadata(string.Empty)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:23:03.977

您可以使用 评估为的[BindingConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)`true/false`并将其`true/false`用作 中的值条件`DataTrigger`。

```
public class UserNameToBooleanConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var username = (string)value;
        if (username == "System.Threading.Thread.CurrentPrincipal.Identity.Name")
          return true;
        return false;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    } 
```

# html - 如何创建一个按钮链接，一旦单击，该链接就会将文件下载到用户计算机？

> ID：14144649
> 
> 赞同：0
> 
> 时间：2013-01-03T18:10:24.083
> 
> 标签：html, dreamweaver, flash-cs5

我在下载页面上有几个按钮，我想链接到存储在服务器上的不同电影，这样一旦用户单击下载按钮，电影就会下载到他们的计算机上。我该怎么做呢？我认为这只是将相关文件的目录路径放入按钮链接的情况？

这是页面： http: [//www.infomaticfilms.com/jack/infomatics/download.htm](http://www.infomaticfilms.com/jack/infomatics/download.htm)

任何帮助，将不胜感激。

杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:18:21.680

我假设您希望向用户显示“另存为”对话框，而不仅仅是在浏览器中打开文件？

实际上有两个组件可以做到这一点：

1.  用户的浏览器被配置为下载该类型而不是直接打开它。您无法控制这一点，这取决于用户自己的配置。
2.  您的服务器向浏览器建议它应该下载该类型而不是直接打开它*。*这是通过服务器响应中的标头值完成的。

您要查找的[标头称为](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields)[Content Disposition](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html)。 [如何使用它](https://stackoverflow.com/questions/1012437/uses-of-content-disposition-in-an-http-response-header)取决于您的服务器端功能。但基本上你想将其设置为：

```
Content-Disposition: attachment; filename="filename.mpg" 
```

这个响应头告诉浏览器你发送的是一个文件，应该在本地保存为一个文件。（请记住，HTTP 本身没有“文件”的概念，只有带有标头和数据的请求和响应。）

# java - JScrollPane 没有覆盖整个 JPanel

> ID：14144654
> 
> 赞同：-1
> 
> 时间：2013-01-03T18:10:58.580
> 
> 标签：java, swing, jscrollpane

我不知道我是否错过了什么或者这是一个错误。
我创建了一个包含几个 JTextArea 的面板
但是滚动窗格让我只能滚动到第 22 行。但是有 70
行当我调整框架大小时，滚动窗格也会调整大小，我可以看到比仅使用滚动条时更多的行向下滚动。

不用管里面的代码

状态 1：[图像](https://dl.dropbox.com/u/18290052/state1.png)

状态 2：[图像](https://dl.dropbox.com/u/18290052/state2.png)

有 70 行！但我无法滚动到他们

有什么建议么？

我只设置了一个rowheaderView：

```
jScrollPane1.setRowHeaderView(codeTextArea2.getRowNumbers()); 
```

和视口视图：

```
jScrollPane1.setViewportView(codeTextArea2); 
```

codeTextArea2 是扩展 JPanel 的自定义类，包含几个 JTextArea

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T21:17:10.083

+1 HFOE 评论

> 不用管里面的代码

我们之所以介意里面的代码：

这对我来说似乎很好，因为我没有你的代码我模拟了我最简单的形式。

简单`JPanel`的类，它包含一个`JTextArea`具有 70 行和 20 列的单个类，每个类都通过简单的正常大小给出一个数字，`append(..)`并且最大化行数似乎没有改变

![在此处输入图像描述](../Images/d2c4adf3d7bb2b2c74fc2219ddb38215.png)

（这个对于一个完整的未调整大小的屏幕截图来说太大了）

![在此处输入图像描述](../Images/7dc10928fc2f8b5bdfa7913ee513b2ee.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;

public class Test {

    public Test() {
        createAndShowGui();
    }

    private void createAndShowGui() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        MyPanelTextAreas panelWithTextAreas = new MyPanelTextAreas();

        JScrollPane jsp = new JScrollPane(panelWithTextAreas);
        jsp.setPreferredSize(new Dimension(500, 400));//dont want it too big 

        frame.add(jsp);

        frame.pack();
        frame.setVisible(true);

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }
}

class MyPanelTextAreas extends JPanel {

    JTextArea area = new JTextArea(70, 20);

    public MyPanelTextAreas() {
        setLayout(new BorderLayout());
        add(area);
        for (int i = 1; i <= 70; i++) {
            area.append((i == 1 ? "" : "\n") + i);
        }
        area.setCaretPosition(1);
    }
} 
```

# javascript - onclick触发提交？

> ID：14144655
> 
> 赞同：0
> 
> 时间：2013-01-03T18:10:59.063
> 
> 标签：javascript, forms, onclick, submit

我对 javascript 比较陌生，但是现在我有一个可以通过单击`<button>` 然后更改的表单，最后他们应该能够单击提交按钮来实际提交并保存表单。

所有其他按钮都可以很好地触发它们各自的javascript函数，但是按下这个按钮应该会改变特定`<span id='planname'>`标签的innerHTML。

```
<td><span id=''></span><span id='planname'></span></td>
<td id='planopt'><button class='button square blue effect-2' onclick="changePlan('Myfixworked','change');">Change</button></td> 
```

问题是当我单击此按钮时，它确实运行了该功能：

```
function changePlan(x,action){
    if(action == 'change'){
        var id = 'planname';
        document.getElementById(id).innerHTML = x;
    }
} 
```

它会更改该 id 的 innerHTML，但之后会立即提交表单。我尝试重命名 id 并产生相同的结果。我什至尝试更改它触发的功能并产生相同的结果。如果我将它影响的 id 更改为在此之后出现的任何 id，例如`var id = 'planopt';`，它会很好地工作，更改 innerHTML 并且不提交表单。

任何帮助，将不胜感激。综合代码如下。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script>
function changePlan(x,action){
    if(action == 'change'){
        var id = 'nameofplan';
        document.getElementById(id).innerHTML = x;
    }
}
</script>
</head>

<body>
<form action='' method='post' name='quote'>
    <table border='0' style='border-collapse:collapse;' width='100%' id='serviceplan'>
        <tr style='border-bottom: 2px solid #3D3D3D;'><th align='left' colspan='2'>Description</th><th align='left' width='30%'>Quantity</th><th width='10%'>Price</th><th align='right' width='25%'>Total</th></tr>
        <tr style='border-bottom: 1px solid #3D3D3D;'><td class='subt' colspan='5'>Service Plan</td></tr>
        <tr style='border-bottom: 1px dotted #3D3D3D;'>
            <td align='left'><span id='nameofplan'>Your Plan</span></td>
            <td id='planopt'><button class='button square blue effect-2' onclick="changePlan('Your New Plan','change');">Change</button></td>
            <td>1</td>
            <td align='center'>$<span id='planprice'>1.00</span>/month</td>
            <td align='right'>$<span id='subplan'>1.00</span></td>
        </tr>
    </table>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T18:13:40.240

为您的按钮元素添加一个`type='button'`属性。默认情况下，表单元素中的按钮元素充当提交按钮。

使用`return false`or`preventdefault`是错误的方法，因为您只是在抑制问题的症状（即您的按钮是提交按钮）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:15:05.150

捕获事件并取消默认操作。

```
onclick = function (event) {
    event.preventDefault();
} 
```

您也可以`return false;`在函数结束时，但如果发生任何错误，它*不会*取消默认操作。

# ios - IOS解析不同父级下多个同名标签的XML

> ID：14144659
> 
> 赞同：2
> 
> 时间：2013-01-03T18:11:12.597
> 
> 标签：ios, xml-parsing

我有一个试图使用 NSXMLPARSER 解析的 XML 文件。xml 的结构如下：

```
<report>
   <Page1>
     <row>
      <company>
           <val>
             company 1
           </val>
        </company>
        <TIME1>
           <val>
              time 1
           </val>
        </TIME1>
        <document>
           <val>
            document 1
           </val>
        </document>
     </row>
      <row>
        <company>
           <val>
             company 2
           </val>
        </company>
        <TIME1>
           <val>
              time 2
           </val>
        </TIME1>
        <document>
           <val>
            document 2
           </val>
        </document>
     </row>
   </Page1>
</report> 
```

其中 val 是我要为公司和文档检索的值作为两个单独的项目。

我可以像这样使用 NSXMLPARSER 成功解析公司的 val：

```
- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
currentNodeContent2 = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]; }

- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
if ([elementname isEqualToString:@"Company"])
    {
        currentRfp = [rfp alloc];
        isStatus = YES;
    }
    if ([elementname isEqualToString:@"TIME1"])
    {
        isStatus = NO;
    }
}

- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if (isStatus        )
    {

        if ([elementname isEqualToString:@"val"])
        {
            currentRfp.content2 = currentNodeContent2;
        }
        if ([elementname isEqualToString:@"val"])
        {
            currentRfp.dateCreated2 = currentNodeContent2;
        }

    }
    if ([elementname isEqualToString:@"row"])
    {
        [self.rfps addObject:currentRfp];
        currentRfp = nil;
        currentNodeContent2 = nil;
    }

}

- (void) parser:(NSXMLParser *)parser foundCharacters2:(NSString *)string
{
    currentNodeContent2 = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
} 
```

我只是在学习，可能有一个简单的答案，但我被卡住了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:52:37.540

您可以使用以下代码来执行此操作：

```
- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
   if ([elementname isEqualToString:@"row"])
    {
        currentRfp = [rfp alloc];
    }
    currentNodeContent2  = [[NSMutableString alloc] init];
}

- (void) parser:(NSXMLParser *)parser foundCharacters2:(NSString *)string
{
    currentNodeContent2 = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
}

- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if ([elementname isEqualToString:@"val"])
    {
         return;
    }
    if ([elementname isEqualToString:@"TIME1"])
    {
        //you get val of time1 here
    }
    if ([elementname isEqualToString:@"company"])
    {
        //you get val of company here
    }
    if ([elementname isEqualToString:@"document"])
    {
        //you get val of document here
    }
    if ([elementname isEqualToString:@"row"])
    {
        [self.rfps addObject:currentRfp];
        currentRfp = nil;
    }
    [currentNodeContent2 release];
    currentNodeContent2 = nil;
} 
```

# git - Git 合并分支到主控

> ID：14144662
> 
> 赞同：7
> 
> 时间：2013-01-03T18:11:23.443
> 
> 标签：git, svn, branch

如果您有一个从 master 分支出来的分支，然后在其中开发了您的功能......当涉及到合并回 master 时，我听说过 2 种不同的方法：

1.  先将 master 合并到 feature 分支，然后再将分支合并回 master。
2.  将您的分支合并到 master 中。

谁能告诉我哪种方法更好，第一种方法是否有实际好处？

或者如果有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:42:48.303

假设您从 master 创建*feature-sev*，同时，我创建*feature-eric*。我的分支修改了与您相同的文件；事实上，它恰好以我们的 git 客户端不够聪明，无法理解的方式重叠。我首先完成开发并合并我的更改。

在这种情况下，不可避免地会提示您解决冲突。

```
CONFLICT (content): Merge conflict in stackoverflow.html
Automatic merge failed; fix conflicts and then commit the result. 
```

如果您选择 (1)，将 master 合并到分支中并确保一切正常，您将通过*feature-sev*中的合并提交解决冲突。如果您在解决过程中犯了任何错误，您可以将它们回滚而无需任何直接修改来掌握。这很好。

如果您选择 (2)，您将通过直接对 master 进行合并提交来解决冲突。如果你犯了任何错误，你将打破主人。这是不好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:38:39.970

我想这取决于;-)

需要考虑的一些事项：

*   合并后是否需要功能分支？如果是这样，合并`master`到它以及合并回`master`. 如果不是，那么如果您仍然要删除它，那么合并到功能分支并没有太大意义。
*   您可以破坏`master`分支的本地工作副本吗？如果没有，您应该避免将代码合并到`master`其中，这可能会导致您需要手动解决大量冲突。如果没问题，继续。

一般来说，我会说这取决于你如何使用 git。

由于我通常只临时使用功能分支，并且在成功完成一个功能并将它们合并到后删除它们`master`，因此我通常直接合并到`master`并在之后删除另一个分支。

另一方面，我可以想象，在某些情况下，反过来*可能*会有用。但只要没有强有力的理由，我会尽量避免它。一次合并就足够了；-)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T18:40:52.833

从理论上讲，没有区别。您在一个分支中有一组更改，您正在与另一个分支中的一组更改相结合。这些变化最终在哪里并不重要。

在实践中，最好将更改合并到功能分支中，因为它为您提供了一个隔离的地方来解决冲突。如果功能分支已经开发了很长时间，这一点尤其重要，因为通常会在第一次提交后解决微妙的冲突。

最好的方法是定期从主分支更新到特性分支，从而减少特性开发结束时发生冲突的可能性。

# http-status-codes - HTTP状态码308是怎么回事？

> ID：14144664
> 
> 赞同：21
> 
> 时间：2013-01-03T18:11:24.070
> 
> 标签：python-requests, http-status-codes, rfc, http-status-code-308

IETF RFC 草案[超文本传输​​协议 (HTTP) 状态代码 308（永久重定向）](https://datatracker.ietf.org/doc/html/draft-reschke-http-status-308-07)将 HTTP 状态 308 定义为**永久重定向**。当然，应该注意的是，这是一份草稿文件，在其文件标题中包含文本“过期：2012 年 9 月 27 日”，我认为这意味着它现在应该被视为无效，但我不熟悉IETF 的流程，因此对此没有信心。

维基百科文章[HTTP 状态代码列表](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)使用 308 的定义，也：

> **308 永久重定向（被批准为实验性[RFC](http://en.wikipedia.org/wiki/Request_for_Comments)）^([12])**
> 
> > 应使用另一个 URI 重复该请求以及所有未来的请求。307 和 308（如提议的）与 302 和 301 的行为平行，但*不允许 HTTP 方法更改*。因此，例如，将表单提交到永久重定向的资源可能会顺利进行。
> 
> ...
> 
> [12]：[“超文本传输​​协议 (HTTP) 状态代码 308（永久重定向）”](https://datatracker.ietf.org/doc/html/draft-reschke-http-status-308)。[国际能源交易基金](http://en.wikipedia.org/wiki/IETF)。2012\. 2012 年 3 月 27 日检索。

当时微软的 Eric Law 在[Pushing the Web Forward with HTTP/308](http://blogs.msdn.com/b/ieinternals/archive/2012/03/29/http-308-permanent-redirect-pushing-the-web-forward-by-breaking-unwanted-forward-compatibility.aspx)中评论了这个 HTTP/308 代码。这让我发现Firefox在这个意义上支持308。

但是，在查看[python-requests](/questions/tagged/python-requests "显示标记为“python-requests”的问题")库的时候，发现308还有另一种用法：

```
 308: ('resume_incomplete', 'resume'), 
```

这似乎来自 Google Gears 的[可恢复 HTTP 请求提案](http://code.google.com/p/gears/wiki/ResumableHttpRequestsProposal)，定义`308 Resume Incomplete`。似乎有一些用法。当然，这些提议都没有承认另一个的存在。

发生什么了？`308 Permanent Redirect`还活着吗？状态码 308 发生了什么？我该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T13:42:23.673

互联网草案尚未过期（因为它在过期之前已获得批准）。请参阅[https://datatracker.ietf.org/doc/draft-reschke-http-status-308/](https://datatracker.ietf.org/doc/draft-reschke-http-status-308/)和[http://www.rfc-editor.org/queue2.html#draft-reschke-http-status-308](http://www.rfc-editor.org/queue2.html#draft-reschke-http-status-308)当前发布状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-18T08:02:14.053

请参阅下面的 Chris Morgan 对此问题的评论（我的原始答案参考 [http://insanecoding.blogspot.co.il/2014/02/http-308-incompetence-expected.html?m=1](http://insanecoding.blogspot.co.il/2014/02/http-308-incompetence-expected.html?m=1)但 Chris 的参考资料很多更好的）。

为了了解 308 还没有走多远，请参阅 Microsoft 的 .NET 框架 V4 ( [http://msdn.microsoft.com/en-us/library/system.net.httpstatuscode(v=vs ) 中定义的 HTTP 代码.110).aspx](http://msdn.microsoft.com/en-us/library/system.net.httpstatuscode%28v=vs.110%29.aspx "HttpStatusCode 枚举") ) HttpStatusCode 枚举）。具体来说，没有提到代码 308。

# c# - 如何在 .NET 中实现作业队列？

> ID：14144665
> 
> 赞同：1
> 
> 时间：2013-01-03T18:11:38.453
> 
> 标签：c#, .net, .net-4.0, jobs

我有一个处理作业的 Windows 服务。此服务中的作业是一系列操作，例如：

> A -> B -> C -> D -> E

每个工作都应该完全独立于其他工作。当前实现在其自己的线程（在本例中为`new System.Threading.Thread`）上处理每个作业，这在大多数情况下运行良好。然而，事实证明 B 动作不是线程安全的，两个线程不应该同时处理 B 动作。如果两个线程同时尝试执行 B 动作，有时会出现奇怪的结果或错误。请注意，其他操作可能由多个作业同时执行而不会产生任何不良影响。

我不想尝试以线程安全的方式重新实现 B 操作（我预计这将需要大量资源来实现和测试），我只想将每个 B 操作一次限制为单个线程.

现在对我来说显而易见的初始解决方案是`lock`在 B 操作周围放置 a，这肯定会将其限制为单个线程。然而，这个解决方案似乎不能保证所有等待的线程都有机会处理 B 动作。这是因为[不能保证](https://stackoverflow.com/questions/1330879/are-threads-waiting-on-a-lock-fifo)线程以 FIFO 或一致的方式排队。我觉得这在理论上可能会导致线程饥饿。因此，我对实施此解决方案感到不舒服。

所以我的问题是*如何在 .NET 中实现一个更好的（可能是 FIFO）作业队列，以保证所有作业都将通过 B 操作，一个接一个？*

我目前的想法是，我可以维护某种“管理器”线程，其工作是从队列中拉出一个作业线程并在 B 操作明确时执行它。（也许我正在描述实现我自己的调度程序？）但这似乎很粗糙，也许 .NET（我正在使用 .NET 4.0）在它的库中为这种情况提供了更好的工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:15:42.713

您可能追求的是类似于创造者-消费者模式的东西。[这个 stackoverflow 帖子](https://stackoverflow.com/questions/530211/creating-a-blocking-queuet-in-net)有一个很好的阻塞队列实现。所以你可以让多个线程向它添加东西，并且只有一个线程永远从中读取东西（当队列为空时它会阻塞）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:16:32.550

查看 Windows 工作流程[http://msdn.microsoft.com/en-us/vstudio/jj684582.aspx](http://msdn.microsoft.com/en-us/vstudio/jj684582.aspx)或quartz.net [http://quartznet.sourceforge.net/](http://quartznet.sourceforge.net/)

# html - 在html css中为圆形png添加轮廓

> ID：14144667
> 
> 赞同：1
> 
> 时间：2013-01-03T18:11:42.687
> 
> 标签：html, css

嘿伙计们，我想在这个圆形 png 周围添加一个 4px 白色圆形边框。

[http://oi45.tinypic.com/n6uo8o.jpg](http://oi45.tinypic.com/n6uo8o.jpg)

我无法在图片本身中执行此操作，因为稍后我想要悬停效果。请帮忙！谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T18:14:58.790

HTML：

```
<img src="http://oi45.tinypic.com/n6uo8o.jpg" alt="" /> 
```

CSS：

```
img {
width:180px;
height:180px;        
border:2px solid red;
border-radius:90px;   
} 
```

这个 CSS 在“脸”和边框之间没有空格：

```
img {
width:180px;
height:180px;        
border:5px solid red;
border-radius:90px;
background:red;
} 
```

[http://jsfiddle.net/ue9sG/](http://jsfiddle.net/ue9sG/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T19:05:43.100

将该`border-radius`属性应用于您的相关对象。

属性语法：

```
border-*-*-radius: [ <length> | <%> ] [ <length> | <%> ]? 
```

例子：

```
border-top-left-radius: 10px 5px;
border-bottom-right-radius: 10% 5%;
border-top-right-radius: 10px; 
```

[在此处](http://www.css3.info/preview/rounded-border/)阅读有关border-radius 属性的更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T18:23:37.417

您可以使用 CSS 创建圆形元素，如下所示：

```
.circle {
  border-radius: 50%;
  width: 200px;
  height: 200px; 
  border:1px solid #000;
}​ 
```

宽度和高度可能会有所不同，但应该彼此相等才能使用`border-radius:50%;`，或者您需要`border-radius`根据您的需要更改属性[如 OP 的回答中所示]。

这是一个有效的[JSFiddle](http://jsfiddle.net/bcdUC/)

要了解更多关于 CSS 圆圈的信息，请单击此[链接](http://davidwalsh.name/css-circles)

# sql-server - 设置从 SQL 语句派生的变量

> ID：14144670
> 
> 赞同：2
> 
> 时间：2013-01-03T18:11:53.900
> 
> 标签：sql-server, automation, toad

我第一次尝试使用 Toad 自动化工具。我的问题是我似乎无法从 SQL 语句中设置变量。`select max(date_col) from some_table`当我在自动化脚本之外执行 [simple] SQL 语句 ( ) 时，它按预期工作。

如何设置这个变量？我需要采取哪些步骤？（我试过在谷歌上搜索这个，但我找不到有用的东西）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:17:00.593

我认为您正在尝试将 max(date_col) 值存储到变量中。我认为下面的陈述应该有效：

```
SELECT @variable = MAX(date_col) FROM some_table 
```

# iphone - 基于自定义“XiB”的 UI 控件

> ID：14144672
> 
> 赞同：0
> 
> 时间：2013-01-03T18:12:03.213
> 
> 标签：iphone, objective-c, xcode

我正在尝试实现自定义视图（ C# Custom UserControl 等效）

用例：

1.  我已经实现了一个基于 UIView 的自定义控件
2.  控件与专门的 XiB 文件（Xib**文件 A**）相关联
3.  XiB 的“文件所有者”是一个专门的类，其中定义了 IBOutlets
4.  此控件由不同的 XiB 文件（**XiB 文件 B**）引用

我期待**Xib 文件 A**元素在**Xib 文件 B**中呈现，但是，尽管所有 IBOutlets 都正确关联，但未显示 UI，并且调用了“awakeFromNib”。

我在这里做错了什么？

以下是基于自定义XiB的代码~control~（由不同XiB的另一个控件/视图引用）

```
@interface SeriesView ()
@property (strong, atomic, readonly) MediaViewer* mediaViewer;
- (void) OnInitialize;
- (void) awakeFromNib;
@end

@implementation SeriesView

@synthesize mediaViewer = _mediaViewer;
@synthesize image = _image;
@synthesize scroll = _scroll;

- (id)initWithFrame:(CGRect)frame
{
    if(nil == (self = [super initWithFrame:frame]))
        return nil;
    [[NSBundle mainBundle] loadNibNamed:@"SeriesView" owner:self options:nil];
    return self;
}

- (id)initWithCoder:(NSCoder*)aDecoder
{
    if(nil == (self = [super initWithCoder:aDecoder]))
        return nil;
    [[NSBundle mainBundle] loadNibNamed:@"SeriesView" owner:self options:nil];
    return self;
}

- (void) OnInitialize
{
    _mediaViewer = [[MediaViewer alloc] init];
    _image.hidden= NO;
}

- (void)awakeFromNib
{
    [super awakeFromNib];
    [self OnInitialize];    
}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T08:31:16.473

Per：[UIView 和 initWithFrame 以及一个 NIB 文件。我怎样才能加载NIB文件？](https://stackoverflow.com/questions/5056219/uiview-and-initwithframe-and-a-nib-file-how-can-i-get-the-nib-file-loaded)

唯一缺少的部分是

1.  向我的自定义视图添加视图出口
2.  将视图与相应的根视图@ XiB 关联
3.  通过 awakeFromNib 调用“[self addSubview:self.view]”

# django - 寻找允许在 Django 应用程序中创建多个博客的 Django 博客引擎

> ID：14144677
> 
> 赞同：1
> 
> 时间：2013-01-03T18:12:30.830
> 
> 标签：django, blogs

我正在寻找一个具有典型功能（tinymce 编辑器、审核评论、标签、分页）的 Django 博客引擎，允许在 Django 应用程序中创建多个不同的博客。我查看了[https://github.com/timmygee/django-richtext-blog](https://github.com/timmygee/django-richtext-blog)，但它似乎只允许创建一个博客。

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:22:28.303

我知道在 github 上有一个将多个博客作为一项功能，集成到一个数据库中：

[https://github.com/ilblackdragon/django-blogs](https://github.com/ilblackdragon/django-blogs)

虽然我个人没用过。

我对您的用例了解不多，但是如果您喜欢富文本博客，并且由于您的博客数量有限，那么在子域上设置多个富文本博客实例是否可行？我想这将要求不需要共享数据模型，这可能会破坏交易，但如果此处考虑 RAD，这可能是完成工作的最快方式。您可以在根域（.domain.com 和 www.domain.com）上设置一个小型包装器，以链接到不同的可用博客。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:00:30.580

正如 Daniel Eriksson 所说，这里有一个[列表](http://www.djangopackages.com/grids/g/cms/)。

# c++ - 使用 SetClassLongPtr 更改窗口背景

> ID：14144678
> 
> 赞同：0
> 
> 时间：2013-01-03T18:12:36.723
> 
> 标签：c++, windows, winapi

我有一个下拉菜单，我想用它来更改窗口的背景；该窗口默认为我的“冬季背景”。

```
wClass.hbrBackground = CreatePatternBrush(LoadBitmap(hInst, MAKEINTRESOURCE(WinterBG))); 
```

Whenever an item in the drop-down menu is chosen, it sets off CBN_SELCHANGE, where I grab the length and string of the item chosen. 我希望在此基础上改变背景。

```
case WM_COMMAND:
    {
        switch(HIWORD(wParam))
        {
        case CBN_SELCHANGE:
            {
                ItemIndex = SendMessage((HWND)lParam, (UINT)CB_GETCURSEL, (WPARAM)0, (LPARAM)0);
                int ItemLen = SendMessage((HWND)lParam, (UINT)CB_GETLBTEXTLEN, (WPARAM)0, (LPARAM)0);
                char* ListItem = (char*)malloc(ItemLen+1);
                (char)SendMessageA((HWND)lParam, (UINT)CB_GETLBTEXT, (WPARAM)ItemIndex, (LPARAM)ListItem);

                //////////////////////////////////////////////////////////////////////////////////////////////////
                // I am certain this can be optimized

                if ( ItemLen == 5 && ListItem[0] == 'S' ) // Spring
                {
                    MessageBox(NULL, L"Spring chosen", L"Confirmed", MB_ICONINFORMATION | MB_OK);
                    HBRUSH brush = CreatePatternBrush(LoadBitmap(wClass.hInstance, MAKEINTRESOURCE(SpringBG)));
                    SetClassLongPtr(hWnd, GCLP_HBRBACKGROUND, (LONG)brush);
                    InvalidateRect(hWnd, NULL, TRUE);
                    UpdateWindow(hWnd);
                }
..... 
```

SetClassLongPtr 没有按我想要的方式工作。更新窗口后（我阅读了 InvalidateRect 和 UpdateWindow 来实现），没有任何变化——背景仍然在我的“WinterBG”上。

我正确使用 SetClassLongPtr 吗？如果没有，我还能如何更改背景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-09-05T14:23:13.947

我已经尝试过您在一个简单的 Win32 项目中尝试完成的工作，并设法使其工作。要使下面的代码工作，您需要确保两个位图都作为资源存在于您的 VC++ 项目中。我在我的 VC++ 项目中定义了两个位图作为资源。我没有像你那样使用任何菜单。我正在处理 WM_KEYDOWN 消息，但想法是一样的，这也应该在您的 WM_COMMAND 消息下工作。下面的代码做了以下事情：

1.  从 exe 文件的资源部分加载位图。为此它需要一个 HINSTANCE，在您的 WndProc 中您可以使用 GetWindowLongPtr 获得它（使用它而不是 GetWindowLong，尤其是当您为 64 位环境编码时，另请参阅 Microsoft 在[https://docs.microsoft.com中的说明/en-us/windows/win32/api/winuser/nf-winuser-getwindowlongw](https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-getwindowlongw)）。
2.  使用您使用的相同功能创建新画笔：“CreatePatternBrush”。
3.  使用此画笔更改窗口的背景并存储返回的旧画笔，以便以后将其删除。您可以使用 SetClassLongPtr 执行此操作（此处适用相同的 64 位注释）。令人困惑的部分可能是最后一个参数，它是 LONG_PTR。这看起来像是一个指向读者的指针，但实际上它是一个 __int64（64 位整数）。
4.  删除旧画笔（以防止内存泄漏，特别是如果您希望在会话中多次执行此代码）。
5.  通过使整个客户区（参数 NULL）无效并将 repaint 参数设置为 TRUE 来刷新窗口。

那应该这样做。这是执行此操作的 WndProc 函数部分：

```
 case WM_KEYDOWN:
    switch (wParam)
    {
    case VK_F1:
        HINSTANCE hInst2 = (HINSTANCE)GetWindowLongPtr(hwnd, GWLP_HINSTANCE);
        HBITMAP newBmp = LoadBitmapW(hInst2, MAKEINTRESOURCE(IDB_BITMAP2));
        HBRUSH newBrush = (HBRUSH)CreatePatternBrush(newBmp);
        HBRUSH oldBrush = (HBRUSH)SetClassLongPtr(hwnd, GCLP_HBRBACKGROUND, (LONG_PTR)newBrush);
        DeleteObject(oldBrush);
        InvalidateRect(hwnd, NULL, TRUE);
        break;
    }
    break; 
```

小备注：上面代码中的最后一个“中断”只是因为在我的 WndProc 的底部调用了 DefWindowProc。在 WndProc 中处理 WM_KEYDOWN 消息时，应始终将其传递给 DefWindowProc，以便 Windows 可以正确处理它。在您的菜单情况下，最后一个“break”语句可能会被“return 0”替换。

# php - PHP与命令行程序的交互

> ID：14144679
> 
> 赞同：3
> 
> 时间：2013-01-03T18:12:40.313
> 
> 标签：php

我有一个命令行程序，它从流中接受输入，而不是作为命令行参数。（例如，一个使用 scanf 接受输入的 C 程序。）我如何使用 PHP 与这个应用程序交互？exec(), shell_exec() 在这里没有帮助，因为输入不是通过命令行参数。我需要在 PHP 脚本和命令行程序之间建立一个恒定的输入/输出连接，以便用户可以给 PHP 一个输入，PHP 将把该输入中继给程序，然后得到输出，然后显示给用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:14:53.203

你可以用[`proc_open`](http://php.net/manual/en/function.proc-open.php)这个。

该页面的示例：

```
<?php
$descriptorspec = array(
   0 => array("pipe", "r"),  // stdin is a pipe that the child will read from
   1 => array("pipe", "w"),  // stdout is a pipe that the child will write to
   2 => array("file", "/tmp/error-output.txt", "a") // stderr is a file to write to
);

$cwd = '/tmp';
$env = array('some_option' => 'aeiou');

$process = proc_open('php', $descriptorspec, $pipes, $cwd, $env);

if (is_resource($process)) {
    // $pipes now looks like this:
    // 0 => writeable handle connected to child stdin
    // 1 => readable handle connected to child stdout
    // Any error output will be appended to /tmp/error-output.txt

    fwrite($pipes[0], '<?php print_r($_ENV); ?>');
    fclose($pipes[0]);

    echo stream_get_contents($pipes[1]);
    fclose($pipes[1]);

    // It is important that you close any pipes before calling
    // proc_close in order to avoid a deadlock
    $return_value = proc_close($process);

    echo "command returned $return_value\n";
}
?> 
```

输出：

```
Array
(
    [some_option] => aeiou
    [PWD] => /tmp
    [SHLVL] => 1
    [_] => /usr/local/bin/php
)
command returned 0 
```

# rest - 将会话超时设置为非常短的休息时间是个好主意吗？

> ID：14144680
> 
> 赞同：0
> 
> 时间：2013-01-03T18:12:40.647
> 
> 标签：rest, jersey

我知道 rest ws 是无状态的。我们预计会有相当高的流量。将会话超时（我们使用的是tomcat）设置得非常低是个好主意吗？比如一分钟？优点和缺点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:17:40.983

如果您期望高流量，会话管理将为您的应用程序带来开销，并且一分钟超时，您的服务器将消耗时间使大量会话无效。

如果您的应用程序确实是无状态的，则不要使用会话。[你也不能完全禁用它们，但如果你不这样做，`getSession()`那么你应该](https://stackoverflow.com/questions/2255814/can-i-turn-off-the-httpsession-in-web-xml)没问题。

如果您（绝对）想确保没有代码在创建会话，您可以查看 Tomcat 的会话[管理器组件](http://tomcat.apache.org/tomcat-7.0-doc/config/manager.html)，并可能创建您[自己的实现](https://stackoverflow.com/questions/8683493/custom-session-manager-in-tomcat)来告诉您当您对服务器进行一些[压力测试](http://en.wikipedia.org/wiki/Stress_testing_%28software%29)时发生了什么。

# asp.net - ajax请求时如何保存当前模型？

> ID：14144684
> 
> 赞同：0
> 
> 时间：2013-01-03T18:12:56.840
> 
> 标签：asp.net, ajax, asp.net-mvc, jquery, asp.net-mvc-4

我在我的应用程序中使用 Ajax 来更新视图而不刷新网页。

你能注意到这里[http://contoso2.azurewebsites.net/Test/DoTest](http://contoso2.azurewebsites.net/Test/DoTest)因为我用黄色突出显示部分视图。

但问题是，当我向项目（数学问题）输入数据时，当 Ajax 请求时，我看不到模型中的变化。

```
 public ActionResult DoTest()
    {
        List<Worksheet> worksheets = null;

        if (Request.IsAjaxRequest())
        {
            worksheets = Session["Worksheets"] as List<Worksheet>;
            return PartialView("_Problems", worksheets[1]);
        }

        worksheets = new List<Worksheet>()
        {
            new Worksheet("Addition and Subtraction of absolute values", new List<Problem1>() { ... }),
            new Worksheet("Addition and Subtraction of absolute values", new List<Problem1>() { ... })
        }

        Session["Worksheets"] = worksheets;
        return View(worksheets[0]);
    } 
```

我正在使用 a`Session`来恢复我的模型，但如果我在其中调试，我看不到模型的任何变化。当我按下继续按钮时，我该怎么办，我的模型会更新。

编辑：这在剃刀视图中包含我的 AJAX

```
@using (Ajax.BeginForm(
    new AjaxOptions
    {
        HttpMethod = "get",
        InsertionMode = InsertionMode.Replace,
        UpdateTargetId = "problemList"
    }))
{
    <input type="submit" value="Continue" />
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T19:15:22.353

我通常对 View 有两个 Actions 。虽然这不是强制性要求。

当用户第一次访问页面时，第一个用 Get装饰的操作`HttpGet`会在 Get 上呈现页面。当用户单击下一步并发布表单时，将调用第二个操作。

```
public class TestController {

   [HttpGet]
   public void DoTest(){

        var viewModel = new List<Worksheet>()
        {
            new Worksheet("Addition and Subtraction of absolute values", new List<Problem1>() { ... }),
            new Worksheet("Addition and Subtraction of absolute values", new List<Problem1>() { ... })
        };
        return View(viewModel);
    }

   [HttpPost]
   public void DoTest(List<Worksheet> worksheets){

        //do whatever you want with the user response

        var response =  worksheets[1]; 
        PartialView("_Problems",responseModel);
    }
} 
```

注意：您将不得不调用 ajax 调用`HttpMethod = "post"`。ASP.NET 中的 ModelBinder 会将请求中发布的值绑定到您的 responseModel`worksheets`

[您应该尝试阅读http://asp.net/](http://asp.net/)上提供的“getting-started-with-aspnet-mvc4”教程

# sql - 用最后可用数据填充缺失的最新数据

> ID：14144686
> 
> 赞同：1
> 
> 时间：2013-01-03T18:13:01.537
> 
> 标签：sql, sql-server-2008, tsql

我有两张表，一张（`market_cap_data`）带有`month_end_date, id, market_cap`字段：

```
month_end_date    id         market_cap
2012-12-31       123456        5000
2011-12-31       123456        4000 
```

第二个表 ( `start_date_table`) 包含`month_end_date, id, start_date`以下字段：

```
month_end_date    id         start_date
2011-12-31       123456        1980-12-31 
```

我想合并这两个表，但 start_date_table 数据在 market_cap_data 表前一年结束。我想使用最新的 start_date 填充 start_date_table 没有数据的最新数据。例如，而不是像这样的外部联接：

```
month_end_date    id         market_cap    start_date
2012-12-31       123456        5000           NULL
2011-12-31       123456        4000          1980-12-31 
```

我希望它看起来像

```
month_end_date    id         market_cap    start_date
2012-12-31       123456        5000          1980-12-31
2011-12-31       123456        4000          1980-12-31 
```

尝试了一堆不同的东西，但无法弄清楚。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:34:51.390

```
SELECT 
    m.month_end_date,
    m.id,
    m.market_cap,
    CASE 
        WHEN s.start_date IS NOT NULL THEN s.start_date
        ELSE (SELECT MAX(s2.start_date) FROM start_date_table s2 WHERE s2.id = m.id)
    END AS start_date
FROM market_cap_data m
LEFT JOIN start_date_table s
    ON m.id = s.id
    AND m.month_end_date = s.month_end_date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:30:33.370

我认为你会从案例陈述中受益，**这没有经过测试，因为我没有一个小提琴来验证**

```
create function get_latest_date_from_table(varchar(100) table_name  returns Date
(  
    return select max(date) from #table_name
)  

create procedure modify_null_dates_for_marker  
(  
   max_date Date;  
   max_date = get_latest_date_from_table('table');
    select
         foo,  
         bar
    CASE WHEN start_date IS NULL
        THEN  max_date
        ELSE  start_date END AS start_date
    FROM table  
) 
```

这应该提供一种`null`正确设置列的方法。

# objective-c - ARC非常奇怪的内存泄漏

> ID：14144688
> 
> 赞同：5
> 
> 时间：2013-01-03T18:13:06.917
> 
> 标签：objective-c, ios, memory-leaks, automatic-ref-counting

下午好，

我正在对即将发布的 iOS 应用程序进行一些 Instruments 测试，但我注意到一些**非常**奇怪的内存泄漏，这些泄漏似乎来自系统库。

当我运行 Instruments 时，我得到了这个泄漏： ![在此处输入图像描述](../Images/3dccf7038797f44f2a94d6143775a7f1.png)

从我的角度来看，这非常奇怪！我查看了这些泄漏的调用树，它们似乎都是深度 C++ 系统调用。

![在此处输入图像描述](../Images/1b260a3a85f674132fb6059a95b2752b.png)

更让我困惑的是，这个项目启用了 ARC，我通过分析器运行它，没有出现任何问题。更奇怪的是，这不会发生在模拟器上，也不会发生在我真正的 iPad 上，但在我的 iPhone 上会发生这个问题。

当我检查“仅显示 Obj-C”和“隐藏系统库”时，调用跟踪消失了，这让我相信我的代码不对泄漏负责。

为什么会发生这种情况，我能做些什么来解决它？

多谢你们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T18:59:07.083

上面的泄漏不是你的应用程序内部的泄漏，它在苹果的库中，你不必担心。如果您已经修复了应用程序中的所有漏洞，那就没问题了。Apple 不会因为这个小漏洞而拒绝你的应用程序。

# php - php 到 jquery 表单提交

> ID：14144692
> 
> 赞同：1
> 
> 时间：2013-01-03T18:13:17.293
> 
> 标签：php, jquery

我有这段代码要求用户输入值并提交。

html

```
 <form id="myForm" method="post" action="saving.php">
            <p><label for="input1">Input 1:</label>
                <input type="text" size="10" name="input1" id="input1" />
            </p>
            <input id="save" name="save" type="submit" value="save" />
    </form>
    <p><span id="thevalue"></span><span id="existornot"></span></p> 
```

js

```
$("#myForm").submit(function(event) {    
    event.preventDefault();      
    $("#myForm").validate(
      {     rules: {input1: "required",},
            messages: {input1: "message error input"},
            });
    if( $("#myForm").valid()){ 
        var $form = $("#myForm" ),
        url = $form.attr( "action" ), 
        insertedVal=$("#input1").val(); 

        $.post(url,{input1:insertedVal},  
          function(){

          //displaying value condition
          $("#thevalue").html(insertedVal);
          // ... msg from php to be inserted to #existornot 

          });  
       }
}); 
```

保存.php

```
<?php
  if(!empty($_POST['input1']))
  {
    $inputone= mysql_real_escape_string(trim($_POST['input1']));
    $result = mysql_query("SELECT COUNT(*) FROM `test_table` WHERE `name` = '$inputone' ");
      if (mysql_result($result, 0, 0) > 0) 
      {
        echo "is duplicate data" ;
      } 
      else 
      {      
        mysql_query("INSERT INTO `test_table`(name)  VALUES ('$inputone')") ;
         echo "is updated to db" ;
      }
  }
  else
  {
    echo "could not be empty"  ;
  }

?> 
```

如何将那些“重复数据”或“已更新为 db”的消息从 php 传递到 javasript，以告诉用户提交过程是失败还是成功？

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:22:59.957

更改 jQuery post 后的函数调用以接受数据变量并处理结果：

```
 $.post(url,{input1:insertedVal},  
      function(data){

      //displaying value condition
      $("#thevalue").html(insertedVal);
      // ... msg from php to be inserted to #existornot 

      if (data != 'is updated to db') {
          alert(data);
      }

      });  
   } 
```

（数据将包含您保存功能中回显的内容）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:23:15.483

来自 php 文件的响应在 ajax 回调函数中。所以你应该像这样向你的函数添加一个参数：

```
$.post(url,{input1:insertedVal},function(resp)
{
     // resp is the callback from php.
     console.log(resp);
     $("#thevalue").html(insertedVal);
}); 
```

有关 ajax 工作原理的更多信息，您可以点击此链接：[5 Ways to Make Ajax Calls with jQuery](http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/)
希望对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T18:16:27.660

像这样：

```
$.post(url,{input1:insertedVal},  
      function(data){

      //displaying value condition
      $("#thevalue").html(insertedVal);
      // ... msg from php to be inserted to #existornot 
      $("#existornot").html(data);

      });  
   } 
```

通过将“数据”变量添加到回调函数（），该“数据”变量将使用任何 php echo 作为输出进行更新。然后，您可以将该“数据”插入回调函数中的#existornot。

请在此处查看 API：http: [//api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T18:18:08.330

如果要打印从 php 返回的值，请检查 jquery $.post

```
$.post(url,{input1:insertedVal},  
          function(data){
          //displaying value condition
          $("#somediv_id").html(data);
          $("#thevalue").html();
          // ... msg from php to be inserted to #existornot 

 }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T18:23:00.410

$.post 回调函数将传递一个包含服务器响应的参数。所以你的 $.post 请求应该看起来像

```
$.post(url, {input1: insertedVal}, function(response) {
    console.log(response); // should output the server message echoed.
}); 
```

通常最好使用 JSON 作为服务器响应。

# ruby-on-rails - 在 Rails 应用程序中，多个模型所需的辅助方法应该放在哪里？

> ID：14144702
> 
> 赞同：0
> 
> 时间：2013-01-03T18:13:56.510
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, ruby-on-rails-3.2

举个例子：

```
module ModelHelper
  def self.special_function(some_parameter)
    do_some_special_thing
  end
end

class Student < ActiveRecord::Base
  def to_special
    ModelHelper.special_function(a_variable_of_here)
  end
end

class Teacher < ActiveRecord::Base
  def to_special
    ModelHelper.special_function(another_variable_of_here)
  end
end 
```

我放在哪里`model_helper.rb`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:17:17.787

我通常在 lib 中创建一个文件并包含它。类似 lib/special_model.rb 的东西：

```
module SpecialModel
   included do
     def to_special
       do_some_special_thing
     end
   end
end 
```

然后在 app/models/student.rb 中：

```
class Student
  include SpecialModel
end 
```

在使用模块时，您可能还想查看 ActiveSupport::Concern 以获得一些 rails 帮助：

[http://api.rubyonrails.org/classes/ActiveSupport/Concern.html](http://api.rubyonrails.org/classes/ActiveSupport/Concern.html)

# css - css "::after" 类在 Internet Explorer 中不起作用

> ID：14144705
> 
> 赞同：1
> 
> 时间：2013-01-03T18:14:11.280
> 
> 标签：css, internet-explorer, html-table, pseudo-element

> **可能重复：**
> [IE9 是否支持 CSS3 ::before 和 ::after 伪元素？](https://stackoverflow.com/questions/7157405/are-css3-before-and-after-pseudo-elements-supported-by-ie9-or-not)

[我在这里](http://jaxmedia.com/projects/)设置了一个 wordpress 页面。它确实使用表格，我知道这很愚蠢，但它也是在后端设置视觉布局的最佳方式，因此客户端可以在编辑时看到他们在做什么。

ANYHOO，我有一个分隔图像，显示在每个表格行之后，使用“tr::after”css。这在任何浏览器中看起来都很好，除了 Internet Explorer，分隔符不是显示在表格行下方，而是挤压第二列并挤在它旁边[（图片）](http://jaxmedia.com/ie.png)

我似乎无法弄清楚这里发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:19:31.117

IE 8+ 支持[`:after`伪元素](http://msdn.microsoft.com/en-us/library/cc351024(v=vs.85).aspx#pseudoelements)- 注意单冒号 (:)

~~根据上面的链接，没有 IE 版本（虽然 IE 10 不在此列表中）支持两个冒号伪元素~~

**编辑：**

IE 9+ 支持两个冒号伪元素（正如@BoltClock 提到的那样[，IE9 是否支持 CSS3 ::before 和 ::after 伪元素？](https://stackoverflow.com/questions/7157405/are-css3-before-and-after-pseudo-elements-supported-by-ie9-or-not/7157425#7157425)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T19:36:18.487

您只使用了 CSS3 语法，该语法是为了区分伪元素和伪类（如`:hover`和）而创建的`:focus`。而元素的较晚目标*状态*，`::after`则以目标之后的伪元素为目标。

Internet Explorer 8 与其他浏览器一样，支持 CSS2 版本。直到 Internet Explorer 9 才添加对 CSS3 语法的支持。如果您想要完全兼容，您可以同时提供两者，或者在 IE8 注释中提供以前的 CSS2 语法。

[MSDN 文档](http://msdn.microsoft.com/en-us/library/ie/cc304076%28v=vs.85%29.aspx)声明如下：

> 在 Windows Internet Explorer 8 以及更高版本的 IE8 标准模式下的 Windows Internet Explorer 中，只能识别此伪元素的单冒号形式，即 :after。

![在此处输入图像描述](../Images/78185450a7e85b0c8c247098c8da12c7.png)

# python - == 并且在 python 中

> ID：14144707
> 
> 赞同：12
> 
> 时间：2013-01-03T18:14:26.957
> 
> 标签：python

自从我开始学习 python 已经有几天了，那时我偶然发现了`==`and `is`。来自java背景，我假设`==`通过对象ID和`is`值进行比较，但是做

```
 >>> a = (1,2)
 >>> b = (1,2)
 >>> a is b
 False
 >>> a == b
 True 
```

似乎`is`相当于 java 的`==`，python`==`相当于 java 的`equals()`. 这是思考`is`和之间区别的正确方法`==`吗？还是有警告？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-03T18:15:49.300

*   '==' 检查是否相等，
*   'is' 检查身份

也可以看看

[为什么在 Python 中使用 '==' 或 'is' 比较字符串有时会产生不同的结果？](https://stackoverflow.com/questions/1504717/python-vs-is-comparing-strings-is-fails-sometimes-why)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-03T18:20:19.040

`is`检查两个操作数是否是同一个对象。`==`调用[`__eq__()`](http://docs.python.org/2/reference/datamodel.html#object.__eq__)左操作数，传递右操作数。通常，此方法实现相等比较，但*可以*编写一个将其用于其他目的的类（但绝不应该）。

请注意，在某些实现中，对于某些对象（字符串文字、介于 -1`is`和`==`256 之间的整数）会给出相同的结果，但这并不意味着在这些情况下应该将运算符视为可替换的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T20:31:11.480

跟进@CRUSADER 的回答：

`==`**使用eq**方法检查对象的相等性。

`is`检查对象的实际*内存位置*。如果它们是相同的内存位置，则测试为`True`

如上所述，前 2**8 个整数存储在内存位置以提高速度，因此要查看发生了什么，请使用 256 以上的其他对象或整数。例如：

```
 In [8]: a = 1001
In [9]: b = a # this sets a pointer to a for the variable b
In [10]: a == b 
Out[10]: True # of course they are equal
In [11]: a is b 
Out[11]: True # and they point to the same memory location
In [12]: id(a)
Out[12]: 14125728
In [13]: id(b)
Out[13]: 14125728

In [14]: b = 1001 #this instantiates a new object in memory
In [15]: a == b
Out[15]: True 
In [16]: a is b
Out[16]: False #now the memory locations are different
In [17]: id(a)
Out[17]: 14125728
In [18]: id(b)
Out[18]: 14125824 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T18:40:44.677

这是看似同义的概念可能会使新程序员感到困惑的情况之一，例如我第一次写这个答案时。您与基于 Java 的假设很接近，但倒退了。这些运算符之间的区别归结为对象等效与对象身份的问题，但与您假设的相反，`==`按值`is`比较并按对象 id 比较。来自 cpython 的内置文档（通过`help("is")`在我的解释器提示下键入获得，但也可[在此处](https://docs.python.org/2.3/ref/comparisons.html)在线获得）：

> 身份比较 =====================
> 
> 运算符“是”和“不是”测试对象身份：当且仅当*x*和*y*是同一个对象时，“x 是 y”为真。对象身份是使用“id()”函数确定的。“x is not y”产生逆真值。

为了让经验不足的程序员（或任何需要复习的人）稍微了解一下，每个概念的粗略定义如下：

*   对象等效性：如果两个引用具有相同的有效值，则它们是等效的。

*   对象标识：如果两个引用指向同一个确切的对象，例如相同的内存位置，则它们是相同的

对象等价发生在您可能预期的大多数情况下，例如比较`2 == 2`或`[0, None, "Hello world!"] == [0, None, "Hello world!"]`. 对于内置类型，这通常是根据对象的值来确定的，但是用户定义的类型可以通过定义`__eq__`方法来定义自己的行为（尽管仍然建议以反映对象的完整值的方式这样做）物体）。对象同一性是可以导致对等的东西，但总的来说，完全是一个单独的问题。对象标识严格取决于 2 个对象（或者更确切地说，2 个引用）是否引用内存中完全相同的对象，由`id()`. 关于相同引用的一些有用说明：因为它们引用内存中的相同实体，所以它们总是（至少在 cpython 中）具有相同的值，并且除非`__eq__`被非常规地定义，因此将是等价的。如果您尝试通过就地操作（例如`list.append()`or ）更改其中一个引用，这甚至成立`my_object[0]=6`，并且应注意测试身份并制作应该分开的对象的副本（这是 的主要目的之一`is`：检测和处理别名）。例如：

```
>>> first_object = [1, 2, 3]
>>> aliased_object = first_object
>>> first_object is aliased_object
True
>>> aliased_object[0]= "this affects first_object"
>>> first_object
['this affects first_object', 2, 3]
>>> copied_object= first_object.copy() #there are other ways to do this, such as slice notation or the copy module, but this is the most simple and direct
>>> first_object is copied_object
False
>>> copied_object[2] = "this DOES NOT affect first_object"
>>> first_object
['this affects first_object', 2, 3]
>>> copied_object
['this affects first_object', 2, "this DOES NOT affect first_object"] 
```

有很多情况会导致 2 个引用被别名，但是在赋值运算符之外（它总是创建对分配对象的引用，如上所述），其中许多依赖于确切的实现，例如，不是 Python 的每个实现将在相同情况下实习字符串或抢先缓存（我不确定在这种情况下正确的术语是什么）相同的整数范围。例如，我安装的 cpython 似乎在启动时缓存了 -8，而本文似乎暗示这超出了正常范围。因此，即使`is`看起来在您的开发环境中工作，最好站在同一边，完全避免不一致的行为，并使用`==`. `is`应该保留用于您实际想要比较身份的情况。

# php - mysql_real_escape_string vs. mysql_escape_string vs. 其他函数

> ID：14144709
> 
> 赞同：-1
> 
> 时间：2013-01-03T18:14:35.760
> 
> 标签：php, mysql

我`mysql_real_escape_string`用于更好的安全性。为了更好的 mysql 性能，我现在正在考虑更换它。

我在[***mysql_escape_string VS mysql_real_escape_string***](https://stackoverflow.com/questions/3665572/mysql-escape-string-vs-mysql-real-escape-string)`mysql_real_escape_string`中找到了关于和的详细解释。`mysql_escape_string`[](https://stackoverflow.com/questions/3665572/mysql-escape-string-vs-mysql-real-escape-string)

 *我的问题是：

如果我使用持久连接并且知道字符集（仅 UTF-8），有没有办法`mysql_real_escape_string`用不使用 mysql 的东西替换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T18:17:30.763

首先，**停止**使用`mysql_query`和相关功能。它在 PHP 5.5 中已被弃用，并且在使用时会产生警告，因为您根本不应该使用它。

其次，**始终**使用`mysql_real_escape_string`并且仅使用它来逃避您的价值观。甚至不要考虑尝试其他方法。它丑陋、烦人，而且只是您不应该开始使用的众多原因之一`mysql_query`。不要自己滚。不要寻找更快的替代品，因为没有任何可以安全使用的替代品。

尽早切换到[PDO](http://bobby-tables.com/php)。如果您的应用程序处于严重的年久失修状态，转换成本可能会很高，但如果以严格的方式正确应用，则出现 SQL 注入错误的机会几乎为零。

如果您在转义函数方面遇到性能问题，我不知道您在做什么，但您可能做错了。这些通常接近于零成本，除非您实际上每页加载数百万个。您呈现的查询的执行时间几乎总是比准备语句本身所需的时间长得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:21:13.607

[http://dev.mysql.com/doc/refman/5.5/en/apis-php-class.mysqli.html](http://dev.mysql.com/doc/refman/5.5/en/apis-php-class.mysqli.html)

使用 MySQLi 库中的参数化查询；转义例程中以前存在错误，并且有可能再次出现。对查询进行参数化要麻烦得多，因此您不太可能受到 MySQL 错误的影响。*

# php - 当 MySQL 数据库中的“request_status”更改时通知 android 用户

> ID：14144710
> 
> 赞同：-2
> 
> 时间：2013-01-03T18:14:36.743
> 
> 标签：php, android, mysql, android-notifications

实际上，我想知道当有人接受他们的请求时如何通知用户（这意味着第二个人接受了请求并更新到 mysql 数据库）。

任何人都可以就如何在android客户端设计程序结构提出建议，以便它从数据库中的表中检查请求的状态，并在请求状态发生变化时通知用户。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:33:11.323

我认为您应该检查您的数据库，例如每秒检查一次，但如前所述，使用网页。它可能没有视觉方面。

`index.php`

```
class Synchroniser {
public void CheckStatus() {
//here you check what is up in database
return $status;
} 
```

`your program`在你做的一个线程中：

```
while(1) {
status = CallWebPage();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T19:30:55.673

如果您有自己的网站，您可以创建一个 cronjob 来检查每个已确认请求的列状态（例如数据库），然后发送推送通知，然后将列更改为已发送。此外，您可以在应用程序中创建一个服务来检查请求的状态并通知用户。注意：不要让检查数据库的时间非常接近，它会耗尽你的电池。

# javascript - 跨浏览器/站点/域脚本之间有什么区别？

> ID：14144714
> 
> 赞同：2
> 
> 时间：2013-01-03T18:14:50.710
> 
> 标签：javascript, css, jquery

今天，当我被问到什么是跨浏览器脚本时，我感到很困惑。根据我的理解，跨浏览器脚本与浏览器兼容性有关，跨站点脚本与 java-script hacks 和跨域脚本与 Ajax 调用有关。

我也尝试用谷歌搜索它，但没有得到明确的跨浏览器脚本概念。

请帮助我理解其中的区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T18:20:56.497

如果一个脚本是**跨浏览器**的，那么它在所有浏览器中的工作都是相当的。不同浏览器中的 JavaScript 引擎往往在一些小细节上有所不同。

**跨域脚本**要么是试图劫持用户会话（恶意）的攻击，要么是与另一个域通信的一种方式。跨域脚本（也称为跨域资源共享）的设置非常棘手。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T18:22:35.007

[“跨浏览器脚本”](http://www.webreference.com/js/article2/index.html)是一个有点古老的术语（您将看到链接的文章日期为 1997 年），意思是编写跨浏览器工作的脚本。最近这通常被称为“浏览器兼容性”。

[“跨站点脚本”](http://en.wikipedia.org/wiki/Cross-site_scripting)是一种攻击类型，涉及将恶意脚本作为其他人页面的一部分，以便提供一些危害其访问者的有效负载。

“跨域脚本”通常与“跨站点脚本”同义。

如果您的跨站点脚本攻击适用于所有浏览器，您可能倾向于将其称为“跨浏览器跨站点脚本”攻击或 XBXSS。

# c++ - 计算文件中每个字母的出现次数？

> ID：14144718
> 
> 赞同：2
> 
> 时间：2013-01-03T18:15:00.220
> 
> 标签：c++, c, algorithm, file, optimization

即使文件大小高达 4GB 或更大，如何以优化的方式找到字母 AZ 的出现（忽略大小写）？C++/C 中可能有哪些不同的实现？

一种实现是：

伪代码

```
A[26]={0}
loop through each character ch in file
If isalpha(ch)
     A[tolower(ch)-'A']+ = 1
End If
end loop 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T18:21:19.017

我认为剩下的优化不多。

*   无需计算`tolower()-'A'`每个元素，只需计算每个字符的出现次数（在`char[256]`累加器中），然后进行区分大小写的计算（可能更有效，只是尝试）。

*   一定要使用缓冲输入（`fopen`，也许用 分配更大的缓冲区[`setvbuf`](http://en.cppreference.com/w/c/io/setvbuf)）。

例如：

```
acum[256]={0}
loop through each character 'c' in file
     acum[c]++
end loop
group counts corresponding to same lowercase/uppercase letters 
```

另外，请记住，这假定为 ASCII 或派生（一个八位字节 = 一个字符）编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:18:17.227

对于 4GB，这不会是瞬时的。我知道如何更快地做你正在做的事情。

此外，您的代码不会处理制表符、空格或其他字符。您需要使用`isalpha()`并且仅在返回 true 时才增加计数。

请注意，这`isalpha()`是非常快的。但是，再一次，这个代码在输入非常大的情况下不会是瞬时的。

```
TCHAR a[26] = { 0 };

for (int i = 0; i < length; i++)
{
    if (isalpha(text[i]))
    {
        a[tolower(text[i]) - 'a']++;
    }
} 
```

# java - 如何删除自定义链表中的所有节点？

> ID：14144720
> 
> 赞同：1
> 
> 时间：2013-01-03T18:15:00.840
> 
> 标签：java

我是否可以删除我的链表的所有节点以通过我的这段代码删除？如果没有，那么如何一次删除所有节点！

我的代码是

```
EditNode mynode=start;
while(mynode!=null){
    mynode.editnext=null;
    mynode=mynode.editnext;
} 
```

需要帮助！提前致谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T18:17:43.233

您的代码不起作用，因为您正在设置然后尝试引用它`mynode.editnext`。`null`所以这行不通。

要删除链表中的所有节点，在 Java 中，只需清除头指针即可。Java 将垃圾收集其余部分。

```
start = null; 
```

请注意，此答案适用于您的自定义链接列表。在生产中，您应该使用 的 Java 实现`LinkedList`，它上面有一个`.clear()`方法。这是处理列表的一种更简洁的方法。

这是因为您可能有指向列表中某个项目的杂散指针，这将保持对列表其余部分的引用并防止垃圾收集。您不应该`editnext`在数据结构中构建像属性这样的组织结构。它们应该是单独的类。

要清除每个节点中的所有指针，请使用以下代码：

```
EditNode mynode;
while (start != null){
    mynode = start.editnext;
    start.editnext = null;
    start = mynode;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:17:28.653

你检查过 LinkedList 的[clear()方法吗？](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html#clear%28%29)

`public void clear()`- 从此列表中删除所有元素。此调用返回后，列表将为空。

# css - 为什么这个嵌套的 css 代码不起作用？

> ID：14144729
> 
> 赞同：0
> 
> 时间：2013-01-03T18:15:16.077
> 
> 标签：css

如果我有类似下面的代码，我希望我的链接是红色的大字体，但是它不起作用。

```
.footer {
  text-align: center;
}

.footer a {
  color: red;
  font-size: 32px;
} 
```

现场示例：http: [//jsfiddle.net/avUT4/](http://jsfiddle.net/avUT4/)

我不明白。我不擅长css，但为什么这段代码不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T18:21:16.620

`.footer a`规则前面有一些奇怪的字符。尝试将代码复制到[jsbin.com](http://jsbin.com/isiyut/1/)，您会看到它被一个红点标记。从 jsfiddle 复制时，这种情况经常发生在我身上。如果删除了字符，一切都很好。

[这](http://jsfiddle.net/avUT4/12/)是你的小提琴，没​​有那个角色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:22:03.497

据我所知，你在某处有一个垃圾字符。我重写了它，它很好。

```
.footer
{
 text-align:center;   
}

.footer a
{
 color:red;
 font-size:32px;    
} 
```

[http://jsfiddle.net/avUT4/10/](http://jsfiddle.net/avUT4/10/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T18:22:59.097

我认为这是 jsfiddle 中的一个错误。如果你只是定义：

```
a {
  color: red;
  font-size: 32px;
} 
```

有用。然后，如果您添加 .footer（只需在“a”之前重新输入它），它仍然可以工作，但在定义“.footer a”时它不会从起点开始工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T18:25:26.883

试试这个：

```
.footer {
  text-align: center;
}

.footer a:link, a:active {
  color: red;
  font-size: 120px;
} 
```

​</p>

# parsing - 在递归下降解析器中实现“cut”

> ID：14144730
> 
> 赞同：7
> 
> 时间：2013-01-03T18:15:16.863
> 
> 标签：parsing, prolog, backtracking, peg, prolog-cut

我正在用 Python 实现一个 PEG 解析器生成器，到目前为止我已经取得了成功，除了“剪切”功能，任何知道 Prolog 的人都必须知道。

这个想法是，在`!`解析了 cut ( ) 符号之后，不应在同一级别尝试其他选项。

```
expre = '(' ! list ')' | atom. 
```

表示在`(`看到之后，解析必须成功，否则不尝试第二个选项就失败。

我正在使用 Python 的（非常有效的）异常系统来强制回溯，所以我尝试了一个特殊的`FailedCut`异常来中止封闭的选择，但这没有用。

任何有关如何在其他解析器生成器中实现此功能的指针都会有所帮助。

也许我遇到的问题是缺乏地方性。为规则的左侧部分生成的代码类似于：

```
cut_seen = False
try:
    self.token('(')
    cut_seen = True 
    self.call('list')
    self.token(')')
except FailedParse as e:
    if cut_seen:
         raise FailedCut(e)
    raise 
```

然后，为choice( `|`) 运算符生成的代码如果捕获到a 将跳过以下选择`FailedCut`。我所说的缺乏局部性的意思是，捕捉到的选择`FailedCut`可能在电话中很深，因此产生的效果很难辨别。

我可以让为选择生成的代码提防它们，而不是让为序列生成的代码尝试通知封闭选择*cut 。*与 Prolog 不同，这将使削减的范围非常本地化，但对于我在 PEG 解析器中想要的东西来说已经足够了，即在看到某个标记序列后提交一个选项，因此错误报告是指该位置在源中，而不是到另一个可能有其他选项的位置。

我突然想到，如果为规则/谓词生成的代码捕获`FailedCut`并将其转换为正常`FailedParse`异常，那么剪切将具有正确的范围。

关于@false的问题，这是我想要工作的完整示例：

```
start = expre ;

expre = named | term ;

named = word ':' ! term;

term = word ; 
```

在该语法中，`word`可以通过`named`or到达`term`，但我希望解析器在`named`看到`:`.

## 解决方案

公平地说，到目前为止，我已经在[https://bitbucket.org/apalala/grako/](https://bitbucket.org/apalala/grako/)上发表了我的作品。

在最终解决方案中，序列包含在此上下文管理器中：

```
@contextmanager
def _sequence(self):
    self._push_cut()
    try:
        yield
    except FailedParse as e:
        if self._cut():
            self.error(e, FailedCut)
        else:
            raise
    finally:
        self._pop_cut() 
```

选择函数中的选项包含在以下内容中：

```
@contextmanager
def _option(self):
    p = self._pos
    try:
        self._push_ast()
        try:
            yield
            ast = self.ast
        finally:
            self._pop_ast()
        self.ast.update(ast)
    except FailedCut as e:
        self._goto(p)
        raise e.nested
    except FailedParse:
        self._goto(p) 
```

这迫使退出选择而不是返回尝试下一个选项。

削减本身是这样实施的：

```
def _cut(self):
    self._cut_stack[-1] = True 
```

完整的源代码可以在[Bitbucket](https://bitbucket.org/apalala/grako/src)上找到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T19:08:50.993

在具有 ISO Prolog 的异常处理（`catch/3`和`throw/1`）的 Prolog 中，可以将剪切实现为：

```
cut. % Simply succeeds
cut :-
   throw(cut). % on backtracking throws an exception 
```

这将需要在适当的位置捕获该异常。例如，用户定义谓词的每个目标（非终端）现在可以用以下内容包装：

```
catchcut(Goal) :-
   catch(Goal,cut,fail). 
```

这不是实现 cut 的最有效方法，因为它不会在成功时释放资源`!`，但它可能足以满足您的目的。此外，此方法现在可能会干扰用户定义的`catch/3`. 但是您可能无论如何都不想模仿整个 Prolog 语言。

另外，考虑直接使用 Prolog 的[dcg](/questions/tagged/dcg "显示标记为“dcg”的问题") -grammars。在用另一种语言实现时，有很多细节并不明显。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T21:30:43.350

我的问题末尾提出的解决方案有效：

```
cut_seen = False
try:
    self.token('(')
    cut_seen = True 
    self.call('list')
    self.token(')')
except FailedParse as e:
    if cut_seen:
         raise FailedCut(e)
    raise 
```

然后，每当评估一个选项或可选时，代码如下所示：

```
p = self.pos
try:
   # code for the expression
except FailedCut:
    raise
except FailedParse:
    self.goto(p) 
```

**编辑**

实际的解决方案需要保留一个“切割堆栈”。[源代码](https://bitbucket.org/apalala/grako/src/ed78d7a20b002bc65124b5125d982f40fab10d02/grako/parsing.py?at=default)是 int Bitbucket 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T23:33:16.560

就读吧。

我建议使用深度`cut_seen`（比如修改解析器的状态）以及使用局部变量保存和恢复状态。这将线程的堆栈用作“`cut_seen`堆栈”。

但是你有另一个解决方案，我很确定你已经很好了。

顺便说一句：不错的编译器——这与我用 pyPEG 做的正好相反，所以我可以学到很多东西 ;-)

# jquery - 固定任何分辨率的位置

> ID：14144731
> 
> 赞同：0
> 
> 时间：2013-01-03T18:15:17.097
> 
> 标签：jquery, html, css

我的 CSS 部分

```
html {
    background-image:url('Images/Site.jpg');

    background-repeat:no-repeat;

    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;

}
#webform {
    background-color: #FFFFFF;

    padding: 20px;
    position: absolute;
    right: 7.5%;
    top: 40%;

} 
```

我的html部分

```
<html>
<body>
<div id="webform" >

<form>bla bla bla </form>

</div>
</body>
</html> 
```

我的网站[在这里](http://bluewingholidays.com/uthpala/index.php)

我想将我的表单固定在它已经被调用的图像中（在“我如何帮助你”的空间下）？我怎么能这样做？

![在此处输入图像描述](../Images/e1c3eeb0007f93f8f02c7ab8d274b102.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:31:48.963

你处理这个问题的方式就是为什么它变得如此困难。您有一个包含背景、图像、名称、标题和选择框的背景图像。这些都应该单独切片，并在您的 HTML 中使用 CSS 定位。

我建议您不要再回答您的问题，而是回到您的设计中（无论是在 photoshop、gimp 或其他程序中），然后将所有内容切片，将每个元素放入您的 html 中，并使用 CSS 定位它。这就是 HTML 标记的工作原理。如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:26:54.713

如果您想要固定位置，请使用固定值，而不是百分比。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-03T18:32:33.937

我知道你想做什么，但是你不会使用固定值的百分比来完成它.....

您需要将表单周围的正方形保存为具有透明背景的分隔图像，并将此图像用作表单而不是整个网站的背景。

```
#webform {
background-image:url(images/your_image.jpg);
padding: *;
} 
```

*使用您的 bg 图像的顶部、左侧、右侧和底部的图像尺寸，直到它到达表格。

# jquery - 单击时切换文本和背景颜色

> ID：14144737
> 
> 赞同：0
> 
> 时间：2013-01-03T18:15:38.080
> 
> 标签：jquery

我有四个圆圈，每个圆圈都有一个独特的背景颜色和一个白色的跨度。当用户单击每个圆圈时，我希望该圆圈切换背景和跨度颜色，或者换句话说，我希望为跨度设置背景颜色，并且背景变为白色。

我的代码正确执行此操作，但是当我单击任何其他圆圈时，我希望该圆圈具有白色背景和彩色跨度，而前一个圆圈恢复为默认值（白色跨度，彩色背景）。

jQuery：

```
$("#fifthcircleholder li").click(function () {
    var currentspan = $(this).find("span");
    var allspans = $("#fifthcircleholder li").find("span");

    $(this).find("span").css({
        color: $(this).css("background-color")
    });
    $(allspans).not(currentspan).css({
        "color": "#fff"
    });
    $(this).css({
        "background-color": "#ffffff"
    })

    var found = $("#fifthcircleholder li");
    if (found.css("background-color") == "#fff") {
        $(this).find("span").css({
            "background-color": $(this).css("color")
        });
    }

}); 
```

的HTML：

```
<ul id="fifthcircleholder">
    <li id="fifthc1"><span>blah blah</span></li>
    <li id="fifthc2"><span>blah</span></li>
    <li id="fifthc3"><span>blah</span></li>
    <li id="fifthc4"><span>blah</span></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:41:11.160

试了一下，希望对你有帮助：

[http://jsfiddle.net/jnLMy/](http://jsfiddle.net/jnLMy/)

HTML：

```
<ul id="fifthcircleholder">
<li id="fifthc1"><span>blah blah</span></li>
<li id="fifthc2"><span>blah</span></li>
<li id="fifthc3"><span>blah</span></li>
<li id="fifthc4"><span>blah</span></li>
</ul>​ 
```

CSS：

```
li { width:100px; padding:20px; cursor:pointer; text-align:center; }
li span { background:#fff; }

#fifthc1 { background:lime; }
#fifthc2 { background:yellow; }
#fifthc3 { background:orange; }
#fifthc4 { background:blue; } 
```

JS：

```
$("#fifthcircleholder li").click(function() {

    $('#fifthcircleholder li').each(function() {
        if( hexc( $(this).css('background-color') ) === '#ffffff' ){
            $(this).css('background-color', $(this).find('span').css('background-color') );
            $(this).find('span').css('background-color', '#ffffff' );
        }        
    });    

    $(this).find('span').css('background-color', $(this).css('background-color') );
    $(this).css('background-color', '#ffffff');
});

function hexc(colorval) {
    var parts = colorval.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
    delete(parts[0]);
    for (var i = 1; i <= 3; ++i) {
        parts[i] = parseInt(parts[i]).toString(16);
        if (parts[i].length == 1) parts[i] = '0' + parts[i];
    }
   return '#' + parts.join('');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:21:00.983

试试这个脚本：http: [//jsfiddle.net/YAJma/](http://jsfiddle.net/YAJma/)

```
$("#fifthcircleholder li").click(function() {
    $('span').css({"color":"black", "background":"white"});
    $('span',this).css({"color":"red", "background":"yellow"});
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T18:33:03.803

```
$("#fifthcircleholder li").click(function() {
        //reset potentially previously set colors:
        $('#fifthcircleholder li').each(function(){
            //child span's color
            var spanColor=$('span',this).css('background-color');
            if(spanColor!='white'){
                $(this).css('background-color',spanColor);
                $('span',this).css('background-color','white');
            }
        });
        //now for the colors of the currently clicked li
        var liColor=$(this).css('background-color');
        $('span').css('background-color',liColor);
        $(this).css('background-color','white');
}); 
```

# asp.net-mvc - 如何确定我的 mvc 控制器中的浏览器分辨率？

> ID：14144746
> 
> 赞同：2
> 
> 时间：2013-01-03T18:16:02.803
> 
> 标签：asp.net-mvc, screen-resolution

我知道我可以使用 Javascript 来获取浏览器的分辨率，但我不知道如何将其返回到控制器，以便我可以计算网格行和列的大小。我不允许使用滚动条，我必须让网格准确显示适合该页面的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T18:26:47.697

您可以使用[51degrees.mobi](http://51degrees.mobi/Support/Documentation/Foundation.aspx)，但它对于您的需要不是免费的。

```
 protected void Page_Load(object sender, EventArgs e)
   {
       int x = Request.Browser.ScreenPixelsWidth;
       int y = Request.Browser.ScreenPixelsHeight;
   } 
```

# eclipse - 当我尝试在 Eclipse/STS 中部署到 Tomcat/tc 服务器时出现 ClassNotFoundException

> ID：14144748
> 
> 赞同：1
> 
> 时间：2013-01-03T18:16:11.077
> 
> 标签：eclipse, tomcat, maven, m2eclipse, eclipse-wtp

我是 Eclipse/STS 的新手，我正在部署到 Tomcat/tcServer。我的项目构建得很好，并且在 Netbeans 和直接到 Tomcat 中都可以很好地部署到 Tomcat，但它不会在 Eclipse 中部署到 Tomcat 或 tc Server。我得到 org.hibernate.HibernateException 的 ClassNotFoundException，我知道它包含在 pom.xml 中。

如果有帮助，这是我的[日志输出。](https://dl.dropbox.com/u/18643672/DO-NOT-ERASE/class-not-found-tomcat.log)

同样在标记视图中，我看到以下构建路径问题：

```
Archive for required library: '~/.m2/repository/org/hibernate/hibernate-core/4.1.1.Final/hibernate-core-4.1.1.Final.pom' in project 'flamespass-web-dev' cannot be read or is not a valid ZIP file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:39:55.997

我找到了一个解决方法：我注意到我的依赖层次结构中有两次 hibernate-core:4.1.1.Final，所以我尝试了一些东西，并在我的依赖管理节点中指定了最新版本的 hibernate-core 解决了我的问题。

我不确定为什么。我只能假设 hibernate-core:4.1.1 的两个副本造成了某种歧义，即使我的外部 Maven/Tomcat 可以理解，m2eclipse 或 WTP 也无法理解。我非常感谢任何人可能拥有的任何解释或更好的修复。谢谢。

```
 ...
</dependencies>
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.1.9.Final</version>
        </dependency>
    </dependencies>
</dependencyManagement> 
```

# ruby-on-rails - 获取字段表 Father Ruby on Rails

> ID：14144749
> 
> 赞同：0
> 
> 时间：2013-01-03T18:16:18.217
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

所以，我在模型**comment.rb中做了这个属性**

```
has_one :user 
```

我的表格是这样的

```
<% @post.comments.each  do |com| %>
    Comentário<br><%= com.comment %>    
<% end %> 
```

我的问题是，发表评论时如何获得用户？

* * *

我有一个问题，我把这个归因于我评论模型：

```
class Comment < ActiveRecord::Base
  attr_accessible :comment
  belongs_to :post
  belongs_to :user 
```

这在用户模型中

```
class User < ActiveRecord::Base
  attr_accessible :email, :password, :password_confirmation
  has_many :posts
  has_many :comments 
```

但这不起作用：

```
 <% post.comments.each do |comment|   %>
    <div id="comments" >
      <%= comment.user.email %>
           <%= comment.comment %>
    </div>
   <%end%> 
```

出现错误：

```
undefined method `email' for nil:NilClass 
```

请问有什么问题，在创建评论时我做出了属性，请看：

```
 @comment = @post.comments.create(params[:comment],:user_id => current_user.id) 
```

请问我如何解决这个错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:28:37.693

例如，您只需添加此代码`<%= com.user.username %>`即可显示用户的用户名

# css - 如何将 div 浮动到不同 div 中的背景图像上

> ID：14144757
> 
> 赞同：1
> 
> 时间：2013-01-03T18:16:41.430
> 
> 标签：css, html, nested

在我的 CSS 中，我创建了一个 menubar`<div>`和一个 header `<div>`。我的目的是让菜单行与标题背景图像的底部齐平，因此我将菜单嵌套在标题内。唉，它不起作用，我不知道为什么。

我创建了一个[fiddle](http://jsfiddle.net/dwwilson66/CJ3Gh/)，但我不知道如何上传相关的图像文件，所以我附上了标题占位符 image ![标题背景占位符](../Images/e8ba659fb89e3693bc184561c07de07e.png)。我还上传了一个 Wireframe ![线框](../Images/aeab9747842c6671041581176d9fe448.png)，展示了我正在努力实现的目标。

如果您无法查看小提琴，这是我的 HTML 和 CSS：

HTML：

```
<!DOCTYPE html PUBLIC "-//W3c/DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!-- ------------------------------------------------------------------------>
<head>
    <title>Test</title>
    <LINK rel="stylesheet" href="t2.css" type="text/css">
</head>
<!-- ------------------------------------------------------------------------>

<body>
    <div id="header" >
        <div id="menubar">
            <a href="#">home</a>  |  <a href="#">about</a>  |  <a href="#">contact</a>
        </div>
    </div>
</body>
</html> 
```

CSS：

```
body     {
    background-color: #FFFFFF;
    color: #000064;
    font-family: "Calibri", sans-serif;
    font-size: 12px;
    }

h1    {
    background-color: #FFFFFF;    
    color: #000064;
    font-family: "Calibri", sans-serif;
    font-size: 2em;
    }

h2    {
    background-color: #FFFFFF;    
    color: #000064;
    font-family: "Calibri", sans-serif;
    font-size: 1.5em;
    margin-left: 5%;
    }

h3    {
    background-color: #FFFFFF;    
    color: #000064;
    font-family: "Calibri", sans-serif;
    font-size: 1em;
    margin-left: 20%;
    }

p    {
    background-color: #FFFFFF;
    color: #000064;
    font-family: "Calibri", sans-serif
    font-size: 12px;
    padding: 0px 0px 0px 600px;
    margin: 0px:
    float: bottom;
    }

a    {
    color: #000064;
    text-decoration: none;
    font-family: "Calibri", sans-serif;
    font-size: 14px;
    }

a.visited {
    color: #640064;
    weight: bold;
    text-decoration: none;
    }

#header {
    height: 120px;
    background-color: #ffffff;
    background-image: url(headerblock.jpg);
    background-repeat: no-repeat;
    background-position: top left;
    float: bottom;
    }

#menubar {
    border-width: 1px 0px 1px 0px;
    border-color: #000064;
    border-style: solid;
    font-family: "Calibri", sans-serif;
    font-size: 14px;
    line-height: 16px;
    float: bottom;
    padding: 0px 0px 0px 600px;
    margin: 0px 0px 0px 0px;
    }

#menubar a {
        text-decoration: none;
        color: #000064;
        float: bottom;
        }

#menubar a.visited {
    text-decoration: bold;
    color: #000000;
    float: bottom;
        } 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T19:59:19.610

将图像放在单独的 div 中，全部在标题中，如下所示：

```
<div id="header">
    <div id="banner"></div><!--
 --><div id="menubar"></div>
</div> 
```

然后使用`display: inline-block;`on`#banner`和`#menubar`。
注意 HTML 注释 after`#banner`和 before `#menubar`。就是去掉这些元素之间的空白，如果你不关心空白，你可以把它去掉。查看此内容以获取更多信息：[与内联块元素之间的空间作斗争](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)。

检查这个[小提琴](http://jsfiddle.net/CJ3Gh/11/)。

顺便说一句，您应该使用`<ul>`and`<li>`进行导航。
并在分隔符上使用边框，而不是`|`. 那是为了演示，演示应该用css而不是html来处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:23:21.167

你`#menubar`有一个 600px 的填充，将 div 推出。也`Float`不能是`Bottom`，要么是`Left`要么`Right`。

为了使它完美地放置`position:relative`在标题 div 和`position:absolute; bottom:0px; left:0px;`子 div 中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T18:23:22.653

参数`float`接受`left`or 。`right`没有这样的事情`float: bottom`。

但是如果你添加`position: relative`到标题 div。您可以使用`position: absolute; left: 0; bottom: 0;`

**更新**

您可能必须为菜单栏指定宽度，以防止文本向下换行。

# python - 使用 python 嵌入式绑定查询 neo4j 索引中的所有字段

> ID：14144758
> 
> 赞同：2
> 
> 时间：2013-01-03T18:16:42.287
> 
> 标签：python, lucene, neo4j

我正在尝试查询所有字段的节点索引。这是我认为可行的：

```
idx = db.node.indexes.get('myindex')
idx.query('*:search_query') 
```

但这不会返回任何结果。但是，这有效

```
idx = db.node.indexes.get('myindex')
idx.query('*:*') 
```

它按预期返回索引中的所有节点。假设第一个版本应该可以工作，我错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T04:01:13.673

我不指望第一个版本可以工作，而第二个版本却让我感到惊讶。Neo4j 使用[这种 Lucene 语法](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html)解析这些查询——我没有看到任何关于通配符字段的信息。相反，删除该字段以搜索隐含的“所有字段”。

插件 - 为了更简单的方式构建 Lucene 查询（与 Neo4j 兼容），请查看[lucene-querybuilder](https://github.com/scholrly/lucene-querybuilder)。它被[neo4j-rest-client](https://github.com/versae/neo4j-rest-client)和[neo4django 使用](https://github.com/scholrly/neo4django)。

编辑：

我似乎无法找到对我认为存在的“所有字段”隐式搜索的支持 - 抱歉！我猜你只需要手动在查询中包含所有字段（例如，“name:falmarri OR userType:falmarri”）。

# vb.net - VB.Net：在 TableLayoutPanel 中使用和寻址按钮

> ID：14144766
> 
> 赞同：1
> 
> 时间：2013-01-03T18:17:12.737
> 
> 标签：vb.net, controls, tablelayoutpanel

嗨，我的程序中当前有这个 TablelayoutPanel 设置，用于创建稍后对应特定列和行的按钮网格：

```
'****INITIALISES TABLE LAYOUT INTO FORM******
    Dim ColCount, RowCount As Integer

    'Later change so that values are automatically calculated
    ColCount = 5
    RowCount = 5

    '*********Copy and pasted from site as example, CHANGE LATER*******
    Haztable = New TableLayoutPanel
    Haztable.AutoScroll = True
    Haztable.Dock = DockStyle.Fill
    Haztable.ColumnCount = ColCount
    Haztable.RowCount = RowCount
    For rowNo As Integer = 0 To Haztable.RowCount - 1
        For columnNo As Integer = 0 To Haztable.ColumnCount - 1
            'Dim ctrl As Control = New Button
            'ctrl.Text = String.Format("{0} {1},{2}", ctrl.GetType().Name, columnNo, rowNo)
            'ctrl.Size = New Size(20, 20)
            'Haztable.Controls.Add(ctrl, columnNo, rowNo)
            Dim buttonname As String
            buttonname = "B" & columnNo & rowNo
            Dim button As Control = New Button
            button.Size = New Size(70, 20)
            button.Name = buttonname
            button.Text = buttonname
            Haztable.Controls.Add(button, columnNo, rowNo)
            AddHandler button.Click, AddressOf buttonname_Click
        Next
    Next
    Me.Controls.Add(Haztable)
    Call buttonfind() 
```

这一切都有效，创建了一个按钮网格，很像 Excel 电子表格的布局。

这些按钮根据它们的 XY 位置命名（例如，（1,1）中的按钮将被称为“B11”）但问题是我似乎无法弄清楚如何解决这些按钮，即

*如果单击 B(XY)，则保存按下 X,Y 处的按钮的布尔值。

最好有一种算法来扫描并检查是否按下了任何按钮，而不是为每个按钮使用“选择案例”。我只会在设计器中创建按钮，但对于我的完整代码，我需要 1000 多个按钮，这似乎是一种低效的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:21:29.050

您的 buttonname_Click 应该有一个 Sender 对象，它是您单击的 Button，只需将其转换为 Button 并检查名称。

```
Private Sub buttonname_Click(sender As System.Object, e As System.EventArgs) 
    Dim btn As Button = CType(sender, Button)

    Select Case btn.Name
        Case "B11"
            'Do something
        Case "B12"
            'Do Something esle

            '...........
    End Select

End Sub 
```

* * *

根据您的最后一条语句，看看这是否有效，如果您需要在程序中的其他地方引用文本，您可能需要构建一个数组或列表

```
Private Sub buttonname_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim btn As Button = CType(sender, Button)

    If btn.Text = "H" Then
        btn.Text = "M"
    ElseIf btn.Text = "M" Then
        btn.Text = "L"
    ElseIf btn.Text = "L" Then
        btn.Text = ""
    Else
        btn.Text = "H"
    End If

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:33:11.757

您已经添加了单击事件并使用它们的行号和列号来处理它们中的每一个。首先为自己创建一个新按钮，这样您就可以访问行号和列号，而**无需花费精力**从控件名称中解析列号和行号：

```
Public Class NewButton
    Inherits Button
    Public Row, Column, ClickCount as Integer
End Class 
```

现在创建并处理：

```
Public Class Form1
    Sub addbuttons()
        Dim newbut As New NewButton
        newbut.Name = "B12"
        newbut.Row = "1"
        newbut.Column = "2"
        'and other properties...
        AddHandler newbut.Click, AddressOf clicked
        Me.Controls.Add(newbut)
    End Sub
    Sub clicked(sender As System.Object, e As System.EventArgs)
        Dim x As NewButton = DirectCast(sender, NewButton)
        If x.Column = 2 And x.Row = 1 Then
            x.ClickCount += 1
        End If
    End Sub
End Class 
```

# objective-c - CoreData 模型更新崩溃

> ID：14144772
> 
> 赞同：3
> 
> 时间：2013-01-03T18:17:32.040
> 
> 标签：objective-c, ios, cocoa-touch, core-data

当我更新我的 CoreData 模型时，它会使应用程序崩溃，所以我必须删除旧应用程序，然后重新安装。这对我来说很好，但我的问题是：我如何告诉我的客户他们必须在重新安装之前删除应用程序？这似乎太复杂了...我只是在模型中添加 1 个附加字段，仅此而已。

有没有更好的方法来处理这个问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T18:23:10.877

您需要设置数据库迁移... 在客户更新时将其现有数据升级到最新的数据模型。对于某些更改，Core Data 可以为您完成。对于其他人，您必须自己编写迁移代码。

也许从这里开始：[https ://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/Introduction.html](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/Introduction.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:25:29.597

就像@Nielsbot 所说，Core Data 使用了一个迁移系统。

您可以创建模型的新版本并选择要使用的版本。在您的 AppDelegate 方法中有一些代码需要更改，其中持久存储协调器加载模型以告诉它加载版本。我建议您阅读 Apple 关于如何实现此功能的文档：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/Introduction.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/Introduction.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T18:26:11.463

如果您只是将一个字段添加到表中，那么您可以创建一个新版本的数据库。保持当前不变。

在其中一个菜单中有一个创建新数据版本或其他内容。

在新版本中进行更改。

有很多关于如何做到这一点的教程。

如果您发布的更新导致应用程序崩溃，那么苹果将不会批准它，因此无论如何您都必须这样做。

# c - C - 在堆栈上返回 2 个值

> ID：14144773
> 
> 赞同：2
> 
> 时间：2013-01-03T18:17:32.560
> 
> 标签：c, stack

> **可能重复：**
> [从函数返回多个值](https://stackoverflow.com/questions/3829167/returning-multiple-values-from-a-function)

我一直坚持将 2 个值返回到堆栈。我的任务是编写一个计算复数的程序。一切都很好，但只有一件事。在除数的函数中，我想做两种情况：

1.  如果我除以的数字不等于 0，则只需除以并将结果作为一个值返回。
2.  如果数字除以等于 0，我想返回 2 个值。

对于复数，我使用结构（双实数和双虚数）。我使用的函数是复数结构类型。通过函数返回我只能返回 1 个值。如何返回第二个以使堆栈上的数字与除法前相同？我知道我应该使用指针，但我仍然不知道如何在这里使用它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T18:23:10.533

由于您已经有一个复数结构（我将调用它`complex`），您可以只返回一个实例：

```
struct one_or_two_complexes { 
     int howmany; 
     struct complex first; 
     struct complex second; 
}; 
```

这是否是一个好主意可能取决于调用者如何使用它

在调用者确定除数*不*为零的情况下，他们可以只写`complex result = your_function(a,b).first;`，这很好。

如果调用者不确定，并且想要根据它是否为零来做一些不同的事情，那么他们可以将函数调用的结果存储在他们自己的实例中`one_or_two_complexes`然后检查`howmany`，或者他们可以检查无论他们传入的除数是否为零，并且在不同情况下以不同方式调用您的函数。

# python - 编辑 voronoi 类以在 python 中返回多边形点

> ID：14144778
> 
> 赞同：3
> 
> 时间：2013-01-03T18:17:44.587
> 
> 标签：python, graph, voronoi

有 Python 经验的人可以帮我看看这个吗？

我正在使用这段代码：

[https://bitbucket.org/mozman/geoalg/src/5bbd46fa2270/geoalg/voronoi.py](https://bitbucket.org/mozman/geoalg/src/5bbd46fa2270/geoalg/voronoi.py)

在一组点上执行 voronoi 细分。

它可以工作，但问题是代码只提供了用于创建多边形的所有顶点的列表，以及哪些对必须连接在一起。它没有提供任何关于哪些点用于构成每个多边形的信息，这是我需要的。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T20:01:49.240

`context.triangles`表示 Delaunay 三角形输入点参与其中。每个三角形都与一个 Voronoi 顶点相关。`triangles`三角形和顶点并行存储在`vertices`数组中。

要找到给定点的 Voronoi 单元，`p`需要找到使用输入点的所有顶点（三角形）。而不是找到这些顶点如何通过`edges`数组连接的顺序。

这是一个简单的（未经测试的）代码：

```
from voronoi import voronoi
import random
from collections import defaultdict

num_points = 50
points = [(random.uniform(0,10), random.uniform(0,10)) for i in xrange(num_points)]
c = voronoi(points)

# For each point find triangles (vertices) of a cell
point_in_triangles = defaultdict(set)
for t_ind, ps in enumerate(c.triangles):
    for p in ps:
        point_in_triangles[p].add(t_ind)

# Vertex connectivity graph
vertex_graph = defaultdict(set)
for e_ind, (_, r, l) in enumerate(c.edges):
    vertex_graph[r].add(l)
    vertex_graph[l].add(r)

def cell(point):
    if point not in point_in_triangles:
        return None
    vertices = set(point_in_triangles[point]) # copy
    v_cell = [vertices.pop()]
    vertices.add(-1)  # Simulate infinity :-)
    while vertices:
        neighbours = vertex_graph[v_cell[-1]] & vertices
        if not neighbours:
            break
        v_cell.append(neighbours.pop())
        vertices.discard(v_cell[-1])
    return v_cell

for p in xrange(num_points):
    print p, cell(p) 
```

# javascript - 在 window.resize 上动态设置数据表高度的最佳方法是什么？

> ID：14144780
> 
> 赞同：0
> 
> 时间：2013-01-03T18:17:56.830
> 
> 标签：javascript, jquery, datatables

我的应用程序中有多个选项卡，其中包含多个数据表。

我正在尝试找出一种根据屏幕尺寸调整数据表高度的方法。

我尝试了以下功能，但调整窗口大小时似乎没有增加数据表的高度。有什么建议会很有帮助吗？

```
 var calcDataTableHeight = function(percentageValue) {
             return $(window).height()*(percentageValue)/100;
         };

$(window).resize(function() {
          var table = $.fn.dataTable.fnTables(true);
                if ( table.length > 0 ) {
                    for(var i=0;i<table.length;i++){
                        $(table[i]).dataTable().css({ height: $(table[i]).dataTable().parent().height() });
                        $(table[i]).dataTable().fnAdjustColumnSizing();  
                    }
                }
                }
     }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:45:46.047

我想出了一种使用scrollY参数增加高度的方法......下面的示例片段......

```
$(window).resize(function() {
    var table = $.fn.dataTable.fnTables(true);
    if (table.length > 0) {
        for(var i = 0; i < table.length; i++) {
            $(table[i]).dataTable().fnSettings().oScroll.sY = 
                $(window).height() < 650 ? calcDataTableHeight(40) : calcDataTableHeight(54);
            $(table[i]).dataTable().fnAdjustColumnSizing();  
        }
    }
});

function calcDataTableHeight(percentageValue) {
    return $(window).height()*(percentageValue)/100;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:59:35.270

我用了这个，它奏效了

```
$(function(){
//set the main frame height on page load and page resize
    windowHeight = function windowHeight(){
        winHei = $(window).height()//window height without pixels
        $('div.clients-content').css('height', winHei - 130 + 'px');//dataTables container//130 is for my page design consider your own
        $('div.clients-content div.dataTables_scroll').css('height', winHei - 220 + 'px');//this is dataTable scroll container
        $('div.clients-content div.dataTables_scrollBody').css('height', winHei - 250 + 'px');//this is dataTable scroll body
    };
    windowHeight();
    $(window).resize(function(){
        windowHeight();
    });
}); 
```

# c++ - 在 C++ 中接收 USB 设备插入的通知/事件/信号

> ID：14144781
> 
> 赞同：3
> 
> 时间：2013-01-03T18:17:57.323
> 
> 标签：c++, c, linux, usb

我一直在寻找一段时间，但我一直无法找到这个问题的答案。我正在尝试接收特定 USB 设备的连接通知。这是我所拥有/知道的：

我正在运行 linux 内核版本 3.2。我有识别 USB 设备所需的 ID。我创建了一个用于读取和写入设备的内核模块。内核模块已经过测试并且可以正常工作。内核模块创建 /dev/Component#。

我正在尝试编写一个通知 USB 设备连接事件的程序，因此不需要循环 /dev/Component# 并检查文件是否存在。我希望有一个已经存在的信号/通知/事件。我看过 libusb，但我的理解是你实际上只是在创建一个读取所有设备的循环。我考虑过添加一个系统调用，但重新编译内核并不是一个真正的选择。

任何帮助将不胜感激。

谢谢，

蹲下中士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:32:51.437

有一个使用 dbus 的解决方案。首先，如果尚未安装库 libdbus-glib（在 Debian / Ubuntu 上调用该软件包`libdbus-glib-1-dev`），您应该安装它。[然后你可以在这里](https://stackoverflow.com/questions/11011603/dbus-glib-bindings-udisks-error)峰值一个程序，像这样编译程序：

```
gcc -o dbus-usb dbus-usb.c $(pkg-config --libs --cflags dbus-glib-1) 
```

# android - Android：给列表视图中的每个复选框一个侦听器而不覆盖其他复选框

> ID：14144784
> 
> 赞同：0
> 
> 时间：2013-01-03T18:18:04.113
> 
> 标签：android, listener

因为我的 listView/List 项目有复选框，所以我有问题，当我滚动列表时，复选框被选中或取消选中。因此，例如，我需要跟踪 ArrayList 中的已检查项目。因此，我在每个复选框上添加了一个 OnCheckedChangeListener，并在列表视图的自定义适配器的“getView”中添加了侦听器。

现在，由于每个复选框都会对单击做出反应，因此我遇到了以下问题。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {    
...
cb.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            if (isChecked) {
                if (!MainActivity.getSharedInstance().getIsCheckedArray().contains(tasks.get(MainActivity.ID)))
                    MainActivity.getSharedInstance().getIsCheckedArray().add(tasks.get(MainActivity.ID));
                for (String i : MainActivity.getSharedInstance().getIsCheckedArray()) {
                    Log.i("RUN", i);
                }
            } else {
                if (MainActivity.getSharedInstance().getIsCheckedArray().contains(tasks.get(MainActivity.ID)))
                    MainActivity.getSharedInstance().getIsCheckedArray().remove(tasks.get(MainActivity.ID));
                for (String i : MainActivity.getSharedInstance().getIsCheckedArray()) {
                    Log.i("RUN", i);
                }
            }
        }
    }); 
```

从每个列表项中，我都有一个自己的 ID，我可以使用该 ID 访问该项目。但是当我点击复选框获取 ID 时，我只得到一个项目的 ID（最后一个项目）。当我单击其他复选框时，它们会对更改做出反应，但我只从最后一项而不是从最后一项之前的项目中获取 ID。

当我总是创建新的监听器时，我会覆盖监听器吗？

**更新：** 没关系，我将此添加到 onCheckChangeListener

```
String curIndex = tasks.get(MainActivity.ID); 
```

它奏效了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:18:54.597

我认为您的错误是，您不使用 LayoutInflater。你试一试：

```
 LayoutInflater inflater =  (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View view = inflater.inflate(R.layout.yourListViewItemLayout, parent,false);

    final Checkbox yourCheckBox = (CheckBox)view.findViewById(R.id.yourCheckBoxId);
             yourCheckBox.setOnCheckedChangeListener...... 
```

这应该工作

# linux - 奇怪的 ELF 二进制文件

> ID：14144786
> 
> 赞同：5
> 
> 时间：2013-01-03T18:18:10.553
> 
> 标签：linux, reverse-engineering, elf

我有一个奇怪的 ELF 二进制文件。我可以在 32 位 linux 中运行这个二进制文件。

但是如果我用 IDA 反汇编程序打开这个二进制文件，IDA 会说“入口点无效”。

readelf的结果如下：

```
root@meltdown-VirtualBox:/home/meltdown# readelf -S -l SimpleVM 

There are no sections in this file.

Elf file type is EXEC (Executable file)
Entry point 0xc023dc
There are 2 program headers, starting at offset 52

Program Headers:
  Type           Offset   VirtAddr   PhysAddr   FileSiz MemSiz  Flg Align
  LOAD           0x000000 0x00c01000 0x00c01000 0x013c7 0x013c7 RWE 0x1000
  LOAD           0x00019c 0x0804b19c 0x0804b19c 0x00000 0x00000 RW  0x1000 
```

没有部分。我认为这个二进制文件是打包好的。但是，第一个 LOAD 段的最后一个虚拟地址是 0xc023c7。入口点的虚拟地址是 0xc023dc 超出范围...

有人可以告诉我发生了什么事吗？

先感谢您。

*   /proc/PID/maps 如下（创建了两个进程...）

    ```
    root@meltdown-VirtualBox:/proc/3510# cat maps
    00110000-00111000 rwxp 00000000 00:00 0 
    006c0000-006c1000 r-xp 00000000 00:00 0          [vdso]
    007d2000-007d4000 rwxp 00000000 00:00 0 
    00c01000-00c02000 rwxp 00000000 08:01 3801242    /home/meltdown/SimpleVM
    00ca4000-00e43000 r-xp 00000000 08:01 17171359   /lib/i386-linux-gnu/libc-2.15.so
    00e43000-00e45000 r-xp 0019f000 08:01 17171359   /lib/i386-linux-gnu/libc-2.15.so
    00e45000-00e46000 rwxp 001a1000 08:01 17171359   /lib/i386-linux-gnu/libc-2.15.so
    00e46000-00e49000 rwxp 00000000 00:00 0 
    08048000-0804b000 r-xp 00000000 00:00 0 
    0804b000-0804c000 rwxp 00000000 00:00 0 
    b77a7000-b77c7000 r-xp 00000000 08:01 17171339   /lib/i386-linux-gnu/ld-2.15.so
    b77c7000-b77c8000 r-xp 0001f000 08:01 17171339   /lib/i386-linux-gnu/ld-2.15.so
    b77c8000-b77c9000 rwxp 00020000 08:01 17171339   /lib/i386-linux-gnu/ld-2.15.so
    bfa90000-bfab1000 rwxp 00000000 00:00 0          [stack]

    root@meltdown-VirtualBox:/proc/3511# cat maps
    00110000-00111000 rwxp 00000000 00:00 0 
    006c0000-006c1000 r-xp 00000000 00:00 0          [vdso]
    007d2000-007d4000 rwxp 00000000 00:00 0 
    00c01000-00c02000 rwxp 00000000 08:01 3801242    /home/meltdown/SimpleVM
    00ca4000-00e43000 r-xp 00000000 08:01 17171359   /lib/i386-linux-gnu/libc-2.15.so
    00e43000-00e45000 r-xp 0019f000 08:01 17171359   /lib/i386-linux-gnu/libc-2.15.so
    00e45000-00e46000 rwxp 001a1000 08:01 17171359   /lib/i386-linux-gnu/libc-2.15.so
    00e46000-00e49000 rwxp 00000000 00:00 0 
    08048000-0804b000 r-xp 00000000 00:00 0 
    0804b000-0804c000 rwxp 00000000 00:00 0 
    b77a7000-b77c7000 r-xp 00000000 08:01 17171339   /lib/i386-linux-gnu/ld-2.15.so
    b77c7000-b77c8000 r-xp 0001f000 08:01 17171339   /lib/i386-linux-gnu/ld-2.15.so
    b77c8000-b77c9000 rwxp 00020000 08:01 17171339   /lib/i386-linux-gnu/ld-2.15.so
    bfa90000-bfab1000 rwxp 00000000 00:00 0          [stack] 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T18:38:30.233

这可能是因为映射长度的粒度。映射的长度将向上舍入为页面大小的倍数。在我的系统上，页面大小为 4k，因此映射将四舍五入为 4k 并包含入口点。即使页面大小为 1k，长度也会四舍五入到 0x1400，足以包含入口点。如果文件足够长，那么额外的字节可能来自文件而不是页面初始化。

# android - DatePicker 未在 Android 中更新 Textview

> ID：14144790
> 
> 赞同：0
> 
> 时间：2013-01-03T18:18:27.320
> 
> 标签：android

当使用某个日期选择 datepicker 时，我正在尝试更新 textview。但它是 textview 没有更新。我正在使用两个日期选择器来更新两个不同的文本视图。这是我更新 TextViews 的代码：

```
public class SearchingActivity extends Activity {
    static final int DATE_PICKER_TO = 0;
    static final int DATE_PICKER_FROM = 1;

    private int fYear;
    private int fMonth;
    private int fDay;
    private int tYear;
    private int tMonth;
    private int tDay;
    TextView txtFrom;
    TextView txtTo;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.layout_search);
        ImageButton btnFrom = (ImageButton) findViewById(R.id.btnDatePicker1);
        btnFrom.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                showDialog(DATE_PICKER_FROM);
            }
        });
        ImageButton btnTo = (ImageButton) findViewById(R.id.btnDatePicker2);
        btnTo.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                showDialog(DATE_PICKER_TO);
            }
        });
        txtFrom = (TextView) findViewById(R.id.lblsDate);
        txtTo = (TextView) findViewById(R.id.lbleDate);
        Button btnSubmit = (Button) findViewById(R.id.btnSubmitDate);
        btnSubmit.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Intent intent = new Intent(getApplicationContext(),
                        MixTourListActivity.class);
                String varSDate = txtFrom.getText().toString();
                String varEDate = txtTo.getText().toString();
                intent.putExtra("startDate", varSDate);
                intent.putExtra("endDate", varEDate);
                startActivity(intent);
            }
        });
        final Calendar c = Calendar.getInstance();
        fYear = c.get(Calendar.YEAR);
        fMonth = c.get(Calendar.MONTH);
        fDay = c.get(Calendar.DAY_OF_MONTH);
        tYear = c.get(Calendar.YEAR);
        tMonth = c.get(Calendar.MONTH);
        tDay = c.get(Calendar.DAY_OF_MONTH);
        updateStartDisplay();
        updateEndDisplay();
    }

    private void updateEndDisplay() {
        // TODO Auto-generated method stub
        txtFrom.setText(new StringBuilder()
                // Month is 0 based so add 1
                .append(fMonth + 1).append("-").append(fDay).append("-")
                .append(fYear).append(" "));
    }

    private void updateStartDisplay() {
        // TODO Auto-generated method stub
        txtTo.setText(new StringBuilder()
                // Month is 0 based so add 1
                .append(tMonth + 1).append("-").append(tDay).append("-")
                .append(tYear).append(" "));
    }

    private DatePickerDialog.OnDateSetListener fDateSetListener = new DatePickerDialog.OnDateSetListener() {

        public void onDateSet(DatePicker view, int year, int monthOfYear,
                int dayOfMonth) {
            fYear = year;
            fMonth = monthOfYear;
            fDay = dayOfMonth;
            updateStartDisplay();
        }
    };
    private DatePickerDialog.OnDateSetListener tDateSetListener = new DatePickerDialog.OnDateSetListener() {

        public void onDateSet(DatePicker view, int year, int monthOfYear,
                int dayOfMonth) {
            tYear = year;
            tMonth = monthOfYear;
            tDay = dayOfMonth;
            updateEndDisplay();
        }
    };

    @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DATE_PICKER_FROM:
            return new DatePickerDialog(this, fDateSetListener, fYear, fMonth,
                    fDay);
        case DATE_PICKER_TO:
            return new DatePickerDialog(this, tDateSetListener, tYear, tMonth,
                    tDay);
        }
        return null;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:43:36.223

你`fDateSetListener`有：

```
fYear = year;
fMonth = monthOfYear;
fDay = dayOfMonth;
updateStartDisplay(); 
```

并且`updateStartDisplay()`有：

```
txtTo.setText(new StringBuilder()
// Month is 0 based so add 1
.append(tMonth + 1).append("-").append(tDay).append("-")
.append(tYear).append(" ")); 
```

因此`tMonth`，当您这样称呼时，家人并没有确定，`fMonth`而兄弟则是。

类似的原因`tDateSetListener`。**所以实际上，只需反转它们中设置的变量**。

你`fDateSetListener`应该有：

```
tYear = year;
tMonth = monthOfYear;
tDay = dayOfMonth;
updateStartDisplay(); 
```

你`tDateSetListener`应该有：

```
fYear = year;
fMonth = monthOfYear;
fDay = dayOfMonth;
updateEndDisplay(); 
```

# php - 带有 UTF8 字符的 jQuery UI 自动完成

> ID：14144799
> 
> 赞同：1
> 
> 时间：2013-01-03T18:19:01.110
> 
> 标签：php, jquery, jquery-ui-autocomplete

有没有办法阻止[jQuery 自动完成](http://jqueryui.com/autocomplete/)结果将 UTF8 字符显示为带有“？”的黑色方块 里面？

这是我的代码：

```
<?php
    $text = $mysqli->real_escape_string($_GET['term']);
    $query = "SELECT DISTINCT field_63 FROM jbd_joomd_type15 WHERE field_63 LIKE '%$text%' ORDER BY field_63 ASC";
    $result = $mysqli->query($query);
    $json = '[';
    $first = true;
    while($row = $result->fetch_assoc())
    {
        if (!$first) { $json .=  ','; } else { $first = false; }
        $json .= '{"value":"'.$row['field_63'].'"}';
    }
    $json .= ']';
    echo $json;
?> 
```

我的 jQuery 代码：

```
<script type="text/javascript">
$(document).ready(function()
{
    $('#field_63').autocomplete(
    {
        source: "cities.php",
        minLength: 1
   });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:39:10.360

你试过`json_encode`你的数据吗？

[请参阅此处的文档：json_encode — 返回值的 JSON 表示](http://php.net/manual/en/function.json-encode.php)

你也没有分享你的jQuery代码？？？

我还发现[了关于 jQuery 自动完成和特殊字符编码](http://forum.jquery.com/topic/jquery-autocomplete-special-character-encoding)的讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T19:01:24.230

我有同样的...

我所有的 php 网站都是 utf-8 编码的，MYSQL 数据库也是。到处看起来都不错，并且显示了正确的字符，但是这个自动完成列表。在返回值处我需要使用它。

```
utf8_encode(return_value) ; 
```

这解决了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:36:23.240

我通过更换线路解决了问题

```
$json .= '{"value":"'.$row['field_63'].'"}'; 
```

和

```
$json .= '{"value":"'.utf8_encode($row['field_63']).'"}'; 
```

# ios - JSON对象实体具有与restkit相同的对象的孩子

> ID：14144801
> 
> 赞同：0
> 
> 时间：2013-01-03T18:19:07.117
> 
> 标签：ios, restkit

我不确定我是否完全理解 RestKit。如何在保持其他关系的同时与自己建立关系？

我的 JSON 结构如下：

```
{
    "review" : {
        "id" : "123",
        "someotherkey" : "blah",
        "responses" : [
            {
                "id" : "345",
                "text" : "no"
            },
            {
                "id" : "346",
                "text" : "no"
            }
        ],
        "childReviews" : [
            {
                "id" : "124",
                "someotherkey" : "blsdah",
                "responses" : [
                    {
                        "id" : "347",
                        "text" : "no"
                    },
                    {
                        "id" : "348",
                        "text" : "no"
                    }
                ]
            },
            {
                "id" : "125",
                "someotherkey" : "blasdh",
                "responses" : [
                    {
                        "id" : "355",
                        "text" : "no"
                    },
                    {
                        "id" : "326",
                        "text" : "no"
                    }
                ]
            }
        ]
    }
} 
```

所以对于我的 RestKit 我正在映射我有这样的东西：

```
 [reviewMapping addRelationshipMappingWithSourceKeyPath:@"childReviews" mapping:reviewMapping];
 [reviewMapping addRelationshipMappingWithSourceKeyPath:@"responses" mapping:responsesMapping]; 
```

当 childReview 对象不包含关键“响应”时效果很好，但现在我已经添加了它，它会破坏并给我这个错误：

```
*** Terminating app due to uncaught exception 'NSUnknownKeyException',
 reason:'[<Review 0x104f1260> valueForUndefinedKey:]: the entity
 Review is not key value coding-compliant for the key "responses".' 
```

我不确定我是否完全理解 RestKit。如何在保持其他关系的同时与自己建立关系？

# php - www.domain.com 不显示网站，但 www.domain.com/index.php 正确显示它

> ID：14144804
> 
> 赞同：-3
> 
> 时间：2013-01-03T18:19:13.100
> 
> 标签：php

我有一个 PHP 网站，我最近更新了域名和主机。当我检查 www.domain.com 时它没有显示网站，但是当我检查 www.domain.com/index.php 时正确显示它.. 我应该怎么做才能使它正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:22:50.843

最简单的方法是使用 .htaccess 文件；

在您的 Web 根目录中创建一个 .htaccess 文件。

添加以下行...

```
DirectoryIndex index.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:23:50.527

您可能必须在托管服务器中创建/修改 .htaccess 文件。

更多信息：[http ://www.thesitewizard.com/apache/change-default-page-for-domain.shtml](http://www.thesitewizard.com/apache/change-default-page-for-domain.shtml)

# mobile - 如何将 Prestashop 模块与移动模板挂钩？

> ID：14144805
> 
> 赞同：0
> 
> 时间：2013-01-03T18:19:15.033
> 
> 标签：mobile, prestashop

在 Prestashop 1.5 中，我想将现有的 prestashop 模块连接到默认的移动模板。可以使用管理平台完成还是我必须修改 classes/controllers/FrontController.php 文件？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-29T12:44:17.033

对我来说，我通过覆盖 FrontController 类并在 smarty 中分配我自己的钩子（在示例中为 display_left_column 钩子）解决了这个问题：

```
<?php

class FrontController extends FrontControllerCore {

public function initContent() {
    parent::initContent();

    if ($this->context->getMobileDevice() != false) {
        $this->context->smarty->assign(array(
            'HOOK_LEFT_COLUMN' => ($this->display_column_left ? Hook::exec('displayLeftColumn') : ''),
        ));
    }

} 
```

然后我在移动 index.tpl 中回显了这个钩子的内容：

```
<div data-role="content" id="content">
    {$HOOK_LEFT_COLUMN}

    {hook h="DisplayMobileIndex"}
    {include file='./sitemap.tpl'}
</div><!-- /content --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:02:43.620

我最终编辑了站点地图和标题模板以直接包含所需模块。它可以工作，虽然它不是真的“漂亮”，可以这么说。

# c# - 防止复制 dll 的 dll 的相对引用路径

> ID：14144807
> 
> 赞同：0
> 
> 时间：2013-01-03T18:19:25.610
> 
> 标签：c#, relative-path, .net-assembly

我在 c# 2010 中编写了一个利用第三方 dll 的 dll。当我添加对这些 dll 的引用时，它会将它们全部复制到本地目录中。

我写了一个使用我的 dll 的小应用程序。当我添加对我的 dll 的引用时，它会再次将所有 dll 复制到本地目录。

如何让我的 dll 引用第三方 dll，然后让我的应用程序引用我的 dll，而无需一遍又一遍地复制所有内容？我尝试使用一些相对引用，但无法使其正常工作。

这变得更加棘手，因为我需要能够将我的应用程序（使用我的 dll）部署到另一台安装了第三方 dll 的计算机上。我希望有一种方法可以简单地告诉 vs2010 我不想复制 dll，而是我想根据主机已经复制第三方 dll 的位置来相对引用它们。

我似乎无法做到这一点。

***澄清

目前，当我部署应用程序时，我引用的所有 dll 都在我的应用程序文件夹中。所以现在 dll 文件在我的应用程序文件夹和机器上的第三方文件夹中。有没有办法让应用程序只找到计算机上已经存在的 dll 文件并引用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:24:06.177

当您部署时，Windows 安装程序将检查现有的 DLL 文件，并且不会复制您的 dll 文件（或第三方的），除非它们是较新的。

这是一件好事。

# dependency-injection - NServiceBus 依赖注入

> ID：14144811
> 
> 赞同：3
> 
> 时间：2013-01-03T18:19:42.020
> 
> 标签：dependency-injection, nservicebus, nservicebus3

我在这方面遇到了一些麻烦。

[Andreas Öhlund 在这里](https://stackoverflow.com/questions/7007562/nservicebus-property-injection)回答了一个问题，但我无法使用他给出的建议让它发挥作用。

这是我的设置：

```
public abstract class CommandHandler<T> : IHandleMessages<T>, IDomainReadRepository where T : Command
{
    public IDomainRepository DomainRepository { get; set; }

    protected abstract void OnProcess(T command);

    public TAggregate GetById<TAggregate>(Guid id) where TAggregate : IEventProvider, new()
    {
        return DomainRepository.GetById<TAggregate>(id);
    }

    public void Handle(T message)
    {
        OnProcess(message);
        // Domain repository will save.
    }
} 
```

这个想法是特定的命令处理程序覆盖 OnProcess 方法并做他们的事情，然后 DomainRepository 将保存所有内容。

这是我注册组件的方式：

```
public class EndpointConfig : IConfigureThisEndpoint, AsA_Server, IWantCustomInitialization
{
    public void Init()
    {
        Configure.With().DefiningCommandsAs(c => c.Namespace != null && c.Namespace.EndsWith("Commands"));
        Configure.Instance.DefaultBuilder().Configurer.ConfigureComponent<DomainRepository>(DependencyLifecycle.InstancePerCall);
        Configure.Instance.DefaultBuilder().Configurer.ConfigureComponent<EventStore.Sql.EventStore>(DependencyLifecycle.InstancePerCall);
        Configure.Instance.DefaultBuilder().Configurer.ConfigureComponent<MongoDbObjectSecurityDescriptorRepository>(DependencyLifecycle.InstancePerCall);
        Configure.Instance.DefaultBuilder().Configurer.ConfigureComponent<LocalTenantConfig>(DependencyLifecycle.InstancePerCall);
    }
} 
```

这些是 DomainRepository 使用的所有对象；但是，当我收到命令时， DomainRepository 为空。如果我注释掉注册 DomainRepository 需要的对象的行，我实际上会收到一个错误，说它无法创建它（Autofac DependencyResolutionException）。

应该注意的是，所有其他对象都使用构造函数注入（它们取自先前存在的项目）。我尝试将它们更改为使用公共属性注入，但没有任何区别。

如果有人能指出我在这里做错了什么，将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T19:07:48.497

将 init 方法中的代码移动到实现 INeedInitialization 的不同类中。在那里，使用 Configure.Instance 而不是 Configure.With() 和 Configure.Instance.DefaultBuilder()。

# plone - 如何使 Plone Dexterity 容器看起来像 Archetypes 文件夹

> ID：14144831
> 
> 赞同：2
> 
> 时间：2013-01-03T18:21:43.957
> 
> 标签：plone, dexterity

我创建了一个包含容器和非容器 Dexterity 内容类型的 Dexterity 产品。发现了collective.documentviewer（耶！谢谢！huzzah！），我想使用它的dvpdf-group-view，但它在ZCML中注册为文件夹，我的敏捷容器不符合条件。我查看了我的容器类型上可用的 Web 界面，添加了 SiteRoot，并启用了应用视图，但也是完全错误的。

我相信有一个正确的方法可以做到这一点，我很确定它是整个适配器/接口机制的核心，但我在任何书中都找不到它。

有人愿意尝试解释吗？首先，让 Dexterity 容器能够假装它也是文件夹的一两行代码；第二，如何改变一个Dexterity类型的单个实例的默认视图，使它呈现一个外部组件的视图？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T19:09:52.810

**1\. 也注册敏捷容器的视图**

该视图已为 Archetypes 文件夹接口 ( `Products.CMFCore.interfaces._content.IFolderish`) 注册，但您的灵巧容器不提供此接口 (但是`plone.dexterity.interfaces.IDexterityContainer`)。原因可能是产品和/或视图与灵活性不兼容。

`IDexterityContainer`无论如何，您可以通过在您的包中添加一点 ZCML 来为界面注册视图来自己尝试一下`configure.zcml`（另请参阅[Dexterity 开发人员手册的](http://plone.org/products/dexterity/documentation/manual/developer-manual/)[创建包](http://plone.org/products/dexterity/documentation/manual/developer-manual/pre-requisites/creating-a-package)部分）：

```
<configure
    xmlns="http://namespaces.zope.org/zope"
    xmlns:browser="http://namespaces.zope.org/browser">

    <configure package="collective.documentviewer">

        <browser:page
            name="dvpdf-group-view"
            for="plone.dexterity.interfaces.IDexterityContainer"
            class=".views.GroupView"
            template="templates/group-view.pt"
            permission="zope2.View"
            layer=".interfaces.ILayer" />

    </configure>

</configure> 
```

这是从[collective.documentviewer configure.zcml](https://github.com/collective/collective.documentviewer/blob/master/collective/documentviewer/configure.zcml#L48)`<browser:page>`复制的，但我已将接口更改为敏捷容器接口，因此该视图也适用于敏捷容器。`for=`

内部`<configure package="collective.documentviewer">`告诉 ZCML 解析器应该像 configure.zcml 直接在其中一样应用配置`collective.documentviewer`- 例如，这允许您使用原始模板（否则您将不得不复制它或做一些讨厌的事情）。

我自己没有测试它：视图可能仍然需要原型容器并且不能与灵巧容器一起使用。也可能是您必须从文档查看器中为灵巧容器注册更多组件（也许是菜单？看看[原始 configure.zcml](https://github.com/collective/collective.documentviewer/blob/master/collective/documentviewer/configure.zcml)中注册的内容。

如果一切正常，您应该考虑直接在[github](https://github.com/collective/collective.documentviewer)上的collective.documentviewer 中进行更改并向作者提出拉取请求（请注意，敏捷性还不是plone-core）。但首先要问你是否应该以及如何做到这一点:-)

**2.更改默认视图**

使用 plone 可以为特定类型定义多个视图。然后可以在此类型的每个实例的显示菜单中选择视图。如果您打开`http://localhost:8080/Plone/portal_types/manage_main`并单击您的类型，则会出现一个字段`Available view methods`，您可以在其中将视图名称 ( `dvpdf-group-view`) 添加到单独的行上。

在您创建了您的类型的新对象或访问现有对象后，您将拥有一个“显示”菜单，该菜单应列出该视图。选择它，这个对象现在默认有这个视图。

（如果您想让视图在此类型的其他对象上不可选，您可以将其从类型配置中删除，使其不再可选 - 对象的现有配置将保留）。

# java - 使用秒表值不断更新 TextView

> ID：14144834
> 
> 赞同：0
> 
> 时间：2013-01-03T18:21:56.657
> 
> 标签：java, android

我正在尝试在我的 Android 活动中实现一个非常简单的秒表小部件，以便用户可以点击开始/重置以启动计时器，并停止以停止它。所有的功能都在那里，但我似乎无法找到一种方法来不断地显示这个秒表的价值。

我目前正在使用一个自定义对象，该对象存储一个`long`表示`Stopwatch`对象创建时间的值，一个将此`long`值设置为当前时间的构造函数，以及一个通过减去当前时间`displayTime`返回`double`表示当前时间（以秒为单位）的值的方法从原始时间除以 1000.0。

就像我说的，在功能上它是完美无缺的，但我看不出有一种方法可以不断更新`TextView`具有`displayTime()`. 任何人都可以建议尽可能简单的解决方案来实现这一目标吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:07:49.387

The easiest way is probably to use a `Handler`.

```
private Handler h = new Handler();
private Runnable update = new Runnable() {
    void run() {
        // update the time in the text view here
        h.postDelayed(this, 1000); // reschedule the update in 1 sec
    }
};

// to start the update process
h.postDelayed(update, 0); // run the update the first time 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:51:36.440

为此，您需要使用 Timer 类。

```
ActionListener timerTask = new ActionListener() {
        public void actionPerformed(ActionEvent e) {
    lblTime.setText("Set your time here");     
        }
    };
Timer timer = new Timer(500, timerTask);
timer.start(); 
```

对于定时器类信息和 API

1.  [类定时器 API](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)

2.  [如何使用摆动计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

# java - 在 R 中写入 xlsx 时出错：无法初始化类 sun.java2d.Disposer

> ID：14144837
> 
> 赞同：0
> 
> 时间：2013-01-03T18:22:00.763
> 
> 标签：java, javascript, r

我正在使用 xlsx 包在 R 中编写 Excel 文件：

```
addPicture('trend_indirect.png' ,sheet1)
addDataFrame(df.ssis_duplmonth ,sheet1, startRow=22)
addDataFrame(df.ssis_dupltrans ,sheet1, startRow=35)

addDataFrame(df.ssis_duplmonth_dir, sheet2, startRow=22)
addDataFrame(df.ssis_dupltrans_dir, sheet2, startRow=55)

saveWorkbook(wb, file="SSIS_import_controls.xlsx") 
```

此时我收到以下错误：

```
> addDataFrame(df.ssis_duplmonth ,sheet1, startRow=22)
Error in .jcall("RJavaTools", "Z", "hasField", .jcast(x, "java/lang/Object"),  : 
  java.lang.NoClassDefFoundError: Could not initialize class sun.java2d.Disposer 
```

R 版本 2.15.2，32 位。谢谢

编辑：我无法真正使它可重现，因为问题可能出在我的设置中，但是当我运行它时出现错误：

> 图书馆（'xlsx'）
> 
> df.test <- iris[1:5, ]
> 
> wb <- createWorkbook()
> 
> sheet1 <- createSheet(wb, '间接销售')
> 
> addPicture('trend_indirect.png' ,sheet1)
> 
> addDataFrame(df.test ,sheet1, startRow=22)
> 
> saveWorkbook(wb, file="stack_test.xlsx")

该图像只是保存在 png 中的简单 ggplot 图。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:31:10.130

尝试安装 libxtst。这为我解决了类似的问题。

在解决我的问题的过程中，我还安装了 fontconfig 和 libcups，以防修复它的不是 libxtst。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T21:24:37.910

我有同样的例外，但使用 Ubuntu 12 运行 Java 程序。

我已经安装了 libxtst6 并将这个 java 参数添加到我的 JAVA_OPTS 变量中：-Djava.awt.headless=true

然后它工作正常。

# android - 有时 Camera.open 返回 null 或有时它工作正常

> ID：14144838
> 
> 赞同：0
> 
> 时间：2013-01-03T18:22:01.923
> 
> 标签：android

我试图在创建方法中获取相机实例，`Camera.open()`用于显示相机预览。但有时它返回 null。我该如何处理这个问题。

我已在`manifest`文件中给予许可。

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:46:47.130

观看 logcat 应该会有所帮助。如果它不能打开相机，它应该只返回 null，因为另一个活动正在积极使用它并且没有释放它。

出于同样的原因，您应该在 onPause 方法中释放相机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:42:39.587

尝试调试您的应用程序并尝试捕捉此方法返回 null 的那一刻，这可能会给您一些更新。

还要`"android:required="true"`为您的`uses-feature`标签指定，这将确保应用程序仅在相机可用时运行。

由于文档状态`open()`仅在相机不可用时才返回 null，因此这将检查它是否不是硬件问题。

> 如果设备没有后置摄像头，则返回 null。（[文档](http://developer.android.com/reference/android/hardware/Camera.html#open%28int%29)）

# ruby-on-rails - Rails 新形式 -> nil

> ID：14144843
> 
> 赞同：1
> 
> 时间：2013-01-03T18:22:31.277
> 
> 标签：ruby-on-rails, ruby, crud

任务模型只有一个字段：标题。

我制作了一个表格来添加一个带有一个字段的新任务：标题

但是在create方法中，我们可以看到title是用“test”填充的

但在查询中，我们可以看到“nil”……有什么想法吗？

谢谢

```
Started POST "/tasks" for 127.0.0.1 at 2013-01-03 13:16:44 -0500
Processing by TasksController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"iWaK1QX6VCyeUCueLrRNErJEtdm/ZNxg4d3LU0vKjnY=", "task"=>{"title"
=>"test"}, "commit"=>"Add a new task "}
   (0.1ms)  begin transaction
  SQL (0.9ms)  INSERT INTO "tasks" ("created_at", "title", "updated_at") VALUES (?, ?, ?)  [["created_at", Thu, 03  Jan 2013 18:16:44 UTC +00:00], ["title", nil], ["updated_at", Thu, 03 Jan 2013 18:16:44 UTC +00:00]]
   (0.8ms)  commit transaction
Redirected to http://0.0.0.0:3000/tasks
Completed 302 Found in 8ms (ActiveRecord: 1.8ms) 
```

这是创建方法

```
 def create
    @task = Task.new(params[:post])

    if @task.save
      redirect_to tasks_path, :notice => "Task successfully saved"  
    else
      render "new"
    end
  end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T18:31:59.633

问题是您正在获取`post`而不是`task`

```
@task = Task.new(params[:task]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:30:42.797

确保您的属性是*可访问*的，否则您将无法对其进行批量分配更改：

```
class Task < ActiveRecord::Base
  attr_accessible :title
end 
```

你应该有单元测试来正确地运行你的模型，以确保它们可以像你在控制器中那样被更新。这些将很快发现任何未正确标记的属性。

Rails 2.3 和之前的版本对此并不严格，你可以批量分配任何东西，但 Rails 3 不会分配这些属性，除非它们被特别允许。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T18:31:07.400

确保

> attr_accessible ：标题

在您的任务模型中（task.rb）

**更新：** 将 params[:post] 更改为 params[:task]：

```
@task = Task.new(params[:task]) 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-03T18:28:13.043

在您的 tasks_controller.rb 中，您必须有 create 方法来处理`POST`request 并接受通过 request 传递的参数。

```
 def create 
    task = Task.new(params[:task]) 
    task.save
  end 
```

# ios - 如何在没有 URL 方案的情况下启动应用程序并且不触摸非越狱 iDevice 上的图标？

> ID：14144848
> 
> 赞同：1
> 
> 时间：2013-01-03T18:22:53.107
> 
> 标签：ios, iphone-privateapi, springboard

我喜欢构建一个应用程序来查看没有 URL 方案的特定应用程序我听说过一个名为 SpringBoardServices 的框架，但总是有一个链接器错误

到目前为止，我将此代码与 SpringBoardServices.h 文件一起使用

SpringBoardServices.h：

```
#define SPRINGBOARDSERVICES_H

#if __OBJC__

#if __cplusplus
extern "C" {
#endif
#include <CoreFoundation/CoreFoundation.h>
#include <Availability.h>

    mach_port_t SBSSpringBoardServerPort();

#pragma mark -
#pragma mark Application launching
    /// Launch an application given the display ID.
    /// Equivalent to -[UIApplication launchApplicationWithIdentifier:suspended:].
    /// @return 0 on success, nonzero on failure. Feed the result to SBSApplicationLaunchingErrorString() to get the error string.
    int SBSLaunchApplicationWithIdentifier(CFStringRef displayIdentifier, Boolean suspended) __OSX_AVAILABLE_STARTING(__MAC_NA, __IPHONE_3_0);

    /// Launch an application for debugging.
    /// The parameters are not known yet...
    int SBSLaunchApplicationForDebugging(void* unknown, ...) __OSX_AVAILABLE_STARTING(__MAC_NA, __IPHONE_3_0);

    /// Get the error string from error code returned by SBSLaunchApplicationWithIdentifier().
    CFStringRef SBSApplicationLaunchingErrorString(int error);

#pragma mark -
#pragma mark Watchdog assertion

    typedef struct __SBSWatchdogAssertion* SBSWatchdogAssertionRef;

    CFTypeID SBSWatchdogAssertionGetTypeID();
    void SBSWatchdogAssertionCancel(SBSWatchdogAssertionRef assertion);
    SBSWatchdogAssertionRef SBSWatchdogAssertionCreateForPID(CFAllocatorRef allocator, pid_t pid);
    int SBSWatchdogAssertionRenew(SBSWatchdogAssertionRef assertion);
    CFTimeInterval SBSWatchdogAssertionGetRenewalInterval(SBSWatchdogAssertionRef assertion);

#pragma mark -

    CFArrayRef SBSCopyApplicationDisplayIdentifiers(Boolean onlyActive, Boolean unknown);

    CFStringRef SBSCopyIconImagePathForDisplayIdentifier(CFStringRef dispIden);
    CFStringRef SBSCopyLocalizedApplicationNameForDisplayIdentifier(CFStringRef dispIden);

    /*
     SB functions should be generated by MIG!

#pragma mark -
#pragma mark SB functions - Media
    void SBSetMediaVolume(mach_port_t port, int volume) __OSX_AVAILABLE_STARTING(__MAC_NA, __IPHONE_3_0);

    void SBSetDisableNowPlayingHUD(mach_port_t port, Boolean disable) __OSX_AVAILABLE_STARTING(__MAC_NA, __IPHONE_3_0);
    void SBSetNowPlayingInformation(mach_port_t port, void* info);

#pragma mark -
#pragma mark SB functions - Accessibility
    void SBSetZoomTouchEnabled(mach_port_t port, Boolean enable) __OSX_AVAILABLE_STARTING(__MAC_NA, __IPHONE_3_0);
    void SBSetDisplayColorsInverted(mach_port_t port, Boolean inverted) __OSX_AVAILABLE_STARTING(__MAC_NA, __IPHONE_3_0);

#pragma mark -
#pragma mark SB functions - Remote
    void SBApplicationSetSimpleRemoteRoutingPriority(mach_port_t port, int priority) __OSX_AVAILABLE_STARTING(__MAC_NA, __IPHONE_3_0);

#pragma mark -
#pragma mark SB functions - Watchdog

    void SBCancelWatchdogAssertionForProcess(mach_port_t port, pid_t pid, void* unknown);

    void SBReloadApplication(mach_port_t port) __OSX_AVAILABLE_STARTING(__MAC_NA, __IPHONE_3_0);
     */

#if __cplusplus
}
#endif

#endif 
```

这是我在 ViewController.m 文件中使用的代码：

```
#import "SpringBoardServices.h"

-(IBAction)AdSheed {

    SBSLaunchApplicationWithIdentifier(CFSTR("com.apple.preferences"), false);

} 
```

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:51:14.497

这是一个私有框架。你不应该使用它。如果不使用方案，您将无法做到这一点。

# notepad++ - 如何使用记事本++设置相同的崇高文本？

> ID：14144849
> 
> 赞同：2
> 
> 时间：2013-01-03T18:22:54.070
> 
> 标签：notepad++, sublimetext2

如何使用记事本++设置相同的崇高文本？

我已经使用notepad++ 多年了，我已经习惯了notepad++ 的默认颜色主题。我曾尝试在其他颜色主题下以崇高的方式编写代码，但对我来说似乎很难做到，其他颜色主题让我感到困惑，我无法适应它们。

我不想自己配置一个 sublime 的颜色主题，因为我在不同的计算机之间工作，任何主题让 sublime 与 notepad++ 相同吗？

![在此处输入图像描述](../Images/db4ca4efe29141c8ceff3e419c5d6d55.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:29:16.013

尝试其中一种[配色方案](https://github.com/daylerees/colour-schemes?hn)。[这里](http://www.sublimetext.com/forum/viewtopic.php?f=5&t=9856)还有一个配色方案编辑器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:33:35.103

这是与该 [https://apple.stackexchange.com/a/63627相关的内容](https://apple.stackexchange.com/a/63627)

我认为在特定的主题文件中应该是这样的

```
<key>selection</key>
<string>#hexcolor</string> 
```

来自这里的颜色代码：http: [//html-color-codes.com/](http://html-color-codes.com/)

# joomla2.5 - 在 joomla 2.5 中使用 jumi 文件之间的协作

> ID：14144856
> 
> 赞同：0
> 
> 时间：2013-01-03T18:23:12.950
> 
> 标签：joomla2.5, jumi

我是初学者 php 和 joomla 用户。我已经在 joomla 2.5 中安装了 jumi 组件。我想在页面之间进行协作，但我不知道如何在它们之间进行链接。任何人都可以通过简要解释来帮助我。

比如我在jumi中新建了一个名为“链接到另一篇文章”的文件，代码解释如下：

我已经定义了它们：

```
defined("_JEXEC") OR die ("Restricted access"); 
```

我创建了一个链接：

```
$linktext = "<Click> & you'll see"; 
```

之后我把href：

```
<a href="FILE PATH"><?php echo htmlspecialchars($linktext);?> 
```

之后，我在 jumi 中创建了另一个名为“ABC”的文件，我`<?php echo"Hello World"?>`如何在我的第一个文件的“文件路径”中包含 ABC 文件的路径，这样如果我点击第一个文件链接，它将重定向我到我的 ABC 文件并显示“Hello World”？

我将不胜感激您的友好答复。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:23:26.880

假设您在 jumi 目录中有 2 个文件（components/com_jumi/files）。**A.php**和**B.php**。

我们不希望人们能够直接访问这些文件，所以我们在其中放置了代码片段

`defined("_JEXEC") OR die ("Restricted access");`

到目前为止，一切都很好。假设您网站的 URL 是 h**p://www.example.com，您会得到一个

如果您尝试以下任何操作，则访问受限：

h**p://www.example.com/components/com_jumi/files/A.php 或

h**p://www.example.com/components/com_jumi/files/B.php。

这意味着您不能使用这些 URL从**A.php访问例如****B.php**。

 **所以这里有一个解决方法：

1.  从您的管理面板创建 2 个 jumi 应用程序，一个用于 A.php（我们称之为**Application_A**），一个用于 B.php（我们称之为**Application_B**）。我想你已经这样做了。

2.  创建一个 Jumi application 类型的菜单项，将其指向**Application_A并使用****application_a**作为其别名。从这一点 A.php 可访问为 h**t://www.example.com/application_a

3.  创建一个**新的 Joomla 菜单**（为清楚起见，您可以将其称为隐藏），并在该菜单中创建一个 Jumi 应用程序类型的菜单项，将其指向**Application B并使用****application_b**作为其别名。从这一点 B.php 可访问为 h**t://www.example.com/application_b

4.  所以。每当你想从 A.php 访问 B.php 时，你可以简单地做到这一点

    `<a href="application_b">Go to B</a>`**

# css - 为什么网页有时会在没有任何样式的情况下加载？

> ID：14144865
> 
> 赞同：17
> 
> 时间：2013-01-03T18:23:42.543
> 
> 标签：css, browser

我敢肯定，我们都曾在某个时间点看到过这种行为。

当您加载网页时，开发人员通常会花费大量时间使其在各种设备和浏览器上看起来不错。但是，有时浏览器只是选择忽略所有样式，并显示一个看起来与预期完全不同的网页。这是 SO Chat 本身的一个示例：

![在此处输入图像描述](../Images/dad780b551f3cccd50521e176380859e.png)

![在此处输入图像描述](../Images/00350c52ae72506f5b544efc5321b87b.png)

谁能告诉我这是怎么发生的以及为什么会发生？我自己在 Firefox、Safari 和 Chrome 上见过它（不知道它是否发生在 IE 中，但它可能会发生）

# python - Pandas 可以在 Google App Engine for Python 上运行吗？

> ID：14144867
> 
> 赞同：17
> 
> 时间：2013-01-03T18:24:00.713
> 
> 标签：python, google-app-engine, pandas

[pandas](http://pandas.pydata.org/)数据分析模块可以在 Google App Engine 上运行吗？

我的第一个倾向是不：网页声明“**编译为 C**的关键代码路径”。因此，由于这不是一个纯粹的 python 包，您不能简单地将目录或 ZIP 文件复制到您的应用程序引擎项目中。

是否可以“禁用”C 扩展并让模块在纯 python 中运行（尽管速度较慢）？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-03T22:47:21.133

截至今天，Google App Engine Python 2.7 运行时[当前不允许](https://developers.google.com/appengine/docs/python/runtime#Pure_Python)运行任意 C 扩展。

但它确实允许[包含](https://developers.google.com/appengine/docs/python/config/appconfig#Configuring_Libraries)工程团队根据其受欢迎程度和开发人员需求手动选择的第三方[库。](https://developers.google.com/appengine/docs/python/tools/libraries27)

[**您可以通过在公共问题跟踪器**](https://code.google.com/p/googleappengine/issues/detail?id=8620)上填写功能请求来请求包含特定库。如果它得到足够的 ☆☆☆ 它可能会被考虑包含在即将发布的版本中。

# javascript - push() 和 for 循环的 Javascript JSONArray 问题

> ID：14144872
> 
> 赞同：1
> 
> 时间：2013-01-03T18:24:27.520
> 
> 标签：javascript, json, node.js, object, for-loop

我制作了一个简单的程序来使用两个 for 循环在本地存储一个数组，但是发生了一些奇怪的事情......

这是我的代码：

```
var imagesdata = data[0];
var preferences = data[1];

for (var i = preferences.length - 1; i >= 0; i--) {
    (function(i){
        for (var z = imagesdata.length - 1; z >= 0; z--) {
            (function(i){
                if(imagesdata[z].cathegory == preferences[i].cathegory){
                    var array = $('body').data('data'+preferences[i].cathegory);
                    if(array == null){
                        alert('asefsef');
                        $('body').data('data'+preferences[i].cathegory, [{'pname' : imagesdata[z].pname , 'pimage' : imagesdata[z].pimage}]);
                    }else{
                        $('body').data('data'+preferences[i].cathegory, array.push({'pname' : imagesdata[z].pname , 'pimage' : imagesdata[z].pimage}));
                    }
                }
            })(i);
        };
    })(i);
}; 
```

**它说对象 2 没有方法 push**但是如果我刚刚插入，为什么第二个出现在数组上：`[{'pname' : imagesdata[z].pname , 'pimage' : imagesdata[z].pimage}]`

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T18:33:19.463

`push()`返回数组的长度，而不是添加了新元素的数组。

除非我误读了您的代码：

1.  在第一次迭代中，您正在`== null`检查，因此创建了一个新数组。
2.  在第二次迭代中，您在`else`子句中并向数组添加一个元素，*然后*将`data`属性设置为其长度 (2)。
3.  在*第三*次迭代中， a`Number`没有`push()`方法。

但是，请注意，`array`一旦初始化数组，变量将成为对数组的引用，因此您对其所做的所有更改都会*自动*反映在`data`属性中；所以你不需要在`push()`新数据时写回更改：

```
if (array == null) {
    alert('asefsef');
    $('body').data('data' + preferences[i].cathegory, [{
        'pname': imagesdata[z].pname,
        'pimage': imagesdata[z].pimage}]);
} else {
    array.push({
        'pname': imagesdata[z].pname,
        'pimage': imagesdata[z].pimage
    });
}​ 
```

仅供参考，您可能只是`== null`运气好。`data()`如果密钥不存在则返回`undefined`，并且它恰好`undefined == null`是`true`（通过类型强制）。更好的检查将是`=== undefined`，或者更好，`array instanceof Array`

# xml - XML 和 HTTP 服务

> ID：14144873
> 
> 赞同：0
> 
> 时间：2013-01-03T18:24:27.707
> 
> 标签：xml, apache-flex, adobe, flash-builder, httpservice

我最近开始使用 Flash Builder 和 Flex SDK。我目前正在使用 XML。我可以使用以下代码完美地将 XML 读入列表：

```
<s:HTTPService id="myXML" url="http://www.mywebsitename.com/appdata/Apps.xml"/>
<s:List id="myList" x="58" y="127" width="205" height="133" textAlign="center" dataProvider="{myXML.lastResult.JacobsApps.Name}"></s:List> 
```

我遇到的问题是写入 XML。我需要使用 HTTPService，或使用 URL 写入 XML 文件的类似服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:00:06.163

URL 通常设计用于从服务器请求数据；并且单独的 URL 不会在服务器上创建文件。

您需要用您选择的语言编写服务。.NET、Java、ColdFusion 和 PHP 是一些可以做到这一点并与 Flex 很好地集成的服务器端语言。有关如何执行此操作的具体说明取决于所选择的技术。对于 ColdFusion，我会使用[cffile](http://livedocs.adobe.com/coldfusion/8/Tags_f_02.html)。

在服务器上创建服务后，您将能够从 Flex 调用服务，使用 RemoteObject 进行 AMF 调用，使用 WebService 进行 SOAP 调用，或使用 HTTPService 进行 REST 调用。[有关使用 Flex 访问远程数据服务的](http://help.adobe.com/en_US/flex/accessingdata/WSbde04e3d3e6474c46c45e7b4120d413dc14-8000.html)更多信息。

# git - 使用内网服务器作为网关和代理镜像来访问公共远程

> ID：14144883
> 
> 赞同：1
> 
> 时间：2013-01-03T18:25:26.807
> 
> 标签：git, git-bare

*背景：*

> 我们有一个有趣的问题。我们正在尝试从公共可访问位置将 git 存储库获取到我们的开发服务器（服务器），该服务器具有连接到公司网络和公共互联网的互联网。
> 
> 然后，在我们的公司网络中，我们有一些开发框（客户端），它们只能访问开发服务器。定期地，我们想从
> 
> 公共互联网 -> 服务器 -> 客户端。
> 
> 我们现在做的是从公共互联网在服务器上进行 git clone，然后在客户端从服务器上进行 git clone。问题是如果服务器没有在本地跟踪远程分支，客户端将无法获取新分支。

**问题：**服务器中的 git clone --bare 是否允许我们在客户端获取更改而无需在服务器中创建本地跟踪分支？我们还能做什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:54:47.717

您可能希望`git clone --mirror`在您的服务器上，并`git clone`在每个客户端上正常。

# java - 从 getDeclaredMethods 中查找具有实际类型的泛型方法

> ID：14144888
> 
> 赞同：2
> 
> 时间：2013-01-03T18:25:51.237
> 
> 标签：java, generics, reflection

我有看起来像这样的通用类：

```
interface X<Input, Output>
{
  Output process(Input input);
}

class Y implements X<Integer, Float> 
{   
  Float process(Integer input); 
} 
```

我使用 getDeclaredMethods 来查找 Y 上的进程，只是用它的名字（不是参数，故意）。当我查看返回的 Method[] 时，进程显示了两次，输入 = 对象、输出 = 对象，然后是实际的实例化类型：整数和浮点数。

请注意：我可以在 Method[] 中看到 1 个带有 Object、Object 的函数和 1 个带有我用来实例化的实际类型的函数，例如 Integer、Float。因此，我感兴趣的第二个函数可以从 Method[] 访问。

仅获取具有实际类型的方法的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T20:19:35.980

> 然后使用实际的实例化类型。

那是不可能的。您应该会看到一个参数类型为`Object`. 还可以查看方法的泛型参数和返回类型，你会发现它们都是类型变量（`Input`并且`Output`都是类型变量）。

*继承自它的具有类型参数的*特定类型实参的此类的**子*类将具有两种方法：具有更具体的参数和返回类型的方法，以及具有原始类方法的参数和返回类型的*桥接方法*，按顺序排列覆盖它。如果您询问如何忽略桥接方法，只需检查它是否是桥接方法（`.isBridge()`）*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:33:55.040

泛型类型仅在编译时才知道。`Object`是运行时的实际泛型类型，因此在运行程序时无法获取它们。*

# javascript - Jquery多媒体幻灯片

> ID：14144889
> 
> 赞同：1
> 
> 时间：2013-01-03T18:26:01.940
> 
> 标签：javascript, jquery, slideshow, multimedia

我想知道是否有人知道创建网络就绪/可嵌入图像和音频幻灯片的最佳方法？每张图片幻灯片都必须有自己的音频剪辑，用户可以随时在幻灯片之间移动。我正在尝试为我的网站创建交互式幻灯片。

我想做这样的事情：

[http://www.telegraph.co.uk/travel/picturegalleries/9522385/British-rock-climbers-conquer-the-east-face-of-Cerro-Autana-in-Venezuela.html?frame=2329368](http://www.telegraph.co.uk/travel/picturegalleries/9522385/British-rock-climbers-conquer-the-east-face-of-Cerro-Autana-in-Venezuela.html?frame=2329368)

但每张幻灯片上都有音频。它不必自动播放，只需给用户一个选项来播放附在幻灯片上的音频或导航到下一张幻灯片。我在网上搜索过，但大多数多媒体幻灯片在整个节目中都只有连续的音频。

这可以在某种软件、javascript 或 jquery 中实现吗？任何朝着正确方向的帮助或指导都会很棒。提前致谢。

# java - 在Java中，如何将对象列表转换为字节数组？

> ID：14144892
> 
> 赞同：12
> 
> 时间：2013-01-03T18:26:07.463
> 
> 标签：java, caching

> **可能重复：**
> [在java中将任何对象转换为字节数组](https://stackoverflow.com/questions/5837698/converting-any-object-to-a-byte-array-in-java)

我有一个需要缓存的类。缓存 API 提供了一个缓存接口`byte[]`。我的班级包含一个字段，另一个班级`List<Author>`在哪里。`Author`我转向缓存的正确方法是`List<Author>`什么`byte[]`？并`byte[]`从缓存中检索以重建`List<Author>`?

关于类的更多细节`Author`：它非常简单，只有两个`String`字段。一个`String`领域是可能的`null`。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-03T18:30:49.253

作者类应该实现`Serializable`

然后，您可以使用`ObjectOutputStream`序列化对象并将`ByteArrayOutputStream`其写入字节。

然后使用 ObjectInputStream 反序列化并转换回来。

```
 ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ObjectOutputStream oos = new ObjectOutputStream(bos);
    oos.writeObject(list);
    byte[] bytes = bos.toByteArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T18:31:00.613

使`Author`类可序列化并将列表写入`ObjectOutputStream`由`ByteArrayOutputStream`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T18:31:19.563

使您的课程可序列化；在 ByteStream 上创建一个 ObjectStream 并将您的列表写入 ObjectStream。将字节缓冲区从 ByteStream 传递到您的缓存 API。

从缓存中检索时，您将反转该过程。从缓存 API 返回的 byte[] 创建一个 ByteStream；从 ByteStream 创建一个 ObjectStream；从 ObjectStream 中读取您的集合。

# ajax - 当请求不是 AJAX 请求时抛出什么样的异常？

> ID：14144898
> 
> 赞同：1
> 
> 时间：2013-01-03T18:26:47.660
> 
> 标签：ajax, exception, symfony

我正在开发一个重型 AJAX Symfony 2 应用程序。我的大部分动作都是这样开始的：

```
if($this->getRequest()->isXmlHttpRequest()) {
   // Do something
} 
```

只有在响应 AJAX 请求时才必须执行该操作。我认为为了简单起见和更好的缩进，以这种方式做事会更好：

```
if(false === $this->getRequest()->isXmlHttpRequest()) {
   // throw some exception
}

// Do something 
```

我的问题是我不知道我可以抛出的最合适的异常是什么。我想得到一些关于这个主题的反馈。也许 AccessDeniedException？任何 Symfony 预定义的异常都适合吗？或者我应该创建一个扩展基础 PHP 异常类的新异常？任何意见将不胜感激，对我的英语感到抱歉。

* * *

编辑：这个呢？

[https://github.com/symfony/HttpKernel/blob/master/Exception/BadRequestHttpException.php](https://github.com/symfony/HttpKernel/blob/master/Exception/BadRequestHttpException.php)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T19:48:48.753

你没有提到身份验证，所以我假设这不是问题。~~在这种情况下，我不会使用`AccessDeniedException`，因为它会产生`401 Unauthorized`错误，这意味着用户的凭据不正确或丢失~~。这是`401 Unauthorized`状态的定义：

> 该请求需要用户身份验证。响应必须包含一个 WWW-Authenticate 头字段（第 14.47 节），其中包含适用于所请求资源的质询。客户端可以使用合适的授权头域重复请求（第 14.8 节）。如果请求已包含授权凭证，则 401 响应指示已拒绝对这些凭证的授权。如果 401 响应包含与先前响应相同的质询，并且用户代理已经尝试了至少一次身份验证，则应该向用户呈现响应中给出的实体，因为该实体可能包含相关的诊断信息。HTTP 访问身份验证在“HTTP 身份验证：基本和摘要式访问身份验证”[43] 中进行了说明。

我也不会去`BadRequestHttpException`。这将返回一个`400`响应，这意味着服务器不理解该请求。我认为在这种情况下，服务器理解请求，但拒绝完成它。`400`这是响应的完整定义：

> 由于语法错误，服务器无法理解该请求。客户端不应该在没有修改的情况下重复请求。

我认为与您的情况最匹配的 HTTP 状态是`403 Forbidden`：

> 服务器理解请求，但拒绝执行。授权将无济于事，并且不应重复请求。如果请求方法不是 HEAD 并且服务器希望公开请求未完成的原因，它应该在实体中描述拒绝的原因。如果服务器不希望向客户端提供此信息，则可以使用状态代码 404（未找到）来代替。

根据[github](https://github.com/symfony/HttpKernel/tree/master/Exception)上的 Symfony ，看起来 Symfony 没有`ForbiddenException`，或类似的东西......我认为这有点奇怪（也许我错过了一些东西？）。

如果是这种情况，您可以编写自己的，实现`HttpExceptionInterface`（或简单地通过扩展`HttpException`）。那，或者您可以即时创建一个通用的：

```
throw new HttpException(403, "Forbidden"); 
```

# asp.net - 如何更改profilebase的默认连接字符串

> ID：14144903
> 
> 赞同：0
> 
> 时间：2013-01-03T18:27:09.407
> 
> 标签：asp.net, vb.net, asp.net-profiles, web-application-project

我在我的 Web 应用程序中使用配置文件功能。我在[http://www.codeproject.com/Articles/290929/Using-ASP-Net-Profile-Feature-in-a-Web-Application](http://www.codeproject.com/Articles/290929/Using-ASP-Net-Profile-Feature-in-a-Web-Application)获得了一篇有用的文章。根据这篇文章，我编写了我`web.config`的自定义配置文件类、配置文件信息类。以下是我的代码。

**我的代码**

***网络配置***

```
<profile enabled="true" inherits="app_DeliverMatic.UserProfile" defaultProvider="ProfileProvider">
  <providers >
    <add name="ProfileProvider" applicationName="delivermatic" connectionStringName="LocalSqlServer" type="System.Web.Profile.SqlProfileProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
  </providers>
</profile> 

<connectionStrings>
    <clear/>
    <add name="LocalSqlServer" connectionString="Data Source=(local);Initial Catalog=mydb;Persist Security Info=True;User ID=uid;Password=pass;"/>
</connectionStrings> 
```

***用户配置文件.vb***

```
Public Class UserProfile
    Inherits ProfileBase

    Public ReadOnly Property UserProfileInfo As UserProfileInfo
        Get
            Return DirectCast(GetPropertyValue("UserProfileInfo"), UserProfileInfo)
        End Get
    End Property

    Public Shared Function GetProfile() As UserProfile
        Return DirectCast(HttpContext.Current.Profile, UserProfile)
    End Function

    Public Shared Function GetProfile(ByVal UserName As String) As UserProfile
        Return DirectCast(Create(UserName), UserProfile)
    End Function

End Class 
```

***用户档案信息.vb***

```
<Serializable()>
Public Class UserProfileInfo
    Dim _Name As String
    Dim _Company As String
    Dim _Address1 As String
    Dim _Address2 As String
    Dim _City As String
    Dim _State As String
    Dim _Country As String
    Dim _Zip As String
    Dim _PhoneNo As String
    Dim _Mobile As String
    Dim _FaxNo As String
    Dim _Website As String
    Dim _Registration_Email As String

    Public Property Name As String
        Set(ByVal value As String)
            _Name = value
        End Set
        Get
            Return _Name
        End Get
    End Property
    Public Property Company As String
        Set(ByVal value As String)
            _Company = value
        End Set
        Get
            Return _Company
        End Get
    End Property
    Public Property Address1 As String
        Set(ByVal value As String)
            _Address1 = value
        End Set
        Get
            Return _Address1
        End Get
    End Property
    Public Property Address2 As String
        Set(ByVal value As String)
            _Address2 = value
        End Set
        Get
            Return _Address2
        End Get
    End Property
    Public Property City As String
        Set(ByVal value As String)
            _City = value
        End Set
        Get
            Return _City
        End Get
    End Property
    Public Property State As String
        Set(ByVal value As String)
            _State = value
        End Set
        Get
            Return _State
        End Get
    End Property
    Public Property Country As String
        Set(ByVal value As String)
            _Country = value
        End Set
        Get
            Return _Country
        End Get
    End Property
    Public Property Zip As String
        Set(ByVal value As String)
            _Zip = value
        End Set
        Get
            Return _Zip
        End Get
    End Property
    Public Property PhoneNo As String
        Set(ByVal value As String)
            _PhoneNo = value
        End Set
        Get
            Return _PhoneNo
        End Get
    End Property
    Public Property Mobile As String
        Set(ByVal value As String)
            _Mobile = value
        End Set
        Get
            Return _Mobile
        End Get
    End Property
    Public Property FaxNo As String
        Set(ByVal value As String)
            _FaxNo = value
        End Set
        Get
            Return _FaxNo
        End Get
    End Property
    Public Property Website As String
        Set(ByVal value As String)
            _Website = value
        End Set
        Get
            Return _Website
        End Get
    End Property
    Public Property Registration_Email As String
        Set(ByVal value As String)
            _Registration_Email = value
        End Set
        Get
            Return _Registration_Email
        End Get
    End Property

    Public Sub New()

    End Sub

    Public Sub New(ByVal Name As String, ByVal Company As String, ByVal Address1 As String, ByVal Address2 As String, ByVal City As String, ByVal State As String, ByVal Country As String, ByVal Zip As String, ByVal PhoneNo As String, ByVal Mobile As String, ByVal FaxNo As String, ByVal Website As String, ByVal Registration_Email As String)
        Me.Name = Name
        Me.Company = Company
        Me.Address1 = Address1
        Me.Address2 = Address2
        Me.City = City
        Me.State = State
        Me.Country = Country
        Me.Zip = Zip
        Me.PhoneNo = PhoneNo
        Me.FaxNo = FaxNo
        Me.Website = Website
        Me.Registration_Email = Registration_Email
    End Sub

End Class 
```

***使用配置文件提供程序的代码***

```
Dim profile As UserProfile = UserProfile.GetProfile(lblEmail.Text)
With profile.UserProfileInfo
    .Address1 = txtAddress1.Text
    .Address2 = txtAddress2.Text
    .City = txtCity.Text
    profile.Save()
End With 
```

**我的问题**
上面的代码工作得很好。但问题是，如果我将连接字符串名称设置为任何我想要的名称，它就会出错。更改连接字符串名称时，我还将配置文件提供程序的“connectionStringName”属性设置为新名称。ProfileBase 类似乎仅适用于将 connectionStringName 设置为 LocalSqlServer 的情况。我怎样才能摆脱这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:54:41.757

解决了。在添加`<clear/>`配置文件提供程序之前添加。

```
<providers>
  <clear />
  <add name="ProfileProvider" applicationname="delivermatic" connectionstringname="myCon" type="System.Web.Profile.SqlProfileProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
</providers> 
```

# arrays - 我无法理解以下错误 ActionScript

> ID：14144906
> 
> 赞同：0
> 
> 时间：2013-01-03T18:27:47.130
> 
> 标签：arrays, flash, loops, actionscript, flash-builder

开发环境为FLASH BUILDER（Android/iOS应用）。我无法理解以下错误。请修复我的代码。错误：RangeError：错误 #1125：索引 2 超出范围 0。在 views::twoHomeView/sets()[C:\Users\Adobe Flash Builder 4.6\y\src\views\twoHomeView.mxml:162] 处views::twoHomeView/down_clickHandler()[C:\Users\Adobe Flash Builder 4.6\y\src\views\twoHomeView.mxml:115] 在 vi​​ews::twoHomeView/__down_click()[C:\Users\Adobe Flash Builder 4.6 \y\src\views\twoHomeView.mxml:203]

代码：

```
<fx:Script>
    <![CDATA[

        import flash.display.Sprite;
        import flash.events.TimerEvent;
        import flash.utils.Timer;

        private var timer:Timer;

        public function Main()
        {
            timer = new Timer(1000, 4);
            timer.addEventListener(TimerEvent.TIMER, onTimer);
            timer.start();
            go.visible=true;
        }
        var kaisu:int =0; 
        public function onTimer(event:TimerEvent):void
        {

                kaisu += 1;
                if(kaisu>=0)
                {
                    go.visible =false;
                }
                display(n[kaisu-1]);
                if(kaisu==5)
                {
                    kaisu = 0;
                }

        }

        public  var n:Vector.<int> = new Vector.<int>(4);   
        public var a:int　=0;
        public var s:int　=0;

            function display(q:int):void{//矢印を表示させる　0=↑1=→2＝↓３＝←
            if(q ==0)
            {
                ue.visible= true;
                migi.visible= false;
                shita.visible= false;
                hidari.visible= false;
            }
            else if(q ==1)
            {

                ue.visible= false;
                migi.visible= true;
                shita.visible= false;
                hidari.visible= false;
            }
            else if(q ==2)
            {
                ue.visible= false;
                migi.visible= false;
                shita.visible= true;
                hidari.visible= false;
            }
            else if(q ==3)
            {
                ue.visible= false;
                migi.visible= false;
                shita.visible= false;
                hidari.visible= true;
            }

            else 
            {
                ue.visible= false;
                migi.visible= false;
                shita.visible= false;
                hidari.visible= false;
            }

                }
        protected function button1_clickHandler(event:MouseEvent):void
        {
            // TODO Auto-generated method stub

            display(3);
            sets(3);
        }

        protected function button2_clickHandler(event:MouseEvent):void
        {
            // TODO Auto-generated method stub

            display(0);
            sets(0);

        }

        protected function right_clickHandler(event:MouseEvent):void
        {
            // TODO Auto-generated method stub
            display(1);
            sets(1);
        }

        protected function down_clickHandler(event:MouseEvent):void
        {
            // TODO Auto-generated method stub
            display(2);
            sets(2);
        }

        /*function wait(time:int, handler:Function):void

        {

            var timeri:Timer = new Timer(time, 1);

                timeri.addEventListener(TimerEvent.TIMER_COMPLETE, timerHandler);

                timeri.start();

            function timerHandler(event:TimerEvent):void

            {

                    handler();

                    timeri.removeEventListener(TimerEvent.TIMER_COMPLETE, timerHandler);

            }

        }   
        function lv1():void{
    }*/

        function showMC():void//配列に乱数を入れ込む。
        {

            for(var i:int;i<n.length;i++)
            {   var r:int = Math.floor(Math.random() * 4);
                n[i]=r;
            }   
            point.text = n[0]+""+" "+n[1]+" "+n[2]+" "+n[3];
        }

        public  var set:Vector.<int> = new Vector.<int>;
        public var points:int=0;
        public var nyuryoku:int =0;
        public var pan:int;

        function sets(q:int){

            if( n[nyuryoku]==set[q]){

        nyuryoku +=1;
        points += 1;
        pan = points;
            tensu.text = pan.toString();
        }
            else
            {
                end();
            }
        }

     function end(){
         bad.visible = true;
         points = 0;
         kaisu = 0;
         display(5);
     }

    ]]>
</fx:Script>

<fx:Declarations>
    <!-- 非ビジュアルエレメント (サービス、値オブジェクトなど) をここに配置 -->
</fx:Declarations>

<s:Image x="-31" y="-40" width="383" height="486" source="assets/yattah.jpg"/>
<s:Button id="left" x="13" y="304" width="50" height="50" label="←"
          click="button1_clickHandler(event)"/>
<s:Label id ="point" x="19" y="7" text="点"/>
<s:Button id="up" x="60" y="257" width="50" height="50" label="↑"
          click="button2_clickHandler(event)"/>
<s:Button id="right" x="107" y="304" width="50" height="50" label="→"
          click="right_clickHandler(event)"/>
<s:Button id="down" x="59" y="352" width="50" height="50" label="↓"
          click="down_clickHandler(event)"/>
<s:Button x="260" y="309" width="50" height="50" label="A" click="Main()"/>
<s:Button x="207" y="359" width="50" label="B" click="showMC()"/>
<s:Image id="ue" x="75" y="33" visible="false" smooth="true" source="assets/ue.png"/>
<s:Image id="shita" x="80" y="49" smooth="true" source="assets/shita.png"/>
<s:Image id="hidari" x="75" y="55" smooth="true" source="assets/hidari.png"/>
<s:Image id="migi" x="100" y="53" smooth="true" source="assets/migi.png"/>
<s:Image id="good" x="-21" y="84" width="363" height="103" visible="false" source="assets/good.png"/>
<s:Image id="go" x="28" y="62" width="263" height="153" visible="false" source="assets/go.png"/>
<s:Label id="tensu" x="19" y="31" text="ラベル"/>
<s:Image id="bad" x="24" y="54" visible ="false" source="assets/bad.png"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T20:05:48.433

A range error means that you are trying to access a member of an Array or Vector, but the array or vector does not have a value at that index.

So for the array `exampleArray = [1,2,3,4]`

calling exampleArray[3] is valid because the array contains "4" at that index, but exampleArray[4] would generate an error because exampleArray does not contain a 5th index. (Reminder, array and vector indexes begin with zero, not one)

So when you call:

```
protected function down_clickHandler(event:MouseEvent):void
        {
            // TODO Auto-generated method stub
            display(2);
            sets(2);
        } 
```

The line "sets(2)" causes a problem when the code in that function references set[2] since set does not contain 3 members.

# javascript - 单击表标题内的 div 是单击父标题

> ID：14144913
> 
> 赞同：0
> 
> 时间：2013-01-03T18:28:15.267
> 
> 标签：javascript, jquery, css

我正在使用一个 jquery 表插件，当您单击列标题时对行进行排序。我正在尝试实现一项功能，您可以通过单击标题内的“X”来删除列。我的标题看起来像`<th><div class="remove-column">X</div>Total Cases</th>` ，并且我在 remove-column 类上有一个单击事件侦听器。当我单击 X 时，不是像我想要的那样隐藏列，而是对行进行排序。

我的隐藏表格的功能甚至没有被调用。这可能是样式问题，还是完全其他问题？

为了清楚起见，需要更多代码。我也在使用 Backbone：

事件监听器

```
 events: {
      'click .remove-column': 'removeColumn'
    } 
```

以及要调用的函数：

```
removeColumn: function(e){
    debugger
    var columnIndex = $(e.currentTarget).parent().index();
    $('table tr td:nth-child('+columnIndex+')')
  } 
```

CSS(less) 看起来像这样：

```
 thead {
          tr {
            td, th {
              position: relative;
              .remove-column {
                position: absolute;
                right: 3px;
                opacity: 0.0;
              }
            }
          }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:29:58.043

您需要阻止事件冒泡。用于`e.stopPropagation()`阻止事件冒泡。

```
$('.remove-column').on('click', function (e) {
   e.stopPropagation();
   //Your code
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:35:14.497

您需要`preventDefault`在排序方法的点击事件上使用，然后删除。类似于以下内容。

```
$(document).ready(function(){
    $('.remove-column').click(function(event){
        event.preventDefault();   //Stop the default action
        $(this).parent().remove();
    });
}); 
```

或者，您也可以查看`event.stopPropagation`方法或使用`return false;`来停止默认行为。

# java - 如何在junit测试中测试比较器

> ID：14144914
> 
> 赞同：9
> 
> 时间：2013-01-03T18:28:19.273
> 
> 标签：java, junit, comparator

我需要测试这个方法 - `compare()`。你能得到建议吗？我能做到多好（如果，如果，如果，其他所有部分）。

```
public class AbsFigure {

class AreaCompare implements Comparator<FigureGeneral> {

    @Override
    public int compare(FigureGeneral oneFigure, FigureGeneral twoFigure) {
        double firstValue = oneFigure.area();
        double secondValue = twoFigure.area();
        int result = 0;

        if (firstValue > secondValue)
            result = 1;
        else if (firstValue < secondValue)
            result = -1;
        else
            result = 0;

        return result;
    }
} 
```

在此建议之后 - 我们有下一张照片（非常感谢你们！）：

```
public AreaCompare areaCompare = new AreaCompare();

@Test
public void testEqual() {
    FigureGeneral oneFigure = new Rectangle(2.0, 2.0, "triangle");
    FigureGeneral twoFigure = new Rectangle(2.0, 2.0, "rectangle");
        int result = areaCompare.compare(oneFigure, twoFigure);
        assertTrue("expected to be equal", result == 0);
}

@Test
public void testGreaterThan() {
    FigureGeneral oneFigure = new Triangle(2.0, 2.0, "triangle");
    FigureGeneral twoFigure = new Rectangle(1.0, 1.0, "rectangle");
        int result = areaCompare.compare(oneFigure, twoFigure);
        assertTrue("expected to be greater than", result >= 1);
}

@Test
public void testLessThan() {
    FigureGeneral oneFigure = new Rectangle(1.0, 1.0, "rectangle");
    FigureGeneral twoFigure = new Triangle(2.0, 2.0, "triangle");
        int result = areaCompare.compare(oneFigure, twoFigure);
        assertTrue("expected to be less than", result <= -1); 
```

现在一切正常测试。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-03T18:33:30.547

只需实例化您的比较器类并传入对象：

```
public class Test extends TestCase {
    class AreaCompare implements Comparator<FigureGeneral> {

        @Override
        public int compare(FigureGeneral oneFigure, FigureGeneral twoFigure) {
            double firstValue = oneFigure.area();
            double secondValue = twoFigure.area();
            int result = 0;

            if (firstValue > secondValue) {
                result = 1;
            } else if (firstValue < secondValue) {
                result = -1;
            } else {
                result = 0;
            }

            return result;
        }
    }

    private final AreaCompare areaCompare = new AreaCompare();

    @Test
    public void testEqual() {
        FigureGeneral oneFigure = new FigureGeneral();
        FigureGeneral twoFigure = new FigureGeneral();
        int result = areaCompare.compare(oneFigure, twoFigure);
        assertTrue("expected to be equal", result == 0);
    }

    @Test
    public void testGreaterThan() {
        FigureGeneral oneFigure = new FigureGeneral();
        FigureGeneral twoFigure = new FigureGeneral();
        int result = areaCompare.compare(oneFigure, twoFigure);
        assertTrue("expected to be greater than", result >= 1);
    }

    @Test
    public void testLessThan() {
        FigureGeneral oneFigure = new FigureGeneral();
        FigureGeneral twoFigure = new FigureGeneral();
        int result = areaCompare.compare(oneFigure, twoFigure);
        assertTrue("expected to be less than", result <= -1);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:31:53.990

对我来说看起来很傻。也许摆脱`result`

```
class AreaCompare implements Comparator<FigureGeneral> {

    @Override
    public int compare(FigureGeneral oneFigure, FigureGeneral twoFigure) {
        double firstValue = oneFigure.area();
        double secondValue = twoFigure.area();
        if (firstValue > secondValue)
            return 1;
        else if (firstValue < secondValue)
            return -1;
        return 0;
    }
} 
```

至少编写测试用例。每个返回值一个。

`compare(a, b)`应该有不同于`compare(b, a)` 或的符号

`compare(a, b) == compare(b, a) == 0`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T20:00:33.873

我最近有一个类似的需求，并提出了一些辅助方法（虽然还没有作为 API 发布）。这是源代码：

[https://github.com/SoftSmithy/softsmithy-lib/blob/master/softsmithy-lib-core/src/test/java/org/softsmithy/lib/Tests.java](https://github.com/SoftSmithy/softsmithy-lib/blob/master/softsmithy-lib-core/src/test/java/org/softsmithy/lib/Tests.java)

这是一个使用这些实用方法的测试：

[https://github.com/SoftSmithy/softsmithy-lib/blob/master/softsmithy-lib-core/src/test/java/org/softsmithy/lib/util/PositionableComparatorTest.java](https://github.com/SoftSmithy/softsmithy-lib/blob/master/softsmithy-lib-core/src/test/java/org/softsmithy/lib/util/PositionableComparatorTest.java)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-11T23:45:22.190

最好测试合约而不是 -1/0/1 值（或更准确地说，任何正/零/负值）。这可以使用 Hamcrest 匹配器以非常简洁的方式完成。考虑以下示例：

```
import static org.hamcrest.Matchers.comparesEqualTo;
import static org.hamcrest.Matchers.greaterThan;
import static org.hamcrest.Matchers.lessThan;

public AreaCompare areaCompare = new AreaCompare();

@Test
public void testEqual() {
    FigureGeneral oneFigure = new Rectangle(2.0, 2.0, "triangle");
    FigureGeneral twoFigure = new Rectangle(2.0, 2.0, "rectangle");
    assertThat(oneFigre comparesEqualTo(twoFigure));
    assertThat(twoFigure, comparesEqualTo(oneFigure));
}

@Test
public void testGreaterThan() {
    FigureGeneral oneFigure = new Triangle(2.0, 2.0, "triangle");
    FigureGeneral twoFigure = new Rectangle(1.0, 1.0, "rectangle");
    assertThat(oneFigure, greaterThan(twoFigure));
}

@Test
public void testLessThan() {
    FigureGeneral oneFigure = new Rectangle(1.0, 1.0, "rectangle");
    FigureGeneral twoFigure = new Triangle(2.0, 2.0, "triangle");
    assertThat(oneFigure, lessThan(twoFigure));
} 
```

因此，您不必记住哪个值代表什么，并且测试可以明确意图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T20:33:55.450

经过一点建议，良好的测试：

```
public AreaCompare areaCompare = new AreaCompare();

@Test
public void testEqual() {
    FigureGeneral oneFigure = new Rectangle(2.0, 2.0, "triangle");
    FigureGeneral twoFigure = new Rectangle(2.0, 2.0, "rectangle");
        int result = areaCompare.compare(oneFigure, twoFigure);
        assertTrue("expected to be equal", result == 0);
}

@Test
public void testGreaterThan() {
    FigureGeneral oneFigure = new Triangle(2.0, 2.0, "triangle");
    FigureGeneral twoFigure = new Rectangle(1.0, 1.0, "rectangle");
        int result = areaCompare.compare(oneFigure, twoFigure);
        assertTrue("expected to be greater than", result >= 1);
}

@Test
public void testLessThan() {
    FigureGeneral oneFigure = new Rectangle(1.0, 1.0, "rectangle");
    FigureGeneral twoFigure = new Triangle(2.0, 2.0, "triangle");
        int result = areaCompare.compare(oneFigure, twoFigure);
        assertTrue("expected to be less than", result <= -1);
} 
```

# sql-server - 如何在 perl 脚本中执行插入命令？

> ID：14144918
> 
> 赞同：0
> 
> 时间：2013-01-03T18:28:45.060
> 
> 标签：sql-server, perl

```
#!/usr/bin/perl
use strict;
use DBI;

use Data::Dumper;
use Asterisk::AGI;
my $agi = new Asterisk::AGI;

my $extension  = '8315';  
my $cti  = '7702009896';  
my $service_id =1;

my $DSN = q/dbi:ODBC:SQLSERVER/;
my $uid = q/ivr/;
my $pwd = q/ivr/;

my $DRIVER = "Freetds";
my $dbh = DBI->connect($DSN,$uid,$pwd) or die "Coudn't Connect SQL";

my $sql3=(qq{
                declare '@' + callnumber as int
                set '@' + callnumber = $callnumber
                set '@' + callnumber = (Select '@'+'@' + identity)

                exec "insert into rpt_call_detail (call_start_time,call_number,call_service_id,call_step_name,call_step_type,call_step_discription) values(getdate(),'@' + callnumber,$service_id,'START',0,'CLI:' + $cli)"

          });

my $call_insert1 = $dbh->prepare($sql3);
$call_insert1->execute(); 
```

如何在 Perl 脚本中设置 sql server 变量？我想将电话号码设置为@@identity 我无法成功执行上述代码。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:56:46.327

`declare '@' + callnumber as int`不是有效的 (MS) SQL。你想让它说`declare @callnumber as int`，所以在转义之后`@`，你最终得到`declare \@callnumber as int`. 我不熟悉 using `@@IDENTITY`，但假设这部分是正确的，您的 $sql3 变量将如下所示：

```
my $sql3=(qq{
                declare \@callnumber as int
                set \@callnumber = $callnumber
                set \@callnumber = (Select \@\@identity)

                exec "insert into rpt_call_detail (call_start_time,call_number,call_service_id,call_step_name,call_step_type,call_step_discription) values(getdate(),'@' + callnumber,$service_id,'START',0,'CLI:' + $cli)"

          }); 
```

# c# - 使用 Mono 的代码运行程序编译 C# 代码

> ID：14144922
> 
> 赞同：0
> 
> 时间：2013-01-03T18:28:56.650
> 
> 标签：c#, mono, osx-mountain-lion

我正在尝试在 OS X 上编译这个简单的 C# 代码：

```
using System;

class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("hello");
    }
} 
```

这是代码运行器模板。

我已经安装了Mono，运行命令是mono $compiler。我第一次尝试使用默认的 Compile.sh 文件，但它不起作用，所以我在网上找到了一个指南，说要编写这样的 shell 脚本：

```
enc[4]="UTF8"           # UTF-8
enc[10]="UTF16"         # UTF-16
enc[5]="ISO8859-1"      # ISO Latin 1
enc[9]="ISO8859-2"      # ISO Latin 2
enc[30]="MacRoman"      # Mac OS Roman
enc[12]="CP1252"        # Windows Latin 1
enc[3]="EUCJIS"         # Japanese (EUC)
enc[8]="SJIS"           # Japanese (Shift JIS)
enc[1]="ASCII"          # ASCII
file=$1
file=${file/\.cs/\.exe}

mcs "$1"
echo "$file"
exit 0 
```

所以我改变了它（备份旧的），但我仍然在控制台上收到这个错误：

> bash：运行命令：没有这样的文件或目录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:54:56.247

除非您特别需要从命令行编译，否则我强烈建议您使用[MonoDevelop](http://monodevelop.com/)而不是试图找出适当的命令行参数。

# url - URL 路径的最后一部分的术语是什么

> ID：14144923
> 
> 赞同：8
> 
> 时间：2013-01-03T18:29:06.367
> 
> 标签：url, web

您在最后一个斜杠之后但在查询之前给 url 的部分赋予什么术语？似乎大多数地方人们称之为“路径的最后一部分”，例如[这里](https://stackoverflow.com/questions/10274209/how-to-retrieve-last-part-of-given-path)，但这就是……罗嗦。

例如，此网址中的“某事”：

[http://www.example.com/path/to/something?param=foo](http://www.example.com/path/to/something?param=foo)

**更新：**

我希望有一个我不知道的众所周知的答案，但似乎仍有一些争论，所以这就是我的答案。我想我会一直称它为“最后一个斜线之后的路径部分”。但是我会留下这个问题，以防有人提出令人信服的论点并获得很多支持。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-03-15T08:26:04.560

我参加聚会有点晚了，但在我工作的地方，我们称它为 slug，如此处所述，例如：[https ://prettylinks.com/2018/03/url-slugs/](https://prettylinks.com/2018/03/url-slugs/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T18:33:23.657

协议：//server.domain/path?query

在我看来，路径元素（似乎没有“事实上的”定义）是服务器上资源的路径。无论资源是文件（blah.html）还是文件夹（/path/），它仍然指示服务器使用路径来查找资源。

现在似乎在好/坏 ol' 维基百科[这里](http://en.wikipedia.org/wiki/Query_string)有另一个定义，它指出它通常是“http://server/path/program?query_string”，其中最终资源被定义为“程序”，但我认为这是不正确的（文件夹是程序吗？）

所以..也许它应该是

```
protocol://server.domain/path[/resource.*]?query 
```

? /../../ 我遍历...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T18:42:32.983

如果 URL 类似于 /path/to/file.html 或 example.com/path/to/something.php **?** param=foo

那么我认为我们可以将其命名为[http://httpd.apache.org/docs/2.2/mod/directive-dict.html](http://httpd.apache.org/docs/2.2/mod/directive-dict.html)中提到的**文件名**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-19T20:25:31.680

以我的经验，只要它在网站上指示操作，它就被称为查询字符串。经常编写代码来处理查询字符串，这将在页面上提示自定义结果。

否则，如果路径引用文件，我同意将其称为文件名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-23T08:28:36.493

我发现术语“最后一段”或“最后一块”非常准确和简洁。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-13T09:08:38.520

我在这里和那里看到了一些不确定的建议，包括“文件名”、“基本名”。Qt 项目的词典中有这些名称，因此可以作为标准。

即检查[QFileInfo](http://doc.qt.io/qt-5/qfileinfo.html)类。

他们将名称标准化如下：

```
QFileInfo fi("/tmp/archive.tar.gz");

fi.fileName();         // "archive.tar.gz"
fi.baseName();         // "archive"
fi.completeBaseName(); // "archive.tar"
fi.suffix();           // "gz"
fi.completeSuffix();   // "tar.gz" 
```

但是，这是本地文件的规范，因此在此标准中，`URI`此处与基本术语有所不同：

```
fi.path();             // "/tmp"
fi.filePath();         // "/tmp/archive.tar.gz" 
```

* * *

在[QUrl](http://doc.qt.io/qt-5/qurl.html)中，您有`path`&`fileName`

```
QUrl("file:file.txt").path();                   // "file.txt"
QUrl("/home/user/file.txt").path();             // "/home/user/file.txt"
QUrl("http://www.example.com/test/123").path(); // "/test/123" 
```

和

```
QUrl("file:file.txt").fileName();                   // "file.txt"
QUrl("/home/user/file.txt").fileName();             // "file.txt"
QUrl("http://www.example.com/test/123").fileName(); // "123" 
```

* * *

如果我要建立一个图书馆，我个人会采用`QFileInfo`术语并将其应用于`URI`本地文件，并希望整个世界都有足够的意识来关注我。

# html - 如何使用 CSS3 Transform.translate 设置元素的真实位置？

> ID：14144925
> 
> 赞同：0
> 
> 时间：2013-01-03T18:29:08.987
> 
> 标签：html, css

我有 2 个输入按钮

我想在鼠标悬停/按钮单击时将 btn1 移动到 btn2 下方。我参考[http://www.quirksmode.org/js/findpos.html](http://www.quirksmode.org/js/findpos.html)来获取 btn2 的位置，并根据 Transform: translate 方法给出 x 和 y。但是 btn1 移动到页面上的不同位置。为 translate 方法提供的坐标未按预期工作。需要帮助确定要转换的正确坐标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:34:45.063

的坐标`translate`是相对于元素的原始位置的。如果您希望它们代表页面上的绝对位置，请将元素设置为`0,0`first：

```
position: absolute;
top: 0;
left: 0; 
```

可能更好的方法（没有绝对定位）是获取两个元素的位置，计算差异并将其传递给`translate`.

# javascript - 表格分页 - li 没有正确附加

> ID：14144929
> 
> 赞同：0
> 
> 时间：2013-01-03T18:29:20.920
> 
> 标签：javascript, jquery, twitter-bootstrap

```
function pagination() {     
 $('.paginated').each(function() {
    var currentPage = 0;
    var numPerPage = $("#instancesPerPage").val();
    var $table = $(this);
    $table.bind('repaginate', function() {
        $table.find('tbody tr').hide().slice(currentPage * numPerPage, (currentPage + 1) * numPerPage).show();
    });
    $table.trigger('repaginate');
    var numRows = $table.find('tbody tr').length;
    var numPages = Math.ceil(numRows / numPerPage);
    var $pager = $('<ul></ul>');

    for (var page = 0; page < numPages; page++) {
    var pageUrl = '<a href="#">' + page + '</a>';
        $('<li></li>').html(pageUrl).on('click', {
            newPage: page
        }, function(event) {
            currentPage = event.data['newPage'];
            $table.trigger('repaginate');
            $(this).addClass('active').siblings().removeClass('active');
        }).appendTo($pager);    
    }
    $pager.appendTo('#pager');
    $("ul li:first-child").addClass('active');
 });
}; 
```

如果我的表有 8 行并且我的 numPerPage.value 为 2，则上述函数将产生以下结果：

```
<div class="pagination-instances pagination-small pagination-right" id="pager">
    <ul></ul>
    <ul>
        <li class="active"><a href="#">0</a></li>
        <li><a href="#">1</a></li>
        <li><a href="#">2</a></li>
        <li><a href="#">3</a></li>
    </ul>
</div> 
```

在选择另一个 numPerPage.value 时调用以下函数：

```
 $('#instancesPerPage').on("change", function() {
  pagination();
 }); 
```

我的表格页面更改为正确的 numPerPage.value 但 li 没有正确更新并变得一团糟。

```
<div class="pagination-instances pagination-small pagination-right" id="pager">
    <ul></ul>
    <ul>
        <li class="active"><a href="#">0</a></li>
        <li><a href="#">1</a></li>
        <li><a href="#">2</a></li>
        <li><a href="#">3</a></li>
    </ul>
    <ul>
        <li class="active"><a href="#">0</a></li>
        <li><a href="#">1</a></li>
    </ul>
    <ul>
        <li class="active"><a href="#">0</a></li>
        <li><a href="#">1</a></li>
    </ul>
</div> 
```

显然这与我正在使用的 appendTo 有关系，但我不知道如何纠正它。我也不知道为什么会有一个空的`<ul></ul>`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T20:26:38.367

多次调用 pagination() 将不起作用，因为您没有取消绑定事件，而是附加`<div id="pager">`而不是替换内容。

此外，如果您有多个分页表，它们都尝试将 a 添加`ul`到同一个`<div id="pager">`. 通过为表中的分页器指定目标 div，您可以拥有多个分页表和多个分页器。

```
<select id="instancesPerPage">
    <option value="2">2</option>
    <option value="5">5</option>
    <option value="8">8</option>
    <option value="100">100</option>
    <option value="999999999">All</option>
</select> Instances per page

<table data-provide="pagination" data-pager="#pager">
    <tr><td>Row 1</td></tr>
    <tr><td>Row 2</td></tr>
    <tr><td>Row 3</td></tr>
    <tr><td>Row 4</td></tr>
    <tr><td>Row 5</td></tr>
    <tr><td>Row 6</td></tr>
    <tr><td>Row 7</td></tr>
    <tr><td>Row 8</td></tr>
</table>

<div class="pagination pagination-small" id="pager"></div>

<table data-provide="pagination" data-pager="#pager2">
    <tr><td>ABC 1</td></tr>
    <tr><td>ABC 2</td></tr>
    <tr><td>ABC 3</td></tr>
    <tr><td>ABC 4</td></tr>
    <tr><td>ABC 5</td></tr>
    <tr><td>ABC 6</td></tr>
    <tr><td>ABC 7</td></tr>
    <tr><td>ABC 8</td></tr>
</table>

<div class="pagination pagination-small" id="pager2"></div>
​ 
```

使用js

```
function pagination() {
 $('table[data-provide=pagination]').each(function() {
    var $table = $(this);
    var $pager = $('<ul></ul>');

    var currentPage = 0;
    var numPerPage = $("#instancesPerPage").val();
    var numRows = $table.find('tbody tr').length;
    var numPages = Math.ceil(numRows / numPerPage);

    $table.unbind('repaginate');

    $table.bind('repaginate', function() {
        $table.find('tbody tr').hide().slice(currentPage * numPerPage, (currentPage + 1) * numPerPage).show();
    });

    for (var page = 0; page < numPages; page++) {
        var link = '<a href="#">' + page + '</a>';

        $('<li></li>').html(link).on('click', { newPage: page}, function(event) {
            currentPage = event.data['newPage'];
            $table.trigger('repaginate');
            $(this).addClass('active').siblings().removeClass('active');
        }).appendTo($pager);    
    }

    $pager.find("li:first-child").addClass('active');

    $($table.data('pager')).html($pager);
    $table.trigger('repaginate');
 });
};

pagination();

$('#instancesPerPage').on("change", function() {
 pagination();
});
​ 
```

[http://jsfiddle.net/gZmWh/10/](http://jsfiddle.net/gZmWh/10/)

# django - 在提交表单时使用 twython-django 对用户进行身份验证

> ID：14144932
> 
> 赞同：1
> 
> 时间：2013-01-03T18:29:40.117
> 
> 标签：django, oauth, twitter, twython

我正在构建一个 Django 应用程序，并尝试在他们提交表单时使用 twython-django 对 Twitter 用户进行身份验证。我已尝试按照此示例[https://github.com/ryanmcgrath/twython-django/tree/master/twython_django_oauth](https://github.com/ryanmcgrath/twython-django/tree/master/twython_django_oauth)的建议编辑我的views.py、urls.py 和models.py 文件，但我只是在猜测所以我确定这就是它不起作用的原因。

你能帮我解决如何让它工作吗？我对 Twitter 包装器完全陌生，因此非常感谢任何帮助。

我试图实现的流程：

1.  用户通过表单提交消息
2.  用户被要求在点击“提交”按钮时验证他们的 Twitter 帐户
3.  用户的消息、Twitter 名称、Twitter screen_name、profile_image_url 和 follower_count 保存在数据库中（我使用的是 Heroku Postgres）
4.  用户的个人资料图像、姓名、screen_name 和消息被打印到 index.html 中（类似 Twitter）的提要中。

我的意见.py：

```
 def logout(request, redirect_url=settings.LOGOUT_REDIRECT_URL):
     django_logout(request)
     return HttpResponseRedirect(request.build_absolute_uri(redirect_url))

 def submit(request):
     twitter = Twython(
         twitter_token=settings.TWITTER_KEY,
         twitter_secret=settings.TWITTER_SECRET,
         callback_url=request.build_absolute_uri(reverse('alpha.views.submit'))
)

auth_props = twitter.get_authentication_tokens()

request.session['request_token'] = auth_props
return HttpResponseRedirect(auth_props['auth_url'])

form = MessageForm(request.session.get('message'))
if form.is_valid():
    new_message = form.save()
    return HttpResponseRedirect('/')
else:
    request.session['message'] = request.POST

twitter = Twython(
        twitter_token = settings.TWITTER_KEY,
        twitter_secret = settings.TWITTER_SECRET,
        oauth_token = request.session['request_token']['oauth_token'],
        oauth_token_secret = request.session['request_token']['oauth_token_secret'],
)

authorized_tokens = twitter.get_authentication_tokens()

try:
    user = User.objects.get(username = authorized_tokens['screen_name'])
except User.DoesNotExist:
        user = User.objects.create_user(authorized_tokens['screen_name'], authorized_tokens['oauth_token_secret'])
        profile = Message()
        profile.user = user
        profile.name = name
        profile.profile_image_url = profile_image_url
        profile.oauth_token = authorized_tokens['oauth_token']
        profile.oauth_secret = authorized_tokens['oauth_token_secret']
        profile.save()

user = authenticate(
        username = authorized_tokens['screen_name'],
        password = authorized_tokens['oauth_token_secret']

)
login(request, user)
return HttpResponseRedirect(redirect_url) 
```

免责声明：我是新手，所以上面的代码可能是一团糟！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:31:09.117

是的，您的用例与 twython-django 的用例不同，但这并不意味着它不适用于您的情况，您可以按照流程使用该库。按照主页上的说明设置完所有内容后，您的views.py 需要这样的内容：

```
from django.shortcuts import redirect, reverse

def submit(request):
    # initial form submission, first check if we're authenticated
    # if we are, process as normal, otherwise redirect to the login
    # page. If you've set up twython-django correctly, it'll redirect
    # to twitter for the actual login.
    if request.method == "POST":
        if request.user.is_authenticated():
            form = MessageForm(request.POST)
            if form.is_valid():
                form.save()
                return redirect('/')
            else:
                # Modify this to display validation errors
                pass
        else:
            request.session['message'] = request.POST
            # the reverse(submit) resolves this view for redirection
            # back from the twitter authentication
            return redirect(settings.LOGIN_URL, next=reverse(submit))

    # A Get request, where we should first check for the message stored
    # We then process the form and remove it from session to prevent
    # accidental re-use.
    else:
        if 'message' in request.session and request.user.is_authenticated():
            form = MessageForm(request.session['message'])
            del request.session['message']
            if form.is_valid():
                form.save()
                return redirect('/')
            else:
                # Modify this to display validation errors
                pass
        else:
            # handle the case where this is a get request and the variable
            # isn't in session
            pass 
```

至于加载他们的个人资料图片和关注者数量，twython django 目前根本没有处理这些。您可以在 github 上 fork 并将它们添加到 TwitterProfile 模型中，并将适当的代码添加到感谢视图以加载它们，或者您可以将新模型添加到扩展 TwitterProfile 的代码中。

```
from twython_django_oauth.models import TwitterProfile
from django import models

class ExtendedTwitterProfile(models.Model)
    profile = models.OneToOne(TwitterProfile, related_name="extended")
    avatar = models.CharField(max_length=255)
    followers = models.IntegerField() 
```

并将代码添加到提交视图中以根据需要添加/更新配置文件。

```
extended_profile = ExtendedTwitterProfile.objects.get_or_create(profile=request.user.twitterprofile)
extended_profile.avatar = avatarurl
extended_profile.followers = followercount

extended_profile.save() 
```

您应该可以通过以下方式访问这些详细信息

```
user.twitterprofile.extended.avatar 
```

虽然，我过去曾使用 url 来获取头像，例如：

```
# avatar redirection urls
url(r'^avatar/(?P<userid>[0-9A-Za-z_]+)$', redirect_to,
    { 'url' : 'http://api.twitter.com/1/users/profile_image/%(userid)s.json' }, name='avatar' ),    
url(r'^avatar/(?P<userid>[0-9A-Za-z_]+)/(?P<size>[a-z]+)$', redirect_to, 
    { 'url' : 'http://api.twitter.com/1/users/profile_image?screen_name=%(userid)s&size=%(size)s' } ), 
```

在要显示头像的模板中，只需使用 url 模板标签和 img 标签即可进行反向 url 解析，如下所示：

```
<img src="{% url avatar userid=request.user.username %}" /> 
```

作为进一步的指针，您还可以通过 Twitter 的 json API 请求所有用户的基本详细信息

```
https://twitter.com/users/zandeez.json 
```

例如，将获得我的公开个人资料，您可以在 python 中使用 urllib 甚至 javascript/ajax 使用的形式，具体取决于您想要对关注者数量执行的操作。

希望这可以帮助您解决问题，如果您需要更多帮助，请随时提出。

# c# - 删除文件时检查文件路径

> ID：14144933
> 
> 赞同：9
> 
> 时间：2013-01-03T18:29:40.360
> 
> 标签：c#, asp.net, .net

如果我有一个在调用时删除文件的 Web 方法，并且它接受三个参数（cNum、year 和 fileName）。我是否需要担心这种方法的漏洞。我唯一能想到的就是将`..\..\..\`删除进一步推进文件夹结构。这应该很容易删除。但是还有什么我应该担心的吗？

```
[WebMethod(EnableSession = true, 
           Description = "Method for deleting files uploaded by customers")]
[ScriptMethod(ResponseFormat = ResponseFormat.Xml)]
public Boolean deleteCustFiles(string cNum, string year, string fileName)
{
    try
    {
        if (String.IsNullOrEmpty(cNum) 
            || String.IsNullOrEmpty(year) 
            || String.IsNullOrEmpty(fileName))
                throw new Exception();

        string path = Server.MapPath(@"~\docs\custFiles\" 
                                        + year + @"\" 
                                        + cNum + @"\" + fileName);
        File.Delete(path);
    }
    catch
    {
        throw new Exception("Unable to delete file");
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T18:36:05.690

我建议使用[类](http://msdn.microsoft.com/en-us/library/3bdzys9w.aspx)上的[`GetFileName`方法](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)来清理文件名参数，如下所示：[`Path`](http://msdn.microsoft.com/en-us/library/3bdzys9w.aspx)

```
public Boolean deleteCustFiles(string cNum, string year, string fileName)
{
    // Cleanse fileName.
    fileName = Path.GetFileName(fileName); 
```

该`GetFileName`方法从路径中删除所有目录信息，这正是您想要在此处执行的操作。

输入如下：

```
..\..\..\filename.ext 
```

你会得到：

```
filename.ext 
```

作为回报，您不必担心有人注入的路径会转义您的目标目录（假设此文件名是用户输入或来自某人可以输入他们想要的任何输入的开放端点）。

然后，这允许您将自定义路径附加到`fileName`.

当然，这只有在您的所有文件都在预定义目录中时才有效，看起来确实如此。

但是，这不会*做*任何事情来处理删除用户无权访问的文件。如果文件属于该目录中的*另一个*用户，那么这里没有检查是否是这种情况（但如果*所有*用户都有权删除这些文件，那么没关系）。

此外，您可能希望使用类上的[`Combine`方法](http://msdn.microsoft.com/en-us/library/fyy7a5kt.aspx)`Path`来组合您的路径，如下所示：

```
string path = Server.MapPath(@"~\docs\custFiles\")
path = Path.Combine(path, year);
path = Path.Combine(path, cNum);
path = Path.Combine(path, fileName); 
```

如果您使用的是 .NET 4.0 或更高版本，则可以使用[将路径部分作为参数数组](http://msdn.microsoft.com/en-us/library/dd991142.aspx)[的方法的重载`Combine`](http://msdn.microsoft.com/en-us/library/dd991142.aspx)：

```
string path = Path.Combine(
    Server.MapPath(@"~\docs\custFiles\"),
    year, cNum, fileName); 
```

最后，正如[Shai 指出的那样](https://stackoverflow.com/a/14145105/50776)，如果可能（对于一个完整的解决方案），为了使这更加安全，您应该在文件系统级别启用权限。

如果您正在模拟用户或使用受限用户帐户来处理所有请求，那么您应该授予该用户对 `~\docs\custFiles\`目录（和任何子目录）的访问权限。

用户帐户不应访问该目录*之上*的*任何*内容。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:40:08.490

检查文件名和目录名是否是有效文件名是一个好主意，请对照此 char 数组检查它们：

[`Path.GetInvalidFileNameChars`](http://msdn.microsoft.com/en-us/library/system.io.path.getinvalidfilenamechars.aspx)

**编辑：**

您可能还应该像这样验证年份和数字：

`bool valid = int.TryParse(num, out temp);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T18:40:46.357

您可能还需要考虑在文件系统上使用内置安全性来防止用户删除不需要的目录中的文件。如果 Web 应用程序在特定用户下运行，该用户仅有权删除一个目录中的文件，则无论用户尝试什么，应用程序都无权执行删除。

此外，这将使维护（即：添加新目录）非常容易，而无需重新部署应用程序。

然后，您可以捕获访问无效访问尝试的尝试，并根据需要对其进行处理。

```
[WebMethod(EnableSession = true, 
    Description = "Method for deleting files uploaded by customers")]
[ScriptMethod(ResponseFormat = ResponseFormat.Xml)]
public Boolean deleteCustFiles(string cNum, string year, string fileName)
{
    try
    {
        if (String.IsNullOrEmpty(cNum) || String.IsNullOrEmpty(year) ||
            String.IsNullOrEmpty(fileName))
            throw new Exception();
        string path = 
            Server.MapPath(@"~\docs\custFiles\" + year + @"\" + cNum + 
                @"\" + fileName);
        File.Delete(path);
    }
    catch (System.Security.SecurityException e)
    {
        throw new Exception("Unauthorized attempt to delete file");
    }
    catch
    {
        throw new Exception("Unable to delete file");
    }

    return true;
} 
```*

# php - 提交按钮在本地主机中不起作用

> ID：14144938
> 
> 赞同：-1
> 
> 时间：2013-01-03T18:30:06.537
> 
> 标签：php, codeigniter

我在下面的代码中没有发现任何错误。但是，在提交表单时，什么都没有发生。具体来说，我的页面没有重定向到其他页面。我正在使用 WAMP 服务器上的 CodeIgniter 在本地测试此代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>Register New</title>
  </head>
  <body>
  <?php $attributes = array('AUTOCOMPLETE' => 'off','method' =>'post');?>
  <?=form_open('welcome/register',$attributes);?>
  <table align="center" border="0">
    <th>
      <td colspan="3" >
        <font color="#0033FF" title="" face="Times New Roman, Times, serif" size="+1">Register  New</font>
      </td>
    </th>
    <tr>
      <td colspan="4" align="center" style="color:#FF0000; font-size:14px">
      <?php
          $vmsg=$this->session->userdata('msg');
          if($vmsg)
            echo  $vmsg;
          $this->session->unset_userdata('msg');?><?=validation_errors();
      ?>
      </td>
    </tr>
    <tr>
      <td>User Name: </td>
      <td><div align="center" style="font:Geneva, Arial, Helvetica, sans-serif;  color:#FF0000; font-size:14px;">*</div></td>
      <td><input type="text" name="user_name" id="user_name" /></td>
    </tr>
    <tr>
      <td>Designation: </td>
      <td><div align="center" style="font:Geneva, Arial, Helvetica, sans-serif;  color:#FF0000; font-size:14px;">*</div></td>
      <td><input type="text" name="desig" id="desig" /></td>
    </tr>
    <tr>
      <td>Phone No.: </td>
      <td><div align="center" style="font:Geneva, Arial, Helvetica, sans-serif;  color:#FF0000; font-size:14px;">*</div></td>
      <td><input type="text" name="ph_no" id="ph_no" /></td>
    </tr>
    <tr>
      <td>Login ID:</td>
      <td><div align="center" style="font:Geneva, Arial, Helvetica, sans-serif; color:#FF0000; font-size:14px;">*</div></td>
      <td><input type="text" name="login_id" id="login_id" /></td>
    </tr>
    <tr>
      <td>Password:</td>
      <td><div align="center" style="font:Geneva, Arial, Helvetica, sans-serif; color:#FF0000; font-size:14px;">*</div></td>
      <td><input type="password" name="pwd" id="pwd" /></td>
    </tr>
    <tr>
      <td>Retype Password:</td>
      <td><div align="center" style="font:Geneva, Arial, Helvetica, sans-serif;  color:#FF0000; font-size:14px;">*</div></td>
      <td><input type="password" name="re_pwd" id="re_pwd" /></td>
    </tr>
    <tr>
      <td colspan="3" align="right">
        <input type="submit" name="btnsubmit" value="Save" />
      </td>
    </tr>
  </table>
  </form>
  </body>
  </html> 
```

请注意`form_open`PHP 代码中的指令。

如何修复表单提交过程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T18:31:28.817

好吧，看来您的表单甚至没有包含在`<form>`标签中，有一个开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:32:34.490

你没有`<form method="">`机会关闭你的`</form>`

将此添加到您的实际表格上方。例子：

```
<form method="POST"> 

<tr><td>User Name: </td>
<td><div align="center" style="font:Geneva, Arial, Helvetica, sans-serif;  color:#FF0000; font-size:14px;">*</div></td> 
```

# magento - Magento：可配置/Bundeld 产品？它是如何工作的？

> ID：14144942
> 
> 赞同：2
> 
> 时间：2013-01-03T18:30:34.383
> 
> 标签：magento, magento-1.7, configurable-product

我们在可配置产品、捆绑产品、使用自定义选项等之间有点迷失了。

我会告诉你我们想要得到的结果：

我们是一家 USB 制造公司。我们想通过 Magento 销售定制的 USB 密钥。我们有大约 50 种不同的 USB 型号可供选择。对于每个型号，客户必须能够选择所需的颜色（不会改变价格）、所需的容量（1 GB、2GB、4 GB 等 - 这将改变价格，例如 20、30、40 %更多的产品价格）。他还必须能够选择钥匙的包装（例如盒子、塑料袋、皮袋等）。我们想使用分层定价，并根据他选择的数量和容量显示密钥的价格。

我们想要做的一个完美的例子是：[http](http://wowusb.com/plastic-custom-usb-flash-drive/usb-81.html) ://wowusb.com/plastic-custom-usb-flash-drive/usb-81.html 。

我们尝试过使用 SCP 扩展（单一可配置产品），但并不真正了解如何使用它。

我们真的不需要相关产品。每个 USB 型号的一个产品都可以，只是在这个上有选项（和层级定价），就像上面的商店一样。

你能指导我们如何实现这一点吗？

任何帮助将不胜感激 ！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T20:43:57.650

Simple Configurable Products 扩展适用于这类事情，通常没有很多配置（只需在用户选择选项时选择要更新的可配置产品的哪些部分）。当涉及到分层定价时，SCP 扩展将有很大帮助。

要为您要查找的内容构建可配置选项，首先您必须为每个属性创建产品属性（下拉类型、全局范围）。这是在目录 -> 属性 -> 管理属性中。您可以根据颜色、存储尺寸和包装各制作一个。对于每个属性，您将添加可用的不同选项。

制作完成后，请确保将它们添加到您将使用的属性集（目录 -> 属性 -> 管理属性集）。

现在工作来了：您需要为每种可用的组合制作一个简单的产品。对于每个简单产品，您需要选择之前创建的特定属性，并为每个简单产品设置分层定价。

一个粗略的数学概念：5 种颜色 X 5 种尺寸 X 3 种包装 = 75 种简单产品

这可以通过 csv 导入来完成，这样可以节省您一些时间，尽管您必须检查导出列表中的分层定价结构并准确复制它。顺便说一句，我建议将这些产品的可见性设置为“单独不可见”，但不要禁用它们。

现在您可以开始构建可配置产品。一旦您开始创建新产品，它会询问您要使用哪些属性，因此请选择颜色/尺寸/包装以及您希望对产品进行微调的任何其他内容。

正常输入一般产品信息。价格在这里无关紧要（SCP 扩展不使用它）。

在“关联产品”下，过滤网格视图以查找您创建的所有简单产品，然后开始检查它们。如果产品线变为红色，则表示已选择具有完全相同属性的产品。

列出可配置产品后，您可以使用 SCP 扩展设置（系统 -> 配置 -> SCP 配置）让产品按您的意愿运行。购物车标题下的选项决定了您希望在购物车行中显示的内容。产品页面标题下的选项可让您确定是否希望可配置产品的各个部分使用相应的简单产品信息（描述、简短描述、主图像、图库图像和附加信息框）进行更新。

当用户选择最后一个选项时，产品价格将自动更新，并显示分层定价框（“以 $Y 购买 X 并节省 Z%！”）。

最后一件事，当使用 SCP 扩展时，不要将任何“自定义选项”添加到可配置产品中，它们必须添加到与可配置产品关联的简单产品中（其他产品类型也可以）。

# c# - MySQL OdbcCommand 命令有时会挂起？

> ID：14144947
> 
> 赞同：0
> 
> 时间：2013-01-03T18:30:51.300
> 
> 标签：c#, .net, mysql, odbc

我在 C# 中运行一个循环，该循环在 Windows 8 64 位环境中读取文件并使用 MySQL ODBC 5.1 驱动程序更新 MySQL 数据库。

操作简单

1.  计数 +1
2.  查看文件是否存在
3.  加载 XML 文件（XDocument）
4.  从 XDocument 中获取数据
5.  打开 ODBC 连接
6.  针对 MySQL 数据库运行几个存储过程来存储数据
7.  关闭 ODBC 连接

问题是它会在一段时间后挂起，例如 OdbcCommand.ExecuteNonQuery。它不会总是挂在同一个SP上吗？

这是一个真正的问题，我需要循环 60 000 个文件，但一次只能持续大约 1000 个。

编辑1：问题似乎在这里发生了：

```
public bool addPublisherToGame(int inPublisherId, int inGameId)
        {
            string sqlStr;
            OdbcCommand commandObj;
            try
            {
                sqlStr = "INSERT INTO games_publisher_binder (gameId, publisherId) VALUE(?,?)";

                commandObj = new OdbcCommand(sqlStr, mainConnection);
                commandObj.Parameters.Add("@gameId", OdbcType.Int).Value = inGameId;
                commandObj.Parameters.Add("@publisherId", OdbcType.Int).Value = inPublisherId;

                if (Convert.ToInt32(executeNonQuery(commandObj)) > 0)
                    return true;
                else
                    return false;

            }
            catch (Exception ex)
            {
                throw (loggErrorMessage(this.ToString(), "addPublisherToGame", ex, -1, "", ""));
            }
            finally
            {

            }
        }

protected object executeNonQuery(OdbcCommand inCommandObj)
        {
            try
            {
                //FileStream file = new FileStream("d:\\test.txt", FileMode.Append, FileAccess.Write);

                //System.IO.StreamWriter stream = new System.IO.StreamWriter(file);
                //stream.WriteLine(DateTime.Now.ToString() + " - " + inCommandObj.CommandText);
                //stream.Close();
                //file.Close();

                //mainConnection.Open();
                return inCommandObj.ExecuteNonQuery();
            }
            catch (Exception ex)
            {
                throw (ex);
            }
        } 
```

我可以看到in参数是正确的

连接的打开和关闭是在永远循环的顶部方法中完成的（使用 finally）。

编辑2：

这是提取信息并保存到数据库的方法：

```
public Boolean addBoardgameToDatabase(XElement boardgame, GameFactory gameFactory)
        {
            int incomingGameId = -1;
            XElement tmpElement;
            string primaryName = string.Empty;
            List<string> names = new List<string>();
            GameStorage externalGameStorage;

            int retry = 3;
            try
            {
                if (boardgame.FirstAttribute != null &&
                    boardgame.FirstAttribute.Value != null)
                {
                    while (retry > -1)
                    {
                        try
                        {
                            incomingGameId = int.Parse(boardgame.FirstAttribute.Value);

                            #region Find primary name
                            tmpElement = boardgame.Elements("name").Where(c => c.Attribute("primary") != null).FirstOrDefault(a => a.Attribute("primary").Value.Equals("true"));

                            if (tmpElement != null)
                                primaryName = tmpElement.Value;
                            else
                                return false;
                            #endregion

                            externalGameStorage = new GameStorage(incomingGameId,
                                                                primaryName,
                                                                string.Empty,
                                                                getDateTime("1/1/" + boardgame.Element("yearpublished").Value),
                                                                getInteger(boardgame.Element("minplayers").Value),
                                                                getInteger(boardgame.Element("maxplayers").Value),
                                                                boardgame.Element("playingtime").Value,
                                                                0, 0, false);

                            gameFactory.updateGame(externalGameStorage);
                            gameFactory.updateGameGrade(incomingGameId);

                            gameFactory.removeDesignersFromGame(externalGameStorage.id);
                            foreach (XElement designer in boardgame.Elements("boardgamedesigner"))
                            {
                                gameFactory.updateDesigner(int.Parse(designer.FirstAttribute.Value), designer.Value);
                                gameFactory.addDesignerToGame(int.Parse(designer.FirstAttribute.Value), externalGameStorage.id);
                            }

                            gameFactory.removePublishersFromGame(externalGameStorage.id);
                            foreach (XElement publisher in boardgame.Elements("boardgamepublisher"))
                            {
                                gameFactory.updatePublisher(int.Parse(publisher.FirstAttribute.Value), publisher.Value, string.Empty);
                                gameFactory.addPublisherToGame(int.Parse(publisher.FirstAttribute.Value), externalGameStorage.id);
                            }

                            foreach (XElement element in boardgame.Elements("name").Where(c => c.Attribute("primary") == null))
                                names.Add(element.Value);

                            gameFactory.removeGameNames(incomingGameId);

                            foreach (string name in names)
                                if (name != null && name.Length > 0)
                                    gameFactory.addGameName(incomingGameId, name);

                            return true;
                        }
                        catch (Exception)
                        {

                            retry--;
                            if (retry < 0)
                                return false;
                        }
                    }

                }

                return false;
            }
            catch (Exception ex)
            {
                throw (new Exception(this.ToString() + ".addBoardgameToDatabase : " + ex.Message, ex));
            }
        } 
```

然后我们更上一层楼，触发 addBoardgameToDatabase 的方法：

```
private void StartThreadToHandleXmlFile(int gameId)
        {
            FileInfo fileInfo;
            XDocument xmlDoc;
            Boolean gameAdded = false;
            GameFactory gameFactory = new GameFactory();

            try
            {
                fileInfo = new FileInfo(_directory + "\\" + gameId.ToString() + ".xml");

                if (fileInfo.Exists)
                {
                    xmlDoc = XDocument.Load(fileInfo.FullName);

                    if (addBoardgameToDatabase(xmlDoc.Element("boardgames").Element("boardgame"), gameFactory))
                    {
                        gameAdded = true;
                        fileInfo.Delete();
                    }
                    else
                        return;
                }

                if (!gameAdded)
                {
                    gameFactory.InactivateGame(gameId);
                    fileInfo.Delete();
                }
            }
            catch (Exception)
            { throw; }
            finally
            {
                if(gameFactory != null)
                    gameFactory.CloseConnection();
            }
        } 
```

最后是顶层：

```
public void UpdateGames(string directory)
{
    DirectoryInfo dirInfo;
    FileInfo fileInfo;
    Thread thread;

    int gameIdToStartOn = 1;

    dirInfo = new DirectoryInfo(directory);
    if(dirInfo.Exists)
    {
        _directory = directory;
        fileInfo = dirInfo.GetFiles("*.xml").OrderBy(c=> int.Parse(c.Name.Replace(".xml",""))).FirstOrDefault();

        gameIdToStartOn = int.Parse(fileInfo.Name.Replace(".xml", ""));

        for (int gameId = gameIdToStartOn; gameId < 500000; gameId++) 
        {
            try
            { StartThreadToHandleXmlFile(gameId); }
            catch(Exception){}
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:41:59.053

1.  通过将“Pooling=true”添加到您的连接字符串来使用 SQL 连接池。
2.  确保正确关闭连接和文件。
3.  您可以创建一个大型查询并只执行一次，我认为它比 60.000 个松散查询快得多！

你能展示一下你的代码吗？

# jquery - 是否可以使用 jquery 在淡入淡出之前制作：？

> ID：14144950
> 
> 赞同：2
> 
> 时间：2013-01-03T18:31:08.993
> 
> 标签：jquery, css

所以我有一个纯粹的风格 div 与 :before 位于图像下方，css 看起来像这样：

```
.the-image-div {
    width: 100px;
    height: 100px;
    box-shadow: inset 0px 0px 3px white;
    border: 1px gray solid;
    position: relative;
    z-index: 3;
}

.image-stack {
    width: 100px;
    height: 100px;
    background: white;
    border: 1px solid gray;
    position: relative;
    top:3px;
    left: 3px;
    z-index: 2;
}

.image-stack:before {
    content: " ";
    width: 100px;
    height: 100px;
    background: white;
    border: 1px solid gray;
    box-shadow: inset 0px 0px 1px white;
    position: absolute;
    top: 3px;
    left: 3px;
    z-index: 1;
} 
```

让 jquery 不仅选择图像堆栈而且 :before 单独选择会很好。目标是在图像堆栈本身之后的几毫秒内将其淡化。想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T18:33:01.033

JavaScript 不能与伪元素交互。相反，我会将 :before 应用于之后添加到元素的类，然后使用 CSS 过渡使其淡入。

# c++ - 命名空间内的局部函数声明

> ID：14144953
> 
> 赞同：8
> 
> 时间：2013-01-03T18:31:22.860
> 
> 标签：c++, namespaces, function-declaration

在这样的情况下

```
namespace n {
    void f() {
        void another_function();
    }
} 
```

函数`another_function`应该定义在命名空间内部`n`还是外部？VS 2012（带有[11 月 CTP](http://blogs.msdn.com/b/vcblog/archive/2012/11/02/visual-c-c-11-and-the-future-of-c.aspx)）说它应该在外面，而 Mac 上的 GCC 4.7.2 说它应该在里面。如果我做错了，我会从链接器中得到未定义的符号错误。

我通常相信 GCC 更符合标准，但这是 C++，你永远无法确定。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-03T18:38:37.663

C++11 3.5（以及 C++03）

> **7**如果没有发现具有链接的实体的块范围声明引用其他声明，则该实体是最内层封闭命名空间的成员。然而，这样的声明并没有在其命名空间范围内引入成员名称。

您示例中的声明声明了`n::another_function`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T18:36:45.353

根据 N3485 7.3.1 [namespace.def]/6，正确答案是`n::another_function`.

> 声明的封闭命名空间是声明在词法上出现的命名空间，除了在其原始命名空间之外重新声明命名空间成员（例如，在 7.3.1.2 中指定的定义）。这样的重新声明具有与原始声明相同的封闭命名空间。[ 例子：
> 
> ```
> namespace Q {
>     namespace V {
>         void f(); // enclosing namespaces are the global namespace, Q, and Q::V
>         class C { void m(); };
>     }
>     void V::f() { // enclosing namespaces are the global namespace, Q, and Q::V
>         extern void h(); // ... so this declares Q::V::h
>     }
>     void V::C::m() { // enclosing namespaces are the global namespace, Q, and Q::V
>     }
> } 
> ```
> 
> —结束示例]

# asp.net - 防止文件（pdf）在 asp.net 中提供

> ID：14144958
> 
> 赞同：1
> 
> 时间：2013-01-03T18:31:49.107
> 
> 标签：asp.net, download, handler

我有一个旧版 Flash 应用程序（无法访问源代码），它完成后会自动在新窗口中打开一个 pdf。

有没有办法阻止这个特定位置的这个文件打开（再次记住我不能编辑闪存）

所以它直接在浏览器中打开到[http://site.com/Files/Video/Completion.pdf ，没有处理程序或任何需要更改的内容。](http://site.com/Files/Video/Completion.pdf)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T20:19:14.107

您可以将 web.config 放在该文件夹中，这将阻止文件被访问，除非它们具有特定角色：

```
<configuration>
    <system.web>
        <authorization>
           <allow roles="WHATEVER-ALLOWED-ROLES"/>
           <deny users="*"/>
        </authorization>
    </system.web>
</configuration> 
```

如果您只想锁定该特定文件，则可以将其包装`<system.web>`为`<location path="filepath-and-name">`

这可能需要您将以下处理程序添加到“处理程序”部分的根 web.config 中，因为通常 IIS 会在 ASP.NET 接触它之前提供该文件。这将使 PDF 通过 ASP.NET，然后可以处理上面的角色限制：

```
<add name="PDFHandler-Integrated" path="*.pdf" verb="GET" type="System.Web.StaticFileHandler" modules="ManagedPipelineHandler" requireAccess="Script" preCondition="integratedMode" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:36:09.567

您可以将文件锁定在 Web 服务器上或将其删除？如果您无法更改来源，则无法阻止`window.open`发生，但可以阻止交付。

# c# - nhibernate中的Linq-ing计算属性无法解析属性错误

> ID：14144967
> 
> 赞同：3
> 
> 时间：2013-01-03T18:32:10.930
> 
> 标签：c#, linq, nhibernate, nhibernate-mapping, hql

我一直在尝试按照 [Hendry Luk 的计算属性解决方案在我的持久层中创建一个计算属性](http://hendryluk.wordpress.com/2011/09/06/nhibernate-linq-ing-calculated-properties/)。

我可以使用 linq 查询从数据库中选择值：

```
var result  = from parcel in Repository.Query(); 
```

当我尝试对所选结果执行 where 时，出现无法解析属性错误。

这是我的代码的样子。

我的模型：

```
 namespace ConsoleApplication14
    {
        using System;
        using System.Collections.Generic;
        using System.Linq;
        using System.Linq.Expressions;
        using System.Text;

        public class Common1 : ICommon
        {
            public virtual int Id { get; set; }

            public virtual string Name { get; set; }

            //public static readonly Expression<Func<Common1, string>> CalculatedDisplayExpression = x => ("Common 1 Display: " + x.Id + " - " + x.Name);
            public static readonly Expression<Func<Common1, string>> CalculatedDisplayExpression = x => (x.Id + "");

            private static readonly Func<Common1, string> CalculateDisplay = CalculatedDisplayExpression.Compile();

            public virtual string Display { get { return CalculateDisplay(this); } }
        }
    } 
```

我的接口模型实现：

```
namespace ConsoleApplication14
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;`enter code here`

    public interface ICommon
    {
        int Id { get; set; }
        string Name { get; set; }
        string Display { get;  }
    }
} 
```

模型映射

```
namespace ConsoleApplication14
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using NHibernate.Mapping.ByCode;
    using NHibernate.Mapping.ByCode.Conformist;

    public class Common1Map : ClassMapping<Common1>
    {
        public Common1Map()
        {
            Id(x => x.Id, map => map.Generator(Generators.Native));
            Property(x => x.Name);
        }
    }
}

namespace ConsoleApplication14
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Linq.Expressions;
    using System.Reflection;
    using System.Text;
    using NHibernate.Hql.Ast;
    using NHibernate.Linq;
    using NHibernate.Linq.Functions;
    using NHibernate.Linq.Visitors;

    public class CalculatedPropertyGenerator<T, TResult> : BaseHqlGeneratorForProperty
    {
        public static void Register(ILinqToHqlGeneratorsRegistry registry, Expression<Func<T, TResult>> property, Expression<Func<T, TResult>> calculationExp)
        {
            registry.RegisterGenerator(ReflectionHelper.GetProperty(property), new CalculatedPropertyGenerator<T, TResult> { _calculationExp = calculationExp });
        }

        private CalculatedPropertyGenerator() { }

        private Expression<Func<T, TResult>> _calculationExp;

        public override HqlTreeNode BuildHql(MemberInfo member, Expression expression, HqlTreeBuilder treeBuilder, IHqlExpressionVisitor visitor)
        {
            return visitor.Visit(_calculationExp);
        }
    }
}

namespace ConsoleApplication14
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using NHibernate;
    using NHibernate.Cfg;
    using NHibernate.Cfg.MappingSchema;
    using NHibernate.Dialect;
    using NHibernate.Driver;
    using NHibernate.Tool.hbm2ddl;
    using NHibernate.Mapping.ByCode;
    using NHibernate.Mapping;
    using Iesi.Collections.Generic;
    using System.Reflection;
    using NHibernate.Linq.Functions;
    using NHibernate.Linq;

    public class SessionProvider
    {
        private static ISessionFactory sessionFactory;

        public static SessionProvider Instance { get; private set; }
        //DefaultLinqToHqlGeneratorsRegistry registry = new DefaultLinqToHqlGeneratorsRegistry();

        ILinqToHqlGeneratorsRegistry registry = new DefaultLinqToHqlGeneratorsRegistry();

        static SessionProvider()
        {
            var provider = new SessionProvider();
            provider.Initialize();
            Instance = provider;
        }

        private SessionProvider() { }

        private void Initialize()
        {
            const string connString = "server=(local)\\mssql2008;database=Common;integrated security=sspi";

            Configuration configuration = new Configuration();
            configuration
                .DataBaseIntegration(db =>
                {
                    db.ConnectionString = connString;
                    db.Dialect<MsSql2008Dialect>();
                    db.Driver<SqlClientDriver>();
                    db.LogSqlInConsole = true;
                    db.IsolationLevel = System.Data.IsolationLevel.ReadCommitted;
                })
                .AddDeserializedMapping(GetMappings(), null);

            CalculatedPropertyGenerator<Common1, string>.Register(registry, x => x.Display, Common1.CalculatedDisplayExpression);

//            registry.RegisterGenerator(ReflectionHelper.GetProperty<Common1, string>(x => x.Display), new CalculatedPropertyGenerator());

            var exporter = new SchemaExport(configuration);
            exporter.Execute(true, true, false); 
            sessionFactory = configuration.BuildSessionFactory();
        }

        private HbmMapping GetMappings()
        {
            ModelMapper mapper = new ModelMapper();
            mapper.AddMappings(Assembly.GetAssembly(typeof(Common1Map)).GetExportedTypes());
            HbmMapping mappings = mapper.CompileMappingForAllExplicitlyAddedEntities();

            return mappings;
        }

        public ISession OpenSession()
        {
            return sessionFactory.OpenSession();
        }
    }
} 
```

客户：

```
namespace ConsoleApplication14
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using NHibernate;
    using NHibernate.Linq;
    using NHibernate.Linq.Functions;

    public class Tester
    {
        private ILinqToHqlGeneratorsRegistry registry = new DefaultLinqToHqlGeneratorsRegistry();
        public void Go()
        {
            using (ISession session = SessionProvider.Instance.OpenSession())
            {
                CreateData(session);

                IQueryable<ICommon> commons = session.Query<ICommon>();//.Where(x => x.Display.Contains("Common1 #7"));

                var common1 = session.Query<Common1>().Where(x => x.Display.Contains("Common1 #7"));

                foreach(var common in commons)
                {
                    Console.WriteLine(common.Display);
                }
            }
        }

        private void CreateData(ISession session)
        {
            using (ITransaction tx = session.BeginTransaction())
            {
                for (int i = 0; i < 10; i++)
                {
                    session.SaveOrUpdate(new Common1() { Name = "Common1 #" + i });
                }

                tx.Commit();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T18:35:57.220

在 SessionProvider 类中注册，例如

```
configuration.LinqToHqlGeneratorsRegistry<MyLinqToHqlGeneratorsRegistry>(); 
```

MyLinqToHQLGeneratorRegistry 实现看起来像这样

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using NHibernate.Linq.Functions;
using NHibernate.Linq;

namespace ConsoleApplication14
{
    public class MyLinqToHqlGeneratorsRegistry : DefaultLinqToHqlGeneratorsRegistry
    {
        public MyLinqToHqlGeneratorsRegistry()
            : base()
        {

            CalculatedPropertyGenerator<Common1, string>.Register(this, x => x.Display, Common1.CalculatedDisplayExpression);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T12:09:44.937

您需要从 DefaultLinqToHqlGeneratorsRegistry 派生一个类。在其构造函数中添加注册逻辑（将“this”传递给CalculatedPropertyGenerator<>.Register()）。然后使用 NHibernate 配置注册该类：

```
cfg.LinqToHqlGeneratorsRegistry<OurLinqFunctionRegistry>(); 
```

# jquery - jQuery 自动完成路径 bash 样式

> ID：14144970
> 
> 赞同：2
> 
> 时间：2013-01-03T18:32:30.713
> 
> 标签：jquery, bash, autocomplete, path

我正在使用 PHP 和 jQuery 开发一个应用程序，其中输入必须采用服务器上的文件路径。路径并不简单，可能有很多条目，所以我想实现一个行为类似于 bash 的自动完成字段，即当前级别的建议列表目录。

假设我有这些目录可用

```
    /a/001
    /a/002
    /a/003
    /b/020
    /b/021
    /c/002

```

首先，自动完成应该建议 a、b 和 c。然后在输入 a/ 后应该建议 001, 002 和 003 ...

我认为服务器应该构建所有可用目录的树，将其写为js对象，然后自动完成函数应解析输入，旋转斜线/并在相应节点中找到可用的子目录，以及选择制作，将其附加到当前路径。

* * *

**更新**

我几乎可以使用[jQuery Autocomplete w/ multiple values](http://jqueryui.com/resources/demos/autocomplete/multiple.html)，但我不喜欢它的行为方式。我希望搜索操作能够将文本填充到可用内容中的下一个歧义，就像 bash 的自动完成功能一样。

这是我现在[在 Pastbin 上的链接](http://pastebin.com/Yvk9PzsH)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:36:53.937

终于如我所想的那样得到了。服务器构建一个由源函数动态解析的 json 树，并使用 2 个输入字段来填充选项卡完成的建议。

[在 jsfiddle 上](http://jsfiddle.net/vanista/DJ4qn/13/)放置一个工作示例

```
function acSource(request, response) {
  var path = split(request.term);
  var depth = path.length;
  var node = paths;
  var avail = new Array();

  // descent into the path tree to get a list of suggestions
  for (var n = 1; n < depth && typeof node !== "undefined"; n++) {
    var cur = path[n - 1];
    node = node[cur];
  }

  // build a regex with the last directory entry being typed
  var last = path.pop();
  var re = new RegExp("^" + last + ".*", "i");

  // filter suggestions by matching with the regex
  for (var k in node) {
    if (k.match(re)) avail.push(k);
  }

  // build a new suggestion
  path.push(sharedStart(avail));
  if (avail.length == 1) path.push("");

  // set suggestion for autocomplete
  var sugg = $(this.element).siblings(".pathSuggest");
  $(sugg).val(path.join("/"));

  // delegate back to autocomplete, but extract the last term
  response($.ui.autocomplete.filter(avail, last));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T19:27:56.997

如果您对以下内容感到满意，则此解决方案将适合您。太简单了

1.  将建议显示为完整路径。即，如果用户键入**/a/** ，则显示**/a/001、/a/002 和 /a/003**的建议，而不是 **001、002 和 003**

在这种情况下，您可以使用远程数据源创建[jQuery 自动完成功能](http://jqueryui.com/autocomplete/#remote)

```
$("#birds").autocomplete({
    source: "search.php",
    minLength: 2,
    select: function(event, ui) {
        log(ui.item ? "Selected: " + ui.item.value + " aka " + ui.item.id : "Nothing selected, input was " + this.value);
    }
}); 
```

然后，`search.php`您可以将所需的值生成为 json 数组。

否则，您可以创建一个自定义自动完成，仅显示服务器上的部分路径。

# android - 从网页链接到 Google Play 应用程序

> ID：14144975
> 
> 赞同：0
> 
> 时间：2013-01-03T18:32:42.460
> 
> 标签：android, web, hyperlink, deep-linking

我知道如何使用以下代码从 Android 应用程序将用户直接链接到 Google Play 应用程序中的产品详细信息页面，

market://details?id=package_name

我的问题是，有什么方法可以强制将用户从 WEB 直接链接到 Google Play 应用程序中的产品详细信息页面？我尝试使用下面的代码，但是，很少有设备问我要使用哪个应用程序 [网络浏览器、Google Play 应用程序] 来完成 LINK 的操作，但大多数设备通常将我直接链接到 Google Play 网页。

[http://play.google.com/store/apps/details?id=pacakage_name](http://play.google.com/store/apps/details?id=pacakage_name)

任何解决方案？

谢谢

# jquery - jQuery - X 秒后删除 iFrame 内的不可见 div？

> ID：14144976
> 
> 赞同：0
> 
> 时间：2013-01-03T18:32:47.523
> 
> 标签：jquery

基于此脚本：

[jsFiddle](http://jsfiddle.net/Y8cVD/)

```
var W=0, H=0, X=0, Y=0;
$(".iframe").each(function(i,el){
   W = $(el).width();
   H = $(el).height();
   X = $(el).position().left;
   Y = $(el).position().top;
   $(this).after('<div class="overlay" />');
    $(this).next('.overlay').css({
        width: W,
        height: H,
        left: X,
        top: Y        
    });
});

// TRACK MOUSE POSITIONS (the overlay will prevent clicks on iframe page)
var mx = 0, my = 0;
$('.overlay').on('mousemove click',function(e){
    mx = e.clientX - $(this).position().left;
    my = e.clientY - $(this).position().top;

    if(e.type==='click'){
        alert('clicked at: X='+mx+' Y='+my)
    }        
}); 
```

是否可以在 X 秒后自动删除不可见的 div？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:50:25.083

将以下内容作为 on() 回调的一部分。

```
window.setTimeout(function(){
                     $('.overlay').remove();
                  }, 10000); //10 sec delay 
```

有关详细信息，请参阅[setTimeout 文档](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)。您还需要删除显示坐标的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:38:41.360

**编辑：**如果你想删除 iframe 的内容，你可以点击这个链接：
[从 iFrame 中卸载/删除内容](https://stackoverflow.com/questions/1307165/unloading-removing-content-from-an-iframe) 你应该把它放在一个像这样的计时器中：

```
// delete after 3 seconds.
var myVar = setInterval(function(){myTimer()},3000);
function myTimer()
{
   // remove the div
   $('#yourDiv').remove();
} 
```

有关 javascript 计时的更多信息，您可以点击此链接：[JavaScript Timing Events](http://www.w3schools.com/js/js_timing.asp)
希望对您有所帮助。

# ios - NSdateformatter 返回错误答案的双重转换为小时分钟和秒

> ID：14144986
> 
> 赞同：1
> 
> 时间：2013-01-03T18:33:17.843
> 
> 标签：ios, nsdateformatter

我正在使用以下代码将值 18900 转换为 hh:mm:ss

不幸的是，返回的值似乎不正确，因为它给了我 06:15:00

谁能告诉它为什么出错

谢谢

```
-(NSString*)setHours:(double)result
{

NSLog(@"result %0.2f",result);
NSDate *date = [NSDate dateWithTimeIntervalSince1970:result];
                NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
                [formatter setDateFormat:@"hh:mm:ss"];
                 NSString *localizedString = [formatter stringFromDate:date];
                [formatter release];
                return localizedString;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T18:49:14.823

由于您的值是自午夜以来的秒数，因此您不需要日期格式化程序。试试这个：

```
-(NSString*)setHours:(double)result {
    int secs = result;
    int h = secs / 3600;
    int m = secs / 60 % 60;
    int s = secs % 60;

    NSString *text = [NSString stringWithFormat:@"%02d:%02d:%02d", h, m, s];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T18:46:38.287

```
[formatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T18:39:21.440

首先，您必须通过将毫秒除以 1000 将毫秒转换为秒。

```
 NSTimeInterval result= 18900/1000;
   NSDate *date = [NSDate dateWithTimeIntervalSince1970:result];
   NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
   [formatter setDateFormat:@"HH:mm:ss"];
   NSString *formattedDate=[formatter stringFromDate:date];
   NSLog(@"Formatted Date : %@",formattedDate); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T18:42:00.500

它为您提供当前时区的结果，时间以 UTC 指定。所以我想你是格林威治标准时间后一个小时。

看看这个问题：[NSDate dateWithTimeIntervalSince1970 NOT return GMT/UTC time](https://stackoverflow.com/questions/7068104/nsdate-datewithtimeintervalsince1970-not-returning-gmt-utc-time)