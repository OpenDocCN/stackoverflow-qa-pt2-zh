# StackOverflow 问答 13487000-13487999

# linux - 关闭 linux 基础服务器上的活动连接

> ID：13487001
> 
> 赞同：1
> 
> 时间：2012-11-21T05:36:29.317
> 
> 标签：linux, sockets, tcp

好吧，我这里有情况。

我有一些应用程序可以侦听某些服务器数据事务（基于 Linux）以获取数据并将其发送到另一台服务器（Windows）上的数据库。

应用程序不稳定，如果发现一些空变量，它可能会崩溃。我无法修复该应用程序，因为它不是我的并且使用我无法使用的语言（而且我没有时间，因为它处于生产状态）。

我要求的是，

> 如何从服务器关闭我的应用程序和服务器之间的连接？

所以我可以重新运行应用程序，因为它给出错误“不支持多会话”。

情况是，

1.  我已经检查了 netstat，我的应用程序连接状态是用正确的 IP 建立的。
2.  我有root权限。
3.  我可能不会重新启动服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:33:50.133

netstat -tulp|grep ESTABLISHED 获取连接的 pid。然后杀死9个pid。

# jquery - 如何在新文件或窗口中输出表单数据的 JSON 表示？

> ID：13487004
> 
> 赞同：0
> 
> 时间：2012-11-21T05:36:58.633
> 
> 标签：jquery, html, json

我有一个 HTML 表单，并使用序列化 jQuery 片段将表单数据转换为 JSON 表示，如下所示：[Convert form data to JavaScript object with jQuery](https://stackoverflow.com/questions/1184624/convert-form-data-to-js-object-with-jquery)

我只能在 div 标签中显示 JSON 输出。但我想在表单提交按钮单击时在新文件或窗口中显示输出。

**我在标题中的 jQuery 序列化片段：**

```
$.fn.serializeObject = function()
{
    var o = {};
    var a = this.serializeArray();
    $.each(a, function() {
        if (o[this.name] !== undefined) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
    });
    return o;
};
$(function() {
    $('form').submit(function() {
        $('#result').text(JSON.stringify($('form').serializeObject(), null, 4));
        return false;
    });
}) 
```

**我的 HTML**

```
<form id="student" method="post">
<label>Name: </label><input type="text" name="studentname" /><br />
<label>Age: </label><input type="text" name="age" /><br />
<label>City: </label><input type="text" name="city" />
<input type="submit" value="Submit" id="submitbutton" /><br />
</form>

<pre id="result"></pre> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T05:48:02.780

将结果放在新窗口中很容易 - 只需将提交部分更改为如下所示：

```
$(function() {
    $('form').submit(function() {
        var txt = JSON.stringify($('form').serializeObject());
        $('#result').text(txt, null, 4);
        var recipe =  window.open('','ResultWindow','width=600,height=600');
        var html = '<html><head><title>Result Window</title></head><body><div>' + txt + '</div></body></html>';
    recipe.document.open();
    recipe.document.write(html);
    recipe.document.close();
        return false;
    });
}) 
```

查看[http://jsfiddle.net/u6z4X/](http://jsfiddle.net/u6z4X/)

# sql - 使用 SQL Server CTE 返回所有父记录

> ID：13487006
> 
> 赞同：3
> 
> 时间：2012-11-21T05:37:11.160
> 
> 标签：sql, sql-server, sql-server-2005, common-table-expression

我有下表类层次结构。

```
ClassID    ParentID
--------------------
PMM_00001  null
PMM_00010  PMM_00001
PMM_00110  PMM_00010
PMM_00020  PMM_00001
PMM_00220  PMM_00020 
```

我想得到以下结果。

```
ClassID    Class_Join
---------------------
PMM_00001  PMM_00001
PMM_00010  PMM_00001
PMM_00010  PMM_00010
PMM_00110  PMM_00001
PMM_00110  PMM_00010
PMM_00110  PMM_00110
PMM_00020  PMM_00001
PMM_00020  PMM_00020
PMM_00220  PMM_00001
PMM_00220  PMM_00020
PMM_00220  PMM_00220 
```

我计划使用这些结果通过加入我的特征表来获得继承的特征。过去我使用循环来正确设置数据，但我想使用 CTE 来获得这些结果。

这是我到目前为止所尝试的。

```
;WITH ClassHierarchy_CTE (ClassID, ClassID_Join)
AS
(
SELECT
    c.ClassID,
    c.ClassID
FROM
    ClassHierarchy AS h
WHERE
    h.ParentID IS NULL
UNION ALL
SELECT
    c.ClassID,
    h.ParentID
FROM
    ClassHierarchy AS h INNER JOIN ClassHierarchy_CTE
        ON
            h.ParentID = ClassHierarchy_CTE.ClassID
)
SELECT
    *
FROM
    ClassHierarchy_CTE
ORDER BY
    ClassID 
```

我从中得到的结果只是沿着层次结构向下走以获得完整列表。我需要将引用返回到层次结构中的每个级别，以便获得完整的特征列表。任何帮助表示赞赏！如果有更好的方法可以做到这一点，我愿意接受建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T13:42:33.523

看起来我在接近这一切都是错误的。我缺少的概念是我需要*向上*移动层次结构，而不是*向下*移动（正如大多数文档/文章所展示的那样）。所以这就是我所做的。

```
CREATE TABLE hierarchy
(
  ClassID  nvarchar(100), ParentID nvarchar(100)
)

INSERT INTO hierarchy
( ClassID     ,           ParentID)
VALUES
( N'PMM_00001',      NULL    ),
( N'PMM_00010',      N'PMM_00001'),
( N'PMM_00110',      N'PMM_00010'),
( N'PMM_00020',      N'PMM_00001'),
( N'PMM_00220',      N'PMM_00020')

;WITH ClassHierarchy_CTE (ClassID, ClassID_Join, Level)
AS
(
SELECT
    ClassID,
    ClassID AS Join_Class,
    0
FROM
    hierarchy AS c
UNION ALL
SELECT
    cte.ClassID,
    h.ParentID,
    Level + 1
FROM
    hierarchy AS h INNER JOIN ClassHierarchy_CTE as cte
      ON
        h.ClassID = cte.ClassID_Join
)
SELECT
    *
FROM
    ClassHierarchy_CTE
WHERE
    ClassID_Join IS NOT NULL
ORDER BY
    ClassID,
    Level 
```

返回...

```
CLASSID CLASSID_JOIN    LEVEL
---------------------------------
PMM_00001   PMM_00001   0
PMM_00010   PMM_00010   0
PMM_00010   PMM_00001   1
PMM_00020   PMM_00020   0
PMM_00020   PMM_00001   1
PMM_00110   PMM_00110   0
PMM_00110   PMM_00010   1
PMM_00110   PMM_00001   2
PMM_00220   PMM_00220   0
PMM_00220   PMM_00020   1
PMM_00220   PMM_00001   2 
```

[SQLfiddle](http://www.sqlfiddle.com/#!3/c313c/4)供参考。

# mysql - 如何在 MYSQL 中删除时更新同一张表？

> ID：13487010
> 
> 赞同：13
> 
> 时间：2012-11-21T05:37:19.457
> 
> 标签：mysql, sql, triggers, mysql-error-1442

在我的数据库中，我有一个`Employee`具有递归关联的表（员工可以是其他员工的老板）：

```
create table if not exists `employee` (

  `SSN` varchar(64) not null,
  `name` varchar(64) default null,
  `designation` varchar(128) not null,
  `MSSN` varchar(64) default null, 
  primary key (`ssn`),
  constraint `fk_manager_employee`  foreign key (`mssn`) references employee(ssn)

) engine=innodb default charset=latin1; 
```

 </p>

```
mysql> describe Employee;
+-------------+--------------+------+-----+---------+-------+
| Field       | Type         | Null | Key | Default | Extra |
+-------------+--------------+------+-----+---------+-------+
| SSN         | varchar(64)  | NO   | PRI | NULL    |       |
| name        | varchar(64)  | YES  |     | NULL    |       |
| designation | varchar(128) | NO   |     | NULL    |       |
| MSSN        | varchar(64)  | YES  | MUL | NULL    |       |
+-------------+--------------+------+-----+---------+-------+
4 rows in set (0.00 sec) 
```

然后插入：

```
mysql> insert into Employee values
    -> ("1", "A", "OWNER",  NULL), 
    -> ("2", "B", "BOSS",   "1"),
    -> ("3", "C", "WORKER", "2"),
    -> ("4", "D", "BOSS",   "2"),
    -> ("5", "E", "WORKER", "4"),
    -> ("6", "F", "WORKER", "1"),
    -> ("7", "G", "WORKER", "4")
    -> ;
Query OK, 7 rows affected (0.02 sec)
Records: 7  Duplicates: 0  Warnings: 0 
```

现在我在表中的行之间具有以下层次关系（所有者>老板>工人）：

```
 A
    / \
   B   F
  / \
 c   D
    / \
   G   E 
```

以下是表的 Select 语句：

```
mysql> SELECT * FROM Employee;
+-----+------+-------------+------+
| SSN | name | designation | MSSN |
+-----+------+-------------+------+
| 1   | A    | OWNER       | NULL |
| 2   | B    | BOSS        | 1    |  
| 3   | C    | WORKER      | 2    |  
| 4   | D    | BOSS        | 2    |  
| 5   | E    | WORKER      | 4    |   
| 6   | F    | WORKER      | 1    |  
| 7   | G    | WORKER      | 4    |  
+-----+------+-------------+------+
7 rows in set (0.00 sec) 
```

现在，我想施加一个约束，例如 : `If any employee (BOSS) deleted then new BOSS of workers under him become immediate BOSS of deleted employee (Old BOSS)`。例如，如果我删除`D`，则`B`成为`G`and的 BOSS `E`。

为此，我还编写了一个**触发器**，如下所示：

```
mysql>  DELIMITER $$
mysql>        CREATE
    ->        TRIGGER `Employee_before_delete` BEFORE DELETE
    ->          ON `Employee`
    ->          FOR EACH ROW BEGIN
    ->          UPDATE Employee
    ->          SET MSSN=old.MSSN
    ->          WHERE MSSN=old.MSSN; 
    ->        END$$
Query OK, 0 rows affected (0.07 sec)

mysql>        DELIMITER ; 
```

但是当我执行一些删除时：

```
mysql> DELETE FROM Employee WHERE SSN='4';
ERROR 1442 (HY000): Can't update table 'Employee' in stored function/trigger
because it is already used by statement which invoked this stored 
function/trigger. 
```

我[在这里学习](https://stackoverflow.com/questions/1582683/mysql-trigger-stored-trigger-is-already-used-by-statement-which-invoked-stored-t/2314264#2314264)是`this trigger is not possible`因为`In MySQL triggers can't manipulate the table they are assigned to`.

还有**其他可能的方法吗？**可以使用`Nested Query`吗？有人可以建议我其他方法吗？一个建议就足够了，但应该是有效的。

**编辑**：
我得到了答案：而不是触发一个`stored procedure`or`two consecutive queries`是可能的。 [第一](https://stackoverflow.com/questions/13487010/how-to-update-same-table-on-deletion-in-mysql/13487164#13487164)和[第二](https://dba.stackexchange.com/questions/29047/how-to-update-same-table-on-deletion-in-mysql/29076#29076)。

我为这个问题写的解决方案如下，运行**良好！**：

*   我正在写的一个辅助信号函数`MYSQL version older then 5.5`。

> 分隔符 //
> 
> ```
> CREATE PROCEDURE `my_signal`(in_errortext VARCHAR(255))
> BEGIN
>     SET @sql=CONCAT('UPDATE `', in_errortext, '` SET x=1');
>     PREPARE my_signal_stmt FROM @sql;
>     EXECUTE my_signal_stmt;
>     DEALLOCATE PREPARE my_signal_stmt;
> END// 
> ```

*   从`Employee`表中删除员工的存储过程。

> ```
> CREATE PROCEDURE delete_employee(IN dssn varchar(64))
> BEGIN
>     DECLARE empDesignation varchar(128);
>     DECLARE empSsn         varchar(64);
>     DECLARE empMssn        varchar(64);
>      SELECT SSN, designation, MSSN  INTO empSsn, empDesignation, empMssn 
>      FROM Employee 
>      WHERE SSN = dssn;
> 
>    IF (empSsn IS NOT NULL) THEN
>     CASE       
>            WHEN empDesignation = 'OWNER' THEN 
>                CALL my_signal('Error: OWNER can not deleted!');
> 
>            WHEN empDesignation = 'WORKER' THEN 
>             DELETE FROM Employee WHERE SSN = empSsn;               
> 
>            WHEN empDesignation = 'BOSS' THEN 
>                BEGIN 
>                    UPDATE Employee
>                    SET MSSN = empMssn
>                    WHERE MSSN = empSsn;
> 
>                 DELETE FROM Employee WHERE SSN = empSsn;                   
> 
>                END;
>     END CASE;
>    ELSE 
>                CALL my_signal('Error: Not a valid row!');
>    END IF;
> END// 
> ```
> 
> 分隔符；

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T05:49:58.497

使用[存储过程](http://dev.mysql.com/doc/refman/5.0/en/stored-routines.html)：

```
UPDATE b
   SET b.mssn = a.mssn
  FROM EMPLOYEE a
  JOIN EMPLOYEE b ON b.mssn = a.ssn
 WHERE a.ssn = @deletedBoss

DELETE FROM employee WHERE ssn = @deletedBoss 
```

使用存储过程，您可以简单地删除所需的行，然后更新同一个表。这应该可以防止错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T05:50:37.327

与其进行硬删除，不如进行软删除。如果要删除该行，请添加 is_deleted 列并将其设置为 1。在表上创建 after_update 触发器。

```
DELIMITER $$
    CREATE
    TRIGGER `Employee_after_update` AFTER UPDATE
      ON `Employee`
      FOR EACH ROW BEGIN
      UPDATE Employee
      ...............
      WHERE NEW.is_deleted=1; 
      DELETE FROM Employee WHERE NEW.is_deleted=1
    END$$ 
```

我不确定您是否可以为 after_{insert,delete,update} 更新同一个表。请检查这个

# asp.net-mvc - mvc 4 web api添加自定义响应http标头

> ID：13487012
> 
> 赞同：12
> 
> 时间：2012-11-21T05:37:44.433
> 
> 标签：asp.net-mvc, asp.net-mvc-4, http-headers, asp.net-web-api

我们可以在默认响应标头旁边添加额外的 http 响应标头项目示例“上次更新”吗？

例如，当我调用 (Request):
localHost:12345/API/GetInfo
with header:
Host: localHost:12345
......

然后 api 将回复 header (Response):
HTTP/1.1 200 OK
Content-Length: XX
Content-Type: XXX
**Last-Update: 值和从 API 函数生成的值**

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-21T05:54:31.523

您可以使用以下代码添加标题：

```
HttpContext.Current.Response.AppendHeader("Last-Update", value); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-02T12:06:28.743

仅供参考，有一个官方的 HTTP 标头，您可以使用它来表示资源上次更新的日期时间。

它是“Last-Modified”标头（[参见](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)规范第 14 节页面上的第 14.29 节）。

您将其添加到您的响应中，如下所示：

```
Response.Content.Headers.LastModified = yourResource.LastUpdatedDateTime; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-01T09:39:12.487

在 MVC 5 中只需添加

```
Response.AppendHeader("header", "value");
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-13T18:49:35.983

我刚刚找到了解决方案。我需要做的是，以 cookie 格式响应 HTTP 标头。这样，浏览器将始终将其返回到我的 Web 服务器。

# vb.net - 如何在 vb.net 中从网络摄像头捕获图像

> ID：13487013
> 
> 赞同：1
> 
> 时间：2012-11-21T05:37:47.700
> 
> 标签：vb.net, webcam

请参阅我有一台 hp 笔记本电脑，我正在尝试通过其网络摄像头为我的登录系统捕获图像。我是 vb.net 的初学者，我不知道如何将我的网络摄像头连接到表单中的图片框并捕获图像并将其保存到数据库，即 sql server 2005 顺便说一下，我正在使用 Visual Studio 2008 ..请帮助并提供像我这样的初学者会理解的答案谢谢

# c# - C# 中的接口和后期绑定

> ID：13487016
> 
> 赞同：1
> 
> 时间：2012-11-21T05:38:06.310
> 
> 标签：c#, plugins, interface, late-binding, .net

我以前在 C# 中为一个运行良好的插件系统做过这个，这就是为什么我对为什么这个新的、独立的插件系统没有按我期望的方式工作感到困惑。

我有我的插件程序集——我们称之为“plugin.dll”，我有我的主程序集——我们称之为 App.exe。

我有一个名为的接口`IMyObject`及其实现，`MyObject`两者都在 plugin.dll 中定义。我已将`IMyObject`（插件开发人员提供给我的）确切代码文件复制到我的主 App.exe 程序集中。

`InvalidCastException`当我尝试将使用反射加载的对象投射到对象实现的接口时，我得到一个。我*知道*对象实现了它，因为

`t.GetInterface(typeof(IMyObject).FullName) != null`

是真的。我还可以`MyObject`在 Visual Studio 的对象资源管理器中浏览，我可以看到它实现了`IMyObject`.

这是出错的地方：

```
 if (ifaceType != null)
 {
    ConstructorInfo constructor = ifaceType.GetConstructor(new Type[] { });

    if (constructor != null)
    {

       object obj = constructor.Invoke(null); // this works - obj is assigned an 
                                              // instance of MyObject

       IMyObject myObj = (IMyObject)obj;      // triggers InvalidCastException
    }               
 } 
```

我现在所做的和我之前实现的方式之间唯一的区别是**接口是在两个单独的程序集中定义的**（即使代码文件是相同的并且它们属于同一个命名空间）。

这就是我麻烦的原因吗？如果是这样，我如何连接到我的插件而不在编译时链接，并使用插件本身定义的接口？

我应该补充一点，除了界面之外，我无权访问插件的源代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T05:46:19.110

即使这些接口具有相同的代码，它们也是两个不同程序集中的两个独立接口（您可以打印它们的 AssemblyQualifiedNames 并查看差异）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T05:48:05.613

是的，运行时将接口视为不同的类型。它们具有相同的名称，仅此而已。

没有反射就无法在主机程序中使用接口，因为您无法静态链接它。通常，将接口放在插件主机程序集中，插件实现它们，而不是相反。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T05:58:09.657

.NET 中可扩展应用程序的典型骨架由以下程序集组成：

*   合同组装。这个包含插件的合约（只是接口和可选的一些数据合约，用于接口）和主机合约；
*   主机组装。这一个包含主机合同实现，并依赖于第一个；
*   几个插件程序集。这些程序集包含插件契约实现，并且也依赖于第一个。

因此，使用合同组装，您可以实现主机和插件彼此独立（因此，插件*是*后期绑定的），但它们具有共同的合同，在编译时双方（插件和主机）都知道。

您的方式（多次定义插件联系人）是错误的方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T06:02:32.180

正如其他人所提到的，这些是单独的接口，处理这个问题的正确方法是将定义放入两个都引用的第三个程序集中。

但是......有一种方法可以通过使用名为[Impromptu Interface](https://code.google.com/p/impromptu-interface/)的库来实现这一点。

# sql-server-2008 - 在过程中使用多个变量

> ID：13487018
> 
> 赞同：1
> 
> 时间：2012-11-21T05:38:19.113
> 
> 标签：sql-server-2008, stored-procedures

所以这对你来说应该是一个非常基本的。我有一个通过日期查找的存储过程。我想添加一个 @storeno 变量，它可以是一个或所有的疮。我该怎么做？

```
USE [POS_REPORT]
GO

SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[sp_ReportTotals] (
@fromdate VARCHAR(10),
@todate VARCHAR(10)
)
AS
BEGIN
SELECT
[POS_REPORT].[dbo].[Txn_Daily_Totals].[storeno],
[POS_REPORT].[dbo].[Txn_Daily_Totals].[Description],
[POS_REPORT].[dbo].[Txn_Daily_Totals].[transactiondate],
[POS_REPORT].[dbo].[Txn_Daily_Totals].[amount] AS 'pos',
[POS_REPORT].[dbo].[SAP_FI_INBOUND_DAILY_TOTALS].[amount] AS 'ecc',
CASE WHEN [POS_REPORT].[dbo].[Txn_Daily_Totals].[amount] = [POS_REPORT].[dbo].[SAP_FI_INBOUND_DAILY_TOTALS].[amount] THEN 'BALANCED' ELSE 'UNBALANCED' END AS 'status',
[POS_REPORT].[dbo].[comments].[responce],
[POS_REPORT].[dbo].[comments].[comment]
FROM
[POS_REPORT].[dbo].[Txn_Daily_Totals]
LEFT JOIN
[POS_REPORT].[dbo].[SAP_FI_INBOUND_DAILY_TOTALS] ON
[POS_REPORT].[dbo].[Txn_Daily_Totals].[storeno] +
[POS_REPORT].[dbo].[Txn_Daily_Totals].[transactiondate] =
[POS_REPORT].[dbo].[SAP_FI_INBOUND_DAILY_TOTALS].[storeno] +
[POS_REPORT].[dbo].[SAP_FI_INBOUND_DAILY_TOTALS].[transactiondate]
LEFT JOIN
[POS_REPORT].[dbo].[comments] ON 
[POS_REPORT].[dbo].[Txn_Daily_Totals].[storeno] +
[POS_REPORT].[dbo].[Txn_Daily_Totals].[transactiondate] =
[POS_REPORT].[dbo].[comments].[storeno] +
[POS_REPORT].[dbo].[comments].[transactiondate]
WHERE
[POS_REPORT].[dbo].[Txn_Daily_Totals].[transactiondate]  = @fromdate AND
[POS_REPORT].[dbo].[Txn_Daily_Totals].[transactiondate] <= @todate
ORDER BY
[POS_REPORT].[dbo].[Txn_Daily_Totals].[Description],
[POS_REPORT].[dbo].[Txn_Daily_Totals].[transactiondate]
END

GO 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T15:39:37.927

```
CREATE PROCEDURE [dbo].[sp_ReportTotals] (
--your paramets
@storeno your_data_type
....
--Changed WHERE clause
WHERE
  [POS_REPORT].[dbo].[Txn_Daily_Totals].[transactiondate]  = @fromdate AND
  [POS_REPORT].[dbo].[Txn_Daily_Totals].[transactiondate] <= @todate AND
  [POS_REPORT].[dbo].[Txn_Daily_Totals].[storeno] = ISNULL(@storeno, [POS_REPORT].[dbo].[Txn_Daily_Totals].[storeno]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:54:23.483

我认为那`storeno`是整数，即使不是，您也可以对任何其他数据类型遵循相同的原则。这将是语法上简单的方法，但要注意执行计划：

```
CREATE PROCEDURE [dbo].[sp_ReportTotals] (
@fromdate VARCHAR(10),
@todate VARCHAR(10),
@storeno INT -- if you want all stores send NULL as @storeno parameter, if you want specific store send its storeno
)
AS
BEGIN
SELECT
[POS_REPORT].[dbo].[Txn_Daily_Totals].[storeno],
[POS_REPORT].[dbo].[Txn_Daily_Totals].[Description],
[POS_REPORT].[dbo].[Txn_Daily_Totals].[transactiondate],
[POS_REPORT].[dbo].[Txn_Daily_Totals].[amount] AS 'pos',
[POS_REPORT].[dbo].[SAP_FI_INBOUND_DAILY_TOTALS].[amount] AS 'ecc',
CASE WHEN [POS_REPORT].[dbo].[Txn_Daily_Totals].[amount] = [POS_REPORT].[dbo].[SAP_FI_INBOUND_DAILY_TOTALS].[amount] THEN 'BALANCED' ELSE 'UNBALANCED' END AS 'status',
[POS_REPORT].[dbo].[comments].[responce],
[POS_REPORT].[dbo].[comments].[comment]
FROM
[POS_REPORT].[dbo].[Txn_Daily_Totals]
LEFT JOIN
[POS_REPORT].[dbo].[SAP_FI_INBOUND_DAILY_TOTALS] ON
[POS_REPORT].[dbo].[Txn_Daily_Totals].[storeno] +
[POS_REPORT].[dbo].[Txn_Daily_Totals].[transactiondate] =
[POS_REPORT].[dbo].[SAP_FI_INBOUND_DAILY_TOTALS].[storeno] +
[POS_REPORT].[dbo].[SAP_FI_INBOUND_DAILY_TOTALS].[transactiondate]
LEFT JOIN
[POS_REPORT].[dbo].[comments] ON 
[POS_REPORT].[dbo].[Txn_Daily_Totals].[storeno] +
[POS_REPORT].[dbo].[Txn_Daily_Totals].[transactiondate] =
[POS_REPORT].[dbo].[comments].[storeno] +
[POS_REPORT].[dbo].[comments].[transactiondate]
WHERE
[POS_REPORT].[dbo].[Txn_Daily_Totals].[transactiondate]  = @fromdate AND
[POS_REPORT].[dbo].[Txn_Daily_Totals].[transactiondate] <= @todate AND
(@storeno IS NULL OR [POS_REPORT].[dbo].[Txn_Daily_Totals].[storeno] = @storeno)
ORDER BY
[POS_REPORT].[dbo].[Txn_Daily_Totals].[Description],
[POS_REPORT].[dbo].[Txn_Daily_Totals].[transactiondate]
END 
```

另一种可能产生更有利的执行计划的方法可能是：

```
CREATE PROCEDURE [dbo].[sp_ReportTotals] (
@fromdate VARCHAR(10),
@todate VARCHAR(10),
@storeno INT -- if you want all stores send NULL as @storeno parameter, if you want specific store send its storeno
)
AS
BEGIN
SELECT
[POS_REPORT].[dbo].[Txn_Daily_Totals].[storeno],
[POS_REPORT].[dbo].[Txn_Daily_Totals].[Description],
[POS_REPORT].[dbo].[Txn_Daily_Totals].[transactiondate],
[POS_REPORT].[dbo].[Txn_Daily_Totals].[amount] AS 'pos',
[POS_REPORT].[dbo].[SAP_FI_INBOUND_DAILY_TOTALS].[amount] AS 'ecc',
CASE WHEN [POS_REPORT].[dbo].[Txn_Daily_Totals].[amount] = [POS_REPORT].[dbo].[SAP_FI_INBOUND_DAILY_TOTALS].[amount] THEN 'BALANCED' ELSE 'UNBALANCED' END AS 'status',
[POS_REPORT].[dbo].[comments].[responce],
[POS_REPORT].[dbo].[comments].[comment]
INTO #temp
FROM
[POS_REPORT].[dbo].[Txn_Daily_Totals]
LEFT JOIN
[POS_REPORT].[dbo].[SAP_FI_INBOUND_DAILY_TOTALS] ON
[POS_REPORT].[dbo].[Txn_Daily_Totals].[storeno] +
[POS_REPORT].[dbo].[Txn_Daily_Totals].[transactiondate] =
[POS_REPORT].[dbo].[SAP_FI_INBOUND_DAILY_TOTALS].[storeno] +
[POS_REPORT].[dbo].[SAP_FI_INBOUND_DAILY_TOTALS].[transactiondate]
LEFT JOIN
[POS_REPORT].[dbo].[comments] ON 
[POS_REPORT].[dbo].[Txn_Daily_Totals].[storeno] +
[POS_REPORT].[dbo].[Txn_Daily_Totals].[transactiondate] =
[POS_REPORT].[dbo].[comments].[storeno] +
[POS_REPORT].[dbo].[comments].[transactiondate]
WHERE
[POS_REPORT].[dbo].[Txn_Daily_Totals].[transactiondate]  = @fromdate AND
[POS_REPORT].[dbo].[Txn_Daily_Totals].[transactiondate] <= @todate 
ORDER BY
[POS_REPORT].[dbo].[Txn_Daily_Totals].[Description],
[POS_REPORT].[dbo].[Txn_Daily_Totals].[transactiondate]

IF(@storeno IS NULL)
BEGIN
    SELECT  *
    FROM    #temp   
END
ELSE
BEGIN
    SELECT  *
    FROM    #temp
    WHERE   storeno = @storeno
END

END 
```

这种方法涉及两个 SELECT 语句和一个临时表，但它可能执行得更快（即可能有更好的执行计划）。在您的 SP 的生产版本中使用任何这些之前，请检查执行计划和查询成本指标，并确定哪种方法更适合您。

# javascript - 在 D3 中放大和缩小时如何更改平移和缩放的速度（使用 zoom.on 和 d3.event.translate，d3.event.zoom）？

> ID：13487020
> 
> 赞同：9
> 
> 时间：2012-11-21T05:38:30.183
> 
> 标签：javascript, zooming, d3.js

当用户使用鼠标滚轮滚入和滚出时，您可以调整缩放速度吗？

我的理解是 zoom.on ( [https://github.com/mbostock/d3/wiki/Zoom-Behavior#wiki-on](https://github.com/mbostock/d3/wiki/Zoom-Behavior#wiki-on) ) 监听器产生两个事件 d3.event.translate & d3.event.zoom，其中包含传递给 translate 或 scale 函数的矩阵或坐标，允许平移和重新缩放图形。

但是我如何加快速度，这样如果用户稍微移动鼠标滚轮，她就会快速放大或缩小？我有一个大型可视化，我想让用户使用鼠标滚轮快速放大和缩小。我可以简单地修改/添加上述现有事件和函数的参数，还是必须创建自己的？我觉得上面的一些内容在理解方面是不准确/不完整的，所以请解释一下。

这里非常简单的 jsfiddle 示例：http: [//jsfiddle.net/fiddler86/6jJe6/](http://jsfiddle.net/fiddler86/6jJe6/)，下面有相同的代码：

```
var svg = d3.select("body").append("svg:svg")
        .attr("width", 1000)
        .attr("height", 2000)      
        .append("svg:g")
            .call(d3.behavior.zoom().on("zoom", redraw))
        .append("svg:g");

svg.append("svg:rect")
.attr("width", 200)
.attr("height", 300)
.attr("fill", 'green');

function redraw() {
    svg.attr("transform", "translate(" + d3.event.translate + ")" + " scale(" + d3.event.scale + ")");
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-06-18T21:28:53.043

当您选择函数时，您需要使用数学函数调整函数内部的比例，重要的是对于 x=0 y=0，您可以使用 pow 更容易，在这种情况下 `Math.pow(d3.event.scale,.1)`，第二个参数在较小时会更慢地进行缩放。

使用非常复杂的函数不是一个好主意，因为浏览器会变慢。

当你有了新的比例时，你需要重新计算平移。你不会使问题复杂化，在 SVG 中你有实际的高度`this.getBBox().height`，但这并不完全是因为你落后了一个迭代。您可以使用计算新高度`(originalHeight * scale)`并使用平移`(originalHeight - (originalHeight * scale))/2`

*   那么 origialHeight*scale 是 newHeight

*   originalHeight - newHeight 是不同的，你想要中心，你需要除以2，正方形的一半和下面的一半。

*   现在我们需要对宽度进行操作。这是相同的

**编码：**

```
 var svg = d3.select("body").append("svg:svg")
                .attr("width", 1000)
                .attr("height", 2000)      
                .append("svg:g")
                    .call(d3.behavior.zoom().on("zoom", redraw))
                .append("svg:g");

    svg.append("svg:rect")
        .attr("width", 200)
        .attr("height", 300)
        .attr("fill", 'green');

    function redraw() {
        var velocity = 1/10;
        var scale =  Math.pow(d3.event.scale,velocity);
        var translateY = (300 - (300 * scale))/2;
        var translateX = (200 - (200 * scale))/2;

        svg.attr("transform", "translate(" + [translateX,translateY] + ")" + " scale(" +scale+ ")");            
    }; 
```

注意我把 200 和 300 硬编码了，可以使用属性，使用常量...

我创建了一个提琴手：http: [//jsfiddle.net/t0j5b3e2/](http://jsfiddle.net/t0j5b3e2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-23T02:10:35.210

我修改了 mbostock 的[drag+zoom 示例](http://bl.ocks.org/mbostock/6123708)，使其具有 4 倍的缩放速度，并将其放入[jsfiddle](https://jsfiddle.net/jweob/4z0s9Lsj/55/)中。我在下面解释了我的想法。这是我第一次尝试堆栈溢出答案，请善待。

正如 Raúl Martín 的回答中所解释的，您可以使用`redraw()`函数中的公式来更改缩放率。您需要做一些额外的步骤来确保 d3 行为在修改后的缩放率下仍然可以很好地工作。

**以选定点为中心缩放（例如光标）**
默认情况下，d3 行为将缩放聚焦在鼠标指针上，例如，如果您的鼠标指针位于图像的左上角，它会放大左上角而不是图像的中心. 为了获得这种效果，它缩放图像，然后改变图像的平移，使鼠标光标下的点保持在屏幕上的相同位置。这就是为什么`zoom.translate()`当您滚动鼠标滚轮时，即使图像看起来不像在屏幕上移动，值也会发生变化。

如果您更改缩放速度，则 d3`zoom.translate()`值不再正确。要计算出正确的翻译，您需要了解以下信息（忽略数值）：

```
var prev_translate = [100,100] // x, y translation of the image in last redraw
var prev_scale = 0.1           // Scale applied to the image last redraw
var new_scale = 0.4            // The new scale being applied
var zoom_cp = [150, 150]       // The zoom "center point" e.g. mouse pointer 
```

计算出`new_translate`应用于图像的公式是：

```
new_translate[0] = zoom_cp[0] - (zoom_cp[0] - prev_translate[0]) 
    * new_scale / prev_scale;
new_translate[1] = zoom_cp[1] - (zoom_cp[1] - prev_translate[1]) 
    * new_scale / prev_scale; 
```

您可以将其与新比例一起应用于图像：

```
svg.attr("transform", "translate(" + new_translate + ")scale(" + new_scale + ")"); 
```

然后，您必须更新`prev_scale = new_scale`并`prev_translate = new_translate`为下一次迭代做好准备`redraw()`

**平移不缩放**

d3 缩放行为允许您通过单击和拖动进行平移而不进行缩放。如果单击并拖动，则`zoom.scale()`保持不变但`zoom.translate()`会发生变化。`zoom.translate()`即使您修改了缩放速度，新值仍然正确。但是，您需要知道何时使用此`zoom.translate()`值以及何时使用计算的平移值来放大中心点。

您可以通过查看是否`prev_scale`与 相同来确定是平移还是缩放`new scale`。如果这两个值相同，您就知道正在发生平移，您可以使用它`new_translate = zoom.translate()`来移动图像。否则，您知道正在发生缩放，您可以按照`new_translate`上述方法计算该值。我通过向`zoomstart`事件添加一个函数来做到这一点。

```
var zoom_type = "?";
var scale_grad = 4; // Zoom speed multiple
var intercept = 1 * (1 - scale_grad)

var svg = d3.select("body").append("svg:svg")
            .attr("width", 1000)
            .attr("height", 2000)      
            .append("svg:g")
                .call(d3.behavior.zoom()
                      .on("zoom", redraw)
                      .on("zoomstart", zoomstarted))
            .append("svg:g");

function zoomstarted() {
    zoom_type = "?";
}

function redraw() {
    var scale = d3.event.scale;

    // Use a linear scale, don't let it go below the minimum scale
    // extent
    var new_scale = Math.max(scale_grad * scale + intercept, 
                        scale_extent[0]);

    // If hit the minimum scale extent then stop d3 zoom from 
    // going any further
    if (new_scale == scale_extent[0]) {
         zoom.scale((scale_extent[0] - intercept) / scale_grad);   
    }

    // Set up zoom_type if have just started
    // If the scale hasn't changed then a pure translation is
    // taking place, otherwise it is a scale
    if (zoom_type == "?") {
        if (new_scale == prev_scale) {
            zoom_type = "translate"
        } else {
            zoom_type = "scale"
        }
    }

    // zoom_cp is the static point during the zoom, set as 
    // mouse pointer position (you need to define a listener to track)
    var new_translate = [0, 0];
    zoom_cp = [mouse_x, mouse_y];

    // If the event is a translate just apply d3 translate
    // Otherwise calculate what translation is required to 
    // keep the zoom center point static
    if (zoom_type == "translate") {
        new_translate = d3.event.translate
    } else if (zoom_type == "scale") {
        new_translate[0] = zoom_cp[0]
             - (zoom_cp[0] - prev_translate[0]) * new_scale / prev_scale;
        new_translate[1] = zoom_cp[1] 
             - (zoom_cp[1] - prev_translate[1]) * new_scale / prev_scale;
}

        // Update the variables that track the last iteration of the 
        // zoom
        prev_translate = new_translate;
        prev_scale = new_scale;
        zoom.translate(new_translate);

        // Apply scale and translate behaviour
        svg.attr("transform", "translate(" + new_translate + 
             ")scale(" + new_scale + ")");
} 
```

# mysql - 找不到 mysql.sock 山狮

> ID：13487024
> 
> 赞同：0
> 
> 时间：2012-11-21T05:38:53.730
> 
> 标签：mysql, compiled, mysql.sock

我在 Snow Leopard OSX 上编译了 MySQL 5.5.27。哪个运行良好，并且 mysql.sock 在预期的位置创建。在 Lion OSX 上使用相同的二进制文件，它也可以在那里工作，并且 mysql.sock 也在所需的位置创建。

**但只有在 Mountain Lion 中，我无法**在所需位置找到 mysql.sock。mysqld（MySQL 服务器）工作正常，我可以创建数据库等。一切工作正常，只是找不到 mysql.sock。

```
my-pc:~ user$ /usr/local/mysql/bin/mysqld --verbose --help | grep mysql.sock
socket           /usr/local/mysql/tmp/mysql.sock 
```

注意：此输出适用于所有 OSX。

有什么帮助吗？提前致谢。
吉加尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T08:54:40.330

该文件已经存在，它是一个**套接字**文件。不知道为什么Finder不能显示。使用`ls -lha /usr/local/mysql/tmp`命令确认。

# java - 带有 MAC OS 的 java.awt.Robot 类中的无头环境错误

> ID：13487025
> 
> 赞同：10
> 
> 时间：2012-11-21T05:38:55.963
> 
> 标签：java, macos, javafx-2, headless, awtrobot

我正在尝试使用`Robot`类在我的 JavaFX 应用程序中捕获屏幕截图，

这是我在我的应用程序中使用的代码：

```
Rectangle screenBounds = new Rectangle(Screen.getPrimary().getBounds().getWidth(),
           Screen.getPrimary().getBounds().getHeight());

Robot robot = new Robot();

BufferedImage img = robot.createScreenCapture(new java.awt.Rectangle(
     (int) screenBounds.getX(), (int) screenBounds.getY(), (int) 
             screenBounds.getWidth(), (int) screenBounds.getHeight())); 
```

它在*windows 操作系统*`headless environment`中运行良好，但在*MAC OS*中显示错误`Robot robot = new Robot();`

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-26T06:03:29.150

这是在搜索了许多资源后回答我自己的问题。

我已使用以下代码禁用无头环境，问题已解决。

```
static {

        System.setProperty("java.awt.headless", "false");
} 
```

谢谢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T07:19:26.360

从他们的 API 我可以看到以下内容：

1.  如果工具包实现不支持显示器、键盘和鼠标，Applet 和所有重量级组件 (*) 的构造函数将更改为抛出*HeadlessException*
2.  如果工具包实现不支持显示器、键盘和鼠标，Robot 构造函数将引发*AWTException*
3.  Toolkit 和 GraphicsEnvironment 中的许多方法（字体、图像和打印除外）都更改为 在不支持显示器、键盘和鼠标时抛出*HeadlessException*
4.  其他可能因缺少显示、键盘或鼠标支持而受到影响的方法被更改为抛出*HeadlessException*
5.  值得注意的是，当且仅当 isHeadless 返回 true 时才会抛出*HeadlessException*，并且所有 javadoc 注释都应指定这一点

因此，您需要检查您的硬件及其驱动程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-04T07:38:23.757

您可以简单地`System.setProperty("java.awt.headless", "false");`在`Robot robot = new Robot();`.

# php - 充电 上一个变量

> ID：13487026
> 
> 赞同：0
> 
> 时间：2012-11-21T05:38:59.507
> 
> 标签：php, javascript, html

代码

```
<div id="dialog"><?php echo $txt; ?></div>
<body>
<div id="warper">
</div>
<footer>
<?php if ($_GET[y]==yes)
{
$txt='thankyou';
load dialog javascript;
}
</footer>
</body> 
```

但因为`$txt`是顶部`$txt='thankyou';`时对话框加载什么都没有显示。无论如何没有更改代码余额设置在 $txt ？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T05:43:53.570

您将不得不重新排序您的代码。如果条件失败，您也可能不想要一个空的 div。尝试：

```
<?php
    if ($_GET[y]=="yes") {
        echo '<div id="dialog">thank you</div>';
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T05:42:02.280

```
<?php if ($_GET[y]==yes)
{
$txt='thankyou';
load dialog javascript;
}
?>
<div id="dialog"><?php echo $txt; ?></div>
<body>
<div id="warper">
</div>
<footer>
</footer>
</body> 
```

# php - PHP没有权限在MAC中写入文件

> ID：13487031
> 
> 赞同：0
> 
> 时间：2012-11-21T05:39:10.920
> 
> 标签：php, macos, permission-denied, jpgraph

我正在使用 XAMPP(PHP APACHE MYSQL) 在 MAC 中开发程序。当我尝试使用 JPGRAPH 写入文件时，代码： `$fileName = "/img/bar.png"; $graph->img->Stream($fileName);` 我收到此警告：无法写入文件，请检查运行 PHP 的进程是否有足够的权限。我搜索了很多，并尝试了很多方法： 1.sudo chmod 777 ~/File/Java/img 2.更改 Apache httpd.conf 中的用户名（默认用户名是nobody） 3.mkdir($create_path, 0777)。我还是想不通。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T05:43:14.070

尝试删除 /img/bar.png 开头的 /

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:11:37.120

尝试

```
 $root = $_SERVER["DOCUMENT_ROOT"] . "/img";
   $fileName = "$root/bar.png"; 

```

希望这可以帮助。

# c++ - 为什么这个状态栏输出像中文一样乱码的字符？

> ID：13487034
> 
> 赞同：1
> 
> 时间：2012-11-21T05:39:25.277
> 
> 标签：c++, statusbar, win32gui

我制作状态栏的代码在这里：

```
int statwidths[] = {300, -1};
HWND hStatus;

hStatus = GetDlgItem(hWnd, IDC_MAIN_STATUS);
SendMessage(hStatus, WM_SIZE, 0, 0);

hStatus = CreateWindowEx(0, STATUSCLASSNAME, NULL,
WS_CHILD | WS_VISIBLE | SBARS_SIZEGRIP, 20, 20, 20, 5,
hWnd, (HMENU)IDC_MAIN_STATUS, GetModuleHandle(NULL), NULL);
SendMessage(hStatus, SB_SETPARTS, sizeof(statwidths)/sizeof(int), (LPARAM)statwidths);

//SendMessage(hStatus, SB_SETTEXT, 0, (LPARAM)"Loading things...");
SetWindowText(hStatus, (LPCWSTR)"sdgsdfgd"); 
```

设置状态栏文本的任何一种底部方法都只会给出乱码的中文字符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T05:43:56.580

以下行有问题

```
SetWindowText(hStatus, (LPCWSTR)"sdgsdfgd"); 
```

它应该是

```
SetWindowTextW(hStatus, L"sdgsdfgd"); 
```

此外，所有这些都取决于窗口是 UNICODE 还是 ANSI。

# asp.net-mvc-4 - 如何列出按类别分组的项目？

> ID：13487039
> 
> 赞同：3
> 
> 时间：2012-11-21T05:39:55.140
> 
> 标签：asp.net-mvc-4

我正在尝试学习 MVC 并找到一些障碍。

我试图找到一种可维护的方式来呈现按类别标题划分的项目列表。例如：

> ### 进入
> 
> 汤
> 面包
> 
> ### 主要的
> 
> 鸡肉
> 牛肉
> 素食
> 
> ### 沙漠
> 
> 蛋糕
> 冰淇淋

类别和项目是单独的模型，项目模型保存类别的 ID。

我想将这些页面提供给熟悉 HTML 但不熟悉 ASP 的人。出于这个原因，我想尽量减少嵌入在页面中的代码。这是迄今为止我最好的，但我不满意必须使用和检查每个项目的变量。

```
@{string categoryName = null;}
@foreach (var item in Model) {
    if (item.CategoryName != categoryName)
    {
        categoryName = item.CategoryName;
    <tr>
        <td colspan="5">@Html.DisplayFor(modelItem => categoryName)</td>
    </tr>
    }
    <tr><!-- Display item here --></tr>
} 
```

有没有一种嵌套页面的方法，这样我就可以创建一个遍历每个类别的父页面并调用一个遍历该类别中项目的子页面？例如，类似：

```
@foreach (var item in Model) {
    <tr>
        <td colspan="5">@Html.DisplayFor(modelItem => item.Name)</td>
    </tr>
    @RenderChildren(item.Children);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T05:47:08.550

我建议返回一个视图模型，该模型使用以下方式预先分组了项目`GroupBy`：

```
return View(TheModel.GroupBy(item => item.Category).ToArray()); 
```

此视图可以遍历组，显示每个 ( `Key`) 的标题并将项目集合发送到部分视图：

```
@model IEnumerable<IGrouping<string, MyModel>> 

@foreach (var grp in Model)
{
    <tr>
        <th colspan="5">@grp.Key</th>
    </tr>

    @Html.Partial("Meals", grp.ToArray())
} 
```

然后，单独的局部视图“Meals.cshtml”接受`IEnumerable`您的模型类型作为其模型。

```
@model IEnumerable<MyModel>

@foreach (var item in Model)
{
    <tr>
        <td>@Model.Name</td>
    </tr>
} 
```

# iphone - iPhone 应用程序在 [NSString stringWithFormat] 处崩溃

> ID：13487042
> 
> 赞同：1
> 
> 时间：2012-11-21T05:40:29.817
> 
> 标签：iphone, ios, crash

嗨，我收到了 fowling 错误，任何人都可以帮助他解决问题。当我将查询发送到服务器时，应用程序在将查询发送到服务器之前崩溃。

```
> " (lldb) bt
> * thread #1: tid = 0x2503, 0x38a4f5d0 libobjc.A.dylib`objc_msgSend + 16, stop reason = EXC_BAD_ACCESS (code=1, address=0x70706118)
>     frame #0: 0x38a4f5d0 libobjc.A.dylib`objc_msgSend + 16
>     frame #1: 0x323169f0 Foundation`_NSDescriptionWithLocaleFunc + 52
>     frame #2: 0x399dc430 CoreFoundation`__CFStringAppendFormatCore + 11160
>     frame #3: 0x399538a2 CoreFoundation`_CFStringCreateWithFormatAndArgumentsAux + 74
>     frame #4: 0x3231650c Foundation`+[NSString stringWithFormat:] + 60
>     frame #5: 0x0012a92c App`-[merchantListViewController getMerchantsData] + 1344 at merchantListViewController.m:754
>     frame #6: 0x00127a3e App`-[merchantListViewController loadMoreButtonClicked:] + 194 at merchantListViewController.m:353
>     frame #7: 0x0012b0e4 App`-[merchantListViewController tableView:willDisplayCell:forRowAtIndexPath:] + 228 at
> merchantListViewController.m:903
>     frame #8: 0x332565aa UIKit`-[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:withIndexPath:] + 514
>     frame #9: 0x3323b360 UIKit`-[UITableView(_UITableViewPrivate) _updateVisibleCellsNow:] + 1316
>     frame #10: 0x332527fe UIKit`-[UITableView layoutSubviews] + 206
>     frame #11: 0x3320e896 UIKit`-[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 258
>     frame #12: 0x392cc4ea QuartzCore`-[CALayer layoutSublayers] + 214
>     frame #13: 0x392cc08c QuartzCore`CA::Layer::layout_if_needed(CA::Transaction*) + 460
>     frame #14: 0x392ccfb0 QuartzCore`CA::Layer::layout_and_display_if_needed(CA::Transaction*) +
> 16
>     frame #15: 0x392cc99a QuartzCore`CA::Context::commit_transaction(CA::Transaction*) + 238
>     frame #16: 0x392cc7ac QuartzCore`CA::Transaction::commit() + 316
>     frame #17: 0x392cc610 QuartzCore`CA::Transaction::observer_callback(__CFRunLoopObserver*,
> unsigned long, void*) + 60
>     frame #18: 0x399d0940 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__
> + 20
>     frame #19: 0x399cec38 CoreFoundation`__CFRunLoopDoObservers + 276
>     frame #20: 0x399cef92 CoreFoundation`__CFRunLoopRun + 746
>     frame #21: 0x3994223c CoreFoundation`CFRunLoopRunSpecific + 356
>     frame #22: 0x399420c8 CoreFoundation`CFRunLoopRunInMode + 104
>     frame #23: 0x39a9e33a GraphicsServices`GSEventRunModal + 74
>     frame #24: 0x3325f290 UIKit`UIApplicationMain + 1120
>     frame #25: 0x000dd2d8 App`main + 152 at main.m:15 " 
```

这是 json 发布请求的代码

```
sessionId =[[NSUserDefaults standardUserDefaults] objectForKey:@"session_id"];
        shouldReloadData=NO;
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(getMerchantsListData:) name:@"getMerchantsListData" object:nil];
        NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                                latitude,@"latitude",
                                longitude,@"longitude",
                                //[NSString stringWithFormat:@"%d",categoryID],@"category_id",
                                [NSString stringWithFormat:@"%d",sortOrderID],@"sort_order",
                                @"5",@"page_size",
                                [NSString stringWithFormat:@"%@",searchMerchant.text],@"search_keyword",
                                [NSString stringWithFormat:@"%d",pageNumber],@"page_number",
                                sessionId,@"session_id",
                                nil];
        //searchKeyword=@"";
        NSLog(@"params %@",params);

        [[UFNetworking dataSourceInstance] getData:params toAPI:kGetMerchantList cache:NO secure:NO notification:@"getMerchantsListData"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:09:13.820

首先在字符串变量中获取所有值，然后像下面这样传递给字典..

```
 NSString *sort_order = [NSString stringWithFormat:@"%d",sortOrderID];
   NSString *search_keyword = [NSString stringWithFormat:@"%@",searchMerchant.text];
   NSString *page_number = [NSString stringWithFormat:@"%d",pageNumber];

   NSLog(@"\n\n Sort Order ==> %@, Search_keyWord ==> %@,Page_Number ==> %@",sort_order,search_keyword,page_number); /// check here what you get from the code..

   NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                                latitude,@"latitude",
                                longitude,@"longitude",
                                //[NSString stringWithFormat:@"%d",categoryID],@"category_id",
                                sort_order,@"sort_order",
                                @"5",@"page_size",
                                search_keyword,@"search_keyword",
                                page_number,@"page_number",
                                sessionId,@"session_id",
                                nil]; 
```

我希望这个答案对你有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:07:52.627

我敢打赌你有一个无效的格式化程序。确保你没有`%@`在一个`int`或类似的东西上使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-24T04:48:41.403

就我而言，我使用`%`的是印度尼西亚语，所以我必须添加`%%`本地化字符串，希望它可以帮助！

# jquery - 如何通过jquery将巨大的html数据添加到html页面中的div

> ID：13487043
> 
> 赞同：0
> 
> 时间：2012-11-21T05:40:34.897
> 
> 标签：jquery, html

我有以下 html 标记。我想通过 jquery 将此标记添加到母版页（或任何其他 html 页面）。我不想在那个 html 页面的正文中包含这个 html，因为我不想触摸我的母版页。我只想在母版页中添加一个 div，并希望将以下标记附加到该 div。我想通过 jquery 附加这个 html。怎么做？

```
 <div id="mymenuDiv">
    <ul id="nav">
        <li class="top"><a href="#nogo1" class="top_link"><span>Home</span></a></li>
        <li class="top"><a href="#nogo2" id="products" class="top_link"><span class="down">Products</span></a>
            <ul class="sub">
                <li><a href="#nogo3" class="fly">Cameras</a>
                        <ul>
                            <li><a href="#nogo4">Nikon</a></li>
                            <li><a href="#nogo5">Minolta</a></li>
                            <li><a href="#nogo6">Pentax</a></li>
                        </ul>
                </li>
                <li class="mid"><a href="#nogo7" class="fly">Lenses</a>
                        <ul>
                            <li><a href="#nogo8">Wide Angle</a></li>
                            <li><a href="#nogo9">Standard</a></li>
                            <li><a href="#nogo10">Telephoto</a></li>
                            <li><a href="#nogo11" class="fly">Zoom</a>
                            </li>
                            <li><a href="#nogo15">Mirror</a></li>
                        </ul>
                </li>
                <li><a href="#nogo19">Flash Guns</a></li>
                <li><a href="#nogo20">Tripods</a></li>
                <li><a href="#nogo21">Filters</a></li>
            </ul>
        </li>
    </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T05:44:16.167

```
$('body').append("<div id=\"mymenuDiv\">\r\n    <ul id=\"nav\">\r\n        <li class=\"top\"><a href=\"#nogo1\" class=\"top_link\"><span>Home<\/span><\/a><\/li>\r\n        <li class=\"top\"><a href=\"#nogo2\" id=\"products\" class=\"top_link\"><span class=\"down\">Products<\/span><\/a>\r\n            <ul class=\"sub\">\r\n                <li><a href=\"#nogo3\" class=\"fly\">Cameras<\/a>\r\n                        <ul>\r\n                            <li><a href=\"#nogo4\">Nikon<\/a><\/li>\r\n                            <li><a href=\"#nogo5\">Minolta<\/a><\/li>\r\n                            <li><a href=\"#nogo6\">Pentax<\/a><\/li>\r\n                        <\/ul>\r\n                <\/li>\r\n                <li class=\"mid\"><a href=\"#nogo7\" class=\"fly\">Lenses<\/a>\r\n                        <ul>\r\n                            <li><a href=\"#nogo8\">Wide Angle<\/a><\/li>\r\n                            <li><a href=\"#nogo9\">Standard<\/a><\/li>\r\n                            <li><a href=\"#nogo10\">Telephoto<\/a><\/li>\r\n                            <li><a href=\"#nogo11\" class=\"fly\">Zoom<\/a>\r\n                            <\/li>\r\n                            <li><a href=\"#nogo15\">Mirror<\/a><\/li>\r\n                        <\/ul>\r\n                <\/li>\r\n                <li><a href=\"#nogo19\">Flash Guns<\/a><\/li>\r\n                <li><a href=\"#nogo20\">Tripods<\/a><\/li>\r\n                <li><a href=\"#nogo21\">Filters<\/a><\/li>\r\n            <\/ul>\r\n        <\/li>\r\n    <\/ul>\r\n    <\/div>") 
```

更好的是，将其粘贴在 HTML 文件中并执行以下操作：

```
$('body').load('myhtml.html'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T05:46:18.550

尝试这样的事情

```
 $(function() {
   $(#master page div id).append($(#id of div from which you have to append));
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T05:44:33.577

最简单的方法：

```
$('#myMenuDiv').html('<ul id="nav"><li class="top"><a href="#nogo1" class="top_link"><span>Home</span></a></li><li class="top"><a href="#nogo2" id="products" class="top_link"><span class="down">Products</span></a><ul class="sub"><li><a href="#nogo3" class="fly">Cameras</a><ul><li><a href="#nogo4">Nikon</a></li><li><a href="#nogo5">Minolta</a></li><li><a href="#nogo6">Pentax</a></li></ul></li><li class="mid"><a href="#nogo7" class="fly">Lenses</a><ul><li><a href="#nogo8">Wide Angle</a></li><li><a href="#nogo9">Standard</a></li><li><a href="#nogo10">Telephoto</a></li><li><a href="#nogo11" class="fly">Zoom</a></li><li><a href="#nogo15">Mirror</a></li></ul></li><li><a href="#nogo19">Flash Guns</a></li><li><a href="#nogo20">Tripods</a></li><li><a href="#nogo21">Filters</a></li></ul></li></ul>'); 
```

它很丑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T07:08:01.127

[`$.ajax()`](http://api.jquery.com/jQuery.ajax/)您可以为此使用 jQuery ，如下所示：

```
$.ajax({
    url: 'ajax/test.html',
    success: function(data) {
      $('#mydiv').html(data);
    }
}); 
```

为了使这更简单，有[`$(selector).load()`](http://api.jquery.com/load/)这样的：

```
$('#mydiv').load('ajax/test.html') 
```

`id`您可以通过从 ajax 页面中指定`div`标记来更进一步。如果 ajax 页面是一个完整的 html 页面并且您不想在调用页面的正文中注入`html`, `head`, et al 标记，这将有所帮助。你可以这样做：

```
$('#mydiv').load('ajax/test.html #div_tag_to_load') 
```

# android - 如何使用eclipse运行android应用程序

> ID：13487045
> 
> 赞同：0
> 
> 时间：2012-11-21T05:40:51.323
> 
> 标签：android

我将操作系统用作 Windows 7。我想在其中通过 Eclipse 运行我的 Android 应用程序。所以我通过 USB 连接器将我的 android 设备连接到我的笔记本电脑。在我的设备中显示为“ USB connected ”，但是当我单击运行配置以选择设备时，设备 ID 从未显示/显示。我在 CMD 提示模式下尝试过，通过 Killing 并启动 ADB 服务器，但它从未奏效。谁能提供解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:23:53.890

首先确保启用了 USB 调试。为此，请转到您的手机并找到“开发人员选项”，对我来说它是设置->系统->开发人员选项。如果之后设备没有出现在 Eclipse 中，请确保 ADB 正在运行，并且它可以识别您的设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T05:54:37.143

如果使用“adb list”之类的命令时列表中没有出现设备，则可能是设备驱动程序存在问题。但是，如果您认为设备驱动程序已安装.. 只需尝试重新启动设备..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T06:17:58.210

在手机设置中启用 USB 调试：应用程序 -> 开发 -> USB 调试。

# delphi - delphi如何导入接口？

> ID：13487056
> 
> 赞同：2
> 
> 时间：2012-11-21T05:41:39.887
> 
> 标签：delphi, interface

我想从 windows 库中获取文件夹路径（例如： Libraries\Documents ）。我发现它需要使用[IShellLibrary 接口](http://msdn.microsoft.com/en-us//library/windows/desktop/dd391719%28v=vs.85%29.aspx)`ShlObj`，但在(Delphi 2009 x64 win7)中找不到声明。我想知道如何将此接口导入我的代码？ ![在此处输入图像描述](../Images/7f21d3f5934a44a8f31141a31b0985a0.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T07:57:20.450

如果您不能使用包含此接口的现代 Delphi，则需要从 Windows 头文件中翻译该接口，在这种情况下为`Shobjidl.h`. 在 Delphi 中，它是这样开始的：

```
IShellLibrary = interface(IUnknown) 
  ['{11A66EFA-382E-451A-9234-1E0E12EF3085}']
  ....
end; 
```

GUID 可以在头文件中找到。然后，您需要添加功能。必须按照在头文件中声明的顺序添加它们。这些函数都应该声明为`stdcall`.

我不想从 XE3 源发布整个接口声明，因为我认为这是侵犯版权。

也许如果您搜索得足够努力，您可能会在网络上的某个地方找到此代码。事实上，我刚刚找到它： http: [//mustangpeakcommonlib.googlecode.com/svn-history/r12/trunk/Source/MPShellTypes.pas](http://mustangpeakcommonlib.googlecode.com/svn-history/r12/trunk/Source/MPShellTypes.pas)

# javascript - 如何使用正则表达式匹配带空格和不带空格的字符串？

> ID：13487060
> 
> 赞同：2
> 
> 时间：2012-11-21T05:41:58.703
> 
> 标签：javascript, regex

我有一个正则表达式，它匹配精确的单词，如果中间有空格，它返回 false。我怎样才能做到这一点？即使我之间有空格，它也必须返回 true。前任：

```
var str1 = "This is a fruit";
var str2 = "this is afruit";

str2 = str2.toLowerCase();

if(str2.toLowerCase().match(/a fruit/)){
  alert("matched");
  return true;
} 
return false; 
```

在上面的 if 条件中，我提到了 .match(/a fruit/) 它会返回 false，因为我也在考虑空间。我不想这样做。即使它是“水果”或“水果”，它也必须让我回归真实。我是正则表达式的新手请帮助..我被困在这里。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T05:45:11.580

```
/a ?fruit/ 
```

或者，更漂亮，

```
/a\s?fruit/ 
```

`?`表示前一个字符是可选的。`\s`是任何一种空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T05:46:01.220

根据[Javascript 正则表达式参考](http://www.regextester.com/jssyntax.html)：

```
str2 = str2.toLowerCase();
does_it_match = str2.match(/[a-z ]+/);
if (does_it_match) { return true; }
return false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T05:48:07.717

```
var str1 = "This is a fruit";
var str2 = "this is afruit";

str1 = str1.replace(/\s/g, '');
str2 = str2.replace(/\s/g, ''); 
```

这将从字符串中删除空格。然后将两者都转换为小写并按原样进行比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T05:54:53.840

使用下面的例子

```
var str1 = "This is a fruit";
var str2 = "this is afruit";

str2 = str2.toLowerCase();
var matchString = 'a fruit';
matchString = matchString.replace(/\s+/g,'');
if(str2.toLowerCase().match(matchString)){
  alert("matched");
  return true;
} 
return false; 
```

# javascript - 使用 jquery 或 javascript 检查浏览器中的所有选项卡的鼠标事件和键盘事件

> ID：13487065
> 
> 赞同：0
> 
> 时间：2012-11-21T05:42:23.930
> 
> 标签：javascript, jquery, jquery-plugins

我想检查所有选项卡中的鼠标事件或键盘事件，以查看在浏览器中的多个选项卡中打开的 URL。意味着我在站点中登录并打开其他选项卡，但在其他选项卡中我想检查鼠标事件是否触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:55:36.830

```
 onkeypress 
```

这可用于捕获按键

```
 onclick     
    onmouseup.
    onmousedown     
    ondblclick 
```

这些可用于捕获 mose 事件

# mysql - MySQL 集群 - [ [ndbd] 错误 - 无法作为守护进程启动，错误：'无法打开日志文件]

> ID：13487066
> 
> 赞同：1
> 
> 时间：2012-11-21T05:42:29.923
> 
> 标签：mysql, cluster-computing, ubuntu-10.04

最近想搭建mysql集群，1个Mgmt节点，1个sql节点，2个data节点，貌似安装成功，Mgmt节点启动了，但是当我尝试启动data节点的时候，遇到了问题...

这是我尝试启动数据节点时的错误消息：

![来自我的数据节点的错误消息](../Images/a09b4fdde8e55a1b7cb9b275d643e88c.png)

有谁知道出了什么问题？[基本上我按照本网站](http://napmas.blogspot.tw/2011/07/mysql-cluster.html)和[本网站](http://dev.mysql.com/doc/refman/5.1/en/mysql-cluster.html)上的分步教程进行操作

如果您能给我一些建议，将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:14:03.747

好的，我想出了解决此问题的解决方案：`013-01-18 09:26:10 [ndbd] ERROR -- Couldn't start as daemon, error: 'Failed to open logfile`

我遇到了同样的问题，在探索之后我打开了`$MY_CLUSTER_INSTALLATION/ndb_data/ndb_1_cluster.log`

1.我在日志中发现以下消息：

```
2013-01-18 09:24:50 [MgmtSrvr] INFO     -- Got initial configuration 
from 'conf/config.ini',
will try to set it when all ndb_mgmd(s) started
2013-01-18 09:24:50 [MgmtSrvr] INFO     -- Node 1: Node 1 Connected
2013-01-18 09:24:54 [MgmtSrvr] ERROR    -- Unable to bind management 
service port: *:1186!
Please check if the port is already used,
(perhaps a ndb_mgmd is already running),
and if you are executing on the correct computer
2013-01-18 09:24:54 [MgmtSrvr] ERROR    -- Failed to start mangement service! 
```

2.我使用以下命令检查了我的 Mac 机器上端口上运行的服务：

```
lsof -i :1186 
```

果然，我找到了 ndb_mgmd(s)：

```
COMMAND  PID          USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME
ndb_mgmd 418     8u  IPv4 0x33a882b4d23b342d      0t0  TCP *:mysql-cluster (LISTEN)
ndb_mgmd 418     9u  IPv4 0x33a882b4d147fe85      0t0  TCP localhost:50218->localhost:mysql-cluster (ESTABLISHED)
ndb_mgmd 418    10u  IPv4 0x33a882b4d26901a5      0t0  TCP localhost:mysql-cluster->localhost:50218 (ESTABLISHED) 
```

3.要杀死特定端口上的进程（对我来说：1186）我运行了以下命令：

```
sof -P | grep '1186' | awk '{print $2}' | xargs kill -9 
```

4.我再次重复了mySql Cluster安装pdf中列出的步骤：

```
$PATH/mysqlc/bin/ndb_mgmd -f conf/config.ini --initial --configdir=/$PATH/my_cluster/conf/
$PATH/mysqlc/bin/ndbd -c localhost:1186 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-28T06:20:23.007

希望这会有用
在我的情况下，已经连接了两个数据节点

您可以在管理节点中查看

```
[root@ab0]# ndb_mgm  
-- NDB Cluster -- Management Client --  
ndb_mgm> show 
```

我所做的是

```
ndb_mgm> shutdown 
```

然后执行重启命令。这个对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T16:28:41.410

检查 datadir 是否存在并且可在 datanode1 上使用“ls -ld /home/netdb/mysql_cluster/data”写入。

# javascript - 为什么调用这个返回的函数而不对其值进行任何操作？

> ID：13487069
> 
> 赞同：0
> 
> 时间：2012-11-21T05:42:33.337
> 
> 标签：javascript, function

看下面的代码：

```
function doNotCallMe(){
    alert("Otherwise the world will be destroyed!");
}

function getNotCallable(){
    return new function() {
        alert("Attention!");
        doNotCallMe(); 
    };  
}

var not_callable = getNotCallable(); 
```

浏览器显示不应该的警报。为什么？怎么修？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T05:46:46.567

```
return function() { ... } 
```

是你想要的。

与 operator 一起使用时，JavaScript 中的所有函数都将充当对象构造函数`new`；所以你定义了一个匿名函数，然后通过`new`.

# java - Hibernate 复合主键

> ID：13487070
> 
> 赞同：2
> 
> 时间：2012-11-21T05:42:36.757
> 
> 标签：java, hibernate, composite-primary-key

我在使用具有复合主键的休眠实体集时遇到问题。

我们的应用程序中有一个概念“目标”。目标 id 应该是其他三个表（实体）主 id 的组合。Target 也有一个 int 标记。员工应该有一个目标集合。SQL 如下所示：

```
CREATE TABLE IF NOT EXISTS `target` (
  `role_id` bigint(20) NOT NULL,
  `ApplicationPeriod_id` bigint(20) NOT NULL,
  `project_class_id` bigint(20) NOT NULL,
  `target` int(11) NOT NULL,
  PRIMARY KEY (`role_id`,`ApplicationPeriod_id`,`project_class_id`),
  KEY `fk_role_id` (`role_id`),
  KEY `fk_ApplicationPeriod_id` (`ApplicationPeriod_id`),
  KEY `fk_project_class_id` (`project_class_id`),
  KEY `FKCB7E71918717386C` (`project_class_id`),
  KEY `FKCB7E7191BEC322C1` (`ApplicationPeriod_id`),
  KEY `FKCB7E71917B617197` (`role_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

此 SQL 工作正常，只要 applicationperiodid 和 projectclassid 不同，它就允许我为每个 role_id (Employee) 设置多个目标。

这是 targetID 类

```
@Embeddable
public class TargetId implements Serializable {

    @ManyToOne
    private Employee employee;

    @ManyToOne
    private ApplicationPeriod applicationPeriod;

    @ManyToOne
    private ProjectClass projectClass;

    public Employee getEmployee() {
        return employee;
    }

    public void setEmployee(Employee employee) {
        this.employee = employee;
    }

    public ApplicationPeriod getApplicationPeriod() {
        return applicationPeriod;
    }

    public void setApplicationPeriod(ApplicationPeriod applicationPeriod) {
        this.applicationPeriod = applicationPeriod;
    }

    public ProjectClass getProjectClass() {
        return projectClass;
    }

    public void setProjectClass(ProjectClass projectClass) {
        this.projectClass = projectClass;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (!(o instanceof TargetId)) return false;

        TargetId that = (TargetId) o;

        if (applicationPeriod != null ? !applicationPeriod.equals(that.applicationPeriod) : that.applicationPeriod != null)
            return false;
        if (employee != null ? !employee.equals(that.employee) : that.employee != null) return false;
        if (projectClass != null ? !projectClass.equals(that.projectClass) : that.projectClass != null) return false;

        return true;
    }

    @Override
    public int hashCode() {
        int result = employee != null ? employee.hashCode() : 0;
        result = 31 * result + (applicationPeriod != null ? applicationPeriod.hashCode() : 0);
        result = 31 * result + (projectClass != null ? projectClass.hashCode() : 0);
        return result;
    }
} 
```

这是目标类

```
@Entity
@Table(name = "target")
@AssociationOverrides({
        @AssociationOverride(name = "targetId.employee",
            joinColumns = @JoinColumn(name = "role_id")),
        @AssociationOverride(name = "targetId.applicationPeriod",
            joinColumns = @JoinColumn(name = "ApplicationPeriod_id")),
        @AssociationOverride(name = "targetId.projectClass",
                joinColumns = @JoinColumn(name = "project_class_id"))
})
public class Target implements Serializable {

    @EmbeddedId
    private TargetId targetId;

    private int target;

    public TargetId getTargetId() {
        return targetId;
    }

    public void setTargetId(TargetId targetId) {
        this.targetId = targetId;
    }

    public int getTarget() {
        return target;
    }

    public void setTarget(int target) {
        this.target = target;
    }

    public Target() {
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (!(o instanceof Target)) return false;

        Target target = (Target) o;

        if (this.target != target.target) return false;
        if (targetId != null ? !targetId.equals(target.targetId) : target.targetId != null)
            return false;

        return true;
    }

    @Override
    public int hashCode() {
        int result = targetId != null ? targetId.hashCode() : 0;
        result = 31 * result + target;
        return result;
    }
} 
```

这是员工类，我想在其中为每个员工存储一组目标。

```
@Entity
@Cacheable(true)
@Cache(usage= CacheConcurrencyStrategy.NONSTRICT_READ_WRITE) //Hibernate specific
public class Employee {

    ...

    @OneToMany(fetch = FetchType.LAZY, mappedBy = "targetId.employee", cascade=CascadeType.ALL, orphanRemoval=true)
    private Set<Target> targets = new HashSet<Target>();

    public Set<Target> getTargets() {
        return targets;
    }

    public void setTargets(Set<Target> targets) {
        this.targets = targets;
    }

    ...

} 
```

通过 hibernate 创建和存储目标可以正常工作，并且数据库中的所有内容看起来都不错。问题是，即使数据库允许每个员工存储多个目标，只要 applicationperiod 和 projectclass 不同，Hibernate 也不会为每个员工存储多个 target，无论 applicationperiod 和 projectclass 是否不同。我究竟做错了什么？如何让 Hibernate 让我为每位员工存储多个目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T02:27:55.607

好的，我想通了。问题似乎在于 TargetID 类不能使用 Entity 属性，而是应该使用 Longs 来指向相关实体的 id。然后，您可以使用 SQL 在数据库中的列之间设置正确的约束和连接。

SQL：

```
CREATE TABLE IF NOT EXISTS `target` (
  `applicationPeriodId` bigint(20) NOT NULL,
  `employeeId` bigint(20) NOT NULL,
  `projectClassId` bigint(20) NOT NULL,
  `target` int(11) NOT NULL,
  PRIMARY KEY (`applicationPeriodId`,`employeeId`,`projectClassId`),
  KEY `FKCB7E71913353DC5C` (`employeeId`),
  KEY `FKCB7E7191A520201E` (`projectClassId`),
  KEY `FKCB7E7191790761A4` (`applicationPeriodId`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Constraints for table `target`
--
ALTER TABLE `target`
  ADD CONSTRAINT `FKCB7E7191790761A4` FOREIGN KEY (`applicationPeriodId`) REFERENCES `ApplicationPeriod` (`id`),
  ADD CONSTRAINT `FKCB7E71913353DC5C` FOREIGN KEY (`employeeId`) REFERENCES `role` (`id`),
  ADD CONSTRAINT `FKCB7E7191A520201E` FOREIGN KEY (`projectClassId`) REFERENCES `project_class` (`id`); 
```

复合 ID 类：

```
@Embeddable
public class TargetId implements Serializable {

    @Basic
    private Long employeeId;

    @Basic
    private Long applicationPeriodId;

    @Basic
    private Long projectClassId;

    public Long getEmployeeId() {
        return employeeId;
    }

    public void setEmployeeId(Long employeeId) {
        this.employeeId = employeeId;
    }

    public Long getApplicationPeriodId() {
        return applicationPeriodId;
    }

    public void setApplicationPeriodId(Long applicationPeriodId) {
        this.applicationPeriodId = applicationPeriodId;
    }

    public Long getProjectClassId() {
        return projectClassId;
    }

    public void setProjectClassId(Long projectClassId) {
        this.projectClassId = projectClassId;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (!(o instanceof TargetId)) return false;

        TargetId targetId = (TargetId) o;

        if (applicationPeriodId != null ? !applicationPeriodId.equals(targetId.applicationPeriodId) : targetId.applicationPeriodId != null)
            return false;
        if (employeeId != null ? !employeeId.equals(targetId.employeeId) : targetId.employeeId != null) return false;
        if (projectClassId != null ? !projectClassId.equals(targetId.projectClassId) : targetId.projectClassId != null)
            return false;

        return true;
    }

    @Override
    public int hashCode() {
        int result = employeeId != null ? employeeId.hashCode() : 0;
        result = 31 * result + (applicationPeriodId != null ? applicationPeriodId.hashCode() : 0);
        result = 31 * result + (projectClassId != null ? projectClassId.hashCode() : 0);
        return result;
    }
} 
```

目标实体：

```
@Entity
@Table(name = "target")
@AssociationOverrides({
        @AssociationOverride(name = "targetId.employeeId",
            joinColumns = @JoinColumn(name = "role_id")),
        @AssociationOverride(name = "targetId.applicationPeriodId",
            joinColumns = @JoinColumn(name = "ApplicationPeriod_id")),
        @AssociationOverride(name = "targetId.projectClassId",
                joinColumns = @JoinColumn(name = "project_class_id"))
})
public class Target implements Serializable {

    @EmbeddedId
    private TargetId targetId;

    private int target;

    public TargetId getTargetId() {
        return targetId;
    }

    public void setTargetId(TargetId targetId) {
        this.targetId = targetId;
    }

    public int getTarget() {
        return target;
    }

    public void setTarget(int target) {
        this.target = target;
    }

    public Target() {
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (!(o instanceof Target)) return false;

        Target target = (Target) o;

        if (this.target != target.target) return false;
        if (targetId != null ? !targetId.equals(target.targetId) : target.targetId != null)
            return false;

        return true;
    }

    @Override
    public int hashCode() {
        int result = targetId != null ? targetId.hashCode() : 0;
        result = 31 * result + target;
        return result;
    }
} 
```

Employee 实体，其中包含一组目标：

```
@Entity
@Cacheable(true)
@Cache(usage= CacheConcurrencyStrategy.NONSTRICT_READ_WRITE) //Hibernate specific
public class Employee extends ProjectTeamMember {
    ...
    public Set<Language> getLanguages() {
        return languages;
    }

    public void setLanguages(Set<Language> languages) {
        this.languages = languages;
    }

    @OneToMany(fetch = FetchType.LAZY, mappedBy = "targetId.employeeId", cascade=CascadeType.ALL, orphanRemoval=true)
    private Set<Target> targets = new HashSet<Target>();

    public Set<Target> getTargets() {
        return targets;
    }

    public void setTargets(Set<Target> targets) {
        this.targets = targets;
    }    
    ...
} 
```

# c++ - Linux 有没有办法使用 C/C++ 永久设置 IP 地址？

> ID：13487071
> 
> 赞同：0
> 
> 时间：2012-11-21T05:42:39.870
> 
> 标签：c++, c, linux, qt

我引用了许多链接来使用 C/C++ 更改 IP 地址。但我发现它只是临时更改设置（直到下一次重新启动）并且一旦系统重新启动，所有设置都消失了。

我参考了下面的链接来实现它。

[Qt：设置IP](https://stackoverflow.com/questions/9619652/qt-setting-the-ip)

[使用 SIOCSIFADDR ioctl 设置 IP 地址](https://stackoverflow.com/questions/5308090/set-ip-address-using-siocsifaddr-ioctl)

等等，但以临时设置结束（一直到下一次重新启动）

有没有办法通过 C/C++ 永久更改设置？？？？

请指引我走向正确的道路。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T05:57:41.697

在启动时，Linux 使用一些配置文件为接口分配 IP 地址。每个发行版都有自己的文件专用于此目的。您应该查阅您的发行版 Wiki，了解如何在启动时设置 IP 地址。

一般来说，这是一项管理任务（即不应通过某些自定义程序动态配置），但如果您真的想在您的 C/C++ 程序中执行此操作，那么您应该解析网络配置文件并在那里放置您想要的地址在启动时分配。

# c++ - 创建列表/节点类程序的模板版本时遇到问题

> ID：13487072
> 
> 赞同：-1
> 
> 时间：2012-11-21T05:42:47.763
> 
> 标签：c++, templates, compiler-errors, linked-list

> **可能重复：**
> [为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

我正在尝试使用一个在链表上创建和执行操作的程序。

该程序按原样工作和编译，但我必须创建一个可以处理任何类型数据（int、float、char）的程序模板版本。程序中有两个类，NodeSLList 类和 IntNode 类。

我已尽力创建这两个类的模板版本，同时按我认为应该的方式更改成员声明和定义，但对于我的生活，我无法摆脱其中一些错误。我正在阅读和重新阅读关于模板和模板类的笔记，并在网上搜索以获得更好的解释，并且在发布此内容时将继续工作，但同时我非常感谢任何帮助。

* * *

有两个源代码文件和两个头文件。

IntNode.h：

```
///////////////////////////////////////////////////////////////////////
// class IntNode
//
// Description: represents the data that we want to store in our 
//              linked list
///////////////////////////////////////////////////////////////////////
#ifndef __INT_NODE__
#define __INT_NODE__

#include <iostream>

using std::ostream;

// class declaration
template <typename N>
class IntNode {

// make the following friends of this class in order that they be
// able to directly access private data of this container class
    friend void NodeSLList_Test(void);
    friend class NodeSLList;
    friend class TSArray;
    friend ostream& operator<<(ostream &, NodeSLList &);

public:

///////////////////////////////////////////////////////////////////////
// ostream operator
// 
// Description: provide overloaded ostream operator
// Input: reference to ostream object
//        reference to IntNode object to output
// Output: none
// Returns: reference to same ostream operator for cascading
///////////////////////////////////////////////////////////////////////
    friend ostream& operator<<(ostream & out, IntNode<N> & n);

///////////////////////////////////////////////////////////////////////
// default constructor
// 
// Description: provide default construction of an IntNode object
// Input: row of array
//        column of array
//        depth of array
//        initial value of node
//        pointer to next IntNode
// Output: none
// Returns: reference to same ostream operator for cascading
///////////////////////////////////////////////////////////////////////
    IntNode(int inRow=0, int inCol=0, int inDepth=0, N inData, IntNode<N> *in = 0);

///////////////////////////////////////////////////////////////////////
// GetRow
// 
// Description: return row member
// Input: none
// Output: none
// Returns: row member
///////////////////////////////////////////////////////////////////////
    const int GetRow() const;

///////////////////////////////////////////////////////////////////////
// GetColumn
// 
// Description: return column member
// Input: none
// Output: none
// Returns: column member
///////////////////////////////////////////////////////////////////////
    const int GetColumn() const;

///////////////////////////////////////////////////////////////////////
// GetDepth
// 
// Description: return depth member
// Input: none
// Output: none
// Returns: depth member
///////////////////////////////////////////////////////////////////////
    const int GetDepth() const;

///////////////////////////////////////////////////////////////////////
// GetData
// 
// Description: return data member
// Input: none
// Output: none
// Returns: data member
///////////////////////////////////////////////////////////////////////
    const N GetData() const;

private:

///////////////////////////////////////////////////////////////////////
// row
// 
// this variable holds the row of the array element (i.e first demension)
///////////////////////////////////////////////////////////////////////
    int row;

///////////////////////////////////////////////////////////////////////
// column
// 
// this variable holds the column of the array element (i.e 2nd demension)
///////////////////////////////////////////////////////////////////////
    int col;

///////////////////////////////////////////////////////////////////////
// depth
// 
// this variable holds the column of the array element (i.e 3rd demension)
///////////////////////////////////////////////////////////////////////
    int depth;

///////////////////////////////////////////////////////////////////////
// data
// 
// this variable holds the actual data at the array element
///////////////////////////////////////////////////////////////////////
    N data;

///////////////////////////////////////////////////////////////////////
// column
// 
// this variable holds the column of the array element (i.e 2nd demension)
///////////////////////////////////////////////////////////////////////
    IntNode<N> *next;
};

#endif __INT_NODE__ 
```

IntNode.cpp：

```
///////////////////////////////////////////////////////////////////////
// class IntNode
//
// Description: represents the data that we want to store in our 
//              linked list
///////////////////////////////////////////////////////////////////////
#include "IntNode.h"

///////////////////////////////////////////////////////////////////////
// default constructor

template <typename N>
IntNode<N>::IntNode(int inRow, int inCol, int inDepth, N inData, IntNode *in)
{
    data = inData; 
    next = in;
    row = inRow; 
    col = inCol; 
    depth = inDepth;
}

///////////////////////////////////////////////////////////////////////
// GetRow
///////////////////////////////////////////////////////////////////////
template <typename N>
const int IntNode<N>::GetRow() const
{
    return row;
}

///////////////////////////////////////////////////////////////////////
// GetColumn
///////////////////////////////////////////////////////////////////////
template <typename N>
const int IntNode<N>::GetColumn() const
{
    return col;
}

///////////////////////////////////////////////////////////////////////
// GetDepth
///////////////////////////////////////////////////////////////////////
template <typename N>
const int IntNode<N>::GetDepth() const
{
    return depth;
}

///////////////////////////////////////////////////////////////////////
// GetData
///////////////////////////////////////////////////////////////////////
template <typename N>
const N IntNode<N>::GetData() const
{
    return data;
}

///////////////////////////////////////////////////////////////////////
// ostream operator
///////////////////////////////////////////////////////////////////////
template <typename N>
ostream& operator<<(ostream & out, IntNode<N> & n)
{
    out << "[" << n.row << "]"
        << "[" << n.col << "]"
        << "[" << n.depth << "]:"
        << n.data;
    return out;
} 
```

节点SLList.h：

```
///////////////////////////////////////////////////////////////////////
// Class NodeSLList Interface
//
// Description - This is the interface for a class which implements 
//               a singly linked list of integers. Each node in the 
//               linked list is IntNode object, defined by the IntNode
//               class. 
///////////////////////////////////////////////////////////////////////
#ifndef INT_LINKED_LIST
#define INT_LINKED_LIST

#include <iostream>

using std::ostream;
using std::cout;
using std::cin;
using std::endl;

#include "IntNode.h"

// Class NodeSLList Declaration

template <typename T>
class NodeSLList {

///////////////////////////////////////////////////////////////////////
// operator<<
// 
// Description: print the list
// Input: reference to ostream object
//        reference to an NodeSLList object to be printed
// Output: linked list printed to screen
// Returns: reference to an ostream object
///////////////////////////////////////////////////////////////////////
    //friend ostream& operator<<( ostream &, NodeSLList<T> & );
    template <typename T> friend ostream & operator<<(ostream &, NodeSLList<T> &);

public:

///////////////////////////////////////////////////////////////////////
// default constructor
// 
// Description: initialize list
// Input: none
// Output: none
// Returns: none
///////////////////////////////////////////////////////////////////////
    NodeSLList();

///////////////////////////////////////////////////////////////////////
// destructor
// 
// Description: deallocates all memory for linked list by calling
//              destroyList() member function
// Input: none
// Output: none
// Returns: none
///////////////////////////////////////////////////////////////////////
    ~NodeSLList();

///////////////////////////////////////////////////////////////////////
// IsEmpty
// 
// Description: returns status of array
// Input: none
// Output: none
// Returns: TRUE if list is empty
//          FALSE otherwise
///////////////////////////////////////////////////////////////////////
    bool IsEmpty() const;

///////////////////////////////////////////////////////////////////////
// GetSize
// 
// Description: get current number of nodes in list
// Input: none
// Output: none
// Returns: number of nodes in list
///////////////////////////////////////////////////////////////////////
    int GetSize() const;

///////////////////////////////////////////////////////////////////////
// AddToHead
// 
// Description: add a node to the head of the list
// Input: data for node to be added
// Output: updated linked list
// Returns: none
///////////////////////////////////////////////////////////////////////
    void AddToHead(IntNode<T> & node);

///////////////////////////////////////////////////////////////////////
// DeleteFromHead
// 
// Description: remove a node from the head of the list
// Input: none
// Output: updated linked list
// Returns: data that was at the node just removed
///////////////////////////////////////////////////////////////////////
    IntNode<T> DeleteFromHead();

///////////////////////////////////////////////////////////////////////
// DeleteFromTail
// 
// Description: remove a node from the tail of the list
// Input: none
// Output: updated linked list
// Returns: data that was at the node just removed
///////////////////////////////////////////////////////////////////////
    IntNode<T> DeleteFromTail();

///////////////////////////////////////////////////////////////////////
// DeleteNode
// 
// Description: remove a node from the list
// Input: node number to be removed
// Output: updated linked list
// Returns: data that was at the node just removed
///////////////////////////////////////////////////////////////////////
    IntNode<T> DeleteNode(int nodeNum);

///////////////////////////////////////////////////////////////////////
// RetrieveNode
// 
// Description: retrieve data from a node without removing it from 
//              the list
// Input: node number (1-N; not 0-N-1)
// Output: none
// Returns: reference to node data
///////////////////////////////////////////////////////////////////////
    IntNode<T> &RetrieveNode(int nodeNum) const;

///////////////////////////////////////////////////////////////////////
// UpdateNode
// 
// Description: update a node's data
// Input: node number (1-N; not 0-(N-1))
// Output: updated node
// Returns: none
///////////////////////////////////////////////////////////////////////
    void UpdateNode(int nodeNum, IntNode<T> &node);

///////////////////////////////////////////////////////////////////////
// DestroyList
// 
// Description: deallocates all memory for linked list
// Input: none
// Output: reset linked list
// Returns: none
///////////////////////////////////////////////////////////////////////
    void DestroyList();

private:

    IntNode<T> *head, *tail;

};

#endif INT_LINKED_LIST 
```

节点SLList.cpp：

```
///////////////////////////////////////////////////////////////////////
// Class NodeSLList Implementation
//
// Description - This file implements a singly linked list.
///////////////////////////////////////////////////////////////////////
#include "IntNode.h"
#include "NodeSLList.h"

///////////////////////////////////////////////////////////////////////
// default constructor
///////////////////////////////////////////////////////////////////////
template <typename T>
NodeSLList<T>::NodeSLList()
{ 
    head = tail = 0;
}

///////////////////////////////////////////////////////////////////////
// destructor
////////////////////////////////////////////////////////////////////
template <typename T>
NodeSLList<T>::~NodeSLList()
{
    // call destroyList() to remove all nodes
    // and reset linked list
    DestroyList();
}

///////////////////////////////////////////////////////////////////////
// IsEmpty
////////////////////////////////////////////////////////////////////
template <typename T>
bool NodeSLList<T>::IsEmpty() const
{ 
    return (head == 0); 
}

///////////////////////////////////////////////////////////////////////
// DestroyList
///////////////////////////////////////////////////////////////////////
template <typename T>
void NodeSLList<T>::DestroyList()
{
    // while the list is NOT empy
    // keep removing the head node and make
    // the next node the head node
    for (IntNode<T> *p; !IsEmpty(); )
    {
        p = head->next;
        delete head;
        head = p;
    }
    head = tail = 0;
}

///////////////////////////////////////////////////////////////////////
// AddToHead
///////////////////////////////////////////////////////////////////////
template <typename T>
void NodeSLList<T>::AddToHead(IntNode<T> & node)
{
    // create a new node, and make it the head. the 
    // previous head will become head->next
    head = new IntNode<>(node.row, node.col, node.depth, node.data, head);

    // if this is the first node, make the tail the 
    // same as the head
    if (tail == 0)
        tail = head;
}

///////////////////////////////////////////////////////////////////////
// DeleteFromHead
// 
// Description: remove a node from the head of the list
// Input: none
// Output: updated linked list
// Returns: data that was at the node just removed
///////////////////////////////////////////////////////////////////////
template <typename T>
IntNode<T> NodeSLList<T>::DeleteFromHead()
{
    IntNode<T> temp;
    if (IsEmpty())
    {
        cout << "*****ERROR: Can't delete from head. List is Empty" << endl;
        return temp;
    }

    temp.data = head->data;
    temp.col = head->col;
    temp.row = head->row;
    temp.depth = head->depth;

    IntNode<T> *tmp = head;

    // if there is only one node, set the head and pointer tails
    // to NULL (0)
    if (head == tail)
        head = tail = 0;

    // otherwise, move the head pointer to the next node 
    // in the list
    else
        head = head->next;

    // delete head node
    delete tmp;

    return temp;
}

///////////////////////////////////////////////////////////////////////
// DeleteFromTail
///////////////////////////////////////////////////////////////////////
template <typename T>
IntNode<T> NodeSLList<T>::DeleteFromTail()
{
    IntNode<T> nodeData;
    nodeData.col = tail->col;
    nodeData.row = tail->row;
    nodeData.depth = tail->depth;
    nodeData.data = tail->data;

    // if there is only one node, delete the only node, and set the 
    // head and tail pointers to NULL (0) 
    if (head == tail)
    {
        delete head;
        head = tail =0;
    }

    // otherwise, traverse to the tail node and delete it
    else
    {
        IntNode * temp;
        for (temp = head; temp->next != tail; temp = temp->next);
        delete tail;
        tail = temp;
        tail->next = 0;
    }

    return nodeData;
}

///////////////////////////////////////////////////////////////////////
// DeleteNode
///////////////////////////////////////////////////////////////////////
template <typename T>
IntNode<T> NodeSLList<T>::DeleteNode(int nodeNum)
{
    if (nodeNum <= 0) nodeNum = 1;
    IntNode<T> *prev=head , *temp=head;
    IntNode<T> current;

    // traverse to the node
    for (int loop=1; loop<nodeNum; loop++)
    {
        prev=temp, temp=temp->next;
        // check for case where nodeNum is > the number of 
        // nodes in the list. if we reach the tail before
        // we traverse to the node, delete the tail 
        if ( temp == tail )
            return DeleteFromTail();
    }

    // if deleting the head just call 
    // the appropriate member function 
    // and don't repeat that logic here
    if (temp == head) return DeleteFromHead();

    // otherwise, delete the node we traversed to
    prev->next = temp->next;
    current.row = temp->row;
    current.col = temp->col;
    current.data = temp->data;

    delete temp;

    return current;
}

///////////////////////////////////////////////////////////////////////
// RetrieveNode
///////////////////////////////////////////////////////////////////////
template <typename T>
IntNode<T> & NodeSLList<T>::RetrieveNode(int nodeNum) const
{
    IntNode<T> *tmp = head;

    // traverse to the node, or to the last node, whichever comes
    // first
    for (int i=1; i< nodeNum && tmp != tail; i++)
        tmp = tmp->next;

    return *tmp;
}

///////////////////////////////////////////////////////////////////////
// UpdateNode
///////////////////////////////////////////////////////////////////////
template <typename T>
void NodeSLList<T>::UpdateNode(int nodeNum, IntNode<T> &node)
{
    IntNode<T> *tmp = head;

    // traverse to the node, or to the last node, whichever comes
    // first
    for (int i=1; i< nodeNum && tmp != tail; i++)
        tmp = tmp->next;

    tmp->data = node.data;
    tmp->col = node.col;
    tmp->row = node.row;
}

///////////////////////////////////////////////////////////////////////
// GetSize
///////////////////////////////////////////////////////////////////////
template <typename T>
int NodeSLList<T>::GetSize() const
{
    // check to see if the list is empty. if 
    // so, just return 0
    if ( IsEmpty() ) return 0;

    int size = 1;
    IntNode<T> *p = head;
    // compute the number of nodes and return
    while (p != tail)
    {
        size++;
        p = p->next;
    }
    return size;
}

///////////////////////////////////////////////////////////////////////
// operator<<
///////////////////////////////////////////////////////////////////////
template <typename T>
ostream & operator<<(ostream & output, NodeSLList<T> & sl)
{
    IntNode<T> *p = sl.head;
    if ( sl.IsEmpty())
    {
        output << "List is empty!";
        return output;
    }
    output << "[row][col][depth]:data = ";
    output << *p << ", ";
    while (p != sl.tail)
    {
        p = p->next;
        output << *p << ", ";
    } 

    return output;
}

// TEST DRIVER. Only used to test the class.
// Activated by defining TEST_DRIVER in the 
// Project - Settings - C/C++ - Preprocessor definitions
#ifdef LIST_DRIVER

#include <stdlib.h>
void pause();

void main(void)
{
    NodeSLList_Test<int>();
    NodeSLList_Test<double>();
    NodeSLList_Test<float>();
}

template <typename T>
void NodeSLList_Test()
{

    NodeSLList<T> s;
    IntNode<T> temp;

    cout << "TESTING "<<T<<" OPERATIONS\n";

    IntNode<T> n1(1,1,1,10);
    IntNode<T> n2(1,2,1,20);
    IntNode<T> n3(1,3,1,30);
    IntNode<T> n4(1,4,1,40);
    IntNode<T> n5(1,5,1,50);

    cout << "Testing addToHead() operation" << endl;
    s.AddToHead(n5);
    s.AddToHead(n4);
    s.AddToHead(n3);
    s.AddToHead(n2);
    s.AddToHead(n1);

    cout << s << endl;

    cout << "\nTesting GetSize() operation" << endl;
    cout << "list contains " << s.GetSize() << " node(s)" << endl;

    cout << "\nTesting DeleteFromHead() operation" << endl;
    temp = s.DeleteFromHead();
    cout << "node retrieved " << temp << endl;
    cout << s << endl;

    cout << "\nTesting DeleteFromTail() operation" << endl;
    temp = s.DeleteFromTail();
    cout << "node retrieved " << temp << endl;
    cout << s << endl;

    cout << "\nTesting RetrieveNode() operation" << endl;
    temp = s.RetrieveNode(0);
    cout << "node retrieved (should be first node) " << temp << endl;
    temp = s.RetrieveNode(50);
    cout << "node retrieved (should be last node) " << temp << endl;
    temp = s.RetrieveNode(2);
    cout << "node retrieved (should be 2nd node) " << temp << endl;
    pause();

    cout << "Adding n3 to head" << endl;
    cout << "Adding n2 to head" << endl;
    s.AddToHead(n3);
    s.AddToHead(n2);
    cout << "List is now: " << s << endl;
    cout << "\nTesting DeleteNode() operation" << endl;
    temp = s.DeleteNode(50);
    cout << "node deleted (should be last node) " << temp << endl;
    cout << s << endl;
    temp = s.DeleteNode(3);
    cout << "node deleted (should be 3rd node) " << temp << endl;
    cout << s << endl;

    cout << "Test SsEmpty() operation" << endl;
    cout << (s.IsEmpty() ? "List IS Empty\n" : "List NOT Empty\n");

    cout << "\nTesting UpdateNode() operation (updating 3rd node with [10][20][30]:500)" 
        << endl;
    temp.row = 10;
    temp.col = 20;
    temp.depth = 30;
    temp.data = 500;
    s.UpdateNode(3,temp);
    cout << s << endl;

    pause();

    cout << "\nTesting the ability to delete nodes from head, even" << endl
        << "after list is empty" << endl
        << "Should recieve 2 errors" << endl;
    temp = s.DeleteFromHead();
    temp = s.DeleteFromHead();
    temp = s.DeleteFromHead();
    temp = s.DeleteFromHead();
    temp = s.DeleteFromHead();

    cout << "\nTest IsEmpty() operation" << endl;
    cout << (s.IsEmpty() ? "List IS Empty\n" : "List NOT Empty\n");

    cout << "\nTesting DestroyList() operation" << endl;
    s.AddToHead(n3);
    s.AddToHead(n2);
    s.AddToHead(n1);
    cout << s << endl;
    cout << "calling DestoryList()" << endl;
    s.DestroyList();
    cout << s << endl;

}

void pause()
{
    cout << "Press RETURN to continue" << endl;
    cin.get();
    system("cls");
}

#endif 
```

错误：

```
Error   1   error C2989: 'NodeSLList' : class template has already been declared as a non-class template    c:\cis554\nodesllist_template\nodesllist.h  160
Error   2   error C3857: 'NodeSLList': multiple template parameter lists are not allowed    c:\cis554\nodesllist_template\nodesllist.h  23
Error   3   error C2988: unrecognizable template declaration/definition c:\cis554\nodesllist_template\nodesllist.cpp    14
Error   4   error C2059: syntax error : '<' c:\cis554\nodesllist_template\nodesllist.cpp    14
Error   5   error C2588: '::~NodeSLList' : illegal global destructor    c:\cis554\nodesllist_template\nodesllist.cpp    24
Error   6   error C1903: unable to recover from previous error(s); stopping compilation c:\cis554\nodesllist_template\nodesllist.cpp    24
    7   IntelliSense: default argument not at end of parameter list c:\CIS554\NodeSLList_Template\IntNode.h 51 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T06:02:06.807

它是模板，C++ 编译器不支持将类定义分离到另一个文件中。您必须将所有 .cpp 代码放入 .h

将 IntNode.cpp 中的所有代码移入 IntNode.h，将 NodeSLList.cpp 代码移入 NodeSLList.h

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T05:54:18.763

NodeSLList 的朋友声明是错误的，应该是`friend class NodeSLList<N>;`. 并且对 NodeSLList 的所有引用都应相应更改。其他错误源于 NodeSLList 类的声明不一致。

另外，将模板类的方法的内联定义放在头文件中，否则模板类的用户会出现链接器错误。虽然有一些方法可以在不将定义放在标题中的情况下克服这个问题，但它们通常不是很好。

# bash - 在 shell 中从命令行传递参数

> ID：13487073
> 
> 赞同：1
> 
> 时间：2012-11-21T05:42:53.143
> 
> 标签：bash, shell

```
DATE1=`perl -e 'use POSIX qw(strftime); print strftime "%Y-%m-%d",localtime(time()- 3600*72);'`

DATE2=`perl -e 'use POSIX qw(strftime); print strftime "%Y%m%d",localtime(time()- 3600*72);'`

DATE3=`perl -e 'use POSIX qw(strftime); print strftime "%Y%m%d",localtime(time()- 3600*48);'`

DATE4=`perl -e 'use POSIX qw(strftime); print strftime "%Y/%m/%d",localtime(time()- 3600*48);'` 
```

下面是我的 shell 脚本（test1.sh），我需要在其中打印四个日期，所有这四个日期都应该来自上面。这意味着我只需要从命令提示符将这四个日期传递到下面的 shell 脚本。

```
#!/bin/bash

echo Date1
echo Date2
echo Date3
echo Date4 
```

因此，当我像这样运行 shell 脚本时，它应该从上述四个日期中获取 Date1、Date2、Date3、Date4 吗？

```
sh -x test1.sh Date1 Date2 Date3 Date4 
```

可以在shell脚本中做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T05:52:23.337

如果您在 shell 中执行您的第一个代码块，那么您将使用这些命令的输出定义 4 个变量。要访问这些变量中的任何一个，您必须`$`在变量名前面加上 a - 例如`$DATE1`.

因此，要使用这些参数运行脚本，您应该运行：

```
 bash -x test1.sh $DATE1 $DATE2 $DATE3 $DATE4 
```

注意`$`和 区分大小写。

最后，在您的脚本中，参数是在一系列变量中接收的，这些变量以参数的顺序数调用。因此，您的第一个参数由 检索`$1`，第二个由检索`$2`，依此类推。

所以，你的脚本最终是：

```
#!/bin/bash

echo $1
echo $2
echo $3
echo $4 
```

另请注意，您正在定义一个 she-bang，告诉脚本由 解释`bash`，但您之前的调用是使用`sh`. 它们有很多兼容性，但它们并不相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T05:46:53.130

如果通过 perl 传递，您只需要引用全局参数变量。

```
#!/bin/bash

echo "$1" # Date1
echo "$2" # Date2
echo "$3" # Date3
echo "$4" # Date4 
```

否则你可以打开一个子shell`$()`来返回结果

```
> echo $(date "+%Y-%m-%d")
2012-11-20 
```

# java - CMU Sphinx 是否可以通过 Maven 获得？

> ID：13487075
> 
> 赞同：5
> 
> 时间：2012-11-21T05:43:06.760
> 
> 标签：java, maven, cmusphinx

我有一个可能需要 CMU Sphinx 的应用程序的想法，它可以通过 maven 获得，还是我需要手动添加？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T08:39:50.180

更新：CMUSphinx 将在一周左右推出 sonatype。maven 支持已经提交到 sphinx4 主干中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-19T13:43:18.473

您可以从[http://cmusphinx.sourceforge.net/wiki/tutorialsphinx4](http://cmusphinx.sourceforge.net/wiki/tutorialsphinx4)检查：

概述

Sphinx-4 是一个纯 Java 语音识别库。它的配置非常灵活，为了执行语音识别工作，需要实例化大量相互依赖的对象，在本文中我们将它们统称为“对象图”。幸运的是，大多数对象都可以自动实例化，对于少数需要手动设置的对象，Sphinx-4 提供了高级接口和上下文类，无需单独设置对象图的每个参数。

在您的项目中使用

Sphinx-4 在 Sonatype OSS 存储库中作为 maven 包提供。要在您的 maven 项目中使用 sphinx4，请在您的 pom.xml 中指定此存储库：

```
<project>
...
   <repositories>
       <repository
           <id>snapshots-repo</id>
           <url>https://oss.sonatype.org/content/repositories/snapshots</url>
           <releases><enabled>false</enabled></releases>
          <snapshots><enabled>true</enabled></snapshots>
       </repository>
   </repositories>
...
</project> 
```

然后将 sphinx4-core 添加到项目依赖项中：

```
<dependency>
  <groupId>edu.cmu.sphinx</groupId>
 <artifactId>sphinx4-core</artifactId>
 <version>1.0-SNAPSHOT</version> 
```

如果您想使用默认的声学和语言模型，也可以将 sphinx4-data 添加到依赖项：

```
<dependency>
  <groupId>edu.cmu.sphinx</groupId>
  <artifactId>sphinx4-data</artifactId>
  <version>1.0-SNAPSHOT</version>
</dependency> 
```

# jquery - 调整下面的 jquery，使页面向下滚动 1"

> ID：13487077
> 
> 赞同：1
> 
> 时间：2012-11-21T05:43:11.370
> 
> 标签：jquery, css

[http://communitychessclub.com/index.php](http://communitychessclub.com/index.php)是一个使用永久位置的长网页：基于来自[http://blog.yjl.im/2010/01/stick-div-at-top-的代码的固定菜单after-scrolling.html](http://blog.yjl.im/2010/01/stick-div-at-top-after-scrolling.html)

但是菜单包含指向同一页面中 ID 的链接，并且当单击时，固定滚动菜单会挡住部分 . 例如： http: [//communitychessclub.com/#official](http://communitychessclub.com/#official)，您会看到菜单挡住了目标文章文本。请注意，我有，这就是我想要的逻辑语法和位置。

有没有办法修改下面的jquery，使页面向下滚动1”，使菜单出现在目标文章之外？我不在乎菜单是否覆盖了目标ID文章上方的文章。

```
CSS:
#sticky {margin:0 auto; display:table}
#sticky.stick {position: fixed;  top: 0; margin-left:48px; z-index: 10000; }

JS:

<script>
function sticky_relocate() {
var window_top = $(window).scrollTop();
var div_top = $('#sticky-anchor').offset().top;
if (window_top > div_top)
$('#sticky').addClass('stick')
else
$('#sticky').removeClass('stick');
}

$(function() {
$(window).scroll(sticky_relocate);
sticky_relocate();
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T05:58:20.347

这段 JavaScript 将起作用。

```
$(window).scroll((function() {
var a='',  // a buffer to the hash
w = $(window);
return function() {
    var h = location.hash;
    if (h != a) {   // if hash is different from the previous one, which indicates
                        // the hash changed by user, then scroll the window down
    a = h;           // update the buffer
    w.scrollTop(w.scrollTop()-100)
    }
};
})()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T06:09:21.087

该代码中未提供您想要的内容。

基本上，这个想法是捕获点击事件，获取要移动到的文章的 id，找到该元素的 position().top，然后将窗口移动到该位置 - 一段距离。

```
$('.js-css-menu a').click(function(e) {
    e.preventDefault();
    $(window).scrollTop($('#' + $(this).prop('href').split('#')[1]).offset().top - 50);
});​ 
```

这在控制台中看起来不错。

# jquery - 在方法 jquery 之前

> ID：13487082
> 
> 赞同：1
> 
> 时间：2012-11-21T05:43:35.393
> 
> 标签：jquery, methods

我有一个这样的 HTML 部分：

```
<li data-file="file.mp3">
    <div class="pink-light playing"> 
```

现在，我想获取`<li>`. 但是我有几个`<li>`标签，我只想获取具有内部“正在播放”类的 div 的属性**。**

我的脚本：

```
$(".playing").before($("li"),function(){

    alert($(this).attr("data-file"));

}); 
```

怎么了？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T05:47:56.943

有几种方法可以做到这一点。如果`.playing`元素是唯一的，那么：

```
var file = $(".playing").closest("li").attr("data-file"); 
```

[`closest`](http://api.jquery.com/closest)找到与给定选择器匹配的最近的祖先。由于您的`.playing`元素是 的子元素（后代），因此`li`您可以这样找到它。

或者，您可以使用[`:has`](http://api.jquery.com/has-selector/)伪类：

```
var file = $("li:has(.playing)").attr('data-file'); 
```

...但请注意，这`:has`是一个 jQuery 的东西，所以它不能委托给选择器引擎。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T05:49:47.607

尝试这个

```
 $(".playing").each(function(){
  alert($(this).parent().attr("data-file"));
 }); 
```

注意：使用 prop 而不是 attr

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T05:47:21.733

[`before`](http://api.jquery.com/before/)仅用于**插入**新元素。如果要检索，请[`prev`](http://api.jquery.com/prev/)改用。虽然，在您的情况下，您对前一个兄弟姐妹并不真正感兴趣，但对[`parent`](http://api.jquery.com/parent)节点感兴趣，因为`div`它位于`li`：

```
$(".playing").parent().each(function() {
    alert($(this).attr("data-file"));
}); 
```

# web-services - Web 服务中的时间戳

> ID：13487086
> 
> 赞同：1
> 
> 时间：2012-11-21T05:43:58.023
> 
> 标签：web-services

防止 Web 服务请求中的重放攻击的解决方案是使用将集成在请求中的时间戳。

获得时间戳的最佳方法是什么？这应该来自客户端还是对时间戳进行初始请求，将该时间戳集成到下一个请求，然后将请求发送到服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T05:45:57.743

最好发送 GMT 时间戳，以便将其转换回客户端的任何其他时区。

# asp.net - 在 ASP.net 中访问客户端浏览器的网络摄像头图像需要哪些不同的插件？

> ID：13487092
> 
> 赞同：0
> 
> 时间：2012-11-21T05:44:28.307
> 
> 标签：asp.net, webclient, webcam, client-side

我正在做我需要从客户端发送到服务器端的每一个`random time`项目`capture images`。

我的问题是从我只知道的客户端浏览器访问网络摄像头图像的简单选择是什么

1.  闪光
2.  银光

关于这两种访问网络摄像头图像的简单方法，请提供

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:08:58.553

我使用[了 jpegcam](http://code.google.com/p/jpegcam/wiki/Instructions)、Javascript 和 Flash 库，允许您让您的用户以 JPEG 格式将网络摄像头快照提交到您的服务器。从这个[链接](http://code.google.com/p/jpegcam/wiki/Instructions)您可以获得如何使用它的说明。您需要下载文件并将其添加到您的项目中.但是这里给出的服务器端代码是基于php的，对于c#看看这个[链接](https://stackoverflow.com/questions/6579407/jquery-webcam-plugin-save-image-without-php/13284531#13284531)我已经在那里发布了答案。希望这对您有所帮助。

# jakarta-ee - 并发 IO 处理 JAVA EE：最佳方法？

> ID：13487102
> 
> 赞同：1
> 
> 时间：2012-11-21T05:45:49.423
> 
> 标签：jakarta-ee, concurrency, glassfish, ejb, jms

我有一个 JavaEE 6 / EJB3.1 / Glassfish 3.1.2 应用程序，它从远程计算机检索 .xml 页面，将它们转换为 java 对象，然后将它们中的每一个都保存在我的 mysql 数据库中。有成千上万个这样的 .xml 页面，我只是在逐步添加它们。
这很好用，除了它非常慢（70ms 页面检索 + 转换和持久化实体的少量时间）。

我想同时进行这项工作以加快速度 - 最好的方法是什么？

可能值得注意：每个页面检索都会更新 mysql 数据库中用于获取页面的 OAuth 凭据的计数，如果它处于最大值，则不会继续（引发异常）。我不确定这是否/多少会使事情复杂化 - 但如果两个线程看到它低于最大值，那么在更新计数之前获取页面它可能会超过最大值。

到目前为止，我的研究已将其缩小到两种可能性（尽管可以随意添加其他可能性）：

1.  **Message Driven Beans** - 我想，虽然可能是错误的，但我会让一个会话 bean 发送 url 消息，直到消息队列已满（比如添加了 10 个 url），然后阻塞直到队列未满。Glassfish 将创建我创建的消息 bean 的 10 个实例，每个实例从其中一个 url 获取一个 .xml，更新 OAuth 计数，然后将此 .xml 作为消息发送到另一个队列，其中另一个消息 bean 可以转换并持续存在。此队列中的 xml。
2.  **使用@Asynchronous**方法并创建我自己的线程安全队列？这可能更简单，更适合我正在做的事情，但我不确定我将如何实现它。

任何意见，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:10:18.850

由于您正在处理远程服务器，您知道它的扩展性如何吗？如果你用 10 个线程来处理它，你的响应时间会变成 700 毫秒还是会保持稳定在 70 毫秒？

假设远程服务器可以扩展，我认为您对 MDB 的想法很满意。但是，您对此的一些想法是不准确的。您将创建提交到队列的会话 bean。我们的不同之处在于，我认为您希望在工作可用时尽快加载队列。您可以设置队列大小并告诉它是否希望在满足该大小时丢弃最旧的或最新的。我怀疑您想使用所有消息，您也可以这样做。我运行包含 100 条数千条消息的队列。您实际上只限于队列的内存大小，您可以通过使消息尽可能紧凑来管理它。

在消费方面，您可以将 MDB 池限制为 10 个 bean 或其他任何东西，这仅取决于远程服务器能够扩展到什么以及您的服务器也能够扩展什么。而不是使用 2 个队列（这只是基于您描述的问题），我只使用一个。创建一个 MDB，它可以完成您现在所做的一切，即抓取 xml 并将其持久化。最后，如果您发现需要扩展，只需创建集群并添加节点即可。然后，每个节点都会有一个正在使用的 MDB 池。

关于异步，将如何控制池大小以及 MDB 给您的所有其他东西？我并不是说你不能，但似乎你正在重新发明轮子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T16:15:12.140

完全同意普雷斯顿。此外，如果您意识到需要通过添加更多节点来进行扩展，请确保配置 JMS 队列以使其接受多个消费者。这是“应用程序级”负载均衡器的典型设置，其中工作被分派给工作人员。

# vb.net - 显示从当前日期到接下来六天的日期

> ID：13487106
> 
> 赞同：1
> 
> 时间：2012-11-21T05:46:12.870
> 
> 标签：vb.net

我正在使用此代码显示从当前日期到接下来六天的日期。如果有这样的显示日期的其他代码。请帮忙

```
Private Sub Displaydate()
    cn.ConnectionString = System.Configuration.ConfigurationManager.AppSettings("DataConnectionString")
    lblDateday.Text = System.DateTime.Now.ToString("dddd")
    lblMonthdate.Text = System.DateTime.Now.ToString("dd MMMM ")
    lblDateday2.Text = System.DateTime.Now.AddDays(1).ToString("dddd")
    lblMonthdate2.Text = System.DateTime.Now.AddDays(1).ToString("dd MMMM ")
    lblDateday3.Text = System.DateTime.Now.AddDays(2).ToString("dddd")
    lblMonthdate3.Text = System.DateTime.Now.AddDays(2).ToString("dd MMMM ")
    lblDateday4.Text = System.DateTime.Now.AddDays(3).ToString("dddd")
    lblMonthdate4.Text = System.DateTime.Now.AddDays(3).ToString("dd MMMM ")
    lblDateday5.Text = System.DateTime.Now.AddDays(4).ToString("dddd")
    lblMonthdate5.Text = System.DateTime.Now.AddDays(4).ToString("dd MMMM ")
    lblDateday6.Text = System.DateTime.Now.AddDays(5).ToString("dddd")
    lblMonthdate6.Text = System.DateTime.Now.AddDays(5).ToString("dd MMMM ")
    lblDateday7.Text = System.DateTime.Now.AddDays(6).ToString("dddd")
    lblMonthdate7.Text = System.DateTime.Now.AddDays(6).ToString("dd MMMM ")
End Sub 
```

输出是

周三 周四 周五 周六 周日 周一 周二

11 月 21 日 11 月 22 日 11 月 23 日 11 月 24 日 11 月 25 日 11 月 26 日 11 月 27 日

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:47:48.243

将您处理的内容放入数组中，然后执行循环。

全局分配列表

```
Dim DateDayList as List(of Label) = new List(of Label)
Dim MonthDayList as List(of Label) = new List(of Label) 
```

在 Initialize 子中以正确的顺序将所有 dateDay 标签添加到列表中。

```
DateDayList.Add(lblDateDay)
DateDayList.Add(lblDateDay2)
etc. 
```

对月日标签执行相同操作。

然后只需执行以下操作：

```
for i as Integer = 0 To 6
   DateDayList(i).Text = System.DateTime.Now.AddDays(i).ToString("dddd")
   MonthDayList(i).Text = System.DateTime.Now.AddDays(i).ToString("dd MMMM ")
next 
```

# php - PayPal沙箱异常

> ID：13487107
> 
> 赞同：1
> 
> 时间：2012-11-21T05:46:13.213
> 
> 标签：php, paypal, paypal-sandbox

在我的本地机器上测试一些捐赠时，我设置了各种 key=value 对来做各种事情（返回特定的感谢页面，从 PayPal 获取 POST 数据而不是 GET 数据等）我还围绕来自的响应构建了我的代码贝宝沙箱。

但是，当我的代码进入生产服务器并且我们打开实时支付并使用真实账户和金钱进行测试时，会发生一些奇怪的事情；

1.  我们收到来自 PayPal 的 GET 响应 - 该 URL 充满了废话。
2.  我们没有得到任何交易细节。这是大人物，没有名字，没有 txn_id，没有日期，什么都没有。我们得到了一把钥匙等，它不是完全空的，付款已经完成，但远不及沙盒的详细程度。

好奇为什么会这样？拥有与生产环境截然不同的沙箱（或开发环境）并没有真正的意义。或者，我错过了什么？

**编辑**：仍然没有回答我在[PayPal 开发者论坛](https://www.x.com/developers/paypal/forums/paypal-sandbox/sandbox-return-different-production%20%22PayPal%20developer%20forums)中的问题。我什至没有从 PayPal 收到捐款金额。这可能是一个设置吗？

**编辑#2**：你们中的两个人建议检查 PDT 和自动返回。该项目的数据分析人员仅在 2 小时前提出了相同的建议。我已要求客户确认这一点。我在沙盒中看不到它的设置，所以可以假设它默认启用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T04:37:29.683

您确定您的真实账户上的所有 PDT 和自动返回的配置都与沙盒账户上的配置相同吗？在 x.com 论坛中，PayPal 提供的帮助并不多。我建议将一张票张贴到 www.paypal.com/mts，尽管他们在那里也有点慢。但是，如果您登录您的帐户并进入“通过电话联系”部分，您将看到一个直接电话号码以获取技术支持。这可能是你最好的选择。

# mysql - 什么关闭了这个连接？

> ID：13487112
> 
> 赞同：-1
> 
> 时间：2012-11-21T05:46:30.170
> 
> 标签：mysql, vb.net

嘿伙计们，我需要一些关于我的代码的帮助，我真的不知道它关闭连接的部分在哪里......我想要的是继续添加记录，直到我从 msgbox 中单击“否”

这是我的代码：

```
 Dim connstr As String = "server=localhost; uid= root; password=root; database=lmsdbase;"
Dim conn As MySqlConnection = New MySqlConnection
Dim ds As New DataSet
Dim da As MySqlDataAdapter

    conn.ConnectionString = connstr

    Try
        If conn.State = ConnectionState.Closed Then
            conn.Open()
        Else
            conn.Close()
            MsgBox("Database Connection Error")
        End If
    Catch ex As Exception
        MsgBox(Err.Description)

        txtBookISBN.Focus()

    End Try

    Dim SqlStatement As String = "INSERT INTO tblIssue(ISBN, Title, BorrowerID, Name, Occupation, BorrowerType, School, DateIssued, DateToBeReturned) VALUES('" & txtBookISBN.Text & "','" & txtBTitle.Text & "','" & txtMemID.Text & "','" & txtMemName.Text & "','" & txtOccupation.Text & "','" & cboBtype.Text & "','" & txtSchool.Text & "','" & DateTimePicker1.Text & "','" & DateTimePicker2.Text & "')"
    Save(SqlStatement)

   Public Sub Save(ByRef SqlStatement As String)
    Dim cmd As MySqlCommand = New MySqlCommand

    With cmd

        .CommandText = SqlStatement
        .CommandType = CommandType.Text
        .Connection = conn
        .ExecuteNonQuery()

    End With

    'conn.Close()
    MsgBox("Success!")

    If MsgBox("Do You Want to Add New Record?", MsgBoxStyle.YesNo) = MsgBoxResult.Yes Then

        txtMemID.Text = ""
        txtMemName.Text = ""
        txtBookISBN.Text = ""
        txtBTitle.Text = ""
        txtOccupation.Text = ""
        cboBtype.Text = ""
        txtSchool.Text = ""

        txtMemID.Focus()

    Else

        Me.Close()

    End If

    conn.Dispose()

End Sub 
```

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:15:50.570

```
If conn.State = ConnectionState.Closed Then
            conn.Open()
        Else
            conn.Close()
            MsgBox("Database Connection Error") 
```

这不会关闭所有打开的连接吗？

# performance - 是否有方法/函数可以获取使用 GCC 编译器编译的 C 程序的代码大小？（应用某些优化技术时可能会有所不同）

> ID：13487113
> 
> 赞同：0
> 
> 时间：2012-11-21T05:46:41.333
> 
> 标签：performance, optimization, gcc, execution-time, code-size

*   我可以在`fseek()`函数的帮助下测量代码大小并将其存储到 shell 变量中吗？
*   是否可以使用`milepost gcc`or提取代码大小、编译时间和执行时间`GNU Profiler tool`？如果是，如何将它们存储到 shell 变量中？

由于我的目标是根据编译时间、执行时间和代码大小找到最佳的优化技术集，因此我期待一些可以返回这些参数的函数。

```
MyPgm=/root/Project/Programs/test.c
gcc -Wall -o1 -fauto-inc-dec $MyPgm -o output
time -f "%e" -o Output.log ./output
while read line;
do
echo -e "$line";
Val=$line
done<Output.log 
```

这会将执行时间存储到变量`Val`中。同样，我想获取代码大小和编译时间的值。我会更喜欢我可以做的事情来完成这个，而不使用外部程序！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T11:20:31.360

对于 linux 上的代码大小，您可以在终端上使用 size 命令。$size 文件名.out

它将给出不同部分的大小。使用文本部分的代码大小。如果您还想考虑全局数据大小，则可以使用 data 和 bss 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T07:29:55.903

您可以使用`size(1)`命令[http://www.linuxmanpages.com/man1/size.1.php](http://www.linuxmanpages.com/man1/size.1.php)

或者打开 ELF 文件，遍历节标题并将所有具有 SHT_PROGBITS 类型和 SHF_EXECINSTR 标志集的节的大小相加。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T09:31:29.713

在非 Linux/非 GNU-utils 系统（您可能既没有 GNU`size`也没有 GNU 工具`readelf`）上，该`nm`程序可用于从目标文件（库/可执行文件）中转储符号信息（包括大小）。语法稍微依赖于系统：

*   [OpenGroup 手册页`nm`](http://pubs.opengroup.org/onlinepubs/000095399/utilities/nm.html)（“可移植子集”）
*   [Linux/BSD 手册页`nm`](http://www.unix.com/man-page/FreeBSD/1/nm/)（GNU 版本）
*   [Solaris 联机帮助页`nm`](http://docs.oracle.com/cd/E26502_01/html/E29030/nm-1.html)
*   [AIX 联机帮助页`nm`](http://pic.dhe.ibm.com/infocenter/aix/v7r1/topic/com.ibm.aix.cmds/doc/aixcmds4/nm.htm)
*   [`nm`在 HP/UX 上使用](http://h21007.www2.hp.com/portal/download/files/prot/files/linker/onlinehelp/linkertoolsparisc.htm#VIEWING-NM)（上面写着“PA-RISC”，但该实用程序在 Itanium 上存在/可用）
*   Windows：没有`nm`，但请参阅：[Microsoft 相当于 nm 命令](https://stackoverflow.com/questions/375273/microsoft-equivalent-of-the-nm-command)

不幸的是，虽然该实用程序几乎在任何地方都可用，但它的输出格式并不像可以移植的那样可移植，因此需要一些特定于系统的脚本。

# c++ - 什么可能导致小型转储反汇编与二进制反汇编不同？

> ID：13487115
> 
> 赞同：4
> 
> 时间：2012-11-21T05:46:52.313
> 
> 标签：c++, disassembly, minidump

我有一个崩溃的小型转储。在崩溃点，有一些看起来不应该成功运行的奇怪代码。就像是：

```
call        AnObject::AFunction 
test        byte ptr [eax],cl 
```

AnObject::AFunction 是返回 bool 的成员函数。所以结果应该以 0 或 1 的形式存储在 eax 中。此时取消对 eax 的引用是没有意义的。

我反汇编了相应的二进制文件，确实，这个函数的代码不同：

```
call        AnObject::AFunction 
test        al, al 
```

为什么 minidump 反汇编代码与实际的二进制反汇编代码*不同？*

# php - 当移动设备访问我的网络服务器时，如何获取它们的屏幕尺寸？

> ID：13487119
> 
> 赞同：2
> 
> 时间：2012-11-21T05:47:01.777
> 
> 标签：php, javascript, jquery, mobile

我想在移动设备点击我服务器上的 URL 时获取它们的屏幕大小。

O 我已经在使用`echo$_SERVER['HTTP_USER_AGENT']`. 如何获取屏幕尺寸？可以通过使用 jQuery/JavaScript 来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T05:56:07.027

在 javascript 中执行，然后将其发送到 php：

```
<script language='JavaScript'>
function detect()
{
alert('Screen resolution is '+screen.width+'x'+screen.height+'.');
}
</script>

<a href='#' onclick='detect();return false;'>Detect Screen Resolution</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T06:26:09.260

[http://www.javascriptkit.com/howto/newtech3.shtml](http://www.javascriptkit.com/howto/newtech3.shtml) 希望这可能对检测有用！

# android - 用于 ldpi、mdpi、hdpi、xhdpi 显示器的 android 初始屏幕尺寸？- 例如：ldpi 为 1024X768 像素

> ID：13487124
> 
> 赞同：116
> 
> 时间：2012-11-21T05:47:35.893
> 
> 标签：android, splash-screen, pixel-density

我必须使用 phonegap 为 android 应用程序设计启动画面（加载时适合屏幕的图像）。我必须设计适合 ldpi、mdpi、hdpi、xhdpi 等 4 种屏幕类型的 4 种尺寸图像。谁能告诉我这些屏幕的确切尺寸（以像素为单位），以便我可以按照该尺寸进行设计？

示例答案：

```
ldpi - 1024X768 px
mdpi  - 111 X 156 px  

 We support ldpi, mdpi, hdpi and xhdpi displays; the following will define splash screens for each specific screen type.

<gap:splash src="splash/android/ldpi.png" gap:platform="android" gap:density="ldpi" />
<gap:splash src="splash/android/mdpi.png" gap:platform="android" gap:density="mdpi" />
<gap:splash src="splash/android/hdpi.png" gap:platform="android" gap:density="hdpi" />
<gap:splash src="splash/android/xhdpi.png" gap:platform="android" gap:density="xhdpi" /> 
```

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2014-11-25T11:47:06.360

## Android 的初始屏幕尺寸

**同时适用于 Cordova（又名 Phonegap）、React-Native 和所有其他开发平台**

```
Format : 9-Patch PNG (recommended)

Dimensions

 - LDPI:
    - Portrait: 200x320px
    - Landscape: 320x200px
 - MDPI:
    - Portrait: 320x480px
    - Landscape: 480x320px
 - HDPI:
    - Portrait: 480x800px
    - Landscape: 800x480px
 - XHDPI:
    - Portrait: 720px1280px
    - Landscape: 1280x720px
 - XXHDPI
    - Portrait: 960x1600px
    - Landscape: 1600x960px
 - XXXHDPI 
    - Portrait: 1280x1920px
    - Landscape: 1920x1280px 
```

**注意：**由于 9-patch 图像的重复区域，不需要准备 XXXHDPI，也可能需要 XXHDPI 大小。另一方面，如果只使用纵向尺寸，则应用尺寸可能会更小。更多图片意味着需要更多空间。

## 注意

我认为所有设备都没有确切的尺寸。我用的是 Xperia Z 5"。如果你开发一个跨平台的 webview 应用程序，你应该考虑很多事情（屏幕是否有软键导航按钮等）。因此，我认为只有一个合适的解决方案。解决方案[是准备一个**9 补丁启动画面**](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)（在下面找到`How to design a new splash screen`标题）。

1.  为上述屏幕尺寸创建启动画面为**9-patch**。**使用.9.png**后缀为您的文件命名
2.  将下面的行添加到您的 config.xml 文件中
3.  如果需要，请添加启动画面插件。
4.  运行你的项目。

就是这样！

**Cordova 特定代码
要在 config.xml 中添加行以用于 9-patch 初始屏幕**

```
<preference name="SplashScreen" value="screen" />
<preference name="SplashScreenDelay" value="6000" />
<platform name="android">
    <splash src="res/screen/android/ldpi.9.png" density="ldpi"/>
    <splash src="res/screen/android/mdpi.9.png" density="mdpi"/>
    <splash src="res/screen/android/hdpi.9.png" density="hdpi"/>
    <splash src="res/screen/android/xhdpi.9.png" density="xhdpi"/> 
</platform> 
```

使用**非**-9-patch 启动屏幕时在 config.xml 中添加行

```
<platform name="android">
    <splash src="res/screen/android/splash-land-hdpi.png" density="land-hdpi"/>
    <splash src="res/screen/android/splash-land-ldpi.png" density="land-ldpi"/>
    <splash src="res/screen/android/splash-land-mdpi.png" density="land-mdpi"/>
    <splash src="res/screen/android/splash-land-xhdpi.png" density="land-xhdpi"/>

    <splash src="res/screen/android/splash-port-hdpi.png" density="port-hdpi"/>
    <splash src="res/screen/android/splash-port-ldpi.png" density="port-ldpi"/>
    <splash src="res/screen/android/splash-port-mdpi.png" density="port-mdpi"/>
    <splash src="res/screen/android/splash-port-xhdpi.png" density="port-xhdpi"/>
</platform> 
```

## 如何设计一个新的启动画面

我将描述一种使用这种方式创建正确启动画面的简单方法。假设我们正在设计一个 1280dp x 720dp - xhdpi（x-large）屏幕。我写了下面的例子；

*   在 Photoshop 中：文件 -> 在新对话框窗口中新建设置您的屏幕

    宽度：720 像素高度：1280 像素

    我猜上述尺寸意味着分辨率为 320 像素/英寸。但要确保您可以在对话窗口中将分辨率值更改为 320。在这种情况下**像素/英寸 = DPI**

    恭喜...您有一个 720dp x 1280dp 的初始屏幕模板。

## 如何生成 9 补丁启动画面

设计完启动画面后，如果要设计 9-Patch 启动画面，则应在每一侧插入 1 个像素间隙。出于这个原因，您应该将画布尺寸的宽度和高度增加 +2 像素（现在您的图像尺寸为 722 x 1282 ）。

我已经按照下面的指示在每一侧留下了空白的 1 像素间隙。
使用 Photoshop 更改画布大小：
- 在 Photoshop 中打开启动画面 png 文件
- 单击图层字段中“背景”名称旁边的锁定图标（保留空白而不是其他颜色，如白色）下面：- 从图像菜单更改画布大小（宽度：720 像素到 722 像素，高度：1280 像素到 1282 像素）。现在，应该在初始屏幕图像的每一侧看到 1 个像素的间隙。
[![在此处输入图像描述](../Images/ab0015cc5e09ab36f85888b6086581ff.png)](https://js.coach/react-native/?search=splash)

然后你可以使用 C:\Program Files (x86)\Android\android-studio\sdk\tools\draw9patch.bat 来转换一个 9-patch 文件。为此，请在 draw9patch 应用程序上打开您的启动画面。您应该定义您的徽标和可扩展区域。请注意以下示例初始屏幕的黑线。黑线的粗细只有 1 px ;) 左侧和顶部的黑线定义了初始屏幕的必须显示区域。完全按照您的设计。右线和底线定义了可添加和可移除的区域（自动重复区域）。

**只需这样做：** 在 draw9patch 应用程序上缩放图像的顶部边缘。单击并拖动鼠标以绘制线条。然后按 shift + 单击并拖动鼠标以擦除线条。

![样本 9-patch 设计](../Images/15fa59d913a0e9f625dd342d53b8fe5b.png)

如果您开发跨平台应用程序（如 Cordova/PhoneGap），您可以找到以下地址几乎所有 mabile OS 启动屏幕尺寸。单击以获取[Windows Phone](https://github.com/phonegap/phonegap/wiki/App-Splash-Screen-Sizes#windows-phone)、[WebOS](https://github.com/phonegap/phonegap/wiki/App-Splash-Screen-Sizes#webos)、[BlackBerry](https://github.com/phonegap/phonegap/wiki/App-Splash-Screen-Sizes#blackberry)、[Bada-WAC](https://github.com/phonegap/phonegap/wiki/App-Splash-Screen-Sizes#bada-wac)和[Bada](https://github.com/phonegap/phonegap/wiki/App-Splash-Screen-Sizes#bada)初始屏幕尺寸。

[https://github.com/phonegap/phonegap/wiki/App-Splash-Screen-Sizes](https://github.com/phonegap/phonegap/wiki/App-Splash-Screen-Sizes)

如果您需要 IOS、Android 等应用程序图标大小，您可以[访问此处](https://github.com/phonegap/phonegap/wiki/App-Icon-Sizes)。

## IOS

```
Format : PNG (recommended)

Dimensions

 - Tablet (iPad)
   - Non-Retina (1x)
     - Portrait: 768x1024px
     - Landscape: 1024x768px
   - Retina (2x)
     - Portrait: 1536x2048px
     - Landscape: 2048x1536px
 - Handheld (iPhone, iPod)
   - Non-Retina (1x)
     - Portrait: 320x480px
     - Landscape: 480x320px
   - Retina (2x)
     - Portrait: 640x960px
     - Landscape: 960x640px
 - iPhone 5 Retina (2x)
   - Portrait: 640x1136px
   - Landscape: 1136x640px
 - iPhone 6 (2x)
   - Portrait: 750x1334px
   - Landscape: 1334x750px
 - iPhone 6 Plus (3x)
   - Portrait: 1242x2208px
   - Landscape: 2208x1242px 
```

* * *

## 回答 #2

> 赞同：108
> 
> 时间：2013-08-09T06:22:05.897

**适用于 Android 移动设备**

LDPI-icon-36x36，splash-426x320（现在有正确的值）

* * *

MDPI-icon-48x48，splash-470x320

* * *

HDPI- 图标 72x72，飞溅- 640x480

* * *

XHDPI- icon-96x96，splash- 960x720

* * *

XXHDPI- 图标- 144x144

全部以像素为单位。

**适用于 Android 平板设备**

```
LDPI:
    Portrait: 200x320px
    Landscape: 320x200px
MDPI:
    Portrait: 320x480px
    Landscape: 480x320px
HDPI:
    Portrait: 480x800px
    Landscape: 800x480px
XHDPI:
    Portrait: 720px1280px
    Landscape: 1280x720px 
```

* * *

## 回答 #3

> 赞同：102
> 
> 时间：2012-11-21T05:54:42.770

由于 Android 没有设置标准尺寸，因此可以有任意数量的不同屏幕尺寸，因此您可以使用 Google 提供的最小屏幕尺寸作为指导。

根据 Google 的统计，大多数 ldpi 显示器是小屏幕，而大多数 mdpi、hdpi、xhdpi 和 xxhdpi 显示器是正常尺寸的屏幕。

*   超大屏幕至少为 960dp x 720dp
*   大屏幕至少为 640dp x 480dp
*   普通屏幕至少为 470dp x 320dp
*   小屏幕至少为 426dp x 320dp

[您可以在此处提供](https://developer.android.com/about/dashboards/index.html#Screens)的 Google 仪表板上查看设备相对大小的统计信息。

可以在[此处](http://developer.android.com/guide/practices/screens_support.html)找到有关多个屏幕的更多信息。

## 9 补丁图像

最好的解决方案是创建一个九块图像，这样图像的边框可以拉伸以适应屏幕的大小，而不会影响图像的静态区域。

[http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2015-02-01T07:46:06.807

*   LDPI：纵向：200 X 320 像素。横向：320 X 200 像素。
*   MDPI：纵向：320 X 480 像素。横向：480 X 320 像素。
*   HDPI：纵向：480 X 800 像素。横向：800 X 480 像素。
*   XHDPI：纵向：720 X 1280 像素。横向：1280 X 720 像素。
*   XXHDPI：纵向：960 X 1600 像素。横向：1600 X 960 像素。
*   XXXHDPI：纵向：1280 X 1920 像素。横向：1920 X 1280 像素。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-11-21T05:51:34.183

*   Xlarge 屏幕至少为 960dp x 720dp
*   列表项大屏幕至少为 640dp x 480dp
*   列表项普通屏幕至少为 470dp x 320dp
*   列表项小屏幕至少为 426dp x 320dp

使用它来创建图像并将它们放在特定的资源文件夹中。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-08-22T19:27:21.540

只需使用这个网站：[http](http://ticons.fokkezb.nl) ://ticons.fokkezb.nl :)

它使您更容易，并直接生成正确的尺寸

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-05-10T09:41:27.517

xlarge 屏幕至少为 960dp x 720dp 布局-xlarge 10" 平板电脑（720x1280 mdpi、800x1280 mdpi 等）

大屏幕至少为 640dp x 480dp 中间平板电脑，例如 Streak (480x800 mdpi)、7" 平板电脑 (600x1024 mdpi)

普通屏幕至少为 470dp x 320dp 布局典型手机屏幕 (480x800 hdpi)

小屏幕至少为 426dp x 320dp 典型手机屏幕（240x320 ldpi、320x480 mdpi 等）

# php - PHP LDAP：如何搜索用户是否在组中？

> ID：13487127
> 
> 赞同：7
> 
> 时间：2012-11-21T05:47:40.230
> 
> 标签：php, ldap

如何使用 php_ldap 模块检查用户是否属于某个组？

我对 ldap 完全陌生，因此有点困惑......

到目前为止，通过谷歌搜索，我想出了这个：

```
$ds=ldap_connect($ldapHost, $ldapPort);
if ($ds) {
    $r=ldap_bind($ds, $ldapRdn, $ldapPassword);
    $filter = "(sAMAccountName=" . $uid . ")";
    $attr = array("memberof");
    $result = ldap_search($ds, $ldapDN, $filter, $attr) or exit("Unable to search LDAP server"); 
```

我不确定这是否正确，因为它是从特定于 AD 的 soemthign 中提取的。问题似乎是 $ldapDN。这就是我要搜索的内容吗？我的团体“定义”是：

```
cn=User,ou=Profiles,ou=App_DEV,ou=ApplicationRights,O=MyCompany.COM 
```

我该怎么做这个检查？

编辑：

这是我在“接受的答案”和“试错”的帮助下找到的解决方案。我认为答案很大程度上取决于您的特定系统。

```
//This is the User group DN
$ldapDN = "cn=User,ou=Profiles,ou=App_DEV,ou=ApplicationRights,O=MyCompany.COM";
$filter = "(uniqueMember=uid=" . $uid . ",ou=Users,O=MYCOMPANY.COM)";
$attr = array('uniqueMember');
$result = ldap_search($ldapConnection, $ldapDN, $filter, $attr):
$entries = ldap_get_entries($ldapConnection, $result);
ldap_unbind($ldapConnection);
return intval($entries["count"]) > 0; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T08:27:57.380

成员信息通常存储在组中 - 以“member”或“memberUid”属性的形式。'member' 表示成员对象的完整 DN（可分辨名称），看起来类似于 'uid=username,ou=users,dc=example,dc=com'。在 memberUid 的情况下，该值将只是“用户名”。

找出目录中正在使用的方法是使用[Apache Directory Studio](http://directory.apache.org/studio/)之类的工具分析组。

除了“member”属性外，AD 还在*用户*记录中存储了 memberOf 属性，其中包含组的 DN。但是大多数目录不这样做，这可能是您的代码无法正常工作的原因。

您正在寻找的是这样的过滤器：

```
// & means "And" the next sibling items: 
// so "find items that have the objectClass of group and a member whose DN is user_dn
(&(objectClass=group)(member=[user_dn])) 
```

或者

```
(&(objectClass=group)(memberUid=[user_uid])) 
```

所以在你的情况下

```
$result = ldap_search(
    $ds,
    'dc=mycompany,dc=com', // The base from which to start your search. (could be an OU too, like 'ou=restricted,dc=mycompany,dc=com')
    '(&(objectClass=group)(member=uid=tom,ou=users,dc=mycompany,dc=com))'
); 
```

或者，如果您的群组使用 memberUid，您可以将过滤器更改为

```
$filter = '(&(objectClass=group)(memberUid=username))'; 
```

然后，$result 应该包含一个以“用户名”为成员的组记录列表。

# javascript - 为什么在 JavaScript 库中使用“严格模式”？

> ID：13487129
> 
> 赞同：24
> 
> 时间：2012-11-21T05:47:49.983
> 
> 标签：javascript, ecmascript-5

> **可能重复：**
> [“use strict”在 JavaScript 中做了什么，其背后的原因是什么？](https://stackoverflow.com/questions/1335851/what-does-use-strict-do-in-javascript-and-what-is-the-reasoning-behind-it)

实际上，我知道`use strict`JavaScript 在 JavaScript 中的作用是
[什么：“use strict”在 JavaScript 中做了什么，其背后的原因是什么？](https://stackoverflow.com/questions/1335851/what-does-use-strict-do-in-javascript-and-what-is-the-reasoning-behind-it)

但我不明白**为什么**我们应该`strict`在 JavaScript 库中使用模式？我的意思是使用它有什么好处？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T06:08:03.307

您链接的问题、它的答案以及它提供的参考资料列出了使用严格模式的一系列原因。

让我只说其中一个：[隐式全局变量的恐怖](http://blog.niftysnippets.org/2008/03/horror-of-implicit-globals.html)¹

非严格代码：

```
function foo(a) {
    var myvar;

    myar = a * 4;

    // ...

    return myvar;
} 
```

现在，这段代码：

```
console.log(foo(2)); 
```

...应该记录“8”，对吗？但它没有，它总是记录“未定义”：

```
function foo(a) {
    var myvar;

    myar = a * 4;

    // ...

    return myvar;
}
console.log(foo(2));
```

更重要的是，它默默地创建了一个名为`myar`. 为什么？因为我的代码中有错字（我在将其设置为 时错过了`v`in ）。`myvar``a * 4`

与之比较：

```
function foo(a) {
    "use strict";
    var myvar;

    myar = a * 4;

    // ...

    return myvar;
}
console.log(foo(2));
```

现在，我得到了一个很好的错误消息，而不是一个奇怪的返回值和一个全局变量被创建：`ReferenceError: "myar" is not defined`

现在，可以使用 lint 工具来完成严格模式的特定方面。但是，当您只是尝试修复某些内容并在编辑器和浏览器之间跳转时，您并不总是在您的编码工具链中使用 lint 工具。所以当浏览器帮助你时很好。

另外，严格模式执行 lint 工具无法完成的事情，例如 disallowing 、更改未设置它的函数调用`with`的默认值等。`this`

* * *

¹ *（这是我贫血的小博客上的一篇文章）*

# command-prompt - command prompt xcopy command usage

> ID：13487131
> 
> 赞同：3
> 
> 时间：2012-11-21T05:47:55.997
> 
> 标签：command-prompt

I am trying to copy all the files from one folder to the other using cmd as

`xcopy C:\Users\computer\Desktop\Source C:\Users\computer\Desktop\Destination`

for the next time when I use the above command it asks whether to Overwrite Yes/No/All, so here is my question:

Is there any command within xcopy where it automatically overwrites all the files within the Destination folder from Source folder?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:25:32.607

You are looking for the `/y` switch

```
xcopy C:\Users\computer\Desktop\Source C:\Users\computer\Desktop\Destination /y 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:23:42.360

Here is the help (French Windows Seven), from cmd.exe.

See /Y argument

```
Microsoft Windows [version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation. Tous droits réservés.

C:\>help xcopy

Copie des fichiers et des arborescences de répertoires.

XCOPY source [destination] [/A | /M] [/D[:date]] [/P] [/S [/E]] [/V] [/W]
                           [/C] [/I] [/Q] [/F] [/L] [/G] [/H] [/R] [/T] [/U]
                           [/K] [/N] [/O] [/X] [/Y] [/-Y] [/Z] [/B] [/J]
                           [/EXCLUDE:fich1[+fich2][+fich3]...]

 source       Spécifie le ou les fichiers à copier.
 destination  Spécifie l'emplacement et/ou le nom de nouveaux fichiers.
 /A           Copie uniquement les fichiers ayant l'attribut archive, ne
              modifie pas l'attribut.
 /M           Copie uniquement les fichiers ayant l'attribut archive,
              désactive l'attribut archive.
 /D:j-m-a   Copie les fichiers modifiés à partir de la date spécifiée.
              Si aucune date n'est donnée, copie uniquement les fichiers dont
              l'heure source est plus récente que l'heure de destination.
 /EXCLUDE:fich1[+fich2][+fich3]...
              Spécifie une liste de fichiers contenant des chaînes. Chaque
              chaîne doit être placée sur une ligne dans le fichier.
              Lorsque l'une des chaînes est trouvée dans le chemin d'accès
              absolu du fichier devant être copié, ce fichier est exclu de la
              copie. Par exemple, spécifier une chaîne telle que \obj\
              ou .obj exclura respectivement tous les fichiers situés sous
              le répertoire obj ou tous les fichiers dont l'extension
              est .obj.
 /P           Confirmer la création de chaque fichier
              de destination.
 /S           Copie les répertoires et sous-répertoires à l'exception des
              répertoires vides.
 /E           Copie les répertoires et sous-répertoires, y compris les
              répertoires vides.
              Identique à /S /E. Peut être utilisé pour modifier /T.
 /V           Vérifie la taille de chaque nouveau fichier.
 /W           Vous demande d'appuyer sur une touche avant la copie.
 /C           Continuer la copie même si des erreurs se produisent.
 /I           Si la destination n'existe pas et que plus d'un fichier est
              copié, considérer la destination comme devant être
              un répertoire.
 /Q           N'affiche pas les noms de fichiers lors de la copie.
 /F           Affiche les noms de source et de destination complets lors
              de la copie.
 /L           Affiche les fichiers devant être copié.
 /G           Permet la copie des fichiers chiffrés vers des destinations qui
              ne prennent pas en charge le chiffrement.
 /H           Copie également les fichiers cachés et les fichiers système.
 /R           Remplace les fichiers en lecture seule.
 /T           Crée la structure de répertoires mais ne copie pas
              les fichiers.
              N'inclut pas les répertoires ou sous-répertoires vides. /T /E
              incluent les répertoires et sous-répertoires vides.
 /U           Copie seulement les fichiers existants déjà dans la
              destination.
 /K           Copie les attributs. La commande normale Xcopy rétablira les
              attributs de lecture seule.
 /N           Copie en utilisant les noms courts générés.
 /O           Copie les fichiers d'appartenance et les informations d'ACL.
 /X           Copie les paramètres d'audit de fichiers (sous-entend /O).
 /Y           Supprime la demande de confirmation de remplacement de
              fichiers de destination existants.
 /-Y          Provoque la demande de confirmation de remplacement
              d'un fichier de destination existant.
 /Z           Copie les fichiers du réseau en mode redémarrable.
 /B           Copie le lien symbolique et non pas la cible du lien.
 /J           Copie avec E/S sans mémoires tampons. Recommandé pour les gros fichiers.

Le commutateur /Y peut être défini dans la variable d'environnement COPYCMD.
Il peut être remplacé par /-Y dans la ligne de commande. 
```

# eclipse - Gradle eclipse 类路径 - 在 SNAPSHOT 和项目依赖项之间切换

> ID：13487145
> 
> 赞同：3
> 
> 时间：2012-11-21T05:48:23.910
> 
> 标签：eclipse, gradle

我们的 Java 项目中有多个模块，每个模块都将 SNAPSHOT jar 文件发布到 Nexus 存储库。所有子模块都直接依赖于 SNAPSHOT jar 文件。

在开发过程中，我们希望依赖 Eclipse 项目而不是 SNAPSHOT jar。所以我们引入了一个在依赖项之间切换的标志，如下所示。

```
if(System.properties.'setupProject'){
    compile project(':Core')
    compile project(':Module1')
    compile project(':Module2')
}else{
    compile 'com.test:core:0.1-SNAPSHOT'
    compile 'com.test:module1:0.1-SNAPSHOT'
    compile 'com.test:module2:0.1-SNAPSHOT'
} 
```

执行以下命令会按预期生成 .classpath 文件。

> gradle eclipse -DsetupProject=true

有一个更好的方法吗？我们可以使用 Gradle 配置来实现相同的目标吗？我找不到同样的好例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:57:22.543

目前，这是要走的路。您可能会对此进行更多调整，而不是使用系统属性将项目标记为可用，您可以检查项目文件夹是否可用（项目已签出）

干杯，勒内

# ruby-on-rails - warble，无法加载此类文件——spec/rake/spectask 错误

> ID：13487149
> 
> 赞同：0
> 
> 时间：2012-11-21T05:48:34.660
> 
> 标签：ruby-on-rails, jrubyonrails, warbler

我对 Ruby、Jruby 和 Rails 等非常陌生。我正在尝试使用 warble 将 jruby 应用程序部署到 tomcat 服务器。我在 Windows 机器上，下面是我从项目的根目录运行**warble时遇到的错误。**我为这个问题做了很多谷歌，但要么解决方案不起作用，要么它不够详细，新手无法理解。非常感谢任何帮助或建议。

```
> warble 

Ruby/Ruby193/lib/ruby/1.9.1/rake/rdoctask.rb
warble aborted!
cannot load such file -- spec/rake/spectask 
```

以下是已安装的 Ruby gem。

```
gem list --local

*** LOCAL GEMS ***

actionmailer (2.3.5)
actionpack (2.3.5)
activerecord (2.3.5)
activeresource (2.3.5)
activesupport (2.3.5)
bigdecimal (1.1.0)
diff-lcs (1.1.3)
hoe (3.3.0)
i18n (0.4.0)
io-console (0.3)
jruby-jars (1.7.0)
jruby-rack (1.1.10)
json (1.5.4)
minitest (2.5.1)
rack (1.0.1)
rails (2.3.5)
rake (0.9.2.2)
rdoc (3.9.4)
rspec (2.12.0)
rspec-core (2.12.0)
rspec-expectations (2.12.0)
rspec-mocks (2.12.0)
rubyzip (0.9.9)
test-unit (2.5.2, 1.2.3)
warbler (1.3.6)

jruby -S gem list --local

*** LOCAL GEMS ***

actionmailer (3.2.9)
actionpack (3.2.9)
activemodel (3.2.9)
activerecord (3.2.9)
activerecord-jdbc-adapter (1.2.2.1)
activerecord-jdbcmysql-adapter (1.2.2.1)
activeresource (3.2.9)
activesupport (3.2.9)
arel (3.0.2)
builder (3.0.4)
bundler (1.2.2)
erubis (2.7.0)
hike (1.2.1)
i18n (0.6.1)
jdbc-mysql (5.1.13)
journey (1.0.4)
jruby-win32ole (0.8.5)
json (1.7.5 java)
mail (2.4.4)
mime-types (1.19)
multi_json (1.3.7)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.2)
rails (3.2.9)
railties (3.2.9)
rake (0.9.2.2)
rdoc (3.12)
sprockets (2.2.1)
test-unit (2.5.2)
thor (0.16.0)
tilt (1.3.3)
treetop (1.4.12)
tzinfo (0.3.35) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:49:10.827

尝试`jruby -S warble`

warble 指向默认的 ruby

您的默认 ruby​​ 未设置为 jruby。

# c# - 将变量形式传递给类并从另一个形式中检索它

> ID：13487160
> 
> 赞同：-1
> 
> 时间：2012-11-21T05:49:21.993
> 
> 标签：c#

C# 情况....我已经使用 form1 为另一个类的变量设置了一个值...

**班级**

```
 public int _a;
        public int a
                {
                    get
                    {
                        return _a;
                    }
                    set
                    {
                        _a = value;
                    }
} 
```

**表格 1**

```
 private void btnchangevalue_Click(object sender, EventArgs e)
        {
class x = new class();
x.a = 1;
} 
```

**表格 2**

```
private void btngetvalue_Click(object sender, EventArgs e)
            {
    class x = new class();
   messagebox.show(x.a);
    } 
```

问题是当我试图检索它时，我设置的类变量总是变为**空。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:01:47.320

您应该使用**静态变量**

静态变量是静态分配的变量，其生命周期贯穿程序的整个运行。

`public static int a`

发生的事情是每次创建表单对象时都会创建新变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:05:45.650

好吧，我认为这是因为您每次都在实例化一个新的类实例....创建一个新的类实例一次，然后在单击按钮时使用相同的实例。

```
class x = new class();
private void btnchangevalue_Click(object sender, EventArgs e)
{
    x.a = 1;
}

private void btngetvalue_Click(object sender, EventArgs e)
{
    messagebox.show(x.a);
} 
```

# javascript - 如何使用 JavaScript 更新 cookie 过期时间？

> ID：13487161
> 
> 赞同：2
> 
> 时间：2012-11-21T05:49:32.237
> 
> 标签：javascript

我想要 cookie 过期时间的滑动时间。这可以通过获取 cookie 并再次设置新的过期时间并删除以前的 cookie 来完成。但是，我想知道比这更好的方法。我需要一些好的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T05:54:37.667

通过“滑动时间”，我假设您希望 cookie 在访问者重新加载页面时自行更新。每次页面加载时（即每次执行 JavaScript 代码）只需重置 cookie。

[https://developer.mozilla.org/en-US/docs/DOM/document.cookie](https://developer.mozilla.org/en-US/docs/DOM/document.cookie)

但是，如果您正在寻找具有更大容量的更长期的东西，那么我建议您使用`localStorage`：

[https://developer.mozilla.org/en-US/docs/DOM/Storage#localStorage](https://developer.mozilla.org/en-US/docs/DOM/Storage#localStorage)

# php - 如何在drupal中找到当前页面的调用者页面

> ID：13487165
> 
> 赞同：0
> 
> 时间：2012-11-21T05:50:12.897
> 
> 标签：php, drupal-6

我如何在drupal 6中找到当前页面的调用者页面的url。
是否有任何函数或类？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T05:56:09.377

用于`$_SERVER['HTTP_REFERER']`获取调用者页面的 url。但它有一些错误。

`The address of the page (if any) which referred the user agent to the current page. This is set by the user agent. Not all user agents will set this, and some provide the ability to modify HTTP_REFERER as a feature. In short, it cannot really be trusted.`

# java - Android：将字符串上传到服务器

> ID：13487167
> 
> 赞同：1
> 
> 时间：2012-11-21T05:50:18.040
> 
> 标签：java, android, web, webserver, httpclient

我试图让我的用户能够报告我的 android 应用程序自动捕获到我的服务器的小错误。它没什么大不了的，只是一个小文本框和发送按钮。

它应该将 3 个字符串（错误、可选的用户描述和时间）发送到我网站上专门用于捕获这些错误的文件。问题是，我完全不知道该怎么做。我只知道如何让我的应用程序从我的网站读取信息，但不知道相反。

我必须在我的网站上有一个特殊的脚本吗？JSON字符串是必需的吗？我需要将字符串保存在那里。（不是暂时的）我有点新手所以任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:16:58.603

您只需通过 http 将值发布到服务器上的 php 脚本，该脚本会将这些值保存在您的文件或数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:46:26.190

**-**必须`script`在您的服务器上运行，例如：`php script`.

**-**它实际上是在服务器上发布的**Web 服务**，以便客户端可以访问它。

**-**然后你需要对`HTTP Post`服务器做一个，它最好`NameValuePair`与它一起使用来发送数据。

**这是我做 HTTP POST 的代码：**

```
public String postData(String url, String xmlQuery) {

        final String urlStr = url;
        final String xmlStr = xmlQuery;
        final StringBuilder sb = new StringBuilder();

        Thread t1 = new Thread(new Runnable() {

            public void run() {

                HttpClient httpclient = MySSLSocketFactory.getNewHttpClient();

                HttpPost httppost = new HttpPost(urlStr);

                try {

                    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(
                            1);
                    nameValuePairs.add(new BasicNameValuePair("xml", xmlStr));

                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                    HttpResponse response = httpclient.execute(httppost);

                    Log.d("Vivek", response.toString());

                    HttpEntity entity = response.getEntity();
                    InputStream i = entity.getContent();

                    Log.d("Vivek", i.toString());
                    InputStreamReader isr = new InputStreamReader(i);

                    BufferedReader br = new BufferedReader(isr);

                    String s = null;

                    while ((s = br.readLine()) != null) {

                        Log.d("YumZing", s);
                        sb.append(s);
                    }

                    Log.d("Check Now", sb + "");

                } catch (ClientProtocolException e) {

                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                } /*
                 * catch (ParserConfigurationException e) { // TODO
                 * Auto-generated catch block e.printStackTrace(); } catch
                 * (SAXException e) { // TODO Auto-generated catch block
                 * e.printStackTrace(); }
                 */
            }

        });

        t1.start();
        try {
            t1.join();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        System.out.println("Getting from Post Data Method " + sb.toString());

        return sb.toString();
    } 
```

**////////////////////////////////////////////////////////////////////////// ///////////////**

**服务器端php代码：**

```
<?php

require_once(ROOT.'/lab/lib/xyz_api_int.php');

try {

    //setup the sdk
    $api = YumzingApiInt::_get(
        Config::get('api_int','url'),
        Config::get('api_int','key'),
        Config::get('api_int','secret')
    );

    //connect to the api
    $api->connect();

    //check our token
    echo $api->getToken();

} catch(Exception $e){
    sysError($e->getMessage());
} 
```

# php - 同一php页面上的两个或多个html表单执行不同的任务

> ID：13487168
> 
> 赞同：0
> 
> 时间：2012-11-21T05:50:19.613
> 
> 标签：php, html

我在同一页面上有两个或多个 HTML 表单执行不同的任务，我如何区分在 Php 中单击按钮时要调用哪一个。还是我需要使用功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:12:00.523

```
if(isset($_POST['submit_1'])){do this}
elseif(isset($_POST['submit_2'])){do that}
else{ echo 'form data';} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T06:17:57.280

这是一个想法：

```
<form name="Form1" method="post" action="<?php $_SERVER[ 'PHP_SELF' ]; ?>" enctype="multipart/form-data" accept-charset="UTF-8" id="Form1">
  <input class="button-primary" name="Submit1" type="submit" value="" />
</form>

<form name="Form2" method="post" action="<?php $_SERVER[ 'PHP_SELF' ]; ?>" enctype="multipart/form-data" accept-charset="UTF-8" id="Form2">
  <input class="button-primary" name="Submit2" type="submit" value="" />
</form>

<?php
if ( $_SERVER[ "REQUEST_METHOD" ] == 'POST' ) {
  if ( isset ( $_POST[ 'Submit1' ] ) ) {
    // Get Form1
  }

  if ( isset ( $_POST[ 'Submit2' ] ) ) {
    // Get Form2
  }

}

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T06:23:33.550

为每个表单的提交按钮使用不同的名称属性，如果您正在使用操作，则在 php 中使用`if($_POST['submit1'] == 'submit1')`第一个表单的提交按钮单击第二个。`if($_POST['submit2'] == 'submit2')``post`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T06:08:45.570

您可以使用 GET 变量来传递表单。

在您的第一个表单上，您可以将表单设置`action`为`processingPage.php?form=1`. 第二种形式可以是`processingPage.php?form=2`

然后，在 php 中，你可以这样做

```
if($_GET['form'] == "1")
{
FORM 1 STUFF HERE
}
else if($_GET['form'] == "2")
{
FORM 2 STUFF HERE
} 
```

# php - 使用 PHP 在 DIV 中截取图像

> ID：13487169
> 
> 赞同：1
> 
> 时间：2012-11-21T05:50:27.710
> 
> 标签：php, javascript

我有一个网站，用户可以在其中设计自己的产品。我需要一个 PHP 函数来从设计的产品中自动生成 JPG 或 PNG 的图像/屏幕截图。屏幕截图应该是用户设计的产品。如果它是一个 JavaScript 实用程序（而不是 PHP），那也可以。

我什么也找不到。我应该去哪里看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T05:53:12.400

PHP 是一种服务器端语言，它需要是 javascript。你可以试试这个，但它可能不准确。

[http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/)

# c# - 不可数 到字典

> ID：13487170
> 
> 赞同：2
> 
> 时间：2012-11-21T05:50:30.050
> 
> 标签：c#, linq, c#-4.0

我正在使用以下代码将字符串数组拆分为列表。

```
private List<string> GenerateTerms(string[] docs)
    {
        return docs.SelectMany(doc => ProcessDocument(doc)).Distinct().ToList();
    }

    private IEnumerable<string> ProcessDocument(string doc)
    {
        return doc.Split(' ')
                  .GroupBy(word => word)
                  .OrderByDescending(g => g.Count())
                  .Select(g => g.Key)
                  .Take(1000);
    } 
```

我想要做的是将返回的列表替换为

```
Dictionary <string, int> 
```

即而不是返回列表，我想返回字典

谁能帮忙？？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T05:57:53.120

```
string doc = "This is a test sentence with some words with some words repeating like: is a test";
var result = doc.Split(' ')
                   .GroupBy(word => word)
                   .OrderByDescending(g=> g.Count())
                   .Take(1000)
                   .ToDictionary(r => r.Key ,r=> r.Count()); 
```

**编辑：**

我相信您正在寻找从字符串数组中获取最终字典，基于单词作为键并将它们的最终计数作为值。由于字典不能包含重复值，因此您不需要使用`Distict`. 您必须将方法重写为：

```
private Dictionary<string,int> GenerateTerms(string[] docs)
{
    List<Dictionary<string, int>> combinedDictionaryList = new List<Dictionary<string, int>>();
    foreach (string str in docs)
    {
        //Add returned dictionaries to a list
        combinedDictionaryList.Add(ProcessDocument(str));
    }
    //return a single dictionary from list od dictionaries
    return combinedDictionaryList
            .SelectMany(dict=> dict)
            .ToLookup(pair => pair.Key, pair => pair.Value)
            .ToDictionary(group => group.Key, group => group.Sum(value => value));
}

private Dictionary<string,int> ProcessDocument(string doc)
{
    return doc.Split(' ')
            .GroupBy(word => word)
            .OrderByDescending(g => g.Count())
            .Take(1000)
            .ToDictionary(r => r.Key, r => r.Count());
} 
```

然后你可以这样称呼它：

```
string[] docs = new[] 
    {
        "This is a test sentence with some words with some words repeating like: is a test",
        "This is a test sentence with some words with some words repeating like: is a test",
        "This is a test sentence with some words",
        "This is a test sentence with some words",
    };

Dictionary<string, int> finalDictionary = GenerateTerms(docs); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T06:28:17.093

尝试这个：

```
string[] docs = {"aaa bbb", "aaa ccc", "sss, ccc"};        

var result = docs.SelectMany(doc => doc.Split())
                 .GroupBy(word => word)
                 .OrderByDescending(g => g.Count())
                 .ToDictionary(g => g.Key, g => g.Count())
                 .Take(1000); 
```

**编辑：**

```
var result = docs.SelectMany(
        doc => doc.Split()
            .GroupBy(word => word)
            .OrderByDescending(g => g.Count())
            .Take(1000))
    .Select(g => new {Word = g.Key, Cnt = g.Count()})
    .GroupBy(t => t.Word)
    .ToDictionary(g => g.Key, g => g.Sum(t => t.Cnt)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T05:54:43.583

没有任何额外的麻烦，以下应该可以工作。

```
return doc.Split(' ')
          .GroupBy(word => word)
          .ToDictionary(g => g.Key, g => g.Count()); 
```

根据您的情况，通过 等对其进行定制`Take`。`OrderBy`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T05:55:15.437

尝试这样的事情：

```
 var keys = new List<string>();
    var values = new List<string>();
    var dictionary = keys.ToDictionary(x => x, x => values[keys.IndexOf(x)]); 
```

# c++ - 用于 IIS 的自定义日志记录模块

> ID：13487174
> 
> 赞同：3
> 
> 时间：2012-11-21T05:50:56.500
> 
> 标签：c++, iis, logging, module

我有一个应用程序将其 COM 方法公开为

```
Sub InsertLog(ByVal time As Date, ByVal siteName As String, ByVal requestPath As String, ByVal remoteHost As String, ByVal referrer As String, ByVal outBytes As Long Long, ByVal inBytes As Long Long) 
```

我尝试使用 [ILogPlugin](http://msdn.microsoft.com/en-us/library/ms524607%28v=vs.90%29.aspx)制作自定义日志记录模块，它将数据传输到此方法。但是我无法在我的 IIS 7.5 上收到任何事件。

我必须为 IIS 6 及更高版本实现这个模块，并且它必须支持 FTP 和 HTTP(S) 的日志记录。我知道全局级 HTTP 模块，但我真的怀疑它在 IIS6 和 FTP 上的工作。我也不知道如何从这些 HTTP 模块中检索日志信息。

要求您提供任何链接甚至是更小的指导以实现目标。我必须用 C++ 对其进行编程。

谢谢你的支持....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T01:45:43.783

iis 7.5 必须配置自定义日志模块，否则你实现 ilogplugin 的 com 对象将不会被调用

有关更多信息，请参阅以下内容

[http://www.iis.net/learn/get-started/introduction-to-iis/iis-modules-overview](http://www.iis.net/learn/get-started/introduction-to-iis/iis-modules-overview)

和

[http://support.microsoft.com/kb/259552](http://support.microsoft.com/kb/259552)

此处描述了 iis 7.5 的推荐方法[http://msdn.microsoft.com/en-us/library/ms689225(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms689225(v=vs.90).aspx)

# ejb-3.1 - EJB 3.1 查找返回空远程对象

> ID：13487175
> 
> 赞同：0
> 
> 时间：2012-11-21T05:50:56.793
> 
> 标签：ejb-3.1

我正在使用部署在*WAS 8上的**EJB3*。我正在使用*Context.lookup*从我的*WEB 服务器*访问这个 EJB 。*此查找工作正常，并且整个应用程序在WAS*重新启动后首次正常工作。但是，当我第二次运行该应用程序时，确实会发生查找，但会返回一个 NULL 值。我在*WAS*上没有收到任何异常或错误或任何日志。

 ***同样，如果我重新启动*WAS*，应用程序运行良好。

任何人都可以请指导问题可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:42:34.150

远程引用是无连接代理。如果应用程序被重新部署/取消部署或存在网络故障，则代理无效。

您可以使用 ServiceLocator 模式来缓存远程对象的引用。当它们变得无效时，您可以删除并再次使用 JNDI 查找重新创建它们。***

# google-maps - TabPanel 中的谷歌地图

> ID：13487179
> 
> 赞同：0
> 
> 时间：2012-11-21T05:51:16.187
> 
> 标签：google-maps, sencha-touch, tabpanel

我们可以在sencha touch的Tabpanel项目中使用谷歌地图吗..我正在尝试这个..

```
 title:'Map',
          items:[              
                 {
                   xtype:'map',
                   useCurrentLocation:true,
                 }, 
```

我添加了一个参考..

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true">
</script> 
```

请让我知道如何处理这个谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:06:35.253

是的。请参考 API 文档：[http ://docs.sencha.com/touch/2-1/#!/api/Ext.Map](http://docs.sencha.com/touch/2-1/#!/api/Ext.Map)

只需将 script 标签添加到您的 index.html 页面中，然后使用您显示的代码添加您的组件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T11:05:05.247

```
 <style type="text/css">
           .tabGroup {
        font: 10pt arial, verdana;
        width: auto;
        height: auto;
    }

    /* Configure the radio buttons to hide off screen */
    .tabGroup > input[type="radio"] {
        position: absolute;
        left:-100px;
        top:-100px;
    }

    /* Configure labels to look like tabs */
    .tabGroup > input[type="radio"] + label {
        /* inline-block such that the label can be given dimensions */
        display: inline-block;

        /* A nice curved border around the tab */
        border: 1px solid #ddd;
        border-radius: 5px 5px 0 0;
        -moz-border-radius: 5px 5px 0 0;
        -webkit-border-radius: 5px 5px 0 0;

        /* the bottom border is handled by the tab content div */
        border-bottom: 0;

        /* Padding around tab text */
        padding: 5px 10px;

        /* Set the background color to default gray (non-selected tab) */
        background-color:#ddd;
    }

    /* Focused tabs need to be highlighted as such */
    .tabGroup > input[type="radio"]:focus + label {
        border:1px solid #ddd;
    }

    /* Checked tabs must be white with the bottom border removed */
    .tabGroup > input[type="radio"]:checked + label {
        background-color:white;
        font-weight: bold;
        border-bottom: 1px solid white;
        margin-bottom: -1px;
    }

    /* The tab content must fill the widgets size and have a nice border */
    .tabGroup > div {
        display: none;
        height: 100%;
    }

    /* This matchs tabs displaying to thier associated radio inputs */
    .tab1:checked ~ .tab1, .tab2:checked ~ .tab2, .tab3:checked ~ .tab3 {
        display: block;
    }

       </style>

   <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
       <script>
          var directionDisplay;
          var directionsService = new google.maps.DirectionsService();
          var map;
          var marker;

          function initialize() {
            directionsDisplay = new google.maps.DirectionsRenderer();
            var directionend = new google.maps.LatLng(51.68830303062416, 5.312845717288155);

            var mapOptions = {
              zoom:15,
              mapTypeId: google.maps.MapTypeId.ROADMAP,
              center: directionend
            }

            map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

        marker = new google.maps.Marker({
              map:map,
              draggable:true,
              animation: google.maps.Animation.DROP,
              position: directionend
            });

            directionsDisplay.setMap(map);
          }

          function calcRoute() {
            var start = document.getElementById('direction-from').value;
            var end = document.getElementById('direction-end').value;
            var request = {
                origin:start,
                destination:end,
                travelMode: google.maps.DirectionsTravelMode.DRIVING
            };
            directionsService.route(request, function(response, status) {
              if (status == google.maps.DirectionsStatus.OK) {
                directionsDisplay.setDirections(response);
              }
            });
          }
        </script>

    <div class="tabGroup">
        <input type="radio" name="tabGroup1" id="rad1" class="tab1" checked="checked"/>
        <label for="rad1">Image Gallery</label>

        <input type="radio" name="tabGroup1" id="rad2" class="tab2" onclick="initialize()"/>
        <label for="rad2">Location Map</label>

        <div class="tab1">
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
        </div>
        <div class="tab2">
        <div id="map-canvas" style="width: 100%; height: 450px;"><p style="text-align:center; margin-top:50px;">Loading..</p></div>
        <input type="hidden" name="direction_end" id="direction-end" value="Bangalore">
        <input type="text" name="direction_from" id="direction-from">
        <button id="get-direction" onclick="calcRoute()">Get Direction</button>
        </div>
    </div>
    **<input type="radio" name="tabGroup1" id="rad2" class="tab2" onclick="initialize()"/>** this is very important line.thanks.. 
```

# python - 如何从流中写入python中的共享内存？

> ID：13487181
> 
> 赞同：2
> 
> 时间：2012-11-21T05:51:28.630
> 
> 标签：python, sockets, shared-memory

我有一个来自几台服务器的进程，每秒通过 udp 向我的本地端口 2222 发送数据。

我想读取这些数据并将其写入共享内存，这样就可以有其他进程从共享内存中读取数据并对其执行操作。

我一直在阅读`mmap`，似乎我必须使用一个文件......我似乎无法理解为什么。

我有一个`a.py`从套接字读取数据的设备，但是如何将其写入 shm？

一旦写完，我需要写`b.py`, `c.py`,`d.py`等来读取相同的 shm 并对它做一些事情。

任何帮助或代码片段都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:15:54.353

`mmap`不采用文件名，而是采用文件描述符。它执行所谓的内存映射，即将进程的虚拟内存空间中的页面与由文件描述符表示的类文件对象的部分相关联。这是一个非常强大的操作，因为它允许您：

*   简单地将文件的内容作为内存中的数组访问；
*   访问特殊 I/O 硬件的内存，例如声卡的缓冲区或图形适配器的帧缓冲区（这是可能的，因为 Unix 中的文件描述符是抽象的，它们也可以引用设备节点而不是常规文件）；
*   通过执行同一对象的共享映射在进程之间共享内存。

在 Unix 上使用共享内存的旧的 pre-POSIX 方法是使用 System V IPC 共享内存。首先，必须使用创建共享内存段`shmget(2)`，然后使用 将其附加到进程`shmat(2)`。SysV 共享内存段（以及其他 IPC 对象）没有名称，而是数字 ID，因此`ftok(3)`提供了特殊的哈希函数，它将路径名字符串和项目 ID 整数的组合转换为数字键 ID，但冲突是可能的。

使用共享内存的现代 POSIX 方法是用 来打开一个类似文件的内存对象，用`shm_open(2)`调整它的大小，`ftruncate(2)`然后再调整到`mmap(2)`它。在这种情况下，内存映射的作用类似于`shmat(2)`来自 SysV IPC API 的调用，并且截断是必要的，因为`shm_open(2)`创建初始大小为零的对象。

（这些是 C API 的一部分；Python 模块提供的或多或少是围绕这些调用的薄包装器，并且通常具有几乎相同的签名）

也可以通过在所有需要共享内存的进程中对同一个常规文件进行内存映射来获得共享内存。事实上，Linux 通过在特殊`tmpfs`文件系统上创建文件来实现 POSIX 共享内存操作。驱动程序通过`tmpfs`将保存文件内容的页面直接映射到正在执行的进程的地址空间来实现非常轻量级的内存映射`mmap(2)`。由于`tmpfs`其行为与普通文件系统一样，您可以使用`ls`,`cat`和其他 shell 工具检查其内容。您甚至可以通过这种方式创建共享内存对象或修改现有对象的内容。文件中的区别`tmpfs`一个常规的文件系统文件是后者被持久化到存储介质（硬盘、网络存储、闪存驱动器等），并且偶尔会刷新到这个存储介质，而前者完全存在于 RAM 中。Solaris 还提供类似的基于 RAM 的文件系统，也称为`tmpfs`.

在现代操作系统中，内存映射被广泛使用。可执行文件是内存映射的，以提供这些页面的内容，这些页面包含可执行代码和静态数据。共享库也是内存映射的。这节省了物理内存，因为这些映射是共享的，例如，保存可执行文件或共享库的内容的相同物理内存被映射到每个进程的虚拟内存空间中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:48:32.047

First, note that what you're trying to build will require more than just shared memory: it's all well if `a.py` writes to shared memory, but how will `b.py` know when the memory is ready and can be read from? All in all, it is often simpler to solve this problem by connecting the multiple processes not via shared memory, but through some other mechanism.

(The reason for why `mmap` usually needs a file name is that it needs a *name* to connect the several processes. Indeed, if `a.py` and `b.py` both call `mmap()`, how would the system know that these two processes are asking for memory to be shared between them, and not some unrelated `z.py`? Because they both `mmap`ed the same file. There are also Linux-specific extensions to give a name that doesn't correspond to a *file* name, but it's more a hack IMHO.)

Maybe the most basic alternative mechanism is *pipes:* they are usually connected with the help of the shell when the programs are started. That's how the following works (on Linux/Unix): `python a.py | python b.py`. Any output that `a.py` sends goes to the pipe, whose other end is the input for `b.py`. You'd write `a.py` so that it listens to the UDP socket and writes the data to stdout, and `b.py` so that it reads from stdin to process the data received. If the data needs to go to several processes, you can use e.g. named pipes, which have a nice (but Bash-specific) syntax: `python a.py >(python b.py) >(python c.py)` will start `a.py` with two arguments, which are names of pseudo-files that can be opened and written to. Whatever is written to the first pseudo-file goes as input for `b.py`, and similarly what is written to the second pseudo-file goes as input for `c.py`.

# android - Android 应用程序自动更新

> ID：13487183
> 
> 赞同：0
> 
> 时间：2012-11-21T05:51:33.450
> 
> 标签：android

我创建了简单的 Android 应用程序来发送电子邮件，应用程序工作正常。我创建了一项服务来下载和安装 Android 应用程序表单服务器[我不想将该应用程序放在 Marketplace 中]

我已经更新了未来的 Android 应用程序并构建为 apk 然后将其上传到服务器

**问题是在设备中，如果我在应用程序中做了一些更改，我需要更新该应用程序**

给出一些有用的想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T06:02:43.183

你必须在你的服务器上设置一个 API，它会告诉你的应用程序是否有新的更新可用。必须定期检查此 API。如果有新的更新，则可以下载并安装它并卸载原来的更新。

另一种方法是使用[Google Cloud Messaging](https://developer.android.com/guide/google/gcm/index.html)。您可以对其进行设置，以便您的应用程序在更新可用时从您的服务器获得通知，然后您可以像以前一样执行此操作。

查看此线程以了解如何卸载和安装软件包：

[以编程方式安装/卸载 APK（PackageManager 与 Intents）](https://stackoverflow.com/questions/6813322/install-uninstall-apks-programmatically-packagemanager-vs-intents)

如果您不想手动卸载/安装，那么您可以使用 CommonsWare 提供的这个出色的软件包：

[https://github.com/commonsguy/cwac-updater](https://github.com/commonsguy/cwac-updater)

如果您想使用框架，那么有很多选择：

[http://hockeykit.net/index.html](http://hockeykit.net/index.html)

[http://launchpadapp.com/](http://launchpadapp.com/)

[http://www.appaloosa-store.com/](http://www.appaloosa-store.com/)

[http://www.apphance.com/](http://www.apphance.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:00:50.260

可能您可能想尝试类似 hockeykit [http://hockeykit.net/index.html](http://hockeykit.net/index.html)

# mysql - mysql上的count（*）给我值0

> ID：13487185
> 
> 赞同：0
> 
> 时间：2012-11-21T05:51:52.673
> 
> 标签：mysql, sql, count

```
select count(*)  FROM antecedente_delito WHERE rut_polichile = NEW.rut_polichile 
```

该语句给出的值是 0，而它应该给我 18：/ 我一直在努力寻找其中的任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:37:47.220

为了解决这个问题，我会查看您的实际值并验证 NEW。正在返回您认为应有的内容。有时它可能会进行一些修剪或删除特殊字符，尤其是 _ 和 % 符号可能会在子过程中被剥离。

我将从查询开始：

```
select top 50 rut_polichile, NEW.rut_plichile FROM antecedente_delito 
```

如果问题不明显，请添加 varbinary 检查：

```
select top 50 cast( rut_polichile as varbinary), cast(NEW.rut_plichile as varbinary) from antecedente_delito 
```

如果表只有 18 条记录，那么您应该很好地进行上述故障排除，但如果有更多数据，我建议通过 where 语句中的 rowid 或其他标识符来限制上述结果。

这不是答案，但我希望它可以帮助您找到答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:15:43.230

这是我在 SqlFiddle 中使用/更改您的代码模拟的工作解决方案。 [http://sqlfiddle.com/#!2/ac2e9/1](http://sqlfiddle.com/#!2/ac2e9/1)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-21T06:30:52.790

如果对表列的引用通过触发器定义中的 OLD.col_name 或 NEW.col_name 发生，则为主题表的 SELECT 权限。

but in your trigger i can't see any trigger definition. so try without NEW.

for more info: [http://www.sqlinfo.net/mysqldocs/v51/triggers.html](http://www.sqlinfo.net/mysqldocs/v51/triggers.html) or [http://bugs.mysql.com/bug.php?id=31068](http://bugs.mysql.com/bug.php?id=31068)

# iphone - CATransition 私有 api

> ID：13487186
> 
> 赞同：0
> 
> 时间：2012-11-21T05:51:58.467
> 
> 标签：iphone

只是想知道 ios6 @"suckEffect",@"cube",@"oglFlip",@"pageCurl",@"rippleEffect" ,@"pageUnCurl"

哪一个是私有的并被应用商店拒绝？

欢迎您的评论

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T05:56:04.093

自然，`CoreAnimation`框架中定义的那些是公开的，并且是可以的：

```
// CAAnimation.h

/* Common transition types. */

CA_EXTERN NSString * const kCATransitionFade
    __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);
CA_EXTERN NSString * const kCATransitionMoveIn
    __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);
CA_EXTERN NSString * const kCATransitionPush
    __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0);
CA_EXTERN NSString * const kCATransitionReveal
    __OSX_AVAILABLE_STARTING (__MAC_10_5, __IPHONE_2_0); 
```

这些类型都是私有的，被苹果拒绝：

```
NSString *const kCATransitionCube = @"cube";  
NSString *const kCATransitionSuckEffect = @"suckEffect"; 
NSString *const kCATransitionOglFlip = @"oglFlip";  
NSString *const kCATransitionRippleEffect = @"rippleEffect";  
NSString *const kCATransitionPageCurl = @"pageCurl"; 
NSString *const kCATransitionPageUnCurl = @"pageUnCurl";   
NSString *const kCATransitionCameraIrisHollowOpen = @"cameraIrisHollowOpen";
NSString *const kCATransitionCameraIrisHollowClose = @"cameraIrisHollowClose"; 
```

# libgdx - 如何用 libgdx 完成动画

> ID：13487189
> 
> 赞同：4
> 
> 时间：2012-11-21T05:52:07.370
> 
> 标签：libgdx

我正在尝试使用 libGDX 实现一个简单的动画，但我目前正坚持一件事。可以说我有一堆精灵需要一些时间才能完成。例如，大约 30 个精灵像这个链接：[https ://github.com/libgdx/libgdx/wiki/2D-Animation](https://github.com/libgdx/libgdx/wiki/2D-Animation)

但是，在动画完成之前，按下了一些键。对于流畅的动画，我希望在开始下一组动画之前完成 30 帧，以防止突然停止。

所以我的问题是如何在 libGDX 中实现它？我目前的想法是扩展`Animation`类，它将跟踪我拥有的帧以及渲染了多少帧，然后显示其余的。或使用该`isAnimationFinished(float stateTime)`功能（尽管我没有运气使用它）。

我见过的像 superjumper 这样的例子只有很少的动画，并没有真正改变太多。

另外，有没有办法保存`TextureAtlas.createSprites`方法中的精灵列表并将它们与动画类一起使用？如果不是，那么提供这个功能的目的是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T15:52:10.507

您可以使用

```
animation.isAnimationFinished(stateTime); 
```

看看你的动画是否完成。

对于精灵：我个人使用 TextureAtlas 中的 TextureRegion 并将它们存储在一个数组中以用于我的动画

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-24T11:55:03.823

我创建了一个`AnimatedImage`扩展`Image`为在 Image 中自动生成精灵的类。我的代码将是这样的：

```
public class AnimatedImage extends Image{
    private Array<Array<Sprite>> spriteCollection;
    private TextureRegionDrawable drawableSprite;
    private Animation _animation;
    private boolean isLooping;
    private float stateTime;
    private float currentTime;

    public AnimatedImage(Array<Array<Sprite>> _sprites, float animTime, boolean _looping){
//      set the first sprite as the initial drawable
        super(_sprites.first().first());
        spriteCollection = _sprites;

//      set first collection of sprite to be the animation
        stateTime = animTime;
        currentTime = 0;
        _animation = new Animation(stateTime, spriteCollection.first());

//      set if the anmation needs looping
        isLooping = _looping;
        drawableSprite = new TextureRegionDrawable(_animation.getKeyFrame(currentTime));
        this.setDrawable(drawableSprite);
    }

    public void update(float delta){
        currentTime += delta;
        TextureRegion currentSprite = _animation.getKeyFrame(currentTime, isLooping);
        drawableSprite.setRegion(currentSprite);
    }

    public void changeToSequence(int seq){
//      reset current animation time
        resetTime();
        _animation = new Animation(stateTime, spriteCollection.get(seq));
    }

    public void changeToSequence(float newseqTime, int seq){
        _animation = new Animation(newseqTime, spriteCollection.get(seq));
    }

    public void setRepeated(boolean _repeat){
        isLooping = _repeat;
    }

    public boolean isAnimationFinished(){
        return _animation.isAnimationFinished(currentTime);
    }

    public void resetTime(){
            currentTime = 0;
    }

} 
```

`changetosequence`方法将使 new`Animation`用于更新该方法的当前`TextureRegionDrawable`值`update`。`resetTime`调用时将重置动画的总时间`changeToSequence`。您可以添加事件侦听器以调用 changeToSequence 方法。

这是示例：

```
private AnimatedImage _img; 
```

然后我像这样添加 InputListener：

```
_img.addListener(new InputListener(){
            @Override
            public boolean touchDown(InputEvent event, float x, float y, int pointer, int button){
                _img.changeToSequence(1);
                return true;

            }
        }); 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-07T19:36:56.617

对这种动画使用补间引擎。它有据可查，libgdx 支持它.. 谷歌关于它，你可以找到一堆使用 libgdx 的例子.. 希望它会帮助你！

# c - c fwrite() 写入只有一个结构变量的文件？

> ID：13487195
> 
> 赞同：0
> 
> 时间：2012-11-21T05:52:48.860
> 
> 标签：c

该函数应该获取一个参数作为文件的指针，并将所有文件放入struct anagram，然后将其写入另一个文件。现在数据只包含a.word，但它也应该包含a.sorted？我已经使用 printf 检查了 a.sorted，它 printf 输出了正确的数据，但为什么它不写入数据文件？即使我增加了 frwite 的数量，它仍然无法得到 a.sorted

```
#include <stdio.h>
#include <stdlib.h>
#include <stddef.h>
#include <string.h>
#include <errno.h>
#include <ctype.h>
#include "anagrams.h"
#define SIZE 80

   //struct
struct anagram {
    char word[SIZE];
    char sorted[SIZE];
};

void buildDB ( const char *const dbFilename ){

FILE *dict, *anagramsFile;
struct anagram a;

//check if dict and anagram.data are open
errno=0;
dict= fopen(dbFilename, "r");

if(errno!=0) {
perror(dbFilename);
exit(1);
}

errno=0;

anagramsFile = fopen(anagramDB,"wb");

char word[SIZE];
char *pos;
int i=0;

while(fgets(word, SIZE, dict) !=NULL){

//get ripe of the '\n'
pos=strchr(word, '\n');
    *pos = '\0';

strncpy(a.word,word,sizeof(word));
//lowercase word
int j=0;
while (word[j])
  {
    tolower(word[j]);
    j++;
  }

/* sort array using qsort functions */ 
qsort(word,strlen(word), 1, charCompare);

strncpy(a.sorted,word,sizeof(word));
//printf(a);

fwrite(&a,1,strlen(word)+1,anagramsFile);

i++;
}
fclose(dict);
fclose(anagramsFile);

} 
```

它假设包含带有 a.sorted 的数据，例如“10th 01ht”数据：![在此处输入图像描述](../Images/f5dce5178d88db33030b7fbd4d45b96d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:46:57.893

`fwrite(&a,1,strlen(word)+1,anagramsFile);`应该是`fwrite(a.sorted,1,strlen(a.sorted)+1,anagramsFile);`我假设排序为的声明`char sorted[SOME_LEN];`

# c++ - 在 C++ 中，打开一个带有值的 .txt 文件后，读取该文件会给我“”

> ID：13487201
> 
> 赞同：2
> 
> 时间：2012-11-21T05:53:22.983
> 
> 标签：c++, ifstream, readfile

这是我的代码。

```
ifstream readFile;
readFile.open("voltages.txt");

if (readFile.fail( ) )
{
    cout << "\nCould not open the file ... check to see if voltages.txt exists\n";
    system("pause");
    return;
}

string tempString = "";
//readFile.seekg(0, ios::beg);
int idx = 0;
if (readFile.is_open())
{
    while ( readFile.good() )
    {
        getline(readFile,tempString);
        cout << tempString << endl;
    }
    readFile.close();
} 
```

如果我将 voltages.txt 移动到 c:/，那么它可以正常工作，但是我现在将它与我的 .exe 放在同一个文件夹中，并且当我在 cout << tempString << endl; 处设置断点时；它显示为“”。如果可能的话，我想把它保存在 .exe 中。如您所见，我尝试从头开始寻找，但没有运气。请帮助这个 C++ 菜鸟！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T06:22:12.300

这可能是因为当程序需要从 C:/ 指向文件的链接时，您正在尝试读取本地文件

您可以通过替换来测试`voltages.txt`它`C:/pathToVoltages/voltages.txt`

我建议通过执行以下操作将文件传递给您的可执行文件：

```
int main(int argc, char argv[]){
    ifstream readFile;
    readFile.open(argv[2]);
    /*Rest of the code*/ 
```

这假设文件的路径由您提供给程序的第一个参数给出，如下所示：

```
./program pathToFile/voltages.txt 
```

希望这可以帮助

# c++ - 使用c ++ / qt在二进制文件中写入法语字符

> ID：13487202
> 
> 赞同：0
> 
> 时间：2012-11-21T05:53:27.800
> 
> 标签：c++, qt, internationalization, binaryfiles

我在 c++ 中有一个二进制文件读/写模块。这适用于英语，但无法读写法语字符集。我需要做哪些改变？需要指定任何特殊的编码类型吗？（我可以访问 c++ std 库和 qt 4.7 库函数）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:12:00.920

对于初学者，请确保您的数据文件是 UTF8 并且以 UTF8 格式打开它们。确保您的源代码文件也是 UTF8，特别是如果您在其中使用任何显式字符串，但最好避免使用显式字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:09:58.503

你可以试试

```
QString::fromUtf8(yourString)
```

# c++ - 如何递归检查一个数字是否是斐波那契数？

> ID：13487205
> 
> 赞同：3
> 
> 时间：2012-11-21T05:53:37.767
> 
> 标签：c++, recursion, fibonacci

我需要编写一个程序来递归检查一个数字是否是斐波那契数；迭代地执行相同的任务很容易；递归地找到第 n 个斐波那契数也很容易，但我被困在如何使用递归检查数字是否是斐波那契数。这是查找第 n 个 fib 的代码。数字：

```
int fib(int n){
    if (n <= 1){
       return n;
    }else {
       return (fib(n-1) + fib (n-2));
    }
} 
```

我不知道该怎么做是如何修改上面的代码来检查给定的数字是否是斐波那契？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T06:10:29.513

传统的方法是使用 Gessel 的测试。*N*是斐波那契数当且仅当*5N ² + 4*或*5N ² – 4*是平方数。这在[这个 SO question](https://stackoverflow.com/questions/2432669/test-if-a-number-is-fibonacci)和[这个 SO question](https://stackoverflow.com/questions/3139645/determining-whether-a-number-is-a-fibonacci-number-homework)中进行了讨论。您也可以[在此处](http://thecodeaddict.wordpress.com/tag/gessels-test/)找到示例，但此页面包含 Python 代码（尽管它很容易理解）。

现在，如果您被要求专门使用递归......那么一种方法就是开始生成斐波那契数字，直到生成的数字变得大于或等于您正在测试的数字。如果匹配，则测试的数字属于斐波那契数列。如果不匹配，并且您生成的数字大于测试的数字，则测试的数字不是斐波那契数。

这是一个基本的（和丑陋的）例子：

```
bool isFibonacci( int testedNumber, int a = 1, int b = 1 )
{
    if( testedNumber == 0 || testedNumber == 1 )
        return true;//returning true for 0 and 1 right away.
    int nextFib = a + b;//getting the next number in the sequence
    if( nextFib > testedNumber )
        return false;//if we have passed the tested number, it's not in the sequence
    else if( nextFib == testedNumber )
        return true;//if we have a perfect match, the tested number is in the sequence
    else
        isFibonacci( testedNumber, b, nextFib );//otherwise, get the next fibonacci number and repeat.
} 
```

使用它就像`isFibonacci( the_number_you_want_to_test );`

请注意，斐波那契数可以及时计算`O(log n)`，如[本 SO question](https://stackoverflow.com/questions/1525521/nth-fibonacci-number-in-sublinear-time)中所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T06:14:53.540

这对我来说有点笨拙，但你可以尝试：

```
bool isFib(int numToCheck int twoPrev = 0, int prev = 1) {
    if (numToCheck == twoPrev || numToCheck == prev)
        return true;

    int currentFibNumber = twoPrev + prev;
    if (currentFibNumber == numToCheck)
        return true;
    else if (currentFibNumber > numToCheck)
        return false;

    return isFib(numToCheck, prev, currentFibNumber);
} 
```

这基本上使用递归迭代斐波那契数，直到生成的数字超过您正在检查的值或找到匹配项。

正如其他人指出的那样，有一些不需要递归的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T06:05:42.600

[确定一个数字是否是斐波那契数字](https://stackoverflow.com/questions/3139645/determining-whether-a-number-is-a-fibonacci-number-homework)看起来是一回事，但在 Java 中 - 你可能会在那里找到你想要的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-08T06:09:33.563

斐波那契数具有数学属性。一个数字是斐波那契当且仅当 (5*n^2 + 4) 或 (5*n^2 – 4) 中的一个或两个是完美正方形（来源：Wiki）。

这种方法比递归函数调用方法简单得多。检查此链接：

[http://www.geeksforgeeks.org/check-number-fibonacci-number/](http://www.geeksforgeeks.org/check-number-fibonacci-number/)

**另一种方法：**

```
static bool IsFib(long n)//n is the number to be checked
{
    double root5 = Math.Sqrt(5);
    double phi = (1 + root5) / 2;

    long idx    = (long)Math.Floor( Math.Log(n*root5) / Math.Log(phi) + 0.5 );
    long u = (long)Math.Floor( Math.Pow(phi, idx)/root5 + 0.5);

    return (u == n);
} 
```

此代码适用于大量输入。它是由 abelenky 在 stackoverflow 中针对类似问题发布的。

# buddypress - Buddypress 注册中的个人资料图片？

> ID：13487208
> 
> 赞同：0
> 
> 时间：2012-11-21T05:53:58.673
> 
> 标签：buddypress

我正在使用自定义注册表单创建一个 buddypress 网站。此表单需要具有预览的个人资料图片上传字段。

是否有任何插件可以帮助它或任何示例代码/想法来完成它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:06:01.187

Please try this

Demo : [http://www.atwebresults.com/php_ajax_image_upload/](http://www.atwebresults.com/php_ajax_image_upload/)

Download Code: [http://atwebresults.com/forum/viewtopic.php?f=25&t=391](http://atwebresults.com/forum/viewtopic.php?f=25&t=391)

# javascript - 引用 javascript 对象

> ID：13487209
> 
> 赞同：1
> 
> 时间：2012-11-21T05:54:07.073
> 
> 标签：javascript, object

这一直让我有点困惑，而且我的编程术语不足以用谷歌搜索它。甚至不确定标题是否有意义。例如，如果我有一个像这样的对象数组......

`var someObjects = [{type: 'apple'}, {type: 'orange'}, {type: 'banana'}];`

...我说...

`var theBestFruit = someObjects[2];`

但随后我们在开头添加另一个对象，移动所有元素......

`someObjects.unshift({type: 'pear'});`

还会`theBestFruit`引用香蕉对象吗？或者现在会是橙色吗？一些解释将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T05:59:51.107

好吧..试试看？

暗示：

该`someObject[2]` *表达式*被*急切地评估*为一个*值*（读取：对象），然后*绑定*（读取：分配给）*变量* `theBestFruit`。除非`theBestFruit`重新分配（读取：绑定到其他东西），否则它将始终评估为同一个*对象*（读取：值）。

稍后是否评估其他内容无关紧要`someObjects[2]`- 它不会影响在（阅读：分配）`theBestFruit`时确定的绑定。`=`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T05:58:05.437

`theBestFruit = someObjects[2]`将查找 , 的第二个（或第三个，如果您算作非程序员 :p ）位置`someObject`（即 object `{type: 'banana'}`，并将对该对象的直接引用分配给`theBestFruit`。该引用不是对第二个对象的`someObjects`. 因此，如果`someObjects`更改，`theBestFruit`仍将是`{type: 'banana'}`。

测试它的最好方法是……测试它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T05:59:51.757

```
> var someObjects = [{type: 'apple'}, {type: 'orange'}, {type: 'banana'}];
undefined
> var theBestFruit = someObjects[2];
undefined
> someObjects.unshift({type: 'pear'});
4
> someObjects
[ { type: 'pear' },
  { type: 'apple' },
  { type: 'orange' },
  { type: 'banana' } ]
> theBestFruit
{ type: 'banana' }
> 
```

# grails - Grails 2.1.1 - 子列表中的表未在父显示视图中排序 -arrghh

> ID：13487210
> 
> 赞同：0
> 
> 时间：2012-11-21T05:54:13.583
> 
> 标签：grails, grails-orm, grails-2.0

我有 2 个域

```
Portfolio
  static hasMany [publications: Publication]
  String portfolioName

Publication
  static belongsTo = [portfolio: Portfolio]
   String publicationName
   String pubcontent
   String published
   String publisheddate 
```

我想要发布列表视图`g:render`或`tmpl`投资组合域的显示视图中的新部分视图。如果我调整发布列表视图以在portfolioInstance?.publications 中传递投资组合参数，这一切都可以正常工作并完美显示。

**问题：** 当我想对出版物列表视图中的表标题进行排序时，排序会移动数据但不遵循任何排序顺序。我已经尝试了所有领域技巧，例如列出出版物、比较器等，我已经搞砸了使用修改视图`.sort{a,b-> a.id.compareTo(b.id)}`但仍然没有正确排序它们。

如何让这些列正确排序？重申一下，我需要或希望表中的所有列都是可排序的。

到目前为止我做了什么但没有奏效：

*   `<g:sortableColumn`在视图中
*   领域类 Portfolio used 列出出版物
*   视图中的内联比较器
*   许多其他的事情。

我哪里错了？我是否需要在投资组合控制器下编写一个新方法来处理列表操作和参数排序，或者我可以在视图中做些什么来解决这个问题。

**示例**列表视图 - 为简洁起见减少

```
<g:each in="${portfolioInstance?.publications }" status="i" var="pubs">
<g:link controller="publication" action="show" id="${publicationInstance.id}">${fieldValue(bean: publicationInstance, field: "publicationName")}</g:link>

<td><g:formatDate date="${pubs.publisheddate}" /></td>

<td>${fieldValue(bean: publicationInstance, field: "published")}</td> 
```

**控制器**

标准 grails 生成控制器

```
def show(Long id) {
    def portfolioInstance = Portfolio.get(id)
    portfolioInstance.properties=params

def list(Integer max) {
    params.max = Math.min(max ?: 10, 52)
    if (params.sort==null){
        params.sort = "published"

    }
    [publicationInstanceList: Publication.list(params), publicationInstanceTotal: Publication.count()] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:10:21.823

[请参阅GORM 文档](http://grails.org/doc/latest/guide/GORM.html)的第 6.5.2 节（“默认排序顺序”）。你只需要添加

```
static mapping = {
    sort "publicationName"
} 
```

如果您希望将其作为出版物排序依据的字段，请在您的出版物类中。

# java - 使用OpenGL将对象放置在网格上的正确方法是什么？

> ID：13487212
> 
> 赞同：0
> 
> 时间：2012-11-21T05:54:20.150
> 
> 标签：java, opengl

为了便于讨论，假设我想在 20x20 的 2d 网格上放置一个墙壁对象（为简单起见，我们假设它只是一个 1x1 的正方形）。假设我在 0 和 1 之间的坐标中建模了对象。

所以，我的问题是，以正确的方式使用 openGL（我意识到有很多方法可以手动更改坐标，但这并不能启发我的未来），我如何将这个对象放在网格中位置（5,5）？它会与模型矩阵有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T07:50:37.083

是的，我认为你的想法是正确的。

如果您的墙存在于 (0,0) 到 (1,1) 的模型空间中，并且您希望将这面墙的特定实例定位在 (5,5) 到 (6,6) 之间，那么要做的就是将使用在 x 和 y 方向平移 5 个单位的模型矩阵来绘制这面墙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:22:50.127

您不应该使用转换矩阵来放置单个基元。每次更改统一（又名矩阵）时，很可能必须刷新光栅化器管道，这无疑是性能杀手。

作为一般规则，为了提高效率，给定的变换矩阵应应用于场景中的至少 100 个图元。因此，如果您有一些瓦片网格，最好将它们复制转换为更大的顶点数组，或使用实例化（如果可用）。

# jquery-ui - JQuery UI 选项卡和对话框：错误：无法在初始化之前调用对话框上的方法；试图调用方法“打开”

> ID：13487215
> 
> 赞同：1
> 
> 时间：2012-11-21T05:54:32.073
> 
> 标签：jquery-ui, tabs, dialog

最近，我使用 jQuery UI Tab 和 Dialog 控件开发了我的主页。主 UI 中有两个选项卡，一个用于“Book”表单，另一个用于“Paper”表单（Book 和 Paper 是我的业务实体页面）。当我第一次运行程序时，一切正常，但第二次无法运行，它会抛出异常：

```
Error: cannot call methods on dialog prior to initialization; attempted to call method 'open' 
```

经过多次尝试，我没有使用Tab控件，只是在主页上放了两个按钮，并执行类似的任务，即使我运行了很多次一切都很好。所以我认为这是 Tab 控件的问题。

切换Tab项并使用firebug查看html body信息，我注意到每次切换操作都会追加一个新的div行：

```
<div id="tabsProductMain" class="tabs-bottom ui-tabs ui-widget ui-widget-content ui-corner-all">
<div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom" style="display: none;" aria-live="polite" aria-labelledby="ui-id-2" role="tabpanel" aria-expanded="false" aria-hidden="true">
<div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom" style="display: block;" aria-live="polite" aria-labelledby="ui-id-3" role="tabpanel" aria-expanded="true" aria-hidden="false">
<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-bottom ui-corner-all" role="tablist">
</div>
<div>
<div class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable ui-resizable" style="display: none; outline: 0px none; z-index: 1000; position: absolute;" tabindex="-1" role="dialog" aria-labelledby="ui-id-1">
<div class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable ui-resizable" style="display: none; outline: 0px none; z-index: 1000; position: absolute;" tabindex="-1" role="dialog" aria-labelledby="ui-id-1">
<div class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable ui-resizable" style="outline: 0px none; z-index: 1002; position: absolute; height: auto; width: 400px; top: 39.0003px; left: 428px; display: none;" tabindex="-1" role="dialog" aria-labelledby="ui-id-1">
<div class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable ui-resizable" style="display: none; outline: 0px none; z-index: 1000; position: absolute;" tabindex="-1" role="dialog" aria-labelledby="ui-id-2">
<div class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable ui-resizable" style="display: none; outline: 0px none; z-index: 1000; position: absolute;" tabindex="-1" role="dialog" aria-labelledby="ui-id-1"> 
```

您可以看到有太多新的丰富的 div 元素附加到最后一个**tabindex="-1"**和**aria-labelledby="ui-id-1"**。

任何人都可以找到解决这种情况的解决方案吗？否则，它将在第二次操作中抛出错误。也许我错过了使用 Tab 控件的一些要点？请问有人可以提出任何建议吗？谢谢。

主页代码在这里：

```
<script>    
$(function () {
            $("#tabsProductMain").tabs();

            $(".tabs-bottom .ui-tabs-nav, .tabs-bottom .ui-tabs-nav > *")
                .removeClass("ui-corner-all ui-corner-top")
                .addClass("ui-corner-bottom");

            $(".tabs-bottom .ui-tabs-nav").appendTo(".tabs-bottom");

            initializeTabs();
        })

        function initializeTabs() {
            var urlBook = "/DialogWebApp/ProductMain/BookDialog";
            var urlPaper = "/DialogWebApp/ProductMain/PaperDialog";

            //dynamically add new tab item
            $("#tabsProductMain").tabs('add', urlBook, 'Books');
            $("#tabsProductMain").tabs('add', urlPaper, 'Papers');

            //remove the default one
            $("#tabsProductMain").tabs('remove', 0);
        }
</script>

    <div id="tabsProductMain" class="tabs-bottom">
        <ul>
            <li><a href="#fragement-1"><span>One</span></a></li>
        </ul>
        <div id="fragement-1"  style="width:600px;height:500px;"></div>
    </div> 
```

BookDialog代码在这里，PaperDialog代码和BookDialog类似：

```
<script type="text/ecmascript">
    $(function () {
        $("#BookDialog").dialog({
            autoOpen: false, width: 400, height: 330, modal: true, title: "Book Form"
        });
        $("#BookDialog").html("").load("/ProductWebPortal/Product/Detail2/5")
    })

    function onOpenBookDialog() {
        $("#BookDialog").dialog("open");
    }
</script>
<div>
    <input type="button" id="btnOpenDialog" value="open book" onclick="onOpenBookDialog();"/>
    <div id="BookDialog" style="display:none;width:550px;height:550px;">simple div</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T23:56:09.670

通过将该块放入 try catch 块中，我能够优雅地处理这个问题。尝试这个。

```
try{
    code here...
}catch(exception){ 
   error ... 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T04:52:22.820

有时，这是由同一页面上的其他 jquery 错误引起的。我在同一页面上有日期选择器和对话框。日期选择器有错误。我试图打开一个不相关的对话框，我遇到了和你问的一样的错误。修复日期选择器错误后，初始化错误就消失了。

# javascript - 在Javascript中收紧“橡皮筋”

> ID：13487220
> 
> 赞同：1
> 
> 时间：2012-11-21T05:54:54.190
> 
> 标签：javascript, jquery, ios, math, mobile

所以我想知道是否有人对我如何在用户下拉时创建收紧橡皮筋效果有任何见解。我使用的指数方程效果不佳。如果我仍然拥有它，我会发布它，但它类似于

```
Math.pow(0.98, moveY - startY); 
```

贯穿等式的数字范围从 1 到 600。虽然它有效，但如果拉得太远，它会反转方向。所以我敢肯定我只是从睡眠剥夺中画了一个空白，但如果有人可以伸出援助之手吗？我检查了[iScroll](http://cubiq.org/dropbox/iscroll4/examples/simple/)，但我发现橡皮筋只是一个永远不会“收紧”的静态比例。谢谢

# user-accounts - 如何使用批处理文件将用户帐户密码更改为空白

> ID：13487222
> 
> 赞同：0
> 
> 时间：2012-11-21T05:55:04.363
> 
> 标签：user-accounts

我很难使用批处理文件将密码更改为空白。

我尝试使用以下命令：net user ''

但是，这会将密码设置为 '' 而不是空白。

感谢任何帮助。提前致谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:04:12.843

您需要使用两个引号：“”

# php - LDAP 问题，ldap_bind 无效的 dn 语法

> ID：13487225
> 
> 赞同：8
> 
> 时间：2012-11-21T05:55:27.890
> 
> 标签：php, ldap

我知道我的错误将是非常简单的，但我试图找到问题，但我没有看到它，也许你可以帮助我....

我正在尝试使用 php 创建一个函数，以便能够连接到 LDAP 并找到所需的信息。

我的php代码如下：

```
$ldapconfig['host'] = "127.0.0.1";
$ldapconfig['port'] = NULL;
$ldapconfig['basedn'] = "dc=example,dc=com";
$ldapconfig['binddn'] = "user";
$ldapconfig['bindpw'] = "password";

function ldap_authenticate($user, $pass) {
global $ldapconfig;
ldap_set_option(NULL, LDAP_OPT_DEBUG_LEVEL, 7); 
if ($user != "" && $pass != "") {
    $ds=ldap_connect($ldapconfig['host'],$ldapconfig['port']);
    if(!ldap_set_option($ds, LDAP_OPT_PROTOCOL_VERSION, 3)) {
        return NULL;
    }
    ldap_set_option($ds, LDAP_OPT_REFERRALS, 0);
    ldap_bind( $ds, $ldapconfig['binddn'], $ldapconfig['bindpw']);
    $r = ldap_search( $ds, $ldapconfig['basedn'], 'sAMAccountName=' . $user);
    if ($r) {
        $result = ldap_get_entries( $ds, $r);
        if ($result[0]) {
            if (ldap_bind( $ds, $result[0]['dn'], $pass) ) {
                return $result[0]['mail'][0];
            }
        }
    }
}
return NULL; 
```

当我尝试运行代码时，它给了我以下错误： ldap_bind invalid DN syntax on line xxxx 并且该行如下：

```
ldap_bind( $ds, $ldapconfig['binddn'], $ldapconfig['bindpw']); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-21T08:03:44.873

如错误中所述，您的绑定 DN 格式错误。DN 代表对象的完整路径 - 所以在你的情况下应该是这样的（看起来你在 AD 上？）

"cn=用户名,ou=域用户,dc=example,dc=com"

根据您使用的 LDAP（Active Directory、OpenLDAP 等），您*可能*可以使用 uid（所以只是“用户名”）进行绑定，但最好假设您始终需要完整的 DN。

您可以使用[Apache Directory Studio](http://directory.apache.org/studio/)之类的 LDAP 工具来帮助构建查询并找出对象的 DN 是什么。或者也有[ldp.exe](http://support.microsoft.com/kb/224543)（前提是它是 AD），但是 directory studio 更容易使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T08:35:55.907

在 DC 上，执行：dsquery user -samid jim

将显示与 sAMAccountName 匹配的用户的 DN：“CN=Jim Willeke,CN=Users,DC=mad,DC=willeke,DC=com”

[http://ldapwiki.willeke.com/wiki/LDAP%20and%20Active%20Directory](http://ldapwiki.willeke.com/wiki/LDAP%20and%20Active%20Directory)

# android - 多用户的 Worklight 推送通知

> ID：13487228
> 
> 赞同：1
> 
> 时间：2012-11-21T05:55:38.213
> 
> 标签：android, push-notification, ibm-mobilefirst

我在 IBM 的 Worklight 中创建了一个推送通知应用程序，它只为一个用户的设备（Android 设备）发送通知。我如何向多个用户的设备发送推送通知？如果有任何一个创建的应用程序，请提供一些示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:29:19.490

Worklight 服务器必须知道用户的身份才能发送推送通知。如果您没有在应用程序中定义任何用户身份验证，Worklight 服务器将使用“匿名”用户身份 - 在首次应用程序启动时创建的持久 cookie。这被认为是未经身份验证的访问。如果这是您要使用的模型，您需要在适配器中声明一个不需要身份验证的 EventSource（不要为其指定 securityTest），然后使用 WL.Server.notifyAll(eventSource, options) API。这将向订阅指定事件源的用户发送通知。

来源：[http ://www.ibm.com/developerworks/forums/thread.jspa?threadID=462167&tstart=360](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=462167&tstart=360)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:07:52.930

Push notification works on Android and iOS only. You can see how to implement on iOS in the push notifications module. You can find the module at [https://www.ibm.com/developerworks/mobile/worklight/getting-started/index.html#advanced](https://www.ibm.com/developerworks/mobile/worklight/getting-started/index.html#advanced)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T17:43:13.577

我所做的是将订阅特定事件源的所有用户保存在后端数据库中，然后向每个用户发送通知。

我检查了 Worklight 信息中心，但未列出 WL.Server.notifyAll(eventSource, options) api！

# jquery - 动力学 js ipad 滚动

> ID：13487233
> 
> 赞同：2
> 
> 时间：2012-11-21T05:56:08.403
> 
> 标签：jquery, scroll, kineticjs

我之前有一个基于 HTML5 画布的应用程序，我最近转换为使用 Kinetic JS。我可以通过简单地在包含的 div 上使用 overflow: auto 在桌面浏览器和 IOS 中启用滚动。由于转换为使用 Kinetic 滚动不再适用于移动/iPad 设备。

尽管我有点卡住了，但我尝试了几种不同的方法来解决这个问题。首先，我尝试使用 touchscroll，但由于各种原因这对我不起作用（尽管库导致其他问题，但事情确实滚动了）。接下来，我尝试将 -webkit-overflow-scrolling: touch 选项添加到我的 div 样式中，尽管这似乎没有任何效果。

是否有滚动大于可视区域/div 的 Kinetic JS 画布的标准方法？

这是一个例子。如果您在 IOS 设备（iPad、iPhone 等）上查看示例，您会注意到顶部画布不会在 div 内滚动，而底部画布会滚动。

[http://jsfiddle.net/blueshirts/uERVq/26/](http://jsfiddle.net/blueshirts/uERVq/26/)

```
<!-- KineticJS canvase, won't scroll on IOS devices. -->
<div id="container" style="overflow: auto; width: 400px; height: 400px; background-    color: gray">
</div>

<br/>

<!-- Vanilla HTML5 Canvas, does scroll on IOS devices. -->
<div id="canvasContainer"
     style="width: 400px; height: 400px; overflow: auto; background-color: red">
    <canvas id="vanillaCanvas"
            width="800" height="600">
    </canvas> 
</div>

// Create a stage instance that is larger than its parent div.
var stage = new Kinetic.Stage({
    container: 'container',
    width: 800,
    height: 600
});

// Create a layer.
var layer = new Kinetic.Layer();

// Add some text...
var text = new Kinetic.Text({
    text: "KineticJS generated Canvas that won't scroll to IOS touches...",
    x: 0,
    y: 0,
    fontSize: 12,
    fontFamily: 'Calibri',
    textFill: 'Black'                
});
layer.add(text);

// Add a rectangle to the layer so you can see if the content scrolls.
var rect = new Kinetic.Rect({
    x: 50,
    y: 50,
    width: 200,
    height: 100,
    fill: "yellow",
    stroke: "black",
    strokeWidth: 7
});
layer.add(rect);

// Add the layer to the stage.
stage.add(layer);

// Create a "vanilla" canvas instance and draw the same rectangle on it.
var canvas = document.getElementById('vanillaCanvas');
var context = canvas.getContext('2d');

context.beginPath();
context.rect(50, 50, 200, 100);
context.fillStyle = 'yellow';
context.fill();
context.lineWidth = 7;
context.strokeStyle = 'black';
context.stroke(); 
```

编辑：

可能是错误的，但在我看来，这个问题是由 Kinetic 在 Stage 类中注册 touchmove 事件（和其他事件）引起的。在它运行的处理程序中， preventDefault 似乎阻止移动浏览器执行其默认滚动行为。如果“我”已经注册了 touchmove 事件，这可能是可取的。如果 Kinetic 没有注册和处理我不感兴趣的事件，那就太好了。

```
 _touchmove: function(evt) {
     this._setUserPosition(evt);
     var dd = Kinetic.DD;
     evt.preventDefault(); 
```

我可以在这里演示这个问题：http: [//jsfiddle.net/blueshirts/P9RaT/28/](http://jsfiddle.net/blueshirts/P9RaT/28/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-26T09:41:31.743

我认为这是 Kinetic JS 中的一个基本错误。如果我知道是这种情况，我就不会开始使用动力学 JS 来着手一个雄心勃勃的项目，因为它甚至不能做基础。

由于 Kinetic 团队没有任何回应，我将切换到 bug 较少的库，如 fabric.js。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-27T01:09:11.227

我在 iPad/iPhone 上使用 KineticJS 创建的地图滚动时遇到了同样的问题。

这对我有用：stage.setListening(false);

我在这里找到了这个解决方案：

[https://github.com/ericdrowell/KineticJS/pull/510](https://github.com/ericdrowell/KineticJS/pull/510)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T04:15:10.740

不确定我是否喜欢这个选项，尽管它比使用许多滚动库之一要好。我可以通过扩展默认 Stage 类并仅在我不在移动设备上时执行 evt.preventDefault() 来解决此问题。虽然到目前为止似乎符合我的用法，但不确定这可能会造成什么不良影响。如果有更简单的方法来修改默认行为，那就太好了。

```
Kinetic.Global.extend(MyStage, Kinetic.Stage);
function MyStage(mobile, config) {
    this.mobile = mobile;
    this._initStage(config);
}
MyStage.prototype._touchstart = function(evt) {
    this._setUserPosition(evt);
    if (this.mobile) {
        evt.preventDefault();
    }
    var obj = this.getIntersection(this.getUserPosition());

    if(obj && obj.shape) {
        var shape = obj.shape;
        this.tapStart = true;
        shape._handleEvent('touchstart', evt);
    }

    /*
                         * init stage drag and drop
                         */
    if(Kinetic.DD && this.attrs.draggable) {
        this._initDrag();
    }
}
MyStage.prototype._touchmove = function(evt) { // Override the default touchmove handler.
    this._setUserPosition(evt);
    var dd = Kinetic.DD;
    if (this.mobile) {
        evt.preventDefault();
    }
    var obj = this.getIntersection(this.getUserPosition());
    if(obj && obj.shape) {
        var shape = obj.shape;
        shape._handleEvent('touchmove', evt);
    }

    // start drag and drop
    if(dd) {
        dd._startDrag(evt);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-09T04:27:19.237

我可能不完全理解这个问题，但为什么不直接在舞台上添加 'draggable: true'

```
// Create a stage instance that is larger than its parent div.
var stage = new Kinetic.Stage({
    container: 'container',
    width: 800,
    height: 600,
    draggable: true
}); 
```

我正在使用同样的方法，我的画布是视口大小的几倍，并且使用“可拖动：真”我可以滚动画布图像。

# php - PHP左字符串连接运算符？

> ID：13487237
> 
> 赞同：0
> 
> 时间：2012-11-21T05:56:18.200
> 
> 标签：php, string, operators, concatenation, string-concatenation

这可能是一个非常简单易答的问题，也许不是。

要在 php 中连接字符串（通过附加/右连接），请使用：

```
$a = "a";

$a .= "b";
//The value will be: "ab" 
```

**我该怎么做，但反过来呢？**

Ej.:

```
$a = "a";

$a ???? "b";
//I NEED the value to be: "ba" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T05:58:18.407

使用标准的连接运算符；不存在特殊的赋值运算符。

```
$a = "b" . $a; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T06:00:16.083

$a = "b" 。$一个

据我所知，没有它的简写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T06:15:42.810

最接近内置函数的方法是使用 strpad

```
$a = str_pad($a, strlen($a)+strlen("b"), "b", STR_PAD_LEFT); 
```

但正如其他人指出的那样，这样做要简单得多`$a = "b" . $a;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-21T10:03:26.023

怎么样`$ba = "b$a";`？它会回来的`ba`！

在双引号之间定义字符串时，变量会自动解析为字符串。通过使用单引号，变量不会被解析！（`'b$a'`返回`b$a`）。

如果原始字符串包含干扰变量解析的特殊字符，则可以将其括在大括号之间：

```
echo "b_{$a}";  // returns: 'b_a'

// Recap

echo "b$a"; // => 'ba'

echo 'b$a'; // => 'b$a' 
```

当您需要进行许多连接（例如，带有其属性的 html 标记）时，双引号加花括号（如果需要）是一个非常方便的解决方案。

# c - fstat() st_nlink=1 即使在链接更多文件之后

> ID：13487240
> 
> 赞同：2
> 
> 时间：2012-11-21T05:56:38.630
> 
> 标签：c, system-calls, fstat

```
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>

int main(int argc, char const *argv[])
{
    struct stat buf;
    int fd;

    if (fd = open(argv[1], O_RDWR | O_CREAT)<0)
    {
        printf("file open error\n");
        return 1;
    }
    if (link(argv[1], "link1") + link(argv[1], "link2")<0)
    {
        printf("error link\n");
        return 1;
    }
    if (fstat(fd, &buf)<0)
    {
        printf("error fstat\n");
        return 1;
    }
    printf("nlinks before = %d \n", buf.st_nlink);
    if (unlink("link2") + unlink("link1") + unlink(argv[1])<0)
    {
        printf("unlink error\n");
        return 1;
    }
    if (fstat(fd, &buf)<0)
    {
        printf("error fstat\n");
        return 1;
    }
    printf("nlinks after = %d \n", buf.st_nlink);
    return 0;
} 
```

输出： nlinks before = 1 nlinks after = 1

为什么 st_nlink 总是 = 1 即使文件至少有 3 个链接？另外，如果我改用，`lstat`我会得到 3 个 st_nlinks。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T06:02:34.173

```
if (fd = open(argv[1], O_RDWR | O_CREAT)<0) 
```

应该：

```
if ( (fd = open(argv[1], O_RDWR | O_CREAT))<0) 
```

as`<`的[**优先级**](http://en.wikipedia.org/wiki/Operators_in_C_and_C++#Operator_precedence)高于`=`.

# android - 我的应用在哪些设备上有问题

> ID：13487243
> 
> 赞同：0
> 
> 时间：2012-11-21T05:56:52.967
> 
> 标签：android, testing, android-testing

所以我的问题很简单：我开发了一个非常酷的应用程序，它在我的设备上运行良好，但是我知道它不能在其他设备上运行。

是否有分析、仪表板、API 或其他东西可以帮助我找出特定设备存在哪些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:25:17.237

开发人员控制台列出了发生崩溃的设备以及堆栈跟踪

链接（可能有效）： https: [//play.google.com/apps/publish/](https://play.google.com/apps/publish/)

或者直接转到[http://developer.android.com](http://developer.android.com)，链接在网站溢出菜单的右上角

编辑：

如果用户选择报错（感谢cjk）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:57:49.540

看看[Acra](http://code.google.com/p/acra/)强烈推荐。

# sql - 如何加快 Postgresql 中的复杂查询

> ID：13487244
> 
> 赞同：2
> 
> 时间：2012-11-21T05:56:56.367
> 
> 标签：sql, postgresql, postgresql-performance

如何加快以下查询执行速度？检索 37 条记录需要 65 秒。大佬们有什么解决办法吗？（我在 x86_64-unknown-linux-gnu 上使用 PostgreSQL 9.1.6，由 gcc (GCC) 4.4.6 20120305 (Red Hat 4.4.6-4) 编译，64 位）这是查询：

```
select cc.claim_id, 
cc.claim_date, 
CONCAT(cc.user_id, ' | ', uu.user_name) as user_name,
CONCAT(f_get_channel_id_by_territory_id(cc.territory_id), ' | ', f_get_channel_name(f_get_channel_id_by_territory_id(cc.territory_id))) AS channel_name,
f_get_cluster(cc.user_id) AS cluster_id,
ff.frontliner_name 
from t_trx_card_claim cc join t_mtr_user uu on uu.user_id = cc.user_id
left join t_mtr_outlet_frontliner ff on f_get_territory_id(ff.outlet_id) = cc.territory_id
where f_get_cluster(cc.user_id) = '36' 
```

这是一个解释分析输出（[另见 explain.depesz.com](http://explain.depesz.com/s/z97)）：

```
Nested Loop Left Join  (cost=0.00..83503.84 rows=646 width=47) (actual time=2000.830..65689.982 rows=37 loops=1)
  Join Filter: (f_get_territory_id(ff.outlet_id) = cc.territory_id)
  ->  Nested Loop  (cost=0.00..433.50 rows=7 width=35) (actual time=174.417..198.364 rows=37 loops=1)
        ->  Seq Scan on t_trx_card_claim cc  (cost=0.00..375.53 rows=7 width=21) (actual time=174.407..197.932 rows=37 loops=1)
              Filter: (f_get_cluster(user_id) = 36)
        ->  Index Scan using ix_user_8 on t_mtr_user uu  (cost=0.00..8.27 rows=1 width=22) (actual time=0.008..0.009 rows=1 loops=37)
              Index Cond: ((user_id)::text = (cc.user_id)::text)
  ->  Materialize  (cost=0.00..1811.51 rows=42701 width=21) (actual time=0.006..30.225 rows=42701 loops=37)
        ->  Seq Scan on t_mtr_outlet_frontliner ff  (cost=0.00..1347.01 rows=42701 width=21) (actual time=0.003..27.457 rows=42701 loops=1)
Total runtime: 65690.524 ms 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T06:41:42.723

重大问题可能出在函数 f_get_territory_id 和 f_get_cluster 中 - 强烈建议不要在 WHERE 和 FROM（JOIN 谓词）子句中使用函数（如果使用函数索引则例外/因此这些函数必须是不可变的）。

# c++ - 将基类的引用传递给 boost::thread 并在派生类中调用虚函数是否可行？

> ID：13487246
> 
> 赞同：0
> 
> 时间：2012-11-21T05:57:03.757
> 
> 标签：c++, boost, boost-thread

假设我有：

```
class Base
{
    public:

        void operator()()
        {
            this->run();
        }

        virtual void run () {}
}

class Derived : public Base
{
    public:

        virtual void run ()
        {
            // Will this be called when the boost::thread runs?
        }
}

int main()
{
    Base * b = new Derived();
    boost::thread t(*b); // <-- which "run()" function will be called - Base or Derived?
    t.join();
    delete b;
} 
```

根据我的测试，我无法`Derived::run()`被召唤。我做错了什么，还是这是不可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T06:04:45.043

通过传递`*b`您实际上“切片”`Derived`对象，即`Base`按值传递实例。您应该通过`Derived`指针（或智能指针）传递函子，如下所示：

```
thread t(&Derived::operator(), b); // boost::bind is used here implicitly 
```

当然，要注意`b`寿命。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:23:32.373

@GManNickG 的评论是最干净的答案，并且效果很好。Boost.Ref 是要走的路。

```
thread t(boost::ref(*b)); 
```

# javascript - KendoUI 模板无效

> ID：13487253
> 
> 赞同：1
> 
> 时间：2012-11-21T05:57:54.853
> 
> 标签：javascript, kendo-ui

我正在创建一个这样的 KendoUI 模板：

```
 <ul class="nav nav-list flow-list">
                <li class="nav-header">Flows in action</li>
                <script id="flow-list" type="text/x-kendo-template">
                    #for (var i = 0; i < data.length; i++ {#
                        <li>#=data[i]#</li>
                    #}#
                </script>
            </ul> 
```

这是我传递数据的方式：

```
//Get the external template definition using a jQuery selector
var template = kendo.template($("#flow-list").html());

//Create some dummy data
var data = ["Todd", "Steve", "Burke"];

//Execute the template
template(data); 
```

运行上面的代码告诉我一个错误说`"Invalid template"`

任何指针？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T08:45:05.973

您缺少`for`循环的右括号。

```
#for (var i = 0; i < data.length; i++ /* missing ) */ {# 
```

这是一个工作演示：http: [//jsbin.com/ihivez/1/edit](http://jsbin.com/ihivez/1/edit)

# javascript - 替换 CodeMirror 令牌？

> ID：13487266
> 
> 赞同：2
> 
> 时间：2012-11-21T05:58:55.733
> 
> 标签：javascript, codemirror

我正在尝试通过替换 CodeMirror v3 中选择的令牌

```
var obj = editor.getTokenAt(currLine);
var currLine = editor.getCursor(true); 
```

但似乎唯一的选择是

```
replaceRange 
```

它考虑了新字符串和起始位置，但是当新字符串比原始字符串短或长时会发生奇怪的事情。

有什么更好的方法呢？

```
currLinereplace 
```

似乎对我不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T14:31:36.437

```
var pos = editor.getCursor() // or {line , ch };
var tok = editor.getTokenAt(pos);
editor.replaceRange("string", {line: pos.line , ch:tok.start},{line:pos.line , ch:tok.end}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-29T02:38:15.403

我必须显示**自定义提示列表**以替换选择时的加入令牌。用正确的参数调用 replaceRange 方法是**不够的**。它粘贴了新标记，但在初始标记内部，具体取决于光标位置。**如果我们有自定义提示选项，我们还需要在提示选项**中指定 from 和 to 位置，以使 replaceRange 正常工作，例如：

```
const options = {
    hint: () => ({
      from: token.start, // without this replaceRange didn't work not correctly
      to: token.end, // without this replaceRange didn't work not correctly
      list: ['left join', 'right join', 'inner join', 'outer join'] // custom list of options
    })
  };
  cm.showHint(options); // this is to show custom hint 
```

# java - this == null in java ，之后还执行为什么继续？

> ID：13487270
> 
> 赞同：4
> 
> 时间：2012-11-21T05:59:08.847
> 
> 标签：java

这是我的代码。我将 null 设置为这个引用，然后为什么它打印**not null set**

测试.java

```
try
  {                
     new Test().setNull();
     System.out.println("not null set");
   }
catch (Exception e)
  {//Catch exception if any
     System.err.println("Error: " + e.getMessage());
  }

  }
  public  void setNull()
  {
     setNull(this);
  }
  public  void setNull(Object thisRef)
  {
      thisRef = null;
  } 
```

输出：非空集

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T06:06:51.243

Java 不是引用调用。Java 不是引用调用。Java不是..

分配给*局部变量*不会更改调用者提供的任何参数*。*曾经。

因此，该函数“什么都不做”：它分配`null`给一个局部变量（这也是一个参数）并返回。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T06:05:42.057

设置一个引用`null`不会抛出`NPE`，否则想想你会如何取消你的`references`? 此外，当您分配`null`给任何引用时，只有该引用与它所指向的对象分离。但其余的参考资料仍然存在。

例如： -

```
MyClass obj1 = new MyClass();
MyClass obj2 = obj1; 

obj1 = null;  // only obj1 is detached from object
System.out.println(obj2);  // obj2 still points to original object 
```

所以，当你调用你的方法时： -

```
new Test().setNull(); 
```

引用的副本存储在`this` *（Java**不是按引用传递**，而是**按值传递引用**）*中，然后再次将其传递给另一个方法，因此再制作一个副本，然后将其设置为 null。但是原始引用仍然指向该对象。

只有当您尝试在引用上调用任何方法或访问任何对象属性时，才会抛出 NPE `null`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T06:08:08.413

1.  您的代码不完整。下次请发布一个最小的工作示例。

2.  您`this`作为参数传递给`setNull()`. 请记住，参数在 Java 中是按值传递的。`thisRef`被初始化为指向与 this 相同的实例，但是当您重新分配`null`给时`thisRef`， 的值`this`保持不变。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T06:39:57.110

对您自己的示例的另一种解释：

```
package com.test;

public class Test {

    public void setNull() {
        System.out.println("Before setting null : "+ this);
        System.out.println("Going to set null");
        this.setNull(this);
        System.out.println("'this' after setting null in caller method : "+this);

        this.print();// make sure that 'this' is not null;
    }

    public void print()
    {
        System.out.println("Another method");
    }

    public void setNull(Object thisRef) {
        // here you are referring the 'this' object via a variable 'thisRef'
        System.out.println("Inside setNull");
        System.out.println("thisRef value : " + thisRef); // same as 'this'
        // nullifying the 'thisRef'
        thisRef = null;
        System.out.println("thisRef after nullifying : "+thisRef);// ofcourse 'thisRef' is null
        System.out.println("'this' after setting null in method : "+this); // here the 'this' object will not be null
    }

    public static void main(String[] args) {
        new Test().setNull();
    }
} 
```

和控制台输出：

```
Before setting null : com.test.Test@3e25a5
Going to set null
Inside setNull
thisRef value : com.test.Test@3e25a5
thisRef after nullifying : null
'this' after setting null in method : com.test.Test@3e25a5
'this' after setting null in caller method : com.test.Test@3e25a5
Another method 
```

# objective-c - MonoTouch - 如何覆盖静态 UIView.layerClass

> ID：13487271
> 
> 赞同：1
> 
> 时间：2012-11-21T05:59:10.893
> 
> 标签：objective-c, xamarin.ios, static-methods

我正在尝试将[AUISelectiveBordersView 移植](https://github.com/adam-siton/AUISelectiveBordersView)到 MonoTouch。它基本上是通过类别的子类`CALayer`和集成。`UIView`

AUISelectiveBordersLayer 的“翻译”很简单，但集成点有点棘手。在 obj-c 中它是这样完成的：

```
@implementation UIView (AUISelectiveBorder)

+(Class) layerClass {
    return [AUISelectiveBordersLayer class];
} 
```

有什么办法可以把它翻译成 MonoTouch 吗？它看起来像覆盖静态方法，但我没有看到任何类似`layerClass`或`layerType`在 MT 中的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T06:17:02.100

幸运的是，我发现它可以通过子类化 UIView 来工作：

```
public class UIViewWithSelectiveBorders : UIView {

    [Export("layerClass")]
    public static Class LayerClass () {
        return new Class (typeof(SelectiveBorderLayer));
    }
} 
```

目前这对我的任务来说已经足够了，但一个更普遍的问题仍然存在：有没有办法在没有子类化的情况下改变它`UIView`（例如，如果我想为所有`UILabel`s 覆盖它）

# jakarta-ee - 是否有任何框架可以在使用 java 的 web 应用程序中开发聊天应用程序

> ID：13487279
> 
> 赞同：2
> 
> 时间：2012-11-21T05:59:52.763
> 
> 标签：jakarta-ee

嗨，我想开发聊天应用程序，我可以嵌入到我的网络应用程序中使用 java 和 struts2 开发，是否有任何框架来开发聊天应用程序

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T06:20:04.347

要首先开发一个聊天应用程序，你应该决定你想要什么样的聊天，只是短信或语音聊天或视频或所有这些！然后你应该为此选择一个协议。最著名的交换应用协议之一是[***xmpp***](http://xmpp.org/about-xmpp/)。在您的 Web 应用程序中拥有一个聊天应用程序有两个部分：服务器端和客户端。有很多支持 xmpp的免费和开源的[***服务器***](http://xmpp.org/xmpp-software/servers/)和[***客户端。***](http://xmpp.org/xmpp-software/clients/)要拥有一个聊天应用程序，最好使用其中之一。

我有一些你想要的项目，在那个项目中，我使用[***Openfire***](http://www.igniterealtime.org/projects/openfire/index.jsp)作为服务器，使用[***claros***](http://www.claros.org/web/showProduct.do?id=2)作为 Web 客户端。您不需要为服务器做任何工作，但是要拥有聊天 Web 客户端，您应该在项目中使用[***claros***](http://www.claros.org/web/showProduct.do?id=2)页面和库。它很简单，不需要任何特殊的 Java EE 框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T06:06:41.180

您可以使用现有的 java 技术开发聊天应用程序，例如 jms， http: [//oreilly.com/catalog/javmesser/chapter/ch02.html](http://oreilly.com/catalog/javmesser/chapter/ch02.html) 但是，有一个名为 dwr-java 的框架[http://www.packtpub.com /article/chatroom-application-using-dwr-java-framework](http://www.packtpub.com/article/chatroom-application-using-dwr-java-framework)您可以将其用作演示聊天应用程序。但是我推荐使用 spring 框架来开发这样的聊天应用程序，有很多可用的演示应用程序，只需谷歌它。

# scala - 可变 Scala 集合的不可修改视图

> ID：13487282
> 
> 赞同：11
> 
> 时间：2012-11-21T06:00:07.320
> 
> 标签：scala, scala-collections

我有一个带有私有字段的类，它是一个可变集合。这个特定实例中的字段是 an `ArrayBuffer`，尽管我的问题扩展到任何有限的、有序的、随机访问的集合类型。我想公开这个字段而不允许其他人修改它。在Java中，我会添加一个方法，如：

```
private List<T> theList;

public List<T> getList() {
    return Collections.unmodifiableList(theList);
} 
```

在 Java 中，我们只是接受结果是 a`List`没有完全实现`List`接口，因为`#add`和朋友 throw `UnsupportedOperationException`。

在 Scala 中，我希望找到一个合适的特征，其中包含 、 和 （用于按索引检索值）之类的访问`iterator`器`size`，`apply`但没有修改器。是否存在我还没有找到的这种类型？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T08:33:32.310

Scala 集合库是面向不变性的，不变性不仅仅指不允许你修改给定集合的事实，而且**保证你的集合永远不会被任何人修改**。

因此，您不能也不应该从 Scala 中的可变缓冲区中获取像 immutable.Seq 这样的集合作为视图，因为它违反了该保证。

但是你可以很容易地实现不可修改的可变 Seq 的概念，如下所示：

```
class UnmodifiableSeq[A](buffer: mutable.Seq[A]) extends mutable.Seq[A]{
    def update(idx: Int, elem: A) {throw new UnsupportedOperationException()}

    def length = buffer.length

    def apply(idx: Int) = buffer(idx)

    def iterator = buffer.iterator
} 
```

用法：

```
val xs = Array(1, 2, 3, 4)
val view = new UnmodifiableSeq(xs)
println(view(2)) >> 3
view(2) = 10 >> Exception in thread "main" java.lang.UnsupportedOperationException 
```

**编辑 ：**

获得集合的不可修改视图的一种可能更好的方法是向下转换为`collection.Seq`不提供可变更新操作的方法：

```
val xs = Array(1, 2, 3)
val view: Seq[Int] = xs //this is unmodifiable 
```

`Seq`或者如果您有自己的自定义可变类，则创建一个扩展的包装器。

```
class UnmodifiableView[A](col: MutableCollection[A]) extends collection.Seq[A]{
    def length = col.length

    def apply(idx: Int) = col(idx)

    def iterator = col.iterator
} 
```

该`scala.collection.Seq`特征不保证不可变性，但它也不允许任何修改操作，因此它看起来非常合适。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T06:07:10.623

将您的缓冲区转换为[Seq](http://www.scala-lang.org/api/current/scala/collection/Seq.html)，或作为包的一部分的其他不可修改的集合之一`scala.collection`。

```
myBuffer.toSeq 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-09T09:40:32.000

如果你想：

*   仅使用现有的库函数（不编写自己的包装器）
*   确保避免复制
*   确保返回的值不能转换为可修改的东西，那么一种可能性是简单地返回一个迭代器

    ```
    def getStuff = array.iterator 
    ```

当然，如果您的规范明确要求您返回 Seq，这不是一个选项，但它

*   `for (x <- obj.getStuff)`允许调用者使用与 Seq ( )相同的语法对其进行迭代
*   允许调用者使用`obj.getStuff.toSeq`or轻松转换为 Seq 或 List `obj.getStuff.toList`。

（请注意，.iterator 的文档没有明确说明返回的对象不能转换为可修改的对象，但 ArrayBuffer.iterator 的当前实现确实给出了不可修改的迭代器。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T08:33:42.153

如果`myBuffer.toSeq`还不够好，您可以编写自己的类来扩展`scala.collection.IndexedSeqOptimized`将调用委托给基础集合。

# java - 循环使圆圈变大

> ID：13487284
> 
> 赞同：0
> 
> 时间：2012-11-21T06:00:18.507
> 
> 标签：java, loops, for-loop, processing

谁能帮我用一个循环来使形成花朵的椭圆生长。有 5 个椭圆充当花瓣，一个中心花椭圆。

```
Stem myStem;
Circle circles[];

float scaleFactor=0.5;

void setup() {

size(floor(400*scaleFactor), floor(800*scaleFactor));
myStem = new Stem(200,800);
//mpoved this to setup, no need to recreate each frame
circles = new Circle[6];
circles[0]  = new Circle(0, -40, 50, 50);
circles[1]  = new Circle(0, -40, 50, 50);
circles[2]  = new Circle(0, -40, 50, 50);
circles[3]  = new Circle(0, -40, 50, 50);
circles[4]  = new Circle(0, -40, 50, 50);
circles[5]  = new Circle(0, 0, 50, 50);
// also smooth only needs to be called once
// unless ther is a noSmooth() somewhere
// smooth();
}

void draw() {

  float grow = 0;
  //translate(myStem.initalloX, myStem.initalloY);  
  myStem.drawStem();
  //set centre point
  if (frameCount>grow) {
    translate(myStem.initalloX, ((frameCount>250)?myStem.initalloY-      500:myStem.initalloY-(2*frameCount)));
    fill(170, 14, 24); // red
    for (int i = 0; i < circles.length-1; i++) {
      ellipse(circles[i].c1+grow, circles[i].c2+grow, circles[i].c3+grow, circles[i].c4+grow);
      rotate(radians(72));
    }
    fill(14, 17, 170); // blue
    ellipse(circles[5].c1, circles[5].c2, circles[5].c3, circles[5].c4);
 }
}

class Stem { 
int initalloX=200;
int initalloY=800;

Stem(int tempInitalloX, int tempInitalloY) {
  initalloX = tempInitalloX;
  initalloY = tempInitalloY;

}

void drawStem() {
  background(#0DBADB);
  scale(scaleFactor, scaleFactor);
  stroke (12, 149, 11);
  fill (12, 149, 11);
  strokeWeight(10);
  line(initalloX, initalloY, initalloX, ((frameCount>250)?initalloY-500:initalloY-(2*frameCount)));
  //stem1
  if (frameCount>101) {
    noStroke();
    translate(initalloX, initalloY-200);
    scale(min((float)(frameCount-100)/100, 1), min((float)(frameCount-100)/100, 1));
    beginShape();
    vertex(0, 0);
    bezierVertex(-40, -5, -30, -40, -80, -20);
    bezierVertex(-47, -16, -52, 8, 0, 0);
    endShape(CLOSE);
    scale(1/min((float)(frameCount-100)/100, 1), 1/min((float)(frameCount-100)/100, 1));
    translate(-initalloX, -(initalloY-200));
    noStroke();
  }
  //stem2
  if (frameCount>151) {
//  noStroke();
    translate(initalloX, initalloY-300);
    scale(-min((float)(frameCount-150)/150, 1), min((float)(frameCount-150)/150, 1));
    beginShape();
    vertex(0, 0);
    bezierVertex(-40, -5, -30, -40, -80, -20);
    bezierVertex(-47, -16, -52, 8, 0, 0);
    endShape(CLOSE);
    scale(-1/min((float)(frameCount-150)/150, 1), 1/min((float)(frameCount-150)/150, 1));
    translate(-initalloX, -(initalloY-300));

    }
  }
 }

class Circle {

  int c1 = 0;
  int c2 = -40;
  float c3 = 50;
  float c4 = 50;

  Circle(int tc1, int tc2, float tc3, float tc4) {
    c1 = tc1;
    c2 = tc2;
    c3 = tc3;
    c4 = tc4;
   }
 } 
```

这是程序中的一个函数，它是用Processing编写的。提前感谢您的帮助/输入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:58:33.590

_hi theolc，为了你不断成长的花朵，我会做这样的事情，对你来说是一个非常简单的开始；）。看看有没有帮助。我选择使用三角法，因为在这种情况下，它似乎比旋转更容易控制。检查一下（单击鼠标以增长/单击按住任意键以缩小）：

```
Stem myStem;
Circle circles[];
Flower p = new Flower();

float scaleFactor=0.5;

void setup() {

  size(floor(400*scaleFactor), floor(800*scaleFactor));
  myStem = new Stem(200, 800);
  p = new Flower (0, 0);
  //mpoved this to setup, no need to recreate each frame
  circles = new Circle[6];
  circles[0]  = new Circle(0, -40, 50, 50);
  circles[1]  = new Circle(0, -40, 50, 50);
  circles[2]  = new Circle(0, -40, 50, 50);
  circles[3]  = new Circle(0, -40, 50, 50);
  circles[4]  = new Circle(0, -40, 50, 50);
  circles[5]  = new Circle(0, 0, 50, 50);
  // also smooth only needs to be called once
  // unless ther is a noSmooth() somewhere
  smooth();
}

void draw() {

  float grow = 0;
  //translate(myStem.initalloX, myStem.initalloY);  
  myStem.drawStem();
  //set centre point
  if (frameCount>grow) {

    translate(myStem.initalloX, ((frameCount>250)?myStem.initalloY-      500:myStem.initalloY-(2*frameCount)));

    fill(170, 14, 24); // red
    for (int i = 0; i < circles.length-1; i++) {
      ellipse(circles[i].c1+grow, circles[i].c2+grow, circles[i].c3+grow, circles[i].c4+grow);
      rotate(radians(72));
    }
    fill(14, 17, 170); // blue
    ellipse(circles[5].c1, circles[5].c2, circles[5].c3, circles[5].c4);
    p.grow();
  }

  p.display();
}

class Stem { 
  int initalloX=200;
  int initalloY=800;

  Stem(int tempInitalloX, int tempInitalloY) {
    initalloX = tempInitalloX;
    initalloY = tempInitalloY;
  }

  void drawStem() {
    background(#0DBADB);
    scale(scaleFactor, scaleFactor);
    stroke (12, 149, 11);
    fill (12, 149, 11);
    strokeWeight(10);
    line(initalloX, initalloY, initalloX, ((frameCount>250)?initalloY-500:initalloY-(2*frameCount)));
    //stem1
    if (frameCount>101) {
      noStroke();
      translate(initalloX, initalloY-200);
      scale(min((float)(frameCount-100)/100, 1), min((float)(frameCount-100)/100, 1));
      beginShape();
      vertex(0, 0);
      bezierVertex(-40, -5, -30, -40, -80, -20);
      bezierVertex(-47, -16, -52, 8, 0, 0);
      endShape(CLOSE);
      scale(1/min((float)(frameCount-100)/100, 1), 1/min((float)(frameCount-100)/100, 1));
      translate(-initalloX, -(initalloY-200));
      noStroke();
    }
    //stem2
    if (frameCount>151) {
      //  noStroke();
      translate(initalloX, initalloY-300);
      scale(-min((float)(frameCount-150)/150, 1), min((float)(frameCount-150)/150, 1));
      beginShape();
      vertex(0, 0);
      bezierVertex(-40, -5, -30, -40, -80, -20);
      bezierVertex(-47, -16, -52, 8, 0, 0);
      endShape(CLOSE);
      scale(-1/min((float)(frameCount-150)/150, 1), 1/min((float)(frameCount-150)/150, 1));
      translate(-initalloX, -(initalloY-300));
    }
  }
}

class Circle {

  int c1 = 0;
  int c2 = -40;
  float c3 = 50;
  float c4 = 50;

  Circle(int tc1, int tc2, float tc3, float tc4) {
    c1 = tc1;
    c2 = tc2;
    c3 = tc3;
    c4 = tc4;
  }
}

class Flower {

  float centerX;
  float centerY;
  float posX;
  float posY;
  float maxSize = 51;
  float maxFactor = 40;
  float sizes = 0;
  float factor = 0;
  float speed = 0.17;

  Flower() {
  }
  Flower(float _centerX, float _centerY)
  {
    centerX = _centerX;
    centerY = _centerY;
  }

  void setCenter(float x, float y)
  {
    centerX = x;
    centerY = y;
  }

  void display()
  {
    for (int i = -18; i < 360; i+=72)
    {
       posX = centerX + cos(radians(i)) * factor;
       posY = centerY + sin(radians(i)) * factor;
      noStroke();
      fill(14, 170, 170 ); // blue
      ellipse(posX, posY, sizes, sizes);
    }
    fill(145, 170, 170);

    ellipse(centerX, centerY, sizes , sizes );
  }

  void grow()
  {
    factor = (factor < maxFactor )?  factor + speed: maxFactor;
    sizes = (sizes < maxSize )?  sizes + speed*1.3 : maxSize;

  }
}// end of Flower 
```

# linux - 没有为 SVN 存储库用户设置权限

> ID：13487286
> 
> 赞同：1
> 
> 时间：2012-11-21T06:00:30.433
> 
> 标签：linux, svn

我刚刚在本地网络中设置了 SVN 服务器。为此，我关注了这个[链接](http://wiki.centos.org/HowTos/Subversion)。但我的问题是我在`/etc/svn-auth-conf`文件中创建的任何用户都只允许进行签出和提交，实际上这个用户拥有所有权利。我如何限制他们的权限？

这是我的`/etc/httpd/conf.d/subversion.conf`文件

```
LoadModule dav_svn_module     modules/mod_dav_svn.so
LoadModule authz_svn_module   modules/mod_authz_svn.so

<Location /repos>
   DAV svn
   SVNParentPath /var/www/html/svn
   AuthType Basic
   AuthName "Subversion repos"
   AuthUserFile /etc/svn-auth-conf
   Require valid-user
</Location> 
```

另一件事是，当我使用命令创建任何存储库时，会在存储库文件夹`svnadmin`中创建不同的配置文件，例如. 我按照[此链接](http://wiki.wsmoak.net/cgi-bin/wiki.pl?Subversion/Configuration)设置权限。`conf``authz,passwd,svnserve.conf`

那么如何为特定用户设置特定权限呢？

IE

```
user1=All permissions
user2=read
other=none 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T06:20:40.403

要通过 http 访问，您必须在 authz 文件中包含每个文件夹的权限

像这样：

```
[/]
#rw is read-write, r is read only, and empty is none
user1 = rw
user2 = r
* = 
```

您还可以在 [groups] 部分定义用户组，并使用 @group_name 分配权限，如下所示：

```
[groups]
dev = jdoe,user3
qa = user4,user5

[/some/other/path]
@dev = rw
@qa = r
* = 
```

**编辑** 最后，您的 apache conf 缺少一个重要部分，它必须包含 AuthzSVNAccessFile 指令，例如：

```
 <Location /project/src>
            DAV svn
            SVNPath /var/svn/project
            AuthzSVNAccessFile /var/svn/project/conf/authz
            AuthType Basic
            AuthName "Project source repository"
            AuthUserFile /var/svn/.dav_svn.passwd
            Require valid-user
    </Location> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:11:51.943

利用

```
 chown -R groupname:groupname folder
 chmod -R <permission> directory-name/ 
```

权限可以是766，用户可以读写执行，其他人和组可以读写

查看手册页以获取更多信息

设置用户和读或写限制

# android - 需要帮助来创建循环列表视图

> ID：13487295
> 
> 赞同：-1
> 
> 时间：2012-11-21T06:01:35.177
> 
> 标签：android, android-listview

我想在android中创建一个循环列表视图（滚动到最后一个元素后它开始显示第一个元素并继续）但我在网络上没有找到任何帮助。我只想知道它们在 Android 中的任何默认属性/组件是否支持循环列表视图，或者我需要通过为其添加一些逻辑来创建自定义列表视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T06:09:37.673

检查此[循环列表适配器](https://github.com/ragunathjawahar/circular-list-adapter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:17:26.460

如果使用 LoadersCallbacks 我已经创建了 MyCircularCursor 类，它像这样包装典型的光标：

```
@Override
public void onLoadFinished(Loader<Cursor> pCursorLoader, Cursor pCursor) {
        mItemListAdapter.swapCursor(new MyCircularCursor(pCursor));
} 
```

装饰器类代码在这里：

```
/**
 * {@link MyCircularCursor}<br/>
 * <br/>
 * @author Vilius Kraujutis
 * @since 31 Jan 2013 02:09:48
 *
 */
public class MyCircularCursor implements Cursor {

private Cursor mCursor;

/**
 * @param pCursor
 */
public MyCircularCursor(Cursor pCursor) {
    mCursor = pCursor;
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#getCount()
 */
@Override
public int getCount() {
    return mCursor.getCount() == 0 ? 0 : Integer.MAX_VALUE;
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#getPosition()
 */
@Override
public int getPosition() {
    return mCursor.getPosition();
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#move(int)
 */
@Override
public boolean move(int pOffset) {
    return mCursor.move(pOffset);
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#moveToPosition(int)
 */
@Override
public boolean moveToPosition(int pPosition) {
    int position = MathUtils.mod(pPosition, mCursor.getCount());
    return mCursor.moveToPosition(position);
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#moveToFirst()
 */
@Override
public boolean moveToFirst() {
    return mCursor.moveToFirst();
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#moveToLast()
 */
@Override
public boolean moveToLast() {
    return mCursor.moveToLast();
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#moveToNext()
 */
@Override
public boolean moveToNext() {
    if (mCursor.isLast()) {
        mCursor.moveToFirst();
        return true;
    } else {
        return mCursor.moveToNext();
    }
    // return mCursor.moveToNext();
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#moveToPrevious()
 */
@Override
public boolean moveToPrevious() {
    if (mCursor.isFirst()) {
        mCursor.moveToLast();
        return true;
    } else {
        return mCursor.moveToPrevious();
    }
    // return mCursor.moveToPrevious();
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#isFirst()
 */
@Override
public boolean isFirst() {
    // return mCursor.isFirst();
    return false;
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#isLast()
 */
@Override
public boolean isLast() {
    return false;
    // return mCursor.isLast();
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#isBeforeFirst()
 */
@Override
public boolean isBeforeFirst() {
    return false;
    // return mCursor.isBeforeFirst();
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#isAfterLast()
 */
@Override
public boolean isAfterLast() {
    return false;
    // return mCursor.isAfterLast();
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#getColumnIndex(java.lang.String)
 */
@Override
public int getColumnIndex(String pColumnName) {
    return mCursor.getColumnIndex(pColumnName);
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#getColumnIndexOrThrow(java.lang.String)
 */
@Override
public int getColumnIndexOrThrow(String pColumnName) throws IllegalArgumentException {

    return mCursor.getColumnIndexOrThrow(pColumnName);
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#getColumnName(int)
 */
@Override
public String getColumnName(int pColumnIndex) {

    return mCursor.getColumnName(pColumnIndex);
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#getColumnNames()
 */
@Override
public String[] getColumnNames() {

    return mCursor.getColumnNames();
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#getColumnCount()
 */
@Override
public int getColumnCount() {

    return mCursor.getColumnCount();
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#getBlob(int)
 */
@Override
public byte[] getBlob(int pColumnIndex) {

    return mCursor.getBlob(pColumnIndex);
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#getString(int)
 */
@Override
public String getString(int pColumnIndex) {

    return mCursor.getString(pColumnIndex);
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#getShort(int)
 */
@Override
public short getShort(int pColumnIndex) {

    return mCursor.getShort(pColumnIndex);
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#getInt(int)
 */
@Override
public int getInt(int pColumnIndex) {

    return mCursor.getInt(pColumnIndex);
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#getLong(int)
 */
@Override
public long getLong(int pColumnIndex) {

    return mCursor.getLong(pColumnIndex);
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#getFloat(int)
 */
@Override
public float getFloat(int pColumnIndex) {

    return mCursor.getFloat(pColumnIndex);
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#getDouble(int)
 */
@Override
public double getDouble(int pColumnIndex) {

    return mCursor.getDouble(pColumnIndex);
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#getType(int)
 */
@Override
public int getType(int pColumnIndex) {
    // return mCursor.getType(pColumnIndex);
    return 0;
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#isNull(int)
 */
@Override
public boolean isNull(int pColumnIndex) {

    return mCursor.isNull(pColumnIndex);
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#deactivate()
 */
@Override
public void deactivate() {
    mCursor.deactivate();
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#requery()
 */
@Override
@Deprecated
public boolean requery() {

    return mCursor.requery();
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#close()
 */
@Override
public void close() {
    mCursor.close();
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#isClosed()
 */
@Override
public boolean isClosed() {

    return mCursor.isClosed();
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#registerContentObserver(android.database.ContentObserver)
 */
@Override
public void registerContentObserver(ContentObserver pObserver) {
    mCursor.registerContentObserver(pObserver);
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#unregisterContentObserver(android.database.ContentObserver)
 */
@Override
public void unregisterContentObserver(ContentObserver pObserver) {
    mCursor.unregisterContentObserver(pObserver);
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#registerDataSetObserver(android.database.DataSetObserver)
 */
@Override
public void registerDataSetObserver(DataSetObserver pObserver) {
    mCursor.registerDataSetObserver(pObserver);
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#unregisterDataSetObserver(android.database.DataSetObserver)
 */
@Override
public void unregisterDataSetObserver(DataSetObserver pObserver) {
    mCursor.unregisterDataSetObserver(pObserver);
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#setNotificationUri(android.content.ContentResolver,
 * android.net.Uri)
 */
@Override
public void setNotificationUri(ContentResolver pCr, Uri pUri) {
    mCursor.setNotificationUri(pCr, pUri);
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#getWantsAllOnMoveCalls()
 */
@Override
public boolean getWantsAllOnMoveCalls() {

    return mCursor.getWantsAllOnMoveCalls();
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#getExtras()
 */
@Override
public Bundle getExtras() {

    return mCursor.getExtras();
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#respond(android.os.Bundle)
 */
@Override
public Bundle respond(Bundle pExtras) {

    return mCursor.respond(pExtras);
}

/*
 * (non-Javadoc)
 * @see android.database.Cursor#copyStringToBuffer(int, android.database.CharArrayBuffer)
 */
@Override
public void copyStringToBuffer(int pColumnIndex, CharArrayBuffer pBuffer) {
    mCursor.copyStringToBuffer(pColumnIndex, pBuffer);

}

} 
```

# web-services - jibx 异常

> ID：13487296
> 
> 赞同：-1
> 
> 时间：2012-11-21T06:01:36.347
> 
> 标签：web-services, jibx

当我在服务接口上运行 jibx2wsdl 时，异常被重命名为 Fault。例如：InvalidEmployeeException 将变为 InvalidEmployeeFault。

根据文档，这样做是为了解决一些 Axis 要求。有 org.jibx.ws.wsdl.tools.custom.FaultCustom 类，我们可以使用它来覆盖此行为。但是没有规定在 wsdl 定制中指定 faultCustom 属性。

如果有任何其他解决问题的方法，请恢复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:37:10.480

我可以通过修改 org.jibx.ws.wsdl.tools.custom.FaultCustom.apply() 来做到这一点。

由于其他一些原因，我们需要在服务消费者中使用相同的异常类。

# jquery - 可编辑插件选择标签问题：：来自 Java Servlet 的 JSon 数据，未使用 JEditable 插件填充到选择标签中

> ID：13487299
> 
> 赞同：2
> 
> 时间：2012-11-21T06:01:50.860
> 
> 标签：jquery, json, jeditable, html-select

我使用 Jeditable 进行编辑，使用 Tablesorter 使用 JQuery 进行表格排序和过滤。我有一张桌子。单击我想使用下拉列表更新数据的 selectClass 列。下拉是使用 loadurl 标记加载 JSON 数据，并带有 servlet 调用。我能够从服务器端打印 JSON 响应，但无法获取选择标签中的数据。

发送 JSON 数据的 Servlet 代码::

```
 if   (type.equals ("getAllCategoriess")){                
                  System.out.println(" Inside of getAllCategoriess ");
                    List<String> categories = new ArrayList <String> ();

                    categories.add ("Comedy");
                    categories.add ("Thriller");
                    categories.add ("Action");
                    categories.add ("Romantic");
                    categories.add ("Science");
                    categories.add ("News");
                    categories.add ("Political");

                    JSONArray arrayObj1=new JSONArray();
                    for (String str: categories)
                        arrayObj1.add (str);
                    out.println(arrayObj1.toString());

                    System.out.println ("array Object for getAll Categories:: "+arrayObj1.toString());                
                } 
```

加载数据的脚本::

```
$(".selectClass").editable('http://localhost:9090/Application1/query?type=setCategory', {
        indicator: "<img src=\"images/indicator.gif\">",
        loadurl : 'http://localhost:9090/Application1/query?type=getAllCategoriess',
        type   : "select",
        submit : "OK",
        style  : "inherit"
    }); 
```

我没有将数据放入选择标签/下拉列表中。如果我使用数据标签而不是 loadurl，它正在工作：。数据标签如下

```
data    : "{'0':'Please select...', '1':'Comedy','2':'Harror','3':'Thriller', '4': 'Atcion', '5': 'Romantic', '6' : 'Science'}" 
```

但我想从 JSON 数组加载数据。

请帮我解决这个问题？

# css - 边框颜色属性用作样式，而不是 CSS 类

> ID：13487303
> 
> 赞同：0
> 
> 时间：2012-11-21T06:01:59.620
> 
> 标签：css, twitter-bootstrap

我确定这是一个简单的问题，但我似乎无法让 css 类工作。我正在尝试在文本输入周围添加红色边框。如果我将边框颜色属性设置为内联，一切正常：

```
 <input type="text" placeholder ="Name" style="border-color: #b94a48;" /> 
```

如果我向周围的 div 添加一个类，以输入为目标，它可以正常工作：

```
.error-style input {
    border-style:solid;
    border-color: #b94a48;
}

<div class="control-group error-style">
    <div class="controls">
        <input type="text" placeholder ="Name"/>
    </div>
</div> 
```

但是，如果我只是将其设为一个类，并将其添加到输入中，则它不会显示：

```
.error-style {
    border-style:solid;
    border-color: #b94a48;
}

<input type="text" placeholder ="Name" class="error-style" /> 
```

我不确定这是否重要，但我也在项目中使用 Twitter Bootstrap。Bootstrap 的 CSS 文件可以在[这里找到](http://twitter.github.com/bootstrap/assets/css/bootstrap.css)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:57:55.973

在 bootstrap.css**第 1013 行**中，它使您的输入边框颜色变为灰色

解决使用以下css的问题

```
.controls .error-style{border-style:solid;border-color: #b94a48;} 
```

这样，您就可以为此类设置高优先级值。这种方式比使用 !important 要好得多。

我希望它能解决你的问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:04:40.397

边框需要一个宽度。如果这不起作用，请尝试将**重要性**应用于您的 CSS 类，因为其他 CSS 中可能存在覆盖它的内容：

```
.error-style {
    border: 1px solid #b94a48 !important;
}

<input type="text" placeholder="Name" class="error-style" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T06:06:03.980

你需要一个宽度：

```
.error-style input {
    border-style:solid;
    border-color: #b94a48;
    border-width: 1px;
} 
```

或者简单地说：

```
.error-style input {
    border: 1px solid #b94a48;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T06:22:54.643

采用：

```
.error-style
    {
        border:2px solid #b94a48;
    }

<input type="text" placeholder ="Name" class="error-style" /> 
```

您可以根据需要更改边框的宽度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T06:40:38.710

你应该像下面提到的那样写，它的工作正常......

**CSS**

```
.error-style {
      border:2px solid #b94a48;
} 
```

**HTML**

```
<input type="text" placeholder="Name" class="error-style" /> 
```

**[演示](http://tinkerbin.com/pGqegwmr)**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-09T09:49:51.207

尝试将源添加到 bootstrap.css 文件，然后再将源添加到您的自定义 css。

```
<link href="bootstrap.css" rel="stylesheet" />
<link href="yourCustom.css" rel="stylesheet" /> 
```

//yourCustom.css

```
.error-style {
    border: 1px solid #b94a48 !important;
} 
```

CSS 渲染是级联的。最新提供的值将应用于元素。仅当旧值被标记为 !important 时，新值才会起作用。

# java - Eclipse CDT 构建设置因重新启动而丢失

> ID：13487312
> 
> 赞同：1
> 
> 时间：2012-11-21T06:02:43.197
> 
> 标签：java, eclipse, project, flags, eclipse-cdt

我以编程方式创建了一个 Eclipse CDT 项目，并在 Cygwin C 编译器的杂项标志（Buld -> Settings-> Tool Settings）中设置了一些额外的选项。

我的问题是当我重新启动 eclipse 时，我看不到我以编程方式输入到标志中的额外值。它总是重置为默认值。

这种方法有什么问题？

# java - 私有关键字和虚函数访问

> ID：13487317
> 
> 赞同：1
> 
> 时间：2012-11-21T06:03:23.463
> 
> 标签：java

我正在学习 Java 并试图了解`private`,`protected`和`public`修饰符如何影响绑定。

我写了这段代码：

```
public class A {

    public void a() {
        System.out.println("a in A.");
        b();
    }

    private void b() {
        System.out.println("b in A.");
    }

    public static void main(String[] args) {
        B obj = new B();
        obj.a();
    }
} 

class B extends A {
    public void b() {
        System.out.println("b in B.");
    }
} 
```

输出是：

```
a in A.
b in A. 
```

尽管如此，`B`它还是有自己的`b`方法，并且`obj`是`B`的实例。为什么输出不是以下？

```
a in A.
b in B. 
```

但是，如果我将`b`方法更改`A`为以下内容：

```
public void b() {
    System.out.println("b in A.");
} 
```

输出更改为预期：

```
a in A.
b in B. 
```

那么，为什么在使用关键字 in`b`声明时它的行为不像虚函数？`private``A`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:05:14.897

因为私有方法（和字段）在类之外是不可见的，包括对子类。所以私有方法不是外部接口的一部分，不能被覆盖。

该类 B 声明具有相同签名的同名方法无关紧要。私有方法对 B 是完全不可见的，所以它也可以有一个不同的名称。这两种方法根本没有关系。

当您创建方法`public`（或`protected`）时，它成为类 API 的一部分并且可以被覆盖。

用`@Override`. 然后编译器会告诉你它是否没有（你会在这个例子中得到一个编译错误），所以这有助于捕捉拼写错误、不匹配的签名和其他东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T06:19:17.447

那是因为根据[JLS](http://docs.oracle.com/javase/specs/jls/se5.0/html/names.html#104285)，

> 私有类成员或构造函数只能在包含成员或构造函数声明的顶级类（第 7.6 节）的主体内访问。它不被子类继承。

所以上面回答了你的问题。但是如果该案例是受保护的或公开的，那么这是有效的：

```
class Ex{
   protected void a()
   {        
   }
} 

 class Child extends Ex{
    @Override
    public void a()
    {

    }
 }
` 
```

# asp.net - 从字符串“31/08/2012”到日期的转换无效？

> ID：13487319
> 
> 赞同：1
> 
> 时间：2012-11-21T06:03:29.127
> 
> 标签：asp.net, sql-server, datetime, type-conversion

我从我的 sql server database.ie 在我的网页中绑定了日期

```
Convert(CHAR(10), date, 103). 
```

2012 年 8 月 31 日。不是 2012 年 8 月 31 日 12:00:00。当我将此日期插入 sql Server 时，出现错误，例如从字符串 '31/08/2012' 到日期的转换无效？我正在使用 en-US 格式...而且我将 datetimeformat 设置为“dd/MM/yyyy”。首先，我使用的是 en-GB 格式。同样的错误来了。之后，我将 en-GB 更改为 en-US 格式。还是那个错误来了。如何纠正该错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:12:15.037

您需要在代码隐藏文件中根据您的文化转换日期。

// 您输入日期的格式

```
 string format = "MM/dd/yyyy HH:mm:ss"; 
```

// 在这里给出你的文化

```
 CultureInfo c = new CultureInfo("en-US"); 
```

// txtDate.Text 是您的日期字段

```
 DateTime concatenatedDate = DateTime.ParseExact(txtDate.Text, format, c); 
```

现在通过cs文件在查询或存储过程中传递这个concatenatedDate。它肯定会为你工作。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:09:41.523

像这样将日期字符串转换为日期时间

```
DateTime.ParseExact(dateTimeString, "dd/MM/yyyy", null).ToString("MM/dd/yyyy") 
```

比传递给数据库解决问题

更多细节：[DateTime.TryParseExact](http://msdn.microsoft.com/en-us/library/ms131044.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T07:02:57.297

尝试以`"yyyy/MM/dd"`格式插入日期。它会起作用的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T06:30:00.723

```
DateTime.TryParse(dateTimeString, out dateReturn); 
```

# extjs - 将选中的复选框限制为 5 个

> ID：13487320
> 
> 赞同：3
> 
> 时间：2012-11-21T06:03:29.780
> 
> 标签：extjs, extjs4

我有六个复选框，默认情况下，加载时会选择两个复选框，在我想选择更多复选框之后，但是如果我尝试选择所有复选框，它将显示警报并且无法选择全部。意味着在每种情况下，它都可以选择一个或最多五个复选​​框。那么我该如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:54:48.797

使用 Checkboxgroup 并验证更改。这是一个工作示例：

```
{
    xtype: 'checkboxgroup',
    fieldLabel: 'Two Columns',
    // Arrange checkboxes into two columns, distributed vertically
    columns: 2,
    vertical: true,
    msgTarget: 'title',
    listeners: {
        change: function(cb,nv,ov) {
            if(Ext.isArray(nv.rb)) {
                if(nv.rb.length > 5){
                    cb.markInvalid('You can select only 5!');
                } else {
                   cb.clearInvalid(); 
                }
            } else {
                cb.markInvalid('You need to select at least 2!');
            }
        }
    },
    items: [
        { boxLabel: 'Item 1', name: 'rb', inputValue: '1', checked: true },
        { boxLabel: 'Item 2', name: 'rb', inputValue: '2', checked: true },
        { boxLabel: 'Item 3', name: 'rb', inputValue: '3' },
        { boxLabel: 'Item 4', name: 'rb', inputValue: '4' },
        { boxLabel: 'Item 5', name: 'rb', inputValue: '5' },
        { boxLabel: 'Item 6', name: 'rb', inputValue: '6' }
    ]
} 
```

# android - android中的位置地址验证

> ID：13487322
> 
> 赞同：2
> 
> 时间：2012-11-21T06:03:36.807
> 
> 标签：android, android-maps

我只想验证android中的位置地址。我有一个EditText。如果我输入一个位置地址（如sanjose，US 9746），我需要检查这是否有效。我认为可以使用谷歌地图。但是我不知道如何检查输入的地址是否有效？任何例子都非常值得赞赏。

谢谢。

# c# - 在使用 c# 开始安装之前，我需要检查是否已经安装了 exe？

> ID：13487326
> 
> 赞同：-4
> 
> 时间：2012-11-21T06:03:52.637
> 
> 标签：c#, .net

在使用 c# 开始安装之前，我需要检查是否已经安装了 exe？

在我的过程中，如果 exe 已经安装意味着我不应该再次尝试安装它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T06:08:07.430

你是如何安装你的应用程序的？如果您使用 ClickOnce 或 .msi 文件，则存在检测应用程序已安装的机制（因为 ID 匹配）。

如果您使用的是自定义构建的安装程序，则需要将该信息存储在某处，通常使用注册表（HKEY_LOCAL_MACHINE/Software/YourProduct 是通常的位置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:07:00.723

当您安装它时，在注册表中的某个键中写入一个指示它安装位置的值。下次阅读此注册表项。如果密钥存在，请不要再次安装。

# javascript - CAD/AutoCAD 文件的 Javascript/canvas 渲染器

> ID：13487327
> 
> 赞同：5
> 
> 时间：2012-11-21T06:03:53.953
> 
> 标签：javascript, three.js, autocad, cad

有谁知道javascript中是否有用于autocad/cad格式文件的解析器？或者可能是服务器端可以将 cad 文件转换为 collada 以便three.js（和其他一些引擎）可以读取它们？

非常感谢任何链接和指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T06:12:07.717

Python 有一个 autocad 库[http://pypi.python.org/pypi/pyautocad/](http://pypi.python.org/pypi/pyautocad/)它提供 json 导出。它适用于 Windows。

如果您可以接受在 Windows 服务器上运行的 Python，我认为它可以成为服务器端解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:19:30.063

您可以查看[OpenCascade](http://www.opencascade.org/)和用 C++ 开发的[社区版。](https://github.com/tpaviot/oce)社区版似乎有一个实验性的[COLLADA 导出器。](https://github.com/tpaviot/oce/wiki/COLLADA-exporter)

如果您更喜欢使用 Python，您应该查看[pythonOCC](http://www.pythonocc.org/)项目，尤其是他们对 Three.js 所做的工作：[文章](http://www.pythonocc.org/news/experimental-webgl-renderer-towards-cad-in-a-browser/)和[来源](http://code.google.com/p/pythonocc/source/browse/branches/webgl)。

# proguard - proguard：从 build.xml 构建时出现“不支持加密的 ZIP 条目”错误

> ID：13487331
> 
> 赞同：0
> 
> 时间：2012-11-21T06:04:33.007
> 
> 标签：proguard

我正在使用 Proguard 使我的类不可反编译。我在 build.xml 文件中添加了一个 Ant 任务。下面是片段。

```
<target name="obfuscate">
 <taskdef resource="proguard/ant/task.properties" classpath="${lib.dir}/proguard.jar" />
    <proguard>
           <injar file="${build.dir}/api.jar" />
       <outjar file="${build.dir}/finalApi.jar" />
       <libraryjar refid="standard-classpath" />
      <keepdirectory name="${src.class.dir}/config.zip" />
        </proguard>
</target> 
```

我的 jar 中有一个配置 zip 文件，该文件已加密，因为它包含证书，我不希望用户看到。当我使用 progaurd 创建新 jar 时，出现以下错误。\build.xml:100：无法读取 [\classes]（**不支持加密的 ZIP 条目**）

请让我知道如何将此文件包含在通过 progaurd 创建的新 jar 中。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T23:09:44.497

ProGuard 读取所有输入目录和档案（也包括嵌套的）以处理它们。它将在加密条目上失败。您可以在 ProGuard 在构建过程中运行之后添加此类条目，或者您可以尝试对加密的 zip 文件使用不同的扩展名。

# java - 广告调度奖计算

> ID：13487332
> 
> 赞同：-1
> 
> 时间：2012-11-21T06:04:34.057
> 
> 标签：java, mysql

我们正在开发广告调度系统。现在，我们要为此计算奖品详细信息。现在，数据库就像，我们有 2 个表 city 和 daypart。city 包含 30+ 百万条记录，daypart 包含 6am 到 10pm 等 6 条记录。现在我们要计算广告的奖金。即，如果任何用户向孟买市投放了 3 天的广告，那么如何计算奖金。一种方法是再创建一张桌子，并在其中保留城市和时段及其奖品的所有组合。但是这个表包含 60+ 百万条记录，如果添加了新的时段，那么我们必须再次更新这个表，这更有问题。前任。city 包含 1 条记录，daypart 包含 6 条记录，则新表包含总共 6 条记录及其奖品。有没有其他方法来计算上述情况的奖金？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:59:22.333

正如您所提到的，奖金金额可能会因城市或时段而有所不同，并且听起来没有任何标准算法或计算可以根据城市和时段来计算奖金（奖金金额似乎是您系统的专有信息） - 所以某种查找表可能是您最好的选择。

我想你的表格列看起来像这样：

```
Countries: id (integer, non-null), countryName
Cities:    id (integer, non-null), cityName,   countryId
Prizes:    cityId, startHour, amountPerHour 
```

一些注意事项：

*   根据您的 30+ 百万城市记录的信息，城市和国家被分成多个表。
*   与其将“时段”存储为时间范围（下午 3 点至下午 6 点），不如将其存储为从特定时间开始的每小时价格。例如：

    *   如果 CityA (id=1) 早上 6 点到 9 点花费 15 美元，早上 9 点到中午 12 点花费 30 美元（为简单起见，否则为 0），则此表将包含以下条目：

        ```
        cityId    startHour    amountPerHour
         1         0            0
         1         6            5
         1         9            10
         1         12           0 
        ```

    *   这使您可以灵活地轻松添加新的时段（您关心的一个问题），甚至每个城市都有不同的时段。StartHour 将表示一天中的 startHour (0-23)，如果需要，甚至可以是十进制值（12.5 表示下午 12:30）。
    *   时间范围的计算只需弄清楚你的范围内有多少个 startHours，然后用 amountPerHour 做一些基本的数学运算。

如果这不能满足您的需求，另一种选择（如您所提到的）只是一个直接查找表，在这种情况下，您将有一个时段表，而奖品表将变为`cityId | daypartId | amount`.

如果您担心性能，那么表的大小并不是那么糟糕 - 特别是如果您正确使用主键列并具有表索引。

# android - 如何在 android 屏幕中创建更多字段？

> ID：13487340
> 
> 赞同：0
> 
> 时间：2012-11-21T06:05:09.133
> 
> 标签：android

我正在研究android项目。我需要创建一个证书表单，其中包含许多具有不同面板的文本字段。我怎样才能为此创建一个屏幕？我有两种方法：

1.  使用滚动视图在一个页面中显示所有字段。
2.  放置下一个按钮并在每个页面中创建每个面板。

任何人都可以建议在移动设备中创建屏幕的任何其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:48:17.260

您可以使用滚动视图并尽量减少 textView 的数量，
请查看以下示例：-

```
Name: Hello World
Age: 21
City: Every Where
DOB: 10/6/1990 
```

老式的方法是为每个标签创建一个 textview，这意味着您需要 8 个 textview，这对性能不利，

我建议您创建相同的输出但**只有两个 textViews**，第一个用于左列第二个用于右列。

使用 StringBuilder 来填充左右列。

这是一个非常好的解决方案，我在社交应用程序上工作过，包含用户个人资料，每个个人资料都有超过 80 个视图，我对这个问题很粗心，但是当我们在市场上安装应用程序时，我们得到了很多错误并抱怨性能，所以我不得不减少文本视图并使用 StringBuilders

# ios - iOS：如何避免多个按钮同时调用一个共享函数

> ID：13487346
> 
> 赞同：0
> 
> 时间：2012-11-21T06:05:32.953
> 
> 标签：ios, button

> **可能重复：**
> [ios sdk 停止多点触控功能](https://stackoverflow.com/questions/13428439/ios-sdk-stop-multitouch-functionality)

我有一堆按钮，它们都调用相同的功能。该功能包括按钮本身的动画。假设用户单击任何按钮并获得应该显示的内容。但是，用户可能同时（或几乎同时）使用两个手指并触摸两个按钮。在这种情况下，我看到两个按钮开始动画。如何限制一次只能调用一个按钮。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-21T06:14:01.850

```
You can set exclusive touch to all buttons-
[button setExclusiveTouch:YES]; 
```

看看[iOS：为视图中的所有按钮设置Exclusive Touch](https://stackoverflow.com/questions/11919624/ios-setting-exclusive-touch-to-all-buttons-in-a-view)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T06:13:27.717

将`BOOL`值设置为`YES`。当您按下第一个按钮时。并将其设置为`NO`动画完成块。并检查`BOOL`调用动画方法，如果 BOOL 为 YES 则不要调用第二个按钮的动画或删除第一个按钮的动画并调用第二个方法的动画。

```
@interface yourClass
{
   BOOL animationStarted;
}
@end

-(IBAction)click:(id)sender
{
   if(!animationStarted)
   {
      animationStarted = YES;
      //call the animation
   }
   else
   {
      //you can do two things here
      //1.Skip the second button click
      //2.Remove first button animation and start second button animation
   }
} 
```

在动画完成块中：设置`animationStarted = NO;`

# javascript - 谷歌应用脚 本从网站中提取文本

> ID：13487351
> 
> 赞同：2
> 
> 时间：2012-11-21T06:05:47.757
> 
> 标签：javascript, google-apps-script

例如，我制作了一个 shell 脚本来提取游戏网站上列出的玩家数量。我拿了这个数字并添加了一个时间戳，然后把它放在谷歌电子表格上，这样我就可以随着时间的推移制作一个图表来跟踪数据。唯一的问题是运行它，我需要让我的电脑保持开机状态，我猜你可以用某种谷歌脚本来做到这一点，但我不知道如何开始这样做。

我使用的shell脚本是：

```
 wget --output-document=- http://runescape.com/title.ws 2>/dev/null \
| grep PlayerCount \
| head -1l \
| sed 's/^[^>]*>//' \
| sed "s/currently.*$/$(date '+%m\/%d\/%Y %H:%M:%S')/" \
| cut -d">" -f 3,4 \
| sed 's/<\/span>//' \
| sed 's/,//' \
| awk '{printf "%s %s,%s,%s\n", $3, $4, $1, $2}' 
```

输出示例：`11/21/2012 01:02:22,52833,people`

例如，我想要的是让它自动提取该号码并将其存储在一个单元格中，例如每 2 分钟。但我不确定它有多容易或从哪里开始。

然后它看起来像[http://i.imgur.com/xRpNy.png](http://i.imgur.com/xRpNy.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T10:40:31.607

如果您在执行此操作时可能会遇到配额限制，则可能是这样。但这就是我的做法。

```
function pullRuneScape() {
  var page = UrlFetchApp.fetch('http://runescape.com/title.ws').getContentText();
  var number = page.match(/PlayerCount.*>([0-9,]+)</)[1];
  SpreadsheetApp.getActive().getSheetByName('Sheet1').appendRow([new Date(), number]);
} 
```

打开 Google 电子表格，然后单击菜单工具 > 脚本编辑器，粘贴上面的代码并保存。仍然在脚本编辑器上，单击资源 > 当前脚本的触发器。然后将此函数设置为在时间驱动的触发器上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:35:29.650

您可以在 Apps Script 中使用 UrlFetch App 来获取页面内容，并且可以使用正则表达式对其进行解析以获取玩家数量。这是我尝试过的一个小代码。它使用 YQL 和 Apps 脚本来避免正则表达式解析。

```
function retreiveOnlineUsers(){
  var query = 'select * from html where url="http://runescape.com/title.ws" and xpath=\'//div[@id="PlayerCount"]/p[1]/span\'&format=json';
  var yql = 'http://query.yahooapis.com/v1/public/yql?q=';
  var queryURL = yql+encodeURI(query);
  var jsonString = UrlFetchApp.fetch(queryURL).getContentText();
  var json = Utilities.jsonParse(jsonString);
  var palyerCount = json.query.results.span;
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheets()[0];
  l = sheet.getLastRow();
  sheet.getRange(l+1, 1, 1, 3).setValues([[new Date(), palyerCount, 'people']]);
} 
```

参考：

*   [YQL 控制台](http://developer.yahoo.com/yql/console/#h=select%20%2a%20from%20html%20where%20url=%22http://runescape.com/title.ws%22%20and%0A%20%20%20%20%20%20xpath=%27//div%5B@id=%22PlayerCount%22%5D/p%5B1%5D/span%27)
*   [UrlFetch Apps 脚本](https://developers.google.com/apps-script/service_urlfetch)

该脚本已经过测试并且可以正常工作。以下是使其与您的电子表格一起使用的步骤。

1.  创建一个新的空电子表格并用名称保存
2.  通过单击“工具”菜单打开脚本编辑器，然后选择“脚本编辑器...”。
3.  复制并粘贴以下脚本
4.  保存脚本
5.  在功能组合框中选择功能 retreiveOnlineUsers 并单击“运行”，这将在您的工作表中填充一行。
6.  现在您可以安排此脚本通过[时间驱动的触发器](https://developers.google.com/apps-script/understanding_triggers)运行。

# qt - 如何在 Qt 中创建热键字段

> ID：13487352
> 
> 赞同：2
> 
> 时间：2012-11-21T06:05:49.813
> 
> 标签：qt, qt4, qlineedit

允许用户输入组合键的最简单方法是什么？它基本上看起来像`QLineEdit`字段，但它只接受组合键。

例如，Qt 设计器中已经有一些东西，您可以在其中为操作分配快捷方式。我的要求完全一样。TIA

![编辑操作 - 分配快捷方式](../Images/45fdc4a6380ad02c06824140ede38bd9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T06:49:25.297

Qt Creator 实际上是开源的。因此，如果您确切地想要该对话框的作用，您可以窥视并查看他们是如何做到的。

该*“编辑操作”*对话框的实现位于名为“QtTools”的库中。这是头文件和源文件：

[actioneditor_p.h](http://qt.gitorious.org/qt/qttools/blobs/master/src/designer/src/lib/shared/actioneditor_p.h)

[动作编辑器.cpp](http://qt.gitorious.org/qt/qttools/blobs/master/src/designer/src/lib/shared/actioneditor.cpp)

...但它看起来有点间接，并且引导到表单引擎本身。您必须挖掘一段时间才能到达它实际捕获键序列的部分。休闲浏览无调试器建议它`QtKeySequenceEdit`在这些文件中实现：

[qtpropertybrowserutils_p.h](http://qt.gitorious.org/qt/qttools/blobs/master/src/shared/qtpropertybrowser/qtpropertybrowserutils_p.h)

[qtpropertybrowserutils.cpp](http://qt.gitorious.org/qt/qttools/blobs/master/src/shared/qtpropertybrowser/qtpropertybrowserutils.cpp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-19T03:42:46.973

从 Qt 5.2 开始，您可以为此目的使用[QKeySequenceEdit](https://qt-project.org/doc/qt-5-snapshot/qkeysequenceedit.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:55:50.210

我找到了一些替代方法来满足我的要求。我想要一个`QLineEdit`类似的输入字段，它将捕获符合以下格式的组合键：

*   Alt+Ctrl+Shift+X
*   Alt+Ctrl+X
*   Alt+Shift+X
*   Ctrl+Shift+X

最简单的方法是通过子类化`QLineEdit`和重新实现`keyPressEvent( QKeyEvent * event )`函数。我的头文件和 cpp 文件看起来像这样。任何人都可以操纵内部的逻辑`keyPressEvent`以满足他们的要求。

**QLineEditHotKey.h**

```
#include <QLineEdit>

class QLineEditHotKey: public QLineEdit
{
public:
    QLineEditHotKey( QWidget* pParent = NULL);
    ~QLineEditHotKey(){}
protected:
    void keyPressEvent ( QKeyEvent * event );
}; 
```

**QLineEditHotKey.cpp**

```
QLineEditHotKey::QLineEditHotKey(QWidget* pParent):QLineEdit(pParent)
{
}

void QLineEditHotKey::keyPressEvent( QKeyEvent * event )
{
    int keyInt = event->key(); 
    Qt::Key key = static_cast<Qt::Key>(keyInt); 

    // Handle unknown keys
    if( key == Qt::Key_unknown ) 
        return; 

    // Pressing Esc or Backspace will clear the content
    if( key == Qt::Key_Escape || key == Qt::Key_Backspace )
    {  
        setText(NULL);
        return;
    } 

    // Empty means a special key like F5, Delete, Home etc
    if( event->text().isEmpty() )
        return;

    // Checking for key combinations
    Qt::KeyboardModifiers modifiers = event->modifiers(); 

    if(modifiers.testFlag(Qt::NoModifier)) 
        return;
    if(modifiers.testFlag(Qt::ShiftModifier)) 
        keyInt += Qt::SHIFT; 
    if(modifiers.testFlag(Qt::ControlModifier)) 
        keyInt += Qt::CTRL; 
    if(modifiers.testFlag(Qt::AltModifier)) 
        keyInt += Qt::ALT; 

    setText( QKeySequence(keyInt).toString(QKeySequence::NativeText) );
} 
```

[这个](https://stackoverflow.com/questions/6647970/how-can-i-capture-qkeysequence-from-qkeyevent-depending-on-current-keyboard-layo)问题对找到解决方案非常有帮助。

# asp.net - 如何更改数据网格背景颜色

> ID：13487354
> 
> 赞同：0
> 
> 时间：2012-11-21T06:05:55.397
> 
> 标签：asp.net, .net, vb.net

使用 .Net 2005

我更改默认单元格样式中的背景行颜色（白色到蓝色）。但蓝色并未显示所有行。

替代行显示为白色。我想将所有行显示为相同的颜色。

谁能帮我做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T06:24:47.847

嗨，您可以像这样设置gridview行背景颜色

```
protected void gridview _RowDataBound(object sender, GridViewRowEventArgs e)
{
      if (e.Row.RowType == DataControlRowType.DataRow)
      {  e.Row.BackColor = System.Drawing.Color.Blue;  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:51:39.237

检查您是否在 aspx 的 gridview 中设置了 AlternatingRowStyle 属性。如果是，请将其删除并仅设置 RowStyle 属性。例如-

```
<RowStyle BackColor="#F7F6F3" ForeColor="#333333" /> 
```

# c# - 如何连接到 DB2？

> ID：13487357
> 
> 赞同：4
> 
> 时间：2012-11-21T06:06:22.367
> 
> 标签：c#, ado.net, db2

我必须连接到`DB2`安装在其他系统上的数据库。我有服务器的机器名称、我想连接的数据库名称、端口号和凭据。我的系统上没有为 DB2 安装任何客户端。我想使用`OLEDB`连接。

我可以在不安装客户端的情况下实现这一点吗？还让我知道哪些参考 dll 将帮助我实现这一目标，即我应该使用什么 - IBM OLE DB Provider for DB2 或 Microsoft OLEDB provider for IBM DB2 或其他？我在哪里可以找到它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T10:37:33.530

`OLEDB`参考.NET DB2 OLEDB[先决条件](https://stackoverflow.com/questions/5093443/net-db2-oledb-pre-requisites)

另请参阅：[OLE DB 和 ODBC 数据源有什么区别？](https://stackoverflow.com/questions/103167/what-is-the-difference-between-ole-db-and-odbc-data-sources)

对于`ODBC`连接，我使用以下

连接字符串

```
 <add name="DB2ConnectionString_XA"
    connectionString="Driver={IBM DB2 ODBC DRIVER};Database=MyDB;Hostname=DB2GWXX;Protocol=TCPIP;Port=3700;Uid=ffghxa;Pwd=xxxx;"/> 
```

代码：

```
using (OdbcConnection odbcConnection = new OdbcConnection(db2ConnectionString))
{
    odbcConnection.Open();

    // string commandText = "";

    using (OdbcCommand command = new OdbcCommand(commandText, odbcConnection))
    {
        command.CommandType = System.Data.CommandType.Text;
        using (OdbcDataReader reader = command.ExecuteReader())
        {
            if (reader.HasRows)
            {
                while (reader.Read())
                {
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-06-08T11:20:56.440

我以前使用过 ODBC，而不是 OLEDB，但如果您决定改变对 ODBC 的看法，我还是会分享链接。您至少需要安装 Db2 客户端和驱动程序。这会将 IMB DB" odbc 驱动程序安装到您的系统中（odbc 数据源）。驱动程序可从以下站点找到：[http](http://www-01.ibm.com/support/docview.wss?uid=swg27016878) ://www-01.ibm.com/support/docview.wss?uid=swg27016878 。

安装后添加对 IBM.Data.DB2.dll 的引用

# linq - 使用 Linq 获取最后一天的记录

> ID：13487362
> 
> 赞同：-2
> 
> 时间：2012-11-21T06:06:42.693
> 
> 标签：linq

我想得到最后一天的记录，。表是这样的：

`ID - DateTime -------------- ItemId
-1 - 10/21/2012 12:08:10 PM - 45
-2 - 11/21/2012 11:20:18 AM - 30
-3 - 11/21/2012 11:50:00 AM - 11`

在此示例中，我只想获取第 2 行和第 3 行。我该怎么做？

**我只想从 LAST DAY 获取条目。这是虚拟数据。**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:12:13.337

尝试[Skip](http://msdn.microsoft.com/en-us/library/bb358985.aspx)然后[Take](http://msdn.microsoft.com/en-us/library/bb503062.aspx)。

例子

```
 int[] ints = new [] {1,2,3};  
 var last = ints.Skip(1).Take(2). 
```

* * *

根据评论更新

> 我想获得 LAST DAY 条目。这些是虚拟数据

然后使用[Last](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.last.aspx)方法。
例子

```
 int[] ints = new [] {1,2,3};  
 var last = ints.Last(). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:14:15.030

```
var lastDayItems = itmes.GroupBy(i => i.DateTime.Date)
                        .OrderByDescending(g => g.Key)
                        .First(); 
```

或者

```
var date = items.Max(i => i.DateTime).Date;
var lastDayItems = itmes.Where(i => i.DateTime.Date == date); 
```

# wpf-controls - 在 WPF 中的 DatePicker 控件模板 MaskedTextbox 中设置值

> ID：13487368
> 
> 赞同：2
> 
> 时间：2012-11-21T06:07:16.037
> 
> 标签：wpf-controls, maskedtextbox

我是 WPF 的新手，不完全了解依赖属性和东西，我想将 Datepicker 的值设置为 MaskedTextBox。或者有没有办法在不使用 WPFToolkit/Extend 的情况下屏蔽 Datepicker 文本框应该没问题。请帮忙

```
<DatePicker Margin="259,12,79,270" x:Name="myDatePicker" TextBoxBase.TextChanged="DatePicker_TextChanged">
    <DatePicker.Resources>
        <Style TargetType="{x:Type DatePickerTextBox}">
            <Setter Property="Control.Template">
                <Setter.Value>
                    <ControlTemplate>
                        <WindowsFormsHost x:Name="myText">
                            <wpfForm:MaskedTextBox x:Name="myDatePickerText" x:Uid="myDatePickerId" Mask="00/00/0000" />
                        </WindowsFormsHost>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </DatePicker.Resources>
</DatePicker> 
```

# core-location - 需要从存储坐标到当前位置的距离

> ID：13487372
> 
> 赞同：0
> 
> 时间：2012-11-21T06:07:55.450
> 
> 标签：core-location, cllocation, mkmapview

我正在尝试从存储到核心数据中的经度和纬度到当前位置的距离。我有这段代码，但我不知道如何集成代码以使用我存储在核心数据中的坐标。如何使用存储在核心数据中的坐标来获取与用户位置的距离？感谢您的任何帮助！

```
CLLocation *to = [[CLLocation alloc]
                  initWithLatitude:mapView.userLocation.coordinate.latitude
                  longitude:mapView.userLocation.coordinate.longitude];

CLLocation *from = [[CLLocation alloc]
                    initWithLatitude:mapView.userLocation.coordinate.latitude
                    longitude:mapView.userLocation.coordinate.longitude];

CLLocationDistance distance = [to distanceFromLocation:from];

_distance.text = [[NSString alloc]initWithFormat:@"%g",distance]; 
```

我得到这样的核心数据坐标：

```
_buyLong.text = [[_itemDetailArray valueForKey:@"longitude"] description];
_buyLatitude.text = [[_itemDetailArray valueForKey:@"latitude"] description]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T16:55:48.017

想通了，希望有人可以受益：

```
NSString *savedLatitude = [[_itemDetailArray valueForKey:@"latitude"] description];
    double latDouble = [savedLatitude doubleValue];

NSString *savedLongitude = [[_itemDetailArray valueForKey:@"longitude"] description];
    double longDouble = [savedLongitude doubleValue];

NSLog(@"Value Lat: %f", latDouble);
NSLog(@"Value Long: %f", longDouble);

// Item Location from Array
itemCoordinate.latitude = latDouble;
itemCoordinate.longitude = longDouble;

// User Location from Device
[currentLocation stopUpdatingLocation];
theCoordinate.latitude = newLocation.coordinate.latitude;
theCoordinate.longitude = newLocation.coordinate.longitude;

CLLocation *loc = [[CLLocation alloc] initWithLatitude:theCoordinate.latitude longitude:theCoordinate.longitude];
CLLocation *loc2 = [[CLLocation alloc] initWithLatitude:itemCoordinate.latitude longitude:itemCoordinate.longitude];

CLLocationDistance dist = [loc distanceFromLocation:loc2] *0.0006213; // Convert Meters to Miles
NSString *distance = [NSString stringWithFormat:@"%.1f",dist];

NSLog(@"DIST in Miles: %f", dist); // Wrong formatting may show wrong value!}

_distance.text = distance; 
```

# paypal - Paypal API 中检索交易状态的方法

> ID：13487376
> 
> 赞同：1
> 
> 时间：2012-11-21T06:08:10.410
> 
> 标签：paypal

我正在尝试在我的项目中使用 paypal API，我想知道是否有任何方法可以传递 paypal url、用户名、密码和订阅 ID（这是我的交易）并检索订阅开始、取消等状态，地位。

# regex - 正则表达式不匹配名称

> ID：13487387
> 
> 赞同：1
> 
> 时间：2012-11-21T06:09:21.093
> 
> 标签：regex

所以我的论坛允许我使用正则表达式来允许某些用户名注册，但我想反其道而行之，并阻止任何不匹配的内容，这是系统本身不允许的。

我怎么能*不*匹配的模式`[a-zA-Z]+[0-9]{4}`？

这意味着它会返回错误，比如说

```
FOobar1234
bar5678 
```

我已经尝试过，但无法使其正常工作。

* * *

有点像(matches )`[^a-zA-Z]+`会返回 false ，但最后也有 4 位数字。`foobar``a-z`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T06:11:16.750

使用负前瞻：

```
^(?![a-zA-Z]+\d{4}) 
```

请注意，这实际上与文本不匹配，如果字符串符合您的条件，它只会返回一个零宽度匹配。如果您也想匹配文本，请使用：

```
^(?![a-zA-Z]+\d{4}$).+$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T06:11:46.827

您可以使用否定前瞻断言：

```
^(?![a-zA-Z]+[0-9]{4}$) 
```

一般来说：

```
^(?!<pattern>$) 
```

仅匹配那些与正则表达式不匹配的字符串`<pattern>`。

[**看见**](http://www.rubular.com/r/hiKFgi1Z5P)

# arrays - 将字符串分成两部分并将其存储在数组中

> ID：13487393
> 
> 赞同：0
> 
> 时间：2012-11-21T06:09:56.937
> 
> 标签：arrays, vb.net, string, split

当我使用 vb.net 中的子字符串函数拆分字符串时出现错误。它显示错误，例如对象引用未设置为对象的实例。

```
code

 phone = t1("fld_phone").ToString
 if phone <> String.Empty Then
   msg = t1("fld_msg")
    msg1 = msg.Length
    Dim Counter As Integer = 0
     For i = 0 To msg.Length - 1 Step 150
      strarr(Counter) = msg.Substring(i, 150)
       Counter += 1
       Next

the len of the msg variable is 312 char. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:23:05.983

如果您只想将它​​分成两部分，为什么要使用 for 语句，只需将字符串的长度除以 2 并将其用于第一个子字符串的结尾和第二个子字符串的开头。此外，如果你没有`Option Strict`打开你应该。由于这是您的错误状态，请确保您已初始化所有变量，特别是 strarr。

IE

```
Module Module1

    Sub Main()
        Dim strArr(1) As String
        Dim msg As String = "123456789A123456789B123456789C123456789D"

        strarr(0) = msg.Substring(0, msg.Length \ 2)
        strArr(1) = msg.Substring(msg.Length \ 2)
    End Sub

End Module 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T06:23:43.720

检查**strarr**是一个初始化的数组；根据该代码，这应该是错误的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T06:14:24.980

使用 split 函数的代码在哪里？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T06:28:04.970

问题出在for循环中。每次循环执行时，您都会增加计数器 150。在第一个循环之后，我设置为 149。在第二次执行中，我等于 299。这比 312 少，只剩下 13 个字符，你将字符串带到下一个 150 个字符。这就是为什么它显示错误。

# php - 活动记录 +1 值

> ID：13487400
> 
> 赞同：0
> 
> 时间：2012-11-21T06:10:31.800
> 
> 标签：php, mysql, activerecord

```
$ip = $_SERVER['REMOTE_ADDR'];
$checkip = Model\Limit::find_by_ip($ip);
if ($checkip) {
$checkip->cnt = +1;
$checkip->save();
}else
{
$limit = new Model\Limit;
$limit->ip = $ip;
$limit->cnt = '1';
$limit->save();
} 
```

$checkip->cnt = +1; 不工作。将 +1 加到当前值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:27:48.390

您输入了错误的代码增量`$checkip->cnt = +1;`。

它应该是`$checkip->cnt += 1;`。标志应该在`+`左边并且应该附加到`=`。

# sql - 应用 sum 函数时出错（此处不允许使用 group 函数）

> ID：13487401
> 
> 赞同：0
> 
> 时间：2012-11-21T06:10:48.737
> 
> 标签：sql, oracle11g

我正在尝试在表格列上应用 sum 函数，但我收到错误消息

```
ORA-00934: group function is not allowed here
00934\. 00000 -  "group function is not allowed here"
*Cause:    
*Action:
Error at Line: 46 Column: 5 
```

这是查询

```
select LOSA_APP.app_ref_no AS "App.Ref.No.",  
   CODE_BRANCH.branch_name AS "BRANCH",
   CODE_STAFF.staff_name AS "Officer Name",
   LOSA_CUST.full_name AS "Borrower",
   LOSA_FACILITIES.fac_type AS "Facility Type",
   losa_facilities.amt_appr AS "Limit"
from losa_app LOSA_APP
...
INNER JOIN
    losa_facilities LOSA_FACILITIES
ON
    LOSA_APP.app_ref_no = LOSA_FACILITIES.app_ref_no
where 
    LOSA_APP.app_status='A' 
and 
    .....
and 
    sum(losa_facilities.amt_appr) 
```

第 46 行`sum(losa_facilities.amt_appr)`我也试过`sum(losa_facilities.amt_appr) group by losa_facilities.amt_appr`，但没有用。

为什么这么说`group function is not allowed here ?`。我做错了什么？

谢谢

***编辑： - - - - - - - - - - - - - - - - - - - - - - - - --------------------------------***

```
select LOSA_APP.app_ref_no AS "App.Ref.No.",  
   CODE_BRANCH.branch_name AS "BRANCH",
   CODE_STAFF.staff_name AS "Officer Name",
   LOSA_CUST.full_name AS "Borrower",
   LOSA_FACILITIES.fac_type AS "Facility Type",
   LOSA_FACILITIES.amt_appr AS "Limit"
from losa_app LOSA_APP
INNER JOIN
    losa_app_z LOSA_APP_Z  
ON
    losa_app.app_ref_no = losa_app_z.app_ref_no 
INNER JOIN
    code_branch CODE_BRANCH
ON
    LOSA_APP.attend_branch = CODE_BRANCH.branch_id
INNER JOIN
    code_staff CODE_STAFF
ON
    LOSA_APP.attend_staff = CODE_STAFF.staff_id
INNER JOIN
    losa_cust LOSA_CUST
ON
    LOSA_APP.app_ref_no = LOSA_CUST.app_ref_no
INNER JOIN
    losa_facilities LOSA_FACILITIES
ON
    LOSA_APP.app_ref_no = LOSA_FACILITIES.app_ref_no
where 
    LOSA_APP.app_status='A' 
and 
    trunc(sysdate) between (nvl(LOSA_APP_Z.li_dt, LOSA_APP_Z.li_collect_dt)) AND ((trunc(sysdate))) -- falling under the reporting period
and
    (trunc(sysdate) - nvl(losa_app_z.li_dt,losa_app_z.li_collect_dt)) > 90  -- select application cases at any step after entering Documentation flows.
and 
    losa_app.product_type = :productType -- Select records based on input parameter value passed in. 
and
    code_branch.branch_code1 -- Attending IHP Branch passed in from input parameter
    like
    case :inputChannel 
        when 'ABB'  Then '%0232%'
        when 'AiBB' Then '%0347%' 
    end
and
    LOSA_CUST.app_joint_t = 'P' -- Name of PS No. staff name
and 
    GROUP BY (LOSA_APP.app_ref_no, CODE_BRANCH.branch_name, CODE_STAFF.staff_name, LOSA_CUST.full_name, LOSA_FACILITIES.fac_type) 
    HAVING sum(LOSA_FACILITIES.amt_appr) > 0 
```

错误

```
ORA-00936: missing expression
00936\. 00000 -  "missing expression"
*Cause:    
*Action:
Error at Line: 46 Column: 5 
```

第 46 行是`GROUP BY (LOSA_APP.app_ref_no, CODE_BRANCH.branch_name,...`

我也试过这个

```
select LOSA_APP.app_ref_no AS "App.Ref.No.",  
   CODE_BRANCH.branch_name AS "BRANCH",
   CODE_STAFF.staff_name AS "Officer Name",
   LOSA_CUST.full_name AS "Borrower",
   LOSA_FACILITIES.fac_type AS "Facility Type",
   sum(LOSA_FACILITIES.amt_appr) AS "Limit"
from losa_app LOSA_APP
INNER JOIN
.... 
```

只需在 select 子句中使用 sum，但在这种情况下，我会收到错误消息

```
ORA-00937: not a single-group group function
00937\. 00000 -  "not a single-group group function"
*Cause:    
*Action: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:15:11.237

要使用聚合函数（如 SUM/AVERAGE 等），您需要使用`GROUP BY`子句对结果进行分组。要基于列的聚合过滤结果，您应该`GROUP BY`对选定的列执行 a，然后使用`HAVING`子句指定过滤器

```
select LOSA_APP.app_ref_no AS "App.Ref.No.",  
   CODE_BRANCH.branch_name AS "BRANCH",
   CODE_STAFF.staff_name AS "Officer Name",
   LOSA_CUST.full_name AS "Borrower",
   LOSA_FACILITIES.fac_type AS "Facility Type",
   losa_facilities.amt_appr AS "Limit"
from losa_app LOSA_APP
...
INNER JOIN
    losa_facilities LOSA_FACILITIES
ON
    LOSA_APP.app_ref_no = LOSA_FACILITIES.app_ref_no
where 
    LOSA_APP.app_status='A' 
and 
    .....
GROUP BY <all the columns in the  SELECT clause above, except those on which aggregate functions are applied>
HAVING sum(losa_facilities.amt_appr) <relational operator and value> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:15:07.697

SUM() 和其他分组依据函数必须出现在 HAVING 子句中，而不是 WHERE 子句中。

# matlab - 如何在直方图上绘制概率密度函数？

> ID：13487403
> 
> 赞同：0
> 
> 时间：2012-11-21T06:11:06.153
> 
> 标签：matlab, histogram, average, standard-deviation

我的函数称为 DicePlot，模拟滚动 10 个骰子 5000 次。在该函数中，它计算每个掷骰的 10 个骰子的值的总和，这将是一个 1 × 5000 的向量，并绘制相对频率直方图，其中 bin 的边缘以与直方图中每个 bin 应表示的相同方式选择骰子总和的可能值。

计算 1 × 5000 骰子值总和的平均值和标准偏差，并在相对频率直方图之上绘制正态分布的概率密度函数（计算平均值和标准偏差）。

我已经完成了所有工作，但我对如何绘制概率密度函数感到困惑。任何帮助表示赞赏。谢谢！

作为参考，图表应该看起来像！![在此处输入图像描述](../Images/9e9c75be599495540e88acd95c7800a8.png)

```
function DicePlot ( throw_num, die_num )

throw_num=5000
die_num= 10

  throws = rand ( throw_num, die_num );

  throws = ceil ( 6 * throws );

  for i = die_num : die_num*6
    j = find ( score == i );
    y(i-die_num+1) = length ( j ) / throw_num;
  end 

  bar ( x, y )

  xlabel ( 'Score' )
  ylabel ( 'Estimated Probability' )

  score_ave = sum ( score(1:throw_num) ) / throw_num;
  score_var = var ( score );

  return
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T06:53:30.697

我已将我对[您上一个问题](https://stackoverflow.com/questions/13486093/summing-up-dice-in-matlab/13486280#13486280)的回答添加到代码中，以在直方图的顶部绘制一个缩放的高斯 pdf。两个关键添加如下： 1) 使用`hold on`和`hold off`获得直方图并在同一图形上绘图。2）将输出缩放`normpdf`到适当的大小，使其与直方图的比例相同。

另一件事，我不禁注意到您尚未将我之前回答的建议纳入您的功能。这有什么特别的原因吗？我当然不会 +1 您的问题，除非我能看到证据表明您已将您过去的建议纳入您的工作！现在你走了，让我听起来像我的高中老师之一！:-)

```
%#Define the parameters
NumDice = 2;
NumFace = 6;
NumRoll = 500;

%#Generate the rolls and obtain the sum of the rolls
AllRoll = randi(NumFace, NumRoll, NumDice);
SumRoll = sum(AllRoll, 2);

%#Determine the bins for the histogram
Bins = (NumDice:NumFace * NumDice)';

%#Build the histogram
hist(SumRoll, Bins);
title(sprintf('Histogram generated from %d rolls of %d %d-sided dice', NumRoll, NumDice, NumFace));
xlabel(sprintf('Sum of %d dice', NumDice));
ylabel('Count');
hold on

%#Obtain the mean and standard deviation of the data
Mu = mean(SumRoll);
Sigma = sqrt(var(SumRoll));

%#Obtain the Gaussian function using 4 standard deviations on either side of Mu
LB = Mu - 4 * Sigma; UB = Mu + 4 * Sigma;
Partition = (LB:(UB - LB) / 100:UB)';
GaussianData = normpdf(Partition, Mu, Sigma);

%#Scale the Gaussian data so the size matches that of the histogram
GaussianData = NumRoll * GaussianData;

%Plot the Gaussian data
plot(Partition, GaussianData, '-r');
hold off 
```

*ps，如果您事先*不知道直方图应该是高斯的（由于中心极限定理），那么您也可以`ksdensity`从统计工具箱中使用核函数来获取经验密度。

# matlab - 是否可以在散点图中选择特定区域

> ID：13487407
> 
> 赞同：-1
> 
> 时间：2012-11-21T06:11:23.540
> 
> 标签：matlab, scatter

我基本上是在散点图的帮助下绘制数百万个数据点。我在这里

分散（x（1：end-1），y（1：end-1），5，z）

现在可以选择绘图中的特定区域......并找出值。我不知道你是否会理解我的问题。

作为替代方案，是否可以从一开始就减少数据点，这样我的计算就不会出现这些数据点。我正在使用以下来读取数据

```
fid = fopen('cr.txt');
A =  textscan(fid, '%f %f %f %f %f %*f %*f %*f %*f %*f %*s %*s %*s') ;
%read the file
a = A{1};
e = A{2};
c = A{3};
x = A{4};
y = A{5}; 
```

这里x，y是距离，如果我应用xlim和ylim，我也想限制文件中的对应a，e，c

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:10:40.267

取决于您要如何选择区域。

通常，如果您使用标记该区域`ginput`并使用它定位点，您可以去`inpolygon`（看看`doc inpolygon`- 有一个非常好的例子）

如果您只想选择一个矩形，最好编写自己的函数 - 但这很简单。

# java - 使用 plexus-compiler-eclipse 编译 java 类并将其作为 JUnit 测试运行

> ID：13487414
> 
> 赞同：0
> 
> 时间：2012-11-21T06:12:02.773
> 
> 标签：java, compiler-construction, junit4, plexus

我目前正在尝试动态生成代码，对其进行编译，然后将其作为 JUnit4 测试运行。我非常接近目标，但我有一个问题可能与 plexus-compiler-eclipse 或我如何加载编译的类有关。让我解释：

1.  我使用简单的 FileWriterWithEncoding 将 java 代码写入文件
2.  我使用 EclipseJavaCompiler().performCompile(CompilerConfiguration) 使用 plexus-compiler-eclipse （也尝试使用 plexus-compiler-javac）将它编译为 Java6 代码（source-target-compliance）
3.  `URLClassLoader.newInstance(new URL[] {resource }).loadClass("classname")`我使用where resource is加载类`getClass().getResource("filename")`（也尝试使用`getClass().forName(className, true, classLoader)`classLoader 与上面相同的 URLClassLoader ）
4.  然后我使用 JUnitCore 的一个实例来运行我使用 JUnitCore().run 生成的测试类（加载上面的类的结果）

在第 4 点之前，一切似乎都很好，JUnit 在该类上看不到任何测试方法（我显然确实在生成的代码中使用 @org.junit.Test 注释了每个测试方法）。调试，我可以看到如果我对加载的类执行 newInstance() 或检查加载的类，我没有注释，没有公共方法，没有声明的字段，SFA ！！！newInstance() 只有一个私有成员，这是正常的，因为它的引用类型是 Object，但不知何故，我无法将它强制转换为尝试调用应该存在的公共方法。

知道我在编译/类加载中缺少什么导致运行时类不完整吗？

在此先感谢您的任何想法...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:51:47.107

显然，这很简单！我发现[这个答案](https://stackoverflow.com/a/2779148/1270280)让我意识到我的 URLClassLoader 缺少父母。

# xml - System.Security.SecurityException：不允许请求的注册表访问。指向 XML 文件中的一行

> ID：13487418
> 
> 赞同：0
> 
> 时间：2012-11-21T06:12:20.600
> 
> 标签：xml, registry, boolean, deserialization

我的代码从 xml 文件反序列化时出现问题。我的实体类中的属性返回一个布尔值，它可以接受“Y”或“N”和 True/False。除了它之外，其他属性作为字符串可以顺利读取。将我的代码包含在 Try-Catch 块中后，我能够找出返回错误的代码行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:12:20.600

似乎，将此错误命名为安全异常有点令人困惑。我对 xml 文件所做的是将值从 True 更改为 1，将 False 更改为 0。

# iphone - 推送通知不调用该方法

> ID：13487420
> 
> 赞同：1
> 
> 时间：2012-11-21T06:12:24.060
> 
> 标签：iphone, objective-c, ios, ipad, notifications

我在我的 app id 中启用了生产推送通知，并使用它创建了配置文件。当我在我的 ipad 中运行该应用程序时，它会要求通知，我收到了相应的通知。但问题是方法

```
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)devToken { 
```

即使我在 didfinishlaunch 中添加了以下代码，也没有调用

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound)]; 
```

任何想法请帮助我，我现在正在使用 ios6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T06:16:34.780

我只是这样暗示：-

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    [[UIApplication sharedApplication] setApplicationIconBadgeNumber:0];

    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeBadge)];

}
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken {

    self.strToken = [[[[deviceToken description]
                       stringByReplacingOccurrencesOfString: @"<" withString: @""] 
                      stringByReplacingOccurrencesOfString: @">" withString: @""] 
                     stringByReplacingOccurrencesOfString: @" " withString: @""];
}

- (void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error {

} 

- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {    
    UIApplicationState state = [application applicationState];
    if (state == UIApplicationStateActive) {
        NSString *cancelTitle = @"Close";
        NSString *showTitle = @"Show";
        NSString *message = [[userInfo valueForKey:@"aps"] valueForKey:@"alert"];
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"myapp name"
                                                            message:message 
                                                           delegate:self 
                                                  cancelButtonTitle:cancelTitle 
                                                  otherButtonTitles:showTitle, nil];
        [alertView show];
        [alertView release];

    } else {
        //Do stuff that you would do if the application was not active
    }
} 
```

**更新**

> 在设备中，转到 Settings->Notifications->YourApp->Enable_Notifications

和

请检查下面的堆栈溢出问题可能对您有帮助

[iOS 在应用程序中注册推送通知](https://stackoverflow.com/questions/13113716/ios-registering-for-push-notifications-within-application)

[推送通知的“查看”委托](https://stackoverflow.com/questions/5825156/delegate-for-view-for-push-notification)

[推送通知委托回调没有被调用](https://stackoverflow.com/questions/6631710/push-notification-delegate-call-backs-are-not-getting-called)

[推送通知委托方法问题](https://stackoverflow.com/questions/12109373/push-notification-delegate-method-issue)

[推送通知：didFailToRegister 和 didRegister 委托均未调用](https://stackoverflow.com/questions/7820566/push-notification-both-didfailtoregister-and-didregister-delegate-not-calling)

[推送通知代表没有被调用](https://stackoverflow.com/questions/8169201/push-notification-delegates-not-getting-called)

**编辑签** 入设置是否有通知未关闭 ![在此处输入图像描述](../Images/f92bef60598fe22674e9f15a356e052b.png)

# wpf - 最大化文本的 WPF 问题

> ID：13487421
> 
> 赞同：0
> 
> 时间：2012-11-21T06:12:22.977
> 
> 标签：wpf, maximize

我有点麻烦。我希望我的页面通过文本框内的文本最大化，但只能通过文本框的边框使其最大化。谁能帮我？

正确处理这一点非常重要。我必须让最左边的像素与旋转文本中最右边的像素一样远离边框。

我在底部发布了“第一行”的 XAML 代码，“另一行”的代码只是固定的大小和位置，所以我把那部分删掉了。

```
<Viewbox Height="3000" HorizontalAlignment="Stretch"  VerticalAlignment="Bottom"  Width="Auto">
    <TextBox Text="First line" BorderThickness="0" VerticalContentAlignment="Bottom"  >
        <TextBox.LayoutTransform>
            <RotateTransform Angle="-35"/>
        </TextBox.LayoutTransform>
    </TextBox>
</Viewbox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:58:02.060

已编辑：您应该将文本框设置为边框的子级，设置边距，然后旋转边框（而不是文本框）。（请参阅评论）；

```
<Window ....
    Height="600"
    Width="400">
<Grid>
    <Viewbox 
             HorizontalAlignment="Stretch"
             VerticalAlignment="Stretch">
       <Border Background="AliceBlue">
            <TextBox AcceptsReturn="True"
                     Margin="-4"
                     BorderThickness="0"
                     Background="Transparent">

                <TextBox.Text>
                    First line and more and more ansd
                </TextBox.Text>
            </TextBox>
            <Border.LayoutTransform>
                <RotateTransform Angle="-35" />
            </Border.LayoutTransform>
        </Border>
    </Viewbox>
</Grid>
</Window> 
```

# android - 是否可以使用任何 Google Play SDK 获取关于我的应用程序的 Google Play 统计数据

> ID：13487424
> 
> 赞同：2
> 
> 时间：2012-11-21T06:13:15.403
> 
> 标签：android, google-play, google-play-services

我想在 Google Play 中获取关于我的应用程序的统计详细信息。在我的网站中自定义报告。有什么可能的方法吗？

桑吉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:16:47.657

**目前没有用于执行此操作的官方 google API。**分析用于应用程序分析。作者想要获取的数据也显示在google的开发者控制台中，比如我的应用有多少下载量等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:23:48.040

我不知道您想要哪些详细信息，但[Google Analytics SDK](https://developers.google.com/analytics/devguides/collection/android/devguide)可能很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T06:27:22.520

对的，这是可能的。Google 在此处提供了有关如何设置和使用 Google Analytics for Android 的精彩教程：

[https://developers.google.com/analytics/devguides/collection/android/](https://developers.google.com/analytics/devguides/collection/android/)

# android - Titanium KitchenSink 在 Galaxy S2 设备上启动然后关闭

> ID：13487431
> 
> 赞同：1
> 
> 时间：2012-11-21T06:14:06.173
> 
> 标签：android, titanium

我是钛工作室的新手。已在 Elipse/ADT 中完成“hello”应用程序并成功部署在 Galaxy S2 (4.0.3) 上。当我执行 Titanium“欢迎”示例或“KitchenSink”时，它们在模拟器中工作正常，但在 S2 上它们启动并立即关闭，无需等待任何事件。我看到 Titanium 闪屏，然后是初始视图，然后返回主屏幕。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:11:47.750

[https://github.com/appcelerator/KitchenSink](https://github.com/appcelerator/KitchenSink)

从这里下载最新版本。确保你的手机没有被root。

# jquery - jquery选择相邻的项目，如果他们是一个特定的类名

> ID：13487432
> 
> 赞同：0
> 
> 时间：2012-11-21T06:14:04.450
> 
> 标签：jquery

我有以下标记，并且正在做一些 jQuery 鼠标悬停，并将设置背景颜色。如果类是 .list_spacer，我还想设置相邻类的背景颜色

我目前有：

```
<div class='lists_items'>
<div class='list_item'>info here</div>
<div class='list_spacer'></div>
<div class='list_item'>info here</div>
<div class='list_spacer'></div>
<div class='list_item'>info here</div>
<div class='list_spacer'></div>
<div class='list_item'>info here</div>
</div>

$('.list_item').on('mouseover',function(){
  $(this).css('background-color','yellow'); // <- yeah, the simplest possible scenario
}); 
```

并且我认为必须有某种方法可以访问相邻的 div 并仅设置某个类但不知道如何设置。关于如何做到这一点的任何想法？我只想选择是否立即在之前或之后并且具有 list_spacer 类

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:26:35.143

您可以访问相邻标签的用户`.prev`和方法。`.next`

例子：

```
$('.list_item').on('mouseover',function(){
  $(this).prev().css('background-color','yellow');
}); 
```

要访问某个类，请使用：

```
$('.list_item').on('mouseover',function(){
  $(this).prev('.list_spacer').css('background-color','yellow');
}); 
```

您还可以访问父标签：

```
<div class='list_item'>
     <div class='list_spacer'></div>
</div>

$('.list_spacer').parent().css('background-color','yellow'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T06:32:50.623

尝试使用`.next('.list_spacer')`或`.prev('.list_spacer')`

```
$('.list_item').on('mouseover',function(){
   var $this = $(this);

    var $div = $this.prev('.list_spacer').length ? $this.prev('.list_spacer')
                                                 : $this.next('.list_spacer') ;

    $div.css('background-color','yellow'); // 
}); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/F4SdJ/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T06:57:26.940

使用边框代替背景颜色，因为列表没有内容和宽度，因此不会反映背景颜色。

$(function(){ $('.list_item').on('mouseover',function(){

```
$(this).css('background-color','yellow'); 

$(this).next('.list_spacer').css('border','1px solid green');

});
}); 
```

# c - 使用 Xcode 选项 Generate Output>Assembly 查看 C 文件的汇编代码

> ID：13487434
> 
> 赞同：1
> 
> 时间：2012-11-21T06:14:11.950
> 
> 标签：c, xcode, assembly, compiler-construction, xcode4.5

所以我正在尝试使用 Xcode 4.5 中的“Product> Generate Output> Assembly File”选项来研究一个简单的 C 程序的汇编代码。无论我如何尝试触发它，该选项仍然是灰色的。关于生成程序集文件需要什么的任何建议？

即使是这个简单的循环语句也没有给我选择：

```
int main (int argc, char **argv)
{
    int     x = 3;
    int     y = 4;
    int     z;

    z = x + y;

    return 0;
} 
```

其他帖子已竭尽全力谈论此选项的便利性，我们将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T06:33:17.587

确保在项目窗口左侧的文件列表中***选择***`main.m`（突出显示）您的“ ”文件。然后 Xcode 将知道这是您要在其上生成输出的文件，并且将启用 Generate Output -> Assembly 选项。

# javascript - 更改 JavaScript 闭包内的全局变量

> ID：13487437
> 
> 赞同：5
> 
> 时间：2012-11-21T06:14:17.120
> 
> 标签：javascript, closures

我正在尝试更改闭包中变量的值：

```
var myVariable;
$.ajax({
    //stuff....
    success:function(data) {
        myVariable = data;
    }
}); 
```

这不起作用，因为`myVariable`闭包不可见。如何更改此代码以使值`myVariable`更改？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-21T06:26:45.097

与您的看法相反，您的代码有效。但是看到你正在尝试做的事情并在字里行间阅读我猜你正在尝试这样做：

```
var myVariable;
$.ajax({
    //stuff....
    success:function(data) {
        myVariable = data;
    }
});
alert(myVariable); // at this point myVariable is undefined!! 
```

如果是这样，您需要了解异步函数。

基本上，该`$.ajax()`函数在实际提交 ajax 请求之前返回。当浏览器不忙于执行 javascript 时，它将稍后执行 ajax 请求。这意味着当您尝试提醒 的值时，分配还没有发生`myVariable`。

在此处阅读我的回复以获取更多详细信息：[JS 全局变量未在第一次迭代时设置](https://stackoverflow.com/questions/13301050/js-global-variable-not-being-set-on-first-iteration/13301270#13301270)

唯一好的解决方案是改变你对编码的看法。（有一个可以说是糟糕的解决方案，涉及将 ajax 调用转换为同步，但我们不要介入，如果需要或阅读手册，您可以谷歌搜索）。而不是这样做：

```
var myVariable;
$.ajax({
    //stuff....
    success:function(data) {
        myVariable = data;
    }
});
/*
 * Do lots of stuff with the returned value
 * of the myVariable variable
 *
 */ 
```

你现在需要这样写：

```
var myVariable;
$.ajax({
    //stuff....
    success:function(data) {
        myVariable = data;
        /*
         * Do lots of stuff with the returned value
         * of the myVariable variable
         *
         */
    }
}); 
```

基本上将您在 ajax 调用之后编写的所有代码移动到成功回调中。这需要习惯（从互联网上有多少这个问题的变体来判断）。但是一旦你习惯了它，它就会变成你的第二天性。

这种编程风格有一个名字。它被不同地称为：*“事件驱动编程”*或*“继续传递风格”*或*“事件编程”*。如果您想了解更多信息，可以搜索各种术语。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T06:19:33.127

如果该代码在全局范围内，则 myVariable*对*内部函数可见。如果您担心它被局部变量遮蔽，请将其作为全局属性显式访问：

```
var myVariable;
$.ajax({
    //stuff....
    success:function(data) {
        window.myVariable = data;
    }
}); 
```

# asp.net-mvc - 安装 ASP.NET MVC 3 工具更新时出错

> ID：13487443
> 
> 赞同：0
> 
> 时间：2012-11-21T06:14:30.863
> 
> 标签：asp.net-mvc, asp.net-mvc-3, c#-4.0

我安装了 mvc 4.0，但我需要 mvc 3.0 工具进行开发，安装 ASP.NET MVC 3 工具更新时出现错误。提前致谢

```
OS Version = 6.1.7601, Platform 2, Service Pack 1
OS Description = Windows 7 - x64 Service Pack 1
CommandLine = e:\temp\ext27692\setup.exe
Using Simultaneous Download and Install mechanism
Operation: Installing
Package Name = Microsoft ASP.NET MVC 3 Tools Update
Package Version = 3.0.20406.0
User Experience Data Collection Policy: AlwaysUploaded
Number of applicable items: 8
Exe (e:\temp\ext27692\VS10-KB2483190-x86.exe) succeeded.
MSI (e:\temp\ext27692\AspNetWebPages.msi) Installation succeeded. Msi Log: Microsoft ASP.NET MVC 3 Tools Update_20121121_104522969-MSI_AspNetWebPages.msi.txt
MSI (e:\temp\ext27692\AspNetWebPagesVS2010Tools.msi) Installation succeeded. Msi Log: Microsoft ASP.NET MVC 3 Tools Update_20121121_104522969-MSI_AspNetWebPagesVS2010Tools.msi.txt
MSI (e:\temp\ext27692\AspNetWebPagesVWD2010Tools.msi) Installation succeeded. Msi Log: Microsoft ASP.NET MVC 3 Tools Update_20121121_104522969-MSI_AspNetWebPagesVWD2010Tools.msi.txt
MSI (e:\temp\ext27692\AspNetMVC3.msi) Installation succeeded. Msi Log: Microsoft ASP.NET MVC 3 Tools Update_20121121_104522969-MSI_AspNetMVC3.msi.txt
MSI (e:\temp\ext27692\AspNetMVC3VS2010Tools.msi) Installation succeeded. Msi Log: Microsoft ASP.NET MVC 3 Tools Update_20121121_104522969-MSI_AspNetMVC3VS2010Tools.msi.txt
MSI (e:\temp\ext27692\AspNetMVC3VWD2010Tools.msi) Installation succeeded. Msi Log: Microsoft ASP.NET MVC 3 Tools Update_20121121_104522969-MSI_AspNetMVC3VWD2010Tools.msi.txt
MSI (e:\temp\ext27692\NuGet.msi) Installation failed. Msi Log: Microsoft ASP.NET MVC 3 Tools Update_20121121_104522969-MSI_NuGet.msi.txt
MSI (e:\temp\ext27692\AspNetMVC3VWD2010Tools.msi) Uninstall succeeded. Msi Log: Microsoft ASP.NET MVC 3 Tools Update_20121121_104522969-MSI_AspNetMVC3VWD2010Tools.msi.txt
MSI (e:\temp\ext27692\AspNetMVC3VS2010Tools.msi) Uninstall succeeded. Msi Log: Microsoft ASP.NET MVC 3 Tools Update_20121121_104522969-MSI_AspNetMVC3VS2010Tools.msi.txt
MSI (e:\temp\ext27692\AspNetMVC3.msi) Uninstall succeeded. Msi Log: Microsoft ASP.NET MVC 3 Tools Update_20121121_104522969-MSI_AspNetMVC3.msi.txt
MSI (e:\temp\ext27692\AspNetWebPagesVWD2010Tools.msi) Uninstall succeeded. Msi Log: Microsoft ASP.NET MVC 3 Tools Update_20121121_104522969-MSI_AspNetWebPagesVWD2010Tools.msi.txt
MSI (e:\temp\ext27692\AspNetWebPagesVS2010Tools.msi) Uninstall succeeded. Msi Log: Microsoft ASP.NET MVC 3 Tools Update_20121121_104522969-MSI_AspNetWebPagesVS2010Tools.msi.txt
MSI (e:\temp\ext27692\AspNetWebPages.msi) Uninstall succeeded. Msi Log: Microsoft ASP.NET MVC 3 Tools Update_20121121_104522969-MSI_AspNetWebPages.msi.txt
Final Result: Installation failed with error code: (0x80070643), "Fatal error during installation. " (Elapsed time: 0 00:17:11). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T07:07:34.307

一个常见的错误。

看起来可以在这里找到解决方案：

*   [http://blog.williamhilsum.com/2011/03/error-0x80070643-installing-aspnet-mvc.html](http://blog.williamhilsum.com/2011/03/error-0x80070643-installing-aspnet-mvc.html)

*   [http://markusgreuel.net/blog/asp-net-mvc-3-tools-update-setup-fails-with-fatal-error-0x80070643](http://markusgreuel.net/blog/asp-net-mvc-3-tools-update-setup-fails-with-fatal-error-0x80070643)

*   [http://support.microsoft.com/kb/2531566](http://support.microsoft.com/kb/2531566)

*   [无法安装 Asp.net MVC 3](https://stackoverflow.com/questions/11091919/cant-install-asp-net-mvc-3)

# 3d - DirectX - Blur objects according to z coordinate of the object

> ID：13487445
> 
> 赞同：0
> 
> 时间：2012-11-21T06:14:32.773
> 
> 标签：3d, directx, motion-blur

I want to blur objects in my 3D scene according to the object's z coordinate (the coordinate going into the screen). Say for z=5 blur amount=0, z=10 blur=50, z=-30 blur=40\. This has to happen for every object.

1.  How can I do this?
2.  Do I have to use directx 9.0c or up to implement this (because of shaders)?

Do I make use of the Z buffer? I'm a bit new to DirectX.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:19:18.510

它被称为[景深](http://en.wikipedia.org/wiki/Depth_of_field)这是一些[不错的阅读](http://http.developer.nvidia.com/GPUGems3/gpugems3_ch28.html)，是的，它需要着色器。

要实现简单的自由度，您可以渲染场景两次：

1.  渲染到纹理的一半（在中间进行前剔除，在场景结束时进行后剔除）。

2.  用这个纹理渲染四边形（用简单的着色器模糊它）。

3.  在顶部渲染前半部分（场景中间有背面剔除）

# iphone - 获取直接消息 Twitter iOS 5

> ID：13487458
> 
> 赞同：1
> 
> 时间：2012-11-21T06:15:45.567
> 
> 标签：iphone, ios5, twitter

我们如何在 Twitter 中获得直接消息？我正在使用 iOS 5，我已经从 twitter 创建了应用程序，设置了读取、写入、DM 的权限，创建了 auth.token 等。但是我应该调用哪个 API 从 iOS 5 中的 twitter 帐户获取 DM。

# php - 是否/是否有任何浏览器允许控制流构造在脚本标签中存在？

> ID：13487459
> 
> 赞同：1
> 
> 时间：2012-11-21T06:15:49.000
> 
> 标签：php, javascript, browser, curly-braces

而在 PHP 中，可以：

```
<?PHP if($foo) { ?>
<strong>only appears if $foo is true.</strong>
<?PHP } else { ?>
<em>only appears if $foo is false.</em>
<?PHP } ?> 
```

在 Javascript 中，可以在一个脚本标签中打开一对卷曲，然后在另一个脚本标签中关闭它们吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T06:20:42.467

简短的回答是：**不**。

长答案是 javascript 脚本在脚本标签结束时编译和执行（而不是在文档完成加载时），这意味着任何不完整的代码一直被视为语法错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T06:23:32.370

如果您想要在 JavaScript 中使用模板，您可以查看[EJS](http://www.embeddedjs.com/)之类的库。我也认为这个问题与您所问的类似：[如何使用 javascript 和模板构建 DOM？](https://stackoverflow.com/questions/202289/how-to-build-the-dom-using-javascript-and-templates)

# c++ - fread 等效于 fstream

> ID：13487461
> 
> 赞同：7
> 
> 时间：2012-11-21T06:15:55.503
> 
> 标签：c++, c

在 C 中可以编写（故意忽略任何检查）

```
const int bytes = 10;
FILE* fp = fopen("file.bin","rb");
char* buffer = malloc(bytes);
int n = fread( buffer, sizeof(char), bytes, fp );
... 
```

并将`n`包含实际读取的字节数，可能小于 10（字节）。

你如何在 C++ 中做同样的事情？

我有这个，但它似乎不是最理想的（感觉很冗长并且需要额外的 I/O），有没有更好的方法？

```
 const int bytes = 10;
  ifstream char> pf("file.bin",ios::binary);
  vector<char> v(bytes);

  pf.read(&v[0],bytes);
  if ( pf.fail() )
  {
    pf.clear();
    pf.seekg(0,SEEK_END);
    n = static_cast<int>(pf.tellg());
  }
  else
  {
    n = bytes;
  }

  ... 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T06:34:55.910

在调用 . 之后直接调用[`gcount`](http://en.cppreference.com/w/cpp/io/basic_istream/gcount)成员函数`read`。

```
pf.read(&v[0],bytes);
int n = pf.gcount(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T06:35:01.807

根据[http://www.cplusplus.com/reference/iostream/istream/read/](http://www.cplusplus.com/reference/iostream/istream/read/)：

> `istream& read(char* s, streamsize n);`
> 
> 读取数据块
> 读取 n 个字符的数据块，并将其存储在 s 指向的数组中。
> 
> 如果在读取 n 个字符之前到达文件结尾，则数组将包含直到它读取的所有元素，并且将设置 failbit 和 eofbit（可以分别通过成员 fail 和 eof 进行检查）。
> 
> 请注意，这是一个未格式化的输入函数，提取的内容不存储为 c-string 格式，因此在字符序列的末尾没有附加结束空字符。
> 
> 在此函数后调用成员 gcount 可以获得读取的字符总数。

所以[`pf.gcount()`](http://www.cplusplus.com/reference/iostream/istream/gcount/)告诉你读取了多少字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T06:40:30.520

```
pf.read(&v[0],bytes);

streamsize bytesread =  pf.gcount(); 
```

# solr - solr 中的部分和完全匹配词搜索

> ID：13487462
> 
> 赞同：-1
> 
> 时间：2012-11-21T06:15:57.970
> 
> 标签：solr

solr 示例中的单词搜索：(IN 3 DOCS) SACHIN ANNA, SACHIN DEV,SACHIN BHAV...

我正在搜索第一个单词，即 SACHIN，它显示了所有 3 个结果，SACHIN ANNA、SACHIN DEV、SACHIN BHAV。

但是当我特别搜索 SACHIN ANNA 时，即使这次它也显示了所有 3 个结果。我只想要特定的结果。怎么做。我在索引中使用这个标记器

```
<tokenizer class="solr.NGramTokenizerFactory" minGramSize="1" maxGramSize="15" /> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-21T07:42:48.433

尝试使用双引号搜索，即“SACHIN ANNA”

如果您错过了这些链接，您可以浏览以下链接

[http://www.solrtutorial.com/solr-query-syntax.html](http://www.solrtutorial.com/solr-query-syntax.html)

[http://wiki.apache.org/solr/CommonQueryParameters](http://wiki.apache.org/solr/CommonQueryParameters)

# ios - 在 iPad 上创建 SOCKS 5 代理

> ID：13487467
> 
> 赞同：1
> 
> 时间：2012-11-21T06:16:38.590
> 
> 标签：ios, proxy, client-server, socks

我有一个桌面应用程序，它使用 FTP 在客户端和服务器之间进行文件传输。为了在客户端和服务器之间建立连接，它使用仅由我们编写的 SOCKS 5 代理服务器。我想将此应用程序移植到 iOS 设备。iPad/iPhone 上是否支持创建一个 FTP 应用程序，该应用程序在两者之间使用 SOCKS 5 代理来创建连接。

谢谢，作为

# jquery-validate - Jquery 验证器没有取消突出显示“选择”选择框

> ID：13487470
> 
> 赞同：2
> 
> 时间：2012-11-21T06:16:47.687
> 
> 标签：jquery-validate, jquery-chosen

我正在使用带有 jquery valodation 的 Chosen。
你可以看到这个例子： http: [//jsfiddle.net/hfdBF/9/](http://jsfiddle.net/hfdBF/9/)
如果你点击提交，你会看到验证适用于组合和输入。

如果您在输入框中输入一个字母，您将收到一个警报，表明该字母未突出显示，就像它假设的那样。
**但是**，如果您在选择框中选择一个值，它不会被警告为未突出显示。

你知道如何让它发挥作用吗？

```
$(function() {

var $form = $("#form1");

$(".chzn-select").chosen({no_results_text: "No results matched"});
$form.validate({
    errorLabelContainer: $("#form1 div.error"),
    wrapper: 'div',
});

var settings = $.data($form[0], 'validator').settings;
settings.ignore += ':not(.chzn-done)';
settings.unhighlight= function(el){
   alert(el.name + " hit unhighlight")        
} 
```

});​​​​</p>

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-27T22:13:06.163

您无需手动进行验证。您可以将函数绑定到`change`将检查特定选择是否有效的事件处理程序。如果选择有效，这也将清除错误。

```
$('.chzn-select').change(function () {
    $(this).valid();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T18:14:36.810

您需要手动重置 jQuery 验证：

```
$(".chzn-select").chosen().change(function () {
    var value = $('#UserCompanyIds').val(); // the select element
    if (value != "") {
        $('.field-validation-error').each(function () {
            if ($(this).attr('data-valmsg-for') == 'UserCompanyIds') {
                $(this).html("");
                $(this).removeClass("field-validation-error").addClass("field-validation-valid");
            }
        });
    }
}); 
```

我希望这有帮助！

# c - 如何在 C 中释放 n 个字节的内存？

> ID：13487471
> 
> 赞同：2
> 
> 时间：2012-11-21T06:16:49.313
> 
> 标签：c, memory-leaks, malloc, free

我想在 C 中创建一个通用的链表。以下是节点的结构：

```
typedef struct node {
    void *value;
    int size;        // n bytes
    ind index;       // index of the node
    struct node *next;
} Node; 
```

我的 delete_node 函数如下。搜索函数发送一个指向我要删除的节点的指针。

```
Node *search_list(Node *list, void *data, int n_bytes);
int delete_node(Node *list, Node *to_be_deleted);       // returns 1 on success 
```

在`delete_node`函数内部，我想释放指向的内存`void *value`，然后释放为`Node`自身分配的内存。

```
free(to_be_deleted->value);      // Would this work??
free(to_be_deleted); 
```

由于它是`void`指针，我们不知道它所指向的对象占用了多少字节。我们如何释放内存呢？对不起，如果这是一个愚蠢的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T06:20:43.757

内存分配器自己跟踪内存分配的大小——无需告诉`free()`要释放多少内存。

因此，您应该能够摆脱`size`and `n_bits`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T06:21:59.323

```
free(to_be_deleted->value);      // Would this work?? 
```

直截了当的回答，`Yes this will work.`

简单的事情：

见 和 的`free()`定义`malloc()`

`void free(void *) // free takes void* as argument so it will work`

`void* malloc(sizeof(type))`

在`malloc`我们必须传递`size`我们想要分配多少字节。

但`free`只需传递指针以及在堆存储上分配给该指针的任何字节，它将被释放

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T06:32:26.277

**是**的，你写的应该有效。原因是 malloc（这是一个库调用）创建元数据，用于确定哪些内存部分是空闲的，哪些部分被占用。当您调用 free() 时，您实际上只是在修改此元数据，以便后续对 malloc 的调用知道可以重新使用此内存（请注意，大多数实现不会将现有数据归零）。

# magento - Magento 从 1.4.2 更新到 1.7

> ID：13487476
> 
> 赞同：1
> 
> 时间：2012-11-21T06:17:38.727
> 
> 标签：magento, magento-1.4, magento-1.7

我在将 magento 1.4.2 更新到 1.7 时遇到问题。当我尝试使用`./pear list-upgrades`时，我收到目前没有任何升级的消息。

我错过了什么吗？

在网上阅读教程时，他们使用`./mage`which 代替`./pear`，我在哪里可以得到它，我可以将它用于当前版本的 Magento 吗？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:52:25.693

只需在现有安装之上安装 1.7.0.2 文件（当然是在测试环境中）。清除缓存，瞧，升级了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T05:31:52.320

如果您希望升级 Magento 没有问题，那么这是不可能的，我正在为我做这个和它的工作

但是您可以将 Magento 1.4 升级到 1.7

1）备份您当前的站点文件和数据库，并在本地执行此操作，因为升级时不要在完成所有步骤之前重新加载页面

[2) 从http://www.magentocommerce.com/download](http://www.magentocommerce.com/download)此处下载较新版本，

然后在目录中提取该 zip 文件

3) 在您当前的站点上上传较新的版本文件

4）删除您的站点缓存，索引管理

5）重新加载您的当前站点，您的数据库自动升级与数据库无关

现在您可以在 1.7 版底部看到数据库版本 [无论您升级什么]

享受！！！

# c++ - C++ 向量 - 访问结构中声明的结构类型向量的大小

> ID：13487477
> 
> 赞同：1
> 
> 时间：2012-11-21T06:17:50.567
> 
> 标签：c++, vector

我的声明如下

```
#include <vector>
#include <iostream>
using namespace std;

typedef struct _ListofHops_T
{
  int macAddrLtr;
  int ttlValue;
}ListofHops;

struct ReadActivateLinkTrace
{
   typedef std::vector < ListofHops *> ListofHopsList;
   bool operationState;
};

int main()
{
    ReadActivateLinkTrace readLinkTrace;

    for (size_t listItr=0; listItr < readLinkTrace.ListofHopsList.size(); listItr++)
    {
      .....
    }
} 
```

我正在尝试`struct`在 struct中声明一个跳数列表向量`ReadActivateLinkTrace`。

1.  上述声明是否有效。
2.  我得到以下错误编译

> vector.cpp:23：错误：无效使用 ReadActivateLinkTrace::ListofHopsList

我是向量的新手。如何访问/迭代结构中定义的结构向量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:21:28.573

声明是有效的，但它并没有按照你的想法做。`ListofHopsList`是一个类型（提示：）`typedef`，而不是一个变量。您可能正在寻找

```
struct ReadActivateLinkTrace
{
   std::vector < ListofHops *> ListofHopsList;
   bool operationState;
}; 
```

问题不在于向量本身，而在于您没有声明一个成员，而是定义了一个新类型。

另外，你有什么理由使用指针向量而不是对象向量？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T06:23:36.663

ReadActivateLinkTrace::ListofHopsList 是一个`typedef`，它只声明一个类型名称的别名。它没有定义该类型的实际对象。你显然想要：

```
struct ReadActivateLinkTrace
{
   std::vector < ListofHops *> ListofHopsList;
   bool operationState;
}; 
```

不过，您*可能*应该重新考虑一下它是指针向量。至少临时来说，指针似乎不太可能是这里的最佳选择。当你在它的时候，这个：

```
typedef struct _ListofHops_T
{
  int macAddrLtr;
  int ttlValue;
}ListofHops; 
```

在几个方面非常可怕。首先，`typedef`这里仅在 C 代码中需要，而不是 C++。其次，该名称`_ListofHops_T`是为实现保留的，因此使用它会产生未定义的行为。这应该只是：

```
struct ListofHops { 
   int macAddrLtr;
   int ttlValue;
}; 
```

# http - 如何为http（主域）和https（子域）生成GA？

> ID：13487481
> 
> 赞同：0
> 
> 时间：2012-11-21T06:18:23.187
> 
> 标签：http, https, google-analytics

我有一个主域 ( `http://example.com`) 和一个子域 ( `https://secure.example.com`)，并且我有一个为`http://example.com`.

现在我想跟踪**https**子域，如果我使用为**http 站点**生成的相同代码，那会跟踪两个域吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:42:03.903

是的。相同的代码适用于两种协议。

# objective-c - 潜在的内存泄漏编码 url

> ID：13487484
> 
> 赞同：0
> 
> 时间：2012-11-21T06:18:33.833
> 
> 标签：objective-c, ios

为什么我在使用 XCode 进行分析时会出现内存泄漏？

```
NSString *email = [defaults objectForKey:@"email"];
NSString *encodeEmail = (__bridge NSString *)CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (__bridge CFStringRef)email, NULL, CFSTR(":/?#[]@!$ &'()*+,;=\"<>%{}|\\^~`"), CFStringConvertNSStringEncodingToEncoding(NSUTF8StringEncoding));

NSString *urlp1=@"/xyz/xx/";
NSString *fullUrl=[urlp1 stringByAppendingString: [NSString stringWithFormat:@"%@/following", encodeEmail]]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T06:25:29.653

从[过渡到 ARC 发行说明](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226)

> __bridge 在 Objective-C 和 Core Foundation 之间传输一个指针，但没有所有权转移。

这意味着 encodeEmail 没有分配内存的所有权，因此它不会被 ARC 释放。

我认为你应该使用`__bridge_transfer`

> __bridge_transfer 或 CFBridgingRelease 将非 Objective-C 指针移动到 Objective-C 并将所有权转移给 ARC。ARC 负责放弃对象的所有权。

```
NSString *encodeEmail = (__bridge_transfer NSString *)CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (__bridge CFStringRef)email, NULL, CFSTR(":/?#[]@!$ &'()*+,;=\"<>%{}|\\^~`"), CFStringConvertNSStringEncodingToEncoding(NSUTF8StringEncoding)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T06:24:01.057

您正在使用`CFURLCreateStringByAddingPercentEscapes`它，因为您拥有它，所以您必须释放它（检查名称中的“创建”）

你可以试试看，

```
CFStringRef stringRef = CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (__bridge CFStringRef)email, NULL, CFSTR(":/?#[]@!$ &'()*+,;=\"<>%{}|\\^~`"), CFStringConvertNSStringEncodingToEncoding(NSUTF8StringEncoding));
encodeEmail = [NSString stringWithFormat:@"%@",(NSString *)stringRef];
CFRelease(stringRef); 
```

**更新：** 如果您使用的是 ARC，您还可以`__bridge_transfer`用于将所有权从 created 转移`CFObjects`到`NSObjects`. 您只需将其用作`NSString *encodeEmail = (__bridge_transfer NSString *)...`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T06:26:11.257

因为你会泄漏一个对象。具体来说，`CFString`方法返回的`CFURLCreateStringByAddingPercentEscapes`那个方法，包括关键字“create”，返回一个保留项。您必须手动释放它，或者告诉 ARC 使用以下命令为您处理它：

```
NSString *encodeEmail = (__bridge_transfer NSString*)CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (__bridge CFStringRef)email, NULL, CFSTR(":/?#[]@!$ &'()*+,;=\"<>%{}|\\^~`"), CFStringConvertNSStringEncodingToEncoding(NSUTF8StringEncoding)); 
```

请注意`__bridge_transfer`，让 ARC 为您处理内存管理，它将消除您的警告。

# highcharts - 在 Highchart 中，如果文本太长，如何在下一行显示图例文本？

> ID：13487486
> 
> 赞同：1
> 
> 时间：2012-11-21T06:18:49.240
> 
> 标签：highcharts

我有**[这样](http://www.highcharts.com/demo/pie-legend)**的高图。如果文本太长，如何在下一行
显示图例（*Firefox、IE、chrome... ）文本？*
描述我的问题的图片是![这里](../Images/eaa5a9d0e3132e86a5d286ccf6e53cad.png)

*PS我不熟悉jQuery。* 期待解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T11:07:36.603

您将需要使用`labelFormatter`

```
 labelFormatter: function() 
                {
                      var legendName = this.name;
                      var match = legendName.match(/.{1,10}/g);
                      return match.toString().replace(/\,/g,"<br/>");
                } 
```

我已经对小提琴进行了编辑，你可以在**[这里找到它。](http://jsfiddle.net/QQk8Z/3/)**它在每 10 个字符后将图例项文本推送到下一行。猜猜这就是你需要的。
希望这可以帮助。

# android - 创建一个可绘制文件

> ID：13487495
> 
> 赞同：1
> 
> 时间：2012-11-21T06:19:38.027
> 
> 标签：android

> **可能重复：**
> [创建可绘制文件以制作分隔符](https://stackoverflow.com/questions/13507659/creating-a-drawable-file-to-make-a-separator)

我正在使用以下代码在两个字段之间创建分隔符：

```
<View
    android:layout_width="1dp"
    android:layout_height="wrap_content"
    android:background="#000000" />

<View
    android:layout_width="1dp"
    android:layout_height="wrap_content"
    android:background="#FFFFFF" /> 
```

该代码完美运行，但我想实现这样的目标：

```
<View
    android:layout_width="2dp"
    android:layout_height="wrap_content"
    android:background="@drawable/divider" /> 
```

这样做将帮助我将 2 个视图合二为一。但是我不知道在 divider.xml 文件中写什么代码。我尝试了以下但没有奏效：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
  <item >
    <shape android:shape="rectangle" >
       <stroke android:color="#000000"/>
       <size android:width="1dp" />
    </shape>
</item>
<item >
    <shape android:shape="rectangle" >
       <stroke android:color="#FFFFFF"/>
       <size android:width="1dp" />
    </shape>
</item> 
```

我该如何纠正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T06:30:55.843

使用`<layer-list> </layer-list>`而不是`<shape/>`使用多个形状进行可绘制更改您的代码为：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
 <item >
    <shape android:shape="rectangle" >
       <stroke android:color="#000000"/>
       <size android:width="1dp" />
    </shape>
</item>
<item >
    <shape android:shape="rectangle" >
       <stroke android:color="#FFFFFF"/>
       <size android:width="1dp" />
    </shape>
</item>

</layer-list> 
```

# python - Python 创建一维和二维图像

> ID：13487502
> 
> 赞同：2
> 
> 时间：2012-11-21T06:20:21.503
> 
> 标签：python, image, dimension

下面的代码是提供给我们的，它基本上打印了第二个函数中显示的图像：

```
import sys

# CONSTANTS
MIN_ROW = 0
MAX_ROW = 9
MIN_COLUMN = 0
MAX_COLUMN = 9
WALL = "#"
BUILDING = "b"
BUSH = "u"
PLAYER = "@"
EMPTY = " "
STAIRS = "X"

def display (city):
   r = 0
   c = 0
   print("CITY LEVEL")
   for r in range (0, (MAX_ROW+1), 1):   #LOOPS1
      for c in range (0, (MAX_COLUMN+1), 1):
         sys.stdout.write(city[r][c])
      print()
   print()

def initialize ():
   r = 0
   c = 0
   city = []

   for r in range (0, (MAX_ROW+1), 1): #LOOP2
      city.append([])#appends an empty list to city
      for c in range (0, (MAX_COLUMN+1), 1):
       city[r].append(" ")
   #               0   1   2   3   4   5   6   7   8   9 
   city  [0] =   ["#","#","#","#","#","#","#","#","#","#"]
   city  [1] =   ["#","@"," "," "," "," "," "," ","u","#"]
   city  [2] =   ["#"," "," ","b","b"," "," "," ","X","#"]
   city  [3] =   ["#"," "," ","b","b"," "," "," "," ","#"]
   city  [4] =   ["#"," "," "," "," "," "," "," ","b","#"]
   city  [5] =   ["#","u"," ","u","u","u","u","u","u","#"]
   city  [6] =   ["#","b"," "," "," "," "," "," "," ","#"]
   city  [7] =   ["#"," "," "," "," ","b"," ","b"," ","#"]
   city  [8] =   ["#"," "," "," ","b"," "," "," "," ","#"]
   city  [9] =   ["#","#","#","#","#","#","#","#","#","#"]
   return city   

# MAIN
def main ():
     level = initialize ()
     display (level)

main () 
```

现在我试图为一维图片重现这个，但由于某种原因，我遇到了第一个函数的 sys.stdout.write() 的类型错误。与仅其中一个字符相比，它似乎试图打印整个列表。任何人都可以帮我调试吗？也有人可以告诉我上面标记为 LOOPS1 和 LOOPS2 的代码中的循环中发生了什么

```
import sys

def display(track):
    c=0
    for c in range(0,20,1):
        sys.stdout.write(track[c])
    print()

def initialize():
    c=0
    track= []
    for c in range(0,20,1):
        track.append([])
        track[c].append(" ")
    track[0]= ["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t"]
    return track

level= initialize()
display(level) 
```

如果有任何不清楚的地方，请告诉我，我会尽快解决。

编辑：我的程序代码：

```
import sys
import random

# CONSTANTS

PLAYER = "@"
EMPTY = " "

#Takes the information from the function initialize() and displays it. Outputs the fitness simulation.
def display (track):
    r = 0
    c = 0

    print("\nTRACK")
    for r in range (0, (4), 1):
        for c in range (0, (41), 1):
            sys.stdout.write(track[r][c])
        print()
    print()

def speedDisplay(speed):
    options=["(w)alk","(j)og","(r)un","(f)ast run"]
    for o in range(0,speed,1):
        print(options[o],"\n")

def inputs():#ioerror here?
    values= set("wWjJrRfFlLsSeE")
    while True:
        move=input("\nPlease select the speed you would like to travel at from the options listed:")
        for m in move:
            if m not in values:
                print("\nInadmissable entry, Please only use inputs valid in the options above.")
                break
        else:
            break
    if move=="w" or move=="W":
        usedEnergy=0#turn into random functions later
    elif move=="j" or move=="J":
        usedEnergy=1
    elif move=="r" or move=="R":
        usedEnergy=2
    elif move=="f" or move=="F":
        usedEnergy=5
    return usedEnergy

def remainingEnergy(energy,usedEnergy):
    energy= energy-usedEnergy
    print("\nRemaining Energy:",energy,"\n")
    return energy

def amountLeft(energy):
# enter ioexception error here somewhere?

    while True: 
        if energy <0 or energy >20:
            print("error")
        elif energy>=5:
            speed=4
        elif energy <5 and energy >=2:
            speed=3
        elif energy <2 and energy >=1:
            speed=2
        elif energy <1 and energy >=0:
            speed=1
        else:
            break

        return speed

# This function is used to initialize the game track that will later be displayed. 
def initialize ():
    r = 0
    c = 0
    track = []
    #Creates each row and column. A "for" loop initiates which creates and appends an empty list to the list "track". Then, taking the current row into consideration, the respective number of columns are created via the inner "for loop and a space is appended to the end of the current row. The loop re-initiates and the process is repeated for all 4 required rows. This results in 4 rows and 41 coloumns.
    for r in range (0, (4), 1):
    #appends an empty list to track
        track.append([])
        for c in range (0, (41), 1):
    #appends a space to the current row
            track[r].append(" ")
    # the actual rows and columns are created below.
    #               0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F   G   H   I   J   K   L   M   N   O   P   Q   R   S   T   U   V   W   X   Y
    track  [0] =   [" ","0"," ","1"," ","2"," ","3"," ","4"," ","5"," ","6"," ","7"," ","8"," ","9"," ","A"," ","B"," ","C"," ","D"," ","E"," ","F"," ","G"," ","H"," ","I"," ","J"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "]
    track  [1] =   [" ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," "]
    track  [2] =   ["|","@","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"]
    track  [3] =   [" ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," ","-"," "]
    return track   

def move (sRow, sCol, dRow, dCol, track):
    EMPTY= " "
    PLAYER= "@"
    DIVIDER= "|"
    track[sRow][sCol] = EMPTY
    track[dRow][dCol] = PLAYER

# MAIN
def main ():
    track = initialize ()
    display (track)
    print("\n(w)alk\n\n(j)og\n\n(r)un\n\n(f)ast run")
    usedEnergy=inputs()
    energy=20
    energy=remainingEnergy(energy,usedEnergy)
    while energy<20:
        usedEnergy=inputs()
        speed= amountLeft(energy)
        speedDisplay(speed)
        energy=remainingEnergy(energy,usedEnergy)

main () 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T06:32:58.963

好吧，这行得通：

```
import sys

def display(track):
    c=0
    for c in range(0,20,1):
        sys.stdout.write(track[c])
    print()

def initialize():
    c=0
    track = ["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t"]
    return track

level= initialize()
display(level) 
```

您的问题是您的处理方式不匹配`track`。在`initialize`您将它创建为列表列表时，但在`display`您访问它时，就像它只是一个字符列表一样。制作两个字符列表更简单，制作两个字符列表更通用（允许将相同的函数用于 1D 和 2D 案例）。

# 第一个循环发生了什么？

从`display`您的第一个代码块中：

```
for r in range (0, (MAX_ROW+1), 1):   #LOOPS1
     for c in range (0, (MAX_COLUMN+1), 1):
         sys.stdout.write(city[r][c])
     print()
 print() 
```

R 是从 0 到 MAX_ROW，0 - 9 变化的行索引。C 是从 0 到 MAX_COLUMN，0 - 9 变化的列索引。

`sys.stdout.write(city[r][c])`在没有换行符的情况下写出 city 的当前行和列（已设置为单个字符）。

由于 print() 语句，您的代码可能是 Python 3。如果您提到或标记它可能会有所帮助。

我正在运行 Python 2.7，因此我将使用旧的打印语法，以便测试我发布的代码。您可能必须将其还原（添加括号）。

我会这样写：

```
def display (city):
   print("CITY LEVEL")
   for row in city:
      for c in row:
         print c,
      print
   print 
```

在 Python 2 中，打印末尾的逗号会抑制换行符。

# 第二个循环发生了什么？

从`initialize`您的第一个代码块中：

```
for r in range (0, (MAX_ROW+1), 1): 
```

`r`将是 0 到 MAX_ROW，0-9

```
 city.append([])#appends an empty list to city 
```

`city`是一个列表。这会将一个空列表附加到城市。

```
 for c in range (0, (MAX_COLUMN+1), 1): 
```

`c`将 b 0 到 MAX_COLUMN, 0-9

```
 city[r].append(" ") 
```

将空格字符附加到当前行。

我会这样写：

```
def initialize():
   city = [
       # 0   1   2   3   4   5   6   7   8   9
       ["#","#","#","#","#","#","#","#","#","#"], # 0
       ["#","@"," "," "," "," "," "," ","u","#"], # 1
       ["#"," "," ","b","b"," "," "," ","X","#"], # 2
       ["#"," "," ","b","b"," "," "," "," ","#"], # 3
       ["#"," "," "," "," "," "," "," ","b","#"], # 4
       ["#","u"," ","u","u","u","u","u","u","#"], # 5
       ["#","b"," "," "," "," "," "," "," ","#"], # 6
       ["#"," "," "," "," ","b"," ","b"," ","#"], # 7
       ["#"," "," "," ","b"," "," "," "," ","#"], # 8
       ["#","#","#","#","#","#","#","#","#","#"], # 9
   ]
   return city 
```

# 关于 city.append([])

`initialize`有一行（在第一个循环`for`中）：

```
city.append([])#appends an empty list to city 
```

在进入循环之前`city`是：

```
[] 
```

在第一个附加之后`city`是：

```
[[]] 
```

那是一个包含一个项目的列表，一个空列表。

如果该行是：

city.append(0)

这将是：

```
[0] 
```

或者：

```
city.append("Jim") 
```

它会给你：

```
["Jim"] 
```

但是我们在列表中粘贴另一个列表，创建一个列表列表。

我希望这有帮助。

# javascript - JavaScript 正则表达式模式

> ID：13487508
> 
> 赞同：2
> 
> 时间：2012-11-21T06:20:46.150
> 
> 标签：javascript, regex, string

我有一个像下面这样的字符串......

```
var1=val1 var2=val2 var3="p1 p2 p3 p4" var4="p1 p2" var5=val5 
```

现在我如何才能使用 RegExp 仅在内部替换所有`white spaces`字符串`underscore`，`""`以便字符串如下所示...

```
var1=val1 var2=val2 var3="p1_p2_p3_p4" var4="p1_p2" var5=val5 
```

这样通过使用`.replace('"','').split(' ')`，我可以得到一个如下所示的数组......

```
Array(
   var1: "val1",
   var2: "val2",
   var3: "p1_p2_p3_p4",
   var4: "p1_p2",
   var5: "val5"
) 
```

**请不要 jQuery...**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T06:41:54.827

您希望通过用字符串中的下划线替换空格来将输入字符串中的每个字符串替换为另一个字符串。您可以使用回调替换来做到这一点：

```
var inp='var1=val1 var2=val2 var3="p1 p2 p3 p4" var4="p1 p2" var5=val5'

var outp=inp.replace(/"[^"]*"/g, function(x){
  return x.replace(/ /g, '_');
})

// var outp === 'var1=val1 var2=val2 var3="p1_p2_p3_p4" var4="p1_p2" var5=val5' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T09:31:16.303

我知道这已经得到解答，但我想我会使用积极的前瞻性来分享这个正则表达式。这允许您`replace`不使用回调。

```
var str = 'var1=val1 var2=val2 var3="p1 p2 p3 p4" var4="p1 p2" var5=val5';

str = str.replace(/\s(?=[^=]*")/g, '_'); 
```

解释：

```
\s        match a space...
(?=       start of positive look-ahead
[^=]*"    ...which is followed by anything except an =, up to a double-quote
)         end of positive look-ahead 
```

然后`g`将重复搜索

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T06:40:54.583

```
var arr = string.replace(/(=")([^"]*)(")/g,function(m,g1,g2,g3){return g1 + g2.replace(/ /g, "_") + g3;}).split(' '); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T06:26:09.963

## 选择您需要的：

***目的：***

```
var txt = 'var1=val1 var2=val2 var3="p1_p2_p3_p4" var4="p1_p2" var5=val5',
    arr = txt.split(" "),
    obj = {};

for(var i = 0 ; i < arr.length; i++){
    var ind = arr[i].match(/^(.+)=/)[1],
        val = arr[i].match(/=(.+)$/)[1].replace(/_/g," ");
    obj[ind] = val;
}

console.log(obj);  //This will give you an object.
// {
//     var1: "val1",
//     var2: "val2",
//     var3: ""p1 p2 p3 p4"",
//     var4: ""p1 p2"",
//     var5: "val5"
// } 
```

* * *

***大批：***

```
var txt = 'var1=val1 var2=val2 var3="p1_p2_p3_p4" var4="p1_p2" var5=val5',
    arr = txt.split(" "),
    list = [];

for(var i = 0 ; i < arr.length; i++){
    var val = arr[i].match(/=(.+)$/)[1].replace(/_/g," ");
    list.push(val);
}

console.log(list);  //This will give you an array.
// [
//     "val1",
//     "val2",
//     ""p1 p2 p3 p4"",
//     ""p1 p2"",
//     "val5"
// ] 
```

# c# - SQL 和 C# - SQL 数据库中的选项卡

> ID：13487514
> 
> 赞同：1
> 
> 时间：2012-11-21T06:22:01.180
> 
> 标签：c#, sql, sql-server, vb.net, visual-studio

您好，尝试为数据库中的每种产品制作标签

我的数据库如下所示：

```
Id     Product 
1      Bananas   
2      Bananas   
3      Grapes   
4      Strawberrys   
5      Strawberrys   
6      Oranges 
```

我已经在 c# 中的表单和数据库之间建立了连接，并且能够进行简单的查询。

我有一个名为 Tabcontrol1 的 TabControl，我想知道如何查询数据库并将产品输出到 tabcontrol 但就像在示例中香蕉多次出现一样，但我不需要重复，所以跳过另一个一，总共将有大约20种产品。

所以我的标签控件看起来像这样：

```
____________________________________________
| Bananas | Grapes | Strawberrys | Oranges |___________________ 
```

有高手能帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:30:29.787

用于`SELECT DISTINCT Product FROM YourTable`从数据库中取回不重复的内容。

然后，只需遍历返回的数据集并为每个结果创建选项卡。

[http://msdn.microsoft.com/en-us/library/zb7xae05.aspx](http://msdn.microsoft.com/en-us/library/zb7xae05.aspx)

我没有写出所有的代码，因为这个网站是在假设你知道如何编程的情况下运行的。您需要从您的 .NET 代码中调用存储过程，或者传入我在上面给您的 sql 命令，这样您就可以开始使用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:39:19.990

从 db 中获取产品名称，然后创建 foreach() 循环以将返回值分配给选项卡控件，从而为每个产品名称创建特定选项卡

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:05:37.887

进行仅显示唯一条目的查询：从表中选择不同的产品。

将这些行保存到数组/数据表/其他。

使用 foreach （或任何让你打勾的东西）和每一行/项目的巡航槽收集：

```
tabcontrol1.TabPages.Add(stringName); 
```

希望它有所帮助。

# datasource - 用于树视图的 Kendo 分层数据源，过滤到选中的节点

> ID：13487517
> 
> 赞同：1
> 
> 时间：2012-11-21T06:22:15.587
> 
> 标签：datasource, kendo-ui, kendo-treeview

我正在为 Kendo UI Treeview 使用 Kendo Hierarchical Datasource。在单击事件中，我只想在数据源中保留已检查的 rom。

我试过

```
 $('#treeview')
         .getKendoTreeView()
         .dataSource
         .filter({ 
                  field: "checked", 
                  operator: "eq", 
                  value: true }); 
```

但无济于事。

我有正确的字段吗？

另外，对于奖励积分，如何删除过滤器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T08:31:24.863

`checked`如果您在模板中这样定义它，那么它是正确的字段：

```
$("#treeview").kendoTreeView({
    checkboxes: { template: "<input type='checkbox' name='checkedNodes' #= item.isChecked ? 'checked' : '' # value='#= item.id #' />" },
    dataSource: [{ 
        id: 1, text: "My Documents", expanded: true, spriteCssClass: "rootfolder", items: [
            { id: 2, text: "about.html", expanded: true, isChecked: false, spriteCssClass: "folder" },
            { id: 3, text: "index.html", expanded: true, isChecked: true, spriteCssClass: "folder" }
        ]
     }]
}); 
```

在我的例子中，它被命名`isChecked`（见`item.isChecked`我的代码）。

但是，为了正确过滤，请注意：`filter`仅作用于当前级别（例如，请参阅此[问题](https://stackoverflow.com/questions/12303235/kendoui-filter-treeview)）。

对于您的奖励问题，要删除过滤器，只需应用以下代码：

```
$('#treeview')
     .data("kendoTreeView")
     .dataSource
     .filter({ }); 
```

（在您的层次结构的所有级别上都与以前相同！）。

* * *

**编辑**

为了使用过滤器，这里有一些小提琴：http: [//jsfiddle.net/scaillerie/RHh67/](http://jsfiddle.net/scaillerie/RHh67/)。

# php - php上的视频查看器

> ID：13487522
> 
> 赞同：0
> 
> 时间：2012-11-21T06:22:42.073
> 
> 标签：php, video, curl, bots

我正在尝试在 PHP 上制作一个 Flash 视频查看器。但视频的统计数据并没有增加。自动播放已开启。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $video_url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, $timeout);
curl_setopt($ch, CURLOPT_USERAGENT, $random_browser);
curl_setopt($ch, CURLOPT_PROXY, $random_proxy);
curl_setopt($ch, CURLOPT_HTTPPROXYTUNNEL, 1);
$page = curl_exec($ch);
curl_close($ch); 
```

什么是错误？有什么解决办法吗？使用`echo`函数重要吗？

# php - 数组映射函数，每次返回false

> ID：13487526
> 
> 赞同：1
> 
> 时间：2012-11-21T06:23:00.590
> 
> 标签：php, arrays, multidimensional-array

好的，尝试创建一个可以将变量传递给的函数，该函数将在静态当前硬编码的多维数组中搜索其键，并返回与找到的键匹配的数组（如果找到）。

这就是我迄今为止所拥有的。

```
public function teamTypeMapping($teamType)
{
    //we send the keyword football, baseball, other, then we return the array associated with it.
    //eg: we send football to this function, it returns an array with nfl, college-football
    $mappings = array(
                "football" => array('nfl', 'college-football'),
                "baseball" => array('mlb', 'college-baseball'),
                "basketball" => array('nba', 'college-basketball'),
                "hockey" => array('nhl', 'college-hockey'),
                );
    foreach($mappings as $mapped => $item)
    {
        if(in_array($teamType, $item)){return $mapped;}
    }
    return false;
} 
```

我想打电话给它，例如：

```
teamTypeMapping("football"); 
```

Amd 让它返回与键“足球”相关联的数组，我已经尝试了几种方法，每次我出现错误时，也许我错过了一些东西，所以我在这一点上接受一些建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T06:27:51.150

它不起作用的原因是您正在循环访问 $mappings 数组，并试图查看 $teamType 是否在 $item.xml 中。

你的方法有两个问题：

1.  您正在 $item（这是数组（'nfl', 'college-football')）中查找 'football'。这是不正确的。
2.  您正在使用 in_array() 检查数组中是否存在“值”，而不是您使用的“键”。您可能想看看[array_key_exists()](http://php.net/manual/en/function.array-key-exists.php)函数 - 我认为这就是您要使用的。

我个人的偏好是使用 isset() 而不是 array_key_exists()。语法略有不同，但都做同样的工作。

修改后的解决方案见下文：

```
public function teamTypeMapping($teamType)
{
    //we send the keyword football, baseball, other, then we return the array associated with it.
    //eg: we send football to this function, it returns an array with nfl, college-football
    $mappings = array(
                "football" => array('nfl', 'college-football'),
                "baseball" => array('mlb', 'college-baseball'),
                "basketball" => array('nba', 'college-basketball'),
                "hockey" => array('nhl', 'college-hockey'),
                );
    if (isset($mappings[$teamType])) 
    {
        return $mappings[$teamType];
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T06:48:58.323

我检查了你的功能

```
public function teamTypeMapping($teamType)
{
    //we send the keyword football, baseball, other, then we return the array associated with it.
    //eg: we send football to this function, it returns an array with nfl, college-football
    $mappings = array(
                "football" => array('nfl', 'college-football'),
                "baseball" => array('mlb', 'college-baseball'),
                "basketball" => array('nba', 'college-basketball'),
                "hockey" => array('nhl', 'college-hockey'),
                );
    foreach($mappings as $mapped => $item)
    {
        if(in_array($teamType, $item)){return $mapped;}
    }
    return false;
} 
```

当您想调用它时，例如：

```
teamTypeMapping("football"); 
```

然后它返回false。

解决方案是如果你想要数组那么你想要

```
foreach($mappings as $mapped => $item)
{
    if($mapped == $teamType){return $mapped;}
} 
```

# rest - Neo4j：Cypher over REST 获取操作摘要

> ID：13487528
> 
> 赞同：0
> 
> 时间：2012-11-21T06:23:11.890
> 
> 标签：rest, neo4j, cypher

使用 REST API 获取已完成操作的摘要而不返回节点时，有什么方法吗？

在执行操作后使用 Web 管理控制台时，我会得到如下摘要

*   插入 1 个节点
*   插入了 2 个关系
*   已删除 1 个节点。

在[此处](http://docs.neo4j.org/chunked/milestone/rest-api-cypher.html)的示例中，我注意到没有将摘要信息发送回客户端的示例。我必须返回插入的节点才能知道插入已经发生。

当通过网络进行请求时，最好尽量减少数据响应大小。快速总结将对此有所帮助。是否可以从 REST 端点获取一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:42:55.600

我很确定这是不可能的。不过，这将是一个不错的补充。您是否提交了功能请求？

# delphi - 将 FILETIME 之类的结构视为 UInt64/Int64

> ID：13487540
> 
> 赞同：6
> 
> 时间：2012-11-21T06:23:45.427
> 
> 标签：delphi

在我阅读了一篇 MSDN 博客文章后出现了问题，[为什么不能将 FILETIME 视为 __int64？](http://blogs.msdn.com/b/oldnewthing/archive/2004/08/25/220195.aspx). 文章说，将 a`FILETIME`转换为 an`__int64`会产生未对齐的指针。

`FILETIME`, `LUID`, 和`LUID_AND_ATTRIBUTES`Windows 标头中声明的结构如下：

```
 typedef struct FILETIME {
      DWORD dwLowDateTime;
      DWORD dwHighDateTime;
  }

  typedef struct LUID {
      ULONG LowPart;
      LONG  HighPart;
  }

  typedef struct LUID_AND_ATTRIBUTES {
      LUID  Luid;
      DWORD Attributes;
  } 
```

由于`FILETIME`and `LUID`structs 具有相似的布局，因此将 a`LUID`视为 an`__int64`也可以创建未对齐的指针。但是，`Windows.pas`（此处为 Delphi XE3）实践了这一点——例如：

```
 {$ALIGN 4}
  LUID_AND_ATTRIBUTES = record
    Luid      : Int64;  // Here, LUID is treated as Int64
    Attributes: DWORD;
  end;
  {$ALIGN ON} 
```

另一个例子是

```
 function LookupPrivilegeValue(lpSystemName, lpName: LPCWSTR;
      var lpLuid: Int64): BOOL; stdcall; // LUID is treated as Int64 
```

如何安全地将结构视为`FILETIME`或`LUID` ***直接***  视为`UInt64`/ `Int64`？关键是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T07:07:57.997

在 Delphi 支持的架构上，这在很大程度上不是问题。如果您访问未对齐的数据，x86 和 x64 架构会原谅您。另一方面，访问 Itanium 上未对齐的数据将导致运行时错误。但德尔福从未针对安腾。

重要的问题是记录布局。Int64 的对齐方式为 8。但 FILETIME 和 LUID 的对齐方式为 4。这就是为什么 LUID_AND_ATTRIBUTES 用显式 $ALIGN 4 标记的原因。

如果您打算将 FILETIME 和 LUID 声明为 Int64，那么每次在记录中包含一个时，您都需要特别注意记录布局。

# java - 当鼠标悬停在 JButton 上时如何停止启用它？

> ID：13487547
> 
> 赞同：0
> 
> 时间：2012-11-21T06:24:20.647
> 
> 标签：java, swing, netbeans, jbutton

我使用 NetBeans 创建了一个框架。框架有两个按钮 A 和 B。按钮 A 最初是禁用的。仅当单击按钮 B 时才启用。

```
public newFrame() {    //newFrame is the name of the frame that has buttons A&B
    initComponents();

    btn_A.disable();
}

    private void btn_BActionPerformed(java.awt.event.ActionEvent evt)
{
    btn_A.enable();
} 
```

问题是，当鼠标移到按钮 A 上时，按钮 A 变为活动/启用，即不管按钮 B 是否被单击。我怎样才能解决这个问题？

我希望仅在单击按钮 B 后才启用按钮 A，而不是由于任何其他事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:35:23.317

`btn_A.enable()`是一种已弃用的方法。
要执行此任务，您可以将其替换`btn_A.setEnabled(false);`为禁用按钮并`btn_A.setEnabled(true);`启用按钮。

此外，还有一个建议是，如果您觉得发生了错误，请在您的方法中添加如下语句：

```
 System.out.println("Some statement relevant to the method"); 
```

这些额外语句的主要目的是让您知道该方法何时实际执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T06:31:20.667

使用`btn_A.setEnabled(false)`代替`btn_A.disable()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T06:34:32.983

试试下面的代码：

```
button. addMouseListener(new MouseAdapter() { 
      public void mouseEntered(MouseEvent me) { 
            button.setEnable(true); 
      } 

      public void mouseExited(MouseEvent me) { 
           button.setEnable(false); 
      } 

    }); 
```

# java - Java Class Not Found Exception 但它在同一个 src 文件夹中

> ID：13487549
> 
> 赞同：0
> 
> 时间：2012-11-21T06:24:36.870
> 
> 标签：java, class

我的代码类似于

```
ArrayList<someClassIMade> c=new ArrayList<someClassIMade>();
c.add(new someClassIMade(blah,blah)) 
```

但是由于某种原因，在添加行中我得到了一个找不到类的异常！someClassIMade 类与主类在同一个 src 文件夹中，所以我很困惑。我真的一直在这样做*，*为什么它突然不工作了？我检查了我的运行配置，是的，src 文件夹在那里。程序运行，我只在去调试时看到异常，以查看为什么添加行不起作用并且找不到类。我跑题了，救命？

编辑：更多代码使这更清楚这是 someClassIMade

```
public tuples{
    private int start;
private int end;
private int[] tuple=new int[2];
public int getStart() {
    return start;
}
public void setStart(int start) {
    this.start = start;
}
public int getEnd() {
    return end;
}
public void setEnd(int end) {
    this.end = end;
}
public int[] getTuple() {
    return tuple;
}
public void setTuple(int[] tuple) {
    this.tuple = tuple;
}
public tuples(int start,int end){
    this.start=start;
    this.end=end;
    tuple[0]=start;tuple[1]=end;

} 
```

并且我之前发布的代码是第一次出现在我尝试使用它的类中，这就是错误发生的地方。它们都在（默认包）中，我只使用 Java 本机库。希望这能说明问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T06:34:14.703

正在使用日食？如果是，请清理项目并自动选择构建。我认为这些课程没有建立起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:45:10.410

检查构造函数是否`someClassIMade`是私有的。

# mysql - 更新内部连接问题

> ID：13487552
> 
> 赞同：0
> 
> 时间：2012-11-21T06:24:55.843
> 
> 标签：mysql, sql

我不知道我的查询出了什么问题，但我收到了这个错误：

```
Error Code : 1064
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'From a
INNER JOIN table2 b
ON  a.column1 = b.column1 AND a.column2 = b.column2' at line 4 
```

这是我正在尝试的 sql：

```
UPDATE table1 AS a
Set a.Closed = 2

From a
INNER JOIN table2 b
ON  a.column1 = b.column1 AND a.column2 = b.column2
WHERE number in (01809076,02170039); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T06:28:20.290

in `MySQL`, `UPDATE`with join 的语法是这样的。（*无`FROM`条款*）

```
UPDATE  table1 AS a
        INNER JOIN table2 b
            ON  a.column1 = b.column1 AND 
                a.column2 = b.column2
SET     a.Closed = 2
WHERE   b.number in (01809076,02170039); 
```

您当前使用的是`T-SQL`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:15:17.947

你可以轻松做到：

```
UPDATE  table1,table2 
SET     table1.Closed = 2
WHERE   table1.column1 = b.column1 AND table1.column2 = table2.column2 AND table2.number in (01809076,02170039) ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T06:42:32.367

请像这样更新您的查询：

更新表 1 设置关闭 = 2

从 table1 a INNER JOIN table2 b ON a.column1 = b.column1 AND a.column2 = b.column2 WHERE number in (01809076,02170039);

它肯定会起作用

谢谢乌塔姆

# android - 如何在android中点击textview

> ID：13487556
> 
> 赞同：0
> 
> 时间：2012-11-21T06:25:06.207
> 
> 标签：android, xml, android-widget, textview

单击文本视图不起作用

我的xml是

```
<TextView
android:id="@+id/button2"
android:layout_width="wrap_content"
android:layout_height="fill_parent"
android:layout_marginLeft="5dp"
android:layout_weight="3"
android:gravity="center" 
android:textColor="@color/white"
android:text="click to download sevenstepstocollege"
android:textSize="15dp"
android:onClick="downloadLink"
android:clickable="true">
</TextView> 
```

我的活动代码是

```
public void downloadLink(View v)
{
//String requestId = PurchasingManager.initiatePurchaseRequest(skuKye);
//String requestId=PurchasingManager.initiateItemDataRequest("DeveloperSKU-1234");
skuSet.add(skuKye);
final String requestId = PurchasingManager.initiateItemDataRequest(skuSet);
} 
```

但它不起作用。我无法单击该链接。请指导我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-06T14:07:33.260

好吧，我使用以下代码使 TextView 可点击。

首先，在您的 activity.xml 中添加它，以使 TextView 可点击：

> ```
> <TextView
>     android:id=android:id="@+id/button2" <!-- id to get this TextView -->
>     (...)
>     android:onClick="onClick"  <!-- Add the function onClick() -->
>     android:clickable="true"   <!-- Set the boolean clickable to true -->
> /> 
> ```

然后，在 MainActivity.java 中，添加：

```
private TextView textview;    

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);    
    setContentView(R.layout.activity_main);  

    // Get the TextView by id
    textview = (TextView) findViewById(R.id.button2);

    textview.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
              // TODO when clicked on your link(TextView)
        }
    });
} 
```

正如我现在看到的，您正在尝试从 TextView 中创建一个可点击的链接，而不仅仅是能够点击 TextView，我将在下面提供一个链接，指向 Stack Overflow 中解决的类似问题，您可能会觉得有帮助。

android开发者对TextView的引用：
[https ://developer.android.com/reference/android/widget/TextView.html](https://developer.android.com/reference/android/widget/TextView.html)

Stack Overflow 中关于如何在可点击中创建链接的类似问题可能会有所帮助：
[如何使 TextView 中的链接可点击？](https://stackoverflow.com/questions/2734270/how-do-i-make-links-in-a-textview-clickable#2746708)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T06:34:22.100

你可以这样使用

```
<TextView
                            android:id="@+id/topPaid"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:autoLink="all"
                            android:clickable="true"                           
                            android:text="@string/topPaid"
                            android:textColor="#000000"
                            android:textColorLink="#33CC33" /> 
```

和在活动

```
TextView topPaid = (TextView) findViewById(R.id.topPaid);

Linkify.addLinks(topPaid, Linkify.ALL);

topPaid.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

//write ur logic
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-08T16:23:58.407

在您的 XML 中如下所示：

```
 <TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:clickable="true"
    android:onClick="onTextViewPressed"
   /> 
```

在您附加的活动中 public void onTextViewPressed(View view) { ... }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T06:45:59.203

```
TextView textview = (TextView) findViewById(R.id.text);
textview.setText(Html.fromHtml("<b>Text:</b>  Text with a " + "<a href=\"http://www.google.com\">link</a> " + "Created in the Java source code using HTML.")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T06:54:57.203

XML 代码

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/> 
```

JAVA代码

```
 TextView textView = (TextView) findViewById(R.id.textView1);
    textView.setText(Html.fromHtml("<a href=\"http://www.google.com\">google</a> "));
    textView.setMovementMethod(LinkMovementMethod.getInstance()); 
```

# naudio - 重采样例外

> ID：13487558
> 
> 赞同：0
> 
> 时间：2012-11-21T06:25:15.480
> 
> 标签：naudio, directsound, wasapi

当我使用`ResamplerDmoStream`并选择除**WaveOutput**之外的任何内容（例如**WASAPI**、**DirectSound**）时，我遇到以下异常：无法将 COM 对象`NAudio.DMO.ResamplerMediaComObject`转换为接口类型`Naudio.Dmo.IMediaObject`...

异常调用堆栈：

```
at System.StubHelpers.StubHelpers.GetCOMIPFromRCW(Object objSrc, IntPtr pCPCMD, IntPtr& ppTarget, Boolean& pfNeedsRelease)
at NAudio.Dmo.IMediaObject.GetInputStatus(Int32 inputStreamIndex, DmoInputStatusFlags& flags)
at NAudio.Dmo.MediaObject.IsAcceptingData(Int32 inputStreamIndex) in NAudio\Dmo\MediaObject.cs:line 468
at NAudio.Wave.ResamplerDmoStream.Read(Byte[] buffer, Int32 offset, Int32 count) in NAudio\Wave\WaveStreams\ResamplerDmoStream.cs:line 136
at NAudio.Wave.Wave16ToFloatProvider.Read(Byte[] destBuffer, Int32 offset, Int32 numBytes) in NAudio\Wave\WaveProviders\Wave16toFloatProvider.cs:line 47
at NAudio.Wave.MixingWaveProvider32.Read(Byte[] buffer, Int32 offset, Int32 count) in NAudio\Wave\WaveProviders\MixingWaveProvider32.cs:line 116
at NAudio.Wave.SampleProviders.WaveToSampleProvider.Read(Single[] buffer, Int32 offset, Int32 count) in NAudio\Wave\SampleProviders\WaveToSampleProvider.cs:line 33
at NAudio.Wave.SampleProviders.MeteringSampleProvider.Read(Single[] buffer, Int32 offset, Int32 count) in NAudio\Wave\SampleProviders\MeteringSampleProvider.cs:line 72
at NAudio.Wave.SampleProviders.VolumeSampleProvider.Read(Single[] buffer, Int32 offset, Int32 sampleCount) in NAudio\Wave\SampleProviders\VolumeSampleProvider.cs:line 42
at NAudio.Wave.SampleProviders.SampleChannel.Read(Single[] buffer, Int32 offset, Int32 sampleCount) in NAudio\Wave\SampleProviders\SampleChannel.cs:line 58
at NAudio.Wave.SampleProviders.MeteringSampleProvider.Read(Single[] buffer, Int32 offset, Int32 count) in NAudio\Wave\SampleProviders\MeteringSampleProvider.cs:line 72
at NAudio.Wave.SampleProviders.MultiplexingSampleProvider.Read(Single[] buffer, Int32 offset, Int32 count) in NAudio\Wave\SampleProviders\MultiplexingSampleProvider.cs:line 93
at NAudio.Wave.SampleProviders.SampleToWaveProvider.Read(Byte[] buffer, Int32 offset, Int32 count) in NAudio\Wave\SampleProviders\SampleToWaveProvider.cs:line 35
at NAudio.Wave.DirectSoundOut.Feed(Int32 bytesToCopy) in NAudio\Wave\WaveOutputs\DirectSoundOut.cs:line 516
at NAudio.Wave.DirectSoundOut.PlaybackThreadFunc() in NAudio\Wave\WaveOutputs\DirectSoundOut.cs:line 415 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:35:06.383

问题很可能是您在 STAThread（如果您使用 WinForms 或 WPF）上创建 COM 对象（在本例中为 DMO 重采样器），然后将它们传递给将尝试访问的 NAudio 输出驱动程序模型他们在后台线程上，这是不允许的。

这是一个非常烦人的问题，因为如果您将 GUI 线程设置为 MTAThread，其他东西会中断（例如打开文件对话框）。您的主要选择如下：

1.  坚持使用具有窗口回调的 WaveOut。您还可以使用[WasapiOutGuiThread](http://naudio.codeplex.com/SourceControl/changeset/view/37187f816d29#NAudioDemo/MediaFoundationDemo/WasapiOutGuiThread.cs)，这是我最近添加到演示项目中的一个实验类。这是迄今为止最简单的解决方案。您真的需要使用 DirectSound 吗？
2.  音频管道中没有 ResamplerDmoStream。改用 WaveFormatConversionStream，或者简单地让 WASAPI 插入一个（它会自动执行）
3.  创建一个用于音频播放的后台线程，并从您的 GUI 线程向它发送消息，告诉它您想要开始、停止、重新定位等。不幸的是，这是一个相当复杂的选项。

# c - 为什么在 Linux 中访问内存对齐缓冲区更昂贵？

> ID：13487562
> 
> 赞同：6
> 
> 时间：2012-11-21T06:25:34.053
> 
> 标签：c, performance, memory-alignment

在下面的程序中，我有 2 个缓冲区，一个是 64 字节对齐的，另一个是 16 字节对齐的，在运行 2.6.x 内核的 64 位 Linux 主机上。

高速缓存行长 64 字节。所以，在这个程序中，我一次只访问一个缓存行。`posix_memaligned`如果不比非对齐缓冲区快，我希望看到它是相等的。以下是一些指标

```
./readMemory 10000000

time taken by posix_memaligned buffer: 293020299 
time taken by standard buffer: 119724294 

./readMemory 100000000

time taken by posix_memaligned buffer: 548849137 
time taken by standard buffer: 211197082 
```

```
#include <errno.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <linux/time.h>

void now(struct timespec * t);

int main(int argc, char **argv)
{        
  char *buf;        
  struct timespec st_time, end_time;        
  int runs;        
  if (argc !=2) 
  {
             printf("Usage: ./readMemory <number of runs>\n");                
             exit(1);        
  }        
  errno = 0;        
  runs = strtol(argv[1], NULL, 10);        
  if (errno !=0)        {
            printf("Invalid number of runs: %s \n", argv[1]);
            exit(1);
    }

    int returnVal = -1;

    returnVal = posix_memalign((void **)&buf, 64, 1024);
    if (returnVal != 0)
    {
            printf("error in posix_memaligh\n");
    }

    char tempBuf[64];
    char * temp = buf;

    size_t cpyBytes = 64;

    now(&st_time);
    for(int x=0; x<runs; x++) {
    temp = buf;
    for(int i=0; i < ((1024/64) -1); i+=64)
    {
            memcpy(tempBuf, temp, cpyBytes);
            temp += 64;
    }
    }
    now(&end_time);

    printf("time taken by posix_memaligned buffer: %ld \n", (end_time.tv_nsec - st_time.tv_nsec));

    char buf1[1024];        
    temp = buf1;        
    now(&st_time);        
    for(int x=0; x<runs; x++) 
    {        
      temp = buf1;        
      for(int i=0; i < ((1024/64) -1); i+=64)        
     {                
        memcpy(tempBuf, temp, cpyBytes);                
        temp += 64;        
      }          
    }        
    now(&end_time);        
    printf("time taken by standard buffer: %ld \n", (end_time.tv_nsec - st_time.tv_nsec));
    return 0;
}

void now(struct timespec *tnow)
{
    if(clock_gettime(CLOCK_MONOTONIC_RAW, tnow) <0 )
    {
            printf("error getting time");
            exit(1);
    }
} 
```

第一个循环的反汇编是

```
 movq    -40(%rbp), %rdx        
    movq    -48(%rbp), %rcx        
    leaq    -176(%rbp), %rax
    movq    %rcx, %rsi
    movq    %rax, %rdi
    call    memcpy
    addq    $64, -48(%rbp)
    addl    $64, -20(%rbp) 
```

第二个循环的拆卸是

```
 movq    -40(%rbp), %rdx
    movq    -48(%rbp), %rcx
    leaq    -176(%rbp), %rax
    movq    %rcx, %rsi
    movq    %rax, %rdi
    call    memcpy
    addq    $64, -48(%rbp)
    addl    $64, -4(%rbp) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:26:28.793

您的基准测试存在一些问题：

*   您的运行时间太短，因此您可能会看到很多噪音/抖动。
*   如果您启用了 CPU 频率缩放，则第一个循环可能在 CPU 切换到全频/涡轮频率之前执行。您需要先预热 CPU，或者最好在基准测试期间关闭频率缩放。
*   您可能正在观察调度，因为您没有以实时优先级运行。
*   每次运行您只得到一个样本，您至少需要运行 30 次才能做出任何科学判断（只有一个样本的科学研究通常称为轶事）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T08:55:20.087

原因可能是缓冲区的相对对齐。

`memcpy`复制字对齐数据（32/64 位）时工作速度最快。
如果两个缓冲区对齐良好，则一切正常。
如果两个缓冲区以相同的方式未对齐，`memcpy`则通过逐字节复制小前缀来处理它，然后逐字运行剩余部分。

但是，如果一个缓冲区是字对齐的，而另一个不是，则无法同时进行读取和写入字对齐。所以`memcpy`仍然一个字一个字地工作，但是一半的内存访问是严重对齐的。

如果您的两个堆栈缓冲区都以相同的方式未对齐（例如，两个地址都是 8*x+2），但是来自的缓冲区`posix_memalign`是对齐的，它可以解释您所看到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:55:32.823

当我交换测量块时——也就是说，首先和`posix_memalign`第二次运行标准缓冲液测量，我得到完全相反的结果。换句话说，我的 CPU（英特尔酷睿 2）的第一个复制循环几乎总是比第二个慢，无论它们如何对齐。

我尝试使用`malloc()`标准缓冲区而不是将其放在堆栈上 - 它几乎对速度没有任何影响，第一个循环仍然总是较慢。

我还尝试了`posix_memalign()`您的小型 64 字节缓冲区 - 它没有任何区别。

**编辑：**我已经编辑了您的代码以进行 3 次测量：posix 对齐、malloc'ed 和堆栈上的缓冲区（请参见下面的代码）。

事实证明，只有第一个循环很慢。任何后续循环都花费几乎完全相同的时间（有一些小噪音）。

我相信我们正在观察 Linux 调度程序在看到 100% CPU 负载后立即提高 CPU 时钟速度。

我的跑步结果：

```
$ ./readmemory 2000000 5
time taken by posix aligned: 19599140
time taken by std malloc   : 14711350
time taken by std on stack : 14680668
time taken by posix aligned: 14729273
time taken by std malloc   : 14685338
time taken by std on stack : 14839183
time taken by posix aligned: 14709836
time taken by std malloc   : 15551900
time taken by std on stack : 14659350
time taken by posix aligned: 14721298
time taken by std malloc   : 14691732
time taken by std on stack : 14691246
time taken by posix aligned: 14722127
time taken by std malloc   : 15538286
time taken by std on stack : 14723657 
```

更新代码：

```
// compile with: g++ readmemory.c -o readmemory -lrt

#include <time.h>
#include <errno.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define BUF_SIZE 1024
#define COPY_BYTES 64

void now(struct timespec *tnow) {
    if (clock_gettime(CLOCK_MONOTONIC, tnow) < 0) {
        printf("error getting time");
        exit(1);
    }
}

void measure(char * buf, int runs, const char * msg) {
    char tempBuf[64];
    struct timespec st_time, end_time;
    char * temp;
    now(&st_time);
    for (int x=0; x<runs; x++) {
        temp = buf;
        for (int i=0; i < ((BUF_SIZE/COPY_BYTES) - 1); i+=COPY_BYTES) {
            memcpy(tempBuf, temp, COPY_BYTES);
            temp += COPY_BYTES;
        }
    }
    now(&end_time);
    printf("time taken by %s: %ld\n", msg, end_time.tv_nsec - st_time.tv_nsec);
}

int main(int argc, char **argv) {
    char * buf1;         // posix_memalign'ed
    char * buf2;         // malloc'ed
    char buf3[BUF_SIZE]; // alloc on stack
    int rc = -1;
    int runs;
    int loops;
    if (argc != 3) {
        printf("Usage: ./readMemory <runs> <loops>\n");
        exit(1);
    }
    errno = 0;
    runs    = strtol(argv[1], NULL, 0);
    if (errno != 0) {
        printf("Invalid number of runs: %s \n", argv[1]);
        exit(1);
    }
    loops = strtol(argv[2], NULL, 0);

    rc = posix_memalign((void **)&buf1, COPY_BYTES, BUF_SIZE);
    if (rc != 0) {
        printf("error in posix_memalign\n");
        exit(1);
    }
    buf2 = (char *) malloc(BUF_SIZE);
    if (buf2 == NULL) {
        printf("error in malloc\n");
        exit(1);
    }

    for (int i=0; i<loops; i++) {
        measure(buf1, runs, "posix aligned");
        measure(buf2, runs, "std malloc   ");
        measure(buf3, runs, "std on stack ");
    }

    return 0;
} 
```

我认为我们正在观察现代 CPU 实现缓存的相当复杂的方式。

# jquery - 从 jQuery Ajax 调用的 .NET Web 服务不处理编码的查询字符串

> ID：13487563
> 
> 赞同：0
> 
> 时间：2012-11-21T06:25:39.067
> 
> 标签：jquery, .net, ajax

我有一个简单的 .NET [asmx] Web 服务设置，如下所示：

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json, UseHttpGet = true)]
public string Find(string stateAbbrev, string city, string name) 
{
   // Code
} 
```

我从此调用此 Web 方法：

```
 $.ajax({
                type: "get",
                contentType: "application/json; charset=utf-8",
                cache: false,
                url: "/webservice.asmx/Find",
                data: { stateAbbrev: "'" + escape(self.selectedState()) + "'", city: "'" + escape(self.city()) + "'", name: "'" + escape(self.name()) + "'" },
                dataType: "json",
                success: function() { }
              }); 
```

我已经尝试了上述 url/data 参数的几种变体。包括encodeURI、encodeURIComponent和escape。问题是在客户端编码的数据没有在服务器上正确处理。我的意思是，当我对查询字符串进行编码/转义时，我最终会收到这样的 HTTP GET 请求：

```
http://localhost/webservice.asmx/Find?stateAbbrev=''&city='MyCity%2527'&name='' 
```

%2527 是一个转义字符。服务器处理这个城市名称实际上是“MyCity%2527”。

我是否需要在服务器本身上做任何事情，或者查询字符串的解码是否应该由 .NET 处理？我是否正确进行编码？

谢谢你，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:37:49.553

尝试声明一个变量来获取 self.selectedState() 的值，从那里你可以检查值上是否有多余的字符。然后将变量传递给ajax。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:42:00.357

将数据行更改为：

```
 data: { stateAbbrev: escape(self.selectedState()), city: escape(self.city()) , name:escape(self.name()) }, 
```

您不必引用它...

或者，如果您想像 JSON 一样发送它，您可以尝试使用

```
data: JSON.stringify({ stateAbbrev: escape(self.selectedState()), city: escape(self.city()) , name:escape(self.name()) }), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T21:24:03.570

不幸的是，我能解决这个问题的唯一方法是使用 HTTP 'POST' 而不是 'GET'，因为 POST 会自动对发送到服务器的数据进行编码。

# android - 使用 android facebook sdk 发布视频

> ID：13487564
> 
> 赞同：1
> 
> 时间：2012-11-21T06:25:54.583
> 
> 标签：android, facebook

我正在尝试使用 android facebook sdk 发布视频。通过很长一段时间。onComplete 方法已被激活。但它无法在 Facebook 中显示。我还添加了权限`{user_videos,publish_stream,read_stream etc..}`

```
public void uploadVideo(String dataPath,String VideoDescription)
{
    InputStream in = null ;
    byte[] data ;
    Bundle param ;

    try{
        in = new FileInputStream(dataPath);
        Log.e(tag, "start reading..");
    }catch(Exception e)
    {
          Log.e(tag, "coudlnt find.");
        e.printStackTrace();
    }
    data = readBytes(in);
    param = new Bundle();

    param.putString("name", "adfasdfasdf");
    param.putString("message", "sdfsdf");
    param.putString("filename", "MOV008.mp4");
    param.putString("description", VideoDescription);
    param.putByteArray("video", data);
    Log.e(tag, "upload");
    Utility.mAsyncRunner.request("me/videos", param,"POST",new fbRequestListener(),null);
} 
```

# java - 谷歌应用引擎无法仅在生产中获取 blob 密钥

> ID：13487571
> 
> 赞同：2
> 
> 时间：2012-11-21T06:26:32.930
> 
> 标签：java, image, google-app-engine, blobstore

我遇到了一个似乎无法解决的问题。我的问题是在应用引擎回调我的服务后检索 blob 密钥。我已经尝试使用 `blobstoreService.getUploads(request)`，并且我还尝试根据被回调给我的请求从输入流中提取 blob 键。

真正奇怪的是，如果我查看仪表板，我会在 blob 存储数据视图中看到我的所有图像。

无论我如何尝试取出 blob 键，我都会收到此错误：

> com.google.apphosting.utils.servlet.ParseBlobUploadFilter doFilter：无法解析多部分消息：javax.mail.internet.ParseException：缺少';'

我真的很想听这个，我真的需要一点帮助。

编辑更多代码

blob 存储 url 的获取

```
private String fetchUrl()
{
    String url = blobstoreService.createUploadUrl("/BS/returnKey");
    return url;
} 
```

发生错误的返回代码片段

```
...
if(inUrl.contains("returnKey"))
{
    Map<String, List<BlobKey>> blobs = blobstoreService.getUploads(req);
... 
```

所以在我的开发环境中（开发应用服务器与 eclipse 的 GAE 插件一起打包），它工作正常，但是在我部署到应用引擎后，相同的代码将无法工作。我还尝试将数据从请求中的 Input 流中提取出来，结果相同（在 dev 上工作，而不是在 prod 上工作）。

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T02:49:48.993

问题是表单上输入的 id 中不能有空格。我觉得应该有一个更明显的错误。

无论如何，我希望有人觉得这很有用！

# javascript - responseXML 剪辑发送的 XML 数据

> ID：13487574
> 
> 赞同：1
> 
> 时间：2012-11-21T06:26:44.023
> 
> 标签：javascript, xmlhttprequest

我是新手，`XMLHttpRequest`但已成功使用`GET`.

现在我需要发送`POST`和接收`XML`。我`PHP`的服务器正在接收帖子，甚至以 XML 格式发回数据，但是如果 XML 元素包含类似 html 的代码，我会遇到一个奇怪的问题：responseXML 将从 html 代码剪辑的元素文本传递到末尾。

以下是相关代码：

PHP 发送 XML：

```
header( 'Content-type: text/xml' );
echo '<?xml version="1.0"  encoding="UTF-8"   ?>'; 
echo "<posts>"; 
echo "<textblock>Block with html<br />Next line in block</textblock>"; 
echo "<inputline>input line</inputline>";
echo "</posts>"; 
```

根据 Firebug 的完整 XML 响应（注意所有数据都在那里）

```
<?xml version="1.0"  encoding="UTF-8"   ?><posts><textblock>Block with html<br />
Next line in block</textblock><inputline>input line</inputline></posts> 
```

回到浏览器接收到的 JS 变量*得到*“使用 html 阻止”，仅此而已。 *HttpPostExch*是 XMLHttpRequest

```
var received = 
HttpPostExch.responseXML.getElementsByTagName("textblock")[0].firstChild.data; 
```

下一个元素 inputline 可以正常使用。上面是FF16，IE8也是这样。所以我应该做错事将`HTML`代码包含在`XML`.

有什么想法为什么当 html 存在时代码会这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:05:12.347

XML 不接受元素文本中的尖括号，因此无法发送 HTML 文本。我认为这是一个不必要的限制。我很容易将元素的结尾与 HTML 标记区分开来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:32:51.047

您正在访问节点的第一个子`textblock`节点，这是一个带有 text 的文本节点`"Block with html"`。这里的行为完全是意料之中的。如果您想要整个`textblock`节点，请使用：

```
HttpPostExch.responseXML.getElementsByTagName("textblock")[0].data; 
```

# c# - Chart Control .NET 未显示所有数据

> ID：13487582
> 
> 赞同：1
> 
> 时间：2012-11-21T06:27:25.627
> 
> 标签：c#, windows, charts

我在网站中使用了 .net 图表控件。当我使用大量数据启动它时，图表不会显示所有数据。如果有人可以帮助我找出是否有办法显示我拥有的所有数据。如果我可以在图表上方显示图例。请回复。

```
Series series = new Series(name);
series.ChartType = (type == 1) ? SeriesChartType.Column : SeriesChartType.Pie; 
foreach (KeyValuePair<string, double> item in xy) 
{ 
      series.Points.AddXY(item.Key,item.Value);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:19:44.557

您应该设置最大值和最小值 Chart1.ChartAreas("ChartArea1").AxisY.Maximum = vMaxY Chart1.ChartAreas("ChartArea1").AxisY.Minimum = vMaxY

# android - Android openGL奇怪，重置变量

> ID：13487583
> 
> 赞同：0
> 
> 时间：2012-11-21T06:27:38.033
> 
> 标签：android, opengl-es

我正在用一个简单的 3D 引擎构建一个 Android 应用程序。它在早些时候工作，但非常混乱。我已经对其进行了重构，但我对 3D 引擎几乎没有做任何事情。现在我遇到了一个非常奇怪的问题，在 draw() 方法中调用 translatef（它本身是从实现 GLSurfaceView.Renderer 的类中的 onDrawFrame 中调用的）不使用 x/z 浮点变量的当前值，它们的范围是类。我无法解释。零代码可以将它们重置为初始值，但这就是正在发生的事情。唯一一次接触这些变量是当类被实例化时（完成一次，再也没有接触过），当它们由于用户输入而改变时（在每个可能的点用调试器验证是准确的），以及当 translatef 被调用时，

问题是，它们始终是由 translatef 方法读取时传递给构造函数的初始值，但在使用或更改它们时在类中的任何其他点都是准确的。例如，如果我们将 z 设置为 z + 1，则无论 translatef 读取的值如何，它都会保持在该值。是什么赋予了？我不知道为什么 draw() 和/或 translatef() 方法会以某种方式坚持原始值而不读取修改后的值。我使用 GL ES 1.0 和 Android 2.2 作为我的测试平台。

这里有太多东西可以全部转储，但这应该足以解决问题：

```
private float movex, movez;

public GLEngine(){
    //The values are set in the constructor and are accurate at this point.
    movex = Controller.getX();
    movey = Controller.getZ();
}

public void move(float x, float z){
    //Again, debugging in here shows that the values are being set properly.
    movex = x;
    movez = z;
}

public void onDrawFrame(GL10 gl){
    //Debugging anywhere within this method shows only the values for movex and
    //movez that were set in the constructor.
    ...
    gl.translatef(movex, .5f, movez);
    ... 
```

我得到了使 movex 和 movez volatile 的提示，因为这可能与线程问题有关（尽管我没有在这里明确声明任何线程），但这并没有帮助。

由于这两个值都保存在类之外，我可以通过在 onDrawFrame 方法中从控制器中拉出它们来完成这项工作，但这需要在每次绘制时拉出变量并在它们上执行额外的操作，这是昂贵的. 一定有更好的方法...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T01:03:00.913

由于`x`和`z`是`private`变量，因此应该很容易追踪。

您只能通过您的`move`方法设置它们。要找出这一点，请删除或注释掉您的`move`方法（暂时）并保存。Eclipse 将突出显示所有现在因此而损坏的代码。

一旦您确定所有更改都已通过该方法`x`，请在此处设置断点。（您也可以设置条件断点）。`z``move`

如果你停在断点处，你可以看到哪个方法调用了move。

这应该可以让您跟踪问题。

# ruby-on-rails - 将 js 变量传递给服务器代码

> ID：13487593
> 
> 赞同：0
> 
> 时间：2012-11-21T06:28:54.317
> 
> 标签：ruby-on-rails, ajax

我有一个带有 2 个输入和按钮的表单。用户将提要 url 放在第一个输入中并按下按钮：

```
<%= link_to "get name", { :controller => 'Feeds', :action => "get_title" }, 
:remote => true, :class=>'btn btn-mini' %> 
```

这是控制器方法

```
def get_title
   respond_to do | format |  
       format.js {render :layout => false}  
   end
end 
```

这是一个 get_title.js.erb：

```
var url = $( "#feed_url" ).val();
console.log(url);
$( "#feed_name" ).val("<%= @proxy.title(url) %>"); 
```

我得到第一个输入的值并想将它作为参数传递给 Ruby 类。但在这种情况下，我得到了错误：

```
ActionView::Template::Error (undefined local variable or method `url' for #<#<Class:0x41ec170>:0x41ef968>):
    1: var url = $( "#feed_url" ).val();
    2: console.log(url);
    3: $( "#feed_name" ).val("<%= @proxy.title(url) %>"); 
```

Rails 认为 'url' 是一个 Ruby 变量，但不是 JS 变量。

如何将 JS 变量传递给 Ruby 代码？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:10:17.443

请记住，任何 ERB (ruby) 代码都是在服务器端执行的，而 Javascript 当然是在客户端呈现的。结果，在`<%= @proxy.title(url) %>`评估该 url 值之前，您的行就被渲染了。针对您的情况的解决方案更像是将数据传递给 Rails，并呈现响应。促进这一点的三件事（请记住，这只是一种方法，我相信还有很多其他方法，可能还有更好的方法）：

1-您的 link_to 不会发布用户输入的 URL 值，因为它没有发布表单。相反，将周围的表单更改为使用 :remote=true，并使用典型的 form.submit 按钮而不是此链接。您的带有 URL 值的表单将被提交（并且它将是异步的）。

2-在您的控制器中，像您尝试做的那样呈现您的标题，按照以下方式做一些事情：

```
def get_title
    render :text=>@proxy.title(params[:url])
end 
```

3-绑定到 ajax:success 事件，类似于以下内容：

```
$("form#myForm").bind("ajax:success", function(event, data, status, xhr){
    $( "#feed_name" ).val(data) // data, in this case, is the rendered `@proxy.title(url)` we did in step 2.
}) 
```

希望这是有道理的。如果没有，请告诉我。

# wordpress - 按帖子类型对搜索结果进行排序

> ID：13487594
> 
> 赞同：0
> 
> 时间：2012-11-21T06:29:08.700
> 
> 标签：wordpress, sorting, loops, search

我试图弄清楚如何按帖子类型对搜索结果进行排序。我问了关于 wordpress 堆栈交换的问题，有人尝试回答，但我认为他们不理解我想要达到的目标。-- [https://wordpress.stackexchange.com/questions/72914/search-results-sorted-by-post-types](https://wordpress.stackexchange.com/questions/72914/search-results-sorted-by-post-types)

> 例如，当一个人搜索他们正在使用结果页面的术语时，会显示从所有帖子类型中找到的所有>帖子，但在顶部有不同的帖子类型名称>链接，它们将对结果进行排序并仅显示相应帖子类型的帖子。现在我在每个帖子类型的搜索结果页面上有几个循环，但是当我测试它时，>循环都显示相同的结果，即使每个循环都有一个不同帖子类型的查询。

我的搜索页面代码 - [http://pastebin.com/L9zEw1cn](http://pastebin.com/L9zEw1cn)

这比第一个循环略高`<?php global $wp_query; $total_results = $wp_query->found_posts; ?> This is the first loop <?php if(have_posts()) : ?> <?php while(have_posts()) : the_post() ?> //My divs// <?php endwhile; endif; ?> <?php wp_reset_postdata(); ?>`

然后是第二个循环，除了帖子类型名称外，其他所有循环都相同——`<?php $args = array( 'post_type' => 'videos', 's' => $s ); ?> <?php if(have_posts()) : ?> <?php while(have_posts()) : the_post() ?> //My divs <?php endwhile; endif; ?> <?php wp_reset_postdata(); ?>`

如何修复它，以便每个循环仅显示该帖子类型的搜索结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:16:47.567

尝试使用`get_posts`第二个循环。

```
$args = array(
  'post_type'=> 'videos',
  'numberposts' => -1,
  's' => $s
);
$videos = get_posts( $args );
foreach( $videos as $post ) : setup_postdata($post);
    // My divs
endforeach; 
```

[http://codex.wordpress.org/Template_Tags/get_posts](http://codex.wordpress.org/Template_Tags/get_posts)

编辑：在参数中添加了“numberposts”。

# c++ - ““void (exeCallback::*)(int)”类型的值不能分配给“void (*)(int)”类型的实体”

> ID：13487596
> 
> 赞同：1
> 
> 时间：2012-11-21T06:29:17.203
> 
> 标签：c++, function-pointers

> **可能重复：**
> [禁用“bad function cast”警告](https://stackoverflow.com/questions/6676764/disabling-bad-function-cast-warning)

我正试图将我的大脑包裹在 C++ 函数指针周围。为了保持我的学习经验基本，我创建了一个测试函数指针示例。最后，我想通过引用传递所有准备好的实例化对象，这样我就可以回调对象的方法；但是，为了学习和理解，我想坚持 c++ 函数指针的基础知识。我只使用 .cpp 文件创建了一个工作示例，但我没有成功的部分是在 .cpp 和 .h 中使用函数指针。使用 .cpp 和 .h 文件时，我做错了什么以使我的学习示例成功运行？

我创建了两个文件，exeCallback.h 和 exeCallback.cpp。

.h 文件

```
/*
File: exeCallback.h

Header file for exeCommand Library.
*/

#ifndef EXECALLBACK_H
#define EXECALLBACK_H

#include "mbed.h"

#include <map>

class exeCallback
{
public:
    exeCallback();

    void my_int_func(int x);

    void (*foo)(int);
private:
};

#endif 
```

.cpp 文件：

```
/*
File: exeCallback.cpp

Execute functions in other Sensor libraries/classes

Constructor
*/

#include "mbed.h"
#include "ConfigFile.h"
#include "msExtensions.h"
#include "cfExtensions.h"
#include "exeCallback.h"

exeCallback::exeCallback()
{

    foo = &exeCallback::my_int_func;

    /* call my_int_func (note that you do not need to write (*foo)(2) ) */
    foo( 2 );

}

void exeCallback::my_int_func(int x)
{
    printf( "%d\n", x );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T06:36:02.727

该错误告诉您您正在尝试将指向成员函数的指针分配给指向（非成员）函数的指针。有关差异的更多信息，请参见[此处]（错误告诉您正在尝试将指向成员函数的指针分配给指向（非成员）函数的指针。）。看起来您需要声明`foo`为

```
void (exeCallback::*foo)(int); 
```

或者通过使用[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function)（或者`boost::function`如果您没有 C++11 支持）让您的生活更轻松。

# c# - 通过从 datagridcombox 中选择值来更新 datagridview 列无法正常工作

> ID：13487605
> 
> 赞同：0
> 
> 时间：2012-11-21T06:30:14.423
> 
> 标签：c#, database, datagridview

我`DataGridView`在那个组合框中，在选择组合框值后从一个表中加载组合框值我想用相应的数据更新其他列，但这仅适用于我想更新所有行的一行..请对代码更改提出任何建议。

```
private void dataGridView2_CellValueChanged(object sender, DataGridViewCellEventArgs e)  
{
    if (dataGridView2.IsCurrentCellDirty)
    {
        for (int i = 0; i < (dataGridView2.Rows.Count)-1; i++)
        {

            try
            {
                if (dataGridView2.Rows[i].Cells[1].Value.ToString() != "")
                {
                    ConnectionDB gridRdata = new ConnectionDB("SELECT * FROM Ready_Made_Master WHERE RM_Name='" + dataGridView2.Rows[i].Cells[1].Value.ToString() + "';");
                                DataTable redydata = gridRdata.returntable();
                                dataGridView2.Rows[i].Cells[2].Value = redydata.Rows[i][2].ToString();
                }
            }
            catch
            {

            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:45:53.660

在for循环之后，尝试重新绑定gridview，即

```
for (int i = 0; i < (dataGridView2.Rows.Count)-1; i++)
{

}
ConnectionDB gridRdata = new ConnectionDB("SELECT * FROM Ready_Made_Master");
DataTable redydata = gridRdata.returntable();
gridRdata .Datasource=redydata ;
gridRdata .Databind(); 
```

请在 Select 语句中进行必要的更改。

# c - GTK+ - 刷新滚动窗口

> ID：13487606
> 
> 赞同：2
> 
> 时间：2012-11-21T06:30:16.730
> 
> 标签：c, gtk, refresh, scrolledwindow

我在主窗口中有一个滚动窗口。我想当我单击按钮刷新时，滚动窗口的内容将自动刷新。这是对按钮的回调

```
vbox = gtk_vbox_new(TRUE, 5);
gtk_scrolled_window_add_with_viewport (GTK_SCROLLED_WINDOW (scrolled_window), vbox);
gtk_signal_connect(GTK_OBJECT(button_refresh), "clicked", GTK_SIGNAL_FUNC(button_re), NULL); 
```

有回调函数：

```
 void button_re(GtkWidget *window, gpointer data){
connectserver(myFile, numof);//connect to server and get information
if(numof > 0){
    for(int i = 0; i< numof; i++){
        hbox = gtk_hbox_new(TRUE, 0);
        gtk_box_pack_start(GTK_BOX(vbox), hbox, FALSE, FALSE, 2);
        sprintf(buffer, "%s", myFile[i].name);
        label = gtk_label_new(buffer);
        button_down = gtk_button_new_with_label("Download");
        gtk_signal_connect(GTK_OBJECT(button_down), "clicked", GTK_SIGNAL_FUNC(button_download), (gpointer ) i);
        gtk_box_pack_start(GTK_BOX(hbox), label, TRUE, FALSE, 0);
        gtk_box_pack_start(GTK_BOX(hbox), button_down, TRUE, FALSE, 0);
    }
}else if(numof == 0){
    label = gtk_label_new("Have nothing on server");
    gtk_box_pack_start(GTK_BOX(vbox), label, TRUE, FALSE, 2);
} 
```

但是当我点击按钮时，没有任何事情发生。我该怎么办？我很抱歉，因为我的英语不好。谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T06:47:37.693

在`button_re`您创建新标签、按钮等时。这些不会出现，直到您`gtk_widget_show`以某种方式调用它们。在你的程序初始化的某个地方——`main()`也许——可能你调用`gtk_widget_show_all`了你的主窗口，它递归地“显示”了它里面的所有东西。但是这些新对象在您明确要求它们显示之前不会显示。

# asp.net-mvc - 网页设计——页数和用户体验

> ID：13487608
> 
> 赞同：1
> 
> 时间：2012-11-21T06:30:27.483
> 
> 标签：asp.net-mvc, user-experience, ui-design

我刚刚开始一个项目，线框已经准备好。但是看看线框图，主要目标似乎是减少页面数量并将最大功能包含在单个页面中。

以组织为例，页面顶部将显示组织详细信息，在左侧下方我们有一个作为树视图的部门结构，单击一个部门将填充右侧的员工列表作为表格，当您单击员工时，它将填充下面的员工详细信息。

当前的线框看起来像这样：

![示例线框](../Images/02476b765ef46dd00672a1a6c6b75ba2.png)

最终用户很高兴，因为他们可以在单个页面上看到整个功能，而无需导航到另一个页面。

但是这个设计让我想起了一些旧桌面应用程序的屏幕，我觉得这个页面不必要地复杂——我想把它分成多个页面（至少分成三个）。此外，我正在使用 MVC 4 并将其拆分为多个页面肯定会帮助我降低实现过程中的复杂性。

但在得出任何结论并提出任何担忧之前，我想知道你们的想法。也欢迎一些与用户体验相关的文章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:05:43.257

这就是我的想法。

上述设计是否“正确”取决于目标受众以及他们需要执行的工作/业务流程类型。能够在一页上查看所有信息（组织详细信息、部门、员工和员工详细信息）可能有很强的业务论据。在具有大量交互性的页面中显示大量信息并不罕见 - 由于 Gmail 等消费类网站，用户的期望有所提高。如果它被分成不同的页面，用户可能会感到沮丧。

换句话说，我不认为有一个有效的*技术*理由让设计师改变上面的 UI 以将其拆分为不同的页面。

您将能够在 MVC 中将上面的 UI 构建为单页 Web 应用程序。您可能需要实现很多控制器操作来支持 ajax 调用。您几乎可以肯定最终会使用大量 JQuery，并且您可能还会最终编写大量 JavaScript。此外，您还需要确保设计者围绕页面大小做出了正确的决定。例如，它是固定宽度还是动态的？您需要发出结构良好的 HTML，以便仅使用 CSS 来实现（我强烈建议您这样做）。

# linux - 写入关闭的 TCP/IP 连接挂起

> ID：13487609
> 
> 赞同：3
> 
> 时间：2012-11-21T06:30:29.983
> 
> 标签：linux, sockets, tcp

我的 TCP/IP 客户端在写入套接字时挂起。即使服务器通过`close()`（或`shutdown()`）调用正确关闭了已接受的连接，也会发生这种情况。对于这种情况，我一直认为 write 应该返回 ECONNRESET 错误。

如何防止同步输出挂断？或者更确切地说，我做错了什么以致不报告错误`write()`？

我应该使用`send()`代替`write()`还是它们可以互换？

我正在使用两个线程在单独的应用程序中测试网络。主线程启动服务器线程，接受连接并立即关闭它。然后主线程通过连接到侦听端口来模仿客户端行为。

主线程代码：

```
sockaddr_in serv_addr;
bzero((char *) &serv_addr, sizeof(serv_addr));
serv_addr.sin_family = AF_INET;
serv_addr.sin_addr.s_addr = INADDR_ANY;
serv_addr.sin_port = htons(port);
int s = socket(AF_INET, SOCK_STREAM, 0);
if (bind(s, (sockaddr*)(&serv_addr),  sizeof(serv_addr)) < 0) {
    close(s);
    throw runtime_error(strerror(errno));
}
listen(s,1);
start_thread(s); // posix thread accepting a connection on s is started here
//Code below imitates  TCP/IP client
struct hostent *hp;
struct sockaddr_in addr;
if((hp = gethostbyname(host.c_str())) == NULL){
    throw HErrno();
}
bcopy(hp->h_addr, &addr.sin_addr, hp->h_length);
addr.sin_port = htons(port);
addr.sin_family = AF_INET;
int _socket = ::socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);
if (_socket < 0) {
    throw Errno();
}
assert(ENOTCONN==107);
assert(_socket>=0);
if(::connect(_socket, (const struct sockaddr *)&addr, sizeof(struct sockaddr_in)) == -1){
    throw Errno();
}

while(true) {
  const char a[] = "pattern";
  if (write( _socket, a, 7)<0) // Writes 30000 times, then hangs
     break;
} 
```

服务器线程代码：

```
int connection = accept(s);
close(connection); 
```

**编辑：** 问题减少到我的编程错误。看来我未能正确开始接受线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:49:35.560

每个 TCP 连接都有一个接收缓冲区，用于存储已接收但未传递给应用程序的数据。如果在您的服务器中您不执行 read()，则数据会累积在接收缓冲区中，并且在某一时刻此接收缓冲区已满，导致 TCP 发送 Window=0 消息。

您的服务器线程代码应如下所示：

```
char a[10];
int connection = accept(s);
while(true)
    if (read( connection , a, 7)<=0)
        break;
close(connection); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:20:27.343

您是否设置了处理程序`SIGPIPE`而不是将其设置为`SIG_IGN`？

# django - 不想每次都清除浏览器缓存以进行 css/js 更新

> ID：13487612
> 
> 赞同：5
> 
> 时间：2012-11-21T06:30:39.600
> 
> 标签：django, browser-cache

我有包含 css 和 js 文件的 python-django 站点。每次更新/添加 css 或 js 都必须清除浏览器的缓存，然后才反映在浏览器中。

是否有任何特定的方法可以避免每次缓存清除和检查？

django 中是否有任何特定设置可以避免存储浏览器缓存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-24T14:39:57.947

您可以像这样将一些内容附加到更新的 js/css 文件中。例如版本控制“?v=1.0”。

```
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}_css/style.css?v=1.6"> 
```

这样一来，浏览器每次检测到变化时，都会自动获取新文件。简单干净。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T08:32:00.423

使用这个小中间件

```
from django.utils.cache import add_never_cache_headers

class NoCachingMiddleware(object):
    def process_response(self, request, response):
        add_never_cache_headers(response)
        return response 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T15:38:34.777

如果您使用浏览器。

是的。您可以使用热键：Ctrl + F5（而不是 F5）。当您更新页面时，它将自动清除缓存。

# jquery - 等到图像加载后再显示

> ID：13487615
> 
> 赞同：1
> 
> 时间：2012-11-21T06:31:02.803
> 
> 标签：jquery, lazy-loading

我在一个页面上有一堆图像，出于本网站的目的，客户希望图像不要以正常方式加载，它们会慢慢出现，逐行渲染。

相反，我们要做的是等到图像加载完毕，在图像加载时，在它的位置显示一点加载 gif。加载每个图像时，它都会淡入。

到目前为止，我为此所做的是：

```
$('img').each(function(){

    $(this).load(function(){

        $(this).fadeIn();

    });    

}); 
```

按预期工作。但我想把它提升到一个新的水平。

假设此页面上有 20 张图片，但一次在页面上只能看到 1 或 2 张图片。然后，我希望其他 18 个不要被加载，除非浏览器向下滚动以使这些明显。

我知道有一些插件可以做到这一点——比如lazyload——但我对这些插件没有很好的效果。

如何使用 jquery 或 javascript 检查图像是否在当前视口中？

1.  我的 each() 函数最初只会遍历可见图像
2.  当图像进入视野时，它们会加载，然后淡入淡出。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:23:13.253

你可以试试像**[InView](https://github.com/protonet/jquery.inview)**这样的插件。

但是，您可能必须将事件附加到`img`的容器，并且只有在容器“可见”时才加载图像。

**编辑**

[这是一个](https://github.com/protonet/jquery.inview#live-events)如何使用插件“延迟加载”图像的示例。

```
// Assuming that all images have set the 'data-src' attribute
// instead of the 'src' attribute
$("img[data-src]").live("inview", function() {

    // Load the image
    $(this).attr("src", $(this).attr("data-src"));

    // Remove it from the set of matching elements in order to avoid
    // the handler from re-executing
    $(this).removeAttr("data-src");

}); 
```

注意：`live()`被替换为`on()`and `delegate()`，您可能应该使用其中之一。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-21T07:09:48.240

做这样的事情

```
<div id='loder'><img src="loder.gif"></div>

<div id='images' style="display:none;">
<img src='image1.jpg'>
<img src='image2.jpg'>
<img src='image3.jpg'>
<img src='image4.jpg'>
<img src='image5.jpg'>
</div> 
```

然后在文档准备好隐藏加载器 div 并显示图像 div。

```
$(function(){
$("#loder").hide();
$("#images").show();
}); 
```

# php - 如何使用php将更多行插入mysql数据库

> ID：13487616
> 
> 赞同：-2
> 
> 时间：2012-11-21T06:31:04.603
> 
> 标签：php, mysql

请看：(oid, iid, name, type) VALUES (5, X3, john, boxer) 我想插入 oid。它来自不同的表 $oid=mysql_fetch_array['oid']; 其中 iid 名称和类型相同。我可以只在一个语句中插入它们吗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T06:35:53.617

一个 INSERT 查询可能有许多组值：

```
INSERT INTO table (oid, iid, name, type) VALUES (5, 'X3', 'john', 'boxer'), (8, 'X3', 'john', 'boxer'), (10, 'X3', 'john', 'boxer')... 
```

[http://dev.mysql.com/doc/refman/5.5/en/insert.html](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

您需要为要插入的所有列指定所有值，即使它们在多行中相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T06:37:54.260

```
$query = "INSERT INTO your_table
            (oid, iid, name, type)
          VALUES
            (5, 'X3', 'john', 'boxer'),
            (8, 'X3', 'john', 'boxer'),
            (10, 'X3', 'john', 'boxer'),
            (11, 'X3', 'john', 'boxer'),
            (60, 'X3', 'john', 'boxer'),
            (220, 'X3', 'john', 'boxer'),
            (311, 'X3', 'john', 'boxer'),
            (336, 'X3', 'john', 'boxer'),
            (339, 'X3', 'john', 'boxer'),
            (800, 'X3', 'john', 'boxer');";
$result = mysql_query($query); 
```

# spring-webflow-2 - Spring webflow：如何配置多个流执行器

> ID：13487619
> 
> 赞同：0
> 
> 时间：2012-11-21T06:31:19.103
> 
> 标签：spring-webflow-2

我正在尝试为我的项目配置多个流执行器，因为我需要一组“always-redirect-on-pause”属性为 false 且另一个为 true 的流。我曾尝试搜索、浏览 Spring Docs 但无法提出此配置。任何人都可以分享这些配置和/或直接访问一些相关资源吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-24T11:02:38.440

您可以在项目 Spring 配置文件中有多个工作流（流程定义文件）位置注册

**弹簧配置**

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:webflow="http://www.springframework.org/schema/webflow-config"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
    http://www.springframework.org/schema/webflow-config
    http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.0.xsd">

    <bean id="assetManagementService" />

    <bean id="savingsAssetService" />

    <bean id="handlerMapping">
        <property name="mappings">
            <value>/assetMgmtHomeView.htm=flowController</value>
        </property>
    </bean>

    <bean id="flowController">
        <property name="flowExecutor" ref="flowExecutor" />
    </bean>

    <webflow:flow-executor id="flowExecutor" flow-registry="flowRegistry">
    </webflow:flow-executor>

    <webflow:flow-registry id="flowRegistry">
        <webflow:flow-location id="assetMgmtHomeView" path="/WEB-INF/flows/assetMgmtFlow.xml" />
        <webflow:flow-location id="savingsAssetViewFlow" path="/WEB-INF/flows/savingsAssetViewFlow.xml" />
    </webflow:flow-registry>

</beans> 
```

如您所见，`webflow:flow-registry`包含两个工作流 xml 文件路径。请记住，这些位置注册具有用于区分工作流的不同**ID 。**

# amazon-s3 - 如何共享 Amazon AWS 凭证（S3、EC2 等）？

> ID：13487622
> 
> 赞同：2
> 
> 时间：2012-11-21T06:31:56.097
> 
> 标签：amazon-s3, amazon-ec2, amazon-web-services, credentials

我有一个个人亚马逊账户，我用它来做很多购物。我最近也将此帐户链接到 AWS。现在在工作中，有些人正在使用我的帐户对亚马逊进行实验。我怎样才能让他们访问管理控制台等而不给他们我的亚马逊凭据。我不愿意分享我的亚马逊购物历史或我在亚马逊上使用的其他东西，只分享 EC2 和 S3 等云服务。

他们需要的是访问完整的管理控制台以及 AWS 上的任何监控工具。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T09:40:03.723

使用[AWS 身份和访问管理 (IAM)](http://aws.amazon.com/iam/)。

> AWS Identity and Access Management (IAM) 使您能够安全地控制用户对 AWS 服务和资源的访问。使用 IAM，您可以创建和管理 AWS 用户和组，并使用权限来允许和拒绝他们对 AWS 资源的权限

# r - 在 R 中使用 ggplot2 覆盖两个图

> ID：13487625
> 
> 赞同：26
> 
> 时间：2012-11-21T06:32:13.957
> 
> 标签：r, graph, ggplot2

我有两个图表，我试图将一个覆盖在另一个之上：

数据框“ge”的示例如下所示。实际上有 10 个基因，每个基因有 200 个样本，所以有 2000 行和 3 列：

```
Exp    Gene    Sample
903.0   1       1
1060.0  1       2
786.0   1       3
736.0   1       4
649.0   2       1
657.0   2       2
733.5   2       3
774.0   2       4 
```

数据框“avg”的示例如下所示。这是所有样本中每个基因的数据点的平均值。实际上这个图有 10 个基因，所以矩阵是 4col X 10 行：

```
mean       Gene   sd         se
684.2034    1   102.7142    7.191435
723.2892    2   100.6102    7.044122 
```

第一张图绘制了每个基因的平均表达线以及每个数据点的标准偏差。

```
avggraph <- ggplot(avg, aes(x=Gene, y=mean)) + geom_point() +geom_line() + geom_errorbar(aes(ymin=mean-sd, ymax=mean+sd), width=.1) 
```

第二张图以线的形式绘制了所有基因中每个样本的基因表达。

```
linegraphs <- ggplot(ge, aes(x=Gene, y=Expression, group=Samples, colour="#000099")) + geom_line() + scale_x_discrete(limits=flevels.tge) 
```

我想将 avggraph 叠加**在****linegraphs**之上。有没有办法做到这一点？我已经尝试过 avggraph + linegraphs 但我遇到了一个错误。我认为这是因为这些图表是由两个不同的数据框生成的。

 **我还应该指出，两个图表的轴是相同的。两张图的 X 轴为基因，Y 轴为基因表达。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-21T07:07:59.007

一种方法是将`geom_line`第二个图的命令添加到第一个图。你需要告诉`ggplot`这个geom是基于不同的数据集：

```
ggplot(avg, aes(x=Gene, y=mean)) + 
  geom_point() + 
  geom_line() + 
  geom_errorbar(aes(ymin=mean-sd, ymax=mean+sd), width=.1) +
  geom_line(data = ge, aes(x=Gene, y=Exp, group=Sample, colour="#000099"),
            show_guide = FALSE) 
```

最后一个`geom_line`命令用于根据原始数据创建行。 ![在此处输入图像描述](../Images/4828c40b9d4cfba674c4ec4535afee69.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-02T18:45:56.063

我发现的解决方法是，我没有合并两个图，而是合并了数据。我在两个数据框的末尾添加了一个附加列，然后对它们执行了`rbind`操作。使用`fill`or`color`美学来分隔两个图。当然，在我的情况下，用于轴的比例是相同的。**

# ios - 如何在 UITextView 中实现滚动功能？

> ID：13487627
> 
> 赞同：0
> 
> 时间：2012-11-21T06:32:15.877
> 
> 标签：ios, uiscrollview, keyboard, scroll, uitextview

我正在使用 UITextView，如果文本在键盘下方展开，则它根本无法滚动，如下图所示。因此，如果文本与键盘对齐或在键盘下方，我需要某种滚动来向下滚动视图。我一直在寻找类似的示例/教程，但没有找到任何适合我的项目的好示例。

我将在我的 .h 文件中发布我如何在下面实现我的 UITextView* commentField。从这里我该怎么办？如果您可以具体使用示例代码，我们将不胜感激！/问候

[http://tinypic.com/view.php?pic=kck6t&s=6](http://tinypic.com/view.php?pic=kck6t&s=6)

ReportViewController.h 文件：

```
@interface ReportViewController : MLUIViewController <MLReportErrorDelegate, UITextFieldDelegate, UIGestureRecognizerDelegate>
{

IBOutlet UITextView *commentField;
IBOutlet UITextField *emailField;

}

@property (nonatomic, retain) UITextView *commentField; 
```

ReportViewController.m 文件：

```
- (void) textViewShouldBeginEditing:(UITextView *)commentField
{
???????????????????????
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:42:19.473

试试这个[iPhone 键盘隐藏文本字段](http://www.roseindia.net/tutorial/iphone/tutorial/iphone/iPhone-Keyboard-Hides-TextField.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:47:17.897

您需要在输入时将 textView 设置为完全可见。我认为当文本位于键盘下方时，您无法动态滚动。

您可以使用以下代码来完成。

```
//—-resize the scroll view (with keyboard)—-
CGRect viewFrame = [scrollView frame];
viewFrame.size.height -= keyboardRect.size.height;
scrollView.frame = viewFrame;

//—-scroll to the current text field—-
CGRect textFieldRect = [yourTextView frame];
[scrollView scrollRectToVisible:textFieldRect animated:YES]; 
```

# javascript - 使用 JavaScript 加密本地存储的数据

> ID：13487631
> 
> 赞同：5
> 
> 时间：2012-11-21T06:32:26.803
> 
> 标签：javascript, security

在学习 JavaScript 和 HTML5 的同时，我正在尝试构建一个基本的测验应用程序，该应用程序会询问一些适用于移动网络的多项选择题，也可以作为使用 PhoneGap 的应用程序。当提出问题时，结果会存储在本地。

**我希望 PhoneGap 版本允许离线模式，因此****必须**能够将数据存储在本地。我知道有一个通过 PhoneGap 提供的本地数据库 - 所以我想一个选择是为移动 Web 和本地数据库做客户端/服务器和 PhoneGap。但是，我现在宁愿避免走这条路，因为这意味着我必须管理移动网络和 PhoneGap 版本之间的更多变化。

显然不需要互联网银行级别的安全性，但我需要将结果存储在本地，这些结果不容易读取，但最重要的是可以操作。

我最初尝试使用**HTML5 localstorage**，但我很快意识到，至少我这样做的方式，我可以明显地看到我存储的所有结果，并且通过使用 Chrome 开发人员工具，可以轻松地单击更改值。

当我走上使用加密的道路时（[我正在阅读这篇 StackOverflow 帖子感兴趣](https://stackoverflow.com/questions/7123511/what-are-the-valid-use-cases-for-client-side-encryption)），似乎对于这样的事情，我总是必须在代码中的某处定义一个“密钥”以加密数据然后使用相同的密钥来解密它。

由于所有数据都存储在客户端，这意味着我所要做的就是找到这个密钥并针对存储的数据运行它以操纵结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-08T03:55:09.900

[CryptoJS AES。感谢李](https://stackoverflow.com/a/16615194/452708)

```
var text = "#rawString#";
var key = CryptoJS.enc.Base64.parse("#base64Key#");
var iv  = CryptoJS.enc.Base64.parse("#base64IV#");

console.log("Initial String:: "+text);

var encrypted = CryptoJS.AES.encrypt(text, key, {iv: iv});
console.log("Encrypted String:: "+encrypted.toString());

var decrypted = CryptoJS.AES.decrypt(encrypted, key, {iv: iv});
console.log("Decrypted String:: "+decrypted.toString(CryptoJS.enc.Utf8)); 
```

[Plnkr 演示链接](https://plnkr.co/edit/IF3afz)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-21T06:48:10.720

base64编码会起作用吗？它内置在浏览器中，看起来是加密的。人们一直在为 cookie 这样做。

资源（Mozilla 特定）：

*   [BTOA](https://developer.mozilla.org/en-US/docs/DOM/window.btoa)
*   [阿托布](https://developer.mozilla.org/en-US/docs/DOM/window.atob)

有关非 Mozilla 浏览器的更多信息和链接，请参阅此问题：[JSON encode/decode base64 encode/decode in JavaScript](https://stackoverflow.com/questions/4665049/json-encode-decode-base64-encode-decode-in-javascript)

# matlab - 如何为我的骰子函数创建直方图？

> ID：13487632
> 
> 赞同：0
> 
> 时间：2012-11-21T06:32:33.947
> 
> 标签：matlab, histogram, dice

我创建了一个骰子函数，但我不知道如何为它创建一个直方图。直方图中的每个 bin 应该代表骰子总和的一个可能值。例如，对于 NumDice = 1，bin 的范围应为 1 到 6。对于 NumDice = 2，bin 的范围应为 2 到 12。谢谢！

```
function SumDice=RollDice(NumDice,NumRolls)
NumDice=1
NumRolls=500
distribution=zeros(NumDice*6,1);
for roll=1:NumRolls
  diceValues = randi(6,[NumDice 1]);
  totaldiceValue = sum(diceValues);
        distribution(totaldiceValue) = distribution(totaldiceValue) +1;
end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:43:45.657

当您已经拥有每个条形的值时，您可以使用该[`bar`](http://www.mathworks.com/help/matlab/ref/bar.html)函数绘制条形图。

```
valueMin = NumDice;
valueMax = 6 * NumDice;

bar(valueMin:valueMax, distribution(valueMin:valueMax), "hist") 
```

# perl - Perl windows telnet 会话结束

> ID：13487633
> 
> 赞同：2
> 
> 时间：2012-11-21T06:32:46.470
> 
> 标签：perl, telnet

我已经编写了 Perl 脚本来自动化我的工作，使用 telnet 连接到 Windows 并启动服务器。

```
#!/usr/bin/perl -w

use Net::Telnet;

$telnet = new Net::Telnet ( Timeout=>30, Errmode=>'die');
$telnet->open('ip');
$telnet->waitfor('/login: $/i');
$telnet->print('admin');
$telnet->waitfor('/password: $/i');
$telnet->print('password');
$telnet->waitfor('/\C:\\\\Documents and Settings\\\\Administrator/');
$telnet->print('start server');
$telnet->close(); 
```

当程序结束时，服务器再次返回到未运行状态。在 Unix 中，这很好用。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-21T07:20:36.047

如果您使用 Microsoft Telnet 服务器，请注意编码和控制字符存在问题。

来自[Net::Telnet 的文档](http://search.cpan.org/~jrogers/Net-Telnet-3.03/lib/Net/Telnet.pm#Connecting_to_a_Remote_MS-Windows_Machine)

> 连接到远程 MS-Windows 机器
> 
> 默认情况下，MS-Windows 不附带 TELNET 服务器。但是第三方 TELNET 服务器是可用的。不幸的是，许多这些服务器错误地声称是 TELNET 服务器。对于随一些较新版本的 MS-Windows 一起安装的所谓“Microsoft Telnet 服务器”尤其如此。
> 
> 当 TELNET 服务器第一次接受连接时，它必须使用 ASCII 控制字符回车和换行来开始新的一行（参见 RFC854）。像“Microsoft Telnet Server”这样不执行此操作的服务器不是 TELNET 服务器。这些服务器发送 ANSI 终端转义序列以定位到后续行的列，甚至在写入彼此相邻的字符时定位。更糟糕的是，在发送输出时，这些服务器会重新发送先前发送的命令输出，以错误地尝试显示整个终端屏幕。
> 
> 将 Net::Telnet 连接到这些虚假 TELNET 服务器之一会使解析命令输出的工作变得非常困难。最好用真实的 TELNET 服务器替换一个虚假的 TELNET 服务器。用于 MS-Windows 的更好的 TELNET 服务器允许您通过关闭其中一些称为控制台模式的东西来避免 ANSI 转义。

# extjs - 如何将一些数据加载到 Ext.data.Store

> ID：13487641
> 
> 赞同：0
> 
> 时间：2012-11-21T06:33:31.743
> 
> 标签：extjs

这是我的代码

```
 var store = {
            roles_store: new Ext.data.Store({
                        autoLoad: false,
                        proxy: new Ext.data.HttpProxy({
                                                        url: 'a/b/c',
                                                      }),
                        remoteSort: true, 
                        baseParams: {

                                    },
                        reader: new Ext.data.JsonReader({
                                                totalProperty: 'total',
                                                root: 'root',
                                                fields:['roles']                
                                                        }),

            })
        }; 
```

这是我的 json

{"total":3,"root":[{"roles":"A"},{"roles":"B"},{"roles":"C"}]}

如果我想将数据添加到 Ext.data.Store。我能怎么做？

（PS：对不起，我的英文不好。而我的extjs是：http://docs.sencha.com/ext-js/3-4/#!/api/Ext.data.Store-method-addSorted）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:51:13.837

这应该有效：

```
Ext.define('roles', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'roles', type: 'string'}
    ]
});

var myStore = Ext.create('Ext.data.Store', {
    model: 'roles',
    proxy: {
        type: 'ajax',
        url : 'path/to/data/test.json',
        reader: {
            type: 'json',
            root: 'root',
            totalProperty: 'total'
        }
    },
    autoLoad: true
}); 
```

在此处查看示例：http: //docs.sencha.com/ext-js/4-0/#! [/api/Ext.data.Store](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Store)

对于 v3.4：

```
var store = new Ext.data.JsonStore({

    autoDestroy: true,
    url: 'path/to/data/test.json',
    storeId: 'myStore',
    autoLoad: true,
    idProperty: 'roles',
    root: 'root',
    fields: ['roles'] 
}); 
```

您需要使用 jsonstore： [http ://docs.sencha.com/ext-js/3-4/#!/api/Ext.data.JsonStore](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.data.JsonStore)

# c# - 在 C# winform 中将对象从列表框移动到另一个列表框

> ID：13487644
> 
> 赞同：0
> 
> 时间：2012-11-21T06:33:43.837
> 
> 标签：c#, winforms, listbox, listboxitem

我如何将对象（包括名称和 ID）从列表框移动到另一个列表框并保存？我写了这个：

```
 if (lstActivity.SelectedIndex != -1)
            {

                int intSelectedIndex = lstActivity.SelectedIndex;
                if (intSelectedIndex >= 0)
                {

 listbox.Items.Add(((Parking_Services.Activity)lstActivity.SelectedItem).ActivityName);

                    lstActivity.Items.RemoveAt(intSelectedIndex);
                }
            } 
```

它可以工作，但是当我想保存它时（单击按钮后），它会出现异常：“无法将 syste.string 转换为（Parking_Services.Activity）。”

```
 private void btnSave_Click(object sender, EventArgs e)
        {
            int intActivityID;
            Parking_Services.Service1 ii = new Parking_Services.Service1();
            for (int i = 0; i <= listbox.Items.Count; i++)                                            //save item from listbox is wrong
            {
                intActivityID = ((Parking_Services.Activity)listbox.Items[i]).ActivityID;
                string strMessage = ii.AllowUserActivityByType(intUserTypeID, intActivityID, FrmLogin.intUserId);

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:20:15.567

这是因为您没有将类型的对象添加`Parking_Services.Activity`到列表框中，而是在以下行`ActivityName`中添加了选定对象：`Parking_Services.Activity`

```
listbox.Items.Add(((Parking_Services.Activity)lstActivity.SelectedItem).ActivityName); 
```

我希望这是一个字符串。相反，你可以试试这个：

```
listbox.Items.Add(lstActivity.SelectedItem); 
```

鉴于 in 中的项目`lstActivity`是 type `Parking_Services.Activity`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:24:13.963

线...

```
intActivityID = ((Parking_Services.Activity)listbox.Items[i]).ActivityID; 
```

...失败，因为其中的项目`listbox`是`String`s 而不是`Parking_Services.Activity`s。它们是`String`s，因为您在该行中添加`String`了 s...

```
listbox.Items.Add(((Parking_Services.Activity)lstActivity.SelectedItem).ActivityName); 
```

我想该`ActivityName`属性是一个`String`. 因此，这两行中的任何一行都存在设计错误。

* * *

我建议进行以下修复：将整个`Parking_Services.Activity`对象添加到`listbox`...

```
listbox.Items.Add((Parking_Services.Activity)lstActivity.SelectedItem); 
```

...并`ToString()`在`Parking_Services.Activity`类中覆盖，以便`listbox`正确显示它们：

```
public class Activity
{
    ...

    public override string ToString()
    {
        return ActivityName;
    }
} 
```

在绘制列表条目时， A`ListBox`总是调用传递给它`ToString()`的s。`object`因此，通过覆盖`ToString()`，您可以控制`Parking_Services.Activity`s 的显示方式。

# jquery - 了解 Jquery 模板

> ID：13487647
> 
> 赞同：7
> 
> 时间：2012-11-21T06:34:12.640
> 
> 标签：jquery, jquery-plugins, jquery-templates

我正在阅读并试图理解一个 Jquery 模板示例。

```
<script id="movieTemplate" type="text/x-jquery-tmpl"> 
  {{tmpl "titleTemplate"}}
  <tr class="detail"><td>Director: ${Director}</td></tr>

</script>

<table><tbody id="movieList"></tbody></table>

<script>
var movies = [
  { Name: "The Red Violin", Director: "François Girard" ,Producer : "ssss" },
  { Name: "Eyes Wide Shut", Director: "Stanley Kubrick" },
  { Name: "The Inheritance", Director: "Mauro Bolognini" }
];

/* Convert the markup string into a named template,
   referenced by the {{tmpl}} tag */
$.template( "titleTemplate", "<tr class='title'><td>${Name}</td></tr>" );

/* Render the movies data, using the named template as a nested template */
$( "#movieTemplate" ).tmpl( movies ).appendTo( "#movieList" );
</script> 
```

在这个示例程序中，我无法理解：

/* 将标记字符串转换为命名模板，由 {{tmpl}} 标签引用 */

当我们调用时： $( "#movieTemplate" ).tmpl( movies ) 它正在调用模板，我们正在调用带有输入电影的模板函数并将其附加到 movieslistid

如果我删除代码

```
$.template( "titleTemplate", "<tr class='title'><td>${Name}</td></tr>" ); 
```

这没用。你能解释一下为什么我们需要这个以及它在这里做了什么吗？

我试图在线阅读，发现我没有得到澄清

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T06:54:24.903

这包含对名为`"titleTemplate"`的模板的引用，该模板尚未定义：

```
<script id="movieTemplate" type="text/x-jquery-tmpl"> 
  {{tmpl "titleTemplate"}}
  <tr class="detail"><td>Director: ${Director}</td></tr>
</script> 
```

这一行定义了缺失的模板：

```
$.template( "titleTemplate", "<tr class='title'><td>${Name}</td></tr>" ); 
```

这是另一种说法

```
<script id="titleTemplate" type="text/x-jquery-tmpl"> 
  <tr class='title'><td>${Name}</td></tr>
</script> 
```

本质上，该示例表明您可以通过两种方式定义模板

*   在 HTML 源代码中以声明方式作为`<script type="text/x-jquery-tmpl">`元素
*   以编程方式从字符串到`$.template()`

# .htaccess - htaccess 重定向不带后缀

> ID：13487649
> 
> 赞同：1
> 
> 时间：2012-11-21T06:34:16.807
> 
> 标签：.htaccess

我与后缀“suc-khoe-doi-song”有很多链接，但它们不起作用。如

[http://www.khoemoingay.vn/cong-dong/say-thai-nhieu-tang-nguy-co-dau-tim-suc-khoe-doi-song](http://www.khoemoingay.vn/cong-dong/say-thai-nhieu-tang-nguy-co-dau-tim-suc-khoe-doi-song)

我如何将它们重定向到相同的网址但没有后缀“suc-khoe-doi-song”，如下所示

[http://www.khoemoingay.vn/cong-dong/say-thai-nhieu-tang-nguy-co-dau-tim](http://www.khoemoingay.vn/cong-dong/say-thai-nhieu-tang-nguy-co-dau-tim)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:15:25.573

您想使用带有 $ 符号的重写规则，这意味着模式以它之前的任何内容结束。该`(.*)`组将捕获字符串的所需部分并将其转发到`$1`

```
RewriteRule (.*)-suc-khoe-doi-song$ /$1 [R=301,NC] 
```

# c# - 使用 Eval 在 TemplateField 中显示毫秒

> ID：13487652
> 
> 赞同：1
> 
> 时间：2012-11-21T06:34:22.177
> 
> 标签：c#, asp.net, .net, eval

我有一个模板，如下所示。我还需要显示 DateTime 的毫秒部分。

我已经阅读了[http://msdn.microsoft.com/en-us/library/bb882581.aspx](http://msdn.microsoft.com/en-us/library/bb882581.aspx)`dateValue.ToString("fff")`中的格式。 `How to: Display Milliseconds in Date and Time Values`

使用 Eval 在模板字段中显示它的最佳方式是什么？

**代码**

```
 <asp:TemplateField HeaderText="Event Time">

    <ItemTemplate>

       <asp:Literal ID="ltlTime" runat="server" Text='<%# Eval("LastChangeTime") %>' ></asp:Literal>
       <asp:HiddenField ID="hdnMilliSeconds" runat="server" Value='<%# ((DateTime)Eval("LastChangeTime")).ToString("fff") %>' />

    </ItemTemplate>
 </asp:TemplateField> 
```

参考：

1.  [没有毫秒的 Eval/Bind TimeOfDay 属性？](https://stackoverflow.com/questions/3970154/eval-bind-timeofday-property-without-milliseconds)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:01:28.887

试试这个

```
<%# Convert.ToDateTime(Eval("LastChangeTime")).ToString("FFF") %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:59:35.997

采用

```
select convert(varchar, your_date_field, 121) as LastChangeTime 
```

在您的 SQL 查询中。然后在 eval 中访问“LastChangeTime”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:34:04.510

感谢@kj 小睡。我想到了。为了其他人的利益，我将其发布在这里：

我用了以下

```
 '<%# ((DateTime)Eval("LastChangeTime")).ToString("MM/dd/yyyy hh:mm:ss.fff tt") %>' 
```

代码

```
 <asp:TemplateField HeaderText="Application ID">
                        <ItemTemplate>
                            <asp:Literal ID="ltlApplicationID" runat="server" Text='<%# Eval("ApplicationID") %>'></asp:Literal>
                            <asp:HiddenField ID="hdnLastChangeTime" runat="server" Value='<%# ((DateTime)Eval("LastChangeTime")).ToString("MM/dd/yyyy hh:mm:ss.fff tt") %>' />
                        </ItemTemplate>
  </asp:TemplateField> 
```

代码背后

```
 protected void Application_RowCommand(Object sender, CommandEventArgs e)
    {
        if (e != null)
        {
            int rowIndex = Convert.ToInt32(e.CommandArgument, CultureInfo.InvariantCulture);
            string applicationID = (((System.Web.UI.WebControls.Literal)grdApplications.Rows[rowIndex].Cells[1].Controls[1]).Text).Trim();
            string lastChangeTimeString = (((System.Web.UI.WebControls.HiddenField)grdApplications.Rows[rowIndex].Cells[1].Controls[3]).Value).Trim();

            DateTime lastChangeTime = Convert.ToDateTime(lastChangeTimeString);

        }
    } 
```

# sql-server-2008 - SQL查询根据存储在另一张表中的数据从一个表中检索数据？

> ID：13487653
> 
> 赞同：0
> 
> 时间：2012-11-21T06:34:24.370
> 
> 标签：sql-server-2008

有 3 个表：table1、table2 和 table3。

查询是：

```
select column1 from table1 where variable1=@value1 AND variable2=@value2 
```

这里，value1 和 value2 是存储在表 table2 和 table3 中的全部数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T06:38:34.613

这个问题不是很清楚，但最接近的猜测是

```
SELECT column1
FROM table1
JOIN table2 ON table1.variable1 = table2.value1
JOIN table3 ON table1.variable2 = table3.value2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T06:36:45.650

尝试这个

```
select colum1
from table1
where
    variable1 in (select column2 from table2) and
    variable2 in (select column3 from table3) 
```

# java - 如何转换六进制字符串？

> ID：13487654
> 
> 赞同：1
> 
> 时间：2012-11-21T06:34:24.683
> 
> 标签：java, servlets, character-encoding

我想在 java Servlet 中解码一个六进制字符串。

```
String str = "choKKlate+%2F%2F1%3A%D9%81%DB%8C%D9%81%D8%A7%3E2%3A03008498499%2F%2F"; 
```

上述 URL 中的以下字符串包含 URL 编码的 unicode Urdu 字符

```
%D9%81%DB%8C%D9%81%D8%A7 
```

对应于乌尔都语字符串

```
فیفا 
```

我通过 GET 方法发送 str 字符串变量。在 servlet 中我尝试了 URLDecoder

```
URLDecoder.decode(str, "UTF-8"); 
```

但这会返回问号（'????'）而不是乌尔都语字符。

如何解决这个问题呢？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:14:28.787

这里我不明白的是 % 会在 URL 中扮演一些角色，所以我们不应该在 URL 中传递这个 hexa str 。取而代之的是，您可以使用 base64 算法或用户定义的算法来编码和解码字符串

例如，我们创建一个具有代码的 base 64 类

```
package com.encrypt;

import java.util.Arrays;

 public class Base64
 {

public Base64()
{
}

public static final char[] encodeToChar(byte abyte0[], boolean flag)
{
    int i = abyte0 == null ? 0 : abyte0.length;
    if(i == 0)
        return new char[0];
    int j = (i / 3) * 3;
    int k = (i - 1) / 3 + 1 << 2;
    int l = k + (flag ? (k - 1) / 76 << 1 : 0);
    char ac[] = new char[l];
    int i1 = 0;
    int j1 = 0;
    int l1 = 0;
    do
    {
        if(i1 >= j)
            break;
        int i2 = (abyte0[i1++] & 0xff) << 16 | (abyte0[i1++] & 0xff) << 8 |     abyte0[i1++] & 0xff;
        ac[j1++] = CA[i2 >>> 18 & 0x3f];
        ac[j1++] = CA[i2 >>> 12 & 0x3f];
        ac[j1++] = CA[i2 >>> 6 & 0x3f];
        ac[j1++] = CA[i2 & 0x3f];
        if(flag && ++l1 == 19 && j1 < l - 2)
                         {
                          ac[j1++] = '\r';
                  ac[j1++] = '\n';
                  l1 = 0;
                 }
             } while(true);
            i1 = i - j;
            if(i1 > 0)
                 {
                  int k1 = (abyte0[j] & 0xff) << 10 | (i1 != 2 ? 0 : (abyte0[i - 1] & 0xff) << 2);
        ac[l - 4] = CA[k1 >> 12];
        ac[l - 3] = CA[k1 >>> 6 & 0x3f];
        ac[l - 2] = i1 != 2 ? '=' : CA[k1 & 0x3f];
        ac[l - 1] = '=';
    }
    return ac;
}

public static final byte[] decode(char ac[])
{
    int i = ac == null ? 0 : ac.length;
    if(i == 0)
        return new byte[0];
    int j = 0;
    for(int k = 0; k < i; k++)
        if(IA[ac[k]] < 0)
            j++;

    if((i - j) % 4 != 0)
        return null;
    int l = 0;
    int i1 = i;
    do
    {
        if(i1 <= 1 || IA[ac[--i1]] > 0)
            break;
        if(ac[i1] == '=')
            l++;
    } while(true);
    i1 = ((i - j) * 6 >> 3) - l;
    byte abyte0[] = new byte[i1];
    int j1 = 0;
    int k1 = 0;
    do
    {
        if(k1 >= i1)
            break;
        int l1 = 0;
        for(int i2 = 0; i2 < 4; i2++)
        {
            int j2 = IA[ac[j1++]];
            if(j2 >= 0)
                l1 |= j2 << 18 - i2 * 6;
            else
                i2--;
        }

        abyte0[k1++] = (byte)(l1 >> 16);
        if(k1 < i1)
        {
            abyte0[k1++] = (byte)(l1 >> 8);
            if(k1 < i1)
                abyte0[k1++] = (byte)l1;
        }
    } while(true);
    return abyte0;
}

public static final byte[] decodeFast(char ac[])
{
    int i = ac.length;
    if(i == 0)
        return new byte[0];
    int j = 0;
    int k;
    for(k = i - 1; j < k && IA[ac[j]] < 0; j++);
    for(; k > 0 && IA[ac[k]] < 0; k--);
    byte byte0 = ac[k] != '=' ? 0 : ((byte)(ac[k - 1] != '=' ? 1 : 2));
    int l = (k - j) + 1;
    int i1 = i <= 76 ? 0 : (ac[76] != '\r' ? 0 : l / 78) << 1;
    int j1 = ((l - i1) * 6 >> 3) - byte0;
    byte abyte0[] = new byte[j1];
    int k1 = 0;
    int l1 = 0;
    int j2 = (j1 / 3) * 3;
    do
    {
        if(k1 >= j2)
            break;
        int i3 = IA[ac[j++]] << 18 | IA[ac[j++]] << 12 | IA[ac[j++]] << 6 | IA[ac[j++]];
        abyte0[k1++] = (byte)(i3 >> 16);
        abyte0[k1++] = (byte)(i3 >> 8);
        abyte0[k1++] = (byte)i3;
        if(i1 > 0 && ++l1 == 19)
        {
            j += 2;
            l1 = 0;
        }
    } while(true);
    if(k1 < j1)
    {
        int i2 = 0;
        for(int k2 = 0; j <= k - byte0; k2++)
            i2 |= IA[ac[j++]] << 18 - k2 * 6;

        for(int l2 = 16; k1 < j1; l2 -= 8)
            abyte0[k1++] = (byte)(i2 >> l2);

    }
    return abyte0;
}

public static final byte[] encodeToByte(byte abyte0[], boolean flag)
{
    int i = abyte0 == null ? 0 : abyte0.length;
    if(i == 0)
        return new byte[0];
    int j = (i / 3) * 3;
    int k = (i - 1) / 3 + 1 << 2;
    int l = k + (flag ? (k - 1) / 76 << 1 : 0);
    byte abyte1[] = new byte[l];
    int i1 = 0;
    int j1 = 0;
    int l1 = 0;
    do
    {
        if(i1 >= j)
            break;
        int i2 = (abyte0[i1++] & 0xff) << 16 | (abyte0[i1++] & 0xff) << 8 | abyte0[i1++] & 0xff;
        abyte1[j1++] = (byte)CA[i2 >>> 18 & 0x3f];
        abyte1[j1++] = (byte)CA[i2 >>> 12 & 0x3f];
        abyte1[j1++] = (byte)CA[i2 >>> 6 & 0x3f];
        abyte1[j1++] = (byte)CA[i2 & 0x3f];
        if(flag && ++l1 == 19 && j1 < l - 2)
        {
            abyte1[j1++] = 13;
            abyte1[j1++] = 10;
            l1 = 0;
        }
    } while(true);
    i1 = i - j;
    if(i1 > 0)
    {
        int k1 = (abyte0[j] & 0xff) << 10 | (i1 != 2 ? 0 : (abyte0[i - 1] & 0xff) << 2);
        abyte1[l - 4] = (byte)CA[k1 >> 12];
        abyte1[l - 3] = (byte)CA[k1 >>> 6 & 0x3f];
        abyte1[l - 2] = i1 != 2 ? 61 : (byte)CA[k1 & 0x3f];
        abyte1[l - 1] = 61;
    }
    return abyte1;
}

public static final byte[] decode(byte abyte0[])
{
    int i = abyte0.length;
    int j = 0;
    for(int k = 0; k < i; k++)
        if(IA[abyte0[k] & 0xff] < 0)
            j++;

    if((i - j) % 4 != 0)
        return null;
    int l = 0;
    int i1 = i;
    do
    {
        if(i1 <= 1 || IA[abyte0[--i1] & 0xff] > 0)
            break;
        if(abyte0[i1] == 61)
            l++;
    } while(true);
    i1 = ((i - j) * 6 >> 3) - l;
    byte abyte1[] = new byte[i1];
    int j1 = 0;
    int k1 = 0;
    do
    {
        if(k1 >= i1)
            break;
        int l1 = 0;
        for(int i2 = 0; i2 < 4; i2++)
        {
            int j2 = IA[abyte0[j1++] & 0xff];
            if(j2 >= 0)
                l1 |= j2 << 18 - i2 * 6;
            else
                i2--;
        }

        abyte1[k1++] = (byte)(l1 >> 16);
        if(k1 < i1)
        {
            abyte1[k1++] = (byte)(l1 >> 8);
            if(k1 < i1)
                abyte1[k1++] = (byte)l1;
        }
    } while(true);
    return abyte1;
}

public static final byte[] decodeFast(byte abyte0[])
{
    int i = abyte0.length;
    if(i == 0)
        return new byte[0];
    int j = 0;
    int k;
    for(k = i - 1; j < k && IA[abyte0[j] & 0xff] < 0; j++);
    for(; k > 0 && IA[abyte0[k] & 0xff] < 0; k--);
    byte byte0 = abyte0[k] != 61 ? 0 : ((byte)(abyte0[k - 1] != 61 ? 1 : 2));
    int l = (k - j) + 1;
    int i1 = i <= 76 ? 0 : (abyte0[76] != 13 ? 0 : l / 78) << 1;
    int j1 = ((l - i1) * 6 >> 3) - byte0;
    byte abyte1[] = new byte[j1];
    int k1 = 0;
    int l1 = 0;
    int j2 = (j1 / 3) * 3;
    do
    {
        if(k1 >= j2)
            break;
        int i3 = IA[abyte0[j++]] << 18 | IA[abyte0[j++]] << 12 | IA[abyte0[j++]] << 6 | IA[abyte0[j++]];
        abyte1[k1++] = (byte)(i3 >> 16);
        abyte1[k1++] = (byte)(i3 >> 8);
        abyte1[k1++] = (byte)i3;
        if(i1 > 0 && ++l1 == 19)
        {
            j += 2;
            l1 = 0;
        }
    } while(true);
    if(k1 < j1)
    {
        int i2 = 0;
        for(int k2 = 0; j <= k - byte0; k2++)
            i2 |= IA[abyte0[j++]] << 18 - k2 * 6;

        for(int l2 = 16; k1 < j1; l2 -= 8)
            abyte1[k1++] = (byte)(i2 >> l2);

    }
    return abyte1;
}

public static final String encodeToString(byte abyte0[], boolean flag)
{
    return new String(encodeToChar(abyte0, flag));
}

public static final byte[] decode(String s)
{
    int i = s == null ? 0 : s.length();
    if(i == 0)
        return new byte[0];
    int j = 0;
    for(int k = 0; k < i; k++)
        if(IA[s.charAt(k)] < 0)
            j++;

    if((i - j) % 4 != 0)
        return null;
    int l = 0;
    int i1 = i;
    do
    {
        if(i1 <= 1 || IA[s.charAt(--i1)] > 0)
            break;
        if(s.charAt(i1) == '=')
            l++;
    } while(true);
    i1 = ((i - j) * 6 >> 3) - l;
    byte abyte0[] = new byte[i1];
    int j1 = 0;
    int k1 = 0;
    do
    {
        if(k1 >= i1)
            break;
        int l1 = 0;
        for(int i2 = 0; i2 < 4; i2++)
        {
            int j2 = IA[s.charAt(j1++)];
            if(j2 >= 0)
                l1 |= j2 << 18 - i2 * 6;
            else
                i2--;
        }

        abyte0[k1++] = (byte)(l1 >> 16);
        if(k1 < i1)
        {
            abyte0[k1++] = (byte)(l1 >> 8);
            if(k1 < i1)
                abyte0[k1++] = (byte)l1;
        }
    } while(true);
    return abyte0;
}

public static final byte[] decodeFast(String s)
{
    int i = s.length();
    if(i == 0)
        return new byte[0];
    int j = 0;
    int k;
    for(k = i - 1; j < k && IA[s.charAt(j) & 0xff] < 0; j++);
    for(; k > 0 && IA[s.charAt(k) & 0xff] < 0; k--);
    byte byte0 = s.charAt(k) != '=' ? 0 : ((byte)(s.charAt(k - 1) != '=' ? 1 : 2));
    int l = (k - j) + 1;
    int i1 = i <= 76 ? 0 : (s.charAt(76) != '\r' ? 0 : l / 78) << 1;
    int j1 = ((l - i1) * 6 >> 3) - byte0;
    byte abyte0[] = new byte[j1];
    int k1 = 0;
    int l1 = 0;
    int j2 = (j1 / 3) * 3;
    do
    {
        if(k1 >= j2)
            break;
        int i3 = IA[s.charAt(j++)] << 18 | IA[s.charAt(j++)] << 12 | IA[s.charAt(j++)] << 6 | IA[s.charAt(j++)];
        abyte0[k1++] = (byte)(i3 >> 16);
        abyte0[k1++] = (byte)(i3 >> 8);
        abyte0[k1++] = (byte)i3;
        if(i1 > 0 && ++l1 == 19)
        {
            j += 2;
            l1 = 0;
        }
    } while(true);
    if(k1 < j1)
    {
        int i2 = 0;
        for(int k2 = 0; j <= k - byte0; k2++)
            i2 |= IA[s.charAt(j++)] << 18 - k2 * 6;

        for(int l2 = 16; k1 < j1; l2 -= 8)
            abyte0[k1++] = (byte)(i2 >> l2);

    }
    return abyte0;
}

private static final char CA[];
private static final int IA[];

static 
{
    CA = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".toCharArray();
    IA = new int[256];
    Arrays.fill(IA, -1);
    int i = 0;
    for(int j = CA.length; i < j; i++)
        IA[CA[i]] = i;

    IA[61] = 0;
}
 } 
```

现在我们将编写代码来编码和解码字符串

```
package com.encrypt;
import java.util.*;

  public class EnMain {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    long l = (new Date()).getTime();
    System.out.println(" timestamp "+l);
    String userid ="hello------"+l;
    Base64 base = new Base64();
    System.out.println(userid.getBytes());
    String encryptuserid = base.encodeToString(userid.getBytes(), false);
    System.out.println("encrypt values "+encryptuserid);
    byte[] b = base.decode("Y29nbm9zLS0tLS0xMzUxNDMzMjk2Mzk3");
    StringBuffer sb = new StringBuffer();
    for(int i =0;i<b.length;i++){
        byte  bx = b[i];
        System.out.print((char)b[i]);
        sb.append((char)b[i]);
        //String s = ;
    }System.out.println();
    System.out.println(sb);

    String[] as = sb.toString().split("-----");
    long l1 = Long.parseLong(as[1]);
    System.out.println("diff :"+(l1-l));

}

  } 
```

在这里，我们将 "hello........."+l 作为字符串传递并使用 base64 算法对其进行编码，然后检索它。

# google-chrome-extension - 用户脚本与 Chrome 扩展

> ID：13487661
> 
> 赞同：21
> 
> 时间：2012-11-21T06:35:00.637
> 
> 标签：google-chrome-extension, userscripts, tampermonkey

我正在开发一个扩展，它将读取 HTML 元素的值，然后对外部网站进行 API 调用，获取结果并将它们显示在新创建的 HTML 元素中。

在原生 chrome 扩展与用户脚本中编写它的优缺点是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-21T09:26:08.273

原生 Chrome 扩展程序和用户脚本之间存在一些差异。

有关Greasemonkey 脚本和 Chrome 用户脚本之间差异的列表，请参阅[此 wiki 部分。](http://wiki.greasespot.net/Cross-browser_userscripting)

如果您想利用跨浏览器的用户脚本，请尽量*不要*使用`GM_*`方法或`unsafeWindow`.

从开发人员的角度来看，首选用户脚本或 Chrome 扩展没有任何优势，因为任何用户脚本都可以轻松嵌入到 Chrome 扩展中。

如果您从部署的角度来看这个主题，那么差异是显着的：

*   一键安装仅适用于 Chrome 网上应用店。仅限本机扩展。
*   用户脚本和原生扩展都可以从本地文件浏览器拖到扩展页面来安装扩展。
    （用户脚本被转换为 Chrome 扩展；警告：见下文）
*   原生用户脚本支持将在 2013 年底停止工作，因为转换后的用户脚本使用[已弃用](http://developer.chrome.com/extensions/manifestVersion.html)的清单版本 1 。

### 结论

我建议开发原生扩展。您可以使用以下目录结构从用户脚本轻松创建 Chrome 扩展：

```
manifest.json
whatever.user.js 
```

最小清单.json：

```
{
     "name": "name of extension",
     "version": "1",
     "manifest_version": 2,
     "content_scripts": [{
         "js": ["whatever.user.js"],
         "matches": ["http://example.com/*"]
      }]
} 
```

### 也可以看看

*   [http://developer.chrome.com/extensions/content_scripts.html](http://developer.chrome.com/extensions/content_scripts.html)
*   [http://developer.chrome.com/extensions/match_patterns.html](http://developer.chrome.com/extensions/match_patterns.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T06:36:23.677

编写（和共享！）用户脚本的案例：只要您只使用普通的浏览器 DOM API，任何人都可以使用其他用户脚本轻松获取并运行您的脚本（通常只是安装而不进行编辑）有能力的浏览器。

当您使用 Google Chrome 时，针对它们的情况是，从 Chrome 21 开始，安装它们变得非常混乱：您需要右键单击安装链接，将其保存到磁盘，打开扩展页面，然后将保存的脚本拖到那里（是的），或者从 Chrome Web Store 安装[TamperMonkey](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo)（它是免费的，并且对 Chrome 所做的基本上与 Greasemonkey 对 Firefox 所做的一样：为用户脚本安装和维护提供了一个可忍受的用户界面）。

虽然您只需要做您列出的事情，但您可能不需要任何比用户脚本本机提供的特权 API 访问权限：尝试在另一个站点上执行您将在 devtools 控制台中为脚本编写的 XMLHttpRequest 代码并且您'看看它是否足以满足您的需求。如今，许多 Web API 都允许 CORS 支持，这可能会使您的用例无需求助于专有的浏览器原生扩展 API。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-21T07:06:07.357

直接与 Chrome 一起安装的用户脚本（即 Greasemonkey 脚本）最终会自动转换为带有内容脚本的扩展，因此它们本质上是相同的。用户脚本编写起来又快又容易，一个好的用户脚本可以在其他浏览器中得到支持。但是，Chrome 中的用户脚本存在一些限制。它们不能直接从网页读取或写入变量（仅共享标准 DOM）。他们不能制作跨域 XHR。相反，扩展功能更强大但更难开发。

似乎您必须编写 Chrome 扩展程序，因为您需要“对*外部*网站进行 API 调用”。

# php - 解析错误：语法错误，第 90 行的 functions.php 中出现意外 $end

> ID：13487666
> 
> 赞同：1
> 
> 时间：2012-11-21T06:35:11.540
> 
> 标签：php, wordpress, function, hook, formidable

```
<?php

global $oswcPostTypes;

//this is the folder that houses the function files to include

define('functions', TEMPLATEPATH . '/functions');

function fixObject (&$object)

{

if (!is_object ($object) && gettype ($object) == 'object')

return ($object = unserialize (serialize ($object)));

return $object;

}

$lang = TEMPLATEPATH . '/lang';

load_theme_textdomain('made', $lang);

//Get the post type functions

require_once(functions . '/oswc-post-types.php');

//Get the theme options

require_once(functions . '/theme-options.php');

//Get the review options

require_once(functions . '/review-options.php');

//Get the widgets

require_once(functions . '/widgets.php');

//Get the custom functions

require_once(functions . '/custom.php');

//Get the shortcodes

require_once(functions . '/shortcodes.php');

//Get the post type functions

require_once(functions . '/post-types.php');

//Get the post & page meta boxes

require_once(functions . '/meta-boxes.php');

//notifies users of updates

require('update-notifier.php');

//gallery

function my_gallery_to_slideshow_has_gallery( $params ){

return true;
**//this is the line 90 :(**
}

add_filter( 'mv_gallery_to_slideshow_has_gallery',    'my_gallery_to_slideshow_has_gallery' );

// average rating shortcode

function get_ppic(){

echo do_action( 'wordpress_social_login' );

}

add_shortcode('via-twitter','get_ppic');

function limit_posts_per_archive_page() {

if ( is_category() )

    set_query_var('posts_per_archive_page', 9); // or use variable key:     posts_per_page

}

add_filter('pre_get_posts', 'limit_posts_per_archive_page');

function the_slug() 

{

$abc = $_GET['post_id'];    

$post_data = get_post($abc, ARRAY_A);   

$slug = $post_data['post_name'];    

return $slug; 

}

function category_has_parent($catid){

$category = get_category($catid);

if ($category->category_parent > 0){

    return true;

}

return false;

}

/*Created by Albert*/ 
```

/*结束*/

```
add_action('frm_after_create_entry', 'copy_into_my_table', 20, 2);

function copy_into_my_table($entry_id, $form_id){

if($form_id == 6){ //change 4 to the form id of the form to copy

global $wpdb;

$values = array('c_id' => NULL, 'review_title' => $_POST['item_meta'][86], 'post_title'    => $_POST['item_meta'][129], 'post_id' => $_POST['item_meta'][94]);

//replace 25 and 26 with the field ids of the Formidable form. Change col_name to the   column names in your table

$wpdb->insert('wp_magic_competition', $values);

 }

}

<!-- added -->
add_filter('frm_get_default_value', 'my_custom_default_value', 10, 2);
function my_custom_default_value($new_value, $field){
if($field->id == 25){ //change 25 to the ID of the field
$new_value = 'custom default'; //set your custom value here
}
return $new_value;
}
<!-- added -->

?> 
```

找不到错误的原因..在任何人都可以帮助我..谢谢..强大的专业钩子，wordpress ......
非常感谢提前:) 解析错误：语法错误，意外的 $end 在第 90 行的 /home/wpperhou/public_html/dev/aor/thesports/wp-content/themes/made/functions.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:32:02.280

你能试试吗

*   在文件末尾添加一个结束 PHP 标记 (?>)
*   将文件重新上传到服务器。有时我会遇到与您相同的错误，并且可以解决问题。这可能是由 ftp 错误引起的。

马克西姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:45:45.610

我认为是这样的：

```
function limit_posts_per_archive_page() {

if ( is_category() )

    set_query_var('posts_per_archive_page', 9); // or use variable key:     posts_per_page

}

add_filter('pre_get_posts', 'limit_posts_per_archive_page'); 
```

我看不到`}`该功能的结束。

我猜这应该可以解决它：

```
function limit_posts_per_archive_page() {

if ( is_category() )

    set_query_var('posts_per_archive_page', 9); // or use variable key:     posts_per_page

}

}

add_filter('pre_get_posts', 'limit_posts_per_archive_page'); 
```

编辑：忽略这一点，这是完全错误的。我不是一个如果没有大括号该死的人！（我会把它留在这里给lolz）

# sql - SQL：选择关联值

> ID：13487667
> 
> 赞同：0
> 
> 时间：2012-11-21T06:35:12.463
> 
> 标签：sql

我有一个包含以下列的 EMPLOYEES 表的数据库：

```
(EmpID    char(4) unique Not null,
 Ename    varchar(10),
 Job      varchar(9),
 MGR      char(4),
 Hiredate date,
 Salary   decimal(7,2),
 Comm     decimal(7,2),
 DeptNo   char(2) not null,
     Primary key(EmpID),
     Foreign key(DeptNo) REFERENCES DEPARTMENTS(DeptNo)); 
```

使用示例插入：

```
insert into EMPLOYEES values (7654,'Martin','Salesman',7698,'28-Feb-12',1250,1400,30); 
```

我无法弄清楚如何按经理姓名列出所有员工及其经理。我不知道如何显示经理姓名，只显示数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:13:34.087

您评论中的查询是错误的，因为它`JOIN`在 Ename 上执行。

试试这个：

```
SELECT 
  manager.Ename as 'Manager Name'
  , e.Ename as 'Employee Name' 
FROM 
  Employees e
  JOIN Employees manager on e.MGR = manager.EmpID; 
```

您的原始查询加入了名称上的表。您应该将 MGR id 与 EmpID 联系起来以找到经理。

# mongodb - Mongo Schema Design 时间序列数据

> ID：13487668
> 
> 赞同：2
> 
> 时间：2012-11-21T06:35:19.660
> 
> 标签：mongodb

我正在使用 MongoDB 开发一个 Web 应用程序，我对架构设计有一些疑问。

我想要做的是使用 Mongo 存储每个用户的能源消耗数据。对于每个用户，我们都会有用电量的数据，即时间戳和用电量。

所以问题是如何将它们存储在 Mongo 中，我有两种方法。

1.  将所有内容放在一个集合中。所以它会有这样的：

    `{"user_id": "e211a233-808f-fc43-0800-c05650001785","Value": 274,"Time": 1314691200}`

    所以，每个用户可能有成千上万的数据，而我们有成千上万的用户。因此，一个集合中将有数千万个文档。

2.  将一个用户的数据放在一个集合中。所以我们将有数千个集合和每个集合中的数千个文档。

任何人都可以帮助我考虑到性能，哪种方法更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-08T10:07:47.150

对于这个问题的任何新指：

mongoDB 有一些关于这个特定问题的非常有用的视频教程。请参阅以下链接，它肯定会对您有所帮助：

[第1部分](http://www.mongodb.com/presentations/webinar-mongodb-time-series-data-setting-stage-sensor-management)

[第2部分](http://www.mongodb.com/presentations/mongodb-time-series-data-part-2-analyzing-time-series-data-using-aggregation-framework)

[第 3 部分](http://www.mongodb.com/presentations/mongodb-time-series-data-part-3-sharding)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T14:21:36.107

您可以使用选项 1，也可以将数据分片到多个节点以提高性能。

或者，如果可以选择，我会亲自为每个用户保留每日条目，然后使用

```
db.coll.update( 
  { _id : userId, date: '12/11/2012' }, 
  { $inc : {  consumption : value } },
  true // insert the document if it does not exist and init consumption with 0
) 
```

如果您不会经常查询数据，您还可以将条目添加到一天集合中的单个每日文档中，如下所示：

```
db.days.update( { day: '12/11/2012' } , 
  { $addToSet : 
    { todaysConsumptions : { userId : id, consumption: value, time: timestamp } 
  } 
} 
```

从最后一种方法查询数据的方法是使用聚合框架和对 todaysConsumptions 字段的 $unwind 操作。$unwind 本质上将嵌入的数组字段转换为类似列的数据，然后可以对这些数据进行分组、求和、计数等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T12:47:19.900

选项 1 将利用您的索引并很好地扩展。它比不断变化的海量文档更容易高效地查询和更新。如果您计划在未来聚合这些数据，它也会使您的查询变得更加容易。具体来说，在文档上使用聚合框架比在文档中必须首先展开的数组更有效。

此外，如果您计划在 150K 条目的区域内拥有这样的条目，它将超过 16MB 的单个文档限制，因此我认为根据选项 1，在大集合中使用单个文档几乎总是更好。

**[更新]**

再看一遍，我发现您没有提到您将对数据进行哪些查询。这就是关键所在。但鉴于您的结果看起来像是历史结果，它看起来越来越倾向于将数据放入数百万个文档中。Map-Reduce 将是您分析的朋友。

# mysql - 在一列中添加多个值

> ID：13487671
> 
> 赞同：3
> 
> 时间：2012-11-21T06:35:37.537
> 
> 标签：mysql, sql

我必须以如下所示的方式创建一个表。我们可以这样创作吗？（如是）

表名：示例

```
product_id|   product_name| category   |
    1     |   Sample1     |  1|2|3     |
    2     |   sample2     |  4|5|6     | 
```

其中类别字段包含多个值。

以及我们如何在表格的哪一行搜索类别 4。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T06:46:19.160

您不能创建嵌套表。而你的想法并不是这样设计桌子的好主意。您应该有两个表（*如果是类别，则恰好三个包含描述*）。一个是用于`product`，第二个表包含*每个产品的类别*。示例设计如下所示，

```
CREATE TABLE Product
(
    ProductID INT PRIMARY KEY,
    ProductName VARCHAR(50) UNIQUE
);

CREATE TABLE Category
(
    CategoryID INT PRIMARY KEY,
    CategoryName VARCHAR(50) UNIQUE
);

CREATE TABLE Product_Category
(
    RecordD INT AUTO_INCREMENT PRIMARY KEY,
    CategoryID INT,
    ProductID INT,
    CONSTRAINT tb_uq UNIQUE(CategoryID, ProductID)
); 
```

并填充样本记录

```
INSERT Category VALUES (1, 'Fruit');
INSERT Category VALUES (2, 'Vegetable');

INSERT Product VALUES (1, 'Apple');
INSERT Product VALUES (2, 'Banana');
INSERT Product VALUES (3, 'Cabbage');
INSERT Product VALUES (4, 'Squash');
INSERT Product VALUES (5, 'Tomato');

INSERT Product_Category (CategoryID, ProductID) VALUES (1,1);
INSERT Product_Category (CategoryID, ProductID) VALUES (1,2);
INSERT Product_Category (CategoryID, ProductID) VALUES (2,3);
INSERT Product_Category (CategoryID, ProductID) VALUES (2,4);
INSERT Product_Category (CategoryID, ProductID) VALUES (1,5);
INSERT Product_Category (CategoryID, ProductID) VALUES (2,5); 
```

*   [SQLFiddle 演示（*包括记录*）](http://sqlfiddle.com/#!2/fd0e2/3)

示例查询

```
-- NORMAL QUERY
SELECT  a.ProductName, c.CategoryName
FROM    Product a
        INNER JOIN Product_category b
          ON a.ProductID = b.ProductID
        INNER JOIN Category c
          ON b.CategoryID = c.CategoryID
ORDER BY ProductName;

-- If you want catgoryName to be comma separated
SELECT  a.ProductName, GROUP_CONCAT(c.CategoryName) CategoryList
FROM    Product a
        INNER JOIN Product_category b
          ON a.ProductID = b.ProductID
        INNER JOIN Category c
          ON b.CategoryID = c.CategoryID
GROUP BY ProductName
ORDER BY ProductName; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:38:38.700

假设这些是 形式的字符串`<item>|<item>|<item>`，您可以，但最好为每个类别提供与`product_id`和相关的自己的行`product_name`。这样，您可以获得更好的性能并拥有更“自然”的结构，这样您就不必执行以下查询：

```
SELECT *
FROM Sample
WHERE category LIKE '%4|%' OR category LIKE '%|4|%' or category LIKE '%|4%' 
```

为了检索数据。更好的解决方案是用管道包围所有字段 - 如果您有能力事先修改这些字符串，以这种方式创建字段将处理`4`出现在中间或开头相同的情况（例如`|4|5|6|`可以查询与 ) 相同`|3|4|5`。

一个更自然的结构是这样的：

```
product_id|   product_name| category |
    1     |   Sample1     |  1       |
    1     |   Sample1     |  2       |
    1     |   Sample1     |  3       |
    2     |   sample2     |  4       |
    2     |   sample2     |  5       |
    2     |   sample2     |  6       | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T06:39:54.417

产品和类别之间似乎存在一对多的关系，因此您应该将类​​别详细信息标准化为不同的表，如下所示：

*   产品：product_id、product_name。
*   product_categories: product_id, category_id

那么您的 product_categories 表将是

```
product_id | category_id
         1 | 1
         1 | 2
         1 | 3
         2 | 4
         2 | 5
         2 | 6 
```

然后一个简单的选择语句将产品表与 product_categories 表连接起来，将为您提供给定类别中的所有产品。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T06:41:11.483

为类别制作一个单独的表格：

表类别

```
product_id| category   |
    1     |  1         |
    1     |  2         |
    1     |  3         |
    2     |  4         |
    2     |  5         |
    2     |  6         | 
```

然后你可以像这样搜索：

```
SELECT p.product_id, p.product_name
FROM table_products p JOIN table_categories c
ON p.product_id = c.product_id
WHERE c.category = 4 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-21T06:39:34.943

您需要另一个表来表示多对多关系。您不应将多个值插入一列。

```
CREATE TABLE products (product_id, product_name)
CREATE TABLE product_category (product_id, category_id)

INSERT INTO products (product_id, product_name) VALUES (1, 'Sample1');
INSERT INTO products (product_id, product_name) VALUES (2, 'Sample2');

INSERT INTO product_category (product_id, category_id) VALUES (1, 1);
INSERT INTO product_category (product_id, category_id) VALUES (1, 2);
INSERT INTO product_category (product_id, category_id) VALUES (1, 3);
INSERT INTO product_category (product_id, category_id) VALUES (2, 4);
INSERT INTO product_category (product_id, category_id) VALUES (2, 5);
INSERT INTO product_category (product_id, category_id) VALUES (2, 6); 
```

要检索类别 4 中的所有产品：

```
SELECT 
  products.* 
FROM 
  products 
INNER JOIN 
  product_category 
ON 
  products.product_id = product_category.product_id 
WHERE 
  product_category.category_id = 4; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-21T06:40:42.353

是的，您可以，实际上我们通过将“类别”（例如）设为 BLOB 来做到这一点，从而允许在一行上存储非常大的数据子集。这允许一个连接和一个查询，这是更加优化的。

那么处理它的唯一方法是在“客户端”上实际这样做。如果字段中的数据太多，您可能不想使用 LIKE。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-21T06:40:54.083

我认为您应该创建两个表；
表一

```
product_id|   product_name|
    1     |   Sample1     |
    2     |   sample2     | 
```

表二

```
category_id| product_id|  category  |
    1      |     1     |      1     |
    2      |     1     |      2     |
    3      |     1     |      3     |
    4      |     2     |      4     |
    5      |     2     |      5     |
    6      |     2     |      6     | 
```

# java - Spring-mvc 控制器和异常处理

> ID：13487672
> 
> 赞同：8
> 
> 时间：2012-11-21T06:35:44.633
> 
> 标签：java, spring, spring-mvc

想问你一个关于 spring-mvc 控制器的最佳实践问题。请查看以下代码：

```
 @Autowired
    SomeService service;

    @RequestMapping (...)
    public @ResponseBody Response createSomething () {

       try {

            serviceResponse = service.doSomething();

            //create a success response and return

       }
       catch (SomeServiceException e) {
             //create an error response and return 
       }

} 
```

在控制器级别进行错误处理是正常的做法吗？或者服务类不应该像上面显示的那样抛出异常。请查看并告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T14:51:40.493

我会说您有三种策略，具体取决于您的用例。

大致有三种策略：[HandlerExceptionResolver、@ExceptionHandler](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-exceptionhandlers)和在 action 内部处理异常。

这些用例是：整个应用程序的通用异常处理程序、整个控制器、相应的特定操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T07:26:33.243

我想说最好的做法是使用@ExceptionHandler。在控制器方法中处理异常的缺点是它使代码的可读性降低，并且可能在许多控制器方法中重复。

我建议为您的控制器创建一个基类，并定义 @ExceptionHandler。这样它就可以用于许多不同的控制器，而无需任何代码重复。这将比异常解析器方法更具可读性，但可以结合使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T06:42:46.553

服务类可以/应该抛出异常..您可以在控制器中处理这些异常以进行日志记录..您也可以根据控制器上捕获的异常显示适当的错误页面..但这会很乏味..最好尝试使用 spring 异常处理..http://www.mkyong.com/spring-mvc/spring-mvc-exception-handling-example/

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T08:33:00.110

在 Handler 类的 bean 定义文件中定义 bean。当程序中抛出任何异常时，会调用resolveException方法。

```
 public class Handler
        implements HandlerExceptionResolver
    {

        public Handler()
        {
        }

        public ModelAndView resolveException(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)
        {
            if(ex instanceof ErrorType1Exception))
            {
                 ModelAndView test = new ModelAndView("errorpage1jsppage");
return test;
            } else
            if(ex instanceof ErrorType2Exception))
            {
                 ModelAndView test1 = new ModelAndView("errorpage2jsppage");
return test1
            }
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-30T18:49:26.943

异常处理的一个好习惯是早抛出晚捕获。在您的情况下，这意味着在控制器而不是服务上捕获错误。这里的优点是您可以根据客户端请求（SOAP/REST/JSON...）编写不同的控制器，以不同方式处理异常。但是，如果该逻辑存在于服务中，那么在响应不同客户端时，您在如何处理来自服务的返回方面的灵活性就会降低。

# android - 我可以在 onPrepareDialog() 而不是 onCreateDialog() 中创建对话框吗？

> ID：13487678
> 
> 赞同：1
> 
> 时间：2012-11-21T06:36:32.700
> 
> 标签：android

我想在`onConfigurationChanged`更改语言环境后刷新对话框的显示`showDialog(ID)`in `onConfigurationChanged`。

我知道在 中创建对话框`onCreateDialog()`并刷新标题或按钮是正常的`onPrepareDialog()`，但是我有很多对话框需要刷新。

我可以在 中返回“null” `onCreateDialog()`，然后在 中进行真正的工作`onPrepareDialog()`吗？

谢谢你的帮助。艾米

# c# - TFS 警报服务器插件，用于在历史记录更改时发送邮件

> ID：13487679
> 
> 赞同：1
> 
> 时间：2012-11-21T06:36:37.733
> 
> 标签：c#, tfs-alerts

我有 TFS 的服务器插件，当某些东西被分配给人时，它会发送邮件。

现在我要做的是，我的插件将发送有关历史更改的邮件。例子：

(mak) 已将错误分配给 (betty)。betty 更改错误状态并分配给 (maddi)，因此我的服务器插件会将分配发送到邮件。首先是 (betty)，然后是 (maddi)，现在我希望它将历史更改警报发送到 (mak) . 我怎样才能实现这个目标？我的代码在所有字段下方。

```
string mailbody ="";
mailbody += "<body><div class='Title'><b><a href={0}>Work item:{1}&nbsp;{2} - {3}</a></b></div><br />";
mailbody += "<table>{4}</table><br/><br />Other fields <table class='WithBorder'>{5}</table>";
string mailfooter = "<div class=footer><br />Notes:<br />- All dates and times are shown in GMT+05:00:00 Pakistan Standard Time<br />- You are receiving this notification because of a subscription created by SHMA\\Fahad.Ali<br />Provided by <a HREF='http://go.microsoft.com/fwlink/?LinkID=129550'title='Microsoft Visual Studio® Team System 2010'>Microsoft Visual Studio® Team System 2010</a></div></body>";
string mailsubject = "{0} Work Item : {1} {2} - {3}";

StringBuilder wiMessage = new StringBuilder("", 500);
StringBuilder wiSubject = new StringBuilder("", 200);

if (AssignedToChange)
{
    string otherData = "", codeData = "";

    foreach (StringField field in workItemChange.CoreFields.StringFields)
    {
      codeData += "<tr ><td class='PropName'>" + field.Name + "</td><td class='PropName'>" + field.NewValue + "</td></tr>";                        
    }

    otherData += "<tr width=100%><td class='ColHeadingMedium'>Field              </td><td class='ColHeading'>New Value              </td><td class='ColHeading'>Old Value              </td></tr>";
    foreach (StringField field in workItemChange.ChangedFields.StringFields)
    {
      otherData += "<tr><td class='ColHeadingMedium'>" + field.Name + "</td><td class='ColHeadingMedium'>" + field.NewValue + "</td><td class='ColHeadingMedium'>" + field.OldValue + "</td></tr>";
    }

    wiMessage.AppendFormat(mailbody,  workItemChange.DisplayUrl,
                           "", witem.Id, witem.Title, codeData, otherData);

    wiMessage.AppendLine(mailfooter);
    wiSubject.AppendFormat(mailsubject, workItemChange.PortfolioProject, "",witem.Id,witem.Title);
    SendEmail(assTo, wiSubject.ToString(), styleTag + wiMessage.ToString());
} 
```

# c# - 将 XmlNode 导入另一个 XmlNode 而不是 XmlDocument

> ID：13487682
> 
> 赞同：0
> 
> 时间：2012-11-21T06:37:02.830
> 
> 标签：c#, asp.net, xml, xmldocument

我知道我可以这样做：

```
XmlNode newParent = UnitedXml.ImportNode(parentNode, true);
UnitedXml.AppendChild(newParent); 
```

其中unitedxml 是一个XmlDocument。

现在我想将一个孩子从不同的 XmlDocument 导入“newParent”（没有 ImportNode 方法）。

我怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:48:25.987

```
 XmlNode impertedNode = UnitedXml.ImportNode(x, true);
 newParent.AppendChild(impertedNode); 
```

这是一个愚蠢的错误。对不起。

# c# - 从会话 id 获取完整的 windows 域名

> ID：13487684
> 
> 赞同：0
> 
> 时间：2012-11-21T06:37:15.113
> 
> 标签：c#, .net, windows, session, com

我正在开发需要监视 Windows 会话更改并在特定用户登录时自动启动应用程序的服务应用程序。

这是它的工作原理，我有一个文件，其中包含以用户主体名称格式 (user@domain.LOCAL) 存储的 Windows 用户名列表。我的服务将监视任何会话更改，并在其中一个用户登录后采取某些操作。

```
List<string> _UsersList;
 object _sessionCheckLock = new object();
        void OnCheckSession(int nSessionId, bool bIsLoggIn)
        {
            lock(_sessionCheckLock)
            {
                try
                {
                    string sUserName = string.Empty;
                    string sDomain = string.Empty;

                    IntPtr pUserName = IntPtr.Zero;
                    uint nBytesReturned = 0;
                    if (WTSQuerySessionInformation(IntPtr.Zero, (uint)nSessionId, WTS_INFO_CLASS.WTSUserName, out pUserName, out nBytesReturned) && (pUserName != IntPtr.Zero))
                    {
                        sUserName = Marshal.PtrToStringAnsi(pUserName);

                        WTSFreeMemory(pUserName);

                        IntPtr pDomain = IntPtr.Zero;
                        if(WTSQuerySessionInformation(IntPtr.Zero, (uint)nSessionId, WTS_INFO_CLASS.WTSDomainName, out pDomain, out nBytesReturned) && (pDomain != IntPtr.Zero))
                        {
                            sDomain = Marshal.PtrToStringAnsi(pDomain);
                            WTSFreeMemory(pDomain);
                        }
                        else
                        {

                        }

                        if (!string.IsNullOrEmpty(sUserName))
                        {
                          if(!string.IsNullOrEmpty(sDomain)
                          {
                              sUserName += "@" + sDomain;
                          }

                            foreach(string username in _UsersList)
                            {
                               if(string.Compare(sUsername, username, true)==0)
                               {
                                //Do a couple of things
                                return;
                               }
                            }

                        }
                    }
                    else
                    {
                        return;
                    }
                }
                catch (System.Exception ex)
                {

                }
            }
        } 
```

上面的代码是每当引发新的登录事件时我调用的函数。_UsersList 是一个字符串列表，其中包含允许服务使用的所有用户名。这里的问题是，`WTSQuerySessionInformation`使用 with 时`WTS_INFO_CLASS.WTSDomainName`不会返回域的全名，因此比较失败。例如，如果用户列表中存在名为 (username@DOMAIN.LOCAL) 的用户名并登录，则在查询会话的域名，它只返回 (DOMAIN) 而没有 .LOCAL 附录。我需要找到一种方法来获取完整的域名以匹配我列表中的域名。

有人可以帮忙吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:43:36.910

查看 Cassia.Net，这是一个非常有用的。

您可以下载源代码，我将它用于一个项目，我必须让所有登录到服务器的用户。

cassia .NET Windows 终端服务/远程桌面服务库

[http://code.google.com/p/cassia/](http://code.google.com/p/cassia/)

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T17:29:37.033

红蛇，卡西亚真的有帮助吗？我和你有同样的问题，但是 Cassia 似乎在`WTSQuerySessionInformation`下面使用了相同的调用，所以我仍然只是得到了短域名。

在[此](http://community.spiceworks.com/topic/158946-get-dns-domain-name-from-netbios-domain-name)页面上，我找到了对函数的引用，该`DsGetDcName`函数可用于使用`WTSQuerySessionInformation`给我的短域名获取 FQDN。这是对我有用的示例：

```
std::wstring GetSessionDomainName(DWORD sessionId)
{
    std::wstring domainName;
    LPWSTR buffer = NULL;
    DWORD bufferSize = 0;

    if(WTSQuerySessionInformation(WTS_CURRENT_SERVER_HANDLE, sessionId, WTSDomainName, &buffer, &bufferSize))
    {
        PDOMAIN_CONTROLLER_INFOW domainControllerInfo = NULL;
        DWORD retVal = DsGetDcNameW(NULL, buffer, NULL, NULL, DS_IS_FLAT_NAME | DS_RETURN_DNS_NAME, &domainControllerInfo);
        if (retVal == 0)
            domainName = domainControllerInfo->DnsForestName;

        WTSFreeMemory(buffer);
        NetApiBufferFree(domainControllerInfo);
    }

    return domainName;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T17:51:08.207

WTDomainName 显示了用户所属的域——我找不到任何明确的文档，但我认为它获取的是 netBios 名称，而不是 FQDN。你应该可以使用两个环境变量 USERDNSDOMAIN USERDOMAIN 来保存这些值。

您还可以使用 ADSI 进行更详细的查找，看看[这里的线程](http://www.winvistatips.com/ldap-query-root-domain-single-label-dns-name-t693070.html)

但这一切都说明了，除非你有一个非常复杂的森林结构，用户从树中的许多不同域登录......将转换硬编码到你的应用程序中可能会快得多。它们不是经常变化的东西，从新域登录的用户也应该很少见。

# c# - 导出为 PDF/Word/Excel（原样）

> ID：13487686
> 
> 赞同：0
> 
> 时间：2012-11-21T06:37:26.307
> 
> 标签：c#, pdf, export

是否有一些可用的组件/api/方法允许我将当前页面 (aspx/html) 导出为 PDF，同时还注意页面的 CSS 规则？

我有一个生成的报告，其中包含 3 列、表格和大量 CSS，但是当我导出到 Excel、PDF、HTML 时 - 我最终得到一个黑白结果，然后需要在代码中重新应用 CSS很麻烦。

> 注意*。显然在我看来这听起来不太可能，因为组件/api/方法需要解释 HTML 和 CSS。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:42:05.073

我在 Expected Behavior 工作，我们开发了一个名为 DocRaptor 的 API，可以将 HTML 转换为 PDF 和 Excel 格式。我们使用 Prince XML 生成 PDF，我们的输出质量比类似的 API 高得多。

听起来您主要关心的是对 HTML 和 CSS 的正确解释，并且 DocRaptor 具有广泛的 CSS 支持。我们使用 HTTP POST 请求生成文档，DocRaptor 可以与 C#（以及许多其他语言）一起使用

这是我们的 C# 编码示例的链接：

[DocRaptor C# 示例](http://docraptor.com/documentation/examples_csharp)

以及 DocRaptor 主页的链接：

[猛禽博士](http://docraptor.com/)

# c# - LINQ to Entities 无法识别方法“System.Linq.IQueryable”1

> ID：13487687
> 
> 赞同：2
> 
> 时间：2012-11-21T06:37:28.147
> 
> 标签：c#, sql, linq

当我执行以下代码时：

```
IHotelDataAccess _hotelDataAccess= new HotelDataAccess(_entities);
int myVal = (from u in _hotelDataAccess.GetHotelsByCityId(19)
    select u).Count(); 
```

myVal 按预期返回一个整数值，但是如果我尝试返回 IQueryable 如下

```
return (from geoLocation in _entities.ViewGeographyLocation
 where geoLocation.CountryCode == countryCode
 orderby geoLocation.SortOrder, geoLocation.CityName
 select new ContinentModel
 {
  ContinentCode = geoLocation.ContinentCode,
  ContinentName = geoLocation.ContinentName,
  CountryCode = geoLocation.CountryCode,
  CountryName = geoLocation.CountryName,
  CityId = geoLocation.CityId,
  CityName = geoLocation.CityName,
  CityCode = geoLocation.CityName,
  TotalCount = ((from u in _hotelDataAccess.GetHotelsByCityId(19)
   select u).Count())
 }); 
```

我得到错误：

> LINQ to Entities 无法识别方法 'System.Linq.IQueryable`1[DestKosher.Model.HotelModel] GetHotelsByCityId(Int32)' 方法，并且此方法无法转换为商店表达式。

方法 hotelDataAccess.GetHotelsByCityId(19) 返回 IQueryable。任何想法、帮助或解决方案将不胜感激。问候，

马丁

# **更新：**

最初设置此查询是为了查看通过将整数放入函数 GetHotelsByCityId 是否有效。但是，我最终想做的是：

```
return (from geoLocation in _entities.ViewGeographyLocation
 where geoLocation.CountryCode == countryCode
 orderby geoLocation.SortOrder, geoLocation.CityName
 select new ContinentModel
 {
  ContinentCode = geoLocation.ContinentCode,
  ContinentName = geoLocation.ContinentName,
  CountryCode = geoLocation.CountryCode,
  CountryName = geoLocation.CountryName,
  CityId = geoLocation.CityId,
  CityName = geoLocation.CityName,
  CityCode = geoLocation.CityName,
  TotalCount = ((from u in _hotelDataAccess.GetHotelsByCityId(geoLocation.CityId)
   select u).Count())
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T06:39:29.923

按照设计，*[LINQ to Entities](http://msdn.microsoft.com/en-us/library/bb386964.aspx)*需要将整个 LINQ 查询表达式转换为服务器查询。在翻译查询之前，只有少数不相关的子表达式（查询中不依赖于服务器结果的表达式）在客户端上进行评估。不支持没有已知转换的任意方法调用，例如本例中的 GetHotelsByCityId()。

你可以这样做

```
var list = _hotelDataAccess.GetHotelsByCityId(19).ToList();
int myVal = (from u in list
    select u).Count(); 
```

在您的查询中比我们 myval

```
return (from geoLocation in _entities.ViewGeographyLocation
 where geoLocation.CountryCode == countryCode
 orderby geoLocation.SortOrder, geoLocation.CityName
 select new ContinentModel
 {
  ContinentCode = geoLocation.ContinentCode,
  ContinentName = geoLocation.ContinentName,
  CountryCode = geoLocation.CountryCode,
  CountryName = geoLocation.CountryName,
  CityId = geoLocation.CityId,
  CityName = geoLocation.CityName,
  CityCode = geoLocation.CityName,
  TotalCount = myVal 
 }); 
```

阅读更多详情：[LINQ to Entities，什么不受支持？](http://mosesofegypt.net/post/LINQ-to-Entities-what-is-not-supported.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:40:52.320

尝试添加命名空间“System.Linq”，如果您有“System.Core”程序集引用，还要检查您的项目引用。

# sql - 如果数据不可用，如何根据日期每月从数据库中检索数据，它应该显示 null

> ID：13487697
> 
> 赞同：1
> 
> 时间：2012-11-21T06:38:36.383
> 
> 标签：sql, sql-server

我有这种格式的数据...

```
ID  id  date                     time           total
-----------------------------------------------------------    
51  192 2012-08-14 00:00:00.000 02:10 PM    4900.00
51  191 2012-08-11 00:00:00.000 03:20 PM    5500.00
51  35  2012-08-17 00:00:00.000 10:30 AM    2900.00
51  35  2012-08-17 00:00:00.000 11:50 AM    10800.00
51  192 2012-10-23 00:00:00.000 04:00 PM    2900.00
51  192 2012-10-23 00:00:00.000 03:00 PM    2900.00
51  192 2012-10-23 00:00:00.000 10:10 AM    2900.00
51  192 2012-10-23 00:00:00.000 02:50 PM    2300.00
51  191 2012-11-16 00:00:00.000 04:00 PM    2900.00 
```

我想`sum(total)`按月显示。如果整个月都没有预订，则该月应显示 0 值。因为我想将该月的值绘制到图表中。

你能帮忙解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:06:55.183

试试这个：

```
select  Years,number as Month,isnull(Total,0) as Total
from(
    select number 
    from master..spt_values 
    where type='P' 
    and number between 1 and 12) seq
cross join (select distinct Year([date]) as Years from Table1) y
left join
    (select Year([date])as Year,month([date])as Month,sum(total) as Total
     from Table1 
     group by  Year([date]),month([date]))t
on seq.number=t.Month
and t.year=y.Years 
```

# [SQL小提琴演示](http://sqlfiddle.com/#!3/598af/12)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:55:58.523

这个在甲骨文中工作

```
 select  <place your rest  of required columns> 
    ,to_char(date,'month') Month,sum(total) total 
     from talbe1 group by to_char(date,'month')
      ,<place your rest  of required columns> ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T07:18:41.817

询问 ：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!3/d27b1/15)**

```
SELECT 
t.month
,isnull(SUM(total),0) AS total
FROM (VALUES (1),(2),(3),(4),(5),(6),(7),(8),(9),(10),(11),(12)
      )  AS t(month)
LEFT JOIN Table1 t1
  ON MONTH(t1.date) = t.month
GROUP BY t.month 
```

结果：

```
| MONTH | TOTAL |
-----------------
|     1 |     0 |
|     2 |     0 |
|     3 |     0 |
|     4 |     0 |
|     5 |     0 |
|     6 |     0 |
|     7 |     0 |
|     8 | 24100 |
|     9 |     0 |
|    10 | 11000 |
|    11 |  2900 |
|    12 |     0 | 
```

# google-apps-script - 数组没有得到值

> ID：13487700
> 
> 赞同：0
> 
> 时间：2012-11-21T06:38:58.807
> 
> 标签：google-apps-script

我正在运行一个脚本，该脚本使用消息框更改公式中的值。

```
var searchtext = Browser.inputBox("Enter search text");
var replacetext = Browser.inputBox("Enter replace text");
var form = ss1.getRange("D3");
var formula = form.getFormula();
var updated =formula;
updated.indexOf(searchtext);
updated = updated.replace(searchtext, replacetext);
form.setFormula(updated);

var form2 = ss1.getRange("D10");
var formula2 = form2.getFormula();
var updated2 =formula2;
updated2.indexOf(searchtext);
updated2 = updated2.replace(searchtext, replacetext);
form2.setFormula(updated2); 
```

正如您所注意到的，我必须为我拥有的不同范围重复代码。在上面的代码中，我有 D3 和 D10 范围。我还有大约 20 个范围需要替换公式。我创建了这个数组，希望在脚本运行时一起完成它们，但我没有看到任何变化。任何想法为什么会发生这种情况？

```
 function dash(){
var ss1 = SpreadsheetApp.getActiveSpreadsheet();
var searchtext = Browser.inputBox("Enter search text");
var replacetext = Browser.inputBox("Enter replace text");

var rangeArray =     ss1.setActiveSheet(ss1.getSheetByName("Ranges").getRange("A1:A5").getValues());
var daily = ss1.setActiveSheet(ss1.getSheetByName("Daily"));

for(var i in rangeArray){
var form = daily.getRange(rangeArray[i][0]);

var formula = getRange(form).getFormula();
var updated =formula;
updated.indexOf(searchtext);
updated = updated.replace(searchtext, replacetext);
form.setFormula(updated);} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:07:56.610

我忽略了一些关于您的工作表布局的信息，所以我不得不做出一些假设......我想您要处理的范围是工作表中的列，所以我会做这样的事情（参见代码中的注释）：（我没有机会测试这段代码，它可能需要一些调试）

```
function dash(){
    var ss1 = SpreadsheetApp.getActiveSpreadsheet();
    var searchtext = Browser.inputBox("Enter search text");
    var replacetext = Browser.inputBox("Enter replace text");
    var rangeArray = ss1.getSheetByName("Ranges").getRange("A1:A4").getValues(); // I suppose these cells contains A1 notation of the useful ranges
    var daily = ss1.setActiveSheet(ss1.getSheetByName("Daily"));
Logger.log(rangeArray)
    for(var i in rangeArray){
    var formula = daily.getRange(rangeArray[i][0].toString()).getFormula();//
Logger.log(formula)
    var updated =formula.toString().replace(searchtext, replacetext);
Logger.log(updated)    
}
    daily.getRange(rangeArray[i][0].toString()).setFormula(updated);//
} 
```

编辑：删除第一个代码并按照您的评论和示例表替换

# asp.net-web-api - 在启用 Breezejs 的 webapi 控制器中抛出 HttpResponseException

> ID：13487701
> 
> 赞同：2
> 
> 时间：2012-11-21T06:39:00.593
> 
> 标签：asp.net-web-api, breeze

我在服务器端和客户端都使用 BreezeJs。我有以下控制器动作。当找不到产品代码时，我希望获得 404 http 代码。

```
public Product GetProduct(string code)
    {
        var p = _contextProvider.Context.Products.Where(p => p.Code == code).FirstOrDefault();
        if (p == null)
        {
            //does not work because because breeze swallows the exception
            throw new HttpResponseException(HttpStatusCode.NotFound);
        }
        return p;    
    } 
```

以下是回应。HttpResponseException 被 BreezeApi 吞噬。有任何想法吗？先感谢您。

```
{

    "$id": "1",
    "$type": "System.Web.Http.HttpError, System.Web.Http",
    "Message": "An error has occurred.",
    "ExceptionMessage": "Cannot perform runtime binding on a null reference",
    "ExceptionType": "Microsoft.CSharp.RuntimeBinder.RuntimeBinderException",
    "StackTrace": " at CallSite.Target(Closure , CallSite , Object )\r\n at System.Dynamic.UpdateDelegates.UpdateAndExecute1[T0,TRet](CallSite site, T0 arg0)\r\n at Breeze.WebApi.ODataActionFilter.OnActionExecuted(HttpActionExecutedContext actionExecutedContext)\r\n at System.Web.Http.Filters.ActionFilterAttribute.CallOnActionExecuted(HttpActionContext actionContext, HttpResponseMessage response, Exception exception)\r\n at System.Web.Http.Filters.ActionFilterAttribute.<>c__DisplayClass2.<System.Web.Http.Filters.IActionFilter.ExecuteActionFilterAsync>b__0(HttpResponseMessage response)\r\n at System.Threading.Tasks.TaskHelpersExtensions.<>c__DisplayClass41`2.<Then>b__40(Task`1 t)\r\n at System.Threading.Tasks.TaskHelpersExtensions.ThenImpl[TTask,TOuterResult](TTask task, Func`2 continuation, CancellationToken cancellationToken, Boolean runSynchronously)"

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:59:26.840

[Breeze 使用](https://github.com/IdeaBlade/Breeze/blob/master/Breeze.WebApi/ODataActionFilter.cs)的操作过滤器不是为处理`NULL`内容值而设计的。

如果您以这种方式生成未找到响应，则可以解决它，请注意此未找到响应中有一些内容，即字符串消息。

```
public HttpResponseMessage  GetProduct(string code)
{
    var p = _contextProvider.Context.Products.Where(p => p.Code == code).FirstOrDefault();
    if (p == null)
    {
       Request.CreateErrorResponse(HttpStatusCode.NotFound, "Couldn't find the resource");
    }
    Request.CreateResponse(HttpStatusCode.OK, p);
} 
```

我认为这是微风中的一个错误。

`!actionExecutedContext.Response.IsSuccessStatusCode`Breeze的代码可能应该被更改为`TryGetContentValue`不尝试解析错误响应（）。

```
public class ODataActionFilter : ActionFilterAttribute
{
    public override void OnActionExecuting(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        base.OnActionExecuting(actionContext);
    }
    /// <summary>
    /// Called when the action is executed.
    /// </summary>
    /// <param name="actionExecutedContext">The action executed context.</param>
    public override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
    {
        if (actionExecutedContext.Response == null)
        {
            return;
        }

        if(!actionExecutedContext.Response.IsSuccessStatusCode)
        {
            return;
        } 
```

和/或至少在这里进行一个简单的 Null 引用检查：

```
public class ODataActionFilter : ActionFilterAttribute
{
    public override void OnActionExecuting(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        base.OnActionExecuting(actionContext);
    }
    /// <summary>
    /// Called when the action is executed.
    /// </summary>
    /// <param name="actionExecutedContext">The action executed context.</param>
    public override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
    {
        if (actionExecutedContext.Response == null)
        {
            return;
        }

        object responseObject;
        if(!actionExecutedContext.Response.TryGetContentValue(out responseObject))
        {
            return;
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T02:48:12.310

现在应该在微风 0.73.1 中修复此问题。即抛出一个 HttpResponseException 现在会将该异常返回给客户端。

# c# - 使用其中的复选框动态创建gridview

> ID：13487707
> 
> 赞同：0
> 
> 时间：2012-11-21T06:39:50.310
> 
> 标签：c#, asp.net

我想创建一个动态网格视图，并在该网格视图内，我想将该网格视图与一个列表框项绑定。我希望gridview的前两列作为复选框，第三项作为列表框中的项目。我想要这样的东西

```
foreach (ListItem item in Listbox1.Items)
{
    if (item.Selected)
    {
        Listbox2.Items.Add(new ListItem(item.Text, item.Value));
    }
}

GridView gridview1 = new GridView();
foreach(ListItem item in Listbox2.Items)
{
    CheckBoxField chk = new CheckBoxField();

    chk.HeaderText = "Test1";

    gridview1.Columns.Add(chk);

    CheckBoxField chk2 = new CheckBoxField();

    chk.HeaderText = "Test2";

    gridview1.Columns.Add(chk);

    // another columns that displays the item from the list box
    // another column that displays the value of the item of the listbox, but the column is hidden.
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:49:03.790

您只需为 GridView 的 on databound 事件添加一个事件处理程序，这意味着您可以访问当前行、列和该行的数据，然后使用任何选项（文本、选中、禁用等）将控件添加到该行你需要。

# android - 如何在 Android 中使 View 不可见/Gone onBackPressed() 方法？

> ID：13487708
> 
> 赞同：3
> 
> 时间：2012-11-21T06:39:52.683
> 
> 标签：android, android-layout, android-activity, android-tabhost, visibility

我在 Tabhost 中有 5 个活动。（即 MainActivity.java Home.java、NowReading.java、Favorites.java 和 Profile.java）。在主要活动中，我正在加载 tabhost，如下所示。

```
public class MainActivity extends TabActivity {
    TabHost tabHost;
    Context context = MainActivity.this;
    TextView txt_Login;
    View homeTabLayout;
    View reviewLayout;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        txt_Login = (TextView) findViewById(R.id.txt_Login);
        final Spinner spnrLanguage = (Spinner) findViewById(R.id.spnrLanguage);
        final Spinner spnrBrowseBy = (Spinner) findViewById(R.id.spnrBrowseBy);

        tabHost = getTabHost();

        // Android tab
        Intent intentHome = new Intent().setClass(this, Home.class);
        TabSpec tabSpecHome = tabHost
                .newTabSpec("Home")
                .setIndicator("Home",
                        getResources().getDrawable(R.drawable.home))
                .setContent(intentHome);

        tabHost.addTab(tabSpecHome);

        Intent intentNowReading = new Intent().setClass(this, NowReading.class);
        TabSpec tabSpecNowReading = tabHost
                .newTabSpec("Now Reading")

                .setIndicator("Now Reading",
                        getResources().getDrawable(R.drawable.now_reading))
                .setContent(intentNowReading);
        tabHost.addTab(tabSpecNowReading);

        Intent intentFavourite = new Intent().setClass(this, Favorites.class);
        TabSpec tabSpecFavourite = tabHost
                .newTabSpec("Favourite")
                .setIndicator("Favorites",
                        getResources().getDrawable(R.drawable.favorites))
                .setContent(intentFavourite);
        tabHost.addTab(tabSpecFavourite);

        Intent intentProfile = new Intent().setClass(this, Profile.class);
        TabSpec tabSpecProfile = tabHost
                .newTabSpec("Profile")
                .setIndicator("Profile",
                        getResources().getDrawable(R.drawable.profile))
                .setContent(intentProfile);
        tabHost.addTab(tabSpecProfile);
tabHost.setCurrentTabByTag("Home"); 
```

在 Mainactivity.java 中将 Home.java 设置为当前选项卡。作为

```
tabHost.setCurrentTabByTag("Home"); 
```

它在 setContentView 中加载布局 home_activity.xml。

![在此处输入图像描述](../Images/6c844468537fd45c4bb0f2802922f652.png)

这是XML代码

```
 <?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/frameLayout01"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:id="@+id/rel_HomeLayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <GridView
            android:id="@+id/gridview"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:gravity="center"
            android:numColumns="auto_fit"
            android:stretchMode="columnWidth" >
        </GridView>
    </RelativeLayout>

    <ScrollView
        android:id="@+id/scroll_ReviewLayout"
        android:layout_width="fill_parent"
        android:layout_height="match_parent" >

        <RelativeLayout
            android:id="@+id/rel_ReviewLayout01"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <ImageView
                android:id="@+id/img_OverVuBookCoverPhoto"
                android:layout_width="130dp"
                android:layout_height="165dp"
                android:layout_margin="5dp"
                android:adjustViewBounds="true"
                android:background="@drawable/rounded_image_borders"
                android:paddingLeft="5dp"
                android:paddingRight="5dp"
                android:src="@drawable/book1" />

            <TextView
                android:id="@+id/txt_revwBookTitle"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignTop="@+id/img_OverVuBookCoverPhoto"
                android:layout_marginTop="10dp"
                android:layout_toRightOf="@+id/img_OverVuBookCoverPhoto"
                android:text="The Basic Doctrine Of Islam"
                android:textColor="@color/White"
                android:textSize="12sp" />

            <TextView
                android:id="@+id/txt_revwAutherName"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/txt_revwBookTitle"
                android:layout_marginTop="2dp"
                android:layout_toRightOf="@+id/img_OverVuBookCoverPhoto"
                android:text="By: Andrew J Newman"
                android:textColor="@color/SkyBlue"
                android:textSize="11sp" />

            <TextView
                android:id="@+id/txt_PublishDate"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/txt_revwAutherName"
                android:layout_marginTop="2dp"
                android:layout_toRightOf="@+id/img_OverVuBookCoverPhoto"
                android:text="Published: July, 30 2007"
                android:textColor="@color/DarkGray"
                android:textSize="11sp" />

            <RatingBar
                android:id="@+id/ratingbar"
                style="?android:attr/ratingBarStyleSmall"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/txt_PublishDate"
                android:layout_marginBottom="6dp"
                android:layout_marginTop="6dp"
                android:layout_toRightOf="@+id/img_OverVuBookCoverPhoto"
                android:isIndicator="false"
                android:numStars="5"
                android:rating="5"
                android:stepSize="1" />

            <Button
                android:id="@+id/btnOpenBook"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/img_OverVuBookCoverPhoto"
                android:layout_below="@+id/ratingbar"
                android:layout_toRightOf="@+id/img_OverVuBookCoverPhoto"
                android:text="Open Book"
                android:textColor="@color/Black"
                android:textSize="13sp" />

            <ImageButton
                android:id="@+id/btnBack"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBottom="@+id/btnOpenBook"
                android:layout_alignTop="@+id/btnOpenBook"
                android:layout_marginLeft="5dp"
                android:layout_toRightOf="@+id/btnOpenBook"
                android:src="@drawable/pic_btn_back"
                android:textColor="@color/Black"
                android:textSize="14sp" />

            <TextView
                android:id="@+id/txt_BookOverview"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/img_OverVuBookCoverPhoto"
                android:layout_below="@+id/img_OverVuBookCoverPhoto"
                android:layout_marginBottom="10dp"
                android:layout_marginTop="20dp"
                android:text="Book Overview"
                android:textColor="@color/White"
                android:textSize="13sp" />

            <TextView
                android:id="@+id/txt_BookOverviewDetails"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/img_OverVuBookCoverPhoto"
                android:layout_below="@+id/txt_BookOverview"
                android:lineSpacingExtra="4dp"
                android:lines="10"
                android:text="Lorem ipsum dolor sit amet, there was nothing that I can do she was dead, for this reasean I m gonna loose every thing consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat." >
            </TextView>
        </RelativeLayout>
    </ScrollView>

</FrameLayout> 
```

在 Home.java 的 onCreate 方法中，我将 Framelayout 设为不可见/消失（其中包含 Cliked 书的概述）

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.home_activity);

        homeTabLayout = findViewById(R.id.rel_HomeLayout);
        reviewLayout = findViewById(R.id.scroll_ReviewLayout);
        reviewLayout.setVisibility(View.GONE); 
```

现在，当我单击任何一本书时，它使我之前在 onCreat 方法上使用代码不可见/消失的视图可见

```
gridView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int pos,
                    long arg3) {
                // TODO Auto-generated method stub

                Toast.makeText(context, BookTitle.get(pos), Toast.LENGTH_SHORT)
                        .show();
                reviewLayout.setVisibility(View.VISIBLE); 
```

![在此处输入图像描述](../Images/901f04413cd91c8a6bf61fab99340116.png)

注意：这不是新的活动，而是我刚刚在点击事件上制作了一个视图（即 reviewLayout.setVisibility(View.VISIBLE);）。

*   我想在 onBackPressed() 方法上使这个视图不可见/消失。
*   我应该在哪里调用这个方法，在 MainActivity.java 或 Home.java 文件中？
*   如果我在 MainActivity.java 中调用此方法，则会引发 nullPointerException。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T06:53:07.330

您可以覆盖后退按钮方法

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        // You can call view.setVisiblility(View.GONE) if you want to remove it from the layout, or view.setVisibility(View.INVISIBLE) if you just want to hide it.
        view.setVisiblility(View.GONE); // or view.setVisibility(View.INVISIBLE);
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T06:55:42.777

您可以**覆盖**BackPress 方法...借助此方法您可以**隐藏布局或视图...**

```
@Override
public void onBackPressed() {
     super.onBackPressed();
               // Invisible or Gone Your Views here....
    } 
```

# arrays - 使用键名从数组中获取值

> ID：13487713
> 
> 赞同：0
> 
> 时间：2012-11-21T06:40:06.220
> 
> 标签：arrays

我有下面提到的编码。我想从这个数组中获取 response_text 和 response_code 的值。任何人都可以帮助我如何获取特定的键值。

```
stdClass Object
(
    [_OPS_version] => 0.9
    [protocol] => XCP
    [request_response_time] => 0.441
    [response_text] => Command completed successfully
    [is_search_completed] => 1
    [action] => REPLY
    [attributes] => stdClass Object
        (
            [suggestion] => stdClass Object
                (
                    [count] => 0
                    [response_text] => Missing tld list, supported tlds are [.com,.net,.org,.info,.biz,.us,.mobi]
                    [response_code] => 500
                    [is_success] => 0
                )

        )

    [response_code] => 200
    [is_success] => 1
) 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:45:53.900

使用命名空间 System.Reflection，尝试使用 PropertyInfo[] info = stdClass.GetProperies()，然后遍历每个属性并在调试模式下检查值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:25:34.870

在 php 中，我们也可以获取下面提到的值

$check=$results->{'attributes'}->suggestion->response_text;

参考： [http ://bytes.com/topic/php/answers/161452-stdclass-object-get_object_vars](http://bytes.com/topic/php/answers/161452-stdclass-object-get_object_vars)

# asp.net-mvc - 如何使用asp.net自动调整csv文件中的列

> ID：13487714
> 
> 赞同：1
> 
> 时间：2012-11-21T06:40:08.180
> 
> 标签：asp.net-mvc

我需要将数据表中的值导出为 csv 格式。我的代码工作正常，但由于列值很大，它归结为下一行。因此完全对齐正在改变。下面是我的代码。请帮忙。

```
 System.Data.DataTable dtMainSQLData = new System.Data.DataTable();

        da.Fill(dtMainSQLData);

        // Create the CSV file to which grid data will be exported.
        string filename = "Report";
        string test_Filepath = "C:\\Desktop\\";
        string file1 = filename + "_" + String.Format("{0:dd}", DateTime.Today) + String.Format("{0:MMMM}", DateTime.Today) + String.Format("{0:yyyy}", DateTime.Today) + ".csv";
        string new1 = test_Filepath + file1;
        FileInfo file = new FileInfo(new1);
        if (file.Exists == true)
            file.Delete();

    StreamWriter sw = new StreamWriter(new1, false);

    //First we will write the headers.

    int iColCount = dtMainSQLData.Columns.Count;

    for (int i = 0; i < iColCount; i++)
    {
        sw.Write(dtMainSQLData.Columns[i]);
        if (i < iColCount - 1)
        {
            sw.Write(",");
        }
    }
    sw.Write(sw.NewLine);

    // Now write all the rows.

    foreach (DataRow dr in dtMainSQLData.Rows)
    {
        for (int i = 0; i < iColCount; i++)
        {
            if (!Convert.IsDBNull(dr[i]))
            {
                sw.Write(dr[i].ToString());
            }
            if (i < iColCount - 1)

            {
                sw.Write(",");
            }
        }
        sw.Write(sw.NewLine);
    }
    sw.Close();
    Environment.Exit(0);
} 
```

# sql - 如何将行中的数据转换为列形式？

> ID：13487716
> 
> 赞同：0
> 
> 时间：2012-11-21T06:40:20.677
> 
> 标签：sql, oracle

我有一个员工表，其中包含 emp_id、headcount、fte、effective_date、status、status_2 等列。

我需要创建一个以起始日期和结束日期为输入的报告。这将根据有效日期进行检查。

如果输入是从日期 = 2012 年 1 月 1 日到结束日期 2013 年 2 月 25 日，则结果应以如下格式显示，如下图所示。

![在此处输入图像描述](../Images/2eecf9668680d0097e9507cf93471915.png)

数字 1,0,10,20 表示指定月份的总人数。

例如，如果 3 月份有 5 名员工的生效日期，则 3 月份的列中将有 5 名，然后这 5 名员工将根据员工的 status 和 status_2 列再次拆分。

例如，在这 5 个中，2 个可能是状态 A，状态_2 A1 3 可能是状态 A，状态_2 A2

如何编写查询以获取这种格式的结果？

下面是员工表的 DDL。

```
--------------------------------------------------------
--  DDL for Table BI_EMPLOYEE
--------------------------------------------------------

CREATE TABLE "HEADCOUNT_BI"."BI_EMPLOYEE" 
(   
    "EMP_ID" NUMBER(*,0) NOT NULL ENABLE, 
    "STATUS" NUMBER(*,0), 
    "STATUS_2" NUMBER(*,0), 
    "FTE" FLOAT(126), 
    "EFFECTIVE_DATE" DATE, 
    "HEADCOUNT" NUMBER(*,0), 
    CONSTRAINT "HEADCOUNT_EMPLOYEE_BI_PK" PRIMARY KEY ("EMP_ID") ENABLE
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:16:16.850

您应该[透视](http://www.oracle.com/technetwork/articles/sql/11g-pivot-097235.html)数据。使用 Oracle 11：

```
SELECT 
   *
FROM   
   ( select 
       status, status_2,to_char(EFFECTIVE_DATE,  'Mon''DD') as EFFECTIVE_DATE,
       sum( HEADCOUNT ) as HEADCOUNT
     from "BI_EMPLOYEE" 
     group by status, status_2,EFFECTIVE_DATE
   )
PIVOT  
   (
    sum(HEADCOUNT) 
    for  EFFECTIVE_DATE in  ( 'Jan''12', 'Feb''12' )
   ) 
```

请注意，数据透视字段列表必须是一个常量。

**已编辑，此时我看到您按月而不是按天汇总**：

```
SELECT 
   *
FROM   
   ( select 
       status, status_2,to_char(EFFECTIVE_DATE,  'Mon''YY') as EFFECTIVE_DATE,
       sum( HEADCOUNT ) as HEADCOUNT
     from "BI_EMPLOYEE" 
     group by status, status_2, to_char(EFFECTIVE_DATE,  'Mon''YY') 
   )
PIVOT  
   (
    sum(HEADCOUNT) 
    for  EFFECTIVE_DATE in  ( 'Jan''12', 'Feb''12' )
   ) 
```

您可以了解如何[在 Oracle 以前的版本中进行数据透视。](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3ap11_question_id:766825833740)

# android - 我如何调用方法在 SQLite 中插入数据

> ID：13487724
> 
> 赞同：0
> 
> 时间：2012-11-21T06:40:51.593
> 
> 标签：android, database

> **可能重复：**
> [插入 SQLite 数据库时出错](https://stackoverflow.com/questions/6802362/error-inserting-in-sqlite-database)

嗨.............我是 Android 新手，现在我正在使用 android 数据库。我想通过调用一个方法在我的数据库中插入一些硬编码的值。

```
 public void insertdata(String ti, String de) {
    ContentValues userdetailValues = new ContentValues(); 
    userdetailValues.put("tick", ti);
    userdetailValues.put("des",de);
    dh.insert(DatabaseHelper.TABLE_NAME, null, userdetailValues);
    } 
```

上述方法是在 onCreate() 块上的活动中定义的。当我要在 onCreate() 块中调用此方法时

```
 insetdata(aaa,bbb); 
```

然后它对我显示一个错误-

```
 aaa can not be resolve to variable and same for bbb. 
```

正如我所说，我是 Android 新手，很害怕，在这种情况下，如果这是小问题，请帮助我，我只是一个学习者。在此先感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:43:43.560

您正在函数中传递字符串值，因此请尝试使用双引号或创建 aaa 和 bbb 字符串变量并在其中分配一些值。

```
insetdata("aaa","bbb"); 
```

或者

```
String aaa = "test", bbb = "testy";
insetdata(aaa,bbb); 
```

**编辑 -**您需要在插入值之前初始化**dh**对象并打开数据库，并在使用后关闭它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T05:22:13.217

您可能对这些行有问题

```
userdetailValues.put("tick", ti);
userdetailValues.put("des",de); 
```

而不是使用“tick”和“des”，而是使用必须添加数据的列名。你的代码可以像

```
 public void insertdata(String ti, String de) {
ContentValues userdetailValues = new ContentValues(); 
userdetailValues.put(DatabaseHelper.C1, ti);
userdetailValues.put(DatabaseHelper.C2,de);
dh.insert(DatabaseHelper.TABLE_NAME, null, userdetailValues);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T06:42:59.067

这是因为您传递给函数的变量在该范围内无效。您是否尝试插入任何硬编码值。

像：

```
 insetdata("aaa","bbb"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T06:47:30.700

试试这个

```
public void addContact(Contact contact) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, contact.getName()); // Contact Name
        values.put(KEY_PH_NO, contact.getPhoneNumber()); // Contact Phone Number

        // Inserting Row
        db.insert(TABLE_CONTACTS, null, values);
        db.close(); // Closing database connection
    } 
```

# iphone - iTunes 应用程序被拒绝

> ID：13487729
> 
> 赞同：5
> 
> 时间：2012-11-21T06:41:14.100
> 
> 标签：iphone, ios, ios6

我的应用程序有一个用户登录的登录屏幕。我们可以在 iPhone4、iPod 4、iPad 2 和 iPhone5 模拟器上登录。但是当我们将它提交到 iTunes 商店时，应用程序被拒绝了。苹果提到他们无法登录该应用程序。

我对密码进行了 HMAC-SHA 256 加密，并且在登录时我发送了加密的密码。那么，Apple 为 iPhone5 实施了哪些不允许服务接受加密数据的措施。

我没有 iPhone5，也不想买 iPhone5，因为它太贵了。谁能帮我这个。

这是我的代码：

```
NSMutableURLRequest *theRequest = 
[NSMutableURLRequest requestWithURL:[NSURL URLWithString:[url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:60.0];

    //do post request for parameter passing 

    [theRequest setHTTPMethod:@"POST"];

    //set the content type to JSON

    [theRequest setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

[theRequest addValue:userName forHTTPHeaderField:@"Username"];

[theRequest addValue:sha256(passWord) forHTTPHeaderField:@"Password"]; 
```

![在此处输入图像描述](../Images/ae574b423223fa7c2b33dd0ff54a7b16.png)

以下是来自苹果的评论：

> 我们发现您的应用在运行 iOS 6.0.1 的 iPhone 5 上在 Wi-Fi 和蜂窝网络上进行审查时出现一个或多个错误，这不符合 App Store 审查指南。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T11:17:27.047

当我听到不同设备的问题时，我总是感到怀疑，尤其是当它们中有网络内容时。您是否曾经在困难的网络条件下尝试过您的应用程序？您是否正确处理网络超时？您是否使用队列来正确分派所有请求？您确定并发请求会按预期响应吗？
您可以使用 Network Link Conditioner，您可以从 Apple 网站免费下载它并测试最坏的情况。我知道这些只是要点，但我希望它们可以帮助你。
乔安德里亚

[更新]
你添加了可达性类？？？？？？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T09:34:30.977

我们最近（2015 年 3 月 24 日）遭受了同样的拒绝，我们的解决方案并不完美，但希望它可以指导帮助人们解决此类问题的方法。

苹果的评论是：

> 当我们在运行 iOS 8.2 的 iPad 和运行 iOS 8.2 的 iPhone 上在 Wi-Fi 和蜂窝网络上进行审查时，我们在您的应用程序中发现了一个或多个错误。请在设备上运行您的应用以识别问题，然后修改并重新提交您的应用以供审核。

我们的应用程序是一个简单的应用程序，只需下载一个文件并在 Webview 上打开它。

在我们的情况下，我认为我们不能做更多并且无法重现错误，所以我们只需通过以下两件事来调整代码（然后成功使应用程序转向“准备出售”）：

> 1.添加“活动指示器”以通知用户文件下载过程仍在进行中。2.setConnection timeoutInterval 来处理等待时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T07:06:52.883

Apple 至少以一种破坏现有应用程序和代码的方式更改了 iOS 6.0 的 NSURLRequest（我认为这是一个主要错误，并且已被 Apple 记录）。

你在 iOS 6.0 模拟器上测试过吗？由于 Apple 的代码更改，我已经看到一些运行多年的应用程序停止在 iOS 6 上运行。

（我看到的主要是请求永远不会从手机发送，因此它会在大约 60 秒后超时）

# c# - 在域模型中包含数据模型是一种好方法吗？

> ID：13487730
> 
> 赞同：1
> 
> 时间：2012-11-21T06:41:17.157
> 
> 标签：c#, design-patterns

我的应用程序中有一个单独的域模型和数据模型，域模型专注于业务逻辑，数据模型用于存储库。

我想将数据模型映射到域模型，是不是让域模型包含数据模型的好方法，比如

```
class DataModel
{
    public int ID { get; set; }
}

class DomainModel
{
   private DataModel dataModel;

   public int ID 
   { 
     get { return dataModel.ID; } 
     set { dataModel.ID = value; }
   }

   // other operations
} 
```

还有其他很好的模式可以将数据模型映射到域模型。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:02:19.233

通常我在领域模型中设计一个接口，并将它应用到我的数据模型中的对象上。

# android - 图片未通过android webview加载

> ID：13487734
> 
> 赞同：3
> 
> 时间：2012-11-21T06:41:38.390
> 
> 标签：android, android-webview, jpeg, android-image

我有一个加载网页的 webview，有时在这个网页中有图片。但是，我遇到了 2 个图像无法加载的实例，它们各自给出不同的结果。

结果 #1：网页已加载但图片未加载（使用的格式：.jpeg）

结果#2：网页已加载，但图片未加载。但是，在图像应该在的位置，有一个带问号的图标。（使用格式：.jpg）

我有其他网页也有相同格式和来自相同目录的图像并且工作正常。所有图像均取自另一个网站服务器上的同一位置。

我已经在各种网站上阅读过使用 loadDataWithBaseURL() 的内容，它们给了我相同的结果。

我现在不知道该怎么办。我需要以某种格式和某些设置保存图像吗？或者还有什么我需要做的。

更新：我相信图像的格式和大小并不重要，因为我尝试使用 Dolphin 和默认网络浏览器访问网页，但结果是相同的。但是，如果我使用 Opera Web Browser，它可以显示图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T03:14:44.370

我们发现我们的 JPG 图像是 32 位深度的。一旦我们使用 GIMP 将其重新导出为 24 位深度，图像就能够显示出来。

此外，如果图像是 PNG 格式，即使它是 32 位深度，它也应该可以工作。

希望这可以帮助其他人。

# javascript - 使用 Struts2-jQuery 标签的下拉检查列表

> ID：13487741
> 
> 赞同：0
> 
> 时间：2012-11-21T06:42:03.517
> 
> 标签：javascript, jquery, drop-down-menu, struts2

我需要在 Struts2 - jQuery 项目中实现多选下拉列表。

我正在使用 sj:select 标记从使用 AJAX 和 JSON 的操作类中加载数据。

但是，我需要列表是一个下拉列表，并且可以选择多选。

我尝试使用[http://code.google.com/p/dropdown-check-list/](http://code.google.com/p/dropdown-check-list/)但这对 sj:select 标签不起作用。

这是我的代码：-

```
 <s:url var="list2URL" action="licenseGeneration" />

<s:form id="subgroupForm" action="licenseGeneration" method="get"
    theme="css_xhtml">
    <table>
        <tr>
            <td>
                <div>Select Product Family:</div>
            </td>
            <td><sj:select href="%{list2URL}" id="selectedSubgroup"
                    onChangeTopics="featuresList,productsList" name="selectedSubgroup"
                    list="subgroups" emptyOption="false" headerKey="-1"
                    headerValue="Please select a Sub Group">
                </sj:select></td>
        </tr>
        <tr>
            <td>
                <div>Select Product Name:</div>
            </td>
            <td>
                <div>
                    <sj:select href="%{list2URL}" id="selectWithReloadTopic"
                        formIds="subgroupForm" reloadTopics="productsList"
                        name="products" list="productLevelSKUs" emptyOption="false"
                        headerKey="-1" headerValue="Please Select a Product">
                    </sj:select>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div>Select Features:</div>
            </td>
            <td>
                <div>
                    <sj:select href="%{list2URL}" id="selectWithReloadTopic2"
                        formIds="subgroupForm" reloadTopics="featuresList"
                        name="features" list="featureLevelSKUs" emptyOption="false"
                        headerKey="-1" headerValue="Shift select for multiple features"
                        multiple="true">
                    </sj:select>
                </div>
            </td>
        </tr>
    </table>
</s:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:00:02.937

只需使用简单的 HTML，如下所示即可

```
 <select multiple="multiple">
      <option value="volvo">Volvo</option>
      <option value="saab">Saab</option>
      <option value="opel">Opel</option>
      <option value="audi">Audi</option>
    </select> 
```

# sqlite - 在黑莓中查询数据库

> ID：13487751
> 
> 赞同：1
> 
> 时间：2012-11-21T06:43:20.493
> 
> 标签：sqlite, blackberry, geolocation, gps, location

我正在开发一个获取当前位置坐标的 BlackBerry 应用程序。我需要将这些坐标（纬度和经度）传递到数据库并查询与这些坐标对应的街道、城市和国家。我不知道如何做到这一点。我在谷歌上搜索了一些教程、示例和文章，但徒劳无功。谁能指导我正确的方向如何做到这一点？

我有一个包含所有数据的文本文件。我应该如何创建数据库并使用文本文件中的数据填充表格？要创建的这个数据库应该与应用程序一起打包，而不是在 SD 卡中。然后我想相应地查询这个数据库并获取与这些坐标对应的街道、城市和国家。

# c# - 二进制转十进制

> ID：13487755
> 
> 赞同：0
> 
> 时间：2012-11-21T06:43:27.247
> 
> 标签：c#, asp.net, binary, decimal

我有一个要求，我从字符串“111111”生成二进制数并将其转换为十进制数以存储在数据库中。这个二进制数的每个数字（即 1/0）表示用户对应用程序中不同模块的不同访问权限。随着模块数量的增加，这个二进制数的位数也会增加。当二进制数达到 64 的长度（即 64 乘以 1s）时，我能够使用将其转换为十进制数

```
Int64 dec =Convert.ToInt64(binVal,2); 
```

它工作得很好。但是当长度增加到 65 时，它给出了溢出异常：对于 UInt64，值要么太大要么太小。任何人都可以提出任何可能的解决方案，我可以将这个长度为 65 的二进制数转换为十进制数或任何其他形式以将其保存在数据库中。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:45:23.387

要将长度为 65 或更长的二进制数转换为十进制/无论您必须编写如下方法：

```
public BigInteger FromBinaryString(string binary)
{
    if (binary == null)
        throw new ArgumentNullException();
    if (!binary.All(c => c == '0' || c == '1'))
        throw new InvalidOperationException();

    BigInteger result = 0;
    foreach (var c in binary)
    {
        result <<= 1;
        result += (c - '0');
    }
    return result;
} 
```

它使用[`System.Numerics.BigInteger`](http://msdn.microsoft.com/en-us/library/dd268287%28v=VS.100%29.aspx)结构来保存大数字。然后您可以将其显式转换为`decimal`（或字节数组）并将其存储在您的数据库中：

```
var bigInteger = FromBinaryString("100000000000000000000000000000000000000000000000000000000000000000");
// to decimal
var dec = (decimal)bigInteger;
// to byte array
var data = bigInteger.ToByteArray(); 
```

**编辑**：如果您在 NET 3.5 下，只需使用`decimal`而不是`BigInteger`（也将左移运算符替换为小数`<<`的乘法运算符）：`*`

```
public decimal FromBinaryString(string binary)
{
    if (binary == null)
        throw new ArgumentNullException();
    if (!binary.All(c => c == '0' || c == '1'))
        throw new InvalidOperationException();

    decimal result = 0;
    foreach (var c in binary)
    {
        result *= 2;
        result += (c - '0');
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T07:20:01.763

在 SQL Server 或 C# 中，普通数字类型不适用于超过 64 位的数据。

您的其他选择包括：

*   一个`uniqueidentifier`（GUID）字段，最多可提供 128 位。
*   一个`binary`或`varbinary`字段，它可以用于你可以想象的尽可能多的位。
*   每个访问权限的单独位域。SQL Server 会自动将它们打包成字节。如果您将直接查询数据而不仅仅是持久化数据，这将是一个很好的选择。
*   如前所述，一个字符串，但这将是对空间的严重浪费。

# c# - 查找具有不同类型值的两个字典的并集

> ID：13487759
> 
> 赞同：2
> 
> 时间：2012-11-21T06:44:11.830
> 
> 标签：c#, linq, generics, collections, covariance

### 问题

```
using System.Collections.Generic;
using System.Linq; 
```

给定一个基类和 2 个派生类：

```
class Base{}
class Derived0 : Base{}
class Derived1 : Base{} 
```

我有两个类型的字典：

```
IDictionary<String, Derived0> d0 = ...;
IDictionary<String, Derived1> d1 = ...; 
```

我想找到两个字典的并集，它应该有 type `IDictionary<String, Base>`。（我已经知道两个字典中的键是唯一的，所以我不关心重复时的行为。）

* * *

### 尝试

如果它们是同一类型[，我可以使用](https://stackoverflow.com/questions/4903784/combine-two-dictionaries-with-linq)

```
var union = d0.Concat(d1); 
```

但这会产生错误（使用编译`dmcs`）：

```
Test.cs(15,20): error CS0411: The type arguments for method `System.Linq.Queryable.Concat<TSource>(this System.Linq.IQueryable<TSource>, System.Collections.Generic.IEnumerable<TSource>)' cannot be inferred from the usage. Try specifying the type arguments explicitly 
```

如果我明确给出`Base`作为类型参数：

```
IDictionary<string, Base> union = d0.Concat<Base>(d1); 
```

它仍然不起作用：

```
Test.cs(15,42): error CS1928: Type `System.Collections.Generic.IDictionary<string,Derived0>' does not contain a member `Concat' and the best extension method overload `System.Linq.Enumerable.Concat<Base>(this System.Collections.Generic.IEnumerable<Base>, System.Collections.Generic.IEnumerable<Base>)' has some invalid arguments
/usr/lib/mono/gac/System.Core/4.0.0.0__b77a5c561934e089/System.Core.dll (Location of the symbol related to previous error)
Test.cs(15,42): error CS1929: Extension method instance type `System.Collections.Generic.IDictionary<string,Derived0>' cannot be converted to `System.Collections.Generic.IEnumerable<Base>' 
```

原则上，方差在这里应该无关紧要，因为我正在创建一个新的字典对象，但我不知道如何在类型系统中表示它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T06:58:22.007

`IDictionary<TKey, TValue>`并且`KeyValuePair<TKey, TValue>`不是变体......所以：

```
var sequence0 = d0.Select(kvp => new KeyValuePair<String, Base>(kvp.Key, kvp.Value));
var sequence1 = d1.Select(kvp => new KeyValuePair<String, Base>(kvp.Key, kvp.Value));
var dictionaryOfBase = sequence0.Concat(sequence1).ToDictionary(kvp => kvp.Key, kvp => kvp.Value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:07:22.897

您可以使用这些扩展方法：

```
 class Base { }
    class Derived0 : Base { }
    class Derived1 : Base { }

    class Program {
        static void Main(string[] args) {
            var d0 = new Dictionary<string, Derived0>();
            var d1 = new Dictionary<string, Derived1>();
            var b = d0.Merge<string, Derived0, Derived1, Base>(d1);
        }
    }

    public static class DictionaryExtensions {
        public static Dictionary<TKey, TBase> Merge<TKey, TValue1, TValue2, TBase>(this IDictionary<TKey, TValue1> thisDictionary, IDictionary<TKey, TValue2> thatDictionary)
            where TValue1 : TBase
            where TValue2 : TBase {
            var resultDictionary = new Dictionary<TKey, TBase>();
            resultDictionary.AddRange(thisDictionary);
            resultDictionary.AddRange(thatDictionary);

            return resultDictionary;
        }

        public static void AddRange<TKey, TBase, TValue>(this IDictionary<TKey, TBase> dictionary, IDictionary<TKey, TValue> dictionaryToAdd) where TValue : TBase {
            foreach (var kvp in dictionaryToAdd) {
                dictionary.Add(kvp.Key, kvp.Value);
            }
        }
    } 
```

# jquery - 对 jquery 数据表列进行排序，不包括第一条记录

> ID：13487761
> 
> 赞同：0
> 
> 时间：2012-11-21T06:44:20.677
> 
> 标签：jquery, css, datatable

我正在使用 jquery 数据表。在表单加载时，它显示用户列表。我想按升序对姓氏进行排序。并且一个管理员用户记录必须首先是初始加载。

我试图在 desc 中设置姓氏升序和类型，但管理员在最后一行

```
"aaSorting": [[2,'asc']],
  "aoColumns": [ /*Member id*/  {sClass: "displayHide"},
 /*First Name*/  {sClass: "alignCenter "},
 /*Last Name*/  {sClass: "alignCenter "},     
 /*Type*/  {sClass: "alignCenter "}, 
```

是否有任何 jquery 属性可用于首先保留管理员记录。

**编辑**

添加了示例示例

```
FIRSTNAME LASTNAME TYPE

p          m        Admin    
q          a        user
r          c        user
s          d        user 
```

管理员类型仅存在一条记录。剩下的是用户类型。管理员必须在第一位，其余记录按姓氏排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-22T13:33:58.810

您可以将其包装在“thead”元素中，这应该防止对顶部进行排序，同样适用于底行，将其包装在“tfoot”元素中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:51:37.167

我认为有几个选择。

1) 只需`"aaSortingFixed": [[3, 'asc']]`先使用按类型锁定排序。请记住，列表总是先按类型排序，然后按姓氏排序。

2）有一个隐藏列（例如，此行是管理员）并用于`"aaSortingFixed"`按该列排序。

# c++ - 在 C++ 应用程序中更改鼠标光标

> ID：13487762
> 
> 赞同：3
> 
> 时间：2012-11-21T06:44:22.720
> 
> 标签：c++, graphics

我正在使用`OpenGL, GLEW, GLUT, libtess2 and cairo`用于图形的框架构建应用程序，并使用相同的框架制作窗口和动画。我需要更改鼠标光标，并且正在寻找一种在 C++ 应用程序中执行此操作的方法。

我目前正在Unix（Ubuntu 12.10），Code::Blocks IDE上开发，项目属性是：

类型：控制台应用程序

构建应用程序：所有平台

提前致谢

# java - instanceof 如何在接口上工作

> ID：13487765
> 
> 赞同：58
> 
> 时间：2012-11-21T06:44:36.400
> 
> 标签：java, interface, instanceof

`instanceof`可用于测试对象是给定类的直接实例还是下降实例。`instanceof`即使接口不能像类一样实例化，也可以与接口一起使用。谁能解释一下如何`instanceof`工作？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-11-21T06:51:28.287

首先，我们可以像这样存储`instances`实现特定`interface`的`interface reference variable`类。

```
package com.test;

public class Test implements Testable {

    public static void main(String[] args) {

        Testable testable = new Test();

        // OR

        Test test = new Test();

        if (testeable instanceof Testable)
            System.out.println("instanceof succeeded");
        if (test instanceof Testable)
            System.out.println("instanceof succeeded");
    }
}

interface Testable {

} 
```

即，任何实现特定接口的运行时实例都将通过`instanceof`测试

**编辑**

和输出

```
instanceof succeeded
instanceof succeeded 
```

@RohitJain

您可以使用像这样的匿名内部类来创建接口实例

```
Runnable runnable = new Runnable() {

    public void run() {
        System.out.println("inside run");
    }
}; 
```

并且您测试实例是接口类型，使用`instanceof`这样的运算符

```
System.out.println(runnable instanceof Runnable); 
```

结果是“真”

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-21T06:47:31.107

`object instanceof object_interface`将产生`true`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-21T06:48:05.147

您`instanceof`对 a`reference`进行`instance`检查，它会检查该`instance`特定`reference`对象指向的类型。

现在，由于您可以创建一个 的引用`interface`，它指向一个实现的实例（与指向 的`class`概念相同）。因此，您可以对其进行检查。`Super class reference``subclass instance``instanceof`

**例如：-**

```
public interface MyInterface {
}

class ImplClass implements MyInterface {

    public static void main(String[] args) {
        MyInterface obj = new ImplClass();

        System.out.println(obj instanceof ImplClass);   // Will print true.
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-21T06:57:03.190

**-**首先instanceof用于比较持有对象的对象引用变量是否属于某种类型。

**例如：**

```
public void getObj(Animal a){       // a is an Object Reference Variable of type Animal

    if(a instanceof Dog){

       }

} 
```

**-**在 的情况下`interface`，它可以与`class`哪个**实现**`instanceof`一起使用。

**例如：**

```
public interface Brush{

  public void paint();
}

public class Strokes implements Brush{

       public void paint(){

          System.out.println("I am painting");

    }

}

public class Test{

  public static void main(String[] args){

          Brush b = new Strokes();

         if(b instanceof Strokes){

           b.paint();
       }
  }

} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-03-10T19:32:39.460

```
public class Programmers {

    public static boolean hasReallife(Programmer programmer) {
        return programmer instanceof Reallife; ══════════════════╗
    }                                                            ║
                                                                 ║
}                                                                ║
                                                                 ▼
public class ReallifeProgrammer extends Programmer implements Reallife {

    public ReallifeProgrammer() {
        diseases.get("Obesity").heal();
        diseases.get("Perfectionism").heal();
        diseases.get("Agoraphobia").heal();
    }

    @Override
    public void goOut() {
        house.getPC().shutDown();
        wife.argue();
    }

    @Override
    public void doSports() {
        goOut();
        BigWideWorld.getGym("McFit").visit();
    }

    @Override
    public void meetFriends() {
        goOut();
        BigWideWorld.searchFriend().meet();
    }

} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-12-15T07:08:31.530

您好下面将为instanceOf产生True：

```
•   If S is an ordinary (nonarray) class, then:
    •   If T is a class type, then S must be the same class as T, or S must be a subclass of T;
    •   If T is an interface type, then S must implement interface T.
•   If S is an interface type, then:
    •   If T is a class type, then T must be Object.
    •   If T is an interface type, then T must be the same interface as S or a superinterface of S.
•   If S is a class representing the array type SC[], that is, an array of components of type SC, then:
    •   If T is a class type, then T must be Object.
    •   If T is an interface type, then T must be one of the interfaces implemented by arrays (JLS §4.10.3).
•   If T is an array type TC[], that is, an array of components of type TC, then one of the following must be true:
         - TC and SC are the same primitive type. 
         - TC and SC are reference types, and type SC can be cast to TC by these run-time rules 
```

请转到此链接以获得清晰的想法：

[http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.instanceof](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.instanceof)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-14T05:57:48.557

我知道这是一个非常古老的问题，有很多很好的答案。我只想指出理解这个运算符的最简单（至少对我来说最简单）的方法。

如果`o instanceof t`返回`true`，则 `t castedObj = (t) o;`不会抛出`ClassCastException`，`castedObj`也不会`null`。

如果您想`castedObj`稍后访问字段或方法，这很重要/有用 - 您知道通过`instanceof`检查，以后您将永远不会遇到问题。

唯一的缺点是这可以用于没有泛型的类型。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-11-21T06:47:43.573

instanceof 运算符将告诉您第一个参数是否是实现第二个参数的对象。不明白为什么不能直接实例化接口很重要。

```
Integer num = 1;
if (num instanceof Number) {
  System.out.println("An integer is a number!");
} 
```

这就是你所需要的。

# jquery - 如何使用 JQuery 将 PDF 转换为 HTML

> ID：13487766
> 
> 赞同：1
> 
> 时间：2012-11-21T06:44:40.027
> 
> 标签：jquery, html, pdf

我有一个 PDF 文件，我想使用 JQuery 将其转换为 HTML。

可能吗？如果是，我应该使用什么库或需要任何自定义 jquery 代码？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:54:08.247

这在当时用 jQuery 是不可能的，但是正在开发诸如[pdf.js 之](http://mozilla.github.com/pdf.js/)类的东西，它可以在浏览器中将 pdf 文档转换为 html，但它似乎还不适用于所有 pdf 文件，并且有还有一些错误需要解决。

在服务器端也有很多解决方案，[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)似乎是生成与原始文档最相似的 HTML 的解决方案，因为它直接使用 webkit 渲染引擎，但它确实需要在服务器上进行一些设置。

[SomePDF](http://www.somepdf.com/some-pdf-to-html-converter.html)、[IntraPDF](http://www.intrapdf.com/convert_pdf_to_html.htm)和可能最广泛使用的[pdftohtml](http://pdftohtml.sourceforge.net/)也在服务器端执行此操作，并且 Adob​​e Acrobat Pro 可以选择将 pdf 文件另存为 html。

# sql-server - 在时间间隔中选择值

> ID：13487767
> 
> 赞同：0
> 
> 时间：2012-11-21T06:44:58.293
> 
> 标签：sql-server, sql-server-2008, query-optimization

在我的应用程序中，我只想得到`number of sales in a day by diiferent time interval`

像

```
-----------------------------------------------------
Interval                     |  Count
-----------------------------------------------------
00:30 to 0:130               |  3
01:30 to 10:30               |  4
02:30 to 03:30               |  5
.. 
..
12:30 to 00:30               |  10
----------------------------------------------------- 
```

我尝试了如下查询

```
select '00:30 to 01:30' as intrval , COUNT(*) AS 'count' from Pharmacy.tblSalesHdr  SH
where CAST(SH.created_Date AS TIME)  BETWEEN '00:30' AND '00:30'

UNION ALL

select '01:30 to 02:30' as intrval , COUNT(*) AS 'count' from Pharmacy.tblSalesHdr  SH
where CAST(SH.created_Date AS TIME)  BETWEEN '01:30' AND '02:30'

UNION ALL

select '02:30 to 03:30' as intrval , COUNT(*) AS 'count' from Pharmacy.tblSalesHdr  SH
where CAST(SH.created_Date AS TIME)  BETWEEN '02:30' AND '03:30'

and so on... 
```

我只是想知道是否有任何`better and optimized method`实现这一目标。如果有人知道请分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T07:06:42.503

你可以这样做：创建一个临时表，定义你想要的时间间隔，然后将它加入到你的销售表中。您甚至可以为该任务创建一个永久表。

```
 CREATE TABLE #Intervals (INTERVAL VARCHAR(20), FromTime TIME, ToTime TIME)
  INSERT INTO #Intervals (INTERVAL, FromTime, ToTime) VALUES  ('00:30 to 01:30', '00:30:00', '01:30:00')
  INSERT INTO #Intervals (INTERVAL, FromTime, ToTime) VALUES  ('01:30 to 02:30', '01:30:00', '02:30:00')
  INSERT INTO #Intervals (INTERVAL, FromTime, ToTime) VALUES  ('02:30 to 03:30', '02:30:00', '03:30:00')
  INSERT INTO #Intervals (INTERVAL, FromTime, ToTime) VALUES  ('03:30 to 04:30', '03:30:00', '04:30:00')
  INSERT INTO #Intervals (INTERVAL, FromTime, ToTime) VALUES  ('04:30 to 05:30', '04:30:00', '05:30:00')
  INSERT INTO #Intervals (INTERVAL, FromTime, ToTime) VALUES  ('05:30 to 06:30', '05:30:00', '06:30:00')
  INSERT INTO #Intervals (INTERVAL, FromTime, ToTime) VALUES  ('06:30 to 07:30', '06:30:00', '07:30:00')
  INSERT INTO #Intervals (INTERVAL, FromTime, ToTime) VALUES  ('07:30 to 08:30', '07:30:00', '08:30:00')
  INSERT INTO #Intervals (INTERVAL, FromTime, ToTime) VALUES  ('08:30 to 09:30', '08:30:00', '09:30:00')
  INSERT INTO #Intervals (INTERVAL, FromTime, ToTime) VALUES  ('09:30 to 10:30', '09:30:00', '10:30:00')
  -- etc...

  SELECT I.Interval, SUM(case when SH.created_Date IS NULL THEN 0 ELSE 1 END) 
  FROM #Intervals I
  LEFT JOIN Pharmacy.tblSalesHdr SH 
      ON CAST(SH.created_Date AS TIME) >= I.FromTime 
      AND CAST(SH.created_Date AS TIME) < I.ToTime
  GROUP BY I.Interval

  DROP TABLE #Intervals 
```

# matlab - Matlab - [h,bins]=hist(数据)

> ID：13487768
> 
> 赞同：-1
> 
> 时间：2012-11-21T06:45:06.060
> 
> 标签：matlab, histogram

我有如下所示的直方图：![在此处输入图像描述](../Images/a183209fc5df75432fc6b4fd868d2889.png)

为了获取图像数据，我使用了以下`matlab`命令：`[h,bins]=hist(data)`

我得到的输出如下：

```
h =

   221    20     6     4     1     1     2     0     0     1

bins =

  Columns 1 through 7

    8.2500   24.7500   41.2500   57.7500   74.2500   90.7500  107.2500

  Columns 8 through 10

  123.7500  140.2500  156.7500 
```

`h`指的是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T08:34:29.413

h 是落入直方图中相应 bin 的数据元素的数量。

# apache-flex - flex中的ArrayCollection问题

> ID：13487775
> 
> 赞同：0
> 
> 时间：2012-11-21T06:45:40.293
> 
> 标签：apache-flex, model, arraycollection

我有一个数组集合，我在其中添加了不同的模型值，如下所示。

```
var ob:Object=new Object();
ob.name=string1;
ob.data=model.arraylist1;
ob.id=model.arraylist2;
nextArrayCollection.addItem(ob);

//model.arraylist1 value is changed here
//model.arraylist2 value is changed here

ob=new Object();
ob.name=string1;
ob.data=model.arraylist1;
ob.id=model.arraylist2;
nextArrayCollection.addItem(ob); 
```

问题是，当第二项添加到 nextArrayCollection 时，arraycollection 中第一项的值也会更改为与添加的第二项相同。

我对这里发生的事情感到非常困惑。每次我将新项目添加到 nextArrayCollection 时，所有现有项目的值都会更改为添加的新项目的值。是使用参考而不是值的数组集合。我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:53:35.943

我相信这只是对 OOP 的误解，它使用了引用对象：

即使您添加了两个新对象（ob = new object()），您也将它们都指向您的模型属性，但在分配时不会复制它，而只会被引用。

一个简单的测试是简单地克隆集合：

```
ob=new Object();
ob.name=string1;
ob.data= objectUtil.clone(model.arraylist1);
ob.id=model.arraylist2;
nextArrayCollection.addItem(ob); 
```

虽然这不是您的数据结构的理想范例/模型，但我认为解决方案是对数据进行排序，而不是将数据设置为 model.arraylist1 和 model.arraylist2。

# junit - 如何设置junit以使用aspectJ运行

> ID：13487778
> 
> 赞同：0
> 
> 时间：2012-11-21T06:45:47.023
> 
> 标签：junit, aspectj

我想运行 junit 测试，同时想在 Eclipse 中使用 aspectJ 将跟踪记录在一个文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T21:53:45.270

如果你有 AspectJ in Action 一书（第 2 版），它会在第 10 章中介绍。

您需要在 Eclipse 中创建一个 Aspect (.aj) 文件，将其命名为任何名称（可能是 TraceAspect）。

然后您需要定义 (1) 切入点：

```
pointcut trace() : execution (* *.*(..)) && (!within(TraceAspect)) 
```

然后定义一个方法比如 before()/around()/execution()/call()

```
before() : trace() {
    Signature sign = thisJoinPointStaticPart.getSignature();
    // Do stuff
} 
```

其他一些例子是：

[http://code.google.com/p/springside/source/browse/springside3/trunk/examples/showcase/src/main/java/org/springside/examples/showcase/log/trace/TraceAspect.java?r= 1105](http://code.google.com/p/springside/source/browse/springside3/trunk/examples/showcase/src/main/java/org/springside/examples/showcase/log/trace/TraceAspect.java?r=1105)

[http://code.google.com/p/dremel/source/browse/src/dremel/common/loggingaspect/TraceAspect.aj?repo=metaxa&r=bb10a0d0a9e82d3fe6bb2b39e0f3a44d7ceafc4b](http://code.google.com/p/dremel/source/browse/src/dremel/common/loggingaspect/TraceAspect.aj?repo=metaxa&r=bb10a0d0a9e82d3fe6bb2b39e0f3a44d7ceafc4b)

# java - 从java中的多个csv文件中检索多个列值

> ID：13487782
> 
> 赞同：-1
> 
> 时间：2012-11-21T06:45:58.057
> 
> 标签：java

假设 C:\fileupload 中有一个文件夹，其中包含这两个 csv 文件：

* * *

file1.csv 有 2 列（供应商 ID、名称）

* * *

file2.csv有2列(VendorID,address)/////这里VendorID对应file1.csv，随机放在file2.csv中

假设 file1.csv 包含：

* * *

101，供应商1 102，供应商2

* * *

file2.csv 包含 102，澳大利亚 101，美国

* * *

我想从这两个文件中检索数据并将其存储在 oracle 数据库中：

**供应商 ID、名称、地址**

* * *

101,vendor1,美国 102,vendor2,澳大利亚

并且请具体通过java告诉我任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-21T06:56:31.660

文本文件1.csv

```
loginid3,password3
loginid5,password5
loginid1,password1
loginid4,password4
loginid2,password2 
```

文本文件2.csv

```
loginid3,address3
loginid2,address2
loginid1,address1
loginid5,address5
loginid4,address4 
```

输出：

```
Key : loginid3 Value : password3 address :address3
Key : loginid2 Value : password2 address :address2
Key : loginid1 Value : password1 address :address1
Key : loginid4 Value : password4 address :address4
Key : loginid5 Value : password5 address :address5 
```

CSVReadLoginPass.java

```
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.InputStreamReader;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class CSVReadLoginPass {

 public static  Map<String,String> map1 = null;
 public static  Map<String,String> map2 = null;
  public static void main(String[] args) {

      try
      {
          readFileandPopulate();
          for (Map.Entry<String, String> entry : map1.entrySet()) {
                System.out.println("Key : " + entry.getKey() + " Value : "
                    + entry.getValue()+" address :"+map2.get(entry.getKey()));
                //insert into DB
            }
            }catch (Exception e){//Catch exception if any
                e.printStackTrace();
          System.err.println("Error: " + e.getMessage());
          }

  }
  public static void readFileandPopulate() throws Exception
  {

      FileInputStream fstream = new FileInputStream("E:\\Eclipse-Leo\\StackOverflow\\src\\resources\\textfile1.csv");
      DataInputStream in = new DataInputStream(fstream);
      BufferedReader br = new BufferedReader(new InputStreamReader(in));
      String strLine;
      map1 = new HashMap<String,String>();
          while ((strLine = br.readLine()) != null)   {
              System.out.println(strLine);
          String temp[] = strLine.split(",");
          map1.put(temp[0], temp[1]);

      }
     in.close();
     System.out.println("done 1");

     FileInputStream fstream2 = new FileInputStream("E:\\Eclipse-Leo\\StackOverflow\\src\\resources\\textfile2.csv");
      DataInputStream in2= new DataInputStream(fstream2);
      BufferedReader br2 = new BufferedReader(new InputStreamReader(in2));
      String strLine2;
          map2 = new HashMap<String,String>();
          while ((strLine2 = br2.readLine()) != null)   {
              System.out.println(strLine2);
          String temp[] = strLine2.split(",");
          map2.put(temp[0], temp[1]);

      }
     in2.close();
  }
} 
```

# cruisecontrol.net - 测试在 CruiseControl 中失败，但在我运行它们时成功

> ID：13487784
> 
> 赞同：2
> 
> 时间：2012-11-21T06:46:04.383
> 
> 标签：cruisecontrol.net, mbunit, gallio, comexception, microsoft.ink

我在 Windows 7 Pro 专用构建机器上设置了 CruiseControl.NET (v 1.6.7981.1)。我有一个 VS2012 项目设置来构建然后使用 Gallio.Echo.exe 运行 MBUnit 测试。我的问题是，当 CC.NET 运行这些测试时，其中一些测试失败了，但是当我从命令行运行完全相同的程序时，使用与 CC 任务中指定的参数完全相同的参数，在包含测试，每一个测试都通过。我似乎无法弄清楚发生了什么。谁能解释为什么某些测试在 CruiseControl 运行时可能会失败，但在我运行时会通过？我已经尝试在 CruiseControl 服务运行的同一帐户下运行它们，所以我认为这不是权限问题。我什至尝试将其关闭再打开（机器）。

CruiseControl 以具有管理员权限的登录作为 Windows 服务运行。我们的 VS 项目是一个 .NET 4.0 桌面应用程序，但我们包含了一个以前为 .NET 3.5 构建的旧项目，升级到 .NET 4.0。这个项目引用了 Microsoft.Ink 程序集（v 6.1.0.0），我已经确认这是在构建机器上的 GAC 中。实际上，失败的测试正在测试使用此程序集的应用程序的一部分。我们计划稍后替换这个遗留项目，但现在必须接受它。

这是 CruiseControl 中的测试报告中的错误：

> System.Runtime.InteropServices.COMException：灾难性故障（来自 HRESULT 的异常：0x8000FFFF（E_UNEXPECTED））错误代码：Microsoft.Ink.InkOverlayClass.set_Enabled（布尔收集）在 Microsoft.Ink.InkPicture.set_InkEnabled（布尔值）的 -2147418113 .vb：第 1201 行.......

这是失败的（VB.NET）代码

```
Dim inkPictureObject As New Microsoft.Ink.InkPicture()
...
inkPictureObject.InkEnabled = False
inkPictureObject.Ink = New Ink()
inkPictureObject.InkEnabled = True '<-- fails here 
```

[除了这个（发生 COMException: ErrorCode = -2147287036](https://stackoverflow.com/questions/5246855/comexception-occurred-errorcode-2147287036)）和这个（[仅在 VS 2010 上运行时：COMException: Catastrophic Failure: Error Code: -2147418113](https://stackoverflow.com/questions/4893048/only-while-running-on-vs-2010-comexception-catastrophic-failure-error-code)）之外，我似乎找不到任何关于错误的信息发现很有帮助，因为我没有分配资源，当我在 VS2012 中运行该程序时，我没有遇到任何问题。真正的关键是（如前所述）当我使用与 CruiseControl 配置中指定的参数相同的参数从命令提示符（以运行 CruiseControl 服务的同一用户登录）运行测试时，测试工作完美。

> Gallio.Echo.exe /rnf:test-report /rt:Xml-Inline /v:Quiet "C:\My project\testAssembly.dll"

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:39:36.060

尝试从命令提示符运行 ccnet 并查看测试是失败还是通过。我认为你只需要执行`ccservice.exe`.

如果 ccnet 作为 Windows 服务运行，我可以理解为什么这可能会失败。Windows 服务不能*创建新窗口。

这个 Microsoft 文档[http://msdn.microsoft.com/en-us/library/aa514604.aspx](http://msdn.microsoft.com/en-us/library/aa514604.aspx)声明一个`InkPicture`是 ac# 包装器，它创建一个窗口来显示和与图片交互。

`The run time user interface for this control is a window with an opaque background (single color, picture background, or both) that contains opaque ink.`

*可以将作为系统运行的 Windows 服务设置为允许`interaction with the desktop`创建窗口。尽管支持显然是分阶段的，但由 Microsoft 提供。

# java - 在 Swing JFrame 上添加 WebView 控件

> ID：13487786
> 
> 赞同：22
> 
> 时间：2012-11-21T06:46:11.220
> 
> 标签：java, swing, awt, javafx-2, javafx

我正在研究与 JavaFX 控件混合的 Swing 应用程序。

我创建了一个 JavaFX 控件 ( `WebView`) 来浏览 HTML 文件。但我想知道，如何在 Swing 的容器上添加这个 Web 视图控件`JFrame`？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2015-07-28T03:14:10.597

给定一个已经存在`jFrame`的 ，下面的代码添加一个新的`WebView`并加载一个 URL：

```
// You should execute this part on the Event Dispatch Thread
// because it modifies a Swing component 
JFXPanel jfxPanel = new JFXPanel();
jFrame.add(jfxPanel);

// Creation of scene and future interactions with JFXPanel
// should take place on the JavaFX Application Thread
Platform.runLater(() -> {
    WebView webView = new WebView();
    jfxPanel.setScene(new Scene(webView));
    webView.getEngine().load("http://www.stackoverflow.com/");
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-09T15:52:07.737

[JFXPanel](http://docs.oracle.com/javafx/2/swing/swing-fx-interoperability.htm)允许您在 Swing 应用程序中嵌入 JavaFX。

# java - JFace TableViewer 在另一个线程中排序

> ID：13487791
> 
> 赞同：1
> 
> 时间：2012-11-21T06:46:28.117
> 
> 标签：java, eclipse, swt, jface, rcp

我有一个有很多行的 JFaceTableViewer。我之前使用 JPA 获取的这些行。我已将提取放在另一个线程中以显示提取时的进度并且它可以工作。

现在我在每一列上放置了一个 SelectionAdapter 以允许对该列进行排序。这是代码：

```
private SelectionAdapter getSelectionAdapter(final TableColumn column, final String colName) {
    SelectionAdapter selectionAdapter = new SelectionAdapter() {
          @Override
          public void widgetSelected(SelectionEvent e) {
            comparator.setColumnName(colName);
            int dir = comparator.getDirection();
            resultTableViewer.getTable().setSortDirection(dir);
            resultTableViewer.getTable().setSortColumn(column);
            resultTableViewer.refresh();                
          }
        };
        return selectionAdapter;
      } 
```

如何执行这些行以在另一个线程中排序以显示进度条？每次我尝试在 resultTableViewer 上调用方法时都会出现异常：InvalidThreadAccess

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T06:55:00.427

你必须这样做`asyncExec();`：

```
 Display.getDefault().asyncExec(new Runnable() {
       public void run() {
          // your sorting here
       } 
```

链接：

*   [FAQ 为什么我会得到一个无效的线程访问异常？](http://wiki.eclipse.org/FAQ_Why_do_I_get_an_invalid_thread_access_exception%3F)
*   [类别：显示](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Display.html#asyncExec%28java.lang.Runnable%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T06:53:52.493

您正在获得无效的线程访问，因为您没有在 UI 线程中执行上面的代码，这是更新 SWT 小部件的要求。您可以做的是这样的事情，保留现有的方法结构，但让它在遵循此模式的 UI 线程中执行，您从表格小部件中获取 Display 并且您不会得到无效的线程访问异常。

```
 text.getDisplay().asyncExec(new Runnable() {

        @Override
        public void run() {
            StringWriter writer = new StringWriter();
            for (String string : content) {
                writer.append(string + "\n");

            }
            text.setText(writer.toString());
        }
    }); 
```

在此处查看有关您的问题的更多信息：[无效的 SWT 线程访问](http://wiki.eclipse.org/FAQ_Why_do_I_get_an_invalid_thread_access_exception?)

# mysql - Wordpress MySQL 语法错误

> ID：13487792
> 
> 赞同：-2
> 
> 时间：2012-11-21T06:46:29.973
> 
> 标签：mysql

嗨，我遇到了这个 MySQL 错误：

WordPress数据库错误：

> [您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ')' 附近使用正确的语法]
> 
> SELECT file_name FROM art_uploaded_files WHERE file_number in()

这是php行：

```
$file_name=$wpdb->get_results("SELECT file_name FROM art_uploaded_files WHERE file_number in(".substr($_files_id,0,-1).")"); 
```

我正在使用它来上传 php 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:50:24.567

错误正在发生，因为`$_file_id`它是空的。

因此，您的查询结果如下：

```
SELECT file_name FROM art_uploaded_files WHERE file_number in() 
```

注意错误信息。

工作你的查询应该是这样的：

```
SELECT file_name FROM art_uploaded_files WHERE file_number in(1,2,3,4); 
```

# scala - 折叠左单行中的类型推断？

> ID：13487793
> 
> 赞同：5
> 
> 时间：2012-11-21T06:46:42.640
> 
> 标签：scala, type-inference, fold

我试图反转整数列表，如下所示：

```
List(1,2,3,4).foldLeft(List[Int]()){(a,b) => b::a} 
```

我的问题是，有没有办法将种子指定为scala`List[_]`的`_`类型推断机制自动填充的类型，而不必将类型指定为`List[Int]`?

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T07:54:56.147

**更新：**在阅读了有关 Scala 类型推断的更多内容后，我找到了更好的答案来回答您的问题。[这篇](http://pchiusano.blogspot.ch/2011/05/making-most-of-scalas-extremely-limited.html)关于 Scala 类型推断限制的文章说：

> Scala 中的类型信息从函数参数流向它们的结果 [...]，**从左到右跨参数列表**，从第一个到最后一个跨语句。这与具有完整类型推断的语言形成对比，其中（粗略地说）类型信息在各个方向上不受限制地流动。

所以问题是 Scala 的类型推断是相当有限的。它*首先*查看第一个参数列表（您的案例中的列表），*然后*查看第二个参数列表（函数）。但它不会回去。

这就是为什么这

```
List(1,2,3,4).foldLeft(Nil){(a,b) => b::a} 
```

也不是这个

```
List(1,2,3,4).foldLeft(List()){(a,b) => b::a} 
```

将工作。为什么？首先，签名的`foldLeft`定义为：

```
 foldLeft[B](z: B)(f: (B, A) => B): B 
```

所以如果你`Nil`作为第一个参数使用`z`，编译器会分配`Nil.type`给类型参数`B`。如果您使用`List()`，编译器将使用`List[Nothing]`for `B`。

现在，第二个参数的类型`f`已完全定义。在你的情况下，它要么

```
(Nil.type, Int) => Nil.type 
```

或者

```
(List[Nothing], Int) => List[Nothing] 
```

在这两种情况下，lambda 表达式`(a, b) => b :: a`都是无效的，因为它的返回类型被推断为`List[Int]`.

* * *

请注意，上面的粗体部分表示“参数列表”而不是“参数”。文章稍后解释：

> 类型信息不会在参数列表中从左到右流动*，*只会在参数列表中*从左到右*流动。

因此，如果您有一个带有单个参数列表的方法，情况会更糟。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T06:58:49.697

我知道的唯一方法是

```
scala> def foldList[T](l: List[T]) = l.foldLeft(List[T]()){(a,b) => b::a}
foldList: [T](l: List[T])List[T]

scala> foldList(List(1,2,3,4))
res19: List[Int] = List(4, 3, 2, 1)

scala> foldList(List("a","b","c"))
res20: List[java.lang.String] = List(c, b, a) 
```

# c# - 通过 ScrollViewer 的水平/垂直偏移进行动画处理

> ID：13487800
> 
> 赞同：2
> 
> 时间：2012-11-21T06:47:25.817
> 
> 标签：c#, wpf, silverlight, windows-phone-8

我需要控制其位置与 Windows Phone 8 SDK (silverlight/wpf) 中的 ScrollViewer 的滚动偏移量直接相关。此外，我需要能够知道各种委托中的滚动偏移量，以便我可以更改其他应用内属性。这甚至可能吗？

我已经看遍了，但似乎找不到任何示例，我似乎也没有足够的掌握 WPF/Silverlight 的动画概念来学习这个。

我能想到的最好的如下所示。它一开始似乎可以工作，但不幸的是，只有当你的手指没有向下并且 ScrollViewer 没有动画时才会更新，所以更新太不频繁了。我需要更新作为动画循环的一部分，所以每一帧左右（每秒 60-100+），我都会得到新的滚动偏移值。有没有办法在动画循环中安排 DispatchTimer？或者是否有某种更好的方法来完全解决这个问题，使用 DependentProperties 之类的东西？

```
 protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        if (!App.ViewModel.IsDataLoaded)
        {
            App.ViewModel.LoadData();
        }
        DispatcherTimer t = new DispatcherTimer();
        t.Interval = TimeSpan.FromMilliseconds(16.6);
        t.Tick += new EventHandler(
            (object s, EventArgs ee) =>
                {
                    // FunkBox is some ListBox
                    ScrollViewer sv = FindChildOfType<ScrollViewer>(FunkBox);
                    if (sv == null) 
                    {
                        // TOffset is some TextBlock
                        TOffset.Text = "dur...";
                    }
                    else
                    {
                        TOffset.Text = String.Format("dur {0}", sv.HorizontalOffset);
                    }
                });
        t.Start();
    }

    static T FindChildOfType<T>(DependencyObject root) where T : class
    {
        var queue = new Queue<DependencyObject>();
        queue.Enqueue(root);

        while (queue.Count > 0)
        {
            DependencyObject current = queue.Dequeue();
            for (int i = System.Windows.Media.VisualTreeHelper.GetChildrenCount(current) - 1; 0 <= i; i--)
            {
                var child = System.Windows.Media.VisualTreeHelper.GetChild(current, i);
                var typedChild = child as T;
                if (typedChild != null)
                {
                    return typedChild;
                }
                queue.Enqueue(child);
            }
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T00:07:32.257

这也花了我一段时间才弄清楚。这是你如何做到的：

*   确保您的 ScrollViewer 将 ManipulationMode 设置为“Control”
*   遍历可视化树以找到 ScrollViewer 的 Vertical Scrollbar 子项。
*   挂钩到它的 ValueChanged 事件。

因此，您的 XAML 将是：

```
 <ScrollViewer x:Name="mainScrollViewer" ManipulationMode="Control">
        ....
 </ScrollViewer> 
```

而你背后的代码：

```
 public MainPage()
    {
        InitializeComponent();

        this.Loaded += MainPage_Loaded;
    }

    void MainPage_Loaded(object sender, RoutedEventArgs e)
    {
        ScrollBar verticalBar;
        verticalBar = ((FrameworkElement)VisualTreeHelper.GetChild(mainScrollViewer, 0)).FindName("VerticalScrollBar") as ScrollBar;
        verticalBar.ValueChanged += verticalBar_ValueChanged;
    }

    void verticalBar_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
    {
        double newVerticalOffset =  e.NewValue;
        // Set the offset of your other control here, using newVerticalOffset
    } 
```

或者，对于 ListBox，您需要使用以下代码从 Listbox 内部获取 ScrollViewer：

```
 ScrollViewer mainScrollViewer = GetVisualChild<ScrollViewer>(yourListBoxControl);
    // ...then use the code above

    public T GetVisualChild<T>(UIElement parent) where T : UIElement
    {
        T child = null; // default(T);

        int numVisuals = VisualTreeHelper.GetChildrenCount(parent);
        for (int i = 0; i < numVisuals; i++)
        {
            UIElement element = (UIElement)VisualTreeHelper.GetChild(parent, i);
            child = element as T;
            if (child == null)
                child = GetVisualChild<T>(element);
            if (child != null)
                break;
        }

        return child;
    } 
```

您可能还需要在构造函数中设置 ScrollViewer 的操作模式：

```
 ScrollViewer mainScrollViewer = GetVisualChild<ScrollViewer>(lstTest);
    sv.ManipulationMode = ManipulationMode.Control; 
```

# c# - 当我尝试从 Xamarin Samples 运行 Social Framework Demo App 时出现错误

> ID：13487804
> 
> 赞同：2
> 
> 时间：2012-11-21T06:47:33.140
> 
> 标签：c#, facebook, xamarin.ios, ios6, xamarin

我是 MonoTouch iPhone 应用程序的新手，当我尝试从 Xamarin 示例运行 Social Framework Demo 时，单击任何按钮会使应用程序崩溃并出现未处理的异常，请帮助我

MonoDevelop 3.0.4.7

安装UUID：d9012fd4-f121-4a57-839d-50ccdf232e64

运行：

```
Mono 2.10.9 (tarball)
GTK 2.24.10
GTK# (2.12.0.0)
Package version: 210090011 
```

苹果开发者工具：

```
 Xcode 4.2.1 (834)
 Build 4D502 
```

适用于 Android 的单声道：4.2.7

Android SDK：/Users/ravichandra/Library/Developer/Xamarin/android-sdk-mac_x86

```
Supported Android versions:
    2.1   (API level 7)
    2.2   (API level 8)
    2.3   (API level 10)
    3.1   (API level 12)
    4.0   (API level 14)
    4.0.3 (API level 15) 
```

Java SDK：/usr Monotouch：6.0.0

构建信息：

```
Release ID: 30004007
Git revision: ea0108260c6a376ecaeffcdb7d03387bd51edda3
Build date: 2012-09-17 14:09:17+0000
Xamarin addins: ec43fd5cb223ead4234a9858d1b56eef03dad53a-dirty 
```

操作系统：

```
Mac OS X 10.7.5
Darwin Ravi-Chandras-iMac.local 11.4.2 Darwin Kernel Version 11.4.2
    Thu Aug 23 16:25:48 PDT 2012
    root:xnu-1699.32.7~1/RELEASE_X86_64 x86_64 
```

[错误] 致命的未处理异常：System.ArgumentNullException：参数不能为空。参数名称：服务类型

at MonoTouch.Social.SLComposeViewController.IsAvailable (MonoTouch.Foundation.NSString serviceType) [0x0000c] in /Developer/MonoTouch/Source/monotouch/src/Social/SLComposeViewController.g.cs:93

at MonoTouch.Social.SLComposeViewController.IsAvailable (SLServiceKind serviceKind) [0x00000] in /Developer/MonoTouch/Source/monotouch/src/Social/SLComposeViewController.cs:25

at SocialFrameworkDemo.SocialFrameworkDemoViewController.m__1 (System.Object , System.EventArgs ) [0x00000] in /Users/ravichandra/Downloads/SocialFrameworkDemo 2/SocialFrameworkDemo/SocialFrameworkDemoViewController.cs:52

at MonoTouch.UIKit.UIControlEventProxy.Activated () [0x00000] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIControl.cs:30

at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication:UIApplicationMain (int,string[],intptr,intptr) at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38

at SocialFrameworkDemo.Application.Main (System.String[] args) [0x00000] in /Users/ravichandra/Downloads/SocialFrameworkDemo 2/SocialFrameworkDemo/Main.cs:17

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:33:12.670

> Xcode 4.2.1 (834)

The new **Social** framework is available on **iOS 6.0** (and later). This SDK is only available if you install Xcode 4.5 (or later).

Without it you're missing the required libraries to support the new features. In this case you're getting some *missing* strings as `null` values - and that throws an exception in the sample.

# php - PHP SELECT 根据状态显示消息

> ID：13487806
> 
> 赞同：0
> 
> 时间：2012-11-21T06:47:41.467
> 
> 标签：php, mysql, sql

```
t_user
-----------------------------
 uid | username | full_name  
-----------------------------
1    | dodo     | Dodo Ash
2    | jane     | Jane Shalimar
----------------------------

t_join

-----------------------------
j_id | uid_fk | uid | status
-----------------------------
1    | 1      | 2   | joining
2    | 2      | 1   | joining
-----------------------------

t_message
-----------------------------
msg_id | message   | uid_fk
-----------------------------
1      | hi all    | 1
2      | nice trip | 2
----------------------------- 
```

PHP代码显示基于Join的数据：

```
$query = mysql_query("SELECT M.msg_id, M.uid_fk, M.message, M.created, U.full_name, U.profile_pic, U.username, U.uid, F.status, F.uid FROM t_haps_wall M, t_users U, t_join_user F WHERE
        M.uid_fk=U.uid AND F.uid=U.uid AND F.status='joining' order by M.msg_id desc ") or die(mysql_error()); 
```

我遇到了 PHP SELECT 代码的问题。关键是朋友消息将显示状态“加入”。那么我该如何设置它来获得它呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:52:35.960

使用此查询它将起作用。

```
 $query = mysql_query("SELECT M.msg_id, M.uid_fk, M.message, M.created, U.full_name, U.profile_pic, U.username, U.uid, F.status, F.uid FROM t_haps_wall M, t_users U, t_join_user F WHERE
    M.uid_fk=U.uid AND F.uid=U.uid AND M.uid_fk = F.uid AND F.status='joining' order by M.msg_id desc ") or die(mysql_error()); 
```

# firebird - 如何在 Firebird 服务器中使表列不区分大小写？

> ID：13487808
> 
> 赞同：0
> 
> 时间：2012-11-21T06:47:45.663
> 
> 标签：firebird

如何在 Firebird 服务器中使表列不区分大小写？

我正在使用此代码，但它不工作..

```
con.opne();
cmd = new FbCommand("ALTER TABLE asco ALTER COLUMN Final_Model VARCHAR(30) COLLATE Latin1_General_CS_AS NULL", con);
cmd.ExecuteNonQuery();
con.close(); 
```

错误：

```
ERROR:Dynamic SQL Error
SQL error code = -104
Token unknown - line 1, column 43
VARCHAR 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T16:08:07.253

你的说法有几个问题。首先，根据 Interbase 6.0 语言参考（可从[Firebird 站点的文档部分获得](http://www.firebirdsql.org/en/reference-manuals/)）部分`ALTER TABLE`（第 28 页），正确的语法是：

```
ALTER TABLE table <operation> [, <operation> ...];
<operation> = {...
  | ALTER [COLUMN] column_name <alt_col_clause>
  ...}
<alt_col_clause> = {...
  | TYPE new_col_datatype
  ...} 
```

请注意，`new_col_datatype`没有进一步扩展（`datatype`但是在第 29 页）。换句话说，声明至少应该是：

```
ALTER TABLE asco 
  ALTER COLUMN Final_Model 
    TYPE VARCHAR(30) 
```

请注意`TYPE`列名和数据类型之间的关系。Language Reference 中 BNF 产生的顺序可能会让您认为您也可以更改列的排序规则，不幸的是您不能。

因此，如果要更改排序规则，则必须使用正确的排序规则创建一个新列，复制内容然后删除旧列（并将新列重命名为旧列的名称）。另请参阅[Firebird-support list 上的此线程](http://fb-list-archive.s3-website-eu-west-1.amazonaws.com/firebird-support/2009/1/99893.html)。

最后我想指出 1)`Latin1_General_CS_AS`是区分**大小写**的排序规则，而不是不敏感的排序规则，如您的问题和 2) Firebird 不知道排序规则`Latin1_General_CS_AS`（最接近您需要的可能是默认排序规则`WIN_PTBR`或`FR_FR_CI_AI`，否则您可以创建一个自己使用[`CREATE COLLATION`](https://www.firebirdsql.org/file/documentation/html/en/refdocs/fblangref25/firebird-25-language-reference.html#fblangref25-ddl-collation-create)）。

# c# - Windows 服务给出的 String 未被识别为有效的 DateTime 异常，但相同的代码在控制台应用程序中正常运行

> ID：13487812
> 
> 赞同：1
> 
> 时间：2012-11-21T06:48:11.480
> 
> 标签：c#, datetime

Windows 服务给出的 String 未被识别为有效的 DateTime 异常，但相同的代码在控制台应用程序中正常运行

```
Object max = cmd.ExecuteScalar();   //max will have 6/30/2012 12:00:00 AM 
DateTime currentDt = DateTime.Now;
currentDt = DateTime.ParseExact(max.ToString(), "M/d/yyyy h:mm:ss tt", CultureInfo.CurrentCulture.DateTimeFormat);                         //This Line Gives Error in WindowsService Only
StreamWriter sw = new StreamWriter("E:\\ram\\SampleService.txt", true);
sw.WriteLine(currentDt.ToString());
sw.Close(); 
```

我什至将系统日期时间格式设置更改为英语 - 我们的 Settings.ShortDatetime 是 M/d/yyyy 而 Longtime 是 h:mm:ss tt。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T06:51:41.640

我的猜测是*系统*区域设置与您的*用户*区域设置不同。如果您的系统语言环境使用“/”以外的其他内容作为日期分隔符，它将无法匹配格式字符串中的“/”。

我建议您更改为 use `CultureInfo.InvariantCulture`，此时它应该可以工作 -*如果*的值`max.ToString()`实际上是“6/30/2012 12:00:00 AM”。您是否验证了在失败的情况下，这就是您获得的价值？

但是，如果您的值来自数据库，为什么要以字符串形式存储它呢？你确定它甚至*是*一个字符串？如果它实际上是 a `DateTime`，那么当您调用时，`ToString()`您将使用当前区域性的默认格式来转换它 - 这在返回的路上很容易失败。即使现在*是*字符串，真的必须是吗？您可以引入的字符串转换越少越好。

（顺便说一句，使用`File.WriteAllText`or`File.AppendAllText`比使用`StreamWriter`这样的 a 更简单。如果您*确实*需要使用 a `StreamWriter`，请记住使用`using`语句来正确处理资源。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:53:13.320

在没有 CultureInfo 的情况下尝试：

```
currentDt = DateTime.ParseExact(max.ToString(), "M/d/yyyy h:mm:ss tt", null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:05:24.737

您的 SQL 请求是否返回`DateTime`或`String`值？

我也不明白你为什么`ParseExact`在这种情况下使用。在您的情况下，我建议使用带`InvariantCulture`参数的 Parse 方法：

```
currentDt = DateTime.Parse(max.ToString(), CultureInfo.InvariantCulture); 
```

如果您的`max`值是 DateTime 那么您根本不需要进行解析。您只需要检查它是否为 DBNull.Value：

```
if (max != DBNullValue)
{
    currentDt = (DateTime)max;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-09T10:35:57.080

我在构建 Windows 服务时遇到了同样的问题。在那，我尝试将字符串日期转换为日期时间格式。为此，我使用了格式**字符串 date_time = Day + "/" + Mn + "/" + Yr + " " + Hr + ":" + Min;** 并尝试将其转换为 datetime()。此格式在 Windows 窗体应用程序中正常运行，但在 Windows 服务项目中不正常运行。

解决方案 ：

我用这种格式**字符串更改了上面的字符串格式 date_time = Mn + "/" + Day + "/" + Yr + " " + Hr + ":" + Min;** , 然后将其传递给 datetime()。喜欢跟随：

> 字符串 date_time = Mn + "/" + Day + "/" + Yr + " " + Hr + ":" + Min；DateTime dt_1 = Convert.ToDateTime(date_time);

默认情况下，.NET 使用 en-US 文化，根据该文化，日期采用月/日/年格式

这是 100% 的工作。

# vim - 在 gVim 中设置行空间

> ID：13487815
> 
> 赞同：0
> 
> 时间：2012-11-21T06:48:22.213
> 
> 标签：vim

当设置`linespace`为大于零的某个值时，该行中的字符垂直顶部对齐。我希望字符垂直居中（在行的中间）。

![示例截图](../Images/1abe1f52f967243cc7be70b7080fb28b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:56:09.893

该`'linespace'`设置允许*稍微*调整行的视觉间距以适应使用的字体（这样文本既不太密集也不太分开）。它不适用于屏幕截图中显示的“宽间距”效果。

如果你真的需要这样的东西，你需要修补 Vim 的源代码，或者使用另一个编辑器，或者我会尝试修改使用的字体以在所有字形中包含更多的垂直填充。

# c#-4.0 - WinXP Only Bitmap.Save ArgumentException 参数无效

> ID：13487817
> 
> 赞同：0
> 
> 时间：2012-11-21T06:48:31.857
> 
> 标签：c#-4.0, gdi+, bit-manipulation

基本上，代码正在尝试获取源图像，在其上绘制一些自定义文本并将新图像保存到文件系统。

当我在 Windows 7 中运行代码时，它运行良好，但是当我在 WinXP 中运行它时，它会在第一个 DrawString 之后的任何时间在 imgCopy.Save 行中创建一个异常。

异常是 ArgumentException（参数无效）。这就像DrawString破坏了WinXP下的图像......？

该构建适用于 x86/.NET 4.0 运行时。任何想法为什么XP下的异常？

```
// imgSrc is actually passed into the method with the rec object
// this is just for repro
using (var imgSrc = new System.Drawing.Bitmap(rec.SrcFile))
using (var imgCopy = imgSrc.Clone() as Bitmap)
using (var gImg = Graphics.FromImage(imgCopy)) //shorten var names for this post
{
    imgCopy.Save(rec.DstFile, ImageFormat.Jpeg); //Happy here
    gImg.SmoothingMode = SmoothingMode.AntiAlias;
    imgCopy.Save(rec.DstFile, ImageFormat.Jpeg); //Also no problem
    gImg.DrawString(rec.Name, fntArial16, Brushes.Black, new Rectangle(170, 105, 650, 50), sfCenter);
    imgCopy.Save(rec.DstFile, ImageFormat.Jpeg); //<-- Fails here
} 
```

编辑：参数代码：

```
private static Font fntArial16 = new Font("Arial", 16, FontStyle.Bold);

private static StringFormat _sfCenter;
private static StringFormat sfCenter {
    get {
        if (_sfCenter == null) {
            _sfCenter = new StringFormat();
            sfCenter.Alignment = StringAlignment.Center;
            sfCenter.LineAlignment = StringAlignment.Center;
        }
        return _sfCenter;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:13:48.300

我们将问题缩小到包含 XMP（可扩展元数据平台）数据的 .jpg 文件。一旦我们从文件中删除它，它就可以在 WinXP 上正常工作。不幸的是，生成文件的工具没有排除它的选项，所以我们改用 .png 文件，它也可以正常工作。

# c - *(char **) 的使用

> ID：13487821
> 
> 赞同：3
> 
> 时间：2012-11-21T06:48:54.447
> 
> 标签：c, pointers, char

以下代码来自[The Practice of Programming](https://rads.stackoverflow.com/amzn/click/com/020161586X)：

```
int scmp(const void *p1, const void *p2)
{
    char *v1, *v2;
    v1 = *(char **) p1;
    v2 = *(char **) p2;
    return strcmp(v1, v2);
} 
```

我不明白为什么要使用表达式`*(char **) p1`。我们可以`(char *)p1`改用吗？它们之间有什么区别？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T06:52:50.967

**没有**。这`(char **)`是一个类型转换，并且转换`*`之前的一元解引用指针。如果你简单地取`v1 = (char *) p1`，那么`v1`将被设置为等于`p1`，当你想要的是`v1`等于 的`char*`时候`p1`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T07:02:14.290

# 一个例子可以帮助你理解

让有字符串`"yourString1"`和`"yourString2"`。

let`s1`是指向“yourString1”`s2`的指针，是指向“yourString2”的指针

```
s1->"yourString1"
s2->"yourString2" 
```

调用`scmp(s1,s2);`原因`p1`指向`s1`和 `p2`指向`s2`

```
p1->s1->"yourString1"
p2->s2->"yourString2" 
```

所以, `p1`,`p2`这里是双指针..

由于`p1`,`p2`是一个 void 指针，因此必须将其转换为`char pointer`.

所以，

`(char**)p1`将使 p1 成为 char 双指针

`*(char**)p1`and`*(char**)p2`现在将指向`s1`and `s2`。

这将允许 strcmp 比较字符串`s1`和`s2`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T07:04:35.203

此函数中的界面设计得比最初看起来要复杂一些。可以将 scmp 设计为只使用指向字符串的指针（顺便说一句，这就是*strcmp*所做的）。

```
int scmp1(void * p1, void *p2) { return strcmp((char*)p1,(char*)p2);}
char *ptr = "bar";
char *ptr2 = "foo";

scmp1(ptr, ptr2); // this would make sense, however, 

scmp(&ptr, &ptr2); // this is how the interface is designed. 
```

比较函数没有明显的原因采用指向（指向字符串的指针）的指针。也许该函数将在后续章节中扩展为*交换*函数内部的指针——然后调用者会看到 ptr 指向“foo”，而 ptr2 指向“bar”。（这在 scmp1 aka strcmp 类型函数中是不可能的，其中要传递的指针可以在*本地*修改，即分别在 scmp1 和 strcmp 函数中，但不会将更改传播给调用者）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-21T09:33:01.523

`(char**)p1`表示*p1*是指向 char*(char*) 的指针（第二个 * 显示）。
所以得到 value `*(char**)p1`，结果是*char*（我们可以说是一个字符串）*，可以赋值给 v1（type is *char* *）。
*void* * 可以转换为任何指针*(char*,int*,double*)...*

# ios - IOS 5中的标签切换

> ID：13487827
> 
> 赞同：0
> 
> 时间：2012-11-21T06:49:13.913
> 
> 标签：ios, xcode, uitabbarcontroller

嗨，我的应用程序中有两个选项卡。我用*UITabBarController*实现了选项卡。我可以使用应用程序中的标签栏在两个标签之间切换。但我想使用按钮在选项卡之间切换。两个选项卡都将包含一个按钮。按下任何选项卡中的按钮将切换到另一个选项卡。我似乎找不到任何方法来做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T06:56:04.767

如果您想使用代码在选项卡之间切换，它可以像更改 UITabBarController 的[" `selectedIndex`"](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITabBarController_Class/Reference/Reference.html#//apple_ref/occ/instp/UITabBarController/selectedIndex)属性一样简单（前提是控制器连接到您的视图控制器可以处理的插座）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T07:04:09.247

你可以这样做： -

```
BOOL isFirstIndexSelected;
-(IBAction)ActionSwitchTab
{

    if(isFirstIndexSelected=YES)
    {
      [self.tabBarController setSelectedIndex:1];
      isFirstIndexSelected==NO;
    }
    else

    {
    [self.tabBarController setSelectedIndex:0];
          isFirstIndexSelected==YES;

    }

} 
```

至于上面的代码，它只有一个按钮单击更改选项卡。但是，如果您为 Diffrent 选项卡设置 Diffrent 按钮，您只需要实现每个按钮操作并手动设置选项卡，例如：-

`[self.tabBarController setSelectedIndex:0];`

# c# - 在 GridView 中翻转项目图像

> ID：13487828
> 
> 赞同：2
> 
> 时间：2012-11-21T06:49:13.300
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我对 Windows 8 现代 UI 应用程序相当陌生，我想知道如何翻转平铺图像（位于 GridView 内的应用程序内的图像）。

我有来自 Web 服务的列表形式的图像路径，并且希望使用该图像列表来翻转应用程序内的数据绑定项目背景。

我在网上找不到任何东西，所以我想我会在这里问。如果您知道从哪里开始，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:28:58.277

您可以使用接受您的图片列表的用户控件。并在您的用户控件中使用 DispatcherTimer 每 X 秒切换/更改您的图片。

样本 ：

```
 public sealed partial class CustomFlip
    {
        #region Properties

        private readonly TimeSpan _delay = new TimeSpan(0, 0, 1);
        private readonly DispatcherTimer _dt;

        #endregion Properties

        #region Control Properties

        public IList<Uri> Pictures
        {
            get { return (IList<Uri>)GetValue(PicturesProperty); }
            set { SetValue(PicturesProperty, value); }
        }

        public static readonly DependencyProperty PicturesProperty
            = DependencyProperty.Register("Pictures", typeof(IList<Uri>), typeof(CustomFlip), null);

        #endregion Control Properties

        public CustomFlip()
        {
            InitializeComponent();
            Loaded += CLoaded;
            _dt = new DispatcherTimer { Interval = _delay };
            _dt.Tick += Refresh;

            Unloaded += CUnloaded;
        }

        private void CLoaded(object sender, RoutedEventArgs e)
        {
            _dt.Start();
        }

        private void CUnloaded(object sender, RoutedEventArgs e)
        {
            _dt.Stop();
        }

        private void Refresh(object sender, object e)
        {
            //Image name in your xaml.
            foo.Source = //Random Uri from Pictures.
//Sample this.MyImage.Source = new BitmapImage(new Uri("/MyNameSpace;images/someimage.png", UriKind.Relative));
        }

        #region Methods

        public void StopRefresh()
        {
            _dt.Stop();
        }

        public void ReStartRefresh()
        {
            if (_dt == null)
                return;

            _dt.Start();
        }

        #endregion Methods
    } 
```

而你 xaml ：

```
<UserControl
    x:Name="root"
    x:Class="Foo"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300"
    d:DesignWidth="400">
        <Grid>
        <Image x:Name="Image"/>
        </Grid>

</UserControl> 
```

问候。

编辑添加 xaml 示例：

```
xmlns:flip="using:Project.CustomControls.CustomFlip" <!--FlipLocation-->
<flip:ControlName Pictures={Binding YourList}/> <!--Hw to use it--> 
```

# android - Wildfire S 中的 TextCapCharacters 问题

> ID：13487835
> 
> 赞同：0
> 
> 时间：2012-11-21T06:49:53.160
> 
> 标签：android, textinput

我在 MDPI 设备“WildFire S”中遇到了 TextCapCharacter 的问题，我在使用的名称中有 2 个编辑文本字段名称和电子邮件 ID

```
<EditText
    android:id="@+id/name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/nameTV"
    android:layout_below="@+id/nameTV"
    android:layout_marginTop="3dp"
    android:background="@drawable/input_field_profile"
    android:ems="10"
    android:textSize="12dp"
    android:gravity="center_vertical"
    android:inputType="textCapCharacters"
    android:paddingLeft="5dp" 
    android:paddingRight="5dp">
    <requestFocus />
</EditText> 
```

并在电子邮件 ID

```
<EditText
    android:id="@+id/email"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/emailTV"
    android:layout_below="@+id/emailTV"
    android:layout_marginTop="5dp"
    android:background="@drawable/input_field_profile"
    android:ems="10"
    android:textSize="12dp"
    android:gravity="center_vertical"
    android:inputType="textEmailAddress"
    android:paddingLeft="5dp"
    android:paddingRight="5dp" /> 
```

我有问题 textCapCharacter 属性在名称字段上工作正常但是当我转移到电子邮件 ID 字段时它仍然保持输入类型 captextcharacter 但这个东西在三星谷歌 Nexus 三星 Galaxy Note II 三星 Galaxy SII 上工作得很好所以在这个问题上需要帮助谢谢你问候乌斯曼·阿尔沙德·库尔德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T06:48:44.597

下面的链接可能会给您一个明确的指示，为什么在某些设备上会这样：

[android:inputType="textEmailAddress" - '@' 键和 '.com' 键？](https://stackoverflow.com/questions/5440327/androidinputtype-textemailaddress-key-and-a-com-key)

这解释了一切。

# extjs - 如何从手风琴中获取每个标题的名称

> ID：13487837
> 
> 赞同：2
> 
> 时间：2012-11-21T06:49:53.817
> 
> 标签：extjs, extjs4

我正在开发一个用于员工出勤的模块。我正在使用手风琴，它将显示年份的名称作为标题。在每个手风琴细节中，我都放置了一个包含月份名称的网格。我可以在控制器中获取网格值，但无法获取手风琴标题的名称，这就是为什么我无法在网格中显示所需结果的原因。谁能帮助我获得手风琴标题的标题？我的手风琴细节如下：

```
Ext.define('Ext4Example.view.attendence.Timeperiod' ,{
        extend: 'Ext.form.Panel',
        alias : 'widget.timeperiod',
        id: 'timeperiod',
        region: 'west',
        border: false,
        width: 150,
        height:400,
        split: true,
        defaults: {
            // applied to each contained panel
            //bodyStyle: 'padding:15px'
        },
        layout: {
            // layout-specific configs go here
            type: 'accordion',
            titleCollapse: true,
            animate: true,
            activeOnTop: true
        },

        initComponent: function() {

            var today = new Date();
            var yyyy = today.getFullYear();

            this.items = [{
                title: 'Year '+yyyy,
                items: [{
                xtype: 'months'
                }]
                //html: 'Panel content!'
            },{
                title: 'Year '+(yyyy-1),
                items: [{
                xtype: 'months'
                }]
                //html: 'Panel content!'
            },{
                title: 'Year '+(yyyy-2),
                items: [{
                xtype: 'months'
                }]
                //html: 'Panel content!'
            },{
                title: 'Year '+(yyyy-3),
                items: [{
                xtype: 'months'
                }]
                //html: 'Panel content!'
            },{
                title: 'Year '+(yyyy-4),
                items: [{
                xtype: 'months'
                }]
                //html: 'Panel content!'
            }];

            this.callParent(arguments);
        }
    }); 
```

我的月份网格如下：

```
Ext.define('Ext4Example.view.attendence.Months' ,{
    extend: 'Ext.grid.Panel',
    alias : 'widget.months',
    border: false,
    viewConfig: {
        stripeRows: true
    },
     store: 'Months',    
    hideHeaders: true,
    initComponent: function() {        
        this.store = 'Months';
        this.width = 150;      
        this.columns = [
        {
            dataIndex: 'months', 
            flex:1
        }
        ];
        this.callParent(arguments);
    }
}); 
```

我的数据网格如下：

```
Ext.define('Ext4Example.view.attendence.Datagrid' ,{
    extend: 'Ext.grid.Panel',
    alias : 'widget.datagrid',
    layout: 'fit',
    viewConfig: {
        stripeRows: true
    },

    hideHeaders: false,
    initComponent: function() {  
        this.store = 'Attendences';
        //this.width = 400;      
        this.columns = [
        {
            text: 'Date',
            dataIndex: 'id'
        },
        {
            text: 'In-Time',
            dataIndex: 'intime'
        },
        {
            text: 'Out-Time',
            dataIndex: 'outtime'
        }

        ];

        this.callParent(arguments);
    }
}); 
```

我将所有内容加在一起的主窗口如下所示：

```
Ext.define('Ext4Example.view.attendence.Attendencewindow' ,{
    extend: 'Ext.window.Window',
    alias: 'widget.attendencewindow',
    title: 'Attendence Information',
    layout: 'fit',
    modal: true,
    autoShow: true,
    resizable: false,
    //maximizable: true,
    collapsible: true,
    initComponent: function () {
        this.items = [
        {
            xtype: 'form',
            width: 550,
            bodyPadding: '8 0 8 0',
            border:false,
            layout: {
            type: 'hbox',
            align: 'stretch'
            },
            items:[{
            xtype: 'timeperiod'
            },{
            xtype: 'datagrid'
            }]
        }
        ];
        this.buttons = [

        {
            xtype: 'button',
            text: 'New',
            iconCls: 'new',
            action : 'clear'

        },{
            xtype: 'button',
            text: 'Save',
            iconCls: 'save',
            //iconAlign: 'top',
            action : 'save'

        },{
            xtype: 'button',
            text: 'Print',
            iconCls: 'print',
            action: 'close'
            //scope: this

        }
        ];
        this.callParent(arguments);
    }
}); 
```

我的控制器如下：

```
 Ext.define('Ext4Example.controller.Attendences', {
    extend: 'Ext.app.Controller',
    stores: [
    'Attendences','Months'
    ],
    models: [
    'Attendence','Month'
    ],
    views: [
    'attendence.Timeperiod','attendence.Details','attendence.Attendencewindow','attendence.Editattendence','attendence.Months','attendence.Datagrid'
    ],

    refs: [{
        ref: 'stockaddForm',
        selector: 'form'
    }],

    init: function () {
        this.control({
            'datagrid': {
                itemdblclick: this.editUser
            },
            'months': {
                itemclick: this.show
            },
            'attendencewindow button[action=save]': {
                click: this.save
            }

        });
    },

    editUser: function(grid, record){
        var view = Ext.widget('editattendence');
        view.down('form').loadRecord(record);
    },
    show: function(grid, record) {
    var hi = grid.ownerCt.title;
        alert(hi);
        var a = Ext.getCmp('timeperiod');
        var store = this.getAttendencesStore();
        store.load({
            filters: [
              {property:'month', value:record.data.value},
              {property:'year', value:2012}
            ]          
        });

},

save: function(){
        var today = new Date();
        var dd = today.getDate();
        var mm = today.getMonth()+1; //January is 0!
        var yyyy = today.getFullYear();     //+1
        Ext.Msg.alert("Today is - ",dd+" - "+mm+" - "+yyyy);
}
}); 
```

现在你能告诉我如何获得手风琴的标题，如 2012 年或 2011 年我可以通过 record.data.value 获得月份名称，但我不能获得手风琴的标题

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:28:41.617

假设您已将自己注册到网格的**[itemclick](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel-event-itemclick)**事件，然后将网格本身作为回调中的第一个参数。您现在网格直接嵌套在您的手风琴中，因此您可以简单地引用**[ownerCt](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-property-ownerCt)**。

```
//lets pretend this is your callback
function(grid,record) {
    grid.ownerCt.title; // <- your accordion title
} 
```

您还应该看看`up()`ans`down()`两者都需要一个组件查询选择器。但在你的情况下，这似乎是最好的方法。

**编辑**

这是修改后的`timeperiod`

```
Ext.define('Ext4Example.view.attendence.Timeperiod' ,{
        extend: 'Ext.form.Panel',
        alias : 'widget.timeperiod',
        id: 'timeperiod',
        region: 'west',
        border: false,
        width: 150,
        height:400,
        split: true,
        defaults: {
            // applied to each contained panel
            //bodyStyle: 'padding:15px'
        },
        layout: {
            // layout-specific configs go here
            type: 'accordion',
            titleCollapse: true,
            animate: true,
            activeOnTop: true
        },

        initComponent: function() {

            var today = new Date();
            var yyyy = today.getFullYear();

            this.items = [{
                title: 'Year '+yyyy,
                ident: 'accordion-panel',
                items: [{
                xtype: 'months'
                }]
                //html: 'Panel content!'
            },{
                title: 'Year '+(yyyy-1),
                ident: 'accordion-panel',
                items: [{
                xtype: 'months'
                }]
                //html: 'Panel content!'
            },{
                title: 'Year '+(yyyy-2),
                ident: 'accordion-panel',
                items: [{
                xtype: 'months'
                }]
                //html: 'Panel content!'
            },{
                title: 'Year '+(yyyy-3),
                ident: 'accordion-panel',
                items: [{
                xtype: 'months'
                }]
                //html: 'Panel content!'
            },{
                title: 'Year '+(yyyy-4),
                ident: 'accordion-panel',
                items: [{
                xtype: 'months'
                }]
                //html: 'Panel content!'
            }];

            this.callParent(arguments);
        }
    }); 
```

和修改后的Controller

```
Ext.define('Ext4Example.controller.Attendences', {
    extend: 'Ext.app.Controller',
    stores: [
    'Attendences','Months'
    ],
    models: [
    'Attendence','Month'
    ],
    views: [
    'attendence.Timeperiod','attendence.Details','attendence.Attendencewindow','attendence.Editattendence','attendence.Months','attendence.Datagrid'
    ],

    refs: [{
        ref: 'stockaddForm',
        selector: 'form'
    }],

    init: function () {
        this.control({
            'datagrid': {
                itemdblclick: this.editUser
            },
            'months': {
                itemclick: this.show
            },
            'attendencewindow button[action=save]': {
                click: this.save
            }

        });
    },

    editUser: function(grid, record){
        var view = Ext.widget('editattendence');
        view.down('form').loadRecord(record);
    },
    show: function(grid, record) {
    var hi = grid.up('[ident=accordion-panel]');
        alert(hi.title);
        var a = Ext.getCmp('timeperiod');
        var store = this.getAttendencesStore();
        store.load({
            filters: [
              {property:'month', value:record.data.value},
              {property:'year', value:2012}
            ]          
        });

    },

    save: function(){
            var today = new Date();
            var dd = today.getDate();
            var mm = today.getMonth()+1; //January is 0!
            var yyyy = today.getFullYear();     //+1
            Ext.Msg.alert("Today is - ",dd+" - "+mm+" - "+yyyy);
    }
}); 
```

# .htaccess - 将原始站点 url 名称设置为一些虚假的 url 名称

> ID：13487839
> 
> 赞同：0
> 
> 时间：2012-11-21T06:50:06.777
> 
> 标签：.htaccess, url, url-rewriting, webserver

我是重写网站网址名称的新手。我有一个网站网址，例如`http://66.15.101.250/test/`. 这是我拥有的服务器链接所以我想将此站点 url 更改为其他名称 `http://testsite/test/`（我不想给这个 ip 地址 url 提供域名）。我有其他站点在此`http://66.15.101.250/test/`服务器上运行。我不知道该怎么做，我该怎么做。

这是否可以通过 .htaccess 文件或其他方式实现

**提前致谢**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T06:59:09.160

您的服务器只能响应它收到的请求，并且只会接收通过 DNS 路由到它的请求，因此如果您不拥有该域名，则无法接收指向它的公共流量。您可以静默地将用户重定向 `http://66.15.101.250/test/`到在 找到的内容，`http://testsite/test/`但他们仍会`http://66.15.101.250/test/`在浏览器中看到该 url。

如果您考虑一下，这是一件好事，您不能这样做，否则我可以让**stealyourcreditcardinfo.com**显示为**paypal.com**。确实，您所询问的大多数用途都不是合法的……

出于您自己的内部测试目的，您可以为 testsite.com 创建虚拟主机条目，您的服务器将响应它收到的任何 testsite.com 请求。然后，您将 HOSTS 文件更改为将 testsite.com 指向 127.0.0.1，并且 testsite.com 将在您的浏览器中运行，但只能在您的计算机上运行，​​因为您手动覆盖了自己的 DNS。其他人使用的 DNS 仍在将 testsite.com 指向其他地方的实际 IP 地址

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:01:03.173

如果您出于测试目的需要它（在我看来），您可以放入`66.15.101.250 testsite`您的[`hosts`文件](http://en.wikipedia.org/wiki/Hosts_file)`testsite`并在您的网络服务器中配置一个虚拟主机。

# entity-framework - 在实体框架中转换类

> ID：13487840
> 
> 赞同：1
> 
> 时间：2012-11-21T06:50:10.850
> 
> 标签：entity-framework, ef-code-first, code-first

我正在使用 EF5 和代码优先。

我有一个名为 FooBase 的抽象基类。Foo1 和 Foo2 都继承自 FooBase。我使用基于名为 Bar 的鉴别器的 EF 映射配置。因此，如果 Bar = someValue，则创建 Foo1... 如果 Bar 是 anotherValue，则创建 Foo2。

由于 Bar 是一个鉴别器，我无法将它作为任何 Foo 类的属性访问。

我现在需要将 Foo1 的实例转换为 Foo2。我使用反射并将属性移动到新实例，包括 Foo1 的键值。这是一个完全相同的副本，只是它是不同的类型。我将 EntityState 更改为已修改并保存到数据库。

但是，数据库中的鉴别器值没有得到更新。它仍然保持与 Foo1 相同的值。

我可以猜测，由于实体仅设置为修改，EF 不会费心检查鉴别器。

有谁知道解决这个问题的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:21:33.297

您不能将现有实例更改为另一种类型。与键值关联的实体的类型是不可变的。如果要从 Foo1 创建 Foo2 ，则需要使用新键值创建一个新实例并将其插入数据库。只需修改将始终保留密钥和鉴别器。

如果您真的需要更改类型并保留密钥继承不是您的解决方案。将键视为等同于引用，将鉴别器视为等同于 .NET 中的类型 - 您无法更改现有引用的类型。

# python - 如何在一个域下运行两个项目？

> ID：13487843
> 
> 赞同：0
> 
> 时间：2012-11-21T06:50:36.463
> 
> 标签：python, django, mod-wsgi

您好我想在单个域下运行两个项目。

现在只有一个项目正在运行（意味着第一个项目的 url 正在运行），如果我传递了第二个项目的 url，那么它告诉我 url 不存在。

我是第一次这样做，我不知道该怎么办？

所以请任何人都可以告诉我我是如何做到的，哪些是我必须编辑的文件以及如何编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T22:41:42.347

读：

[http://blog.dscpl.com.au/2012/10/requests-running-in-wrong-django.html](http://blog.dscpl.com.au/2012/10/requests-running-in-wrong-django.html)

并使用您正在使用的 mod_wsgi 配置编辑您的问题，以便查看您现在是如何尝试的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:52:42.837

您可以使用 VirtualHosts 创建子域。

[http://httpd.apache.org/docs/2.2/vhosts/examples.html](http://httpd.apache.org/docs/2.2/vhosts/examples.html)

# iphone - drawRect 在 iPhone（模拟器）中反转 imageView

> ID：13487844
> 
> 赞同：0
> 
> 时间：2012-11-21T06:50:43.037
> 
> 标签：iphone, ios, uiimageview, drawrect

我已经看到[了这个](https://stackoverflow.com/questions/868052/how-does-the-coordinate-system-in-an-cgcontextref-look-like/868621#868621)和[这个](https://stackoverflow.com/questions/9927031/background-imageview-is-upside-downflipped-when-i-use-cptpgraphhostingview-co)，但这并不能消除我的疑问。

我有一个自定义的 imageView 类，基本上是一个子类。我需要在特定像素值的 UIView 上添加子图像视图。当我使用自定义图像视图（绘制矩形）绘制这些图像时，我的图像被反转。

请帮助我需要在我的框架中进行哪些更改，以使图像不会倒置。

下面是图片。![倒](../Images/ea0bc3b5996fa5332d2621a42c3eb881.png)

自定义图像视图.m

```
@implementation CustomImageView
@synthesize customImage;

- (id)initWithFrame:(CGRect)frame {

    self = [super initWithFrame:frame];
    if (self) {
        self.backgroundColor = [UIColor clearColor];
        // Initialization code.
    }
    return self;
}

- (void)drawRect:(CGRect)rect{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextDrawImage(context, rect, customImage.CGImage);
    [super drawRect:rect];
}

- (void)dealloc {
    [customImage release];
    [super dealloc];
}

@end 
```

CustomImageView.h

```
@interface CustomImageView : UIView
{

}
@property(nonatomic,retain)UIImage *customImage;
@end 
```

我正在使用这个如下

```
-(void)drawArrowImagewithStartX:(CGFloat)X1 startY:(CGFloat)Y1 andEndX:(CGFloat)X2     endY:(CGFloat)Y2
{
    CustomImageView *arrowImageView = [[CustomImageView alloc]     initWithFrame:CGRectZero];
    CGRect startPointFrame = CGRectZero;
    CGRect endPointFrame = CGRectZero;
    CGFloat arrowWidth = 0.0;
    CGFloat arrowHeight = 0.0;

    CGFloat y1 = -(Y1+194.0);
    CGFloat y2 = -(Y1+194.0);
    if (isMapZoomed) {
        startPointFrame = CGRectMake(X1, Y1, 16.0, 16.0);
        endPointFrame = CGRectMake(X2, Y2, 16.0, 16.0);
        arrowWidth = 5.0;
        arrowHeight = 25.0;
    }
    else {
        startPointFrame = CGRectMake(X1, y1, 8.0, 8.0);
        endPointFrame = CGRectMake(X2, y2, 8.0, 8.0);
        arrowWidth = 10.0;
        arrowHeight = 50.0;
    }

    CustomImageView *startImageView = [[CustomImageView alloc]     initWithFrame:CGRectZero];
    startImageView.frame = startPointFrame;
    if (stepNo == 0) 
        startImageView.customImage = [UIImage imageNamed:KStartFlag];
    else 
        startImageView.customImage = [UIImage imageNamed:KStartPoint];

    CustomImageView *endImageView = [[CustomImageView alloc] initWithFrame:CGRectZero];
    endImageView.frame = endPointFrame;
    if (stepNo == ([self.allPOIDetailsArray count]-1)) 
        endImageView.customImage = [UIImage imageNamed:KEndFlag];
    else
        endImageView.customImage = [UIImage imageNamed:KEndPoint];

    if(X1 == X2){
        if (y1 > y2){
            arrowImageView.frame = CGRectMake(X2, (y1-(y1-y2)/2), arrowWidth,     arrowHeight);
            arrowImageView.customImage =[UIImage imageNamed:KArrowUp];
        }
        else{
            arrowImageView.frame = CGRectMake(X1, (y1+(y2-y1)/2), 5.0, 25.0);
            arrowImageView.customImage =[UIImage imageNamed:KArrowDown];
            }
    }
    else {
        if (X1 > X2) {
            arrowImageView.frame = CGRectMake((X1-(X1-X2)/2), y2, 25.0, 5.0);
            arrowImageView.customImage = [UIImage imageNamed:KArrowLeft];
        }
        else{
            arrowImageView.frame = CGRectMake((X1+(X2-X1)/2), y1, 25.0, 5.0);
            arrowImageView.customImage = [UIImage imageNamed:KArrowRight];
        }
    }

    for(UIView *subvw in self.zoomingView.subviews)
        if ([subvw isKindOfClass:[UIImageView class]]) {
            for (UIView *subview in subvw.subviews)
                [subview removeFromSuperview];
        [subvw addSubview:startImageView];
        [subvw addSubview:endImageView];
        [subvw addSubview:arrowImageView];
        NSLog(@"Subview frame %@",NSStringFromCGRect(subvw.frame));
        NSLog(@"\n\nImage frame %@ %@",NSStringFromCGRect(arrowImageView.frame),NSStringFromCGRect(startImageView.frame));
    }
[arrowImageView release];
[startImageView release];
[endImageView release];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:03:28.213

是的，这是正常行为。

UIkit 左上角坐标 (0,0)
OpenGL/CoreGraphics 左下角坐标 (0,0)

因此你的图像似乎是倒置的。

**您可以通过以下方式解决此问题：**

*   将原点向上移动视图的高度。

*   否定（乘以 -1）y 轴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T05:46:23.910

两全其美，使用 UIImage`drawAtPoint:`或`drawInRect:`同时指定您的自定义上下文：

```
UIGraphicsPushContext(context);
[image drawAtPoint:CGPointZero];
UIGraphicsPopContext(); 
```

`CGContextTranslateCTM`您也可以使用or来避免修改上下文`CGContextScaleCTM`。

# oracle - 需要有关在 Oracle 10g 中运行的作业的建议

> ID：13487845
> 
> 赞同：1
> 
> 时间：2012-11-21T06:50:47.727
> 
> 标签：oracle, oracle10g

我有一个在 ORacle 10g 生产数据库中运行的作业，它同步两个数据库表 A 和 B。该作业从表 A 中获取数据并插入到表 B 中。该作业每天运行，在过去的几个月中，它开始在生产中失败出现错误“检索数据时出错 -54”。在检查存储过程时，当其他作业锁定表 A 中的记录并且我们的作业无法处理相同的记录时，我可以看到作业由于锁定记录问题而失败。所以我开始寻找我在下面给出的一些可能的解决方案。

1.  更改作业的运行时间，以便它可以处理记录。但这无济于事，因为表 A 非常关键，并且总是被生产作业使用。它还具有来自用户的实时更新。

2.  使用“SKIP LOCKED”代替“No WAIT”，这样作业将跳过锁定的记录并正常运行。但是这里的问题是，如果跳过锁定的记录（这与庞大的生产数据相比总是可以忽略不计），那么当天表A和B中的数据就会不匹配。第二天运行将清除此问题，因为作业也会选择前几天未选择的记录。但是作业失败天数的轻微不匹配可能会导致小问题

3.  让作业等到所有记录都被解锁和处理。但这又会导致问题，因为我们无法预测作业将处于等待状态（长时间运行状态）多长时间。

到目前为止，对我来说一种可能的解决方案是使用选项 2，并忽略表 A 和 Bs 数据之间的微小偏差。Oracle 10g Db 中是否有任何其他方式可以运行作业而不会失败并长时间运行并处理所有记录。我希望得到一些技术指导。

谢谢铅

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:26:11.210

我会处理异常（注意，您必须自己初始化`EXCEPTION`或处理`OTHERS`并检查`SQLCODE`）并跟踪被跳过的行的 ID。这样，您可以在处理完所有可用记录后重试它们。

像这样的东西：

```
DECLARE

  row_is_locked EXCEPTION;
  PRAGMA EXCEPTION_INIT(row_is_locked, -54);

  TYPE t_id_type IS VARRAY(1) OF INTEGER;
  l_locked_ids t_id_type := t_id_type();

  l_row test_table_a%ROWTYPE;

BEGIN

  FOR i IN (
    SELECT a.id
    FROM test_table_a a
  )
  LOOP

    BEGIN

      -- Simulating your processing that requires locks
      SELECT *
      INTO l_row
      FROM test_table_a a
      WHERE a.id = i.id
      FOR UPDATE NOWAIT;

      INSERT INTO test_table_b 
      VALUES l_row;

      -- This is on the basis that you're commiting
      -- to release the lock on each row after you've
      -- processed it; may not be necessary in your case
      COMMIT;

    EXCEPTION

      WHEN row_is_locked THEN
        l_locked_ids(l_locked_ids.LAST) := i.id;
        l_locked_ids.EXTEND();

    END;

  END LOOP;

  IF l_locked_ids.COUNT > 0 THEN
    FOR i IN l_locked_ids.FIRST .. l_locked_ids.LAST LOOP
      -- Reconcile the remaining ids here
      NULL;
    END LOOP;
  END IF;

END; 
```

# ruby - 使用 Nokogiri 进行快速 XML 解析

> ID：13487846
> 
> 赞同：1
> 
> 时间：2012-11-21T06:50:47.383
> 
> 标签：ruby, nokogiri

我正在用 Ruby 和 Nokogiri 解析一个 XML 文件，但是我在执行时间方面遇到了一些问题。4000 行需要一分钟 - 这太多了。我试图找到一些代码优化的想法。

这是代码示例：

```
input = Nokogiri::XML(File.open(file_name))
input.xpath('//Transition').each do |transition_record|
  from = transition_record.xpath('@From')
  to = transition_record.xpath('@To')
  name = transition_record.xpath('@Name')
  Transition.create do |transition|
    transition.from_id = from.to_s
    transition.to_id = to.to_s
    transition.name = name.to_s

    if transition_record.at_xpath('Condition').at_xpath('@Type')
      transition.condition = transition_record.at_xpath('Condition').at_xpath('@Type').to_s
    end
  end
end 
```

`Transition`在 XML 中没有固定的位置，可以在任何级别。另外，我正在以某种方式解析其他三个标签。

有人对我如何改进有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T22:08:20.417

您可以重新组织您的代码，以便使用 Nokogiri 创建一个哈希数组，然后您可以直接在`create`. 这将允许您分别为每个部分计时。我想你会发现 Nokogiri 不是问题所在。

# ruby-on-rails - 使用 link_to 和 UJS 传递参数

> ID：13487850
> 
> 赞同：1
> 
> 时间：2012-11-21T06:51:10.673
> 
> 标签：ruby-on-rails, parameters, parameter-passing, link-to

我很难理解使用 link_to 和 UJS 传递参数的正确方法。

我有以下资源：

*   相片
*   注释
*   用户

用户试图通过单击“添加评论”来评论照片。发生这种情况时，会弹出一个使用 UJS 的框，显示使用 new.js.erb 文件呈现的表单。在“创建评论”发布后，调用 create.js.erb 文件来处理更新，它只是隐藏评论框并将评论添加到评论列表中。

在我的照片的 index.html.erb 中，我正在执行以下操作：

我指定一个链接来添加通过当前照片的 id 传递的评论。

```
<%= link_to 'Add Comment', new_comment_path( photo_id: photo.id ), remote: true %> 
```

这给了我 url：0.0.0.0:3000/comments/new?photo_id=1，这是我所期望的。

现在我的问题是，如何在我的新操作中处理这个传递的参数，以便我可以指定类似

```
@comment.photo_id = photo_id 
or 
@comment.photo_id = params[:photo_id] 
```

在我的comments_controller.rb 中？

我可以在 JS 中做些什么来帮助我将 photo_id 值保存到我的@comment.photo_id 列以添加评论？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:00:53.020

是的，您可以按照您指定的方式在参数中获取 photo_id。假设 Photo 在您的案例中有很多评论。因此，在您的情况下，当您在 comments_controller 中获得 params[:photo_id] 时，您可以执行以下操作：-

```
@photo = Photo.find_by_id(params[:photo_id])
@photo.comments.create(params[:comment]) 
```

请从 guides.rubyonrails.org 阅读有关嵌套资源的信息，以便您可以以安静的方式生成创建评论路线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:46:22.213

首先，我建议您开始使用嵌套路由来处理评论或点赞等内容。你会在这里找到 railscast [nested_routes_railscast](http://railscasts.com/episodes/139-nested-resources)

回到你的问题，`@comment.photo_id = params[:photo_id]`在你的控制器中使用。

* * *

有一种更好的方法可以做到这一点，您可以在照片展示页面上已有弹出窗口。在弹出窗口中，您可以有一个新评论模型的表单。单击特定照片后，您只需使用 javascript 获取该照片的**id并将其复制到表单中****:photo_id**的隐藏字段中。

# javascript - 通过javascript获取特定的windows版本

> ID：13487856
> 
> 赞同：1
> 
> 时间：2012-11-21T06:51:33.607
> 
> 标签：javascript, windows-7, operating-system, windows-server-2008, user-agent

我知道我可以使用 JavaScript 从浏览器端的“navigator.userAgent”获取一些操作系统信息，[这篇文章讨论了一些细节。](https://stackoverflow.com/questions/4006420/detect-windows-version-with-javascript)

我的问题是，当我尝试确定用户使用的是 Windows 7 还是 Windows Server 2008 时，我遇到了问题。因为windows版本代码相同，所以都是“windows NT 6.1”。

除了“navigator.userAgent”之外，还有其他方法可以使用 JavaScript 在浏览器端检测特定的 Windows 版本吗？

顺便说一句，以下是我的检测代码。目前我无法区分 windows 7 和 windows server 2008 ......

```
(function (window) {
        //Windows detection
        var otherOS = "Other OS";
        var WindowsDetect = {
            Start: function () {
                this.OSVer = this.AnalyseOSVer(this.OSData) || otherOS;
                if (this.OSVer != otherOS) {
                    this.AnalyseBit();
                }
            },
            AnalyseOSVer: function (data) {
                var targetString = this.DataString.toUpperCase();
                if (targetString.indexOf(this.WinStr.toUpperCase() > 0)) {
                    this.IsWin = true;
                    for (var i = 0; i < data.length; i++) {
                        var subString = data[i].SubString.toUpperCase();
                        if (typeof data[i].SpecialString != "undefined" && targetString.indexOf(data[i].SpecialString.toUpperCase()) < 0) {
                            continue;
                        }
                        if (targetString && targetString.indexOf(subString) > 0) {
                            return data[i].NickName;
                        }
                    }
                }
            },
            AnalyseBit: function () {
                var targetString = this.DataString.toUpperCase();
                for (var i = 0; i < this._64BitStrs.length; i++) {
                    var bitStr = this._64BitStrs[i].toUpperCase()
                    if (targetString.indexOf(bitStr) > 0) {
                        this.Is64Bit = true;
                        return;
                    }
                }
            },
            DataString: window.navigator.userAgent,
            _64BitStrs: ["WOW64", "Win64; x64;"],
            Is64Bit: false,
            WinStr: "Windows NT",
            IsWin: false,
            OSData: [
            {
                SubString: "Windows NT 5.1",
                NickName: "Windows XP"
            },
            {
                SubString: "Windows NT 5.2 ",
                NickName: "Windows Server 2003/Windows XP x64 Edition"
            },
            {
                SubString: "Windows NT 6.0",
                NickName: "Windows Vista"
            },
            {
                SubString: "Windows NT 6.1",
                NickName: "Windows 7"
            },
            {
                SubString: "Windows NT 6.2",
                SpecialString: "ARM",
                NickName: "Windows RT"
            },
            {
                SubString: "Windows NT 6.2",
                NickName: "Windows 8"
            }
        ]
        };
        WindowsDetect.Start();
        var windowsVer = WindowsDetect.OSVer;
    })(window) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-07T21:47:25.280

我在玩 JavaScript，这效果最好。

```
<script type="text/javascript">
var OSName="Unknown OS";
if (navigator.appVersion.indexOf("Windows NT 6.2")!=-1) OSName="Windows 8";
if (navigator.appVersion.indexOf("Windows NT 6.1")!=-1) OSName="Windows 7";
if (navigator.appVersion.indexOf("Windows NT 6.0")!=-1) OSName="Windows Vista";
if (navigator.appVersion.indexOf("Windows NT 5.1")!=-1) OSName="Windows XP";
if (navigator.appVersion.indexOf("Windows NT 5.0")!=-1) OSName="Windows 2000";
if (navigator.appVersion.indexOf("Mac")!=-1) OSName="Mac/iOS";
if (navigator.appVersion.indexOf("X11")!=-1) OSName="UNIX";
if (navigator.appVersion.indexOf("Linux")!=-1) OSName="Linux";

document.write('Your OS: '+OSName);
</script> 
```

如果您需要帮助，请在 Windows NT 上尝试这个 Wikipedia 页面。[http://en.wikipedia.org/wiki/Windows_NT#Releases](http://en.wikipedia.org/wiki/Windows_NT#Releases)

# javascript - 不允许输入个人电子邮件地址的脚本

> ID：13487860
> 
> 赞同：-1
> 
> 时间：2012-11-21T06:52:02.230
> 
> 标签：javascript

```
var str=document.validation.emailcheck.value
var filter=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i 
```

我有以下脚本。我需要一个不允许用户输入个人电子邮件地址的脚本，例如 gmail、yahoo、hotmail 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:45:00.160

没有脚本可以可靠地阻止*每一个*个人电子邮件地址。电子邮件提供商的种类太多了。

现在，从技术上讲，您可以在电子邮件中建立一个不允许域的“黑名单”，例如：

```
var blocked = ["google", "yahoo", "hotmail", "etc"]; 
```

然后检查电子邮件地址是否包含其中任何一个，但这也会阻止为这些公司工作的任何人。

真正的问题是你为什么要这样做。

# git - Git子模块：参考不是一棵树

> ID：13487864
> 
> 赞同：3
> 
> 时间：2012-11-21T06:52:44.233
> 
> 标签：git, git-submodules

> **可能重复：**
> [Git 子模块头“引用不是树”错误](https://stackoverflow.com/questions/2155887/git-submodule-head-reference-is-not-a-tree-error)

Git的这个错误：

> 致命：参考不是一棵树：081fe062d788900919a64d2222891a7357aa1364

我知道这个错误应该是类似于尚未推送的提交。但不可能吧？！

我从 Github 克隆了 Mapbox-ios-sdk。Mapbox-ios-sdk 有这个 FMDB 模块（又一个 Git 存储库），我对其进行了修改（我只是添加了一个带有一些 C 宏的文件）。

所以这就是（我认为）我所做的：

(1)。github fork FMDB，克隆我的 fork，修改它，将它推回我的 fork。

(2)。克隆 mapbox-ios-sdk，切换分支进行开发（因为我需要它）。删除原来的 FMDB 模块，添加我的 FMDB 模块的 fork。

之后，当我从我的 mapbox-ios-sdk fork 克隆时，将分支切换到开发，没问题。

但实际上我得到了这个使用 mapbox-ios-sdk 的主项目：

(3) 从我的主项目中删除 mapbox-ios-sdk 子模块。添加一个新的子模块，它是我自己的 mapbox-ios-sdk 的分支。将其推回我的 Bitbucket 私人项​​目。

`git clone --recursive`当我在我的私人项目中时，事情现在呕吐了。它会说参考不是一棵树。但显然是这样，因为我仍然可以从我的 mapbox-ios-sdk fork 克隆！

可能是什么问题呢？

编辑：好吧，我通过重新执行所有步骤来修复它。我仍然不明白为什么`git clone --recursive mapbox-ios-sdk`有效但不`git clone --recursive master_project`包含 mapbox-ios-sdk

# java - 避免 RPC (SOAP) API 之间的中间数据转换？

> ID：13487865
> 
> 赞同：0
> 
> 时间：2012-11-21T06:52:44.133
> 
> 标签：java, web-services, rest, soap, jax-ws

![在此处输入图像描述](../Images/904297af20743f7c7278dfd612cd0a0f.png)

假设我开发了两个名为**ProductAPI**和**OrderAPI**的服务。它们都使用**公共域模型**（公共实体层次结构）。

这两个服务最终都公开为 RCP（SOAP 或 REST）。OrderAPI 在内部调用 ProductAPI。

***在 REST 的情况下：***

我们可以使用 JAX-RS 开发 ProductAPI，并且我们可以实现一个“ProductAPI REST Client”以在 OrderAPI 中使用来访问 ProductAPI。

此客户端可以使用相同的类层次将 JSON 反序列化为 ProductAPI 中使用的相同类。

所以，没有中间格式转换。

***在 SOAP 的情况下：***

我们使用 JAX-WS（或 Axis2..etc）开发 ProductAPI 并在 WSDL 中公开服务。在这种情况下，我们必须使用公开的 WSDL 实现“ProductAPI SOAP 客户端”。（可能正在使用使用公开的 WSDL 的存根生成工具）。

生成的类是从 WSDL 中的 XSD 定义生成的，如果我们想使用相同的公共域模型类，我们必须进行额外的格式转换。

我的问题：

1）在 SOAP 的情况下，有没有办法跳过这种格式转换？

2）在企业应用程序（如电子商务）中，避免这种中间数据转换以提高性能是一种好习惯吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:36:30.027

1.  要在进程之间移动数据，需要对数据进行序列化。您当然可以为序列化数据使用不同于 SOAP 的更好的格式，但如果您已经拥有 SOAP，那么工作量会更大。

2.  在这种项目中是否值得用程序员的努力换取性能？我的猜测是否定的，因为无论如何性能可能已经足够好。如果不是，通常的建议是在优化任何东西之前测量和识别瓶颈。

# c++ - 从文件中读取数字到两位有效数字？

> ID：13487866
> 
> 赞同：1
> 
> 时间：2012-11-21T06:52:47.970
> 
> 标签：c++

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

int main() {
    ifstream basketFile;
    basketFile.open("basket.txt");

    double price;

    while (!basketFile.eof()) {
        basketFile >> price;
        cout << price << endl;
    }

} 
```

篮子.txt

```
27.9933
18.992
9.754
11.2543 
```

无论如何，我可以让数字显示为只有两位有效数字？另外，如果我想将一个数字四舍五入，我该怎么做？例如，如果我有数字 6.66 和 4.33，我想要 6.66->6.70 和 4.33->4.30。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:56:48.883

试试[`setprecision`](http://www.cplusplus.com/reference/iostream/manipulators/setprecision/)。

如需对数字进行四舍五入，请参阅[`round`](http://en.cppreference.com/w/cpp/numeric/math/round)。

此外，如果您决定四舍五入到 0.1 精度，我相信您可以`0`在四舍五入的结果后附加零。

* * *

```
#include <iostream>
#include <iomanip>
using namespace std;

void p(double x) {
  cout << fixed << setprecision(1) << x << 0 << endl;
}

int main() {
  p(27.9933);
  p(18.992);
  p(9.754);
  p(11.2543);
  p(6.66);
  p(4.33);
  return 0;
} 
```

上面的代码输出：

```
28.00
19.00
9.80
11.30
6.70
4.30 
```

希望这是你想要的。

# iphone - 将热链接图像添加到电子邮件正文

> ID：13487869
> 
> 赞同：-2
> 
> 时间：2012-11-21T06:53:00.670
> 
> 标签：iphone, objective-c, ios, xcode

如何将热链接图像添加到电子邮件正文？

我想要的是“当点击图片时，它应该指向一个 url”> 图片本身应该作为一个链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:56:06.240

只要接收电子邮件客户端支持 html 呈现，您就可以在 html 中执行此操作。

```
<a href="http://link.com"><img src="http://linktoimg.com/img.jpg" /></a> 
```

# ruby-on-rails - 在设计中覆盖密码控制器不起作用

> ID：13487873
> 
> 赞同：2
> 
> 时间：2012-11-21T06:53:20.247
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

在设计中覆盖密码控制器时出现问题。更改密码后我不想登录用户，所以我想覆盖密码控制器，我尝试如下并收到错误。我无法确定问题是什么，所以请帮助我。以下是passwords_controller.rb

```
class PasswordsController < Devise::PasswordsController
    prepend_before_filter :require_no_authentication
    # Render the #edit only if coming from a reset password email link
    append_before_filter :assert_reset_token_passed, :only => :edit

    def new
      super
    end

    def create
        super
    end

    def edit
        self.resource = resource_class.new
        resource.reset_password_token = params[:reset_password_token]
    end

    def update
        self.resource = resource_class.reset_password_by_token(resource_params)

        if resource.errors.empty?
            flash_message = resource.active_for_authentication? ? :updated : :updated_not_active
            set_flash_message(:notice, "New password has been saved")
            redirect_to new_user_session_path
            else
            respond_with resource
        end
    end

    protected

    # The path used after sending reset password instructions
    def after_sending_reset_password_instructions_path_for(resource_name)
        new_session_path(resource_name)
    end

    # Check if a reset_password_token is provided in the request
    def assert_reset_token_passed
        if params[:reset_password_token].blank?
            set_flash_message(:error, :no_token)
            redirect_to new_session_path(resource_name)
        end
    end

    # Check if proper Lockable module methods are present & unlock strategy
    # allows to unlock resource on password reset
    def unlockable?(resource)
        resource.respond_to?(:unlock_access!) &&
        resource.respond_to?(:unlock_strategy_enabled?) &&
        resource.unlock_strategy_enabled?(:email)
    end
end 
```

我的路线是

```
devise_for :users, :controllers => { :passwords => 'passwords' } 
```

我得到的错误是

```
NameError in PasswordsController#update
undefined local variable or method `resource_params' for #<PasswordsController:0x000001008231c8> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:34:50.457

您的“resource_params”未定义。也许您应该将其作为参数获取：

```
def update
    self.resource = resource_class.reset_password_by_token(params[:resource_params])
    .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:48:40.820

最后它起作用了。我使用的是设计版本 1.5.3，它不提供 resource_params 方法，所以我从设计版本 1.5.3 复制了以下内容，它可以工作。

> self.resource = resource_class.reset_password_by_token(params[resource_name])

# xaml - 学习适用于 Windows 应用商店应用程序的 xaml 的最佳资源？

> ID：13487874
> 
> 赞同：4
> 
> 时间：2012-11-21T06:53:28.107
> 
> 标签：xaml, windows-8, winrt-xaml, windows-store-apps

我正在寻找书籍、在线教程、文章、培训视频和任何类型的资源来学习 XAML for Windows Store App。我想掌握 XAML 来构建强大的应用程序。出于这个原因，我将不胜感激任何有用的信息。

继续加油！

**概括**

训练

[MSDN](http://msdn.microsoft.com/en-US/windows/apps/br229512)

[世代app.com](http://www.generationapp.com)

博客

[31 天的 Windows 8](http://www.jeffblankenburg.com/category/31-days-of-windows-8/)

代码示例

[MSDN Windows 8 应用示例](http://code.msdn.microsoft.com/windowsapps/Windows-8-Modern-Style-App-Samples)

图书

[使用 C# 和 XAML 构建 Windows 8 应用程序（Microsoft Windows 开发系列）。杰里米·莱克尼斯](http://www.amazon.es/Building-Windows-Microsoft-Development-ebook/dp/B009WQ44Q4/ref=sr_1_1?ie=UTF8&qid=1353535263&sr=8-1)

传入书籍

[编程 Windows®，第 6 版。查尔斯·佩佐德](http://shop.oreilly.com/product/0790145369079.do)

工具

[视觉工作室](http://www.microsoft.com/visualstudio/eng/downloads#express-win8)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:39:50.793

我真的很喜欢以下系列

[31 天的 Windows 8](http://www.jeffblankenburg.com/category/31-days-of-windows-8/)

此外，我认为[Generation App](http://www.generationapp.com/#fbid=nDXPjlKGKNl)有一些很好的资源，甚至提供免费的 1 On 1 应用咨询。

对我来说最好的资源之一是[Windows 8 应用程序示例](http://code.msdn.microsoft.com/windowsapps/Windows-8-Modern-Style-App-Samples)，使用这些示例确实很有帮助，尽管并非所有示例都是直截了当的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T19:42:42.827

我的书《使用 C# 和 XAML 构建 Windows 8 应用程序》（我故意避免发布“虚链接”，但您应该通过搜索标题很容易找到它）有一整章专门介绍 XAML，我认为这非常彻底.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T10:51:20.593

我可以推荐 Charles Petzold 的这本书：
[Programming Windows®, 6th Edition](http://shop.oreilly.com/product/0790145369079.do)

它包含基本指南、如何使用和编写 XAML 代码、如何使用页面布局、使用样式和模板等。目前它可作为折扣价预览。最后一本书预计在明年年初出版。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T14:48:10.280

我认为学习新技术的最佳资源是用它编写一些代码。我使用的最有用的学习机制是 Contoso Cookbook 动手实验室，它指导您构建 Windows 应用商店应用程序的大部分新功能。您可以从[http://www.microsoft.com/en-us/download/details.aspx?id=29854](http://www.microsoft.com/en-us/download/details.aspx?id=29854)下载它。为 C# 和 XAML 选择 Win8CS.Setup.exe 下载。

您将需要适用于 Windows 8 的 Visual Studio Express 2012；[您可以从http://aka.ms/JenVS2012](http://aka.ms/JenVS2012)免费下载它（页面中间，蓝色）。

最后，[Generation App](http://aka.ms/JenGenApp)包含一个旨在帮助您[在 30 天内学​​会编写 Windows 应用商店应用程序的程序](http://aka.ms/Jen30TLWin8)。每天您都会收到一封电子邮件，告诉您下一步，以便您可以逐步学习构建应用程序。该计划还提供免费的设计咨询和技术支持。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-22T00:16:08.163

是时候提供最新答案了：

C# 刷新：

> [http://blog.jerrynixon.com/2014/01/free-c-tr​​aining-for-beginners-and.html](http://blog.jerrynixon.com/2014/01/free-c-training-for-beginners-and.html)

混合训练：

> [http://blog.jerrynixon.com/2014/01/the-most-comprehensive-blend-for-visual.html](http://blog.jerrynixon.com/2014/01/the-most-comprehensive-blend-for-visual.html)

开始 XAML：

> [http://blog.jerrynixon.com/2014/02/more-free-training-developing-windows.html](http://blog.jerrynixon.com/2014/02/more-free-training-developing-windows.html)

通用应用程序：

> [http://blog.jerrynixon.com/2014/10/ready-to-learn-developing-universal.html](http://blog.jerrynixon.com/2014/10/ready-to-learn-developing-universal.html)

这里还有更多：

> [http://blog.jerrynixon.com/p/learn.html](http://blog.jerrynixon.com/p/learn.html)

祝你好运！

# css - Em 字体大小在我的 h1 顶部添加边距？

> ID：13487882
> 
> 赞同：0
> 
> 时间：2012-11-21T06:53:47.233
> 
> 标签：css, yui, reset, ems

[我在我的个人网站http://www.tommaxwell.me](http://www.tommaxwell.me)第一次开始使用 CSS 重置 (YUI) ，它对跨浏览器兼容性有很大帮助。但是，在 webkit 浏览器（Chrome、Safari）中，ems 字体大小似乎会在 h1 的顶部添加边距。当我删除 em 时，它会退回到默认大小并且顶部没有边距。在 Opera 和 Firefox 中，边距不存在。我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:00:56.990

请尝试改用 px 或试试这个

```
.webkit h1{margin:0px} 
```

谢谢希望它会有所帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T07:49:00.943

如果您检查 h1 元素，您将看到 h1 标签的所有边距均为 0。

但是所有浏览器中 h1 标签的高度各不相同，这是由于它们的渲染引擎。这种变化可能会让你对保证金产生错觉

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:46:21.110

我不确定你的意思是什么，因为它们在大多数浏览器中对我来说都是一样的，但我看不到你在任何地方设置 line-height，作为一个建议，可能值得摆弄 line-height 以查看空间是从那里来的吗？

```
h1 {
    line-height: 1.0em;
} 
```

# c# - 项目序列，以便每个元素将成为它之前的所有元素的总和，使用 LINQ

> ID：13487887
> 
> 赞同：0
> 
> 时间：2012-11-21T06:54:20.647
> 
> 标签：c#, linq

我有以下代码将数组的每个元素转换为之前所有元素的总和。程序实现如下：

```
float[] items = {1, 5, 10, 100}; //for example
float[] sums = new float[items.Length];
float total = 0;
for(int i = 0; i < items.Length; i++){
  total+=items[i];
  sums[i] = total;
} 
```

我将如何将其实现为 LINQ 单线？我知道它可以做到，例如

```
items.Select((x, i) => items.Take(i + 1).Sum()) 
```

但我认为当数组大小增加时效率不是很高，因为它必须对每个元素执行 Sum() 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T06:59:03.053

老实说，LINQ 并不能非常干净地支持这种情况 - 您需要聚合和投影的混合。你*可以*用副作用来做到这一点，这很可怕：

```
// Don't use this!
float sum = 0f;
var sums = items.Select(x => sum +=x).ToArray(); 
```

LINQ 的副作用很糟糕。同样，您*可以*使用`Take`/来执行此操作`Sum`，如 RePierre 和 LB 所示 - 但这需要一个*自然*为O(N) 的操作并将其转换为 O(N^2) 的操作。

我不久前开始的[MoreLINQ 项目](http://morelinq.googlecode.com)[`Scan`](https://code.google.com/p/morelinq/source/browse/MoreLinq/Scan.cs)在其和[`PreScan`](https://code.google.com/p/morelinq/source/browse/MoreLinq/PreScan.cs)成员中确实对此提供了支持。在这种情况下，你想要`Scan`，我相信：

```
var sums = items.Scan((x, y) => x + y); 
```

如果不想使用第三方库，不想使用副作用，不想`Take`解决方案效率低下，*只*需要添加，*只*需要针对单一类型（例如`float`在你的情况）你可以很容易地介绍你自己的方法：

```
public static IEnumerable<float> RunningSum(this IEnumerable<float> source)
{
    if (source == null)
    {
        throw new ArgumentNullException(source);
    }
    float sum = 0f;
    foreach (var item in source)
    {
        sum += item;
        yield return sum;
    }
} 
```

正如您会注意到的，这与您的原始代码基本相同 - 但被延迟评估并适用于*任何*浮点序列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T06:58:14.873

```
var result = items.Select((item, index) => items.Take(index).Sum() + item); 
```

**编辑** 您可以使用`Aggregate`方法来创建总和：

```
var result = items.Aggregate(new List<float>(), (seed, item) =>
{
    seed.Add(seed.LastOrDefault() + item);
    return seed;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T07:51:47.190

Microsoft 的 Reactive Extensions 团队发布了一个“Interactive Extensions”库，它为`IEnumerable<T>`. 其中之一就是`Scan`完全符合您的要求。

这是计算总计的 IX 方式：

```
IEnumerable<float> results = items.Scan(0.0f, (x1, x2) => x1 + x2); 
```

# android - 如何在 Android 应用中使用应用内购买 1.0.3

> ID：13487889
> 
> 赞同：2
> 
> 时间：2012-11-21T06:54:35.873
> 
> 标签：android, in-app-purchase

我的 android 应用程序我想添加用户从亚马逊购买书籍的功能。

为此，请遵循[https://developer.amazon.com/sdk/in-app-purchasing/documentation/quick-start.html](https://developer.amazon.com/sdk/in-app-purchasing/documentation/quick-start.html)并且所有步骤都在我的应用程序中实施。

我收到此代码的错误 PurchasingManager.initiateItemDataRequest("DeveloperSKU-1234"); 这是我在 android 中的第二个项目，所以我不明白如何使用和使用什么代码。

在 Android 中实现（附加内容或服务）应用内购买的最佳方式是什么？

我找不到任何我应该使用的信息。在此先感谢任何帮助将非常有帮助。

# android - 是否可以在不触发“权限请求”对话框的情况下从 AccountManager 获取身份验证令牌？

> ID：13487890
> 
> 赞同：4
> 
> 时间：2012-11-21T06:54:40.713
> 
> 标签：android, oauth, single-sign-on, accountmanager

我正在开发一个客户端-服务器应用程序，并希望为用户提供单点登录，让他们可以使用 Google 登录。我打算通过使用 AccountManager 在手机上获取访问令牌，然后将此令牌发送到服务器以验证令牌并登录用户来做到这一点。

当我在 AccountManager 中调用 getAuthToken 方法时，会显示一个对话框，用户必须允许这样做，但是 Android 上的 Chrome 允许您登录并将浏览器数据与您的 Google 帐户同步，而不会显示此对话框。因此，Chrome 似乎能够在不向用户显示任何对话框的情况下获取访问令牌，如果我可以对我的应用程序执行相同操作，那就太好了。

在查看 Android 的源代码和[getAuthToken 的实现时，](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/accounts/AccountManagerService.java#1032) 如果应用程序是预安装的应用程序或应用程序 UID 与身份验证器的 UID（Google 帐户）相同，则似乎自动授予访问权限。

我的应用程序和 Chrome 都没有预装，因此在这两种情况下检查都是错误的。我的应用程序当然不能与 Google 帐户身份验证器共享 UID，我假设 Chrome 有可能与身份验证器共享 UID，因为 Google 创建了它们。如果是这种情况，那么它将解释为什么 Chrome 不显示任何对话框。

在请求我可能丢失的访问令牌时，是否有其他方式不向用户显示此对话框？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T14:11:36.023

**不，这是不可能的**

在仔细阅读 Android 源代码后，我发现[hasAuthenticatorUid()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/accounts/AccountManagerService.java#AccountManagerService.hasAuthenticatorUid%28java.lang.String,int%29)方法不仅在 UID 相同的情况下返回 true，而且在应用程序使用与身份验证器签名的相同签名时返回 true。

为了验证 Chrome 是否属于这种情况，我在 Chrome apk 文件中使用了[android-apktool](http://code.google.com/p/android-apktool/)，以便能够查看 Chrome 的 manifest.xml。在那里我可以看到 Chrome 没有使用与身份验证器共享的 UID。

之后，我用自己的调试密钥重新签署了 Chrome apk 并将该 apk 安装在我的手机上。当我这样做并尝试登录 Chrome 时，我得到了几个“权限请求”对话框。

因此，很明显 Chrome 和身份验证器使用相同的密钥进行签名，这就是 Chrome 可以自动获得其他第三方应用程序无法获得的权限的方式。

因此，第三方应用程序不可能在不向用户显示请求许可的对话框的情况下获取 Google 帐户的令牌，这毕竟是一件非常好的事情。我不希望我手机上的任何随机应用程序能够在我不知情的情况下获取我帐户的访问令牌。

# c - 无法在 C 中打印全部内容

> ID：13487891
> 
> 赞同：1
> 
> 时间：2012-11-21T06:54:51.543
> 
> 标签：c

遇到了大问题。假设我有一个指向大字符串（约 1500 个字符）的指针，我想打印它。我在结果中得到的只是该字符串的一部分。在程序打印该部分后，它要求我换行。在我按下 enter 后，程序打印字符串的其余部分并终止。当我尝试在终端或 IDE 中运行我的程序时会发生这种情况。如果我尝试调试它，它会完美运行。我需要它在不终止程序的情况下打印整个字符串。所以，这是代码（代码中有很多错误）：

```
#include<stdio.h>
#include<sys/socket.h>
#include<sys/types.h>
#include<netdb.h>
#include<string.h>

#define SOCKET int        // Apibreziame sinonima 'int' tipui, kad butu
                          // unix ir WIN sistemoms bendras kodas dirbant
                          // su soketu deskriptoriais.
#define closesocket close // Apibreziame sinonima close () funkcijai
                          // closesocket (), kuris yra analogas Windows
                          // tipo sistemose. Tai del kodo suvienodinimo.
#define INVALID_SOCKET -1 // Apibreziame del kodo suvienodinimo, klaidos
#define SOCKET_ERROR -1   // situacijai nusakyti konstantas, kurios WINSOCK'o

#define MAX_CH 255
#define POP3_PORT 110
#define MAXLEN 1024

int main()
{
    SOCKET socketE;
    struct sockaddr_in servaddr;
    struct hostent* h = NULL;

    char* Packet = NULL;

    Packet = (char*)malloc(MAX_CH);
    memset(Packet, 0, sizeof(Packet));

    printf("POP3 server: ");
    gets(Packet);

    /*******{ 
    client connects to the mail server and other stuff
    server sends greeting message
    client receives greeting message 
    }*******/

    if (!strstr(Packet,"+OK")) {
        print_error(Packet);
    }
    else {
        printf("%s", Packet);
        int printedData = 0;
        while (1) {
            Packet = (char*)realloc(NULL, 1);
            memset(Packet, 0, sizeof(Packet));
            gets(Packet);
            strcat(Packet, "\n");
            if (SOCKET_ERROR == SendPacket(&socketE, Packet)) {
                print_error("Error on sending data to mail server.\n");
            }
            memset(Packet, '\0', sizeof(Packet));
            if (SOCKET_ERROR == ReceivePacket(&socketE, &Packet)) {
                print_error("Error on receiving data from mail server.\n");
            }
            if (!strstr(Packet,"+OK")) {
                fwrite(Packet, 1, strlen(Packet), stdout);
                break;
            }
            printf("%s", Packet);  //THIS IS WHERE THE PRINT PART COMES
        }
    }
    close(socketE);
    return 0;
} 
```

好的，所以我发现这个 if 子句（我的意思是，即使这个 if 为假）会阻止程序打印所有内容。如果我删除/评论它，我的程序就可以正常工作。这有可能导致所有问题吗？

```
if (!strstr(Packet,"+OK")) {
    fwrite(Packet, 1, strlen(Packet), stdout);
    break;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:56:13.187

这：

```
Packet = (char*)realloc(NULL, 1);
memset(Packet, 0, sizeof(Packet)); 
```

导致未定义的行为。它分配一个字节（你为什么要这样做？）然后清除`sizeof(Packet)`字节，在当今大多数典型系统上是 4 或 8 个字节。因此，它在分配的内存之外写入。请注意，`sizeof`无法跟踪动态分配，因此整个模式是错误的。

另外，请注意动态内存分配可能*会失败*；`realloc()`在依赖返回的指针有效之前，您必须检查每个调用的返回值。如果是`NULL`，则无法通过它访问。

此外，就像 with 一样`malloc()`，[请不要`realloc()`](https://stackoverflow.com/a/605858/28169)在 C中转换返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:02:21.867

尝试在之后添加冲洗`printf`：

```
printf("%s", Packet);
fflush(stdout); 
```

`printf`use `stdout`，它是行缓冲的。因此，如果字符串末尾`printf`没有，则可以部分刷新（打印）文本。`'\n'`

在您的情况下，当您键入换行符时，未刷新的文本会被刷新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:18:44.210

标准输出是行缓冲的，标准输出流中的字符被保存，直到输出换行符或从连接到终端设备的任何流中读取输入，或者流缓冲区已满。因此，您可以将 '\n' 字符放入 printf 中，例如 printf("%s\n",Packet); 或者只是使用 setbuf(stdout, NULL) 禁用标准输出缓冲；用于 printf 打印完整的字符串

# nagios - Nagios 邮件警报配置

> ID：13487897
> 
> 赞同：0
> 
> 时间：2012-11-21T06:55:14.650
> 
> 标签：nagios

最近我用 postfix 配置了 Nagios。每当服务器/服务关闭时，它会每 1 小时发送一次邮件警报，直到该系统/服务启动。如何配置 nagios 以便它必须仅发送一次系统/服务关闭的邮件警报，并且当状态更改为 up nagios 必须通知我时再次发送邮件警报。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:09:45.630

在您的主机/主机模板/服务/服务模板集 notification_interval 0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-12T08:11:20.380

在您的主机定义中，将 notification_interval 设置为 0：

```
define host{
  use                     generic-host
  host_name               example
  address                 example.com
  notification_interval   0
} 
```

# objective-c - 收到类似“格式不是字符串文字且没有格式参数”之类的警告

> ID：13487898
> 
> 赞同：0
> 
> 时间：2012-11-21T06:55:13.220
> 
> 标签：objective-c, ipad

我在 NSAssert(bgTask == UIBackgroundTaskInvalid,nil) 行收到上述警告。我正在使用 IOS SDK6.0 开发 Xcode4.5.1。如果有人知道原因，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:59:24.230

[" `NSAssert`"](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Functions/Reference/reference.html#//apple_ref/c/macro/NSAssert)期望 NSLog / printf 样式格式字符串作为它的第二个参数。如果您提供一个（而不是“ `nil`”），该警告将消失。

# java - 在同一命令提示符下运行 JAVA 程序

> ID：13487900
> 
> 赞同：0
> 
> 时间：2012-11-21T06:55:28.323
> 
> 标签：java, command-prompt

我使用命令提示符来运行我的 JAVA 程序，但是当我运行 .java 文件时，另一个窗口会快速打开和关闭，我没有时间查看错误，这是我的命令：

```
start java HelloServer -ORBInitialPort 1050 -ORBInitialHost localhost 
```

我该如何解决我尝试过的这个问题：

```
start java HelloServer -ORBInitialPort 1050 -ORBInitialHost localhost -b 
```

我在帮助中找到了，但它不起作用，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T06:58:34.387

您必须打开两个命令提示符控制台，然后键入您给出的命令，而无需“开始”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T07:01:05.597

尝试

`start/b java HelloServer -ORBInitialPort 1050 -ORBInitialHost localhost`

# java - HQL 到标准

> ID：13487907
> 
> 赞同：0
> 
> 时间：2012-11-21T06:55:55.683
> 
> 标签：java, hibernate, criteria

我正在尝试从 HQL 创建一个标准。

简化的 HQL：

```
SELECT
    event.pkid,
    add.name
FROM Event event
LEFT JOIN event.addresses adds
JOIN adds.address add
WHERE adds is null
   or adds.addressType = 'EVENT' 
```

我使用以下标准来生成等效查询。

```
criteria.createAlias("addresses", "adds",
            CriteriaSpecification.LEFT_JOIN)
            .createAlias("adds.address", "add",
            CriteriaSpecification.LEFT_JOIN)
            .setProjection(
                    Projections
                            .projectionList()
                            .add(Projections.property("pkid"))
                            .add(Projections
                                    .property("add.name")))
            .add(Restrictions.or(Restrictions.isNull("addresses"),
                    Restrictions.eq(
                            "adds.addressType.addressType",
                            "EVENT"))); 
```

但它会产生以下查询，

```
select
    this_.pkid as y0_,
    add2_.name as y1_
from event this_
left outer join event_address_map adds1_ on this_.pkid=adds1_.event_pkid
where (this_.pkid is null or adds1_.address_type=?) 
```

不添加第二个连接。我究竟做错了什么？

提前致谢。

# struts2 - Struts2 中的 displaytag 无法找到首字母大写的属性

> ID：13487911
> 
> 赞同：0
> 
> 时间：2012-11-21T06:56:05.390
> 
> 标签：struts2, displaytag, ognl

当我显示名称为 user_id 的属性时，它完美显示。但是如果我想显示像“User_id”这样的值，它会提示找不到该属性（NOMETHODFOUND EXCEPTION）

以及不适当的 OGNL 表达式：(d - 49216) - s

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:17:24.243

# java - 将文本添加到另一个类的标签 - 简单的逻辑问题

> ID：13487913
> 
> 赞同：1
> 
> 时间：2012-11-21T06:56:13.667
> 
> 标签：java, swing, jframe, jlabel

我在一个名为的类中有一个标签和一个按钮`FrameTest`，当我按下按钮时，一个名为`buttonpressed`get 的方法会从该类中执行`Test`。在这种`buttonpressed`方法中，我将为类中找到的标签设置一个文本`FrameTest`。

我遇到的问题是，标签的文本没有设置。原因是我正在创建一个单独的对象来调用该`buttonpressed`方法；

```
public void actionPerformed(ActionEvent arg0) {
                    Test t = new Test();
                    t.buttonpress();
                } 
```

我在`Test`类的主要方法中创建一个单独的对象来创建 UI。

```
public static void main(String[] args) {

         FrameTest f = new FrameTest();
         f.mainScreen();

    } 
```

完整代码如下；

```
public class FrameTest extends JFrame {

private JPanel contentPane;
private JLabel lblLabel;
private FrameTest ft = this;

//private FrameTest frame;
/**
 * Launch the application.
 */
public  void mainScreen() {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                //FrameTest frame = new FrameTest();
                //setVisible(true);

                FrameTest frame = ft;
                frame.setVisible(true);

            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

public void writeLabel(String k){
    this.lblLabel.setText(k);

}

public FrameTest() {
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setExtendedState(JFrame.MAXIMIZED_BOTH); 

    //setBounds(100, 100, 450, 300);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    contentPane.setLayout(new BorderLayout(0, 0));
    setContentPane(contentPane);

    lblLabel = new JLabel("LABEL");
    contentPane.add(lblLabel, BorderLayout.CENTER);

    JButton btnNewButton = new JButton("Press");
    btnNewButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            Test t = new Test();
            t.buttonpress();
        }
    });
    contentPane.add(btnNewButton, BorderLayout.WEST);
    //pack();
    setLocationByPlatform(true);
}

} 
```

测试班

```
public class Test {

public static void main(String[] args) {

     FrameTest f = new FrameTest();
     f.mainScreen();

}

public void buttonpress(){
     FrameTest f = new FrameTest();

     f.writeLabel("Button was pressed");

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T08:27:50.720

`JFrame`1）不要不必要地扩展类。

`setContentPane()`2）除非那是你想要的，否则不要使用。而只是简单地`JFrame#add(..)`。

3）远离`EventQueue`并使用`SwingUtilities`块而不是

4）不要忘记`JFrame#pack();`在设置`JFrame`可见之前调用。

5) Java 命名约定是 CamelCase 所以`buttonPress()`不正确`buttonpress()`

这是我做的一个例子（基本上你的代码是固定的）：

**Test.java：（**这是主类，它将创建您的实例`FrameTest`并具有更改`JLabel`文本的方法）

```
import javax.swing.SwingUtilities;

public class Test {

    private static FrameTest f;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                f = new FrameTest();
                f.mainScreen();
            }
        });
    }

    void buttonPress() {
        f.writeLabel("Hello");
    }
} 
```

**FrameTest.java：（**该类将显示`JFrame`并创建`Test`要调用的类的新实例`buttonPress()`）：

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;

public class FrameTest {

    private JPanel panel;
    private JLabel lblLabel;
    private JFrame frame;

    private void initComponents() {
        frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setExtendedState(JFrame.MAXIMIZED_BOTH);

        panel = new JPanel();
        panel.setBorder(new EmptyBorder(5, 5, 5, 5));
        panel.setLayout(new BorderLayout(0, 0));

        lblLabel = new JLabel("LABEL");
        panel.add(lblLabel, BorderLayout.CENTER);

        JButton btnNewButton = new JButton("Press");
        btnNewButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                Test t = new Test();
                t.buttonPress();
            }
        });

        panel.add(btnNewButton, BorderLayout.WEST);

        frame.add(panel);

        frame.setLocationByPlatform(true);
        frame.pack();
        frame.setVisible(true);
    }

    public void writeLabel(String k) {
        this.lblLabel.setText(k);
    }

    void mainScreen() {
        initComponents();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T07:01:18.237

将您的 FrameTest 对象传递给 buttonpress 方法并在那里使用它，而不是创建一个新对象：

```
public void buttonpress(FrameTest f) {
     f.writeLabel("Button was pressed");    
} 
```

像这样更改方法的调用：

```
btnNewButton.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        Test t = new Test();
        t.buttonpress(FrameTest.this);
    }
}); 
```

您必须在`FrameTest.this`此处使用，因为您在实现 ActionListener 的匿名类中，因此正常`this`会引用该匿名类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T07:05:27.293

**-**第一种方法是使用`Composition`Principle，在其中创建 in 的实例**，**然后使用该实例在类中访问（在 FrameTest 中使用 Getter Setters 来获取此标签）。`FrameTest.java``Test.java class``Label``FrameTest.java`

**-**第二种方法是一种肮脏且快速的修复方法，`Label` `static`在`FrameTest.java`类中创建并直接从`Test.java`类中设置值。瞧，它完成了......

**-**您的代码无法正常工作的原因是您创建了一个非常新的`FrameTest class`. 因此，现在您要么将`FrameTest` **对象引用变量**传递给`buttonpress()`方法，要么将其设为`label` **静态**。

**例如：**

```
public class FrameTest extends JFrame {

private JPanel contentPane;
public static JLabel lblLabel;

.....

.....

} 
```

**或者**

```
public void buttonpress(FrameTest f) {
     f.writeLabel("Button was pressed");    
} 
```

**///////////////////////////////////////////////////////////////////////// //////////////**

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;

class FrameTest extends JFrame {

    private JPanel contentPane;
    private JLabel lblLabel;
    private FrameTest ft = this;

    public void mainScreen() {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {

                    FrameTest frame = ft;
                    frame.setVisible(true);

                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public void writeLabel(String k) {
        this.lblLabel.setText(k);

    }

    public FrameTest() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setExtendedState(JFrame.MAXIMIZED_BOTH);

        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);

        lblLabel = new JLabel("LABEL");
        contentPane.add(lblLabel, BorderLayout.CENTER);

        JButton btnNewButton = new JButton("Press");
        btnNewButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                Test t = new Test();

                t.buttonpress(FrameTest.this); // Passing the current object to
                                                // the Test class
                                                // You can use just "this" , but
                                                // as we are in an Anonymous
                                                // Inner Class here,
                                                // we have to use
                                                // "Class_name.this"

            }
        });
        contentPane.add(btnNewButton, BorderLayout.WEST);
        // pack();
        setLocationByPlatform(true);
    }

}

public class Test {

    public static void main(String[] args) {

        FrameTest f = new FrameTest();
        f.mainScreen();

    }

    public void buttonpress(FrameTest f) { // Receiving the reference to the
                                            // current frame, but remember
                                            // THOUGH IT SEEMS that we are passing the
                                            // reference but still in
                                            //  Here and in Java its always pass
                                            // by copy.( ie pass by value).

        f.writeLabel("Button was pressed");

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T08:56:37.387

`Test`只需像下面这样更改您的课程

```
package com.test;

public class Test {

    private static FrameTest f;

    public static void main(String[] args) {

        f = new FrameTest();
        f.mainScreen();

    }

    public void buttonpress() {
        f.writeLabel("Button was pressed");
    }
} 
```

实际的问题是

1.  您在 main 中创建了一个`FrameTest`变量`f`并向用户显示 UI。
2.  然后按下按钮，您再次创建了另一个`FrameTest`实例`f`，它不映射原始/第一个`f`

现在我将变量视为类变量，它按预期工作

# samsung-smart-tv - 在 Boot Camp 上运行 Samsung TV Apps SDK 3.5.2 - 操作系统变得不稳定

> ID：13487917
> 
> 赞同：1
> 
> 时间：2012-11-21T06:56:28.940
> 
> 标签：samsung-smart-tv, smart-tv

我正在使用安装了训练营和 Windows 7 Professional 的 MacBook Air。尝试启动 Samsung TV Apps SDK(IDE) 3.5.2 时，Windows 会在几分钟后崩溃，并出现错误的蓝页。

看起来三星 TV SDK 尝试向我的 Mac HD 写入内容但操作失败。

我想知道您是否有同样的问题以及您的解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:06:01.513

挖掘问题后，我找到了解决方案：

我**重命名**了文件

```
C:\windows\system32\drivers\AppleMNT.sys 
```

至

C:\windows\system32\drivers\AppleMNT.sys.bak

这解决了我的问题，

我还必须从“Microsoft Visual C++ 2005 Service Pack 1 Redistributable Package ATL 安全更新”安装“vcredist_x86.exe”，因为 SDK 3.5.2 也需要它

如果您有其他解决方案，请告诉我。

# mysql - 错误：ER_BAD_FIELD_ERROR：节点 js 中“字段列表”中的未知列“asd123”

> ID：13487920
> 
> 赞同：6
> 
> 时间：2012-11-21T06:56:51.747
> 
> 标签：mysql, sql, node.js

当我尝试在 phpmyadmin 中更新表时收到此错误

谁能告诉我怎么了

这是桌子

```
create table ms_registereduser(userID Varchar(10),socketID Varchar(255)); 
```

这是我的 server.js

```
var http = require("http");

var mysql = require('mysql');

var connection = mysql.createConnection({
  host     : 'localhost',
  user     : 'root',
  password : '',
  database : 'pushnotificationdb'
});

var userID = "1234567890",
    socketID = "asd123";

http.createServer(function(request, response) {

  response.writeHead(200, {"Content-Type": "text/plain"});
  response.write("Hello World");

  response.end();
}).listen(1111);

connection.connect();

    connection.query('callpushnotificationdb.spUpdateSocketID('+userID+','+socketID+');').on('end',function()
        {
          console.log('User '+ userID+' has updated his socketID to '+socketID);
        });

connection.end(); 
```

这是我的 spUpdateSocketID，以“//”为分隔符

```
DROP PROCEDURE IF EXISTS spUpdateSocketID//

CREATE PROCEDURE spUpdateSocketID(IN userID Varchar(10) ,IN socketID Varchar(255))
BEGIN
set @userID = userID;
set @socketID = socketID;
set @s = CONCAT('UPDATE ms_registereduser SET socketID = @socketID WHERE userID = @userID');
PREPARE stmt FROM @s;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;
END// 
```

如果我尝试像这样在 phpmyadmin 中调用该过程

```
call pushnotificationdb.spUpdateSocketID('1234567890','asd123'); 
```

它可以工作，但是如果我尝试从 node.js 调用它，它会给我这样的错误 Error: ER_BAD_FIELD_ERROR: Unknown column 'asd123' in 'field list' ，请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-12T12:00:23.673

试试下面的查询，变量`'+userID+'`和`'+socketID+'`被修改为`"'+userID+'"`and `"'+socketID+'"`：

```
connection.query(
  'callpushnotificationdb.spUpdateSocketID("'+userID+'","'+socketID+'");'
)
.on('end',function(){
  console.log('User '+ userID+' has updated his socketID to '+socketID);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:06:39.943

尝试这个：

```
DROP PROCEDURE IF EXISTS spUpdateSocketID//

CREATE PROCEDURE spUpdateSocketID(IN _userID VARCHAR(10) ,IN _socketID VARCHAR(255))
BEGIN
UPDATE ms_registereduser SET socketID = _socketID WHERE userID = _userID;
END// 
```

如下所述重新编写您的程序并尝试运行它：

```
DROP PROCEDURE IF EXISTS spUpdateSocketID//

CREATE PROCEDURE spUpdateSocketID(IN userID VARCHAR(10) ,IN socketID VARCHAR(255))
BEGIN
SET @s = CONCAT("UPDATE ms_registereduser SET socketID = '", socketID, "' WHERE userID = '", userID, "'");
PREPARE stmt FROM @s;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;
END// 
```

# mysql - 求 TSQLTimeStamp 的编码示例

> ID：13487922
> 
> 赞同：1
> 
> 时间：2012-11-21T06:56:58.533
> 
> 标签：mysql, delphi, timestamp

德尔福 XE2 和 MySql。

我[之前的问题](https://stackoverflow.com/questions/13469154/how-best-to-store-date-time-in-mysql)导致建议我应该使用 MySql 的本机`TIMESTAMP`数据类型来存储日期/时间。

不幸的是，我似乎找不到任何编码示例，而且我得到了奇怪的结果。

鉴于此表：

```
mysql> describe test_runs;
+------------------+-------------+------+-----+---------------------+-------+
| Field            | Type        | Null | Key | Default             | Extra |
+------------------+-------------+------+-----+---------------------+-------+
| start_time_stamp | timestamp   | NO   | PRI | 0000-00-00 00:00:00 |       |
| end_time_stamp   | timestamp   | NO   |     | 0000-00-00 00:00:00 |       |
| description      | varchar(64) | NO   |     | NULL                |       |
+------------------+-------------+------+-----+---------------------+-------+
3 rows in set (0.02 sec) 
```

我想：

*   声明一个变量，我可以在其中存储结果`SELECT CURRENT_TIMESTAMP`- 它应该是什么类型？`TSQLTimeStamp`?
*   在测试开始时插入一行`start_time_stamp`= 上面的变量
*   和`end_time_stamp`= 一些“NULL”值...“0000-00-00 00:00:00”？我可以直接使用它，还是需要声明 a`TSQLTimeStamp`并将每个字段设置为零？（似乎没有`TSQLTimeStamp.Clear;`- 它是一个结构，而不是一个类
*   更新`end_time_stamp`测试完成的时间
*   计算测试持续时间

有人可以请我指向一个带有一些 Delphi 代码的 URL，我可以研究它来了解如何做这种事情吗？国际货币基金组织。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T09:21:00.210

我不知道您为什么要与那个 TIMESTAMP 纠缠不清，以及为什么要检索 CURRENT_TIMESTAMP 只是为了把它放回去。

如前所述，使用 TIMESTAMP 字段作为 PRIMARY KEY 并不是一个好的建议。

所以我的建议是使用这个 TABLE SCHEMA

```
CREATE TABLE `test_runs` (
    `id` int(11) NOT NULL AUTO_INCREMENT,
    `start_time_stamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `end_time_stamp` timestamp NULL DEFAULT NULL,
    `description` varchar(64) NOT NULL,
    PRIMARY KEY (`id`)
); 
```

开始测试运行由

```
INSERT INTO test_runs ( description ) VALUES ( :description );
SELECT LAST_INSERT_ID() AS id; 
```

并最终确定您只需调用的记录

```
UPDATE test_runs SET end_time_stamp = CURRENT_TIMESTAMP WHERE id = :id 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T07:30:20.190

只需声明一个 TSQLQuery（或您选择的数据访问层的正确组件），将其附加到有效连接并使用以下内容填充其 SQL 属性：

```
select * from test_runs; 
```

双击查询以启动它的字段编辑器，然后从该编辑器的上下文菜单中选择**添加所有字段。**

它将根据您用于访问数据的数据访问层和驱动程序创建正确的字段类型。

完成后，如果您需要在代码中使用该值，通常使用`AsDateTime`字段的属性来完成，因此您只需使用普通的 TDateTime Delphi 类型，并让数据库访问层处理特定的数据库详细信息来存储它场地。

例如，如果您的查询对象被命名`qTest`并且表字段被命名`start_time_stamp`，那么与该持久字段关联的德里变量将被命名`qTeststart_time_stamp`，因此您可以执行以下操作：

```
var
  StartTS: TDateTime;
begin
  qTest.Open;
  StartTS := qTeststart_time_stamp.AsDateTime;
  ShowMessage('start date is ' + DateTimeToStr(StartTS));
end; 
```

如果您使用 dbExpress 并且是新手，请阅读[在 Delphi 数据库应用程序中使用 dbExpress 的指南](http://delphi.about.com/od/database/a/dbexpressguide.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T10:22:16.423

我不了解 MySQL，但如果生成的 TField 子类是 TSQLTimeStampField，则需要使用[SqlTimSt](http://docwiki.embarcadero.com/Libraries/XE2/en/Data.SqlTimSt.TSQLTimeStamp)单元中的类型和函数（XE2+ 为 Data.SqlTimSt）。

您想将局部变量声明为 TSQLTimeStamp

```
uses Data.SQLTmSt....;
....

var
  StartTS: TSQLTimeStamp;
  EndTS: TSQLTimeStamp;
begin
  StartTS := qTeststart_time_stamp.AsSQLTimeStamp; 
```

SQLTmSt 还包括与 TSQLTimeStamp 相互转换的函数，例如`SQLTimeStampToDateTime`和`DateTimeToSQLTimeStamp`。

PS 我倾向于同意使用时间戳作为主键可能会导致问题。正如 Rufo 爵士建议的那样，我倾向于使用自动递增代理键。

# c# - C# & Java & C++ 消息传递机制

> ID：13487928
> 
> 赞同：-4
> 
> 时间：2012-11-21T06:57:57.587
> 
> 标签：c#, java, c++, message-passing

什么是 C# & Java & C++ 消息传递机制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:35:20.430

模糊的问题，但你看过 MSMQ 吗？（[http://msdn.microsoft.com/en-gb/library/windows/desktop/ms711472(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms711472%28v=vs.85%29.aspx)）

# image - KineticJS - 裁剪填充图像

> ID：13487929
> 
> 赞同：1
> 
> 时间：2012-11-21T06:58:08.823
> 
> 标签：image, crop, fill, kineticjs

我正在尝试在我的游戏中使用图块集。我想裁剪填充图像但不能因为

1.  我无法用 Kinetic.Image() 对象填充形状。

2.  我无法裁剪 Image() 对象。

    ```
    var rect = new Kinetic.Rect({  
        x: 0,  
        y: 0,  
        width: 64,  
        height: 64,  
        fill:{  
            image: imageObj,  
            crop:{  
                x: 128,  
                y: 128,  
                width: 64,  
                height: 64  
            },   
        },  
            strokeWidth: 1  
    }); 
    ```

这不起作用，我也不能用预先裁剪的 Kinetic.Image() 对象替换 image: imageObj 。有任何想法吗？

**编辑：**看起来可以通过将 Kinetic.Image 绘制到场景中，使用 toDataUrl 将裁剪后的 Kinetic.Image 加载到可通过填充使用的图像对象中，然后继续使用地图脚本。这引入了大量的性能问题/加载时间，所以我将继续假设我想做的事情是不可行的。如果有人对如何正确执行此操作有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:18:22.797

您可以通过填充来接受图像，如以下使用 Vader/Yoda 的示例所示：

[http://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/)

我的建议是将您的图像加载到一个数组中（就像他在示例中所做的那样），然后在您创建图块时调用图像。

我在该示例中将第一个五角大楼的代码更改为矩形，如下所示：

```
var colorPentagon = new Kinetic.Rect({
      x: 40,
      y: 50,
      width: 100,
      height: 100,
      fill: {
        image: images.darthVader,
        offset: [-220, -70]
      },
      stroke: "black",
      strokeWidth: 4,
      draggable: true
    }); 
```

它奏效了，所以没有理由不能给你你想要的。

# smartgwt - SmartGwt：如何在我的 listgrid 中获取数据

> ID：13487930
> 
> 赞同：0
> 
> 时间：2012-11-21T06:58:09.713
> 
> 标签：smartgwt

我有一个列表网格，我正在通过我的应用程序中的某种方法将值分配给 listGrid

像这样

```
 private ListGridRecord[] getData(UserRecord selectedClient) { 

        return new ListGridRecord[]{  
                new NameValueRecord(1, "US Siren", selectedClient.getClientsId()),  
                new NameValueRecord(2, "EN: Liste des identifiants", selectedClient.getClientId2()),  
                new NameValueRecord(3, "Account number", selectedClient.getClientId3()),  
                new NameValueRecord(4, "Partner number", selectedClient.getClientId4()),  
                new NameValueRecord(5, "REGON", selectedClient.getClientId5()),  
                new NameValueRecord(6, "US Siren*", selectedClient.getClientId6()) , 
                new NameValueRecord(7, "TEST", selectedClient.getClientId7())  
        };  
    } 
```

它对我来说很好，并在应用程序运行时在网格中显示给定值。

现在我想获取这些在网格中显示的值（用户也可以从网格中编辑）

我可以得到这样的编辑值

```
 clientIdsGrid.setEditorCustomizer(new ListGridEditorCustomizer() {  
            public FormItem getEditor(ListGridEditorContext context) {  
                ListGridField field = context.getEditField();  
                if (field.getName().equals("value")) {  
                    NameValueRecord record = (NameValueRecord) context.getEditedRecord(); 
```

但是，如果用户甚至不点击任何记录，只需点击保存即可将值保存为原样。

然后我怎样才能获得我的网格中的数据。

我正在尝试这些

```
 clientIdsGrid.getRecord(1);
          clientIdsGrid.getRecords(); 
```

但这给了我一个 listGrid/listGridRecord ，然后我如何从它们那里获取每一行的单个数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:11:26.647

`grid.addEditorExitHandler` 可能会有所帮助。在其中你可以使用：

`grid.getEditValueAsString(row num, Column name)` 以获得新的编辑值。如果没有新的它会`return null`。

# iphone - 替换特殊字符的问题

> ID：13487931
> 
> 赞同：2
> 
> 时间：2012-11-21T06:58:12.130
> 
> 标签：iphone, xcode, ios5

我在从字符串中删除特殊字符时遇到问题。我使用了以下代码。但是 dint 工作。请建议我更好的逻辑

```
- (NSString *)trimmedReciString:(NSString *)stringName 
{
    NSCharacterSet *myCharSet = [NSCharacterSet characterSetWithCharactersInString:@"-/:;()$&@\".,?!\'[]{}#%^*+=_|~<>€£¥•."];
    for (int i = 0; i < [stringName length]; i++) {
        unichar c = [stringName characterAtIndex:i];
        if ([myCharSet characterIsMember:c]) {
            NSLog(@"%@",[NSString stringWithFormat:@"%c",[stringName characterAtIndex:i]]);
            stringName =  [stringName stringByReplacingOccurrencesOfString:[NSString stringWithFormat:@"%c",[stringName characterAtIndex:i]] withString:@""];  

        }
    }
    return stringName;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T07:38:21.973

```
NSString *s = @"$$$hgh$g%k&fg$$tw/-tg";
NSCharacterSet *doNotWant = [NSCharacterSet characterSetWithCharactersInString:@"-/:;()$&@\".,?!\'[]{}#%^*+=_|~<>€£¥•."];
s = [[s componentsSeparatedByCharactersInSet: doNotWant] componentsJoinedByString: @""];
NSLog(@"String is: %@", s); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T07:09:48.253

试试这个...

```
NSString *unfilteredString = @"!@#$%^&*()_+|abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";
NSCharacterSet *notAllowedChars = [[NSCharacterSet characterSetWithCharactersInString:@"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890"] invertedSet];
NSString *resultString = [[unfilteredString componentsSeparatedByCharactersInSet:notAllowedChars] componentsJoinedByString:@""];
NSLog (@"Result: %@", resultString); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T07:05:29.913

尝试从字符串的***末尾***开始并向后工作，而不是从前到后，因为当前一个字符被删除时，您可能会意外（并且无意地）跳过字符。

# image - caroufredsel 图像滑块不显示图像，如果它们在标签

> ID：13487932
> 
> 赞同：2
> 
> 时间：2012-11-21T06:58:12.000
> 
> 标签：image, hyperlink, slider, caroufredsel

我在我的网站中使用了**Caroufredsel**作为图像滑块。

我想让它像第一个例子一样

```
<a href="http://caroufredsel.dev7studios.com/">http://caroufredsel.dev7studios.com/</a> 
```

但是每当我放置带有`<a></a>`标签的图像时，滑块就会**消失**。当我删除`<a></a>`标签时，一切都运行良好。

如何使图像`clickable`定向到**Caroufredsel**的另一个页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T17:45:29.700

CarouFredSel 对具有设置高度/宽度的块级元素进行操作。`<a></a>`标签是内联元素。我建议用标签包围`<a></a>`标签并将`<div></div>`标签的样式`<div></div>`设置为设置高度/宽度、显示：块和浮动：左。这对我有用：

```
#carouselWrapper div {
display: block;
float: left;
width: 500px;
height: 200px;
} 
```

然后调用 jCarouFredSel 启动器 on `#carouselWrapper`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T14:26:39.777

无需添加额外的 div 元素 - 只需将`<a>`元素设置为`display: block`.

```
#carousel a {
    display: block;
    float: left;
} 
```

# floating-point - SSAS维度中的浮点转换问题

> ID：13487939
> 
> 赞同：1
> 
> 时间：2012-11-21T06:58:52.020
> 
> 标签：floating-point, ssas, dimension

我对 SSAS 维度有疑问。我在表中有一个浮点数据类型的列。此列中的值类似于

*   0
*   0.0001
*   0.0002
*   0.0003
*   0.0004

但是当我在 SSAS 中的该列上创建一个维度时，它会以科学计数法转换浮点值，例如（顺便说一句，不是所有值，而是一些值被转换）

*   0
*   0.0001
*   2.000000000000001E-4
*   2.999999999999997E-4
*   4.000000000000002E-4

有人可以告诉我如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:08:03.863

这正是 SSAS 表示浮点数的方式。该值没有错，只是不是您想要的阅读方式。

如果您想查看为小数，请尝试将输入数据类型（在 ssas 之前的视图中）更改为小数，即

```
SELECT      Id, CAST(floatValue AS decimal(10, 6)) AS decimalValue 
FROM        YourTable 
```

这样，SSAS 会将小数保留为固定的小数位数并显示 0.000200，而不是 2.000000000000001E-4

# python - 带有jquery的django ajax表单

> ID：13487950
> 
> 赞同：0
> 
> 时间：2012-11-21T06:59:44.660
> 
> 标签：python, django, jquery, django-templates

我使用下面的函数用 ajax 发送我的表单数据：

```
$(function() {
        $('#sendButton').click(function(e) {
            e.preventDefault();
            var temp = $("#backupSubmit").serialize();
            $.ajax({
                type: "POST",
                data: temp,
                url: 'backup/',
                success: function(data) {
                     $("#response").html('<p>{% trans "you can download it from here:" %}'+'<a href="'+data+'">{% trans "download" %}</a></p>');
                        $("#response").show();
                }
            });
        });
    }); 
```

现在我想使用这个功能：

```
$("#sendButton").click(function(e){
        e.preventDefault();
        save_data();
        if(save_data()) {
            alert('Saved!');
        } else {
            alert('Failed!');
        }
    });
function save_data() {
        $.post("backup/", {
                    csrfmiddlewaretoken: $("input[name='id_csrfmiddlewaretoken").val(),
                    ???? backup_from: $("#backupSubmit").serialize()
                },
                function(data) {
                     data = json_parse(data);
                    if(data.status=="success") {
                        return true;
                    } else {
                        console.log("status: "+data.status)
                        console.log("error: "+data.error)
                        console.log("POST DATA: "+data.data)
                        $.each(data.data, function(i, n){
                            console.log(">"+i+": "+n);
                        });
                        return false;
                    }
                },
                "json"
        );
    } 
```

但在看来，表格似乎是无效的！这是我的表格：

```
BACKUP_CHOICES = (('systemSettings',_("systemSettings")),
                  ('ruleSet',_("ruleSet")))

class backupForm(forms.Form):
    backup_from = forms.MultipleChoiceField(widget=CheckboxSelectMultiple, label=_("backup from"), required=True,
        choices=BACKUP_CHOICES, error_messages={'required': _("Please choose at least one option")}) 
```

它通过 post 发送数据，除了要求之外，我没有任何验证检查。我不知道为什么表格无效？像上面这样发送表单数据是否正确（在????旁边）？感谢您的帮助：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:17:55.390

1.  只需发送带有 data = 的发布请求`$("#theForm").serialize()`，它应该包括 csrftoken 等...
2.  使用 firebug 或 webkit 检查器（按 F12）来监控网站发出的帖子请求。
3.  如果服务器响应错误，请使用检查器实际读取响应中的回溯。
4.  如果服务器没有以错误响应，也请阅读检查器中的响应。

> 表格似乎无效

“我们不能停在这里，这里是蝙蝠之地。” 它是否有效？如果它无效，那么视图应该适当地响应，并且 javascript 应该能够使用该响应来通知用户表单无效。

如果您需要跟踪 Python 代码，请将其放入您的视图`import pdb; pdb.set_trace()`中，以便您可以正确调试它并查看它是否有效以及它在做什么。

此外，您没有发布您的视图代码。无论如何，我认为第 1 点应该有效。

# c++ - 我在课堂上使用 malloc 或 new 来获取变量，然后我得到一个 SIGABRT

> ID：13487951
> 
> 赞同：0
> 
> 时间：2012-11-21T06:59:50.440
> 
> 标签：c++

我在类中使用 malloc 或 new 来获取变量，然后我得到一个 SIGABRT，我在其他 cpp 文件中测试 malloc 和 new，它运行良好。你能告诉我原因：P 错误发生在两行:(在函数 Trie::Insert(char*))

```
int* pN = new int;

PNODE node = (PNODE)malloc(sizeof(struct NODE)); 
```

其他是正确的

所有代码：

```
#define CHARSIZE 26
#include<assert.h>
#include<stdlib.h>
#include<iostream>
using namespace std;
typedef struct NODE {
    char key;
    struct NODE* child[ CHARSIZE ];
}* PNODE,*TRIE;

class Trie{
public:
    Trie();
    void Insert( char* sData );
    void Show( );
    void ShowTrie( PNODE root );
    void Delete( struct NODE* pNode );
    struct NODE* Search( char* sData );
    void DeleteTrie();
    ~Trie();
private:
    PNODE pRoot;
    static char colls[];
};
char Trie::colls[] = "abcdefghijklmnopqrstuvwxyz ";
Trie::Trie(){
    //root create
    this->pRoot = NULL;
    this->pRoot = (PNODE)malloc(sizeof(struct NODE));
    this->pRoot->key = ' ';
    for( int i=0; i<CHARSIZE+1; i++ ){
        this->pRoot->child[ i ] = NULL;
    }
}
void Trie::Insert( char* sData ){
    //stick
    if( sData==NULL || *sData == '\0' ){
        return;
    }
    PNODE p = this->pRoot;

    char* pData = sData;
    //same error sigabrt ginal
    int* pN = new int;
    //still error
    //PNODE node = (PNODE)malloc(sizeof(struct NODE)); 
    while( *pData!='\0' ){
        //如果对应位置的指针为空
        if( p->child[ *pData-'a' ]==NULL ){
            //make new Node
            PNODE node = (PNODE)malloc(sizeof(struct NODE));

            node->key = *pData;
            int i = 0;
            while( i < CHARSIZE ){
                node->child[i] = NULL;
                i++;
            }
            p->child[*pData-'a'] = node;
        }

        p = p->child[ *pData-'a' ];
        pData++;
    }
}
void Trie::Show( ){
    ShowTrie( this->pRoot );
}
void Trie::ShowTrie( PNODE root ){
    if( root==NULL ){
        return;
    }else{
        cout<<root<<endl;
        //cout<<root->key<<"    ";
        for( int i=0; i<CHARSIZE; i++ ){
            ShowTrie( root->child[i] );
        }
    }
}
void Trie::Delete( struct NODE* pNode ){

}
struct NODE* Search( char* sData ){ 

    return NULL; 

}
Trie::~Trie(  ){} 
```

特里.cpp

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T07:12:36.580

由于堆栈/堆已损坏，您会收到该错误。在构造函数中，for循环中有一个错误：

`Trie::Trie(){ ...

```
for( int i=0; i<CHARSIZE+1; i++ ){ ***// should not +1, just i < CHARSIZE*** 

    this->pRoot->child[ i ] = NULL; 

}` 
```

当堆损坏时，在调试版本中，由于堆验证，在下一次内存分配时会发生异常。

# computational-geometry - 四叉树和kd树的区别

> ID：13487953
> 
> 赞同：25
> 
> 时间：2012-11-21T06:59:55.210
> 
> 标签：computational-geometry, kdtree, quadtree

四叉树和kd树的主要区别是什么？我知道他们在多个维度上分割点，但我不明白为什么我们会使用一个而不是另一个。我需要一个允许我计算给定区域中有多少点（2D 点）的结构。基本上，我正在尝试检测点簇。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-26T13:44:42.597

区别（算法上）是：在四叉树中，到达节点的数据被分成固定（2^d）大小相等的单元格，而在 kdtrees 中，数据根据一些数据分析（例如中位数）被分成两个区域一些坐标）。由于维度的指数依赖性，四叉树不能很好地扩展到高维度。数据结构的查询时间复杂度也不同。

由于您对二维点感兴趣，因此任何一种数据结构都可能适合您。KD 树很容易查询范围，并且通常比四叉树更受欢迎。我建议你使用它们。

# asp.net - WebApi 路由在区域中不起作用

> ID：13487954
> 
> 赞同：1
> 
> 时间：2012-11-21T06:59:58.087
> 
> 标签：asp.net, asp.net-web-api, asp.net-mvc-routing, asp.net-mvc-areas

我有一个应用程序，并且我已将我的管理面板移动到区域，从那时起我无法点击管理面板 api 调用。这是主 api 注册和管理面板 api 注册的代码。

```
 //Api registration
    public static void Register(HttpConfiguration config)
    {

        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        config.Routes.MapHttpRoute(
            name: "Secondary",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

    //Area Registration
    public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            "Admin_panel",
            "AdminPanel/{controller}/{action}/{id}",
            new { controller = "Admin", action = "Index", id = UrlParameter.Optional }
        );

        context.Routes.MapHttpRoute(
          "Admin_Secondary",
          "AdminPanel/api/{controller}/{id}",
          new { id = RouteParameter.Optional }
      );
    } 
```

我正在尝试使用 URL localhost/taw/adminpanel/api/SearchAPI 来访问它，但它不起作用。我的路由有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T07:11:52.493

我发现了问题，路线的优先级造成了问题，我想我应该在发布问题之前先[问鸭子。](http://hwrnmnbsol.livejournal.com/148664.html)

```
 context.Routes.MapHttpRoute(
       "Admin_Secondary",
       "AdminPanel/api/{controller}/{id}",
       new { id = RouteParameter.Optional }
      ); 
```

必须先来

```
 context.MapRoute(
        "Admin_panel",
        "AdminPanel/{controller}/{action}/{id}",
        new { controller = "Admin", action = "Index", id = UrlParameter.Optional }
    ); 
```

# java - 我正在尝试将日期转换为java中的字符串。但我需要在javascript中对调用日期进行编码

> ID：13487959
> 
> 赞同：2
> 
> 时间：2012-11-21T07:00:38.150
> 
> 标签：java

这是我的代码：该代码用于在服务器端获取值，所以我想将日期转换为字符串格式，然后我在脚本文件中调用数据

```
**My Servlet code**

package pack.com;

import java.io.IOException;
import java.io.PrintWriter;
import java.text.SimpleDateFormat;
import java.util.Date;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class project extends HttpServlet {
    private String date_to_string;
        protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
        Date dateNow = new Date();
        SimpleDateFormat formatDateJava = new SimpleDateFormat("MM/dd/yyyy");
        date_to_string = formatDateJava.format(dateNow);
        System.out.println("Today's date into MM/dd/yyyy format: " + date_to_string);
        StringBuilder sb = null;
        PrintWriter out = response.getWriter();
        sb = new StringBuilder();
        if (request.getParameter("today").equals("dateNow"))
        {
            sb.append("[");
            sb.append("{\"Stack_No\":\"13\",\"Buyer_Name\":\"Vickram\",\"No_of_Trips\":\"34\",\"Dispatched_Quantity\":\"56\"},");
            sb.append("{\"Stack_No\":\"04\",\"Buyer_Name\":\"sivaji\",\"No_of_Trips\":\"34\",\"Dispatched_Quantity\":\"45\"},");
            sb.append("{\"Stack_No\":\"25\",\"Buyer_Name\":\"mathavan\",\"No_of_Trips\":\"82\",\"Dispatched_Quantity\":\"34\"}");
            sb.append("]");
        } else if(request.getParameter("today").equals("dateNow-1")){
            sb.append("[");
            sb.append("{\"Stack_No\":\"06\",\"Buyer_Name\":\"karthik\",\"No_of_Trips\":\"28\",\"Dispatched_Quantity\":\"23\"},");
            sb.append("{\"Stack_No\":\"4\",\"Buyer_Name\":\"Murali\",\"No_of_Trips\":\"29\",\"Dispatched_Quantity\":\"8\"},");
            sb.append("{\"Stack_No\":\"6\",\"Buyer_Name\":\"MGR\",\"No_of_Trips\":\"10\",\"Dispatched_Quantity\":\"8\"}");
            sb.append("]");
        }else if(request.getParameter("today").equals("dateNow-2")){
            sb.append("[");
            sb.append("{\"Stack_No\":\"06\",\"Buyer_Name\":\"karthik\",\"No_of_Trips\":\"28\",\"Dispatched_Quantity\":\"23\"},");
            sb.append("{\"Stack_No\":\"4\",\"Buyer_Name\":\"Murali\",\"No_of_Trips\":\"29\",\"Dispatched_Quantity\":\"8\"},");
            sb.append("{\"Stack_No\":\"6\",\"Buyer_Name\":\"MGR\",\"No_of_Trips\":\"10\",\"Dispatched_Quantity\":\"8\"}");
            sb.append("]");

    }else if(request.getParameter("today").equals("dateNow-3")){
        sb.append("[");
        sb.append("{\"Stack_No\":\"13\",\"Buyer_Name\":\"Vickram\",\"No_of_Trips\":\"34\",\"Dispatched_Quantity\":\"56\"},");
        sb.append("{\"Stack_No\":\"04\",\"Buyer_Name\":\"sivaji\",\"No_of_Trips\":\"34\",\"Dispatched_Quantity\":\"45\"},");
        sb.append("{\"Stack_No\":\"25\",\"Buyer_Name\":\"mathavan\",\"No_of_Trips\":\"82\",\"Dispatched_Quantity\":\"34\"}");
        sb.append("]");
    }
    else if(request.getParameter("today").equals("dateNow-4")){
        sb.append("[");
        sb.append("{\"Stack_No\":\"13\",\"Buyer_Name\":\"Vickram\",\"No_of_Trips\":\"34\",\"Dispatched_Quantity\":\"56\"},");
        sb.append("{\"Stack_No\":\"04\",\"Buyer_Name\":\"sivaji\",\"No_of_Trips\":\"34\",\"Dispatched_Quantity\":\"45\"},");
        sb.append("{\"Stack_No\":\"25\",\"Buyer_Name\":\"mathavan\",\"No_of_Trips\":\"82\",\"Dispatched_Quantity\":\"34\"}");
        sb.append("]");
    }
    else if(request.getParameter("today").equals("dateNow-5")){
        sb.append("[");
        sb.append("{\"Stack_No\":\"13\",\"Buyer_Name\":\"Vickram\",\"No_of_Trips\":\"34\",\"Dispatched_Quantity\":\"56\"},");
        sb.append("{\"Stack_No\":\"04\",\"Buyer_Name\":\"sivaji\",\"No_of_Trips\":\"34\",\"Dispatched_Quantity\":\"45\"},");
        sb.append("{\"Stack_No\":\"25\",\"Buyer_Name\":\"mathavan\",\"No_of_Trips\":\"82\",\"Dispatched_Quantity\":\"34\"}");
        sb.append("]");
    }
    else if(request.getParameter("today").equals("dateNow-6")){
        sb.append("[");
        sb.append("{\"Stack_No\":\"06\",\"Buyer_Name\":\"karthik\",\"No_of_Trips\":\"28\",\"Dispatched_Quantity\":\"23\"},");
        sb.append("{\"Stack_No\":\"4\",\"Buyer_Name\":\"Murali\",\"No_of_Trips\":\"29\",\"Dispatched_Quantity\":\"8\"},");
        sb.append("{\"Stack_No\":\"6\",\"Buyer_Name\":\"MGR\",\"No_of_Trips\":\"10\",\"Dispatched_Quantity\":\"8\"}");
        sb.append("]");

    }
        out.println(sb.toString());
        out.flush();
        out.close();
    }

} 
```

上面的代码是将日期转换为字符串，但我不确定它是否正确。

html编码

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />

        <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
        Remove this if you use the .htaccess -->
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

        <title>index</title>
        <meta name="description" content="" />
        <meta name="author" content="nura" />

        <!--<meta name="viewport" content="width=device-width; initial-scale=1.0" /> -->
        <!-- CSS -->
        <link rel="stylesheet" href="css/table.css" type="text/css" media="screen" title="no title" charset="utf-8"/>
        <!-- Replace favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
        <link rel="shortcut icon" href="/favicon.ico" />
        <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
        <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
        <script type="text/javascript" charset="utf-8">
            $(document).ready(function() {
                $.ajax({
                type : "GET",
                url : yt_url,
                data : "servlet_id=1&prop_id=" + propId,
                async : false,
                success : function(response) {
                    if (response.data) {
                    }
                }
            });

                    $("#j").text(json[0].Stack_No);
                    $("#i").text(json[0].Buyer_Name);
                    $("#h").text(json[0].No_of_Trips);
                    $("#m").text(json[0].Dispatched_Quantity);
                    $("#g").text(json[1].Stack_No);
                    $("#f").text(json[1].Buyer_Name);
                    $("#e").text(json[1].No_of_Trips);
                    $("#l").text(json[1].Dispatched_Quantity);
                    $("#c").text(json[2].Stack_No);
                    $("#b").text(json[2].Buyer_Name);
                    $("#a").text(json[2].No_of_Trips);
                    $("#k").text(json[2].Dispatched_Quantity);
                    $("#n").text(json[3].Stack_No);
                    $("#o").text(json[3].Buyer_Name);
                    $("#p").text(json[3].No_of_Trips);
                    $("#q").text(json[3].Dispatched_Quantity);
                    $("#r").text(json[4].Stack_No);
                    $("#s").text(json[4].Buyer_Name);
                    $("#t").text(json[4].No_of_Trips);
                    $("#u").text(json[4].Dispatched_Quantity);
                    $("#v").text(json[5].Stack_No);
                    $("#w").text(json[5].Buyer_Name);
                    $("#x").text(json[5].No_of_Trips);
                    $("#y").text(json[5].Dispatched_Quantity);
                });

        </script>

    </head>
    <body>
        <img id="ajaxLoader" src="image/logo.jpg" style="display: none;" />

        <div id="header">
            <h2><b>Daily Despath Report</b></h2>
        </div>
        <div id="container">
            <h1>Mine:-------<h1>
        </div>
        <body>
            <div id="time">
            <span id=tick2>
</span>
<script>
function show2(){
if (!document.all&&
!document.getElementById)
return
thelement=document.getElementById? document.getElementById("tick2"): document.all.tick2
var Digital=new Date()
var hours=Digital.getHours()
var minutes=Digital.getMinutes()
var seconds=Digital.getSeconds()
var dn="PM"
if (hours<12)
dn="AM"
if (hours>12)
hours=hours-12
if (hours==0)
hours=12
if (minutes<=9)
minutes="0"+minutes
if (seconds<=9)
seconds="0"+seconds
var ctime=hours+":"+minutes+":"+seconds+" "+dn
thelement.innerHTML="<b style='font-size:14;color:blue;'>"+ctime
+"</b>"
setTimeout("show2()",1000)
}
window.onload=show2
</script>
<div id="my">
<script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
<script type="text/javascript">
var dateNow = new Date();
var month = dateNow.getMonth()+1;
var day = dateNow.getDate();
var year = dateNow.getFullYear();
var date = month + " /" + day + " /" + year;
function ShowSchedule() 
{
$('#today').val(date);
}
function ShowDay(temp,isNextDay)
{
if(isNextDay)
{
datecount=$('#'+temp).val();
if(datecount>0){
var tempval=--datecount;
var cur_dat=new Date();
curdate=cur_dat.getDate();
var diff_dat=new Date();
diff_dat.setDate(curdate-tempval);
$('#today').val(diff_dat.getMonth()+1+" /"+diff_dat.getDate()+" /"+diff_dat.getFullYear());
$('#temp').val(tempval);
}

else{
alert("Data is available for up to today date only");
}
}
else{
datecount=$('#'+temp).val();
if(datecount<=6){
var tempval=++datecount;
var cur_dat=new Date();
curdate=cur_dat.getDate();
var diff_dat=new Date();
diff_dat.setDate(curdate-tempval);
$('#today').val(diff_dat.getMonth()+1+" /"+diff_dat.getDate()+" /"+diff_dat.getFullYear());
$('#temp').val(tempval);
}else{
alert("Data is not available for more than 7 days from current date");
}
}
}
</script>
</div>
</div>
<a id = "prev" href="#" onClick="ShowDay('temp',false)">Prev</a>
<input type="hidden" id="temp" value="0">
<input type="text" id="today" size="10">
<a id = "next" href="#" onClick="ShowDay('temp',true)">Next</a> 
<input type="hidden" id="temp" value="i">  
<script>ShowSchedule();
</script>

</body>

        <div id="CSSTableGenerator" >
            <table >
                <tr>
                    <td><i>Materials</i></td>
                    <td><i>Stack No</i></td>
                    <td><i>Buyer Name</i></td>
                    <td ><i>No of Trips</i></td>
                    <td><i>Dispatched Quantity</i></td>
                </tr>

                <tr>
                    <td>Screened Fines</td>
                    <td id="j"></td>
                    <td id="i"></td>
                    <td id="h"></td>
                    <td id="m"></td>

                </tr>

                <tr>
                    <td>Screened 5-18mm</td>
                    <td id="g"></td>
                    <td id="f"></td>
                    <td id="e"></td>
                    <td id="l"></td>
                </tr>
                <tr>
                    <td>Screened 10-30mm</td>
                    <td id="c"></td>
                    <td id="b"></td>
                    <td id="a"></td>
                    <td id="k"></td>
                </tr>
                <tr>
                    <td>Screened Lumps</td>
                    <td id="n"></td>
                    <td id="o"></td>
                    <td id="p"></td>
                    <td id="q"></td>
                </tr>
                <tr>
                    <td>Crushed Fines</td>
                    <td id="r"></td>
                    <td id="s"></td>
                    <td id="t"></td>
                    <td id="u"></td>
                </tr>
                <tr>
                    <td>Crushed 5-18mm</td>
                    <td id="v"></td>
                    <td id="w"></td>
                    <td id="x"></td>
                    <td id="y"></td>
                </tr>
            </table>

        </div>
        <div id="button">
            <form>
                <br>
                <br>
                <b style="color:white"><i>Yesterday DDR</i></b>
                <br>

                <input type="button"
                style="
                background: -moz-linear-gradient(top,  rgb(255,183,107) 0%, rgb(255,167,61) 50%, rgb(255,124,0) 51%, rgb(255,127,4) 100%);
                background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgb(255,183,107)), color-stop(50%,rgb(255,167,61)), 
                color-stop(51%,rgb(255,124,0)), color-stop(100%,rgb(255,127,4)));
                background: -webkit-linear-gradient(top,  rgb(255,183,107) 0%,rgb(255,167,61) 50%,rgb(255,124,0) 51%,rgb(255,127,4) 100%);
                background: -o-linear-gradient(top,  rgb(255,183,107) 0%,rgb(255,167,61) 50%,rgb(255,124,0) 51%,rgb(255,127,4) 100%);
                background: -ms-linear-gradient(top,  rgb(255,183,107) 0%,rgb(255,167,61) 50%,rgb(255,124,0) 51%,rgb(255,127,4) 100%);
                background: linear-gradient(to bottom,  rgb(255,183,107) 0%,rgb(255,167,61) 50%,rgb(255,124,0) 51%,rgb(255,127,4) 100%);
                "onClick="location.href='nura.html'" value='Click'>
                <a>
                <input type="button"
                style="
                background: -moz-linear-gradient(top,  rgb(255,183,107) 0%, rgb(255,167,61) 50%, rgb(255,124,0) 51%, rgb(255,127,4) 100%);
                background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgb(255,183,107)), color-stop(50%,rgb(255,167,61)), 
                color-stop(51%,rgb(255,124,0)), color-stop(100%,rgb(255,127,4)));
                background: -webkit-linear-gradient(top,  rgb(255,183,107) 0%,rgb(255,167,61) 50%,rgb(255,124,0) 51%,rgb(255,127,4) 100%);
                background: -o-linear-gradient(top,  rgb(255,183,107) 0%,rgb(255,167,61) 50%,rgb(255,124,0) 51%,rgb(255,127,4) 100%);
                background: -ms-linear-gradient(top,  rgb(255,183,107) 0%,rgb(255,167,61) 50%,rgb(255,124,0) 51%,rgb(255,127,4) 100%);
                background: linear-gradient(to bottom,  rgb(255,183,107) 0%,rgb(255,167,61) 50%,rgb(255,124,0) 51%,rgb(255,127,4) 100%);
                "onclick="location.href='datepicker.html'" value='Trend'>
                <br>
            </form>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:56:28.350

试着理解下面的代码，希望你能得到答案……

```
 import java.text.SimpleDateFormat;
        import java.util.Calendar;
        import java.util.Date;

        public class Demo {

           public static void main(String[] args) {

              Calendar cal = Calendar.getInstance();

              Date today=cal.getTime();

              SimpleDateFormat formatDateJava = new SimpleDateFormat("MM/dd/yyyy");
              String today_string = formatDateJava.format(today);

           System.out.println("The current date is : " + today_string);

              cal.add(Calendar.DATE, -1);

              Date today_minus_1=cal.getTime();
              String today_minus_1_string=formatDateJava.format(today_minus_1);

              System.out.println(today_minus_1_string);
           }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:18:25.420

似乎你的 if 条件是错误的

尝试

```
if (request.getParameter("today").equals(date_to_string)) 
```

代替

```
if (request.getParameter("today").equals("dateNow")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T07:22:37.693

使用 AJAX 从 Javascript 调用此方法。您可以使用 JSON 对象以方便使用。Ex ajax: $.getJSON(url,function(data){

}

您将在 {[your string]} 等数据中获取您的字符串。

为了比较日期，您可以使用 dateNow.after(anyDate) 和 dateNow.before(anyDate) 和 dateNow.equals(anyDate) 以便于使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T07:26:55.770

看代码：

```
Date dateNow = new Date();
...
if (request.getParameter("today").equals("dateNow")) 
```

*   request.getParameter() 返回字符串，例如，它返回“11/20/2012”
*   接下来你要检查 if("11/20/2012".equals("dateNow"))，这永远不会是真的

我猜你的意图是检查：

```
if (request.getParameter("today").equals(date_to_string)) 
```

另外，不要忘记修复：

```
if(request.getParameter("today").equals("dateNow-2")) 
```

# android - 如何在 Android 上的 SQLite 中使用 Alter table Alter 列查询？

> ID：13487960
> 
> 赞同：-1
> 
> 时间：2012-11-21T07:00:52.027
> 
> 标签：android, sqlite, android-sqlite

> **可能重复：**
> [sqlite 中的 ALTER COLUMN](https://stackoverflow.com/questions/4007014/alter-column-in-sqlite)

我想在升级时更改列的数据类型。知道如何更改列的数据类型。

使用 Alter table Alter column 语句时出现语法错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:14:37.617

你不能，[SQLite 的 ALTER TABLE](http://www.sqlite.org/lang_altertable.html)非常有限：

![在此处输入图像描述](../Images/2897ade496c5a8d70087e2393fa74ad2.png)

因此您可以使用 ALTER TABLE 重命名表，也可以添加一个新列。从好的方面来说（至少对您而言），SQLite 的“类型”概念非常松散，并且更多地取决于您如何使用某些东西而不是如何定义列；例如：

```
sqlite> create table t (i int);
sqlite> insert into t (i) values (11);
sqlite> insert into t (i) values ('pancakes');
sqlite> select * from t;
i
11
pancakes 
```

因此您可以将任何类型的数据放在任何其他类型的列中。

但是，如果您使用检查表架构以确定如何将表数据转换为本机类型的工具，则需要模拟 ALTER TABLE ALTER COLUMN。AFAIK，这样做的唯一方法是丑陋的方式：

1.  创建一个具有您要查找的架构的新表。
2.  将旧表中的所有内容复制到新表中。
3.  删除原始表。
4.  使用 ALTER TABLE RENAME 将新的正确表重命名为原始名称。

我会以丑陋的方式去做，而忽略 SQLite 松散的类型系统；如果我`'pancakes'`在一个被声明为整数的列中找到，我会有点困惑，并对负责人说一些严厉的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:14:31.457

如本页所述

[http://www.sqlite.org/lang_altertable.html](http://www.sqlite.org/lang_altertable.html)

Sqlite 不支持该`ALTER TABLE ALTER COLUMN`语法。

正如我所看到的，您必须将列的值存储在其他地方，添加一个新列，将存储的值重写到新列中，然后删除旧列。

# java - 谁能解释@RequestMapping 和@RequestBody 是如何工作的？

> ID：13487964
> 
> 赞同：6
> 
> 时间：2012-11-21T07:01:04.807
> 
> 标签：java, spring-mvc

我对@RequestMapping 和@RequestBody 究竟是如何工作的有一些疑问。我有一个代码如下：

```
@Controller
public class CoreController {
@Autowired
LoggerExtension log;
@Autowired
DoService doService;
    @RequestMapping(value="/method.do")
public @ResponseBody String getActionResponse(HttpServletRequest request,HttpServletResponse response){         
    String action = request.getParameter("action");     
    String gender = request.getParameter("gender");
    String language = request.getParameter("language");
            if("getLanguage".equalsIgnoreCase(action)){
            returnResponse = doService.getUserLanguage(msisdn);
           }
     }
        return returnResponse;
       } 
```

我想知道上面的代码是如何工作的？请帮助我清除这些概念...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:32:10.713

[对于@RequestMapping](http://static.springsource.org/spring/docs/3.1.3.RELEASE/spring-framework-reference/htmlsingle/spring-framework-reference.html#mvc-ann-requestmapping)，Spring 文档解释得很好

> 您可以使用 @RequestMapping 注释将 /appointments 等 URL 映射到整个类或特定的处理程序方法。

在您的特定情况下， `@RequestMapping(value="/method.do")`意味着对 URI `/method.do`（例如`http://myserver.com/app/method.do`）的 http 请求（以任何方法）将由带注释的方法处理，`getActionResponse(HttpServletRequest,HttpServletResponse)`并且 Spring 将自动绑定参数。

至于`@ResponseBody`它说：

> 这个注解可以放在一个方法上，表示返回类型应该直接写到 HTTP 响应体

在您的特定情况下，这意味着带注释的方法的返回字符串将被写入响应输出流或写入器，就像您调用这样的东西：

```
String result = getActionResponse(request, response)
response.getWriter().print( result ); //Suppose result is "en_US" or something 
```

请参阅[ServletResponse#getWriter()](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletResponse.html#getWriter%28%29)或[ServletResponse#getOutputStream()](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletResponse.html#getOutputStream%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T07:28:44.277

所以它的作用很简单，根据 web.xml 的 xml 文件中表达的“url映射”

它将“method.do”附加到它

例如：我的应用程序名称是“Hello”，下面是我的 web.xml

```
<servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

现在您提到的网址将是`localhost/rest/method.do`

`@RequestMapping`是一种告诉处理 servlet，strign 的响应是实际响应的方式。理想情况下，您将拥有一个将输出转发到的视图。但在这种情况下，您的响应是视图，因此是注释`@RequestMapping`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T07:34:29.880

您看到的是使用 Spring 创建 WebService 的方式。
@RequestMapping 注解将值中的路径映射到方法。

所以（假设你的服务器设置在 localhost:8080 并且你的战争被命名为 'context'）如果你调用以下 url：

```
http://localhost:8080/war/method.do 
```

应用程序服务器和 spring 将在您的类上调用 getActionResponse 方法。

通常 getActionResponse 的返回值将被视为 url，因此如果您返回 String 'text'，服务器将重定向到 /war/text 。
@ResponseBody 注解告诉spring返回的String实际上应该作为响应的消息返回，所以在你调用之后，服务器会返回一个带有消息体“text”的200 OK响应。

编辑：忘记了 web.xml 中的基本映射，请参阅 Jatin 的回答。所以不是 htt'p://localhost:8080/war/method.do 而是 htt'p://localhost:8080/war/rest/method.do

# python - 通过 django 网络应用程序创建一个 torrent 文件和相关的跟踪器

> ID：13487966
> 
> 赞同：1
> 
> 时间：2012-11-21T07:01:18.467
> 
> 标签：python, django, web-applications, bittorrent, utorrent

以下是我要实现的目标的描述：

用户应该登录到网络应用程序，选择一个文件，网络应用程序应该生成一个 .torrent 文件和一个私人跟踪器（[http://IP_ADDRESS:PORT_NUMBER/announce](http://IP_ADDRESS:PORT_NUMBER/announce)）用于该 .torrent 文件。

基本上，我想在服务器端以编程方式创建一个 .torrent 文件。

我找到了两个库[mktorrent](http://mktorrent.sourceforge.net/)和[py3createtorrent](https://py3createtorrent.readthedocs.io/en/latest/user.html)，但我需要有关如何从 Django Web 应用程序创建 torrent 的帮助。

对于可以做到这一点的 Django 模块或库有什么建议吗？

任何建议/指针/想法/链接将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:56:30.523

安装 mktorrent 并运行`mktorrent -h`：

```
mktorrent 1.0 (c) 2007, 2009 Emil Renner Berthing

Usage: mktorrent [OPTIONS] <target directory or filename>

Options:
-a, --announce=<url>[,<url>]* : specify the full announce URLs
                                at least one is required
                                additional -a adds backup trackers
-c, --comment=<comment>       : add a comment to the metainfo
-d, --no-date                 : don't write the creation date
-h, --help                    : show this help screen
-l, --piece-length=<n>        : set the piece length to 2^n bytes,
                                default is 18, that is 2^18 = 256kb
-n, --name=<name>             : set the name of the torrent
                                default is the basename of the target
-o, --output=<filename>       : set the path and filename of the created file
                                default is <name>.torrent
-p, --private                 : set the private flag
-t, --threads=<n>             : use <n> threads for calculating hashes
                                default is 2
-v, --verbose                 : be verbose
-w, --web-seed=<url>[,<url>]* : add web seed URLs
                                additional -w adds more URLs

Please send bug reports, patches, feature requests, praise and
general gossip about the program to: esmil@users.sourceforge.net 
```

# postgresql - 写入特殊符号时postgres sql错误

> ID：13487968
> 
> 赞同：4
> 
> 时间：2012-11-21T07:01:30.607
> 
> 标签：postgresql

当我尝试将这两个单词写入 postgresql 时出现错误

Metro 
Logic 的

```
错误：编码“UTF8”的字节序列无效：0xa0
提示：如果字节序列与服务器预期的编码不匹配，也可能发生此错误，该编码由“client_encoding”控制。

错误：编码“UTF8”的字节序列无效：0x92
提示：如果字节序列与服务器预期的编码不匹配，也可能发生此错误，该编码由“client_encoding”控制。

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:34:27.650

您的输入编码不是 UTF-8。例如，如果我使用 psql 在 linux 中插入 ISO-8859-1 文件，我可以重现此行为。您应该更改输入编码。

# sql - 子串直到找到数字

> ID：13487971
> 
> 赞同：0
> 
> 时间：2012-11-21T07:01:46.397
> 
> 标签：sql

我有一个字符串`LCD32W58`。在这个字符串中，我想要子字符串，直到我得到数字，
例如`LCD32W58 --> LCD`

如果字符串在开头包含数字，那么我想要数字直到字符开始，
例如`55LM9600 --? 55`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:16:07.853

你可以使用这样的东西

```
if @nString like '[0-9]%'
    select @Result = left(@nString, patindex('%[A-Za-z]%', @nString) - 1)
else if @nString like '[A-Za-z]%'
    select @Result = left(@nString, patindex('%[0-9]%', @nString) - 1) 
```

你也可以使用`numbers`和`not numbers`风格

```
if @nString like '[0-9]%'
    select @Result = left(@nString, patindex('%[^0-9]%', @nString) - 1)
else
    select @Result = left(@nString, patindex('%[0-9]%', @nString) - 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:22:08.943

仅当字符串中只有数字和字母时，该方法才有效

```
private string ParseString(string s)
{            
    int i = 0;
    int j = 0;
    foreach (char c in s)
    {            
        if (isAlphanummeric(c)
        {
            if (j > 0)
                break;
            i++;
        }
        else if(isNummeric(c)
        {
            if (i > 0)
                break;
            j++;
        }
        else
        {
            throw new NotSupportedException(
                      "Only letters and numbers are expected.");
        }
    }

    return (s.Substring(0, (i > 0 ? i: j)));
}

private bool isAlphanummeric(Char decValue)
{
   return ((decValue > 64) && (decValue < 91)) ||
          ((decValue > 98) && (decValue < 123));
}

private bool isNummeric(Char decValue)
{
   return ((decValue > 47) && (decValue < 58));
} 
```

# python - Python 3 中的类对象/实例是通过引用传递的吗？

> ID：13487976
> 
> 赞同：6
> 
> 时间：2012-11-21T07:02:06.397
> 
> 标签：python, python-3.x

该程序修改了“myclass”类的对象_x 和_y，但我没有将它作为参数传递给函数try_block。对象如何被修改？

```
class AddSub:
    def _init_(self): #how do default parameters work? 
        self._x, _y

    def set_x(self, num):
        self._x = num

    def set_y(self, num):
        self._y = num   

    def add(self):
        return self._x + self._y

    def sub(self):
        return self._x - self._y

def try_block():
    try:
        ch = int(input("type 1 to add, and 2 to subtract: "))

        myclass.set_x(int(input("enter an x value: "))) #how does myclass get modifed?

        myclass.set_y(int(input("enter a y value: ")))

        return ch

    except ValueError:
        print("Invalid entry.")

        ch = try_block()

        return ch

myclass = AddSub()

choice = try_block()

if choice == 1:
    print(myclass.add())

elif choice == 2:
    print(myclass.sub()) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-21T07:29:00.500

在我回答你的问题之前，我想提一些关于术语的事情。你的`myclass`价值是一个实例，而不是一个类。您的代码中确实有一个类，名为`AddSub`. 当您调用时，`AddSub()`您创建了该类的一个实例。为此类事情学习正确的术语很重要，这样您就可以提出好的问题并理解您得到的答案。

您的代码接近工作，因为您将`AddSub`类的实例保存到名为`myclass`. `try_block`稍后，您从该函数调用该全局变量的一些方法。这在 Python 中是合法的，但通常不推荐。

相反，您应该将对象作为参数传递：

```
def try_block(value):
    try:
        value.set_x(whatever())
    except ValueError:
        pass 
```

您可以通过将 AddSub 类的实例传递给函数来调用它：

```
myAddSub = AddSub() # create the instance
try_block(myAddSub) # pass it to the function 
```

这要好得多，因为它不依赖于具有特定值的全局变量来工作`AddSub`，如果需要，您可以使用许多不同的实例调用它。

当前损坏的代码的一部分是`AddSub`类的构造函数。无需声明变量。您可以随时分配给他们。如果你想设置默认值，你也可以这样做：

```
def __init__(self):
    self._x = 0
    self._y = 0 
```

相反，如果您希望能够在构造对象时设置值，则可以向该`__init__`方法添加其他参数。它们也可以有默认值，允许调用者省略部分或全部：

```
def __init__(self, x=0, y=0):
    self._x = x
    self._y = y 
```

使用该定义，所有这些都将是构造`AddSub`实例的有效方法：

```
a = AddSub()     # gets default 0 value for both _x and _y
b = AddSub(5)    # gets default 0 value for _y
c = AddSub(y=5)  # gets default 0 value for _x
d = AddSub(2, 3) # no defaults! 
```

最后一点，主要与您的主要问题无关：您的`try_block`函数命名不佳，并且以比必要的更复杂的方式实现。而不是递归，我认为它作为一个循环更有意义，就像在这个伪代码版本中一样：

```
def exception_prone_task():
    while True: # loops forever, or until a "return" or "break" statement happens
         try:
             result = do_stuff_that_might_raise_an_exception()
             return result # you only get here if no exception happened

         except WhateverExceptions as e:
             report_about_about_the_exceptions(e) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T07:27:07.227

简短的回答：Python 中的所有内容都是通过引用传递的。（有些人喜欢加上“按参考*值*”）。

更长的答案是您的代码有点混乱。（没问题，可以改进。）

首先，`myclass`不应该这样调用，因为它不是一个类。它是类的一个实例`AddSub`——即该类的*对象*。

其次，类不应该被赋予*动词*的名称。它们应该是*名词*。

每个类方法的第一个参数应该是`self`（为简单起见）。下一个参数是在创建类时传递的参数（即，当使用类名时，就像调用函数一样）。

每当你想给参数一个默认值时，你只需`=value`在参数之后写。

作为未来对象一部分的方法定义中的所有内容都必须以`self.`（简化）为前缀。这样，你`__init__`应该看起来像：

```
 def _init_(self, x=1, y=2): #how do default parameters work? 
        self._x = x
        self._y = y 
```

在我看来，对象变量没有必要使用`_`（下划线）前缀。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-21T07:27:32.147

`myclass`在模块顶层定义，因此可以作为全局变量访问。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-21T07:28:41.723

Python 中的一切都是对象。因此：参考

# c# - 在c#中需要以下VB逻辑

> ID：13487982
> 
> 赞同：-3
> 
> 时间：2012-11-21T07:02:33.633
> 
> 标签：c#, vb.net, logic

我需要 c# 中的以下逻辑：

```
Dim sampleText As String, Key As String;
Dim KeyLength As Long,  Position As Long;
Dim character as integer;

For Position = 1 To Len(sampleText)
        character = Asc(Mid$(Key, (Position Mod KeyLength) - KeyLength * ((Position Mod KeyLength) = 0), 1))
        Mid$(sampleText, Position, 1) = Chr(Asc(Mid$(sampleText, Position, 1)) Xor character)
    Next Position 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T07:35:59.827

你去：

**C＃**

```
character = Strings.Asc(Strings.Mid(Key, (Position % KeyLength) - KeyLength * ((Position % KeyLength) == 0), 1));
Strings.Mid(sampleText, Position, 1) = Strings.Chr(Strings.Asc(Strings.Mid(sampleText, Position, 1)) ^ character); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:53:10.583

VB 中的“Mid”语句没有直接等价的（与“Mid”函数不同）：

```
string sampleText = null;
string Key = null;
long KeyLength = 0;
long Position = 0;
int character = 0;

for (Position = 1; Position <= sampleText.Length; Position++)
{
    character = Convert.ToInt32(Key[(Position % KeyLength) - KeyLength * ((Position % KeyLength) == 0) - 1]);
    SimulateMidStatement.MidStatement(sampleText, Position, (char)(Convert.ToInt32(sampleText[Position - 1]) ^ character), 1);
}

//----------------------------------------------------------------------------------------
//  Copyright © 2003 - 2012 Tangible Software Solutions Inc.
//  This class can be used by anyone provided that the copyright notice remains intact.
//
//  This class simulates the behavior of the classic VB 'Mid' statement.
//  (Note that this is unrelated to the VB 'Mid' function).
//----------------------------------------------------------------------------------------
public static class SimulateMidStatement
{
    public static void MidStatement(ref string target, int oneBasedStart, char insert)
    {
        if (target == null)
            return;

        target = target.Remove(oneBasedStart - 1, 1).Insert(oneBasedStart - 1, insert.ToString());
    }
    public static void MidStatement(ref string target, int oneBasedStart, string insert)
    {
        if (target == null || insert == null)
            return;

        target = target.PadRight(target.Length + insert.Length).Remove(oneBasedStart - 1, insert.Length).Insert(oneBasedStart - 1, insert).Substring(0, target.Length);
    }
    public static void MidStatement(ref string target, int oneBasedStart, string insert, int length)
    {
        if (target == null || insert == null)
            return;

        int minLength = System.Math.Min(insert.Length, length);
        target = target.PadRight(target.Length + insert.Length).Remove(oneBasedStart - 1, minLength).Insert(oneBasedStart - 1, insert.Substring(0, minLength)).Substring(0, target.Length);
    }
} 
```

# jakarta-ee - 在哪里使用 EJB 3.1 和 CDI？

> ID：13487987
> 
> 赞同：130
> 
> 时间：2012-11-21T07:02:57.713
> 
> 标签：jakarta-ee, ejb, cdi

我正在制作一个基于 Java EE 的产品，其中我使用[GlassFish](https://en.wikipedia.org/wiki/GlassFish) 3 和 EJB 3.1。

我的应用程序有[会话 bean](https://en.wikipedia.org/wiki/Enterprise_JavaBeans#Session_beans)、调度程序并使用 Web 服务。我最近了解了支持[Contexts and Dependency Injection (CDI)的](https://jcp.org/en/jsr/detail?id=346)[Apache TomEE](https://en.wikipedia.org/wiki/Apache_TomEE)。GlassFish 容器还支持 CDI。

我可以在不需要 CDI 还没有提供的任何功能的情况下替换会话 bean 吗？如果那样的话，我能得到什么好处？

* * *

## 回答 #1

> 赞同：440
> 
> 时间：2012-11-22T01:42:13.057

是的，您可以自由地混合 CDI 和 EJB 并取得一些很好的结果。听起来您正在使用`@WebService`and `@Schedule`，这是将 EJB 添加到混合中的充分理由。

那里有很多混乱，所以这里有一些关于 EJB 和 CDI 的一般信息，因为它们相互关联。

## EJB >= CDI

请注意，EJB**是**CDI bean，因此具有 CDI 的所有优点。反过来是不正确的（还）。所以绝对不要养成思考“EJB vs CDI”的习惯，因为这种逻辑实际上转化为“EJB+CDI vs CDI”，这是一个奇怪的等式。

在 Java EE 的未来版本中，我们将继续调整它们。对齐的意思是允许人们做他们已经可以做的事情，只是在顶部没有`@Stateful`,`@Stateless`或注释。`@Singleton`

## 实施术语中的 EJB 和 CDI

最终，EJB 和 CDI 共享相同的被代理组件的基本设计。当您获得对 EJB 或 CDI bean 的引用时，它并不是真正的 bean。而是给您的对象是假的（代理）。当你在这个假对象上调用一个方法时，调用会转到容器，容器将通过拦截器、装饰器等发送调用，并负责任何事务或安全检查。完成所有这些后，调用最终会转到真实对象，并且结果会通过代理传递回调用者。

不同之处仅在于如何解析要调用的对象。“已解决”是指容器在何处以及如何查找要调用的真实实例。

在 CDI 中，容器在“范围”中查找，该范围基本上是一个存在特定时间段的哈希图（每个请求`@RequestScoped`、每个 HTTP 会话`@SessionScoped`、每个应用程序`@ApplicationScoped`、JSF 会话`@ConversationScoped`或每个自定义范围实现）。

在 EJB 中，如果 bean 的类型为 ，容器也会查看 hashmap `@Stateful`。一个`@Stateful`bean 还可以使用任何上述范围注释，使其与范围内的所有其他 bean 一起生存和死亡。在 EJB`@Stateful`中，本质上是“任何范围的”bean。这`@Stateless`基本上是一个实例池——您在一次调用期间从池中获取一个实例。`@Singleton`本质上是`@ApplicationScoped`

所以从根本上说，你可以用“EJB”bean 做的任何事情都应该可以用“CDI”bean 做。在幕后，很难将它们区分开来。除了解决实例的方式之外，所有管道都是相同的。

它们目前在执行此代理时容器将提供的服务方面并不相同，但正如我所说，我们正在 Java EE 规范级别进行处理。

### 性能说明

忽略你可能拥有的任何“轻”或“重”的心理图像。这就是营销。它们大部分具有相同的内部设计。CDI 实例解析可能更复杂一些，因为它更具动态性和上下文关系。相比之下，EJB 实例解析是相当静态、愚蠢和简单的。

我可以从 TomEE 的实现角度告诉您，调用 EJB 与调用 CDI bean 之间的性能差异几乎为零。

## 默认为 POJO，然后是 CDI，然后是 EJB

当然不要在没有好处的时候使用 CDI 或 EJB。当你开始需要注入、事件、拦截器、装饰器、生命周期跟踪和类似的东西时，就加入 CDI。大多数时候都是这样。

除了这些基础知识之外，还有许多有用的容器服务，只有在您通过添加 、 或 使您的 CDI bean 也成为 EJB 时，您才可以选择`@Stateful`使用`@Stateless`它`@Singleton`。

以下是我何时分解 EJB 的简短列表。

### 使用 JAX-WS

公开 JAX-WS `@WebService`。我很懒。当`@WebService`也是 EJB 时，您不必列出它并将其映射为`web.xml`文件中的 servlet。这对我来说是工作。另外，我可以选择使用下面提到的任何其他功能。所以这对我来说是理所当然的。

仅`@Stateless`适用于`@Singleton`。

### 使用 JAX-RS

通过 . 公开 JAX-RS 资源`@Path`。我还是很懒。当 RESTful 服务也是 EJB 时，您再次获得自动发现，而不必将其添加到 JAX-RS`Application`子类或类似的东西中。`@WebService`另外，如果我想要或使用下面提到的任何强大功能，我可以公开完全相同的 bean 。

仅`@Stateless`适用于`@Singleton`。

### 启动逻辑

启动时通过 加载`@Startup`。目前在 CDI 中没有与此等效的功能。不知何故，我们错过了`AfterStartup`在容器生命周期中添加事件之类的东西。如果我们这样做了，你就可以拥有一个`@ApplicationScoped`监听它的 bean，它实际上与`@Singleton`with相同`@Startup`。它在 CDI 1.1 的列表中。

仅适用于`@Singleton`。

### 并行工作

`@Asynchronous`方法调用。在任何服务器端环境中，启动线程都是禁止的。线程过多是严重的性能杀手。此注释允许您并行化您使用容器的线程池所做的事情。这太棒了。

可用于`@Stateful`和。`@Stateless``@Singleton`

### 安排工作

`@Schedule`or`ScheduleExpression`基本上是一个 cron 或`Quartz`功能。也非常棒。大多数容器只是为此使用 Quartz。然而，大多数人不知道 Java EE 中的调度工作是事务性的！如果您更新数据库然后安排一些工作并且其中一个失败，则两者都会自动清理。如果`EntityManager`持久调用失败或刷新有问题，则无需取消计划工作。是的，交易。

仅`@Stateless`适用于`@Singleton`。

### 在 JTA 事务中使用 EntityManager

上面关于事务的注意事项当然要求您使用`JTA`托管的`EntityManager`. `UserTransaction`您可以将它们与普通的“CDI”一起使用，但如果没有容器管理的事务，复制提交/回滚逻辑会变得非常单调。

可用于所有 Java EE 组件，包括 CDI 、JSF、、、、`@ManagedBean`等。但是，注释仅可用于，并且仅可用于。`@WebServlet``@WebListener``@WebFilter``@TransactionAttribute``@Stateful``@Stateless``@Singleton`

### 管理 JTA`EntityManager`

`EXTENDED`托管允许您在事务之间`EntityManager`保持`EntityManager`打开状态，`JTA`并且不会丢失缓存的数据。适合时间和地点的好功能。负责任地使用:)

仅适用于`@Stateful`。

### 轻松同步

当您需要同步时，`@Lock(READ)`和`@Lock(WRITE)`注释非常好。它允许您免费获得并发访问管理。跳过所有 ReentrantReadWriteLock 管道。在同一个存储桶中是`@AccessTimeout`，它允许您说明线程在放弃之前应该等待多长时间才能访问 bean 实例。

仅适用于`@Singleton`豆类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T08:18:10.910

如果您真的没有使用 ejb 3.1 的任何功能，答案很简单。但猜猜你的问题表明你怀疑有 ejb 3.1 概念让你受益，但没有意识到它们。一个例子可能是容器可以保持一个 slsb 池随时可用，这样 jms 和数据库连接就不必作为请求的一部分注入

# python - 关于 Pyramid 中的 add_static_view 和 static_url

> ID：13487988
> 
> 赞同：0
> 
> 时间：2012-11-21T07:03:09.323
> 
> 标签：python, web, pylons, pyramid

我像这样添加静态视图：

```
config.add_static_view('CF_static', 'cistromeprimerscanner:templates/static', cache_max_age=604800) 
```

当我想在模板文件中使用静态目录中的文件时，我需要这样写，很长：

```
${request.static_url('cistromeprimerscanner:templates/static/logo.png')} 
```

我想知道为什么我不应该这样写：

```
$(request.static_url("CF_static/logo.png")} 
```

就像：

```
${request.route_path("CF_view")} 
```

有人对此有想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:41:25.290

文档[`static_url`](http://pyramid.readthedocs.org/en/latest/api/request.html#pyramid.request.Request.static_url)指定您可以使用相对路径，但我认为这可能会在某些时候导致问题（您不希望您的代码在移动某些文件后停止工作）。

添加自己的请求方法很容易，这将是一种快捷方式。例如 ：

```
def CF_static(request, path):
    return request.static_url('cistromeprimerscanner:templates/static/%s'%pth)
config.add_request_method(CF_static) 
```

然后，您可以编写：

```
${request.CF_static('logo.png')} 
```

[`add_request_method`](http://pyramid.readthedocs.org/en/latest/api/config.html#pyramid.config.Configurator.add_request_method)在金字塔 1.4 中可用。如果您不想使用 alpha，则可以`set_request_property`改用。

# java - 如何配置 Eclipse WTP 部署？

> ID：13487990
> 
> 赞同：0
> 
> 时间：2012-11-21T07:03:16.547
> 
> 标签：java, eclipse, eclipse-wtp

当我在我的 WTP Dynamic web 项目中单击服务器上的“运行”时，似乎有一个关于我`WebApp-root`是什么、Java 文件放在哪里等的默认配置。我该如何自定义呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:08:06.750

您没有告诉您尝试使用的框架（模块）。我希望您从 Servlets/JSP 开始。请参考教程。试试这个链接[http://www.vogella.com/articles/EclipseWTP/article.html](http://www.vogella.com/articles/EclipseWTP/article.html)

# objective-c - Objective-C 的 BER-TLV 开源库

> ID：13487992
> 
> 赞同：6
> 
> 时间：2012-11-21T07:03:22.817
> 
> 标签：objective-c, smartcard, tlv

我打算从智能卡响应中解析 BER-TLV 格式来解释数据。

它类似于[JACCAL](http://jaccal.sourceforge.net/)，但在 Objective-C 或 C++ 中

任何人都可以参考任何开源项目或任何参考来做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T19:21:22.250

这是一个解码 ASN.1 BER 格式的项目。 [https://github.com/chrisridd/asn1-dump/](https://github.com/chrisridd/asn1-dump/)

位于此文件中的主要逻辑： [https ://github.com/chrisridd/asn1-dump/blob/master/berd.m](https://github.com/chrisridd/asn1-dump/blob/master/berd.m)

如果有足够的时间，阅读标准后编写自己的解码器并不难： http: [//www.itu.int/ITU-T/studygroups/com17/languages/X.690-0207.pdf](http://www.itu.int/ITU-T/studygroups/com17/languages/X.690-0207.pdf) http:/ /luca.ntop.org/Teaching/Appunti/asn1.html

解码流程是这样的：读取标签、长度、值序列。

*   从标签你会得到

    *   数据类，通常是通用的（标准中的预定义类型，如“Boolean”、“Sequence”...）和特定于上下文的（以区分具有相同类型的不同字段）。
    *   原始（如布尔和整数）或构造（通常是序列）。因为构造类型可以包含原始类型或构造类型。可能需要递归解码。
    *   标签号，确定数据类型（布尔？整数？位串？）
*   长度：

    *   确定要解码的内容的长度（可能需要递归解码）。
    *   长度有两种形式（短和长）。你最好两个都支持。
*   值：在当前 TLV 级别中读取的实际值。如果这是一个构造数据（如序列），则该值将包含 TLV 的内部级别。

在标准的末尾（http://www.itu.int/ITU-T/studygroups/com17/languages/X.690-0207.pdf）有一个图像显示多级TLV，也许可以更好地帮助你理解误码率。

阅读标准后，最好的方法是： 1）找一些 GUI 查看器查看一些 BER 证书文件，熟悉它。谷歌“ASN.1 查看器”找到。2）开始看代码[https://github.com/chrisridd/asn1-dump/blob/master/berd.m](https://github.com/chrisridd/asn1-dump/blob/master/berd.m)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T14:08:49.043

tlve怎么样？[http://tlve.sourceforge.net/](http://tlve.sourceforge.net/)

苹果的 Tokend 似乎也很有用：[http ://www.opensource.apple.com/source/Tokend/Tokend-36720/PIV/TLV.cpp](http://www.opensource.apple.com/source/Tokend/Tokend-36720/PIV/TLV.cpp)

sourceforge 上的 jayacard 是另一个处理此问题的项目，现在似乎已被废弃，但来源在这里： http: [//www.codeforge.com/read/7149/tlv.c__html](http://www.codeforge.com/read/7149/tlv.c__html)

# .net - 正则表达式 .Net Regex.Replace

> ID：13487993
> 
> 赞同：0
> 
> 时间：2012-11-21T07:03:23.160
> 
> 标签：.net, regex

是否可以用某个常量值或另一个命名匹配替换命名匹配？假设我有输入字符串，如果它包含“123”，则将“123”替换为“567”，如果字符串包含“234”，我希望将其替换为“678”。我需要使用 Regex.Replace 来做到这一点，因为我使用使用 Regex.Replace 的 API，并且更改该 API 不是我想要的。

所以我为那个 API matchPattern 和 replacePattern 提供了什么来得到类似的东西：

`Regex.Replace("123", matchPattern, replacePattern)`返回“567”

`Regex.Replace("234", matchPattern, replacePattern)`返回“678”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:13:00.053

仅使用正则表达式替换调用是不可能的。但是你可以提供一个回调函数：

```
public String Replacer(Match m) {
    if (m.Groups[0].Value == "123")
       return "567";
    else if (m.Groups[0].Value == "456")
       return "678";
}

resultString = Regex.Replace(subject, @"\b(?:123|456)\b", new MatchEvaluator(Replacer)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:42:18.167

我希望还有其他一些方法可以做到这一点，但我想出了以下使用`named groups`and的方法`anonymous methods`。

在我的示例中，我假设 123、456、789 将分别替换为 111、444、777，而 000 将在字符串中保持不变。

我使用了一种方法来处理`name the group`将用作`a replacement value`. 例如在这部分：

(?<111>123) = 值 123 将被 111 替换，其中 111 也是组的名称。

因此，一般模式将变为：`(?<ValueToReplace>ValueToSearch)`

这是一个示例代码：

```
Dim sampleText = "123 456 789 000"
Dim re As New Regex("\b(?<111>123)\b|\b(?<444>456)\b|\b(?<777>789)\b")
Dim count As Integer = re.Matches(sampleText).Count
Dim contents As String = re.Replace(sampleText, New MatchEvaluator(Function(c) re.GetGroupNames().Skip(1).ToArray().GetValue(c.Captures(0).Index Mod count).ToString())) 
```

根据您的方法，我希望您在 VB.Net 中工作，但我也附上了 C# 版本。

这是 C# 版本：

```
var sampleText = @"123 456 789 000";
Regex re = new Regex(@"\b(?<111>123)\b|\b(?<444>456)\b|\b(?<777>789)\b");
int count = re.Matches(sampleText).Count;
string contents = re.Replace(sampleText, new MatchEvaluator((c) => re.GetGroupNames().Skip(1).ToArray().GetValue(c.Captures[0].Index % count).ToString())); 
```

# hibernate - 使用 spring-data-jpa 从数据库中删除详细信息

> ID：13487997
> 
> 赞同：0
> 
> 时间：2012-11-21T07:03:52.237
> 
> 标签：hibernate, spring-data-jpa

现在我正在使用 spring-data-jpa & hibernate。我想从课程中删除一个 courseDetail，但是在我在下面运行我的代码之后 courseDetail 仍然在数据库中。

谁能告诉我这是怎么发生的？

提前致谢。

```
@Transactional(readOnly = false)
public void deleteCourseDetail(Long id, Long courseId) {
    Course course = courseDao.findOne(courseId);
    CourseDetail courseDetail = courseDetailDao.findOne(id);
    System.out.println(course.getCourseDetails().size());
    course.getCourseDetails().remove(courseDetail);
    System.out.println("after: " + course.getCourseDetails().size());
    courseDao.save(course);
}

@OneToMany(mappedBy = "course", fetch = FetchType.LAZY, cascade = {CascadeType.ALL})
public List<CourseDetail> getCourseDetails() {
    return courseDetails;
} 
```

现在它在我添加 courseDetailDao.delete(id); 后工作 保存方法后面。但为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:33:05.783

您应该将“删除孤儿”作为级联类型。

如果不是，删除一个条目仅仅意味着删除和`courseDetails`之间的关系。这并不意味着从数据库中删除 courseDetail`Course``CourseDetail`

# hibernate - 使用 Spring Data JPA 进行排序 - 自定义存储库

> ID：13487998
> 
> 赞同：1
> 
> 时间：2012-11-21T07:03:53.133
> 
> 标签：hibernate, sorting, spring-data-jpa

我有 JpaAdvertiseCacheRepositoryImpl，它是 SpringDataJpa 的自定义存储库实现。我需要这个来满足复杂的标准。

我设法通过 Predicates 过滤条件并通过 TypedQuery 进行分页。

我现在的大问题是排序！在 repo 的自定义实现中找不到执行此操作的方法。

有人知道该怎么做吗？

肿瘤坏死因子

```
public class JpaAdvertiseCacheRepositoryImpl implements JpaAdvertiseCacheRepositoryCustom {

    @PersistenceContext
    private EntityManager em;

    @Override
    public List<AdvertiseCacheJpa> findByFilter(FilterBuilder filter) {

        CriteriaBuilder builder = em.getCriteriaBuilder();
        CriteriaQuery<AdvertiseCacheJpa> query = builder.createQuery(AdvertiseCacheJpa.class);
        Root<AdvertiseCacheJpa> from = query.from(AdvertiseCacheJpa.class);

        //apply filter <- applyFilter returns array of predicates
        Predicate[] predicates = applyFilter(filter, builder, from);

        if (predicates.length > 0) {
            //query.where(builder.and(predicates));
            query.where(predicates);
        }

       //apply sorting <- THIS HAVE TO WORK SOON :)
        Sort sort = new Sort(Sort.Direction.ASC, "price");
       //query.orderBy()

       //apply pagination
       TypedQuery typedQuery = em.createQuery(query);
       typedQuery = typedQuery.setFirstResult(filter.getOffset());
       typedQuery = typedQuery.setMaxResults(filter.getMaxItemsPerPage());
       return typedQuery.getResultList();
      //return  em.createQuery(query).getResultList();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T12:35:34.620

如果 AdvertiseCacheJpa 模型包含“价格”字段（从这部分代码中未知它来自哪个模型），应该是这样的：

另外，CriteriaBuilder 对 Spring 的 Sort 对象一无所知，所以这里不能直接使用。

代替

```
//apply sorting <- THIS HAVE TO WORK SOON :)
Sort sort = new Sort(Sort.Direction.ASC, "price");
//query.orderBy() 
```

用这个

```
query.orderBy(builder.asc(from.get("price"))); 
```